{"pid": "P11398", "type": "P", "difficulty": 6, "samples": [["0 4 5\n2 1 3 3 1 1 1 2\n2 0\n1 4 6\n2 6\n1 3 8\n2 7\n", "2\n4\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "洛谷原创", "分块", "洛谷月赛"], "title": "众数", "background": "", "description": "你有 $n$ 个数对 $(a_1,b_1),\\ldots,(a_n,b_n)$。\n\n定义**下标** $i(1\\le i\\le n)$ 的权值为将 $a_1$ 个 $b_1$，$a_2$ 个 $b_2$，...，$a_i$ 个 $b_i$ 拼接在一起后形成的数组的**最大众数**（特别地，若所有数出现次数相同则为最大数）乘以 $a_i$。\n\n接下来你有 $m$ 个操作，分两种：\n- `1 x y`，将 $a_x$ 增加 $y$。**保证 $y$ 非负。**\n- `2 q`，求最小的正整数 $k$ 使得**下标** $n-k+1 \\sim n$ 的权值异或和为 $q$。\n\n2 操作保证有解，且所有答案之和（记为 $\\sum k$）不超过 $5\\times 10^7$。", "inputFormat": "输入的第一行有三个正整数 $T,n,m$，分别表示测试点编号（样例为 $0$，Hack 数据是 $26\\sim 100$ 之间的自然数）、数对个数和操作个数。\n\n第二行有 $2n$ 个正整数 $a_1,b_1,a_2,b_2,\\ldots,a_n,b_n$，其中第 $2i-1$ 和第 $2i$ 个数分别表示第 $i$ 个数对的 $a_i,b_i$。\n\n之后有 $m$ 行，每行有一个操作，格式见题目描述。", "outputFormat": "对于每个 2 操作，输出一行一个正整数表示答案。", "hint": "【样例解释】\n\n最开始的四个数组为 $(2,1), (3,3),(1,1),(1,2)$。以计算下标 $2,4$ 的权值为例展示权值的计算方法：\n\n- 要计算下标 $2$ 的权值，就要把 $2$ 个 $1$、$3$ 个 $3$ 拼在一起得到 $[1,1,3,3,3]$，最大众数为 $3$；$a_2=3$，所以权值为 $3\\times 3 = 9$。\n- 要计算下标 $4$ 的权值，就要把 $2$ 个 $1$、$3$ 个 $3$、$1$ 个 $1$、$1$ 个 $2$ 拼在一起得 $[1,1,3,3,3,1,2]$，最大众数为 $3$；$a_4=1$，所以权值为 $3\\times 1=3$。\n\n以此类推，可知下标 $1,2,3,4$ 的权值依次为 $2,9,3,3$。当 $k=2$ 时，$3,4$ 的权值异或和 $3\\oplus 3$ 恰为 $0$，符合题意。\n\n接下来将 $a_4$ 增加 $6$ 变成 $7$，显然前 $3$ 个下标权值不变，下标 $4$ 的权值变成 $2\\times 7=14$。此时所有下标权值异或和 $2\\oplus 9\\oplus 3\\oplus 14=6$，符合题意，所以此时 $k=4$。\n\n然后把 $a_3$ 增加 $8$ 变成 $9$。现在 $1\\sim 4$ 的权值依次为 $2,9,9,7$，此时 $k=1,3$ 时对应的权值异或和都是 $7$，此时取更小的 $k$，所以输出 $1$。\n\n【数据范围】\n\n记 $L$ 为所有操作结束后，所有 $a_i$ 的最大值（例如样例中，$L=9$。）\n\n|测试点编号|$n,m\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 2$|$30$|$a_i,y\\le 30$|\n|$3\\sim 4$|$500$||\n|$5\\sim 7$|$2000$||\n|$8\\sim 9$|$3\\times 10^5$|只有 2 操作|\n|$10$|$3\\times 10^5$|$b_i=1$|\n|$11\\sim 12$|$3\\times 10^5$|$b_i\\le 2$|\n|$13\\sim 15$|$3\\times 10^5$|$\\sum k\\le 5\\times 10^5$|\n|$16\\sim 19$|$3\\times 10^5$|$k\\le 300$|\n|$20\\sim 25$ |$3\\times 10^5$||\n\n对于全部数据，保证 $3\\le n,m\\le 3\\times 10^5$，且 $1\\le b_i\\le n$，$1\\le a_i\\le L\\le 10^9$。\n\n2 操作保证有解，且 $\\sum k\\le 5\\times 10^7$。\n\n**提示：本题读入量较大，建议选用较快的输入输出方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "众数", "background": "", "description": "你有 $n$ 个数对 $(a_1,b_1),\\ldots,(a_n,b_n)$。\n\n定义**下标** $i(1\\le i\\le n)$ 的权值为将 $a_1$ 个 $b_1$，$a_2$ 个 $b_2$，...，$a_i$ 个 $b_i$ 拼接在一起后形成的数组的**最大众数**（特别地，若所有数出现次数相同则为最大数）乘以 $a_i$。\n\n接下来你有 $m$ 个操作，分两种：\n- `1 x y`，将 $a_x$ 增加 $y$。**保证 $y$ 非负。**\n- `2 q`，求最小的正整数 $k$ 使得**下标** $n-k+1 \\sim n$ 的权值异或和为 $q$。\n\n2 操作保证有解，且所有答案之和（记为 $\\sum k$）不超过 $5\\times 10^7$。", "inputFormat": "输入的第一行有三个正整数 $T,n,m$，分别表示测试点编号（样例为 $0$，Hack 数据是 $26\\sim 100$ 之间的自然数）、数对个数和操作个数。\n\n第二行有 $2n$ 个正整数 $a_1,b_1,a_2,b_2,\\ldots,a_n,b_n$，其中第 $2i-1$ 和第 $2i$ 个数分别表示第 $i$ 个数对的 $a_i,b_i$。\n\n之后有 $m$ 行，每行有一个操作，格式见题目描述。", "outputFormat": "对于每个 2 操作，输出一行一个正整数表示答案。", "hint": "【样例解释】\n\n最开始的四个数组为 $(2,1), (3,3),(1,1),(1,2)$。以计算下标 $2,4$ 的权值为例展示权值的计算方法：\n\n- 要计算下标 $2$ 的权值，就要把 $2$ 个 $1$、$3$ 个 $3$ 拼在一起得到 $[1,1,3,3,3]$，最大众数为 $3$；$a_2=3$，所以权值为 $3\\times 3 = 9$。\n- 要计算下标 $4$ 的权值，就要把 $2$ 个 $1$、$3$ 个 $3$、$1$ 个 $1$、$1$ 个 $2$ 拼在一起得 $[1,1,3,3,3,1,2]$，最大众数为 $3$；$a_4=1$，所以权值为 $3\\times 1=3$。\n\n以此类推，可知下标 $1,2,3,4$ 的权值依次为 $2,9,3,3$。当 $k=2$ 时，$3,4$ 的权值异或和 $3\\oplus 3$ 恰为 $0$，符合题意。\n\n接下来将 $a_4$ 增加 $6$ 变成 $7$，显然前 $3$ 个下标权值不变，下标 $4$ 的权值变成 $2\\times 7=14$。此时所有下标权值异或和 $2\\oplus 9\\oplus 3\\oplus 14=6$，符合题意，所以此时 $k=4$。\n\n然后把 $a_3$ 增加 $8$ 变成 $9$。现在 $1\\sim 4$ 的权值依次为 $2,9,9,7$，此时 $k=1,3$ 时对应的权值异或和都是 $7$，此时取更小的 $k$，所以输出 $1$。\n\n【数据范围】\n\n记 $L$ 为所有操作结束后，所有 $a_i$ 的最大值（例如样例中，$L=9$。）\n\n|测试点编号|$n,m\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 2$|$30$|$a_i,y\\le 30$|\n|$3\\sim 4$|$500$||\n|$5\\sim 7$|$2000$||\n|$8\\sim 9$|$3\\times 10^5$|只有 2 操作|\n|$10$|$3\\times 10^5$|$b_i=1$|\n|$11\\sim 12$|$3\\times 10^5$|$b_i\\le 2$|\n|$13\\sim 15$|$3\\times 10^5$|$\\sum k\\le 5\\times 10^5$|\n|$16\\sim 19$|$3\\times 10^5$|$k\\le 300$|\n|$20\\sim 25$ |$3\\times 10^5$||\n\n对于全部数据，保证 $3\\le n,m\\le 3\\times 10^5$，且 $1\\le b_i\\le n$，$1\\le a_i\\le L\\le 10^9$。\n\n2 操作保证有解，且 $\\sum k\\le 5\\times 10^7$。\n\n**提示：本题读入量较大，建议选用较快的输入输出方式。**", "locale": "zh-CN"}}}
{"pid": "P11399", "type": "P", "difficulty": 3, "samples": [["6\n7 5 4 1 2 8", "ZYBZYB"], ["5\n1 2 6 1 1", "Internationale!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "Code+"], "title": "[Code+#8 初赛] 集合划分", "background": "搬运自 [Code+ #8 初赛](https://gitlink.org.cn/thusaa/codeplus8pre)。", "description": "小 B、小 Y 和小 Z 是形影不离的好朋友，同时也是坚定的 xx 主义者。\n\n这天，他们得到了 $n$ 块蛋糕，第 $i$ 块重量是 $a_i$。 蛋糕不能切开，只能整块地分给某一个人；蛋糕更不能浪费，即每块蛋糕都应归于三个人中的一个。\n\n他们都具有大公无私的奉献精神，因此毫不在意自己分到的蛋糕重量比其他人小；但本着“主义高于友谊”的原则，他们必须保证任何两个人分到的蛋糕重量之和都严格大于第三个人，否则分到重量最小的两个人就会联合起来把旧世界打个落花流水。\n\n由于生产力过度发达，蛋糕的数量和重量都已经远远超出他们的人脑计算能力，于是他们前来请教掌握计算机技术的你，希望你能为他们给出一组合理的分配方案，或确定该方案不存在。", "inputFormat": "输入共包含两行。\n\n第一行输入一个正整数 $n$。\n\n第二行输入 $n$ 个正整数 $a_1,a_2,…,a_n$。", "outputFormat": "若不存在合法的分配方案，输出 `Internationale!`。\n\n若存在，则输出一个长度为 $n$ 的字符串，每个字符均为 `B`、`Y`、`Z` 中的一个，第 $i$ 个字符代表第 $i$ 块蛋糕的归属。\n\n若有多组合法方案，给出任意一组即可。", "hint": "**本题采用子任务评测。你必须通过一个子任务内的全部测试点，才能获得对应的分数。**\n\n对于全部数据，$3\\le n\\le 2\\times 10^5,\\ 1\\le a_i\\le 10^9$。\n\n子任务 $1$（$10$ 分）：保证 $n=3$。\n\n子任务 $2$（$16$ 分）：保证 $n\\le 16$。\n\n子任务 $3$（$16$ 分）：保证 $n\\le 10^3,a_i\\le n$。\n\n子任务 $4$（$28$ 分）：保证存在合法解。\n\n子任务 $5$（$30$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#8 初赛] 集合划分", "background": "搬运自 [Code+ #8 初赛](https://gitlink.org.cn/thusaa/codeplus8pre)。", "description": "小 B、小 Y 和小 Z 是形影不离的好朋友，同时也是坚定的 xx 主义者。\n\n这天，他们得到了 $n$ 块蛋糕，第 $i$ 块重量是 $a_i$。 蛋糕不能切开，只能整块地分给某一个人；蛋糕更不能浪费，即每块蛋糕都应归于三个人中的一个。\n\n他们都具有大公无私的奉献精神，因此毫不在意自己分到的蛋糕重量比其他人小；但本着“主义高于友谊”的原则，他们必须保证任何两个人分到的蛋糕重量之和都严格大于第三个人，否则分到重量最小的两个人就会联合起来把旧世界打个落花流水。\n\n由于生产力过度发达，蛋糕的数量和重量都已经远远超出他们的人脑计算能力，于是他们前来请教掌握计算机技术的你，希望你能为他们给出一组合理的分配方案，或确定该方案不存在。", "inputFormat": "输入共包含两行。\n\n第一行输入一个正整数 $n$。\n\n第二行输入 $n$ 个正整数 $a_1,a_2,…,a_n$。", "outputFormat": "若不存在合法的分配方案，输出 `Internationale!`。\n\n若存在，则输出一个长度为 $n$ 的字符串，每个字符均为 `B`、`Y`、`Z` 中的一个，第 $i$ 个字符代表第 $i$ 块蛋糕的归属。\n\n若有多组合法方案，给出任意一组即可。", "hint": "**本题采用子任务评测。你必须通过一个子任务内的全部测试点，才能获得对应的分数。**\n\n对于全部数据，$3\\le n\\le 2\\times 10^5,\\ 1\\le a_i\\le 10^9$。\n\n子任务 $1$（$10$ 分）：保证 $n=3$。\n\n子任务 $2$（$16$ 分）：保证 $n\\le 16$。\n\n子任务 $3$（$16$ 分）：保证 $n\\le 10^3,a_i\\le n$。\n\n子任务 $4$（$28$ 分）：保证存在合法解。\n\n子任务 $5$（$30$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11400", "type": "P", "difficulty": 0, "samples": [["3 2 2 2\n1 2\n2 3\n2 3 5\n2 6\n2 2\n3 3", "2 1"], ["3 3 3 2\n1 2\n2 3\n1 3\n3 3 5\n3 3 3\n1 1\n2 1", "FAIL"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Code+"], "title": "[Code+#8 初赛] 打怪游戏", "background": "搬运自 [Code+ #8 初赛](https://gitlink.org.cn/thusaa/codeplus8pre)。", "description": "你正在玩一个打怪的小游戏。游戏在一张地图上进行，你的任务是手持武器，消灭地图上的所有怪物。\n\n地图上有 $n$ 座城市，$m$ 条无向道路相连这些城市，使得所有的城市都能通过道路直接或间接相连。每个城市上有一个怪物，第 $i$ 座城市的怪物血量是 $a_i$ 。\n\n最初，你有 $k$ 把武器，第 $i$ 把武器的耐久值为 $b_i$ 。\n\n你可以任选一个城市出发，沿道路行进。每当你第一次到达某个城市时，你需要与那里的怪物作战。作战规则为：你按照编号顺序使用手里的第一把武器，如果武器当前的耐久不低于怪物的血量，你就可以打死怪物，但武器会减少相当于怪物血量的耐久值；如果当前的武器耐久低于怪物血量，你便不能用这把武器打怪，需要立刻将这把武器丢弃并换下一把；如果你没有武器可换了，你就输掉了游戏。\n\n同时，地图上有 $q$ 个道具，分布在不同的城市，第 $i$ 个道具位于城市 $c_i$，其属性值为 $d_i$。每当你打死一个城市的怪物之后，如果这个城市有道具，你获得之。道具的作用是当你打怪的时候，你可以事先对怪使用一个道具使得怪的血量减少 $d_i$，减少到 $0$ 为止。每个道具最多只能被使用一次，每个怪只能被使用至多一个道具，注意道具并不需要获得后立刻使用。\n\n请问：你能否战胜所有的怪？如果能，请求出最优策略（即使用的武器数量 $x$ 最少，如有并列则最后一把使用的武器的剩余耐久 $y$ 最高），并输出 $x$ 和 $y$；如果不能取胜，只需输出一个字符串 `FAIL`。", "inputFormat": "第 $1$ 行，$4$ 个非负整数 $n,m,k,q$。\n\n接下来 $m$ 行，每行 $2$ 个正整数 $u_i,v_i$，表示一条连接城市 $u_i$ 与 $v_i$ 的道路。\n\n接下来 $1$ 行， $n$ 个正整数 $a_i$，表示怪物的血量。\n\n接下来 $1$ 行，$k$ 个正整数 $b_i$，表示武器的初始耐久值。\n\n接下来 $q$ 行，每行 $2$ 个正整数 $c_i,d_i$，描述一个道具。", "outputFormat": "输出共一行，如果存在获胜策略，输出 $2$ 个正整数 $x,y$，表示最优策略下使用了前 $x$ 把武器，最后一把使用的武器的剩余耐久是 $y$；如果不能取胜，输出一个字符串 `FAIL`。", "hint": "**【样例 #1 解释】**\n\n你的最优策略是先打城市 $3$ 的怪物。虽然你会直接丢弃武器 $1$，但你接下来可以凭借道具在不消耗耐久的前提下战胜城市 $2$ 和城市 $1$ 的怪物。如果选择先打城市 $1$ 的怪物，最后武器 $2$ 将只剩 $0$ 点耐久。\n\n**【样例 #2 解释】**\n\n因为你不能把两个道具都对城市 $3$ 的怪物使用，因此你无论如何也打不赢它。\n\n**【数据范围】**\n\n对于全部数据，$1\\leq n \\leq 18$，$n-1\\leq m \\leq n(n-1)/2$，$1\\leq k \\leq n$，$0\\leq q \\leq min(n,8)$，$1 \\leq a_i,b_i \\leq 10^9$，$1 \\leq c_i \\leq n$，$1 \\leq d_i \\leq 10^9$，$1 \\leq u_i,v_i \\leq n$，$u_i \\neq v_i$。保证所有 $c_i$ 互不相同，保证任何一对城市之间最多只有一条道路直接相连，且保证给出的图联通。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#8 初赛] 打怪游戏", "background": "搬运自 [Code+ #8 初赛](https://gitlink.org.cn/thusaa/codeplus8pre)。", "description": "你正在玩一个打怪的小游戏。游戏在一张地图上进行，你的任务是手持武器，消灭地图上的所有怪物。\n\n地图上有 $n$ 座城市，$m$ 条无向道路相连这些城市，使得所有的城市都能通过道路直接或间接相连。每个城市上有一个怪物，第 $i$ 座城市的怪物血量是 $a_i$ 。\n\n最初，你有 $k$ 把武器，第 $i$ 把武器的耐久值为 $b_i$ 。\n\n你可以任选一个城市出发，沿道路行进。每当你第一次到达某个城市时，你需要与那里的怪物作战。作战规则为：你按照编号顺序使用手里的第一把武器，如果武器当前的耐久不低于怪物的血量，你就可以打死怪物，但武器会减少相当于怪物血量的耐久值；如果当前的武器耐久低于怪物血量，你便不能用这把武器打怪，需要立刻将这把武器丢弃并换下一把；如果你没有武器可换了，你就输掉了游戏。\n\n同时，地图上有 $q$ 个道具，分布在不同的城市，第 $i$ 个道具位于城市 $c_i$，其属性值为 $d_i$。每当你打死一个城市的怪物之后，如果这个城市有道具，你获得之。道具的作用是当你打怪的时候，你可以事先对怪使用一个道具使得怪的血量减少 $d_i$，减少到 $0$ 为止。每个道具最多只能被使用一次，每个怪只能被使用至多一个道具，注意道具并不需要获得后立刻使用。\n\n请问：你能否战胜所有的怪？如果能，请求出最优策略（即使用的武器数量 $x$ 最少，如有并列则最后一把使用的武器的剩余耐久 $y$ 最高），并输出 $x$ 和 $y$；如果不能取胜，只需输出一个字符串 `FAIL`。", "inputFormat": "第 $1$ 行，$4$ 个非负整数 $n,m,k,q$。\n\n接下来 $m$ 行，每行 $2$ 个正整数 $u_i,v_i$，表示一条连接城市 $u_i$ 与 $v_i$ 的道路。\n\n接下来 $1$ 行， $n$ 个正整数 $a_i$，表示怪物的血量。\n\n接下来 $1$ 行，$k$ 个正整数 $b_i$，表示武器的初始耐久值。\n\n接下来 $q$ 行，每行 $2$ 个正整数 $c_i,d_i$，描述一个道具。", "outputFormat": "输出共一行，如果存在获胜策略，输出 $2$ 个正整数 $x,y$，表示最优策略下使用了前 $x$ 把武器，最后一把使用的武器的剩余耐久是 $y$；如果不能取胜，输出一个字符串 `FAIL`。", "hint": "**【样例 #1 解释】**\n\n你的最优策略是先打城市 $3$ 的怪物。虽然你会直接丢弃武器 $1$，但你接下来可以凭借道具在不消耗耐久的前提下战胜城市 $2$ 和城市 $1$ 的怪物。如果选择先打城市 $1$ 的怪物，最后武器 $2$ 将只剩 $0$ 点耐久。\n\n**【样例 #2 解释】**\n\n因为你不能把两个道具都对城市 $3$ 的怪物使用，因此你无论如何也打不赢它。\n\n**【数据范围】**\n\n对于全部数据，$1\\leq n \\leq 18$，$n-1\\leq m \\leq n(n-1)/2$，$1\\leq k \\leq n$，$0\\leq q \\leq min(n,8)$，$1 \\leq a_i,b_i \\leq 10^9$，$1 \\leq c_i \\leq n$，$1 \\leq d_i \\leq 10^9$，$1 \\leq u_i,v_i \\leq n$，$u_i \\neq v_i$。保证所有 $c_i$ 互不相同，保证任何一对城市之间最多只有一条道路直接相连，且保证给出的图联通。", "locale": "zh-CN"}}}
{"pid": "P11401", "type": "P", "difficulty": 6, "samples": [["ababa\n5 2 3 4 1", "3 3 2 2 1"], ["aaaa\n3 2 3 4", "2 3 2 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Code+"], "title": "[Code+#8 初赛] 普勒亚", "background": "搬运自 [Code+ #8 初赛](https://gitlink.org.cn/thusaa/codeplus8pre)。", "description": "魔法少女小七得到了一个神奇的长度为 $n$ 的字符串 $s$，每个位置对应有一个魔法值 $a_i$。每次她可以使用一个长度为 $l$ 的子串作为咒语。对于长度为 $l$ 的咒语 $t$，它的魔力是它在 $s$ 中出现的每个位置的右端点 $pos_j$（即 $\\forall i \\in [0,l),\\ s_{pos_j-i}=t_{l-i}$）的魔法值 $a_{pos_j}$ 从左往右连成的序列的**前缀最大值**个数。\n\n对于每个 $i \\in [1,n]$，小七想知道 $s$ 中所有长度为 $i$ 的咒语（两个咒语不同当且仅当其对应的字符串内容不同）的魔力之和。你能帮帮她吗？她会给你一个开心魔法作为报酬！\n\n**前缀最大值**：对于序列 $W$ 来说 $W_i$ 是前缀最大值当且仅当对于任何 $j<i$ 都有 $W_j<W_i$。", "inputFormat": "第 $1$ 行，一个长度为 $n$ 的字符串 $s$。\n\n第 $2$ 行，$n$ 个正整数表示对应的魔法值 $a_i$。", "outputFormat": "输出 $1$ 行 $n$ 个正整数，第 $i$ 个数表示长度为 $i$ 的咒语的魔法值之和。", "hint": "**【样例 #1 解释】**\n\n长度为 $1$ 的子串有 `a` 和 `b` 两种，分别构成序列 `5 3 1` 和 `2 4`，各自的前缀最大值个数为 $1$ 和 $2$。\n\n长度为 $2$ 的子串有 `ab` 和 `ba` 两种，分别构成序列 `2 4` 和 `3 1`，各自的前缀最大值个数为 $2$ 和 $1$。\n\n长度为 $3$ 的子串有 `aba` 和 `bab` 两种，构成序列 `3 1` 和 `4`，各自的前缀最大值个数为 $1$ 和 $1$。\n\n长度为 $4$ 的子串有 `abab` 和 `baba` 两种，构成序列 `4` 和 `1` ，各自的前缀最大值个数为 $1$ 和 $1$。\n\n长度为 $5$ 的子串有 `ababa` 一种，构成序列 `1`，前缀最大值个数为 $1$。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$n \\le 100$。\n\n对于另外 $20\\%$ 的数据，$n \\le 5000$。\n\n对于另外 $20\\%$ 的数据，$s$ 中只有字符 `a`。\n\n对于 $100\\%$ 的数据，保证 $n \\le 100,000$，$s$ 中只包含小写英文字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#8 初赛] 普勒亚", "background": "搬运自 [Code+ #8 初赛](https://gitlink.org.cn/thusaa/codeplus8pre)。", "description": "魔法少女小七得到了一个神奇的长度为 $n$ 的字符串 $s$，每个位置对应有一个魔法值 $a_i$。每次她可以使用一个长度为 $l$ 的子串作为咒语。对于长度为 $l$ 的咒语 $t$，它的魔力是它在 $s$ 中出现的每个位置的右端点 $pos_j$（即 $\\forall i \\in [0,l),\\ s_{pos_j-i}=t_{l-i}$）的魔法值 $a_{pos_j}$ 从左往右连成的序列的**前缀最大值**个数。\n\n对于每个 $i \\in [1,n]$，小七想知道 $s$ 中所有长度为 $i$ 的咒语（两个咒语不同当且仅当其对应的字符串内容不同）的魔力之和。你能帮帮她吗？她会给你一个开心魔法作为报酬！\n\n**前缀最大值**：对于序列 $W$ 来说 $W_i$ 是前缀最大值当且仅当对于任何 $j<i$ 都有 $W_j<W_i$。", "inputFormat": "第 $1$ 行，一个长度为 $n$ 的字符串 $s$。\n\n第 $2$ 行，$n$ 个正整数表示对应的魔法值 $a_i$。", "outputFormat": "输出 $1$ 行 $n$ 个正整数，第 $i$ 个数表示长度为 $i$ 的咒语的魔法值之和。", "hint": "**【样例 #1 解释】**\n\n长度为 $1$ 的子串有 `a` 和 `b` 两种，分别构成序列 `5 3 1` 和 `2 4`，各自的前缀最大值个数为 $1$ 和 $2$。\n\n长度为 $2$ 的子串有 `ab` 和 `ba` 两种，分别构成序列 `2 4` 和 `3 1`，各自的前缀最大值个数为 $2$ 和 $1$。\n\n长度为 $3$ 的子串有 `aba` 和 `bab` 两种，构成序列 `3 1` 和 `4`，各自的前缀最大值个数为 $1$ 和 $1$。\n\n长度为 $4$ 的子串有 `abab` 和 `baba` 两种，构成序列 `4` 和 `1` ，各自的前缀最大值个数为 $1$ 和 $1$。\n\n长度为 $5$ 的子串有 `ababa` 一种，构成序列 `1`，前缀最大值个数为 $1$。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$n \\le 100$。\n\n对于另外 $20\\%$ 的数据，$n \\le 5000$。\n\n对于另外 $20\\%$ 的数据，$s$ 中只有字符 `a`。\n\n对于 $100\\%$ 的数据，保证 $n \\le 100,000$，$s$ 中只包含小写英文字母。", "locale": "zh-CN"}}}
{"pid": "P11402", "type": "P", "difficulty": 6, "samples": [["2 199932539\n1\n6", "1\n10"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "Code+"], "title": "[Code+#8 初赛] 图", "background": "搬运自 [Code+ #8 初赛](https://gitlink.org.cn/thusaa/codeplus8pre)。", "description": "本题中，对于一个无重边自环的无向图，称图上的一条道路为**简单路**当且仅当其不经过重复节点。即，假设该道路经过的节点依次为 $(u_1,u_2,\\cdots,u_k)$，则这条道路为简单路当且仅当 $u_1,u_2,\\cdots,u_k$ 两两不同。\n\n给出大质数 $P$ 和 $q$ 次询问，每组询问给出正整数 $n$，你需要求出满足以下所有条件的**有标号**无向图个数，对 $P$ 取模：\n\n1. 图有 $n$ 个节点且不存在重边与自环；\n2. 图上不存在边数为 $3$ 的简单路，即图上无法找到四个两两不同的节点 $u_1,u_2,u_3,u_4$ 满足 $(u_1,u_2),(u_2,u_3),(u_3,u_4)$ 均在图中；\n3. 在满足条件 1 和 2 的基础上，图的边数最多。", "inputFormat": "输入的第一行包含两个正整数 $q$, $P$，保证 $q \\le 100,000$，分别表示询问次数和模数。\n\n接下来 $q$ 行每行包含一个正整数 $n$，保证 $n \\le 3 \\times 10^7$，描述一次询问。", "outputFormat": "对于每组询问输出一行一个非负整数，表示满足条件的有标号无向图个数对 $P$ 取模的值。", "hint": "**【样例解释】**\n\n以下样例解释将用 $1$ 到 $n$ 之间的整数给每个节点进行编号。\n\n对于第一组询问，只有边集为 $\\varnothing$ 的图满足条件。\n\n对于第二组询问，其中两个满足条件的图的边集分别为 ${(1,2)(2,3)(1,3)(4,5)(5,6)(4,6)}$ 和 ${(1,3)(3,5)(1,5)(2,4)(4,6)(2,6)}$。\n\n**【数据范围】**\n\n对于全部数据，保证 $10^8\\lt P\\lt 10^9$ 且 $P$ 是素数。\n\n本题共 $5$ 个测试点：\n\n测试点 $1$ 保证 $n,q\\le8$，分值为 $20$ 分；\n\n测试点 $2$ 保证 $n,q\\le200$，分值为 $15$ 分；\n\n测试点 $3$ 保证 $n,q\\le3000$，分值为 $15$ 分；\n\n测试点 $4$ 保证 $n\\le500,000,q\\le100,000$，分值为 $20$ 分；\n\n测试点 $5$ 保证 $n\\le3\\times10^7,q\\le100,000$，分值为 $30$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#8 初赛] 图", "background": "搬运自 [Code+ #8 初赛](https://gitlink.org.cn/thusaa/codeplus8pre)。", "description": "本题中，对于一个无重边自环的无向图，称图上的一条道路为**简单路**当且仅当其不经过重复节点。即，假设该道路经过的节点依次为 $(u_1,u_2,\\cdots,u_k)$，则这条道路为简单路当且仅当 $u_1,u_2,\\cdots,u_k$ 两两不同。\n\n给出大质数 $P$ 和 $q$ 次询问，每组询问给出正整数 $n$，你需要求出满足以下所有条件的**有标号**无向图个数，对 $P$ 取模：\n\n1. 图有 $n$ 个节点且不存在重边与自环；\n2. 图上不存在边数为 $3$ 的简单路，即图上无法找到四个两两不同的节点 $u_1,u_2,u_3,u_4$ 满足 $(u_1,u_2),(u_2,u_3),(u_3,u_4)$ 均在图中；\n3. 在满足条件 1 和 2 的基础上，图的边数最多。", "inputFormat": "输入的第一行包含两个正整数 $q$, $P$，保证 $q \\le 100,000$，分别表示询问次数和模数。\n\n接下来 $q$ 行每行包含一个正整数 $n$，保证 $n \\le 3 \\times 10^7$，描述一次询问。", "outputFormat": "对于每组询问输出一行一个非负整数，表示满足条件的有标号无向图个数对 $P$ 取模的值。", "hint": "**【样例解释】**\n\n以下样例解释将用 $1$ 到 $n$ 之间的整数给每个节点进行编号。\n\n对于第一组询问，只有边集为 $\\varnothing$ 的图满足条件。\n\n对于第二组询问，其中两个满足条件的图的边集分别为 ${(1,2)(2,3)(1,3)(4,5)(5,6)(4,6)}$ 和 ${(1,3)(3,5)(1,5)(2,4)(4,6)(2,6)}$。\n\n**【数据范围】**\n\n对于全部数据，保证 $10^8\\lt P\\lt 10^9$ 且 $P$ 是素数。\n\n本题共 $5$ 个测试点：\n\n测试点 $1$ 保证 $n,q\\le8$，分值为 $20$ 分；\n\n测试点 $2$ 保证 $n,q\\le200$，分值为 $15$ 分；\n\n测试点 $3$ 保证 $n,q\\le3000$，分值为 $15$ 分；\n\n测试点 $4$ 保证 $n\\le500,000,q\\le100,000$，分值为 $20$ 分；\n\n测试点 $5$ 保证 $n\\le3\\times10^7,q\\le100,000$，分值为 $30$ 分。", "locale": "zh-CN"}}}
{"pid": "P11403", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "交互题", "Special Judge", "通信题", "RMI（罗马尼亚）"], "title": "[RMI 2020] 软盘 / Floppy", "background": "\n译自 [8th Romanian Master of Informatics, RMI 2020](https://rmi.lbi.ro/rmi_2020/) D1T1。$\\texttt{0.5s,0.25G}$。\n\n不要 $\\texttt{\\#include \"floppy.h\"}$。\n\n在文件头加入如下的语句：\n\n```cpp\n#include <string>\nvoid save_to_floppy(const std::string&);\n```", "description": "\n**这是一道通信题。**\n\n有一个长度为 $N$ 的整数序列 $v_0,v_1,\\cdots,v_{N-1}$，其中**元素两两不同**。\n\n有 $M$ 个询问，形如：给定 $[l,r]$，求出 $x\\in [l,r]$ 使得 $v_x=\\max\\{v_l,v_{l+1},\\cdots,v_{r}\\}$。\n\n请你将这个序列压缩成一个 $\\texttt{01}$ 串保存在软盘上，并只使用这个 $\\texttt{01}$ 串回答这些询问。\n\n### 实现细节\n\n你不需要，也不应该实现 main 函数。\n\n你需要实现以下的函数：\n\n```cpp\nvoid read_array(int subtask_id, const std::vector<int> &v);\nstd::vector<int> solve_queries(int subtask_id, \n    int N, const std::string &bits, \n    const std::vector<int> &a,\n    const std::vector<int> &b);\n```\n\n你可以调用以下的函数。\n\n```cpp\nvoid save_to_floppy(const std::string &bits);\n```\n#### 第一次运行\n\n交互库将会调用 `read_array` 函数恰好一次。参数的含义：\n- `subtask_id`：子任务编号。\n- `v`：数列 $v$。\n\n随后，调用 `save_to_floppy` 函数**恰好一次**，传入一个 $\\texttt{01}$ 串，表示你要存储的信息。\n\n#### 第二次运行\n\n交互库将会调用 `solve_queries` 函数恰好一次。参数的含义：\n- `subtask_id`：子任务编号。\n- `N`：$v$ 的长度。\n- `bits`：软盘上的信息。\n- `a`, `b`：每次询问的左右端点。\n\n设有 $M$ 次询问，返回一个长度为 $M$ 的 `std::vector<int>` 表示每次询问的答案。\n\n", "inputFormat": "", "outputFormat": "", "hint": "\n对于 $100\\%$ 的数据，保证：\n- $1\\le N\\le 4\\times 10^4$；\n- $1\\le M\\le 8\\times 10^4$；\n- $-10^9\\le v_i\\le 10^9$。\n\n你保存的 $\\texttt{01}$ 串最长为 $2\\times 10^5$。超出限制，得 $0$ 分。\n\n| 子任务编号 | $N\\le  $ | $M\\le$ | 特殊性质 | 计分方式 | 得分 |  \n| :--: | :--: |  :--: | :--: |:--: | :--: |\n| $ 1 $    | $ 500 $  | $10^3$ | A | I | $7$ | \n| $ 2 $    | $ 10^4 $  | $2\\times 10^4$ |  | II | $21$ | \n| $ 3 $    | $ 4\\times 10^4 $  | $8\\times 10^4$ |  | III | $72$ |\n\n- 特殊性质 A：$0\\le v_i\\lt N$。\n- 计分方式 $\\text{I}$：正确回答每个询问，得满分；否则得零分。\n- 计分方式 $\\text{II}$：令 $\\texttt{01}$ 串长度为 $L$，得分为 $21\\cdot \\min(1,1/2^{L/N-1-\\log_2 N})$。\n- 计分方式 $\\text{III}$：令 $\\texttt{01}$ 串长度为 $L$，得分为 $72\\cdot \\min(1,1/2^{L/N-2})$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2020] 软盘 / Floppy", "background": "\n译自 [8th Romanian Master of Informatics, RMI 2020](https://rmi.lbi.ro/rmi_2020/) D1T1。$\\texttt{0.5s,0.25G}$。\n\n不要 $\\texttt{\\#include \"floppy.h\"}$。\n\n在文件头加入如下的语句：\n\n```cpp\n#include <string>\nvoid save_to_floppy(const std::string&);\n```", "description": "\n**这是一道通信题。**\n\n有一个长度为 $N$ 的整数序列 $v_0,v_1,\\cdots,v_{N-1}$，其中**元素两两不同**。\n\n有 $M$ 个询问，形如：给定 $[l,r]$，求出 $x\\in [l,r]$ 使得 $v_x=\\max\\{v_l,v_{l+1},\\cdots,v_{r}\\}$。\n\n请你将这个序列压缩成一个 $\\texttt{01}$ 串保存在软盘上，并只使用这个 $\\texttt{01}$ 串回答这些询问。\n\n### 实现细节\n\n你不需要，也不应该实现 main 函数。\n\n你需要实现以下的函数：\n\n```cpp\nvoid read_array(int subtask_id, const std::vector<int> &v);\nstd::vector<int> solve_queries(int subtask_id, \n    int N, const std::string &bits, \n    const std::vector<int> &a,\n    const std::vector<int> &b);\n```\n\n你可以调用以下的函数。\n\n```cpp\nvoid save_to_floppy(const std::string &bits);\n```\n#### 第一次运行\n\n交互库将会调用 `read_array` 函数恰好一次。参数的含义：\n- `subtask_id`：子任务编号。\n- `v`：数列 $v$。\n\n随后，调用 `save_to_floppy` 函数**恰好一次**，传入一个 $\\texttt{01}$ 串，表示你要存储的信息。\n\n#### 第二次运行\n\n交互库将会调用 `solve_queries` 函数恰好一次。参数的含义：\n- `subtask_id`：子任务编号。\n- `N`：$v$ 的长度。\n- `bits`：软盘上的信息。\n- `a`, `b`：每次询问的左右端点。\n\n设有 $M$ 次询问，返回一个长度为 $M$ 的 `std::vector<int>` 表示每次询问的答案。\n\n", "inputFormat": "", "outputFormat": "", "hint": "\n对于 $100\\%$ 的数据，保证：\n- $1\\le N\\le 4\\times 10^4$；\n- $1\\le M\\le 8\\times 10^4$；\n- $-10^9\\le v_i\\le 10^9$。\n\n你保存的 $\\texttt{01}$ 串最长为 $2\\times 10^5$。超出限制，得 $0$ 分。\n\n| 子任务编号 | $N\\le  $ | $M\\le$ | 特殊性质 | 计分方式 | 得分 |  \n| :--: | :--: |  :--: | :--: |:--: | :--: |\n| $ 1 $    | $ 500 $  | $10^3$ | A | I | $7$ | \n| $ 2 $    | $ 10^4 $  | $2\\times 10^4$ |  | II | $21$ | \n| $ 3 $    | $ 4\\times 10^4 $  | $8\\times 10^4$ |  | III | $72$ |\n\n- 特殊性质 A：$0\\le v_i\\lt N$。\n- 计分方式 $\\text{I}$：正确回答每个询问，得满分；否则得零分。\n- 计分方式 $\\text{II}$：令 $\\texttt{01}$ 串长度为 $L$，得分为 $21\\cdot \\min(1,1/2^{L/N-1-\\log_2 N})$。\n- 计分方式 $\\text{III}$：令 $\\texttt{01}$ 串长度为 $L$，得分为 $72\\cdot \\min(1,1/2^{L/N-2})$。\n", "locale": "zh-CN"}}}
{"pid": "P11404", "type": "P", "difficulty": 5, "samples": [["axxyxxyb\n0 3\n1 1\n0 2\n3 2", "1\n1\n1\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2020", "交互题", "RMI（罗马尼亚）"], "title": "[RMI 2020] 蝶变 / Brperm", "background": "译自 [8th Romanian Master of Informatics, RMI 2020](https://rmi.lbi.ro/rmi_2020/) D1T2。$\\texttt{2s,0.25G}$。\n\n「我，也会有蜕变成蝶的一天吗？」\n\n**附件提供了 Sample grader**。\n\n提交时，**不需要**引入 `brperm.h`。\n", "description": "\n**这是一道（函数式）交互题。**\n\n定义一个长度为 $2^k$ 的序列 $[a_0,a_1,\\cdots,a_{2^k-1}]$ **蝶变**之后的结果为 $[a_{\\operatorname{rev}(0)},a_{\\operatorname{rev}(1)},\\cdots,a_{\\operatorname{rev}(2^k-1)}]$，其中 $\\operatorname{rev}(i)$ 表示将 $i$ 的二进制表示下最低 $k$ 位翻转（reverse）后得到的结果。更为具体地说，令 $i=\\overline{b_kb_{k-1}\\cdots b_1}$，则 $\\operatorname{rev}(i)=\\overline{b_1b_{2}\\cdots b_k}$。\n\n定义一个长度为 $2^k$ 的序列是**美的**，当且仅当蝶变后的序列与原序列相同。\n\n给定一个长度为 $N$ 的字符串 $s$，字符集为小写英文字母。$Q$ 次询问给定 $i,k$，问 $s[i:i+2^k-1]$ 是否是美的。\n\n### 实现细节\n\n你不需要，也不应该实现 main 函数。\n\n你需要实现以下的函数：\n\n```cpp\nvoid init(int N, const char s[]);\nint query(int i, int k);\n```\n\n交互库会调用 `init` 函数恰好一次。参数的含义：\n- `N`：字符串长度。\n- `s`：字符串。\n\n接下来调用 $Q$ 次 `query` 函数。这里，$0\\le i\\lt N$。\n\n**注意：不保证 $\\textcolor{red}{i+2^k\\le N}$**。如果 $i+2^k\\gt N$，返回 $0$ 即可。\n\n返回 `1`，代表所查询的子串是美的；否则代表它不是美的。\n", "inputFormat": "这里提供的是 Sample grader 的输入格式。\n\n第一行，一个字符串 $s$。\n\n接下来若干行，每行两个正整数 $i,k$ 描述一次询问。输入直到 EOF。\n", "outputFormat": "这里提供的是 Sample grader 的输出格式。\n\n对于每个询问，输出一行一个整数 $\\texttt{0}/\\texttt{1}$，表示答案。", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le N,Q\\le 5\\times 10^5$。\n\n\n| 子任务编号 | $N,Q\\le  $ |  特殊性质 | 得分 |  \n| :--: | :--: |  :--: | :--: |\n| $ 1 $    | $ 10^3 $  |  | $13$ | \n| $ 2 $    | $ 10^5 $  |  |  $37$ | \n| $ 3 $    | $ 5\\times 10^5 $  | A |  $17$ |\n| $ 4 $    | $ 5\\times 10^5 $  |  |  $33$ |\n\n- 特殊性质 A：$s$ 中只有字母 $\\texttt{a},\\texttt{b}$，且每个字母是以某个固定比例独立随机从字符集中选取的。\n\n**注意：不保证 $\\textcolor{red}{i+2^k\\le N}$**。如果 $i+2^k\\gt N$，返回 $0$ 即可。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2020] 蝶变 / Brperm", "background": "译自 [8th Romanian Master of Informatics, RMI 2020](https://rmi.lbi.ro/rmi_2020/) D1T2。$\\texttt{2s,0.25G}$。\n\n「我，也会有蜕变成蝶的一天吗？」\n\n**附件提供了 Sample grader**。\n\n提交时，**不需要**引入 `brperm.h`。\n", "description": "\n**这是一道（函数式）交互题。**\n\n定义一个长度为 $2^k$ 的序列 $[a_0,a_1,\\cdots,a_{2^k-1}]$ **蝶变**之后的结果为 $[a_{\\operatorname{rev}(0)},a_{\\operatorname{rev}(1)},\\cdots,a_{\\operatorname{rev}(2^k-1)}]$，其中 $\\operatorname{rev}(i)$ 表示将 $i$ 的二进制表示下最低 $k$ 位翻转（reverse）后得到的结果。更为具体地说，令 $i=\\overline{b_kb_{k-1}\\cdots b_1}$，则 $\\operatorname{rev}(i)=\\overline{b_1b_{2}\\cdots b_k}$。\n\n定义一个长度为 $2^k$ 的序列是**美的**，当且仅当蝶变后的序列与原序列相同。\n\n给定一个长度为 $N$ 的字符串 $s$，字符集为小写英文字母。$Q$ 次询问给定 $i,k$，问 $s[i:i+2^k-1]$ 是否是美的。\n\n### 实现细节\n\n你不需要，也不应该实现 main 函数。\n\n你需要实现以下的函数：\n\n```cpp\nvoid init(int N, const char s[]);\nint query(int i, int k);\n```\n\n交互库会调用 `init` 函数恰好一次。参数的含义：\n- `N`：字符串长度。\n- `s`：字符串。\n\n接下来调用 $Q$ 次 `query` 函数。这里，$0\\le i\\lt N$。\n\n**注意：不保证 $\\textcolor{red}{i+2^k\\le N}$**。如果 $i+2^k\\gt N$，返回 $0$ 即可。\n\n返回 `1`，代表所查询的子串是美的；否则代表它不是美的。\n", "inputFormat": "这里提供的是 Sample grader 的输入格式。\n\n第一行，一个字符串 $s$。\n\n接下来若干行，每行两个正整数 $i,k$ 描述一次询问。输入直到 EOF。\n", "outputFormat": "这里提供的是 Sample grader 的输出格式。\n\n对于每个询问，输出一行一个整数 $\\texttt{0}/\\texttt{1}$，表示答案。", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le N,Q\\le 5\\times 10^5$。\n\n\n| 子任务编号 | $N,Q\\le  $ |  特殊性质 | 得分 |  \n| :--: | :--: |  :--: | :--: |\n| $ 1 $    | $ 10^3 $  |  | $13$ | \n| $ 2 $    | $ 10^5 $  |  |  $37$ | \n| $ 3 $    | $ 5\\times 10^5 $  | A |  $17$ |\n| $ 4 $    | $ 5\\times 10^5 $  |  |  $33$ |\n\n- 特殊性质 A：$s$ 中只有字母 $\\texttt{a},\\texttt{b}$，且每个字母是以某个固定比例独立随机从字符集中选取的。\n\n**注意：不保证 $\\textcolor{red}{i+2^k\\le N}$**。如果 $i+2^k\\gt N$，返回 $0$ 即可。\n", "locale": "zh-CN"}}}
{"pid": "P11405", "type": "P", "difficulty": 6, "samples": [["8 3\n3 2 9 8 7 11 3 4", "720026253"]], "limits": {"time": [300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2020", "交互题", "RMI（罗马尼亚）"], "title": "[RMI 2020] 秘鲁 / Peru", "background": "译自 [8th Romanian Master of Informatics, RMI 2020](https://rmi.lbi.ro/rmi_2020/) D1T3。$\\texttt{0.2s,0.25G}$。", "description": "**这是一道（函数式）交互题。**\n\n有 $N$ 只甲虫在桌面上排成一行，从左到右编号为 $0\\sim N-1$。第 $i$ 只甲虫的**体力**为 $S_i$。\n\n每次可以选择**连续的**至多 $K$ 只甲虫，用 $E$ 的力量去击打它们。被击打的甲虫，若体力**不大于** $E$，则会死亡，否则无事发生。**死亡的甲虫会留在原地，可以击打死亡的甲虫。**\n\n可以多次击打甲虫，每次 $E$ 的大小可以不同。\n\n定义 $f(i)$ 为：杀死最左边的 $i$ 只甲虫，需要力量和的最小值。对于 $i=1,2,\\cdots,N$，求出 $f(i)$。\n\n为了减小输出量，你只需要求出 $\\displaystyle \\left(\\sum_{1\\le i\\le N} f(i)\\cdot 23^{N-i}\\right)\\bmod (10^9+7)$。\n\n### 实现细节\n\n你不需要，也不应该实现 main 函数。\n\n你需要实现以下的函数：\n\n```cpp\nint solve(int N, int K, int S[]);\n```\n\n交互库会调用 `solve` 函数恰好一次。参数的含义：\n- `N`：甲虫数量。\n- `K`：一次击打最多击打的连续甲虫数。\n- `S`：每只甲虫的体力。\n\n返回一个整数表示 $\\displaystyle \\left(\\sum_{1\\le i\\le N} f(i)\\cdot 23^{N-i}\\right)\\bmod (10^9+7)$。", "inputFormat": "Sample grader 按照如下格式读取输入：\n\n第一行，两个正整数 $N,K$；\n\n第二行，$N$ 个正整数 $S_0,S_1,\\cdots,S_{N-1}$。", "outputFormat": "Sample grader 输出一个整数，表示选手返回的答案。", "hint": "#### 样例解释\n\n$f$ 的值分别为 $3,3,9,12,12,20,23,23$。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le K\\le N\\le 2.5\\times 10^6$；\n- $1\\le S_i\\le 2\\times 10^9$。\n\n\n| 子任务编号 | $N,Q\\le  $ |  得分 |  \n| :--: | :--: |  :--: | \n| $ 1 $    | $ 2\\times 10^3 $  |  $18$ | \n| $ 2 $    | $ 4\\times 10^5 $  |  $31$ | \n| $ 3 $    | $ 2.5\\times 10^6 $  | $51$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2020] 秘鲁 / Peru", "background": "译自 [8th Romanian Master of Informatics, RMI 2020](https://rmi.lbi.ro/rmi_2020/) D1T3。$\\texttt{0.2s,0.25G}$。", "description": "**这是一道（函数式）交互题。**\n\n有 $N$ 只甲虫在桌面上排成一行，从左到右编号为 $0\\sim N-1$。第 $i$ 只甲虫的**体力**为 $S_i$。\n\n每次可以选择**连续的**至多 $K$ 只甲虫，用 $E$ 的力量去击打它们。被击打的甲虫，若体力**不大于** $E$，则会死亡，否则无事发生。**死亡的甲虫会留在原地，可以击打死亡的甲虫。**\n\n可以多次击打甲虫，每次 $E$ 的大小可以不同。\n\n定义 $f(i)$ 为：杀死最左边的 $i$ 只甲虫，需要力量和的最小值。对于 $i=1,2,\\cdots,N$，求出 $f(i)$。\n\n为了减小输出量，你只需要求出 $\\displaystyle \\left(\\sum_{1\\le i\\le N} f(i)\\cdot 23^{N-i}\\right)\\bmod (10^9+7)$。\n\n### 实现细节\n\n你不需要，也不应该实现 main 函数。\n\n你需要实现以下的函数：\n\n```cpp\nint solve(int N, int K, int S[]);\n```\n\n交互库会调用 `solve` 函数恰好一次。参数的含义：\n- `N`：甲虫数量。\n- `K`：一次击打最多击打的连续甲虫数。\n- `S`：每只甲虫的体力。\n\n返回一个整数表示 $\\displaystyle \\left(\\sum_{1\\le i\\le N} f(i)\\cdot 23^{N-i}\\right)\\bmod (10^9+7)$。", "inputFormat": "Sample grader 按照如下格式读取输入：\n\n第一行，两个正整数 $N,K$；\n\n第二行，$N$ 个正整数 $S_0,S_1,\\cdots,S_{N-1}$。", "outputFormat": "Sample grader 输出一个整数，表示选手返回的答案。", "hint": "#### 样例解释\n\n$f$ 的值分别为 $3,3,9,12,12,20,23,23$。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le K\\le N\\le 2.5\\times 10^6$；\n- $1\\le S_i\\le 2\\times 10^9$。\n\n\n| 子任务编号 | $N,Q\\le  $ |  得分 |  \n| :--: | :--: |  :--: | \n| $ 1 $    | $ 2\\times 10^3 $  |  $18$ | \n| $ 2 $    | $ 4\\times 10^5 $  |  $31$ | \n| $ 3 $    | $ 2.5\\times 10^6 $  | $51$ |", "locale": "zh-CN"}}}
{"pid": "P11406", "type": "P", "difficulty": 6, "samples": [["10\n1 2 -3 0 1 -4 3 2 -1 1\n3\n1 10\n1 5\n2 9", "4\n2\n2"]], "limits": {"time": [600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600], "memory": [20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480]}, "tags": ["2020", "RMI（罗马尼亚）"], "title": "[RMI 2020] 零和 / Sum Zero", "background": "译自 [8th Romanian Master of Informatics, RMI 2020](https://rmi.lbi.ro/rmi_2020/) D2T1。$\\texttt{0.6s,\\textcolor{red}{20M}}$。\n\n**请注意本题非同寻常的空间限制。**\n", "description": "\n给定长度为 $N$ 的数列 $c_1,\\cdots,c_N$。\n\n$Q$ 次询问给定 $L,R$，求出最多能够选出多少个 $[L,R]$ 的**不交**子区间，满足每个子区间内 $c_i$ 的和均为 $0$。\n\n", "inputFormat": "\n第一行，一个正整数 $N$。\n\n第二行，$N$ 个整数 $c_1,\\cdots,c_N$。\n\n第三行，一个正整数 $Q$。\n\n接下来 $Q$ 行，每行两个正整数 $L,R$。", "outputFormat": "\n输出 $Q$ 行，每行一个整数表示答案。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,Q\\le 4\\times 10^5$；\n- $-10^9\\le c_i\\le 10^9$；\n- $1\\le L\\le R\\le N$。\n\n\n| 子任务编号 | $N,Q\\le  $ |  得分 |  \n| :--: | :--: |  :--: | \n| $ 1 $    | $ 5\\times 10^3 $  |  $22$ | \n| $ 2 $    | $  10^5 $  |  $39$ | \n| $ 3 $    | $ 4\\times 10^5 $  | $39$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2020] 零和 / Sum Zero", "background": "译自 [8th Romanian Master of Informatics, RMI 2020](https://rmi.lbi.ro/rmi_2020/) D2T1。$\\texttt{0.6s,\\textcolor{red}{20M}}$。\n\n**请注意本题非同寻常的空间限制。**\n", "description": "\n给定长度为 $N$ 的数列 $c_1,\\cdots,c_N$。\n\n$Q$ 次询问给定 $L,R$，求出最多能够选出多少个 $[L,R]$ 的**不交**子区间，满足每个子区间内 $c_i$ 的和均为 $0$。\n\n", "inputFormat": "\n第一行，一个正整数 $N$。\n\n第二行，$N$ 个整数 $c_1,\\cdots,c_N$。\n\n第三行，一个正整数 $Q$。\n\n接下来 $Q$ 行，每行两个正整数 $L,R$。", "outputFormat": "\n输出 $Q$ 行，每行一个整数表示答案。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,Q\\le 4\\times 10^5$；\n- $-10^9\\le c_i\\le 10^9$；\n- $1\\le L\\le R\\le N$。\n\n\n| 子任务编号 | $N,Q\\le  $ |  得分 |  \n| :--: | :--: |  :--: | \n| $ 1 $    | $ 5\\times 10^3 $  |  $22$ | \n| $ 2 $    | $  10^5 $  |  $39$ | \n| $ 3 $    | $ 4\\times 10^5 $  | $39$ |", "locale": "zh-CN"}}}
{"pid": "P11407", "type": "P", "difficulty": 7, "samples": [["1\n1 10000 10000\n1 0\n", ""]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2020", "交互题", "Special Judge", "RMI（罗马尼亚）"], "title": "[RMI 2020] 寻线 / Nice Lines", "background": "\n译自 [8th Romanian Master of Informatics, RMI 2020](https://rmi.lbi.ro/rmi_2020/) D2T2。$\\texttt{0.2s,0.25G}$。\n\n**不需要引入头文件**。在文件头加入\n\n```cpp\nlong double query(long double x, long double y);\nvoid the_lines_are(std::vector<int> a, std::vector<int> b);\n```\n\n以评测。\n\n---\n\n交互库地址：\n- checker.cpp：[https://www.luogu.com.cn/paste/9l2ikcx9](https://www.luogu.com.cn/paste/9l2ikcx9)\n- interactive_lib.cpp：[https://www.luogu.com.cn/paste/m4jysztc](https://www.luogu.com.cn/paste/m4jysztc)\n\n为了减少计算 Eculidean 距离时的精度损失，本题交互库使用了 [tiger2005](https://www.luogu.com.cn/user/60864) 的 [高精度小数类](https://www.luogu.com.cn/article/5dhvt1ck)（感谢 tiger2005 老师）。计算结果将保留小数点后 $50$ 位然后转换到 `long double`。\n\n为了让交互库不 TLE，我们将时限开大到 3s。\n\n如果发现 SPJ 有锅（具体而言，在其他地方可以通过），请联系搬题人。如果发现高精度小数类有锅，请联系 tiger2005。\n", "description": "\n**这是一道（函数式）交互题。**\n\n二维笛卡尔坐标系上有 $N$ 条直线，描述为 $f_i(x)=a_ix+b_i$。其中，$a_i,b_i$ 为整数，且 $|a_i|,|b_i|\\le 10^4$。\n\n每次可以选择一个**实数点** $P$，询问 $P$ 到这 $N$ 条直线的（欧几里得）距离之和。通过询问找出这 $N$ 条直线的解析式。\n\n有两个参数限制询问次数：\n- 欲获得满分，询问次数应不大于 $q$； \n- 欲获得非零分，询问次数应不大于 $Q$。 \n\n此外，**保证直线两两不平行。**\n\n### 实现细节\n\n你不需要，也不应该实现 main 函数。\n\n你需要实现以下的函数：\n\n```cpp\nvoid solve(int subtask_id, int N);\n```\n\n交互库会调用 `solve` 函数恰好一次。参数的含义：\n- `subtask_id`：子任务编号。\n- `N`：直线数量。\n\n你可以调用以下的函数：\n\n```cpp\nlong double query(long double x, long double y);\n```\n\n调用此函数，返回点 $(x,y)$ 到每条直线的（欧几里得）距离和。**你需要保证 $|x|,|y|\\le 10^{12}$。**\n\n```cpp\nvoid the_lines_are(std::vector<int> a, std::vector<int> b)\n```\n\n调用此函数恰好一次，描述你找到的 $N$ 条直线。\n", "inputFormat": "Sample Grader 按照以下格式读取输入：\n\n第一行，一个正整数 $\\mathrm{id}$，表示子任务编号；\n\n第二行，三个正整数 $n,Q,q$；\n\n接下来 $n$ 行，每行两个整数 $a_i,b_i$。\n\n注意你需要自行修改 Sample Grader 的 `compute_query()` 以获得正确的距离计算结果。\n", "outputFormat": "Sample Grader 将输出选手程序回答的 $n$ 条直线，以及使用的询问次数。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 10^2$；\n- $-10^4\\le a_i,b_i\\le 10^4$；\n- **直线两两不平行。**\n\n\n| 子任务编号 | $N  $ |  $q=$ | $Q=$ | 特殊性质 | 得分 |  \n| :--: | :--: |  :--: |  :--: |:--: | :--: |\n| $ 1 $    | $ =1 $  | $10^4$ | $10^4$ ||$11$ | \n| $ 2 $    | $ =2 $  | $10^4$ | $10^4$ ||$13$ | \n| $ 3 $    | $ =3 $  | $10^4$ | $10^4$ ||$7$ |\n| $ 4 $    | $ \\le 100 $  | $402$ | $10^4$ | A |$19$ |\n| $ 5 $    | $ \\le 30 $  | $402$ | $10^4$ ||$23$ |\n| $ 6 $    | $ \\le 100 $  | $402$ | $10^4$ ||$27$ |\n\n特殊性质 A：$|a_i|,|b_i|\\le 500$。\n\n计分方式：令你询问了 $x$ 次，则得分系数 $k$ 计算公式如下\n\n$$k=\\begin{cases}\n1, & x\\le q \\\\\n\\displaystyle 1-0.7\\cdot \\frac{x-q}{Q-q} & q\\lt x\\le Q \\\\\n0, & x\\gt Q\n\\end{cases}\n$$\n\n每个子任务得分为得分系数的最小值乘上子任务满分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2020] 寻线 / Nice Lines", "background": "\n译自 [8th Romanian Master of Informatics, RMI 2020](https://rmi.lbi.ro/rmi_2020/) D2T2。$\\texttt{0.2s,0.25G}$。\n\n**不需要引入头文件**。在文件头加入\n\n```cpp\nlong double query(long double x, long double y);\nvoid the_lines_are(std::vector<int> a, std::vector<int> b);\n```\n\n以评测。\n\n---\n\n交互库地址：\n- checker.cpp：[https://www.luogu.com.cn/paste/9l2ikcx9](https://www.luogu.com.cn/paste/9l2ikcx9)\n- interactive_lib.cpp：[https://www.luogu.com.cn/paste/m4jysztc](https://www.luogu.com.cn/paste/m4jysztc)\n\n为了减少计算 Eculidean 距离时的精度损失，本题交互库使用了 [tiger2005](https://www.luogu.com.cn/user/60864) 的 [高精度小数类](https://www.luogu.com.cn/article/5dhvt1ck)（感谢 tiger2005 老师）。计算结果将保留小数点后 $50$ 位然后转换到 `long double`。\n\n为了让交互库不 TLE，我们将时限开大到 3s。\n\n如果发现 SPJ 有锅（具体而言，在其他地方可以通过），请联系搬题人。如果发现高精度小数类有锅，请联系 tiger2005。\n", "description": "\n**这是一道（函数式）交互题。**\n\n二维笛卡尔坐标系上有 $N$ 条直线，描述为 $f_i(x)=a_ix+b_i$。其中，$a_i,b_i$ 为整数，且 $|a_i|,|b_i|\\le 10^4$。\n\n每次可以选择一个**实数点** $P$，询问 $P$ 到这 $N$ 条直线的（欧几里得）距离之和。通过询问找出这 $N$ 条直线的解析式。\n\n有两个参数限制询问次数：\n- 欲获得满分，询问次数应不大于 $q$； \n- 欲获得非零分，询问次数应不大于 $Q$。 \n\n此外，**保证直线两两不平行。**\n\n### 实现细节\n\n你不需要，也不应该实现 main 函数。\n\n你需要实现以下的函数：\n\n```cpp\nvoid solve(int subtask_id, int N);\n```\n\n交互库会调用 `solve` 函数恰好一次。参数的含义：\n- `subtask_id`：子任务编号。\n- `N`：直线数量。\n\n你可以调用以下的函数：\n\n```cpp\nlong double query(long double x, long double y);\n```\n\n调用此函数，返回点 $(x,y)$ 到每条直线的（欧几里得）距离和。**你需要保证 $|x|,|y|\\le 10^{12}$。**\n\n```cpp\nvoid the_lines_are(std::vector<int> a, std::vector<int> b)\n```\n\n调用此函数恰好一次，描述你找到的 $N$ 条直线。\n", "inputFormat": "Sample Grader 按照以下格式读取输入：\n\n第一行，一个正整数 $\\mathrm{id}$，表示子任务编号；\n\n第二行，三个正整数 $n,Q,q$；\n\n接下来 $n$ 行，每行两个整数 $a_i,b_i$。\n\n注意你需要自行修改 Sample Grader 的 `compute_query()` 以获得正确的距离计算结果。\n", "outputFormat": "Sample Grader 将输出选手程序回答的 $n$ 条直线，以及使用的询问次数。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 10^2$；\n- $-10^4\\le a_i,b_i\\le 10^4$；\n- **直线两两不平行。**\n\n\n| 子任务编号 | $N  $ |  $q=$ | $Q=$ | 特殊性质 | 得分 |  \n| :--: | :--: |  :--: |  :--: |:--: | :--: |\n| $ 1 $    | $ =1 $  | $10^4$ | $10^4$ ||$11$ | \n| $ 2 $    | $ =2 $  | $10^4$ | $10^4$ ||$13$ | \n| $ 3 $    | $ =3 $  | $10^4$ | $10^4$ ||$7$ |\n| $ 4 $    | $ \\le 100 $  | $402$ | $10^4$ | A |$19$ |\n| $ 5 $    | $ \\le 30 $  | $402$ | $10^4$ ||$23$ |\n| $ 6 $    | $ \\le 100 $  | $402$ | $10^4$ ||$27$ |\n\n特殊性质 A：$|a_i|,|b_i|\\le 500$。\n\n计分方式：令你询问了 $x$ 次，则得分系数 $k$ 计算公式如下\n\n$$k=\\begin{cases}\n1, & x\\le q \\\\\n\\displaystyle 1-0.7\\cdot \\frac{x-q}{Q-q} & q\\lt x\\le Q \\\\\n0, & x\\gt Q\n\\end{cases}\n$$\n\n每个子任务得分为得分系数的最小值乘上子任务满分。", "locale": "zh-CN"}}}
{"pid": "P11408", "type": "P", "difficulty": 7, "samples": [["5\n0 0 1 1\n0 0 0 0\n10\n1 2\n2 2\n3 2\n4 2\n4 1\n3 1\n2 1\n1 1\n4 1000\n2 1000", "0\n2\n4\n8\n10\n12\n13\n14\n15\n2015\n3015"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2020", "RMI（罗马尼亚）"], "title": "[RMI 2020] 树咖 / Arboras", "background": "译自 [8th Romanian Master of Informatics, RMI 2020](https://rmi.lbi.ro/rmi_2020/) D2T3。$\\texttt{3s,0.25G}$。\n", "description": "\n有一棵 $N$ 个节点的有根树，边有边权。节点编号为 $0\\sim N-1$，$0$ 号点为根。\n\n定义 $f(u)$ 为 $u$ 子树内经过 $u$ 的最长链的长度。\n\n$Q$ 次操作，一次操作将一条边的边权**加上一个正数**。在第一次操作前，和每次操作后，求出 $\\displaystyle \\left(\\sum_{1\\le i\\le N} f(i)\\right)\\bmod (10^9+7)$。\n", "inputFormat": "\n第一行，一个正整数 $N$。\n\n第二行，$(N-1)$ 个整数 $p_1,\\cdots,p_{N-1}$，$p_i$ 表示 $i$ 号点的父亲为 $p_i$。\n\n第三行，$(N-1)$ 个正整数 $d_1,\\cdots,d_{N-1}$，$d_i$ 表示 $(i,p_i)$ 边边权为 $d_i$。\n\n第四行，一个正整数 $Q$。\n\n接下来 $Q$ 行，每行两个正整数 $x,v$，表示给 $(x,p_x)$ 边权增加 $v$。\n", "outputFormat": "\n输出 $(Q+1)$ 行，每行一个整数：\n\n- 第一行，输出第一次操作前的答案。\n- 接下来 $Q$ 行，输出每次操作后的答案。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,Q\\le 10^5$；\n- $1\\le d_i\\le 10^9$；\n- $0\\le p_i\\lt i$；\n- $1\\le v\\le 10^9$；\n- $1\\le x\\lt N$。\n\n\n| 子任务编号 | $N,Q\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: |  :--: |  :--: |\n| $ 1 $    | $ 10^3 $  |   | $11$ | \n| $ 2 $    | $ 10^5 $  | A | $13$ | \n| $ 3 $    | $ 10^5 $  | B | $31$ |\n| $ 4 $    | $ 10^5 $  |  | $45$ |\n\n\n- 特殊性质 A：树高不大于 $50$；\n- 特殊性质 B：$d_i=10^9$，$v=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2020] 树咖 / Arboras", "background": "译自 [8th Romanian Master of Informatics, RMI 2020](https://rmi.lbi.ro/rmi_2020/) D2T3。$\\texttt{3s,0.25G}$。\n", "description": "\n有一棵 $N$ 个节点的有根树，边有边权。节点编号为 $0\\sim N-1$，$0$ 号点为根。\n\n定义 $f(u)$ 为 $u$ 子树内经过 $u$ 的最长链的长度。\n\n$Q$ 次操作，一次操作将一条边的边权**加上一个正数**。在第一次操作前，和每次操作后，求出 $\\displaystyle \\left(\\sum_{1\\le i\\le N} f(i)\\right)\\bmod (10^9+7)$。\n", "inputFormat": "\n第一行，一个正整数 $N$。\n\n第二行，$(N-1)$ 个整数 $p_1,\\cdots,p_{N-1}$，$p_i$ 表示 $i$ 号点的父亲为 $p_i$。\n\n第三行，$(N-1)$ 个正整数 $d_1,\\cdots,d_{N-1}$，$d_i$ 表示 $(i,p_i)$ 边边权为 $d_i$。\n\n第四行，一个正整数 $Q$。\n\n接下来 $Q$ 行，每行两个正整数 $x,v$，表示给 $(x,p_x)$ 边权增加 $v$。\n", "outputFormat": "\n输出 $(Q+1)$ 行，每行一个整数：\n\n- 第一行，输出第一次操作前的答案。\n- 接下来 $Q$ 行，输出每次操作后的答案。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,Q\\le 10^5$；\n- $1\\le d_i\\le 10^9$；\n- $0\\le p_i\\lt i$；\n- $1\\le v\\le 10^9$；\n- $1\\le x\\lt N$。\n\n\n| 子任务编号 | $N,Q\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: |  :--: |  :--: |\n| $ 1 $    | $ 10^3 $  |   | $11$ | \n| $ 2 $    | $ 10^5 $  | A | $13$ | \n| $ 3 $    | $ 10^5 $  | B | $31$ |\n| $ 4 $    | $ 10^5 $  |  | $45$ |\n\n\n- 特殊性质 A：树高不大于 $50$；\n- 特殊性质 B：$d_i=10^9$，$v=1$。", "locale": "zh-CN"}}}
{"pid": "P11409", "type": "P", "difficulty": 4, "samples": [["3 2 2\n0 1 \n1 1\n1 0\n0 0\n0 1\n0 1", "2"], ["3 2 2\n0 1\n1 0\n0 0\n0 1\n1 0\n0 0\n", "-1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分图"], "title": "西湖有雅座", "background": ">江湖路上走走停停，翻开年少漂泊的回忆。\n如今走过这世间，万般留恋，风吹起了从前 。", "description": "孙亦谐准备建西湖雅座来开饭馆。\n\n他有 $n$ 个零件，零件的大小均为 $h\\times w$。零件从 $1 \\sim n$ 编号。\n\n对于一个大小为 $h \\times w$ 的零件，其可视为一个 $h$ 行 $w$ 列的矩阵 $w$。若用 $a_{i,j}$ 来表示这个矩阵中第 $i$ 行第 $j$ 列的元素。对于 $\\forall a_{i,j}$，都有 $a_{i,j}\\in \\left \\{  0,1\\right \\} $。\n\n则编号为 $i$ 的零件的面积为： $S\\left(i\\right) = \\sum_{i = 1}^{h}\\sum_{j = 1}^{w}a_{i,j} $。\n\n若编号为 $l$ 和 $r$ 的两个零件的分别表示为矩阵 $a$ 和 $b$，其在同一座楼的稳固程度可表示为： \n\n$$f\\left(l,r\\right) = \\sum_{i = 1}^{h} \\sum_{j = 1}^{w} \\left [ (a_{i,j} = 1) \\text{ and } (b_{i,j} = 1) \\right ]$$\n\n孙亦谐需要将这 $n$ 个零件先选取若干个按照任意顺序排列搭成大楼，然后把剩余的零件搭成小楼。若没有剩余零件，则可以不搭小楼。\n\n设 $U$ 表示某座楼选取的零件编号的集合，则这座楼能成功搭建的条件是：\n\n$$\\forall i,j \\in U,f\\left (i,j\\right) \\ge \\lceil \\frac{ \\min \\left ( S\\left(i \\right),S\\left(j\\right) \\right) }{2}\\rceil$$\n\n孙亦谐想知道在保证两座楼能成功搭建的条件下，让大楼使用的零件数尽量多。若无法成功搭建，则直接输出 `-1`。\n\n\n", "inputFormat": "第一行输入包含三个正整数 $n,h,w$，分别表示零件的个数、零件的行数、零件的列数。\n\n接下来输入 $n$ 个零件所表示的矩阵。\n\n对于每个零件的矩阵 $a$，输入的格式如下：\n\n共输入 $h$ 行，每行 $w$ 个元素。\n\n第 $i$ 行第 $j$ 列的元素 $a_{i,j}$，表示这个矩阵中第 $i$ 行第 $j$ 列的元素。\n\n", "outputFormat": "输出一个整数，表示在搭建成功的情况下，大楼最多能使用多少个零件。若无法成功搭建，则直接输出 `-1`。", "hint": "**【样例1解释】**\n\n可以证明最优方案是用第一个零件和第三个零件搭大楼，用第二个零件搭小楼。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask 1（30 points）：$n \\le 20$。\n- Subtask 2（5 points）：$w = h = 1$。\n- Subtask 3（65 points）：无特殊限制。\n\n对于所有测试数据，$1 \\le n \\le 1000$，$1 \\le w,h \\le 6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "西湖有雅座", "background": ">江湖路上走走停停，翻开年少漂泊的回忆。\n如今走过这世间，万般留恋，风吹起了从前 。", "description": "孙亦谐准备建西湖雅座来开饭馆。\n\n他有 $n$ 个零件，零件的大小均为 $h\\times w$。零件从 $1 \\sim n$ 编号。\n\n对于一个大小为 $h \\times w$ 的零件，其可视为一个 $h$ 行 $w$ 列的矩阵 $w$。若用 $a_{i,j}$ 来表示这个矩阵中第 $i$ 行第 $j$ 列的元素。对于 $\\forall a_{i,j}$，都有 $a_{i,j}\\in \\left \\{  0,1\\right \\} $。\n\n则编号为 $i$ 的零件的面积为： $S\\left(i\\right) = \\sum_{i = 1}^{h}\\sum_{j = 1}^{w}a_{i,j} $。\n\n若编号为 $l$ 和 $r$ 的两个零件的分别表示为矩阵 $a$ 和 $b$，其在同一座楼的稳固程度可表示为： \n\n$$f\\left(l,r\\right) = \\sum_{i = 1}^{h} \\sum_{j = 1}^{w} \\left [ (a_{i,j} = 1) \\text{ and } (b_{i,j} = 1) \\right ]$$\n\n孙亦谐需要将这 $n$ 个零件先选取若干个按照任意顺序排列搭成大楼，然后把剩余的零件搭成小楼。若没有剩余零件，则可以不搭小楼。\n\n设 $U$ 表示某座楼选取的零件编号的集合，则这座楼能成功搭建的条件是：\n\n$$\\forall i,j \\in U,f\\left (i,j\\right) \\ge \\lceil \\frac{ \\min \\left ( S\\left(i \\right),S\\left(j\\right) \\right) }{2}\\rceil$$\n\n孙亦谐想知道在保证两座楼能成功搭建的条件下，让大楼使用的零件数尽量多。若无法成功搭建，则直接输出 `-1`。\n\n\n", "inputFormat": "第一行输入包含三个正整数 $n,h,w$，分别表示零件的个数、零件的行数、零件的列数。\n\n接下来输入 $n$ 个零件所表示的矩阵。\n\n对于每个零件的矩阵 $a$，输入的格式如下：\n\n共输入 $h$ 行，每行 $w$ 个元素。\n\n第 $i$ 行第 $j$ 列的元素 $a_{i,j}$，表示这个矩阵中第 $i$ 行第 $j$ 列的元素。\n\n", "outputFormat": "输出一个整数，表示在搭建成功的情况下，大楼最多能使用多少个零件。若无法成功搭建，则直接输出 `-1`。", "hint": "**【样例1解释】**\n\n可以证明最优方案是用第一个零件和第三个零件搭大楼，用第二个零件搭小楼。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask 1（30 points）：$n \\le 20$。\n- Subtask 2（5 points）：$w = h = 1$。\n- Subtask 3（65 points）：无特殊限制。\n\n对于所有测试数据，$1 \\le n \\le 1000$，$1 \\le w,h \\le 6$。", "locale": "zh-CN"}}}
{"pid": "P11410", "type": "P", "difficulty": 5, "samples": [["2 1\n2\n11", "3"], ["10 3\n4\n1001\n8\n10110110\n3\n111", "84582\n5362\n163710"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "矩阵乘法"], "title": "闪耀之塔", "background": "", "description": "闪耀之塔是一棵节点结点从 $1\\sim 2^n -1$ 编号，以 $1$ 为根，共有 $n$ 层的满二叉树。\n\n非叶子节点节点 $i$ 的左右儿子的编号分别为 $i\\times2$ 和 $i \\times 2 +1$。\n\n多萝茜需要给这颗树上所有节点附上一个权值。\n\n每个节点的权值取值范围为 $[1,2^n-1]$，且要保证互不相同。\n\n定义 $S(u)$ 为 $u$ 节点的所有儿子的集合，$val_u$ 表示节点 $u$ 的权值。\n\n每个节点有一个能量值 $f(u)$，其可表示为：\n\n$$f(u)= val_u + \\sum_{v\\in S(u) }f(v) $$\n\n她想知道在保证 $ \\sum_{i = 1}^{2^n-1} f(i)$ 取得最大值时，对于编号为 $p$ 的节点其 $f(p)$ 的最大值是多少。\n询问的答案需要对 $10^9+7$ 取模。", "inputFormat": "第一行包含两个正整数 $n,q$，分别表示满二叉树的层数和询问的次数。\n\n接下来包含 $q$ 组询问，每组数据的格式如下：\n\n第一行包含一个整数 $k$，表示接下来输入的 01 串的长度。\n\n第二行包含一个的 01 串，为 $p$ 的二进制表示，保证 01 串的首位为 $1$，$p$ 表示所询问的节点编号。", "outputFormat": "对于每次询问：输出一行包含一个整数，表示询问的答案对 $10^9+7$ 取模的结果。", "hint": "**【数据范围】**\n\n对于所有测试数据，保证：\n\n- $1 \\leq k\\leq n \\leq 10^{12}$；\n- $1 \\leq q\\leq 1000$；\n- $1 \\leq k\\leq 10^4$。\n\n| 测试点 | $n\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $2$ | 无 |\n| $2$ | $10$ | 无 |\n| $3\\sim5$ | $5000$ | 无 |\n| $6$ | $10^5$ | 无 |\n| $7$ | $10^8$ | A |\n| $8 \\sim 10$ | $10^{12}$ | 无 |\n\n特殊性质 A：保证任意一组的询问都有 $k = 1$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "闪耀之塔", "background": "", "description": "闪耀之塔是一棵节点结点从 $1\\sim 2^n -1$ 编号，以 $1$ 为根，共有 $n$ 层的满二叉树。\n\n非叶子节点节点 $i$ 的左右儿子的编号分别为 $i\\times2$ 和 $i \\times 2 +1$。\n\n多萝茜需要给这颗树上所有节点附上一个权值。\n\n每个节点的权值取值范围为 $[1,2^n-1]$，且要保证互不相同。\n\n定义 $S(u)$ 为 $u$ 节点的所有儿子的集合，$val_u$ 表示节点 $u$ 的权值。\n\n每个节点有一个能量值 $f(u)$，其可表示为：\n\n$$f(u)= val_u + \\sum_{v\\in S(u) }f(v) $$\n\n她想知道在保证 $ \\sum_{i = 1}^{2^n-1} f(i)$ 取得最大值时，对于编号为 $p$ 的节点其 $f(p)$ 的最大值是多少。\n询问的答案需要对 $10^9+7$ 取模。", "inputFormat": "第一行包含两个正整数 $n,q$，分别表示满二叉树的层数和询问的次数。\n\n接下来包含 $q$ 组询问，每组数据的格式如下：\n\n第一行包含一个整数 $k$，表示接下来输入的 01 串的长度。\n\n第二行包含一个的 01 串，为 $p$ 的二进制表示，保证 01 串的首位为 $1$，$p$ 表示所询问的节点编号。", "outputFormat": "对于每次询问：输出一行包含一个整数，表示询问的答案对 $10^9+7$ 取模的结果。", "hint": "**【数据范围】**\n\n对于所有测试数据，保证：\n\n- $1 \\leq k\\leq n \\leq 10^{12}$；\n- $1 \\leq q\\leq 1000$；\n- $1 \\leq k\\leq 10^4$。\n\n| 测试点 | $n\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $2$ | 无 |\n| $2$ | $10$ | 无 |\n| $3\\sim5$ | $5000$ | 无 |\n| $6$ | $10^5$ | 无 |\n| $7$ | $10^8$ | A |\n| $8 \\sim 10$ | $10^{12}$ | 无 |\n\n特殊性质 A：保证任意一组的询问都有 $k = 1$。\n", "locale": "zh-CN"}}}
{"pid": "P11411", "type": "P", "difficulty": 6, "samples": [["3 2\n1 2 3", "0"], ["6 2\n3 2 7 99 10 15", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "树的直径", "笛卡尔树"], "title": "兰奇的卡牌游戏", "background": "", "description": "作为制卡大师的兰奇，发明了一种自助型卡牌游戏。\n\n给定 $n$ 张卡牌，第 $i$ 张卡牌编号为 $i$，其权值为 $a_i$，卡牌的权值互不相同。\n\n这个卡牌游戏的规则需要自己生成。一开始，所有的牌都在备选区。从备选区中选取一张编号最小的卡牌放到手牌区，便可进入规则生成阶段。\n\n规则生成阶段的步骤如下：\n\n1. 将手牌区的任意一张牌弃置到废牌区之中。\n\n1.  然后在备选区中选择一张编号和权值均大于当前弃牌的牌，加入手牌区。若存在这样的一张牌，则称这张牌与弃牌互为置换；若不存在这样的一张牌，则跳过当前步骤。\n\n1. 继续从备选区中选择一张编号大于当前弃牌且权值小于当前弃牌的牌，加入手牌区。若存在这样的一张牌，则同样可称这张牌与弃牌互为置换；若不存在这样的一张牌，则跳过当前步骤。\n\n1. 完成以上步骤后，若手牌区没有卡牌了，则规则生成阶段结束。若仍有卡牌，则继续重复上述步骤，直到手牌区没有卡牌。\n\n为了保证生成置换的唯一性，兰奇规定规则生成阶段合法当且仅当规则生成结束后，所有的牌都在废牌区。并且在正式游戏阶段一张编号较大的牌经过一系列操作后得到一张编号较小的牌后，该编号较大的牌，均要满足能够有机会按照在手牌区出现过的该张编号较小的牌的弃牌后生成的置换相同的步骤在规则生成阶段成为编号较小的牌的置换；若手牌区未出现该张编号较小的牌的弃牌后生成的置换，则无需考虑。否则，生成的置换是无效的。\n\n可以证明在规则生成阶段合法的情况下，每张卡牌可以与哪些卡牌互为置换的方案是唯一的。\n\n正式游戏阶段的步骤如下：\n\n1. 选择任意一张卡牌作为起始卡牌并加入手牌区，然后进入下一步骤。\n\n1. 将前手牌区的卡牌弃入废牌堆，然后从备选区中选择一张该卡牌的置换加入手牌区。若当前弃置的卡牌在备选区没有置换，则正式游戏阶段结束；反之，则得分增加 $1$ 分，然后继续重复步骤 2。\n\n游戏发售后，销量并不是很好。因为游戏规则太复杂了。玩家们希望删去一些卡牌，使得正式游戏阶段的最大得分不超过 $k$。\n\n而兰奇为了保证游戏的不做太大的改动，他要求删去一些卡牌后，保留下来的任意一张卡牌重新生成的置换要与原来未删去卡牌情况下的置换相同。\n\n删去后置换仍相同的定义是：设 $S$ 表示某一张卡牌，未删除任何一张卡牌时的置换集合；$T$ 表示该张卡牌，在删除了部分卡牌时的置换集合。此时，满足 $T \\subseteq S$。则称删去部分卡牌后，该卡牌的置换与原来未删去卡牌情况下的置换相同。\n\n兰奇想知道，在满足了玩家和自己的要求的前提下，他最少要删除几张卡片。\n", "inputFormat": "第一行输入两个正整数 $n$ 和 $k$，分别表示卡牌的数量和正式游戏阶段的最大得分不能超过的值。\n\n第二行输入 $n$ 个元素，第 $i$ 个元素 $a_i$，表示编号为 $i$ 的卡牌权值。", "outputFormat": "输出一个正整数，表示在满足玩家和自己的要求的前提下，最少要删除几张卡片。", "hint": "**【样例1解释】**\n\n编号为 $1$ 的卡牌与编号为 $2$ 的卡牌互为置换，编号为 $2$ 的卡牌与编号为 $3$ 的卡牌互为置换。\n\n所以，在不删去的情况下，获得最大得分的方案是：用编号为 $1$ 的卡牌作为起始卡牌置换出编号为 $2$ 的卡牌，然后再置换出编号为 $3$ 的卡牌。该方案的最大得分为 $2$，所以不需要删除任何一张卡牌。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask 1（15 points）：$n \\le 10$。\n- Subtask 2（5 points）：$k = n$。\n- Subtask 3（80 points）：无特殊限制。\n\n对于所有测试数据，$1 \\le n \\le 2000$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "兰奇的卡牌游戏", "background": "", "description": "作为制卡大师的兰奇，发明了一种自助型卡牌游戏。\n\n给定 $n$ 张卡牌，第 $i$ 张卡牌编号为 $i$，其权值为 $a_i$，卡牌的权值互不相同。\n\n这个卡牌游戏的规则需要自己生成。一开始，所有的牌都在备选区。从备选区中选取一张编号最小的卡牌放到手牌区，便可进入规则生成阶段。\n\n规则生成阶段的步骤如下：\n\n1. 将手牌区的任意一张牌弃置到废牌区之中。\n\n1.  然后在备选区中选择一张编号和权值均大于当前弃牌的牌，加入手牌区。若存在这样的一张牌，则称这张牌与弃牌互为置换；若不存在这样的一张牌，则跳过当前步骤。\n\n1. 继续从备选区中选择一张编号大于当前弃牌且权值小于当前弃牌的牌，加入手牌区。若存在这样的一张牌，则同样可称这张牌与弃牌互为置换；若不存在这样的一张牌，则跳过当前步骤。\n\n1. 完成以上步骤后，若手牌区没有卡牌了，则规则生成阶段结束。若仍有卡牌，则继续重复上述步骤，直到手牌区没有卡牌。\n\n为了保证生成置换的唯一性，兰奇规定规则生成阶段合法当且仅当规则生成结束后，所有的牌都在废牌区。并且在正式游戏阶段一张编号较大的牌经过一系列操作后得到一张编号较小的牌后，该编号较大的牌，均要满足能够有机会按照在手牌区出现过的该张编号较小的牌的弃牌后生成的置换相同的步骤在规则生成阶段成为编号较小的牌的置换；若手牌区未出现该张编号较小的牌的弃牌后生成的置换，则无需考虑。否则，生成的置换是无效的。\n\n可以证明在规则生成阶段合法的情况下，每张卡牌可以与哪些卡牌互为置换的方案是唯一的。\n\n正式游戏阶段的步骤如下：\n\n1. 选择任意一张卡牌作为起始卡牌并加入手牌区，然后进入下一步骤。\n\n1. 将前手牌区的卡牌弃入废牌堆，然后从备选区中选择一张该卡牌的置换加入手牌区。若当前弃置的卡牌在备选区没有置换，则正式游戏阶段结束；反之，则得分增加 $1$ 分，然后继续重复步骤 2。\n\n游戏发售后，销量并不是很好。因为游戏规则太复杂了。玩家们希望删去一些卡牌，使得正式游戏阶段的最大得分不超过 $k$。\n\n而兰奇为了保证游戏的不做太大的改动，他要求删去一些卡牌后，保留下来的任意一张卡牌重新生成的置换要与原来未删去卡牌情况下的置换相同。\n\n删去后置换仍相同的定义是：设 $S$ 表示某一张卡牌，未删除任何一张卡牌时的置换集合；$T$ 表示该张卡牌，在删除了部分卡牌时的置换集合。此时，满足 $T \\subseteq S$。则称删去部分卡牌后，该卡牌的置换与原来未删去卡牌情况下的置换相同。\n\n兰奇想知道，在满足了玩家和自己的要求的前提下，他最少要删除几张卡片。\n", "inputFormat": "第一行输入两个正整数 $n$ 和 $k$，分别表示卡牌的数量和正式游戏阶段的最大得分不能超过的值。\n\n第二行输入 $n$ 个元素，第 $i$ 个元素 $a_i$，表示编号为 $i$ 的卡牌权值。", "outputFormat": "输出一个正整数，表示在满足玩家和自己的要求的前提下，最少要删除几张卡片。", "hint": "**【样例1解释】**\n\n编号为 $1$ 的卡牌与编号为 $2$ 的卡牌互为置换，编号为 $2$ 的卡牌与编号为 $3$ 的卡牌互为置换。\n\n所以，在不删去的情况下，获得最大得分的方案是：用编号为 $1$ 的卡牌作为起始卡牌置换出编号为 $2$ 的卡牌，然后再置换出编号为 $3$ 的卡牌。该方案的最大得分为 $2$，所以不需要删除任何一张卡牌。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask 1（15 points）：$n \\le 10$。\n- Subtask 2（5 points）：$k = n$。\n- Subtask 3（80 points）：无特殊限制。\n\n对于所有测试数据，$1 \\le n \\le 2000$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11412", "type": "P", "difficulty": 3, "samples": [["5 6\n5 6 abcab\n7 10 abcba\n4 3 abc\n3 6 ade\n2 4 cde\n2 abc\n4 abc\n5 abc\n6 a\n7 c\n8 ab", "0\n3\n9\n15\n4\n19"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["排序", "哈希 hashing", "字典树 Trie"], "title": "[EPXLQ2024 fall round] 风吹起了从前", "background": "对于过去，温昭雪有着断断续续的记忆。", "description": "具体地，她有 $n$ 条记忆，每条记忆是一个长度不超过 $100$ 的字符串。第 $i$ 条记忆 $S_i$ 位于她心灵的 $r_i$ 深处，对她有 $v_i$ 的价值。\n\n温昭雪正在试图恢复自己记忆中的美好，可记忆实在太多太复杂，她只能想到她记忆的一段前缀 $Q$ 和她能到达的最深位置 $d$。只有满足对应的 $Q$ 是 $S_i$ 的前缀且 $r_i \\le d$ 的记忆才能被温昭雪回想到。\n\n现在，温昭雪有 $m$ 次尝试。她想知道，对于每次尝试，她能获得的所有记忆价值之和是多少。", "inputFormat": "输入第一行包含 $n,m$。\n\n以下 $n$ 行，每行两个整数 $r_i,v_i$ 和一个字符串 $S_i$，空格分隔。\n\n以下 $m$ 行，每行一个整数 $d$ 和一个字符串 $Q$，空格分隔。保证 $Q$ 至少是某一个 $S_i$ 的前缀，**但不保证一定存在一个记忆能被回想到**。", "outputFormat": "输出 $m$ 行，每行表示对于每次尝试，她能获得的所有记忆价值之和是多少。", "hint": "### 提示\n\n本题对前缀的定义为：对于字符串 $S,P$，若 $|P| \\le |S|$ 且对所有 $1 \\le i \\le |P|$ 均有 $S_i=P_i$，则称 $P$ 是 $S$ 的前缀。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n \\le$ | $ m\\le$ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $100$ | $100$ | | $11$ |\n| $1$ | $10^4$ | $10^5$ | $d = 10^9$ | $13$ |\n| $2$ | $10^4$ | $10^5$ | 字符串长度不超过 $2$ | $9$ |\n| $3$ | $10^4$ | $10^3$ | | $26$ |\n| $4$ | $10^4$ | $10^5$ | | $41$ |\n\n对于所有数据，保证 $1 \\le |S_i|,|Q| \\le100, 0 \\le r_i,v_i,d \\le 10^9$，所有字符串仅由小写字母组成。\n\n请注意时间复杂度常数因子带来的影响。\n\n请考虑使用较快的输入输出方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EPXLQ2024 fall round] 风吹起了从前", "background": "对于过去，温昭雪有着断断续续的记忆。", "description": "具体地，她有 $n$ 条记忆，每条记忆是一个长度不超过 $100$ 的字符串。第 $i$ 条记忆 $S_i$ 位于她心灵的 $r_i$ 深处，对她有 $v_i$ 的价值。\n\n温昭雪正在试图恢复自己记忆中的美好，可记忆实在太多太复杂，她只能想到她记忆的一段前缀 $Q$ 和她能到达的最深位置 $d$。只有满足对应的 $Q$ 是 $S_i$ 的前缀且 $r_i \\le d$ 的记忆才能被温昭雪回想到。\n\n现在，温昭雪有 $m$ 次尝试。她想知道，对于每次尝试，她能获得的所有记忆价值之和是多少。", "inputFormat": "输入第一行包含 $n,m$。\n\n以下 $n$ 行，每行两个整数 $r_i,v_i$ 和一个字符串 $S_i$，空格分隔。\n\n以下 $m$ 行，每行一个整数 $d$ 和一个字符串 $Q$，空格分隔。保证 $Q$ 至少是某一个 $S_i$ 的前缀，**但不保证一定存在一个记忆能被回想到**。", "outputFormat": "输出 $m$ 行，每行表示对于每次尝试，她能获得的所有记忆价值之和是多少。", "hint": "### 提示\n\n本题对前缀的定义为：对于字符串 $S,P$，若 $|P| \\le |S|$ 且对所有 $1 \\le i \\le |P|$ 均有 $S_i=P_i$，则称 $P$ 是 $S$ 的前缀。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n \\le$ | $ m\\le$ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $100$ | $100$ | | $11$ |\n| $1$ | $10^4$ | $10^5$ | $d = 10^9$ | $13$ |\n| $2$ | $10^4$ | $10^5$ | 字符串长度不超过 $2$ | $9$ |\n| $3$ | $10^4$ | $10^3$ | | $26$ |\n| $4$ | $10^4$ | $10^5$ | | $41$ |\n\n对于所有数据，保证 $1 \\le |S_i|,|Q| \\le100, 0 \\le r_i,v_i,d \\le 10^9$，所有字符串仅由小写字母组成。\n\n请注意时间复杂度常数因子带来的影响。\n\n请考虑使用较快的输入输出方式。", "locale": "zh-CN"}}}
{"pid": "P11413", "type": "P", "difficulty": 5, "samples": [["2\n3 1\n6 4", "1\n4\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288]}, "tags": ["模拟", "堆", "优先队列", "链表"], "title": "[EPXLQ2024 fall round] 好排列", "background": "温昭雪喜欢构造排列。", "description": "她的目标是构造一个由 $n$ 个数组成的排列 $A_1,A_2,\\dots,A_n$，初始时 $A$ 中的所有元素都是 $0$。\n\n接下来，对于数 $i$（$1 \\le i \\le n$），她通过下面方式由 $1$ 到 $n$ 确定其位置：\n\n- 如果 $i=1$，将其放到最左侧。\n\n- 如果 $i=2$，将其放到最右侧。\n\n- 如果都不是，定义 $f_0(x)$ 表示 $x$ 左侧（包含 $x$，下同）的连续的 $0$ 的个数，$g_0(x)$ 为 $x$ 右侧的连续的 $0$ 的个数。特别地，如果 $x \\le 0$ 或 $x > n$，$f_0(x)=g_0(x)=n+1$。\n- 定义 $f_1(x)$ 表示 $x$ 左侧的连续非 $0$ 位置的个数，$g_1(x)$ 表示 $x$ 右侧的连续非 $0$ 位置的个数。特别地，如果 $x \\le 0$ 或 $x > n$，$f_0(x)=g_0(x)=0$。\n- 如果存在位置 $j$，使得 $\\min(f_0(j), g_0(j)) > 1$，则选择位置 $j$ 最大化 $\\min(f_0(j), g_0(j))$。如果有多个位置的值相同，选择 $j$ 较小的。\n- 如果不存在这样的位置，则选择位置 $j$ 使得 $f_0(j)=1$ 并最小化 $f_1(j-1) + g_1(j+1)$。如果有多个位置的值相同，选择 $j$ 较小的。\n\n温昭雪的幸运数字是 $k$。为了避免输出过多，她只想知道数字 $k$ 处于排列的什么位置。", "inputFormat": "**本题单个测试点内有多组测试数据。**\n\n输入第一行 $T$，表示数据组数。\n\n以下 $T$ 行，每行两个正整数 $n,k$。", "outputFormat": "输出 $T$ 行，每行一个正整数 $x$，表示排列长度为 $n$ 时，$A_x=k$。", "hint": "### 样例解释\n\n第一组测试数据对应的排列为 $\\{1,3,2\\}$。\n\n第二组测试数据对应的排列为 $\\{1,5,3,4,6,2\\}$。\n\n### 数据规模与约定\n\n\n| 测试点编号 | $n$ | $k$ | $T$ | $\\sum n$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| $1,2$ | $\\le 10$ | $\\le 10$ | $\\le 10$ | $\\le 100$ | |\n| $3,4$ | $\\le 100$ | $\\le 100$ | $\\le 10$ | $\\le 1000$ | |\n| $5$ | $\\le 1000$ | $\\le 10$ | $\\le 10$ | $\\le 10^4$ | |\n| $6,7$ | $\\le 1000$ | $\\le 1000$ | $\\le 100$ | $\\le 10^5$ |\n| $8,9$ | $\\le 10^4$ | $\\le 10$ | $\\le 100$ | $\\le 10^5$ |\n| $10 \\sim 13$ | $\\le 10^4$ | $\\le 10^4$ | $\\le 100$ | $\\le 10^6$  | $n,k$ 均为奇数 |\n| $14 \\sim 17$ | $\\le 10^4$ | $\\le 10^4$ | $\\le 100$ | $\\le 10^6$ | $n,k$ 均为偶数 |\n| $18,19$ | $\\le 10^5$ | $\\le 10$ | $\\le 10$ | $\\le 10^5$ | |\n| $20,21$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 100$ | $\\le 10^6$ | |\n| $22\\sim 25$ | $\\le 10^6$ | $\\le 10^6$ | $\\le 100$ | $\\le 10^6$ | |\n\n对于奇数编号的测试点，内存限制为 $\\text{512 MB}$；对于偶数编号的测试点，内存限制为 $\\text{64 MB}$。\n\n对于所有数据，保证 $1 \\le k \\le n \\le 10^6, \\sum n \\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EPXLQ2024 fall round] 好排列", "background": "温昭雪喜欢构造排列。", "description": "她的目标是构造一个由 $n$ 个数组成的排列 $A_1,A_2,\\dots,A_n$，初始时 $A$ 中的所有元素都是 $0$。\n\n接下来，对于数 $i$（$1 \\le i \\le n$），她通过下面方式由 $1$ 到 $n$ 确定其位置：\n\n- 如果 $i=1$，将其放到最左侧。\n\n- 如果 $i=2$，将其放到最右侧。\n\n- 如果都不是，定义 $f_0(x)$ 表示 $x$ 左侧（包含 $x$，下同）的连续的 $0$ 的个数，$g_0(x)$ 为 $x$ 右侧的连续的 $0$ 的个数。特别地，如果 $x \\le 0$ 或 $x > n$，$f_0(x)=g_0(x)=n+1$。\n- 定义 $f_1(x)$ 表示 $x$ 左侧的连续非 $0$ 位置的个数，$g_1(x)$ 表示 $x$ 右侧的连续非 $0$ 位置的个数。特别地，如果 $x \\le 0$ 或 $x > n$，$f_0(x)=g_0(x)=0$。\n- 如果存在位置 $j$，使得 $\\min(f_0(j), g_0(j)) > 1$，则选择位置 $j$ 最大化 $\\min(f_0(j), g_0(j))$。如果有多个位置的值相同，选择 $j$ 较小的。\n- 如果不存在这样的位置，则选择位置 $j$ 使得 $f_0(j)=1$ 并最小化 $f_1(j-1) + g_1(j+1)$。如果有多个位置的值相同，选择 $j$ 较小的。\n\n温昭雪的幸运数字是 $k$。为了避免输出过多，她只想知道数字 $k$ 处于排列的什么位置。", "inputFormat": "**本题单个测试点内有多组测试数据。**\n\n输入第一行 $T$，表示数据组数。\n\n以下 $T$ 行，每行两个正整数 $n,k$。", "outputFormat": "输出 $T$ 行，每行一个正整数 $x$，表示排列长度为 $n$ 时，$A_x=k$。", "hint": "### 样例解释\n\n第一组测试数据对应的排列为 $\\{1,3,2\\}$。\n\n第二组测试数据对应的排列为 $\\{1,5,3,4,6,2\\}$。\n\n### 数据规模与约定\n\n\n| 测试点编号 | $n$ | $k$ | $T$ | $\\sum n$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| $1,2$ | $\\le 10$ | $\\le 10$ | $\\le 10$ | $\\le 100$ | |\n| $3,4$ | $\\le 100$ | $\\le 100$ | $\\le 10$ | $\\le 1000$ | |\n| $5$ | $\\le 1000$ | $\\le 10$ | $\\le 10$ | $\\le 10^4$ | |\n| $6,7$ | $\\le 1000$ | $\\le 1000$ | $\\le 100$ | $\\le 10^5$ |\n| $8,9$ | $\\le 10^4$ | $\\le 10$ | $\\le 100$ | $\\le 10^5$ |\n| $10 \\sim 13$ | $\\le 10^4$ | $\\le 10^4$ | $\\le 100$ | $\\le 10^6$  | $n,k$ 均为奇数 |\n| $14 \\sim 17$ | $\\le 10^4$ | $\\le 10^4$ | $\\le 100$ | $\\le 10^6$ | $n,k$ 均为偶数 |\n| $18,19$ | $\\le 10^5$ | $\\le 10$ | $\\le 10$ | $\\le 10^5$ | |\n| $20,21$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 100$ | $\\le 10^6$ | |\n| $22\\sim 25$ | $\\le 10^6$ | $\\le 10^6$ | $\\le 100$ | $\\le 10^6$ | |\n\n对于奇数编号的测试点，内存限制为 $\\text{512 MB}$；对于偶数编号的测试点，内存限制为 $\\text{64 MB}$。\n\n对于所有数据，保证 $1 \\le k \\le n \\le 10^6, \\sum n \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P11414", "type": "P", "difficulty": 4, "samples": [["6 6\n1 1 4 5 1 4\n2 1 6\n1 1 3 2\n2 1 4\n2 1 6\n1 1 3 -2\n2 1 6", "19\n22\n28\n19"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "线段树"], "title": "[EPXLQ2024 fall round] 神奇磁铁", "background": "\nlzy 给了 Cute_QiQi 很多组神奇的磁铁。\n\n注：想拿到**快速 AK 变换奖**请在代码注释部分写明本题代码正确性证明。", "description": "一组神奇的磁铁由 $2x$ 个磁铁排成一排组成，编号 $1,2,\\dots,2x$，有激活和未激活两种状态。它们与普通的磁铁不同，不会简单地吸在一起。对于一组磁铁，当且仅当存在 $y \\in [1,x]$，使得不存在两个激活的磁铁满足两者之间的距离为 $y$，整组磁铁才会吸在一起。不同组的磁铁之间不相互影响。\n\n对于编号为 $i,j$ 的两个磁铁，它们之间的距离为 $|i-j|$。具体地，当 $x=2$ 时，磁铁组为 $\\{1,2,3,4\\}$。当激活的磁铁为 $\\{1,2\\}$ 时，整组磁铁可以吸在一起，因为对于 $y=2$，不存在两个磁铁之间的距离为 $2$。而激活的磁铁为 $\\{1,2,3\\}$ 时整组磁铁不能吸在一起。\n\nlzy 给了 Cute_QiQi $n$ 组磁铁。现在，Cute_QiQi 希望把这 $n$ 组磁铁排成一排作为装饰，同组磁铁堆在一起。未被吸在一起的磁铁不便于摆放，因此，Cute_QiQi 希望所有的磁铁组内的磁铁都吸在一起。在此基础上，Cute_QiQi 希望激活**尽可能多**的磁铁。\n\n另外，有时 lzy 会给 Cute_QiQi 一些额外的磁铁。\n\n磁铁实在是太多了，以至于 Cute_QiQi 计算不出她最多能激活多少磁铁。因此，她希望你帮她写一个程序，支持下面两种操作：\n\n- `1 l r x`，表示 lzy 给 $[l,r]$ 内所有的磁铁组添加了 $2x$ 个磁铁；\n- `2 l r`，表示 Cute_QiQi 想知道在激活最多磁铁的情况下，$[l,r]$ 内的磁铁组总共有多少个磁铁被激活。", "inputFormat": "输入第一行为 $n,q$，其中 $q$ 表示操作的个数。\n\n第二行为 $n$ 个整数 $a_1,a_2,.\\dots,a_n$，表示每个磁铁组中初始的磁铁数量 $2a_i$。\n\n以下 $q$ 行，每行一个操作，格式如下：\n\n- `1 l r x`，表示 lzy 给 $[l,r]$ 内所有的磁铁组添加了 $2x$ 个磁铁；\n- `2 l r`，表示 Cute_QiQi 想知道在激活最多磁铁的情况下，$[l,r]$ 内的磁铁组总共有多少个磁铁被激活。", "outputFormat": "对于每个 `2 l r` 操作，输出一行表示答案。", "hint": "### 样例解释\n\n初始时对应的激活磁铁的最大数量依次为 $1,1,5,6,1,5$。\n\n进行修改操作后，对应的激活磁铁最大数量依次为 $4,4,8,6,1,5$。\n\n可以证明，不可能再激活更多的磁铁。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n设 $v$ 表示任意时刻，磁铁数最多的磁铁组内磁铁的数量。\n\n| $\\text{Subtask}$ | $n \\le$ | $q \\le$ | $v \\le$ | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $1000$ | $1000$ | $20$ | $10$ |\n| $1$ | $1000$ | $1000$ | $10^9$ | $15$ |\n| $2$ | $5 \\times 10^5$ | $5 \\times 10^5$ | $20$ | $10$ |\n| $3$ | $5 \\times 10^5$ | $5 \\times 10^5$ | $5000$ | $25$ |\n| $4$ | $5 \\times 10^5$ | $5 \\times 10^5$ | $10^9$ | $40$ |\n\n对于所有数据，保证 $1 \\le n,q \\le 5 \\times 10^5, 1 \\le l \\le r \\le n, 1 \\le v,a_i \\le 10^9, -10^9 \\le x \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EPXLQ2024 fall round] 神奇磁铁", "background": "\nlzy 给了 Cute_QiQi 很多组神奇的磁铁。\n\n注：想拿到**快速 AK 变换奖**请在代码注释部分写明本题代码正确性证明。", "description": "一组神奇的磁铁由 $2x$ 个磁铁排成一排组成，编号 $1,2,\\dots,2x$，有激活和未激活两种状态。它们与普通的磁铁不同，不会简单地吸在一起。对于一组磁铁，当且仅当存在 $y \\in [1,x]$，使得不存在两个激活的磁铁满足两者之间的距离为 $y$，整组磁铁才会吸在一起。不同组的磁铁之间不相互影响。\n\n对于编号为 $i,j$ 的两个磁铁，它们之间的距离为 $|i-j|$。具体地，当 $x=2$ 时，磁铁组为 $\\{1,2,3,4\\}$。当激活的磁铁为 $\\{1,2\\}$ 时，整组磁铁可以吸在一起，因为对于 $y=2$，不存在两个磁铁之间的距离为 $2$。而激活的磁铁为 $\\{1,2,3\\}$ 时整组磁铁不能吸在一起。\n\nlzy 给了 Cute_QiQi $n$ 组磁铁。现在，Cute_QiQi 希望把这 $n$ 组磁铁排成一排作为装饰，同组磁铁堆在一起。未被吸在一起的磁铁不便于摆放，因此，Cute_QiQi 希望所有的磁铁组内的磁铁都吸在一起。在此基础上，Cute_QiQi 希望激活**尽可能多**的磁铁。\n\n另外，有时 lzy 会给 Cute_QiQi 一些额外的磁铁。\n\n磁铁实在是太多了，以至于 Cute_QiQi 计算不出她最多能激活多少磁铁。因此，她希望你帮她写一个程序，支持下面两种操作：\n\n- `1 l r x`，表示 lzy 给 $[l,r]$ 内所有的磁铁组添加了 $2x$ 个磁铁；\n- `2 l r`，表示 Cute_QiQi 想知道在激活最多磁铁的情况下，$[l,r]$ 内的磁铁组总共有多少个磁铁被激活。", "inputFormat": "输入第一行为 $n,q$，其中 $q$ 表示操作的个数。\n\n第二行为 $n$ 个整数 $a_1,a_2,.\\dots,a_n$，表示每个磁铁组中初始的磁铁数量 $2a_i$。\n\n以下 $q$ 行，每行一个操作，格式如下：\n\n- `1 l r x`，表示 lzy 给 $[l,r]$ 内所有的磁铁组添加了 $2x$ 个磁铁；\n- `2 l r`，表示 Cute_QiQi 想知道在激活最多磁铁的情况下，$[l,r]$ 内的磁铁组总共有多少个磁铁被激活。", "outputFormat": "对于每个 `2 l r` 操作，输出一行表示答案。", "hint": "### 样例解释\n\n初始时对应的激活磁铁的最大数量依次为 $1,1,5,6,1,5$。\n\n进行修改操作后，对应的激活磁铁最大数量依次为 $4,4,8,6,1,5$。\n\n可以证明，不可能再激活更多的磁铁。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n设 $v$ 表示任意时刻，磁铁数最多的磁铁组内磁铁的数量。\n\n| $\\text{Subtask}$ | $n \\le$ | $q \\le$ | $v \\le$ | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $1000$ | $1000$ | $20$ | $10$ |\n| $1$ | $1000$ | $1000$ | $10^9$ | $15$ |\n| $2$ | $5 \\times 10^5$ | $5 \\times 10^5$ | $20$ | $10$ |\n| $3$ | $5 \\times 10^5$ | $5 \\times 10^5$ | $5000$ | $25$ |\n| $4$ | $5 \\times 10^5$ | $5 \\times 10^5$ | $10^9$ | $40$ |\n\n对于所有数据，保证 $1 \\le n,q \\le 5 \\times 10^5, 1 \\le l \\le r \\le n, 1 \\le v,a_i \\le 10^9, -10^9 \\le x \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11415", "type": "P", "difficulty": 5, "samples": [["3 3 100 1 0\n5 10 15\n100 90 80\n70 100 80\n60 110 100", "decimal 2168.333333"], ["3 3 100 1 0\n5 10 15\n100 90 80\n70 100 80\n60 110 100", "inverse 332750286"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "矩阵运算", "Special Judge"], "title": "[EPXLQ2024 fall round] 如今走过这世间", "background": "温昭雪开始了上传视频，成为大 uploader 之路。\n\n这天，她所在的视频平台上线了一个激励计划。", "description": "温昭雪有 $n$ 个视频要发布，每个视频可以是 $t$ 个分类中的一种。初始时温昭雪有 $k$ 分。每当她发布一个类型为 $j$ 的视频，设她上一个发布的视频类型为 $i$，则她的分数会在发布这个视频后立刻乘上 $d_{i,j}$（如果是第 $1$ 个视频，分数不会变化）。**然后**，设当前有 $x$ 分，则会得 $b_j\\times x$ 的收益。\n\n温昭雪是个有点随意的人，所以她每次会**等概率随机选择**一个视频的类型（除了第一个视频的类型固定为 $v$）。现在她想知道在这样发视频的情况下，她能获得总收益的期望。", "inputFormat": "第一行五个整数 $n,t,k,v,g$，其中 $g$ 表示该数据所处的 Subtask 编号。\n\n第二行包含 $t$ 个整数 $b_i$。\n\n以下 $t$ 行，每行 $t$ 个整数 $D_{i,j}$，**满足 $d_{i,j} = {D_{i,j} \\over 100}$**。", "outputFormat": "仅一行表示答案。最终结果可以选择下列方式之一输出：\n\n- 用浮点数输出，输出格式 `decimal x`，$x$ 的误差不超过 $10^{-9}$（$\\text{误差}={ {|\\text{你的输出 - 答案}|} \\over \\text{答案}}$） 即为正确。**这种方式只能用于输出部分 Subtask 的答案，在其它 Subtask 这样输出会 WA。**\n\n\t供参考：答案文件中精确到了 18 位小数。\n\n- 用[乘法逆元](https://oiwiki.com/math/number-theory/inverse/)输出，输出格式 `inverse x`，答案对 $998244353$ 取模。\n", "hint": "### 样例解释\n\n显然，所有以 $v$ 开头的发布视频的序列具有相同的概率出现。\n\n当发布第 $2$ 个视频时，分数与获得收益的可能性如下表：\n\n| 视频类型 | 发布后分数 | 总收益 |\n| :-: | :-: | :-: |\n| $1$ | $100$ | $500+500=1000$ |\n| $2$ | $90$ | $500+900=1400$ |\n| $3$ | $80$ | $500+1200=1700$ |\n\n令 $F$ 表示发布第 $3$ 个视频前的分数，$P$ 表示发布第 $3$ 个视频前的收益，则：\n\n- 发布第 $3$ 个视频后的分数为：\n\n\n| 第 $3$ 个视频类型（行）/ 第 $2$ 个视频类型（列） | $1$（$F=100$） | $2$（$F=90$） | $3$（$F=80$） |\n| :-: | :-: | :-: | :-: |\n| $1$ | $100$ | $63$ | $48$ |\n| $2$ | $90$ | $90$ | $88$ |\n| $3$ | $80$ | $72$ | $80$ |\n\n- 发布第 $3$ 个视频后能获得的最终收益为：\n\n\n| 第 $3$ 个视频类型（行）/ 第 $2$ 个视频类型（列） | $1$（$P = 1000$） | $2$（$P=1400$） | $3$（$P=1700$） |\n| :-: | :-: | :-: | :-: |\n| $1$ | $1000 + 500$ | $1400+315$ | $1700+240$ |\n| $2$ | $1000 + 900$ | $1400+900$ | $1700+880$ |\n| $3$ | $1000 + 1200$ | $1400+1080$ | $1700+1200$ |\n\n因此，总收益期望为 ${19515 \\over 9}={6505 \\over 3} \\approx 2168.333333$。在本样例所示数据范围下，`decimal` 和 `inverse` 输出均可用，两种答案均正确。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n \\le$ | $t \\le $ | 特殊性质 | 是否可使用 `decimal` | 分值 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $0$ | $8$ | $8$ | | 是 | $9$ |\n| $1$ | $18$ | $200$ | | 是 | $6$ |\n| $2$ | $10^9$ | $1$ | | 否 | $4$ |\n| $3$ | $100$ | $200$ | | 是 | $7$ |\n| $4$ | $100$ | $200$ | A | 是 | $10$ |\n| $5$ | $10^9$ | $200$ | B | 是 | $6$ |\n| $6$ | $10^9$ | $100$ | | 否 | $12$ |\n| $7$ | $10^4$ | $200$ | | 否 | $11$ |\n| $8$ | $10^9$ | $200$ | | 否 | $35$ |\n\n特殊性质 A：$d_{i,j} \\in \\{0,0.5,1\\}$。\n\n特殊性质 B：$d_{i,j}=1$。\n\n对于所有数据，保证 $1 \\le n \\le 10^9, 1 \\le t \\le 200, 0 \\le d \\le 2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EPXLQ2024 fall round] 如今走过这世间", "background": "温昭雪开始了上传视频，成为大 uploader 之路。\n\n这天，她所在的视频平台上线了一个激励计划。", "description": "温昭雪有 $n$ 个视频要发布，每个视频可以是 $t$ 个分类中的一种。初始时温昭雪有 $k$ 分。每当她发布一个类型为 $j$ 的视频，设她上一个发布的视频类型为 $i$，则她的分数会在发布这个视频后立刻乘上 $d_{i,j}$（如果是第 $1$ 个视频，分数不会变化）。**然后**，设当前有 $x$ 分，则会得 $b_j\\times x$ 的收益。\n\n温昭雪是个有点随意的人，所以她每次会**等概率随机选择**一个视频的类型（除了第一个视频的类型固定为 $v$）。现在她想知道在这样发视频的情况下，她能获得总收益的期望。", "inputFormat": "第一行五个整数 $n,t,k,v,g$，其中 $g$ 表示该数据所处的 Subtask 编号。\n\n第二行包含 $t$ 个整数 $b_i$。\n\n以下 $t$ 行，每行 $t$ 个整数 $D_{i,j}$，**满足 $d_{i,j} = {D_{i,j} \\over 100}$**。", "outputFormat": "仅一行表示答案。最终结果可以选择下列方式之一输出：\n\n- 用浮点数输出，输出格式 `decimal x`，$x$ 的误差不超过 $10^{-9}$（$\\text{误差}={ {|\\text{你的输出 - 答案}|} \\over \\text{答案}}$） 即为正确。**这种方式只能用于输出部分 Subtask 的答案，在其它 Subtask 这样输出会 WA。**\n\n\t供参考：答案文件中精确到了 18 位小数。\n\n- 用[乘法逆元](https://oiwiki.com/math/number-theory/inverse/)输出，输出格式 `inverse x`，答案对 $998244353$ 取模。\n", "hint": "### 样例解释\n\n显然，所有以 $v$ 开头的发布视频的序列具有相同的概率出现。\n\n当发布第 $2$ 个视频时，分数与获得收益的可能性如下表：\n\n| 视频类型 | 发布后分数 | 总收益 |\n| :-: | :-: | :-: |\n| $1$ | $100$ | $500+500=1000$ |\n| $2$ | $90$ | $500+900=1400$ |\n| $3$ | $80$ | $500+1200=1700$ |\n\n令 $F$ 表示发布第 $3$ 个视频前的分数，$P$ 表示发布第 $3$ 个视频前的收益，则：\n\n- 发布第 $3$ 个视频后的分数为：\n\n\n| 第 $3$ 个视频类型（行）/ 第 $2$ 个视频类型（列） | $1$（$F=100$） | $2$（$F=90$） | $3$（$F=80$） |\n| :-: | :-: | :-: | :-: |\n| $1$ | $100$ | $63$ | $48$ |\n| $2$ | $90$ | $90$ | $88$ |\n| $3$ | $80$ | $72$ | $80$ |\n\n- 发布第 $3$ 个视频后能获得的最终收益为：\n\n\n| 第 $3$ 个视频类型（行）/ 第 $2$ 个视频类型（列） | $1$（$P = 1000$） | $2$（$P=1400$） | $3$（$P=1700$） |\n| :-: | :-: | :-: | :-: |\n| $1$ | $1000 + 500$ | $1400+315$ | $1700+240$ |\n| $2$ | $1000 + 900$ | $1400+900$ | $1700+880$ |\n| $3$ | $1000 + 1200$ | $1400+1080$ | $1700+1200$ |\n\n因此，总收益期望为 ${19515 \\over 9}={6505 \\over 3} \\approx 2168.333333$。在本样例所示数据范围下，`decimal` 和 `inverse` 输出均可用，两种答案均正确。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n \\le$ | $t \\le $ | 特殊性质 | 是否可使用 `decimal` | 分值 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $0$ | $8$ | $8$ | | 是 | $9$ |\n| $1$ | $18$ | $200$ | | 是 | $6$ |\n| $2$ | $10^9$ | $1$ | | 否 | $4$ |\n| $3$ | $100$ | $200$ | | 是 | $7$ |\n| $4$ | $100$ | $200$ | A | 是 | $10$ |\n| $5$ | $10^9$ | $200$ | B | 是 | $6$ |\n| $6$ | $10^9$ | $100$ | | 否 | $12$ |\n| $7$ | $10^4$ | $200$ | | 否 | $11$ |\n| $8$ | $10^9$ | $200$ | | 否 | $35$ |\n\n特殊性质 A：$d_{i,j} \\in \\{0,0.5,1\\}$。\n\n特殊性质 B：$d_{i,j}=1$。\n\n对于所有数据，保证 $1 \\le n \\le 10^9, 1 \\le t \\le 200, 0 \\le d \\le 2$。", "locale": "zh-CN"}}}
{"pid": "P11416", "type": "P", "difficulty": 3, "samples": [["2\n114\n1919", "13\n4"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": [], "title": "[EPXLQ2024 fall round] Simple Math Problem", "background": "\n![](https://cdn.luogu.com.cn/upload/image_hosting/v0535jal.png)\n\n于是原先的 C 变成了 A，原先的 D 变成了 B，原先的 F 变成了 E，然后就有了这道题。\n\n注：想拿到**快速 AK 变换奖**请在代码注释部分写明本题代码复杂度证明。", "description": "Cute_QiQi 有一个可爱的整数 $n$。\n\n现在，Cute_QiQi 想知道有多少个 $m \\in (0,n)$，满足 $nm$ 能被 $n-m$ 整除。", "inputFormat": "**本题单个测试点内有多组测试数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n以下 $T$ 行，每行一个整数 $n$。", "outputFormat": "输出 $T$ 行，每行一个整数表示答案。", "hint": "### 样例解释\n\n当 $n = 114$ 时，可有 $m \\in \\{38,57,76,78,95,96,102,105,108,110,111,112,113\\}$。\n\n当 $n = 1919$ 时，可有 $m \\in \\{1558,1818,1900,1918\\}$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试与子任务依赖。**\n\n设 $p$ 为 $n$ 质因数分解后最大的质数，$p,q$ 均为质数。\n\n| $\\text{Subtask}$ | $n \\le$ | 特殊性质 | 分值 | 依赖子任务\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $10^{14}$ | $n = p$ | $2$ | |\n| $1$ | $10^3$ | |  $7$ | |\n| $2$ | $10^6$ | |$11$ | $1$ |\n| $3$ | $10^9$ | |$24$ | $1,2$ |\n| $4$ | $10^{14}$ | $n = pq$ |  $12$ | |\n| $5$ | $10^{14}$ | $p \\le 10^6$ |   $15$ | |\n| $6$ | $10^{14}$ | |  $29$ | $0,1,2,3,4,5$ |\n\n对于所有数据，$1 \\le n \\le 10^{14}, 1 \\le T \\le 10$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EPXLQ2024 fall round] Simple Math Problem", "background": "\n![](https://cdn.luogu.com.cn/upload/image_hosting/v0535jal.png)\n\n于是原先的 C 变成了 A，原先的 D 变成了 B，原先的 F 变成了 E，然后就有了这道题。\n\n注：想拿到**快速 AK 变换奖**请在代码注释部分写明本题代码复杂度证明。", "description": "Cute_QiQi 有一个可爱的整数 $n$。\n\n现在，Cute_QiQi 想知道有多少个 $m \\in (0,n)$，满足 $nm$ 能被 $n-m$ 整除。", "inputFormat": "**本题单个测试点内有多组测试数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n以下 $T$ 行，每行一个整数 $n$。", "outputFormat": "输出 $T$ 行，每行一个整数表示答案。", "hint": "### 样例解释\n\n当 $n = 114$ 时，可有 $m \\in \\{38,57,76,78,95,96,102,105,108,110,111,112,113\\}$。\n\n当 $n = 1919$ 时，可有 $m \\in \\{1558,1818,1900,1918\\}$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试与子任务依赖。**\n\n设 $p$ 为 $n$ 质因数分解后最大的质数，$p,q$ 均为质数。\n\n| $\\text{Subtask}$ | $n \\le$ | 特殊性质 | 分值 | 依赖子任务\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $10^{14}$ | $n = p$ | $2$ | |\n| $1$ | $10^3$ | |  $7$ | |\n| $2$ | $10^6$ | |$11$ | $1$ |\n| $3$ | $10^9$ | |$24$ | $1,2$ |\n| $4$ | $10^{14}$ | $n = pq$ |  $12$ | |\n| $5$ | $10^{14}$ | $p \\le 10^6$ |   $15$ | |\n| $6$ | $10^{14}$ | |  $29$ | $0,1,2,3,4,5$ |\n\n对于所有数据，$1 \\le n \\le 10^{14}, 1 \\le T \\le 10$。", "locale": "zh-CN"}}}
{"pid": "P11417", "type": "P", "difficulty": 5, "samples": [["5", "78"], ["142857", "67850062"], ["10000000", "505679580"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200]}, "tags": ["数论", "深度优先搜索 DFS", "素数判断,质数,筛法"], "title": "[Sloi 2024]D1T1 精卫", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/p38htsuu.png)", "description": "$f(x)$ 为积性函数，且满足 $f(p^k)=p^{2k}+k$（$p$ 为素数）。\n\n令 $g(x)=\\prod\\limits_{d|x}f(d)\\space \\bmod\\space (10^9+7)$ ，请计算 $g(i)\\space (1\\le i \\le n)$ 的异或和。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个非负整数。", "hint": "**本题采用捆绑测试**\n\n| Subtask | n | Score |\n| :----------: | :----------: | :----------: |\n| $1$ | $\\le10^4$ | $10$ |\n| $2$ | $\\le 5\\times 10^6$ | $30$ |\n| $3$ | $\\le 2\\times 10^7$ | $30$ |\n| $4$ | $\\le 5\\times10^7$ | $30$ |\n\n对 $100\\%$ 的数据，$1\\le n \\le 5\\times10^{7} $。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Sloi 2024]D1T1 精卫", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/p38htsuu.png)", "description": "$f(x)$ 为积性函数，且满足 $f(p^k)=p^{2k}+k$（$p$ 为素数）。\n\n令 $g(x)=\\prod\\limits_{d|x}f(d)\\space \\bmod\\space (10^9+7)$ ，请计算 $g(i)\\space (1\\le i \\le n)$ 的异或和。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个非负整数。", "hint": "**本题采用捆绑测试**\n\n| Subtask | n | Score |\n| :----------: | :----------: | :----------: |\n| $1$ | $\\le10^4$ | $10$ |\n| $2$ | $\\le 5\\times 10^6$ | $30$ |\n| $3$ | $\\le 2\\times 10^7$ | $30$ |\n| $4$ | $\\le 5\\times10^7$ | $30$ |\n\n对 $100\\%$ 的数据，$1\\le n \\le 5\\times10^{7} $。\n", "locale": "zh-CN"}}}
{"pid": "P11418", "type": "P", "difficulty": 7, "samples": [["10\n", "12"], ["20", "27"], ["2347", "6126"], ["9234799", "43445933"], ["99234799", "524524311"], ["1000000000", "5844921982"], ["23477145069", "154961952468"]], "limits": {"time": [1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "数学", "数论"], "title": "[Sloi 2024]D1T2 简单的反链求和问题", "background": "本题 **idea from**：[Projecteuler P386](https://pe-cn.github.io/386/).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0yeo7vce.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8r5uh8th.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h7syotrv.png)\n\n图源：[zhihu](https://www.zhihu.com/question/19813666/answer/45229974).", "description": "反链是序理论中的一个极其优美的结构。\n\n---\n\n给定正整数 $n$，记 $S(n)$ 为 $n$ 的约数构成的集合。\n\n若 $S(n)$ 的子集 $A$ 只包含一个元素，或者 $A$ 中任意一个元素均不能整除其它元素，则称 $A$ 为 $S(n)$ 的**反链**。\n\n例如：$S(30) = \\{1, 2, 3, 5, 6, 10, 15, 30\\}$。\n\n- $\\{2, 5, 6\\}$ 不是 $S(30)$ 的反链。\n\n- $\\{2, 3, 5\\}$ 是 $S(30)$ 的反链。\n\n**hhoppitree** 喜欢长的反链，记 $f(n)$ 表示 $S(n)$ 的最长反链长度，她需要你帮忙求出 $ans=\\sum\\limits_{k=1}^n f(k)$。\n\n~~如果做不出来，她就会喵的一声扑向你~~", "inputFormat": "一行一个正整数表示 $n$。", "outputFormat": "一行一个正整数表示 $ans$。\n\n**可以证明答案一定在 `long long` 范围内。**", "hint": "样例 $1$：除了 $f(6)=f(10)=2$，其余 $f(k)=1(1\\le k\\le 10)$。\n\n样例 $2$：除了 $f(6)=f(10)=f(12)=f(14)=f(15)=f(18)=f(20)=2$，其余 $f(k)=1(1\\le k\\le 20)$。\n\n---\n\n**本题采用捆绑测试**\n\n对于所有测试数据，保证 $1\\le n\\le 123477145069\\approx 1.2\\times 10^{11}$。\n\n**可以证明答案一定在 `long long` 范围内。**\n\n|Subtask\t| $n \\le$ | Score |\n| :--: | :--: | :--: |\n|$1$ | $10$ | $5$ |\n|$2$ | $2500$ | $5$ |\n|$3$ | $10^6$ | $10$ |\n|$4$ | $10^7$ | $10$ |\n|$5$ | $10^8$ | $10$ |\n|$6$ | $10^9$ | $20$ |\n|$7$ | $23477145069$ | $20$ |\n|$8$ | $123477145069$ | $20$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Sloi 2024]D1T2 简单的反链求和问题", "background": "本题 **idea from**：[Projecteuler P386](https://pe-cn.github.io/386/).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0yeo7vce.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8r5uh8th.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h7syotrv.png)\n\n图源：[zhihu](https://www.zhihu.com/question/19813666/answer/45229974).", "description": "反链是序理论中的一个极其优美的结构。\n\n---\n\n给定正整数 $n$，记 $S(n)$ 为 $n$ 的约数构成的集合。\n\n若 $S(n)$ 的子集 $A$ 只包含一个元素，或者 $A$ 中任意一个元素均不能整除其它元素，则称 $A$ 为 $S(n)$ 的**反链**。\n\n例如：$S(30) = \\{1, 2, 3, 5, 6, 10, 15, 30\\}$。\n\n- $\\{2, 5, 6\\}$ 不是 $S(30)$ 的反链。\n\n- $\\{2, 3, 5\\}$ 是 $S(30)$ 的反链。\n\n**hhoppitree** 喜欢长的反链，记 $f(n)$ 表示 $S(n)$ 的最长反链长度，她需要你帮忙求出 $ans=\\sum\\limits_{k=1}^n f(k)$。\n\n~~如果做不出来，她就会喵的一声扑向你~~", "inputFormat": "一行一个正整数表示 $n$。", "outputFormat": "一行一个正整数表示 $ans$。\n\n**可以证明答案一定在 `long long` 范围内。**", "hint": "样例 $1$：除了 $f(6)=f(10)=2$，其余 $f(k)=1(1\\le k\\le 10)$。\n\n样例 $2$：除了 $f(6)=f(10)=f(12)=f(14)=f(15)=f(18)=f(20)=2$，其余 $f(k)=1(1\\le k\\le 20)$。\n\n---\n\n**本题采用捆绑测试**\n\n对于所有测试数据，保证 $1\\le n\\le 123477145069\\approx 1.2\\times 10^{11}$。\n\n**可以证明答案一定在 `long long` 范围内。**\n\n|Subtask\t| $n \\le$ | Score |\n| :--: | :--: | :--: |\n|$1$ | $10$ | $5$ |\n|$2$ | $2500$ | $5$ |\n|$3$ | $10^6$ | $10$ |\n|$4$ | $10^7$ | $10$ |\n|$5$ | $10^8$ | $10$ |\n|$6$ | $10^9$ | $20$ |\n|$7$ | $23477145069$ | $20$ |\n|$8$ | $123477145069$ | $20$ |", "locale": "zh-CN"}}}
{"pid": "P11419", "type": "P", "difficulty": 7, "samples": [["3\n1000\n1000000\n1000000000", "0\n0\n0"], ["1\n23571113171923", "1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "素数判断,质数,筛法", "Stern-Brocot 树"], "title": "[Sloi 2024]D1T3 pi(n)", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/3zet5xqo.png)\n\n很多年前，zydy 突发奇想：只要算出 $\\pi(n)\\bmod2，\\pi(n)\\bmod3，\\pi(n)\\bmod5，···$，就能得到 $\\pi(n)$。很多年后，zydy 才意识到这其实是可行的，现在你只需要帮助他算出 $\\pi(n)\\bmod2$。", "description": "定义 $\\pi(n)$ 为不大于 $n$ 的素数的个数，给定 $n$，计算 $\\pi(n)\\bmod 2$ 。", "inputFormat": "输入第一行 $T$，表示数据组数。\n\n以下 $T$ 行，每行一个正整数 $n$。", "outputFormat": "输出 $T$ 行，每行一个非负整数，为 $\\pi(n)\\bmod 2$ 的值。", "hint": "**本题采用捆绑测试**\n| Subtask | T | n | Score |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $=1000$ | $\\le 10^8$ | $20$ |\n| $2$ | $=10$ | $\\le 10^{11}$ | $20$ |\n| $3$ | $=10$ | $\\le 10^{13}$ | $20$ |\n| $4$ | $=5$ | $\\le 10^{15}$ | $20$ |\n| $5$ | $=5$ | $\\le 10^{16}$ | $20$ |\n\n对 $100\\%$ 的数据，$T\\le 1000$，$1\\le n\\le 10^{16}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Sloi 2024]D1T3 pi(n)", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/3zet5xqo.png)\n\n很多年前，zydy 突发奇想：只要算出 $\\pi(n)\\bmod2，\\pi(n)\\bmod3，\\pi(n)\\bmod5，···$，就能得到 $\\pi(n)$。很多年后，zydy 才意识到这其实是可行的，现在你只需要帮助他算出 $\\pi(n)\\bmod2$。", "description": "定义 $\\pi(n)$ 为不大于 $n$ 的素数的个数，给定 $n$，计算 $\\pi(n)\\bmod 2$ 。", "inputFormat": "输入第一行 $T$，表示数据组数。\n\n以下 $T$ 行，每行一个正整数 $n$。", "outputFormat": "输出 $T$ 行，每行一个非负整数，为 $\\pi(n)\\bmod 2$ 的值。", "hint": "**本题采用捆绑测试**\n| Subtask | T | n | Score |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $=1000$ | $\\le 10^8$ | $20$ |\n| $2$ | $=10$ | $\\le 10^{11}$ | $20$ |\n| $3$ | $=10$ | $\\le 10^{13}$ | $20$ |\n| $4$ | $=5$ | $\\le 10^{15}$ | $20$ |\n| $5$ | $=5$ | $\\le 10^{16}$ | $20$ |\n\n对 $100\\%$ 的数据，$T\\le 1000$，$1\\le n\\le 10^{16}$。", "locale": "zh-CN"}}}
{"pid": "P11420", "type": "P", "difficulty": 7, "samples": [["3 2 2\n1 1\n", "1\n"], ["10 3 10\n1 2 3 4 5 6 7 8", "721023399"], ["20 12 98765\n9 8 7 6 5 4 3 2 1", "560770686"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2024", "O2优化", "CTT（清华集训/北大集训）"], "title": "[清华集训 2024] 乘积的期望", "background": "", "description": "有一个长度为 $n$ 的序列 $a_1, a_2, \\cdots , a_n$。初始序列的所有元素均为 $0$。再给定正整数\n$m$、$c$ 和 $(n - m + 1)$ 个正整数 $b_1, b_2, \\cdots , b_{n−m+1}$。\n\n对序列 $a_1, a_2, \\cdots , a_n$ 进行 $c$ 次操作，每次操作为：\n- 随机选择整数 $1 \\le x \\le n - m + 1$，其中选到 $y$（$1\\le y\\le n-m+1$）的概率为 $\\displaystyle \\frac{b_y}{\\sum_{i=1}^{n-m+1} b_i}$。将 $a_x, a_{x+1}, \\cdots, a_{x+m−1}$ 增加 $1$。\n\n$c$ 次操作中对 $x$ 的随机是独立的。\n\n求操作完成后序列中所有元素的乘积的期望。为了避免浮点数输出，你需要将答案对 $998244353$ 取模。", "inputFormat": "从标准输入读入数据。\n\n第一行三个整数 $n, m, c$，分别表示序列长度、操作区间长度和操作次数。\n\n第二行 $(n - m + 1)$ 个整数 $b_1, \\cdots , b_{n-m+1}$，描述随机的权重。", "outputFormat": "输出到标准输出。\n\n输出一行一个整数，表示 $c$ 次操作后序列中所有数的乘积的期望。", "hint": "#### 【样例 $1$ 解释】\n\n当两次操作选择的 $x$ 不同时，最终序列为 $[1,2,1]$，序列元素乘积为 $2$；否则序列为 $[2,2,0]$ 或 $[0,2,2]$，序列元素乘积均为 $0$。两次操作选择的 $x$ 不同的概率为 $\\frac{1}{2}$ ，因此输出 $2\\times \\frac{1}{2}=1$。\n\n#### 子任务\n\n对于所有测试数据，$2 \\le m \\le n \\le 50$，$1 \\le c < 998244353$，对于 $1 \\le i \\le n - m + 1$，$1 \\le b_i \\le 10^5$。\n\n- Subtask 1（$10\\%$）：$m \\le 8$。\n- Subtask 2（$20\\%$）：$m \\le 16$。\n- Subtask 3（$15\\%$）：$n \\le 20, c \\le n$。\n- Subtask 4（$15\\%$）：$n \\le 30, c \\le n$。\n- Subtask 5（$15\\%$）：$n \\le 40, c \\le n$。\n- Subtask 6（$15\\%$）：$c \\le n$。\n- Subtask 7（$10\\%$）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2024] 乘积的期望", "background": "", "description": "有一个长度为 $n$ 的序列 $a_1, a_2, \\cdots , a_n$。初始序列的所有元素均为 $0$。再给定正整数\n$m$、$c$ 和 $(n - m + 1)$ 个正整数 $b_1, b_2, \\cdots , b_{n−m+1}$。\n\n对序列 $a_1, a_2, \\cdots , a_n$ 进行 $c$ 次操作，每次操作为：\n- 随机选择整数 $1 \\le x \\le n - m + 1$，其中选到 $y$（$1\\le y\\le n-m+1$）的概率为 $\\displaystyle \\frac{b_y}{\\sum_{i=1}^{n-m+1} b_i}$。将 $a_x, a_{x+1}, \\cdots, a_{x+m−1}$ 增加 $1$。\n\n$c$ 次操作中对 $x$ 的随机是独立的。\n\n求操作完成后序列中所有元素的乘积的期望。为了避免浮点数输出，你需要将答案对 $998244353$ 取模。", "inputFormat": "从标准输入读入数据。\n\n第一行三个整数 $n, m, c$，分别表示序列长度、操作区间长度和操作次数。\n\n第二行 $(n - m + 1)$ 个整数 $b_1, \\cdots , b_{n-m+1}$，描述随机的权重。", "outputFormat": "输出到标准输出。\n\n输出一行一个整数，表示 $c$ 次操作后序列中所有数的乘积的期望。", "hint": "#### 【样例 $1$ 解释】\n\n当两次操作选择的 $x$ 不同时，最终序列为 $[1,2,1]$，序列元素乘积为 $2$；否则序列为 $[2,2,0]$ 或 $[0,2,2]$，序列元素乘积均为 $0$。两次操作选择的 $x$ 不同的概率为 $\\frac{1}{2}$ ，因此输出 $2\\times \\frac{1}{2}=1$。\n\n#### 子任务\n\n对于所有测试数据，$2 \\le m \\le n \\le 50$，$1 \\le c < 998244353$，对于 $1 \\le i \\le n - m + 1$，$1 \\le b_i \\le 10^5$。\n\n- Subtask 1（$10\\%$）：$m \\le 8$。\n- Subtask 2（$20\\%$）：$m \\le 16$。\n- Subtask 3（$15\\%$）：$n \\le 20, c \\le n$。\n- Subtask 4（$15\\%$）：$n \\le 30, c \\le n$。\n- Subtask 5（$15\\%$）：$n \\le 40, c \\le n$。\n- Subtask 6（$15\\%$）：$c \\le n$。\n- Subtask 7（$10\\%$）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11421", "type": "P", "difficulty": 6, "samples": [["5 5\n1 2 1 1 2\n0 0 0 0 0\n2 2 1\n4 2 0\n4 2 1\n2 2 0\n1 1 1", "0\n1\n1\n2\n1\n1"], ["10 10\n2 1 2 2 2 2 1 2 2 2\n1 1 0 0 0 0 1 0 0 0\n3 2 0\n5 1 0\n9 1 1\n4 2 1\n8 1 1\n2 1 0\n1 2 1\n8 2 0\n1 1 1\n9 1 0", "1\n1\n1\n2\n3\n3\n4\n4\n3\n3\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["贪心", "线段树", "二分", "2024", "O2优化", "栈", "CTT（清华集训/北大集训）"], "title": "[清华集训 2024] 最大匹配 2", "background": "", "description": "\n给定长度为 $n$ 的整数序列 $a_1,a_2,\\cdots,a_n$ 和长度为 $n$ 的 $01$ 序列 $b_1, b_2, \\cdots , b_n$。\n\n对于 $1 \\le i < j \\le n$，称二元组 $(i, j)$ **构成匹配**当且仅当 $b_i = 0$ 且 $b_j = 1$。\n\n定义**极大匹配方案** $S_{\\max}$ 为满足以下所有条件的二元组集合：\n\n- 对于任意 $(u, v) \\in S_{\\max}$，$1 \\le u < v \\le n$ 且 $(u, v)$ 构成匹配；\n- 每一个整数 $1 \\le i \\le n$ 在 $S_{\\max}$ 中出现至多一次；\n- 在满足以上条件的前提下，满足 $a_u = a_v$ 的二元组 $(u, v)$ 数量最多，即 $\\displaystyle \\sum_{(u,v)\\in S_{\\max}}[a_u=a_v]$ 最大；\n- 在满足以上条件的前提下，$|S_{\\max}|$ 最大。\n\n给定 $m$ 次修改，每次修改给出 $x, p, q$，表示将 $(a_x, b_x)$ 修改为 $(p, q)$。\n\n你需要对于每个 $1 \\le i \\le m + 1$ 求出：按输入顺序依次进行前 $(i - 1)$ 次操作后，极大匹配方案 $S_{\\max}$ 的大小 $|S_{\\max}|$。\n", "inputFormat": "\n从标准输入读入数据。\n\n输入的第一行两个整数 $n, m$，表示序列长度和操作次数。\n\n第二行 $n$ 个整数 $a_1, a_2, \\cdots , a_n$ 描述序列 $a$。\n\n第三行 $n$ 个整数 $b_1, b_2, \\cdots , b_n$ 描述序列 $b$。\n\n接下来 $m$ 行每行三个整数 $x, p, q$，描述一次修改。", "outputFormat": "\n输出到标准输出。\n\n输出 $(m + 1)$ 行，每行一个整数，第 $i$ 行表示按输入顺序依次进行前 $(i - 1)$ 次操作后 $|S_{\\max}|$ 的值。", "hint": "\n#### 【样例 $1$ 解释】\n\n- 初始情况，由于所有的 $b_i$ 都等于 $0$，因此没有二元组构成匹配，极大匹配方案的大小为 $0$，故第一行输出 $0$。\n- 进行第一次修改后，$b_2 = 1$，极大匹配方案为 $\\{(1, 2)\\}$，故第二行输出 $1$。\n- 进行前三次修改后，序列 $a$ 为 $[1,2,1,2,2]$，序列 $b$ 为 $[0,1,0,1,0]$。极大匹配方案为 $\\{(1, 2), (3, 4)\\}$，故第四行输出 $2$。注意此时 $(4, 5)$ 有 $b_4 = 1$，$b_5 = 0$，并不构成匹配。\n\n#### 子任务\n\n对于所有测试数据，\n\n- $1 \\le n \\le 2 × 10^5$，$0 \\le m \\le 2 × 10^5$；\n- 对于 $1 \\le i \\le n$，$1 \\le a_i \\le n$，$0 \\le b_i \\le 1$；\n- 每次修改中有 $1 \\le x \\le n$，$1 \\le p \\le n$，$0 \\le q \\le 1$。\n\n---\n\n- Subtask 1（$10\\%$）：$n \\le 100$，$m = 0$。\n- Subtask 2（$15\\%$）：$n \\le 2 \\times 10^3$，$m = 0$。\n- Subtask 3（$20\\%$）：$m = 0$。\n- Subtask 4（$15\\%$）：$a_i, p \\le 2$。\n- Subtask 5（$20\\%$）：$n, m \\le 10^5$。\n- Subtask 6（$20\\%$）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2024] 最大匹配 2", "background": "", "description": "\n给定长度为 $n$ 的整数序列 $a_1,a_2,\\cdots,a_n$ 和长度为 $n$ 的 $01$ 序列 $b_1, b_2, \\cdots , b_n$。\n\n对于 $1 \\le i < j \\le n$，称二元组 $(i, j)$ **构成匹配**当且仅当 $b_i = 0$ 且 $b_j = 1$。\n\n定义**极大匹配方案** $S_{\\max}$ 为满足以下所有条件的二元组集合：\n\n- 对于任意 $(u, v) \\in S_{\\max}$，$1 \\le u < v \\le n$ 且 $(u, v)$ 构成匹配；\n- 每一个整数 $1 \\le i \\le n$ 在 $S_{\\max}$ 中出现至多一次；\n- 在满足以上条件的前提下，满足 $a_u = a_v$ 的二元组 $(u, v)$ 数量最多，即 $\\displaystyle \\sum_{(u,v)\\in S_{\\max}}[a_u=a_v]$ 最大；\n- 在满足以上条件的前提下，$|S_{\\max}|$ 最大。\n\n给定 $m$ 次修改，每次修改给出 $x, p, q$，表示将 $(a_x, b_x)$ 修改为 $(p, q)$。\n\n你需要对于每个 $1 \\le i \\le m + 1$ 求出：按输入顺序依次进行前 $(i - 1)$ 次操作后，极大匹配方案 $S_{\\max}$ 的大小 $|S_{\\max}|$。\n", "inputFormat": "\n从标准输入读入数据。\n\n输入的第一行两个整数 $n, m$，表示序列长度和操作次数。\n\n第二行 $n$ 个整数 $a_1, a_2, \\cdots , a_n$ 描述序列 $a$。\n\n第三行 $n$ 个整数 $b_1, b_2, \\cdots , b_n$ 描述序列 $b$。\n\n接下来 $m$ 行每行三个整数 $x, p, q$，描述一次修改。", "outputFormat": "\n输出到标准输出。\n\n输出 $(m + 1)$ 行，每行一个整数，第 $i$ 行表示按输入顺序依次进行前 $(i - 1)$ 次操作后 $|S_{\\max}|$ 的值。", "hint": "\n#### 【样例 $1$ 解释】\n\n- 初始情况，由于所有的 $b_i$ 都等于 $0$，因此没有二元组构成匹配，极大匹配方案的大小为 $0$，故第一行输出 $0$。\n- 进行第一次修改后，$b_2 = 1$，极大匹配方案为 $\\{(1, 2)\\}$，故第二行输出 $1$。\n- 进行前三次修改后，序列 $a$ 为 $[1,2,1,2,2]$，序列 $b$ 为 $[0,1,0,1,0]$。极大匹配方案为 $\\{(1, 2), (3, 4)\\}$，故第四行输出 $2$。注意此时 $(4, 5)$ 有 $b_4 = 1$，$b_5 = 0$，并不构成匹配。\n\n#### 子任务\n\n对于所有测试数据，\n\n- $1 \\le n \\le 2 × 10^5$，$0 \\le m \\le 2 × 10^5$；\n- 对于 $1 \\le i \\le n$，$1 \\le a_i \\le n$，$0 \\le b_i \\le 1$；\n- 每次修改中有 $1 \\le x \\le n$，$1 \\le p \\le n$，$0 \\le q \\le 1$。\n\n---\n\n- Subtask 1（$10\\%$）：$n \\le 100$，$m = 0$。\n- Subtask 2（$15\\%$）：$n \\le 2 \\times 10^3$，$m = 0$。\n- Subtask 3（$20\\%$）：$m = 0$。\n- Subtask 4（$15\\%$）：$a_i, p \\le 2$。\n- Subtask 5（$20\\%$）：$n, m \\le 10^5$。\n- Subtask 6（$20\\%$）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11422", "type": "P", "difficulty": 7, "samples": [["0 3 20\n4 5 11 11 6\n4 ‐11 15 17 5\n4 2 15 4 5", "Correct.\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "交互题", "O2优化", "CTT（清华集训/北大集训）"], "title": "[清华集训 2024] 平原", "background": "\n“只要你心里的念是真的，只要你心里的念是诚的，高山大海都会给你让路。”——《平原上的摩西》\n\n提交时，**不要 `#include \"plain.h\"`。** 将以下的代码粘贴到文件头。\n\n```cpp\n#include <tuple>\n#include <utility>\nbool query(int x, int y);\nstd::tuple<long long, int, long long, int> Find(int task_id, int V, int limit);\n```", "description": "\n**这是一道交互题。**\n\n在二维平面上有一条**未知**的、不与 $y$ 轴平行的直线 $L$。设 $L(x_0)$ 表示直线 $L$ 与 $x = x_0$ 的交点纵坐标。\n\n给定值域 $V$，$L$ 额外满足以下性质：\n- 对于任意整数 $0 \\le x, y \\le V $，$L(x)\\neq y$；\n- $0 \\le L(0), L(V ) \\le V $。\n\n此时 $L$ 将 $S = \\{0, 1, 2, \\cdots , V \\} × \\{0, 1, 2, \\cdots , V \\}$ 分割成两个点集 $S_L = \\{(x, y) \\in S \\vert\nL(x) > y\\}$ 和 $\\overline{S_L} = \\{(x, y) \\in S | L(x) < y\\}$，且它们都不是空集。\n\n你可以向交互库询问至多 $\\mathrm{limit}$ 次询问。每次询问给出整数 $0 \\le x, y \\le V$ ，你可以得到 $(x, y)$ 属于 $S_L$ 还是 $\\overline{S_L}$。\n\n你需要找到直线 $L'$，其不经过 $S$ 中任何一个点，且 $L'$ 和 $L$ 将 $S$ 划分为同样的两个点集。形式化地，$L'$ 需要满足 $\\forall(x, y) \\in S_L, L'(x) > y$ 且 $\\forall(x, y) \\in \\overline{S_L}, L'(x) < y$。\n\n### 实现细节\n\n在洛谷上提交时，请确保你的程序开头**没有** `#include \"plain.h\"`。\n\n你不需要也不应该实现主函数。你需要实现以下函数：\n\n- `std::tuple<long long, int, long long, int> Find(int task_id, int\nV, int limit);`\n    - 其中 `task_id` 表示子任务编号，`V` 表示值域，`limit` 表示最大询问次数。\n    - 你需要返回四元组 $ (k_u, k_v, b_u, b_v)$ 表示你给出的直线 $L'$ 的解析式为 $y = \\frac{k_u}{k_v} x + \\frac{b_u}{b_v} $。\n    - 你需要保证 $k_u$ 与 $b_u$ 在 `long long` 范围内，$k_v$ 与 $b_v$ 在 `int` 范围内，且 $k_v,b_v> 0$。你不需要保证给出的分数是既约分数。可以证明在本题的数据范围下，总是存在这样的 $(k_u, k_v, b_u, b_v)$ 满足条件。\n    - **在最终测试时，交互库将会调用 $T \\le 10^4$ 次 `Find` 函数**。\n\n你可以使用 `std::make_tuple(a,b,c,d)` 来将 $a,b,c,d$ 打包成一个 tuple。\n\n你可以调用如下函数进行一次询问：\n\n- `bool query(int x,int y)`;\n    - 你需要保证 $0 \\le x, y \\le V$ ，在单组测试数据内该函数的调用次数不超过 $\\mathrm{limit}$。\n    - 当 $(x, y) \\in S_L$ 时，函数返回 `true`，否则返回 `false`。\n\n保证在满足题目条件和数据范围的情况下，最终测试时交互库的运行时间不会超过 $\\text{200 ms}$，运行空间不会超过 $\\text{64 MiB}$。\n\n**交互库不是自适应的，即 $L$ 是固定的，不会随着交互过程改变。**\n\n### 测试程序方式\n\n**试题目录下的 `grader.cpp` 是我们提供的交互库参考实现。最终测试的交互库与样例交互库有一定不同，故你的实现不应该依赖样例交互库实现。**\n\n你需要在本题目录下使用如下命令编译得到可执行程序：\n\n```bash\ng++ plain.cpp grader.cpp ‐o plain ‐O2 ‐‐std=c++14 ‐lm\n```\n\n对于编译得到的可执行程序：\n- 可执行文件将从标准输入读入以下格式的数据：\n    - 第一行三个整数 $\\mathrm{task\\_id}, T, \\mathrm{limit}$，分别表示子任务编号，测试数据组数和每组测试数据的询问次数上限。接下来依次输入每组测试数据。\n    - 对于每组测试数据输入一行五个整数 $V, k_u, k_v, b_u, b_v$，其中 V 表示值域，$k_u, k_v, b_u, b_v$ 表示直线 L 的解析式为 $y = \\frac{k_u}{k_v} x + \\frac{b_u}{b_v}$。\n    - 你需要保证 $b_u$ 在 long long 范围内，$k_u, k_v, b_v$ 在 int 范围内，且 $k_v, b_v > 0$。\n\n对于所有测试数据，保证存在这样的 $(k_u, k_v, b_u, b_v)$ 满足题目条件。\n\n- 读入完成之后，交互库将会调用 $T$ 次 `Find` 函数。\n- 若每一组测试数据中你都在给定的询问次数内求出了正确的直线，交互库将在标准输出流输出两行，第一行一个字符串 $\\texttt{Correct.}$，第二行一个整数，表示 $T$ 组测试数据中 `query` 调用次数的最大值。否则交互库会输出对应错误信息，并立即停止程序。", "inputFormat": "见【测试程序方式】。", "outputFormat": "见【测试程序方式】。", "hint": "\n#### 【样例 $1$ 解释】\n$\\mathrm{task\\_id} = 0$ 表示该组数据为样例。\n\n下面三张图依次展示了三组数据对应的函数图像。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rtdb7wd4.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/o908iel6.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/8guqdxhd.png)\n\n#### 子任务\n\n对于所有测试数据，$2 \\le V \\le 10^9$，$1 \\le T \\le 10^4$，$100 \\le \\mathrm{limit} \\le 3, 666$。\n\n---\n\n| 子任务编号 | 分值 | $V $ | $T$ | $\\mathrm{limit}$ | 特殊性质 |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| 1 | $10$ | $\\le 10^2$ | $\\le 10$ | $=110$ | 无 | \n| 2 | $20$ | $\\le 10^9$ | $\\le 10^3$ | $=180$ | A | \n| 3 | $10$ | $\\le 10^5$ | $\\le 10$ | $=1,111$ | 无 | \n| 4 | $15$ | $\\le 10^9$ | $\\le 500$ | $=3,666$ | 无 | \n| 5 | $20$ | $\\le 10^5$ | $\\le 10$ | $=10^2$ | 无 | \n| 6 | $10$ | $\\le 10^9$ | $\\le 10$ | $=180$ | 无 | \n| 7 | $15$ | $\\le 10^9$ | $\\le 10^4$ | $=180$ | 无 | \n\n特殊性质 A：保证直线 $L$ 是由 $y = \\frac{a}{b}x$ 向上平移至多 $\\frac{1}{2b}$ 得到的，其中 $0 < b \\le V$。\n\n#### 评分方式\n\n**本题首先会受到和传统题相同的限制**。例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 $0$ 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n当你在每次 `Find` 调用中，程序调用的 `query` 函数次数不超过 `limit`，且返回的 $L'$ 均满足题目描述中的条件，即通过该测试点，否则该测试点不通过。只有你通过一个子任务的所有测试点时，才能获得该子任务的所有分数。\n\n**选手不应通过非法方式获取交互库的内部信息，如试图与标准输入、输出流进行交互。此类行为将被视为作弊。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2024] 平原", "background": "\n“只要你心里的念是真的，只要你心里的念是诚的，高山大海都会给你让路。”——《平原上的摩西》\n\n提交时，**不要 `#include \"plain.h\"`。** 将以下的代码粘贴到文件头。\n\n```cpp\n#include <tuple>\n#include <utility>\nbool query(int x, int y);\nstd::tuple<long long, int, long long, int> Find(int task_id, int V, int limit);\n```", "description": "\n**这是一道交互题。**\n\n在二维平面上有一条**未知**的、不与 $y$ 轴平行的直线 $L$。设 $L(x_0)$ 表示直线 $L$ 与 $x = x_0$ 的交点纵坐标。\n\n给定值域 $V$，$L$ 额外满足以下性质：\n- 对于任意整数 $0 \\le x, y \\le V $，$L(x)\\neq y$；\n- $0 \\le L(0), L(V ) \\le V $。\n\n此时 $L$ 将 $S = \\{0, 1, 2, \\cdots , V \\} × \\{0, 1, 2, \\cdots , V \\}$ 分割成两个点集 $S_L = \\{(x, y) \\in S \\vert\nL(x) > y\\}$ 和 $\\overline{S_L} = \\{(x, y) \\in S | L(x) < y\\}$，且它们都不是空集。\n\n你可以向交互库询问至多 $\\mathrm{limit}$ 次询问。每次询问给出整数 $0 \\le x, y \\le V$ ，你可以得到 $(x, y)$ 属于 $S_L$ 还是 $\\overline{S_L}$。\n\n你需要找到直线 $L'$，其不经过 $S$ 中任何一个点，且 $L'$ 和 $L$ 将 $S$ 划分为同样的两个点集。形式化地，$L'$ 需要满足 $\\forall(x, y) \\in S_L, L'(x) > y$ 且 $\\forall(x, y) \\in \\overline{S_L}, L'(x) < y$。\n\n### 实现细节\n\n在洛谷上提交时，请确保你的程序开头**没有** `#include \"plain.h\"`。\n\n你不需要也不应该实现主函数。你需要实现以下函数：\n\n- `std::tuple<long long, int, long long, int> Find(int task_id, int\nV, int limit);`\n    - 其中 `task_id` 表示子任务编号，`V` 表示值域，`limit` 表示最大询问次数。\n    - 你需要返回四元组 $ (k_u, k_v, b_u, b_v)$ 表示你给出的直线 $L'$ 的解析式为 $y = \\frac{k_u}{k_v} x + \\frac{b_u}{b_v} $。\n    - 你需要保证 $k_u$ 与 $b_u$ 在 `long long` 范围内，$k_v$ 与 $b_v$ 在 `int` 范围内，且 $k_v,b_v> 0$。你不需要保证给出的分数是既约分数。可以证明在本题的数据范围下，总是存在这样的 $(k_u, k_v, b_u, b_v)$ 满足条件。\n    - **在最终测试时，交互库将会调用 $T \\le 10^4$ 次 `Find` 函数**。\n\n你可以使用 `std::make_tuple(a,b,c,d)` 来将 $a,b,c,d$ 打包成一个 tuple。\n\n你可以调用如下函数进行一次询问：\n\n- `bool query(int x,int y)`;\n    - 你需要保证 $0 \\le x, y \\le V$ ，在单组测试数据内该函数的调用次数不超过 $\\mathrm{limit}$。\n    - 当 $(x, y) \\in S_L$ 时，函数返回 `true`，否则返回 `false`。\n\n保证在满足题目条件和数据范围的情况下，最终测试时交互库的运行时间不会超过 $\\text{200 ms}$，运行空间不会超过 $\\text{64 MiB}$。\n\n**交互库不是自适应的，即 $L$ 是固定的，不会随着交互过程改变。**\n\n### 测试程序方式\n\n**试题目录下的 `grader.cpp` 是我们提供的交互库参考实现。最终测试的交互库与样例交互库有一定不同，故你的实现不应该依赖样例交互库实现。**\n\n你需要在本题目录下使用如下命令编译得到可执行程序：\n\n```bash\ng++ plain.cpp grader.cpp ‐o plain ‐O2 ‐‐std=c++14 ‐lm\n```\n\n对于编译得到的可执行程序：\n- 可执行文件将从标准输入读入以下格式的数据：\n    - 第一行三个整数 $\\mathrm{task\\_id}, T, \\mathrm{limit}$，分别表示子任务编号，测试数据组数和每组测试数据的询问次数上限。接下来依次输入每组测试数据。\n    - 对于每组测试数据输入一行五个整数 $V, k_u, k_v, b_u, b_v$，其中 V 表示值域，$k_u, k_v, b_u, b_v$ 表示直线 L 的解析式为 $y = \\frac{k_u}{k_v} x + \\frac{b_u}{b_v}$。\n    - 你需要保证 $b_u$ 在 long long 范围内，$k_u, k_v, b_v$ 在 int 范围内，且 $k_v, b_v > 0$。\n\n对于所有测试数据，保证存在这样的 $(k_u, k_v, b_u, b_v)$ 满足题目条件。\n\n- 读入完成之后，交互库将会调用 $T$ 次 `Find` 函数。\n- 若每一组测试数据中你都在给定的询问次数内求出了正确的直线，交互库将在标准输出流输出两行，第一行一个字符串 $\\texttt{Correct.}$，第二行一个整数，表示 $T$ 组测试数据中 `query` 调用次数的最大值。否则交互库会输出对应错误信息，并立即停止程序。", "inputFormat": "见【测试程序方式】。", "outputFormat": "见【测试程序方式】。", "hint": "\n#### 【样例 $1$ 解释】\n$\\mathrm{task\\_id} = 0$ 表示该组数据为样例。\n\n下面三张图依次展示了三组数据对应的函数图像。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rtdb7wd4.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/o908iel6.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/8guqdxhd.png)\n\n#### 子任务\n\n对于所有测试数据，$2 \\le V \\le 10^9$，$1 \\le T \\le 10^4$，$100 \\le \\mathrm{limit} \\le 3, 666$。\n\n---\n\n| 子任务编号 | 分值 | $V $ | $T$ | $\\mathrm{limit}$ | 特殊性质 |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| 1 | $10$ | $\\le 10^2$ | $\\le 10$ | $=110$ | 无 | \n| 2 | $20$ | $\\le 10^9$ | $\\le 10^3$ | $=180$ | A | \n| 3 | $10$ | $\\le 10^5$ | $\\le 10$ | $=1,111$ | 无 | \n| 4 | $15$ | $\\le 10^9$ | $\\le 500$ | $=3,666$ | 无 | \n| 5 | $20$ | $\\le 10^5$ | $\\le 10$ | $=10^2$ | 无 | \n| 6 | $10$ | $\\le 10^9$ | $\\le 10$ | $=180$ | 无 | \n| 7 | $15$ | $\\le 10^9$ | $\\le 10^4$ | $=180$ | 无 | \n\n特殊性质 A：保证直线 $L$ 是由 $y = \\frac{a}{b}x$ 向上平移至多 $\\frac{1}{2b}$ 得到的，其中 $0 < b \\le V$。\n\n#### 评分方式\n\n**本题首先会受到和传统题相同的限制**。例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 $0$ 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n当你在每次 `Find` 调用中，程序调用的 `query` 函数次数不超过 `limit`，且返回的 $L'$ 均满足题目描述中的条件，即通过该测试点，否则该测试点不通过。只有你通过一个子任务的所有测试点时，才能获得该子任务的所有分数。\n\n**选手不应通过非法方式获取交互库的内部信息，如试图与标准输入、输出流进行交互。此类行为将被视为作弊。**", "locale": "zh-CN"}}}
{"pid": "P11423", "type": "P", "difficulty": 6, "samples": [["4\n0011\n1010\n0000\n0110\n", "Correct. 1\nYou report 2, with number of energy propagations to be 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "交互题", "Special Judge", "O2优化", "随机化", "构造", "CTT（清华集训/北大集训）", "Ad-hoc"], "title": "[清华集训 2024] 阿尔塔尔 2", "background": "**这是一道交互题。**\n\n请在提交时不要引用 `altar.h`。\n\n---\n\n一年过去了，阿尔塔尔站在曾被他摧毁的祭坛面前。祭坛上的宝石早已失去了原有的光泽。\n\n“解铃还须系铃人，是这样吗？”他喃喃自语。", "description": "祭坛呈正 $n$ 边形，每个顶点上有一个未激活的宝石。我们用 $1$ 至 $n$ 的整数给每种宝石编号。\n\n宝石之间存在着能量流动关系，这使得激活一些宝石之后可以更容易地激活其他宝石。对于每一对宝石 $(i, j)$（$i\\neq  j$），要么从 $i$ 到 $j$ 存在流动，要么从 $j$ 到 $i$ 存在流动，即当我们把宝石看作点、从 $p$ 到 $q$ 的流动看作一条从 $p$ 到 $q$ 的有向边，得到的图是一个 $n$ 个点的**竞赛图**。阿尔塔尔并不知道宝石之间的能量流动关系如何。\n\n为了激活祭坛，阿尔塔尔需要激活所有的宝石。为此，阿尔塔尔需要首先选择 $n$ 个宝石中的一个将其初始激活，然后进行若干次**能量传递**。每一次**能量传递**的效果为：若这次**能量传递**前宝石 $y$ 未被激活，且存在一个激活的宝石 $x$ 到 $y$ 有流动，那么**能量传递**后 $y$ 就会被激活。在**能量传递**前就被激活的宝石在**能量传递**之后依然是被激活的。\n\n由于**能量传递**需要耗费大量体力，阿尔塔尔希望找到一个宝石，将其初始激活之后可以使用**最少次数的能量传递**激活所有宝石。为此，阿尔塔尔可以进行若干次**能量感知**：给出 $1 ≤ i, j ≤ n$ 且 $i\\neq j$，一次**能量感知**可以确定宝石 $i$ 和 $j$ 之间的能量流动关系。\n\n你需要帮助阿尔塔尔使用尽可能少的**能量感知**操作，确定初始激活的宝石编号。可以证明总是存在一个宝石，将其初始激活后使用有限次能量传递即可激活所有宝石。\n\n### 【实现细节】\n\n你不需要也不应该实现主函数。你需要实现以下函数：\n```cpp\nint altar(int n);\n```\n+ 其中 $n$ 表示祭坛上的宝石数量。\n\n+ 你需要返回一个整数 $x$，表示阿尔塔尔需要初始激活宝石 $x$。你需要保证 $1 ≤ x ≤n$，且在所有宝石中初始激活 $x$ 可以让阿尔塔尔使用最少次数的**能量传递**激活所有宝石。\n\n+ **在最终测试时，交互库会在一次运行中调用 $T = 300$ 次 `altar` 函数。**\n\n你可以调用以下函数进行**能量感知**：\n```cpp\nbool sense(int i, int j);\n```\n+ 你需要保证 $1 ≤ i, j ≤ n$ 且 $i\\neq j$。\n\n+ 若 $i$ 与 $j$ 的能量流动为 $i$ 向 $j$，其返回 `true`，否则返回 `false`。\n\n+ 你需要保证在一次 `altar` 的调用中 `sense` 的调用次数不超过 $4.5 × 10^4$。\n\n在满足题目条件和数据范围的情况下，最终测试时交互库的运行时间不会超过 $150\\text{ ms}$，运行空间不会超过 $256\\text{ MiB}$。\n\n**交互库不是自适应的，即能量流动关系是固定的，不会随着交互过程改变。**\n\n### 【测试程序方式】\n\n**试题目录下的 `grader.cpp` 是我们提供的交互库参考实现。最终测试的交互库与样例交互库有一定不同，故你的实现不应该依赖样例交互库实现。**\n\n你需要在本题目录下使用如下命令编译得到可执行程序：\n```\ng++ grader.cpp sample.cpp -o sample -O2 --std=c++14 -lm\n```\n对于编译得到的可执行程序：", "inputFormat": "可执行文件将从标准输入读入以下格式的数据：\n\n– 第一行一个整数 $n$ 表示祭坛上的宝石数，你需要保证 $3 ≤ n ≤ 300$。\n\n– 接下来 $n$ 行，第 $i$ 行一个长度为 $n$ 的 `01` 字符串，其中第 $j(j\\neq i)$ 个字符为 `1` 表示能量流动从 $i$ 到 $j$，否则表示能量流动从 $j$ 到 $i$。你需要保证第 $i$ 行第 $j$ 个字符和第 $j$ 行第 $i$ 个字符间恰好有一个为 `1` 另一个为 `0`，**样例交互库并不会判断输入是否满足条件。**\n\n读入完成之后，交互库将调用恰好一次函数 `altar`。", "outputFormat": "在 `altar` 函数退出后，如果你给出了正确的宝石编号，交互库将在标准输出流输出 `Correct. X`，其中 $X$ 表示 `sense` 的调用次数，并在标准错误流输出你返回的宝石编号以及对应的**能量传递**次数；否则交互库将在标准输出流输出 `Wrong Answer` 并在标准错误流输出对应错误信息。", "hint": "### 【样例 1 解释】\n\n该样例输出为下发的样例程序在该组样例下的输出。该样例中，`altar` 返回 $1$、$2$、$4$ 均满足条件。\n\n### 【子任务】\n\n对于所有测试数据，单个测试点中 `altar` 函数的调用次数 $T = 300$，每一次调用都有 $3 ≤ n ≤ 300$。\n\n子任务 $1$（$10$ 分，共 $1$ 个测试点）：$n = 300$，两个宝石之间的能量流动方向在两种可能间独立均匀随机。\\\n子任务 $2$（$10$ 分，共 $2$ 个测试点）：存在一个宝石流向所有其他宝石。\\\n子任务 $3$（$80$ 分，共 $7$ 个测试点）：没有特殊限制，依赖子任务 $1$、$2$。\n\n### 【评分方式】\n\n**本题首先会受到和传统题相同的限制**，例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 $0$ 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n对于每个测试点，如果你的程序出现了非法的函数调用，或没有在所有测试数据中都返回正确的宝石，你将获得该测试点 $0\\%$ 的分数。否则你会按照在 $T$ 组 `altar` 调用中的 `sense` 调用次数的**平均值** $X$，依据如下公式计算该测试点的得分占比：\n\n+ 若 $45000 ≥ X ≥ 10^4$，你可以获得 $\\left(1 + 29 × \\frac{45000-X}{35000}\\right)\\%$ 的分数；\n\n+ 若 $10^4 > X ≥ 2100$，你可以获得 $\\left(30 + 30 ×\\frac{10^4-X}{7900}\\right)\\%$ 的分数；\n\n+ 若 $2100 > X ≥ 700$，你可以获得 $\\left(60 + 20 ×\\left(\\frac{2100}X - 1\\right)\\right)\\%$ 的分数；\n\n+ 若 $X ≤ 700$，你可以获得该测试点 $100\\%$ 的分数；\n\n每个子任务的分数为该子任务中所有测试点的得分占比的最小值与该子任务满分的乘积。\n\n**选手不应通过非法方式获取交互库的内部信息，如试图与标准输入、输出流进行交互。此类行为将被视为作弊。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2024] 阿尔塔尔 2", "background": "**这是一道交互题。**\n\n请在提交时不要引用 `altar.h`。\n\n---\n\n一年过去了，阿尔塔尔站在曾被他摧毁的祭坛面前。祭坛上的宝石早已失去了原有的光泽。\n\n“解铃还须系铃人，是这样吗？”他喃喃自语。", "description": "祭坛呈正 $n$ 边形，每个顶点上有一个未激活的宝石。我们用 $1$ 至 $n$ 的整数给每种宝石编号。\n\n宝石之间存在着能量流动关系，这使得激活一些宝石之后可以更容易地激活其他宝石。对于每一对宝石 $(i, j)$（$i\\neq  j$），要么从 $i$ 到 $j$ 存在流动，要么从 $j$ 到 $i$ 存在流动，即当我们把宝石看作点、从 $p$ 到 $q$ 的流动看作一条从 $p$ 到 $q$ 的有向边，得到的图是一个 $n$ 个点的**竞赛图**。阿尔塔尔并不知道宝石之间的能量流动关系如何。\n\n为了激活祭坛，阿尔塔尔需要激活所有的宝石。为此，阿尔塔尔需要首先选择 $n$ 个宝石中的一个将其初始激活，然后进行若干次**能量传递**。每一次**能量传递**的效果为：若这次**能量传递**前宝石 $y$ 未被激活，且存在一个激活的宝石 $x$ 到 $y$ 有流动，那么**能量传递**后 $y$ 就会被激活。在**能量传递**前就被激活的宝石在**能量传递**之后依然是被激活的。\n\n由于**能量传递**需要耗费大量体力，阿尔塔尔希望找到一个宝石，将其初始激活之后可以使用**最少次数的能量传递**激活所有宝石。为此，阿尔塔尔可以进行若干次**能量感知**：给出 $1 ≤ i, j ≤ n$ 且 $i\\neq j$，一次**能量感知**可以确定宝石 $i$ 和 $j$ 之间的能量流动关系。\n\n你需要帮助阿尔塔尔使用尽可能少的**能量感知**操作，确定初始激活的宝石编号。可以证明总是存在一个宝石，将其初始激活后使用有限次能量传递即可激活所有宝石。\n\n### 【实现细节】\n\n你不需要也不应该实现主函数。你需要实现以下函数：\n```cpp\nint altar(int n);\n```\n+ 其中 $n$ 表示祭坛上的宝石数量。\n\n+ 你需要返回一个整数 $x$，表示阿尔塔尔需要初始激活宝石 $x$。你需要保证 $1 ≤ x ≤n$，且在所有宝石中初始激活 $x$ 可以让阿尔塔尔使用最少次数的**能量传递**激活所有宝石。\n\n+ **在最终测试时，交互库会在一次运行中调用 $T = 300$ 次 `altar` 函数。**\n\n你可以调用以下函数进行**能量感知**：\n```cpp\nbool sense(int i, int j);\n```\n+ 你需要保证 $1 ≤ i, j ≤ n$ 且 $i\\neq j$。\n\n+ 若 $i$ 与 $j$ 的能量流动为 $i$ 向 $j$，其返回 `true`，否则返回 `false`。\n\n+ 你需要保证在一次 `altar` 的调用中 `sense` 的调用次数不超过 $4.5 × 10^4$。\n\n在满足题目条件和数据范围的情况下，最终测试时交互库的运行时间不会超过 $150\\text{ ms}$，运行空间不会超过 $256\\text{ MiB}$。\n\n**交互库不是自适应的，即能量流动关系是固定的，不会随着交互过程改变。**\n\n### 【测试程序方式】\n\n**试题目录下的 `grader.cpp` 是我们提供的交互库参考实现。最终测试的交互库与样例交互库有一定不同，故你的实现不应该依赖样例交互库实现。**\n\n你需要在本题目录下使用如下命令编译得到可执行程序：\n```\ng++ grader.cpp sample.cpp -o sample -O2 --std=c++14 -lm\n```\n对于编译得到的可执行程序：", "inputFormat": "可执行文件将从标准输入读入以下格式的数据：\n\n– 第一行一个整数 $n$ 表示祭坛上的宝石数，你需要保证 $3 ≤ n ≤ 300$。\n\n– 接下来 $n$ 行，第 $i$ 行一个长度为 $n$ 的 `01` 字符串，其中第 $j(j\\neq i)$ 个字符为 `1` 表示能量流动从 $i$ 到 $j$，否则表示能量流动从 $j$ 到 $i$。你需要保证第 $i$ 行第 $j$ 个字符和第 $j$ 行第 $i$ 个字符间恰好有一个为 `1` 另一个为 `0`，**样例交互库并不会判断输入是否满足条件。**\n\n读入完成之后，交互库将调用恰好一次函数 `altar`。", "outputFormat": "在 `altar` 函数退出后，如果你给出了正确的宝石编号，交互库将在标准输出流输出 `Correct. X`，其中 $X$ 表示 `sense` 的调用次数，并在标准错误流输出你返回的宝石编号以及对应的**能量传递**次数；否则交互库将在标准输出流输出 `Wrong Answer` 并在标准错误流输出对应错误信息。", "hint": "### 【样例 1 解释】\n\n该样例输出为下发的样例程序在该组样例下的输出。该样例中，`altar` 返回 $1$、$2$、$4$ 均满足条件。\n\n### 【子任务】\n\n对于所有测试数据，单个测试点中 `altar` 函数的调用次数 $T = 300$，每一次调用都有 $3 ≤ n ≤ 300$。\n\n子任务 $1$（$10$ 分，共 $1$ 个测试点）：$n = 300$，两个宝石之间的能量流动方向在两种可能间独立均匀随机。\\\n子任务 $2$（$10$ 分，共 $2$ 个测试点）：存在一个宝石流向所有其他宝石。\\\n子任务 $3$（$80$ 分，共 $7$ 个测试点）：没有特殊限制，依赖子任务 $1$、$2$。\n\n### 【评分方式】\n\n**本题首先会受到和传统题相同的限制**，例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 $0$ 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n对于每个测试点，如果你的程序出现了非法的函数调用，或没有在所有测试数据中都返回正确的宝石，你将获得该测试点 $0\\%$ 的分数。否则你会按照在 $T$ 组 `altar` 调用中的 `sense` 调用次数的**平均值** $X$，依据如下公式计算该测试点的得分占比：\n\n+ 若 $45000 ≥ X ≥ 10^4$，你可以获得 $\\left(1 + 29 × \\frac{45000-X}{35000}\\right)\\%$ 的分数；\n\n+ 若 $10^4 > X ≥ 2100$，你可以获得 $\\left(30 + 30 ×\\frac{10^4-X}{7900}\\right)\\%$ 的分数；\n\n+ 若 $2100 > X ≥ 700$，你可以获得 $\\left(60 + 20 ×\\left(\\frac{2100}X - 1\\right)\\right)\\%$ 的分数；\n\n+ 若 $X ≤ 700$，你可以获得该测试点 $100\\%$ 的分数；\n\n每个子任务的分数为该子任务中所有测试点的得分占比的最小值与该子任务满分的乘积。\n\n**选手不应通过非法方式获取交互库的内部信息，如试图与标准输入、输出流进行交互。此类行为将被视为作弊。**", "locale": "zh-CN"}}}
{"pid": "P11424", "type": "P", "difficulty": 7, "samples": [["0\n1 4\n1 2\n1 3\n1 4\n", "2\n"], ["1\n1 4\n1 2\n2 3\n3 4\n", "16\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "CTT（清华集训/北大集训）"], "title": "[清华集训 2024] 颠倒歌", "background": "", "description": "对于树 $T(V, E)$ 和 $S ⊆ V$，记 $f(S, T)$ 表示 $T$ 的对 $S$ 的导出子图（即仅保留 $S$ 中的点和两端都在 $S$ 中的边得到的图）中度数小于等于 $1$ 的点的数量。\n\n对于两棵树 $T_1(V_1, E_1), T_2(V_2, E_2)$，若 $V_1 = V_2$，我们称 $T_1 ≼ T_2$ 当且仅当对于任意 $S_2 ⊆ V_2$，存在 $S_1$ 满足 $S_2 ⊆ S_1 ⊆ V_1$ 且 $f(S_1, T_1) ≤ f(S_2, T_2)$。\n\n称 $T_1, T_2$ 等价当 $T_1 ≼ T_2$ 且 $T_2 ≼ T_1$，记作 $T_1 ∼ T_2$。该等价关系将 $n$ 个点的有标号树划分成若干等价类。\n\n问：\n\n1. 给定 $k$ 棵 $n$ 个点的树 $T_1, T_2 \\dots , T_k$，求满足 $T ≼ T_i, ∀1 ≤ i ≤ k$ 的**有标号树 $T$ 构成的等价类**数量。\n\n2. 给定 $k$ 棵 $n$ 个点的树 $T_1, T_2 \\dots , T_k$，求满足 $T_i ≼ T, ∀1 ≤ i ≤ k$ 的**有标号树** $T$ 数量。\n\n注意两问的计数对象不同。两问答案均对 $998, 244, 353$ 取模。\n\n保证答案取模后非 $0$。", "inputFormat": "从标准输入读入数据。\n\n输入第一行一个整数 $p$，其中 $p ∈ \\{0, 1\\}$，$p = 0$ 表示询问第一问，否则表示询问第二问。\n\n接下来一行两个正整数 $k, n$，分别表示输入树的数量以及点数。\n\n接下来依次输入 $k$ 棵树，对于每棵树输入 $n - 1$ 行每行两个正整数 $u, v$ 描述树中的一条边。", "outputFormat": "输出到标准输出。\n\n输出一行一个整数表示答案对 $998, 244, 353$ 取模后的结果。", "hint": "### 【样例 1 解释】\n\n可以证明 $4$ 个点的有标号树被划分成了 $5$ 个等价类，所有的链在同一个等价类，而其它分别以每个点为菊花中心对应一个等价类。\n\n可以验证链对应的等价类和该树本身所在的等价类均满足要求，而其他等价类不满足要求。\n\n### 【样例 2 解释】\n\n可以验证所有 $4$ 个点的有标号树共 $16$ 个均满足要求。\n\n### 【样例 3 ~ 10】\n\n见题目目录下的 `3.in` ~ `10.in` 与 `3.ans` ~ `10.ans`。\n\n### 【子任务】\n\n对于所有数据，保证 $p ∈ \\{0, 1\\}$，$3 ≤ n ≤ 5000$，$1 ≤ k ≤ 1000$，$1 ≤ u, v ≤ n$，答案取模后不等于 $0$。\n\n| 子任务编号 | $p$ | $n$ | $k$ | 树形态 | 分数 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $\\in\\{0,1\\}$ | $\\le8$ | $\\le4$ | 无特殊形态 | $10$ |\n| $2$ | $=0$ | $\\le200$ | $\\le1$ | 菊花 | $4$ |\n| $3$ | $=0$ | $\\le200$ | $\\le1$ | 无特殊形态 | $8$ |\n| $4$ | $=0$ | $\\le200$ | $\\le2$ | 无特殊形态 | $9$ |\n| $5$ | $=0$ | $\\le200$ | $\\le40$ | 无特殊形态 | $10$ |\n| $6$ | $=0$ | $\\le5000$ | $\\le10^3$ | 无特殊形态 | $14$ |\n| $7$ | $=1$ | $\\le200$ | $\\le1$ | 链 | $7$ |\n| $8$ | $=1$ | $\\le200$ | $\\le1$ | 无特殊形态 | $7$ |\n| $9$ | $=1$ | $\\le200$ | $\\le2$ | 无特殊形态 | $10$ |\n| $10$ | $=1$ | $\\le200$ | $\\le40$ | 无特殊形态 | $10$ |\n| $11$ | $=1$ | $\\le5000$ | $\\le10^3$ | 无特殊形态 | $11$ |\n\n“树形态”中，“菊花”指存在一个向所有点有直接连边的点，“链”指所有点度数不超过 $2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2024] 颠倒歌", "background": "", "description": "对于树 $T(V, E)$ 和 $S ⊆ V$，记 $f(S, T)$ 表示 $T$ 的对 $S$ 的导出子图（即仅保留 $S$ 中的点和两端都在 $S$ 中的边得到的图）中度数小于等于 $1$ 的点的数量。\n\n对于两棵树 $T_1(V_1, E_1), T_2(V_2, E_2)$，若 $V_1 = V_2$，我们称 $T_1 ≼ T_2$ 当且仅当对于任意 $S_2 ⊆ V_2$，存在 $S_1$ 满足 $S_2 ⊆ S_1 ⊆ V_1$ 且 $f(S_1, T_1) ≤ f(S_2, T_2)$。\n\n称 $T_1, T_2$ 等价当 $T_1 ≼ T_2$ 且 $T_2 ≼ T_1$，记作 $T_1 ∼ T_2$。该等价关系将 $n$ 个点的有标号树划分成若干等价类。\n\n问：\n\n1. 给定 $k$ 棵 $n$ 个点的树 $T_1, T_2 \\dots , T_k$，求满足 $T ≼ T_i, ∀1 ≤ i ≤ k$ 的**有标号树 $T$ 构成的等价类**数量。\n\n2. 给定 $k$ 棵 $n$ 个点的树 $T_1, T_2 \\dots , T_k$，求满足 $T_i ≼ T, ∀1 ≤ i ≤ k$ 的**有标号树** $T$ 数量。\n\n注意两问的计数对象不同。两问答案均对 $998, 244, 353$ 取模。\n\n保证答案取模后非 $0$。", "inputFormat": "从标准输入读入数据。\n\n输入第一行一个整数 $p$，其中 $p ∈ \\{0, 1\\}$，$p = 0$ 表示询问第一问，否则表示询问第二问。\n\n接下来一行两个正整数 $k, n$，分别表示输入树的数量以及点数。\n\n接下来依次输入 $k$ 棵树，对于每棵树输入 $n - 1$ 行每行两个正整数 $u, v$ 描述树中的一条边。", "outputFormat": "输出到标准输出。\n\n输出一行一个整数表示答案对 $998, 244, 353$ 取模后的结果。", "hint": "### 【样例 1 解释】\n\n可以证明 $4$ 个点的有标号树被划分成了 $5$ 个等价类，所有的链在同一个等价类，而其它分别以每个点为菊花中心对应一个等价类。\n\n可以验证链对应的等价类和该树本身所在的等价类均满足要求，而其他等价类不满足要求。\n\n### 【样例 2 解释】\n\n可以验证所有 $4$ 个点的有标号树共 $16$ 个均满足要求。\n\n### 【样例 3 ~ 10】\n\n见题目目录下的 `3.in` ~ `10.in` 与 `3.ans` ~ `10.ans`。\n\n### 【子任务】\n\n对于所有数据，保证 $p ∈ \\{0, 1\\}$，$3 ≤ n ≤ 5000$，$1 ≤ k ≤ 1000$，$1 ≤ u, v ≤ n$，答案取模后不等于 $0$。\n\n| 子任务编号 | $p$ | $n$ | $k$ | 树形态 | 分数 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $\\in\\{0,1\\}$ | $\\le8$ | $\\le4$ | 无特殊形态 | $10$ |\n| $2$ | $=0$ | $\\le200$ | $\\le1$ | 菊花 | $4$ |\n| $3$ | $=0$ | $\\le200$ | $\\le1$ | 无特殊形态 | $8$ |\n| $4$ | $=0$ | $\\le200$ | $\\le2$ | 无特殊形态 | $9$ |\n| $5$ | $=0$ | $\\le200$ | $\\le40$ | 无特殊形态 | $10$ |\n| $6$ | $=0$ | $\\le5000$ | $\\le10^3$ | 无特殊形态 | $14$ |\n| $7$ | $=1$ | $\\le200$ | $\\le1$ | 链 | $7$ |\n| $8$ | $=1$ | $\\le200$ | $\\le1$ | 无特殊形态 | $7$ |\n| $9$ | $=1$ | $\\le200$ | $\\le2$ | 无特殊形态 | $10$ |\n| $10$ | $=1$ | $\\le200$ | $\\le40$ | 无特殊形态 | $10$ |\n| $11$ | $=1$ | $\\le5000$ | $\\le10^3$ | 无特殊形态 | $11$ |\n\n“树形态”中，“菊花”指存在一个向所有点有直接连边的点，“链”指所有点度数不超过 $2$。", "locale": "zh-CN"}}}
{"pid": "P11425", "type": "P", "difficulty": 7, "samples": [["2\n5\n2 3\n3 1\n5 1\n5 4\n5\n1 4\n2 3\n3 1\n5 3\n", "2\n2 3 1 5 4\n4 5 1 3 2\n2\n4 1 5 3 2\n2 5 3 4 1\n"]], "limits": {"time": [1000, 1000], "memory": [524288, 524288]}, "tags": ["2024", "Special Judge", "O2优化", "CTT（清华集训/北大集训）"], "title": "[清华集训 2024] 路南柯", "background": "", "description": "称一个 $1 ∼ n$ 的排列 $\\{p\\} = \\{p_1, p_2,\\cdots, p_n\\}$ 是一棵 $n$ 个点、点编号为 $1$ 至 $n$ 的树 $T$ 的**拓扑序列**，当且仅当对于任意 $1 ≤ i < n$，恰好存在唯一的 $j > i$ 满足 $p_i$ 与 $p_j$ 之间有连边。\n\n给定树 $T$，你需要给出尽可能少的该树的拓扑序列 $\\{p_1\\}, \\{p_2\\}, \\cdots, \\{p_k\\}$，使得有且仅有树 $T$ 满足 $\\{p_1\\}, \\{p_2\\}, \\cdots, \\{p_k\\}$ 均为该树的合法拓扑序列。", "inputFormat": "从标准输入读入数据。\n\n**本题有多组测试数据**。输入第一行一个正整数 $T$，表示测试数据组数，接下来依次输入每组测试数据。\n\n对于每组数据，输入第一行一个正整数 $n$，表示给定树的大小。接下来 $n - 1$ 行，每行两个正整数 $u, v$ 描述树中存在的一条边。", "outputFormat": "输出到标准输出。\n\n对于每组数据，输出第一行一个正整数 $k$ 表示你给出的拓扑序列数量，接下来 $k$ 行，每行输出一个 $1 ∼ n$ 的排列，描述你给出的拓扑序列。你需要保证 $1 ≤ k ≤ n$，且这 $k$ 个拓扑序列均为对应输入的合法拓扑序列，且只有一棵树满足这些拓扑序列都是其合法拓扑序列。", "hint": "【子任务】\n\n对于所有测试数据，$1 ≤ T ≤ 100$，$3 ≤ n ≤ 100$，$1 ≤ u, v ≤ n$。\n\n本题共有两个测试点。\n\n| 测试点编号 | 分值 | $T$ | $n$ |\n| :-: | :-: | :-: | :-: |\n| $1$ | $20$ | $=10$ | $=10$ |\n| $2$ | $80$ | $=10^2$ | $=10^2$ |\n\n特别地，所有测试点中每组数据均为从所有 $n$ 个点的有标号树中等概率随机选择生成得到的。\n\n### 【评分方式】\n\n对于一个测试点内部的某组数据：\n\n1. 你需要保证 $k$ 以及你输出的序列中每个数都为 $[1, n]$ 范围内的正整数，否则**整个测试点**将会获得 $0$ 分。\n\n2. 若你给出的序列中存在一个不是输入给定树的拓扑序列，那么你**这组数据**的得分比例将会是 $0$。\n\n3. 若存在多棵树满足其这些序列都是其合法的拓扑序列，那么你**这组数据**的得分比例将会是 $0$。\n\n4. 否则如果最优解为 $K$，而你构造的序列数量为 $k$，那么你**这组数据**的得分比例将为 $0.97^{k-K}$。\n\n一个测试点的得分比例将会是该测试点内所有数据的得分比例的**平均值**，一个测试点的实际得分值将会是其总分乘以得分比例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2024] 路南柯", "background": "", "description": "称一个 $1 ∼ n$ 的排列 $\\{p\\} = \\{p_1, p_2,\\cdots, p_n\\}$ 是一棵 $n$ 个点、点编号为 $1$ 至 $n$ 的树 $T$ 的**拓扑序列**，当且仅当对于任意 $1 ≤ i < n$，恰好存在唯一的 $j > i$ 满足 $p_i$ 与 $p_j$ 之间有连边。\n\n给定树 $T$，你需要给出尽可能少的该树的拓扑序列 $\\{p_1\\}, \\{p_2\\}, \\cdots, \\{p_k\\}$，使得有且仅有树 $T$ 满足 $\\{p_1\\}, \\{p_2\\}, \\cdots, \\{p_k\\}$ 均为该树的合法拓扑序列。", "inputFormat": "从标准输入读入数据。\n\n**本题有多组测试数据**。输入第一行一个正整数 $T$，表示测试数据组数，接下来依次输入每组测试数据。\n\n对于每组数据，输入第一行一个正整数 $n$，表示给定树的大小。接下来 $n - 1$ 行，每行两个正整数 $u, v$ 描述树中存在的一条边。", "outputFormat": "输出到标准输出。\n\n对于每组数据，输出第一行一个正整数 $k$ 表示你给出的拓扑序列数量，接下来 $k$ 行，每行输出一个 $1 ∼ n$ 的排列，描述你给出的拓扑序列。你需要保证 $1 ≤ k ≤ n$，且这 $k$ 个拓扑序列均为对应输入的合法拓扑序列，且只有一棵树满足这些拓扑序列都是其合法拓扑序列。", "hint": "【子任务】\n\n对于所有测试数据，$1 ≤ T ≤ 100$，$3 ≤ n ≤ 100$，$1 ≤ u, v ≤ n$。\n\n本题共有两个测试点。\n\n| 测试点编号 | 分值 | $T$ | $n$ |\n| :-: | :-: | :-: | :-: |\n| $1$ | $20$ | $=10$ | $=10$ |\n| $2$ | $80$ | $=10^2$ | $=10^2$ |\n\n特别地，所有测试点中每组数据均为从所有 $n$ 个点的有标号树中等概率随机选择生成得到的。\n\n### 【评分方式】\n\n对于一个测试点内部的某组数据：\n\n1. 你需要保证 $k$ 以及你输出的序列中每个数都为 $[1, n]$ 范围内的正整数，否则**整个测试点**将会获得 $0$ 分。\n\n2. 若你给出的序列中存在一个不是输入给定树的拓扑序列，那么你**这组数据**的得分比例将会是 $0$。\n\n3. 若存在多棵树满足其这些序列都是其合法的拓扑序列，那么你**这组数据**的得分比例将会是 $0$。\n\n4. 否则如果最优解为 $K$，而你构造的序列数量为 $k$，那么你**这组数据**的得分比例将为 $0.97^{k-K}$。\n\n一个测试点的得分比例将会是该测试点内所有数据的得分比例的**平均值**，一个测试点的实际得分值将会是其总分乘以得分比例。", "locale": "zh-CN"}}}
{"pid": "P11426", "type": "P", "difficulty": 7, "samples": [["3\nBRB", "0 0 1 1 0 0 0"], ["5\nRBBRR", "0 0 0 0 8 8 8 0 0 0 0"], ["见题目目录下的 3.in 与 3.ans。", "见题目目录下的 3.in 与 3.ans。"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "CTT（清华集训/北大集训）"], "title": "[清华集训 2024] 比赛", "background": "", "description": "有 $n$ 名选手，编号分别为 $1, 2, \\dots, n$。编号为 $i$ 的选手的实力值为 $i$。所有选手分为红、蓝两队，其中编号为 $i$ 的选手所在的队伍用字符 $s_i$ 描述。$s_i$ 为 `R` 表示他在红队，$s_i$ 为 `B` 表示他在蓝队。\n\n现在将所有选手排成一个环，每一对相邻且不属于同一队的选手会进行一场比赛，实力值较大的选手获胜，他所在的队伍的得分增加一。\n\n然而，蓝队的选手勾结了裁判，如果一场比赛中红队选手获胜，且他在蓝队选手的顺时针方向上，则这场比赛不计入得分。\n\n现在你想知道，对于每个 $k = -n, \\dots, -1, 0, 1, \\dots, n$，有多少种将选手排列的方法，使得红队得分恰好比蓝队得分大 $k$。两种方案不同，当且仅当存在某个选手，使得他顺时针方向的下一个选手在两个方案中不同。\n\n由于答案很大，你只需要输出答案对 $998,244,353$ 取模后的值。\n", "inputFormat": "从标准输入读入数据。\n\n\n第一行包含一个整数 $n$，表示选手个数。 \n\n第二行包含一个长度为 $n$ 的字符串 $s_1s_2 \\dots s_n$，表示每个选手所属的队伍。\n", "outputFormat": "输出到标准输出。\n\n输出一行 $2n + 1$ 个整数，分别表示 $k = -n, \\dots, 0, \\dots, n$ 的方案数对 $998,244,353$ 取模后的值。\n", "hint": "### 【样例 1 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wanohjrm.png)\n\n如图所示，共有两种排列的方法。\n\n第一种排列中，选手 $1$ 与 $2$ 之间的比赛虽然选手 $2$ 获胜，但他属于红队，且在选手 $1$ 顺时针方向，故这场比赛不计入得分。而选手 $2$ 和 $3$ 之间的比赛蓝方获胜。因此红队得分为 $0$，蓝队得分为 $1$。\n\n第二种排列中，共进行两场比赛，且均计入得分。红队得分与蓝队得分均为 $1$。\n\n### 【子任务】\n\n对于所有数据，满足 $3 \\leq n \\leq 3000$，$s$ 为由 `B` 和 `R` 构成的字符串。\n\n| 子任务编号 | 分值 | $n$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $\\le 17$ |\n|  $2$| $10$  |  $\\le 30$ |\n| $3$ | $10$  |  $\\le 50$ |\n|  $4$|  $10$ |  $\\le 200$ |\n| $5$ |  $45$ |  $\\le 500$ |\n| $6$ | $15$  |  $\\le 3000$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2024] 比赛", "background": "", "description": "有 $n$ 名选手，编号分别为 $1, 2, \\dots, n$。编号为 $i$ 的选手的实力值为 $i$。所有选手分为红、蓝两队，其中编号为 $i$ 的选手所在的队伍用字符 $s_i$ 描述。$s_i$ 为 `R` 表示他在红队，$s_i$ 为 `B` 表示他在蓝队。\n\n现在将所有选手排成一个环，每一对相邻且不属于同一队的选手会进行一场比赛，实力值较大的选手获胜，他所在的队伍的得分增加一。\n\n然而，蓝队的选手勾结了裁判，如果一场比赛中红队选手获胜，且他在蓝队选手的顺时针方向上，则这场比赛不计入得分。\n\n现在你想知道，对于每个 $k = -n, \\dots, -1, 0, 1, \\dots, n$，有多少种将选手排列的方法，使得红队得分恰好比蓝队得分大 $k$。两种方案不同，当且仅当存在某个选手，使得他顺时针方向的下一个选手在两个方案中不同。\n\n由于答案很大，你只需要输出答案对 $998,244,353$ 取模后的值。\n", "inputFormat": "从标准输入读入数据。\n\n\n第一行包含一个整数 $n$，表示选手个数。 \n\n第二行包含一个长度为 $n$ 的字符串 $s_1s_2 \\dots s_n$，表示每个选手所属的队伍。\n", "outputFormat": "输出到标准输出。\n\n输出一行 $2n + 1$ 个整数，分别表示 $k = -n, \\dots, 0, \\dots, n$ 的方案数对 $998,244,353$ 取模后的值。\n", "hint": "### 【样例 1 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wanohjrm.png)\n\n如图所示，共有两种排列的方法。\n\n第一种排列中，选手 $1$ 与 $2$ 之间的比赛虽然选手 $2$ 获胜，但他属于红队，且在选手 $1$ 顺时针方向，故这场比赛不计入得分。而选手 $2$ 和 $3$ 之间的比赛蓝方获胜。因此红队得分为 $0$，蓝队得分为 $1$。\n\n第二种排列中，共进行两场比赛，且均计入得分。红队得分与蓝队得分均为 $1$。\n\n### 【子任务】\n\n对于所有数据，满足 $3 \\leq n \\leq 3000$，$s$ 为由 `B` 和 `R` 构成的字符串。\n\n| 子任务编号 | 分值 | $n$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $\\le 17$ |\n|  $2$| $10$  |  $\\le 30$ |\n| $3$ | $10$  |  $\\le 50$ |\n|  $4$|  $10$ |  $\\le 200$ |\n| $5$ |  $45$ |  $\\le 500$ |\n| $6$ | $15$  |  $\\le 3000$ |\n", "locale": "zh-CN"}}}
{"pid": "P11427", "type": "P", "difficulty": 6, "samples": [["8 4\n3 4 1 2", "4\n4 6 7 8"], ["9495432940070937 8\n3000233914822387 2006732107970615 1954019279515031 3066501572807561 2123728203400817 2370011082783740 1927699386041907 2398543984293318\n", "5\n5006966022793002 6934665408834909 6960985302308033 8888684688349940 9084713505708850\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "2024", "O2优化", "剪枝", "差分约束", "CTT（清华集训/北大集训）", "状压 DP"], "title": "[清华集训 2024] 绝顶之战", "background": "", "description": "有一个长度为 $m$ 的一维空间，还有 $n$ 个物品，第 $i$ 个物品的长度为 $a_i$。现在按照编号从小到大的顺序依次将物品放入空间中，对于第 $i$ 个物品：\n\n- 如果当前空间中存在一段连续的长度至少为 $a_i$ 的空余，则你**必须**将第 $i$ 个物品放入一段连续的长度为 $a_i$ 的空余空间中。\n- 否则，第 $i$ 个物品无法被放入，跳过它。\n\n你需要输出：按照编号从小到大的顺序考虑完所有物品后，所有可能的**空间占用长度**，它的定义是所有被放入空间的物品的长度之和。\n", "inputFormat": "\n输入的第一行两个整数 $m,n$，分别表示空间长度和物品个数。\n\n第二行 $n$ 个整数 $a_1,\\cdots,a_n$，依次表示每个物品的长度。\n", "outputFormat": "输出两行，第一行一个整数 $S$，表示可能的空间占用长度的数量。\n\n第二行 $S$ 个整数 $b_1,\\ldots,b_S$，**从小到大**输出所有可能的空间占用长度。\n\n注意，你需要保证 $b_1,\\ldots,b_S$ 不重不漏。", "hint": "### 【样例 1 解释】\n\n下图分别展示了空间占用长度为 $4,6,7,8$ 的一种可能方式：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jbfoe06m.png)\n\n### 数据范围\n\n对于所有测试数据，$1\\leq m,a_i\\leq 10^{16}$，$\\ 1\\leq n\\leq 14$。\n\n| 子任务编号 | $n=$ | $m,a_i\\le$ | 分数 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $5$ | $10$  | $15$ |\n| $2$ | $2$ | $10^{16}$  | $5$ |\n| $3$ | $3$ | $10^{16}$  | $5$ |\n| $4$ | $5$ | $10^{16}$  | $5$ |\n| $5$ | $7$ | $10^{16}$  |  $5$|\n| $6$ | $9$ | $10^{16}$  | $5$ |\n| $7$ | $11$ | $10^{16}$ | $10$ |\n| $8$ | $12$ | $10^{16}$ | $10$ |\n| $9$ | $13$ | $10^{16}$ | $10$ |\n| $10$ | $14$ | $10^{16}$ | $30$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2024] 绝顶之战", "background": "", "description": "有一个长度为 $m$ 的一维空间，还有 $n$ 个物品，第 $i$ 个物品的长度为 $a_i$。现在按照编号从小到大的顺序依次将物品放入空间中，对于第 $i$ 个物品：\n\n- 如果当前空间中存在一段连续的长度至少为 $a_i$ 的空余，则你**必须**将第 $i$ 个物品放入一段连续的长度为 $a_i$ 的空余空间中。\n- 否则，第 $i$ 个物品无法被放入，跳过它。\n\n你需要输出：按照编号从小到大的顺序考虑完所有物品后，所有可能的**空间占用长度**，它的定义是所有被放入空间的物品的长度之和。\n", "inputFormat": "\n输入的第一行两个整数 $m,n$，分别表示空间长度和物品个数。\n\n第二行 $n$ 个整数 $a_1,\\cdots,a_n$，依次表示每个物品的长度。\n", "outputFormat": "输出两行，第一行一个整数 $S$，表示可能的空间占用长度的数量。\n\n第二行 $S$ 个整数 $b_1,\\ldots,b_S$，**从小到大**输出所有可能的空间占用长度。\n\n注意，你需要保证 $b_1,\\ldots,b_S$ 不重不漏。", "hint": "### 【样例 1 解释】\n\n下图分别展示了空间占用长度为 $4,6,7,8$ 的一种可能方式：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jbfoe06m.png)\n\n### 数据范围\n\n对于所有测试数据，$1\\leq m,a_i\\leq 10^{16}$，$\\ 1\\leq n\\leq 14$。\n\n| 子任务编号 | $n=$ | $m,a_i\\le$ | 分数 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $5$ | $10$  | $15$ |\n| $2$ | $2$ | $10^{16}$  | $5$ |\n| $3$ | $3$ | $10^{16}$  | $5$ |\n| $4$ | $5$ | $10^{16}$  | $5$ |\n| $5$ | $7$ | $10^{16}$  |  $5$|\n| $6$ | $9$ | $10^{16}$  | $5$ |\n| $7$ | $11$ | $10^{16}$ | $10$ |\n| $8$ | $12$ | $10^{16}$ | $10$ |\n| $9$ | $13$ | $10^{16}$ | $10$ |\n| $10$ | $14$ | $10^{16}$ | $30$ |\n", "locale": "zh-CN"}}}
{"pid": "P11428", "type": "P", "difficulty": 6, "samples": [["3\n1 2\n1 3", "4 1\nadd(2);\nadd(3);\nadd(1);\nremove(2);\nreport(3,2);\nreport(1,2);"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "交互题", "Special Judge", "O2优化", "分治", "二分图", "整体二分", "CTT（清华集训/北大集训）", "树的重心"], "title": "[清华集训 2024] 前往何方", "background": "", "description": "**这是一道交互题。**\n\n有一棵 $n$ 个点的树，你不知道其形态。你有一个初始为空的点集 $S$。你可以进行以下两种操作：\n\n1. 向 $S$ 中加入一个结点。\n2. 从 $S$ 中删除一个结点。\n\n每次操作结束后，交互库将会返回树对 $S$ 的导出子图（即仅保留 $S$ 中的点和两端都在 $S$ 中的边得到的图）的最大连通块大小。\n\n你需要使用尽可能少的操作还原树的结构。\n\n### 实现细节\n\n请确保你的程序开头有包含以下三行代码：\n\n```cpp\nint add (int x);\nint remove (int x);\nvoid report (int x,int y);\n```\n\n你不需要也不应该实现主函数。你需要实现以下函数：\n\n```\nvoid solve (int n);\n```\n\n- 其中 $n$ 表示树的结点个数，结点从 $1$ 至 $n$ 编号。\n\n你可以调用下列由交互库提供的函数：\n\n```\nint add (int x);\nint remove (int x);\nvoid report (int x,int y);\n```\n\n- `add(x)` 用于向 $S$ 中加入一个结点 $x$，若 $x$ 本身就在 $S$ 中则什么也不做。\n  - 你需要保证 $1 \\le x \\le n$。\n  - 该函数返回值为操作后 $S$ 的导出子图最大连通块大小。\n- `remove(x)` 用于从 $S$ 中删除一个结点 $x$，若 $x$ 本身就不在 $S$ 中则什么也不做。\n  - 你需要保证 $1 \\le x \\le n$。\n  - 该函数返回值为操作后 $S$ 的导出子图最大连通块大小；\n- `report(x,y)` 表示你找到了树的一条边 $(x,y)$。\n  - 你需要恰好调用该函数 $n-1$ 次以提交树的所有边。边的顺序和方向任意。\n\n你调用 `add` 与 `remove` 的总次数不得超过 $2\\times 10^6$。\n\n保证在满足题目条件和数据范围的情况下，最终测试时交互库的运行时间不会超过 2000 ms，运行空间不会超过 128 MiB。\n\n**交互库不是自适应的，即树形态固定，不会随着交互过程改变。**\n\n### 测试程序方式\n\n**试题目录下的 `implementer.cpp` 是我们提供的交互库参考实现。最终测试的交互库与样例交互库有一定不同，故你的实现不应该依赖样例交互库实现。**\n\n你需要在本题目录下使用如下命令编译得到可执行程序：\n\n`g++ implementer.cpp sample.cpp -o sample -O2 --std=c++14 -lm`\n\n对于编译得到的可执行程序：\n\n- 可执行文件将从标准输入读入以下格式的数据：\n  - 第一行一个整数 $n$ 表示树的点数。你需要保证 $1 \\le n \\le 10^4$。\n  - 接下来 $n-1$ 行，每行两个整数 $x,y$ 描述树上的一条边。边的顺序和方向是任意的。\n- 读入完成之后，交互库将调用恰好一次函数 ```solve```。\n- 当你的实现不符合【实现细节】中的要求时，交互库只会在标准输出流输出一行一个整数 `-1`。具体地，以下情况发生时交互库会输出 `-1`：\n  - 对 `add` 和 `remove` 的函数调用中传入了不满足 $1 \\le x \\le n$ 的 $x$；\n  - 调用 `add` 和 `remove` 的次数和超过了 $2 \\times 10^6$；\n  - `solve` 函数结束时 `report` 函数的调用次数不为 $n-1$。\n- 否则，交互库会在标准输出流按照以下格式输出：\n  - 第一行两个整数 $Q,c$，$Q$ 表示你调用 `add` 和 `remove` 的总次数，$c=1$ 表示你的答案正确，$c=0$ 表示不正确。\n  - 接下来若干行，为你调用 `add`，`remove` 和 `report` 的记录，其格式可以参考样例 1。\n\n", "inputFormat": "", "outputFormat": "", "hint": "该样例输出为下发的样例程序在该组样例下的输出。\n\n### 数据范围\n\n对于所有测试数据，$1\\leq n\\leq 10^4$。\n\n$\\text{Subtask 1}\\ (10\\%)$：$n=500$。\n\n$\\text{Subtask 2}\\ (20\\%)$：$n=2500$。\n\n$\\text{Subtask 3}\\ (70\\%)$：$n=10^4$。\n\n### 评分方式\n\n**本题首先会受到和传统题相同的限制**，例如编译错误会导致整道题目得 0 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 0 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n对于 $\\text{Subtask 1,2}$ 中的测试点，只要你的交互符合【实现细节】中的规则，且给出了正确答案，则可以获得满分。\n\n对于 $\\text{Subtask 3}$ 中的测试点，在你的交互符合【实现细节】中的规则，且给出了正确答案的基础上，设你调用 `add` 和 `remove` 的总次数为 $Q$，你的得分为 $f(Q)$，其中\n\n$$f(Q)=\\begin{cases}70 & (0.0\\times 10^6\\leq Q\\leq 0.6\\times 10^6)\\\\ 70-\\frac{Q-0.6\\times 10^6}{5000} & (0.6\\times 10^6<Q\\leq 0.7\\times 10^6)\\\\ 50-\\frac{Q-0.7\\times 10^6}{15000} & (0.7\\times 10^6<Q\\leq 1.0\\times 10^6)\\\\ 30-\\frac{Q-1.0\\times 10^6}{25000} & (1.0\\times 10^6<Q\\leq 1.5\\times 10^6)\\\\ 10-\\frac{Q-1.5\\times 10^6}{50000} & (1.5\\times 10^6<Q\\leq 2.0\\times 10^6)\\end{cases}$$\n\n是一个连续的分段线性函数。你可以理解为：你的前 $0.6\\times 10^6$ 次调用是免费的；此后的 $0.1\\times 10^6$ 次调用中每 $5000$ 次扣 $1$ 分；随后的 $0.3\\times 10^6$ 次调用中每 $15000$ 次扣 $1$ 分；随后的 $0.5\\times 10^6$ 次调用中每 $25000$ 次扣 $1$ 分；随后的 $0.5\\times 10^6$ 次调用中每 $50000$ 次扣 $1$ 分。\n\n你在每个子任务上获得的分数为在其中所有测试点上分数的最小值。\n\n**选手不应通过非法方式获取交互库的内部信息，如试图与标准输入、输出流进行交互。此类行为将被视为作弊**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2024] 前往何方", "background": "", "description": "**这是一道交互题。**\n\n有一棵 $n$ 个点的树，你不知道其形态。你有一个初始为空的点集 $S$。你可以进行以下两种操作：\n\n1. 向 $S$ 中加入一个结点。\n2. 从 $S$ 中删除一个结点。\n\n每次操作结束后，交互库将会返回树对 $S$ 的导出子图（即仅保留 $S$ 中的点和两端都在 $S$ 中的边得到的图）的最大连通块大小。\n\n你需要使用尽可能少的操作还原树的结构。\n\n### 实现细节\n\n请确保你的程序开头有包含以下三行代码：\n\n```cpp\nint add (int x);\nint remove (int x);\nvoid report (int x,int y);\n```\n\n你不需要也不应该实现主函数。你需要实现以下函数：\n\n```\nvoid solve (int n);\n```\n\n- 其中 $n$ 表示树的结点个数，结点从 $1$ 至 $n$ 编号。\n\n你可以调用下列由交互库提供的函数：\n\n```\nint add (int x);\nint remove (int x);\nvoid report (int x,int y);\n```\n\n- `add(x)` 用于向 $S$ 中加入一个结点 $x$，若 $x$ 本身就在 $S$ 中则什么也不做。\n  - 你需要保证 $1 \\le x \\le n$。\n  - 该函数返回值为操作后 $S$ 的导出子图最大连通块大小。\n- `remove(x)` 用于从 $S$ 中删除一个结点 $x$，若 $x$ 本身就不在 $S$ 中则什么也不做。\n  - 你需要保证 $1 \\le x \\le n$。\n  - 该函数返回值为操作后 $S$ 的导出子图最大连通块大小；\n- `report(x,y)` 表示你找到了树的一条边 $(x,y)$。\n  - 你需要恰好调用该函数 $n-1$ 次以提交树的所有边。边的顺序和方向任意。\n\n你调用 `add` 与 `remove` 的总次数不得超过 $2\\times 10^6$。\n\n保证在满足题目条件和数据范围的情况下，最终测试时交互库的运行时间不会超过 2000 ms，运行空间不会超过 128 MiB。\n\n**交互库不是自适应的，即树形态固定，不会随着交互过程改变。**\n\n### 测试程序方式\n\n**试题目录下的 `implementer.cpp` 是我们提供的交互库参考实现。最终测试的交互库与样例交互库有一定不同，故你的实现不应该依赖样例交互库实现。**\n\n你需要在本题目录下使用如下命令编译得到可执行程序：\n\n`g++ implementer.cpp sample.cpp -o sample -O2 --std=c++14 -lm`\n\n对于编译得到的可执行程序：\n\n- 可执行文件将从标准输入读入以下格式的数据：\n  - 第一行一个整数 $n$ 表示树的点数。你需要保证 $1 \\le n \\le 10^4$。\n  - 接下来 $n-1$ 行，每行两个整数 $x,y$ 描述树上的一条边。边的顺序和方向是任意的。\n- 读入完成之后，交互库将调用恰好一次函数 ```solve```。\n- 当你的实现不符合【实现细节】中的要求时，交互库只会在标准输出流输出一行一个整数 `-1`。具体地，以下情况发生时交互库会输出 `-1`：\n  - 对 `add` 和 `remove` 的函数调用中传入了不满足 $1 \\le x \\le n$ 的 $x$；\n  - 调用 `add` 和 `remove` 的次数和超过了 $2 \\times 10^6$；\n  - `solve` 函数结束时 `report` 函数的调用次数不为 $n-1$。\n- 否则，交互库会在标准输出流按照以下格式输出：\n  - 第一行两个整数 $Q,c$，$Q$ 表示你调用 `add` 和 `remove` 的总次数，$c=1$ 表示你的答案正确，$c=0$ 表示不正确。\n  - 接下来若干行，为你调用 `add`，`remove` 和 `report` 的记录，其格式可以参考样例 1。\n\n", "inputFormat": "", "outputFormat": "", "hint": "该样例输出为下发的样例程序在该组样例下的输出。\n\n### 数据范围\n\n对于所有测试数据，$1\\leq n\\leq 10^4$。\n\n$\\text{Subtask 1}\\ (10\\%)$：$n=500$。\n\n$\\text{Subtask 2}\\ (20\\%)$：$n=2500$。\n\n$\\text{Subtask 3}\\ (70\\%)$：$n=10^4$。\n\n### 评分方式\n\n**本题首先会受到和传统题相同的限制**，例如编译错误会导致整道题目得 0 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 0 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n对于 $\\text{Subtask 1,2}$ 中的测试点，只要你的交互符合【实现细节】中的规则，且给出了正确答案，则可以获得满分。\n\n对于 $\\text{Subtask 3}$ 中的测试点，在你的交互符合【实现细节】中的规则，且给出了正确答案的基础上，设你调用 `add` 和 `remove` 的总次数为 $Q$，你的得分为 $f(Q)$，其中\n\n$$f(Q)=\\begin{cases}70 & (0.0\\times 10^6\\leq Q\\leq 0.6\\times 10^6)\\\\ 70-\\frac{Q-0.6\\times 10^6}{5000} & (0.6\\times 10^6<Q\\leq 0.7\\times 10^6)\\\\ 50-\\frac{Q-0.7\\times 10^6}{15000} & (0.7\\times 10^6<Q\\leq 1.0\\times 10^6)\\\\ 30-\\frac{Q-1.0\\times 10^6}{25000} & (1.0\\times 10^6<Q\\leq 1.5\\times 10^6)\\\\ 10-\\frac{Q-1.5\\times 10^6}{50000} & (1.5\\times 10^6<Q\\leq 2.0\\times 10^6)\\end{cases}$$\n\n是一个连续的分段线性函数。你可以理解为：你的前 $0.6\\times 10^6$ 次调用是免费的；此后的 $0.1\\times 10^6$ 次调用中每 $5000$ 次扣 $1$ 分；随后的 $0.3\\times 10^6$ 次调用中每 $15000$ 次扣 $1$ 分；随后的 $0.5\\times 10^6$ 次调用中每 $25000$ 次扣 $1$ 分；随后的 $0.5\\times 10^6$ 次调用中每 $50000$ 次扣 $1$ 分。\n\n你在每个子任务上获得的分数为在其中所有测试点上分数的最小值。\n\n**选手不应通过非法方式获取交互库的内部信息，如试图与标准输入、输出流进行交互。此类行为将被视为作弊**。", "locale": "zh-CN"}}}
{"pid": "P11429", "type": "P", "difficulty": 2, "samples": [["4\nY5 Z3 Y6 C2 Y1\nZ4 Z7 Z2 Y2 P3\nZ6 Z7 Z1 Y2 C2\nP6 P8 P8 Z7 Y9", "6\n2 VIKTOR\n3 SONJA\n3 LEA\n4 VIKTOR\n4 IGOR\n4 LEA"], ["3\nP1 Y9 Z5 Y1 Z5\nP5 Y7 Z3 Y8 P1\nC6 Y8 P5 Z1 Z8", "4\n1 MARINO\n2 MARINO\n3 VIKTOR\n3 IGOR"], ["1\nY4 P9 Y8 Z5 Z3", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #2] 谬误 / Paradoks", "background": "译自 [COCI 2024/2025 #2](https://hsin.hr/coci/) T1。$\\texttt{1s,0.5G}$。满分为 $50$。", "description": "五个人**围坐在圆桌边上**玩游戏。顺时针方向上看过去，五个人分别是 $\\text{Igor, Lea, Marino, Sonja, Viktor}$。\n\n游戏有 $n$ 场。第一场第一个出牌的人为 $\\text{Sonja}$，此后每一场第一个出牌的人都是上一场的胜者。每场中，五个人按顺时针方向上的顺序依次出牌，每个人**恰好出一次**牌。\n\n每人手里都有 $n$ 张无色牌，编号 $1\\sim n$。出牌时，选择手中的一张牌，并选择红蓝黄绿中的一种颜色涂在牌上打出。此外，我们要求，颜色和数字的组合之前没有被打出过。\n\n每场中，第一个出牌的人打出的牌的颜色称为**场风**。每个人打的牌的颜色都应该尽可能是场风。如果没有打出场风的牌的话，那么**从此刻开始**（在接下来的场次中）他就再也不能打（**该场次**）场风的牌了。\n\n每场中胜者的确定方式如下：\n\n- 如果有人打出过红牌，则取打出数字最大的那个人；\n- 否则，取打出牌颜色是场风中数字最大的那个人；\n\n有时候，会有人打出的牌违反规则：牌的颜色与数字组合已经被打出过了，或者使用了被禁用的颜色。此时我们称这次出牌**谬误**（paradox）。谬误的出牌是无效的，也就是说，出的谬误牌会被忽略掉，不算入胜者的计算，（如果是第一次打出的话）也不算打出过。**保证每场第一个人出的牌不会谬误。**\n\n给定 $n$ 场中，出的五张牌依次是什么。你需要确定这场中出现了多少个谬误，并输出谬误出现的场次，以及是谁打出了谬误。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行五个字符串，每个字符串两个字符，表示这轮依次打出的牌：\n\n- 第一个字符，一个大写英文字母，代表颜色：\n    - $\\texttt{C}$：红色；\n    - $\\texttt{P}$：蓝色；\n    - $\\texttt{Y}$：黄色；\n    - $\\texttt{Z}$：绿色。\n- 第二个字符：数字 $1\\sim 9$。", "outputFormat": "第一行，输出悖论数量 $k$。\n\n接下来 $k$ 行，每行先是一个数字，再是一个字符串（**全部大写**），表示悖论发生的场次，以及谁打出了悖论。**按顺序输出。**", "hint": "#### 样例解释\n\n样例 $1$ 解释见图片。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ww0e92lc.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10$。\n\n| 子任务编号 | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    |  AB    |   $ 10 $   |  \n| $ 2 $    |  B   |  $ 10 $   |  \n| $ 3 $    |  | $ 30 $   |\n\n- 特殊性质 A：\n    - 每场比赛的胜利者都是 $\\text{Sonja}$。\n- 特殊性质 B：\n    - 谬误的原因只有一个：打出了之前打出过的牌。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #2] 谬误 / Paradoks", "background": "译自 [COCI 2024/2025 #2](https://hsin.hr/coci/) T1。$\\texttt{1s,0.5G}$。满分为 $50$。", "description": "五个人**围坐在圆桌边上**玩游戏。顺时针方向上看过去，五个人分别是 $\\text{Igor, Lea, Marino, Sonja, Viktor}$。\n\n游戏有 $n$ 场。第一场第一个出牌的人为 $\\text{Sonja}$，此后每一场第一个出牌的人都是上一场的胜者。每场中，五个人按顺时针方向上的顺序依次出牌，每个人**恰好出一次**牌。\n\n每人手里都有 $n$ 张无色牌，编号 $1\\sim n$。出牌时，选择手中的一张牌，并选择红蓝黄绿中的一种颜色涂在牌上打出。此外，我们要求，颜色和数字的组合之前没有被打出过。\n\n每场中，第一个出牌的人打出的牌的颜色称为**场风**。每个人打的牌的颜色都应该尽可能是场风。如果没有打出场风的牌的话，那么**从此刻开始**（在接下来的场次中）他就再也不能打（**该场次**）场风的牌了。\n\n每场中胜者的确定方式如下：\n\n- 如果有人打出过红牌，则取打出数字最大的那个人；\n- 否则，取打出牌颜色是场风中数字最大的那个人；\n\n有时候，会有人打出的牌违反规则：牌的颜色与数字组合已经被打出过了，或者使用了被禁用的颜色。此时我们称这次出牌**谬误**（paradox）。谬误的出牌是无效的，也就是说，出的谬误牌会被忽略掉，不算入胜者的计算，（如果是第一次打出的话）也不算打出过。**保证每场第一个人出的牌不会谬误。**\n\n给定 $n$ 场中，出的五张牌依次是什么。你需要确定这场中出现了多少个谬误，并输出谬误出现的场次，以及是谁打出了谬误。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行五个字符串，每个字符串两个字符，表示这轮依次打出的牌：\n\n- 第一个字符，一个大写英文字母，代表颜色：\n    - $\\texttt{C}$：红色；\n    - $\\texttt{P}$：蓝色；\n    - $\\texttt{Y}$：黄色；\n    - $\\texttt{Z}$：绿色。\n- 第二个字符：数字 $1\\sim 9$。", "outputFormat": "第一行，输出悖论数量 $k$。\n\n接下来 $k$ 行，每行先是一个数字，再是一个字符串（**全部大写**），表示悖论发生的场次，以及谁打出了悖论。**按顺序输出。**", "hint": "#### 样例解释\n\n样例 $1$ 解释见图片。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ww0e92lc.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10$。\n\n| 子任务编号 | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    |  AB    |   $ 10 $   |  \n| $ 2 $    |  B   |  $ 10 $   |  \n| $ 3 $    |  | $ 30 $   |\n\n- 特殊性质 A：\n    - 每场比赛的胜利者都是 $\\text{Sonja}$。\n- 特殊性质 B：\n    - 谬误的原因只有一个：打出了之前打出过的牌。", "locale": "zh-CN"}}}
{"pid": "P11430", "type": "P", "difficulty": 3, "samples": [["3 10\n2 3 5\n5 1 5\n3 2 5", "25"], ["4 13\n0 6 5\n0 3 4\n0 2 3\n0 4 4", "19"], ["3 10\n1 1 1\n3 2 3\n2 3 5", "11"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "背包 DP", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #2] 游戏 / Igre", "background": "译自 [COCI 2024/2025 #2](https://hsin.hr/coci/) T2。$\\texttt{2s,0.5G}$。满分为 $70$。", "description": "游戏 $i$ 需要 $p_i$ 分钟来学习。一款游戏只有学习怎么玩之后才可以玩。\n\n玩一局游戏 $i$ 需要 $t_i$ 分钟，可以获得 $o_i$ 分。可以多次游玩一款游戏。\n\n适度游戏益脑，过度游戏伤身。如果只花 $m$ 分钟来玩（包括学习玩）游戏，最多可以获得多少分？\n", "inputFormat": "第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行三个整数 $p_i,t_i,o_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "\n#### 样例解释\n\n样例 $3$ 解释：\n\n学第 $1,3$ 款游戏，耗时 $1+2=3$ 分钟。\n\n游玩游戏 $1,3,3$，获得 $1+5+5=11$ 分，耗时 $1+3+3=7$ 分钟。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n,m,t_i\\le 5\\, 000$；\n- $0\\le p_i\\le 5\\, 000$；\n- $1\\le o_i\\le 10^9$。\n\n\n| 子任务编号 | $n\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $1$ |     |   $ 6 $   |  \n| $ 2 $    | $10$ |   |  $ 13 $   |  \n| $ 3 $    | $5\\, 000$  | A | $ 23 $   |\n| $ 4 $    | $5\\, 000$  | | $ 28 $   |\n\n- 特殊性质 A：$\\forall 1\\le i\\le n$，$p_i=0$。\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #2] 游戏 / Igre", "background": "译自 [COCI 2024/2025 #2](https://hsin.hr/coci/) T2。$\\texttt{2s,0.5G}$。满分为 $70$。", "description": "游戏 $i$ 需要 $p_i$ 分钟来学习。一款游戏只有学习怎么玩之后才可以玩。\n\n玩一局游戏 $i$ 需要 $t_i$ 分钟，可以获得 $o_i$ 分。可以多次游玩一款游戏。\n\n适度游戏益脑，过度游戏伤身。如果只花 $m$ 分钟来玩（包括学习玩）游戏，最多可以获得多少分？\n", "inputFormat": "第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行三个整数 $p_i,t_i,o_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "\n#### 样例解释\n\n样例 $3$ 解释：\n\n学第 $1,3$ 款游戏，耗时 $1+2=3$ 分钟。\n\n游玩游戏 $1,3,3$，获得 $1+5+5=11$ 分，耗时 $1+3+3=7$ 分钟。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n,m,t_i\\le 5\\, 000$；\n- $0\\le p_i\\le 5\\, 000$；\n- $1\\le o_i\\le 10^9$。\n\n\n| 子任务编号 | $n\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $1$ |     |   $ 6 $   |  \n| $ 2 $    | $10$ |   |  $ 13 $   |  \n| $ 3 $    | $5\\, 000$  | A | $ 23 $   |\n| $ 4 $    | $5\\, 000$  | | $ 28 $   |\n\n- 特殊性质 A：$\\forall 1\\le i\\le n$，$p_i=0$。\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11431", "type": "P", "difficulty": 5, "samples": [["3 2 10\n1 6 4\n5 2", "33"], ["10 5 30\n5 16 2 10 7 2 4 20 5 12\n4 11 14 23 5", "435"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "数论", "前缀和", "COCI（克罗地亚）", "Ad-hoc"], "title": "[COCI 2024/2025 #2] 差异 / Različitost", "background": "译自 [COCI 2024/2025 #2](https://hsin.hr/coci/) T3。$\\texttt{2s,0.5G}$。满分为 $90$。", "description": "给定无限长的，周期长度为 $n$ 的非负整数序列 $a$ 的前 $n$ 项 $a_1,a_2,\\cdots,a_n$。\n\n给定无限长的，周期长度为 $m$ 的非负整数序列 $b$ 的前 $m$ 项 $b_1,b_2,\\cdots,b_m$。\n\n给定正整数 $k$，求出 $\\displaystyle \\left(\\sum_{i=1}^k a_i\\oplus b_i\\right)\\bmod \\left(10^9+7\\right)$。", "inputFormat": "第一行，三个正整数 $n,m,k$。\n\n第二行，$n$ 个正整数 $a_1,\\cdots,a_n$。\n\n第三行，$m$ 个正整数 $b_1,\\cdots,b_m$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "对于 $100\\%$ 的数据，保证：\n\n- $1\\le n,m\\le 2\\times 10^5$；    \n- $1\\le k\\le 10^{18}$；\n- $0\\le a_i,b_i\\le 10^{18}$。\n\n\n| 子任务编号 | $k\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $2\\times 10^5$ |    |   $ 25 $   |  \n| $ 2 $    | $10^{18}$ |  A |  $ 13 $   |  \n| $ 3 $    | $10^{18}$  | B | $ 9$   |\n| $ 4 $    | $10^{18}$  |  | $ 43 $   |\n\n- 特殊性质 A：$n=m$。\n- 特殊性质 B：$n=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #2] 差异 / Različitost", "background": "译自 [COCI 2024/2025 #2](https://hsin.hr/coci/) T3。$\\texttt{2s,0.5G}$。满分为 $90$。", "description": "给定无限长的，周期长度为 $n$ 的非负整数序列 $a$ 的前 $n$ 项 $a_1,a_2,\\cdots,a_n$。\n\n给定无限长的，周期长度为 $m$ 的非负整数序列 $b$ 的前 $m$ 项 $b_1,b_2,\\cdots,b_m$。\n\n给定正整数 $k$，求出 $\\displaystyle \\left(\\sum_{i=1}^k a_i\\oplus b_i\\right)\\bmod \\left(10^9+7\\right)$。", "inputFormat": "第一行，三个正整数 $n,m,k$。\n\n第二行，$n$ 个正整数 $a_1,\\cdots,a_n$。\n\n第三行，$m$ 个正整数 $b_1,\\cdots,b_m$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "对于 $100\\%$ 的数据，保证：\n\n- $1\\le n,m\\le 2\\times 10^5$；    \n- $1\\le k\\le 10^{18}$；\n- $0\\le a_i,b_i\\le 10^{18}$。\n\n\n| 子任务编号 | $k\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $2\\times 10^5$ |    |   $ 25 $   |  \n| $ 2 $    | $10^{18}$ |  A |  $ 13 $   |  \n| $ 3 $    | $10^{18}$  | B | $ 9$   |\n| $ 4 $    | $10^{18}$  |  | $ 43 $   |\n\n- 特殊性质 A：$n=m$。\n- 特殊性质 B：$n=1$。", "locale": "zh-CN"}}}
{"pid": "P11432", "type": "P", "difficulty": 6, "samples": [["3\n1 1 1\n3 3 5\n5 5 3", "7"], ["3\n1 2 1\n1 1 5\n1 3 4", "6"], ["3\n6 6 6\n8 8 7\n9 9 9", "9"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["动态规划 DP", "2024", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #2] 流明 / Blistavost", "background": "译自 [COCI 2024/2025 #2](https://hsin.hr/coci/) T4。$\\texttt{4s,1G}$。满分为 $120$。", "description": "\n数轴的正半轴的整数点上布满了璀璨的水晶灯。起初，它们都是点亮的。\n\n初始时，时刻为 $0$，守卫在原点处。每单位时间，她可以选择向左或者向右移动一单位长度，也**可以待在原地**。\n\n当守卫在一盏水晶灯所在的位置时，可以选择熄灭这盏水晶灯。**熄灭不消耗时间。**\n\n\n有 $n$ 个要求，每个要求形如三元组 $(l_i,r_i,t_i)$，表示：村民需要熄灭区间 $[l_i,r_i]$ 内的水晶灯，而且必须在时刻${}\\ge t_i$ 时才能熄灭这个区间内的水晶灯（也就是说，时刻 $\\lt t_i$ 时不能熄灭这个区间内**任意一盏**水晶灯）。\n\n请你计算守卫至少需要多少单位时间才能满足村民的全部要求。\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行三个正整数 $l_i,r_i,t_i$。", "outputFormat": "输出一行一个正整数，表示答案。\n", "hint": "\n#### 样例解释\n\n样例 $2$ 解释：\n\n时刻 $3$ 时走到 $x=3$ 处，停留一单位时间。\n\n时刻 $4$ 时，熄灭 $x=3$ 的水晶灯。\n\n时刻 $5$ 时，走到 $x=2$ 并熄灭上面的水晶灯。\n\n时刻 $6$ 时，走到 $x=1$ 并熄灭上面的水晶灯。\n\n耗时 $6$ 单位时间。\n\n#### 提示\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 5\\, 000$；    \n- $1\\le l_i\\le r_i\\le 10^{18}$；\n- $1\\le t_i\\le 10^{18}$。\n\n\n| 子任务编号 | $n\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $18$ | A |   $ 20 $   |  \n| $ 2 $    | $5\\, 000$ | B  |  $ 25 $   |  \n| $ 3 $    | $5\\, 000$ | A  |  $ 55 $   |  \n| $ 4 $    | $5\\, 000$ |  |  $ 20 $   |  \n\n- 特殊性质 A：$l_i=r_i$。\n- 特殊性质 B：$l_i=1$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #2] 流明 / Blistavost", "background": "译自 [COCI 2024/2025 #2](https://hsin.hr/coci/) T4。$\\texttt{4s,1G}$。满分为 $120$。", "description": "\n数轴的正半轴的整数点上布满了璀璨的水晶灯。起初，它们都是点亮的。\n\n初始时，时刻为 $0$，守卫在原点处。每单位时间，她可以选择向左或者向右移动一单位长度，也**可以待在原地**。\n\n当守卫在一盏水晶灯所在的位置时，可以选择熄灭这盏水晶灯。**熄灭不消耗时间。**\n\n\n有 $n$ 个要求，每个要求形如三元组 $(l_i,r_i,t_i)$，表示：村民需要熄灭区间 $[l_i,r_i]$ 内的水晶灯，而且必须在时刻${}\\ge t_i$ 时才能熄灭这个区间内的水晶灯（也就是说，时刻 $\\lt t_i$ 时不能熄灭这个区间内**任意一盏**水晶灯）。\n\n请你计算守卫至少需要多少单位时间才能满足村民的全部要求。\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行三个正整数 $l_i,r_i,t_i$。", "outputFormat": "输出一行一个正整数，表示答案。\n", "hint": "\n#### 样例解释\n\n样例 $2$ 解释：\n\n时刻 $3$ 时走到 $x=3$ 处，停留一单位时间。\n\n时刻 $4$ 时，熄灭 $x=3$ 的水晶灯。\n\n时刻 $5$ 时，走到 $x=2$ 并熄灭上面的水晶灯。\n\n时刻 $6$ 时，走到 $x=1$ 并熄灭上面的水晶灯。\n\n耗时 $6$ 单位时间。\n\n#### 提示\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 5\\, 000$；    \n- $1\\le l_i\\le r_i\\le 10^{18}$；\n- $1\\le t_i\\le 10^{18}$。\n\n\n| 子任务编号 | $n\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $18$ | A |   $ 20 $   |  \n| $ 2 $    | $5\\, 000$ | B  |  $ 25 $   |  \n| $ 3 $    | $5\\, 000$ | A  |  $ 55 $   |  \n| $ 4 $    | $5\\, 000$ |  |  $ 20 $   |  \n\n- 特殊性质 A：$l_i=r_i$。\n- 特殊性质 B：$l_i=1$。\n\n", "locale": "zh-CN"}}}
{"pid": "P11433", "type": "P", "difficulty": 6, "samples": [["1\n1 6\n1 2\n2 3\n1 3\n4 5\n4 6\n5 6", "1 2 3"], ["1\n3 26\n4 7\n4 9\n7 9\n4 5\n4 8\n5 8\n4 12\n4 18\n12 18\n3 7\n3 9\n15 5\n15 8\n6 13\n6 1\n13 1\n6 14\n6 17\n14 17\n6 2\n6 10\n2 10\n16 13\n16 1\n11 14\n11 17", "1 6 13\n3 7 9\n4 5 8"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "网络流", "Special Judge", "随机化", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #2] 三角 / Trokuti", "background": "译自 [COCI 2024/2025 #2](https://hsin.hr/coci/) T5。$\\texttt{4s,0.5G}$。满分为 $120$。\n", "description": "\n给定一张 $6n$ 个节点 $m$ 条边的无向图。保证这张图可以被**划分**成 $2n$ 个 $K_3$（大小为 $3$ 的完全图）。\n\n求出这张图中的 $n$ 个 $K_3$，不能有重复顶点。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来描述 $T$ 组数据：\n\n第一行，两个整数 $n,m$。\n\n接下来 $m$ 行，每行两个正整数 $u,v$，表示图中的一条无向边。", "outputFormat": "每组数据输出 $n$ 行，每行三个整数，表示 $K_3$ 的三个顶点。\n", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le T\\le 100$；\n- $1\\le n,\\sum n\\le 300$；  \n- $0\\le m\\le 10^6$；\n- $1\\le u,v\\le 6n$。\n\n\n| 子任务编号 | $n,\\sum n$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $\\le 300$ | A |   $ 13 $   |  \n| $ 2 $    | $=3$ | B |  $ 18 $   |  \n| $ 3 $    | $=6$ | B |  $ 18 $   |  \n| $ 4 $    | $\\le 300$ |   |  $ 71 $   |  \n\n- 特殊性质 A：$m=6n$。\n- 特殊性质 B：$T=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #2] 三角 / Trokuti", "background": "译自 [COCI 2024/2025 #2](https://hsin.hr/coci/) T5。$\\texttt{4s,0.5G}$。满分为 $120$。\n", "description": "\n给定一张 $6n$ 个节点 $m$ 条边的无向图。保证这张图可以被**划分**成 $2n$ 个 $K_3$（大小为 $3$ 的完全图）。\n\n求出这张图中的 $n$ 个 $K_3$，不能有重复顶点。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来描述 $T$ 组数据：\n\n第一行，两个整数 $n,m$。\n\n接下来 $m$ 行，每行两个正整数 $u,v$，表示图中的一条无向边。", "outputFormat": "每组数据输出 $n$ 行，每行三个整数，表示 $K_3$ 的三个顶点。\n", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le T\\le 100$；\n- $1\\le n,\\sum n\\le 300$；  \n- $0\\le m\\le 10^6$；\n- $1\\le u,v\\le 6n$。\n\n\n| 子任务编号 | $n,\\sum n$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $\\le 300$ | A |   $ 13 $   |  \n| $ 2 $    | $=3$ | B |  $ 18 $   |  \n| $ 3 $    | $=6$ | B |  $ 18 $   |  \n| $ 4 $    | $\\le 300$ |   |  $ 71 $   |  \n\n- 特殊性质 A：$m=6n$。\n- 特殊性质 B：$T=1$。", "locale": "zh-CN"}}}
{"pid": "P11434", "type": "P", "difficulty": 0, "samples": [["6\n2 3 0 4 7 5", "10"], ["16\n1 0 3 2 5 4 7 6 2 3 0 1 6 7 4 5", "72"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Code+"], "title": "[Code+#8 决赛] 异或表", "background": "搬运自 [Code+ #8 决赛](https://gitlink.org.cn/thusaa/codeplus8final)。", "description": "小 o 家里的墙上贴着一张巨大的异或表。顾名思义，假如我们从左到右、从下到上依次将这张表格的行和列从 $0$ 开始编号，那么第 $i$ 行第 $j$ 列的方格里写的数是 $i\\ \\text{xor}\\ j$。\n\n闲暇时刻，小 o 时常盯着表格发呆。这天，小 o 得到了一个序列。正当他绞尽脑汁思考如何玩转这个序列之时，一个绝妙的想法从脑海中闪过：为何不看看这个序列有多少个子段会在眼前的这张表格里作为连续的一段出现呢？\n\n形式化地讲，如果这个序列的一个连续子段可以与表格中以某一个位置开始向右的连续一段或者向上的连续一段完全重合，则称这个子段在异或表中出现过。\n\n当小 o 兴致勃勃地开始从表中搜寻想要的序列时，他发现这张表格不断延伸、无穷无尽，以至于完全无法判断一个序列是否存在于表格中。于是，他只好前来求助，希望掌握人类智慧的你能告诉他答案。", "inputFormat": "输入第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个非负整数 $a_1,a_2,…,a_n$。", "outputFormat": "输出一个非负整数表示答案。", "hint": "**【样例解释】**\n\n所有由单点构成的子段都满足要求。\n\n长度为 $2$ 的满足要求的子段有：$[2,3]\\ (x=2,y=0),\\ [3,0]\\ (x=2,y=1),\\ [4,7]\\ (x=5,y=1)$。\n\n长度为 $3$ 的满足要求的子段有：$[2,3,0]\\ (x=2,y=0)$。\n\n共 $6+3+1=10$ 个。\n\n**【数据范围】**\n\n对于全部数据，满足 $1\\le n\\le 10^5,0\\le a_i\\lt 2^{60}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#8 决赛] 异或表", "background": "搬运自 [Code+ #8 决赛](https://gitlink.org.cn/thusaa/codeplus8final)。", "description": "小 o 家里的墙上贴着一张巨大的异或表。顾名思义，假如我们从左到右、从下到上依次将这张表格的行和列从 $0$ 开始编号，那么第 $i$ 行第 $j$ 列的方格里写的数是 $i\\ \\text{xor}\\ j$。\n\n闲暇时刻，小 o 时常盯着表格发呆。这天，小 o 得到了一个序列。正当他绞尽脑汁思考如何玩转这个序列之时，一个绝妙的想法从脑海中闪过：为何不看看这个序列有多少个子段会在眼前的这张表格里作为连续的一段出现呢？\n\n形式化地讲，如果这个序列的一个连续子段可以与表格中以某一个位置开始向右的连续一段或者向上的连续一段完全重合，则称这个子段在异或表中出现过。\n\n当小 o 兴致勃勃地开始从表中搜寻想要的序列时，他发现这张表格不断延伸、无穷无尽，以至于完全无法判断一个序列是否存在于表格中。于是，他只好前来求助，希望掌握人类智慧的你能告诉他答案。", "inputFormat": "输入第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个非负整数 $a_1,a_2,…,a_n$。", "outputFormat": "输出一个非负整数表示答案。", "hint": "**【样例解释】**\n\n所有由单点构成的子段都满足要求。\n\n长度为 $2$ 的满足要求的子段有：$[2,3]\\ (x=2,y=0),\\ [3,0]\\ (x=2,y=1),\\ [4,7]\\ (x=5,y=1)$。\n\n长度为 $3$ 的满足要求的子段有：$[2,3,0]\\ (x=2,y=0)$。\n\n共 $6+3+1=10$ 个。\n\n**【数据范围】**\n\n对于全部数据，满足 $1\\le n\\le 10^5,0\\le a_i\\lt 2^{60}$。", "locale": "zh-CN"}}}
{"pid": "P11435", "type": "P", "difficulty": 0, "samples": [["20 31 5 3 7", "4"], ["12345 999999 121 66 233", "815118"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "Code+"], "title": "[Code+#8 决赛] 报数Ⅱ", "background": "搬运自 [Code+ #8 决赛](https://gitlink.org.cn/thusaa/codeplus8final)。", "description": "小 r 和小 z 厌倦了传统的报数游戏——几个人轮流报数，规定凡是 $7$ 的倍数以及数字中含有 $7$ 的数都不能报。“这也太容易了吧！谁还不会算个 $7$ 的倍数啊。”\n\n于是他们打算把游戏加强。一个比较广为人知的加强是“不能报出所有含有 $7$ 的数的倍数”，不过这次他们打算玩点更有意思的。\n\n小 z 说，可以把 $7$ 改成任意正整数 $a$ ，要求报出的数 $x$ 不能是 $a$ 的倍数，同时不能包含 $a$ （即如果把 $x$ 和 $a$ 都将其不含前导 $0$ 的十进制形式写成字符串，则 $x$ 不能以 $a$ 为子串，下文中“前缀”“后缀”的表述也是类似的含义）。\n\n小 r 说，“不能是 $a$ 的倍数”还是太弱，不妨我们改成 $x$ 的每个非空前缀都不能是 $a$ 的倍数吧。\n\n小 z 紧接着说，既然都考虑前缀了，那为什么不顺便考虑后缀？\n\n小 r 最后说，这几个条件用到的都是同一个 $a$ ，还是不够有意思，不如换成 $3$ 个数 $a,b,c$ 吧。\n\n于是他们最终制定好了规则：一个数 $x$ 能被报出当且仅当：$x$ 当中不包含 $a$ ，并且 $x$ 的任意一个非空前缀都不是 $b$ 的倍数，并且 $x$ 的任意一个非空后缀都不是 $c$ 的倍数。\n\n最后，他们打算看一下这个规则到底好不好玩——于是他们叫上了全程吃瓜的你。给定正整数 $l,r,a,b,c$，你需要计算 $[l,r]$ 范围内的正整数有多少个是按照上述规则能被报出来的。", "inputFormat": "输入共一行，$5$ 个正整数 $l,r,a,b,c$。", "outputFormat": "输出共一行，一个非负整数表示答案。", "hint": "**【样例 #1 解释】**\n\n$[20,31]$ 中，不包含 $5$、非空前缀不含 $3$ 的倍数、非空后缀不含 $7$ 的倍数的共有以下 $4$ 个：$22、23、26、29$。其他的数均不符合条件，例如 $0$ 是 $20$ 的非空后缀且为 $7$ 的倍数。\n\n**【数据范围】**\n\n对于所有的数据，满足 $1 \\leq l \\leq r \\leq 10^{18}, 1 \\leq a \\leq 10^9, 2 \\leq b,c \\leq 300$ 。\n\n子任务 $1$ （$15$ 分）：$r \\leq 10^6$。\n\n子任务 $2$ （$10$ 分）：$a, b, c \\leq 9$。\n\n子任务 $3$ （$15$ 分）：$c \\leq 15$。\n\n子任务 $4$ （$15$ 分）：$b,c \\leq 50$。\n\n子任务 $5$ （$15$ 分）：$b=c$。\n\n子任务 $6$ （$10$ 分）：$c$ 与 $10$ 互质。\n\n子任务 $7$ （$20$ 分）：无特殊性质。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#8 决赛] 报数Ⅱ", "background": "搬运自 [Code+ #8 决赛](https://gitlink.org.cn/thusaa/codeplus8final)。", "description": "小 r 和小 z 厌倦了传统的报数游戏——几个人轮流报数，规定凡是 $7$ 的倍数以及数字中含有 $7$ 的数都不能报。“这也太容易了吧！谁还不会算个 $7$ 的倍数啊。”\n\n于是他们打算把游戏加强。一个比较广为人知的加强是“不能报出所有含有 $7$ 的数的倍数”，不过这次他们打算玩点更有意思的。\n\n小 z 说，可以把 $7$ 改成任意正整数 $a$ ，要求报出的数 $x$ 不能是 $a$ 的倍数，同时不能包含 $a$ （即如果把 $x$ 和 $a$ 都将其不含前导 $0$ 的十进制形式写成字符串，则 $x$ 不能以 $a$ 为子串，下文中“前缀”“后缀”的表述也是类似的含义）。\n\n小 r 说，“不能是 $a$ 的倍数”还是太弱，不妨我们改成 $x$ 的每个非空前缀都不能是 $a$ 的倍数吧。\n\n小 z 紧接着说，既然都考虑前缀了，那为什么不顺便考虑后缀？\n\n小 r 最后说，这几个条件用到的都是同一个 $a$ ，还是不够有意思，不如换成 $3$ 个数 $a,b,c$ 吧。\n\n于是他们最终制定好了规则：一个数 $x$ 能被报出当且仅当：$x$ 当中不包含 $a$ ，并且 $x$ 的任意一个非空前缀都不是 $b$ 的倍数，并且 $x$ 的任意一个非空后缀都不是 $c$ 的倍数。\n\n最后，他们打算看一下这个规则到底好不好玩——于是他们叫上了全程吃瓜的你。给定正整数 $l,r,a,b,c$，你需要计算 $[l,r]$ 范围内的正整数有多少个是按照上述规则能被报出来的。", "inputFormat": "输入共一行，$5$ 个正整数 $l,r,a,b,c$。", "outputFormat": "输出共一行，一个非负整数表示答案。", "hint": "**【样例 #1 解释】**\n\n$[20,31]$ 中，不包含 $5$、非空前缀不含 $3$ 的倍数、非空后缀不含 $7$ 的倍数的共有以下 $4$ 个：$22、23、26、29$。其他的数均不符合条件，例如 $0$ 是 $20$ 的非空后缀且为 $7$ 的倍数。\n\n**【数据范围】**\n\n对于所有的数据，满足 $1 \\leq l \\leq r \\leq 10^{18}, 1 \\leq a \\leq 10^9, 2 \\leq b,c \\leq 300$ 。\n\n子任务 $1$ （$15$ 分）：$r \\leq 10^6$。\n\n子任务 $2$ （$10$ 分）：$a, b, c \\leq 9$。\n\n子任务 $3$ （$15$ 分）：$c \\leq 15$。\n\n子任务 $4$ （$15$ 分）：$b,c \\leq 50$。\n\n子任务 $5$ （$15$ 分）：$b=c$。\n\n子任务 $6$ （$10$ 分）：$c$ 与 $10$ 互质。\n\n子任务 $7$ （$20$ 分）：无特殊性质。", "locale": "zh-CN"}}}
{"pid": "P11436", "type": "P", "difficulty": 7, "samples": [["2\n1\n7", "1 0\n3 6\n1 2\n1 2\n2 3\n2 3\n1 3\n3 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "构造", "Ad-hoc", "Code+"], "title": "[Code+#8 决赛] 生成树", "background": "搬运自 [Code+ #8 决赛](https://gitlink.org.cn/thusaa/codeplus8final)。", "description": "小 I 既喜欢生成树，又喜欢他的幸运数字 $k$，所以小 I 想造出一个**可以有重边自环**的有向图，点从 $1$ 到 $n$ 编号，使得以 $1$ 为根的**外向**生成树数量**恰好**为 $k$。但小 I 太穷了，手边只有 100 条有向边，所以他请求你的帮助，请你帮他造出这样的一个有向图，或者告诉他这是不可能的。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $q$，表示询问次数。接下来 $q$ 行每行包含一个正整数 $k$，描述一次询问。", "outputFormat": "对于每次询问，若不存在方案，只需要输出一行一个整数 `-1`。否则输出多行：第一行两个整数 $n,m$，分别表示你给出的有向图的点数和边数，你需要保证 $1 \\le n \\le 101, 0 \\le m \\le 100$。接下来 $m$ 行，第 $i$ 行两个整数 $u_i,v_i$，表示一条从 $u_i$ 到 $v_i$ 的有向边。你需要保证 $1 \\le u_i, v_i \\le n$。", "hint": "**【数据范围】**\n\n对于所有数据，$1 \\le q \\le 100$，$1 \\leq k \\le 7 \\times 10^{15}$。\n\n本题采用 $\\text{Subtask}$ 捆绑测试。\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$3$|$k\\le100$|\n|$2$|$7$|存在整数 $0 \\le a,b \\le 20$ 使得 $k = 2^a3^b$|\n|$3$|$10$|$q=1, k = 101$|\n|$4$|$10$|$k \\le 10^3$|\n|$5$|$7$|$k \\le 10^4$|\n|$6$|$7$|$k \\le 10^6$|\n|$7$|$8$|$k \\le 3 \\times 10^7$|\n|$8$|$8$|$k \\le 8 \\times 10^9$|\n|$9$|$10$|$k \\le 10^{12}$|\n|$10$|$10$|$k \\le 3 \\times 10^{14}$|\n|$11$|$20$|$k \\le 7 \\times 10^{15}$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#8 决赛] 生成树", "background": "搬运自 [Code+ #8 决赛](https://gitlink.org.cn/thusaa/codeplus8final)。", "description": "小 I 既喜欢生成树，又喜欢他的幸运数字 $k$，所以小 I 想造出一个**可以有重边自环**的有向图，点从 $1$ 到 $n$ 编号，使得以 $1$ 为根的**外向**生成树数量**恰好**为 $k$。但小 I 太穷了，手边只有 100 条有向边，所以他请求你的帮助，请你帮他造出这样的一个有向图，或者告诉他这是不可能的。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $q$，表示询问次数。接下来 $q$ 行每行包含一个正整数 $k$，描述一次询问。", "outputFormat": "对于每次询问，若不存在方案，只需要输出一行一个整数 `-1`。否则输出多行：第一行两个整数 $n,m$，分别表示你给出的有向图的点数和边数，你需要保证 $1 \\le n \\le 101, 0 \\le m \\le 100$。接下来 $m$ 行，第 $i$ 行两个整数 $u_i,v_i$，表示一条从 $u_i$ 到 $v_i$ 的有向边。你需要保证 $1 \\le u_i, v_i \\le n$。", "hint": "**【数据范围】**\n\n对于所有数据，$1 \\le q \\le 100$，$1 \\leq k \\le 7 \\times 10^{15}$。\n\n本题采用 $\\text{Subtask}$ 捆绑测试。\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$3$|$k\\le100$|\n|$2$|$7$|存在整数 $0 \\le a,b \\le 20$ 使得 $k = 2^a3^b$|\n|$3$|$10$|$q=1, k = 101$|\n|$4$|$10$|$k \\le 10^3$|\n|$5$|$7$|$k \\le 10^4$|\n|$6$|$7$|$k \\le 10^6$|\n|$7$|$8$|$k \\le 3 \\times 10^7$|\n|$8$|$8$|$k \\le 8 \\times 10^9$|\n|$9$|$10$|$k \\le 10^{12}$|\n|$10$|$10$|$k \\le 3 \\times 10^{14}$|\n|$11$|$20$|$k \\le 7 \\times 10^{15}$|", "locale": "zh-CN"}}}
{"pid": "P11437", "type": "P", "difficulty": 1, "samples": [["10", "-1"], ["13", "11\n12\n13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["枚举", "Code+"], "title": "[Code+#6] 趣味数", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。", "description": "bdg 今天定义了“趣味数”：一个正整数是趣味数，当且仅当“在十进制下，低位的数字不小于高位的数字”。比如 $123, 111$ 是趣味数，$10, 120, 213$ 不是趣味数。\n\n现在，给你一个正整数 $n$，请你输出 $[10, n]$ 中所有的趣味数。", "inputFormat": "输入的第一行包含一个正整数 $n$。", "outputFormat": "从小到大输出所有的趣味数，每行一个趣味数。如果没有趣味数，则输出一行，内容为 $-1$。", "hint": "### 样例解释\n\n对于样例一，$10$ 不是趣味数，故输出 $-1$。\n\n对于样例二，$10\\le x\\le 13$ 中有 $11, 12, 13$ 三个趣味数。\n\n### 数据范围\n\n所有数据保证 $10\\le n \\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#6] 趣味数", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。", "description": "bdg 今天定义了“趣味数”：一个正整数是趣味数，当且仅当“在十进制下，低位的数字不小于高位的数字”。比如 $123, 111$ 是趣味数，$10, 120, 213$ 不是趣味数。\n\n现在，给你一个正整数 $n$，请你输出 $[10, n]$ 中所有的趣味数。", "inputFormat": "输入的第一行包含一个正整数 $n$。", "outputFormat": "从小到大输出所有的趣味数，每行一个趣味数。如果没有趣味数，则输出一行，内容为 $-1$。", "hint": "### 样例解释\n\n对于样例一，$10$ 不是趣味数，故输出 $-1$。\n\n对于样例二，$10\\le x\\le 13$ 中有 $11, 12, 13$ 三个趣味数。\n\n### 数据范围\n\n所有数据保证 $10\\le n \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P11438", "type": "P", "difficulty": 0, "samples": [["2 2\n0.25 0.25\n0.25 0.25\n4\n-1 0\n0 0\n1 0\n0 1", "0.75000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "Code+"], "title": "[Code+#6] 与我无关", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。\n\n\n------------\n\n这天，白大哥找到了小莉。\n\n“cp 拿不出题了，题目全被 zgg 抢走了，这次就由你来出题吧。”\n\n于是小莉在概统课上糊出了这道题。", "description": "设有两个离散型随机变量 $X,Y$，已知其联合分布列。\n\n由 $X,Y$ 的线性组合构造出 $n$ 个新的随机变量：令 $Z_i=a_iX+b_iY$，其中 $i=1,2,\\dots,n$，$a_i,b_i$ 为已知实系数，且不存在两对相同的 $a_i,b_i$。\n\n现在，从 $Z_1,Z_2,\\dots,Z_n$ 中随机取出 $Z_i,Z_j,Z_k$，其中 $i,j,k$ 两两不同（即从 $\\binom n3$ 种组合中，随机等概率地选选出一种组合），考虑如下三个命题：\n\n- $p_1:Z_i-Z_j$ 与 $Z_j-Z_k$ 不相关；\n- $p_2:Z_j-Z_k$ 与 $Z_k-Z_i$ 不相关；\n- $p_3:Z_k-Z_i$ 与 $Z_i-Z_j$ 不相关；\n\n请求出 $p_1,p_2,p_3$ 至少有一个为真的概率。\n\n", "inputFormat": "第一行两个正整数 $w_x,w_y$，是用来描述 $X,Y$ 联合分布列的参数，表示若 $x\\ge w_x+2333$ 或 $y\\ge w_y+2333$，则 $P(X=x,Y=y)=0$。\n\n接下来 $w_x$ 行中，第 $i$ 行有 $w_y$ 个实数，第 $j$ 个数表示 $P(X=i+2332,Y=j+2332)$，即 $X$ 取值为 $i+2332$ 且 $Y$ 取值为 $j+2332$ 的概率，记为 $p_{i,j}$。\n\n接下来一行一个正整数 $n$，表示由 $X,Y$ 构造的随机变量的个数。\n\n接下来 $n$ 行中，第 $i$ 行为两个实数 $a_i,b_i$，表示 $Z_i=a_i X+b_iY$。", "outputFormat": "输出一行一个 $[0,1]$ 间的实数，表示题目所求的概率。\n\n设我们的答案为 $ans$，你的输出为 $out$，那么当且仅当 $|ans-out|<10^{-6}$ 时，你的答案才能被认为是正确的。因此在输出时，请保留足够多的小数位数（但不要超过输出长度限制）。", "hint": "### 样例解释\n\n**【样例 1】**\n\n除 $(Z_1,Z_2,Z_3)$ 不合法外，其余组合都合法，故概率为 $\\frac 34$。\n\n**【样例 2】**\n\n见题目目录下的 `2.in` 与 `2.ans`。\n\n### 数据范围\n\n- Subtask1（$20$ 分）：$n\\le 100$。\n- Subtask2（$30$ 分）：$n\\le 300$。\n- Subtask3（$50$ 分）：$n\\le 1500$。\n\n对于所有的输入数据，有 $2\\le w_x,w_y\\le 100$，$3\\le n\\le 1500$，$0 < p_{i,j} <1$，且 $\\sum_{i\\ge 2333} \\sum_{j\\ge 2333}p_{i,j}=1$，$|a_i|,|b_i|<10^9$。\n\n### 提示\n\n即使 $X,Y$ 不相关，$X,Y$ 也不一定独立。\n\n### 可能用到的相关知识\n本题中涉及到的随机变量都是离散型随机变量，并且取值为不小于 $2333$ 的整数。\n\n两个随机变量 $X,Y$ 不相关当且仅当 $E(XY)=E(X)E(Y)$，其中 $E(X)$ 表示随机变量 $X$ 的期望。\n\n设 $P(X=x)$ 表示 $X$ 的取值为 $x$ 的概率。关于 $X$ 的函数 $f(X)$ 也是一个随机变量，其期望为：\n\n$$\nE[f(X)]=\\sum_{x=2333}^{\\infty} f(x)P(X=x)\n$$\n\n显然，令 $f(X)=X$，就可以得到 $X$ 的期望为：\n$$\nE(X)=\\sum_{x=2333}^{\\infty} xP(X=x)\n$$\n对于关于 $X,Y$ 的二元函数 $Z=g(X,Y)$ 也是一个随机变量，设 $Y$ 的取值集合为 $D_Y$，则 $Z$ 的期望为：\n$$\nE[g(X,Y)]=\\sum_{x=2333}^{\\infty}\\sum_{y=2333}^{\\infty}g(x,y)P(X=x,Y=y)\n$$\n\n其中，$P(X=x,Y=y)$ 表示 $X$ 取值为 $x$ 且同时 $Y$ 取值为 $y$ 的概率。\n\n对于题目中涉及的 $E(XY)$，令 $g(X,Y)=XY$ 即可算出。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#6] 与我无关", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。\n\n\n------------\n\n这天，白大哥找到了小莉。\n\n“cp 拿不出题了，题目全被 zgg 抢走了，这次就由你来出题吧。”\n\n于是小莉在概统课上糊出了这道题。", "description": "设有两个离散型随机变量 $X,Y$，已知其联合分布列。\n\n由 $X,Y$ 的线性组合构造出 $n$ 个新的随机变量：令 $Z_i=a_iX+b_iY$，其中 $i=1,2,\\dots,n$，$a_i,b_i$ 为已知实系数，且不存在两对相同的 $a_i,b_i$。\n\n现在，从 $Z_1,Z_2,\\dots,Z_n$ 中随机取出 $Z_i,Z_j,Z_k$，其中 $i,j,k$ 两两不同（即从 $\\binom n3$ 种组合中，随机等概率地选选出一种组合），考虑如下三个命题：\n\n- $p_1:Z_i-Z_j$ 与 $Z_j-Z_k$ 不相关；\n- $p_2:Z_j-Z_k$ 与 $Z_k-Z_i$ 不相关；\n- $p_3:Z_k-Z_i$ 与 $Z_i-Z_j$ 不相关；\n\n请求出 $p_1,p_2,p_3$ 至少有一个为真的概率。\n\n", "inputFormat": "第一行两个正整数 $w_x,w_y$，是用来描述 $X,Y$ 联合分布列的参数，表示若 $x\\ge w_x+2333$ 或 $y\\ge w_y+2333$，则 $P(X=x,Y=y)=0$。\n\n接下来 $w_x$ 行中，第 $i$ 行有 $w_y$ 个实数，第 $j$ 个数表示 $P(X=i+2332,Y=j+2332)$，即 $X$ 取值为 $i+2332$ 且 $Y$ 取值为 $j+2332$ 的概率，记为 $p_{i,j}$。\n\n接下来一行一个正整数 $n$，表示由 $X,Y$ 构造的随机变量的个数。\n\n接下来 $n$ 行中，第 $i$ 行为两个实数 $a_i,b_i$，表示 $Z_i=a_i X+b_iY$。", "outputFormat": "输出一行一个 $[0,1]$ 间的实数，表示题目所求的概率。\n\n设我们的答案为 $ans$，你的输出为 $out$，那么当且仅当 $|ans-out|<10^{-6}$ 时，你的答案才能被认为是正确的。因此在输出时，请保留足够多的小数位数（但不要超过输出长度限制）。", "hint": "### 样例解释\n\n**【样例 1】**\n\n除 $(Z_1,Z_2,Z_3)$ 不合法外，其余组合都合法，故概率为 $\\frac 34$。\n\n**【样例 2】**\n\n见题目目录下的 `2.in` 与 `2.ans`。\n\n### 数据范围\n\n- Subtask1（$20$ 分）：$n\\le 100$。\n- Subtask2（$30$ 分）：$n\\le 300$。\n- Subtask3（$50$ 分）：$n\\le 1500$。\n\n对于所有的输入数据，有 $2\\le w_x,w_y\\le 100$，$3\\le n\\le 1500$，$0 < p_{i,j} <1$，且 $\\sum_{i\\ge 2333} \\sum_{j\\ge 2333}p_{i,j}=1$，$|a_i|,|b_i|<10^9$。\n\n### 提示\n\n即使 $X,Y$ 不相关，$X,Y$ 也不一定独立。\n\n### 可能用到的相关知识\n本题中涉及到的随机变量都是离散型随机变量，并且取值为不小于 $2333$ 的整数。\n\n两个随机变量 $X,Y$ 不相关当且仅当 $E(XY)=E(X)E(Y)$，其中 $E(X)$ 表示随机变量 $X$ 的期望。\n\n设 $P(X=x)$ 表示 $X$ 的取值为 $x$ 的概率。关于 $X$ 的函数 $f(X)$ 也是一个随机变量，其期望为：\n\n$$\nE[f(X)]=\\sum_{x=2333}^{\\infty} f(x)P(X=x)\n$$\n\n显然，令 $f(X)=X$，就可以得到 $X$ 的期望为：\n$$\nE(X)=\\sum_{x=2333}^{\\infty} xP(X=x)\n$$\n对于关于 $X,Y$ 的二元函数 $Z=g(X,Y)$ 也是一个随机变量，设 $Y$ 的取值集合为 $D_Y$，则 $Z$ 的期望为：\n$$\nE[g(X,Y)]=\\sum_{x=2333}^{\\infty}\\sum_{y=2333}^{\\infty}g(x,y)P(X=x,Y=y)\n$$\n\n其中，$P(X=x,Y=y)$ 表示 $X$ 取值为 $x$ 且同时 $Y$ 取值为 $y$ 的概率。\n\n对于题目中涉及的 $E(XY)$，令 $g(X,Y)=XY$ 即可算出。", "locale": "zh-CN"}}}
{"pid": "P11439", "type": "P", "difficulty": 0, "samples": [["7\n233rbqloltysorztystysrbqexmlolrbqexmorz233\n", "2\n2\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Code+"], "title": "[Code+#6] 因数分解", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。", "description": "$n$ 个小朋友在一个神奇的空间里玩游戏。每个小朋友有一个名字，且所有的名字两两不同。名字只由可打印字符组成（ASCII 编码 $32$ 至 $126$），长度恰好为 $3$。\n\n每个小朋友有 $k$ 种属性值（$k$ 为非负整数），第 $i$ 种属性值的取值范围为不超过 $a_i$ 的正整数（$2 \\leq a_1 \\leq a_2 \\leq \\cdots \\leq a_k$）。保证 $n=a_1 a_2 \\cdots a_k$，且对于任意一对小朋友，他们总有至少一种属性不相同。\n\n当且仅当一对小朋友恰好有一种属性不相同且该属性恰好相差 $1$ 时，我们称这一对小朋友互相认识。设 $m$ 为互相认识的小朋友的对数。\n\n输入 $m$ 和这些互相认识的关系，请输出一种可能的 $k$ 与 $a_1, a_2, \\dots, a_k$。", "inputFormat": "第一行输入一个整数 $m$。\n\n第二行中依次输入每一对互相认识的关系。对于每一对关系输入 $6$ 个字符，前 $3$ 个与后 $3$ 个字符分别表示两个小朋友的名字。注意本行结尾仍有一换行符。", "outputFormat": "第一行输出一个整数 $k$。\n\n接下来 $k$ 行，其中第 $i$ 行输出 $a_i$。\n\n如果有多种可行的解，你可以输出任意一个。", "hint": "### 样例解释\n\n一种可行的解如下：$k=2,a_1=2,a_2=3$。\n\n可以验证，一共有 $7$ 对互相认识的关系，且符合给出的输入。\n\n### 数据范围\n\n- 子任务 1（$29$ 分）：$50<m\\le500$。\n- 子任务 2（$19$ 分）：保证所有的 $a_1, a_2, \\dots, a_k$ 均为质数，$m \\leq 10^6$。\n- 子任务 3（$10$ 分）：$500<m\\le5000$。\n- 子任务 4（$42$ 分）：$m\\le10^6$。\n\n对于所有的输入数据，保证 $m\\le 10^6$。\n\n### 提示\n\n这题叫什么名字来着？", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#6] 因数分解", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。", "description": "$n$ 个小朋友在一个神奇的空间里玩游戏。每个小朋友有一个名字，且所有的名字两两不同。名字只由可打印字符组成（ASCII 编码 $32$ 至 $126$），长度恰好为 $3$。\n\n每个小朋友有 $k$ 种属性值（$k$ 为非负整数），第 $i$ 种属性值的取值范围为不超过 $a_i$ 的正整数（$2 \\leq a_1 \\leq a_2 \\leq \\cdots \\leq a_k$）。保证 $n=a_1 a_2 \\cdots a_k$，且对于任意一对小朋友，他们总有至少一种属性不相同。\n\n当且仅当一对小朋友恰好有一种属性不相同且该属性恰好相差 $1$ 时，我们称这一对小朋友互相认识。设 $m$ 为互相认识的小朋友的对数。\n\n输入 $m$ 和这些互相认识的关系，请输出一种可能的 $k$ 与 $a_1, a_2, \\dots, a_k$。", "inputFormat": "第一行输入一个整数 $m$。\n\n第二行中依次输入每一对互相认识的关系。对于每一对关系输入 $6$ 个字符，前 $3$ 个与后 $3$ 个字符分别表示两个小朋友的名字。注意本行结尾仍有一换行符。", "outputFormat": "第一行输出一个整数 $k$。\n\n接下来 $k$ 行，其中第 $i$ 行输出 $a_i$。\n\n如果有多种可行的解，你可以输出任意一个。", "hint": "### 样例解释\n\n一种可行的解如下：$k=2,a_1=2,a_2=3$。\n\n可以验证，一共有 $7$ 对互相认识的关系，且符合给出的输入。\n\n### 数据范围\n\n- 子任务 1（$29$ 分）：$50<m\\le500$。\n- 子任务 2（$19$ 分）：保证所有的 $a_1, a_2, \\dots, a_k$ 均为质数，$m \\leq 10^6$。\n- 子任务 3（$10$ 分）：$500<m\\le5000$。\n- 子任务 4（$42$ 分）：$m\\le10^6$。\n\n对于所有的输入数据，保证 $m\\le 10^6$。\n\n### 提示\n\n这题叫什么名字来着？", "locale": "zh-CN"}}}
{"pid": "P11440", "type": "P", "difficulty": 5, "samples": [["2\n500 500 19 300 50\n39 42 4 27 86", "497.89734\n39.00000"]], "limits": {"time": [3000], "memory": [524288]}, "tags": ["动态规划 DP", "Code+"], "title": "[Code+#6] 幸运盒", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。", "description": "小明有 $n$ 个幸运盒，每次运转一个盒子的结果要么出现糖果，要么出现芥末。每一轮，小明可以每次选择恰好 $k$ 个盒子一起运转，每个盒子有 $p \\%$ 的概率开出糖果，$\\left (100-p \\right) \\%$ 的概率开出芥末；或者他可以选择这一轮使用法术：选择恰好 $t$ 个盒子，对这些盒子的开出糖果的概率进行调整，使这些盒子分别有 $p \\%,\\left( \\min \\left( p+1, 100 \\right) \\right) \\%,\\cdots,\\left( \\min \\left( p+t-1 , 100 \\right) \\right) \\%$ 的概率获得糖果；当然，他也可以什么都不做，放弃这一轮。\n\n小明很聪明，每一轮都会选择最优的策略运转这些盒子，包括选择 $k$ 个盒子重新运转，或者选择 $t$ 个盒子使用法术，亦或是放弃这一轮的运转。他可以进行 $m$ 轮操作，在所有操作结束之前他不能拿走盒子里的东西。他想知道 $m$ 轮操作之后，他期望获得多少的糖果。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对每组数据，输入一行五个整数：$n$，$m$，$t$，$k$，$p$，分别表示盒子的数量 $n$、运转轮数 $m$、使用法术需要选择的盒子数量 $t$、不使用法术需要选择的盒子数量 $k$，以及 $p$ 表示初始概率 $p \\%$。", "outputFormat": "每组测试数据输出一行，一个 $5$ 位小数，表示最佳策略下的期望。数据保证解的第 $6$ 位小数不是 $4,5,6$，即不用担心舍入精度问题。", "hint": "本题仅有 $1$ 个测试点，只有当你的输出与标准输出完全相同时，才能得到该测试点的满分。\n\n下面为各组数据的范围和约定。\n\n对于测试点中 $90 \\%$ 的数据，$1 \\le n \\le 50$，  $1 \\le m \\le 50$，$1 \\le  t \\le 10$。\n\n对于测试点中所有的数据，$1\\le T\\le100$，$1\\le n,m\\le500$，$1\\le t\\le 20$，$t\\le k\\le n$，$1\\le p\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#6] 幸运盒", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。", "description": "小明有 $n$ 个幸运盒，每次运转一个盒子的结果要么出现糖果，要么出现芥末。每一轮，小明可以每次选择恰好 $k$ 个盒子一起运转，每个盒子有 $p \\%$ 的概率开出糖果，$\\left (100-p \\right) \\%$ 的概率开出芥末；或者他可以选择这一轮使用法术：选择恰好 $t$ 个盒子，对这些盒子的开出糖果的概率进行调整，使这些盒子分别有 $p \\%,\\left( \\min \\left( p+1, 100 \\right) \\right) \\%,\\cdots,\\left( \\min \\left( p+t-1 , 100 \\right) \\right) \\%$ 的概率获得糖果；当然，他也可以什么都不做，放弃这一轮。\n\n小明很聪明，每一轮都会选择最优的策略运转这些盒子，包括选择 $k$ 个盒子重新运转，或者选择 $t$ 个盒子使用法术，亦或是放弃这一轮的运转。他可以进行 $m$ 轮操作，在所有操作结束之前他不能拿走盒子里的东西。他想知道 $m$ 轮操作之后，他期望获得多少的糖果。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对每组数据，输入一行五个整数：$n$，$m$，$t$，$k$，$p$，分别表示盒子的数量 $n$、运转轮数 $m$、使用法术需要选择的盒子数量 $t$、不使用法术需要选择的盒子数量 $k$，以及 $p$ 表示初始概率 $p \\%$。", "outputFormat": "每组测试数据输出一行，一个 $5$ 位小数，表示最佳策略下的期望。数据保证解的第 $6$ 位小数不是 $4,5,6$，即不用担心舍入精度问题。", "hint": "本题仅有 $1$ 个测试点，只有当你的输出与标准输出完全相同时，才能得到该测试点的满分。\n\n下面为各组数据的范围和约定。\n\n对于测试点中 $90 \\%$ 的数据，$1 \\le n \\le 50$，  $1 \\le m \\le 50$，$1 \\le  t \\le 10$。\n\n对于测试点中所有的数据，$1\\le T\\le100$，$1\\le n,m\\le500$，$1\\le t\\le 20$，$t\\le k\\le n$，$1\\le p\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P11441", "type": "P", "difficulty": 6, "samples": [["2\n0 0\n0 2", "3.14159265358979326666666666666233333333"], ["3\n0 1\n3 0\n2 2", "10.353981582"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["计算几何", "Special Judge", "凸包", "叉积", "旋转卡壳", "Code+"], "title": "[Code+#6] 进阶法师", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。", "description": "传说在 $100000$ 年后，又有大量陨石即将撞击企鹅大陆。散布在企鹅大陆各个地点的进阶企鹅法师们张开法阵保护企鹅大陆。\n\n法师站在一些固定的点，如果一个点与某两个法师连线形成的夹角大于等于 $90$ 度，那么这个点可以免于灾害。\n\n每个法师的坐标可以使用一组非负整数 $\\left(X, Y\\right)$ 表示。不存在两个法师在同一个位置。\n\n一想到这里，企鹅豆豆又想到一个问题——能被保护的区域的面积有大？", "inputFormat": "输入的第一行包含一个正整数 $n$，表示法师人数，保证 $2 \\le n \\le 10^5$。\n\n接下来 $n$ 行每行两个非负整数，表示一位法师的坐标位置。保证数值不超过 $10^9$。", "outputFormat": "输出一个小数，表示被保护的区域的面积。如果你的输出与标算的答案的相对误差不超过 $10^{-7}$ 即被认为是正确的。", "hint": "### 样例解释\n\n**【样例 1】**\n\n对于样例一，显然被保护面积是以这两点连线作为直径的圆形。根据圆的面积计算公式即可得出答案。而且你与标算的相对误差不超过 $10^{-7}$ 即被认为正确。\n\n**【样例 3】**\n\n见题目目录下的 `3.in` 与 `3.ans`。\n\n### 数据范围\n\n保证 $2 \\le n \\le 10^5$，$0\\le X,Y\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#6] 进阶法师", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。", "description": "传说在 $100000$ 年后，又有大量陨石即将撞击企鹅大陆。散布在企鹅大陆各个地点的进阶企鹅法师们张开法阵保护企鹅大陆。\n\n法师站在一些固定的点，如果一个点与某两个法师连线形成的夹角大于等于 $90$ 度，那么这个点可以免于灾害。\n\n每个法师的坐标可以使用一组非负整数 $\\left(X, Y\\right)$ 表示。不存在两个法师在同一个位置。\n\n一想到这里，企鹅豆豆又想到一个问题——能被保护的区域的面积有大？", "inputFormat": "输入的第一行包含一个正整数 $n$，表示法师人数，保证 $2 \\le n \\le 10^5$。\n\n接下来 $n$ 行每行两个非负整数，表示一位法师的坐标位置。保证数值不超过 $10^9$。", "outputFormat": "输出一个小数，表示被保护的区域的面积。如果你的输出与标算的答案的相对误差不超过 $10^{-7}$ 即被认为是正确的。", "hint": "### 样例解释\n\n**【样例 1】**\n\n对于样例一，显然被保护面积是以这两点连线作为直径的圆形。根据圆的面积计算公式即可得出答案。而且你与标算的相对误差不超过 $10^{-7}$ 即被认为正确。\n\n**【样例 3】**\n\n见题目目录下的 `3.in` 与 `3.ans`。\n\n### 数据范围\n\n保证 $2 \\le n \\le 10^5$，$0\\le X,Y\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11442", "type": "P", "difficulty": 4, "samples": [["3 2\nZ 37\nR 37", "35\n49"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "递归", "进制", "Code+"], "title": "[Code+#6] 坐标转换", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。", "description": "在视频编码中，往往需要将一帧画面分块。\n\n为了简化问题，我们考虑将一幅图片看作 $2^n\\times 2^n$ 的网格。为了对图片进行处理，编码器往往会遍历每个格子，但遍历格子的方式在不同的应用中是不同的。\n\n其中一种方式叫做光栅遍历，就是按照从左到右，从上到下的顺序依次进行标号。下图是一个 $8\\times 8$ 的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jzhd5wk1.png)\n\n另一种方式叫做 Z 字型遍历。先看一个 $8\\times 8$ 的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ywh3ycrt.png)\n\n可以构造性的给出描述：\n\n1.对于 $2^0\\times2^0$ 的网格，直接遍历；\n\n2.对于 $2^k\\times2^k(k>0)$ 的网格，将其横着从中间、竖着从中间各分成两半，形成 $4$ 个 $2^{k-1}\\times2^{k-1}$ 的方格，这四个方格按照左上、右上、左下、右下的顺序依次遍历。", "inputFormat": "输入的第一行为两个整数 $n,m$，其中 $2^n$ 为矩形的边长，$m$ 为询问次数。\n\n接下来 $m$ 行，每行是一个询问，每个询问给出一个方格，方式有两种，如下：\n\n- `Z x`：给出 Z 字形遍历中标号是 $x$ 的方格。\n- `R x`：给出光栅遍历中标号是 $x$ 的方格。\n\n保证存在标号为 $x$ 的方格。", "outputFormat": "对于每种询问，请输出一行一个正整数，表示在另一种遍历方式中，给出格子的标号。", "hint": "### 样例解释\n\n如上图所示。\n\n### 数据范围\n\n对于所有数据，保证 $1\\le n\\le 30$，$1\\le m\\le 5\\times10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#6] 坐标转换", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。", "description": "在视频编码中，往往需要将一帧画面分块。\n\n为了简化问题，我们考虑将一幅图片看作 $2^n\\times 2^n$ 的网格。为了对图片进行处理，编码器往往会遍历每个格子，但遍历格子的方式在不同的应用中是不同的。\n\n其中一种方式叫做光栅遍历，就是按照从左到右，从上到下的顺序依次进行标号。下图是一个 $8\\times 8$ 的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jzhd5wk1.png)\n\n另一种方式叫做 Z 字型遍历。先看一个 $8\\times 8$ 的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ywh3ycrt.png)\n\n可以构造性的给出描述：\n\n1.对于 $2^0\\times2^0$ 的网格，直接遍历；\n\n2.对于 $2^k\\times2^k(k>0)$ 的网格，将其横着从中间、竖着从中间各分成两半，形成 $4$ 个 $2^{k-1}\\times2^{k-1}$ 的方格，这四个方格按照左上、右上、左下、右下的顺序依次遍历。", "inputFormat": "输入的第一行为两个整数 $n,m$，其中 $2^n$ 为矩形的边长，$m$ 为询问次数。\n\n接下来 $m$ 行，每行是一个询问，每个询问给出一个方格，方式有两种，如下：\n\n- `Z x`：给出 Z 字形遍历中标号是 $x$ 的方格。\n- `R x`：给出光栅遍历中标号是 $x$ 的方格。\n\n保证存在标号为 $x$ 的方格。", "outputFormat": "对于每种询问，请输出一行一个正整数，表示在另一种遍历方式中，给出格子的标号。", "hint": "### 样例解释\n\n如上图所示。\n\n### 数据范围\n\n对于所有数据，保证 $1\\le n\\le 30$，$1\\le m\\le 5\\times10^5$。", "locale": "zh-CN"}}}
{"pid": "P11443", "type": "P", "difficulty": 6, "samples": [["6 2\n7 9 10 6 2 5\n1 4\n2 5", "6\n24"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["莫队", "根号分治", "Code+"], "title": "[Code+#6] 校门外的树", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。", "description": "L 校门外有一条大马路，路边种了许多的树。L 校的新校长 Lsy 认为学校应该在校门内的马路边种许多的树来绿化环境。在他的植树计划中，共需种植 $n$ 棵树，每棵树都有一个高度 $h_{i}$。然而他是一个很信风水的人，为了保证校园的风水，他请来了作为风水大师的你来为他计算这个植树方案的幸运值。\n\n\n对于 $n$ 棵树组成的序列，定义其中一个区间 $[u ,v]$ 的幸运值为：\n\n$$\\prod\\limits_{i=u}^{v-1}\\prod\\limits_{j=i+1}^{v}\\operatorname{gcd}(h_i,h_j)$$\n\n如果 $u = v$ 则幸运值为 $1$。\n\n现在你需要回答 L 校长对于 $q$ 个区间的询问，对于每个询问回答该区间幸运值 $\\bmod 998244353$ 的值。", "inputFormat": "第一行为两个整数 $n,q$。\n\n第二行为 $n$ 个整数 $h_{i}$。\n\n接下来 $q$ 行，每行两个整数 $u,v$，表示 $q$ 次询问。", "outputFormat": "对于每个询问输出一行，为该区间的幸运值 $\\bmod 998244353$ 的值。", "hint": "### 数据范围\n\n任何时候，保证 $1 \\leq n,q, h_{i}\\leq 10^5$。\n\n每个子任务的额外约定：\n\n- Subtask1（$10$ 分）：$n,q \\leq 100$。\n- Subtask2（$10$ 分）：$h_{i}$ 全部相等。\n- Subtask3（$15$ 分）：$h_{i} \\leq 10^3$。\n- Subtask4（$10$ 分）：$q = 1$。\n- Subtask5（$25$ 分）：$n, q \\leq3\\times10^4$。\n- Subtask6（$30$ 分）：无额外约束。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#6] 校门外的树", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。", "description": "L 校门外有一条大马路，路边种了许多的树。L 校的新校长 Lsy 认为学校应该在校门内的马路边种许多的树来绿化环境。在他的植树计划中，共需种植 $n$ 棵树，每棵树都有一个高度 $h_{i}$。然而他是一个很信风水的人，为了保证校园的风水，他请来了作为风水大师的你来为他计算这个植树方案的幸运值。\n\n\n对于 $n$ 棵树组成的序列，定义其中一个区间 $[u ,v]$ 的幸运值为：\n\n$$\\prod\\limits_{i=u}^{v-1}\\prod\\limits_{j=i+1}^{v}\\operatorname{gcd}(h_i,h_j)$$\n\n如果 $u = v$ 则幸运值为 $1$。\n\n现在你需要回答 L 校长对于 $q$ 个区间的询问，对于每个询问回答该区间幸运值 $\\bmod 998244353$ 的值。", "inputFormat": "第一行为两个整数 $n,q$。\n\n第二行为 $n$ 个整数 $h_{i}$。\n\n接下来 $q$ 行，每行两个整数 $u,v$，表示 $q$ 次询问。", "outputFormat": "对于每个询问输出一行，为该区间的幸运值 $\\bmod 998244353$ 的值。", "hint": "### 数据范围\n\n任何时候，保证 $1 \\leq n,q, h_{i}\\leq 10^5$。\n\n每个子任务的额外约定：\n\n- Subtask1（$10$ 分）：$n,q \\leq 100$。\n- Subtask2（$10$ 分）：$h_{i}$ 全部相等。\n- Subtask3（$15$ 分）：$h_{i} \\leq 10^3$。\n- Subtask4（$10$ 分）：$q = 1$。\n- Subtask5（$25$ 分）：$n, q \\leq3\\times10^4$。\n- Subtask6（$30$ 分）：无额外约束。", "locale": "zh-CN"}}}
{"pid": "P11444", "type": "P", "difficulty": 5, "samples": [["8\n2 1 1 1 2 2 1 2\n1 2", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "区间 DP", "Code+"], "title": "[Code+#6] 祖玛", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。\n\n------------\n\n\n小粽还是一个小粽子的时候，特别喜欢玩一款叫作祖玛的游戏。现在，小粽长大了。为了纪念她的童年时光，她开发了一款新型祖玛游戏，并为你准备了一个问题。", "description": "小粽的祖玛游戏的游戏规则可以抽象为如下模型：\n\n初始时，有一段长度为 $n$ 的正整数序列 $a_1,a_2,\\dots,a_n$。游戏过程中，小粽会对这个序列进行一系列规则相同的操作：从序列中选取连续且相同的一段数，设这段数的长度为 $X$，如果这些数的值都相等，那么小粽可以把这些数从序列中删除，并将序列从删除的位置接起来，例如，对于序列 `2 3 3 3 1`，可以删除中间的 `3 3 3`，得到 `2 1`。\n\n不过，小粽觉得只是这样太简单了，于是她选择了两个数 $X_{min},X_{max}$，并且要求每次删除的那段数的长度 $X$ 要满足 $X_{min}\\le X\\le X_{max}$。\n\n显然小粽能进行的操作次数是有限的，甚至她有可能不能把整个序列删除完。现在，小粽想要知道，她每次删除的数的长度的平方和是多少。即，设 $X_i$ 为第 $i$ 次删除的数的长度，最大化 $\\sum X_i^2$。\n\n出题固然很爽，但是小粽发现自己现在不会做了。请你帮小粽求出这个最大值吧！", "inputFormat": "输入第一行为一个正整数 $n$，表示初始时序列的长度。\n\n接下来一行包含 $n$ 个正整数，描述这个序列，第 $i$ 个数为 $a_i$。\n\n输入的第三行为两个正整数 $X_{min},X_{max}$。\n\n对于所有的输入数据都满足 $1\\le n\\le 100$，$1\\le a_i\\le n$，$1\\le X_{min}\\le X_{max}\\le n$。", "outputFormat": "输出一行一个整数，表示 $\\sum X_i^2$ 的最大值。", "hint": "### 样例解释\n\n**【样例 1】**\n\n最优策略为，先删除中间的两个 `2 2`，然后删除连续删除两个 `1 1`，最后删除剩下的 `2 2`。注意，由于 $x_{max}$ 的限制，无法删除 `1 1 1`。\n\n**【样例 2】**\n\n见题目目录下的 `2.in` 与 `2.ans`。\n\n### 数据范围\n\n对于所有的输入数据都满足 $1\\le n\\le 100$，$1\\le a_i\\le n$，$1\\le X_{min}\\le X_{max}\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#6] 祖玛", "background": "搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。\n\n------------\n\n\n小粽还是一个小粽子的时候，特别喜欢玩一款叫作祖玛的游戏。现在，小粽长大了。为了纪念她的童年时光，她开发了一款新型祖玛游戏，并为你准备了一个问题。", "description": "小粽的祖玛游戏的游戏规则可以抽象为如下模型：\n\n初始时，有一段长度为 $n$ 的正整数序列 $a_1,a_2,\\dots,a_n$。游戏过程中，小粽会对这个序列进行一系列规则相同的操作：从序列中选取连续且相同的一段数，设这段数的长度为 $X$，如果这些数的值都相等，那么小粽可以把这些数从序列中删除，并将序列从删除的位置接起来，例如，对于序列 `2 3 3 3 1`，可以删除中间的 `3 3 3`，得到 `2 1`。\n\n不过，小粽觉得只是这样太简单了，于是她选择了两个数 $X_{min},X_{max}$，并且要求每次删除的那段数的长度 $X$ 要满足 $X_{min}\\le X\\le X_{max}$。\n\n显然小粽能进行的操作次数是有限的，甚至她有可能不能把整个序列删除完。现在，小粽想要知道，她每次删除的数的长度的平方和是多少。即，设 $X_i$ 为第 $i$ 次删除的数的长度，最大化 $\\sum X_i^2$。\n\n出题固然很爽，但是小粽发现自己现在不会做了。请你帮小粽求出这个最大值吧！", "inputFormat": "输入第一行为一个正整数 $n$，表示初始时序列的长度。\n\n接下来一行包含 $n$ 个正整数，描述这个序列，第 $i$ 个数为 $a_i$。\n\n输入的第三行为两个正整数 $X_{min},X_{max}$。\n\n对于所有的输入数据都满足 $1\\le n\\le 100$，$1\\le a_i\\le n$，$1\\le X_{min}\\le X_{max}\\le n$。", "outputFormat": "输出一行一个整数，表示 $\\sum X_i^2$ 的最大值。", "hint": "### 样例解释\n\n**【样例 1】**\n\n最优策略为，先删除中间的两个 `2 2`，然后删除连续删除两个 `1 1`，最后删除剩下的 `2 2`。注意，由于 $x_{max}$ 的限制，无法删除 `1 1 1`。\n\n**【样例 2】**\n\n见题目目录下的 `2.in` 与 `2.ans`。\n\n### 数据范围\n\n对于所有的输入数据都满足 $1\\le n\\le 100$，$1\\le a_i\\le n$，$1\\le X_{min}\\le X_{max}\\le n$。", "locale": "zh-CN"}}}
{"pid": "P11445", "type": "P", "difficulty": 1, "samples": [["5\n3\n2 3 5\n2\n3 1\n3\n1 2 3", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "排序", "洛谷月赛"], "title": "「ALFR Round 3」A 调皮的学生", "background": "在小山所在的学校中，有着一群非常调皮的学生。比如，在给老师的教学水平评分时，他们常常会给出不正经的评分。", "description": "又到了一学期一度的评分大赛，每位同学都可以为本班某门科目的老师评分（一共有语、数、英三门科目）。每位同学应当只为一位老师评分。但有些学生常常会为多位老师评分，或者不为任何老师评分，我们称这样的学生为调皮的学生。现在给出小山所在班级的三门科目的老师的评分情况，请你求出该班级的调皮的学生的数量。", "inputFormat": "第一行一个整数 $n$，表示全班共有 $n$ 位学生，学生的学号为 $1\\sim n$。\n\n第二行一个整数 $a$，表示有 $a$ 位学生为语文老师评了分。\n\n第三行有 $a$ 个整数，第 $i$ 个整数 $x_i$ 表示学号为 $x_i$ 的学生为语文老师评了分。\n\n第四行一个整数 $b$，代表有 $b$ 位学生为数学老师评了分。\n\n第五行有 $b$ 个整数，第 $i$ 个整数 $y_i$ 表示学号为 $y_i$ 的学生为数学老师评了分。\n\n第六行一个整数 $c$，代表有 $c$ 位学生为英语老师评了分。\n\n第七行有 $c$ 个整数，第 $i$ 个整数 $z_i$ 表示学号为 $z_i$ 的学生为英语老师评了分。", "outputFormat": "一行一个整数代表小山所在班级的调皮的学生的数量。", "hint": "### 样例解释\n\n学号为 $1,2,3,4,5$ 的学生分别为 $2,2,3,0,1$ 位老师评了分，学号为 $1,2,3,4$ 的学生都是调皮的学生，所以答案为 $4$。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $10$ | $n=1$ |\n| $1$ | $20$ | $x,y,z$ 三个数组中的**所有**元素互不重复|\n| $2$ | $10$ | $a=b=c=1$|\n| $3$ | $10$ | $a=n,b=c=1$|\n| $4$ | $20$ | $x,y,z$ 数组分别按照升序顺序给出|\n| $5$ | $30$ | - |\n\n对于 $100\\%$ 的数据，$1\\le n\\le 100$，$0\\le a,b,c\\le n$，$1\\le x_i,y_i,z_i\\le n$，$x,y,z$ 数组内各自没有重复元素。", "locale": "zh-CN", "translations": {"en": {"title": "「ALFR Round 3」A Naughty Student", "background": "In the school where Little Shan studies, there is a group of very naughty students. For example, when rating the teaching quality of their teachers, they seldom follow the requirements.", "description": "The teaching quality competition is about to begin. Each student can rate one of the three major subject teachers (Chinese, math, and English) in their class. Each student should rate only one teacher. However, some students may rate multiple teachers or not rate any teacher at all. We call such students naughty students.\n\nGiven the rating situation of the teachers in the three subjects, please determine the number of naughty students in Little Shan's class.", "inputFormat": "The first line contains an integer $n$, indicating the total number of students in the class, with student IDs ranging from $1$ to $n$.\n\nThe second line contains an integer $a$, which indicates that $a$ students have rated to the Chinese teacher.\n\nThe third line contains $a$ integers, where the $i$-th integer $x_i$ indicates that the student with ID $x_i$ has rated to the Chinese teacher.\n\nThe fourth line contains an integer $b$, indicating that $b$ students have rated to the math teacher.\n\nThe fifth line contains $b$ integers, where the $i$-th integer $y_i$ indicates that the student with ID $y_i$ has rated to the math teacher.\n\nThe sixth line contains an integer $c$, indicating that $c$ students have rated to the English teacher.\n\nThe seventh line contains $c$ integers, where the $i$-th integer $z_i$ indicates that the student with ID $z_i$ has rated to the English teacher.", "outputFormat": "Output a single integer representing the number of naughty students in Little Shan's class.", "hint": "In the sample, students with IDs $1, 2, 3, 4, 5$ have respectively rated of $2, 2, 3, 0, 1$ to the teachers. Thus, students with IDs $1, 2, 3,4$ are all naughty students, so the answer is $4$.\n\n| Subtask | Score | Constraints |\n| :-----: | :---: | :---------: |\n| $0$ | $10$ | $n=1$ |\n| $1$ | $20$ | All elements in the arrays $x, y, z$ are distinct |\n| $2$ | $10$ | $a=b=c=1$ |\n| $3$ | $10$ | $a=n, b=c=1$ |\n| $4$ | $20$ | Arrays $x, y, z$ are provided in ascending order |\n| $5$ | $30$ | - |\n\nFor all the tests, $1 \\leq n \\leq 100$, $0 \\leq a, b, c \\leq n$, and $1 \\leq x_i, y_i, z_i \\leq n$. The arrays $x, y, z$ have no duplicate elements within themselves.", "locale": "en"}, "zh-CN": {"title": "「ALFR Round 3」A 调皮的学生", "background": "在小山所在的学校中，有着一群非常调皮的学生。比如，在给老师的教学水平评分时，他们常常会给出不正经的评分。", "description": "又到了一学期一度的评分大赛，每位同学都可以为本班某门科目的老师评分（一共有语、数、英三门科目）。每位同学应当只为一位老师评分。但有些学生常常会为多位老师评分，或者不为任何老师评分，我们称这样的学生为调皮的学生。现在给出小山所在班级的三门科目的老师的评分情况，请你求出该班级的调皮的学生的数量。", "inputFormat": "第一行一个整数 $n$，表示全班共有 $n$ 位学生，学生的学号为 $1\\sim n$。\n\n第二行一个整数 $a$，表示有 $a$ 位学生为语文老师评了分。\n\n第三行有 $a$ 个整数，第 $i$ 个整数 $x_i$ 表示学号为 $x_i$ 的学生为语文老师评了分。\n\n第四行一个整数 $b$，代表有 $b$ 位学生为数学老师评了分。\n\n第五行有 $b$ 个整数，第 $i$ 个整数 $y_i$ 表示学号为 $y_i$ 的学生为数学老师评了分。\n\n第六行一个整数 $c$，代表有 $c$ 位学生为英语老师评了分。\n\n第七行有 $c$ 个整数，第 $i$ 个整数 $z_i$ 表示学号为 $z_i$ 的学生为英语老师评了分。", "outputFormat": "一行一个整数代表小山所在班级的调皮的学生的数量。", "hint": "### 样例解释\n\n学号为 $1,2,3,4,5$ 的学生分别为 $2,2,3,0,1$ 位老师评了分，学号为 $1,2,3,4$ 的学生都是调皮的学生，所以答案为 $4$。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $10$ | $n=1$ |\n| $1$ | $20$ | $x,y,z$ 三个数组中的**所有**元素互不重复|\n| $2$ | $10$ | $a=b=c=1$|\n| $3$ | $10$ | $a=n,b=c=1$|\n| $4$ | $20$ | $x,y,z$ 数组分别按照升序顺序给出|\n| $5$ | $30$ | - |\n\n对于 $100\\%$ 的数据，$1\\le n\\le 100$，$0\\le a,b,c\\le n$，$1\\le x_i,y_i,z_i\\le n$，$x,y,z$ 数组内各自没有重复元素。", "locale": "zh-CN"}}}
{"pid": "P11446", "type": "P", "difficulty": 2, "samples": [["2\n5\n1 2 3 2 3\n3\n1000000000 1000000000 99999999", "2\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛", "分类讨论"], "title": "「ALFR Round 3」B Swap & Delete", "background": "", "description": "给定一个长为 $n$ 的序列 $a_1, a_2,a_3, \\dots ,a_n$，你需要执行 $k$ 次操作使这个序列为空。\n\n每次操作可以执行下列内容之一：\n\n1. 选择两个数 $i, j$，交换 $a_i, a_j$（需要满足 $1 \\le i < j \\le n$）。\n2. 选择两个数 $i, j$，删除 $a_i,a_{i+1}, \\dots ,a_j$（需要满足 $1 \\le i \\le j \\le n$，且 $a_i = a_j$）。\n\n请输出最小的操作数 $k$。\n", "inputFormat": "第一行输入一个正整数 $T$（$1 \\le T \\le 5$），表示有 $T$ 个测试数据。\n\n对于每个测试数据：\n\n第一行输入一个正整数 $n$（$1 \\le n \\le 10^5$），表示序列长度为 $n$。\n\n第二行输入 $n$ 个正整数 $a_1,a_2 \\dots a_n$（$0 \\le a_i \\le 10^9$）。", "outputFormat": "对于每个测试数据输出一个正整数 $k$，表示最少的操作次数。", "hint": "### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $n\\le 3$ |\n| $2$ | $20$ | $n\\le 10$ |\n| $3$ | $20$ | $a_i\\le 2$ |\n| $4$ | $10$ | 保证所有 $a_i$ 相等 |\n| $5$ | $40$ | - |\n\n对于 $100\\%$ 的数据，$1\\le T \\le 5$，$1\\le n\\le 10^5$，$0\\le a_i\\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "「ALFR Round 3」B Swap & Delete", "background": "", "description": "Given a sequence of length $n$, denoted as $a_1, a_2, a_3, \\dots, a_n$, you need to perform $k$ operations to make this sequence empty.\n\nEach operation can be one of the following:\n\n1. Select two indices $i, j$ and swap $a_i$ and $a_j$, satisfying $1 \\le i < j \\le n$.\n2. Select two indices $i, j$ and delete the elements $a_i, a_{i+1}, \\dots, a_j$, satisfying $1 \\le i \\le j \\le n$, and $a_i = a_j$.\n\nYou should output the minimum number of operations $k$ required.", "inputFormat": "The first line contains a positive integer $T$ ($1 \\le T \\le 5$), indicating the number of test cases.\n\nFor each test case:\n\nThe first line contains a positive integer $n$ ($1 \\le n \\le 10^5$), representing the length of the sequence.\n\nThe second line contains $n$ positive integers $a_1, a_2, \\ldots, a_n$ ($0 \\le a_i \\le 10^9$).", "outputFormat": "For each test case, output a single integer $k$, indicating the minimum number of operations.", "hint": "| Subtask | Score | Constraints |\n| :-----: | :---: | :----------: |\n| $1$ | $10$ | $n \\le 3$ |\n| $2$ | $20$ | $n \\le 10$ |\n| $3$ | $20$ | $a_i \\le 2$ |\n| $4$ | $10$ | All $a_i$ are guaranteed to be equal |\n| $5$ | $40$ | - |\n\nFor all the tests, $1 \\le T \\le 5$, $1 \\le n \\le 10^5$, $0 \\le a_i \\le 10^9$.", "locale": "en"}, "zh-CN": {"title": "「ALFR Round 3」B Swap & Delete", "background": "", "description": "给定一个长为 $n$ 的序列 $a_1, a_2,a_3, \\dots ,a_n$，你需要执行 $k$ 次操作使这个序列为空。\n\n每次操作可以执行下列内容之一：\n\n1. 选择两个数 $i, j$，交换 $a_i, a_j$（需要满足 $1 \\le i < j \\le n$）。\n2. 选择两个数 $i, j$，删除 $a_i,a_{i+1}, \\dots ,a_j$（需要满足 $1 \\le i \\le j \\le n$，且 $a_i = a_j$）。\n\n请输出最小的操作数 $k$。\n", "inputFormat": "第一行输入一个正整数 $T$（$1 \\le T \\le 5$），表示有 $T$ 个测试数据。\n\n对于每个测试数据：\n\n第一行输入一个正整数 $n$（$1 \\le n \\le 10^5$），表示序列长度为 $n$。\n\n第二行输入 $n$ 个正整数 $a_1,a_2 \\dots a_n$（$0 \\le a_i \\le 10^9$）。", "outputFormat": "对于每个测试数据输出一个正整数 $k$，表示最少的操作次数。", "hint": "### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $n\\le 3$ |\n| $2$ | $20$ | $n\\le 10$ |\n| $3$ | $20$ | $a_i\\le 2$ |\n| $4$ | $10$ | 保证所有 $a_i$ 相等 |\n| $5$ | $40$ | - |\n\n对于 $100\\%$ 的数据，$1\\le T \\le 5$，$1\\le n\\le 10^5$，$0\\le a_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11447", "type": "P", "difficulty": 3, "samples": [["7 2\nskyaqua", "y"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "贪心", "洛谷原创", "O2优化", "鸽笼原理", "洛谷月赛"], "title": "「ALFR Round 3」C 割", "background": "**upd:** 添加的 hack 在 Sub 7。", "description": "设 $f(S)$ 表示字符串 $S$ 字典序最大的子序列，给定 $k$，你需要将原字符串 $S$ 分割成 $k$ 段，设第 $i$ 段子串为 $a_i$，则该分割方案的权值为 $\\max f(a_i)$，其中 $1\\le i\\le k$。由于分割方案有很多种，你需要求出所有分割方案中**字典序最小的权值**。\n\n注：这里的权值实际上指的是字符串。\n\n关于子序列的定义：某个序列的子序列是从最初序列通过去除某些元素但不破坏余下元素的相对位置（在前或在后）而形成的新序列。\n\n关于字典序的定义：在字典序中，首先比较两个字符串的第一个字符，如果不同，则第一个字符较小的字符串更小；如果相同，则继续比较下一个字符，依此类推，直到比较完所有字符。如果一个字符串是另一个字符串的前缀，则较短的字符串更小。", "inputFormat": "输入共两行。\n\n第一行两个整数 $n,k$，$n$ 表示字符串 $S$ 的长度，$k$ 表示你需要将字符串分割为 $k$ 段。\n\n第二行为一个字符串，即 $S$。", "outputFormat": "输出一个字符串表示所有分割方案中字典序最小的权值。", "hint": "### 样例解释\n可以将字符串 $S$ 分割成 `sky`、`aqua` 这 $2$ 段，这 $2$ 段的 $f$ 分别为 `y`、`ua`，其中字典序最大的 $f$ 为 `y`，所以该分割方案的权值为 `y`。可以证明 `y` 是所有分割方案中字典序最小的权值。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $n\\le 10$ |\n| $2$ | $20$ | $n\\le 10^2$ |\n| $3$ | $20$ | $n\\le 3\\times 10^2$| \n| $4$ | $10$ | 保证字符串 $S$ 中所有字符都相等 |\n| $5$ | $10$ | $k=1$ |\n| $6$ | $30$ | - |\n\n对于 $100\\%$ 的数据，$1\\le k\\le n\\le 2\\times10^5$，且字符串 $S$ 中的字符均为小写英文字母。", "locale": "zh-CN", "translations": {"en": {"title": "「ALFR Round 3」C Division", "background": "", "description": "Let $f(S)$ denote the lexicographically largest subsequence of the string $S$. Given an integer $k$, you need to divide the original string $S$ into $k$ substrings, where the $i$-th substring is denoted as $a_i$. The weight of a partition scheme is defined as $\\max f(a_i)$ for $1 \\leq i \\leq k$. Since there are many partition schemes, you are required to find the **lexicographically smallest weight** among all possible partition schemes.\n\n**Note**: The term \"weight\" here refers to a string.\n\nDefinition of Subsequence: A subsequence of a sequence is formed by removing some elements from the original sequence without changing the relative positions of the remaining elements.\n\nDefinition of Lexicographical Order: In lexicographical order, two strings are compared starting from the first character. If the characters differ, the string with the smaller first character is smaller. If the characters are the same, the comparison continues with the next character, and so forth, until all characters are compared. If one string is a prefix of another, the shorter string is considered smaller.", "inputFormat": "The input consists of two lines.\n\nThe first line contains two integers $n$ and $k$, where $n$ is the length of the string $S$, and $k$ is the number of segments you need to divide the string into.\n\nThe second line contains a string $S$.", "outputFormat": "Output a string that represents the lexicographically smallest weight among all partition schemes.", "hint": "In the sample, you can divide the string $S$ into `sky` and `aqua` as the $2$ substrings. The functions $f$ for these strings are `y` and `ua`, respectively; thus, the maximum of $f$ values is `y`. It can be proven that `y` is the lexicographically smallest weight among all partition schemes.\n\n| Subtask | Score | Constraints |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $n \\leq 10$ |\n| $2$ | $20$ | $n \\leq 10^2$ |\n| $3$ | $20$ | $n \\leq 3 \\times 10^2$ | \n| $4$ | $10$ | All characters in the string $S$ are guaranteed to be equal |\n| $5$ | $10$ | $k=1$ |\n| $6$ | $30$ | - |\n| $7$ | $0$ | Extra hack tests |\n\nFor all the tests, $1 \\leq k \\leq n \\leq 2 \\times 10^5$, and the characters in the string $S$ are all lowercase letters.", "locale": "en"}, "zh-CN": {"title": "「ALFR Round 3」C 割", "background": "**upd:** 添加的 hack 在 Sub 7。", "description": "设 $f(S)$ 表示字符串 $S$ 字典序最大的子序列，给定 $k$，你需要将原字符串 $S$ 分割成 $k$ 段，设第 $i$ 段子串为 $a_i$，则该分割方案的权值为 $\\max f(a_i)$，其中 $1\\le i\\le k$。由于分割方案有很多种，你需要求出所有分割方案中**字典序最小的权值**。\n\n注：这里的权值实际上指的是字符串。\n\n关于子序列的定义：某个序列的子序列是从最初序列通过去除某些元素但不破坏余下元素的相对位置（在前或在后）而形成的新序列。\n\n关于字典序的定义：在字典序中，首先比较两个字符串的第一个字符，如果不同，则第一个字符较小的字符串更小；如果相同，则继续比较下一个字符，依此类推，直到比较完所有字符。如果一个字符串是另一个字符串的前缀，则较短的字符串更小。", "inputFormat": "输入共两行。\n\n第一行两个整数 $n,k$，$n$ 表示字符串 $S$ 的长度，$k$ 表示你需要将字符串分割为 $k$ 段。\n\n第二行为一个字符串，即 $S$。", "outputFormat": "输出一个字符串表示所有分割方案中字典序最小的权值。", "hint": "### 样例解释\n可以将字符串 $S$ 分割成 `sky`、`aqua` 这 $2$ 段，这 $2$ 段的 $f$ 分别为 `y`、`ua`，其中字典序最大的 $f$ 为 `y`，所以该分割方案的权值为 `y`。可以证明 `y` 是所有分割方案中字典序最小的权值。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $n\\le 10$ |\n| $2$ | $20$ | $n\\le 10^2$ |\n| $3$ | $20$ | $n\\le 3\\times 10^2$| \n| $4$ | $10$ | 保证字符串 $S$ 中所有字符都相等 |\n| $5$ | $10$ | $k=1$ |\n| $6$ | $30$ | - |\n\n对于 $100\\%$ 的数据，$1\\le k\\le n\\le 2\\times10^5$，且字符串 $S$ 中的字符均为小写英文字母。", "locale": "zh-CN"}}}
{"pid": "P11448", "type": "P", "difficulty": 4, "samples": [["3 3 1\n1\n1 2\n1 3\n1 1", "6 4 2\n"], ["3 1000000000000000000 1\n1\n1 2\n1 3\n1 1", "151723985 433897441 433897439\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "广度优先搜索 BFS", "洛谷月赛"], "title": "「ALFR Round 3」D 核裂变", "background": "可爱的松鼠跑去学 PhO 啦。", "description": "有 $n$ 个放射性原子要进行 $k$ 秒的裂变反应。如果在第 $t$ 秒开始时原子 $i$ 被 $b\\ (b>0)$ 个中子轰击了，那它就会在第 $t$ 秒内释放 $a_i + b$ 单位能量，并向编号为 $x_{i,1},x_{i,2},\\dots,x_{i,a_i}$ 的所有原子各释放 $1$ 个中子。这样，在第 $t+1$ 秒开始时分别击中的 $x_{i,1},x_{i,2},\\dots,x_{i,a_i}$ 的中子数量都将**增加** $1$（**如果 $t=k$，即这是最后一秒，那么被轰击的原子不会释放中子**）。如果在这一秒开始时某个原子没被中子击中，则其不会释放能量与中子。\n\n每一秒开始时，编号为 $v_1,v_2,\\dots,v_m$ 的原子都会被 $1$ 个中子轰击。那么，从第 $1$ 秒开始，到第 $k$ 秒的终止时刻为止，每个原子会释放多少能量？\n\n**答案对 $998244353$ 取模！**", "inputFormat": "第一行三个整数 $n,k,m$，表示原子的个数，反应的时间与每一秒开始时被轰击的原子数。\n\n接下来一行 $m$ 个整数 $v_1,v_2,\\dots,v_m$。\n\n接下来 $n$ 行输入每个原子的信息，格式如下：\n\n第 $i$ 行 $a_i + 1$ 个整数，第一个数为 $a_i$，接下来 $a_i$ 个数 $x_{i,1},x_{i,2},\\dots,x_{i,a_i}$。", "outputFormat": "输出 $1$ 行，共 $n$ 个数，第 $i$ 个数是原子 $i$ 从第 $1$ 秒开始，到第 $k$ 秒的终止时刻为止释放的总能量，答案对 $998244353$ 取模。", "hint": "### 样例 #1 解释：\n\n- 第一秒，原子 $1$ 被 $1$ 个中子轰击，释放 $1$ 中子到原子 $2$，释放 $2$ 能量。\n- 第二秒，原子 $1$ 被 $1$ 个中子轰击，释放 $1$ 中子到原子 $2$，释放 $2$ 能量。同时原子 $2$ 被 $1$ 个中子轰击，释放 $1$ 个中子到原子 $3$，释放 $2$ 能量。\n- 第三秒，原子 $1$ 被 $1$ 个中子轰击，释放 $2$ 能量。同时原子 $2$ 被 $1$ 个中子轰击，释放 $2$ 能量。同时原子 $3$ 被 $1$ 个中子轰击，释放 $2$ 能量。\n\n所以原子 $1$ 共释放了 $6$ 能量，原子 $2$ 释放了 $4$ 能量，原子 $3$ 释放了 $2$ 能量。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $5$ | $m=n,v_i=i,a_i=1,x_{i,1}=1$ |\n| $1$ | $10$ | $m=1,v_1=1,a_i=1,x_{i,1}=(i\\bmod n)+1$ |\n| $2$ | $20$ | $n,\\sum a_i\\le10^3$，$1\\le k\\le10^6$ |\n| $3$ | $30$ | $1\\le k\\le10^6$ |\n| $4$ | $35$ | - |\n\n对于所有数据，$1\\le m\\le n\\le 5\\times10^5,1\\le \\sum a_i\\le5\\times10^5$，$1\\le k\\le10^{18}$，$0 \\leq a_i \\leq 5 \\times 10^5$，且 $v_1,v_2,\\dots,v_m$ 互不相同且是 $[1,n]$ 内的整数，$x_{i,1},x_{i,2},\\dots,x_{i,a_i}$ 互不相同且是 $[1,n]$ 内的整数。\n\n**本题输入量较大，请使用较快的 I/O 方式。**", "locale": "zh-CN", "translations": {"en": {"title": "「ALFR Round 3」D Nuclear Fission", "background": "EmptyAlien is studying for the Physics Olympiad.", "description": "There are $n$ radioactive atoms that will undergo fission reactions for $k$ seconds. If at the beginning of the $t$-th second, atom $i$ is bombarded by $b\\ (b>0)$ neutrons, it will release $a_i + b$ units of energy during the $t$-th second and will release $1$ neutron to each of the atoms numbered $x_{i,1}, x_{i,2}, \\ldots, x_{i,a_i}$. Thus, at the beginning of the next second ($t+1$), the number of neutrons hitting each of $x_{i,1}, x_{i,2}, \\dots, x_{i,a_i}$ will increase by $1$ (**if $t=k$, meaning this is the last second, then neutrons will not be released by bombarded atoms**). If an atom is not bombarded by any neutrons at the beginning of a second, it will not release energy or neutrons.\n\nAt the beginning of each second, atoms numbered $v_1, v_2, \\ldots, v_m$ are bombarded by $1$ neutron. Therefore, from the beginning of the first second until the end of the $k$-th second, how much energy will each atom release?\n\n**Output the answer modulo $998244353$.**", "inputFormat": "The first line contains three integers $n, k, m$, representing the number of atoms, the duration of the reaction, and the number of atoms hit each second.\n\nThe second line contains $m$ integers $v_1, v_2, \\dots, v_m$.\n\nThe next $n$ lines contain the information for each atom, formatted as follows:\n\nThe $i$-th line contains $a_i + 1$ integers, where the first number is $a_i$, followed by $a_i$ integers $x_{i,1}, x_{i,2}, \\dots, x_{i,a_i}$.", "outputFormat": "Output one line containing $n$ integers. The $i$-th number is the total energy released by atom $i$ from the start of the $1$-st second to the termination moment of the $k$-th second, with the result taken modulo $998244353$.", "hint": "Explanation of sample #1:\n\n- In the first second, atom $1$ is hit by $1$ neutron, releasing $1$ neutron to atom $2$, thus releasing $2$ units of energy.\n- In the second second, atom $1$ is hit by $1$ neutron, releasing $1$ neutron to atom $2$, and releasing $2$ units of energy. Simultaneously, atom $2$ is hit by $1$ neutron, releasing $1$ neutron to atom $3$, and releasing $2$ units of energy.\n- In the third second, atom $1$ is hit by $1$ neutron, releasing $2$ units of energy. Meanwhile, atom $2$ is hit by $1$ neutron, releasing $2$ units of energy, and atom $3$ is hit by $1$ neutron, releasing $2$ units of energy.\n\nThus, atom $1$ releases a total of $6$ units of energy, atom $2$ releases $4$ units of energy, and atom $3$ releases $2$ units of energy.\n\n| Subtask | Score | Constraints |\n| :----------: | :----------: | :----------: |\n| $0$ | $5$ | $m=n,v_i=i,a_i=1,x_{i,1}=1$ |\n| $1$ | $10$ | $m=1,v_1=1,a_i=1,x_{i,1}=(i \\bmod n)+1$ |\n| $2$ | $20$ | $n,\\sum a_i \\leq 10^3$, $1 \\leq k \\leq 10^6$ |\n| $3$ | $30$ | $1 \\leq k \\leq 10^6$ |\n| $4$ | $35$ | - |\n\nFor all the tests, $1\\le n,\\sum a_i\\le5\\times10^5$, $1 \\leq k \\leq 10^{18}$, $0 \\leq a_i \\leq 5 \\times 10^5$, $1\\le m,v_i,x_{i,j}\\le n$, and $v_1,v_2,\\dots,v_m$ are distinct, while $x_{i,1},x_{i,2},\\dots,x_{i,a_i}$ are also distinct.\n\n**This problem has a large input, please use faster I/O methods.**", "locale": "en"}, "zh-CN": {"title": "「ALFR Round 3」D 核裂变", "background": "可爱的松鼠跑去学 PhO 啦。", "description": "有 $n$ 个放射性原子要进行 $k$ 秒的裂变反应。如果在第 $t$ 秒开始时原子 $i$ 被 $b\\ (b>0)$ 个中子轰击了，那它就会在第 $t$ 秒内释放 $a_i + b$ 单位能量，并向编号为 $x_{i,1},x_{i,2},\\dots,x_{i,a_i}$ 的所有原子各释放 $1$ 个中子。这样，在第 $t+1$ 秒开始时分别击中的 $x_{i,1},x_{i,2},\\dots,x_{i,a_i}$ 的中子数量都将**增加** $1$（**如果 $t=k$，即这是最后一秒，那么被轰击的原子不会释放中子**）。如果在这一秒开始时某个原子没被中子击中，则其不会释放能量与中子。\n\n每一秒开始时，编号为 $v_1,v_2,\\dots,v_m$ 的原子都会被 $1$ 个中子轰击。那么，从第 $1$ 秒开始，到第 $k$ 秒的终止时刻为止，每个原子会释放多少能量？\n\n**答案对 $998244353$ 取模！**", "inputFormat": "第一行三个整数 $n,k,m$，表示原子的个数，反应的时间与每一秒开始时被轰击的原子数。\n\n接下来一行 $m$ 个整数 $v_1,v_2,\\dots,v_m$。\n\n接下来 $n$ 行输入每个原子的信息，格式如下：\n\n第 $i$ 行 $a_i + 1$ 个整数，第一个数为 $a_i$，接下来 $a_i$ 个数 $x_{i,1},x_{i,2},\\dots,x_{i,a_i}$。", "outputFormat": "输出 $1$ 行，共 $n$ 个数，第 $i$ 个数是原子 $i$ 从第 $1$ 秒开始，到第 $k$ 秒的终止时刻为止释放的总能量，答案对 $998244353$ 取模。", "hint": "### 样例 #1 解释：\n\n- 第一秒，原子 $1$ 被 $1$ 个中子轰击，释放 $1$ 中子到原子 $2$，释放 $2$ 能量。\n- 第二秒，原子 $1$ 被 $1$ 个中子轰击，释放 $1$ 中子到原子 $2$，释放 $2$ 能量。同时原子 $2$ 被 $1$ 个中子轰击，释放 $1$ 个中子到原子 $3$，释放 $2$ 能量。\n- 第三秒，原子 $1$ 被 $1$ 个中子轰击，释放 $2$ 能量。同时原子 $2$ 被 $1$ 个中子轰击，释放 $2$ 能量。同时原子 $3$ 被 $1$ 个中子轰击，释放 $2$ 能量。\n\n所以原子 $1$ 共释放了 $6$ 能量，原子 $2$ 释放了 $4$ 能量，原子 $3$ 释放了 $2$ 能量。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $5$ | $m=n,v_i=i,a_i=1,x_{i,1}=1$ |\n| $1$ | $10$ | $m=1,v_1=1,a_i=1,x_{i,1}=(i\\bmod n)+1$ |\n| $2$ | $20$ | $n,\\sum a_i\\le10^3$，$1\\le k\\le10^6$ |\n| $3$ | $30$ | $1\\le k\\le10^6$ |\n| $4$ | $35$ | - |\n\n对于所有数据，$1\\le m\\le n\\le 5\\times10^5,1\\le \\sum a_i\\le5\\times10^5$，$1\\le k\\le10^{18}$，$0 \\leq a_i \\leq 5 \\times 10^5$，且 $v_1,v_2,\\dots,v_m$ 互不相同且是 $[1,n]$ 内的整数，$x_{i,1},x_{i,2},\\dots,x_{i,a_i}$ 互不相同且是 $[1,n]$ 内的整数。\n\n**本题输入量较大，请使用较快的 I/O 方式。**", "locale": "zh-CN"}}}
{"pid": "P11449", "type": "P", "difficulty": 3, "samples": [["4\n1\n100\n4567\n3366", "0\n5\n183\n60"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "2024"], "title": "[USACO24DEC] Roundabount Rounding B", "background": "", "description": "奶牛 Bessie 回到学校了！她开始做她的数学作业，在作业中她被要求将正整数四舍五入到 $10$ 的幂。\n\n要将一个正整数 $a$ 四舍五入到最接近的 $10^b$，其中 $b$ 为正整数，Bessie 首先找到从右往左数第 $b$ 个数位。令 $x$ 为这个数位。\n\n如果 $x≥5$，Bessie 将 $a$ 增加 $10^b$。\n\n然后，Bessie 将从右侧开始直至第 $b$ 个数位的所有数位均设置为 $0$。\n\n例如，如果 Bessie 想要将 $456$ 四舍五入到最接近的 $10^2$（百位），Bessie 会首先找到从右往左数第 $2$ 个数位 $5$。这意味着 $x=5$。然后由于 $x≥5$，Bessie 将 $a$ 增加 $100$。最后，Bessie 将 $a$ 中从右侧开始直至第 $2$ 个数位的所有数位设置为 $0$，结果为 $500$。\n\n但是，如果 Bessie 将 $446$ 四舍五入到最接近的 $10^2$，她将得到 $400$。\n\n在看了 Bessie 的作业后，Elsie 认为她已经发明了一种新的舍入方式：链式舍入。要链式舍入到最接近的 $10^b$，Elsie 将首先舍入到最接近的 $10^1$，然后舍入到最接近的 $10^2$\n，以此类推，直至舍入到最接近的 $10^b$。\n\nBessie 认为 Elsie 是错误的，但她太忙于数学作业，无法确认她的怀疑。她请你计算出存在多少个不小于 $2$ 且不超过 $N$ 的整数 $x$（$1≤N≤10^9$），使得将 $x$ 四舍五入到最接近的 $10^P$ 与链式舍入到最接近的 $10^P$ 的结果不同，其中 $P$ 是满足 $10^P≥x$ 的最小整数。", "inputFormat": "你需要回答多个测试用例。\n\n输入的第一行包含一个整数 $T$（$1≤T≤10^5$），为测试用例的数量。以下是 $T$ 个测试用例。\n\n每个测试用例的输入仅有一行，包含一个整数 $N$。输入保证同一测试点中的所有 $N$ 各不相同。", "outputFormat": "输出 $T$ 行，第 $i$ 行包含第 $i$ 个测试用例的答案。每行包含一个整数，表示存在多少个不小于 $2$ 且不超过 $N$ 的整数在使用两种舍入方法时会得到不同的结果。", "hint": "### 样例解释\n考虑样例中的第二个测试用例。$48$ 应当被计算在内，因为 $48$ 链式舍入到最接近的 $10^2$ 是 $100$（$48→50→100\n$），但 $48$ 四舍五入到最接近的 $10^2$ 是 $0$。\n\n在第三个测试用例中，$48$ 和 $480$ 是两个被计算在内的整数。$48$ 链式舍入到 $100$ 而不是 $0$，$480$ 链式舍入到 $1000$ 而不是 $0$。但是，$67$ 不被计算在内，因为它链式舍入到 $100$，与 $67$ 四舍五入到最接近的 $10^2$ 相同。\n\n### 测试点性质\n- 测试点 1：样例。\n- 测试点 2-4：$N≤10^3$。\n- 测试点 5-7：$N≤10^6$。\n- 测试点 8-13：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24DEC] Roundabount Rounding B", "background": "", "description": "奶牛 Bessie 回到学校了！她开始做她的数学作业，在作业中她被要求将正整数四舍五入到 $10$ 的幂。\n\n要将一个正整数 $a$ 四舍五入到最接近的 $10^b$，其中 $b$ 为正整数，Bessie 首先找到从右往左数第 $b$ 个数位。令 $x$ 为这个数位。\n\n如果 $x≥5$，Bessie 将 $a$ 增加 $10^b$。\n\n然后，Bessie 将从右侧开始直至第 $b$ 个数位的所有数位均设置为 $0$。\n\n例如，如果 Bessie 想要将 $456$ 四舍五入到最接近的 $10^2$（百位），Bessie 会首先找到从右往左数第 $2$ 个数位 $5$。这意味着 $x=5$。然后由于 $x≥5$，Bessie 将 $a$ 增加 $100$。最后，Bessie 将 $a$ 中从右侧开始直至第 $2$ 个数位的所有数位设置为 $0$，结果为 $500$。\n\n但是，如果 Bessie 将 $446$ 四舍五入到最接近的 $10^2$，她将得到 $400$。\n\n在看了 Bessie 的作业后，Elsie 认为她已经发明了一种新的舍入方式：链式舍入。要链式舍入到最接近的 $10^b$，Elsie 将首先舍入到最接近的 $10^1$，然后舍入到最接近的 $10^2$\n，以此类推，直至舍入到最接近的 $10^b$。\n\nBessie 认为 Elsie 是错误的，但她太忙于数学作业，无法确认她的怀疑。她请你计算出存在多少个不小于 $2$ 且不超过 $N$ 的整数 $x$（$1≤N≤10^9$），使得将 $x$ 四舍五入到最接近的 $10^P$ 与链式舍入到最接近的 $10^P$ 的结果不同，其中 $P$ 是满足 $10^P≥x$ 的最小整数。", "inputFormat": "你需要回答多个测试用例。\n\n输入的第一行包含一个整数 $T$（$1≤T≤10^5$），为测试用例的数量。以下是 $T$ 个测试用例。\n\n每个测试用例的输入仅有一行，包含一个整数 $N$。输入保证同一测试点中的所有 $N$ 各不相同。", "outputFormat": "输出 $T$ 行，第 $i$ 行包含第 $i$ 个测试用例的答案。每行包含一个整数，表示存在多少个不小于 $2$ 且不超过 $N$ 的整数在使用两种舍入方法时会得到不同的结果。", "hint": "### 样例解释\n考虑样例中的第二个测试用例。$48$ 应当被计算在内，因为 $48$ 链式舍入到最接近的 $10^2$ 是 $100$（$48→50→100\n$），但 $48$ 四舍五入到最接近的 $10^2$ 是 $0$。\n\n在第三个测试用例中，$48$ 和 $480$ 是两个被计算在内的整数。$48$ 链式舍入到 $100$ 而不是 $0$，$480$ 链式舍入到 $1000$ 而不是 $0$。但是，$67$ 不被计算在内，因为它链式舍入到 $100$，与 $67$ 四舍五入到最接近的 $10^2$ 相同。\n\n### 测试点性质\n- 测试点 1：样例。\n- 测试点 2-4：$N≤10^3$。\n- 测试点 5-7：$N≤10^6$。\n- 测试点 8-13：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11450", "type": "P", "difficulty": 2, "samples": [["2 5\n0 0 0\n1 1 1\n0 1 0\n1 0 0\n1 1 0", "0\n0\n1\n2\n5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2024"], "title": "[USACO24DEC] Farmer John's Cheese Block B", "background": "", "description": "Farmer John 有一块立方体形状的奶酪，它位于三维坐标空间中，从 $(0,0,0)$ 延伸至 $(N,N,N)$（$2≤N≤1000$）。Farmer John 将对他的奶酪块执行一系列 $Q$（$1≤Q≤2⋅10^5$）次更新操作。\n\n对于每次更新操作，FJ 将从整数坐标 $(x,y,z)$ 到 $(x+1,y+1,z+1)$ 处切割出一个 $1×1×1$ 的奶酪块，其中 $0≤x,y,z<N$。输入保证在 FJ 切割的位置上存在一个 $1×1×1$ 的奶酪块。由于 FJ 正在玩牛的世界，当下方的奶酪被切割后，重力不会导致上方的奶酪掉落。\n\n在每次更新后，输出 FJ 可以将一个 $1×1×N$ 的砖块插入奶酪块中的方案数，使得砖块的任何部分都不与剩余的奶酪重叠。砖块的每个顶点在全部三个坐标轴上均必须具有整数坐标，范围为 $[0,N]$。FJ 可以随意旋转砖块。", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n以下 $Q$ 行包含 $x$，$y$ 和 $z$，为要切割的位置的坐标。", "outputFormat": "在每次更新操作后，输出一个整数，为所求的方案数。", "hint": "### 样例解释\n\n在前三次更新操作后，$[0,1]×[0,2]×[0,1]$ 范围的 $1×2×1$ 砖块与剩余的奶酪不重叠，因此它贡献了答案。\n\n![](https://usaco.org/current/data/fig_1_cheese_bronze_dec24.png)\n\n### 测试点性质\n\n- 测试点 1：样例。\n- 测试点 2-4：$N≤10$ 且 $Q≤1000$。\n- 测试点 5-7：$N≤100$ 且 $Q≤1000$。\n- 测试点 8-16：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24DEC] Farmer John's Cheese Block B", "background": "", "description": "Farmer John 有一块立方体形状的奶酪，它位于三维坐标空间中，从 $(0,0,0)$ 延伸至 $(N,N,N)$（$2≤N≤1000$）。Farmer John 将对他的奶酪块执行一系列 $Q$（$1≤Q≤2⋅10^5$）次更新操作。\n\n对于每次更新操作，FJ 将从整数坐标 $(x,y,z)$ 到 $(x+1,y+1,z+1)$ 处切割出一个 $1×1×1$ 的奶酪块，其中 $0≤x,y,z<N$。输入保证在 FJ 切割的位置上存在一个 $1×1×1$ 的奶酪块。由于 FJ 正在玩牛的世界，当下方的奶酪被切割后，重力不会导致上方的奶酪掉落。\n\n在每次更新后，输出 FJ 可以将一个 $1×1×N$ 的砖块插入奶酪块中的方案数，使得砖块的任何部分都不与剩余的奶酪重叠。砖块的每个顶点在全部三个坐标轴上均必须具有整数坐标，范围为 $[0,N]$。FJ 可以随意旋转砖块。", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n以下 $Q$ 行包含 $x$，$y$ 和 $z$，为要切割的位置的坐标。", "outputFormat": "在每次更新操作后，输出一个整数，为所求的方案数。", "hint": "### 样例解释\n\n在前三次更新操作后，$[0,1]×[0,2]×[0,1]$ 范围的 $1×2×1$ 砖块与剩余的奶酪不重叠，因此它贡献了答案。\n\n![](https://usaco.org/current/data/fig_1_cheese_bronze_dec24.png)\n\n### 测试点性质\n\n- 测试点 1：样例。\n- 测试点 2-4：$N≤10$ 且 $Q≤1000$。\n- 测试点 5-7：$N≤100$ 且 $Q≤1000$。\n- 测试点 8-16：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11451", "type": "P", "difficulty": 3, "samples": [["10 2\nzzmoozzmoo", "1\nmoo"], ["17 2\nmomoobaaaaaqqqcqq", "3\naqq\nbaa\ncqq"], ["3 1\nooo", "25\naoo\nboo\ncoo\ndoo\neoo\nfoo\ngoo\nhoo\nioo\njoo\nkoo\nloo\nmoo\nnoo\npoo\nqoo\nroo\nsoo\ntoo\nuoo\nvoo\nwoo\nxoo\nyoo\nzoo"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["字符串", "USACO", "2024"], "title": "[USACO24DEC] It's Mooin' Time B", "background": "", "description": "Farmer John 正在试图向 Elsie 描述他最喜欢的 USACO 竞赛，但她很难理解为什么他这么喜欢它。他说「竞赛中我最喜欢的部分是 Bessie 说 『现在是哞哞时间』并在整个竞赛中一直哞哞叫」。\n\nElsie 仍然不理解，所以 Farmer John 将竞赛以文本文件形式下载，并试图解释他的意思。竞赛被定义为一个长度为 $N$（$3≤N≤20000$）的小写字母字符串。一种哞叫一般地定义为子串 $c_ic_jc_j$，其中某字符 $c_i$ 之后紧跟着 $2$ 个某字符 $c_j$，且 $c_i≠c_j$。根据 Farmer John 的说法，Bessie 哞叫了很多，所以如果某种哞叫在竞赛中出现了至少 $F$（$1≤F≤N$）次，那可能就是 Bessie 发出的。\n\n然而，Farmer John 的下载可能损坏，文本文件可能存在至多一个字符与原始文件不同。将可能的误差考虑在内，输出所有可能是 Bessie 发出的哞叫，按字典序顺序排序。", "inputFormat": "输入的第一行包含 $N$ 和 $F$，表示字符串的长度以及 Bessie 的哞叫的频次下限。\n\n第二行包含一个长度为 $N$ 的小写字母字符串，表示竞赛。", "outputFormat": "输出可能是 Bessie 发出的哞叫的数量，以下是按字典序排序的哞叫列表。每行输出一种哞叫。", "hint": "### 样例 #1 解释\n\n在这个样例中，任何字符变化都不会影响答案。唯一 Bessie 可能发出的哞叫是 $\\tt{moo}$。\n\n### 样例 #2 解释\n\n在这个样例中，位置 $8$（从零开始索引）的 $\\tt{a}$ 可能是由 $\\tt b$ 损坏导致的，这使得 $\\tt baa$ 成为一种 Bessie 发出两次的可能的哞叫。此外，位置 $11$ 的 $\\tt q$ 可能是由 $\\tt c$ 损坏导致的，这使得 $\\tt cqq$ 成为一种 Bessie 可能的哞叫。$\\tt aqq$ 可以通过将 $\\tt c$ 换成 $\\tt a$ 来达到。\n\n### 测试点性质\n- 测试点 1-3：样例。\n- 测试点 4-8：$N≤100$。\n- 测试点 9-13：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24DEC] It's Mooin' Time B", "background": "", "description": "Farmer John 正在试图向 Elsie 描述他最喜欢的 USACO 竞赛，但她很难理解为什么他这么喜欢它。他说「竞赛中我最喜欢的部分是 Bessie 说 『现在是哞哞时间』并在整个竞赛中一直哞哞叫」。\n\nElsie 仍然不理解，所以 Farmer John 将竞赛以文本文件形式下载，并试图解释他的意思。竞赛被定义为一个长度为 $N$（$3≤N≤20000$）的小写字母字符串。一种哞叫一般地定义为子串 $c_ic_jc_j$，其中某字符 $c_i$ 之后紧跟着 $2$ 个某字符 $c_j$，且 $c_i≠c_j$。根据 Farmer John 的说法，Bessie 哞叫了很多，所以如果某种哞叫在竞赛中出现了至少 $F$（$1≤F≤N$）次，那可能就是 Bessie 发出的。\n\n然而，Farmer John 的下载可能损坏，文本文件可能存在至多一个字符与原始文件不同。将可能的误差考虑在内，输出所有可能是 Bessie 发出的哞叫，按字典序顺序排序。", "inputFormat": "输入的第一行包含 $N$ 和 $F$，表示字符串的长度以及 Bessie 的哞叫的频次下限。\n\n第二行包含一个长度为 $N$ 的小写字母字符串，表示竞赛。", "outputFormat": "输出可能是 Bessie 发出的哞叫的数量，以下是按字典序排序的哞叫列表。每行输出一种哞叫。", "hint": "### 样例 #1 解释\n\n在这个样例中，任何字符变化都不会影响答案。唯一 Bessie 可能发出的哞叫是 $\\tt{moo}$。\n\n### 样例 #2 解释\n\n在这个样例中，位置 $8$（从零开始索引）的 $\\tt{a}$ 可能是由 $\\tt b$ 损坏导致的，这使得 $\\tt baa$ 成为一种 Bessie 发出两次的可能的哞叫。此外，位置 $11$ 的 $\\tt q$ 可能是由 $\\tt c$ 损坏导致的，这使得 $\\tt cqq$ 成为一种 Bessie 可能的哞叫。$\\tt aqq$ 可以通过将 $\\tt c$ 换成 $\\tt a$ 来达到。\n\n### 测试点性质\n- 测试点 1-3：样例。\n- 测试点 4-8：$N≤100$。\n- 测试点 9-13：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11452", "type": "P", "difficulty": 3, "samples": [["2\n4\n40 30 20 10\n4\n10 20 30 40", "60 40\n60 40"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "2024", "前缀和"], "title": "[USACO24DEC] Cake Game S", "background": "", "description": "Bessie 和 Elsie 发现了一行 $N$ 个蛋糕（$2≤N≤5⋅10^5$\n，$N$ 为偶数），大小依次为 $a_1,a_2,\\cdots,a_N$（$1≤a_i≤10^9$）。\n\n两头奶牛都想吃到尽可能多的蛋糕。但是，作为非常文明的奶牛，她们决定玩一个游戏来分割蛋糕！游戏在两头奶牛之间轮流进行回合。每个回合进行以下两者之一：\n\n1. Bessie 选择两个相邻的蛋糕并将它们堆叠起来，制造大小为两者大小之和的一个新蛋糕。\n2. Elsie 选择最左边或最右边的蛋糕藏起来。\n\n当只剩下一个蛋糕时，Bessie 吃掉它，而 Elsie 吃掉她藏起来的所有蛋糕。如果两头奶牛都采取最优策略以最大化她们吃到的蛋糕量，并且 Bessie 先进行回合，那么每头奶牛将会吃到多少蛋糕？", "inputFormat": "每个测试点包含 $T$（$1≤T≤10$）个独立的测试用例。输入保证一个测试点中的所有 $N$ 之和不超过 $10^6$。\n\n每个测试用例的格式如下。\n\n第一行包含 $N$。下一行包含 $N$ 个空格分隔的整数 $a_1,a_2,\\cdots,a_N$。", "outputFormat": "对于每个测试用例，输出一行，包含 $b$ 和 $e$，表示 Bessie 和 Elsie 在两头奶牛都采取最优策略的情况下分别吃到的蛋糕量。", "hint": "### 样例解释\n\n对于第一个测试用例，在最优策略下，\n\nBessie 将堆叠中间两个蛋糕。现在蛋糕的大小为 $[40,50,10]$。\n\nElsie 将吃掉最左边的蛋糕。现在剩余的蛋糕的大小为 $[50,10]$。\n\nBessie 堆叠剩余的两个蛋糕。\n\nBessie 将吃到 $30+20+10=60$ 的蛋糕，而 Elsie 将吃到 $40$ 的蛋糕。\n\n第二个测试用例是第一个测试用例反转的情况，因此答案相同。\n\n### 测试点性质\n\n- 测试点 1：样例。\n- 测试点 2：所有 $a_i$ 相等。\n- 测试点 3：$N≤10$。\n- 测试点 4-7：$N≤5000$。\n- 测试点 8-11：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24DEC] Cake Game S", "background": "", "description": "Bessie 和 Elsie 发现了一行 $N$ 个蛋糕（$2≤N≤5⋅10^5$\n，$N$ 为偶数），大小依次为 $a_1,a_2,\\cdots,a_N$（$1≤a_i≤10^9$）。\n\n两头奶牛都想吃到尽可能多的蛋糕。但是，作为非常文明的奶牛，她们决定玩一个游戏来分割蛋糕！游戏在两头奶牛之间轮流进行回合。每个回合进行以下两者之一：\n\n1. Bessie 选择两个相邻的蛋糕并将它们堆叠起来，制造大小为两者大小之和的一个新蛋糕。\n2. Elsie 选择最左边或最右边的蛋糕藏起来。\n\n当只剩下一个蛋糕时，Bessie 吃掉它，而 Elsie 吃掉她藏起来的所有蛋糕。如果两头奶牛都采取最优策略以最大化她们吃到的蛋糕量，并且 Bessie 先进行回合，那么每头奶牛将会吃到多少蛋糕？", "inputFormat": "每个测试点包含 $T$（$1≤T≤10$）个独立的测试用例。输入保证一个测试点中的所有 $N$ 之和不超过 $10^6$。\n\n每个测试用例的格式如下。\n\n第一行包含 $N$。下一行包含 $N$ 个空格分隔的整数 $a_1,a_2,\\cdots,a_N$。", "outputFormat": "对于每个测试用例，输出一行，包含 $b$ 和 $e$，表示 Bessie 和 Elsie 在两头奶牛都采取最优策略的情况下分别吃到的蛋糕量。", "hint": "### 样例解释\n\n对于第一个测试用例，在最优策略下，\n\nBessie 将堆叠中间两个蛋糕。现在蛋糕的大小为 $[40,50,10]$。\n\nElsie 将吃掉最左边的蛋糕。现在剩余的蛋糕的大小为 $[50,10]$。\n\nBessie 堆叠剩余的两个蛋糕。\n\nBessie 将吃到 $30+20+10=60$ 的蛋糕，而 Elsie 将吃到 $40$ 的蛋糕。\n\n第二个测试用例是第一个测试用例反转的情况，因此答案相同。\n\n### 测试点性质\n\n- 测试点 1：样例。\n- 测试点 2：所有 $a_i$ 相等。\n- 测试点 3：$N≤10$。\n- 测试点 4-7：$N≤5000$。\n- 测试点 8-11：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11453", "type": "P", "difficulty": 4, "samples": [["3\n7 1\n8 4 10 1 2 6 7\n2 9 3\n7 2\n8 4 10 1 2 6 7\n2 9 3\n1 10 1\n7 2\n8 4 10 1 2 6 7\n2 9 3\n1 10 4", "4\n4\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "线段树", "二分", "USACO", "堆", "2024", "差分约束"], "title": "[USACO24DEC] Deforestation S", "background": "", "description": "Farmer John 正在扩大他的农场！他已经找到了完美的位置——红黑森林，由数轴上的 $N$ 棵树（$1≤N≤10^5$）组成，第 $i$ 棵树位于位置 $x_i$（$−10^9≤x_i≤10^9$）。\n\n环境保护法限制了 Farmer John 可以砍伐哪些树来为他的农场腾出空间。有 $K$ 个限制（$1≤K≤10^5$），规定在线段 $[l_i,r_i]$（包含端点）中必须始终至少存在 $t_i$ 棵树（$−10^9≤l_i,r_i≤10^9$）。输入保证红黑森林初始时满足这些限制。\n\nFarmer John 想要他的农场尽可能大。请帮助他计算他可以砍伐的树的最大数量，同时仍然满足所有限制！", "inputFormat": "每个测试点包含 $T$（$1≤T≤10$）个独立的测试用例。输入保证一个测试点中的所有 $N$ 之和以及 $K$ 之和均不超过 $3⋅10^5$。\n\n输入的第一行包含 $T$。每个测试用例的格式如下：\n\n- 第一行包含整数 $N$ 和 $K$。\n- 下一行包含 $N$ 个整数 $x_1,\\cdots,x_N$。\n- 以下 $K$ 行，每行包含三个空格分隔的整数 $l_i$，$r_i$ 和 $t_i$。", "outputFormat": "对于每个测试用例，输出一行，包含一个整数，表示 Farmer John 可以砍伐的树的最大数量。", "hint": "### 样例解释\n\n对于第一个测试用例，Farmer John 可以砍伐前 $4$ 棵树，留下位于 $x_i=2,6,7$ 的树来满足限制。\n\n对于第二个测试用例，额外的限制不会影响 Farmer John 可以砍伐哪些树，因此他可以砍伐相同的树并同时满足两个限制。\n\n对于第三个测试用例，Farmer John 至多只能砍伐 $3$ 棵树，因为初始时有 $7$ 棵树，但第二个限制要求他至少留下 $4$ 棵树不砍伐。\n\n### 测试点性质\n\n测试点性质：\n- 测试点 1：样例。\n- 测试点 2：$N,K≤16$。\n- 测试点 3-5：$N,K≤1000$。\n- 测试点 6-7：对于所有的 $i=1,\\cdots,K$ 有 $ti=1$。\n- 测试点 8-11：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24DEC] Deforestation S", "background": "", "description": "Farmer John 正在扩大他的农场！他已经找到了完美的位置——红黑森林，由数轴上的 $N$ 棵树（$1≤N≤10^5$）组成，第 $i$ 棵树位于位置 $x_i$（$−10^9≤x_i≤10^9$）。\n\n环境保护法限制了 Farmer John 可以砍伐哪些树来为他的农场腾出空间。有 $K$ 个限制（$1≤K≤10^5$），规定在线段 $[l_i,r_i]$（包含端点）中必须始终至少存在 $t_i$ 棵树（$−10^9≤l_i,r_i≤10^9$）。输入保证红黑森林初始时满足这些限制。\n\nFarmer John 想要他的农场尽可能大。请帮助他计算他可以砍伐的树的最大数量，同时仍然满足所有限制！", "inputFormat": "每个测试点包含 $T$（$1≤T≤10$）个独立的测试用例。输入保证一个测试点中的所有 $N$ 之和以及 $K$ 之和均不超过 $3⋅10^5$。\n\n输入的第一行包含 $T$。每个测试用例的格式如下：\n\n- 第一行包含整数 $N$ 和 $K$。\n- 下一行包含 $N$ 个整数 $x_1,\\cdots,x_N$。\n- 以下 $K$ 行，每行包含三个空格分隔的整数 $l_i$，$r_i$ 和 $t_i$。", "outputFormat": "对于每个测试用例，输出一行，包含一个整数，表示 Farmer John 可以砍伐的树的最大数量。", "hint": "### 样例解释\n\n对于第一个测试用例，Farmer John 可以砍伐前 $4$ 棵树，留下位于 $x_i=2,6,7$ 的树来满足限制。\n\n对于第二个测试用例，额外的限制不会影响 Farmer John 可以砍伐哪些树，因此他可以砍伐相同的树并同时满足两个限制。\n\n对于第三个测试用例，Farmer John 至多只能砍伐 $3$ 棵树，因为初始时有 $7$ 棵树，但第二个限制要求他至少留下 $4$ 棵树不砍伐。\n\n### 测试点性质\n\n测试点性质：\n- 测试点 1：样例。\n- 测试点 2：$N,K≤16$。\n- 测试点 3-5：$N,K≤1000$。\n- 测试点 6-7：对于所有的 $i=1,\\cdots,K$ 有 $ti=1$。\n- 测试点 8-11：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11454", "type": "P", "difficulty": 5, "samples": [["3 5\n1 1 R\n3 3 L\n3 2 D\n1 2 L\n2 1 U", "0\n0\n0\n2\n3"], ["3 8\n1 1 R\n1 2 L\n1 3 D\n2 3 U\n3 3 L\n3 2 R\n3 1 U\n2 1 D", "0\n2\n2\n4\n4\n6\n6\n9"], ["4 13\n2 2 R\n2 3 R\n2 4 D\n3 4 D\n4 4 L\n4 3 L\n4 2 U\n3 1 D\n4 1 R\n2 1 L\n1 1 D\n1 4 L\n1 3 D", "0\n0\n0\n0\n0\n0\n0\n0\n11\n11\n11\n11\n13"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["图论", "USACO", "2024", "深度优先搜索 DFS", "连通块", "离线处理"], "title": "[USACO24DEC] 2D Conveyer Belt S", "background": "", "description": "Farmer John 的牛奶工厂可以用一个 $N\\times N$（$1≤N≤1000$）的方阵来表示，其中的方格带有传送带。位置 $(a,b)$ 描述了位于从上往下第 $a$ 行、从左往右第 $b$ 列的方格。有 $5$ 种类型的方格：\n\n- $\\texttt{L}$ — 该方格是一个向左的传送带，每一单位时间会将所有物品向左移动一格。\n- $\\texttt{R}$ — 该方格是一个向右的传送带，每一单位时间会将所有物品向右移动一格。\n- $\\texttt{U}$ — 该方格是一个向上的传送带，每一单位时间会将所有物品向上移动一格。\n- $\\texttt{D}$ — 该方格是一个向下的传送带，每一单位时间会将所有物品向下移动一格。\n- $\\texttt{?}$ — Farmer John 还没有在该方格上建造传送带。\n注意传送带也可以将物品移动到方阵外。一个方格 $c$ 是不可用的，当且仅当一个放置在方格 $c$ 上的物品将永远不会离开传送带方阵（即它会永远在方阵中移动）。\n\n初始时，Farmer John 还没有开始建造传送带，所以所有方格都以 $\\texttt{?}$ 开始。接下来的 $Q$（$1≤Q≤2⋅10^5$）天，从第 $1$ 天开始到第 $Q$ 天，Farmer John 将选择一个没有传送带的方阵并在该方阵上建造一个传送带。\n\n具体地说，在第 $i$ 天，Farmer John 将在位置 $(r_i,c_i)$（$1≤r_i,c_i≤N$）建造一个类型 $t_i$（$t_i\\in\\{\\texttt{L},\\texttt{R},\\texttt{U},\\texttt{D}\\}$）的传送带。输入保证在位置 $(r_i,c_i)$ 没有传送带。\n\n每天过后，请帮助 Farmer John 求出他通过最优地在所有余下的没有传送带的方格上建造传送带可以达到的不可用方格的最小数量。", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n以下 $Q$ 行，第 $i$ 行依次包含 $r_i$，$c_i$ 和 $t_i$。", "outputFormat": "输出 $Q$ 行，每行包含 Farmer John 最优地在所有余下的没有传送带的方格上建造传送带时不可用方格的最小数量。", "hint": "### 样例 #1 解释\n\n第五天过后的传送带如下所示。\n\n$$\\begin{aligned}\n\\texttt{RL?}\\\\\n\\texttt{U??}\\\\\n\\texttt{?DL}\\\\\n\\end{aligned}\n$$\n一种在余下的方格上建造传送带的最优方案如下。\n\n$$\\begin{aligned}\n\\texttt{RLR}\\\\\n\\texttt{URR}\\\\\n\\texttt{LDL}\\\\\n\\end{aligned}\n$$\n在这种配置下，位于 $(1,1)$，$(1,2)$ 和 $(2,1)$ 的方格是不可用的。\n\n### 样例 2 解释\n\n第八天过后的传送带如下所示。\n\n$$\\begin{aligned}\n\\texttt{RLD}\\\\\n\\texttt{D?U}\\\\\n\\texttt{URL}\\\\\n\\end{aligned}\n$$\n\n无论 Farmer John 在中间建造何种传送带，所有方格都将是不可用的。\n\n### 测试点性质\n\n- 测试点 1-3：样例。\n- 测试点 4-5：$N≤10$。\n- 测试点 6-7：$N≤40$。\n- 测试点 8-13：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24DEC] 2D Conveyer Belt S", "background": "", "description": "Farmer John 的牛奶工厂可以用一个 $N\\times N$（$1≤N≤1000$）的方阵来表示，其中的方格带有传送带。位置 $(a,b)$ 描述了位于从上往下第 $a$ 行、从左往右第 $b$ 列的方格。有 $5$ 种类型的方格：\n\n- $\\texttt{L}$ — 该方格是一个向左的传送带，每一单位时间会将所有物品向左移动一格。\n- $\\texttt{R}$ — 该方格是一个向右的传送带，每一单位时间会将所有物品向右移动一格。\n- $\\texttt{U}$ — 该方格是一个向上的传送带，每一单位时间会将所有物品向上移动一格。\n- $\\texttt{D}$ — 该方格是一个向下的传送带，每一单位时间会将所有物品向下移动一格。\n- $\\texttt{?}$ — Farmer John 还没有在该方格上建造传送带。\n注意传送带也可以将物品移动到方阵外。一个方格 $c$ 是不可用的，当且仅当一个放置在方格 $c$ 上的物品将永远不会离开传送带方阵（即它会永远在方阵中移动）。\n\n初始时，Farmer John 还没有开始建造传送带，所以所有方格都以 $\\texttt{?}$ 开始。接下来的 $Q$（$1≤Q≤2⋅10^5$）天，从第 $1$ 天开始到第 $Q$ 天，Farmer John 将选择一个没有传送带的方阵并在该方阵上建造一个传送带。\n\n具体地说，在第 $i$ 天，Farmer John 将在位置 $(r_i,c_i)$（$1≤r_i,c_i≤N$）建造一个类型 $t_i$（$t_i\\in\\{\\texttt{L},\\texttt{R},\\texttt{U},\\texttt{D}\\}$）的传送带。输入保证在位置 $(r_i,c_i)$ 没有传送带。\n\n每天过后，请帮助 Farmer John 求出他通过最优地在所有余下的没有传送带的方格上建造传送带可以达到的不可用方格的最小数量。", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n以下 $Q$ 行，第 $i$ 行依次包含 $r_i$，$c_i$ 和 $t_i$。", "outputFormat": "输出 $Q$ 行，每行包含 Farmer John 最优地在所有余下的没有传送带的方格上建造传送带时不可用方格的最小数量。", "hint": "### 样例 #1 解释\n\n第五天过后的传送带如下所示。\n\n$$\\begin{aligned}\n\\texttt{RL?}\\\\\n\\texttt{U??}\\\\\n\\texttt{?DL}\\\\\n\\end{aligned}\n$$\n一种在余下的方格上建造传送带的最优方案如下。\n\n$$\\begin{aligned}\n\\texttt{RLR}\\\\\n\\texttt{URR}\\\\\n\\texttt{LDL}\\\\\n\\end{aligned}\n$$\n在这种配置下，位于 $(1,1)$，$(1,2)$ 和 $(2,1)$ 的方格是不可用的。\n\n### 样例 2 解释\n\n第八天过后的传送带如下所示。\n\n$$\\begin{aligned}\n\\texttt{RLD}\\\\\n\\texttt{D?U}\\\\\n\\texttt{URL}\\\\\n\\end{aligned}\n$$\n\n无论 Farmer John 在中间建造何种传送带，所有方格都将是不可用的。\n\n### 测试点性质\n\n- 测试点 1-3：样例。\n- 测试点 4-5：$N≤10$。\n- 测试点 6-7：$N≤40$。\n- 测试点 8-13：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11455", "type": "P", "difficulty": 5, "samples": [["9\n1 1 1 9 2 1 2 1 1\n", "7\n5\n4\n4\n4\n4\n4\n3\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "二分", "USACO", "2024", "根号分治"], "title": "[USACO24DEC] Cowdependence G", "background": null, "description": "Farmer John 的 $N$（$1 \\leq N \\leq 10^5$）头奶牛已经排成一行。第 $i$ 头奶牛的标号是 $a_i$（$1 \\leq a_i \\leq N$）。如果一些奶牛具有相同的标号，并且他们两两之间的距离都在 $x$ 头牛以内，那么这些奶牛可以组成一个友谊小组（$x$ 是范围 $[1,N]$ 内的一个整数）。每头奶牛必须恰好属于一个友谊小组。\n\n对于从 $1$ 到 $N$ 的每一个 $x$，计算可能组成的友谊小组的最小数量。", "inputFormat": "输入的第一行包含一个整数 $N$。\n\n下一行包含 $a_1 \\dots a_N$，为每头奶牛的标号。", "outputFormat": "对于从 $1$ 到 $N$ 的每一个 $x$ 输出一行，包含该 $x$ 所对应的友谊小组的最小数量。", "hint": "以下为当 $x=1$ 和 $x=2$ 时将奶牛以最小化小组数量的方式组成友谊小组的一些例子。每个字母对应一个不同的小组。\n\n例：\n\n```\n       1 1 1 9 2 1 2 1 1\nx = 1: A B B C D E F G G（7 组）\nx = 1: A A B C D E F G G（7 组，另一种分组方案）\nx = 2: A A A B C D C E E（5 组）\nx = 2: A A A B C D C D E（5 组，另一种分组方案）\n```\n\n- 测试点 $2\\sim 3$：$N\\leq 5000$。\n- 测试点 $4\\sim 7$：对于所有 $i$ 有 $a_i\\leq 10$。\n- 测试点 $8\\sim 11$：没有标号出现超过 $10$ 次。\n- 测试点 $12\\sim 20$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24DEC] Cowdependence G", "background": null, "description": "Farmer John 的 $N$（$1 \\leq N \\leq 10^5$）头奶牛已经排成一行。第 $i$ 头奶牛的标号是 $a_i$（$1 \\leq a_i \\leq N$）。如果一些奶牛具有相同的标号，并且他们两两之间的距离都在 $x$ 头牛以内，那么这些奶牛可以组成一个友谊小组（$x$ 是范围 $[1,N]$ 内的一个整数）。每头奶牛必须恰好属于一个友谊小组。\n\n对于从 $1$ 到 $N$ 的每一个 $x$，计算可能组成的友谊小组的最小数量。", "inputFormat": "输入的第一行包含一个整数 $N$。\n\n下一行包含 $a_1 \\dots a_N$，为每头奶牛的标号。", "outputFormat": "对于从 $1$ 到 $N$ 的每一个 $x$ 输出一行，包含该 $x$ 所对应的友谊小组的最小数量。", "hint": "以下为当 $x=1$ 和 $x=2$ 时将奶牛以最小化小组数量的方式组成友谊小组的一些例子。每个字母对应一个不同的小组。\n\n例：\n\n```\n       1 1 1 9 2 1 2 1 1\nx = 1: A B B C D E F G G（7 组）\nx = 1: A A B C D E F G G（7 组，另一种分组方案）\nx = 2: A A A B C D C E E（5 组）\nx = 2: A A A B C D C D E（5 组，另一种分组方案）\n```\n\n- 测试点 $2\\sim 3$：$N\\leq 5000$。\n- 测试点 $4\\sim 7$：对于所有 $i$ 有 $a_i\\leq 10$。\n- 测试点 $8\\sim 11$：没有标号出现超过 $10$ 次。\n- 测试点 $12\\sim 20$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11456", "type": "P", "difficulty": 5, "samples": [["6\nRXXXXB", "5"], ["6\nXXRBXX", "6"], ["12\nXBXXXXRXRBXX", "18"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "树状数组", "2024"], "title": "[USACO24DEC] Interstellar Intervals G", "background": null, "description": "现在是公元 $3000$ 年，Bessie 成为了第一头进入太空的奶牛！在她穿越星际的旅程中，她发现了一条有 $N$（$2 \\leq N \\leq 5 \\cdot 10^5$）个点的数轴，点的编号从 $1$ 到 $N$。所有点初始时都是白色的。她可以执行任意次以下操作。\n\n选择一个数轴上的位置 $i$ 和一个正整数 $x$。然后，将区间 $[i, i + x - 1]$ 中的所有点涂成红色，区间 $[i + x, i + 2x - 1]$ 中的所有点涂成蓝色。所有选择的区间必须是不交的（即区间 $[i, i + 2x - 1]$ 中的点不能已经被涂成红色或蓝色）。同时，整个区间必须落在数轴内（即 $1 \\leq i \\leq i + 2x - 1 \\leq N$）。\nFarmer John 给了 Bessie 一个长度为 $N$ 的字符串 $s$，由字符 $\\tt R$，$\\tt B$ 和 $\\tt X$ 组成。该字符串表示了 Farmer John 对每个点的颜色偏好：$s_i=\\texttt{R}$ 表示第 $i$ 个点必须被涂成红色，$s_i = \\texttt{B}$ 表示第 $i$ 个点必须被涂成蓝色，$s_i = \\texttt{X}$ 表示第 $i$ 个点的颜色没有限制。\n\n帮助 Bessie 计算满足 Farmer John 偏好的不同的数轴涂色方案的数量。两个涂色方案是不同的，当且仅当至少一个对应点的颜色不同。由于答案可能很大，输出答案模 $10^9+7$ 的余数。", "inputFormat": "输入的第一行包含一个整数 $N$。\n\n下一行包含字符串 $s$。", "outputFormat": "输出满足 Farmer John 偏好的不同的数轴涂色方案的数量，对 $10^9+7$ 取模。", "hint": "样例 1 解释：\n\nBessie 可以选择 $i=1,x=1$（即将点 $1$ 涂成红色，点 $2$  涂成蓝色）以及 $i=3,x=2$（即将点 $3,4$ 涂成红色，点 $5,6$ 涂成蓝色）来得到涂色方案 $\\tt RBRRBB$。\n\n其他涂色方案有 $\\tt{RRBBRB}$，$\\tt{RBWWRB}$，$\\tt{RRRBBB}$ 和 $\\tt{RBRBRB}$。\n\n样例 2 解释：\n\n六种涂色方案为 $\\tt{WWRBWW}$，$\\tt{WWRBRB}$，$\\tt{WRRBBW}$，$\\tt{RBRBWW}$，$\\tt{RBRBRB}$ 和 $\\tt{RRRBBB}$。\n\n- 测试点 $4$：$N\\leq 500$。\n- 测试点 $5\\sim 6$：$N\\leq 10^4$。\n- 测试点 $7\\sim 13$：$s$ 中至多 $100$ 个字符不为 $\\tt{X}$。\n- 测试点 $14\\sim 23$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24DEC] Interstellar Intervals G", "background": null, "description": "现在是公元 $3000$ 年，Bessie 成为了第一头进入太空的奶牛！在她穿越星际的旅程中，她发现了一条有 $N$（$2 \\leq N \\leq 5 \\cdot 10^5$）个点的数轴，点的编号从 $1$ 到 $N$。所有点初始时都是白色的。她可以执行任意次以下操作。\n\n选择一个数轴上的位置 $i$ 和一个正整数 $x$。然后，将区间 $[i, i + x - 1]$ 中的所有点涂成红色，区间 $[i + x, i + 2x - 1]$ 中的所有点涂成蓝色。所有选择的区间必须是不交的（即区间 $[i, i + 2x - 1]$ 中的点不能已经被涂成红色或蓝色）。同时，整个区间必须落在数轴内（即 $1 \\leq i \\leq i + 2x - 1 \\leq N$）。\nFarmer John 给了 Bessie 一个长度为 $N$ 的字符串 $s$，由字符 $\\tt R$，$\\tt B$ 和 $\\tt X$ 组成。该字符串表示了 Farmer John 对每个点的颜色偏好：$s_i=\\texttt{R}$ 表示第 $i$ 个点必须被涂成红色，$s_i = \\texttt{B}$ 表示第 $i$ 个点必须被涂成蓝色，$s_i = \\texttt{X}$ 表示第 $i$ 个点的颜色没有限制。\n\n帮助 Bessie 计算满足 Farmer John 偏好的不同的数轴涂色方案的数量。两个涂色方案是不同的，当且仅当至少一个对应点的颜色不同。由于答案可能很大，输出答案模 $10^9+7$ 的余数。", "inputFormat": "输入的第一行包含一个整数 $N$。\n\n下一行包含字符串 $s$。", "outputFormat": "输出满足 Farmer John 偏好的不同的数轴涂色方案的数量，对 $10^9+7$ 取模。", "hint": "样例 1 解释：\n\nBessie 可以选择 $i=1,x=1$（即将点 $1$ 涂成红色，点 $2$  涂成蓝色）以及 $i=3,x=2$（即将点 $3,4$ 涂成红色，点 $5,6$ 涂成蓝色）来得到涂色方案 $\\tt RBRRBB$。\n\n其他涂色方案有 $\\tt{RRBBRB}$，$\\tt{RBWWRB}$，$\\tt{RRRBBB}$ 和 $\\tt{RBRBRB}$。\n\n样例 2 解释：\n\n六种涂色方案为 $\\tt{WWRBWW}$，$\\tt{WWRBRB}$，$\\tt{WRRBBW}$，$\\tt{RBRBWW}$，$\\tt{RBRBRB}$ 和 $\\tt{RRRBBB}$。\n\n- 测试点 $4$：$N\\leq 500$。\n- 测试点 $5\\sim 6$：$N\\leq 10^4$。\n- 测试点 $7\\sim 13$：$s$ 中至多 $100$ 个字符不为 $\\tt{X}$。\n- 测试点 $14\\sim 23$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11457", "type": "P", "difficulty": 5, "samples": [["3\n2\n1 4\n1 2\n2\n2 3\n1 2\n3\n1 4\n2 3\n1 2", "1\n2\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "堆", "2024", "反悔贪心"], "title": "[USACO24DEC] Job Completion G", "background": "", "description": "奶牛 Bessie 有 $N$（$1\\le N\\le 2\\cdot 10^5$）个工作需要你去完成。第 $i$ 个工作，如果你选择完成它，必须在时刻 $s_i$ 或之前开始，花费 $t_i$ 时间才能完成（$0\\le s_i\\le 10^{18}, 1\\le t_i\\le 10^{18}$）。\n\n你可以完成的工作的最大数量是多少？时间从时刻 $0$ 开始，并且一旦你开始一个工作，你必须一直工作直到完成，而不能在此期间开始完成其他工作。", "inputFormat": "输入的第一行包含 $T$，为测试用例的数量（$1\\le T\\le 10$）。每个测试用例的格式如下。\n第一行包含 $N$。\n\n以下 $N$ 行，每行包含两个整数 $s_i$ 和 $t_i$。第 $i+1$ 行为第 $i$ 个工作的信息。\n\n输入保证所有测试用例的 $N$ 之和不超过 $3\\cdot 10^5$。", "outputFormat": "对于每个测试用例输出一行，包含你可以完成的工作的最大数量。\n", "hint": "对于第一个测试用例，你只能完成其中一个工作。在完成一个工作后，将会是时刻 $2$ 或更晚，因此已经太晚，无法开始另一个工作，必须要在时刻 $1$ 或更早才能开始。\n\n对于第二个测试用例，你可以在时刻 $0$ 开始第二个工作并于时刻 $2$ 完成，然后在时刻 $2$ 开始第一个工作并于时刻 $5$ 完成。\n\n- 测试点 $2$：同一个测试用例中的所有 $t_i$ 均相等。\n- 测试点 $3\\sim 4$：$N\\le 2000$，$s_i, t_i\\le 2000$。\n- 测试点 $5\\sim 8$：$N\\le 2000$。\n- 测试点 $9\\sim 16$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24DEC] Job Completion G", "background": "", "description": "奶牛 Bessie 有 $N$（$1\\le N\\le 2\\cdot 10^5$）个工作需要你去完成。第 $i$ 个工作，如果你选择完成它，必须在时刻 $s_i$ 或之前开始，花费 $t_i$ 时间才能完成（$0\\le s_i\\le 10^{18}, 1\\le t_i\\le 10^{18}$）。\n\n你可以完成的工作的最大数量是多少？时间从时刻 $0$ 开始，并且一旦你开始一个工作，你必须一直工作直到完成，而不能在此期间开始完成其他工作。", "inputFormat": "输入的第一行包含 $T$，为测试用例的数量（$1\\le T\\le 10$）。每个测试用例的格式如下。\n第一行包含 $N$。\n\n以下 $N$ 行，每行包含两个整数 $s_i$ 和 $t_i$。第 $i+1$ 行为第 $i$ 个工作的信息。\n\n输入保证所有测试用例的 $N$ 之和不超过 $3\\cdot 10^5$。", "outputFormat": "对于每个测试用例输出一行，包含你可以完成的工作的最大数量。\n", "hint": "对于第一个测试用例，你只能完成其中一个工作。在完成一个工作后，将会是时刻 $2$ 或更晚，因此已经太晚，无法开始另一个工作，必须要在时刻 $1$ 或更早才能开始。\n\n对于第二个测试用例，你可以在时刻 $0$ 开始第二个工作并于时刻 $2$ 完成，然后在时刻 $2$ 开始第一个工作并于时刻 $5$ 完成。\n\n- 测试点 $2$：同一个测试用例中的所有 $t_i$ 均相等。\n- 测试点 $3\\sim 4$：$N\\le 2000$，$s_i, t_i\\le 2000$。\n- 测试点 $5\\sim 8$：$N\\le 2000$。\n- 测试点 $9\\sim 16$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11458", "type": "P", "difficulty": 6, "samples": [["4 2\n1\n1\n2\n3", "500000006\n500000006\n500000005\n500000006"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["USACO", "2024", "容斥原理", "快速沃尔什变换 FWT", "状压 DP"], "title": "[USACO24DEC] All Pairs Similarity P", "background": "", "description": "**注意：本题的内存限制为 512MB，通常限制的 2 倍。**\n\nFarmer John 的 $N$（$1\\le N\\le 5\\cdot 10^5$）头奶牛都被分配了一个长度为 $K$ 的非全零位串（$1\\le K\\le 20$）。不同的奶牛可能被分配到相同的位串。\n\n两个位串的 Jaccard 相似度定义为它们的按位与的结果中 $\\texttt{1}$ 的数量除以它们的按位或的结果中 $\\texttt{1}$ 的数量。例如，位串 $\\texttt{11001}$ 和 $\\texttt{11010}$ 的 Jaccard 相似度为 $2/4$。\n\n对于每头奶牛，输出她的位串与每头奶牛（包括她自己）的位串的 Jaccard 相似度之和，对 $10^9+7$ 取模。具体地说，如果总和等于一个有理数 $a/b$，其中 $a$ 和 $b$ 是互质的整数，则输出范围 $[0,10^9+7)$ 内的唯一整数 $x$，使得 $bx-a$ 被 $10^9+7$ 整除。", "inputFormat": "输入的第一行包含 $N$ 和 $K$。\n\n以下 $N$ 行每行包含一个整数 $i\\in (0,2^K)$，表示一头奶牛分配到了 $i$ 的 $K$ 位二进制表示。", "outputFormat": "对于每头奶牛输出一行，包含所求的总和，对 $10^9+7$ 取模。\n", "hint": "奶牛们分配到了以下的位串：$[\\texttt{01}, \\texttt{01}, \\texttt{10}, \\texttt{11}]$。\n\n对于第一头奶牛，总和为 $\\text{sim}(1,1)+\\text{sim}(1,1)+\\text{sim}(1,2)+\\text{sim}(1,3)=1+1+0+1/2\\equiv 500000006\\pmod{10^9+7}$。\n\n第二头奶牛的位串与第一头奶牛相同，所以她的总和也与第一头奶牛相同。\n\n对于第三头奶牛，总和为 $\\text{sim}(2,1)+\\text{sim}(2,1)+\\text{sim}(2,2)+\\text{sim}(2,3)=0+0+1+1/2\\equiv 500000005\\pmod{10^9+7}$。\n\n- 测试点 $2\\sim 15$：对于每一个 $K\\in \\{10,15,16,17,18,19,20\\}$ 有两个测试点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24DEC] All Pairs Similarity P", "background": "", "description": "**注意：本题的内存限制为 512MB，通常限制的 2 倍。**\n\nFarmer John 的 $N$（$1\\le N\\le 5\\cdot 10^5$）头奶牛都被分配了一个长度为 $K$ 的非全零位串（$1\\le K\\le 20$）。不同的奶牛可能被分配到相同的位串。\n\n两个位串的 Jaccard 相似度定义为它们的按位与的结果中 $\\texttt{1}$ 的数量除以它们的按位或的结果中 $\\texttt{1}$ 的数量。例如，位串 $\\texttt{11001}$ 和 $\\texttt{11010}$ 的 Jaccard 相似度为 $2/4$。\n\n对于每头奶牛，输出她的位串与每头奶牛（包括她自己）的位串的 Jaccard 相似度之和，对 $10^9+7$ 取模。具体地说，如果总和等于一个有理数 $a/b$，其中 $a$ 和 $b$ 是互质的整数，则输出范围 $[0,10^9+7)$ 内的唯一整数 $x$，使得 $bx-a$ 被 $10^9+7$ 整除。", "inputFormat": "输入的第一行包含 $N$ 和 $K$。\n\n以下 $N$ 行每行包含一个整数 $i\\in (0,2^K)$，表示一头奶牛分配到了 $i$ 的 $K$ 位二进制表示。", "outputFormat": "对于每头奶牛输出一行，包含所求的总和，对 $10^9+7$ 取模。\n", "hint": "奶牛们分配到了以下的位串：$[\\texttt{01}, \\texttt{01}, \\texttt{10}, \\texttt{11}]$。\n\n对于第一头奶牛，总和为 $\\text{sim}(1,1)+\\text{sim}(1,1)+\\text{sim}(1,2)+\\text{sim}(1,3)=1+1+0+1/2\\equiv 500000006\\pmod{10^9+7}$。\n\n第二头奶牛的位串与第一头奶牛相同，所以她的总和也与第一头奶牛相同。\n\n对于第三头奶牛，总和为 $\\text{sim}(2,1)+\\text{sim}(2,1)+\\text{sim}(2,2)+\\text{sim}(2,3)=0+0+1+1/2\\equiv 500000005\\pmod{10^9+7}$。\n\n- 测试点 $2\\sim 15$：对于每一个 $K\\in \\{10,15,16,17,18,19,20\\}$ 有两个测试点。", "locale": "zh-CN"}}}
{"pid": "P11459", "type": "P", "difficulty": 6, "samples": [["1 4\nMOOO\n10 20 30 40", "0\n20\n50\n90"], ["3 4\nOOOO\n50 40 30 20", "40"], ["2 20\nOOOMOMOOOMOOOMMMOMOO\n44743602 39649528 94028117 50811780 97338107 30426846 94909807 22669835 78498782 18004278 16633124 24711234 90542888 88490759 12851185 74589289 54413775 21184626 97688928 10497142", "0\n0\n0\n0\n0\n12851185\n35521020\n60232254\n99881782\n952304708"], ["3 20\nOOOMOMOOOMOOOMMMOMOO\n44743602 39649528 94028117 50811780 97338107 30426846 94909807 22669835 78498782 18004278 16633124 24711234 90542888 88490759 12851185 74589289 54413775 21184626 97688928 10497142", "0\n0\n0\n44743602\n119332891\n207066974"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2024", "动态规划优化", "凸包"], "title": "[USACO24DEC] It's Mooin' Time P", "background": "", "description": "**注意：本题的时间限制为 3 秒，通常限制的 1.5 倍。**\n\nBessie 有一个长度为 $N$（$1\\le N\\le 3\\cdot 10^5$）的字符串，仅由字符 M 和 O 组成。对于字符串中的每个位置 $i$，需要花费 $c_i$ 来将该位置上的字符修改为另一种字符（$1\\le c_i\\le 10^8$）。\n\nBessie 认为，如果字符串包含更多长度为 $L$（$1\\le L\\le \\min(N, 3)$）的哞叫会看起来更好。一个长度为 $L$ 的哞叫指的是一个 M 后面跟着 $L-1$ 个 O。\n\n对于从 $1$ 到 $\\lfloor N/L\\rfloor$ 的每一个正整数 $k$，计算将字符串修改至包含至少 $k$ 个等于长度为 $L$ 的哞叫的子串的最小花费。", "inputFormat": "输入的第一行包含 $L$ 和 $N$。\n\n下一行包含 Bessie 的长为 $N$ 的字符串，仅由字符 M 和 O 组成。\n\n下一行包含空格分隔的整数 $c_1\\dots c_N$。", "outputFormat": "输出 $\\lfloor N/L\\rfloor$ 行，依次包含每一个 $k$ 的答案。\n", "hint": "- 测试点 $5$：$L=3, N\\le 5000$。\n- 测试点 $6$：$L=1$。\n- 测试点 $7\\sim 10$：$L=2$。\n- 测试点 $11\\sim 18$：$L=3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24DEC] It's Mooin' Time P", "background": "", "description": "**注意：本题的时间限制为 3 秒，通常限制的 1.5 倍。**\n\nBessie 有一个长度为 $N$（$1\\le N\\le 3\\cdot 10^5$）的字符串，仅由字符 M 和 O 组成。对于字符串中的每个位置 $i$，需要花费 $c_i$ 来将该位置上的字符修改为另一种字符（$1\\le c_i\\le 10^8$）。\n\nBessie 认为，如果字符串包含更多长度为 $L$（$1\\le L\\le \\min(N, 3)$）的哞叫会看起来更好。一个长度为 $L$ 的哞叫指的是一个 M 后面跟着 $L-1$ 个 O。\n\n对于从 $1$ 到 $\\lfloor N/L\\rfloor$ 的每一个正整数 $k$，计算将字符串修改至包含至少 $k$ 个等于长度为 $L$ 的哞叫的子串的最小花费。", "inputFormat": "输入的第一行包含 $L$ 和 $N$。\n\n下一行包含 Bessie 的长为 $N$ 的字符串，仅由字符 M 和 O 组成。\n\n下一行包含空格分隔的整数 $c_1\\dots c_N$。", "outputFormat": "输出 $\\lfloor N/L\\rfloor$ 行，依次包含每一个 $k$ 的答案。\n", "hint": "- 测试点 $5$：$L=3, N\\le 5000$。\n- 测试点 $6$：$L=1$。\n- 测试点 $7\\sim 10$：$L=2$。\n- 测试点 $11\\sim 18$：$L=3$。", "locale": "zh-CN"}}}
{"pid": "P11460", "type": "P", "difficulty": 7, "samples": [["3 4\n0\n1\n1 1\n2\n0 2\n2 3", "2\n0\n1"], ["9 11\n2\n0 5\n6 9\n3\n0 5\n6 9\n1 0\n4\n0 5\n6 9\n1 0\n4 7\n5\n0 5\n6 9\n1 0\n4 7\n2 6\n6\n0 5\n6 9\n1 0\n4 7\n2 6\n9 3\n7\n0 5\n6 9\n1 0\n4 7\n2 6\n9 3\n5 2\n8\n0 5\n6 9\n1 0\n4 7\n2 6\n9 3\n5 2\n7 4\n9\n0 5\n6 9\n1 0\n4 7\n2 6\n9 3\n5 2\n7 4\n3 1\n10\n0 5\n6 9\n1 0\n4 7\n2 6\n9 3\n5 2\n7 4\n3 1\n8 10", "6\n6\n1\n1\n1\n1\n1\n1\n1"], ["10 11\n0\n1\n3 8\n2\n3 8\n5 7\n3\n3 8\n5 7\n4 2\n4\n3 8\n5 7\n4 2\n10 6\n5\n3 8\n5 7\n4 2\n10 6\n8 10\n6\n3 8\n5 7\n4 2\n10 6\n8 10\n1 9\n7\n3 8\n5 7\n4 2\n10 6\n8 10\n1 9\n7 5\n8\n3 8\n5 7\n4 2\n10 6\n8 10\n1 9\n7 5\n2 3\n9\n3 8\n5 7\n4 2\n10 6\n8 10\n1 9\n7 5\n2 3\n6 0", "160\n20\n8\n7\n2\n1\n1\n1\n1\n1"], ["5 987\n3\n654 321\n543 210\n432 106\n2\n654 321\n543 210\n1\n654 321\n1\n0 493\n0", "0\n538184948\n693625420\n932738155\n251798971"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "2024", "分类讨论"], "title": "[USACO24DEC] Maximize Minimum Difference P", "background": "", "description": "**注意：本题的时间限制为 4 秒，通常限制的 2 倍。**\n\n哞！你被给定了一个整数 $N$（$2\\le N\\le 2000$）。考虑 $[0,1,2\\dots, N-1]$ 的所有排列 $p=[p_0,p_1,\\dots, p_{N-1}]$。令 $f(p)=\\min_{i=0}^{N-2}|p_i-p_{i+1}|$ 表示 $p$ 中任意两个连续元素之间的最小绝对差值，并令 $S$ 表示所有达到 $f(p)$ 最大可能值的 $p$ 的集合。\n\n你还被给定了 $K$（$0\\le K\\le N$）个限制，形式为 $p_i=j$（$0\\le i,j<N$）。计算 $S$ 中满足所有限制的排列数量，对 $10^9+7$ 取模。", "inputFormat": "输入的第一行包含 $T$ 和 $N$（$1\\le TN\\le 2\\cdot 10^4$），表示你需要求解 $T$ 个独立的测试用例，每个测试用例指定一组不同的限制。\n\n每个测试用例的第一行包含 $K$，以下 $K$ 行，每行包含 $i$ 和 $j$。输入保证\n\n相同的 $i$ 在同一测试用例中不会出现超过一次。\n相同的 $j$ 在同一测试用例中不会出现超过一次。", "outputFormat": "对于每个测试用例输出一行，包含答案模 $10^9+7$ 的余数。\n", "hint": "样例 1 解释：\n\n$f(p)$ 的最大值为 $2$，且 $S=\\{[2,0,3,1], [1,3,0,2]\\}$。\n\n样例 2 解释：\n\n$p=[5, 0, 6, 1, 7, 2, 9, 4, 10, 3, 8]$ 在所有测试用例中都应当被计算在内。\n\n\n样例 3 解释：\n\n$p=[4, 9, 3, 8, 2, 7, 0, 5, 10, 1, 6]$ 在所有测试用例中都应当被计算在内。\n\n样例 4 解释：\n\n\n确保输出答案对 $10^9+7$ 取模。\n\n- 测试点 $5$：$N=15$。\n- 测试点 $6$：$N=2000$。\n- 测试点 $7\\sim 9$：对于所有测试用例，均存在限制 $p_0=\\lfloor N/2\\rfloor$。\n- 测试点 $10\\sim 13$：对于所有测试用例，均存在某个限制 $p_i = j$，其中 $j$ 等于 $\\lfloor N/2\\rfloor$。\n- 测试点 $14\\sim 20$：没有额外限制。\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24DEC] Maximize Minimum Difference P", "background": "", "description": "**注意：本题的时间限制为 4 秒，通常限制的 2 倍。**\n\n哞！你被给定了一个整数 $N$（$2\\le N\\le 2000$）。考虑 $[0,1,2\\dots, N-1]$ 的所有排列 $p=[p_0,p_1,\\dots, p_{N-1}]$。令 $f(p)=\\min_{i=0}^{N-2}|p_i-p_{i+1}|$ 表示 $p$ 中任意两个连续元素之间的最小绝对差值，并令 $S$ 表示所有达到 $f(p)$ 最大可能值的 $p$ 的集合。\n\n你还被给定了 $K$（$0\\le K\\le N$）个限制，形式为 $p_i=j$（$0\\le i,j<N$）。计算 $S$ 中满足所有限制的排列数量，对 $10^9+7$ 取模。", "inputFormat": "输入的第一行包含 $T$ 和 $N$（$1\\le TN\\le 2\\cdot 10^4$），表示你需要求解 $T$ 个独立的测试用例，每个测试用例指定一组不同的限制。\n\n每个测试用例的第一行包含 $K$，以下 $K$ 行，每行包含 $i$ 和 $j$。输入保证\n\n相同的 $i$ 在同一测试用例中不会出现超过一次。\n相同的 $j$ 在同一测试用例中不会出现超过一次。", "outputFormat": "对于每个测试用例输出一行，包含答案模 $10^9+7$ 的余数。\n", "hint": "样例 1 解释：\n\n$f(p)$ 的最大值为 $2$，且 $S=\\{[2,0,3,1], [1,3,0,2]\\}$。\n\n样例 2 解释：\n\n$p=[5, 0, 6, 1, 7, 2, 9, 4, 10, 3, 8]$ 在所有测试用例中都应当被计算在内。\n\n\n样例 3 解释：\n\n$p=[4, 9, 3, 8, 2, 7, 0, 5, 10, 1, 6]$ 在所有测试用例中都应当被计算在内。\n\n样例 4 解释：\n\n\n确保输出答案对 $10^9+7$ 取模。\n\n- 测试点 $5$：$N=15$。\n- 测试点 $6$：$N=2000$。\n- 测试点 $7\\sim 9$：对于所有测试用例，均存在限制 $p_0=\\lfloor N/2\\rfloor$。\n- 测试点 $10\\sim 13$：对于所有测试用例，均存在某个限制 $p_i = j$，其中 $j$ 等于 $\\lfloor N/2\\rfloor$。\n- 测试点 $14\\sim 20$：没有额外限制。\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11461", "type": "P", "difficulty": 1, "samples": [["2013", "No"], ["2024", "Yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "Good Luck & Have Fun", "background": "> 欢迎报考东北大学**秦皇岛**分校", "description": "众所不周知，NEUQ 第一届图灵杯在 $2013$ 至 $2014$ 学年开始线下举办，并且之后每学年举办一届。\n\n但众所周知，从第七届图灵杯开始，NEUQ 面向全国高校举行图灵杯线上同步赛，然而由于一些因素，第十届图灵杯并没有举行线上同步赛。\n\n现在给定一个正整数 $x$，现在会长 @BrotherCall 想知道 $x$ 至 $x + 1$ 学年举办的图灵杯有没有线上同步赛。\n\n如果有则输出 `Yes`，没有则输出 `No`。\n\n\n", "inputFormat": "一行一个整数 $x$。", "outputFormat": "输出 `Yes` 或 `No`，含义如题目描述所示。", "hint": "$2013 \\le x \\le 2024$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Good Luck & Have Fun", "background": "> 欢迎报考东北大学**秦皇岛**分校", "description": "众所不周知，NEUQ 第一届图灵杯在 $2013$ 至 $2014$ 学年开始线下举办，并且之后每学年举办一届。\n\n但众所周知，从第七届图灵杯开始，NEUQ 面向全国高校举行图灵杯线上同步赛，然而由于一些因素，第十届图灵杯并没有举行线上同步赛。\n\n现在给定一个正整数 $x$，现在会长 @BrotherCall 想知道 $x$ 至 $x + 1$ 学年举办的图灵杯有没有线上同步赛。\n\n如果有则输出 `Yes`，没有则输出 `No`。\n\n\n", "inputFormat": "一行一个整数 $x$。", "outputFormat": "输出 `Yes` 或 `No`，含义如题目描述所示。", "hint": "$2013 \\le x \\le 2024$。", "locale": "zh-CN"}}}
{"pid": "P11462", "type": "P", "difficulty": 2, "samples": [["4 8\n2 1 10 10\n4 9 5 2\n", "2050.0000"], ["10 19\n1 10 3 3 1 10 2 7 8 6\n3 2 1 2 7 9 7 6 4 7\n", "3544.4444\n"], ["8 18\n4 6 4 1 3 8 9 3\n6 9 6 7 5 9 8 3\n", "1822.2222\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "huaijiao 要加学", "background": "天天网瘾的 huaijiao 绩点已经大残了，为了稳住绩点，huaijiao 决定加学。", "description": "期末考试一共有 $n$ 门课程，huaijiao 需要在有限时间内尽可能合理地安排速通计划，来让自己的绩点最大化。\n\n已知第 $i$ 门课程的学分 $c_i$ 和难度系数 $k_i$，huaijiao 如果花费 $x$ 天来速通第 $i$ 门课程，那么他将取得的成绩 $w_i = \\min(1, \\displaystyle\\frac{x}{k_i}) \\times 100$。\n\nhuaijiao 最后的总成绩 $W = \\sum_{i=1}^{n} (w_i \\times c_i)$。\n\nhuaijiao 现在一点没学，距离期末考试只剩下 $M$ 天，每天 huaijiao 只能专心学一门，请你帮帮他最大化他的总成绩。", "inputFormat": "第一行两个正整数 $n, M$，分别表示总共有多少门课程和距离期末考试还剩下多少天。\n\n第二行 $n$ 个正整数，表示每门课程的学分：$c_1,c_2,\\cdots,c_n$。\n\n第三行 $n$ 个正整数，表示每门课程的难度：$k_1,k_2,\\cdots,k_n$。", "outputFormat": "输出一个实数，保留四位小数，表示最大的总成绩。", "hint": "$1 \\leq n \\leq 1000$，$1 \\leq M \\leq 1000$，$1 \\leq c_i \\leq 10$，$1 \\leq k_i \\leq 10$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "huaijiao 要加学", "background": "天天网瘾的 huaijiao 绩点已经大残了，为了稳住绩点，huaijiao 决定加学。", "description": "期末考试一共有 $n$ 门课程，huaijiao 需要在有限时间内尽可能合理地安排速通计划，来让自己的绩点最大化。\n\n已知第 $i$ 门课程的学分 $c_i$ 和难度系数 $k_i$，huaijiao 如果花费 $x$ 天来速通第 $i$ 门课程，那么他将取得的成绩 $w_i = \\min(1, \\displaystyle\\frac{x}{k_i}) \\times 100$。\n\nhuaijiao 最后的总成绩 $W = \\sum_{i=1}^{n} (w_i \\times c_i)$。\n\nhuaijiao 现在一点没学，距离期末考试只剩下 $M$ 天，每天 huaijiao 只能专心学一门，请你帮帮他最大化他的总成绩。", "inputFormat": "第一行两个正整数 $n, M$，分别表示总共有多少门课程和距离期末考试还剩下多少天。\n\n第二行 $n$ 个正整数，表示每门课程的学分：$c_1,c_2,\\cdots,c_n$。\n\n第三行 $n$ 个正整数，表示每门课程的难度：$k_1,k_2,\\cdots,k_n$。", "outputFormat": "输出一个实数，保留四位小数，表示最大的总成绩。", "hint": "$1 \\leq n \\leq 1000$，$1 \\leq M \\leq 1000$，$1 \\leq c_i \\leq 10$，$1 \\leq k_i \\leq 10$。\n", "locale": "zh-CN"}}}
{"pid": "P11463", "type": "P", "difficulty": 3, "samples": [["3\n3 0 3\n5 1 2\n5 1 7", "3 2 1\n4 1 2 5 3\n3 5 2 1 4"], ["5\n7 0 1\n7 0 2\n7 0 3\n7 0 4\n7 0 5", "4 1 2 3 5 6 7\n4 1 2 5 6 7 3\n5 4 1 2 6 7 3\n5 4 1 6 7 3 2\n6 5 4 1 7 3 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "N角进攻", "background": "t1e 在篮球课上学习了三角进攻的传球战术，他由此联想到了 $n$ 角进攻，并产生了一些疑问。", "description": "$n$ 角进攻由排成一排的 $n$ 个人发起，初始时球员从左到右依次标号为 $1,2,\\cdots, n$，且篮球初始在队伍正中间的 $\\frac{n + 1}{2}$ 号球员手中（保证 $n$ 为奇数）。\n\n- 第 $1$ 次传球，正中间的球员可以选择一个方向（左或右），将篮球传递到该方向上距离他最近的球员手中，传球后，正中间的球员从队列中移出，并重新在队列的最左边或最右边插入（与传球方向保持一致）。\n\n- 对于之后的传球，当前处在队列正中间的球员必须选择与上次传递相反的方向，传球后依然是正中间的球员从队列中移出，并重新在队列的最左边或最右边插入（与传球方向保持一致）。\n\n例如，以下是 $n = 3$，初始时中间球员向左边传球，经过 $3$ 次传球后的情况：\n\n```\n第 0 次传球后 : 1 2 3 （接下来 2 号球员向左传球）\n第 1 次传球后 : 2 1 3 （接下来 1 号球员向右传球）\n第 2 次传球后 : 2 3 1 （接下来 3 号球员向左传球）\n第 3 次传球后 : 3 2 1 \n```\n\n现在 t1e 想知道有 $n$ 名球员，初始时正中间球员向方向 $x$ 传球（$x = 0$ 代表左，$x = 1$ 代表右），经过 $k$ 次传球之后的局面。\n\n\n", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行三个整数，分别代表 $n, x, k$。", "outputFormat": "对于每组数据：\n\n输出一个 $1$ 到 $n$ 的排列，代表 $k$ 次传球后的最终状态。", "hint": "$1 \\le T \\le 200$，$3 \\le n,\\sum n \\le 2\\times 10^5$，$x \\in \\{0, 1\\}$，$0\\le k \\le 10^{18}$，保证 $n$ 是奇数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "N角进攻", "background": "t1e 在篮球课上学习了三角进攻的传球战术，他由此联想到了 $n$ 角进攻，并产生了一些疑问。", "description": "$n$ 角进攻由排成一排的 $n$ 个人发起，初始时球员从左到右依次标号为 $1,2,\\cdots, n$，且篮球初始在队伍正中间的 $\\frac{n + 1}{2}$ 号球员手中（保证 $n$ 为奇数）。\n\n- 第 $1$ 次传球，正中间的球员可以选择一个方向（左或右），将篮球传递到该方向上距离他最近的球员手中，传球后，正中间的球员从队列中移出，并重新在队列的最左边或最右边插入（与传球方向保持一致）。\n\n- 对于之后的传球，当前处在队列正中间的球员必须选择与上次传递相反的方向，传球后依然是正中间的球员从队列中移出，并重新在队列的最左边或最右边插入（与传球方向保持一致）。\n\n例如，以下是 $n = 3$，初始时中间球员向左边传球，经过 $3$ 次传球后的情况：\n\n```\n第 0 次传球后 : 1 2 3 （接下来 2 号球员向左传球）\n第 1 次传球后 : 2 1 3 （接下来 1 号球员向右传球）\n第 2 次传球后 : 2 3 1 （接下来 3 号球员向左传球）\n第 3 次传球后 : 3 2 1 \n```\n\n现在 t1e 想知道有 $n$ 名球员，初始时正中间球员向方向 $x$ 传球（$x = 0$ 代表左，$x = 1$ 代表右），经过 $k$ 次传球之后的局面。\n\n\n", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行三个整数，分别代表 $n, x, k$。", "outputFormat": "对于每组数据：\n\n输出一个 $1$ 到 $n$ 的排列，代表 $k$ 次传球后的最终状态。", "hint": "$1 \\le T \\le 200$，$3 \\le n,\\sum n \\le 2\\times 10^5$，$x \\in \\{0, 1\\}$，$0\\le k \\le 10^{18}$，保证 $n$ 是奇数。", "locale": "zh-CN"}}}
{"pid": "P11464", "type": "P", "difficulty": 3, "samples": [["5 3\n2 2 2\n2 3 1\n2 3 1\n2 3 1\n1 1 1", "1"], ["5 5\n0 0 2 2 2\n3 3 2 2 2\n3 3 3 2 2\n1 2 2 2 4\n1 1 1 2 4", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "支配剧场", "background": "> May all the beauty be blessed. ", "description": "布洛妮娅和符华在寻找琪亚娜的途中，被支配之律者困在了支配剧场的高塔回廊之中。布洛妮娅敏锐地发现，虚无回廊是由一些支配之律者生成的积木构成的，只要击碎其中一些积木，就能解除空间的限制，让她们逃出高塔回廊。\n\n具体来说，整个高塔回廊可以由一张高为 $n$，宽为 $m$ 的地图表示。第 $1$ 行为空间的最高点，第 $n$ 行为空间的最低点。高塔由 $K$ 块积木堆叠而成，符华每次可以击碎高塔中任意的积木，但必须保证高塔不会倒塌（否则她们会落入虚数空间），以及击碎积木后，高塔回廊的高度不变（即不能把最顶层的积木全部击碎）。\n\n如果一块积木最底层的长度是 $L$，那么当且仅当其**最底层**与地板或者其他积木的接触面积 $L'$ 满足 $L' \\ge \\left\\lceil \\frac{L}{2} \\right\\rceil$ 时，这块积木不会失去平衡。当所有积木**都**不失去平衡时，我们认为整个高塔回廊**不会倒塌**。\n\n积木的最底层长度被定义为**积木行坐标最大的方块总个数**。例如：\n\n```\n0 1 0\n1 1 1\n0 1 0\n```\n这张图中，$1$ 号积木的最底层长度是 $1$，因为其所占的格子中，行坐标最大的只有一个格子 $(3,2)$。\n\n请帮布洛妮娅计算一下，符华最多能击碎多少个积木？", "inputFormat": "第一行两个整数 $n,m$, 表示地图范围。\n\n接下来 $n$ 行，每行 $m$ 个整数。第 $i$ 行第 $j$ 个整数 $a_{i,j}$，表示第 $i$ 行第 $j$ 列的格子属于第 $a_{i,j}$ 块积木。若 $a_{i,j} = 0$，则这个位置是空的。", "outputFormat": "一行一个整数，表示符华能击碎的最多的积木块数。", "hint": "$1\\leq n,m\\leq 30$，积木块数 $K$ 满足 $1\\leq K \\leq 15$，且保证高塔初始一定不会倒塌，同一块积木一定是一个四联通块。\n\n**【样例 1 解释】**\n\n符华可以击碎 $3$ 号积木，这不会导致高塔坍塌，也不会降低高塔的高度。可以证明没有更优的方案。\n\n**【样例 2 解释】**\n\n可以击碎 $1,3,4$ 号积木。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "支配剧场", "background": "> May all the beauty be blessed. ", "description": "布洛妮娅和符华在寻找琪亚娜的途中，被支配之律者困在了支配剧场的高塔回廊之中。布洛妮娅敏锐地发现，虚无回廊是由一些支配之律者生成的积木构成的，只要击碎其中一些积木，就能解除空间的限制，让她们逃出高塔回廊。\n\n具体来说，整个高塔回廊可以由一张高为 $n$，宽为 $m$ 的地图表示。第 $1$ 行为空间的最高点，第 $n$ 行为空间的最低点。高塔由 $K$ 块积木堆叠而成，符华每次可以击碎高塔中任意的积木，但必须保证高塔不会倒塌（否则她们会落入虚数空间），以及击碎积木后，高塔回廊的高度不变（即不能把最顶层的积木全部击碎）。\n\n如果一块积木最底层的长度是 $L$，那么当且仅当其**最底层**与地板或者其他积木的接触面积 $L'$ 满足 $L' \\ge \\left\\lceil \\frac{L}{2} \\right\\rceil$ 时，这块积木不会失去平衡。当所有积木**都**不失去平衡时，我们认为整个高塔回廊**不会倒塌**。\n\n积木的最底层长度被定义为**积木行坐标最大的方块总个数**。例如：\n\n```\n0 1 0\n1 1 1\n0 1 0\n```\n这张图中，$1$ 号积木的最底层长度是 $1$，因为其所占的格子中，行坐标最大的只有一个格子 $(3,2)$。\n\n请帮布洛妮娅计算一下，符华最多能击碎多少个积木？", "inputFormat": "第一行两个整数 $n,m$, 表示地图范围。\n\n接下来 $n$ 行，每行 $m$ 个整数。第 $i$ 行第 $j$ 个整数 $a_{i,j}$，表示第 $i$ 行第 $j$ 列的格子属于第 $a_{i,j}$ 块积木。若 $a_{i,j} = 0$，则这个位置是空的。", "outputFormat": "一行一个整数，表示符华能击碎的最多的积木块数。", "hint": "$1\\leq n,m\\leq 30$，积木块数 $K$ 满足 $1\\leq K \\leq 15$，且保证高塔初始一定不会倒塌，同一块积木一定是一个四联通块。\n\n**【样例 1 解释】**\n\n符华可以击碎 $3$ 号积木，这不会导致高塔坍塌，也不会降低高塔的高度。可以证明没有更优的方案。\n\n**【样例 2 解释】**\n\n可以击碎 $1,3,4$ 号积木。", "locale": "zh-CN"}}}
{"pid": "P11465", "type": "P", "difficulty": 3, "samples": [["3\n2 2\n3 1\n12 34\n", "12\n14\n178629506\n"]], "limits": {"time": [1000, 1000], "memory": [524288, 524288]}, "tags": ["O2优化", "逆元"], "title": "水上舞者索尼娅", "background": "2024 年 12 月 18 日，《炉石传说》31.2.2 补丁上线，水上舞者索尼娅遭到削弱。现在，在这道题目中，你打开时空之门，回到了水索被削弱前的时候。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8et35uji.png)", "description": "你的场上有 $k$ 个【水上舞者索尼娅】，你的手牌中有 $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $n$ 根）】，你有无尽的法力值，你的手牌数量没有上限。\n\n在你的场上有 $k$ 个【水上舞者索尼娅】的情况下：\n\n当你使用 $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $x$ 根）】时，你将得到：\n- $k$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $x$ 根）】。\n- $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $x-1$ 根）】。（若 $x=1$，则不会得到）\n\n当你使用 $1$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $x$ 根）】时，你将得到：\n- $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $x-1$ 根）】。（若 $x=1$，则不会得到）\n\n你一共可以使用多少次【一串香蕉】？\n\n由于答案可能很大，你只需求出答案对 $10^9+7$ 取模的余数。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行两个正整数 $n,k$。", "outputFormat": "对于每组数据：\n\n输出一行一个整数，表示答案对 $10^9+7$ 取模的余数。", "hint": "$1\\le T\\le10^5$， $1\\le n,k\\le10^9$。\n\n**【样例解释】**\n\n对于第 $1$ 组数据：\n\n场上有 $2$ 个【水上舞者索尼娅】，初始手牌中有 $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $2$ 根）】。\n\n使用：$1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $2$ 根）】。\\\n手牌：\n- $2$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $2$ 根）】。\n- $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $1$ 根）】。\n\n使用：$2$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $2$ 根）】。\\\n手牌：\n- $3$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $1$ 根）】。\n\n使用：$3$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $1$ 根）】。\\\n手牌：\n- $6$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $1$ 根）】。\n\n使用：$6$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $1$ 根）】。\\\n手牌：\n- 空\n\n共使用 $1+2+3+6=12$ 张【一串香蕉】。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "水上舞者索尼娅", "background": "2024 年 12 月 18 日，《炉石传说》31.2.2 补丁上线，水上舞者索尼娅遭到削弱。现在，在这道题目中，你打开时空之门，回到了水索被削弱前的时候。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8et35uji.png)", "description": "你的场上有 $k$ 个【水上舞者索尼娅】，你的手牌中有 $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $n$ 根）】，你有无尽的法力值，你的手牌数量没有上限。\n\n在你的场上有 $k$ 个【水上舞者索尼娅】的情况下：\n\n当你使用 $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $x$ 根）】时，你将得到：\n- $k$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $x$ 根）】。\n- $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $x-1$ 根）】。（若 $x=1$，则不会得到）\n\n当你使用 $1$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $x$ 根）】时，你将得到：\n- $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $x-1$ 根）】。（若 $x=1$，则不会得到）\n\n你一共可以使用多少次【一串香蕉】？\n\n由于答案可能很大，你只需求出答案对 $10^9+7$ 取模的余数。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行两个正整数 $n,k$。", "outputFormat": "对于每组数据：\n\n输出一行一个整数，表示答案对 $10^9+7$ 取模的余数。", "hint": "$1\\le T\\le10^5$， $1\\le n,k\\le10^9$。\n\n**【样例解释】**\n\n对于第 $1$ 组数据：\n\n场上有 $2$ 个【水上舞者索尼娅】，初始手牌中有 $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $2$ 根）】。\n\n使用：$1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $2$ 根）】。\\\n手牌：\n- $2$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $2$ 根）】。\n- $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $1$ 根）】。\n\n使用：$2$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $2$ 根）】。\\\n手牌：\n- $3$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $1$ 根）】。\n\n使用：$3$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $1$ 根）】。\\\n手牌：\n- $6$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $1$ 根）】。\n\n使用：$6$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $1$ 根）】。\\\n手牌：\n- 空\n\n共使用 $1+2+3+6=12$ 张【一串香蕉】。", "locale": "zh-CN"}}}
{"pid": "P11466", "type": "P", "difficulty": 3, "samples": [["3 2 2\n", "6\n1 1 1\n3 1 1\n2 1 2\n2 2 1\n1 2 2\n3 2 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化"], "title": "透明立方体", "background": "NIT 很喜欢观察透明的立方体。", "description": "有一个透明的立方体，设它的长宽高分别为 $n,m,k$（$n\\ge m\\ge k$）。\n\n立方体中共有 $n\\times m\\times k$ 个 $1\\times1\n\\times1$ 的小立方体。每个小立方体可由其在三维空间中的坐标 $(a,b,c)$ 表示（$1\\le a\\le n$，$1\\le b\\le m$，$1\\le c\\le k$）。\n\n现将立方体的一部分染黑，我们可以选择一些 $1\\times1\\times1$ 的小立方体将其染黑。\n\n一个立方体变得不透明，当且仅当从正面，侧面，顶面观察立方体，立方体均不再有透明的地方。\n\n你需要求出最少染黑多少个 $1\\times1\\times1$ 的小立方体才能使得立方体变得不透明，并给出方案。\n\n若有多个染色数最小的方案，给出任意一个可行方案即可。", "inputFormat": "一行三个正整数，表示 $n,m,k$。", "outputFormat": "第一行一个整数表示最小的染色数 $x$。\n\n接下来 $x$ 行每行三个正整数 $a,b,c$，表示我们将立方体中 $(a,b,c)$ 这个小立方体染黑了。\n\n你需要保证 $1\\leq a\\leq n$，$1\\leq b\\leq m$，$1\\leq c\\leq k$。", "hint": "$1\\le k\\le m\\le n\\le 50$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "透明立方体", "background": "NIT 很喜欢观察透明的立方体。", "description": "有一个透明的立方体，设它的长宽高分别为 $n,m,k$（$n\\ge m\\ge k$）。\n\n立方体中共有 $n\\times m\\times k$ 个 $1\\times1\n\\times1$ 的小立方体。每个小立方体可由其在三维空间中的坐标 $(a,b,c)$ 表示（$1\\le a\\le n$，$1\\le b\\le m$，$1\\le c\\le k$）。\n\n现将立方体的一部分染黑，我们可以选择一些 $1\\times1\\times1$ 的小立方体将其染黑。\n\n一个立方体变得不透明，当且仅当从正面，侧面，顶面观察立方体，立方体均不再有透明的地方。\n\n你需要求出最少染黑多少个 $1\\times1\\times1$ 的小立方体才能使得立方体变得不透明，并给出方案。\n\n若有多个染色数最小的方案，给出任意一个可行方案即可。", "inputFormat": "一行三个正整数，表示 $n,m,k$。", "outputFormat": "第一行一个整数表示最小的染色数 $x$。\n\n接下来 $x$ 行每行三个正整数 $a,b,c$，表示我们将立方体中 $(a,b,c)$ 这个小立方体染黑了。\n\n你需要保证 $1\\leq a\\leq n$，$1\\leq b\\leq m$，$1\\leq c\\leq k$。", "hint": "$1\\le k\\le m\\le n\\le 50$。", "locale": "zh-CN"}}}
{"pid": "P11467", "type": "P", "difficulty": 4, "samples": [["4\n1 1 1\n1\n6 1 2\n1 1 4 5 1 4\n2 1 3\n1 1\n1 3 2\n1", "4\n7\n-1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "网瘾竞赛篇之 generals 大法好", "background": "", "description": "t1e 同学沉迷于打 generals 的 1v1 模式，他将游戏简化为以下内容：\n\n初始时 t1e 有一座城堡，每回合结束时会生产 $x$ 单位的兵力，他的对手也有一座城堡，每回合结束时会生产 $y$ 单位的兵力，初始时（第 $0$ 回合）双方的兵力都为 $0$。\n\n有 $n$ 座其他城堡可以被 t1e 占领，t1e 每个回合开始时可以攻占**最多** $1$ 个城堡，占领第 $i$ 个城堡需要消耗 $a_i$ 单位的兵力，从占领后的下一个回合开始，该城堡每回合结束时为 t1e 生产 $1$ 个单位的兵力。\n\nt1e 同学想知道最早在第多少个回合，他的兵力能超过对手的兵力。\n\n如果永远无法超过，输出 $-1$。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行输入三个整数，分别代表 $n, x, y$。\n\n第二行 $n$ 个整数代表 $a_i$。", "outputFormat": "对于每组数据：\n\n一行一个整数，代表 t1e 的兵力超过对手兵力的最小回合数。\n\n如果永远无法超过，输出 $-1$。", "hint": "对于第一组数据，t1e 的最优操作过程如下：\n| 回合 | 回合结束时 t1e 的兵力      | 回合结束时对手的兵力 |\n| :----: | :----------------------------:| :--------------------: |\n| 0    | 0                     | 0                    |\n| 1    | 1                     | 1                    |\n| 2    | 1                     | 2                    |\n| 3    | 3                     | 3                    |\n| 4    | 5                     | 4                    |\n\n注意：t1e 在第 $2$ 回合开始时占领了 $1$ 号城堡。\n\n$1\\le T\\le 100$，$1 \\le n, \\sum n \\le 2\\times 10^{5}$，$1 \\le x, y, a_i \\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "网瘾竞赛篇之 generals 大法好", "background": "", "description": "t1e 同学沉迷于打 generals 的 1v1 模式，他将游戏简化为以下内容：\n\n初始时 t1e 有一座城堡，每回合结束时会生产 $x$ 单位的兵力，他的对手也有一座城堡，每回合结束时会生产 $y$ 单位的兵力，初始时（第 $0$ 回合）双方的兵力都为 $0$。\n\n有 $n$ 座其他城堡可以被 t1e 占领，t1e 每个回合开始时可以攻占**最多** $1$ 个城堡，占领第 $i$ 个城堡需要消耗 $a_i$ 单位的兵力，从占领后的下一个回合开始，该城堡每回合结束时为 t1e 生产 $1$ 个单位的兵力。\n\nt1e 同学想知道最早在第多少个回合，他的兵力能超过对手的兵力。\n\n如果永远无法超过，输出 $-1$。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行输入三个整数，分别代表 $n, x, y$。\n\n第二行 $n$ 个整数代表 $a_i$。", "outputFormat": "对于每组数据：\n\n一行一个整数，代表 t1e 的兵力超过对手兵力的最小回合数。\n\n如果永远无法超过，输出 $-1$。", "hint": "对于第一组数据，t1e 的最优操作过程如下：\n| 回合 | 回合结束时 t1e 的兵力      | 回合结束时对手的兵力 |\n| :----: | :----------------------------:| :--------------------: |\n| 0    | 0                     | 0                    |\n| 1    | 1                     | 1                    |\n| 2    | 1                     | 2                    |\n| 3    | 3                     | 3                    |\n| 4    | 5                     | 4                    |\n\n注意：t1e 在第 $2$ 回合开始时占领了 $1$ 号城堡。\n\n$1\\le T\\le 100$，$1 \\le n, \\sum n \\le 2\\times 10^{5}$，$1 \\le x, y, a_i \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P11468", "type": "P", "difficulty": 4, "samples": [["5\n1 2\n1 3\n1 4\n1 5", "4"], ["5\n1 2\n3 1\n4 1\n5 1", "10"], ["4\n1 2\n2 3\n3 4", "10"], ["6\n1 2\n3 2\n4 3\n5 3\n6 3", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "有向树", "background": "", "description": "给定一棵 $n$ 个结点的树，将树上所有的无向边变成给定方向的有向边，求所有简单路径的长度之和。\n\n有向图中 $a_1$ 到 $a_x$ 的简单路径是形如 $a_1 \\rightarrow a_2 \\rightarrow a_3\\rightarrow \\cdots \\rightarrow a_x$ 的路径，其中 $a_1,a_2,a_3,\\cdots,a_x$ 这 $x$ 个顶点互不相同，其长度为简单路径上的有向边数量。", "inputFormat": "第一行一个整数 $n$，表示树上一共有 $n$ 个结点。\n\n接下来 $n - 1$ 行，每行两个整数 $u,v$，表示一条有向边 $u\\rightarrow v$。", "outputFormat": "一个整数，表示有向树上所有简单路径的长度之和。", "hint": "$1 \\le n \\le 2\\times 10^5$，$1\\le u, v \\le n$，保证输入数据的有向边在看作无向边时，图构成一棵树。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "有向树", "background": "", "description": "给定一棵 $n$ 个结点的树，将树上所有的无向边变成给定方向的有向边，求所有简单路径的长度之和。\n\n有向图中 $a_1$ 到 $a_x$ 的简单路径是形如 $a_1 \\rightarrow a_2 \\rightarrow a_3\\rightarrow \\cdots \\rightarrow a_x$ 的路径，其中 $a_1,a_2,a_3,\\cdots,a_x$ 这 $x$ 个顶点互不相同，其长度为简单路径上的有向边数量。", "inputFormat": "第一行一个整数 $n$，表示树上一共有 $n$ 个结点。\n\n接下来 $n - 1$ 行，每行两个整数 $u,v$，表示一条有向边 $u\\rightarrow v$。", "outputFormat": "一个整数，表示有向树上所有简单路径的长度之和。", "hint": "$1 \\le n \\le 2\\times 10^5$，$1\\le u, v \\le n$，保证输入数据的有向边在看作无向边时，图构成一棵树。", "locale": "zh-CN"}}}
{"pid": "P11469", "type": "P", "difficulty": 5, "samples": [["3\n5 3\n3 2 1\n3 1 1\n10 10\n1 2 3 4 5 6 7 8 9 10\n1 2 3 4 5 6 7 8 9 10\n2 3\n1 2 2\n1 1 1\n", "1.527360\n3.535155\n1.444444\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "矩阵加速", "期望"], "title": "校园跑", "background": "你正要进行校园跑。", "description": "校园跑软件会随机生成若干个点位，共有 $m$ 种不同的点位序列，通过第 $i$ 种点位序列的所需的最小跑动距离为 $a_i$，每次获取点位生成第 $i$ 种点位序列的概率为 $p_i$。\n\n你共有 $n$ 次获取点位的机会，每次获取点位后，你可以选择按当前点位开始跑步，也可以选择重新获取点位，如果已经没有获取点位的机会，则只能按当前点位开始跑步。\n\n你想使自己最后跑动距离的期望尽量小，求这个最小的期望。\n\n你的答案与标准答案的绝对误差或相对误差不超过 $10^{-4}$ 即视为正确。形式化的，如果你的答案是 $a$，评测用的标准答案为 $b$，那么你的答案会且仅会在 $\\frac{|a-b|}{\\max(1,|b|)}\\le10^{-4}$ 的情况下通过。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个正整数 $n,m$。\n\n第二行 $m$ 个正整数，第 $i$ 个正整数表示 $a_i$。\n\n第三行 $m$ 个正整数，设第 $i$ 个正整数为 $b_i$，这 $m$ 个正整数的和为 $s$，则 $p_i=\\frac{b_i}{s}$。", "outputFormat": "对于每组数据：\n\n输出一行一个浮点数，表示你的答案。\n\n你的答案与标准答案的绝对误差或相对误差不超过 $10^{-4}$ 即视为正确。", "hint": "$1\\le T\\le2\\times10^5$，$1\\le n,a_i\\le10^9$，$1\\le m,\\sum m\\le2\\times10^5$，$1\\le b_i\\le10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "校园跑", "background": "你正要进行校园跑。", "description": "校园跑软件会随机生成若干个点位，共有 $m$ 种不同的点位序列，通过第 $i$ 种点位序列的所需的最小跑动距离为 $a_i$，每次获取点位生成第 $i$ 种点位序列的概率为 $p_i$。\n\n你共有 $n$ 次获取点位的机会，每次获取点位后，你可以选择按当前点位开始跑步，也可以选择重新获取点位，如果已经没有获取点位的机会，则只能按当前点位开始跑步。\n\n你想使自己最后跑动距离的期望尽量小，求这个最小的期望。\n\n你的答案与标准答案的绝对误差或相对误差不超过 $10^{-4}$ 即视为正确。形式化的，如果你的答案是 $a$，评测用的标准答案为 $b$，那么你的答案会且仅会在 $\\frac{|a-b|}{\\max(1,|b|)}\\le10^{-4}$ 的情况下通过。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个正整数 $n,m$。\n\n第二行 $m$ 个正整数，第 $i$ 个正整数表示 $a_i$。\n\n第三行 $m$ 个正整数，设第 $i$ 个正整数为 $b_i$，这 $m$ 个正整数的和为 $s$，则 $p_i=\\frac{b_i}{s}$。", "outputFormat": "对于每组数据：\n\n输出一行一个浮点数，表示你的答案。\n\n你的答案与标准答案的绝对误差或相对误差不超过 $10^{-4}$ 即视为正确。", "hint": "$1\\le T\\le2\\times10^5$，$1\\le n,a_i\\le10^9$，$1\\le m,\\sum m\\le2\\times10^5$，$1\\le b_i\\le10^4$。", "locale": "zh-CN"}}}
{"pid": "P11470", "type": "P", "difficulty": 4, "samples": [["2\n2 -3\n3 -2\n1\n1 6", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "二分", "O2优化"], "title": "昆明之泪", "background": "", "description": "给定一串长度为 $n$ 的数对序列 $(x_i,y_i)$，其中 $x_i, y_i$ 都是整数。\n\n有 $m$ 次询问，每次给定一个两个整数 $a, b$，你需要先选定一个整数 $k$（注意 $k$ 可以为 $0$），然后再选定一个正整数序列 $1 \\le p_1 < p_2 < \\cdots < p_k \\le n$（若 $k = 0$ 则该序列为空），使得\n$$\n\\min\\left(a + \\sum\\limits_{i = 1}^{k} x_{p_i} , b + \\sum\\limits_{i = 1}^{k} y_{p_i}\\right)\n$$ \n\n最大，输出这个最大值。\n\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行两个整数代表 $x_i, y_i$。\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行两个整数代表每次询问的 $a, b$。", "outputFormat": "输出 $m$ 行。\n\n一行一个数字，代表符合题意的最大值。", "hint": "$1\\le n \\le 10^3$，$0\\le \\sum \\lvert x_i\\rvert \\le 10^5$，$0\\le \\lvert y_i \\rvert \\le 10^{12}$，$1\\le m \\le 2\\times 10^5$，$0\\le \\lvert a\\rvert, \\lvert b\\rvert \\le 10^{12}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "昆明之泪", "background": "", "description": "给定一串长度为 $n$ 的数对序列 $(x_i,y_i)$，其中 $x_i, y_i$ 都是整数。\n\n有 $m$ 次询问，每次给定一个两个整数 $a, b$，你需要先选定一个整数 $k$（注意 $k$ 可以为 $0$），然后再选定一个正整数序列 $1 \\le p_1 < p_2 < \\cdots < p_k \\le n$（若 $k = 0$ 则该序列为空），使得\n$$\n\\min\\left(a + \\sum\\limits_{i = 1}^{k} x_{p_i} , b + \\sum\\limits_{i = 1}^{k} y_{p_i}\\right)\n$$ \n\n最大，输出这个最大值。\n\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行两个整数代表 $x_i, y_i$。\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行两个整数代表每次询问的 $a, b$。", "outputFormat": "输出 $m$ 行。\n\n一行一个数字，代表符合题意的最大值。", "hint": "$1\\le n \\le 10^3$，$0\\le \\sum \\lvert x_i\\rvert \\le 10^5$，$0\\le \\lvert y_i \\rvert \\le 10^{12}$，$1\\le m \\le 2\\times 10^5$，$0\\le \\lvert a\\rvert, \\lvert b\\rvert \\le 10^{12}$。", "locale": "zh-CN"}}}
{"pid": "P11471", "type": "P", "difficulty": 6, "samples": [["2\n8 8\n1 2 8 1 1 2 2 1\n1 2\n1 3\n2 4\n2 5\n2 6\n4 7\n4 8\n1 1\n2 1 1\n2 1 2\n2 2 1\n2 2 2\n3 1 2 2\n4 1 2 2 1\n2 1 8\n5 2\n1 2 1 2 1\n1 2\n2 3\n3 4\n4 5\n3 1 2 1\n2 1 1", "3\n1\n2\n1\n1\n1\n0\n1\n1\n0\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["O2优化", "哈希 hashing", "离线处理"], "title": "时空轮回", "background": "", "description": "在时空中有 $n$ 个**时空节点**，有 $n-1$ 条时空通道将所有时空节点连接成一个连通块，每条时空通道连接着两个时空节点。\n\n你初始在 $1$ 号时空节点，你每次可以选择一条时空通道来穿梭到另一个时空节点，由于时空穿梭的特殊性，每条时空通道至多通过一次。\n\n每个时空节点有一个**风景**，第 $i$ 个时空节点的风景为 $a_i$。一段**风景序列**由若干个风景构成，一个长度为 $k$ 的风景序列为 $a_{i_1}a_{i_2}\\dots a_{i_k}$。你可以通过若干次时空穿梭经过若干时空节点，这些时空节点按照经过顺序构成了一个风景序列，记这个风景序列为**重现的风景**。\n\n定义一个风景序列 A 在风景序列 B 中的出现次数为：最多将风景序列 B 分为多少个连续且不相交的部分，使得风景序列 A 是每个部分的**子串**。\n\n你有 $q$ 段**留恋的风景**，每段留恋的风景是一个风景序列，记第 $i$ 段留恋的风景为 $s_i$，其长度为 $m_i$，记 $s_i$ 中的第 $j$ 个风景为 $s_{i,j}$。对于每段留恋的风景，你都需要从 $1$ 号时空节点出发进行时空穿梭，得到重现的风景，你需要求出该留恋的风景在重现的风景中的出现次数的最大值。\n\n注：\n\n- 每段留恋的风景所对应的重现的风景相互独立。\n- 原序列中任意个连续的数字组成的序列称为该序列的子串。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行 $2$ 个正整数 $n,q$。\n\n第二行 $n$ 个正整数，第 $i$ 个正整数表示 $a_i$。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$，表示 $u$ 和 $v$ 之间存在一条时空通道。\n\n接下来 $q$ 行，每行先输入一个正整数 $m_i$，然后输入 $m_i$ 个正整数，表示 $s_i$。", "outputFormat": "对于每组数据：\n\n输出 $q$ 行，表示每段留恋的风景对应的答案。", "hint": "$1\\le T\\le10^5$，$1\\le n,q,m_i\\le10^5$，$1\\le a_i,s_{i,j},u,v\\le n$，$\\sum n,\\sum q,\\sum m_i\\le10^5$。\n\n**注意本题不寻常的时空限制**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "时空轮回", "background": "", "description": "在时空中有 $n$ 个**时空节点**，有 $n-1$ 条时空通道将所有时空节点连接成一个连通块，每条时空通道连接着两个时空节点。\n\n你初始在 $1$ 号时空节点，你每次可以选择一条时空通道来穿梭到另一个时空节点，由于时空穿梭的特殊性，每条时空通道至多通过一次。\n\n每个时空节点有一个**风景**，第 $i$ 个时空节点的风景为 $a_i$。一段**风景序列**由若干个风景构成，一个长度为 $k$ 的风景序列为 $a_{i_1}a_{i_2}\\dots a_{i_k}$。你可以通过若干次时空穿梭经过若干时空节点，这些时空节点按照经过顺序构成了一个风景序列，记这个风景序列为**重现的风景**。\n\n定义一个风景序列 A 在风景序列 B 中的出现次数为：最多将风景序列 B 分为多少个连续且不相交的部分，使得风景序列 A 是每个部分的**子串**。\n\n你有 $q$ 段**留恋的风景**，每段留恋的风景是一个风景序列，记第 $i$ 段留恋的风景为 $s_i$，其长度为 $m_i$，记 $s_i$ 中的第 $j$ 个风景为 $s_{i,j}$。对于每段留恋的风景，你都需要从 $1$ 号时空节点出发进行时空穿梭，得到重现的风景，你需要求出该留恋的风景在重现的风景中的出现次数的最大值。\n\n注：\n\n- 每段留恋的风景所对应的重现的风景相互独立。\n- 原序列中任意个连续的数字组成的序列称为该序列的子串。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行 $2$ 个正整数 $n,q$。\n\n第二行 $n$ 个正整数，第 $i$ 个正整数表示 $a_i$。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$，表示 $u$ 和 $v$ 之间存在一条时空通道。\n\n接下来 $q$ 行，每行先输入一个正整数 $m_i$，然后输入 $m_i$ 个正整数，表示 $s_i$。", "outputFormat": "对于每组数据：\n\n输出 $q$ 行，表示每段留恋的风景对应的答案。", "hint": "$1\\le T\\le10^5$，$1\\le n,q,m_i\\le10^5$，$1\\le a_i,s_{i,j},u,v\\le n$，$\\sum n,\\sum q,\\sum m_i\\le10^5$。\n\n**注意本题不寻常的时空限制**。", "locale": "zh-CN"}}}
{"pid": "P11472", "type": "P", "difficulty": 6, "samples": [["2\n3\n1 2 3\n3 2 11\n5\n3 4 6 1 8\n2 4 1 9 1", "3\n14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "命运黄之瓜", "background": "![字符画](https://cdn.luogu.com.cn/upload/image_hosting/xlauqkoe.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\t什么？我弹春日影？真的假的？\n\n\t小睦头曾经在一周目说错了三句话。\n\t为了挽回大祥老师，soyo 跨越了一次又一次的 MyGO!!!!! 世界线想要撤回那三句话带来的影响。\n\t众所周知，为了让世界线变动率超过一个阈值，三句话的影响需要以栈的形式撤回。\n\n\tI. “live，挺好的。”\n\tsoyo 来到了第一个关头，此时她眼神已经变得坚毅，正欲说出“我唯独不想听到你这么说。”\n\tsoyo 运用她的惊世智慧，在 1s 内思考并说出了：“谢谢你，小睦，让我们一起变得 kirakira⭐dokidoki 吧！”\n\t并把巧克力袋温柔地还给小睦头：“这个，不需要了。”随即把黄瓜全部服用。\n\t世界变换了它的色彩，大祥老师为吉他手的短缺而发愁，喵梦也因为艺人女儿的缺席变得犹豫。\n\t但 soyo 发现脑海中 anon 说过的“一瞬一瞬化作一生”已经变得模糊。\n\n\tII. “一起去看他们的 live 吧。”\n\tsoyo 来到了第二个关头，此时她正处于红温状态，想要怒吼“为什么要弹《春日影》!”\n\tsoyo 运用她的惊世智慧，在 1s 内思考并说出了：“小灯，想要一辈子的话我们需要一直摸兜里。”\n\t世界变换了它的色彩，MyGO!!!!! 提前两个月上演了名为端程山的 live，渐渐他们的名声超过了 Afterglow。\n\t但 soyo 发现在每场 live 之后，anon 都没有再满脸兴奋地喊到“这是大成功吧！”\n\n\tIII. “我从来没有觉得玩乐队快乐过。”\n\tsoyo 来到了最终关头，此时她正想安慰伤心的小睦头“不是小睦的错哦。”\n\tsoyo 运用她的惊世智慧，在 1s 内思考并说出了：“小睦，你有为 Crychic 的复活赌上一切的觉悟吗？”\n\t世界变换了它的色彩，saki 离开后蓝发双马尾 anon 的出现唤起了众人心中美好的回忆，填补了乐队的空缺。\n\t但 soyo 发现再也没有人鼓起勇气对她说“soyo桑，要一起组乐队吗？”\n\n\tIV. “那我呢？”\n\t随着 Crychic 的不断壮大，saki 从中看到了拯救自己的商机，在 soyo 的帮助下回归并赶走了 anon。\n\t至此 soyo 挽回了大祥老师。但，一切尘埃落定后，soyo 想，那 anon 呢？\n\n\t为了解决这个两难局面，soyo 需要用夹子音欺骗自己，欺骗这个世界！\n\t为此，她需要和 anon 及 rana 一起演奏春日影，并用很大的夹子音把音乐掩盖过去。\n\n\t面对曾经发过毒誓一辈子不再弹奏的乐曲，soyo 无法干净利落地剪切掉自己的誓言。\n\t所以，面对这个问题，你才是挑战者。\n\n\tV. “欧内该......如果你不能运用你的惊世智慧在 1s 内解决这道题目的话......瓦达西！”\n", "description": "你有两个数组 $a_1,a_2,\\cdots,a_n$ 和 $b_1,b_2,\\cdots,b_n$。\n\n你可以选择任意整数 $1\\le i \\le n$，将 $a_i$ 和 $b_i$ 都变为 $0$，你可以操作任意次（可以为 $0$ 次）。\n\n你需要求出 $\\min(a_1\\oplus a_2\\oplus\\cdots\\oplus a_n,b_1\\oplus b_2\\oplus\\cdots\\oplus b_n)$ 的最大值，其中 $\\oplus$ 是按位异或运算。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，表示 $a_1,a_2,\\cdots,a_n$。\n\n第三行 $n$ 个整数，表示 $b_1,b_2,\\cdots,b_n$。", "outputFormat": "对于每组数据：\n\n输出一行一个整数表示答案。", "hint": "$1\\le T\\le2\\times10^5$，$1\\le n,\\sum n\\le2\\times 10^5$，$0\\le a_i,b_i <2^{31}$。\n\n\t你这人，满脑子都只有大家呢o(*￣︶￣*)o", "locale": "zh-CN", "translations": {"zh-CN": {"title": "命运黄之瓜", "background": "![字符画](https://cdn.luogu.com.cn/upload/image_hosting/xlauqkoe.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\t什么？我弹春日影？真的假的？\n\n\t小睦头曾经在一周目说错了三句话。\n\t为了挽回大祥老师，soyo 跨越了一次又一次的 MyGO!!!!! 世界线想要撤回那三句话带来的影响。\n\t众所周知，为了让世界线变动率超过一个阈值，三句话的影响需要以栈的形式撤回。\n\n\tI. “live，挺好的。”\n\tsoyo 来到了第一个关头，此时她眼神已经变得坚毅，正欲说出“我唯独不想听到你这么说。”\n\tsoyo 运用她的惊世智慧，在 1s 内思考并说出了：“谢谢你，小睦，让我们一起变得 kirakira⭐dokidoki 吧！”\n\t并把巧克力袋温柔地还给小睦头：“这个，不需要了。”随即把黄瓜全部服用。\n\t世界变换了它的色彩，大祥老师为吉他手的短缺而发愁，喵梦也因为艺人女儿的缺席变得犹豫。\n\t但 soyo 发现脑海中 anon 说过的“一瞬一瞬化作一生”已经变得模糊。\n\n\tII. “一起去看他们的 live 吧。”\n\tsoyo 来到了第二个关头，此时她正处于红温状态，想要怒吼“为什么要弹《春日影》!”\n\tsoyo 运用她的惊世智慧，在 1s 内思考并说出了：“小灯，想要一辈子的话我们需要一直摸兜里。”\n\t世界变换了它的色彩，MyGO!!!!! 提前两个月上演了名为端程山的 live，渐渐他们的名声超过了 Afterglow。\n\t但 soyo 发现在每场 live 之后，anon 都没有再满脸兴奋地喊到“这是大成功吧！”\n\n\tIII. “我从来没有觉得玩乐队快乐过。”\n\tsoyo 来到了最终关头，此时她正想安慰伤心的小睦头“不是小睦的错哦。”\n\tsoyo 运用她的惊世智慧，在 1s 内思考并说出了：“小睦，你有为 Crychic 的复活赌上一切的觉悟吗？”\n\t世界变换了它的色彩，saki 离开后蓝发双马尾 anon 的出现唤起了众人心中美好的回忆，填补了乐队的空缺。\n\t但 soyo 发现再也没有人鼓起勇气对她说“soyo桑，要一起组乐队吗？”\n\n\tIV. “那我呢？”\n\t随着 Crychic 的不断壮大，saki 从中看到了拯救自己的商机，在 soyo 的帮助下回归并赶走了 anon。\n\t至此 soyo 挽回了大祥老师。但，一切尘埃落定后，soyo 想，那 anon 呢？\n\n\t为了解决这个两难局面，soyo 需要用夹子音欺骗自己，欺骗这个世界！\n\t为此，她需要和 anon 及 rana 一起演奏春日影，并用很大的夹子音把音乐掩盖过去。\n\n\t面对曾经发过毒誓一辈子不再弹奏的乐曲，soyo 无法干净利落地剪切掉自己的誓言。\n\t所以，面对这个问题，你才是挑战者。\n\n\tV. “欧内该......如果你不能运用你的惊世智慧在 1s 内解决这道题目的话......瓦达西！”\n", "description": "你有两个数组 $a_1,a_2,\\cdots,a_n$ 和 $b_1,b_2,\\cdots,b_n$。\n\n你可以选择任意整数 $1\\le i \\le n$，将 $a_i$ 和 $b_i$ 都变为 $0$，你可以操作任意次（可以为 $0$ 次）。\n\n你需要求出 $\\min(a_1\\oplus a_2\\oplus\\cdots\\oplus a_n,b_1\\oplus b_2\\oplus\\cdots\\oplus b_n)$ 的最大值，其中 $\\oplus$ 是按位异或运算。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，表示 $a_1,a_2,\\cdots,a_n$。\n\n第三行 $n$ 个整数，表示 $b_1,b_2,\\cdots,b_n$。", "outputFormat": "对于每组数据：\n\n输出一行一个整数表示答案。", "hint": "$1\\le T\\le2\\times10^5$，$1\\le n,\\sum n\\le2\\times 10^5$，$0\\le a_i,b_i <2^{31}$。\n\n\t你这人，满脑子都只有大家呢o(*￣︶￣*)o", "locale": "zh-CN"}}}
{"pid": "P11473", "type": "P", "difficulty": 7, "samples": [["4 1\n0 0\n1 0\n1 1\n0 1\n1 2 1\n2 3 2\n3 4 4\n4 1 6\n1 3 5\n", "3\n"], ["4 1\n0 0\n1 0\n1 1\n0 1\n1 2 1\n2 3 2\n3 4 4\n4 1 100\n1 3 5\n", "13\n"], ["4 100\n100 0\n0 100\n100 100\n101 100\n1 2 1000000000\n1 3 1\n2 3 1\n3 4 1\n4 1 1000000000", "1008979\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "分治"], "title": "名字取好了吗", "background": "众所周知，一次签到很可能伴随着一次签退，只有同时签到和签退才算出勤。\n\n这是一道签退题，请通过这道题以证明你打了这次比赛。", "description": "在二维平面上有 $n$ 个点，第 $i$ 个点的坐标为 $(x_i,y_i)$。若对于所有 $1\\le i\\le n$，连接 $i$ 号点和 $(i\\ \\text{mod}\\ n)+1$ 号点，将构成一个凸包。\n\n平面中有 $2n-3$ 条线段，第 $i$ 条线段连接着 $u_i$ 号点和 $v_i$ 号点，其权值为 $w_i$。除了端点外，**所有线段互不相交**。\n\n当你从一个点经过若干条线段到达另一个点时（**你不能经过一个点多次**），你经过的路径上两条相邻的线段共包含三个点，这三个点构成一个三角形（可能退化为线段），在构成的若干三角形中，若某个三角形内部没有任何其他线段，则称其为**纯净三角形**。你可以在【说明/提示】部分的【题意图解】看到更详细的附带图片的解释。\n\n你从一个点经过若干条线段到达另一个点花费的代价为经过的所有线段的权值和与该路径构成的所有纯净三角形面积和的 $2k$ 倍的和，记从 $i$ 号点到 $j$ 号点所需花费的最小代价为 $f(i,j)$。\n\n形式化的，从 $i$ 号点到 $j$ 号点的过程中，设你经过的点的编号集合为 $V$，你经过的线段的编号集合为 $E$，$H(V,E)$ 表示 $V$ 与 $E$ 构成的所有纯净三角形的面积和，则 $f(i,j)$ 为 $\\sum\\limits_{x\\in E}w_x+2k\\times H(V,E)$ 的最小值。\n\n你需要求出 $\\operatorname*{xor}\\limits_{i=1}^{n}\\operatorname*{xor}\\limits_{j=i+1}^{n}f(i,j)$，即所有 $f(i,j)$ 的异或和。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $n$ 行，每行两个整数，第 $i$ 行表示 $x_i,y_i$。\n\n接下来 $2n-3$ 行，每行三个整数，第 $i$ 行表示 $u_i,v_i,w_i$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "对于 $100\\%$ 的数据，$3\\le n\\le2500$，$1\\le u_i,v_i\\le n$，$u_i\\not=v_i$，$0\\le x_i,y_i,k\\le10^6$，$0\\le w_i\\le10^9$。\n\n容易证明在题目限制下，$f(i,j)$ 总是整数。\n\n注意凸包上可能存在三点共线。\n\n**【样例 1 解释】**\n\n$f(1,2)=1$，$f(1,3)=4$，$f(1,4)=6$，$f(2,3)=2$，$f(2,4)=6$，$f(3,4)=4$，$1\\operatorname{xor}4\\operatorname{xor}6\\operatorname{xor}2\\operatorname{xor}6\\operatorname{xor}4=3$。\n\n**【样例 2 解释】**\n\n$f(1,2)=1$，$f(1,3)=4$，$f(1,4)=8$，$f(2,3)=2$，$f(2,4)=6$，$f(3,4)=4$，$1\\operatorname{xor}4\\operatorname{xor}8\\operatorname{xor}2\\operatorname{xor}6\\operatorname{xor}4=13$。\n\n**【样例 3 解释】**\n\n$f(1,2)=1000002$，$f(1,3)=1$，$f(1,4)=10002$，$f(2,3)=1$，$f(2,4)=2$，$f(3,4)=1$，$1000002\\operatorname{xor}1\\operatorname{xor}10002\\operatorname{xor}1\\operatorname{xor}2\\operatorname{xor}1=1008979$。\n\n**【题意图解】**\n![](https://cdn.luogu.com.cn/upload/image_hosting/ardn04fj.png)\n这是一个满足题目限制的凸包。\n![](https://cdn.luogu.com.cn/upload/image_hosting/loimp6mh.png)\n上图红色部分是一条从 $a_2$ 到 $a_6$ 的路径。\n![](https://cdn.luogu.com.cn/upload/image_hosting/4hatpiwj.png)\n上图红色部分是路径中前两条线段包含的三个点构成的三角形。\n![](https://cdn.luogu.com.cn/upload/image_hosting/f663eck1.png)\n如上图所示，红色三角形内部有蓝色线段的一部分，故该三角形不是纯净三角形。\n![](https://cdn.luogu.com.cn/upload/image_hosting/764v1srj.png)\n上图红色部分是路径中后两条线段包含的三个点构成的三角形。可以看到红色三角形内部没有任何其他线段，故该三角形是纯净三角形。\n\n对于这条路径，花费的代价为路径上三条线段的权值和加上后一个三角形的面积的 $2k$ 倍。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "名字取好了吗", "background": "众所周知，一次签到很可能伴随着一次签退，只有同时签到和签退才算出勤。\n\n这是一道签退题，请通过这道题以证明你打了这次比赛。", "description": "在二维平面上有 $n$ 个点，第 $i$ 个点的坐标为 $(x_i,y_i)$。若对于所有 $1\\le i\\le n$，连接 $i$ 号点和 $(i\\ \\text{mod}\\ n)+1$ 号点，将构成一个凸包。\n\n平面中有 $2n-3$ 条线段，第 $i$ 条线段连接着 $u_i$ 号点和 $v_i$ 号点，其权值为 $w_i$。除了端点外，**所有线段互不相交**。\n\n当你从一个点经过若干条线段到达另一个点时（**你不能经过一个点多次**），你经过的路径上两条相邻的线段共包含三个点，这三个点构成一个三角形（可能退化为线段），在构成的若干三角形中，若某个三角形内部没有任何其他线段，则称其为**纯净三角形**。你可以在【说明/提示】部分的【题意图解】看到更详细的附带图片的解释。\n\n你从一个点经过若干条线段到达另一个点花费的代价为经过的所有线段的权值和与该路径构成的所有纯净三角形面积和的 $2k$ 倍的和，记从 $i$ 号点到 $j$ 号点所需花费的最小代价为 $f(i,j)$。\n\n形式化的，从 $i$ 号点到 $j$ 号点的过程中，设你经过的点的编号集合为 $V$，你经过的线段的编号集合为 $E$，$H(V,E)$ 表示 $V$ 与 $E$ 构成的所有纯净三角形的面积和，则 $f(i,j)$ 为 $\\sum\\limits_{x\\in E}w_x+2k\\times H(V,E)$ 的最小值。\n\n你需要求出 $\\operatorname*{xor}\\limits_{i=1}^{n}\\operatorname*{xor}\\limits_{j=i+1}^{n}f(i,j)$，即所有 $f(i,j)$ 的异或和。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $n$ 行，每行两个整数，第 $i$ 行表示 $x_i,y_i$。\n\n接下来 $2n-3$ 行，每行三个整数，第 $i$ 行表示 $u_i,v_i,w_i$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "对于 $100\\%$ 的数据，$3\\le n\\le2500$，$1\\le u_i,v_i\\le n$，$u_i\\not=v_i$，$0\\le x_i,y_i,k\\le10^6$，$0\\le w_i\\le10^9$。\n\n容易证明在题目限制下，$f(i,j)$ 总是整数。\n\n注意凸包上可能存在三点共线。\n\n**【样例 1 解释】**\n\n$f(1,2)=1$，$f(1,3)=4$，$f(1,4)=6$，$f(2,3)=2$，$f(2,4)=6$，$f(3,4)=4$，$1\\operatorname{xor}4\\operatorname{xor}6\\operatorname{xor}2\\operatorname{xor}6\\operatorname{xor}4=3$。\n\n**【样例 2 解释】**\n\n$f(1,2)=1$，$f(1,3)=4$，$f(1,4)=8$，$f(2,3)=2$，$f(2,4)=6$，$f(3,4)=4$，$1\\operatorname{xor}4\\operatorname{xor}8\\operatorname{xor}2\\operatorname{xor}6\\operatorname{xor}4=13$。\n\n**【样例 3 解释】**\n\n$f(1,2)=1000002$，$f(1,3)=1$，$f(1,4)=10002$，$f(2,3)=1$，$f(2,4)=2$，$f(3,4)=1$，$1000002\\operatorname{xor}1\\operatorname{xor}10002\\operatorname{xor}1\\operatorname{xor}2\\operatorname{xor}1=1008979$。\n\n**【题意图解】**\n![](https://cdn.luogu.com.cn/upload/image_hosting/ardn04fj.png)\n这是一个满足题目限制的凸包。\n![](https://cdn.luogu.com.cn/upload/image_hosting/loimp6mh.png)\n上图红色部分是一条从 $a_2$ 到 $a_6$ 的路径。\n![](https://cdn.luogu.com.cn/upload/image_hosting/4hatpiwj.png)\n上图红色部分是路径中前两条线段包含的三个点构成的三角形。\n![](https://cdn.luogu.com.cn/upload/image_hosting/f663eck1.png)\n如上图所示，红色三角形内部有蓝色线段的一部分，故该三角形不是纯净三角形。\n![](https://cdn.luogu.com.cn/upload/image_hosting/764v1srj.png)\n上图红色部分是路径中后两条线段包含的三个点构成的三角形。可以看到红色三角形内部没有任何其他线段，故该三角形是纯净三角形。\n\n对于这条路径，花费的代价为路径上三条线段的权值和加上后一个三角形的面积的 $2k$ 倍。", "locale": "zh-CN"}}}
{"pid": "P11474", "type": "P", "difficulty": 2, "samples": [["4\nZagreb-Graz 15:30--23:59\nGraz-Wroclaw 10:42--19:15\nZagreb-Graz 14:13--20:19\nGraz-Wroclaw 2:25--5:00", "13:31"], ["3\nZagreb-Graz 6:05--16:40\nZagreb-Graz 20:00--21:40\nZagreb-Graz 9:56--22:36", "NEMOGUCE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #3] 公交车 / Autobus", "background": "\n译自 [COCI 2024/2025 #3](https://hsin.hr/coci/) T1。$\\texttt{1s,0.5G}$。满分为 $50$。", "description": "马尔纳先生决定前往位于波兰西南部的 Wrocław；但是从 Zagreb（他所在的城市）到 Wrocław 并没有直达的巴士线路，于是他只能经过奥地利城市 Graz 并进行换乘。\n\n马尔纳先生找到了一份在 Zagreb-Graz 和 Graz-Wrocław 之间运行的巴士时刻表，其中包含了 $n$ 趟巴士的运行信息；每趟巴士**每天**都会在特定的运行线路和特定的时间运行。具体地，对于每趟巴士，该时刻表给出了它的运行线路（Zagreb-Graz 或 Graz-Wrocław），以及它的发车时间（精确到分钟，该巴士会在该分钟初发车）和到达时间（精确到分钟，该巴士会在该分钟末到达）。\n\n换乘所需的时间可以忽略不计，即如果在下一趟巴士出发前到达换乘站点，就可以顺利换乘；但是第一趟巴士的到达时间必须**严格早于**第二趟巴士的发车时间。\n\n确定马尔纳先生从 Zagreb 到 Wrocław 所需要的最短时间；或报告不存在任何一种乘坐巴士的方案使他可以到达 Wrocław。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行先给出两个使用 $\\texttt{-}$ 连接的城市名称，表示该趟巴士运行的线路；接着给出发车时间和到达时间，格式为 $\\texttt{h:mm--h:mm}$，其中 $\\texttt{h}$ 表示小时，$\\texttt{mm}$ 表示分钟（注意，其中的分钟数始终包含两位数字；换言之，如果分钟数是个位数，那么会补上一个前导 $0$）。保证每趟巴士运行时长最多为 $24$ 小时。", "outputFormat": "如果存在一种乘坐巴士的方案使得马尔纳先生可以从 Zagreb 到达 Wrocław，那么输出一行一个字符串形如 $\\texttt{h:mm}$，表示旅程所需要的最短时间。\n\n如果不存在任何一种乘坐巴士的方案，输出一行一个字符串 $\\texttt{NEMOGUCE}$。", "hint": "### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 200$；\n- 每趟巴士运行时长最多为 $24$ 小时。\n\n\n| 子任务编号 | 特殊性质 | 得分 |\n| :-: | :-: | :-: |\n| $1$ | $n\\le 3$ | $9$ |\n| $2$ | 线路为 Zagreb-Graz 的巴士仅有恰好一趟 | $19$ |\n| $3$ | 无 | $22$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #3] 公交车 / Autobus", "background": "\n译自 [COCI 2024/2025 #3](https://hsin.hr/coci/) T1。$\\texttt{1s,0.5G}$。满分为 $50$。", "description": "马尔纳先生决定前往位于波兰西南部的 Wrocław；但是从 Zagreb（他所在的城市）到 Wrocław 并没有直达的巴士线路，于是他只能经过奥地利城市 Graz 并进行换乘。\n\n马尔纳先生找到了一份在 Zagreb-Graz 和 Graz-Wrocław 之间运行的巴士时刻表，其中包含了 $n$ 趟巴士的运行信息；每趟巴士**每天**都会在特定的运行线路和特定的时间运行。具体地，对于每趟巴士，该时刻表给出了它的运行线路（Zagreb-Graz 或 Graz-Wrocław），以及它的发车时间（精确到分钟，该巴士会在该分钟初发车）和到达时间（精确到分钟，该巴士会在该分钟末到达）。\n\n换乘所需的时间可以忽略不计，即如果在下一趟巴士出发前到达换乘站点，就可以顺利换乘；但是第一趟巴士的到达时间必须**严格早于**第二趟巴士的发车时间。\n\n确定马尔纳先生从 Zagreb 到 Wrocław 所需要的最短时间；或报告不存在任何一种乘坐巴士的方案使他可以到达 Wrocław。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行先给出两个使用 $\\texttt{-}$ 连接的城市名称，表示该趟巴士运行的线路；接着给出发车时间和到达时间，格式为 $\\texttt{h:mm--h:mm}$，其中 $\\texttt{h}$ 表示小时，$\\texttt{mm}$ 表示分钟（注意，其中的分钟数始终包含两位数字；换言之，如果分钟数是个位数，那么会补上一个前导 $0$）。保证每趟巴士运行时长最多为 $24$ 小时。", "outputFormat": "如果存在一种乘坐巴士的方案使得马尔纳先生可以从 Zagreb 到达 Wrocław，那么输出一行一个字符串形如 $\\texttt{h:mm}$，表示旅程所需要的最短时间。\n\n如果不存在任何一种乘坐巴士的方案，输出一行一个字符串 $\\texttt{NEMOGUCE}$。", "hint": "### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 200$；\n- 每趟巴士运行时长最多为 $24$ 小时。\n\n\n| 子任务编号 | 特殊性质 | 得分 |\n| :-: | :-: | :-: |\n| $1$ | $n\\le 3$ | $9$ |\n| $2$ | 线路为 Zagreb-Graz 的巴士仅有恰好一趟 | $19$ |\n| $3$ | 无 | $22$ |", "locale": "zh-CN"}}}
{"pid": "P11475", "type": "P", "difficulty": 3, "samples": [["2 2 0 0\n11\n10", "3"], ["3 3 1 0\n111\n111\n000", "4"], ["3 3 1 1\n111\n101\n011", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "枚举", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #3] 红蓝牌 / Karte", "background": "\n译自 [COCI 2024/2025 #3](https://hsin.hr/coci/) T2。$\\texttt{1s,0.5G}$。满分为 $70$。\n", "description": "在 Vito 的桌子上，有 $N$ 张编号分别为 $1\\sim N$ 的红牌和 $M$ 张编号分别为 $1\\sim M$ 的蓝牌。\n\n将一张红牌和一张蓝牌称为「一对」，给定若干个二元组 $(c,p)$。若一对牌中，红牌编号为 $c$，蓝牌编号为 $p$，则称这对牌是**好对**。\n\n一个牌堆包含若干张红牌和若干张蓝牌。定义一个牌堆的**价值** $w$ 为牌堆中选出一对，使得这个对是一个好对的方案数。\n\n令 $r$ 为牌堆中红牌的数量，$b$ 为牌堆中蓝牌的数量，定义牌堆的**强度** $\\mathrm{strength}$ 为：\n\n$$\\mathrm{strength}=w-X\\cdot r-Y\\cdot b$$\n\n其中 $X$ 和 $Y$ 是给定的常数。\n\n帮助 Vito 确定：选择若干张红牌和蓝牌构成一个牌堆，这个牌堆的最大强度为多少。注意，他也**可以一张牌都不选**（即构成一个空的牌堆）。", "inputFormat": "第一行，四个非负整数 $N,M,X,Y$。\n\n接下来 $N$ 行，每行一个长度为 $M$ 的 $\\texttt{01}$ 串，其中第 $i$ 行的字符串中第 $j$ 位为 $1$ 表示 $(i,j)$ 是好的，否则表示不是好的。", "outputFormat": "输出一行一个非负整数，表示可以构成的牌堆的最大强度。", "hint": "\n\n### 样例解释\n\n样例 $1$ 中，Vito 可以选择所有的卡牌，能产生 $3$ 个好对，牌堆的最大强度为 $3$。\n\n样例 $2$ 中，Vito 可以选择编号为 $1,2$ 的红牌和所有的蓝牌，能产生 $6$ 个好对，牌堆的最大强度为 $4$（由于选择了两张红牌，所以要将好对数减去 $2X=2$ 作为牌堆的强度）。\n\n### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 21$；\n- $0\\le X,Y\\le 30$；\n- 输入的字符串中仅包含 $0$ 和 $1$。\n\n\n| 子任务编号 | 特殊性质 | 得分 |\n| :-: | :-: | :-: |\n| $1$ | $Y=0$ | $18$ |\n| $2$ | $1\\le N,M\\le 9$ | $11$ |\n| $3$ | $1\\le N,M\\le 15$ | $24$ |\n| $4$ | 无 | $17$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #3] 红蓝牌 / Karte", "background": "\n译自 [COCI 2024/2025 #3](https://hsin.hr/coci/) T2。$\\texttt{1s,0.5G}$。满分为 $70$。\n", "description": "在 Vito 的桌子上，有 $N$ 张编号分别为 $1\\sim N$ 的红牌和 $M$ 张编号分别为 $1\\sim M$ 的蓝牌。\n\n将一张红牌和一张蓝牌称为「一对」，给定若干个二元组 $(c,p)$。若一对牌中，红牌编号为 $c$，蓝牌编号为 $p$，则称这对牌是**好对**。\n\n一个牌堆包含若干张红牌和若干张蓝牌。定义一个牌堆的**价值** $w$ 为牌堆中选出一对，使得这个对是一个好对的方案数。\n\n令 $r$ 为牌堆中红牌的数量，$b$ 为牌堆中蓝牌的数量，定义牌堆的**强度** $\\mathrm{strength}$ 为：\n\n$$\\mathrm{strength}=w-X\\cdot r-Y\\cdot b$$\n\n其中 $X$ 和 $Y$ 是给定的常数。\n\n帮助 Vito 确定：选择若干张红牌和蓝牌构成一个牌堆，这个牌堆的最大强度为多少。注意，他也**可以一张牌都不选**（即构成一个空的牌堆）。", "inputFormat": "第一行，四个非负整数 $N,M,X,Y$。\n\n接下来 $N$ 行，每行一个长度为 $M$ 的 $\\texttt{01}$ 串，其中第 $i$ 行的字符串中第 $j$ 位为 $1$ 表示 $(i,j)$ 是好的，否则表示不是好的。", "outputFormat": "输出一行一个非负整数，表示可以构成的牌堆的最大强度。", "hint": "\n\n### 样例解释\n\n样例 $1$ 中，Vito 可以选择所有的卡牌，能产生 $3$ 个好对，牌堆的最大强度为 $3$。\n\n样例 $2$ 中，Vito 可以选择编号为 $1,2$ 的红牌和所有的蓝牌，能产生 $6$ 个好对，牌堆的最大强度为 $4$（由于选择了两张红牌，所以要将好对数减去 $2X=2$ 作为牌堆的强度）。\n\n### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 21$；\n- $0\\le X,Y\\le 30$；\n- 输入的字符串中仅包含 $0$ 和 $1$。\n\n\n| 子任务编号 | 特殊性质 | 得分 |\n| :-: | :-: | :-: |\n| $1$ | $Y=0$ | $18$ |\n| $2$ | $1\\le N,M\\le 9$ | $11$ |\n| $3$ | $1\\le N,M\\le 15$ | $24$ |\n| $4$ | 无 | $17$ |", "locale": "zh-CN"}}}
{"pid": "P11476", "type": "P", "difficulty": 4, "samples": [["3\n0 0 1\n1 1 1\n0 0 1", "2\n2 3 1\n1 2 1"], ["3\n1 1 2\n2 1 1\n2 1 1", "-1"], ["4\n0 1 2 1\n2 2 2 1\n0 1 2 1\n1 1 2 1", "5\n2 2 1\n1 2 2\n2 4 1\n1 4 1\n2 3 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "Special Judge", "O2优化", "构造", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #3] 涂矩阵 / Bojanje", "background": "\n译自 [COCI 2024/2025 #3](https://hsin.hr/coci/) T3。$\\texttt{1s,0.5G}$。满分为 $90$。", "description": "\n有一个初始为全白的 $n\\times n$ 矩阵。\n\n每次操作可以选择一列 / 一行，将这一列 / 一行**覆盖**成红色 / 蓝色。\n\n给定矩阵的目标状态，试构造一组操作序列使得矩阵达到目标状态，或者报告无解。\n\n**不需要**最小化操作序列的长度，合法即可得分。\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行 $n$ 个正整数，第 $i$ 行第 $j$ 个整数 $a_{i,j}$ 描述目标状态中第 $i$ 行第 $j$ 列格子的颜色：$0$ 表示白色，$1$ 表示红色，$2$ 表示蓝色。\n", "outputFormat": "\n如果无解，输出 $-1$。\n\n否则，第一行输出一个整数 $k$，表示操作序列长度。你需要保证 $0\\le k\\le 4\\, 000$。\n\n接下来 $k$ 行，每行三个正整数 $a,b,c$，依次描述操作：\n\n- $a\\in \\{1,2\\}$：$a=1$ 代表选择的是行，$a=2$ 代表选择的是列。\n- $1\\le b\\le n$：代表选择的是第 $b$ 行（列）。\n- $c\\in \\{1,2\\}$：代表涂的是什么颜色。$1$ 表示红色，$2$ 表示蓝色。\n", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 2\\times 10^3$。\n\n\n| 子任务编号 | $k\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $2\\times 10^3$ |  A  |   $ 15 $   |  \n| $ 2 $    | $10^2$ |   |  $ 35 $   |  \n| $ 3 $    | $2\\times 10^3$  |  | $ 40 $   |\n\n- 特殊性质 A：$a_{i,j}\\in\\{0,1\\}$。\n\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #3] 涂矩阵 / Bojanje", "background": "\n译自 [COCI 2024/2025 #3](https://hsin.hr/coci/) T3。$\\texttt{1s,0.5G}$。满分为 $90$。", "description": "\n有一个初始为全白的 $n\\times n$ 矩阵。\n\n每次操作可以选择一列 / 一行，将这一列 / 一行**覆盖**成红色 / 蓝色。\n\n给定矩阵的目标状态，试构造一组操作序列使得矩阵达到目标状态，或者报告无解。\n\n**不需要**最小化操作序列的长度，合法即可得分。\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行 $n$ 个正整数，第 $i$ 行第 $j$ 个整数 $a_{i,j}$ 描述目标状态中第 $i$ 行第 $j$ 列格子的颜色：$0$ 表示白色，$1$ 表示红色，$2$ 表示蓝色。\n", "outputFormat": "\n如果无解，输出 $-1$。\n\n否则，第一行输出一个整数 $k$，表示操作序列长度。你需要保证 $0\\le k\\le 4\\, 000$。\n\n接下来 $k$ 行，每行三个正整数 $a,b,c$，依次描述操作：\n\n- $a\\in \\{1,2\\}$：$a=1$ 代表选择的是行，$a=2$ 代表选择的是列。\n- $1\\le b\\le n$：代表选择的是第 $b$ 行（列）。\n- $c\\in \\{1,2\\}$：代表涂的是什么颜色。$1$ 表示红色，$2$ 表示蓝色。\n", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 2\\times 10^3$。\n\n\n| 子任务编号 | $k\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $2\\times 10^3$ |  A  |   $ 15 $   |  \n| $ 2 $    | $10^2$ |   |  $ 35 $   |  \n| $ 3 $    | $2\\times 10^3$  |  | $ 40 $   |\n\n- 特殊性质 A：$a_{i,j}\\in\\{0,1\\}$。\n\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11477", "type": "P", "difficulty": 4, "samples": [["3 1\n1 2 3\n1 2\n3 1", "7"], ["3 2\n4 5 6\n1 1\n2 1\n3 1", "11\n11"], ["5 3\n2 5 2 2 2\n1 2 3 2\n4 3\n3 2\n5 1", "2\n8\n26"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "最近公共祖先 LCA", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #3] 林卡树 / Stablo", "background": "\n译自 [COCI 2024/2025 #3](https://hsin.hr/coci/) T4。$\\texttt{2s,0.5G}$。满分为 $120$。\n", "description": "\n给定 $n$ 个节点的有根树，根节点为 $1$。点 $i$ 的点权为 $v_i$。\n\n定义函数 \n\n$$f(y)=\\sum_{x\\in \\operatorname{subtree}(y)} \\operatorname{dist}(x,y)\\cdot v_x$$\n\n其中，$\\operatorname{subtree}(y)$ 表示 $y$ 的子树内所有点构成的集合（包括 $y$），$\\operatorname{dist}(x,y)$ 表示 $x,y$ 之间的最短路径上的边数。换言之，$f(y)$ 是 $y$ 子树内所有点的点权乘以到 $y$ 的距离求和。\n\n有 $q$ 次操作，每次操作给定两个节点 $x,y$。在一次操作中：\n\n- 将 $x$ 的所有儿子接到 $x$ 的父亲上；\n- 将 $x$ 删掉；\n- 令 $y$ 的儿子中，包含 $x$ 的为 $z$。将 $x$ 插入到 $y$ 和 $z$ 之间。\n- 求出 $f(y)$。\n\n保证 $x\\in \\operatorname{subtree}(y)$，且 $x\\neq y$。特别地，若 $y$ 是 $x$ 的父亲，则原树的形态保持不变。\n\n需要注意的是，**操作之间相互独立**。也就是说，每次操作都是在初始形态的树上操作（而不是在上一次操作的基础上操作）。\n\n", "inputFormat": "\n第一行，两个正整数 $n,q$。\n\n第二行，$n$ 个正整数 $v_1,v_2,\\cdots,v_n$。\n\n第三行，$(n-1)$ 个正整数 $p_2,\\cdots,p_n$，其中 $p_i$ 表示 $i$ 号节点的父亲。\n\n接下来 $q$ 行，每行两个正整数 $x,y$，描述一次操作。", "outputFormat": "输出 $q$ 行，每行一个正整数，表示答案。\n", "hint": "\n\n### 样例解释\n\n样例 $1$ 中，操作后，有 $\\operatorname{dist}(1,3)=1,\\operatorname{dist}(1,2)=2$。所求为 $3+2\\cdot 2=7$。\n\n### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n,q\\le 5\\times 10^5$；\n- $1\\le v_i\\le 10^6$；\n- $1\\le p_i\\lt i$；\n- $1\\le x,y\\in n$；\n- $x\\neq y$，$x\\in \\operatorname{subtree}(y)$。\n\n\n| 子任务编号 | $n,q\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $10^3$ |  |   $ 21 $   |  \n| $ 2 $    | $5\\times 10^5$ | A  |  $ 37 $   |  \n| $ 3 $    | $5\\times 10^5$ | B  |  $ 22 $   |  \n| $ 4 $    | $5\\times 10^5$ |  |  $ 40 $   |  \n\n- 特殊性质 A：树的形态是链。换言之，$p_i=i-1$。\n- 特殊性质 B：每个节点最多有 $20$ 个儿子。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #3] 林卡树 / Stablo", "background": "\n译自 [COCI 2024/2025 #3](https://hsin.hr/coci/) T4。$\\texttt{2s,0.5G}$。满分为 $120$。\n", "description": "\n给定 $n$ 个节点的有根树，根节点为 $1$。点 $i$ 的点权为 $v_i$。\n\n定义函数 \n\n$$f(y)=\\sum_{x\\in \\operatorname{subtree}(y)} \\operatorname{dist}(x,y)\\cdot v_x$$\n\n其中，$\\operatorname{subtree}(y)$ 表示 $y$ 的子树内所有点构成的集合（包括 $y$），$\\operatorname{dist}(x,y)$ 表示 $x,y$ 之间的最短路径上的边数。换言之，$f(y)$ 是 $y$ 子树内所有点的点权乘以到 $y$ 的距离求和。\n\n有 $q$ 次操作，每次操作给定两个节点 $x,y$。在一次操作中：\n\n- 将 $x$ 的所有儿子接到 $x$ 的父亲上；\n- 将 $x$ 删掉；\n- 令 $y$ 的儿子中，包含 $x$ 的为 $z$。将 $x$ 插入到 $y$ 和 $z$ 之间。\n- 求出 $f(y)$。\n\n保证 $x\\in \\operatorname{subtree}(y)$，且 $x\\neq y$。特别地，若 $y$ 是 $x$ 的父亲，则原树的形态保持不变。\n\n需要注意的是，**操作之间相互独立**。也就是说，每次操作都是在初始形态的树上操作（而不是在上一次操作的基础上操作）。\n\n", "inputFormat": "\n第一行，两个正整数 $n,q$。\n\n第二行，$n$ 个正整数 $v_1,v_2,\\cdots,v_n$。\n\n第三行，$(n-1)$ 个正整数 $p_2,\\cdots,p_n$，其中 $p_i$ 表示 $i$ 号节点的父亲。\n\n接下来 $q$ 行，每行两个正整数 $x,y$，描述一次操作。", "outputFormat": "输出 $q$ 行，每行一个正整数，表示答案。\n", "hint": "\n\n### 样例解释\n\n样例 $1$ 中，操作后，有 $\\operatorname{dist}(1,3)=1,\\operatorname{dist}(1,2)=2$。所求为 $3+2\\cdot 2=7$。\n\n### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n,q\\le 5\\times 10^5$；\n- $1\\le v_i\\le 10^6$；\n- $1\\le p_i\\lt i$；\n- $1\\le x,y\\in n$；\n- $x\\neq y$，$x\\in \\operatorname{subtree}(y)$。\n\n\n| 子任务编号 | $n,q\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $10^3$ |  |   $ 21 $   |  \n| $ 2 $    | $5\\times 10^5$ | A  |  $ 37 $   |  \n| $ 3 $    | $5\\times 10^5$ | B  |  $ 22 $   |  \n| $ 4 $    | $5\\times 10^5$ |  |  $ 40 $   |  \n\n- 特殊性质 A：树的形态是链。换言之，$p_i=i-1$。\n- 特殊性质 B：每个节点最多有 $20$ 个儿子。\n\n", "locale": "zh-CN"}}}
{"pid": "P11478", "type": "P", "difficulty": 6, "samples": [["3\n\n3\n\n1\n\n0\n\n0\n\n1\n\n1\n\n1\n\n0", "\n? 1 2\n\n? 1 3\n\n? 2 3\n\n! 2\n\n? 1 4\n\n! 4\n\n? 1 5\n\n! 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "交互题", "Special Judge", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #3] 处理器 / Procesor", "background": "\n译自 [COCI 2024/2025 #3](https://hsin.hr/coci/) T5。$\\texttt{1s,0.5G}$。满分为 $120$。\n\n为了方便测试，公开[交互库](https://www.luogu.com.cn/paste/1gl6aook)。", "description": "\n**这是一道交互题**。\n\n有一个初始时为空的数组 $a$。\n\n$n$ 次操作，第 $i$ 次操作向 $a$ 的末尾添加 $x_i$ 个整数。\n\n每次操作后，通过若干次询问，你需要找到最小的**未被标记**的整数对应的下标 $x$，并给 $a_x$ 打标记。\n\n每次询问，你可以询问两个**未被标记**的整数 $a_i,a_j$ 的大小关系。\n\n设当前数组长度为 $l$，保证 $\\forall 1\\le i\\lt j\\le l$，$a_i\\lt a_j$ 和 $a_j\\lt a_i$ **恰有一个成立**。换句话说，**保证数组内元素两两不同**。\n\n### 实现细节\n\n首先读入一个正整数 $n$。接下来依次处理 $n$ 次操作。\n\n对于第 $i$ 次操作，读入一个正整数 $x_i$，表示增加的整数数量。\n\n接下来你可以按照以下格式询问若干次：\n\n- $\\texttt{?}$ $i$ $j$：询问 $a_i,a_j$ 的大小关系。\n    - 返回 $0$，表示 $a_i\\lt a_j$；返回 $1$，表示 $a_i\\gt a_j$。\n    - 令当前数组长度为 $l$，你需要保证 $1\\le i,j\\le l$。\n    - 你需要保证 $i\\neq j$，且 $a_i,a_j$ 未被标记。\n\n\n按以下格式回答：\n\n- $\\texttt{!}$ $x$：当前数组内未被标记的最小整数为 $a_x$。\n\n**回答后立刻读入下一个整数 $x_{i+1}$，若这是最后一次操作则立刻结束程序。**\n\n**在每次询问或者回答后，都要换行并刷新缓冲区。** 刷新缓冲区的方式：C++ 中的 `std::cout.flush()`，`std::cout<<std::endl`。", "inputFormat": "\n见【实现细节】。", "outputFormat": "\n见【实现细节】。", "hint": "\n### 样例解释\n\n样例 $1$ 中，$a=[3,2,4,1,5]$。\n\n- 查询 $a_1$ 与 $a_2$：$a_1\\gt a_2$，返回 $1$；\n- 查询 $a_1$ 与 $a_3$：$a_1\\lt a_3$，返回 $0$；\n- 查询 $a_2$ 与 $a_3$：$a_2\\lt a_3$，返回 $0$。\n\n不难发现 $a_2$ 为当前未标记的最小值，所以回答 $2$。接下来继续处理剩余的两次操作。\n\n### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 40$；\n- $1\\le x_i,\\sum x_i\\le 2\\, 000$。\n- 数组内整数两两不同。\n\n### 计分方式\n\n令你的程序询问次数的最大值为 $q$。\n\n- $q\\le 2\\, 700$，得 $120$ 分。\n- $2\\, 700 \\lt q\\le 7\\, 000$，得 $75$ 分。\n- $7\\, 000 \\lt q\\le 2\\times 10^4$，得 $35$ 分。\n- $2\\times 10^4 \\lt q\\le 8\\times 10^4$，得 $15$ 分。\n- $8\\times 10^4\\lt q$，得 $0$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #3] 处理器 / Procesor", "background": "\n译自 [COCI 2024/2025 #3](https://hsin.hr/coci/) T5。$\\texttt{1s,0.5G}$。满分为 $120$。\n\n为了方便测试，公开[交互库](https://www.luogu.com.cn/paste/1gl6aook)。", "description": "\n**这是一道交互题**。\n\n有一个初始时为空的数组 $a$。\n\n$n$ 次操作，第 $i$ 次操作向 $a$ 的末尾添加 $x_i$ 个整数。\n\n每次操作后，通过若干次询问，你需要找到最小的**未被标记**的整数对应的下标 $x$，并给 $a_x$ 打标记。\n\n每次询问，你可以询问两个**未被标记**的整数 $a_i,a_j$ 的大小关系。\n\n设当前数组长度为 $l$，保证 $\\forall 1\\le i\\lt j\\le l$，$a_i\\lt a_j$ 和 $a_j\\lt a_i$ **恰有一个成立**。换句话说，**保证数组内元素两两不同**。\n\n### 实现细节\n\n首先读入一个正整数 $n$。接下来依次处理 $n$ 次操作。\n\n对于第 $i$ 次操作，读入一个正整数 $x_i$，表示增加的整数数量。\n\n接下来你可以按照以下格式询问若干次：\n\n- $\\texttt{?}$ $i$ $j$：询问 $a_i,a_j$ 的大小关系。\n    - 返回 $0$，表示 $a_i\\lt a_j$；返回 $1$，表示 $a_i\\gt a_j$。\n    - 令当前数组长度为 $l$，你需要保证 $1\\le i,j\\le l$。\n    - 你需要保证 $i\\neq j$，且 $a_i,a_j$ 未被标记。\n\n\n按以下格式回答：\n\n- $\\texttt{!}$ $x$：当前数组内未被标记的最小整数为 $a_x$。\n\n**回答后立刻读入下一个整数 $x_{i+1}$，若这是最后一次操作则立刻结束程序。**\n\n**在每次询问或者回答后，都要换行并刷新缓冲区。** 刷新缓冲区的方式：C++ 中的 `std::cout.flush()`，`std::cout<<std::endl`。", "inputFormat": "\n见【实现细节】。", "outputFormat": "\n见【实现细节】。", "hint": "\n### 样例解释\n\n样例 $1$ 中，$a=[3,2,4,1,5]$。\n\n- 查询 $a_1$ 与 $a_2$：$a_1\\gt a_2$，返回 $1$；\n- 查询 $a_1$ 与 $a_3$：$a_1\\lt a_3$，返回 $0$；\n- 查询 $a_2$ 与 $a_3$：$a_2\\lt a_3$，返回 $0$。\n\n不难发现 $a_2$ 为当前未标记的最小值，所以回答 $2$。接下来继续处理剩余的两次操作。\n\n### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 40$；\n- $1\\le x_i,\\sum x_i\\le 2\\, 000$。\n- 数组内整数两两不同。\n\n### 计分方式\n\n令你的程序询问次数的最大值为 $q$。\n\n- $q\\le 2\\, 700$，得 $120$ 分。\n- $2\\, 700 \\lt q\\le 7\\, 000$，得 $75$ 分。\n- $7\\, 000 \\lt q\\le 2\\times 10^4$，得 $35$ 分。\n- $2\\times 10^4 \\lt q\\le 8\\times 10^4$，得 $15$ 分。\n- $8\\times 10^4\\lt q$，得 $0$ 分。", "locale": "zh-CN"}}}
{"pid": "P11479", "type": "P", "difficulty": 6, "samples": [["3\n0 1\n1 2\n0 1\n0 2\n", "1\n2 1 2 0\n"], ["4\n0 1\n0 2\n0 3\n0 1\n1 2\n2 3\n", "2\n3 0 3 2\n0 2 1 2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2017", "Special Judge", "NordicOI（北欧）"], "title": "[NordicOI 2017] Subway", "background": "译自 Nordic Olympiad in Informatics 2017 [Subway](https://noi17.kattis.com/contests/vfoqp8/problems/subway4)。\n\n本题 SPJ 是搬题人自己写的，在 <https://www.luogu.com/paste/7l4p6s3h>。如果发现有误请联系搬题人。", "description": "斯德哥尔摩的地铁系统非常低效。由于城市的布局已经发生了变化，某些部分使用过度，而某些线路几乎无人使用。\n\n因此，市议会决定重建地铁系统。目前，系统由 $N$ 个车站组成，这些车站通过 $N−1$ 对轨道连接，保证任意两个车站之间都可以通过地铁到达。议会制定了一个新的计划，仍然包含相同的 $N$ 个车站，但轨道将更换为另一组 $N−1$ 条轨道（同样保证所有车站之间连通）。\n\n为了尽量减少繁忙地铁的中断，重建必须一次进行一条轨道的更换。每个周末，将关闭一条轨道并修建一条新的轨道。这意味着系统始终保留 $N−1$ 条轨道。此外，在每个周末施工后，任意两个车站之间仍需保持连通。\n\n你的任务是设计一个施工方案，使得以上条件成立，并且所需的周末数量最少。", "inputFormat": "第一行包含一个整数 $1\\leq N$。接下来的 $N−1$ 行描述当前地铁系统的轨道。每条轨道由两个以空格分隔的整数 $a$ 和 $b$ 表示，分别是轨道连接的车站编号（$0$ 到 $N−1$ 的编号，基于 $0$ 索引）。保证任意两个车站通过轨道连接是连通的。\n\n接下来的 $N−1$ 行描述新地铁系统中的轨道，格式与上述相同。", "outputFormat": "首先输出所需的周末数量 $K$。然后输出 $K$ 行，每行描述一个周末的施工情况，包含四个整数 $a_1,b_1,a_2,b_2$，表示关闭连接 $a_1$ 和 $b_1$ 的轨道，并修建连接 $a_2$ 和 $b_2$ 的轨道。", "hint": "你的解法将在一组子任务上进行评分。每个子任务包含多个测试用例。要获得子任务的分数，你的解法必须通过子任务中的所有测试用例。\n\n| 子任务 | 分数 | 限制条件     |\n| ------ | ---- | ------------ |\n| $1$    | $33$ | $N\\leq 10$   |\n| $2$    | $33$ | $N\\leq 1000$ |\n| $3$    | $34$ | $N\\leq 10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2017] Subway", "background": "译自 Nordic Olympiad in Informatics 2017 [Subway](https://noi17.kattis.com/contests/vfoqp8/problems/subway4)。\n\n本题 SPJ 是搬题人自己写的，在 <https://www.luogu.com/paste/7l4p6s3h>。如果发现有误请联系搬题人。", "description": "斯德哥尔摩的地铁系统非常低效。由于城市的布局已经发生了变化，某些部分使用过度，而某些线路几乎无人使用。\n\n因此，市议会决定重建地铁系统。目前，系统由 $N$ 个车站组成，这些车站通过 $N−1$ 对轨道连接，保证任意两个车站之间都可以通过地铁到达。议会制定了一个新的计划，仍然包含相同的 $N$ 个车站，但轨道将更换为另一组 $N−1$ 条轨道（同样保证所有车站之间连通）。\n\n为了尽量减少繁忙地铁的中断，重建必须一次进行一条轨道的更换。每个周末，将关闭一条轨道并修建一条新的轨道。这意味着系统始终保留 $N−1$ 条轨道。此外，在每个周末施工后，任意两个车站之间仍需保持连通。\n\n你的任务是设计一个施工方案，使得以上条件成立，并且所需的周末数量最少。", "inputFormat": "第一行包含一个整数 $1\\leq N$。接下来的 $N−1$ 行描述当前地铁系统的轨道。每条轨道由两个以空格分隔的整数 $a$ 和 $b$ 表示，分别是轨道连接的车站编号（$0$ 到 $N−1$ 的编号，基于 $0$ 索引）。保证任意两个车站通过轨道连接是连通的。\n\n接下来的 $N−1$ 行描述新地铁系统中的轨道，格式与上述相同。", "outputFormat": "首先输出所需的周末数量 $K$。然后输出 $K$ 行，每行描述一个周末的施工情况，包含四个整数 $a_1,b_1,a_2,b_2$，表示关闭连接 $a_1$ 和 $b_1$ 的轨道，并修建连接 $a_2$ 和 $b_2$ 的轨道。", "hint": "你的解法将在一组子任务上进行评分。每个子任务包含多个测试用例。要获得子任务的分数，你的解法必须通过子任务中的所有测试用例。\n\n| 子任务 | 分数 | 限制条件     |\n| ------ | ---- | ------------ |\n| $1$    | $33$ | $N\\leq 10$   |\n| $2$    | $33$ | $N\\leq 1000$ |\n| $3$    | $34$ | $N\\leq 10^5$ |", "locale": "zh-CN"}}}
{"pid": "P11480", "type": "P", "difficulty": 5, "samples": [["6", "5"], ["13", "9"], ["68", "42"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2017", "NordicOI（北欧）"], "title": "[NordicOI 2017] Yule Lads", "background": "译自 Nordic Olympiad in Informatics 2017 [Yule Lads](https://noi17.kattis.com/contests/vfoqp8/problems/yule)。", "description": "冰岛的孩子们非常幸运。他们有 $N$ 个圣诞老人！这些圣诞老人被称为尤拉兄弟（Yule Lads）。在圣诞节前的 $N$ 个晚上，他们中的一个会来到镇上，给乖孩子送上小礼物，而顽皮的孩子则得到一个土豆。\n\n在冰岛的一个小镇上，有一条街道上有 $N$ 栋房子，编号依次为 $1$ 到 $N$。每栋房子都用圣诞灯装饰得非常漂亮，起初这些灯全都亮着。\n\n在圣诞节前的每个晚上，会有一位尤拉兄弟光临这条街道。圣诞节前第 $K$ 个晚上来访的尤拉兄弟非常喜欢数字 $K$，因此他只会拜访编号可以被 $K$ 整除的房子。此外，尤拉兄弟们很顽皮，会切换每个被拜访房子的圣诞灯的状态（即如果灯亮着则关掉，灯关着则打开）。\n\n然而，有一些尤拉兄弟生病了，没有来到镇上。在圣诞节当天，除了第一栋房子以外，所有房子的灯都亮着。问有多少尤拉兄弟来到了镇上？", "inputFormat": "第一行输入一个正整数 $N$，表示尤拉兄弟的数量以及街道上的房子数量。\n\n", "outputFormat": "输出一个整数，表示来到镇上的尤拉兄弟的数量。可以假设只有一种可能的情况会导致所有房子的灯亮着，除了第 $1$ 号房子的灯。", "hint": "考虑 $N=6$ 的情况，街道上有六栋房子，圣诞节前的每个晚上发生以下情况（假设没有尤拉兄弟生病）：\n\n- 圣诞节前第 $6$ 天：尤拉兄弟会关闭第 $6$ 号房子的灯。\n- 圣诞节前第 $5$ 天：尤拉兄弟会关闭第 $5$ 号房子的灯。\n- 圣诞节前第 $4$ 天：尤拉兄弟会关闭第 $4$ 号房子的灯。\n- 圣诞节前第 $3$ 天：尤拉兄弟会关闭第 $3$ 号房子的灯，并打开第 $6$ 号房子的灯。\n- 圣诞节前第 $2$ 天：尤拉兄弟会关闭第 $2$ 和第 $6$ 号房子的灯，并打开第 $4$ 号房子的灯。\n- 圣诞节前第 $1$ 天：尤拉兄弟会关闭第 $1$ 和第 $4$ 号房子的灯，并打开第 $2$、$3$、$5$ 和 $6$ 号房子的灯。\n\n然而，第 $4$ 号房子的灯在圣诞节当天是关闭的，与实际情况不符。\n\n如果只有原本应该在圣诞节前第 $4$ 天到来的尤拉兄弟生病了，那么所有灯都将亮着，除了第 $1$ 号房子的灯。正确答案是 $5$：来到镇上的尤拉兄弟是在第 $6$、$5$、$3$、$2$ 和 $1$ 天。\n\n---\n\n你的解法将在一组子任务上进行评分。每个子任务包含多个测试用例。要获得子任务的分数，你的解法必须通过子任务中的所有测试用例。\n\n| 子任务 | 分数 | 限制条件            |\n| ------ | ---- | ------------------- |\n| $1$    | $15$ | $N\\leq 13$          |\n| $2$    | $10$ | $N\\leq 1000$        |\n| $3$    | $12$ | $N\\leq 10^5$        |\n| $4$    | $13$ | $N\\leq 5\\cdot 10^6$ |\n| $5$    | $15$ | $N\\leq 10^8$        |\n| $6$    | $14$ | $N\\leq 10^{10}$     |\n| $7$    | $21$ | $N\\leq 10^{13}$     |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2017] Yule Lads", "background": "译自 Nordic Olympiad in Informatics 2017 [Yule Lads](https://noi17.kattis.com/contests/vfoqp8/problems/yule)。", "description": "冰岛的孩子们非常幸运。他们有 $N$ 个圣诞老人！这些圣诞老人被称为尤拉兄弟（Yule Lads）。在圣诞节前的 $N$ 个晚上，他们中的一个会来到镇上，给乖孩子送上小礼物，而顽皮的孩子则得到一个土豆。\n\n在冰岛的一个小镇上，有一条街道上有 $N$ 栋房子，编号依次为 $1$ 到 $N$。每栋房子都用圣诞灯装饰得非常漂亮，起初这些灯全都亮着。\n\n在圣诞节前的每个晚上，会有一位尤拉兄弟光临这条街道。圣诞节前第 $K$ 个晚上来访的尤拉兄弟非常喜欢数字 $K$，因此他只会拜访编号可以被 $K$ 整除的房子。此外，尤拉兄弟们很顽皮，会切换每个被拜访房子的圣诞灯的状态（即如果灯亮着则关掉，灯关着则打开）。\n\n然而，有一些尤拉兄弟生病了，没有来到镇上。在圣诞节当天，除了第一栋房子以外，所有房子的灯都亮着。问有多少尤拉兄弟来到了镇上？", "inputFormat": "第一行输入一个正整数 $N$，表示尤拉兄弟的数量以及街道上的房子数量。\n\n", "outputFormat": "输出一个整数，表示来到镇上的尤拉兄弟的数量。可以假设只有一种可能的情况会导致所有房子的灯亮着，除了第 $1$ 号房子的灯。", "hint": "考虑 $N=6$ 的情况，街道上有六栋房子，圣诞节前的每个晚上发生以下情况（假设没有尤拉兄弟生病）：\n\n- 圣诞节前第 $6$ 天：尤拉兄弟会关闭第 $6$ 号房子的灯。\n- 圣诞节前第 $5$ 天：尤拉兄弟会关闭第 $5$ 号房子的灯。\n- 圣诞节前第 $4$ 天：尤拉兄弟会关闭第 $4$ 号房子的灯。\n- 圣诞节前第 $3$ 天：尤拉兄弟会关闭第 $3$ 号房子的灯，并打开第 $6$ 号房子的灯。\n- 圣诞节前第 $2$ 天：尤拉兄弟会关闭第 $2$ 和第 $6$ 号房子的灯，并打开第 $4$ 号房子的灯。\n- 圣诞节前第 $1$ 天：尤拉兄弟会关闭第 $1$ 和第 $4$ 号房子的灯，并打开第 $2$、$3$、$5$ 和 $6$ 号房子的灯。\n\n然而，第 $4$ 号房子的灯在圣诞节当天是关闭的，与实际情况不符。\n\n如果只有原本应该在圣诞节前第 $4$ 天到来的尤拉兄弟生病了，那么所有灯都将亮着，除了第 $1$ 号房子的灯。正确答案是 $5$：来到镇上的尤拉兄弟是在第 $6$、$5$、$3$、$2$ 和 $1$ 天。\n\n---\n\n你的解法将在一组子任务上进行评分。每个子任务包含多个测试用例。要获得子任务的分数，你的解法必须通过子任务中的所有测试用例。\n\n| 子任务 | 分数 | 限制条件            |\n| ------ | ---- | ------------------- |\n| $1$    | $15$ | $N\\leq 13$          |\n| $2$    | $10$ | $N\\leq 1000$        |\n| $3$    | $12$ | $N\\leq 10^5$        |\n| $4$    | $13$ | $N\\leq 5\\cdot 10^6$ |\n| $5$    | $15$ | $N\\leq 10^8$        |\n| $6$    | $14$ | $N\\leq 10^{10}$     |\n| $7$    | $21$ | $N\\leq 10^{13}$     |", "locale": "zh-CN"}}}
{"pid": "P11481", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2017", "交互题", "通信题", "Ad-hoc", "NordicOI（北欧）"], "title": "[NordicOI 2017] IP over Avian Carriers（通信题无法评测）", "background": "译自 Nordic Olympiad in Informatics 2017 [IP over Avian Carriers](https://noi17.kattis.com/contests/vfoqp8/problems/avian)。\n\n本题为通信题，目前无法评测。\n", "description": "如果你住在芬兰的树林深处，远离所有城市，互联网连接的质量可能会非常不稳定。这对参与在线的程序设计竞赛来说显然是不利的，尤其是大多数竞赛都在线上进行。\n\n为了提高互联网连接的可靠性，互联网工程任务组于 1990 年 4 月 1 日发布了一个名为 \"IP over Avian Carriers\" 的标准。这个标准描述了如何使用鸟类来传递互联网流量。鸟类不会因为电缆断裂或停电等问题而中断连接，因此可以作为标准互联网连接的有效备用选项。然而，鸟类也有其他问题。当发送多只带有数据的鸟时，数据可能不会按顺序到达，并且某些鸟在途中可能丢失。\n\n你的任务是实现两个程序，为这种鸟类传输协议添加一些冗余：一个编码器和一个解码器。编码器会接收一个由 $C\\cdot N$ 个比特组成的字符串 $X$（即由 $\\tt 0$ 和 $\\tt 1$ 组成的数字，且 $N\\gt 1$），并生成一个 $K$ 个元素的向量 $S_0,S_1,\\dots,S_{K−1}$，其中每个 $S_i$ 是一个长度为 $N$ 的字符串。\n\n之后，解码器会接收从该向量中选取的 $C$ 个元素的子集。然后它应输出原始的比特串 $X$。\n\n# 编码器\n\n你的编码器需要实现函数 `vector<string> encode(int C, int K, int N, string X)`。它会接收任务描述中的整数 $C$、$K$、$N$ 和比特串 $X$。\n\n$X$ 的长度为 $C\\cdot N$，并且仅包含字符 $\\tt{0}$ 和 $\\tt 1$。\n\n编码器应输出一个包含 $K$ 个字符串的向量。每个字符串的长度应为 $N$，并且仅包含字符 $\\tt 0$ 和 $\\tt 1$。\n\n# 解码器\n\n解码器需要实现函数 `string decode(int C, int K, int N, vector<string> Y, vector<int> I)`。它会接收任务描述中的整数 $C$、$K$、$N$，以及由编码器输出的字符串 $S$ 中选取的子集 $Y$。\n\n向量 $Y$ 和 $I$ 的长度均为 $C$。$I$ 包含编码器输出的字符串的零基索引，使得 $Y_i$ 是 $S_{I_i}$ 的值（即 $Y_i=S_{I_i}$）。\n\n解码器应输出长度为 $C\\cdot N$ 的原始比特串 $X$。\n\n# 实现\n\n你可以使用 C++、Java、Python 或 C# 实现你的解决方案。所需实现的模板可以从提供的链接中下载。注意，你只需提交以下文件之一：avian.cpp、avian.java、avian.py 或 avian.cs。\n\n注意：\n\n- 在此任务中，你不应使用标准输入或标准输出（即通过终端读取或写入）。否则可能会导致混乱的错误。\n- 此外，在运行解码器之前，程序会被重启。因此，任何全局状态都会被清除。\n", "inputFormat": "包含的示例评测程序会读取以下格式的输入：\n\n第 $1$ 行：$C,K,N$\n\n第 $2$ 行：$X$\n\n第 $3$ 行：$I_0,I_1,\\dots,I_{C-1}$", "outputFormat": "示例评测程序会输出 `decode` 函数的返回值。", "hint": "你的解决方案将在一组子任务上进行评分。每个子任务包含多个测试用例。要获得子任务的分数，你的解决方案必须通过子任务中的所有测试用例。\n\n| 子任务 | 分数 | 限制条件                                    |\n| ------ | ---- | ------------------------------------------- |\n| $1$    | $30$ | $C=3$，$K=4$，$1\\lt N\\leq 1000$             |\n| $2$    | $25$ | $C=2$，$K=4$，$1\\lt N\\leq 1000$，$N$ 为偶数 |\n| $3$    | $20$ | $C=2$，$K=4$，$1\\lt N\\leq 1000$             |\n| $4$    | $25$ | $C=3$，$K=5$，$1\\lt N\\leq 1000$             |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2017] IP over Avian Carriers（通信题无法评测）", "background": "译自 Nordic Olympiad in Informatics 2017 [IP over Avian Carriers](https://noi17.kattis.com/contests/vfoqp8/problems/avian)。\n\n本题为通信题，目前无法评测。\n", "description": "如果你住在芬兰的树林深处，远离所有城市，互联网连接的质量可能会非常不稳定。这对参与在线的程序设计竞赛来说显然是不利的，尤其是大多数竞赛都在线上进行。\n\n为了提高互联网连接的可靠性，互联网工程任务组于 1990 年 4 月 1 日发布了一个名为 \"IP over Avian Carriers\" 的标准。这个标准描述了如何使用鸟类来传递互联网流量。鸟类不会因为电缆断裂或停电等问题而中断连接，因此可以作为标准互联网连接的有效备用选项。然而，鸟类也有其他问题。当发送多只带有数据的鸟时，数据可能不会按顺序到达，并且某些鸟在途中可能丢失。\n\n你的任务是实现两个程序，为这种鸟类传输协议添加一些冗余：一个编码器和一个解码器。编码器会接收一个由 $C\\cdot N$ 个比特组成的字符串 $X$（即由 $\\tt 0$ 和 $\\tt 1$ 组成的数字，且 $N\\gt 1$），并生成一个 $K$ 个元素的向量 $S_0,S_1,\\dots,S_{K−1}$，其中每个 $S_i$ 是一个长度为 $N$ 的字符串。\n\n之后，解码器会接收从该向量中选取的 $C$ 个元素的子集。然后它应输出原始的比特串 $X$。\n\n# 编码器\n\n你的编码器需要实现函数 `vector<string> encode(int C, int K, int N, string X)`。它会接收任务描述中的整数 $C$、$K$、$N$ 和比特串 $X$。\n\n$X$ 的长度为 $C\\cdot N$，并且仅包含字符 $\\tt{0}$ 和 $\\tt 1$。\n\n编码器应输出一个包含 $K$ 个字符串的向量。每个字符串的长度应为 $N$，并且仅包含字符 $\\tt 0$ 和 $\\tt 1$。\n\n# 解码器\n\n解码器需要实现函数 `string decode(int C, int K, int N, vector<string> Y, vector<int> I)`。它会接收任务描述中的整数 $C$、$K$、$N$，以及由编码器输出的字符串 $S$ 中选取的子集 $Y$。\n\n向量 $Y$ 和 $I$ 的长度均为 $C$。$I$ 包含编码器输出的字符串的零基索引，使得 $Y_i$ 是 $S_{I_i}$ 的值（即 $Y_i=S_{I_i}$）。\n\n解码器应输出长度为 $C\\cdot N$ 的原始比特串 $X$。\n\n# 实现\n\n你可以使用 C++、Java、Python 或 C# 实现你的解决方案。所需实现的模板可以从提供的链接中下载。注意，你只需提交以下文件之一：avian.cpp、avian.java、avian.py 或 avian.cs。\n\n注意：\n\n- 在此任务中，你不应使用标准输入或标准输出（即通过终端读取或写入）。否则可能会导致混乱的错误。\n- 此外，在运行解码器之前，程序会被重启。因此，任何全局状态都会被清除。\n", "inputFormat": "包含的示例评测程序会读取以下格式的输入：\n\n第 $1$ 行：$C,K,N$\n\n第 $2$ 行：$X$\n\n第 $3$ 行：$I_0,I_1,\\dots,I_{C-1}$", "outputFormat": "示例评测程序会输出 `decode` 函数的返回值。", "hint": "你的解决方案将在一组子任务上进行评分。每个子任务包含多个测试用例。要获得子任务的分数，你的解决方案必须通过子任务中的所有测试用例。\n\n| 子任务 | 分数 | 限制条件                                    |\n| ------ | ---- | ------------------------------------------- |\n| $1$    | $30$ | $C=3$，$K=4$，$1\\lt N\\leq 1000$             |\n| $2$    | $25$ | $C=2$，$K=4$，$1\\lt N\\leq 1000$，$N$ 为偶数 |\n| $3$    | $20$ | $C=2$，$K=4$，$1\\lt N\\leq 1000$             |\n| $4$    | $25$ | $C=3$，$K=5$，$1\\lt N\\leq 1000$             |", "locale": "zh-CN"}}}
{"pid": "P11482", "type": "P", "difficulty": 3, "samples": [["4 2 1 2\nabcb\ncc\nc a\n3\n12", "c\nb"], ["4 2 2 2\ncbaa\nac\nb c\na a\n7\n7", "c\nc"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "NordicOI（北欧）"], "title": "[NordicOI 2021] Pearls", "background": "翻译自 [NordicOI2021](https://github.com/nordicolympiad/nordic-olympiad-2021) 的 [A](https://github.com/nordicolympiad/nordic-olympiad-2021/blob/main/pdf/pearls.pdf) 题。\n\n\n[NordicOI2021 官网](https://noi2021.nio.no/)，需要使用 Wayback machine 查看。", "description": "Laura 想要用两条项链 $A$ 和 $B$ 的颜色组合来制作一条新的项链，每个项链的颜色由字符串表示。而 Laura 希望避免 $k$ 个“丑陋”的颜色对。\n\nLaura 以一种非常独特的方式制作她的新项链。对于项链 $A$ 中的每一颗珍珠，她都将其与项链 $B$ 中每一颗珍珠进行组合。具体步骤如下：\n\n对于项链 $A$ 中的每一颗珍珠 $A_i$，她会查看项链 $B$ 中的每一颗珍珠 $B_j$。如果组合 $A_i,B_j$ 不是丑陋的组合，她就在新项链的末尾放置颜色为 $A_i$ 和 $B_j$ 的珍珠。\n\n帮助 Laura 确定她的项链的样子。有 $q$ 次询问，对于第 $i$ 次询问，有一个整数 $t_i$ 表示询问新项链中第 $t_i$ 个珠子的颜色。", "inputFormat": "第一行有四个整数 $la,lb,k,q$。其中 $la$ 表示 $A$ 项链的长度，$lb$ 表示 $B$ 项链的长度，$k$ 表示丑陋对的个数，$q$ 表示询问的次数。\n\n第二行有一个字符串 $a$，表示 $A$ 项链的颜色，只存在小写字母。\n\n第三行有一个字符串 $b$，表示 $B$ 项链的颜色，只存在小写字母。\n\n往后 $k$ 行每行两个小写字母，用空格隔开。表示每个丑陋对。\n\n再往后 $q$ 行表示询问。注意，项链的下标从 $0$ 开始。\n", "outputFormat": "你需要输出 $q$ 行，对于第 $i$ 行，你需要输出一个小写字母代表第 $i$ 次询问的答案。", "hint": "| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $0$ | $7$ | $la=1$ |\n| Subtask $1$ | $9$ | $la,lb \\le 1000$ |\n| Subtask $2$ | $13$ | $k=0$ |\n| Subtask $3$ | $15$ | $q \\le 10$ |\n| Subtask $4$ | $56$ | 没有特殊限制 |\n\n对于 $100 \\%$ 的数据，$1 \\le la,lb \\le 200000$，$1 \\le q \\le 100000$，$0 \\le k \\le 26^2$。\n\n保证所有询问合法。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2021] Pearls", "background": "翻译自 [NordicOI2021](https://github.com/nordicolympiad/nordic-olympiad-2021) 的 [A](https://github.com/nordicolympiad/nordic-olympiad-2021/blob/main/pdf/pearls.pdf) 题。\n\n\n[NordicOI2021 官网](https://noi2021.nio.no/)，需要使用 Wayback machine 查看。", "description": "Laura 想要用两条项链 $A$ 和 $B$ 的颜色组合来制作一条新的项链，每个项链的颜色由字符串表示。而 Laura 希望避免 $k$ 个“丑陋”的颜色对。\n\nLaura 以一种非常独特的方式制作她的新项链。对于项链 $A$ 中的每一颗珍珠，她都将其与项链 $B$ 中每一颗珍珠进行组合。具体步骤如下：\n\n对于项链 $A$ 中的每一颗珍珠 $A_i$，她会查看项链 $B$ 中的每一颗珍珠 $B_j$。如果组合 $A_i,B_j$ 不是丑陋的组合，她就在新项链的末尾放置颜色为 $A_i$ 和 $B_j$ 的珍珠。\n\n帮助 Laura 确定她的项链的样子。有 $q$ 次询问，对于第 $i$ 次询问，有一个整数 $t_i$ 表示询问新项链中第 $t_i$ 个珠子的颜色。", "inputFormat": "第一行有四个整数 $la,lb,k,q$。其中 $la$ 表示 $A$ 项链的长度，$lb$ 表示 $B$ 项链的长度，$k$ 表示丑陋对的个数，$q$ 表示询问的次数。\n\n第二行有一个字符串 $a$，表示 $A$ 项链的颜色，只存在小写字母。\n\n第三行有一个字符串 $b$，表示 $B$ 项链的颜色，只存在小写字母。\n\n往后 $k$ 行每行两个小写字母，用空格隔开。表示每个丑陋对。\n\n再往后 $q$ 行表示询问。注意，项链的下标从 $0$ 开始。\n", "outputFormat": "你需要输出 $q$ 行，对于第 $i$ 行，你需要输出一个小写字母代表第 $i$ 次询问的答案。", "hint": "| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $0$ | $7$ | $la=1$ |\n| Subtask $1$ | $9$ | $la,lb \\le 1000$ |\n| Subtask $2$ | $13$ | $k=0$ |\n| Subtask $3$ | $15$ | $q \\le 10$ |\n| Subtask $4$ | $56$ | 没有特殊限制 |\n\n对于 $100 \\%$ 的数据，$1 \\le la,lb \\le 200000$，$1 \\le q \\le 100000$，$0 \\le k \\le 26^2$。\n\n保证所有询问合法。\n", "locale": "zh-CN"}}}
{"pid": "P11483", "type": "P", "difficulty": 5, "samples": [["9 10 0 7\n1 0\n2 0\n0 3\n5 4\n4 3\n4 6\n3 6\n6 7\n7 3\n7 8", "4\n1\n2\n5\n8"], ["8 8 2 3\n0 1\n0 2\n1 2\n2 3\n3 4\n3 5\n4 5\n6 7", "2\n6\n7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "NordicOI（北欧）"], "title": "[NordicOI 2021] The Elk", "background": "翻译自 [NordicOI2021](https://github.com/nordicolympiad/nordic-olympiad-2021) 的 [B](https://github.com/nordicolympiad/nordic-olympiad-2021/blob/main/pdf/elk.pdf?sid_for_share=99125_3) 题。\n\n[NordicOI2021 官网](https://noi2021.nio.no/)，需要使用 Wayback machine 查看。", "description": "你现在在森林当中。这片森林里还有一头母牛和一只小牛。你知道，站在小牛和母牛之间是危险的。\n\n我们将森林抽象成由 $n$ 个点组成，这些点之间有 $m$ 条双向边。点的编号从 $0 \\sim n-1$，边的编号为 $0 \\sim m-1$。\n\n我们将从母牛到小牛的路径定义为一系列的点 $p_0 \\sim p_k$，使：\n\n1. $p_0$ 为母牛的位置。\n\n2. $p_k$ 为小牛的位置。\n\n3. 对于每个满足 $0 \\le i < k$，$p_i$ 和 $p_{i+1}$ 间有直接连边。\n\n4. 和点 $3$ 连接的边在不会重复出现在路径上，但是点可以重复。\n\n在这条路径上的所有的点都是危险的，因为母牛会认为你在她和小牛之间。你需要找到所有安全的点。\n\n", "inputFormat": "第一行四个整数 $n,m,A,B$，其中 $A$ 和 $B$ 分别为母牛和小牛的位置。\n\n接下来 $m$ 行，编号从 $0 \\sim m-1$，表示 $m$ 条边。每行两个整数 $u_i,v_i$，表示边的两个端点。", "outputFormat": "第一行应输出一个整数 $S$，表示安全位置的数量。\n\n接下来 $S$ 行表示安全位置的编号，你需要确保输出的 $S$ 个整数依次递增。", "hint": "| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $0$ | 10 | $n \\le 10$，$m \\le 45$ |\n| Subtask $1$ | 20 | $m=n-1$，保证图连通 |\n| Subtask $2$ | 30 | $n \\le 200$，$m \\le 500$ |\n| Subtask $3$ | 40 | 无特殊限制 |\n\n对于 $100\\%$ 的数据，$2\\le n \\le 50000$，$2 \\le m \\le 100000$。$0 \\le u_i,v_i <n$，$u_i \\neq v_i$。\n\n无重边，保证小牛和母牛连通。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2021] The Elk", "background": "翻译自 [NordicOI2021](https://github.com/nordicolympiad/nordic-olympiad-2021) 的 [B](https://github.com/nordicolympiad/nordic-olympiad-2021/blob/main/pdf/elk.pdf?sid_for_share=99125_3) 题。\n\n[NordicOI2021 官网](https://noi2021.nio.no/)，需要使用 Wayback machine 查看。", "description": "你现在在森林当中。这片森林里还有一头母牛和一只小牛。你知道，站在小牛和母牛之间是危险的。\n\n我们将森林抽象成由 $n$ 个点组成，这些点之间有 $m$ 条双向边。点的编号从 $0 \\sim n-1$，边的编号为 $0 \\sim m-1$。\n\n我们将从母牛到小牛的路径定义为一系列的点 $p_0 \\sim p_k$，使：\n\n1. $p_0$ 为母牛的位置。\n\n2. $p_k$ 为小牛的位置。\n\n3. 对于每个满足 $0 \\le i < k$，$p_i$ 和 $p_{i+1}$ 间有直接连边。\n\n4. 和点 $3$ 连接的边在不会重复出现在路径上，但是点可以重复。\n\n在这条路径上的所有的点都是危险的，因为母牛会认为你在她和小牛之间。你需要找到所有安全的点。\n\n", "inputFormat": "第一行四个整数 $n,m,A,B$，其中 $A$ 和 $B$ 分别为母牛和小牛的位置。\n\n接下来 $m$ 行，编号从 $0 \\sim m-1$，表示 $m$ 条边。每行两个整数 $u_i,v_i$，表示边的两个端点。", "outputFormat": "第一行应输出一个整数 $S$，表示安全位置的数量。\n\n接下来 $S$ 行表示安全位置的编号，你需要确保输出的 $S$ 个整数依次递增。", "hint": "| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $0$ | 10 | $n \\le 10$，$m \\le 45$ |\n| Subtask $1$ | 20 | $m=n-1$，保证图连通 |\n| Subtask $2$ | 30 | $n \\le 200$，$m \\le 500$ |\n| Subtask $3$ | 40 | 无特殊限制 |\n\n对于 $100\\%$ 的数据，$2\\le n \\le 50000$，$2 \\le m \\le 100000$。$0 \\le u_i,v_i <n$，$u_i \\neq v_i$。\n\n无重边，保证小牛和母牛连通。\n", "locale": "zh-CN"}}}
{"pid": "P11484", "type": "P", "difficulty": 5, "samples": [["2 3 1 5\n1 3\n1 2\n2 5 4\n2 4 5", "3\n1\n2\n5"], ["3 3 0 6\n1 4\n1 5\n1 3\n1 7\n2 6 7\n1 8", "3\n0\n4\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "NordicOI（北欧）"], "title": "[NordicOI 2021] Amazing Whispers", "background": "\n\n翻译自 [NordicOI2021](https://github.com/nordicolympiad/nordic-olympiad-2021) 的 [C](https://github.com/nordicolympiad/nordic-olympiad-2021/blob/main/pdf/whispers.pdf?sid_for_share=99125_3) 题。\n\n[NordicOI2021 官网](https://noi2021.nio.no/)，需要使用 Wayback machine 查看。", "description": "一群人在玩游戏。在这个游戏中，一个密语会按照以下规则在一群人之间传递：\n\n$n \\times m$ 个人被分成 $m$ 组，每组 $n$ 个人。一个密语被分成 $n$ 个不同的消息。然后消息从第 $1$ 组传到第 $2$ 组，从第 $2$ 组传到第 $3$ 组。以此类推，直到传到组 $m$，密语中的每条消息都要传递，但每个人只能知道一条消息。\n\n为了让观察的人更难追踪到信息，组 $i$ 中的每个人都会假装他们在把信息传给组 $i+1$ 中的 $n$ 个人。这些人中，只有一个人会得到信息，其余的人都未得到。这样，观察的人就不可能知道第 $i+1$ 组中哪个人收到了信息。第 $i$ 组的人已经安排好了，使第 $i+1$ 组的每个人都只能得到一条消息。\n\n当所有消息都到达第 $m$ 组时，它们将被大声朗读出来。所有的消息都被成功接收了，但是有一条被替换为了一个粗鲁的词。最初是第 $A$ 个人发送了丢失的信息，第 $B$ 个人大声读出了这个粗鲁的单词。你需要求出在哪里发生了替换。你不知道这个信息是如何传递的，你只知道有一些看起来在耳语的人（包括传递真实信息的人和用来迷惑你的人）。", "inputFormat": "第一行四个整数 $n,m,A,B$。人的编号从 $0$ 到 $(n\\times m)-1$。第 $p$ 个人在第 $\\lfloor p/n \\rfloor +1$ 组。\n\n接下来 $n \\times (m-1)$ 行，每行第一个数为 $k_i$，表示第 $i$ 个人在对多少个人耳语，接下来 $k_i$ 个数表示第 $i$ 个人分别在和谁耳语。", "outputFormat": "第一行输出一个正整数 $S$，代表可能参与替换信息的人数，接下来 $S$ 行分别是参与替换信息的人，编号从小到大输出。", "hint": "| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $0$ | 18 | $n=2$ |\n| Subtask $1$ | 16 | $m=3$，$n \\le 8$ |\n| Subtask $2$ | 19 | $m=3$ |\n| Subtask $3$ | 47 | 没有特殊限制 |\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 20$，$2 \\le m \\le 1000$。\n\n$k_i$ 的和不大于 $5000$。\n\n保证输入合法。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2021] Amazing Whispers", "background": "\n\n翻译自 [NordicOI2021](https://github.com/nordicolympiad/nordic-olympiad-2021) 的 [C](https://github.com/nordicolympiad/nordic-olympiad-2021/blob/main/pdf/whispers.pdf?sid_for_share=99125_3) 题。\n\n[NordicOI2021 官网](https://noi2021.nio.no/)，需要使用 Wayback machine 查看。", "description": "一群人在玩游戏。在这个游戏中，一个密语会按照以下规则在一群人之间传递：\n\n$n \\times m$ 个人被分成 $m$ 组，每组 $n$ 个人。一个密语被分成 $n$ 个不同的消息。然后消息从第 $1$ 组传到第 $2$ 组，从第 $2$ 组传到第 $3$ 组。以此类推，直到传到组 $m$，密语中的每条消息都要传递，但每个人只能知道一条消息。\n\n为了让观察的人更难追踪到信息，组 $i$ 中的每个人都会假装他们在把信息传给组 $i+1$ 中的 $n$ 个人。这些人中，只有一个人会得到信息，其余的人都未得到。这样，观察的人就不可能知道第 $i+1$ 组中哪个人收到了信息。第 $i$ 组的人已经安排好了，使第 $i+1$ 组的每个人都只能得到一条消息。\n\n当所有消息都到达第 $m$ 组时，它们将被大声朗读出来。所有的消息都被成功接收了，但是有一条被替换为了一个粗鲁的词。最初是第 $A$ 个人发送了丢失的信息，第 $B$ 个人大声读出了这个粗鲁的单词。你需要求出在哪里发生了替换。你不知道这个信息是如何传递的，你只知道有一些看起来在耳语的人（包括传递真实信息的人和用来迷惑你的人）。", "inputFormat": "第一行四个整数 $n,m,A,B$。人的编号从 $0$ 到 $(n\\times m)-1$。第 $p$ 个人在第 $\\lfloor p/n \\rfloor +1$ 组。\n\n接下来 $n \\times (m-1)$ 行，每行第一个数为 $k_i$，表示第 $i$ 个人在对多少个人耳语，接下来 $k_i$ 个数表示第 $i$ 个人分别在和谁耳语。", "outputFormat": "第一行输出一个正整数 $S$，代表可能参与替换信息的人数，接下来 $S$ 行分别是参与替换信息的人，编号从小到大输出。", "hint": "| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $0$ | 18 | $n=2$ |\n| Subtask $1$ | 16 | $m=3$，$n \\le 8$ |\n| Subtask $2$ | 19 | $m=3$ |\n| Subtask $3$ | 47 | 没有特殊限制 |\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 20$，$2 \\le m \\le 1000$。\n\n$k_i$ 的和不大于 $5000$。\n\n保证输入合法。\n", "locale": "zh-CN"}}}
{"pid": "P11485", "type": "P", "difficulty": 2, "samples": [["3\n2 1 2\n3 1 1\n5 1 4", "3\n0\n57"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "洛谷原创", "O2优化", "位运算", "洛谷月赛"], "title": "「Cfz Round 5」Non-breath Oblige", "background": "それぞれの好きを守るため  \n为了保护各自的喜爱之物\n\n君と防空壕で呼吸する  \n与你在防空壕中一同呼吸", "description": "给定三个整数 $n,s,t$，其中 $0 \\le s,t \\lt 2^n$。\n\n你可以进行若干次操作。每次操作，你可以选择一个非负整数 $x$ 并把 $s$ 的值修改为 $x$，但有如下要求：\n\n- 必须满足 $x<2^n$；\n- 必须满足 $s\\lor x=2^n-1$，其中 $\\lor$ 为按位或运算；\n- 你需要花费 $s\\oplus x$ 的代价，其中 $\\oplus$ 为按位异或运算。\n\n你需要求出使 $s=t$ 所需代价之和的最小值。可以证明一定可以使 $s$ 与 $t$ 相等。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入共一行，包含三个整数 $n,s,t$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示使 $s=t$ 所需代价之和的最小值。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组测试数据，由于 $1 \\cup 2 = 3$，所以可以直接将 $s$ 的值从 $1$ 修改为 $2$，此时的代价为 $1 \\oplus 2$，即 $3$。可以证明使 $s=t$ 所需代价之和的最小值为 $3$。\n\n对于第 $2$ 组测试数据，不需要进行操作即可满足 $s=t$。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 100$；\n- $1 \\le n \\le 30$；\n- $0 \\le s,t \\lt 2^n$。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（12 points）：$s=t$。\n- Subtask 1（15 points）：$n=1$。\n- Subtask 2（20 points）：$s+t=2^n-1$。\n- Subtask 3（10 points）：$t=2^n-1$。\n- Subtask 4（18 points）：$t=0$。\n- Subtask 5（25 points）：无特殊限制。", "locale": "zh-CN", "translations": {"en": {"title": "「Cfz Round 5」Non-breath Oblige", "background": "それぞれの好きを守るため  \nTo protect our respective beloved ones,  \n\n君と防空壕で呼吸する  \nWe breathe together in the air-raid shelter.", "description": "Given three integers $n, s, t$, where $0 \\le s, t < 2^n$.\n\nYou can perform several operations. In each operation, you can choose a non-negative integer $x$ and modify the value of $s$ to $x$, subject to the following conditions:\n\n- It must satisfy $x < 2^n$;\n- It must satisfy $s \\cup x = 2^n - 1$, where $\\cup$ denotes the bitwise OR operation;\n- The cost you need to pay is $s \\oplus x$, where $\\oplus$ denotes the bitwise XOR operation.\n\nYou need to find the minimum sum of costs required to make $s = t$.\n", "inputFormat": "**Each test contains multiple test cases.**\n\nThe first line of input contains a positive integer $T$, denoting the number of test cases.\n\nEach test case is given in a following line, containing three integers $n, s, t$.\n", "outputFormat": "For each test case, output a single integer on a line, representing the minimum sum of costs required to make $s = t$.\n", "hint": "#### Sample Explanation #1\n\nFor the first test case, since $1 \\cup 2 = 3$, you can directly change the value of $s$ from $1$ to $2$, with a cost of $1 \\oplus 2$, which is $3$. It can be proven that the minimum sum of costs required to make $s = t$ is $3$.\n\nFor the second test case, no operation is needed to satisfy $s = t$.\n\n#### Constraints\n\nFor all test cases, it is guaranteed that:\n\n- $1 \\le T \\le 100$;\n- $1 \\le n \\le 30$;\n- $0 \\le s, t < 2^n$.\n\n**Subtasks are used in this task.**\n\n- Subtask 0 (12 points): $s = t$.\n- Subtask 1 (15 points): $n = 1$.\n- Subtask 2 (20 points): $s + t = 2^n - 1$.\n- Subtask 3 (10 points): $t = 2^n - 1$.\n- Subtask 4 (18 points): $t = 0$.\n- Subtask 5 (25 points): No further restrictions.", "locale": "en"}, "zh-CN": {"title": "「Cfz Round 5」Non-breath Oblige", "background": "それぞれの好きを守るため  \n为了保护各自的喜爱之物\n\n君と防空壕で呼吸する  \n与你在防空壕中一同呼吸", "description": "给定三个整数 $n,s,t$，其中 $0 \\le s,t \\lt 2^n$。\n\n你可以进行若干次操作。每次操作，你可以选择一个非负整数 $x$ 并把 $s$ 的值修改为 $x$，但有如下要求：\n\n- 必须满足 $x<2^n$；\n- 必须满足 $s\\lor x=2^n-1$，其中 $\\lor$ 为按位或运算；\n- 你需要花费 $s\\oplus x$ 的代价，其中 $\\oplus$ 为按位异或运算。\n\n你需要求出使 $s=t$ 所需代价之和的最小值。可以证明一定可以使 $s$ 与 $t$ 相等。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入共一行，包含三个整数 $n,s,t$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示使 $s=t$ 所需代价之和的最小值。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组测试数据，由于 $1 \\cup 2 = 3$，所以可以直接将 $s$ 的值从 $1$ 修改为 $2$，此时的代价为 $1 \\oplus 2$，即 $3$。可以证明使 $s=t$ 所需代价之和的最小值为 $3$。\n\n对于第 $2$ 组测试数据，不需要进行操作即可满足 $s=t$。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 100$；\n- $1 \\le n \\le 30$；\n- $0 \\le s,t \\lt 2^n$。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（12 points）：$s=t$。\n- Subtask 1（15 points）：$n=1$。\n- Subtask 2（20 points）：$s+t=2^n-1$。\n- Subtask 3（10 points）：$t=2^n-1$。\n- Subtask 4（18 points）：$t=0$。\n- Subtask 5（25 points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11486", "type": "P", "difficulty": 4, "samples": [["6 2\n1 2\n3 4", "Yes\n1 5\n2 5\n3 5\n4 6\n5 6"], ["3 3\n1 2\n2 3\n1 3", "No"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "连通块", "树论", "构造", "洛谷月赛"], "title": "「Cfz Round 5」Mata rainen", "background": "题目名称意为：明年见。\n\n小 R 是一个正在上高三的女孩子。她在升入高三的暑假复习了[《种树郭橐（tuó）驼传》](https://baike.baidu.com/item/%E7%A7%8D%E6%A0%91%E9%83%AD%E6%A9%90%E9%A9%BC%E4%BC%A0)，便编出了这道与树有关的题。\n\n在把这道题目丢给出题组后，她决定把全部时间和精力投入到高考的旅程中，期待在 2025 年的暑假在算法竞赛中与大家再会。", "description": "请判断是否存在一棵树满足如下条件。若存在，请尝试给出构造。\n\n树中包含 $n$ 个结点，编号为 $1\\sim n$。另外，给定 $m$ 个点对 $(s_i,t_i)$，要求树上这 $m$ 条从点 $s_i$ 到点 $t_i$ 的路径覆盖每条边**恰好**一次 $^\\dagger$。\n\n**若你正确判断了是否有解，但不会构造出这棵树，也可以获得一定的分数，详见【评分方式】。**\n\n$\\dagger$ 称从点 $s$ 到点 $t$ 的路径覆盖一条边 $(u,v)$，当且仅当边 $(u,v)$ 在点 $s$ 到点 $t$ 的最短路径上。", "inputFormat": "第一行包含两个整数 $n,m$，表示这棵树的点数和给出的点对数。\n\n接下来 $m$ 行，每行两个整数 $s_i,t_i$，表示一个点对。", "outputFormat": "第一行输出一个字符串 `Yes` 或 `No`（大小写不敏感），表示是否有解。\n\n若有解，继续输出 $n-1$ 行，每行包含两个整数 $u_i,v_i$，描述一条边。**你需要保证 $\\bm{1\\le u_i,v_i\\le n}$ 且所有边构成一棵树。**", "hint": "#### 「样例解释 #1」\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rgnwakkq.png)\n\n左上图为样例输出中给出的树。边 $(1,5),(5,2)$ 被路径 $(1,2)$ 覆盖，边 $(3,5),(5,6),(6,4)$ 被路径 $(3,4)$ 覆盖，符合题目要求。\n\n右上图中边 $(5,6)$ 被路径 $(1,2)$ 和 $(3,4)$ 覆盖，不符合题目要求。\n\n左下图中边 $(5,6)$ 未被任何路径覆盖，不符合题目要求。\n\n右下图不是一棵树，不符合题目要求。\n\n#### 「样例解释 #2」\n\n可以证明不存在符合要求的树。\n\n#### 「评分方式」\n\n本题采用自定义校验器（Special Judge）进行评测。\n\n对于每个测试点：\n\n- 若第一行格式错误或与答案不匹配（大小写不敏感），得 $0\\%$ 的分数。\n- 若第一行答案正确且为 `No`，得 $100\\%$ 的分数。\n- 若第一行答案正确且为 `Yes`，**但后 $n-1$ 行格式错误**，得 $0\\%$ 的分数。  \n因此，**请务必保证输出为一棵树**。\n- 若第一行答案正确且为 `Yes`，后 $n-1$ 行格式正确但树不符合要求，得 $20\\%$ 的分数。\n- 若第一行答案正确且为 `Yes`，后 $n-1$ 行格式正确且树符合要求，得 $100\\%$ 的分数。\n\n也就是说，对于第一个样例，在正确输出 `Yes` 的基础上，输出左上图可以得到满分，输出右上图、左下图可以得到 $20\\%$ 的分数，输出右下图不能得到任何分数；对于第二个样例，正确输出 `No` 即可得到满分。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $2\\le n\\le 3\\times 10^5$；\n- $1\\le m\\le 3\\times 10^5$；\n- $1\\le s_i,t_i\\le n$ 且 $s_i\\ne t_i$。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（10 points）：$n\\le 3$，$m\\le 3$。\n- Subtask 1（10 points）：$n\\le 10$，$m\\le 10$。\n- Subtask 2（20 points）：$m=1$。\n- Subtask 3（10 points）：$n\\le 300$，$m\\le 300$。\n- Subtask 4（10 points）：$n\\le 2\\times 10^3$，$m\\le 2\\times 10^3$。\n- Subtask 5（20 points）：$m\\le 2\\times 10^3$。\n- Subtask 6（20 points）：无特殊限制。\n\n#### 「Hack 数据」\n\n本题于赛后添加了部分 Hack 数据。这些数据均满足 Subtask 6 对数据规模的限制，他们被添加到 Subtask 7 中。这些数据不计分，但只有通过所有数据，才算做 AC 本题。\n\n- Subtask 7（0 points）：赛后添加的 Hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "「Cfz Round 5」Mata rainen", "background": "The title means: See you next year.\n\nRose is a girl in her third year of senior high school. During the summer vacation before entering her third year, she reviewed *The Story of Guo Tuotuo Who Plants Trees* (an ancient Chinese article) and then created this tree-related problem.\n\nAfter submitting this problem to the problem-setting team, she decided to devote all her time and energy to preparing for the college entrance examination, looking forward to meeting everyone again in algorithm competitions during the summer vacation of 2025.", "description": "Please determine whether there exists a tree that satisfies the following conditions. If so, please try to construct it.\n\nThe tree contains $n$ vertices numbered from $1$ to $n$. Additionally, $m$ pairs of vertices $(s_i, t_i)$ are given, and it is required that these $m$ paths from vertex $s_i$ to vertex $t_i$ cover each edge **exactly** once $^\\dagger$.\n\n**If you correctly determine whether there is a solution but cannot construct the tree, you can still obtain some points. See *Scoring Method* part for details.**\n\n$\\dagger$ A path from vertex $s$ to vertex $t$ covers an edge $(u, v)$ if and only if edge $(u, v)$ is on the shortest path from vertex $s$ to vertex $t$.", "inputFormat": "The first line contains two integers $n$ and $m$, representing the number of vertices in the tree and the number of given vertex pairs.\n\nThe next $m$ lines each contain two integers $s_i$ and $t_i$, representing a pair of vertex.\n", "outputFormat": "The first line should output a string \"Yes\" or \"No\" (case-insensitive) indicating whether there is a solution.\n\nIf there is a solution, continue to output $n-1$ lines, each containing two integers $u_i$ and $v_i$, describing an edge. **You need to ensure that $\\bm{1 \\leq u_i, v_i \\leq n}$ and that all edges form a tree.**\n", "hint": "#### Sample Explanation #1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rgnwakkq.png)\n\nThe top left diagram shows the tree given in the sample output. Edges $(1,5)$ and $(5,2)$ are covered by path $(1,2)$, and edges $(3,5)$, $(5,6)$, and $(6,4)$ are covered by path $(3,4)$, which meets the problem requirements.\n\nIn the top right diagram, edge $(5,6)$ is covered by both paths $(1,2)$ and $(3,4)$, which does not meet the problem requirements.\n\nIn the bottom left diagram, edge $(5,6)$ is not covered by any path, which does not meet the problem requirements.\n\nThe bottom right diagram is not a tree, which does not meet the problem requirements.\n\n#### Sample Explanation #2\n\nIt can be proven that there is no tree that meets the requirements.\n\n#### Scoring Method\n\nThis problem uses special judge for evaluation.\n\nFor each test case:\n\n- If the first line has the wrong format or does not match the answer (case-insensitive), you will receive $0\\%$ of the points.\n- If the first line is correct and says \"No\", you will receive $100\\%$ of the points.\n- If the first line is correct and says \"Yes\", **but the format of the following $n-1$ lines is incorrect**, you will receive $0\\%$ of the points. Therefore, **please ensure that the output forms a tree**.\n- If the first line is correct and says \"Yes\", the format of the following $n-1$ lines is correct, but the tree does not meet the requirements, you will receive $20\\%$ of the points.\n- If the first line is correct and says \"Yes\", the format of the following $n-1$ lines is correct, and the tree meets the requirements, you will receive $100\\%$ of the points.\n\nThat is, for the first sample, on the basis of correctly outputting \"Yes\", outputting the top left diagram will give full points, outputting the top right and bottom left diagrams will give $20\\%$ of the points, and outputting the bottom right diagram will not give any points; for the second sample, correctly outputting \"No\" will give full points.\n\n#### Constraints\n\nFor all test data, it is guaranteed that:\n\n- $2 \\leq n \\leq 3 \\times 10^5$;\n- $1 \\leq m \\leq 3 \\times 10^5$;\n- $1 \\leq s_i, t_i \\leq n$ and $s_i \\neq t_i$.\n\n**Subtasks are used in this task.**\n\n- Subtask 0 (10 points): $n \\leq 3$, $m \\leq 3$.\n- Subtask 1 (10 points): $n \\leq 10$, $m \\leq 10$.\n- Subtask 2 (20 points): $m = 1$.\n- Subtask 3 (10 points): $n \\leq 300$, $m \\leq 300$.\n- Subtask 4 (10 points): $n \\leq 2 \\times 10^3$, $m \\leq 2 \\times 10^3$.\n- Subtask 5 (20 points): $m \\leq 2 \\times 10^3$.\n- Subtask 6 (20 points): No further restrictions.\n- Subtask 7 (0 points): Test cases added after the contest.", "locale": "en"}, "zh-CN": {"title": "「Cfz Round 5」Mata rainen", "background": "题目名称意为：明年见。\n\n小 R 是一个正在上高三的女孩子。她在升入高三的暑假复习了[《种树郭橐（tuó）驼传》](https://baike.baidu.com/item/%E7%A7%8D%E6%A0%91%E9%83%AD%E6%A9%90%E9%A9%BC%E4%BC%A0)，便编出了这道与树有关的题。\n\n在把这道题目丢给出题组后，她决定把全部时间和精力投入到高考的旅程中，期待在 2025 年的暑假在算法竞赛中与大家再会。", "description": "请判断是否存在一棵树满足如下条件。若存在，请尝试给出构造。\n\n树中包含 $n$ 个结点，编号为 $1\\sim n$。另外，给定 $m$ 个点对 $(s_i,t_i)$，要求树上这 $m$ 条从点 $s_i$ 到点 $t_i$ 的路径覆盖每条边**恰好**一次 $^\\dagger$。\n\n**若你正确判断了是否有解，但不会构造出这棵树，也可以获得一定的分数，详见【评分方式】。**\n\n$\\dagger$ 称从点 $s$ 到点 $t$ 的路径覆盖一条边 $(u,v)$，当且仅当边 $(u,v)$ 在点 $s$ 到点 $t$ 的最短路径上。", "inputFormat": "第一行包含两个整数 $n,m$，表示这棵树的点数和给出的点对数。\n\n接下来 $m$ 行，每行两个整数 $s_i,t_i$，表示一个点对。", "outputFormat": "第一行输出一个字符串 `Yes` 或 `No`（大小写不敏感），表示是否有解。\n\n若有解，继续输出 $n-1$ 行，每行包含两个整数 $u_i,v_i$，描述一条边。**你需要保证 $\\bm{1\\le u_i,v_i\\le n}$ 且所有边构成一棵树。**", "hint": "#### 「样例解释 #1」\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rgnwakkq.png)\n\n左上图为样例输出中给出的树。边 $(1,5),(5,2)$ 被路径 $(1,2)$ 覆盖，边 $(3,5),(5,6),(6,4)$ 被路径 $(3,4)$ 覆盖，符合题目要求。\n\n右上图中边 $(5,6)$ 被路径 $(1,2)$ 和 $(3,4)$ 覆盖，不符合题目要求。\n\n左下图中边 $(5,6)$ 未被任何路径覆盖，不符合题目要求。\n\n右下图不是一棵树，不符合题目要求。\n\n#### 「样例解释 #2」\n\n可以证明不存在符合要求的树。\n\n#### 「评分方式」\n\n本题采用自定义校验器（Special Judge）进行评测。\n\n对于每个测试点：\n\n- 若第一行格式错误或与答案不匹配（大小写不敏感），得 $0\\%$ 的分数。\n- 若第一行答案正确且为 `No`，得 $100\\%$ 的分数。\n- 若第一行答案正确且为 `Yes`，**但后 $n-1$ 行格式错误**，得 $0\\%$ 的分数。  \n因此，**请务必保证输出为一棵树**。\n- 若第一行答案正确且为 `Yes`，后 $n-1$ 行格式正确但树不符合要求，得 $20\\%$ 的分数。\n- 若第一行答案正确且为 `Yes`，后 $n-1$ 行格式正确且树符合要求，得 $100\\%$ 的分数。\n\n也就是说，对于第一个样例，在正确输出 `Yes` 的基础上，输出左上图可以得到满分，输出右上图、左下图可以得到 $20\\%$ 的分数，输出右下图不能得到任何分数；对于第二个样例，正确输出 `No` 即可得到满分。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $2\\le n\\le 3\\times 10^5$；\n- $1\\le m\\le 3\\times 10^5$；\n- $1\\le s_i,t_i\\le n$ 且 $s_i\\ne t_i$。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（10 points）：$n\\le 3$，$m\\le 3$。\n- Subtask 1（10 points）：$n\\le 10$，$m\\le 10$。\n- Subtask 2（20 points）：$m=1$。\n- Subtask 3（10 points）：$n\\le 300$，$m\\le 300$。\n- Subtask 4（10 points）：$n\\le 2\\times 10^3$，$m\\le 2\\times 10^3$。\n- Subtask 5（20 points）：$m\\le 2\\times 10^3$。\n- Subtask 6（20 points）：无特殊限制。\n\n#### 「Hack 数据」\n\n本题于赛后添加了部分 Hack 数据。这些数据均满足 Subtask 6 对数据规模的限制，他们被添加到 Subtask 7 中。这些数据不计分，但只有通过所有数据，才算做 AC 本题。\n\n- Subtask 7（0 points）：赛后添加的 Hack 数据。", "locale": "zh-CN"}}}
{"pid": "P11487", "type": "P", "difficulty": 5, "samples": [["2 1\n000", "3"], ["5 5\n0010111011", "1391"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "组合数学", "洛谷月赛"], "title": "「Cfz Round 5」Gnirts 10", "background": "In Memory of $\\text{F}\\rule{66.8px}{6.8px}$.", "description": "题面还是简单一点好。\n\n- 给定 $n, m$，以及一个长为 $n + m$ 的 $\\tt{01}$ 串 $S$。\n- 对于 $\\tt 01$ 串 $T$，定义 $f(T)$ 为 $S$ 的最长的前缀的长度，使得该前缀是 $T$ 的子序列 $^\\dagger$。\n- 对于每个 **恰包含 $\\bm n$ 个 $\\tt 1$ 和 $\\bm m$ 个 $\\tt 0$ 的** $\\tt{01}$ 串 $T$，求 $f(T)$ 的和。答案对 $2933256077^\\ddagger$ 取模。\n\n$\\dagger$：请注意，子序列可以不连续。换句话说，$a$ 是 $b$ 的子序列，当且仅当在 $b$ 中删去 $\\geq 0$ 个字符后，可以得到 $a$。注意，空串总是任何串的子序列。\n\n$\\ddagger$：模数为质数。", "inputFormat": "第一行包含两个整数 $n, m$。  \n\n第二行包含一个长度为 $n + m$ 的 $\\tt 01$ 串 $S$。", "outputFormat": "输出一行一个整数，表示答案对 $2933256077$ 取模后的结果。", "hint": "#### 「样例解释 #1」\n\n所有可能的序列有且仅有公共序列 $\\texttt{0}$。因为恰有 $3$ 种不同的 $T$（$\\tt 110, 101, 011$），所以答案为 $1\\times 3 = 3$。\n\n#### 「数据范围」\n\n对于所有测试数据，保证 $1 \\leq n, m \\leq 3\\times 10^6$。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（13 points）：$\\max(n, m) \\leq 5$。\n- Subtask 1（13 points）：$\\max(n, m) \\leq 100$。\n- Subtask 2（34 points）：$\\max(n, m) \\leq 3 \\times 10^3$。\n- Subtask 3（40 points）：无特殊限制。", "locale": "zh-CN", "translations": {"en": {"title": "「Cfz Round 5」Gnirts 10", "background": "In Memory of $\\text{F}\\rule{66.8px}{6.8px}$.", "description": "Let's keep the problem statement simple.\n\n- Given $n, m$, and a binary string $S$ of length $n + m$.\n- For a binary string $T$, define $f(T)$ as the length of the longest prefix of $S$ that is a subsequence $^\\dagger$ of $T$.\n- For every binary string $T$ that **contains exactly $\\bm n$ $\\tt 1$s and $\\bm m$ $\\tt 0$s**, compute the sum of $f(T)$. The answer should be modulo $2933256077^\\ddagger$.\n\n$\\dagger$: Note that a subsequence does not need to be contiguous. In other words, $a$ is a subsequence of $b$ if and only if $a$ can be obtained by deleting $\\geq 0$ characters from $b$. Note that the empty string is always a subsequence of any string.\n\n$\\ddagger$: The modulus is a prime number.\n", "inputFormat": "The first line contains two integers $n, m$.  \n\nThe second line contains a binary string $S$ of length $n + m$.\n", "outputFormat": "Output a single integer, representing the result modulo $2933256077$.\n", "hint": "#### Sample Explanation #1\n\nThe only possible sequence is the common sequence $\\texttt{0}$. Since there are exactly 3 different $T$s ($\\tt 110, 101, 011$), the answer is $1 \\times 3 = 3$.\n\n#### Constraints\n\nFor all test cases, it is guaranteed that $1 \\leq n, m \\leq 3\\times 10^6$.\n\n**Subtasks are used in this task.**\n\n- Subtask 0 (13 points): $\\max(n, m) \\leq 5$.\n- Subtask 1 (13 points): $\\max(n, m) \\leq 100$.\n- Subtask 2 (34 points): $\\max(n, m) \\leq 3\\times 10^3$.\n- Subtask 3 (40 points): No further restrictions.", "locale": "en"}, "zh-CN": {"title": "「Cfz Round 5」Gnirts 10", "background": "In Memory of $\\text{F}\\rule{66.8px}{6.8px}$.", "description": "题面还是简单一点好。\n\n- 给定 $n, m$，以及一个长为 $n + m$ 的 $\\tt{01}$ 串 $S$。\n- 对于 $\\tt 01$ 串 $T$，定义 $f(T)$ 为 $S$ 的最长的前缀的长度，使得该前缀是 $T$ 的子序列 $^\\dagger$。\n- 对于每个 **恰包含 $\\bm n$ 个 $\\tt 1$ 和 $\\bm m$ 个 $\\tt 0$ 的** $\\tt{01}$ 串 $T$，求 $f(T)$ 的和。答案对 $2933256077^\\ddagger$ 取模。\n\n$\\dagger$：请注意，子序列可以不连续。换句话说，$a$ 是 $b$ 的子序列，当且仅当在 $b$ 中删去 $\\geq 0$ 个字符后，可以得到 $a$。注意，空串总是任何串的子序列。\n\n$\\ddagger$：模数为质数。", "inputFormat": "第一行包含两个整数 $n, m$。  \n\n第二行包含一个长度为 $n + m$ 的 $\\tt 01$ 串 $S$。", "outputFormat": "输出一行一个整数，表示答案对 $2933256077$ 取模后的结果。", "hint": "#### 「样例解释 #1」\n\n所有可能的序列有且仅有公共序列 $\\texttt{0}$。因为恰有 $3$ 种不同的 $T$（$\\tt 110, 101, 011$），所以答案为 $1\\times 3 = 3$。\n\n#### 「数据范围」\n\n对于所有测试数据，保证 $1 \\leq n, m \\leq 3\\times 10^6$。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（13 points）：$\\max(n, m) \\leq 5$。\n- Subtask 1（13 points）：$\\max(n, m) \\leq 100$。\n- Subtask 2（34 points）：$\\max(n, m) \\leq 3 \\times 10^3$。\n- Subtask 3（40 points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11488", "type": "P", "difficulty": 6, "samples": [["23\n3\n1 1 2 3\n3\n1 6 2 2\n3\n1 7 1 4\n3\n2 12\n3\n2 13\n3\n1 3 1 2\n3\n2 7\n3\n2 3\n3\n1 5 2 3\n3\n2 6\n3\n2 5\n3", "1\n3\n5\n6\n5\n5\n6\n4\n3\n5\n3\n2"], ["16\n1 1 4 3\n3\n1 2 3 3\n3\n1 10 1000000000 2\n3\n1 1000000021 1 10\n3\n2 1000000027\n3\n2 23\n3\n1 12 1 1\n3\n1 2000000033 100000 1000000000\n3", "3\n6\n8\n12\n11\n7\n8\n1000000001"], ["18\n1 1 85 483\n1 32607 44 379\n2 45784\n1 46178 133 40\n3\n1 13506 152 357\n2 62124\n3\n1 70877 209 33\n3\n1 37299 429 158\n3\n1 31487 258 363\n2 159051\n3\n2 227162\n2 279608\n3", "902\n1257\n1257\n1415\n1778\n1778"], ["19\n1 1 189019619 113958\n2 800361853\n1 422490453 494478 254349561\n3\n2 1152812283\n2 1650380207\n3\n1 4033287043 23425848 3533684\n2 2666277906\n1 709388173 159264263 191915\n3\n2 3453785850\n2 8487830948768\n2 39677822722745\n2 167837684014594\n1 1534084935 1205975 21949299\n1 151207136 41249553 693236\n1 1121564684 68403 1385595730\n3", "254463518\n254463517\n254463516\n1386594833"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "离散化", "洛谷原创", "扫描线", "洛谷月赛"], "title": "「Cfz Round 5」Zhòng shù", "background": "> 我想要种一棵香蕉树 上面挂满我的所有祝福", "description": "小 C 喜欢种树。\n\n它种了一棵香蕉树，但是这棵树似乎需要人工维护才能生长。\n\n因此，它经常会在树上的某一个位置挂上一些「祝福」。所谓「祝福」，其实就是一条链。\n\n而有的时候树的一部分长得太好了，会导致整棵树长歪，所以它又不得不砍掉一部分。\n\n小 C 还喜欢众数，所以它会经常问你所有树上结点的深度中同一个深度最多的出现次数。\n\n具体来说，有一棵有根树，最初只有根结点 $1$，另外有一个变量 $n=1$。\n\n有如下三种操作：\n\n1. `x l k`：增加编号为 $n+1\\sim n+lk$ 的结点以及边\n$(x,n+1),(n+1,n+2),\\dots,(n+l-1,n+l)$；$(x,n+l+1),(n+l+1,n+l+2),\\dots,(n+2l-1,n+2l)$；$\\dots$；$(x+n+(k-1)l+1),(n+(k-1)l+1,n+(k-1)l+2),\\dots,(n+kl-1,n+kl)$。即在 $x$ 号结点下面挂了 $k$ 条长度为 $l$ 的链。这个操作执行之后 $n\\gets n+kl$。\n2. `x`：删除 $x$ 号结点及其子树。\n3. （无参数）查询所有结点的深度中，出现最多的那个深度的出现次数。", "inputFormat": "第一行包含一个整数 $m$，表示操作次数。\n\n接下来 $m$ 行，每行包含若干个整数，第一个整数 $op$ 表示当前操作种类，接下来的输入与上面的格式依次对应。", "outputFormat": "对于每个 $3$ 操作，输出一行一个整数表示答案。", "hint": "#### 「样例解释 #1」\n\n下面的图中，点的颜色代表被加入的时间。\n\n![](https://s21.ax1x.com/2024/12/09/pAHk3Hf.png)\n\n上图为经过三次 $1$ 操作（`1 1 2 3`，`1 6 2 2` 和 `1 7 1 4`）后的树。\n\n![](https://s21.ax1x.com/2024/12/09/pAHklut.png)\n\n上图为在刚才的基础上经过两次 `2` 操作（`2 12` 和 `2 13`）的树。\n\n![](https://s21.ax1x.com/2024/12/09/pAHk1DP.png)\n\n上图为刚才的基础上再经过一次 $1$ 操作（`1 3 1 2`）的树。\n\n![](https://s21.ax1x.com/2024/12/09/pAHkGE8.png)\n\n上图为刚才的基础上再经过两次 $2$ 操作（`2 7` 和 `2 3`）的树。\n\n![](https://s21.ax1x.com/2024/12/09/pAHkMjI.png)\n\n上图为刚才的基础上再经过一次 $1$ 操作（`1 5 2 3`）的树。\n\n![](https://s21.ax1x.com/2024/12/09/pAHkJUS.png)\n\n上图为经过所有操作后的树。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $1\\le m\\le 10^5$；\n- $1$ 操作中的 $x$ 满足 $1\\le x\\le n$ 且 $x$ 号结点在树上依然存在，保证 $1 \\le l,k \\le 10^{18}$；\n- $2$ 操作中的 $x$ 满足 $1<x\\le n$ 且 $x$ 号结点在树上依然存在；\n- 任意时刻的 $n$ 满足 $n\\le 10^{18}$。\n\n**本题采用捆绑测试。**\n\n设操作过程中 $n$ 的最大值为 $k$。\n\n- Subtask 0（10 points）：$k \\le 5000$。\n- Subtask 1（20 points）：$k \\le 5 \\times 10^5$。\n- Subtask 2（20 points）：不存在 $2$ 操作。\n- Subtask 3（20 points）：$1$ 操作中 $l$ 的值为 $1$。\n- Subtask 4（30 points）：无特殊限制。", "locale": "zh-CN", "translations": {"en": {"title": "「Cfz Round 5」ˈplɑːntɪŋ triːz", "background": "> I want to plant a banana tree&emsp;with all my blessings hanging on it", "description": "Caca enjoys planting trees. He has planted a banana tree, but it seems only to grow with some artificial maintenance. So he will sometimes hang a *blessing* onto it. The so-called *blessing* is nothing but a chain. However, sometimes the tree is growing too well, leading the tree to become crooked. He has to do some pruning at times as well.\n\nCaca loves mode, so he frequently inquires about the maximum occurrence of a certain value in the multiset formed by the depths of all existing nodes on the tree.\n\nTo be specific, there is a rooted tree. Initially, it contains the only node labeled $1$ as the root. There is a variable $n = 1$. There will be three types of operations as follows:\n\n1. `x l k`: Attach $k$ chains, each of length $l$, under the node $x$. Formally, nodes labeled $(n + 1) \\sim (n + lk)$ will be added, and for each $1 \\leq i \\leq k$, edge $(x, n + (i - 1)l + 1)$, as well as for each $2 \\leq j \\leq k$, edges $(n + (i - 1)l + j - 1, n + (i - 1)l + j)$, will be added. Afterwards, set $n \\gets n + lk$.\n2. `x`: Prune all the nodes in the subtree of $x$.\n3. (No parameters): Inquiring about the maximum occurrence of a certain value in the multiset formed by the depths of all existing nodes on the tree.\n\nCaca will perform $m$ operations in a row. For each operation of type $3$, please tell him the correct answer.", "inputFormat": "The first line of input contains a single integer $m$.\n\nThen $m$ lines follow. Each line contains an operation. The first integer you read, denoted as $\\mathrm{op}$, indicates the type of the operation. Then some amount of parameters will be given in the same form above.", "outputFormat": "For each operation of type $3$, print the correct answer in a new line.", "hint": "#### Sample Explanation #1\n\nIn the following images, the color of the nodes represents the time they were added.\n\n![](https://s21.ax1x.com/2024/12/09/pAHk3Hf.png)\n\nThe above image shows the tree after three $1 $ operations ( `1 1 2 3`, `1 6 2 2`, and `1 7 1 4` ).\n\n![](https://s21.ax1x.com/2024/12/09/pAHklut.png)\n\nThe above image shows the tree that has undergone two $2$ operations ( `2 12` and `2 13` ) based on the previous one.\n\n![](https://s21.ax1x.com/2024/12/09/pAHk1DP.png)\n\nThe above image shows the tree that has undergone another $1$ operation ( `1 3 1 2` ) based on the previous one.\n\n![](https://s21.ax1x.com/2024/12/09/pAHkGE8.png)\n\nThe above image shows the tree after two additional $2$ operations ( `2 7` and `2 3` ) based on the previous one.\n\n![](https://s21.ax1x.com/2024/12/09/pAHkMjI.png)\n\nThe above image shows the tree that has undergone another $1$ operation ( `1 5 2 3` ) based on the previous one.\n\n![](https://s21.ax1x.com/2024/12/09/pAHkJUS.png)\n\nThe above image shows the tree after all operations have been performed.\n\n#### Constraints\n\nFor all test cases, it is guaranteed that:\n\n- $1\\le m\\le 10^5$;\n- The $x$ in the $1$ operation satisfies $1 \\le x \\le n$ and the $x$ node still exists on the tree, guaranteeing that $1 \\le l, k \\le 10^{18}$;\n- The $x$ in the $2$ operation satisfies $1 \\lt x \\le n$ and the $x$ node still exists on the tree;\n- At any given moment, $n$ satisfies $n \\le 10 ^ {18}$.\n\n**Subtasks are used in this task.**\n\n- Subtask 0 (10 points): $k \\le 5000$.\n- Subtask 1 (20 points): $k \\le 5 \\times 10^5$.\n- Subtask 2 (20 points): There is no $2$ operation.\n- Subtask 3 (20 points): The value of $l$ in the $1$ operation is $1$.\n- Subtask 4 (30 points): No further restrictions.", "locale": "en"}, "zh-CN": {"title": "「Cfz Round 5」Zhòng shù", "background": "> 我想要种一棵香蕉树 上面挂满我的所有祝福", "description": "小 C 喜欢种树。\n\n它种了一棵香蕉树，但是这棵树似乎需要人工维护才能生长。\n\n因此，它经常会在树上的某一个位置挂上一些「祝福」。所谓「祝福」，其实就是一条链。\n\n而有的时候树的一部分长得太好了，会导致整棵树长歪，所以它又不得不砍掉一部分。\n\n小 C 还喜欢众数，所以它会经常问你所有树上结点的深度中同一个深度最多的出现次数。\n\n具体来说，有一棵有根树，最初只有根结点 $1$，另外有一个变量 $n=1$。\n\n有如下三种操作：\n\n1. `x l k`：增加编号为 $n+1\\sim n+lk$ 的结点以及边\n$(x,n+1),(n+1,n+2),\\dots,(n+l-1,n+l)$；$(x,n+l+1),(n+l+1,n+l+2),\\dots,(n+2l-1,n+2l)$；$\\dots$；$(x+n+(k-1)l+1),(n+(k-1)l+1,n+(k-1)l+2),\\dots,(n+kl-1,n+kl)$。即在 $x$ 号结点下面挂了 $k$ 条长度为 $l$ 的链。这个操作执行之后 $n\\gets n+kl$。\n2. `x`：删除 $x$ 号结点及其子树。\n3. （无参数）查询所有结点的深度中，出现最多的那个深度的出现次数。", "inputFormat": "第一行包含一个整数 $m$，表示操作次数。\n\n接下来 $m$ 行，每行包含若干个整数，第一个整数 $op$ 表示当前操作种类，接下来的输入与上面的格式依次对应。", "outputFormat": "对于每个 $3$ 操作，输出一行一个整数表示答案。", "hint": "#### 「样例解释 #1」\n\n下面的图中，点的颜色代表被加入的时间。\n\n![](https://s21.ax1x.com/2024/12/09/pAHk3Hf.png)\n\n上图为经过三次 $1$ 操作（`1 1 2 3`，`1 6 2 2` 和 `1 7 1 4`）后的树。\n\n![](https://s21.ax1x.com/2024/12/09/pAHklut.png)\n\n上图为在刚才的基础上经过两次 `2` 操作（`2 12` 和 `2 13`）的树。\n\n![](https://s21.ax1x.com/2024/12/09/pAHk1DP.png)\n\n上图为刚才的基础上再经过一次 $1$ 操作（`1 3 1 2`）的树。\n\n![](https://s21.ax1x.com/2024/12/09/pAHkGE8.png)\n\n上图为刚才的基础上再经过两次 $2$ 操作（`2 7` 和 `2 3`）的树。\n\n![](https://s21.ax1x.com/2024/12/09/pAHkMjI.png)\n\n上图为刚才的基础上再经过一次 $1$ 操作（`1 5 2 3`）的树。\n\n![](https://s21.ax1x.com/2024/12/09/pAHkJUS.png)\n\n上图为经过所有操作后的树。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $1\\le m\\le 10^5$；\n- $1$ 操作中的 $x$ 满足 $1\\le x\\le n$ 且 $x$ 号结点在树上依然存在，保证 $1 \\le l,k \\le 10^{18}$；\n- $2$ 操作中的 $x$ 满足 $1<x\\le n$ 且 $x$ 号结点在树上依然存在；\n- 任意时刻的 $n$ 满足 $n\\le 10^{18}$。\n\n**本题采用捆绑测试。**\n\n设操作过程中 $n$ 的最大值为 $k$。\n\n- Subtask 0（10 points）：$k \\le 5000$。\n- Subtask 1（20 points）：$k \\le 5 \\times 10^5$。\n- Subtask 2（20 points）：不存在 $2$ 操作。\n- Subtask 3（20 points）：$1$ 操作中 $l$ 的值为 $1$。\n- Subtask 4（30 points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11489", "type": "P", "difficulty": 7, "samples": [["2 3 1000 500\n0 0\n2 0\n3 1", "1000.0"], ["2 3 500 3000\n0 0\n2 0\n3 1", "3387.277541898787"], ["2 3 250 750\n0 0\n2 0\n3 1", "1000.0"], ["2 3 0 500\n0 0\n2 0\n3 1", "353.5533905932738"], ["3 4 0 10\n0 0\n10 0\n5 10\n5 5", "50.0"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "Special Judge", "O2优化", "BalticOI（波罗的海）"], "title": "[BalticOI 2023] Astronomer", "background": "", "description": "给定平面上 $n$ 个整点，一个正整数 $k$ 和非负整数 $s,t$，在所有至少覆盖了 $k$ 个点的圆中，设其半径为 $r$，圆心离原点（即 $(0,0)$）距离为 $d$，试求出 $tr+sd$ 的最小值。\n\n本题中的距离为欧几里得距离。", "inputFormat": "第一行四个非负整数 $k,n,s,t$。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $x_i,y_i$ 表示第 $i$ 个点的坐标。", "outputFormat": "一行一个实数表示答案。若你的输出和标准答案的相对误差或绝对误差不超过 $\\varepsilon=10^{-6}$（在部分子任务中，$\\varepsilon$ 的值有变化），你的输出将被判定为正确。", "hint": "**【样例解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hj02g4q9.png)\n\n如图，样例 #3 中，最优方案是选择以 $(1,0)$ 为圆心而半径为 $r=1$ 的圆（图中粉色实心圆），代价为 $t\\cdot 1+s\\cdot 1=1\\,000$。\n\n图中的其它三个圆展示了样例 #1、样例 #2，样例 #4 的最优方案。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le k\\le n\\le 700$，$-10^9\\le x_i,y_i\\le 10^9$，$0\\le s,t\\le 10^9$。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $8$ | $t\\le s$ |\n| $2$ | $9$ | $n\\le 50$ 且 $s=0$ |\n| $3$ | $18$ | $s=0$ |\n| $4$ | $13$ | $n\\le 50$ |\n| $5$ | $14$ | $n\\le 350$ |\n| $6$ | $15$ | $\\varepsilon=0.1$ |\n| $7$ | $23$ | 无特殊限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2023] Astronomer", "background": "", "description": "给定平面上 $n$ 个整点，一个正整数 $k$ 和非负整数 $s,t$，在所有至少覆盖了 $k$ 个点的圆中，设其半径为 $r$，圆心离原点（即 $(0,0)$）距离为 $d$，试求出 $tr+sd$ 的最小值。\n\n本题中的距离为欧几里得距离。", "inputFormat": "第一行四个非负整数 $k,n,s,t$。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $x_i,y_i$ 表示第 $i$ 个点的坐标。", "outputFormat": "一行一个实数表示答案。若你的输出和标准答案的相对误差或绝对误差不超过 $\\varepsilon=10^{-6}$（在部分子任务中，$\\varepsilon$ 的值有变化），你的输出将被判定为正确。", "hint": "**【样例解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hj02g4q9.png)\n\n如图，样例 #3 中，最优方案是选择以 $(1,0)$ 为圆心而半径为 $r=1$ 的圆（图中粉色实心圆），代价为 $t\\cdot 1+s\\cdot 1=1\\,000$。\n\n图中的其它三个圆展示了样例 #1、样例 #2，样例 #4 的最优方案。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le k\\le n\\le 700$，$-10^9\\le x_i,y_i\\le 10^9$，$0\\le s,t\\le 10^9$。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $8$ | $t\\le s$ |\n| $2$ | $9$ | $n\\le 50$ 且 $s=0$ |\n| $3$ | $18$ | $s=0$ |\n| $4$ | $13$ | $n\\le 50$ |\n| $5$ | $14$ | $n\\le 350$ |\n| $6$ | $15$ | $\\varepsilon=0.1$ |\n| $7$ | $23$ | 无特殊限制 |", "locale": "zh-CN"}}}
{"pid": "P11490", "type": "P", "difficulty": 5, "samples": [["3\n431\n121\n121", "? 1 2\n? 1 3\n? 2 3\n! 431 431 121"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "交互题", "Special Judge", "O2优化", "随机化", "BalticOI（波罗的海）"], "title": "[BalticOI 2023] Staring Contest", "background": "", "description": "**这是一道交互题**。\n\n有一个长度为 $n$ 的正整数序列 $a_1,a_2,\\cdots,a_n$，**它们两两不同**。每次询问你可以给定正整数  $1\\le i, j\\le n$，其中 $i\\neq j$，交互库会告诉你 $\\min(a_i,a_j)$。\n\n你需要确定序列 $a$。然而，显然最大的 $a_i$ 是无法确定的，因此你只需求出一个整数序列 $b_1,b_2,\\cdots,b_n$，满足对于所有 $i=1,2,\\cdots,n$，有 $b_i\\le a_i$，且最多有一个 $i$ 满足 $b_i\\neq a_i$。\n\n（搬题人注：你还需保证 $b_i$ 在 $[-2^{31},2^{31})$ 中。）\n\n**交互库不是自适应的。换而言之，序列 $a$ 在交互前已确定。**\n\n**【交互格式】**\n\n首先选手程序读入一行一个正整数 $n$。\n\n接下来选手可以进行若干次询问，每次询问形如 $\\texttt{?}\\ i\\ j$，其中 $i,j$ 为满足 $1\\le i,j\\le n$ 且 $i\\neq j$ 的正整数。\n\n每次询问后，你需要从标准输入中读入一个正整数，表示 $\\min(a_i,a_j)$ 的值。**你可以询问不超过 $3\\,000$ 次。**\n\n如果你确定了你要回答的序列 $b$，则输出一行 $\\texttt{!}\\ b_1\\ b_2\\ \\cdots\\ b_n$ 表示你的回答。**回答不计做询问。**\n\n**每次询问后，你需要清空缓冲区。**", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "**【样例解释】**\n\n一个可能的 $a$ 为 $[431,623,121]$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$2\\le n\\le 1\\,500$，$1\\le a_i\\le 86\\,400$，$a_i$ 两两不同。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $9$ | $n\\le 50$ |\n| $2$ | $11$ | $n\\le 1\\,000$ |\n| $3$ | $80$ | $1\\,000<n\\le 1\\,500$ |\n\n对于前两个子任务，你将获得满分当且仅当你正确的解决了该子任务中的每一个测试点，否则将获得零分。\n\n对于第三个子任务，你的得分为其所有测试点的最低分。其中，对于每个测试点，如果你的程序没有正确解决这个测试点，你将获得 $0$ 分。否则，设你询问了 $q$ 次。若 $q\\le n+25$，你将获得 $80$ 分。若 $q>3\\, 000$，你将获得 $0$ 分。否则，你将获得 $118.2-12\\ln(q-n)$ 分，四舍五入至最近的整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2023] Staring Contest", "background": "", "description": "**这是一道交互题**。\n\n有一个长度为 $n$ 的正整数序列 $a_1,a_2,\\cdots,a_n$，**它们两两不同**。每次询问你可以给定正整数  $1\\le i, j\\le n$，其中 $i\\neq j$，交互库会告诉你 $\\min(a_i,a_j)$。\n\n你需要确定序列 $a$。然而，显然最大的 $a_i$ 是无法确定的，因此你只需求出一个整数序列 $b_1,b_2,\\cdots,b_n$，满足对于所有 $i=1,2,\\cdots,n$，有 $b_i\\le a_i$，且最多有一个 $i$ 满足 $b_i\\neq a_i$。\n\n（搬题人注：你还需保证 $b_i$ 在 $[-2^{31},2^{31})$ 中。）\n\n**交互库不是自适应的。换而言之，序列 $a$ 在交互前已确定。**\n\n**【交互格式】**\n\n首先选手程序读入一行一个正整数 $n$。\n\n接下来选手可以进行若干次询问，每次询问形如 $\\texttt{?}\\ i\\ j$，其中 $i,j$ 为满足 $1\\le i,j\\le n$ 且 $i\\neq j$ 的正整数。\n\n每次询问后，你需要从标准输入中读入一个正整数，表示 $\\min(a_i,a_j)$ 的值。**你可以询问不超过 $3\\,000$ 次。**\n\n如果你确定了你要回答的序列 $b$，则输出一行 $\\texttt{!}\\ b_1\\ b_2\\ \\cdots\\ b_n$ 表示你的回答。**回答不计做询问。**\n\n**每次询问后，你需要清空缓冲区。**", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "**【样例解释】**\n\n一个可能的 $a$ 为 $[431,623,121]$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$2\\le n\\le 1\\,500$，$1\\le a_i\\le 86\\,400$，$a_i$ 两两不同。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $9$ | $n\\le 50$ |\n| $2$ | $11$ | $n\\le 1\\,000$ |\n| $3$ | $80$ | $1\\,000<n\\le 1\\,500$ |\n\n对于前两个子任务，你将获得满分当且仅当你正确的解决了该子任务中的每一个测试点，否则将获得零分。\n\n对于第三个子任务，你的得分为其所有测试点的最低分。其中，对于每个测试点，如果你的程序没有正确解决这个测试点，你将获得 $0$ 分。否则，设你询问了 $q$ 次。若 $q\\le n+25$，你将获得 $80$ 分。若 $q>3\\, 000$，你将获得 $0$ 分。否则，你将获得 $118.2-12\\ln(q-n)$ 分，四舍五入至最近的整数。", "locale": "zh-CN"}}}
{"pid": "P11491", "type": "P", "difficulty": 5, "samples": [["18 4 5 2\n8\n15", "29"], ["18 4 0 2\n8\n15", "18"], ["18 10 100 2\n8\n15", "20"], ["18 4 100 0", "418"], ["65 20 100 3\n14\n25\n33", "172"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2023", "O2优化", "动态规划优化", "BalticOI（波罗的海）"], "title": "[BalticOI 2023] Tycho", "background": "", "description": "你在一条数轴上，初始（第 $0$ 秒末）你的坐标是 $0$，你要移动到坐标为 $b$ 的点上。每一秒，你都可以选择向前移动一步（坐标 $+1$）或等待（坐标不变）。给定正整数 $p$ 和非负整数 $d$，对于每个非负整数 $k\\ge 0$，若第 $kp$ 秒末，你的坐标不为 $0$，$b$，也不为给定的 $a_1,a_2,\\cdots,a_n$ 中的一个，则会产生 $d$ 的代价。你要最小化到达坐标为 $b$ 的点的时间和产生的代价之和。输出这个最小值。", "inputFormat": "第一行四个非负整数 $b,p,d,n$。\n\n接下来 $n$ 行，第 $i$ 行一个正整数 $a_i$。", "outputFormat": "一行一个非负整数表示答案。", "hint": "**【样例解释】**\n\n样例 #1 中，一种最优方案是先一直走到坐标为 $15$ 的点，等待 $1$ 秒，再花 $3$ 秒走到终点。总耗时 $19$ 秒，在第 $4$ 秒末和第 $12$ 秒末各产生了 $d=5$ 的代价。答案为 $19+2\\times5=29$。\n\n样例 #2 中，一种最优方案是直接走到终点，总耗时 $18$ 秒。因为 $d=0$，不会产生代价，答案为 $18$。\n\n样例 #3 中，一种最优方案是在原点等待 $2$ 秒再直接走到终点，总耗时 $20$ 秒，没有产生代价，答案为 $20$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le p<b\\le 10^{12}$，$0\\le d\\le 10^6$，$0\\le n\\le 10^5$，$n<b$。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $8$ | $p\\le 10^6$ 且离开坐标为 $0$ 的点**后**不需要等待$^{[1]}$ |\n| $2$ | $5$ | $b\\le1\\,000$，$p\\le 100$，$n\\le 10$ |\n| $3$ | $7$ | $b\\le1\\,000$ |\n| $4$ | $15$ | $p\\le 10^6$，$n\\le 1\\,000$ |\n| $5$ | $20$ | $p\\le 100$ |\n| $6$ | $35$ | $p\\le 10^6$ |\n| $7$ | $10$ | 无特殊限制 |\n\n\n$[1]$：离开坐标为 $0$ 的点之前仍然可能需要等待。例如，样例 #2、样例 #3 和样例 #4 均符合子任务 $1$ 的要求。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2023] Tycho", "background": "", "description": "你在一条数轴上，初始（第 $0$ 秒末）你的坐标是 $0$，你要移动到坐标为 $b$ 的点上。每一秒，你都可以选择向前移动一步（坐标 $+1$）或等待（坐标不变）。给定正整数 $p$ 和非负整数 $d$，对于每个非负整数 $k\\ge 0$，若第 $kp$ 秒末，你的坐标不为 $0$，$b$，也不为给定的 $a_1,a_2,\\cdots,a_n$ 中的一个，则会产生 $d$ 的代价。你要最小化到达坐标为 $b$ 的点的时间和产生的代价之和。输出这个最小值。", "inputFormat": "第一行四个非负整数 $b,p,d,n$。\n\n接下来 $n$ 行，第 $i$ 行一个正整数 $a_i$。", "outputFormat": "一行一个非负整数表示答案。", "hint": "**【样例解释】**\n\n样例 #1 中，一种最优方案是先一直走到坐标为 $15$ 的点，等待 $1$ 秒，再花 $3$ 秒走到终点。总耗时 $19$ 秒，在第 $4$ 秒末和第 $12$ 秒末各产生了 $d=5$ 的代价。答案为 $19+2\\times5=29$。\n\n样例 #2 中，一种最优方案是直接走到终点，总耗时 $18$ 秒。因为 $d=0$，不会产生代价，答案为 $18$。\n\n样例 #3 中，一种最优方案是在原点等待 $2$ 秒再直接走到终点，总耗时 $20$ 秒，没有产生代价，答案为 $20$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le p<b\\le 10^{12}$，$0\\le d\\le 10^6$，$0\\le n\\le 10^5$，$n<b$。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $8$ | $p\\le 10^6$ 且离开坐标为 $0$ 的点**后**不需要等待$^{[1]}$ |\n| $2$ | $5$ | $b\\le1\\,000$，$p\\le 100$，$n\\le 10$ |\n| $3$ | $7$ | $b\\le1\\,000$ |\n| $4$ | $15$ | $p\\le 10^6$，$n\\le 1\\,000$ |\n| $5$ | $20$ | $p\\le 100$ |\n| $6$ | $35$ | $p\\le 10^6$ |\n| $7$ | $10$ | 无特殊限制 |\n\n\n$[1]$：离开坐标为 $0$ 的点之前仍然可能需要等待。例如，样例 #2、样例 #3 和样例 #4 均符合子任务 $1$ 的要求。", "locale": "zh-CN"}}}
{"pid": "P11492", "type": "P", "difficulty": 5, "samples": [["3\n1 2\n2 3", "3"], ["4\n1 2\n1 3\n1 4", "7"], ["1", "0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "树形 DP", "BalticOI（波罗的海）"], "title": "[BalticOI 2023] Minequake", "background": "", "description": "给定一棵 $n$ 个结点的树，初始你要选择一个结点出发，接下来每一单位时间内都可以走到其相邻的一个结点。你需要访问每一个结点，求每个结点第一次被访问到的时间之和的最小值。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示编号为 $u$ 的结点和编号为 $v$ 的结点之间有一条边。", "outputFormat": "一行一个非负整数表示答案。", "hint": "**【样例解释】**\n\n样例 #1 中，一种最优方案是 $1\\to 2\\to 3$，答案为 $0+1+2=3$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，$1\\le u,v\\le n$，输入为一棵树。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $18$ | 不存在度数大于 $2$ 的结点 |\n| $2$ | $19$ | 至多存在一个度数大于 $2$ 的结点 |\n| $3$ | $20$ | $n\\le 10$ |\n| $4$ | $21$ | $n\\le 1\\,000$ |\n| $5$ | $22$ | 无特殊限制 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2023] Minequake", "background": "", "description": "给定一棵 $n$ 个结点的树，初始你要选择一个结点出发，接下来每一单位时间内都可以走到其相邻的一个结点。你需要访问每一个结点，求每个结点第一次被访问到的时间之和的最小值。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示编号为 $u$ 的结点和编号为 $v$ 的结点之间有一条边。", "outputFormat": "一行一个非负整数表示答案。", "hint": "**【样例解释】**\n\n样例 #1 中，一种最优方案是 $1\\to 2\\to 3$，答案为 $0+1+2=3$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，$1\\le u,v\\le n$，输入为一棵树。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $18$ | 不存在度数大于 $2$ 的结点 |\n| $2$ | $19$ | 至多存在一个度数大于 $2$ 的结点 |\n| $3$ | $20$ | $n\\le 10$ |\n| $4$ | $21$ | $n\\le 1\\,000$ |\n| $5$ | $22$ | 无特殊限制 |\n", "locale": "zh-CN"}}}
{"pid": "P11493", "type": "P", "difficulty": 7, "samples": [["4 2 10\n2 4 4 4 6 10\n0 3 5 8", "? -4 -3 -1 0 2 -1\n? 1 2 0 -2\n! 1 2 -3 -2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "交互题", "Special Judge", "O2优化", "BalticOI（波罗的海）"], "title": "[BalticOI 2023] Mineral Deposits", "background": "", "description": "**这是一道交互题**。\n\n平面上有 $k$ 个**不同的**整点，其横纵坐标都在 $[-b,b]$ 中。每次询问你可以给定不超过 $2\\,000$（设为 $d$）**不同**的整点，交互库会告诉你所有这些整点到原先的整点的曼哈顿距离（共 $kd$ 个）的可重集。\n\n你要在 $w$ 次询问中求出这 $k$ 个整点，且所有询问的 $d$ 之和不能超过 $2\\times10^4$。\n\n平面上两个点 $(x_1,y_1)$ 和 $(x_2,y_2)$ 的曼哈顿距离定义为 $|x_1-x_2|+|y_1-y_2|$。 \n\n**【交互格式】**\n\n首先选手程序读入一行三个正整数 $b,k,w$。\n\n接下来选手可以进行不超过 $w$ 次询问，每次询问形如 $\\texttt{?}\\ s_1\\ t_1\\ s_2\\ t_2\\ \\cdots\\ s_d\\ t_d$，表示你询问的点为 $(s_1,t_1),(s_2,t_2),\\cdots,(s_d,t_d)$。你需要保证 $-10^8\\le s_i,t_i\\le 10^8$，且$d\\le 2\\,000$，且 $\\sum d\\le 2\\times10^4$ 且一个询问中的 $(s_i,t_i)$ 互不相同。\n\n每次询问后，你需要从标准输入中读入一行 $kd$ 个不降的非负整数，表示所有距离组成的可重集。\n\n如果你确定了所有 $k$ 个点的坐标，则输出一行 $\\texttt{!}\\ x_1\\ y_1\\ x_2\\ y_2\\ \\cdots\\ x_k\\ y_k$ 表示这 $k$ 个点的坐标为 $(x_1,y_1),(x_2,y_2),\\cdots,(x_k,y_k)$。**你可以以任意顺序输出这 $k$ 个点。**\n\n**每次询问后，你需要清空缓冲区。**", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "**【样例解释】**\n\n第一次询问得到的回答分别为 $2=|(-4)-(-3)|+|(-3)-(-2)|,4=|(-1)-1|+|0-2|,4=|2-1|+|(-1)-2|,4=|(-1)-(-3)|+|0-(-2)|,6=|2-(-3)|+|(-1)-(-2)|,10=|(-4)-1|+|(-3)-2|$。\n\n第二次询问得到的回答分别为 $0=|1-1|+|2-2|,3=|0-(-3)|+|(-2)-(-2)|,5=|0-1|+|(-2)-2|,8=|1-(-3)|+|2-(-2)|$。\n\n需要注意的是，样例仅为展示交互格式，给出的信息并不足以确定答案。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le b\\le 10^8$，$1\\le k\\le 20$，$2\\le w\\le 10^4$。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $9$ | $k=1$，$w=10^4$ |\n| $2$ | $19$ | $w\\ge 500$ |\n| $3$ | $11$ | $w\\ge 210$ |\n| $4$ | $7$ | $w\\ge 130$ |\n| $5$ | $20$ | $w\\ge 3$，$b\\le 10^4$ |\n| $6$ | $15$ | $w\\ge 3$，$b\\le 10^7$ |\n| $7$ | $19$ | 无特殊限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2023] Mineral Deposits", "background": "", "description": "**这是一道交互题**。\n\n平面上有 $k$ 个**不同的**整点，其横纵坐标都在 $[-b,b]$ 中。每次询问你可以给定不超过 $2\\,000$（设为 $d$）**不同**的整点，交互库会告诉你所有这些整点到原先的整点的曼哈顿距离（共 $kd$ 个）的可重集。\n\n你要在 $w$ 次询问中求出这 $k$ 个整点，且所有询问的 $d$ 之和不能超过 $2\\times10^4$。\n\n平面上两个点 $(x_1,y_1)$ 和 $(x_2,y_2)$ 的曼哈顿距离定义为 $|x_1-x_2|+|y_1-y_2|$。 \n\n**【交互格式】**\n\n首先选手程序读入一行三个正整数 $b,k,w$。\n\n接下来选手可以进行不超过 $w$ 次询问，每次询问形如 $\\texttt{?}\\ s_1\\ t_1\\ s_2\\ t_2\\ \\cdots\\ s_d\\ t_d$，表示你询问的点为 $(s_1,t_1),(s_2,t_2),\\cdots,(s_d,t_d)$。你需要保证 $-10^8\\le s_i,t_i\\le 10^8$，且$d\\le 2\\,000$，且 $\\sum d\\le 2\\times10^4$ 且一个询问中的 $(s_i,t_i)$ 互不相同。\n\n每次询问后，你需要从标准输入中读入一行 $kd$ 个不降的非负整数，表示所有距离组成的可重集。\n\n如果你确定了所有 $k$ 个点的坐标，则输出一行 $\\texttt{!}\\ x_1\\ y_1\\ x_2\\ y_2\\ \\cdots\\ x_k\\ y_k$ 表示这 $k$ 个点的坐标为 $(x_1,y_1),(x_2,y_2),\\cdots,(x_k,y_k)$。**你可以以任意顺序输出这 $k$ 个点。**\n\n**每次询问后，你需要清空缓冲区。**", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "**【样例解释】**\n\n第一次询问得到的回答分别为 $2=|(-4)-(-3)|+|(-3)-(-2)|,4=|(-1)-1|+|0-2|,4=|2-1|+|(-1)-2|,4=|(-1)-(-3)|+|0-(-2)|,6=|2-(-3)|+|(-1)-(-2)|,10=|(-4)-1|+|(-3)-2|$。\n\n第二次询问得到的回答分别为 $0=|1-1|+|2-2|,3=|0-(-3)|+|(-2)-(-2)|,5=|0-1|+|(-2)-2|,8=|1-(-3)|+|2-(-2)|$。\n\n需要注意的是，样例仅为展示交互格式，给出的信息并不足以确定答案。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le b\\le 10^8$，$1\\le k\\le 20$，$2\\le w\\le 10^4$。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $9$ | $k=1$，$w=10^4$ |\n| $2$ | $19$ | $w\\ge 500$ |\n| $3$ | $11$ | $w\\ge 210$ |\n| $4$ | $7$ | $w\\ge 130$ |\n| $5$ | $20$ | $w\\ge 3$，$b\\le 10^4$ |\n| $6$ | $15$ | $w\\ge 3$，$b\\le 10^7$ |\n| $7$ | $19$ | 无特殊限制 |", "locale": "zh-CN"}}}
{"pid": "P11494", "type": "P", "difficulty": 0, "samples": [["3\n10\n42\n1", "10\n52\n53"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "BalticOI（波罗的海）"], "title": "[BalticOI 2023] Sequence", "background": "", "description": "给定一个长度为 $n$ 的序列 $w_1,w_2,\\cdots,w_n$。称一个序列 $x_1,\\cdots,x_m$ 是好的，当且仅当每个 $x_i$ 都是 $[1,n]$ 中的正整数，且 $x_1=1$，且对于 $i=2,\\cdots,m$ 都有 $x_i=x_{i-1}+1$ 或存在正整数 $1\\le j,k<i$ 满足 $x_i=x_jx_k$。一个好序列的权值定义为 $\\sum\\limits_{i=1}^mw_{x_i}$。\n\n例如，若 $n=3$ 而 $w_1=10,w_2=42,w_3=1$，则 $[1,1]$ 为权值为 $20$ 的好序列，$[1,2]$ 为权值为 $52$ 的好序列，$[1,3]$ 不是好序列。\n\n对于每个 $v=1,2,\\cdots,n$，试求出所有包含 $v$ 的好序列的最小可能权值。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行一个正整数 $w_i$。", "outputFormat": "输出 $n$ 行，第 $i$ 行一个正整数表示 $v=i$ 时的答案。", "hint": "**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 30\\,000$，$1\\le w_i\\le 10^6$。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $11$ | $n\\le 10$ |\n| $2$ | $10$ | $n\\le 300$，$w_1=w_2=\\cdots=w_n=1$ |\n| $3$ | $10$ | $n\\le 300$，$w_1=w_2=\\cdots=w_n$ |\n| $4$ | $9$ | $n\\le 1\\,400$，$w_1=w_2=\\cdots=w_n=1$ |\n| $5$ | $45$ | $n\\le 5\\,000$ |\n| $6$ | $15$ | 无特殊限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2023] Sequence", "background": "", "description": "给定一个长度为 $n$ 的序列 $w_1,w_2,\\cdots,w_n$。称一个序列 $x_1,\\cdots,x_m$ 是好的，当且仅当每个 $x_i$ 都是 $[1,n]$ 中的正整数，且 $x_1=1$，且对于 $i=2,\\cdots,m$ 都有 $x_i=x_{i-1}+1$ 或存在正整数 $1\\le j,k<i$ 满足 $x_i=x_jx_k$。一个好序列的权值定义为 $\\sum\\limits_{i=1}^mw_{x_i}$。\n\n例如，若 $n=3$ 而 $w_1=10,w_2=42,w_3=1$，则 $[1,1]$ 为权值为 $20$ 的好序列，$[1,2]$ 为权值为 $52$ 的好序列，$[1,3]$ 不是好序列。\n\n对于每个 $v=1,2,\\cdots,n$，试求出所有包含 $v$ 的好序列的最小可能权值。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行一个正整数 $w_i$。", "outputFormat": "输出 $n$ 行，第 $i$ 行一个正整数表示 $v=i$ 时的答案。", "hint": "**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 30\\,000$，$1\\le w_i\\le 10^6$。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $11$ | $n\\le 10$ |\n| $2$ | $10$ | $n\\le 300$，$w_1=w_2=\\cdots=w_n=1$ |\n| $3$ | $10$ | $n\\le 300$，$w_1=w_2=\\cdots=w_n$ |\n| $4$ | $9$ | $n\\le 1\\,400$，$w_1=w_2=\\cdots=w_n=1$ |\n| $5$ | $45$ | $n\\le 5\\,000$ |\n| $6$ | $15$ | 无特殊限制 |", "locale": "zh-CN"}}}
{"pid": "P11495", "type": "P", "difficulty": 2, "samples": [["1\n5\n2", "4"], ["4\n9\n6", "0"]], "limits": {"time": [200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2019] 两次测量 (Day 1)", "background": "翻译自 [ROIR 2019 D1T1](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day1.pdf)。", "description": "科学家们计划在 X-2019 星球上使用研究模块进行一次重要实验。在实验过程中，将进行两次测量：主要测量和控制测量。每次测量都需要 $1$ 小时，并且必须在研究模块开始工作后的整点开始。\n\n实验的数据将在测量结束后立即传输到轨道站。与轨道站的通信通道将在研究模块开始工作后的第 $l$ 到 $r$ 小时之间建立。此外，根据实验计划，两次测量之间，星球必须完成整数圈的自转。X-2019 星球自转一圈需要 $a$ 小时。\n\n因此，如果两次测量分别在第 $i$ 小时和第 $j$ 小时进行，则必须满足 $l \\le i < j \\le r$，且 $a\\mid j - i$。\n\n现在，科学家们需要知道，有多少种不同的可行的测量方案。\n\n简单来说，给定 $l,r,a$，你需要求出满足 $l \\le i < j \\le r$ 且 $a\\mid j - i$ 的整数对 $(i,j)$ 的数量。", "inputFormat": "输入三行，每行一个整数，分别是 $l,r,a$。", "outputFormat": "输出一个整数表示答案。", "hint": "### 样例解释：\n\n样例 $1$ 中的四种可行测量方案分别为 $(1,3),(1,5),(2,4),(3,5)$。\n\n样例 $2$ 中，通信通道的工作时间不足以进行两次测量。\n\n### 数据范围：\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | $1\\le l,r,a\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $30$ | $100$ |\n| $2$ | $30$ | $10^5$ |\n| $3$ | $40$ | $10^9$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2019] 两次测量 (Day 1)", "background": "翻译自 [ROIR 2019 D1T1](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day1.pdf)。", "description": "科学家们计划在 X-2019 星球上使用研究模块进行一次重要实验。在实验过程中，将进行两次测量：主要测量和控制测量。每次测量都需要 $1$ 小时，并且必须在研究模块开始工作后的整点开始。\n\n实验的数据将在测量结束后立即传输到轨道站。与轨道站的通信通道将在研究模块开始工作后的第 $l$ 到 $r$ 小时之间建立。此外，根据实验计划，两次测量之间，星球必须完成整数圈的自转。X-2019 星球自转一圈需要 $a$ 小时。\n\n因此，如果两次测量分别在第 $i$ 小时和第 $j$ 小时进行，则必须满足 $l \\le i < j \\le r$，且 $a\\mid j - i$。\n\n现在，科学家们需要知道，有多少种不同的可行的测量方案。\n\n简单来说，给定 $l,r,a$，你需要求出满足 $l \\le i < j \\le r$ 且 $a\\mid j - i$ 的整数对 $(i,j)$ 的数量。", "inputFormat": "输入三行，每行一个整数，分别是 $l,r,a$。", "outputFormat": "输出一个整数表示答案。", "hint": "### 样例解释：\n\n样例 $1$ 中的四种可行测量方案分别为 $(1,3),(1,5),(2,4),(3,5)$。\n\n样例 $2$ 中，通信通道的工作时间不足以进行两次测量。\n\n### 数据范围：\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | $1\\le l,r,a\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $30$ | $100$ |\n| $2$ | $30$ | $10^5$ |\n| $3$ | $40$ | $10^9$ |", "locale": "zh-CN"}}}
{"pid": "P11496", "type": "P", "difficulty": 3, "samples": [["0", "0"], ["-5", "2"], ["2", "none"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2019] 完全平方 (Day 1)", "background": "翻译自 [ROIR 2019 D1T2](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day1.pdf)。", "description": "我们知道序列 $0,0+1,0+1+3,0+1+3+5,\\dots,0+1+3+\\dots+(2i-1),\\dots$ 的第 $i$ 项是 $i^2$，即，这个序列里的数全部都是完全平方数。\n\n现在我们不让这个序列从 $0$ 开始，而是从 $k$ 开始：$k,k+1,k+1+3,k+1+3+5,\\dots,k+1+3+\\dots+(2i-1),\\dots$。\n\n你需要找到这个序列中最小的完全平方数，并输出它的算术平方根。", "inputFormat": "输入一个整数 $k$。", "outputFormat": "输出序列中最小的完全平方数的算术平方根，如果没有，输出 `none`。", "hint": "### 样例解释：\n\n- 样例 $1$ 中的序列即为题目中提到的完全平方数序列，其中最小的数是 $0$，$\\sqrt0=0$。\n- 样例 $2$ 中的序列为 $-5,-4,-1,4,11,20,\\dots$，其中最小的完全平方数是 $4$，$\\sqrt4=2$。\n- 样例 $3$ 中的序列为 $2,3,6,11,18,\\dots$，可以证明其中不存在完全平方数。\n\n### 数据范围：\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $7$ | $0\\le k\\le1000$ |\n| $2$ | $10$ | $0 \\leq k \\leq 10^5$ |\n| $3$ | $27$ | $0 \\leq k \\leq 10^{12}$ |\n| $4$ | $7$ | $-1000 \\leq k \\leq 1000$ |\n| $5$ | $10$ | $-10^5 \\leq k \\leq 10^5$ |\n| $6$ | $39$ | $-10^{12} \\leq k \\leq 10^{12}$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2019] 完全平方 (Day 1)", "background": "翻译自 [ROIR 2019 D1T2](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day1.pdf)。", "description": "我们知道序列 $0,0+1,0+1+3,0+1+3+5,\\dots,0+1+3+\\dots+(2i-1),\\dots$ 的第 $i$ 项是 $i^2$，即，这个序列里的数全部都是完全平方数。\n\n现在我们不让这个序列从 $0$ 开始，而是从 $k$ 开始：$k,k+1,k+1+3,k+1+3+5,\\dots,k+1+3+\\dots+(2i-1),\\dots$。\n\n你需要找到这个序列中最小的完全平方数，并输出它的算术平方根。", "inputFormat": "输入一个整数 $k$。", "outputFormat": "输出序列中最小的完全平方数的算术平方根，如果没有，输出 `none`。", "hint": "### 样例解释：\n\n- 样例 $1$ 中的序列即为题目中提到的完全平方数序列，其中最小的数是 $0$，$\\sqrt0=0$。\n- 样例 $2$ 中的序列为 $-5,-4,-1,4,11,20,\\dots$，其中最小的完全平方数是 $4$，$\\sqrt4=2$。\n- 样例 $3$ 中的序列为 $2,3,6,11,18,\\dots$，可以证明其中不存在完全平方数。\n\n### 数据范围：\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $7$ | $0\\le k\\le1000$ |\n| $2$ | $10$ | $0 \\leq k \\leq 10^5$ |\n| $3$ | $27$ | $0 \\leq k \\leq 10^{12}$ |\n| $4$ | $7$ | $-1000 \\leq k \\leq 1000$ |\n| $5$ | $10$ | $-10^5 \\leq k \\leq 10^5$ |\n| $6$ | $39$ | $-10^{12} \\leq k \\leq 10^{12}$ |", "locale": "zh-CN"}}}
{"pid": "P11497", "type": "P", "difficulty": 5, "samples": [["1 1\n1\n1", "1\n1"], ["4 5\n4 1 2 4 4\n4 3 2 1", "7\n4 4 2 4 4 1 4"], ["2 2\n1 2\n2 1", "3\n2 2 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2019] 自动仓库 (Day 1)", "background": "翻译自 [ROIR 2019 D1T3](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day1.pdf)。", "description": "公司正在进行仓库自动化。仓库里存放着 $n$ 种商品，编号从 $1$ 到 $n$，每种商品存放在一个独立的房间里。编号为 $i$ 的商品存放在编号为 $i$ 的房间里。\n\n一个机器人负责从仓库取货。机器人使用特殊的电子卡片进入仓库的房间。卡片在机器人的一个专用卡槽中。机器人可以从卡槽中取出**最前端**的卡片。取出的卡片可以放回卡槽中的**任意位置**。\n\n为了进入一个房间，机器人按以下步骤操作：\n\n- 从卡槽中取出一个卡片，并放回卡槽中。\n- 重复这样的操作，直到卡槽最前端的卡片是它需要进入的房间的卡片。\n- 然后，取出这张卡片，使用它进入房间，并将其放回卡槽中。\n\n如果机器人总共取出了 $x$ 张卡片（包括最终打开房间的那张），我们说机器人为了进入这个房间进行了 $x$ 次操作。\n\n现在，机器人需要按顺序取出 $m$ 件商品 $a_{1}, a_{2}, \\dots, a_{m}$。最初，电子卡片在卡槽中的顺序为 $b_{1}, b_{2}, \\dots, b_{n}$。每个房间的卡片在卡槽中恰好有一张。\n\n取出商品所需的时间取决于机器人进入对应房间需要的操作次数。为了让机器人更快取出所有商品，你需要确定机器人放回取出卡片的位置，以最小化机器人的总操作次数。", "inputFormat": "第一行输入两个整数 $n$ 和 $m$，表示商品种类数和需要从仓库取出的商品数。\n\n第二行输入 $m$ 个整数 $a_{1}, a_{2}, \\dots, a_{m}$，表示需要按顺序取出的商品。\n\n第三行输入 $n$ 个不同的整数 $b_{1}, b_{2}, \\dots, b_{n}$，表示卡片在卡槽中的初始顺序。", "outputFormat": "第一行输出一个整数 $k$，表示机器人需要的最小操作次数。\n\n第二行输出 $k$ 个整数，即对于机器人的每次操作，需要将取出的卡片放回卡槽中的位置（从前到后的位置编号为 $1$ 到 $n$，也就是将其放回后这个卡片在卡槽中的位置编号）。\n\n如果有多种方法可以最小化总操作次数，可以输出任意一种。", "hint": "### 样例解释\n\n样例 $2$ 的所有操作如下：\n\n|操作|操作前|取出的卡片|打开的房间|卡片放回的位置|操作后|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$1$|$\\mathbf{4}, 3 , 2 , 1$|$4$|$4$|$4$|$3,2,1, \\mathbf{4}$|\n|$2$|$\\mathbf{3}, 2, 1, 4$|$3$|-|$4$|$2,1,4, \\mathbf{3}$|\n|$3$|$\\mathbf{2} , 1 , 4 , 3$|$2$|-|$2$|$1, \\mathbf{2} , 4 , 3$|\n|$4$|$\\mathbf{1} , 2 , 4 , 3$|$1$|$1$|$4$|$2,4,3, \\mathbf{1}$|\n|$5$|$\\mathbf{2} , 4 , 3 , 1$|$2$|$2$|$4$|$4,3,1, \\mathbf{2}$|\n|$6$|$\\mathbf{4}, 3, 1, 2$|$4$|$4$|$1$|$\\mathbf{4} , 3 , 1 , 2$|\n|$7$|$\\mathbf{4} , 3 , 1 , 2$|$4$|$4$|$4$|$3,1,2,\\mathbf{4}$|\n\n### 数据范围\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $5$ | $1 \\leq n=m \\leq 5 \\cdot 10^{4}$，$a_i=b_i$ |\n| $2$ | $10$ | $1 \\leq n= m \\leq 5 \\cdot 10^{4}$，$a_i=b_{n-i+1}$ |\n| $3$ | $31$ | $1 \\leq n, m \\leq 2000$ |\n| $4$ | $14$ | $1 \\leq n, m \\leq 5 \\cdot 10^{4}$，所有 $a_{i}$ 不同 |\n| $5$ | $14$ | $1 \\leq n \\leq 5 \\cdot 10^{4}, 1 \\leq m \\leq 10^{5}$ |\n| $6$ | $26$ | $1 \\leq n \\leq 3 \\cdot 10^{5}, 1 \\leq m \\leq 3 \\cdot 10^{5}$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2019] 自动仓库 (Day 1)", "background": "翻译自 [ROIR 2019 D1T3](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day1.pdf)。", "description": "公司正在进行仓库自动化。仓库里存放着 $n$ 种商品，编号从 $1$ 到 $n$，每种商品存放在一个独立的房间里。编号为 $i$ 的商品存放在编号为 $i$ 的房间里。\n\n一个机器人负责从仓库取货。机器人使用特殊的电子卡片进入仓库的房间。卡片在机器人的一个专用卡槽中。机器人可以从卡槽中取出**最前端**的卡片。取出的卡片可以放回卡槽中的**任意位置**。\n\n为了进入一个房间，机器人按以下步骤操作：\n\n- 从卡槽中取出一个卡片，并放回卡槽中。\n- 重复这样的操作，直到卡槽最前端的卡片是它需要进入的房间的卡片。\n- 然后，取出这张卡片，使用它进入房间，并将其放回卡槽中。\n\n如果机器人总共取出了 $x$ 张卡片（包括最终打开房间的那张），我们说机器人为了进入这个房间进行了 $x$ 次操作。\n\n现在，机器人需要按顺序取出 $m$ 件商品 $a_{1}, a_{2}, \\dots, a_{m}$。最初，电子卡片在卡槽中的顺序为 $b_{1}, b_{2}, \\dots, b_{n}$。每个房间的卡片在卡槽中恰好有一张。\n\n取出商品所需的时间取决于机器人进入对应房间需要的操作次数。为了让机器人更快取出所有商品，你需要确定机器人放回取出卡片的位置，以最小化机器人的总操作次数。", "inputFormat": "第一行输入两个整数 $n$ 和 $m$，表示商品种类数和需要从仓库取出的商品数。\n\n第二行输入 $m$ 个整数 $a_{1}, a_{2}, \\dots, a_{m}$，表示需要按顺序取出的商品。\n\n第三行输入 $n$ 个不同的整数 $b_{1}, b_{2}, \\dots, b_{n}$，表示卡片在卡槽中的初始顺序。", "outputFormat": "第一行输出一个整数 $k$，表示机器人需要的最小操作次数。\n\n第二行输出 $k$ 个整数，即对于机器人的每次操作，需要将取出的卡片放回卡槽中的位置（从前到后的位置编号为 $1$ 到 $n$，也就是将其放回后这个卡片在卡槽中的位置编号）。\n\n如果有多种方法可以最小化总操作次数，可以输出任意一种。", "hint": "### 样例解释\n\n样例 $2$ 的所有操作如下：\n\n|操作|操作前|取出的卡片|打开的房间|卡片放回的位置|操作后|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$1$|$\\mathbf{4}, 3 , 2 , 1$|$4$|$4$|$4$|$3,2,1, \\mathbf{4}$|\n|$2$|$\\mathbf{3}, 2, 1, 4$|$3$|-|$4$|$2,1,4, \\mathbf{3}$|\n|$3$|$\\mathbf{2} , 1 , 4 , 3$|$2$|-|$2$|$1, \\mathbf{2} , 4 , 3$|\n|$4$|$\\mathbf{1} , 2 , 4 , 3$|$1$|$1$|$4$|$2,4,3, \\mathbf{1}$|\n|$5$|$\\mathbf{2} , 4 , 3 , 1$|$2$|$2$|$4$|$4,3,1, \\mathbf{2}$|\n|$6$|$\\mathbf{4}, 3, 1, 2$|$4$|$4$|$1$|$\\mathbf{4} , 3 , 1 , 2$|\n|$7$|$\\mathbf{4} , 3 , 1 , 2$|$4$|$4$|$4$|$3,1,2,\\mathbf{4}$|\n\n### 数据范围\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $5$ | $1 \\leq n=m \\leq 5 \\cdot 10^{4}$，$a_i=b_i$ |\n| $2$ | $10$ | $1 \\leq n= m \\leq 5 \\cdot 10^{4}$，$a_i=b_{n-i+1}$ |\n| $3$ | $31$ | $1 \\leq n, m \\leq 2000$ |\n| $4$ | $14$ | $1 \\leq n, m \\leq 5 \\cdot 10^{4}$，所有 $a_{i}$ 不同 |\n| $5$ | $14$ | $1 \\leq n \\leq 5 \\cdot 10^{4}, 1 \\leq m \\leq 10^{5}$ |\n| $6$ | $26$ | $1 \\leq n \\leq 3 \\cdot 10^{5}, 1 \\leq m \\leq 3 \\cdot 10^{5}$ |", "locale": "zh-CN"}}}
{"pid": "P11498", "type": "P", "difficulty": 5, "samples": [["2 0 3", "9"], ["3 1 2\n1 2", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "数位 DP", "ROIR（俄罗斯）"], "title": "[ROIR 2019] 机器学习 (Day 1)", "background": "翻译自 [ROIR 2019 D1T4](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day1.pdf)。", "description": "有一种新的机器学习方法。在训练过程中，程序会进行 $n$ 次迭代。每次迭代中，训练程序会在某个训练集上运行。\n\n训练集的复杂度从 $0$ 到 $k$ 不等。训练计划由一个整数数组 $[a_{1}, a_{2}, \\dots, a_{n}]$ 表示，其中 $0 \\leq a_{i} \\leq k$，$a_{i}$ 表示第 $i$ 次迭代中使用的训练集的复杂度。\n\n研究发现，训练计划的有效性取决于训练集复杂度的二进制表示。为了使计划有效，必须满足对于任意的 $1 \\leq i < j \\leq n$，都有 $(a_{i} \\operatorname{and} a_{j})=a_{i}$，其中 $\\operatorname{and}$ 是按位与。\n\n然而，持续使用相同复杂度的训练集不会带来学习进展。为了避免这种情况，训练计划必须满足 $m$ 个二元限制。每个二元限制由两个数字 $l_{i}$ 和 $r_{i}$ 表示，意味着 $a_{l_{i}} \\neq a_{r_{i}}$。\n\n实验室的工作人员希望找到满足所有二元限制的有效计划的数量。由于答案可能很大，你只需要求出答案对 $10^{9}+7$ 取模后的值。", "inputFormat": "第一行输入三个整数 $n, m, k$，分别表示训练迭代次数、二元限制的数量和训练集的最大复杂度。\n\n接下来 $m$ 行，每行输入一个二元限制。其中第 $i$ 行输入两个整数 $l_{i}, r_{i}$，表示 $a_{l_{i}} \\neq a_{r_{i}}$。保证所有二元限制都是不同的。", "outputFormat": "输出一个整数，表示满足所有二元限制的有效计划的数量对 $10^{9}+7$ 取模的结果。", "hint": "### 样例解释\n\n样例 $1$ 中所有可行的计划为：$[0,0],[0,1],[0,2],[0,3],[1,1],[1,3],[2,2],[2,3],[3,3]$。\n\n样例 $2$ 中所有可行的计划为：$[0,1,1],[0,2,2]$。\n\n### 数据范围\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | $1\\le n\\le$ | $0\\le m\\le$ | $0\\le k\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $8$ | $500$ | $0$ | $500$ |\n| $2$ | $20$ | $3\\times10^5$ | $0$ | $10^7$ |\n| $3$ | $10$ | $3\\times10^5$ | $0$ | $10^{18}$ |\n| $4$ | $8$ | $50$ | $50$ | $50$ |\n| $5$ | $16$ | $2000$ | $2000$ | $10^7$ |\n| $6$ | $6$ | $2000$ | $2000$ | $10^{18}$ |\n| $7$ | $10$ | $3\\times10^5$ | $200$ | $10^7$ |\n| $8$ | $6$ | $3\\times10^5$ | $200$ | $10^{18}$ |\n| $9$ | $16$ | $3\\times10^5$ | $3\\times10^5$ | $10^{18}$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2019] 机器学习 (Day 1)", "background": "翻译自 [ROIR 2019 D1T4](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day1.pdf)。", "description": "有一种新的机器学习方法。在训练过程中，程序会进行 $n$ 次迭代。每次迭代中，训练程序会在某个训练集上运行。\n\n训练集的复杂度从 $0$ 到 $k$ 不等。训练计划由一个整数数组 $[a_{1}, a_{2}, \\dots, a_{n}]$ 表示，其中 $0 \\leq a_{i} \\leq k$，$a_{i}$ 表示第 $i$ 次迭代中使用的训练集的复杂度。\n\n研究发现，训练计划的有效性取决于训练集复杂度的二进制表示。为了使计划有效，必须满足对于任意的 $1 \\leq i < j \\leq n$，都有 $(a_{i} \\operatorname{and} a_{j})=a_{i}$，其中 $\\operatorname{and}$ 是按位与。\n\n然而，持续使用相同复杂度的训练集不会带来学习进展。为了避免这种情况，训练计划必须满足 $m$ 个二元限制。每个二元限制由两个数字 $l_{i}$ 和 $r_{i}$ 表示，意味着 $a_{l_{i}} \\neq a_{r_{i}}$。\n\n实验室的工作人员希望找到满足所有二元限制的有效计划的数量。由于答案可能很大，你只需要求出答案对 $10^{9}+7$ 取模后的值。", "inputFormat": "第一行输入三个整数 $n, m, k$，分别表示训练迭代次数、二元限制的数量和训练集的最大复杂度。\n\n接下来 $m$ 行，每行输入一个二元限制。其中第 $i$ 行输入两个整数 $l_{i}, r_{i}$，表示 $a_{l_{i}} \\neq a_{r_{i}}$。保证所有二元限制都是不同的。", "outputFormat": "输出一个整数，表示满足所有二元限制的有效计划的数量对 $10^{9}+7$ 取模的结果。", "hint": "### 样例解释\n\n样例 $1$ 中所有可行的计划为：$[0,0],[0,1],[0,2],[0,3],[1,1],[1,3],[2,2],[2,3],[3,3]$。\n\n样例 $2$ 中所有可行的计划为：$[0,1,1],[0,2,2]$。\n\n### 数据范围\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | $1\\le n\\le$ | $0\\le m\\le$ | $0\\le k\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $8$ | $500$ | $0$ | $500$ |\n| $2$ | $20$ | $3\\times10^5$ | $0$ | $10^7$ |\n| $3$ | $10$ | $3\\times10^5$ | $0$ | $10^{18}$ |\n| $4$ | $8$ | $50$ | $50$ | $50$ |\n| $5$ | $16$ | $2000$ | $2000$ | $10^7$ |\n| $6$ | $6$ | $2000$ | $2000$ | $10^{18}$ |\n| $7$ | $10$ | $3\\times10^5$ | $200$ | $10^7$ |\n| $8$ | $6$ | $3\\times10^5$ | $200$ | $10^{18}$ |\n| $9$ | $16$ | $3\\times10^5$ | $3\\times10^5$ | $10^{18}$ |", "locale": "zh-CN"}}}
{"pid": "P11499", "type": "P", "difficulty": 2, "samples": [["2\n7\n3", "3"], ["4\n10\n3", "4"]], "limits": {"time": [250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2019] 故障火星车 (Day 2)", "background": "翻译自 [ROIR 2019 D2T1](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day2.pdf)。", "description": "执行国际任务的火星车出现了故障。为了恢复其正常工作，需要提高其电池的功率。\n\n火星车电池的功率用一个正整数表示。当前电池功率为 $a$，为了恢复火星车的工作，需要将其功率提高到 $b$。可以从地球向火星车发送 X 和 Y 这两种类型的特殊信号来改变电池功率：\n- X 信号可以将当前电池功率增加 $1$；\n- Y 信号可以将当前电池功率增加 $2$。\n\n由于一些特性，在提高功率的过程中，电池的功率不能是 $c$ 的倍数，否则火星车的电池将原地爆炸。\n\n你需要求出最少需要发送的信号的数量，使得火星车恢复正常工作。", "inputFormat": "输入包括三行，每行一个整数，分别是 $a,b,c$。保证 $c\\nmid a,c\\nmid b$。", "outputFormat": "输出一个整数表示答案。", "hint": "### 样例解释\n\n样例 $1$ 中，可以按顺序发送 Y，X，Y 信号，电池功率的变化为：$2\\to4\\to5\\to7$。\n\n样例 $2$ 中，可以按顺序发送 X，Y，X，Y 信号，电池功率的变化为：$4\\to5\\to7\\to8\\to10$。\n\n### 数据范围\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | $1\\le a<b\\le$ | $2\\le c\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $25$ | $15$ | $15$ |\n| $2$ | $25$ | $10^5$ | $10^5$ |\n| $3$ | $25$ | $10^9$ | $2$ |\n| $4$ | $25$ | $10^9$ | $10^9$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2019] 故障火星车 (Day 2)", "background": "翻译自 [ROIR 2019 D2T1](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day2.pdf)。", "description": "执行国际任务的火星车出现了故障。为了恢复其正常工作，需要提高其电池的功率。\n\n火星车电池的功率用一个正整数表示。当前电池功率为 $a$，为了恢复火星车的工作，需要将其功率提高到 $b$。可以从地球向火星车发送 X 和 Y 这两种类型的特殊信号来改变电池功率：\n- X 信号可以将当前电池功率增加 $1$；\n- Y 信号可以将当前电池功率增加 $2$。\n\n由于一些特性，在提高功率的过程中，电池的功率不能是 $c$ 的倍数，否则火星车的电池将原地爆炸。\n\n你需要求出最少需要发送的信号的数量，使得火星车恢复正常工作。", "inputFormat": "输入包括三行，每行一个整数，分别是 $a,b,c$。保证 $c\\nmid a,c\\nmid b$。", "outputFormat": "输出一个整数表示答案。", "hint": "### 样例解释\n\n样例 $1$ 中，可以按顺序发送 Y，X，Y 信号，电池功率的变化为：$2\\to4\\to5\\to7$。\n\n样例 $2$ 中，可以按顺序发送 X，Y，X，Y 信号，电池功率的变化为：$4\\to5\\to7\\to8\\to10$。\n\n### 数据范围\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | $1\\le a<b\\le$ | $2\\le c\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $25$ | $15$ | $15$ |\n| $2$ | $25$ | $10^5$ | $10^5$ |\n| $3$ | $25$ | $10^9$ | $2$ |\n| $4$ | $25$ | $10^9$ | $10^9$ |", "locale": "zh-CN"}}}
{"pid": "P11500", "type": "P", "difficulty": 4, "samples": [["6 2", "4"], ["3 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2019", "Special Judge", "前缀和", "ROIR（俄罗斯）"], "title": "[ROIR 2019] 间歇训练 (Day 2)", "background": "翻译自 [ROIR 2019 D2T2](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day2.pdf)。", "description": "体育学院开发了一种新的间歇训练方法。根据这种方法，运动员每天都要训练，但负荷的增加和减少必须交替进行。\n\n训练计划由一组正整数 $a_{1}, a_{2}, \\dots, a_{m}$ 组成，其中 $a_{i}$ 描述了运动员在第 $i$ 天的训练负荷。任何两个相邻的天数的负荷不能相同，即 $a_{i} \\neq a_{i+1}$。为了使负荷的增加和减少交替进行，$a$ 必须满足以下条件：如果 $a_{i}<a_{i+1}$，则 $a_{i+1}>a_{i+2}$；如果 $a_{i}>a_{i+1}$，则 $a_{i+1}<a_{i+2}$。\n\n在整个训练计划中，总负荷必须为 $n$，即 $\\sum\\limits_{i=1}^{m}a_i=n$。计划的天数没有限制，即 $m$ 可以是任意值，但第一天的负荷是固定的，$a_{1}=k$。\n\n学院管理层想知道有多少不同的训练计划符合上述要求。你只需要求出其对 $10^{9}+7$ 取模的结果。", "inputFormat": "输入两个整数 $n$ 和 $k$，保证 $1\\le k\\le n$。", "outputFormat": "输出符合要求的训练计划的数量对 $10^9+7$ 取模的结果。", "hint": "### 样例解释\n\n在样例 $1$ 中，符合要求的计划有 $[2,1,2,1], [2,1,3], [2,3,1], [2,4]$。\n\n在样例 $2$ 中，唯一符合要求的计划为 $[3]$。\n\n### 数据范围\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | $1\\le n\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $23$ | $10$ |\n| $2$ | $20$ | $30$ |\n| $3$ | $23$ | $500$ |\n| $4$ | $34$ | $5000$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2019] 间歇训练 (Day 2)", "background": "翻译自 [ROIR 2019 D2T2](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day2.pdf)。", "description": "体育学院开发了一种新的间歇训练方法。根据这种方法，运动员每天都要训练，但负荷的增加和减少必须交替进行。\n\n训练计划由一组正整数 $a_{1}, a_{2}, \\dots, a_{m}$ 组成，其中 $a_{i}$ 描述了运动员在第 $i$ 天的训练负荷。任何两个相邻的天数的负荷不能相同，即 $a_{i} \\neq a_{i+1}$。为了使负荷的增加和减少交替进行，$a$ 必须满足以下条件：如果 $a_{i}<a_{i+1}$，则 $a_{i+1}>a_{i+2}$；如果 $a_{i}>a_{i+1}$，则 $a_{i+1}<a_{i+2}$。\n\n在整个训练计划中，总负荷必须为 $n$，即 $\\sum\\limits_{i=1}^{m}a_i=n$。计划的天数没有限制，即 $m$ 可以是任意值，但第一天的负荷是固定的，$a_{1}=k$。\n\n学院管理层想知道有多少不同的训练计划符合上述要求。你只需要求出其对 $10^{9}+7$ 取模的结果。", "inputFormat": "输入两个整数 $n$ 和 $k$，保证 $1\\le k\\le n$。", "outputFormat": "输出符合要求的训练计划的数量对 $10^9+7$ 取模的结果。", "hint": "### 样例解释\n\n在样例 $1$ 中，符合要求的计划有 $[2,1,2,1], [2,1,3], [2,3,1], [2,4]$。\n\n在样例 $2$ 中，唯一符合要求的计划为 $[3]$。\n\n### 数据范围\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | $1\\le n\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $23$ | $10$ |\n| $2$ | $20$ | $30$ |\n| $3$ | $23$ | $500$ |\n| $4$ | $34$ | $5000$ |", "locale": "zh-CN"}}}
{"pid": "P11501", "type": "P", "difficulty": 4, "samples": [["4\n2\n4\n2\n1", "2"], ["3\n2\n-1\n2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2019", "Special Judge", "树形 DP", "基环树", "ROIR（俄罗斯）"], "title": "[ROIR 2019] 探险队 (Day 2)", "background": "翻译自 [ROIR 2019 D2T3](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day2.pdf)。", "description": "需要派遣一支探险队前去探索邻近的星系。共有 $n$ 名候选人，编号从 $1$ 到 $n$，探险队成员需要从中选出。\n\n在候选人中进行了一次调查，每个人可以指出一个他不愿意与之一起参加探险的候选人。对于第 $i$ 个候选人，调查结果是一个整数 $a_{i}$，表示他不愿意与编号为 $a_i$ 的人一起参加探险。如果 $i$ 号候选人愿意与任何人一起参加探险，则 $a_{i} = -1$。\n\n你需要求出在满足所有派遣出的候选人的意愿的情况下，最大的可以派遣的人数。", "inputFormat": "第一行输入一个整数 $n$。\n\n接下来 $n$ 行，每行输入一个整数，分别是 $a_1,a_2,\\dots,a_n$。", "outputFormat": "输出一个整数，表示最大可以派遣的人数。", "hint": "数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $19$ | $n\\le20$ |\n| $2$ | $10$ | $a_1=-1$，$\\forall i>1,a_i=i-1$ |\n| $3$ | $15$ | $a_i<i$ |\n| $4$ | $13$ | $1\\le n\\le2000$ |\n| $5$ | $43$ | 无特殊性质 |\n\n对于 $100\\%$ 的数据，$n\\le3\\times10^5$，$a_i=-1$ 或 $1\\le a_i\\le n$，且 $a_i\\ne i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2019] 探险队 (Day 2)", "background": "翻译自 [ROIR 2019 D2T3](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day2.pdf)。", "description": "需要派遣一支探险队前去探索邻近的星系。共有 $n$ 名候选人，编号从 $1$ 到 $n$，探险队成员需要从中选出。\n\n在候选人中进行了一次调查，每个人可以指出一个他不愿意与之一起参加探险的候选人。对于第 $i$ 个候选人，调查结果是一个整数 $a_{i}$，表示他不愿意与编号为 $a_i$ 的人一起参加探险。如果 $i$ 号候选人愿意与任何人一起参加探险，则 $a_{i} = -1$。\n\n你需要求出在满足所有派遣出的候选人的意愿的情况下，最大的可以派遣的人数。", "inputFormat": "第一行输入一个整数 $n$。\n\n接下来 $n$ 行，每行输入一个整数，分别是 $a_1,a_2,\\dots,a_n$。", "outputFormat": "输出一个整数，表示最大可以派遣的人数。", "hint": "数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $19$ | $n\\le20$ |\n| $2$ | $10$ | $a_1=-1$，$\\forall i>1,a_i=i-1$ |\n| $3$ | $15$ | $a_i<i$ |\n| $4$ | $13$ | $1\\le n\\le2000$ |\n| $5$ | $43$ | 无特殊性质 |\n\n对于 $100\\%$ 的数据，$n\\le3\\times10^5$，$a_i=-1$ 或 $1\\le a_i\\le n$，且 $a_i\\ne i$。", "locale": "zh-CN"}}}
{"pid": "P11502", "type": "P", "difficulty": 6, "samples": [["6 2\n8 6\n1 5\n6 3\n3 1\n4 7\n7 2", "YES\n1 4\n2 6\n3 5"], ["4 3\n1 -1 -1\n2 1 1\n3 -1 1\n4 1 -1", "NO"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "网络流", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2019] 配对 (Day 2)", "background": "翻译自 [ROIR 2019 D2T4](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day2.pdf)。", "description": "宇宙考古科学家在邻近星系的一颗行星上发现了 $n$ 件古代文物，并将它们编号为 $1$ 到 $n$。每件文物有 $k$ 个不同的参数，每个参数都是一个整数。文物 $i$ 的参数为 $a_{i, 1}, a_{i, 2}, \\dots, a_{i, k}$。他们惊奇的发现，所有文物的第一个参数都是不同的，即对于所有 $i \\neq j$，都有 $a_{i, 1} \\neq a_{j, 1}$。但是，其他参数可能相同。\n\n科学家们还发现了一段文字，根据这段文字，要激活文物，需要将它们按特定方案配对。称一个配对方案是有效的，当且仅当对于每个 $1\\le t\\le k$，可以确定一个数 $b_{t}$，使其在**每对文物**的第 $t$ 个参数值之间。也就是说，在这个配对方案中，对于所有配对的文物 $i$ 和 $j$，必须满足 $a_{i, t} \\leq b_{t} \\leq a_{j, t}$ 或 $a_{i, t} \\geq b_{t} \\geq a_{j, t}$。\n\n现在，科学家们想知道这段文字是否解读正确。为此，你需要需要判断是否存在有效的配对方案，使得所有文物可以两两正确配对。如果可以，你还需要找到这样一个配对方案。", "inputFormat": "第一行输入两个整数 $n$ 和 $k$，表示文物数量和参数数量。\n\n接下来 $n$ 行，每行包含 $k$ 个整数 $a_{i, 1}, a_{i, 2}, \\dots, a_{i, k}$，表示文物的参数。", "outputFormat": "如果不存在有效的配对方式，输出 `NO`。\n\n否则，第一行输出 `YES`。接下来 $\\frac n 2$ 行，每行包含两个整数，表示配对的文物编号。每个文物只能出现一次。\n\n如果有多个合法的配对方案，可以输出任意一个。", "hint": "### 样例解释\n\n样例 $1$ 中，一个合法的配对方案为 $(8, 6) - (3, 1), (1, 5) - (7, 2), (6, 3) - (4, 7)$。此时可以选择 $b_1=b_2=4$。\n\n### 数据范围\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $n\\le10$ |\n| $2$ | $7$ | $k=1$ |\n| $3$ | $15$ | 对于任意 $t$，所有 $a_{i,t}$ 互不相同 |\n| $4$ | $15$ | $k\\le2$ |\n| $5$ | $26$ | $n\\le400$ |\n| $6$ | $27$ | 无特殊性质 |\n\n对于 $100\\%$ 的数据，$2\\le n\\le2\\times10^5$，$n$ 为偶数，$1\\le k\\le7$，$|a_{i,j}|\\le10^9$，所有 $a_{i,1}$ 互不相同。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2019] 配对 (Day 2)", "background": "翻译自 [ROIR 2019 D2T4](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day2.pdf)。", "description": "宇宙考古科学家在邻近星系的一颗行星上发现了 $n$ 件古代文物，并将它们编号为 $1$ 到 $n$。每件文物有 $k$ 个不同的参数，每个参数都是一个整数。文物 $i$ 的参数为 $a_{i, 1}, a_{i, 2}, \\dots, a_{i, k}$。他们惊奇的发现，所有文物的第一个参数都是不同的，即对于所有 $i \\neq j$，都有 $a_{i, 1} \\neq a_{j, 1}$。但是，其他参数可能相同。\n\n科学家们还发现了一段文字，根据这段文字，要激活文物，需要将它们按特定方案配对。称一个配对方案是有效的，当且仅当对于每个 $1\\le t\\le k$，可以确定一个数 $b_{t}$，使其在**每对文物**的第 $t$ 个参数值之间。也就是说，在这个配对方案中，对于所有配对的文物 $i$ 和 $j$，必须满足 $a_{i, t} \\leq b_{t} \\leq a_{j, t}$ 或 $a_{i, t} \\geq b_{t} \\geq a_{j, t}$。\n\n现在，科学家们想知道这段文字是否解读正确。为此，你需要需要判断是否存在有效的配对方案，使得所有文物可以两两正确配对。如果可以，你还需要找到这样一个配对方案。", "inputFormat": "第一行输入两个整数 $n$ 和 $k$，表示文物数量和参数数量。\n\n接下来 $n$ 行，每行包含 $k$ 个整数 $a_{i, 1}, a_{i, 2}, \\dots, a_{i, k}$，表示文物的参数。", "outputFormat": "如果不存在有效的配对方式，输出 `NO`。\n\n否则，第一行输出 `YES`。接下来 $\\frac n 2$ 行，每行包含两个整数，表示配对的文物编号。每个文物只能出现一次。\n\n如果有多个合法的配对方案，可以输出任意一个。", "hint": "### 样例解释\n\n样例 $1$ 中，一个合法的配对方案为 $(8, 6) - (3, 1), (1, 5) - (7, 2), (6, 3) - (4, 7)$。此时可以选择 $b_1=b_2=4$。\n\n### 数据范围\n\n数据中 Subtask 0 为样例。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $n\\le10$ |\n| $2$ | $7$ | $k=1$ |\n| $3$ | $15$ | 对于任意 $t$，所有 $a_{i,t}$ 互不相同 |\n| $4$ | $15$ | $k\\le2$ |\n| $5$ | $26$ | $n\\le400$ |\n| $6$ | $27$ | 无特殊性质 |\n\n对于 $100\\%$ 的数据，$2\\le n\\le2\\times10^5$，$n$ 为偶数，$1\\le k\\le7$，$|a_{i,j}|\\le10^9$，所有 $a_{i,1}$ 互不相同。\n\n", "locale": "zh-CN"}}}
{"pid": "P11503", "type": "P", "difficulty": 5, "samples": [["3 3\n#..\n...\n.##\n2\n1 3\n2 1\n", "4\n1\n"], ["5 5\n#...#\n..#..\n.....\n#...#\n#....\n5\n3 2\n2 5\n5 4\n4 5\n1 3\n", "9\n4\n9\n0\n1\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "NordicOI（北欧）"], "title": "[NordicOI 2018] Nordic Camping", "background": "译自 Nordic Olympiad in Informatics 2018 [Nordic Camping](https://noi18.kattis.com/contests/noi18/problems/camping)。\n\nupd 2025/1/3 13:18：**本题原题未说明 $K$ 代表什么。搬题人经过 assert 认为是网格中 `#` 的个数。**", "description": "在北欧高地露营时，能否找到可靠的水源是生死攸关的问题。传统上，北欧露营者总是将帐篷搭在水源上，这样可以随时取水，而不必出门。北欧人的另一个奇怪传统是他们的帐篷。他们只使用正方形帐篷。\n\n北欧高地的营地可能非常崎岖。Jon 正在设置一个新营地，他已经调查了所有可用的区域，并将无法使用的区域标记出来。我们可以将营地建模为一个 $N \\times M$ 的网格，其中每个格子要么是崎岖的（不可用），要么是平坦的（可用）。\n\n对于每一个水源，你能帮助 Jon 确定能够覆盖该水源的最大正方形帐篷的大小吗？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/065umf6j.png)\n\n图1：第二个样例以及覆盖水源 $(3, 2)$ 的最大正方形帐篷的区域。这也恰好是覆盖水源 $(5, 4)$ 的最大正方形帐篷。", "inputFormat": "输入的第一行包含用空格分隔的两个整数 $N$ 和 $M$（$1 \\leq N,M$）。接下来是 $N$ 行，每行由 $M$ 个字符组成，代表网格。每个字符都是 `#` 或 `.`，其中 `.` 表示露营地的平坦的可用区域，`#` 表示崎岖的不可用区域。\n\n接下来是一行，其中只有一个整数 $Q$（$1\\leq Q$），即 Jon 考虑的水源数量。接下来的 $Q$ 行每行包含两个整数 $x$ 和 $y$ ($1 \\leq x \\leq N$，$1 \\leq y \\leq M$)，表示水源的位置 $(x, y)$（即网格中第 $x$ 行，第 $y$ 列是水源）。", "outputFormat": "对于 Jon 考虑的每一个水源，按照与输入相同的顺序，输出可以搭建在平坦的可用单元格上以覆盖特定水源的最大正方形帐篷的面积。\n\n请注意，帐篷不能只覆盖一个格子的部分位置。要么完全覆盖，要么与格子的交为空。", "hint": "你的解法将在一组子任务上进行评分。每个子任务包含多个测试用例。要获得子任务的分数，你的解法必须通过子任务中的所有测试用例。\n\n| 子任务 | 分数 | 限制条件                                   |\n| ------ | ---- | ------------------------------------------ |\n| $1$    | $20$ | $N,M\\leq 50$，$Q\\leq 1000$                 |\n| $2$    | $25$ | $N,M\\leq 800$，$K\\leq 10^5$，$Q\\leq 10^5$  |\n| $3$    | $20$ | $N\\leq 10$，$M\\leq 2000$，$Q\\leq 500$      |\n| $4$    | $35$ | $N,M\\leq 2000$，$K\\leq 10^5$，$Q\\leq 10^5$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2018] Nordic Camping", "background": "译自 Nordic Olympiad in Informatics 2018 [Nordic Camping](https://noi18.kattis.com/contests/noi18/problems/camping)。\n\nupd 2025/1/3 13:18：**本题原题未说明 $K$ 代表什么。搬题人经过 assert 认为是网格中 `#` 的个数。**", "description": "在北欧高地露营时，能否找到可靠的水源是生死攸关的问题。传统上，北欧露营者总是将帐篷搭在水源上，这样可以随时取水，而不必出门。北欧人的另一个奇怪传统是他们的帐篷。他们只使用正方形帐篷。\n\n北欧高地的营地可能非常崎岖。Jon 正在设置一个新营地，他已经调查了所有可用的区域，并将无法使用的区域标记出来。我们可以将营地建模为一个 $N \\times M$ 的网格，其中每个格子要么是崎岖的（不可用），要么是平坦的（可用）。\n\n对于每一个水源，你能帮助 Jon 确定能够覆盖该水源的最大正方形帐篷的大小吗？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/065umf6j.png)\n\n图1：第二个样例以及覆盖水源 $(3, 2)$ 的最大正方形帐篷的区域。这也恰好是覆盖水源 $(5, 4)$ 的最大正方形帐篷。", "inputFormat": "输入的第一行包含用空格分隔的两个整数 $N$ 和 $M$（$1 \\leq N,M$）。接下来是 $N$ 行，每行由 $M$ 个字符组成，代表网格。每个字符都是 `#` 或 `.`，其中 `.` 表示露营地的平坦的可用区域，`#` 表示崎岖的不可用区域。\n\n接下来是一行，其中只有一个整数 $Q$（$1\\leq Q$），即 Jon 考虑的水源数量。接下来的 $Q$ 行每行包含两个整数 $x$ 和 $y$ ($1 \\leq x \\leq N$，$1 \\leq y \\leq M$)，表示水源的位置 $(x, y)$（即网格中第 $x$ 行，第 $y$ 列是水源）。", "outputFormat": "对于 Jon 考虑的每一个水源，按照与输入相同的顺序，输出可以搭建在平坦的可用单元格上以覆盖特定水源的最大正方形帐篷的面积。\n\n请注意，帐篷不能只覆盖一个格子的部分位置。要么完全覆盖，要么与格子的交为空。", "hint": "你的解法将在一组子任务上进行评分。每个子任务包含多个测试用例。要获得子任务的分数，你的解法必须通过子任务中的所有测试用例。\n\n| 子任务 | 分数 | 限制条件                                   |\n| ------ | ---- | ------------------------------------------ |\n| $1$    | $20$ | $N,M\\leq 50$，$Q\\leq 1000$                 |\n| $2$    | $25$ | $N,M\\leq 800$，$K\\leq 10^5$，$Q\\leq 10^5$  |\n| $3$    | $20$ | $N\\leq 10$，$M\\leq 2000$，$Q\\leq 500$      |\n| $4$    | $35$ | $N,M\\leq 2000$，$K\\leq 10^5$，$Q\\leq 10^5$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P11504", "type": "P", "difficulty": 6, "samples": [["2 1 0.74\n0 2", "1"], ["4 100 0.1\n1 2 3 11", "13"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "Special Judge", "NordicOI（北欧）"], "title": "[NordicOI 2018] French Fries", "background": "译自 Nordic Olympiad in Informatics 2018 [French Fries](https://noi18.kattis.com/contests/noi18/problems/fries)。", "description": "有无限多的人站成一排，这排人向左右两边都无限延伸。开始时选择了 $P$ 个不同的人，并给他们每人一根薯条。由于这有些不公平，所以每个人会同时将自己得到的薯条分成两半，一半给左边的人，一半给右边的人。然后他们重复这个过程，再进行 $T - 1$ 次操作。如果一个人在经过这 $T$ 次操作后，拥有至少 $L$ 根薯条（其中 $L$ 不一定是整数），那么他就吃饱了。有多少人会吃饱？", "inputFormat": "输入的第一行包含两个整数 $P$ 和 $T$（$1 \\leq P \\leq 3 \\cdot 10^5$，$1 \\leq T \\leq 5 \\cdot 10^7$），以及一个浮点数 $L$（$10^{-4} \\leq L \\leq 10$）。\n\n第二行的输入包含 $P$ 个不同的整数：这些整数表示最初得到薯条的人的编号。所有的人的编号值都在 $0$ 到 $10^7$ 之间。", "outputFormat": "输出一个整数：最终至少得到 $L$ 个薯条的人数。\n\n如果答案 $X$ 在得到至少 $0.8L$ 个薯条的人数和得到至少 $1.2L$ 个薯条的人数之间，则视为正确答案。", "hint": "在第一个样例中，编号为 $0$ 和 $2$ 的人最初各有一根薯条。然后他们将这些薯条分成两半，并把一半给相邻的人，编号为 $-1$ 和 $3$ 的人将各得到 $0.5$ 根薯条，而编号为 $1$ 的人将得到 $1$ 根薯条。吃饱的标准是 $0.74$ 根薯条；因此，只有编号为 $1$ 的人得到了足够的薯条。\n\n在第二个样例中，答案 $13$ 是准确的，但任何介于 $12$ 到 $15$ 之间的输出都将被接受。\n\n---\n\n你的解法将在一组子任务上进行评分。每个子任务包含多个测试用例。要获得子任务的分数，你的解法必须通过子任务中的所有测试用例。\n\n| 子任务 | 分数 | 限制条件                                                     |\n| ------ | ---- | ------------------------------------------------------------ |\n| $1$    | $10$ | $P\\leq 100$，$T\\leq 100$，所有初始编号都在 $0$ 到 $100$ 之间 |\n| $2$    | $14$ | $P\\leq 500$，$T\\leq 100$                                     |\n| $3$    | $17$ | $P\\leq 3\\cdot 10^5$，$T\\leq 100$                             |\n| $4$    | $13$ | $P\\leq 100$，$T\\leq 10^5$                                    |\n| $5$    | $20$ | $P\\leq 500$，$T\\leq 5\\cdot 10^7$                             |\n| $6$    | $26$ | $P\\leq 3\\cdot 10^5$，$T\\leq 5\\cdot 10^7$                     |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2018] French Fries", "background": "译自 Nordic Olympiad in Informatics 2018 [French Fries](https://noi18.kattis.com/contests/noi18/problems/fries)。", "description": "有无限多的人站成一排，这排人向左右两边都无限延伸。开始时选择了 $P$ 个不同的人，并给他们每人一根薯条。由于这有些不公平，所以每个人会同时将自己得到的薯条分成两半，一半给左边的人，一半给右边的人。然后他们重复这个过程，再进行 $T - 1$ 次操作。如果一个人在经过这 $T$ 次操作后，拥有至少 $L$ 根薯条（其中 $L$ 不一定是整数），那么他就吃饱了。有多少人会吃饱？", "inputFormat": "输入的第一行包含两个整数 $P$ 和 $T$（$1 \\leq P \\leq 3 \\cdot 10^5$，$1 \\leq T \\leq 5 \\cdot 10^7$），以及一个浮点数 $L$（$10^{-4} \\leq L \\leq 10$）。\n\n第二行的输入包含 $P$ 个不同的整数：这些整数表示最初得到薯条的人的编号。所有的人的编号值都在 $0$ 到 $10^7$ 之间。", "outputFormat": "输出一个整数：最终至少得到 $L$ 个薯条的人数。\n\n如果答案 $X$ 在得到至少 $0.8L$ 个薯条的人数和得到至少 $1.2L$ 个薯条的人数之间，则视为正确答案。", "hint": "在第一个样例中，编号为 $0$ 和 $2$ 的人最初各有一根薯条。然后他们将这些薯条分成两半，并把一半给相邻的人，编号为 $-1$ 和 $3$ 的人将各得到 $0.5$ 根薯条，而编号为 $1$ 的人将得到 $1$ 根薯条。吃饱的标准是 $0.74$ 根薯条；因此，只有编号为 $1$ 的人得到了足够的薯条。\n\n在第二个样例中，答案 $13$ 是准确的，但任何介于 $12$ 到 $15$ 之间的输出都将被接受。\n\n---\n\n你的解法将在一组子任务上进行评分。每个子任务包含多个测试用例。要获得子任务的分数，你的解法必须通过子任务中的所有测试用例。\n\n| 子任务 | 分数 | 限制条件                                                     |\n| ------ | ---- | ------------------------------------------------------------ |\n| $1$    | $10$ | $P\\leq 100$，$T\\leq 100$，所有初始编号都在 $0$ 到 $100$ 之间 |\n| $2$    | $14$ | $P\\leq 500$，$T\\leq 100$                                     |\n| $3$    | $17$ | $P\\leq 3\\cdot 10^5$，$T\\leq 100$                             |\n| $4$    | $13$ | $P\\leq 100$，$T\\leq 10^5$                                    |\n| $5$    | $20$ | $P\\leq 500$，$T\\leq 5\\cdot 10^7$                             |\n| $6$    | $26$ | $P\\leq 3\\cdot 10^5$，$T\\leq 5\\cdot 10^7$                     |\n\n", "locale": "zh-CN"}}}
{"pid": "P11505", "type": "P", "difficulty": 5, "samples": [["3 2\n1 2 2\n1 3 1", "2"], ["8 3\n3 7 2\n6 8 2\n4 5 5", "576"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "NordicOI（北欧）"], "title": "[NordicOI 2018] Mysterious Array", "background": "译自 Nordic Olympiad in Informatics 2018 [Mysterious Array](https://noi18.kattis.com/contests/noi18/problems/mysterious)。", "description": "有一个数组，包含了 $1$ 到 $N$ 的排列（即每个数字在数组中出现一次）。该数组的元素编号是 $1$ 开始的。\n\n然而，你并不知道数组的具体内容。你会得到 $Q$ 条信息，信息的形式是“在编号 $a$ 和 $b$ 之间的最小值是多少”。\n\n你的任务是计算出符合这些查询的数组的数量。", "inputFormat": "输入的第一行包含两个整数 $N$ 和 $Q$（$1\\leq N,Q$）：数组的大小和条件的数量。\n\n接下来有 $Q$ 行描述信息。每行包含三个整数 $a$、$b$ 和 $x$（$1 \\leq a \\leq b \\leq N$ 且 $1 \\leq x \\leq N$）：表示在位置 $a$ 和 $b$ 之间的最小值为 $x$。\n\n注意，查询的结果可能不一致，并且有可能不存在符合这些查询的数组。", "outputFormat": "输出一个整数：数组的数量对 $10^9 + 7$ 取模的结果。", "hint": "在第一个样例中，数组的大小是 $3$，包含了数 $1$、$2$ 和 $3$ 的一个排列。此外，给定了以下信息：编号 $1$ 到 $2$ 之间的最小值是 $2$，编号 $1$ 到 $3$ 之间（即整个数组）的最小值是 $1$。只有两个数组符合这些条件：$[2, 3, 1]$ 和 $[3, 2, 1]$。\n\n在第二个样例中，有 $576$ 个数组符合给定的条件。\n\n---\n\n你的解法将在一组子任务上进行评分。每个子任务包含多个测试用例。要获得子任务的分数，你的解法必须通过子任务中的所有测试用例。\n\n| 子任务 | 分数 | 限制条件                    |\n| ------ | ---- | --------------------------- |\n| $1$    | $23$ | $1\\leq N,Q\\leq 10$          |\n| $2$    | $35$ | $1\\leq N,Q\\leq 1000$        |\n| $3$    | $42$ | $1\\leq N,Q\\leq 2\\cdot 10^5$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2018] Mysterious Array", "background": "译自 Nordic Olympiad in Informatics 2018 [Mysterious Array](https://noi18.kattis.com/contests/noi18/problems/mysterious)。", "description": "有一个数组，包含了 $1$ 到 $N$ 的排列（即每个数字在数组中出现一次）。该数组的元素编号是 $1$ 开始的。\n\n然而，你并不知道数组的具体内容。你会得到 $Q$ 条信息，信息的形式是“在编号 $a$ 和 $b$ 之间的最小值是多少”。\n\n你的任务是计算出符合这些查询的数组的数量。", "inputFormat": "输入的第一行包含两个整数 $N$ 和 $Q$（$1\\leq N,Q$）：数组的大小和条件的数量。\n\n接下来有 $Q$ 行描述信息。每行包含三个整数 $a$、$b$ 和 $x$（$1 \\leq a \\leq b \\leq N$ 且 $1 \\leq x \\leq N$）：表示在位置 $a$ 和 $b$ 之间的最小值为 $x$。\n\n注意，查询的结果可能不一致，并且有可能不存在符合这些查询的数组。", "outputFormat": "输出一个整数：数组的数量对 $10^9 + 7$ 取模的结果。", "hint": "在第一个样例中，数组的大小是 $3$，包含了数 $1$、$2$ 和 $3$ 的一个排列。此外，给定了以下信息：编号 $1$ 到 $2$ 之间的最小值是 $2$，编号 $1$ 到 $3$ 之间（即整个数组）的最小值是 $1$。只有两个数组符合这些条件：$[2, 3, 1]$ 和 $[3, 2, 1]$。\n\n在第二个样例中，有 $576$ 个数组符合给定的条件。\n\n---\n\n你的解法将在一组子任务上进行评分。每个子任务包含多个测试用例。要获得子任务的分数，你的解法必须通过子任务中的所有测试用例。\n\n| 子任务 | 分数 | 限制条件                    |\n| ------ | ---- | --------------------------- |\n| $1$    | $23$ | $1\\leq N,Q\\leq 10$          |\n| $2$    | $35$ | $1\\leq N,Q\\leq 1000$        |\n| $3$    | $42$ | $1\\leq N,Q\\leq 2\\cdot 10^5$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P11506", "type": "P", "difficulty": 2, "samples": [["7 3 2 3\n4\n1 19 20 50", "1\n7\n1\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 校园 (Day 1)", "background": "翻译自 [ROIR 2017 D1T1](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day1.pdf)。", "description": "新的拜特堡大学校园大楼有 $n$ 层，从下往上编号为 $1$ 到 $n$。学生宿舍分布在多个楼道中。\n\n在每个楼道中，楼层号是 $k$ 的倍数的楼层上有 $x$ 个房间，其他楼层上有 $y$ 个房间。\n\n每个楼道内的房间按顺序编号。第一层的房间编号最小，接着是第二层的房间编号，以此类推。第一个楼道的房间编号从 $1$ 开始，每个后续楼道的房间编号从上一个楼道房间最大编号的下一个数字开始。\n\n如下图所示，假设楼层数 $n = 7$，楼道数为 $3$，且 $k = 3$, $x = 2$, $y = 3$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n1792el9.png)\n\n为了便于学生住宿安排，校园管理方需要根据房间编号快速查找该房间所在的楼层。\n\n请编写一个程序，根据给定的 $n$, $k$, $x$, $y$，以及房间编号，确定每个房间所在的楼层。", "inputFormat": "第一行输入四个整数 $n,k,x,y$（$1 \\leq n \\leq 10^9$，$1 \\leq k \\leq n$，$1 \\leq x, y \\leq 10^9$）。\n\n第二行输入一个整数 $q$，表示需要查询编号的房间数量（$1 \\leq q \\leq 1000$）。  \n\n第三行输入 $q$ 个整数 $a_1, a_2, \\dots, a_q$，即查询的房间编号（$1 \\leq a_i \\leq 10^{18}$）。  \n\n可以认为大楼有足够多的楼道，保证所有查询的房间编号都存在。", "outputFormat": "对于每个询问，输出一行一个整数，表示该房间所在的楼层。", "hint": "| 子任务 | 分值 | $1\\le n\\le$ | $1\\le x,y\\le$ | $1\\le q\\le$ | $1\\le a_i\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $31$ | $10$ | $10$ | $1$ | $100$ |  |\n| $2$ | $19$ | $10^7$ | $10^9$ | $1$ | $10^7$ |  |\n| $3$ | $16$ | $10^9$ | $10^9$ | $1000$ | $10^{18}$ | $x=y$ |\n| $4$ | $34$ | $10^9$ | $10^9$ | $1000$ | $10^{18}$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 校园 (Day 1)", "background": "翻译自 [ROIR 2017 D1T1](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day1.pdf)。", "description": "新的拜特堡大学校园大楼有 $n$ 层，从下往上编号为 $1$ 到 $n$。学生宿舍分布在多个楼道中。\n\n在每个楼道中，楼层号是 $k$ 的倍数的楼层上有 $x$ 个房间，其他楼层上有 $y$ 个房间。\n\n每个楼道内的房间按顺序编号。第一层的房间编号最小，接着是第二层的房间编号，以此类推。第一个楼道的房间编号从 $1$ 开始，每个后续楼道的房间编号从上一个楼道房间最大编号的下一个数字开始。\n\n如下图所示，假设楼层数 $n = 7$，楼道数为 $3$，且 $k = 3$, $x = 2$, $y = 3$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n1792el9.png)\n\n为了便于学生住宿安排，校园管理方需要根据房间编号快速查找该房间所在的楼层。\n\n请编写一个程序，根据给定的 $n$, $k$, $x$, $y$，以及房间编号，确定每个房间所在的楼层。", "inputFormat": "第一行输入四个整数 $n,k,x,y$（$1 \\leq n \\leq 10^9$，$1 \\leq k \\leq n$，$1 \\leq x, y \\leq 10^9$）。\n\n第二行输入一个整数 $q$，表示需要查询编号的房间数量（$1 \\leq q \\leq 1000$）。  \n\n第三行输入 $q$ 个整数 $a_1, a_2, \\dots, a_q$，即查询的房间编号（$1 \\leq a_i \\leq 10^{18}$）。  \n\n可以认为大楼有足够多的楼道，保证所有查询的房间编号都存在。", "outputFormat": "对于每个询问，输出一行一个整数，表示该房间所在的楼层。", "hint": "| 子任务 | 分值 | $1\\le n\\le$ | $1\\le x,y\\le$ | $1\\le q\\le$ | $1\\le a_i\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $31$ | $10$ | $10$ | $1$ | $100$ |  |\n| $2$ | $19$ | $10^7$ | $10^9$ | $1$ | $10^7$ |  |\n| $3$ | $16$ | $10^9$ | $10^9$ | $1000$ | $10^{18}$ | $x=y$ |\n| $4$ | $34$ | $10^9$ | $10^9$ | $1000$ | $10^{18}$ |  |", "locale": "zh-CN"}}}
{"pid": "P11507", "type": "P", "difficulty": 3, "samples": [["72 2 1 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 计算器 (Day 1)", "background": "翻译自 [ROIR 2017 D1T2](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day1.pdf)。", "description": "今天的信息技术课作业要求设计一个特殊的计算器，该计算器的工作方式如下：\n\n首先，用户输入一个正整数 $n$，该数字会被显示在屏幕上。然后，用户可以按下三个按钮：A，B 和 C。\n\n- 按下按钮 A 时，屏幕上的数字将除以 $2$，向下取整。例如，对于数字 $114$，执行此操作后结果为 $57$；对于数字 $191$，结果为 $95$。\n- 按下按钮 B 时，屏幕上的数字加 $1$，然后再除以 $2$，向下取整。例如，对于数字 $114$，执行此操作后结果为 $57$；对于数字 $191$，结果为 $96$。\n- 按下按钮 C 时，执行以下操作：如果屏幕上的数字大于 $0$，则减去 $1$ 后除以 $2$，向下取整；如果屏幕上的数字是 $0$，则数字保持不变。例如，对于数字 $114$，执行此操作后结果为 $56$；对于数字 $191$，结果为 $95$。\n\n用户输入了数字 $n$，并将按一定顺序按下操作按钮。具体地，用户将会按下按钮 A 共 $a$ 次，按下按钮 B 共 $b$ 次，按下按钮 C 共 $c$ 次。你需要求出在执行这些操作后最小可能得到的数字是多少。", "inputFormat": "输入一行四个整数 $n,a,b,c$（$1 \\leq n \\leq 10^{18}$，$0 \\leq a, b, c \\leq 60$）。", "outputFormat": "输出一个整数表示答案。", "hint": "### 样例解释\n\n用户可以依次按下按钮 B，A，C，A，屏幕上的数字将会这样变化：$72\\to36\\to18\\to8\\to4$。\n\n### 数据范围\n\n| 子任务 | 分值 | $1\\le n\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $26$ | $10^9$ | $0\\le a+b+c\\le7$ |\n| $2$ | $23$ | $10^{18}$ | $c=0$ |\n| $3$ | $24$ | $10^{18}$ | $b=0$ |\n| $4$ | $27$ | $10^{18}$ | 无特殊性质 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 计算器 (Day 1)", "background": "翻译自 [ROIR 2017 D1T2](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day1.pdf)。", "description": "今天的信息技术课作业要求设计一个特殊的计算器，该计算器的工作方式如下：\n\n首先，用户输入一个正整数 $n$，该数字会被显示在屏幕上。然后，用户可以按下三个按钮：A，B 和 C。\n\n- 按下按钮 A 时，屏幕上的数字将除以 $2$，向下取整。例如，对于数字 $114$，执行此操作后结果为 $57$；对于数字 $191$，结果为 $95$。\n- 按下按钮 B 时，屏幕上的数字加 $1$，然后再除以 $2$，向下取整。例如，对于数字 $114$，执行此操作后结果为 $57$；对于数字 $191$，结果为 $96$。\n- 按下按钮 C 时，执行以下操作：如果屏幕上的数字大于 $0$，则减去 $1$ 后除以 $2$，向下取整；如果屏幕上的数字是 $0$，则数字保持不变。例如，对于数字 $114$，执行此操作后结果为 $56$；对于数字 $191$，结果为 $95$。\n\n用户输入了数字 $n$，并将按一定顺序按下操作按钮。具体地，用户将会按下按钮 A 共 $a$ 次，按下按钮 B 共 $b$ 次，按下按钮 C 共 $c$ 次。你需要求出在执行这些操作后最小可能得到的数字是多少。", "inputFormat": "输入一行四个整数 $n,a,b,c$（$1 \\leq n \\leq 10^{18}$，$0 \\leq a, b, c \\leq 60$）。", "outputFormat": "输出一个整数表示答案。", "hint": "### 样例解释\n\n用户可以依次按下按钮 B，A，C，A，屏幕上的数字将会这样变化：$72\\to36\\to18\\to8\\to4$。\n\n### 数据范围\n\n| 子任务 | 分值 | $1\\le n\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $26$ | $10^9$ | $0\\le a+b+c\\le7$ |\n| $2$ | $23$ | $10^{18}$ | $c=0$ |\n| $3$ | $24$ | $10^{18}$ | $b=0$ |\n| $4$ | $27$ | $10^{18}$ | 无特殊性质 |", "locale": "zh-CN"}}}
{"pid": "P11508", "type": "P", "difficulty": 5, "samples": [["5 5\n1 2\n2 3\n3 4\n3 5\n4 5", "2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 数据存放 (Day 1)", "background": "翻译自 [ROIR 2017 D1T3](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day1.pdf)。", "description": "一家公司大型的电信网络包含了 $n$ 台服务器，编号从 $1$ 到 $n$。其中，有一些服务器对之间通过双向通信通道连接，共有 $m$ 个通道。保证该网络中的服务器通过这些通道可以相互通信。\n\n我们称一个服务器集合 $A$ 被称为“容错集合”，当且仅当在任意一条通道失效的情况下，满足以下条件：\n- 对于任何不属于集合 $A$ 的服务器 $X$，总能通过剩下的通道将数据从集合 $A$ 中的某一台服务器传输到服务器 $X$。\n\n下图显示了一个网络和一个容错集合 $A=\\{1,4\\}$。\n\n- 对于服务器 $2$，当服务器 $1$ 和 $2$ 之间的通道失效时，可以从服务器 $4$ 传输数据；当服务器 $2$ 和 $3$ 之间的通道失效时，可以从服务器 $1$ 传输数据。当其它通道失效时，两个服务器都可以向其传输数据。  \n- 对于服务器 $3$ 和 $5$，当任何通道失效时，可以通过其它通道从服务器 $4$ 传输数据。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mif7u71b.png)\n\n公司的开发团队需要将他们的数据存放在这个网络中。为了提高数据的可用性和容错性，开发者希望将数据备份存储在多个服务器上，这些服务器需要形成一个容错集合。为了最小化开销，需要选择包含的服务器数量最少的容错集合。此外，为了了解网络的灵活性，还需要计算选择这个容错集合的不同方式的数量，由于这个数量可能很大，你只需要输出这个数对 $10^9 + 7$ 取模的结果。", "inputFormat": "第一行输入两个整数 $n$ 和 $m$，分别表示服务器的数量和通信通道的数量（$2 \\leq n \\leq 200000$，$1 \\leq m \\leq 200000$）。\n\n接下来 $m$ 行，每行包含两个整数，表示一个通信通道连接的两个服务器。\n\n输入保证：\n- 任意两个服务器之间至多通过一条通信通道直接连接，且没有通道连接服务器到它自己（即：没有重边和自环）；\n- 对于任意一对服务器，都存在路径可以通过一个或多个中间服务器将数据从其中一个服务器传输到另一个服务器（即：这个图连通）。", "outputFormat": "输出两个整数 $k,c$，用空格隔开，分别表示选择的容错集合中服务器的最小数量，以及在服务器数量最小的前提下选择容错集合的方式的数量对 $10^9 + 7$ 取模的结果。", "hint": "### 样例解释\n\n在样例中，容错集合可以为 $\\{1, 3\\},\\{1, 4\\} , \\{1, 5\\}$。\n\n### 数据范围\n\n本题满分为 $101$ 分。\n\n| 子任务 | 分值 | $n$ | $m$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $25$ | $2\\le n\\le10$ | $1\\le m\\le45$ |\n| $2$ | $27$ | $2\\le n\\le200000$ | $m=n-1$ |\n| $3$ | $28$ | $2\\le n\\le1000$ | $1\\le m\\le5000$ |\n| $4$ | $21$ | $2\\le n\\le200000$ | $1\\le m\\le200000$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 数据存放 (Day 1)", "background": "翻译自 [ROIR 2017 D1T3](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day1.pdf)。", "description": "一家公司大型的电信网络包含了 $n$ 台服务器，编号从 $1$ 到 $n$。其中，有一些服务器对之间通过双向通信通道连接，共有 $m$ 个通道。保证该网络中的服务器通过这些通道可以相互通信。\n\n我们称一个服务器集合 $A$ 被称为“容错集合”，当且仅当在任意一条通道失效的情况下，满足以下条件：\n- 对于任何不属于集合 $A$ 的服务器 $X$，总能通过剩下的通道将数据从集合 $A$ 中的某一台服务器传输到服务器 $X$。\n\n下图显示了一个网络和一个容错集合 $A=\\{1,4\\}$。\n\n- 对于服务器 $2$，当服务器 $1$ 和 $2$ 之间的通道失效时，可以从服务器 $4$ 传输数据；当服务器 $2$ 和 $3$ 之间的通道失效时，可以从服务器 $1$ 传输数据。当其它通道失效时，两个服务器都可以向其传输数据。  \n- 对于服务器 $3$ 和 $5$，当任何通道失效时，可以通过其它通道从服务器 $4$ 传输数据。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mif7u71b.png)\n\n公司的开发团队需要将他们的数据存放在这个网络中。为了提高数据的可用性和容错性，开发者希望将数据备份存储在多个服务器上，这些服务器需要形成一个容错集合。为了最小化开销，需要选择包含的服务器数量最少的容错集合。此外，为了了解网络的灵活性，还需要计算选择这个容错集合的不同方式的数量，由于这个数量可能很大，你只需要输出这个数对 $10^9 + 7$ 取模的结果。", "inputFormat": "第一行输入两个整数 $n$ 和 $m$，分别表示服务器的数量和通信通道的数量（$2 \\leq n \\leq 200000$，$1 \\leq m \\leq 200000$）。\n\n接下来 $m$ 行，每行包含两个整数，表示一个通信通道连接的两个服务器。\n\n输入保证：\n- 任意两个服务器之间至多通过一条通信通道直接连接，且没有通道连接服务器到它自己（即：没有重边和自环）；\n- 对于任意一对服务器，都存在路径可以通过一个或多个中间服务器将数据从其中一个服务器传输到另一个服务器（即：这个图连通）。", "outputFormat": "输出两个整数 $k,c$，用空格隔开，分别表示选择的容错集合中服务器的最小数量，以及在服务器数量最小的前提下选择容错集合的方式的数量对 $10^9 + 7$ 取模的结果。", "hint": "### 样例解释\n\n在样例中，容错集合可以为 $\\{1, 3\\},\\{1, 4\\} , \\{1, 5\\}$。\n\n### 数据范围\n\n本题满分为 $101$ 分。\n\n| 子任务 | 分值 | $n$ | $m$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $25$ | $2\\le n\\le10$ | $1\\le m\\le45$ |\n| $2$ | $27$ | $2\\le n\\le200000$ | $m=n-1$ |\n| $3$ | $28$ | $2\\le n\\le1000$ | $1\\le m\\le5000$ |\n| $4$ | $21$ | $2\\le n\\le200000$ | $1\\le m\\le200000$ |", "locale": "zh-CN"}}}
{"pid": "P11509", "type": "P", "difficulty": 6, "samples": [["4 3 2 1\n1 1\n3 2\n3\n1 4 1\n2 9 1\n1 12 2", "1 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 挖矿机器人 (Day 1)", "background": "翻译自 [ROIR 2017 D1T4](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day1.pdf)。", "description": "有一个关于开发邻近星系行星的项目。为了开采矿产资源，计划将几批机器人送往该行星。\n\n该行星的开采区域是一个大小为 $ w \\times h $ 的矩形网格区域，区域内的单元格坐标范围从 $(1, 1)$ 到 $(w, h)$。在某些单元格中设有基地，可以将机器人按批次运送到那里。整个区域共设有 $ s $ 个基地，第 $ i $ 个基地位于坐标 $(x_i, y_i)$ 处。\n\n每批机器人有三个重要参数：第 $ j $ 批机器人将送往基地 $ b_j $，包含 $ n_j $ 个机器人，并且每个机器人具有移动能力 $ m_j $。\n\n当机器人批次送到相应基地后，每个机器人都会从基地出发，沿着行星表面移动到某个单元格。如果一个机器人的移动能力为 $ m $，它最多可以进行 $ m $ 次移动，并且每次可以选择八个相邻的方向进行移动，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/auhkmcwj.png)\n\n当所有送到的机器人都停止移动后，它们会被激活并开始开采其所在单元格的矿产。在机器人的移动过程中，多个机器人可以同时处于同一个单元格，但是在激活之后，每个单元格内最多只能容纳 $ q $ 个机器人。\n\n项目团队得到了 $ t $ 批机器人的信息，这些机器人可以按顺序送往行星。然而，考虑到它们的移动限制，如果将所有机器人全部送上去，可能最终无法满足每个单元格最多只有 $ q $ 个机器人的要求。因此，项目团队需要选择前 $ k $ 批机器人（$ 0 \\leq k \\leq t $），将它们完全送到相应的基地。如果 $ k < t $，则还可以从第 $ k+1 $ 批机器人中额外选择 $ z $ 个机器人（$ 0 \\leq z < n_{k+1} $）。团队需要求出 $ k $ 的最大值，并在这个前提下最大化 $ z $（若 $k=t$，则 $z=0$）。", "inputFormat": "第一行输入四个整数 $ w, h, s, q $（$ 1 \\leq w, h \\leq 10^5, 1 \\leq s \\leq 4, 1 \\leq q \\leq 100 $）。\n\n接下来 $ s $ 行每行包含两个整数 $ x_i, y_i $，表示基地的位置（$ 1 \\leq x_i \\leq w, 1 \\leq y_i \\leq h $）。\n\n接下来一行包含一个整数 $ t $，表示机器人批次的数量（$ 1 \\leq t \\leq 100 $）。\n\n接下来的 $ t $ 行描述每个机器人批次，每行包含三个整数：$ b_j, n_j, m_j $（$ 1 \\leq b_j \\leq s, 1 \\leq n_j \\leq w \\cdot h \\cdot q, 0 \\leq m_j < \\max(w, h) $）。", "outputFormat": "输出两个整数 $ k $ 和 $ z $，意义见题目描述。", "hint": "### 样例解释\n\n在样例中，输入了以下信息：\n\n- 区域的大小是 $ 4 \\times 3 $，有两个基地，且每个单元格最多容纳 $1$ 个机器人。\n- 第一个基地位于坐标 $ (1, 1) $，第二个基地位于坐标 $ (3, 2) $。\n- 总共有 $3$ 批机器人要送往该地区。\n  - 第 $1$ 批机器人送往第 $1$ 个基地，包含 $4$ 个机器人，每个机器人的最大移动能力为 $1$。\n  - 第 $2$ 批机器人送往第 $2$ 个基地，包含 $9$ 个机器人，每个机器人的最大移动能力为 $1$。\n  - 第 $3$ 批机器人送往第 $1$ 个基地，包含 $12$ 个机器人，每个机器人的最大移动能力为 $2$。\n\n经过合理安排，可以让第一批机器人完全送达，并额外选择第二批中的 $7$ 个机器人。最终，第一批和第二批的机器人能够成功安置在网格区域内，使得每个单元格内最多有 $1$ 个机器人：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pkgodnzw.png)\n\n因此，答案是 $ k = 1 , z = 7$。\n\n### 数据范围\n\n| 子任务 | 分值 | $1\\le w,h\\le$ | $1\\le s\\le$ | $1\\le q\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $18$ | $20$ | $1$ | $1$ |\n| $2$ | $12$ | $20$ | $2$ | $1$ |\n| $3$ | $9$ | $20$ | $3$ | $1$ |\n| $4$ | $10$ | $20$ | $3$ | $100$ |\n| $5$ | $15$ | $10^5$ | $1$ | $100$ |\n| $6$ | $36$ | $10^5$ | $4$ | $100$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 挖矿机器人 (Day 1)", "background": "翻译自 [ROIR 2017 D1T4](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day1.pdf)。", "description": "有一个关于开发邻近星系行星的项目。为了开采矿产资源，计划将几批机器人送往该行星。\n\n该行星的开采区域是一个大小为 $ w \\times h $ 的矩形网格区域，区域内的单元格坐标范围从 $(1, 1)$ 到 $(w, h)$。在某些单元格中设有基地，可以将机器人按批次运送到那里。整个区域共设有 $ s $ 个基地，第 $ i $ 个基地位于坐标 $(x_i, y_i)$ 处。\n\n每批机器人有三个重要参数：第 $ j $ 批机器人将送往基地 $ b_j $，包含 $ n_j $ 个机器人，并且每个机器人具有移动能力 $ m_j $。\n\n当机器人批次送到相应基地后，每个机器人都会从基地出发，沿着行星表面移动到某个单元格。如果一个机器人的移动能力为 $ m $，它最多可以进行 $ m $ 次移动，并且每次可以选择八个相邻的方向进行移动，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/auhkmcwj.png)\n\n当所有送到的机器人都停止移动后，它们会被激活并开始开采其所在单元格的矿产。在机器人的移动过程中，多个机器人可以同时处于同一个单元格，但是在激活之后，每个单元格内最多只能容纳 $ q $ 个机器人。\n\n项目团队得到了 $ t $ 批机器人的信息，这些机器人可以按顺序送往行星。然而，考虑到它们的移动限制，如果将所有机器人全部送上去，可能最终无法满足每个单元格最多只有 $ q $ 个机器人的要求。因此，项目团队需要选择前 $ k $ 批机器人（$ 0 \\leq k \\leq t $），将它们完全送到相应的基地。如果 $ k < t $，则还可以从第 $ k+1 $ 批机器人中额外选择 $ z $ 个机器人（$ 0 \\leq z < n_{k+1} $）。团队需要求出 $ k $ 的最大值，并在这个前提下最大化 $ z $（若 $k=t$，则 $z=0$）。", "inputFormat": "第一行输入四个整数 $ w, h, s, q $（$ 1 \\leq w, h \\leq 10^5, 1 \\leq s \\leq 4, 1 \\leq q \\leq 100 $）。\n\n接下来 $ s $ 行每行包含两个整数 $ x_i, y_i $，表示基地的位置（$ 1 \\leq x_i \\leq w, 1 \\leq y_i \\leq h $）。\n\n接下来一行包含一个整数 $ t $，表示机器人批次的数量（$ 1 \\leq t \\leq 100 $）。\n\n接下来的 $ t $ 行描述每个机器人批次，每行包含三个整数：$ b_j, n_j, m_j $（$ 1 \\leq b_j \\leq s, 1 \\leq n_j \\leq w \\cdot h \\cdot q, 0 \\leq m_j < \\max(w, h) $）。", "outputFormat": "输出两个整数 $ k $ 和 $ z $，意义见题目描述。", "hint": "### 样例解释\n\n在样例中，输入了以下信息：\n\n- 区域的大小是 $ 4 \\times 3 $，有两个基地，且每个单元格最多容纳 $1$ 个机器人。\n- 第一个基地位于坐标 $ (1, 1) $，第二个基地位于坐标 $ (3, 2) $。\n- 总共有 $3$ 批机器人要送往该地区。\n  - 第 $1$ 批机器人送往第 $1$ 个基地，包含 $4$ 个机器人，每个机器人的最大移动能力为 $1$。\n  - 第 $2$ 批机器人送往第 $2$ 个基地，包含 $9$ 个机器人，每个机器人的最大移动能力为 $1$。\n  - 第 $3$ 批机器人送往第 $1$ 个基地，包含 $12$ 个机器人，每个机器人的最大移动能力为 $2$。\n\n经过合理安排，可以让第一批机器人完全送达，并额外选择第二批中的 $7$ 个机器人。最终，第一批和第二批的机器人能够成功安置在网格区域内，使得每个单元格内最多有 $1$ 个机器人：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pkgodnzw.png)\n\n因此，答案是 $ k = 1 , z = 7$。\n\n### 数据范围\n\n| 子任务 | 分值 | $1\\le w,h\\le$ | $1\\le s\\le$ | $1\\le q\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $18$ | $20$ | $1$ | $1$ |\n| $2$ | $12$ | $20$ | $2$ | $1$ |\n| $3$ | $9$ | $20$ | $3$ | $1$ |\n| $4$ | $10$ | $20$ | $3$ | $100$ |\n| $5$ | $15$ | $10^5$ | $1$ | $100$ |\n| $6$ | $36$ | $10^5$ | $4$ | $100$ |", "locale": "zh-CN"}}}
{"pid": "P11510", "type": "P", "difficulty": 2, "samples": [["2\n7\n20", "21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 自动管理系统 (Day 2)", "background": "翻译自 [ROIR 2017 D2T1](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "某区级分拣中心的程序员团队正在开发邮件配送的自动管理系统。\n\n包裹从客户的邮政网点接收。每个邮政网点接收的包裹重量为一个整数，单位是千克。包裹的最小重量为 $1$ 千克，最大重量为 $k$ 千克。接收的包裹会被放入一个专用的包裹袋中。\n\n如果在放了某个包裹后，当前包裹袋中的总重量大于等于 $x$ 千克，则该包裹袋会被运送到市级邮政中心，在市级邮政中心，包裹袋会被放入一个专用的集装箱。\n\n如果在放了某个包裹袋后，当前集装箱中的总重量大于等于 $y$ 千克，则该集装箱会被运送到区级分拣中心，在区级分拣中心，包裹最终会被送达收件人。\n\n你需要求出，当一个集装箱被运送到区级分拣中心时，它的最小可能重量是多少。", "inputFormat": "输入三行，每行一个正整数，分别为 $k,x,y$。", "outputFormat": "输出一个整数表示答案。", "hint": "### 样例解释\n\n在样例中，单个包裹的重量可能是 $1$ 千克或 $2$ 千克。当包裹袋的总重量大于等于 $7$ 千克时，包裹袋会被运送到市级邮政中心。当集装箱的总重量大于等于 $20$ 千克时，集装箱会被运送到区级分拣中心。\n\n在这个例子中，最小可能的集装箱重量为 $21$ 千克，具体方式是：\n- 通过送入 $7$ 个 $1$ 千克的包裹，或 $3$ 个 $2$ 千克的包裹和一个 $1$ 千克的包裹，让一个包裹袋达到 $7$ 千克，而被送到市级邮政中心。\n- 送三个这样的包裹袋到市级分拣中心，集装箱的重量就能达到 $21$，而被送往区级分拣中心。 \n\n可以证明，当一个集装箱被运送到区级分拣中心时，它的重量不可能小于 $21$ 千克。\n\n### 数据范围\n\n| 子任务 | 分值 | $k$ | $x,y$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $21$ | $=1$ | $\\le100$ |\n| $2$ | $18$ | $=2$ | $\\le100$ |\n| $3$ | $21$ | $\\le100$ | $\\le100$ |\n| $4$ | $17$ | $\\le40000$ | $\\le40000$ |\n| $5$ | $23$ | $\\le10^9$ | $\\le10^9$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 自动管理系统 (Day 2)", "background": "翻译自 [ROIR 2017 D2T1](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "某区级分拣中心的程序员团队正在开发邮件配送的自动管理系统。\n\n包裹从客户的邮政网点接收。每个邮政网点接收的包裹重量为一个整数，单位是千克。包裹的最小重量为 $1$ 千克，最大重量为 $k$ 千克。接收的包裹会被放入一个专用的包裹袋中。\n\n如果在放了某个包裹后，当前包裹袋中的总重量大于等于 $x$ 千克，则该包裹袋会被运送到市级邮政中心，在市级邮政中心，包裹袋会被放入一个专用的集装箱。\n\n如果在放了某个包裹袋后，当前集装箱中的总重量大于等于 $y$ 千克，则该集装箱会被运送到区级分拣中心，在区级分拣中心，包裹最终会被送达收件人。\n\n你需要求出，当一个集装箱被运送到区级分拣中心时，它的最小可能重量是多少。", "inputFormat": "输入三行，每行一个正整数，分别为 $k,x,y$。", "outputFormat": "输出一个整数表示答案。", "hint": "### 样例解释\n\n在样例中，单个包裹的重量可能是 $1$ 千克或 $2$ 千克。当包裹袋的总重量大于等于 $7$ 千克时，包裹袋会被运送到市级邮政中心。当集装箱的总重量大于等于 $20$ 千克时，集装箱会被运送到区级分拣中心。\n\n在这个例子中，最小可能的集装箱重量为 $21$ 千克，具体方式是：\n- 通过送入 $7$ 个 $1$ 千克的包裹，或 $3$ 个 $2$ 千克的包裹和一个 $1$ 千克的包裹，让一个包裹袋达到 $7$ 千克，而被送到市级邮政中心。\n- 送三个这样的包裹袋到市级分拣中心，集装箱的重量就能达到 $21$，而被送往区级分拣中心。 \n\n可以证明，当一个集装箱被运送到区级分拣中心时，它的重量不可能小于 $21$ 千克。\n\n### 数据范围\n\n| 子任务 | 分值 | $k$ | $x,y$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $21$ | $=1$ | $\\le100$ |\n| $2$ | $18$ | $=2$ | $\\le100$ |\n| $3$ | $21$ | $\\le100$ | $\\le100$ |\n| $4$ | $17$ | $\\le40000$ | $\\le40000$ |\n| $5$ | $23$ | $\\le10^9$ | $\\le10^9$ |", "locale": "zh-CN"}}}
{"pid": "P11511", "type": "P", "difficulty": 3, "samples": [["4\n-1 1\n0 -1\n1 1\n5 -1\n4\n0 1 2 3", "4\n2\n0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 大型直线对撞机 (Day 2)", "background": "翻译自 [ROIR 2017 D2T2](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "科学家在一个国际科学实验室里进行研究，研究的是粒子在大型直线对撞机（简称：BLC）实验装置中的行为。BLC 呈一条直线，粒子被放置在这条直线上的某些点上，粒子可以沿着这条直线移动。\n\n在本次实验中，BLC 上放置了 $n$ 个粒子，每个粒子要么是带一个单位负电荷的电子（$e^-$），要么是带一个单位正电荷的正电子（$e^+$）。第 $i$ 个粒子最初被放置在坐标 $x_i$ 的位置。实验开始后，粒子会沿直线向不同的方向移动：$e^-$ 沿负方向移动，而 $e^+$ 则沿正方向移动。所有粒子的速度绝对值相同，均为 $1$。\n\n如果在移动过程中，$e^-$ 和 $e^+$ 在某一位置碰撞，它们会相互作用并湮灭。它们的湮灭不会影响其他粒子的行为。\n\n科学家们选择了 $m$ 个不同的时间点 $t_1, t_2, \\dots, t_m$ 对 BLC 中的粒子进行观测。对于每个时间点，他们希望知道，在每个时间点之后，BLC 还剩下多少个粒子。时间从 $0$ 开始。恰好在观测的时间点湮灭的粒子不应被计入粒子总数。\n\n你需要编写一个程序，根据粒子的初始位置和类型，以及给定的观测时间点，来计算每个时间点后 BLC 中剩余的粒子数。", "inputFormat": "第一行包含一个整数 $n$，表示粒子的数量（$1 \\leq n \\leq 200000$）。\n\n接下来的 $n$ 行，每行包含两个整数 $x_i$ 和 $v_i$，分别表示第 $i$ 个粒子的坐标和类型（$-10^9 \\leq x_1 < x_2 < \\dots < x_n \\leq 10^9$，其中 $v_i = -1$ 表示电子 $e^-$，$v_i = 1$ 表示正电子 $e^+$）。\n\n接下来一行包含一个整数 $m$，表示观测时间点的数量（$1 \\leq m \\leq 200000$）。\n\n最后一行包含 $m$ 个整数 $t_1, t_2, \\dots, t_m$，表示科学家选择观测的时间点（$0 \\leq t_1 < t_2 < \\dots < t_m \\leq 10^9$）。", "outputFormat": "对于每个观测时间点，输出一个整数，表示该时间点之后 BLC 中剩余的粒子数量。", "hint": "### 样例解释\n\n在样例中，初始时 BLC 中有 4 个粒子：一个 $e^+$ 粒子在坐标 $-1$，一个 $e^-$ 粒子在坐标 $0$，一个 $e^+$ 粒子在坐标 $1$，一个 $e^-$ 粒子在坐标 $5$。\n\n- 在时间 $0.5$ 时，第一个 $e^+$ 粒子和第一个 $e^-$ 粒子碰撞，在坐标 $-0.5$ 处湮灭。\n- 在时间 $1$ 时，剩余的两颗粒子在坐标 $2$ 和 $4$。\n- 在时间 $2$ 时，这两个粒子在坐标 $3$ 处碰撞并湮灭。\n- 在时间 $3$ 时，BLC 中没有剩余粒子。\n\n### 数据范围\n\n| 子任务 | 分值 | $1\\le n\\le$ | $\\vert x_i\\vert\\le$ | $1\\le m\\le$ | $0\\le t_i\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $35$ | $100$ | $100$ | $1$ | $100$ |\n| $2$ | $12$ | $100$ | $10^9$ | $1$ | $10^9$ |\n| $3$ | $12$ | $200000$ | $10^9$ | $1$ | $10^9$ |\n| $4$ | $41$ | $200000$ | $10^9$ | $200000$ | $10^9$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 大型直线对撞机 (Day 2)", "background": "翻译自 [ROIR 2017 D2T2](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "科学家在一个国际科学实验室里进行研究，研究的是粒子在大型直线对撞机（简称：BLC）实验装置中的行为。BLC 呈一条直线，粒子被放置在这条直线上的某些点上，粒子可以沿着这条直线移动。\n\n在本次实验中，BLC 上放置了 $n$ 个粒子，每个粒子要么是带一个单位负电荷的电子（$e^-$），要么是带一个单位正电荷的正电子（$e^+$）。第 $i$ 个粒子最初被放置在坐标 $x_i$ 的位置。实验开始后，粒子会沿直线向不同的方向移动：$e^-$ 沿负方向移动，而 $e^+$ 则沿正方向移动。所有粒子的速度绝对值相同，均为 $1$。\n\n如果在移动过程中，$e^-$ 和 $e^+$ 在某一位置碰撞，它们会相互作用并湮灭。它们的湮灭不会影响其他粒子的行为。\n\n科学家们选择了 $m$ 个不同的时间点 $t_1, t_2, \\dots, t_m$ 对 BLC 中的粒子进行观测。对于每个时间点，他们希望知道，在每个时间点之后，BLC 还剩下多少个粒子。时间从 $0$ 开始。恰好在观测的时间点湮灭的粒子不应被计入粒子总数。\n\n你需要编写一个程序，根据粒子的初始位置和类型，以及给定的观测时间点，来计算每个时间点后 BLC 中剩余的粒子数。", "inputFormat": "第一行包含一个整数 $n$，表示粒子的数量（$1 \\leq n \\leq 200000$）。\n\n接下来的 $n$ 行，每行包含两个整数 $x_i$ 和 $v_i$，分别表示第 $i$ 个粒子的坐标和类型（$-10^9 \\leq x_1 < x_2 < \\dots < x_n \\leq 10^9$，其中 $v_i = -1$ 表示电子 $e^-$，$v_i = 1$ 表示正电子 $e^+$）。\n\n接下来一行包含一个整数 $m$，表示观测时间点的数量（$1 \\leq m \\leq 200000$）。\n\n最后一行包含 $m$ 个整数 $t_1, t_2, \\dots, t_m$，表示科学家选择观测的时间点（$0 \\leq t_1 < t_2 < \\dots < t_m \\leq 10^9$）。", "outputFormat": "对于每个观测时间点，输出一个整数，表示该时间点之后 BLC 中剩余的粒子数量。", "hint": "### 样例解释\n\n在样例中，初始时 BLC 中有 4 个粒子：一个 $e^+$ 粒子在坐标 $-1$，一个 $e^-$ 粒子在坐标 $0$，一个 $e^+$ 粒子在坐标 $1$，一个 $e^-$ 粒子在坐标 $5$。\n\n- 在时间 $0.5$ 时，第一个 $e^+$ 粒子和第一个 $e^-$ 粒子碰撞，在坐标 $-0.5$ 处湮灭。\n- 在时间 $1$ 时，剩余的两颗粒子在坐标 $2$ 和 $4$。\n- 在时间 $2$ 时，这两个粒子在坐标 $3$ 处碰撞并湮灭。\n- 在时间 $3$ 时，BLC 中没有剩余粒子。\n\n### 数据范围\n\n| 子任务 | 分值 | $1\\le n\\le$ | $\\vert x_i\\vert\\le$ | $1\\le m\\le$ | $0\\le t_i\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $35$ | $100$ | $100$ | $1$ | $100$ |\n| $2$ | $12$ | $100$ | $10^9$ | $1$ | $10^9$ |\n| $3$ | $12$ | $200000$ | $10^9$ | $1$ | $10^9$ |\n| $4$ | $41$ | $200000$ | $10^9$ | $200000$ | $10^9$ |", "locale": "zh-CN"}}}
{"pid": "P11512", "type": "P", "difficulty": 4, "samples": [["5 3\n3 5\n2 2\n2 5\n4 4\n5 3", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 力场 (Day 2)", "background": "翻译自 [ROIR 2017 D2T3](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "在一个物理生物学实验室中，研究者们正在研究通过力场对植物的辐射影响。实验装置包含一个大小为 $10^9 \\times 10^9$ 的方形平台，平台上有肥沃的土壤。平台上方放置了一个辐射源。在辐射源与平台之间，可以开启 $n$ 个力场。\n\n力场发生器安装在点 $(0, 0)$ 之上。第 $i$ 个力场是一个矩形，矩形的两条边与平台的边界平行，且矩形的两个对角线顶点坐标分别为 $(0, 0)$ 和 $(x_i, y_i)$。\n\n在实验中，研究者计划通过开启 $k$ 个力场，来研究辐射对植物的影响。研究者需要从给定的 $n$ 个力场中，选择出 $k$ 个力场进行实验。为了最大化实验效果，研究者希望选择的这 $k$ 个力场覆盖平台上的面积尽可能大。\n\n要求编写一个程序，给定 $n,k$ 和 $n$ 个力场的描述，找出选择的 $k$ 个力场，使得它们覆盖的平台区域面积的交最大，并输出该面积。", "inputFormat": "第一行输入包含两个整数 $n$ 和 $k$（$1 \\leq k \\leq n \\leq 200000$），分别表示力场的总数量以及需要选择的力场数量。\n\n接下来 $n$ 行，每行包含两个整数 $x_i$ 和 $y_i$（$1 \\leq x_i, y_i \\leq 10^9$），其中第 $i$ 行输入的数表示第 $i$ 个力场的远离原点的顶点坐标。", "outputFormat": "输出一个整数，表示选择 $k$ 个力场能覆盖的最大公共面积。", "hint": "### 样例解释\n\n下面的图中，上方是输入的 $5$ 个力场，下方是使总面积最大的最佳的选择 $3$ 个力场的方案。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hnxmjucp.png)\n\n### 数据范围\n\n| 子任务 | 分值 | $n$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $18$ | $1\\le n\\le20$ |  |\n| $2$ | $25$ | $1\\le n\\le300$ |  |\n| $3$ | $20$ | $1\\le n\\le3000$ |  |\n| $4$ | $17$ | $2\\le n\\le200000$ | $k=2$ |\n| $5$ | $20$ | $1\\le n\\le200000$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 力场 (Day 2)", "background": "翻译自 [ROIR 2017 D2T3](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "在一个物理生物学实验室中，研究者们正在研究通过力场对植物的辐射影响。实验装置包含一个大小为 $10^9 \\times 10^9$ 的方形平台，平台上有肥沃的土壤。平台上方放置了一个辐射源。在辐射源与平台之间，可以开启 $n$ 个力场。\n\n力场发生器安装在点 $(0, 0)$ 之上。第 $i$ 个力场是一个矩形，矩形的两条边与平台的边界平行，且矩形的两个对角线顶点坐标分别为 $(0, 0)$ 和 $(x_i, y_i)$。\n\n在实验中，研究者计划通过开启 $k$ 个力场，来研究辐射对植物的影响。研究者需要从给定的 $n$ 个力场中，选择出 $k$ 个力场进行实验。为了最大化实验效果，研究者希望选择的这 $k$ 个力场覆盖平台上的面积尽可能大。\n\n要求编写一个程序，给定 $n,k$ 和 $n$ 个力场的描述，找出选择的 $k$ 个力场，使得它们覆盖的平台区域面积的交最大，并输出该面积。", "inputFormat": "第一行输入包含两个整数 $n$ 和 $k$（$1 \\leq k \\leq n \\leq 200000$），分别表示力场的总数量以及需要选择的力场数量。\n\n接下来 $n$ 行，每行包含两个整数 $x_i$ 和 $y_i$（$1 \\leq x_i, y_i \\leq 10^9$），其中第 $i$ 行输入的数表示第 $i$ 个力场的远离原点的顶点坐标。", "outputFormat": "输出一个整数，表示选择 $k$ 个力场能覆盖的最大公共面积。", "hint": "### 样例解释\n\n下面的图中，上方是输入的 $5$ 个力场，下方是使总面积最大的最佳的选择 $3$ 个力场的方案。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hnxmjucp.png)\n\n### 数据范围\n\n| 子任务 | 分值 | $n$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $18$ | $1\\le n\\le20$ |  |\n| $2$ | $25$ | $1\\le n\\le300$ |  |\n| $3$ | $20$ | $1\\le n\\le3000$ |  |\n| $4$ | $17$ | $2\\le n\\le200000$ | $k=2$ |\n| $5$ | $20$ | $1\\le n\\le200000$ |  |", "locale": "zh-CN"}}}
{"pid": "P11513", "type": "P", "difficulty": 6, "samples": [["7\n1 1 2 2 3 3\n3\n1 1\n3 1\n1 2", "3 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 培训 (Day 2)", "background": "翻译自 [ROIR 2017 D2T4](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "某公司共有 $n$ 名员工，每个员工都有一个唯一的编号，编号从 $1$ 到 $n$。编号为 $1$ 的员工是公司总经理，除了总经理之外，每个员工都有一个直接上级，员工 $i$ 的直接上级编号为 $p_i$，且有 $p_i < i$。\n\n若 $p_x = y$，则员工 $x$ 被称为员工 $y$ 的第 $1$ 层下属；若员工 $p_x$ 是员工 $y$ 的第 $k-1$ 层下属，则员工 $x$ 被称为员工 $y$ 的第 $k$ 层下属。\n\n现在，公司总经理可以选择一些员工参加培训。他决定选择两个数字 $L$ 和 $R$，将所有编号满足 $L \\leq i \\leq R$ 的员工送去培训。\n\n在确定 $L$ 和 $R$ 之前，总经理收到了 $m$ 条员工的要求，第 $j$ 条要求用两个数字 $u_j$ 和 $k_j$ 表示，这代表员工 $u_j$ 希望其第 $k_j$ 层下属中**至少有一个**被送去培训。为了节省费用，总经理希望确定 $L$ 和 $R$ 的值使得送去培训的员工人数最少，并且所有员工的要求都能满足。\n\n需要编写程序，根据公司内部的上下级关系和员工的要求，找出一对 $L$ 和 $R$，使得所有要求都能得到满足，并且送去培训的员工人数最少。如果有多个满足条件的 $(L, R)$ 对，选择其中 $L$ 最小的那个。", "inputFormat": "第一行输入一个整数 $n$，表示公司员工的总数（$2 \\leq n \\leq 200000$）。\n\n第二行输入 $n-1$ 个整数 $p_2, p_3, \\dots, p_n$，其中 $p_i$ 表示员工 $i$ 的直接上级编号，且 $1 \\leq p_i < i$。\n\n第三行输入一个整数 $m$，表示员工的要求数量。\n\n接下来 $m$ 行，每行包含两个整数 $u_j$ 和 $k_j$，表示第 $j$ 条要求。", "outputFormat": "输出两个整数 $L$ 和 $R$，表示选择的员工编号区间。如果存在多个符合条件的 $(L, R)$ 对，输出其中 $L$ 最小的那一对。", "hint": "### 样例解释\n\n员工编号为 $3,4,5,6$ 的员工将被送去培训。这满足所有要求，因为员工 $3$ 是员工 $1$ 的第 $1$ 层下属，员工 $4$ 是员工 $1$ 的第 $2$ 层下属，员工 $6$ 是员工 $3$ 的第 $1$ 层下属。\n\n### 数据范围\n\n| 子任务 | 分值 | $2\\le n\\le$ | $1\\le m\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $19$ | $50$ | $50$ |  |\n| $2$ | $25$ | $3000$ | $3000$ |  |\n| $3$ | $21$ | $200000$ | $200000$ | $p_i=i-1$ |\n| $4$ | $35$ | $200000$ | $200000$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 培训 (Day 2)", "background": "翻译自 [ROIR 2017 D2T4](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "某公司共有 $n$ 名员工，每个员工都有一个唯一的编号，编号从 $1$ 到 $n$。编号为 $1$ 的员工是公司总经理，除了总经理之外，每个员工都有一个直接上级，员工 $i$ 的直接上级编号为 $p_i$，且有 $p_i < i$。\n\n若 $p_x = y$，则员工 $x$ 被称为员工 $y$ 的第 $1$ 层下属；若员工 $p_x$ 是员工 $y$ 的第 $k-1$ 层下属，则员工 $x$ 被称为员工 $y$ 的第 $k$ 层下属。\n\n现在，公司总经理可以选择一些员工参加培训。他决定选择两个数字 $L$ 和 $R$，将所有编号满足 $L \\leq i \\leq R$ 的员工送去培训。\n\n在确定 $L$ 和 $R$ 之前，总经理收到了 $m$ 条员工的要求，第 $j$ 条要求用两个数字 $u_j$ 和 $k_j$ 表示，这代表员工 $u_j$ 希望其第 $k_j$ 层下属中**至少有一个**被送去培训。为了节省费用，总经理希望确定 $L$ 和 $R$ 的值使得送去培训的员工人数最少，并且所有员工的要求都能满足。\n\n需要编写程序，根据公司内部的上下级关系和员工的要求，找出一对 $L$ 和 $R$，使得所有要求都能得到满足，并且送去培训的员工人数最少。如果有多个满足条件的 $(L, R)$ 对，选择其中 $L$ 最小的那个。", "inputFormat": "第一行输入一个整数 $n$，表示公司员工的总数（$2 \\leq n \\leq 200000$）。\n\n第二行输入 $n-1$ 个整数 $p_2, p_3, \\dots, p_n$，其中 $p_i$ 表示员工 $i$ 的直接上级编号，且 $1 \\leq p_i < i$。\n\n第三行输入一个整数 $m$，表示员工的要求数量。\n\n接下来 $m$ 行，每行包含两个整数 $u_j$ 和 $k_j$，表示第 $j$ 条要求。", "outputFormat": "输出两个整数 $L$ 和 $R$，表示选择的员工编号区间。如果存在多个符合条件的 $(L, R)$ 对，输出其中 $L$ 最小的那一对。", "hint": "### 样例解释\n\n员工编号为 $3,4,5,6$ 的员工将被送去培训。这满足所有要求，因为员工 $3$ 是员工 $1$ 的第 $1$ 层下属，员工 $4$ 是员工 $1$ 的第 $2$ 层下属，员工 $6$ 是员工 $3$ 的第 $1$ 层下属。\n\n### 数据范围\n\n| 子任务 | 分值 | $2\\le n\\le$ | $1\\le m\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $19$ | $50$ | $50$ |  |\n| $2$ | $25$ | $3000$ | $3000$ |  |\n| $3$ | $21$ | $200000$ | $200000$ | $p_i=i-1$ |\n| $4$ | $35$ | $200000$ | $200000$ |  |", "locale": "zh-CN"}}}
{"pid": "P11514", "type": "P", "difficulty": 4, "samples": [["4 5\n6 5 9 2\n1 2 0\n3 2 3\n4 3 6\n1 3 5\n2 4 2", "6\n6\n9\n4"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "CCO（加拿大）"], "title": "[CCO 2024] Treasure Hunt", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P1题](https://dmoj.ca/problem/cco24p1)。", "description": "有 $n$ 个岛屿通过 $m$ 条海路相连，每条路连接了两个岛屿 $a_i$ 和 $b_i$，需要花费 $c_i$ 个硬币。Perry 想要找到一条路径从他当前所在的岛屿出发，在旅途中开启宝箱并收集金币，并保证得到最大可能收益。事实证明，击退海怪的代价是相当昂贵的。为了寻找下一笔大的战利品，Perry 已经勘察了 $n$ 个岛屿，并确定第 $i$ 个岛屿上有一个装有 $v_i$ 枚硬币的宝箱。\n\n他决定从岛屿 $X$ 开始，沿着一些的海上路线航行（可能不航行），最终到达岛屿 $Y$。在他的旅程结束时，他会在岛屿 $Y$ 打开箱子，收集战利品。\n\n然而 Perry 不知道自己目前所在的岛屿！因此，对于每一个可能的起点岛屿 $X$，他都想知道从该岛屿出发的所有旅程中所能获得的最大可能的硬币数。你能帮助他计算这些值吗？你可以假设佩里有足够的硬币来穿越他选择的任何海上路线；他只关心下一次旅程的净收益。", "inputFormat": "第一行两个整数 $n, m$。\n\n第二行 $n$ 个整数 $v_i$。\n\n往后 $m$ 行每行三个整数 $a_i, b_i, c_i$，其描述了一条海路 $i$。\n\n保证无重边无自环。", "outputFormat": "$n$ 行，每行一个整数，第 $i$ 行的整数代表以点 $i$ 为起点岛屿所获得的最大可能的硬币数。", "hint": "### 数据范围\n| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $0$ | $0$ | 样例 |\n| Subtask $1$ | $20$ | $1 \\le n \\le 3000$，$0 \\le m \\le 3000$ |\n| Subtask $2$ | $20$ | $1 \\le n \\le 10^6$，$0 \\le m \\le 10^6$，对于每个岛屿 $i$，$c_i=0$ 或 $c_i=10^9$ |\n| Subtask $3$ | $28$ | $1 \\le n \\le 10^6$，$0 \\le m \\le 10^6$，任意一对岛屿之间恰好有一条路径 |\n| Subtask $4$ | $32$ | 无特殊限制 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$，$0 \\le m \\le 10^6$，$0 \\le v_i,c_i \\le 10^9$，$1 \\le a_i,b_i \\le n$。\n### 样例解释 #1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hj3kdxm6.png)\n\n对于第一个和第三个岛屿，最好待在岛上并打开岛上的箱子。\n\n对于第二个岛屿，Perry 可以前往第一个岛屿并打开那里的箱子。这将带来 $6 - 0 = 6$ 枚硬币的净收益，是最佳的净收益。\n\n对于第四个岛屿，Perry 可以前往第二个和第三个岛屿并打开那里的箱子。这将带来 $9 - 2 - 3 = 4$ 枚硬币的净收益，是最佳的净收益。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2024] Treasure Hunt", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P1题](https://dmoj.ca/problem/cco24p1)。", "description": "有 $n$ 个岛屿通过 $m$ 条海路相连，每条路连接了两个岛屿 $a_i$ 和 $b_i$，需要花费 $c_i$ 个硬币。Perry 想要找到一条路径从他当前所在的岛屿出发，在旅途中开启宝箱并收集金币，并保证得到最大可能收益。事实证明，击退海怪的代价是相当昂贵的。为了寻找下一笔大的战利品，Perry 已经勘察了 $n$ 个岛屿，并确定第 $i$ 个岛屿上有一个装有 $v_i$ 枚硬币的宝箱。\n\n他决定从岛屿 $X$ 开始，沿着一些的海上路线航行（可能不航行），最终到达岛屿 $Y$。在他的旅程结束时，他会在岛屿 $Y$ 打开箱子，收集战利品。\n\n然而 Perry 不知道自己目前所在的岛屿！因此，对于每一个可能的起点岛屿 $X$，他都想知道从该岛屿出发的所有旅程中所能获得的最大可能的硬币数。你能帮助他计算这些值吗？你可以假设佩里有足够的硬币来穿越他选择的任何海上路线；他只关心下一次旅程的净收益。", "inputFormat": "第一行两个整数 $n, m$。\n\n第二行 $n$ 个整数 $v_i$。\n\n往后 $m$ 行每行三个整数 $a_i, b_i, c_i$，其描述了一条海路 $i$。\n\n保证无重边无自环。", "outputFormat": "$n$ 行，每行一个整数，第 $i$ 行的整数代表以点 $i$ 为起点岛屿所获得的最大可能的硬币数。", "hint": "### 数据范围\n| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $0$ | $0$ | 样例 |\n| Subtask $1$ | $20$ | $1 \\le n \\le 3000$，$0 \\le m \\le 3000$ |\n| Subtask $2$ | $20$ | $1 \\le n \\le 10^6$，$0 \\le m \\le 10^6$，对于每个岛屿 $i$，$c_i=0$ 或 $c_i=10^9$ |\n| Subtask $3$ | $28$ | $1 \\le n \\le 10^6$，$0 \\le m \\le 10^6$，任意一对岛屿之间恰好有一条路径 |\n| Subtask $4$ | $32$ | 无特殊限制 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$，$0 \\le m \\le 10^6$，$0 \\le v_i,c_i \\le 10^9$，$1 \\le a_i,b_i \\le n$。\n### 样例解释 #1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hj3kdxm6.png)\n\n对于第一个和第三个岛屿，最好待在岛上并打开岛上的箱子。\n\n对于第二个岛屿，Perry 可以前往第一个岛屿并打开那里的箱子。这将带来 $6 - 0 = 6$ 枚硬币的净收益，是最佳的净收益。\n\n对于第四个岛屿，Perry 可以前往第二个和第三个岛屿并打开那里的箱子。这将带来 $9 - 2 - 3 = 4$ 枚硬币的净收益，是最佳的净收益。", "locale": "zh-CN"}}}
{"pid": "P11515", "type": "P", "difficulty": 5, "samples": [["7\n1 2 3 2 2 1 3\n2 3 1 2 3 2 1", "2\n1 2 1 2 1 2 2\n1 2 2 2 1 2 1"], ["2\n1 2\n1 1\n", "-1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "CCO（加拿大）"], "title": "[CCO 2024] Pizza Party", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P2题](https://dmoj.ca/problem/cco24p2)。\n", "description": "Troy 正在完善他最新的计划——“HackCCO”！大家都知道，黑客马拉松最大的吸引力就是免费的食物。因此，为了确保“HackCCO”取得空前的成功，Troy 订购了一辆装满 $n$ 份披萨的大车，其中从车的顶部往下数第 $i$ 份披萨的风味是 $a_i$。\n\n披萨车到达后，Troy 需要将它们按照一定的数量堆放在一张长桌上。为此，他从车顶部逐个取下披萨，并将它们放在桌上，每次要么将披萨放在另一堆披萨的顶部，要么在桌上形成新的堆叠。\n\n饥饿的 HackCCO 参与者们排成一排，依次从桌上取披萨。特洛伊知道队伍中第 $i$ 个人最喜欢的披萨口味是 $b_i$。当第 $i$ 个人走到餐桌前时，如果他们在任何一堆顶部看到他们喜欢的口味的比萨，他们会随机拿走其中任意一个。否则，他们什么都不会拿，会饿着肚子离开餐桌。\n\nTroy 不想让任何人饿着离开餐桌。因此，他请你帮助他找到一种将比萨放在餐桌上的排列方式，使得没有人会饿着离开。此外，在所有这样的排列方式中，Troy 想让你找到一个在餐桌上创建最小数量的堆放的排列方式（毕竟，餐桌只能这么长）。帮助他找到这样的排列方式，或者确定这是不可能的！", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_1, a _ 2, \\ldots, a _ n$。\n\n第三行 $n$ 个正整数 $b _ 1, b _ 2, \\ldots, b _ n$。", "outputFormat": "如果不可能按期望来排列披萨，则输出 `-1`。\n\n否则，输出应该由三行组成。在第一行输出一个整数 $K$，表示最小堆数。在第二行输出 $N$ 个空格分隔的整数 $c_1 \\sim c_n$（$1\\le c_i \\le k$），表示第 $i$ 个披萨应该放在第 $c_i$ 堆上。\n\n在第三行输出 $N$ 个空格分隔的整数 $d_1\\sim d_N$（$1\\le d_i\\le K$），表示第 $i$ 个排队的人从第 $d_i$ 堆里拿披萨。第 $i$ 个人拿的披萨需要满足他们的口味需求。", "hint": "### 数据范围\n| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $1$ | $12$ | $1 \\le n \\le 10^6$，$1 \\le a_i,b_i \\le 2$ |\n| Subtask $2$ | $16$ | $1\\le n \\le 5000$，保证 $a_i$ 互不相同 |\n| Subtask $3$ | $20$ | $1 \\le n \\le 10^6$，保证 $a_i$ 互不相同 |\n| Subtask $4$ | $24$ | $1\\le n \\le 5000$ |\n| Subtask $5$ | $28$ | $1 \\le n \\le 10^6$ |\n\n### 说明\n出题人表明原题中的 Subtask $4$ 和 Subtask $5$ 可能没有正确解法，故不对 Subtask $4$ 和 Subtask $5$ 进行评测，故该题满分为 $48$ 分。\n\nSubtask $0$ 为样例。\n\n### 样例解释 #1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w57fcsrw.png)\n\n上图是桌子上披萨的排列示意图，红色、黄色、蓝色盒子分别代表口味 $1$、$2$ 和 $3$ 的披萨。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2024] Pizza Party", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P2题](https://dmoj.ca/problem/cco24p2)。\n", "description": "Troy 正在完善他最新的计划——“HackCCO”！大家都知道，黑客马拉松最大的吸引力就是免费的食物。因此，为了确保“HackCCO”取得空前的成功，Troy 订购了一辆装满 $n$ 份披萨的大车，其中从车的顶部往下数第 $i$ 份披萨的风味是 $a_i$。\n\n披萨车到达后，Troy 需要将它们按照一定的数量堆放在一张长桌上。为此，他从车顶部逐个取下披萨，并将它们放在桌上，每次要么将披萨放在另一堆披萨的顶部，要么在桌上形成新的堆叠。\n\n饥饿的 HackCCO 参与者们排成一排，依次从桌上取披萨。特洛伊知道队伍中第 $i$ 个人最喜欢的披萨口味是 $b_i$。当第 $i$ 个人走到餐桌前时，如果他们在任何一堆顶部看到他们喜欢的口味的比萨，他们会随机拿走其中任意一个。否则，他们什么都不会拿，会饿着肚子离开餐桌。\n\nTroy 不想让任何人饿着离开餐桌。因此，他请你帮助他找到一种将比萨放在餐桌上的排列方式，使得没有人会饿着离开。此外，在所有这样的排列方式中，Troy 想让你找到一个在餐桌上创建最小数量的堆放的排列方式（毕竟，餐桌只能这么长）。帮助他找到这样的排列方式，或者确定这是不可能的！", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_1, a _ 2, \\ldots, a _ n$。\n\n第三行 $n$ 个正整数 $b _ 1, b _ 2, \\ldots, b _ n$。", "outputFormat": "如果不可能按期望来排列披萨，则输出 `-1`。\n\n否则，输出应该由三行组成。在第一行输出一个整数 $K$，表示最小堆数。在第二行输出 $N$ 个空格分隔的整数 $c_1 \\sim c_n$（$1\\le c_i \\le k$），表示第 $i$ 个披萨应该放在第 $c_i$ 堆上。\n\n在第三行输出 $N$ 个空格分隔的整数 $d_1\\sim d_N$（$1\\le d_i\\le K$），表示第 $i$ 个排队的人从第 $d_i$ 堆里拿披萨。第 $i$ 个人拿的披萨需要满足他们的口味需求。", "hint": "### 数据范围\n| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $1$ | $12$ | $1 \\le n \\le 10^6$，$1 \\le a_i,b_i \\le 2$ |\n| Subtask $2$ | $16$ | $1\\le n \\le 5000$，保证 $a_i$ 互不相同 |\n| Subtask $3$ | $20$ | $1 \\le n \\le 10^6$，保证 $a_i$ 互不相同 |\n| Subtask $4$ | $24$ | $1\\le n \\le 5000$ |\n| Subtask $5$ | $28$ | $1 \\le n \\le 10^6$ |\n\n### 说明\n出题人表明原题中的 Subtask $4$ 和 Subtask $5$ 可能没有正确解法，故不对 Subtask $4$ 和 Subtask $5$ 进行评测，故该题满分为 $48$ 分。\n\nSubtask $0$ 为样例。\n\n### 样例解释 #1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w57fcsrw.png)\n\n上图是桌子上披萨的排列示意图，红色、黄色、蓝色盒子分别代表口味 $1$、$2$ 和 $3$ 的披萨。\n", "locale": "zh-CN"}}}
{"pid": "P11516", "type": "P", "difficulty": 7, "samples": [["9 6 2 1\n1 3\n1 6\n2 4\n2 5\n2 7\n3 9\n4 6\n4 8", "2"], ["7 2 3 2\n2 7\n7 3\n3 1\n1 4\n4 5\n5 6", "3"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "线段树", "二分", "2024", "CCO（加拿大）", "树形 DP"], "title": "[CCO 2024] Summer Driving", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P3题](https://dmoj.ca/problem/cco24p3)。\n\n时限：$6 \\texttt{s}$", "description": "有 $N$ 个城市，从 $1$ 号到 $N$ 号。有 $N-1$ 条道路将这些城市连成了一棵树，道路从 $1$ 号到 $N-1$ 号编号，第 $i$ 条道路连接城市 $u_i$ 和城市 $v_i$。\n\nAlice 和 Bob 一起旅行，从城市 $R$ 出发。为了使他们的旅行更有趣，他们设计了一个游戏。Alice 和 Bob 轮流驾驶，从 Alice 开始。\n\n在 Alice 的回合，她必须沿着**恰好** $A$ 条**他们**从未走过的道路行驶。\n\n在 Bob 的回合，他必须沿着至多 $B$ 条道路（可能为零）行驶。\n\n在 Alice 无法按她的方式行驶时，Bob 沿着至多 $B$ 条他们以前**从未驾驶过**的道路行驶，然后游戏结束。\n\nAlice 想要最大化游戏结束时所在的城市编号，而 Bob 想要它最小化。那么当两人的操作都最优时，游戏结束时他们所在的城市编号是多少？", "inputFormat": "第一行四个整数，分别是 $N,R,A,B$。\n\n往后 $N-1$ 行每行两个整数 $u_i,v_i$（$1\\le u_i,v_i \\le N,u_i \\neq v_i$），描述一条道路。", "outputFormat": "输出 Alice 和 Bob 旅程结束时所在的城市，假设他们使用最优方式。", "hint": "### 数据范围\n| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $1$ | $4$ | $2 \\le N \\le 300000$，$A \\le B$ |\n| Subtask $2$ | $16$ | $2 \\le N \\le 300000$，任何城市最多有两条路连接，最多有一条路连接到城市 $R$。 |\n| Subtask $3$ | $20$ | $2 \\le N \\le 300$ |\n| Subtask $4$ | $12$ | $2 \\le N \\le 3000$ |\n| Subtask $5$ | $16$ | $2 \\le N \\le 100000$，$B\\le 10$ |\n| Subtask $6$ | $24$ | $2 \\le N \\le 100000$ |\n| Subtask $7$ | $8$ | $2 \\le N \\le 300000$ |\n\nSubtask $0$ 为样例。\n\n### 样例解释 #1\n\n在 Alice 的第一回合中，她有三个选择：前往城市 $2$、$3$ 或 $8$。\n\n如果 Alice 前往城市 $2$，Bob 可以在他的回合中不走任何道路。这样一来，Alice 就无法沿两条从未走过的新道路行驶，因此游戏进入最终阶段。在最终阶段，Bob 可以选择不走任何道路，从而结束在城市 $2$。\n\n如果 Alice 前往城市 $3$，Bob 可以选择从城市 $1$ 走一条道路。这样一来，Alice 就无法沿两条从未走过的新道路行驶，因此游戏进入最终阶段。在最终阶段，Bob 唯一的选择是不走任何道路，从而结束在城市 $1$。\n\n如果 Alice 前往城市 $8$，Bob 可以选择从城市 $4$ 走一条道路。然后，Alice 可以前往城市 $5$ 或 $7$ 中的任意一个。在两种情况下，Bob 都可以从城市 $2$ 走一条道路。Alice 无法再沿两条从未走过的新道路行驶，因此游戏进入最终阶段。在最终阶段，Bob 可以选择不走任何道路，从而结束在城市 $2$。\n\n在所有情况下，Bob 都可以使游戏结束在城市 $1$ 或 $2$。因此在最佳情况下，游戏结束在城市 $2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2024] Summer Driving", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P3题](https://dmoj.ca/problem/cco24p3)。\n\n时限：$6 \\texttt{s}$", "description": "有 $N$ 个城市，从 $1$ 号到 $N$ 号。有 $N-1$ 条道路将这些城市连成了一棵树，道路从 $1$ 号到 $N-1$ 号编号，第 $i$ 条道路连接城市 $u_i$ 和城市 $v_i$。\n\nAlice 和 Bob 一起旅行，从城市 $R$ 出发。为了使他们的旅行更有趣，他们设计了一个游戏。Alice 和 Bob 轮流驾驶，从 Alice 开始。\n\n在 Alice 的回合，她必须沿着**恰好** $A$ 条**他们**从未走过的道路行驶。\n\n在 Bob 的回合，他必须沿着至多 $B$ 条道路（可能为零）行驶。\n\n在 Alice 无法按她的方式行驶时，Bob 沿着至多 $B$ 条他们以前**从未驾驶过**的道路行驶，然后游戏结束。\n\nAlice 想要最大化游戏结束时所在的城市编号，而 Bob 想要它最小化。那么当两人的操作都最优时，游戏结束时他们所在的城市编号是多少？", "inputFormat": "第一行四个整数，分别是 $N,R,A,B$。\n\n往后 $N-1$ 行每行两个整数 $u_i,v_i$（$1\\le u_i,v_i \\le N,u_i \\neq v_i$），描述一条道路。", "outputFormat": "输出 Alice 和 Bob 旅程结束时所在的城市，假设他们使用最优方式。", "hint": "### 数据范围\n| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $1$ | $4$ | $2 \\le N \\le 300000$，$A \\le B$ |\n| Subtask $2$ | $16$ | $2 \\le N \\le 300000$，任何城市最多有两条路连接，最多有一条路连接到城市 $R$。 |\n| Subtask $3$ | $20$ | $2 \\le N \\le 300$ |\n| Subtask $4$ | $12$ | $2 \\le N \\le 3000$ |\n| Subtask $5$ | $16$ | $2 \\le N \\le 100000$，$B\\le 10$ |\n| Subtask $6$ | $24$ | $2 \\le N \\le 100000$ |\n| Subtask $7$ | $8$ | $2 \\le N \\le 300000$ |\n\nSubtask $0$ 为样例。\n\n### 样例解释 #1\n\n在 Alice 的第一回合中，她有三个选择：前往城市 $2$、$3$ 或 $8$。\n\n如果 Alice 前往城市 $2$，Bob 可以在他的回合中不走任何道路。这样一来，Alice 就无法沿两条从未走过的新道路行驶，因此游戏进入最终阶段。在最终阶段，Bob 可以选择不走任何道路，从而结束在城市 $2$。\n\n如果 Alice 前往城市 $3$，Bob 可以选择从城市 $1$ 走一条道路。这样一来，Alice 就无法沿两条从未走过的新道路行驶，因此游戏进入最终阶段。在最终阶段，Bob 唯一的选择是不走任何道路，从而结束在城市 $1$。\n\n如果 Alice 前往城市 $8$，Bob 可以选择从城市 $4$ 走一条道路。然后，Alice 可以前往城市 $5$ 或 $7$ 中的任意一个。在两种情况下，Bob 都可以从城市 $2$ 走一条道路。Alice 无法再沿两条从未走过的新道路行驶，因此游戏进入最终阶段。在最终阶段，Bob 可以选择不走任何道路，从而结束在城市 $2$。\n\n在所有情况下，Bob 都可以使游戏结束在城市 $1$ 或 $2$。因此在最佳情况下，游戏结束在城市 $2$。", "locale": "zh-CN"}}}
{"pid": "P11517", "type": "P", "difficulty": 6, "samples": [["5\n0 2\n3 2\n1 4\n2 4", "8\n2 2 4 4 1 1 1 1\n1 1 1 1 1 1 1 1\n3 3 2 2 3 3 2 2\n3 3 2 2 0 0 2 2\n4 4 4 4 2 2 2 2\n0 2 2 3 3 3 3 2\n1 4 4 2 2 0 0 0\n2 3 3 3 3 3 3 3\n3 3 3 3 3 3 3 3\n4 1 1 1 1 4 4 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "Special Judge", "CCO（加拿大）"], "title": "[CCO 2024] Infiltration", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P4题](https://dmoj.ca/problem/cco24p4)。", "description": "Ondrej 和 Edward 计划潜入邪恶组织 AQT 的基地。AQT 基地可以想象成一个由房间构成的树形结构，总共 $100$ 个房间，编号从 $0$ 到 $99$。为了完成任务，他们需要先让自己被抓进基地，然后在午夜同时逃脱并会合，再里应外合捣毁 AQT。\n\n问题是，他们被关押的房间是不同的，而且彼此不知道对方的位置。为了尽快碰头，他们制定了以下行动计划：\n\n- Ondrej 只能在奇数分钟行动，可以选择待在当前房间或移动到相邻的房间之一。\n- Edward 只能在偶数分钟行动，方式同上。\n\n记 $V(A, R, T)$ 表示某个间谍 $A$ 在特定时间 $T$ 应该待在房间 $R$。例如，$V(\\text{Ondrej}, 10, 3)$ 表示 Ondrej 在午夜后第 $3$ 分钟应该待在编号为 $10$ 的房间。根据这个记法，他们要在某个时刻 $t(o, e)$ 满足 $V(\\text{Ondrej}, o, t(o, e)) = V(\\text{Edward}, e, t(o, e))$，这样他们就算汇合了。\n\nOndrej 和 Edward 希望无论他们被关在哪里，汇合的时间都尽可能短。记距离 $d$ 为他们的初始房间之间最少需要经过的走廊数量。请设计一个策略，使得在所有可能的初始房间组合下，汇合时间 $t$ 与距离 $d$ 的比值 $\\frac{t(o, e)}{d(o, e)}$ 尽可能小。", "inputFormat": "输入的第一行包含 $N$。\n\n接下来的 $N−1$ 行每一行包含两个空格分隔的整数，表示这两个房间之间有双向走廊。", "outputFormat": "第一行应包含一个正整数 $T$，表示每个起始房间的条目数量，注意你需确保 $T \\le 1440$。\n\n接下来 $N \\times 2$，分别输出奥德雷和爱德华的计划。\n\n对于每个人的计划，输出 $N$ 行，每行 $T$ 个整数 $t_i$，表示时间 $i$ 时这个间谍在的房间编号。", "hint": "如果输出不合法，或者存在测试用例和初始房间组合 $(o, e)$ 使得间谍在 $T$ 分钟之前没有汇合，则不得分。\n\n否则，记所有测试用例和初始房间组合 $(o, e)(o \\neq e) $ 中最大的 $\\frac{t(o, e)}{d(o, e)}$ 为 $S$。根据 $S$ 的大小，可以获得的最高分如下：\n\n\n| 分值 | $S$ 的限制 |\n| :----------: | :----------: |\n|$12$ | $200<S \\leq 1440$|\n|$24$ | $100<S \\leq 200$|\n|$32$ | $50<S \\leq 100$|\n|$40$ | $40<S \\leq 50$|\n|$48$ | $30<S \\leq 40$|\n|$60$ | $25<S \\leq 30$|\n|$68$ | $20<S \\leq 25$|\n|$72$ | $19<S \\leq 20$|\n|$76$ | $18<S \\leq 19$|\n|$80$ | $17<S \\leq 18$|\n|$84$ | $16<S \\leq 17$|\n|$88$ | $15<S \\leq 16$|\n|$100$ | $S \\le 15$|\n\n对于所有数据，有 $N=100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2024] Infiltration", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P4题](https://dmoj.ca/problem/cco24p4)。", "description": "Ondrej 和 Edward 计划潜入邪恶组织 AQT 的基地。AQT 基地可以想象成一个由房间构成的树形结构，总共 $100$ 个房间，编号从 $0$ 到 $99$。为了完成任务，他们需要先让自己被抓进基地，然后在午夜同时逃脱并会合，再里应外合捣毁 AQT。\n\n问题是，他们被关押的房间是不同的，而且彼此不知道对方的位置。为了尽快碰头，他们制定了以下行动计划：\n\n- Ondrej 只能在奇数分钟行动，可以选择待在当前房间或移动到相邻的房间之一。\n- Edward 只能在偶数分钟行动，方式同上。\n\n记 $V(A, R, T)$ 表示某个间谍 $A$ 在特定时间 $T$ 应该待在房间 $R$。例如，$V(\\text{Ondrej}, 10, 3)$ 表示 Ondrej 在午夜后第 $3$ 分钟应该待在编号为 $10$ 的房间。根据这个记法，他们要在某个时刻 $t(o, e)$ 满足 $V(\\text{Ondrej}, o, t(o, e)) = V(\\text{Edward}, e, t(o, e))$，这样他们就算汇合了。\n\nOndrej 和 Edward 希望无论他们被关在哪里，汇合的时间都尽可能短。记距离 $d$ 为他们的初始房间之间最少需要经过的走廊数量。请设计一个策略，使得在所有可能的初始房间组合下，汇合时间 $t$ 与距离 $d$ 的比值 $\\frac{t(o, e)}{d(o, e)}$ 尽可能小。", "inputFormat": "输入的第一行包含 $N$。\n\n接下来的 $N−1$ 行每一行包含两个空格分隔的整数，表示这两个房间之间有双向走廊。", "outputFormat": "第一行应包含一个正整数 $T$，表示每个起始房间的条目数量，注意你需确保 $T \\le 1440$。\n\n接下来 $N \\times 2$，分别输出奥德雷和爱德华的计划。\n\n对于每个人的计划，输出 $N$ 行，每行 $T$ 个整数 $t_i$，表示时间 $i$ 时这个间谍在的房间编号。", "hint": "如果输出不合法，或者存在测试用例和初始房间组合 $(o, e)$ 使得间谍在 $T$ 分钟之前没有汇合，则不得分。\n\n否则，记所有测试用例和初始房间组合 $(o, e)(o \\neq e) $ 中最大的 $\\frac{t(o, e)}{d(o, e)}$ 为 $S$。根据 $S$ 的大小，可以获得的最高分如下：\n\n\n| 分值 | $S$ 的限制 |\n| :----------: | :----------: |\n|$12$ | $200<S \\leq 1440$|\n|$24$ | $100<S \\leq 200$|\n|$32$ | $50<S \\leq 100$|\n|$40$ | $40<S \\leq 50$|\n|$48$ | $30<S \\leq 40$|\n|$60$ | $25<S \\leq 30$|\n|$68$ | $20<S \\leq 25$|\n|$72$ | $19<S \\leq 20$|\n|$76$ | $18<S \\leq 19$|\n|$80$ | $17<S \\leq 18$|\n|$84$ | $16<S \\leq 17$|\n|$88$ | $15<S \\leq 16$|\n|$100$ | $S \\le 15$|\n\n对于所有数据，有 $N=100$。", "locale": "zh-CN"}}}
{"pid": "P11518", "type": "P", "difficulty": 5, "samples": [["5\n1 2 3 2 3", "4"], ["5\n1 2 1 3 1", "6"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "线段树", "2024", "CCO（加拿大）"], "title": "[CCO 2024] Heavy Light Decomposition", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P5题](https://dmoj.ca/problem/cco24p5)。", "description": "在一个只包含正整数的数组中，如果一个数字在数组里多次出现，我们就称它为“重的”，否则为“轻的”。定义好的数组是指数组里的数字交替出现“轻的”元素和“重的”元素。给你一个数组 $a_{1}, \\ldots, a_{N}$，请计算把它划分成若干个连续的子数组，使得每个子数组本身都是好数组的方案数。由于答案可能很大，请将最终结果对 $1000003$ 取模输出。", "inputFormat": "第一行包含一个正整数 $N$。\n\n第二行包含 $N$ 个正整数 $a_{1}, \\ldots, a_{N}\\ (1 \\leq a_{i} \\leq N)$，表示数组中的元素。", "outputFormat": "输出一行一个整数，表示方案数对 $1000003$ 取模后的结果。", "hint": "| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $12$ | $2 \\leq N \\leq 50000$，对于所有的 $i$，$a_{i}\\leq 26$ |\n| $2$ | $16$ | $2 \\leq N \\leq 5000$|\n| $3$ | $20$ | $2 \\leq N \\leq 5\\times 10^5$，每个序号为奇数的元素 $a_{i}$ 都必须等于 $1$|\n| $4$ | $24$ | 数组里的每个数字最多出现两次|\n| $5$ | $28$ | $2 \\leq N \\leq 5\\times 10^5$，无额外限制|\n\n对于 $100\\%$ 的数据，$2 \\leq N \\leq 5\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2024] Heavy Light Decomposition", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P5题](https://dmoj.ca/problem/cco24p5)。", "description": "在一个只包含正整数的数组中，如果一个数字在数组里多次出现，我们就称它为“重的”，否则为“轻的”。定义好的数组是指数组里的数字交替出现“轻的”元素和“重的”元素。给你一个数组 $a_{1}, \\ldots, a_{N}$，请计算把它划分成若干个连续的子数组，使得每个子数组本身都是好数组的方案数。由于答案可能很大，请将最终结果对 $1000003$ 取模输出。", "inputFormat": "第一行包含一个正整数 $N$。\n\n第二行包含 $N$ 个正整数 $a_{1}, \\ldots, a_{N}\\ (1 \\leq a_{i} \\leq N)$，表示数组中的元素。", "outputFormat": "输出一行一个整数，表示方案数对 $1000003$ 取模后的结果。", "hint": "| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $12$ | $2 \\leq N \\leq 50000$，对于所有的 $i$，$a_{i}\\leq 26$ |\n| $2$ | $16$ | $2 \\leq N \\leq 5000$|\n| $3$ | $20$ | $2 \\leq N \\leq 5\\times 10^5$，每个序号为奇数的元素 $a_{i}$ 都必须等于 $1$|\n| $4$ | $24$ | 数组里的每个数字最多出现两次|\n| $5$ | $28$ | $2 \\leq N \\leq 5\\times 10^5$，无额外限制|\n\n对于 $100\\%$ 的数据，$2 \\leq N \\leq 5\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P11519", "type": "P", "difficulty": 6, "samples": [["0\n4 12\n3 0\n1 1 2\n3 0\n1 1 3\n3 0\n3 5\n2 2 1\n3 0\n3 8\n1 1 4\n3 0\n3 11", "0\n1\n3\n3\n1\n3\n3\n5"], ["1\n4 12\n3 0\n1 1 2\n3 0\n1 0 2\n3 1\n3 6\n2 1 2\n3 3\n3 9\n1 2 7\n3 3\n3 8", "0\n1\n3\n3\n1\n3\n3\n5"]], "limits": {"time": [4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "CCO（加拿大）"], "title": "[CCO 2024] Telephone Plans", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P6题](https://dmoj.ca/problem/cco24p6)。", "description": "CCO 国现在由唯一的电话服务商多米通提供服务。CCO 国有 $N$ 个房屋，编号从 $1$ 到 $N$。每条电话线连接两栋不同的房屋，所有曾经存在过的电话线都不会形成回路（就像树一样）。\n\n但是每条电话线只能在一段时间内使用。如果在某个时刻，房屋之间存在着由电话线连接的路径，那么这两个房屋就可以互相通话。\n\n$Q$ 个查询，查询格式如下：\n\n- `1 x y`：在房屋 $x$ 和 $y$ 之间添加一条电话线。保证之前没有在 $x$ 和 $y$ 之间添加过电话线。\n- `2 x y`：移除房屋 $x$ 和 $y$ 之间存在的电话线。\n- `3 t`：计算在最后 $t$ 个查询这一段时间内至少有一个时刻能互相通话的房屋对数。更准确地说，记 $G_q$ 为第 $q$ 个查询之后 CCO 国的状态，$G_0$ 为没有任何查询之前的状态。如果是第 $s$ 个查询，则计算在 $G_{s-t},G_{s-t+1}, \\ldots ,G_s$ 这 $t + 1$ 个状态中的至少一个状态中能够互相通话的房屋对数。\n\n部分测试用例会被加密。对于加密的测试用例，参数 $x$，$y$ 和 $t$ 会和上一个类型为 $3$ 的查询的答案进行异或等于（C++ 中的 `^=`）操作（如果还没有过类型为 $3$ 的查询，则认为上一个答案为 $0$）。", "inputFormat": "第一行输入一个数字 $E\\ (E \\in\\{0,1\\})$。$E=0$ 表示输入没有加密，$E=1$ 表示输入加密。\n\n第二行包含两个空格分隔的整数 $N$ 和 $Q$，分别代表 CCO 国的房屋数量和查询数量。\n\n接下来的 $Q$ 行包含如上所述的查询。\n\n对于第 $q\\ (1 \\leq q \\leq Q)$ 个查询，保证解密后（如果 $E=1$）：对于类型 $1$ 和 $2$ 的查询，$1 \\leq x, y \\leq N$；对于类型 $3$ 的查询，$0 \\leq t \\leq q$。", "outputFormat": "对于每个类型为 $3$ 的查询，单独一行输出查询的答案。", "hint": "| 子任务 | 分值 | 限制 | 是否加密 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $12$ | $1 \\leq N \\leq 30,1 \\leq Q \\leq 150$| 否 |\n|$2$ | $8$ | $1 \\leq N \\leq 30,1 \\leq Q \\leq 150$| 是 |\n|$3$ | $16$ | $1 \\leq N \\leq 2000,1 \\leq Q \\leq 6000$ | 否 |\n|$4$ | $8$|$1 \\leq N \\leq 2000,1 \\leq Q \\leq 6000$ |是|\n|$5$| $16$| $1 \\leq N \\leq 10^5,1 \\leq Q \\leq 3\\times 10^5$|否|\n|$6$| $20$| $1 \\leq N \\leq 10^5,1 \\leq Q \\leq 3\\times 10^5$|是|\n|$7$| $20$| $1 \\leq N \\leq 5 \\times 10^5,1 \\leq Q \\leq 1.5\\times 10^6$|是|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2024] Telephone Plans", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P6题](https://dmoj.ca/problem/cco24p6)。", "description": "CCO 国现在由唯一的电话服务商多米通提供服务。CCO 国有 $N$ 个房屋，编号从 $1$ 到 $N$。每条电话线连接两栋不同的房屋，所有曾经存在过的电话线都不会形成回路（就像树一样）。\n\n但是每条电话线只能在一段时间内使用。如果在某个时刻，房屋之间存在着由电话线连接的路径，那么这两个房屋就可以互相通话。\n\n$Q$ 个查询，查询格式如下：\n\n- `1 x y`：在房屋 $x$ 和 $y$ 之间添加一条电话线。保证之前没有在 $x$ 和 $y$ 之间添加过电话线。\n- `2 x y`：移除房屋 $x$ 和 $y$ 之间存在的电话线。\n- `3 t`：计算在最后 $t$ 个查询这一段时间内至少有一个时刻能互相通话的房屋对数。更准确地说，记 $G_q$ 为第 $q$ 个查询之后 CCO 国的状态，$G_0$ 为没有任何查询之前的状态。如果是第 $s$ 个查询，则计算在 $G_{s-t},G_{s-t+1}, \\ldots ,G_s$ 这 $t + 1$ 个状态中的至少一个状态中能够互相通话的房屋对数。\n\n部分测试用例会被加密。对于加密的测试用例，参数 $x$，$y$ 和 $t$ 会和上一个类型为 $3$ 的查询的答案进行异或等于（C++ 中的 `^=`）操作（如果还没有过类型为 $3$ 的查询，则认为上一个答案为 $0$）。", "inputFormat": "第一行输入一个数字 $E\\ (E \\in\\{0,1\\})$。$E=0$ 表示输入没有加密，$E=1$ 表示输入加密。\n\n第二行包含两个空格分隔的整数 $N$ 和 $Q$，分别代表 CCO 国的房屋数量和查询数量。\n\n接下来的 $Q$ 行包含如上所述的查询。\n\n对于第 $q\\ (1 \\leq q \\leq Q)$ 个查询，保证解密后（如果 $E=1$）：对于类型 $1$ 和 $2$ 的查询，$1 \\leq x, y \\leq N$；对于类型 $3$ 的查询，$0 \\leq t \\leq q$。", "outputFormat": "对于每个类型为 $3$ 的查询，单独一行输出查询的答案。", "hint": "| 子任务 | 分值 | 限制 | 是否加密 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $12$ | $1 \\leq N \\leq 30,1 \\leq Q \\leq 150$| 否 |\n|$2$ | $8$ | $1 \\leq N \\leq 30,1 \\leq Q \\leq 150$| 是 |\n|$3$ | $16$ | $1 \\leq N \\leq 2000,1 \\leq Q \\leq 6000$ | 否 |\n|$4$ | $8$|$1 \\leq N \\leq 2000,1 \\leq Q \\leq 6000$ |是|\n|$5$| $16$| $1 \\leq N \\leq 10^5,1 \\leq Q \\leq 3\\times 10^5$|否|\n|$6$| $20$| $1 \\leq N \\leq 10^5,1 \\leq Q \\leq 3\\times 10^5$|是|\n|$7$| $20$| $1 \\leq N \\leq 5 \\times 10^5,1 \\leq Q \\leq 1.5\\times 10^6$|是|", "locale": "zh-CN"}}}
{"pid": "P11520", "type": "P", "difficulty": 6, "samples": [["5 2 2\n30 40 50 20 10\n10 3 20\n15 2 30", "100"], ["8 4 1\n5 10 9 3 9 8 3 1\n11 4 5\n12 7 4\n10 2 9\n5 3 4", "33"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] 骑行计划", "background": "", "description": "随着盛夏的到来，小 Rei 迎来了长达 $n$ 天的假期。为了充分利用这段时间，她计划每天骑共享单车出门，享受户外的清新空气。根据小 Rei 的计划，第 $i$ 天她将会骑行 $s_i$ 分钟，而每分钟的骑行费用为 $c$ 元。\n\n为了节约开支，小 Rei 打算购买 APP 中提供的一些骑行卡。她了解到现在有 $m$ 种骑行卡可以购买，其中第 $i$ 种骑行卡的具体信息如下：\n\n- **售价 $w_i$**：每张卡的价格为 $w_i$ 元；\n- **有效期 $d_i$**：从购买当天算起，连续 $d_i$ 天内有效；\n- **免费时间 $t_i$**：在有效期内，每天的前 $t_i$ 分钟骑行是免费的。\n\n小 Rei 可以多次购买任意一种骑行卡，并且可以在同一时间持有多张有效的骑行卡。如果某天有多张骑行卡同时有效，那么当天可以享受的免费骑行时间为这些卡中 $t_i$ 的**最大值**。超出免费时间的部分，仍然按照每分钟 $c$ 元计算。\n\n小 Rei 希望在假期中尽可能减少骑行的总支出。请你帮助她计算出在假期中骑行的最小总支出是多少。\n", "inputFormat": "第一行包含三个整数 $n, m, c \\; (1\\le n\\le 150, 1\\le m, c\\le 10^4)$，分别表示假期的天数，骑行卡的种类数以及每分钟的骑行费用。\n\n第二行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 天骑行的分钟数 $s_i \\; (1 \\le s_i\\le 150)$。\n\n接下来的 $m$ 行，每行包含三个整数 $w_i, d_i, t_i \\; (1\\le w_i\\le 10^9, 1\\le d_i\\le n, 1\\le t_i\\le 150)$，分别表示第 $i$ 种骑行卡的售价，有效期天数以及免费骑行时间。\n", "outputFormat": "输出一个整数，表示小 Rei 在假期中骑行的最小总支出。\n", "hint": "#### 样例 1 解释\n\n小 Rei 的最优策略为：在第一天和第二天购买第二种骑行卡，在第三天购买第一种骑行卡。此时前三天的免费时间为 $30$ 分钟，后两天的免费时间为 $20$ 分钟，还需要在第二天额外支付 $10$ 分钟的骑行费用，在第三天额外支付 20 分钟的骑行费用。购买骑行卡共花费 $15+15+10=40$ 元，额外骑行费用为 $(10 + 20) \\times 2 = 60$ 元，总支出为 $100$ 元。可以证明不存在总支出更少的方案，故输出 $100$。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 骑行计划", "background": "", "description": "随着盛夏的到来，小 Rei 迎来了长达 $n$ 天的假期。为了充分利用这段时间，她计划每天骑共享单车出门，享受户外的清新空气。根据小 Rei 的计划，第 $i$ 天她将会骑行 $s_i$ 分钟，而每分钟的骑行费用为 $c$ 元。\n\n为了节约开支，小 Rei 打算购买 APP 中提供的一些骑行卡。她了解到现在有 $m$ 种骑行卡可以购买，其中第 $i$ 种骑行卡的具体信息如下：\n\n- **售价 $w_i$**：每张卡的价格为 $w_i$ 元；\n- **有效期 $d_i$**：从购买当天算起，连续 $d_i$ 天内有效；\n- **免费时间 $t_i$**：在有效期内，每天的前 $t_i$ 分钟骑行是免费的。\n\n小 Rei 可以多次购买任意一种骑行卡，并且可以在同一时间持有多张有效的骑行卡。如果某天有多张骑行卡同时有效，那么当天可以享受的免费骑行时间为这些卡中 $t_i$ 的**最大值**。超出免费时间的部分，仍然按照每分钟 $c$ 元计算。\n\n小 Rei 希望在假期中尽可能减少骑行的总支出。请你帮助她计算出在假期中骑行的最小总支出是多少。\n", "inputFormat": "第一行包含三个整数 $n, m, c \\; (1\\le n\\le 150, 1\\le m, c\\le 10^4)$，分别表示假期的天数，骑行卡的种类数以及每分钟的骑行费用。\n\n第二行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 天骑行的分钟数 $s_i \\; (1 \\le s_i\\le 150)$。\n\n接下来的 $m$ 行，每行包含三个整数 $w_i, d_i, t_i \\; (1\\le w_i\\le 10^9, 1\\le d_i\\le n, 1\\le t_i\\le 150)$，分别表示第 $i$ 种骑行卡的售价，有效期天数以及免费骑行时间。\n", "outputFormat": "输出一个整数，表示小 Rei 在假期中骑行的最小总支出。\n", "hint": "#### 样例 1 解释\n\n小 Rei 的最优策略为：在第一天和第二天购买第二种骑行卡，在第三天购买第一种骑行卡。此时前三天的免费时间为 $30$ 分钟，后两天的免费时间为 $20$ 分钟，还需要在第二天额外支付 $10$ 分钟的骑行费用，在第三天额外支付 20 分钟的骑行费用。购买骑行卡共花费 $15+15+10=40$ 元，额外骑行费用为 $(10 + 20) \\times 2 = 60$ 元，总支出为 $100$ 元。可以证明不存在总支出更少的方案，故输出 $100$。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11521", "type": "P", "difficulty": 6, "samples": [["4 4\n0100\n0110\n1001\n1000\n0100\n1100\n0011\n0000", "9 4 -1"], ["11 11\n01010100100\n10111011000\n10001010110\n11011101110\n10110010010\n00100010010\n11011010011\n01001111001\n00111000111\n10010011101\n00101110110\n01010100100\n10111011000\n10001010110\n11110111010\n10001000010\n00001001110\n11101000111\n01111100101\n00111000111\n10010011101\n00101110110", "-1 25 -1 -1 -1 -1 -1 -1 -1 -1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] 挑战大模型", "background": "由于洛谷评测机太慢，$3s\\to 4s$。", "description": "S 是学校里屈指可数的理工天才。两脚分离式的电动平衡车，通过刺激人体上臂、腰部及大腿的运动神经实现控制身体运动的电极装置，以及可以用无人机吊起来的巨幅轻薄柔性屏，只不过是 S 登峰造极的技术水平的冰山一角。这一次，S 又将目光投向了最近很流行的大语言模型（Large Language Model）。\n\n大语言模型是机器学习中的新兴方向，其特点是使用大量的语料来训练语言模型，而正是算法的发展及算力的提升使得训练大语言模型不再捉襟见肘。此外，部分最新的大语言模型不仅支持文本输入输出，更支持音频、图像、视频等格式的多模态输入输出。但是 S 发现，即便是多模态的大语言模型，也不能正确处理一类特殊的图片——随机点立体图（Random Dot Stereogram）。\n\n立体图是使用视错觉造成立体感知的图像，而随机点立体图的原理是通过对随机生成的位图进行平移变换，产生立体视觉。下图是一张简单的随机点立体图。通过将绿色虚线框中的部分向左平移 $2$ 个像素，可以产生虚线框中的部分浮在原图像之上的效果。注意除虚线框及左图中虚线框左侧的红色矩形，右图中虚线框右侧的绿色矩形覆盖的部分之外，图像的外围部分需要保持完全相同，而红色矩形及绿色矩形覆盖的区域则可以分别随机生成。形式化地，如果记左图为 $W$，右图为 $Y$，则将 $W$ 中第 $r_1$ 至 $r_2$ 行，第 $c_1$ 至 $c_2$ 列的矩形子区域平移至 $Y$ 中第 $r_1$ 至 $r_2$ 行，第 $c_1'$ 至 $c_2'$ 列时，需要满足 $r_1\\le r_2$，$c_2 - c_1 = c_2'-c_1'\\ge 0$ （为 $0$ 时恰好只移动一列），$c_1>c_1'$；只有 $W$ 中的第 $r_1$ 至 $r_2$ 行，第 $c_1'$ 至 $(c_1-1)$ 列及 $Y$ 中的第 $r_1$ 至 $r_2$ 行，第 $(c_2'+1)$ 至 $c_2$ 列部分的像素都可以独立随机生成，无论平移前后矩形区域是否重叠。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7vts3y14.png)\n\nS 发现：尽管大语言模型可以识别传统的图像验证码，但是如果使用随机点立体图来生成验证码，那么大语言模型将无法正确识别！为了验证这一发现，S 需要生成不同的随机点立体图来测试大语言模型是否能够识别图像内容。作为计划的第一步，S 想先测试大语言模型能否看出图片中的矩形。具体而言，S 将把两个可以表示为 $01$ 矩阵的 $N$ 行 $M$ 列的位图 $W$ 和 $Y$ 输入到大语言模型中，并询问 $Y$ 是否可以由 $W$ 向左平移某个矩形子区域得到。假设在平移前后，这一矩形子区域都不超出原图片的边界。为了检验大语言模型的输出，S 需要一个程序来计算，对于所有可能的平移距离，右半边的图片 $Y$ 是否可以通过对左半边的图片 $W$ 平移某个矩形子区域得到，并在可行时求出该矩形子区域的最大面积。由于 S 这周末还要陪 M 逛街，所以她想请你帮她实现一下这个程序。\n", "inputFormat": "输入的第一行包含两个正整数 $N, M$，表示两个像素矩阵的行数和列数。保证 $1\\le N, M\\le 500$。\n\n接下来 $N$ 行，每行输入一个包含 $M$ 个字符的字符串，表示 $W$ 的每一行。保证每个字符均为 `0` 或 `1`。\n\n接下来 $N$ 行，每行输入一个包含 $M$ 个字符的字符串，表示 $Y$ 的每一行。保证每个字符均为 `0` 或 `1`。\n", "outputFormat": "输出共一行，包含 $(m-1)$ 个由单个空格分隔开的整数，其中第 $i$（$1\\le i \\le m - 1$）个整数表示当平移距离为 $i$ 个像素时，可能的矩形子区域的最大面积。如果不存在任何满足要求的矩形子区域，则对这个移动距离输出 `-1`。\n", "hint": "#### 样例解释 1\n\n当固定平移距离为 $1$ 时，可能的最大矩形子区域在 $W$ 中对应第 $2$ 行至第 $4$ 行，第 $2$ 列至第 $4$ 列的矩形区域，其平移后在 $Y$ 中为第 $2$ 行至第 $4$ 行，第 $1$ 列至第 $3$ 列。\n\n如果假设平移距离为 $2$，则可能的最大矩形子区域为 $W$ 中第 $3$ 列整列对应的矩形区域。\n\n可以证明，不存在任何平移距离为 $3$ 的平移方法。\n\n#### 样例解释 2\n\n该样例即为题面所附图片。\n\n#### 数据范围\n\n对于所有数据，保证 $1\\le N, M\\le 500$，输入的 $W$ 和 $Y$ 是 $N$ 行 $M$ 列仅含 `0` 和 `1` 的字符矩阵。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 挑战大模型", "background": "由于洛谷评测机太慢，$3s\\to 4s$。", "description": "S 是学校里屈指可数的理工天才。两脚分离式的电动平衡车，通过刺激人体上臂、腰部及大腿的运动神经实现控制身体运动的电极装置，以及可以用无人机吊起来的巨幅轻薄柔性屏，只不过是 S 登峰造极的技术水平的冰山一角。这一次，S 又将目光投向了最近很流行的大语言模型（Large Language Model）。\n\n大语言模型是机器学习中的新兴方向，其特点是使用大量的语料来训练语言模型，而正是算法的发展及算力的提升使得训练大语言模型不再捉襟见肘。此外，部分最新的大语言模型不仅支持文本输入输出，更支持音频、图像、视频等格式的多模态输入输出。但是 S 发现，即便是多模态的大语言模型，也不能正确处理一类特殊的图片——随机点立体图（Random Dot Stereogram）。\n\n立体图是使用视错觉造成立体感知的图像，而随机点立体图的原理是通过对随机生成的位图进行平移变换，产生立体视觉。下图是一张简单的随机点立体图。通过将绿色虚线框中的部分向左平移 $2$ 个像素，可以产生虚线框中的部分浮在原图像之上的效果。注意除虚线框及左图中虚线框左侧的红色矩形，右图中虚线框右侧的绿色矩形覆盖的部分之外，图像的外围部分需要保持完全相同，而红色矩形及绿色矩形覆盖的区域则可以分别随机生成。形式化地，如果记左图为 $W$，右图为 $Y$，则将 $W$ 中第 $r_1$ 至 $r_2$ 行，第 $c_1$ 至 $c_2$ 列的矩形子区域平移至 $Y$ 中第 $r_1$ 至 $r_2$ 行，第 $c_1'$ 至 $c_2'$ 列时，需要满足 $r_1\\le r_2$，$c_2 - c_1 = c_2'-c_1'\\ge 0$ （为 $0$ 时恰好只移动一列），$c_1>c_1'$；只有 $W$ 中的第 $r_1$ 至 $r_2$ 行，第 $c_1'$ 至 $(c_1-1)$ 列及 $Y$ 中的第 $r_1$ 至 $r_2$ 行，第 $(c_2'+1)$ 至 $c_2$ 列部分的像素都可以独立随机生成，无论平移前后矩形区域是否重叠。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7vts3y14.png)\n\nS 发现：尽管大语言模型可以识别传统的图像验证码，但是如果使用随机点立体图来生成验证码，那么大语言模型将无法正确识别！为了验证这一发现，S 需要生成不同的随机点立体图来测试大语言模型是否能够识别图像内容。作为计划的第一步，S 想先测试大语言模型能否看出图片中的矩形。具体而言，S 将把两个可以表示为 $01$ 矩阵的 $N$ 行 $M$ 列的位图 $W$ 和 $Y$ 输入到大语言模型中，并询问 $Y$ 是否可以由 $W$ 向左平移某个矩形子区域得到。假设在平移前后，这一矩形子区域都不超出原图片的边界。为了检验大语言模型的输出，S 需要一个程序来计算，对于所有可能的平移距离，右半边的图片 $Y$ 是否可以通过对左半边的图片 $W$ 平移某个矩形子区域得到，并在可行时求出该矩形子区域的最大面积。由于 S 这周末还要陪 M 逛街，所以她想请你帮她实现一下这个程序。\n", "inputFormat": "输入的第一行包含两个正整数 $N, M$，表示两个像素矩阵的行数和列数。保证 $1\\le N, M\\le 500$。\n\n接下来 $N$ 行，每行输入一个包含 $M$ 个字符的字符串，表示 $W$ 的每一行。保证每个字符均为 `0` 或 `1`。\n\n接下来 $N$ 行，每行输入一个包含 $M$ 个字符的字符串，表示 $Y$ 的每一行。保证每个字符均为 `0` 或 `1`。\n", "outputFormat": "输出共一行，包含 $(m-1)$ 个由单个空格分隔开的整数，其中第 $i$（$1\\le i \\le m - 1$）个整数表示当平移距离为 $i$ 个像素时，可能的矩形子区域的最大面积。如果不存在任何满足要求的矩形子区域，则对这个移动距离输出 `-1`。\n", "hint": "#### 样例解释 1\n\n当固定平移距离为 $1$ 时，可能的最大矩形子区域在 $W$ 中对应第 $2$ 行至第 $4$ 行，第 $2$ 列至第 $4$ 列的矩形区域，其平移后在 $Y$ 中为第 $2$ 行至第 $4$ 行，第 $1$ 列至第 $3$ 列。\n\n如果假设平移距离为 $2$，则可能的最大矩形子区域为 $W$ 中第 $3$ 列整列对应的矩形区域。\n\n可以证明，不存在任何平移距离为 $3$ 的平移方法。\n\n#### 样例解释 2\n\n该样例即为题面所附图片。\n\n#### 数据范围\n\n对于所有数据，保证 $1\\le N, M\\le 500$，输入的 $W$ 和 $Y$ 是 $N$ 行 $M$ 列仅含 `0` 和 `1` 的字符矩阵。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11522", "type": "P", "difficulty": 3, "samples": [["4\n3 2\n1 2 3\n13 4\n1 1 4 5 1 4 1 9 1 9 8 1 0\n4 2\n1 10 100 1000\n1 1\n114514", "3\n4\n100\n114514"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] Harmful Machine Learning", "background": "人工智能领域大神 The NIT 正在训练机器人 The BOT。", "description": "The BOT 在一个 $1\\times n$ 的网格上移动，其中在 $(1,i)$ 上有数字 $a_i$。The BOT 初始在格子 $(1,x)$, The BOT 想要走到一个数字尽量大的格子。每一步 The BOT 可以选择移动到相邻的一个格子或是不动，并且在移动后可以选择是否选择格子上的数字并结束游戏，而为了训练 The BOT 的能力，The NIT 会给出一些阻碍，在 The BOT 选择是否结束之后，The NIT 可以将两个数字交换位置。\n\n具体地说，我们可以把整个游戏看成若干个回合，初始 The BOT 在位置 $(1,x)$，在一个回合中，以下事件会按顺序依次发生：\n\n1. The NIT 选择两个位置 $1\\leq i,j\\leq n$，并交换 $a_i,a_j$ 的值，注意 $i$ 可以等于 $j$，此时交换不会带来任何变化。\n2. The BOT 选择移动到一个相邻的位置或是原地不动，令 The BOT 现在所在的位置为 $y$，即选择 $1\\leq z\\leq n$ 且 $|z-y|\\leq 1$，并移动到 $(1,z)$。\n3. The BOT 选择是否结束游戏，令 The BOT 现在所在的位置为 $y$，如果选择结束则会获得 $a_y$ 的分数并**立刻结束游戏**，否则无事发生。\n\n可以发现，如果 The BOT 一直不选择结束游戏，则游戏永远不会结束，为了防止这个情况的发生，在游戏的第 $10^{114514}$ 个回合，The BOT 必须选择立刻结束游戏。\n\nThe NIT 希望 The BOT 结束游戏时的分数最小，而 The BOT 希望这个分数最大。The NIT 和 The BOT 都是绝顶聪明的，但他们并没有时间玩 $10^{114514}$ 个回合，于是他们请你帮他们计算一下，The BOT 最终的分数是多少？", "inputFormat": "本题含有多组测试数据。\n\n第一行一个整数 $T(1\\leq T\\leq 10^5)$，表示测试数据数量。\n\n对于每一组数据：\n\n第一行两个正整数 $n,x(1\\leq n\\leq 10^5,1\\leq x\\leq n)$，分别表示网格的长度以及初始位置 $(1,x)$。\n\n之后一行 $n$ 个非负整数 $a_i(0\\leq a_i\\leq 10^9)$。\n\n保证所有数据的 $n$ 的总和不超过 $5\\times 10^5$。", "outputFormat": "对于每一组数据，输出一行一个数表示答案。", "hint": "### 题目来源\n\n题目来自 THUPC2025（2025年清华大学学生程序设计竞赛暨高校邀请赛）初赛，信息来源于 [THUSAAC 仓库](https://gitlink.org.cn/thusaa/thupc2025pre)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] Harmful Machine Learning", "background": "人工智能领域大神 The NIT 正在训练机器人 The BOT。", "description": "The BOT 在一个 $1\\times n$ 的网格上移动，其中在 $(1,i)$ 上有数字 $a_i$。The BOT 初始在格子 $(1,x)$, The BOT 想要走到一个数字尽量大的格子。每一步 The BOT 可以选择移动到相邻的一个格子或是不动，并且在移动后可以选择是否选择格子上的数字并结束游戏，而为了训练 The BOT 的能力，The NIT 会给出一些阻碍，在 The BOT 选择是否结束之后，The NIT 可以将两个数字交换位置。\n\n具体地说，我们可以把整个游戏看成若干个回合，初始 The BOT 在位置 $(1,x)$，在一个回合中，以下事件会按顺序依次发生：\n\n1. The NIT 选择两个位置 $1\\leq i,j\\leq n$，并交换 $a_i,a_j$ 的值，注意 $i$ 可以等于 $j$，此时交换不会带来任何变化。\n2. The BOT 选择移动到一个相邻的位置或是原地不动，令 The BOT 现在所在的位置为 $y$，即选择 $1\\leq z\\leq n$ 且 $|z-y|\\leq 1$，并移动到 $(1,z)$。\n3. The BOT 选择是否结束游戏，令 The BOT 现在所在的位置为 $y$，如果选择结束则会获得 $a_y$ 的分数并**立刻结束游戏**，否则无事发生。\n\n可以发现，如果 The BOT 一直不选择结束游戏，则游戏永远不会结束，为了防止这个情况的发生，在游戏的第 $10^{114514}$ 个回合，The BOT 必须选择立刻结束游戏。\n\nThe NIT 希望 The BOT 结束游戏时的分数最小，而 The BOT 希望这个分数最大。The NIT 和 The BOT 都是绝顶聪明的，但他们并没有时间玩 $10^{114514}$ 个回合，于是他们请你帮他们计算一下，The BOT 最终的分数是多少？", "inputFormat": "本题含有多组测试数据。\n\n第一行一个整数 $T(1\\leq T\\leq 10^5)$，表示测试数据数量。\n\n对于每一组数据：\n\n第一行两个正整数 $n,x(1\\leq n\\leq 10^5,1\\leq x\\leq n)$，分别表示网格的长度以及初始位置 $(1,x)$。\n\n之后一行 $n$ 个非负整数 $a_i(0\\leq a_i\\leq 10^9)$。\n\n保证所有数据的 $n$ 的总和不超过 $5\\times 10^5$。", "outputFormat": "对于每一组数据，输出一行一个数表示答案。", "hint": "### 题目来源\n\n题目来自 THUPC2025（2025年清华大学学生程序设计竞赛暨高校邀请赛）初赛，信息来源于 [THUSAAC 仓库](https://gitlink.org.cn/thusaa/thupc2025pre)。", "locale": "zh-CN"}}}
{"pid": "P11523", "type": "P", "difficulty": 4, "samples": [["4 7\n2 1 4 3", "1 1 3 2\n"], ["9 27\n801 919 210 101 417 713 304 613 921", "4 4 2 1 3 4 2 3 4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] 摊位分配", "background": "", "description": "\nT 大学拥有数不胜数的优秀社团，例如核心成员达到 118 人的酸协（Students' Association of Acid），刚成立就饱受关注的篹协（Students' Association of Bamboo Basket），当然还有名扬四海的蒜协（Students' Association of Garlic）。每学期伊始，T 大学都会统一举办全校性的社团招新活动。招新活动因规模庞大，故又被称为“百团大战”。如何把有限的场地像希尔伯特旅馆一般分配给各个社团，总是百团大战的负责人最头疼的问题。今年的负责人看中了蒜协将一整头大蒜干净利落地拆解成瓣的能力，因此找到了蒜协，希望可以用蒜法来解决分配摊位的问题。\n\n具体而言，今年一共有 $T$ 个社团希望参加百团大战，而可供百团使用的场地可以看成沿着学堂路排成一条直线的 $H$ 个格子。为了鼓励社团之间的良性竞争，负责人决定根据每个社团上个学年对学校的贡献进行分配。按照提交参加申请的顺序，第 $i$ 个社团上个学年对 T 大学的贡献为 $u_i$。负责人希望根据以下规则将所有的 $H$ 个格子分配给每个社团：\n\n- 对于每个社团，计算序列 $u_i, u_i/2, u_i/4, \\cdots,u_i/2^{H-1}$；\n\n- 对于计算得到的 $T\\times H$ 个数值，每次从中删去一个最大的，并将一个格子分配给相应社团的摊位，直到所有 $H$ 个格子都分配完毕；如果出现多个最大值，\n  \n  - 若有社团尚未分到格子，则优先分配给这样的社团，否则优先分配给原始的 $u_i$ 最大的社团；\n  \n  - 如果仍有多个社团可以分配，则按提交参加申请的顺序分配。\n\n因为蒜协大部分成员都去播种过冬的大蒜了，所以需要在烹饪和炼丹部打蒜蓉的你协助负责人计算一下每个社团能分到几个格子的摊位。", "inputFormat": "输入的第一行包含一个两个正整数 $T(1\\le T \\le 10^5), H(1\\le H \\le 10^9)$，分别表示社团的数量和场地格子的数量。\n\n输入的第二行包含 $T$ 个正整数 $u_1, u_2, \\cdots,u_T(1\\le u_i\\le 10^9)$，分别表示每个社团的贡献。", "outputFormat": "输出一行 $T$ 个整数，其中第 $i$（$1\\le i\\le T$） 个整数表示第 $i$ 个社团的摊位包括几个格子。\n", "hint": "#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 摊位分配", "background": "", "description": "\nT 大学拥有数不胜数的优秀社团，例如核心成员达到 118 人的酸协（Students' Association of Acid），刚成立就饱受关注的篹协（Students' Association of Bamboo Basket），当然还有名扬四海的蒜协（Students' Association of Garlic）。每学期伊始，T 大学都会统一举办全校性的社团招新活动。招新活动因规模庞大，故又被称为“百团大战”。如何把有限的场地像希尔伯特旅馆一般分配给各个社团，总是百团大战的负责人最头疼的问题。今年的负责人看中了蒜协将一整头大蒜干净利落地拆解成瓣的能力，因此找到了蒜协，希望可以用蒜法来解决分配摊位的问题。\n\n具体而言，今年一共有 $T$ 个社团希望参加百团大战，而可供百团使用的场地可以看成沿着学堂路排成一条直线的 $H$ 个格子。为了鼓励社团之间的良性竞争，负责人决定根据每个社团上个学年对学校的贡献进行分配。按照提交参加申请的顺序，第 $i$ 个社团上个学年对 T 大学的贡献为 $u_i$。负责人希望根据以下规则将所有的 $H$ 个格子分配给每个社团：\n\n- 对于每个社团，计算序列 $u_i, u_i/2, u_i/4, \\cdots,u_i/2^{H-1}$；\n\n- 对于计算得到的 $T\\times H$ 个数值，每次从中删去一个最大的，并将一个格子分配给相应社团的摊位，直到所有 $H$ 个格子都分配完毕；如果出现多个最大值，\n  \n  - 若有社团尚未分到格子，则优先分配给这样的社团，否则优先分配给原始的 $u_i$ 最大的社团；\n  \n  - 如果仍有多个社团可以分配，则按提交参加申请的顺序分配。\n\n因为蒜协大部分成员都去播种过冬的大蒜了，所以需要在烹饪和炼丹部打蒜蓉的你协助负责人计算一下每个社团能分到几个格子的摊位。", "inputFormat": "输入的第一行包含一个两个正整数 $T(1\\le T \\le 10^5), H(1\\le H \\le 10^9)$，分别表示社团的数量和场地格子的数量。\n\n输入的第二行包含 $T$ 个正整数 $u_1, u_2, \\cdots,u_T(1\\le u_i\\le 10^9)$，分别表示每个社团的贡献。", "outputFormat": "输出一行 $T$ 个整数，其中第 $i$（$1\\le i\\le T$） 个整数表示第 $i$ 个社团的摊位包括几个格子。\n", "hint": "#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11524", "type": "P", "difficulty": 6, "samples": [["2\n3 3\n4 2\n2\n2\n4", "2\n5"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] 背向而行", "background": "", "description": "有 $m$ 堆积木，其中第 $i$ 堆积木位于坐标 $x_i$ 的位置，有 $c_i$ 块。\n\n反复执行如下操作，直至无法操作：\n\n- 如果存在两块积木坐标相同，则找到满足条件的积木中坐标最小的两块，将一块坐标减 $1$，另一块坐标加 $1$，\n\n可以证明在有限次操作之后，所有积木的坐标都会不同，此时无法进行操作。\n\n多次询问，每次给定正整数 $k$，问最后左数第 $k$ 块积木的位置。保证询问的 $k$ 严格递增。", "inputFormat": "第一行一个正整数 $m$。保证 $1\\le m \\le 2\\times 10^6$。\n\n接下来 $m$ 行，其中第 $i$ 行两个正整数 $x_i,c_i$。保证 $1\\le x_i \\le 10^9$，$1\\le c_i \\le 10^9$。保证 $x_i$ 按照输入的顺序严格递增，即 $x_i<x_{i+1}$。\n\n接下来一行一个正整数 $q$，表示询问个数。保证 $1\\le q\\le 2\\times 10^6$。\n\n接下来 $q$ 行，每行一个正整数 $k$，表示一次询问。保证 $1\\le k \\le \\sum\\limits_{i=1}^{m} c_i \\le 10^9$。保证询问的 $k$ 严格递增。\n", "outputFormat": "输出 $q$ 行，每行一个整数，其中第 $i$ 行表示第 $i$ 个询问的答案。\n", "hint": "我们用长度为 5 的单调不降数字字符串描述从左往右五块积木的位置，那么操作过程如下所示：\n\n$33344 \\to 23444 \\to 23345 \\to 22445 \\to 13445 \\to 13355 \\to 12455 \\to 12446 \\to 12356$\n\n最终第二块积木坐标为 2，第四块积木坐标为 5。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 背向而行", "background": "", "description": "有 $m$ 堆积木，其中第 $i$ 堆积木位于坐标 $x_i$ 的位置，有 $c_i$ 块。\n\n反复执行如下操作，直至无法操作：\n\n- 如果存在两块积木坐标相同，则找到满足条件的积木中坐标最小的两块，将一块坐标减 $1$，另一块坐标加 $1$，\n\n可以证明在有限次操作之后，所有积木的坐标都会不同，此时无法进行操作。\n\n多次询问，每次给定正整数 $k$，问最后左数第 $k$ 块积木的位置。保证询问的 $k$ 严格递增。", "inputFormat": "第一行一个正整数 $m$。保证 $1\\le m \\le 2\\times 10^6$。\n\n接下来 $m$ 行，其中第 $i$ 行两个正整数 $x_i,c_i$。保证 $1\\le x_i \\le 10^9$，$1\\le c_i \\le 10^9$。保证 $x_i$ 按照输入的顺序严格递增，即 $x_i<x_{i+1}$。\n\n接下来一行一个正整数 $q$，表示询问个数。保证 $1\\le q\\le 2\\times 10^6$。\n\n接下来 $q$ 行，每行一个正整数 $k$，表示一次询问。保证 $1\\le k \\le \\sum\\limits_{i=1}^{m} c_i \\le 10^9$。保证询问的 $k$ 严格递增。\n", "outputFormat": "输出 $q$ 行，每行一个整数，其中第 $i$ 行表示第 $i$ 个询问的答案。\n", "hint": "我们用长度为 5 的单调不降数字字符串描述从左往右五块积木的位置，那么操作过程如下所示：\n\n$33344 \\to 23444 \\to 23345 \\to 22445 \\to 13445 \\to 13355 \\to 12455 \\to 12446 \\to 12356$\n\n最终第二块积木坐标为 2，第四块积木坐标为 5。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11525", "type": "P", "difficulty": 7, "samples": [["2\n4\n2 3 4 1\n2\n2 1", "5\n2 4\n1 4\n1 3\n2 4\n1 4\n-1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "Special Judge", "THUPC"], "title": "[THUPC 2025 初赛] 排序大师 2", "background": "", "description": "由于你是排序大师，你经常被路过的游客刁难，要求用一些奇怪的操作给序列排序。\n\n由于你是远近闻名的排序大师，邻国的排序萌新小 I 慕名前来拜访，留下了一个长度为 $n$ 的排列 $a_1, a_2 \\cdots, a_n$，并要求你用以下操作将排列升序排序：\n\n- 选择 $i,j$，满足 $1 \\le i, j \\le n$ 且 $|j - i| > 1$，交换 $a_i$ 和 $a_j$。\n\n由于你是因精益求精而远近闻名的排序大师，你需要给出一个排序方案**最小化**操作次数，或者报告以上操作无法将序列排序。如有多种操作次数最少的排序方案，输出任意一种即可。", "inputFormat": "**本题有多组测试数据**。第一行一个整数 $T (T \\ge 1)$ 表示测试数据组数。\n\n对于每组测试数据，输入的第一行一个整数 $n(1 \\le n \\le 10^5)$ 表示排列长度，接下来一行 $n$ 个两两不同的整数 $a_1,a_2,\\cdots, a_n (1 \\le a_i \\le n)$ 表示给出的排列。\n\n保证单个测试点中所有测试数据的 $n$ 的和不超过 $10^5$。", "outputFormat": "对于每组测试数据，如果使用题目给出的操作无法将序列排序，输出一行一个整数 `-1`，否则第一行输出一个整数 $s$ 表示最少的操作步数，接下来 $s$ 行每行两个整数 $i,j$，表示一次操作，你需要保证 $1 \\le i, j \\le n$ 且 $|j - i| > 1$。\n\n可以证明对于所有可能输入，若可以使用题设操作将序列排序，则 $s \\le 5n$。", "hint": "对于第一组测试数据，排序过程为 $2341 \\to 2143 \\to 3142 \\to 4132 \\to 4231 \\to 1234$。可以证明不存在步数更少的方案。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 排序大师 2", "background": "", "description": "由于你是排序大师，你经常被路过的游客刁难，要求用一些奇怪的操作给序列排序。\n\n由于你是远近闻名的排序大师，邻国的排序萌新小 I 慕名前来拜访，留下了一个长度为 $n$ 的排列 $a_1, a_2 \\cdots, a_n$，并要求你用以下操作将排列升序排序：\n\n- 选择 $i,j$，满足 $1 \\le i, j \\le n$ 且 $|j - i| > 1$，交换 $a_i$ 和 $a_j$。\n\n由于你是因精益求精而远近闻名的排序大师，你需要给出一个排序方案**最小化**操作次数，或者报告以上操作无法将序列排序。如有多种操作次数最少的排序方案，输出任意一种即可。", "inputFormat": "**本题有多组测试数据**。第一行一个整数 $T (T \\ge 1)$ 表示测试数据组数。\n\n对于每组测试数据，输入的第一行一个整数 $n(1 \\le n \\le 10^5)$ 表示排列长度，接下来一行 $n$ 个两两不同的整数 $a_1,a_2,\\cdots, a_n (1 \\le a_i \\le n)$ 表示给出的排列。\n\n保证单个测试点中所有测试数据的 $n$ 的和不超过 $10^5$。", "outputFormat": "对于每组测试数据，如果使用题目给出的操作无法将序列排序，输出一行一个整数 `-1`，否则第一行输出一个整数 $s$ 表示最少的操作步数，接下来 $s$ 行每行两个整数 $i,j$，表示一次操作，你需要保证 $1 \\le i, j \\le n$ 且 $|j - i| > 1$。\n\n可以证明对于所有可能输入，若可以使用题设操作将序列排序，则 $s \\le 5n$。", "hint": "对于第一组测试数据，排序过程为 $2341 \\to 2143 \\to 3142 \\to 4132 \\to 4231 \\to 1234$。可以证明不存在步数更少的方案。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11526", "type": "P", "difficulty": 5, "samples": [["6\nWMW\nMWM\nWMWXMWM\nWWWXMMMXWWW\nMMMXWWWXMMM\nWMWMWMWWMWW", "Draw\nWater\nDraw\nMenji\nWater\nDraw"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] Imyourfan", "background": "", "description": "W 老师正在和他的粉丝 Menji 玩一个游戏。\n\n桌上有 $n$ 张卡片，编号为 $1\\sim n$，每张卡片有一个字母 $s_i$，其中 $s_i$ 为 $\\texttt{X},\\texttt{W},\\texttt{M}$ 中的一个，且保证至少存在一个 $\\texttt{W}$ 和至少一个 $\\texttt{M}$。\n\nW 老师和 Menji 轮流操作，W 老师先手，当轮到一名玩家操作时，他会选择一个区间 $[l,r](1\\leq l\\leq r\\leq n)$，满足区间中不存在写有字母 $\\texttt{X}$ 的卡片，然后拿走区间内所有卡片。\n\n若在某次操作过后，所有的 $\\texttt{W},\\texttt{M}$ 卡片都已经被拿走，那么游戏平局，否则若某次操作后所有的 $\\texttt{W}$ 都被拿走，那么 W 老师获胜，如果某次操作后所有的 $\\texttt{M}$ 都被拿走，那么 Menji 获胜。\n\nW 老师和 Menji 都是绝顶聪明的，现在给定所有的 $s_1\\dots s_n$，请判断游戏的结果，若 W 老师获胜则输出 `Water`，如果 Menji 获胜则输出 `Menji`，如果平局则输出 `Draw`。", "inputFormat": "本题含有多组测试数据。\n\n第一行一个整数 $T(1\\leq T\\leq 10^5)$，表示测试数据数量。\n\n对于每一组数据：\n\n输入一行一个字符串 $n(2\\leq |s| \\leq 10^5)$，其中 $n=|s|$，$s_i$ 即为卡片 $i$ 上的字母。\n", "outputFormat": "对于每一组数据，输出一行一个字符串，若 W 老师获胜则输出 `Water`，如果 Menji 获胜则输出 `Menji`，如果平局则输出 `Draw`。\n", "hint": "- 对于第一组数据，若 W 老师直接拿走所有的卡片，那么游戏是平局，否则 W 老师无法同时拿走两张写有 $\\texttt{W}$ 的卡片，Menji 可以此时拿走写有 $\\texttt{M}$ 的卡片并获胜。所以 W 老师一定会拿走所有卡片，游戏结果为平局。\n\n- 对于第二组数据，W 老师直接拿走 $\\texttt{W}$ 即可获胜。\n\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] Imyourfan", "background": "", "description": "W 老师正在和他的粉丝 Menji 玩一个游戏。\n\n桌上有 $n$ 张卡片，编号为 $1\\sim n$，每张卡片有一个字母 $s_i$，其中 $s_i$ 为 $\\texttt{X},\\texttt{W},\\texttt{M}$ 中的一个，且保证至少存在一个 $\\texttt{W}$ 和至少一个 $\\texttt{M}$。\n\nW 老师和 Menji 轮流操作，W 老师先手，当轮到一名玩家操作时，他会选择一个区间 $[l,r](1\\leq l\\leq r\\leq n)$，满足区间中不存在写有字母 $\\texttt{X}$ 的卡片，然后拿走区间内所有卡片。\n\n若在某次操作过后，所有的 $\\texttt{W},\\texttt{M}$ 卡片都已经被拿走，那么游戏平局，否则若某次操作后所有的 $\\texttt{W}$ 都被拿走，那么 W 老师获胜，如果某次操作后所有的 $\\texttt{M}$ 都被拿走，那么 Menji 获胜。\n\nW 老师和 Menji 都是绝顶聪明的，现在给定所有的 $s_1\\dots s_n$，请判断游戏的结果，若 W 老师获胜则输出 `Water`，如果 Menji 获胜则输出 `Menji`，如果平局则输出 `Draw`。", "inputFormat": "本题含有多组测试数据。\n\n第一行一个整数 $T(1\\leq T\\leq 10^5)$，表示测试数据数量。\n\n对于每一组数据：\n\n输入一行一个字符串 $n(2\\leq |s| \\leq 10^5)$，其中 $n=|s|$，$s_i$ 即为卡片 $i$ 上的字母。\n", "outputFormat": "对于每一组数据，输出一行一个字符串，若 W 老师获胜则输出 `Water`，如果 Menji 获胜则输出 `Menji`，如果平局则输出 `Draw`。\n", "hint": "- 对于第一组数据，若 W 老师直接拿走所有的卡片，那么游戏是平局，否则 W 老师无法同时拿走两张写有 $\\texttt{W}$ 的卡片，Menji 可以此时拿走写有 $\\texttt{M}$ 的卡片并获胜。所以 W 老师一定会拿走所有卡片，游戏结果为平局。\n\n- 对于第二组数据，W 老师直接拿走 $\\texttt{W}$ 即可获胜。\n\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11527", "type": "P", "difficulty": 6, "samples": [["7 7\n1 1 1 1 1 1 1\n1 2 6 2\n2 1\n1 3 5 5\n2 3\n1 2 7 3\n2 3\n2 2", "7\n22\n36\n42"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] waht 先生的法阵", "background": "由于洛谷评测机太慢，$4s\\to 5s$。", "description": "waht 先生是一名法力强大的魔法师。\n\nwaht 先生为了增强自己的法力，设置了一个法阵。这个法阵中共有 $n$ 块魔法石，它们从左到右依次排成一列；并且从左数第 $i$ 块魔法石的编号为 $i$，其法力值初始为 $a_i$。\n\nwaht 先生可以获取一些魔法石的法力。然而由于这个法阵的特殊性质，在获取法力时，waht 先生必须先选择一块魔法石；并且一旦第 $x$ 块魔法石被选，接下来必须再选第 $x+\\gcd(x,a_x)$ 块魔法石（这里 $\\gcd(x,y)$ 表示 $x,y$ 的最大公约数），直到 $x+\\gcd (x,a_x)>n$ 时 waht 先生会立即停止本次法力获取的过程。waht 先生获取的法力将会是过程中所选的所有魔法石的法力值之和。\n\nwaht 先生会对这个法阵进行 $q$ 次操作。具体的，有以下两类操作：\n\n- waht 先生选择两个数 $l,r\\;(1\\leq l\\leq r\\leq n)$，对区间 $[l,r]$ 中的所有魔法石施加法术，使得它们的法力值全部乘以 $c$。具体的，对于所有满足 $l\\leq i\\leq r$ 的 $i$，将 $a_i$ 的值修改为 $c\\cdot a_i$。\n- waht 先生选择第 $x$ 块魔法石，并按照上述的规则获取法力。\n\n每当 waht 先生选择某一块魔法石来获取法力时，你都需要帮他计算出他到底获得了多少法力。由于答案可能很大，你只需要求出答案对 $998244353$ 取模的结果。\n", "inputFormat": "第一行输入两个正整数 $n,q\\;(1\\leq n,q\\leq 2.5\\times 10^5)$，表示法阵中魔法石的数量和操作次数。\n\n接下来一行，输入 $n$ 个正整数，其中第 $i$ 个为 $a_i\\;(1\\leq a_i<998244353)$，表示魔法石初始的法力值。\n\n接下来 $q$ 行，先输入一个 $op$，表示操作种类；\n\n若 $op=1$，则再输入三个正整数 $l,r,c\\;(1\\leq l\\leq r\\leq n,2\\leq c\\leq 2.5\\times 10^5)$，表示将区间 $[l,r]$ 中的所有魔法石的法力值乘以 $c$；\n\n若 $op=2$，则再输入一个正整数 $x\\;(1\\leq x\\leq n)$，表示获取法力的开始位置。\n", "outputFormat": "每当进行一次操作 $2$ 时，输出一行一个正整数，表示所要查询的答案对 $998244353$ 取模的值。\n", "hint": "第一次操作，将区间 $[2,6]$ 中的魔法石的法力值乘以 $2$，法力值序列变为 $1,2,2,2,2,2,1$；\n\n第二次操作，waht 先生选择第 $1$ 块魔法石，则编号为 $1,2,4,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $7$；\n\n第三次操作，将区间 $[3,5]$ 中的魔法石的法力值乘以 $5$，法力值序列变为 $1,2,10,10,10,2,1$；\n\n第四次操作，waht 先生选择第 $3$ 块魔法石，则编号为 $3,4,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $22$；\n\n第五次操作，将区间 $[2,7]$ 中的魔法石的法力值乘以 $3$，法力值序列变为 $1,6,30,30,30,6,3$；\n\n第六次操作，waht 先生选择第 $3$ 块魔法石，则编号为 $3,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $36$；\n\n第七次操作，waht 先生选择第 $2$ 块魔法石，则编号为 $2,4,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $42$。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] waht 先生的法阵", "background": "由于洛谷评测机太慢，$4s\\to 5s$。", "description": "waht 先生是一名法力强大的魔法师。\n\nwaht 先生为了增强自己的法力，设置了一个法阵。这个法阵中共有 $n$ 块魔法石，它们从左到右依次排成一列；并且从左数第 $i$ 块魔法石的编号为 $i$，其法力值初始为 $a_i$。\n\nwaht 先生可以获取一些魔法石的法力。然而由于这个法阵的特殊性质，在获取法力时，waht 先生必须先选择一块魔法石；并且一旦第 $x$ 块魔法石被选，接下来必须再选第 $x+\\gcd(x,a_x)$ 块魔法石（这里 $\\gcd(x,y)$ 表示 $x,y$ 的最大公约数），直到 $x+\\gcd (x,a_x)>n$ 时 waht 先生会立即停止本次法力获取的过程。waht 先生获取的法力将会是过程中所选的所有魔法石的法力值之和。\n\nwaht 先生会对这个法阵进行 $q$ 次操作。具体的，有以下两类操作：\n\n- waht 先生选择两个数 $l,r\\;(1\\leq l\\leq r\\leq n)$，对区间 $[l,r]$ 中的所有魔法石施加法术，使得它们的法力值全部乘以 $c$。具体的，对于所有满足 $l\\leq i\\leq r$ 的 $i$，将 $a_i$ 的值修改为 $c\\cdot a_i$。\n- waht 先生选择第 $x$ 块魔法石，并按照上述的规则获取法力。\n\n每当 waht 先生选择某一块魔法石来获取法力时，你都需要帮他计算出他到底获得了多少法力。由于答案可能很大，你只需要求出答案对 $998244353$ 取模的结果。\n", "inputFormat": "第一行输入两个正整数 $n,q\\;(1\\leq n,q\\leq 2.5\\times 10^5)$，表示法阵中魔法石的数量和操作次数。\n\n接下来一行，输入 $n$ 个正整数，其中第 $i$ 个为 $a_i\\;(1\\leq a_i<998244353)$，表示魔法石初始的法力值。\n\n接下来 $q$ 行，先输入一个 $op$，表示操作种类；\n\n若 $op=1$，则再输入三个正整数 $l,r,c\\;(1\\leq l\\leq r\\leq n,2\\leq c\\leq 2.5\\times 10^5)$，表示将区间 $[l,r]$ 中的所有魔法石的法力值乘以 $c$；\n\n若 $op=2$，则再输入一个正整数 $x\\;(1\\leq x\\leq n)$，表示获取法力的开始位置。\n", "outputFormat": "每当进行一次操作 $2$ 时，输出一行一个正整数，表示所要查询的答案对 $998244353$ 取模的值。\n", "hint": "第一次操作，将区间 $[2,6]$ 中的魔法石的法力值乘以 $2$，法力值序列变为 $1,2,2,2,2,2,1$；\n\n第二次操作，waht 先生选择第 $1$ 块魔法石，则编号为 $1,2,4,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $7$；\n\n第三次操作，将区间 $[3,5]$ 中的魔法石的法力值乘以 $5$，法力值序列变为 $1,2,10,10,10,2,1$；\n\n第四次操作，waht 先生选择第 $3$ 块魔法石，则编号为 $3,4,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $22$；\n\n第五次操作，将区间 $[2,7]$ 中的魔法石的法力值乘以 $3$，法力值序列变为 $1,6,30,30,30,6,3$；\n\n第六次操作，waht 先生选择第 $3$ 块魔法石，则编号为 $3,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $36$；\n\n第七次操作，waht 先生选择第 $2$ 块魔法石，则编号为 $2,4,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $42$。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11528", "type": "P", "difficulty": 4, "samples": [["7\n11\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n11\n-1 -1\n1 1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n11\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n1 11\n22\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n11 9\n-1 -1\n-1 -1\n22\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n23\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n-1 -1\n22\n-1 -1\n1 1\n-1 -1\n3 1\n-1 -1\n4 2\n-1 -1\n2 6\n-1 -1\n-1 -1\n5 6\n-1 -1\n-1 -1\n7 7\n-1 -1\n-1 -1\n9 8\n-1 -1\n9 10\n-1 -1\n11 10\n-1 -1", "2\n0\n0\n0\n369512\n0\n864"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] 乒乓球赛", "background": "", "description": "Menji 喜欢看乒乓球比赛，但由于观赛的人太多，他只能听到一部分的信息。\n\n乒乓球赛一共包含 $T$ 局，一局乒乓球的过程如下：\n\n两位选手分别有得分，用 $s_A$ 和 $s_B$ 表示，初始 $s_A=s_B=0$。\n\n接下来会进行若干个回合，在第 $i$ 个回合，会有一个获胜者 $win_i(win_i\\in\\{\\texttt{A},\\texttt{B}\\})$，若 $win_i=\\texttt{A}$ 则 $A$ 的得分 $+1$，即 $s_A=s_A+1$，否则 $B$ 的得分 $+1$，即 $s_B=s_B+1$。当任意一名选手达到 $11$ 分，且领先另一名选手至少 $2$ 分时（即 $\\max(s_A,s_B)\\geq 11$, $\\max(s_A,s_B)-\\min(s_A,s_B)\\geq 2$），该局**立刻结束**。\n\n对于每一局比赛，Menji 听到了最终该局进行的回合数 $n$，以及一部分时刻结束时的比分，例如 Menji 可能在第 $5$ 回合结束时听到比分是 $3:2$，**但 Menji 并不知道哪一名选手获得了 $3$ 分，只知道其中一名选手获得了 $3$ 分，另外一名选手获得了 $2$ 分**。\n\n具体的，Menji 的信息可以被表示为一个非负整数 $n$，表示该局**恰好**进行了 $n$ 个回合，以及 $2$ 个长为 $n$ 的序列 $a_1\\cdots a_n,b_1\\cdots b_n$。对于每一个 $i(1\\leq i\\leq n)$，若 $a_i=b_i=-1$，则 Menji 没有听到任何第 $i$ 个回合结束时的信息，否则保证 $0\\leq a_i,b_i\\leq n$，表示在第 $i$ 个回合结束时，一定满足 $s_A=a_i,s_B=b_i$ 或 $s_A=b_i,s_B=a_i$。\n\n显然，很多时候 Menji 的信息并不能还原比赛每一局每一回合的获胜者，甚至有时候 Menji 的信息会是错误的。Menji 想要知道，有多少个获胜者序列 $win_1\\cdots win_n$ 满足他已知的所有信息？\n\n由于答案可能很大，请输出答案对 $998244353$ 取模的结果。", "inputFormat": "第一行一个整数 $T(1\\leq T\\leq 10^5)$，表示乒乓球比赛的局数。\n\n对于每一局：\n\n第一行一个整数 $n$，表示比赛**恰好**进行了 $n(1\\leq n\\leq 10^5)$ 回合。\n\n之后 $n$ 行，每行两个整数 $a_i,b_i$，满足 $a_i=b_i=-1$ 或 $0\\leq a_i,b_i\\leq n$，表示 Menji 已知的一部分信息。\n\n保证总回合数不超过 $5\\times 10^5$，即 $\\sum n\\leq 5\\times 10^5$。", "outputFormat": "对于每一局，输出一行一个数，表示可能的获胜者序列个数，对 $998244353$ 取模。", "hint": "### 样例解释\n\n比赛总共进行了 $6$ 局。\n\n- 对于第一局，恰好进行了 $11$ 个回合结束，一定是某一选手连胜了 $11$ 回合，所以获胜者序列一定是全 $\\texttt{A}$ 或是全 $\\texttt{B}$，故答案为 $2$。\n- 对于第二局，恰好进行了 $11$ 个回合结束，但第二回合结束的比分是 $1:1$，最终至多只能达到 $10:1$ 的比分，因此不存在合法的获胜者序列使得恰好 $11$ 回合结束，故答案为 $0$。\n- 对于第三局，显然不可能在 $11$ 个回合内达到 $1:11$ 的比分，故答案为 $0$。\n- 对于第四局，若第 $20$ 个回合的比分达到 $11:9$，则该局会立刻结束，不会进行到第 $22$ 个回合，故答案为 $0$。\n- 对于第五局，双方的得分一定是先达到 $10:10$，之后其中一名选手连胜 $2$ 局，故答案为 $\\dbinom{20}{10}\\times 2 = 369512$。\n- 对于第六局，容易发现不可能恰好进行 $23$ 个回合时结束，故答案为 $0$。\n- 对于第七局，我有一个完美的解释，可惜写不下了。\n\n### 题目来源\n\n题目来自 THUPC2025（2025年清华大学学生程序设计竞赛暨高校邀请赛）初赛，信息来源于 [THUSAAC 仓库](https://gitlink.org.cn/thusaa/thupc2025pre)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 乒乓球赛", "background": "", "description": "Menji 喜欢看乒乓球比赛，但由于观赛的人太多，他只能听到一部分的信息。\n\n乒乓球赛一共包含 $T$ 局，一局乒乓球的过程如下：\n\n两位选手分别有得分，用 $s_A$ 和 $s_B$ 表示，初始 $s_A=s_B=0$。\n\n接下来会进行若干个回合，在第 $i$ 个回合，会有一个获胜者 $win_i(win_i\\in\\{\\texttt{A},\\texttt{B}\\})$，若 $win_i=\\texttt{A}$ 则 $A$ 的得分 $+1$，即 $s_A=s_A+1$，否则 $B$ 的得分 $+1$，即 $s_B=s_B+1$。当任意一名选手达到 $11$ 分，且领先另一名选手至少 $2$ 分时（即 $\\max(s_A,s_B)\\geq 11$, $\\max(s_A,s_B)-\\min(s_A,s_B)\\geq 2$），该局**立刻结束**。\n\n对于每一局比赛，Menji 听到了最终该局进行的回合数 $n$，以及一部分时刻结束时的比分，例如 Menji 可能在第 $5$ 回合结束时听到比分是 $3:2$，**但 Menji 并不知道哪一名选手获得了 $3$ 分，只知道其中一名选手获得了 $3$ 分，另外一名选手获得了 $2$ 分**。\n\n具体的，Menji 的信息可以被表示为一个非负整数 $n$，表示该局**恰好**进行了 $n$ 个回合，以及 $2$ 个长为 $n$ 的序列 $a_1\\cdots a_n,b_1\\cdots b_n$。对于每一个 $i(1\\leq i\\leq n)$，若 $a_i=b_i=-1$，则 Menji 没有听到任何第 $i$ 个回合结束时的信息，否则保证 $0\\leq a_i,b_i\\leq n$，表示在第 $i$ 个回合结束时，一定满足 $s_A=a_i,s_B=b_i$ 或 $s_A=b_i,s_B=a_i$。\n\n显然，很多时候 Menji 的信息并不能还原比赛每一局每一回合的获胜者，甚至有时候 Menji 的信息会是错误的。Menji 想要知道，有多少个获胜者序列 $win_1\\cdots win_n$ 满足他已知的所有信息？\n\n由于答案可能很大，请输出答案对 $998244353$ 取模的结果。", "inputFormat": "第一行一个整数 $T(1\\leq T\\leq 10^5)$，表示乒乓球比赛的局数。\n\n对于每一局：\n\n第一行一个整数 $n$，表示比赛**恰好**进行了 $n(1\\leq n\\leq 10^5)$ 回合。\n\n之后 $n$ 行，每行两个整数 $a_i,b_i$，满足 $a_i=b_i=-1$ 或 $0\\leq a_i,b_i\\leq n$，表示 Menji 已知的一部分信息。\n\n保证总回合数不超过 $5\\times 10^5$，即 $\\sum n\\leq 5\\times 10^5$。", "outputFormat": "对于每一局，输出一行一个数，表示可能的获胜者序列个数，对 $998244353$ 取模。", "hint": "### 样例解释\n\n比赛总共进行了 $6$ 局。\n\n- 对于第一局，恰好进行了 $11$ 个回合结束，一定是某一选手连胜了 $11$ 回合，所以获胜者序列一定是全 $\\texttt{A}$ 或是全 $\\texttt{B}$，故答案为 $2$。\n- 对于第二局，恰好进行了 $11$ 个回合结束，但第二回合结束的比分是 $1:1$，最终至多只能达到 $10:1$ 的比分，因此不存在合法的获胜者序列使得恰好 $11$ 回合结束，故答案为 $0$。\n- 对于第三局，显然不可能在 $11$ 个回合内达到 $1:11$ 的比分，故答案为 $0$。\n- 对于第四局，若第 $20$ 个回合的比分达到 $11:9$，则该局会立刻结束，不会进行到第 $22$ 个回合，故答案为 $0$。\n- 对于第五局，双方的得分一定是先达到 $10:10$，之后其中一名选手连胜 $2$ 局，故答案为 $\\dbinom{20}{10}\\times 2 = 369512$。\n- 对于第六局，容易发现不可能恰好进行 $23$ 个回合时结束，故答案为 $0$。\n- 对于第七局，我有一个完美的解释，可惜写不下了。\n\n### 题目来源\n\n题目来自 THUPC2025（2025年清华大学学生程序设计竞赛暨高校邀请赛）初赛，信息来源于 [THUSAAC 仓库](https://gitlink.org.cn/thusaa/thupc2025pre)。", "locale": "zh-CN"}}}
{"pid": "P11529", "type": "P", "difficulty": 4, "samples": [["5 2\n3 5\n1 2\n1 3\n2 4\n2 5", "1"], ["10 3\n1 6 8\n1 2\n2 3\n3 4\n4 5\n4 6\n5 7\n5 8\n6 9\n7 10", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "树形 DP", "THUPC"], "title": "[THUPC 2025 初赛] 辞甲猾扎", "background": "", "description": "给你一棵 $n$ 个点的无根树，有 $k$ 个点初始为黑色，其余点初始为灰色，你可以在一开始将一些**灰色**点染成白色。染完后，现在进行如下操作，直到树上不存在灰色点。    \n\n每一轮对所有灰色点**同时**进行如下操作：\n\n1. 检查与该灰色点 $u$ 直接相连的点有没有黑色或白色点，如果没有，则 $u$ 保持灰色。\n2. 如果与 $u$ 直接相连的点有白色点，则 $u$ 变为白色。\n3. 如果与 $u$ 直接相连的点有黑色点，则 $u$ 变为黑色。\n\n这个顺序说明同时与白色和黑色相邻时会被染成白色。  \n\n注意此处对所有灰色点同时进行操作，也就是说在这一轮被染上颜色的点不能作为其它点改变颜色的根据。  \n\n现在求一开始最少染几个点为白色，可以使树最终黑色点不超过 $k$ 个。", "inputFormat": "第一行两个整数 $n,k\\;(1\\le n\\le 10^6,1\\le k \\le n)$，含义见上文。  \n\n第二行 $k$ 个整数，代表一开始被染成黑色的点的标号。  \n\n第 $3\\sim n+2$ 行每行两个整数 $u,v\\;(1\\le u,v\\le n)$，代表一条树上的边。  \n", "outputFormat": "\n一行一个整数，为答案。\n", "hint": "- 对于第一组样例，一开始将 $2$ 号点染白即可\n- 对于第二组样例，一开始将 $3,4,9$ 号点染白为满足条件且数量最小一组方案\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 辞甲猾扎", "background": "", "description": "给你一棵 $n$ 个点的无根树，有 $k$ 个点初始为黑色，其余点初始为灰色，你可以在一开始将一些**灰色**点染成白色。染完后，现在进行如下操作，直到树上不存在灰色点。    \n\n每一轮对所有灰色点**同时**进行如下操作：\n\n1. 检查与该灰色点 $u$ 直接相连的点有没有黑色或白色点，如果没有，则 $u$ 保持灰色。\n2. 如果与 $u$ 直接相连的点有白色点，则 $u$ 变为白色。\n3. 如果与 $u$ 直接相连的点有黑色点，则 $u$ 变为黑色。\n\n这个顺序说明同时与白色和黑色相邻时会被染成白色。  \n\n注意此处对所有灰色点同时进行操作，也就是说在这一轮被染上颜色的点不能作为其它点改变颜色的根据。  \n\n现在求一开始最少染几个点为白色，可以使树最终黑色点不超过 $k$ 个。", "inputFormat": "第一行两个整数 $n,k\\;(1\\le n\\le 10^6,1\\le k \\le n)$，含义见上文。  \n\n第二行 $k$ 个整数，代表一开始被染成黑色的点的标号。  \n\n第 $3\\sim n+2$ 行每行两个整数 $u,v\\;(1\\le u,v\\le n)$，代表一条树上的边。  \n", "outputFormat": "\n一行一个整数，为答案。\n", "hint": "- 对于第一组样例，一开始将 $2$ 号点染白即可\n- 对于第二组样例，一开始将 $3,4,9$ 号点染白为满足条件且数量最小一组方案\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11530", "type": "P", "difficulty": 7, "samples": [["4\n1 3 2 4", "..*.."], ["9\n3 4 1 2 8 9 5 6 7", ".1-2#...1-1.1-2#....1-1"], ["4\n2 4 1 3", "-1"], ["7\n7 1 2 6 5 3 4", ".1-2...1-1*.1-2..1-1"], ["8\n1 2 8 6 3 5 4 7", "...2-2.1-2..1-1*..2-1"], ["8\n2 1 3 8 7 5 4 6", ".*...*.1-2.*..1-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] 峰回路转", "background": "昼短夜长冬至近。江冽漆黑，但见东云粉。窗外惺忪鸥鹭阵，室中香漫晨炊奋。\n\n朝肄暮劳催彼盹。宵寂观书，灯烬方安寝。请替君劳分重任，逍遥共舞生辰顺。", "description": "K 最近在学古诗文。古诗文的行文不一定按照现代人的习惯，有时是因为古诗文有其特殊的语法结构，有时是因为对仗工整、韵律和谐等主观原因。但是，如果直接在原文旁边标注一个表示正确阅读顺序的排列，不仅在排版上不美观，而且寻找下一个编号也比较麻烦。为了方便阅读，K 设计了一套辅助记号来标注顺序，替代直接标注顺序编号的方式。\n\n辅助记号一共有 3 种：近邻逆接记号、近邻顺接记号、遥远跳转记号。两种近邻记号定义了**相邻两个字符**之间相对的阅读顺序，故其必须出现在相邻两个字符之间，而不能出现在句首或句末；遥远跳转记号在单独使用时仅作用于其**前一个字符**，故其必须出现在单个字符之后，可以出现在句末而不能出现在句首。\n\n近邻逆接记号 `*` 用于表示，在正常阅读顺序中，该记号前的**最后一个**字符应该**紧跟**在该记号后的**第一个**字符之后，如“研表`*`究明，汉字序`*`顺并不定`*`一影阅`*`响读”的正确语序是“研究表明，汉字顺序并不一定影响阅读”。近邻逆接记号可以连续使用，此时表示对应的一整段文字应从后往前逐个阅读。如“林暗草惊风，将军夜引弓”的正常语序是“林暗风惊草，将军夜引弓”，所以可以用“林暗草`*`惊`*`风”来标记主宾换位。\n\n对于较复杂的阅读顺序，可以用遥远跳转记号来辅助理解。例如，“马之千里者，一食或尽粟一石”中，“一石”是修饰“粟”的数量短语，因此按正常语序应为“一食或尽一石粟”。为了标注此类不相邻的顺序交换，可以使用遥远跳转记号来指出需要从后往前依次阅读的一组字符，并称这样的一组字符为遥远跳转结构。为了防止出现混乱，规定对于任意两组遥远跳转结构，要么其中一组的所有字符都在另一组的任意字符之前，要么其中一组的所有字符都位于另一组中连续的某两个字符之间；不允许两组遥远跳转结构的字符在原字符串中交叉出现。因为可能出现多层嵌套，所以遥远跳转记号具有 `p-q` 的形式，其中正整数 `p` 表示内部嵌套的层数，`q` 表示在该组中的顺序。如果一组遥远跳转结构内部没有嵌套任何其它遥远跳转结构，则该组遥远跳转结构的各记号的层数 `p` 均为 $1$，否则为内部嵌套的所有遥远跳转结构的最大层数 $+1$。对于同一组遥远跳转结构，按各字符在原字符串中的出现顺序从后往前依次编号 `q` $=1,2,3,\\cdots$，这一顺序也即实际阅读顺序。在阅读带有辅助记号的文本时，如果一个字符后紧跟着序号 `q` $\\ge 2$ 的遥远跳转记号，则应暂时跳过该字符不读；直到遇到 `q` 恰好为 $1$ 的遥远跳转记号，此时应从后往前依次阅读同组的 `p-1`，`p-2` 等记号前的**单个**字符，直到遇到层数 `p` 更大的遥远跳转记号、另一个层数相同的 `p-1` 的遥远跳转记号（此时这一记号应标记另一组遥远跳转结构），或者碰到开头。\n\n对于上文中取自《马说》的例句，相应的标注方法为“一食或尽粟`1-2`一石`1-1`”。再例如，“入则无法家拂士，出则无敌国外患者，国恒亡，然后知生于忧患而死于安乐也”一句中出现了两处状语后置（“然后知于忧患生而于安乐死也”），其满足要求的标注方法为“然后知生`1-2`于忧患`1-1`而死`1-2`于安乐`1-1`也”。另外，同一组的遥远跳转记号的序号 `q` 一定是降序出现的，即不允许连续出现 `p-2 p-3 p-1` 等情况。\n\n由于近邻逆接记号和遥远跳转记号都可以用来表示与正常阅读方向相反的跳转，规定在读完一个字符后需要紧接着阅读其前一个字符时，**必须**使用近邻逆接记号。这一规定会产生一个问题，即在同一组遥远跳转结构中出现了在原文中相邻的字符时，如果相邻的字符不在遥远跳转结构的开头或结尾，用近邻逆接记号来标注这一堆字符，有可能会导致阅读顺序的歧义。幸好，解决办法并不复杂：只需在出现相邻字符的位置将一个遥远跳转结构拆成两个或多个即可。注意拆开时，每个新的结构的所对应的层数应独立计算。\n\n在使用遥远跳转记号时，默认只更改记号前的**单个**字符的阅读顺序。如果需要将连续的多个字符的阅读顺序推后，则应配合近邻顺接记号 `#`，表示该记号后的**第一个**字符应该**紧跟**在该记号前的**最后一个**字符之后。例如，“今日大风寒，寒风摧树木，严霜结庭兰”一句中，主语“庭兰”和宾语“严霜”的位置发生了对调，故可以标注为“严`1-3#`霜结`1-2`庭兰`1-1`”。出于简洁起见，要求近邻顺接记号必须和序号 `q` $\\ge 2$ 的遥远跳转记号连用，但根据实际需要可以连续使用多个近邻顺接记号，此时在且仅在第一个近邻顺接记号前标注遥远跳转记号。例如，“七八个星天外，两三点雨山前”的正常语序是“天外七八个星，山前两三点雨”，因此可以标注为“七`1-2#`八`#`个`#`星天外`1-1`，两`1-2#`三`#`点`#`雨山前`1-1`”。\n\n在阅读标注有辅助记号的文本时，默认按照正常阅读顺序从前往后处理每个字符。如果遇到一个字符没有标注辅助记号且其前一个字符没有标记近邻顺接记号，应该直接阅读这个字符；否则，先暂时忽略该字符。当遇到标注有序号为 $1$ 的遥远跳转记号的字符（对应忽略了同组的遥远跳转记号及任何相关的近邻顺接记号）或没有标注辅助记号的字符（对应忽略了至少一个近邻逆接记号）时，先阅读这个字符，再按相应规则返回阅读被忽略的字符。\n\n为了防止使用记号时出现歧义，除了上述规则外，还规定：\n\n- 相邻两个字符之间，要么不使用任何辅助记号，要么使用单独的近邻逆接记号，单独的近邻顺接记号，单独的遥远跳转记号，一个遥远跳转记号和一个近邻逆接记号，或一个遥远跳转记号和一个近邻顺接记号。最后一个字符之后要么没有辅助记号，要么有单独的遥远跳转记号。\n- 如果相邻两个字符之间使用了一个遥远跳转记号和任意一种近邻记号的组合，则应将遥远跳转记号标在近邻记号之前。特别地，如果是一个遥远跳转记号和一个近邻逆接记号的组合，则该遥远跳转记号的序号 `q` 必须为 $1$。\n- 对于任意连续的三个字符，不允许混合使用近邻逆接记号和近邻顺接记号（无论是否与遥远跳转记号搭配使用），即不能出现 `.#.*.` 或 `.*.#.` 等未定义的标注方式，其中 `.` 表示单个需要被标注的字符。同理，不允许出现前一个字符标注了近邻顺接记号，后一个字符标注了遥远跳转记号（无论这个遥远跳转记号是否与任意近邻记号组合使用）。\n\n不过，K 发现这套系统并不能标记任意的排列。例如，“绿垂风折笋，红绽雨肥梅”在现代汉语中的语序是“风折绿笋垂，雨肥红梅绽”，它就无法被任意记号的组合表示。因此 K 想知道，对于给定的一个阅读顺序，是否存在一种仅使用上述三种记号的标注方法。如果存在，请帮 K 求出满足简洁要求的唯一标注方法。", "inputFormat": "输入的第一行包含一个正整数 $K$，表示需要标注的原字符串长度。保证 $1\\le K \\le 10^6$。\n\n输入的第二行包含 $K$ 个正整数 $p_1, p_2, \\cdots, p_K$，其中 $p_i$ 表示需要标注的原字符串的第 $i$ 个字符在正确阅读顺序中的位置。保证 $p_1, p_2, \\cdots, p_K$ 是一个 $1, 2, \\cdots, K$ 的排列。", "outputFormat": "输出一个字符串。\n\n如果存在合法的标注方法，则输出满足要求的唯一标注方法，其中用单个 `.` 表示原字符串中的每个字符。\n\n否则，输出 `-1`，表示不存在合法的标注方法。", "hint": "### 样例解释\n\n- 样例 1：“微斯人，吾谁`*`与归？”\n\n- 样例 2：“故`1-2#`国神游`1-1`，多`1-2#`情应笑我`1-1`。”\n\n- 样例 3：\n另外三种不能被表示出来的长度为 $4$ 的阅读顺序为：\n  + $2, 4, 3, 1$；\n  + $3, 1, 4, 2$；\n  + $3, 2, 4, 1$。\n  \n### 题目来源\n\n题目来自 THUPC2025（2025年清华大学学生程序设计竞赛暨高校邀请赛）初赛，信息来源于 [THUSAAC 仓库](https://gitlink.org.cn/thusaa/thupc2025pre)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 峰回路转", "background": "昼短夜长冬至近。江冽漆黑，但见东云粉。窗外惺忪鸥鹭阵，室中香漫晨炊奋。\n\n朝肄暮劳催彼盹。宵寂观书，灯烬方安寝。请替君劳分重任，逍遥共舞生辰顺。", "description": "K 最近在学古诗文。古诗文的行文不一定按照现代人的习惯，有时是因为古诗文有其特殊的语法结构，有时是因为对仗工整、韵律和谐等主观原因。但是，如果直接在原文旁边标注一个表示正确阅读顺序的排列，不仅在排版上不美观，而且寻找下一个编号也比较麻烦。为了方便阅读，K 设计了一套辅助记号来标注顺序，替代直接标注顺序编号的方式。\n\n辅助记号一共有 3 种：近邻逆接记号、近邻顺接记号、遥远跳转记号。两种近邻记号定义了**相邻两个字符**之间相对的阅读顺序，故其必须出现在相邻两个字符之间，而不能出现在句首或句末；遥远跳转记号在单独使用时仅作用于其**前一个字符**，故其必须出现在单个字符之后，可以出现在句末而不能出现在句首。\n\n近邻逆接记号 `*` 用于表示，在正常阅读顺序中，该记号前的**最后一个**字符应该**紧跟**在该记号后的**第一个**字符之后，如“研表`*`究明，汉字序`*`顺并不定`*`一影阅`*`响读”的正确语序是“研究表明，汉字顺序并不一定影响阅读”。近邻逆接记号可以连续使用，此时表示对应的一整段文字应从后往前逐个阅读。如“林暗草惊风，将军夜引弓”的正常语序是“林暗风惊草，将军夜引弓”，所以可以用“林暗草`*`惊`*`风”来标记主宾换位。\n\n对于较复杂的阅读顺序，可以用遥远跳转记号来辅助理解。例如，“马之千里者，一食或尽粟一石”中，“一石”是修饰“粟”的数量短语，因此按正常语序应为“一食或尽一石粟”。为了标注此类不相邻的顺序交换，可以使用遥远跳转记号来指出需要从后往前依次阅读的一组字符，并称这样的一组字符为遥远跳转结构。为了防止出现混乱，规定对于任意两组遥远跳转结构，要么其中一组的所有字符都在另一组的任意字符之前，要么其中一组的所有字符都位于另一组中连续的某两个字符之间；不允许两组遥远跳转结构的字符在原字符串中交叉出现。因为可能出现多层嵌套，所以遥远跳转记号具有 `p-q` 的形式，其中正整数 `p` 表示内部嵌套的层数，`q` 表示在该组中的顺序。如果一组遥远跳转结构内部没有嵌套任何其它遥远跳转结构，则该组遥远跳转结构的各记号的层数 `p` 均为 $1$，否则为内部嵌套的所有遥远跳转结构的最大层数 $+1$。对于同一组遥远跳转结构，按各字符在原字符串中的出现顺序从后往前依次编号 `q` $=1,2,3,\\cdots$，这一顺序也即实际阅读顺序。在阅读带有辅助记号的文本时，如果一个字符后紧跟着序号 `q` $\\ge 2$ 的遥远跳转记号，则应暂时跳过该字符不读；直到遇到 `q` 恰好为 $1$ 的遥远跳转记号，此时应从后往前依次阅读同组的 `p-1`，`p-2` 等记号前的**单个**字符，直到遇到层数 `p` 更大的遥远跳转记号、另一个层数相同的 `p-1` 的遥远跳转记号（此时这一记号应标记另一组遥远跳转结构），或者碰到开头。\n\n对于上文中取自《马说》的例句，相应的标注方法为“一食或尽粟`1-2`一石`1-1`”。再例如，“入则无法家拂士，出则无敌国外患者，国恒亡，然后知生于忧患而死于安乐也”一句中出现了两处状语后置（“然后知于忧患生而于安乐死也”），其满足要求的标注方法为“然后知生`1-2`于忧患`1-1`而死`1-2`于安乐`1-1`也”。另外，同一组的遥远跳转记号的序号 `q` 一定是降序出现的，即不允许连续出现 `p-2 p-3 p-1` 等情况。\n\n由于近邻逆接记号和遥远跳转记号都可以用来表示与正常阅读方向相反的跳转，规定在读完一个字符后需要紧接着阅读其前一个字符时，**必须**使用近邻逆接记号。这一规定会产生一个问题，即在同一组遥远跳转结构中出现了在原文中相邻的字符时，如果相邻的字符不在遥远跳转结构的开头或结尾，用近邻逆接记号来标注这一堆字符，有可能会导致阅读顺序的歧义。幸好，解决办法并不复杂：只需在出现相邻字符的位置将一个遥远跳转结构拆成两个或多个即可。注意拆开时，每个新的结构的所对应的层数应独立计算。\n\n在使用遥远跳转记号时，默认只更改记号前的**单个**字符的阅读顺序。如果需要将连续的多个字符的阅读顺序推后，则应配合近邻顺接记号 `#`，表示该记号后的**第一个**字符应该**紧跟**在该记号前的**最后一个**字符之后。例如，“今日大风寒，寒风摧树木，严霜结庭兰”一句中，主语“庭兰”和宾语“严霜”的位置发生了对调，故可以标注为“严`1-3#`霜结`1-2`庭兰`1-1`”。出于简洁起见，要求近邻顺接记号必须和序号 `q` $\\ge 2$ 的遥远跳转记号连用，但根据实际需要可以连续使用多个近邻顺接记号，此时在且仅在第一个近邻顺接记号前标注遥远跳转记号。例如，“七八个星天外，两三点雨山前”的正常语序是“天外七八个星，山前两三点雨”，因此可以标注为“七`1-2#`八`#`个`#`星天外`1-1`，两`1-2#`三`#`点`#`雨山前`1-1`”。\n\n在阅读标注有辅助记号的文本时，默认按照正常阅读顺序从前往后处理每个字符。如果遇到一个字符没有标注辅助记号且其前一个字符没有标记近邻顺接记号，应该直接阅读这个字符；否则，先暂时忽略该字符。当遇到标注有序号为 $1$ 的遥远跳转记号的字符（对应忽略了同组的遥远跳转记号及任何相关的近邻顺接记号）或没有标注辅助记号的字符（对应忽略了至少一个近邻逆接记号）时，先阅读这个字符，再按相应规则返回阅读被忽略的字符。\n\n为了防止使用记号时出现歧义，除了上述规则外，还规定：\n\n- 相邻两个字符之间，要么不使用任何辅助记号，要么使用单独的近邻逆接记号，单独的近邻顺接记号，单独的遥远跳转记号，一个遥远跳转记号和一个近邻逆接记号，或一个遥远跳转记号和一个近邻顺接记号。最后一个字符之后要么没有辅助记号，要么有单独的遥远跳转记号。\n- 如果相邻两个字符之间使用了一个遥远跳转记号和任意一种近邻记号的组合，则应将遥远跳转记号标在近邻记号之前。特别地，如果是一个遥远跳转记号和一个近邻逆接记号的组合，则该遥远跳转记号的序号 `q` 必须为 $1$。\n- 对于任意连续的三个字符，不允许混合使用近邻逆接记号和近邻顺接记号（无论是否与遥远跳转记号搭配使用），即不能出现 `.#.*.` 或 `.*.#.` 等未定义的标注方式，其中 `.` 表示单个需要被标注的字符。同理，不允许出现前一个字符标注了近邻顺接记号，后一个字符标注了遥远跳转记号（无论这个遥远跳转记号是否与任意近邻记号组合使用）。\n\n不过，K 发现这套系统并不能标记任意的排列。例如，“绿垂风折笋，红绽雨肥梅”在现代汉语中的语序是“风折绿笋垂，雨肥红梅绽”，它就无法被任意记号的组合表示。因此 K 想知道，对于给定的一个阅读顺序，是否存在一种仅使用上述三种记号的标注方法。如果存在，请帮 K 求出满足简洁要求的唯一标注方法。", "inputFormat": "输入的第一行包含一个正整数 $K$，表示需要标注的原字符串长度。保证 $1\\le K \\le 10^6$。\n\n输入的第二行包含 $K$ 个正整数 $p_1, p_2, \\cdots, p_K$，其中 $p_i$ 表示需要标注的原字符串的第 $i$ 个字符在正确阅读顺序中的位置。保证 $p_1, p_2, \\cdots, p_K$ 是一个 $1, 2, \\cdots, K$ 的排列。", "outputFormat": "输出一个字符串。\n\n如果存在合法的标注方法，则输出满足要求的唯一标注方法，其中用单个 `.` 表示原字符串中的每个字符。\n\n否则，输出 `-1`，表示不存在合法的标注方法。", "hint": "### 样例解释\n\n- 样例 1：“微斯人，吾谁`*`与归？”\n\n- 样例 2：“故`1-2#`国神游`1-1`，多`1-2#`情应笑我`1-1`。”\n\n- 样例 3：\n另外三种不能被表示出来的长度为 $4$ 的阅读顺序为：\n  + $2, 4, 3, 1$；\n  + $3, 1, 4, 2$；\n  + $3, 2, 4, 1$。\n  \n### 题目来源\n\n题目来自 THUPC2025（2025年清华大学学生程序设计竞赛暨高校邀请赛）初赛，信息来源于 [THUSAAC 仓库](https://gitlink.org.cn/thusaa/thupc2025pre)。", "locale": "zh-CN"}}}
{"pid": "P11531", "type": "P", "difficulty": 6, "samples": [["5 10 3\n3 1 4\n1 3 1\n4 3 1\n3 2 1\n3 5 1\n1 2 2\n2 1 2\n1 4 2\n5 1 2\n1 4 3\n4 5 3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "网络流", "最小割", "THUPC"], "title": "[THUPC 2025 初赛] 检查站", "background": "", "description": "小 I 是一个巨大的铁路公司的主管，他管理着 $n$ 个火车站，用 $1$ 至 $n$ 的整数给它们编号。铁路公司有 $c$ 个分部，第 $i$ 个分部的办公室位于火车站 $p_i$。可能有火车站没有分部办公室，一个火车站也有可能有多个分部办公室。\n\n$n$ 个火车站之间由 $m$ 条单向铁路连接，其中第 $i$ 条铁路由火车站 $u_i$ 连向 $v_i$，属于分部 $r_i$ 管辖。为了保证管理方便，分部 $r_i$ 的办公室要么在 $u_i$，要么在 $v_i$。\n\n火车站 $1$（港口）和 $n$（首都）是公司管辖范围内最繁忙的车站。为了保障进口货物安全，根据交通运输部的要求，小 I 需要在一些铁路上设立检查站，使得从火车站 $1$ 到火车站 $n$ 的所有可能路线上都有一个有检查站的铁路。\n\n小 I 可以通知一些分部（也可以不通知任何分部），要求这些分部在它们管理的所有铁路上设立检查站。小 I 想知道，最少需要通知多少个分部才可以达到要求。作为新上任的算法工程师，你准备给小 I 露一手。", "inputFormat": "输入的第一行三个整数 $n,m,c (2 \\le n, m, c \\le 5\\times 10^4)$，分别表示火车站数量、铁路数量和分部数量。\n\n接下来一行 $c$ 个整数 $p_1, p_2, \\cdots, p_c (1 \\le p_i \\le n)$，描述每个分部所在的火车站编号。\n\n接下来 $m$ 行每行三个整数 $u_i, v_i, r_i (1 \\le u_i, v_i \\le n, 1 \\le r_i \\le c)$，描述一条铁路。保证 $p_{r_i} = u_i$ 或 $p_{r_i} = v_i$。", "outputFormat": "输出一行一个整数表示最少需要通知的分部数量。", "hint": "### 样例解释\n\n该样例的铁路组织如下图所示，其中红色、绿色和黑色分别为 1、2、3 分部管辖的铁路。最优策略是通知分部 1 和 3。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yami1v28.png)\n\n### 题目来源\n\n题目来自 THUPC2025（2025年清华大学学生程序设计竞赛暨高校邀请赛）初赛，信息来源于 [THUSAAC 仓库](https://gitlink.org.cn/thusaa/thupc2025pre)。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 检查站", "background": "", "description": "小 I 是一个巨大的铁路公司的主管，他管理着 $n$ 个火车站，用 $1$ 至 $n$ 的整数给它们编号。铁路公司有 $c$ 个分部，第 $i$ 个分部的办公室位于火车站 $p_i$。可能有火车站没有分部办公室，一个火车站也有可能有多个分部办公室。\n\n$n$ 个火车站之间由 $m$ 条单向铁路连接，其中第 $i$ 条铁路由火车站 $u_i$ 连向 $v_i$，属于分部 $r_i$ 管辖。为了保证管理方便，分部 $r_i$ 的办公室要么在 $u_i$，要么在 $v_i$。\n\n火车站 $1$（港口）和 $n$（首都）是公司管辖范围内最繁忙的车站。为了保障进口货物安全，根据交通运输部的要求，小 I 需要在一些铁路上设立检查站，使得从火车站 $1$ 到火车站 $n$ 的所有可能路线上都有一个有检查站的铁路。\n\n小 I 可以通知一些分部（也可以不通知任何分部），要求这些分部在它们管理的所有铁路上设立检查站。小 I 想知道，最少需要通知多少个分部才可以达到要求。作为新上任的算法工程师，你准备给小 I 露一手。", "inputFormat": "输入的第一行三个整数 $n,m,c (2 \\le n, m, c \\le 5\\times 10^4)$，分别表示火车站数量、铁路数量和分部数量。\n\n接下来一行 $c$ 个整数 $p_1, p_2, \\cdots, p_c (1 \\le p_i \\le n)$，描述每个分部所在的火车站编号。\n\n接下来 $m$ 行每行三个整数 $u_i, v_i, r_i (1 \\le u_i, v_i \\le n, 1 \\le r_i \\le c)$，描述一条铁路。保证 $p_{r_i} = u_i$ 或 $p_{r_i} = v_i$。", "outputFormat": "输出一行一个整数表示最少需要通知的分部数量。", "hint": "### 样例解释\n\n该样例的铁路组织如下图所示，其中红色、绿色和黑色分别为 1、2、3 分部管辖的铁路。最优策略是通知分部 1 和 3。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yami1v28.png)\n\n### 题目来源\n\n题目来自 THUPC2025（2025年清华大学学生程序设计竞赛暨高校邀请赛）初赛，信息来源于 [THUSAAC 仓库](https://gitlink.org.cn/thusaa/thupc2025pre)。\n", "locale": "zh-CN"}}}
{"pid": "P11532", "type": "P", "difficulty": 1, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] 好成绩", "background": "蒜薢是炼火中学的一名 OIER。", "description": "作为一名 OIER，蒜薢同学自然需要了解一些普通同学大学才会接触的知识，这些知识是数学方面的。要学习这些知识并不简单，但好在蒜薢遇到了悉心指导她的老师，在老师的帮助下，蒜薢很快掌握了大量技能，包括但不限于计算 $3$ 行 $4$ 列矩阵的行列式、对发散的数列求和并把结果除以 $2$、发明求导符号的特殊中文表示法……总之，蒜薢通过自己的努力学习，成为了实力超强的巨佬。\n\n实力超强的蒜薢自然要打一些实力超强的比赛，在过去的几个月里，蒜薢都在全神贯注地备战 THUPC——THUPC 是一个国际化的大比赛，分为初赛和复赛两轮，初赛取得好成绩的选手不仅可以进入复赛、获得富有设计感的服装，还可能得到优胜小奖品，甚至可能被采访上电视。为了能够在初赛中一鸣惊人，蒜薢废寝忘食地抄写着老师的笔记，自然也就忘记了即将来临的月考。虽然蒜薢在数学方面能力超强，但月考涉及的数学知识和数学方面不同，忘记复习的蒜薢在考场上只能胡乱答题。\n\n不久后，月考的成绩公布了，蒜薢不出意料考得不好。因为考试失利对情绪造成的打击，蒜薢忘记了自己的具体分数，但超强的数学方面能力还是让她快速地记下了另一些相关信息：具体来说，蒜薢的月考数学成绩是一个 $0$ 到 $150$ 之间的整数，它除以 $3$ 得到的余数是 $2$，除以 $5$ 得到的余数是 $3$，除以 $7$ 得到的余数是 $6$。\n\n蒜薢不能根据上面的信息求出自己的月考数学成绩，你能帮帮她吗？", "inputFormat": "本题无需输入。", "outputFormat": "输出一个整数，表示蒜薢的月考数学成绩。", "hint": "薢，音械，是一种一年生草本植物，长在池沼中，叶子浮在水面。\n\n蒜薢的名字是一个谐音梗，但不仅限于此——你想对个对子吗？\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 好成绩", "background": "蒜薢是炼火中学的一名 OIER。", "description": "作为一名 OIER，蒜薢同学自然需要了解一些普通同学大学才会接触的知识，这些知识是数学方面的。要学习这些知识并不简单，但好在蒜薢遇到了悉心指导她的老师，在老师的帮助下，蒜薢很快掌握了大量技能，包括但不限于计算 $3$ 行 $4$ 列矩阵的行列式、对发散的数列求和并把结果除以 $2$、发明求导符号的特殊中文表示法……总之，蒜薢通过自己的努力学习，成为了实力超强的巨佬。\n\n实力超强的蒜薢自然要打一些实力超强的比赛，在过去的几个月里，蒜薢都在全神贯注地备战 THUPC——THUPC 是一个国际化的大比赛，分为初赛和复赛两轮，初赛取得好成绩的选手不仅可以进入复赛、获得富有设计感的服装，还可能得到优胜小奖品，甚至可能被采访上电视。为了能够在初赛中一鸣惊人，蒜薢废寝忘食地抄写着老师的笔记，自然也就忘记了即将来临的月考。虽然蒜薢在数学方面能力超强，但月考涉及的数学知识和数学方面不同，忘记复习的蒜薢在考场上只能胡乱答题。\n\n不久后，月考的成绩公布了，蒜薢不出意料考得不好。因为考试失利对情绪造成的打击，蒜薢忘记了自己的具体分数，但超强的数学方面能力还是让她快速地记下了另一些相关信息：具体来说，蒜薢的月考数学成绩是一个 $0$ 到 $150$ 之间的整数，它除以 $3$ 得到的余数是 $2$，除以 $5$ 得到的余数是 $3$，除以 $7$ 得到的余数是 $6$。\n\n蒜薢不能根据上面的信息求出自己的月考数学成绩，你能帮帮她吗？", "inputFormat": "本题无需输入。", "outputFormat": "输出一个整数，表示蒜薢的月考数学成绩。", "hint": "薢，音械，是一种一年生草本植物，长在池沼中，叶子浮在水面。\n\n蒜薢的名字是一个谐音梗，但不仅限于此——你想对个对子吗？\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11533", "type": "P", "difficulty": 4, "samples": [["3 3\n0 0 0\n7 9 2\n7 8 9\n7 8 2\n7 7 7\n8 10 9\n", "1\n"], ["4 3\n5 1 0\n0 1 5\n0 0 0\n7 7 7\n0 5 6\n1 1 1\n8 2 0\n8 1 4\n", "4\n"], ["5 5\n14 11 15 7 15\n0 0 0 0 0\n9 9 14 2 13\n4 3 6 1 0\n2 4 7 0 0\n5 5 0 0 13\n4 4 7 1 0\n4 1 0 2 1\n2 5 0 2 1\n4 0 7 2 12\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "NOISG（新加坡）"], "title": "[NOISG 2023 Finals] Topical", "background": "", "description": "兔子 Benson 正在上飞行员学校！\n\n他需要完成 $n$ 场测试，由 $1\\sim n$ 编号。对于每场测试，有 $k$ 个科目。对于每个科目，Benson 有一个能力值 $p_j$。由于 Benson 还是一名新手，他对于每个科目的初始能力值均为 $0$。\n\n对于每场测试的每个科目，均有一个能力值下限 $r_{i, j}$。而为了完成第 $i$ 场测试，需要满足他每个科目的能力值都不低于这个下限。\n\n若成功完成第 $i$ 场测试，他的能力值将获得提升，且第 $j$ 个科目的能力值将提升 $u_{i, j}$。\n\n**形式化地**：初始，对于所有 $j$，有 $p_j=0$。Benson 能完成一场测试，当且仅当对于所有 $j$，都有 $r_{i, j}\\leq p_j$；完成该场测试后，对于所有 $j$，$p_j$ 的值将增加 $u_{i, j}$。\n\n他可以任意选择完成测试的顺序，但每场测试只能完成一次。请帮助他计算他最多能完成多少场测试。", "inputFormat": "第一行两个正整数 $n, k$，用空格隔开。\n\n接下来 $n$ 行，第 $i$ 行包含 $k$ 个整数 $r_{i, 1}, r_{i, 2}, \\cdots, r_{i, k}$，表示完成第 $i$ 场测试的能力值下限。\n\n接下来 $n$ 行，第 $i$ 行包含 $k$ 个整数 $u_{i, 1}, u_{i, 2}, \\cdots, u_{i, k}$，表示完成第 $i$ 场测试后能力值的增加量。", "outputFormat": "输出一行一个整数，表示 Benson 最多能完成的测试数量。", "hint": "#### 样例 #1 解释\n\nBenson 只能完成第一场测试，其要求为 $[0, 0, 0]$。完成后，他的能力值将变为 $[7, 8, 2]$。此时他不能完成任何一场其余的测试，故答案为 $1$。\n\n#### 数据范围\n\n| Subtask | 分值 | 特殊限制 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $12$ | $n=1$ |\n| $2$ | $28$ | $n,k\\leq 100$ |\n| $3$ | $21$ | $k=1$ |\n| $4$ | $39$ | 无 |\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n, k\\leq 10^6$\n- $n\\cdot k\\leq 10^6$\n- $0\\leq u_{i, j}, r_{i, j}\\leq 10^9$，其中 $1\\leq i\\leq n$ 且 $1\\leq j\\leq k$。\n\n注：由于洛谷限制，数据不完全按照原题分配子任务。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2023 Finals] Topical", "background": "", "description": "兔子 Benson 正在上飞行员学校！\n\n他需要完成 $n$ 场测试，由 $1\\sim n$ 编号。对于每场测试，有 $k$ 个科目。对于每个科目，Benson 有一个能力值 $p_j$。由于 Benson 还是一名新手，他对于每个科目的初始能力值均为 $0$。\n\n对于每场测试的每个科目，均有一个能力值下限 $r_{i, j}$。而为了完成第 $i$ 场测试，需要满足他每个科目的能力值都不低于这个下限。\n\n若成功完成第 $i$ 场测试，他的能力值将获得提升，且第 $j$ 个科目的能力值将提升 $u_{i, j}$。\n\n**形式化地**：初始，对于所有 $j$，有 $p_j=0$。Benson 能完成一场测试，当且仅当对于所有 $j$，都有 $r_{i, j}\\leq p_j$；完成该场测试后，对于所有 $j$，$p_j$ 的值将增加 $u_{i, j}$。\n\n他可以任意选择完成测试的顺序，但每场测试只能完成一次。请帮助他计算他最多能完成多少场测试。", "inputFormat": "第一行两个正整数 $n, k$，用空格隔开。\n\n接下来 $n$ 行，第 $i$ 行包含 $k$ 个整数 $r_{i, 1}, r_{i, 2}, \\cdots, r_{i, k}$，表示完成第 $i$ 场测试的能力值下限。\n\n接下来 $n$ 行，第 $i$ 行包含 $k$ 个整数 $u_{i, 1}, u_{i, 2}, \\cdots, u_{i, k}$，表示完成第 $i$ 场测试后能力值的增加量。", "outputFormat": "输出一行一个整数，表示 Benson 最多能完成的测试数量。", "hint": "#### 样例 #1 解释\n\nBenson 只能完成第一场测试，其要求为 $[0, 0, 0]$。完成后，他的能力值将变为 $[7, 8, 2]$。此时他不能完成任何一场其余的测试，故答案为 $1$。\n\n#### 数据范围\n\n| Subtask | 分值 | 特殊限制 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $12$ | $n=1$ |\n| $2$ | $28$ | $n,k\\leq 100$ |\n| $3$ | $21$ | $k=1$ |\n| $4$ | $39$ | 无 |\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n, k\\leq 10^6$\n- $n\\cdot k\\leq 10^6$\n- $0\\leq u_{i, j}, r_{i, j}\\leq 10^9$，其中 $1\\leq i\\leq n$ 且 $1\\leq j\\leq k$。\n\n注：由于洛谷限制，数据不完全按照原题分配子任务。", "locale": "zh-CN"}}}
{"pid": "P11534", "type": "P", "difficulty": 5, "samples": [["5 3 7\n1 3\n3 5\n2 3\n0 1 2 3 4 5 6\n", "3 2 2 2 1 0 0 \n"], ["6 6 7\n1 6\n1 5\n1 4\n1 3\n1 2\n1 1\n1 2 3 4 5 6 7\n", "15 14 12 9 5 0 0 \n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "颜色段均摊（珂朵莉树 ODT）", "NOISG（新加坡）", "离线处理"], "title": "[NOISG 2023 Finals] Inspections", "background": "", "description": "兔子 Benson 正要造一架飞机！\n\nBenson 的工厂有 $n$ 个机器，由 $1\\sim n$ 编号。每台机器会工作一天，且每一天只能有一台机器工作。他需要制造 $m$ 个部件，由 $1\\sim m$ 编号。每个部件用两个整数 $l_i, r_i$ 表示，其中 $l_i\\leq r_i$。\n\n制造第 $i$ 个部件时，Benson 将依次运行编号为 $l_i, l_i+1,\\cdots,r_i$ 的机器。当一台机器结束工作，下一台机器会立即启动。此外，Benson 会依次制造这 $m$ 个部件。当一个部件制造完毕，下一个部件会立即开始制造。\n\n为了保障机器的安全，工厂设有一个检查系数 $s$。若一台机器已经连续 $s$ 或更多天没有启动，那么这次启动前必须对其进行安全检查。特别地，第一次启动某个机器时无需进行安全检查。\n\nBenson 有 $q$ 个询问 $s_1, s_2, \\cdots, s_q$。对于每个检查系数 $s_j$，请你帮助他计算完成所有部件所需的检查次数。", "inputFormat": "第一行三个正整数 $n, m, q$，用空格隔开。\n\n接下来 $m$ 行，每行两个整数 $l_i,r_i$，描述第 $i$ 个部件。\n\n接下来一行 $q$ 个整数 $s_1,s_2,\\cdots,s_q$，表示 $q$ 个检查系数。", "outputFormat": "输出一行 $q$ 个整数，表示当检查系数为 $s_j$ 时，所需检查机器的次数。", "hint": "#### 样例 #1 解释\n\nBenson 会按照如下顺序启动机器：$1,2,3,3,4,5,2,3$。\n\n第 $4$ 天启动的 $3$ 号机器连续 $0$ 天未启动；\n\n第 $7$ 天启动的 $2$ 号机器连续 $4$ 天未启动；\n\n第 $8$ 天启动的 $3$ 号机器连续 $3$ 天未启动。\n\n当检查系数为 $0$ 时，$3$ 号机器会在第 $4$ 天和第 $8$ 天被安全检查，而 $2$ 号机器会在第 $7$ 天被安全检查。\n\n当检查系数为 $2$ 时，$3$ 号机器会在第 $8$ 天被安全检查，而 $2$ 号机器会在第 $7$ 天被安全检查。\n\n#### 数据范围\n\n| Subtask | 分值 | 特殊限制 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $11$ | $n,m,q\\leq 200$ |\n| $2$ | $18$ | $n,m\\leq 2000$ |\n| $3$ | $22$ | $l_i=1$ |\n| $4$ | $26$ | $m\\leq2000$ |\n| $5$ | $23$ | 无 |\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n, m,q\\leq 2\\times 10^5$\n- $1\\leq l_i\\leq r_i\\leq n$\n- $0\\leq s_j\\leq 10^{12}$\n\n注：由于洛谷限制，数据不完全按照原题分配子任务。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2023 Finals] Inspections", "background": "", "description": "兔子 Benson 正要造一架飞机！\n\nBenson 的工厂有 $n$ 个机器，由 $1\\sim n$ 编号。每台机器会工作一天，且每一天只能有一台机器工作。他需要制造 $m$ 个部件，由 $1\\sim m$ 编号。每个部件用两个整数 $l_i, r_i$ 表示，其中 $l_i\\leq r_i$。\n\n制造第 $i$ 个部件时，Benson 将依次运行编号为 $l_i, l_i+1,\\cdots,r_i$ 的机器。当一台机器结束工作，下一台机器会立即启动。此外，Benson 会依次制造这 $m$ 个部件。当一个部件制造完毕，下一个部件会立即开始制造。\n\n为了保障机器的安全，工厂设有一个检查系数 $s$。若一台机器已经连续 $s$ 或更多天没有启动，那么这次启动前必须对其进行安全检查。特别地，第一次启动某个机器时无需进行安全检查。\n\nBenson 有 $q$ 个询问 $s_1, s_2, \\cdots, s_q$。对于每个检查系数 $s_j$，请你帮助他计算完成所有部件所需的检查次数。", "inputFormat": "第一行三个正整数 $n, m, q$，用空格隔开。\n\n接下来 $m$ 行，每行两个整数 $l_i,r_i$，描述第 $i$ 个部件。\n\n接下来一行 $q$ 个整数 $s_1,s_2,\\cdots,s_q$，表示 $q$ 个检查系数。", "outputFormat": "输出一行 $q$ 个整数，表示当检查系数为 $s_j$ 时，所需检查机器的次数。", "hint": "#### 样例 #1 解释\n\nBenson 会按照如下顺序启动机器：$1,2,3,3,4,5,2,3$。\n\n第 $4$ 天启动的 $3$ 号机器连续 $0$ 天未启动；\n\n第 $7$ 天启动的 $2$ 号机器连续 $4$ 天未启动；\n\n第 $8$ 天启动的 $3$ 号机器连续 $3$ 天未启动。\n\n当检查系数为 $0$ 时，$3$ 号机器会在第 $4$ 天和第 $8$ 天被安全检查，而 $2$ 号机器会在第 $7$ 天被安全检查。\n\n当检查系数为 $2$ 时，$3$ 号机器会在第 $8$ 天被安全检查，而 $2$ 号机器会在第 $7$ 天被安全检查。\n\n#### 数据范围\n\n| Subtask | 分值 | 特殊限制 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $11$ | $n,m,q\\leq 200$ |\n| $2$ | $18$ | $n,m\\leq 2000$ |\n| $3$ | $22$ | $l_i=1$ |\n| $4$ | $26$ | $m\\leq2000$ |\n| $5$ | $23$ | 无 |\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n, m,q\\leq 2\\times 10^5$\n- $1\\leq l_i\\leq r_i\\leq n$\n- $0\\leq s_j\\leq 10^{12}$\n\n注：由于洛谷限制，数据不完全按照原题分配子任务。", "locale": "zh-CN"}}}
{"pid": "P11535", "type": "P", "difficulty": 5, "samples": [["3 2\n0 2 0\n1 2\n2 3\n", "4"], ["11 12\n0 0 0 0 0 0 2 2 1 5 0\n1 2\n2 3\n3 4\n4 5\n5 6\n6 11\n1 7\n7 8\n8 9\n9 11\n1 10\n10 11\n", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "最短路", "NOISG（新加坡）"], "title": "[NOISG 2023 Finals] Airplane", "background": "", "description": "兔子 Benson 正要启动飞机！\n\n有 $n$ 块 Benson 可以飞入的区域，由 $1\\sim n$ 编号。受地形限制，进入第 $i$ 块区域时，需要保证飞机的高度不低于 $a_i$。保证 $a_1=a_n=0$。\n\n此外，由于风况复杂而 Benson 的经验尚不充足（毕竟他是只兔子），他只能在某些特定的航线上双向飞行。具体地，有 $m$ 条航线，由 $1\\sim m$ 编号，其中第 $i$ 条航线 $u_j,v_j$ 表示 Benson 可以在这两块区域间直接飞行。\n\nBenson 发现，他可以通过在直接的航线上飞行，使得这些区域两两可达。\n\n现在，Benson 在 $1$ 号区域，高度为 $0$。他希望降落在 $n$ 号区域，高度自然也为 $0$。每一分钟，Benson 可以跨过一条航线或不移动，并**同时**使飞机的高度上升 $1$、下降 $1$ 或保持不变。注意，当他到达 $i$ 区域时，必须保证飞机的高度不低于 $a_i$。\n\nBenson 想知道，从 $1$ 号区域出发，在 $n$ 号区域降落，所需的最小时间。", "inputFormat": "第一行两个正整数 $n, m$，用空格隔开。\n\n接下来一行 $n$ 个整数 $a_1, a_2,\\cdots, a_n$，表示区域的高度限制。\n\n接下来 $m$ 行，每行两个正整数 $u_j,v_j$，表示一条在 $u_j,v_j$ 间的双向航线。", "outputFormat": "一行一个整数，表示 Benson 所需的最小时间。", "hint": "#### 样例 #1 解释\n\nBenson 从 $1$ 出发，在 $3$ 降落，总共需要 $4$ 分钟：\n\n- 第 $1$ 分钟，Benson 不移动，同时高度从 $0$ 变为 $1$；\n- 第 $2$ 分钟，从 $1$ 移动到 $2$，同时高度从 $1$ 变为 $2$；\n- 第 $3$ 分钟，从 $2$ 移动到 $3$，同时高度从 $2$ 变为 $1$；\n- 第 $4$ 分钟，Benson 不移动，同时高度从 $1$ 变为 $0$。\n\n#### 数据范围\n\n| Subtask | 分值 | 特殊限制 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $22$ | $m=n-1,u_j=j,v_j=j+1$ |\n| $2$ | $10$ | $n\\leq 2000$，$m\\leq 4000$，$a_i\\leq 2000$ |\n| $3$ | $31$ | $n\\leq 2000$，$m\\leq 4000$ |\n| $4$ | $37$ | 无 |\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n\\leq 2\\times 10^5$\n- $1\\leq m\\leq 4\\times 10^5$\n- $0\\leq a_i\\leq 10^8$，$a_1=a_n=0$\n- $1\\leq u_j,v_j\\leq n$，$u_j\\ne v_j$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2023 Finals] Airplane", "background": "", "description": "兔子 Benson 正要启动飞机！\n\n有 $n$ 块 Benson 可以飞入的区域，由 $1\\sim n$ 编号。受地形限制，进入第 $i$ 块区域时，需要保证飞机的高度不低于 $a_i$。保证 $a_1=a_n=0$。\n\n此外，由于风况复杂而 Benson 的经验尚不充足（毕竟他是只兔子），他只能在某些特定的航线上双向飞行。具体地，有 $m$ 条航线，由 $1\\sim m$ 编号，其中第 $i$ 条航线 $u_j,v_j$ 表示 Benson 可以在这两块区域间直接飞行。\n\nBenson 发现，他可以通过在直接的航线上飞行，使得这些区域两两可达。\n\n现在，Benson 在 $1$ 号区域，高度为 $0$。他希望降落在 $n$ 号区域，高度自然也为 $0$。每一分钟，Benson 可以跨过一条航线或不移动，并**同时**使飞机的高度上升 $1$、下降 $1$ 或保持不变。注意，当他到达 $i$ 区域时，必须保证飞机的高度不低于 $a_i$。\n\nBenson 想知道，从 $1$ 号区域出发，在 $n$ 号区域降落，所需的最小时间。", "inputFormat": "第一行两个正整数 $n, m$，用空格隔开。\n\n接下来一行 $n$ 个整数 $a_1, a_2,\\cdots, a_n$，表示区域的高度限制。\n\n接下来 $m$ 行，每行两个正整数 $u_j,v_j$，表示一条在 $u_j,v_j$ 间的双向航线。", "outputFormat": "一行一个整数，表示 Benson 所需的最小时间。", "hint": "#### 样例 #1 解释\n\nBenson 从 $1$ 出发，在 $3$ 降落，总共需要 $4$ 分钟：\n\n- 第 $1$ 分钟，Benson 不移动，同时高度从 $0$ 变为 $1$；\n- 第 $2$ 分钟，从 $1$ 移动到 $2$，同时高度从 $1$ 变为 $2$；\n- 第 $3$ 分钟，从 $2$ 移动到 $3$，同时高度从 $2$ 变为 $1$；\n- 第 $4$ 分钟，Benson 不移动，同时高度从 $1$ 变为 $0$。\n\n#### 数据范围\n\n| Subtask | 分值 | 特殊限制 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $22$ | $m=n-1,u_j=j,v_j=j+1$ |\n| $2$ | $10$ | $n\\leq 2000$，$m\\leq 4000$，$a_i\\leq 2000$ |\n| $3$ | $31$ | $n\\leq 2000$，$m\\leq 4000$ |\n| $4$ | $37$ | 无 |\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n\\leq 2\\times 10^5$\n- $1\\leq m\\leq 4\\times 10^5$\n- $0\\leq a_i\\leq 10^8$，$a_1=a_n=0$\n- $1\\leq u_j,v_j\\leq n$，$u_j\\ne v_j$", "locale": "zh-CN"}}}
{"pid": "P11536", "type": "P", "difficulty": 6, "samples": [["6 2 3\n1 2\n3 4\n1 3\n1 4\n1 5\n", "NO\nYES\nNO\n"], ["10 10 10\n6 9\n6 7\n1 6\n10 10\n5 9\n3 9\n2 10\n5 7\n9 10\n5 10\n7 8\n4 7\n1 6\n2 7\n3 9\n7 7\n2 9\n4 9\n6 6\n5 7\n", "NO\nNO\nYES\nNO\nYES\nNO\nNO\nNO\nNO\nYES\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2023", "分治", "NOISG（新加坡）", "离线处理"], "title": "[NOISG 2023 Finals] Curtains", "background": null, "description": "兔子 Benson 正要在飞机上组织表演！\n\nBenson 有 $n$ 个舞台，由 $1\\sim n$ 编号。他有 $m$ 个幕布，由 $1\\sim m$ 编号。\n\n幕布可以下降——第 $i$ 个幕布下降后，它会遮挡住编号在 $[l_i,r_i]$ 内的舞台。\n\nBenson 将组织 $q$ 次演出，由 $1\\sim q$ 编号。第 $i$ 场演出需要使用编号在 $[s_j,e_j]$ 内的舞台。对于每场演出，Benson 想知道，是否能下降某些幕布，**恰好**遮住表演所需的舞台。\n\n**形式化地**：重新定义区间 $[x,y]$ 只包含当中的整点，即表示集合 $\\{x,x+1,\\cdots,y\\}$。给定 $m$ 个区间 $[l_i,r_i]$，每次询问给定区间 $[s_j,e_j]$，查询是否能选择一些区间，使它们的并恰好为 $[s_j,e_j]$。", "inputFormat": "第一行三个正整数 $n,m,q$，用空格隔开。\n\n接下来 $m$ 行，每行两个整数 $l_i,r_i$，表示幕布能遮挡的舞台区间。\n\n接下来 $q$ 行，每行两个整数 $s_j,e_j$，表示表演所需的舞台区间。", "outputFormat": "对于每组询问，输出一行 `YES` 或 `NO`，表示是否能下降某些幕布，使其恰好遮住表演所需的舞台。", "hint": "#### 数据范围\n\n| Subtask | 分值 | 特殊限制 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $3$ | $n,m,q\\leq 200$ |\n| $2$ | $6$ | $n,m,q\\leq 2000$ |\n| $3$ | $15$ | $n\\leq 2000$ |\n| $4$ | $20$ | $s_j=1$ |\n| $5$ | $36$ | $n,m,q\\leq 10^5$ |\n| $6$ | $20$ | 无 |\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n,m,q\\leq 5\\times 10^5$\n- $1\\leq l_i\\leq r_i\\leq n$\n- $1\\leq s_j\\leq e_j\\leq n$\n\n注：由于洛谷限制，数据不完全按照原题分配子任务。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2023 Finals] Curtains", "background": null, "description": "兔子 Benson 正要在飞机上组织表演！\n\nBenson 有 $n$ 个舞台，由 $1\\sim n$ 编号。他有 $m$ 个幕布，由 $1\\sim m$ 编号。\n\n幕布可以下降——第 $i$ 个幕布下降后，它会遮挡住编号在 $[l_i,r_i]$ 内的舞台。\n\nBenson 将组织 $q$ 次演出，由 $1\\sim q$ 编号。第 $i$ 场演出需要使用编号在 $[s_j,e_j]$ 内的舞台。对于每场演出，Benson 想知道，是否能下降某些幕布，**恰好**遮住表演所需的舞台。\n\n**形式化地**：重新定义区间 $[x,y]$ 只包含当中的整点，即表示集合 $\\{x,x+1,\\cdots,y\\}$。给定 $m$ 个区间 $[l_i,r_i]$，每次询问给定区间 $[s_j,e_j]$，查询是否能选择一些区间，使它们的并恰好为 $[s_j,e_j]$。", "inputFormat": "第一行三个正整数 $n,m,q$，用空格隔开。\n\n接下来 $m$ 行，每行两个整数 $l_i,r_i$，表示幕布能遮挡的舞台区间。\n\n接下来 $q$ 行，每行两个整数 $s_j,e_j$，表示表演所需的舞台区间。", "outputFormat": "对于每组询问，输出一行 `YES` 或 `NO`，表示是否能下降某些幕布，使其恰好遮住表演所需的舞台。", "hint": "#### 数据范围\n\n| Subtask | 分值 | 特殊限制 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $3$ | $n,m,q\\leq 200$ |\n| $2$ | $6$ | $n,m,q\\leq 2000$ |\n| $3$ | $15$ | $n\\leq 2000$ |\n| $4$ | $20$ | $s_j=1$ |\n| $5$ | $36$ | $n,m,q\\leq 10^5$ |\n| $6$ | $20$ | 无 |\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n,m,q\\leq 5\\times 10^5$\n- $1\\leq l_i\\leq r_i\\leq n$\n- $1\\leq s_j\\leq e_j\\leq n$\n\n注：由于洛谷限制，数据不完全按照原题分配子任务。", "locale": "zh-CN"}}}
{"pid": "P11537", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "交互题", "Special Judge", "O2优化", "NOISG（新加坡）"], "title": "[NOISG 2023 Finals] Toxic Gene", "background": "**这是一道交互题。**\n\n本题只支持 C++ 提交，建议使用 C++17。\n\n提交时不需要包含 toxic.h 头文件。\n\n为了确保程序正常编译，你需要在你提交的程序开头加上如下函数声明语句：\n\n```cpp\nint query_sample(std::vector<int> species);\nvoid answer_type(int x, char c);\n```\n\n如遇评测问题，请联系搬题人。", "description": "**建议仔细区分题面中的“种类”和“个体”。**\n\n兔子 Benson 的飞机被有害病毒侵袭了，他必须对此展开调查！\n\nBenson 发现了 $n$ 种病毒，每种病毒恰好属于三个类型之一：普通、强悍和毒害。保证至少有一种毒害病毒。\n\nBenson 必须识别每种病毒的类型。为了分析之，他将使用一个特殊的机器。每一次，他可以选择任意数量的病毒（包括 $0$）制成标本，并将其放入机器中。受机器大小的影响，每个标本里不能有超过 $300$ 个病毒。每个病毒的种类由 Benson 任意指定。\n\n标本放入机器后，其中三个类型的病毒会发生如下反应：\n\n- 当且仅当不存在毒害病毒，普通病毒可以存活。\n\n- 强悍病毒总是存活。\n\n- 毒害病毒产生有害物质并杀死强悍病毒外的所有病毒。因此，毒害病毒总是死亡。\n\n对于每个样本，机器会告诉 Benson 有多少病毒存活。由于机器分析消耗太多时间，Benson 最多只能使用 $600$ 次机器。请帮助 Benson 确定每种病毒的类型：普通、强悍或毒害。\n\n\n### 实现细节\n\n这是一道交互题。你需要实现如下函数：\n\n- `void determine_type(int n)`\n\n每个测试数据中，该函数最多被调用 $100$ 次，每次调用将对应不同的病毒组合。对于每个测试数据，你必须保证所有调用不超过时间限制和空间限制。\n\n你可以通过调用如下函数完成题目：\n\n- `int query_sample(std::vector<int> species)`\n- `void answer_type(int x, char c)`\n\n调用 `query_sample` 函数时，需传入一维数组 `species`，表示标本中你所选择的病毒种类。该数组的大小不能超过 $300$。此外，你可以假定该函数调用结束后，`species` 数组不会改变。\n\n调用 `answer_type` 函数时，需传入一个整数 $x$ 和一个字符 $c$。当你确定第 $x$ 种病毒的类型时，调用该函数，其中 $c$ 是 `R`、`S` 或 `T` 之一，分别表示普通病毒、强悍病毒和毒害病毒。你必须对每种病毒都调用该函数。\n\n下列情况可能导致你收到 Wrong Answer 反馈并立即结束评测：\n\n- `query_sample` 函数或 `answer_type` 函数的调用非法\n- `answer_type` 函数给出的病毒种类有误\n- `determine_type` 函数结束时，存在某种病毒未被 `answer_type` 确认\n- 某次 `determine_type` 函数调用过程中，`query_sample` 被调用了超过 $600$ 次\n\n请注意，题目中的交互库是**非自适应的**，即每个测试数据的答案被提前确定，且不会在交互过程中改变。", "inputFormat": "示例测试程序按如下格式读取输入数据：\n\n第一行两个整数 $tc, n$。$tc$ 表示 `determine_type` 的调用次数。\n\n接下来 $tc$ 行，每行一个字符串，由 `R`、`S` 和 `T` 组成，依次描述每种病毒的类型。", "outputFormat": "示例测试程序按如下格式输出信息：\n\n对于每次 `determine_type` 的调用，输出一行一个整数：若反馈为 Wrong Answer，输出 $-1$；否则输出 `query_sample` 的调用次数。", "hint": "### 调用示例\n\n假定 $n=5$，第一种病毒和第二种病毒是毒害病毒，第三种病毒和第四种病毒是普通病毒，第五种病毒是强悍病毒。该情况可用字符串 `TTRRS` 表达。\n\n你的函数会被这样调用：\n\n- `determine_type(5)`\n\n一个可能的交互过程如下：\n\n- `query_sample([1,2,3,4,5]) = 1`\n所有种类的病毒都被放置在标本中，只有种类 $5$ 的病毒存活，故返回 $1$。\n\n- `query_sample([3,3,4,5]) = 4`\n两个“第三种病毒”、一个“第四种病毒”和一个“第五种病毒”被放置在标本中。由于不存在毒害病毒，所有病毒均存活，故返回 $4$。\n\n此时，程序认为其已经确认所有病毒的类型，故进行了如下 $5$ 次调用：\n\n- `answer_type(1,'T')`\n- `answer_type(2,'T')`\n- `answer_type(3,'R')`\n- `answer_type(4,'R')`\n- `answer_type(5,'S')`\n\n这些函数都没有返回值。当程序正确地确认了 $n=5$ 种病毒的种类，且未使用超过 $600$ 次询问时，会在该测试点中被认为是正确的。\n\n请注意，该示例仅供展示交互过程，不一定存在合理逻辑。\n\n### 得分细则\n\n设 $t$ 表示毒害病毒的数量。保证测试数据中 $n=300$，$1\\leq t\\leq 30$。\n\n某测试点中，你的得分与所有 `determine_type` 调用中，询问次数的最大值有关，设为 $m$。\n\n- 当 $m>600$ 时，得分为 $0$。\n- 当 $340<m\\leq 600$ 时，得分为 $2+7\\times \\frac{600-m}{260}$。\n- 当 $275<m\\leq 340$ 时，得分为 $9+15\\times \\frac{340-m}{65}$。\n- 当 $190<m\\leq 275$ 时，得分为 $24+22\\times \\frac{275-m}{85}$。\n- 当 $150<m\\leq 190$ 时，得分为 $46+54\\times \\frac{190-m}{40}$。\n- 当 $m\\leq 150$ 时，得分为 $100$。\n\n### 程序测试\n\n下发文件中有两个数据可供测试。`sample1.txt` 是上文的【调用示例】，`sample2.txt` 中含有一组 $tc=100,n=300$ 的测试数据。请使用 `compile.sh` 编译并运行你的程序。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2023 Finals] Toxic Gene", "background": "**这是一道交互题。**\n\n本题只支持 C++ 提交，建议使用 C++17。\n\n提交时不需要包含 toxic.h 头文件。\n\n为了确保程序正常编译，你需要在你提交的程序开头加上如下函数声明语句：\n\n```cpp\nint query_sample(std::vector<int> species);\nvoid answer_type(int x, char c);\n```\n\n如遇评测问题，请联系搬题人。", "description": "**建议仔细区分题面中的“种类”和“个体”。**\n\n兔子 Benson 的飞机被有害病毒侵袭了，他必须对此展开调查！\n\nBenson 发现了 $n$ 种病毒，每种病毒恰好属于三个类型之一：普通、强悍和毒害。保证至少有一种毒害病毒。\n\nBenson 必须识别每种病毒的类型。为了分析之，他将使用一个特殊的机器。每一次，他可以选择任意数量的病毒（包括 $0$）制成标本，并将其放入机器中。受机器大小的影响，每个标本里不能有超过 $300$ 个病毒。每个病毒的种类由 Benson 任意指定。\n\n标本放入机器后，其中三个类型的病毒会发生如下反应：\n\n- 当且仅当不存在毒害病毒，普通病毒可以存活。\n\n- 强悍病毒总是存活。\n\n- 毒害病毒产生有害物质并杀死强悍病毒外的所有病毒。因此，毒害病毒总是死亡。\n\n对于每个样本，机器会告诉 Benson 有多少病毒存活。由于机器分析消耗太多时间，Benson 最多只能使用 $600$ 次机器。请帮助 Benson 确定每种病毒的类型：普通、强悍或毒害。\n\n\n### 实现细节\n\n这是一道交互题。你需要实现如下函数：\n\n- `void determine_type(int n)`\n\n每个测试数据中，该函数最多被调用 $100$ 次，每次调用将对应不同的病毒组合。对于每个测试数据，你必须保证所有调用不超过时间限制和空间限制。\n\n你可以通过调用如下函数完成题目：\n\n- `int query_sample(std::vector<int> species)`\n- `void answer_type(int x, char c)`\n\n调用 `query_sample` 函数时，需传入一维数组 `species`，表示标本中你所选择的病毒种类。该数组的大小不能超过 $300$。此外，你可以假定该函数调用结束后，`species` 数组不会改变。\n\n调用 `answer_type` 函数时，需传入一个整数 $x$ 和一个字符 $c$。当你确定第 $x$ 种病毒的类型时，调用该函数，其中 $c$ 是 `R`、`S` 或 `T` 之一，分别表示普通病毒、强悍病毒和毒害病毒。你必须对每种病毒都调用该函数。\n\n下列情况可能导致你收到 Wrong Answer 反馈并立即结束评测：\n\n- `query_sample` 函数或 `answer_type` 函数的调用非法\n- `answer_type` 函数给出的病毒种类有误\n- `determine_type` 函数结束时，存在某种病毒未被 `answer_type` 确认\n- 某次 `determine_type` 函数调用过程中，`query_sample` 被调用了超过 $600$ 次\n\n请注意，题目中的交互库是**非自适应的**，即每个测试数据的答案被提前确定，且不会在交互过程中改变。", "inputFormat": "示例测试程序按如下格式读取输入数据：\n\n第一行两个整数 $tc, n$。$tc$ 表示 `determine_type` 的调用次数。\n\n接下来 $tc$ 行，每行一个字符串，由 `R`、`S` 和 `T` 组成，依次描述每种病毒的类型。", "outputFormat": "示例测试程序按如下格式输出信息：\n\n对于每次 `determine_type` 的调用，输出一行一个整数：若反馈为 Wrong Answer，输出 $-1$；否则输出 `query_sample` 的调用次数。", "hint": "### 调用示例\n\n假定 $n=5$，第一种病毒和第二种病毒是毒害病毒，第三种病毒和第四种病毒是普通病毒，第五种病毒是强悍病毒。该情况可用字符串 `TTRRS` 表达。\n\n你的函数会被这样调用：\n\n- `determine_type(5)`\n\n一个可能的交互过程如下：\n\n- `query_sample([1,2,3,4,5]) = 1`\n所有种类的病毒都被放置在标本中，只有种类 $5$ 的病毒存活，故返回 $1$。\n\n- `query_sample([3,3,4,5]) = 4`\n两个“第三种病毒”、一个“第四种病毒”和一个“第五种病毒”被放置在标本中。由于不存在毒害病毒，所有病毒均存活，故返回 $4$。\n\n此时，程序认为其已经确认所有病毒的类型，故进行了如下 $5$ 次调用：\n\n- `answer_type(1,'T')`\n- `answer_type(2,'T')`\n- `answer_type(3,'R')`\n- `answer_type(4,'R')`\n- `answer_type(5,'S')`\n\n这些函数都没有返回值。当程序正确地确认了 $n=5$ 种病毒的种类，且未使用超过 $600$ 次询问时，会在该测试点中被认为是正确的。\n\n请注意，该示例仅供展示交互过程，不一定存在合理逻辑。\n\n### 得分细则\n\n设 $t$ 表示毒害病毒的数量。保证测试数据中 $n=300$，$1\\leq t\\leq 30$。\n\n某测试点中，你的得分与所有 `determine_type` 调用中，询问次数的最大值有关，设为 $m$。\n\n- 当 $m>600$ 时，得分为 $0$。\n- 当 $340<m\\leq 600$ 时，得分为 $2+7\\times \\frac{600-m}{260}$。\n- 当 $275<m\\leq 340$ 时，得分为 $9+15\\times \\frac{340-m}{65}$。\n- 当 $190<m\\leq 275$ 时，得分为 $24+22\\times \\frac{275-m}{85}$。\n- 当 $150<m\\leq 190$ 时，得分为 $46+54\\times \\frac{190-m}{40}$。\n- 当 $m\\leq 150$ 时，得分为 $100$。\n\n### 程序测试\n\n下发文件中有两个数据可供测试。`sample1.txt` 是上文的【调用示例】，`sample2.txt` 中含有一组 $tc=100,n=300$ 的测试数据。请使用 `compile.sh` 编译并运行你的程序。", "locale": "zh-CN"}}}
{"pid": "P11538", "type": "P", "difficulty": 2, "samples": [["5 3 7\n3 1 4\n3 1 1 1 2 3 1\n", "5\n4\nerror!\nerror!\n2\nerror!\nerror!\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Code+"], "title": "[Code+#5] 棋子", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。", "description": "棋盘从左到右被分割成 $n(n\\le 1000)$ 个格子，从左到右编号为 $1,2,\\dots,n$。棋盘上有 $m(m\\le n)$ 个棋子，编号为 $1,2,\\dots,m$ ，编号为 $i$ 的棋子刚开始摆放在编号为 $p_i$ 的格子上，一个格子最多摆放一个棋子。每次操作小R可以选择一个棋子，将它移动到它右边第一个空着的格子中，如果它右边没有空着的格子了，那么这就是一个非法操作，执行一次非法操作不会对棋盘有任何改变。小 R 依次做了 $k$ 次操作，如果一次操作是合法的，你需要输出这颗棋子移动到的格子的编号，如果是非法的，你需要输出 `error!`。", "inputFormat": "第一行三个整数 $n$、$m$、$k$ ，表示格子数、棋子数和操作数。\n\n第二行 $m$ 个正整数，第 $i$ 个正整数表示 $p_i$ ，即第 $i$ 个棋子的初始位置。\n\n第三行 $k$ 个正整数，第 $i$ 个正整数表示 $x_i$ ，即第 $i$ 次操作选定的棋子的编号。", "outputFormat": "输出 $k$ 行，第$i$行表示第$i$次操作的结果。对于合法操作，输出棋子移动到的位置，对于非法操作，输出一行 `error!`。", "hint": "**数据范围：**\n\n$\\def\\arraystretch{1.21}\n\\begin{array}{|c|c|c|}\\hline\n\\bold{\\small{子任务}}&\\textbf{score}&\\textbf{constraints}\\\\\\hline\n\\text{A}&30&m=1\\\\\\hline\n\\text{B}&70&\\small{无特殊限制}\\\\\\hline\n\\end{array}$\n\n对于所有数据，保证 $1\\le m<n\\le1000$，$1\\le k\\le10000$，$1\\le p_i\\le n,1\\le x_i\\le m$，$p_i$ 互不相等。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#5] 棋子", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。", "description": "棋盘从左到右被分割成 $n(n\\le 1000)$ 个格子，从左到右编号为 $1,2,\\dots,n$。棋盘上有 $m(m\\le n)$ 个棋子，编号为 $1,2,\\dots,m$ ，编号为 $i$ 的棋子刚开始摆放在编号为 $p_i$ 的格子上，一个格子最多摆放一个棋子。每次操作小R可以选择一个棋子，将它移动到它右边第一个空着的格子中，如果它右边没有空着的格子了，那么这就是一个非法操作，执行一次非法操作不会对棋盘有任何改变。小 R 依次做了 $k$ 次操作，如果一次操作是合法的，你需要输出这颗棋子移动到的格子的编号，如果是非法的，你需要输出 `error!`。", "inputFormat": "第一行三个整数 $n$、$m$、$k$ ，表示格子数、棋子数和操作数。\n\n第二行 $m$ 个正整数，第 $i$ 个正整数表示 $p_i$ ，即第 $i$ 个棋子的初始位置。\n\n第三行 $k$ 个正整数，第 $i$ 个正整数表示 $x_i$ ，即第 $i$ 次操作选定的棋子的编号。", "outputFormat": "输出 $k$ 行，第$i$行表示第$i$次操作的结果。对于合法操作，输出棋子移动到的位置，对于非法操作，输出一行 `error!`。", "hint": "**数据范围：**\n\n$\\def\\arraystretch{1.21}\n\\begin{array}{|c|c|c|}\\hline\n\\bold{\\small{子任务}}&\\textbf{score}&\\textbf{constraints}\\\\\\hline\n\\text{A}&30&m=1\\\\\\hline\n\\text{B}&70&\\small{无特殊限制}\\\\\\hline\n\\end{array}$\n\n对于所有数据，保证 $1\\le m<n\\le1000$，$1\\le k\\le10000$，$1\\le p_i\\le n,1\\le x_i\\le m$，$p_i$ 互不相等。\n", "locale": "zh-CN"}}}
{"pid": "P11539", "type": "P", "difficulty": 6, "samples": [["4\n4 3 1 2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["递归", "Catalan 数", "Code+"], "title": "[Code+#5] 方案计数", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。\n\n", "description": "小 V 刚考完拓扑，闭区间套让他有点自闭，所以他决定把这一场 CP 安排一下。\n\n我们首先选定一个数据范围 $N$，这里 $N$ 是一个整数。\n\n考虑如下的函数：\n\n```cpp\n// rand_int(l, r) 返回闭区间 [l, r] 中的一个随机整数\nvector<int> ans;\n\nvoid solve(int l, int r) {\n    if (l == r) {\n        ans.push_back(r);\n        return ;\n    }\n    int m = rand_int(l, r - 1);\n    if (rand_int(0, 1) == 0) {\n        solve(l, m);\n        solve(m + 1, r);\n    } else {\n        solve(m + 1, r);\n        solve(l, m);\n    }\n}\n```\n\n我们初始令 $\\texttt{ans}$ 为空，那么调用 $\\texttt{solve(1, N)}$ 之后，$\\texttt{ans}$ 里会存储一个排列。\n\n现在的问题是，给定排列 $P$，问有多少种不同的随机数生成方法可以使这个 $\\texttt{ans}$ 中存储的排列恰好为 $P$。\n\n定义两种随机数生成方式是不同的，当且仅当在函数某次调用 $\\texttt{rand\\_int}$ 时，随机数生成器返回了不同的数。\n\n方案数对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $N$，保证 $N\\le 5\\times 10^5$。\n\n接下来一行 $N$ 个整数，描述排列 $\\{P_i\\}$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "**数据范围：**\n\n$\\def\\arraystretch{1.21}\n\\begin{array}{|c|c|c|}\\hline\n\\bold{\\small{子任务}}&\\textbf{score}&\\textbf{constraints}\\\\\\hline\n\\text{A}&20&N\\le5000,P_i=N-i+1\\\\\\hline\n\\text{B}&10&B\\le10^5,P_i=N-i+1\\\\\\hline\n\\text{C}&30&N\\le10^5\\\\\\hline\n\\text{D}&40&N\\le5\\times10^5\\\\\\hline\n\\end{array}$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#5] 方案计数", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。\n\n", "description": "小 V 刚考完拓扑，闭区间套让他有点自闭，所以他决定把这一场 CP 安排一下。\n\n我们首先选定一个数据范围 $N$，这里 $N$ 是一个整数。\n\n考虑如下的函数：\n\n```cpp\n// rand_int(l, r) 返回闭区间 [l, r] 中的一个随机整数\nvector<int> ans;\n\nvoid solve(int l, int r) {\n    if (l == r) {\n        ans.push_back(r);\n        return ;\n    }\n    int m = rand_int(l, r - 1);\n    if (rand_int(0, 1) == 0) {\n        solve(l, m);\n        solve(m + 1, r);\n    } else {\n        solve(m + 1, r);\n        solve(l, m);\n    }\n}\n```\n\n我们初始令 $\\texttt{ans}$ 为空，那么调用 $\\texttt{solve(1, N)}$ 之后，$\\texttt{ans}$ 里会存储一个排列。\n\n现在的问题是，给定排列 $P$，问有多少种不同的随机数生成方法可以使这个 $\\texttt{ans}$ 中存储的排列恰好为 $P$。\n\n定义两种随机数生成方式是不同的，当且仅当在函数某次调用 $\\texttt{rand\\_int}$ 时，随机数生成器返回了不同的数。\n\n方案数对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $N$，保证 $N\\le 5\\times 10^5$。\n\n接下来一行 $N$ 个整数，描述排列 $\\{P_i\\}$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "**数据范围：**\n\n$\\def\\arraystretch{1.21}\n\\begin{array}{|c|c|c|}\\hline\n\\bold{\\small{子任务}}&\\textbf{score}&\\textbf{constraints}\\\\\\hline\n\\text{A}&20&N\\le5000,P_i=N-i+1\\\\\\hline\n\\text{B}&10&B\\le10^5,P_i=N-i+1\\\\\\hline\n\\text{C}&30&N\\le10^5\\\\\\hline\n\\text{D}&40&N\\le5\\times10^5\\\\\\hline\n\\end{array}$", "locale": "zh-CN"}}}
{"pid": "P11540", "type": "P", "difficulty": 3, "samples": [["4\n0 1 0\n5 6\n5 7\n6 1\n6 2\n7 3\n7 4\n4 2 3 1\n", "1011"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Code+"], "title": "[Code+#5] 逻辑树", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。\n\n", "description": "有一棵树，叫逻辑树。\n\n这个树有根，有 $2N-1$ 个节点，其中 $N$ 个叶子，每个非叶节点恰好有两个孩子。\n\n每个叶子上有一个 01 变量，它的取值可能为 True 或 False。每个非叶节点上有一个逻辑运算符，这个运算可能为 AND 或者 OR。\n\n一个非叶节点的取值定义为它两个儿子的取值，作这个节点上的运算得到的结果。\n\n有一个黑恶势力想知道这个树的根节点的取值，他准备了一个长度为 $N$ 的询问序列 $\\{P_i\\}$，每个叶子在这个序列中恰好出现一次。\n\n黑恶势力会依次询问这些叶子的值，**但是**，如果他发现某一次询问是不必要的，那么他会跳过这个无意义的询问（为了帮助理解，考虑 x AND y 在我们知道 x 为 False 之后，不必知道 y 的值就可推算 x AND y 的值）。\n\n当然，邪恶总是能战胜正义，黑恶势力总能达到他的目的。但是我们可以拖慢他的节奏，你现在可以安排每个叶子的权值，使得黑恶势力询问的次数尽可能多，在此基础上，我们希望这个树的根节点取值尽量为 True。\n\n请你计算一组解，任何一种合法方案都是可以接受的。", "inputFormat": "第一行一个整数 $N$，意义如题面所示。\n\n接下来一行 $N-1$ 个整数，第 $i$ 个数代表节点 $N+i$ 上的运算符，其中 $0$ 表示 `AND`，$1$ 表示 `OR`。\n\n接下来 $2N-2$ 行，每行两个整数，描述一条边。\n\n最后一行 $N$ 个整数，表示黑恶势力的询问序列。\n\n你可以认为 $1\\sim N$ 是叶子，$N+1\\sim 2N-1$ 是非叶节点，且 $N+1$ 是根，输入数据保证每个非叶节点有两个孩子。", "outputFormat": "输出一个长度为 $N$ 的 01串 $S$，其中 $S_i$ 表示第 $i$ 个叶子的取值，$0$ 为 False, $1$ 为 True.", "hint": "**数据范围：**\n\n$\\def\\arraystretch{1.21}\n\\begin{array}{|c|c|c|}\\hline\n\\bold{\\small{子任务}}&\\textbf{score}&\\textbf{constraints}\\\\\\hline\n\\text{A}&40&\\small{树的高度不超过 50}\\\\\\hline\n\\text{B}&60&\\small{无特殊限制}\\\\\\hline\n\\end{array}$\n\n对于所有数据，$N\\le 5\\times 10^5$。\n\n对于所有数据，保证 $1\\le m<n\\le1000$，$1\\le k\\le10000$，$1\\le p_i\\le n,1\\le x_i\\le m$，$p_i$ 互不相等。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#5] 逻辑树", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。\n\n", "description": "有一棵树，叫逻辑树。\n\n这个树有根，有 $2N-1$ 个节点，其中 $N$ 个叶子，每个非叶节点恰好有两个孩子。\n\n每个叶子上有一个 01 变量，它的取值可能为 True 或 False。每个非叶节点上有一个逻辑运算符，这个运算可能为 AND 或者 OR。\n\n一个非叶节点的取值定义为它两个儿子的取值，作这个节点上的运算得到的结果。\n\n有一个黑恶势力想知道这个树的根节点的取值，他准备了一个长度为 $N$ 的询问序列 $\\{P_i\\}$，每个叶子在这个序列中恰好出现一次。\n\n黑恶势力会依次询问这些叶子的值，**但是**，如果他发现某一次询问是不必要的，那么他会跳过这个无意义的询问（为了帮助理解，考虑 x AND y 在我们知道 x 为 False 之后，不必知道 y 的值就可推算 x AND y 的值）。\n\n当然，邪恶总是能战胜正义，黑恶势力总能达到他的目的。但是我们可以拖慢他的节奏，你现在可以安排每个叶子的权值，使得黑恶势力询问的次数尽可能多，在此基础上，我们希望这个树的根节点取值尽量为 True。\n\n请你计算一组解，任何一种合法方案都是可以接受的。", "inputFormat": "第一行一个整数 $N$，意义如题面所示。\n\n接下来一行 $N-1$ 个整数，第 $i$ 个数代表节点 $N+i$ 上的运算符，其中 $0$ 表示 `AND`，$1$ 表示 `OR`。\n\n接下来 $2N-2$ 行，每行两个整数，描述一条边。\n\n最后一行 $N$ 个整数，表示黑恶势力的询问序列。\n\n你可以认为 $1\\sim N$ 是叶子，$N+1\\sim 2N-1$ 是非叶节点，且 $N+1$ 是根，输入数据保证每个非叶节点有两个孩子。", "outputFormat": "输出一个长度为 $N$ 的 01串 $S$，其中 $S_i$ 表示第 $i$ 个叶子的取值，$0$ 为 False, $1$ 为 True.", "hint": "**数据范围：**\n\n$\\def\\arraystretch{1.21}\n\\begin{array}{|c|c|c|}\\hline\n\\bold{\\small{子任务}}&\\textbf{score}&\\textbf{constraints}\\\\\\hline\n\\text{A}&40&\\small{树的高度不超过 50}\\\\\\hline\n\\text{B}&60&\\small{无特殊限制}\\\\\\hline\n\\end{array}$\n\n对于所有数据，$N\\le 5\\times 10^5$。\n\n对于所有数据，保证 $1\\le m<n\\le1000$，$1\\le k\\le10000$，$1\\le p_i\\le n,1\\le x_i\\le m$，$p_i$ 互不相等。\n", "locale": "zh-CN"}}}
{"pid": "P11541", "type": "P", "difficulty": 5, "samples": [["7 3\n1 2\n1 3\n3 4\n4 5\n3 6\n2 7\n5 6 4\n1 4 3\n4 6 4\n", "1 2 3 1 1 4 5\n"], ["见附件 down\\2.in", "见附件 down\\2.out "]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Code+"], "title": "[Code+#5] 路路的图", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。", "description": "路路是一个喜欢强连通分量的孩子。他非常喜欢对一张图求出其强连通分量。他认为这个操作是好的。但他并不是总有能力完成这件事。现在，路路给你一张图 $G$，希望你帮他求出这张图的每个强连通分量。由于这张图的边数特别的多，他不会直接输入这张图，而是告诉你它的构造方法：\n\n给出一棵 $n$ 个点（编号为 $1$ 到 $n$）的无根树 $T$ 和 $m$ 条指令 $(a_i,b_i,c_i)$。图 $G$ 刚开始 $n$ 个点，编号也为 $1$ 到 $n$，并且没有边。对于每一条指令 $(a_i,b_i,c_i)$，如果在树上 $b_i$ 到 $x$ 的最短路径长度（经过的边数）不超过 $c_i$，那么你会在 $G$ 中加入一条从 $a_i$ 连向 $x$ 的有向边。\n\n请你帮帮他。", "inputFormat": "第一行两个整数 $n$、$m$；\n\n接下来 $n-1$ 行，每行两个整数 $a$、$b$，表示树 $T$ 中的一条边 $(a,b)$；\n\n接下来 $m$ 行，每行三个整数 $a_i,b_i,c_i$，表示每一条指令。", "outputFormat": "你将会需要输出 $n$ 个整数。其中第 $i$ 个整数 $p_i$ 这么输出：\n\n- $p_1 = 1$；\n\n- 如果点 $i$ 和点 $1$、$2$、……、$(i-1)$ 都不在同一个强连通分量中，那么 $p_i = 1 + \\max\\{p_1,p_2,\\cdots,p_{i-1}\\}$；\n\n- 否则，假设 $i$ 和点 $j< i$ 在一个强连通分量中，并且和点 $1$、$2$、……、$(j-1)$ 都不在同一个强连通分量中，那么 $p_i = p_j$。", "hint": "**数据范围：**\n\n$\\def\\arraystretch{1.21}\n\\begin{array}{|c|c|c|}\\hline\n\\bold{\\small{子任务}}&\\textbf{score}&\\textbf{constraints}\\\\\\hline\n\\text{A}&30&c_i\\le n\\le 50,m\\le 100\\\\\\hline\n\\text{B}&30&c_i\\le50\\\\\\hline\n\\text{C}&30&\\small{无特殊限制}\\\\\\hline\n\\end{array}$\n\n对于所有数据，$n\\le 10^5,m\\le 2\\times 10^5, c_i\\le n$。\n\n**样例解释：**\n\n第一组指令往 $G$ 中加入了从 $5$ 连向每个点的有向边；\n\n第二组指令往 $G$ 中加入了从 $1$ 连向 $1,2,3,4,5,6$ 的有向边；\n\n第三组指令往 $G$ 中加入了从 $4$ 连向每个点的有向边；\n\n最后的强连通分量为 $\\{1,4,5\\}$、$\\{2\\}$、$\\{3\\}$、$\\{6\\}$、$\\{7\\}$。\n\n**注**：由于数据缺失，仅有 $9$ 组测试点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#5] 路路的图", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。", "description": "路路是一个喜欢强连通分量的孩子。他非常喜欢对一张图求出其强连通分量。他认为这个操作是好的。但他并不是总有能力完成这件事。现在，路路给你一张图 $G$，希望你帮他求出这张图的每个强连通分量。由于这张图的边数特别的多，他不会直接输入这张图，而是告诉你它的构造方法：\n\n给出一棵 $n$ 个点（编号为 $1$ 到 $n$）的无根树 $T$ 和 $m$ 条指令 $(a_i,b_i,c_i)$。图 $G$ 刚开始 $n$ 个点，编号也为 $1$ 到 $n$，并且没有边。对于每一条指令 $(a_i,b_i,c_i)$，如果在树上 $b_i$ 到 $x$ 的最短路径长度（经过的边数）不超过 $c_i$，那么你会在 $G$ 中加入一条从 $a_i$ 连向 $x$ 的有向边。\n\n请你帮帮他。", "inputFormat": "第一行两个整数 $n$、$m$；\n\n接下来 $n-1$ 行，每行两个整数 $a$、$b$，表示树 $T$ 中的一条边 $(a,b)$；\n\n接下来 $m$ 行，每行三个整数 $a_i,b_i,c_i$，表示每一条指令。", "outputFormat": "你将会需要输出 $n$ 个整数。其中第 $i$ 个整数 $p_i$ 这么输出：\n\n- $p_1 = 1$；\n\n- 如果点 $i$ 和点 $1$、$2$、……、$(i-1)$ 都不在同一个强连通分量中，那么 $p_i = 1 + \\max\\{p_1,p_2,\\cdots,p_{i-1}\\}$；\n\n- 否则，假设 $i$ 和点 $j< i$ 在一个强连通分量中，并且和点 $1$、$2$、……、$(j-1)$ 都不在同一个强连通分量中，那么 $p_i = p_j$。", "hint": "**数据范围：**\n\n$\\def\\arraystretch{1.21}\n\\begin{array}{|c|c|c|}\\hline\n\\bold{\\small{子任务}}&\\textbf{score}&\\textbf{constraints}\\\\\\hline\n\\text{A}&30&c_i\\le n\\le 50,m\\le 100\\\\\\hline\n\\text{B}&30&c_i\\le50\\\\\\hline\n\\text{C}&30&\\small{无特殊限制}\\\\\\hline\n\\end{array}$\n\n对于所有数据，$n\\le 10^5,m\\le 2\\times 10^5, c_i\\le n$。\n\n**样例解释：**\n\n第一组指令往 $G$ 中加入了从 $5$ 连向每个点的有向边；\n\n第二组指令往 $G$ 中加入了从 $1$ 连向 $1,2,3,4,5,6$ 的有向边；\n\n第三组指令往 $G$ 中加入了从 $4$ 连向每个点的有向边；\n\n最后的强连通分量为 $\\{1,4,5\\}$、$\\{2\\}$、$\\{3\\}$、$\\{6\\}$、$\\{7\\}$。\n\n**注**：由于数据缺失，仅有 $9$ 组测试点。", "locale": "zh-CN"}}}
{"pid": "P11542", "type": "P", "difficulty": 1, "samples": [["3\n3 -4 5\n", "Wo jue de OK"], ["42\n210 42 177 -351 -349 171 638 413 921 149 -929 -230 -706 73 933 741 28 -988 -885 -761 -988 383 562 -192 597 45 226 946 -12 200 -75 -819 -825 -989 617 -106 409 -430 -666 -764 -37 241\n", "Wo jue de bu tai xing\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Code+"], "title": "[Code+#5] 有人吗？", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。", "description": "企鹅高中有很多学生，自然管理起来也就非常麻烦。学校的教务处想要随时统计学校里面有多少个学生，但是他们只有很多来自保卫处的人员来往报告。每个报告的内容为进入了多少个学生，或者出去了多少个学生。所有的报告是非常混乱的，不知道到底哪个报告更早，哪个报告更晚。\n\n现在教务处的企鹅老师想要知道这些报告到底靠不靠谱。这些报告靠谱，当且仅当存在一种对这些报告的排序方式，使得随时随地学校里的学生数量不为负数。当然我们认为初始情况下，学校的学生数量为 $0$。\n\n现在你需要写份程序，自动判断这些报告靠不靠谱。", "inputFormat": "\n每个测试点只有一组数据。\n输入的第一行包含一个正整数 $n$，表示报告的总份数。\n\n接下来一行一共有 $n$ 个由空格隔开的整数，依次表示每份报告的内容。如果数值为正，则表示进入的学生数量。如果数值为负，则表示有学生出去，出去的学生数量为这个数值的绝对值。\n", "outputFormat": "如果这些报告靠谱，输出一个字符串 `Wo jue de OK`。\n\n如果这些报告不靠谱，输出一个字符串 `Wo jue de bu tai xing`。", "hint": "**数据范围：**\n\n对于所有测试点，$n \\le 10^5$，\n\n第二行所有整数的绝对值 $\\le1000$。\n\n**样例解释：**\n\n对于样例一，我们可以认为报告的先后顺序为 $3$，$2$，$1$。\n一开始学校里有 $0$ 位同学。\n得到第 $3$ 份报告后，可以推出现在有 $5$ 位同学。\n得到第 $2$ 份报告后，可以推出现在有 $1$ 位同学。\n得到第 $1$ 份报告后，可以推出现在有 $4$ 位同学。\n所以这些报告靠谱。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#5] 有人吗？", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。", "description": "企鹅高中有很多学生，自然管理起来也就非常麻烦。学校的教务处想要随时统计学校里面有多少个学生，但是他们只有很多来自保卫处的人员来往报告。每个报告的内容为进入了多少个学生，或者出去了多少个学生。所有的报告是非常混乱的，不知道到底哪个报告更早，哪个报告更晚。\n\n现在教务处的企鹅老师想要知道这些报告到底靠不靠谱。这些报告靠谱，当且仅当存在一种对这些报告的排序方式，使得随时随地学校里的学生数量不为负数。当然我们认为初始情况下，学校的学生数量为 $0$。\n\n现在你需要写份程序，自动判断这些报告靠不靠谱。", "inputFormat": "\n每个测试点只有一组数据。\n输入的第一行包含一个正整数 $n$，表示报告的总份数。\n\n接下来一行一共有 $n$ 个由空格隔开的整数，依次表示每份报告的内容。如果数值为正，则表示进入的学生数量。如果数值为负，则表示有学生出去，出去的学生数量为这个数值的绝对值。\n", "outputFormat": "如果这些报告靠谱，输出一个字符串 `Wo jue de OK`。\n\n如果这些报告不靠谱，输出一个字符串 `Wo jue de bu tai xing`。", "hint": "**数据范围：**\n\n对于所有测试点，$n \\le 10^5$，\n\n第二行所有整数的绝对值 $\\le1000$。\n\n**样例解释：**\n\n对于样例一，我们可以认为报告的先后顺序为 $3$，$2$，$1$。\n一开始学校里有 $0$ 位同学。\n得到第 $3$ 份报告后，可以推出现在有 $5$ 位同学。\n得到第 $2$ 份报告后，可以推出现在有 $1$ 位同学。\n得到第 $1$ 份报告后，可以推出现在有 $4$ 位同学。\n所以这些报告靠谱。", "locale": "zh-CN"}}}
{"pid": "P11543", "type": "P", "difficulty": 4, "samples": [["3 3\n1 0 1\n1 1 0\n0 1 0\n1 1 0\n0 1 0\n1 1 0\n", "Koyi"], ["6 6\n0 0 1 0 0 1\n1 0 1 1 0 1\n1 0 1 0 0 0\n0 1 1 0 1 0\n1 0 1 0 0 1\n1 1 1 0 1 0\n1 1 0 1 0 0\n0 1 0 0 0 0\n0 1 0 1 0 1\n1 0 0 1 1 1\n1 0 1 0 1 1\n0 0 0 1 1 1\n", "Koyi"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Code+"], "title": "[Code+#5] 我有矩阵，你有吗？", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。", "description": "企鹅豆豆手里有两个 $01$ 矩阵 $\\mathbf{A}$ 和 $\\mathbf{B}$。他可以进行两种操作：\n\n1. 选择 $\\mathbf{A}$ 矩阵的一行，然后把这一行的 $0$ 变成 $1$，把 $1$ 变成 $0$。\n2. 选择 $\\mathbf{A}$ 矩阵的一列，然后把这一列的 $0$ 变成 $1$，把 $1$ 变成 $0$。\n\n现在他想知道能不能把 $\\mathbf{A}$ 矩阵通过以上操作变成 $\\mathbf{B}$ 矩阵。保证 $\\mathbf{A}$ 矩阵和 $\\mathbf{B}$ 矩阵的大小一致。\n", "inputFormat": "每个测试点只有一组数据。\n\n输入的第一行包含两个正整数 $n$ 和 $m$，表示 $\\mathbf{A}$ 矩阵的行数。\n接下来 $n$ 行，每行 $m$ 个由空格隔开的整数，表示矩阵 $\\mathbf{A}$。保证矩阵中只有 $0$ 或者 $1$。\n接下来 $n$ 行，每行 $m$ 个由空格隔开的整数，表示矩阵 $\\mathbf{B}$。保证矩阵中只有 $0$ 或者 $1$。\n", "outputFormat": "如果矩阵 $\\mathbf{A}$ 通过以上两种操作可以变成矩阵 $\\mathbf{B}$，输出 `Koyi`，否则输出 `Budexing`。", "hint": "**数据范围：**\n\n对于所有数据，$n \\le 1000,m \\le 1000$。\n\n**样例解释：**\n\n对于样例一，依次对于第一行和第一列分别执行操作 $1$ 和操作 $2$ 即可。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#5] 我有矩阵，你有吗？", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。", "description": "企鹅豆豆手里有两个 $01$ 矩阵 $\\mathbf{A}$ 和 $\\mathbf{B}$。他可以进行两种操作：\n\n1. 选择 $\\mathbf{A}$ 矩阵的一行，然后把这一行的 $0$ 变成 $1$，把 $1$ 变成 $0$。\n2. 选择 $\\mathbf{A}$ 矩阵的一列，然后把这一列的 $0$ 变成 $1$，把 $1$ 变成 $0$。\n\n现在他想知道能不能把 $\\mathbf{A}$ 矩阵通过以上操作变成 $\\mathbf{B}$ 矩阵。保证 $\\mathbf{A}$ 矩阵和 $\\mathbf{B}$ 矩阵的大小一致。\n", "inputFormat": "每个测试点只有一组数据。\n\n输入的第一行包含两个正整数 $n$ 和 $m$，表示 $\\mathbf{A}$ 矩阵的行数。\n接下来 $n$ 行，每行 $m$ 个由空格隔开的整数，表示矩阵 $\\mathbf{A}$。保证矩阵中只有 $0$ 或者 $1$。\n接下来 $n$ 行，每行 $m$ 个由空格隔开的整数，表示矩阵 $\\mathbf{B}$。保证矩阵中只有 $0$ 或者 $1$。\n", "outputFormat": "如果矩阵 $\\mathbf{A}$ 通过以上两种操作可以变成矩阵 $\\mathbf{B}$，输出 `Koyi`，否则输出 `Budexing`。", "hint": "**数据范围：**\n\n对于所有数据，$n \\le 1000,m \\le 1000$。\n\n**样例解释：**\n\n对于样例一，依次对于第一行和第一列分别执行操作 $1$ 和操作 $2$ 即可。\n", "locale": "zh-CN"}}}
{"pid": "P11544", "type": "P", "difficulty": 6, "samples": [["2\n0 0\n0 1", "3.14159265358979326666666666666233333333"], ["3\n0 1\n3 0\n2 2\n", "11.99210886393877709133\n"], ["见附件", "见附件"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "Code+"], "title": "[Code+#5] 法师", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。", "description": "传说在 $100000$ 年前，有大量陨石即将撞击企鹅大陆。散布在企鹅大陆各个地点的企鹅法师们张开法阵保护企鹅大陆。\n\n每两个法师之间，会生成一个以这两个法师连线为直径的圆形法阵。能被保护的区域就是法阵的并。\n\n每个法师的坐标可以使用一组非负整数 $\\left(X, Y\\right)$ 表示。不存在两个法师在同一个位置。\n\n读完这个故事，企鹅豆豆想到一个问题——能被保护的区域的外侧周长有多长？\n", "inputFormat": "每个测试点只有一组数据。\n\n输入的第一行包含一个正整数 $n$，表示法师人数。\n\n接下来 $n$ 行每行两个非负整数，表示一位法师的坐标位置。保证数值不超过 $10^9$。\n", "outputFormat": "输出一个小数，表示被保护的区域的周长。", "hint": "**数据范围：**\n\n对于所有数据，$2 \\le n \\le 10^5$。\n\n**样例解释：**\n\n对于样例一，显然被保护面积是以这两点连线作为直径的圆形。根据圆的周长计算公式即可得出答案。而且你与标算的相对误差不超过 $10^{-7}$ 即被认为正确。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#5] 法师", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。", "description": "传说在 $100000$ 年前，有大量陨石即将撞击企鹅大陆。散布在企鹅大陆各个地点的企鹅法师们张开法阵保护企鹅大陆。\n\n每两个法师之间，会生成一个以这两个法师连线为直径的圆形法阵。能被保护的区域就是法阵的并。\n\n每个法师的坐标可以使用一组非负整数 $\\left(X, Y\\right)$ 表示。不存在两个法师在同一个位置。\n\n读完这个故事，企鹅豆豆想到一个问题——能被保护的区域的外侧周长有多长？\n", "inputFormat": "每个测试点只有一组数据。\n\n输入的第一行包含一个正整数 $n$，表示法师人数。\n\n接下来 $n$ 行每行两个非负整数，表示一位法师的坐标位置。保证数值不超过 $10^9$。\n", "outputFormat": "输出一个小数，表示被保护的区域的周长。", "hint": "**数据范围：**\n\n对于所有数据，$2 \\le n \\le 10^5$。\n\n**样例解释：**\n\n对于样例一，显然被保护面积是以这两点连线作为直径的圆形。根据圆的周长计算公式即可得出答案。而且你与标算的相对误差不超过 $10^{-7}$ 即被认为正确。", "locale": "zh-CN"}}}
{"pid": "P11545", "type": "P", "difficulty": 3, "samples": [["7 6\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n6\n1 1 \n1 2 \n1 3 \n2 1 2\n3 2 3 4\n1 5", "6\n5\n4\n11\n12\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Code+"], "title": "[Code+#5] 监控中心", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。", "description": "随着战争的推进，C 国已经在 D 国的 $n$ 个城市中的每个城市，都至少建立了一个情报中心。除此之外，TAC 规划了 $m$ 条双向的信息传输通道，其中第 $i$ 条形如 $(a_i,b_i)$，表示在城市 $a_i$ 和城市 $b_i$ 之间可以直接传递、交换情报。经过合理规划，任意两个城市之间都可以直接或间接地传递情报。\n\n然而 D 国的军队也不是吃素的。在军队的秘密围剿下，一些城市的情报中心可能会被歼灭而失效。如果一个城市 $c$ 的情报中心失效了，那么所有和 $c$ 有传输通道的、还未失效的城市将会无法发送情报，总而将这条错误信息报告到总部。即如果有一条形如 $(a,b)$ 的传输通道，那么就会有这样四种情况：\n\n- $a$ 和 $b$ 的情报中心同时有效，那么传输正常，没有错误信息；\n\n- $a$ 的情报中心有效而 $b$ 的情报中心被歼灭，则 $a$ 的情报中心会报告“无法给 $b$ 发送信息”的错误信息；\n\n- $b$ 的情报中心有效而 $a$ 的情报中心被歼灭，则 $b$ 的情报中心会报告“无法给 $a$ 发送信息”的错误信息；\n\n- $a$ 和 $b$ 的情报中心同时被歼灭，则两个城市都无法发出错误信息。\n\n现在，TAC 有 $q$ 个事件。在每个事件中，TAC 得到了若干条错误信息。请你根据这些错误信息，确定出**被歼灭的**的情报中心的个数。注意：不同的事件是**独立**的；并且**至少存在一个**有效的情报中心。\n", "inputFormat": "第一行两个整数 $n$，$m$，表示城市的个数和传输通道的个数；\n\n接下来 $m$ 行，每行 $(a_i,b_i)$（$1\\le i\\le m$），表示一条传输通道；\n\n接下来一行一个整数 $q$；\n\n接下来 $q$ 行，每行 $c_i+1$ 个数，其中第一个数为 $c_i$ 表示错误信息的个数，接下来有 $c_i$ 个数 $e_1,e_2,\\cdots,e_{c_i}$；其中如果 $e_i > 0$，表示 $a_{e_i}$ 因为无法给 $b_{e_i}$ 发送信息而发出错误信息，否则表示 $b_{-e_i}$ 因为无法给 $a_{-e_i}$ 发送信息而发出错误信息。", "outputFormat": "输出 $q$ 行，每行一个整数，表示每个事件**被歼灭**的情报中心的个数。", "hint": "**数据范围：**\n\n\n$\\def\\arraystretch{1.44}\n\\begin{array}{|c|c|c|}\\hline\n\\bold{\\small{子任务}}&\\textbf{score}&\\textbf{constraints}\\\\\\hline\n\\text{A}&20&1\\le N\\le 10^5,m=n-1,b_i-a_i=1,\\sum c\\le 10^6\\\\\\hline\n\\text{B}&30&1\\le N\\le10^5,m=n-1,\\sum c\\le10^6\\\\\\hline\n\\text{C}&20&m=n-1\\\\\\hline\n\\text{D}&30&\\small{无特殊限制}\\\\\\hline\n\\end{array}$\n\n对于所有数据，保证 $1\\le n\\le 10^6$，$0\\le m\\le 2.5\\times 10^6$，$1\\le q,\\sum_{i=1}^q c_i \\le 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#5] 监控中心", "background": "**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。", "description": "随着战争的推进，C 国已经在 D 国的 $n$ 个城市中的每个城市，都至少建立了一个情报中心。除此之外，TAC 规划了 $m$ 条双向的信息传输通道，其中第 $i$ 条形如 $(a_i,b_i)$，表示在城市 $a_i$ 和城市 $b_i$ 之间可以直接传递、交换情报。经过合理规划，任意两个城市之间都可以直接或间接地传递情报。\n\n然而 D 国的军队也不是吃素的。在军队的秘密围剿下，一些城市的情报中心可能会被歼灭而失效。如果一个城市 $c$ 的情报中心失效了，那么所有和 $c$ 有传输通道的、还未失效的城市将会无法发送情报，总而将这条错误信息报告到总部。即如果有一条形如 $(a,b)$ 的传输通道，那么就会有这样四种情况：\n\n- $a$ 和 $b$ 的情报中心同时有效，那么传输正常，没有错误信息；\n\n- $a$ 的情报中心有效而 $b$ 的情报中心被歼灭，则 $a$ 的情报中心会报告“无法给 $b$ 发送信息”的错误信息；\n\n- $b$ 的情报中心有效而 $a$ 的情报中心被歼灭，则 $b$ 的情报中心会报告“无法给 $a$ 发送信息”的错误信息；\n\n- $a$ 和 $b$ 的情报中心同时被歼灭，则两个城市都无法发出错误信息。\n\n现在，TAC 有 $q$ 个事件。在每个事件中，TAC 得到了若干条错误信息。请你根据这些错误信息，确定出**被歼灭的**的情报中心的个数。注意：不同的事件是**独立**的；并且**至少存在一个**有效的情报中心。\n", "inputFormat": "第一行两个整数 $n$，$m$，表示城市的个数和传输通道的个数；\n\n接下来 $m$ 行，每行 $(a_i,b_i)$（$1\\le i\\le m$），表示一条传输通道；\n\n接下来一行一个整数 $q$；\n\n接下来 $q$ 行，每行 $c_i+1$ 个数，其中第一个数为 $c_i$ 表示错误信息的个数，接下来有 $c_i$ 个数 $e_1,e_2,\\cdots,e_{c_i}$；其中如果 $e_i > 0$，表示 $a_{e_i}$ 因为无法给 $b_{e_i}$ 发送信息而发出错误信息，否则表示 $b_{-e_i}$ 因为无法给 $a_{-e_i}$ 发送信息而发出错误信息。", "outputFormat": "输出 $q$ 行，每行一个整数，表示每个事件**被歼灭**的情报中心的个数。", "hint": "**数据范围：**\n\n\n$\\def\\arraystretch{1.44}\n\\begin{array}{|c|c|c|}\\hline\n\\bold{\\small{子任务}}&\\textbf{score}&\\textbf{constraints}\\\\\\hline\n\\text{A}&20&1\\le N\\le 10^5,m=n-1,b_i-a_i=1,\\sum c\\le 10^6\\\\\\hline\n\\text{B}&30&1\\le N\\le10^5,m=n-1,\\sum c\\le10^6\\\\\\hline\n\\text{C}&20&m=n-1\\\\\\hline\n\\text{D}&30&\\small{无特殊限制}\\\\\\hline\n\\end{array}$\n\n对于所有数据，保证 $1\\le n\\le 10^6$，$0\\le m\\le 2.5\\times 10^6$，$1\\le q,\\sum_{i=1}^q c_i \\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P11546", "type": "P", "difficulty": 0, "samples": [["5\n1 1\n2 3\n1 5\n3 4\n2 6", "2\n1 1 1\n2 3 1\n1 5 2\n3 4 1\n2 6 2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2009", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2009] 糖果机器 (Day1)", "background": "", "description": "**译自 [BalticOI 2009](http://www.csc.kth.se/contest/boi/tasks.php) Day1 T2「[Candy Machine](http://www.csc.kth.se/contest/boi/candy.pdf)」**\n\n在糖果工厂中，有一台神秘的机器。它生产许多美味的糖果，每一个都与众不同。这个机器有一排输出槽，编号为 $1$ 到 $n$，糖果加工完毕就会从里面出来。没有人真正知道它的工作原理，但是在每一次产品计划之前，它会打印一个列表告诉老板每个糖果会在何时从哪个槽出来。\n\n现在，老板可以安装自动收集车在每个槽下移动，以收集掉落的糖果。当然，糖果不能掉到地上，不然就会碎裂。然而，安装自动收集车的成本极其高昂，老板想尽量少安装自动收集车。\n\n写一个程序计算接住所有糖果需要的自动收集车的数量，它应当尽可能小。此外，你的程序还需要输出每颗糖果会被哪辆收集车接住。收集车每秒可以从一个槽移动到另一个相邻的槽。在生产过程开始前，每辆收集车可以移动到他应当收集的第一个糖果的位置。", "inputFormat": "第一行，一个整数 $n$，表示将要生产的糖果的数量。\n\n以下 $n$ 行，每行两个整数 $s_i$ 和 $t_i$，表示第 $i$ 颗糖果的输出槽和输出时间。每一组 $(s_i,t_i)$ 互不相同。", "outputFormat": "第一行，一个整数 $w$，表示接住所有糖果需要的收集车的数量（尽量小）。\n收集车被编号为 $1$ 到 $w$。\n\n以下 $n$ 行描述每颗糖果会被哪辆收集车接住。\n出于此目的，这 $n$ 行每行三个整数：第 $j$ 颗糖果的输出槽 $s_j$ 和输出时间 $t_j$ 和收集车的编号 $w(j)$。表示在时刻 $t_j$ 收集车 $w(j)$ 会在槽 $s_j$ 下并接到糖果。", "hint": "### 数据范围：\n\n| 数据百分比 | 限制 |\n| :----------: | :----------: |\n| $20 \\%$ | $n \\le 85, w \\le 4$ |\n| $60 \\%$ | $n \\le 8 × 10 ^ {3}$ |\n| $100 \\%$ | $1 \\le n \\le 10 ^ {5}, 0 \\le s_i, t_i \\le 10 ^ {9}$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2009] 糖果机器 (Day1)", "background": "", "description": "**译自 [BalticOI 2009](http://www.csc.kth.se/contest/boi/tasks.php) Day1 T2「[Candy Machine](http://www.csc.kth.se/contest/boi/candy.pdf)」**\n\n在糖果工厂中，有一台神秘的机器。它生产许多美味的糖果，每一个都与众不同。这个机器有一排输出槽，编号为 $1$ 到 $n$，糖果加工完毕就会从里面出来。没有人真正知道它的工作原理，但是在每一次产品计划之前，它会打印一个列表告诉老板每个糖果会在何时从哪个槽出来。\n\n现在，老板可以安装自动收集车在每个槽下移动，以收集掉落的糖果。当然，糖果不能掉到地上，不然就会碎裂。然而，安装自动收集车的成本极其高昂，老板想尽量少安装自动收集车。\n\n写一个程序计算接住所有糖果需要的自动收集车的数量，它应当尽可能小。此外，你的程序还需要输出每颗糖果会被哪辆收集车接住。收集车每秒可以从一个槽移动到另一个相邻的槽。在生产过程开始前，每辆收集车可以移动到他应当收集的第一个糖果的位置。", "inputFormat": "第一行，一个整数 $n$，表示将要生产的糖果的数量。\n\n以下 $n$ 行，每行两个整数 $s_i$ 和 $t_i$，表示第 $i$ 颗糖果的输出槽和输出时间。每一组 $(s_i,t_i)$ 互不相同。", "outputFormat": "第一行，一个整数 $w$，表示接住所有糖果需要的收集车的数量（尽量小）。\n收集车被编号为 $1$ 到 $w$。\n\n以下 $n$ 行描述每颗糖果会被哪辆收集车接住。\n出于此目的，这 $n$ 行每行三个整数：第 $j$ 颗糖果的输出槽 $s_j$ 和输出时间 $t_j$ 和收集车的编号 $w(j)$。表示在时刻 $t_j$ 收集车 $w(j)$ 会在槽 $s_j$ 下并接到糖果。", "hint": "### 数据范围：\n\n| 数据百分比 | 限制 |\n| :----------: | :----------: |\n| $20 \\%$ | $n \\le 85, w \\le 4$ |\n| $60 \\%$ | $n \\le 8 × 10 ^ {3}$ |\n| $100 \\%$ | $1 \\le n \\le 10 ^ {5}, 0 \\le s_i, t_i \\le 10 ^ {9}$ |\n", "locale": "zh-CN"}}}
{"pid": "P11547", "type": "P", "difficulty": 0, "samples": [["100 5\n5 R\n35 L\n46 L\n75 L\n85 R", "0.5"], ["100 8\n9 L\n15 R\n41 L\n33 L\n81 R\n33 R\n100 L\n97 R", "15.500000"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2009", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2009] 地铁信号故障（暂无SPJ） (Day1)", "background": "", "description": "**译自 [BalticOI 2009](http://www.csc.kth.se/contest/boi/tasks.php)  Day1 T3「[Subway Signalling Error](http://www.csc.kth.se/contest/boi/subway.pdf)」**\n\nStockholm 城中的地铁由几条线路组成。在这个题目中，我们特别考虑其中一条线路，当出现“信号故障”时问题常发生在这里。\n\n一条线路可以看做两条平行的铁轨，他们在端点处连接。在上部的铁轨中，地铁由右到左行驶，且在下部的铁轨中，地铁由左到右行驶。当一列地铁到达铁轨的端点，它会切换到另一条铁轨并更改方向，这个过程在瞬间内完成。\n\n正常情况下，交通流是连续的且地铁匀速移动（$1$ 距离单位每时间单位）。同时，地铁是均匀分布的，即地铁将定时经过铁轨上的每个地点。你可以忽略地铁接客的时间。\n\n由于信号故障，现在地铁沿着线路随机分布。作为交通调度员，你的任务是尽快还原地铁为均匀分布。写一个程序，对于给定的地铁的位置，问何时能还原。你可以使地铁在任意地点暂停或是改变方向（两项可以同时执行）。如果一列地铁改变了方向，他将切换到另一条铁路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3g40mnka.png)\n\n图 $1$：两条铁轨的长度都是 $100$。上例中，地铁分别位于 $5$（朝右）,$35$（左）,$46$（左）,$75$（左）及 $85$（右）。一个可行的方案是：待位于 $46$ 的地铁向左移动一个单位后，使它改变方向。这用了一个单位的时间。然而，这并不是最优解，详见样例 $1$。", "inputFormat": "第一行，两个整数 $m$ 和 $n$，分别表示铁轨的长度和地铁的数量。\n\n以下 $n$ 行，每行表示一列地铁，为一个整数 $x_i$ 表示位置和一个字符表示方向（$L$ 表示左，$R$ 表示右）。", "outputFormat": "输出使地铁均匀分布的最短时间。最大误差为 $10^{-6}$。", "hint": "| 数据百分比 | 限制 |\n| :----------: | :----------: |\n| $50 \\%$ | $n \\le 200$ |\n| $100 \\%$ | $100 \\le m \\le 10 ^ {8}, 1 \\le n \\le 10 ^ {6}, 0 \\le x_i \\le m$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2009] 地铁信号故障（暂无SPJ） (Day1)", "background": "", "description": "**译自 [BalticOI 2009](http://www.csc.kth.se/contest/boi/tasks.php)  Day1 T3「[Subway Signalling Error](http://www.csc.kth.se/contest/boi/subway.pdf)」**\n\nStockholm 城中的地铁由几条线路组成。在这个题目中，我们特别考虑其中一条线路，当出现“信号故障”时问题常发生在这里。\n\n一条线路可以看做两条平行的铁轨，他们在端点处连接。在上部的铁轨中，地铁由右到左行驶，且在下部的铁轨中，地铁由左到右行驶。当一列地铁到达铁轨的端点，它会切换到另一条铁轨并更改方向，这个过程在瞬间内完成。\n\n正常情况下，交通流是连续的且地铁匀速移动（$1$ 距离单位每时间单位）。同时，地铁是均匀分布的，即地铁将定时经过铁轨上的每个地点。你可以忽略地铁接客的时间。\n\n由于信号故障，现在地铁沿着线路随机分布。作为交通调度员，你的任务是尽快还原地铁为均匀分布。写一个程序，对于给定的地铁的位置，问何时能还原。你可以使地铁在任意地点暂停或是改变方向（两项可以同时执行）。如果一列地铁改变了方向，他将切换到另一条铁路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3g40mnka.png)\n\n图 $1$：两条铁轨的长度都是 $100$。上例中，地铁分别位于 $5$（朝右）,$35$（左）,$46$（左）,$75$（左）及 $85$（右）。一个可行的方案是：待位于 $46$ 的地铁向左移动一个单位后，使它改变方向。这用了一个单位的时间。然而，这并不是最优解，详见样例 $1$。", "inputFormat": "第一行，两个整数 $m$ 和 $n$，分别表示铁轨的长度和地铁的数量。\n\n以下 $n$ 行，每行表示一列地铁，为一个整数 $x_i$ 表示位置和一个字符表示方向（$L$ 表示左，$R$ 表示右）。", "outputFormat": "输出使地铁均匀分布的最短时间。最大误差为 $10^{-6}$。", "hint": "| 数据百分比 | 限制 |\n| :----------: | :----------: |\n| $50 \\%$ | $n \\le 200$ |\n| $100 \\%$ | $100 \\le m \\le 10 ^ {8}, 1 \\le n \\le 10 ^ {6}, 0 \\le x_i \\le m$ |\n", "locale": "zh-CN"}}}
{"pid": "P11548", "type": "P", "difficulty": 6, "samples": [["8\n-2 3\n-2 -1\n0 3\n0 -1\n1 -1\n2 1\n-3 1\n-2 1", "10"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["计算几何", "2009", "枚举", "排序", "BalticOI（波罗的海）"], "title": "[BalticOI 2009] 矩形 (Day2)", "background": "", "description": "**译自 [BalticOI 2009](http://www.csc.kth.se/contest/boi/tasks.php) Day2 T1「[Rectangle](https://www.csc.kth.se/contest/boi/rectangle.pdf)」**\n\n你被给定 $n$ 个在平面坐标上的点。\n\n写一个程序计算出一个最大的矩形区域，使它的每一个顶点都是给定的点之一。你可以假设至少存在一个这样的区域。", "inputFormat": "第一行，一个整数 $n$，表示点的数量。\n\n以下 $n$ 行，每行两个整数，表示一个点的坐标。\n坐标值在 $-10^8$ 与 $10^8$ 之间。\n\n没有两个点位于同一个坐标。", "outputFormat": "一个整数，表示最大的矩形区域面积。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/x481b6hi.png)\n\n### 数据范围：\n\n| 数据百分比 | 限制 |\n| :----------: | :----------: |\n| $20\\%$ | $n \\le 500$ |\n| $100\\%$ | $4 \\le n \\le 1500$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2009] 矩形 (Day2)", "background": "", "description": "**译自 [BalticOI 2009](http://www.csc.kth.se/contest/boi/tasks.php) Day2 T1「[Rectangle](https://www.csc.kth.se/contest/boi/rectangle.pdf)」**\n\n你被给定 $n$ 个在平面坐标上的点。\n\n写一个程序计算出一个最大的矩形区域，使它的每一个顶点都是给定的点之一。你可以假设至少存在一个这样的区域。", "inputFormat": "第一行，一个整数 $n$，表示点的数量。\n\n以下 $n$ 行，每行两个整数，表示一个点的坐标。\n坐标值在 $-10^8$ 与 $10^8$ 之间。\n\n没有两个点位于同一个坐标。", "outputFormat": "一个整数，表示最大的矩形区域面积。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/x481b6hi.png)\n\n### 数据范围：\n\n| 数据百分比 | 限制 |\n| :----------: | :----------: |\n| $20\\%$ | $n \\le 500$ |\n| $100\\%$ | $4 \\le n \\le 1500$ |\n", "locale": "zh-CN"}}}
{"pid": "P11549", "type": "P", "difficulty": 0, "samples": [["5\n1 2 3 2\n4 5 1 1\n3 1 4 2", "1"], ["6\n1 4 2 1\n2 4 5 2\n6 2 5 3\n3 6 5 1", "0"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2009", "BalticOI（波罗的海）"], "title": "[BalticOI 2009] 三角形划分 (Day2)", "background": "", "description": "**译自 [BalticOI 2009](http://www.csc.kth.se/contest/boi/tasks.php) Day2 T2[「Triangulation」](http://www.csc.kth.se/contest/boi/trian.pdf)**\n\n一个多边形的三角形划分是一个所有以该多边形的三个顶点组成的三角形的集合。这些三角形不能重叠且要覆盖整个多边形。\n\n我们定义一次多边形切割以一条直线将一个多边形分为两部分。\n\n给定一个进行过三角形划分的凸多边形，每个三角形都有一个颜色。请找到保证**没有**两个相同颜色的三角形出现在不同的部分中的情况下最大的切割数量。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ph3k8uqt.png)", "inputFormat": "第一行，一个整数 $n$，表示多边形的顶点个数。\n顶点编号为 $1$ 到 $n$。\n\n以下 $n-2$ 行，每行四个整数 $a$, $b$, $c$ 和 $d$ $(1 \\le a,b,c,d \\le n)$ ，表示一个三角形的顶点为 $a$, $b$, $c$ 且它的颜色为 $d$。\n$a$, $b$, $c$ 为三个不同的顶点。\n\n保证三角形划分无误，且每个三角形都有色。\n", "outputFormat": "一行，满足上述要求的最大的切割数量。", "hint": "### 数据范围：\n\n| 数据百分比 | 限制 |\n| :----------: | :----------: |\n| $50\\%$ | $n \\le 5000$ |\n| $100\\%$ | $3 \\le n \\le 10^{5}$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2009] 三角形划分 (Day2)", "background": "", "description": "**译自 [BalticOI 2009](http://www.csc.kth.se/contest/boi/tasks.php) Day2 T2[「Triangulation」](http://www.csc.kth.se/contest/boi/trian.pdf)**\n\n一个多边形的三角形划分是一个所有以该多边形的三个顶点组成的三角形的集合。这些三角形不能重叠且要覆盖整个多边形。\n\n我们定义一次多边形切割以一条直线将一个多边形分为两部分。\n\n给定一个进行过三角形划分的凸多边形，每个三角形都有一个颜色。请找到保证**没有**两个相同颜色的三角形出现在不同的部分中的情况下最大的切割数量。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ph3k8uqt.png)", "inputFormat": "第一行，一个整数 $n$，表示多边形的顶点个数。\n顶点编号为 $1$ 到 $n$。\n\n以下 $n-2$ 行，每行四个整数 $a$, $b$, $c$ 和 $d$ $(1 \\le a,b,c,d \\le n)$ ，表示一个三角形的顶点为 $a$, $b$, $c$ 且它的颜色为 $d$。\n$a$, $b$, $c$ 为三个不同的顶点。\n\n保证三角形划分无误，且每个三角形都有色。\n", "outputFormat": "一行，满足上述要求的最大的切割数量。", "hint": "### 数据范围：\n\n| 数据百分比 | 限制 |\n| :----------: | :----------: |\n| $50\\%$ | $n \\le 5000$ |\n| $100\\%$ | $3 \\le n \\le 10^{5}$ |\n", "locale": "zh-CN"}}}
{"pid": "P11550", "type": "P", "difficulty": 0, "samples": [["3 2 5 24\nPNNNN\nPNNNN\nNPPNP\nPNNNP\nNNNNP\nPPNNP", "24"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2009", "BalticOI（波罗的海）"], "title": "[BalticOI 2009] 纪念碑 (Day2)", "background": "", "description": "**译自 [BalticOI 2009](http://www.csc.kth.se/contest/boi/tasks.php) Day2 T3[「Monument」](http://www.csc.kth.se/contest/boi/monument.pdf)**\n\n一位来自瑞典的~~暴发户~~百万富翁想要为她的家人建造一座纪念碑。所有可以追溯到的她的祖先（以及将来的后代）的名字都会被刻在纪念碑上。纪念碑是一个矩形块，顶部和底部是 $a \\times a$ 的正方形，高度为 $b$。$a,b$ 的值应该使四个侧面有尽可能多的空间以适应尽可能多的文字。\n\n这座纪念碑将从一个特别的 $p \\times q \\times r$ 的矩形石块中切割出来，这个石块是由普通石块结晶化而来。也就是说，我们可以把石头看做是由 $1 \\times 1 \\times 1$ 的单位块组成的，最后的纪念碑也将由这样的单位块组成。原石只能沿着这些单位块之间垂直于 $x,y$ 或 $z$ 轴切割。\n\n原石产生了一些微孔，为空单位块。纪念碑需要精致，所以不允许包含任何微孔（空单位块）。你被给定原石的三维图，它描述了哪些单位块是空的，哪些是正常的。\n\n你的任务是找到满足以下条件的纪念碑：\n\n1. 它可以从原石中切割出来；\n\n2. 纪念碑的四个侧面的面积，即 $4ab$ 要尽量大。\n", "inputFormat": "第一行，三个正整数 $p,q$ 和 $r$。\n\n以下 $pq$ 行，每行 $r$ 个字符（和一个换行符，没有多余空格）。\n每个字符都是 $\\texttt{N}$（正常） 或 $\\texttt P$（空）。\n第 $1+(yp+x-p)$ 行的第 $z$ 个字符对应原石的单位块 $(x,y,z)$，\n", "outputFormat": "一行，$4ab$ 的最大值。", "hint": "$1 \\le x \\le p,1 \\le y \\le q,1 \\le z \\le r$。\n\n$0\\le p,q,r\\le 150$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2009] 纪念碑 (Day2)", "background": "", "description": "**译自 [BalticOI 2009](http://www.csc.kth.se/contest/boi/tasks.php) Day2 T3[「Monument」](http://www.csc.kth.se/contest/boi/monument.pdf)**\n\n一位来自瑞典的~~暴发户~~百万富翁想要为她的家人建造一座纪念碑。所有可以追溯到的她的祖先（以及将来的后代）的名字都会被刻在纪念碑上。纪念碑是一个矩形块，顶部和底部是 $a \\times a$ 的正方形，高度为 $b$。$a,b$ 的值应该使四个侧面有尽可能多的空间以适应尽可能多的文字。\n\n这座纪念碑将从一个特别的 $p \\times q \\times r$ 的矩形石块中切割出来，这个石块是由普通石块结晶化而来。也就是说，我们可以把石头看做是由 $1 \\times 1 \\times 1$ 的单位块组成的，最后的纪念碑也将由这样的单位块组成。原石只能沿着这些单位块之间垂直于 $x,y$ 或 $z$ 轴切割。\n\n原石产生了一些微孔，为空单位块。纪念碑需要精致，所以不允许包含任何微孔（空单位块）。你被给定原石的三维图，它描述了哪些单位块是空的，哪些是正常的。\n\n你的任务是找到满足以下条件的纪念碑：\n\n1. 它可以从原石中切割出来；\n\n2. 纪念碑的四个侧面的面积，即 $4ab$ 要尽量大。\n", "inputFormat": "第一行，三个正整数 $p,q$ 和 $r$。\n\n以下 $pq$ 行，每行 $r$ 个字符（和一个换行符，没有多余空格）。\n每个字符都是 $\\texttt{N}$（正常） 或 $\\texttt P$（空）。\n第 $1+(yp+x-p)$ 行的第 $z$ 个字符对应原石的单位块 $(x,y,z)$，\n", "outputFormat": "一行，$4ab$ 的最大值。", "hint": "$1 \\le x \\le p,1 \\le y \\le q,1 \\le z \\le r$。\n\n$0\\le p,q,r\\le 150$。", "locale": "zh-CN"}}}
{"pid": "P11551", "type": "P", "difficulty": 2, "samples": [["5\n1 3 4 2 5", "1 3 3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "ROIR（俄罗斯）"], "title": "[ROIR 2016] 奖品 (Day 1)", "background": "翻译自 [ROIR 2016 D1T1](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day1.pdf)。", "description": "Petya 参加了一个比赛，在这个比赛中将会抽取 $n$ 个奖品。奖品编号从 $1$ 到 $n$。\n\n根据比赛结果，参赛者可以获得 $2$ 到 $n$ 之间的分数。如果参赛者获得了 $k$ 分，那么他将从编号 $1$ 到 $k$ 的奖品中获得一个奖品。比赛主持人在参赛者选择奖品之前，会从奖品列表中删除一个奖品。然后，参赛者可以从剩下的 $k - 1$ 个奖品中选择一个。\n\nPetya 知道所有奖品的价值，第 $i$ 个奖品的价值为 $a_i$。\n\n对于每个 $2\\le k\\le n$，你需要求出如果 Petya 获得了 $k$ 分，他一定能得到的最大奖品价值是多少。", "inputFormat": "第一行输入一个整数 $n$（$2 \\le n \\le 100000$）。\n\n第二行输入 $n$ 个整数 $a_1,a_2,\\dots,a_n$（$1\\le a_i\\le10^9$）。", "outputFormat": "输出一行 $n-1$ 个整数，其中第 $k-1$ 个整数表示如果 Petya 获得了 $k$ 分，他一定能得到的最大奖品价值。", "hint": "| 子任务 | 是否捆绑 | 分值 | $1\\le n\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $24$ | $100$ |\n| $2$ | 是 | $24$ | $5000$ |\n| $3$ | 是 | $52$ | $100000$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2016] 奖品 (Day 1)", "background": "翻译自 [ROIR 2016 D1T1](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day1.pdf)。", "description": "Petya 参加了一个比赛，在这个比赛中将会抽取 $n$ 个奖品。奖品编号从 $1$ 到 $n$。\n\n根据比赛结果，参赛者可以获得 $2$ 到 $n$ 之间的分数。如果参赛者获得了 $k$ 分，那么他将从编号 $1$ 到 $k$ 的奖品中获得一个奖品。比赛主持人在参赛者选择奖品之前，会从奖品列表中删除一个奖品。然后，参赛者可以从剩下的 $k - 1$ 个奖品中选择一个。\n\nPetya 知道所有奖品的价值，第 $i$ 个奖品的价值为 $a_i$。\n\n对于每个 $2\\le k\\le n$，你需要求出如果 Petya 获得了 $k$ 分，他一定能得到的最大奖品价值是多少。", "inputFormat": "第一行输入一个整数 $n$（$2 \\le n \\le 100000$）。\n\n第二行输入 $n$ 个整数 $a_1,a_2,\\dots,a_n$（$1\\le a_i\\le10^9$）。", "outputFormat": "输出一行 $n-1$ 个整数，其中第 $k-1$ 个整数表示如果 Petya 获得了 $k$ 分，他一定能得到的最大奖品价值。", "hint": "| 子任务 | 是否捆绑 | 分值 | $1\\le n\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $24$ | $100$ |\n| $2$ | 是 | $24$ | $5000$ |\n| $3$ | 是 | $52$ | $100000$ |", "locale": "zh-CN"}}}
{"pid": "P11552", "type": "P", "difficulty": 3, "samples": [["11 2 3 21 25", "2"], ["1 5 5 6 6", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "ROIR（俄罗斯）"], "title": "[ROIR 2016] 太空移民 (Day 1)", "background": "翻译自 [ROIR 2016 D1T2](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day1.pdf)。", "description": "为了开发火星，必须建立一个研究基地。基地应该由 $n$ 个相同的矩形模块组成。每个模块都是一个居住舱，其大小为 $a \\times b$。\n\n为了提高模块的可靠性，工程师们可以在每个模块周围添加一层额外的保护层。该保护层的厚度应为一个整数，并且所有模块的保护层厚度必须相同。保护层厚度为 $d$ 的模块，其大小为 $(a + 2d) \\times (b + 2d)$。\n\n所有模块必须放置在一个提前准备好的矩形区域内，区域的大小为 $w \\times h$。所有模块的边要与这个矩形区域的边平行，且所有模块的朝向必须一致（即，必须全部横着放或全部竖着放）。\n\n你需要求出可以给每个模块添加的最大保护层厚度是多少。", "inputFormat": "输入五个数 $n,a,b,w,h$（$1\\le n,a,b,w,h\\le10^{18}$），用空格隔开。", "outputFormat": "输出一个整数，表示可以为每个模块添加的最大保护层厚度。如果无法添加保护层，则可以添加的厚度为 $0$。", "hint": "### 样例解释\n\n样例 $1$ 图示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6b9dfczt.png)\n\n### 数据范围\n\n| 子任务 | 是否捆绑 | 分值 | $1\\le n\\le$ | $1\\le a,b,w,h\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $26$ | $1000$ | $1000$ |\n| $2$ | 是 | $23$ | $1000$ | $10^9$ |\n| $3$ | 否 | $24$ | $10^9$ | $10^{18}$ |\n| $4$ | 否 | $27$ | $10^{18}$ | $10^{18}$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2016] 太空移民 (Day 1)", "background": "翻译自 [ROIR 2016 D1T2](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day1.pdf)。", "description": "为了开发火星，必须建立一个研究基地。基地应该由 $n$ 个相同的矩形模块组成。每个模块都是一个居住舱，其大小为 $a \\times b$。\n\n为了提高模块的可靠性，工程师们可以在每个模块周围添加一层额外的保护层。该保护层的厚度应为一个整数，并且所有模块的保护层厚度必须相同。保护层厚度为 $d$ 的模块，其大小为 $(a + 2d) \\times (b + 2d)$。\n\n所有模块必须放置在一个提前准备好的矩形区域内，区域的大小为 $w \\times h$。所有模块的边要与这个矩形区域的边平行，且所有模块的朝向必须一致（即，必须全部横着放或全部竖着放）。\n\n你需要求出可以给每个模块添加的最大保护层厚度是多少。", "inputFormat": "输入五个数 $n,a,b,w,h$（$1\\le n,a,b,w,h\\le10^{18}$），用空格隔开。", "outputFormat": "输出一个整数，表示可以为每个模块添加的最大保护层厚度。如果无法添加保护层，则可以添加的厚度为 $0$。", "hint": "### 样例解释\n\n样例 $1$ 图示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6b9dfczt.png)\n\n### 数据范围\n\n| 子任务 | 是否捆绑 | 分值 | $1\\le n\\le$ | $1\\le a,b,w,h\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $26$ | $1000$ | $1000$ |\n| $2$ | 是 | $23$ | $1000$ | $10^9$ |\n| $3$ | 否 | $24$ | $10^9$ | $10^{18}$ |\n| $4$ | 否 | $27$ | $10^{18}$ | $10^{18}$ |", "locale": "zh-CN"}}}
{"pid": "P11553", "type": "P", "difficulty": 4, "samples": [["abba", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "ROIR（俄罗斯）"], "title": "[ROIR 2016] 奇怪的字符串 (Day 1)", "background": "翻译自 [ROIR 2016 D1T3](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day1.pdf)。\n\n注意：本题官方数据行末存在 `\\r`。", "description": "考虑一个由小写字母组成的字符串 $ s $，如 $\\texttt{abba}$。\n- 记 $ W(s) $ 为一个集合，包含了字符串 $ s $ 所有的非空子串。例如，$ W(\\texttt{abba}) = \\{\\texttt{a}, \\texttt{b}, \\texttt{ab}, \\texttt{ba}, \\texttt{bb}, \\texttt{abb}, \\texttt{bba}, \\texttt{abba}\\} $。\n- 记 $ Y(s) $ 为一个集合，包含了字符串 $ s $ 所有的非空子序列。由于任何子串都是子序列，因此 $ Y(s) $ 集合包含了 $ W(s) $，但它还可以包含其他的字符串。例如，$ Y(\\texttt{abba}) = W(\\texttt{abba}) \\cup \\{\\texttt{aa}, \\texttt{aba}\\} $。\n\n如果一个字符串 $ s $ 满足 $ W(s) = Y(s) $，那么我们称它是**奇怪的**。例如，字符串 $\\texttt{abba}$ 不是奇怪的，而字符串 $\\texttt{abb}$ 是奇怪的，因为对于 $\\texttt{abb}$，有 $ W(\\texttt{abb}) = Y(\\texttt{abb}) = \\{\\texttt{a}, \\texttt{b}, \\texttt{ab}, \\texttt{bb}, \\texttt{abb}\\} $。\n\n我们称字符串 $s$ 的**奇异度**为它所有不同的奇怪子串的数量，即，$W(s)$ 中奇怪的字符串的数量。例如，字符串 $\\texttt{abba}$ 的奇异度为 $7$，因为它的所有除它本身以外的子串都是奇怪的。\n\n给定一个字符串 $s$，你要求出它的奇异度。", "inputFormat": "输入一个由小写字母组成的字符串 $s$。", "outputFormat": "输出 $s$ 的奇异度。", "hint": "| 子任务 | 是否捆绑 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $29$ | $\\vert s\\vert\\le50$ 且 $s$ 只含 $\\tt a$ 和 $\\tt b$ |\n| $2$ | 是 | $12$ | $\\vert s\\vert\\le50$ |\n| $3$ | 是 | $25$ | $\\vert s\\vert\\le1000$ |\n| $4$ | 是 | $34$ | $\\vert s\\vert\\le200000$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2016] 奇怪的字符串 (Day 1)", "background": "翻译自 [ROIR 2016 D1T3](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day1.pdf)。\n\n注意：本题官方数据行末存在 `\\r`。", "description": "考虑一个由小写字母组成的字符串 $ s $，如 $\\texttt{abba}$。\n- 记 $ W(s) $ 为一个集合，包含了字符串 $ s $ 所有的非空子串。例如，$ W(\\texttt{abba}) = \\{\\texttt{a}, \\texttt{b}, \\texttt{ab}, \\texttt{ba}, \\texttt{bb}, \\texttt{abb}, \\texttt{bba}, \\texttt{abba}\\} $。\n- 记 $ Y(s) $ 为一个集合，包含了字符串 $ s $ 所有的非空子序列。由于任何子串都是子序列，因此 $ Y(s) $ 集合包含了 $ W(s) $，但它还可以包含其他的字符串。例如，$ Y(\\texttt{abba}) = W(\\texttt{abba}) \\cup \\{\\texttt{aa}, \\texttt{aba}\\} $。\n\n如果一个字符串 $ s $ 满足 $ W(s) = Y(s) $，那么我们称它是**奇怪的**。例如，字符串 $\\texttt{abba}$ 不是奇怪的，而字符串 $\\texttt{abb}$ 是奇怪的，因为对于 $\\texttt{abb}$，有 $ W(\\texttt{abb}) = Y(\\texttt{abb}) = \\{\\texttt{a}, \\texttt{b}, \\texttt{ab}, \\texttt{bb}, \\texttt{abb}\\} $。\n\n我们称字符串 $s$ 的**奇异度**为它所有不同的奇怪子串的数量，即，$W(s)$ 中奇怪的字符串的数量。例如，字符串 $\\texttt{abba}$ 的奇异度为 $7$，因为它的所有除它本身以外的子串都是奇怪的。\n\n给定一个字符串 $s$，你要求出它的奇异度。", "inputFormat": "输入一个由小写字母组成的字符串 $s$。", "outputFormat": "输出 $s$ 的奇异度。", "hint": "| 子任务 | 是否捆绑 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $29$ | $\\vert s\\vert\\le50$ 且 $s$ 只含 $\\tt a$ 和 $\\tt b$ |\n| $2$ | 是 | $12$ | $\\vert s\\vert\\le50$ |\n| $3$ | 是 | $25$ | $\\vert s\\vert\\le1000$ |\n| $4$ | 是 | $34$ | $\\vert s\\vert\\le200000$ |", "locale": "zh-CN"}}}
{"pid": "P11554", "type": "P", "difficulty": 5, "samples": [["5 4 3\n1 4 1\n2 5 3\n2 3 2\n4 5 2\n3\n1 5\n3 5\n4 5", "-1\n2\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2016] 假期旅行 (Day 1)", "background": "翻译自 [ROIR 2016 D1T4](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day1.pdf)。", "description": "某地铁路是一条直线，沿线有 $n$ 个车站。我们称从某个车站到下一个车站之间的路段为一个区段。\n\n一列火车从车站 $1$ 开始，最终到达车站 $n$，在每个车站都会停靠。火车上有 $k$ 个座位，座位编号从 $1$ 到 $k$。每张火车票上由三个数字 $s, t, a$，表示持有这张票的乘客允许从车站 $s$ 到车站 $t$，坐在编号为 $a$ 的座位上。\n\n暑假的一天，Vasya 计划乘坐火车从一个车站到另一个车站。他发现当天已经售出了 $m$ 张票，并且可能在他感兴趣的车站之间已经没有空座位。直接从某个车站到另一个车站的票只能在每个区段的对应座位都空闲时购买。\n\nVasya 想到，有时即便如此，他仍然可以通过购买几张票，在某些中途车站换座位再继续乘坐。因此，他希望购买最少的票数，让他在每个区段都有座位。\n\nVasya 还没有完全确定下来要从哪个车站出发，也没有决定最终到达哪个车站。他记录了 $q$ 个出行方案，对于每个方案，他想知道如果选择这个方案，最少需要购买多少张票才能完成这次旅行。", "inputFormat": "第一行输入三个整数 $n,m,k$（$2 \\leq n \\leq 200000$，$0 \\leq m \\leq 200000$，$1 \\leq k \\leq 200000$），分别表示车站的数量、已经售出的票的数量，以及火车上的座位数。\n\n接下来 $m$ 行，每行输入三个整数 $s_i,t_i,a_i$，表示一张已售出的票的起始车站 $s_i$，目的车站 $t_i$ 和座位号 $a_i$ （$1 \\leq s_i < t_i \\leq n$，$1 \\leq a_i \\leq k$）。保证在任意区段，每个座位最多只被一张票占用。\n\n接下来一行输入一个整数 $q$，表示查询的数量（$1 \\leq q \\leq 200000$）。\n\n接下来 $q$ 行，每行输入两个整数 $f_j,d_j$（$1 \\leq f_j < d_j \\leq n$），分别表示 Vasya 想要出发的车站和目的地车站。", "outputFormat": "输出共 $q$ 行。对于每个查询，输出 Vasya 完成这次旅行所需的最少票数。如果无法完成旅行，输出 `-1`。", "hint": "### 样例解释\n\n- 在车站 $2$ 到车站 $3$ 的区段，所有座位都已经被占用，因此从车站 $1$ 到车站 $5$ 的旅程无法进行。\n- 从车站 $3$ 到车站 $5$，需要购买两张票：从车站 $3$ 到车站 $4$ 坐座位 $2$，从车站 $4$ 到车站 $5$ 坐座位 $1$。\n- 从车站 $4$ 到车站 $5$ 只需要一张座位 $1$ 的票。\n\n### 数据范围\n\n| 子任务 | 是否捆绑 | 分值 | $n,m,k\\le$ | $q\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $33$ | $100$ | $1$ |\n| $2$ | 是 | $30$ | $200000$ | $1$ |\n| $3$ | 是 | $37$ | $200000$ | $200000$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2016] 假期旅行 (Day 1)", "background": "翻译自 [ROIR 2016 D1T4](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day1.pdf)。", "description": "某地铁路是一条直线，沿线有 $n$ 个车站。我们称从某个车站到下一个车站之间的路段为一个区段。\n\n一列火车从车站 $1$ 开始，最终到达车站 $n$，在每个车站都会停靠。火车上有 $k$ 个座位，座位编号从 $1$ 到 $k$。每张火车票上由三个数字 $s, t, a$，表示持有这张票的乘客允许从车站 $s$ 到车站 $t$，坐在编号为 $a$ 的座位上。\n\n暑假的一天，Vasya 计划乘坐火车从一个车站到另一个车站。他发现当天已经售出了 $m$ 张票，并且可能在他感兴趣的车站之间已经没有空座位。直接从某个车站到另一个车站的票只能在每个区段的对应座位都空闲时购买。\n\nVasya 想到，有时即便如此，他仍然可以通过购买几张票，在某些中途车站换座位再继续乘坐。因此，他希望购买最少的票数，让他在每个区段都有座位。\n\nVasya 还没有完全确定下来要从哪个车站出发，也没有决定最终到达哪个车站。他记录了 $q$ 个出行方案，对于每个方案，他想知道如果选择这个方案，最少需要购买多少张票才能完成这次旅行。", "inputFormat": "第一行输入三个整数 $n,m,k$（$2 \\leq n \\leq 200000$，$0 \\leq m \\leq 200000$，$1 \\leq k \\leq 200000$），分别表示车站的数量、已经售出的票的数量，以及火车上的座位数。\n\n接下来 $m$ 行，每行输入三个整数 $s_i,t_i,a_i$，表示一张已售出的票的起始车站 $s_i$，目的车站 $t_i$ 和座位号 $a_i$ （$1 \\leq s_i < t_i \\leq n$，$1 \\leq a_i \\leq k$）。保证在任意区段，每个座位最多只被一张票占用。\n\n接下来一行输入一个整数 $q$，表示查询的数量（$1 \\leq q \\leq 200000$）。\n\n接下来 $q$ 行，每行输入两个整数 $f_j,d_j$（$1 \\leq f_j < d_j \\leq n$），分别表示 Vasya 想要出发的车站和目的地车站。", "outputFormat": "输出共 $q$ 行。对于每个查询，输出 Vasya 完成这次旅行所需的最少票数。如果无法完成旅行，输出 `-1`。", "hint": "### 样例解释\n\n- 在车站 $2$ 到车站 $3$ 的区段，所有座位都已经被占用，因此从车站 $1$ 到车站 $5$ 的旅程无法进行。\n- 从车站 $3$ 到车站 $5$，需要购买两张票：从车站 $3$ 到车站 $4$ 坐座位 $2$，从车站 $4$ 到车站 $5$ 坐座位 $1$。\n- 从车站 $4$ 到车站 $5$ 只需要一张座位 $1$ 的票。\n\n### 数据范围\n\n| 子任务 | 是否捆绑 | 分值 | $n,m,k\\le$ | $q\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $33$ | $100$ | $1$ |\n| $2$ | 是 | $30$ | $200000$ | $1$ |\n| $3$ | 是 | $37$ | $200000$ | $200000$ |", "locale": "zh-CN"}}}
{"pid": "P11555", "type": "P", "difficulty": 2, "samples": [["6", "1 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2016] 三子问题 (Day 2)", "background": "翻译自 [ROIR 2016 D2T1](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day2.pdf)。", "description": "在王国的领地上，有一条长为 $n$ 公里的直路，道路一侧是一个巨大的森林。国王十分关注自然保护，决定将这片森林设为自然保护区。但是，国王的三个儿子表示反对，因为他们希望能继承这些土地。\n\n国王决定，森林保护区的土地不能继承给儿子。在制定遗嘱时，国王希望分配的土地满足以下条件：\n- 每块土地应该是一个正方形，且边长是一个正整数。每个正方形的一边应当与道路平行。假设这三块土地的大小分别为 $a \\times a$、$b \\times b$ 和 $c \\times c$。\n- 这些正方形的边长之和应该刚好覆盖整条道路，也就是说，$a + b + c = n$。\n- 小儿子的土地应该小于二儿子的土地，二儿子的土地应该小于大儿子的土地，也就是说，$a < b < c$。\n- 所有区域的总面积 $a^2 + b^2 + c^2$ 应该尽量最小。\n\n给定道路的长度 $n$，你需要求出分配给国王三个儿子的土地的边长。", "inputFormat": "输入一个整数 $n$（$6 \\leq n \\leq 10^9$）。", "outputFormat": "输出三个数 $a,b,c$。如果有多个最优解，可以输出任意一个。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9s4tycwv.png)\n\n### 数据范围\n\n| 子任务 | 是否捆绑 | 分值 | $n\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $25$ | $50$ |\n| $2$ | 是 | $25$ | $2000$ |\n| $3$ | 是 | $25$ | $40000$ |\n| $4$ | 是 | $25$ | $10^9$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2016] 三子问题 (Day 2)", "background": "翻译自 [ROIR 2016 D2T1](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day2.pdf)。", "description": "在王国的领地上，有一条长为 $n$ 公里的直路，道路一侧是一个巨大的森林。国王十分关注自然保护，决定将这片森林设为自然保护区。但是，国王的三个儿子表示反对，因为他们希望能继承这些土地。\n\n国王决定，森林保护区的土地不能继承给儿子。在制定遗嘱时，国王希望分配的土地满足以下条件：\n- 每块土地应该是一个正方形，且边长是一个正整数。每个正方形的一边应当与道路平行。假设这三块土地的大小分别为 $a \\times a$、$b \\times b$ 和 $c \\times c$。\n- 这些正方形的边长之和应该刚好覆盖整条道路，也就是说，$a + b + c = n$。\n- 小儿子的土地应该小于二儿子的土地，二儿子的土地应该小于大儿子的土地，也就是说，$a < b < c$。\n- 所有区域的总面积 $a^2 + b^2 + c^2$ 应该尽量最小。\n\n给定道路的长度 $n$，你需要求出分配给国王三个儿子的土地的边长。", "inputFormat": "输入一个整数 $n$（$6 \\leq n \\leq 10^9$）。", "outputFormat": "输出三个数 $a,b,c$。如果有多个最优解，可以输出任意一个。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9s4tycwv.png)\n\n### 数据范围\n\n| 子任务 | 是否捆绑 | 分值 | $n\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $25$ | $50$ |\n| $2$ | 是 | $25$ | $2000$ |\n| $3$ | 是 | $25$ | $40000$ |\n| $4$ | 是 | $25$ | $10^9$ |", "locale": "zh-CN"}}}
{"pid": "P11556", "type": "P", "difficulty": 3, "samples": [["5 2\n1 1 2 2 3", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2016] 超级跳棋 (Day 2)", "background": "翻译自 [ROIR 2016 D2T2](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day2.pdf)。", "description": "Andrey 是超级跳棋比赛的裁判。每场比赛中有三名玩家参与。每个玩家在比赛过程中会得到一定的正整数分数。如果在比赛结束时，第一个玩家得到了 $a$ 分，第二个玩家得到了 $b$ 分，第三个玩家得到了 $c$ 分，那么我们说比赛以得分 $a\\;\\!\\text:\\;\\!b\\;\\!\\text:\\;\\!c$ 结束。\n\nAndrey 知道超级跳棋的规则要求，比赛结果中任何两个玩家的得分之比最多为 $k$。比赛结束后，Andrey 将显示比赛结果，将三张写有玩家得分的卡片放到专门的显示屏上。Andrey 有 $n$ 张这样的卡片，上面写的数字分别是 $x_1,x_2,\\dots,x_n$。\n\n为了测试自己为比赛做好了多少准备，Andrey 希望知道，使用他拥有的 $n$ 张卡片，他能在显示屏上显示多少种不同的得分组合。", "inputFormat": "第一行输入两个整数 $n,k$（$3 \\leq n \\leq 100000$，$1 \\leq k \\leq 10^9$）。\n\n第二行输入 $n$ 个整数 $x_1, x_2, \\dots, x_n$ （$1 \\leq x_i \\leq 10^9$）。", "outputFormat": "输出一个整数，表示 Andrey 可以在显示屏上显示的不同得分组合的数量。", "hint": "### 样例解释\n\n在样例中，Andrey 可以显示的得分组合有：$1\\;\\!\\text:\\;\\!1\\;\\!\\text:\\;\\!2,\\;\\! 1\\;\\!\\text:\\;\\!2\\;\\!\\text:\\;\\!1,\\;\\! 2\\;\\!\\text:\\;\\!1\\;\\!\\text:\\;\\!1,\\;\\! 1\\;\\!\\text:\\;\\!2\\;\\!\\text:\\;\\!2,\\;\\! 2\\;\\!\\text:\\;\\!1\\;\\!\\text:\\;\\!2,\\;\\! 2\\;\\!\\text:\\;\\!2\\;\\!\\text:\\;\\!1,\\;\\! 2\\;\\!\\text:\\;\\!2\\;\\!\\text:\\;\\!3,\\;\\! 2\\;\\!\\text:\\;\\!3\\;\\!\\text:\\;\\!2,\\;\\! 3\\;\\!\\text:\\;\\!2\\;\\!\\text:\\;\\!2%吐槽：这个间距太难调整了！！！11$。\n\n其它用现有卡片组成的三元组不满足条件，因为这样会出现两个玩家的得分之比超过了 $k = 2$ 的情况。\n\n### 数据范围\n\n| 子任务 | 是否捆绑 | 分值 | $3\\le n\\le$ | $1\\le k\\le$ | $1\\le x_i\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $15$ | $100000$ | $1$ | $100000$ |  |\n| $2$ | 是 | $23$ | $100$ | $100$ | $100$ |  |\n| $3$ | 是 | $30$ | $100000$ | $10^9$ | $10^9$ | 所有 $x_i$ 互不相同 |\n| $4$ | 是 | $32$ | $100000$ | $10^9$ | $10^9$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2016] 超级跳棋 (Day 2)", "background": "翻译自 [ROIR 2016 D2T2](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day2.pdf)。", "description": "Andrey 是超级跳棋比赛的裁判。每场比赛中有三名玩家参与。每个玩家在比赛过程中会得到一定的正整数分数。如果在比赛结束时，第一个玩家得到了 $a$ 分，第二个玩家得到了 $b$ 分，第三个玩家得到了 $c$ 分，那么我们说比赛以得分 $a\\;\\!\\text:\\;\\!b\\;\\!\\text:\\;\\!c$ 结束。\n\nAndrey 知道超级跳棋的规则要求，比赛结果中任何两个玩家的得分之比最多为 $k$。比赛结束后，Andrey 将显示比赛结果，将三张写有玩家得分的卡片放到专门的显示屏上。Andrey 有 $n$ 张这样的卡片，上面写的数字分别是 $x_1,x_2,\\dots,x_n$。\n\n为了测试自己为比赛做好了多少准备，Andrey 希望知道，使用他拥有的 $n$ 张卡片，他能在显示屏上显示多少种不同的得分组合。", "inputFormat": "第一行输入两个整数 $n,k$（$3 \\leq n \\leq 100000$，$1 \\leq k \\leq 10^9$）。\n\n第二行输入 $n$ 个整数 $x_1, x_2, \\dots, x_n$ （$1 \\leq x_i \\leq 10^9$）。", "outputFormat": "输出一个整数，表示 Andrey 可以在显示屏上显示的不同得分组合的数量。", "hint": "### 样例解释\n\n在样例中，Andrey 可以显示的得分组合有：$1\\;\\!\\text:\\;\\!1\\;\\!\\text:\\;\\!2,\\;\\! 1\\;\\!\\text:\\;\\!2\\;\\!\\text:\\;\\!1,\\;\\! 2\\;\\!\\text:\\;\\!1\\;\\!\\text:\\;\\!1,\\;\\! 1\\;\\!\\text:\\;\\!2\\;\\!\\text:\\;\\!2,\\;\\! 2\\;\\!\\text:\\;\\!1\\;\\!\\text:\\;\\!2,\\;\\! 2\\;\\!\\text:\\;\\!2\\;\\!\\text:\\;\\!1,\\;\\! 2\\;\\!\\text:\\;\\!2\\;\\!\\text:\\;\\!3,\\;\\! 2\\;\\!\\text:\\;\\!3\\;\\!\\text:\\;\\!2,\\;\\! 3\\;\\!\\text:\\;\\!2\\;\\!\\text:\\;\\!2%吐槽：这个间距太难调整了！！！11$。\n\n其它用现有卡片组成的三元组不满足条件，因为这样会出现两个玩家的得分之比超过了 $k = 2$ 的情况。\n\n### 数据范围\n\n| 子任务 | 是否捆绑 | 分值 | $3\\le n\\le$ | $1\\le k\\le$ | $1\\le x_i\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $15$ | $100000$ | $1$ | $100000$ |  |\n| $2$ | 是 | $23$ | $100$ | $100$ | $100$ |  |\n| $3$ | 是 | $30$ | $100000$ | $10^9$ | $10^9$ | 所有 $x_i$ 互不相同 |\n| $4$ | 是 | $32$ | $100000$ | $10^9$ | $10^9$ |  |", "locale": "zh-CN"}}}
{"pid": "P11557", "type": "P", "difficulty": 4, "samples": [["1 100", "54"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "数位 DP", "ROIR（俄罗斯）"], "title": "[ROIR 2016] 有趣数字 (Day 2)", "background": "翻译自 [ROIR 2016 D2T3](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day2.pdf)。", "description": "如果一个整数的各个数位按非递减顺序排列，我们称这个数是“有趣的”。例如，$1145,2333,1377777$ 都是“有趣的”。\n\n给定 $L,R$，求出 $[L,R]$ 中有趣的数字的个数，对 $10^9+7$ 取模。", "inputFormat": "输入两行，每行一个数，分别是 $L$ 和 $R$。保证 $1 \\leq L \\leq R \\leq 10^{100}$。", "outputFormat": "输出一个数，表示答案。", "hint": "| 子任务 | 是否捆绑 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $21$ | $L = 1$，$R \\leq 1000$ |\n| $2$ | 否 | $22$ | $1 \\leq L \\leq R \\leq 10^{18}$ |\n| $3$ | 否 | $24$ | $L = 1$，$R = 10^k$，其中 $2 \\leq k \\leq 100$ |\n| $4$ | 否 | $33$ | $1 \\leq L \\leq R \\leq 10^{100}$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2016] 有趣数字 (Day 2)", "background": "翻译自 [ROIR 2016 D2T3](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day2.pdf)。", "description": "如果一个整数的各个数位按非递减顺序排列，我们称这个数是“有趣的”。例如，$1145,2333,1377777$ 都是“有趣的”。\n\n给定 $L,R$，求出 $[L,R]$ 中有趣的数字的个数，对 $10^9+7$ 取模。", "inputFormat": "输入两行，每行一个数，分别是 $L$ 和 $R$。保证 $1 \\leq L \\leq R \\leq 10^{100}$。", "outputFormat": "输出一个数，表示答案。", "hint": "| 子任务 | 是否捆绑 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $21$ | $L = 1$，$R \\leq 1000$ |\n| $2$ | 否 | $22$ | $1 \\leq L \\leq R \\leq 10^{18}$ |\n| $3$ | 否 | $24$ | $L = 1$，$R = 10^k$，其中 $2 \\leq k \\leq 100$ |\n| $4$ | 否 | $33$ | $1 \\leq L \\leq R \\leq 10^{100}$ |", "locale": "zh-CN"}}}
{"pid": "P11558", "type": "P", "difficulty": 6, "samples": [["4  \n1 2 0 0", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2016] 和谐数列 (Day 2)", "background": "翻译自 [ROIR 2016 D2T4](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day2.pdf)。", "description": "如果一个整数数列 $a_1, a_2, \\dots, a_n$ 满足其中每个数（除了 $a_1$ 和 $a_n$）等于其相邻两个数的和，即 $a_2 = a_1 + a_3, a_3 = a_2 + a_4, \\dots, a_{n-1} = a_{n-2} + a_n$，那么我们称这个序列为和谐数列。  \n\n例如，数列 $[1, 2, 1, {-1}]$ 是和谐数列，因为 $2 = 1 + 1$，且 $1 = 2 + ({-1})$。\n\n现在考虑两个相同长度的数列 $A = [a_1, a_2, \\dots, a_n]$ 和 $B = [b_1, b_2, \\dots, b_n]$。我们定义它们之间的距离为：\n$$ d(A, B) = |a_1 - b_1| + |a_2 - b_2| + \\dots + |a_n - b_n| $$  \n例如，$d([1, 2, 1, {-1}], [1, 2, 0, 0]) = |1 - 1| + |2 - 2| + |1 - 0| + |{-1} - 0| = 0 + 0 + 1 + 1 = 2$。\n\n现有一个数列 $B = [b_1, b_2, \\dots, b_n]$，需要找出一个和谐数列 $A = [a_1, a_2, \\dots, a_n]$，使得 $d(A, B)$ 最小。你只需要求出 $d(A, B)$ 的最小值即可。", "inputFormat": "第一行输入一个整数 $n$，表示数列的长度（$3 \\leq n \\leq 300000$）。\n\n第二行输入 $n$ 个整数 $b_1,b_2,\\dots,b_n$（$-10^9 \\leq b_i \\leq 10^9$）。", "outputFormat": "输出一个整数，表示 $d(A, B)$ 的最小值。", "hint": "### 样例解释\n\n在样例中，可以令 $A=[1, 2, 1, {-1}]$，这样 $d([1, 2, 1, {-1}], [1, 2, 0, 0]) = 2$。可以证明 $d(A,B)$ 不可能小于 $2$。\n\n### 数据范围\n\n| 子任务 | 是否捆绑 | 分值 | $3\\le n\\le$ | $\\lvert b_i\\rvert\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $14$ | $3$ | $10$ |\n| $2$ | 是 | $14$ | $500$ | $100$ |\n| $3$ | 是 | $16$ | $100000$ | $100$ |\n| $4$ | 是 | $16$ | $1000$ | $10^9$ |\n| $5$ | 是 | $40$ | $300000$ | $10^9$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2016] 和谐数列 (Day 2)", "background": "翻译自 [ROIR 2016 D2T4](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day2.pdf)。", "description": "如果一个整数数列 $a_1, a_2, \\dots, a_n$ 满足其中每个数（除了 $a_1$ 和 $a_n$）等于其相邻两个数的和，即 $a_2 = a_1 + a_3, a_3 = a_2 + a_4, \\dots, a_{n-1} = a_{n-2} + a_n$，那么我们称这个序列为和谐数列。  \n\n例如，数列 $[1, 2, 1, {-1}]$ 是和谐数列，因为 $2 = 1 + 1$，且 $1 = 2 + ({-1})$。\n\n现在考虑两个相同长度的数列 $A = [a_1, a_2, \\dots, a_n]$ 和 $B = [b_1, b_2, \\dots, b_n]$。我们定义它们之间的距离为：\n$$ d(A, B) = |a_1 - b_1| + |a_2 - b_2| + \\dots + |a_n - b_n| $$  \n例如，$d([1, 2, 1, {-1}], [1, 2, 0, 0]) = |1 - 1| + |2 - 2| + |1 - 0| + |{-1} - 0| = 0 + 0 + 1 + 1 = 2$。\n\n现有一个数列 $B = [b_1, b_2, \\dots, b_n]$，需要找出一个和谐数列 $A = [a_1, a_2, \\dots, a_n]$，使得 $d(A, B)$ 最小。你只需要求出 $d(A, B)$ 的最小值即可。", "inputFormat": "第一行输入一个整数 $n$，表示数列的长度（$3 \\leq n \\leq 300000$）。\n\n第二行输入 $n$ 个整数 $b_1,b_2,\\dots,b_n$（$-10^9 \\leq b_i \\leq 10^9$）。", "outputFormat": "输出一个整数，表示 $d(A, B)$ 的最小值。", "hint": "### 样例解释\n\n在样例中，可以令 $A=[1, 2, 1, {-1}]$，这样 $d([1, 2, 1, {-1}], [1, 2, 0, 0]) = 2$。可以证明 $d(A,B)$ 不可能小于 $2$。\n\n### 数据范围\n\n| 子任务 | 是否捆绑 | 分值 | $3\\le n\\le$ | $\\lvert b_i\\rvert\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | 是 | $14$ | $3$ | $10$ |\n| $2$ | 是 | $14$ | $500$ | $100$ |\n| $3$ | 是 | $16$ | $100000$ | $100$ |\n| $4$ | 是 | $16$ | $1000$ | $10^9$ |\n| $5$ | 是 | $40$ | $300000$ | $10^9$ |", "locale": "zh-CN"}}}
{"pid": "P11559", "type": "P", "difficulty": 1, "samples": [["50 50 10\n", "No"], ["100 30 100\n", "Yes"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "O2优化", "梦熊比赛"], "title": "【MX-X7-T0】[LSOT-3] 嗯欧哎", "background": "原题链接：<https://oier.team/problems/X7A>。\n\n嗯欧哎是欧哎界的知名比赛。本题可以用来检验嗯欧哎是否发挥出了真实水平。\n\n此名称纯属虚构，不影射任何现实中的比赛或机构的名称。如有雷同，纯属巧合。", "description": "一天的嗯欧哎有三道题，每道题的得分均在 $0 \\sim 100$ 之间。定义一道题的得分在 $85 \\sim 100$ 之间（含 $85$ 和 $100$，下同）时该题近似通过，在 $45 \\sim 84$ 之间时为高分暴力，在 $25 \\sim 44$ 之间时为低分暴力，在 $1 \\sim 24$ 之间时为指数级暴力，若为 $0$ 分则认为是爆零。\n\n一场发挥出真实水平的嗯欧哎有以下四种情况：\n- 一道题高分暴力加一道题低分暴力加一道题指数级暴力；\n- 一道题近似通过加一道题高分暴力加一道题低分暴力；\n- 两道题近似通过加一道题低分暴力或高分暴力；\n- 三道题近似通过。\n\n给出一个人一天的嗯欧哎三道题的得分 $a,b,c$，求是否发挥出真实水平。", "inputFormat": "仅一行，三个非负整数 $a, b, c$，表示某个人一天嗯欧哎三题的得分。", "outputFormat": "仅一行，一个字符串 `Yes` 或 `No`，表示是否发挥出了真实水平。", "hint": "**【样例解释 #1】**\n\n第一题的得分在 $45 \\sim 84$ 之间，为高分暴力。\n\n类似地，第二题为高分暴力，第三题为指数级暴力。\n\n因为不符合题目里描述的任何一种，所以输出 `No`。\n\n**【样例解释 #2】**\n\n第一题和第三题为近似通过，第二题为低分暴力。满足“两道题近似通过加一道题低分暴力或高分暴力”的条件，所以输出 `Yes`。\n\n**【数据范围】**\n\n对于全部的数据，$0\\le a,b,c\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X7-T0】[LSOT-3] 嗯欧哎", "background": "原题链接：<https://oier.team/problems/X7A>。\n\n嗯欧哎是欧哎界的知名比赛。本题可以用来检验嗯欧哎是否发挥出了真实水平。\n\n此名称纯属虚构，不影射任何现实中的比赛或机构的名称。如有雷同，纯属巧合。", "description": "一天的嗯欧哎有三道题，每道题的得分均在 $0 \\sim 100$ 之间。定义一道题的得分在 $85 \\sim 100$ 之间（含 $85$ 和 $100$，下同）时该题近似通过，在 $45 \\sim 84$ 之间时为高分暴力，在 $25 \\sim 44$ 之间时为低分暴力，在 $1 \\sim 24$ 之间时为指数级暴力，若为 $0$ 分则认为是爆零。\n\n一场发挥出真实水平的嗯欧哎有以下四种情况：\n- 一道题高分暴力加一道题低分暴力加一道题指数级暴力；\n- 一道题近似通过加一道题高分暴力加一道题低分暴力；\n- 两道题近似通过加一道题低分暴力或高分暴力；\n- 三道题近似通过。\n\n给出一个人一天的嗯欧哎三道题的得分 $a,b,c$，求是否发挥出真实水平。", "inputFormat": "仅一行，三个非负整数 $a, b, c$，表示某个人一天嗯欧哎三题的得分。", "outputFormat": "仅一行，一个字符串 `Yes` 或 `No`，表示是否发挥出了真实水平。", "hint": "**【样例解释 #1】**\n\n第一题的得分在 $45 \\sim 84$ 之间，为高分暴力。\n\n类似地，第二题为高分暴力，第三题为指数级暴力。\n\n因为不符合题目里描述的任何一种，所以输出 `No`。\n\n**【样例解释 #2】**\n\n第一题和第三题为近似通过，第二题为低分暴力。满足“两道题近似通过加一道题低分暴力或高分暴力”的条件，所以输出 `Yes`。\n\n**【数据范围】**\n\n对于全部的数据，$0\\le a,b,c\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P11560", "type": "P", "difficulty": 2, "samples": [["1 5\n", "3\n"], ["114514 1919810\n", "87590\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "O2优化", "枚举", "梦熊比赛"], "title": "【MX-X7-T1】[LSOT-3] 分蛋糕", "background": "原题链接：<https://oier.team/problems/X7B>。\n\n这里原本有一个相当魔怔的影射当代营销号的题目背景，不过由于过于魔怔被删去了。", "description": "有两个正整数 $a$ 和 $b$，每次可以选择以下操作之一：\n\n1. $a\\gets a\\times 2$。\n2. $b\\gets b-1$。\n3. $b\\gets b+1$。\n\n求使得 $a=b$ 的最小操作次数。", "inputFormat": "仅一行，两个正整数 $a,b$。", "outputFormat": "仅一行，一个非负整数，表示最少操作次数。", "hint": "**【样例解释 #1】**\n\n初始 $a=1$，$b=5$。\n\n- 进行操作 $1$，变成 $a=2$，$b=5$。\n- 进行操作 $1$，变成 $a=4$，$b=5$。\n- 进行操作 $2$，变成 $a=4$，$b=4$。\n\n总操作次数为 $3$。可以证明不存在操作次数更少的方案。\n\n**【数据范围】**\n\n对于 $28\\%$ 的数据，$a,b\\le 20$。\n\n对于 $60\\%$ 的数据，$a,b\\le 5000$。\n\n对于全部的数据，$1\\le a,b\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X7-T1】[LSOT-3] 分蛋糕", "background": "原题链接：<https://oier.team/problems/X7B>。\n\n这里原本有一个相当魔怔的影射当代营销号的题目背景，不过由于过于魔怔被删去了。", "description": "有两个正整数 $a$ 和 $b$，每次可以选择以下操作之一：\n\n1. $a\\gets a\\times 2$。\n2. $b\\gets b-1$。\n3. $b\\gets b+1$。\n\n求使得 $a=b$ 的最小操作次数。", "inputFormat": "仅一行，两个正整数 $a,b$。", "outputFormat": "仅一行，一个非负整数，表示最少操作次数。", "hint": "**【样例解释 #1】**\n\n初始 $a=1$，$b=5$。\n\n- 进行操作 $1$，变成 $a=2$，$b=5$。\n- 进行操作 $1$，变成 $a=4$，$b=5$。\n- 进行操作 $2$，变成 $a=4$，$b=4$。\n\n总操作次数为 $3$。可以证明不存在操作次数更少的方案。\n\n**【数据范围】**\n\n对于 $28\\%$ 的数据，$a,b\\le 20$。\n\n对于 $60\\%$ 的数据，$a,b\\le 5000$。\n\n对于全部的数据，$1\\le a,b\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11561", "type": "P", "difficulty": 3, "samples": [["9 2\n100000001", "4"], ["18 3\n100000010101001000", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "O2优化", "梦熊比赛"], "title": "【MX-X7-T2】[LSOT-3] 姬誉蛙", "background": "原题链接：<https://oier.team/problems/X7C>。\n\n姬誉蛙——每十六年在陆地上出现一次的 奇迹般的青蛙\n\n呱…呱呱呱呱…\n\n快把门打开啊 呱呱", "description": "Ringo 为了解除姬誉蛙的诅咒需要做出由 Tabuki 出的一道题。\n\n定义一个 $01$ 串的权值为这个串中 $0$ 的数量与 $1$ 的数量的乘积。\n\n给你一个长度为 $n$ 的 $01$ 串。你想知道将整个串恰好划分为 $k$ 个连续子串后，这 $k$ 个子串的最大权值最小可以是多少。", "inputFormat": "第一行，两个正整数 $n, k$。\n\n第二行，一个长度为 $n$ 的 $01$ 串。", "outputFormat": "仅一行，一个整数，表示最大权值最小可以是多少。", "hint": "**【样例解释 #1】**\n\n分成的两段分别为 `10000` 和 `0001`。第一段的权值为 $4\\times 1=4$，第二段的权值为 $3\\times 1=3$，最大值为 $4$。\n\n可以证明不存在使得最大权值更小的方案。需要注意的是，`1000` 和 `00001` 也是一个最大权值为 $4$ 的方案。\n\n**【样例解释 #2】**\n\n可以分成三段 `1000000`、`10101`、`001000`，最大权值为第二段的 $2\\times 3=6$。\n\n**【数据范围】**\n\n对于 $15\\%$ 的数据，$n\\le 20$。\n\n对于 $40\\%$ 的数据，$n\\le 5000$。\n\n对于另外 $10\\%$ 的数据，串中仅含有 $0$。\n\n对于全部的数据，$1\\le k\\le n\\le 10^6$，串中仅含 $0$ 或 $1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X7-T2】[LSOT-3] 姬誉蛙", "background": "原题链接：<https://oier.team/problems/X7C>。\n\n姬誉蛙——每十六年在陆地上出现一次的 奇迹般的青蛙\n\n呱…呱呱呱呱…\n\n快把门打开啊 呱呱", "description": "Ringo 为了解除姬誉蛙的诅咒需要做出由 Tabuki 出的一道题。\n\n定义一个 $01$ 串的权值为这个串中 $0$ 的数量与 $1$ 的数量的乘积。\n\n给你一个长度为 $n$ 的 $01$ 串。你想知道将整个串恰好划分为 $k$ 个连续子串后，这 $k$ 个子串的最大权值最小可以是多少。", "inputFormat": "第一行，两个正整数 $n, k$。\n\n第二行，一个长度为 $n$ 的 $01$ 串。", "outputFormat": "仅一行，一个整数，表示最大权值最小可以是多少。", "hint": "**【样例解释 #1】**\n\n分成的两段分别为 `10000` 和 `0001`。第一段的权值为 $4\\times 1=4$，第二段的权值为 $3\\times 1=3$，最大值为 $4$。\n\n可以证明不存在使得最大权值更小的方案。需要注意的是，`1000` 和 `00001` 也是一个最大权值为 $4$ 的方案。\n\n**【样例解释 #2】**\n\n可以分成三段 `1000000`、`10101`、`001000`，最大权值为第二段的 $2\\times 3=6$。\n\n**【数据范围】**\n\n对于 $15\\%$ 的数据，$n\\le 20$。\n\n对于 $40\\%$ 的数据，$n\\le 5000$。\n\n对于另外 $10\\%$ 的数据，串中仅含有 $0$。\n\n对于全部的数据，$1\\le k\\le n\\le 10^6$，串中仅含 $0$ 或 $1$。", "locale": "zh-CN"}}}
{"pid": "P11562", "type": "P", "difficulty": 4, "samples": [["5\n1 0 0 1 0\n1 2\n2 3\n2 4\n3 5\n", "2\n"], ["15\n1 0 0 0 0 1 0 1 1 1 0 0 1 1 0\n10 2\n1 7\n1 5\n9 7\n14 2\n4 11\n6 5\n9 15\n4 5\n5 3\n5 14\n13 5\n5 8\n5 12\n", "4\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "并查集", "O2优化", "树的直径", "梦熊比赛"], "title": "【MX-X7-T3】[LSOT-3] 寄存器", "background": "原题链接：<https://oier.team/problems/X7D>。\n\n这里不是 APIO，所以这个题也不是让你手搓 CPU。", "description": "有 $n$ 个寄存器，编号为 $1 \\sim n$。这些寄存器由 $n-1$ 条带有开关的电线连接。为了保证交换信息的顺利，保证每两个寄存器都可以通过若干条电线连接。\n\n初始时每个寄存器存储的信息都是 $0$。小 H 每次可以独立地操纵所有电线的开关然后选择一个寄存器通电。若一个寄存器与一个通电的寄存器有**开启的电线**相连，则这个寄存器也会通电。所有通电的寄存器都会反转存储的信息（$0$ 会变成 $1$，$1$ 会变成 $0$）。小 H 想让寄存器存储他想要的信息，他希望你告诉他最少需要进行多少次**通电**。", "inputFormat": "第一行，一个正整数 $n$，表示寄存器个数。\n\n第二行，$n$ 个非负整数 $a_1, \\ldots, a_n$，表示小 H 希望寄存器 $i$ 存储 $a_i$。保证 $a_i$ 为 $0$ 或 $1$。\n\n接下来 $n - 1$ 行，每行两个正整数 $u, v$，表示寄存器 $u$ 和 $v$ 之间有一根电线。保证每两个寄存器都可以通过若干条电线连接。", "outputFormat": "仅一行，一个非负整数，表示最少进行多少次**通电**。", "hint": "**【样例解释 #1】**\n\n先将电线 $(1, 2)$ 关闭，其余开启，给寄存器 $1$ 通电，此时 $1$ 的信息翻转，所有寄存器存储的信息变为 `1 0 0 0 0`。\n\n然后将电线 $(2, 4)$ 关闭，其余开启，给寄存器 $4$ 通电，此时 $4$ 的信息翻转，所有寄存器存储的信息变为 `1 0 0 1 0`，满足要求。\n\n可以证明不存在更优的方案。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（20 分）：$n\\le 5$。\n- 子任务 2（20 分）：对于第 $i$ 根电线，$u=i$，$v=i+1$。\n- 子任务 3（30 分）：不存在一对相邻的寄存器希望储存的信息相同。\n- 子任务 4（30 分）：无特殊性质。\n\n对于全部的数据，$1\\le n\\le 10^6$，$1\\le u,v\\le n$，$0 \\le a_i \\le 1$，每两个寄存器都可以通过若干条电线连接。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X7-T3】[LSOT-3] 寄存器", "background": "原题链接：<https://oier.team/problems/X7D>。\n\n这里不是 APIO，所以这个题也不是让你手搓 CPU。", "description": "有 $n$ 个寄存器，编号为 $1 \\sim n$。这些寄存器由 $n-1$ 条带有开关的电线连接。为了保证交换信息的顺利，保证每两个寄存器都可以通过若干条电线连接。\n\n初始时每个寄存器存储的信息都是 $0$。小 H 每次可以独立地操纵所有电线的开关然后选择一个寄存器通电。若一个寄存器与一个通电的寄存器有**开启的电线**相连，则这个寄存器也会通电。所有通电的寄存器都会反转存储的信息（$0$ 会变成 $1$，$1$ 会变成 $0$）。小 H 想让寄存器存储他想要的信息，他希望你告诉他最少需要进行多少次**通电**。", "inputFormat": "第一行，一个正整数 $n$，表示寄存器个数。\n\n第二行，$n$ 个非负整数 $a_1, \\ldots, a_n$，表示小 H 希望寄存器 $i$ 存储 $a_i$。保证 $a_i$ 为 $0$ 或 $1$。\n\n接下来 $n - 1$ 行，每行两个正整数 $u, v$，表示寄存器 $u$ 和 $v$ 之间有一根电线。保证每两个寄存器都可以通过若干条电线连接。", "outputFormat": "仅一行，一个非负整数，表示最少进行多少次**通电**。", "hint": "**【样例解释 #1】**\n\n先将电线 $(1, 2)$ 关闭，其余开启，给寄存器 $1$ 通电，此时 $1$ 的信息翻转，所有寄存器存储的信息变为 `1 0 0 0 0`。\n\n然后将电线 $(2, 4)$ 关闭，其余开启，给寄存器 $4$ 通电，此时 $4$ 的信息翻转，所有寄存器存储的信息变为 `1 0 0 1 0`，满足要求。\n\n可以证明不存在更优的方案。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（20 分）：$n\\le 5$。\n- 子任务 2（20 分）：对于第 $i$ 根电线，$u=i$，$v=i+1$。\n- 子任务 3（30 分）：不存在一对相邻的寄存器希望储存的信息相同。\n- 子任务 4（30 分）：无特殊性质。\n\n对于全部的数据，$1\\le n\\le 10^6$，$1\\le u,v\\le n$，$0 \\le a_i \\le 1$，每两个寄存器都可以通过若干条电线连接。", "locale": "zh-CN"}}}
{"pid": "P11563", "type": "P", "difficulty": 5, "samples": [["5\n2 3 2 5 4\n", "6\n"], ["20\n17 18 20 6 8 4 15 5 14 20 4 3 19 6 7 17 16 8 10 10\n", "3456\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "排列组合", "容斥原理", "基环树", "分类讨论", "梦熊比赛"], "title": "【MX-X7-T4】[LSOT-3] 命运", "background": "原题链接：<https://oier.team/problems/X7E>。\n\n>「这里书写着世界的『命运』」$\\\\$\n「当记载在此的未来成为真实之时」$\\\\$\n「我的珍爱 就会变成『永远』了吧」", "description": "我们在题目描述的最后提供了可以帮助理解题意的形式化题意。\n\nMomoka 的一生中有 $n$ 个决定人生的事件，编号为 $1 \\sim n$。命运的轨迹已经注定，会被第 $i$ 个事件影响的是第 $a_i$ 个事件，$a_i$ 互不相同。一个事件可能会影响过去，也可能会影响未来，甚至可以影响事件本身。\n\n但是，因为 Momoka 的特殊能力，她的经历并不完全按照她的命运轨迹执行。有一些事件经历之后，原本应该被影响的事件不再被影响，转而影响命运轨迹中描述的会影响这个事件的事件。Momoka 的日记记录了她所经历的事件，日记可以看成是一个序列 $p$，$p_i$ 表示 Momoka 经历了第 $i$ 个事件后影响了事件 $p_i$。\n\nRingo 获得了日记本，她想要通过日记本来完成 M 计划。按照计划，她需要按照 Momoka 的命运轨迹来规划自己的人生。得到 Momoka 的日记之后，她想要知道 Momoka 原本的命运轨迹可能的方案数是多少。答案对 $998244353$ 取模。\n\n**【形式化题意】**\n\n给定一个长度为 $n$ 的序列 $p_1, \\ldots, p_n$（未必为排列），保证 $1 \\le p_i \\le n$。求满足以下条件的**排列** $a_1, \\ldots, a_n$ 的个数，对 $998244353$ 取模：\n\n> 对每个 $1 \\le i \\le n$，都有 $a_i=p_i$ 或者 $a_{p_i}=i$ 成立。", "inputFormat": "第一行，一个正整数 $n$，表示事件的个数。\n\n第二行，$n$ 个正整数 $p_1, \\ldots, p_n$。", "outputFormat": "仅一行，一个非负整数，表示命运轨迹可能的方案数对 $998244353$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n有以下六种可能的命运轨迹：`2 3 1 5 4`、`2 3 4 5 1`、`2 3 5 1 4`、`3 1 2 5 4`、`4 1 2 5 3`、`5 1 2 3 4`。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（15 分）：$n\\le 10$。\n- 子任务 2（15 分）：序列 $p$ 中 $1$ 的个数 $\\ge \\frac{n}{5}$。\n- 子任务 3（15 分）：序列 $p$ 是排列。\n- 子任务 4（25 分）：对于所有 $i,j$ 满足 $i\\ne j\\wedge p_i=j\\wedge p_j=i$，都存在至少一个 $k\\ne i\\wedge k\\ne j$ 满足 $p_k=i \\vee p_k=j$。\n- 子任务 5（30 分）：无特殊性质。\n\n对于全部的数据，$1\\le n\\le 10^6$，$1\\le p_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X7-T4】[LSOT-3] 命运", "background": "原题链接：<https://oier.team/problems/X7E>。\n\n>「这里书写着世界的『命运』」$\\\\$\n「当记载在此的未来成为真实之时」$\\\\$\n「我的珍爱 就会变成『永远』了吧」", "description": "我们在题目描述的最后提供了可以帮助理解题意的形式化题意。\n\nMomoka 的一生中有 $n$ 个决定人生的事件，编号为 $1 \\sim n$。命运的轨迹已经注定，会被第 $i$ 个事件影响的是第 $a_i$ 个事件，$a_i$ 互不相同。一个事件可能会影响过去，也可能会影响未来，甚至可以影响事件本身。\n\n但是，因为 Momoka 的特殊能力，她的经历并不完全按照她的命运轨迹执行。有一些事件经历之后，原本应该被影响的事件不再被影响，转而影响命运轨迹中描述的会影响这个事件的事件。Momoka 的日记记录了她所经历的事件，日记可以看成是一个序列 $p$，$p_i$ 表示 Momoka 经历了第 $i$ 个事件后影响了事件 $p_i$。\n\nRingo 获得了日记本，她想要通过日记本来完成 M 计划。按照计划，她需要按照 Momoka 的命运轨迹来规划自己的人生。得到 Momoka 的日记之后，她想要知道 Momoka 原本的命运轨迹可能的方案数是多少。答案对 $998244353$ 取模。\n\n**【形式化题意】**\n\n给定一个长度为 $n$ 的序列 $p_1, \\ldots, p_n$（未必为排列），保证 $1 \\le p_i \\le n$。求满足以下条件的**排列** $a_1, \\ldots, a_n$ 的个数，对 $998244353$ 取模：\n\n> 对每个 $1 \\le i \\le n$，都有 $a_i=p_i$ 或者 $a_{p_i}=i$ 成立。", "inputFormat": "第一行，一个正整数 $n$，表示事件的个数。\n\n第二行，$n$ 个正整数 $p_1, \\ldots, p_n$。", "outputFormat": "仅一行，一个非负整数，表示命运轨迹可能的方案数对 $998244353$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n有以下六种可能的命运轨迹：`2 3 1 5 4`、`2 3 4 5 1`、`2 3 5 1 4`、`3 1 2 5 4`、`4 1 2 5 3`、`5 1 2 3 4`。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（15 分）：$n\\le 10$。\n- 子任务 2（15 分）：序列 $p$ 中 $1$ 的个数 $\\ge \\frac{n}{5}$。\n- 子任务 3（15 分）：序列 $p$ 是排列。\n- 子任务 4（25 分）：对于所有 $i,j$ 满足 $i\\ne j\\wedge p_i=j\\wedge p_j=i$，都存在至少一个 $k\\ne i\\wedge k\\ne j$ 满足 $p_k=i \\vee p_k=j$。\n- 子任务 5（30 分）：无特殊性质。\n\n对于全部的数据，$1\\le n\\le 10^6$，$1\\le p_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P11564", "type": "P", "difficulty": 5, "samples": [["5 4 3\n1 2 3 4 5\n1 2 3 4 5\n1 2 3 4 5 7 7 8\n8 7 6 5 4 3 2 1\n1 2 5\n2 3 4\n3 4 2\n4 5 3\n", "0 4 4 6 7\n"], ["40 40 5\n31 30 28 30 30 24 31 16 28 24 16 28 31 24 17 31 31 28 5 16 4 16 24 9 8 16 28 28 24 30 16 28 24 31 16 2 16 28 28 24\n24 7 21 15 16 18 30 15 23 24 29 12 2 14 11 0 5 27 10 23 11 28 27 21 1 1 28 21 11 18 31 23 1 18 23 22 22 9 1 4\n0 102 102 102 102 102 260 260 260 260 601 601 601 601 601 601 601 601 1264 1264 1264 1264 1264 1264 1264 1264 1264 1264 1264 1264 1264 1264\n108799 106048 100679 98235 95333 90350 80153 79411 70293 69091 64328 58817 55536 53256 42932 42687 41145 40487 40047 37901 32251 29823 26460 25786 21684 20508 19995 19172 18248 12890 12397 10740\n38 27 0\n17 3 3\n26 8 12\n12 11 14\n1 23 8\n4 7 6\n18 36 18\n1 33 6\n38 18 8\n19 38 17\n24 21 4\n31 16 18\n26 4 8\n5 31 1\n6 28 4\n9 10 7\n26 7 7\n8 37 19\n40 29 4\n24 9 0\n15 6 19\n39 12 18\n33 39 8\n10 34 0\n39 30 3\n28 25 5\n19 13 9\n6 2 0\n1 20 10\n19 17 8\n15 26 18\n17 13 18\n33 40 8\n40 22 15\n15 28 0\n17 35 10\n24 5 13\n18 14 19\n40 22 2\n6 32 13\n", "0 630 993 619 889 630 618 611 876 883 46 32 991 1026 611 629 990 1007 982 10 880 16 8 876 616 611 999 611 18 17 611 643 6 883 611 1025 611 999 14 14\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["O2优化", "图论建模", "最短路", "梦熊比赛"], "title": "【MX-X7-T5】[LSOT-3] 你的列车是生存战略", "background": "原题链接：<https://oier.team/problems/X7F>。\n\n>啊啊 我搭上了那趟列车$\\\\$无论被业火灼烧多少次$\\\\$或是化作灰烬$\\\\$为何我要如此$\\\\$因为这是通往你的道路$\\\\$就算事与愿违也好$\\\\$还是听天由命也罢$\\\\$我将要改写这个世界$\\\\$", "description": "Ringo 要带着企鹅罐乘坐列车前往命运所至之地寻找 Shyouma 并且完成命运换乘！\n\n她可以通过乘坐列车在冰之世界的 $n$ 个车站中穿行，车站编号为 $1 \\sim n$。\n\n每一个车站都有两个标号，第 $i$ 个车站的标号分别为 $c_i$ 和 $d_i$。\n\n冰之世界中一共有普通列车和特快列车两种列车。\n\n- 任意两地之间都有一条**可以往返**的普通列车的线路，车站 $i$ 与车站 $j$ 之间的线路所花费的时间为 $\\min(a_{c_i \\mathbin{|} c_j},b_{d_i \\mathbin{\\&} d_j})$（$\\mathbin{|}$ 表示按位或，$\\mathbin{\\&}$ 表示按位与）。**保证 $\\boldsymbol{a}$ 单调不降，$\\boldsymbol{b}$ 单调不升。**\n- 特快列车一共有 $m$ 条线路，第 $i$ 条是从车站 $u_i$ **驶向**车站 $v_i$ 的**单向线路**，所花费的时间为 $w_i$。\n\n\nRingo 希望能更快找到 Shyouma，不然世界就要毁灭了！\n\nRingo 开始的时候在车站 $1$，但是她不知道命运所至之地到底在哪里。所以她想知道对于每一个车站，如果 Shyouma 在那里，她最少需要花多少时间到达 Shyouma 所在的位置。", "inputFormat": "第一行，三个非负整数 $n, m, k$。其中 $k$ 表示 $c_i, d_i \\in [0,2^k)$。\n\n第二行，$n$ 个非负整数 $c_1, \\ldots, c_n$。\n\n第三行，$n$ 个非负整数 $d_1, \\ldots, d_n$。\n\n第四行，$2^k$ 个非负整数 $a_0, \\ldots, a_{2^k - 1}$。\n\n第五行，$2^k$ 个非负整数 $b_0, \\ldots, b_{2^k - 1}$。\n\n**保证 $\\boldsymbol{a}$ 单调不降，$\\boldsymbol{b}$ 单调不升。**\n\n接下来 $m$ 行，第 $i$ 行三个非负整数 $u_i, v_i, w_i$。", "outputFormat": "仅一行，$n$ 个整数，第 $i$ 个表示从车站 $1$ 到车站 $i$ 所花费的最少的时间。", "hint": "> 生存戦略、しましょうか\n\n**【样例解释 #1】**\n\nRingo 开始的时候就在车站 $1$，所以到车站 $1$ 最少的花费的时间为 $0$。\n\n到车站 $2$ 的花费最少时间的路径为乘坐从 $1$ 到 $2$ 的普通列车，花费的时间为 $\\min(a_{c_1 \\mathbin{|} c_2},b_{d_1 \\mathbin{\\&} d_2})=\\min(a_3,b_0)=\\min(4,8)=4$。\n\n到车站 $3$ 的花费最少时间的路径为乘坐从 $1$ 到 $3$ 的普通列车，花费的时间为 $4$。\n\n\n到车站 $4$ 的花费最少时间的路径为乘坐从 $1$ 到 $3$ 的普通列车，花费的时间为 $4$，随后乘坐第 $3$ 条特快列车花费 $2$ 的时间从 $3$ 到 $4$，总花费时间为 $4+2=6$。\n\n\n到车站 $5$ 的花费最少时间的路径为乘坐从 $1$ 到 $5$ 的普通列车，花费的时间为 $7$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（10 分）：$n\\le 1000$。\n- 子任务 2（10 分）：$k=0$。\n- 子任务 3（20 分）：$a_i=i$，$b_i=10^{18}$。\n- 子任务 4（20 分）：$m=0$，$n \\ge 2$，$c_{n-1}=d_{n-1}=0$，$c_n=d_n=2^k-1$。\n- 子任务 5（20 分）：$n=m=2^k$。\n- 子任务 6（20 分）：无特殊限制。\n\n对于全部的数据，$1\\le n\\le 10^6$，$0\\le m\\le10^6$，$0\\le k\\le 14$，$0\\le c_i,d_i< 2^k$，$0\\le a_i,b_i,w_i\\le 10^{18}$，$1\\le u_i,v_i\\le n$，$a$ 单调不降，$b$ 单调不升。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X7-T5】[LSOT-3] 你的列车是生存战略", "background": "原题链接：<https://oier.team/problems/X7F>。\n\n>啊啊 我搭上了那趟列车$\\\\$无论被业火灼烧多少次$\\\\$或是化作灰烬$\\\\$为何我要如此$\\\\$因为这是通往你的道路$\\\\$就算事与愿违也好$\\\\$还是听天由命也罢$\\\\$我将要改写这个世界$\\\\$", "description": "Ringo 要带着企鹅罐乘坐列车前往命运所至之地寻找 Shyouma 并且完成命运换乘！\n\n她可以通过乘坐列车在冰之世界的 $n$ 个车站中穿行，车站编号为 $1 \\sim n$。\n\n每一个车站都有两个标号，第 $i$ 个车站的标号分别为 $c_i$ 和 $d_i$。\n\n冰之世界中一共有普通列车和特快列车两种列车。\n\n- 任意两地之间都有一条**可以往返**的普通列车的线路，车站 $i$ 与车站 $j$ 之间的线路所花费的时间为 $\\min(a_{c_i \\mathbin{|} c_j},b_{d_i \\mathbin{\\&} d_j})$（$\\mathbin{|}$ 表示按位或，$\\mathbin{\\&}$ 表示按位与）。**保证 $\\boldsymbol{a}$ 单调不降，$\\boldsymbol{b}$ 单调不升。**\n- 特快列车一共有 $m$ 条线路，第 $i$ 条是从车站 $u_i$ **驶向**车站 $v_i$ 的**单向线路**，所花费的时间为 $w_i$。\n\n\nRingo 希望能更快找到 Shyouma，不然世界就要毁灭了！\n\nRingo 开始的时候在车站 $1$，但是她不知道命运所至之地到底在哪里。所以她想知道对于每一个车站，如果 Shyouma 在那里，她最少需要花多少时间到达 Shyouma 所在的位置。", "inputFormat": "第一行，三个非负整数 $n, m, k$。其中 $k$ 表示 $c_i, d_i \\in [0,2^k)$。\n\n第二行，$n$ 个非负整数 $c_1, \\ldots, c_n$。\n\n第三行，$n$ 个非负整数 $d_1, \\ldots, d_n$。\n\n第四行，$2^k$ 个非负整数 $a_0, \\ldots, a_{2^k - 1}$。\n\n第五行，$2^k$ 个非负整数 $b_0, \\ldots, b_{2^k - 1}$。\n\n**保证 $\\boldsymbol{a}$ 单调不降，$\\boldsymbol{b}$ 单调不升。**\n\n接下来 $m$ 行，第 $i$ 行三个非负整数 $u_i, v_i, w_i$。", "outputFormat": "仅一行，$n$ 个整数，第 $i$ 个表示从车站 $1$ 到车站 $i$ 所花费的最少的时间。", "hint": "> 生存戦略、しましょうか\n\n**【样例解释 #1】**\n\nRingo 开始的时候就在车站 $1$，所以到车站 $1$ 最少的花费的时间为 $0$。\n\n到车站 $2$ 的花费最少时间的路径为乘坐从 $1$ 到 $2$ 的普通列车，花费的时间为 $\\min(a_{c_1 \\mathbin{|} c_2},b_{d_1 \\mathbin{\\&} d_2})=\\min(a_3,b_0)=\\min(4,8)=4$。\n\n到车站 $3$ 的花费最少时间的路径为乘坐从 $1$ 到 $3$ 的普通列车，花费的时间为 $4$。\n\n\n到车站 $4$ 的花费最少时间的路径为乘坐从 $1$ 到 $3$ 的普通列车，花费的时间为 $4$，随后乘坐第 $3$ 条特快列车花费 $2$ 的时间从 $3$ 到 $4$，总花费时间为 $4+2=6$。\n\n\n到车站 $5$ 的花费最少时间的路径为乘坐从 $1$ 到 $5$ 的普通列车，花费的时间为 $7$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（10 分）：$n\\le 1000$。\n- 子任务 2（10 分）：$k=0$。\n- 子任务 3（20 分）：$a_i=i$，$b_i=10^{18}$。\n- 子任务 4（20 分）：$m=0$，$n \\ge 2$，$c_{n-1}=d_{n-1}=0$，$c_n=d_n=2^k-1$。\n- 子任务 5（20 分）：$n=m=2^k$。\n- 子任务 6（20 分）：无特殊限制。\n\n对于全部的数据，$1\\le n\\le 10^6$，$0\\le m\\le10^6$，$0\\le k\\le 14$，$0\\le c_i,d_i< 2^k$，$0\\le a_i,b_i,w_i\\le 10^{18}$，$1\\le u_i,v_i\\le n$，$a$ 单调不降，$b$ 单调不升。", "locale": "zh-CN"}}}
{"pid": "P11565", "type": "P", "difficulty": 6, "samples": [["6\n1\n2\n3\n4\n100\n100000\n", "0\n1\n1\n3\n95\n99989\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "博弈论", "O2优化", "Ad-hoc", "分类讨论", "梦熊比赛"], "title": "【MX-X7-T6】[LSOT-3] 棋盘", "background": "原题链接：<https://oier.team/problems/X7G>。\n\n现在有一个序列。\n\n这个序列第 $1$ 项为 $0$，第 $2$ 项为 $1$，第 $3$ 项为 $1$，第 $4$ 项为 $3$。\n\n现在 [@lxwtr](https://www.luogu.com.cn/discuss/875194) 问你第 $n$ 项的值为多少。", "description": "Alice 和 Bob 找到了一个棋盘。棋盘可以看成一个数轴，初始时在原点处有 $n$ 个棋子。令 $a_i$ 表示数轴下标为 $i$ 的位置的棋子数量（原点 $i=0$），操作者每次会找到最小的满足 $a_i\\ge 2$ 的 $i$，令 $a_i$ 减去 $2$ 并选择令 $a_{i+1}$ 加上 $1$ 或令 $a_{i+2}$ 加上 $1$。由 Alice 先手，二人轮流操作。操作者必须操作，如果无法找到这样的 $i$ 则立即结束游戏。\n\nAlice 希望二人的总操作次数最少，Bob 希望二人的总操作次数最多，二人都是绝对聪明的。二人一共进行了 $T$ 次游戏，你希望知道每次游戏最终二人一共会进行多少次操作。", "inputFormat": "第一行，一个正整数 $T$，表示进行的游戏次数。\n\n接下来 $T$ 行，每行一个正整数 $n$，表示每次游戏开始时，原点的棋子个数。", "outputFormat": "共 $T$ 行，第 $i$ 行一个非负整数，表示第 $i$ 次游戏最终二人一共会进行多少次操作。", "hint": "**【样例解释】**\n\n对于第一次游戏，原点棋子数为 $1$，无法进行操作。\n\n对于第二次游戏，可以恰好进行一次操作之后使得 $a_1=1$ 或 $a_2=1$。无论哪一种都无法继续操作。\n\n对于第三次游戏，类似第二次游戏，额外在原点留下了一个棋子。\n\n对于第四次游戏，第一次操作无论 Alice 操作后将棋子放在哪个位置，Bob 都可以放在那个位置，这样 Alice 会再进行一次操作。总共 $3$ 次操作。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（5 分）：$n\\le16$。\n- 子任务 2（6 分）：$n\\le 50$。\n- 子任务 3（14 分）：$n\\le 200$。\n- 子任务 4（20 分）：$n\\le 5000$。\n- 子任务 5（21 分）：$n\\le 10^5$。\n- 子任务 6（34 分）：无特殊性质。\n\n对于全部的数据，$1\\le T\\le 500$，$1\\le n\\le 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X7-T6】[LSOT-3] 棋盘", "background": "原题链接：<https://oier.team/problems/X7G>。\n\n现在有一个序列。\n\n这个序列第 $1$ 项为 $0$，第 $2$ 项为 $1$，第 $3$ 项为 $1$，第 $4$ 项为 $3$。\n\n现在 [@lxwtr](https://www.luogu.com.cn/discuss/875194) 问你第 $n$ 项的值为多少。", "description": "Alice 和 Bob 找到了一个棋盘。棋盘可以看成一个数轴，初始时在原点处有 $n$ 个棋子。令 $a_i$ 表示数轴下标为 $i$ 的位置的棋子数量（原点 $i=0$），操作者每次会找到最小的满足 $a_i\\ge 2$ 的 $i$，令 $a_i$ 减去 $2$ 并选择令 $a_{i+1}$ 加上 $1$ 或令 $a_{i+2}$ 加上 $1$。由 Alice 先手，二人轮流操作。操作者必须操作，如果无法找到这样的 $i$ 则立即结束游戏。\n\nAlice 希望二人的总操作次数最少，Bob 希望二人的总操作次数最多，二人都是绝对聪明的。二人一共进行了 $T$ 次游戏，你希望知道每次游戏最终二人一共会进行多少次操作。", "inputFormat": "第一行，一个正整数 $T$，表示进行的游戏次数。\n\n接下来 $T$ 行，每行一个正整数 $n$，表示每次游戏开始时，原点的棋子个数。", "outputFormat": "共 $T$ 行，第 $i$ 行一个非负整数，表示第 $i$ 次游戏最终二人一共会进行多少次操作。", "hint": "**【样例解释】**\n\n对于第一次游戏，原点棋子数为 $1$，无法进行操作。\n\n对于第二次游戏，可以恰好进行一次操作之后使得 $a_1=1$ 或 $a_2=1$。无论哪一种都无法继续操作。\n\n对于第三次游戏，类似第二次游戏，额外在原点留下了一个棋子。\n\n对于第四次游戏，第一次操作无论 Alice 操作后将棋子放在哪个位置，Bob 都可以放在那个位置，这样 Alice 会再进行一次操作。总共 $3$ 次操作。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（5 分）：$n\\le16$。\n- 子任务 2（6 分）：$n\\le 50$。\n- 子任务 3（14 分）：$n\\le 200$。\n- 子任务 4（20 分）：$n\\le 5000$。\n- 子任务 5（21 分）：$n\\le 10^5$。\n- 子任务 6（34 分）：无特殊性质。\n\n对于全部的数据，$1\\le T\\le 500$，$1\\le n\\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P11566", "type": "P", "difficulty": 7, "samples": [["10\n100 100 715 1129 123 654\n3 3 1 1 2 2\n4 4 2 2 3 3\n4 3 4 3 3 2\n20 50 15 12 10 7\n50 20 33 11 25 3\n107151129 147744151 715 715 1129 1129\n23456 54321 1992 725 12347 7913\n10000000 10000000 2222 444 3333 555\n10000000 10000000 7130713 4237018 7812367 1245634\n", "1\n512\n4096\n32\n248906884\n412057510\n710040542\n936321181\n222744797\n17474728\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["O2优化", "最大公约数 gcd", "线性基", "构造", "Ad-hoc", "分类讨论", "梦熊比赛"], "title": "【MX-X7-T7】[LSOT-3] 魔女与推理的轮舞曲", "background": "原题链接：<https://oier.team/problems/X7H>。\n\n>魔女展示了空着的左手。$\\\\$\n把左手握上，向着那边，嘿嘿嘿。$\\\\$\n然后打开右拳，手心里有个糖球。$\\\\$\n那么，这是魔法呢？还是戏法呢？", "description": "黄金乡中，贝阿朵和战人在新的棋盘上展开的红蓝论战，这个棋盘的规则与之前的有所不同。\n\n具体地说，有初始全 $0$ 的一个 $n\\times m$ 的棋盘（格子数为 $n\\times m$），可以在棋盘上使用红色真实和蓝色真实。红色真实和蓝色真实都各代表一个矩形，分别是 $a\\times b$ 和 $c\\times d$，使用红色真实或蓝色真实，要选择棋盘上一个格子，然后将以这个格子为左上角的那个使用的真实所对应的矩形内的所有格子异或 $1$（如果超出棋盘则不能选择此格子）。\n\n贝阿朵想测试一些规则是否符合她的心意，所以她会问你对于某个规则，通过使用任意次红色真实与蓝色真实可以构筑出多少种不同的棋盘。\n\n由于答案可能过大，你仅需输出对 $10^9+7$ 取模的结果即可，贝阿朵可以通过使用魔法来复原结果。", "inputFormat": "第一行，一个正整数 $T$，表示贝阿朵想要测试的规则数量。\n\n接下来 $T$ 行，每行六个正整数 $n, m, a, b, c, d$，含义与题目中的一致。", "outputFormat": "对于每个贝阿朵想测试的规则，一行，一个非负整数，表示棋盘可能数对 $10^9+7$ 取模的结果。", "hint": "> 没有爱，就看不见。\n\n**【样例解释】**\n\n对于第一种规则，无法使用红色真实或蓝色真实，故只有全是 $0$ 一种情况。\n\n对于第二种规则，每个格子都可以独立地取 $0$ 或 $1$，故答案为 $2^{3\\times 3}=512$。\n\n对于第三种规则，一种可能的局面是：\n\n```\n1100\n1011\n0100\n0100\n```\n\n生成方式为选择第一行第一个格子使用红色真实，选择第二行第二个格子使用蓝色真实，选择第三行第三个格子使用红色真实。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（3 分）：$a\\mid c$，$b\\mid d$。\n- 子任务 2（4 分）：$\\sum n\\times m\\le 20$。\n- 子任务 3（16 分）：$\\sum n\\times m\\le 1000$。\n- 子任务 4（17 分）：$a=b$，$c=d$。\n- 子任务 5（19 分）：$a,b,c,d$ 中任意两个数的 $\\gcd$ 都为 $1$。\n- 子任务 6（20 分）：$100\\times(a+b+c+d)\\le  \\min (n,m)$。\n- 子任务 7（21 分）：无特殊性质。\n\n对于全部的数据，$1\\le T\\le10^6$，$1\\le n,m,a,b,c,d \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X7-T7】[LSOT-3] 魔女与推理的轮舞曲", "background": "原题链接：<https://oier.team/problems/X7H>。\n\n>魔女展示了空着的左手。$\\\\$\n把左手握上，向着那边，嘿嘿嘿。$\\\\$\n然后打开右拳，手心里有个糖球。$\\\\$\n那么，这是魔法呢？还是戏法呢？", "description": "黄金乡中，贝阿朵和战人在新的棋盘上展开的红蓝论战，这个棋盘的规则与之前的有所不同。\n\n具体地说，有初始全 $0$ 的一个 $n\\times m$ 的棋盘（格子数为 $n\\times m$），可以在棋盘上使用红色真实和蓝色真实。红色真实和蓝色真实都各代表一个矩形，分别是 $a\\times b$ 和 $c\\times d$，使用红色真实或蓝色真实，要选择棋盘上一个格子，然后将以这个格子为左上角的那个使用的真实所对应的矩形内的所有格子异或 $1$（如果超出棋盘则不能选择此格子）。\n\n贝阿朵想测试一些规则是否符合她的心意，所以她会问你对于某个规则，通过使用任意次红色真实与蓝色真实可以构筑出多少种不同的棋盘。\n\n由于答案可能过大，你仅需输出对 $10^9+7$ 取模的结果即可，贝阿朵可以通过使用魔法来复原结果。", "inputFormat": "第一行，一个正整数 $T$，表示贝阿朵想要测试的规则数量。\n\n接下来 $T$ 行，每行六个正整数 $n, m, a, b, c, d$，含义与题目中的一致。", "outputFormat": "对于每个贝阿朵想测试的规则，一行，一个非负整数，表示棋盘可能数对 $10^9+7$ 取模的结果。", "hint": "> 没有爱，就看不见。\n\n**【样例解释】**\n\n对于第一种规则，无法使用红色真实或蓝色真实，故只有全是 $0$ 一种情况。\n\n对于第二种规则，每个格子都可以独立地取 $0$ 或 $1$，故答案为 $2^{3\\times 3}=512$。\n\n对于第三种规则，一种可能的局面是：\n\n```\n1100\n1011\n0100\n0100\n```\n\n生成方式为选择第一行第一个格子使用红色真实，选择第二行第二个格子使用蓝色真实，选择第三行第三个格子使用红色真实。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（3 分）：$a\\mid c$，$b\\mid d$。\n- 子任务 2（4 分）：$\\sum n\\times m\\le 20$。\n- 子任务 3（16 分）：$\\sum n\\times m\\le 1000$。\n- 子任务 4（17 分）：$a=b$，$c=d$。\n- 子任务 5（19 分）：$a,b,c,d$ 中任意两个数的 $\\gcd$ 都为 $1$。\n- 子任务 6（20 分）：$100\\times(a+b+c+d)\\le  \\min (n,m)$。\n- 子任务 7（21 分）：无特殊性质。\n\n对于全部的数据，$1\\le T\\le10^6$，$1\\le n,m,a,b,c,d \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11567", "type": "P", "difficulty": 7, "samples": [["2 1\n01\n10\n1 2", "1"], ["参见下发文件", "参见下发文件"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["集合幂级数，子集卷积"], "title": "建造军营 II", "background": "A 国又在与 B 国激烈交战中。", "description": "在前线，A 国有 $n$ 个重要据点。有一些据点间存在双向道路，**每条道路均可以选择是否派遣军队驻守**。\n  \nA 国情报部门得知，B 国即将实行 $k$ 个作战计划中的一个。第 $i$ 个作战计划的内容是，向 $p_i$ 据点至 $q_i$ 据点的交通线发动袭击。具体来说，B 国将选择一条**可经过重复据点，但不经过重复道路**的由 $p_i$ 到 $q_i$ 的路径，若这条路径上**存在道路无驻守军队**，则袭击成功。 \n  \nA 国希望 B 国的任何作战计划都不可能获得成功。除了确保兵力足够以外，A 国**还可以选择一些道路进行焦土行动**——这将防止 B 国通过这条道路实施作战。但是焦土行动本身也会影响 A 国的补给运输，因此**被焦土的道路上不应该部署部队**；同时， A 国要求**在焦土行动后，任意两个据点之间仍然存在至少一条不经过被焦土的道路的路径**。\n  \n作为 A 国军队最高参谋部的成员，你被要求给出不同防守计划的方案数——**两个防守计划不同，当且仅当存在一条道路的驻守情况不同，或一条道路焦土行动实施与否的状态不同**。方案数对 $10^9+7$ 取模。", "inputFormat": "第一行两个整数 $n,k$。\n  \n接下来  $n$ 行长度为 $n$ 的 `01` 表格 $w_{1\\sim n,1\\sim n}$，$w_{i,j}$ 为 `1` 则代表据点 $i$ 与据点 $j$ 间存在道路。\n  \n接下来  $k$ 行，每行读入两个整数 $p_i,q_i$。", "outputFormat": "一行一个整数，表示答案。", "hint": "对于 $100 \\%$ 的数据：$2 \\leq n \\leq 16$，$0\\le k \\leq 3n$，$1 \\leq p_i,q_i \\leq n$，$w_{i,j} = w_{j,i}$，$w_{i,i}=0$。\n\n::cute-table\n| 子任务编号 | $n \\leq$ | $k \\leq$ | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ |$ 3$ | $3n$ | / | $5$ |\n| $2$ | $6 $| ^ | ^ | $10$ |\n| $3$ | $16$ | $0$ | ^ | $10$ |\n| $4$ | ^ | $3n$ | A | $10$ |\n| $5$ | ^ | ^ | B | $20$ |\n| $6$ | $10$ | ^ | / | $10$ |\n| $7$ | $13 $| ^ | ^ | $10$ |\n| $8$ | $16$ | ^ | ^ | $25$ |\n\n特殊性质 A：保证 $\\sum_{i,j} w_{i,j} = 2n-2$。\n\n特殊性质 B：保证 $p_i = 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "建造军营 II", "background": "A 国又在与 B 国激烈交战中。", "description": "在前线，A 国有 $n$ 个重要据点。有一些据点间存在双向道路，**每条道路均可以选择是否派遣军队驻守**。\n  \nA 国情报部门得知，B 国即将实行 $k$ 个作战计划中的一个。第 $i$ 个作战计划的内容是，向 $p_i$ 据点至 $q_i$ 据点的交通线发动袭击。具体来说，B 国将选择一条**可经过重复据点，但不经过重复道路**的由 $p_i$ 到 $q_i$ 的路径，若这条路径上**存在道路无驻守军队**，则袭击成功。 \n  \nA 国希望 B 国的任何作战计划都不可能获得成功。除了确保兵力足够以外，A 国**还可以选择一些道路进行焦土行动**——这将防止 B 国通过这条道路实施作战。但是焦土行动本身也会影响 A 国的补给运输，因此**被焦土的道路上不应该部署部队**；同时， A 国要求**在焦土行动后，任意两个据点之间仍然存在至少一条不经过被焦土的道路的路径**。\n  \n作为 A 国军队最高参谋部的成员，你被要求给出不同防守计划的方案数——**两个防守计划不同，当且仅当存在一条道路的驻守情况不同，或一条道路焦土行动实施与否的状态不同**。方案数对 $10^9+7$ 取模。", "inputFormat": "第一行两个整数 $n,k$。\n  \n接下来  $n$ 行长度为 $n$ 的 `01` 表格 $w_{1\\sim n,1\\sim n}$，$w_{i,j}$ 为 `1` 则代表据点 $i$ 与据点 $j$ 间存在道路。\n  \n接下来  $k$ 行，每行读入两个整数 $p_i,q_i$。", "outputFormat": "一行一个整数，表示答案。", "hint": "对于 $100 \\%$ 的数据：$2 \\leq n \\leq 16$，$0\\le k \\leq 3n$，$1 \\leq p_i,q_i \\leq n$，$w_{i,j} = w_{j,i}$，$w_{i,i}=0$。\n\n::cute-table\n| 子任务编号 | $n \\leq$ | $k \\leq$ | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ |$ 3$ | $3n$ | / | $5$ |\n| $2$ | $6 $| ^ | ^ | $10$ |\n| $3$ | $16$ | $0$ | ^ | $10$ |\n| $4$ | ^ | $3n$ | A | $10$ |\n| $5$ | ^ | ^ | B | $20$ |\n| $6$ | $10$ | ^ | / | $10$ |\n| $7$ | $13 $| ^ | ^ | $10$ |\n| $8$ | $16$ | ^ | ^ | $25$ |\n\n特殊性质 A：保证 $\\sum_{i,j} w_{i,j} = 2n-2$。\n\n特殊性质 B：保证 $p_i = 1$。", "locale": "zh-CN"}}}
{"pid": "P11568", "type": "P", "difficulty": 2, "samples": [["2 6", "83 138017‬\n"], ["5 5", "24513 40723\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化"], "title": "「chaynOI R1 T1」一维数组", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/tc5is950.png)", "description": "给你两个正整数 $n,m$，你要构造两个正整数 $x,y$（不能有前导 $0$），使得 $x$ 有 $n$ 位，$y$ 有 $m$ 位，且 $x\\times y$ 是回文数。\n\n请保证你构造的输出合法，否则后果自负。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行两个整数，表示 $x,y$。", "hint": "对于 $100\\%$ 的数据，$n,m \\le 10^3$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1(25pts)：$n,m \\le 6$。\n- Subtask 2(10pts)：$m = 1$。\n- Subtask 3(65pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「chaynOI R1 T1」一维数组", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/tc5is950.png)", "description": "给你两个正整数 $n,m$，你要构造两个正整数 $x,y$（不能有前导 $0$），使得 $x$ 有 $n$ 位，$y$ 有 $m$ 位，且 $x\\times y$ 是回文数。\n\n请保证你构造的输出合法，否则后果自负。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行两个整数，表示 $x,y$。", "hint": "对于 $100\\%$ 的数据，$n,m \\le 10^3$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1(25pts)：$n,m \\le 6$。\n- Subtask 2(10pts)：$m = 1$。\n- Subtask 3(65pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11569", "type": "P", "difficulty": 3, "samples": [["5 6\n1 2 3 4 5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "「chaynOI R1 T2」画图软件", "background": "### 14:27 添加了 T2 样例解释。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g3femwbe.png)\n", "description": "给你一个序列 $a$，你可以进行不超过 $k$ 次「落笔」操作，每次选择一个 $p(1\\le p\\le n)$ 使得 $a_p \\gets a_p +1$（即让 $a$ 中的第 $p$ 项加上 $1$），求出让 $a$ 为非负公差的等差数列的最终序列可能的情况数。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数，表示序列 $a$。\n", "outputFormat": "一行一个整数，表示答案。", "hint": "### 样例解释\n\n共 $(1,2,3,4,5),(2,3,4,5,6)$，$2$ 种。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1 \\le n,a_i \\le 10^6$，$k\\le 10^7$。\n\n**本题采用捆绑测试。**\n\n+ Subtask 1(20pts)：$n,k \\le 100$。\n+ Subtask 2(15pts)：$n \\le 100$。\n+ Subtask 3(15pts)：$k \\le 10^5$。\n+ Subtask 4(50pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「chaynOI R1 T2」画图软件", "background": "### 14:27 添加了 T2 样例解释。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g3femwbe.png)\n", "description": "给你一个序列 $a$，你可以进行不超过 $k$ 次「落笔」操作，每次选择一个 $p(1\\le p\\le n)$ 使得 $a_p \\gets a_p +1$（即让 $a$ 中的第 $p$ 项加上 $1$），求出让 $a$ 为非负公差的等差数列的最终序列可能的情况数。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数，表示序列 $a$。\n", "outputFormat": "一行一个整数，表示答案。", "hint": "### 样例解释\n\n共 $(1,2,3,4,5),(2,3,4,5,6)$，$2$ 种。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1 \\le n,a_i \\le 10^6$，$k\\le 10^7$。\n\n**本题采用捆绑测试。**\n\n+ Subtask 1(20pts)：$n,k \\le 100$。\n+ Subtask 2(15pts)：$n \\le 100$。\n+ Subtask 3(15pts)：$k \\le 10^5$。\n+ Subtask 4(50pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11570", "type": "P", "difficulty": 4, "samples": [["4 2\n0 1 3 2\n1 2 2\n2 1 4", "2\n0"], ["10 10\n0 0 1 1 1 0 0 1 0 1\n1 0 0\n2 0 1\n3 1 2\n4 0 1\n5 0 2\n6 0 1\n7 1 1\n8 2 2\n9 0 0\n10 1 2\n", "0\n1\n5\n2\n6\n2\n1\n2\n0\n0\n"]], "limits": {"time": [600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "「chaynOI R1 T3」镍铬合金机器人", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/wv3r15c6.png)\n", "description": "给定一个长为 $n$ 的序列 $bot$。\n\n有 $q$ 次询问，每次给出三个数 $l,x,y$，请你求出有多少个以 $l$ 为左端点的区间 $[l,r]$（$l\\le r$）使得 $\\text{mex}(\\{bot_l,bot_{l+1},\\cdots,bot_r\\})\\in[x,y]$。\n\n注：一个可重集合 $S$ 的 $\\text{mex}$ 函数 $\\text{mex}(S)$ 指的是**最小**的没有在 $S$ 中出现过的**非负整数**，如 $\\text{mex}(\\{0,1,1,3\\}) = 2$。 ", "inputFormat": "第一行两个正整数 $n,q$，表示序列的长度和询问的次数。\n\n第二行 $n$ 个数，表示序列 $bot$。\n\n接下来 $q$ 行，每行三个整数 $l,x,y$。", "outputFormat": "输出共 $q$ 行，每行一个整数，表示答案。\n\n", "hint": "对于 $100\\%$ 的数据，$1\\le n,q \\le 3\\times 10^5$，$0\\le bot_i < n$，$0\\le x \\le y \\le n$，$1 \\le l\\le n$。\n\n**本题采用捆绑测试。**\n\n+ Subtask 1(10pts)：$n,q\\le 300$。\n+ Subtask 2(15pts)：$n,q\\le 2000$。\n+ Subtask 3(15pts)：$bot_i \\le 1$。\n+ Subtask 4(20pts)：$x=y$。\n+ Subtask 5(40pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「chaynOI R1 T3」镍铬合金机器人", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/wv3r15c6.png)\n", "description": "给定一个长为 $n$ 的序列 $bot$。\n\n有 $q$ 次询问，每次给出三个数 $l,x,y$，请你求出有多少个以 $l$ 为左端点的区间 $[l,r]$（$l\\le r$）使得 $\\text{mex}(\\{bot_l,bot_{l+1},\\cdots,bot_r\\})\\in[x,y]$。\n\n注：一个可重集合 $S$ 的 $\\text{mex}$ 函数 $\\text{mex}(S)$ 指的是**最小**的没有在 $S$ 中出现过的**非负整数**，如 $\\text{mex}(\\{0,1,1,3\\}) = 2$。 ", "inputFormat": "第一行两个正整数 $n,q$，表示序列的长度和询问的次数。\n\n第二行 $n$ 个数，表示序列 $bot$。\n\n接下来 $q$ 行，每行三个整数 $l,x,y$。", "outputFormat": "输出共 $q$ 行，每行一个整数，表示答案。\n\n", "hint": "对于 $100\\%$ 的数据，$1\\le n,q \\le 3\\times 10^5$，$0\\le bot_i < n$，$0\\le x \\le y \\le n$，$1 \\le l\\le n$。\n\n**本题采用捆绑测试。**\n\n+ Subtask 1(10pts)：$n,q\\le 300$。\n+ Subtask 2(15pts)：$n,q\\le 2000$。\n+ Subtask 3(15pts)：$bot_i \\le 1$。\n+ Subtask 4(20pts)：$x=y$。\n+ Subtask 5(40pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11571", "type": "P", "difficulty": 5, "samples": [["111 1 2 ", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "数位 DP"], "title": "「chaynOI R1 T4」橙红色的鱼", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/w6fq1o22.png)", "description": "给定 $r,m,s$，问有多少个正整数对 $(fi,sh)$，满足：\n\n+ $ 0 \\le fi \\le sh \\le r$。\n\n+ $\\operatorname{popcount}(fi \\oplus sh) = m$。\n\n+ $\\operatorname{popcount}(fi + sh) = s$。\n\n其中，$\\operatorname{popcount}(x)$ 表示 $x$ 的二进制表示中 $1$ 的个数，$\\oplus$ 表示异或运算。\n\n为了方便，$r$ 以二进制形式给出。\n\n保证给出的任何数字不含有前导 $0$。\n\n答案对 $998244353$ 取模。", "inputFormat": "一行三个整数 $r,m,s$。", "outputFormat": "一行一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "### 样例解释：\n\n下文数字为十进制。\n\n$r=7$，有 $(1,5),(2,3),(3,7),(4,5),(4,6),(5,7)$ 六种。\n\n### 数据范围：\n\n记 $n$ 为给出的 $r$ 的长度。 \n\n对于 $100\\%$ 的数据，$1 \\le n,m,s \\le 200$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1(15pts)：$n \\le 12$。\n- Subtask 2(25pts)：$m,s \\le 30$。\n- Subtask 3(25pts)：$r=2^n-1$。\n- Subtask 4(35pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「chaynOI R1 T4」橙红色的鱼", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/w6fq1o22.png)", "description": "给定 $r,m,s$，问有多少个正整数对 $(fi,sh)$，满足：\n\n+ $ 0 \\le fi \\le sh \\le r$。\n\n+ $\\operatorname{popcount}(fi \\oplus sh) = m$。\n\n+ $\\operatorname{popcount}(fi + sh) = s$。\n\n其中，$\\operatorname{popcount}(x)$ 表示 $x$ 的二进制表示中 $1$ 的个数，$\\oplus$ 表示异或运算。\n\n为了方便，$r$ 以二进制形式给出。\n\n保证给出的任何数字不含有前导 $0$。\n\n答案对 $998244353$ 取模。", "inputFormat": "一行三个整数 $r,m,s$。", "outputFormat": "一行一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "### 样例解释：\n\n下文数字为十进制。\n\n$r=7$，有 $(1,5),(2,3),(3,7),(4,5),(4,6),(5,7)$ 六种。\n\n### 数据范围：\n\n记 $n$ 为给出的 $r$ 的长度。 \n\n对于 $100\\%$ 的数据，$1 \\le n,m,s \\le 200$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1(15pts)：$n \\le 12$。\n- Subtask 2(25pts)：$m,s \\le 30$。\n- Subtask 3(25pts)：$r=2^n-1$。\n- Subtask 4(35pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11572", "type": "P", "difficulty": 0, "samples": [["6\n2 2\n2 -6\n-2 -4\n-6 4\n10 -10\n-8 12\n16\nQ\nC -4 -4\nF\nF\nQ\nF\nC 6 -2\nB\nB\nB\nQ\nC 0 6\nQ\nF\nC -8 4\nQ", "4\n4\n3\n1\n5"], ["5\n6 2\n0 -6\n-2 2\n-6 -8\n4 0\n12\nQ\nC 4 4\nQ\nF\nF\nF\nC -6 -2\nQ\nB\nB\nC -4 -6\nQ", "3\n5\n5\n4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "COTS（克罗地亚）"], "title": "[COTS 2015] 机械臂 / Ruka", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D1T1。$\\texttt{2s,0.5G}$。", "description": "\n给定 $n$ 个二维笛卡尔坐标系中的向量 $v_i=(x_i,y_i)$。\n\n令点 $P_0=(1,1)$。对于 $1\\le i\\le n$，有 $P_i=P_{i-1}+v_i$。\n\n有一个变量 $\\mathrm{pos}$，初始时为 $1$。有 $m$ 个操作：\n\n- $\\texttt{B}$：令 $\\mathrm{pos}\\gets\\max(1,\\mathrm{pos}-1)$。\n- $\\texttt{F}$：令 $\\mathrm{pos}\\gets\\min(n,\\mathrm{pos}+1)$。\n- $\\texttt{C}$ $x$ $y$：令 $v_{\\mathrm{pos}}\\gets (x,y)$。\n- $\\texttt{Q}$：询问 $\\displaystyle \\sum_{1\\le i\\le n} f(i)$，其中 $f(i)$ 表示线段 $P_{i-1}P_i$ 与坐标轴相交了多少次。\n    - **特别地，若 $P_{i-1}P_i$ 经过原点，我们也认为与两个坐标轴都相交。**\n\n这里，**保证任意时刻，对于 $\\forall 1\\le i\\le n$，都有 $x_i,y_i$ 是偶数。**\n\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个**偶数** $x_i,y_i$。\n\n第 $(n+2)$ 行，一个正整数 $m$。\n\n接下来 $m$ 行，每行先是一个大写字母，再是零个或两个**偶数**，描述一个操作。格式见题目描述处。", "outputFormat": "\n对于每个查询操作，输出一行一个非负整数表示答案。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 10^5$，$1\\le n\\le 3\\times 10^5$；\n- $|x|,|y|,|x_i|,|y_i|\\le 500$，且**均为偶数**。\n\n\n| 子任务编号 | $n\\le $ |  $m\\le $ |  得分 |  \n| :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 1\\, 000 $    |  $1\\, 000$ |$ 9 $   |  \n| $ 2 $    | $ 5\\times 10^4 $   |  $ 10^5 $ |  $ 35 $   |  \n| $ 3 $    | $ 10^5 $ | $ 3\\times 10^5 $ |  $ 56 $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2015] 机械臂 / Ruka", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D1T1。$\\texttt{2s,0.5G}$。", "description": "\n给定 $n$ 个二维笛卡尔坐标系中的向量 $v_i=(x_i,y_i)$。\n\n令点 $P_0=(1,1)$。对于 $1\\le i\\le n$，有 $P_i=P_{i-1}+v_i$。\n\n有一个变量 $\\mathrm{pos}$，初始时为 $1$。有 $m$ 个操作：\n\n- $\\texttt{B}$：令 $\\mathrm{pos}\\gets\\max(1,\\mathrm{pos}-1)$。\n- $\\texttt{F}$：令 $\\mathrm{pos}\\gets\\min(n,\\mathrm{pos}+1)$。\n- $\\texttt{C}$ $x$ $y$：令 $v_{\\mathrm{pos}}\\gets (x,y)$。\n- $\\texttt{Q}$：询问 $\\displaystyle \\sum_{1\\le i\\le n} f(i)$，其中 $f(i)$ 表示线段 $P_{i-1}P_i$ 与坐标轴相交了多少次。\n    - **特别地，若 $P_{i-1}P_i$ 经过原点，我们也认为与两个坐标轴都相交。**\n\n这里，**保证任意时刻，对于 $\\forall 1\\le i\\le n$，都有 $x_i,y_i$ 是偶数。**\n\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个**偶数** $x_i,y_i$。\n\n第 $(n+2)$ 行，一个正整数 $m$。\n\n接下来 $m$ 行，每行先是一个大写字母，再是零个或两个**偶数**，描述一个操作。格式见题目描述处。", "outputFormat": "\n对于每个查询操作，输出一行一个非负整数表示答案。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 10^5$，$1\\le n\\le 3\\times 10^5$；\n- $|x|,|y|,|x_i|,|y_i|\\le 500$，且**均为偶数**。\n\n\n| 子任务编号 | $n\\le $ |  $m\\le $ |  得分 |  \n| :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 1\\, 000 $    |  $1\\, 000$ |$ 9 $   |  \n| $ 2 $    | $ 5\\times 10^4 $   |  $ 10^5 $ |  $ 35 $   |  \n| $ 3 $    | $ 10^5 $ | $ 3\\times 10^5 $ |  $ 56 $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11573", "type": "P", "difficulty": 0, "samples": [["5 2\n3 5 1 4 3\n3 5", "2\n1"], ["7 7\n7 7 7 7 7 7 7\n7 6 5 4 3 2 1", "1\n6\n15\n20\n15\n6\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "COTS（克罗地亚）"], "title": "[COTS 2015] 关灯泡 / Žarulje", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D1T2。$\\texttt{1s,0.5G}$。", "description": "\n有 $n$ 盏灯泡排成一排，从左到右编号 $1\\sim n$。第 $i$ 盏灯泡发光的功率为 $a_i$ 瓦。\n\n现在想要将所有灯泡全部关闭。考虑如下的贪心算法：\n\n- 选择起始位置 $p$。关闭灯泡 $p$。\n- 令当前位置为 $x$。若还有灯泡未关闭，循环执行以下流程：\n    - 若只有 $x$ 左边有未关闭的灯泡，则关闭 $x$ 左边离 $x$ 最近的灯泡 $l$，并令 $x\\gets l$。\n    - 若只有 $x$ 右边有未关闭的灯泡，则关闭 $x$ 右边离 $x$ 最近的灯泡 $r$，并令 $x\\gets r$。\n    - 否则，$x$ 左边离 $x$ 最近的灯泡为 $l$，令 $x$ 右边离 $x$ 最近的灯泡为 $r$。\n        - 如果两盏灯泡功率相等，则随机选择一盏灯泡 $y$。关闭 $y$，并令 $x\\gets y$。\n        - 否则，令功率更大的灯泡为 $y$。关闭 $y$，并令 $x\\gets y$。\n\n\n定义 $f(p)$ 为起始位置为 $p$ 时，上述贪心算法产生的不同关灯泡序列有多少个。\n\n给定 $m$ 个位置 $x_1,x_2,\\cdots,x_m$。对于 $i=1,2,\\cdots,m$，求出 $f(x_i)$ 对 $(10^9+7)$ 取模后的结果。", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n第二行，$n$ 个正整数 $a_1,a_2,\\cdots,a_n$。\n\n第三行，$m$ 个正整数 $x_1,x_2,\\cdots,x_m$。\n", "outputFormat": "\n输出 $m$ 行。每行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：起始位置为 $3$ 时，$[3,2,4,1,5]$ 和 $[3,2,4,5,1]$ 是可能的两种关灯泡顺序。\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le x_i\\le n\\le 2\\times 10^5$；\n- $1\\le a_i,m\\le 2\\times 10^5$。\n\n| 子任务编号 | $n\\le $ |  $m\\le $ |  得分 |  \n| :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 2\\times 10^3 $    |  $2\\times 10^3$ |$ 22 $   |  \n| $ 2 $    | $ 2\\times 10^5 $   |  $ 5 $ |  $ 38 $   |  \n| $ 3 $    | $ 2\\times 10^5 $ | $ 2\\times 10^5 $ |  $ 40 $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2015] 关灯泡 / Žarulje", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D1T2。$\\texttt{1s,0.5G}$。", "description": "\n有 $n$ 盏灯泡排成一排，从左到右编号 $1\\sim n$。第 $i$ 盏灯泡发光的功率为 $a_i$ 瓦。\n\n现在想要将所有灯泡全部关闭。考虑如下的贪心算法：\n\n- 选择起始位置 $p$。关闭灯泡 $p$。\n- 令当前位置为 $x$。若还有灯泡未关闭，循环执行以下流程：\n    - 若只有 $x$ 左边有未关闭的灯泡，则关闭 $x$ 左边离 $x$ 最近的灯泡 $l$，并令 $x\\gets l$。\n    - 若只有 $x$ 右边有未关闭的灯泡，则关闭 $x$ 右边离 $x$ 最近的灯泡 $r$，并令 $x\\gets r$。\n    - 否则，$x$ 左边离 $x$ 最近的灯泡为 $l$，令 $x$ 右边离 $x$ 最近的灯泡为 $r$。\n        - 如果两盏灯泡功率相等，则随机选择一盏灯泡 $y$。关闭 $y$，并令 $x\\gets y$。\n        - 否则，令功率更大的灯泡为 $y$。关闭 $y$，并令 $x\\gets y$。\n\n\n定义 $f(p)$ 为起始位置为 $p$ 时，上述贪心算法产生的不同关灯泡序列有多少个。\n\n给定 $m$ 个位置 $x_1,x_2,\\cdots,x_m$。对于 $i=1,2,\\cdots,m$，求出 $f(x_i)$ 对 $(10^9+7)$ 取模后的结果。", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n第二行，$n$ 个正整数 $a_1,a_2,\\cdots,a_n$。\n\n第三行，$m$ 个正整数 $x_1,x_2,\\cdots,x_m$。\n", "outputFormat": "\n输出 $m$ 行。每行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：起始位置为 $3$ 时，$[3,2,4,1,5]$ 和 $[3,2,4,5,1]$ 是可能的两种关灯泡顺序。\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le x_i\\le n\\le 2\\times 10^5$；\n- $1\\le a_i,m\\le 2\\times 10^5$。\n\n| 子任务编号 | $n\\le $ |  $m\\le $ |  得分 |  \n| :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 2\\times 10^3 $    |  $2\\times 10^3$ |$ 22 $   |  \n| $ 2 $    | $ 2\\times 10^5 $   |  $ 5 $ |  $ 38 $   |  \n| $ 3 $    | $ 2\\times 10^5 $ | $ 2\\times 10^5 $ |  $ 40 $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11574", "type": "P", "difficulty": 5, "samples": [["4\n3 4 4\n2 4 3\n4 1 6\n2 3 2", "7 4\n2 7\n10 1\n0 3"], ["4\n1 1 3\n3 3 2\n2 6 3\n7 3 3", "4 1\n4 2\n5 6\n10 3"], ["5\n4 2 1\n1 4 4\n2 1 2\n0 0 5\n4 0 3", "5 2\n5 4\n3 2\n3 -2\n7 0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "线段树", "离散化", "Special Judge", "扫描线", "COTS（克罗地亚）"], "title": "[COTS 2015] 点外卖 / Dostava", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D2T1。$\\texttt{2s,0.5G}$。\n", "description": "\n平面上有 $n$ 个整点。但是不知道它们的位置。\n\n有 $n$ 条信息，第 $i$ 条信息形如 $x_i,y_i,t_i$，意思是「距离 $(x_i,y_i)$ 最近的点到 $(x_i,y_i)$ 的距离为 $t_i$」。试构造一组可能的点的位置。\n\n这里，距离指的是 **Manhattan 距离**。换句话说，定义点 $(a,b)$ 和 $(c,d)$ 的距离为 $|a-c|+|b-d|$。", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行三个正整数 $x_i,y_i,t_i$。\n\n**保证有解。**", "outputFormat": "\n输出 $n$ 行，每行两个整数 $x_i,y_i$，描述一个点。\n\n**不要求**这 $n$ 个点两两不同。但是**你需要保证 $|x_i|,|y_i|\\le 10^9$**。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 5\\times 10^4$；\n- $1\\le x_i,y_i,t_i\\le 10^8$；\n- 存在一组合法的解。\n\n| 子任务编号 | $n\\le $ |  $x_i,y_i,t_i\\le $ |  得分 |  \n| :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 100 $    |  $100$ |$ 10 $   |  \n| $ 2 $    | $ 10^3 $   |  $ 5\\times 10^8 $ |  $ 36 $   |  \n| $ 3 $    | $ 5\\times 10^4 $ | $ 5\\times 10^8 $ |  $ 54      $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2015] 点外卖 / Dostava", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D2T1。$\\texttt{2s,0.5G}$。\n", "description": "\n平面上有 $n$ 个整点。但是不知道它们的位置。\n\n有 $n$ 条信息，第 $i$ 条信息形如 $x_i,y_i,t_i$，意思是「距离 $(x_i,y_i)$ 最近的点到 $(x_i,y_i)$ 的距离为 $t_i$」。试构造一组可能的点的位置。\n\n这里，距离指的是 **Manhattan 距离**。换句话说，定义点 $(a,b)$ 和 $(c,d)$ 的距离为 $|a-c|+|b-d|$。", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行三个正整数 $x_i,y_i,t_i$。\n\n**保证有解。**", "outputFormat": "\n输出 $n$ 行，每行两个整数 $x_i,y_i$，描述一个点。\n\n**不要求**这 $n$ 个点两两不同。但是**你需要保证 $|x_i|,|y_i|\\le 10^9$**。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 5\\times 10^4$；\n- $1\\le x_i,y_i,t_i\\le 10^8$；\n- 存在一组合法的解。\n\n| 子任务编号 | $n\\le $ |  $x_i,y_i,t_i\\le $ |  得分 |  \n| :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 100 $    |  $100$ |$ 10 $   |  \n| $ 2 $    | $ 10^3 $   |  $ 5\\times 10^8 $ |  $ 36 $   |  \n| $ 3 $    | $ 5\\times 10^4 $ | $ 5\\times 10^8 $ |  $ 54      $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11575", "type": "P", "difficulty": 5, "samples": [["5 5\n...3.\n....1\n..0.3\n489..\n.....", "21\n25\n28\n28\n28"], ["3 5\n999.1\n.....\n1.999", "54\n56\n56\n56\n56"], ["5 5\n.27..\n7.063\n....7\n78...\n8...2", "48\n57\n57\n57\n57"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "COTS（克罗地亚）"], "title": "[COTS 2015] 挖油田 / Nafta", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D2T2。$\\texttt{2s,0.5G}$。", "description": "\n给定 $n\\times m$ 的矩阵。\n\n这个矩阵描述的是一块油田的**横截面**：矩阵中的每一个位置要么是 $\\texttt{.}$，表示这里是岩石；要么是 $\\texttt{0}\\sim \\texttt{9}$ 间的一个数字，表示这里是油层，以及这个油层储存了多少单位的石油。\n\n选择若干**列**开采石油。如果某个油层与这一列上的油层（仅通过油层）**四连通**，那么这个油层就可以被开采。\n\n对于 $i=1,2,\\cdots,m$，求出：如果选择 $i$ 列开采石油，最多能获得多少单位的石油。\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的字符串，描述油田。", "outputFormat": "输出 $m$ 行，每行一个整数表示答案。\n", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le n,m\\le 2\\times 10^3$。\n\n| 子任务编号 | $n,m\\le $ |  得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ 50 $    |  $ 11 $   |  \n| $ 2 $    | $ 300 $   |    $ 23 $   |  \n| $ 3 $    | $ 2\\times 10^3 $ | $ 66      $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2015] 挖油田 / Nafta", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D2T2。$\\texttt{2s,0.5G}$。", "description": "\n给定 $n\\times m$ 的矩阵。\n\n这个矩阵描述的是一块油田的**横截面**：矩阵中的每一个位置要么是 $\\texttt{.}$，表示这里是岩石；要么是 $\\texttt{0}\\sim \\texttt{9}$ 间的一个数字，表示这里是油层，以及这个油层储存了多少单位的石油。\n\n选择若干**列**开采石油。如果某个油层与这一列上的油层（仅通过油层）**四连通**，那么这个油层就可以被开采。\n\n对于 $i=1,2,\\cdots,m$，求出：如果选择 $i$ 列开采石油，最多能获得多少单位的石油。\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的字符串，描述油田。", "outputFormat": "输出 $m$ 行，每行一个整数表示答案。\n", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le n,m\\le 2\\times 10^3$。\n\n| 子任务编号 | $n,m\\le $ |  得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ 50 $    |  $ 11 $   |  \n| $ 2 $    | $ 300 $   |    $ 23 $   |  \n| $ 3 $    | $ 2\\times 10^3 $ | $ 66      $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11576", "type": "P", "difficulty": 1, "samples": [["3\n1\n0", "sad"], ["3\n2\n1", "happy"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCC（加拿大）"], "title": "[CCC 2020] Dog Treats", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T1 Dog Treats。", "description": "小狗 Barley 喜欢零食。在一天结束时，他的心情取决于他在一天中收到的零食的大小与数量。\n\n零食有三种大小：小、中、大。若这一天它获得小零食 $S$ 份，中零食 $M$ 份，大零食 $L$ 份，则他的快乐值可以用以下公式来衡量：\n\n$1 \\times S+2\\times M + 3\\times L$\n\n如果 Barley 的快乐值大于等于 $10$，那么它是快乐的。否则，他会感到十分伤心。请判断 Barley 在一天结束时心情是快乐的还是伤心的。", "inputFormat": "输入共 $3$ 行。\n\n第一行一个整数 $S(0 \\le S \\le 10)$，表示小零食数量。\n\n第二行一个整数 $M(0 \\le M \\le 10)$，表示中零食数量。\n\n第三行一个整数 $L(0 \\le L \\le 10)$，表示大零食数量。", "outputFormat": "一行一个字符串，若 Barley 的心情是快乐，则输出 `happy`，否则输出 `sad`。", "hint": "**本题采用捆绑测试**。\n\n#### 【样例解释】\n对于第一组样例，易得快乐值为 $1 \\times 3+2\\times 1 + 3\\times 0=5$，而 $5< 10$，则 Barley 是伤心的。\n\n对于第二组样例，易得快乐值为 $1 \\times 3+2\\times 2 + 3\\times 1=10$，而 $10 \\geq 10$，则 Barley 是快乐的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Dog Treats", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T1 Dog Treats。", "description": "小狗 Barley 喜欢零食。在一天结束时，他的心情取决于他在一天中收到的零食的大小与数量。\n\n零食有三种大小：小、中、大。若这一天它获得小零食 $S$ 份，中零食 $M$ 份，大零食 $L$ 份，则他的快乐值可以用以下公式来衡量：\n\n$1 \\times S+2\\times M + 3\\times L$\n\n如果 Barley 的快乐值大于等于 $10$，那么它是快乐的。否则，他会感到十分伤心。请判断 Barley 在一天结束时心情是快乐的还是伤心的。", "inputFormat": "输入共 $3$ 行。\n\n第一行一个整数 $S(0 \\le S \\le 10)$，表示小零食数量。\n\n第二行一个整数 $M(0 \\le M \\le 10)$，表示中零食数量。\n\n第三行一个整数 $L(0 \\le L \\le 10)$，表示大零食数量。", "outputFormat": "一行一个字符串，若 Barley 的心情是快乐，则输出 `happy`，否则输出 `sad`。", "hint": "**本题采用捆绑测试**。\n\n#### 【样例解释】\n对于第一组样例，易得快乐值为 $1 \\times 3+2\\times 1 + 3\\times 0=5$，而 $5< 10$，则 Barley 是伤心的。\n\n对于第二组样例，易得快乐值为 $1 \\times 3+2\\times 2 + 3\\times 1=10$，而 $10 \\geq 10$，则 Barley 是快乐的。", "locale": "zh-CN"}}}
{"pid": "P11577", "type": "P", "difficulty": 1, "samples": [["750\n1\n5", "4"], ["10\n2\n1", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCC（加拿大）"], "title": "[CCC 2020] Epidemiology", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T2 Epidemiology。", "description": "当一个人患病时，他会在明天感染 $R$ 个人，随后便不再感染他人。没有一个人会被感染超过一次。我们想要确定造成 $P+1$ 个人患病的最早时间。", "inputFormat": "输入共三行。\n\n第一行一个整数 $P(P \\le 10^7)$。\n\n第二行一个整数 $N(N \\le P)$，表示第 $0$ 天时的患病人数。\n\n第三行一个整数 $R(R\\le 10)$。", "outputFormat": "一行一个整数表示题目所求。", "hint": "**本题采用捆绑测试**。\n#### 【样例解释】\n对于第一组样例，第 $4$ 天共感染了 $1+5+25+125+625=781$ 人，且 $781 >750$。可证明这是最早时间。\n\n对于第二组样例，第 $5$ 天共感染了 $2+2+2+2+2+2=12$ 人，且 $12 >10$。可证明这是最早时间。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Epidemiology", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T2 Epidemiology。", "description": "当一个人患病时，他会在明天感染 $R$ 个人，随后便不再感染他人。没有一个人会被感染超过一次。我们想要确定造成 $P+1$ 个人患病的最早时间。", "inputFormat": "输入共三行。\n\n第一行一个整数 $P(P \\le 10^7)$。\n\n第二行一个整数 $N(N \\le P)$，表示第 $0$ 天时的患病人数。\n\n第三行一个整数 $R(R\\le 10)$。", "outputFormat": "一行一个整数表示题目所求。", "hint": "**本题采用捆绑测试**。\n#### 【样例解释】\n对于第一组样例，第 $4$ 天共感染了 $1+5+25+125+625=781$ 人，且 $781 >750$。可证明这是最早时间。\n\n对于第二组样例，第 $5$ 天共感染了 $2+2+2+2+2+2=12$ 人，且 $12 >10$。可证明这是最早时间。", "locale": "zh-CN"}}}
{"pid": "P11578", "type": "P", "difficulty": 1, "samples": [["5\n44,62\n34,69\n24,78\n42,44\n64,10", "23,9\n65,79"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCC（加拿大）"], "title": "[CCC 2020] Art", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T3 Art。", "description": "Mahima 一直在尝试一种新的艺术风格。她站在画布前，用画笔在画布上绘画。当她认为自己创造了一件杰作时，她会用 3D 打印机打印一个框架来保护自己的画作。\n\n你的工作是通过确定尽可能小的长方形框架的坐标来帮助 Mahima，让每一滴颜料都位于框架内。\n\n**框架上的点不在框架内考虑。**", "inputFormat": "第一行一行一个整数 $n(2\\le n \\le100)$ 表示颜料的数量。\n\n接下来 $n$ 行每行两个整数 $x,y(x,y \\le 100)$，表示当前颜料的坐标，中间用 `,` 分割。", "outputFormat": "共两行。\n\n第一行两个整数表示框架左下角的坐标，用 `,` 分割。\n\n第二行两个整数表示框架右上角的坐标，用 `,` 分割。", "hint": "**本题采用捆绑测试**。\n#### 【样例解释】\n框架的左下角是 $(23,9)$，如果左下角上移，则颜料 $(64,10)$ 将不再位于框架内，如果其右移，则颜料 $(24,78)$ 将不再位于框架，而向其他方向移动会加大框架面积，不合题意。右上角同理。\n![](https://cdn.luogu.com.cn/upload/image_hosting/qrrjbsb8.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Art", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T3 Art。", "description": "Mahima 一直在尝试一种新的艺术风格。她站在画布前，用画笔在画布上绘画。当她认为自己创造了一件杰作时，她会用 3D 打印机打印一个框架来保护自己的画作。\n\n你的工作是通过确定尽可能小的长方形框架的坐标来帮助 Mahima，让每一滴颜料都位于框架内。\n\n**框架上的点不在框架内考虑。**", "inputFormat": "第一行一行一个整数 $n(2\\le n \\le100)$ 表示颜料的数量。\n\n接下来 $n$ 行每行两个整数 $x,y(x,y \\le 100)$，表示当前颜料的坐标，中间用 `,` 分割。", "outputFormat": "共两行。\n\n第一行两个整数表示框架左下角的坐标，用 `,` 分割。\n\n第二行两个整数表示框架右上角的坐标，用 `,` 分割。", "hint": "**本题采用捆绑测试**。\n#### 【样例解释】\n框架的左下角是 $(23,9)$，如果左下角上移，则颜料 $(64,10)$ 将不再位于框架内，如果其右移，则颜料 $(24,78)$ 将不再位于框架，而向其他方向移动会加大框架面积，不合题意。右上角同理。\n![](https://cdn.luogu.com.cn/upload/image_hosting/qrrjbsb8.png)", "locale": "zh-CN"}}}
{"pid": "P11579", "type": "P", "difficulty": 1, "samples": [["ABCCDEABAA\nABCDE", "yes"], ["ABCDDEBCAB\nABA", "no"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCC（加拿大）"], "title": "[CCC 2020] Cyclic Shifts", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T4 Cyclic Shifts。", "description": "Thuc 喜欢寻找字符串的循环移位。字符串的循环移位是通过不断将字符从字符串的开头移动到字符串的末尾来得到的。当然，一个字符串是它自身的循环移位。例如，`ABCDE` 的循环移位有：`ABCDE`，`BCDEA`，`CDEAB`，`DEABC`，`EABCD`。\n\n给定一些文本串 $T$ 和一个字符串 $S$，判断 $T$ 是否包含 $S$ 的循环移位。", "inputFormat": "共两行。\n\n第一行一个文本串 $T$。\n\n第二行一个字符串 $S$。", "outputFormat": "若 $T$ 包含 $S$ 的循环移位，输出 `yes`，否则输出 `no`。", "hint": "#### 【样例解释】\n对于第一组样例，`CDEAB` 是 `ABCDE` 的循环移位，且存在于 `ABCCDEABAA` 之中。\n\n对于第二组样例，易证明 `ABA` 的所有循环移位都不存在于 `ABCDDEBCAB` 之中。\n#### 【数据范围】\n**本题采用捆绑测试**。\n\n对于 $40\\%$ 的数据，$|S|=3$。\n\n对于 $100\\%$ 的数据，保证 $1\\le |S|,|T|\\le 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Cyclic Shifts", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T4 Cyclic Shifts。", "description": "Thuc 喜欢寻找字符串的循环移位。字符串的循环移位是通过不断将字符从字符串的开头移动到字符串的末尾来得到的。当然，一个字符串是它自身的循环移位。例如，`ABCDE` 的循环移位有：`ABCDE`，`BCDEA`，`CDEAB`，`DEABC`，`EABCD`。\n\n给定一些文本串 $T$ 和一个字符串 $S$，判断 $T$ 是否包含 $S$ 的循环移位。", "inputFormat": "共两行。\n\n第一行一个文本串 $T$。\n\n第二行一个字符串 $S$。", "outputFormat": "若 $T$ 包含 $S$ 的循环移位，输出 `yes`，否则输出 `no`。", "hint": "#### 【样例解释】\n对于第一组样例，`CDEAB` 是 `ABCDE` 的循环移位，且存在于 `ABCCDEABAA` 之中。\n\n对于第二组样例，易证明 `ABA` 的所有循环移位都不存在于 `ABCDDEBCAB` 之中。\n#### 【数据范围】\n**本题采用捆绑测试**。\n\n对于 $40\\%$ 的数据，$|S|=3$。\n\n对于 $100\\%$ 的数据，保证 $1\\le |S|,|T|\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P11580", "type": "P", "difficulty": 3, "samples": [["3\n4\n3 10 8 14\n1 11 12 12\n6 2 3 9", "yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCC（加拿大）"], "title": "[CCC 2020] Escape Room", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCSrProblemSet.html) T2/[2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T5 Escape Room。", "description": "你需要判断是否可以从一个房间逃脱。房间是一个 $m$ 行 $n$ 列的矩阵，每个位置包含一个正整数。我们用 $(x,y)$ 表示第 $x$ 行，第 $y$ 列的单元格。\n\n当你从 $(1,1)$ 开始，并成功走到 $(m,n)$ 时，你便成功逃脱了。如果你在一个包含值 $num$ 的单元格中，那么若你可以跳到 $(x,y)$，当前仅当 $x \\times y=num$。例如，如果你在一个包含 $6$ 的单元格中，你可以跳到单元格 $(2,3)$。", "inputFormat": "第一行一个整数 $m(1 \\le m \\le 1000)$，表示网格的行数。\n\n第二行一个整数 $n(1\\le n \\le 1000)$，表示网格的列数。\n\n接下来 $m$ 行，每行 $n$ 个整数，表示当前格子中的值 $num(1 \\le num \\le 10^6)$。", "outputFormat": "如果可以从房间逃脱，则输出 `yes`。否则输出 `no`。", "hint": "#### 【样例解释】\n从 $(1,1)$ 开始，其包含的值为 $3$，从这里可以跳到单元格 $(1,3)$。\n\n这个单元格包含 $8$，因此从这里可以跳到单元格 $(2,4)$。\n\n这个单元格包含 $12$，因此从这里可以跳到单元格 $(3,4)$。\n#### 【数据范围】\n**本题采用捆绑测试**。\n\n由于原题 Subtask 分值，本题满分 105 分。\n| Subtask | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $m=n=2$ | 7 |\n| 2 | $m=1$ | 14 |\n| 3 | 所有单元格中的整数是唯一的 | 28 |\n| 4 | $1\\le m,n \\le200$ | 28 |\n| 5 | 无 | 28 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Escape Room", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCSrProblemSet.html) T2/[2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T5 Escape Room。", "description": "你需要判断是否可以从一个房间逃脱。房间是一个 $m$ 行 $n$ 列的矩阵，每个位置包含一个正整数。我们用 $(x,y)$ 表示第 $x$ 行，第 $y$ 列的单元格。\n\n当你从 $(1,1)$ 开始，并成功走到 $(m,n)$ 时，你便成功逃脱了。如果你在一个包含值 $num$ 的单元格中，那么若你可以跳到 $(x,y)$，当前仅当 $x \\times y=num$。例如，如果你在一个包含 $6$ 的单元格中，你可以跳到单元格 $(2,3)$。", "inputFormat": "第一行一个整数 $m(1 \\le m \\le 1000)$，表示网格的行数。\n\n第二行一个整数 $n(1\\le n \\le 1000)$，表示网格的列数。\n\n接下来 $m$ 行，每行 $n$ 个整数，表示当前格子中的值 $num(1 \\le num \\le 10^6)$。", "outputFormat": "如果可以从房间逃脱，则输出 `yes`。否则输出 `no`。", "hint": "#### 【样例解释】\n从 $(1,1)$ 开始，其包含的值为 $3$，从这里可以跳到单元格 $(1,3)$。\n\n这个单元格包含 $8$，因此从这里可以跳到单元格 $(2,4)$。\n\n这个单元格包含 $12$，因此从这里可以跳到单元格 $(3,4)$。\n#### 【数据范围】\n**本题采用捆绑测试**。\n\n由于原题 Subtask 分值，本题满分 105 分。\n| Subtask | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $m=n=2$ | 7 |\n| 2 | $m=1$ | 14 |\n| 3 | 所有单元格中的整数是唯一的 | 28 |\n| 4 | $1\\le m,n \\le200$ | 28 |\n| 5 | 无 | 28 |", "locale": "zh-CN"}}}
{"pid": "P11581", "type": "P", "difficulty": 2, "samples": [["3\n0 100\n20 50\n10 120", "7.0"], ["5\n20 -5\n0 -17\n10 31\n5 -3\n30 11", "6.8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "Special Judge", "CCC（加拿大）"], "title": "[CCC 2020] Surmising a Sprinter's Speed", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCSrProblemSet.html) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/seniorEF.pdf) T1 Surmising a Sprinter's Speed。", "description": "Trick E. Dingo 正在捕捉 Street Sprinter，他正在收集数据，进一步了解 Street Sprinter 的速度。\n\nTrick E. Dingo 正在一条笔直的东西向的道路上抓捕 Street Sprinter，这条路上有一块特别著名的石头，亲切地被称为“原点”。这条路上的位置是根据与原点的距离用数字来测量的：原点以西的位置使用负数表示，以东的位置使用正数表示。\n\nTrick E. Dingo 的观察记录每次包含两个数字：一个时间和在该时间 Street Sprinter 在路上的位置值。根据这些信息，Street Sprinter 至少能达到了什么速度呢？", "inputFormat": "第一行一个整数 $n(2\\le n \\le 10^5)$，表示观察次数。\n\n接下来 $n$ 行，每行两个整数 $t(0 \\le t \\le 10^9)$ 和 $x(-10^9 \\le x \\le 10^9)$，分别表示当前这次测量的时间与测量到的位置。", "outputFormat": "输出一行一个数字 $X$，表示 Street Sprinter 在某个时刻的速度达到了 $X$ 米每秒，并且其尽可能大。如果正确答案是 $Y$，当认为 $X$ 是正确的时，当且仅当 $\\frac{|X-Y|}{\\max(1,Y)}\\le 10^{-5}$。", "hint": "#### 【样例解释】\n对于第一组样例，为了在 $10$ 秒内从位置 $120$ 移动到位置 $50$，速度必须至少为 $7$。\n#### 【数据范围】\n**本题采用捆绑测试**。\n\n对于 $50\\%$ 的数据，$0 \\le n \\le 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Surmising a Sprinter's Speed", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCSrProblemSet.html) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/seniorEF.pdf) T1 Surmising a Sprinter's Speed。", "description": "Trick E. Dingo 正在捕捉 Street Sprinter，他正在收集数据，进一步了解 Street Sprinter 的速度。\n\nTrick E. Dingo 正在一条笔直的东西向的道路上抓捕 Street Sprinter，这条路上有一块特别著名的石头，亲切地被称为“原点”。这条路上的位置是根据与原点的距离用数字来测量的：原点以西的位置使用负数表示，以东的位置使用正数表示。\n\nTrick E. Dingo 的观察记录每次包含两个数字：一个时间和在该时间 Street Sprinter 在路上的位置值。根据这些信息，Street Sprinter 至少能达到了什么速度呢？", "inputFormat": "第一行一个整数 $n(2\\le n \\le 10^5)$，表示观察次数。\n\n接下来 $n$ 行，每行两个整数 $t(0 \\le t \\le 10^9)$ 和 $x(-10^9 \\le x \\le 10^9)$，分别表示当前这次测量的时间与测量到的位置。", "outputFormat": "输出一行一个数字 $X$，表示 Street Sprinter 在某个时刻的速度达到了 $X$ 米每秒，并且其尽可能大。如果正确答案是 $Y$，当认为 $X$ 是正确的时，当且仅当 $\\frac{|X-Y|}{\\max(1,Y)}\\le 10^{-5}$。", "hint": "#### 【样例解释】\n对于第一组样例，为了在 $10$ 秒内从位置 $120$ 移动到位置 $50$，速度必须至少为 $7$。\n#### 【数据范围】\n**本题采用捆绑测试**。\n\n对于 $50\\%$ 的数据，$0 \\le n \\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P11582", "type": "P", "difficulty": 4, "samples": [["aab\nabacabaa", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCC（加拿大）"], "title": "[CCC 2020] Searching for Strings", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCSrProblemSet.html) T3 Searching for Strings。", "description": "计算字符串 $n$ 的不同排列中，作为 $h$ 的子字符串的数量。", "inputFormat": "第一行一个字符串 $n(1 \\le |n| \\le 2\\times10^5)$。\n\n第二行一个字符串 $h(1 \\le |h| \\le 2\\times10^5)$。\n\n保证这两个串只含小写字母。", "outputFormat": "输出由一个整数构成，即题目所求。", "hint": "**本题采用捆绑测试**。\n#### 【样例解析】\n仅有排列 `aba` 和 `baa` 作为子字符串出现在了 $h$ 中。\n#### 【数据范围】\n设 $n$ 长度为 $x$，$h$ 长度为 $y$。\n| Subtask | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $x\\le 8,y\\le 200$ | 20 |\n| 2 | $x\\le 200,y\\le 200$ | 14 |\n| 3 | $x\\le 2000,y\\le 2000$ | 14 |\n| 4 | 无 | 52 |\n\n注：原题满分为 15 分，其中 Sub1 有 $3$ 分，Sub2 和 Sub3 有 $2$ 分，而 Sub4 有 $8$ 分。本题分数为取近似后得到的结果。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Searching for Strings", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCSrProblemSet.html) T3 Searching for Strings。", "description": "计算字符串 $n$ 的不同排列中，作为 $h$ 的子字符串的数量。", "inputFormat": "第一行一个字符串 $n(1 \\le |n| \\le 2\\times10^5)$。\n\n第二行一个字符串 $h(1 \\le |h| \\le 2\\times10^5)$。\n\n保证这两个串只含小写字母。", "outputFormat": "输出由一个整数构成，即题目所求。", "hint": "**本题采用捆绑测试**。\n#### 【样例解析】\n仅有排列 `aba` 和 `baa` 作为子字符串出现在了 $h$ 中。\n#### 【数据范围】\n设 $n$ 长度为 $x$，$h$ 长度为 $y$。\n| Subtask | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $x\\le 8,y\\le 200$ | 20 |\n| 2 | $x\\le 200,y\\le 200$ | 14 |\n| 3 | $x\\le 2000,y\\le 2000$ | 14 |\n| 4 | 无 | 52 |\n\n注：原题满分为 15 分，其中 Sub1 有 $3$ 分，Sub2 和 Sub3 有 $2$ 分，而 Sub4 有 $8$ 分。本题分数为取近似后得到的结果。", "locale": "zh-CN"}}}
{"pid": "P11583", "type": "P", "difficulty": 5, "samples": [["12\n1 1\n1 1\n1 2\n1 2\n1 2\n1 3\n2 1\n1 6\n2 2\n1 6\n2 6\n2 1", "2\n2\n1\n2"], ["10\n1 1\n1 1\n2 1\n1 2\n1 2\n1 3\n2 1\n1 3\n1 4\n2 1", "1\n2\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "KOI（韩国）"], "title": "[KTSC 2022 R1] 进化", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<bits/stdc++.h>\nvoid init();\nint analyze(int R);\nvoid observation(int P);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T1「 [진화\t](https://assets.ioikorea.kr/ioitst/2022/1/evolution/evolution_statement.pdf)」\n\n", "description": "你打算进行一项研究——对多种生物的进化过程进行探讨。除了最初的生物体外，所有其他生物体都是通过现有生物体的进化而诞生的。我们将现有的生物体称为父生物体，新诞生的生物体称为子生物体。\n\n生物体通过进化诞生的过程可以用一个树形结构来表示，其中生物体是结点，进化过程是结接父生物体和子生物体的边。最初的生物体是树根。下图展示了一个这样的树形结构，其中 $1$ 号生物体进化出 $2$ 和 $3$ 号生物体，$2$ 号生物体进化出 $4$，$5$ 和 $6$ 号生物体，$3$ 号生物体进化出 $7$ 号生物体，$6$ 号生物体进化出 $8$ 和 $9$ 号生物体。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6yozyc5x.png)\n\n我们将这样的树形结构称为进化树。\n\n对于每个有子生物体的生物体，我们将可能的进化路径分为主要进化和次要进化。\n\n这种分类方法的效率可以通过进化复杂度来衡量。两个生物体 $A$ 和 $B$ 之间的进化复杂度定义为进化树中连接 $A$ 和 $B$ 的路径上经过的次要进化的数量。进化树的进化复杂度是所有生物体对之间进化复杂度的最大值。\n\n进化越复杂，分析两个生物体之间的关联性就越困难。因此，我们需要通过适当的分类方法将进化树的进化复杂度最小化。\n\n研究将持续 $N+Q$ 天。第一天，我们只发现了 $1$ 号生物体。接下来的每一天，我们将进行以下两种研究之一：\n\n- 发现一个新的生物体，该生物体是现有生物体进化而来的。如果现有生物体的数量为 $T$，那么这个新生物体将被命名为 $T+1$ 号生物体。这种研究将进行 $N$ 次。\n- 分析一个生物体及其通过 $0$ 次或多次进化而诞生的所有生物体。我们需要计算以该生物体为根的进化树的最小进化复杂度。每次分析是独立的，不会影响后续的分析。这种研究将进行 $Q$ 次。\n\n你需要实现以下三个函数：\n\n`\nvoid init();\n`\n\n- 该函数在 `observation` 和 `analyze` 函数调用之前只会被调用一次。\n\n`\nvoid observation(int P);\n`\n\n- 该函数表示从编号为 $P$ 的生物体进化出一个新的生物体。当前发现的生物体数量为 $T$，新生物体编号为 $T+1$。\n\n`\nint analyze(int R);\n`\n\n- 该函数表示分析编号为 $R$ 的生物体及其通过 $0$ 次或多次进化而诞生的所有生物体。函数返回以 $R$ 号生物体为根的进化树的最小进化复杂度。\n", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N'$\n\n- 第 $i+1 (1 \\leq i \\leq N')$ 行：如果调用 `observation` 函数，则输入 `1 P`；如果调用 `analyze` 函数，则输入 `2 R`。\n- $N' = N + Q$。", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $i (1 \\leq i \\leq Q)$ 行：第 $i$ 次调用 `analyze` 函数的返回值。", "hint": "### 样例解释 #1\n评测程序将按以下顺序调用函数：\n\n```cpp\ninit();\nobservation(1);\nobservation(1);\nobservation(2);\nobservation(2);\nobservation(2);\nobservation(3);\nanalyze(1); // 返回 2\nobservation(6);\nanalyze(2); // 返回 2\nobservation(6);\nanalyze(6); // 返回 1\nanalyze(1); // 返回 2\n```\n\n下图展示了每次 `analyze` 调用时的进化树及其最佳分类方法之一。主要进化路径用粗线表示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oonlwdro.png)\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 5\\cdot 10^5$\n- $1 \\leq Q \\leq 5\\cdot 10^5$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$7$|$N \\leq 15,Q \\leq 15$|\n|$2$|$11$|$N \\leq 3000,Q \\leq 15$|\n|$3$|$5$|第 $i (2 \\leq i \\leq N+1)$ 号生物体的父生物体是 $\\left\\lfloor\\frac{i}{2}\\right\\rfloor$ 号生物体|\n|$4$|$21$|每个生物体最多有 $2$ 个子生物体|\n|$5$|$15$|$N \\leq 3000,Q \\leq 3000$|\n|$6$|$41$|无附加限制|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2022 R1] 进化", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<bits/stdc++.h>\nvoid init();\nint analyze(int R);\nvoid observation(int P);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T1「 [진화\t](https://assets.ioikorea.kr/ioitst/2022/1/evolution/evolution_statement.pdf)」\n\n", "description": "你打算进行一项研究——对多种生物的进化过程进行探讨。除了最初的生物体外，所有其他生物体都是通过现有生物体的进化而诞生的。我们将现有的生物体称为父生物体，新诞生的生物体称为子生物体。\n\n生物体通过进化诞生的过程可以用一个树形结构来表示，其中生物体是结点，进化过程是结接父生物体和子生物体的边。最初的生物体是树根。下图展示了一个这样的树形结构，其中 $1$ 号生物体进化出 $2$ 和 $3$ 号生物体，$2$ 号生物体进化出 $4$，$5$ 和 $6$ 号生物体，$3$ 号生物体进化出 $7$ 号生物体，$6$ 号生物体进化出 $8$ 和 $9$ 号生物体。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6yozyc5x.png)\n\n我们将这样的树形结构称为进化树。\n\n对于每个有子生物体的生物体，我们将可能的进化路径分为主要进化和次要进化。\n\n这种分类方法的效率可以通过进化复杂度来衡量。两个生物体 $A$ 和 $B$ 之间的进化复杂度定义为进化树中连接 $A$ 和 $B$ 的路径上经过的次要进化的数量。进化树的进化复杂度是所有生物体对之间进化复杂度的最大值。\n\n进化越复杂，分析两个生物体之间的关联性就越困难。因此，我们需要通过适当的分类方法将进化树的进化复杂度最小化。\n\n研究将持续 $N+Q$ 天。第一天，我们只发现了 $1$ 号生物体。接下来的每一天，我们将进行以下两种研究之一：\n\n- 发现一个新的生物体，该生物体是现有生物体进化而来的。如果现有生物体的数量为 $T$，那么这个新生物体将被命名为 $T+1$ 号生物体。这种研究将进行 $N$ 次。\n- 分析一个生物体及其通过 $0$ 次或多次进化而诞生的所有生物体。我们需要计算以该生物体为根的进化树的最小进化复杂度。每次分析是独立的，不会影响后续的分析。这种研究将进行 $Q$ 次。\n\n你需要实现以下三个函数：\n\n`\nvoid init();\n`\n\n- 该函数在 `observation` 和 `analyze` 函数调用之前只会被调用一次。\n\n`\nvoid observation(int P);\n`\n\n- 该函数表示从编号为 $P$ 的生物体进化出一个新的生物体。当前发现的生物体数量为 $T$，新生物体编号为 $T+1$。\n\n`\nint analyze(int R);\n`\n\n- 该函数表示分析编号为 $R$ 的生物体及其通过 $0$ 次或多次进化而诞生的所有生物体。函数返回以 $R$ 号生物体为根的进化树的最小进化复杂度。\n", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N'$\n\n- 第 $i+1 (1 \\leq i \\leq N')$ 行：如果调用 `observation` 函数，则输入 `1 P`；如果调用 `analyze` 函数，则输入 `2 R`。\n- $N' = N + Q$。", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $i (1 \\leq i \\leq Q)$ 行：第 $i$ 次调用 `analyze` 函数的返回值。", "hint": "### 样例解释 #1\n评测程序将按以下顺序调用函数：\n\n```cpp\ninit();\nobservation(1);\nobservation(1);\nobservation(2);\nobservation(2);\nobservation(2);\nobservation(3);\nanalyze(1); // 返回 2\nobservation(6);\nanalyze(2); // 返回 2\nobservation(6);\nanalyze(6); // 返回 1\nanalyze(1); // 返回 2\n```\n\n下图展示了每次 `analyze` 调用时的进化树及其最佳分类方法之一。主要进化路径用粗线表示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oonlwdro.png)\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 5\\cdot 10^5$\n- $1 \\leq Q \\leq 5\\cdot 10^5$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$7$|$N \\leq 15,Q \\leq 15$|\n|$2$|$11$|$N \\leq 3000,Q \\leq 15$|\n|$3$|$5$|第 $i (2 \\leq i \\leq N+1)$ 号生物体的父生物体是 $\\left\\lfloor\\frac{i}{2}\\right\\rfloor$ 号生物体|\n|$4$|$21$|每个生物体最多有 $2$ 个子生物体|\n|$5$|$15$|$N \\leq 3000,Q \\leq 3000$|\n|$6$|$41$|无附加限制|", "locale": "zh-CN"}}}
{"pid": "P11584", "type": "P", "difficulty": 6, "samples": [["2 1 2\n6 1 0 1 1\n-10 1 0 1 1\n", "-4\n"], ["5 4 5\n1 1 0 1 2\n1 2 1 2 2\n1 3 1 3 4\n1 1 3 4 3\n-1 2 1 4 1\n", "4"], ["11 8 11\n1 5 5 5 1\n-3 2 4 10 4\n0 10 1 8 1\n-2 3 3 3 7\n2 2 0 2 4\n7 7 8 10 8\n-1 4 2 1 2\n-1 8 3 8 8\n-1 7 8 10 8\n-2 7 5 7 6\n-1 10 5 8 5\n", "5"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "KOI（韩国）"], "title": "[KTSC 2022 R1] 飞扬的小鸟", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<bits/stdc++.h>\nlong long get_max_score(int W, int H, std::vector<int> A, std::vector<int> X1, std::vector<int> Y1, std::vector<int> X2, std::vector<int> Y2);\n\n\n```", "description": "题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T2「 [플래피 버드\t](https://assets.ioikorea.kr/ioitst/2022/1/flappybird/flappybird_statement.pdf)」\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/th7eapx4.png)\n\n你知道 2014 年曾经流行的游戏「Flappy Bird」吗？这是一款游戏，玩家需要控制一只小鸟在前进的过程中避免撞到管道或飞出屏幕，通过不断上升和下降尽可能地飞得更远。\n\n在这个游戏中出现的小鸟其实是教准养的宠物鸟“安娜”。教准和安娜今天也在二维世界中玩类似于「Flappy Bird」的游戏。安娜在天空中飞行，经过线段时会根据线段的权重获得相应的分数。\n\n这个游戏的规则如下： 在二维平面上有 $N$ 条与 $x$ 轴或 $y$ 轴平行的线段。第 $i (0 \\leq i \\leq N-1)$ 条线段的权重为 $A_{i}$，两个端点的坐标分别为 $\\left(X_{1, i}, Y_{1, i}\\right)$ 和 $\\left(X_{2, i}, Y_{2, i}\\right)$。\n\n安娜从 $x=0$ 直线上的任意点开始向 $+x$ 方向飞行，当到达 $x=W$ 直线时结束飞行。但出于安全考虑，安娜不能飞到 $y=0$ 以下或 $y=H$ 以上。也就是说，安娜只能在 $0 \\leq x \\leq W, 0 \\leq y \\leq H$ 的区域内飞行。\n\n安娜只能平行于 $x$ 轴飞行，因此在飞行过程中不能改变自己的 $y$ 坐标。但她可以在飞行过程中借助教准的帮助，垂直于 $y$ 轴上升或下降一次，改变自己的 $y$ 坐标。在上升或下降过程中，安娜的 $x$ 坐标不变，且只能选择上升或下降其中之一。\n\n安娜的飞行路径与一条或多条线段共享一个或多个点时，这些线段的权重之和就是安娜获得的分数。 例如，假设 $W=5, H=4$，有 $N=7$ 条线段如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ptmtzvos.png)\n\n蓝色实线表示线段，虚线表示安娜的飞行路径。圆圈内的数字是线段编号，有符号的数字是权重。 如果安娜从 $(0,1)$ 开始飞行，在 $(2,1)$ 上升到 $(2,4)$，然后在 $(5,4)$ 结束飞行，她会经过第 $0,1,2,4,6$ 号线段，获得 $(-5)+(-1)+5+3+(-4)=-2$ 分。\n\n但如果安娜从 $(0,3.4)$ 开始飞行，在 $(1.6,3.4)$ 下降到 $(1.6,0.5)$，然后在 $(5,0.5)$ 结束飞行，她会经过第 $0,2,5$ 号线段，获得 $(-5)+5+1=1$ 分。\n\n给定 $N$ 条线段的信息，编写一个程序计算安娜可以获得的最大分数。\n\n你需要实现以下函数：\n\n`long long get_max_score(int W, int H, vector<int> A, vector<int> X1, vector<int> Y1, vector<int> X2, vector<int> Y2);`\n\n- 该函数只会被调用一次。\n- 参数中给定的整数数组 $A, X1, Y1, X2, Y2$ 的大小为 $N$。数组的每个元素 $A_i, X1_i, Y1_i, X2_i, Y2_i (0 \\leq i \\leq N-1)$ 分别表示 $A_{i}, X_{1, i}, Y_{1, i}, X_{2, i}, Y_{2, i}$。\n\n注意，提交的代码中不应包含任何输入输出操作。\n\n\n该函数返回安娜可以获得的最大分数。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$W\\,H\\,N$\n- 第 $2+i (0 \\leq i \\leq N-1)$ 行： $A_{i}\\,X_{1, i}\\,Y_{1, i}\\,X_{2, i}\\,Y_{2, i}$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `get_max_score` 返回的值。", "hint": "### 样例解释 #1\n考虑 $W=2, H=1, N=2, A=[6,-10], X_{1}=[1,1], Y_{1}=[0,0], X_{2}=[1,1], Y_{2}=[1,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`get_max_score(2,1,[6,-10],[1,1],[0,0],[1,1],[1,1])=-4`\n\n下图显示了 N 条线段和安娜可以获得最大分数的路径。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uymxt2s4.png)\n\n安娜从 $(0,1)$ 开始飞行，不进行上升或下降，在 $(2,1)$ 结束飞行，经过第 $0$ 和 $1$ 号线段，获得总分 $6+(-10)=-4$。\n\n这个例子满足子任务 $1,2,3,4,5,7$ 的条件。\n### 样例解释 #2\n考虑 $W=5, H=4, N=5, A=[1,1,1,1,-1], X_{1}=[1,2,3,1,2], Y_{1}=[0,1,1,3,1], X_{2}=[1,2,3,4,4], Y_{2}=[2,2,4,3,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`get_max_score(5, 4, [1, 1, 1, 1, -1],[1,2,3,1,2],[0,1,1,3,1],[1,2,3,4,4],[2,2,4,3,1])=4`\n\n这个样例满足子任务 $1,2,3,4,7$ 的条件。\n\n### 样例解释 #3\n考虑 $W=11, H=8, N=11, A=[1,-3,0,-2,2,7,-1,-1,-1,-2,-1], X_{1}=[5,2,10,3,2,7,4,8,7,7,10], Y_{1}=[5,4,1,3,0,8,2,3,8,5,5], X_{2}=[5,10,8,3,2,10,1,8,10,7,8], Y_{2}=[1,4,1,7,4,8,2,8,8,6,5]$ 的情况。\n\n评测程序将调用如下函数：\n\n`get_max_score(11, 8, [1, -3, 0, -2, 2, 7, -1, -1, -1, -2, -1], [5, 2, 10, 3, 2, 7, 4, 8, 7, 7, 10], [5, 4, 1, 3, 0, 8, 2, 3, 8, 5, 5], [5, 10, 8, 3, 2, 10, 1, 8, 10, 7, 8], [1, 4, 1, 7, 4, 8, 2, 8, 8, 6, 5]) = 5`\n\n这个例子满足子任务 $1,2,3,4,7$ 的条件。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- 输入中给定的所有数都是整数。\n- $2 \\leq W \\leq 10^5$\n- $1 \\leq H \\leq 10^5$\n- $1 \\leq N \\leq 2.5\\cdot 10^5$\n- $1 \\leq X_{i, j} \\leq W-1 (i \\in\\{1,2\\}, 0 \\leq j \\leq N-1)$\n- $0 \\leq Y_{i, j} \\leq H (i \\in\\{1,2\\}, 0 \\leq j \\leq N-1)$\n- $-10^9 \\leq A_{i} \\leq 10^9 (0 \\leq i \\leq N-1)$\n- 对于每个 $0 \\leq i \\leq N-1$，$X_{1, i}=X_{2, i}$ 或 $Y_{1, i}=Y_{2, i}$\n- 所有线段的长度都是正数。即，对于每个 $0 \\leq i \\leq N-1$，$\\left(X_{1, i}, Y_{1, i}\\right) \\neq \\left(X_{2, i}, Y_{2, i}\\right)$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$7$|$W \\leq 50,H \\leq 50,N \\leq 50$|\n|$2$|$8$|$W \\leq 50,H \\leq 50$|\n|$3$|$10$|$N \\leq 500$|\n|$4$|$14$|$N \\leq 8000$|\n|$5$|$15$|$X_{1, i}=X_{2, i} (0 \\leq i \\leq N-1)$|\n|$6$|$10$|$Y_{1, i}=Y_{2, i} (0 \\leq i \\leq N-1)$|\n|$7$|$36$|无附加限制|\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2022 R1] 飞扬的小鸟", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<bits/stdc++.h>\nlong long get_max_score(int W, int H, std::vector<int> A, std::vector<int> X1, std::vector<int> Y1, std::vector<int> X2, std::vector<int> Y2);\n\n\n```", "description": "题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T2「 [플래피 버드\t](https://assets.ioikorea.kr/ioitst/2022/1/flappybird/flappybird_statement.pdf)」\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/th7eapx4.png)\n\n你知道 2014 年曾经流行的游戏「Flappy Bird」吗？这是一款游戏，玩家需要控制一只小鸟在前进的过程中避免撞到管道或飞出屏幕，通过不断上升和下降尽可能地飞得更远。\n\n在这个游戏中出现的小鸟其实是教准养的宠物鸟“安娜”。教准和安娜今天也在二维世界中玩类似于「Flappy Bird」的游戏。安娜在天空中飞行，经过线段时会根据线段的权重获得相应的分数。\n\n这个游戏的规则如下： 在二维平面上有 $N$ 条与 $x$ 轴或 $y$ 轴平行的线段。第 $i (0 \\leq i \\leq N-1)$ 条线段的权重为 $A_{i}$，两个端点的坐标分别为 $\\left(X_{1, i}, Y_{1, i}\\right)$ 和 $\\left(X_{2, i}, Y_{2, i}\\right)$。\n\n安娜从 $x=0$ 直线上的任意点开始向 $+x$ 方向飞行，当到达 $x=W$ 直线时结束飞行。但出于安全考虑，安娜不能飞到 $y=0$ 以下或 $y=H$ 以上。也就是说，安娜只能在 $0 \\leq x \\leq W, 0 \\leq y \\leq H$ 的区域内飞行。\n\n安娜只能平行于 $x$ 轴飞行，因此在飞行过程中不能改变自己的 $y$ 坐标。但她可以在飞行过程中借助教准的帮助，垂直于 $y$ 轴上升或下降一次，改变自己的 $y$ 坐标。在上升或下降过程中，安娜的 $x$ 坐标不变，且只能选择上升或下降其中之一。\n\n安娜的飞行路径与一条或多条线段共享一个或多个点时，这些线段的权重之和就是安娜获得的分数。 例如，假设 $W=5, H=4$，有 $N=7$ 条线段如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ptmtzvos.png)\n\n蓝色实线表示线段，虚线表示安娜的飞行路径。圆圈内的数字是线段编号，有符号的数字是权重。 如果安娜从 $(0,1)$ 开始飞行，在 $(2,1)$ 上升到 $(2,4)$，然后在 $(5,4)$ 结束飞行，她会经过第 $0,1,2,4,6$ 号线段，获得 $(-5)+(-1)+5+3+(-4)=-2$ 分。\n\n但如果安娜从 $(0,3.4)$ 开始飞行，在 $(1.6,3.4)$ 下降到 $(1.6,0.5)$，然后在 $(5,0.5)$ 结束飞行，她会经过第 $0,2,5$ 号线段，获得 $(-5)+5+1=1$ 分。\n\n给定 $N$ 条线段的信息，编写一个程序计算安娜可以获得的最大分数。\n\n你需要实现以下函数：\n\n`long long get_max_score(int W, int H, vector<int> A, vector<int> X1, vector<int> Y1, vector<int> X2, vector<int> Y2);`\n\n- 该函数只会被调用一次。\n- 参数中给定的整数数组 $A, X1, Y1, X2, Y2$ 的大小为 $N$。数组的每个元素 $A_i, X1_i, Y1_i, X2_i, Y2_i (0 \\leq i \\leq N-1)$ 分别表示 $A_{i}, X_{1, i}, Y_{1, i}, X_{2, i}, Y_{2, i}$。\n\n注意，提交的代码中不应包含任何输入输出操作。\n\n\n该函数返回安娜可以获得的最大分数。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$W\\,H\\,N$\n- 第 $2+i (0 \\leq i \\leq N-1)$ 行： $A_{i}\\,X_{1, i}\\,Y_{1, i}\\,X_{2, i}\\,Y_{2, i}$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `get_max_score` 返回的值。", "hint": "### 样例解释 #1\n考虑 $W=2, H=1, N=2, A=[6,-10], X_{1}=[1,1], Y_{1}=[0,0], X_{2}=[1,1], Y_{2}=[1,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`get_max_score(2,1,[6,-10],[1,1],[0,0],[1,1],[1,1])=-4`\n\n下图显示了 N 条线段和安娜可以获得最大分数的路径。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uymxt2s4.png)\n\n安娜从 $(0,1)$ 开始飞行，不进行上升或下降，在 $(2,1)$ 结束飞行，经过第 $0$ 和 $1$ 号线段，获得总分 $6+(-10)=-4$。\n\n这个例子满足子任务 $1,2,3,4,5,7$ 的条件。\n### 样例解释 #2\n考虑 $W=5, H=4, N=5, A=[1,1,1,1,-1], X_{1}=[1,2,3,1,2], Y_{1}=[0,1,1,3,1], X_{2}=[1,2,3,4,4], Y_{2}=[2,2,4,3,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`get_max_score(5, 4, [1, 1, 1, 1, -1],[1,2,3,1,2],[0,1,1,3,1],[1,2,3,4,4],[2,2,4,3,1])=4`\n\n这个样例满足子任务 $1,2,3,4,7$ 的条件。\n\n### 样例解释 #3\n考虑 $W=11, H=8, N=11, A=[1,-3,0,-2,2,7,-1,-1,-1,-2,-1], X_{1}=[5,2,10,3,2,7,4,8,7,7,10], Y_{1}=[5,4,1,3,0,8,2,3,8,5,5], X_{2}=[5,10,8,3,2,10,1,8,10,7,8], Y_{2}=[1,4,1,7,4,8,2,8,8,6,5]$ 的情况。\n\n评测程序将调用如下函数：\n\n`get_max_score(11, 8, [1, -3, 0, -2, 2, 7, -1, -1, -1, -2, -1], [5, 2, 10, 3, 2, 7, 4, 8, 7, 7, 10], [5, 4, 1, 3, 0, 8, 2, 3, 8, 5, 5], [5, 10, 8, 3, 2, 10, 1, 8, 10, 7, 8], [1, 4, 1, 7, 4, 8, 2, 8, 8, 6, 5]) = 5`\n\n这个例子满足子任务 $1,2,3,4,7$ 的条件。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- 输入中给定的所有数都是整数。\n- $2 \\leq W \\leq 10^5$\n- $1 \\leq H \\leq 10^5$\n- $1 \\leq N \\leq 2.5\\cdot 10^5$\n- $1 \\leq X_{i, j} \\leq W-1 (i \\in\\{1,2\\}, 0 \\leq j \\leq N-1)$\n- $0 \\leq Y_{i, j} \\leq H (i \\in\\{1,2\\}, 0 \\leq j \\leq N-1)$\n- $-10^9 \\leq A_{i} \\leq 10^9 (0 \\leq i \\leq N-1)$\n- 对于每个 $0 \\leq i \\leq N-1$，$X_{1, i}=X_{2, i}$ 或 $Y_{1, i}=Y_{2, i}$\n- 所有线段的长度都是正数。即，对于每个 $0 \\leq i \\leq N-1$，$\\left(X_{1, i}, Y_{1, i}\\right) \\neq \\left(X_{2, i}, Y_{2, i}\\right)$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$7$|$W \\leq 50,H \\leq 50,N \\leq 50$|\n|$2$|$8$|$W \\leq 50,H \\leq 50$|\n|$3$|$10$|$N \\leq 500$|\n|$4$|$14$|$N \\leq 8000$|\n|$5$|$15$|$X_{1, i}=X_{2, i} (0 \\leq i \\leq N-1)$|\n|$6$|$10$|$Y_{1, i}=Y_{2, i} (0 \\leq i \\leq N-1)$|\n|$7$|$36$|无附加限制|\n", "locale": "zh-CN"}}}
{"pid": "P11585", "type": "P", "difficulty": 7, "samples": [["7\n3 2 1 2 1 4 3\n", "7\n11\n13\n"], ["7\n1 2 3 4 5 6 7\n", "16\n21\n24\n"], ["5\n1 3 4 3 1\n", "9\n11\n12\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "凸包", "笛卡尔树", "李超线段树", "单调栈", "KOI（韩国）"], "title": "[KTSC 2022 R1] 直方图", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\nstd::vector<long long> max_area(std::vector<int> H);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T3「 [히스토그램](https://assets.ioikorea.kr/ioitst/2022/1/histogram/histogram_statement.pdf)」\n\n", "description": "有一个由 $N$ 个底边平行于地面的矩形连续排列而成的直方图。每个矩形的宽度都是 $1$，并且从左到右第 $i (1 \\leq i \\leq N)$ 个矩形的高度为整数 $H_{i}$。\n\n下图展示了一个可能的直方图示例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hoexztgq.png)\n\n在这个直方图中，我们希望找到不超过 $K$ 个矩形，这些矩形的底边平行于地面，且除了顶点和边之外的区域不重叠，并且每个边的长度都是整数，使得这些矩形的面积之和最大。这个值记为 $f(K)$。 请编写一个程序来计算 $f(1), f(2), f(3)$。\n\n你需要实现以下函数：\n\n`vector<long long> max_area(vector<int> H);`\n\n- 该函数只会被调用一次。\n- 参数中给定的整数数组 $\\texttt{H}$ 的大小为 $N$。数组的每个元素 $\\texttt{H[i]} (0 \\leq i \\leq N-1)$ 表示从左到右第 $i+1$ 个矩形的高度 $H_{i+1}$。\n- 该函数返回一个大小为 $1 \\sim 3$ 的数组 $\\texttt{A}$。$\\texttt{A[i]} (0 \\leq i<|\\texttt{A}|)$ 中应存储 $f(i+1)$ 的值。请注意，数组 $\\texttt{A}$ 的大小会影响评分标准。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$H_{1}\\,H_{2}\\,\\cdots H_{N}$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1+i (0 \\leq i<|\\texttt{A}|)$ 行：`max_area` 函数返回的数组 $\\texttt{A}$ 中 $\\texttt{A}[i]$ 的值。", "hint": "### 评分标准\n假设 `max_area` 函数返回的数组为 $\\texttt{A}$。\n\n如果 $\\texttt{A}$ 的大小不是 $1$ 到 $3$ 之间，则得 $0$ 分。\n\n根据子任务的标准，如果 $f(1), \\cdots, f(|\\texttt{A}|)$ 中有任何一个值不正确，则得 $0$ 分。\n\n如果 $f(1), \\cdots, f(|\\texttt{A}|)$ 的值都正确，则根据子任务的评分标准得分。\n\n在上述标准中，$f(i)$ 正确意味着 $\\texttt{A}$ 的大小至少为 $i$ 并且 $\\texttt{A}[i-1]$ 的值等于 $f(i)$。\n\n每个子任务的分数是子任务所有数据的最小分数。\n\n### 样例解释 #1\n考虑 $N=7, H=[3,2,1,2,1,4,3]$ 的情况。\n\n评测程序将调用如下函数：\n\n`max_area([3,2,1,2,1,4,3])=[7,11,13]`\n\n下图展示了对于 $K=1,2,3$ 时面积之和最大的情况之一。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2t8kpz59.png)\n\n如果 `max_area` 函数返回 $[7, 11]$，则 $f(1)$ 和 $f(2)$ 都正确，可以根据子任务的评分标准得分。如果 `max_area` 函数返回 $[7, 12, 13]$，则尽管 $f(1)$ 和 $f(3)$ 正确，但 $f(2)$ 错误，因此得 $0$ 分。如果 `max_area` 函数返回 $[7, 11, 14]$，则尽管 $f(1)$ 和 $f(2)$ 正确，但 $f(3)$ 错误，因此得 $0$ 分。\n\n这个样例满足子任务 $2,3,4,5$ 的条件。\n\n### 样例解释 #2\n考虑 $N=7, H=[1,2,3,4,5,6,7]$ 的情况。\n\n评测程序将调用如下函数：\n\n`max_area([1,2,3,4,5,6,7])=[16,21,24]`\n\n这个样例满足所有子任务的条件。\n\n### 样例解释 #3\n考虑 $N=5, H=[1,3,4,3,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`max_area([1,3,4,3,1])=[9,11,12]`\n\n这个样例满足子任务 $2,3,4,5$ 的条件。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 5\\cdot 10^5$\n- $1 \\leq H_{i} \\leq 5\\cdot 10^5 (1 \\leq i \\leq N)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|分值|约束|\n| :----------: | :----------: | :----------: |\n|$1$|$10$|$H_{i} \\leq H_{i+1} (1 \\leq i \\leq N-1)$|\n|$2$|$3$|$N \\leq 500$|\n|$3$|$15$|$N \\leq 5000$|\n|$4$|$27$|$N \\leq 2\\cdot 10^5$|\n|$5$|$45$|无附加限制|\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2022 R1] 直方图", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\nstd::vector<long long> max_area(std::vector<int> H);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T3「 [히스토그램](https://assets.ioikorea.kr/ioitst/2022/1/histogram/histogram_statement.pdf)」\n\n", "description": "有一个由 $N$ 个底边平行于地面的矩形连续排列而成的直方图。每个矩形的宽度都是 $1$，并且从左到右第 $i (1 \\leq i \\leq N)$ 个矩形的高度为整数 $H_{i}$。\n\n下图展示了一个可能的直方图示例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hoexztgq.png)\n\n在这个直方图中，我们希望找到不超过 $K$ 个矩形，这些矩形的底边平行于地面，且除了顶点和边之外的区域不重叠，并且每个边的长度都是整数，使得这些矩形的面积之和最大。这个值记为 $f(K)$。 请编写一个程序来计算 $f(1), f(2), f(3)$。\n\n你需要实现以下函数：\n\n`vector<long long> max_area(vector<int> H);`\n\n- 该函数只会被调用一次。\n- 参数中给定的整数数组 $\\texttt{H}$ 的大小为 $N$。数组的每个元素 $\\texttt{H[i]} (0 \\leq i \\leq N-1)$ 表示从左到右第 $i+1$ 个矩形的高度 $H_{i+1}$。\n- 该函数返回一个大小为 $1 \\sim 3$ 的数组 $\\texttt{A}$。$\\texttt{A[i]} (0 \\leq i<|\\texttt{A}|)$ 中应存储 $f(i+1)$ 的值。请注意，数组 $\\texttt{A}$ 的大小会影响评分标准。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$H_{1}\\,H_{2}\\,\\cdots H_{N}$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1+i (0 \\leq i<|\\texttt{A}|)$ 行：`max_area` 函数返回的数组 $\\texttt{A}$ 中 $\\texttt{A}[i]$ 的值。", "hint": "### 评分标准\n假设 `max_area` 函数返回的数组为 $\\texttt{A}$。\n\n如果 $\\texttt{A}$ 的大小不是 $1$ 到 $3$ 之间，则得 $0$ 分。\n\n根据子任务的标准，如果 $f(1), \\cdots, f(|\\texttt{A}|)$ 中有任何一个值不正确，则得 $0$ 分。\n\n如果 $f(1), \\cdots, f(|\\texttt{A}|)$ 的值都正确，则根据子任务的评分标准得分。\n\n在上述标准中，$f(i)$ 正确意味着 $\\texttt{A}$ 的大小至少为 $i$ 并且 $\\texttt{A}[i-1]$ 的值等于 $f(i)$。\n\n每个子任务的分数是子任务所有数据的最小分数。\n\n### 样例解释 #1\n考虑 $N=7, H=[3,2,1,2,1,4,3]$ 的情况。\n\n评测程序将调用如下函数：\n\n`max_area([3,2,1,2,1,4,3])=[7,11,13]`\n\n下图展示了对于 $K=1,2,3$ 时面积之和最大的情况之一。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2t8kpz59.png)\n\n如果 `max_area` 函数返回 $[7, 11]$，则 $f(1)$ 和 $f(2)$ 都正确，可以根据子任务的评分标准得分。如果 `max_area` 函数返回 $[7, 12, 13]$，则尽管 $f(1)$ 和 $f(3)$ 正确，但 $f(2)$ 错误，因此得 $0$ 分。如果 `max_area` 函数返回 $[7, 11, 14]$，则尽管 $f(1)$ 和 $f(2)$ 正确，但 $f(3)$ 错误，因此得 $0$ 分。\n\n这个样例满足子任务 $2,3,4,5$ 的条件。\n\n### 样例解释 #2\n考虑 $N=7, H=[1,2,3,4,5,6,7]$ 的情况。\n\n评测程序将调用如下函数：\n\n`max_area([1,2,3,4,5,6,7])=[16,21,24]`\n\n这个样例满足所有子任务的条件。\n\n### 样例解释 #3\n考虑 $N=5, H=[1,3,4,3,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`max_area([1,3,4,3,1])=[9,11,12]`\n\n这个样例满足子任务 $2,3,4,5$ 的条件。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 5\\cdot 10^5$\n- $1 \\leq H_{i} \\leq 5\\cdot 10^5 (1 \\leq i \\leq N)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|分值|约束|\n| :----------: | :----------: | :----------: |\n|$1$|$10$|$H_{i} \\leq H_{i+1} (1 \\leq i \\leq N-1)$|\n|$2$|$3$|$N \\leq 500$|\n|$3$|$15$|$N \\leq 5000$|\n|$4$|$27$|$N \\leq 2\\cdot 10^5$|\n|$5$|$45$|无附加限制|\n", "locale": "zh-CN"}}}
{"pid": "P11586", "type": "P", "difficulty": 5, "samples": [["3\n0 8 3\n2 5 4\n5 5 6\n5 4\n", "18\n"], ["3\n0 4 6\n3 2 5\n5 6 3\n1 5\n", "37\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "KOI（韩国）"], "title": "[KTSC 2022 R1] 松鼠", "background": "\n  \n**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nlong long fly(std::vector<int> D, std::vector<int> H, std::vector<int> W, int L, int R);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T4「 [날다람쥐\t](https://assets.ioikorea.kr/ioitst/2022/1/squirrel/squirrel_statement.pdf)」\n\n", "description": "在二维平面上，有 $N$ 根柱子按顺序排列。柱子从左到右编号为 $1$ 到 $N$。第 $i (1 \\leq i \\leq N)$ 根柱子的底部位于点 $(D_{i}, 0)$，高度为 $H_{i}$。因此，这根柱子是连接点 $(D_{i}, 0)$ 和 $(D_{i}, H_{i})$ 的线段。此外，$D_{1}=0$。\n\n一开始，松鼠位于最左边柱子的高度为 $L$ 的位置，即点 $(0, L)$。松鼠需要依次经过所有柱子，最终到达最右边柱子的高度为 $R$ 的位置，即点 $(D_{N}, R)$。\n\n当松鼠从一根柱子飞到下一根柱子时，如果向右移动 $d (d \\geq 0)$，高度会下降 $d$。在到达下一根柱子之前，松鼠不能碰到地面。到达下一根柱子的高度为 $0$ 的位置是允许的。\n\n松鼠可以在一根柱子上向上爬或向下滑，但不能爬到超过柱子高度的位置。在第 $i$ 根柱子上向上爬 $h (h \\geq 0)$ 需要花费 $W_{i} \\times h$ 的费用。向下滑动不需要费用。\n\n下图是飞天松鼠移动的一个例子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5hw5cti6.png)\n\n下图左侧的移动方式由于中途碰到地面，因此不允许。下图右侧的移动方式由于没有经过所有柱子，也不允许。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1o2oh8sz.png)\n\n请计算松鼠以最小总费用到达目标位置的方法。\n\n你需要实现以下函数：\n\n`long long fly(vector<int> D, vector<int> H, vector<int> W, int L, int R);`\n- 该函数只会被调用一次。\n- 给定的三个数组的大小为柱子的数量 $N$。\n- 给定的整数数组 $D$ 中，$D[i]$ 表示第 $1$ 根柱子到第 $i+1$ 根柱子的距离 $D_{i+1}$。\n- 给定的整数数组 $H$ 中，$H[i]$ 表示第 $i+1$ 根柱子的高度 $H_{i+1}$。\n- 给定的整数数组 $W$ 中，$W[i]$ 表示第 $i+1$ 根柱子上每上升 $1$ 单位距离的费用 $W_{i+1}$。\n- 给定的整数 $L$ 表示飞天松鼠在第 $1$ 根柱子上的初始高度。\n- 给定的整数 $R$ 表示飞天松鼠在第 $N$ 根柱子上需要到达的高度。\n\n该函数的返回值应为：\n- 如果有方法遵守规则到达最终位置，返回飞天松鼠到达最终位置的最小费用。可以证明，满足约束条件的输入数据的最小费用总是整数。\n- 如果没有方法遵守规则到达最终位置，返回 `-1`。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $1+i (1 \\leq i \\leq N)$ 行：$D_{i}\\,H_{i}\\,W_{i}$\n- 第 $2+N$ 行：$L\\,R$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n第 $1$ 行：函数 `fly` 返回的值。", "hint": "### 样例解释 #1\n考虑 $N=3$，第 $1$ 根柱子到第 $2$ 根柱子的距离为 $2$，第 $1$ 根柱子到第 $3$ 根柱子的距离为 $5$，柱子的高度从左到右分别为 $8,5,5$，柱子的权重从左到右分别为 $3,4,6$，$L=5, R=4$ 的情况。\n\n评测程序将调用如下函数：\n\n`fly([0,2,5],[8,5,5],[3,4,6], 5,4)=18`\n\n在这种情况下，从第 $1$ 根柱子上升 $2$ 个单位距离，然后在第 $3$ 根柱子上升 $2$ 个单位距离是最优的，因此函数应返回 $18$。\n\n这个例子满足子任务 $3,4,5,6$ 的条件。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 5\\cdot 10^5$\n- $0=D_{1}<D_{2}<\\cdots<D_{N} \\leq 10^{9}$\n- $1 \\leq H_{i} \\leq 10^{9}(1 \\leq i \\leq N)$\n- $0 \\leq W_{i} \\leq 10^{9}(1 \\leq i \\leq N)$\n- $0 \\leq L \\leq H_{1}$\n- $0 \\leq R \\leq H_{N}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$4$|$W_{i}=0 (1 \\leq i \\leq N)$|\n|$2$|$13$|$W_{i}=1 (1 \\leq i \\leq N)$|\n|$3$|$18$|$W_{i} \\leq W_{i+1} (1 \\leq i \\leq N-1)$|\n|$4$|$15$|$N \\leq 500,H_{i} \\leq 500 (1 \\leq i \\leq N)$|\n|$5$|$18$|$N \\leq 5000$|\n|$6$|$32$|无附加限制|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2022 R1] 松鼠", "background": "\n  \n**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nlong long fly(std::vector<int> D, std::vector<int> H, std::vector<int> W, int L, int R);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T4「 [날다람쥐\t](https://assets.ioikorea.kr/ioitst/2022/1/squirrel/squirrel_statement.pdf)」\n\n", "description": "在二维平面上，有 $N$ 根柱子按顺序排列。柱子从左到右编号为 $1$ 到 $N$。第 $i (1 \\leq i \\leq N)$ 根柱子的底部位于点 $(D_{i}, 0)$，高度为 $H_{i}$。因此，这根柱子是连接点 $(D_{i}, 0)$ 和 $(D_{i}, H_{i})$ 的线段。此外，$D_{1}=0$。\n\n一开始，松鼠位于最左边柱子的高度为 $L$ 的位置，即点 $(0, L)$。松鼠需要依次经过所有柱子，最终到达最右边柱子的高度为 $R$ 的位置，即点 $(D_{N}, R)$。\n\n当松鼠从一根柱子飞到下一根柱子时，如果向右移动 $d (d \\geq 0)$，高度会下降 $d$。在到达下一根柱子之前，松鼠不能碰到地面。到达下一根柱子的高度为 $0$ 的位置是允许的。\n\n松鼠可以在一根柱子上向上爬或向下滑，但不能爬到超过柱子高度的位置。在第 $i$ 根柱子上向上爬 $h (h \\geq 0)$ 需要花费 $W_{i} \\times h$ 的费用。向下滑动不需要费用。\n\n下图是飞天松鼠移动的一个例子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5hw5cti6.png)\n\n下图左侧的移动方式由于中途碰到地面，因此不允许。下图右侧的移动方式由于没有经过所有柱子，也不允许。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1o2oh8sz.png)\n\n请计算松鼠以最小总费用到达目标位置的方法。\n\n你需要实现以下函数：\n\n`long long fly(vector<int> D, vector<int> H, vector<int> W, int L, int R);`\n- 该函数只会被调用一次。\n- 给定的三个数组的大小为柱子的数量 $N$。\n- 给定的整数数组 $D$ 中，$D[i]$ 表示第 $1$ 根柱子到第 $i+1$ 根柱子的距离 $D_{i+1}$。\n- 给定的整数数组 $H$ 中，$H[i]$ 表示第 $i+1$ 根柱子的高度 $H_{i+1}$。\n- 给定的整数数组 $W$ 中，$W[i]$ 表示第 $i+1$ 根柱子上每上升 $1$ 单位距离的费用 $W_{i+1}$。\n- 给定的整数 $L$ 表示飞天松鼠在第 $1$ 根柱子上的初始高度。\n- 给定的整数 $R$ 表示飞天松鼠在第 $N$ 根柱子上需要到达的高度。\n\n该函数的返回值应为：\n- 如果有方法遵守规则到达最终位置，返回飞天松鼠到达最终位置的最小费用。可以证明，满足约束条件的输入数据的最小费用总是整数。\n- 如果没有方法遵守规则到达最终位置，返回 `-1`。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $1+i (1 \\leq i \\leq N)$ 行：$D_{i}\\,H_{i}\\,W_{i}$\n- 第 $2+N$ 行：$L\\,R$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n第 $1$ 行：函数 `fly` 返回的值。", "hint": "### 样例解释 #1\n考虑 $N=3$，第 $1$ 根柱子到第 $2$ 根柱子的距离为 $2$，第 $1$ 根柱子到第 $3$ 根柱子的距离为 $5$，柱子的高度从左到右分别为 $8,5,5$，柱子的权重从左到右分别为 $3,4,6$，$L=5, R=4$ 的情况。\n\n评测程序将调用如下函数：\n\n`fly([0,2,5],[8,5,5],[3,4,6], 5,4)=18`\n\n在这种情况下，从第 $1$ 根柱子上升 $2$ 个单位距离，然后在第 $3$ 根柱子上升 $2$ 个单位距离是最优的，因此函数应返回 $18$。\n\n这个例子满足子任务 $3,4,5,6$ 的条件。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 5\\cdot 10^5$\n- $0=D_{1}<D_{2}<\\cdots<D_{N} \\leq 10^{9}$\n- $1 \\leq H_{i} \\leq 10^{9}(1 \\leq i \\leq N)$\n- $0 \\leq W_{i} \\leq 10^{9}(1 \\leq i \\leq N)$\n- $0 \\leq L \\leq H_{1}$\n- $0 \\leq R \\leq H_{N}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$4$|$W_{i}=0 (1 \\leq i \\leq N)$|\n|$2$|$13$|$W_{i}=1 (1 \\leq i \\leq N)$|\n|$3$|$18$|$W_{i} \\leq W_{i+1} (1 \\leq i \\leq N-1)$|\n|$4$|$15$|$N \\leq 500,H_{i} \\leq 500 (1 \\leq i \\leq N)$|\n|$5$|$18$|$N \\leq 5000$|\n|$6$|$32$|无附加限制|", "locale": "zh-CN"}}}
{"pid": "P11587", "type": "P", "difficulty": 7, "samples": [["4 2\n2 3 1 1\n1 3 2\n0 3\n1 2\n", "3\n5\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "KOI（韩国）"], "title": "[KTSC 2022 R2] 编程测试", "background": "\n  \n**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nstd::vector<int> testset(std::vector<int> A, std::vector<int> B, std::vector<int> L, std::vector<int> U);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T1「 [코딩 테스트\t](https://assets.ioikorea.kr/ioitst/2022/2/codingtest/codingtest_statement.pdf)」\n\n注：原题时间限制为 2.5s，但是洛谷评测机不给力，因此放宽至 3s。\n", "description": "公司最近因为编程测试的流行，开始出一些编程测试题目并出售给 IT 公司。\n\n为了方便，公司将题目的难度分为 $0$ 到 $N-1$ 个等级。目前，公司有 $A_i$ 个难度为 $i$ 级的题目，还有 $B_i$ 个难度不确定是 $i$ 级还是 $i+1$ 级的题目。除此之外，没有其他难度的题目。\n\n公司正在寻找愿意购买题目的企业。目前有 $M$ 家企业表示有购买意向，编号从 $0$ 到 $M-1$。第 $j (0 \\leq j \\leq M-1)$ 家企业只对难度在 $L_j$ 级到 $U_j$ 级之间的题目感兴趣。\n\n公司计划将难度在 $L_j$ 级到 $U_j$ 级之间的题目按难度各选一个，组成一套题出售给第 $j$ 家企业，我们称之为一场比赛。如果只向第 $j$ 家企业出售题目，最多可以出售多少场比赛？对于难度不确定是 $i$ 级还是 $i+1$ 级的题目，需要适当分配难度，使得出售的比赛数量最多，并且每场比赛中的题目不能重复使用。\n\n你需要实现以下函数：\n\n`vector<int> testset(vector<int> A, vector<int> B, vector<int> L, vector<int> U);`\n\n- 该函数只会被调用一次。\n- `A`：长度为 $N$ 的整数数组。对于每个 $i (0 \\leq i \\leq N-1)$，$A_i$ 是难度为 $i$ 级的题目数量。\n- `B`：长度为 $N-1$ 的整数数组。对于每个 $i (0 \\leq i \\leq N-2)$，$B_i$ 是难度不确定是 $i$ 级还是 $i+1$ 级的题目数量。\n- `L, U`：长度为 $M$ 的整数数组。对于每个 $j (0 \\leq j \\leq M-1)$，$L_j$, $U_j$ 分别是第 $j$ 家企业感兴趣的题目的最小难度和最大难度。\n- 该函数返回一个长度为 $M$ 的整数数组 $S$。对于每个 $j (0 \\leq j \\leq M-1)$，$S_j$ 是可以出售给第 $j$ 家企业的比赛的最大数量。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,M$\n- 第 $2$ 行：$A[0]\\,A[1]\\,\\cdots\\,A[N-1]$\n- 第 $3$ 行：$B[0]\\,B[1]\\,\\cdots\\,B[N-2]$\n- 第 $4+j (0 \\leq j \\leq M-1)$ 行：$L[j]\\,U[j]$", "outputFormat": "示例评测程序的输出格式如下：\n\n- 第 $1+j (0 \\leq j \\leq M-1)$ 行：$S[j]$", "hint": "### 样例解释 #1\n考虑 $N=4, M=2, A=[2,3,1,1], B=[1,3,2], L=[0,1], U=[3,2]$ 的情况。\n\n评测程序将调用如下函数：\n\n`testset({2,3,1,1},{1,3,2},{0,1},{3,2});`\n\n第 $0$ 家企业需要难度在 $0$ 级到 $3$ 级之间的题目。可以通过以下方式组成 $3$ 场比赛，剩下一个难度为 $1$ 级的题目，无法再组成更多场比赛。\n\n|  | $0$ 级 | $1$ 级 | $2$ 级 | $3$ 级 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n|比赛 $1$|$0$|$1$|$2$|$3$|\n|比赛 $2$|$0$|$1$|$1-\\mathbf{2}$|$2-\\mathbf{3}$|\n|比赛 $3$|$\\mathbf{0 - 1}$|$\\mathbf{1 - 2}$|$1-\\mathbf{2}$|$2-\\mathbf{3}$|\n\n第 $1$ 家企业需要难度在 $1$ 级到 $2$ 级之间的题目。可以通过以下方式组成 $5$ 场比赛，使用了所有可能的题目，无法再组成更多的比赛。\n\n|  | $1$ 级 | $2$ 级 |\n| :----------: | :----------: | :----------: |\n|比赛 $1$|$1$|$2$|\n|比赛 $2$|$1$|$1-\\mathbf{2}$|\n|比赛 $3$|$1$|$1 \\mathbf{- 2}$|\n|比赛 $4$|$0-\\mathbf{1}$|$\\mathbf{2 - 3}$\n|比赛 $5$|$\\mathbf{1 - 2}$|$\\mathbf{2 - 3}$|\n\n因此，调用的 `testset` 函数应返回 $S=[3,5]$。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 10^5$\n- $1 \\leq M \\leq 10^5$\n- 对于所有 $i (0 \\leq i \\leq N-1)$，$0 \\leq A[i] \\leq 10^{8}$\n- 对于所有 $i (0 \\leq i \\leq N-2)$，$0 \\leq B[i] \\leq 10^{8}$\n- 对于所有 $i (0 \\leq j \\leq M-1)$，$0 \\leq L[i] \\leq U[i] \\leq N-1$\n\n详细子任务附加限制及分值如下表所示。\n\n| Subtask | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$3$|$A[i] \\leq 1000 (0 \\leq i \\leq N-1),B[i] \\leq 1000 (0 \\leq i \\leq N-2),U[j]-L[j] \\leq 2 (0 \\leq j \\leq M-1)$|\n|$2$|$15$|$M \\leq 100$|\n|$3$|$36$|$N \\leq 5000$|\n|$4$|$23$|对于所有 $j (0 \\leq j \\leq M-1)$，$L[j]=0$|\n|$5$|$23$|无附加限制|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2022 R2] 编程测试", "background": "\n  \n**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nstd::vector<int> testset(std::vector<int> A, std::vector<int> B, std::vector<int> L, std::vector<int> U);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T1「 [코딩 테스트\t](https://assets.ioikorea.kr/ioitst/2022/2/codingtest/codingtest_statement.pdf)」\n\n注：原题时间限制为 2.5s，但是洛谷评测机不给力，因此放宽至 3s。\n", "description": "公司最近因为编程测试的流行，开始出一些编程测试题目并出售给 IT 公司。\n\n为了方便，公司将题目的难度分为 $0$ 到 $N-1$ 个等级。目前，公司有 $A_i$ 个难度为 $i$ 级的题目，还有 $B_i$ 个难度不确定是 $i$ 级还是 $i+1$ 级的题目。除此之外，没有其他难度的题目。\n\n公司正在寻找愿意购买题目的企业。目前有 $M$ 家企业表示有购买意向，编号从 $0$ 到 $M-1$。第 $j (0 \\leq j \\leq M-1)$ 家企业只对难度在 $L_j$ 级到 $U_j$ 级之间的题目感兴趣。\n\n公司计划将难度在 $L_j$ 级到 $U_j$ 级之间的题目按难度各选一个，组成一套题出售给第 $j$ 家企业，我们称之为一场比赛。如果只向第 $j$ 家企业出售题目，最多可以出售多少场比赛？对于难度不确定是 $i$ 级还是 $i+1$ 级的题目，需要适当分配难度，使得出售的比赛数量最多，并且每场比赛中的题目不能重复使用。\n\n你需要实现以下函数：\n\n`vector<int> testset(vector<int> A, vector<int> B, vector<int> L, vector<int> U);`\n\n- 该函数只会被调用一次。\n- `A`：长度为 $N$ 的整数数组。对于每个 $i (0 \\leq i \\leq N-1)$，$A_i$ 是难度为 $i$ 级的题目数量。\n- `B`：长度为 $N-1$ 的整数数组。对于每个 $i (0 \\leq i \\leq N-2)$，$B_i$ 是难度不确定是 $i$ 级还是 $i+1$ 级的题目数量。\n- `L, U`：长度为 $M$ 的整数数组。对于每个 $j (0 \\leq j \\leq M-1)$，$L_j$, $U_j$ 分别是第 $j$ 家企业感兴趣的题目的最小难度和最大难度。\n- 该函数返回一个长度为 $M$ 的整数数组 $S$。对于每个 $j (0 \\leq j \\leq M-1)$，$S_j$ 是可以出售给第 $j$ 家企业的比赛的最大数量。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,M$\n- 第 $2$ 行：$A[0]\\,A[1]\\,\\cdots\\,A[N-1]$\n- 第 $3$ 行：$B[0]\\,B[1]\\,\\cdots\\,B[N-2]$\n- 第 $4+j (0 \\leq j \\leq M-1)$ 行：$L[j]\\,U[j]$", "outputFormat": "示例评测程序的输出格式如下：\n\n- 第 $1+j (0 \\leq j \\leq M-1)$ 行：$S[j]$", "hint": "### 样例解释 #1\n考虑 $N=4, M=2, A=[2,3,1,1], B=[1,3,2], L=[0,1], U=[3,2]$ 的情况。\n\n评测程序将调用如下函数：\n\n`testset({2,3,1,1},{1,3,2},{0,1},{3,2});`\n\n第 $0$ 家企业需要难度在 $0$ 级到 $3$ 级之间的题目。可以通过以下方式组成 $3$ 场比赛，剩下一个难度为 $1$ 级的题目，无法再组成更多场比赛。\n\n|  | $0$ 级 | $1$ 级 | $2$ 级 | $3$ 级 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n|比赛 $1$|$0$|$1$|$2$|$3$|\n|比赛 $2$|$0$|$1$|$1-\\mathbf{2}$|$2-\\mathbf{3}$|\n|比赛 $3$|$\\mathbf{0 - 1}$|$\\mathbf{1 - 2}$|$1-\\mathbf{2}$|$2-\\mathbf{3}$|\n\n第 $1$ 家企业需要难度在 $1$ 级到 $2$ 级之间的题目。可以通过以下方式组成 $5$ 场比赛，使用了所有可能的题目，无法再组成更多的比赛。\n\n|  | $1$ 级 | $2$ 级 |\n| :----------: | :----------: | :----------: |\n|比赛 $1$|$1$|$2$|\n|比赛 $2$|$1$|$1-\\mathbf{2}$|\n|比赛 $3$|$1$|$1 \\mathbf{- 2}$|\n|比赛 $4$|$0-\\mathbf{1}$|$\\mathbf{2 - 3}$\n|比赛 $5$|$\\mathbf{1 - 2}$|$\\mathbf{2 - 3}$|\n\n因此，调用的 `testset` 函数应返回 $S=[3,5]$。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 10^5$\n- $1 \\leq M \\leq 10^5$\n- 对于所有 $i (0 \\leq i \\leq N-1)$，$0 \\leq A[i] \\leq 10^{8}$\n- 对于所有 $i (0 \\leq i \\leq N-2)$，$0 \\leq B[i] \\leq 10^{8}$\n- 对于所有 $i (0 \\leq j \\leq M-1)$，$0 \\leq L[i] \\leq U[i] \\leq N-1$\n\n详细子任务附加限制及分值如下表所示。\n\n| Subtask | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$3$|$A[i] \\leq 1000 (0 \\leq i \\leq N-1),B[i] \\leq 1000 (0 \\leq i \\leq N-2),U[j]-L[j] \\leq 2 (0 \\leq j \\leq M-1)$|\n|$2$|$15$|$M \\leq 100$|\n|$3$|$36$|$N \\leq 5000$|\n|$4$|$23$|对于所有 $j (0 \\leq j \\leq M-1)$，$L[j]=0$|\n|$5$|$23$|无附加限制|", "locale": "zh-CN"}}}
{"pid": "P11588", "type": "P", "difficulty": 6, "samples": [["6\n-1 2 -3 3 -1 2\n", "6"], ["8\n-1 6 -3 -6 1 -1 3 6\n", "21\n"], ["15\n-7 -1 4 -1 2 6 -3 4 7 -5 6 -2 6 5 7\n", "1116\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "KOI（韩国）"], "title": "[KTSC 2022 R2] 彩色括号序列", "background": "\n  \n**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nint count(std::vector<int> P);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T2「 [알록달록한 괄호열](https://assets.ioikorea.kr/ioitst/2022/2/colorful/colorful_statement.pdf)」\n\n", "description": "括号序列是由两种字符 `(` 和 `)` 组成的字符串。好的括号序列可以通过以下规则构成：\n\n- 空字符串是好的括号序列。\n- 如果 $S$ 是好的括号序列，那么 $(S)$ 也是好的括号序列。在这种情况下，$S$ 两端的括号是配对的。\n- 如果 $S$ 和 $T$ 都是好的括号序列，那么 $ST$ 也是好的括号序列。\n\n彩色括号序列是指每个括号都被涂上特定颜色的括号序列。五彩缤纷的括号序列需要满足以下所有条件：\n\n- 忽略颜色，仅看括号的形式时是好的括号序列。\n- 所有相邻的两个括号颜色不同。\n- 所有配对的两个括号颜色不同。\n\n当从字符串 $S$ 中选出一个或多个字符按顺序排列成 $T$ 时，称可以从 $S$ 中选出 $T$。给定一个彩色括号序列，问可以从中选出多少个五彩缤纷的括号序列？即使括号形式相同，但只要颜色不同就算作不同情况；即使选取方式不同，但结果相同也只算作一种情况。\n\n你需要实现以下函数：\n\n`int count(vector<int> P)`\n\n- 该函数只会被调用一次。\n- `P`：表示彩色括号序列，$P[i]$ 表示第 $i$ 个括号的信息。$P[i] < 0$ 表示左括号，$P[i] > 0$ 表示右括号，$|P[i]|$ 的值表示颜色。\n- 该函数需要返回从给定彩色括号序列中可以选出的五彩缤纷括号序列的数量，并对 $1000000007$ 取模。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序的输入格式如下：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$P[0]\\,P[1]\\,\\cdots\\,P[N-1]$", "outputFormat": "示例评测程序的输出格式如下：\n\n- 第 $1$ 行：`count` 函数返回的值。", "hint": "### 样例解释 #1\n用颜色 c 涂的括号 p 表示为 p。给定彩色括号序列 $\\underset{123312}{()()()}$，评测程序会调用如下函数：\n`count({-1,2,-3,3,-1,2})`\n\n可以选出的五彩缤纷括号序列有 $\\underset{12}{()},\\underset{13}{()},\\underset{32}{()},\\underset{1212}{()()},\\underset{1232}{()()},\\underset{1312}{()()}$ 共 $6$ 种。因此，调用的 `count` 函数应返回 $6$。\n\n从中选取特定字符串的方法有多种，在这个样例中，选取  \n $\\underset{12}{()}$ 的方法有 $3$ 种。\n \n### 样例解释 #2\n给定彩色括号序列 $(()())$，评测程序会调用如下函数：\n\n`count({1,6,-3,-6,1,-1,3,6})`\n\n可以选出的五彩缤纷括号序列有 $\\underset{13}{()},\\underset{16}{()},\\underset{31}{()},\\underset{36}{()},\\underset{61}{()},\\underset{63}{()},\\underset{1313}{(())},\\underset{1316}{(())},\\underset{1613}{(())},\\underset{1616}{(())},\\underset{1636}{(())},\\underset{3136}{(())},\\underset{3616}{(())},\\underset{3636}{(())},\\underset{1613}{()()},\\underset{1616}{()()},\\underset{1631}{()()},\\underset{1636}{()()},\\underset{163136}{()(())},\\underset{163616}{()(())},\\underset{163636}{()(())}$ 共 $21$ 种。因此，调用的 `count` 函数应返回 $21$。\n\n$\\underset{1336}{(())}$ 和 $\\underset{6136}{(())}$ 虽然括号序列是好的，但由于相邻两个括号颜色相同或配对括号颜色相同，因此不是五彩缤纷的括号序列。\n\n### 样例解释 #3\n给定彩色括号序列 $\\underset{714126347562657}{(()())())()()))}$，评测程序会调用如下函数：\n\n`count({-7,-1,4,-1,2,6,-3,4,7,-5,6,-2,6,5,7})`\n\n调用的 `count` 函数应返回 $1116$。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- 用 $N$ 表示 $P$ 的长度，$1 \\leq N \\leq 700$\n- 对于所有 $i (0 \\leq i \\leq N-1)$，$1 \\leq |P[i]| \\leq N$\n\n详细子任务附加限制及分值如下表所示。\n\n| Subtask | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$5$|$N \\leq 20$|\n|$2$|$30$|$N \\leq 200$|\n|$3$|$27$|$N \\leq 500$。对于所有 $i (0 \\leq i \\leq N-1)$，$\\lvert P[i]\\rvert \\leq 20$|\n|$4$|$14$|对于所有 $i (0 \\leq i \\leq N-1)$，$\\lvert P[i]\\rvert \\leq 2$|\n|$5$|$24$|无附加限制|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2022 R2] 彩色括号序列", "background": "\n  \n**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nint count(std::vector<int> P);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T2「 [알록달록한 괄호열](https://assets.ioikorea.kr/ioitst/2022/2/colorful/colorful_statement.pdf)」\n\n", "description": "括号序列是由两种字符 `(` 和 `)` 组成的字符串。好的括号序列可以通过以下规则构成：\n\n- 空字符串是好的括号序列。\n- 如果 $S$ 是好的括号序列，那么 $(S)$ 也是好的括号序列。在这种情况下，$S$ 两端的括号是配对的。\n- 如果 $S$ 和 $T$ 都是好的括号序列，那么 $ST$ 也是好的括号序列。\n\n彩色括号序列是指每个括号都被涂上特定颜色的括号序列。五彩缤纷的括号序列需要满足以下所有条件：\n\n- 忽略颜色，仅看括号的形式时是好的括号序列。\n- 所有相邻的两个括号颜色不同。\n- 所有配对的两个括号颜色不同。\n\n当从字符串 $S$ 中选出一个或多个字符按顺序排列成 $T$ 时，称可以从 $S$ 中选出 $T$。给定一个彩色括号序列，问可以从中选出多少个五彩缤纷的括号序列？即使括号形式相同，但只要颜色不同就算作不同情况；即使选取方式不同，但结果相同也只算作一种情况。\n\n你需要实现以下函数：\n\n`int count(vector<int> P)`\n\n- 该函数只会被调用一次。\n- `P`：表示彩色括号序列，$P[i]$ 表示第 $i$ 个括号的信息。$P[i] < 0$ 表示左括号，$P[i] > 0$ 表示右括号，$|P[i]|$ 的值表示颜色。\n- 该函数需要返回从给定彩色括号序列中可以选出的五彩缤纷括号序列的数量，并对 $1000000007$ 取模。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序的输入格式如下：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$P[0]\\,P[1]\\,\\cdots\\,P[N-1]$", "outputFormat": "示例评测程序的输出格式如下：\n\n- 第 $1$ 行：`count` 函数返回的值。", "hint": "### 样例解释 #1\n用颜色 c 涂的括号 p 表示为 p。给定彩色括号序列 $\\underset{123312}{()()()}$，评测程序会调用如下函数：\n`count({-1,2,-3,3,-1,2})`\n\n可以选出的五彩缤纷括号序列有 $\\underset{12}{()},\\underset{13}{()},\\underset{32}{()},\\underset{1212}{()()},\\underset{1232}{()()},\\underset{1312}{()()}$ 共 $6$ 种。因此，调用的 `count` 函数应返回 $6$。\n\n从中选取特定字符串的方法有多种，在这个样例中，选取  \n $\\underset{12}{()}$ 的方法有 $3$ 种。\n \n### 样例解释 #2\n给定彩色括号序列 $(()())$，评测程序会调用如下函数：\n\n`count({1,6,-3,-6,1,-1,3,6})`\n\n可以选出的五彩缤纷括号序列有 $\\underset{13}{()},\\underset{16}{()},\\underset{31}{()},\\underset{36}{()},\\underset{61}{()},\\underset{63}{()},\\underset{1313}{(())},\\underset{1316}{(())},\\underset{1613}{(())},\\underset{1616}{(())},\\underset{1636}{(())},\\underset{3136}{(())},\\underset{3616}{(())},\\underset{3636}{(())},\\underset{1613}{()()},\\underset{1616}{()()},\\underset{1631}{()()},\\underset{1636}{()()},\\underset{163136}{()(())},\\underset{163616}{()(())},\\underset{163636}{()(())}$ 共 $21$ 种。因此，调用的 `count` 函数应返回 $21$。\n\n$\\underset{1336}{(())}$ 和 $\\underset{6136}{(())}$ 虽然括号序列是好的，但由于相邻两个括号颜色相同或配对括号颜色相同，因此不是五彩缤纷的括号序列。\n\n### 样例解释 #3\n给定彩色括号序列 $\\underset{714126347562657}{(()())())()()))}$，评测程序会调用如下函数：\n\n`count({-7,-1,4,-1,2,6,-3,4,7,-5,6,-2,6,5,7})`\n\n调用的 `count` 函数应返回 $1116$。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- 用 $N$ 表示 $P$ 的长度，$1 \\leq N \\leq 700$\n- 对于所有 $i (0 \\leq i \\leq N-1)$，$1 \\leq |P[i]| \\leq N$\n\n详细子任务附加限制及分值如下表所示。\n\n| Subtask | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$5$|$N \\leq 20$|\n|$2$|$30$|$N \\leq 200$|\n|$3$|$27$|$N \\leq 500$。对于所有 $i (0 \\leq i \\leq N-1)$，$\\lvert P[i]\\rvert \\leq 20$|\n|$4$|$14$|对于所有 $i (0 \\leq i \\leq N-1)$，$\\lvert P[i]\\rvert \\leq 2$|\n|$5$|$24$|无附加限制|", "locale": "zh-CN"}}}
{"pid": "P11589", "type": "P", "difficulty": 5, "samples": [["3 2\n1 2\n3 1\n", "0\n4\n8\n"], ["13 2\n1 2\n3 1\n", "0\n4\n8\n11\n13\n17\n18\n20\n24\n25\n27\n29\n30\n"], ["12 3\n5 1\n3 4\n0 6\n", "0\n6\n7\n12\n13\n16\n17\n18\n19\n20\n22\n23\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "KOI（韩国）"], "title": "[KTSC 2022 R2] 寻找魔法珠", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nint count(std::vector<int> P);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T2「 [마법 구슬 찾기](https://assets.ioikorea.kr/ioitst/2022/2/marbles/marbles_statement.pdf)」\n\n", "description": "你有 $k+1$ 颗外观和质量完全相同的珠子，其中 $k$ 颗是普通珠子，$1$ 颗是魔法珠子。你需要找到这颗魔法珠子，才能进入魔法城堡。\n\n虽然无法通过肉眼区分魔法珠子和普通珠子，但你可以使用 $M (M \\geq 2)$ 个袋子来找到魔法珠子。袋子编号从 $0$ 到 $M-1$。\n\n找到魔法珠子的步骤如下：\n\n1. 将所有珠子分装到 $M$ 个袋子中。\n   - 每个袋子里必须有珠子，不能有空袋子。\n   - 袋子里只能装珠子，不能装其他袋子。\n2. 念咒语。\n3. 念咒语后：\n   - 不含魔法珠子的袋子里的珠子会全部消失。\n   - 含有魔法珠子的袋子里的珠子会因为魔法珠子的保护而不消失，但需要支付费用。若魔法珠子在第 $i$ 个袋子中，且该袋子里有 $j$ 颗珠子，则费用为 $A[i] \\times j + B[i] (A[i] \\geq 0, B[i] \\geq 1)$ 元。\n   \n魔法珠子永远不会消失，因此你可以重复上述步骤，直到只剩下魔法珠子。\n\n你需要制定一个策略，将珠子分装到袋子中，以最小化在最坏情况下找到魔法珠子的费用。也就是说，无论哪颗珠子是魔法珠子，总费用不超过 $w$ 元，找出最小的 $w$。\n\n请编写一个函数，解决 $0$ 到 $N-1$ 的所有 $k$ 的问题。\n\n你需要实现以下函数：\n\n`vector<long long> find_minimum_costs(int N, vector<int> A, vector<int> B);`\n\n- `N`：珠子的最大数量\n- `A, B`：长度为 $M$ 的数组。对于每个 $i (0 \\leq i \\leq M-1)$，若魔法珠子在第 $i$ 个袋子中，且该袋子里有 $j$ 颗珠子，则费用为 $A[i] \\times j + B[i]$ 元。\n- 该函数返回一个长度为 $N$ 的数组 $C$。对于每个 $k (0 \\leq k \\leq N-1)$，$C[k]$ 是在有 $k$ 颗普通珠子和 $1$ 颗魔法珠子的情况下，找到魔法珠子的最坏情况下的最小费用（单位：元）。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,M$\n- 第 $2+i (0 \\leq i \\leq M-1)$ 行：$A[i]\\,B[i]$\n", "outputFormat": "示例评测程序的输出格式如下：\n\n- 第 $1+k (0 \\leq k \\leq N-1)$ 行：$C[k]$", "hint": "### 样例解释 #1\n考虑 $N=3, M=2, A=[1,3], B=[2,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`find_minimum_costs(3, {1,3}, {2,1});`\n\n当 $k=0$ 时，只有一颗珠子，即魔法珠子，因此费用为 $0$ 元。\n\n当 $k=1$ 时，可以将两颗珠子分别放入两个袋子。若魔法珠子在第 $0$ 个袋子中，费用为 $A[0] \\times 1 + B[0] = 1 \\times 1 + 2 = 3$ 元；若魔法珠子在第 $1$ 个袋子中，费用为 $A[1] \\times 1 + B[1] = 3 \\times 1 + 1 = 4$ 元。因此，最坏情况下费用为 $4$ 元。\n\n当 $k=2$ 时，可以采用以下策略。假设三颗珠子分别为 $X, Y, Z$。\n\n- 将 $X$ 和 $Z$ 放入第 $0$ 个袋子，将 $Y$ 放入第 $1$ 个袋子，然后念咒语。\n- 若魔法珠子在第 $0$ 个袋子中，费用为 $A[0] \\times 2 + B[0] = 1 \\times 2 + 2 = 4$ 元，剩下 $X$ 和 $Z$。然后将 $Z$ 放入第 $0$ 个袋子，将 $X$ 放入第 $1$ 个袋子，再次念咒语。\n   - 若魔法珠子在第 $0$ 个袋子中，费用为 $A[0] \\times 1 + B[0] = 1 \\times 1 + 2 = 3$ 元，剩下 $Z$。\n   - 若魔法珠子在第 $1$ 个袋子中，费用为 $A[1] \\times 1 + B[1] = 3 \\times 1 + 1 = 4$ 元，剩下 $X$。\n- 若魔法珠子在第 $1$ 个袋子中，费用为 $A[1] \\times 1 + B[1] = 3 \\times 1 + 1 = 4$ 元，剩下 $Y$。\n\n在这种策略下，若 $X$ 是魔法珠子，总费用为 $4 + 4 = 8$ 元；若 $Y$ 是魔法珠子，总费用为 $4$ 元；若 $Z$ 是魔法珠子，总费用为 $4 + 3 = 7$ 元。因此，最坏情况下费用为 $8$ 元。\n\n函数应返回 `[0,4,8]`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2022 R2] 寻找魔法珠", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nint count(std::vector<int> P);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T2「 [마법 구슬 찾기](https://assets.ioikorea.kr/ioitst/2022/2/marbles/marbles_statement.pdf)」\n\n", "description": "你有 $k+1$ 颗外观和质量完全相同的珠子，其中 $k$ 颗是普通珠子，$1$ 颗是魔法珠子。你需要找到这颗魔法珠子，才能进入魔法城堡。\n\n虽然无法通过肉眼区分魔法珠子和普通珠子，但你可以使用 $M (M \\geq 2)$ 个袋子来找到魔法珠子。袋子编号从 $0$ 到 $M-1$。\n\n找到魔法珠子的步骤如下：\n\n1. 将所有珠子分装到 $M$ 个袋子中。\n   - 每个袋子里必须有珠子，不能有空袋子。\n   - 袋子里只能装珠子，不能装其他袋子。\n2. 念咒语。\n3. 念咒语后：\n   - 不含魔法珠子的袋子里的珠子会全部消失。\n   - 含有魔法珠子的袋子里的珠子会因为魔法珠子的保护而不消失，但需要支付费用。若魔法珠子在第 $i$ 个袋子中，且该袋子里有 $j$ 颗珠子，则费用为 $A[i] \\times j + B[i] (A[i] \\geq 0, B[i] \\geq 1)$ 元。\n   \n魔法珠子永远不会消失，因此你可以重复上述步骤，直到只剩下魔法珠子。\n\n你需要制定一个策略，将珠子分装到袋子中，以最小化在最坏情况下找到魔法珠子的费用。也就是说，无论哪颗珠子是魔法珠子，总费用不超过 $w$ 元，找出最小的 $w$。\n\n请编写一个函数，解决 $0$ 到 $N-1$ 的所有 $k$ 的问题。\n\n你需要实现以下函数：\n\n`vector<long long> find_minimum_costs(int N, vector<int> A, vector<int> B);`\n\n- `N`：珠子的最大数量\n- `A, B`：长度为 $M$ 的数组。对于每个 $i (0 \\leq i \\leq M-1)$，若魔法珠子在第 $i$ 个袋子中，且该袋子里有 $j$ 颗珠子，则费用为 $A[i] \\times j + B[i]$ 元。\n- 该函数返回一个长度为 $N$ 的数组 $C$。对于每个 $k (0 \\leq k \\leq N-1)$，$C[k]$ 是在有 $k$ 颗普通珠子和 $1$ 颗魔法珠子的情况下，找到魔法珠子的最坏情况下的最小费用（单位：元）。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,M$\n- 第 $2+i (0 \\leq i \\leq M-1)$ 行：$A[i]\\,B[i]$\n", "outputFormat": "示例评测程序的输出格式如下：\n\n- 第 $1+k (0 \\leq k \\leq N-1)$ 行：$C[k]$", "hint": "### 样例解释 #1\n考虑 $N=3, M=2, A=[1,3], B=[2,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`find_minimum_costs(3, {1,3}, {2,1});`\n\n当 $k=0$ 时，只有一颗珠子，即魔法珠子，因此费用为 $0$ 元。\n\n当 $k=1$ 时，可以将两颗珠子分别放入两个袋子。若魔法珠子在第 $0$ 个袋子中，费用为 $A[0] \\times 1 + B[0] = 1 \\times 1 + 2 = 3$ 元；若魔法珠子在第 $1$ 个袋子中，费用为 $A[1] \\times 1 + B[1] = 3 \\times 1 + 1 = 4$ 元。因此，最坏情况下费用为 $4$ 元。\n\n当 $k=2$ 时，可以采用以下策略。假设三颗珠子分别为 $X, Y, Z$。\n\n- 将 $X$ 和 $Z$ 放入第 $0$ 个袋子，将 $Y$ 放入第 $1$ 个袋子，然后念咒语。\n- 若魔法珠子在第 $0$ 个袋子中，费用为 $A[0] \\times 2 + B[0] = 1 \\times 2 + 2 = 4$ 元，剩下 $X$ 和 $Z$。然后将 $Z$ 放入第 $0$ 个袋子，将 $X$ 放入第 $1$ 个袋子，再次念咒语。\n   - 若魔法珠子在第 $0$ 个袋子中，费用为 $A[0] \\times 1 + B[0] = 1 \\times 1 + 2 = 3$ 元，剩下 $Z$。\n   - 若魔法珠子在第 $1$ 个袋子中，费用为 $A[1] \\times 1 + B[1] = 3 \\times 1 + 1 = 4$ 元，剩下 $X$。\n- 若魔法珠子在第 $1$ 个袋子中，费用为 $A[1] \\times 1 + B[1] = 3 \\times 1 + 1 = 4$ 元，剩下 $Y$。\n\n在这种策略下，若 $X$ 是魔法珠子，总费用为 $4 + 4 = 8$ 元；若 $Y$ 是魔法珠子，总费用为 $4$ 元；若 $Z$ 是魔法珠子，总费用为 $4 + 3 = 7$ 元。因此，最坏情况下费用为 $8$ 元。\n\n函数应返回 `[0,4,8]`。", "locale": "zh-CN"}}}
{"pid": "P11590", "type": "P", "difficulty": 7, "samples": [["4\n1 1 1 1\n2 2 1 1\n3 3 4 1\n4 4 4 1\n", "2\n"], ["10\n5 10 1 127\n7 9 1 130\n5 6 3 22\n8 10 2 60\n7 6 3 43\n9 6 2 23\n8 6 3 9\n5 8 2 27\n6 7 2 175\n8 9 2 57\n", "673\n"], ["10\n4 3 2 90\n1 3 4 122\n9 8 2 105\n5 10 2 106\n9 1 2 125\n8 1 4 72\n4 8 4 142\n9 6 4 78\n8 9 2 68\n4 10 4 99\n", "1007\n"], ["10\n8 8 1 38\n10 6 3 11\n1 4 1 150\n3 7 2 91\n5 3 4 30\n8 9 2 147\n5 1 4 164\n3 4 2 6\n4 1 3 104\n5 4 1 19\n", "593\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "KOI（韩国）"], "title": "[KTSC 2022 R2] 安全系统", "background": "\n  \n  \n**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nint max_level (std::vector<int> X, std::vector<int> Y, std::vector<int> D, std::vector<int> W);\n  \n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T2「 [보안 시스템](https://assets.ioikorea.kr/ioitst/2022/2/security/security_statement.pdf)」\n\n", "description": "KOI 国的机密设施可以表示为一个在坐标平面上的正方形，其左下角顶点为 $(0,0)$，右上角顶点为 $(N+1, N+1)$，边与坐标轴平行。正方形的每条边代表机密设施的外壁。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n0dm12u7.png)\n\n在机密设施内有 $N$ 个激光传感器，每个传感器从 $0$ 到 $N-1$ 编号。我们需要设计一个安全系统，通过这些激光传感器来检测入侵者。\n\n每个激光传感器可以表示为坐标平面上的一个点。当激光传感器启动时，它会向上（$+y$ 轴方向）、向右（$+x$ 轴方向）、向下（$-y$ 轴方向）或向左（$-x$ 轴方向）发射激光。激光会一直延伸到碰到墙壁为止，因此激光的路径可以表示为从传感器位置到墙壁上的某个点的线段。\n\n激光发射的方向用 $1$ 到 $4$ 表示。$1$ 表示向上，$2$ 表示向右，$3$ 表示向下，$4$ 表示向左。下图依次展示了激光传感器向 $1$、$2$、$3$、$4$ 方向发射激光的示例。黑点表示激光传感器，红线表示激光。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yvu8war4.png)\n\n第 $i (0 \\leq i \\leq N-1)$ 个激光传感器位于 $(X[i], Y[i])$，启动时会向 $D[i]$ 方向发射激光。不同的激光传感器位于不同的位置。$X[i]$ 和 $Y[i]$ 是 $1$ 到 $N$ 之间的整数。\n\n你可以自由决定每个激光传感器是否启动。但如果不同的激光传感器发射的激光相遇，会导致检测错误，因此激光不能相交，包括端点。下图展示了激光相交的示例，激光可以在一个点相交，也可以在一条线段上相交。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uidq4ybl.png)\n\n第 $i (0 \\leq i \\leq N-1)$ 个激光传感器的重要性为 $W[i]$，表示启动该传感器的贡献值。整个安全系统的安全级别是启动的激光传感器的贡献值之和。\n\n请编写一个函数，在确保激光不相交的前提下，决定哪些激光传感器启动，使得安全级别最大。\n\n你需要实现以下函数：\n\n`int max_level(vector<int> X, vector<int> Y, vector<int> D, vector<int> W);`\n\n- `X, Y, D, W`：长度为 $N$ 的整数数组。对于每个 $i (0 \\leq i \\leq N-1)$，第 $i$ 个激光传感器的坐标为 $(X[i], Y[i])$，启动时向 $D[i]$ 方向发射激光，重要性为 $W[i]$。\n- 该函数返回在确保激光不相交的前提下，最大可能的安全级别。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序的输入格式如下：\n\n- 第 $1$ 行：$N$\n- 第 $2+i (0 \\leq i \\leq N-1)$ 行：$X[i]\\,Y[i]\\,D[i]\\,W[i]$\n", "outputFormat": "示例评测程序的输出格式如下：\n\n第 $1$ 行：`max_level` 函数返回的值。", "hint": "### 样例解释 #1\n\n考虑 $N=4, X=[1,2,3,4], Y=[1,2,3,4], D=[1,1,4,4], W=[1,1,1,1]$ 的情况。评测程序将调用如下函数：\n\n`max_level({1, 2, 3, 4}, {1, 2, 3, 4}, {1, 1, 4, 4}, {1, 1, 1, 1});`\n\n下图展示了机密设施、传感器和传感器发射的激光。启动 $0$ 号和 $1$ 号传感器，或启动 $2$ 号和 $3$ 号传感器，激光不会相交，安全级别为 $2$。没有比这更高的安全级别的方案。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/za9t7c8u.png)\n\n因此，函数应返回 `2`。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 1500$\n- 对于所有 $i (0 \\leq i \\leq N-1)$，$1 \\leq X[i], Y[i] \\leq N$\n- $D[i] \\in \\{1,2,3,4\\}$ (对于所有 $0 \\leq i \\leq N-1$)\n- 对于所有 $i (0 \\leq i \\leq N-1)$，$1 \\leq W[i] \\leq 10^5$\n- 每个传感器的位置都不同。\n\n详细子任务附加限制及分值如下表所示。\n\n| Subtask | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$5$|$N \\leq 18$|\n|$2$|$8$|$N \\leq 36$|\n|$3$|$21$|$N \\leq 100$|\n|$4$|$15$|$N \\leq 500$|\n|$5$|$11$|对于所有 $i (0 \\leq i \\leq N-1)$，$D[i] \\in \\{1,2,3\\}$|\n|$6$|$17$|对于所有 $i,j (0 \\leq i < j \\leq N-1)$，$X[i] \\neq X[j]$ 且 $Y[i] \\neq Y[j]$|\n|$7$|$23$|无附加限制|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2022 R2] 安全系统", "background": "\n  \n  \n**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nint max_level (std::vector<int> X, std::vector<int> Y, std::vector<int> D, std::vector<int> W);\n  \n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T2「 [보안 시스템](https://assets.ioikorea.kr/ioitst/2022/2/security/security_statement.pdf)」\n\n", "description": "KOI 国的机密设施可以表示为一个在坐标平面上的正方形，其左下角顶点为 $(0,0)$，右上角顶点为 $(N+1, N+1)$，边与坐标轴平行。正方形的每条边代表机密设施的外壁。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n0dm12u7.png)\n\n在机密设施内有 $N$ 个激光传感器，每个传感器从 $0$ 到 $N-1$ 编号。我们需要设计一个安全系统，通过这些激光传感器来检测入侵者。\n\n每个激光传感器可以表示为坐标平面上的一个点。当激光传感器启动时，它会向上（$+y$ 轴方向）、向右（$+x$ 轴方向）、向下（$-y$ 轴方向）或向左（$-x$ 轴方向）发射激光。激光会一直延伸到碰到墙壁为止，因此激光的路径可以表示为从传感器位置到墙壁上的某个点的线段。\n\n激光发射的方向用 $1$ 到 $4$ 表示。$1$ 表示向上，$2$ 表示向右，$3$ 表示向下，$4$ 表示向左。下图依次展示了激光传感器向 $1$、$2$、$3$、$4$ 方向发射激光的示例。黑点表示激光传感器，红线表示激光。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yvu8war4.png)\n\n第 $i (0 \\leq i \\leq N-1)$ 个激光传感器位于 $(X[i], Y[i])$，启动时会向 $D[i]$ 方向发射激光。不同的激光传感器位于不同的位置。$X[i]$ 和 $Y[i]$ 是 $1$ 到 $N$ 之间的整数。\n\n你可以自由决定每个激光传感器是否启动。但如果不同的激光传感器发射的激光相遇，会导致检测错误，因此激光不能相交，包括端点。下图展示了激光相交的示例，激光可以在一个点相交，也可以在一条线段上相交。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uidq4ybl.png)\n\n第 $i (0 \\leq i \\leq N-1)$ 个激光传感器的重要性为 $W[i]$，表示启动该传感器的贡献值。整个安全系统的安全级别是启动的激光传感器的贡献值之和。\n\n请编写一个函数，在确保激光不相交的前提下，决定哪些激光传感器启动，使得安全级别最大。\n\n你需要实现以下函数：\n\n`int max_level(vector<int> X, vector<int> Y, vector<int> D, vector<int> W);`\n\n- `X, Y, D, W`：长度为 $N$ 的整数数组。对于每个 $i (0 \\leq i \\leq N-1)$，第 $i$ 个激光传感器的坐标为 $(X[i], Y[i])$，启动时向 $D[i]$ 方向发射激光，重要性为 $W[i]$。\n- 该函数返回在确保激光不相交的前提下，最大可能的安全级别。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序的输入格式如下：\n\n- 第 $1$ 行：$N$\n- 第 $2+i (0 \\leq i \\leq N-1)$ 行：$X[i]\\,Y[i]\\,D[i]\\,W[i]$\n", "outputFormat": "示例评测程序的输出格式如下：\n\n第 $1$ 行：`max_level` 函数返回的值。", "hint": "### 样例解释 #1\n\n考虑 $N=4, X=[1,2,3,4], Y=[1,2,3,4], D=[1,1,4,4], W=[1,1,1,1]$ 的情况。评测程序将调用如下函数：\n\n`max_level({1, 2, 3, 4}, {1, 2, 3, 4}, {1, 1, 4, 4}, {1, 1, 1, 1});`\n\n下图展示了机密设施、传感器和传感器发射的激光。启动 $0$ 号和 $1$ 号传感器，或启动 $2$ 号和 $3$ 号传感器，激光不会相交，安全级别为 $2$。没有比这更高的安全级别的方案。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/za9t7c8u.png)\n\n因此，函数应返回 `2`。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 1500$\n- 对于所有 $i (0 \\leq i \\leq N-1)$，$1 \\leq X[i], Y[i] \\leq N$\n- $D[i] \\in \\{1,2,3,4\\}$ (对于所有 $0 \\leq i \\leq N-1$)\n- 对于所有 $i (0 \\leq i \\leq N-1)$，$1 \\leq W[i] \\leq 10^5$\n- 每个传感器的位置都不同。\n\n详细子任务附加限制及分值如下表所示。\n\n| Subtask | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$5$|$N \\leq 18$|\n|$2$|$8$|$N \\leq 36$|\n|$3$|$21$|$N \\leq 100$|\n|$4$|$15$|$N \\leq 500$|\n|$5$|$11$|对于所有 $i (0 \\leq i \\leq N-1)$，$D[i] \\in \\{1,2,3\\}$|\n|$6$|$17$|对于所有 $i,j (0 \\leq i < j \\leq N-1)$，$X[i] \\neq X[j]$ 且 $Y[i] \\neq Y[j]$|\n|$7$|$23$|无附加限制|", "locale": "zh-CN"}}}
{"pid": "P11591", "type": "P", "difficulty": 4, "samples": [["9 6 4\n2 4 5 7\n1 2\n1 3\n1 8\n2 4\n3 4\n5 6", "1 1 1 1 -1 1 -1 2 -1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2024", "广度优先搜索 BFS", "最短路", "NordicOI（北欧）"], "title": "[NordicOI 2024] Anime Shops", "background": "翻译自 [NordicOI 2024 A](https://cses.fi/495/task/A)。", "description": "有 $n$ 个城市和 $m$ 条连接了两个城市的双向道路。有 $k$ 个城市有动漫商店。\n\n对于每个城市，求出从这个城市出发到除自己以外的另一个有动漫商店的城市的最小距离。", "inputFormat": "第一行输入三个整数 $n,m,k$。\n\n第二行 $k$ 个整数，表示有动漫商店的城市的编号。\n\n接下来 $m$ 行，每行两个数 $a,b$，表示有一条连接城市 $a$ 和 $b$ 的道路。", "outputFormat": "输出一行 $n$ 个整数，其中第 $i$ 个数表示从城市 $i$ 出发到达另一个有动漫商店的城市的最小距离。如果没有这样的城市，输出 `-1`。", "hint": "本题采用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $23$ | $1 \\le k \\le n \\le 1000$，$0 \\le m \\le 2000$ |\n| $2$ | $16$ | $1 \\le k \\le n \\le 10^5$，$m=n-1$，每条路连接城市 $i$ 和 $i+1$ |\n| $3$ | $61$ | $1 \\le k \\le n \\le 10^5$，$0 \\le m \\le 2 \\cdot 10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2024] Anime Shops", "background": "翻译自 [NordicOI 2024 A](https://cses.fi/495/task/A)。", "description": "有 $n$ 个城市和 $m$ 条连接了两个城市的双向道路。有 $k$ 个城市有动漫商店。\n\n对于每个城市，求出从这个城市出发到除自己以外的另一个有动漫商店的城市的最小距离。", "inputFormat": "第一行输入三个整数 $n,m,k$。\n\n第二行 $k$ 个整数，表示有动漫商店的城市的编号。\n\n接下来 $m$ 行，每行两个数 $a,b$，表示有一条连接城市 $a$ 和 $b$ 的道路。", "outputFormat": "输出一行 $n$ 个整数，其中第 $i$ 个数表示从城市 $i$ 出发到达另一个有动漫商店的城市的最小距离。如果没有这样的城市，输出 `-1`。", "hint": "本题采用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $23$ | $1 \\le k \\le n \\le 1000$，$0 \\le m \\le 2000$ |\n| $2$ | $16$ | $1 \\le k \\le n \\le 10^5$，$m=n-1$，每条路连接城市 $i$ 和 $i+1$ |\n| $3$ | $61$ | $1 \\le k \\le n \\le 10^5$，$0 \\le m \\le 2 \\cdot 10^5$ |", "locale": "zh-CN"}}}
{"pid": "P11592", "type": "P", "difficulty": 7, "samples": [["3\n4\n1 1 1 1\n4\n1 1 1 2\n5\n4 1 2 1 2", "YES\n1 1 1 1\nNO\nYES\n2 4 1 1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "NordicOI（北欧）"], "title": "[NordicOI 2024] Chair Game", "background": "翻译自 [NordicOI 2024 B](https://cses.fi/495/task/B)。", "description": "在一个游戏中，有 $n$ 名玩家和 $n$ 把椅子。所有椅子排列成一个圆，每个玩家坐在一把椅子上。\n\n在游戏中会有铃声响起。每把椅子上都有一个在 $1$ 到 $n$ 之间的整数 $s_i$，表示当铃声响起时，坐在这把椅子上的玩家需要顺时针移动 $s_i$ 步。如果铃声响起后每把椅子上恰有一名玩家，则称这个椅子的排列是合法的。\n\n给定所有椅子上的数，你需要判断是否可以将这些椅子重新排列使得其合法。如果可以，还需要给出一个方案。", "inputFormat": "本题多测。第一行一个整数 $t$ 表示测试数据组数。\n\n对于每组测试数据，第一行输入一个整数 $n$，第二行输入 $n$ 个整数 $s_1,s_2,\\dots,s_n$，表示椅子上的数。", "outputFormat": "对于每组数据，第一行输出一个为 `YES` 或 `NO` 的字符串，表示是否可以将这些椅子重新排列使得其合法。如果答案为 `YES`，第二行输出 $n$ 个数，表示一个合法的排列方案。如果有多个合法的方案，输出任意一个。", "hint": "对于所有数据：\n\n- $1 \\le t \\le 1000$\n- $1 \\le n \\le 100$\n- $1 \\le s_i \\le n$\n\n本题采用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $8$ | $1\\le n\\le8$ |\n| $2$ | $5$ | 对于所有 $i\\ne j$，$s_i\\ne s_j$ |\n| $3$ | $4$ | $1\\le s_i\\le 2$ |\n| $4$ | $7$ | $1\\le s_i\\le 3$ |\n| $5$ | $12$ | $1\\le s_i\\le 4$ |\n| $6$ | $15$ | $1\\le s_i\\le 5$ |\n| $7$ | $20$ | $1\\le n\\le16$ |\n| $8$ | $29$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2024] Chair Game", "background": "翻译自 [NordicOI 2024 B](https://cses.fi/495/task/B)。", "description": "在一个游戏中，有 $n$ 名玩家和 $n$ 把椅子。所有椅子排列成一个圆，每个玩家坐在一把椅子上。\n\n在游戏中会有铃声响起。每把椅子上都有一个在 $1$ 到 $n$ 之间的整数 $s_i$，表示当铃声响起时，坐在这把椅子上的玩家需要顺时针移动 $s_i$ 步。如果铃声响起后每把椅子上恰有一名玩家，则称这个椅子的排列是合法的。\n\n给定所有椅子上的数，你需要判断是否可以将这些椅子重新排列使得其合法。如果可以，还需要给出一个方案。", "inputFormat": "本题多测。第一行一个整数 $t$ 表示测试数据组数。\n\n对于每组测试数据，第一行输入一个整数 $n$，第二行输入 $n$ 个整数 $s_1,s_2,\\dots,s_n$，表示椅子上的数。", "outputFormat": "对于每组数据，第一行输出一个为 `YES` 或 `NO` 的字符串，表示是否可以将这些椅子重新排列使得其合法。如果答案为 `YES`，第二行输出 $n$ 个数，表示一个合法的排列方案。如果有多个合法的方案，输出任意一个。", "hint": "对于所有数据：\n\n- $1 \\le t \\le 1000$\n- $1 \\le n \\le 100$\n- $1 \\le s_i \\le n$\n\n本题采用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $8$ | $1\\le n\\le8$ |\n| $2$ | $5$ | 对于所有 $i\\ne j$，$s_i\\ne s_j$ |\n| $3$ | $4$ | $1\\le s_i\\le 2$ |\n| $4$ | $7$ | $1\\le s_i\\le 3$ |\n| $5$ | $12$ | $1\\le s_i\\le 4$ |\n| $6$ | $15$ | $1\\le s_i\\le 5$ |\n| $7$ | $20$ | $1\\le n\\le16$ |\n| $8$ | $29$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11593", "type": "P", "difficulty": 6, "samples": [["3 4\n1 1 1 1\n1 3 6 1\n3 4 5 1", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "二分", "并查集", "2024", "Kruskal 重构树", "树形 DP", "NordicOI（北欧）"], "title": "[NordicOI 2024] Thin Ice", "background": "翻译自 [NordicOI 2024 C](https://cses.fi/495/task/C)。", "description": "Uolevi 在一个冻湖上，湖可以被分为 $n\\times m$ 的网格，每个格子上都有一个金币。\n\n每个格子有一个承受能力，即这个格子的冰上能承受的最大金币数量。\n\n每一步，Uolevi 可以向上、下、左或右移动一格，但不能超出 $n\\times m$ 的边界。如果 Uolevi 当前所在的格子上有金币，那么他可以把金币捡起来。\n\nUolevi 移动时，需要保证目标格子上的金币和自己身上的金币数量加起来不超过目标格子的承受能力。Uolevi 本身的重量可以忽略不计。\n\nUolevi 要收集湖上的金币，为此，他要从湖的边缘出发，到湖的边缘结束。他想知道他最多可以收集到几个金币。", "inputFormat": "第一行输入两个整数 $n,m$。\n\n接下来 $n$ 行，每行 $m$ 个数，每个位置的数 $d$ 表示湖上对应位置格子的承受能力。", "outputFormat": "输出 Uolevi 可以收集到的最大金币数量。", "hint": "### 样例解释：\n\nUolevi 可以从左上角开始，按以下方式移动：\n\n向下 $\\rightarrow$ 捡硬币 $\\rightarrow$ 向右 $\\rightarrow$ 捡硬币 $\\rightarrow$ 向下 $\\rightarrow$ 向左 $\\rightarrow$ 捡硬币 $\\rightarrow$ 向右 $\\rightarrow$ 捡硬币 $\\rightarrow$ 向右 $\\rightarrow$ 捡硬币\n\nUolevi 不可能收集到大于 $6$ 个金币，因为边缘所有格子的承受能力都小于等于 $5$。\n\n### 数据范围：\n\n本题采用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $17$ | $1 \\le nm \\le 16,1 \\le d \\le 16$ |\n| $2$ | $12$ | $1 \\le nm \\le 2 \\cdot 10^5,1 \\le d \\le 5$ |\n| $3$ | $11$ | $n = 1, 1 \\le m \\le 100,1 \\le d \\le 100$ |\n| $4$ | $19$ | $n = 1, 1 \\le m \\le 2 \\cdot 10^5,1 \\le d \\le 2 \\cdot 10^5$ |\n| $5$ | $14$ | $1 \\le nm \\le 1000,1 \\le d \\le 1000$ |\n| $6$ | $27$ | $1 \\le nm \\le 2 \\cdot 10^5,1 \\le d \\le 2 \\cdot 10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2024] Thin Ice", "background": "翻译自 [NordicOI 2024 C](https://cses.fi/495/task/C)。", "description": "Uolevi 在一个冻湖上，湖可以被分为 $n\\times m$ 的网格，每个格子上都有一个金币。\n\n每个格子有一个承受能力，即这个格子的冰上能承受的最大金币数量。\n\n每一步，Uolevi 可以向上、下、左或右移动一格，但不能超出 $n\\times m$ 的边界。如果 Uolevi 当前所在的格子上有金币，那么他可以把金币捡起来。\n\nUolevi 移动时，需要保证目标格子上的金币和自己身上的金币数量加起来不超过目标格子的承受能力。Uolevi 本身的重量可以忽略不计。\n\nUolevi 要收集湖上的金币，为此，他要从湖的边缘出发，到湖的边缘结束。他想知道他最多可以收集到几个金币。", "inputFormat": "第一行输入两个整数 $n,m$。\n\n接下来 $n$ 行，每行 $m$ 个数，每个位置的数 $d$ 表示湖上对应位置格子的承受能力。", "outputFormat": "输出 Uolevi 可以收集到的最大金币数量。", "hint": "### 样例解释：\n\nUolevi 可以从左上角开始，按以下方式移动：\n\n向下 $\\rightarrow$ 捡硬币 $\\rightarrow$ 向右 $\\rightarrow$ 捡硬币 $\\rightarrow$ 向下 $\\rightarrow$ 向左 $\\rightarrow$ 捡硬币 $\\rightarrow$ 向右 $\\rightarrow$ 捡硬币 $\\rightarrow$ 向右 $\\rightarrow$ 捡硬币\n\nUolevi 不可能收集到大于 $6$ 个金币，因为边缘所有格子的承受能力都小于等于 $5$。\n\n### 数据范围：\n\n本题采用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $17$ | $1 \\le nm \\le 16,1 \\le d \\le 16$ |\n| $2$ | $12$ | $1 \\le nm \\le 2 \\cdot 10^5,1 \\le d \\le 5$ |\n| $3$ | $11$ | $n = 1, 1 \\le m \\le 100,1 \\le d \\le 100$ |\n| $4$ | $19$ | $n = 1, 1 \\le m \\le 2 \\cdot 10^5,1 \\le d \\le 2 \\cdot 10^5$ |\n| $5$ | $14$ | $1 \\le nm \\le 1000,1 \\le d \\le 1000$ |\n| $6$ | $27$ | $1 \\le nm \\le 2 \\cdot 10^5,1 \\le d \\le 2 \\cdot 10^5$ |", "locale": "zh-CN"}}}
{"pid": "P11594", "type": "P", "difficulty": 3, "samples": [["5 5 1 1\n....M\n.M...\n..S..\n.S...\n...M.", "1"], ["4 4 4 1\n....\n.M..\n..MM\n...S", "3"], ["1 8 5 2\nSM..MM.S", "2"], ["5 5 2 2\n....M\n.M...\n..S..\n.S...\n...M.", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "前缀和", "差分", "NOISG（新加坡）"], "title": "[NOISG 2018 Finals] Collecting Mushrooms", "background": "译自 [NOISG 2018 Finals A. Collecting Mushrooms](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/collectmushrooms)。", "description": "螃蟹 Lim Li 在她的花园里打造了一个蘑菇种植园。这个蘑菇种植园可以看成一个 $R$ 行 $C$ 列的网格，其中每一格要么是空的，要么有一朵蘑菇，要么有一个洒水器。\n\n举个例子，一个 $R=5,C=5$ 的蘑菇种植园可能是长这样子的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qqn2ssqx.png)\n\n一朵蘑菇和一个洒水器之间的距离被定义为它们的横坐标差的绝对值与纵坐标差的绝对值的较大值。换句话说，假设一朵蘑菇位于 $X_m$ 行 $Y_m$ 列，一个洒水器位于 $X_s$ 行 $Y_s$ 列，那么它们之间的距离为 $\\max(|X_m-X_s|,|Y_m-Y_s|)$。\n\n一个洒水器只能浇到距离自己不超过 $D$ 的蘑菇。下图展示了 $D=1$ 时洒水器可以浇到的区域：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sr5w3lov.png)\n\n一朵蘑菇如果可以被至少 $K$ 个洒水器浇到，则我们称它是**好蘑菇**。你需要帮 Lim Li 计数在她的蘑菇种植园里有多少朵**好蘑菇**。", "inputFormat": "第一行包含四个整数 $R,C,D,K$，含义如题意所述。\n\n接下来 $R$ 行，每行 $C$ 个字符，描述一个蘑菇种植园。每个字符表示一个格子：\n\n- `.` 表示一个空格子。\n- `M` 表示一个有一朵蘑菇的格子。\n- `S` 表示一个有一个洒水器的格子。", "outputFormat": "一行一个整数，表示**好蘑菇**的数量。", "hint": "### 样例 #1 解释\n\n所有洒水器可以浇到的距离范围都是 $1$，也就是每个洒水器都能且仅能洒到与自己八连通的格子。只有位于 $(2,2)$ 的蘑菇可以被浇到水。\n\n这组样例满足子任务 $3,4,6$。\n\n### 样例 #2 解释\n\n唯一的洒水器可以浇到的距离范围是 $4$，所以可以浇到所有蘑菇。\n\n这组样例满足子任务 $1,2,4,6$。\n\n### 样例 #3 解释\n\n所有蘑菇都需要被两头的洒水器浇到才能成为**好蘑菇**。因为洒水器可以浇到的距离范围都是 $5$，所以只有从左往右第二朵和第三朵蘑菇满足**好蘑菇**的要求。\n\n这组样例满足子任务 $4,5,6$。\n\n### 样例 #4 解释\n\n因为洒水器可以浇到的距离范围都是 $2$，所以只有位于 $(2,2)$ 和 $(5,4)$ 的蘑菇可以同时被两个洒水器浇到。\n\n这组样例满足子任务 $4,6$。\n\n### 子任务\n\n对于 $100\\%$ 的数据，$2\\le RC\\le 5\\times 10^5$，$1\\le D\\le \\max(R,C)$，$1\\le K\\le RC$。保证种植园中至少有一朵蘑菇和一个洒水器。\n\n| 子任务 | 得分 | 数据范围及特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $9$ | $1\\le R,C\\le 100$，$D=\\max(R,C)$，$K=1$ |\n| $2$ | $10$ | $1\\le R,C\\le 100$，$D=\\max(R,C)$ |\n| $3$ | $18$ | $1\\le R,C\\le 100$，$D=1$，$K=1$ |\n| $4$ | $23$ | $1\\le R,C\\le 500$，洒水器和蘑菇的数量均少于 $500$ |\n| $5$ | $19$ | $R=1$ |\n| $6$ | $21$ | 无特殊限制 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2018 Finals] Collecting Mushrooms", "background": "译自 [NOISG 2018 Finals A. Collecting Mushrooms](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/collectmushrooms)。", "description": "螃蟹 Lim Li 在她的花园里打造了一个蘑菇种植园。这个蘑菇种植园可以看成一个 $R$ 行 $C$ 列的网格，其中每一格要么是空的，要么有一朵蘑菇，要么有一个洒水器。\n\n举个例子，一个 $R=5,C=5$ 的蘑菇种植园可能是长这样子的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qqn2ssqx.png)\n\n一朵蘑菇和一个洒水器之间的距离被定义为它们的横坐标差的绝对值与纵坐标差的绝对值的较大值。换句话说，假设一朵蘑菇位于 $X_m$ 行 $Y_m$ 列，一个洒水器位于 $X_s$ 行 $Y_s$ 列，那么它们之间的距离为 $\\max(|X_m-X_s|,|Y_m-Y_s|)$。\n\n一个洒水器只能浇到距离自己不超过 $D$ 的蘑菇。下图展示了 $D=1$ 时洒水器可以浇到的区域：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sr5w3lov.png)\n\n一朵蘑菇如果可以被至少 $K$ 个洒水器浇到，则我们称它是**好蘑菇**。你需要帮 Lim Li 计数在她的蘑菇种植园里有多少朵**好蘑菇**。", "inputFormat": "第一行包含四个整数 $R,C,D,K$，含义如题意所述。\n\n接下来 $R$ 行，每行 $C$ 个字符，描述一个蘑菇种植园。每个字符表示一个格子：\n\n- `.` 表示一个空格子。\n- `M` 表示一个有一朵蘑菇的格子。\n- `S` 表示一个有一个洒水器的格子。", "outputFormat": "一行一个整数，表示**好蘑菇**的数量。", "hint": "### 样例 #1 解释\n\n所有洒水器可以浇到的距离范围都是 $1$，也就是每个洒水器都能且仅能洒到与自己八连通的格子。只有位于 $(2,2)$ 的蘑菇可以被浇到水。\n\n这组样例满足子任务 $3,4,6$。\n\n### 样例 #2 解释\n\n唯一的洒水器可以浇到的距离范围是 $4$，所以可以浇到所有蘑菇。\n\n这组样例满足子任务 $1,2,4,6$。\n\n### 样例 #3 解释\n\n所有蘑菇都需要被两头的洒水器浇到才能成为**好蘑菇**。因为洒水器可以浇到的距离范围都是 $5$，所以只有从左往右第二朵和第三朵蘑菇满足**好蘑菇**的要求。\n\n这组样例满足子任务 $4,5,6$。\n\n### 样例 #4 解释\n\n因为洒水器可以浇到的距离范围都是 $2$，所以只有位于 $(2,2)$ 和 $(5,4)$ 的蘑菇可以同时被两个洒水器浇到。\n\n这组样例满足子任务 $4,6$。\n\n### 子任务\n\n对于 $100\\%$ 的数据，$2\\le RC\\le 5\\times 10^5$，$1\\le D\\le \\max(R,C)$，$1\\le K\\le RC$。保证种植园中至少有一朵蘑菇和一个洒水器。\n\n| 子任务 | 得分 | 数据范围及特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $9$ | $1\\le R,C\\le 100$，$D=\\max(R,C)$，$K=1$ |\n| $2$ | $10$ | $1\\le R,C\\le 100$，$D=\\max(R,C)$ |\n| $3$ | $18$ | $1\\le R,C\\le 100$，$D=1$，$K=1$ |\n| $4$ | $23$ | $1\\le R,C\\le 500$，洒水器和蘑菇的数量均少于 $500$ |\n| $5$ | $19$ | $R=1$ |\n| $6$ | $21$ | 无特殊限制 |\n", "locale": "zh-CN"}}}
{"pid": "P11595", "type": "P", "difficulty": 3, "samples": [["4 4 3\n1 2 2 2 3 0\n2 2 2 3 3 0\n3 1 3 3 3 0", "1 1 3 6"], ["4 8 3\n1 0 2 1 3 0\n3 1 3 2 3 0\n3 1 3 1 3 0", "2 5 11 17 23 29 35 41"], ["4 11 3\n1 0 2 0 3 0\n0 0 2 0 3 0\n0 0 0 0 3 0", "4 8 13 19 26 34 43 53 64 76 89"], ["8 8 8\n1 0 1 0 1 0 1 0 1 0 1 0 1 0 7 0\n2 0 2 0 2 0 2 0 2 0 2 0 2 0 7 0\n3 0 3 0 3 0 3 0 3 0 3 0 3 0 7 0\n4 0 4 0 4 0 4 0 4 0 4 0 4 0 7 0\n5 0 5 0 5 0 5 0 5 0 5 0 5 0 7 0\n6 0 6 0 6 0 6 0 6 0 6 0 6 0 7 0\n7 0 7 0 7 0 7 0 7 0 7 0 7 0 7 0", "960800 6702725 26746084 80092734 199948848 439388874 500000001 500000001"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2018", "NOISG（新加坡）"], "title": "[NOISG 2018 Finals] Journey", "background": "译自 [NOISG 2018 Finals B. Journey](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/journey)。", "description": "Kuno 要从 A 市到 B 市旅行，但在路途中他可能会停下来休息。\n\n允许他停留的共有 $N$ 个城市，编号为 $0$ 到 $N-1$，其中 $0$ 号城市表示 A 市，$N-1$ 号城市表示 B 市，编号越大的城市距离 B 市越近。\n\n为了让旅行保持一定的效率，中途停留需要满足以下限制：\n\n- 第 $i$ 次停留的城市必须比第 $i-1$ 次离 B 市**严格**更近。特别地，我们认为第 $0$ 次停留的城市是 A 市。\n- 从 A 市出发，直到从 B 市结束停留离开，整个过程不能超过 $M$ 天。换句话说，我们不允许你在 A 市停留，但允许你在 B 市停留。\n\nKuno 在城市之间的移动和停留基于城市之间的航线和城市中的酒店系统。每个城市 $i$ 都存在 $H$ 条用 $(j,k)$ 表示的航线，表示你可以通过这条航线从城市 $i$ 前往城市 $j$，但是一旦使用这条航线，就必须在城市 $j$ 中停留不少于 $k$ 天。**特别地，每个城市都有一条直接前往 B 市的航线**。\n\n注意可能存在完全相同或起点终点相同的航线，此时你需要把它们视为**不同航线**。你应当忽略远离 B 市的航线。\n\n在飞机中度过的时间忽略不计。\n\n到达一个城市即算作在该城市停留，即使停留了 $0$ 天。\n\n你的任务是，对每一个 $d\\in[1,m]$，帮助 Kuno 计数他从 A 市出发到从 B 市结束停留返回花费 $d$ 天的方案数。特别地，若方案数超过 $5\\times 10^8$，你只需输出 $5\\times 10^8+1$。\n\n两个旅行方案不同当且仅当以下三条任意一条成立：\n\n1. 一个旅行方案中需要在城市 $i$ 停留，而另一个不用。\n2. 存在一个城市 $i$，使得两个旅行方案离开该城市的时间不同。**特别地，也包括从 B 市离开的时间不同**。\n3. 两个行程都从城市 $i$ 到城市 $j$，但使用的航线不同。\n\n例如，对于两个均为 A 市到 C 市，再从 C 市到 D 市，最后从 D 市到 B 市的旅行方案，如果一个是在第二天离开 C 市，另一个是在第三天离开 C 市，那么它们就是不同的方案。此外，如果输入中存在两条同样从 D 市前往 B 市的航线，即便出发时间和到达时间相同，也是不同的方案。\n\n如你仍无法完全理解题意，请阅读**样例解释**。", "inputFormat": "第一行包含三个整数 $N,M,H$，表示城市数量，旅行天数上限，和每个城市的航线数量。\n\n接下来的输入包含 $N-1$ 行，第 $i$ 行包含 $2H$ 个用空格分割的整数，每两个为一组 $(j,k)$，描述从城市 $i-1$ 出发的 $H$ 条航线。\n\n", "outputFormat": "输出 $m$ 个用空格隔开的整数，依次表示从 A 市出发直至从 B 市结束停留离开共花费恰好 $1,2,3,\\cdots ,m$ 天的旅行方案数。注意如果方案数超过 $5\\times 10^8$，则应输出 $5\\times 10^8+1$。", "hint": "### 样例 #1 解释\n\n样例 #1 输入描述了一个具有 $4$ 座城市，每个城市有 $3$ 条不同的航线出发的情况：\n\n| 出发城市 | 航线 $1$ 终点 | $\\text{Min.}$ | 航线 $2$ 终点 | $\\text{Min.}$ | 航线 $3$ 终点 | $\\text{Min.}$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| A 市 | 城市 $1$ | $2$ 天 | 城市 $2$ | $2$ 天 | B 市 | $0$ 天 |\n| 城市 $1$ | 城市 $2$ | $2$ 天 | 城市 $2$ | $3$ 天 | B 市 | $0$ 天 |\n| 城市 $2$ | B 市 | $1$ 天 | B 市 | $3$ 天 | B 市 | $0$ 天 |\n\n为了方便表格描述，我们用 $\\text{Min.}$ 表示了每条航线对目的地最少停留天数的要求。\n\n所有 $1$ 天的旅行方案如下；\n\n| 旅行方案 | 方案 |\n| :----------: | :----------: |\n| $1$ | 在第 $1$ 天从 A 市通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |\n\n所有 $2$ 天的旅行方案如下：\n\n| 旅行方案 | 方案 |\n| :----------: | :----------: |\n| $1$ | 在第 $1$ 天从 A 市通过航线 $3$ 抵达 B 市，在 B 市停留 $1$ 天。 |\n\n所有 $3$ 天的旅行方案如下：\n\n| 旅行方案 | 方案 |\n| :----------: | :----------: |\n| $1$ | 在第 $1$ 天从 A 市通过航线 $1$ 抵达城市 $1$，在城市 $1$ 停留 $2$ 天；在第 $3$ 天从城市 $1$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |\n| $2$ | 在第 $1$ 天从 A 市通过航线 $2$ 抵达城市 $2$，在城市 $2$ 停留 $2$ 天；在第 $3$ 天从城市 $2$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |\n| $3$ | 在第 $1$ 天从 A 市通过航线 $3$ 抵达 B 市，在 B 市停留 $2$ 天。 |\n\n所有 $4$ 天的旅行方案如下：\n\n| 旅行方案 | 方案 |\n| :----------: | :----------: |\n| $1$ | 在第 $1$ 天从 A 市通过航线 $1$ 抵达城市 $1$，在城市 $1$ 停留 $2$ 天；在第 $3$ 天从城市 $1$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $1$ 天。 |\n| $2$ | 在第 $1$ 天从 A 市通过航线 $1$ 抵达城市 $1$，在城市 $1$ 停留 $3$ 天；在第 $4$ 天从城市 $1$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |\n| $3$ | 在第 $1$ 天从 A 市通过航线 $2$ 抵达城市 $2$，在城市 $2$ 停留 $2$ 天；在第 $3$ 天从城市 $2$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $1$ 天。 |\n| $4$ | 在第 $1$ 天从 A 市通过航线 $2$ 抵达城市 $2$，在城市 $2$ 停留 $3$ 天；在第 $4$ 天从城市 $2$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |\n| $5$ | 在第 $1$ 天从 A 市通过航线 $2$ 抵达城市 $2$，在城市 $2$ 停留 $2$ 天；在第 $3$ 天从城市 $2$ 通过航线 $1$ 抵达 B 市，在 B 市停留 $1$ 天。 |\n| $6$ | 在第 $1$ 天从 A 市通过航线 $3$ 抵达 B 市，在 B 市停留 $3$ 天。 |\n\n### 样例 #2 解释\n\n这组样例中除 A 市外所有城市的出发航线均直接到达 B 市。它满足子任务 $1,3,4$。\n\n### 样例 #3 解释\n\n这组样例中所有的航线均不限制目的地最少停留天数。它满足子任务 $2,3,4$。\n\n### 样例 #4 解释\n\n注意若方案数超过 $5\\times 10^8$，你只需输出 $5\\times 10^8+1$。它满足子任务 $2,3,4$。\n\n### 子任务\n\n对于 $100\\%$ 的数据，$N\\le 10^4,M\\le 400,H\\le 100$，其余输入均在此范围下合法。\n\n| 子任务 | 得分 | 数据范围及特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $20$ | 除 A 市外所有城市的出发航线均直接到达 B 市，$N,M,H\\le 10$ |\n| $2$ | $23$ | 所有的航线均不限制目的地最少停留天数，$N,M,H\\le 20$ |\n| $3$ | $26$ | $N,M,H\\le 100$ |\n| $4$ | $31$ | 无特殊限制 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2018 Finals] Journey", "background": "译自 [NOISG 2018 Finals B. Journey](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/journey)。", "description": "Kuno 要从 A 市到 B 市旅行，但在路途中他可能会停下来休息。\n\n允许他停留的共有 $N$ 个城市，编号为 $0$ 到 $N-1$，其中 $0$ 号城市表示 A 市，$N-1$ 号城市表示 B 市，编号越大的城市距离 B 市越近。\n\n为了让旅行保持一定的效率，中途停留需要满足以下限制：\n\n- 第 $i$ 次停留的城市必须比第 $i-1$ 次离 B 市**严格**更近。特别地，我们认为第 $0$ 次停留的城市是 A 市。\n- 从 A 市出发，直到从 B 市结束停留离开，整个过程不能超过 $M$ 天。换句话说，我们不允许你在 A 市停留，但允许你在 B 市停留。\n\nKuno 在城市之间的移动和停留基于城市之间的航线和城市中的酒店系统。每个城市 $i$ 都存在 $H$ 条用 $(j,k)$ 表示的航线，表示你可以通过这条航线从城市 $i$ 前往城市 $j$，但是一旦使用这条航线，就必须在城市 $j$ 中停留不少于 $k$ 天。**特别地，每个城市都有一条直接前往 B 市的航线**。\n\n注意可能存在完全相同或起点终点相同的航线，此时你需要把它们视为**不同航线**。你应当忽略远离 B 市的航线。\n\n在飞机中度过的时间忽略不计。\n\n到达一个城市即算作在该城市停留，即使停留了 $0$ 天。\n\n你的任务是，对每一个 $d\\in[1,m]$，帮助 Kuno 计数他从 A 市出发到从 B 市结束停留返回花费 $d$ 天的方案数。特别地，若方案数超过 $5\\times 10^8$，你只需输出 $5\\times 10^8+1$。\n\n两个旅行方案不同当且仅当以下三条任意一条成立：\n\n1. 一个旅行方案中需要在城市 $i$ 停留，而另一个不用。\n2. 存在一个城市 $i$，使得两个旅行方案离开该城市的时间不同。**特别地，也包括从 B 市离开的时间不同**。\n3. 两个行程都从城市 $i$ 到城市 $j$，但使用的航线不同。\n\n例如，对于两个均为 A 市到 C 市，再从 C 市到 D 市，最后从 D 市到 B 市的旅行方案，如果一个是在第二天离开 C 市，另一个是在第三天离开 C 市，那么它们就是不同的方案。此外，如果输入中存在两条同样从 D 市前往 B 市的航线，即便出发时间和到达时间相同，也是不同的方案。\n\n如你仍无法完全理解题意，请阅读**样例解释**。", "inputFormat": "第一行包含三个整数 $N,M,H$，表示城市数量，旅行天数上限，和每个城市的航线数量。\n\n接下来的输入包含 $N-1$ 行，第 $i$ 行包含 $2H$ 个用空格分割的整数，每两个为一组 $(j,k)$，描述从城市 $i-1$ 出发的 $H$ 条航线。\n\n", "outputFormat": "输出 $m$ 个用空格隔开的整数，依次表示从 A 市出发直至从 B 市结束停留离开共花费恰好 $1,2,3,\\cdots ,m$ 天的旅行方案数。注意如果方案数超过 $5\\times 10^8$，则应输出 $5\\times 10^8+1$。", "hint": "### 样例 #1 解释\n\n样例 #1 输入描述了一个具有 $4$ 座城市，每个城市有 $3$ 条不同的航线出发的情况：\n\n| 出发城市 | 航线 $1$ 终点 | $\\text{Min.}$ | 航线 $2$ 终点 | $\\text{Min.}$ | 航线 $3$ 终点 | $\\text{Min.}$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| A 市 | 城市 $1$ | $2$ 天 | 城市 $2$ | $2$ 天 | B 市 | $0$ 天 |\n| 城市 $1$ | 城市 $2$ | $2$ 天 | 城市 $2$ | $3$ 天 | B 市 | $0$ 天 |\n| 城市 $2$ | B 市 | $1$ 天 | B 市 | $3$ 天 | B 市 | $0$ 天 |\n\n为了方便表格描述，我们用 $\\text{Min.}$ 表示了每条航线对目的地最少停留天数的要求。\n\n所有 $1$ 天的旅行方案如下；\n\n| 旅行方案 | 方案 |\n| :----------: | :----------: |\n| $1$ | 在第 $1$ 天从 A 市通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |\n\n所有 $2$ 天的旅行方案如下：\n\n| 旅行方案 | 方案 |\n| :----------: | :----------: |\n| $1$ | 在第 $1$ 天从 A 市通过航线 $3$ 抵达 B 市，在 B 市停留 $1$ 天。 |\n\n所有 $3$ 天的旅行方案如下：\n\n| 旅行方案 | 方案 |\n| :----------: | :----------: |\n| $1$ | 在第 $1$ 天从 A 市通过航线 $1$ 抵达城市 $1$，在城市 $1$ 停留 $2$ 天；在第 $3$ 天从城市 $1$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |\n| $2$ | 在第 $1$ 天从 A 市通过航线 $2$ 抵达城市 $2$，在城市 $2$ 停留 $2$ 天；在第 $3$ 天从城市 $2$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |\n| $3$ | 在第 $1$ 天从 A 市通过航线 $3$ 抵达 B 市，在 B 市停留 $2$ 天。 |\n\n所有 $4$ 天的旅行方案如下：\n\n| 旅行方案 | 方案 |\n| :----------: | :----------: |\n| $1$ | 在第 $1$ 天从 A 市通过航线 $1$ 抵达城市 $1$，在城市 $1$ 停留 $2$ 天；在第 $3$ 天从城市 $1$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $1$ 天。 |\n| $2$ | 在第 $1$ 天从 A 市通过航线 $1$ 抵达城市 $1$，在城市 $1$ 停留 $3$ 天；在第 $4$ 天从城市 $1$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |\n| $3$ | 在第 $1$ 天从 A 市通过航线 $2$ 抵达城市 $2$，在城市 $2$ 停留 $2$ 天；在第 $3$ 天从城市 $2$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $1$ 天。 |\n| $4$ | 在第 $1$ 天从 A 市通过航线 $2$ 抵达城市 $2$，在城市 $2$ 停留 $3$ 天；在第 $4$ 天从城市 $2$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |\n| $5$ | 在第 $1$ 天从 A 市通过航线 $2$ 抵达城市 $2$，在城市 $2$ 停留 $2$ 天；在第 $3$ 天从城市 $2$ 通过航线 $1$ 抵达 B 市，在 B 市停留 $1$ 天。 |\n| $6$ | 在第 $1$ 天从 A 市通过航线 $3$ 抵达 B 市，在 B 市停留 $3$ 天。 |\n\n### 样例 #2 解释\n\n这组样例中除 A 市外所有城市的出发航线均直接到达 B 市。它满足子任务 $1,3,4$。\n\n### 样例 #3 解释\n\n这组样例中所有的航线均不限制目的地最少停留天数。它满足子任务 $2,3,4$。\n\n### 样例 #4 解释\n\n注意若方案数超过 $5\\times 10^8$，你只需输出 $5\\times 10^8+1$。它满足子任务 $2,3,4$。\n\n### 子任务\n\n对于 $100\\%$ 的数据，$N\\le 10^4,M\\le 400,H\\le 100$，其余输入均在此范围下合法。\n\n| 子任务 | 得分 | 数据范围及特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $20$ | 除 A 市外所有城市的出发航线均直接到达 B 市，$N,M,H\\le 10$ |\n| $2$ | $23$ | 所有的航线均不限制目的地最少停留天数，$N,M,H\\le 20$ |\n| $3$ | $26$ | $N,M,H\\le 100$ |\n| $4$ | $31$ | 无特殊限制 |\n", "locale": "zh-CN"}}}
{"pid": "P11596", "type": "P", "difficulty": 3, "samples": [["2\n1 1\n2 1", "2"], ["2\n1 0\n2 1", "1"], ["4\n1 1\n3 2\n4 3\n5 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "O2优化", "NOISG（新加坡）"], "title": "[NOISG 2018 Finals] Lightning Rod", "background": "译自 [NOISG 2018 Finals C. Lightning Rod](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/lightningrod)。", "description": "新加坡的城市天际线可以看成一个平面直角坐标系，第 $i$ 栋大楼的顶端是点 $(X_i,Y_i)$。\n\n一根避雷针可以安装在大楼的顶端上。它的保护区域为从该大楼顶端向左下方和右下方作两条与坐标轴呈 $45^\\circ$ 的射线所产生的 $\\frac{1}{4}$ 平面。所有顶端在该保护区域内或落在保护区域边缘上的大楼都可以被保护到。\n\n换句话说，若避雷针安装在大楼 $i$ 上，则所有且仅所有满足 $|X_i-X_j|\\le Y_i-Y_j$ 的大楼 $j$ 可以被该避雷针保护到。\n\n你的任务是找出最少的安装避雷针数量，使得所有大楼都可以被至少一根避雷针保护到。", "inputFormat": "第一行一个正整数 $N$，表示大楼的总数。\n\n接下来 $N$ 行每行两个正整数 $X_i,Y_i$，表示第 $i$ 栋大楼的顶端是 $(X_i,Y_i)$。**保证 $X_i$ 按照输入顺序单调不递减**。\n\n注意：本题输入量较大，请使用较快的输入方式。我们在下发文件中下发了三种语言实现的快速读入模板。", "outputFormat": "一行一个整数，表示最少的安装避雷针数量。", "hint": "### 样例 #1 解释\n\n所有大楼都需要安装避雷针。\n\n这组样例满足所有子任务。\n\n### 样例 #2 解释\n\n在大楼 $2$ 的顶端安装避雷针。\n\n这组样例满足子任务 $2$ 至 $7$。\n\n### 样例 #3 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/glq0s3hc.png)\n\n如图所示，在大楼 $1$ 和大楼 $3$ 的顶端安装避雷针。\n\n这组样例满足子任务 $3,4,5,7$。\n\n### 子任务\n\n对于 $100\\%$ 的数据，$2\\le N\\le 10^7$，$0\\le X_i,Y_i\\le 10^9$。\n\n| 子任务 | 得分 | $N$ | $X_i,Y_i$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $4$ | 无特殊限制 | $Y_i=1$ |\n| $2$ | $7$ | $=2$ | 无特殊限制 |\n| $3$ | $12$ | $\\le20$ | 无特殊限制 |\n| $4$ | $21$ | $\\le 2\\times 10^3$ | 无特殊限制 |\n| $5$ | $26$ | $\\le 2\\times 10^5$ | 无特殊限制 |\n| $6$ | $10$ | 无特殊限制 | $X_i=i,Y_i\\le 1$ |\n| $7$ | $20$ | 无特殊限制 | 无特殊限制 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2018 Finals] Lightning Rod", "background": "译自 [NOISG 2018 Finals C. Lightning Rod](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/lightningrod)。", "description": "新加坡的城市天际线可以看成一个平面直角坐标系，第 $i$ 栋大楼的顶端是点 $(X_i,Y_i)$。\n\n一根避雷针可以安装在大楼的顶端上。它的保护区域为从该大楼顶端向左下方和右下方作两条与坐标轴呈 $45^\\circ$ 的射线所产生的 $\\frac{1}{4}$ 平面。所有顶端在该保护区域内或落在保护区域边缘上的大楼都可以被保护到。\n\n换句话说，若避雷针安装在大楼 $i$ 上，则所有且仅所有满足 $|X_i-X_j|\\le Y_i-Y_j$ 的大楼 $j$ 可以被该避雷针保护到。\n\n你的任务是找出最少的安装避雷针数量，使得所有大楼都可以被至少一根避雷针保护到。", "inputFormat": "第一行一个正整数 $N$，表示大楼的总数。\n\n接下来 $N$ 行每行两个正整数 $X_i,Y_i$，表示第 $i$ 栋大楼的顶端是 $(X_i,Y_i)$。**保证 $X_i$ 按照输入顺序单调不递减**。\n\n注意：本题输入量较大，请使用较快的输入方式。我们在下发文件中下发了三种语言实现的快速读入模板。", "outputFormat": "一行一个整数，表示最少的安装避雷针数量。", "hint": "### 样例 #1 解释\n\n所有大楼都需要安装避雷针。\n\n这组样例满足所有子任务。\n\n### 样例 #2 解释\n\n在大楼 $2$ 的顶端安装避雷针。\n\n这组样例满足子任务 $2$ 至 $7$。\n\n### 样例 #3 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/glq0s3hc.png)\n\n如图所示，在大楼 $1$ 和大楼 $3$ 的顶端安装避雷针。\n\n这组样例满足子任务 $3,4,5,7$。\n\n### 子任务\n\n对于 $100\\%$ 的数据，$2\\le N\\le 10^7$，$0\\le X_i,Y_i\\le 10^9$。\n\n| 子任务 | 得分 | $N$ | $X_i,Y_i$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $4$ | 无特殊限制 | $Y_i=1$ |\n| $2$ | $7$ | $=2$ | 无特殊限制 |\n| $3$ | $12$ | $\\le20$ | 无特殊限制 |\n| $4$ | $21$ | $\\le 2\\times 10^3$ | 无特殊限制 |\n| $5$ | $26$ | $\\le 2\\times 10^5$ | 无特殊限制 |\n| $6$ | $10$ | 无特殊限制 | $X_i=i,Y_i\\le 1$ |\n| $7$ | $20$ | 无特殊限制 | 无特殊限制 |\n", "locale": "zh-CN"}}}
{"pid": "P11597", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "二分", "交互题", "Special Judge", "O2优化", "树链剖分", "NOISG（新加坡）"], "title": "[NOISG 2018 Finals] City Mapping【缺样例】", "background": "译自 [NOISG 2018 Finals D. City Mapping](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/citymapping)。\n\n----------------\n\n当你在洛谷提交本题时，需要注意：\n\n- 本题仅支持 C++ 系列语言。\n- 你的代码中不应该包含头文件 `citymapping.h`。\n- 你的代码中应当有如下两行函数声明：\n\t```cpp\n\tlong long get_distance(int X, int Y);\n\tvoid find_roads(int N, int Q, int A[], int B[], int W[]);\n\t```\n    \n如遇评测问题，请联系搬题人。", "description": "**这是一道交互题。**\n\nSilvermill 市是一座有 $N$ 个路口和 $N-1$ 条道路的城市。其中道路的编号为 $0$ 到 $N-2$。\n\n第 $i$ 条道路双向连接了 $(A_i,B_i)$ 两个路口，从任意方向通过这条道路都需要花费 $W_i$ 分钟。保证任意两个路口之间都能通过道路互相到达。\n\n为了避免交通堵塞，Silvermill 市的**每个路口连接的道路不会超过 $3$ 条**。\n\n你的任务是画出 Silvermill 市的地图，也就是找出所有 $N-1$ 条道路的 $(A_i,B_i,W_i)$。\n\n为了达到这个目的，你可以询问市长至多 $Q$ 次从任意一个路口 $X$ 到任意一个路口 $Y$ 最少需要多少分钟。\n\n### 实现细节\n\n在本题中，**你不需要，也不应该实现主函数**。\n\n你需要实现如下函数：\n\n```cpp\nvoid find_roads(int N, int Q, int A[], int B[], int W[])\n```\n\n该函数包含两个输入参数和三个输出参数，将在评测时被运行恰好一次。输入参数为 $N,Q$，分别表示路口的数量和最大询问次数；输出参数为 $A,B,W$，你需要确定城市中的 $N-1$ 条道路，按题意中的含义以数组 $A,B,W$ 的形式返回。返回道路的顺序可以是任意的，同一道路端点的顺序也可以是任意的。\n\n注意数组的下标是从 $0$ 开始的。\n\n你可以调用下面的函数来完成任务：\n\n```cpp\nlong long get_distance(int X, int Y)\n```\n\n该函数将返回一个整数，表示从路口 $X$ 到路口 $Y$ 最少需要多少分钟。如果你调用此函数超过 $Q$ 次，或提供无效的路口编号作为参数，程序将立刻终止，你将得到 Wrong Answer 的评测状态。", "inputFormat": "示例测试程序如下方式读入数据：\n\n第一行三个整数 $N,Q,S$，分别表示路口的数量、最大询问次数和子任务编号。\n\n之后是 $N-1$ 行，每行三个整数 $(A_i,B_i,W_i)$，描述一条道路。", "outputFormat": "示例测试程序可能会产生的输出如下：\n\n- `Wrong Input Format`，意味着对示例测试程序的输入格式有误。\n- `Wrong Answer: Reported list of edges differ from actual.`，意味着你确定的道路与实际情况不符。\n- `Wrong Answer: get_distance() arguments out of range.`，意味着你在询问时提供了无效的路口编号作为参数。\n- `Wrong Answer: Too many calls to get_distance().`，意味着你超出了最大询问次数限制。\n- 包含两行信息，分别是 `Score: s%` 和 `Correct: x out of y queries used.`，意味着你获得了该测试点 $s\\%$ 的分数，最大询问次数为 $y$ 次，你使用了其中的 $x$ 次。", "hint": "### 调用示例\n\n我们考虑如下的城市地图，展示一种可能的函数调用过程。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m7bz8mwi.png)\n\n假设此时最大询问次数 $Q=5\\times 10^5$。\n\n你的函数将这样被调用恰好一次：\n\n```cpp\nfind_roads(5, 500000, A, B, W);\n```\n\n其中 $A,B,W$ 是定义在测试程序中的数组。\n\n一种可能的交互过程如下：\n\n- `get_distance(5, 4) = 10`：`get_distance` 函数返回从路口 $5$ 到达路口 $4$ 的最少分钟数。路线 $5\\to 3\\to 4$ 是最短的，需要 $10$ 分钟。\n- `get_distance(2, 4) = 1`：`get_distance` 函数返回了从路口 $2$ 到达路口 $4$ 的最少分钟数。直接从 $2$ 走到 $4$ 是最短的，需要 $1$ 分钟。\n- `get_distance(1, 3) = 15`：`get_distance` 函数返回了从路口 $1$ 到达路口 $3$ 的最少分钟数。路线 $1\\to 4\\to 3$ 是最短的，需要 $15$ 分钟。\n- `get_distance(1, 2) = 9`：`get_distance` 函数返回了从路口 $1$ 到达路口 $2$ 的最少分钟数。路线 $1\\to 4\\to 2$ 是最短的，需要 $9$ 分钟。\n\n此时，我们假设你的 `find_roads` 函数认为自己已经掌握了足够的信息，可以推导出正确的地图，所以将 $A,B,W$ 数组分别赋值为 $A=[3,4,4,5],B=[4,1,2,3],W=[7,8,1,3]$，然后终止。\n\n这只是一种可能的答案，因为返回道路的顺序可以是任意的，同一道路端点的顺序也可以是任意的。\n\n### 子任务\n\n对于 $100\\%$ 的数据，$2\\le N\\le1000$，$1\\le A_i,B_i\\le N$，$1\\le W_i\\le 10^9$。\n\n| 子任务 | 得分 | $Q$ | 特殊性质及备注 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $9$ | $=5\\times 10^5$ | $W_i=1$ |\n| $2$ | $16$ | $=5\\times 10^5$ | 无特殊限制 |\n| $3$ | $13$ | $=12000$ | 每个路口最多连接两条道路，且 $W_i=1$ |\n| $4$ | $19$ | $=12000$ | 每个路口最多连接两条道路 |\n| $5$ | $43$ | $=25000$ | 无特殊限制，但有特殊的计分规则（请参阅**计分细则**） |\n\n### 计分细则\n\n子任务 $5$ 适用于以下的计分规则。你的得分依赖于你实现的函数询问的次数 $q$。\n\n- 如果 $q>25000$，你将获得 $0$ 分。\n- 如果 $12000<q\\le 25000$，你将获得 $10-10\\times \\frac{q-12000}{13000}$ 分。\n- 如果 $6500<q\\le 12000$，你将获得 $40-30\\times \\frac{q-6500}{5500}$ 分。\n- 如果 $q\\le 6500$，你将获得 $43$ 分。\n\n### 本地测试方式\n\n我们在附件中下发了示例测试程序 `grader.cpp`，头文件 `citymapping.h`，你所需完成的代码的示例 `citymapping.cpp`，以及编译文件 `compile.sh`。\n\n将这些文件置于同一文件夹下，使用 `compile.sh` 编译并运行生成的可执行文件，即可进行本地测试。\n\n下发的示例测试程序与提交后使用的测试程序有所不同。\n\n注意提交到洛谷上时有特殊的要求。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2018 Finals] City Mapping【缺样例】", "background": "译自 [NOISG 2018 Finals D. City Mapping](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/citymapping)。\n\n----------------\n\n当你在洛谷提交本题时，需要注意：\n\n- 本题仅支持 C++ 系列语言。\n- 你的代码中不应该包含头文件 `citymapping.h`。\n- 你的代码中应当有如下两行函数声明：\n\t```cpp\n\tlong long get_distance(int X, int Y);\n\tvoid find_roads(int N, int Q, int A[], int B[], int W[]);\n\t```\n    \n如遇评测问题，请联系搬题人。", "description": "**这是一道交互题。**\n\nSilvermill 市是一座有 $N$ 个路口和 $N-1$ 条道路的城市。其中道路的编号为 $0$ 到 $N-2$。\n\n第 $i$ 条道路双向连接了 $(A_i,B_i)$ 两个路口，从任意方向通过这条道路都需要花费 $W_i$ 分钟。保证任意两个路口之间都能通过道路互相到达。\n\n为了避免交通堵塞，Silvermill 市的**每个路口连接的道路不会超过 $3$ 条**。\n\n你的任务是画出 Silvermill 市的地图，也就是找出所有 $N-1$ 条道路的 $(A_i,B_i,W_i)$。\n\n为了达到这个目的，你可以询问市长至多 $Q$ 次从任意一个路口 $X$ 到任意一个路口 $Y$ 最少需要多少分钟。\n\n### 实现细节\n\n在本题中，**你不需要，也不应该实现主函数**。\n\n你需要实现如下函数：\n\n```cpp\nvoid find_roads(int N, int Q, int A[], int B[], int W[])\n```\n\n该函数包含两个输入参数和三个输出参数，将在评测时被运行恰好一次。输入参数为 $N,Q$，分别表示路口的数量和最大询问次数；输出参数为 $A,B,W$，你需要确定城市中的 $N-1$ 条道路，按题意中的含义以数组 $A,B,W$ 的形式返回。返回道路的顺序可以是任意的，同一道路端点的顺序也可以是任意的。\n\n注意数组的下标是从 $0$ 开始的。\n\n你可以调用下面的函数来完成任务：\n\n```cpp\nlong long get_distance(int X, int Y)\n```\n\n该函数将返回一个整数，表示从路口 $X$ 到路口 $Y$ 最少需要多少分钟。如果你调用此函数超过 $Q$ 次，或提供无效的路口编号作为参数，程序将立刻终止，你将得到 Wrong Answer 的评测状态。", "inputFormat": "示例测试程序如下方式读入数据：\n\n第一行三个整数 $N,Q,S$，分别表示路口的数量、最大询问次数和子任务编号。\n\n之后是 $N-1$ 行，每行三个整数 $(A_i,B_i,W_i)$，描述一条道路。", "outputFormat": "示例测试程序可能会产生的输出如下：\n\n- `Wrong Input Format`，意味着对示例测试程序的输入格式有误。\n- `Wrong Answer: Reported list of edges differ from actual.`，意味着你确定的道路与实际情况不符。\n- `Wrong Answer: get_distance() arguments out of range.`，意味着你在询问时提供了无效的路口编号作为参数。\n- `Wrong Answer: Too many calls to get_distance().`，意味着你超出了最大询问次数限制。\n- 包含两行信息，分别是 `Score: s%` 和 `Correct: x out of y queries used.`，意味着你获得了该测试点 $s\\%$ 的分数，最大询问次数为 $y$ 次，你使用了其中的 $x$ 次。", "hint": "### 调用示例\n\n我们考虑如下的城市地图，展示一种可能的函数调用过程。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m7bz8mwi.png)\n\n假设此时最大询问次数 $Q=5\\times 10^5$。\n\n你的函数将这样被调用恰好一次：\n\n```cpp\nfind_roads(5, 500000, A, B, W);\n```\n\n其中 $A,B,W$ 是定义在测试程序中的数组。\n\n一种可能的交互过程如下：\n\n- `get_distance(5, 4) = 10`：`get_distance` 函数返回从路口 $5$ 到达路口 $4$ 的最少分钟数。路线 $5\\to 3\\to 4$ 是最短的，需要 $10$ 分钟。\n- `get_distance(2, 4) = 1`：`get_distance` 函数返回了从路口 $2$ 到达路口 $4$ 的最少分钟数。直接从 $2$ 走到 $4$ 是最短的，需要 $1$ 分钟。\n- `get_distance(1, 3) = 15`：`get_distance` 函数返回了从路口 $1$ 到达路口 $3$ 的最少分钟数。路线 $1\\to 4\\to 3$ 是最短的，需要 $15$ 分钟。\n- `get_distance(1, 2) = 9`：`get_distance` 函数返回了从路口 $1$ 到达路口 $2$ 的最少分钟数。路线 $1\\to 4\\to 2$ 是最短的，需要 $9$ 分钟。\n\n此时，我们假设你的 `find_roads` 函数认为自己已经掌握了足够的信息，可以推导出正确的地图，所以将 $A,B,W$ 数组分别赋值为 $A=[3,4,4,5],B=[4,1,2,3],W=[7,8,1,3]$，然后终止。\n\n这只是一种可能的答案，因为返回道路的顺序可以是任意的，同一道路端点的顺序也可以是任意的。\n\n### 子任务\n\n对于 $100\\%$ 的数据，$2\\le N\\le1000$，$1\\le A_i,B_i\\le N$，$1\\le W_i\\le 10^9$。\n\n| 子任务 | 得分 | $Q$ | 特殊性质及备注 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $9$ | $=5\\times 10^5$ | $W_i=1$ |\n| $2$ | $16$ | $=5\\times 10^5$ | 无特殊限制 |\n| $3$ | $13$ | $=12000$ | 每个路口最多连接两条道路，且 $W_i=1$ |\n| $4$ | $19$ | $=12000$ | 每个路口最多连接两条道路 |\n| $5$ | $43$ | $=25000$ | 无特殊限制，但有特殊的计分规则（请参阅**计分细则**） |\n\n### 计分细则\n\n子任务 $5$ 适用于以下的计分规则。你的得分依赖于你实现的函数询问的次数 $q$。\n\n- 如果 $q>25000$，你将获得 $0$ 分。\n- 如果 $12000<q\\le 25000$，你将获得 $10-10\\times \\frac{q-12000}{13000}$ 分。\n- 如果 $6500<q\\le 12000$，你将获得 $40-30\\times \\frac{q-6500}{5500}$ 分。\n- 如果 $q\\le 6500$，你将获得 $43$ 分。\n\n### 本地测试方式\n\n我们在附件中下发了示例测试程序 `grader.cpp`，头文件 `citymapping.h`，你所需完成的代码的示例 `citymapping.cpp`，以及编译文件 `compile.sh`。\n\n将这些文件置于同一文件夹下，使用 `compile.sh` 编译并运行生成的可执行文件，即可进行本地测试。\n\n下发的示例测试程序与提交后使用的测试程序有所不同。\n\n注意提交到洛谷上时有特殊的要求。", "locale": "zh-CN"}}}
{"pid": "P11598", "type": "P", "difficulty": 6, "samples": [["6 1\n2 10 0 2 4 3", "10"], ["6 3\n2 10 2 6 4 3", "6"], ["4 1\n1 4 1 4", "4"], ["10 1\n10 9 8 7 6 5 4 3 2 1", "0"], ["3 0\n1 1 3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2018", "动态规划优化", "NOISG（新加坡）", "斜率维护技巧 slope trick"], "title": "[NOISG 2018 Finals] Safety", "background": "译自 [NOISG 2018 Finals E. Safety](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/safety)。", "description": "小老鼠 Squeaky 最近开始欣赏视觉艺术，并尝试创作自己的艺术作品，在城里最负盛名的艺术节上展出！\n\n他的作品由若干发光柱组成，其中每个发光柱又都是由发光立方体堆砌而成的。\n\n具体来说，他的作品是排成一条直线的 $N$ 个发光柱，从左到右编号为 $1$ 到 $N$。其中第 $i$ 个发光柱的高度为 $S_i$，意味着它由 $S_i$ 个发光立方体堆砌而成。\n\n例如下图是 $N=20$ 时一种可能的作品：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qp61p4fu.png)\n\n然而，观众撞到不安全的展品将造成灾难性的后果。所以，安全委员会要求 Squeaky 保证作品的安全性。具体来说，作品安全当且仅当任意两个相邻发光柱的高度差不超过 $H$，即 $|S_i-S_{i+1}|\\le H,\\forall i\\in[1,N)$。\n\nSqueaky 的作品可能是不安全的，为了确保正常展出，他希望通过修改作品使其安全。\n\n他可以进行的修改只有两种：\n\n- 在发光柱 $k$ 上添加一个发光立方体，即 $S_k\\gets S_k+1$。\n- 从还有至少一个发光立方体的发光柱 $k$ 上移除一个发光立方体，即 $S_k\\gets S_k-1$。\n\n注意，即使一个发光柱没有发光立方体，我们也认为它依然存在于原来的位置。\n\n你的任务是帮助 Squeaky 确定至少需要多少次修改他的作品才能安全。", "inputFormat": "第一行包含两个整数 $N,H$，含义如题所述。\n\n接下来一行 $N$ 个整数，第 $i$ 个表示 $S_i$，即发光柱 $i$ 的初始高度。", "outputFormat": "一行一个整数，Squeaky 为了使他的作品安全需要的最少修改次数。", "hint": "### 样例 #1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o2mb9wvh.png)\n\n如图所示，我们删去红色立方体，添加黄色立方体，通过修改 $10$ 次使 Squeaky 的作品安全：任意相邻的两个发光柱高度差都不超过 $H=1$。\n\n可以证明，不存在少于 $10$ 步的修改方法。\n\n这组样例满足子任务 $3$ 和子任务 $5$ 至 $9$。\n\n### 样例 #2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9i4cjmny.png)\n\n如图所示，我们删去红色立方体，添加黄色立方体，通过修改 $6$ 次使 Squeaky 的作品安全。可以证明，不存在少于 $6$ 步的修改方法。\n\n这组样例满足子任务 $5$ 至 $9$。\n\n### 样例 #3 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v83yezxt.png)\n\n如图所示，我们删去红色立方体，添加黄色立方体，通过修改 $4$ 次使 Squeaky 的作品安全。可以证明，不存在少于 $4$ 步的修改方法。\n\n这组样例满足子任务 $1$ 至 $3$ 和子任务 $5$ 至 $9$。\n\n### 样例 #4 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/narncyxs.png)\n\nSqueaky 的作品本来就是安全的，所以不需要进行修改。\n\n这组样例满足子任务 $3$ 和子任务 $5$ 至 $9$。\n\n### 样例 #5 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fo23a2wx.png)\n\n如图所示，我们删去红色立方体，通过修改 $2$ 次使 Squeaky 的作品安全。可以证明，不存在少于 $2$ 步的修改方法。\n\n这组样例满足所有子任务。\n\n### 子任务\n\n对于 $100\\%$ 的数据，$1\\le N\\le 2\\times 10^5$，$0\\le H\\le 10^9$，$0\\le S_i\\le 10^9$。\n\n| 子任务 | 得分 | 数据范围及特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $3$ | $N\\le 10$，$S_i\\le 4$ |\n| $2$ | $4$ | $N\\le 14$，$H\\le 1$，$S_i\\le 4$ |\n| $3$ | $9$ | $N\\le10$，$H\\le 2$ |\n| $4$ | $5$ | $H=0$ |\n| $5$ | $6$ | $N\\le 500$，$S_i\\le 400$ |\n| $6$ | $11$ | $N\\le 500$，$S_i\\le 5\\times 10^3$ |\n| $7$ | $11$ | $N\\le 5\\times 10^3$，$S_i\\le 5\\times 10^3$ |\n| $8$ | $22$ | $N\\le 5\\times 10^3$ |\n| $9$ | $29$ | 无特殊限制 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2018 Finals] Safety", "background": "译自 [NOISG 2018 Finals E. Safety](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/safety)。", "description": "小老鼠 Squeaky 最近开始欣赏视觉艺术，并尝试创作自己的艺术作品，在城里最负盛名的艺术节上展出！\n\n他的作品由若干发光柱组成，其中每个发光柱又都是由发光立方体堆砌而成的。\n\n具体来说，他的作品是排成一条直线的 $N$ 个发光柱，从左到右编号为 $1$ 到 $N$。其中第 $i$ 个发光柱的高度为 $S_i$，意味着它由 $S_i$ 个发光立方体堆砌而成。\n\n例如下图是 $N=20$ 时一种可能的作品：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qp61p4fu.png)\n\n然而，观众撞到不安全的展品将造成灾难性的后果。所以，安全委员会要求 Squeaky 保证作品的安全性。具体来说，作品安全当且仅当任意两个相邻发光柱的高度差不超过 $H$，即 $|S_i-S_{i+1}|\\le H,\\forall i\\in[1,N)$。\n\nSqueaky 的作品可能是不安全的，为了确保正常展出，他希望通过修改作品使其安全。\n\n他可以进行的修改只有两种：\n\n- 在发光柱 $k$ 上添加一个发光立方体，即 $S_k\\gets S_k+1$。\n- 从还有至少一个发光立方体的发光柱 $k$ 上移除一个发光立方体，即 $S_k\\gets S_k-1$。\n\n注意，即使一个发光柱没有发光立方体，我们也认为它依然存在于原来的位置。\n\n你的任务是帮助 Squeaky 确定至少需要多少次修改他的作品才能安全。", "inputFormat": "第一行包含两个整数 $N,H$，含义如题所述。\n\n接下来一行 $N$ 个整数，第 $i$ 个表示 $S_i$，即发光柱 $i$ 的初始高度。", "outputFormat": "一行一个整数，Squeaky 为了使他的作品安全需要的最少修改次数。", "hint": "### 样例 #1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o2mb9wvh.png)\n\n如图所示，我们删去红色立方体，添加黄色立方体，通过修改 $10$ 次使 Squeaky 的作品安全：任意相邻的两个发光柱高度差都不超过 $H=1$。\n\n可以证明，不存在少于 $10$ 步的修改方法。\n\n这组样例满足子任务 $3$ 和子任务 $5$ 至 $9$。\n\n### 样例 #2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9i4cjmny.png)\n\n如图所示，我们删去红色立方体，添加黄色立方体，通过修改 $6$ 次使 Squeaky 的作品安全。可以证明，不存在少于 $6$ 步的修改方法。\n\n这组样例满足子任务 $5$ 至 $9$。\n\n### 样例 #3 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v83yezxt.png)\n\n如图所示，我们删去红色立方体，添加黄色立方体，通过修改 $4$ 次使 Squeaky 的作品安全。可以证明，不存在少于 $4$ 步的修改方法。\n\n这组样例满足子任务 $1$ 至 $3$ 和子任务 $5$ 至 $9$。\n\n### 样例 #4 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/narncyxs.png)\n\nSqueaky 的作品本来就是安全的，所以不需要进行修改。\n\n这组样例满足子任务 $3$ 和子任务 $5$ 至 $9$。\n\n### 样例 #5 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fo23a2wx.png)\n\n如图所示，我们删去红色立方体，通过修改 $2$ 次使 Squeaky 的作品安全。可以证明，不存在少于 $2$ 步的修改方法。\n\n这组样例满足所有子任务。\n\n### 子任务\n\n对于 $100\\%$ 的数据，$1\\le N\\le 2\\times 10^5$，$0\\le H\\le 10^9$，$0\\le S_i\\le 10^9$。\n\n| 子任务 | 得分 | 数据范围及特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $3$ | $N\\le 10$，$S_i\\le 4$ |\n| $2$ | $4$ | $N\\le 14$，$H\\le 1$，$S_i\\le 4$ |\n| $3$ | $9$ | $N\\le10$，$H\\le 2$ |\n| $4$ | $5$ | $H=0$ |\n| $5$ | $6$ | $N\\le 500$，$S_i\\le 400$ |\n| $6$ | $11$ | $N\\le 500$，$S_i\\le 5\\times 10^3$ |\n| $7$ | $11$ | $N\\le 5\\times 10^3$，$S_i\\le 5\\times 10^3$ |\n| $8$ | $22$ | $N\\le 5\\times 10^3$ |\n| $9$ | $29$ | 无特殊限制 |\n", "locale": "zh-CN"}}}
{"pid": "P11599", "type": "P", "difficulty": 1, "samples": [["10 3 4", "4"], ["10 3 2", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "『Fwb』神话の传播", "background": "", "description": "在遥远的北方，生活着一个叫夸父的巨人。在冰天雪地的北方，冬季的夜晚寒冷而漫长。一天晚上，夸父被冻得睡不着觉，他突发奇想：要是可以追上太阳，让太阳在人间多停留一段时间，那么人间就暖和多了。为了这个想法，他兴奋得一夜未眠。\n\n于是他设定了一个计划：如果现在与太阳之间的距离是 $n$，他一天追太阳 $x$ 的距离，那么需要 $\\lceil \\frac{n}{x}\\rceil$ 天就可以追上太阳。其中，$\\lceil a\\rceil$ 的意思是向上取整。\n\n夸父的体力值为 $k$，每追 $1$ 天，就会消耗 $1$ 的体力值。只有在 $k>0$ 时，夸父才可以完成这一天的路程。在追太阳的过程中，夸父也可以选择停下来休息，花费 $1$ 天的时间补充**原始** $k$ 的体力值。现在想知道，夸父最少要多少天，才能追上太阳。", "inputFormat": "输入共一行，包含三个正整数 $n,x,k$，分别表示与太阳的距离、一天可以前进的距离、夸父的体力值。", "outputFormat": "输出共一行，包含一个正整数，代表追上太阳所需的天数。", "hint": "#### 【样例 2 解释】\n\n- 第一天休息一天，剩余体力值为 $4$。\n- 第二天追 $3$ 的距离，离太阳距离为 $7$，剩余体力值为 $3$。\n- 第三天追 $3$ 的距离，离太阳距离为 $4$，剩余体力值为 $2$。\n- 第四天追 $3$ 的距离，离太阳距离为 $1$，剩余体力值为 $1$。\n- 第五天追 $3$ 的距离，追上了太阳，剩余体力值为 $0$。\n\n#### 【数据范围】\n\n对于 $10\\%$ 的数据，$n=x$。\n\n对于 $40\\%$ 的数据，$k>\\lceil\\frac{n}{x}\\rceil$。\n\n对于 $100\\%$ 的数据，$1\\le n,x,k\\le10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『Fwb』神话の传播", "background": "", "description": "在遥远的北方，生活着一个叫夸父的巨人。在冰天雪地的北方，冬季的夜晚寒冷而漫长。一天晚上，夸父被冻得睡不着觉，他突发奇想：要是可以追上太阳，让太阳在人间多停留一段时间，那么人间就暖和多了。为了这个想法，他兴奋得一夜未眠。\n\n于是他设定了一个计划：如果现在与太阳之间的距离是 $n$，他一天追太阳 $x$ 的距离，那么需要 $\\lceil \\frac{n}{x}\\rceil$ 天就可以追上太阳。其中，$\\lceil a\\rceil$ 的意思是向上取整。\n\n夸父的体力值为 $k$，每追 $1$ 天，就会消耗 $1$ 的体力值。只有在 $k>0$ 时，夸父才可以完成这一天的路程。在追太阳的过程中，夸父也可以选择停下来休息，花费 $1$ 天的时间补充**原始** $k$ 的体力值。现在想知道，夸父最少要多少天，才能追上太阳。", "inputFormat": "输入共一行，包含三个正整数 $n,x,k$，分别表示与太阳的距离、一天可以前进的距离、夸父的体力值。", "outputFormat": "输出共一行，包含一个正整数，代表追上太阳所需的天数。", "hint": "#### 【样例 2 解释】\n\n- 第一天休息一天，剩余体力值为 $4$。\n- 第二天追 $3$ 的距离，离太阳距离为 $7$，剩余体力值为 $3$。\n- 第三天追 $3$ 的距离，离太阳距离为 $4$，剩余体力值为 $2$。\n- 第四天追 $3$ 的距离，离太阳距离为 $1$，剩余体力值为 $1$。\n- 第五天追 $3$ 的距离，追上了太阳，剩余体力值为 $0$。\n\n#### 【数据范围】\n\n对于 $10\\%$ 的数据，$n=x$。\n\n对于 $40\\%$ 的数据，$k>\\lceil\\frac{n}{x}\\rceil$。\n\n对于 $100\\%$ 的数据，$1\\le n,x,k\\le10^5$。", "locale": "zh-CN"}}}
{"pid": "P11600", "type": "P", "difficulty": 2, "samples": [["5\n1 3 5 7 9", "5 2"], ["7\n10 13 19 301 304 307 3004", "1002 3"], ["3\n2 1000000 1234567", "1234567 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "『Fwb』流星の陨落", "background": "", "description": "流星雨来了！\n\n当然，这场流星雨确确实实是 Fwb 设计的。Fwb 在天空中放置了许多的流星，同时也在地面上放置了许多的烟花。当流星和烟花发生碰撞时，就会出现美丽而独特的风景。\n\n由于方便控制流星雨的发射，流星的发射是有规律的，这个发射的规律叫做流星间隔。我们把地面上烟花的摆放看作一个数轴，若流星间隔是 $k$，那么在 $i$ 位置发射一颗流星后，下一个发射流星的位置必须是 $i+k$。特殊的，第一个发射流星的位置**必须是** $1$。\n\n为了使流星雨好看，保证每一个烟花都会和流星碰撞，即每一个烟花的位置都会有流星发射。**但不保证每一个流星都有可碰撞的烟花**。为了尽可能减少资源消耗，发射的流星应在满足条件的前提下最少，现在想请你算出，发射的流星雨中最少有多少颗流星以及此时的流星间隔是多少。", "inputFormat": "输入的第一行包含一个正整数 $n$，代表地上共放置了 $n$ 个烟花。\n\n第二行共 $n$ 个正整数，代表烟花在数轴上的位置 $a_i$（保证 $a_i$ 递增）。默认最后一个烟花的位置为数轴的尽头，即保证在位置 $i$（$i>a_n$）不会再有流星发射。", "outputFormat": "输出共一行，包含两个正整数，分别表示流星雨中最少的流星数量以及此时的流星间隔。", "hint": "#### 【样例 1 解释】\n\n当流星间隔为 $2$ 时，流星会发射在 $[1,3,5,7,9]$ 的位置，恰好覆盖所有的烟花。此时发射的流星数量最少为 $5$。\n\n#### 【数据范围】\n\n对于所有的测试数据，保证：\n\n- $1\\le n\\le 10^5$。\n- 对于任意的 $i$（$1\\le i\\le n$），都有 $1\\le a_i\\le 10^9$。\n\n| 测试点 | $n=$ | $a_i\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ | $10$ | 无 |\n| $2$ | $10^5$ | $10^9$ | A |\n| $3,4$ | $10^5$ | $10^9$ | B |\n| $5,6,7$ | $10$ | $10^9$ | C |\n| $8,9,10$ | $10^5$ | $10^9$ | 无 |\n\n特殊性质 A：保证 $a_i=a_{i-1}+1$（$1<i\\le n$）。\n\n特殊性质 B：保证 $a_i-a_{i-1}=a_{i+1}-a_i$（$1<i<n$）。\n\n特殊性质 C：保证至少出现一次 $a_i-a_{i-1} \\le 10^4$（$2\\le i\\le n$）。\n\n**题目保证不出现 $n=1$ 且 $a_1=1$ 的情况。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『Fwb』流星の陨落", "background": "", "description": "流星雨来了！\n\n当然，这场流星雨确确实实是 Fwb 设计的。Fwb 在天空中放置了许多的流星，同时也在地面上放置了许多的烟花。当流星和烟花发生碰撞时，就会出现美丽而独特的风景。\n\n由于方便控制流星雨的发射，流星的发射是有规律的，这个发射的规律叫做流星间隔。我们把地面上烟花的摆放看作一个数轴，若流星间隔是 $k$，那么在 $i$ 位置发射一颗流星后，下一个发射流星的位置必须是 $i+k$。特殊的，第一个发射流星的位置**必须是** $1$。\n\n为了使流星雨好看，保证每一个烟花都会和流星碰撞，即每一个烟花的位置都会有流星发射。**但不保证每一个流星都有可碰撞的烟花**。为了尽可能减少资源消耗，发射的流星应在满足条件的前提下最少，现在想请你算出，发射的流星雨中最少有多少颗流星以及此时的流星间隔是多少。", "inputFormat": "输入的第一行包含一个正整数 $n$，代表地上共放置了 $n$ 个烟花。\n\n第二行共 $n$ 个正整数，代表烟花在数轴上的位置 $a_i$（保证 $a_i$ 递增）。默认最后一个烟花的位置为数轴的尽头，即保证在位置 $i$（$i>a_n$）不会再有流星发射。", "outputFormat": "输出共一行，包含两个正整数，分别表示流星雨中最少的流星数量以及此时的流星间隔。", "hint": "#### 【样例 1 解释】\n\n当流星间隔为 $2$ 时，流星会发射在 $[1,3,5,7,9]$ 的位置，恰好覆盖所有的烟花。此时发射的流星数量最少为 $5$。\n\n#### 【数据范围】\n\n对于所有的测试数据，保证：\n\n- $1\\le n\\le 10^5$。\n- 对于任意的 $i$（$1\\le i\\le n$），都有 $1\\le a_i\\le 10^9$。\n\n| 测试点 | $n=$ | $a_i\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ | $10$ | 无 |\n| $2$ | $10^5$ | $10^9$ | A |\n| $3,4$ | $10^5$ | $10^9$ | B |\n| $5,6,7$ | $10$ | $10^9$ | C |\n| $8,9,10$ | $10^5$ | $10^9$ | 无 |\n\n特殊性质 A：保证 $a_i=a_{i-1}+1$（$1<i\\le n$）。\n\n特殊性质 B：保证 $a_i-a_{i-1}=a_{i+1}-a_i$（$1<i<n$）。\n\n特殊性质 C：保证至少出现一次 $a_i-a_{i-1} \\le 10^4$（$2\\le i\\le n$）。\n\n**题目保证不出现 $n=1$ 且 $a_1=1$ 的情况。**", "locale": "zh-CN"}}}
{"pid": "P11601", "type": "P", "difficulty": 4, "samples": [["3 6\n1 2 3 4 2 1\n3\n0 1 3\n3 3 1\n1 4 5\n2\n1 4 2\n0 2 4\n2\n0 6 2\n2 4 2", "3 1 3 5\nWrong\nSafe"], ["2 3\n1 3 4\n3\n0 1 2\n2 3 2\n3 2 1\n1\n0 1 2", "Wrong\nWrong"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2025", "洛谷比赛"], "title": "『Fwb』狼人の杀戮", "background": "", "description": "Fwb 开始玩狼人杀了。\n\n这是一个游戏规则略有不同的简化版的狼人杀，若与现实中狼人杀规则不同，应以题目为准。开局共有 $n$（$n≥2$）位玩家，他们的身份共有以下几种：\n\n- 狼人：在天黑时可以进行选择一位非自己的玩家杀害，可以是其他狼人。\n- 平民：在天黑时只能闭眼睡觉，没有任何技能。\n- 猎人：若自己存活，在天黑时只能闭眼睡觉；若在此夜被杀死且未被解救，**必须**任意带走一位非自己玩家（带走意义即为杀死）。若带走玩家之后又被救活，则下一次被杀死依旧可以继续带走玩家，且此次带走依然成立。换句话说，带走玩家后再被救活也是合法的。\n- 女巫：在天黑时可以进行选择：用解药解救任意一个在今夜死亡的玩家（可以是自己），或用毒药毒死任意存活的玩家（不可以是自己）。特殊的，女巫可以在被杀死后对自己使用解药，但不可以进行其他技能操作。请注意，每一位女巫只有一次解药和一次毒药的机会，且**不可以在同一夜使用**。\n\n\n在黑夜中，将模拟**各种角色技能的进行**，有如下几种格式：\n\n- $0\\ id_1\\ id_2$：编号为 $id_1$ 的狼人决定将编号为 $id_2$ 的玩家杀害。\n- $1\\ id_1\\ id_2$：编号为 $id_1$ 的女巫决定将编号为 $id_2$ 的玩家毒死。\n- $2\\ id_1\\ id_2$：编号为 $id_1$ 的女巫决定将编号为 $id_2$ 的玩家救活。\n- $3\\ id_1\\ id_2$：编号为 $id_1$ 的猎人被杀死，决定带走编号为 $id_2$ 的玩家。\n\n\n在天亮后，将公布昨夜的**死亡情况**，有如下几种格式：\n\n- $x\\ id_1\\ id_2\\ ...\\ id_x$：共 $x$ 名编号分别为 $id_1\\ id_2\\ ...\\ id_x$ 的玩家在昨夜被杀害，每两个玩家编号之间用空格隔开。注意，$id_i$ 必须严格单调递增。\n- `Safe`：昨夜是平安夜，其中平安夜指没有人死亡即 $x=0$ 的夜晚。\n- `Wrong`：昨夜的角色技能输入有误。此夜晚将撤回全部操作。\n\n当出现以下情况时，认为昨夜的角色技能输入有误：\n\n- 编号为 $id$ 的玩家不存在。\n- 除女巫使用解药时，编号为 $id$ 的玩家已死亡。\n- **同一位**狼人、女巫在同一晚上多次使用技能。\n- 猎人未被杀死就使用技能。\n- 猎人在被杀死时带走多人。\n- 玩家使用了不属于自己的技能。\n- 女巫将解药用在了未死亡或非今夜死亡的人身上。\n- 狼人杀人、女巫使用毒药、猎人带走玩家时对自己使用技能。\n\n当一夜技能输入有误时，该夜的所有操作均不被执行。\n\n请注意，一个夜晚是有时间顺序的，这个时间顺序决定了输入的合法性。例如，在同一夜晚，女巫先对编号为 $id$ 的玩家使用解药，狼人再杀死编号为 $id$ 的玩家，然后夜晚结束，属于不合法输入。\n\n现在告诉你了在黑夜中，各种角色技能的进行。你需要判断昨夜的死亡情况。", "inputFormat": "**本题包含多组测试数据。**\n\n输入的第一行包含两个正整数 $t,n$，分别表示要求模拟这一局游戏进行的**前** $t$ 个夜晚的结果与玩家人数 $n$。\n\n第二行输入 $n$ 个正整数 $a_i$，表示各个玩家的角色。其中狼人用 $1$ 表示，平民用 $2$ 表示，猎人用 $3$ 表示，女巫用 $4$ 表示。\n\n接下来 $t$ 组数据，表示 $t$ 个夜晚，每个夜晚输入的格式如下：\n\n先输入一个正整数 $m$，代表这一夜发生的事件数量。\n\n接下来每 $m$ 行，每行包含 $3$ 个非负整数，输入格式详见【题目描述】中的**各种角色技能的进行**。默认玩家编号为 $1\\sim n$，保证 $id$ 在 $1\\sim 10^3$ 范围内。", "outputFormat": "输出共 $t$ 行。\n\n对于每一次输入的**各种角色技能的进行**，都输出相对应的死亡情况，输出格式详见【题目描述】中的**死亡情况**。", "hint": "**本题采用捆绑测试。**\n\n#### 【样例 1 解释】\n编号为 $1\\sim 6$ 的玩家的身份分别是：狼人、平民、猎人、女巫、平民、狼人。\n\n第一夜：\n\n- $1$ 号狼人杀死了 $3$ 号猎人。\n- $3$ 号猎人带走了 $1$ 号狼人。\n- $4$ 号女巫毒死了 $5$ 号平民。\n\n结果：$3$ 号猎人被 $1$ 号狼人杀死，$1$ 号狼人被 $3$ 号猎人带走，$5$ 号平民被 $4$ 号女巫毒死。此时仅有 $2$ 号平民、$4$ 号女巫和 $6$ 号狼人存活。\n\n第二夜：\n\n- $4$ 号女巫毒死了 $2$ 号平民。\n- $2$ 号狼人杀死了 $4$ 号女巫。\n\n结果：$2$ 号是平民且已经死亡，此回合不合法。此时仍有 $2$ 号平民、$4$ 号女巫和 $6$ 号狼人存活。\n\n第三夜：\n\n- $6$ 号狼人杀死了 $2$ 号平民。\n- $4$ 号女巫解救了 $2$ 号平民。\n\n结果：$2$ 号平民在被狼人杀死之后被女巫救活，今夜是平安夜。\n\n#### 【样例 2 解释】\n\n第一夜：猎人先被狼人杀死，女巫又救活了猎人，故猎人最终存活，无法带走其他玩家。\n\n第二夜：猎人被狼人杀死，没有人救活他，所以猎人必须带走一名玩家。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$1\\le t\\le 10$，$2\\le n\\le 20$，$1\\le a_i\\le 4$，$1\\le m\\le 20$。\n\n| 子任务 | $1\\le t\\le$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $10$ | A、B |\n| $2$ | $5$ | $10$ | B |\n| $3$ | $5$ | $30$ | 无 |\n| $4$ | $10$ | $50$ | 无 |\n| $5$ | $10$ | $0$ | C |\n\n\n特殊性质 A：每一晚一定有人死亡。\n\n特殊性质 B：只存在狼人与平民，不存在输入不合法的情况。\n\n特殊性质 C：本子任务为 Hack 数据，不占分。\n\n**请注意，所有玩家被杀死即生效，而不是等待夜晚结束之后。特殊的，猎人仍有使用技能的权力。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『Fwb』狼人の杀戮", "background": "", "description": "Fwb 开始玩狼人杀了。\n\n这是一个游戏规则略有不同的简化版的狼人杀，若与现实中狼人杀规则不同，应以题目为准。开局共有 $n$（$n≥2$）位玩家，他们的身份共有以下几种：\n\n- 狼人：在天黑时可以进行选择一位非自己的玩家杀害，可以是其他狼人。\n- 平民：在天黑时只能闭眼睡觉，没有任何技能。\n- 猎人：若自己存活，在天黑时只能闭眼睡觉；若在此夜被杀死且未被解救，**必须**任意带走一位非自己玩家（带走意义即为杀死）。若带走玩家之后又被救活，则下一次被杀死依旧可以继续带走玩家，且此次带走依然成立。换句话说，带走玩家后再被救活也是合法的。\n- 女巫：在天黑时可以进行选择：用解药解救任意一个在今夜死亡的玩家（可以是自己），或用毒药毒死任意存活的玩家（不可以是自己）。特殊的，女巫可以在被杀死后对自己使用解药，但不可以进行其他技能操作。请注意，每一位女巫只有一次解药和一次毒药的机会，且**不可以在同一夜使用**。\n\n\n在黑夜中，将模拟**各种角色技能的进行**，有如下几种格式：\n\n- $0\\ id_1\\ id_2$：编号为 $id_1$ 的狼人决定将编号为 $id_2$ 的玩家杀害。\n- $1\\ id_1\\ id_2$：编号为 $id_1$ 的女巫决定将编号为 $id_2$ 的玩家毒死。\n- $2\\ id_1\\ id_2$：编号为 $id_1$ 的女巫决定将编号为 $id_2$ 的玩家救活。\n- $3\\ id_1\\ id_2$：编号为 $id_1$ 的猎人被杀死，决定带走编号为 $id_2$ 的玩家。\n\n\n在天亮后，将公布昨夜的**死亡情况**，有如下几种格式：\n\n- $x\\ id_1\\ id_2\\ ...\\ id_x$：共 $x$ 名编号分别为 $id_1\\ id_2\\ ...\\ id_x$ 的玩家在昨夜被杀害，每两个玩家编号之间用空格隔开。注意，$id_i$ 必须严格单调递增。\n- `Safe`：昨夜是平安夜，其中平安夜指没有人死亡即 $x=0$ 的夜晚。\n- `Wrong`：昨夜的角色技能输入有误。此夜晚将撤回全部操作。\n\n当出现以下情况时，认为昨夜的角色技能输入有误：\n\n- 编号为 $id$ 的玩家不存在。\n- 除女巫使用解药时，编号为 $id$ 的玩家已死亡。\n- **同一位**狼人、女巫在同一晚上多次使用技能。\n- 猎人未被杀死就使用技能。\n- 猎人在被杀死时带走多人。\n- 玩家使用了不属于自己的技能。\n- 女巫将解药用在了未死亡或非今夜死亡的人身上。\n- 狼人杀人、女巫使用毒药、猎人带走玩家时对自己使用技能。\n\n当一夜技能输入有误时，该夜的所有操作均不被执行。\n\n请注意，一个夜晚是有时间顺序的，这个时间顺序决定了输入的合法性。例如，在同一夜晚，女巫先对编号为 $id$ 的玩家使用解药，狼人再杀死编号为 $id$ 的玩家，然后夜晚结束，属于不合法输入。\n\n现在告诉你了在黑夜中，各种角色技能的进行。你需要判断昨夜的死亡情况。", "inputFormat": "**本题包含多组测试数据。**\n\n输入的第一行包含两个正整数 $t,n$，分别表示要求模拟这一局游戏进行的**前** $t$ 个夜晚的结果与玩家人数 $n$。\n\n第二行输入 $n$ 个正整数 $a_i$，表示各个玩家的角色。其中狼人用 $1$ 表示，平民用 $2$ 表示，猎人用 $3$ 表示，女巫用 $4$ 表示。\n\n接下来 $t$ 组数据，表示 $t$ 个夜晚，每个夜晚输入的格式如下：\n\n先输入一个正整数 $m$，代表这一夜发生的事件数量。\n\n接下来每 $m$ 行，每行包含 $3$ 个非负整数，输入格式详见【题目描述】中的**各种角色技能的进行**。默认玩家编号为 $1\\sim n$，保证 $id$ 在 $1\\sim 10^3$ 范围内。", "outputFormat": "输出共 $t$ 行。\n\n对于每一次输入的**各种角色技能的进行**，都输出相对应的死亡情况，输出格式详见【题目描述】中的**死亡情况**。", "hint": "**本题采用捆绑测试。**\n\n#### 【样例 1 解释】\n编号为 $1\\sim 6$ 的玩家的身份分别是：狼人、平民、猎人、女巫、平民、狼人。\n\n第一夜：\n\n- $1$ 号狼人杀死了 $3$ 号猎人。\n- $3$ 号猎人带走了 $1$ 号狼人。\n- $4$ 号女巫毒死了 $5$ 号平民。\n\n结果：$3$ 号猎人被 $1$ 号狼人杀死，$1$ 号狼人被 $3$ 号猎人带走，$5$ 号平民被 $4$ 号女巫毒死。此时仅有 $2$ 号平民、$4$ 号女巫和 $6$ 号狼人存活。\n\n第二夜：\n\n- $4$ 号女巫毒死了 $2$ 号平民。\n- $2$ 号狼人杀死了 $4$ 号女巫。\n\n结果：$2$ 号是平民且已经死亡，此回合不合法。此时仍有 $2$ 号平民、$4$ 号女巫和 $6$ 号狼人存活。\n\n第三夜：\n\n- $6$ 号狼人杀死了 $2$ 号平民。\n- $4$ 号女巫解救了 $2$ 号平民。\n\n结果：$2$ 号平民在被狼人杀死之后被女巫救活，今夜是平安夜。\n\n#### 【样例 2 解释】\n\n第一夜：猎人先被狼人杀死，女巫又救活了猎人，故猎人最终存活，无法带走其他玩家。\n\n第二夜：猎人被狼人杀死，没有人救活他，所以猎人必须带走一名玩家。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$1\\le t\\le 10$，$2\\le n\\le 20$，$1\\le a_i\\le 4$，$1\\le m\\le 20$。\n\n| 子任务 | $1\\le t\\le$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $10$ | A、B |\n| $2$ | $5$ | $10$ | B |\n| $3$ | $5$ | $30$ | 无 |\n| $4$ | $10$ | $50$ | 无 |\n| $5$ | $10$ | $0$ | C |\n\n\n特殊性质 A：每一晚一定有人死亡。\n\n特殊性质 B：只存在狼人与平民，不存在输入不合法的情况。\n\n特殊性质 C：本子任务为 Hack 数据，不占分。\n\n**请注意，所有玩家被杀死即生效，而不是等待夜晚结束之后。特殊的，猎人仍有使用技能的权力。**", "locale": "zh-CN"}}}
{"pid": "P11602", "type": "P", "difficulty": 3, "samples": [["3\n5\n2\n3", "9\n2\n4"], ["6\n263\n749\n409\n761\n729\n382", "16760809\n1095216660441\n939524067\n1099510579161\n549755805658\n503316452"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "递推", "2025", "洛谷比赛"], "title": "『Fwb』黑巧の安排", "background": "", "description": "Fwb 可喜欢吃黑巧了。\n\nFwb 有一个专门用来装黑巧的盒子，但很不巧，今天盒子空了，Fwb 又该出去买点巧克力了。\n\n由于 Fwb 也知道吃多了巧克力对身体不好，所以他决定他买的巧克力必须只能吃 $a$ 天，且不能多也不能少。\n\nFwb 吃巧克力是有规律的：他会在第一天吃一块巧克力，在品尝到巧克力的美味后，第二天吃两块巧克力，第 $i$ 天吃 $2^{i-1}$ 块巧克力（$i>0$）。\n\n当剩余的巧克力不够一天吃的时候，Fwb 就会选择不吃；反之，当剩余的巧克力够一天吃的时候，Fwb 就一定会吃。\n\n若在第 $i$ 天吃完的巧克力之后仍剩余 $k$ 颗，且 $k<2^i$，则 Fwb 会在第 $i+1$ 天再次吃 $1$ 颗，在第 $i+2$ 天再次吃 $2$ 颗，以此类推。换句话说，当 $k<2^i$ 时，第 $i+m$ 天会吃 $2^{m-1}$ 颗。\n\n现在需要你求出，Fwb 在恰好吃 $a$ 天的前提下，最少需要购买多少颗巧克力。", "inputFormat": "**本题包含多组测试数据。**\n\n第一行输入一个正整数 $t$，表示数据组数。\n\n接下来 $t$ 行，每行包含一个正整数 $a$，代表 Fwb 购买的巧克力需要恰好吃 $a$ 天。", "outputFormat": "输出共 $t$ 行。对于每一个输入的 $a$，输出一个正整数代表 Fwb 至少需要购买的巧克力数量。", "hint": "#### 【样例 1 解释】\n\n第一次询问：要求恰好 $5$ 天吃完，则买 $9$ 颗巧克力。安排如下：\n\n- 第一天吃 $1$ 颗，剩余 $8$ 颗。\n- 第二天吃 $2$ 颗，剩余 $6$ 颗。\n- 第三天吃 $4$ 颗，剩余 $2$ 颗。\n- 不够 $8$ 颗，第四天只能再从 $1$ 颗吃起，剩余 $1$ 颗。\n- 不够 $2$ 颗，第五天只能再从 $1$ 颗吃起，吃 $1$ 颗，恰好吃完。\n\n可以证明，没有更优的安排。\n\n第二次询问：要求恰好两天吃完，买 $2$ 颗巧克力，每天 $1$ 颗即可。\n\n第三次询问：要求恰好三天吃完，买 $4$ 颗巧克力，每天分别吃 $1,2,1$ 颗。\n\n#### 【数据范围】\n\n对于 $30\\%$ 的数据，$1\\le a\\le 10$。\n\n对于 $100\\%$ 的数据，$1\\le t,a\\le 1000$。\n\n保证答案在 $long\\ long$ 范围内。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『Fwb』黑巧の安排", "background": "", "description": "Fwb 可喜欢吃黑巧了。\n\nFwb 有一个专门用来装黑巧的盒子，但很不巧，今天盒子空了，Fwb 又该出去买点巧克力了。\n\n由于 Fwb 也知道吃多了巧克力对身体不好，所以他决定他买的巧克力必须只能吃 $a$ 天，且不能多也不能少。\n\nFwb 吃巧克力是有规律的：他会在第一天吃一块巧克力，在品尝到巧克力的美味后，第二天吃两块巧克力，第 $i$ 天吃 $2^{i-1}$ 块巧克力（$i>0$）。\n\n当剩余的巧克力不够一天吃的时候，Fwb 就会选择不吃；反之，当剩余的巧克力够一天吃的时候，Fwb 就一定会吃。\n\n若在第 $i$ 天吃完的巧克力之后仍剩余 $k$ 颗，且 $k<2^i$，则 Fwb 会在第 $i+1$ 天再次吃 $1$ 颗，在第 $i+2$ 天再次吃 $2$ 颗，以此类推。换句话说，当 $k<2^i$ 时，第 $i+m$ 天会吃 $2^{m-1}$ 颗。\n\n现在需要你求出，Fwb 在恰好吃 $a$ 天的前提下，最少需要购买多少颗巧克力。", "inputFormat": "**本题包含多组测试数据。**\n\n第一行输入一个正整数 $t$，表示数据组数。\n\n接下来 $t$ 行，每行包含一个正整数 $a$，代表 Fwb 购买的巧克力需要恰好吃 $a$ 天。", "outputFormat": "输出共 $t$ 行。对于每一个输入的 $a$，输出一个正整数代表 Fwb 至少需要购买的巧克力数量。", "hint": "#### 【样例 1 解释】\n\n第一次询问：要求恰好 $5$ 天吃完，则买 $9$ 颗巧克力。安排如下：\n\n- 第一天吃 $1$ 颗，剩余 $8$ 颗。\n- 第二天吃 $2$ 颗，剩余 $6$ 颗。\n- 第三天吃 $4$ 颗，剩余 $2$ 颗。\n- 不够 $8$ 颗，第四天只能再从 $1$ 颗吃起，剩余 $1$ 颗。\n- 不够 $2$ 颗，第五天只能再从 $1$ 颗吃起，吃 $1$ 颗，恰好吃完。\n\n可以证明，没有更优的安排。\n\n第二次询问：要求恰好两天吃完，买 $2$ 颗巧克力，每天 $1$ 颗即可。\n\n第三次询问：要求恰好三天吃完，买 $4$ 颗巧克力，每天分别吃 $1,2,1$ 颗。\n\n#### 【数据范围】\n\n对于 $30\\%$ 的数据，$1\\le a\\le 10$。\n\n对于 $100\\%$ 的数据，$1\\le t,a\\le 1000$。\n\n保证答案在 $long\\ long$ 范围内。", "locale": "zh-CN"}}}
{"pid": "P11603", "type": "P", "difficulty": 2, "samples": [["2 1\n2 4 1 5", "5 1 4 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2016", "PA（波兰）"], "title": "[PA 2016] 洗牌 / Tasowanie", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R1 Tasowanie [B] (TAS)。\n", "description": "\n给定 $2^n$ 张牌，每张牌上写着一个正整数。第 $i$ 张牌上写着的正整数为 $a_i$。\n\n考虑如下的洗牌过程：\n\n- 若要洗的牌的数量为 $1$，则什么都不做。\n- 否则，设牌的数量为 $2^k$。\n    - 递归地洗第 $1\\sim 2^{k-1}$ 张牌，以及第 $2^{k-1}+1\\sim 2^k$ 张牌；\n    - 将洗过的第 $2^{k-1}+1\\sim 2^k$ 张牌放在洗过的第 $1\\sim 2^{k-1}$ 张牌前面。\n\n用以上的过程洗好第 $1\\sim 2^n$ 张牌称为**一次洗牌**。\n\n给定正整数 $t$。求出洗了 $t$ 次牌后，第 $1\\sim 2^n$ 张牌上写着的数字分别是什么。\n", "inputFormat": "\n第一行，两个正整数 $n,t$。\n\n第二行，$2^n$ 个正整数 $a_1,a_2,\\cdots,a_{2^n}$。", "outputFormat": "$2^n$ 个正整数，描述洗牌后每张牌上的数字。\n", "hint": "\n- $1\\le n\\le 20$；\n- $1\\le t,a_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 洗牌 / Tasowanie", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R1 Tasowanie [B] (TAS)。\n", "description": "\n给定 $2^n$ 张牌，每张牌上写着一个正整数。第 $i$ 张牌上写着的正整数为 $a_i$。\n\n考虑如下的洗牌过程：\n\n- 若要洗的牌的数量为 $1$，则什么都不做。\n- 否则，设牌的数量为 $2^k$。\n    - 递归地洗第 $1\\sim 2^{k-1}$ 张牌，以及第 $2^{k-1}+1\\sim 2^k$ 张牌；\n    - 将洗过的第 $2^{k-1}+1\\sim 2^k$ 张牌放在洗过的第 $1\\sim 2^{k-1}$ 张牌前面。\n\n用以上的过程洗好第 $1\\sim 2^n$ 张牌称为**一次洗牌**。\n\n给定正整数 $t$。求出洗了 $t$ 次牌后，第 $1\\sim 2^n$ 张牌上写着的数字分别是什么。\n", "inputFormat": "\n第一行，两个正整数 $n,t$。\n\n第二行，$2^n$ 个正整数 $a_1,a_2,\\cdots,a_{2^n}$。", "outputFormat": "$2^n$ 个正整数，描述洗牌后每张牌上的数字。\n", "hint": "\n- $1\\le n\\le 20$；\n- $1\\le t,a_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11604", "type": "P", "difficulty": 5, "samples": [["3\n5 5\n5 > 5\n1 > 5\n3 > 5\n4 > 5\n2 > 5\n2 2\n1 > 1\n1 > 2\n1 1\n1 < 1", "WYGRANA\nREMIS\nPRZEGRANA"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2016", "图论建模", "二分图", "Ad-hoc", "PA（波兰）"], "title": "[PA 2016] 卡牌 / Gra w karty", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R1 Gra w karty [A] (KAR)。$\\texttt{1s,256M}$。\n", "description": "\nAlice 和 Bob 各有 $n$ 张卡牌。每个人的卡牌都被编号为 $1\\sim n$。\n\n现在玩 $(n-1)$ 局游戏：每局游戏中，Alice 先弃掉 Bob 的一张牌，然后 Bob 再弃掉 Alice 的一张牌。\n\n最终两人都只剩下一张牌。\n\n有 $m$ 对关系，形如「若 Alice 最后剩下的牌为 $x$，Bob 最后剩下的牌为 $y$，则 Alice 胜/负 Bob」。特别地，未给出的关系为平局。\n\n若双方都用最优策略游戏，Alice 最终会胜/负 Bob 还是平局？\n\n「最佳策略」指的是：若有必胜策略，则选择必胜策略；否则若有平局策略，选择平局策略。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$。接下来描述 $T$ 组测试数据：\n\n每组数据第一行，两个整数 $n,m$。\n\n接下来 $m$ 行，每行两个正整数和一个字符 $x,w,y$，其中 $w\\in \\{\\texttt{<},\\texttt{>}\\}$，$x,y$ 为正整数。\n- 若 $w=\\texttt{>}$，则表示「若 Alice 最后剩下的牌为 $x$，Bob 最后剩下的牌为 $y$，则 Alice 胜 Bob」；\n- 若 $w=\\texttt{<}$，则表示「若 Alice 最后剩下的牌为 $x$，Bob 最后剩下的牌为 $y$，则 Alice 负 Bob」。\n\n保证不会出现自相矛盾的关系。\n", "outputFormat": "\n输出 $T$ 行，每行一个字符串：\n- 若 Alice 有必胜策略，输出 $\\texttt{WYGRANA}$；\n- 否则，若 Alice 有平局策略，输出 $\\texttt{REMIS}$；\n- 否则，输出 $\\texttt{PRZEGRANA}$。\n", "hint": "\n- $1\\le T\\le 20$；\n- $1\\le n\\le 10^5$；\n- $0\\le m\\le 2\\times 10^5$；\n- $1\\le x,y\\le n$；\n- $w\\in \\{\\texttt{<},\\texttt{>}\\}$。\n\n保证不会出现自相矛盾的关系，也不会重复给出一个关系。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 卡牌 / Gra w karty", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R1 Gra w karty [A] (KAR)。$\\texttt{1s,256M}$。\n", "description": "\nAlice 和 Bob 各有 $n$ 张卡牌。每个人的卡牌都被编号为 $1\\sim n$。\n\n现在玩 $(n-1)$ 局游戏：每局游戏中，Alice 先弃掉 Bob 的一张牌，然后 Bob 再弃掉 Alice 的一张牌。\n\n最终两人都只剩下一张牌。\n\n有 $m$ 对关系，形如「若 Alice 最后剩下的牌为 $x$，Bob 最后剩下的牌为 $y$，则 Alice 胜/负 Bob」。特别地，未给出的关系为平局。\n\n若双方都用最优策略游戏，Alice 最终会胜/负 Bob 还是平局？\n\n「最佳策略」指的是：若有必胜策略，则选择必胜策略；否则若有平局策略，选择平局策略。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$。接下来描述 $T$ 组测试数据：\n\n每组数据第一行，两个整数 $n,m$。\n\n接下来 $m$ 行，每行两个正整数和一个字符 $x,w,y$，其中 $w\\in \\{\\texttt{<},\\texttt{>}\\}$，$x,y$ 为正整数。\n- 若 $w=\\texttt{>}$，则表示「若 Alice 最后剩下的牌为 $x$，Bob 最后剩下的牌为 $y$，则 Alice 胜 Bob」；\n- 若 $w=\\texttt{<}$，则表示「若 Alice 最后剩下的牌为 $x$，Bob 最后剩下的牌为 $y$，则 Alice 负 Bob」。\n\n保证不会出现自相矛盾的关系。\n", "outputFormat": "\n输出 $T$ 行，每行一个字符串：\n- 若 Alice 有必胜策略，输出 $\\texttt{WYGRANA}$；\n- 否则，若 Alice 有平局策略，输出 $\\texttt{REMIS}$；\n- 否则，输出 $\\texttt{PRZEGRANA}$。\n", "hint": "\n- $1\\le T\\le 20$；\n- $1\\le n\\le 10^5$；\n- $0\\le m\\le 2\\times 10^5$；\n- $1\\le x,y\\le n$；\n- $w\\in \\{\\texttt{<},\\texttt{>}\\}$。\n\n保证不会出现自相矛盾的关系，也不会重复给出一个关系。", "locale": "zh-CN"}}}
{"pid": "P11605", "type": "P", "difficulty": 3, "samples": [["2\n6\n10", "(1+1)*(1+1+1)\n1+1+1+1+1+1+1+1+1+1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "2016", "递归", "Special Judge", "PA（波兰）"], "title": "[PA 2016] 运算 / Jedynki", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R2 Jedynki [B] (JED)。$\\texttt{1s,256M}$。\n", "description": "\n给定正整数 $k$。构造一个只包含 $\\texttt{1},\\texttt{+},\\texttt{*},\\texttt{(},\\texttt{)}$ 的**合法**表达式，满足：\n- 不存在两个相邻的 $1$；\n- $1$ 的数量最多为 $100$；\n- 表达式运算结果为 $k$。\n\n输出你构造的表达式，或者判断无解。\n\n我们给定合法表达式的形式化定义：\n\n- $\\texttt{1}$ 是合法表达式。\n- 若 $\\texttt{a},\\texttt{b}$ 是合法表达式，则 $\\texttt{a+b},\\texttt{a*b},\\texttt{(a+b)},\\texttt{(a*b)}$ 都是合法表达式。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$。接下来描述 $T$ 组测试数据：\n\n每组测试数据只有一行一个正整数 $k$。\n", "outputFormat": "\n输出 $T$ 行，每行一个字符串：\n- 若无解，输出 $\\texttt{NIE}$；\n- 否则输出你构造的表达式。", "hint": "\n- $1\\le T\\le 100$；\n- $1\\le k\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 运算 / Jedynki", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R2 Jedynki [B] (JED)。$\\texttt{1s,256M}$。\n", "description": "\n给定正整数 $k$。构造一个只包含 $\\texttt{1},\\texttt{+},\\texttt{*},\\texttt{(},\\texttt{)}$ 的**合法**表达式，满足：\n- 不存在两个相邻的 $1$；\n- $1$ 的数量最多为 $100$；\n- 表达式运算结果为 $k$。\n\n输出你构造的表达式，或者判断无解。\n\n我们给定合法表达式的形式化定义：\n\n- $\\texttt{1}$ 是合法表达式。\n- 若 $\\texttt{a},\\texttt{b}$ 是合法表达式，则 $\\texttt{a+b},\\texttt{a*b},\\texttt{(a+b)},\\texttt{(a*b)}$ 都是合法表达式。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$。接下来描述 $T$ 组测试数据：\n\n每组测试数据只有一行一个正整数 $k$。\n", "outputFormat": "\n输出 $T$ 行，每行一个字符串：\n- 若无解，输出 $\\texttt{NIE}$；\n- 否则输出你构造的表达式。", "hint": "\n- $1\\le T\\le 100$；\n- $1\\le k\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11606", "type": "P", "difficulty": 6, "samples": [["4 4\n4 1 T\n4 2 T\n3 2 N\n4 3 N", "0\n1\n1\n2"], ["2 2\n1 2 N\n2 1 N", "NIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "并查集", "递归", "Special Judge", "构造", "PA（波兰）"], "title": "[PA 2016] 构树 / Reorganizacja", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R2 Reorganizacja [A] (REO)。$\\texttt{1s,256M}$。\n", "description": "构造一棵 $n$ 个节点的有根树，满足 $m$ 条限制，形如「$x$ 必须是 $y$ 的祖先」或者「$x$ 必须不是 $y$ 的祖先」。\n", "inputFormat": "\n第一行，两个整数 $n,m$。\n\n接下来 $m$ 行，每行两个正整数和一个字符 $x,y,c$。其中 $x,y$ 为正整数，$c\\in \\{\\texttt{T},\\texttt{N}\\}$，$x\\neq y$。\n- 若 $c=\\texttt{T}$，表示 $y$ 必须是 $x$ 的祖先；\n- 否则，表示 $y$ 必须不是 $x$ 的祖先。\n\n保证不会重复给出同一条信息。", "outputFormat": "\n若无解，输出一行一个 $\\texttt{NIE}$；\n\n否则输出 $n$ 行，每行一个整数，表示 $i$ 号点的父亲。\n\n- 特别地，若 $i$ 是根，则规定其父亲为 $0$。", "hint": "\n\n- $1\\le n\\le 10^3$；\n- $0\\le m\\le \\min(n(n-1), 10^4)$；\n- $1\\le x,y\\le n$，$x\\neq y$。\n\n保证不会重复给出同一条信息。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 构树 / Reorganizacja", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R2 Reorganizacja [A] (REO)。$\\texttt{1s,256M}$。\n", "description": "构造一棵 $n$ 个节点的有根树，满足 $m$ 条限制，形如「$x$ 必须是 $y$ 的祖先」或者「$x$ 必须不是 $y$ 的祖先」。\n", "inputFormat": "\n第一行，两个整数 $n,m$。\n\n接下来 $m$ 行，每行两个正整数和一个字符 $x,y,c$。其中 $x,y$ 为正整数，$c\\in \\{\\texttt{T},\\texttt{N}\\}$，$x\\neq y$。\n- 若 $c=\\texttt{T}$，表示 $y$ 必须是 $x$ 的祖先；\n- 否则，表示 $y$ 必须不是 $x$ 的祖先。\n\n保证不会重复给出同一条信息。", "outputFormat": "\n若无解，输出一行一个 $\\texttt{NIE}$；\n\n否则输出 $n$ 行，每行一个整数，表示 $i$ 号点的父亲。\n\n- 特别地，若 $i$ 是根，则规定其父亲为 $0$。", "hint": "\n\n- $1\\le n\\le 10^3$；\n- $0\\le m\\le \\min(n(n-1), 10^4)$；\n- $1\\le x,y\\le n$，$x\\neq y$。\n\n保证不会重复给出同一条信息。", "locale": "zh-CN"}}}
{"pid": "P11607", "type": "P", "difficulty": 5, "samples": [["2 200 2\n\n0\n\n1\n\n1", "\n? 0 0\n\n? 1 1\n\n? 2 2\n\n! 2 2"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2016", "二分", "交互题", "Special Judge", "PA（波兰）"], "title": "[PA 2016] 寻踪 / Ciepło-zimno", "background": "\n译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R3 Ciepło-zimno [B] (CIE)。$\\texttt{1s,256M}$。\n\n原题为函数式交互题。为了方便不同语言的选手提交，改为 IO 交互题。\n\n特殊的内存限制是交互库的限制导致的，和解法没有关系。", "description": "\n**这是一道交互题。**\n\n给定正常数 $n,k,r$。\n\n$n$ 维空间中，有一个整点 $P(p_1,p_2,\\ldots,p_n)$，满足 $p_i\\in [0,r]$。\n\n你有 $k$ 次询问机会，第 $i$ 次询问给定一个整点 $V_i(v_{i,1},v_{i,2},\\ldots,v_{i,n})$，回答为「$\\operatorname{dist}(V_i,P)$ 是/否**严格**小于 $\\operatorname{dist}(V_{i-1},P)$」。**特别地**，$i=1$ 时，答案总为否。\n\n注意，这里的 $\\operatorname{dist}(A,B)$ 表示 $A,B$ 之间的 **Chebyshev 距离**。也就是，$\\displaystyle \\operatorname{dist}(A,B)=\\max_{1\\le i\\le n} |A_i-B_i|$，这里 $A_i$ 表示点 $A$ 坐标在第 $i$ 维上的分量。\n\n利用询问找到点 $P$。\n\n### 实现细节\n\n**注意：本题的 IO 量可能很大，请注意使用快速的 IO 方式。**\n\n读入三个正整数 $n,k,r$。然后开始交互：\n\n- $\\texttt{?}$ $v_{i,1}$ $v_{i,2}$ $\\ldots$ $v_{i,n}$：询问「$\\operatorname{dist}(V_i,P)$ 是/否**严格**小于 $\\operatorname{dist}(V_{i-1},P)$」。\n    - 回答为 $0$，表示答案为否；回答为 $1$，表示答案为是；回答为 $-1$，表示你的程序已经被判为 WA，请**立刻终止程序**。\n        - 特别地，如果这是第一次询问，则（如果询问合法的话）回答总为 $0$。\n    - 你需要保证 $v_{i,j}\\in [0,r]$，且 $v_{i,j}$ 为整数。\n    - 最多可以询问 $k$ 次。\n- $\\texttt{!}$ $p_{1}$ $p_{2}$ $\\ldots$ $p_{n}$：回答 $P$ 的位置。\n    - 回答后，你的程序需要立刻终止，不要输出多余内容。\n\n**每次询问或者回答之后，都要换行并刷新缓冲区。** 以下是一些例子：\n\n- C++：`fflush(stdout)`，`std::cout<<std::endl`；\n- Java：`System.out.flush()`；\n- Pascal：`flush(output)`；\n- Python：`sys.stdout.flush()`。", "inputFormat": "见【实现细节】。\n", "outputFormat": "见【实现细节】。\n", "hint": "\n\n- $1\\le n\\le 500$；\n- $k\\ge 100\\cdot n$；\n- $2\\le r\\le 10^9$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 寻踪 / Ciepło-zimno", "background": "\n译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R3 Ciepło-zimno [B] (CIE)。$\\texttt{1s,256M}$。\n\n原题为函数式交互题。为了方便不同语言的选手提交，改为 IO 交互题。\n\n特殊的内存限制是交互库的限制导致的，和解法没有关系。", "description": "\n**这是一道交互题。**\n\n给定正常数 $n,k,r$。\n\n$n$ 维空间中，有一个整点 $P(p_1,p_2,\\ldots,p_n)$，满足 $p_i\\in [0,r]$。\n\n你有 $k$ 次询问机会，第 $i$ 次询问给定一个整点 $V_i(v_{i,1},v_{i,2},\\ldots,v_{i,n})$，回答为「$\\operatorname{dist}(V_i,P)$ 是/否**严格**小于 $\\operatorname{dist}(V_{i-1},P)$」。**特别地**，$i=1$ 时，答案总为否。\n\n注意，这里的 $\\operatorname{dist}(A,B)$ 表示 $A,B$ 之间的 **Chebyshev 距离**。也就是，$\\displaystyle \\operatorname{dist}(A,B)=\\max_{1\\le i\\le n} |A_i-B_i|$，这里 $A_i$ 表示点 $A$ 坐标在第 $i$ 维上的分量。\n\n利用询问找到点 $P$。\n\n### 实现细节\n\n**注意：本题的 IO 量可能很大，请注意使用快速的 IO 方式。**\n\n读入三个正整数 $n,k,r$。然后开始交互：\n\n- $\\texttt{?}$ $v_{i,1}$ $v_{i,2}$ $\\ldots$ $v_{i,n}$：询问「$\\operatorname{dist}(V_i,P)$ 是/否**严格**小于 $\\operatorname{dist}(V_{i-1},P)$」。\n    - 回答为 $0$，表示答案为否；回答为 $1$，表示答案为是；回答为 $-1$，表示你的程序已经被判为 WA，请**立刻终止程序**。\n        - 特别地，如果这是第一次询问，则（如果询问合法的话）回答总为 $0$。\n    - 你需要保证 $v_{i,j}\\in [0,r]$，且 $v_{i,j}$ 为整数。\n    - 最多可以询问 $k$ 次。\n- $\\texttt{!}$ $p_{1}$ $p_{2}$ $\\ldots$ $p_{n}$：回答 $P$ 的位置。\n    - 回答后，你的程序需要立刻终止，不要输出多余内容。\n\n**每次询问或者回答之后，都要换行并刷新缓冲区。** 以下是一些例子：\n\n- C++：`fflush(stdout)`，`std::cout<<std::endl`；\n- Java：`System.out.flush()`；\n- Pascal：`flush(output)`；\n- Python：`sys.stdout.flush()`。", "inputFormat": "见【实现细节】。\n", "outputFormat": "见【实现细节】。\n", "hint": "\n\n- $1\\le n\\le 500$；\n- $k\\ge 100\\cdot n$；\n- $2\\le r\\le 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P11608", "type": "P", "difficulty": 6, "samples": [["3\n5 10\n16 0\n5 10", "10\n26\n57"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "2016", "平衡树", "PA（波兰）"], "title": "[PA 2016] 雨后的蘑菇 2 / Grzyby po deszczu 2", "background": "\n译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R3 Grzyby po deszczu 2 [A] (GRZ)。\n", "description": "\n给定长度为 $n$ 的整数数列 $a_1,\\ldots,a_n$ 和 $b_1,\\ldots,b_n$。\n\n第 $1$ 天早上，第 $i$ 块地上有 $b_i$ 个蘑菇。每天的晚上，第 $i$ 块地上都会长出 $a_i$ 个蘑菇。\n\n采蘑菇只能在早上进行，一次只能在一块地上采集，一次采集的数量没有限制。\n\n对于 $k=1,2,\\cdots,n$，求出：如果在前 $k$ 天**每天早上**选择一块地（可以重复选择同一块地）采蘑菇，最多能采多少个蘑菇？", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个非负整数 $a_i,b_i$。\n", "outputFormat": "输出 $n$ 行，第 $i$ 行一个整数，表示 $k=i$ 时的答案。\n", "hint": "\n- $1\\le n\\le 10^6$；\n- $0\\le a_i\\le 10^6$；\n- $0\\le b_i\\le 10^{12}$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 雨后的蘑菇 2 / Grzyby po deszczu 2", "background": "\n译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R3 Grzyby po deszczu 2 [A] (GRZ)。\n", "description": "\n给定长度为 $n$ 的整数数列 $a_1,\\ldots,a_n$ 和 $b_1,\\ldots,b_n$。\n\n第 $1$ 天早上，第 $i$ 块地上有 $b_i$ 个蘑菇。每天的晚上，第 $i$ 块地上都会长出 $a_i$ 个蘑菇。\n\n采蘑菇只能在早上进行，一次只能在一块地上采集，一次采集的数量没有限制。\n\n对于 $k=1,2,\\cdots,n$，求出：如果在前 $k$ 天**每天早上**选择一块地（可以重复选择同一块地）采蘑菇，最多能采多少个蘑菇？", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个非负整数 $a_i,b_i$。\n", "outputFormat": "输出 $n$ 行，第 $i$ 行一个整数，表示 $k=i$ 时的答案。\n", "hint": "\n- $1\\le n\\le 10^6$；\n- $0\\le a_i\\le 10^6$；\n- $0\\le b_i\\le 10^{12}$。\n", "locale": "zh-CN"}}}
{"pid": "P11611", "type": "P", "difficulty": 7, "samples": [["3\n(x2) ^ (x3 v ~x2) ^ (x2 v x1 v ~x3)", "2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2016", "虚树", "字典树 Trie", "PA（波兰）"], "title": "[PA 2016] 归约 / CNF-SAT", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 CNF-SAT [B] (CNF)。$\\texttt{1s,256M}$。\n", "description": "\n我们给定 SAT 问题的定义。本题中，不区分 $1$ 与 $\\mathrm{True}$，$0$ 与 $\\mathrm{False}$。\n\nSAT 问题用来求出一组逻辑变量 $x_1,x_2,\\cdots,x_n$ 的取值（其中 $x_i\\in \\{\\mathrm{True},\\mathrm{False}\\}$），使得以下的**合取范式**取值为真：\n\n$$(l_{1,1}\\lor l_{1,2}\\lor \\ldots\\lor l_{1,q_1})\\land (l_{2,1}\\lor l_{2,2}\\lor \\ldots\\lor l_{2,q_2})\\land \\ldots \\land (l_{m,1}\\lor l_{m,2}\\lor \\ldots\\lor l_{m,q_m})$$\n\n\n\n其中，$(l_{i,1}\\lor l_{i,2}\\lor \\ldots\\lor l_{i,q_i})$ 称为**子句**（Clause），$l_{i,j}$ 是 $x_1,\\ldots,x_n$ 中的变量或其否定。我们规定一个子句中，不存在 $j\\lt k$，使得 $l_{i,j}$ 中的变量与 $l_{i,k}$ 中的变量相同。\n\n---\n\n\n某人声称解决了世界难题 $\\mathrm{P}=\\mathrm{NP?}$。他声称，一般的 SAT 问题都可以归约到一种特例，而这种特例中的所有子句都满足特殊性质：\n\n- $\\forall 1\\le i\\le n$，$x_i$ 和 $\\neg x_i$ 不会同时在子句中出现。\n- $\\forall 1\\le i\\lt j\\lt k\\le n$，若子句中出现了 $x_i$（或 $\\neg x_i$）和 $x_k$（或 $\\neg x_k$），则必然有 $x_j$（或 $\\neg x_j$）在这个子句中出现。\n\n这里，所有出现的变量的下标都是 $1\\sim n$。\n\n给定满足特例的合取范式，统计有多少种不同的取值能够使其取值为真。只需要求出答案对 $(10^9+7)$ 取模后的结果。", "inputFormat": "\n第一行，一个正整数 $n$，表示**变量的数量**。\n\n第二行，描述一个由若干个子句组成的合取范式：\n\n- 两个子句之间由 ` ^ ` 隔开（一个空格，和 `^`，然后再是一个空格）。\n- 每个子句由一对圆括号 `()` 包围。圆括号内部是若干变量，每个变量形如 `xi` 或者 `~xi`（这里，`x` 是英文字母 $x$，`i` 是一个正整数），其中 `xi` 表示 $x_i$，`~xi` 表示 $\\neg x_i$。两个变量之间用 ` v ` 隔开（一个空格，和英文字母 `v`，然后再是一个空格）。\n\n这里，保证有 $1\\le i\\le n$，且子句满足题目描述中的特殊性质。\n", "outputFormat": "\n输出答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "#### 样例解释\n\n两个合法解为 $(0,1,1)$ 和 $(1,1,1)$。\n\n#### 数据范围\n\n- $1\\le n\\le 10^6$；\n- 所有子句中变量个数的和不超过 $10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 归约 / CNF-SAT", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 CNF-SAT [B] (CNF)。$\\texttt{1s,256M}$。\n", "description": "\n我们给定 SAT 问题的定义。本题中，不区分 $1$ 与 $\\mathrm{True}$，$0$ 与 $\\mathrm{False}$。\n\nSAT 问题用来求出一组逻辑变量 $x_1,x_2,\\cdots,x_n$ 的取值（其中 $x_i\\in \\{\\mathrm{True},\\mathrm{False}\\}$），使得以下的**合取范式**取值为真：\n\n$$(l_{1,1}\\lor l_{1,2}\\lor \\ldots\\lor l_{1,q_1})\\land (l_{2,1}\\lor l_{2,2}\\lor \\ldots\\lor l_{2,q_2})\\land \\ldots \\land (l_{m,1}\\lor l_{m,2}\\lor \\ldots\\lor l_{m,q_m})$$\n\n\n\n其中，$(l_{i,1}\\lor l_{i,2}\\lor \\ldots\\lor l_{i,q_i})$ 称为**子句**（Clause），$l_{i,j}$ 是 $x_1,\\ldots,x_n$ 中的变量或其否定。我们规定一个子句中，不存在 $j\\lt k$，使得 $l_{i,j}$ 中的变量与 $l_{i,k}$ 中的变量相同。\n\n---\n\n\n某人声称解决了世界难题 $\\mathrm{P}=\\mathrm{NP?}$。他声称，一般的 SAT 问题都可以归约到一种特例，而这种特例中的所有子句都满足特殊性质：\n\n- $\\forall 1\\le i\\le n$，$x_i$ 和 $\\neg x_i$ 不会同时在子句中出现。\n- $\\forall 1\\le i\\lt j\\lt k\\le n$，若子句中出现了 $x_i$（或 $\\neg x_i$）和 $x_k$（或 $\\neg x_k$），则必然有 $x_j$（或 $\\neg x_j$）在这个子句中出现。\n\n这里，所有出现的变量的下标都是 $1\\sim n$。\n\n给定满足特例的合取范式，统计有多少种不同的取值能够使其取值为真。只需要求出答案对 $(10^9+7)$ 取模后的结果。", "inputFormat": "\n第一行，一个正整数 $n$，表示**变量的数量**。\n\n第二行，描述一个由若干个子句组成的合取范式：\n\n- 两个子句之间由 ` ^ ` 隔开（一个空格，和 `^`，然后再是一个空格）。\n- 每个子句由一对圆括号 `()` 包围。圆括号内部是若干变量，每个变量形如 `xi` 或者 `~xi`（这里，`x` 是英文字母 $x$，`i` 是一个正整数），其中 `xi` 表示 $x_i$，`~xi` 表示 $\\neg x_i$。两个变量之间用 ` v ` 隔开（一个空格，和英文字母 `v`，然后再是一个空格）。\n\n这里，保证有 $1\\le i\\le n$，且子句满足题目描述中的特殊性质。\n", "outputFormat": "\n输出答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "#### 样例解释\n\n两个合法解为 $(0,1,1)$ 和 $(1,1,1)$。\n\n#### 数据范围\n\n- $1\\le n\\le 10^6$；\n- 所有子句中变量个数的和不超过 $10^6$。", "locale": "zh-CN"}}}
{"pid": "P11612", "type": "P", "difficulty": 7, "samples": [["3 2\n1\n42", "2 1\n3 14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "数学", "2016", "递归", "分治", "分类讨论", "PA（波兰）"], "title": "[PA 2016] 台球 / Bilard Hilberta", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 Bilard Hilberta [A] (HIL)。\n", "description": "\n考虑如下的 Hilbert 曲线：\n\n$n$ 阶的 Hilbert 曲线的大小为 $2^{n+1}\\times 2^{n+1}$。这里，$n\\ge 1$。\n\n$n=1$ 时的曲线在下图中给出，而 $n\\gt 1$ 时的曲线由四个 $(n-1)$ 阶的曲线组成。左下角的曲线被顺时针旋转了 $90^\\circ$，而右下角的曲线则被逆时针旋转了 $90^\\circ$，而且在左上与左下、左上与右上、右上与右下的曲线的相接处添加了长度为 $2$ 的额外曲线将它们连为一体。\n\n下图中从左至右分别展示了 $n=1,2,3$ 时的曲线。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ynfo38pq.png)\n\n令左下角的坐标为 $(0,0)$，右下角的坐标为 $(2^{n+1},0)$，右上角坐标为 $(2^{n+1},2^{n+1})$。\n\n将球视为质点。球从 $(1,0)$ 出发，其速度矢量 $\\boldsymbol{v}=(1,1)$。撞到边缘或者曲线上之后，它会反弹，这里的碰撞是**完全弹性碰撞**，也就是垂直于撞击面的速度分量反向，平行于撞击面的速度分量不变。可以证明撞到的一定是一个面，没有撞到角的情况。\n\n$m$ 次询问，每次问球出发 $t_i$ 秒后，球的位置。", "inputFormat": "\n\n第一行两个正整数 $n,m$。\n\n接下来 $m$ 行，第 $i$ 行只有一个整数 $t_i$，描述一次询问。", "outputFormat": "输出 $m$ 行，每行两个整数表示球的位置。\n", "hint": "\n#### 样例解释\n\n在【题目描述】的图中已经给出。\n\n#### 数据范围\n\n- $1\\le n\\le 30$；\n- $1\\le m\\le 10^5$；\n- $0\\lt t_1\\lt t_2\\lt \\ldots \\lt t_m\\lt 2^{2(n+1)}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 台球 / Bilard Hilberta", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 Bilard Hilberta [A] (HIL)。\n", "description": "\n考虑如下的 Hilbert 曲线：\n\n$n$ 阶的 Hilbert 曲线的大小为 $2^{n+1}\\times 2^{n+1}$。这里，$n\\ge 1$。\n\n$n=1$ 时的曲线在下图中给出，而 $n\\gt 1$ 时的曲线由四个 $(n-1)$ 阶的曲线组成。左下角的曲线被顺时针旋转了 $90^\\circ$，而右下角的曲线则被逆时针旋转了 $90^\\circ$，而且在左上与左下、左上与右上、右上与右下的曲线的相接处添加了长度为 $2$ 的额外曲线将它们连为一体。\n\n下图中从左至右分别展示了 $n=1,2,3$ 时的曲线。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ynfo38pq.png)\n\n令左下角的坐标为 $(0,0)$，右下角的坐标为 $(2^{n+1},0)$，右上角坐标为 $(2^{n+1},2^{n+1})$。\n\n将球视为质点。球从 $(1,0)$ 出发，其速度矢量 $\\boldsymbol{v}=(1,1)$。撞到边缘或者曲线上之后，它会反弹，这里的碰撞是**完全弹性碰撞**，也就是垂直于撞击面的速度分量反向，平行于撞击面的速度分量不变。可以证明撞到的一定是一个面，没有撞到角的情况。\n\n$m$ 次询问，每次问球出发 $t_i$ 秒后，球的位置。", "inputFormat": "\n\n第一行两个正整数 $n,m$。\n\n接下来 $m$ 行，第 $i$ 行只有一个整数 $t_i$，描述一次询问。", "outputFormat": "输出 $m$ 行，每行两个整数表示球的位置。\n", "hint": "\n#### 样例解释\n\n在【题目描述】的图中已经给出。\n\n#### 数据范围\n\n- $1\\le n\\le 30$；\n- $1\\le m\\le 10^5$；\n- $0\\lt t_1\\lt t_2\\lt \\ldots \\lt t_m\\lt 2^{2(n+1)}$。", "locale": "zh-CN"}}}
{"pid": "P11613", "type": "P", "difficulty": 7, "samples": [["4\n3 1\n5 4\n5 3\n57 32", "0\n1\n1\n1"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2016", "组合数学", "生成函数", "Lucas 定理", "PA（波兰）"], "title": "[PA 2016] 覆盖 / Pokrycia", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 Pokrycia [A] (POK)。\n", "description": "\n简单无向图 $G=(V,E)$ 的**点覆盖**是一个点集 $S\\subseteq V$，使得 $\\forall (u,v)\\in E$，都有 $u\\in S$ 或 $v\\in S$。点覆盖 $S$ 的**大小**定义为 $|S|$。\n\n给定点集 $V$ 和整数 $k$，求出有多少张以 $V$ 为点集的简单无向图 $G$ 的最小点覆盖大小为 $k$。\n\n两张图 $G_1=(V,E_1)$ 和 $G_2=(V,E_2)$ 不同，当且仅当存在 $u,v\\in V$，使得 $(u,v)$ 只属于 $E_1$ 或 $E_2$。\n\n给定正整数 $n$，点集 $V=\\{1,2,\\ldots,n\\}$。\n\n由于答案可能很大，所以只需要输出答案模 $\\textcolor{red}{\\textbf{2}}$ 后的余数。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行一个正整数 $T$，表示测试数据组数。\n\n接下来描述 $T$ 组测试数据：\n\n每组测试数据只有一行两个整数 $n,k$，表示一次询问。$V=\\{1,2,\\ldots,n\\}$。\n", "outputFormat": "\n输出 $T$ 行，每行一个非负整数，表示答案模 $\\textcolor{red}{\\textbf{2}}$ 后的余数。", "hint": "\n\n#### 样例解释\n\n- 第一组测试数据中，$n=3,k=1$。符合条件的图要么只有一条边，要么有两条边，且这两条边共用一个顶点。不难验证，原始答案为 $6$。\n- 第二组测试数据中，$n=5,k=4$。不难验证符合条件的图只有完全图。\n\n\n#### 数据范围\n\n\n- $1\\le T\\le 2^{14}$；\n- $1\\le n\\lt 2^{14}$；\n- $0\\le k\\lt n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 覆盖 / Pokrycia", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 Pokrycia [A] (POK)。\n", "description": "\n简单无向图 $G=(V,E)$ 的**点覆盖**是一个点集 $S\\subseteq V$，使得 $\\forall (u,v)\\in E$，都有 $u\\in S$ 或 $v\\in S$。点覆盖 $S$ 的**大小**定义为 $|S|$。\n\n给定点集 $V$ 和整数 $k$，求出有多少张以 $V$ 为点集的简单无向图 $G$ 的最小点覆盖大小为 $k$。\n\n两张图 $G_1=(V,E_1)$ 和 $G_2=(V,E_2)$ 不同，当且仅当存在 $u,v\\in V$，使得 $(u,v)$ 只属于 $E_1$ 或 $E_2$。\n\n给定正整数 $n$，点集 $V=\\{1,2,\\ldots,n\\}$。\n\n由于答案可能很大，所以只需要输出答案模 $\\textcolor{red}{\\textbf{2}}$ 后的余数。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行一个正整数 $T$，表示测试数据组数。\n\n接下来描述 $T$ 组测试数据：\n\n每组测试数据只有一行两个整数 $n,k$，表示一次询问。$V=\\{1,2,\\ldots,n\\}$。\n", "outputFormat": "\n输出 $T$ 行，每行一个非负整数，表示答案模 $\\textcolor{red}{\\textbf{2}}$ 后的余数。", "hint": "\n\n#### 样例解释\n\n- 第一组测试数据中，$n=3,k=1$。符合条件的图要么只有一条边，要么有两条边，且这两条边共用一个顶点。不难验证，原始答案为 $6$。\n- 第二组测试数据中，$n=5,k=4$。不难验证符合条件的图只有完全图。\n\n\n#### 数据范围\n\n\n- $1\\le T\\le 2^{14}$；\n- $1\\le n\\lt 2^{14}$；\n- $0\\le k\\lt n$。", "locale": "zh-CN"}}}
{"pid": "P11614", "type": "P", "difficulty": 6, "samples": [["3 2\n3 8 3\n2 5 2\n3 7 3", "TAK"], ["2 1\n0 1 1\n0 1 1", "NIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "网络流", "图论建模", "PA（波兰）"], "title": "[PA 2016] 任务排序 /  Szeregowanie zadań", "background": "\n译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 Szeregowanie zadań [B] (SZE)。", "description": "\n有 $n$ 个任务，编号 $1\\sim n$。任务 $i$ 有三个参数 $p_i,c_i,k_i$，含义为：\n- 这个任务必须在时刻 $p_i$（或者 $p_i$ 之后）开始执行；\n- 这个任务需要 $c_i$ 单位时间；（意思是，它需要在处理器上运行的总时间为 $c_i$）\n- 这个任务必须在时刻 $k_i$（或者 $k_i$ 之前）完成。\n\n有 $m$ 个处理器用来执行任务。\n\n一个处理器同一时间只能处理一个任务，一个任务同一时间只能在一个处理器上被处理。每个任务可以在处理时被中断任意次，可以在任意时刻（不一定是整数时刻）被中断，在中断后可以分配给另一个处理器处理。\n\n是否存在一种策略可以满足所有要求？", "inputFormat": "\n第一行两个正整数 $n,m$。\n\n接下来 $n$ 行，每行三个整数 $p_i,k_i,c_i$，描述一个任务。\n", "outputFormat": "如果存在，输出一行一个 $\\texttt{TAK}$；否则输出一行一个 $\\texttt{NIE}$。\n", "hint": "\n- $1\\le n,m\\le 100$；\n- $0\\le p_i\\lt k_i\\le 10^6$；\n- $1\\le c_i\\le k_i-p_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 任务排序 /  Szeregowanie zadań", "background": "\n译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 Szeregowanie zadań [B] (SZE)。", "description": "\n有 $n$ 个任务，编号 $1\\sim n$。任务 $i$ 有三个参数 $p_i,c_i,k_i$，含义为：\n- 这个任务必须在时刻 $p_i$（或者 $p_i$ 之后）开始执行；\n- 这个任务需要 $c_i$ 单位时间；（意思是，它需要在处理器上运行的总时间为 $c_i$）\n- 这个任务必须在时刻 $k_i$（或者 $k_i$ 之前）完成。\n\n有 $m$ 个处理器用来执行任务。\n\n一个处理器同一时间只能处理一个任务，一个任务同一时间只能在一个处理器上被处理。每个任务可以在处理时被中断任意次，可以在任意时刻（不一定是整数时刻）被中断，在中断后可以分配给另一个处理器处理。\n\n是否存在一种策略可以满足所有要求？", "inputFormat": "\n第一行两个正整数 $n,m$。\n\n接下来 $n$ 行，每行三个整数 $p_i,k_i,c_i$，描述一个任务。\n", "outputFormat": "如果存在，输出一行一个 $\\texttt{TAK}$；否则输出一行一个 $\\texttt{NIE}$。\n", "hint": "\n- $1\\le n,m\\le 100$；\n- $0\\le p_i\\lt k_i\\le 10^6$；\n- $1\\le c_i\\le k_i-p_i$。", "locale": "zh-CN"}}}
{"pid": "P11615", "type": "P", "difficulty": 3, "samples": [["5\n0 4\n0 998244353\n1000000000000000000 20120712\n1000000000000000000 1000000000000000000\n1000000000000000000 998244353", "5000000000080482856"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["哈希表", "模板题"], "title": "【模板】哈希表", "background": "本题读入量较大，建议使用快速读入。\n\n```\nchar buf[1<<23],*p1=buf,*p2=buf;\n#define gc() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\ninline unsigned long long rd() {//读入一个 64 位无符号整数\n\tunsigned long long x=0;\n\tchar ch=gc();\n\twhile(!isdigit(ch))ch=gc();\n\twhile(isdigit(ch)) x=x*10+(ch^48),ch=gc();\n\treturn x;\n}\n```", "description": "你需要维护一个映射 $f:[0,2^{64})\\to[0,2^{64})$，初始 $\\forall x\\in [0,2^{64}),f(x)=0$。\n\n有 $n$ 次操作，每次操作给出二元组 $(x,y)$，表示查询 $f(x)$ 的值，之后 $f(x)\\gets y$。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$ 描述一次操作。", "outputFormat": "为了减少输出量，设第 $i$ 次操作的答案为 $ans_i$，你只需要输出 $\\sum_{i=1}^ni\\times ans_i$ 对 $2^{64}$ 取模的结果。", "hint": "样例的 $ans$ 分别为：$0,4,0,20120712,1000000000000000000$。\n\n对于 $100\\%$ 的数据，$1\\le n \\le 5\\times 10^6,0\\le x,y<2^{64}$。\n\n| 子任务 | $n$ |\n| :----------: | :----------: |\n| $0$ | $\\le 10$ |\n| $1$ | $\\le 10^5$ |\n| $2$ | $\\le 10^6$ |\n| $3$ | $\\le 5\\times 10^6$ |\n| $4$ | $\\le 5\\times 10^6$ |\n\n子任务 $0\\sim 3$ 的数据生成方式较为随机，子任务 $4$ 是针对 `unordered_map`，`gp_hash_table`，`cc_hash_table` 和一些错误的哈希方式等的 hack。\n\n如果你认为你的代码复杂度正确却没有通过，记得使用快速读入。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】哈希表", "background": "本题读入量较大，建议使用快速读入。\n\n```\nchar buf[1<<23],*p1=buf,*p2=buf;\n#define gc() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\ninline unsigned long long rd() {//读入一个 64 位无符号整数\n\tunsigned long long x=0;\n\tchar ch=gc();\n\twhile(!isdigit(ch))ch=gc();\n\twhile(isdigit(ch)) x=x*10+(ch^48),ch=gc();\n\treturn x;\n}\n```", "description": "你需要维护一个映射 $f:[0,2^{64})\\to[0,2^{64})$，初始 $\\forall x\\in [0,2^{64}),f(x)=0$。\n\n有 $n$ 次操作，每次操作给出二元组 $(x,y)$，表示查询 $f(x)$ 的值，之后 $f(x)\\gets y$。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$ 描述一次操作。", "outputFormat": "为了减少输出量，设第 $i$ 次操作的答案为 $ans_i$，你只需要输出 $\\sum_{i=1}^ni\\times ans_i$ 对 $2^{64}$ 取模的结果。", "hint": "样例的 $ans$ 分别为：$0,4,0,20120712,1000000000000000000$。\n\n对于 $100\\%$ 的数据，$1\\le n \\le 5\\times 10^6,0\\le x,y<2^{64}$。\n\n| 子任务 | $n$ |\n| :----------: | :----------: |\n| $0$ | $\\le 10$ |\n| $1$ | $\\le 10^5$ |\n| $2$ | $\\le 10^6$ |\n| $3$ | $\\le 5\\times 10^6$ |\n| $4$ | $\\le 5\\times 10^6$ |\n\n子任务 $0\\sim 3$ 的数据生成方式较为随机，子任务 $4$ 是针对 `unordered_map`，`gp_hash_table`，`cc_hash_table` 和一些错误的哈希方式等的 hack。\n\n如果你认为你的代码复杂度正确却没有通过，记得使用快速读入。", "locale": "zh-CN"}}}
{"pid": "P11616", "type": "P", "difficulty": 4, "samples": [["2\n3 2\n2 3 1\n10 5\n7 10 9 23 1 6 7 8 9 20", "1\n29"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2025", "O2优化", "组合数学", "逆元", "洛谷比赛"], "title": "[PumpkinOI Round 1] 瓦解", "background": "> 时间把镜头带走 不假思索 回忆不放手", "description": "你手上有一个长为 $n$ 的数列 $a$。小 Q 想让你将其分成不超过 $m$ 段**非空**连续段，且每段内数字**严格单调递增**。现在小 Q 想知道一共有几种划分方案。由于方案数可能很大，你只需要告诉她方案数对 $998244353$ 取模的结果。", "inputFormat": "**本题包含多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据的组数。\n\n接下来包含 $T$ 组数据，每组数据格式如下：\n\n第一行包含两个整数 $n,m$，分别表示数列长度和段数要求。\n\n第二行包含 $n$ 个整数 $a_1,a_2\\dots a_n$。", "outputFormat": "对于每组测试数据输出一行，包含一个整数，表示方案数对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n- 对于第一组数据，只有 $[2,3],[1]$ 这一种方案。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0（0 pts）：样例。\n- Subtask 1（10 pts）：$\\sum n\\le 10$。\n- Subtask 2（20 pts）：$\\sum n\\le 1000$。\n- Subtask 3（10 pts）：保证数列本身严格单调递增。\n- Subtask 4（30 pts）：$\\sum n\\le 10^6$。\n- Subtask 5（30 pts）：$\\sum n\\le 10^7$。\n\n对于所有数据，保证 $1\\le \\sum n\\le 10^7,1\\le m\\le n,1\\le a_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PumpkinOI Round 1] 瓦解", "background": "> 时间把镜头带走 不假思索 回忆不放手", "description": "你手上有一个长为 $n$ 的数列 $a$。小 Q 想让你将其分成不超过 $m$ 段**非空**连续段，且每段内数字**严格单调递增**。现在小 Q 想知道一共有几种划分方案。由于方案数可能很大，你只需要告诉她方案数对 $998244353$ 取模的结果。", "inputFormat": "**本题包含多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据的组数。\n\n接下来包含 $T$ 组数据，每组数据格式如下：\n\n第一行包含两个整数 $n,m$，分别表示数列长度和段数要求。\n\n第二行包含 $n$ 个整数 $a_1,a_2\\dots a_n$。", "outputFormat": "对于每组测试数据输出一行，包含一个整数，表示方案数对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n- 对于第一组数据，只有 $[2,3],[1]$ 这一种方案。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0（0 pts）：样例。\n- Subtask 1（10 pts）：$\\sum n\\le 10$。\n- Subtask 2（20 pts）：$\\sum n\\le 1000$。\n- Subtask 3（10 pts）：保证数列本身严格单调递增。\n- Subtask 4（30 pts）：$\\sum n\\le 10^6$。\n- Subtask 5（30 pts）：$\\sum n\\le 10^7$。\n\n对于所有数据，保证 $1\\le \\sum n\\le 10^7,1\\le m\\le n,1\\le a_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11617", "type": "P", "difficulty": 4, "samples": [["1\n1\n1 499122176\n", "2\n"], ["2\n1 1\n1 199648870 99824435\n", "14"], ["1\n1\n1 499122177\n", "665496236\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "递推", "2025", "Special Judge", "O2优化", "生成函数", "Ad-hoc", "洛谷比赛"], "title": "[PumpkinOI Round 1] 递推", "background": ">一个简单的问题，什么是递推？", "description": "定义一个数列 $\\{a_0 \\dots a_{n - 1} \\}$ 的递推式为满足下式的序列 $\\{r_0\\dots r_m\\}$：\n\n$$\\sum_{j = 0} ^ m r_j a_{i - j} = 0, \\forall i \\ge m$$\n\n$m$ 称为该递推式的阶数。特别地，$r_0\\neq 0$。\n\n给你一个无限长的数列 $\\{a_i\\}$ 的前 $n$ 项以及数列 $\\{a_i\\}$ 的一个阶数为 $n$ 的递推式 $\\{b_i\\}$。\n\n要求求出数列 $\\{a_i\\}$ 的所有项之和。答案对 $998244353$ 取模。\n\n可以证明，对于任意一个模 $998244353$ 意义下输入，都存在实数意义下的一个对应数列的答案是收敛的。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行输入 $n$ 个整数，表示序列 $\\{a_i\\}$ 的前 $n$ 项即 $\\{a_0 \\dots a_{n-1}\\}$ 在模 $998244353$ 意义下的值。\n\n第三行输入 $n+1$ 个整数，表示递推式 $\\{b_0\\dots b_n\\}$ 在模 $998244353$ 意义下的值。", "outputFormat": "输出一行一个整数，表示数列 $\\{a_i\\}$ 的所有项之和对 $998244353$ 取模的结果。\n\n保证答案可以在模 $998244353$ 意义下表示，即如果最终的答案为分数 $\\frac qp$（可以证明答案肯定是一个有理数），保证 $p\\not\\equiv0\\pmod {998244353}$。", "hint": "**样例解释 #1**\n\n$499122176\\equiv -\\frac12\\pmod {998244353}$。\n\n$\\forall i\\ge n,a_i-\\frac12\\times a_{i-1}=0$ 即 $a_i=\\frac12\\times a_{i-1}$，即数列 $\\{a_i\\}$ 是等比数列 $1,\\frac12,\\frac14,\\dots$。其和收敛于 $2$。\n\n**样例解释 #2**\n\n$199648870\\equiv -0.6\\pmod {998244353},99824435\\equiv -0.3\\pmod {998244353}$。\n\n$\\forall i\\ge n,a_i-0.6\\times a_{i-1}-0.3\\times a_{i-2}=0$ 即 $a_i=0.6\\times a_{i-1}+0.3\\times a_{i-2}$。经计算，其和收敛于 $14$。\n\n**本题使用子任务捆绑/依赖**\n\n对于所有子任务，$1\\le n\\le5\\times 10^3$， $0\\le a_i,b_i< 998244353$。特别地，$b_0\\neq 0$。\n\n| 子任务编号 | 分值 | $n\\le$ | 依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $30$ | $1$ | 无 |\n| $2$ | $30$ | $2$ | $1$ |\n| $3$ | $40$ | $5\\times 10^3$ | $1,2$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PumpkinOI Round 1] 递推", "background": ">一个简单的问题，什么是递推？", "description": "定义一个数列 $\\{a_0 \\dots a_{n - 1} \\}$ 的递推式为满足下式的序列 $\\{r_0\\dots r_m\\}$：\n\n$$\\sum_{j = 0} ^ m r_j a_{i - j} = 0, \\forall i \\ge m$$\n\n$m$ 称为该递推式的阶数。特别地，$r_0\\neq 0$。\n\n给你一个无限长的数列 $\\{a_i\\}$ 的前 $n$ 项以及数列 $\\{a_i\\}$ 的一个阶数为 $n$ 的递推式 $\\{b_i\\}$。\n\n要求求出数列 $\\{a_i\\}$ 的所有项之和。答案对 $998244353$ 取模。\n\n可以证明，对于任意一个模 $998244353$ 意义下输入，都存在实数意义下的一个对应数列的答案是收敛的。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行输入 $n$ 个整数，表示序列 $\\{a_i\\}$ 的前 $n$ 项即 $\\{a_0 \\dots a_{n-1}\\}$ 在模 $998244353$ 意义下的值。\n\n第三行输入 $n+1$ 个整数，表示递推式 $\\{b_0\\dots b_n\\}$ 在模 $998244353$ 意义下的值。", "outputFormat": "输出一行一个整数，表示数列 $\\{a_i\\}$ 的所有项之和对 $998244353$ 取模的结果。\n\n保证答案可以在模 $998244353$ 意义下表示，即如果最终的答案为分数 $\\frac qp$（可以证明答案肯定是一个有理数），保证 $p\\not\\equiv0\\pmod {998244353}$。", "hint": "**样例解释 #1**\n\n$499122176\\equiv -\\frac12\\pmod {998244353}$。\n\n$\\forall i\\ge n,a_i-\\frac12\\times a_{i-1}=0$ 即 $a_i=\\frac12\\times a_{i-1}$，即数列 $\\{a_i\\}$ 是等比数列 $1,\\frac12,\\frac14,\\dots$。其和收敛于 $2$。\n\n**样例解释 #2**\n\n$199648870\\equiv -0.6\\pmod {998244353},99824435\\equiv -0.3\\pmod {998244353}$。\n\n$\\forall i\\ge n,a_i-0.6\\times a_{i-1}-0.3\\times a_{i-2}=0$ 即 $a_i=0.6\\times a_{i-1}+0.3\\times a_{i-2}$。经计算，其和收敛于 $14$。\n\n**本题使用子任务捆绑/依赖**\n\n对于所有子任务，$1\\le n\\le5\\times 10^3$， $0\\le a_i,b_i< 998244353$。特别地，$b_0\\neq 0$。\n\n| 子任务编号 | 分值 | $n\\le$ | 依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $30$ | $1$ | 无 |\n| $2$ | $30$ | $2$ | $1$ |\n| $3$ | $40$ | $5\\times 10^3$ | $1,2$ |\n", "locale": "zh-CN"}}}
{"pid": "P11618", "type": "P", "difficulty": 6, "samples": [["3\n1 3\n2 3", "1"], ["5\n5 3\n2 3\n1 4\n4 3", "83187030"], ["5\n1 3\n4 1\n2 4\n3 5", "332748118"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "Special Judge", "O2优化", "树形 DP", "哈希 hashing", "洛谷比赛"], "title": "[PumpkinOI Round 1] 造树据", "background": "> 拍上了，舒服。", "description": "小 P 正在造数据对拍，可是他拍了 $114514$ 组都没有拍出来。他去请教大佬，但被大佬 D 了，他被告知他随机生成树的期望高度是 $O(\\log n)$ 的，强度不够。\n\n小 P 很难过，以至于无法思考。所以他想请问你，对于他给出的任意一棵**无根树**，以他的随机生成方式，生成出与其形态相同的树即与其**同构**的树的概率。\n\n小 P 随机生成一棵**无根树**的方式为：\n\n- 对于 $2\\le i\\le n$ 的结点，等概率向 $[1,i-1]$ 中连一条边 ", "inputFormat": "第一行输入一个正整数 $n$。\n\n接下来 $2$ 至 $n$ 行，每行输入两个正整数 $u,v$，表示在 $u$ 和 $v$ 之间连一条边。\n\n保证输入的数据是一棵树。", "outputFormat": "输出一行一个非负整数，表示概率对 $998244353$ 取模的值。", "hint": "**本题采用子任务捆绑/依赖**\n\n对于 $10\\%$ 的数据，保证 $2\\le n\\le 10$。\n\n对于 $30\\%$ 的数据，保证 $2\\le n\\le 20$。\n\n对于 $50\\%$ 的数据，保证 $2\\le n\\le 10^3$。\n\n对于另外 $10\\%$ 的数据，保证给出的是一条链。\n\n对于另外 $10\\%$ 的数据，保证给出的树按照题面中小 P 随机生成树的方式生成。\n\n对于 $100\\%$ 的数据，$2\\le n\\le 5\\times 10^5$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PumpkinOI Round 1] 造树据", "background": "> 拍上了，舒服。", "description": "小 P 正在造数据对拍，可是他拍了 $114514$ 组都没有拍出来。他去请教大佬，但被大佬 D 了，他被告知他随机生成树的期望高度是 $O(\\log n)$ 的，强度不够。\n\n小 P 很难过，以至于无法思考。所以他想请问你，对于他给出的任意一棵**无根树**，以他的随机生成方式，生成出与其形态相同的树即与其**同构**的树的概率。\n\n小 P 随机生成一棵**无根树**的方式为：\n\n- 对于 $2\\le i\\le n$ 的结点，等概率向 $[1,i-1]$ 中连一条边 ", "inputFormat": "第一行输入一个正整数 $n$。\n\n接下来 $2$ 至 $n$ 行，每行输入两个正整数 $u,v$，表示在 $u$ 和 $v$ 之间连一条边。\n\n保证输入的数据是一棵树。", "outputFormat": "输出一行一个非负整数，表示概率对 $998244353$ 取模的值。", "hint": "**本题采用子任务捆绑/依赖**\n\n对于 $10\\%$ 的数据，保证 $2\\le n\\le 10$。\n\n对于 $30\\%$ 的数据，保证 $2\\le n\\le 20$。\n\n对于 $50\\%$ 的数据，保证 $2\\le n\\le 10^3$。\n\n对于另外 $10\\%$ 的数据，保证给出的是一条链。\n\n对于另外 $10\\%$ 的数据，保证给出的树按照题面中小 P 随机生成树的方式生成。\n\n对于 $100\\%$ 的数据，$2\\le n\\le 5\\times 10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P11619", "type": "P", "difficulty": 5, "samples": [["5 3\n1 2 4\n1 3 5\n2 1\n", "Yes\nNo\nYes\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2025", "Special Judge", "O2优化", "洛谷比赛", "线段树分治"], "title": "[PumpkinOI Round 1] 种南瓜", "background": "> 秋天到了，又到了收获的季节。", "description": "小 P 要在一段长度为 $n$ 的土地上种魔法南瓜，但是魔法南瓜十分珍贵并且种植它还需要特殊的地质。\n\n所以他对土地进行了 $q$ 次勘测，第 $i$ 次勘测是如下两种结果之一：\n\n`1 l r` : 表示他发现 $[l,r]$ 的土地含有一种全新的元素。\n\n`2 x` : 他发现之前的第 $x$ 次勘测是错误的，所以会删除第 $x$ 次的勘测结果（保证第 $x$ 次操作是之前未被删除的第一种勘测结果）。\n\n魔法南瓜对于地质的要求十分严苛，必须满足对于任意两个区间，它们的关系只能为包含、被包含或不相交。否则，就会因为元素混乱而无法种植魔法南瓜。\n\n请在每次勘测后给出这片土地是否能种植魔法南瓜。\n\n以上的 $[l,r]$ 指的是 $l$ 地块到 $r$ 地块的所有地块。\n\n**形式化题意：**\n\n给你一个标号为 $1 \\dots n$ 的数轴，有 $q$ 次操作：\n\n`1 l r` : 表示在数轴 $l$ 放置左括号，$r$ 放置右括号。\n\n`2 x` : 表示删除第 $x$ 次操作放置的括号。\n\n每次操作后，问能否从数轴 $1$ 到 $n$ 的位置依次取出括号（同一位置的括号应先取出左括号再取出右括号，同种括号可以任意顺序取出）形成一个序列。要求这是一个括号序列，并且该括号序列中任意一对匹配的括号对应该是在同一次操作中放置的。", "inputFormat": "第一行输入两个整数 $n,q$。\n\n接下来 $q$ 行表示有 $q$ 次操作，操作的类型有 $2$ 种，每种操作的输入格式如下：\n\n`1 l r` : 表示他发现 $[l,r]$ 的土地含有一种全新的元素。\n\n`2 x` : 他发现之前的第 $x$ 次勘测是错误的，所以会删除第 $x$ 次的勘测结果（保证第 $x$ 次操作是第一种勘测结果）。", "outputFormat": "对于每次询问，如果可以种植魔法南瓜则输出一行 `YES` ，否则输出一行 `NO` 。\n\n输出的结果大小写不敏感，例如，`yEs`、`Yes`、`yes`、`YES` 都视作肯定的回答。", "hint": "**本题开启子任务捆绑/依赖**\n\n对于所有子任务，$1\\le n,q\\le 2\\times10^5$，$1\\le op\\le 2$，$1\\le l_i\\le r_i\\le n$，$1\\le x_i< q$。（$x_i$ 次操作是之前未被删除的操作 $1$)\n\n| 子任务编号 | 分值 |$n\\le$ | $q\\le$ | 依赖 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ |$10$ | $10$ | 无 | 无 |\n| $2$ | $10$ |$500$ | $500$ | $1$ | 无 |\n| $3$ | $4$ |$2\\times10^3$ | $2\\times10^3$ | $2$ | 无 |\n| $4$ | $20$ |$2\\times10^5$ | $2\\times10^3$ | $3$ | 无 |\n| $5$ | $20$ |$5\\times10^4$ | $5\\times10^4$ | $3$ | 无 |\n| $6$ | $15$ |$2\\times10^5$ | $2\\times10^3$ | 无 | 所有区间都相交 |\n| $7$ | $15$ |$2\\times10^5$ | $2\\times10^5$ | $6$ | 所有区间都相交 |\n| $8$ | $15$ |$2\\times10^5$ | $2\\times10^5$ | $4,5,7$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PumpkinOI Round 1] 种南瓜", "background": "> 秋天到了，又到了收获的季节。", "description": "小 P 要在一段长度为 $n$ 的土地上种魔法南瓜，但是魔法南瓜十分珍贵并且种植它还需要特殊的地质。\n\n所以他对土地进行了 $q$ 次勘测，第 $i$ 次勘测是如下两种结果之一：\n\n`1 l r` : 表示他发现 $[l,r]$ 的土地含有一种全新的元素。\n\n`2 x` : 他发现之前的第 $x$ 次勘测是错误的，所以会删除第 $x$ 次的勘测结果（保证第 $x$ 次操作是之前未被删除的第一种勘测结果）。\n\n魔法南瓜对于地质的要求十分严苛，必须满足对于任意两个区间，它们的关系只能为包含、被包含或不相交。否则，就会因为元素混乱而无法种植魔法南瓜。\n\n请在每次勘测后给出这片土地是否能种植魔法南瓜。\n\n以上的 $[l,r]$ 指的是 $l$ 地块到 $r$ 地块的所有地块。\n\n**形式化题意：**\n\n给你一个标号为 $1 \\dots n$ 的数轴，有 $q$ 次操作：\n\n`1 l r` : 表示在数轴 $l$ 放置左括号，$r$ 放置右括号。\n\n`2 x` : 表示删除第 $x$ 次操作放置的括号。\n\n每次操作后，问能否从数轴 $1$ 到 $n$ 的位置依次取出括号（同一位置的括号应先取出左括号再取出右括号，同种括号可以任意顺序取出）形成一个序列。要求这是一个括号序列，并且该括号序列中任意一对匹配的括号对应该是在同一次操作中放置的。", "inputFormat": "第一行输入两个整数 $n,q$。\n\n接下来 $q$ 行表示有 $q$ 次操作，操作的类型有 $2$ 种，每种操作的输入格式如下：\n\n`1 l r` : 表示他发现 $[l,r]$ 的土地含有一种全新的元素。\n\n`2 x` : 他发现之前的第 $x$ 次勘测是错误的，所以会删除第 $x$ 次的勘测结果（保证第 $x$ 次操作是第一种勘测结果）。", "outputFormat": "对于每次询问，如果可以种植魔法南瓜则输出一行 `YES` ，否则输出一行 `NO` 。\n\n输出的结果大小写不敏感，例如，`yEs`、`Yes`、`yes`、`YES` 都视作肯定的回答。", "hint": "**本题开启子任务捆绑/依赖**\n\n对于所有子任务，$1\\le n,q\\le 2\\times10^5$，$1\\le op\\le 2$，$1\\le l_i\\le r_i\\le n$，$1\\le x_i< q$。（$x_i$ 次操作是之前未被删除的操作 $1$)\n\n| 子任务编号 | 分值 |$n\\le$ | $q\\le$ | 依赖 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ |$10$ | $10$ | 无 | 无 |\n| $2$ | $10$ |$500$ | $500$ | $1$ | 无 |\n| $3$ | $4$ |$2\\times10^3$ | $2\\times10^3$ | $2$ | 无 |\n| $4$ | $20$ |$2\\times10^5$ | $2\\times10^3$ | $3$ | 无 |\n| $5$ | $20$ |$5\\times10^4$ | $5\\times10^4$ | $3$ | 无 |\n| $6$ | $15$ |$2\\times10^5$ | $2\\times10^3$ | 无 | 所有区间都相交 |\n| $7$ | $15$ |$2\\times10^5$ | $2\\times10^5$ | $6$ | 所有区间都相交 |\n| $8$ | $15$ |$2\\times10^5$ | $2\\times10^5$ | $4,5,7$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11620", "type": "P", "difficulty": 6, "samples": [["4 5\n1 14 51 4\n2 1 3 0\n1 2 3 3\n2 1 4 10\n1 1 4 514\n2 3 4 2", "61\n63\n560"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2025", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2025] TEST_34", "background": "", "description": "给你一个长度为 n 的整数序列 $a_1$, $a_2$, $\\ldots$, $a_n$ ，你需要实现以下两种操作，每个操作都可以用四个整数 $opt\\;l\\;r\\;v$ 来表示：\n\n$opt=1$ 时，代表把一个区间 $[l,r]$ 内的所有数都 xor 上 $v$。\n\n$opt=2$ 时， 查询一个区间  $[l,r]$ 内选任意个数（包括 $0$ 个）数 xor 起来，这个值与 $v$ 的最大 xor 和是多少。", "inputFormat": "第一行有两个正整数 $n,m$。\n第二行有 $n$ 个整数表示给你的序列。 \n之后 $m$ 行每行有四个整数 $opt, l, r, v$表示一个操作。", "outputFormat": "对于每个 $opt=2$ 的操作，输出一行一个数表示答案~", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1 \\le n , m \\le 5 \\times 10^4$，值域在 $[0,10^9]$ 之间", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi Easy Round 2025] TEST_34", "background": "", "description": "You are given an integer sequence of length $n$: $a_1$, $a_2$, $\\ldots$, $a_n$. You need to support the following two operations. Each operation can be represented by four integers $opt\\;l\\;r\\;v$:\n\nWhen $opt=1$, it means to xor every number in the interval $[l,r]$ with $v$.\n\nWhen $opt=2$, query the maximum xor value between $v$ and the xor of any chosen numbers (including choosing $0$ numbers) within the interval $[l,r]$.", "inputFormat": "The first line contains two positive integers $n, m$.\nThe second line contains $n$ integers representing the sequence.\nThen there are $m$ lines, each containing four integers $opt, l, r, v$, describing an operation.", "outputFormat": "For each operation with $opt=2$, output one line with one integer representing the answer.", "hint": "Idea: nzhtl1477, Solution: nzhtl1477, Code: nzhtl1477, Data: nzhtl1477.\n\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 5 \\times 10^4$, and the values are in $[0,10^9]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi Easy Round 2025] TEST_34", "background": "", "description": "给你一个长度为 n 的整数序列 $a_1$, $a_2$, $\\ldots$, $a_n$ ，你需要实现以下两种操作，每个操作都可以用四个整数 $opt\\;l\\;r\\;v$ 来表示：\n\n$opt=1$ 时，代表把一个区间 $[l,r]$ 内的所有数都 xor 上 $v$。\n\n$opt=2$ 时， 查询一个区间  $[l,r]$ 内选任意个数（包括 $0$ 个）数 xor 起来，这个值与 $v$ 的最大 xor 和是多少。", "inputFormat": "第一行有两个正整数 $n,m$。\n第二行有 $n$ 个整数表示给你的序列。 \n之后 $m$ 行每行有四个整数 $opt, l, r, v$表示一个操作。", "outputFormat": "对于每个 $opt=2$ 的操作，输出一行一个数表示答案~", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1 \\le n , m \\le 5 \\times 10^4$，值域在 $[0,10^9]$ 之间", "locale": "zh-CN"}}}
{"pid": "P11621", "type": "P", "difficulty": 6, "samples": [["8\n1 8 10 2 2\n2 1 5 3 4\n1 8 5 7 10\n1 1 5 4 10\n1 4 2 1 1\n1 8 5 8 9\n2 2 6 2 9\n1 8 9 2 3", "0\n61"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2025] TEST_139", "background": "", "description": "你需要维护平面上的整点，每个点初始有点权 0，共 $m$ 次操作。\n\n修改操作：给定 $x,y,d,w$，将满足 $X\\ge x,\\;Y\\ge y,\\;X+Y<x+y+d$ 的整点 $(X,Y)$ 的点权增加 $w$；\n\n查询操作：给定 $x_1,x_2,y_1,y_2$，查询满足 $x_1\\le X\\le x_2,\\;y_1\\le Y\\le y_2$ 的整点 $(X,Y)$ 的点权之和，答案对 $2^{30}$ 取模。", "inputFormat": "第一行一个整数 $m$，接下来 $m$ 行，每行表示一个操作。\n\n修改操作表示为 `1 x y d w`；\n\n查询操作表示为 `2 x1 x2 y1 y2`。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示取模后的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $m,x_1,x_2,y_1,y_2,x,y,d,w\\le 50$。\n\n对于另外 $25\\%$ 的数据，满足 $m\\le 2000$。\n\n对于另外 $25\\%$ 的数据，满足修改操作在所有查询操作之前。\n\n对于 $100\\%$ 的数据，满足 $1\\le m\\le 2\\times 10^5$，$1\\le x_1\\le x_2\\le {10}^8$，$1\\le y_1\\le y_2\\le {10}^8$，$1\\le x,y,d,w\\le {10}^8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2025] TEST_139", "background": "", "description": "你需要维护平面上的整点，每个点初始有点权 0，共 $m$ 次操作。\n\n修改操作：给定 $x,y,d,w$，将满足 $X\\ge x,\\;Y\\ge y,\\;X+Y<x+y+d$ 的整点 $(X,Y)$ 的点权增加 $w$；\n\n查询操作：给定 $x_1,x_2,y_1,y_2$，查询满足 $x_1\\le X\\le x_2,\\;y_1\\le Y\\le y_2$ 的整点 $(X,Y)$ 的点权之和，答案对 $2^{30}$ 取模。", "inputFormat": "第一行一个整数 $m$，接下来 $m$ 行，每行表示一个操作。\n\n修改操作表示为 `1 x y d w`；\n\n查询操作表示为 `2 x1 x2 y1 y2`。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示取模后的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $m,x_1,x_2,y_1,y_2,x,y,d,w\\le 50$。\n\n对于另外 $25\\%$ 的数据，满足 $m\\le 2000$。\n\n对于另外 $25\\%$ 的数据，满足修改操作在所有查询操作之前。\n\n对于 $100\\%$ 的数据，满足 $1\\le m\\le 2\\times 10^5$，$1\\le x_1\\le x_2\\le {10}^8$，$1\\le y_1\\le y_2\\le {10}^8$，$1\\le x,y,d,w\\le {10}^8$。", "locale": "zh-CN"}}}
{"pid": "P11622", "type": "P", "difficulty": 6, "samples": [["10 6\n1 4 6 2 10 -3 1 0 13 4\n2 1 10\n0 5 10\n5 1 10\n0 4 8\n-2 6 9\n7 2 9", "7\n10\n8\n8\n11\n7"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2025] TEST_176", "background": "", "description": "你有一个长度为 $n$ 的序列，其中第 $i$ 个元素的值为 $a_i$。\n\n现在有 $q$ 组询问，每组询问给定 $x,l,r$，表示你刚开始有一个数字 $x$ ，然后你从序列的第 $l$ 个位置走到第 $r$ 个位置，每经过一个位置就执行 $x=\\max(x,a_i-x)$。你需要回答每组询问最后 $x$ 的值。", "inputFormat": "第一行两个整数 $n$ 和 $q$，分别表示序列长以及询问数量。\n\n第二行包含 $n$ 个整数，其中第 $i$ 个整数表示序列第 $i$ 个元素的值 $a_i$。\n\n接下来 $q$ 行，每行三个整数 $x,l,r$，含义如题目描述中所示。", "outputFormat": "输出 $q$ 行，每行一个整数，其中第 $i$ 行的整数表示第 $i$ 组询问的答案。", "hint": "### 样例解释\n\n对于第一组询问，$x$ 的值为 $2(初始)→2→2→4→4→6→6→6→6→7→7(最终)$。\n\nIdea：zx2003，Solution：zx2003，Code：zx2003，Data：zx2003\n\n### 限制与约定\n\n对于所有数据，保证 $ 1\\leq n,q\\leq 2\\times 10^5,1\\leq l \\leq r \\leq n，0\\leq |x|,|a_i|\\leq 10^{13}$。\n\n\n| 子任务编号 |   $n,q\\leq$   |           特殊性质            | 子任务分值 |\n| :--------: | :-----------: | :---------------------------: | :--------: |\n|    $1$     |    $1000$     |              无               |    $8$     |\n|    $2$     |    $80000$    |      $-500\\leq x,a_i\\leq 500$      |    $16$    |\n|    $3$     | $2\\times10^5$ | $10^6\\leq x,a_i\\leq 10^6$ 且 $l=1$ |    $25$    |\n|    $4$     | $2\\times10^5$ |             $l=1$             |    $24$    |\n|    $5$     | $2\\times10^5$ |              无               |    $27$    |\n\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2025] TEST_176", "background": "", "description": "你有一个长度为 $n$ 的序列，其中第 $i$ 个元素的值为 $a_i$。\n\n现在有 $q$ 组询问，每组询问给定 $x,l,r$，表示你刚开始有一个数字 $x$ ，然后你从序列的第 $l$ 个位置走到第 $r$ 个位置，每经过一个位置就执行 $x=\\max(x,a_i-x)$。你需要回答每组询问最后 $x$ 的值。", "inputFormat": "第一行两个整数 $n$ 和 $q$，分别表示序列长以及询问数量。\n\n第二行包含 $n$ 个整数，其中第 $i$ 个整数表示序列第 $i$ 个元素的值 $a_i$。\n\n接下来 $q$ 行，每行三个整数 $x,l,r$，含义如题目描述中所示。", "outputFormat": "输出 $q$ 行，每行一个整数，其中第 $i$ 行的整数表示第 $i$ 组询问的答案。", "hint": "### 样例解释\n\n对于第一组询问，$x$ 的值为 $2(初始)→2→2→4→4→6→6→6→6→7→7(最终)$。\n\nIdea：zx2003，Solution：zx2003，Code：zx2003，Data：zx2003\n\n### 限制与约定\n\n对于所有数据，保证 $ 1\\leq n,q\\leq 2\\times 10^5,1\\leq l \\leq r \\leq n，0\\leq |x|,|a_i|\\leq 10^{13}$。\n\n\n| 子任务编号 |   $n,q\\leq$   |           特殊性质            | 子任务分值 |\n| :--------: | :-----------: | :---------------------------: | :--------: |\n|    $1$     |    $1000$     |              无               |    $8$     |\n|    $2$     |    $80000$    |      $-500\\leq x,a_i\\leq 500$      |    $16$    |\n|    $3$     | $2\\times10^5$ | $10^6\\leq x,a_i\\leq 10^6$ 且 $l=1$ |    $25$    |\n|    $4$     | $2\\times10^5$ |             $l=1$             |    $24$    |\n|    $5$     | $2\\times10^5$ |              无               |    $27$    |\n\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11624", "type": "P", "difficulty": 3, "samples": [["1\n1", "1"], ["5\n1 1 1 2 2", "21"], ["10\n1 1 1 2 2 3 3 3 4 4", "78"], ["20\n1 1 2 2 2 2 2 4 4 4 4 3 3 3 4 4 7 7 9 10", "190"], ["50\n1 1 1 1 1 1 1 1 1 2 2 3 4 3 3 4 5 7 2 4 4 3 2 4 6 9 3 8 7 6 12 13 2 12 5 28 17 27 20 36 5 3 2 8 7 6 5 47 26 1", "2336"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "树的遍历"], "title": "[迷宫寻路 Round 3] 挂掉的模板", "background": "**upd : [2025/1/27] Hack 数据已添加。**\n\n某人把 LCA 板子写挂了，然后就有了这道题。", "description": "有一颗 $n$ 个节点的有根树。\n\n定义 `FakeLCA` 函数代码如下：\n\n```cpp\nint FakeLCA(int u, int v) {\n\twhile (u != v) u = fa[u], v = fa[v];\n\treturn u;\n}\n```\n\n其中 `fa[i]` 表示节点 $i$ 的父节点，**特别的，根的父节点是根本身。**\n\n现在给定节点数 $n$ 和每个节点的父节点，问有多少个有序数对 $(u,v)$，满足 $1\\le u,v\\le n$ 且 `FakeLCA(u, v)` 的结果是 $u$ 和 $v$ 的真正的最近公共祖先。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个整数表示节点 $i$ 的父节点。", "outputFormat": "一行一个数表示答案。", "hint": "**提示：请仔细阅读题目中关于根的说明，根节点不一定是 1 号点！**\n\n**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n\\le 10^6$。\n\n| 子任务编号 | $n\\leq$ | 分数 |\n| :----------: | :----------: | :----------: |\n| $0$ | $100$ | $25$ |\n| $1$ | $1000$ | $25$ |\n| $2$ | $7000$ | $25$ |\n| $3$ | $10^6$ | $25$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[迷宫寻路 Round 3] 挂掉的模板", "background": "**upd : [2025/1/27] Hack 数据已添加。**\n\n某人把 LCA 板子写挂了，然后就有了这道题。", "description": "有一颗 $n$ 个节点的有根树。\n\n定义 `FakeLCA` 函数代码如下：\n\n```cpp\nint FakeLCA(int u, int v) {\n\twhile (u != v) u = fa[u], v = fa[v];\n\treturn u;\n}\n```\n\n其中 `fa[i]` 表示节点 $i$ 的父节点，**特别的，根的父节点是根本身。**\n\n现在给定节点数 $n$ 和每个节点的父节点，问有多少个有序数对 $(u,v)$，满足 $1\\le u,v\\le n$ 且 `FakeLCA(u, v)` 的结果是 $u$ 和 $v$ 的真正的最近公共祖先。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个整数表示节点 $i$ 的父节点。", "outputFormat": "一行一个数表示答案。", "hint": "**提示：请仔细阅读题目中关于根的说明，根节点不一定是 1 号点！**\n\n**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n\\le 10^6$。\n\n| 子任务编号 | $n\\leq$ | 分数 |\n| :----------: | :----------: | :----------: |\n| $0$ | $100$ | $25$ |\n| $1$ | $1000$ | $25$ |\n| $2$ | $7000$ | $25$ |\n| $3$ | $10^6$ | $25$ |", "locale": "zh-CN"}}}
{"pid": "P11625", "type": "P", "difficulty": 5, "samples": [["5 1 2\n1 4 2 3 5\n3\n1 5\n1 3\n2 4\n", "6\n2\n2\n"], ["10 2 4\n1 9 2 5 7 3 6 10 4 8\n10\n1 3\n2 4\n3 5\n4 9\n1 10\n2 9\n5 7\n6 9\n2 6\n7 7\n", "0\n1\n0\n7\n17\n12\n1\n2\n4\n0\n"], ["25 3 39\n20 19 18 17 16 15 18 14 13 12 11 19 17 10 9 8 7 9 6 8 5 4 6 7 3\n20\n17 18\n1 10\n20 25\n4 9\n13 15\n6 21\n3 7\n12 17\n18 21\n3 12\n5 17\n3 4\n8 18\n17 22\n19 21\n2 23\n14 22\n13 20\n18 25\n11 20\n", "0\n33\n6\n8\n1\n76\n5\n10\n1\n33\n55\n0\n40\n7\n0\n123\n24\n18\n15\n32\n"], ["25 40 1000\n20 19 18 17 16 15 18 14 13 12 11 19 17 10 9 8 7 9 6 8 5 4 6 7 3\n20\n17 18\n1 10\n20 25\n4 9\n13 15\n6 21\n3 7\n12 17\n18 21\n3 12\n5 17\n3 4\n8 18\n17 22\n19 21\n2 23\n14 22\n13 20\n18 25\n11 20\n", "0\n1\n0\n0\n0\n21\n0\n0\n0\n0\n6\n0\n1\n0\n0\n77\n0\n0\n0\n0\n"], ["5 1 1\n1 2 3 4 5\n3\n1 3\n2 4\n3 5", "0\n0\n0\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "二分", "树状数组", "O2优化", "前缀和", "扫描线"], "title": "[迷宫寻路 Round 3] 迷宫寻路大赛", "background": "", "description": "给定参数 $c,d$ 和一个长度为 $n$ 的序列 $\\{a\\}$。有 $q$ 个区间，对于每个区间 $[l,r]$，求出 $\\sum\\limits_{x=l}^{r} \\sum\\limits_{y=x}^r [c\\le (\\sum\\limits_{i=x}^{y} \\sum\\limits_{j=i+1}^{y} [a_i>a_j])\\le d]$。\n\n注意区别以上两种中括号：\n\n1. $[l,r]$ 代表一个区间。\n2. $[p]$ 为艾弗森括号，其中 $p$ 是一个仅有真假两种取值的表达式。若 $p$ 为真，则 $[p]=1$，否则 $[p]=0$。\n\n通俗的讲，对于每个区间 $[l,r]$，求出区间内有多少非空子区间的逆序对个数在 $c$ 到 $d$ 之间（含 $c$ 和 $d$）。", "inputFormat": "第一行包含三个正整数 $n,c,d$。\n\n第二行包含 $n$ 个正整数，第 $i$ 个正整数表示序列第 $i$ 项 $a_i$。\n\n第三行一个整数 $q$，表示区间个数。\n\n接下来的 $q$ 行，第 $i$ 行包含两个正整数 $l_i,r_i$，表示第 $i$ 个区间。\n\n\n", "outputFormat": "输出 $q$ 行，第 $i$ 行表示对于第 $i$ 个区间，这个区间内有多少非空子区间的逆序对个数在 $c$ 到 $d$ 之间（含 $c$ 和 $d$）。", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n,q,a_i\\le 5\\times 10^5$，$1\\le c,d\\le 10^{12}$，对于每个 $1\\le i\\le q$，满足 $1\\le l_i\\le r_i\\le n$。\n\n| 子任务编号 | $n\\leq$ | $q\\leq$ | 分数 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | $10$ | $5$ |\n| $1$ | $100$ | $100$ | $10$ |\n| $2$ | $1000$ | $1000$ | $10$ |\n| $3$ | $5000$ | $5000$ | $15$ |\n| $4$ | $50000$ | $50000$ | $25$ |\n| $5$ | $5\\times 10^5$ | $5\\times 10^5$ | $35$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[迷宫寻路 Round 3] 迷宫寻路大赛", "background": "", "description": "给定参数 $c,d$ 和一个长度为 $n$ 的序列 $\\{a\\}$。有 $q$ 个区间，对于每个区间 $[l,r]$，求出 $\\sum\\limits_{x=l}^{r} \\sum\\limits_{y=x}^r [c\\le (\\sum\\limits_{i=x}^{y} \\sum\\limits_{j=i+1}^{y} [a_i>a_j])\\le d]$。\n\n注意区别以上两种中括号：\n\n1. $[l,r]$ 代表一个区间。\n2. $[p]$ 为艾弗森括号，其中 $p$ 是一个仅有真假两种取值的表达式。若 $p$ 为真，则 $[p]=1$，否则 $[p]=0$。\n\n通俗的讲，对于每个区间 $[l,r]$，求出区间内有多少非空子区间的逆序对个数在 $c$ 到 $d$ 之间（含 $c$ 和 $d$）。", "inputFormat": "第一行包含三个正整数 $n,c,d$。\n\n第二行包含 $n$ 个正整数，第 $i$ 个正整数表示序列第 $i$ 项 $a_i$。\n\n第三行一个整数 $q$，表示区间个数。\n\n接下来的 $q$ 行，第 $i$ 行包含两个正整数 $l_i,r_i$，表示第 $i$ 个区间。\n\n\n", "outputFormat": "输出 $q$ 行，第 $i$ 行表示对于第 $i$ 个区间，这个区间内有多少非空子区间的逆序对个数在 $c$ 到 $d$ 之间（含 $c$ 和 $d$）。", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n,q,a_i\\le 5\\times 10^5$，$1\\le c,d\\le 10^{12}$，对于每个 $1\\le i\\le q$，满足 $1\\le l_i\\le r_i\\le n$。\n\n| 子任务编号 | $n\\leq$ | $q\\leq$ | 分数 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | $10$ | $5$ |\n| $1$ | $100$ | $100$ | $10$ |\n| $2$ | $1000$ | $1000$ | $10$ |\n| $3$ | $5000$ | $5000$ | $15$ |\n| $4$ | $50000$ | $50000$ | $25$ |\n| $5$ | $5\\times 10^5$ | $5\\times 10^5$ | $35$ |\n", "locale": "zh-CN"}}}
{"pid": "P11626", "type": "P", "difficulty": 5, "samples": [["7\n3 4 2 5 6 3 4\n", "27\n"], ["10\n9 9 9 8 8 8 72 72 72 2\n", "20040"], ["20\n3 5 5 5 7 15 20 14 28 9 36 3 4 5 7 19 16 28 37 29\n", "3207876\n"], ["30\n1 9 8 8 8 3 3 4 2 2 3 3 9 8 8 6 6 7 3 3 6 6 8 8 4 3 3 6 6 8", "34595704"], ["50\n9 9 9 9 63 72 36 36 4 4 4 20 20 20 10 10 70 2 12 9 9 9 9 63 72 36 36 4 4 4 20 20 20 10 10 70 2 12 9 9 9 9 63 72 36 36 4 4 4 4", "24688627"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "二分", "O2优化", "最大公约数 gcd", "ST 表"], "title": "[迷宫寻路 Round 3] 七连击", "background": "**任何数和 $0$ 的最大公约数是它本身。**", "description": "小 X 正在研究一个长度为 $n$ 的数列 $\\{A\\}$，他通过查阅资料，偶然间发现了一个叫做“七连击”的式子：$\\sum\\limits_{a=1}^n\\sum\\limits_{b=a+1}^n\\sum\\limits_{c=b+1}^n\\sum\\limits_{d=c+1}^n\\sum\\limits_{e=d+1}^n\\sum\\limits_{f=e+1}^n\\sum\\limits_{g=f+1}^n ((\\gcd\\limits_{i=1}^aA_i)+(\\gcd\\limits_{i=a+1}^bA_i)+(\\gcd\\limits_{i=b+1}^cA_i)+(\\gcd\\limits_{i=c+1}^dA_i)+(\\gcd\\limits_{i=d+1}^eA_i)+(\\gcd\\limits_{i=e+1}^fA_i)+(\\gcd\\limits_{i=f+1}^gA_i))$。\n\n其中 $(\\gcd\\limits_{i=l}^r A_i)$ 表示 $A_l,A_{l+1},\\dots,A_r$ 的最大公约数。\n\n现在小 X 希望你求出这个式子的值。\n由于答案可能很大，他只需要你输出答案对 $998244353$ 取模的结果。", "inputFormat": "第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数表示序列 $\\{A\\}$。", "outputFormat": "一行一个整数表示答案对 $998244353$ 取模的结果。", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，$7\\le n\\le 10^5$，$0\\le A_i\\le 10^9$。\n\n| 子任务编号 | $n\\leq$ | $A_i\\leq$ | 特殊性质 | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $7$ | $10^9$ | 否 | $1$ |\n| $1$ | $10$ | $10^9$ | 否 | $9$ |\n| $2$ | $100$ | $10^9$ | 否 | $10$ |\n| $3$ | $1000$ | $10^9$ | 否 | $20$ |\n| $4$ | $10^5$ | $100$ | 否 | $10$ |\n| $5$ | $10^5$ | $10^9$ | 是 | $10$ |\n| $6$ | $10^5$ | $10^9$ | 否 | $40$ |\n\n特殊性质： 对于任意满足 $1\\le i\\le n$ 的整数 $i$，$A_i$ 在 $[0,10^9]$ 中随机生成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[迷宫寻路 Round 3] 七连击", "background": "**任何数和 $0$ 的最大公约数是它本身。**", "description": "小 X 正在研究一个长度为 $n$ 的数列 $\\{A\\}$，他通过查阅资料，偶然间发现了一个叫做“七连击”的式子：$\\sum\\limits_{a=1}^n\\sum\\limits_{b=a+1}^n\\sum\\limits_{c=b+1}^n\\sum\\limits_{d=c+1}^n\\sum\\limits_{e=d+1}^n\\sum\\limits_{f=e+1}^n\\sum\\limits_{g=f+1}^n ((\\gcd\\limits_{i=1}^aA_i)+(\\gcd\\limits_{i=a+1}^bA_i)+(\\gcd\\limits_{i=b+1}^cA_i)+(\\gcd\\limits_{i=c+1}^dA_i)+(\\gcd\\limits_{i=d+1}^eA_i)+(\\gcd\\limits_{i=e+1}^fA_i)+(\\gcd\\limits_{i=f+1}^gA_i))$。\n\n其中 $(\\gcd\\limits_{i=l}^r A_i)$ 表示 $A_l,A_{l+1},\\dots,A_r$ 的最大公约数。\n\n现在小 X 希望你求出这个式子的值。\n由于答案可能很大，他只需要你输出答案对 $998244353$ 取模的结果。", "inputFormat": "第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数表示序列 $\\{A\\}$。", "outputFormat": "一行一个整数表示答案对 $998244353$ 取模的结果。", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，$7\\le n\\le 10^5$，$0\\le A_i\\le 10^9$。\n\n| 子任务编号 | $n\\leq$ | $A_i\\leq$ | 特殊性质 | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $7$ | $10^9$ | 否 | $1$ |\n| $1$ | $10$ | $10^9$ | 否 | $9$ |\n| $2$ | $100$ | $10^9$ | 否 | $10$ |\n| $3$ | $1000$ | $10^9$ | 否 | $20$ |\n| $4$ | $10^5$ | $100$ | 否 | $10$ |\n| $5$ | $10^5$ | $10^9$ | 是 | $10$ |\n| $6$ | $10^5$ | $10^9$ | 否 | $40$ |\n\n特殊性质： 对于任意满足 $1\\le i\\le n$ 的整数 $i$，$A_i$ 在 $[0,10^9]$ 中随机生成。", "locale": "zh-CN"}}}
{"pid": "P11627", "type": "P", "difficulty": 6, "samples": [["5\n1 2\n1 3\n2 4\n2 5", "280\n3\n3 4 1 2"], ["7\n5 1\n1 7\n6 2\n2 1\n4 5\n3 2", "1106\n4\n5 1 2 4 6 3"], ["10\n3 6\n7 3\n8 10\n5 9\n9 1\n4 8\n1 8\n2 3\n6 10", "5240\n5\n4 1 6 9 8 2 7 3 5"], ["10\n1 2\n1 3\n3 4\n3 5\n2 6\n6 7\n7 8\n8 9\n9 10", "5660\n10\n4 3 1 2 5 6 7 8 9"], ["20\n5 18\n16 11\n6 15\n7 14\n8 7\n10 20\n3 4\n14 6\n9 8\n18 11\n17 4\n11 10\n4 11\n2 13\n13 12\n12 15\n15 20\n19 9\n1 8", "79480\n19\n1 2 14 16 17 12 3 15 18 7 4 11 9 5 8 10 13 19 6"], ["10\n7 8\n3 2\n6 7\n2 10\n8 3\n4 1\n9 2\n1 3\n5 7\n", "4340\n5\n8 6 1 2 7 3 4 5 9 "], ["见附件", "见附件"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "线段树", "平衡树", "树状数组", "O2优化", "树的遍历"], "title": "[迷宫寻路 Round 3] 游戏", "background": "", "description": "小 L 正在玩游戏，游戏地图是一棵 $n$ 个节点的树，定义一条树上路径的长度为路径上所有边的边权之和，路径可以重复经过点和边。特别的，若路径不包含任何边，则其长度为 $0$。\n\n小 L 会选择一个点作为必经点 $t$，接着，小 L 会设置每条边的边权，使得边的边权构成一个 $1$ 到 $n-1$ 的**排列**。\n\n定义：小 L 的得分为 $\\sum_{1 \\leq u,v \\leq n} \\operatorname{dist}(u,v)$，其中 $\\operatorname{dist}(u,v)$ 为在经过必经点 $t$ 的前提下，长度**最小的**从 $u$ 到 $v$ 的路径的长度。\n\n小 L 希望最大化自己的得分，请你解答以下问题：\n\n第一问：求他得分的**最大值**对 $998244353$ 取模的值。\n\n第二问：求若要最大化他的得分，小 L 应该选择的必经点 $t$ 和小 L 每条边应设置的边权。\n", "inputFormat": "一行一个整数 $n$，表示节点数。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$ 表示树上一条连接点 $u$ 和点 $v$ 的边。", "outputFormat": "输出共三行。\n\n第一行一个整数，表示【小 L 得分的最大值】对 $998244353$ 取模的值。\n\n第二行一个整数，表示小 L 应该选择的必经点 $t$，如有多种 $t$ 符合题意，请输出最小的 $t$。\n\n第三行 $n-1$ 个整数，**按边的输入顺序**依次给出小 L 每条边应设置的边权。如有多种答案，请输出边权的字典序最小的答案。\n\n注意：在小 L 得分最大的前提下，请首先最小化 $t$，其次最小化边权的字典序。\n\n这里“边权的字典序”是指按边的输入顺序将边的边权看作一个排列，这个排列的字典序。", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n\\le 10^5$。\n\n| 子任务编号 | $n\\leq$ | 特殊性质 1 | 特殊性质 2 | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $50$ | 否 | 否 | $10$ |\n| $1$ | $1000$ | 否 | 否 | $20$ |\n| $2$ | $10^5$ | 是 | 否 | $10$ |\n| $3$ | $10^5$ | 否 | 是 | $10$ |\n| $4$ | $10^5$ | 否 | 否 | $50$ |\n\n特殊性质 1：存在一个对点重标号的方案，使得第 $i$ 条边为 $(1,i+1)$。\n\n特殊性质 2：存在一个对点重标号的方案，使得第 $i$ 条边为 $(i,i+1)$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[迷宫寻路 Round 3] 游戏", "background": "", "description": "小 L 正在玩游戏，游戏地图是一棵 $n$ 个节点的树，定义一条树上路径的长度为路径上所有边的边权之和，路径可以重复经过点和边。特别的，若路径不包含任何边，则其长度为 $0$。\n\n小 L 会选择一个点作为必经点 $t$，接着，小 L 会设置每条边的边权，使得边的边权构成一个 $1$ 到 $n-1$ 的**排列**。\n\n定义：小 L 的得分为 $\\sum_{1 \\leq u,v \\leq n} \\operatorname{dist}(u,v)$，其中 $\\operatorname{dist}(u,v)$ 为在经过必经点 $t$ 的前提下，长度**最小的**从 $u$ 到 $v$ 的路径的长度。\n\n小 L 希望最大化自己的得分，请你解答以下问题：\n\n第一问：求他得分的**最大值**对 $998244353$ 取模的值。\n\n第二问：求若要最大化他的得分，小 L 应该选择的必经点 $t$ 和小 L 每条边应设置的边权。\n", "inputFormat": "一行一个整数 $n$，表示节点数。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$ 表示树上一条连接点 $u$ 和点 $v$ 的边。", "outputFormat": "输出共三行。\n\n第一行一个整数，表示【小 L 得分的最大值】对 $998244353$ 取模的值。\n\n第二行一个整数，表示小 L 应该选择的必经点 $t$，如有多种 $t$ 符合题意，请输出最小的 $t$。\n\n第三行 $n-1$ 个整数，**按边的输入顺序**依次给出小 L 每条边应设置的边权。如有多种答案，请输出边权的字典序最小的答案。\n\n注意：在小 L 得分最大的前提下，请首先最小化 $t$，其次最小化边权的字典序。\n\n这里“边权的字典序”是指按边的输入顺序将边的边权看作一个排列，这个排列的字典序。", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n\\le 10^5$。\n\n| 子任务编号 | $n\\leq$ | 特殊性质 1 | 特殊性质 2 | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $50$ | 否 | 否 | $10$ |\n| $1$ | $1000$ | 否 | 否 | $20$ |\n| $2$ | $10^5$ | 是 | 否 | $10$ |\n| $3$ | $10^5$ | 否 | 是 | $10$ |\n| $4$ | $10^5$ | 否 | 否 | $50$ |\n\n特殊性质 1：存在一个对点重标号的方案，使得第 $i$ 条边为 $(1,i+1)$。\n\n特殊性质 2：存在一个对点重标号的方案，使得第 $i$ 条边为 $(i,i+1)$。\n", "locale": "zh-CN"}}}
{"pid": "P11628", "type": "P", "difficulty": 4, "samples": [["2\n2 90\n60 20\n70 30\n2 10\n3 5\n6 6\n", "Yes\nNo\n"], ["见附件", "见附件"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2025", "WC"], "title": "[WC2025] 猫粮", "background": null, "description": "你的家里养了 $n$ 只小猫。到了饭点，你的猫都饿了，每一只都需要吃至少 $m$ 克的猫粮才能吃饱。\n\n你的家里有两种猫粮：优质猫粮和普通猫粮。\n\n- 优质猫粮的味道非常好，所以当你打开一袋优质猫粮后，所有没吃饱的小猫会来争抢，最后所有没吃饱的小猫中**任意**一只猫都有可能抢走这袋猫粮，并吃掉其中的所有猫粮。\n- 普通猫粮的味道一般，所以当你打开一袋猫粮放在某一只小猫面前时，其他小猫不会争抢，而这只小猫会吃掉这个袋子里的所有猫粮。\n\n在这两种情况下，即使占有猫粮的小猫只需要吃掉这袋猫粮的一部分就能吃饱，它也会吃掉整袋猫粮。\n\n你有 $n$ 袋优质猫粮，其中第 $i$ 袋里有 $a_i$ 克；你还有 $n$ 袋普通猫粮，其中第 $i$ 袋里有 $b_i$ 克。所有猫粮加在一起的重量恰好等于 $n\\times m$，也就是所有小猫吃饱所需要的猫粮重量。同时，**所有袋子里的猫粮的重量都是 $1$ 至 $m-1$ 之间的整数**。\n\n为了喂饱所有小猫，你每次可以选择一袋猫粮打开，等待这袋猫粮被吃完之后再打开下一袋，直到所有猫粮都被吃完。你可以根据此时猫粮的食用情况决定之后猫粮的打开顺序以及将普通猫粮放在哪一只猫面前。你想知道，是否存在一种喂猫粮的方案，使得在每次打开优质猫粮时无论哪只没吃饱的猫抢到了猫粮，最终所有猫都能吃饱。", "inputFormat": "**本题有多组测试数据**。  \n输入的第一行包含一个正整数 $T$ 表示数据组数。  \n接下来依次输入每组测试数据，对于每组测试数据：  \n第一行包含两个正整数 $n$ 和 $m$ 表示猫的数量以及每只猫需要的猫粮克数。  \n第二行包含 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 描述 $n$ 袋优质猫粮的重量。  \n第三行包含 $n$ 个整数 $b_1,b_2,\\cdots,b_n$ 描述 $n$ 袋普通猫粮的重量。", "outputFormat": "对于每组测试数据输出一行包含一个字符串，如果存在满足条件的方案输出 `Yes`，否则输出 `No`。", "hint": "### 样例解释\n\n#### 样例 $1$ 解释\n\n第一组数据中，可以先打开重量为 $60$ 克的优质猫粮。无论被哪一只小猫吃掉，打开重量为 $30$ 克的普通猫粮喂给同一只小猫，这样这只小猫就吃饱了。\n\n接下来打开重量为 $20$ 的优质猫粮，被剩下的小猫吃掉。\n\n最后打开重量为 $70$ 的普通猫粮给这只小猫吃，这样两只小猫都吃到了 $90$ 克猫粮，就都吃饱了。\n\n第二组数据中，可以证明不存在可以喂饱所有小猫的方案。\n\n#### 样例 $2$ 解释\n\n该样例满足特殊性质 $\\text{B}$。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 50$;\n- $1 \\le n \\le 40000，2 \\le m \\le 10^5$;\n- 对于任意的 $1 \\le i \\le n$，有 $1 \\le a_i, b_i \\le m − 1$;\n- $\\displaystyle \\sum_{i=1}^na_i+\\sum_{i=1}^n b_i=nm$。\n\n::cute-table\n\n|    测试点编号    |     $n\\le$     | 特殊性质 |\n| :---------: | :------------: | :--: |\n|     $1$     |       $1$      |   无  |\n|  $2\\sim 4$  |       $2$      |   ^  |\n|  $5\\sim 7$  |       $5$      |   ^  |\n|    $8,9$    | $4\\times 10^4$ |   A  |\n| $10\\sim 16$ |        ^       |   B  |\n| $17\\sim 20$ |        ^       |   无  |\n\n特殊性质 A：保证 $m=3$。\n\n特殊性质 B：保证任意两袋猫粮的重量互不相同，即对于任意的 $1\\le i\\lt j\\le n$，保证 $a_i\\neq a_j$，$b_i\\neq b_j$ 且对于任意的 $1\\le i,j\\le n$，保证 $a_i\\neq b_j$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2025] 猫粮", "background": null, "description": "你的家里养了 $n$ 只小猫。到了饭点，你的猫都饿了，每一只都需要吃至少 $m$ 克的猫粮才能吃饱。\n\n你的家里有两种猫粮：优质猫粮和普通猫粮。\n\n- 优质猫粮的味道非常好，所以当你打开一袋优质猫粮后，所有没吃饱的小猫会来争抢，最后所有没吃饱的小猫中**任意**一只猫都有可能抢走这袋猫粮，并吃掉其中的所有猫粮。\n- 普通猫粮的味道一般，所以当你打开一袋猫粮放在某一只小猫面前时，其他小猫不会争抢，而这只小猫会吃掉这个袋子里的所有猫粮。\n\n在这两种情况下，即使占有猫粮的小猫只需要吃掉这袋猫粮的一部分就能吃饱，它也会吃掉整袋猫粮。\n\n你有 $n$ 袋优质猫粮，其中第 $i$ 袋里有 $a_i$ 克；你还有 $n$ 袋普通猫粮，其中第 $i$ 袋里有 $b_i$ 克。所有猫粮加在一起的重量恰好等于 $n\\times m$，也就是所有小猫吃饱所需要的猫粮重量。同时，**所有袋子里的猫粮的重量都是 $1$ 至 $m-1$ 之间的整数**。\n\n为了喂饱所有小猫，你每次可以选择一袋猫粮打开，等待这袋猫粮被吃完之后再打开下一袋，直到所有猫粮都被吃完。你可以根据此时猫粮的食用情况决定之后猫粮的打开顺序以及将普通猫粮放在哪一只猫面前。你想知道，是否存在一种喂猫粮的方案，使得在每次打开优质猫粮时无论哪只没吃饱的猫抢到了猫粮，最终所有猫都能吃饱。", "inputFormat": "**本题有多组测试数据**。  \n输入的第一行包含一个正整数 $T$ 表示数据组数。  \n接下来依次输入每组测试数据，对于每组测试数据：  \n第一行包含两个正整数 $n$ 和 $m$ 表示猫的数量以及每只猫需要的猫粮克数。  \n第二行包含 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 描述 $n$ 袋优质猫粮的重量。  \n第三行包含 $n$ 个整数 $b_1,b_2,\\cdots,b_n$ 描述 $n$ 袋普通猫粮的重量。", "outputFormat": "对于每组测试数据输出一行包含一个字符串，如果存在满足条件的方案输出 `Yes`，否则输出 `No`。", "hint": "### 样例解释\n\n#### 样例 $1$ 解释\n\n第一组数据中，可以先打开重量为 $60$ 克的优质猫粮。无论被哪一只小猫吃掉，打开重量为 $30$ 克的普通猫粮喂给同一只小猫，这样这只小猫就吃饱了。\n\n接下来打开重量为 $20$ 的优质猫粮，被剩下的小猫吃掉。\n\n最后打开重量为 $70$ 的普通猫粮给这只小猫吃，这样两只小猫都吃到了 $90$ 克猫粮，就都吃饱了。\n\n第二组数据中，可以证明不存在可以喂饱所有小猫的方案。\n\n#### 样例 $2$ 解释\n\n该样例满足特殊性质 $\\text{B}$。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 50$;\n- $1 \\le n \\le 40000，2 \\le m \\le 10^5$;\n- 对于任意的 $1 \\le i \\le n$，有 $1 \\le a_i, b_i \\le m − 1$;\n- $\\displaystyle \\sum_{i=1}^na_i+\\sum_{i=1}^n b_i=nm$。\n\n::cute-table\n\n|    测试点编号    |     $n\\le$     | 特殊性质 |\n| :---------: | :------------: | :--: |\n|     $1$     |       $1$      |   无  |\n|  $2\\sim 4$  |       $2$      |   ^  |\n|  $5\\sim 7$  |       $5$      |   ^  |\n|    $8,9$    | $4\\times 10^4$ |   A  |\n| $10\\sim 16$ |        ^       |   B  |\n| $17\\sim 20$ |        ^       |   无  |\n\n特殊性质 A：保证 $m=3$。\n\n特殊性质 B：保证任意两袋猫粮的重量互不相同，即对于任意的 $1\\le i\\lt j\\le n$，保证 $a_i\\neq a_j$，$b_i\\neq b_j$ 且对于任意的 $1\\le i,j\\le n$，保证 $a_i\\neq b_j$。", "locale": "zh-CN"}}}
{"pid": "P11629", "type": "P", "difficulty": 7, "samples": [["0 2\n3 1\n4 2 3\n2 2\n1 3\n", "3\n1\n2\n1 3\n2 1\n2\n1\n1\n1\n2\n"], ["见附件", "见附件"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "Special Judge", "WC"], "title": "[WC2025] Nim 游戏", "background": "WC 2025 d1t2。", "description": "小 w 被迫卷入了一场决定一切的 Nim 游戏！\n\n有 $n$ 堆石子摆在小 w 面前，从 $1$ 到 $n$ 编号，其中编号为 $i$ 的石子堆中有 $a_i$ 个石子。在 Nim 游戏中，小 w 和一位绝顶聪明的对手轮流操作，小 w 后手。每次操作中，操作方可以选择一堆石子，将这一堆石子中任意多的石子扔掉，但不能不扔。如果某个人操作时，所有 $n$ 堆石子中都没有石子了，那么他就无法操作，从而失败。\n\n熟练掌握 OI 知识的小 w 知道 Nim 游戏的最优策略，还知道两个玩家都以最优策略操作时，后手获胜当且仅当所有 $a_i$ 的按位异或和为 $0$。然而初始局面不一定满足这个条件，于是小 w 决定用些盘外招让所有 $a_i$ 的异或和为 $0$，然后赢下这盘游戏。为此小 w 准备了很多石子，他可以在游戏开始前在每个石子堆上添加任意多（也可以不添加）石子。然而小 w 不能从石子堆里取走石子，也不能创建新的石子堆。\n\n小 w 请你提供添加石子的方案。为了保持隐蔽，小 w 希望添加尽可能少的石子，所以他首先想要知道最少需要添加多少石子。除此之外他还希望准备 $m$ 套不同的添加石子数最少的方案，以备不时之需。我们认为两种方案不同，当且仅当存在某堆石子，在这两种方案中该堆石子所添加的石子数量不同。如果这样的方案没有 $m$ 种，则你需要全部告诉他；如果这样的方案大于 $m$ 种，则你任意给出 $m$ 种即可。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含两个整数 $c,T$，分别表示测试点编号与测试数据组数。对于样例有 $c = 0$。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n第一行包含两个整数 $n$ 和 $m$，分别表示石子堆的数量以及小 w 需要的方案数量。\n\n第二行包含 $n$ 个非负整数 $a_1, a_2, \\cdots , a_n$，描述每堆石子的石子数量。", "outputFormat": "对于每组测试数据：\n\n- 输出的第一行包含一个整数 $k$，表示小 w 最少需要添加多少石子。\n- 输出的第二行包含一个整数 $m'$，表示你提供给小 w 的方案数量。如果添加石子最少的方案数不少于 $m$，你需要保证 $m' = m$，否则你需要保证 $m'$ 恰好是添加石子最少的方案数。\n- 接下来依次输出 $m'$ 个不同的方案，对于每个方案输出三行，其中：\n  - 第一行包含一个整数 $n'$，表示该方案中添加了石子的石子堆数量。\n  - 第二行包含 $n'$ 个整数 $x_1, x_2,\\cdots , x_n'$，描述该方案中添加了石子的石子堆编号。你需要保证 $1 \\le x_1 \\lt x_2 \\lt \\cdots \\lt x_{n'} \\le n$。当 $n' = 0$ 时，这一行需要为空行。\n  - 第三行包含 $n'$ 个整数 $w_1,w_2,\\cdots ,w_{n'}$，其中 $w_j(1 \\le j \\le n')$ 表示该方案中在编号为 $x_j$ 的石子堆中添加的石子数量。你需要保证对于任意的 $1 \\le j \\le n'$，有 $w_j \\ge 1$ 且 $\\sum_{j=1}^{n'} w_j=k$。当 $n' = 0$ 时，这一行需要为空行。\n\n你需要保证在单个测试点内输出的整数数量不超过 $10^7$，可以保证总是存在这样的输出满足题目条件。", "hint": "### 样例解释\n\n#### 样例 $1$ 解释\n\n对于第一组数据，小 w 共有两种使添加石子总数最小的方案：\n\n- 给编号为 $1$ 的石子堆添加 $2$ 个石子，给编号为 $3$ 的石子堆添加 $1$ 个石子。此时三堆石子数分别是 $6, 2, 4$，后手必胜。\n- 给编号为 $3$ 的石子堆添加 $3$ 个石子。此时三堆石子数分别是 $4, 2, 6$，后手必胜。\n\n由于小 w 只需要一种方案，输出任意一种方案均可，样例输出为第一种。\n\n对于第二组数据，小 w 只有一种使添加石子总数最小的方案：\n\n- 给编号为 $1$ 的石子堆添加 $2$ 个石子。此时两堆石子的石子分别是 $3, 3$，此时后手必胜。\n\n尽管小 w 需要两种方案，但由于总方案只有一种，故输出唯一的一种方案即可。\n\n### 数据范围\n\n设 $\\sum n$ 和 $\\sum m$ 分别表示单个测试点的所有测试数据中 $n$ 和 $m$ 的和。\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 2 \\times 10^4$；\n- $2 \\le n \\le 10^5$，$2 \\le \\sum n \\le 2 \\times 10^5$，$1 \\le m,\\sum m \\le 2 \\times 10^4$；\n- 对于任意的 $1 \\le i \\le n$，有 $0 \\le a_i \\le 2^{60} − 1$；\n- $\\displaystyle \\sum_{i=1}^{n} a_i \\ge 1$。\n\n::cute-table\n|   测试点编号  |  $n \\le$ |  $\\sum n \\le$ |   $m \\le$ |  $\\sum m \\le$ |  $a_i \\le$ | 特殊性质 |\n| :------: | :--: | :----: | :----: | :----: | :------: | :--: |\n|     1    |   $2$  |  $10^5$  |  $10^4$  |  $10^4$  | $2^{30} - 1$ |   无  |\n|  $2 \\sim 4$  |   $5$  |   $25$   |  $10^4$  |  $10^4$  |  $2^{4} - 1$ |   B  |\n|  $5 \\sim 7$  |   $6$  |   $30$   |    ^   |    ^   | $2^{10} - 1$ |   ^  |\n|  $8 \\sim 10$ | $10^5$ | $2 \\times 10^5$ |    ^   |    ^   |     $2^{30} - 1$    |   A  |\n| $11 \\sim 13$ |   ^  |    ^   |    $1$   |    ^   |     ^    |   B  |\n| $14 \\sim 17$ | $10^3$ | $2 \\times 10^3$ |  $10^2$  |  $10^2$  |     ^    |   ^  |\n| $18 \\sim 21$ | $10^5$ | $2 \\times 10^5$ |  $10^4$  |  $10^4$  |     ^    |   ^  |\n|  $22, 23$  |   ^  |    ^   |    ^   |    ^   |     ^    |   无  |\n|  $24, 25$  |   ^  |    ^   | $2 \\times 10^4$ | $2 \\times 10^4$ | $2^{60} - 1$ |   ^  |\n\n- 特殊性质 A：对于任意的 $1\\le i\\le n$，$a_i$ 都是 $2$ 的非负整数幂次。\n- 特殊性质 B：$a_1=0$。\n\n### 评分方式\n\n对于每个测试点，如果你在所有测试数据中都正确地输出了小 w 需要的最小石子\n数量（即输出格式中的 $k$），你将获得该测试点 $50\\%$ 的分数。在此基础上，如果你在所有测试数据中都按照要求给出了方案，你将获得该测试点 $100\\%$ 的分数。\n\n注意，即使你只想回答小 w 需要的最小石子数量，也需要在回答的小 w 需要的最小石子数量后按照给定的格式输出方案数量以及**对应数量的，正确的，不重复的**方案。简单地输出 $m' = 0$ 即可完成这一点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2025] Nim 游戏", "background": "WC 2025 d1t2。", "description": "小 w 被迫卷入了一场决定一切的 Nim 游戏！\n\n有 $n$ 堆石子摆在小 w 面前，从 $1$ 到 $n$ 编号，其中编号为 $i$ 的石子堆中有 $a_i$ 个石子。在 Nim 游戏中，小 w 和一位绝顶聪明的对手轮流操作，小 w 后手。每次操作中，操作方可以选择一堆石子，将这一堆石子中任意多的石子扔掉，但不能不扔。如果某个人操作时，所有 $n$ 堆石子中都没有石子了，那么他就无法操作，从而失败。\n\n熟练掌握 OI 知识的小 w 知道 Nim 游戏的最优策略，还知道两个玩家都以最优策略操作时，后手获胜当且仅当所有 $a_i$ 的按位异或和为 $0$。然而初始局面不一定满足这个条件，于是小 w 决定用些盘外招让所有 $a_i$ 的异或和为 $0$，然后赢下这盘游戏。为此小 w 准备了很多石子，他可以在游戏开始前在每个石子堆上添加任意多（也可以不添加）石子。然而小 w 不能从石子堆里取走石子，也不能创建新的石子堆。\n\n小 w 请你提供添加石子的方案。为了保持隐蔽，小 w 希望添加尽可能少的石子，所以他首先想要知道最少需要添加多少石子。除此之外他还希望准备 $m$ 套不同的添加石子数最少的方案，以备不时之需。我们认为两种方案不同，当且仅当存在某堆石子，在这两种方案中该堆石子所添加的石子数量不同。如果这样的方案没有 $m$ 种，则你需要全部告诉他；如果这样的方案大于 $m$ 种，则你任意给出 $m$ 种即可。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含两个整数 $c,T$，分别表示测试点编号与测试数据组数。对于样例有 $c = 0$。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n第一行包含两个整数 $n$ 和 $m$，分别表示石子堆的数量以及小 w 需要的方案数量。\n\n第二行包含 $n$ 个非负整数 $a_1, a_2, \\cdots , a_n$，描述每堆石子的石子数量。", "outputFormat": "对于每组测试数据：\n\n- 输出的第一行包含一个整数 $k$，表示小 w 最少需要添加多少石子。\n- 输出的第二行包含一个整数 $m'$，表示你提供给小 w 的方案数量。如果添加石子最少的方案数不少于 $m$，你需要保证 $m' = m$，否则你需要保证 $m'$ 恰好是添加石子最少的方案数。\n- 接下来依次输出 $m'$ 个不同的方案，对于每个方案输出三行，其中：\n  - 第一行包含一个整数 $n'$，表示该方案中添加了石子的石子堆数量。\n  - 第二行包含 $n'$ 个整数 $x_1, x_2,\\cdots , x_n'$，描述该方案中添加了石子的石子堆编号。你需要保证 $1 \\le x_1 \\lt x_2 \\lt \\cdots \\lt x_{n'} \\le n$。当 $n' = 0$ 时，这一行需要为空行。\n  - 第三行包含 $n'$ 个整数 $w_1,w_2,\\cdots ,w_{n'}$，其中 $w_j(1 \\le j \\le n')$ 表示该方案中在编号为 $x_j$ 的石子堆中添加的石子数量。你需要保证对于任意的 $1 \\le j \\le n'$，有 $w_j \\ge 1$ 且 $\\sum_{j=1}^{n'} w_j=k$。当 $n' = 0$ 时，这一行需要为空行。\n\n你需要保证在单个测试点内输出的整数数量不超过 $10^7$，可以保证总是存在这样的输出满足题目条件。", "hint": "### 样例解释\n\n#### 样例 $1$ 解释\n\n对于第一组数据，小 w 共有两种使添加石子总数最小的方案：\n\n- 给编号为 $1$ 的石子堆添加 $2$ 个石子，给编号为 $3$ 的石子堆添加 $1$ 个石子。此时三堆石子数分别是 $6, 2, 4$，后手必胜。\n- 给编号为 $3$ 的石子堆添加 $3$ 个石子。此时三堆石子数分别是 $4, 2, 6$，后手必胜。\n\n由于小 w 只需要一种方案，输出任意一种方案均可，样例输出为第一种。\n\n对于第二组数据，小 w 只有一种使添加石子总数最小的方案：\n\n- 给编号为 $1$ 的石子堆添加 $2$ 个石子。此时两堆石子的石子分别是 $3, 3$，此时后手必胜。\n\n尽管小 w 需要两种方案，但由于总方案只有一种，故输出唯一的一种方案即可。\n\n### 数据范围\n\n设 $\\sum n$ 和 $\\sum m$ 分别表示单个测试点的所有测试数据中 $n$ 和 $m$ 的和。\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 2 \\times 10^4$；\n- $2 \\le n \\le 10^5$，$2 \\le \\sum n \\le 2 \\times 10^5$，$1 \\le m,\\sum m \\le 2 \\times 10^4$；\n- 对于任意的 $1 \\le i \\le n$，有 $0 \\le a_i \\le 2^{60} − 1$；\n- $\\displaystyle \\sum_{i=1}^{n} a_i \\ge 1$。\n\n::cute-table\n|   测试点编号  |  $n \\le$ |  $\\sum n \\le$ |   $m \\le$ |  $\\sum m \\le$ |  $a_i \\le$ | 特殊性质 |\n| :------: | :--: | :----: | :----: | :----: | :------: | :--: |\n|     1    |   $2$  |  $10^5$  |  $10^4$  |  $10^4$  | $2^{30} - 1$ |   无  |\n|  $2 \\sim 4$  |   $5$  |   $25$   |  $10^4$  |  $10^4$  |  $2^{4} - 1$ |   B  |\n|  $5 \\sim 7$  |   $6$  |   $30$   |    ^   |    ^   | $2^{10} - 1$ |   ^  |\n|  $8 \\sim 10$ | $10^5$ | $2 \\times 10^5$ |    ^   |    ^   |     $2^{30} - 1$    |   A  |\n| $11 \\sim 13$ |   ^  |    ^   |    $1$   |    ^   |     ^    |   B  |\n| $14 \\sim 17$ | $10^3$ | $2 \\times 10^3$ |  $10^2$  |  $10^2$  |     ^    |   ^  |\n| $18 \\sim 21$ | $10^5$ | $2 \\times 10^5$ |  $10^4$  |  $10^4$  |     ^    |   ^  |\n|  $22, 23$  |   ^  |    ^   |    ^   |    ^   |     ^    |   无  |\n|  $24, 25$  |   ^  |    ^   | $2 \\times 10^4$ | $2 \\times 10^4$ | $2^{60} - 1$ |   ^  |\n\n- 特殊性质 A：对于任意的 $1\\le i\\le n$，$a_i$ 都是 $2$ 的非负整数幂次。\n- 特殊性质 B：$a_1=0$。\n\n### 评分方式\n\n对于每个测试点，如果你在所有测试数据中都正确地输出了小 w 需要的最小石子\n数量（即输出格式中的 $k$），你将获得该测试点 $50\\%$ 的分数。在此基础上，如果你在所有测试数据中都按照要求给出了方案，你将获得该测试点 $100\\%$ 的分数。\n\n注意，即使你只想回答小 w 需要的最小石子数量，也需要在回答的小 w 需要的最小石子数量后按照给定的格式输出方案数量以及**对应数量的，正确的，不重复的**方案。简单地输出 $m' = 0$ 即可完成这一点。", "locale": "zh-CN"}}}
{"pid": "P11630", "type": "P", "difficulty": 6, "samples": [["3\n5 1\n1 3\n2 5\n1 4\n3 3\n5 1\n3 2\n1 5\n1 -100\n1 5\n3 2\n1 5\n1 -1\n1 5\n", "12\n6\n7\n"], ["见附件", "见附件"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "线段树", "2025", "WC"], "title": "[WC2025] 士兵", "background": "WC 2025 d1t3。", "description": "有 $n$ 个士兵站成一排。初始时，编号为 $i$ 的士兵血量为 $a_i$。\n\n你可以进行若干次（也可以不进行）进攻。每次进攻时，你可以选择一段区间 $[l, r](1 \\le l \\le r \\le n)$，将编号在这一段区间内的士兵的血量减少 $1$。每次进攻需要付出 $m$ 的代价。\n\n在所有的进攻结束后，若第 $i$ 个士兵的血量不超过 $0$，那么你会获得 $b_i$ 的收益。由于士兵中敌友混杂，$b_i$ 有可能是负数。注意每个士兵的收益只会获得一次。\n\n你需要找到一个进攻方案，来最大化收益总和减去代价总和。形式化地，设在你的方案进攻了 $k$ 次，最终第 $i$ 个士兵的血量为 $c_i$，令 $p_i$ 在 $c_i \\le 0$ 时为 $1$ 否则为 $0$，则你需要最大化 $\\left(\\sum_{i=1}^n p_i \\times b_i\\right) -m\\times k$。最终，你需要给出收益总和减去代价总和的最大值即可。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含一个正整数 $T$ 表示数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n第一行包含两个整数 $n,m$，分别表示士兵数量和单次进攻代价。\n\n接下来 $n$ 行，每行包含两个整数 $a_i, b_i$，分别描述每个士兵的血量和收益。", "outputFormat": "对于每组数据输出一行包含一个整数，表示在所有可能的方案中可以得到的收益总和减去代价总和的最大值。", "hint": "### 样例解释\n\n#### 样例 $1$ 解释\n\n在第一组测试数据中，一个最优方案为进攻三次，分别取区间 $[1, 5], [2, 4], [4, 4]$，最终血量序列为 $(0, 0,−1, 0, 4)$，收益为 $b_1 + b_2 + b_3 + b_4 = 15$，代价为 $3 \\times 1 = 3$。可以证明没有比该方案更优的方案，故输出 $15 − 3 = 12$。\n\n在第二组测试数据中，一个最优方案为进攻两次，分别取区间 $[1, 1], [3, 3]$。\n\n在第三组测试数据中，一个最优方案为进攻一次，取区间 $[1, 3]$。\n\n### 数据范围\n\n设 $\\sum n$ 分别表示单个测试点内所有测试数据中 $n$ 的和。\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 5\\times 10^5$；\n- $1\\le n,\\sum n\\le 5\\times 10^5$，$1\\le m\\le 10^9$；\n- 对于任意的 $1 \\le i \\le n$，有 $1\\le a_i\\le 10^9$，$-10^9\\le b_i\\le 10^9$。\n::cute-table\n|    测试点编号    |   $\\sum n\\le$  | 特殊性质 |\n| :---------: | :------------: | :--: |\n|     $1$     | $5\\times 10^5$ |   A  |\n|  $2\\sim 4$  |     $5,000$    |   B  |\n|  $5\\sim 8$  |     ^    |   无  |\n|  $9\\sim 12$ |     $10^5$     |   ^  |\n| $13\\sim 17$ | $2\\times 10^5$ |   ^  |\n| $18\\sim 20$ | $5\\times 10^5$ |   ^  |\n\n- 特殊性质 A：对于任意的 $1\\le i\\le n$，有 $b_i\\ge 0$。\n- 特殊性质 B：对于任意的 $1\\le i\\le n$，有 $a_i\\le 5,000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2025] 士兵", "background": "WC 2025 d1t3。", "description": "有 $n$ 个士兵站成一排。初始时，编号为 $i$ 的士兵血量为 $a_i$。\n\n你可以进行若干次（也可以不进行）进攻。每次进攻时，你可以选择一段区间 $[l, r](1 \\le l \\le r \\le n)$，将编号在这一段区间内的士兵的血量减少 $1$。每次进攻需要付出 $m$ 的代价。\n\n在所有的进攻结束后，若第 $i$ 个士兵的血量不超过 $0$，那么你会获得 $b_i$ 的收益。由于士兵中敌友混杂，$b_i$ 有可能是负数。注意每个士兵的收益只会获得一次。\n\n你需要找到一个进攻方案，来最大化收益总和减去代价总和。形式化地，设在你的方案进攻了 $k$ 次，最终第 $i$ 个士兵的血量为 $c_i$，令 $p_i$ 在 $c_i \\le 0$ 时为 $1$ 否则为 $0$，则你需要最大化 $\\left(\\sum_{i=1}^n p_i \\times b_i\\right) -m\\times k$。最终，你需要给出收益总和减去代价总和的最大值即可。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含一个正整数 $T$ 表示数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n第一行包含两个整数 $n,m$，分别表示士兵数量和单次进攻代价。\n\n接下来 $n$ 行，每行包含两个整数 $a_i, b_i$，分别描述每个士兵的血量和收益。", "outputFormat": "对于每组数据输出一行包含一个整数，表示在所有可能的方案中可以得到的收益总和减去代价总和的最大值。", "hint": "### 样例解释\n\n#### 样例 $1$ 解释\n\n在第一组测试数据中，一个最优方案为进攻三次，分别取区间 $[1, 5], [2, 4], [4, 4]$，最终血量序列为 $(0, 0,−1, 0, 4)$，收益为 $b_1 + b_2 + b_3 + b_4 = 15$，代价为 $3 \\times 1 = 3$。可以证明没有比该方案更优的方案，故输出 $15 − 3 = 12$。\n\n在第二组测试数据中，一个最优方案为进攻两次，分别取区间 $[1, 1], [3, 3]$。\n\n在第三组测试数据中，一个最优方案为进攻一次，取区间 $[1, 3]$。\n\n### 数据范围\n\n设 $\\sum n$ 分别表示单个测试点内所有测试数据中 $n$ 的和。\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 5\\times 10^5$；\n- $1\\le n,\\sum n\\le 5\\times 10^5$，$1\\le m\\le 10^9$；\n- 对于任意的 $1 \\le i \\le n$，有 $1\\le a_i\\le 10^9$，$-10^9\\le b_i\\le 10^9$。\n::cute-table\n|    测试点编号    |   $\\sum n\\le$  | 特殊性质 |\n| :---------: | :------------: | :--: |\n|     $1$     | $5\\times 10^5$ |   A  |\n|  $2\\sim 4$  |     $5,000$    |   B  |\n|  $5\\sim 8$  |     ^    |   无  |\n|  $9\\sim 12$ |     $10^5$     |   ^  |\n| $13\\sim 17$ | $2\\times 10^5$ |   ^  |\n| $18\\sim 20$ | $5\\times 10^5$ |   ^  |\n\n- 特殊性质 A：对于任意的 $1\\le i\\le n$，有 $b_i\\ge 0$。\n- 特殊性质 B：对于任意的 $1\\le i\\le n$，有 $a_i\\le 5,000$。", "locale": "zh-CN"}}}
{"pid": "P11633", "type": "P", "difficulty": 6, "samples": [["3\n5 1\n1 3\n2 5\n1 4\n3 3\n5 1\n3 2\n1 5\n1 -100\n1 5\n3 2\n1 5\n1 -1\n1 5", "12\n6\n7"], ["见附件\n", "见附件\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "CTSC/CTS"], "title": "[CTS2025] 士兵", "background": "IOI 2025 中国国家队选拔 d1t3。\n", "description": "\n有 $n$ 个士兵站成一排。初始时，编号为 $i$ 的士兵血量为 $a_i$。\n\n你可以进行若干次（也可以不进行）进攻。每次进攻时，你可以选择一段区间 $[l, r](1 \\le l \\le r \\le n)$，将编号在这一段区间内的士兵的血量减少 $1$。每次进攻需要付出 $m$ 的代价。\n\n在所有的进攻结束后，若第 $i$ 个士兵的血量不超过 $0$，那么你会获得 $b_i$ 的收益。由于士兵中敌友混杂，$b_i$ 有可能是负数。注意每个士兵的收益只会获得一次。\n\n你需要找到一个进攻方案，来最大化收益总和减去代价总和。形式化地，设在你的方案进攻了 $k$ 次，最终第 $i$ 个士兵的血量为 $c_i$，令 $p_i$ 在 $c_i \\le 0$ 时为 $1$ 否则为 $0$，则你需要最大化 $\\left(\\sum_{i=1}^n p_i \\times b_i\\right) -m\\times k$。最终，你需要给出收益总和减去代价总和的最大值即可。", "inputFormat": "\n**本题有多组测试数据**。\n\n输入的第一行包含一个正整数 $T$ 表示数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n第一行包含两个整数 $n,m$，分别表示士兵数量和单次进攻代价。\n\n接下来 $n$ 行，每行包含两个整数 $a_i, b_i$，分别描述每个士兵的血量和收益。\n", "outputFormat": "\n对于每组数据输出一行包含一个整数，表示在所有可能的方案中可以得到的收益总和减去代价总和的最大值。", "hint": "\n### 样例解释\n\n#### 样例 $1$ 解释\n\n在第一组测试数据中，一个最优方案为进攻三次，分别取区间 $[1, 5], [2, 4], [4, 4]$，最终血量序列为 $(0, 0,−1, 0, 4)$，收益为 $b_1 + b_2 + b_3 + b_4 = 15$，代价为 $3 \\times 1 = 3$。可以证明没有比该方案更优的方案，故输出 $15 − 3 = 12$。\n\n在第二组测试数据中，一个最优方案为进攻两次，分别取区间 $[1, 1], [3, 3]$。\n\n在第三组测试数据中，一个最优方案为进攻一次，取区间 $[1, 3]$。\n\n### 数据范围\n\n设 $\\sum n$ 分别表示单个测试点内所有测试数据中 $n$ 的和。\n\n对于所有测试数据，保证：\n- $1 \\le T \\le 5\\times 10^5$；\n- $1\\le n,\\sum n\\le 5\\times 10^5$，$1\\le m\\le 10^9$；\n- 对于任意的 $1 \\le i \\le n$，有 $1\\le a_i\\le 10^9$，$-10^9\\le b_i\\le 10^9$。\n\n| 子任务编号 | 分值 | $\\sum n\\le$ | 特殊性质 |\n| :--: | :--: | :--: | :--: |\n| $1$ | $5$ | $5\\times 10^5$ | $\\forall 1\\le i\\le n,b_i\\ge0$ |\n| $2$ | $15$ | $5,000$ | $\\forall 1\\le i\\le n,a_i\\le 5, 000$ |\n| $3$ | $20$ | $5,000$ | 无 |\n| $4$ | $20$ | $10^5$ | 无 |\n| $5$ | $25$ | $2\\times 10^5$ | 无 |\n| $6$ | $15$ | $5\\times 10^5$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2025] 士兵", "background": "IOI 2025 中国国家队选拔 d1t3。\n", "description": "\n有 $n$ 个士兵站成一排。初始时，编号为 $i$ 的士兵血量为 $a_i$。\n\n你可以进行若干次（也可以不进行）进攻。每次进攻时，你可以选择一段区间 $[l, r](1 \\le l \\le r \\le n)$，将编号在这一段区间内的士兵的血量减少 $1$。每次进攻需要付出 $m$ 的代价。\n\n在所有的进攻结束后，若第 $i$ 个士兵的血量不超过 $0$，那么你会获得 $b_i$ 的收益。由于士兵中敌友混杂，$b_i$ 有可能是负数。注意每个士兵的收益只会获得一次。\n\n你需要找到一个进攻方案，来最大化收益总和减去代价总和。形式化地，设在你的方案进攻了 $k$ 次，最终第 $i$ 个士兵的血量为 $c_i$，令 $p_i$ 在 $c_i \\le 0$ 时为 $1$ 否则为 $0$，则你需要最大化 $\\left(\\sum_{i=1}^n p_i \\times b_i\\right) -m\\times k$。最终，你需要给出收益总和减去代价总和的最大值即可。", "inputFormat": "\n**本题有多组测试数据**。\n\n输入的第一行包含一个正整数 $T$ 表示数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n第一行包含两个整数 $n,m$，分别表示士兵数量和单次进攻代价。\n\n接下来 $n$ 行，每行包含两个整数 $a_i, b_i$，分别描述每个士兵的血量和收益。\n", "outputFormat": "\n对于每组数据输出一行包含一个整数，表示在所有可能的方案中可以得到的收益总和减去代价总和的最大值。", "hint": "\n### 样例解释\n\n#### 样例 $1$ 解释\n\n在第一组测试数据中，一个最优方案为进攻三次，分别取区间 $[1, 5], [2, 4], [4, 4]$，最终血量序列为 $(0, 0,−1, 0, 4)$，收益为 $b_1 + b_2 + b_3 + b_4 = 15$，代价为 $3 \\times 1 = 3$。可以证明没有比该方案更优的方案，故输出 $15 − 3 = 12$。\n\n在第二组测试数据中，一个最优方案为进攻两次，分别取区间 $[1, 1], [3, 3]$。\n\n在第三组测试数据中，一个最优方案为进攻一次，取区间 $[1, 3]$。\n\n### 数据范围\n\n设 $\\sum n$ 分别表示单个测试点内所有测试数据中 $n$ 的和。\n\n对于所有测试数据，保证：\n- $1 \\le T \\le 5\\times 10^5$；\n- $1\\le n,\\sum n\\le 5\\times 10^5$，$1\\le m\\le 10^9$；\n- 对于任意的 $1 \\le i \\le n$，有 $1\\le a_i\\le 10^9$，$-10^9\\le b_i\\le 10^9$。\n\n| 子任务编号 | 分值 | $\\sum n\\le$ | 特殊性质 |\n| :--: | :--: | :--: | :--: |\n| $1$ | $5$ | $5\\times 10^5$ | $\\forall 1\\le i\\le n,b_i\\ge0$ |\n| $2$ | $15$ | $5,000$ | $\\forall 1\\le i\\le n,a_i\\le 5, 000$ |\n| $3$ | $20$ | $5,000$ | 无 |\n| $4$ | $20$ | $10^5$ | 无 |\n| $5$ | $25$ | $2\\times 10^5$ | 无 |\n| $6$ | $15$ | $5\\times 10^5$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P11637", "type": "P", "difficulty": 2, "samples": [["1 3 2", "0 0"], ["1 1 4", "1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "O2优化", "洛谷比赛"], "title": "Mod", "background": "", "description": "给定三个数 $a,b,p$，你要对 $a$ 做若干次操作。\n\n对于一次操作，你可以令 $a\\leftarrow (a+1)\\bmod p$，并且使 $b\\leftarrow b-1$，注意操作后你必须保证 $b$ 为自然数。\n\n问做完若干次操作后 $a$ 最小是多少，以及在满足 $a$ 最小的前提下，$b$ 最小是多少？ \n\n注：$a\\leftarrow b$ 的意思是把 $a$ 赋值为 $b$。", "inputFormat": "一行三个正整数 $a,b,p$。", "outputFormat": "一行两个数，第一个为做完若干次操作后最小的 $a$，第二个为 $a$ 最小时最小的 $b$。\n\n本题开启 SPJ，如果你输出的第一个数是正确的，你将得到该测试点 $50\\%$ 的分；如果你输出的第二个数是正确的，你将得到该测试点 $50\\%$ 的分。", "hint": "| 捆绑 |$b \\leq$ | $p \\leq$ |  分数|\n| :----------: | :------: | :------: | :-----: |\n| Subtask #1 | $10^5$ | $10^{5}$ | $20\\text{pts}$ |\n| Subtask #2 |  $10^9$ | $10^9$ | $40\\text{pts}$ |\n| Subtask #3 | $10^{18}$ | $10^{18}$ | $40\\text{pts}$ |\n\n对于所有数据，$2\\le p\\le 10^{18}$，$0\\le a< p$，$1\\le b\\le 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Mod", "background": "", "description": "给定三个数 $a,b,p$，你要对 $a$ 做若干次操作。\n\n对于一次操作，你可以令 $a\\leftarrow (a+1)\\bmod p$，并且使 $b\\leftarrow b-1$，注意操作后你必须保证 $b$ 为自然数。\n\n问做完若干次操作后 $a$ 最小是多少，以及在满足 $a$ 最小的前提下，$b$ 最小是多少？ \n\n注：$a\\leftarrow b$ 的意思是把 $a$ 赋值为 $b$。", "inputFormat": "一行三个正整数 $a,b,p$。", "outputFormat": "一行两个数，第一个为做完若干次操作后最小的 $a$，第二个为 $a$ 最小时最小的 $b$。\n\n本题开启 SPJ，如果你输出的第一个数是正确的，你将得到该测试点 $50\\%$ 的分；如果你输出的第二个数是正确的，你将得到该测试点 $50\\%$ 的分。", "hint": "| 捆绑 |$b \\leq$ | $p \\leq$ |  分数|\n| :----------: | :------: | :------: | :-----: |\n| Subtask #1 | $10^5$ | $10^{5}$ | $20\\text{pts}$ |\n| Subtask #2 |  $10^9$ | $10^9$ | $40\\text{pts}$ |\n| Subtask #3 | $10^{18}$ | $10^{18}$ | $40\\text{pts}$ |\n\n对于所有数据，$2\\le p\\le 10^{18}$，$0\\le a< p$，$1\\le b\\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P11638", "type": "P", "difficulty": 3, "samples": [["6\n0 0 4 5 1 4", "18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "Ad-hoc", "洛谷比赛"], "title": "Max,Mex", "background": "**hack 数据已添加，位于 Subtask#5，不计分。**\n\n**请注意本题特殊的空间限制。**\n\n本题中定义 $\\max\\{S\\}$ 为 $S$ 中的最大值，$\\operatorname{mex}\\{S\\}$ 为 $S$ 中最小没出现过的自然数。", "description": "给定一个长度为 $n$ 的序列 $a$。\n\n一次操作你可以选定一个 $(i,j)$，满足 $1\\le i,j\\le n$ 以及 $i\\neq j$，令 $x=\\max\\{a_i,a_j\\}$，$y=\\operatorname{mex}\\{a_i,a_j\\}$，那么 $a_i=x$，$a_j=y$。\n\n请问进行若干次操作后，$\\sum_{i=1}^n a_i$ 最大为多少？", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数，第 $i$ 个为 $a_i$。", "outputFormat": "一行一个整数，为问题的答案。", "hint": "**【样例解释】**\n\n操作 $(5,1)$，$(5,2)$，答案为 $2+2+4+5+1+4=18$。\n\n**【数据范围】**\n\n- Subtask#1（$10\\text{pts}$）：$n=1$，**空间限制 4MB**；\n- Subtask#2（$20\\text{pts}$）：$a_i\\ge 2$，**空间限制 512MB**；\n- Subtask#3（$30\\text{pts}$）：无特殊限制，**空间限制 512MB**。\n- Subtask#4（$40\\text{pts}$）：无特殊限制，**空间限制 4MB**。\n- Subtask#5（$0\\text{pts}$）：hack，**空间限制 512MB**。\n\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$0\\le a_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Max,Mex", "background": "**hack 数据已添加，位于 Subtask#5，不计分。**\n\n**请注意本题特殊的空间限制。**\n\n本题中定义 $\\max\\{S\\}$ 为 $S$ 中的最大值，$\\operatorname{mex}\\{S\\}$ 为 $S$ 中最小没出现过的自然数。", "description": "给定一个长度为 $n$ 的序列 $a$。\n\n一次操作你可以选定一个 $(i,j)$，满足 $1\\le i,j\\le n$ 以及 $i\\neq j$，令 $x=\\max\\{a_i,a_j\\}$，$y=\\operatorname{mex}\\{a_i,a_j\\}$，那么 $a_i=x$，$a_j=y$。\n\n请问进行若干次操作后，$\\sum_{i=1}^n a_i$ 最大为多少？", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数，第 $i$ 个为 $a_i$。", "outputFormat": "一行一个整数，为问题的答案。", "hint": "**【样例解释】**\n\n操作 $(5,1)$，$(5,2)$，答案为 $2+2+4+5+1+4=18$。\n\n**【数据范围】**\n\n- Subtask#1（$10\\text{pts}$）：$n=1$，**空间限制 4MB**；\n- Subtask#2（$20\\text{pts}$）：$a_i\\ge 2$，**空间限制 512MB**；\n- Subtask#3（$30\\text{pts}$）：无特殊限制，**空间限制 512MB**。\n- Subtask#4（$40\\text{pts}$）：无特殊限制，**空间限制 4MB**。\n- Subtask#5（$0\\text{pts}$）：hack，**空间限制 512MB**。\n\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$0\\le a_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11639", "type": "P", "difficulty": 4, "samples": [["1 2\n4 1 2 6 7", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷比赛"], "title": "Line Game", "background": "", "description": "你在玩一个音游。\n\n这个音游可以抽象为一个长度为 $m+1$ 的线段。\n\n这个音游有 $n+m$ 秒，在前 $n$ 秒中，第 $i$ 秒会在 $1$ 处出现一个集合，这个集合可以用一个可重无序集 $S_i$ 来表示，大小为 $a_i$，每秒末尾这个集合的位置会增加 $1$。\n\n因为你不会玩，所以你有一个可爱的 bot，它在第 $0$ 秒位于 $1$，之后每一秒你都需要选择一个值域区间 $[l,r]$，若这个 bot 所处位置有一个非空的集合 $Q$，那么 bot 会消去 $Q$ 中值域位于 $[l,r]$ 的数，该操作代价为 $r-l+1$。除此之外，这个 bot 在每秒的末尾可以选择将自己的位置 $+1$。\n\n若有非空的集合到达 $m+1$ 处，那么你就失败了。请问在不失败的情况下你最少需要花费多少代价？", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行，每行第一个整数为 $a_i$，接下来有 $a_i$ 个整数，表示集合 $S_i$。", "outputFormat": "一行一个整数，表示最小代价。", "hint": "设 $[1,k]$ 为集合中元素的值域。\n\n**本题采用捆绑测试。**\n\n- Subtask#1（$10\\text{pts}$）：$m=1$；\n- Subtask#2（$20\\text{pts}$）：$n=1$；\n- Subtask#3（$15\\text{pts}$）：$k=100$；\n- Subtask#4（$15\\text{pts}$）：$m\\le 100$；\n- Subtask#5（$20\\text{pts}$）：$m\\le 10^5$；\n- Subtask#6（$20\\text{pts}$）：无特殊限制。\n\n\n对于 $100\\%$ 的数据，$1\\le n\\le 100$，$1\\le m\\le 10^9$，$1\\le a_i\\le 5\\times 10^4$，除 Subtusk#3 外 $k=10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Line Game", "background": "", "description": "你在玩一个音游。\n\n这个音游可以抽象为一个长度为 $m+1$ 的线段。\n\n这个音游有 $n+m$ 秒，在前 $n$ 秒中，第 $i$ 秒会在 $1$ 处出现一个集合，这个集合可以用一个可重无序集 $S_i$ 来表示，大小为 $a_i$，每秒末尾这个集合的位置会增加 $1$。\n\n因为你不会玩，所以你有一个可爱的 bot，它在第 $0$ 秒位于 $1$，之后每一秒你都需要选择一个值域区间 $[l,r]$，若这个 bot 所处位置有一个非空的集合 $Q$，那么 bot 会消去 $Q$ 中值域位于 $[l,r]$ 的数，该操作代价为 $r-l+1$。除此之外，这个 bot 在每秒的末尾可以选择将自己的位置 $+1$。\n\n若有非空的集合到达 $m+1$ 处，那么你就失败了。请问在不失败的情况下你最少需要花费多少代价？", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行，每行第一个整数为 $a_i$，接下来有 $a_i$ 个整数，表示集合 $S_i$。", "outputFormat": "一行一个整数，表示最小代价。", "hint": "设 $[1,k]$ 为集合中元素的值域。\n\n**本题采用捆绑测试。**\n\n- Subtask#1（$10\\text{pts}$）：$m=1$；\n- Subtask#2（$20\\text{pts}$）：$n=1$；\n- Subtask#3（$15\\text{pts}$）：$k=100$；\n- Subtask#4（$15\\text{pts}$）：$m\\le 100$；\n- Subtask#5（$20\\text{pts}$）：$m\\le 10^5$；\n- Subtask#6（$20\\text{pts}$）：无特殊限制。\n\n\n对于 $100\\%$ 的数据，$1\\le n\\le 100$，$1\\le m\\le 10^9$，$1\\le a_i\\le 5\\times 10^4$，除 Subtusk#3 外 $k=10^9$。", "locale": "zh-CN"}}}
{"pid": "P11640", "type": "P", "difficulty": 4, "samples": [["1\n5 4\n1 3 4\n4 2 7\n4 4 0\n5 2 1", "Yes"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "洛谷原创", "O2优化", "洛谷比赛"], "title": "Graph", "background": "**hack 数据已添加，位于 Subtask#5，不计分。**\n", "description": "有一张 $n$ 个点的图，每个点可以是**黑色**或**白色**的。\n\n有 $m$ 条限制，第 $i$ 条限制会给定 $a_i,b_i,c_i$，表示 $a_i\\Rightarrow b_i$ 需要有一条长度为 $c_i$ 的路径，路径可以重复经过某条边或点。\n\n问是否存在一个若干条边权为 $1$ 有向边的图，满足：\n\n- 满足上述 $m$ 个条件。\n- 假如这张图有 $k$ 条边，则对于每个 $\\forall 1\\le i\\le k$，设第 $i$ 条边是由 $u_i$ 指向 $v_i$ 的，那么 $u_i$ 的颜色与 $v_i$ 的不同。", "inputFormat": "第一行一个整数 $T$，表示数据的组数。\n\n对于每组数据，第一行两个整数 $n,m$。\n\n接下来 $m$ 行，每行三个整数，分别为 $a_i,b_i,c_i$。", "outputFormat": "$T$ 行，每行一个字符串 $s\\in\\{\\tt{Yes},\\tt{No}\\}$。\n\n第 $i$ 行表示第 $i$ 个问题的答案。", "hint": "**【样例解释】**\n\n可以构造出\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oz6rr27f.png)\n\n以满足要求。\n\n\n\n------------\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n- Subtask #1（$5\\text{pts}$）：$m=0$。\n- Subtask #2（$20\\text{pts}$）：$n\\le 10$。\n- Subtask #3（$25\\text{pts}$）：$n\\le 10^3$。\n- Subtask #4（$50\\text{pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10$，$1\\le n\\le 10^6$，$0\\le m\\le 10^6$，$1\\le a_i,b_i\\le n$，$0\\le c_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Graph", "background": "**hack 数据已添加，位于 Subtask#5，不计分。**\n", "description": "有一张 $n$ 个点的图，每个点可以是**黑色**或**白色**的。\n\n有 $m$ 条限制，第 $i$ 条限制会给定 $a_i,b_i,c_i$，表示 $a_i\\Rightarrow b_i$ 需要有一条长度为 $c_i$ 的路径，路径可以重复经过某条边或点。\n\n问是否存在一个若干条边权为 $1$ 有向边的图，满足：\n\n- 满足上述 $m$ 个条件。\n- 假如这张图有 $k$ 条边，则对于每个 $\\forall 1\\le i\\le k$，设第 $i$ 条边是由 $u_i$ 指向 $v_i$ 的，那么 $u_i$ 的颜色与 $v_i$ 的不同。", "inputFormat": "第一行一个整数 $T$，表示数据的组数。\n\n对于每组数据，第一行两个整数 $n,m$。\n\n接下来 $m$ 行，每行三个整数，分别为 $a_i,b_i,c_i$。", "outputFormat": "$T$ 行，每行一个字符串 $s\\in\\{\\tt{Yes},\\tt{No}\\}$。\n\n第 $i$ 行表示第 $i$ 个问题的答案。", "hint": "**【样例解释】**\n\n可以构造出\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oz6rr27f.png)\n\n以满足要求。\n\n\n\n------------\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n- Subtask #1（$5\\text{pts}$）：$m=0$。\n- Subtask #2（$20\\text{pts}$）：$n\\le 10$。\n- Subtask #3（$25\\text{pts}$）：$n\\le 10^3$。\n- Subtask #4（$50\\text{pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10$，$1\\le n\\le 10^6$，$0\\le m\\le 10^6$，$1\\le a_i,b_i\\le n$，$0\\le c_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11641", "type": "P", "difficulty": 1, "samples": [["4 300\n98 87 56 12\n99 88 87 90\n", "253"], ["4 100\n98 87 56 12\n99 88 87 90\n", "364"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X8-T0】「TAOI-3」分数", "background": "原题链接：<https://oier.team/problems/X8A>。", "description": "小巡参加了 $n$ 场考试。所有考试结束后，小由进行批改。\n\n一开始，小由给小巡第 $i$ 场考试的结果评了 $a_i$ 分。\n\n但是由于小由很严厉，如果小由发现小巡总分大于等于及格分 $T$ 就会重新批改，第二次批改后小巡的第 $i$ 场考试的结果会评为 $b_i$ 分，总分也应该按照第二次批改的评分计算。\n\n你需要告诉小巡他最后的总分。", "inputFormat": "第一行，两个正整数 $n,T$。\n\n第二行，$n$ 个正整数 $a_1,a_2,\\dots,a_n$。\n\n第三行，$n$ 个正整数 $b_1,b_2,\\dots,b_n$。", "outputFormat": "仅一行，一个非负整数，表示答案。", "hint": "**【样例解释 #1】**\n\n第一次批改后，小巡的得分为 $253$，没有及格，因此小由不会重新批改，总分为 $253$。\n\n**【样例解释 #2】**\n\n第一次批改后，小巡的得分为 $253$，达到了 $100$，因此小由会重新批改，重新批改的总分为 $364$。\n\n\n**【数据范围】**\n\n对于所有数据，保证 $1\\leq n\\leq 10$，$1\\leq T\\leq 1000$，$1\\leq a_i,b_i\\leq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X8-T0】「TAOI-3」分数", "background": "原题链接：<https://oier.team/problems/X8A>。", "description": "小巡参加了 $n$ 场考试。所有考试结束后，小由进行批改。\n\n一开始，小由给小巡第 $i$ 场考试的结果评了 $a_i$ 分。\n\n但是由于小由很严厉，如果小由发现小巡总分大于等于及格分 $T$ 就会重新批改，第二次批改后小巡的第 $i$ 场考试的结果会评为 $b_i$ 分，总分也应该按照第二次批改的评分计算。\n\n你需要告诉小巡他最后的总分。", "inputFormat": "第一行，两个正整数 $n,T$。\n\n第二行，$n$ 个正整数 $a_1,a_2,\\dots,a_n$。\n\n第三行，$n$ 个正整数 $b_1,b_2,\\dots,b_n$。", "outputFormat": "仅一行，一个非负整数，表示答案。", "hint": "**【样例解释 #1】**\n\n第一次批改后，小巡的得分为 $253$，没有及格，因此小由不会重新批改，总分为 $253$。\n\n**【样例解释 #2】**\n\n第一次批改后，小巡的得分为 $253$，达到了 $100$，因此小由会重新批改，重新批改的总分为 $364$。\n\n\n**【数据范围】**\n\n对于所有数据，保证 $1\\leq n\\leq 10$，$1\\leq T\\leq 1000$，$1\\leq a_i,b_i\\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P11642", "type": "P", "difficulty": 2, "samples": [["5 2\n1 4 1 1 5\n", "14\n"], ["7 3\n1 1 4 5 1 4 1\n", "21\n"], ["1 197\n251\n", "251"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X8-T1】「TAOI-3」幸运草", "background": "原题链接：<https://oier.team/problems/X8B>。\n\n---\n\n> 那是，深藏的思念 \\\n> 那是，永恒的誓言 \\\n> 那是，真心的祈愿 \\\n> 那是，悔恨的心怀 \\\n> 那是，童年的约定——\n\n终将改变之物，与永不改变之物。", "description": "Anzu 有一个正整数数列 $a_1, \\ldots, a_n$ 和一个整数 $x$。她可以进行至多一次操作，选择一对正整数 $1 \\le l \\le r \\le n$，然后对于所有 $l \\le i \\le r$ 的正整数 $i$ 让 $a_i$ 变成 $x$。现在她想要知道，在这之后，数列里所有数的和最大是多少。", "inputFormat": "第一行，两个非负整数 $n, x$。\n\n第二行，$n$ 个正整数 $a_1, \\ldots, a_n$。", "outputFormat": "仅一行，一个正整数，表示答案。", "hint": "**【样例解释 #1】**\n\n最优的策略是选择 $l=3$，$r=4$ 进行一次操作，此时数列变为 $[1,4,2,2,5]$，总和为 $14$。\n\n**【样例解释 #2】**\n\n最优的策略为选择 $l=1$，$r=7$ 进行一次操作。\n\n**【样例解释 #3】**\n\n最优的策略为不进行操作。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，$n \\le 500$。\n\n对于另外 $20\\%$ 的数据，$n \\le 3 \\times 10^3$。\n\n对于另外 $10\\%$ 的数据，$x=0$。\n\n对于所有数据，保证 $1 \\le n \\le 10^5$，$1 \\le a_i \\le 10^9$，$0 \\le x \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X8-T1】「TAOI-3」幸运草", "background": "原题链接：<https://oier.team/problems/X8B>。\n\n---\n\n> 那是，深藏的思念 \\\n> 那是，永恒的誓言 \\\n> 那是，真心的祈愿 \\\n> 那是，悔恨的心怀 \\\n> 那是，童年的约定——\n\n终将改变之物，与永不改变之物。", "description": "Anzu 有一个正整数数列 $a_1, \\ldots, a_n$ 和一个整数 $x$。她可以进行至多一次操作，选择一对正整数 $1 \\le l \\le r \\le n$，然后对于所有 $l \\le i \\le r$ 的正整数 $i$ 让 $a_i$ 变成 $x$。现在她想要知道，在这之后，数列里所有数的和最大是多少。", "inputFormat": "第一行，两个非负整数 $n, x$。\n\n第二行，$n$ 个正整数 $a_1, \\ldots, a_n$。", "outputFormat": "仅一行，一个正整数，表示答案。", "hint": "**【样例解释 #1】**\n\n最优的策略是选择 $l=3$，$r=4$ 进行一次操作，此时数列变为 $[1,4,2,2,5]$，总和为 $14$。\n\n**【样例解释 #2】**\n\n最优的策略为选择 $l=1$，$r=7$ 进行一次操作。\n\n**【样例解释 #3】**\n\n最优的策略为不进行操作。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，$n \\le 500$。\n\n对于另外 $20\\%$ 的数据，$n \\le 3 \\times 10^3$。\n\n对于另外 $10\\%$ 的数据，$x=0$。\n\n对于所有数据，保证 $1 \\le n \\le 10^5$，$1 \\le a_i \\le 10^9$，$0 \\le x \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11643", "type": "P", "difficulty": 3, "samples": [["2\n5\n1 3 4 3 3\n2 2 3 2 1\n5\n1 2 1 1 1\n1 1 1 2 2\n", "Yes\nNo\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X8-T2】「TAOI-3」终有一天，飞向水平线的彼方", "background": "原题链接：<https://oier.team/problems/X8C>。\n\n---\n\n天与海交界的地方，到底哪边更深呢？\n", "description": "Mio 有一个长度为 $n$ 的正整数数列 $a_1, \\ldots, a_n$。她会对这个序列进行若干次操作，每次她会选择一对正整数 $l,r$，满足 $1 \\le l \\le r \\le n$，且 $(r-l+1)$ 为偶数，然后进行以下两种操作中的一种：\n\n- 对于所有整数 $i \\in [l,r]$，令 $a_i \\gets a_i+\\left(|i-\\frac{r+l}{2}|+\\frac{1}{2}\\right)$。\n- 对于所有整数 $i \\in [l,r]$，令 $a_i \\gets a_i-\\left(|i-\\frac{r+l}{2}|+\\frac{1}{2}\\right)$。\n\n形象化地，你可以把这理解为，选择某区间内最中间的数作为中轴，然后把区间内的所有数加上或减去它与中轴的距离。例如，如果选择 $l=1$，$r=8$，效果就是把数列的前 $8$ 个数分别加上或减去 $4,3,2,1,1,2,3,4$。\n\n在 Mio 的操作中，她希望任意时刻数列里的所有数都是正整数。\n\n现在，Mio 想要知道，能否用这样的操作把数列 $a_1, \\ldots, a_n$ 变成目标正整数数列 $b_1, \\ldots, b_n$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。对于每组数据：\n- 第一行，一个正整数 $n$。\n- 第二行，$n$ 个正整数 $a_1, \\ldots, a_n$。\n- 第三行，$n$ 个正整数 $b_1, \\ldots, b_n$。", "outputFormat": "$T$ 行，对于每组数据，若 Mio 能够达成她的目的，输出一行 `Yes`，否则输出一行 `No`。", "hint": "**【样例解释】**\n\n对于第一组数据，一种合法的方案为：\n\n先选取 $l=2$，$r=5$ 进行一次减少操作，数列变为 $[1,1,3,2,1]$。\n\n再选取 $l=1$，$r=2$ 进行一次增加操作，数列变为 $[2,2,3,2,1]$。\n\n对于第二组数据，可以证明不存在合法的方案。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$n \\le 5$，$a_i,b_i \\le 4$。\n\n对于另外 $40\\%$ 的数据，$\\forall 1 \\le i \\le j \\le n$，$a_i=a_j$，$b_i=b_j$。\n\n对于所有数据，保证 $1 \\le T \\le 5$，$1 \\le n \\le 10^5$，$1 \\le a_i,b_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X8-T2】「TAOI-3」终有一天，飞向水平线的彼方", "background": "原题链接：<https://oier.team/problems/X8C>。\n\n---\n\n天与海交界的地方，到底哪边更深呢？\n", "description": "Mio 有一个长度为 $n$ 的正整数数列 $a_1, \\ldots, a_n$。她会对这个序列进行若干次操作，每次她会选择一对正整数 $l,r$，满足 $1 \\le l \\le r \\le n$，且 $(r-l+1)$ 为偶数，然后进行以下两种操作中的一种：\n\n- 对于所有整数 $i \\in [l,r]$，令 $a_i \\gets a_i+\\left(|i-\\frac{r+l}{2}|+\\frac{1}{2}\\right)$。\n- 对于所有整数 $i \\in [l,r]$，令 $a_i \\gets a_i-\\left(|i-\\frac{r+l}{2}|+\\frac{1}{2}\\right)$。\n\n形象化地，你可以把这理解为，选择某区间内最中间的数作为中轴，然后把区间内的所有数加上或减去它与中轴的距离。例如，如果选择 $l=1$，$r=8$，效果就是把数列的前 $8$ 个数分别加上或减去 $4,3,2,1,1,2,3,4$。\n\n在 Mio 的操作中，她希望任意时刻数列里的所有数都是正整数。\n\n现在，Mio 想要知道，能否用这样的操作把数列 $a_1, \\ldots, a_n$ 变成目标正整数数列 $b_1, \\ldots, b_n$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。对于每组数据：\n- 第一行，一个正整数 $n$。\n- 第二行，$n$ 个正整数 $a_1, \\ldots, a_n$。\n- 第三行，$n$ 个正整数 $b_1, \\ldots, b_n$。", "outputFormat": "$T$ 行，对于每组数据，若 Mio 能够达成她的目的，输出一行 `Yes`，否则输出一行 `No`。", "hint": "**【样例解释】**\n\n对于第一组数据，一种合法的方案为：\n\n先选取 $l=2$，$r=5$ 进行一次减少操作，数列变为 $[1,1,3,2,1]$。\n\n再选取 $l=1$，$r=2$ 进行一次增加操作，数列变为 $[2,2,3,2,1]$。\n\n对于第二组数据，可以证明不存在合法的方案。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$n \\le 5$，$a_i,b_i \\le 4$。\n\n对于另外 $40\\%$ 的数据，$\\forall 1 \\le i \\le j \\le n$，$a_i=a_j$，$b_i=b_j$。\n\n对于所有数据，保证 $1 \\le T \\le 5$，$1 \\le n \\le 10^5$，$1 \\le a_i,b_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11644", "type": "P", "difficulty": 4, "samples": [["7 6 4\n2 4\n5 6\n1 2\n3 5\n3 6\n7 1\n1 2 1\n1 6 3\n5 3 5\n2 7 7", "tribool\nexpand\ntribool\nexpand\n"], ["5 4 4\n1 2\n2 3\n3 4\n4 5\n1 2 1\n1 5 3\n5 3 2\n1 1 1\n", "tribool\nexpand\ntribool\nexpand\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X8-T3】「TAOI-3」地地爱打卡", "background": "原题链接：<https://oier.team/problems/X8D>。\n\n---\n\n一年前，我在 NOIP 2023 的赛场上，折戟沉沙。\n\n一年后，我从倒下的地方爬起。\n\nTHUWC 2025 D1T1，强势狂砍 76 分。\n\n……线段树优化 DP 也太难了。", "description": "小 T 同学非常淡泊于跑步。为了让跑步更加无趣，他决定制作一款叫做《地地爱打卡》的软件，使得用户每地都无法进行跑步打卡。\n\n开发完成后，小 T 同学计划进行试运行，他找了大 Y 同学来帮忙。\n\n这次打卡总共有 $n$ 个节点，编号为 $1 \\sim n$，有 $m$ 条连接两个节点的双向道路，**保证图无重边无自环**。大 Y 同学需要从 $s$ 跑到 $t$。\n\n初始时，大 Y 同学的能量值是 $0$。每当大 Y 同学跑过一条道路，小 T 同学就会请他吃一顿饭，使得他的能量值增加 $1$。试运行期间他的**能量值不可以是负数**。\n\n大 Y 同学还有一个快乐值，初始为 $0$，当位于某个节点的时候，大 Y 同学可以让他的快乐值按位异或上他的能量值，同时清空能量值（即，能量值变为 $0$），也可以什么都不做。\n\n现在大 Y 同学想要知道，他是否能够 **最终停留在** 节点 $t$，耗尽所有能量值（即，能量值变为 $0$），并且此时他的快乐值恰好为 $x$？**注意：大 Y 同学到达节点 $\\bm t$ 后可以选择不停下而继续移动。**\n\n因为大 Y 同学很爱跑步，所以你要回答 $q$ 组询问，每次询问给出 $s, t, x$，你要告诉大 Y 同学是否能够满足他的要求。", "inputFormat": "第一行，三个非负整数 $n, m, q$。\n\n接下来 $m$ 行，每行两个正整数 $u, v$，表示一条连接点 $u$ 和 $v$ 的道路。\n\n接下来 $q$ 行，每行三个非负整数 $s, t, x$，表示一组询问。", "outputFormat": "$q$ 行，对于每组询问，如果大 Y 同学能够满足他的要求，输出一行 `tribool`，否则输出一行 `expand`。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/66uc1bzt.png)\n\n如图，对于第一组询问，大 Y 同学从节点 $1$ 出发，经过一条道路到达节点 $2$，此时他的能量值为 $1$。他再进行一次操作，此时能量值变为 $0$，快乐值变为 $1$，满足条件。\n\n对于第二组询问，可以说明不存在合法的方案。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（22 分）：$\\max(n, m, q, x) \\leq 50$。\n- 子任务 2（22 分）：$m = n - 1$ 且图连通。\n- 子任务 3（24 分）：$x \\leq 1$。\n- 子任务 4（32 分）：无特殊限制。\n\n对于所有数据，保证 $2 \\leq n \\leq 2\\times 10^5$，$0 \\leq m \\leq 3\\times 10^5$，$1 \\leq q \\leq 2\\times 10^5$，$1 \\leq s, t, u, v \\leq n$，$0 \\leq x \\leq 10^9$，保证给出的无向图无重边无自环。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X8-T3】「TAOI-3」地地爱打卡", "background": "原题链接：<https://oier.team/problems/X8D>。\n\n---\n\n一年前，我在 NOIP 2023 的赛场上，折戟沉沙。\n\n一年后，我从倒下的地方爬起。\n\nTHUWC 2025 D1T1，强势狂砍 76 分。\n\n……线段树优化 DP 也太难了。", "description": "小 T 同学非常淡泊于跑步。为了让跑步更加无趣，他决定制作一款叫做《地地爱打卡》的软件，使得用户每地都无法进行跑步打卡。\n\n开发完成后，小 T 同学计划进行试运行，他找了大 Y 同学来帮忙。\n\n这次打卡总共有 $n$ 个节点，编号为 $1 \\sim n$，有 $m$ 条连接两个节点的双向道路，**保证图无重边无自环**。大 Y 同学需要从 $s$ 跑到 $t$。\n\n初始时，大 Y 同学的能量值是 $0$。每当大 Y 同学跑过一条道路，小 T 同学就会请他吃一顿饭，使得他的能量值增加 $1$。试运行期间他的**能量值不可以是负数**。\n\n大 Y 同学还有一个快乐值，初始为 $0$，当位于某个节点的时候，大 Y 同学可以让他的快乐值按位异或上他的能量值，同时清空能量值（即，能量值变为 $0$），也可以什么都不做。\n\n现在大 Y 同学想要知道，他是否能够 **最终停留在** 节点 $t$，耗尽所有能量值（即，能量值变为 $0$），并且此时他的快乐值恰好为 $x$？**注意：大 Y 同学到达节点 $\\bm t$ 后可以选择不停下而继续移动。**\n\n因为大 Y 同学很爱跑步，所以你要回答 $q$ 组询问，每次询问给出 $s, t, x$，你要告诉大 Y 同学是否能够满足他的要求。", "inputFormat": "第一行，三个非负整数 $n, m, q$。\n\n接下来 $m$ 行，每行两个正整数 $u, v$，表示一条连接点 $u$ 和 $v$ 的道路。\n\n接下来 $q$ 行，每行三个非负整数 $s, t, x$，表示一组询问。", "outputFormat": "$q$ 行，对于每组询问，如果大 Y 同学能够满足他的要求，输出一行 `tribool`，否则输出一行 `expand`。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/66uc1bzt.png)\n\n如图，对于第一组询问，大 Y 同学从节点 $1$ 出发，经过一条道路到达节点 $2$，此时他的能量值为 $1$。他再进行一次操作，此时能量值变为 $0$，快乐值变为 $1$，满足条件。\n\n对于第二组询问，可以说明不存在合法的方案。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（22 分）：$\\max(n, m, q, x) \\leq 50$。\n- 子任务 2（22 分）：$m = n - 1$ 且图连通。\n- 子任务 3（24 分）：$x \\leq 1$。\n- 子任务 4（32 分）：无特殊限制。\n\n对于所有数据，保证 $2 \\leq n \\leq 2\\times 10^5$，$0 \\leq m \\leq 3\\times 10^5$，$1 \\leq q \\leq 2\\times 10^5$，$1 \\leq s, t, u, v \\leq n$，$0 \\leq x \\leq 10^9$，保证给出的无向图无重边无自环。", "locale": "zh-CN"}}}
{"pid": "P11645", "type": "P", "difficulty": 5, "samples": [["4\n1 3\n2 1 2\n2 1 2\n1 3\n", "2\n"], ["7\n2 2 4\n1 6\n3 1 1 4\n1 6\n2 3 3\n2 1 5\n1 6", "3\n"], ["20\n2 18 1 \n3 2 5 12 \n2 2 17 \n2 1 18 \n2 14 5 \n1 19 \n1 19 \n1 19 \n3 16 2 1 \n1 19 \n2 18 1 \n2 15 4 \n3 16 1 2 \n2 15 4 \n2 13 6 \n1 19 \n2 18 1 \n1 19 \n1 19 \n4 8 1 3 7 ", "483840\n"], ["50\n1 49 \n1 49 \n2 48 1 \n1 49 \n1 49 \n2 36 13 \n1 49 \n1 49 \n3 39 1 9 \n1 49 \n1 49 \n5 6 1 39 1 2 \n2 48 1 \n6 1 5 1 4 37 1 \n1 49 \n1 49 \n1 49 \n2 1 48 \n2 29 20 \n1 49 \n2 1 48 \n2 1 48 \n4 46 1 1 1 \n1 49 \n1 49 \n1 49 \n1 49 \n1 49 \n7 1 3 1 1 41 1 1 \n4 30 1 4 14 \n1 49 \n1 49 \n5 1 1 45 1 1 \n1 49 \n1 49 \n5 11 5 21 11 1 \n1 49 \n1 49 \n3 1 1 47 \n1 49 \n3 1 2 46 \n1 49 \n1 49 \n1 49 \n1 49 \n4 1 1 2 45 \n1 49 \n1 49 \n1 49 \n4 44 2 1 2 ", "268867231\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X8-T4】「TAOI-3」Warmth of the Eternity", "background": "原题链接：<https://oier.team/problems/X8E>。", "description": "Kukuru 是 AI 领域大神。[如果你是 E.Space 的粉丝的话](/problem/P8294)，你应该知道，$n$ 个 AI 会组成一个树形结构。具体地，对于 $n$ 个 AI，它们之间会构建出恰好 $(n-1)$ 条通路，每条通路会连接两个 AI，并且任意两个 AI 都被直接或间接地连接起来。\n\n但是 Kukuru 忘记了她的 $n$ 个 AI 是如何连接的了。所幸，她还记得：对于所有 $i$，假如删去第 $i$ 个 AI 并断开所有和它相连的通路之后，剩下的 AI 组成的所有连通块的大小。\n\n称若干 AI 形成一个连通块，当且仅当它们两两之间可以通过若干通路互相连接，且没有该连通块外的 AI 与连通块内的 AI 之间存在通路。一个连通块的大小被定义为这个连通块包含的 AI 的个数。\n\n现在 Kukuru 想要知道：在给定这些信息的情况下，这 $n$ 个 AI 有多少种可能的连接方式呢？称两种连接方式不同，当且仅当在一个方案中某两个 AI $u,v$ 之间存在直接通路，而在另一种方案中不存在。因为方案可能很多，所以 Kukuru 只需要你告诉她答案对 $998244353$ 取模的结果就好了。你能解决这个问题吗？**特别地，保证存在至少一种合法的 AI 连接方式符合题意**。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行的第一个正整数 $d_i$ 表示删掉第 $i$ 个 AI 后的连通块个数；接下来，同一行内包含 $d_i$ 个正整数，依次描述每个连通块的大小。", "outputFormat": "仅一行，一个非负整数，表示 AI 可能的连接方式个数对 $998244353$ 取模的结果。", "hint": "**【样例解释 \\#1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/425v8z3m.png)\n\n**【样例解释 \\#2】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h6wzikqz.png)\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（16 分）：$n \\leq 8$。\n- 子任务 2（9 分）：存在合法的 AI 连接方式，使得至少一个 AI 与所有其它 AI 直接相连。\n- 子任务 3（9 分）：存在合法的 AI 连接方式，使得 AI 都和不超过 $2$ 个其它 AI 直接相连。\n- 子任务 4（21 分）：$n \\leq 20$。\n- 子任务 5（18 分）：$n \\leq 5\\times 10^3$。\n- 子任务 6（27 分）：无特殊限制。\n\n对于所有数据，保证 $2 \\leq n \\leq 3\\times 10^5$。保证取模前的真实答案大于 $0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X8-T4】「TAOI-3」Warmth of the Eternity", "background": "原题链接：<https://oier.team/problems/X8E>。", "description": "Kukuru 是 AI 领域大神。[如果你是 E.Space 的粉丝的话](/problem/P8294)，你应该知道，$n$ 个 AI 会组成一个树形结构。具体地，对于 $n$ 个 AI，它们之间会构建出恰好 $(n-1)$ 条通路，每条通路会连接两个 AI，并且任意两个 AI 都被直接或间接地连接起来。\n\n但是 Kukuru 忘记了她的 $n$ 个 AI 是如何连接的了。所幸，她还记得：对于所有 $i$，假如删去第 $i$ 个 AI 并断开所有和它相连的通路之后，剩下的 AI 组成的所有连通块的大小。\n\n称若干 AI 形成一个连通块，当且仅当它们两两之间可以通过若干通路互相连接，且没有该连通块外的 AI 与连通块内的 AI 之间存在通路。一个连通块的大小被定义为这个连通块包含的 AI 的个数。\n\n现在 Kukuru 想要知道：在给定这些信息的情况下，这 $n$ 个 AI 有多少种可能的连接方式呢？称两种连接方式不同，当且仅当在一个方案中某两个 AI $u,v$ 之间存在直接通路，而在另一种方案中不存在。因为方案可能很多，所以 Kukuru 只需要你告诉她答案对 $998244353$ 取模的结果就好了。你能解决这个问题吗？**特别地，保证存在至少一种合法的 AI 连接方式符合题意**。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行的第一个正整数 $d_i$ 表示删掉第 $i$ 个 AI 后的连通块个数；接下来，同一行内包含 $d_i$ 个正整数，依次描述每个连通块的大小。", "outputFormat": "仅一行，一个非负整数，表示 AI 可能的连接方式个数对 $998244353$ 取模的结果。", "hint": "**【样例解释 \\#1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/425v8z3m.png)\n\n**【样例解释 \\#2】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h6wzikqz.png)\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（16 分）：$n \\leq 8$。\n- 子任务 2（9 分）：存在合法的 AI 连接方式，使得至少一个 AI 与所有其它 AI 直接相连。\n- 子任务 3（9 分）：存在合法的 AI 连接方式，使得 AI 都和不超过 $2$ 个其它 AI 直接相连。\n- 子任务 4（21 分）：$n \\leq 20$。\n- 子任务 5（18 分）：$n \\leq 5\\times 10^3$。\n- 子任务 6（27 分）：无特殊限制。\n\n对于所有数据，保证 $2 \\leq n \\leq 3\\times 10^5$。保证取模前的真实答案大于 $0$。", "locale": "zh-CN"}}}
{"pid": "P11646", "type": "P", "difficulty": 6, "samples": [["8 998244353 1\n1\n2\n3\n5\n98\n197\n1145\n4950\n", "0\n1\n4\n65\n369585723\n752044625\n87224156\n664115047"], ["8 998244353 0\n1\n2\n3\n5\n98\n197\n1145\n4950\n", "0\n1\n3\n65\n607286080\n653853011\n777350973\n422131392"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X8-T5】「TAOI-3」蓝宝石的存在证明", "background": "原题链接：<https://oier.team/problems/X8F>。\n\n---\n\n她背对着曾崇拜神的祭坛，就像在祈祷的圣女一样。\n\n——啊，神呀。这是何等的悲剧。\n\n能否恳请您把这出悲剧变成喜剧，变成一出任何人也能开怀大笑的愉快喜剧?\n\n然后，若是您大发慈悲，求求实现我的恋情。是的，唯有一回我也乐意。\n\n向神发誓，我赌上一生来爱你。\n\n向神发誓，我求得偿夙愿。", "description": "——只要打开这本魔法之书，自己的存在就会被世人遗忘。\n\n世人之间的连接可以被看做一个 $n$ 个点的有标号无向简单**连通**图 $(V,E)$。此外，Kisaki 还会给你一个整数 $t \\in \\{0,1\\}$，若 $t=0$，则这张无向连通图必须满足任意两点之间存在唯一的简单路径。若 $t=1$，则没有限制。\n\n我们定义一个 $V$ 的一个子集 $W$ 是「紧密」的，当且仅当 $W$ 是图上的一个连通块，满足 $|W| \\ge 2$，且对于任意 $u,v \\in W$，都满足 $\\text{dis}(u,v) \\le 2$，其中 $\\text{dis}(u,v)$ 为 $u,v$ 最短路径上的边数。\n\n对于世人的一种连接方式，Kisaki 定义它是好的，当且仅当存在 **恰好** 一种方案把 $V$ 划分成若干点集，使得每个划分出的点集都是「紧密」的。\n\n现在，Kisaki 告诉了你 $n$ 和 $t$，她想要知道，有多少种好的连接方式。当然，可能的方案是很多的，所以如你所想地——你所计算的方案数需要对模数 $P$ 取模（$P$ 未必是素数）。另外，她可能会问你很多次。", "inputFormat": "第一行，三个非负整数 $T, P, t$，其中 $T$ 为询问的次数。\n\n接下来 $T$ 行，每行一个正整数 $n$。", "outputFormat": "$T$ 行，每行一个非负整数，代表询问的答案对 $P$ 取模的值。", "hint": "**【样例解释 #1】**\n\n若 $n=3$ 且 $t=1$，一种合法的连接方式如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c89l5zsn.png)\n\n唯一一种对它的合法划分方案为，划分成 $\\{1,2,3\\}$ 这一个集合。这种连接方式在 $t=0$ 时是不合法的。\n\n**【样例解释 #2】**\n\n若 $n=5$，无论 $t=0$ 还是 $t=1$，一种合法的连接方式如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/asn5svxb.png)\n\n唯一一种对它的合法划分方案为，划分成 $\\{1,2\\}$ 和 $\\{3,4,5\\}$ 两个集合。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（1 分）：$P=1$。\n- 子任务 2（6 分）：$n,T \\le 7$，$t=0$。\n- 子任务 3（6 分）：$n,T \\le 7$，$t=1$。\n- 子任务 4（12 分）：$P \\le 2$，$t=1$。\n- 子任务 5（23 分）：$t=0$。\n- 子任务 6（21 分）：$n,T \\le 100$。\n- 子任务 7（17 分）：$P \\ge 10^8$ 且 $P$ 为质数。\n- 子任务 8（14 分）：无特殊限制。\n\n对于所有数据，保证 $1 \\le n,T \\le 5 \\times 10^3$，$0 \\le t \\le 1$，$1 \\le P \\le 1.05 \\times 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X8-T5】「TAOI-3」蓝宝石的存在证明", "background": "原题链接：<https://oier.team/problems/X8F>。\n\n---\n\n她背对着曾崇拜神的祭坛，就像在祈祷的圣女一样。\n\n——啊，神呀。这是何等的悲剧。\n\n能否恳请您把这出悲剧变成喜剧，变成一出任何人也能开怀大笑的愉快喜剧?\n\n然后，若是您大发慈悲，求求实现我的恋情。是的，唯有一回我也乐意。\n\n向神发誓，我赌上一生来爱你。\n\n向神发誓，我求得偿夙愿。", "description": "——只要打开这本魔法之书，自己的存在就会被世人遗忘。\n\n世人之间的连接可以被看做一个 $n$ 个点的有标号无向简单**连通**图 $(V,E)$。此外，Kisaki 还会给你一个整数 $t \\in \\{0,1\\}$，若 $t=0$，则这张无向连通图必须满足任意两点之间存在唯一的简单路径。若 $t=1$，则没有限制。\n\n我们定义一个 $V$ 的一个子集 $W$ 是「紧密」的，当且仅当 $W$ 是图上的一个连通块，满足 $|W| \\ge 2$，且对于任意 $u,v \\in W$，都满足 $\\text{dis}(u,v) \\le 2$，其中 $\\text{dis}(u,v)$ 为 $u,v$ 最短路径上的边数。\n\n对于世人的一种连接方式，Kisaki 定义它是好的，当且仅当存在 **恰好** 一种方案把 $V$ 划分成若干点集，使得每个划分出的点集都是「紧密」的。\n\n现在，Kisaki 告诉了你 $n$ 和 $t$，她想要知道，有多少种好的连接方式。当然，可能的方案是很多的，所以如你所想地——你所计算的方案数需要对模数 $P$ 取模（$P$ 未必是素数）。另外，她可能会问你很多次。", "inputFormat": "第一行，三个非负整数 $T, P, t$，其中 $T$ 为询问的次数。\n\n接下来 $T$ 行，每行一个正整数 $n$。", "outputFormat": "$T$ 行，每行一个非负整数，代表询问的答案对 $P$ 取模的值。", "hint": "**【样例解释 #1】**\n\n若 $n=3$ 且 $t=1$，一种合法的连接方式如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c89l5zsn.png)\n\n唯一一种对它的合法划分方案为，划分成 $\\{1,2,3\\}$ 这一个集合。这种连接方式在 $t=0$ 时是不合法的。\n\n**【样例解释 #2】**\n\n若 $n=5$，无论 $t=0$ 还是 $t=1$，一种合法的连接方式如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/asn5svxb.png)\n\n唯一一种对它的合法划分方案为，划分成 $\\{1,2\\}$ 和 $\\{3,4,5\\}$ 两个集合。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（1 分）：$P=1$。\n- 子任务 2（6 分）：$n,T \\le 7$，$t=0$。\n- 子任务 3（6 分）：$n,T \\le 7$，$t=1$。\n- 子任务 4（12 分）：$P \\le 2$，$t=1$。\n- 子任务 5（23 分）：$t=0$。\n- 子任务 6（21 分）：$n,T \\le 100$。\n- 子任务 7（17 分）：$P \\ge 10^8$ 且 $P$ 为质数。\n- 子任务 8（14 分）：无特殊限制。\n\n对于所有数据，保证 $1 \\le n,T \\le 5 \\times 10^3$，$0 \\le t \\le 1$，$1 \\le P \\le 1.05 \\times 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11647", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [5000, 5000, 5000], "memory": [524288, 524288, 524288]}, "tags": ["交互题", "Special Judge", "O2优化", "梦熊比赛"], "title": "【MX-X8-T6】「TAOI-3」俄罗斯蓝猫", "background": "原题链接：<https://oier.team/problems/X8G>。\n\n---\n\n由于洛谷有特殊的交互题机制，你不需要也不应该在文件开头包含 `kiwi.h`，而是把以下语句复制在文件开头：\n\n```cpp\n#include<vector>\nstd::vector<long long> game(int n);\nstd::vector<long long> ask(std::vector<int> x,std::vector<int> y);\n```\n\n\n---\n\n小千绘莉想和你玩游戏！", "description": "小千藏有 $n$ 个在 $[0,10^{18}]$ 中间**随机生成**的非负整数 $a_0,a_1,\\dots,a_{n-1}$。\n\n你一组询问可以向小千给出不超过 $2n$ 个二元组 $(x_0,y_0),(x_1,y_1),\\dots,(x_{m-1},y_{m-1})$，假设 $b_i=a_{x_i}+a_{y_i}$，小千会告诉你 $b_0,b_1,\\dots,b_{m-1}$ **从小到大排序**后的结果。\n\n你可以向小千提出不超过 $n$ 组询问，你需要**按顺序**返回 $a_0,a_1,\\dots,a_{n-1}$。\n\n需要注意的是：\n\n- 如果你一次询问提出大于 $2n$ 个二元组，或者提出了大于 $n$ 次询问，你会获得 $0$ 分。\n- 小千不喜欢重复，如果你某次询问的某个二元组有 $x_i=y_i$，或者有某个**无序对** $(x_i,y_i)$ 被询问了多次（在一组询问间或两组不同的询问之间）。小千都会扣除部分分数。\n- 具体评分标准见下面【**评分标准**】。\n- **请不要在标准输出输出任何内容**。否则视为攻击交互库。会被判定为 Wrong Answer。", "inputFormat": "你不需要，也不应该实现 `main` 函数。\n\n你需要保证你的文件包含了 `kiwi.h`。你可以通过在代码开头加入下面语句实现：\n\n```cpp\n#include\"kiwi.h\"\n```\n\n你需要实现以下函数：\n\n```cpp\nstd::vector<long long> game(int n);\n```\n\n其中 $n$ 表示随机数的数量。\n\n这个函数应当返回一个长度为 $n$ 的数组，表示你求出的数组 $a_i$。\n\n你可以调用如下函数：\n\n```cpp\nstd::vector<long long> ask(std::vector<int> x,std::vector<int> y);\n```\n\n- 你需要保证 $x,y$ 序列长度相同；\n- 该函数会返回和 $x,y$ 长度相等的序列表示 $a_{x_i}+a_{y_i}$ 从小到大排序后的结果。\n\n保证在题目给定的询问次数和 $x,y$ 长度的限制下，交互库占用资源不超过 $2$ 秒和 $16$ MiB。\n\n下发 `grader.cpp` 为参考交互库，和最终的交互库有所不同。你的做法不应该依赖于交互库实现。\n\n下发 `kiwi.cpp` 为参考实现，你可以通过以下语句来编译你的代码：\n\n```cpp\ng++ grader.cpp kiwi.cpp -o kiwi -O2 -std=c++14 -static\n```\n\n对编译出来的程序，你只需要输入三个正整数 $T,n,R$ 分别表示数据组组数，每组数据的 $n$ 和随机种子。\n\n**实际的交互库中，随机数种子随时间变化。也就是两次不同时间的提交，答案是不同的。**", "outputFormat": "输入完成后，交互库会调用 $T$ 次函数 `game`。每次调用结束后会向标准输出输出以下信息：\n\n- `Wrong Answer[1]` 表示你某次调用 `ask` 函数中 $x,y$ 长度不相同；\n- `Wrong Answer[2]` 表示你某次调用 `ask` 函数中 $x,y$ 长度大于 $2n$；\n- `Wrong Answer[3]` 表示你某次调用 `ask` 函数中 $x_i,y_i$ 的元素不在 $[0,n-1]$ 内；\n- `Wrong Answer[4]` 表示你本次 `game` 中调用了超过 $n$ 次 `ask`；\n- `Wrong Answer[5]` 表示你本次调用 `game` 函数返回序列的长度不是 $n$；\n- `Wrong Answer[6]` 表示你返回了错误的答案；\n- `OK, you can get p points.` 表示你返回了正确的答案，并且获得了这个测试点 $p\\%$ 的分数。评分标准见下面说明。\n\n如果你的代码同时违反了多个规定，只会显示一个，且此时程序会立刻停止。", "hint": "**【评分标准】**\n\n**本题首先会受到和传统相同的限制**。例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 $0$ 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n假设该测试点满分为 $P$。\n\n- 如果你违反了上述 Wrong Answer 的规则，或者在标准输出中输出了内容，会直接得 $0$ 分。\n- 如果你某次调用 `ask` 时 $x_i=y_i$ 则 $C_1=0.8$，否则 $C_1=1$；\n- 如果你调用 `ask` 时，询问了两组相同的 $\\{x_i,y_i\\}$ 则 $C_2=0.7$，否则 $C_2=1$；\n- 假设你一共调用了 $A$ 次 `ask`，则：\n\t- 如果 $0\\leq A\\leq 2$，则 $C_3=1$；\n   - 如果 $A=3$，则 $C_3=0.8$；\n   - 如果 $A=4$，则 $C_3=0.6$；\n   - 如果 $5\\leq A\\leq 10$，则 $C_3=0.4$；\n   - 如果 $11\\leq A$，则 $C_3=0.2$。\n- 假设你调用 `ask` 时，$x$ 数组的**最大长度**为 $B$，则：\n\t- 如果 $1\\leq B\\leq n-1$，则 $C_4=1$；\n   - 如果 $B=n$，则 $C_4=0.9$；\n   - 如果 $B=n+1$，则 $C_4=0.8$；\n   - 如果 $B=n+2$，则 $C_4=0.7$；\n   - 如果 $n+3\\leq B\\leq n+20$，则 $C_4=0.6$；\n   - 如果 $n+21\\leq B$，则 $C_4=0.5$。\n   \n本测试点的最终得分为所有 `game` 函数，$P\\times C_1\\times C_2\\times C_3\\times C_4$ 最小值**向下取整**。\n\n**【数据范围】**\n\n对于所有数据，保证 $T=20$，$5\\leq n\\leq 500$。\n\n- 测试点 1（30 分）：$n=5$。\n- 测试点 2（30 分）：$n=50$。\n- 测试点 3（40 分）：$n=500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X8-T6】「TAOI-3」俄罗斯蓝猫", "background": "原题链接：<https://oier.team/problems/X8G>。\n\n---\n\n由于洛谷有特殊的交互题机制，你不需要也不应该在文件开头包含 `kiwi.h`，而是把以下语句复制在文件开头：\n\n```cpp\n#include<vector>\nstd::vector<long long> game(int n);\nstd::vector<long long> ask(std::vector<int> x,std::vector<int> y);\n```\n\n\n---\n\n小千绘莉想和你玩游戏！", "description": "小千藏有 $n$ 个在 $[0,10^{18}]$ 中间**随机生成**的非负整数 $a_0,a_1,\\dots,a_{n-1}$。\n\n你一组询问可以向小千给出不超过 $2n$ 个二元组 $(x_0,y_0),(x_1,y_1),\\dots,(x_{m-1},y_{m-1})$，假设 $b_i=a_{x_i}+a_{y_i}$，小千会告诉你 $b_0,b_1,\\dots,b_{m-1}$ **从小到大排序**后的结果。\n\n你可以向小千提出不超过 $n$ 组询问，你需要**按顺序**返回 $a_0,a_1,\\dots,a_{n-1}$。\n\n需要注意的是：\n\n- 如果你一次询问提出大于 $2n$ 个二元组，或者提出了大于 $n$ 次询问，你会获得 $0$ 分。\n- 小千不喜欢重复，如果你某次询问的某个二元组有 $x_i=y_i$，或者有某个**无序对** $(x_i,y_i)$ 被询问了多次（在一组询问间或两组不同的询问之间）。小千都会扣除部分分数。\n- 具体评分标准见下面【**评分标准**】。\n- **请不要在标准输出输出任何内容**。否则视为攻击交互库。会被判定为 Wrong Answer。", "inputFormat": "你不需要，也不应该实现 `main` 函数。\n\n你需要保证你的文件包含了 `kiwi.h`。你可以通过在代码开头加入下面语句实现：\n\n```cpp\n#include\"kiwi.h\"\n```\n\n你需要实现以下函数：\n\n```cpp\nstd::vector<long long> game(int n);\n```\n\n其中 $n$ 表示随机数的数量。\n\n这个函数应当返回一个长度为 $n$ 的数组，表示你求出的数组 $a_i$。\n\n你可以调用如下函数：\n\n```cpp\nstd::vector<long long> ask(std::vector<int> x,std::vector<int> y);\n```\n\n- 你需要保证 $x,y$ 序列长度相同；\n- 该函数会返回和 $x,y$ 长度相等的序列表示 $a_{x_i}+a_{y_i}$ 从小到大排序后的结果。\n\n保证在题目给定的询问次数和 $x,y$ 长度的限制下，交互库占用资源不超过 $2$ 秒和 $16$ MiB。\n\n下发 `grader.cpp` 为参考交互库，和最终的交互库有所不同。你的做法不应该依赖于交互库实现。\n\n下发 `kiwi.cpp` 为参考实现，你可以通过以下语句来编译你的代码：\n\n```cpp\ng++ grader.cpp kiwi.cpp -o kiwi -O2 -std=c++14 -static\n```\n\n对编译出来的程序，你只需要输入三个正整数 $T,n,R$ 分别表示数据组组数，每组数据的 $n$ 和随机种子。\n\n**实际的交互库中，随机数种子随时间变化。也就是两次不同时间的提交，答案是不同的。**", "outputFormat": "输入完成后，交互库会调用 $T$ 次函数 `game`。每次调用结束后会向标准输出输出以下信息：\n\n- `Wrong Answer[1]` 表示你某次调用 `ask` 函数中 $x,y$ 长度不相同；\n- `Wrong Answer[2]` 表示你某次调用 `ask` 函数中 $x,y$ 长度大于 $2n$；\n- `Wrong Answer[3]` 表示你某次调用 `ask` 函数中 $x_i,y_i$ 的元素不在 $[0,n-1]$ 内；\n- `Wrong Answer[4]` 表示你本次 `game` 中调用了超过 $n$ 次 `ask`；\n- `Wrong Answer[5]` 表示你本次调用 `game` 函数返回序列的长度不是 $n$；\n- `Wrong Answer[6]` 表示你返回了错误的答案；\n- `OK, you can get p points.` 表示你返回了正确的答案，并且获得了这个测试点 $p\\%$ 的分数。评分标准见下面说明。\n\n如果你的代码同时违反了多个规定，只会显示一个，且此时程序会立刻停止。", "hint": "**【评分标准】**\n\n**本题首先会受到和传统相同的限制**。例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 $0$ 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n假设该测试点满分为 $P$。\n\n- 如果你违反了上述 Wrong Answer 的规则，或者在标准输出中输出了内容，会直接得 $0$ 分。\n- 如果你某次调用 `ask` 时 $x_i=y_i$ 则 $C_1=0.8$，否则 $C_1=1$；\n- 如果你调用 `ask` 时，询问了两组相同的 $\\{x_i,y_i\\}$ 则 $C_2=0.7$，否则 $C_2=1$；\n- 假设你一共调用了 $A$ 次 `ask`，则：\n\t- 如果 $0\\leq A\\leq 2$，则 $C_3=1$；\n   - 如果 $A=3$，则 $C_3=0.8$；\n   - 如果 $A=4$，则 $C_3=0.6$；\n   - 如果 $5\\leq A\\leq 10$，则 $C_3=0.4$；\n   - 如果 $11\\leq A$，则 $C_3=0.2$。\n- 假设你调用 `ask` 时，$x$ 数组的**最大长度**为 $B$，则：\n\t- 如果 $1\\leq B\\leq n-1$，则 $C_4=1$；\n   - 如果 $B=n$，则 $C_4=0.9$；\n   - 如果 $B=n+1$，则 $C_4=0.8$；\n   - 如果 $B=n+2$，则 $C_4=0.7$；\n   - 如果 $n+3\\leq B\\leq n+20$，则 $C_4=0.6$；\n   - 如果 $n+21\\leq B$，则 $C_4=0.5$。\n   \n本测试点的最终得分为所有 `game` 函数，$P\\times C_1\\times C_2\\times C_3\\times C_4$ 最小值**向下取整**。\n\n**【数据范围】**\n\n对于所有数据，保证 $T=20$，$5\\leq n\\leq 500$。\n\n- 测试点 1（30 分）：$n=5$。\n- 测试点 2（30 分）：$n=50$。\n- 测试点 3（40 分）：$n=500$。", "locale": "zh-CN"}}}
{"pid": "P11648", "type": "P", "difficulty": 7, "samples": [["5 3\n1 4 5\n2 1 3 1 1\n5 4\n5 1\n4 2\n1 3\n", "107 1 5 3 6\n"], ["10 4\n181 339 132 527\n2 1 1 1 1 3 1 1 4 4\n8 5\n5 2\n2 9\n9 3\n8 4\n9 1\n1 6\n2 10\n8 7\n", "183192077 480177 181 181 1810 132 181 1086 1720916 527\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X8-T7】「TAOI-3」2236 A.D.", "background": "原题链接：<https://oier.team/problems/X8H>。\n\n---\n\n公元 2236 年 4 月 1 日，收到了 99 封邮件。\n\n这 99 封内容完全相同的邮件的发件人是......她。", "description": "Masuko 有一棵 $n$ 个结点的树，以 $1$ 为根，每个结点上都有一个 $[1,k]$ 之间的颜色 $c_i$（$\\bm{k \\le 15}$），同时给定权值数组 $a_1,a_2,\\dots,a_{k}$。\n\n定义两个点 $u,v$ 之间的权值 $f(u,v)$ 如下：\n\n- 设 $u=p_1,p_2,\\dots,p_m=v$ 是 $u$ 到 $v$ 的最短路径，$f(u,v)=\\prod_{i\\in\\{x|\\exists j\\in[1,m],c_{p_j}=x\\}}a_i$。\n\n即 $u,v$ 最短路径上所有出现过的颜色的权值乘积。\n\n你需要对每个 $u=1,2,3,\\dots,n$。求出 $u$ 子树内，所有无序点对的权值和。具体的，假设 $S_u$ 表示所有到根的最短路径上经过 $u$ 的结点组成的集合，你需要输出：\n\n$$\n\\sum_{x,y\\in S_u,x\\leq y} f(x,y)\n$$\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$k$ 个非负整数 $a_1,a_2,\\dots,a_k$。\n\n第三行，$n$ 个正整数 $c_1,c_2,\\dots,c_n$。\n\n接下来 $(n-1)$ 行，每行两个正整数 $u_i, v_i$，表示一条连接点 $u_i$、$v_i$ 的边。", "outputFormat": "仅一行，$n$ 个非负整数，其中第 $i$ 个表示考虑 $i$ 子树内所有无序点对的权值之和，对 $998244353$ 取模后的结果。", "hint": "**【样例解释 #1】**\n\n- 当 $u=2$ 时，$u$ 子树内只有 $\\{2\\}$，$f(2,2)=a_{c_2}=1$。\n- 当 $u=4$ 时，$u$ 子树内有 $\\{2,4\\}$，答案为 $f(2,2)+f(4,4)+f(2,4)=1+1+1=3$。\n\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- 子任务 1（5 分）：$n\\leq 1000$；\n- 子任务 2（10 分）：$n\\leq 5000$；\n- 子任务 3（10 分）：$k=2$；\n- 子任务 4（10 分）：$v_i=u_i+1$；\n- 子任务 5（10 分）：$u_i=1$；\n- 子任务 6（20 分）：$u_i$ 在 $[1,i]$ 中随机生成，$v_i=i+1$；\n- 子任务 7（15 分）：$n\\leq 10^5$；\n- 子任务 8（10 分）：$n\\leq 2\\times 10^5$；\n- 子任务 9（10 分）：无特殊限制。\n\n\n对于所有数据，保证 $1\\leq n\\leq 5\\times 10^5$，$1\\leq k\\leq 15$，$0\\leq a_i<998244353$，$1\\leq c_i\\leq k$，$1 \\le u_i,v_i \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X8-T7】「TAOI-3」2236 A.D.", "background": "原题链接：<https://oier.team/problems/X8H>。\n\n---\n\n公元 2236 年 4 月 1 日，收到了 99 封邮件。\n\n这 99 封内容完全相同的邮件的发件人是......她。", "description": "Masuko 有一棵 $n$ 个结点的树，以 $1$ 为根，每个结点上都有一个 $[1,k]$ 之间的颜色 $c_i$（$\\bm{k \\le 15}$），同时给定权值数组 $a_1,a_2,\\dots,a_{k}$。\n\n定义两个点 $u,v$ 之间的权值 $f(u,v)$ 如下：\n\n- 设 $u=p_1,p_2,\\dots,p_m=v$ 是 $u$ 到 $v$ 的最短路径，$f(u,v)=\\prod_{i\\in\\{x|\\exists j\\in[1,m],c_{p_j}=x\\}}a_i$。\n\n即 $u,v$ 最短路径上所有出现过的颜色的权值乘积。\n\n你需要对每个 $u=1,2,3,\\dots,n$。求出 $u$ 子树内，所有无序点对的权值和。具体的，假设 $S_u$ 表示所有到根的最短路径上经过 $u$ 的结点组成的集合，你需要输出：\n\n$$\n\\sum_{x,y\\in S_u,x\\leq y} f(x,y)\n$$\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$k$ 个非负整数 $a_1,a_2,\\dots,a_k$。\n\n第三行，$n$ 个正整数 $c_1,c_2,\\dots,c_n$。\n\n接下来 $(n-1)$ 行，每行两个正整数 $u_i, v_i$，表示一条连接点 $u_i$、$v_i$ 的边。", "outputFormat": "仅一行，$n$ 个非负整数，其中第 $i$ 个表示考虑 $i$ 子树内所有无序点对的权值之和，对 $998244353$ 取模后的结果。", "hint": "**【样例解释 #1】**\n\n- 当 $u=2$ 时，$u$ 子树内只有 $\\{2\\}$，$f(2,2)=a_{c_2}=1$。\n- 当 $u=4$ 时，$u$ 子树内有 $\\{2,4\\}$，答案为 $f(2,2)+f(4,4)+f(2,4)=1+1+1=3$。\n\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- 子任务 1（5 分）：$n\\leq 1000$；\n- 子任务 2（10 分）：$n\\leq 5000$；\n- 子任务 3（10 分）：$k=2$；\n- 子任务 4（10 分）：$v_i=u_i+1$；\n- 子任务 5（10 分）：$u_i=1$；\n- 子任务 6（20 分）：$u_i$ 在 $[1,i]$ 中随机生成，$v_i=i+1$；\n- 子任务 7（15 分）：$n\\leq 10^5$；\n- 子任务 8（10 分）：$n\\leq 2\\times 10^5$；\n- 子任务 9（10 分）：无特殊限制。\n\n\n对于所有数据，保证 $1\\leq n\\leq 5\\times 10^5$，$1\\leq k\\leq 15$，$0\\leq a_i<998244353$，$1\\leq c_i\\leq k$，$1 \\le u_i,v_i \\le n$。", "locale": "zh-CN"}}}
{"pid": "P11649", "type": "P", "difficulty": 2, "samples": [["7 1\nQ 4 4", "25"], ["5 1\nN 3 3", "9"], ["6 3\nR 1 4\nQ 2 1\nN 5 2", "25"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #4] 棋 / Šah", "background": "译自 [COCI 2024/2025 #4](https://hsin.hr/coci/) T1。$\\texttt{3s,0.5G}$。满分为 $50$。\n", "description": "\n有一块 $n\\times n$ 的国际象棋棋盘，上面摆放着 $m$ 个棋子。棋子的类型只有骑士（knight），车（rook）和皇后（queen）。\n\n已知\n\n- 骑士的攻击范围为：**骑士所在的格子**，以及骑士所在的格子走一列两行（或者一行两列）能走到的所有格子；\n- 车的攻击范围为：与车所在的格子同一行或者同一列的格子（**包括车所在的格子**）；\n- 皇后的攻击范围为：与皇后所在的格子同一行，同一列或者同一对角线的格子（**包括皇后所在的格子**）。\n\n求出这个棋盘上有多少个格子被至少一个棋子攻击。\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n接下来 $m$ 行，每行一个字符和两个正整数 $C,x,y$，表示有一枚类型 $C$ 的棋子在 $(x,y)$。\n\n- $C=\\texttt{N}$，表示骑士；\n- $C=\\texttt{R}$，表示车；\n- $C=\\texttt{Q}$，表示皇后。\n\n数据保证不会有两个棋子在一个格子里。", "outputFormat": "输出一行一个正整数，表示答案。\n", "hint": "\n#### 样例解释\n\n样例 $1,2$ 解释见图片。注意，每个棋子也会攻击它所在的格子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p046yc9x.png)![](https://cdn.luogu.com.cn/upload/image_hosting/nn6oomkg.png)\n\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 200$；\n- $1\\le m\\le n^2$；\n- 不会有两个棋子在一个格子里。\n\n| 子任务编号 | $C\\in $ | 得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    |  $\\texttt{R}$    |   $ 13 $   |  \n| $ 2 $    |  $\\texttt{R},\\texttt{Q}$  |  $ 19 $   |  \n| $ 3 $   | $ \\texttt{N},\\texttt{R},\\texttt{Q} $   | $18$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #4] 棋 / Šah", "background": "译自 [COCI 2024/2025 #4](https://hsin.hr/coci/) T1。$\\texttt{3s,0.5G}$。满分为 $50$。\n", "description": "\n有一块 $n\\times n$ 的国际象棋棋盘，上面摆放着 $m$ 个棋子。棋子的类型只有骑士（knight），车（rook）和皇后（queen）。\n\n已知\n\n- 骑士的攻击范围为：**骑士所在的格子**，以及骑士所在的格子走一列两行（或者一行两列）能走到的所有格子；\n- 车的攻击范围为：与车所在的格子同一行或者同一列的格子（**包括车所在的格子**）；\n- 皇后的攻击范围为：与皇后所在的格子同一行，同一列或者同一对角线的格子（**包括皇后所在的格子**）。\n\n求出这个棋盘上有多少个格子被至少一个棋子攻击。\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n接下来 $m$ 行，每行一个字符和两个正整数 $C,x,y$，表示有一枚类型 $C$ 的棋子在 $(x,y)$。\n\n- $C=\\texttt{N}$，表示骑士；\n- $C=\\texttt{R}$，表示车；\n- $C=\\texttt{Q}$，表示皇后。\n\n数据保证不会有两个棋子在一个格子里。", "outputFormat": "输出一行一个正整数，表示答案。\n", "hint": "\n#### 样例解释\n\n样例 $1,2$ 解释见图片。注意，每个棋子也会攻击它所在的格子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p046yc9x.png)![](https://cdn.luogu.com.cn/upload/image_hosting/nn6oomkg.png)\n\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 200$；\n- $1\\le m\\le n^2$；\n- 不会有两个棋子在一个格子里。\n\n| 子任务编号 | $C\\in $ | 得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    |  $\\texttt{R}$    |   $ 13 $   |  \n| $ 2 $    |  $\\texttt{R},\\texttt{Q}$  |  $ 19 $   |  \n| $ 3 $   | $ \\texttt{N},\\texttt{R},\\texttt{Q} $   | $18$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P11650", "type": "P", "difficulty": 3, "samples": [["5 5 12\n3 4 7 8 11\n3 2 1 2 1", "3"], ["5 10 40\n1 20 30 2 38\n7 7 7 7 7", "5"], ["4 5 12\n3 6 9 10\n2 1 2 2", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2025", "排序", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #4] 力 / Benzinska", "background": "译自 [COCI 2024/2025 #4](https://hsin.hr/coci/) T2。$\\texttt{1s,0.5G}$。满分为 $70$。\n", "description": "\n在数轴上，Malnar 从原点（$x=0$）出发，前往 $x=X$ 处。\n\nMalnar 初始有 $D$ 单位能量，每走一个单位长度消耗一单位能量。在整个过程中，能量必须**不小于** $0$。\n\n有 $n$ 个餐馆，第 $i$ 个餐馆位于 $x=x_i$ 处，在第 $i$ 个餐馆用餐可以使能量增加 $y_i$。**至多只能在每个餐馆用一次餐，且不同餐馆的 $x_i$ 可能相同。**\n\n求出为了达成目标，至少需要在多少个餐馆用餐。", "inputFormat": "\n第一行，三个正整数 $n,D,X$。\n\n第二行，$n$ 个正整数 $x_1,\\ldots,x_n$。\n\n第三行，$n$ 个正整数 $y_1,\\ldots,y_n$。\n", "outputFormat": "\n如果不可能，输出一行一个 $\\texttt{-1}$。\n\n否则输出一行一个非负整数表示答案。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：在第 $1,2,4$ 个餐馆用餐。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 2\\times 10^5$；\n- $1\\le D,X,y_i\\le 10^9$；\n- $1\\le x_i\\lt X$。\n\n\n| 子任务编号 | $n\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $2\\times 10^5$ |  A   |   $ 15 $   |  \n| $ 2 $    | $10^3$ |   |  $ 30 $   |  \n| $ 3 $    | $2\\times 10^5$  |  | $ 25 $   |\n\n- 特殊性质 A：$y_i$ 全相等。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #4] 力 / Benzinska", "background": "译自 [COCI 2024/2025 #4](https://hsin.hr/coci/) T2。$\\texttt{1s,0.5G}$。满分为 $70$。\n", "description": "\n在数轴上，Malnar 从原点（$x=0$）出发，前往 $x=X$ 处。\n\nMalnar 初始有 $D$ 单位能量，每走一个单位长度消耗一单位能量。在整个过程中，能量必须**不小于** $0$。\n\n有 $n$ 个餐馆，第 $i$ 个餐馆位于 $x=x_i$ 处，在第 $i$ 个餐馆用餐可以使能量增加 $y_i$。**至多只能在每个餐馆用一次餐，且不同餐馆的 $x_i$ 可能相同。**\n\n求出为了达成目标，至少需要在多少个餐馆用餐。", "inputFormat": "\n第一行，三个正整数 $n,D,X$。\n\n第二行，$n$ 个正整数 $x_1,\\ldots,x_n$。\n\n第三行，$n$ 个正整数 $y_1,\\ldots,y_n$。\n", "outputFormat": "\n如果不可能，输出一行一个 $\\texttt{-1}$。\n\n否则输出一行一个非负整数表示答案。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：在第 $1,2,4$ 个餐馆用餐。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 2\\times 10^5$；\n- $1\\le D,X,y_i\\le 10^9$；\n- $1\\le x_i\\lt X$。\n\n\n| 子任务编号 | $n\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $2\\times 10^5$ |  A   |   $ 15 $   |  \n| $ 2 $    | $10^3$ |   |  $ 30 $   |  \n| $ 3 $    | $2\\times 10^5$  |  | $ 25 $   |\n\n- 特殊性质 A：$y_i$ 全相等。\n\n", "locale": "zh-CN"}}}
{"pid": "P11651", "type": "P", "difficulty": 5, "samples": [["3\n2 4 5", "14"], ["4\n6 7 3 1", "3"], ["7\n2 3 5 7 9 11 13", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #4] Xor", "background": "译自 [COCI 2024/2025 #4](https://hsin.hr/coci/) T3。$\\texttt{1s,0.5G}$。满分为 $90$。\n", "description": "\n给定长度为 $n$ 的非负整数序列 $a_1,a_2,\\ldots,a_n$，求出 $\\displaystyle \\bigoplus _{1\\le i\\le j\\le n} \\left(a_i+a_j\\right) $。\n\n这里，$\\oplus$ 指按位异或运算。\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n第二行，$n$ 个非负整数 $a_1,a_2,\\ldots,a_n$。\n\n", "outputFormat": "输出一行一个整数表示答案。\n", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 5\\times 10^5$；\n- $0\\le a_i\\lt 2^{30}$。\n\n\n| 子任务编号 | $n\\le$ |  $a_i\\lt$ | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $2\\times 10^3$ | $2^{30}$  |   $ 7 $   |  \n| $ 2 $    | $5\\times 10^5$ | $2^{10}$  |   $ 17 $   |  \n| $ 3 $    | $10^5$ | $2^{30}$  |   $ 45 $   |  \n| $ 4 $    | $5\\times 10^5$ | $2^{30}$  |   $ 21 $   |  \n\n\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #4] Xor", "background": "译自 [COCI 2024/2025 #4](https://hsin.hr/coci/) T3。$\\texttt{1s,0.5G}$。满分为 $90$。\n", "description": "\n给定长度为 $n$ 的非负整数序列 $a_1,a_2,\\ldots,a_n$，求出 $\\displaystyle \\bigoplus _{1\\le i\\le j\\le n} \\left(a_i+a_j\\right) $。\n\n这里，$\\oplus$ 指按位异或运算。\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n第二行，$n$ 个非负整数 $a_1,a_2,\\ldots,a_n$。\n\n", "outputFormat": "输出一行一个整数表示答案。\n", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 5\\times 10^5$；\n- $0\\le a_i\\lt 2^{30}$。\n\n\n| 子任务编号 | $n\\le$ |  $a_i\\lt$ | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $2\\times 10^3$ | $2^{30}$  |   $ 7 $   |  \n| $ 2 $    | $5\\times 10^5$ | $2^{10}$  |   $ 17 $   |  \n| $ 3 $    | $10^5$ | $2^{30}$  |   $ 45 $   |  \n| $ 4 $    | $5\\times 10^5$ | $2^{30}$  |   $ 21 $   |  \n\n\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11652", "type": "P", "difficulty": 0, "samples": [["5 1 6\n2 1 2 1 2 1", "5"], ["6 0 4\n5 4 3 4", "17"], ["3 2 7\n1 2 3 2 3 1 3", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #4] 鞋 / Cipele（疑似错题）", "background": "译自 [COCI 2024/2025 #4](https://hsin.hr/coci/) T4。$\\texttt{2s,0.5G}$。满分为 $120$。\n\n根据[讨论](https://codeforces.com/blog/entry/138804?#comment-1242632)，本题为错题，可能不存在靠谱做法。\n", "description": "\n有 $n$ 双鞋，标号 $1\\sim n$。鞋柜是一个栈，初始鞋都在鞋柜中，从栈顶到栈底依次是第 $1,2,\\ldots,n$ 双鞋。\n\n接下来 $q$ 天，第 $i$ 天要穿标号为 $a_i$ 的鞋。如果这双鞋是栈顶到栈底第 $j$ 双鞋，则需要 $j$ 秒将其拿出（不改变其他鞋的相对顺序）；如果这双鞋在走廊里，则不花费时间。\n\n每天结束时，可以选择将标号为 $a_i$ 的鞋入栈，或者放在走廊里。走廊里至多能放 $m$ 双鞋。\n\n额外地，**除了取鞋的过程中**，随时都可以从走廊取任意多双鞋（以任意顺序）入栈。\n\n试最小化取鞋用的总时间。", "inputFormat": "\n第一行，三个整数 $n,m,q$。\n\n第二行，$q$ 个正整数 $a_1,a_2,\\ldots,a_q$。\n", "outputFormat": "输出一行一个正整数，表示答案。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：第 $1$ 天时取第 $2$ 双鞋并放在走廊。穿完第 $1$ 双鞋后立刻放入栈中。不难发现这样只需要 $2+1+0+1+0+1=5$ 秒。\n\n#### 提示\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 2\\times 10^5$；\n- $0\\le m\\le 2\\times 10^5$；\n- $1 \\le q\\le 10^6$；\n- $1\\le a_i\\le n$。\n\n\n| 子任务编号 | $n,m\\le$ | $q\\le $ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |:--: | \n| $ 1 $    | $10^3$ | $10^3$ |    |$ 17 $   |  \n| $ 2 $    | $2\\times 10^5$ | $10^6$ |  A  |$ 27 $   |  \n| $ 3 $    | $2\\times 10^5$ | $10^6$ |  B |$ 37 $   |  \n| $ 4 $    | $2\\times 10^5$ | $2\\times 10^5$ |    |$ 24 $   |  \n| $ 5 $    | $2\\times 10^5$ | $10^6$ |    |$ 15 $   |  \n\n- 特殊性质 A：$n=m$。\n- 特殊性质 B：$m=0$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #4] 鞋 / Cipele（疑似错题）", "background": "译自 [COCI 2024/2025 #4](https://hsin.hr/coci/) T4。$\\texttt{2s,0.5G}$。满分为 $120$。\n\n根据[讨论](https://codeforces.com/blog/entry/138804?#comment-1242632)，本题为错题，可能不存在靠谱做法。\n", "description": "\n有 $n$ 双鞋，标号 $1\\sim n$。鞋柜是一个栈，初始鞋都在鞋柜中，从栈顶到栈底依次是第 $1,2,\\ldots,n$ 双鞋。\n\n接下来 $q$ 天，第 $i$ 天要穿标号为 $a_i$ 的鞋。如果这双鞋是栈顶到栈底第 $j$ 双鞋，则需要 $j$ 秒将其拿出（不改变其他鞋的相对顺序）；如果这双鞋在走廊里，则不花费时间。\n\n每天结束时，可以选择将标号为 $a_i$ 的鞋入栈，或者放在走廊里。走廊里至多能放 $m$ 双鞋。\n\n额外地，**除了取鞋的过程中**，随时都可以从走廊取任意多双鞋（以任意顺序）入栈。\n\n试最小化取鞋用的总时间。", "inputFormat": "\n第一行，三个整数 $n,m,q$。\n\n第二行，$q$ 个正整数 $a_1,a_2,\\ldots,a_q$。\n", "outputFormat": "输出一行一个正整数，表示答案。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：第 $1$ 天时取第 $2$ 双鞋并放在走廊。穿完第 $1$ 双鞋后立刻放入栈中。不难发现这样只需要 $2+1+0+1+0+1=5$ 秒。\n\n#### 提示\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 2\\times 10^5$；\n- $0\\le m\\le 2\\times 10^5$；\n- $1 \\le q\\le 10^6$；\n- $1\\le a_i\\le n$。\n\n\n| 子任务编号 | $n,m\\le$ | $q\\le $ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |:--: | \n| $ 1 $    | $10^3$ | $10^3$ |    |$ 17 $   |  \n| $ 2 $    | $2\\times 10^5$ | $10^6$ |  A  |$ 27 $   |  \n| $ 3 $    | $2\\times 10^5$ | $10^6$ |  B |$ 37 $   |  \n| $ 4 $    | $2\\times 10^5$ | $2\\times 10^5$ |    |$ 24 $   |  \n| $ 5 $    | $2\\times 10^5$ | $10^6$ |    |$ 15 $   |  \n\n- 特殊性质 A：$n=m$。\n- 特殊性质 B：$m=0$。\n\n", "locale": "zh-CN"}}}
{"pid": "P11653", "type": "P", "difficulty": 5, "samples": [["5 1\n3 1\n3 2\n3 4\n3 5\n2 4\n3 5", "2"], ["6 7\n3 2\n5 3\n1 4\n6 1\n5 6\n4 2\n4 5\n1 2\n4 2\n2 6\n3 1\n1 6\n6 4", "10"], ["7 3\n4 1\n4 3\n6 4\n2 6\n5 2\n5 7\n4 4\n3 6\n4 1\n7 5", "-1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #4] 猫 / Tura Mačkica", "background": "\n译自 [COCI 2024/2025 #4](https://hsin.hr/coci/) T5。$\\texttt{0.5s,0.5G}$。满分为 $120$。\n\n猫是有很强的领土意识的动物。", "description": "\n给定一张 $n$ 个节点，$(n+m)$ 条边的图。\n\n其中 $n$ 条边是无向边，**保证只保留这 $n$ 条边时，图仍然连通。** 无向边**可能有重边自环**。\n\n此外，还有 $m$ 条有向边，每条有向边上有一只猫。有向边**可能有重边**，但没有自环。\n\n大家都喜欢撸猫。为此，你需要找到一条回路，使得这条回路经过每条有向边恰好一次。**每条边至多只能经过一次**。求出合法的回路的长度的最小值。\n\n（注：从两个方向经过同一条无向边，算作经过两次，因此是不合法的。）", "inputFormat": "\n第一行，两个非负整数 $n,m$。\n\n接下来 $n$ 行，每行两个正整数 $u_i,v_i$，描述一条无向边 $(u_i,v_i)$。注意可能有重边自环。\n\n接下来 $m$ 行，每行两个正整数 $x_i,y_i$，描述一条有向边 $x_i\\to y_i$。注意可能有重边。\n", "outputFormat": "\n如果不可能，输出一行一个 $\\texttt{-1}$；\n\n否则输出一行一个非负整数表示答案。\n", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 2\\times 10^4$；\n- $0\\le m\\le 2\\times 10^4$；  \n- $1\\le u_i,v_i,x_i,y_i\\le n$；\n- 只保留 $n$ 条无向边时，图是连通的；\n\n| 子任务编号 | $n,m\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $20$ |  |   $ 11 $   |  \n| $ 2 $    | $2\\times 10^4$ | A |  $ 41 $   |  \n| $ 3 $    | $2\\times 10^4$ |   |  $ 68 $   |  \n\n- 特殊性质 A：无向边中存在自环。\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #4] 猫 / Tura Mačkica", "background": "\n译自 [COCI 2024/2025 #4](https://hsin.hr/coci/) T5。$\\texttt{0.5s,0.5G}$。满分为 $120$。\n\n猫是有很强的领土意识的动物。", "description": "\n给定一张 $n$ 个节点，$(n+m)$ 条边的图。\n\n其中 $n$ 条边是无向边，**保证只保留这 $n$ 条边时，图仍然连通。** 无向边**可能有重边自环**。\n\n此外，还有 $m$ 条有向边，每条有向边上有一只猫。有向边**可能有重边**，但没有自环。\n\n大家都喜欢撸猫。为此，你需要找到一条回路，使得这条回路经过每条有向边恰好一次。**每条边至多只能经过一次**。求出合法的回路的长度的最小值。\n\n（注：从两个方向经过同一条无向边，算作经过两次，因此是不合法的。）", "inputFormat": "\n第一行，两个非负整数 $n,m$。\n\n接下来 $n$ 行，每行两个正整数 $u_i,v_i$，描述一条无向边 $(u_i,v_i)$。注意可能有重边自环。\n\n接下来 $m$ 行，每行两个正整数 $x_i,y_i$，描述一条有向边 $x_i\\to y_i$。注意可能有重边。\n", "outputFormat": "\n如果不可能，输出一行一个 $\\texttt{-1}$；\n\n否则输出一行一个非负整数表示答案。\n", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 2\\times 10^4$；\n- $0\\le m\\le 2\\times 10^4$；  \n- $1\\le u_i,v_i,x_i,y_i\\le n$；\n- 只保留 $n$ 条无向边时，图是连通的；\n\n| 子任务编号 | $n,m\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $20$ |  |   $ 11 $   |  \n| $ 2 $    | $2\\times 10^4$ | A |  $ 41 $   |  \n| $ 3 $    | $2\\times 10^4$ |   |  $ 68 $   |  \n\n- 特殊性质 A：无向边中存在自环。\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11654", "type": "P", "difficulty": 1, "samples": [["5 3 3\n10 2\n12 4\n3 6\n8 7\n9 3\n5 2\n5 7\n1 7\n4 6\n10 5", "Accepted\nTime Limit Exceeded\nSystem Error\nMemory Limit Exceeded\nAccepted"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2025", "洛谷原创", "O2优化", "洛谷比赛"], "title": "「FAOI-R5」becoder", "background": "**警告：请不要试图使用 AI，使用者按作弊处理。**", "description": "$\\text {becoder}$ 拥有所有中文 OJ 中最快的评测机，现在评测机需要处理 $n$ 次题目的评测。已知第 $i$ 次题目的评测在某中文 OJ 上跑了 $T_i$ 秒，空间耗费 $M_i$。\n\n$\\text {becoder}$ 的评测机实在是太快了，你可以把 $\\text {becoder}$ 跑第 $i$ 个评测的时间视为 $\\left \\lfloor \\frac{T_i}{2} \\right \\rfloor $。\n\n告诉你 $\\text {becoder}$ 上 $n$ 次题目评测的时间限制 $t_i$ 和空间限制 $m_i$。以及，在测评 $[L,R]$ 内的题目时，$\\text {becoder}$ 的评测机会打瞌睡。\n\n$\\text {becoder}$ 的评测机按如下规则评判提交：\n- 如果 $\\text {becoder}$ 的评测机在打瞌睡，评测结果会返回 ```System Error```；\n- 如果 $\\text {becoder}$ 的评测机没有打瞌睡，且你的代码空间超限，即 $M_i > m_i$，评测结果会返回 ```Memory Limit Exceeded```；\n- 如果 $\\text {becoder}$ 的评测机没有打瞌睡，且你的代码空间不超限，时间超限，即 $M_i \\le m_i,\\left \\lfloor \\frac{T_i}{2} \\right \\rfloor > t_i$，评测结果会返回 ```Time Limit Exceeded```。\n- 否则，$\\text {becoder}$ 评测机会返回 ```Accepted```。\n\n请你输出所有 $\\text {becoder}$ 对于每个测评会返回的结果。你不考虑除上述四种返回结果以外的情况。", "inputFormat": "第一行三个正整数，$n,L,R$，代表询问的次数，和评测机睡觉的区间。\n\n接下来 $n$ 行，每行两个正整数代表 $T_i,M_i$。\n\n接下来 $n$ 行，每行两个正整数代表 $t_i,m_i$。", "outputFormat": "共 $n$ 行，第 $i$ 行一个字符串代表第 $i$ 次评测的结果。", "hint": "**本题开启捆绑测试**。\n\n+ Subtask 1（30 pts）：$1 \\le n,m \\le 10^3$。\n+ Subtask 2（30 pts）：$1 \\le T_i,M_i,t_i,m_i \\le 10^3$。\n+ Subtask 3（40 pts）：无附加限制。\n\n对于 $\\text{100}\\%$ 的数据，$1 \\le L \\le R \\le n \\le 10^5,1\\le T_i,M_i,t_i,m_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R5」becoder", "background": "**警告：请不要试图使用 AI，使用者按作弊处理。**", "description": "$\\text {becoder}$ 拥有所有中文 OJ 中最快的评测机，现在评测机需要处理 $n$ 次题目的评测。已知第 $i$ 次题目的评测在某中文 OJ 上跑了 $T_i$ 秒，空间耗费 $M_i$。\n\n$\\text {becoder}$ 的评测机实在是太快了，你可以把 $\\text {becoder}$ 跑第 $i$ 个评测的时间视为 $\\left \\lfloor \\frac{T_i}{2} \\right \\rfloor $。\n\n告诉你 $\\text {becoder}$ 上 $n$ 次题目评测的时间限制 $t_i$ 和空间限制 $m_i$。以及，在测评 $[L,R]$ 内的题目时，$\\text {becoder}$ 的评测机会打瞌睡。\n\n$\\text {becoder}$ 的评测机按如下规则评判提交：\n- 如果 $\\text {becoder}$ 的评测机在打瞌睡，评测结果会返回 ```System Error```；\n- 如果 $\\text {becoder}$ 的评测机没有打瞌睡，且你的代码空间超限，即 $M_i > m_i$，评测结果会返回 ```Memory Limit Exceeded```；\n- 如果 $\\text {becoder}$ 的评测机没有打瞌睡，且你的代码空间不超限，时间超限，即 $M_i \\le m_i,\\left \\lfloor \\frac{T_i}{2} \\right \\rfloor > t_i$，评测结果会返回 ```Time Limit Exceeded```。\n- 否则，$\\text {becoder}$ 评测机会返回 ```Accepted```。\n\n请你输出所有 $\\text {becoder}$ 对于每个测评会返回的结果。你不考虑除上述四种返回结果以外的情况。", "inputFormat": "第一行三个正整数，$n,L,R$，代表询问的次数，和评测机睡觉的区间。\n\n接下来 $n$ 行，每行两个正整数代表 $T_i,M_i$。\n\n接下来 $n$ 行，每行两个正整数代表 $t_i,m_i$。", "outputFormat": "共 $n$ 行，第 $i$ 行一个字符串代表第 $i$ 次评测的结果。", "hint": "**本题开启捆绑测试**。\n\n+ Subtask 1（30 pts）：$1 \\le n,m \\le 10^3$。\n+ Subtask 2（30 pts）：$1 \\le T_i,M_i,t_i,m_i \\le 10^3$。\n+ Subtask 3（40 pts）：无附加限制。\n\n对于 $\\text{100}\\%$ 的数据，$1 \\le L \\le R \\le n \\le 10^5,1\\le T_i,M_i,t_i,m_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11655", "type": "P", "difficulty": 4, "samples": [["3\n2 2\n4 6\n7 8\n", "18\n1218\n54483\n"], ["3\n845 826\n672 826\n618 925", "789284214\n588160420\n730993180"], ["1\n1 46", "139"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2025", "洛谷原创", "O2优化", "组合数学", "排列组合", "逆元", "洛谷比赛"], "title": "「FAOI-R5」Lovely 139", "background": "\n$\\text{Height}\\leq139$。", "description": "对于一个 $\\tt 01$ 串 $S$（下标从 $1$ 开始），我们定义它的一个区间 $[l,r]$ 是**极长颜色段**，当且仅当它**同时**满足以下条件：\n- 如果 $l\\neq 1$，$S_{l-1}\\neq S_l$；\n- 如果 $r\\neq \\lvert S\\rvert$，$S_{r+1}\\neq S_r$；\n- $\\forall i\\in[l,r),S_i=S_{i+1}$。\n\n定义 $g(S)$ 为 $S$ 的**不同**极长颜色段数。比如 $g(00)=1$，$g(1110)=2$，$g(001011)=4$。\n\n定义 $f(n,m)$ 的值为所有**恰好包含 $\\boldsymbol n$ 个 $\\tt 0$ 和 $\\boldsymbol m$ 个 $\\tt 1$** 的 $\\tt 01$ 串 $S$ 的 $g(S)$ 之和。\n\n你需要回答 $T$ 个问题，每次给出 $n,m$ 的值，求 $f(n,m)$ 的值对 $10^9+7$ 取模后的结果。", "inputFormat": "第一行输入一个正整数数 $T$，表示问题个数。\n\n接下来 $T$ 行，每行两个非负整数 $n,m$，表示问题的参数。", "outputFormat": "输出 $T$ 行，每行为对应问题的答案。", "hint": "### 样例 1 解释\n\n对于第一组数据 $n=2,m=2$，一共有六个本质不同的 $S$，答案为 $g(0011)+g(0101)+g(0110)+g(1001)+g(1010)+g(1100)=2+4+3+3+4+2=18$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n- Subtask 1（15 pts）：$0 \\le n+m \\le 20$，$1 \\le T \\le 10$。\n- Subtask 2（25 pts）：$0 \\le n+m \\le 4 \\times 10^3$。\n- Subtask 3（20 pts）：$1 \\le T \\le 10$。\n- Subtask 4（40 pts）：无特殊限制。\n\n对于所有数据，保证 $1 \\leq T \\leq 10^6$，$0 \\leq n+m\\leq 2 \\times 10^6$，$0\\le n,m\\le 2\\times10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R5」Lovely 139", "background": "\n$\\text{Height}\\leq139$。", "description": "对于一个 $\\tt 01$ 串 $S$（下标从 $1$ 开始），我们定义它的一个区间 $[l,r]$ 是**极长颜色段**，当且仅当它**同时**满足以下条件：\n- 如果 $l\\neq 1$，$S_{l-1}\\neq S_l$；\n- 如果 $r\\neq \\lvert S\\rvert$，$S_{r+1}\\neq S_r$；\n- $\\forall i\\in[l,r),S_i=S_{i+1}$。\n\n定义 $g(S)$ 为 $S$ 的**不同**极长颜色段数。比如 $g(00)=1$，$g(1110)=2$，$g(001011)=4$。\n\n定义 $f(n,m)$ 的值为所有**恰好包含 $\\boldsymbol n$ 个 $\\tt 0$ 和 $\\boldsymbol m$ 个 $\\tt 1$** 的 $\\tt 01$ 串 $S$ 的 $g(S)$ 之和。\n\n你需要回答 $T$ 个问题，每次给出 $n,m$ 的值，求 $f(n,m)$ 的值对 $10^9+7$ 取模后的结果。", "inputFormat": "第一行输入一个正整数数 $T$，表示问题个数。\n\n接下来 $T$ 行，每行两个非负整数 $n,m$，表示问题的参数。", "outputFormat": "输出 $T$ 行，每行为对应问题的答案。", "hint": "### 样例 1 解释\n\n对于第一组数据 $n=2,m=2$，一共有六个本质不同的 $S$，答案为 $g(0011)+g(0101)+g(0110)+g(1001)+g(1010)+g(1100)=2+4+3+3+4+2=18$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n- Subtask 1（15 pts）：$0 \\le n+m \\le 20$，$1 \\le T \\le 10$。\n- Subtask 2（25 pts）：$0 \\le n+m \\le 4 \\times 10^3$。\n- Subtask 3（20 pts）：$1 \\le T \\le 10$。\n- Subtask 4（40 pts）：无特殊限制。\n\n对于所有数据，保证 $1 \\leq T \\leq 10^6$，$0 \\leq n+m\\leq 2 \\times 10^6$，$0\\le n,m\\le 2\\times10^6$。", "locale": "zh-CN"}}}
