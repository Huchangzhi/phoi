{"pid": "P9093", "type": "P", "difficulty": 3, "samples": [["4\n3 4 5 -1\n", "TAK\n9\n2 2 -7 0 3 -7 3 -1 3"], ["10\n3 1 4 1 5 9 2 6 5 3", "NIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "Special Judge", "PA（波兰）"], "title": "[PA 2020] Punkty rankingowe", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 1 [Punkty rankingowe](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/ran/)。**\n\nBytie 决定认真准备今年的 PA。为了训练，他创建了一个 BitForces 账号，BitForces 是一个定期举办编程竞赛的平台。\n\nBytie 知道这个平台使用一种积分系统（也称为 rating），这个系统会让他知道自己的进步，也可以将自己的成绩与其他选手比较。选手的 rating 是一个整数（可能为负数）。在账号创建后，Bytie 的 rating 是 $0$，参加每场比赛后，他的 rating 都会加或减某一个整数。此外，在每场比赛后的 rating 变化历史是可以在平台上看到的。兴奋的 Bytie 开始分析这些数据。他在纸上写下了 $n$ 个连续的数字：\n\n- 在一场比赛之后的最大 rating 上升；\n- 在连续两场比赛之后的 rating 上升之和的最大值；\n- 在连续三场比赛之后的 rating 上升之和的最大值；\n- 以此类推，直到他写到在连续 $n$ 场比赛之后的 rating 上升之和的最大值；\n\n几天后 Bytie 想要回想起 rating 变化的序列。然而，此时 BitForces 正出现技术问题。请帮助 Bytie 还原一个合法的 rating 变化序列，使其长度至少为 $n$ 并且符合写在纸上的数据。", "inputFormat": "输入第一行包含一个整数 $n$，表示写在纸上的数字个数。\n\n第二行包含 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。对于每个 $1\\le j\\le n$，连续 $j$ 场比赛的 rating 最大增幅恰好为 $a_j$。", "outputFormat": "如果存在一个 rating 变化序列满足所有题目描述中的条件，输出一行 `TAK`。之后输出一行一个整数 $k$。第三行输出找到的 rating 变化序列 $b_1,b_2,\\ldots,b_k$。如果有多种答案，输出任意一种均可。\n\n如果不存在这样的变化序列，输出一行 `NIE` 即可。\n\n可以证明对于输入如果存在一个 rating 变化序列，那么一定存在一个满足以上限制的序列。", "hint": "#### 样例 1 解释\n\n以下是一、二、三、四次连续比赛中名次增加最多的区间。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uvrbz3bh.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 300$，$-10^6\\le a_i\\le 10^6$，$n\\le k\\le 10^5$，$-10^{13}\\le b_k\\le 10^{13}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Punkty rankingowe", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 1 [Punkty rankingowe](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/ran/)。**\n\nBytie 决定认真准备今年的 PA。为了训练，他创建了一个 BitForces 账号，BitForces 是一个定期举办编程竞赛的平台。\n\nBytie 知道这个平台使用一种积分系统（也称为 rating），这个系统会让他知道自己的进步，也可以将自己的成绩与其他选手比较。选手的 rating 是一个整数（可能为负数）。在账号创建后，Bytie 的 rating 是 $0$，参加每场比赛后，他的 rating 都会加或减某一个整数。此外，在每场比赛后的 rating 变化历史是可以在平台上看到的。兴奋的 Bytie 开始分析这些数据。他在纸上写下了 $n$ 个连续的数字：\n\n- 在一场比赛之后的最大 rating 上升；\n- 在连续两场比赛之后的 rating 上升之和的最大值；\n- 在连续三场比赛之后的 rating 上升之和的最大值；\n- 以此类推，直到他写到在连续 $n$ 场比赛之后的 rating 上升之和的最大值；\n\n几天后 Bytie 想要回想起 rating 变化的序列。然而，此时 BitForces 正出现技术问题。请帮助 Bytie 还原一个合法的 rating 变化序列，使其长度至少为 $n$ 并且符合写在纸上的数据。", "inputFormat": "输入第一行包含一个整数 $n$，表示写在纸上的数字个数。\n\n第二行包含 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。对于每个 $1\\le j\\le n$，连续 $j$ 场比赛的 rating 最大增幅恰好为 $a_j$。", "outputFormat": "如果存在一个 rating 变化序列满足所有题目描述中的条件，输出一行 `TAK`。之后输出一行一个整数 $k$。第三行输出找到的 rating 变化序列 $b_1,b_2,\\ldots,b_k$。如果有多种答案，输出任意一种均可。\n\n如果不存在这样的变化序列，输出一行 `NIE` 即可。\n\n可以证明对于输入如果存在一个 rating 变化序列，那么一定存在一个满足以上限制的序列。", "hint": "#### 样例 1 解释\n\n以下是一、二、三、四次连续比赛中名次增加最多的区间。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uvrbz3bh.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 300$，$-10^6\\le a_i\\le 10^6$，$n\\le k\\le 10^5$，$-10^{13}\\le b_k\\le 10^{13}$。", "locale": "zh-CN"}}}
{"pid": "P9094", "type": "P", "difficulty": 2, "samples": [["9 5\n2 8 1\n4 5 2\n6 7 3\n5 6 2\n1 2 2", "3"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "前缀和", "差分", "PA（波兰）"], "title": "[PA 2020] Mieszanie kolorów", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 1 [Mieszanie kolorów](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/kol/)**\n\nByteasar 正准备给栅栏涂漆。他已经准备了 $n$ 罐白色油漆，他把这些油漆排列成一排，从 $1$ 到 $n$ 编号。他想用这些油漆，但他不想把栅栏涂成白色。他委托了调色专家，调色专家有三种颜料：黄色、蓝色和红色。专家进行了 $m$ 次操作，其中第 $i$ 次操作是向编号在 $l_i$ 到 $r_i$ 之间（包括两端）的所有罐子中加入某种颜料。\n\n油漆的最终颜色取决于被添加到其中的颜料。添加的颜料按照下表和图示进行混合。\n\n|        颜料        | 颜色 |\n| :----------------: | :--: |\n|         无         | 白色 |\n|        黄色        | 黄色 |\n|        蓝色        | 蓝色 |\n|        红色        | 红色 |\n|    黄色 + 蓝色     | 绿色 |\n|    黄色 + 红色     | 橙色 |\n|    蓝色 + 红色     | 紫色 |\n| 黄色 + 蓝色 + 红色 | 棕色 |\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zow92g6w.png)\n\nByteasar 想要给栅栏涂成一种颜色。思来想去，他选择了绿色，因为绿色代表了你常会在算法竞赛中看到的 Accepted。他想知道现在有多少罐油漆是绿色的，请帮他数数。", "inputFormat": "第一行两个整数 $n,m$，分别表示油漆的罐数和专家进行的操作数。\n\n接下来 $m$ 行，每行三个整数 $l_i,r_i,k_i$，表示在第 $i$ 次操作中向编号在 $l_i$ 到 $r_i$ 之间（包括两端）的罐子中加入颜料。加入的颜料是黄色（$k_i=1$），蓝色（$k_i=2$）或红色（$k_i=3$）中的一种。", "outputFormat": "输出一行一个整数，表示在所有操作之后绿色油漆的罐数。", "hint": "#### 样例 1 解释\n\n操作结束后，这些油漆分别是蓝色、绿色、黄色、绿色、绿色、棕色、橙色、黄色和白色的。因此，只有三罐油漆是绿色。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n,m\\le 10^6$，$1\\le l_i\\le r_i\\le n$，$1\\le k_i\\le 3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Mieszanie kolorów", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 1 [Mieszanie kolorów](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/kol/)**\n\nByteasar 正准备给栅栏涂漆。他已经准备了 $n$ 罐白色油漆，他把这些油漆排列成一排，从 $1$ 到 $n$ 编号。他想用这些油漆，但他不想把栅栏涂成白色。他委托了调色专家，调色专家有三种颜料：黄色、蓝色和红色。专家进行了 $m$ 次操作，其中第 $i$ 次操作是向编号在 $l_i$ 到 $r_i$ 之间（包括两端）的所有罐子中加入某种颜料。\n\n油漆的最终颜色取决于被添加到其中的颜料。添加的颜料按照下表和图示进行混合。\n\n|        颜料        | 颜色 |\n| :----------------: | :--: |\n|         无         | 白色 |\n|        黄色        | 黄色 |\n|        蓝色        | 蓝色 |\n|        红色        | 红色 |\n|    黄色 + 蓝色     | 绿色 |\n|    黄色 + 红色     | 橙色 |\n|    蓝色 + 红色     | 紫色 |\n| 黄色 + 蓝色 + 红色 | 棕色 |\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zow92g6w.png)\n\nByteasar 想要给栅栏涂成一种颜色。思来想去，他选择了绿色，因为绿色代表了你常会在算法竞赛中看到的 Accepted。他想知道现在有多少罐油漆是绿色的，请帮他数数。", "inputFormat": "第一行两个整数 $n,m$，分别表示油漆的罐数和专家进行的操作数。\n\n接下来 $m$ 行，每行三个整数 $l_i,r_i,k_i$，表示在第 $i$ 次操作中向编号在 $l_i$ 到 $r_i$ 之间（包括两端）的罐子中加入颜料。加入的颜料是黄色（$k_i=1$），蓝色（$k_i=2$）或红色（$k_i=3$）中的一种。", "outputFormat": "输出一行一个整数，表示在所有操作之后绿色油漆的罐数。", "hint": "#### 样例 1 解释\n\n操作结束后，这些油漆分别是蓝色、绿色、黄色、绿色、绿色、棕色、橙色、黄色和白色的。因此，只有三罐油漆是绿色。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n,m\\le 10^6$，$1\\le l_i\\le r_i\\le n$，$1\\le k_i\\le 3$。", "locale": "zh-CN"}}}
{"pid": "P9095", "type": "P", "difficulty": 1, "samples": [["19\n3B 4B 5B 4C 5C 3C 1A 5A 5C 3A 5A 2C 1B 2A 5B 5C 2B 1C 4A", "TAK"], ["20\n2B 4B 4C 5A 5C 5C 4A 1B 3A 4A 2A 3B 1B 1C 1A 5A 2C 1B 5B 3C", "NIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "PA（波兰）"], "title": "[PA 2020] Wybór zadań", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 1 [Wybór zadań](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/wyb/)**\n\n对 Matthew 来说，准备 PA 的线上比赛是一个相当大的挑战。在比赛期间，参赛者参加五轮比赛，编号从 $1$ 到 $5$。在每轮比赛中，参赛者需解决三个组别的任务，称为 A、B 和 C。在前四轮比赛中，每一组别都会有一道题，在最后的第五轮比赛中，每一组别都会有两道题。因此，必须一共造 $18$ 道题，并分配给 $15$ 个不同的位置，其中三个位置（5A、5B 和 5C）必须各分配两道题。我们这里所说的位置是指轮次和组别的组合。\n\nMatthew 知道不能只是随便出 $18$ 道题。题目的难度应该适合他们出现的轮次和组别。他在一整年中整理了 $n$ 道题的想法。对于这些想法，他都知道这道题会适合哪个位置（只会适合这一个位置，其他位置都不适合）。\n\nMatthew 想知道是否可以从他的想法中选出 $18$ 道题并正确地分配它们的位置。给定他的笔记记录，请帮他找出一种选择方案。", "inputFormat": "第一行包含一个整数 $n$，表示 Matthew 的想法总数。\n\n第二行有 $n$ 个字符串，表示 Matthew 的每个想法适合的题目位置。每个字符串由恰好两个字符组成，第一个字符是一个在集合 $\\{1,2,3,4,5\\}$ 的数字，第二个字符是一个在集合 $\\{\\texttt A,\\texttt B,\\texttt C\\}$ 的字母。", "outputFormat": "如果可以从 Matthew 的想法中组出一套 PA 题目，则输出 `TAK`，否则输出 `NIE`。", "hint": "#### 样例 1 解释\n\n在第一个样例中，Matthew 有三个符合 5C 位置的题目想法。删掉其中任何一个后，其余的想法就组成了一套合适的 PA 题目。\n\n------------\n\n#### 样例 2 解释\n\n在第二个例子测试中，Matthew 只有一道题与 5B 位置相匹配，所以他组不出一套 PA。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Wybór zadań", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 1 [Wybór zadań](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/wyb/)**\n\n对 Matthew 来说，准备 PA 的线上比赛是一个相当大的挑战。在比赛期间，参赛者参加五轮比赛，编号从 $1$ 到 $5$。在每轮比赛中，参赛者需解决三个组别的任务，称为 A、B 和 C。在前四轮比赛中，每一组别都会有一道题，在最后的第五轮比赛中，每一组别都会有两道题。因此，必须一共造 $18$ 道题，并分配给 $15$ 个不同的位置，其中三个位置（5A、5B 和 5C）必须各分配两道题。我们这里所说的位置是指轮次和组别的组合。\n\nMatthew 知道不能只是随便出 $18$ 道题。题目的难度应该适合他们出现的轮次和组别。他在一整年中整理了 $n$ 道题的想法。对于这些想法，他都知道这道题会适合哪个位置（只会适合这一个位置，其他位置都不适合）。\n\nMatthew 想知道是否可以从他的想法中选出 $18$ 道题并正确地分配它们的位置。给定他的笔记记录，请帮他找出一种选择方案。", "inputFormat": "第一行包含一个整数 $n$，表示 Matthew 的想法总数。\n\n第二行有 $n$ 个字符串，表示 Matthew 的每个想法适合的题目位置。每个字符串由恰好两个字符组成，第一个字符是一个在集合 $\\{1,2,3,4,5\\}$ 的数字，第二个字符是一个在集合 $\\{\\texttt A,\\texttt B,\\texttt C\\}$ 的字母。", "outputFormat": "如果可以从 Matthew 的想法中组出一套 PA 题目，则输出 `TAK`，否则输出 `NIE`。", "hint": "#### 样例 1 解释\n\n在第一个样例中，Matthew 有三个符合 5C 位置的题目想法。删掉其中任何一个后，其余的想法就组成了一套合适的 PA 题目。\n\n------------\n\n#### 样例 2 解释\n\n在第二个例子测试中，Matthew 只有一道题与 5B 位置相匹配，所以他组不出一套 PA。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P9096", "type": "P", "difficulty": 6, "samples": [["2\n7\n9 1 4 2 6 4 7\n1 7\n6 4\n2 3\n5 7\n3 4\n5 3\n5\n4 8 2 3 1\n4 3\n3 1\n4 2\n5 1", "1089 545 371 287 227 211 203\n324 164 114 102 94"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "PA（波兰）"], "title": "[PA 2020] Sen o podboju", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 2 [Sen o podboju](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/sen/)**\n\n国王 Byteur，Byteotia 的统治者，目前正梦想着征服 Bitotia。就像在现实世界中一样，在他的梦中他还远远没有打败敌人。因此，他想知道他能做些什么来削弱敌国的实力……\n\n在他的梦中，Bitotia 由 $n$ 个城市（编号从 $1$ 到 $n$）组成，由 $n-1$ 条双向道路连接，可以只用这些道路从任意一个城市到达任意其他城市。换句话说，Bitotia 的地图形成了一棵树。然而，Byteur 并不记得 Bitotia 的确切道路网络……所以他的脑内生成了一个**随机**的道路网络。\n\n国王得出的结论是，强行将 Bitotia 分割成 $k$ 个小国是个好主意。Byteur 所说的划分，是指秘密地破坏正好是 $k - 1$ 条道路，这将迫使 Bitotia 分解成 $k$ 个小国，这些小国是去除选定的边后形成的连通子图。\n\n然而，对于国王来说，摧毁任何 $k-1$ 条道路都是不够的。每个 Bitotia 的城市都有一个**军事系数** $a_i$，也是由 Byteur 脑内想出来的。Byteur 知道，一个小国的军事力量越强，对 Byteotia 的威胁就越大。更准确地说：如果在一个小国，其城市的军事系数之和等于 $S$，那么来自这个小国的威胁就等于 $S^2$。对 Byteotia 的总威胁等于这 $k$ 个小国所产生的威胁之和。\n\n现在 Byteur 求助于你——他的梦想（指的是字面意思！）程序员。请帮助他，计算出 Bitotia 分裂成各州后可能产生的最小总威胁。由于 Byteur 还没有决定参数 $k$ 的值，请计算 $k$ 取从 $1$ 到 $n$（包含两端）所有值的结果。", "inputFormat": "第一行包含一个整数 $t$，表示测试点总数 ~~Byteur 做的梦的个数~~。接下来描述每一组测试点，测试点的输入格式都相同。\n\n每个测试点第一行包含一个整数 $n$。\n\n第二行包含一个长度为 $n$ 的整数序列 $a_1,a_2,\\cdots ,a_n$。\n\n接下来 $n-1$ 行是 Bitotia 的路网描述，每行两个整数 $b_i,c_i$，表示城市 $b_i,c_i$ 被一条路相连。保证输入的图是一棵树。\n\nByteur 按如下方法生成数据。首先手动选取一个整数 $t$，一个整数区间 $[n_{\\min},n_{\\max}]$ 和 $a_{\\max}$ 的值。接下来按如下步骤独立生成每个测试点：\n\n- 城市个数 $n$ 的值从 $[n_{\\min},n_{\\max}]$ 区间内均匀随机选取。\n- 每个 $a_i$ 的值从 $[1,a_{\\max}]$ 区间内独立均匀随机选取。\n- 生成一个自然数序列 $(p_1,p_2,\\cdots ,p_{n-2})$。序列中的每一个元素都是从 $[1,n]$ 区间中独立均匀随机选取的。Byteur 将其作为路网的 [Prüfer 序列](https://en.wikipedia.org/wiki/Pr%C3%BCfer_sequence)，也就是测试点中给出的树的 Prüfer 序列是 $(p_1,p_2,\\cdots,p_{n-2})$。", "outputFormat": "输出 $t$ 行，描述每个测试点的答案。每行包含 $n$ 个整数（其中 $n$ 是输入中的城市数量）；第 $k$ 个整数表示 Bitotia 在被划分为 $k$ 个小国后所能造成的最小威胁。", "hint": "#### 样例 1 解释\n\n以上测试数据使用随机数种子为 $8\\ 122\\ 020$，$t=2,n_{\\min}=5,n_{\\max}=7,a_{\\max}=10$ 的参数生成。\n\n对于第一个测试案例，输出的第一个数字是 $(9+1+4+2+6+4+7)^2=1089$，代表未被分割的 Bitotia 所带来的总威胁。输出的第二个数字对应的是如果连接 $5$ 号和 $7$ 号城市的道路被摧毁的总威胁；在这种情况下，威胁将是 $(9+7)^2+(1+4+2+6+4)^2=545$。\n\n------------\n\n#### 数据生成\n\n本题的样例生成器在附件中给出。生成器将以下内容作为输入接受：生成器种子和数字 $t,n_{\\min},n_{\\max},a_{\\max}$。本题的所有测试数据都将用与之相当的生成器生成（即用不同的伪随机数库，与编译器的实现无关）。\n\n为了确保测试的随机性，每个测试点的 $t,n_{\\min},n_{\\max},a_{\\max}$ 的值都是手动选择的，生成器的种子是随机选择的。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le t\\le 10$，$2\\le n\\le 300$，$1\\le a_i\\le 10^6$，$1\\le b_i,c_i\\le n$，$2\\le n_{\\min}\\le n_{\\max}\\le 300$，$1\\le a_{\\max}\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Sen o podboju", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 2 [Sen o podboju](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/sen/)**\n\n国王 Byteur，Byteotia 的统治者，目前正梦想着征服 Bitotia。就像在现实世界中一样，在他的梦中他还远远没有打败敌人。因此，他想知道他能做些什么来削弱敌国的实力……\n\n在他的梦中，Bitotia 由 $n$ 个城市（编号从 $1$ 到 $n$）组成，由 $n-1$ 条双向道路连接，可以只用这些道路从任意一个城市到达任意其他城市。换句话说，Bitotia 的地图形成了一棵树。然而，Byteur 并不记得 Bitotia 的确切道路网络……所以他的脑内生成了一个**随机**的道路网络。\n\n国王得出的结论是，强行将 Bitotia 分割成 $k$ 个小国是个好主意。Byteur 所说的划分，是指秘密地破坏正好是 $k - 1$ 条道路，这将迫使 Bitotia 分解成 $k$ 个小国，这些小国是去除选定的边后形成的连通子图。\n\n然而，对于国王来说，摧毁任何 $k-1$ 条道路都是不够的。每个 Bitotia 的城市都有一个**军事系数** $a_i$，也是由 Byteur 脑内想出来的。Byteur 知道，一个小国的军事力量越强，对 Byteotia 的威胁就越大。更准确地说：如果在一个小国，其城市的军事系数之和等于 $S$，那么来自这个小国的威胁就等于 $S^2$。对 Byteotia 的总威胁等于这 $k$ 个小国所产生的威胁之和。\n\n现在 Byteur 求助于你——他的梦想（指的是字面意思！）程序员。请帮助他，计算出 Bitotia 分裂成各州后可能产生的最小总威胁。由于 Byteur 还没有决定参数 $k$ 的值，请计算 $k$ 取从 $1$ 到 $n$（包含两端）所有值的结果。", "inputFormat": "第一行包含一个整数 $t$，表示测试点总数 ~~Byteur 做的梦的个数~~。接下来描述每一组测试点，测试点的输入格式都相同。\n\n每个测试点第一行包含一个整数 $n$。\n\n第二行包含一个长度为 $n$ 的整数序列 $a_1,a_2,\\cdots ,a_n$。\n\n接下来 $n-1$ 行是 Bitotia 的路网描述，每行两个整数 $b_i,c_i$，表示城市 $b_i,c_i$ 被一条路相连。保证输入的图是一棵树。\n\nByteur 按如下方法生成数据。首先手动选取一个整数 $t$，一个整数区间 $[n_{\\min},n_{\\max}]$ 和 $a_{\\max}$ 的值。接下来按如下步骤独立生成每个测试点：\n\n- 城市个数 $n$ 的值从 $[n_{\\min},n_{\\max}]$ 区间内均匀随机选取。\n- 每个 $a_i$ 的值从 $[1,a_{\\max}]$ 区间内独立均匀随机选取。\n- 生成一个自然数序列 $(p_1,p_2,\\cdots ,p_{n-2})$。序列中的每一个元素都是从 $[1,n]$ 区间中独立均匀随机选取的。Byteur 将其作为路网的 [Prüfer 序列](https://en.wikipedia.org/wiki/Pr%C3%BCfer_sequence)，也就是测试点中给出的树的 Prüfer 序列是 $(p_1,p_2,\\cdots,p_{n-2})$。", "outputFormat": "输出 $t$ 行，描述每个测试点的答案。每行包含 $n$ 个整数（其中 $n$ 是输入中的城市数量）；第 $k$ 个整数表示 Bitotia 在被划分为 $k$ 个小国后所能造成的最小威胁。", "hint": "#### 样例 1 解释\n\n以上测试数据使用随机数种子为 $8\\ 122\\ 020$，$t=2,n_{\\min}=5,n_{\\max}=7,a_{\\max}=10$ 的参数生成。\n\n对于第一个测试案例，输出的第一个数字是 $(9+1+4+2+6+4+7)^2=1089$，代表未被分割的 Bitotia 所带来的总威胁。输出的第二个数字对应的是如果连接 $5$ 号和 $7$ 号城市的道路被摧毁的总威胁；在这种情况下，威胁将是 $(9+7)^2+(1+4+2+6+4)^2=545$。\n\n------------\n\n#### 数据生成\n\n本题的样例生成器在附件中给出。生成器将以下内容作为输入接受：生成器种子和数字 $t,n_{\\min},n_{\\max},a_{\\max}$。本题的所有测试数据都将用与之相当的生成器生成（即用不同的伪随机数库，与编译器的实现无关）。\n\n为了确保测试的随机性，每个测试点的 $t,n_{\\min},n_{\\max},a_{\\max}$ 的值都是手动选择的，生成器的种子是随机选择的。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le t\\le 10$，$2\\le n\\le 300$，$1\\le a_i\\le 10^6$，$1\\le b_i,c_i\\le n$，$2\\le n_{\\min}\\le n_{\\max}\\le 300$，$1\\le a_{\\max}\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9097", "type": "P", "difficulty": 5, "samples": [["17\n2 -5 0 2 0 0 0 4 0 0 -1 4 0 0 0 0 -3", "12"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2020", "线段树", "树状数组", "PA（波兰）"], "title": "[PA 2020] Elektrownie i fabryki", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 2 [Elektrownie i fabryki](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/ele/)**\n\n为了应对不断上升的失业率，Byteotia 政府决定创造新的就业机会。为此将建设现代化的工厂，还要建设为工厂供电的新发电厂。\n\n一条很长的高速公路穿过 Byteotia，沿途有 $n$ 个城市。为了简单起见，我们从 $1$ 到 $n$ 对城市进行编号。每两个相邻城市之间都相距一公里。\n\n目前已经决定一些城市建设工厂，另一些城市建设发电厂。对于第 $i$ 个城市有一个值 $a_i$。如果它是正数，则在第 $i$ 个城市将建造一个发电容量为 $a_i$ 兆瓦的发电厂，如果它是负数，则在该城市将建造一个消耗电能 $a_i$ 兆瓦的工厂。如果 $a_i=0$，则说明该城市没有建设计划。\n\n你的任务是设计一个电网，将电力从发电站输送到工厂。对于每一对相邻的城镇，你必须决定是否在它们之间建立一条输电线。如果这个城市被输电线直接或间接连接到某个有发电站的城市，电力就可以从发电站流向这个城市的工厂。如果每个工厂的电力需求都得到满足，那么电网的设计就是正确的。电网的成本与电网输电线的总长度（以公里计）成正比。\n\n写一个程序计算设计一个正确的电网最小成本是多少。", "inputFormat": "第一行一个整数 $n$，表示 Byteotia 的城市个数。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，表示每个城市电力的生产和消耗。", "outputFormat": "输出设计一个正确的电网的最小成本。如果不存在一个正确的电网，输出 $-1$。", "hint": "#### 样例 1 解释\n\n下面是一个包含 $n=17$ 个城市的样例，其中将建造三个工厂（白圈）和四个发电厂（黑圈）。$12$ 公里的正确电网用灰色部分标记。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2wee5eoz.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于一些子任务，满足 $n\\le 5\\times 10^3$。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 5\\times 10^5$，$-10^9\\le a_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Elektrownie i fabryki", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 2 [Elektrownie i fabryki](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/ele/)**\n\n为了应对不断上升的失业率，Byteotia 政府决定创造新的就业机会。为此将建设现代化的工厂，还要建设为工厂供电的新发电厂。\n\n一条很长的高速公路穿过 Byteotia，沿途有 $n$ 个城市。为了简单起见，我们从 $1$ 到 $n$ 对城市进行编号。每两个相邻城市之间都相距一公里。\n\n目前已经决定一些城市建设工厂，另一些城市建设发电厂。对于第 $i$ 个城市有一个值 $a_i$。如果它是正数，则在第 $i$ 个城市将建造一个发电容量为 $a_i$ 兆瓦的发电厂，如果它是负数，则在该城市将建造一个消耗电能 $a_i$ 兆瓦的工厂。如果 $a_i=0$，则说明该城市没有建设计划。\n\n你的任务是设计一个电网，将电力从发电站输送到工厂。对于每一对相邻的城镇，你必须决定是否在它们之间建立一条输电线。如果这个城市被输电线直接或间接连接到某个有发电站的城市，电力就可以从发电站流向这个城市的工厂。如果每个工厂的电力需求都得到满足，那么电网的设计就是正确的。电网的成本与电网输电线的总长度（以公里计）成正比。\n\n写一个程序计算设计一个正确的电网最小成本是多少。", "inputFormat": "第一行一个整数 $n$，表示 Byteotia 的城市个数。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，表示每个城市电力的生产和消耗。", "outputFormat": "输出设计一个正确的电网的最小成本。如果不存在一个正确的电网，输出 $-1$。", "hint": "#### 样例 1 解释\n\n下面是一个包含 $n=17$ 个城市的样例，其中将建造三个工厂（白圈）和四个发电厂（黑圈）。$12$ 公里的正确电网用灰色部分标记。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2wee5eoz.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于一些子任务，满足 $n\\le 5\\times 10^3$。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 5\\times 10^5$，$-10^9\\le a_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9098", "type": "P", "difficulty": 2, "samples": [["7\nabcdefg\nedgbcfa", "TAK"], ["5\nabcde\nfghhh", "NIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "PA（波兰）"], "title": "[PA 2020] Zabawki", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 2 [Zabawki](https://sio2.mimuw.edu.pl/c/pa-2020-1/zab/)**\n\n你可能不知道，Bitie 和 Bytie 兄弟有相当令人印象深刻的玩具收藏品！他们每个人都拥有 $n$ 个玩具，每个玩具都是 $26$ 种类型中的一种。为方便起见，兄弟俩给每种类型的玩具都贴上了从 $\\texttt a$ 到 $\\texttt z$ 的英文字母标签。\n\n在今天的游戏中，Bitie 拿出了他的玩具并按从左到右的顺序排列。因此，Bitie 可以用一个有 $n$ 个英文字母的序列来描述他的玩具的排列；这个序列的第 $i$ 个字符表示 Bitie 的序列中从左起的第 $i$ 个玩具。同时 Bytie 也拿出了他的玩具并按从左到右的顺序排列。现在 Bitie 想变得更像 Bytie——他想把自己的玩具按 Bytie 的玩具的顺序排列。\n\n在游戏过程中，Bitie 可以通过翻转来改变他的玩具的顺序，一次翻转可以取奇数个连续的玩具并颠倒其顺序。因此，如果字符串 $\\texttt{abcdea}$ 描述了 Bitie 的玩具顺序，那么在一次翻转中，Bitie 可以产生例如 $\\texttt{adcbea}$（通过颠倒从第二个到第四个玩具的顺序）或 $\\texttt{edcbaa}$（通过颠倒从第一个到第五个玩具的顺序）的序列。然而，他不能在一次翻转之后得到序列 $\\texttt{bacdea}$。\n\nBitie 能够通过翻转得到和 Bytie 的玩具序列一样的序列吗？", "inputFormat": "第一行一个整数 $n$，表示两人拥有的玩具数量。\n\n第二行一个长度为 $n$ 的字符串，表示 Bitie 的玩具序列。\n\n第三行一个长度为 $n$ 的字符串，表示 Bytie 的玩具序列。", "outputFormat": "如果 Bitie 可以通过翻转得到和 Bytie 一样的玩具序列，输出 `TAK`，否则输出 `NIE`。", "hint": "#### 样例 1 解释\n\n对于第一组样例，Bitie 可以通过三次翻转操作得到和 Bytie 一样的玩具序列。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vexaj3z8.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于一些子任务，满足如果这组数据的答案是 `TAK`，那么 Bitie 最多只需进行一次交换就可以得到和 Bytie 一样的序列。\n\n此外，大约一半的子任务满足 $n\\le 2\\times 10^3$。\n\n对于 $100\\%$ 的数据：\n\n- 保证 $1\\le n\\le 3\\times 10^5$。\n- 保证字符串中只出现小写英文字母（$\\texttt a$ 到 $\\texttt z$）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Zabawki", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 2 [Zabawki](https://sio2.mimuw.edu.pl/c/pa-2020-1/zab/)**\n\n你可能不知道，Bitie 和 Bytie 兄弟有相当令人印象深刻的玩具收藏品！他们每个人都拥有 $n$ 个玩具，每个玩具都是 $26$ 种类型中的一种。为方便起见，兄弟俩给每种类型的玩具都贴上了从 $\\texttt a$ 到 $\\texttt z$ 的英文字母标签。\n\n在今天的游戏中，Bitie 拿出了他的玩具并按从左到右的顺序排列。因此，Bitie 可以用一个有 $n$ 个英文字母的序列来描述他的玩具的排列；这个序列的第 $i$ 个字符表示 Bitie 的序列中从左起的第 $i$ 个玩具。同时 Bytie 也拿出了他的玩具并按从左到右的顺序排列。现在 Bitie 想变得更像 Bytie——他想把自己的玩具按 Bytie 的玩具的顺序排列。\n\n在游戏过程中，Bitie 可以通过翻转来改变他的玩具的顺序，一次翻转可以取奇数个连续的玩具并颠倒其顺序。因此，如果字符串 $\\texttt{abcdea}$ 描述了 Bitie 的玩具顺序，那么在一次翻转中，Bitie 可以产生例如 $\\texttt{adcbea}$（通过颠倒从第二个到第四个玩具的顺序）或 $\\texttt{edcbaa}$（通过颠倒从第一个到第五个玩具的顺序）的序列。然而，他不能在一次翻转之后得到序列 $\\texttt{bacdea}$。\n\nBitie 能够通过翻转得到和 Bytie 的玩具序列一样的序列吗？", "inputFormat": "第一行一个整数 $n$，表示两人拥有的玩具数量。\n\n第二行一个长度为 $n$ 的字符串，表示 Bitie 的玩具序列。\n\n第三行一个长度为 $n$ 的字符串，表示 Bytie 的玩具序列。", "outputFormat": "如果 Bitie 可以通过翻转得到和 Bytie 一样的玩具序列，输出 `TAK`，否则输出 `NIE`。", "hint": "#### 样例 1 解释\n\n对于第一组样例，Bitie 可以通过三次翻转操作得到和 Bytie 一样的玩具序列。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vexaj3z8.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于一些子任务，满足如果这组数据的答案是 `TAK`，那么 Bitie 最多只需进行一次交换就可以得到和 Bytie 一样的序列。\n\n此外，大约一半的子任务满足 $n\\le 2\\times 10^3$。\n\n对于 $100\\%$ 的数据：\n\n- 保证 $1\\le n\\le 3\\times 10^5$。\n- 保证字符串中只出现小写英文字母（$\\texttt a$ 到 $\\texttt z$）。", "locale": "zh-CN"}}}
{"pid": "P9099", "type": "P", "difficulty": 7, "samples": [["3 3\n3 2\n3 2 1\n1 1 1\n2 3 2", "4\n1\n1000000003"]], "limits": {"time": [9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "PA（波兰）"], "title": "[PA 2020] Ogromne drzewo", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 3 [Ogromne drzewo](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/ogr/)**\n\nByteasar 为他的女朋友 Algolina 买了一棵巨大的圣诞树。这是一份十分不寻常的礼物，但 Byteasar 是一位算法师，Algolina 已经习惯了这种惊喜。\n\n正如你所猜到的，这棵树不是植物，而是一个无环连通图。它非常大，但可以用一种有组织的方式来描述。它的节点有 $n$ 层。第一层只包含一个节点，表示树的根。每个节点的子节点都只在其下一层，最后一层的节点除外，它们是叶子。对于区间 $[1, n - 1]$ 中的每一个 $i$，第 $i$ 层的每个节点都有 $a_i$ 个子节点。\n\nAlgolina 想让 Byteasar 知道她对他的礼物有多满意，因此决定和他玩一个游戏。Algolina 选择了树上的某个节点 $A$，Byteasar 选择了节点 $B$（可能与 Algolina 相同）。现在从 Algolina 开始，他们俩将轮流重新对树的节点涂色——Algolina 用红色，Byteasar 用蓝色。在游戏开始时，所有节点都是白色的。每个节点将恰好被重新涂色一次——由 Algolina 或由 Byteasar 涂色。在任何时候，涂色的人都可以用自己使用的颜色对任何白色节点涂色，包括节点 $A$ 和 $B$。\n\n一旦所有顶点都被重新涂色了，这两人将计算出他们的分数。Algolina 获得的分数（用 $S_A$ 表示）将是所有红色节点到节点 $A$ 的距离之和，而 Byteasar 获得的分数（用 $S_B$ 表示）将是所有蓝色节点到节点 $B$ 的距离之和。我们所说的两个节点之间的距离，是指它们之间最短路径上的边的数量。Algolina 的目标是得分以最大可能比 Byteasar 的大，即最大化 $S_A-S_B$ 的值，而 Byteasar 的目标是最小化它。\n\nByteasar 很快指出，这是一个完全信息有限游戏，假设他们都以最优策略进行游戏，就可以计算出最终得分的差值有多大。他希望你能帮他计算出这个值。由于这个值可能非常大，你需要计算它对 $10^9+7$ 取模后的值。\n\n此外，由于在一次比赛后忘记礼物是不愉快的，你需要计算多次选择节点 $A$ 和 $B$ 的情况下两人最终得分之差。", "inputFormat": "第一行两个整数 $n,q$，分别表示树的层数和询问次数。\n\n第二行 $n-1$ 个整数 $a_1,a_2,\\cdots,a_{n-1}$，意义如题目描述。\n\n接下来 $q$ 行，每行描述 $A,B$。可以发现最终结果只取决于节点 $A,B$ 和它们的最近公共祖先都在哪一层，因此每行给出三个整数 $W_A,W_B,W_{\\operatorname{lca}(A,B)}$。", "outputFormat": "输出 $q$ 行，第 $i$ 行包含对第 $i$ 个询问的回答，对 $10^9+7$ 取模。", "hint": "#### 样例 1 解释\n\n样例中的树有三层，第一层一个节点，第二层三个节点，第三层六个节点。\n\n对于第二个询问，Algolina 和 Byteasar 都选择了根节点。对于最优决策，他们应该按照非递增的层数顺序选择顶点，最后的结果是 $(2 + 2 + 2 + 1 + 1) - (2 + 2 + 2 + 1 + 0) = 1$。\n\n对于第三个询问，答案是 $-4$，但你应该输出 $-4\\bmod (10^9+7)=10^9+3$。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n- 对于一些子任务，满足树最多有 $3\\times 10^5$ 个节点，且 $q\\le 100$；\n- 对于另一些子任务，满足 $q\\le 100$。\n\n对于上述每种情况，至少有一个这样的子任务。\n\n对于 $100\\%$ 的数据，保证 $2\\le n\\le 3\\times 10^5$，$1\\le q\\le 3\\times 10^5$，$2\\le a_i\\le 3\\times 10^5$，$1\\le W_{\\operatorname{lca}(A,B)}\\le W_A,W_B\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Ogromne drzewo", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 3 [Ogromne drzewo](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/ogr/)**\n\nByteasar 为他的女朋友 Algolina 买了一棵巨大的圣诞树。这是一份十分不寻常的礼物，但 Byteasar 是一位算法师，Algolina 已经习惯了这种惊喜。\n\n正如你所猜到的，这棵树不是植物，而是一个无环连通图。它非常大，但可以用一种有组织的方式来描述。它的节点有 $n$ 层。第一层只包含一个节点，表示树的根。每个节点的子节点都只在其下一层，最后一层的节点除外，它们是叶子。对于区间 $[1, n - 1]$ 中的每一个 $i$，第 $i$ 层的每个节点都有 $a_i$ 个子节点。\n\nAlgolina 想让 Byteasar 知道她对他的礼物有多满意，因此决定和他玩一个游戏。Algolina 选择了树上的某个节点 $A$，Byteasar 选择了节点 $B$（可能与 Algolina 相同）。现在从 Algolina 开始，他们俩将轮流重新对树的节点涂色——Algolina 用红色，Byteasar 用蓝色。在游戏开始时，所有节点都是白色的。每个节点将恰好被重新涂色一次——由 Algolina 或由 Byteasar 涂色。在任何时候，涂色的人都可以用自己使用的颜色对任何白色节点涂色，包括节点 $A$ 和 $B$。\n\n一旦所有顶点都被重新涂色了，这两人将计算出他们的分数。Algolina 获得的分数（用 $S_A$ 表示）将是所有红色节点到节点 $A$ 的距离之和，而 Byteasar 获得的分数（用 $S_B$ 表示）将是所有蓝色节点到节点 $B$ 的距离之和。我们所说的两个节点之间的距离，是指它们之间最短路径上的边的数量。Algolina 的目标是得分以最大可能比 Byteasar 的大，即最大化 $S_A-S_B$ 的值，而 Byteasar 的目标是最小化它。\n\nByteasar 很快指出，这是一个完全信息有限游戏，假设他们都以最优策略进行游戏，就可以计算出最终得分的差值有多大。他希望你能帮他计算出这个值。由于这个值可能非常大，你需要计算它对 $10^9+7$ 取模后的值。\n\n此外，由于在一次比赛后忘记礼物是不愉快的，你需要计算多次选择节点 $A$ 和 $B$ 的情况下两人最终得分之差。", "inputFormat": "第一行两个整数 $n,q$，分别表示树的层数和询问次数。\n\n第二行 $n-1$ 个整数 $a_1,a_2,\\cdots,a_{n-1}$，意义如题目描述。\n\n接下来 $q$ 行，每行描述 $A,B$。可以发现最终结果只取决于节点 $A,B$ 和它们的最近公共祖先都在哪一层，因此每行给出三个整数 $W_A,W_B,W_{\\operatorname{lca}(A,B)}$。", "outputFormat": "输出 $q$ 行，第 $i$ 行包含对第 $i$ 个询问的回答，对 $10^9+7$ 取模。", "hint": "#### 样例 1 解释\n\n样例中的树有三层，第一层一个节点，第二层三个节点，第三层六个节点。\n\n对于第二个询问，Algolina 和 Byteasar 都选择了根节点。对于最优决策，他们应该按照非递增的层数顺序选择顶点，最后的结果是 $(2 + 2 + 2 + 1 + 1) - (2 + 2 + 2 + 1 + 0) = 1$。\n\n对于第三个询问，答案是 $-4$，但你应该输出 $-4\\bmod (10^9+7)=10^9+3$。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n- 对于一些子任务，满足树最多有 $3\\times 10^5$ 个节点，且 $q\\le 100$；\n- 对于另一些子任务，满足 $q\\le 100$。\n\n对于上述每种情况，至少有一个这样的子任务。\n\n对于 $100\\%$ 的数据，保证 $2\\le n\\le 3\\times 10^5$，$1\\le q\\le 3\\times 10^5$，$2\\le a_i\\le 3\\times 10^5$，$1\\le W_{\\operatorname{lca}(A,B)}\\le W_A,W_B\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9100", "type": "P", "difficulty": 5, "samples": [["4\n0 2\n2 0\n3 2\n7 4", "7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2020", "分治", "单调栈", "PA（波兰）"], "title": "[PA 2020] Miny", "background": null, "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 3 [Miny](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/min/)**\n\n$n$ 枚地雷被运到 Bytau 的军事训练场，并沿一条直线埋设。每个地雷位于不同的地方，并且有自己的爆炸半径。当引爆时，地雷会自动引爆其爆炸半径内所有尚未爆炸的地雷。如果地雷 $a$ 和地雷 $b$ 之间的距离不超过地雷 $b$ 的爆炸半径，则我们称地雷 $a$ 在地雷 $b$ 的爆炸半径内。\n\nBytomir 中士想进行一项实验。他选择了一个任意的地雷子集（也许是空的），并让这个地雷子集内的所有地雷在同时手动引爆。实验的结果是一组已经爆炸的地雷——要么是手动引爆的引起的爆炸，要么是其他地雷爆炸导致的爆炸。\n\nBytomir 能得到多少种可能的实验结果？如果两个实验结果中爆炸的地雷相同，则这两个实验结果是相同的。由于结果可能很大，请输出它除以 $10^9+7$ 的余数。", "inputFormat": "输入第一行包含一个整数 $n$，表示地雷个数。\n\n接下来 $n$ 行，每行两个整数 $a_i,r_i$，分别表示地雷的位置和爆炸半径。你可以假设 $a_1<a_2<\\cdots<a_n$。", "outputFormat": "输出可能的实验结果总数对 $10^9+7$ 取模后的值。", "hint": "#### 样例 1 解释\n\n你可以得到 $7$ 种可能的实验结果：\n\n- $\\{\\}$（空集）：如果不引爆任何地雷；\n- $\\{1,2\\}$（地雷 $1,2$）：如果我们只引爆地雷 $1$；\n- $\\{1,2,3\\}$：如果我们引爆地雷 $1$ 和 $3$；\n- $\\{1,2,3,4\\}$：如果我们引爆地雷 $1$ 和 $4$；\n- $\\{2\\}$：如果我们只引爆地雷 $2$；\n- $\\{2,3\\}$：如果我们只引爆地雷 $3$；\n- $\\{2,3,4\\}$：如果我们只引爆地雷 $4$；\n\n请注意，可以通过不同的方式得到同一个实验结果——例如，如果我们引爆地雷 $1$ 和 $2$，也会得到 $\\{1, 2\\}$ 的结果。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 3\\times 10^5$，$0\\le a_i,r_i\\le 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Miny", "background": null, "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 3 [Miny](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/min/)**\n\n$n$ 枚地雷被运到 Bytau 的军事训练场，并沿一条直线埋设。每个地雷位于不同的地方，并且有自己的爆炸半径。当引爆时，地雷会自动引爆其爆炸半径内所有尚未爆炸的地雷。如果地雷 $a$ 和地雷 $b$ 之间的距离不超过地雷 $b$ 的爆炸半径，则我们称地雷 $a$ 在地雷 $b$ 的爆炸半径内。\n\nBytomir 中士想进行一项实验。他选择了一个任意的地雷子集（也许是空的），并让这个地雷子集内的所有地雷在同时手动引爆。实验的结果是一组已经爆炸的地雷——要么是手动引爆的引起的爆炸，要么是其他地雷爆炸导致的爆炸。\n\nBytomir 能得到多少种可能的实验结果？如果两个实验结果中爆炸的地雷相同，则这两个实验结果是相同的。由于结果可能很大，请输出它除以 $10^9+7$ 的余数。", "inputFormat": "输入第一行包含一个整数 $n$，表示地雷个数。\n\n接下来 $n$ 行，每行两个整数 $a_i,r_i$，分别表示地雷的位置和爆炸半径。你可以假设 $a_1<a_2<\\cdots<a_n$。", "outputFormat": "输出可能的实验结果总数对 $10^9+7$ 取模后的值。", "hint": "#### 样例 1 解释\n\n你可以得到 $7$ 种可能的实验结果：\n\n- $\\{\\}$（空集）：如果不引爆任何地雷；\n- $\\{1,2\\}$（地雷 $1,2$）：如果我们只引爆地雷 $1$；\n- $\\{1,2,3\\}$：如果我们引爆地雷 $1$ 和 $3$；\n- $\\{1,2,3,4\\}$：如果我们引爆地雷 $1$ 和 $4$；\n- $\\{2\\}$：如果我们只引爆地雷 $2$；\n- $\\{2,3\\}$：如果我们只引爆地雷 $3$；\n- $\\{2,3,4\\}$：如果我们只引爆地雷 $4$；\n\n请注意，可以通过不同的方式得到同一个实验结果——例如，如果我们引爆地雷 $1$ 和 $2$，也会得到 $\\{1, 2\\}$ 的结果。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 3\\times 10^5$，$0\\le a_i,r_i\\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P9101", "type": "P", "difficulty": 3, "samples": [["3", "6\n3 5\n6 -1\n2 6\n2 6\n6 -1\n-1 -1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "Special Judge", "构造", "PA（波兰）"], "title": "[PA 2020] Skierowany graf acykliczny", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 5 [Skierowany graf acykliczny](https://sio2.mimuw.edu.pl/c/pa-2020-1/dag/)**\n\n正如名字所示，有向无环图（*Directed Acyclic Graph*，简称 DAG）是一个无环的有向图。\n\n如果我们在这样一个图中选择两个节点，我们可以计算出这些节点之间存在多少条不同的有向路径。如果其中一条路径包含一条边而另一条不包含这条边，我们就认为这两条路径是不同的。\n\n你的任务是构造一个 $n$ 个节点（编号从 $1$ 到 $n$）的有向无环图，其中从节点 $1$ 到节点 $n$ 正好有 $k$ 条路径。你的图最多可以有 $100$ 个节点，每个节点最多可以有两条出边，而且不能包含重边（即如果一个节点有两条出边，它们必须通向不同的节点）。可以证明，对于每一个满足输入中约束条件的 $k$，都可以构造一个满足条件的图。", "inputFormat": "一行一个整数 $k$。", "outputFormat": "第一行输出一个整数 $n$，表示你构造的图中节点的个数。\n\n接下来 $n$ 行，每行两个整数。第 $i$ 行表示以编号为 $i$ 的节点为起点的出边到达的节点编号。这两个数中任何一个都可以是 $-1$，表示不存在这条边。如果两个数都不是 $-1$，那这两个数不应该相等。\n\n如果有许多满足条件的图，你可以输出任何一个。注意你不需要最小化节点个数，且在限制之下图节点个数是足够的。", "hint": "#### 样例 1 解释\n\n下图展示了输出中 $6$ 个节点的有向无环图，从 $1$ 到 $6$ 有三条路径：$1\\to 3\\to 2\\to 6,1\\to 3\\to 6$ 和 $1\\to 5\\to 6$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hinzei5g.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le k\\le 10^9$，$2\\le n\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Skierowany graf acykliczny", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 5 [Skierowany graf acykliczny](https://sio2.mimuw.edu.pl/c/pa-2020-1/dag/)**\n\n正如名字所示，有向无环图（*Directed Acyclic Graph*，简称 DAG）是一个无环的有向图。\n\n如果我们在这样一个图中选择两个节点，我们可以计算出这些节点之间存在多少条不同的有向路径。如果其中一条路径包含一条边而另一条不包含这条边，我们就认为这两条路径是不同的。\n\n你的任务是构造一个 $n$ 个节点（编号从 $1$ 到 $n$）的有向无环图，其中从节点 $1$ 到节点 $n$ 正好有 $k$ 条路径。你的图最多可以有 $100$ 个节点，每个节点最多可以有两条出边，而且不能包含重边（即如果一个节点有两条出边，它们必须通向不同的节点）。可以证明，对于每一个满足输入中约束条件的 $k$，都可以构造一个满足条件的图。", "inputFormat": "一行一个整数 $k$。", "outputFormat": "第一行输出一个整数 $n$，表示你构造的图中节点的个数。\n\n接下来 $n$ 行，每行两个整数。第 $i$ 行表示以编号为 $i$ 的节点为起点的出边到达的节点编号。这两个数中任何一个都可以是 $-1$，表示不存在这条边。如果两个数都不是 $-1$，那这两个数不应该相等。\n\n如果有许多满足条件的图，你可以输出任何一个。注意你不需要最小化节点个数，且在限制之下图节点个数是足够的。", "hint": "#### 样例 1 解释\n\n下图展示了输出中 $6$ 个节点的有向无环图，从 $1$ 到 $6$ 有三条路径：$1\\to 3\\to 2\\to 6,1\\to 3\\to 6$ 和 $1\\to 5\\to 6$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hinzei5g.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le k\\le 10^9$，$2\\le n\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P9102", "type": "P", "difficulty": 4, "samples": [["5\n2 7 4 4 1", "8"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2020", "PA（波兰）"], "title": "[PA 2020] Cukierki", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 5 [Cukierki](https://sio2.mimuw.edu.pl/c/pa-2020-1/cuk/)**\n\nBytie 要去参加 Bitek 的生日聚会。他知道 Bitek 喜欢吃甜食，所以他想送他一些糖果作为礼物。他买了 $n$ 袋糖，其中第 $i$ 袋包含 $a_i$ 个糖果。\n\n然而，这些糖相当重，Bytie 想知道他是否需要把它们全都给 Bitek。他决定，他将选择一个非空的袋装糖果子集，把它们拿给 Bitek，并对他说：「我这里总共有 $x$ 颗糖果，你想要多少？」，其中 $x$ 将是带到派对上的包装里的糖果总数。Bitek 听到这个问题后，可能会选择区间 $[1, x]$ 中的任何整数 $y$。无论 Bitek 的回答如何，他都希望能够从带到派对上的糖中选择一部分（其余的留给自己），这样这些袋糖中的糖果总数正好等于 $y$。当然，不可以撕毁包装纸——给散装的糖果是不礼貌的。\n\n因此，Bytie 在想，他能给 Bitek 带去多少种非空的袋装糖果子集，以便在不考虑 Bitek 的选择的情况下，能够送给他所需数量的糖果。请帮助他计算一下吧！由于这种子集的数量可能非常大，请输出它对 $10^9+7$ 取模后的结果。", "inputFormat": "第一行一个整数 $n$，表示 Bytie 有的袋装糖果数量。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，表示每袋糖果中糖果的数量。", "outputFormat": "输出可能的袋装糖果子集种类数对 $10^9+7$ 取模后的值。", "hint": "#### 样例 1 解释\n\nBytie 可以带去 $8$ 种非空子集：$\\{5\\}, \\{1, 5\\}, \\{1, 3, 5\\}, \\{1, 4, 5\\}, \\{1, 3, 4, 5\\}, \\{1, 2, 3, 5\\}, \\{1, 2, 4, 5\\}$ 和 $\\{1, 2, 3, 4, 5\\}$。例如，Bytie 带去的子集是 $\\{1,2,4,5\\}$，Bitek 想要 $9$ 颗糖果时，Bytie 只能给他第 $1,2$ 包糖。Bytie 不可以带去 $\\{1,2,5\\}$ 子集，如果 Bitek 想要 $6$ 颗糖的话 Bytie 就犯难了。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 5\\times 10^3$，$1\\le a_i\\le 5\\times 10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Cukierki", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 5 [Cukierki](https://sio2.mimuw.edu.pl/c/pa-2020-1/cuk/)**\n\nBytie 要去参加 Bitek 的生日聚会。他知道 Bitek 喜欢吃甜食，所以他想送他一些糖果作为礼物。他买了 $n$ 袋糖，其中第 $i$ 袋包含 $a_i$ 个糖果。\n\n然而，这些糖相当重，Bytie 想知道他是否需要把它们全都给 Bitek。他决定，他将选择一个非空的袋装糖果子集，把它们拿给 Bitek，并对他说：「我这里总共有 $x$ 颗糖果，你想要多少？」，其中 $x$ 将是带到派对上的包装里的糖果总数。Bitek 听到这个问题后，可能会选择区间 $[1, x]$ 中的任何整数 $y$。无论 Bitek 的回答如何，他都希望能够从带到派对上的糖中选择一部分（其余的留给自己），这样这些袋糖中的糖果总数正好等于 $y$。当然，不可以撕毁包装纸——给散装的糖果是不礼貌的。\n\n因此，Bytie 在想，他能给 Bitek 带去多少种非空的袋装糖果子集，以便在不考虑 Bitek 的选择的情况下，能够送给他所需数量的糖果。请帮助他计算一下吧！由于这种子集的数量可能非常大，请输出它对 $10^9+7$ 取模后的结果。", "inputFormat": "第一行一个整数 $n$，表示 Bytie 有的袋装糖果数量。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，表示每袋糖果中糖果的数量。", "outputFormat": "输出可能的袋装糖果子集种类数对 $10^9+7$ 取模后的值。", "hint": "#### 样例 1 解释\n\nBytie 可以带去 $8$ 种非空子集：$\\{5\\}, \\{1, 5\\}, \\{1, 3, 5\\}, \\{1, 4, 5\\}, \\{1, 3, 4, 5\\}, \\{1, 2, 3, 5\\}, \\{1, 2, 4, 5\\}$ 和 $\\{1, 2, 3, 4, 5\\}$。例如，Bytie 带去的子集是 $\\{1,2,4,5\\}$，Bitek 想要 $9$ 颗糖果时，Bytie 只能给他第 $1,2$ 包糖。Bytie 不可以带去 $\\{1,2,5\\}$ 子集，如果 Bitek 想要 $6$ 颗糖的话 Bytie 就犯难了。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 5\\times 10^3$，$1\\le a_i\\le 5\\times 10^3$。", "locale": "zh-CN"}}}
{"pid": "P9103", "type": "P", "difficulty": 6, "samples": [["4\n3 1 -1 3\n2 -1 4 2", "3"], ["8\n2 4 2 7 4 5 -1 7\n2 3 6 5 3 -1 6 7", "7"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2020", "笛卡尔树", "PA（波兰）"], "title": "[PA 2020] Bardzo skomplikowany test", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 5 [Bardzo skomplikowany test](https://sio2.mimuw.edu.pl/c/pa-2020-1/bst/)**\n\nBytie 刚刚参加了算法和数据结构这门课的面试。他没有为之学习太长时间，所以他做得不是太好。经过几分钟的交谈，这位心碎的主讲老师决定给这个男孩最后一次机会。\n\n- 「孩儿，你知道啥是 BST 不？」教授问\n\nBytie 听到这句话后内心狂喜，因为在他上课睡觉的时候记住了一些理论。\n\n- 「知道。大小为 $n$ 的 BST 是一棵有根树，其顶点用 $1$ 到 $n$ 的整数来编号。每个节点最多可以有两个子节点；它可以有一个最多一个左子节点和一个最多一个右子节点。此外，每个节点的编号必须大于其左子树中所有节点的编号，并小于其右子树中所有顶点的编号。」Bytie 回答说，他达到了他潜意识的深处。\n- 「很好。让我们看看你是否记住了如何对 BST 进行旋转。」一直坐在那里的教授回答说。他站起来，向黑板走去。\n\nBytie 被冷汗浸透了。他一时失去了信心，因为他记不起旋转的具体原理（可能在上这节课的时候，他正在另一边摸鱼，没听课）。考官在黑板上画了两棵同样大小的 BST 树，并让 Bytie 用正确的旋转将第一棵树转化为第二棵树。\n\nBytie 想了一会儿，认为左旋就是选择某个节点 $v$ 和它的右子节点 $w$，并让 $w$ 成为 $v$ 的父节点。Bytie 的直觉用以下伪代码描述。\n\n```\nif v.Parent != null then\n    if v.Parent.RightSon == v then\n        v.Parent.RightSon := w\n    else\n        v.Parent.LeftSon := w\nw.Parent := v.Parent\nv.Parent := w\nw.LeftSon := v\nv.RightSon := null\n```\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/shqgiur7.png)\n\n以此类推，Bytie 理解了右旋，其中 $w$ 是 $v$ 的左子节点。\n\n```\nif v.Parent != null then\n    if v.Parent.RightSon == v then\n        v.Parent.RightSon := w\n    else\n        v.Parent.LeftSon := w\nw.Parent := v.Parent\nv.Parent := w\nw.RightSon := v\nv.LeftSon := null\n```\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tpmzihlx.png)\n\n然而，Bytie 很快就注意到有些不对劲。如果节点 $w$ 在左旋时有左子树，它就会丢失！同样在右转过程中，节点 $w$ 的右子树也会丢失。\n\n- 「快点孩儿，你不是唯一一个想通过这次考试的人。」教授不耐烦地催促道。\n\n在没有太多时间考虑的情况下，Bytie 假设只有在这个有问题的子树是空的情况下才能执行旋转，也就是说，如果没有顶点丢失并且树保持一致的话才进行旋转。\n\n为了尽快结束他的煎熬，他决定进行最少次数的旋转，使他能够将第一棵树变成第二棵。请告诉他这是否可行，如果可行，他需要进行多少次轮换？由于这个数字可能相当大，请告诉他这个值对 $10^9+7$ 取模后的值。", "inputFormat": "第一行包含一个整数 $n$，表示这个 BST 的大小。\n\n接下来两行描述这两棵树。对于一棵树用一行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 描述。如果 $a_i\\ge 1$，表示 $i$ 节点的父节点；如果 $a_i=-1$，则表示这是树的根节点。\n\n你可以假设这两棵树都是合法的 BST，即树中没有环，恰好有一个根节点，每个节点最多只有一个比自己小的子节点和一个比自己大的子节点。", "outputFormat": "输出应该包含一个整数，表示用 Bytie 的方式把第一棵树转化为第二棵树所需最少旋转次数对 $10^9+7$ 取模后的值，如果不可能转化，输出 $-1$。", "hint": "#### 样例 1 解释\n\n下图展示了旋转最小次数所采取的旋转方式。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f1dblwez.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 5\\times 10^5$，$-1\\le a_i\\le n$，$a_i\\neq 0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Bardzo skomplikowany test", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 5 [Bardzo skomplikowany test](https://sio2.mimuw.edu.pl/c/pa-2020-1/bst/)**\n\nBytie 刚刚参加了算法和数据结构这门课的面试。他没有为之学习太长时间，所以他做得不是太好。经过几分钟的交谈，这位心碎的主讲老师决定给这个男孩最后一次机会。\n\n- 「孩儿，你知道啥是 BST 不？」教授问\n\nBytie 听到这句话后内心狂喜，因为在他上课睡觉的时候记住了一些理论。\n\n- 「知道。大小为 $n$ 的 BST 是一棵有根树，其顶点用 $1$ 到 $n$ 的整数来编号。每个节点最多可以有两个子节点；它可以有一个最多一个左子节点和一个最多一个右子节点。此外，每个节点的编号必须大于其左子树中所有节点的编号，并小于其右子树中所有顶点的编号。」Bytie 回答说，他达到了他潜意识的深处。\n- 「很好。让我们看看你是否记住了如何对 BST 进行旋转。」一直坐在那里的教授回答说。他站起来，向黑板走去。\n\nBytie 被冷汗浸透了。他一时失去了信心，因为他记不起旋转的具体原理（可能在上这节课的时候，他正在另一边摸鱼，没听课）。考官在黑板上画了两棵同样大小的 BST 树，并让 Bytie 用正确的旋转将第一棵树转化为第二棵树。\n\nBytie 想了一会儿，认为左旋就是选择某个节点 $v$ 和它的右子节点 $w$，并让 $w$ 成为 $v$ 的父节点。Bytie 的直觉用以下伪代码描述。\n\n```\nif v.Parent != null then\n    if v.Parent.RightSon == v then\n        v.Parent.RightSon := w\n    else\n        v.Parent.LeftSon := w\nw.Parent := v.Parent\nv.Parent := w\nw.LeftSon := v\nv.RightSon := null\n```\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/shqgiur7.png)\n\n以此类推，Bytie 理解了右旋，其中 $w$ 是 $v$ 的左子节点。\n\n```\nif v.Parent != null then\n    if v.Parent.RightSon == v then\n        v.Parent.RightSon := w\n    else\n        v.Parent.LeftSon := w\nw.Parent := v.Parent\nv.Parent := w\nw.RightSon := v\nv.LeftSon := null\n```\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tpmzihlx.png)\n\n然而，Bytie 很快就注意到有些不对劲。如果节点 $w$ 在左旋时有左子树，它就会丢失！同样在右转过程中，节点 $w$ 的右子树也会丢失。\n\n- 「快点孩儿，你不是唯一一个想通过这次考试的人。」教授不耐烦地催促道。\n\n在没有太多时间考虑的情况下，Bytie 假设只有在这个有问题的子树是空的情况下才能执行旋转，也就是说，如果没有顶点丢失并且树保持一致的话才进行旋转。\n\n为了尽快结束他的煎熬，他决定进行最少次数的旋转，使他能够将第一棵树变成第二棵。请告诉他这是否可行，如果可行，他需要进行多少次轮换？由于这个数字可能相当大，请告诉他这个值对 $10^9+7$ 取模后的值。", "inputFormat": "第一行包含一个整数 $n$，表示这个 BST 的大小。\n\n接下来两行描述这两棵树。对于一棵树用一行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 描述。如果 $a_i\\ge 1$，表示 $i$ 节点的父节点；如果 $a_i=-1$，则表示这是树的根节点。\n\n你可以假设这两棵树都是合法的 BST，即树中没有环，恰好有一个根节点，每个节点最多只有一个比自己小的子节点和一个比自己大的子节点。", "outputFormat": "输出应该包含一个整数，表示用 Bytie 的方式把第一棵树转化为第二棵树所需最少旋转次数对 $10^9+7$ 取模后的值，如果不可能转化，输出 $-1$。", "hint": "#### 样例 1 解释\n\n下图展示了旋转最小次数所采取的旋转方式。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f1dblwez.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 5\\times 10^5$，$-1\\le a_i\\le n$，$a_i\\neq 0$。", "locale": "zh-CN"}}}
{"pid": "P9104", "type": "P", "difficulty": 6, "samples": [["4 3 4\n1 2 4 2\n3 1 3 4\n3 2 3 2\n4 4\n3 2\n4 3\n4 4", "6\n7\n7\n8\n7"], ["7 2 0\n1 1 6 6\n2 2 7 7", "22"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "PA（波兰）"], "title": "[PA 2020] Królewski bal", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 5 [Królewski bal](https://sio2.mimuw.edu.pl/c/pa-2020-1/bal/)**\n\n自古以来，Byteotia 的所有统治者都会举行奢华的舞会，Byteur 国王也不例外。然而，每当他组织一次，他就觉得少了点什么。因此，他决定在下一次舞会中加入一些艺术元素。\n\n为此，Byteur 国王委托他的首席顾问编排演出，不久之后，首席顾问向他提出了自己的设想。\n\n根据顾问的计划，$n^2$ 名马戏团演员将参加演出，其中 $n$ 是一个正整数。在演出的压轴部分，他们将排成 $n$ 行，每行恰好有 $n$ 个马戏团演员，从而形成一个 $n\\times n$ 大小的正方形。在压轴部分开始时，每个演员将带或不带燃烧的呼拉圈跳舞。在午夜时分，一些带着呼啦圈跳舞的马戏团演员可能会把呼啦圈扔给其他没有带呼啦圈跳舞的马戏团演员。每个演员最多允许扔给一个其他的演员。\n\n他们都会在同一时间进行投掷。他们是专业人士，所以他们的呼啦圈肯定不会在空中相撞，但这里有一个问题。**每次投掷必须在位于同一行或同一列的演员之间进行**。\n\n值得一提的是，Byteur 国王喜欢大规模的行动，所以马戏团演员的数量可能非常庞大。在制定计划时，他的顾问首先确定了数字 $n$，并假设所有马戏团的演员都会在没有燃烧呼拉圈的情况下开始最后的表演。然后，他会选择 $m$ 次一些特定的行列范围，画出一个矩形，并使得这个区域中的每个演员应该以不同的方式开始压轴表演。即，如果在之前的方案中他们拿着呼啦圈开始，则这版方案中他们就不拿呼啦圈开始，反之亦然。\n\nByteur 国王在得知顾问的计划后，立即明白，为了使演出尽可能地壮观，呼啦圈的抛掷次数应该尽可能地多。Byteur 国王想知道这个数字，但这并不容易，因为他不断修改计划。他的每项修改（他总共已经做了 $q$ 次修改）都涉及到挑选一个马戏团演员并改变他开始压轴表演的方式（即如果他之前拿着呼啦圈开始，那么他现在就不拿着呼啦圈开始，反之亦然）。国王的修改在方案上永久保留，也就是说，如果有任何适用于某个马戏团演员的修改，这个修改的效果一直保留到最后，除非国王再次修改他。\n\n因此，顾问的任务并不简单。帮助他，对于区间 $[0, q]$ 中的每个整数 $i$，在考虑国王的前 $i$ 次修改后，确定可能发生的最大投掷次数。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n接下来 $m$ 行描述顾问的方案，每行包含四个整数 $x_1,y_1,x_2,y_2$，表示对行编号 $x_1$ 到 $x_2$（包含两端），列编号 $y_1$ 到 $y_2$（包含两端）的艺术家进行一次操作。行列编号均从 $1$ 到 $n$。\n\n接下来 $q$ 行描述国王的修改，第 $i$ 行包含两个数 $a_i,b_i$，表示国王修改第 $a_i$ 行第 $b_i$ 列的演员状态。", "outputFormat": "输出 $q+1$ 行，第 $i$ 行输出如果考虑国王的前 $i-1$ 次修改，可能发生的最大投掷次数。", "hint": "#### 样例 1 解释\n\n下图展示了国王进行了第一次修改后的情况。演出开始有呼啦圈的演员用加粗圆圈标出，箭头标明了可能发生的投掷。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/brbphngp.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n- 对于一些子任务，满足 $n\\le 50$，$m\\le 10^4$，$q=0$。\n- 对于一些其他的子任务，满足 $n\\le 200$，$m\\le 10^5$，$q\\le 10$。\n- 对于一些其他的子任务，满足 $n\\le 2\\times 10^3$，$m\\le 10^5$，$q\\le 5\\times 10^3$。\n- 对于一些其他的子任务，满足 $q=0$。\n\n对于上述情况，至少有一个子任务满足。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 3\\times 10^5$，$0\\le m,q\\le 3\\times 10^5$，$1\\le x_1\\le x_2\\le n$，$1\\le y_1\\le y_2\\le n$，$1\\le a_i,b_i\\le n$。\n\n此外，对于每个子任务，至少满足以下条件中的一个：\n\n- $n\\le 2\\times 10^3$\n- 时间限制为 $12$ 秒\n\n由于未给出具体子任务时间限制，因此在洛谷上所有子任务的时间限制均为 $3$ 秒。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Królewski bal", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 5 [Królewski bal](https://sio2.mimuw.edu.pl/c/pa-2020-1/bal/)**\n\n自古以来，Byteotia 的所有统治者都会举行奢华的舞会，Byteur 国王也不例外。然而，每当他组织一次，他就觉得少了点什么。因此，他决定在下一次舞会中加入一些艺术元素。\n\n为此，Byteur 国王委托他的首席顾问编排演出，不久之后，首席顾问向他提出了自己的设想。\n\n根据顾问的计划，$n^2$ 名马戏团演员将参加演出，其中 $n$ 是一个正整数。在演出的压轴部分，他们将排成 $n$ 行，每行恰好有 $n$ 个马戏团演员，从而形成一个 $n\\times n$ 大小的正方形。在压轴部分开始时，每个演员将带或不带燃烧的呼拉圈跳舞。在午夜时分，一些带着呼啦圈跳舞的马戏团演员可能会把呼啦圈扔给其他没有带呼啦圈跳舞的马戏团演员。每个演员最多允许扔给一个其他的演员。\n\n他们都会在同一时间进行投掷。他们是专业人士，所以他们的呼啦圈肯定不会在空中相撞，但这里有一个问题。**每次投掷必须在位于同一行或同一列的演员之间进行**。\n\n值得一提的是，Byteur 国王喜欢大规模的行动，所以马戏团演员的数量可能非常庞大。在制定计划时，他的顾问首先确定了数字 $n$，并假设所有马戏团的演员都会在没有燃烧呼拉圈的情况下开始最后的表演。然后，他会选择 $m$ 次一些特定的行列范围，画出一个矩形，并使得这个区域中的每个演员应该以不同的方式开始压轴表演。即，如果在之前的方案中他们拿着呼啦圈开始，则这版方案中他们就不拿呼啦圈开始，反之亦然。\n\nByteur 国王在得知顾问的计划后，立即明白，为了使演出尽可能地壮观，呼啦圈的抛掷次数应该尽可能地多。Byteur 国王想知道这个数字，但这并不容易，因为他不断修改计划。他的每项修改（他总共已经做了 $q$ 次修改）都涉及到挑选一个马戏团演员并改变他开始压轴表演的方式（即如果他之前拿着呼啦圈开始，那么他现在就不拿着呼啦圈开始，反之亦然）。国王的修改在方案上永久保留，也就是说，如果有任何适用于某个马戏团演员的修改，这个修改的效果一直保留到最后，除非国王再次修改他。\n\n因此，顾问的任务并不简单。帮助他，对于区间 $[0, q]$ 中的每个整数 $i$，在考虑国王的前 $i$ 次修改后，确定可能发生的最大投掷次数。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n接下来 $m$ 行描述顾问的方案，每行包含四个整数 $x_1,y_1,x_2,y_2$，表示对行编号 $x_1$ 到 $x_2$（包含两端），列编号 $y_1$ 到 $y_2$（包含两端）的艺术家进行一次操作。行列编号均从 $1$ 到 $n$。\n\n接下来 $q$ 行描述国王的修改，第 $i$ 行包含两个数 $a_i,b_i$，表示国王修改第 $a_i$ 行第 $b_i$ 列的演员状态。", "outputFormat": "输出 $q+1$ 行，第 $i$ 行输出如果考虑国王的前 $i-1$ 次修改，可能发生的最大投掷次数。", "hint": "#### 样例 1 解释\n\n下图展示了国王进行了第一次修改后的情况。演出开始有呼啦圈的演员用加粗圆圈标出，箭头标明了可能发生的投掷。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/brbphngp.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n- 对于一些子任务，满足 $n\\le 50$，$m\\le 10^4$，$q=0$。\n- 对于一些其他的子任务，满足 $n\\le 200$，$m\\le 10^5$，$q\\le 10$。\n- 对于一些其他的子任务，满足 $n\\le 2\\times 10^3$，$m\\le 10^5$，$q\\le 5\\times 10^3$。\n- 对于一些其他的子任务，满足 $q=0$。\n\n对于上述情况，至少有一个子任务满足。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 3\\times 10^5$，$0\\le m,q\\le 3\\times 10^5$，$1\\le x_1\\le x_2\\le n$，$1\\le y_1\\le y_2\\le n$，$1\\le a_i,b_i\\le n$。\n\n此外，对于每个子任务，至少满足以下条件中的一个：\n\n- $n\\le 2\\times 10^3$\n- 时间限制为 $12$ 秒\n\n由于未给出具体子任务时间限制，因此在洛谷上所有子任务的时间限制均为 $3$ 秒。", "locale": "zh-CN"}}}
{"pid": "P9105", "type": "P", "difficulty": 7, "samples": [["8 11\n2 3\n4 5\n3 1\n3 2\n5 7\n3 6\n1 2\n3 4\n6 5\n8 7\n7 8", "103"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "PA（波兰）"], "title": "[PA 2020] Trzy drogi", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 5 [Trzy drogi](https://sio2.mimuw.edu.pl/c/pa-2020-1/trz/)**\n\nByteur 国王，Byteotia 的统治者，梦想着征服 Bitotia。梦见打败敌人是件令人愉快的事，然而生活不是一场梦，醒来后情况就有些不同。\n\nByteotia 由 $n$ 个城市（编号从 $1$ 到 $n$）组成，由 $m$ 条双向道路连接。每条路都连接着两个不同的城市，但也可能有多条道路连接着同一对城市的情况。从任何城市出发，经过一条或多条道路可以到达其他任意城市。\n\n国王想知道，如果 Bitotia 进攻 Byteotia，从现有的 $m$ 条道路中毁掉三条，会发生什么，将严重损害该国的通信的可能性有多大？你的任务是找出答案！数一数有多少条这样的三条路，在这些路被毁之后，至少有一对城市不可以通过剩余的道路互相到达对方。", "inputFormat": "第一行包含两个整数 $n,m$，分别表示 Byteotia 的城市个数和道路条数。\n\n接下来 $m$ 行，每行两个整数 $a_i,b_i$，表示城市 $a_i$ 和 $b_i$ 之间被一条道路连接。\n\n你可以假设从任何城市出发，经过一条或多条道路可以到达其他任意城市。", "outputFormat": "输出一行一个整数，表示移除这三条路，至少存在两个城市彼此不可达的无序三元组的个数。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ew3z3u7s.png)\n\n请注意，例如移除第 $3,5,7$ 条路后，Byteotia 会被分为多于两部分，但这样的三元组只能被计算一次。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $2\\le n\\le 2\\times 10^5$，$3\\le m\\le 5\\times 10^5$，$1\\le a_i,b_i\\le n$，$a_i\\neq b_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Trzy drogi", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 5 [Trzy drogi](https://sio2.mimuw.edu.pl/c/pa-2020-1/trz/)**\n\nByteur 国王，Byteotia 的统治者，梦想着征服 Bitotia。梦见打败敌人是件令人愉快的事，然而生活不是一场梦，醒来后情况就有些不同。\n\nByteotia 由 $n$ 个城市（编号从 $1$ 到 $n$）组成，由 $m$ 条双向道路连接。每条路都连接着两个不同的城市，但也可能有多条道路连接着同一对城市的情况。从任何城市出发，经过一条或多条道路可以到达其他任意城市。\n\n国王想知道，如果 Bitotia 进攻 Byteotia，从现有的 $m$ 条道路中毁掉三条，会发生什么，将严重损害该国的通信的可能性有多大？你的任务是找出答案！数一数有多少条这样的三条路，在这些路被毁之后，至少有一对城市不可以通过剩余的道路互相到达对方。", "inputFormat": "第一行包含两个整数 $n,m$，分别表示 Byteotia 的城市个数和道路条数。\n\n接下来 $m$ 行，每行两个整数 $a_i,b_i$，表示城市 $a_i$ 和 $b_i$ 之间被一条道路连接。\n\n你可以假设从任何城市出发，经过一条或多条道路可以到达其他任意城市。", "outputFormat": "输出一行一个整数，表示移除这三条路，至少存在两个城市彼此不可达的无序三元组的个数。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ew3z3u7s.png)\n\n请注意，例如移除第 $3,5,7$ 条路后，Byteotia 会被分为多于两部分，但这样的三元组只能被计算一次。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $2\\le n\\le 2\\times 10^5$，$3\\le m\\le 5\\times 10^5$，$1\\le a_i,b_i\\le n$，$a_i\\neq b_i$。", "locale": "zh-CN"}}}
{"pid": "P9106", "type": "P", "difficulty": 7, "samples": [["2\n2\n12\nW + 2 Z W + 2 Z W + 2 Z W + 2 Z\n12\nW + 3 Z W + 3 Z W + 3 Z W + 3 Z\n3\n3\nW W - 5\n5\n+ 9 Z + 1 Z W\n8\n+ 10 Z - 2 Z - 5 W - 1 Z", "5\n7"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "PA（波兰）"], "title": "[PA 2020] Programowanie współbieżne", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 5 [Programowanie współbieżne](https://sio2.mimuw.edu.pl/c/pa-2020-1/pro/)**\n\n为了准备算法竞赛，Bytie 决定学习一些并发编程的知识。毕竟，即使是 PA，也曾经出过分布式题（参考 PA 2018 Runda 4）。\n\nBytie 从编写 $n$ 个非常简单的程序开始。所有程序共享一个全局整数型变量 $x$，此外，每个程序都有一个私有的计数器 $y$。每个程序都由一连串的指令组成，每个指令都属于以下四种类型之一：\n\n- $\\texttt W$：将全局变量的值 $x$ 载入私有计数器 $y$。\n- $\\texttt Z$：将私有计数器 $y$ 的值写入全局变量 $x$。\n- $\\texttt{+ }c$：将 $y$ 的值加一正常数 $c$。\n- $\\texttt{- }c$：将 $y$ 的值减一正常数 $c$。\n\nBytie 并行运行所有的程序。所有计数器 $y$ 和变量 $x$ 的初始值都是 $0$。这些程序的指令**交错**执行，即所有程序的所有指令都是一个接一个地执行，对于每个时刻，每个程序满足它的指令的一个前缀以一定顺序被执行。\n\n这种交错执行的方式结果是相当不幸的，变量 $x$ 的最终值是如此之小，以至于让 Bytie 非常惊讶。他甚至怀疑这是不可能的，是他的电脑骗了他。帮助 Bytie 验证他的疑惑，写一个验证器，对于给定的程序，计算所有程序并行执行后变量 $x$ 的最小可能值是多少。", "inputFormat": "第一行一个整数 $t$，表示一组测试数据中测试点个数。\n\n对于每个测试点，第一行一个整数 $n$，表示 Bytie 写的程序个数。\n\n接下来 $2n$ 行描述每个程序。对于每个程序的描述有两行，第一行一个整数 $l$，表示程序中指令个数。第二行包含对这 $l$ 个指令的描述，指令是如下四种类型之一：\n\n- 一个字符 $\\texttt W$：表示载入指令；\n- 一个字符 $\\texttt Z$：表示写入指令；\n- 一个字符 $\\texttt{+}$ 和一个数字 $c$：表示给私有计数器加 $c$；\n- 一个字符 $\\texttt{-}$ 和一个数字 $c$：表示给私有计数器减 $c$。\n\n对于一组数据中的所有测试点，$l$ 的总和不超过 $10^6$。", "outputFormat": "输出 $t$ 行，第 $i$ 行是对第 $i$ 个测试点的回答，表示在并行执行这些程序后 $x$ 可能的最小值。", "hint": "#### 样例 1 解释\n\n对于第一个测试点，得到最小的 $x$ 程序指令执行顺序如下表。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/llutmlbg.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le t\\le 10^5$，$1\\le n\\le 10^5$，$1\\le l\\le 10^5$，$\\sum{l}\\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Programowanie współbieżne", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 5 [Programowanie współbieżne](https://sio2.mimuw.edu.pl/c/pa-2020-1/pro/)**\n\n为了准备算法竞赛，Bytie 决定学习一些并发编程的知识。毕竟，即使是 PA，也曾经出过分布式题（参考 PA 2018 Runda 4）。\n\nBytie 从编写 $n$ 个非常简单的程序开始。所有程序共享一个全局整数型变量 $x$，此外，每个程序都有一个私有的计数器 $y$。每个程序都由一连串的指令组成，每个指令都属于以下四种类型之一：\n\n- $\\texttt W$：将全局变量的值 $x$ 载入私有计数器 $y$。\n- $\\texttt Z$：将私有计数器 $y$ 的值写入全局变量 $x$。\n- $\\texttt{+ }c$：将 $y$ 的值加一正常数 $c$。\n- $\\texttt{- }c$：将 $y$ 的值减一正常数 $c$。\n\nBytie 并行运行所有的程序。所有计数器 $y$ 和变量 $x$ 的初始值都是 $0$。这些程序的指令**交错**执行，即所有程序的所有指令都是一个接一个地执行，对于每个时刻，每个程序满足它的指令的一个前缀以一定顺序被执行。\n\n这种交错执行的方式结果是相当不幸的，变量 $x$ 的最终值是如此之小，以至于让 Bytie 非常惊讶。他甚至怀疑这是不可能的，是他的电脑骗了他。帮助 Bytie 验证他的疑惑，写一个验证器，对于给定的程序，计算所有程序并行执行后变量 $x$ 的最小可能值是多少。", "inputFormat": "第一行一个整数 $t$，表示一组测试数据中测试点个数。\n\n对于每个测试点，第一行一个整数 $n$，表示 Bytie 写的程序个数。\n\n接下来 $2n$ 行描述每个程序。对于每个程序的描述有两行，第一行一个整数 $l$，表示程序中指令个数。第二行包含对这 $l$ 个指令的描述，指令是如下四种类型之一：\n\n- 一个字符 $\\texttt W$：表示载入指令；\n- 一个字符 $\\texttt Z$：表示写入指令；\n- 一个字符 $\\texttt{+}$ 和一个数字 $c$：表示给私有计数器加 $c$；\n- 一个字符 $\\texttt{-}$ 和一个数字 $c$：表示给私有计数器减 $c$。\n\n对于一组数据中的所有测试点，$l$ 的总和不超过 $10^6$。", "outputFormat": "输出 $t$ 行，第 $i$ 行是对第 $i$ 个测试点的回答，表示在并行执行这些程序后 $x$ 可能的最小值。", "hint": "#### 样例 1 解释\n\n对于第一个测试点，得到最小的 $x$ 程序指令执行顺序如下表。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/llutmlbg.png)\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le t\\le 10^5$，$1\\le n\\le 10^5$，$1\\le l\\le 10^5$，$\\sum{l}\\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9107", "type": "P", "difficulty": 3, "samples": [["5 7 1\n......X\nX.X..X.\n..X.X.X\n.X.X...\n.....X.\n2 1", "26 1"], ["2 5 4\n.X...\n...X.\n2 1\n2 2\n1 7\n2 1", "13 3"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "广度优先搜索 BFS", "PA（波兰）"], "title": "[PA 2020] Wycieczka górska", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 4 [Wycieczka górska](https://sio2.mimuw.edu.pl/c/pa-2020-1/wyc/)**\n\n一群 $k$ 个旅行者朋友去了 Byte 山。在最后一天，他们决定组织一场登山比赛，从他们所住的旅店到 Byte 山顶。\n\n每个旅行者都有一张区域地图，它是一个分为 $n$ 行 $m$ 列的矩形；因此地图一共包含 $n\\cdot m$ 个区域。旅店位于地图左上角的区域，而山顶则位于地图右下角的区域。Byte 山以其非常均匀而闻名——对于地图上的任何区域，在地图上与之相邻的右面或下面的区域海拔较高，而相邻的左边或上面区域海拔较低。但是，这座山也因潜伏着许多危险地区而闻名。有些地区在地图上标明是非常危险的，因为那里有野生动物居住——所以最好不要到那里去……\n\n你是 Byte 山山脚下的一个小屋的看守人。通过观察每一个旅行者，你已经为他们每个人分配了两个参数 $a_i$ 和 $b_i$，这些参数决定了他们在山坡上的运动速度。具体来说，如果第 $i$ 个旅行者向更高的区域移动，那么他需要 $a_i$ 分钟，如果旅行者向更低的区域移动，则需要 $b_i$ 分钟。你也知道，每个旅行者都会走对他们来说从小屋到山顶最快的路线，并且路线完全在地形图上，而且避开了所有的危险区域。\n\n你想知道最快的人需要多长时间才能到达山顶，有多少人将与最快的人同时爬到山顶。你可以假设，从小屋到山顶至少有一条安全的路线。", "inputFormat": "第一行三个整数 $n,m,k$，分别表示地图的大小和旅行者的数量。\n\n接下来 $n$ 行包含对地图的描述，每行由一个包含 $m$ 个字符的字符串组成，字符串中只包含 $\\texttt{.}$（点）和 $\\texttt X$，表示每个区域：\n\n- $\\texttt .$ 表示这是一个安全区域。\n- $\\texttt X$ 表示这个区域有野生动物定居，是危险的。\n\n接下来 $k$ 行描述每个旅行者。每行包含两个整数 $a_i,b_i$，分别表示第 $i$ 个旅行者向更高或更低区域移动所要花费的时间。\n\n旅店位于地图的左上角，在地图的第一行第一列。山顶在地图的右下角，在地图的第 $n$ 行第 $m$ 列。你可以假设包含旅店和山顶的区域是安全的，而且这些区域之间至少有一条只由安全区域组成的路径。", "outputFormat": "输出一行两个整数，分别表示最先到达山顶的旅行者的用时和用时等于最小用时的旅行者的数量。", "hint": "#### 样例 2 解释\n\n从旅店到山顶只有一条路径，这些旅行者的用时分别是 $13,14,13,13$。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于一些子任务满足 $k=1$。\n\n对于 $100\\%$ 的数据，保证 $2\\le n,m\\le 2\\times 10^3$，$1\\le k\\le 10^6$，$1\\le a_i,b_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Wycieczka górska", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 4 [Wycieczka górska](https://sio2.mimuw.edu.pl/c/pa-2020-1/wyc/)**\n\n一群 $k$ 个旅行者朋友去了 Byte 山。在最后一天，他们决定组织一场登山比赛，从他们所住的旅店到 Byte 山顶。\n\n每个旅行者都有一张区域地图，它是一个分为 $n$ 行 $m$ 列的矩形；因此地图一共包含 $n\\cdot m$ 个区域。旅店位于地图左上角的区域，而山顶则位于地图右下角的区域。Byte 山以其非常均匀而闻名——对于地图上的任何区域，在地图上与之相邻的右面或下面的区域海拔较高，而相邻的左边或上面区域海拔较低。但是，这座山也因潜伏着许多危险地区而闻名。有些地区在地图上标明是非常危险的，因为那里有野生动物居住——所以最好不要到那里去……\n\n你是 Byte 山山脚下的一个小屋的看守人。通过观察每一个旅行者，你已经为他们每个人分配了两个参数 $a_i$ 和 $b_i$，这些参数决定了他们在山坡上的运动速度。具体来说，如果第 $i$ 个旅行者向更高的区域移动，那么他需要 $a_i$ 分钟，如果旅行者向更低的区域移动，则需要 $b_i$ 分钟。你也知道，每个旅行者都会走对他们来说从小屋到山顶最快的路线，并且路线完全在地形图上，而且避开了所有的危险区域。\n\n你想知道最快的人需要多长时间才能到达山顶，有多少人将与最快的人同时爬到山顶。你可以假设，从小屋到山顶至少有一条安全的路线。", "inputFormat": "第一行三个整数 $n,m,k$，分别表示地图的大小和旅行者的数量。\n\n接下来 $n$ 行包含对地图的描述，每行由一个包含 $m$ 个字符的字符串组成，字符串中只包含 $\\texttt{.}$（点）和 $\\texttt X$，表示每个区域：\n\n- $\\texttt .$ 表示这是一个安全区域。\n- $\\texttt X$ 表示这个区域有野生动物定居，是危险的。\n\n接下来 $k$ 行描述每个旅行者。每行包含两个整数 $a_i,b_i$，分别表示第 $i$ 个旅行者向更高或更低区域移动所要花费的时间。\n\n旅店位于地图的左上角，在地图的第一行第一列。山顶在地图的右下角，在地图的第 $n$ 行第 $m$ 列。你可以假设包含旅店和山顶的区域是安全的，而且这些区域之间至少有一条只由安全区域组成的路径。", "outputFormat": "输出一行两个整数，分别表示最先到达山顶的旅行者的用时和用时等于最小用时的旅行者的数量。", "hint": "#### 样例 2 解释\n\n从旅店到山顶只有一条路径，这些旅行者的用时分别是 $13,14,13,13$。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于一些子任务满足 $k=1$。\n\n对于 $100\\%$ 的数据，保证 $2\\le n,m\\le 2\\times 10^3$，$1\\le k\\le 10^6$，$1\\le a_i,b_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9108", "type": "P", "difficulty": 6, "samples": [["3 2 100000007", "17"], ["6 9 813443923", "57"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2020", "前缀和", "PA（波兰）"], "title": "[PA 2020] Malowanie płotu", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 4 [Malowanie płotu](https://sio2.mimuw.edu.pl/c/pa-2020-1/mal/)**\n\n今年的秋季天气已经完全破坏了 Potyczek 先生的围栏上的漆。围栏需要尽快用特殊的蓝色防水剂进行处理，以免即将到来的冬季对其造成不可弥补的破坏。Potyczek 先生请他邻居的勤劳儿子 Bytie 来做这件事。这个男孩今天早上完成了任务，但做得相当粗心，因为他急着参加下一轮 PA。\n\nPotyczek 先生的围栏由 $n$ 根木条组成，每根木条分为长度相等的 $m$ 段。Bytie 只把每根木条从上到下用防水剂涂了一遍，不幸的是，这可能还不足以把栅栏全部涂满。然而，在每根木条上涂防水剂的段都是连续的，每个段要么完全涂上，要么根本不涂。进一步看来，男孩所涂的那部分栅栏是一致的，即每两个连续的木条上所涂的段都存在一个非空的相交区间。\n\n例如，涂完的围栏可能如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2ov15dzh.png)\n\n由于以下三个原因，下图所示情况是不可能的。\n\n- 编号为 $1$ 的木条根本没涂防水剂。\n- 编号为 $3$ 的木条一致的段没有涂防水剂。\n- 编号 $5,6$ 的木条涂防水剂的部分相交区间为空。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9f315wbr.png)\n\n编写一个程序，计算 Bytie 按照上述规则可以用多少种不同的方式来涂围栏。如果有一段围栏在其中一种方式中被涂上了颜色，而在另一种方式中没有被涂上颜色，那么就称这两种方式是不同的。方法的数量可能相当多，所以只要输出它除以质数 $p$ 的余数就可以了。", "inputFormat": "输入一行三个整数 $n,m,p$。分别表示木条个数，每根木条上段的个数和质数 $p$。", "outputFormat": "输出一个整数表示 Bytie 按照上述规则给围栏涂色的方案数对 $p$ 取模后的值。", "hint": "#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\times m\\le 10^7$，$10^8\\le p\\le 10^9$，$p\\in \\mathbb{P}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Malowanie płotu", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 4 [Malowanie płotu](https://sio2.mimuw.edu.pl/c/pa-2020-1/mal/)**\n\n今年的秋季天气已经完全破坏了 Potyczek 先生的围栏上的漆。围栏需要尽快用特殊的蓝色防水剂进行处理，以免即将到来的冬季对其造成不可弥补的破坏。Potyczek 先生请他邻居的勤劳儿子 Bytie 来做这件事。这个男孩今天早上完成了任务，但做得相当粗心，因为他急着参加下一轮 PA。\n\nPotyczek 先生的围栏由 $n$ 根木条组成，每根木条分为长度相等的 $m$ 段。Bytie 只把每根木条从上到下用防水剂涂了一遍，不幸的是，这可能还不足以把栅栏全部涂满。然而，在每根木条上涂防水剂的段都是连续的，每个段要么完全涂上，要么根本不涂。进一步看来，男孩所涂的那部分栅栏是一致的，即每两个连续的木条上所涂的段都存在一个非空的相交区间。\n\n例如，涂完的围栏可能如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2ov15dzh.png)\n\n由于以下三个原因，下图所示情况是不可能的。\n\n- 编号为 $1$ 的木条根本没涂防水剂。\n- 编号为 $3$ 的木条一致的段没有涂防水剂。\n- 编号 $5,6$ 的木条涂防水剂的部分相交区间为空。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9f315wbr.png)\n\n编写一个程序，计算 Bytie 按照上述规则可以用多少种不同的方式来涂围栏。如果有一段围栏在其中一种方式中被涂上了颜色，而在另一种方式中没有被涂上颜色，那么就称这两种方式是不同的。方法的数量可能相当多，所以只要输出它除以质数 $p$ 的余数就可以了。", "inputFormat": "输入一行三个整数 $n,m,p$。分别表示木条个数，每根木条上段的个数和质数 $p$。", "outputFormat": "输出一个整数表示 Bytie 按照上述规则给围栏涂色的方案数对 $p$ 取模后的值。", "hint": "#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\times m\\le 10^7$，$10^8\\le p\\le 10^9$，$p\\in \\mathbb{P}$。", "locale": "zh-CN"}}}
{"pid": "P9109", "type": "P", "difficulty": 7, "samples": [["5 6 7\nabaab\nbabbaa\n1 5 1 6\n1 3 2 4\n2 5 2 5\n1 4 2 5\n2 5 3 6\n2 2 5 6\n3 4 2 2", "4\n2\n2\n3\n3\n0\n1"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "PA（波兰）"], "title": "[PA 2020] Tekstówka", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 4 [Tekstówka](https://sio2.mimuw.edu.pl/c/pa-2020-1/tek/)**\n\n在去年我们在某社交网络的粉丝页上进行的 PA 中，参与者大声地问我们：「题呢？」。今年，我们决定满足您的期望。\n\n给出了由英文小写字母组成的字符串 $s$ 和 $t$。令 $s_{i,j}\\ (1\\le i\\le j\\le |s|)$ 表示由 $s$ 的第 $i$ 个到第 $j$ 个（包含两端）字符依次组成的子串。我们也同样定义 $t_{i,j}$。\n\n你的任务是处理 $q$ 次查询。每次查询用四个整数 $i,j,k,l$ 表示，这里 $1\\le i\\le j\\le |s|,1\\le k\\le l\\le |t|$。对于每次查询，你需要输出子串 $s_{i,j}$ 和子串 $t_{k,l}$ 的最长公共子序列。\n\n注：一个字符串的子序列是指一个字符串通过删除一些（可能不删除）字符且不改变剩余字符顺序得到的串。例如，$\\texttt{potyczki}$ 的子串可以是 $\\texttt{tyki}$ 或 $\\texttt{pi}$，但不能是 $\\texttt{koty}$。\n\n我们称字符串 $a$ 和 $b$ 的公共子序列为既是 $a$ 的子序列，又是 $b$ 的子序列的子序列。\n\n我们称字符串 $a$ 和 $b$ 的最长公共子序列为 $a$ 和 $b$ 的子序列中最长的一个。", "inputFormat": "输入第一行包含三个整数 $n,m,q$，分别表示 $s$ 串和 $t$ 串的长度与询问次数。\n\n第二行包含一个由小写英文字母组成且长为 $n$ 的字符串 $s$。\n\n第三行包含一个由小写英文字母组成且长为 $m$ 的字符串 $t$。\n\n接下来 $q$ 行，每行四个整数 $i,j,k,l$，意义如题目描述。", "outputFormat": "输出 $q$ 行，每行一个整数，表示对询问的回答。", "hint": "#### 数据范围\n\n**本题采用捆绑测试**\n\n- 对于一些子任务，满足 $n,m,q\\le 600$；\n- 对于一些其他的子任务，满足 $n,m\\le 600$；\n- 对于一些其他的子任务，满足 $q\\le 5\\times 10^3$。\n\n对于上述情况，至少有一个子任务满足。\n\n对于 $100\\%$ 的数据，保证 $1\\le n,m\\le 3\\times 10^3$，$1\\le q\\le 10^5$，$1\\le i\\le j\\le n$，$1\\le k\\le l\\le m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Tekstówka", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 4 [Tekstówka](https://sio2.mimuw.edu.pl/c/pa-2020-1/tek/)**\n\n在去年我们在某社交网络的粉丝页上进行的 PA 中，参与者大声地问我们：「题呢？」。今年，我们决定满足您的期望。\n\n给出了由英文小写字母组成的字符串 $s$ 和 $t$。令 $s_{i,j}\\ (1\\le i\\le j\\le |s|)$ 表示由 $s$ 的第 $i$ 个到第 $j$ 个（包含两端）字符依次组成的子串。我们也同样定义 $t_{i,j}$。\n\n你的任务是处理 $q$ 次查询。每次查询用四个整数 $i,j,k,l$ 表示，这里 $1\\le i\\le j\\le |s|,1\\le k\\le l\\le |t|$。对于每次查询，你需要输出子串 $s_{i,j}$ 和子串 $t_{k,l}$ 的最长公共子序列。\n\n注：一个字符串的子序列是指一个字符串通过删除一些（可能不删除）字符且不改变剩余字符顺序得到的串。例如，$\\texttt{potyczki}$ 的子串可以是 $\\texttt{tyki}$ 或 $\\texttt{pi}$，但不能是 $\\texttt{koty}$。\n\n我们称字符串 $a$ 和 $b$ 的公共子序列为既是 $a$ 的子序列，又是 $b$ 的子序列的子序列。\n\n我们称字符串 $a$ 和 $b$ 的最长公共子序列为 $a$ 和 $b$ 的子序列中最长的一个。", "inputFormat": "输入第一行包含三个整数 $n,m,q$，分别表示 $s$ 串和 $t$ 串的长度与询问次数。\n\n第二行包含一个由小写英文字母组成且长为 $n$ 的字符串 $s$。\n\n第三行包含一个由小写英文字母组成且长为 $m$ 的字符串 $t$。\n\n接下来 $q$ 行，每行四个整数 $i,j,k,l$，意义如题目描述。", "outputFormat": "输出 $q$ 行，每行一个整数，表示对询问的回答。", "hint": "#### 数据范围\n\n**本题采用捆绑测试**\n\n- 对于一些子任务，满足 $n,m,q\\le 600$；\n- 对于一些其他的子任务，满足 $n,m\\le 600$；\n- 对于一些其他的子任务，满足 $q\\le 5\\times 10^3$。\n\n对于上述情况，至少有一个子任务满足。\n\n对于 $100\\%$ 的数据，保证 $1\\le n,m\\le 3\\times 10^3$，$1\\le q\\le 10^5$，$1\\le i\\le j\\le n$，$1\\le k\\le l\\le m$。", "locale": "zh-CN"}}}
{"pid": "P9110", "type": "P", "difficulty": 2, "samples": [["4\n1 5 2\n2 3 0\n2 3 6\n1 7 4", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "PA（波兰）"], "title": "[PA 2020] Samochody dostawcze", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 3 [Samochody dostawcze](https://sio2.mimuw.edu.pl/c/pa-2020-1/sam/)**\n\nByteasar 是一家向商店运送物资的公司的后勤人员。在他公司所在的城市里，道路网由横向的街（从西到东）和纵向的道（从南到北）组成。每一对相邻的街和相邻的道都相距一公里。我们把街按从南到北的顺序编号，把道按从西到东的顺序编号。我们将第 $i$ 条道和第 $j$ 条街的交叉点记为 $(i,j)$。你可以假设，对于任何一个整数，都存在一条街的编号为 $j$ 和一条道的编号为 $i$。\n\nByteasar 明天安排了 $n$ 次送货；第 $i$ 次送货将由一辆货车在时刻 $t_i$ 离开车库，以每时间单位一公里的恒定速度沿街或道行驶。每次送货可以是两种类型中的一种：对于送货类型一，车库在路口 $(w_i,0)$，货车沿道 $w_i$ 向北行驶；对于送货类型二，车库在路口 $(0,w_i)$，货车沿街 $w_i$ 向东行驶。根据计划，每个车库在任何时刻最多只有一辆车离开。\n\n货车不必停下来——驶过收货地点时，司机只需放下要送的包裹。然而，有一个问题，如果两辆货车发现他们同一时刻在同一个十字路口，就很可能会发生碰撞。Byteasar 非常希望避免这种情况。不幸的是，他唯一能做的就是取消一些送货计划。因此，他希望取消尽可能少的送货计划，以便剩下的车中没有任何两辆车同一时刻在同一个十字路口。", "inputFormat": "第一行一个整数 $n$，表示送货计划个数。\n\n接下来 $n$ 行，每行三个整数 $r_i,w_i,t_i$，分别表示类型，车库位置和出发时间。", "outputFormat": "输出一个整数，表示最少取消的送货计划数。", "hint": "#### 样例 1 解释\n\n如果四份货物都送出，则第一和第二辆车会在时刻 $5$，在路口 $(5,3)$ 相撞。如果取消第一个送货计划，则第二和第四辆车会在时刻 $7$，在路口 $(7,3)$ 相撞。如果取消第二个送货计划，那么所有车都不会相撞了。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 5\\times 10^5$，$r_i\\in \\{1,2\\}$，$1\\le w_i\\le 10^6$，$0\\le t_i\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2020] Samochody dostawcze", "background": "", "description": "**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 3 [Samochody dostawcze](https://sio2.mimuw.edu.pl/c/pa-2020-1/sam/)**\n\nByteasar 是一家向商店运送物资的公司的后勤人员。在他公司所在的城市里，道路网由横向的街（从西到东）和纵向的道（从南到北）组成。每一对相邻的街和相邻的道都相距一公里。我们把街按从南到北的顺序编号，把道按从西到东的顺序编号。我们将第 $i$ 条道和第 $j$ 条街的交叉点记为 $(i,j)$。你可以假设，对于任何一个整数，都存在一条街的编号为 $j$ 和一条道的编号为 $i$。\n\nByteasar 明天安排了 $n$ 次送货；第 $i$ 次送货将由一辆货车在时刻 $t_i$ 离开车库，以每时间单位一公里的恒定速度沿街或道行驶。每次送货可以是两种类型中的一种：对于送货类型一，车库在路口 $(w_i,0)$，货车沿道 $w_i$ 向北行驶；对于送货类型二，车库在路口 $(0,w_i)$，货车沿街 $w_i$ 向东行驶。根据计划，每个车库在任何时刻最多只有一辆车离开。\n\n货车不必停下来——驶过收货地点时，司机只需放下要送的包裹。然而，有一个问题，如果两辆货车发现他们同一时刻在同一个十字路口，就很可能会发生碰撞。Byteasar 非常希望避免这种情况。不幸的是，他唯一能做的就是取消一些送货计划。因此，他希望取消尽可能少的送货计划，以便剩下的车中没有任何两辆车同一时刻在同一个十字路口。", "inputFormat": "第一行一个整数 $n$，表示送货计划个数。\n\n接下来 $n$ 行，每行三个整数 $r_i,w_i,t_i$，分别表示类型，车库位置和出发时间。", "outputFormat": "输出一个整数，表示最少取消的送货计划数。", "hint": "#### 样例 1 解释\n\n如果四份货物都送出，则第一和第二辆车会在时刻 $5$，在路口 $(5,3)$ 相撞。如果取消第一个送货计划，则第二和第四辆车会在时刻 $7$，在路口 $(7,3)$ 相撞。如果取消第二个送货计划，那么所有车都不会相撞了。\n\n------------\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 5\\times 10^5$，$r_i\\in \\{1,2\\}$，$1\\le w_i\\le 10^6$，$0\\le t_i\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9111", "type": "P", "difficulty": 6, "samples": [["4\n1 10 3 5\n1 2 3\n", "52\n"], ["4\n1 -2 5 5\n1 2 2\n", "27\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2019", "福建", "O2优化", "背包 DP", "树形 DP"], "title": "[福建省队集训2019] 最大权独立集问题", "background": "", "description": "E.Space 喜欢出最大权独立集问题。\n\n接下来，他还想出 $n$ 道最大权独立集问题。\n\nE.Space 有 $n$ 个 AI，编号为 $1\\sim n$。\n\n开始第 $i$ 个 AI 里面存有一道 E.Space 事先出好的一道难度为 $d_i$ 的最大权独立集问题。\n\n有些 AI 之间可以互相通信，对于所有的 $2 \\le i \\le n$，第 $i$ 个 AI 可以和第 $c_i$ 个 AI 互相通信。此外，其他对 AI 不可以互相通信。\n\nE.Space 每次可以选择一个存有一道最大权独立集问题的 AI，把存在里面的题出出来，然后清除存在这个 AI 里的题。\n\n在 E.Space 出题之后清除题目之前，AI 会把这道题发给能和它通信的所有 AI。\n\n如果一个收到这道题的 AI 中已经存有一道最大权独立集问题，那么这个 AI 会把这个收到的题和原本存有的题结合起来，变成一道新的最大权独立集问题存起来。形式化地，如果这个 AI 原来存了一道难度为 $x$ 的最大权独立集问题，接着收到了一道难度为 $y$ 的最大权独立集问题，那么结合之后是一道难度为 $x+y$ 的最大权独立集问题。\n\n如果一个收到题的 AI 中未存有题，那么这个 AI 会销毁收到的这个信息。\n\n由于出题人的丧病心理，E.Space 想要出出来的 $n$ 道最大权独立集问题的难度之和尽量大。\n\n他想叫你帮他解决这个问题，还说如果你成功在这场训练中解决了这个问题，那么在出那 $n$ 道最大权独立集问题的时候，他会在训练结束前 10 分钟切换至你的账号然后提交一份标程代码。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个表示 $d_i$。\n\n第三行 $n-1$ 个整数，第 $i$ 个表示 $c_{i+1}$。", "outputFormat": "一行一个整数，表示最大的难度之和。", "hint": "### 【样例解释 1】\n\n一种最优的出题方案如下：\n\n1. 出第 $2$ 个 AI 中的最大权独立集问题，此时该题难度为 $10$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $11,*,13,5$ ($*$ 表示该 AI 中没有最大权独立集问题，下同)。\n\n2. 出第 $3$ 个 AI 中的最大权独立集问题，此时该题难度为 $13$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $11,*,*,18$。\n\n3. 出第 $1$ 个 AI 中的最大权独立集问题，此时该题难度为 $11$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $*,*,*,18$。\n\n4. 出第 $4$ 个 AI 中的最大权独立集问题，此时该题难度为 $18$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $*,*,*,*$。\n\n所以 $4$ 道题的难度之和为 $10+13+11+18=52$。\n\n### 【样例解释 2】\n\n一种最优的出题方案如下：\n\n1. 出第 $3$ 个 AI 中的最大权独立集问题，此时该题难度为 $5$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $1,3,*,5$。\n\n2. 出第 $4$ 个 AI 中的最大权独立集问题，此时该题难度为 $5$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $1,8,*,*$。\n\n3. 出第 $2$ 个 AI 中的最大权独立集问题，此时该题难度为 $8$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $9,*,*,*$。\n\n4. 出第 $1$ 个 AI 中的最大权独立集问题，此时该题难度为 $9$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $*,*,*,*$。\n\n所以 $4$ 道题的难度之和为 $5+5+8+9=27$。\n\n### 【数据范围】\n\n保证 $\\left|d_i\\right| \\le 10^9$，$1 \\le c_i \\lt i$，$1\\le n \\le 400$。\n\n**本题采用捆绑测试。**\n\n对于编号为奇数的子任务，保证 $d_i \\ge 0$。\n\n子任务 $1,2$（$11 \\times 2 = 22$ 分）：\n$n \\le 9$。\n\n子任务 $3,4$（$10 \\times 2 = 20$ 分）：\n$n \\le 19$。\n\n子任务 $5,6$（$7 \\times 2 = 14$ 分）：\n$n \\le 50$，$c_i = i-1$。\n\n子任务 $7,8$（$10 \\times 2 = 20$ 分）：\n$c_i=i-1$。\n\n子任务 $9,10$（$5 \\times 2 = 10$ 分）：\n$n \\le 50$。\n\n子任务 $11,12$（$7 \\times 2 = 14$ 分）：\n无特殊限制。\n\n### 后记\n\n听说 E.Space 的最大权独立集问题的难度是取了对数的？\n\n听说 E.Space 要把这 $n$ 道题结合成一道题出出来？\n\n听说 E.Space 不会把这些题出在训练里面？\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[福建省队集训2019] 最大权独立集问题", "background": "", "description": "E.Space 喜欢出最大权独立集问题。\n\n接下来，他还想出 $n$ 道最大权独立集问题。\n\nE.Space 有 $n$ 个 AI，编号为 $1\\sim n$。\n\n开始第 $i$ 个 AI 里面存有一道 E.Space 事先出好的一道难度为 $d_i$ 的最大权独立集问题。\n\n有些 AI 之间可以互相通信，对于所有的 $2 \\le i \\le n$，第 $i$ 个 AI 可以和第 $c_i$ 个 AI 互相通信。此外，其他对 AI 不可以互相通信。\n\nE.Space 每次可以选择一个存有一道最大权独立集问题的 AI，把存在里面的题出出来，然后清除存在这个 AI 里的题。\n\n在 E.Space 出题之后清除题目之前，AI 会把这道题发给能和它通信的所有 AI。\n\n如果一个收到这道题的 AI 中已经存有一道最大权独立集问题，那么这个 AI 会把这个收到的题和原本存有的题结合起来，变成一道新的最大权独立集问题存起来。形式化地，如果这个 AI 原来存了一道难度为 $x$ 的最大权独立集问题，接着收到了一道难度为 $y$ 的最大权独立集问题，那么结合之后是一道难度为 $x+y$ 的最大权独立集问题。\n\n如果一个收到题的 AI 中未存有题，那么这个 AI 会销毁收到的这个信息。\n\n由于出题人的丧病心理，E.Space 想要出出来的 $n$ 道最大权独立集问题的难度之和尽量大。\n\n他想叫你帮他解决这个问题，还说如果你成功在这场训练中解决了这个问题，那么在出那 $n$ 道最大权独立集问题的时候，他会在训练结束前 10 分钟切换至你的账号然后提交一份标程代码。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个表示 $d_i$。\n\n第三行 $n-1$ 个整数，第 $i$ 个表示 $c_{i+1}$。", "outputFormat": "一行一个整数，表示最大的难度之和。", "hint": "### 【样例解释 1】\n\n一种最优的出题方案如下：\n\n1. 出第 $2$ 个 AI 中的最大权独立集问题，此时该题难度为 $10$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $11,*,13,5$ ($*$ 表示该 AI 中没有最大权独立集问题，下同)。\n\n2. 出第 $3$ 个 AI 中的最大权独立集问题，此时该题难度为 $13$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $11,*,*,18$。\n\n3. 出第 $1$ 个 AI 中的最大权独立集问题，此时该题难度为 $11$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $*,*,*,18$。\n\n4. 出第 $4$ 个 AI 中的最大权独立集问题，此时该题难度为 $18$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $*,*,*,*$。\n\n所以 $4$ 道题的难度之和为 $10+13+11+18=52$。\n\n### 【样例解释 2】\n\n一种最优的出题方案如下：\n\n1. 出第 $3$ 个 AI 中的最大权独立集问题，此时该题难度为 $5$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $1,3,*,5$。\n\n2. 出第 $4$ 个 AI 中的最大权独立集问题，此时该题难度为 $5$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $1,8,*,*$。\n\n3. 出第 $2$ 个 AI 中的最大权独立集问题，此时该题难度为 $8$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $9,*,*,*$。\n\n4. 出第 $1$ 个 AI 中的最大权独立集问题，此时该题难度为 $9$，出题后 $4$ 个 AI 中的最大权独立集问题的难度分别为 $*,*,*,*$。\n\n所以 $4$ 道题的难度之和为 $5+5+8+9=27$。\n\n### 【数据范围】\n\n保证 $\\left|d_i\\right| \\le 10^9$，$1 \\le c_i \\lt i$，$1\\le n \\le 400$。\n\n**本题采用捆绑测试。**\n\n对于编号为奇数的子任务，保证 $d_i \\ge 0$。\n\n子任务 $1,2$（$11 \\times 2 = 22$ 分）：\n$n \\le 9$。\n\n子任务 $3,4$（$10 \\times 2 = 20$ 分）：\n$n \\le 19$。\n\n子任务 $5,6$（$7 \\times 2 = 14$ 分）：\n$n \\le 50$，$c_i = i-1$。\n\n子任务 $7,8$（$10 \\times 2 = 20$ 分）：\n$c_i=i-1$。\n\n子任务 $9,10$（$5 \\times 2 = 10$ 分）：\n$n \\le 50$。\n\n子任务 $11,12$（$7 \\times 2 = 14$ 分）：\n无特殊限制。\n\n### 后记\n\n听说 E.Space 的最大权独立集问题的难度是取了对数的？\n\n听说 E.Space 要把这 $n$ 道题结合成一道题出出来？\n\n听说 E.Space 不会把这些题出在训练里面？\n\n", "locale": "zh-CN"}}}
{"pid": "P9112", "type": "P", "difficulty": 7, "samples": [["4 8\n7\n4\n2\n6\n5\n8\n1\n3\n", "3\n"], ["4 9\n2\n1\n5\n8\n3\n4\n7\n6\n", "2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2009", "IOI", "O2优化"], "title": "[IOI 2009] Archery", "background": "IOI2009 D1T1", "description": "一场箭术比赛正在举行。一条直线上排着 $N$ 个靶子，靶子从左到右依次标号为从 $1$ 到 $N$。有 $2N$ 个选手，在比赛的任何时刻，同一个靶位上都有两个选手。比赛的每一轮按照如下规则进行：\n\n- 在同一个靶位的两位选手比赛一场决出胜者，然后所有选手按照如下规则移动：\n\n  - 在 $2$ 到 $N$ 号靶位上的胜者移动到他们的左侧的靶位（即分别移动到 $1\\sim N - 1$ 号靶位）。\n  - 在 $2$ 到 $N$ 号靶位上的负者，以及 $1$ 号靶位上的胜者，停留在同一个靶位。\n  - $1$ 号靶位上的负者移动到 $N$ 号靶位。\n\n比赛一共持续 $R$ 轮，轮数至少为参赛选手的数量，即 $R\\geq 2N$。\n\n你是唯一一个准时到达的选手。其它 $2N - 1$ 个选手已经提前到达并站成了一排，你现在要做的就是插入这个队伍。在你进入队伍后，队列中前两个选手（最左侧的两个选手）将对应一号靶位，接下来两个选手将对应二号靶位，以此类推，最右侧的两个选手对应 $N$ 号靶位。\n\n所有 $2N$ 个选手（包括你）都用一个数值衡量技术水平，没有两个选手的技术水平相同。在同一个靶位上，数值较小的选手会成为胜者。\n\n在了解了所有选手的技术水平之后，你需要找到一个位置插入使得你最终对应的靶位序号尽量小，在此前提下，你希望你初始时对应的靶位序号尽量大。\n\n**任务**：编写一个程序，给定所有选手的技术水平（包括你自己）和你的对手们的排列顺序，计算出你的初始靶位编号，以满足你的上述目标。", "inputFormat": "第一行包含两个由空格隔开的整数 $N, R$，分别表示靶位数和比赛轮数。\n\n接下来 $2N$ 行给出选手的排列 $S_1, S_2, \\cdots,  S_{2N}$。$S_1$ 表示你的排名，$S_2, S_3, \\cdots, S_{2N}$ 表示其他选手的排名，依照他们已经排列好的顺序（由左至右）。$S_k$ 是 $1\\sim 2N$ 的整数，排名 $1$ 表示最好，排名 $2N$ 表示最差。没有两位选手的排名相同。", "outputFormat": "输出一个 $1\\sim N$ 的整数，表示开始的箭靶编号。", "hint": "### 样例解释\n\n- 样例 1：你是排名倒数第二的选手。如果你从靶 $1$ 开始比赛，接下来你将移动到靶 $4$ 而且一直留在靶 $4$ 直到最后。如果你从靶 $2$ 或靶 $4$ 开始，你将会一直留到最后。如果你从靶 $3$ 开始，你将会击败最差的选手，然后移到靶 $2$ 并留在那里。\n\n- 样例 2：你是排名第二的选手。排名第一的选手在靶 $1$ 并一直留在那里。因此，无论你从哪里出发，你永远会按 $4\\to 3\\to 2\\to 1\\to 4$ 的顺序循环移动。为了最终留在靶 $1$，你应该从靶 $2$ 开始。\n\n### 数据范围与约定\n\n- 对于 $20\\%$ 的数据，$N\\leq 200$。\n- 对于 $60\\%$ 的数据，$N\\leq 5000$。\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq 2\\times 10 ^ 5$，$2N\\leq R\\leq 10 ^ 9$，$1\\leq S_k\\leq 2N$ 且 $S_k$ 互不相同。\n\n另有三组 @[asmend](https://www.luogu.com.cn/user/21658) 提供的 hack 数据，不计分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2009] Archery", "background": "IOI2009 D1T1", "description": "一场箭术比赛正在举行。一条直线上排着 $N$ 个靶子，靶子从左到右依次标号为从 $1$ 到 $N$。有 $2N$ 个选手，在比赛的任何时刻，同一个靶位上都有两个选手。比赛的每一轮按照如下规则进行：\n\n- 在同一个靶位的两位选手比赛一场决出胜者，然后所有选手按照如下规则移动：\n\n  - 在 $2$ 到 $N$ 号靶位上的胜者移动到他们的左侧的靶位（即分别移动到 $1\\sim N - 1$ 号靶位）。\n  - 在 $2$ 到 $N$ 号靶位上的负者，以及 $1$ 号靶位上的胜者，停留在同一个靶位。\n  - $1$ 号靶位上的负者移动到 $N$ 号靶位。\n\n比赛一共持续 $R$ 轮，轮数至少为参赛选手的数量，即 $R\\geq 2N$。\n\n你是唯一一个准时到达的选手。其它 $2N - 1$ 个选手已经提前到达并站成了一排，你现在要做的就是插入这个队伍。在你进入队伍后，队列中前两个选手（最左侧的两个选手）将对应一号靶位，接下来两个选手将对应二号靶位，以此类推，最右侧的两个选手对应 $N$ 号靶位。\n\n所有 $2N$ 个选手（包括你）都用一个数值衡量技术水平，没有两个选手的技术水平相同。在同一个靶位上，数值较小的选手会成为胜者。\n\n在了解了所有选手的技术水平之后，你需要找到一个位置插入使得你最终对应的靶位序号尽量小，在此前提下，你希望你初始时对应的靶位序号尽量大。\n\n**任务**：编写一个程序，给定所有选手的技术水平（包括你自己）和你的对手们的排列顺序，计算出你的初始靶位编号，以满足你的上述目标。", "inputFormat": "第一行包含两个由空格隔开的整数 $N, R$，分别表示靶位数和比赛轮数。\n\n接下来 $2N$ 行给出选手的排列 $S_1, S_2, \\cdots,  S_{2N}$。$S_1$ 表示你的排名，$S_2, S_3, \\cdots, S_{2N}$ 表示其他选手的排名，依照他们已经排列好的顺序（由左至右）。$S_k$ 是 $1\\sim 2N$ 的整数，排名 $1$ 表示最好，排名 $2N$ 表示最差。没有两位选手的排名相同。", "outputFormat": "输出一个 $1\\sim N$ 的整数，表示开始的箭靶编号。", "hint": "### 样例解释\n\n- 样例 1：你是排名倒数第二的选手。如果你从靶 $1$ 开始比赛，接下来你将移动到靶 $4$ 而且一直留在靶 $4$ 直到最后。如果你从靶 $2$ 或靶 $4$ 开始，你将会一直留到最后。如果你从靶 $3$ 开始，你将会击败最差的选手，然后移到靶 $2$ 并留在那里。\n\n- 样例 2：你是排名第二的选手。排名第一的选手在靶 $1$ 并一直留在那里。因此，无论你从哪里出发，你永远会按 $4\\to 3\\to 2\\to 1\\to 4$ 的顺序循环移动。为了最终留在靶 $1$，你应该从靶 $2$ 开始。\n\n### 数据范围与约定\n\n- 对于 $20\\%$ 的数据，$N\\leq 200$。\n- 对于 $60\\%$ 的数据，$N\\leq 5000$。\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq 2\\times 10 ^ 5$，$2N\\leq R\\leq 10 ^ 9$，$1\\leq S_k\\leq 2N$ 且 $S_k$ 互不相同。\n\n另有三组 @[asmend](https://www.luogu.com.cn/user/21658) 提供的 hack 数据，不计分。", "locale": "zh-CN"}}}
