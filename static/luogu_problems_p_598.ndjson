{"pid": "P13135", "type": "P", "difficulty": 5, "samples": [["2\n1.000000\n1.414213", "Case #1:\n0.5 0 0\n0 0.5 0\n0 0 0.5\nCase #2:\n0.3535533905932738 0.3535533905932738 0\n-0.3535533905932738 0.3535533905932738 0\n0 0 0.5"]], "limits": {"time": [30000, 30000], "memory": [1048576, 1048576]}, "tags": ["数学", "计算几何", "2018", "Special Judge", "凸包", "Google Code Jam"], "title": "[GCJ 2018 Qualification] Cubic UFO", "background": "", "description": "A mysterious cubic alien ship has appeared in the sky over Toronto! In this problem, Toronto is a plane in three-dimensional space that is parallel to the xz plane at $y = -3$ km. The alien ship is a solid cube with side length 1 km, centered at $(0 \\text{ km}, 0 \\text{ km}, 0 \\text{ km})$, with its eight corners at $(\\pm 0.5 \\text{ km}, \\pm 0.5 \\text{ km}, \\pm 0.5 \\text{ km})$. The ship is casting an ominous shadow onto the plane; formally, the shadow is the orthogonal projection of the cube onto the plane. (We consider the sun to be a point infinitely far above the Toronto plane along the y-axis.)\n\nThe military is willing to tolerate the ship as long as the aliens meet their bureaucratic demand: the shadow must cover an area of the plane that is acceptably close to $\\mathbf A \\text{ km}^2$ (see the Output section for a precise definition). They have hired you, a geometric linguistics expert, to convey this demand to the aliens. In your communications so far, you have learned that the ship cannot change size, and the center of the ship cannot move, but the ship is able to rotate arbitrarily in place.\n\nPlease find a way that the aliens can rotate the ship so that the shadow's area is close to $\\mathbf A$. Express your rotation using three points: the centers of any three non-pairwise-opposing faces.", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow; each consists of one line with a rational $\\mathbf{A}$, the desired area of the shadow, in $\\mathrm{km}^{2}$, with exactly six digits after the decimal point.\n\nIt is guaranteed that there is always a way to rotate the ship in the desired manner for the values of $\\mathbf{A}$ allowed in this problem.", "outputFormat": "For each test case, first output one line containing `Case #x:`, where $x$ is the test case number (starting from 1). Then, output three more lines with three rational values each: the $x, y$, and $z$ coordinates of one of your three provided face-centers, as described above. You are welcome to use decimal (e.g., 0.000123456) or scientific notation (e.g., 1.23456e-4).\n\nYour answer will be considered correct if and only if all of the following are true:\n\n1. The distance (in $\\mathrm{km}$ ) from each point to the origin must be between $0.5-10^{-6}$ and $0.5+10^{-6}$, inclusive.\n2. The angles (in radians) between segments connecting the origin to each point must be between $\\pi / 2-10^{-6}$ and $\\pi / 2+10^{-6}$, inclusive.\n3. The area of the shadow (in $\\mathrm{km}^{2}$ ), computed by projecting all 8 vertices onto the $y=-3$ plane and finding the area of the convex hull of those projected points, must be between $\\mathbf{A}-10^{-6}$ and $\\mathbf{A}+$ $10^{-6}$, inclusive. We will compute the vertices as $+/-\\mathbf{p}_{1}+/-\\mathbf{p}_{2}+/-\\mathbf{p}_{3}$ (that is, for each $\\mathbf{p}_{i}$ we add either $\\mathbf{p}_{i}$ or $-\\mathbf{p}_{i}$ to the total using vector addition), where $\\mathbf{p}_{1}, \\mathbf{p}_{2}$, and $\\mathbf{p}_{3}$ are the face-centers that you provide.\n\nPlease note that you might need to output more than 6 digits after the decimal point to safely pass the checks mentioned above. If there are multiple acceptable answers, you may output any one of them.", "hint": "In Sample Case #1, there is no need to rotate the cube at all; with two of its faces already parallel to the plane, the cube is already casting a shadow that is a square with side length $1$.\n\nIn Sample Case #2, one possible solution is to tell the aliens to give the cube a $45$ degree turn around the $x = y = 0$ line, creating a shadow that is a rectangle with dimensions of $1$ and $\\sqrt 2$.\n\nThe following rough image shows the cubes and shadows for Sample Cases #1 and #2. The sun is shown for clarity, but remember that it is actually a point infinitely far away along the y-axis.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ylvi5a65.png)\n\n**Limits**\n\n- $1 \\leqslant \\mathrm{T} \\leqslant 100$.\n\n**Test set 1 (Visible)**\n\n- $1.000000 \\leqslant \\mathrm{A} \\leqslant 1.414213$\n\n**Test set 2 (Hidden)**\n\n- $1.000000 \\leqslant \\mathrm{A} \\leqslant 1.732050$", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 Qualification] Cubic UFO", "background": "", "description": "A mysterious cubic alien ship has appeared in the sky over Toronto! In this problem, Toronto is a plane in three-dimensional space that is parallel to the xz plane at $y = -3$ km. The alien ship is a solid cube with side length 1 km, centered at $(0 \\text{ km}, 0 \\text{ km}, 0 \\text{ km})$, with its eight corners at $(\\pm 0.5 \\text{ km}, \\pm 0.5 \\text{ km}, \\pm 0.5 \\text{ km})$. The ship is casting an ominous shadow onto the plane; formally, the shadow is the orthogonal projection of the cube onto the plane. (We consider the sun to be a point infinitely far above the Toronto plane along the y-axis.)\n\nThe military is willing to tolerate the ship as long as the aliens meet their bureaucratic demand: the shadow must cover an area of the plane that is acceptably close to $\\mathbf A \\text{ km}^2$ (see the Output section for a precise definition). They have hired you, a geometric linguistics expert, to convey this demand to the aliens. In your communications so far, you have learned that the ship cannot change size, and the center of the ship cannot move, but the ship is able to rotate arbitrarily in place.\n\nPlease find a way that the aliens can rotate the ship so that the shadow's area is close to $\\mathbf A$. Express your rotation using three points: the centers of any three non-pairwise-opposing faces.", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow; each consists of one line with a rational $\\mathbf{A}$, the desired area of the shadow, in $\\mathrm{km}^{2}$, with exactly six digits after the decimal point.\n\nIt is guaranteed that there is always a way to rotate the ship in the desired manner for the values of $\\mathbf{A}$ allowed in this problem.", "outputFormat": "For each test case, first output one line containing `Case #x:`, where $x$ is the test case number (starting from 1). Then, output three more lines with three rational values each: the $x, y$, and $z$ coordinates of one of your three provided face-centers, as described above. You are welcome to use decimal (e.g., 0.000123456) or scientific notation (e.g., 1.23456e-4).\n\nYour answer will be considered correct if and only if all of the following are true:\n\n1. The distance (in $\\mathrm{km}$ ) from each point to the origin must be between $0.5-10^{-6}$ and $0.5+10^{-6}$, inclusive.\n2. The angles (in radians) between segments connecting the origin to each point must be between $\\pi / 2-10^{-6}$ and $\\pi / 2+10^{-6}$, inclusive.\n3. The area of the shadow (in $\\mathrm{km}^{2}$ ), computed by projecting all 8 vertices onto the $y=-3$ plane and finding the area of the convex hull of those projected points, must be between $\\mathbf{A}-10^{-6}$ and $\\mathbf{A}+$ $10^{-6}$, inclusive. We will compute the vertices as $+/-\\mathbf{p}_{1}+/-\\mathbf{p}_{2}+/-\\mathbf{p}_{3}$ (that is, for each $\\mathbf{p}_{i}$ we add either $\\mathbf{p}_{i}$ or $-\\mathbf{p}_{i}$ to the total using vector addition), where $\\mathbf{p}_{1}, \\mathbf{p}_{2}$, and $\\mathbf{p}_{3}$ are the face-centers that you provide.\n\nPlease note that you might need to output more than 6 digits after the decimal point to safely pass the checks mentioned above. If there are multiple acceptable answers, you may output any one of them.", "hint": "In Sample Case #1, there is no need to rotate the cube at all; with two of its faces already parallel to the plane, the cube is already casting a shadow that is a square with side length $1$.\n\nIn Sample Case #2, one possible solution is to tell the aliens to give the cube a $45$ degree turn around the $x = y = 0$ line, creating a shadow that is a rectangle with dimensions of $1$ and $\\sqrt 2$.\n\nThe following rough image shows the cubes and shadows for Sample Cases #1 and #2. The sun is shown for clarity, but remember that it is actually a point infinitely far away along the y-axis.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ylvi5a65.png)\n\n**Limits**\n\n- $1 \\leqslant \\mathrm{T} \\leqslant 100$.\n\n**Test set 1 (Visible)**\n\n- $1.000000 \\leqslant \\mathrm{A} \\leqslant 1.414213$\n\n**Test set 2 (Hidden)**\n\n- $1.000000 \\leqslant \\mathrm{A} \\leqslant 1.732050$", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 Qualification] Cubic UFO", "background": null, "description": "一艘神秘的立方体外星飞船出现在多伦多上空！在本题中，多伦多被视为三维空间中一条平行于 $xz$ 平面的平面，位于 $y = -3$ 千米处。外星飞船是一个边长为 $1$ 千米的实心立方体，中心在 $(0\\,\\text{km}, 0\\,\\text{km}, 0\\,\\text{km})$，其八个顶点分别为 $(\\pm 0.5\\,\\text{km}, \\pm 0.5\\,\\text{km}, \\pm 0.5\\,\\text{km})$。飞船在该平面上投下了一个不祥的影子；形式上，这个影子是立方体在该平面上的正交投影（我们认为太阳是一个位于 $y$ 轴正方向无限远处的点光源）。\n\n军方表示，只要外星人满足他们的官僚要求：影子在平面上覆盖的面积必须与 $\\mathbf{A}\\,\\text{km}^2$ 足够接近（具体定义见输出部分），他们就可以容忍飞船的存在。他们雇佣了你——一位几何语言学专家——来向外星人传达这一要求。你已经了解到，飞船不能改变大小，中心也不能移动，但可以在原地任意旋转。\n\n请你找出一种旋转方式，使得飞船的影子面积接近 $\\mathbf{A}$。你需要用三个点来表达旋转方式：任选三个互不相对的面心。", "inputFormat": "第一行输入一个整数 $\\mathbf{T}$，表示测试用例的数量。接下来有 $\\mathbf{T}$ 组测试数据，每组一行，包含一个有理数 $\\mathbf{A}$，表示期望的影子面积（单位为 $\\mathrm{km}^2$），精确到小数点后六位。\n\n保证对于本题允许的 $\\mathbf{A}$ 取值，总存在一种旋转方式使得飞船满足要求。", "outputFormat": "对于每个测试用例，首先输出一行 `Case #x:`，其中 $x$ 是测试用例编号（从 1 开始）。然后输出三行，每行三个有理数，分别为你选择的三个面心的 $x, y, z$ 坐标。你可以使用十进制（如 0.000123456）或科学计数法（如 1.23456e-4）输出。\n\n你的答案仅当同时满足以下所有条件时才被认为是正确的：\n\n1. 每个点到原点的距离必须在 $0.5-10^{-6}$ 到 $0.5+10^{-6}$ 千米之间（含端点）。\n2. 连接原点到每个点的线段，两两夹角（弧度）必须在 $\\pi/2-10^{-6}$ 到 $\\pi/2+10^{-6}$ 之间（含端点）。\n3. 影子的面积（单位为 $\\mathrm{km}^2$），通过将所有 8 个顶点投影到 $y=-3$ 平面并计算这些投影点的凸包面积得到，必须在 $\\mathbf{A}-10^{-6}$ 到 $\\mathbf{A}+10^{-6}$ 之间（含端点）。我们将顶点计算为 $+/-\\mathbf{p}_1+/-\\mathbf{p}_2+/-\\mathbf{p}_3$（即对于每个 $\\mathbf{p}_i$，取 $+\\mathbf{p}_i$ 或 $-\\mathbf{p}_i$，向量相加），其中 $\\mathbf{p}_1, \\mathbf{p}_2, \\mathbf{p}_3$ 是你提供的三个面心。\n\n请注意，你可能需要输出超过 6 位小数以通过上述判定。如果存在多个可行解，你可以输出任意一个。", "hint": "在样例 1 中，立方体无需旋转；此时有两个面已经与平面平行，影子是边长为 $1$ 的正方形。\n\n在样例 2 中，一种可行解是让立方体绕 $x=y=0$ 这条线旋转 $45$ 度，此时影子是 $1$ 和 $\\sqrt{2}$ 的矩形。\n\n下图为样例 1 和样例 2 的立方体及其影子示意图。太阳仅为说明而画出，实际应视为位于 $y$ 轴正方向无限远处的点。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ylvi5a65.png)\n\n**数据范围**\n\n- $1 \\leqslant \\mathrm{T} \\leqslant 100$。\n\n**测试点 1（可见）**\n\n- $1.000000 \\leqslant \\mathrm{A} \\leqslant 1.414213$\n\n**测试点 2（隐藏）**\n\n- $1.000000 \\leqslant \\mathrm{A} \\leqslant 1.732050$\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13136", "type": "P", "difficulty": 3, "samples": [["6\n3 6 1 1\n.@@..@\n.....@\n@.@.@@\n4 3 1 1\n@@@\n@.@\n@.@\n@@@\n4 5 1 1\n.....\n.....\n.....\n.....\n4 4 1 1\n..@@\n..@@\n@@..\n@@..\n3 4 2 2\n@.@@\n@@.@\n@.@@\n3 4 1 2\n.@.@\n@.@.\n.@.@", "Case #1: POSSIBLE\nCase #2: IMPOSSIBLE\nCase #3: POSSIBLE\nCase #4: IMPOSSIBLE\nCase #5: POSSIBLE\nCase #6: IMPOSSIBLE"]], "limits": {"time": [6000, 6000], "memory": [1048576, 1048576]}, "tags": ["2018", "前缀和", "Google Code Jam"], "title": "[GCJ 2018 #1A] Waffle Choppers", "background": "", "description": "The diners at the Infinite House of Pancakes have gotten tired of circular pancakes, so the chefs are about to offer a new menu option: waffles! As a publicity stunt, they have made one large waffle that is a grid of square cells with $\\mathrm{R}$ rows and $\\mathrm{C}$ columns. Each cell of the waffle is either empty, or contains a single chocolate chip.\n\nNow it is time for the chefs to divide up the waffle among their hungry diners. A horizontal cut runs along the entire gridline between two of the rows; a vertical cut runs along the entire gridline between two of the columns. For efficiency's sake, one chef will make exactly $\\mathbf{H}$ different horizontal cuts and another chef will make exactly $\\mathbf{V}$ different vertical cuts. This will conveniently create one piece for each of the $(\\mathbf{H}+1) \\times(\\mathbf{V}+1)$ diners. The pieces will not necessarily all be of equal sizes, but that is fine; market research has shown that the diners do not care about that.\n\nWhat the diners do care about is the number of chocolate chips they get, so each piece must have exactly the same number of chocolate chips. Can you determine whether the chefs can accomplish this goal using the given numbers of horizontal and vertical cuts?", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$; $\\mathbf{T}$ test cases follow. Each begins with one line containing four integers $\\mathbf{R}, \\mathbf{C}, \\mathbf{H}$, and $\\mathbf{V}$ : the number of rows and columns in the waffle, and the exact numbers of horizontal and vertical cuts that the chefs must make. Then, there are $\\mathbf{R}$ more lines of $\\mathbf{C}$ characters each; the $j$-th character in the $i$-th of these lines represents the cell in the $i$-th row and the $j$-th column of the waffle. Each character is either `@`, which means the cell has a chocolate chip, or `.`, which means the cell is empty.", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is possible if the chefs can accomplish the goal as described above, or IMPOSSIBLE if they cannot.", "hint": "**Sample Explanation**\n\nNote that the last two sample cases would not appear in test set 1.\n\nIn Sample Case #1, one possible strategy is to make the horizontal cut between the second and third rows from the top, and make the vertical cut between the fourth and fifth columns from the left. That creates the following pieces, each of which has exactly two chocolate chips:\n\n```\n.@@. .@\n.... .@\n\n@.@. @@\n```\n\nIn Sample Case #2, no matter where you make the horizontal cut and the vertical cut, you will create pieces with unequal numbers of chocolate chips, so the case is impossible.\n\nIn Sample Case #3, there are no chocolate chips in the waffle. Any cutting strategy creates pieces which have the same number of chocolate chips (zero), so the diners are happy... but maybe not as happy as they would have been if they had gotten chocolate chips!\n\nIn Sample Case #4, just as in Sample Case #2, you cannot succeed regardless of where you make your horizontal cut and your vertical cut.\n\nIn Sample Case #5, the chefs can make the only two possible horizontal cuts, and make the two vertical cuts to the right of the first and third columns.\n\nAlthough Sample Case #6 would be possible for other numbers of horizontal and vertical cuts, remember that you must use exactly H horizontal cuts and exactly V vertical cuts. No matter where you make your one horizontal cut and two vertical cuts, you cannot succeed.\n\n**Limits**\n\n- $1 \\leqslant \\mathrm{T} \\leqslant 100$.\n\n**Test set 1 (9 Pts, Visible)**\n\n- $2 \\leqslant \\mathbf{R} \\leqslant 10$.\n- $2 \\leqslant \\mathbf{C} \\leqslant 10$.\n- $\\mathbf{H}=1$.\n- $\\mathbf{V}=1$.\n\n**Test set 2 (16 Pts, Hidden)**\n\n- $2 \\leqslant \\mathbf{R} \\leqslant 100$.\n- $2 \\leqslant \\mathbf{C} \\leqslant 100$.\n- $1 \\leqslant \\mathbf{H}<\\mathbf{R}$.\n- $1 \\leqslant \\mathbf{V}<\\mathbf{C}$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #1A] Waffle Choppers", "background": "", "description": "The diners at the Infinite House of Pancakes have gotten tired of circular pancakes, so the chefs are about to offer a new menu option: waffles! As a publicity stunt, they have made one large waffle that is a grid of square cells with $\\mathrm{R}$ rows and $\\mathrm{C}$ columns. Each cell of the waffle is either empty, or contains a single chocolate chip.\n\nNow it is time for the chefs to divide up the waffle among their hungry diners. A horizontal cut runs along the entire gridline between two of the rows; a vertical cut runs along the entire gridline between two of the columns. For efficiency's sake, one chef will make exactly $\\mathbf{H}$ different horizontal cuts and another chef will make exactly $\\mathbf{V}$ different vertical cuts. This will conveniently create one piece for each of the $(\\mathbf{H}+1) \\times(\\mathbf{V}+1)$ diners. The pieces will not necessarily all be of equal sizes, but that is fine; market research has shown that the diners do not care about that.\n\nWhat the diners do care about is the number of chocolate chips they get, so each piece must have exactly the same number of chocolate chips. Can you determine whether the chefs can accomplish this goal using the given numbers of horizontal and vertical cuts?", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$; $\\mathbf{T}$ test cases follow. Each begins with one line containing four integers $\\mathbf{R}, \\mathbf{C}, \\mathbf{H}$, and $\\mathbf{V}$ : the number of rows and columns in the waffle, and the exact numbers of horizontal and vertical cuts that the chefs must make. Then, there are $\\mathbf{R}$ more lines of $\\mathbf{C}$ characters each; the $j$-th character in the $i$-th of these lines represents the cell in the $i$-th row and the $j$-th column of the waffle. Each character is either `@`, which means the cell has a chocolate chip, or `.`, which means the cell is empty.", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is possible if the chefs can accomplish the goal as described above, or IMPOSSIBLE if they cannot.", "hint": "**Sample Explanation**\n\nNote that the last two sample cases would not appear in test set 1.\n\nIn Sample Case #1, one possible strategy is to make the horizontal cut between the second and third rows from the top, and make the vertical cut between the fourth and fifth columns from the left. That creates the following pieces, each of which has exactly two chocolate chips:\n\n```\n.@@. .@\n.... .@\n\n@.@. @@\n```\n\nIn Sample Case #2, no matter where you make the horizontal cut and the vertical cut, you will create pieces with unequal numbers of chocolate chips, so the case is impossible.\n\nIn Sample Case #3, there are no chocolate chips in the waffle. Any cutting strategy creates pieces which have the same number of chocolate chips (zero), so the diners are happy... but maybe not as happy as they would have been if they had gotten chocolate chips!\n\nIn Sample Case #4, just as in Sample Case #2, you cannot succeed regardless of where you make your horizontal cut and your vertical cut.\n\nIn Sample Case #5, the chefs can make the only two possible horizontal cuts, and make the two vertical cuts to the right of the first and third columns.\n\nAlthough Sample Case #6 would be possible for other numbers of horizontal and vertical cuts, remember that you must use exactly H horizontal cuts and exactly V vertical cuts. No matter where you make your one horizontal cut and two vertical cuts, you cannot succeed.\n\n**Limits**\n\n- $1 \\leqslant \\mathrm{T} \\leqslant 100$.\n\n**Test set 1 (9 Pts, Visible)**\n\n- $2 \\leqslant \\mathbf{R} \\leqslant 10$.\n- $2 \\leqslant \\mathbf{C} \\leqslant 10$.\n- $\\mathbf{H}=1$.\n- $\\mathbf{V}=1$.\n\n**Test set 2 (16 Pts, Hidden)**\n\n- $2 \\leqslant \\mathbf{R} \\leqslant 100$.\n- $2 \\leqslant \\mathbf{C} \\leqslant 100$.\n- $1 \\leqslant \\mathbf{H}<\\mathbf{R}$.\n- $1 \\leqslant \\mathbf{V}<\\mathbf{C}$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #1A] Waffle Choppers", "background": null, "description": "无限煎饼屋的食客们已经厌倦了圆形煎饼，因此厨师们即将推出新的菜单选项：华夫饼！作为宣传噱头，他们制作了一个巨大的华夫饼，这个华夫饼是一个由 $\\mathrm{R}$ 行 $\\mathrm{C}$ 列方格组成的网格。每个格子要么是空的，要么包含一颗巧克力豆。\n\n现在，厨师们要把华夫饼分给饥饿的食客们。一条水平切割沿着两行之间的整条网格线切开；一条垂直切割沿着两列之间的整条网格线切开。为了效率，一位厨师会恰好进行 $\\mathbf{H}$ 次不同的水平切割，另一位厨师会恰好进行 $\\mathbf{V}$ 次不同的垂直切割。这样就会方便地为每位食客分出 $(\\mathbf{H}+1) \\times (\\mathbf{V}+1)$ 块华夫饼。每块的大小不一定相等，但这没关系；市场调研显示食客们并不在意这一点。\n\n食客们真正关心的是他们能分到多少巧克力豆，因此每一块中必须恰好有相同数量的巧克力豆。你能判断厨师们能否用给定数量的水平和垂直切割实现这个目标吗？", "inputFormat": "输入的第一行包含测试用例数 $\\mathbf{T}$；接下来有 $\\mathbf{T}$ 组测试数据。每组测试数据的第一行包含四个整数 $\\mathbf{R}, \\mathbf{C}, \\mathbf{H}, \\mathbf{V}$，分别表示华夫饼的行数、列数，以及厨师们必须进行的水平和垂直切割次数。接下来有 $\\mathbf{R}$ 行，每行有 $\\mathbf{C}$ 个字符；第 $i$ 行第 $j$ 个字符表示华夫饼第 $i$ 行第 $j$ 列的格子。每个字符要么是 `@`（表示该格子有一颗巧克力豆），要么是 `.`（表示该格子为空）。", "outputFormat": "对于每组测试数据，输出一行 `Case #x: y`，其中 $x$ 是测试用例编号（从 1 开始），$y$ 为 `POSSIBLE`（如果厨师们能实现目标）或 `IMPOSSIBLE`（如果不能）。", "hint": "**样例解释**\n\n注意，最后两个样例不会出现在测试集 1 中。\n\n在样例 1 中，一种可行的切割方式是在从上往下数的第二行和第三行之间进行水平切割，在从左往右数的第四列和第五列之间进行垂直切割。这样会得到如下的分块，每块恰好有两颗巧克力豆：\n\n```\n.@@. .@\n.... .@\n\n@.@. @@\n```\n\n在样例 2 中，无论如何切割，都会得到包含不同数量巧克力豆的分块，因此该情况不可能实现。\n\n在样例 3 中，华夫饼中没有巧克力豆。任何切割方式都会得到每块都含有相同数量巧克力豆（零颗），因此食客们会满意……不过也许没有巧克力豆他们就没那么开心了！\n\n在样例 4 中，和样例 2 一样，无论如何切割都无法实现目标。\n\n在样例 5 中，厨师们可以进行仅有的两次水平切割，并在第一列和第三列右侧进行两次垂直切割。\n\n虽然样例 6 在其他水平和垂直切割次数下可能可行，但请记住你必须恰好使用 $H$ 次水平切割和 $V$ 次垂直切割。无论如何进行一次水平切割和两次垂直切割，都无法实现目标。\n\n**数据范围**\n\n- $1 \\leqslant \\mathrm{T} \\leqslant 100$。\n\n**测试集 1（9 分，公开）**\n\n- $2 \\leqslant \\mathbf{R} \\leqslant 10$。\n- $2 \\leqslant \\mathbf{C} \\leqslant 10$。\n- $\\mathbf{H}=1$。\n- $\\mathbf{V}=1$。\n\n**测试集 2（16 分，隐藏）**\n\n- $2 \\leqslant \\mathbf{R} \\leqslant 100$。\n- $2 \\leqslant \\mathbf{C} \\leqslant 100$。\n- $1 \\leqslant \\mathbf{H}<\\mathbf{R}$。\n- $1 \\leqslant \\mathbf{V}<\\mathbf{C}$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13137", "type": "P", "difficulty": 4, "samples": [["3\n2 2 2\n1 2 3\n1 1 2\n2 2 2\n1 2 3\n2 1 2\n3 4 5\n2 3 3\n2 1 5\n2 4 2\n2 2 4\n2 5 1", "Case #1: 5\nCase #2: 4\nCase #3: 7"]], "limits": {"time": [15000, 15000], "memory": [1048576, 1048576]}, "tags": ["2018", "二分", "Google Code Jam"], "title": "[GCJ 2018 #1A] Bit Party", "background": "", "description": "These days, robots can drive cars, but can they throw a good party? The Code Jam team's research into this topic is still at an early stage. We just deployed $\\mathbf{R}$ robot shoppers to our local supermarket to buy party supplies for our World Finals in Toronto, but their first-order model of a Canadian party was very simple: they just bought $\\mathbf{B}$ \"bits\" (a bit being a small donut-like treat found in the area). We will work on improving their AI later, but for now, we want to help them purchase all of those bits as quickly as possible.\n\nThe supermarket has $\\mathbf{C}$ cashiers who can scan customers' purchases. The $i$-th cashier will:\n- accept a maximum of $\\mathbf{M}_{\\mathbf{i}}$ items per customer\n- take $\\mathbf{S}_{\\mathbf{i}}$ seconds to scan each item\n- spend a further $\\mathbf{P}_{\\mathbf{i}}$ seconds handling payment and packaging up the bits.\n\nThat is, a customer who brings $\\mathrm{N}$ bits to the $i$-th cashier (where $\\mathrm{N}$ must be less than or equal to $\\mathbf{M}_{\\mathbf{i}}$ ) will spend a total of $\\mathbf{S}_{\\mathbf{i}} \\times \\mathrm{N}+\\mathbf{P}_{\\mathbf{i}}$ seconds interacting with that cashier.\n\nBefore the robots interact with any cashiers, you will distribute the bits among the robots however you want. (Bits must remain intact; you cannot break them up into fractional pieces!) Any robot that gets no bits will not get to interact with a cashier, and will go away disappointed.\n\nThen, for each robot with at least one bit, you will choose a different single cashier. (Two robots cannot use the same cashier, and a robot cannot use more than one cashier.) The robots all start interacting with their cashiers at time 0 . Note that once a robot finishes interacting with its cashier, it cannot be given more bits and cannot interact with other cashiers.\n\nIf you help the robots make optimal choices, what is the earliest time at which all of the robots can finish interacting with their cashiers?\n", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow. Each begins with one line with three integers $\\mathbf{R}, \\mathbf{B}$, and $\\mathbf{C}$ : the numbers of robot shoppers, bits, and cashiers. Then, there are $\\mathbf{C}$ more lines. The $i$-th of these represents the $i$-th cashier, and it has three integers $\\mathbf{M}_{\\mathbf{i}}, \\mathbf{S}_{\\mathbf{i}}$, and $\\mathbf{P}_{\\mathbf{i}}$ : the maximum number of bits, scan time per bit (in seconds), and payment/packaging time (in seconds) for that cashier, as described above.", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the earliest time (in seconds) at which all robots can finish interacting with their cashiers.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, there are two robots, two bits, and two cashiers, and each cashier can only handle one item. So, you must give one bit to each robot. Cashier 1 takes 5 seconds, and Cashier 2 takes 3 seconds, so the time required is 5 seconds.\n\nSample Case #2 is similar to the previous case, except that now Cashier 2 can handle up to 2 items. So, it is best to give all the bits to one robot and have that robot use Cashier 2. This takes 1 second per item plus 2 seconds $=4$ seconds.\n\nIn Sample Case #3, the optimal strategy is to send one robot with 2 bits to cashier 2, and two robots with 1 bit each to any of the other cashiers.\n\n**Limits**\n\n- $1 \\leqslant \\mathbf{T} \\leqslant 100$.\n- $1 \\leqslant \\mathbf{M}_{\\mathbf{i}} \\leqslant 10^{9}$, for all $i$.\n- $1 \\leqslant \\mathbf{S}_{\\mathbf{i}} \\leqslant 10^{9}$, for all $i$.\n- $1 \\leqslant \\mathbf{P}_{\\mathbf{i}} \\leqslant 10^{9}$, for all $i$.\n- The sum of the $\\mathbf{R}$ largest values of $\\mathbf{M}_{\\mathbf{i}} \\geqslant \\mathbf{B}$. (It is possible for at least one subset of $\\mathbf{R}$ cashiers to handle all of the bits.)\n\n**Test set 1 (11 Pts, Visible)**\n\n- $1 \\leqslant \\mathbf{R} \\leqslant \\mathbf{C} \\leqslant 5$.\n- $1 \\leqslant \\mathbf{B} \\leqslant 20$.\n\n**Test set 2 (21 Pts, Hidden)**\n\n- $1 \\leqslant \\mathbf{R} \\leqslant \\mathbf{C} \\leqslant 1000$.\n- $1 \\leqslant \\mathbf{B} \\leqslant 10^{9}$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #1A] Bit Party", "background": "", "description": "These days, robots can drive cars, but can they throw a good party? The Code Jam team's research into this topic is still at an early stage. We just deployed $\\mathbf{R}$ robot shoppers to our local supermarket to buy party supplies for our World Finals in Toronto, but their first-order model of a Canadian party was very simple: they just bought $\\mathbf{B}$ \"bits\" (a bit being a small donut-like treat found in the area). We will work on improving their AI later, but for now, we want to help them purchase all of those bits as quickly as possible.\n\nThe supermarket has $\\mathbf{C}$ cashiers who can scan customers' purchases. The $i$-th cashier will:\n- accept a maximum of $\\mathbf{M}_{\\mathbf{i}}$ items per customer\n- take $\\mathbf{S}_{\\mathbf{i}}$ seconds to scan each item\n- spend a further $\\mathbf{P}_{\\mathbf{i}}$ seconds handling payment and packaging up the bits.\n\nThat is, a customer who brings $\\mathrm{N}$ bits to the $i$-th cashier (where $\\mathrm{N}$ must be less than or equal to $\\mathbf{M}_{\\mathbf{i}}$ ) will spend a total of $\\mathbf{S}_{\\mathbf{i}} \\times \\mathrm{N}+\\mathbf{P}_{\\mathbf{i}}$ seconds interacting with that cashier.\n\nBefore the robots interact with any cashiers, you will distribute the bits among the robots however you want. (Bits must remain intact; you cannot break them up into fractional pieces!) Any robot that gets no bits will not get to interact with a cashier, and will go away disappointed.\n\nThen, for each robot with at least one bit, you will choose a different single cashier. (Two robots cannot use the same cashier, and a robot cannot use more than one cashier.) The robots all start interacting with their cashiers at time 0 . Note that once a robot finishes interacting with its cashier, it cannot be given more bits and cannot interact with other cashiers.\n\nIf you help the robots make optimal choices, what is the earliest time at which all of the robots can finish interacting with their cashiers?\n", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow. Each begins with one line with three integers $\\mathbf{R}, \\mathbf{B}$, and $\\mathbf{C}$ : the numbers of robot shoppers, bits, and cashiers. Then, there are $\\mathbf{C}$ more lines. The $i$-th of these represents the $i$-th cashier, and it has three integers $\\mathbf{M}_{\\mathbf{i}}, \\mathbf{S}_{\\mathbf{i}}$, and $\\mathbf{P}_{\\mathbf{i}}$ : the maximum number of bits, scan time per bit (in seconds), and payment/packaging time (in seconds) for that cashier, as described above.", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the earliest time (in seconds) at which all robots can finish interacting with their cashiers.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, there are two robots, two bits, and two cashiers, and each cashier can only handle one item. So, you must give one bit to each robot. Cashier 1 takes 5 seconds, and Cashier 2 takes 3 seconds, so the time required is 5 seconds.\n\nSample Case #2 is similar to the previous case, except that now Cashier 2 can handle up to 2 items. So, it is best to give all the bits to one robot and have that robot use Cashier 2. This takes 1 second per item plus 2 seconds $=4$ seconds.\n\nIn Sample Case #3, the optimal strategy is to send one robot with 2 bits to cashier 2, and two robots with 1 bit each to any of the other cashiers.\n\n**Limits**\n\n- $1 \\leqslant \\mathbf{T} \\leqslant 100$.\n- $1 \\leqslant \\mathbf{M}_{\\mathbf{i}} \\leqslant 10^{9}$, for all $i$.\n- $1 \\leqslant \\mathbf{S}_{\\mathbf{i}} \\leqslant 10^{9}$, for all $i$.\n- $1 \\leqslant \\mathbf{P}_{\\mathbf{i}} \\leqslant 10^{9}$, for all $i$.\n- The sum of the $\\mathbf{R}$ largest values of $\\mathbf{M}_{\\mathbf{i}} \\geqslant \\mathbf{B}$. (It is possible for at least one subset of $\\mathbf{R}$ cashiers to handle all of the bits.)\n\n**Test set 1 (11 Pts, Visible)**\n\n- $1 \\leqslant \\mathbf{R} \\leqslant \\mathbf{C} \\leqslant 5$.\n- $1 \\leqslant \\mathbf{B} \\leqslant 20$.\n\n**Test set 2 (21 Pts, Hidden)**\n\n- $1 \\leqslant \\mathbf{R} \\leqslant \\mathbf{C} \\leqslant 1000$.\n- $1 \\leqslant \\mathbf{B} \\leqslant 10^{9}$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #1A] Bit Party", "background": null, "description": "如今，机器人已经能够驾驶汽车，但它们能举办一场精彩的派对吗？Code Jam 团队对此的研究还处于初级阶段。我们刚刚派遣了 $\\mathbf{R}$ 个机器人购物者到本地超市，为我们在多伦多举办的世界总决赛采购派对用品，但它们对加拿大派对的第一印象非常简单：它们只买了 $\\mathbf{B}$ 个“bit”（bit 是当地一种小型甜甜圈状点心）。我们以后会继续改进它们的人工智能，但现在，我们希望帮助它们尽快购买完所有的 bit。\n\n超市有 $\\mathbf{C}$ 个收银员可以为顾客结账。第 $i$ 个收银员有如下特点：\n- 每位顾客最多接受 $\\mathbf{M}_{\\mathbf{i}}$ 个商品\n- 扫描每个商品需要 $\\mathbf{S}_{\\mathbf{i}}$ 秒\n- 还需要额外花费 $\\mathbf{P}_{\\mathbf{i}}$ 秒用于收款和打包 bit\n\n也就是说，一个顾客如果带着 $\\mathrm{N}$ 个 bit 找到第 $i$ 个收银员（其中 $\\mathrm{N}$ 必须不超过 $\\mathbf{M}_{\\mathbf{i}}$），则与该收银员的总交互时间为 $\\mathbf{S}_{\\mathbf{i}} \\times \\mathrm{N}+\\mathbf{P}_{\\mathbf{i}}$ 秒。\n\n在机器人和收银员交互之前，你可以任意分配 bit 给机器人（bit 必须保持完整，不能拆分成小数部分！）。任何没有分到 bit 的机器人将无法与收银员交互，并会失望地离开。\n\n接下来，对于每个至少分到一个 bit 的机器人，你需要为其选择一个不同的收银员。（两个机器人不能使用同一个收银员，一个机器人也不能使用多个收银员。）所有机器人会在时间 0 同时开始与各自的收银员交互。注意，一旦某个机器人完成了与收银员的交互，它不能再获得更多 bit，也不能与其他收银员交互。\n\n如果你帮助机器人做出最优选择，所有机器人最早能在什么时候全部完成与收银员的交互？", "inputFormat": "输入的第一行包含一个整数 $\\mathbf{T}$，表示测试用例的数量。接下来有 $\\mathbf{T}$ 个测试用例。每个测试用例的第一行包含三个整数 $\\mathbf{R}, \\mathbf{B}, \\mathbf{C}$，分别表示机器人数量、bit 数量和收银员数量。接下来的 $\\mathbf{C}$ 行，每行包含三个整数 $\\mathbf{M}_{\\mathbf{i}}, \\mathbf{S}_{\\mathbf{i}}, \\mathbf{P}_{\\mathbf{i}}$，分别表示第 $i$ 个收银员能处理的最大 bit 数、每个 bit 的扫描时间（秒）以及收款和打包时间（秒），如上所述。", "outputFormat": "对于每个测试用例，输出一行，格式为 `Case #x: y`，其中 $x$ 是测试用例编号（从 1 开始），$y$ 是所有机器人最早能完成与收银员交互的时间（单位为秒）。", "hint": "**样例解释**\n\n在样例 1 中，有两个机器人、两个 bit 和两个收银员，每个收银员最多只能处理一个商品。因此，必须给每个机器人分配一个 bit。收银员 1 需要 5 秒，收银员 2 需要 3 秒，所以所需时间为 5 秒。\n\n样例 2 与前一个类似，但现在收银员 2 最多可以处理 2 个商品。因此，最优做法是将所有 bit 都分配给一个机器人，并让该机器人使用收银员 2。这样总共需要 $1$ 秒每个商品加上 $2$ 秒，共 $4$ 秒。\n\n在样例 3 中，最优策略是让一个机器人带着 2 个 bit 去找收银员 2，另外两个机器人各带 1 个 bit 去找其他任意收银员。\n\n**数据范围**\n\n- $1 \\leqslant \\mathbf{T} \\leqslant 100$。\n- 对所有 $i$，$1 \\leqslant \\mathbf{M}_{\\mathbf{i}} \\leqslant 10^{9}$。\n- 对所有 $i$，$1 \\leqslant \\mathbf{S}_{\\mathbf{i}} \\leqslant 10^{9}$。\n- 对所有 $i$，$1 \\leqslant \\mathbf{P}_{\\mathbf{i}} \\leqslant 10^{9}$。\n- $\\mathbf{M}_{\\mathbf{i}}$ 中最大的 $\\mathbf{R}$ 个数之和 $\\geqslant \\mathbf{B}$。（即至少存在一组 $\\mathbf{R}$ 个收银员可以处理所有 bit。）\n\n**测试点 1（11 分，公开）**\n\n- $1 \\leqslant \\mathbf{R} \\leqslant \\mathbf{C} \\leqslant 5$。\n- $1 \\leqslant \\mathbf{B} \\leqslant 20$。\n\n**测试点 2（21 分，隐藏）**\n\n- $1 \\leqslant \\mathbf{R} \\leqslant \\mathbf{C} \\leqslant 1000$。\n- $1 \\leqslant \\mathbf{B} \\leqslant 10^{9}$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13138", "type": "P", "difficulty": 4, "samples": [["4\n1 7\n1 1\n2 920\n50 120\n50 120\n1 32\n7 4\n3 240\n10 20\n20 30\n30 10", "Case #1: 6.828427\nCase #2: 920.000000\nCase #3: 32.000000\nCase #4: 240.000000"]], "limits": {"time": [15000, 15000], "memory": [1048576, 1048576]}, "tags": ["动态规划 DP", "2018", "Special Judge", "Google Code Jam"], "title": "[GCJ 2018 #1A] Edgy Baking", "background": "", "description": "The baker Mr. Maillard has rolled out some cookie dough and cut it up to create $\\mathbf{N}$ cookies, each of which is a rectangle. He was just about to put them in the oven when he remembered that the crispy, caramelized edges of cookies taste particularly delicious. Specifically, he thinks he would be happiest if the sum of the perimeters of all the cookies were as close as possible to $\\mathbf{P}$ millimeters (mm), without going over. (If the batch of cookies is too edgy, it might burn!)\n\nFor each cookie, Mr. Maillard can decide whether to leave it as is, or make a single straight cut to separate it into two (not necessarily rectangular) halves with equal area. (Note that such a cut must necessarily go through the center of the cookie.) The two new cookies created in this way cannot themselves be cut again.\n\nIf Mr. Maillard makes optimal decisions, what is the closest he can come to $\\mathbf{P}$ without exceeding it?\n", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow. Each begins with one line with two integers $\\mathbf{N}$ and $\\mathbf{P}$ : the number of cookies, and the desired perimeter sum (in mm), respectively. Then, $\\mathbf{N}$ lines follow. The $i$-th of these has two integers $\\mathbf{W}_{\\mathbf{i}}$ and $\\mathbf{H}_{\\mathbf{i}}$ : the width and height (both in mm) of the $i$-th cookie.\n", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is a real number: the largest possible sum (in mm) of the perimeters of all cookies (after Mr. Maillard is done cutting) that does not exceed $\\mathbf{P}$. $y$ will be considered correct if it is within an absolute or relative error of $10^{-6}$ of the correct answer. See the FAQ for an explanation of what that means, and what formats of real numbers we accept.", "hint": "**Sample Explanation**\n\nNote that the last sample case would not appear in test set 1.\n\nIn Sample Case #1, there is only one cookie, and it is a square with side length 1. Mr. Maillard can cut from one corner to a diagonally opposite corner, which creates two right triangles, each of which has side lengths 1, 1, and $\\sqrt 2$. Then the perimeter sum is $4+2 \\times \\sqrt 2$; this is smaller than $\\mathbf{P}=7$, but it is not possible to get any closer.\n\nIn Sample Case #2, Mr. Maillard can cut the first cookie along its longer axis to create two new $25 \\times 120$ rectangles, and leave the second cookie alone. The total perimeter is then $580+340=920$, which is exactly $\\mathbf{P}$.\n\nIn Sample Case #3, Mr. Maillard can cut the cookie to make two trapezoids, each of which has side lengths of $2, 4, 5$, and $5$. Then the new perimeter sum is $32$, which is exactly $\\mathbf{P}$.\n\nIn Sample Case #4, the initial perimeter sum is exactly $\\mathbf{P}$, so Mr. Maillard should not make any cuts.\n\n**Limits**\n\n- $1 \\leqslant \\mathbf{T} \\leqslant 100$.\n- $1 \\leqslant \\mathbf{N} \\leqslant 100$.\n- $1 \\leqslant \\mathbf{W}_{\\mathbf{i}} \\leqslant 250$, for all $i$.\n- $1 \\leqslant \\mathbf{H}_{\\mathbf{i}} \\leqslant 250$, for all $i$.\n- $\\mathbf{P} \\geqslant 2 \\times$ the sum of $\\left(\\mathbf{W}_{\\mathbf{i}}+\\mathbf{H}_{\\mathbf{i}}\\right)$ over all $i$. ( $\\mathbf{P}$ is at least as large as the sum of the perimeters of all cookies before any cuts are made.)\n- $\\mathbf{P} \\leqslant 10^{8}$.\n\n**Test set 1 (14 Pts, Visible)**\n\n- $\\mathbf{W}_{\\mathbf{i}}=\\mathbf{W}_{\\mathbf{j}}$, for all $i$ and $j$.\n- $\\mathbf{H}_{\\mathbf{i}}=\\mathbf{H}_{\\mathbf{j}}$, for all $i$ and $j$.\n- (All of the provided cookies have the same dimensions.)\n\n**Test set 2 (29 Pts, Hidden)**\n\n- No additional limits beyond the general ones. (In particular, the provided cookies do not all necessarily have the same dimensions.)", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #1A] Edgy Baking", "background": "", "description": "The baker Mr. Maillard has rolled out some cookie dough and cut it up to create $\\mathbf{N}$ cookies, each of which is a rectangle. He was just about to put them in the oven when he remembered that the crispy, caramelized edges of cookies taste particularly delicious. Specifically, he thinks he would be happiest if the sum of the perimeters of all the cookies were as close as possible to $\\mathbf{P}$ millimeters (mm), without going over. (If the batch of cookies is too edgy, it might burn!)\n\nFor each cookie, Mr. Maillard can decide whether to leave it as is, or make a single straight cut to separate it into two (not necessarily rectangular) halves with equal area. (Note that such a cut must necessarily go through the center of the cookie.) The two new cookies created in this way cannot themselves be cut again.\n\nIf Mr. Maillard makes optimal decisions, what is the closest he can come to $\\mathbf{P}$ without exceeding it?\n", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow. Each begins with one line with two integers $\\mathbf{N}$ and $\\mathbf{P}$ : the number of cookies, and the desired perimeter sum (in mm), respectively. Then, $\\mathbf{N}$ lines follow. The $i$-th of these has two integers $\\mathbf{W}_{\\mathbf{i}}$ and $\\mathbf{H}_{\\mathbf{i}}$ : the width and height (both in mm) of the $i$-th cookie.\n", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is a real number: the largest possible sum (in mm) of the perimeters of all cookies (after Mr. Maillard is done cutting) that does not exceed $\\mathbf{P}$. $y$ will be considered correct if it is within an absolute or relative error of $10^{-6}$ of the correct answer. See the FAQ for an explanation of what that means, and what formats of real numbers we accept.", "hint": "**Sample Explanation**\n\nNote that the last sample case would not appear in test set 1.\n\nIn Sample Case #1, there is only one cookie, and it is a square with side length 1. Mr. Maillard can cut from one corner to a diagonally opposite corner, which creates two right triangles, each of which has side lengths 1, 1, and $\\sqrt 2$. Then the perimeter sum is $4+2 \\times \\sqrt 2$; this is smaller than $\\mathbf{P}=7$, but it is not possible to get any closer.\n\nIn Sample Case #2, Mr. Maillard can cut the first cookie along its longer axis to create two new $25 \\times 120$ rectangles, and leave the second cookie alone. The total perimeter is then $580+340=920$, which is exactly $\\mathbf{P}$.\n\nIn Sample Case #3, Mr. Maillard can cut the cookie to make two trapezoids, each of which has side lengths of $2, 4, 5$, and $5$. Then the new perimeter sum is $32$, which is exactly $\\mathbf{P}$.\n\nIn Sample Case #4, the initial perimeter sum is exactly $\\mathbf{P}$, so Mr. Maillard should not make any cuts.\n\n**Limits**\n\n- $1 \\leqslant \\mathbf{T} \\leqslant 100$.\n- $1 \\leqslant \\mathbf{N} \\leqslant 100$.\n- $1 \\leqslant \\mathbf{W}_{\\mathbf{i}} \\leqslant 250$, for all $i$.\n- $1 \\leqslant \\mathbf{H}_{\\mathbf{i}} \\leqslant 250$, for all $i$.\n- $\\mathbf{P} \\geqslant 2 \\times$ the sum of $\\left(\\mathbf{W}_{\\mathbf{i}}+\\mathbf{H}_{\\mathbf{i}}\\right)$ over all $i$. ( $\\mathbf{P}$ is at least as large as the sum of the perimeters of all cookies before any cuts are made.)\n- $\\mathbf{P} \\leqslant 10^{8}$.\n\n**Test set 1 (14 Pts, Visible)**\n\n- $\\mathbf{W}_{\\mathbf{i}}=\\mathbf{W}_{\\mathbf{j}}$, for all $i$ and $j$.\n- $\\mathbf{H}_{\\mathbf{i}}=\\mathbf{H}_{\\mathbf{j}}$, for all $i$ and $j$.\n- (All of the provided cookies have the same dimensions.)\n\n**Test set 2 (29 Pts, Hidden)**\n\n- No additional limits beyond the general ones. (In particular, the provided cookies do not all necessarily have the same dimensions.)", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #1A] Edgy Baking", "background": null, "description": "面包师 Mr. Maillard 已经将一些饼干面团擀平并切割，制作出了 $\\mathbf{N}$ 块饼干，每块都是一个矩形。他正准备把它们放进烤箱时，突然想起饼干酥脆、焦糖化的边缘特别美味。具体来说，他认为如果所有饼干的周长之和尽可能接近 $\\mathbf{P}$ 毫米（mm），且不超过 $\\mathbf{P}$，他会最开心。（如果饼干的边太多，可能会烤焦！）\n\n对于每块饼干，Mr. Maillard 可以选择保持原样，或者沿着一条直线将其一分为二（不一定是矩形），使得两部分面积相等。（注意，这样的切割必然经过饼干的中心。）通过这种方式切割后产生的两块新饼干不能再次切割。\n\n如果 Mr. Maillard 做出最优决策，他能得到不超过 $\\mathbf{P}$ 的最大周长和是多少？", "inputFormat": "输入的第一行包含测试用例数 $\\mathbf{T}$。接下来有 $\\mathbf{T}$ 组测试数据。每组测试数据第一行为两个整数 $\\mathbf{N}$ 和 $\\mathbf{P}$，分别表示饼干的数量和期望的周长总和（单位：毫米）。接下来的 $\\mathbf{N}$ 行，每行包含两个整数 $\\mathbf{W}_{\\mathbf{i}}$ 和 $\\mathbf{H}_{\\mathbf{i}}$，分别表示第 $i$ 块饼干的宽和高（单位：毫米）。", "outputFormat": "对于每组测试数据，输出一行，格式为 `Case #x: y`，其中 $x$ 是测试用例编号（从 1 开始），$y$ 是所有饼干（切割后）的最大可能周长和（单位：毫米），且不超过 $\\mathbf{P}$。如果你的答案与正确答案的绝对误差或相对误差不超过 $10^{-6}$，则视为正确。关于误差的解释及可接受的实数格式，请参见 FAQ。", "hint": "**样例解释**\n\n注意，最后一个样例不会出现在测试集 1 中。\n\n样例 1 中，只有一块边长为 1 的正方形饼干。Mr. Maillard 可以从一个角到对角线上的另一个角切割，得到两个直角三角形，每个三角形的边长为 1、1 和 $\\sqrt 2$。此时周长和为 $4+2 \\times \\sqrt 2$，小于 $\\mathbf{P}=7$，但无法更接近。\n\n样例 2 中，Mr. Maillard 可以沿着第一块饼干的长边切割，得到两个 $25 \\times 120$ 的矩形，第二块保持不变。总周长为 $580+340=920$，正好等于 $\\mathbf{P}$。\n\n样例 3 中，Mr. Maillard 可以将饼干切割成两个梯形，每个梯形的边长为 $2, 4, 5, 5$。此时新的周长和为 $32$，正好等于 $\\mathbf{P}$。\n\n样例 4 中，初始周长和正好等于 $\\mathbf{P}$，因此不需要切割。\n\n**数据范围**\n\n- $1 \\leqslant \\mathbf{T} \\leqslant 100$。\n- $1 \\leqslant \\mathbf{N} \\leqslant 100$。\n- $1 \\leqslant \\mathbf{W}_{\\mathbf{i}} \\leqslant 250$，对于所有 $i$。\n- $1 \\leqslant \\mathbf{H}_{\\mathbf{i}} \\leqslant 250$，对于所有 $i$。\n- $\\mathbf{P} \\geqslant 2 \\times$ 所有 $\\left(\\mathbf{W}_{\\mathbf{i}}+\\mathbf{H}_{\\mathbf{i}}\\right)$ 的和。（$\\mathbf{P}$ 至少等于所有饼干未切割时的周长和。）\n- $\\mathbf{P} \\leqslant 10^{8}$。\n\n**测试集 1（14 分，可见）**\n\n- $\\mathbf{W}_{\\mathbf{i}}=\\mathbf{W}_{\\mathbf{j}}$，对于所有 $i$ 和 $j$。\n- $\\mathbf{H}_{\\mathbf{i}}=\\mathbf{H}_{\\mathbf{j}}$，对于所有 $i$ 和 $j$。\n- （所有给定的饼干尺寸都相同。）\n\n**测试集 2（29 分，隐藏）**\n\n- 除一般限制外无其他限制。（特别地，给定的饼干尺寸不一定都相同。）\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13139", "type": "P", "difficulty": 4, "samples": [["4\n3 2\n1 1\n10 3\n1 3 2\n6 2\n3 1\n9 8\n1 1 1 1 1 1 1 1", "Case #1: 100\nCase #2: 100\nCase #3: 101\nCase #4: 99"]], "limits": {"time": [10000, 10000, 10000], "memory": [1048576, 1048576, 1048576]}, "tags": ["贪心", "2018", "Google Code Jam"], "title": "[GCJ 2018 #1B] Rounding Error", "background": "", "description": "To finally settle the age-old question of which programming language is the best, you are asking a total of $\\mathbf{N}$ people to tell you their favorite language. This is an open-ended question: each person is free to name any language, and there are infinitely many languages in the world.\n\nSome people have already responded, and you have gathered this information as a list of counts. For example, 1 2 means that you have asked 3 people so far, and one picked a particular language, and the other two picked some other language.\n\nYou plan to publish the results in a table listing each language and the percentage of people who picked it. You will round each percentage to the nearest integer, rounding up any percentage with a decimal part equal to or greater than 0.5. So, for example, $12.5 \\%$ would round up to $13 \\%, 99.5 \\%$ would round up to $100 \\%$, and $12.4999 \\%$ would round down to $12 \\%$.\n\nIn surveys like this, sometimes the rounded percentages do not add up to exactly 100. After you are done surveying the remaining people, what is the largest value that the rounded percentages could possibly add up to?", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow; each consists of two lines. The first line consists of two integers $\\mathbf{N}$ and $\\mathbf{L}$ : the total number of people in the survey, and the total number of different languages represented among the people who have already responded. The second line consists of $\\mathbf{L}$ integers $\\mathbf{C}_{\\mathbf{i}}$; the $i$-th of these is the number of people who said that the $i$-th of the represented languages was their favorite.\n", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the largest value that the percentages could possibly add up to, as described above.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, two people have already responded, and they have chosen different languages. One person has not yet responded. If that person chooses a third language, then the rounded percentages will add up to $33+33+33=99$. However, if that person chooses one of the already-chosen languages, then the rounded percentages will add up to $67+33=100$. So 100 is the maximum possible sum.\n\nIn Sample Case #2, regardless of what the other four people choose, the percentages for the various languages will always be exact multiples of 10 that do not need to be rounded, and they will add up to exactly 100 .\n\nIn Sample Case #3, one optimal scenario is as follows: each of the remaining two people chooses an unchosen language, so the rounded percentages add up to $50+17+17+17=101$.\n\nIn Sample Case #4, whether or not the remaining person chooses an already-chosen language, the rounded percentages will add up to $99$.\n\n**Limits**\n\n- $1 \\leqslant \\mathbf{T} \\leqslant 100$.\n- $1 \\leqslant \\mathbf{L}<\\mathbf{N}$.\n- $1 \\leqslant \\mathbf{C}_{\\mathbf{i}}$, for all $i$.\n- The sum of all $\\mathbf{C}_{\\mathbf{i}}$ values $<\\mathbf{N}$.\n\n**Test set 1 (5 Pts, Visible)**\n\n- $2 \\leqslant \\mathbf{N} \\leqslant 25$.\n\n**Test set 2 (9 Pts, Visible)**\n\n- $2 \\leqslant \\mathbf{N} \\leqslant 250$.\n\n**Test set 3 (11 Pts, Hidden)**\n\n- $2 \\leqslant \\mathbf{N} \\leqslant 10^{5}$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #1B] Rounding Error", "background": "", "description": "To finally settle the age-old question of which programming language is the best, you are asking a total of $\\mathbf{N}$ people to tell you their favorite language. This is an open-ended question: each person is free to name any language, and there are infinitely many languages in the world.\n\nSome people have already responded, and you have gathered this information as a list of counts. For example, 1 2 means that you have asked 3 people so far, and one picked a particular language, and the other two picked some other language.\n\nYou plan to publish the results in a table listing each language and the percentage of people who picked it. You will round each percentage to the nearest integer, rounding up any percentage with a decimal part equal to or greater than 0.5. So, for example, $12.5 \\%$ would round up to $13 \\%, 99.5 \\%$ would round up to $100 \\%$, and $12.4999 \\%$ would round down to $12 \\%$.\n\nIn surveys like this, sometimes the rounded percentages do not add up to exactly 100. After you are done surveying the remaining people, what is the largest value that the rounded percentages could possibly add up to?", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow; each consists of two lines. The first line consists of two integers $\\mathbf{N}$ and $\\mathbf{L}$ : the total number of people in the survey, and the total number of different languages represented among the people who have already responded. The second line consists of $\\mathbf{L}$ integers $\\mathbf{C}_{\\mathbf{i}}$; the $i$-th of these is the number of people who said that the $i$-th of the represented languages was their favorite.\n", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the largest value that the percentages could possibly add up to, as described above.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, two people have already responded, and they have chosen different languages. One person has not yet responded. If that person chooses a third language, then the rounded percentages will add up to $33+33+33=99$. However, if that person chooses one of the already-chosen languages, then the rounded percentages will add up to $67+33=100$. So 100 is the maximum possible sum.\n\nIn Sample Case #2, regardless of what the other four people choose, the percentages for the various languages will always be exact multiples of 10 that do not need to be rounded, and they will add up to exactly 100 .\n\nIn Sample Case #3, one optimal scenario is as follows: each of the remaining two people chooses an unchosen language, so the rounded percentages add up to $50+17+17+17=101$.\n\nIn Sample Case #4, whether or not the remaining person chooses an already-chosen language, the rounded percentages will add up to $99$.\n\n**Limits**\n\n- $1 \\leqslant \\mathbf{T} \\leqslant 100$.\n- $1 \\leqslant \\mathbf{L}<\\mathbf{N}$.\n- $1 \\leqslant \\mathbf{C}_{\\mathbf{i}}$, for all $i$.\n- The sum of all $\\mathbf{C}_{\\mathbf{i}}$ values $<\\mathbf{N}$.\n\n**Test set 1 (5 Pts, Visible)**\n\n- $2 \\leqslant \\mathbf{N} \\leqslant 25$.\n\n**Test set 2 (9 Pts, Visible)**\n\n- $2 \\leqslant \\mathbf{N} \\leqslant 250$.\n\n**Test set 3 (11 Pts, Hidden)**\n\n- $2 \\leqslant \\mathbf{N} \\leqslant 10^{5}$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #1B] Rounding Error", "background": null, "description": "为了最终解决“哪种编程语言最好”这一由来已久的问题，你打算询问总共 $N$ 个人，让他们告诉你自己最喜欢的语言。这是一个开放式问题：每个人都可以自由选择任何一种语言，世界上的语言数量是无限的。\n\n有些人已经作出了回应，你已经将这些信息整理成了一个计数列表。例如，1 2 表示你目前已经询问了 3 个人，其中一人选择了一种特定的语言，另外两人选择了另一种语言。\n\n你打算将结果以表格的形式公布，列出每种语言以及选择它的人所占的百分比。你会将每个百分比四舍五入到最接近的整数，如果小数部分大于等于 0.5，则向上取整。例如，$12.5\\%$ 会四舍五入为 $13\\%$，$99.5\\%$ 会四舍五入为 $100\\%$，$12.4999\\%$ 会四舍五入为 $12\\%$。\n\n在这种调查中，有时四舍五入后的百分比之和并不一定正好等于 100。请问，在你完成对剩余人员的调查后，四舍五入后的百分比之和最大可能是多少？", "inputFormat": "输入的第一行是测试用例的数量 $T$。接下来有 $T$ 组测试数据，每组包含两行。第一行包含两个整数 $N$ 和 $L$，分别表示调查的总人数，以及已经有回应的不同语言的数量。第二行包含 $L$ 个整数 $C_i$，第 $i$ 个数表示有 $C_i$ 个人选择了第 $i$ 种已出现的语言。", "outputFormat": "对于每个测试用例，输出一行，格式为 `Case #x: y`，其中 $x$ 是测试用例编号（从 1 开始），$y$ 是四舍五入后的百分比之和的最大可能值。", "hint": "**样例解释**\n\n在样例 1 中，已有两人作答，且选择了不同的语言。还有一人未作答。如果这人选择第三种语言，则四舍五入后的百分比之和为 $33+33+33=99$。但如果这人选择了已出现的某种语言，则四舍五入后的百分比之和为 $67+33=100$。因此最大可能为 100。\n\n在样例 2 中，无论剩下的四人如何选择，各语言的百分比总是 10 的整数倍，无需四舍五入，总和始终为 100。\n\n在样例 3 中，一种最优情况是：剩下的两人各自选择一种未出现的语言，则四舍五入后的百分比之和为 $50+17+17+17=101$。\n\n在样例 4 中，无论剩下的一人选择已出现的语言与否，四舍五入后的百分比之和都为 99。\n\n**数据范围**\n\n- $1 \\leqslant T \\leqslant 100$。\n- $1 \\leqslant L < N$。\n- 对所有 $i$，$1 \\leqslant C_i$。\n- 所有 $C_i$ 之和 $< N$。\n\n**测试点 1（5 分，可见）**\n\n- $2 \\leqslant N \\leqslant 25$。\n\n**测试点 2（9 分，可见）**\n\n- $2 \\leqslant N \\leqslant 250$。\n\n**测试点 3（11 分，隐藏）**\n\n- $2 \\leqslant N \\leqslant 10^{5}$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13140", "type": "P", "difficulty": 5, "samples": [["3\n1\n1 1 1\n5\n2 7 12\n6 3 11\n8 10 1\n11 11 12\n13 9 14\n5\n1 3 3\n2 2 2\n3 1 1\n4 2 2\n5 3 3", "Case #1: 1 1\nCase #2: 3 2\nCase #3: 5 1"]], "limits": {"time": [10000, 10000], "memory": [1048576, 1048576]}, "tags": ["动态规划 DP", "2018", "双指针 two-pointer", "Google Code Jam"], "title": "[GCJ 2018 #1B] Mysterious Road Signs", "background": "", "description": "The town of Signfield is on a perfectly straight and infinitely long road running from west to east. Along that road, there is a sequence of $\\mathbf{S}$ mysterious road signs with numbers on both sides. The $i$-th sign (numbered in order from west to east) is at a point $\\mathbf{D}_{\\mathbf{i}}$ kilometers east of Signfield, and has a number $\\mathbf{A}_{\\mathbf{i}}$ on the west-facing side and a number $\\mathbf{B}_{\\mathbf{i}}$ on the east-facing side.\n\nNobody in Signfield knows what these signs are trying to say. You think that the numbers on the west sides of the signs are intended for drivers traveling east, and that they represent distances to some particular destination. Similarly, you think that the numbers on the east sides of the signs are for drivers traveling west, and that they represent distances to some particular destination. You suspect that not all of the signs may be consistent with this theory, though.\n\nTo start testing your theory, you are interested in finding valid sets of signs that obey the following rules:\n\n* The set is a contiguous subsequence of the sequence of all road signs. (The entire sequence also counts as a contiguous subsequence.)\n* There exist locations $\\mathrm{M}$ and $\\mathrm{N}$ kilometers east of Signfield, where $\\mathrm{M}$ and $\\mathrm{N}$ are (not necessarily positive and not necessarily distinct) numbers, such that for every sign in that set, at least one of the following is true:\n    * $\\mathbf{D}_{\\mathbf{i}}+\\mathbf{A}_{\\mathbf{i}}=\\mathbf{M}$.\n    * $\\mathbf{D}_{\\mathbf{i}}-\\mathbf{B}_{\\mathbf{i}}=\\mathbf{N}$.\n\nWhat is the largest possible number of signs in a valid set as described above, and how many different valid sets of that size are there?", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow. Each begins with one line containing one integer $\\mathbf{S}$ : the number of road signs. Then, $\\mathbf{S}$ more lines follow. The $i$-th of these lines represents the $i$-th sign (in west-to-east order), and contains three integers $\\mathbf{D}_{\\mathbf{i}}, \\mathbf{A}_{\\mathbf{i}}$, and $\\mathbf{B}_{\\mathbf{i}}$ : the sign's distance (in kilometers) east of Signfield, the number on its west side, and the number on its east side.\n", "outputFormat": "For each test case, output one line containing `Case #x: y z`, where $x$ is the test case number (starting from 1), and $y$ and $z$ are the largest possible number of signs in a valid set and the number of valid sets of that size, as described in the problem statement.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, there is only one sign. If we choose just that sign as our set, there are many possible values of $\\mathrm{M}$ and $\\mathrm{N}$ that work - for example:\n\n* $\\mathrm{M}=2$ and $\\mathrm{N}=0$\n* $\\mathrm{M}=1$ and $\\mathrm{N}=0$ (remember that each sign only needs to be correct for one of its values; also, $\\mathrm{M}$ and $\\mathrm{N}$ might be in the same place as one or more signs, or Signfield itself)\n* $\\mathrm{M}=2$ and $\\mathrm{N}=-12345$ ( $\\mathrm{N}$ might be west of Signfield)\n* $\\mathrm{M}=0$ and $\\mathrm{N}=0$ ( $\\mathrm{M}$ and $\\mathrm{N}$ are not necessarily distinct)\n* $\\mathrm{M}=2$ and $\\mathrm{N}=3$ ( $\\mathrm{N}$ might be east of $\\mathrm{M}$)\n\nSo, the set consisting of just that one sign is valid. That is the only set of that length, so the answer is 11 .\n\nIn Sample Case #2, note that the first, second, fourth, and fifth signs would be consistent with $\\mathrm{M}=9$ and $\\mathrm{N}=-1$, but they do not form a contiguous subsequence. (The 1 on the back of the third sign cannot be used as if it were on the front.) As it turns out, there is no valid set of four signs. There are two different valid sets of three signs. Note that although there are two different $\\mathrm{M} / \\mathrm{N}$ pairs that make the second set of three signs valid, that set counts only once:\n\n* the first, second, and third signs, with $\\mathrm{M}=9$ and $\\mathrm{N}=7$\n* the third, fourth, and fifth signs, with $\\mathrm{M}=18$ and $\\mathrm{N}=-1$ or with $\\mathrm{M}=22$ and $\\mathrm{N}=7$\n\nIn Sample Case #3, the entire sequence is a valid set, with $\\mathrm{M}=4$ and $\\mathrm{N}=2$.\n\n**Limits**\n\n- $1 \\leqslant \\mathbf{T} \\leqslant 60$.\n- $1 \\leqslant \\mathbf{D}_{\\mathbf{i}} \\leqslant 10^{6}$, for all $i$.\n- $\\mathbf{D}_{\\mathbf{i}}<\\mathbf{D}_{\\mathbf{j}}$, for all $i<j$.\n- $1 \\leqslant \\mathbf{A}_{\\mathbf{i}} \\leqslant 10^{6}$, for all $i$.\n- $1 \\leqslant \\mathbf{B}_{\\mathbf{i}} \\leqslant 10^{6}$, for all $i$.\n\n**Test set 1 (10 Pts, Visible)**\n\n- $1 \\leqslant \\mathbf{S} \\leqslant 100$ for all test cases.\n\n**Test set 2 (20 Pts, Hidden)**\n\n- $1 \\leqslant \\mathbf{S} \\leqslant 100$ for all but 3 test cases.\n- $\\mathbf{S}=10^{5}$ for 3 test cases.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #1B] Mysterious Road Signs", "background": "", "description": "The town of Signfield is on a perfectly straight and infinitely long road running from west to east. Along that road, there is a sequence of $\\mathbf{S}$ mysterious road signs with numbers on both sides. The $i$-th sign (numbered in order from west to east) is at a point $\\mathbf{D}_{\\mathbf{i}}$ kilometers east of Signfield, and has a number $\\mathbf{A}_{\\mathbf{i}}$ on the west-facing side and a number $\\mathbf{B}_{\\mathbf{i}}$ on the east-facing side.\n\nNobody in Signfield knows what these signs are trying to say. You think that the numbers on the west sides of the signs are intended for drivers traveling east, and that they represent distances to some particular destination. Similarly, you think that the numbers on the east sides of the signs are for drivers traveling west, and that they represent distances to some particular destination. You suspect that not all of the signs may be consistent with this theory, though.\n\nTo start testing your theory, you are interested in finding valid sets of signs that obey the following rules:\n\n* The set is a contiguous subsequence of the sequence of all road signs. (The entire sequence also counts as a contiguous subsequence.)\n* There exist locations $\\mathrm{M}$ and $\\mathrm{N}$ kilometers east of Signfield, where $\\mathrm{M}$ and $\\mathrm{N}$ are (not necessarily positive and not necessarily distinct) numbers, such that for every sign in that set, at least one of the following is true:\n    * $\\mathbf{D}_{\\mathbf{i}}+\\mathbf{A}_{\\mathbf{i}}=\\mathbf{M}$.\n    * $\\mathbf{D}_{\\mathbf{i}}-\\mathbf{B}_{\\mathbf{i}}=\\mathbf{N}$.\n\nWhat is the largest possible number of signs in a valid set as described above, and how many different valid sets of that size are there?", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow. Each begins with one line containing one integer $\\mathbf{S}$ : the number of road signs. Then, $\\mathbf{S}$ more lines follow. The $i$-th of these lines represents the $i$-th sign (in west-to-east order), and contains three integers $\\mathbf{D}_{\\mathbf{i}}, \\mathbf{A}_{\\mathbf{i}}$, and $\\mathbf{B}_{\\mathbf{i}}$ : the sign's distance (in kilometers) east of Signfield, the number on its west side, and the number on its east side.\n", "outputFormat": "For each test case, output one line containing `Case #x: y z`, where $x$ is the test case number (starting from 1), and $y$ and $z$ are the largest possible number of signs in a valid set and the number of valid sets of that size, as described in the problem statement.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, there is only one sign. If we choose just that sign as our set, there are many possible values of $\\mathrm{M}$ and $\\mathrm{N}$ that work - for example:\n\n* $\\mathrm{M}=2$ and $\\mathrm{N}=0$\n* $\\mathrm{M}=1$ and $\\mathrm{N}=0$ (remember that each sign only needs to be correct for one of its values; also, $\\mathrm{M}$ and $\\mathrm{N}$ might be in the same place as one or more signs, or Signfield itself)\n* $\\mathrm{M}=2$ and $\\mathrm{N}=-12345$ ( $\\mathrm{N}$ might be west of Signfield)\n* $\\mathrm{M}=0$ and $\\mathrm{N}=0$ ( $\\mathrm{M}$ and $\\mathrm{N}$ are not necessarily distinct)\n* $\\mathrm{M}=2$ and $\\mathrm{N}=3$ ( $\\mathrm{N}$ might be east of $\\mathrm{M}$)\n\nSo, the set consisting of just that one sign is valid. That is the only set of that length, so the answer is 11 .\n\nIn Sample Case #2, note that the first, second, fourth, and fifth signs would be consistent with $\\mathrm{M}=9$ and $\\mathrm{N}=-1$, but they do not form a contiguous subsequence. (The 1 on the back of the third sign cannot be used as if it were on the front.) As it turns out, there is no valid set of four signs. There are two different valid sets of three signs. Note that although there are two different $\\mathrm{M} / \\mathrm{N}$ pairs that make the second set of three signs valid, that set counts only once:\n\n* the first, second, and third signs, with $\\mathrm{M}=9$ and $\\mathrm{N}=7$\n* the third, fourth, and fifth signs, with $\\mathrm{M}=18$ and $\\mathrm{N}=-1$ or with $\\mathrm{M}=22$ and $\\mathrm{N}=7$\n\nIn Sample Case #3, the entire sequence is a valid set, with $\\mathrm{M}=4$ and $\\mathrm{N}=2$.\n\n**Limits**\n\n- $1 \\leqslant \\mathbf{T} \\leqslant 60$.\n- $1 \\leqslant \\mathbf{D}_{\\mathbf{i}} \\leqslant 10^{6}$, for all $i$.\n- $\\mathbf{D}_{\\mathbf{i}}<\\mathbf{D}_{\\mathbf{j}}$, for all $i<j$.\n- $1 \\leqslant \\mathbf{A}_{\\mathbf{i}} \\leqslant 10^{6}$, for all $i$.\n- $1 \\leqslant \\mathbf{B}_{\\mathbf{i}} \\leqslant 10^{6}$, for all $i$.\n\n**Test set 1 (10 Pts, Visible)**\n\n- $1 \\leqslant \\mathbf{S} \\leqslant 100$ for all test cases.\n\n**Test set 2 (20 Pts, Hidden)**\n\n- $1 \\leqslant \\mathbf{S} \\leqslant 100$ for all but 3 test cases.\n- $\\mathbf{S}=10^{5}$ for 3 test cases.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #1B] Mysterious Road Signs", "background": null, "description": "Signfield 镇位于一条完全笔直且无限延伸的东西向公路上。在这条公路上，依次排列着 $\\mathbf{S}$ 个神秘的路标，每个路标的两面都写有数字。第 $i$ 个路标（从西到东编号）位于 Signfield 东侧 $\\mathbf{D}_{\\mathbf{i}}$ 公里处，其西侧写有数字 $\\mathbf{A}_{\\mathbf{i}}$，东侧写有数字 $\\mathbf{B}_{\\mathbf{i}}$。\n\nSignfield 的居民都不知道这些路标想表达什么。你认为，路标西侧的数字是给向东行驶的司机看的，代表到某个特定目的地的距离。同理，你认为路标东侧的数字是给向西行驶的司机看的，也代表到某个特定目的地的距离。不过，你怀疑并不是所有路标都与这个理论一致。\n\n为了验证你的理论，你希望找到满足以下规则的有效路标集合：\n\n- 该集合是所有路标序列的一个连续子序列（整个序列也算作连续子序列）。\n- 存在两个位置 $\\mathrm{M}$ 和 $\\mathrm{N}$（均为 Signfield 东侧的公里数，$\\mathrm{M}$ 和 $\\mathrm{N}$ 不一定为正数，也不一定不同），使得对于该集合中的每一个路标，至少满足下列条件之一：\n    - $\\mathbf{D}_{\\mathbf{i}}+\\mathbf{A}_{\\mathbf{i}}=\\mathrm{M}$。\n    - $\\mathbf{D}_{\\mathbf{i}}-\\mathbf{B}_{\\mathbf{i}}=\\mathrm{N}$。\n\n请你求出满足上述条件的有效集合中，包含路标数量的最大值，以及有多少个不同的有效集合达到该最大值。", "inputFormat": "输入的第一行是测试用例数 $\\mathbf{T}$。接下来有 $\\mathbf{T}$ 组测试数据。每组测试数据的第一行为一个整数 $\\mathbf{S}$，表示路标的数量。接下来的 $\\mathbf{S}$ 行，每行包含三个整数 $\\mathbf{D}_{\\mathbf{i}}, \\mathbf{A}_{\\mathbf{i}}, \\mathbf{B}_{\\mathbf{i}}$，分别表示第 $i$ 个路标距离 Signfield 的距离（公里）、西侧数字和东侧数字。", "outputFormat": "对于每个测试用例，输出一行，格式为 `Case #x: y z`，其中 $x$ 为测试用例编号（从 1 开始），$y$ 为有效集合中最大路标数量，$z$ 为达到该最大数量的不同有效集合个数。", "hint": "**样例解释**\n\n在样例 1 中，只有一个路标。如果我们只选择这个路标作为集合，有很多可能的 $\\mathrm{M}$ 和 $\\mathrm{N}$ 组合都是可行的，例如：\n\n- $\\mathrm{M}=2$，$\\mathrm{N}=0$\n- $\\mathrm{M}=1$，$\\mathrm{N}=0$（注意每个路标只需满足其中一个条件；$\\mathrm{M}$ 和 $\\mathrm{N}$ 可以与某些路标或 Signfield 重合）\n- $\\mathrm{M}=2$，$\\mathrm{N}=-12345$（$\\mathrm{N}$ 可以在 Signfield 西侧）\n- $\\mathrm{M}=0$，$\\mathrm{N}=0$（$\\mathrm{M}$ 和 $\\mathrm{N}$ 不一定不同）\n- $\\mathrm{M}=2$，$\\mathrm{N}=3$（$\\mathrm{N}$ 可以在 $\\mathrm{M}$ 东侧）\n\n因此，只包含该路标的集合是有效的。该长度的集合只有一个，所以答案是 1 1。\n\n在样例 2 中，注意第 1、2、4、5 个路标在 $\\mathrm{M}=9$ 和 $\\mathrm{N}=-1$ 时是成立的，但它们不是连续子序列（第 3 个路标的背面数字不能当作正面用）。实际上，没有包含 4 个路标的有效集合。有两个不同的包含 3 个路标的有效集合。注意，虽然第二个集合有两组不同的 $\\mathrm{M}/\\mathrm{N}$ 组合可以使其成立，但该集合只计数一次：\n\n- 第 1、2、3 个路标，$\\mathrm{M}=9$，$\\mathrm{N}=7$\n- 第 3、4、5 个路标，$\\mathrm{M}=18$，$\\mathrm{N}=-1$ 或 $\\mathrm{M}=22$，$\\mathrm{N}=7$\n\n在样例 3 中，整个序列是一个有效集合，$\\mathrm{M}=4$，$\\mathrm{N}=2$。\n\n**数据范围**\n\n- $1 \\leqslant \\mathbf{T} \\leqslant 60$。\n- $1 \\leqslant \\mathbf{D}_{\\mathbf{i}} \\leqslant 10^{6}$，对所有 $i$。\n- $\\mathbf{D}_{\\mathbf{i}}<\\mathbf{D}_{\\mathbf{j}}$，对所有 $i<j$。\n- $1 \\leqslant \\mathbf{A}_{\\mathbf{i}} \\leqslant 10^{6}$，对所有 $i$。\n- $1 \\leqslant \\mathbf{B}_{\\mathbf{i}} \\leqslant 10^{6}$，对所有 $i$。\n\n**测试点 1（10 分，公开）**\n\n- 所有测试用例 $1 \\leqslant \\mathbf{S} \\leqslant 100$。\n\n**测试点 2（20 分，隐藏）**\n\n- 除 3 个测试用例外，所有测试用例 $1 \\leqslant \\mathbf{S} \\leqslant 100$。\n- 有 3 个测试用例 $\\mathbf{S}=10^{5}$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13141", "type": "P", "difficulty": 5, "samples": [["3\n3\n2 3\n1 3\n1 2\n5 2 3\n5\n3 4\n3 4\n4 5\n3 5\n1 3\n0 8 6 2 4\n4\n3 4\n2 3\n2 3\n2 3\n0 1 1 0", "Case #1: 7\nCase #2: 4\nCase #3: 0"]], "limits": {"time": [5000, 5000, 5000], "memory": [1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "图论", "贪心", "2018", "二分", "递归", "Google Code Jam"], "title": "[GCJ 2018 #1B] Transmutation", "background": "", "description": "You are the most skilled alchemist of a country that considers metals such as gold, platinum, and silver to be uninteresting, but highly values lead. There are $\\mathrm{M}$ metals known in the world; lead is metal number 1 on your periodic table. Your country's leader has asked you to use the metal in the treasury to make as much lead as possible.\n\nFor each metal (including lead), you know exactly one formula that lets you create one gram of that metal by destroying one gram each of two ingredient metals. (If you are wondering about the principle of mass conservation, the other gram is lost in useless waste products.) The formulas do not work with partial grams. However, you can use each formula as often as you would like (or not at all), as long as you have the required ingredients each time.\n\nIf you make optimal choices, what is the largest total amount of lead you can end up with? Note that it is possible that you may have some metals other than lead left over after you are done.\n", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow. Each begins with one line with an integer $\\mathrm{M}$ : the number of metals known in the world. Then there are $\\mathrm{M}$ more lines with two integers $\\mathbf{R}_{\\mathbf{i} 1}$ and $\\mathbf{R}_{\\mathbf{i} 2}$ each; the $\\mathrm{i}$-th of these lines indicates that you can create one gram of metal $\\mathrm{i}$ by destroying one gram of metal $\\mathbf{R}_{\\mathbf{i} 1}$ and one gram of metal $\\mathbf{R}_{\\mathbf{i} 2}$. Finally, there is one line with $\\mathrm{M}$ integers $\\mathbf{G}_{1}, \\mathbf{G}_{2}, \\ldots, \\mathbf{G}_{\\mathbf{M}} ; \\mathbf{G}_{\\mathbf{i}}$ is the number of grams of metal $\\mathrm{i}$ in the treasury. Lead is metal 1 .", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $\\mathrm{x}$ is the test case number (starting from 1) and $\\mathrm{y}$ is the largest amount of lead, in grams, that you can end up with.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, the optimal strategy is to use $2$ grams of metals $2$ and $3$ to produce $2$ more grams of lead, for a total of $7$ grams of lead.\n\nIn Sample Case #2, the optimal strategy is to first use $2$ grams of metal $3$ and $2$ grams of metal $5$ to produce $2$ grams of metal $4$, and then use $4$ grams of metal $3$ and $4$ grams of metal $4$ to produce $4$ grams of lead. Note that it is possible for two formulas to have the same two ingredients (you just use different alchemical techniques). Also note that not every metal is necessarily an ingredient in some other formula; in this case, metal $2$ is never an ingredient.\n\nIn Sample Case #3, note that it is possible for a metal to be used to produce itself. (Sometimes the laws of alchemy may be silly!) Unfortunately, it is not possible to produce any lead in this case. Note that since formulas only work on single-gram quantities, you cannot, for example, use $0.5$ grams of each of metals $2$ and $3$ to create $0.5$ grams of metal $4$, and then use $0.5$ grams of each of metals $3$ and $4$ to create $0.5$ grams of lead.\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n- $1 \\leq \\mathbf{R_{i1}} < \\mathbf{R_{i2}} \\leq M$, for all $i$.\n\n**Test set 1 (15 Pts,Visible)**\n\n- $2 \\leq M \\leq 8$.\n- $0 \\leq \\mathbf{G_i} \\leq 8$, for all $i$.\n\n**Test set 2 (18 Pts, Hidden)**\n\n- $2 \\leq M \\leq 100$.\n- $0 \\leq \\mathbf{G_i} \\leq 100$, for all $i$.\n\n**Test set 3 (12 Pts, Hidden)**\n\n- $2 \\leq M \\leq 100$.\n- $0 \\leq \\mathbf{G_i} \\leq 10^9$, for all $i$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #1B] Transmutation", "background": "", "description": "You are the most skilled alchemist of a country that considers metals such as gold, platinum, and silver to be uninteresting, but highly values lead. There are $\\mathrm{M}$ metals known in the world; lead is metal number 1 on your periodic table. Your country's leader has asked you to use the metal in the treasury to make as much lead as possible.\n\nFor each metal (including lead), you know exactly one formula that lets you create one gram of that metal by destroying one gram each of two ingredient metals. (If you are wondering about the principle of mass conservation, the other gram is lost in useless waste products.) The formulas do not work with partial grams. However, you can use each formula as often as you would like (or not at all), as long as you have the required ingredients each time.\n\nIf you make optimal choices, what is the largest total amount of lead you can end up with? Note that it is possible that you may have some metals other than lead left over after you are done.\n", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow. Each begins with one line with an integer $\\mathrm{M}$ : the number of metals known in the world. Then there are $\\mathrm{M}$ more lines with two integers $\\mathbf{R}_{\\mathbf{i} 1}$ and $\\mathbf{R}_{\\mathbf{i} 2}$ each; the $\\mathrm{i}$-th of these lines indicates that you can create one gram of metal $\\mathrm{i}$ by destroying one gram of metal $\\mathbf{R}_{\\mathbf{i} 1}$ and one gram of metal $\\mathbf{R}_{\\mathbf{i} 2}$. Finally, there is one line with $\\mathrm{M}$ integers $\\mathbf{G}_{1}, \\mathbf{G}_{2}, \\ldots, \\mathbf{G}_{\\mathbf{M}} ; \\mathbf{G}_{\\mathbf{i}}$ is the number of grams of metal $\\mathrm{i}$ in the treasury. Lead is metal 1 .", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $\\mathrm{x}$ is the test case number (starting from 1) and $\\mathrm{y}$ is the largest amount of lead, in grams, that you can end up with.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, the optimal strategy is to use $2$ grams of metals $2$ and $3$ to produce $2$ more grams of lead, for a total of $7$ grams of lead.\n\nIn Sample Case #2, the optimal strategy is to first use $2$ grams of metal $3$ and $2$ grams of metal $5$ to produce $2$ grams of metal $4$, and then use $4$ grams of metal $3$ and $4$ grams of metal $4$ to produce $4$ grams of lead. Note that it is possible for two formulas to have the same two ingredients (you just use different alchemical techniques). Also note that not every metal is necessarily an ingredient in some other formula; in this case, metal $2$ is never an ingredient.\n\nIn Sample Case #3, note that it is possible for a metal to be used to produce itself. (Sometimes the laws of alchemy may be silly!) Unfortunately, it is not possible to produce any lead in this case. Note that since formulas only work on single-gram quantities, you cannot, for example, use $0.5$ grams of each of metals $2$ and $3$ to create $0.5$ grams of metal $4$, and then use $0.5$ grams of each of metals $3$ and $4$ to create $0.5$ grams of lead.\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n- $1 \\leq \\mathbf{R_{i1}} < \\mathbf{R_{i2}} \\leq M$, for all $i$.\n\n**Test set 1 (15 Pts,Visible)**\n\n- $2 \\leq M \\leq 8$.\n- $0 \\leq \\mathbf{G_i} \\leq 8$, for all $i$.\n\n**Test set 2 (18 Pts, Hidden)**\n\n- $2 \\leq M \\leq 100$.\n- $0 \\leq \\mathbf{G_i} \\leq 100$, for all $i$.\n\n**Test set 3 (12 Pts, Hidden)**\n\n- $2 \\leq M \\leq 100$.\n- $0 \\leq \\mathbf{G_i} \\leq 10^9$, for all $i$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #1B] Transmutation", "background": null, "description": "你是一个国家中最技艺高超的炼金术士，这个国家认为黄金、铂金和白银等金属毫无趣味，却极为珍视铅。在已知的 $\\mathrm{M}$ 种金属中，铅在你的元素周期表上编号为 1。国家的领袖要求你利用国库中的金属，尽可能多地制造铅。\n\n对于每种金属（包括铅），你都知道恰好有一种配方，可以通过消耗两种原料金属各一克来制造该金属一克。（如果你在思考质量守恒定律，另一克会变成无用的废弃物。）配方不能用部分克数操作。然而，只要你有足够的原料，每种配方你都可以使用任意多次（也可以不用）。\n\n如果你做出最优选择，最终你最多能得到多少克铅？注意，操作结束后，可能还会剩下一些非铅金属。", "inputFormat": "输入的第一行为测试用例数 $\\mathbf{T}$。接下来有 $\\mathbf{T}$ 组测试用例。每组测试用例的第一行为一个整数 $\\mathrm{M}$，表示已知的金属种类数。接下来有 $\\mathrm{M}$ 行，每行包含两个整数 $\\mathbf{R}_{\\mathbf{i} 1}$ 和 $\\mathbf{R}_{\\mathbf{i} 2}$，表示可以通过消耗 $\\mathbf{R}_{\\mathbf{i} 1}$ 号金属一克和 $\\mathbf{R}_{\\mathbf{i} 2}$ 号金属一克，制造出 $\\mathrm{i}$ 号金属一克。最后一行包含 $\\mathrm{M}$ 个整数 $\\mathbf{G}_{1}, \\mathbf{G}_{2}, \\ldots, \\mathbf{G}_{\\mathbf{M}}$，其中 $\\mathbf{G}_{\\mathbf{i}}$ 表示国库中 $\\mathrm{i}$ 号金属的克数。铅为 1 号金属。", "outputFormat": "对于每组测试用例，输出一行，格式为 `Case #x: y`，其中 $\\mathrm{x}$ 为测试用例编号（从 1 开始），$\\mathrm{y}$ 为你最终能获得的最大铅的克数。", "hint": "**样例解释**\n\n样例 1 中，最优策略是用 2 克 2 号金属和 2 克 3 号金属制造 2 克铅，最终共得到 7 克铅。\n\n样例 2 中，最优策略是先用 2 克 3 号金属和 2 克 5 号金属制造 2 克 4 号金属，然后用 4 克 3 号金属和 4 克 4 号金属制造 4 克铅。注意，可能有两种配方使用相同的两种原料金属（只是炼金术手法不同）。也要注意，并不是每种金属都一定会作为其他配方的原料；在本例中，2 号金属从未作为原料。\n\n样例 3 中，注意某种金属可能可以用来制造自身。（有时候炼金术的规律也很奇怪！）但在本例中无法制造出任何铅。注意，由于配方只能以整数克操作，不能用 0.5 克 2 号金属和 0.5 克 3 号金属制造 0.5 克 4 号金属，再用 0.5 克 3 号金属和 0.5 克 4 号金属制造 0.5 克铅。\n\n**数据范围**\n\n- $1 \\leq T \\leq 100$。\n- 对所有 $i$，$1 \\leq \\mathbf{R_{i1}} < \\mathbf{R_{i2}} \\leq M$。\n\n**测试点 1（15 分，可见）**\n\n- $2 \\leq M \\leq 8$。\n- 对所有 $i$，$0 \\leq \\mathbf{G_i} \\leq 8$。\n\n**测试点 2（18 分，隐藏）**\n\n- $2 \\leq M \\leq 100$。\n- 对所有 $i$，$0 \\leq \\mathbf{G_i} \\leq 100$。\n\n**测试点 3（12 分，隐藏）**\n\n- $2 \\leq M \\leq 100$。\n- 对所有 $i$，$0 \\leq \\mathbf{G_i} \\leq 10^9$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13142", "type": "P", "difficulty": 3, "samples": [["5\n4 1\nA\nB\nC\nD\n4 2\nWW\nAA\nSS\nDD\n4 2\nAA\nAB\nBA\nBB\n3 4\nCAKE\nTORN\nSHOW\n5 7\nHELPIAM\nTRAPPED\nINSIDEA\nCODEJAM\nFACTORY", "Case #1: -\nCase #2: WA\nCase #3: -\nCase #4: CORN\nCase #5: HOLIDAY"]], "limits": {"time": [15000, 15000], "memory": [1048576, 1048576]}, "tags": ["2018", "Special Judge", "字典树 Trie", "Google Code Jam"], "title": "[GCJ 2018 #1C] A Whole New Word", "background": "", "description": "Vincent and Desta are childhood friends. Today, Vincent is showing $N$ distinct $L$-letter words to Desta by using some letter tiles. Each tile contains one uppercase English alphabet letter, and one number between $1$ and $L$. A word consists of the letters spelled out by $L$ tiles with numbers from $1$ through $L$, in order. (Vincent's words are not necessarily real English words.)\n\nFor example, if Vincent has $N = 3$ words with $L = 4$, and the words are $\\{\\text{CAKE}, \\text{TORN}, \\text{SHOW}\\}$, then Vincent must show the following to Desta:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ve1i8p4m.png)\n\nDesta feels that creating words must be easy, and he wants to create a new word that obeys the rules above and is not one of Vincent's existing words. However, Desta does not have any tiles of his own, so he must use some of Vincent's tiles.\n\nFor instance, if Vincent has the words from the previous example, then Desta can make a new word such as $\\text{CORN}$ or $\\text{SAKE}$ or $\\text{CHRE}$ (Desta's words are also not necessarily real English words). Each of the example is illustrated in the following image:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0rhou6na.png)\n\nNote that the three rows in the image above are independent. Desta only needs to make one new word.\n\nHowever, in the above example, Desta cannot make WAKE, for example, because there is no $\\text W$ tile with a number $1$. Nor can he make coo, since it is not the right length.\n\nNotice that it may be impossible for Desta to make a new word. For example, if Vincent has only one word, then Desta cannot make anything new. Or, if Vincent has the words $\\{\\text{AA}, \\text{AB}, \\text{BA}, \\text{BB}\\}$, then any word that Desta can form is already present.\n\nHelp Desta to choose a word that he can show to Vincent using only the tiles used by Vincent, or indicate that it is impossible to do so.", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line with two integers $N$ and $L$: the number of Vincent's words, and the length of each word. Then, $N$ more lines follow. The $i$-th of these lines contains a string of $L$ uppercase English letters representing the $i$-th of Vincent's words.\n", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is a valid word to be chosen by Desta, or - (a single dash character of ASCII value 45) if there is no valid word to be chosen by Desta. If there is more than one valid word that Desta can make, you can output any of them.", "hint": "**Sample Explanation**\n\nNote that the last two sample cases would not appear in test set 1.\n\nIn Sample Case #1, the only words that can be constructed using the tiles used by Vincent are A, B, C, D. However, all of those words already appear in Vincent's list of words, so Desta is not allowed to choose them.\n\nIn Sample Case #2, there are $12$ possible new words that Desta can make, one of which is $\\text{WA}$.\n\nSample Case #3 was explained in the problem description above; there is no new word that Desta can make.\n\nSample Case #4 was explained in the problem description above; other answers such as $\\text{SAKF}$ are possible.\n\nIn Sample Case #5, other answers such as $\\text{TRAPJAM}$ are possible.\n\n**Limits**\n\n- $1 \\leqslant T \\leqslant 100$.\n- No two of Vincent's words are the same.\n\n**Test set 1 (11 Pts, Visible)**\n\n- $1 \\leqslant N \\leqslant 26^{2}$.\n- $1 \\leqslant L \\leqslant 2$.\n\n**Test set 2 (17 Pts, Hidden)**\n\n- $1 \\leqslant N \\leqslant 2000$.\n- $1 \\leqslant L \\leqslant 10$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #1C] A Whole New Word", "background": "", "description": "Vincent and Desta are childhood friends. Today, Vincent is showing $N$ distinct $L$-letter words to Desta by using some letter tiles. Each tile contains one uppercase English alphabet letter, and one number between $1$ and $L$. A word consists of the letters spelled out by $L$ tiles with numbers from $1$ through $L$, in order. (Vincent's words are not necessarily real English words.)\n\nFor example, if Vincent has $N = 3$ words with $L = 4$, and the words are $\\{\\text{CAKE}, \\text{TORN}, \\text{SHOW}\\}$, then Vincent must show the following to Desta:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ve1i8p4m.png)\n\nDesta feels that creating words must be easy, and he wants to create a new word that obeys the rules above and is not one of Vincent's existing words. However, Desta does not have any tiles of his own, so he must use some of Vincent's tiles.\n\nFor instance, if Vincent has the words from the previous example, then Desta can make a new word such as $\\text{CORN}$ or $\\text{SAKE}$ or $\\text{CHRE}$ (Desta's words are also not necessarily real English words). Each of the example is illustrated in the following image:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0rhou6na.png)\n\nNote that the three rows in the image above are independent. Desta only needs to make one new word.\n\nHowever, in the above example, Desta cannot make WAKE, for example, because there is no $\\text W$ tile with a number $1$. Nor can he make coo, since it is not the right length.\n\nNotice that it may be impossible for Desta to make a new word. For example, if Vincent has only one word, then Desta cannot make anything new. Or, if Vincent has the words $\\{\\text{AA}, \\text{AB}, \\text{BA}, \\text{BB}\\}$, then any word that Desta can form is already present.\n\nHelp Desta to choose a word that he can show to Vincent using only the tiles used by Vincent, or indicate that it is impossible to do so.", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line with two integers $N$ and $L$: the number of Vincent's words, and the length of each word. Then, $N$ more lines follow. The $i$-th of these lines contains a string of $L$ uppercase English letters representing the $i$-th of Vincent's words.\n", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is a valid word to be chosen by Desta, or - (a single dash character of ASCII value 45) if there is no valid word to be chosen by Desta. If there is more than one valid word that Desta can make, you can output any of them.", "hint": "**Sample Explanation**\n\nNote that the last two sample cases would not appear in test set 1.\n\nIn Sample Case #1, the only words that can be constructed using the tiles used by Vincent are A, B, C, D. However, all of those words already appear in Vincent's list of words, so Desta is not allowed to choose them.\n\nIn Sample Case #2, there are $12$ possible new words that Desta can make, one of which is $\\text{WA}$.\n\nSample Case #3 was explained in the problem description above; there is no new word that Desta can make.\n\nSample Case #4 was explained in the problem description above; other answers such as $\\text{SAKF}$ are possible.\n\nIn Sample Case #5, other answers such as $\\text{TRAPJAM}$ are possible.\n\n**Limits**\n\n- $1 \\leqslant T \\leqslant 100$.\n- No two of Vincent's words are the same.\n\n**Test set 1 (11 Pts, Visible)**\n\n- $1 \\leqslant N \\leqslant 26^{2}$.\n- $1 \\leqslant L \\leqslant 2$.\n\n**Test set 2 (17 Pts, Hidden)**\n\n- $1 \\leqslant N \\leqslant 2000$.\n- $1 \\leqslant L \\leqslant 10$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #1C] A Whole New Word", "background": null, "description": "Vincent 和 Desta 是从小一起长大的朋友。今天，Vincent 用一些字母牌向 Desta 展示了 $N$ 个不同的 $L$ 字母单词。每个字母牌上有一个大写英文字母和一个 $1$ 到 $L$ 之间的数字。一个单词由 $L$ 个数字分别为 $1$ 到 $L$ 的字母牌按顺序拼成。（Vincent 的单词不一定是真正的英文单词。）\n\n例如，如果 Vincent 有 $N = 3$ 个长度为 $L = 4$ 的单词，分别是 $\\{\\text{CAKE}, \\text{TORN}, \\text{SHOW}\\}$，那么 Vincent 必须向 Desta 展示如下内容：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ve1i8p4m.png)\n\nDesta 觉得造单词一定很简单，他想用上述规则造出一个新的单词，并且不能和 Vincent 已有的单词重复。然而，Desta 没有自己的字母牌，他只能使用 Vincent 的字母牌。\n\n例如，如果 Vincent 的单词如上例所示，Desta 可以拼出新的单词，如 $\\text{CORN}$、$\\text{SAKE}$ 或 $\\text{CHRE}$（Desta 造的单词也不一定是真正的英文单词）。每个例子如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0rhou6na.png)\n\n注意，上图的三行是独立的。Desta 只需要造出一个新单词即可。\n\n但是，在上述例子中，Desta 不能拼出 WAKE，因为没有数字为 $1$ 的 $\\text W$ 字母牌。也不能拼出 coo，因为长度不对。\n\n注意，有时 Desta 可能无法造出新单词。例如，如果 Vincent 只有一个单词，那么 Desta 无法造出任何新单词。又如，如果 Vincent 的单词为 $\\{\\text{AA}, \\text{AB}, \\text{BA}, \\text{BB}\\}$，那么 Desta 能拼出的所有单词都已在 Vincent 的单词列表中。\n\n请帮助 Desta 选择一个他能用 Vincent 的字母牌拼出的新单词，或者指出无法拼出新单词。", "inputFormat": "输入的第一行是测试用例数 $T$。接下来有 $T$ 组测试数据。每组测试数据的第一行包含两个整数 $N$ 和 $L$，分别表示 Vincent 的单词数和每个单词的长度。接下来的 $N$ 行，每行是一个长度为 $L$ 的大写英文字母字符串，表示 Vincent 的第 $i$ 个单词。", "outputFormat": "对于每组测试数据，输出一行 `Case #x: y`，其中 $x$ 是测试用例编号（从 1 开始），$y$ 是 Desta 能拼出的一个合法新单词，或者如果无法拼出则输出一个单独的短横线 `-`（ASCII 码 45）。如果有多个合法答案，可以输出任意一个。", "hint": "**样例解释**\n\n注意，最后两个样例不会出现在测试集 1 中。\n\n样例 1 中，只能用 Vincent 的字母牌拼出 A、B、C、D 这四个单词，但这些单词都已在 Vincent 的单词列表中，所以 Desta 不能选择它们。\n\n样例 2 中，有 $12$ 个可能的新单词可以拼出，其中之一是 $\\text{WA}$。\n\n样例 3 已在题目描述中解释，Desta 无法拼出新单词。\n\n样例 4 已在题目描述中解释，也可以输出如 $\\text{SAKF}$ 等其它答案。\n\n样例 5 也可以输出如 $\\text{TRAPJAM}$ 等其它答案。\n\n**数据范围**\n\n- $1 \\leqslant T \\leqslant 100$。\n- Vincent 的单词互不相同。\n\n**测试集 1（11 分，可见）**\n\n- $1 \\leqslant N \\leqslant 26^{2}$。\n- $1 \\leqslant L \\leqslant 2$。\n\n**测试集 2（17 分，隐藏）**\n\n- $1 \\leqslant N \\leqslant 2000$。\n- $1 \\leqslant L \\leqslant 10$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13143", "type": "P", "difficulty": 4, "samples": [["", ""]], "limits": {"time": [25000], "memory": [1048576]}, "tags": ["数学", "2018", "交互题", "Special Judge", "概率论", "Google Code Jam"], "title": "[GCJ 2018 #1C] Lollipop Shop", "background": "", "description": "You own a lollipop shop. At the start of the day, you make $N$ lollipops, each of a single unique flavor, like huckleberry, cherry or lime. $N$ customers come into the shop during the day, one at a time. Each customer gives you a list of which of your lollipop flavors they like. You can sell them one lollipop of any of those flavors, as long as you have not already sold someone else the same flavor earlier in the day (since there is only one lollipop of each flavor). If none of the flavors they like are still available, you cannot sell them a lollipop, and they leave your shop disappointed.\n\nYou do not know what each customer's flavor preferences are going to be until they arrive. Each customer decides if they like or dislike each flavor randomly, independently of whether they like any other flavor, or what flavors anyone else likes. However, your market studies have shown that some flavors may have a higher probability of being liked in general! For example, the lime flavor might have a $10\\%$ chance of being liked by any particular customer, whereas that chance might be $1\\%$ for the cherry flavor. These values are always chosen independently and uniformly at random from the interval $[0.005, 0.1]$.\n\nObviously, you want to sell lollipops to as many of the $N$ customers as possible! But, since you do not know what flavors your customers will ask for ahead of time, you cannot always make an optimal decision — sometimes you might sell a customer one flavor, and then later wish you had sold them another.\n\nSuppose that you somehow knew all the customers' preferences in advance and could plan ahead; then there is some maximum number $M$ of lollipops that you could possibly sell. You do not know the customers' preferences in advance, but we require you to sell a number of lollipops that is at least $90\\%$ of $M$ for each input case.\n\n### Interactive Protocol\n\nThis problem is interactive, which means that the concepts of input and output are different than in standard Code Jam problems. You will interact with a separate process that both provides you with information and evaluates your responses. All information comes into your program via standard input; anything that you need to communicate should be sent via standard output. Remember that many programming languages buffer the output by default, so make sure your output actually goes out (for instance, by flushing the buffer) before blocking to wait for a response. See the FAQ for an explanation of what it means to flush the buffer. Anything your program sends through standard error is ignored, but it might consume some memory and be counted against your memory limit, so do not overflow it.\n\nInitially, your program should read a single line containing a single integer $\\mathbf{T}$ indicating the number of test cases. Then, you need to process $\\mathbf{T}$ test cases.\n\nFor each test case, your program should read a single line with one integer $\\mathbf{N}$, the number of lollipops (which is the same as the number of customers).\n\nThen, for each of the customers, your program should read a single line, which will contain space-separated integers. The first integer is $\\mathbf{D}$, the number of flavors that customer likes. Then, $\\mathbf{D}$ integers follow, the ID numbers of those flavors, in strictly increasing order. Flavors have unique ID numbers in the range $[0, \\mathbf{N} - 1]$. Note that $\\mathbf{D}$ might be zero for some or all customers.\n\nAfter each of these lines, your program must write a single line to standard output, containing the ID number of one of the $\\mathbf{D}$ flavors to sell to the customer, or -1 if no lollipop is to be sold to the customer. After you have written the $\\mathbf{N}$th line for the test case, your program should terminate if it was the last test case; otherwise, it should start reading data for the next test case.\n\nIf your program gets something wrong (e.g., tries to sell a customer a flavor that was already sold, or tries to sell a customer a flavor they don't like, or uses the wrong output format, or outputs an out-of-bounds value), the judge will send -1 to your input stream and it will not send any other output after that. If your program continues to wait for the judge after receiving -1, your program will time out, resulting in a Time Limit Exceeded error. Notice that it is your responsibility to have your program exit in time to receive the appropriate verdict (Wrong Answer, Runtime Error, etc.) instead of a Time Limit Exceeded error. As usual, if the total time or memory is exceeded, or your program gets a runtime error, you will receive the appropriate verdict. Not selling enough lollipops for a test case will not cause you to get the -1 message.\n\nYou should not send additional information to the judge after processing all test cases. In other words, if your program keeps printing to standard output after the last test case, you will get a Wrong Answer judgment.", "inputFormat": "See Interactive Protocol.", "outputFormat": "See Interactive Protocol.", "hint": "Note that this sample interaction has smaller values of $\\mathbf T$ and $\\mathbf N$ than the real data. The local testing tool also uses smaller cases.\n\n```\n  t = readline_int()           // reads 10 into t\n  n = readline_int()           // reads 4 into n (four customers & flavors)\n  prefs = readline_int_list()  // reads 1 2 (customer only likes flavor 2)\n  printline 2 to stdout        // sells this customer flavor 2\n  flush stdout\n  prefs = readline_int_list()  // reads 0 (customer likes nothing)\n  printline -1 to stdout       // no flavor to sell to the customer!\n  flush stdout\n  prefs = readline_int_list()  // reads 1 2 (customer only likes flavor 2)\n  printline -1 to stdout       // already used flavor 2, so no flavor to sell\n  flush stdout\n  prefs = readline_int_list()  // reads 2 1 3 (customer likes 1 and 3)\n  printline 3 to stdout        // note: we could have also sold flavor 1\n  flush stdout\n  n = readline_int()           // (start of case 2) reads 1\n  prefs = readline_int_list()  // reads 1 0\n  printline -1 to stdout       // non-optimal but legal choice\n  flush stdout\n  n = readline_int()           // (start of case 3) reads 5\n  prefs = readline_int_list()  // reads 2 1 3\n  printline 1 to stdout\n  flush stdout\n  prefs = readline_int_list()  // reads 2 1 2\n  printline 1 to stdout        // error -- tried to give same flavor twice!\n  flush stdout\n  prefs = readline_int_list()  // reads -1 (judge has given up on us)\n  exit                         // exits to avoid an ambiguous TLE error\n```\n\nThe pseudocode above demonstrates the following scenario.\n\n- In the first test case, the program sells a total of two lollipops. It would not have been possible to sell more than two, so the actual number sold is definitely at least 90% of the maximum possible number sold.\n- In the second test case, the program chooses (for the sake of demonstration here) not to sell the customer a lollipop, although it could have. It sells a total of 0 when it could have sold a total of 1. So, the program will not pass this test set, but note that this does not cause the judge to stop sending input.\n- In the third case, the program makes an error (again for the sake of demonstration) that causes the judge to stop sending input. The program recognizes this and terminates. The user will see a Wrong Answer judgment.\n\nYou can use this testing tool to test locally or on our platform. To test locally, you will need to run the tool in parallel with your code; you can use our [interactive runner](https://storage.googleapis.com/coding-competitions.appspot.com/interactive_runner.py) for that. For more information, read the instructions in comments in that file.\n\nInstructions for the testing tool are included in comments within the tool. We encourage you to add your own test cases. Please be advised that although the testing tool is intended to simulate the judging system, it is **NOT** the real judging system and might behave differently.\n\n**A note on judge behavior**\n\nAt the start of each test case, the judge will determine all customers' preferences. That is, it will use a (hidden) list of probabilities $P_i$ between 0.005 and 0.1, one for each flavor; each customer has a probability $P_i$ of liking the i-th flavor. That is, the random variables indicating whether customer j likes flavor i are independent and identically distributed. These preferences are constant throughout the test and will not be modified e.g. in response to your choices.\n\n**Test set 1 (29 Pts, Visible)**\n\n- $\\mathbf{T} = 50.$\n- $\\mathbf{N} = 200.$\n- $0 \\leqslant \\mathbf{D} \\leqslant \\mathbf{N}.$\n", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #1C] Lollipop Shop", "background": "", "description": "You own a lollipop shop. At the start of the day, you make $N$ lollipops, each of a single unique flavor, like huckleberry, cherry or lime. $N$ customers come into the shop during the day, one at a time. Each customer gives you a list of which of your lollipop flavors they like. You can sell them one lollipop of any of those flavors, as long as you have not already sold someone else the same flavor earlier in the day (since there is only one lollipop of each flavor). If none of the flavors they like are still available, you cannot sell them a lollipop, and they leave your shop disappointed.\n\nYou do not know what each customer's flavor preferences are going to be until they arrive. Each customer decides if they like or dislike each flavor randomly, independently of whether they like any other flavor, or what flavors anyone else likes. However, your market studies have shown that some flavors may have a higher probability of being liked in general! For example, the lime flavor might have a $10\\%$ chance of being liked by any particular customer, whereas that chance might be $1\\%$ for the cherry flavor. These values are always chosen independently and uniformly at random from the interval $[0.005, 0.1]$.\n\nObviously, you want to sell lollipops to as many of the $N$ customers as possible! But, since you do not know what flavors your customers will ask for ahead of time, you cannot always make an optimal decision — sometimes you might sell a customer one flavor, and then later wish you had sold them another.\n\nSuppose that you somehow knew all the customers' preferences in advance and could plan ahead; then there is some maximum number $M$ of lollipops that you could possibly sell. You do not know the customers' preferences in advance, but we require you to sell a number of lollipops that is at least $90\\%$ of $M$ for each input case.\n\n### Interactive Protocol\n\nThis problem is interactive, which means that the concepts of input and output are different than in standard Code Jam problems. You will interact with a separate process that both provides you with information and evaluates your responses. All information comes into your program via standard input; anything that you need to communicate should be sent via standard output. Remember that many programming languages buffer the output by default, so make sure your output actually goes out (for instance, by flushing the buffer) before blocking to wait for a response. See the FAQ for an explanation of what it means to flush the buffer. Anything your program sends through standard error is ignored, but it might consume some memory and be counted against your memory limit, so do not overflow it.\n\nInitially, your program should read a single line containing a single integer $\\mathbf{T}$ indicating the number of test cases. Then, you need to process $\\mathbf{T}$ test cases.\n\nFor each test case, your program should read a single line with one integer $\\mathbf{N}$, the number of lollipops (which is the same as the number of customers).\n\nThen, for each of the customers, your program should read a single line, which will contain space-separated integers. The first integer is $\\mathbf{D}$, the number of flavors that customer likes. Then, $\\mathbf{D}$ integers follow, the ID numbers of those flavors, in strictly increasing order. Flavors have unique ID numbers in the range $[0, \\mathbf{N} - 1]$. Note that $\\mathbf{D}$ might be zero for some or all customers.\n\nAfter each of these lines, your program must write a single line to standard output, containing the ID number of one of the $\\mathbf{D}$ flavors to sell to the customer, or -1 if no lollipop is to be sold to the customer. After you have written the $\\mathbf{N}$th line for the test case, your program should terminate if it was the last test case; otherwise, it should start reading data for the next test case.\n\nIf your program gets something wrong (e.g., tries to sell a customer a flavor that was already sold, or tries to sell a customer a flavor they don't like, or uses the wrong output format, or outputs an out-of-bounds value), the judge will send -1 to your input stream and it will not send any other output after that. If your program continues to wait for the judge after receiving -1, your program will time out, resulting in a Time Limit Exceeded error. Notice that it is your responsibility to have your program exit in time to receive the appropriate verdict (Wrong Answer, Runtime Error, etc.) instead of a Time Limit Exceeded error. As usual, if the total time or memory is exceeded, or your program gets a runtime error, you will receive the appropriate verdict. Not selling enough lollipops for a test case will not cause you to get the -1 message.\n\nYou should not send additional information to the judge after processing all test cases. In other words, if your program keeps printing to standard output after the last test case, you will get a Wrong Answer judgment.", "inputFormat": "See Interactive Protocol.", "outputFormat": "See Interactive Protocol.", "hint": "Note that this sample interaction has smaller values of $\\mathbf T$ and $\\mathbf N$ than the real data. The local testing tool also uses smaller cases.\n\n```\n  t = readline_int()           // reads 10 into t\n  n = readline_int()           // reads 4 into n (four customers & flavors)\n  prefs = readline_int_list()  // reads 1 2 (customer only likes flavor 2)\n  printline 2 to stdout        // sells this customer flavor 2\n  flush stdout\n  prefs = readline_int_list()  // reads 0 (customer likes nothing)\n  printline -1 to stdout       // no flavor to sell to the customer!\n  flush stdout\n  prefs = readline_int_list()  // reads 1 2 (customer only likes flavor 2)\n  printline -1 to stdout       // already used flavor 2, so no flavor to sell\n  flush stdout\n  prefs = readline_int_list()  // reads 2 1 3 (customer likes 1 and 3)\n  printline 3 to stdout        // note: we could have also sold flavor 1\n  flush stdout\n  n = readline_int()           // (start of case 2) reads 1\n  prefs = readline_int_list()  // reads 1 0\n  printline -1 to stdout       // non-optimal but legal choice\n  flush stdout\n  n = readline_int()           // (start of case 3) reads 5\n  prefs = readline_int_list()  // reads 2 1 3\n  printline 1 to stdout\n  flush stdout\n  prefs = readline_int_list()  // reads 2 1 2\n  printline 1 to stdout        // error -- tried to give same flavor twice!\n  flush stdout\n  prefs = readline_int_list()  // reads -1 (judge has given up on us)\n  exit                         // exits to avoid an ambiguous TLE error\n```\n\nThe pseudocode above demonstrates the following scenario.\n\n- In the first test case, the program sells a total of two lollipops. It would not have been possible to sell more than two, so the actual number sold is definitely at least 90% of the maximum possible number sold.\n- In the second test case, the program chooses (for the sake of demonstration here) not to sell the customer a lollipop, although it could have. It sells a total of 0 when it could have sold a total of 1. So, the program will not pass this test set, but note that this does not cause the judge to stop sending input.\n- In the third case, the program makes an error (again for the sake of demonstration) that causes the judge to stop sending input. The program recognizes this and terminates. The user will see a Wrong Answer judgment.\n\nYou can use this testing tool to test locally or on our platform. To test locally, you will need to run the tool in parallel with your code; you can use our [interactive runner](https://storage.googleapis.com/coding-competitions.appspot.com/interactive_runner.py) for that. For more information, read the instructions in comments in that file.\n\nInstructions for the testing tool are included in comments within the tool. We encourage you to add your own test cases. Please be advised that although the testing tool is intended to simulate the judging system, it is **NOT** the real judging system and might behave differently.\n\n**A note on judge behavior**\n\nAt the start of each test case, the judge will determine all customers' preferences. That is, it will use a (hidden) list of probabilities $P_i$ between 0.005 and 0.1, one for each flavor; each customer has a probability $P_i$ of liking the i-th flavor. That is, the random variables indicating whether customer j likes flavor i are independent and identically distributed. These preferences are constant throughout the test and will not be modified e.g. in response to your choices.\n\n**Test set 1 (29 Pts, Visible)**\n\n- $\\mathbf{T} = 50.$\n- $\\mathbf{N} = 200.$\n- $0 \\leqslant \\mathbf{D} \\leqslant \\mathbf{N}.$\n", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #1C] Lollipop Shop", "background": null, "description": "你拥有一家棒棒糖店。在一天开始时，你制作了 $N$ 根棒棒糖，每根棒棒糖都有唯一的口味，比如越橘、樱桃或青柠。当天会有 $N$ 位顾客依次进入你的店铺。每位顾客会给你一份他们喜欢的棒棒糖口味列表。你可以卖给他们其中任意一种他们喜欢的口味的棒棒糖，只要这种口味的棒棒糖还没有在当天卖给其他人（因为每种口味只有一根棒棒糖）。如果他们喜欢的所有口味都已经卖完了，你就不能卖棒棒糖给他们，他们会失望地离开你的店。\n\n你在顾客到来之前并不知道他们的口味偏好。每位顾客会随机决定是否喜欢每种口味，这一决定与他们是否喜欢其他口味、以及其他人喜欢什么口味都无关。然而，你的市场调研显示，有些口味被喜欢的概率更高！例如，青柠口味被某位顾客喜欢的概率可能是 $10\\%$，而樱桃口味可能只有 $1\\%$。这些概率值总是独立且均匀地从区间 $[0.005, 0.1]$ 中随机选取。\n\n显然，你希望能卖出尽可能多的棒棒糖！但由于你事先不知道顾客的口味偏好，因此你无法总是做出最优决策——有时你可能会把某种口味卖给一位顾客，之后又希望当时卖给他们另一种口味。\n\n假设你能提前知道所有顾客的偏好并做好规划，那么你最多能卖出 $M$ 根棒棒糖。虽然你无法提前知道顾客的偏好，但本题要求你在每组输入中，卖出的棒棒糖数量至少达到 $M$ 的 $90\\%$。\n\n### 交互协议\n\n本题为交互题，这意味着输入输出方式与标准题目不同。你需要与一个独立的进程进行交互，该进程既向你提供信息，也会评判你的回答。所有信息都通过标准输入进入你的程序；你需要传递的信息应通过标准输出输出。请注意，许多编程语言默认会缓冲输出，因此请确保你的输出实际被发送出去（例如，通过刷新缓冲区），再等待下一步输入。详见 FAQ 关于刷新缓冲区的说明。你通过标准错误输出的内容会被忽略，但可能会占用内存并计入内存限制，因此请勿输出过多内容。\n\n最初，你的程序应读取一行，包含一个整数 $\\mathbf{T}$，表示测试用例的数量。然后，你需要处理 $\\mathbf{T}$ 组测试数据。\n\n对于每组测试数据，你的程序应读取一行，包含一个整数 $\\mathbf{N}$，表示棒棒糖的数量（也等于顾客数量）。\n\n接下来，对于每位顾客，你的程序应读取一行，包含若干用空格分隔的整数。第一个整数为 $\\mathbf{D}$，表示该顾客喜欢的口味数量。接下来有 $\\mathbf{D}$ 个整数，表示这些口味的编号，严格递增。口味编号唯一，范围为 $[0, \\mathbf{N} - 1]$。注意，有些顾客的 $\\mathbf{D}$ 可能为零。\n\n在每一行顾客信息后，你的程序必须输出一行，包含一个整数，表示你卖给该顾客的口味编号（必须是他们喜欢且尚未卖出的口味），或者输出 $-1$ 表示不卖棒棒糖给该顾客。在每组测试数据的第 $\\mathbf{N}$ 行输出后，如果这是最后一组测试数据，程序应终止；否则，继续读取下一组测试数据。\n\n如果你的程序出现错误（例如，尝试卖出已经卖掉的口味，或者卖给顾客他们不喜欢的口味，或者输出格式错误，或者输出超出范围的值），评测机会向你的输入流发送 $-1$，并且不会再发送其他输出。如果你的程序在收到 $-1$ 后仍然等待评测机输入，则会超时，导致超时错误。请注意，程序应自行及时退出，以获得正确的判题结果（如 Wrong Answer、Runtime Error 等），而不是超时。如果总时间或内存超限，或程序运行时出错，也会得到相应的判题结果。如果某组测试数据卖出的棒棒糖数量不足，不会导致收到 $-1$。\n\n在处理完所有测试数据后，不要再向评测机输出任何内容。换句话说，如果你的程序在最后一组测试数据后仍然输出内容，将会被判为 Wrong Answer。\n\n你可以使用本地测试工具进行测试。要在本地测试，你需要让测试工具与你的代码并行运行；可以使用我们的 [interactive runner](https://storage.googleapis.com/coding-competitions.appspot.com/interactive_runner.py)。更多信息请阅读该文件中的注释说明。\n\n测试工具的使用说明已包含在工具的注释中。我们鼓励你添加自己的测试用例。请注意，虽然测试工具旨在模拟评测系统，但它**不是**真实的评测系统，行为可能有所不同。\n\n**关于评测机行为的说明**\n\n在每组测试数据开始时，评测机会确定所有顾客的偏好。即，对于每种口味，评测机会生成一个（隐藏的）概率列表 $P_i$，每个 $P_i$ 取值在 $[0.005, 0.1]$ 之间；每位顾客喜欢第 $i$ 种口味的概率为 $P_i$。也就是说，顾客 $j$ 是否喜欢口味 $i$ 的随机变量是独立同分布的。这些偏好在整个测试过程中保持不变，不会因你的选择而改变。\n\n**测试点 1（29 分，公开）**\n\n- $\\mathbf{T} = 50$。\n- $\\mathbf{N} = 200$。\n- $0 \\leqslant \\mathbf{D} \\leqslant \\mathbf{N}$。", "inputFormat": "见交互协议。", "outputFormat": "见交互协议。", "hint": "请注意，以下样例交互中的 $\\mathbf T$ 和 $\\mathbf N$ 都比真实数据要小。用于本地测试的工具也使用更小的样例。\n\n```\n  t = readline_int()           // 读取 t，值为 10\n  n = readline_int()           // 读取 n，值为 4（4 位顾客和 4 种口味）\n  prefs = readline_int_list()  // 读取 1 2（顾客只喜欢口味 2）\n  printline 2 to stdout        // 卖给该顾客口味 2\n  flush stdout\n  prefs = readline_int_list()  // 读取 0（顾客什么都不喜欢）\n  printline -1 to stdout       // 没有可卖的口味！\n  flush stdout\n  prefs = readline_int_list()  // 读取 1 2（顾客只喜欢口味 2）\n  printline -1 to stdout       // 口味 2 已经卖出，无法再卖\n  flush stdout\n  prefs = readline_int_list()  // 读取 2 1 3（顾客喜欢 1 和 3）\n  printline 3 to stdout        // 注意：也可以卖 1\n  flush stdout\n  n = readline_int()           // （第二组数据开始）读取 1\n  prefs = readline_int_list()  // 读取 1 0\n  printline -1 to stdout       // 非最优但合法的选择\n  flush stdout\n  n = readline_int()           // （第三组数据开始）读取 5\n  prefs = readline_int_list()  // 读取 2 1 3\n  printline 1 to stdout\n  flush stdout\n  prefs = readline_int_list()  // 读取 2 1 2\n  printline 1 to stdout        // 错误——尝试重复卖出同一口味！\n  flush stdout\n  prefs = readline_int_list()  // 读取 -1（评测机放弃评测）\n  exit                         // 退出，避免超时\n```\n\n上述伪代码演示了如下场景：\n\n- 第一组数据，程序共卖出两根棒棒糖。无法卖出更多，因此实际卖出数量肯定至少为最大可能数量的 $90\\%$。\n- 第二组数据，程序（仅为演示）选择不卖棒棒糖，虽然本可以卖。实际卖出 0 根，最大可卖 1 根。因此该组数据无法通过测试，但不会导致评测机停止输入。\n- 第三组数据，程序出现错误（同样仅为演示），导致评测机停止输入。程序识别到这一点并终止。用户会看到 Wrong Answer 判定。\n\n# 输入格式\n\n见交互协议。\n\n# 输出格式\n\n见交互协议。\n\n# 提示\n\n请注意，以下样例交互中的 $\\mathbf T$ 和 $\\mathbf N$ 都比真实数据要小。用于本地测试的工具也使用更小的样例。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13144", "type": "P", "difficulty": 5, "samples": [["3\n2\n9 1\n3\n8 4 100\n9\n10 10 10 10 10 10 10 10 100", "Case #1: 1\nCase #2: 3\nCase #3: 8"]], "limits": {"time": [15000, 15000], "memory": [1048576, 1048576]}, "tags": ["动态规划 DP", "2018", "Google Code Jam"], "title": "[GCJ 2018 #1C] Ant Stack", "background": "", "description": "Scott has an ant farm containing $\\mathbf{N}$ ants. Each ant has a certain length and weight.\n\nToday, as a challenge for the ants, Scott has placed some food at the top of the ant farm. The ants will try to reach it by arranging themselves into a vertical stack, with each ant in the stack directly holding the next on its back. In this way, each ant bears the weight of all ants above it. Scott's ants are very strong for their size and are able to carry up to 6 times their own weight. For example, an ant that weighs 8 milligrams can carry two other ants weighing 24 milligrams each! Each ant also has a body length; the exact lengths are not important, except that they are all different.\n\n* The stack must be linear. Each ant except for the top ant must be directly below exactly one ant, and each ant except for the bottom ant must be directly above exactly one ant.\n* The lengths of the ants in the stack must be strictly decreasing from the bottom to the top of the stack; this ensures that each new ant that joins the stack will be able to climb up to the top.\n* For each ant, the sum of the weights of all the ants above it in the stack must be no more than 6 times the weight of that ant.\n\nWhat is the maximum number of these ants that can form such a stack?", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow. Each begins with one line with an integer $\\mathbf{N}$: the number of ants in the colony. Then, a second line follows containing $\\mathbf{N}$ integers $\\mathbf{W}_1, \\mathbf{W}_2, ..., \\mathbf{W}_\\mathbf{N}$, where $\\mathbf{W}_\\mathbf{i}$ is the weight in milligrams of the i-th ant. The ants are listed in strictly increasing order of length. Notice that no actual length values are given; only the order is important.", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the maximum number of the given ants that can form a stack that obeys the rules above.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, there are two ants. The first weighs 9 mg; the second weighs 1 mg, and is longer than the first ant. The first ant is strong enough to hold the second ant (since it can hold up to $9 \\times 6$ mg), but it cannot, because the second ant is longer. The second ant is not strong enough to hold the first ant (since it can only hold up to $1 \\times 6$ mg, which is less than 9 mg). So it is only possible to make a \"stack\" of one of the two ants.\n\nIn Sample Case #2, it is possible for all three ants to form a stack, with the third holding up the second, which holds up the first.\n\nIn Sample Case #3, the optimal solution has the ninth ant on the bottom, and then seven of the other ants above it.\n\n**Limits**\n\n- $7 \\leqslant \\mathbf{T} \\leqslant 100.$\n\n**Test set 1 (16 Pts, Visible)**\n\n- For exactly 6 cases, $\\mathbf{N} = 100$; for the other $\\mathbf{T} - 6$ cases, $2 \\leqslant \\mathbf{N} \\leqslant 50.$\n- $1 \\leqslant \\mathbf{W}_\\mathbf{i} \\leqslant 1000,$ for all $i$.\n\n**Test set 2 (27 Pts, Hidden)**\n\n- For exactly 6 cases, $\\mathbf{N} = 10^5$; for the other $\\mathbf{T} - 6$ cases, $2 \\leqslant \\mathbf{N} \\leqslant 500.$\n- $1 \\leqslant \\mathbf{W}_\\mathbf{i} \\leqslant 10^9,$ for all $i$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #1C] Ant Stack", "background": "", "description": "Scott has an ant farm containing $\\mathbf{N}$ ants. Each ant has a certain length and weight.\n\nToday, as a challenge for the ants, Scott has placed some food at the top of the ant farm. The ants will try to reach it by arranging themselves into a vertical stack, with each ant in the stack directly holding the next on its back. In this way, each ant bears the weight of all ants above it. Scott's ants are very strong for their size and are able to carry up to 6 times their own weight. For example, an ant that weighs 8 milligrams can carry two other ants weighing 24 milligrams each! Each ant also has a body length; the exact lengths are not important, except that they are all different.\n\n* The stack must be linear. Each ant except for the top ant must be directly below exactly one ant, and each ant except for the bottom ant must be directly above exactly one ant.\n* The lengths of the ants in the stack must be strictly decreasing from the bottom to the top of the stack; this ensures that each new ant that joins the stack will be able to climb up to the top.\n* For each ant, the sum of the weights of all the ants above it in the stack must be no more than 6 times the weight of that ant.\n\nWhat is the maximum number of these ants that can form such a stack?", "inputFormat": "The first line of the input gives the number of test cases, $\\mathbf{T}$. $\\mathbf{T}$ test cases follow. Each begins with one line with an integer $\\mathbf{N}$: the number of ants in the colony. Then, a second line follows containing $\\mathbf{N}$ integers $\\mathbf{W}_1, \\mathbf{W}_2, ..., \\mathbf{W}_\\mathbf{N}$, where $\\mathbf{W}_\\mathbf{i}$ is the weight in milligrams of the i-th ant. The ants are listed in strictly increasing order of length. Notice that no actual length values are given; only the order is important.", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the maximum number of the given ants that can form a stack that obeys the rules above.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, there are two ants. The first weighs 9 mg; the second weighs 1 mg, and is longer than the first ant. The first ant is strong enough to hold the second ant (since it can hold up to $9 \\times 6$ mg), but it cannot, because the second ant is longer. The second ant is not strong enough to hold the first ant (since it can only hold up to $1 \\times 6$ mg, which is less than 9 mg). So it is only possible to make a \"stack\" of one of the two ants.\n\nIn Sample Case #2, it is possible for all three ants to form a stack, with the third holding up the second, which holds up the first.\n\nIn Sample Case #3, the optimal solution has the ninth ant on the bottom, and then seven of the other ants above it.\n\n**Limits**\n\n- $7 \\leqslant \\mathbf{T} \\leqslant 100.$\n\n**Test set 1 (16 Pts, Visible)**\n\n- For exactly 6 cases, $\\mathbf{N} = 100$; for the other $\\mathbf{T} - 6$ cases, $2 \\leqslant \\mathbf{N} \\leqslant 50.$\n- $1 \\leqslant \\mathbf{W}_\\mathbf{i} \\leqslant 1000,$ for all $i$.\n\n**Test set 2 (27 Pts, Hidden)**\n\n- For exactly 6 cases, $\\mathbf{N} = 10^5$; for the other $\\mathbf{T} - 6$ cases, $2 \\leqslant \\mathbf{N} \\leqslant 500.$\n- $1 \\leqslant \\mathbf{W}_\\mathbf{i} \\leqslant 10^9,$ for all $i$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #1C] Ant Stack", "background": null, "description": "Scott 有一个蚂蚁农场，里面有 $N$ 只蚂蚁。每只蚂蚁都有一定的体长和体重。\n\n今天，Scott 给蚂蚁们设置了一个挑战：他把一些食物放在蚂蚁农场的顶部。蚂蚁们会尝试通过把自己叠成一根竖直的“蚂蚁塔”来够到食物，每只蚂蚁都直接背着下一只蚂蚁。这样，每只蚂蚁都要承受其上方所有蚂蚁的重量。Scott 的蚂蚁们非常强壮，每只蚂蚁最多可以承受自身重量的 6 倍。例如，一只重 8 毫克的蚂蚁可以承受两只各重 24 毫克的蚂蚁！每只蚂蚁也有一个体长；具体长度不重要，只要它们的长度都不相同即可。\n\n- 蚂蚁塔必须是线性的。除了最顶上的蚂蚁外，每只蚂蚁正上方必须有且只有一只蚂蚁；除了最底下的蚂蚁外，每只蚂蚁正下方必须有且只有一只蚂蚁。\n- 蚂蚁塔中蚂蚁的体长必须从下到上严格递减；这保证了每只新加入蚂蚁都能顺利爬到顶部。\n- 对于塔中的每只蚂蚁，其上方所有蚂蚁的总重量不得超过该蚂蚁自身重量的 6 倍。\n\n请问最多能有多少只蚂蚁组成这样一根蚂蚁塔？", "inputFormat": "输入的第一行是测试用例数 $T$。接下来有 $T$ 组测试数据。每组数据的第一行为一个整数 $N$，表示蚂蚁的数量。第二行为 $N$ 个整数 $W_1, W_2, ..., W_N$，其中 $W_i$ 表示第 $i$ 只蚂蚁的重量（单位：毫克）。蚂蚁按照体长严格递增的顺序给出。注意，实际长度值未给出，只需关心顺序。", "outputFormat": "对于每组测试数据，输出一行 `Case #x: y`，其中 $x$ 表示测试用例编号（从 1 开始），$y$ 表示最多能组成的蚂蚁塔的蚂蚁数量。", "hint": "**样例解释**\n\n在样例 1 中，有两只蚂蚁。第一只重 9 毫克，第二只重 1 毫克，且第二只比第一只体长更长。第一只蚂蚁足够强壮，可以承受第二只蚂蚁（因为它能承受 $9 \\times 6$ 毫克），但由于第二只蚂蚁体长更长，不能叠在第一只上。第二只蚂蚁无法承受第一只蚂蚁（因为它只能承受 $1 \\times 6$ 毫克，小于 9 毫克）。所以只能单独选其中一只蚂蚁组成“蚂蚁塔”。\n\n在样例 2 中，三只蚂蚁可以全部组成一根蚂蚁塔，第三只承受第二只，第二只承受第一只。\n\n在样例 3 中，最优解是第九只蚂蚁在最底下，其上方再叠七只其它蚂蚁。\n\n**数据范围**\n\n- $7 \\leqslant T \\leqslant 100$。\n\n**测试点 1（16 分，可见）**\n\n- 恰有 6 组数据 $N = 100$；其余 $T-6$ 组 $2 \\leqslant N \\leqslant 50$。\n- $1 \\leqslant W_i \\leqslant 1000$，对所有 $i$。\n\n**测试点 2（27 分，隐藏）**\n\n- 恰有 6 组数据 $N = 10^5$；其余 $T-6$ 组 $2 \\leqslant N \\leqslant 500$。\n- $1 \\leqslant W_i \\leqslant 10^9$，对所有 $i$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13145", "type": "P", "difficulty": 3, "samples": [["3\n4\n1 1 1 1\n3\n0 2 1\n6\n3 0 0 2 0 1", "Case #1: 1\n....\nCase #2: IMPOSSIBLE\nCase #3: 3\n.//\\..\n./\\./.\n......"]], "limits": {"time": [10000, 10000], "memory": [1048576, 1048576]}, "tags": ["贪心", "2018", "Special Judge", "Google Code Jam"], "title": "[GCJ 2018 #2] Falling Balls", "background": "", "description": "A certain toy consists of a grid of 2 or more columns and 1 or more rows, where each cell of the grid contains either a $\\backslash$ ramp or a $/$ ramp, or is empty. The leftmost and rightmost columns are empty and the bottom row is also empty. Balls are dropped into the top row and fall vertically, sliding on ramps. To prevent balls from getting stuck, a cell with a $\\backslash$ ramp is never immediately to the left of a cell with a $/$ ramp.\n\nWhen a ball is dropped into the top row, it moves deterministically as follows:\n\n* A ball in an empty cell moves to the cell immediately below its current cell, unless it is in the bottom row, in which case it does not move any more.\n* A ball in a cell containing a $\\backslash$ ramp moves to the cell immediately below and to the right of its current cell.\n* A ball in a cell containing a $/$ ramp moves to the cell immediately below and to the left of its current cell.\n\nTo see the mechanism to its full extent, the user drops exactly one ball into each column. Balls do not interfere with each other, and it is possible for a cell to contain multiple balls.\n\nYour friend has a toy with $C$ columns and an unknown number of rows. They just dropped one ball into the top row of each column, and waited for all balls to stop moving. Then, they counted how many balls ended up in each of the cells of the bottom row, and gave you those results... but you think it is possible that they made a mistake. Can you create a layout that is consistent with the results and uses as few rows as possible, or determine that no such layout exists?\n\nFor example, if your friend reported the values $3 \\ 0 \\ 0 \\ 2 \\ 0 \\ 1$, one possible solution would be the following. (Note that it is not necessary to use a minimal number of ramps, or for every ramp to affect the balls.)\n\n```\n./\\\\...\n./\\.\\/.\n.......\n```\n\nHere are the paths that the balls would take when falling through that grid:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ia5vs05s.png)", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line containing an integer $C$: the number of columns in your friend's falling ball toy. Then, there is one more line containing $C$ integers $B_i$. The i-th of these integers represents the number of balls that ended up in the i-th cell from the left of the bottom row of your friend's falling ball toy, according to the data they gave you.", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is either IMPOSSIBLE, or the number of rows in your layout, as described above. If $y$ is not IMPOSSIBLE, output $y$ more rows, representing the rows of your proposed falling ball toy layout, in order from top to bottom. Use . to represent a cell with no ramp, and $\\backslash$ or $/$ to represent the ramps. The layout must obey all of the rules in the problem statement.", "hint": "**Sample Explanation**\n\nNote that the last sample case would not appear in Test set 1.\n\nThe following layout is the only valid solution for Sample Case #1. (There must be at least one row, and including any more rows would make the solution use more rows than needed. It is not legal to include any ramps in the bottom row.)\n\n```\n....\n```\nIn Sample Case #2, there is no way to prevent the leftmost ball from falling to the bottom of its column without adding a ramp, but ramps cannot be added to that column.\n\nSample Case #3 is the one described at the end of the problem statement. Note that the following invalid layout for Sample Case #3 breaks several rules: it has more rows than needed, it has ramps in the three illegal zones (left column, right column, bottom row), and it contains a $\\backslash$ ramp immediately to the left of a $/$ ramp.\n\n```\n\\\\..\\/\n../.\\/\n./../.\n..../.\n```\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n- $0 \\leq B_i \\leq C$, for all $i$.\n- The sum (over all $i$ from 1 to $C$, inclusive) of all $B_i$ values = $C$.\n\n**Test set 1 (5 Pts, Visible)**\n\n- $2 \\leq C \\leq 5$.\n\n**Test set 2 (12 Pts, Hidden)**\n\n- $2 \\leq C \\leq 100$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #2] Falling Balls", "background": "", "description": "A certain toy consists of a grid of 2 or more columns and 1 or more rows, where each cell of the grid contains either a $\\backslash$ ramp or a $/$ ramp, or is empty. The leftmost and rightmost columns are empty and the bottom row is also empty. Balls are dropped into the top row and fall vertically, sliding on ramps. To prevent balls from getting stuck, a cell with a $\\backslash$ ramp is never immediately to the left of a cell with a $/$ ramp.\n\nWhen a ball is dropped into the top row, it moves deterministically as follows:\n\n* A ball in an empty cell moves to the cell immediately below its current cell, unless it is in the bottom row, in which case it does not move any more.\n* A ball in a cell containing a $\\backslash$ ramp moves to the cell immediately below and to the right of its current cell.\n* A ball in a cell containing a $/$ ramp moves to the cell immediately below and to the left of its current cell.\n\nTo see the mechanism to its full extent, the user drops exactly one ball into each column. Balls do not interfere with each other, and it is possible for a cell to contain multiple balls.\n\nYour friend has a toy with $C$ columns and an unknown number of rows. They just dropped one ball into the top row of each column, and waited for all balls to stop moving. Then, they counted how many balls ended up in each of the cells of the bottom row, and gave you those results... but you think it is possible that they made a mistake. Can you create a layout that is consistent with the results and uses as few rows as possible, or determine that no such layout exists?\n\nFor example, if your friend reported the values $3 \\ 0 \\ 0 \\ 2 \\ 0 \\ 1$, one possible solution would be the following. (Note that it is not necessary to use a minimal number of ramps, or for every ramp to affect the balls.)\n\n```\n./\\\\...\n./\\.\\/.\n.......\n```\n\nHere are the paths that the balls would take when falling through that grid:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ia5vs05s.png)", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line containing an integer $C$: the number of columns in your friend's falling ball toy. Then, there is one more line containing $C$ integers $B_i$. The i-th of these integers represents the number of balls that ended up in the i-th cell from the left of the bottom row of your friend's falling ball toy, according to the data they gave you.", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is either IMPOSSIBLE, or the number of rows in your layout, as described above. If $y$ is not IMPOSSIBLE, output $y$ more rows, representing the rows of your proposed falling ball toy layout, in order from top to bottom. Use . to represent a cell with no ramp, and $\\backslash$ or $/$ to represent the ramps. The layout must obey all of the rules in the problem statement.", "hint": "**Sample Explanation**\n\nNote that the last sample case would not appear in Test set 1.\n\nThe following layout is the only valid solution for Sample Case #1. (There must be at least one row, and including any more rows would make the solution use more rows than needed. It is not legal to include any ramps in the bottom row.)\n\n```\n....\n```\nIn Sample Case #2, there is no way to prevent the leftmost ball from falling to the bottom of its column without adding a ramp, but ramps cannot be added to that column.\n\nSample Case #3 is the one described at the end of the problem statement. Note that the following invalid layout for Sample Case #3 breaks several rules: it has more rows than needed, it has ramps in the three illegal zones (left column, right column, bottom row), and it contains a $\\backslash$ ramp immediately to the left of a $/$ ramp.\n\n```\n\\\\..\\/\n../.\\/\n./../.\n..../.\n```\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n- $0 \\leq B_i \\leq C$, for all $i$.\n- The sum (over all $i$ from 1 to $C$, inclusive) of all $B_i$ values = $C$.\n\n**Test set 1 (5 Pts, Visible)**\n\n- $2 \\leq C \\leq 5$.\n\n**Test set 2 (12 Pts, Hidden)**\n\n- $2 \\leq C \\leq 100$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #2] Falling Balls", "background": null, "description": "某种玩具由一个有 $2$ 列或更多列、$1$ 行或更多行的网格组成，网格的每个格子中要么放有一个 $\\backslash$ 斜坡，要么放有一个 $/$ 斜坡，要么为空。最左边和最右边的两列始终为空，最底下一行也始终为空。小球会从最顶上一行的每一列各投放一个，并垂直下落，遇到斜坡会滑动。为了防止小球卡住，任意一个放有 $\\backslash$ 斜坡的格子左侧，绝不会紧挨着一个放有 $/$ 斜坡的格子。\n\n当一个小球从顶行落下时，它的移动规则如下：\n\n- 如果小球当前在一个空格子中，则会直接落到正下方的格子，除非已经在最底行，此时小球不再移动。\n- 如果小球当前在一个放有 $\\backslash$ 斜坡的格子中，则会落到右下方的格子。\n- 如果小球当前在一个放有 $/$ 斜坡的格子中，则会落到左下方的格子。\n\n为了完整展示这个机制，用户会在每一列的顶行各投放一个小球。小球之间互不影响，一个格子中可以有多个小球。\n\n你的朋友有这样一个玩具，列数为 $C$，行数未知。他在每一列的顶行各投放了一个小球，等所有小球都停止移动后，统计了每个底行格子里最终有多少个小球，并把这个结果告诉了你……但你怀疑他可能记错了。你能否构造出一个满足这些结果的布局，并且使用尽可能少的行数？或者判断根本不存在这样的布局？\n\n例如，如果你朋友报告的底行结果是 $3\\ 0\\ 0\\ 2\\ 0\\ 1$，一种可能的解法如下（注意不要求斜坡数量最少，也不要求每个斜坡都必须影响小球的路径）：\n\n```\n./\\\\...\n./\\.\\/.\n.......\n```\n\n下图展示了小球在该网格中的下落路径：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ia5vs05s.png)", "inputFormat": "第一行输入测试用例数 $T$。接下来有 $T$ 组测试数据。每组数据第一行为一个整数 $C$，表示朋友的玩具有多少列。接下来一行有 $C$ 个整数 $B_i$，第 $i$ 个整数表示朋友统计的底行从左到右第 $i$ 个格子里最终有多少个小球。", "outputFormat": "对于每组测试数据，输出一行 `Case #x: y`，其中 $x$ 是测试编号（从 $1$ 开始），$y$ 是你构造的布局所需的最少行数，或者如果不存在这样的布局则输出 `IMPOSSIBLE`。如果 $y$ 不是 `IMPOSSIBLE`，则接下来输出 $y$ 行，依次表示你构造的玩具布局的每一行，从上到下。用 `.` 表示空格子，`\\` 或 `/` 分别表示对应的斜坡。布局必须满足题目中的所有规则。", "hint": "**样例解释**\n\n注意，最后一个样例不会出现在测试集 1 中。\n\n对于样例 1，唯一的有效解法如下（必须至少有一行，增加更多行会导致行数不最少。底行不能有任何斜坡）：\n\n```\n....\n```\n对于样例 2，没有办法阻止最左边的小球直接落到底部，因为那一列不能放斜坡。\n\n样例 3 就是题目描述最后给出的例子。注意，下面这个布局是非法的，因为它有多余的行数，左、右边界和底行都放了斜坡，而且出现了 $/$ 斜坡左侧紧挨着 $\\backslash$ 斜坡的情况：\n\n```\n\\\\..\\/\n../.\\/\n./../.\n..../.\n```\n\n**数据范围**\n\n- $1 \\leq T \\leq 100$。\n- $0 \\leq B_i \\leq C$，对所有 $i$ 均成立。\n- 所有 $B_i$ 之和等于 $C$。\n\n**测试集 1（5 分，公开）**\n\n- $2 \\leq C \\leq 5$。\n\n**测试集 2（12 分，隐藏）**\n\n- $2 \\leq C \\leq 100$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13146", "type": "P", "difficulty": 4, "samples": [["2\n2 0\n4 5", "Case #1: 1\nCase #2: 5"]], "limits": {"time": [25000, 25000], "memory": [1048576, 1048576]}, "tags": ["动态规划 DP", "2018", "记忆化搜索", "Google Code Jam"], "title": "[GCJ 2018 #2] Graceful Chainsaw Jugglers", "background": "", "description": "You are the manager of the Graceful Chainsaw Jugglers performance group, and you are trying to succeed in the very competitive chainsaw juggling business. You have an unlimited number of identical talented jugglers, and each of them knows how to juggle any number of chainsaws. To run a show, you will choose some number of jugglers, and then distribute your red chainsaws and blue chainsaws among them, so that each juggler gets at least one chainsaw. For example, one juggler might juggle two red chainsaws and three blue chainsaws, and another juggler might juggle just one red chainsaw. During the show, each chainsaw is used by only one juggler; the jugglers do not pass chainsaws around, because it is already hard enough just to juggle them!\n\nAccording to your market research, your audience is happiest when the show uses as many jugglers and chainsaws as possible, but the audience also demands variety: no two jugglers in the show can use both the same number of red chainsaws and the same number of blue chainsaws.\n\nYou have $R$ red chainsaws and $B$ blue chainsaws, and you must use all of them in the show. What is the largest number of jugglers that you can use in the show while satisfying the audience's demands?\n", "inputFormat": "The first line of the input gives the number of test cases, $T$; $T$ test cases follow. Each test case consists of one line with two integers $R$ and $B$: the numbers of red and blue chainsaws that you must use in the show.\n", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the largest number of jugglers that you can use in the show while satisfying the audience's demands, as described above.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, the only possible strategy is to give both red chainsaws to one juggler.\n\nIn Sample Case #2, one optimal strategy is to have:\n\n- one juggler with one red chainsaw\n- one juggler with two red chainsaws\n- one juggler with one blue chainsaw\n- one juggler with three blue chainsaws\n- one juggler with one red chainsaw and one blue chainsaw\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n- $R + B > 0$.\n\n**Test set 1 (7 Pts, Visible)**\n\n- $0 \\leq R \\leq 50$.\n- $0 \\leq B \\leq 50$.\n\n**Test set 2 (17 Pts, Hidden)**\n\n- $0 \\leq R \\leq 500$.\n- $0 \\leq B \\leq 500$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #2] Graceful Chainsaw Jugglers", "background": "", "description": "You are the manager of the Graceful Chainsaw Jugglers performance group, and you are trying to succeed in the very competitive chainsaw juggling business. You have an unlimited number of identical talented jugglers, and each of them knows how to juggle any number of chainsaws. To run a show, you will choose some number of jugglers, and then distribute your red chainsaws and blue chainsaws among them, so that each juggler gets at least one chainsaw. For example, one juggler might juggle two red chainsaws and three blue chainsaws, and another juggler might juggle just one red chainsaw. During the show, each chainsaw is used by only one juggler; the jugglers do not pass chainsaws around, because it is already hard enough just to juggle them!\n\nAccording to your market research, your audience is happiest when the show uses as many jugglers and chainsaws as possible, but the audience also demands variety: no two jugglers in the show can use both the same number of red chainsaws and the same number of blue chainsaws.\n\nYou have $R$ red chainsaws and $B$ blue chainsaws, and you must use all of them in the show. What is the largest number of jugglers that you can use in the show while satisfying the audience's demands?\n", "inputFormat": "The first line of the input gives the number of test cases, $T$; $T$ test cases follow. Each test case consists of one line with two integers $R$ and $B$: the numbers of red and blue chainsaws that you must use in the show.\n", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the largest number of jugglers that you can use in the show while satisfying the audience's demands, as described above.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, the only possible strategy is to give both red chainsaws to one juggler.\n\nIn Sample Case #2, one optimal strategy is to have:\n\n- one juggler with one red chainsaw\n- one juggler with two red chainsaws\n- one juggler with one blue chainsaw\n- one juggler with three blue chainsaws\n- one juggler with one red chainsaw and one blue chainsaw\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n- $R + B > 0$.\n\n**Test set 1 (7 Pts, Visible)**\n\n- $0 \\leq R \\leq 50$.\n- $0 \\leq B \\leq 50$.\n\n**Test set 2 (17 Pts, Hidden)**\n\n- $0 \\leq R \\leq 500$.\n- $0 \\leq B \\leq 500$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #2] Graceful Chainsaw Jugglers", "background": "", "description": "你是 Graceful Chainsaw Jugglers 表演团的经理，正在努力在竞争激烈的链锯杂耍行业中取得成功。你拥有无限数量的相同且才华横溢的杂耍演员，每位演员都能杂耍任意数量的链锯。为了举办一场表演，你需要选择若干名杂耍演员，然后将你所有的红色链锯和蓝色链锯分配给他们，使得每位演员至少获得一把链锯。例如，一位演员可以杂耍两把红色链锯和三把蓝色链锯，另一位演员则只杂耍一把红色链锯。在表演过程中，每把链锯只能由一名演员使用；演员之间不会传递链锯，因为仅仅杂耍链锯就已经够难了！\n\n根据市场调研，观众在演员和链锯数量尽可能多的情况下最为满意，但观众也要求多样性：表演中的任意两位演员，不能同时拥有相同数量的红色链锯和相同数量的蓝色链锯。\n\n你有 $R$ 把红色链锯和 $B$ 把蓝色链锯，必须全部用于表演。请问，在满足观众要求的前提下，最多可以安排多少名杂耍演员参与表演？", "inputFormat": "输入的第一行为测试用例数 $T$，接下来有 $T$ 组测试用例。每组测试用例包含一行两个整数 $R$ 和 $B$，分别表示你必须用于表演的红色链锯和蓝色链锯的数量。", "outputFormat": "对于每组测试用例，输出一行，格式为 `Case #x: y`，其中 $x$ 为测试用例编号（从 1 开始），$y$ 为在满足观众要求的前提下，最多可以安排的杂耍演员数量。", "hint": "**样例解释**\n\n在样例 1 中，唯一可行的方案是将两把红色链锯都分给一名演员。\n\n在样例 2 中，一种最优方案如下：\n\n- 一名演员有一把红色链锯\n- 一名演员有两把红色链锯\n- 一名演员有一把蓝色链锯\n- 一名演员有三把蓝色链锯\n- 一名演员有一把红色链锯和一把蓝色链锯\n\n**限制**\n\n- $1 \\leq T \\leq 100$。\n- $R + B > 0$。\n\n**测试点 1（7 分，可见）**\n\n- $0 \\leq R \\leq 50$。\n- $0 \\leq B \\leq 50$。\n\n**测试点 2（17 分，隐藏）**\n\n- $0 \\leq R \\leq 500$。\n- $0 \\leq B \\leq 500$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13147", "type": "P", "difficulty": 5, "samples": [["4\n2\n1 2\n2 1\n2\n1 1\n2 1\n2\n1 2\n1 2\n2\n2 2\n-2 2", "Case #1: 0\nCase #2: 1\nCase #3: 2\nCase #4: 1"]], "limits": {"time": [15000, 15000], "memory": [1048576, 1048576]}, "tags": ["2018", "二分图", "Google Code Jam"], "title": "[GCJ 2018 #2] Costume Change", "background": "", "description": "Supervin is a well-known choreographer. Today is the $N$-th anniversary of his choreography career. To celebrate it, he is planning a dance on a stage that is a square grid of size $N$ by $N$. Exactly one dancer will stand in each grid cell.\n\nEach dancer will wear a costume; each costume has a single color, and is made out of either wool or cotton as its material. Supervin has $N$ colors to choose from when designing the costumes for his dancers, indexed from 1 to $N$.\n\nEach dancer wants to feel special. If two or more dancers share a row or column and also have costumes of the same color and material, they will no longer feel special.\n\nSupervin wants all of his dancers to feel special. Therefore, Supervin is prepared to change the color and/or material of dancers' costumes so that no dancer shares a row or column with another dancer with the same costume (same color and same material). What is the minimum number of dancers whose costumes must be changed in order to make this happen? (Note that a change to both the color and material of a costume still counts as only one change.)", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line containing an integer $N$: the side length (in unit cells) of the square grid of dancers. Then, $N$ lines follow; each contains $N$ non-zero integers $A_{i,j}$. The $j$-th value on the $i$-th line represents the costume of the dancer in the $i$-th row and $j$-th column of the grid. The magnitude of the value gives the color and the sign of the value gives the material (- for wool, + for cotton).\n", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the minimum number of dancers whose costumes must be changed, as described above.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, no costumes need to be changed, since no dancer shares a row or column with another dancer with the same costume.\n\nIn Sample Case #2, one optimal solution is to change the value of $\\mathbf A$ into the following (bold indicates changed values):\n\n```\n  1 -2\n  2 1\n```\n\nOther optimal solutions are possible. Note that changing both the color and the material of a dancer's costume only counts as one change.\n\nIn Sample Case #3, one optimal solution is to change the value of $\\mathbf A$ into the following (bold indicates changed values):\n\n```\n  1 2\n  2 1\n```\n\nOther optimal solutions are possible.\n\nIn Sample Case #4, one optimal solution is to change the value of $\\mathbf A$ into the following (bold indicates changed values):\n\n```\n  2 -2\n  -2 2\n```\n\nOther optimal solutions are possible.\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n- $-N \\leq A_{i,j} \\leq N$, for all $i, j$.\n- $A_{i,j} \\neq 0$, for all $i, j$.\n\n**Test set 1 (7 Pts, Visible)**\n\n- $2 \\leq N \\leq 4$.\n\n**Test set 2 (17 Pts, Hidden)**\n\n- $2 \\leq N \\leq 100$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #2] Costume Change", "background": "", "description": "Supervin is a well-known choreographer. Today is the $N$-th anniversary of his choreography career. To celebrate it, he is planning a dance on a stage that is a square grid of size $N$ by $N$. Exactly one dancer will stand in each grid cell.\n\nEach dancer will wear a costume; each costume has a single color, and is made out of either wool or cotton as its material. Supervin has $N$ colors to choose from when designing the costumes for his dancers, indexed from 1 to $N$.\n\nEach dancer wants to feel special. If two or more dancers share a row or column and also have costumes of the same color and material, they will no longer feel special.\n\nSupervin wants all of his dancers to feel special. Therefore, Supervin is prepared to change the color and/or material of dancers' costumes so that no dancer shares a row or column with another dancer with the same costume (same color and same material). What is the minimum number of dancers whose costumes must be changed in order to make this happen? (Note that a change to both the color and material of a costume still counts as only one change.)", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line containing an integer $N$: the side length (in unit cells) of the square grid of dancers. Then, $N$ lines follow; each contains $N$ non-zero integers $A_{i,j}$. The $j$-th value on the $i$-th line represents the costume of the dancer in the $i$-th row and $j$-th column of the grid. The magnitude of the value gives the color and the sign of the value gives the material (- for wool, + for cotton).\n", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the minimum number of dancers whose costumes must be changed, as described above.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, no costumes need to be changed, since no dancer shares a row or column with another dancer with the same costume.\n\nIn Sample Case #2, one optimal solution is to change the value of $\\mathbf A$ into the following (bold indicates changed values):\n\n```\n  1 -2\n  2 1\n```\n\nOther optimal solutions are possible. Note that changing both the color and the material of a dancer's costume only counts as one change.\n\nIn Sample Case #3, one optimal solution is to change the value of $\\mathbf A$ into the following (bold indicates changed values):\n\n```\n  1 2\n  2 1\n```\n\nOther optimal solutions are possible.\n\nIn Sample Case #4, one optimal solution is to change the value of $\\mathbf A$ into the following (bold indicates changed values):\n\n```\n  2 -2\n  -2 2\n```\n\nOther optimal solutions are possible.\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n- $-N \\leq A_{i,j} \\leq N$, for all $i, j$.\n- $A_{i,j} \\neq 0$, for all $i, j$.\n\n**Test set 1 (7 Pts, Visible)**\n\n- $2 \\leq N \\leq 4$.\n\n**Test set 2 (17 Pts, Hidden)**\n\n- $2 \\leq N \\leq 100$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #2] Costume Change", "background": null, "description": "Supervin 是一位著名的编舞家。今天是他编舞生涯的第 $N$ 周年。为此，他计划在一个 $N \\times N$ 的正方形舞台上编排一场舞蹈。每个格子上恰好站着一名舞者。\n\n每位舞者都将穿着一套服装；每套服装只有一种颜色，并且材质为羊毛或棉布。Supervin 在为舞者设计服装时有 $N$ 种颜色可选，编号为 $1$ 到 $N$。\n\n每位舞者都希望自己与众不同。如果同一行或同一列中有两位或更多舞者穿着颜色和材质都相同的服装，他们就不会感到特别。\n\nSupervin 希望所有舞者都能感到特别。因此，他准备更改一些舞者服装的颜色和/或材质，使得没有任何两位舞者在同一行或同一列中穿着完全相同的服装（即颜色和材质都相同）。请问，最少需要更改多少位舞者的服装，才能满足上述要求？（注意，更改服装的颜色和材质都只算作一次更改。）", "inputFormat": "输入的第一行是测试用例的数量 $T$。接下来有 $T$ 组测试数据。每组测试数据的第一行为一个整数 $N$，表示舞台的边长。接下来的 $N$ 行，每行包含 $N$ 个非零整数 $A_{i,j}$。第 $i$ 行第 $j$ 列的值表示第 $i$ 行第 $j$ 列舞者的服装。数值的绝对值表示颜色，符号表示材质（负号表示羊毛，正号表示棉布）。", "outputFormat": "对于每组测试数据，输出一行 `Case #x: y`，其中 $x$ 表示测试用例编号（从 1 开始），$y$ 表示最少需要更改服装的舞者人数。", "hint": "**样例解释**\n\n在样例 1 中，不需要更改任何服装，因为没有舞者在同一行或同一列中穿着完全相同的服装。\n\n在样例 2 中，一种最优方案是将 $\\mathbf A$ 更改为如下（加粗表示更改过的值）：\n\n```\n  1 -2\n  2 1\n```\n\n也存在其他最优方案。注意，更改服装的颜色和材质都只算作一次更改。\n\n在样例 3 中，一种最优方案是将 $\\mathbf A$ 更改为如下（加粗表示更改过的值）：\n\n```\n  1 2\n  2 1\n```\n\n也存在其他最优方案。\n\n在样例 4 中，一种最优方案是将 $\\mathbf A$ 更改为如下（加粗表示更改过的值）：\n\n```\n  2 -2\n  -2 2\n```\n\n也存在其他最优方案。\n\n**数据范围**\n\n- $1 \\leq T \\leq 100$。\n- 对所有 $i, j$，$-N \\leq A_{i,j} \\leq N$。\n- 对所有 $i, j$，$A_{i,j} \\neq 0$。\n\n**测试点 1（7 分，公开）**\n\n- $2 \\leq N \\leq 4$。\n\n**测试点 2（17 分，隐藏）**\n\n- $2 \\leq N \\leq 100$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13148", "type": "P", "difficulty": 5, "samples": [["5\n3 3\nBBB\nBWB\nBBB\n2 3\nBBB\nWBW\n1 1\nW\n3 3\nWBW\nBWB\nWBW\n2 4\nBBWW\nBBWW", "Case #1: 8\nCase #2: 5\nCase #3: 1\nCase #4: 4\nCase #5: 8"]], "limits": {"time": [30000, 30000], "memory": [1048576, 1048576]}, "tags": ["搜索", "2018", "Google Code Jam"], "title": "[GCJ 2018 #2] Gridception", "background": "", "description": "The master thief Jom Codd is able to infiltrate the dreams of others. Since dream-viewing technology is not very good yet, Codd sees a dream as a dream grid of unit cells, each of which is white or black.\n\nGiven a starting dream grid, Codd can go deeper by replacing each white cell with a $2\\times 2$ grid of white cells, and each black cell with a $2\\times 2$ grid of black cells; this creates a new dream grid that is four times larger. He can go deeper again from that grid, and so on. For example, given this starting dream grid:\n\n```\nBBB\nBWB\nBBB\n```\n\nthen going deeper once produces this new dream grid:\n\n```\nBBBBBB\nBBBBBB\nBBWWBB\nBBWWBB\nBBBBBB\nBBBBBB\n```\n\nand going deeper again produces this new dream grid:\n\n```\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBWWWWBBBB\nBBBBWWWWBBBB\nBBBBWWWWBBBB\nBBBBWWWWBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\n```\n\nand so on.\n\nCodd has just infiltrated a dream and viewed its starting dream grid. He is on a very difficult mission, and he knows that he will need to go deeper many times. To help him navigate, he is looking at various patterns in the starting dream grid. A pattern consists of a single group of cells connected by shared edges (shared corners do not count as connections), plus their colors. A pattern might contain internal gaps (as long as the pattern's cells are a single connected group); such gaps are not considered part of the pattern. Two patterns are the same if and only if they have the same number and arrangement of cells (not reflected or rotated), with the same colors.\n\nFor example, in the grids above, the following $8$-cell pattern is present in the starting grid:\n\n```\nBBB\nB B\nBBB\n```\n\nIt is not present after going deeper once, but it is present after going deeper twice, and three times, and so on for every deeper dream grid.\n\nCodd wants to find the largest pattern from the starting dream grid that will be present in at least a googol ($10^{100}$) of deeper dream grids. For the given example, the pattern above is the largest such pattern. Even though it is not present after going deeper once, it is present in at least a googol of deeper levels. Other such patterns of smaller sizes also meet this condition, but there is no $9$-cell pattern that does; the only such pattern would have to be identical to the entire starting dream grid, and that pattern will never show up in any deeper dream grid, let alone in a googol of them.", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line with two integers $R$ and $C$: the numbers of rows and columns, respectively, in the dream grid. Each case continues with $R$ more lines of $C$ characters each; every such character is either `B` or `W`. These lines directly represent the dream grid.", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the largest possible size of at least one pattern that meets Codd's requirements, as described above.", "hint": "**Sample Explanation**\n\nSample Case #1 is the one described in the problem statement.\n\nIn Sample Case #2, one possible largest pattern is:\n\n```\nBBB\nWB\n```\n\nAnother equally large one is:\n\n```\nBBB\nW W\n```\n\nIn Sample Case #3, the entire starting dream grid is a largest pattern.\n\nIn Sample Case #4, note that the five Ws would not form a valid pattern, because they are not connected. However, this is a largest pattern:\n\n```\nWB\nBW\n```\n\nIn Sample Case #5, the entire starting dream grid is a largest pattern. Note that even though this grid happens to be what Codd would get by going deeper starting from BW, that is irrelevant; Codd will never \"go shallower\".\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n\n**Test set 1 (10 Pts, Visible)**\n\n- $1 \\leq R \\leq 3$.\n- $1 \\leq C \\leq 4$.\n\n**Test set 2 (22 Pts, Hidden)**\n\n- $1 \\leq R \\leq 20$.\n- $1 \\leq C \\leq 20$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #2] Gridception", "background": "", "description": "The master thief Jom Codd is able to infiltrate the dreams of others. Since dream-viewing technology is not very good yet, Codd sees a dream as a dream grid of unit cells, each of which is white or black.\n\nGiven a starting dream grid, Codd can go deeper by replacing each white cell with a $2\\times 2$ grid of white cells, and each black cell with a $2\\times 2$ grid of black cells; this creates a new dream grid that is four times larger. He can go deeper again from that grid, and so on. For example, given this starting dream grid:\n\n```\nBBB\nBWB\nBBB\n```\n\nthen going deeper once produces this new dream grid:\n\n```\nBBBBBB\nBBBBBB\nBBWWBB\nBBWWBB\nBBBBBB\nBBBBBB\n```\n\nand going deeper again produces this new dream grid:\n\n```\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBWWWWBBBB\nBBBBWWWWBBBB\nBBBBWWWWBBBB\nBBBBWWWWBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\n```\n\nand so on.\n\nCodd has just infiltrated a dream and viewed its starting dream grid. He is on a very difficult mission, and he knows that he will need to go deeper many times. To help him navigate, he is looking at various patterns in the starting dream grid. A pattern consists of a single group of cells connected by shared edges (shared corners do not count as connections), plus their colors. A pattern might contain internal gaps (as long as the pattern's cells are a single connected group); such gaps are not considered part of the pattern. Two patterns are the same if and only if they have the same number and arrangement of cells (not reflected or rotated), with the same colors.\n\nFor example, in the grids above, the following $8$-cell pattern is present in the starting grid:\n\n```\nBBB\nB B\nBBB\n```\n\nIt is not present after going deeper once, but it is present after going deeper twice, and three times, and so on for every deeper dream grid.\n\nCodd wants to find the largest pattern from the starting dream grid that will be present in at least a googol ($10^{100}$) of deeper dream grids. For the given example, the pattern above is the largest such pattern. Even though it is not present after going deeper once, it is present in at least a googol of deeper levels. Other such patterns of smaller sizes also meet this condition, but there is no $9$-cell pattern that does; the only such pattern would have to be identical to the entire starting dream grid, and that pattern will never show up in any deeper dream grid, let alone in a googol of them.", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line with two integers $R$ and $C$: the numbers of rows and columns, respectively, in the dream grid. Each case continues with $R$ more lines of $C$ characters each; every such character is either `B` or `W`. These lines directly represent the dream grid.", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the largest possible size of at least one pattern that meets Codd's requirements, as described above.", "hint": "**Sample Explanation**\n\nSample Case #1 is the one described in the problem statement.\n\nIn Sample Case #2, one possible largest pattern is:\n\n```\nBBB\nWB\n```\n\nAnother equally large one is:\n\n```\nBBB\nW W\n```\n\nIn Sample Case #3, the entire starting dream grid is a largest pattern.\n\nIn Sample Case #4, note that the five Ws would not form a valid pattern, because they are not connected. However, this is a largest pattern:\n\n```\nWB\nBW\n```\n\nIn Sample Case #5, the entire starting dream grid is a largest pattern. Note that even though this grid happens to be what Codd would get by going deeper starting from BW, that is irrelevant; Codd will never \"go shallower\".\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n\n**Test set 1 (10 Pts, Visible)**\n\n- $1 \\leq R \\leq 3$.\n- $1 \\leq C \\leq 4$.\n\n**Test set 2 (22 Pts, Hidden)**\n\n- $1 \\leq R \\leq 20$.\n- $1 \\leq C \\leq 20$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #2] Gridception", "background": null, "description": "盗贼大师 Jom Codd 能够潜入他人的梦境。由于梦境观察技术还不够先进，Codd 看到的梦境是一个由单元格组成的梦境网格，每个单元格要么是白色，要么是黑色。\n\n给定一个初始的梦境网格，Codd 可以通过“深入”操作，将每个白色单元格替换为一个 $2\\times 2$ 的白色单元格网格，每个黑色单元格替换为一个 $2\\times 2$ 的黑色单元格网格；这样会生成一个面积扩大四倍的新梦境网格。他可以在此基础上继续深入，如此反复。例如，给定如下初始梦境网格：\n\n```\nBBB\nBWB\nBBB\n```\n\n深入一次后，得到的新梦境网格为：\n\n```\nBBBBBB\nBBBBBB\nBBWWBB\nBBWWBB\nBBBBBB\nBBBBBB\n```\n\n再深入一次，得到的新梦境网格为：\n\n```\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBWWWWBBBB\nBBBBWWWWBBBB\nBBBBWWWWBBBB\nBBBBWWWWBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\nBBBBBBBBBBBB\n```\n\n以此类推。\n\nCodd 刚刚潜入了一个梦境，并看到了它的初始梦境网格。他正执行一项极其艰难的任务，他知道自己需要多次深入。为了帮助自己导航，他正在观察初始梦境网格中的各种“模式”。一个模式由一组通过边相连（仅共享角不算相连）的单元格及其颜色组成。一个模式可以包含内部空洞（只要模式的单元格是一个连通块）；这些空洞不算作模式的一部分。如果两个模式的单元格数量和排列方式完全相同（不允许翻转或旋转），且颜色一致，则认为它们是相同的模式。\n\n例如，在上述网格中，以下 $8$ 个单元格的模式出现在初始网格中：\n\n```\nBBB\nB B\nBBB\n```\n\n在深入一次后，这个模式不再出现，但在深入两次、三次及之后的每一次深入的梦境网格中，这个模式都会出现。\n\nCodd 想要找到初始梦境网格中，能够在至少 $10^{100}$ 个更深层梦境网格中出现的最大模式。对于给定的例子，上述模式就是最大的满足条件的模式。尽管它在深入一次后没有出现，但在至少 $10^{100}$ 个更深层网格中都会出现。其他更小的模式也满足条件，但不存在 $9$ 个单元格的模式满足条件；唯一可能的 $9$ 个单元格模式只能是整个初始梦境网格，但这个模式在任何更深层网格中都不会出现，更不用说出现 $10^{100}$ 次了。", "inputFormat": "第一行输入一个整数 $T$，表示测试用例的数量。接下来有 $T$ 组测试数据。每组数据第一行包含两个整数 $R$ 和 $C$，分别表示梦境网格的行数和列数。接下来的 $R$ 行，每行包含 $C$ 个字符，每个字符为 `B` 或 `W`，直接表示梦境网格。", "outputFormat": "对于每个测试用例，输出一行，格式为 `Case #x: y`，其中 $x$ 是测试用例编号（从 1 开始），$y$ 是满足 Codd 要求的最大模式的大小。", "hint": "**样例解释**\n\n样例 1 即为题目描述中的例子。\n\n样例 2 中，一个可能的最大模式为：\n\n```\nBBB\nWB\n```\n\n另一个同样大小的模式为：\n\n```\nBBB\nW W\n```\n\n样例 3 中，整个初始梦境网格就是最大的模式。\n\n样例 4 中，注意五个 W 不能构成一个合法模式，因为它们不是连通的。然而，以下模式是一个最大模式：\n\n```\nWB\nBW\n```\n\n样例 5 中，整个初始梦境网格就是最大的模式。需要注意的是，尽管这个网格恰好是从 BW 深入得到的，但这与本题无关；Codd 永远不会“向上回溯”。\n\n**数据范围**\n\n- $1 \\leq T \\leq 100$。\n\n**测试点 1（10 分，公开）**\n\n- $1 \\leq R \\leq 3$。\n- $1 \\leq C \\leq 4$。\n\n**测试点 2（22 分，隐藏）**\n\n- $1 \\leq R \\leq 20$。\n- $1 \\leq C \\leq 20$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13149", "type": "P", "difficulty": 3, "samples": [["5\n3\n3 2\n0 2\n0 0\n3\n2 2\n2 2\n2 2\n9\n1 1\n0 0\n0 1\n0 2\n1 0\n1 2\n2 0\n2 1\n2 2\n2\n8 0\n0 8\n4\n1 0\n1 3\n2 2\n0 2", "Case #1: 2\nCase #2: 0\nCase #3: 1\nCase #4: 4\nCase #5: 2"]], "limits": {"time": [20000, 20000], "memory": [1048576, 1048576]}, "tags": ["2018", "Google Code Jam"], "title": "[GCJ 2018 #3] Field Trip", "background": "", "description": "$N$ people from an elementary school — one teacher and $N-1$ kids — are on a field trip. They are exploring a grassy field that is an infinite two-dimensional grid of unit cells. Each person is currently occupying one of the cells; there may be multiple people in the same cell.\n\nWhen it is time to go home, the teacher and kids must all gather in one cell; it does not matter which one, since their bus can pick them up anywhere. The kids have been taught an algorithm that makes it easier to gather:\n\n- The teacher is person number 1, and the kids are numbered 2 through $N$.\n- An action taken by a person consists of either moving to one of the 8 cells sharing at least one edge or corner with that person's current cell, or choosing to remain in their current cell.\n- When the signal for the end of the field trip sounds, the teacher checks to see if all $N$ people are in the same cell. If they are, no further action is necessary. Otherwise, the teacher begins a turn:\n  1. First, the teacher takes an action, as described above. It is up to the teacher to decide where, if anywhere, to move.\n  2. Then, each kid takes an action, starting with kid 2, and so on up to kid $N$; the $i$-th kid does not take their action until the $(i-1)$th person has taken their action. The kids' actions are deterministic: the $i$-th kid must choose the option that minimizes the center-to-center distance from their cell to the cell of the $(i-1)$th person. This is never ambiguous; one of the 9 options will uniquely minimize that distance.\n- Once the turn is complete, the teacher checks again to see if all people are in the same cell. If they are not, another turn begins, and so on, until everyone is in one cell.\n\nIf the teacher makes choices that minimize the number of turns, what is that number of turns?\n", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line with an integer $N$: the number of people on the field trip. Then, there are $N$ more lines. The $i$-th of these represents the $i$-th person, and has two integers $R_i$ and $C_i$: the row and column numbers (on the grid) of the cell that the $i$-th person initially occupies.\n", "outputFormat": "For each test case, output one line containing Case #x: y, where $x$ is the test case number (starting from 1) and $y$ is the smallest possible number of turns required, as described above.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, the teacher is at $(3, 2)$ — that is, row 3 and column 2. Kid 2 is at $(0, 2)$, and Kid 3 is at $(0, 0)$. One optimal strategy for the teacher is as follows:\n\n- Turn 1:\n    - Move to $(2, 2)$.\n    - Kid 2 moves to $(1, 2)$.\n    - Kid 3 moves to $(1, 1)$.\n- Turn 2:\n    - Move to $(1, 2)$.\n    - Kid 2 remains in place in $(1, 2)$.\n    - Kid 3 moves to $(1, 2)$. Now everyone is in the same cell.\n\nIn Sample Case #2, the teacher and the two kids start off in the same cell, so no turns are required.\n\nIn Sample Case #3, the teacher can remain in place, and all of the kids will move to the teacher's cell by the end of the first turn.\n\nIn Sample Case #4, the teacher should move diagonally four times to reach $(4, 4)$.\n\nIn Sample Case #5, the teacher should begin by moving to $(1, 1)$; then kids $2, 3$, and $4$ will all move to $(1, 2)$. Note that even though all the kids are now in the same cell, the teacher is not, and must start another turn. On the second turn, the teacher can move to $(1, 2)$ to join the kids, and the kids will not move.\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n\n**Test set 1 (4 Pts, Visible)**\n\n- $2 \\leq N \\leq 10$.\n- $0 \\leq R_i \\leq 8$, for all $i$.\n- $0 \\leq C_i \\leq 8$, for all $i$.\n\n**Test set 2 (10 Pts, Hidden)**\n\n- $2 \\leq N \\leq 10^4$.\n- $0 \\leq R_i \\leq 10^9$, for all $i$.\n- $0 \\leq C_i \\leq 10^9$, for all $i$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #3] Field Trip", "background": "", "description": "$N$ people from an elementary school — one teacher and $N-1$ kids — are on a field trip. They are exploring a grassy field that is an infinite two-dimensional grid of unit cells. Each person is currently occupying one of the cells; there may be multiple people in the same cell.\n\nWhen it is time to go home, the teacher and kids must all gather in one cell; it does not matter which one, since their bus can pick them up anywhere. The kids have been taught an algorithm that makes it easier to gather:\n\n- The teacher is person number 1, and the kids are numbered 2 through $N$.\n- An action taken by a person consists of either moving to one of the 8 cells sharing at least one edge or corner with that person's current cell, or choosing to remain in their current cell.\n- When the signal for the end of the field trip sounds, the teacher checks to see if all $N$ people are in the same cell. If they are, no further action is necessary. Otherwise, the teacher begins a turn:\n  1. First, the teacher takes an action, as described above. It is up to the teacher to decide where, if anywhere, to move.\n  2. Then, each kid takes an action, starting with kid 2, and so on up to kid $N$; the $i$-th kid does not take their action until the $(i-1)$th person has taken their action. The kids' actions are deterministic: the $i$-th kid must choose the option that minimizes the center-to-center distance from their cell to the cell of the $(i-1)$th person. This is never ambiguous; one of the 9 options will uniquely minimize that distance.\n- Once the turn is complete, the teacher checks again to see if all people are in the same cell. If they are not, another turn begins, and so on, until everyone is in one cell.\n\nIf the teacher makes choices that minimize the number of turns, what is that number of turns?\n", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line with an integer $N$: the number of people on the field trip. Then, there are $N$ more lines. The $i$-th of these represents the $i$-th person, and has two integers $R_i$ and $C_i$: the row and column numbers (on the grid) of the cell that the $i$-th person initially occupies.\n", "outputFormat": "For each test case, output one line containing Case #x: y, where $x$ is the test case number (starting from 1) and $y$ is the smallest possible number of turns required, as described above.", "hint": "**Sample Explanation**\n\nIn Sample Case #1, the teacher is at $(3, 2)$ — that is, row 3 and column 2. Kid 2 is at $(0, 2)$, and Kid 3 is at $(0, 0)$. One optimal strategy for the teacher is as follows:\n\n- Turn 1:\n    - Move to $(2, 2)$.\n    - Kid 2 moves to $(1, 2)$.\n    - Kid 3 moves to $(1, 1)$.\n- Turn 2:\n    - Move to $(1, 2)$.\n    - Kid 2 remains in place in $(1, 2)$.\n    - Kid 3 moves to $(1, 2)$. Now everyone is in the same cell.\n\nIn Sample Case #2, the teacher and the two kids start off in the same cell, so no turns are required.\n\nIn Sample Case #3, the teacher can remain in place, and all of the kids will move to the teacher's cell by the end of the first turn.\n\nIn Sample Case #4, the teacher should move diagonally four times to reach $(4, 4)$.\n\nIn Sample Case #5, the teacher should begin by moving to $(1, 1)$; then kids $2, 3$, and $4$ will all move to $(1, 2)$. Note that even though all the kids are now in the same cell, the teacher is not, and must start another turn. On the second turn, the teacher can move to $(1, 2)$ to join the kids, and the kids will not move.\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n\n**Test set 1 (4 Pts, Visible)**\n\n- $2 \\leq N \\leq 10$.\n- $0 \\leq R_i \\leq 8$, for all $i$.\n- $0 \\leq C_i \\leq 8$, for all $i$.\n\n**Test set 2 (10 Pts, Hidden)**\n\n- $2 \\leq N \\leq 10^4$.\n- $0 \\leq R_i \\leq 10^9$, for all $i$.\n- $0 \\leq C_i \\leq 10^9$, for all $i$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #3] Field Trip", "background": null, "description": "一所小学的 $N$ 个人——一名老师和 $N-1$ 名学生——正在进行一次郊游。他们正在探索一片无限大的二维网格草地，每个格子为单位格。每个人当前都占据着某一个格子；同一个格子上可能有多个人。\n\n当要回家时，老师和学生们必须全部聚集到同一个格子里；具体是哪个格子无所谓，因为他们的校车可以在任何地方接他们。学生们已经学会了一种便于集合的算法：\n\n- 老师编号为 1，学生编号为 2 到 $N$。\n- 每个人的一个动作可以是移动到与当前格子至少共享一个边或一个角的 8 个格子中的任意一个，或者选择留在原地不动。\n- 当郊游结束的信号响起时，老师会检查所有 $N$ 个人是否都在同一个格子里。如果是，则不需要再做任何操作。否则，老师开始一轮操作：\n  1. 首先，老师进行一次动作，如上所述。老师可以自行决定是否移动以及移动到哪里。\n  2. 然后，每个学生依次进行动作，从 2 号学生开始，依次到第 $N$ 号学生；第 $i$ 个学生要等到第 $i-1$ 个人完成动作后才能行动。学生的动作是确定的：第 $i$ 个学生必须选择能使自己与第 $i-1$ 个人的格子中心距离最小的选项。这种选择不会有歧义，9 个选项中必有唯一一个能最小化该距离。\n- 一轮操作结束后，老师再次检查所有人是否都在同一个格子里。如果还没有，则开始新的一轮操作，如此反复，直到所有人都在同一个格子里为止。\n\n如果老师每次都做出能最小化轮数的选择，最少需要多少轮才能集合所有人？", "inputFormat": "输入的第一行为测试用例数 $T$。接下来有 $T$ 组测试数据。每组测试数据的第一行为一个整数 $N$，表示郊游的人数。接下来的 $N$ 行中，第 $i$ 行包含两个整数 $R_i$ 和 $C_i$，表示第 $i$ 个人（老师为第 1 个人）初始所在的格子的行号和列号。", "outputFormat": "对于每个测试用例，输出一行，格式为 Case #x: y，其中 $x$ 为测试用例编号（从 1 开始），$y$ 为最少需要的轮数。", "hint": "**样例解释**\n\n在样例 1 中，老师在 $(3, 2)$，即第 3 行第 2 列。2 号学生在 $(0, 2)$，3 号学生在 $(0, 0)$。老师的一种最优策略如下：\n\n- 第 1 轮：\n    - 老师移动到 $(2, 2)$。\n    - 2 号学生移动到 $(1, 2)$。\n    - 3 号学生移动到 $(1, 1)$。\n- 第 2 轮：\n    - 老师移动到 $(1, 2)$。\n    - 2 号学生留在 $(1, 2)$。\n    - 3 号学生移动到 $(1, 2)$。此时所有人都在同一个格子。\n\n在样例 2 中，老师和两名学生一开始就在同一个格子里，因此不需要任何轮数。\n\n在样例 3 中，老师可以原地不动，所有学生在第一轮结束时都会移动到老师所在的格子。\n\n在样例 4 中，老师应当沿对角线移动 4 次到达 $(4, 4)$。\n\n在样例 5 中，老师应当先移动到 $(1, 1)$；然后 2、3、4 号学生都会移动到 $(1, 2)$。注意，虽然所有学生都在同一个格子，但老师还不在，因此需要再进行一轮。在第二轮中，老师可以移动到 $(1, 2)$ 与学生们会合，学生们则不动。\n\n**数据范围**\n\n- $1 \\leq T \\leq 100$。\n\n**测试点 1（4 分，公开）**\n\n- $2 \\leq N \\leq 10$。\n- $0 \\leq R_i \\leq 8$，对所有 $i$。\n- $0 \\leq C_i \\leq 8$，对所有 $i$。\n\n**测试点 2（10 分，隐藏）**\n\n- $2 \\leq N \\leq 10^4$。\n- $0 \\leq R_i \\leq 10^9$，对所有 $i$。\n- $0 \\leq C_i \\leq 10^9$，对所有 $i$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13150", "type": "P", "difficulty": 6, "samples": [["", ""]], "limits": {"time": [10000, 10000], "memory": [1048576, 1048576]}, "tags": ["图论", "2018", "交互题", "Special Judge", "Google Code Jam"], "title": "[GCJ 2018 #3] Name-Preserving Network", "background": "", "description": "A research consortium is building a new datacenter. In the datacenter, a set of computers is set up to work together and communicate via a network. The network works only with direct bidirectional links between computers. A pair of computers $c_1$ and $c_2$ that are not connected by a direct link can still communicate with each other, as long as there is at least one path of links $l_1, l_2, ..., l_k$ such that links $l_i$ and $l_{i+1}$ share an endpoint, $c_1$ is an endpoint of $l_1$, and $c_2$ is an endpoint of $l_k$. Any two computers can have at most one direct link between them.\n\nThe consortium has asked you to submit a design that illustrates how many computers will be in the network and how they will be connected to each other. Each network design you submit must comply with a specific set of restrictions:\n\n1. There must be between $L$ and $U$ computers, inclusive, in the network.\n2. Each computer must be an endpoint of exactly 4 links, linking it to 4 other distinct computers.\n3. Every pair of computers must be able to communicate with each other, as described above.\n4. The computers must be able to uniquely identify themselves even if their IDs are randomly changed while the system is off.\n\nTo elaborate on the last point: each of the $N$ computers in a network design is initially assigned a unique integer between 1 and $N$ that identifies it. However, it is possible that after some downtime, the system will boot up and the identifiers will be permuted — that is, each computer will still have a unique integer between 1 and $N$, but not necessarily the original one. The network must be able to recover the original identifying integers without having access to any information other than the existing direct links.\n\nTo evaluate your network designs, the research consortium has set up an automated program. The program will receive one of your network designs, validate conditions 1-3 above, and then send back a copy of the network design with the following changes:\n\n- the unique IDs have been permuted at random (that is, each ID is now equally likely to be on any of the computers),\n- every link is listed with the smallest ID first (using the new IDs), and\n- the set of links is listed in increasing order of the first endpoint (using the new IDs), breaking ties by smallest second endpoint (i.e., lexicographical order).\n\nYou need to be able to determine exactly how the IDs were changed. Formally, the automated program will create a secret random permutation $f$ of the integers 1 through $N$, and it will assign those numbers to computers in a \"blank copy\" of the network with all of the previous links removed. Then, for each link between computers $i$ and $j$ in your network design, it will add a link between $f(i)$ and $f(j)$ to the copy. You then must recreate exactly the $f$ that the automated program created. If there exists a different $f'$ that yields the same result and you return $f'$, the consortium will not accept your network design, as in such a case, you cannot ensure that the recovered IDs are the original ones.\n\nFor every $N$ between $10$ and $100$, inclusive, there exists at least one network of $N$ computers that complies with all restrictions above and has the property that applying two different permutations $f$ and $f'$ to it produces two different sets of links.\n\n### Interactive Protocol\n\nThis problem is interactive, which means that the concepts of input and output are different than in standard Code Jam problems. You will interact with a separate process that both provides you with information and evaluates your responses. All information comes into your program via standard input; anything that you need to communicate should be sent via standard output. Remember that many programming languages buffer the output by default, so make sure your output actually goes out (for instance, by flushing the buffer) before blocking to wait for a response. See the FAQ for an explanation of what it means to flush the buffer. Anything your program sends through standard error is ignored, but it might consume some memory and be counted against your memory limit, so do not overflow it. To help you debug, a local testing tool script (in Python) is provided at the very end of the problem statement. In addition, sample solutions to a previous Code Jam interactive problem (in all of our supported languages) are provided in the analysis for Number Guessing.\n\nInitially, your program should read a single line containing a single integer $T$ indicating the number of test cases. Then, you need to process $T$ test cases.\n\nFor each test case, your program will first read a single line containing two integers $L$ and $U$ indicating the inclusive range of values for the number of computers in your network design.\n\nThen, you need to create a network design with $N$ computers and print $2N+1$ lines representing that design. The first line must contain a single integer $N$. The remaining $2N$ lines must contain two integers $A$ and $B$ each, each representing a different link between computers $A$ and $B$, where $A \\neq B$. Notice that if you list link $A$ $B$, you may not list $A$ $B$ nor $B$ $A$ again.\n\nUpon reading your network design, the judge will first check the first three conditions listed in the statement above. If any of those is not met, the judge will send you a single line containing a single -1, and then finish all communication and wait for your program to finish. If your program does finish correctly and without violating other limits, it will receive a Wrong Answer verdict.\n\nIf all of the conditions are met, the judge will send you $2N+1$ lines. The first line will contain a single integer $N$ (the same $N$ you sent). Then, the next $2N$ lines will contain two integers each, describing the links of the copy of the network design, in the same format as you used. The copy is generated as described above, with the permutation $f$ chosen uniformly at random from all possible permutations, independently of your network design.\n\nTo finish a test case, you need to send the judge a single line with $N$ integers $X_1$, $X_2$, ..., $X_N$, representing that the computer to which you assigned number $i$ was assigned number $X_i$ in the judge's copy, for all $i$.\n\nIf the list is not the list the judge generated, you will receive a Wrong Answer verdict. If it was in the last test case, the judge will send no additional communication. Otherwise, the judge will send a single line containing a single -1, and then no additional communication. In both cases, the judge will wait for your program to end, and assign the Wrong Answer verdict only if it ended normally and without violating any resource limits.\n\nYou should not send additional information to the judge after solving all test cases. In other words, if your program keeps printing to standard output after printing the list of $X$s for the last test case, you will receive a Wrong Answer judgment.\n\nNotice that you are allowed to submit the same network design for different test cases, as long as that design complies with all restrictions for both cases. Additionally, the seed from random generation in the judge is fixed, so sending the same set of original network designs in the same order will get back the same set of copies.", "inputFormat": "See Interactive Protocol.", "outputFormat": "See Interactive Protocol.", "hint": "**Sample Interaction**\n\nNote that this sample interaction uses a smaller value of $L$ than the real data, for ease of illustration. Also note that there is no network of exactly $6$ computers with the property that applying two different permutations $f$ and $f'$ to it produces two different sets of links, so it would be a bad idea to design a network of exactly $6$ computers, even if the problem's limits allowed it!\n\n```\n  t = readline_int()           // reads 2 into t\n  limits = readline_int_list() // reads 6 50 into limits\n  printline 6 to stdout        // using 6 computers. Contestant designs an\n                               //   octahedral network\n  printline 2 4 to stdout\n  printline 1 2 to stdout      // you do not need to list edges in any\n                               //   particular order\n  printline 3 1 to stdout      // you do not need to give the endpoints of a\n                               //   link in order\n  printline 1 4 to stdout\n  printline 1 5 to stdout\n  printline 2 3 to stdout\n  printline 2 6 to stdout\n  printline 3 5 to stdout\n  printline 3 6 to stdout\n  printline 4 5 to stdout\n  printline 4 6 to stdout\n  printline 5 6 to stdout\n  flush stdout                 // judge verifies that the network meets\n                               //   conditions 1-3 above, and secretly picks\n                               //   2 6 3 1 5 4 as the new permutation\n  n = readline_int()           // reads 6 into n\n  repeat 12 times:\n    add readline_int_list() to edges  // reads 1 2, 1 4, 1 5, 1 6, 2 3, 2 5,\n                                      //   2 6, 3 4, 3 5, 3 6, 4 5, 4 6, in\n                                      //   that order\n  printline 2 5 6 1 3 4        // note that this is consistent with what the\n                               //   judge sent, but is not the permutation the\n                               //   judge used\n  flush stdout                 // judge decides that this is wrong\n  limits = readline_int_list() // expects to read the next case but gets -1,\n                               //   indicating a wrong answer\n  exit                         // exits to avoid an ambiguous TLE error\n```\n\nYou can use this testing tool to test locally or on our platform. To test locally, you will need to run the tool in parallel with your code; you can use our [interactive runner](https://storage.googleapis.com/coding-competitions.appspot.com/interactive_runner.py) for that. For more information, read the instructions in comments in that file.\n\nInstructions for the testing tool are included in comments within the tool. We encourage you to add your own test cases. Please be advised that although the testing tool is intended to simulate the judging system, it is **NOT** the real judging system and might behave differently.\n\n**Limits**\n\n- $1 \\leq T \\leq 30$.\n\n**Test set 1 (9 Pts, Visible)**\n\n- $L = 10$.\n- $U = 50$.\n\n**Test set 2 (16 Pts, Hidden)**\n\n- $10 \\leq L \\leq 50$.\n- $L = U$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #3] Name-Preserving Network", "background": "", "description": "A research consortium is building a new datacenter. In the datacenter, a set of computers is set up to work together and communicate via a network. The network works only with direct bidirectional links between computers. A pair of computers $c_1$ and $c_2$ that are not connected by a direct link can still communicate with each other, as long as there is at least one path of links $l_1, l_2, ..., l_k$ such that links $l_i$ and $l_{i+1}$ share an endpoint, $c_1$ is an endpoint of $l_1$, and $c_2$ is an endpoint of $l_k$. Any two computers can have at most one direct link between them.\n\nThe consortium has asked you to submit a design that illustrates how many computers will be in the network and how they will be connected to each other. Each network design you submit must comply with a specific set of restrictions:\n\n1. There must be between $L$ and $U$ computers, inclusive, in the network.\n2. Each computer must be an endpoint of exactly 4 links, linking it to 4 other distinct computers.\n3. Every pair of computers must be able to communicate with each other, as described above.\n4. The computers must be able to uniquely identify themselves even if their IDs are randomly changed while the system is off.\n\nTo elaborate on the last point: each of the $N$ computers in a network design is initially assigned a unique integer between 1 and $N$ that identifies it. However, it is possible that after some downtime, the system will boot up and the identifiers will be permuted — that is, each computer will still have a unique integer between 1 and $N$, but not necessarily the original one. The network must be able to recover the original identifying integers without having access to any information other than the existing direct links.\n\nTo evaluate your network designs, the research consortium has set up an automated program. The program will receive one of your network designs, validate conditions 1-3 above, and then send back a copy of the network design with the following changes:\n\n- the unique IDs have been permuted at random (that is, each ID is now equally likely to be on any of the computers),\n- every link is listed with the smallest ID first (using the new IDs), and\n- the set of links is listed in increasing order of the first endpoint (using the new IDs), breaking ties by smallest second endpoint (i.e., lexicographical order).\n\nYou need to be able to determine exactly how the IDs were changed. Formally, the automated program will create a secret random permutation $f$ of the integers 1 through $N$, and it will assign those numbers to computers in a \"blank copy\" of the network with all of the previous links removed. Then, for each link between computers $i$ and $j$ in your network design, it will add a link between $f(i)$ and $f(j)$ to the copy. You then must recreate exactly the $f$ that the automated program created. If there exists a different $f'$ that yields the same result and you return $f'$, the consortium will not accept your network design, as in such a case, you cannot ensure that the recovered IDs are the original ones.\n\nFor every $N$ between $10$ and $100$, inclusive, there exists at least one network of $N$ computers that complies with all restrictions above and has the property that applying two different permutations $f$ and $f'$ to it produces two different sets of links.\n\n### Interactive Protocol\n\nThis problem is interactive, which means that the concepts of input and output are different than in standard Code Jam problems. You will interact with a separate process that both provides you with information and evaluates your responses. All information comes into your program via standard input; anything that you need to communicate should be sent via standard output. Remember that many programming languages buffer the output by default, so make sure your output actually goes out (for instance, by flushing the buffer) before blocking to wait for a response. See the FAQ for an explanation of what it means to flush the buffer. Anything your program sends through standard error is ignored, but it might consume some memory and be counted against your memory limit, so do not overflow it. To help you debug, a local testing tool script (in Python) is provided at the very end of the problem statement. In addition, sample solutions to a previous Code Jam interactive problem (in all of our supported languages) are provided in the analysis for Number Guessing.\n\nInitially, your program should read a single line containing a single integer $T$ indicating the number of test cases. Then, you need to process $T$ test cases.\n\nFor each test case, your program will first read a single line containing two integers $L$ and $U$ indicating the inclusive range of values for the number of computers in your network design.\n\nThen, you need to create a network design with $N$ computers and print $2N+1$ lines representing that design. The first line must contain a single integer $N$. The remaining $2N$ lines must contain two integers $A$ and $B$ each, each representing a different link between computers $A$ and $B$, where $A \\neq B$. Notice that if you list link $A$ $B$, you may not list $A$ $B$ nor $B$ $A$ again.\n\nUpon reading your network design, the judge will first check the first three conditions listed in the statement above. If any of those is not met, the judge will send you a single line containing a single -1, and then finish all communication and wait for your program to finish. If your program does finish correctly and without violating other limits, it will receive a Wrong Answer verdict.\n\nIf all of the conditions are met, the judge will send you $2N+1$ lines. The first line will contain a single integer $N$ (the same $N$ you sent). Then, the next $2N$ lines will contain two integers each, describing the links of the copy of the network design, in the same format as you used. The copy is generated as described above, with the permutation $f$ chosen uniformly at random from all possible permutations, independently of your network design.\n\nTo finish a test case, you need to send the judge a single line with $N$ integers $X_1$, $X_2$, ..., $X_N$, representing that the computer to which you assigned number $i$ was assigned number $X_i$ in the judge's copy, for all $i$.\n\nIf the list is not the list the judge generated, you will receive a Wrong Answer verdict. If it was in the last test case, the judge will send no additional communication. Otherwise, the judge will send a single line containing a single -1, and then no additional communication. In both cases, the judge will wait for your program to end, and assign the Wrong Answer verdict only if it ended normally and without violating any resource limits.\n\nYou should not send additional information to the judge after solving all test cases. In other words, if your program keeps printing to standard output after printing the list of $X$s for the last test case, you will receive a Wrong Answer judgment.\n\nNotice that you are allowed to submit the same network design for different test cases, as long as that design complies with all restrictions for both cases. Additionally, the seed from random generation in the judge is fixed, so sending the same set of original network designs in the same order will get back the same set of copies.", "inputFormat": "See Interactive Protocol.", "outputFormat": "See Interactive Protocol.", "hint": "**Sample Interaction**\n\nNote that this sample interaction uses a smaller value of $L$ than the real data, for ease of illustration. Also note that there is no network of exactly $6$ computers with the property that applying two different permutations $f$ and $f'$ to it produces two different sets of links, so it would be a bad idea to design a network of exactly $6$ computers, even if the problem's limits allowed it!\n\n```\n  t = readline_int()           // reads 2 into t\n  limits = readline_int_list() // reads 6 50 into limits\n  printline 6 to stdout        // using 6 computers. Contestant designs an\n                               //   octahedral network\n  printline 2 4 to stdout\n  printline 1 2 to stdout      // you do not need to list edges in any\n                               //   particular order\n  printline 3 1 to stdout      // you do not need to give the endpoints of a\n                               //   link in order\n  printline 1 4 to stdout\n  printline 1 5 to stdout\n  printline 2 3 to stdout\n  printline 2 6 to stdout\n  printline 3 5 to stdout\n  printline 3 6 to stdout\n  printline 4 5 to stdout\n  printline 4 6 to stdout\n  printline 5 6 to stdout\n  flush stdout                 // judge verifies that the network meets\n                               //   conditions 1-3 above, and secretly picks\n                               //   2 6 3 1 5 4 as the new permutation\n  n = readline_int()           // reads 6 into n\n  repeat 12 times:\n    add readline_int_list() to edges  // reads 1 2, 1 4, 1 5, 1 6, 2 3, 2 5,\n                                      //   2 6, 3 4, 3 5, 3 6, 4 5, 4 6, in\n                                      //   that order\n  printline 2 5 6 1 3 4        // note that this is consistent with what the\n                               //   judge sent, but is not the permutation the\n                               //   judge used\n  flush stdout                 // judge decides that this is wrong\n  limits = readline_int_list() // expects to read the next case but gets -1,\n                               //   indicating a wrong answer\n  exit                         // exits to avoid an ambiguous TLE error\n```\n\nYou can use this testing tool to test locally or on our platform. To test locally, you will need to run the tool in parallel with your code; you can use our [interactive runner](https://storage.googleapis.com/coding-competitions.appspot.com/interactive_runner.py) for that. For more information, read the instructions in comments in that file.\n\nInstructions for the testing tool are included in comments within the tool. We encourage you to add your own test cases. Please be advised that although the testing tool is intended to simulate the judging system, it is **NOT** the real judging system and might behave differently.\n\n**Limits**\n\n- $1 \\leq T \\leq 30$.\n\n**Test set 1 (9 Pts, Visible)**\n\n- $L = 10$.\n- $U = 50$.\n\n**Test set 2 (16 Pts, Hidden)**\n\n- $10 \\leq L \\leq 50$.\n- $L = U$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #3] Name-Preserving Network", "background": "", "description": "一个研究联盟正在建设一个新的数据中心。在数据中心中，一组计算机被设置为协同工作，并通过网络进行通信。该网络仅通过计算机之间的直接双向连接工作。对于没有直接连接的两台计算机 $c_1$ 和 $c_2$，只要存在一条由连接 $l_1, l_2, ..., l_k$ 组成的路径，使得每对相邻连接 $l_i$ 和 $l_{i+1}$ 共享一个端点，且 $c_1$ 是 $l_1$ 的一个端点，$c_2$ 是 $l_k$ 的一个端点，那么 $c_1$ 和 $c_2$ 依然可以通信。任意两台计算机之间最多只能有一条直接连接。\n\n联盟要求你提交一个网络设计，说明网络中有多少台计算机，以及它们之间如何连接。你提交的每个网络设计都必须满足以下特定限制：\n\n1. 网络中的计算机数量必须在 $L$ 到 $U$ 之间（包含两端）。\n2. 每台计算机必须正好作为 4 条连接的端点，即与 4 台不同的计算机直接相连。\n3. 任意两台计算机都必须能够互相通信，如上所述。\n4. 即使系统关闭时计算机的编号被随机更改，计算机也必须能够唯一地识别自己。\n\n对于最后一点，具体说明如下：在你的网络设计中，每台计算机最初被分配一个唯一的整数编号，范围为 $1$ 到 $N$。然而，系统在某次关闭后，重新启动时这些编号可能会被重新排列——也就是说，每台计算机仍然拥有 $1$ 到 $N$ 之间的唯一编号，但不一定是原来的编号。网络必须能够仅凭现有的直接连接关系，恢复出原始的编号分配。\n\n为了评估你的网络设计，研究联盟设置了一个自动化程序。该程序会接收你的网络设计，验证上述第 1-3 条限制，然后返回一个经过如下更改的网络设计副本：\n\n- 唯一编号被随机重新排列（即每个编号现在在任意计算机上都是等可能的）；\n- 每条连接按照较小编号在前的顺序输出（使用新的编号）；\n- 所有连接按照第一个端点编号递增排序，若相同则按第二个端点递增排序（即字典序）。\n\n你需要能够准确判断编号是如何被更改的。形式化地说，自动化程序会生成一个 $1$ 到 $N$ 的随机排列 $f$，并将这些编号分配给一个“空白副本”网络（所有原有连接已移除）。然后，对于你设计中的每一条连接 $i$ 和 $j$，在副本中添加一条 $f(i)$ 和 $f(j)$ 之间的连接。你必须准确还原出 $f$。如果存在另一个不同的排列 $f'$ 也能得到相同的连接集合，而你返回了 $f'$，联盟将不接受你的设计，因为此时无法确保恢复的编号就是原始编号。\n\n对于每个 $N$，其中 $10 \\leq N \\leq 100$，都至少存在一个满足所有上述限制且具有如下性质的网络：对其应用任意两个不同的排列 $f$ 和 $f'$，会得到不同的连接集合。\n\n### 交互协议\n\n本题为交互题，这意味着输入输出方式与标准题目不同。你需要与一个独立的进程进行交互，该进程既为你提供信息，也评估你的回答。所有信息通过标准输入传入你的程序；你需要输出的内容通过标准输出发送。请注意，许多编程语言默认会缓冲输出，因此在等待输入前请确保输出已刷新（例如，使用 flush）。详见 FAQ 关于 flush 的说明。你通过标准错误输出的内容会被忽略，但可能会占用内存并计入内存限制，因此请勿输出过多内容。为方便调试，题目末尾提供了本地测试工具脚本（Python）。此外，分析部分还提供了以往 Code Jam 交互题的参考实现。\n\n最初，你的程序应读取一行，包含一个整数 $T$，表示测试用例数量。然后，你需要处理 $T$ 个测试用例。\n\n对于每个测试用例，你的程序首先读取一行，包含两个整数 $L$ 和 $U$，表示网络中计算机数量的取值范围（包含两端）。\n\n接下来，你需要设计一个包含 $N$ 台计算机的网络，并输出 $2N+1$ 行，描述该网络设计。第一行包含一个整数 $N$。接下来的 $2N$ 行，每行包含两个整数 $A$ 和 $B$，表示一条连接 $A$ 和 $B$ 的不同计算机，且 $A \\neq B$。注意，如果你输出了 $A$ $B$，则不能再输出 $A$ $B$ 或 $B$ $A$。\n\n评测程序收到你的网络设计后，会首先检查前 3 条限制。如果有任何一条不满足，评测程序会返回一行 $-1$，然后结束所有通信并等待你的程序结束。如果你的程序正常结束且未违反其他限制，将收到 Wrong Answer 判定。\n\n如果所有限制均满足，评测程序会返回 $2N+1$ 行。第一行包含整数 $N$（与你输出的 $N$ 相同）。接下来的 $2N$ 行，每行包含两个整数，描述副本网络的连接，格式同上。副本的生成方式如前所述，排列 $f$ 是从所有可能的排列中等概率随机选取的，且与网络设计无关。\n\n完成一个测试用例后，你需要输出一行，包含 $N$ 个整数 $X_1, X_2, ..., X_N$，表示你设计中编号为 $i$ 的计算机在副本中被分配到的编号 $X_i$。\n\n如果该列表不是评测程序生成的排列，将收到 Wrong Answer 判定。如果这是最后一个测试用例，评测程序不会再发送任何信息。否则，评测程序会发送一行 $-1$，然后不再通信。在这两种情况下，评测程序都会等待你的程序结束，只有在程序正常结束且未违反资源限制时才会判定为 Wrong Answer。\n\n请勿在所有测试用例结束后继续向评测程序输出内容。也就是说，在输出最后一个测试用例的 $X$ 列表后，不要再输出任何内容，否则会收到 Wrong Answer 判定。\n\n注意，你可以为不同测试用例提交相同的网络设计，只要该设计同时满足所有相关限制。此外，评测程序的随机种子是固定的，因此以相同顺序提交相同的原始网络设计，会得到相同的副本。", "inputFormat": "见交互协议。", "outputFormat": "见交互协议。", "hint": "**样例交互**\n\n注意，此样例交互使用的 $L$ 值比实际数据小，仅为说明方便。此外，正如题目所述，$N=6$ 时不存在满足“对任意不同排列 $f$ 和 $f'$，应用后得到的连接集合不同”这一性质的网络，因此即使题目限制允许，设计 $N=6$ 的网络也是不明智的！\n\n```\n  t = readline_int()           // 读取 t=2\n  limits = readline_int_list() // 读取 6 50\n  printline 6 to stdout        // 使用 6 台计算机。选手设计了一个八面体网络\n  printline 2 4 to stdout\n  printline 1 2 to stdout      // 连接的输出顺序不限\n  printline 3 1 to stdout      // 端点顺序也不限\n  printline 1 4 to stdout\n  printline 1 5 to stdout\n  printline 2 3 to stdout\n  printline 2 6 to stdout\n  printline 3 5 to stdout\n  printline 3 6 to stdout\n  printline 4 5 to stdout\n  printline 4 6 to stdout\n  printline 5 6 to stdout\n  flush stdout                 // 评测程序验证网络是否满足前 3 条限制，并随机选择 2 6 3 1 5 4 作为新排列\n  n = readline_int()           // 读取 n=6\n  repeat 12 times:\n    add readline_int_list() to edges  // 读取 1 2, 1 4, 1 5, 1 6, 2 3, 2 5,\n                                      //   2 6, 3 4, 3 5, 3 6, 4 5, 4 6, 按顺序\n  printline 2 5 6 1 3 4        // 这与评测程序返回的内容一致，但不是评测程序实际用的排列\n  flush stdout                 // 评测程序判定错误\n  limits = readline_int_list() // 期望读取下一个用例，但收到 -1，表示答案错误\n  exit                         // 退出，避免歧义性 TLE\n```\n\n你可以使用本地测试工具进行本地或平台测试。要在本地测试，需要并行运行该工具和你的代码；可以使用我们的 [interactive runner](https://storage.googleapis.com/coding-competitions.appspot.com/interactive_runner.py)。更多信息请阅读该文件中的注释说明。\n\n测试工具的使用说明已包含在工具注释中。建议你自行添加测试用例。请注意，虽然测试工具旨在模拟评测系统，但它**不是**真实的评测系统，可能存在差异。\n\n**限制条件**\n\n- $1 \\leq T \\leq 30$。\n\n**测试点 1（9 分，可见）**\n\n- $L = 10$。\n- $U = 50$。\n\n**测试点 2（16 分，隐藏）**\n\n- $10 \\leq L \\leq 50$。\n- $L = U$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13151", "type": "P", "difficulty": 6, "samples": [["3\n5\n-1 0 3\n1 2 4\n1 -2 4\n3 1 3\n3 -1 2\n4\n1 1 1\n2 2 3\n2 3 4\n10 11 120\n4\n1 1 1\n2 2 3\n2 3 4\n10 11 12", "Case #1: 5 4 3 1 2\nCase #2: 3 2 1 4\nCase #3: 1 2 4 3"]], "limits": {"time": [12000, 12000], "memory": [1048576, 1048576]}, "tags": ["计算几何", "2018", "Special Judge", "Google Code Jam"], "title": "[GCJ 2018 #3] Raise the Roof", "background": "", "description": "Anthropologists have learned something surprising about a certain ancient Greek society of geometers: they loved partying as much as they loved mathematics! In fact, they kept hosting larger and larger parties over the years, so they needed to raise the roof of their ballroom to keep the noise level tolerable.\n\nWe know that the roof of their ballroom was always supported by the tips of exactly three columns; these columns were infinitely thin line segments that originated on the floor and rose up perpendicular to the floor. Whenever the society wanted to raise the roof, they would begin by removing the existing roof. Then, they would build a new column in a location where there was not already a column. Finally, they would rest a new roof on the tips of the new column and the two most recently built of the previously existing columns. For mystical reasons, no three column bases were ever collinear, and no four column tips were ever coplanar.\n\nEach roof was a convex polygon that was part of the plane defined by the three tips that supported it. For each column $c$ built before the supporting ones, the roof did not intersect $c$ at any point and was large enough to cover the space above $c$. The roof did not touch the floor. The different roofs did not necessarily all have the same shape.\n\nOn an archeological dig, you found all $N$ columns that the society ever built, but no roof. You want to determine a possible order in which the columns could have been built that is consistent with the rules above. A possible order is an ordering of the $N$ columns such that, for each prefix of length at least 4 of the ordering, there is a roof (convex polygon) that contains the tips of the last three columns in the prefix, and for each other column in the prefix with a tip at $(x, y, h)$ the roof contains a point $(x, y, z)$ with $z > h$.", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each test case begins with one line containing an integer $N$: the number of columns. Then, $N$ more lines follow; the $i$-th of these lines contains three integers $X_i$, $Y_i$, and $H_i$, representing the $X$ and $Y$ coordinates and height above the ground of the tip of the $i$-th column.\n", "outputFormat": "For each test case, output one line containing `Case #x: y1 y2 ... yN`, where $x$ is the test case number (starting from 1), and each $y_i$ is a different integer between 1 through $N$. These represent a possible ordering of the columns, with $y_i$ being the index in the input of the $i$-th built column.\n\nIt is guaranteed that at least one valid answer always exists. If there are multiple possible answers, you may output any of them.", "hint": "**Sample Explanation**\n\nThe following pictures illustrate Sample Case #1.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cefuy1j7.png)\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n- $-10^6 \\leq X_i \\leq 10^6$, for all $i$.\n- $-10^6 \\leq Y_i \\leq 10^6$, for all $i$.\n- $1 \\leq H_i \\leq 10^6$, for all $i$.\n- $(X_i, Y_i)$, $(X_j, Y_j)$, and $(X_k, Y_k)$ are not collinear, for all distinct $i, j, k$.\n- $(X_i, Y_i, H_i)$, $(X_j, Y_j, H_j)$, $(X_k, Y_k, H_k)$, and $(X_l, Y_l, H_l)$ are not coplanar, for all distinct $i, j, k, l$.\n\n**Test set 1 (7 Pts, Visible)**\n\n- $4 \\leq N \\leq 10$.\n\n**Test set 2 (19 Pts, Hidden)**\n\n- $4 \\leq N \\leq 1000$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #3] Raise the Roof", "background": "", "description": "Anthropologists have learned something surprising about a certain ancient Greek society of geometers: they loved partying as much as they loved mathematics! In fact, they kept hosting larger and larger parties over the years, so they needed to raise the roof of their ballroom to keep the noise level tolerable.\n\nWe know that the roof of their ballroom was always supported by the tips of exactly three columns; these columns were infinitely thin line segments that originated on the floor and rose up perpendicular to the floor. Whenever the society wanted to raise the roof, they would begin by removing the existing roof. Then, they would build a new column in a location where there was not already a column. Finally, they would rest a new roof on the tips of the new column and the two most recently built of the previously existing columns. For mystical reasons, no three column bases were ever collinear, and no four column tips were ever coplanar.\n\nEach roof was a convex polygon that was part of the plane defined by the three tips that supported it. For each column $c$ built before the supporting ones, the roof did not intersect $c$ at any point and was large enough to cover the space above $c$. The roof did not touch the floor. The different roofs did not necessarily all have the same shape.\n\nOn an archeological dig, you found all $N$ columns that the society ever built, but no roof. You want to determine a possible order in which the columns could have been built that is consistent with the rules above. A possible order is an ordering of the $N$ columns such that, for each prefix of length at least 4 of the ordering, there is a roof (convex polygon) that contains the tips of the last three columns in the prefix, and for each other column in the prefix with a tip at $(x, y, h)$ the roof contains a point $(x, y, z)$ with $z > h$.", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each test case begins with one line containing an integer $N$: the number of columns. Then, $N$ more lines follow; the $i$-th of these lines contains three integers $X_i$, $Y_i$, and $H_i$, representing the $X$ and $Y$ coordinates and height above the ground of the tip of the $i$-th column.\n", "outputFormat": "For each test case, output one line containing `Case #x: y1 y2 ... yN`, where $x$ is the test case number (starting from 1), and each $y_i$ is a different integer between 1 through $N$. These represent a possible ordering of the columns, with $y_i$ being the index in the input of the $i$-th built column.\n\nIt is guaranteed that at least one valid answer always exists. If there are multiple possible answers, you may output any of them.", "hint": "**Sample Explanation**\n\nThe following pictures illustrate Sample Case #1.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cefuy1j7.png)\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n- $-10^6 \\leq X_i \\leq 10^6$, for all $i$.\n- $-10^6 \\leq Y_i \\leq 10^6$, for all $i$.\n- $1 \\leq H_i \\leq 10^6$, for all $i$.\n- $(X_i, Y_i)$, $(X_j, Y_j)$, and $(X_k, Y_k)$ are not collinear, for all distinct $i, j, k$.\n- $(X_i, Y_i, H_i)$, $(X_j, Y_j, H_j)$, $(X_k, Y_k, H_k)$, and $(X_l, Y_l, H_l)$ are not coplanar, for all distinct $i, j, k, l$.\n\n**Test set 1 (7 Pts, Visible)**\n\n- $4 \\leq N \\leq 10$.\n\n**Test set 2 (19 Pts, Hidden)**\n\n- $4 \\leq N \\leq 1000$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #3] Raise the Roof", "background": null, "description": "人类学家们对某个古希腊几何学家社团有了令人惊讶的发现：他们对聚会的热爱丝毫不亚于对数学的热爱！事实上，随着年复一年的聚会规模不断扩大，他们不得不不断抬高舞厅的屋顶，以保持噪音在可接受的水平。\n\n我们知道，他们舞厅的屋顶始终由恰好三根柱子的顶端支撑；这些柱子是从地板上垂直升起的无限细线段。每当社团想要抬高屋顶时，他们会先拆除现有的屋顶。然后，在一个还没有柱子的地方建造一根新柱子。最后，用新柱子和之前建造的柱子中最近的两根柱子的顶端作为支点，搭建新的屋顶。出于神秘的原因，任意三根柱子的底座都不会共线，任意四根柱子的顶端也不会共面。\n\n每一块屋顶都是一个凸多边形，属于由三根支撑柱顶端确定的平面。对于每一根在支撑柱之前建造的柱子，屋顶不会与该柱子有任何交点，并且屋顶足够大，可以覆盖该柱子顶端的上方空间。屋顶不会接触地板。不同的屋顶形状不一定完全相同。\n\n在一次考古发掘中，你找到了社团曾经建造过的所有 $N$ 根柱子，但没有发现任何屋顶。你想要确定一种可能的柱子建造顺序，使其符合上述规则。一个可能的顺序是对 $N$ 根柱子的一个排列，使得对于该排列的每一个长度不少于 4 的前缀，存在一块屋顶（凸多边形），它包含该前缀最后三根柱子的顶端，并且对于前缀中的其它每一根柱子，若其顶端为 $(x, y, h)$，则屋顶上存在一个点 $(x, y, z)$ 满足 $z > h$。", "inputFormat": "输入的第一行包含测试用例数 $T$。接下来有 $T$ 组测试数据。每组测试数据的第一行包含一个整数 $N$，表示柱子的数量。接下来的 $N$ 行，每行包含三个整数 $X_i$、$Y_i$ 和 $H_i$，分别表示第 $i$ 根柱子顶端的 $X$ 坐标、$Y$ 坐标和离地高度。", "outputFormat": "对于每组测试数据，输出一行，格式为 `Case #x: y1 y2 ... yN`，其中 $x$ 是测试用例编号（从 1 开始），$y_i$ 是 $1$ 到 $N$ 之间的不同整数，表示第 $i$ 根被建造的柱子在输入中的编号。\n\n保证至少存在一种合法答案。如果有多种可能的答案，你可以输出其中任意一种。", "hint": "**样例解释**\n\n下图展示了样例第 1 组数据的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cefuy1j7.png)\n\n**数据范围**\n\n- $1 \\leq T \\leq 100$。\n- $-10^6 \\leq X_i \\leq 10^6$，对所有 $i$。\n- $-10^6 \\leq Y_i \\leq 10^6$，对所有 $i$。\n- $1 \\leq H_i \\leq 10^6$，对所有 $i$。\n- 任意不同的 $i, j, k$，$(X_i, Y_i)$、$(X_j, Y_j)$ 和 $(X_k, Y_k)$ 不共线。\n- 任意不同的 $i, j, k, l$，$(X_i, Y_i, H_i)$、$(X_j, Y_j, H_j)$、$(X_k, Y_k, H_k)$ 和 $(X_l, Y_l, H_l)$ 不共面。\n\n**测试点 1（7 分，公开）**\n\n- $4 \\leq N \\leq 10$。\n\n**测试点 2（19 分，隐藏）**\n\n- $4 \\leq N \\leq 1000$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13152", "type": "P", "difficulty": 6, "samples": [["3\n6 2\n0 0 7 7\n15 -2 10 0\n0 0 0 10\n0 0 10 0\n0 10 10 10\n10 0 10 10\n6 1\n0 0 0 10\n0 0 10 0\n0 10 10 10\n10 0 10 10\n0 0 7 7\n15 -2 10 0\n11 4\n-10 0 10 0\n-10 0 0 10\n10 0 0 10\n0 2 0 5\n0 2 10 0\n10 0 0 5\n15 3 18 3\n15 3 15 9\n18 3 15 9\n15 3 16 5\n0 10 15 3", "Case #1: 1 2 3 4 5 6\nCase #2: 5 6 1 2 3 4\nCase #3: 11 10 7 8 9 1 2 3 6 5 4"]], "limits": {"time": [10000, 10000], "memory": [1048576, 1048576]}, "tags": ["2018", "Special Judge", "Google Code Jam"], "title": "[GCJ 2018 #3] Fence Construction", "background": "", "description": "You are an employee of the Fence Construction Company and have been tasked with the construction of $F$ fences. Each fence runs in a straight line from one point to another. Formally, each fence is a segment connecting two different points in two-dimensional space. Fences do not intersect each other, except possibly at their endpoints. The fences are all connected, that is, for any pair of fences $f$ and $g$ there exists a path $f = f_1, f_2, \\dots, f_k = g$ such that $f_i$ shares an endpoint with $f_{i+1}$.\n\nAt the time you begin your work, no fences have been built. Construction is done using a special fence-shooting 3D printer. There is only one such device, so fences are built one at a time. The printer is small enough that you can consider it a single point on the plane.\n\nTo build a fence $f$, you must first position the printer at a point $p$ in the plane such that the printer can see all of $f$ without being obstructed by previously constructed fences. Formally, $p$ has to be such that:\n\n* $p$ is not on $f$ (not even at an endpoint).\n* for any point $q$ on $f$ that is not an endpoint of $f$, the segment connecting $p$ and $q$ does not intersect any previously built fence.\n\nTo position the printer, you can move it from its current position in a contiguous and not necessarily straight line through the plane, as long as the line does not intersect any previously built fences (not even at an endpoint). You can choose any position for the printer to be at before the first fence is built and after the last fence is built.\n\nHaving to follow this procedure means that you cannot necessarily build the fences in any order. For example, you might choose an order that blocks off the printer and prevents you from moving it to where it needs to be.\n\nThe director of the organization has drafted a relative ordering involving $K$ of the fences (but none of these have been built yet) without giving much thought to it. To avoid angering them, you need to use this ordering, inserting the remaining $F-K$ fences anywhere you like to complete the ordering.\n\nGiven these restrictions, find an order in which to build the fences. It is guaranteed that at least one valid order exists.", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line containing two integers $F$ and $K$: the total number of fences and the number of fences in the director's incomplete ordering. Then, $F$ more lines follow; the $i$-th of these lines (counting starting from 1) contains four integers $A_i$, $B_i$, $C_i$ and $D_i$, indicating that the $i$-th fence is a line segment from $(A_i, B_i)$ to $(C_i, D_i)$. The first $K$ fences given in the input are the $K$ fences in the director's ordering.", "outputFormat": "For each test case, output one line beginning `Case #x: y`, where $x$ is the test case number (starting from 1), and $y$ is a space-separated ordering of the integers between 1 and $F$, inclusive, giving a valid order in which to build the fences.", "hint": "**Sample Explanation**\n\nNote that the last sample case would not appear in test set $1$.\n\nIn Sample Case #1, it is possible to build the fences in the order they are given: $1, 2, 3, 4, 5, 6$. Note that fence $1$ must come earlier in the order than fence $2$, per the director's list.\n\nIn Sample Case #2, it is not possible to build the fences in the given order! One possible order is: $5, 6, 1, 2, 3, 4$. Note that when the director's list includes only one fence, the relative order condition is always trivially satisfied.\n\nIn Sample Case #3, it is possible to build the fences in the order: $11, 10, 7, 8, 9, 1, 2, 3, 6, 5, 4$. Note that fences $1, 2, 3$ and $4$ must be built in that relative order.\n\nThe following pictures illustrate one valid way of building the fences for Sample Case #1.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7k0wawc.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/db8ugko8.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/djg1s3jk.png)\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n- $4 \\leq F \\leq 300$.\n- $-10^5 \\leq A_i \\leq 10^5$, for all $i$.\n- $-10^5 \\leq B_i \\leq 10^5$, for all $i$.\n- $-10^5 \\leq C_i \\leq 10^5$, for all $i$.\n- $-10^5 \\leq D_i \\leq 10^5$, for all $i$.\n- $(A_i, B_i) \\neq (C_i, D_i)$, for all $i$.\n- If $p$ is a non-endpoint point on a fence, then $p$ is not a point of any other fence.\n- The given fences are connected, as defined in the statement.\n- There is at least one ordering of the fences that satisfies all the construction restrictions in the statement.\n\n**Test set 1 (12 Pts, Visible)**\n\n- $1 \\leq K \\leq 2$.\n\n**Test set 2 (23 Pts, Hidden)**\n\n- $1 \\leq K < F$.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 #3] Fence Construction", "background": "", "description": "You are an employee of the Fence Construction Company and have been tasked with the construction of $F$ fences. Each fence runs in a straight line from one point to another. Formally, each fence is a segment connecting two different points in two-dimensional space. Fences do not intersect each other, except possibly at their endpoints. The fences are all connected, that is, for any pair of fences $f$ and $g$ there exists a path $f = f_1, f_2, \\dots, f_k = g$ such that $f_i$ shares an endpoint with $f_{i+1}$.\n\nAt the time you begin your work, no fences have been built. Construction is done using a special fence-shooting 3D printer. There is only one such device, so fences are built one at a time. The printer is small enough that you can consider it a single point on the plane.\n\nTo build a fence $f$, you must first position the printer at a point $p$ in the plane such that the printer can see all of $f$ without being obstructed by previously constructed fences. Formally, $p$ has to be such that:\n\n* $p$ is not on $f$ (not even at an endpoint).\n* for any point $q$ on $f$ that is not an endpoint of $f$, the segment connecting $p$ and $q$ does not intersect any previously built fence.\n\nTo position the printer, you can move it from its current position in a contiguous and not necessarily straight line through the plane, as long as the line does not intersect any previously built fences (not even at an endpoint). You can choose any position for the printer to be at before the first fence is built and after the last fence is built.\n\nHaving to follow this procedure means that you cannot necessarily build the fences in any order. For example, you might choose an order that blocks off the printer and prevents you from moving it to where it needs to be.\n\nThe director of the organization has drafted a relative ordering involving $K$ of the fences (but none of these have been built yet) without giving much thought to it. To avoid angering them, you need to use this ordering, inserting the remaining $F-K$ fences anywhere you like to complete the ordering.\n\nGiven these restrictions, find an order in which to build the fences. It is guaranteed that at least one valid order exists.", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line containing two integers $F$ and $K$: the total number of fences and the number of fences in the director's incomplete ordering. Then, $F$ more lines follow; the $i$-th of these lines (counting starting from 1) contains four integers $A_i$, $B_i$, $C_i$ and $D_i$, indicating that the $i$-th fence is a line segment from $(A_i, B_i)$ to $(C_i, D_i)$. The first $K$ fences given in the input are the $K$ fences in the director's ordering.", "outputFormat": "For each test case, output one line beginning `Case #x: y`, where $x$ is the test case number (starting from 1), and $y$ is a space-separated ordering of the integers between 1 and $F$, inclusive, giving a valid order in which to build the fences.", "hint": "**Sample Explanation**\n\nNote that the last sample case would not appear in test set $1$.\n\nIn Sample Case #1, it is possible to build the fences in the order they are given: $1, 2, 3, 4, 5, 6$. Note that fence $1$ must come earlier in the order than fence $2$, per the director's list.\n\nIn Sample Case #2, it is not possible to build the fences in the given order! One possible order is: $5, 6, 1, 2, 3, 4$. Note that when the director's list includes only one fence, the relative order condition is always trivially satisfied.\n\nIn Sample Case #3, it is possible to build the fences in the order: $11, 10, 7, 8, 9, 1, 2, 3, 6, 5, 4$. Note that fences $1, 2, 3$ and $4$ must be built in that relative order.\n\nThe following pictures illustrate one valid way of building the fences for Sample Case #1.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7k0wawc.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/db8ugko8.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/djg1s3jk.png)\n\n**Limits**\n\n- $1 \\leq T \\leq 100$.\n- $4 \\leq F \\leq 300$.\n- $-10^5 \\leq A_i \\leq 10^5$, for all $i$.\n- $-10^5 \\leq B_i \\leq 10^5$, for all $i$.\n- $-10^5 \\leq C_i \\leq 10^5$, for all $i$.\n- $-10^5 \\leq D_i \\leq 10^5$, for all $i$.\n- $(A_i, B_i) \\neq (C_i, D_i)$, for all $i$.\n- If $p$ is a non-endpoint point on a fence, then $p$ is not a point of any other fence.\n- The given fences are connected, as defined in the statement.\n- There is at least one ordering of the fences that satisfies all the construction restrictions in the statement.\n\n**Test set 1 (12 Pts, Visible)**\n\n- $1 \\leq K \\leq 2$.\n\n**Test set 2 (23 Pts, Hidden)**\n\n- $1 \\leq K < F$.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 #3] Fence Construction", "background": null, "description": "你是一名“Fence Construction Company”（围栏建造公司）的员工，被分配去建造 $F$ 段围栏。每段围栏都是一条从一个点到另一个点的直线段。形式化地说，每段围栏是连接二维平面上两个不同点的线段。围栏之间不会相互相交，除了可能在端点处。所有围栏是连通的，即对于任意两段围栏 $f$ 和 $g$，都存在一条路径 $f = f_1, f_2, \\dots, f_k = g$，使得 $f_i$ 与 $f_{i+1}$ 共享一个端点。\n\n在你开始工作时，尚未建造任何围栏。建造工作通过一种特殊的“围栏发射”3D 打印机完成。只有一台这样的设备，因此围栏需要一段一段地建造。打印机足够小，可以视为平面上的一个点。\n\n要建造某段围栏 $f$，你必须首先将打印机放置在平面上的某个点 $p$，使得打印机能够“看到”整个 $f$，且视线不会被之前建造的围栏阻挡。形式化地说，$p$ 必须满足：\n\n- $p$ 不能在 $f$ 上（包括端点）。\n- 对于 $f$ 上的任意非端点 $q$，连接 $p$ 和 $q$ 的线段不能与任何已建造的围栏相交。\n\n移动打印机时，你可以从当前位置沿着一条连续但不一定直的路径移动，只要这条路径不与任何已建造的围栏相交（包括端点）。在建造第一段围栏之前和最后一段围栏之后，你可以选择打印机的任意位置。\n\n由于需要遵循上述流程，你并不总能以任意顺序建造围栏。例如，你可能选择了一个顺序，结果把打印机困在某处，无法移动到需要的位置。\n\n公司主管已经为 $K$ 段围栏指定了一个相对顺序（但这些围栏都还未建造），但他并未深思熟虑。为了避免惹怒主管，你需要遵循这个顺序，并将剩下的 $F-K$ 段围栏插入到任意位置以完成整个顺序。\n\n在这些限制下，请找出一种建造围栏的顺序。保证至少存在一种合法的顺序。", "inputFormat": "输入的第一行为测试用例数 $T$。接下来有 $T$ 组测试数据。每组测试数据的第一行为两个整数 $F$ 和 $K$，分别表示围栏总数和主管指定顺序中的围栏数。接下来 $F$ 行，第 $i$ 行（从 1 开始计数）包含四个整数 $A_i$、$B_i$、$C_i$ 和 $D_i$，表示第 $i$ 段围栏是从点 $(A_i, B_i)$ 到 $(C_i, D_i)$ 的线段。输入中的前 $K$ 段围栏即为主管指定顺序中的围栏。", "outputFormat": "对于每组测试数据，输出一行，格式为 `Case #x: y`，其中 $x$ 为测试用例编号（从 1 开始），$y$ 为一个用空格分隔的 $1$ 到 $F$ 的整数排列，表示一种合法的建造围栏顺序。", "hint": "**样例解释**\n\n注意，最后一个样例不会出现在测试集 1 中。\n\n在样例 1 中，可以按给定顺序建造围栏：$1, 2, 3, 4, 5, 6$。注意，围栏 $1$ 必须在围栏 $2$ 之前建造，这是主管的要求。\n\n在样例 2 中，无法按给定顺序建造围栏！一种可行的顺序是：$5, 6, 1, 2, 3, 4$。注意，当主管指定的顺序只包含一段围栏时，相对顺序条件总是自动满足。\n\n在样例 3 中，可以按顺序建造：$11, 10, 7, 8, 9, 1, 2, 3, 6, 5, 4$。注意，围栏 $1, 2, 3, 4$ 必须按这个相对顺序建造。\n\n下图展示了样例 1 的一种合法建造方式。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7k0wawc.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/db8ugko8.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/djg1s3jk.png)\n\n**数据范围**\n\n- $1 \\leq T \\leq 100$。\n- $4 \\leq F \\leq 300$。\n- $-10^5 \\leq A_i \\leq 10^5$，对所有 $i$。\n- $-10^5 \\leq B_i \\leq 10^5$，对所有 $i$。\n- $-10^5 \\leq C_i \\leq 10^5$，对所有 $i$。\n- $-10^5 \\leq D_i \\leq 10^5$，对所有 $i$。\n- $(A_i, B_i) \\neq (C_i, D_i)$，对所有 $i$。\n- 如果 $p$ 是某段围栏上的非端点，则 $p$ 不是任何其他围栏上的点。\n- 给定的围栏是连通的，如题目描述所定义。\n- 至少存在一种满足所有建造限制的围栏顺序。\n\n**测试集 1（12 分，公开）**\n\n- $1 \\leq K \\leq 2$。\n\n**测试集 2（23 分，隐藏）**\n\n- $1 \\leq K < F$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13153", "type": "P", "difficulty": 6, "samples": [["2\n3 4 2\n1 1 1\n3 3 2\n5 5 2\n4 1 2\n3 2 2", "Case #1: 4\nCase #2: 0"]], "limits": {"time": [30000, 30000], "memory": [1048576, 1048576]}, "tags": ["2018", "二分", "网络流", "最大流最小割定理", "Google Code Jam"], "title": "[GCJ 2018 Finals] Jurisdiction Restrictions", "background": "", "description": "The city of Gridtopia is a matrix of square cells (\"blocks\") with $R$ rows and $C$ columns; rows are numbered (starting from 1) from top to bottom, and columns are numbered (starting from 1) from left to right. The city is served by $S$ different police stations; the i-th station is in the block located in the $R_i$th row and the $C_i$th column, and no block contains more than one station.\n\nEach station is only able to patrol blocks that are no more than $D_i$ blocks away from that station, either horizontally or vertically. That is, the i-th station can only patrol the block in row $R'$ and column $C'$ if $\\max(|R' - R_i|, |C' - C_i|) \\leq D_i$. Put another way, the i-th station can patrol only blocks within the square of side length $2D_i + 1$ centered on that station.\n\nAs the new police commissioner, you need to assign some blocks within the city to exactly one station that is able to patrol it. Blocks that contain stations and blocks that no station is able to patrol should not be assigned. All other blocks have to be assigned. Moreover, you must distribute this assignment load as evenly as possible among stations. Let $A_i$ denote the number of blocks assigned to the i-th station; then your goal is to minimize the difference between the maximum of all the $A_i$ values and the minimum of all of the $A_i$ values. If you make optimal assignments, what is the smallest possible difference?\n", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each case begins with one line with three integers $R$, $C$, and $S$: respectively, the numbers of rows and columns in the grid of cells, and the number of stations. Then, there are $S$ more lines. The i-th of these has three integers $R_i$, $C_i$, and $D_i$: respectively, the row and column in which the i-th station is located, and the parameter that determines which blocks that station is able to patrol, as described above.\n", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the difference described above.", "hint": "In Sample Case #1, the city consists of a grid with 3 rows and 4 columns, with one station in the upper left block and one station in the block to the left of the lower right block. The first station can only patrol the three blocks that touch the edge or corner of its block; every other block is at a horizontal or vertical distance of more than 1 away. The second station can patrol any block in the grid (except for the blocks containing the stations). The difference in number of blocks assigned is minimized if you assign station 1 all three of the blocks it can patrol, and then assign the remaining seven blocks to station 2.\n\nIn Sample Case #2, one optimal strategy is to assign the blocks as follows. In this picture, $1$ represents station 1, $2$ represents station 2, $!$ represents a block assigned to station 1, $@$ represents a block assigned to station 2, and $.$ represents a block assigned to neither station (because neither station can patrol it). Notice that a station's assigned blocks do not need to form a single continuous area.\n\n```\n@@@@.\n!!!@.\n!2!@.\n1!!@.\n!@!@.\n```\n\n**Limits**\n\n- $1 \\leq T \\leq 100.$\n- $2 \\leq S \\leq 15.$\n- $1 \\leq R_i \\leq R,$ for all $i.$\n- $1 \\leq C_i \\leq C,$ for all $i.$\n- For all $i \\neq j,$ $R_i \\neq R_j$ and/or $C_i \\neq C_j.$ (No two stations are in the same block.)\n- $1 \\leq D_i < \\max(R, C),$ for all $i.$\n\n**Test set 1 (5 Pts, Visible)**\n\n- $1 \\leq R \\leq 20.$\n- $1 \\leq C \\leq 20.$\n\n**Test set 2 (23 Pts, Hidden)**\n\n- $1 \\leq R \\leq 10^9.$\n- $1 \\leq C \\leq 10^9.$", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 Finals] Jurisdiction Restrictions", "background": "", "description": "The city of Gridtopia is a matrix of square cells (\"blocks\") with $R$ rows and $C$ columns; rows are numbered (starting from 1) from top to bottom, and columns are numbered (starting from 1) from left to right. The city is served by $S$ different police stations; the i-th station is in the block located in the $R_i$th row and the $C_i$th column, and no block contains more than one station.\n\nEach station is only able to patrol blocks that are no more than $D_i$ blocks away from that station, either horizontally or vertically. That is, the i-th station can only patrol the block in row $R'$ and column $C'$ if $\\max(|R' - R_i|, |C' - C_i|) \\leq D_i$. Put another way, the i-th station can patrol only blocks within the square of side length $2D_i + 1$ centered on that station.\n\nAs the new police commissioner, you need to assign some blocks within the city to exactly one station that is able to patrol it. Blocks that contain stations and blocks that no station is able to patrol should not be assigned. All other blocks have to be assigned. Moreover, you must distribute this assignment load as evenly as possible among stations. Let $A_i$ denote the number of blocks assigned to the i-th station; then your goal is to minimize the difference between the maximum of all the $A_i$ values and the minimum of all of the $A_i$ values. If you make optimal assignments, what is the smallest possible difference?\n", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each case begins with one line with three integers $R$, $C$, and $S$: respectively, the numbers of rows and columns in the grid of cells, and the number of stations. Then, there are $S$ more lines. The i-th of these has three integers $R_i$, $C_i$, and $D_i$: respectively, the row and column in which the i-th station is located, and the parameter that determines which blocks that station is able to patrol, as described above.\n", "outputFormat": "For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the difference described above.", "hint": "In Sample Case #1, the city consists of a grid with 3 rows and 4 columns, with one station in the upper left block and one station in the block to the left of the lower right block. The first station can only patrol the three blocks that touch the edge or corner of its block; every other block is at a horizontal or vertical distance of more than 1 away. The second station can patrol any block in the grid (except for the blocks containing the stations). The difference in number of blocks assigned is minimized if you assign station 1 all three of the blocks it can patrol, and then assign the remaining seven blocks to station 2.\n\nIn Sample Case #2, one optimal strategy is to assign the blocks as follows. In this picture, $1$ represents station 1, $2$ represents station 2, $!$ represents a block assigned to station 1, $@$ represents a block assigned to station 2, and $.$ represents a block assigned to neither station (because neither station can patrol it). Notice that a station's assigned blocks do not need to form a single continuous area.\n\n```\n@@@@.\n!!!@.\n!2!@.\n1!!@.\n!@!@.\n```\n\n**Limits**\n\n- $1 \\leq T \\leq 100.$\n- $2 \\leq S \\leq 15.$\n- $1 \\leq R_i \\leq R,$ for all $i.$\n- $1 \\leq C_i \\leq C,$ for all $i.$\n- For all $i \\neq j,$ $R_i \\neq R_j$ and/or $C_i \\neq C_j.$ (No two stations are in the same block.)\n- $1 \\leq D_i < \\max(R, C),$ for all $i.$\n\n**Test set 1 (5 Pts, Visible)**\n\n- $1 \\leq R \\leq 20.$\n- $1 \\leq C \\leq 20.$\n\n**Test set 2 (23 Pts, Hidden)**\n\n- $1 \\leq R \\leq 10^9.$\n- $1 \\leq C \\leq 10^9.$", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 Finals] Jurisdiction Restrictions", "background": null, "description": "Gridtopia 城市是一个由 $R$ 行 $C$ 列方格（“街区”）组成的矩阵。行号从上到下编号（从 1 开始），列号从左到右编号（从 1 开始）。城市中有 $S$ 个不同的警察局，第 $i$ 个警察局位于第 $R_i$ 行第 $C_i$ 列的街区，并且每个街区最多只包含一个警察局。\n\n每个警察局只能巡逻距离其自身不超过 $D_i$ 个街区的区域（横向或纵向）。也就是说，第 $i$ 个警察局只能巡逻第 $R'$ 行第 $C'$ 列的街区，当且仅当 $\\max(|R' - R_i|, |C' - C_i|) \\leq D_i$。换句话说，第 $i$ 个警察局只能巡逻以其为中心、边长为 $2D_i + 1$ 的正方形范围内的街区。\n\n作为新任警察局长，你需要将城市中的部分街区分配给能够巡逻它们的某一个警察局，并且每个街区只能分配给一个警察局。包含警察局的街区以及没有任何警察局能够巡逻到的街区不需要分配。其他所有街区都必须被分配。此外，你还需要尽可能均匀地分配这些任务。设 $A_i$ 表示分配给第 $i$ 个警察局的街区数，你的目标是最小化所有 $A_i$ 的最大值与最小值之差。如果你采用最优分配方案，这个最小可能的差值是多少？", "inputFormat": "输入的第一行是测试用例数 $T$。接下来有 $T$ 组测试数据。每组数据的第一行为三个整数 $R$、$C$ 和 $S$，分别表示城市的行数、列数和警察局数量。接下来的 $S$ 行，每行三个整数 $R_i$、$C_i$ 和 $D_i$，分别表示第 $i$ 个警察局所在的行、列，以及该警察局能够巡逻的最大距离参数，如上所述。", "outputFormat": "对于每个测试用例，输出一行，格式为 `Case #x: y`，其中 $x$ 是测试用例编号（从 1 开始），$y$ 是上述最小差值。", "hint": "在样例 1 中，城市为 $3$ 行 $4$ 列的网格，一个警察局在左上角，一个警察局在右下角左侧的街区。第一个警察局只能巡逻与其相邻的三个街区，其他街区距离它的横向或纵向距离都超过 1。第二个警察局可以巡逻除警察局所在街区外的所有街区。如果将第一个警察局能巡逻的三个街区都分配给它，剩下的七个街区分配给第二个警察局，则分配的最大最小差值最小。\n\n在样例 2 中，一种最优分配方式如下图所示。图中 $1$ 表示第 1 个警察局，$2$ 表示第 2 个警察局，$!$ 表示分配给第 1 个警察局的街区，$@$ 表示分配给第 2 个警察局的街区，$.$ 表示没有分配给任何警察局（因为没有警察局能巡逻到）。注意，一个警察局分配到的街区不需要连成一片。\n\n```\n@@@@.\n!!!@.\n!2!@.\n1!!@.\n!@!@.\n```\n\n**数据范围**\n\n- $1 \\leq T \\leq 100$。\n- $2 \\leq S \\leq 15$。\n- $1 \\leq R_i \\leq R$，对所有 $i$。\n- $1 \\leq C_i \\leq C$，对所有 $i$。\n- 对所有 $i \\neq j$，$R_i \\neq R_j$ 或 $C_i \\neq C_j$（即没有两个警察局在同一个街区）。\n- $1 \\leq D_i < \\max(R, C)$，对所有 $i$。\n\n**测试点 1（5 分，可见）**\n\n- $1 \\leq R \\leq 20$。\n- $1 \\leq C \\leq 20$。\n\n**测试点 2（23 分，隐藏）**\n\n- $1 \\leq R \\leq 10^9$。\n- $1 \\leq C \\leq 10^9$。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13154", "type": "P", "difficulty": 7, "samples": [["4\n.@@ .@.\n.@. .@.\n.@@ @@.\n\n@@@ @@@\n@.@ @@@\n@@@ @@@\n\n.@. ...\n@@. .@@\n@.. ...\n\n... ..@\n... ..@\n@.. ...", "Case #1: POSSIBLE\n....11.. ....11..\n...221.. ...221..\n...211.. ...321..\n...22... ...32...\n.333.... .433....\n4343.... 5444....\n444..... 555.....\n........ ........\nCase #2: IMPOSSIBLE\nCase #3: POSSIBLE\n........ ........\n..T..I.. ..T..I..\n.TT..II. .tT..Ii.\n.T....I. .t....i.\n........ ........\n.LL..EE. .LL..EE.\n..LLEE.. ..llee..\n........ ........\nCase #4: POSSIBLE\nthe.CODE AAB.CDDE\nJam.2018 FFB.CGGE\n........ ........\nWorld... HHIIJ...\n.FiNALS. .KLLJMM.\n.cup.... .KNN....\n........ ........\nTRIUMPH! OOPPQQRR"]], "limits": {"time": [30000], "memory": [1048576]}, "tags": ["2018", "Special Judge", "Google Code Jam"], "title": "[GCJ 2018 Finals] Two-Tiling", "background": "", "description": "Your game company just ordered a lot of square game boards with $64$ blank unit cells, intending to turn them into chessboards, but your boss has suddenly declared that chess is out of fashion. To make the best use of all of these boards, you have designed a new puzzle that uses tiles.\n\nA tile is a contiguous set of unit cells, connected edge-to-edge, that can fit inside a $3\\times 3$ square of unit cells. For example, the following are examples of valid tiles (with each @ denoting a piece of the tile, and extra . characters for padding):\n\n```\n... @@@ @@@ .@@\n... @@@ @.@ @.@\n.@. @@@ @.. @@@\n```\n\nThe following would NOT be valid tiles:\n\n```\n@@. @.@ .@@.\n... .@. @@@@\n.@@ @.@ .@@.\n```\n\nWhen the solver of your new puzzle places a tile on the board, its unit cells must exactly overlap some unit cells on the board that have not already been covered by other tiles. A tile is still considered the same type of tile even after being arbitrarily translated, rotated (by multiples of 90 degrees), and/or reflected, and the solver is allowed to do any of those things to a tile while placing it. For example, all of these are considered to be the same tile (and other variants of that tile are possible):\n\n```\n.@. ..@ @.. ... @@.\n@@. .@@ @@. .@@ .@@\n@.. .@. .@. @@. ...\n```\n\nTo make your puzzle, you will color one or more of the cells on the board red. The solver will solve the puzzle by placing tiles on the board such that all red cells are covered up, but no other cell is covered up. To save on manufacturing costs, the solver receives only one type of tile, but they are given exactly enough copies of it to be able to cover all of the red cells.\n\nYour job is to decide which of the board's cells to color red. Unfortunately, your boss is still deciding which of two particular tiles to use for the game. You are tired of waiting, so you have decided to try to color a set of cells such that the puzzle can be solved regardless of which of the tiles ends up being used.", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow; each consists of four lines. Each of the first three lines has three characters, then a single space, then three more characters. The fourth line is a blank line.\n\nWhen looking at an entire case, the space characters separate a $3\\times 3$ grid on the left and a $3\\times 3$ grid on the right. Each grid represents a frame in which one of the two tiles is displayed. In each grid, each character is either @, representing a cell that is part of the tile, or ., representing a cell that is not part of the tile. Note that these . cells have nothing to do with the puzzle or the board, and are just padding to make the shape of the tile clear. It is guaranteed that the two tiles are not the same, as described in the statement above.\n", "outputFormat": "For each test case, output one line with `Case #x: y`, where $x$ is the test case number (starting from 1), and $y$ is POSSIBLE if there is a solution to the problem, and IMPOSSIBLE if there is not. Then, if there is a solution, output eight more lines of seventeen characters each, forming two 8x8 grids with one column of space characters in between. Each grid must use dot (.) characters to denote any blank cells, or characters from the following set of 64:\n\n```\n!?0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\n```\n\nto denote the individual tiles used in a solution to the puzzle. Within each $8\\times 8$ grid, each non-dot character must denote a part of the same single tile, and different characters must denote different tiles. Each tile in the grid on the left must be the same as the tile on the left in input, up to rotations, translations and reflections. Each tile in the grid on the right must be the same as the tile on the right in input, up to rotations, translations and reflections. The set of cells that are not dots in both 8x8 grids must be the same, and must be nonempty.\n\nIf there are multiple valid solutions, you may output any one of them.", "hint": "**Sample Explanation**\n\nThe sample output displays one set of answers to the sample cases. Other answers may be possible.\n\nIn Sample Case #2, there is no possible set of red cells that would make the puzzle solvable regardless of which of the two tiles is chosen.\n\nIn Sample Cases #3 and #4, note that the chosen set of red cells is not required to be contiguous. Also note that the dots in the input for a tile are not considered part of the tile, and have no significance in creating the puzzle. For example, the given answer would also be acceptable for the following input:\n\n```\n... ...\n.@. .@.\n... .@.\n```\n\nMoreover, that input is isomorphic with Sample Case #4, and would not appear in the same test set along with Sample Case #4.\n\n**Limits for Test set 1 (Visible; the only test set)**\n\n- $T = 595$. (Every possible test case, up to isomorphism, is included.)\n- The cells in each tile in the input form a single contiguous group via their edge-to-edge connections.\n- The two tiles in the input are not the same, as described in the statement.", "locale": "en", "translations": {"en": {"title": "[GCJ 2018 Finals] Two-Tiling", "background": "", "description": "Your game company just ordered a lot of square game boards with $64$ blank unit cells, intending to turn them into chessboards, but your boss has suddenly declared that chess is out of fashion. To make the best use of all of these boards, you have designed a new puzzle that uses tiles.\n\nA tile is a contiguous set of unit cells, connected edge-to-edge, that can fit inside a $3\\times 3$ square of unit cells. For example, the following are examples of valid tiles (with each @ denoting a piece of the tile, and extra . characters for padding):\n\n```\n... @@@ @@@ .@@\n... @@@ @.@ @.@\n.@. @@@ @.. @@@\n```\n\nThe following would NOT be valid tiles:\n\n```\n@@. @.@ .@@.\n... .@. @@@@\n.@@ @.@ .@@.\n```\n\nWhen the solver of your new puzzle places a tile on the board, its unit cells must exactly overlap some unit cells on the board that have not already been covered by other tiles. A tile is still considered the same type of tile even after being arbitrarily translated, rotated (by multiples of 90 degrees), and/or reflected, and the solver is allowed to do any of those things to a tile while placing it. For example, all of these are considered to be the same tile (and other variants of that tile are possible):\n\n```\n.@. ..@ @.. ... @@.\n@@. .@@ @@. .@@ .@@\n@.. .@. .@. @@. ...\n```\n\nTo make your puzzle, you will color one or more of the cells on the board red. The solver will solve the puzzle by placing tiles on the board such that all red cells are covered up, but no other cell is covered up. To save on manufacturing costs, the solver receives only one type of tile, but they are given exactly enough copies of it to be able to cover all of the red cells.\n\nYour job is to decide which of the board's cells to color red. Unfortunately, your boss is still deciding which of two particular tiles to use for the game. You are tired of waiting, so you have decided to try to color a set of cells such that the puzzle can be solved regardless of which of the tiles ends up being used.", "inputFormat": "The first line of the input gives the number of test cases, $T$. $T$ test cases follow; each consists of four lines. Each of the first three lines has three characters, then a single space, then three more characters. The fourth line is a blank line.\n\nWhen looking at an entire case, the space characters separate a $3\\times 3$ grid on the left and a $3\\times 3$ grid on the right. Each grid represents a frame in which one of the two tiles is displayed. In each grid, each character is either @, representing a cell that is part of the tile, or ., representing a cell that is not part of the tile. Note that these . cells have nothing to do with the puzzle or the board, and are just padding to make the shape of the tile clear. It is guaranteed that the two tiles are not the same, as described in the statement above.\n", "outputFormat": "For each test case, output one line with `Case #x: y`, where $x$ is the test case number (starting from 1), and $y$ is POSSIBLE if there is a solution to the problem, and IMPOSSIBLE if there is not. Then, if there is a solution, output eight more lines of seventeen characters each, forming two 8x8 grids with one column of space characters in between. Each grid must use dot (.) characters to denote any blank cells, or characters from the following set of 64:\n\n```\n!?0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\n```\n\nto denote the individual tiles used in a solution to the puzzle. Within each $8\\times 8$ grid, each non-dot character must denote a part of the same single tile, and different characters must denote different tiles. Each tile in the grid on the left must be the same as the tile on the left in input, up to rotations, translations and reflections. Each tile in the grid on the right must be the same as the tile on the right in input, up to rotations, translations and reflections. The set of cells that are not dots in both 8x8 grids must be the same, and must be nonempty.\n\nIf there are multiple valid solutions, you may output any one of them.", "hint": "**Sample Explanation**\n\nThe sample output displays one set of answers to the sample cases. Other answers may be possible.\n\nIn Sample Case #2, there is no possible set of red cells that would make the puzzle solvable regardless of which of the two tiles is chosen.\n\nIn Sample Cases #3 and #4, note that the chosen set of red cells is not required to be contiguous. Also note that the dots in the input for a tile are not considered part of the tile, and have no significance in creating the puzzle. For example, the given answer would also be acceptable for the following input:\n\n```\n... ...\n.@. .@.\n... .@.\n```\n\nMoreover, that input is isomorphic with Sample Case #4, and would not appear in the same test set along with Sample Case #4.\n\n**Limits for Test set 1 (Visible; the only test set)**\n\n- $T = 595$. (Every possible test case, up to isomorphism, is included.)\n- The cells in each tile in the input form a single contiguous group via their edge-to-edge connections.\n- The two tiles in the input are not the same, as described in the statement.", "locale": "en"}, "zh-CN": {"title": "[GCJ 2018 Finals] Two-Tiling", "background": null, "description": "你的游戏公司刚刚订购了许多有 $64$ 个空白单元格的正方形游戏棋盘，原本打算将它们制作为国际象棋棋盘，但你的老板突然宣布国际象棋已经过时。为了充分利用这些棋盘，你设计了一种新的拼图游戏，使用“瓷砖”。\n\n一个“瓷砖”是由若干个单元格通过边相连组成的连续区域，且可以放入一个 $3\\times 3$ 的单元格正方形内。例如，以下是一些合法的瓷砖示例（每个 @ 表示瓷砖的一部分，额外的 . 字符用于填充）：\n\n```\n... @@@ @@@ .@@\n... @@@ @.@ @.@\n.@. @@@ @.. @@@\n```\n\n以下则不是合法的瓷砖：\n\n```\n@@. @.@ .@@.\n... .@. @@@@\n.@@ @.@ .@@.\n```\n\n当玩家在棋盘上放置瓷砖时，瓷砖的单元格必须完全覆盖棋盘上未被其他瓷砖覆盖的某些单元格。即使经过任意平移、90 度倍数的旋转和/或翻转后，仍然视为同一种瓷砖，玩家在放置时可以进行这些操作。例如，以下所有都是同一种瓷砖（还可能有其它变体）：\n\n```\n.@. ..@ @.. ... @@.\n@@. .@@ @@. .@@ .@@\n@.. .@. .@. @@. ...\n```\n\n为了制作拼图，你会将棋盘上的一个或多个单元格涂成红色。玩家需要通过放置瓷砖，使所有红色单元格都被覆盖，且没有其他单元格被覆盖。为节省制造成本，玩家只会获得一种瓷砖，但会获得恰好足够多的该瓷砖以覆盖所有红色单元格。\n\n你的任务是决定哪些棋盘单元格需要涂成红色。不幸的是，你的老板还在犹豫究竟用哪两种瓷砖。你厌倦了等待，于是决定尝试涂色，使得无论最终选择哪种瓷砖，拼图都能被解出。", "inputFormat": "输入的第一行为测试用例数 $T$。接下来有 $T$ 组测试用例；每组包含四行。前三行每行有三个字符，然后一个空格，再三个字符。第四行为空行。\n\n每组测试用例中，空格将左侧和右侧的两个 $3\\times 3$ 网格分开。每个网格表示一种瓷砖的形状。网格中的每个字符要么是 @（表示瓷砖的一部分），要么是 .（表示不是瓷砖的一部分，仅用于填充以便形状清晰）。注意，这些 . 与拼图或棋盘无关，仅用于展示瓷砖形状。保证输入的两种瓷砖不是同一种瓷砖（如上文所述）。", "outputFormat": "对于每个测试用例，输出一行 `Case #x: y`，其中 $x$ 是测试用例编号（从 1 开始），$y$ 为 POSSIBLE（存在解）或 IMPOSSIBLE（不存在解）。如果存在解，则再输出八行，每行十七个字符，形成两个 $8\\times 8$ 的网格，中间用一个空格分隔。每个网格用点（.）表示空白单元格，或用如下 64 个字符之一：\n\n```\n!?0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\n```\n\n表示每个瓷砖的不同部分。在每个 $8\\times 8$ 网格中，相同的非点字符表示同一个瓷砖的不同部分，不同字符表示不同的瓷砖。左侧网格中的每个瓷砖必须与输入左侧的瓷砖一致（允许旋转、平移和翻转），右侧网格同理。两个 $8\\times 8$ 网格中非点字符所在的单元格集合必须完全相同，且非空。\n\n如果有多组合法解，可以输出任意一组。", "hint": "**样例解释**\n\n样例输出展示了样例的某一组答案，其他答案也可能合法。\n\n在样例第 2 组中，不存在一组红色单元格能使得无论选择哪种瓷砖都能解出拼图。\n\n在样例第 3、4 组中，所选的红色单元格不要求连通。注意，输入中瓷砖的点（.）不参与拼图，仅用于展示。例如，以下输入也可以接受：\n\n```\n... ...\n.@. .@.\n... .@.\n```\n\n此外，该输入与样例第 4 组同构，因此不会同时出现在同一测试集中。\n\n**第 1 组数据范围（可见，且为唯一测试集）**\n\n- $T = 595$。（包含所有可能的测试用例，按同构分类）\n- 输入中每个瓷砖的单元格通过边相连，形成一个连通块。\n- 输入的两种瓷砖不是同一种瓷砖（如上文所述）。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
