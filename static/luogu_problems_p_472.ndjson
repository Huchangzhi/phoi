{"pid": "P10573", "type": "P", "difficulty": 6, "samples": [["5 6 1\n1 2\n1 3\n1 5\n2 3\n2 4\n4 5", "3 3 5 5 5\n"], ["8 10 1\n1 3\n1 4\n1 5\n2 3\n2 7\n3 6\n4 6\n5 8\n6 7\n7 8\n", "8 8 7 7 5 4 3 3\n"], ["14 19 2\n1 3\n1 4\n1 9\n2 5\n2 14\n3 7\n4 5\n4 6\n4 7\n4 8\n5 6\n5 11\n6 8\n7 9\n8 10\n8 12\n9 10\n10 11\n11 12\n", "2 1 2 4 1 4 2 4 2 5 1 5 1 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2024", "洛谷原创", "O2优化", "连通块", "洛谷月赛"], "title": "[JRKSJ R8] C0mp0nents", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/m71eooc6.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b626ra6r.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/it3ulcpz.png)", "description": "小 I 有一张 $n$ 个点、$m$ 条边的无向图，保证图无重边、无自环。初始时第 $i$ 个点的点权 $a_i = i$。小 I 有一个额外的常量 $k$。\n\n小 R 可以进行很多很多次操作。每次操作，她选择图上两个相邻的节点 $x, y$ 满足 $\\lvert a_x - a_y \\rvert = k$，随后小 I 会将 $a_x$ 设为 $a_y$。\n\n对每个 $1 \\leq s \\leq n$，**如果在过程中不修改 $\\bm{a_x = s}$ 的节点 $\\bm x$ 的权值**，小 I 想知道：若干次操作后，图上最多有多少个点满足 $a_i = s$。", "inputFormat": "第一行三个整数 $n, m, k$。\n\n接下来 $m$ 行，每行两个整数 $u, v$，依次表示一条连接 $u, v$ 的边。", "outputFormat": "一行 $n$ 个整数，第 $i$ 个整数表示 $s = i$ 时的答案。", "hint": "### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0（0 pts）：样例；\n- Subtask 1（5 pts）：$n \\leq 200$，$m \\leq 400$；\n- Subtask 2（20 pts）：$n \\leq 5000$，$m \\leq 10^4$；\n- Subtask 3（25 pts）：$n \\leq 10^5$，$m \\leq 3\\times 10^5$；\n- Subtask 4（50 pts）：无特殊限制。\n\n对于所有数据，满足 $1 \\leq k \\leq n \\leq 4\\times 10^5$，$1 \\leq u, v \\leq n$，$0 \\leq m \\leq 10^6$，保证图无重边、无自环。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R8] C0mp0nents", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/m71eooc6.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b626ra6r.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/it3ulcpz.png)", "description": "小 I 有一张 $n$ 个点、$m$ 条边的无向图，保证图无重边、无自环。初始时第 $i$ 个点的点权 $a_i = i$。小 I 有一个额外的常量 $k$。\n\n小 R 可以进行很多很多次操作。每次操作，她选择图上两个相邻的节点 $x, y$ 满足 $\\lvert a_x - a_y \\rvert = k$，随后小 I 会将 $a_x$ 设为 $a_y$。\n\n对每个 $1 \\leq s \\leq n$，**如果在过程中不修改 $\\bm{a_x = s}$ 的节点 $\\bm x$ 的权值**，小 I 想知道：若干次操作后，图上最多有多少个点满足 $a_i = s$。", "inputFormat": "第一行三个整数 $n, m, k$。\n\n接下来 $m$ 行，每行两个整数 $u, v$，依次表示一条连接 $u, v$ 的边。", "outputFormat": "一行 $n$ 个整数，第 $i$ 个整数表示 $s = i$ 时的答案。", "hint": "### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0（0 pts）：样例；\n- Subtask 1（5 pts）：$n \\leq 200$，$m \\leq 400$；\n- Subtask 2（20 pts）：$n \\leq 5000$，$m \\leq 10^4$；\n- Subtask 3（25 pts）：$n \\leq 10^5$，$m \\leq 3\\times 10^5$；\n- Subtask 4（50 pts）：无特殊限制。\n\n对于所有数据，满足 $1 \\leq k \\leq n \\leq 4\\times 10^5$，$1 \\leq u, v \\leq n$，$0 \\leq m \\leq 10^6$，保证图无重边、无自环。", "locale": "zh-CN"}}}
{"pid": "P10574", "type": "P", "difficulty": 7, "samples": [["5 7\n1 1 1 4\n2 1 5\n4 2 1\n3 4 1\n2 5 5\n2 4 5\n4 4 4\n3 2 2", "0\n6\n14\n0\n0\n6\n10"], ["6 10\n1 1 1 1 2\n6 4 1\n3 1 1\n1 1 1\n3 4 1\n5 2 1\n3 3 1\n3 4 1\n2 2 1\n2 5 1\n3 1 1", "12\n13\n13\n18\n22\n28\n36\n38\n46\n48"], ["8 10\n1 1 2 1 3 3 3\n7 3 1\n2 4 1\n5 2 1\n5 2 1\n3 1 1\n6 2 1\n1 4 1\n8 4 1\n6 4 1\n3 2 1", "9\n14\n18\n22\n23\n27\n27\n35\n47\n47"]], "limits": {"time": [1000, 1000, 1000, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "洛谷原创", "O2优化", "洛谷月赛"], "title": "[JRKSJ R8] 暴风雪", "background": "![]( https://cdn.luogu.com.cn/upload/image_hosting/ok3qwkac.png)", "description": "层叠都市可以被抽象为一棵树。于是给你一棵带点权 $v_i$ 的树，树以 $1$ 为根。初始点权 $v_i$ 均为 $0$。\n\n定义 $\\text{dis}(x,y)$ 为树上 $x,y$ 之间的距离，即 $x\\to y$ 的简单路径上的边数。\n\n设 $\\text{subtree}(x)$ 为树上以 $x$ 为根的子树，定义 $f(x)=\\max_{d\\ge 0} \\sum_{y\\in\\text{subtree}(x)} v_y[\\text{dis}(x,y)=d]$。也就是说，$f(x)$ 表示 $x$ 子树中的每一层的点权和的最大值。\n\n现在给出 $m$ 次操作，每次操作中给出 $x,w,y$，先令 $v_x\\gets v_x+w$，然后求 $\\sum_{i\\in \\text{subtree}(y)} f(i)$。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n-1$ 个整数 $f_{2\\dots n}$，依次表示结点 $2,3,\\dots ,n$ 的父亲。\n\n接下来 $m$ 行，每行三个整数 $x,w,y$。", "outputFormat": "输出共 $m$ 行，每行一个整数表示答案。", "hint": "### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n,m\\le$ |  特殊性质 |  $\\text{Score}$ | 时间限制|\n| :----------: | :----------: | :----------: | :----------: |  :----------: |  \n| $1$ | $100$ |  | $5$ | 1s |\n| $2$ | $5000$ |  | $15$ | 1s |\n| $3$ | $3\\times10^5$ | $f_i=i-1$ | $10$ | 4.5s |\n| $4$ | $7\\times 10^4$ |  | $20$ | 4.5s |\n| $5$ | $3\\times10^5$ |  | $50$ | 4.5s |\n\n对于所有数据，$1\\le n,m\\le3\\times 10^5$，$1\\le x,y\\le n$，$1\\le w \\le 10^8$，$1\\le f_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R8] 暴风雪", "background": "![]( https://cdn.luogu.com.cn/upload/image_hosting/ok3qwkac.png)", "description": "层叠都市可以被抽象为一棵树。于是给你一棵带点权 $v_i$ 的树，树以 $1$ 为根。初始点权 $v_i$ 均为 $0$。\n\n定义 $\\text{dis}(x,y)$ 为树上 $x,y$ 之间的距离，即 $x\\to y$ 的简单路径上的边数。\n\n设 $\\text{subtree}(x)$ 为树上以 $x$ 为根的子树，定义 $f(x)=\\max_{d\\ge 0} \\sum_{y\\in\\text{subtree}(x)} v_y[\\text{dis}(x,y)=d]$。也就是说，$f(x)$ 表示 $x$ 子树中的每一层的点权和的最大值。\n\n现在给出 $m$ 次操作，每次操作中给出 $x,w,y$，先令 $v_x\\gets v_x+w$，然后求 $\\sum_{i\\in \\text{subtree}(y)} f(i)$。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n-1$ 个整数 $f_{2\\dots n}$，依次表示结点 $2,3,\\dots ,n$ 的父亲。\n\n接下来 $m$ 行，每行三个整数 $x,w,y$。", "outputFormat": "输出共 $m$ 行，每行一个整数表示答案。", "hint": "### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n,m\\le$ |  特殊性质 |  $\\text{Score}$ | 时间限制|\n| :----------: | :----------: | :----------: | :----------: |  :----------: |  \n| $1$ | $100$ |  | $5$ | 1s |\n| $2$ | $5000$ |  | $15$ | 1s |\n| $3$ | $3\\times10^5$ | $f_i=i-1$ | $10$ | 4.5s |\n| $4$ | $7\\times 10^4$ |  | $20$ | 4.5s |\n| $5$ | $3\\times10^5$ |  | $50$ | 4.5s |\n\n对于所有数据，$1\\le n,m\\le3\\times 10^5$，$1\\le x,y\\le n$，$1\\le w \\le 10^8$，$1\\le f_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P10575", "type": "P", "difficulty": 1, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2024", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 A] 下一次相遇", "background": "", "description": "2024 年 6 月 1 日，这一天显得格外特别，因为欢乐的儿童节与星期六巧合地相遇了，这无疑为孩子们增添了诸多喜悦，让孩子们可以尽情地沉浸在这愉快的周末与浓厚的节日氛围当中。\n\n不过，这也不禁引人思索，下一次的 6 月 1 日儿童节再度与星期六相遇，将会是在哪一年呢？请你以四位整数的格式给出答案。", "inputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "outputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 A] 下一次相遇", "background": "", "description": "2024 年 6 月 1 日，这一天显得格外特别，因为欢乐的儿童节与星期六巧合地相遇了，这无疑为孩子们增添了诸多喜悦，让孩子们可以尽情地沉浸在这愉快的周末与浓厚的节日氛围当中。\n\n不过，这也不禁引人思索，下一次的 6 月 1 日儿童节再度与星期六相遇，将会是在哪一年呢？请你以四位整数的格式给出答案。", "inputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "outputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10576", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2024", "数论", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 A] 儿童节快乐", "background": "", "description": "五彩斑斓的气球在蓝天下悠然飘荡，轻快的音乐在耳边持续回荡，小朋友们手牵着手一同畅快欢笑。在这样一片安乐祥和的氛围下，六一来了。\n\n今天是六一儿童节，小蓝老师为了让大家在节日里享受解题的乐趣，特地准备了一道有趣的题目。\n\n题目内容为：求出所有满足以下条件的整数 $n$ 的总和：\n\n1. $(n+10120300500)$ 是一个完全平方数。\n2. $(n-10120300500)$ 也是一个完全平方数。\n\n一个数如果可以表示为另一个整数的平方，那么这个数就叫做完全平方数。例如，$4$ 可以表示为 $2$ 的平方，$9$ 可以表示为 $3$ 的平方，因此 $4$ 和 $9$ 都是完全平方数。\n\n请大家用心仔细地思考，求出答案。同时祝大家儿童节快乐，解题过程开心顺遂！", "inputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "outputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 A] 儿童节快乐", "background": "", "description": "五彩斑斓的气球在蓝天下悠然飘荡，轻快的音乐在耳边持续回荡，小朋友们手牵着手一同畅快欢笑。在这样一片安乐祥和的氛围下，六一来了。\n\n今天是六一儿童节，小蓝老师为了让大家在节日里享受解题的乐趣，特地准备了一道有趣的题目。\n\n题目内容为：求出所有满足以下条件的整数 $n$ 的总和：\n\n1. $(n+10120300500)$ 是一个完全平方数。\n2. $(n-10120300500)$ 也是一个完全平方数。\n\n一个数如果可以表示为另一个整数的平方，那么这个数就叫做完全平方数。例如，$4$ 可以表示为 $2$ 的平方，$9$ 可以表示为 $3$ 的平方，因此 $4$ 和 $9$ 都是完全平方数。\n\n请大家用心仔细地思考，求出答案。同时祝大家儿童节快乐，解题过程开心顺遂！", "inputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "outputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10577", "type": "P", "difficulty": 3, "samples": [["5\n2 5 7 9 1", "1 6 6 6 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["并查集", "2024", "排序", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 A] 兔子集结", "background": "", "description": "在森林幽静的一隅，有一村落居住着 $n$ 只兔子。\n\n某个月光皎洁的夜晚，这些兔子列成一队，准备开始一场集结跳跃活动。村落中的每只兔子都占据一个位置，对于第 $i$ 只兔子，其位置为 $p_i$。我们称位置较小的为左边，位置较大的为右边。\n\n按照兔子村落的习俗，每只兔子都会选择距离自己最近的兔子作为同伴，并向同伴所在的方向进行跳跃。如果一只兔子左边和右边的兔子距离它一样近，那么它会选择左边的兔子作为同伴。\n\n兔子的每次跳跃，只能向左或向右移动一个单位距离。也就是说，如果一只兔子当前位于 $x$ 的位置，那么它下一次跳跃后会到达 $x-1$ 或者 $x+1$ 的位置。\n\n当两只相互靠近的兔子之间的距离为 $1$ 时，左边的兔子会停在原地，而右边的兔子会跳到左边兔子的位置上，完成集结。\n\n兔子们会一直跳跃，直到与自己最初选择的同伴完成集结后停下。\n\n请问，当所有兔子都完成集结后，每只兔子都分别位于哪个位置上？", "inputFormat": "输入的第一行包含一个整数 $n$，表示兔子的数量。\n第二行包含 $n$ 个整数 $p_1,p_2,\\cdots, p_n$，相邻整数之间使用一个空格分隔，表示每只兔子的初始位置。", "outputFormat": "输出一行包含 $n$ 个整数，表示每只兔子完成集结后的位置。", "hint": "**【样例说明】**\n\n兔子 $1$ 选择的同伴为兔子 $5$，兔子 $5$ 选择的同伴为兔子 $1$。由于它们彼此间的距离为 $1$，因此兔子 $5$ 会停在原地，而兔子 $1$ 会跳到位置 $1$ 上，与兔子 $5$完成集结。\n\n兔子 $2$ 选择的同伴为兔子 $3$，兔子 $4$ 选择的同伴也为兔子3。对于兔子 $3$ 来说，兔子 $2$ 和兔子 $4$ 与它的距离相同，所以它会选择左边的兔子 $2$ 作为同伴。兔子 $2$ 会向右跳一个位置，兔子 $3$ 会向左跳一个位置，兔子 $4$ 会向左跳一个位置。此时，兔子 $2$ 和兔子 $3$ 均位于位置 $6$，完成集结（停止跳跃）。兔子 $4$ 会继续向左跳跃，直到跳到位置 $6$ 后与兔子 $3$ 完成集结。\n\n**【评测用例规模与约定】**\n\n对于 $40\\%$ 的评测用例，$2\\le n\\le 500$，$1\\le p_i\\le 10^5$，$p_1,p_2,\\cdots,p_n$ 各不相同。  \n对于所有评测用例，$2\\le n \\le 10^5$，$1 \\le p_i \\le 10^9$，$p_1,p_2,\\cdots,p_n$ 各不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 A] 兔子集结", "background": "", "description": "在森林幽静的一隅，有一村落居住着 $n$ 只兔子。\n\n某个月光皎洁的夜晚，这些兔子列成一队，准备开始一场集结跳跃活动。村落中的每只兔子都占据一个位置，对于第 $i$ 只兔子，其位置为 $p_i$。我们称位置较小的为左边，位置较大的为右边。\n\n按照兔子村落的习俗，每只兔子都会选择距离自己最近的兔子作为同伴，并向同伴所在的方向进行跳跃。如果一只兔子左边和右边的兔子距离它一样近，那么它会选择左边的兔子作为同伴。\n\n兔子的每次跳跃，只能向左或向右移动一个单位距离。也就是说，如果一只兔子当前位于 $x$ 的位置，那么它下一次跳跃后会到达 $x-1$ 或者 $x+1$ 的位置。\n\n当两只相互靠近的兔子之间的距离为 $1$ 时，左边的兔子会停在原地，而右边的兔子会跳到左边兔子的位置上，完成集结。\n\n兔子们会一直跳跃，直到与自己最初选择的同伴完成集结后停下。\n\n请问，当所有兔子都完成集结后，每只兔子都分别位于哪个位置上？", "inputFormat": "输入的第一行包含一个整数 $n$，表示兔子的数量。\n第二行包含 $n$ 个整数 $p_1,p_2,\\cdots, p_n$，相邻整数之间使用一个空格分隔，表示每只兔子的初始位置。", "outputFormat": "输出一行包含 $n$ 个整数，表示每只兔子完成集结后的位置。", "hint": "**【样例说明】**\n\n兔子 $1$ 选择的同伴为兔子 $5$，兔子 $5$ 选择的同伴为兔子 $1$。由于它们彼此间的距离为 $1$，因此兔子 $5$ 会停在原地，而兔子 $1$ 会跳到位置 $1$ 上，与兔子 $5$完成集结。\n\n兔子 $2$ 选择的同伴为兔子 $3$，兔子 $4$ 选择的同伴也为兔子3。对于兔子 $3$ 来说，兔子 $2$ 和兔子 $4$ 与它的距离相同，所以它会选择左边的兔子 $2$ 作为同伴。兔子 $2$ 会向右跳一个位置，兔子 $3$ 会向左跳一个位置，兔子 $4$ 会向左跳一个位置。此时，兔子 $2$ 和兔子 $3$ 均位于位置 $6$，完成集结（停止跳跃）。兔子 $4$ 会继续向左跳跃，直到跳到位置 $6$ 后与兔子 $3$ 完成集结。\n\n**【评测用例规模与约定】**\n\n对于 $40\\%$ 的评测用例，$2\\le n\\le 500$，$1\\le p_i\\le 10^5$，$p_1,p_2,\\cdots,p_n$ 各不相同。  \n对于所有评测用例，$2\\le n \\le 10^5$，$1 \\le p_i \\le 10^9$，$p_1,p_2,\\cdots,p_n$ 各不相同。", "locale": "zh-CN"}}}
{"pid": "P10578", "type": "P", "difficulty": 3, "samples": [["2\n1 2 3\n4 5 6\n7 8 9\n1 5 2\n4 6 3\n7 8 9", "0\n3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["搜索", "2024", "广度优先搜索 BFS", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 A] 旋转九宫格", "background": "", "description": "给定一个 $3\\times 3$ 的九宫格，每个格子内分别含有一个数字，每个格子里的数字互不相同。每步我们可以选择任意一个 $2\\times 2$ 的区域将其顺时针旋转，例如：\n\n例如\n\n```plain\n1 2 3\n4 5 6\n7 8 9\n```\n\n将其旋转右上角，可得：\n\n```plain\n1 5 2\n4 6 3\n7 8 9\n```\n\n问最少需要几步才能将给定的状态旋转为\n\n```plain\n1 2 3\n4 5 6\n7 8 9\n```", "inputFormat": "输入的第一行包含一个整数 $T$ 表示询问的组数。\n\n接下来依次输入每组询问。\n\n每组询问包含三行，每行包含三个数，表示询问的九宫格的状态。", "outputFormat": "输出 $T$ 行，每行包含一个整数表示本次询问的答案。", "hint": "对于 $60\\%$ 的评测用例，$T=1$;  \n对于所有评测用例，$T\\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 A] 旋转九宫格", "background": "", "description": "给定一个 $3\\times 3$ 的九宫格，每个格子内分别含有一个数字，每个格子里的数字互不相同。每步我们可以选择任意一个 $2\\times 2$ 的区域将其顺时针旋转，例如：\n\n例如\n\n```plain\n1 2 3\n4 5 6\n7 8 9\n```\n\n将其旋转右上角，可得：\n\n```plain\n1 5 2\n4 6 3\n7 8 9\n```\n\n问最少需要几步才能将给定的状态旋转为\n\n```plain\n1 2 3\n4 5 6\n7 8 9\n```", "inputFormat": "输入的第一行包含一个整数 $T$ 表示询问的组数。\n\n接下来依次输入每组询问。\n\n每组询问包含三行，每行包含三个数，表示询问的九宫格的状态。", "outputFormat": "输出 $T$ 行，每行包含一个整数表示本次询问的答案。", "hint": "对于 $60\\%$ 的评测用例，$T=1$;  \n对于所有评测用例，$T\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10579", "type": "P", "difficulty": 3, "samples": [["4 1 5 6\n1 2 3 4", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "2024", "前缀和", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 A] 最长子段", "background": "", "description": "给定一个长度为 $n$ 的序列 $(s_1,s_2,\\cdots,s_n)$ 和三个数 $a,b,c$，你需要找出一对 $L,R$ 满足如下式子：\n\n$$\n\\sum\\limits_{i=L}^Rs_i>a(bR-cL),1 \\le L \\le R \\le n\n$$\n\n即，序列中的第 $L$ 至 $R$ 项之和大于 $a\\cdot (b\\cdot R - c \\cdot L)$，求出满足条件的 $L,R$ 中 $R - L + 1$ 的最大值。\n\n测试数据保证存在这样的一对 $L$ 和 $R$。", "inputFormat": "输入的第一行包含四个整数 $n,a,b,c$，相邻整数之间使用一个空格分隔。\n\n第二行包含 $n$ 个整数 $s_1,s_2,\\cdots,s_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "对于 $60\\%$ 的评测用例，$n\\le 5000$；  \n对于所有评测用例，$1\\le n\\le 3 \\times 10^5$，$1\\le a,b,c\\le 1000$，$|s_i| \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 A] 最长子段", "background": "", "description": "给定一个长度为 $n$ 的序列 $(s_1,s_2,\\cdots,s_n)$ 和三个数 $a,b,c$，你需要找出一对 $L,R$ 满足如下式子：\n\n$$\n\\sum\\limits_{i=L}^Rs_i>a(bR-cL),1 \\le L \\le R \\le n\n$$\n\n即，序列中的第 $L$ 至 $R$ 项之和大于 $a\\cdot (b\\cdot R - c \\cdot L)$，求出满足条件的 $L,R$ 中 $R - L + 1$ 的最大值。\n\n测试数据保证存在这样的一对 $L$ 和 $R$。", "inputFormat": "输入的第一行包含四个整数 $n,a,b,c$，相邻整数之间使用一个空格分隔。\n\n第二行包含 $n$ 个整数 $s_1,s_2,\\cdots,s_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "对于 $60\\%$ 的评测用例，$n\\le 5000$；  \n对于所有评测用例，$1\\le n\\le 3 \\times 10^5$，$1\\le a,b,c\\le 1000$，$|s_i| \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10580", "type": "P", "difficulty": 4, "samples": [["3\n3 6 2\n12 144 3\n233 251640 10", "2\n72\n905954656"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "容斥原理", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 A] gcd 与 lcm", "background": "", "description": "给定两个数 $x,y$，求有多少种不同的长度为 $n$ 的序列 $(a_1,a_2,\\cdots,a_n)$，其所有元素的最大公约数为 $x$ 且最小公倍数为 $y$。\n\n两个序列 $(a_1,a_2,\\cdots,a_n)$ 与 $(b_1,b_2,\\cdots,b_n)$ 不同，是指存在至少一个位置 $i$ 满足 $a_i\\neq b_i$。\n\n由于答案可能很大，请输出答案对 $998\\ 244\\ 353$ 取模后的结果。", "inputFormat": "输入的第一行包含一个整数 $Q$ 表示询问次数。\n\n接下来 $Q$ 行，每行包含三个整数 $x,y,n$ 表示一组询问，相邻整数之间使用一个空格分隔。对于每个询问，保证至少存在一个满足条件的序列。\n", "outputFormat": "输出 $Q$ 行，每行包含一个整数，依次表示每个询问的答案。", "hint": "对于 $40\\%$ 的评测用例，$n\\le 30$；  \n对于 $70\\%$ 的评测用例，$n\\le 5000$；  \n对于所有评测用例，$1\\le Q\\le 100$，$2\\le n\\le 10^5$，$1\\le x,y\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 A] gcd 与 lcm", "background": "", "description": "给定两个数 $x,y$，求有多少种不同的长度为 $n$ 的序列 $(a_1,a_2,\\cdots,a_n)$，其所有元素的最大公约数为 $x$ 且最小公倍数为 $y$。\n\n两个序列 $(a_1,a_2,\\cdots,a_n)$ 与 $(b_1,b_2,\\cdots,b_n)$ 不同，是指存在至少一个位置 $i$ 满足 $a_i\\neq b_i$。\n\n由于答案可能很大，请输出答案对 $998\\ 244\\ 353$ 取模后的结果。", "inputFormat": "输入的第一行包含一个整数 $Q$ 表示询问次数。\n\n接下来 $Q$ 行，每行包含三个整数 $x,y,n$ 表示一组询问，相邻整数之间使用一个空格分隔。对于每个询问，保证至少存在一个满足条件的序列。\n", "outputFormat": "输出 $Q$ 行，每行包含一个整数，依次表示每个询问的答案。", "hint": "对于 $40\\%$ 的评测用例，$n\\le 30$；  \n对于 $70\\%$ 的评测用例，$n\\le 5000$；  \n对于所有评测用例，$1\\le Q\\le 100$，$2\\le n\\le 10^5$，$1\\le x,y\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10581", "type": "P", "difficulty": 5, "samples": [["aba 6", "53"], ["aba 10", "77907666"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "矩阵加速", "KMP 算法", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 A] 重复的串", "background": "", "description": "给定一个仅含小写字母的字符串 $S$，问有多少个长度为 $n$ 的仅含小写字母的字符串中恰好出现了两次 $S$。答案对 $998\\ 244\\ 353$ 取模。", "inputFormat": "输入一行包含一个字符串 $S$ 和一个整数 $n$，用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "对于 $40\\%$ 的评测用例，$n \\le 20$，$|S| \\le 6$；  \n另有 $10\\%$ 的评测用例，$n\\le 500$，$|S| \\le 2$；  \n对于 $70\\%$ 的评测用例，$n\\le 10^5$；  \n对于所有评测用例，$1\\le n\\le 10^9$，$1 \\le |S| \\le 30$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 A] 重复的串", "background": "", "description": "给定一个仅含小写字母的字符串 $S$，问有多少个长度为 $n$ 的仅含小写字母的字符串中恰好出现了两次 $S$。答案对 $998\\ 244\\ 353$ 取模。", "inputFormat": "输入一行包含一个字符串 $S$ 和一个整数 $n$，用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "对于 $40\\%$ 的评测用例，$n \\le 20$，$|S| \\le 6$；  \n另有 $10\\%$ 的评测用例，$n\\le 500$，$|S| \\le 2$；  \n对于 $70\\%$ 的评测用例，$n\\le 10^5$；  \n对于所有评测用例，$1\\le n\\le 10^9$，$1 \\le |S| \\le 30$。", "locale": "zh-CN"}}}
{"pid": "P10582", "type": "P", "difficulty": 4, "samples": [["2\n2\n5", "3\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "二分", "2024", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 A] 最强策略家", "background": "", "description": "在一场智力对弈的游戏中，两位玩家小蓝和小乔需要对一个初始值均为 $0$、大小为 $n \\times n$ 的矩阵进行操作，以展现他们的智慧和谋略，并确定谁才是最强的策略家。\n\n操作规则如下：\n\n- 小蓝拥有先手操作权，完成操作后轮到小乔，然后再轮到小蓝，依此规律交替进行。\n- 在小蓝的每个回合中，他可以选择矩阵中的 $2$ 个元素，并将这些元素的值变更为 $1$。\n- 在小乔的第 $1$ 个回合中，他可以选择一个大小为 $1\\times 1$ 的子矩阵，并将该子矩阵内的所有元素的值重置为 $0$。在小乔的第 $2$ 个回合中，他可以选择一个 $2\\times 2$ 的子矩阵，并将该子矩阵内的所有元素的值重置为 $0$。以此类推，在小乔的第 $i$ 个回合中，他可以选择一个大小为 $i\\times i$ 的子矩阵，并将该子矩阵内所有元素的值重置为 $0$。\n- 在双方各进行了 $n$ 次操作后，游戏结束。\n\n设在整个游戏过程中，矩阵中值为 $1$ 的元素的数量最多时为 $X$。\n\n小蓝致力于最大化 $X$ 的值，小乔致力于最小化 $X$ 的值。\n\n假设两位玩家都具有完美的逻辑推理能力，并总是采取最佳策略。请问，$X$ 的值会是多少（即在整个游戏过程中，矩阵中值为 $1$ 的元素的数量最多时是多少）？", "inputFormat": "输入的第一行包含一个整数 $T$，表示数据的组数。\n\n接下来 $T$ 行，每行包含一个整数 $n$，表示矩阵的大小。", "outputFormat": "对于每组数据，输出一行包含一个整数，表示答案。", "hint": "**【样例说明】**\n\n在第一个样例中，小蓝和小乔需要轮流操作一个 $2\\times 2$ 的矩阵。\n\n**初始矩阵状态：**\n\n$$\n\\begin{bmatrix}\n0 & 0 \\\\\n0 & 0\n\\end{bmatrix}\n$$\n\n**小蓝的第 $1$ 个回合：** 将两个值为 $0$ 的元素变更为 $1$。可能的状态为：\n\n$$\n\\begin{bmatrix}\n1 & 1 \\\\\n0 & 0\n\\end{bmatrix}\n$$\n\n**小乔的第 $1$ 个回合：** 小乔只能选择一个 $1\\times 1$ 的子矩阵将元素重置为 $0$。为了最小化值为 $1$ 的元素数量，小乔需要将已经是 $1$ 的一个元素重置为 $0$。可能的状态为：\n\n$$\n\\begin{bmatrix}\n0 & 1 \\\\\n0 & 0\n\\end{bmatrix}\n$$\n\n**小蓝的第 $2$ 个回合：** 小蓝再次将两个元素值为 $0$ 的元素变更 $1$。可能的状态为：\n\n$$\n\\begin{bmatrix}\n1 & 1 \\\\\n1 & 0\n\\end{bmatrix}\n$$\n\n**小乔的第 $2$ 个回合：** 小乔可以选择一个 $2\\times 2$ 的子矩阵（即整个矩阵），并且把所有值重置为 $0$。\n\n$$\n\\begin{bmatrix}\n0 & 0 \\\\\n0 & 0\n\\end{bmatrix}\n$$\n\n因此，在双方都采取最佳策略下，矩阵中值为 $1$ 的元素最多时能达到 $3$ 个。\n\n**【评测用例规模与约定】**\n\n对于 $30\\%$ 的评测用例，$1 \\le T \\le 10^3$，$1 \\le n \\le 10^3$。  \n对于所有评测用例，$1 \\le T \\le 10^5$，$1 \\le n \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 A] 最强策略家", "background": "", "description": "在一场智力对弈的游戏中，两位玩家小蓝和小乔需要对一个初始值均为 $0$、大小为 $n \\times n$ 的矩阵进行操作，以展现他们的智慧和谋略，并确定谁才是最强的策略家。\n\n操作规则如下：\n\n- 小蓝拥有先手操作权，完成操作后轮到小乔，然后再轮到小蓝，依此规律交替进行。\n- 在小蓝的每个回合中，他可以选择矩阵中的 $2$ 个元素，并将这些元素的值变更为 $1$。\n- 在小乔的第 $1$ 个回合中，他可以选择一个大小为 $1\\times 1$ 的子矩阵，并将该子矩阵内的所有元素的值重置为 $0$。在小乔的第 $2$ 个回合中，他可以选择一个 $2\\times 2$ 的子矩阵，并将该子矩阵内的所有元素的值重置为 $0$。以此类推，在小乔的第 $i$ 个回合中，他可以选择一个大小为 $i\\times i$ 的子矩阵，并将该子矩阵内所有元素的值重置为 $0$。\n- 在双方各进行了 $n$ 次操作后，游戏结束。\n\n设在整个游戏过程中，矩阵中值为 $1$ 的元素的数量最多时为 $X$。\n\n小蓝致力于最大化 $X$ 的值，小乔致力于最小化 $X$ 的值。\n\n假设两位玩家都具有完美的逻辑推理能力，并总是采取最佳策略。请问，$X$ 的值会是多少（即在整个游戏过程中，矩阵中值为 $1$ 的元素的数量最多时是多少）？", "inputFormat": "输入的第一行包含一个整数 $T$，表示数据的组数。\n\n接下来 $T$ 行，每行包含一个整数 $n$，表示矩阵的大小。", "outputFormat": "对于每组数据，输出一行包含一个整数，表示答案。", "hint": "**【样例说明】**\n\n在第一个样例中，小蓝和小乔需要轮流操作一个 $2\\times 2$ 的矩阵。\n\n**初始矩阵状态：**\n\n$$\n\\begin{bmatrix}\n0 & 0 \\\\\n0 & 0\n\\end{bmatrix}\n$$\n\n**小蓝的第 $1$ 个回合：** 将两个值为 $0$ 的元素变更为 $1$。可能的状态为：\n\n$$\n\\begin{bmatrix}\n1 & 1 \\\\\n0 & 0\n\\end{bmatrix}\n$$\n\n**小乔的第 $1$ 个回合：** 小乔只能选择一个 $1\\times 1$ 的子矩阵将元素重置为 $0$。为了最小化值为 $1$ 的元素数量，小乔需要将已经是 $1$ 的一个元素重置为 $0$。可能的状态为：\n\n$$\n\\begin{bmatrix}\n0 & 1 \\\\\n0 & 0\n\\end{bmatrix}\n$$\n\n**小蓝的第 $2$ 个回合：** 小蓝再次将两个元素值为 $0$ 的元素变更 $1$。可能的状态为：\n\n$$\n\\begin{bmatrix}\n1 & 1 \\\\\n1 & 0\n\\end{bmatrix}\n$$\n\n**小乔的第 $2$ 个回合：** 小乔可以选择一个 $2\\times 2$ 的子矩阵（即整个矩阵），并且把所有值重置为 $0$。\n\n$$\n\\begin{bmatrix}\n0 & 0 \\\\\n0 & 0\n\\end{bmatrix}\n$$\n\n因此，在双方都采取最佳策略下，矩阵中值为 $1$ 的元素最多时能达到 $3$ 个。\n\n**【评测用例规模与约定】**\n\n对于 $30\\%$ 的评测用例，$1 \\le T \\le 10^3$，$1 \\le n \\le 10^3$。  \n对于所有评测用例，$1 \\le T \\le 10^5$，$1 \\le n \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10583", "type": "P", "difficulty": 6, "samples": [["5", "36"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "分块", "字典树 Trie", "快速沃尔什变换 FWT", "蓝桥杯国赛", "根号分治"], "title": "[蓝桥杯 2024 国 A] 异或路径", "background": "", "description": "给定一棵有 $n$ 个结点的树，结点 $1$ 至 $n$ 编号。编号为 $x > 1$ 的结点与编号为 $\\lfloor \\sqrt x \\rfloor$\n 的结点有一条权值为 $x-\\lfloor \\sqrt x \\rfloor ^ 2$ 的边。\n \n定义一条路径的价值为这条路径上的所有边的权值的异或和。如果两条路径包含不同的边，则认为这两条路径不同。求这棵树的所有本质不同的简单路的价值的乘积（价值为 $0$ 的除外），答案对 $998\\ 244\\ 353$ 取模。", "inputFormat": "输入一行包含一个整数 $n$。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "对于 $40\\%$ 的评测用例，$n\\le 10^3$；  \n对于 $70\\%$ 的评测用例，$n\\le 10^6$；  \n对于所有评测用例，$1\\le n\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 A] 异或路径", "background": "", "description": "给定一棵有 $n$ 个结点的树，结点 $1$ 至 $n$ 编号。编号为 $x > 1$ 的结点与编号为 $\\lfloor \\sqrt x \\rfloor$\n 的结点有一条权值为 $x-\\lfloor \\sqrt x \\rfloor ^ 2$ 的边。\n \n定义一条路径的价值为这条路径上的所有边的权值的异或和。如果两条路径包含不同的边，则认为这两条路径不同。求这棵树的所有本质不同的简单路的价值的乘积（价值为 $0$ 的除外），答案对 $998\\ 244\\ 353$ 取模。", "inputFormat": "输入一行包含一个整数 $n$。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "对于 $40\\%$ 的评测用例，$n\\le 10^3$；  \n对于 $70\\%$ 的评测用例，$n\\le 10^6$；  \n对于所有评测用例，$1\\le n\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10584", "type": "P", "difficulty": 6, "samples": [["2 3", "2"], ["1000000000 1000000000", "12735999860"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "蓝桥杯国赛", "整除分块", "杜教筛"], "title": "[蓝桥杯 2024 国 A] 数学题", "background": "", "description": "求 $\\sum\\limits_{i=1}^n{\\sum\\limits_{j=1}^m{|f(ij)|}}$，其中 $|f(x)|$ 当 $x$ 是完全平方数时为 $1$，否则为 $0$。", "inputFormat": "输入一行包含两个正整数，用一个空格分隔，表示题目描述中的 $n$ 和 $m$。\n\n", "outputFormat": "输出一行包含一个正整数表示答案。\n\n提示：数据保证答案不会超出 `unsigned long long` 表示范围。", "hint": "对于 $15\\%$ 的评测用例，$n,m \\le 10^5$；  \n对于 $30\\%$ 的评测用例，$n \\le 10^7$，$m \\le 10^9$；  \n对于 $50\\%$ 的评测用例，$n,m \\le 10^{11}$；  \n对于 $70\\%$ 的评测用例，$n,m \\le 10^{15}$；  \n对于所有评测用例，$1 \\le n,m \\le 1.5 \\times 10^{16}$。\n\n感谢 @[ACaCaca_](https://www.luogu.com.cn/user/320423) 提供数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 A] 数学题", "background": "", "description": "求 $\\sum\\limits_{i=1}^n{\\sum\\limits_{j=1}^m{|f(ij)|}}$，其中 $|f(x)|$ 当 $x$ 是完全平方数时为 $1$，否则为 $0$。", "inputFormat": "输入一行包含两个正整数，用一个空格分隔，表示题目描述中的 $n$ 和 $m$。\n\n", "outputFormat": "输出一行包含一个正整数表示答案。\n\n提示：数据保证答案不会超出 `unsigned long long` 表示范围。", "hint": "对于 $15\\%$ 的评测用例，$n,m \\le 10^5$；  \n对于 $30\\%$ 的评测用例，$n \\le 10^7$，$m \\le 10^9$；  \n对于 $50\\%$ 的评测用例，$n,m \\le 10^{11}$；  \n对于 $70\\%$ 的评测用例，$n,m \\le 10^{15}$；  \n对于所有评测用例，$1 \\le n,m \\le 1.5 \\times 10^{16}$。\n\n感谢 @[ACaCaca_](https://www.luogu.com.cn/user/320423) 提供数据。", "locale": "zh-CN"}}}
{"pid": "P10585", "type": "P", "difficulty": 3, "samples": [["4 2 5", "1 3 4 15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "Special Judge", "O2优化", "构造"], "title": "「ALFR Round 2」A Sum", "background": "", "description": "给定三个整数 $n,p,q$，你需要构造一个 $n$ 个数的序列 $a$，满足：\n\n- $\\forall 1\\leq i\\leq n:1 \\leq a_i\\leq 10^7,a_i\\in\\mathbb{Z}$；\n\n- $(\\sum\\limits_{1\\leq i<j\\leq n}[a_i+a_j\\leq q])=p$。\n\n通俗地说，每个数都是正整数且在 $[1, 10^7]$ 之间，且这 $n$ 个数无序选两个不同位置的数构成的 $\\dfrac{n(n-1)}{2}$ 个加和中有恰好 $p$ 个和不大于 $q$。你只需要给出一种方案即可。", "inputFormat": "一行三个整数 $n,p,q$。", "outputFormat": "一行 $n$ 个数，表示构造的序列。", "hint": "### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $20$ | $p=0$ |\n| $1$ | $80$ | - |\n\n对于 $100\\%$ 的数据，$4\\leq n\\leq10^6$，$0\\leq p\\leq\\dfrac{n(n-1)}{2}$，$4\\leq q\\leq10^7$。\n\nUpdate 2024.7.1：根据[此贴](https://www.luogu.com.cn/discuss/836854)添加了一组 hack 数据进入子任务 $2$，分数为 $0$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「ALFR Round 2」A Sum", "background": "", "description": "给定三个整数 $n,p,q$，你需要构造一个 $n$ 个数的序列 $a$，满足：\n\n- $\\forall 1\\leq i\\leq n:1 \\leq a_i\\leq 10^7,a_i\\in\\mathbb{Z}$；\n\n- $(\\sum\\limits_{1\\leq i<j\\leq n}[a_i+a_j\\leq q])=p$。\n\n通俗地说，每个数都是正整数且在 $[1, 10^7]$ 之间，且这 $n$ 个数无序选两个不同位置的数构成的 $\\dfrac{n(n-1)}{2}$ 个加和中有恰好 $p$ 个和不大于 $q$。你只需要给出一种方案即可。", "inputFormat": "一行三个整数 $n,p,q$。", "outputFormat": "一行 $n$ 个数，表示构造的序列。", "hint": "### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $20$ | $p=0$ |\n| $1$ | $80$ | - |\n\n对于 $100\\%$ 的数据，$4\\leq n\\leq10^6$，$0\\leq p\\leq\\dfrac{n(n-1)}{2}$，$4\\leq q\\leq10^7$。\n\nUpdate 2024.7.1：根据[此贴](https://www.luogu.com.cn/discuss/836854)添加了一组 hack 数据进入子任务 $2$，分数为 $0$ 分。", "locale": "zh-CN"}}}
{"pid": "P10586", "type": "P", "difficulty": 5, "samples": [["4 3 3\n598946612 898419918 499122177\n998244308 79 998244317 5", "319837492"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "矩阵乘法"], "title": "「ALFR Round 2」B 篮球比赛", "background": "![](https://nimg.ws.126.net/?url=http%3A%2F%2Fdingyue.ws.126.net%2F2023%2F0820%2F075e9bccj00rzoph900wkd000t200i6p.jpg&thumbnail=660x2147483647&quality=80&type=jpg)", "description": "小山即将参加 $n$ 场篮球比赛，他有一个多项式函数 $f(x)=a_0+a_1x^1+a_2x^2+\\dots+a_kx^k$ 与 $m$ 个和为 $1$ 的数 $p_1,p_2,p_3,\\dots,p_m$。\n\n他所在的球队有 $\\dfrac{f(i)}{\\sum_{j=1}^n f(j)}$ 的概率在第 $i$ 场比赛中取得**第一次**胜利，这意味着前面的 $i-1$ 场都输了。\n\n接下来，如果第 $i$ 场比赛中小山所在球队取得了胜利，则对于 $1\\le j\\le m$，他们有 $p_j$ 的概率在第 $i+j$ 场比赛取得下一次胜利，这意味着如果 $j\\gt1$，第 $i+1$ 场到第 $i+j-1$ 场都输了（若 $i+j>n$，则之后的比赛都输，没有再胜利）。\n\n小山想知道他所在球队的期望胜利场数，你能帮帮他吗？\n\n注意：在计算时，如果遇到分数（比如 $\\dfrac{f(i)}{\\sum_{j=1}^n f(j)}$），应使用分数取模形式。如果不知道什么是分数取模形式，参见 [P2613 【模板】有理数取余](https://www.luogu.com.cn/problem/P2613)。\n\n为了方便你的计算，输入数据将直接给出 $p_i,a_i$ 对 $998244353$ 取模的结果。", "inputFormat": "第一行 $3$ 个整数 $n, m, k$，含义如上所述。\n\n第二行 $m$ 个整数，第 $i$ 个整数表示 $p_i$ 模 $998244353$ 的值。\n\n第三行 $k + 1$ 个整数，第 $i$ 个整数表示 $a_{i - 1}$ 模 $998244353$ 的值。\n\n**注意是先输入 $p$ 再输入 $a$。**", "outputFormat": "一行一个数，表示答案模 $998244353$ 的值。", "hint": "### 样例解释\n\n在第一组样例中：$p_1=0.2,p_2=0.3,p_3=0.5$；$f(1)=3,f(2)=9,f(3)=3,f(4)=15$。胜利场数期望为 $1.2988$。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $10$ | $n=1$ |\n| $1$ | $30$ | $n\\le10^6$ |\n| $2$ | $60$ | - |\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^{18}$，$1\\le m,k \\le 50$，保证 $\\sum_{j=1}^n f(j)$ 不被 $998244353$ 整除。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「ALFR Round 2」B 篮球比赛", "background": "![](https://nimg.ws.126.net/?url=http%3A%2F%2Fdingyue.ws.126.net%2F2023%2F0820%2F075e9bccj00rzoph900wkd000t200i6p.jpg&thumbnail=660x2147483647&quality=80&type=jpg)", "description": "小山即将参加 $n$ 场篮球比赛，他有一个多项式函数 $f(x)=a_0+a_1x^1+a_2x^2+\\dots+a_kx^k$ 与 $m$ 个和为 $1$ 的数 $p_1,p_2,p_3,\\dots,p_m$。\n\n他所在的球队有 $\\dfrac{f(i)}{\\sum_{j=1}^n f(j)}$ 的概率在第 $i$ 场比赛中取得**第一次**胜利，这意味着前面的 $i-1$ 场都输了。\n\n接下来，如果第 $i$ 场比赛中小山所在球队取得了胜利，则对于 $1\\le j\\le m$，他们有 $p_j$ 的概率在第 $i+j$ 场比赛取得下一次胜利，这意味着如果 $j\\gt1$，第 $i+1$ 场到第 $i+j-1$ 场都输了（若 $i+j>n$，则之后的比赛都输，没有再胜利）。\n\n小山想知道他所在球队的期望胜利场数，你能帮帮他吗？\n\n注意：在计算时，如果遇到分数（比如 $\\dfrac{f(i)}{\\sum_{j=1}^n f(j)}$），应使用分数取模形式。如果不知道什么是分数取模形式，参见 [P2613 【模板】有理数取余](https://www.luogu.com.cn/problem/P2613)。\n\n为了方便你的计算，输入数据将直接给出 $p_i,a_i$ 对 $998244353$ 取模的结果。", "inputFormat": "第一行 $3$ 个整数 $n, m, k$，含义如上所述。\n\n第二行 $m$ 个整数，第 $i$ 个整数表示 $p_i$ 模 $998244353$ 的值。\n\n第三行 $k + 1$ 个整数，第 $i$ 个整数表示 $a_{i - 1}$ 模 $998244353$ 的值。\n\n**注意是先输入 $p$ 再输入 $a$。**", "outputFormat": "一行一个数，表示答案模 $998244353$ 的值。", "hint": "### 样例解释\n\n在第一组样例中：$p_1=0.2,p_2=0.3,p_3=0.5$；$f(1)=3,f(2)=9,f(3)=3,f(4)=15$。胜利场数期望为 $1.2988$。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $10$ | $n=1$ |\n| $1$ | $30$ | $n\\le10^6$ |\n| $2$ | $60$ | - |\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^{18}$，$1\\le m,k \\le 50$，保证 $\\sum_{j=1}^n f(j)$ 不被 $998244353$ 整除。", "locale": "zh-CN"}}}
{"pid": "P10587", "type": "P", "difficulty": 6, "samples": [["8 8\n41 42 43 44 45 46 47 47\n4 1 8\n1 1 8 377\n4 1 8\n2 1 1 100\n1 1 8 624\n4 1 7\n3 1 8 424242\n4 1 5", "1\n2\n1\n5"]], "limits": {"time": [700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["线段树", "O2优化"], "title": "「ALFR Round 2」C 小 Y 的数", "background": "", "description": "小 Y 非常喜欢 $42$ 这个数，于是他也喜欢以 $42$ 为初始数，然后往后面依次拼接 $4,2$ 的数，如 $42,424,4242,\\cdots$。小 Y 给了你一个大小为 $n$ 的整数序列 $a$，小 Y 有 $m$ 次操作，操作有四种：\n\n- `1 l r x` 将 $l\\sim r$ 中的数加上 $x$。\n\n- `2 l r x` 将 $l\\sim r$ 中的数乘上 $x$。\n\n- `3 l r x` 将 $l\\sim r$ 中的数修改为 $x$。\n\n- `4 l r` 询问 $l\\sim r$ 中有多少个小 Y 喜欢的数。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $a_1,a_2,a_3\\cdots a_n$。\n\n接下来 $m$ 行，每行 $3$ 或 $4$ 个整数描述一次操作。", "outputFormat": "每行一个操作 $4$ 的答案。", "hint": "### 样例解释\n\n第 $1$ 次操作为询问区间 $1\\sim8$ 中有多少个小 Y 喜欢的数，共 $1$ 个，为 $a_2$。\n\n第 $2$ 次操作为将区间 $1\\sim8$ 中的数加上 $377$，数列 $a$ 变为 $418,419,420,421,422,423,424,424$。\n\n第 $3$ 次操作为询问区间 $1\\sim8$ 中有多少个小 Y 喜欢的数，共 $2$ 个，为 $a_7,a_8$。\n\n第 $4$ 次操作为将区间 $1\\sim1$ 中的数乘上 $100$，数列 $a$ 变为 $41800,419,420,421,422,423,424,424$。\n\n第 $5$ 次操作为将区间 $1\\sim8$ 中的数加上 $624$，数列 $a$ 变为 $42424,1043,1044,1045,1046,1047,1048,1048$。\n\n第 $6$ 次操作为询问区间 $1\\sim7$ 中有多少个小 Y 喜欢的数，共 $1$ 个，为 $a_1$。\n\n第 $7$ 次操作为将区间 $1\\sim8$ 中的数修改为 $424242$，数列 $a$ 变为 $424242,424242,424242,424242,424242,424242,424242,424242$。\n\n第 $8$ 次操作为询问区间 $1\\sim5$ 中有多少个小 Y 喜欢的数，共 $5$ 个，为 $a_1,a_2,a_3,a_4,a_5$。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $20$ | $n,m\\le10^4$ |\n| $1$ | $80$ | - |\n\n对于 $100\\%$ 的数据，$1\\le n,m,a_i,x\\le5\\times10^5$，$1\\le l,r\\le n$。\n\n保证每次操作后 $1\\le a_i\\le5\\times10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「ALFR Round 2」C 小 Y 的数", "background": "", "description": "小 Y 非常喜欢 $42$ 这个数，于是他也喜欢以 $42$ 为初始数，然后往后面依次拼接 $4,2$ 的数，如 $42,424,4242,\\cdots$。小 Y 给了你一个大小为 $n$ 的整数序列 $a$，小 Y 有 $m$ 次操作，操作有四种：\n\n- `1 l r x` 将 $l\\sim r$ 中的数加上 $x$。\n\n- `2 l r x` 将 $l\\sim r$ 中的数乘上 $x$。\n\n- `3 l r x` 将 $l\\sim r$ 中的数修改为 $x$。\n\n- `4 l r` 询问 $l\\sim r$ 中有多少个小 Y 喜欢的数。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $a_1,a_2,a_3\\cdots a_n$。\n\n接下来 $m$ 行，每行 $3$ 或 $4$ 个整数描述一次操作。", "outputFormat": "每行一个操作 $4$ 的答案。", "hint": "### 样例解释\n\n第 $1$ 次操作为询问区间 $1\\sim8$ 中有多少个小 Y 喜欢的数，共 $1$ 个，为 $a_2$。\n\n第 $2$ 次操作为将区间 $1\\sim8$ 中的数加上 $377$，数列 $a$ 变为 $418,419,420,421,422,423,424,424$。\n\n第 $3$ 次操作为询问区间 $1\\sim8$ 中有多少个小 Y 喜欢的数，共 $2$ 个，为 $a_7,a_8$。\n\n第 $4$ 次操作为将区间 $1\\sim1$ 中的数乘上 $100$，数列 $a$ 变为 $41800,419,420,421,422,423,424,424$。\n\n第 $5$ 次操作为将区间 $1\\sim8$ 中的数加上 $624$，数列 $a$ 变为 $42424,1043,1044,1045,1046,1047,1048,1048$。\n\n第 $6$ 次操作为询问区间 $1\\sim7$ 中有多少个小 Y 喜欢的数，共 $1$ 个，为 $a_1$。\n\n第 $7$ 次操作为将区间 $1\\sim8$ 中的数修改为 $424242$，数列 $a$ 变为 $424242,424242,424242,424242,424242,424242,424242,424242$。\n\n第 $8$ 次操作为询问区间 $1\\sim5$ 中有多少个小 Y 喜欢的数，共 $5$ 个，为 $a_1,a_2,a_3,a_4,a_5$。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $20$ | $n,m\\le10^4$ |\n| $1$ | $80$ | - |\n\n对于 $100\\%$ 的数据，$1\\le n,m,a_i,x\\le5\\times10^5$，$1\\le l,r\\le n$。\n\n保证每次操作后 $1\\le a_i\\le5\\times10^5$。", "locale": "zh-CN"}}}
{"pid": "P10588", "type": "P", "difficulty": 6, "samples": [["5\n3 3 1\n3 4 0\n114 514 86\n19198 10101 7211\n604800 4089470473293004800 443520 ", "7\n21\n191637399\n939162608\n305624040"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "组合数学", "生成函数"], "title": "「ALFR Round 2」D 超立方体", "background": ">  映入眼帘的是一棵硕大的樱花树。   \n>\n> 树下站着一个少女，她正抬头仰望着那棵樱花树。  \n> 我想：她是位新生吧，大概和我一样也是溜出来的。  \n> 我也抬着头望了望那棵樱花树。模模糊糊的花色遮住了天空。  \n> 刮起一阵风，飘舞着的樱花花瓣将少女裹住。  \n> 少女也看到了我……", "description": "那是你与米尔嘉最初的邂逅。  \n\n一如既往，米尔嘉又给你出了一道数列题。  \n洁白的信封上留着柑橘的芳香，  \n你小心翼翼地拆开信封阅读。\n\n------------\n\n在三维中，我们有三维立方体。  \n它的 $2^3$ 个点的坐标都可以写成 $(x,y,z)$ 的形式。  \n\n同理在 $n$ 维中，我们有 $n$ 维超立方体，它有 $2^n$ 个点。  \n其棱长为 $1$，且所有顶点的各维坐标都是非负整数。\n\n我们从点 $(0,0,\\dots,0)$ 出发，走过 $m$ 条棱，求到达点 $(1,1,\\dots,0)$ 的方案总数。\n\n其中要到达的点的坐标中有 $l$ 个数字 $1$。\n\n由于答案可能很大，你只需要输出方案数对 $998244353$ 取模后的结果就可以了。", "inputFormat": "第一行为一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行三个非负整数 $n,m,l$。", "outputFormat": "对于每组数据，输出一行一个整数答案。", "hint": "### 样例解释\n\n第一个例子中的 $7$ 种方案分别是：\n\n- $(0,0,0) \\to (1,0,0) \\to (0,0,0) \\to (1,0,0)$\n- $(0,0,0) \\to (0,1,0) \\to (0,0,0) \\to (1,0,0)$\n- $(0,0,0) \\to (0,0,1) \\to (0,0,0) \\to (1,0,0)$\n- $(0,0,0) \\to (1,0,0) \\to (1,1,0) \\to (1,0,0)$\n- $(0,0,0) \\to (1,0,0) \\to (1,0,1) \\to (1,0,0)$\n- $(0,0,0) \\to (0,1,0) \\to (1,1,0) \\to (1,0,0)$\n- $(0,0,0) \\to (0,0,1) \\to (1,0,1) \\to (1,0,0)$\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $10$ | $\\sum nm\\le2^{26}$，$n\\le2^{13}$ |\n| $1$ | $20$ | $l=0$ |\n| $2$ | $30$ | $\\sum n^2\\le2^{26}$ |\n| $3$ | $40$ | - |\n\n对于 $100\\%$ 数据，$1\\le T\\le600$，$\\sum n\\log_2 n\\le2^{25}$，$n\\in[1,2^{21}]$，$m\\in[0,2^{64}-1]$，$l\\in[0,n]$。\n\n---\n\n你翻到背面，发现一行小字：\n\n请不要忘记考虑特殊情形。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「ALFR Round 2」D 超立方体", "background": ">  映入眼帘的是一棵硕大的樱花树。   \n>\n> 树下站着一个少女，她正抬头仰望着那棵樱花树。  \n> 我想：她是位新生吧，大概和我一样也是溜出来的。  \n> 我也抬着头望了望那棵樱花树。模模糊糊的花色遮住了天空。  \n> 刮起一阵风，飘舞着的樱花花瓣将少女裹住。  \n> 少女也看到了我……", "description": "那是你与米尔嘉最初的邂逅。  \n\n一如既往，米尔嘉又给你出了一道数列题。  \n洁白的信封上留着柑橘的芳香，  \n你小心翼翼地拆开信封阅读。\n\n------------\n\n在三维中，我们有三维立方体。  \n它的 $2^3$ 个点的坐标都可以写成 $(x,y,z)$ 的形式。  \n\n同理在 $n$ 维中，我们有 $n$ 维超立方体，它有 $2^n$ 个点。  \n其棱长为 $1$，且所有顶点的各维坐标都是非负整数。\n\n我们从点 $(0,0,\\dots,0)$ 出发，走过 $m$ 条棱，求到达点 $(1,1,\\dots,0)$ 的方案总数。\n\n其中要到达的点的坐标中有 $l$ 个数字 $1$。\n\n由于答案可能很大，你只需要输出方案数对 $998244353$ 取模后的结果就可以了。", "inputFormat": "第一行为一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行三个非负整数 $n,m,l$。", "outputFormat": "对于每组数据，输出一行一个整数答案。", "hint": "### 样例解释\n\n第一个例子中的 $7$ 种方案分别是：\n\n- $(0,0,0) \\to (1,0,0) \\to (0,0,0) \\to (1,0,0)$\n- $(0,0,0) \\to (0,1,0) \\to (0,0,0) \\to (1,0,0)$\n- $(0,0,0) \\to (0,0,1) \\to (0,0,0) \\to (1,0,0)$\n- $(0,0,0) \\to (1,0,0) \\to (1,1,0) \\to (1,0,0)$\n- $(0,0,0) \\to (1,0,0) \\to (1,0,1) \\to (1,0,0)$\n- $(0,0,0) \\to (0,1,0) \\to (1,1,0) \\to (1,0,0)$\n- $(0,0,0) \\to (0,0,1) \\to (1,0,1) \\to (1,0,0)$\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $10$ | $\\sum nm\\le2^{26}$，$n\\le2^{13}$ |\n| $1$ | $20$ | $l=0$ |\n| $2$ | $30$ | $\\sum n^2\\le2^{26}$ |\n| $3$ | $40$ | - |\n\n对于 $100\\%$ 数据，$1\\le T\\le600$，$\\sum n\\log_2 n\\le2^{25}$，$n\\in[1,2^{21}]$，$m\\in[0,2^{64}-1]$，$l\\in[0,n]$。\n\n---\n\n你翻到背面，发现一行小字：\n\n请不要忘记考虑特殊情形。", "locale": "zh-CN"}}}
{"pid": "P10589", "type": "P", "difficulty": 4, "samples": [["5\n1 5 3 2 4", "3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树状数组"], "title": "楼兰图腾", "background": null, "description": "在完成了分配任务之后，西部 314 来到了楼兰古城的西部。相传很久以前这片土地上（比楼兰古城还早）生活着两个部落，一个部落崇拜尖刀（`V`），一个部落崇拜铁锹（`∧`），他们分别用 `V` 和 `∧` 的形状来代表各自部落的图腾。\n\n西部 314 在楼兰古城的下面发现了一幅巨大的壁画，壁画上被标记出了 $n$ 个点，经测量发现这 $n$ 个点的水平位置和竖直位置是两两不同的。西部 314 认为这幅壁画所包含的信息与这 $n$ 个点的相对位置有关，因此不妨设坐标分别为 $(1,y_1),(2,y_2),\\cdots,(n,y_n)$，其中 $y_1\\sim y_n$ 是 $1$ 到 $n$ 的一个排列。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u8z4ffl9.png)\n\n如图，图中的 $y_1=1$，$y_2=5$，$y_3=3$，$y_4=2$，$y_5=4$。\n\n西部 314 打算研究这幅壁画中包含着多少个图腾，其中 `V` 图腾的定义如下（注意：图腾的形式只和这三个纵坐标的相对大小排列顺序有关）$1\\le i<j<k\\le n$ 且 $y_i>y_j$, $y_j<y_k$；\n\n而崇拜 `∧` 的部落的图腾被定义为 $1\\le i<j<k\\le n$ 且 $y_i<y_j$，$y_j>y_k$；\n\n西部 314 想知道，这 $n$ 个点中两个部落图腾的数目。因此，你需要编写一个程序来求出 `V` 的个数和 `∧` 的个数。", "inputFormat": "第一行一个正整数 $n$；\n\n第二行是 $n$ 个正整数，分别代表 $y_1,y_2,\\cdots,y_n$。", "outputFormat": "输出两个数，中间用空格隔开，依次为 `V` 的个数和 `∧` 的个数", "hint": "数据范围约定\n\n- 对于 $10\\%$ 的数据 $n\\le 600$；\n- 对于 $40\\%$ 的数据 $n\\le 5000$；\n- 对于 $100\\%$ 的数据 $n\\le 200000$，答案不超过 $2^{63} - 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "楼兰图腾", "background": null, "description": "在完成了分配任务之后，西部 314 来到了楼兰古城的西部。相传很久以前这片土地上（比楼兰古城还早）生活着两个部落，一个部落崇拜尖刀（`V`），一个部落崇拜铁锹（`∧`），他们分别用 `V` 和 `∧` 的形状来代表各自部落的图腾。\n\n西部 314 在楼兰古城的下面发现了一幅巨大的壁画，壁画上被标记出了 $n$ 个点，经测量发现这 $n$ 个点的水平位置和竖直位置是两两不同的。西部 314 认为这幅壁画所包含的信息与这 $n$ 个点的相对位置有关，因此不妨设坐标分别为 $(1,y_1),(2,y_2),\\cdots,(n,y_n)$，其中 $y_1\\sim y_n$ 是 $1$ 到 $n$ 的一个排列。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u8z4ffl9.png)\n\n如图，图中的 $y_1=1$，$y_2=5$，$y_3=3$，$y_4=2$，$y_5=4$。\n\n西部 314 打算研究这幅壁画中包含着多少个图腾，其中 `V` 图腾的定义如下（注意：图腾的形式只和这三个纵坐标的相对大小排列顺序有关）$1\\le i<j<k\\le n$ 且 $y_i>y_j$, $y_j<y_k$；\n\n而崇拜 `∧` 的部落的图腾被定义为 $1\\le i<j<k\\le n$ 且 $y_i<y_j$，$y_j>y_k$；\n\n西部 314 想知道，这 $n$ 个点中两个部落图腾的数目。因此，你需要编写一个程序来求出 `V` 的个数和 `∧` 的个数。", "inputFormat": "第一行一个正整数 $n$；\n\n第二行是 $n$ 个正整数，分别代表 $y_1,y_2,\\cdots,y_n$。", "outputFormat": "输出两个数，中间用空格隔开，依次为 `V` 的个数和 `∧` 的个数", "hint": "数据范围约定\n\n- 对于 $10\\%$ 的数据 $n\\le 600$；\n- 对于 $40\\%$ 的数据 $n\\le 5000$；\n- 对于 $100\\%$ 的数据 $n\\le 200000$，答案不超过 $2^{63} - 1$。", "locale": "zh-CN"}}}
{"pid": "P10590", "type": "P", "difficulty": 6, "samples": [["0 0 5 10 5\n5 4 7 11 5\n-7 1 4 7 8\n0 2 13 5 6\n2 -3 9 3 4\n13 5 1 9 9", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "广度优先搜索 BFS", "队列", "分块"], "title": "磁力块", "background": "", "description": "在一片广袤无垠的原野上，散落着 $N$ 块磁石。\n\n每个磁石的性质可以用一个五元组 $(x,y,m,p,r)$ 描述，其中 $x,y$ 表示其坐标，$m$ 是磁石的质量，$p$ 是磁力，$r$ 是吸引半径。\n\n若磁石 $A$ 与磁石 $B$ 的距离不大于磁石 $A$ 的吸引半径，并且磁石 $B$ 的质量不大于磁石 $A$ 的磁力，那么 $A$ 可以吸引 $B$。\n\n小取酒带着一块自己的磁石 $L$ 来到了这片原野的 $(x_0,y_0)$ 处，我们可以视磁石 $L$ 的坐标为 $(x_0,y_0)$。\n\n小取酒手持磁石 $L$ 并保持原地不动，所有可以被 $L$ 吸引的磁石将会被吸引过来。\n\n在每个时刻，他可以选择更换任意一块自己已经获得的磁石（当然也可以是自己最初携带的 $L$ 磁石）在 $(x_0,y_0)$ 处吸引更多的磁石。\n\n小取酒想知道，他最多能获得多少块磁石呢？", "inputFormat": "第一行五个整数 $x_0,y_0,p_L,r_L,N$，表示小取酒所在的位置，磁石 $L$ 磁力、吸引半径和原野上散落磁石的个数。\n\n接下来 $N$ 行每行五个整数 $x,y,m,p,r$，描述一块磁石的性质。", "outputFormat": "输出一个整数，表示最多可以获得的散落磁石个数（不包含最初携带的磁石 $L$）。\n", "hint": "对于 $30\\%$ 的数据，$1 \\le N \\le 1000$。\n\n对于另外 $30\\%$ 的数据，$p=r$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 250000$，$-10^9 \\le x,y \\le 10^9$，$1 \\le m,p,r \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "磁力块", "background": "", "description": "在一片广袤无垠的原野上，散落着 $N$ 块磁石。\n\n每个磁石的性质可以用一个五元组 $(x,y,m,p,r)$ 描述，其中 $x,y$ 表示其坐标，$m$ 是磁石的质量，$p$ 是磁力，$r$ 是吸引半径。\n\n若磁石 $A$ 与磁石 $B$ 的距离不大于磁石 $A$ 的吸引半径，并且磁石 $B$ 的质量不大于磁石 $A$ 的磁力，那么 $A$ 可以吸引 $B$。\n\n小取酒带着一块自己的磁石 $L$ 来到了这片原野的 $(x_0,y_0)$ 处，我们可以视磁石 $L$ 的坐标为 $(x_0,y_0)$。\n\n小取酒手持磁石 $L$ 并保持原地不动，所有可以被 $L$ 吸引的磁石将会被吸引过来。\n\n在每个时刻，他可以选择更换任意一块自己已经获得的磁石（当然也可以是自己最初携带的 $L$ 磁石）在 $(x_0,y_0)$ 处吸引更多的磁石。\n\n小取酒想知道，他最多能获得多少块磁石呢？", "inputFormat": "第一行五个整数 $x_0,y_0,p_L,r_L,N$，表示小取酒所在的位置，磁石 $L$ 磁力、吸引半径和原野上散落磁石的个数。\n\n接下来 $N$ 行每行五个整数 $x,y,m,p,r$，描述一块磁石的性质。", "outputFormat": "输出一个整数，表示最多可以获得的散落磁石个数（不包含最初携带的磁石 $L$）。\n", "hint": "对于 $30\\%$ 的数据，$1 \\le N \\le 1000$。\n\n对于另外 $30\\%$ 的数据，$p=r$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 250000$，$-10^9 \\le x,y \\le 10^9$，$1 \\le m,p,r \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10591", "type": "P", "difficulty": 6, "samples": [["3 \n1 \n1 \n0", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "容斥原理", "线性基"], "title": "BZOJ4671 异或图", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "定义两个结点数相同的图 $G_1$ 与图 $G_2$ 的异或为一个新的图 $G$，其中如果 $(u,v)$ 在 $G_1$ 与 $G_2$ 中的出现之和为 $1$，那么边 $(u,v)$ 在 $G$ 中，否则这条边不在 $G$ 中。\n\n现在给定 $s$ 个结点数相同的图 $G_{1\\sim s}$，$S=\\{G_1,G_2,\\dots,G_s\\}$，请问 $S$ 有多少个子集的异或为一个连通图？", "inputFormat": "第一行为一个整数 $s$，表示图的个数。\n\n接下来每一行一个二进制串，第 $i$ 行的二进制串为 $g_i$，其中 $g_i$ 是原图通过以下伪代码转化得到的。图的结点从 $1$ 开始编号，下面设结点数为 $n$。\n\n```\nAlgorithm 1 Print a graph G = (V, E)\n\nfor i = 1 to n do\n    for j = i + 1 to n do\n        if G contains edge (i, j) then\n            print 1\n        else\n            print 0\n        end if\n    end for\nend for\n```", "outputFormat": "输出一行一个整数，表示方案数。", "hint": "对于 $100\\%$ 的数据，$2\\leq n\\leq 10$，$1\\leq s\\leq 60$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4671 异或图", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "定义两个结点数相同的图 $G_1$ 与图 $G_2$ 的异或为一个新的图 $G$，其中如果 $(u,v)$ 在 $G_1$ 与 $G_2$ 中的出现之和为 $1$，那么边 $(u,v)$ 在 $G$ 中，否则这条边不在 $G$ 中。\n\n现在给定 $s$ 个结点数相同的图 $G_{1\\sim s}$，$S=\\{G_1,G_2,\\dots,G_s\\}$，请问 $S$ 有多少个子集的异或为一个连通图？", "inputFormat": "第一行为一个整数 $s$，表示图的个数。\n\n接下来每一行一个二进制串，第 $i$ 行的二进制串为 $g_i$，其中 $g_i$ 是原图通过以下伪代码转化得到的。图的结点从 $1$ 开始编号，下面设结点数为 $n$。\n\n```\nAlgorithm 1 Print a graph G = (V, E)\n\nfor i = 1 to n do\n    for j = i + 1 to n do\n        if G contains edge (i, j) then\n            print 1\n        else\n            print 0\n        end if\n    end for\nend for\n```", "outputFormat": "输出一行一个整数，表示方案数。", "hint": "对于 $100\\%$ 的数据，$2\\leq n\\leq 10$，$1\\leq s\\leq 60$。", "locale": "zh-CN"}}}
{"pid": "P10592", "type": "P", "difficulty": 6, "samples": [["4\n1 7 5 3", "18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "树状数组", "O2优化", "容斥原理"], "title": "BZOJ4361 isn", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "给出一个长度为 $n$ 的序列 $a_1,a_2,\\dots a_n$。如果序列 $a$ 不是非降的，你必须从中删去一个数。\n\n这一操作将被不断执行，直到 $A$ 非降为止。求有多少种不同的操作方案。操作方案不同当且仅当删除的顺序或次数不同。答案对 $10^9+7$ 取模。", "inputFormat": "第一行输入一个正整数 $n$，表示序列长度。\n\n第二行输入 $n$ 个非负整数 $a_i$，表示序列。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模的值。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 2\\times 10^3$，$0\\leq a_i \\leq 2^{31}-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4361 isn", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "给出一个长度为 $n$ 的序列 $a_1,a_2,\\dots a_n$。如果序列 $a$ 不是非降的，你必须从中删去一个数。\n\n这一操作将被不断执行，直到 $A$ 非降为止。求有多少种不同的操作方案。操作方案不同当且仅当删除的顺序或次数不同。答案对 $10^9+7$ 取模。", "inputFormat": "第一行输入一个正整数 $n$，表示序列长度。\n\n第二行输入 $n$ 个非负整数 $a_i$，表示序列。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模的值。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 2\\times 10^3$，$0\\leq a_i \\leq 2^{31}-1$。", "locale": "zh-CN"}}}
