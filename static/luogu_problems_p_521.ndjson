{"pid": "P11568", "type": "P", "difficulty": 2, "samples": [["2 6", "83 138017‬\n"], ["5 5", "24513 40723\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化"], "title": "「chaynOI R1 T1」一维数组", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/tc5is950.png)", "description": "给你两个正整数 $n,m$，你要构造两个正整数 $x,y$（不能有前导 $0$），使得 $x$ 有 $n$ 位，$y$ 有 $m$ 位，且 $x\\times y$ 是回文数。\n\n请保证你构造的输出合法，否则后果自负。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行两个整数，表示 $x,y$。", "hint": "对于 $100\\%$ 的数据，$n,m \\le 10^3$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1(25pts)：$n,m \\le 6$。\n- Subtask 2(10pts)：$m = 1$。\n- Subtask 3(65pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「chaynOI R1 T1」一维数组", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/tc5is950.png)", "description": "给你两个正整数 $n,m$，你要构造两个正整数 $x,y$（不能有前导 $0$），使得 $x$ 有 $n$ 位，$y$ 有 $m$ 位，且 $x\\times y$ 是回文数。\n\n请保证你构造的输出合法，否则后果自负。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行两个整数，表示 $x,y$。", "hint": "对于 $100\\%$ 的数据，$n,m \\le 10^3$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1(25pts)：$n,m \\le 6$。\n- Subtask 2(10pts)：$m = 1$。\n- Subtask 3(65pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11569", "type": "P", "difficulty": 3, "samples": [["5 6\n1 2 3 4 5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "「chaynOI R1 T2」画图软件", "background": "### 14:27 添加了 T2 样例解释。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g3femwbe.png)\n", "description": "给你一个序列 $a$，你可以进行不超过 $k$ 次「落笔」操作，每次选择一个 $p(1\\le p\\le n)$ 使得 $a_p \\gets a_p +1$（即让 $a$ 中的第 $p$ 项加上 $1$），求出让 $a$ 为非负公差的等差数列的最终序列可能的情况数。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数，表示序列 $a$。\n", "outputFormat": "一行一个整数，表示答案。", "hint": "### 样例解释\n\n共 $(1,2,3,4,5),(2,3,4,5,6)$，$2$ 种。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1 \\le n,a_i \\le 10^6$，$k\\le 10^7$。\n\n**本题采用捆绑测试。**\n\n+ Subtask 1(20pts)：$n,k \\le 100$。\n+ Subtask 2(15pts)：$n \\le 100$。\n+ Subtask 3(15pts)：$k \\le 10^5$。\n+ Subtask 4(50pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「chaynOI R1 T2」画图软件", "background": "### 14:27 添加了 T2 样例解释。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g3femwbe.png)\n", "description": "给你一个序列 $a$，你可以进行不超过 $k$ 次「落笔」操作，每次选择一个 $p(1\\le p\\le n)$ 使得 $a_p \\gets a_p +1$（即让 $a$ 中的第 $p$ 项加上 $1$），求出让 $a$ 为非负公差的等差数列的最终序列可能的情况数。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数，表示序列 $a$。\n", "outputFormat": "一行一个整数，表示答案。", "hint": "### 样例解释\n\n共 $(1,2,3,4,5),(2,3,4,5,6)$，$2$ 种。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1 \\le n,a_i \\le 10^6$，$k\\le 10^7$。\n\n**本题采用捆绑测试。**\n\n+ Subtask 1(20pts)：$n,k \\le 100$。\n+ Subtask 2(15pts)：$n \\le 100$。\n+ Subtask 3(15pts)：$k \\le 10^5$。\n+ Subtask 4(50pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11570", "type": "P", "difficulty": 4, "samples": [["4 2\n0 1 3 2\n1 2 2\n2 1 4", "2\n0"], ["10 10\n0 0 1 1 1 0 0 1 0 1\n1 0 0\n2 0 1\n3 1 2\n4 0 1\n5 0 2\n6 0 1\n7 1 1\n8 2 2\n9 0 0\n10 1 2\n", "0\n1\n5\n2\n6\n2\n1\n2\n0\n0\n"]], "limits": {"time": [600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "「chaynOI R1 T3」镍铬合金机器人", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/wv3r15c6.png)\n", "description": "给定一个长为 $n$ 的序列 $bot$。\n\n有 $q$ 次询问，每次给出三个数 $l,x,y$，请你求出有多少个以 $l$ 为左端点的区间 $[l,r]$（$l\\le r$）使得 $\\text{mex}(\\{bot_l,bot_{l+1},\\cdots,bot_r\\})\\in[x,y]$。\n\n注：一个可重集合 $S$ 的 $\\text{mex}$ 函数 $\\text{mex}(S)$ 指的是**最小**的没有在 $S$ 中出现过的**非负整数**，如 $\\text{mex}(\\{0,1,1,3\\}) = 2$。 ", "inputFormat": "第一行两个正整数 $n,q$，表示序列的长度和询问的次数。\n\n第二行 $n$ 个数，表示序列 $bot$。\n\n接下来 $q$ 行，每行三个整数 $l,x,y$。", "outputFormat": "输出共 $q$ 行，每行一个整数，表示答案。\n\n", "hint": "对于 $100\\%$ 的数据，$1\\le n,q \\le 3\\times 10^5$，$0\\le bot_i < n$，$0\\le x \\le y \\le n$，$1 \\le l\\le n$。\n\n**本题采用捆绑测试。**\n\n+ Subtask 1(10pts)：$n,q\\le 300$。\n+ Subtask 2(15pts)：$n,q\\le 2000$。\n+ Subtask 3(15pts)：$bot_i \\le 1$。\n+ Subtask 4(20pts)：$x=y$。\n+ Subtask 5(40pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「chaynOI R1 T3」镍铬合金机器人", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/wv3r15c6.png)\n", "description": "给定一个长为 $n$ 的序列 $bot$。\n\n有 $q$ 次询问，每次给出三个数 $l,x,y$，请你求出有多少个以 $l$ 为左端点的区间 $[l,r]$（$l\\le r$）使得 $\\text{mex}(\\{bot_l,bot_{l+1},\\cdots,bot_r\\})\\in[x,y]$。\n\n注：一个可重集合 $S$ 的 $\\text{mex}$ 函数 $\\text{mex}(S)$ 指的是**最小**的没有在 $S$ 中出现过的**非负整数**，如 $\\text{mex}(\\{0,1,1,3\\}) = 2$。 ", "inputFormat": "第一行两个正整数 $n,q$，表示序列的长度和询问的次数。\n\n第二行 $n$ 个数，表示序列 $bot$。\n\n接下来 $q$ 行，每行三个整数 $l,x,y$。", "outputFormat": "输出共 $q$ 行，每行一个整数，表示答案。\n\n", "hint": "对于 $100\\%$ 的数据，$1\\le n,q \\le 3\\times 10^5$，$0\\le bot_i < n$，$0\\le x \\le y \\le n$，$1 \\le l\\le n$。\n\n**本题采用捆绑测试。**\n\n+ Subtask 1(10pts)：$n,q\\le 300$。\n+ Subtask 2(15pts)：$n,q\\le 2000$。\n+ Subtask 3(15pts)：$bot_i \\le 1$。\n+ Subtask 4(20pts)：$x=y$。\n+ Subtask 5(40pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11571", "type": "P", "difficulty": 5, "samples": [["111 1 2 ", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "数位 DP"], "title": "「chaynOI R1 T4」橙红色的鱼", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/w6fq1o22.png)", "description": "给定 $r,m,s$，问有多少个正整数对 $(fi,sh)$，满足：\n\n+ $ 0 \\le fi \\le sh \\le r$。\n\n+ $\\operatorname{popcount}(fi \\oplus sh) = m$。\n\n+ $\\operatorname{popcount}(fi + sh) = s$。\n\n其中，$\\operatorname{popcount}(x)$ 表示 $x$ 的二进制表示中 $1$ 的个数，$\\oplus$ 表示异或运算。\n\n为了方便，$r$ 以二进制形式给出。\n\n保证给出的任何数字不含有前导 $0$。\n\n答案对 $998244353$ 取模。", "inputFormat": "一行三个整数 $r,m,s$。", "outputFormat": "一行一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "### 样例解释：\n\n下文数字为十进制。\n\n$r=7$，有 $(1,5),(2,3),(3,7),(4,5),(4,6),(5,7)$ 六种。\n\n### 数据范围：\n\n记 $n$ 为给出的 $r$ 的长度。 \n\n对于 $100\\%$ 的数据，$1 \\le n,m,s \\le 200$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1(15pts)：$n \\le 12$。\n- Subtask 2(25pts)：$m,s \\le 30$。\n- Subtask 3(25pts)：$r=2^n-1$。\n- Subtask 4(35pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「chaynOI R1 T4」橙红色的鱼", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/w6fq1o22.png)", "description": "给定 $r,m,s$，问有多少个正整数对 $(fi,sh)$，满足：\n\n+ $ 0 \\le fi \\le sh \\le r$。\n\n+ $\\operatorname{popcount}(fi \\oplus sh) = m$。\n\n+ $\\operatorname{popcount}(fi + sh) = s$。\n\n其中，$\\operatorname{popcount}(x)$ 表示 $x$ 的二进制表示中 $1$ 的个数，$\\oplus$ 表示异或运算。\n\n为了方便，$r$ 以二进制形式给出。\n\n保证给出的任何数字不含有前导 $0$。\n\n答案对 $998244353$ 取模。", "inputFormat": "一行三个整数 $r,m,s$。", "outputFormat": "一行一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "### 样例解释：\n\n下文数字为十进制。\n\n$r=7$，有 $(1,5),(2,3),(3,7),(4,5),(4,6),(5,7)$ 六种。\n\n### 数据范围：\n\n记 $n$ 为给出的 $r$ 的长度。 \n\n对于 $100\\%$ 的数据，$1 \\le n,m,s \\le 200$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1(15pts)：$n \\le 12$。\n- Subtask 2(25pts)：$m,s \\le 30$。\n- Subtask 3(25pts)：$r=2^n-1$。\n- Subtask 4(35pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11572", "type": "P", "difficulty": 0, "samples": [["6\n2 2\n2 -6\n-2 -4\n-6 4\n10 -10\n-8 12\n16\nQ\nC -4 -4\nF\nF\nQ\nF\nC 6 -2\nB\nB\nB\nQ\nC 0 6\nQ\nF\nC -8 4\nQ", "4\n4\n3\n1\n5"], ["5\n6 2\n0 -6\n-2 2\n-6 -8\n4 0\n12\nQ\nC 4 4\nQ\nF\nF\nF\nC -6 -2\nQ\nB\nB\nC -4 -6\nQ", "3\n5\n5\n4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "COTS（克罗地亚）"], "title": "[COTS 2015] 机械臂 / Ruka", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D1T1。$\\texttt{2s,0.5G}$。", "description": "\n给定 $n$ 个二维笛卡尔坐标系中的向量 $v_i=(x_i,y_i)$。\n\n令点 $P_0=(1,1)$。对于 $1\\le i\\le n$，有 $P_i=P_{i-1}+v_i$。\n\n有一个变量 $\\mathrm{pos}$，初始时为 $1$。有 $m$ 个操作：\n\n- $\\texttt{B}$：令 $\\mathrm{pos}\\gets\\max(1,\\mathrm{pos}-1)$。\n- $\\texttt{F}$：令 $\\mathrm{pos}\\gets\\min(n,\\mathrm{pos}+1)$。\n- $\\texttt{C}$ $x$ $y$：令 $v_{\\mathrm{pos}}\\gets (x,y)$。\n- $\\texttt{Q}$：询问 $\\displaystyle \\sum_{1\\le i\\le n} f(i)$，其中 $f(i)$ 表示线段 $P_{i-1}P_i$ 与坐标轴相交了多少次。\n    - **特别地，若 $P_{i-1}P_i$ 经过原点，我们也认为与两个坐标轴都相交。**\n\n这里，**保证任意时刻，对于 $\\forall 1\\le i\\le n$，都有 $x_i,y_i$ 是偶数。**\n\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个**偶数** $x_i,y_i$。\n\n第 $(n+2)$ 行，一个正整数 $m$。\n\n接下来 $m$ 行，每行先是一个大写字母，再是零个或两个**偶数**，描述一个操作。格式见题目描述处。", "outputFormat": "\n对于每个查询操作，输出一行一个非负整数表示答案。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 10^5$，$1\\le n\\le 3\\times 10^5$；\n- $|x|,|y|,|x_i|,|y_i|\\le 500$，且**均为偶数**。\n\n\n| 子任务编号 | $n\\le $ |  $m\\le $ |  得分 |  \n| :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 1\\, 000 $    |  $1\\, 000$ |$ 9 $   |  \n| $ 2 $    | $ 5\\times 10^4 $   |  $ 10^5 $ |  $ 35 $   |  \n| $ 3 $    | $ 10^5 $ | $ 3\\times 10^5 $ |  $ 56 $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2015] 机械臂 / Ruka", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D1T1。$\\texttt{2s,0.5G}$。", "description": "\n给定 $n$ 个二维笛卡尔坐标系中的向量 $v_i=(x_i,y_i)$。\n\n令点 $P_0=(1,1)$。对于 $1\\le i\\le n$，有 $P_i=P_{i-1}+v_i$。\n\n有一个变量 $\\mathrm{pos}$，初始时为 $1$。有 $m$ 个操作：\n\n- $\\texttt{B}$：令 $\\mathrm{pos}\\gets\\max(1,\\mathrm{pos}-1)$。\n- $\\texttt{F}$：令 $\\mathrm{pos}\\gets\\min(n,\\mathrm{pos}+1)$。\n- $\\texttt{C}$ $x$ $y$：令 $v_{\\mathrm{pos}}\\gets (x,y)$。\n- $\\texttt{Q}$：询问 $\\displaystyle \\sum_{1\\le i\\le n} f(i)$，其中 $f(i)$ 表示线段 $P_{i-1}P_i$ 与坐标轴相交了多少次。\n    - **特别地，若 $P_{i-1}P_i$ 经过原点，我们也认为与两个坐标轴都相交。**\n\n这里，**保证任意时刻，对于 $\\forall 1\\le i\\le n$，都有 $x_i,y_i$ 是偶数。**\n\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个**偶数** $x_i,y_i$。\n\n第 $(n+2)$ 行，一个正整数 $m$。\n\n接下来 $m$ 行，每行先是一个大写字母，再是零个或两个**偶数**，描述一个操作。格式见题目描述处。", "outputFormat": "\n对于每个查询操作，输出一行一个非负整数表示答案。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 10^5$，$1\\le n\\le 3\\times 10^5$；\n- $|x|,|y|,|x_i|,|y_i|\\le 500$，且**均为偶数**。\n\n\n| 子任务编号 | $n\\le $ |  $m\\le $ |  得分 |  \n| :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 1\\, 000 $    |  $1\\, 000$ |$ 9 $   |  \n| $ 2 $    | $ 5\\times 10^4 $   |  $ 10^5 $ |  $ 35 $   |  \n| $ 3 $    | $ 10^5 $ | $ 3\\times 10^5 $ |  $ 56 $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11573", "type": "P", "difficulty": 0, "samples": [["5 2\n3 5 1 4 3\n3 5", "2\n1"], ["7 7\n7 7 7 7 7 7 7\n7 6 5 4 3 2 1", "1\n6\n15\n20\n15\n6\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "COTS（克罗地亚）"], "title": "[COTS 2015] 关灯泡 / Žarulje", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D1T2。$\\texttt{1s,0.5G}$。", "description": "\n有 $n$ 盏灯泡排成一排，从左到右编号 $1\\sim n$。第 $i$ 盏灯泡发光的功率为 $a_i$ 瓦。\n\n现在想要将所有灯泡全部关闭。考虑如下的贪心算法：\n\n- 选择起始位置 $p$。关闭灯泡 $p$。\n- 令当前位置为 $x$。若还有灯泡未关闭，循环执行以下流程：\n    - 若只有 $x$ 左边有未关闭的灯泡，则关闭 $x$ 左边离 $x$ 最近的灯泡 $l$，并令 $x\\gets l$。\n    - 若只有 $x$ 右边有未关闭的灯泡，则关闭 $x$ 右边离 $x$ 最近的灯泡 $r$，并令 $x\\gets r$。\n    - 否则，$x$ 左边离 $x$ 最近的灯泡为 $l$，令 $x$ 右边离 $x$ 最近的灯泡为 $r$。\n        - 如果两盏灯泡功率相等，则随机选择一盏灯泡 $y$。关闭 $y$，并令 $x\\gets y$。\n        - 否则，令功率更大的灯泡为 $y$。关闭 $y$，并令 $x\\gets y$。\n\n\n定义 $f(p)$ 为起始位置为 $p$ 时，上述贪心算法产生的不同关灯泡序列有多少个。\n\n给定 $m$ 个位置 $x_1,x_2,\\cdots,x_m$。对于 $i=1,2,\\cdots,m$，求出 $f(x_i)$ 对 $(10^9+7)$ 取模后的结果。", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n第二行，$n$ 个正整数 $a_1,a_2,\\cdots,a_n$。\n\n第三行，$m$ 个正整数 $x_1,x_2,\\cdots,x_m$。\n", "outputFormat": "\n输出 $m$ 行。每行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：起始位置为 $3$ 时，$[3,2,4,1,5]$ 和 $[3,2,4,5,1]$ 是可能的两种关灯泡顺序。\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le x_i\\le n\\le 2\\times 10^5$；\n- $1\\le a_i,m\\le 2\\times 10^5$。\n\n| 子任务编号 | $n\\le $ |  $m\\le $ |  得分 |  \n| :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 2\\times 10^3 $    |  $2\\times 10^3$ |$ 22 $   |  \n| $ 2 $    | $ 2\\times 10^5 $   |  $ 5 $ |  $ 38 $   |  \n| $ 3 $    | $ 2\\times 10^5 $ | $ 2\\times 10^5 $ |  $ 40 $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2015] 关灯泡 / Žarulje", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D1T2。$\\texttt{1s,0.5G}$。", "description": "\n有 $n$ 盏灯泡排成一排，从左到右编号 $1\\sim n$。第 $i$ 盏灯泡发光的功率为 $a_i$ 瓦。\n\n现在想要将所有灯泡全部关闭。考虑如下的贪心算法：\n\n- 选择起始位置 $p$。关闭灯泡 $p$。\n- 令当前位置为 $x$。若还有灯泡未关闭，循环执行以下流程：\n    - 若只有 $x$ 左边有未关闭的灯泡，则关闭 $x$ 左边离 $x$ 最近的灯泡 $l$，并令 $x\\gets l$。\n    - 若只有 $x$ 右边有未关闭的灯泡，则关闭 $x$ 右边离 $x$ 最近的灯泡 $r$，并令 $x\\gets r$。\n    - 否则，$x$ 左边离 $x$ 最近的灯泡为 $l$，令 $x$ 右边离 $x$ 最近的灯泡为 $r$。\n        - 如果两盏灯泡功率相等，则随机选择一盏灯泡 $y$。关闭 $y$，并令 $x\\gets y$。\n        - 否则，令功率更大的灯泡为 $y$。关闭 $y$，并令 $x\\gets y$。\n\n\n定义 $f(p)$ 为起始位置为 $p$ 时，上述贪心算法产生的不同关灯泡序列有多少个。\n\n给定 $m$ 个位置 $x_1,x_2,\\cdots,x_m$。对于 $i=1,2,\\cdots,m$，求出 $f(x_i)$ 对 $(10^9+7)$ 取模后的结果。", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n第二行，$n$ 个正整数 $a_1,a_2,\\cdots,a_n$。\n\n第三行，$m$ 个正整数 $x_1,x_2,\\cdots,x_m$。\n", "outputFormat": "\n输出 $m$ 行。每行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：起始位置为 $3$ 时，$[3,2,4,1,5]$ 和 $[3,2,4,5,1]$ 是可能的两种关灯泡顺序。\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le x_i\\le n\\le 2\\times 10^5$；\n- $1\\le a_i,m\\le 2\\times 10^5$。\n\n| 子任务编号 | $n\\le $ |  $m\\le $ |  得分 |  \n| :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 2\\times 10^3 $    |  $2\\times 10^3$ |$ 22 $   |  \n| $ 2 $    | $ 2\\times 10^5 $   |  $ 5 $ |  $ 38 $   |  \n| $ 3 $    | $ 2\\times 10^5 $ | $ 2\\times 10^5 $ |  $ 40 $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11574", "type": "P", "difficulty": 5, "samples": [["4\n3 4 4\n2 4 3\n4 1 6\n2 3 2", "7 4\n2 7\n10 1\n0 3"], ["4\n1 1 3\n3 3 2\n2 6 3\n7 3 3", "4 1\n4 2\n5 6\n10 3"], ["5\n4 2 1\n1 4 4\n2 1 2\n0 0 5\n4 0 3", "5 2\n5 4\n3 2\n3 -2\n7 0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "线段树", "离散化", "Special Judge", "扫描线", "COTS（克罗地亚）"], "title": "[COTS 2015] 点外卖 / Dostava", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D2T1。$\\texttt{2s,0.5G}$。\n", "description": "\n平面上有 $n$ 个整点。但是不知道它们的位置。\n\n有 $n$ 条信息，第 $i$ 条信息形如 $x_i,y_i,t_i$，意思是「距离 $(x_i,y_i)$ 最近的点到 $(x_i,y_i)$ 的距离为 $t_i$」。试构造一组可能的点的位置。\n\n这里，距离指的是 **Manhattan 距离**。换句话说，定义点 $(a,b)$ 和 $(c,d)$ 的距离为 $|a-c|+|b-d|$。", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行三个正整数 $x_i,y_i,t_i$。\n\n**保证有解。**", "outputFormat": "\n输出 $n$ 行，每行两个整数 $x_i,y_i$，描述一个点。\n\n**不要求**这 $n$ 个点两两不同。但是**你需要保证 $|x_i|,|y_i|\\le 10^9$**。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 5\\times 10^4$；\n- $1\\le x_i,y_i,t_i\\le 10^8$；\n- 存在一组合法的解。\n\n| 子任务编号 | $n\\le $ |  $x_i,y_i,t_i\\le $ |  得分 |  \n| :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 100 $    |  $100$ |$ 10 $   |  \n| $ 2 $    | $ 10^3 $   |  $ 5\\times 10^8 $ |  $ 36 $   |  \n| $ 3 $    | $ 5\\times 10^4 $ | $ 5\\times 10^8 $ |  $ 54      $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2015] 点外卖 / Dostava", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D2T1。$\\texttt{2s,0.5G}$。\n", "description": "\n平面上有 $n$ 个整点。但是不知道它们的位置。\n\n有 $n$ 条信息，第 $i$ 条信息形如 $x_i,y_i,t_i$，意思是「距离 $(x_i,y_i)$ 最近的点到 $(x_i,y_i)$ 的距离为 $t_i$」。试构造一组可能的点的位置。\n\n这里，距离指的是 **Manhattan 距离**。换句话说，定义点 $(a,b)$ 和 $(c,d)$ 的距离为 $|a-c|+|b-d|$。", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行三个正整数 $x_i,y_i,t_i$。\n\n**保证有解。**", "outputFormat": "\n输出 $n$ 行，每行两个整数 $x_i,y_i$，描述一个点。\n\n**不要求**这 $n$ 个点两两不同。但是**你需要保证 $|x_i|,|y_i|\\le 10^9$**。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 5\\times 10^4$；\n- $1\\le x_i,y_i,t_i\\le 10^8$；\n- 存在一组合法的解。\n\n| 子任务编号 | $n\\le $ |  $x_i,y_i,t_i\\le $ |  得分 |  \n| :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 100 $    |  $100$ |$ 10 $   |  \n| $ 2 $    | $ 10^3 $   |  $ 5\\times 10^8 $ |  $ 36 $   |  \n| $ 3 $    | $ 5\\times 10^4 $ | $ 5\\times 10^8 $ |  $ 54      $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11575", "type": "P", "difficulty": 5, "samples": [["5 5\n...3.\n....1\n..0.3\n489..\n.....", "21\n25\n28\n28\n28"], ["3 5\n999.1\n.....\n1.999", "54\n56\n56\n56\n56"], ["5 5\n.27..\n7.063\n....7\n78...\n8...2", "48\n57\n57\n57\n57"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "COTS（克罗地亚）"], "title": "[COTS 2015] 挖油田 / Nafta", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D2T2。$\\texttt{2s,0.5G}$。", "description": "\n给定 $n\\times m$ 的矩阵。\n\n这个矩阵描述的是一块油田的**横截面**：矩阵中的每一个位置要么是 $\\texttt{.}$，表示这里是岩石；要么是 $\\texttt{0}\\sim \\texttt{9}$ 间的一个数字，表示这里是油层，以及这个油层储存了多少单位的石油。\n\n选择若干**列**开采石油。如果某个油层与这一列上的油层（仅通过油层）**四连通**，那么这个油层就可以被开采。\n\n对于 $i=1,2,\\cdots,m$，求出：如果选择 $i$ 列开采石油，最多能获得多少单位的石油。\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的字符串，描述油田。", "outputFormat": "输出 $m$ 行，每行一个整数表示答案。\n", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le n,m\\le 2\\times 10^3$。\n\n| 子任务编号 | $n,m\\le $ |  得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ 50 $    |  $ 11 $   |  \n| $ 2 $    | $ 300 $   |    $ 23 $   |  \n| $ 3 $    | $ 2\\times 10^3 $ | $ 66      $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2015] 挖油田 / Nafta", "background": "\n译自 [Izborne Pripreme 2015 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/prip15/) D2T2。$\\texttt{2s,0.5G}$。", "description": "\n给定 $n\\times m$ 的矩阵。\n\n这个矩阵描述的是一块油田的**横截面**：矩阵中的每一个位置要么是 $\\texttt{.}$，表示这里是岩石；要么是 $\\texttt{0}\\sim \\texttt{9}$ 间的一个数字，表示这里是油层，以及这个油层储存了多少单位的石油。\n\n选择若干**列**开采石油。如果某个油层与这一列上的油层（仅通过油层）**四连通**，那么这个油层就可以被开采。\n\n对于 $i=1,2,\\cdots,m$，求出：如果选择 $i$ 列开采石油，最多能获得多少单位的石油。\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的字符串，描述油田。", "outputFormat": "输出 $m$ 行，每行一个整数表示答案。\n", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le n,m\\le 2\\times 10^3$。\n\n| 子任务编号 | $n,m\\le $ |  得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ 50 $    |  $ 11 $   |  \n| $ 2 $    | $ 300 $   |    $ 23 $   |  \n| $ 3 $    | $ 2\\times 10^3 $ | $ 66      $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11576", "type": "P", "difficulty": 1, "samples": [["3\n1\n0", "sad"], ["3\n2\n1", "happy"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCC（加拿大）"], "title": "[CCC 2020] Dog Treats", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T1 Dog Treats。", "description": "小狗 Barley 喜欢零食。在一天结束时，他的心情取决于他在一天中收到的零食的大小与数量。\n\n零食有三种大小：小、中、大。若这一天它获得小零食 $S$ 份，中零食 $M$ 份，大零食 $L$ 份，则他的快乐值可以用以下公式来衡量：\n\n$1 \\times S+2\\times M + 3\\times L$\n\n如果 Barley 的快乐值大于等于 $10$，那么它是快乐的。否则，他会感到十分伤心。请判断 Barley 在一天结束时心情是快乐的还是伤心的。", "inputFormat": "输入共 $3$ 行。\n\n第一行一个整数 $S(0 \\le S \\le 10)$，表示小零食数量。\n\n第二行一个整数 $M(0 \\le M \\le 10)$，表示中零食数量。\n\n第三行一个整数 $L(0 \\le L \\le 10)$，表示大零食数量。", "outputFormat": "一行一个字符串，若 Barley 的心情是快乐，则输出 `happy`，否则输出 `sad`。", "hint": "**本题采用捆绑测试**。\n\n#### 【样例解释】\n对于第一组样例，易得快乐值为 $1 \\times 3+2\\times 1 + 3\\times 0=5$，而 $5< 10$，则 Barley 是伤心的。\n\n对于第二组样例，易得快乐值为 $1 \\times 3+2\\times 2 + 3\\times 1=10$，而 $10 \\geq 10$，则 Barley 是快乐的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Dog Treats", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T1 Dog Treats。", "description": "小狗 Barley 喜欢零食。在一天结束时，他的心情取决于他在一天中收到的零食的大小与数量。\n\n零食有三种大小：小、中、大。若这一天它获得小零食 $S$ 份，中零食 $M$ 份，大零食 $L$ 份，则他的快乐值可以用以下公式来衡量：\n\n$1 \\times S+2\\times M + 3\\times L$\n\n如果 Barley 的快乐值大于等于 $10$，那么它是快乐的。否则，他会感到十分伤心。请判断 Barley 在一天结束时心情是快乐的还是伤心的。", "inputFormat": "输入共 $3$ 行。\n\n第一行一个整数 $S(0 \\le S \\le 10)$，表示小零食数量。\n\n第二行一个整数 $M(0 \\le M \\le 10)$，表示中零食数量。\n\n第三行一个整数 $L(0 \\le L \\le 10)$，表示大零食数量。", "outputFormat": "一行一个字符串，若 Barley 的心情是快乐，则输出 `happy`，否则输出 `sad`。", "hint": "**本题采用捆绑测试**。\n\n#### 【样例解释】\n对于第一组样例，易得快乐值为 $1 \\times 3+2\\times 1 + 3\\times 0=5$，而 $5< 10$，则 Barley 是伤心的。\n\n对于第二组样例，易得快乐值为 $1 \\times 3+2\\times 2 + 3\\times 1=10$，而 $10 \\geq 10$，则 Barley 是快乐的。", "locale": "zh-CN"}}}
{"pid": "P11577", "type": "P", "difficulty": 1, "samples": [["750\n1\n5", "4"], ["10\n2\n1", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCC（加拿大）"], "title": "[CCC 2020] Epidemiology", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T2 Epidemiology。", "description": "当一个人患病时，他会在明天感染 $R$ 个人，随后便不再感染他人。没有一个人会被感染超过一次。我们想要确定造成 $P+1$ 个人患病的最早时间。", "inputFormat": "输入共三行。\n\n第一行一个整数 $P(P \\le 10^7)$。\n\n第二行一个整数 $N(N \\le P)$，表示第 $0$ 天时的患病人数。\n\n第三行一个整数 $R(R\\le 10)$。", "outputFormat": "一行一个整数表示题目所求。", "hint": "**本题采用捆绑测试**。\n#### 【样例解释】\n对于第一组样例，第 $4$ 天共感染了 $1+5+25+125+625=781$ 人，且 $781 >750$。可证明这是最早时间。\n\n对于第二组样例，第 $5$ 天共感染了 $2+2+2+2+2+2=12$ 人，且 $12 >10$。可证明这是最早时间。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Epidemiology", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T2 Epidemiology。", "description": "当一个人患病时，他会在明天感染 $R$ 个人，随后便不再感染他人。没有一个人会被感染超过一次。我们想要确定造成 $P+1$ 个人患病的最早时间。", "inputFormat": "输入共三行。\n\n第一行一个整数 $P(P \\le 10^7)$。\n\n第二行一个整数 $N(N \\le P)$，表示第 $0$ 天时的患病人数。\n\n第三行一个整数 $R(R\\le 10)$。", "outputFormat": "一行一个整数表示题目所求。", "hint": "**本题采用捆绑测试**。\n#### 【样例解释】\n对于第一组样例，第 $4$ 天共感染了 $1+5+25+125+625=781$ 人，且 $781 >750$。可证明这是最早时间。\n\n对于第二组样例，第 $5$ 天共感染了 $2+2+2+2+2+2=12$ 人，且 $12 >10$。可证明这是最早时间。", "locale": "zh-CN"}}}
{"pid": "P11578", "type": "P", "difficulty": 1, "samples": [["5\n44,62\n34,69\n24,78\n42,44\n64,10", "23,9\n65,79"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCC（加拿大）"], "title": "[CCC 2020] Art", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T3 Art。", "description": "Mahima 一直在尝试一种新的艺术风格。她站在画布前，用画笔在画布上绘画。当她认为自己创造了一件杰作时，她会用 3D 打印机打印一个框架来保护自己的画作。\n\n你的工作是通过确定尽可能小的长方形框架的坐标来帮助 Mahima，让每一滴颜料都位于框架内。\n\n**框架上的点不在框架内考虑。**", "inputFormat": "第一行一行一个整数 $n(2\\le n \\le100)$ 表示颜料的数量。\n\n接下来 $n$ 行每行两个整数 $x,y(x,y \\le 100)$，表示当前颜料的坐标，中间用 `,` 分割。", "outputFormat": "共两行。\n\n第一行两个整数表示框架左下角的坐标，用 `,` 分割。\n\n第二行两个整数表示框架右上角的坐标，用 `,` 分割。", "hint": "**本题采用捆绑测试**。\n#### 【样例解释】\n框架的左下角是 $(23,9)$，如果左下角上移，则颜料 $(64,10)$ 将不再位于框架内，如果其右移，则颜料 $(24,78)$ 将不再位于框架，而向其他方向移动会加大框架面积，不合题意。右上角同理。\n![](https://cdn.luogu.com.cn/upload/image_hosting/qrrjbsb8.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Art", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T3 Art。", "description": "Mahima 一直在尝试一种新的艺术风格。她站在画布前，用画笔在画布上绘画。当她认为自己创造了一件杰作时，她会用 3D 打印机打印一个框架来保护自己的画作。\n\n你的工作是通过确定尽可能小的长方形框架的坐标来帮助 Mahima，让每一滴颜料都位于框架内。\n\n**框架上的点不在框架内考虑。**", "inputFormat": "第一行一行一个整数 $n(2\\le n \\le100)$ 表示颜料的数量。\n\n接下来 $n$ 行每行两个整数 $x,y(x,y \\le 100)$，表示当前颜料的坐标，中间用 `,` 分割。", "outputFormat": "共两行。\n\n第一行两个整数表示框架左下角的坐标，用 `,` 分割。\n\n第二行两个整数表示框架右上角的坐标，用 `,` 分割。", "hint": "**本题采用捆绑测试**。\n#### 【样例解释】\n框架的左下角是 $(23,9)$，如果左下角上移，则颜料 $(64,10)$ 将不再位于框架内，如果其右移，则颜料 $(24,78)$ 将不再位于框架，而向其他方向移动会加大框架面积，不合题意。右上角同理。\n![](https://cdn.luogu.com.cn/upload/image_hosting/qrrjbsb8.png)", "locale": "zh-CN"}}}
{"pid": "P11579", "type": "P", "difficulty": 1, "samples": [["ABCCDEABAA\nABCDE", "yes"], ["ABCDDEBCAB\nABA", "no"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCC（加拿大）"], "title": "[CCC 2020] Cyclic Shifts", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T4 Cyclic Shifts。", "description": "Thuc 喜欢寻找字符串的循环移位。字符串的循环移位是通过不断将字符从字符串的开头移动到字符串的末尾来得到的。当然，一个字符串是它自身的循环移位。例如，`ABCDE` 的循环移位有：`ABCDE`，`BCDEA`，`CDEAB`，`DEABC`，`EABCD`。\n\n给定一些文本串 $T$ 和一个字符串 $S$，判断 $T$ 是否包含 $S$ 的循环移位。", "inputFormat": "共两行。\n\n第一行一个文本串 $T$。\n\n第二行一个字符串 $S$。", "outputFormat": "若 $T$ 包含 $S$ 的循环移位，输出 `yes`，否则输出 `no`。", "hint": "#### 【样例解释】\n对于第一组样例，`CDEAB` 是 `ABCDE` 的循环移位，且存在于 `ABCCDEABAA` 之中。\n\n对于第二组样例，易证明 `ABA` 的所有循环移位都不存在于 `ABCDDEBCAB` 之中。\n#### 【数据范围】\n**本题采用捆绑测试**。\n\n对于 $40\\%$ 的数据，$|S|=3$。\n\n对于 $100\\%$ 的数据，保证 $1\\le |S|,|T|\\le 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Cyclic Shifts", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T4 Cyclic Shifts。", "description": "Thuc 喜欢寻找字符串的循环移位。字符串的循环移位是通过不断将字符从字符串的开头移动到字符串的末尾来得到的。当然，一个字符串是它自身的循环移位。例如，`ABCDE` 的循环移位有：`ABCDE`，`BCDEA`，`CDEAB`，`DEABC`，`EABCD`。\n\n给定一些文本串 $T$ 和一个字符串 $S$，判断 $T$ 是否包含 $S$ 的循环移位。", "inputFormat": "共两行。\n\n第一行一个文本串 $T$。\n\n第二行一个字符串 $S$。", "outputFormat": "若 $T$ 包含 $S$ 的循环移位，输出 `yes`，否则输出 `no`。", "hint": "#### 【样例解释】\n对于第一组样例，`CDEAB` 是 `ABCDE` 的循环移位，且存在于 `ABCCDEABAA` 之中。\n\n对于第二组样例，易证明 `ABA` 的所有循环移位都不存在于 `ABCDDEBCAB` 之中。\n#### 【数据范围】\n**本题采用捆绑测试**。\n\n对于 $40\\%$ 的数据，$|S|=3$。\n\n对于 $100\\%$ 的数据，保证 $1\\le |S|,|T|\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P11580", "type": "P", "difficulty": 3, "samples": [["3\n4\n3 10 8 14\n1 11 12 12\n6 2 3 9", "yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCC（加拿大）"], "title": "[CCC 2020] Escape Room", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCSrProblemSet.html) T2/[2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T5 Escape Room。", "description": "你需要判断是否可以从一个房间逃脱。房间是一个 $m$ 行 $n$ 列的矩阵，每个位置包含一个正整数。我们用 $(x,y)$ 表示第 $x$ 行，第 $y$ 列的单元格。\n\n当你从 $(1,1)$ 开始，并成功走到 $(m,n)$ 时，你便成功逃脱了。如果你在一个包含值 $num$ 的单元格中，那么若你可以跳到 $(x,y)$，当前仅当 $x \\times y=num$。例如，如果你在一个包含 $6$ 的单元格中，你可以跳到单元格 $(2,3)$。", "inputFormat": "第一行一个整数 $m(1 \\le m \\le 1000)$，表示网格的行数。\n\n第二行一个整数 $n(1\\le n \\le 1000)$，表示网格的列数。\n\n接下来 $m$ 行，每行 $n$ 个整数，表示当前格子中的值 $num(1 \\le num \\le 10^6)$。", "outputFormat": "如果可以从房间逃脱，则输出 `yes`。否则输出 `no`。", "hint": "#### 【样例解释】\n从 $(1,1)$ 开始，其包含的值为 $3$，从这里可以跳到单元格 $(1,3)$。\n\n这个单元格包含 $8$，因此从这里可以跳到单元格 $(2,4)$。\n\n这个单元格包含 $12$，因此从这里可以跳到单元格 $(3,4)$。\n#### 【数据范围】\n**本题采用捆绑测试**。\n\n由于原题 Subtask 分值，本题满分 105 分。\n| Subtask | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $m=n=2$ | 7 |\n| 2 | $m=1$ | 14 |\n| 3 | 所有单元格中的整数是唯一的 | 28 |\n| 4 | $1\\le m,n \\le200$ | 28 |\n| 5 | 无 | 28 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Escape Room", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCSrProblemSet.html) T2/[2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T5 Escape Room。", "description": "你需要判断是否可以从一个房间逃脱。房间是一个 $m$ 行 $n$ 列的矩阵，每个位置包含一个正整数。我们用 $(x,y)$ 表示第 $x$ 行，第 $y$ 列的单元格。\n\n当你从 $(1,1)$ 开始，并成功走到 $(m,n)$ 时，你便成功逃脱了。如果你在一个包含值 $num$ 的单元格中，那么若你可以跳到 $(x,y)$，当前仅当 $x \\times y=num$。例如，如果你在一个包含 $6$ 的单元格中，你可以跳到单元格 $(2,3)$。", "inputFormat": "第一行一个整数 $m(1 \\le m \\le 1000)$，表示网格的行数。\n\n第二行一个整数 $n(1\\le n \\le 1000)$，表示网格的列数。\n\n接下来 $m$ 行，每行 $n$ 个整数，表示当前格子中的值 $num(1 \\le num \\le 10^6)$。", "outputFormat": "如果可以从房间逃脱，则输出 `yes`。否则输出 `no`。", "hint": "#### 【样例解释】\n从 $(1,1)$ 开始，其包含的值为 $3$，从这里可以跳到单元格 $(1,3)$。\n\n这个单元格包含 $8$，因此从这里可以跳到单元格 $(2,4)$。\n\n这个单元格包含 $12$，因此从这里可以跳到单元格 $(3,4)$。\n#### 【数据范围】\n**本题采用捆绑测试**。\n\n由于原题 Subtask 分值，本题满分 105 分。\n| Subtask | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $m=n=2$ | 7 |\n| 2 | $m=1$ | 14 |\n| 3 | 所有单元格中的整数是唯一的 | 28 |\n| 4 | $1\\le m,n \\le200$ | 28 |\n| 5 | 无 | 28 |", "locale": "zh-CN"}}}
{"pid": "P11581", "type": "P", "difficulty": 2, "samples": [["3\n0 100\n20 50\n10 120", "7.0"], ["5\n20 -5\n0 -17\n10 31\n5 -3\n30 11", "6.8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "Special Judge", "CCC（加拿大）"], "title": "[CCC 2020] Surmising a Sprinter's Speed", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCSrProblemSet.html) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/seniorEF.pdf) T1 Surmising a Sprinter's Speed。", "description": "Trick E. Dingo 正在捕捉 Street Sprinter，他正在收集数据，进一步了解 Street Sprinter 的速度。\n\nTrick E. Dingo 正在一条笔直的东西向的道路上抓捕 Street Sprinter，这条路上有一块特别著名的石头，亲切地被称为“原点”。这条路上的位置是根据与原点的距离用数字来测量的：原点以西的位置使用负数表示，以东的位置使用正数表示。\n\nTrick E. Dingo 的观察记录每次包含两个数字：一个时间和在该时间 Street Sprinter 在路上的位置值。根据这些信息，Street Sprinter 至少能达到了什么速度呢？", "inputFormat": "第一行一个整数 $n(2\\le n \\le 10^5)$，表示观察次数。\n\n接下来 $n$ 行，每行两个整数 $t(0 \\le t \\le 10^9)$ 和 $x(-10^9 \\le x \\le 10^9)$，分别表示当前这次测量的时间与测量到的位置。", "outputFormat": "输出一行一个数字 $X$，表示 Street Sprinter 在某个时刻的速度达到了 $X$ 米每秒，并且其尽可能大。如果正确答案是 $Y$，当认为 $X$ 是正确的时，当且仅当 $\\frac{|X-Y|}{\\max(1,Y)}\\le 10^{-5}$。", "hint": "#### 【样例解释】\n对于第一组样例，为了在 $10$ 秒内从位置 $120$ 移动到位置 $50$，速度必须至少为 $7$。\n#### 【数据范围】\n**本题采用捆绑测试**。\n\n对于 $50\\%$ 的数据，$0 \\le n \\le 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Surmising a Sprinter's Speed", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCSrProblemSet.html) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/seniorEF.pdf) T1 Surmising a Sprinter's Speed。", "description": "Trick E. Dingo 正在捕捉 Street Sprinter，他正在收集数据，进一步了解 Street Sprinter 的速度。\n\nTrick E. Dingo 正在一条笔直的东西向的道路上抓捕 Street Sprinter，这条路上有一块特别著名的石头，亲切地被称为“原点”。这条路上的位置是根据与原点的距离用数字来测量的：原点以西的位置使用负数表示，以东的位置使用正数表示。\n\nTrick E. Dingo 的观察记录每次包含两个数字：一个时间和在该时间 Street Sprinter 在路上的位置值。根据这些信息，Street Sprinter 至少能达到了什么速度呢？", "inputFormat": "第一行一个整数 $n(2\\le n \\le 10^5)$，表示观察次数。\n\n接下来 $n$ 行，每行两个整数 $t(0 \\le t \\le 10^9)$ 和 $x(-10^9 \\le x \\le 10^9)$，分别表示当前这次测量的时间与测量到的位置。", "outputFormat": "输出一行一个数字 $X$，表示 Street Sprinter 在某个时刻的速度达到了 $X$ 米每秒，并且其尽可能大。如果正确答案是 $Y$，当认为 $X$ 是正确的时，当且仅当 $\\frac{|X-Y|}{\\max(1,Y)}\\le 10^{-5}$。", "hint": "#### 【样例解释】\n对于第一组样例，为了在 $10$ 秒内从位置 $120$ 移动到位置 $50$，速度必须至少为 $7$。\n#### 【数据范围】\n**本题采用捆绑测试**。\n\n对于 $50\\%$ 的数据，$0 \\le n \\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P11582", "type": "P", "difficulty": 4, "samples": [["aab\nabacabaa", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCC（加拿大）"], "title": "[CCC 2020] Searching for Strings", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCSrProblemSet.html) T3 Searching for Strings。", "description": "计算字符串 $n$ 的不同排列中，作为 $h$ 的子字符串的数量。", "inputFormat": "第一行一个字符串 $n(1 \\le |n| \\le 2\\times10^5)$。\n\n第二行一个字符串 $h(1 \\le |h| \\le 2\\times10^5)$。\n\n保证这两个串只含小写字母。", "outputFormat": "输出由一个整数构成，即题目所求。", "hint": "**本题采用捆绑测试**。\n#### 【样例解析】\n仅有排列 `aba` 和 `baa` 作为子字符串出现在了 $h$ 中。\n#### 【数据范围】\n设 $n$ 长度为 $x$，$h$ 长度为 $y$。\n| Subtask | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $x\\le 8,y\\le 200$ | 20 |\n| 2 | $x\\le 200,y\\le 200$ | 14 |\n| 3 | $x\\le 2000,y\\le 2000$ | 14 |\n| 4 | 无 | 52 |\n\n注：原题满分为 15 分，其中 Sub1 有 $3$ 分，Sub2 和 Sub3 有 $2$ 分，而 Sub4 有 $8$ 分。本题分数为取近似后得到的结果。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Searching for Strings", "background": "本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCSrProblemSet.html) T3 Searching for Strings。", "description": "计算字符串 $n$ 的不同排列中，作为 $h$ 的子字符串的数量。", "inputFormat": "第一行一个字符串 $n(1 \\le |n| \\le 2\\times10^5)$。\n\n第二行一个字符串 $h(1 \\le |h| \\le 2\\times10^5)$。\n\n保证这两个串只含小写字母。", "outputFormat": "输出由一个整数构成，即题目所求。", "hint": "**本题采用捆绑测试**。\n#### 【样例解析】\n仅有排列 `aba` 和 `baa` 作为子字符串出现在了 $h$ 中。\n#### 【数据范围】\n设 $n$ 长度为 $x$，$h$ 长度为 $y$。\n| Subtask | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $x\\le 8,y\\le 200$ | 20 |\n| 2 | $x\\le 200,y\\le 200$ | 14 |\n| 3 | $x\\le 2000,y\\le 2000$ | 14 |\n| 4 | 无 | 52 |\n\n注：原题满分为 15 分，其中 Sub1 有 $3$ 分，Sub2 和 Sub3 有 $2$ 分，而 Sub4 有 $8$ 分。本题分数为取近似后得到的结果。", "locale": "zh-CN"}}}
{"pid": "P11583", "type": "P", "difficulty": 5, "samples": [["12\n1 1\n1 1\n1 2\n1 2\n1 2\n1 3\n2 1\n1 6\n2 2\n1 6\n2 6\n2 1", "2\n2\n1\n2"], ["10\n1 1\n1 1\n2 1\n1 2\n1 2\n1 3\n2 1\n1 3\n1 4\n2 1", "1\n2\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "KOI（韩国）"], "title": "[KTSC 2022 R1] 进化", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<bits/stdc++.h>\nvoid init();\nint analyze(int R);\nvoid observation(int P);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T1「 [진화\t](https://assets.ioikorea.kr/ioitst/2022/1/evolution/evolution_statement.pdf)」\n\n", "description": "你打算进行一项研究——对多种生物的进化过程进行探讨。除了最初的生物体外，所有其他生物体都是通过现有生物体的进化而诞生的。我们将现有的生物体称为父生物体，新诞生的生物体称为子生物体。\n\n生物体通过进化诞生的过程可以用一个树形结构来表示，其中生物体是结点，进化过程是结接父生物体和子生物体的边。最初的生物体是树根。下图展示了一个这样的树形结构，其中 $1$ 号生物体进化出 $2$ 和 $3$ 号生物体，$2$ 号生物体进化出 $4$，$5$ 和 $6$ 号生物体，$3$ 号生物体进化出 $7$ 号生物体，$6$ 号生物体进化出 $8$ 和 $9$ 号生物体。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6yozyc5x.png)\n\n我们将这样的树形结构称为进化树。\n\n对于每个有子生物体的生物体，我们将可能的进化路径分为主要进化和次要进化。\n\n这种分类方法的效率可以通过进化复杂度来衡量。两个生物体 $A$ 和 $B$ 之间的进化复杂度定义为进化树中连接 $A$ 和 $B$ 的路径上经过的次要进化的数量。进化树的进化复杂度是所有生物体对之间进化复杂度的最大值。\n\n进化越复杂，分析两个生物体之间的关联性就越困难。因此，我们需要通过适当的分类方法将进化树的进化复杂度最小化。\n\n研究将持续 $N+Q$ 天。第一天，我们只发现了 $1$ 号生物体。接下来的每一天，我们将进行以下两种研究之一：\n\n- 发现一个新的生物体，该生物体是现有生物体进化而来的。如果现有生物体的数量为 $T$，那么这个新生物体将被命名为 $T+1$ 号生物体。这种研究将进行 $N$ 次。\n- 分析一个生物体及其通过 $0$ 次或多次进化而诞生的所有生物体。我们需要计算以该生物体为根的进化树的最小进化复杂度。每次分析是独立的，不会影响后续的分析。这种研究将进行 $Q$ 次。\n\n你需要实现以下三个函数：\n\n`\nvoid init();\n`\n\n- 该函数在 `observation` 和 `analyze` 函数调用之前只会被调用一次。\n\n`\nvoid observation(int P);\n`\n\n- 该函数表示从编号为 $P$ 的生物体进化出一个新的生物体。当前发现的生物体数量为 $T$，新生物体编号为 $T+1$。\n\n`\nint analyze(int R);\n`\n\n- 该函数表示分析编号为 $R$ 的生物体及其通过 $0$ 次或多次进化而诞生的所有生物体。函数返回以 $R$ 号生物体为根的进化树的最小进化复杂度。\n", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N'$\n\n- 第 $i+1 (1 \\leq i \\leq N')$ 行：如果调用 `observation` 函数，则输入 `1 P`；如果调用 `analyze` 函数，则输入 `2 R`。\n- $N' = N + Q$。", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $i (1 \\leq i \\leq Q)$ 行：第 $i$ 次调用 `analyze` 函数的返回值。", "hint": "### 样例解释 #1\n评测程序将按以下顺序调用函数：\n\n```cpp\ninit();\nobservation(1);\nobservation(1);\nobservation(2);\nobservation(2);\nobservation(2);\nobservation(3);\nanalyze(1); // 返回 2\nobservation(6);\nanalyze(2); // 返回 2\nobservation(6);\nanalyze(6); // 返回 1\nanalyze(1); // 返回 2\n```\n\n下图展示了每次 `analyze` 调用时的进化树及其最佳分类方法之一。主要进化路径用粗线表示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oonlwdro.png)\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 5\\cdot 10^5$\n- $1 \\leq Q \\leq 5\\cdot 10^5$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$7$|$N \\leq 15,Q \\leq 15$|\n|$2$|$11$|$N \\leq 3000,Q \\leq 15$|\n|$3$|$5$|第 $i (2 \\leq i \\leq N+1)$ 号生物体的父生物体是 $\\left\\lfloor\\frac{i}{2}\\right\\rfloor$ 号生物体|\n|$4$|$21$|每个生物体最多有 $2$ 个子生物体|\n|$5$|$15$|$N \\leq 3000,Q \\leq 3000$|\n|$6$|$41$|无附加限制|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2022 R1] 进化", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<bits/stdc++.h>\nvoid init();\nint analyze(int R);\nvoid observation(int P);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T1「 [진화\t](https://assets.ioikorea.kr/ioitst/2022/1/evolution/evolution_statement.pdf)」\n\n", "description": "你打算进行一项研究——对多种生物的进化过程进行探讨。除了最初的生物体外，所有其他生物体都是通过现有生物体的进化而诞生的。我们将现有的生物体称为父生物体，新诞生的生物体称为子生物体。\n\n生物体通过进化诞生的过程可以用一个树形结构来表示，其中生物体是结点，进化过程是结接父生物体和子生物体的边。最初的生物体是树根。下图展示了一个这样的树形结构，其中 $1$ 号生物体进化出 $2$ 和 $3$ 号生物体，$2$ 号生物体进化出 $4$，$5$ 和 $6$ 号生物体，$3$ 号生物体进化出 $7$ 号生物体，$6$ 号生物体进化出 $8$ 和 $9$ 号生物体。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6yozyc5x.png)\n\n我们将这样的树形结构称为进化树。\n\n对于每个有子生物体的生物体，我们将可能的进化路径分为主要进化和次要进化。\n\n这种分类方法的效率可以通过进化复杂度来衡量。两个生物体 $A$ 和 $B$ 之间的进化复杂度定义为进化树中连接 $A$ 和 $B$ 的路径上经过的次要进化的数量。进化树的进化复杂度是所有生物体对之间进化复杂度的最大值。\n\n进化越复杂，分析两个生物体之间的关联性就越困难。因此，我们需要通过适当的分类方法将进化树的进化复杂度最小化。\n\n研究将持续 $N+Q$ 天。第一天，我们只发现了 $1$ 号生物体。接下来的每一天，我们将进行以下两种研究之一：\n\n- 发现一个新的生物体，该生物体是现有生物体进化而来的。如果现有生物体的数量为 $T$，那么这个新生物体将被命名为 $T+1$ 号生物体。这种研究将进行 $N$ 次。\n- 分析一个生物体及其通过 $0$ 次或多次进化而诞生的所有生物体。我们需要计算以该生物体为根的进化树的最小进化复杂度。每次分析是独立的，不会影响后续的分析。这种研究将进行 $Q$ 次。\n\n你需要实现以下三个函数：\n\n`\nvoid init();\n`\n\n- 该函数在 `observation` 和 `analyze` 函数调用之前只会被调用一次。\n\n`\nvoid observation(int P);\n`\n\n- 该函数表示从编号为 $P$ 的生物体进化出一个新的生物体。当前发现的生物体数量为 $T$，新生物体编号为 $T+1$。\n\n`\nint analyze(int R);\n`\n\n- 该函数表示分析编号为 $R$ 的生物体及其通过 $0$ 次或多次进化而诞生的所有生物体。函数返回以 $R$ 号生物体为根的进化树的最小进化复杂度。\n", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N'$\n\n- 第 $i+1 (1 \\leq i \\leq N')$ 行：如果调用 `observation` 函数，则输入 `1 P`；如果调用 `analyze` 函数，则输入 `2 R`。\n- $N' = N + Q$。", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $i (1 \\leq i \\leq Q)$ 行：第 $i$ 次调用 `analyze` 函数的返回值。", "hint": "### 样例解释 #1\n评测程序将按以下顺序调用函数：\n\n```cpp\ninit();\nobservation(1);\nobservation(1);\nobservation(2);\nobservation(2);\nobservation(2);\nobservation(3);\nanalyze(1); // 返回 2\nobservation(6);\nanalyze(2); // 返回 2\nobservation(6);\nanalyze(6); // 返回 1\nanalyze(1); // 返回 2\n```\n\n下图展示了每次 `analyze` 调用时的进化树及其最佳分类方法之一。主要进化路径用粗线表示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oonlwdro.png)\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 5\\cdot 10^5$\n- $1 \\leq Q \\leq 5\\cdot 10^5$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$7$|$N \\leq 15,Q \\leq 15$|\n|$2$|$11$|$N \\leq 3000,Q \\leq 15$|\n|$3$|$5$|第 $i (2 \\leq i \\leq N+1)$ 号生物体的父生物体是 $\\left\\lfloor\\frac{i}{2}\\right\\rfloor$ 号生物体|\n|$4$|$21$|每个生物体最多有 $2$ 个子生物体|\n|$5$|$15$|$N \\leq 3000,Q \\leq 3000$|\n|$6$|$41$|无附加限制|", "locale": "zh-CN"}}}
{"pid": "P11584", "type": "P", "difficulty": 6, "samples": [["2 1 2\n6 1 0 1 1\n-10 1 0 1 1\n", "-4\n"], ["5 4 5\n1 1 0 1 2\n1 2 1 2 2\n1 3 1 3 4\n1 1 3 4 3\n-1 2 1 4 1\n", "4"], ["11 8 11\n1 5 5 5 1\n-3 2 4 10 4\n0 10 1 8 1\n-2 3 3 3 7\n2 2 0 2 4\n7 7 8 10 8\n-1 4 2 1 2\n-1 8 3 8 8\n-1 7 8 10 8\n-2 7 5 7 6\n-1 10 5 8 5\n", "5"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "KOI（韩国）"], "title": "[KTSC 2022 R1] 飞扬的小鸟", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<bits/stdc++.h>\nlong long get_max_score(int W, int H, std::vector<int> A, std::vector<int> X1, std::vector<int> Y1, std::vector<int> X2, std::vector<int> Y2);\n\n\n```", "description": "题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T2「 [플래피 버드\t](https://assets.ioikorea.kr/ioitst/2022/1/flappybird/flappybird_statement.pdf)」\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/th7eapx4.png)\n\n你知道 2014 年曾经流行的游戏「Flappy Bird」吗？这是一款游戏，玩家需要控制一只小鸟在前进的过程中避免撞到管道或飞出屏幕，通过不断上升和下降尽可能地飞得更远。\n\n在这个游戏中出现的小鸟其实是教准养的宠物鸟“安娜”。教准和安娜今天也在二维世界中玩类似于「Flappy Bird」的游戏。安娜在天空中飞行，经过线段时会根据线段的权重获得相应的分数。\n\n这个游戏的规则如下： 在二维平面上有 $N$ 条与 $x$ 轴或 $y$ 轴平行的线段。第 $i (0 \\leq i \\leq N-1)$ 条线段的权重为 $A_{i}$，两个端点的坐标分别为 $\\left(X_{1, i}, Y_{1, i}\\right)$ 和 $\\left(X_{2, i}, Y_{2, i}\\right)$。\n\n安娜从 $x=0$ 直线上的任意点开始向 $+x$ 方向飞行，当到达 $x=W$ 直线时结束飞行。但出于安全考虑，安娜不能飞到 $y=0$ 以下或 $y=H$ 以上。也就是说，安娜只能在 $0 \\leq x \\leq W, 0 \\leq y \\leq H$ 的区域内飞行。\n\n安娜只能平行于 $x$ 轴飞行，因此在飞行过程中不能改变自己的 $y$ 坐标。但她可以在飞行过程中借助教准的帮助，垂直于 $y$ 轴上升或下降一次，改变自己的 $y$ 坐标。在上升或下降过程中，安娜的 $x$ 坐标不变，且只能选择上升或下降其中之一。\n\n安娜的飞行路径与一条或多条线段共享一个或多个点时，这些线段的权重之和就是安娜获得的分数。 例如，假设 $W=5, H=4$，有 $N=7$ 条线段如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ptmtzvos.png)\n\n蓝色实线表示线段，虚线表示安娜的飞行路径。圆圈内的数字是线段编号，有符号的数字是权重。 如果安娜从 $(0,1)$ 开始飞行，在 $(2,1)$ 上升到 $(2,4)$，然后在 $(5,4)$ 结束飞行，她会经过第 $0,1,2,4,6$ 号线段，获得 $(-5)+(-1)+5+3+(-4)=-2$ 分。\n\n但如果安娜从 $(0,3.4)$ 开始飞行，在 $(1.6,3.4)$ 下降到 $(1.6,0.5)$，然后在 $(5,0.5)$ 结束飞行，她会经过第 $0,2,5$ 号线段，获得 $(-5)+5+1=1$ 分。\n\n给定 $N$ 条线段的信息，编写一个程序计算安娜可以获得的最大分数。\n\n你需要实现以下函数：\n\n`long long get_max_score(int W, int H, vector<int> A, vector<int> X1, vector<int> Y1, vector<int> X2, vector<int> Y2);`\n\n- 该函数只会被调用一次。\n- 参数中给定的整数数组 $A, X1, Y1, X2, Y2$ 的大小为 $N$。数组的每个元素 $A_i, X1_i, Y1_i, X2_i, Y2_i (0 \\leq i \\leq N-1)$ 分别表示 $A_{i}, X_{1, i}, Y_{1, i}, X_{2, i}, Y_{2, i}$。\n\n注意，提交的代码中不应包含任何输入输出操作。\n\n\n该函数返回安娜可以获得的最大分数。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$W\\,H\\,N$\n- 第 $2+i (0 \\leq i \\leq N-1)$ 行： $A_{i}\\,X_{1, i}\\,Y_{1, i}\\,X_{2, i}\\,Y_{2, i}$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `get_max_score` 返回的值。", "hint": "### 样例解释 #1\n考虑 $W=2, H=1, N=2, A=[6,-10], X_{1}=[1,1], Y_{1}=[0,0], X_{2}=[1,1], Y_{2}=[1,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`get_max_score(2,1,[6,-10],[1,1],[0,0],[1,1],[1,1])=-4`\n\n下图显示了 N 条线段和安娜可以获得最大分数的路径。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uymxt2s4.png)\n\n安娜从 $(0,1)$ 开始飞行，不进行上升或下降，在 $(2,1)$ 结束飞行，经过第 $0$ 和 $1$ 号线段，获得总分 $6+(-10)=-4$。\n\n这个例子满足子任务 $1,2,3,4,5,7$ 的条件。\n### 样例解释 #2\n考虑 $W=5, H=4, N=5, A=[1,1,1,1,-1], X_{1}=[1,2,3,1,2], Y_{1}=[0,1,1,3,1], X_{2}=[1,2,3,4,4], Y_{2}=[2,2,4,3,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`get_max_score(5, 4, [1, 1, 1, 1, -1],[1,2,3,1,2],[0,1,1,3,1],[1,2,3,4,4],[2,2,4,3,1])=4`\n\n这个样例满足子任务 $1,2,3,4,7$ 的条件。\n\n### 样例解释 #3\n考虑 $W=11, H=8, N=11, A=[1,-3,0,-2,2,7,-1,-1,-1,-2,-1], X_{1}=[5,2,10,3,2,7,4,8,7,7,10], Y_{1}=[5,4,1,3,0,8,2,3,8,5,5], X_{2}=[5,10,8,3,2,10,1,8,10,7,8], Y_{2}=[1,4,1,7,4,8,2,8,8,6,5]$ 的情况。\n\n评测程序将调用如下函数：\n\n`get_max_score(11, 8, [1, -3, 0, -2, 2, 7, -1, -1, -1, -2, -1], [5, 2, 10, 3, 2, 7, 4, 8, 7, 7, 10], [5, 4, 1, 3, 0, 8, 2, 3, 8, 5, 5], [5, 10, 8, 3, 2, 10, 1, 8, 10, 7, 8], [1, 4, 1, 7, 4, 8, 2, 8, 8, 6, 5]) = 5`\n\n这个例子满足子任务 $1,2,3,4,7$ 的条件。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- 输入中给定的所有数都是整数。\n- $2 \\leq W \\leq 10^5$\n- $1 \\leq H \\leq 10^5$\n- $1 \\leq N \\leq 2.5\\cdot 10^5$\n- $1 \\leq X_{i, j} \\leq W-1 (i \\in\\{1,2\\}, 0 \\leq j \\leq N-1)$\n- $0 \\leq Y_{i, j} \\leq H (i \\in\\{1,2\\}, 0 \\leq j \\leq N-1)$\n- $-10^9 \\leq A_{i} \\leq 10^9 (0 \\leq i \\leq N-1)$\n- 对于每个 $0 \\leq i \\leq N-1$，$X_{1, i}=X_{2, i}$ 或 $Y_{1, i}=Y_{2, i}$\n- 所有线段的长度都是正数。即，对于每个 $0 \\leq i \\leq N-1$，$\\left(X_{1, i}, Y_{1, i}\\right) \\neq \\left(X_{2, i}, Y_{2, i}\\right)$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$7$|$W \\leq 50,H \\leq 50,N \\leq 50$|\n|$2$|$8$|$W \\leq 50,H \\leq 50$|\n|$3$|$10$|$N \\leq 500$|\n|$4$|$14$|$N \\leq 8000$|\n|$5$|$15$|$X_{1, i}=X_{2, i} (0 \\leq i \\leq N-1)$|\n|$6$|$10$|$Y_{1, i}=Y_{2, i} (0 \\leq i \\leq N-1)$|\n|$7$|$36$|无附加限制|\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2022 R1] 飞扬的小鸟", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<bits/stdc++.h>\nlong long get_max_score(int W, int H, std::vector<int> A, std::vector<int> X1, std::vector<int> Y1, std::vector<int> X2, std::vector<int> Y2);\n\n\n```", "description": "题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T2「 [플래피 버드\t](https://assets.ioikorea.kr/ioitst/2022/1/flappybird/flappybird_statement.pdf)」\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/th7eapx4.png)\n\n你知道 2014 年曾经流行的游戏「Flappy Bird」吗？这是一款游戏，玩家需要控制一只小鸟在前进的过程中避免撞到管道或飞出屏幕，通过不断上升和下降尽可能地飞得更远。\n\n在这个游戏中出现的小鸟其实是教准养的宠物鸟“安娜”。教准和安娜今天也在二维世界中玩类似于「Flappy Bird」的游戏。安娜在天空中飞行，经过线段时会根据线段的权重获得相应的分数。\n\n这个游戏的规则如下： 在二维平面上有 $N$ 条与 $x$ 轴或 $y$ 轴平行的线段。第 $i (0 \\leq i \\leq N-1)$ 条线段的权重为 $A_{i}$，两个端点的坐标分别为 $\\left(X_{1, i}, Y_{1, i}\\right)$ 和 $\\left(X_{2, i}, Y_{2, i}\\right)$。\n\n安娜从 $x=0$ 直线上的任意点开始向 $+x$ 方向飞行，当到达 $x=W$ 直线时结束飞行。但出于安全考虑，安娜不能飞到 $y=0$ 以下或 $y=H$ 以上。也就是说，安娜只能在 $0 \\leq x \\leq W, 0 \\leq y \\leq H$ 的区域内飞行。\n\n安娜只能平行于 $x$ 轴飞行，因此在飞行过程中不能改变自己的 $y$ 坐标。但她可以在飞行过程中借助教准的帮助，垂直于 $y$ 轴上升或下降一次，改变自己的 $y$ 坐标。在上升或下降过程中，安娜的 $x$ 坐标不变，且只能选择上升或下降其中之一。\n\n安娜的飞行路径与一条或多条线段共享一个或多个点时，这些线段的权重之和就是安娜获得的分数。 例如，假设 $W=5, H=4$，有 $N=7$ 条线段如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ptmtzvos.png)\n\n蓝色实线表示线段，虚线表示安娜的飞行路径。圆圈内的数字是线段编号，有符号的数字是权重。 如果安娜从 $(0,1)$ 开始飞行，在 $(2,1)$ 上升到 $(2,4)$，然后在 $(5,4)$ 结束飞行，她会经过第 $0,1,2,4,6$ 号线段，获得 $(-5)+(-1)+5+3+(-4)=-2$ 分。\n\n但如果安娜从 $(0,3.4)$ 开始飞行，在 $(1.6,3.4)$ 下降到 $(1.6,0.5)$，然后在 $(5,0.5)$ 结束飞行，她会经过第 $0,2,5$ 号线段，获得 $(-5)+5+1=1$ 分。\n\n给定 $N$ 条线段的信息，编写一个程序计算安娜可以获得的最大分数。\n\n你需要实现以下函数：\n\n`long long get_max_score(int W, int H, vector<int> A, vector<int> X1, vector<int> Y1, vector<int> X2, vector<int> Y2);`\n\n- 该函数只会被调用一次。\n- 参数中给定的整数数组 $A, X1, Y1, X2, Y2$ 的大小为 $N$。数组的每个元素 $A_i, X1_i, Y1_i, X2_i, Y2_i (0 \\leq i \\leq N-1)$ 分别表示 $A_{i}, X_{1, i}, Y_{1, i}, X_{2, i}, Y_{2, i}$。\n\n注意，提交的代码中不应包含任何输入输出操作。\n\n\n该函数返回安娜可以获得的最大分数。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$W\\,H\\,N$\n- 第 $2+i (0 \\leq i \\leq N-1)$ 行： $A_{i}\\,X_{1, i}\\,Y_{1, i}\\,X_{2, i}\\,Y_{2, i}$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `get_max_score` 返回的值。", "hint": "### 样例解释 #1\n考虑 $W=2, H=1, N=2, A=[6,-10], X_{1}=[1,1], Y_{1}=[0,0], X_{2}=[1,1], Y_{2}=[1,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`get_max_score(2,1,[6,-10],[1,1],[0,0],[1,1],[1,1])=-4`\n\n下图显示了 N 条线段和安娜可以获得最大分数的路径。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uymxt2s4.png)\n\n安娜从 $(0,1)$ 开始飞行，不进行上升或下降，在 $(2,1)$ 结束飞行，经过第 $0$ 和 $1$ 号线段，获得总分 $6+(-10)=-4$。\n\n这个例子满足子任务 $1,2,3,4,5,7$ 的条件。\n### 样例解释 #2\n考虑 $W=5, H=4, N=5, A=[1,1,1,1,-1], X_{1}=[1,2,3,1,2], Y_{1}=[0,1,1,3,1], X_{2}=[1,2,3,4,4], Y_{2}=[2,2,4,3,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`get_max_score(5, 4, [1, 1, 1, 1, -1],[1,2,3,1,2],[0,1,1,3,1],[1,2,3,4,4],[2,2,4,3,1])=4`\n\n这个样例满足子任务 $1,2,3,4,7$ 的条件。\n\n### 样例解释 #3\n考虑 $W=11, H=8, N=11, A=[1,-3,0,-2,2,7,-1,-1,-1,-2,-1], X_{1}=[5,2,10,3,2,7,4,8,7,7,10], Y_{1}=[5,4,1,3,0,8,2,3,8,5,5], X_{2}=[5,10,8,3,2,10,1,8,10,7,8], Y_{2}=[1,4,1,7,4,8,2,8,8,6,5]$ 的情况。\n\n评测程序将调用如下函数：\n\n`get_max_score(11, 8, [1, -3, 0, -2, 2, 7, -1, -1, -1, -2, -1], [5, 2, 10, 3, 2, 7, 4, 8, 7, 7, 10], [5, 4, 1, 3, 0, 8, 2, 3, 8, 5, 5], [5, 10, 8, 3, 2, 10, 1, 8, 10, 7, 8], [1, 4, 1, 7, 4, 8, 2, 8, 8, 6, 5]) = 5`\n\n这个例子满足子任务 $1,2,3,4,7$ 的条件。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- 输入中给定的所有数都是整数。\n- $2 \\leq W \\leq 10^5$\n- $1 \\leq H \\leq 10^5$\n- $1 \\leq N \\leq 2.5\\cdot 10^5$\n- $1 \\leq X_{i, j} \\leq W-1 (i \\in\\{1,2\\}, 0 \\leq j \\leq N-1)$\n- $0 \\leq Y_{i, j} \\leq H (i \\in\\{1,2\\}, 0 \\leq j \\leq N-1)$\n- $-10^9 \\leq A_{i} \\leq 10^9 (0 \\leq i \\leq N-1)$\n- 对于每个 $0 \\leq i \\leq N-1$，$X_{1, i}=X_{2, i}$ 或 $Y_{1, i}=Y_{2, i}$\n- 所有线段的长度都是正数。即，对于每个 $0 \\leq i \\leq N-1$，$\\left(X_{1, i}, Y_{1, i}\\right) \\neq \\left(X_{2, i}, Y_{2, i}\\right)$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$7$|$W \\leq 50,H \\leq 50,N \\leq 50$|\n|$2$|$8$|$W \\leq 50,H \\leq 50$|\n|$3$|$10$|$N \\leq 500$|\n|$4$|$14$|$N \\leq 8000$|\n|$5$|$15$|$X_{1, i}=X_{2, i} (0 \\leq i \\leq N-1)$|\n|$6$|$10$|$Y_{1, i}=Y_{2, i} (0 \\leq i \\leq N-1)$|\n|$7$|$36$|无附加限制|\n", "locale": "zh-CN"}}}
{"pid": "P11585", "type": "P", "difficulty": 7, "samples": [["7\n3 2 1 2 1 4 3\n", "7\n11\n13\n"], ["7\n1 2 3 4 5 6 7\n", "16\n21\n24\n"], ["5\n1 3 4 3 1\n", "9\n11\n12\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "凸包", "笛卡尔树", "李超线段树", "单调栈", "KOI（韩国）"], "title": "[KTSC 2022 R1] 直方图", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\nstd::vector<long long> max_area(std::vector<int> H);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T3「 [히스토그램](https://assets.ioikorea.kr/ioitst/2022/1/histogram/histogram_statement.pdf)」\n\n", "description": "有一个由 $N$ 个底边平行于地面的矩形连续排列而成的直方图。每个矩形的宽度都是 $1$，并且从左到右第 $i (1 \\leq i \\leq N)$ 个矩形的高度为整数 $H_{i}$。\n\n下图展示了一个可能的直方图示例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hoexztgq.png)\n\n在这个直方图中，我们希望找到不超过 $K$ 个矩形，这些矩形的底边平行于地面，且除了顶点和边之外的区域不重叠，并且每个边的长度都是整数，使得这些矩形的面积之和最大。这个值记为 $f(K)$。 请编写一个程序来计算 $f(1), f(2), f(3)$。\n\n你需要实现以下函数：\n\n`vector<long long> max_area(vector<int> H);`\n\n- 该函数只会被调用一次。\n- 参数中给定的整数数组 $\\texttt{H}$ 的大小为 $N$。数组的每个元素 $\\texttt{H[i]} (0 \\leq i \\leq N-1)$ 表示从左到右第 $i+1$ 个矩形的高度 $H_{i+1}$。\n- 该函数返回一个大小为 $1 \\sim 3$ 的数组 $\\texttt{A}$。$\\texttt{A[i]} (0 \\leq i<|\\texttt{A}|)$ 中应存储 $f(i+1)$ 的值。请注意，数组 $\\texttt{A}$ 的大小会影响评分标准。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$H_{1}\\,H_{2}\\,\\cdots H_{N}$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1+i (0 \\leq i<|\\texttt{A}|)$ 行：`max_area` 函数返回的数组 $\\texttt{A}$ 中 $\\texttt{A}[i]$ 的值。", "hint": "### 评分标准\n假设 `max_area` 函数返回的数组为 $\\texttt{A}$。\n\n如果 $\\texttt{A}$ 的大小不是 $1$ 到 $3$ 之间，则得 $0$ 分。\n\n根据子任务的标准，如果 $f(1), \\cdots, f(|\\texttt{A}|)$ 中有任何一个值不正确，则得 $0$ 分。\n\n如果 $f(1), \\cdots, f(|\\texttt{A}|)$ 的值都正确，则根据子任务的评分标准得分。\n\n在上述标准中，$f(i)$ 正确意味着 $\\texttt{A}$ 的大小至少为 $i$ 并且 $\\texttt{A}[i-1]$ 的值等于 $f(i)$。\n\n每个子任务的分数是子任务所有数据的最小分数。\n\n### 样例解释 #1\n考虑 $N=7, H=[3,2,1,2,1,4,3]$ 的情况。\n\n评测程序将调用如下函数：\n\n`max_area([3,2,1,2,1,4,3])=[7,11,13]`\n\n下图展示了对于 $K=1,2,3$ 时面积之和最大的情况之一。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2t8kpz59.png)\n\n如果 `max_area` 函数返回 $[7, 11]$，则 $f(1)$ 和 $f(2)$ 都正确，可以根据子任务的评分标准得分。如果 `max_area` 函数返回 $[7, 12, 13]$，则尽管 $f(1)$ 和 $f(3)$ 正确，但 $f(2)$ 错误，因此得 $0$ 分。如果 `max_area` 函数返回 $[7, 11, 14]$，则尽管 $f(1)$ 和 $f(2)$ 正确，但 $f(3)$ 错误，因此得 $0$ 分。\n\n这个样例满足子任务 $2,3,4,5$ 的条件。\n\n### 样例解释 #2\n考虑 $N=7, H=[1,2,3,4,5,6,7]$ 的情况。\n\n评测程序将调用如下函数：\n\n`max_area([1,2,3,4,5,6,7])=[16,21,24]`\n\n这个样例满足所有子任务的条件。\n\n### 样例解释 #3\n考虑 $N=5, H=[1,3,4,3,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`max_area([1,3,4,3,1])=[9,11,12]`\n\n这个样例满足子任务 $2,3,4,5$ 的条件。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 5\\cdot 10^5$\n- $1 \\leq H_{i} \\leq 5\\cdot 10^5 (1 \\leq i \\leq N)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|分值|约束|\n| :----------: | :----------: | :----------: |\n|$1$|$10$|$H_{i} \\leq H_{i+1} (1 \\leq i \\leq N-1)$|\n|$2$|$3$|$N \\leq 500$|\n|$3$|$15$|$N \\leq 5000$|\n|$4$|$27$|$N \\leq 2\\cdot 10^5$|\n|$5$|$45$|无附加限制|\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2022 R1] 直方图", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\nstd::vector<long long> max_area(std::vector<int> H);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T3「 [히스토그램](https://assets.ioikorea.kr/ioitst/2022/1/histogram/histogram_statement.pdf)」\n\n", "description": "有一个由 $N$ 个底边平行于地面的矩形连续排列而成的直方图。每个矩形的宽度都是 $1$，并且从左到右第 $i (1 \\leq i \\leq N)$ 个矩形的高度为整数 $H_{i}$。\n\n下图展示了一个可能的直方图示例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hoexztgq.png)\n\n在这个直方图中，我们希望找到不超过 $K$ 个矩形，这些矩形的底边平行于地面，且除了顶点和边之外的区域不重叠，并且每个边的长度都是整数，使得这些矩形的面积之和最大。这个值记为 $f(K)$。 请编写一个程序来计算 $f(1), f(2), f(3)$。\n\n你需要实现以下函数：\n\n`vector<long long> max_area(vector<int> H);`\n\n- 该函数只会被调用一次。\n- 参数中给定的整数数组 $\\texttt{H}$ 的大小为 $N$。数组的每个元素 $\\texttt{H[i]} (0 \\leq i \\leq N-1)$ 表示从左到右第 $i+1$ 个矩形的高度 $H_{i+1}$。\n- 该函数返回一个大小为 $1 \\sim 3$ 的数组 $\\texttt{A}$。$\\texttt{A[i]} (0 \\leq i<|\\texttt{A}|)$ 中应存储 $f(i+1)$ 的值。请注意，数组 $\\texttt{A}$ 的大小会影响评分标准。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$H_{1}\\,H_{2}\\,\\cdots H_{N}$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1+i (0 \\leq i<|\\texttt{A}|)$ 行：`max_area` 函数返回的数组 $\\texttt{A}$ 中 $\\texttt{A}[i]$ 的值。", "hint": "### 评分标准\n假设 `max_area` 函数返回的数组为 $\\texttt{A}$。\n\n如果 $\\texttt{A}$ 的大小不是 $1$ 到 $3$ 之间，则得 $0$ 分。\n\n根据子任务的标准，如果 $f(1), \\cdots, f(|\\texttt{A}|)$ 中有任何一个值不正确，则得 $0$ 分。\n\n如果 $f(1), \\cdots, f(|\\texttt{A}|)$ 的值都正确，则根据子任务的评分标准得分。\n\n在上述标准中，$f(i)$ 正确意味着 $\\texttt{A}$ 的大小至少为 $i$ 并且 $\\texttt{A}[i-1]$ 的值等于 $f(i)$。\n\n每个子任务的分数是子任务所有数据的最小分数。\n\n### 样例解释 #1\n考虑 $N=7, H=[3,2,1,2,1,4,3]$ 的情况。\n\n评测程序将调用如下函数：\n\n`max_area([3,2,1,2,1,4,3])=[7,11,13]`\n\n下图展示了对于 $K=1,2,3$ 时面积之和最大的情况之一。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2t8kpz59.png)\n\n如果 `max_area` 函数返回 $[7, 11]$，则 $f(1)$ 和 $f(2)$ 都正确，可以根据子任务的评分标准得分。如果 `max_area` 函数返回 $[7, 12, 13]$，则尽管 $f(1)$ 和 $f(3)$ 正确，但 $f(2)$ 错误，因此得 $0$ 分。如果 `max_area` 函数返回 $[7, 11, 14]$，则尽管 $f(1)$ 和 $f(2)$ 正确，但 $f(3)$ 错误，因此得 $0$ 分。\n\n这个样例满足子任务 $2,3,4,5$ 的条件。\n\n### 样例解释 #2\n考虑 $N=7, H=[1,2,3,4,5,6,7]$ 的情况。\n\n评测程序将调用如下函数：\n\n`max_area([1,2,3,4,5,6,7])=[16,21,24]`\n\n这个样例满足所有子任务的条件。\n\n### 样例解释 #3\n考虑 $N=5, H=[1,3,4,3,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n`max_area([1,3,4,3,1])=[9,11,12]`\n\n这个样例满足子任务 $2,3,4,5$ 的条件。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 5\\cdot 10^5$\n- $1 \\leq H_{i} \\leq 5\\cdot 10^5 (1 \\leq i \\leq N)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|分值|约束|\n| :----------: | :----------: | :----------: |\n|$1$|$10$|$H_{i} \\leq H_{i+1} (1 \\leq i \\leq N-1)$|\n|$2$|$3$|$N \\leq 500$|\n|$3$|$15$|$N \\leq 5000$|\n|$4$|$27$|$N \\leq 2\\cdot 10^5$|\n|$5$|$45$|无附加限制|\n", "locale": "zh-CN"}}}
{"pid": "P11586", "type": "P", "difficulty": 5, "samples": [["3\n0 8 3\n2 5 4\n5 5 6\n5 4\n", "18\n"], ["3\n0 4 6\n3 2 5\n5 6 3\n1 5\n", "37\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "KOI（韩国）"], "title": "[KTSC 2022 R1] 松鼠", "background": "\n  \n**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nlong long fly(std::vector<int> D, std::vector<int> H, std::vector<int> W, int L, int R);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T4「 [날다람쥐\t](https://assets.ioikorea.kr/ioitst/2022/1/squirrel/squirrel_statement.pdf)」\n\n", "description": "在二维平面上，有 $N$ 根柱子按顺序排列。柱子从左到右编号为 $1$ 到 $N$。第 $i (1 \\leq i \\leq N)$ 根柱子的底部位于点 $(D_{i}, 0)$，高度为 $H_{i}$。因此，这根柱子是连接点 $(D_{i}, 0)$ 和 $(D_{i}, H_{i})$ 的线段。此外，$D_{1}=0$。\n\n一开始，松鼠位于最左边柱子的高度为 $L$ 的位置，即点 $(0, L)$。松鼠需要依次经过所有柱子，最终到达最右边柱子的高度为 $R$ 的位置，即点 $(D_{N}, R)$。\n\n当松鼠从一根柱子飞到下一根柱子时，如果向右移动 $d (d \\geq 0)$，高度会下降 $d$。在到达下一根柱子之前，松鼠不能碰到地面。到达下一根柱子的高度为 $0$ 的位置是允许的。\n\n松鼠可以在一根柱子上向上爬或向下滑，但不能爬到超过柱子高度的位置。在第 $i$ 根柱子上向上爬 $h (h \\geq 0)$ 需要花费 $W_{i} \\times h$ 的费用。向下滑动不需要费用。\n\n下图是飞天松鼠移动的一个例子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5hw5cti6.png)\n\n下图左侧的移动方式由于中途碰到地面，因此不允许。下图右侧的移动方式由于没有经过所有柱子，也不允许。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1o2oh8sz.png)\n\n请计算松鼠以最小总费用到达目标位置的方法。\n\n你需要实现以下函数：\n\n`long long fly(vector<int> D, vector<int> H, vector<int> W, int L, int R);`\n- 该函数只会被调用一次。\n- 给定的三个数组的大小为柱子的数量 $N$。\n- 给定的整数数组 $D$ 中，$D[i]$ 表示第 $1$ 根柱子到第 $i+1$ 根柱子的距离 $D_{i+1}$。\n- 给定的整数数组 $H$ 中，$H[i]$ 表示第 $i+1$ 根柱子的高度 $H_{i+1}$。\n- 给定的整数数组 $W$ 中，$W[i]$ 表示第 $i+1$ 根柱子上每上升 $1$ 单位距离的费用 $W_{i+1}$。\n- 给定的整数 $L$ 表示飞天松鼠在第 $1$ 根柱子上的初始高度。\n- 给定的整数 $R$ 表示飞天松鼠在第 $N$ 根柱子上需要到达的高度。\n\n该函数的返回值应为：\n- 如果有方法遵守规则到达最终位置，返回飞天松鼠到达最终位置的最小费用。可以证明，满足约束条件的输入数据的最小费用总是整数。\n- 如果没有方法遵守规则到达最终位置，返回 `-1`。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $1+i (1 \\leq i \\leq N)$ 行：$D_{i}\\,H_{i}\\,W_{i}$\n- 第 $2+N$ 行：$L\\,R$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n第 $1$ 行：函数 `fly` 返回的值。", "hint": "### 样例解释 #1\n考虑 $N=3$，第 $1$ 根柱子到第 $2$ 根柱子的距离为 $2$，第 $1$ 根柱子到第 $3$ 根柱子的距离为 $5$，柱子的高度从左到右分别为 $8,5,5$，柱子的权重从左到右分别为 $3,4,6$，$L=5, R=4$ 的情况。\n\n评测程序将调用如下函数：\n\n`fly([0,2,5],[8,5,5],[3,4,6], 5,4)=18`\n\n在这种情况下，从第 $1$ 根柱子上升 $2$ 个单位距离，然后在第 $3$ 根柱子上升 $2$ 个单位距离是最优的，因此函数应返回 $18$。\n\n这个例子满足子任务 $3,4,5,6$ 的条件。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 5\\cdot 10^5$\n- $0=D_{1}<D_{2}<\\cdots<D_{N} \\leq 10^{9}$\n- $1 \\leq H_{i} \\leq 10^{9}(1 \\leq i \\leq N)$\n- $0 \\leq W_{i} \\leq 10^{9}(1 \\leq i \\leq N)$\n- $0 \\leq L \\leq H_{1}$\n- $0 \\leq R \\leq H_{N}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$4$|$W_{i}=0 (1 \\leq i \\leq N)$|\n|$2$|$13$|$W_{i}=1 (1 \\leq i \\leq N)$|\n|$3$|$18$|$W_{i} \\leq W_{i+1} (1 \\leq i \\leq N-1)$|\n|$4$|$15$|$N \\leq 500,H_{i} \\leq 500 (1 \\leq i \\leq N)$|\n|$5$|$18$|$N \\leq 5000$|\n|$6$|$32$|无附加限制|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2022 R1] 松鼠", "background": "\n  \n**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nlong long fly(std::vector<int> D, std::vector<int> H, std::vector<int> W, int L, int R);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T4「 [날다람쥐\t](https://assets.ioikorea.kr/ioitst/2022/1/squirrel/squirrel_statement.pdf)」\n\n", "description": "在二维平面上，有 $N$ 根柱子按顺序排列。柱子从左到右编号为 $1$ 到 $N$。第 $i (1 \\leq i \\leq N)$ 根柱子的底部位于点 $(D_{i}, 0)$，高度为 $H_{i}$。因此，这根柱子是连接点 $(D_{i}, 0)$ 和 $(D_{i}, H_{i})$ 的线段。此外，$D_{1}=0$。\n\n一开始，松鼠位于最左边柱子的高度为 $L$ 的位置，即点 $(0, L)$。松鼠需要依次经过所有柱子，最终到达最右边柱子的高度为 $R$ 的位置，即点 $(D_{N}, R)$。\n\n当松鼠从一根柱子飞到下一根柱子时，如果向右移动 $d (d \\geq 0)$，高度会下降 $d$。在到达下一根柱子之前，松鼠不能碰到地面。到达下一根柱子的高度为 $0$ 的位置是允许的。\n\n松鼠可以在一根柱子上向上爬或向下滑，但不能爬到超过柱子高度的位置。在第 $i$ 根柱子上向上爬 $h (h \\geq 0)$ 需要花费 $W_{i} \\times h$ 的费用。向下滑动不需要费用。\n\n下图是飞天松鼠移动的一个例子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5hw5cti6.png)\n\n下图左侧的移动方式由于中途碰到地面，因此不允许。下图右侧的移动方式由于没有经过所有柱子，也不允许。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1o2oh8sz.png)\n\n请计算松鼠以最小总费用到达目标位置的方法。\n\n你需要实现以下函数：\n\n`long long fly(vector<int> D, vector<int> H, vector<int> W, int L, int R);`\n- 该函数只会被调用一次。\n- 给定的三个数组的大小为柱子的数量 $N$。\n- 给定的整数数组 $D$ 中，$D[i]$ 表示第 $1$ 根柱子到第 $i+1$ 根柱子的距离 $D_{i+1}$。\n- 给定的整数数组 $H$ 中，$H[i]$ 表示第 $i+1$ 根柱子的高度 $H_{i+1}$。\n- 给定的整数数组 $W$ 中，$W[i]$ 表示第 $i+1$ 根柱子上每上升 $1$ 单位距离的费用 $W_{i+1}$。\n- 给定的整数 $L$ 表示飞天松鼠在第 $1$ 根柱子上的初始高度。\n- 给定的整数 $R$ 表示飞天松鼠在第 $N$ 根柱子上需要到达的高度。\n\n该函数的返回值应为：\n- 如果有方法遵守规则到达最终位置，返回飞天松鼠到达最终位置的最小费用。可以证明，满足约束条件的输入数据的最小费用总是整数。\n- 如果没有方法遵守规则到达最终位置，返回 `-1`。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $1+i (1 \\leq i \\leq N)$ 行：$D_{i}\\,H_{i}\\,W_{i}$\n- 第 $2+N$ 行：$L\\,R$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n第 $1$ 行：函数 `fly` 返回的值。", "hint": "### 样例解释 #1\n考虑 $N=3$，第 $1$ 根柱子到第 $2$ 根柱子的距离为 $2$，第 $1$ 根柱子到第 $3$ 根柱子的距离为 $5$，柱子的高度从左到右分别为 $8,5,5$，柱子的权重从左到右分别为 $3,4,6$，$L=5, R=4$ 的情况。\n\n评测程序将调用如下函数：\n\n`fly([0,2,5],[8,5,5],[3,4,6], 5,4)=18`\n\n在这种情况下，从第 $1$ 根柱子上升 $2$ 个单位距离，然后在第 $3$ 根柱子上升 $2$ 个单位距离是最优的，因此函数应返回 $18$。\n\n这个例子满足子任务 $3,4,5,6$ 的条件。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 5\\cdot 10^5$\n- $0=D_{1}<D_{2}<\\cdots<D_{N} \\leq 10^{9}$\n- $1 \\leq H_{i} \\leq 10^{9}(1 \\leq i \\leq N)$\n- $0 \\leq W_{i} \\leq 10^{9}(1 \\leq i \\leq N)$\n- $0 \\leq L \\leq H_{1}$\n- $0 \\leq R \\leq H_{N}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$4$|$W_{i}=0 (1 \\leq i \\leq N)$|\n|$2$|$13$|$W_{i}=1 (1 \\leq i \\leq N)$|\n|$3$|$18$|$W_{i} \\leq W_{i+1} (1 \\leq i \\leq N-1)$|\n|$4$|$15$|$N \\leq 500,H_{i} \\leq 500 (1 \\leq i \\leq N)$|\n|$5$|$18$|$N \\leq 5000$|\n|$6$|$32$|无附加限制|", "locale": "zh-CN"}}}
{"pid": "P11587", "type": "P", "difficulty": 7, "samples": [["4 2\n2 3 1 1\n1 3 2\n0 3\n1 2\n", "3\n5\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "KOI（韩国）"], "title": "[KTSC 2022 R2] 编程测试", "background": "\n  \n**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nstd::vector<int> testset(std::vector<int> A, std::vector<int> B, std::vector<int> L, std::vector<int> U);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T1「 [코딩 테스트\t](https://assets.ioikorea.kr/ioitst/2022/2/codingtest/codingtest_statement.pdf)」\n\n注：原题时间限制为 2.5s，但是洛谷评测机不给力，因此放宽至 3s。\n", "description": "公司最近因为编程测试的流行，开始出一些编程测试题目并出售给 IT 公司。\n\n为了方便，公司将题目的难度分为 $0$ 到 $N-1$ 个等级。目前，公司有 $A_i$ 个难度为 $i$ 级的题目，还有 $B_i$ 个难度不确定是 $i$ 级还是 $i+1$ 级的题目。除此之外，没有其他难度的题目。\n\n公司正在寻找愿意购买题目的企业。目前有 $M$ 家企业表示有购买意向，编号从 $0$ 到 $M-1$。第 $j (0 \\leq j \\leq M-1)$ 家企业只对难度在 $L_j$ 级到 $U_j$ 级之间的题目感兴趣。\n\n公司计划将难度在 $L_j$ 级到 $U_j$ 级之间的题目按难度各选一个，组成一套题出售给第 $j$ 家企业，我们称之为一场比赛。如果只向第 $j$ 家企业出售题目，最多可以出售多少场比赛？对于难度不确定是 $i$ 级还是 $i+1$ 级的题目，需要适当分配难度，使得出售的比赛数量最多，并且每场比赛中的题目不能重复使用。\n\n你需要实现以下函数：\n\n`vector<int> testset(vector<int> A, vector<int> B, vector<int> L, vector<int> U);`\n\n- 该函数只会被调用一次。\n- `A`：长度为 $N$ 的整数数组。对于每个 $i (0 \\leq i \\leq N-1)$，$A_i$ 是难度为 $i$ 级的题目数量。\n- `B`：长度为 $N-1$ 的整数数组。对于每个 $i (0 \\leq i \\leq N-2)$，$B_i$ 是难度不确定是 $i$ 级还是 $i+1$ 级的题目数量。\n- `L, U`：长度为 $M$ 的整数数组。对于每个 $j (0 \\leq j \\leq M-1)$，$L_j$, $U_j$ 分别是第 $j$ 家企业感兴趣的题目的最小难度和最大难度。\n- 该函数返回一个长度为 $M$ 的整数数组 $S$。对于每个 $j (0 \\leq j \\leq M-1)$，$S_j$ 是可以出售给第 $j$ 家企业的比赛的最大数量。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,M$\n- 第 $2$ 行：$A[0]\\,A[1]\\,\\cdots\\,A[N-1]$\n- 第 $3$ 行：$B[0]\\,B[1]\\,\\cdots\\,B[N-2]$\n- 第 $4+j (0 \\leq j \\leq M-1)$ 行：$L[j]\\,U[j]$", "outputFormat": "示例评测程序的输出格式如下：\n\n- 第 $1+j (0 \\leq j \\leq M-1)$ 行：$S[j]$", "hint": "### 样例解释 #1\n考虑 $N=4, M=2, A=[2,3,1,1], B=[1,3,2], L=[0,1], U=[3,2]$ 的情况。\n\n评测程序将调用如下函数：\n\n`testset({2,3,1,1},{1,3,2},{0,1},{3,2});`\n\n第 $0$ 家企业需要难度在 $0$ 级到 $3$ 级之间的题目。可以通过以下方式组成 $3$ 场比赛，剩下一个难度为 $1$ 级的题目，无法再组成更多场比赛。\n\n|  | $0$ 级 | $1$ 级 | $2$ 级 | $3$ 级 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n|比赛 $1$|$0$|$1$|$2$|$3$|\n|比赛 $2$|$0$|$1$|$1-\\mathbf{2}$|$2-\\mathbf{3}$|\n|比赛 $3$|$\\mathbf{0 - 1}$|$\\mathbf{1 - 2}$|$1-\\mathbf{2}$|$2-\\mathbf{3}$|\n\n第 $1$ 家企业需要难度在 $1$ 级到 $2$ 级之间的题目。可以通过以下方式组成 $5$ 场比赛，使用了所有可能的题目，无法再组成更多的比赛。\n\n|  | $1$ 级 | $2$ 级 |\n| :----------: | :----------: | :----------: |\n|比赛 $1$|$1$|$2$|\n|比赛 $2$|$1$|$1-\\mathbf{2}$|\n|比赛 $3$|$1$|$1 \\mathbf{- 2}$|\n|比赛 $4$|$0-\\mathbf{1}$|$\\mathbf{2 - 3}$\n|比赛 $5$|$\\mathbf{1 - 2}$|$\\mathbf{2 - 3}$|\n\n因此，调用的 `testset` 函数应返回 $S=[3,5]$。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 10^5$\n- $1 \\leq M \\leq 10^5$\n- 对于所有 $i (0 \\leq i \\leq N-1)$，$0 \\leq A[i] \\leq 10^{8}$\n- 对于所有 $i (0 \\leq i \\leq N-2)$，$0 \\leq B[i] \\leq 10^{8}$\n- 对于所有 $i (0 \\leq j \\leq M-1)$，$0 \\leq L[i] \\leq U[i] \\leq N-1$\n\n详细子任务附加限制及分值如下表所示。\n\n| Subtask | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$3$|$A[i] \\leq 1000 (0 \\leq i \\leq N-1),B[i] \\leq 1000 (0 \\leq i \\leq N-2),U[j]-L[j] \\leq 2 (0 \\leq j \\leq M-1)$|\n|$2$|$15$|$M \\leq 100$|\n|$3$|$36$|$N \\leq 5000$|\n|$4$|$23$|对于所有 $j (0 \\leq j \\leq M-1)$，$L[j]=0$|\n|$5$|$23$|无附加限制|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2022 R2] 编程测试", "background": "\n  \n**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include <vector>\n\nstd::vector<int> testset(std::vector<int> A, std::vector<int> B, std::vector<int> L, std::vector<int> U);\n```\n\n题目译自 [2022년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2022/) T1「 [코딩 테스트\t](https://assets.ioikorea.kr/ioitst/2022/2/codingtest/codingtest_statement.pdf)」\n\n注：原题时间限制为 2.5s，但是洛谷评测机不给力，因此放宽至 3s。\n", "description": "公司最近因为编程测试的流行，开始出一些编程测试题目并出售给 IT 公司。\n\n为了方便，公司将题目的难度分为 $0$ 到 $N-1$ 个等级。目前，公司有 $A_i$ 个难度为 $i$ 级的题目，还有 $B_i$ 个难度不确定是 $i$ 级还是 $i+1$ 级的题目。除此之外，没有其他难度的题目。\n\n公司正在寻找愿意购买题目的企业。目前有 $M$ 家企业表示有购买意向，编号从 $0$ 到 $M-1$。第 $j (0 \\leq j \\leq M-1)$ 家企业只对难度在 $L_j$ 级到 $U_j$ 级之间的题目感兴趣。\n\n公司计划将难度在 $L_j$ 级到 $U_j$ 级之间的题目按难度各选一个，组成一套题出售给第 $j$ 家企业，我们称之为一场比赛。如果只向第 $j$ 家企业出售题目，最多可以出售多少场比赛？对于难度不确定是 $i$ 级还是 $i+1$ 级的题目，需要适当分配难度，使得出售的比赛数量最多，并且每场比赛中的题目不能重复使用。\n\n你需要实现以下函数：\n\n`vector<int> testset(vector<int> A, vector<int> B, vector<int> L, vector<int> U);`\n\n- 该函数只会被调用一次。\n- `A`：长度为 $N$ 的整数数组。对于每个 $i (0 \\leq i \\leq N-1)$，$A_i$ 是难度为 $i$ 级的题目数量。\n- `B`：长度为 $N-1$ 的整数数组。对于每个 $i (0 \\leq i \\leq N-2)$，$B_i$ 是难度不确定是 $i$ 级还是 $i+1$ 级的题目数量。\n- `L, U`：长度为 $M$ 的整数数组。对于每个 $j (0 \\leq j \\leq M-1)$，$L_j$, $U_j$ 分别是第 $j$ 家企业感兴趣的题目的最小难度和最大难度。\n- 该函数返回一个长度为 $M$ 的整数数组 $S$。对于每个 $j (0 \\leq j \\leq M-1)$，$S_j$ 是可以出售给第 $j$ 家企业的比赛的最大数量。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,M$\n- 第 $2$ 行：$A[0]\\,A[1]\\,\\cdots\\,A[N-1]$\n- 第 $3$ 行：$B[0]\\,B[1]\\,\\cdots\\,B[N-2]$\n- 第 $4+j (0 \\leq j \\leq M-1)$ 行：$L[j]\\,U[j]$", "outputFormat": "示例评测程序的输出格式如下：\n\n- 第 $1+j (0 \\leq j \\leq M-1)$ 行：$S[j]$", "hint": "### 样例解释 #1\n考虑 $N=4, M=2, A=[2,3,1,1], B=[1,3,2], L=[0,1], U=[3,2]$ 的情况。\n\n评测程序将调用如下函数：\n\n`testset({2,3,1,1},{1,3,2},{0,1},{3,2});`\n\n第 $0$ 家企业需要难度在 $0$ 级到 $3$ 级之间的题目。可以通过以下方式组成 $3$ 场比赛，剩下一个难度为 $1$ 级的题目，无法再组成更多场比赛。\n\n|  | $0$ 级 | $1$ 级 | $2$ 级 | $3$ 级 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n|比赛 $1$|$0$|$1$|$2$|$3$|\n|比赛 $2$|$0$|$1$|$1-\\mathbf{2}$|$2-\\mathbf{3}$|\n|比赛 $3$|$\\mathbf{0 - 1}$|$\\mathbf{1 - 2}$|$1-\\mathbf{2}$|$2-\\mathbf{3}$|\n\n第 $1$ 家企业需要难度在 $1$ 级到 $2$ 级之间的题目。可以通过以下方式组成 $5$ 场比赛，使用了所有可能的题目，无法再组成更多的比赛。\n\n|  | $1$ 级 | $2$ 级 |\n| :----------: | :----------: | :----------: |\n|比赛 $1$|$1$|$2$|\n|比赛 $2$|$1$|$1-\\mathbf{2}$|\n|比赛 $3$|$1$|$1 \\mathbf{- 2}$|\n|比赛 $4$|$0-\\mathbf{1}$|$\\mathbf{2 - 3}$\n|比赛 $5$|$\\mathbf{1 - 2}$|$\\mathbf{2 - 3}$|\n\n因此，调用的 `testset` 函数应返回 $S=[3,5]$。\n\n### 数据范围\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 10^5$\n- $1 \\leq M \\leq 10^5$\n- 对于所有 $i (0 \\leq i \\leq N-1)$，$0 \\leq A[i] \\leq 10^{8}$\n- 对于所有 $i (0 \\leq i \\leq N-2)$，$0 \\leq B[i] \\leq 10^{8}$\n- 对于所有 $i (0 \\leq j \\leq M-1)$，$0 \\leq L[i] \\leq U[i] \\leq N-1$\n\n详细子任务附加限制及分值如下表所示。\n\n| Subtask | 分值 | 约束 |\n| :----------: | :----------: | :----------: |\n|$1$|$3$|$A[i] \\leq 1000 (0 \\leq i \\leq N-1),B[i] \\leq 1000 (0 \\leq i \\leq N-2),U[j]-L[j] \\leq 2 (0 \\leq j \\leq M-1)$|\n|$2$|$15$|$M \\leq 100$|\n|$3$|$36$|$N \\leq 5000$|\n|$4$|$23$|对于所有 $j (0 \\leq j \\leq M-1)$，$L[j]=0$|\n|$5$|$23$|无附加限制|", "locale": "zh-CN"}}}
