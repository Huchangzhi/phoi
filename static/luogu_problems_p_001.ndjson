{"pid": "P1251", "type": "P", "difficulty": 6, "samples": [["3\n1 7 5 \n11 2 2 3 1\n", "134\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "网络流", "O2优化", "费用流", "网络流与线性规划 24 题"], "title": "餐巾计划问题", "background": "", "description": "一个餐厅在相继的 $N$ 天里，每天需用的餐巾数不尽相同。假设第 $i$ 天需要 $r_i$ 块餐巾（$i = 1, 2, \\dots, N$）。餐厅可以购买新的餐巾，每块餐巾的费用为 $p$ 分；或者把旧餐巾送到快洗部，洗一块需 $m$ 天，其费用为 $f$ 分；或者送到慢洗部，洗一块需 $n$ 天（$n \\gt m$），其费用为 $s$ 分（$s \\lt f$）。\n\n每天结束时，餐厅必须决定将多少块脏的餐巾送到快洗部，多少块餐巾送到慢洗部，以及多少块保存起来延期送洗。但是每天洗好的餐巾和购买的新餐巾数之和，要满足当天的需求量。\n\n试设计一个算法为餐厅合理地安排好 $N$ 天中餐巾使用计划，使总的花费最小。编程找出一个最佳餐巾使用计划。\n", "inputFormat": "由标准输入提供输入数据。文件第 $1$ 行有 $1$ 个正整数 $N$，代表要安排餐巾使用计划的天数。\n\n接下来的一行是餐厅在相继的 $N$ 天里，每天需用的餐巾数。\n\n最后一行包含 $5$ 个正整数 $p, m, f, n, s$。$p$ 是每块新餐巾的费用；$m$ 是快洗部洗一块餐巾需用天数；$f$ 是快洗部洗一块餐巾需要的费用；$n$ 是慢洗部洗一块餐巾需用天数；$s$ 是慢洗部洗一块餐巾需要的费用。\n", "outputFormat": "将餐厅在相继的 $N$ 天里使用餐巾的最小总花费输出。\n", "hint": "对于 $100 \\%$ 的数据，$1 \\le N \\le 2 \\times 10^3$，$1 \\le r_i \\le 10^7$，$1 \\le p, f, s \\le 10^4$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Napkin Planning Problem", "background": "", "description": "A restaurant needs different numbers of napkins on $N$ consecutive days. Suppose on day $i$ it needs $r_i$ napkins ($i = 1, 2, \\dots, N$). The restaurant can buy new napkins at a cost of $p$ cents per napkin; or send used napkins to a fast laundry, which takes $m$ days and costs $f$ cents per napkin; or send them to a slow laundry, which takes $n$ days ($n \\gt m$) and costs $s$ cents per napkin ($s \\lt f$).\n\nAt the end of each day, the restaurant must decide how many dirty napkins to send to the fast laundry, how many to send to the slow laundry, and how many to store for later laundering. On each day, the total number of napkins returned from laundries that day plus newly purchased napkins must meet that day’s demand.\n\nDesign an algorithm to plan napkin usage over $N$ days so that the total cost is minimized. Write a program to find an optimal napkin usage plan.", "inputFormat": "Input is given via standard input. The first line contains one positive integer $N$, the number of days to plan.\n\nThe next line contains the restaurant’s napkin demand for each of the $N$ consecutive days.\n\nThe last line contains $5$ positive integers $p, m, f, n, s$. Here, $p$ is the cost per new napkin; $m$ is the number of days the fast laundry takes per napkin; $f$ is the cost per napkin at the fast laundry; $n$ is the number of days the slow laundry takes per napkin; $s$ is the cost per napkin at the slow laundry.", "outputFormat": "Output the minimum total cost of napkin usage over the $N$ consecutive days.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\le N \\le 2 \\times 10^3$, $1 \\le r_i \\le 10^7$, $1 \\le p, f, s \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "餐巾计划问题", "background": "", "description": "一个餐厅在相继的 $N$ 天里，每天需用的餐巾数不尽相同。假设第 $i$ 天需要 $r_i$ 块餐巾（$i = 1, 2, \\dots, N$）。餐厅可以购买新的餐巾，每块餐巾的费用为 $p$ 分；或者把旧餐巾送到快洗部，洗一块需 $m$ 天，其费用为 $f$ 分；或者送到慢洗部，洗一块需 $n$ 天（$n \\gt m$），其费用为 $s$ 分（$s \\lt f$）。\n\n每天结束时，餐厅必须决定将多少块脏的餐巾送到快洗部，多少块餐巾送到慢洗部，以及多少块保存起来延期送洗。但是每天洗好的餐巾和购买的新餐巾数之和，要满足当天的需求量。\n\n试设计一个算法为餐厅合理地安排好 $N$ 天中餐巾使用计划，使总的花费最小。编程找出一个最佳餐巾使用计划。\n", "inputFormat": "由标准输入提供输入数据。文件第 $1$ 行有 $1$ 个正整数 $N$，代表要安排餐巾使用计划的天数。\n\n接下来的一行是餐厅在相继的 $N$ 天里，每天需用的餐巾数。\n\n最后一行包含 $5$ 个正整数 $p, m, f, n, s$。$p$ 是每块新餐巾的费用；$m$ 是快洗部洗一块餐巾需用天数；$f$ 是快洗部洗一块餐巾需要的费用；$n$ 是慢洗部洗一块餐巾需用天数；$s$ 是慢洗部洗一块餐巾需要的费用。\n", "outputFormat": "将餐厅在相继的 $N$ 天里使用餐巾的最小总花费输出。\n", "hint": "对于 $100 \\%$ 的数据，$1 \\le N \\le 2 \\times 10^3$，$1 \\le r_i \\le 10^7$，$1 \\le p, f, s \\le 10^4$。\n", "locale": "zh-CN"}}}
{"pid": "P1252", "type": "P", "difficulty": 2, "samples": [["333 700 1200 1710 2240 2770 3345 3956 4778 5899 \n300 610 960 1370 1800 2712 3734 4834 5998 7682\n298 612 990 1540 2109 2896 3790 4747 5996 7654\n289 577 890 1381 1976 2734 3876 5378 6890 9876\n312 633 995 1407 1845 2634 3636 4812 5999 8123", "9905\n6 5 5 4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "Special Judge", "枚举"], "title": "马拉松接力赛", "background": "", "description": "某城市冬季举办环城 $25\\rm km$ 马拉松接力赛，每个代表队有 $5$ 人参加比赛，比赛要求每个的每名参赛选手只能跑一次，一次至少跑 $1\\rm km$ 、最多只能跑 $10\\rm km$，而且每个选手所跑的公里数必须为整数，即接力的地方在整公里处。\n\n刘老师作为学校代表队的教练，精心选择了 $5$ 名长跑能手，进行了训练和测试，得到了这 $5$ 名选手尽力连续跑 $1\\rm km$、$2\\rm km$、…、$10\\rm km$ 的所用时间。现在他要进行一个合理的安排，让每个选手跑合适的公里数，使学校代表队跑完 $25\\rm km$ 所用的时间最短。根据队员的情况，这个最短的时间是惟一的，但安排方案可能并不惟一。\n\n根据测试情况及一般运动员的情况得知，连续跑 $1\\rm km$ 要比连续跑 $2\\rm km$ 速度快，连续跑 $2\\rm km$ 又要比连续跑 $3\\rm km$ 速度快……也就是说连续跑的路程越长，速度越慢，当然也有特殊的，就是速度不会变慢，但是绝不可能变快。", "inputFormat": "$5$ 行数据，分别是 $1$ 到 $5$ 号队员的测试数据，每行的 $10$ 个整数，表示某一个运动员尽力连续跑 $1\\rm km$ 、 $2\\rm km$、…、$10\\rm km$ 所用的时间。时间为一个不超过 $10^7$ 的正整数。", "outputFormat": "两行，第一行是最短的时间，第二行是五个数据，分别是 $1$ 到 $5$ 号队员各自连续跑的公里数。\n", "hint": "@Jomoo 提供了修正后的数据", "locale": "zh-CN", "translations": {"en": {"title": "Marathon Relay", "background": "", "description": "A city holds a winter around-the-city $25\\rm km$ marathon relay. Each team has $5$ participants. Each participant runs exactly once, with each leg being at least $1\\rm km$ and at most $10\\rm km$, and the distance each runner covers must be an integer, i.e., handoffs occur at whole-kilometer marks.\n\nCoach Liu, as the coach of the school team, carefully selected $5$ endurance runners and conducted training and tests to obtain the time each of the $5$ runners needs to run continuously for $1\\rm km$, $2\\rm km$, …, $10\\rm km$. He now needs to make a reasonable arrangement so that each runner runs a suitable number of kilometers, minimizing the total time to finish $25\\rm km$. Given the athletes’ abilities, this minimal time is unique, but the arrangement plan may not be unique.\n\nBased on the test results and typical athletes’ performance, running $1\\rm km$ continuously is faster than running $2\\rm km$, running $2\\rm km$ is faster than running $3\\rm km$, and so on. In other words, the longer the continuous distance, the slower the speed. There can be special cases where the speed does not slow down, but it can never get faster.", "inputFormat": "$5$ lines of data, corresponding to the test data of athletes $1$ to $5$. Each line contains $10$ integers, representing the time it takes that athlete to run continuously for $1\\rm km$, $2\\rm km$, …, $10\\rm km$. Each time is a positive integer not exceeding $10^7$.", "outputFormat": "Two lines. The first line is the minimal total time. The second line contains five integers, which are the consecutive kilometers covered by athletes $1$ to $5$.", "hint": "@Jomoo provided the corrected testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "马拉松接力赛", "background": "", "description": "某城市冬季举办环城 $25\\rm km$ 马拉松接力赛，每个代表队有 $5$ 人参加比赛，比赛要求每个的每名参赛选手只能跑一次，一次至少跑 $1\\rm km$ 、最多只能跑 $10\\rm km$，而且每个选手所跑的公里数必须为整数，即接力的地方在整公里处。\n\n刘老师作为学校代表队的教练，精心选择了 $5$ 名长跑能手，进行了训练和测试，得到了这 $5$ 名选手尽力连续跑 $1\\rm km$、$2\\rm km$、…、$10\\rm km$ 的所用时间。现在他要进行一个合理的安排，让每个选手跑合适的公里数，使学校代表队跑完 $25\\rm km$ 所用的时间最短。根据队员的情况，这个最短的时间是惟一的，但安排方案可能并不惟一。\n\n根据测试情况及一般运动员的情况得知，连续跑 $1\\rm km$ 要比连续跑 $2\\rm km$ 速度快，连续跑 $2\\rm km$ 又要比连续跑 $3\\rm km$ 速度快……也就是说连续跑的路程越长，速度越慢，当然也有特殊的，就是速度不会变慢，但是绝不可能变快。", "inputFormat": "$5$ 行数据，分别是 $1$ 到 $5$ 号队员的测试数据，每行的 $10$ 个整数，表示某一个运动员尽力连续跑 $1\\rm km$ 、 $2\\rm km$、…、$10\\rm km$ 所用的时间。时间为一个不超过 $10^7$ 的正整数。", "outputFormat": "两行，第一行是最短的时间，第二行是五个数据，分别是 $1$ 到 $5$ 号队员各自连续跑的公里数。\n", "hint": "@Jomoo 提供了修正后的数据", "locale": "zh-CN"}}}
{"pid": "P1253", "type": "P", "difficulty": 4, "samples": [["6 6\n1 1 4 5 1 4\n1 1 2 6\n2 3 4 2\n3 1 4\n3 2 3\n1 1 6 -1\n3 1 6\n", "7\n6\n-1"], ["4 4\n10 4 -3 -7\n1 1 3 0\n2 3 4 -4\n1 2 4 -9\n3 1 4", "0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "线段树", "O2优化"], "title": "扶苏的问题", "background": "", "description": "给定一个长度为 $n$ 的序列 $a$，要求支持如下三个操作：\n\n1. 给定区间 $[l, r]$，将区间内每个数都修改为 $x$。\n2. 给定区间 $[l, r]$，将区间内每个数都加上 $x$。\n3. 给定区间 $[l, r]$，求区间内的最大值。", "inputFormat": "第一行是两个整数，依次表示序列的长度 $n$ 和操作的个数 $q$。  \n第二行有 $n$ 个整数，第 $i$ 个整数表示序列中的第 $i$ 个数 $a_i$。  \n接下来 $q$ 行，每行表示一个操作。每行首先有一个整数 $op$，表示操作的类型。\n- 若 $op = 1$，则接下来有三个整数 $l, r, x$，表示将区间 $[l, r]$ 内的每个数都修改为 $x$。\n- 若 $op = 2$，则接下来有三个整数 $l, r, x$，表示将区间 $[l, r]$ 内的每个数都加上 $x$。\n- 若 $op = 3$，则接下来有两个整数 $l, r$，表示查询区间 $[l, r]$ 内的最大值。", "outputFormat": "对于每个 $op = 3$ 的操作，输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，$n = q = 1$。\n- 对于 $40\\%$ 的数据，$n, q \\leq 10^3$。\n- 对于 $50\\%$ 的数据，$0 \\leq a_i, x \\leq 10^4$。\n- 对于 $60\\%$ 的数据，$op \\neq 1$。\n- 对于 $90\\%$ 的数据，$n, q \\leq 10^5$。\n- 对于 $100\\%$ 的数据，$1 \\leq n, q \\leq 10^6$，$1 \\leq l, r \\leq n$，$op \\in \\{1, 2, 3\\}$，$|a_i|, |x| \\leq 10^9$。\n\n### 提示\n\n请注意大量数据读入对程序效率造成的影响。", "locale": "zh-CN", "translations": {"en": {"title": "Fusu's Problem", "background": "", "description": "Given a sequence $a$ of length $n$, support the following three operations:\n\n1. Given a range $[l, r]$, set every number in the range to $x$.\n2. Given a range $[l, r]$, add $x$ to every number in the range.\n3. Given a range $[l, r]$, query the maximum value in the range.", "inputFormat": "The first line contains two integers, the length of the sequence $n$ and the number of operations $q$.  \nThe second line contains $n$ integers, where the $i$-th integer is the $i$-th number $a_i$ in the sequence.  \nThen follow $q$ lines, each representing an operation. Each line starts with an integer $op$ indicating the type of operation.\n- If $op = 1$, then there are three integers $l, r, x$, meaning set every number in the range $[l, r]$ to $x$.\n- If $op = 2$, then there are three integers $l, r, x$, meaning add $x$ to every number in the range $[l, r]$.\n- If $op = 3$, then there are two integers $l, r$, meaning query the maximum value in the range $[l, r]$.", "outputFormat": "For each operation with $op = 3$, output one line with a single integer representing the answer.", "hint": "Constraints\n\n- For $10\\%$ of the testdata, $n = q = 1$.\n- For $40\\%$ of the testdata, $n, q \\leq 10^3$.\n- For $50\\%$ of the testdata, $0 \\leq a_i, x \\leq 10^4$.\n- For $60\\%$ of the testdata, $op \\neq 1$.\n- For $90\\%$ of the testdata, $n, q \\leq 10^5$.\n- For $100\\%$ of the testdata, $1 \\leq n, q \\leq 10^6$, $1 \\leq l, r \\leq n$, $op \\in \\{1, 2, 3\\}$, $|a_i|, |x| \\leq 10^9$.\n\nPlease note the impact of large input on program efficiency.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "扶苏的问题", "background": "", "description": "给定一个长度为 $n$ 的序列 $a$，要求支持如下三个操作：\n\n1. 给定区间 $[l, r]$，将区间内每个数都修改为 $x$。\n2. 给定区间 $[l, r]$，将区间内每个数都加上 $x$。\n3. 给定区间 $[l, r]$，求区间内的最大值。", "inputFormat": "第一行是两个整数，依次表示序列的长度 $n$ 和操作的个数 $q$。  \n第二行有 $n$ 个整数，第 $i$ 个整数表示序列中的第 $i$ 个数 $a_i$。  \n接下来 $q$ 行，每行表示一个操作。每行首先有一个整数 $op$，表示操作的类型。\n- 若 $op = 1$，则接下来有三个整数 $l, r, x$，表示将区间 $[l, r]$ 内的每个数都修改为 $x$。\n- 若 $op = 2$，则接下来有三个整数 $l, r, x$，表示将区间 $[l, r]$ 内的每个数都加上 $x$。\n- 若 $op = 3$，则接下来有两个整数 $l, r$，表示查询区间 $[l, r]$ 内的最大值。", "outputFormat": "对于每个 $op = 3$ 的操作，输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，$n = q = 1$。\n- 对于 $40\\%$ 的数据，$n, q \\leq 10^3$。\n- 对于 $50\\%$ 的数据，$0 \\leq a_i, x \\leq 10^4$。\n- 对于 $60\\%$ 的数据，$op \\neq 1$。\n- 对于 $90\\%$ 的数据，$n, q \\leq 10^5$。\n- 对于 $100\\%$ 的数据，$1 \\leq n, q \\leq 10^6$，$1 \\leq l, r \\leq n$，$op \\in \\{1, 2, 3\\}$，$|a_i|, |x| \\leq 10^9$。\n\n### 提示\n\n请注意大量数据读入对程序效率造成的影响。", "locale": "zh-CN"}}}
{"pid": "P1254", "type": "P", "difficulty": 5, "samples": [["1", "1\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "贪心"], "title": "扇区填数", "background": null, "description": "有一个圆，当输入一个整数\n $n\\ (1≤n≤8)$ 后，它被分成 $n$ 个扇区，请你为每一扇区选择一个正整数。\n\n向各个扇区放入数之后，你可以从单个扇区中选出—个数，也可以从相邻的两个或多个扇区中各选一个数，相加后形成一个新的数，请使用这些整数形成一个连续的整数序列：$1,2,3,\\cdots,i$，你的任务是使 $i$ 尽可能地大。", "inputFormat": "共一行一个整数 $n\\ (1\\le n \\le 8)$。", "outputFormat": "第一行是最大的 $i$，接下来的几行是所有能达到最大 $i$ 的填法。\n\n由于圆里不分顺序，所以同一种填法可以有多种输出。为了减少这种情况，这里规定从 $1$ 开始输出（因为连续数里要有 $1$，所以所填的数中肯定有 $1$）。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Sector Filling", "background": "", "description": "There is a circle. After an integer $n\\ (1≤n≤8)$ is given, it is divided into $n$ sectors. Please choose a positive integer for each sector.\n\nAfter placing the numbers, you may pick a single number from one sector, or pick one number from each of two or more adjacent sectors; summing them produces a new number. Use the integers obtained in this way to form a consecutive integer sequence: $1,2,3,\\cdots,i$, and make $i$ as large as possible.", "inputFormat": "One line containing an integer $n\\ (1\\le n \\le 8)$.", "outputFormat": "The first line contains the maximum $i$. The following lines list all fillings that achieve this maximum $i$.\n\nBecause a circle has no inherent order, the same filling may correspond to multiple outputs. To reduce this, it is required to list the numbers starting from $1$ (since the consecutive sequence must contain $1$, the filled numbers must include $1$).", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "扇区填数", "background": null, "description": "有一个圆，当输入一个整数\n $n\\ (1≤n≤8)$ 后，它被分成 $n$ 个扇区，请你为每一扇区选择一个正整数。\n\n向各个扇区放入数之后，你可以从单个扇区中选出—个数，也可以从相邻的两个或多个扇区中各选一个数，相加后形成一个新的数，请使用这些整数形成一个连续的整数序列：$1,2,3,\\cdots,i$，你的任务是使 $i$ 尽可能地大。", "inputFormat": "共一行一个整数 $n\\ (1\\le n \\le 8)$。", "outputFormat": "第一行是最大的 $i$，接下来的几行是所有能达到最大 $i$ 的填法。\n\n由于圆里不分顺序，所以同一种填法可以有多种输出。为了减少这种情况，这里规定从 $1$ 开始输出（因为连续数里要有 $1$，所以所填的数中肯定有 $1$）。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1255", "type": "P", "difficulty": 2, "samples": [["4", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["高精度", "递推", "Fibonacci 数列"], "title": "数楼梯", "background": "", "description": "楼梯有 $N$ 阶，上楼可以一步上一阶，也可以一步上二阶。\n\n编一个程序，计算共有多少种不同的走法。", "inputFormat": "一个数字，楼梯数。\n", "outputFormat": "输出走的方式总数。\n", "hint": "- 对于 $60\\%$ 的数据，$N \\leq 50$；   \n- 对于 $100\\%$ 的数据，$1 \\le N \\leq 5000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Counting Stairs", "background": "", "description": "A staircase has $N$ steps. You can climb either 1 step or 2 steps at a time. Write a program to compute the number of distinct ways to reach the top.", "inputFormat": "A single integer $N$, the number of steps.", "outputFormat": "Output the total number of ways.", "hint": "- For $60\\%$ of the testdata, $N \\leq 50$.\n- For $100\\%$ of the testdata, $1 \\le N \\leq 5000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数楼梯", "background": "", "description": "楼梯有 $N$ 阶，上楼可以一步上一阶，也可以一步上二阶。\n\n编一个程序，计算共有多少种不同的走法。", "inputFormat": "一个数字，楼梯数。\n", "outputFormat": "输出走的方式总数。\n", "hint": "- 对于 $60\\%$ 的数据，$N \\leq 50$；   \n- 对于 $100\\%$ 的数据，$1 \\le N \\leq 5000$。\n", "locale": "zh-CN"}}}
{"pid": "P1256", "type": "P", "difficulty": 3, "samples": [["3 4\n0001\n0011\n0110\n", "3 2 1 0\n2 1 0 0\n1 0 0 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "广度优先搜索 BFS"], "title": "显示图像", "background": "", "description": "古老的显示屏是由 $N \\times M$ 个像素（Pixel）点组成的。一个像素点的位置是根据所在行数和列数决定的。例如 $P(2,1)$ 表示第 $2$ 行第 $1$ 列的像素点。那时候，屏幕只能显示黑与白两种颜色，人们用二进制 $0$ 和 $1$ 来表示。$0$ 表示黑色，$1$ 表示白色。当计算机发出一个指令：$P(x,y)=1$，则屏幕上的第 $x$ 行第 $y$ 列的阴极射线管就开始工作，使该像素点显示白色，若 $P(x,y)=0$，则对应位置的阴极射线管不工作，像素点保持黑色。在某一单位时刻，计算机以 $N \\times M$ 二维 $01$ 矩阵的方式发出显示整个屏幕图像的命令。\n\n例如，屏幕是由 $3 \\times 4$ 的像素点组成，在某单位时刻，计算机发出如下命令：\n\n$$\\begin{pmatrix}\n0 & 0 & 0 & 1 \\\\\n0 & 0 & 1 & 1 \\\\\n0 & 1 & 1 & 0 \\\\\n\\end{pmatrix}$$\n\n对应屏幕显示应为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cwg2di9s.png)\n\n假设放大后，一个格子表示一个像素点。\n\n由于未知的原因，显示黑色的像素点总是受显示白色的像素点的影响——可能是阴极射线管工作的作用。并且，距离越近，影响越大。这里的距离定义如下：\n\n设有像素点 $P_1(x_1,y_1)$ 和像素点 $P_2(x_2,y_2)$，则它们之间的距离 $D(P_1,P_2)=|x_1-x_2|+|y_1-y_2|$。\n\n在某一时刻，计算机发出显示命令后，科学家们期望知道，每个像素点和其最近的显示白色的像素点之间的最短距离是多少——科学家们保证屏幕上至少有一个显示白色的像素点。\n\n上面的例子中，像素 $P(1,1)$ 与最近的白色像素点之间的距离为 $3$，而像素 $P(3,2)$ 本身显示白色，所以最短距离为 $0$。\n", "inputFormat": "第一行有两个数字，$N$ 和 $M\\ (1 \\le N,M \\le 182)$，表示屏幕的规格。\n\n以下 $N$ 行，每行 $M$ 个数字，$0$ 或 $1$。为计算机发出的显示命令。", "outputFormat": "输出文件有 $N$ 行，每行 $M$ 个数字，中间用 $1$ 个空格分开。第 $i$ 行第 $j$ 列的数字表示距像素点 $P(i,j)$ 最近的白色像素点的最短距离。", "hint": "- 对于 $30\\%$ 的数据：$N\\times M \\le 10000$；\n- 对于 $100\\%$ 的数据：$N,M \\le 182$。", "locale": "zh-CN", "translations": {"en": {"title": "Displaying the Image", "background": "", "description": "An old display screen consists of $N \\times M$ pixels. The position of a pixel is determined by its row and column. For example, $P(2,1)$ denotes the pixel at row $2$, column $1$. At that time, the screen could only show two colors, black and white, represented by binary $0$ and $1$. $0$ denotes black and $1$ denotes white. When the computer issues an instruction $P(x,y)=1$, the cathode ray tube at row $x$, column $y$ on the screen starts working, making that pixel display white; if $P(x,y)=0$, then the corresponding cathode ray tube does not work, and the pixel remains black. At a certain moment, the computer issues a command for the entire screen in the form of an $N \\times M$ two-dimensional $01$ matrix.\n\nFor example, the screen consists of $3 \\times 4$ pixels. At some moment, the computer issues the following command:\n\n$$\\begin{pmatrix}\n0 & 0 & 0 & 1 \\\\\n0 & 0 & 1 & 1 \\\\\n0 & 1 & 1 & 0 \\\\\n\\end{pmatrix}$$\n\nThe corresponding screen display should be:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cwg2di9s.png)\n\nAssume that after magnification, one cell represents one pixel.\n\nFor unknown reasons, black pixels are always affected by white pixels—possibly due to the operation of the cathode ray tube. Moreover, the closer the distance, the greater the influence. The distance is defined as follows:\n\nGiven pixel $P_1(x_1,y_1)$ and pixel $P_2(x_2,y_2)$, their distance is $D(P_1,P_2)=|x_1-x_2|+|y_1-y_2|$.\n\nAt a certain moment after the display command is issued, scientists want to know, for each pixel, the shortest distance to its nearest white pixel—scientists guarantee that there is at least one white pixel on the screen.\n\nIn the example above, the distance between pixel $P(1,1)$ and its nearest white pixel is $3$, while pixel $P(3,2)$ itself is white, so the shortest distance is $0$.", "inputFormat": "The first line contains two numbers, $N$ and $M\\ (1 \\le N,M \\le 182)$, indicating the screen size.\n\nThe next $N$ lines each contain $M$ numbers, $0$ or $1$. This is the display command issued by the computer.", "outputFormat": "Output $N$ lines, each containing $M$ numbers separated by a single space. The number in row $i$, column $j$ indicates the shortest distance from pixel $P(i,j)$ to its nearest white pixel.", "hint": "- For $30\\%$ of the testdata: $N\\times M \\le 10000$.\n- For $100\\%$ of the testdata: $N\\times M \\le 182^2$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "显示图像", "background": "", "description": "古老的显示屏是由 $N \\times M$ 个像素（Pixel）点组成的。一个像素点的位置是根据所在行数和列数决定的。例如 $P(2,1)$ 表示第 $2$ 行第 $1$ 列的像素点。那时候，屏幕只能显示黑与白两种颜色，人们用二进制 $0$ 和 $1$ 来表示。$0$ 表示黑色，$1$ 表示白色。当计算机发出一个指令：$P(x,y)=1$，则屏幕上的第 $x$ 行第 $y$ 列的阴极射线管就开始工作，使该像素点显示白色，若 $P(x,y)=0$，则对应位置的阴极射线管不工作，像素点保持黑色。在某一单位时刻，计算机以 $N \\times M$ 二维 $01$ 矩阵的方式发出显示整个屏幕图像的命令。\n\n例如，屏幕是由 $3 \\times 4$ 的像素点组成，在某单位时刻，计算机发出如下命令：\n\n$$\\begin{pmatrix}\n0 & 0 & 0 & 1 \\\\\n0 & 0 & 1 & 1 \\\\\n0 & 1 & 1 & 0 \\\\\n\\end{pmatrix}$$\n\n对应屏幕显示应为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cwg2di9s.png)\n\n假设放大后，一个格子表示一个像素点。\n\n由于未知的原因，显示黑色的像素点总是受显示白色的像素点的影响——可能是阴极射线管工作的作用。并且，距离越近，影响越大。这里的距离定义如下：\n\n设有像素点 $P_1(x_1,y_1)$ 和像素点 $P_2(x_2,y_2)$，则它们之间的距离 $D(P_1,P_2)=|x_1-x_2|+|y_1-y_2|$。\n\n在某一时刻，计算机发出显示命令后，科学家们期望知道，每个像素点和其最近的显示白色的像素点之间的最短距离是多少——科学家们保证屏幕上至少有一个显示白色的像素点。\n\n上面的例子中，像素 $P(1,1)$ 与最近的白色像素点之间的距离为 $3$，而像素 $P(3,2)$ 本身显示白色，所以最短距离为 $0$。\n", "inputFormat": "第一行有两个数字，$N$ 和 $M\\ (1 \\le N,M \\le 182)$，表示屏幕的规格。\n\n以下 $N$ 行，每行 $M$ 个数字，$0$ 或 $1$。为计算机发出的显示命令。", "outputFormat": "输出文件有 $N$ 行，每行 $M$ 个数字，中间用 $1$ 个空格分开。第 $i$ 行第 $j$ 列的数字表示距像素点 $P(i,j)$ 最近的白色像素点的最短距离。", "hint": "- 对于 $30\\%$ 的数据：$N\\times M \\le 10000$；\n- 对于 $100\\%$ 的数据：$N,M \\le 182$。", "locale": "zh-CN"}}}
{"pid": "P1257", "type": "P", "difficulty": 2, "samples": [["3\n1 1\n1 2\n2 2\n", "1.0000\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["计算几何", "O2优化", "枚举"], "title": "平面上的最接近点对", "background": null, "description": "给定平面上 $n$ 个点，找出其中的一对点的距离，使得在这 $n$ 个点的所有点对中，该距离为所有点对中最小的。", "inputFormat": "第一行一个整数 $n$，表示点的个数。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个点的行坐标和列坐标。", "outputFormat": "仅一行，一个实数，表示最短距离，四舍五入保留 $4$ 位小数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $2 \\leq n \\leq 10^4$，$0 \\leq x, y \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Closest Pair of Points in the Plane", "background": "", "description": "Given $n$ points in the plane, find the distance between a pair of points such that among all pairs of these $n$ points, this distance is the smallest.", "inputFormat": "The first line contains an integer $n$, denoting the number of points.\nThe next $n$ lines each contain two integers $x,y$, representing the $x$ and $y$ coordinates of a point.", "outputFormat": "Output a single line containing a real number, which is the shortest distance, rounded to $4$ decimal places.", "hint": "#### Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $2 \\leq n \\leq 10^4$, $0 \\leq x, y \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "平面上的最接近点对", "background": null, "description": "给定平面上 $n$ 个点，找出其中的一对点的距离，使得在这 $n$ 个点的所有点对中，该距离为所有点对中最小的。", "inputFormat": "第一行一个整数 $n$，表示点的个数。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个点的行坐标和列坐标。", "outputFormat": "仅一行，一个实数，表示最短距离，四舍五入保留 $4$ 位小数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $2 \\leq n \\leq 10^4$，$0 \\leq x, y \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1258", "type": "P", "difficulty": 2, "samples": [["120 5 25\n", "9.600000\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "二分"], "title": "小车问题", "background": "", "description": "甲、乙两人同时从 A 地出发要尽快同时赶到 B 地。出发时 A 地有一辆小车，可是这辆小车除了驾驶员外只能带一人。已知甲、乙两人的步行速度一样，且小于车的速度。问：怎样利用小车才能使两人尽快同时到达。", "inputFormat": "仅一行，三个实数，分别表示 AB 两地的距离 $s$，人的步行速度 $a$，车的速度 $b$。", "outputFormat": "两人同时到达 B 地需要的最短时间，保留 $6$ 位小数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $0 \\leq s, a, b \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "The Small Car Problem", "background": "", "description": "Two people, Jia and Yi, start from point A at the same time and want to arrive at point B simultaneously as quickly as possible. At the departure time, there is a car at A, but this car can carry only one passenger in addition to the driver. It is known that Jia and Yi have the same walking speed, and it is less than the car’s speed. How should the car be used so that both arrive at point B at the same time as quickly as possible?", "inputFormat": "A single line with three real numbers, representing the distance $s$ between points A and B, the walking speed $a$, and the car’s speed $b$.", "outputFormat": "The minimum time for both to arrive at point B simultaneously, rounded to $6$ decimal places.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $0 \\leq s, a, b \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小车问题", "background": "", "description": "甲、乙两人同时从 A 地出发要尽快同时赶到 B 地。出发时 A 地有一辆小车，可是这辆小车除了驾驶员外只能带一人。已知甲、乙两人的步行速度一样，且小于车的速度。问：怎样利用小车才能使两人尽快同时到达。", "inputFormat": "仅一行，三个实数，分别表示 AB 两地的距离 $s$，人的步行速度 $a$，车的速度 $b$。", "outputFormat": "两人同时到达 B 地需要的最短时间，保留 $6$ 位小数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $0 \\leq s, a, b \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1259", "type": "P", "difficulty": 3, "samples": [["7", "ooooooo*******--\noooooo--******o*\noooooo******--o*\nooooo--*****o*o*\nooooo*****--o*o*\noooo--****o*o*o*\noooo****--o*o*o*\nooo--***o*o*o*o*\nooo*o**--*o*o*o*\no--*o**oo*o*o*o*\no*o*o*--o*o*o*o*\n--o*o*o*o*o*o*o*\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["递归", "Special Judge"], "title": "黑白棋子的移动", "background": "", "description": "有 $2n$ 个棋子排成一行，开始为位置白子全部在左边，黑子全部在右边，如下图为 $n=5$ 的情况：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dzfwand6.png)\n\n移动棋子的规则是：每次必须同时移动相邻的两个棋子，颜色不限，可以左移也可以右移到空位上去，但不能调换两个棋子的左右位置。每次移动必须跳过若干个棋子（不能平移），要求最后能移成黑白相间的一行棋子。如 $n=5$ 时，成为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yus9ph6d.png)\n\n任务：编程打印出移动过程。", "inputFormat": "\n一个整数 $n$。", "outputFormat": "若干行，表示初始状态和每次移动的状态，用 $\\verb!o!$ 表示白子，$\\verb!*!$ 表示黑子，$\\verb!-!$ 表示空行。\n", "hint": " $ 4\\leq n\\leq 100$ ", "locale": "zh-CN", "translations": {"en": {"title": "Movement of Black and White Pieces", "background": "# Description\n\nThere are $2n$ pieces arranged in a row. Initially, all white pieces are on the left and all black pieces are on the right. The following figure shows the case $n=5$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dzfwand6.png)\n\nThe rules for moving the pieces are as follows: in each move, you must move two adjacent pieces simultaneously, regardless of their colors. They may move left or right into empty positions, but their left–right order cannot be swapped. Each move must jump over one or more pieces (you cannot simply slide). The goal is to obtain a row of pieces alternating in color. For example, when $n=5$, the target becomes:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yus9ph6d.png)\n\nTask: write a program to print the whole sequence of moves.", "description": "There are $2n$ pieces arranged in a row. Initially, all white pieces are on the left and all black pieces are on the right. The following figure shows the case $n=5$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dzfwand6.png)\n\nThe rules for moving the pieces are as follows: in each move, you must move two adjacent pieces simultaneously, regardless of their colors. They may move left or right into empty positions, but their left–right order cannot be swapped. Each move must jump over one or more pieces (you cannot simply slide). The goal is to obtain a row of pieces alternating in color. For example, when $n=5$, the target becomes:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yus9ph6d.png)\n\nTask: write a program to print the whole sequence of moves.\n\n# Description", "inputFormat": "A single integer $n$.", "outputFormat": "Multiple lines, showing the initial state and the state after each move. Use 'o' to denote a white piece, '*' to denote a black piece, and '-' to denote an empty cell.", "hint": "Constraints: $4 \\leq n \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "黑白棋子的移动", "background": "", "description": "有 $2n$ 个棋子排成一行，开始为位置白子全部在左边，黑子全部在右边，如下图为 $n=5$ 的情况：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dzfwand6.png)\n\n移动棋子的规则是：每次必须同时移动相邻的两个棋子，颜色不限，可以左移也可以右移到空位上去，但不能调换两个棋子的左右位置。每次移动必须跳过若干个棋子（不能平移），要求最后能移成黑白相间的一行棋子。如 $n=5$ 时，成为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yus9ph6d.png)\n\n任务：编程打印出移动过程。", "inputFormat": "\n一个整数 $n$。", "outputFormat": "若干行，表示初始状态和每次移动的状态，用 $\\verb!o!$ 表示白子，$\\verb!*!$ 表示黑子，$\\verb!-!$ 表示空行。\n", "hint": " $ 4\\leq n\\leq 100$ ", "locale": "zh-CN"}}}
{"pid": "P1260", "type": "P", "difficulty": 4, "samples": [["5 8\n1 2 0\n1 5 -1\n2 5 1\n3 1 5\n4 1 4\n4 3 -1\n5 3 -1\n5 4 -3", "0\n2\n5\n4\n1\n"], ["5 5\n1 2 -3\n1 5 -1\n2 5 -1\n5 1 -5\n4 1 4", "NO SOLUTION\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "Special Judge", "差分约束"], "title": "工程规划", "background": "", "description": "造一幢大楼是一项艰巨的工程，它是由 $n$ 个子任务构成的，给它们分别编号 $1,2,\\cdots,n\\ (5≤n≤1000)$。由于对一些任务的起始条件有着严格的限制，所以每个任务的起始时间 $T_1,T_2,\\cdots,T_n$ 并不是很容易确定的(但这些起始时间都是非负整数，因为它们必须在整个工程开始后启动)。例如：挖掘完成后，紧接着就要打地基；但是混凝土浇筑完成后，却要等待一段时间再去掉模板。\n\n这种要求就可以用 $m\\ (5≤m≤5000)$ 个不等式表示，不等式形如 $T_i-T_j≤b$ 代表 $i$ 和 $j$ 的起始时间必须满足的条件。每个不等式的右边都是一个常数 $b$，这些常数可能不相同，但是它们都在区间 $(-100,100)$ 内。\n\n你的任务就是写一个程序，给定像上面那样的不等式，找出一种可能的起始时间序列 $T_1,T_2,\\cdots,T_n$，或者判断问题无解。对于有解的情况，要使最早进行的那个任务和整个工程的起始时间相同，也就是说，$T_1,T_2,\\cdots,T_n$ 中至少有一个为 $0$。\n", "inputFormat": "第一行是用空格隔开的两个正整数 $n$ 和 $m$，下面的 $m$ 行每行有三个用空格隔开的整数 $i,j,b$ 对应着不等式 $T_i-T_j≤b$。\n", "outputFormat": "如果有可行的方案，那么输出 $n$ 行，每行都有一个非负整数且至少有一个为 $0$，按顺序表示每个任务的起始时间。如果没有可行的方案，就输出信息 `NO SOLUTION`。\n", "hint": "由@zhouyonglong提供SPJ\n", "locale": "zh-CN", "translations": {"en": {"title": "Project Planning", "background": "", "description": "Building a skyscraper is a challenging project composed of $n$ subtasks, numbered $1, 2, \\cdots, n$ ($5 \\le n \\le 1000$). Due to strict constraints on the starting conditions of some tasks, the start times $T_1, T_2, \\cdots, T_n$ are not easy to determine (however, these start times are all non-negative integers because they must start after the entire project begins). For example: after excavation is completed, the foundation must be laid immediately; but after concrete pouring is completed, one must wait for a while before removing the formwork.\n\nSuch requirements can be expressed by $m$ ($5 \\le m \\le 5000$) inequalities. An inequality of the form $T_i - T_j ≤ b$ represents a constraint that the start times of tasks $i$ and $j$ must satisfy. The right-hand side of each inequality is a constant $b$. These constants may differ, but they all lie within the interval $(-100, 100)$.\n\nYour task is to write a program that, given inequalities like the above, finds a possible sequence of start times $T_1, T_2, \\cdots, T_n$, or determines that the problem has no solution. For solvable cases, the earliest task must start at the same time as the entire project, that is, at least one of $T_1, T_2, \\cdots, T_n$ equals $0$.", "inputFormat": "The first line contains two positive integers $n$ and $m$ separated by a space. Each of the next $m$ lines contains three integers $i, j, b$ separated by spaces, corresponding to the inequality $T_i - T_j ≤ b$.", "outputFormat": "If there is a feasible solution, output $n$ lines. Each line contains a non-negative integer, and at least one of them must be $0$, representing in order the start time of each task. If there is no feasible solution, output the message `NO SOLUTION`.", "hint": "SPJ provided by @zhouyonglong.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "工程规划", "background": "", "description": "造一幢大楼是一项艰巨的工程，它是由 $n$ 个子任务构成的，给它们分别编号 $1,2,\\cdots,n\\ (5≤n≤1000)$。由于对一些任务的起始条件有着严格的限制，所以每个任务的起始时间 $T_1,T_2,\\cdots,T_n$ 并不是很容易确定的(但这些起始时间都是非负整数，因为它们必须在整个工程开始后启动)。例如：挖掘完成后，紧接着就要打地基；但是混凝土浇筑完成后，却要等待一段时间再去掉模板。\n\n这种要求就可以用 $m\\ (5≤m≤5000)$ 个不等式表示，不等式形如 $T_i-T_j≤b$ 代表 $i$ 和 $j$ 的起始时间必须满足的条件。每个不等式的右边都是一个常数 $b$，这些常数可能不相同，但是它们都在区间 $(-100,100)$ 内。\n\n你的任务就是写一个程序，给定像上面那样的不等式，找出一种可能的起始时间序列 $T_1,T_2,\\cdots,T_n$，或者判断问题无解。对于有解的情况，要使最早进行的那个任务和整个工程的起始时间相同，也就是说，$T_1,T_2,\\cdots,T_n$ 中至少有一个为 $0$。\n", "inputFormat": "第一行是用空格隔开的两个正整数 $n$ 和 $m$，下面的 $m$ 行每行有三个用空格隔开的整数 $i,j,b$ 对应着不等式 $T_i-T_j≤b$。\n", "outputFormat": "如果有可行的方案，那么输出 $n$ 行，每行都有一个非负整数且至少有一个为 $0$，按顺序表示每个任务的起始时间。如果没有可行的方案，就输出信息 `NO SOLUTION`。\n", "hint": "由@zhouyonglong提供SPJ\n", "locale": "zh-CN"}}}
{"pid": "P1261", "type": "P", "difficulty": 6, "samples": [["4 3\n2\n3\n1\n1\n1 4 30\n2 3 20\n3 4 20", "9\n"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000]}, "tags": ["图论", "2002", "ICPC", "CERC"], "title": "[CERC2002] 服务器储存信息问题", "background": null, "description": "Byteland 王国准备在各服务器间建立大型网络并提供多种服务。\n\n网络由 $n$ 台服务器组成，用双向的线连接。两台服务器之间最多只能有一条线直接连接，同时，每台服务器最多只能和 $10$ 台服务器直接连接，但是任意两台服务器间必然存在一条路径将它们连接在一起。\n\n每条传输线都有一个固定传输的速度。$\\delta(v,w)$ 表示服务器 $v$ 和 $w$ 之间的最短路径长度，且对任意的 $v$ 有 $\\delta(v,v)=0$。\n\n有些服务器比别的服务器提供更多的服务，它们的重要程度要高一些。我们用 $r(v)$ 表示服务器 $v$ 的重要程度 $\\texttt{rank}$。$\\texttt{rank}$ 越高的服务器越重要。\n\n每台服务器都会存储它附近的服务器的信息。当然，不是所有服务器的信息都存，只有感兴趣的服务器信息才会被存储。服务器 $v$ 对服务器 $w$ 感兴趣是指，不存在服务器 $u$ 满足，$r(u)>r(w)$ 且 $\\delta(v,u)\\le\\delta(v, w)$。\n\n举个例子来说，所有具有最高 $\\texttt{rank}$ 的服务器都会被别的服务器感兴趣。如果 $v$ 是一台具有最高 $\\texttt{rank}$ 的服务器，由于 $\\delta(v,v)=0$，所以 $v$ 只对具有最高 $\\texttt{rank}$ 的服务器感兴趣。\n\n我们定义 $B(v)$ 为 **$v$ 感兴趣**的服务器的集合。我们希望计算所有服务器储存的信息量，即所有服务器的 $|B(v)|$ 之和。Byteland 王国并不希望存储大量的数据，所以所有服务器存储的数据量 （$|B(v)|$ 之和）不会超过 $30n$。\n\n你的任务是写一个程序，读入 Byteland 王国的网络分布，计算所有服务器存储的数据量。", "inputFormat": "第一行两个整数 $n$ 和 $m$。$n$ 表示服务器的数量，$m$ 表示传输线的数量。\n\n接下来 $n$ 行，每行一个整数，第 $i$ 行的整数为 $r(i)$，表示第 $i$ 台服务器的 $\\texttt{rank}$。\n\n接下来 $m$ 行，每行表示各条传输线的信息，包含三个整数 $a,b,t$ 。$a$ 和 $b$ 是传输线所连接的两台服务器的编号，$t$ 是传输线的长度。", "outputFormat": "一个整数，表示所有服务器存储的数据总量，即 $|B(v)|$ 之和。", "hint": "#### 输出解释\n\n$B(1)=\\{1,2\\},B(2)=\\{2\\},B(3)=\\{2,3\\},B(4)=\\{1,2,3,4\\}$。\n\n#### 数据规模\n\n$1\\le n\\le30000,1\\le m\\le5n$\n\n$1\\le r(i)\\le 10$\n\n$1\\le t\\le 1000,1\\le a,b\\le n,a\\neq b$", "locale": "zh-CN", "translations": {"en": {"title": "[CERC/SWERC2002] Servers", "background": null, "description": "The Kingdom of Byteland is preparing to build a large network among its servers and provide various services.\n\nThe network consists of $n$ servers, connected by bidirectional links. There is at most one direct link between any pair of servers. Each server is directly connected to at most $10$ servers. Furthermore, there is a path between any two servers.\n\nEach transmission link has a fixed length. Let $\\delta(v,w)$ denote the length of the shortest path between servers $v$ and $w$, and for any $v$ we have $\\delta(v,v)=0$.\n\nSome servers provide more services than others and are therefore more important. We use $r(v)$ to denote the importance $\\texttt{rank}$ of server $v$. A higher $\\texttt{rank}$ means a more important server.\n\nEach server stores information about nearby servers. Of course, not all servers’ information is stored—only the interesting ones. Server $v$ is interested in server $w$ if there does not exist a server $u$ such that $r(u)>r(w)$ and $\\delta(v,u)\\le\\delta(v,w)$.\n\nFor example, all servers with the highest $\\texttt{rank}$ are interesting to every other server. If $v$ has the highest $\\texttt{rank}$, then since $\\delta(v,v)=0$, $v$ is interested only in servers with the highest $\\texttt{rank}$.\n\nWe define $B(v)$ as the set of servers that server $v$ is interested in. We want to compute the total amount of information stored by all servers, i.e., the sum of $|B(v)|$ over all servers. Byteland does not want to store a large amount of data, so the total amount of stored data (the sum of $|B(v)|$) will not exceed $30n$.\n\nYour task is to write a program that reads the network layout of Byteland and computes the total amount of information stored by all servers.", "inputFormat": "The first line contains two integers $n$ and $m$. Here $n$ is the number of servers and $m$ is the number of transmission links.\n\nThe next $n$ lines each contain one integer. The integer on the $i$-th line is $r(i)$, the $\\texttt{rank}$ of server $i$.\n\nThe next $m$ lines each describe a transmission link with three integers $a,b,t$. Here $a$ and $b$ are the indices of the two servers connected by the link, and $t$ is the length of the link.", "outputFormat": "Output a single integer: the total amount of data stored by all servers, i.e., the sum of $|B(v)|$.", "hint": "Output explanation:\n\n$B(1)=\\{1,2\\},B(2)=\\{2\\},B(3)=\\{2,3\\},B(4)=\\{1,2,3,4\\}$.\n\nConstraints:\n\n$1\\le n\\le30000,1\\le m\\le5n$\n\n$1\\le r(i)\\le 10$\n\n$1\\le t\\le 1000,1\\le a,b\\le n,a\\neq b$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CERC2002] 服务器储存信息问题", "background": null, "description": "Byteland 王国准备在各服务器间建立大型网络并提供多种服务。\n\n网络由 $n$ 台服务器组成，用双向的线连接。两台服务器之间最多只能有一条线直接连接，同时，每台服务器最多只能和 $10$ 台服务器直接连接，但是任意两台服务器间必然存在一条路径将它们连接在一起。\n\n每条传输线都有一个固定传输的速度。$\\delta(v,w)$ 表示服务器 $v$ 和 $w$ 之间的最短路径长度，且对任意的 $v$ 有 $\\delta(v,v)=0$。\n\n有些服务器比别的服务器提供更多的服务，它们的重要程度要高一些。我们用 $r(v)$ 表示服务器 $v$ 的重要程度 $\\texttt{rank}$。$\\texttt{rank}$ 越高的服务器越重要。\n\n每台服务器都会存储它附近的服务器的信息。当然，不是所有服务器的信息都存，只有感兴趣的服务器信息才会被存储。服务器 $v$ 对服务器 $w$ 感兴趣是指，不存在服务器 $u$ 满足，$r(u)>r(w)$ 且 $\\delta(v,u)\\le\\delta(v, w)$。\n\n举个例子来说，所有具有最高 $\\texttt{rank}$ 的服务器都会被别的服务器感兴趣。如果 $v$ 是一台具有最高 $\\texttt{rank}$ 的服务器，由于 $\\delta(v,v)=0$，所以 $v$ 只对具有最高 $\\texttt{rank}$ 的服务器感兴趣。\n\n我们定义 $B(v)$ 为 **$v$ 感兴趣**的服务器的集合。我们希望计算所有服务器储存的信息量，即所有服务器的 $|B(v)|$ 之和。Byteland 王国并不希望存储大量的数据，所以所有服务器存储的数据量 （$|B(v)|$ 之和）不会超过 $30n$。\n\n你的任务是写一个程序，读入 Byteland 王国的网络分布，计算所有服务器存储的数据量。", "inputFormat": "第一行两个整数 $n$ 和 $m$。$n$ 表示服务器的数量，$m$ 表示传输线的数量。\n\n接下来 $n$ 行，每行一个整数，第 $i$ 行的整数为 $r(i)$，表示第 $i$ 台服务器的 $\\texttt{rank}$。\n\n接下来 $m$ 行，每行表示各条传输线的信息，包含三个整数 $a,b,t$ 。$a$ 和 $b$ 是传输线所连接的两台服务器的编号，$t$ 是传输线的长度。", "outputFormat": "一个整数，表示所有服务器存储的数据总量，即 $|B(v)|$ 之和。", "hint": "#### 输出解释\n\n$B(1)=\\{1,2\\},B(2)=\\{2\\},B(3)=\\{2,3\\},B(4)=\\{1,2,3,4\\}$。\n\n#### 数据规模\n\n$1\\le n\\le30000,1\\le m\\le5n$\n\n$1\\le r(i)\\le 10$\n\n$1\\le t\\le 1000,1\\le a,b\\le n,a\\neq b$", "locale": "zh-CN"}}}
{"pid": "P1262", "type": "P", "difficulty": 4, "samples": [["3\n2\n1 10\n2 100\n2\n1 3\n2 3\n", "YES\n110\n"], ["4\n2\n1 100\n4 200\n2\n1 2\n3 4", "NO\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "强连通分量"], "title": "间谍网络", "background": "", "description": "由于外国间谍的大量渗入，国家安全正处于高度的危机之中。如果 A 间谍手中掌握着关于 B 间谍的犯罪证据，则称 A 可以揭发 B。有些间谍收受贿赂，只要给他们一定数量的美元，他们就愿意交出手中掌握的全部情报。所以，如果我们能够收买一些间谍的话，我们就可能控制间谍网中的每一分子。因为一旦我们逮捕了一个间谍，他手中掌握的情报都将归我们所有，这样就有可能逮捕新的间谍，掌握新的情报。\n\n我们的反间谍机关提供了一份资料，包括所有已知的受贿的间谍，以及他们愿意收受的具体数额。同时我们还知道哪些间谍手中具体掌握了哪些间谍的资料。假设总共有 $n$ 个间谍（$n$ 不超过 $3000$），每个间谍分别用 $1$ 到 $3000$ 的整数来标识。\n\n请根据这份资料，判断我们是否有可能控制全部的间谍，如果可以，求出我们所需要支付的最少资金。否则，输出不能被控制的一个间谍。", "inputFormat": "第一行只有一个整数 $n$。\n\n第二行是整数 $p$。表示愿意被收买的人数，$1\\le p\\le n$。\n\n接下来的 $p$ 行，每行有两个整数，第一个数是一个愿意被收买的间谍的编号，第二个数表示他将会被收买的数额。这个数额不超过 $20000$。\n\n紧跟着一行只有一个整数 $r$，$1\\le r\\le8000$。然后 $r$ 行，每行两个正整数，表示数对 $(A, B)$，$A$ 间谍掌握 $B$ 间谍的证据。", "outputFormat": "如果可以控制所有间谍，第一行输出 `YES`，并在第二行输出所需要支付的贿金最小值。否则输出 `NO`，并在第二行输出不能控制的间谍中，编号最小的间谍编号。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Spy Network", "background": "", "description": "Due to the massive infiltration of foreign spies, national security is in a severe crisis. If spy A holds incriminating evidence against spy B, we say that A can expose B. Some spies accept bribes; as long as they are paid a certain amount of dollars, they are willing to hand over all the intelligence they hold. Therefore, if we can buy off some spies, we may be able to control every individual in the spy network. Once we arrest a spy, all the intelligence they hold becomes ours, which may enable us to arrest new spies and acquire new intelligence.\n\nOur counterintelligence agency has provided a dossier that includes all known bribable spies and the exact amount they demand. We also know which spies hold information about which other spies. Assume there are $n$ spies in total ($n \\le 3000$), each identified by an integer from 1 to 3000.\n\nBased on this dossier, determine whether it is possible to control all spies. If it is possible, find the minimum total payment required. Otherwise, output one spy who cannot be controlled.", "inputFormat": "- The first line contains a single integer $n$.\n- The second line contains an integer $p$, the number of spies willing to be bribed, with $1 \\le p \\le n$.\n- The next $p$ lines each contain two integers: the ID of a bribable spy, and the amount required to bribe them. This amount does not exceed 20000.\n- The next line contains a single integer $r$, with $1 \\le r \\le 8000$.\n- The next $r$ lines each contain two positive integers, representing a pair $(A, B)$, meaning spy $A$ holds evidence against spy $B$.", "outputFormat": "- If it is possible to control all spies, output `YES` on the first line, and the minimum total bribe on the second line.\n- Otherwise, output `NO` on the first line, and on the second line output the smallest ID among the spies that cannot be controlled.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "间谍网络", "background": "", "description": "由于外国间谍的大量渗入，国家安全正处于高度的危机之中。如果 A 间谍手中掌握着关于 B 间谍的犯罪证据，则称 A 可以揭发 B。有些间谍收受贿赂，只要给他们一定数量的美元，他们就愿意交出手中掌握的全部情报。所以，如果我们能够收买一些间谍的话，我们就可能控制间谍网中的每一分子。因为一旦我们逮捕了一个间谍，他手中掌握的情报都将归我们所有，这样就有可能逮捕新的间谍，掌握新的情报。\n\n我们的反间谍机关提供了一份资料，包括所有已知的受贿的间谍，以及他们愿意收受的具体数额。同时我们还知道哪些间谍手中具体掌握了哪些间谍的资料。假设总共有 $n$ 个间谍（$n$ 不超过 $3000$），每个间谍分别用 $1$ 到 $3000$ 的整数来标识。\n\n请根据这份资料，判断我们是否有可能控制全部的间谍，如果可以，求出我们所需要支付的最少资金。否则，输出不能被控制的一个间谍。", "inputFormat": "第一行只有一个整数 $n$。\n\n第二行是整数 $p$。表示愿意被收买的人数，$1\\le p\\le n$。\n\n接下来的 $p$ 行，每行有两个整数，第一个数是一个愿意被收买的间谍的编号，第二个数表示他将会被收买的数额。这个数额不超过 $20000$。\n\n紧跟着一行只有一个整数 $r$，$1\\le r\\le8000$。然后 $r$ 行，每行两个正整数，表示数对 $(A, B)$，$A$ 间谍掌握 $B$ 间谍的证据。", "outputFormat": "如果可以控制所有间谍，第一行输出 `YES`，并在第二行输出所需要支付的贿金最小值。否则输出 `NO`，并在第二行输出不能控制的间谍中，编号最小的间谍编号。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1263", "type": "P", "difficulty": 6, "samples": [["3 4\n2 0 0 0\n2 2 2 1\n0 1 0 2\n", "2\n1 2\n3 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2002", "网络流", "Special Judge", "CEOI（中欧）", "连通块", "二分图"], "title": "[CEOI 2002] Royal guards", "background": "", "description": "从前有一个王国，这个王国的城堡是 $m$ 行 $n$ 列的一个矩形，被分为 $m \\times n$ 个方格。一些方格是墙，而另一些是空地。这个王国的国王在城堡里设了一些陷阱，每个陷阱占据一块空地。\n\n一天，国王决定在城堡里布置守卫，他希望安排尽量多的守卫。\n\n守卫们都是经过严格训练的，所以一旦他们发现同行或同列中有人的话，他们立即向那人射击。因此，国王希望能够合理地布置守卫，使他们互相之间不能看见，这样他们就不可能互相射击了。守卫们只能被布置在空地上，不能被布置在陷阱或墙上，且一块空地只能布置一个守卫。如果两个守卫在同一行或同一列，并且他们之间没有墙的话，他们就能互相看见。(守卫就像象棋里的车一样)\n\n你的任务是写一个程序，根据给定的城堡，计算最多可布置多少个守卫，并设计出布置的方案。\n", "inputFormat": "第一行有两个整数 $m$ 和 $n$，表示城堡的规模。\n\n第 $2$ 到第 $(m + 1)$ 行，每行 $n$ 个整数，第 $(i +1)$ 行第 $j$ 列的数 $a_{i, j}$ 表示城堡第 $i$ 行第 $j$ 列的方格的信息，其中 $0$ 表示空地，$1$ 表示陷阱，$2$ 表示墙。", "outputFormat": "**本题存在 Special Judge**。\n\n首先输出一行一个整数 $k$，表示最多可布置的守卫个数。\n\n然后输出 $k$ 行，每行两个整数 $x, y$，表示在第 $x$ 行第 $j$ 列放一个守卫。", "hint": "#### 样例输入输出 1 解释\n\n如图（黑色方格为墙，白色方格为空地，圆圈为陷阱，G表示守卫）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zv6sr9xw.png)\n\n#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq m, n \\leq 200$，$0 \\leq a_{i, j} \\leq 2$。", "locale": "zh-CN", "translations": {"en": {"title": "[CEOI 2002] Royal guards", "background": "# Description\n\nOnce upon a time there was a kingdom whose castle was a rectangle of $m$ rows and $n$ columns, divided into $m \\times n$ cells. Some cells are walls, and others are empty. The king has set traps in the castle, each trap occupying one empty cell.\n\nOne day, the king decided to deploy guards in the castle, and he wants to place as many guards as possible.\n\nThe guards are strictly trained, so as soon as they find someone in the same row or the same column, they immediately shoot at that person. Therefore, the king wants to place the guards so that they cannot see each other, making it impossible for them to shoot one another. Guards can only be placed on empty cells, not on traps or walls, and at most one guard can be placed on any empty cell. If two guards are in the same row or column and there is no wall between them, they can see each other (guards move like rooks in chess).\n\nYour task is to write a program that, given the castle, computes the maximum number of guards that can be placed and outputs one optimal placement.", "description": "", "inputFormat": "", "outputFormat": "This problem uses Special Judge.\n\nFirst output a single integer $k$, the maximum number of guards that can be placed.\n\nThen output $k$ lines. Each line contains two integers $x, y$, indicating that a guard is placed at row $x$ and column $y$.", "hint": "Explanation for sample input and output 1:\n\nAs shown in the figure (black cells are walls, white cells are empty, circles are traps, and G denotes a guard).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zv6sr9xw.png)\n\nConstraints:\n\nFor all testdata, it is guaranteed that $1 \\leq m, n \\leq 200$ and $0 \\leq a_{i, j} \\leq 2$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CEOI 2002] Royal guards", "background": "", "description": "从前有一个王国，这个王国的城堡是 $m$ 行 $n$ 列的一个矩形，被分为 $m \\times n$ 个方格。一些方格是墙，而另一些是空地。这个王国的国王在城堡里设了一些陷阱，每个陷阱占据一块空地。\n\n一天，国王决定在城堡里布置守卫，他希望安排尽量多的守卫。\n\n守卫们都是经过严格训练的，所以一旦他们发现同行或同列中有人的话，他们立即向那人射击。因此，国王希望能够合理地布置守卫，使他们互相之间不能看见，这样他们就不可能互相射击了。守卫们只能被布置在空地上，不能被布置在陷阱或墙上，且一块空地只能布置一个守卫。如果两个守卫在同一行或同一列，并且他们之间没有墙的话，他们就能互相看见。(守卫就像象棋里的车一样)\n\n你的任务是写一个程序，根据给定的城堡，计算最多可布置多少个守卫，并设计出布置的方案。\n", "inputFormat": "第一行有两个整数 $m$ 和 $n$，表示城堡的规模。\n\n第 $2$ 到第 $(m + 1)$ 行，每行 $n$ 个整数，第 $(i +1)$ 行第 $j$ 列的数 $a_{i, j}$ 表示城堡第 $i$ 行第 $j$ 列的方格的信息，其中 $0$ 表示空地，$1$ 表示陷阱，$2$ 表示墙。", "outputFormat": "**本题存在 Special Judge**。\n\n首先输出一行一个整数 $k$，表示最多可布置的守卫个数。\n\n然后输出 $k$ 行，每行两个整数 $x, y$，表示在第 $x$ 行第 $j$ 列放一个守卫。", "hint": "#### 样例输入输出 1 解释\n\n如图（黑色方格为墙，白色方格为空地，圆圈为陷阱，G表示守卫）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zv6sr9xw.png)\n\n#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq m, n \\leq 200$，$0 \\leq a_{i, j} \\leq 2$。", "locale": "zh-CN"}}}
{"pid": "P1264", "type": "P", "difficulty": 6, "samples": [["3\n2 0 1 1 0 2\n0 2 2 2 0 2 2 2 0\n", "1 2 3\n"], ["3\n4 0 2 2 0 4\n0 1 1 1 0 1 1 1 0\n", "1 2\n"], ["4\n0 3 3 1 1 3 3 0\n0 0 0 2 0 0 1 0 0 1 0 0 2 0 0 0\n", "2 4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论"], "title": "K-联赛", "background": "", "description": "K-联赛职业足球俱乐部的球迷们都是有组织的训练有素的啦啦队员，就像红魔啦啦队一样（2002 年韩日世界杯上韩国队的啦啦队）。\n\n这个赛季，经过很多场比赛以后，球迷们希望知道他们支持的球队是否还有机会赢得最后的联赛冠军。换句话说，球队是否可以通过某种特定的比赛结果最终取得最高的积分（获胜场次最多），允许出现多支队并列第一的情况。\n\n现在，有 $n$ 支球队，每支队伍已经胜负的场次分别是 $w_i$ 和 $d_i$。同时还有些比赛没有进行，第 $i$ 支球队和第 $j$ 支球队之间还剩 $a_{ij}$ 场比赛要进行。\n\n你需要找出所有可能获得冠军的球队。\n\n所有队参加的比赛数是相同的，并且为了简化问题，你可以认为不存在平局，即比赛结果只有胜或负两种。", "inputFormat": "第一行一个正整数 $n$，表示球队数。\n\n第二行 $2n$ 个正整数，分别表示 $w_1,d_1,w_2,d_2,\\cdots,w_n,d_n$。\n\n第三行 $n^2$ 个正整数，分别表示 $a_{11},a_{12},\\cdots,a_{1n},a_{21},\\cdots,a_{2n},\\cdots,a_{n1},\\cdots,a_{nn}$。", "outputFormat": "仅一行，输出所有可能获得冠军的球队，按其编号升序输出，中间用空格分隔。", "hint": "对于 $100\\%$ 的数据满足，$n\\le 25$，$w_i,d_i\\le 100$，$a_{ij}\\le 10$，$a_{ij}=a_{ji}$，$a_{ii}=0$。", "locale": "zh-CN", "translations": {"en": {"title": "K-League", "background": "", "description": "The fans of the professional football clubs in the K-League are organized and well-trained cheerleaders, like the Red Devils cheer squad (the supporters of Korea’s national team at the 2002 Korea–Japan FIFA World Cup).\n\nThis season, after many matches, the fans want to know whether the team they support still has a chance to win the league title in the end. In other words, can the team, through some possible set of match outcomes, finish with the highest number of points (i.e., the most wins)? Ties for first place are allowed.\n\nThere are $n$ teams. For each team $i$, the numbers of wins and losses already recorded are $w_i$ and $d_i$. There are still some matches to be played: between team $i$ and team $j$, there are $a_{ij}$ remaining matches.\n\nYou need to find all teams that can still possibly become champions.\n\nAll teams will play the same total number of matches, and to simplify the problem, you may assume there are no draws; every match has only two outcomes: win or loss.", "inputFormat": "- The first line contains a positive integer $n$, the number of teams.\n- The second line contains $2n$ non-negative integers, representing $w_1, d_1, w_2, d_2, \\cdots, w_n, d_n$.\n- The third line contains $n^2$ non-negative integers, representing $a_{11}, a_{12}, \\cdots, a_{1n}, a_{21}, \\cdots, a_{2n}, \\cdots, a_{n1}, \\cdots, a_{nn}$ (row-major order).", "outputFormat": "Output a single line containing all teams that can possibly become champions, in ascending order of their indices, separated by spaces.", "hint": "For $100\\%$ of the testdata, $n \\le 25$, $w_i, d_i \\le 100$, $a_{ij} \\le 10$, $a_{ij} = a_{ji}$, $a_{ii} = 0$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "K-联赛", "background": "", "description": "K-联赛职业足球俱乐部的球迷们都是有组织的训练有素的啦啦队员，就像红魔啦啦队一样（2002 年韩日世界杯上韩国队的啦啦队）。\n\n这个赛季，经过很多场比赛以后，球迷们希望知道他们支持的球队是否还有机会赢得最后的联赛冠军。换句话说，球队是否可以通过某种特定的比赛结果最终取得最高的积分（获胜场次最多），允许出现多支队并列第一的情况。\n\n现在，有 $n$ 支球队，每支队伍已经胜负的场次分别是 $w_i$ 和 $d_i$。同时还有些比赛没有进行，第 $i$ 支球队和第 $j$ 支球队之间还剩 $a_{ij}$ 场比赛要进行。\n\n你需要找出所有可能获得冠军的球队。\n\n所有队参加的比赛数是相同的，并且为了简化问题，你可以认为不存在平局，即比赛结果只有胜或负两种。", "inputFormat": "第一行一个正整数 $n$，表示球队数。\n\n第二行 $2n$ 个正整数，分别表示 $w_1,d_1,w_2,d_2,\\cdots,w_n,d_n$。\n\n第三行 $n^2$ 个正整数，分别表示 $a_{11},a_{12},\\cdots,a_{1n},a_{21},\\cdots,a_{2n},\\cdots,a_{n1},\\cdots,a_{nn}$。", "outputFormat": "仅一行，输出所有可能获得冠军的球队，按其编号升序输出，中间用空格分隔。", "hint": "对于 $100\\%$ 的数据满足，$n\\le 25$，$w_i,d_i\\le 100$，$a_{ij}\\le 10$，$a_{ij}=a_{ji}$，$a_{ii}=0$。", "locale": "zh-CN"}}}
{"pid": "P1265", "type": "P", "difficulty": 4, "samples": [["4\r\n0 0\r\n1 2\r\n-1 2\r\n0 4", "6.47"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "生成树"], "title": "公路修建", "background": "", "description": "某国有 $n$ 个城市，它们互相之间没有公路相通，因此交通十分不便。为解决这一“行路难”的问题，政府决定修建公路。修建公路的任务由各城市共同完成。\n\n修建工程分若干轮完成。在每一轮中，每个城市选择一个与它最近的城市，申请修建通往该城市的公路。政府负责审批这些申请以决定是否同意修建。\n\n政府审批的规则如下：\n\n1. 如果两个或以上城市申请修建同一条公路，则让它们共同修建；\n2. 如果三个或以上的城市申请修建的公路成环。如下图，A 申请修建公路 AB，B 申请修建公路 BC，C 申请修建公路 CA。则政府将否决其中最短的一条公路的修建申请； \n3. 其他情况的申请一律同意。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/apng39qc.png)\n\n一轮修建结束后，可能会有若干城市可以通过公路直接或间接相连。这些可以互相连通的城市即组成“城市联盟”。在下一轮修建中，每个“城市联盟”将被看作一个城市，发挥一个城市的作用。\n\n当所有城市被组合成一个“城市联盟”时，修建工程也就完成了。\n\n你的任务是根据城市的分布和前面讲到的规则，计算出将要修建的公路总长度。", "inputFormat": "第一行一个整数 $n$，表示城市的数量。（$n \\leq 5000$）\n\n以下 $n$ 行，每行两个整数 $x$ 和 $y$，表示一个城市的坐标。（$-10^6 \\leq x,y \\leq 10^6$）\n", "outputFormat": "一个实数，四舍五入保留两位小数，表示公路总长。（保证有唯一解）\n", "hint": "修建的公路如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p0dtxt2l.png)", "locale": "zh-CN", "translations": {"en": {"title": "Road Construction", "background": "", "description": "There are $n$ cities in a country, and none of them are connected by roads, so travel is very inconvenient. To solve this \"difficult travel\" problem, the government decides to build roads. The construction task will be jointly completed by the cities.\n\nThe construction proceeds in several rounds. In each round, each city selects the nearest city to it and applies to build a road to that city. The government reviews these applications to decide whether to approve construction.\n\nThe government’s approval rules are as follows:\n1. If two or more cities apply to build the same road, they will build it together.\n2. If the roads applied for by three or more cities form a cycle, then, as shown below, A applies for road AB, B applies for road BC, and C applies for road CA. The government will deny the application for the shortest road among them.\n3. All other applications are approved.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/apng39qc.png)\n\nAfter a round of construction, some cities may become directly or indirectly connected by roads. These mutually reachable cities form a \"city alliance\". In the next round of construction, each \"city alliance\" is treated as a single city and acts as one.\n\nWhen all cities have been merged into a single \"city alliance\", the construction is complete.\n\nYour task is to compute the total length of the roads to be built, based on the city distribution and the rules above.\n\n#", "inputFormat": "The first line contains an integer $n$, the number of cities ($n \\leq 5000$).\n\nEach of the following $n$ lines contains two integers $x$ and $y$, the coordinates of a city ($-10^6 \\leq x, y \\leq 10^6$).\n\n#", "outputFormat": "Output a real number, rounded to two decimal places, representing the total road length. (It is guaranteed that the answer is unique.)\n\n#", "hint": "The roads to be built are shown in the figure:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p0dtxt2l.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "公路修建", "background": "", "description": "某国有 $n$ 个城市，它们互相之间没有公路相通，因此交通十分不便。为解决这一“行路难”的问题，政府决定修建公路。修建公路的任务由各城市共同完成。\n\n修建工程分若干轮完成。在每一轮中，每个城市选择一个与它最近的城市，申请修建通往该城市的公路。政府负责审批这些申请以决定是否同意修建。\n\n政府审批的规则如下：\n\n1. 如果两个或以上城市申请修建同一条公路，则让它们共同修建；\n2. 如果三个或以上的城市申请修建的公路成环。如下图，A 申请修建公路 AB，B 申请修建公路 BC，C 申请修建公路 CA。则政府将否决其中最短的一条公路的修建申请； \n3. 其他情况的申请一律同意。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/apng39qc.png)\n\n一轮修建结束后，可能会有若干城市可以通过公路直接或间接相连。这些可以互相连通的城市即组成“城市联盟”。在下一轮修建中，每个“城市联盟”将被看作一个城市，发挥一个城市的作用。\n\n当所有城市被组合成一个“城市联盟”时，修建工程也就完成了。\n\n你的任务是根据城市的分布和前面讲到的规则，计算出将要修建的公路总长度。", "inputFormat": "第一行一个整数 $n$，表示城市的数量。（$n \\leq 5000$）\n\n以下 $n$ 行，每行两个整数 $x$ 和 $y$，表示一个城市的坐标。（$-10^6 \\leq x,y \\leq 10^6$）\n", "outputFormat": "一个实数，四舍五入保留两位小数，表示公路总长。（保证有唯一解）\n", "hint": "修建的公路如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p0dtxt2l.png)", "locale": "zh-CN"}}}
{"pid": "P1266", "type": "P", "difficulty": 5, "samples": [["6 15 1\n0 1 25 68\n0 2 30 50\n0 5 0 101\n1 2 70 77\n1 3 35 42\n2 0 0 22\n2 1 40 86\n2 3 0 23\n2 4 45 40\n3 1 64 14\n3 5 0 23\n4 1 95 8\n5 1 0 84\n5 2 90 64\n5 3 36 40", "0 5 2 3 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "图论", "启发式搜索", "最短路", "Floyd 算法"], "title": "速度限制", "background": null, "description": "在这个繁忙的社会中，我们往往不再去选择最短的道路，而是选择最快的路线。开车时每条道路的限速成为最关键的问题。不幸的是，有一些限速的标志丢失了，因此你无法得知应该开多快。一种可以辩解的解决方案是，按照原来的速度行驶。你的任务是计算两地间的最快路线。\n\n你将获得一份现代化城市的道路交通信息。为了使问题简化，地图只包括路口和道路。每条道路是有向的，只连接了两个路口，并且最多只有一块限速标志，位于路的起点。两地 $A$ 和 $B$，最多只有一条道路从 $A$ 连接到 $B$。你可以假设加速能够在瞬间完成并且不会有交通堵塞等情况影响你。当然，你的车速不能超过当前的速度限制。", "inputFormat": "第一行是 $3$ 个整数 $N$，$M$ 和 $D$（$2\\leq N\\leq 150$，$1\\leq M\\leq 22500$）。$N$ 表示路口的数目，用 $0 \\sim N-1$ 标记。$M$ 是道路的总数，$D$ 表示你的目的地。\n\n接下来的 $M$ 行，每行描述一条道路，每行有 $4$ 个整数 $A$（$0\\leq A<N$），$B$（$0\\leq B<N$），$V$ （$0\\leq V\\leq 500$）和 $L$（$1\\leq L\\leq 500$），这条路是从 $A$ 到 $B$ 的，速度限制是 $V$，长度为 $L$。如果 $V$ 是 $0$，表示这条路的限速未知。\n\n如果 $V$ 不为 $0$，则经过该路的时间 $T=\\frac{L}{V}$。否则 $T=\\frac{L}{V_{old}}$，$V_{old}$ 是你到达该路口前的速度。开始时你位于 $0$ 点，并且速度为 $70$。", "outputFormat": "输出文件仅一行整数，表示从 $0$ 到 $D$ 经过的城市。\n\n输出的顺序必须按照你经过这些城市的顺序，以 $0$ 开始，以 $D$ 结束。仅有一条最快路线。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Speed Limit", "background": "", "description": "In this busy society, we often do not choose the shortest road but the fastest route. While driving, the speed limit of each road becomes the key factor. Unfortunately, some speed-limit signs are missing, so you cannot know how fast you should drive. A defensible approach is to keep driving at your previous speed. Your task is to compute the fastest route between two places.\n\nYou are given road traffic information for a modern city. To simplify the problem, the map includes only intersections and roads. Each road is directed, connects exactly two intersections, and has at most one speed-limit sign located at the start of the road. For any two intersections $A$ and $B$, there is at most one road from $A$ to $B$. You may assume instantaneous acceleration and no congestion or similar factors. Of course, your speed cannot exceed the current speed limit.", "inputFormat": "The first line contains 3 integers $N$, $M$, and $D$ ($2\\leq N\\leq 150$, $1\\leq M\\leq 22500$). $N$ is the number of intersections, labeled from 0 to $N-1$. $M$ is the total number of roads, and $D$ is your destination.\n\nThe next $M$ lines each describe one road, with 4 integers $A$ ($0\\leq A<N$), $B$ ($0\\leq B<N$), $V$ ($0\\leq V\\leq 500$), and $L$ ($1\\leq L\\leq 500$). This road goes from $A$ to $B$, its speed limit is $V$, and its length is $L$. If $V$ is $0$, the speed limit on this road is unknown.\n\nIf $V$ is not $0$, the travel time is $T=\\frac{L}{V}$. Otherwise $T=\\frac{L}{V_{old}}$, where $V_{old}$ is your speed upon arriving at the intersection before this road. Initially, you are at 0 with speed 70.", "outputFormat": "Output a single line of integers: the sequence of intersections you pass from 0 to $D$, in order, starting with 0 and ending with $D$, separated by spaces. There is only one fastest route.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "速度限制", "background": null, "description": "在这个繁忙的社会中，我们往往不再去选择最短的道路，而是选择最快的路线。开车时每条道路的限速成为最关键的问题。不幸的是，有一些限速的标志丢失了，因此你无法得知应该开多快。一种可以辩解的解决方案是，按照原来的速度行驶。你的任务是计算两地间的最快路线。\n\n你将获得一份现代化城市的道路交通信息。为了使问题简化，地图只包括路口和道路。每条道路是有向的，只连接了两个路口，并且最多只有一块限速标志，位于路的起点。两地 $A$ 和 $B$，最多只有一条道路从 $A$ 连接到 $B$。你可以假设加速能够在瞬间完成并且不会有交通堵塞等情况影响你。当然，你的车速不能超过当前的速度限制。", "inputFormat": "第一行是 $3$ 个整数 $N$，$M$ 和 $D$（$2\\leq N\\leq 150$，$1\\leq M\\leq 22500$）。$N$ 表示路口的数目，用 $0 \\sim N-1$ 标记。$M$ 是道路的总数，$D$ 表示你的目的地。\n\n接下来的 $M$ 行，每行描述一条道路，每行有 $4$ 个整数 $A$（$0\\leq A<N$），$B$（$0\\leq B<N$），$V$ （$0\\leq V\\leq 500$）和 $L$（$1\\leq L\\leq 500$），这条路是从 $A$ 到 $B$ 的，速度限制是 $V$，长度为 $L$。如果 $V$ 是 $0$，表示这条路的限速未知。\n\n如果 $V$ 不为 $0$，则经过该路的时间 $T=\\frac{L}{V}$。否则 $T=\\frac{L}{V_{old}}$，$V_{old}$ 是你到达该路口前的速度。开始时你位于 $0$ 点，并且速度为 $70$。", "outputFormat": "输出文件仅一行整数，表示从 $0$ 到 $D$ 经过的城市。\n\n输出的顺序必须按照你经过这些城市的顺序，以 $0$ 开始，以 $D$ 结束。仅有一条最快路线。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1267", "type": "P", "difficulty": 5, "samples": [["3 \n19 33 32 31 29 3 5 4 30 \n22 25 20 21 12 24 23 34 35 \n14 13 15 26 18 17 8 16 27 \n11 10 9 1 28 7 2 6 36", "17\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["树形数据结构"], "title": "排序二叉树", "background": "", "description": "一个边长为 $n$ 的正三角形可以被划分成 $n^2$ 个小的边长为 $1$ 的正三角形，称为单位三角形。边长为 $3$ 的正三角形被分成三层共 $9$ 个小的正三角形，我们把它们从顶到底，从左到右以 $1\\sim 9$ 编号，见下图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mzls92cx.png)\n\n四个这样的边长为 $n$ 的正三角形可以组成一个三棱锥。我们将正三棱锥的三个侧面依顺时针次序（从顶向底视角）编号为 $A,B,C$，底面编号为 $D$。侧面的 $A,B,C$ 号三角形以三棱锥的顶点为顶，底面的 $D$ 号三角形以它与 $A,B$ 三角形的交点为顶。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yyqpdocn.png)\n\n其中 $\\tt .$ 表示这个三角形面的 $1$ 号三角形位置，并依次编号下去。\n\n上图为三棱锥展开后的平面图，每个面上标有圆点的是该面的顶，该图中侧面 $A,B,C$ 分别向纸内方向折叠即可还原成三棱锥。我们把这 $A,B,C,D$ 四个面各自划分成 $n^2$ 个单位三角形。\n\n对于任意两个单位三角形，如有一条边相邻，则称它们为相邻的单位三角形。显然，每个单位三角形有三个相邻的单位三角形。现在，把 $1\\sim 4n^2$ 里的所有整数分别随机填入四个面总共 $4n^2$ 个单位三角形中。\n\n现在要求你编程求由单位三角形组成的最大二叉搜索树。所谓最大二叉搜索树，是指在所有由单位三角形组成的二叉搜索树中节点最多的一棵树。要求当 $i$ 作为二叉搜索树的一个节点时，$i$ 的儿子（如果有的话）和 $i$ 的父亲（如果有的话）必须与 $i$ 有邻边（三棱锥状态下的邻边，而非展开图的邻边）。\n\n一棵二叉搜索树满足这个节点的左子树得每个值全部小于这个节点，这个节点的右子树的每个值全部大于这个节点。", "inputFormat": "输入的第一行为一个整数 $n$，表示展开图中每个面的三角形边长，也就是这个面有 $n^2$ 个单位三角形。\n\n接下来每行 $n^2$ 个整数，一共四行，第一行表示 $A$ 面的单位三角形中填入的数，第二行表示 $B$ 面，以此类推。", "outputFormat": "输出仅一行一个整数，表示最大二叉搜索树的节点个数。", "hint": "### 样例解释\n\n以下以 $A$ 面为例。记 $f(A,x)$ 表示 $A$ 面的第 $x$ 个单位三角形，以此类推。\n\n$f(A,9)$ 与 $f(D,1)$ 有邻边，$f(A,7)$ 与 $f(D,2)$ 有邻边，$f(A,5)$ 与 $f(D,5)$ 有邻边。\n\n$f(A,1)$ 与 $f(B,1)$ 有邻边，$f(A,4)$ 与 $f(B,2)$ 有邻边，$f(A,9)$ 与 $f(B,5)$ 有邻边。\n\n$f(A,1)$ 与 $f(C,1)$ 有邻边，$f(A,2)$ 与 $f(C,4)$ 有邻边，$f(A,5)$ 与 $f(C,9)$ 有邻边。\n\n以数字 $1$ 为二叉搜索树的根，可以得到节点最多的二叉搜索树为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2y8i07id.png)\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 18$，保证四个面所有单位三角形上填入的数互不相同且都取自 $[1,4n^2]$。", "locale": "zh-CN", "translations": {"en": {"title": "Binary Search Tree", "background": "", "description": "An equilateral triangle with side length $n$ can be partitioned into $n^2$ small equilateral triangles of side length $1$, called unit triangles. An equilateral triangle with side length $3$ is divided into three layers for a total of $9$ small triangles, which we number $1\\sim 9$ from top to bottom and left to right; see the figure below.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mzls92cx.png)\n\nFour such equilateral triangles of side length $n$ can form a regular tetrahedron. We number the three side faces of the tetrahedron, in clockwise order as seen from top to bottom, as $A, B, C$, and the base as $D$. On side faces $A, B, C$, triangle $1$ has the tetrahedron’s apex as its top vertex; on the base face $D$, triangle $1$ has as its top vertex the point where it meets faces $A$ and $B$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yyqpdocn.png)\n\nHere, $\\tt .$ marks the position of triangle $1$ on that face, and the rest are numbered in order accordingly.\n\nThe above is the unfolded net of the tetrahedron. The dotted point on each face marks that face’s top vertex. Folding side faces $A, B, C$ inward reconstructs the tetrahedron. We partition each face $A, B, C, D$ into $n^2$ unit triangles.\n\nTwo unit triangles are adjacent if they share an edge. Clearly, each unit triangle has three adjacent unit triangles. Now, place all integers from $1$ to $4n^2$ randomly into the $4n^2$ unit triangles across the four faces, one number per unit triangle.\n\nYou are to compute the maximum binary search tree formed by unit triangles. The maximum binary search tree is the one with the largest number of nodes among all binary search trees formed by unit triangles. The requirement is that when $i$ is a node of the binary search tree, its children (if any) and its parent (if any) must be adjacent to $i$ by a shared edge in the folded tetrahedron (not adjacency in the unfolded net).\n\nA binary search tree satisfies that every value in a node’s left subtree is strictly less than that node’s value, and every value in the right subtree is strictly greater than that node’s value.", "inputFormat": "The first line contains an integer $n$, the side length of each triangular face in the unfolded net, i.e., each face has $n^2$ unit triangles.\n\nThen follow four lines, each containing $n^2$ integers: the first line gives the numbers on face $A$, the second on face $B$, and so on.", "outputFormat": "Output a single integer, the number of nodes in the maximum binary search tree.", "hint": "### Sample explanation\n\nTake face $A$ as an example. Let $f(A, x)$ denote the $x$-th unit triangle on face $A$, and similarly for other faces.\n\n$f(A,9)$ is adjacent to $f(D,1)$, $f(A,7)$ is adjacent to $f(D,2)$, and $f(A,5)$ is adjacent to $f(D,5)$.\n\n$f(A,1)$ is adjacent to $f(B,1)$, $f(A,4)$ is adjacent to $f(B,2)$, and $f(A,9)$ is adjacent to $f(B,5)$.\n\n$f(A,1)$ is adjacent to $f(C,1)$, $f(A,2)$ is adjacent to $f(C,4)$, and $f(A,5)$ is adjacent to $f(C,9)$.\n\nTaking the number $1$ as the root, one maximum binary search tree is:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2y8i07id.png)\n\n### Constraints\n\nFor $100\\%$ of the testdata, $1\\leqslant n\\leqslant 18$. All numbers on the four faces are distinct and are drawn from $[1,4n^2]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "排序二叉树", "background": "", "description": "一个边长为 $n$ 的正三角形可以被划分成 $n^2$ 个小的边长为 $1$ 的正三角形，称为单位三角形。边长为 $3$ 的正三角形被分成三层共 $9$ 个小的正三角形，我们把它们从顶到底，从左到右以 $1\\sim 9$ 编号，见下图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mzls92cx.png)\n\n四个这样的边长为 $n$ 的正三角形可以组成一个三棱锥。我们将正三棱锥的三个侧面依顺时针次序（从顶向底视角）编号为 $A,B,C$，底面编号为 $D$。侧面的 $A,B,C$ 号三角形以三棱锥的顶点为顶，底面的 $D$ 号三角形以它与 $A,B$ 三角形的交点为顶。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yyqpdocn.png)\n\n其中 $\\tt .$ 表示这个三角形面的 $1$ 号三角形位置，并依次编号下去。\n\n上图为三棱锥展开后的平面图，每个面上标有圆点的是该面的顶，该图中侧面 $A,B,C$ 分别向纸内方向折叠即可还原成三棱锥。我们把这 $A,B,C,D$ 四个面各自划分成 $n^2$ 个单位三角形。\n\n对于任意两个单位三角形，如有一条边相邻，则称它们为相邻的单位三角形。显然，每个单位三角形有三个相邻的单位三角形。现在，把 $1\\sim 4n^2$ 里的所有整数分别随机填入四个面总共 $4n^2$ 个单位三角形中。\n\n现在要求你编程求由单位三角形组成的最大二叉搜索树。所谓最大二叉搜索树，是指在所有由单位三角形组成的二叉搜索树中节点最多的一棵树。要求当 $i$ 作为二叉搜索树的一个节点时，$i$ 的儿子（如果有的话）和 $i$ 的父亲（如果有的话）必须与 $i$ 有邻边（三棱锥状态下的邻边，而非展开图的邻边）。\n\n一棵二叉搜索树满足这个节点的左子树得每个值全部小于这个节点，这个节点的右子树的每个值全部大于这个节点。", "inputFormat": "输入的第一行为一个整数 $n$，表示展开图中每个面的三角形边长，也就是这个面有 $n^2$ 个单位三角形。\n\n接下来每行 $n^2$ 个整数，一共四行，第一行表示 $A$ 面的单位三角形中填入的数，第二行表示 $B$ 面，以此类推。", "outputFormat": "输出仅一行一个整数，表示最大二叉搜索树的节点个数。", "hint": "### 样例解释\n\n以下以 $A$ 面为例。记 $f(A,x)$ 表示 $A$ 面的第 $x$ 个单位三角形，以此类推。\n\n$f(A,9)$ 与 $f(D,1)$ 有邻边，$f(A,7)$ 与 $f(D,2)$ 有邻边，$f(A,5)$ 与 $f(D,5)$ 有邻边。\n\n$f(A,1)$ 与 $f(B,1)$ 有邻边，$f(A,4)$ 与 $f(B,2)$ 有邻边，$f(A,9)$ 与 $f(B,5)$ 有邻边。\n\n$f(A,1)$ 与 $f(C,1)$ 有邻边，$f(A,2)$ 与 $f(C,4)$ 有邻边，$f(A,5)$ 与 $f(C,9)$ 有邻边。\n\n以数字 $1$ 为二叉搜索树的根，可以得到节点最多的二叉搜索树为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2y8i07id.png)\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 18$，保证四个面所有单位三角形上填入的数互不相同且都取自 $[1,4n^2]$。", "locale": "zh-CN"}}}
{"pid": "P1268", "type": "P", "difficulty": 4, "samples": [["5\n5 9 12 8\n8 11 7\n5 1\n4\n", "15\n\n"], ["4\n15 36 60\n31 55\n36", "71"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["树形数据结构", "枚举", "构造"], "title": "树的重量", "background": "", "description": "树可以用来表示物种之间的进化关系。一棵“进化树”是一个带边权的树，其叶节点表示一个物种，两个叶节点之间的距离表示两个物种的差异。现在，一个重要的问题是，根据物种之间的距离，重构相应的“进化树”。\n\n令 $N=\\{1,2,3,\\cdots ,n\\}$，用一个 $N$ 上的矩阵 $M$ 来定义树 $T$。其中，矩阵 $M$ 满足：对于任意的 $i$，$j$，$k$，有 $M[i,j]+M[j,k] \\ge M[i,k]$。树 $T$ 满足：\n\n1. 叶节点属于集合 $N$；\n2. 边权均为非负整数；\n3. $d_T(i,j)=M[i,j]$，其中 $d_T(i,j)$ 表示树上 $i$ 到 $j$ 的最短路径长度。\n\n如下图，矩阵 $M$ 描述了一棵树。\n\n$$M=\\begin{bmatrix}\n0 & 5 & 9 & 12 & 8 \\\\\n5 & 0 & 8 & 11 & 7 \\\\\n9 & 8 & 0 & 5 & 1 \\\\\n12 & 11 & 5 & 0 & 4 \\\\\n8 & 7 & 1 & 4 & 0 \\\\\n\\end{bmatrix}$$\n\n树的重量是指树上所有边权之和。对于任意给出的合法矩阵 $M$，它所能表示树的重量是惟一确定的，不可能找到两棵不同重量的树，它们都符合矩阵 $M$。你的任务就是，根据给出的矩阵 $M$，计算 $M$ 所表示树的重量。下图是上面给出的矩阵 $M$ 所能表示的一棵树，这棵树的总重量为 $15$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dnk8ys2t.png)\n", "inputFormat": "第一行是一个整数 $n\\ (2<n<30)$。\n\n其后 $n-1$ 行，给出的是矩阵 $M$ 的一个上三角（不包含对角线），矩阵中所有元素是不超过 $100$ 的非负整数。输入数据保证合法。", "outputFormat": "对于每组输入，输出一行，一个整数，表示树的重量。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Weight of a Tree", "background": "", "description": "Trees can be used to represent evolutionary relationships among species. An \"evolutionary tree\" is a tree with edge weights, where each leaf node represents a species, and the distance between two leaves represents the difference between the two species. Now, an important problem is to reconstruct the corresponding \"evolutionary tree\" from the distances between species.\n\nLet $N=\\{1,2,3,\\cdots ,n\\}$, and use a matrix $M$ on $N$ to define a tree $T$. The matrix $M$ satisfies: for any $i$, $j$, $k$, we have $M[i,j]+M[j,k] \\ge M[i,k]$. The tree $T$ satisfies:\n1. The leaves are the elements of $N$.\n2. All edge weights are non-negative integers.\n3. $d_T(i,j)=M[i,j]$, where $d_T(i,j)$ denotes the length of the shortest path between $i$ and $j$ in the tree.\n\nAs shown below, the matrix $M$ describes a tree.\n\n$$M=\\begin{bmatrix}\n0 & 5 & 9 & 12 & 8 \\\\\n5 & 0 & 8 & 11 & 7 \\\\\n9 & 8 & 0 & 5 & 1 \\\\\n12 & 11 & 5 & 0 & 4 \\\\\n8 & 7 & 1 & 4 & 0 \\\\\n\\end{bmatrix}$$\n\nThe weight of a tree is the sum of all edge weights in the tree. For any valid matrix $M$, the total weight of the tree it represents is uniquely determined. It is impossible to find two trees with different total weights that are both consistent with $M$. Your task is to compute the weight of the tree represented by the given matrix $M$. The figure below shows one tree represented by the above matrix $M$, and the total weight of this tree is $15$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dnk8ys2t.png)", "inputFormat": "The first line contains an integer $n$ with $2<n<30$.\n\nThen $n-1$ lines follow, giving the strict upper triangular part of matrix $M$ (excluding the diagonal). All entries in the matrix are non-negative integers not exceeding $100$. The input is guaranteed to be valid. Matrix $M$ is symmetric with zeros on the diagonal. On the $i$-th of the next $n-1$ lines ($1 \\le i \\le n-1$), there are $n-i$ integers: $M[i, i+1], M[i, i+2], \\ldots, M[i, n]$.", "outputFormat": "Output one line containing a single integer, the total weight of the tree.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "树的重量", "background": "", "description": "树可以用来表示物种之间的进化关系。一棵“进化树”是一个带边权的树，其叶节点表示一个物种，两个叶节点之间的距离表示两个物种的差异。现在，一个重要的问题是，根据物种之间的距离，重构相应的“进化树”。\n\n令 $N=\\{1,2,3,\\cdots ,n\\}$，用一个 $N$ 上的矩阵 $M$ 来定义树 $T$。其中，矩阵 $M$ 满足：对于任意的 $i$，$j$，$k$，有 $M[i,j]+M[j,k] \\ge M[i,k]$。树 $T$ 满足：\n\n1. 叶节点属于集合 $N$；\n2. 边权均为非负整数；\n3. $d_T(i,j)=M[i,j]$，其中 $d_T(i,j)$ 表示树上 $i$ 到 $j$ 的最短路径长度。\n\n如下图，矩阵 $M$ 描述了一棵树。\n\n$$M=\\begin{bmatrix}\n0 & 5 & 9 & 12 & 8 \\\\\n5 & 0 & 8 & 11 & 7 \\\\\n9 & 8 & 0 & 5 & 1 \\\\\n12 & 11 & 5 & 0 & 4 \\\\\n8 & 7 & 1 & 4 & 0 \\\\\n\\end{bmatrix}$$\n\n树的重量是指树上所有边权之和。对于任意给出的合法矩阵 $M$，它所能表示树的重量是惟一确定的，不可能找到两棵不同重量的树，它们都符合矩阵 $M$。你的任务就是，根据给出的矩阵 $M$，计算 $M$ 所表示树的重量。下图是上面给出的矩阵 $M$ 所能表示的一棵树，这棵树的总重量为 $15$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dnk8ys2t.png)\n", "inputFormat": "第一行是一个整数 $n\\ (2<n<30)$。\n\n其后 $n-1$ 行，给出的是矩阵 $M$ 的一个上三角（不包含对角线），矩阵中所有元素是不超过 $100$ 的非负整数。输入数据保证合法。", "outputFormat": "对于每组输入，输出一行，一个整数，表示树的重量。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1269", "type": "P", "difficulty": 5, "samples": [["4\n2 2 3 3 1\n2 1 3 4 2\n1 1 1\n1 2 2\n4", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "贪心", "树形数据结构", "树形 DP"], "title": "信号放大器", "background": null, "description": "树型网络是最节省材料的网络。所谓树型网络，是指一个无环的连通网络，网络中任意两个结点间有且仅有一条通信道路。\n\n网络中有一个结点是服务器，负责将信号直接或间接地发送到各终端机。如图上方，server 结点发出一个信号给结点 $a$ 和 $c$，$a$ 再转发给 $b$。如此，整个网络都收到这个信号了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e4vb2e7t.png)\n\n但是，实际操作中，信号从一个结点发到另一个结点，会出现信号强度的衰减。衰减量一般由线路长度决定。\n\n如图下方，边上所标的数字为边的衰减量。假设从 server 出发一个强度为 $4$ 个单位的信号，发到结点 $a$ 后强度衰减为 $4-3=1$ 个单位。结点 $a$ 再将其转发给结点 $b$。由于信号强度为 $1$，衰减量为 $2$，因此信号无法发送到 $b$。\n\n一个解决这一问题的方法是，安装信号放大器。信号放大器的作用是将强度大于零的信号还原成初始强度（从服务器出发时的强度）。\n\n上图中，若在结点 $a$ 处安装一个信号放大器，则强度为 $4$ 的信号发到 $a$ 处，即被放大至 $4$。这样，信号就可以被发送到网络中的任意一个节点了。为了简化问题，我们假定每个结点只处理一次信号，当它第二次收到某个信号时，就忽略此信号。\n\n你的任务是根据给出的树型网络，计算出最少需要安装的信号放大器数量。", "inputFormat": "第一行一个整数 $n$，表示网络中结点的数量。（$n \\le 20000$）\n\n第 $2 \\sim n+1$ 行，每行描述一个节点的连接关系。其中第 $i+1$ 行，描述的是结点 $i$ 的连接关系：首先一个整数 $k$，表示与结点 $i$ 相连的结点的数量。此后 $2k$ 个数，每两个描述一个与结点 $i$ 相连的结点，分别表示结点的编号（编号在 $1 \\sim n$ 之间）和该结点与结点 $i$ 之间的边的信号衰减量。结点 $1$ 表示服务器。\n\n最后一行，一个整数，表示从服务器上出发信号的强度。", "outputFormat": "一个整数，表示要使信号能够传遍整个网络，需要安装的最少的信号放大器数量。\n\n如果不论如何安装信号放大器，都无法使信号传遍整个网络，则输出 `No solution.`。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Signal Amplifier", "background": "", "description": "A tree network minimizes material use. A tree network is an acyclic connected network in which there is exactly one communication path between any two nodes.\n\nThere is one node in the network that is the server, responsible for sending a signal directly or indirectly to all terminals. As shown in the top figure, the server node sends a signal to nodes $a$ and $c$, and $a$ then forwards it to $b$. In this way, the entire network receives the signal.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e4vb2e7t.png)\n\nHowever, in practice, when a signal is sent from one node to another, its strength attenuates. The attenuation is generally determined by the length of the line.\n\nAs shown in the bottom figure, the numbers on the edges indicate the attenuation on those edges. Suppose a signal of strength $4$ units is emitted from the server; after reaching node $a$, the strength attenuates to $4-3=1$ unit. Node $a$ then forwards it to node $b$. Since the signal strength is $1$ and the attenuation is $2$, the signal cannot be delivered to $b$.\n\nOne way to solve this problem is to install signal amplifiers. A signal amplifier restores any signal with positive strength to the initial strength (the strength at the server when it is emitted).\n\nIn the figure above, if a signal amplifier is installed at node $a$, then when the signal of strength $4$ reaches $a$, it is amplified back to $4$. Thus, the signal can be delivered to any node in the network. To simplify the problem, we assume each node processes a signal at most once; when it receives the same signal a second time, it ignores it.\n\nYour task is to compute, for the given tree network, the minimum number of signal amplifiers that must be installed.", "inputFormat": "The first line contains an integer $n$, the number of nodes in the network ($n \\le 20000$).\n\nLines $2$ to $n+1$ each describe the connections of a node. Specifically, line $i+1$ describes node $i$: it starts with an integer $k$, the number of nodes adjacent to node $i$. Then follow $2k$ numbers, where each pair describes a neighbor of node $i$: the neighbor’s identifier (an integer between $1$ and $n$) and the attenuation on the edge between that neighbor and node $i$. Node $1$ is the server.\n\nThe last line contains one integer, the initial signal strength emitted by the server.", "outputFormat": "Output a single integer, the minimum number of signal amplifiers required to make the signal reach the entire network.\n\nIf it is impossible to make the signal reach the entire network no matter how the amplifiers are installed, output `No solution.`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "信号放大器", "background": null, "description": "树型网络是最节省材料的网络。所谓树型网络，是指一个无环的连通网络，网络中任意两个结点间有且仅有一条通信道路。\n\n网络中有一个结点是服务器，负责将信号直接或间接地发送到各终端机。如图上方，server 结点发出一个信号给结点 $a$ 和 $c$，$a$ 再转发给 $b$。如此，整个网络都收到这个信号了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e4vb2e7t.png)\n\n但是，实际操作中，信号从一个结点发到另一个结点，会出现信号强度的衰减。衰减量一般由线路长度决定。\n\n如图下方，边上所标的数字为边的衰减量。假设从 server 出发一个强度为 $4$ 个单位的信号，发到结点 $a$ 后强度衰减为 $4-3=1$ 个单位。结点 $a$ 再将其转发给结点 $b$。由于信号强度为 $1$，衰减量为 $2$，因此信号无法发送到 $b$。\n\n一个解决这一问题的方法是，安装信号放大器。信号放大器的作用是将强度大于零的信号还原成初始强度（从服务器出发时的强度）。\n\n上图中，若在结点 $a$ 处安装一个信号放大器，则强度为 $4$ 的信号发到 $a$ 处，即被放大至 $4$。这样，信号就可以被发送到网络中的任意一个节点了。为了简化问题，我们假定每个结点只处理一次信号，当它第二次收到某个信号时，就忽略此信号。\n\n你的任务是根据给出的树型网络，计算出最少需要安装的信号放大器数量。", "inputFormat": "第一行一个整数 $n$，表示网络中结点的数量。（$n \\le 20000$）\n\n第 $2 \\sim n+1$ 行，每行描述一个节点的连接关系。其中第 $i+1$ 行，描述的是结点 $i$ 的连接关系：首先一个整数 $k$，表示与结点 $i$ 相连的结点的数量。此后 $2k$ 个数，每两个描述一个与结点 $i$ 相连的结点，分别表示结点的编号（编号在 $1 \\sim n$ 之间）和该结点与结点 $i$ 之间的边的信号衰减量。结点 $1$ 表示服务器。\n\n最后一行，一个整数，表示从服务器上出发信号的强度。", "outputFormat": "一个整数，表示要使信号能够传遍整个网络，需要安装的最少的信号放大器数量。\n\n如果不论如何安装信号放大器，都无法使信号传遍整个网络，则输出 `No solution.`。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1270", "type": "P", "difficulty": 5, "samples": [["60\n7 0 8 0 3 1 14 2 10 0 12 4 6 2\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "树形数据结构", "树形 DP"], "title": "“访问”美术馆", "background": "", "description": "经过数月的精心准备，Peer Brelstet，一个出了名的盗画者，准备开始他的下一个行动。艺术馆的结构，每条走廊要么分叉为两条走廊，要么通向一个展览室。Peer 知道每个展室里藏画的数量，并且他精确测量了通过每条走廊的时间。由于经验老到，他拿下一幅画需要 $5$ 秒的时间。你的任务是编一个程序，计算在警察赶来之前，他最多能偷到多少幅画。假定他回到起点后还需要留至少 $1$ 秒逃跑。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7kbyjwgy.png)\n", "inputFormat": "第一行是警察赶到的时间，以秒为单位。第 $2$ 行描述了艺术馆的结构，是一串非负整数，成对地出现：每一对的第一个数是走过一条走廊的时间，第 $2$ 个数是它末端的藏画数量；如果第 $2$ 个数是 $0$，那么说明这条走廊分叉为两条另外的走廊。数据按照深度优先的次序给出，请看样例。\n\n一个展室最多有 $20$ 幅画。通过每个走廊的时间不超过 $20$ 秒。艺术馆最多有 $100$ 个展室。警察赶到的时间在 $6000$ 秒以内。", "outputFormat": "输出最多能偷到的画的数量。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "\"Visiting\" the Art Museum", "background": "", "description": "After months of meticulous preparation, Peer Brelstet, a notorious art thief, is ready for his next move. The art museum is structured so that each corridor either splits into two corridors or leads to an exhibition room. Peer knows how many paintings are hidden in each room, and he has measured precisely the time to traverse each corridor. Since he is experienced, taking one painting takes $ 5 $ seconds. Your task is to write a program to compute the maximum number of paintings he can steal before the police arrive. Assume that after returning to the starting point, he still has at least $ 1 $ second left to escape.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7kbyjwgy.png)", "inputFormat": "The first line is the time when the police arrive, in seconds.  \nThe second line describes the structure of the art museum as a sequence of non-negative integers given in pairs: in each pair, the first number is the time to traverse a corridor, and the second number is the number of paintings at its end; if the second number is $ 0 $, it means this corridor branches into two other corridors. The data are given in depth-first order; see the sample.\n\nA room contains at most $ 20 $ paintings.  \nThe time to traverse any corridor does not exceed $ 20 $ seconds.  \nThe art museum has at most $ 100 $ rooms.  \nThe police arrival time is no more than $ 6000 $ seconds.", "outputFormat": "Output the maximum number of paintings he can steal.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "“访问”美术馆", "background": "", "description": "经过数月的精心准备，Peer Brelstet，一个出了名的盗画者，准备开始他的下一个行动。艺术馆的结构，每条走廊要么分叉为两条走廊，要么通向一个展览室。Peer 知道每个展室里藏画的数量，并且他精确测量了通过每条走廊的时间。由于经验老到，他拿下一幅画需要 $5$ 秒的时间。你的任务是编一个程序，计算在警察赶来之前，他最多能偷到多少幅画。假定他回到起点后还需要留至少 $1$ 秒逃跑。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7kbyjwgy.png)\n", "inputFormat": "第一行是警察赶到的时间，以秒为单位。第 $2$ 行描述了艺术馆的结构，是一串非负整数，成对地出现：每一对的第一个数是走过一条走廊的时间，第 $2$ 个数是它末端的藏画数量；如果第 $2$ 个数是 $0$，那么说明这条走廊分叉为两条另外的走廊。数据按照深度优先的次序给出，请看样例。\n\n一个展室最多有 $20$ 幅画。通过每个走廊的时间不超过 $20$ 秒。艺术馆最多有 $100$ 个展室。警察赶到的时间在 $6000$ 秒以内。", "outputFormat": "输出最多能偷到的画的数量。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1271", "type": "P", "difficulty": 2, "samples": [["5 10\n2 5 2 2 5 2 2 2 1 2", "1 2 2 2 2 2 2 2 5 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["排序"], "title": "【深基9.例1】选举学生会", "background": null, "description": "学校正在选举学生会成员，有 $n$（$1 \\le n\\le 999$）名候选人，每名候选人编号分别从 $1$ 到 $n$，现在收集到了 $m$（$1 \\le m \\le 2000000$）张选票，每张选票都写了一个候选人编号。现在想把这些堆积如山的选票按照投票数字从小到大排序。设第 $i$（$1 \\le i \\le m$）张选票上的数字为 $a_i$，则保证有 $1 \\le a_i \\le n$。", "inputFormat": "输入 $n$ 和 $m$ 以及 $m$ 个选票上的数字。", "outputFormat": "求出排序后的选票编号。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[Shenji 9. Example 1] Student Union Election", "background": "", "description": "The school is electing student union members. There are $n$ ($1 \\le n \\le 999$) candidates, and each candidate is numbered from $1$ to $n$. Now $m$ ($1 \\le m \\le 2000000$) ballots have been collected, and each ballot has a candidate number written on it. Now we want to sort this mountain of ballots in ascending order by the vote number. Let the number on the $i$-th ($1 \\le i \\le m$) ballot be $a_i$, and it is guaranteed that $1 \\le a_i \\le n$.", "inputFormat": "Input $n$ and $m$, followed by the numbers on the $m$ ballots.", "outputFormat": "Output the ballot numbers after sorting.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基9.例1】选举学生会", "background": null, "description": "学校正在选举学生会成员，有 $n$（$1 \\le n\\le 999$）名候选人，每名候选人编号分别从 $1$ 到 $n$，现在收集到了 $m$（$1 \\le m \\le 2000000$）张选票，每张选票都写了一个候选人编号。现在想把这些堆积如山的选票按照投票数字从小到大排序。设第 $i$（$1 \\le i \\le m$）张选票上的数字为 $a_i$，则保证有 $1 \\le a_i \\le n$。", "inputFormat": "输入 $n$ 和 $m$ 以及 $m$ 个选票上的数字。", "outputFormat": "求出排序后的选票编号。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1272", "type": "P", "difficulty": 5, "samples": [["11 6\n1 2\n1 3\n1 4\n1 5\n2 6\n2 7\n2 8\n4 9\n4 10\n4 11\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "树形 DP"], "title": "重建道路", "background": null, "description": "一场可怕的地震后，人们用 $N$ 个牲口棚（编号 $1\\sim N$）重建了农夫 John 的牧场。由于人们没有时间建设多余的道路，所以现在从一个牲口棚到另一个牲口棚的道路是唯一的。因此，牧场运输系统可以被构建成一棵树。\n\nJohn 想要知道另一次地震会造成多严重的破坏。有些道路一旦被毁坏，就会使一棵含有 $P$ 个牲口棚的子连通块和剩余的牲口棚分离，John 想知道这些道路的最小数目。", "inputFormat": "第一行两个整数，$N$ 和 $P$。\n\n第二行到第 $N$ 行，每行两个整数 $I$ 和 $J$，表示节点 $I$ 是节点 $J$ 的父节点。牧场运输系统可以被构建成一棵以 1 号节点为根的树。", "outputFormat": "单独一行，包含一旦被破坏将分离出恰含 $P$ 个节点的子连通块的道路的最小数目。", "hint": "### 样例解释\n\n如果道路 $1-4$ 和 $1-5$ 被破坏，含有节点（$1,2,3,6,7,8$）的子树将被分离出来。\n\n### 限制与约定\n\n$1\\le N\\le 150$，$1\\le P\\le N$，保证给出的是一棵树。", "locale": "zh-CN", "translations": {"en": {"title": "Rebuilding Roads", "background": "", "description": "After a terrible earthquake, people rebuilt Farmer John's ranch with $N$ barns (numbered $1 \\sim N$). Since there was no time to build extra roads, there is a unique path between any two barns. Therefore, the ranch road network forms a tree.\n\nJohn wants to know how severe the damage would be in another earthquake. Some roads, once destroyed, would separate a subtree containing $P$ barns from the remaining barns. John wants to know the minimum number of such roads.", "inputFormat": "The first line contains two integers, $N$ and $P$.\n\nFrom the second line to the $N$-th line (i.e., $N - 1$ lines), each line contains two integers $I$ and $J$, indicating that node $I$ is the parent of node $J$. The road network can be built as a tree rooted at node $1$.", "outputFormat": "Output a single line containing the minimum number of roads whose destruction would separate a subtree with exactly $P$ nodes.", "hint": "Sample explanation:\nIf roads $1-4$ and $1-5$ are destroyed, the subtree containing nodes ($1, 2, 3, 6, 7, 8$) will be separated.\n\nConstraints:\n$1 \\le N \\le 150$, $1 \\le P \\le N$. It is guaranteed that the input forms a tree.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "重建道路", "background": null, "description": "一场可怕的地震后，人们用 $N$ 个牲口棚（编号 $1\\sim N$）重建了农夫 John 的牧场。由于人们没有时间建设多余的道路，所以现在从一个牲口棚到另一个牲口棚的道路是唯一的。因此，牧场运输系统可以被构建成一棵树。\n\nJohn 想要知道另一次地震会造成多严重的破坏。有些道路一旦被毁坏，就会使一棵含有 $P$ 个牲口棚的子连通块和剩余的牲口棚分离，John 想知道这些道路的最小数目。", "inputFormat": "第一行两个整数，$N$ 和 $P$。\n\n第二行到第 $N$ 行，每行两个整数 $I$ 和 $J$，表示节点 $I$ 是节点 $J$ 的父节点。牧场运输系统可以被构建成一棵以 1 号节点为根的树。", "outputFormat": "单独一行，包含一旦被破坏将分离出恰含 $P$ 个节点的子连通块的道路的最小数目。", "hint": "### 样例解释\n\n如果道路 $1-4$ 和 $1-5$ 被破坏，含有节点（$1,2,3,6,7,8$）的子树将被分离出来。\n\n### 限制与约定\n\n$1\\le N\\le 150$，$1\\le P\\le N$，保证给出的是一棵树。", "locale": "zh-CN"}}}
{"pid": "P1273", "type": "P", "difficulty": 4, "samples": [["5 3\r\n2 2 2 5 3\r\n2 3 2 4 3\r\n3 4 2", "2\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "树形数据结构", "递归", "背包 DP", "树形 DP"], "title": "有线电视网", "background": null, "description": "某收费有线电视网计划转播一场重要的足球比赛。他们的转播网和用户终端构成一棵树状结构，这棵树的根结点位于足球比赛的现场，树叶为各个用户终端，其他中转站为该树的内部节点。\n\n从转播站到转播站以及从转播站到所有用户终端的信号传输费用都是已知的，一场转播的总费用等于传输信号的费用总和。\n\n现在每个用户都准备了一笔费用想观看这场精彩的足球比赛，有线电视网有权决定给哪些用户提供信号而不给哪些用户提供信号。\n\n写一个程序找出一个方案使得有线电视网在不亏本的情况下使观看转播的用户尽可能多。", "inputFormat": "输入文件的第一行包含两个用空格隔开的整数 $N$ 和 $M$，其中 $2 \\le N \\le 3000$，$1 \\le M \\le N-1$，$N$ 为整个有线电视网的结点总数，$M$ 为用户终端的数量。\n\n第一个转播站即树的根结点编号为 $1$，其他的转播站编号为 $2$ 到 $N-M$，用户终端编号为 $N-M+1$ 到 $N$。\n\n接下来的 $N-M$ 行每行表示—个转播站的数据，第 $i+1$ 行表示第 $i$ 个转播站的数据，其格式如下：\n\n$K \\ \\ A_1 \\ \\ C_1 \\ \\ A_2 \\ \\ C_2 \\ \\ \\ldots \\ \\ A_k \\ \\ C_k$\n\n$K$ 表示该转播站下接 $K$ 个结点（转播站或用户），每个结点对应一对整数 $A$ 与 $C$ ，$A$ 表示结点编号，$C$ 表示从当前转播站传输信号到结点 $A$ 的费用。最后一行依次表示所有用户为观看比赛而准备支付的钱数。单次传输成本和用户愿意交的费用均不超过 $10$。\n\n[](https://paste.ubuntu.com/p/xN9NRmYvpY/)", "outputFormat": "输出文件仅一行，包含一个整数，表示上述问题所要求的最大用户数。", "hint": "**样例解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7yj4u55m.png)\n\n如图所示，共有五个结点。结点 ① 为根结点，即现场直播站，② 为一个中转站，③④⑤ 为用户端，共 $M$ 个，编号从 $N-M+1$ 到 $N$，他们为观看比赛分别准备的钱数为 $3$、$4$、$2$。\n\n从结点 ① 可以传送信号到结点 ②，费用为 $2$；\n\n也可以传送信号到结点 ⑤，费用为 $3$（第二行数据所示）；\n\n从结点 ② 可以传输信号到结点 ③，费用为$2$；\n\n也可传输信号到结点 ④，费用为 $3$（第三行数据所示）。\n\n如果要让所有用户（③④⑤）都能看上比赛，则信号传输的总费用为：$2+3+2+3=10$，大于用户愿意支付的总费用 $3+4+2=9$，有线电视网就亏本了，而只让 ③④ 两个用户看比赛就不亏本了。\n\n[](https://paste.ubuntu.com/p/H9BMGJvFHH/)", "locale": "zh-CN", "translations": {"en": {"title": "Cable Television Network", "background": "", "description": "A pay cable television network plans to rebroadcast an important football match. Their rebroadcast network and user terminals form a tree structure. The root of the tree is located at the match venue, the leaves are user terminals, and the other relay stations are internal nodes of the tree.\n\nThe signal transmission costs from relay station to relay station and from relay station to user terminals are known. The total cost of one broadcast equals the sum of all transmission costs used.\n\nEach user has prepared a certain amount of money to watch the match. The cable network has the right to decide which users receive the signal and which do not.\n\nWrite a program to find a plan that allows the cable network to serve as many users as possible without incurring a loss.", "inputFormat": "The first line contains two integers $N$ and $M$ separated by a space, where $2 \\le N \\le 3000$, $1 \\le M \\le N - 1$. Here $N$ is the total number of nodes in the entire cable network, and $M$ is the number of user terminals.\n\nThe first relay station (the root of the tree) is numbered $1$. The other relay stations are numbered from $2$ to $N - M$. The user terminals are numbered from $N - M + 1$ to $N$.\n\nThe next $N - M$ lines each describe one relay station. The $(i + 1)$-th line describes relay station $i$ in the following format:\n\n$K \\ \\ A_1 \\ \\ C_1 \\ \\ A_2 \\ \\ C_2 \\ \\ \\ldots \\ \\ A_k \\ \\ C_k$\n\n$K$ indicates that this relay station has $K$ direct children (relay stations or users). Each child is given by a pair of integers $A$ and $C$, where $A$ is the child node number, and $C$ is the transmission cost from the current relay station to node $A$.\n\nThe last line contains, in order, the amounts of money each user is willing to pay to watch the match. Each single transmission cost and each user's payment do not exceed $10$.", "outputFormat": "Output a single integer on one line: the maximum number of users that can be served without the network incurring a loss.", "hint": "Sample explanation:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7yj4u55m.png)\n\nAs shown in the figure, there are five nodes in total. Node 1 is the root node, i.e., the live broadcast station. Node 2 is a relay station. Nodes 3, 4, 5 are user terminals, $M$ in total, numbered from $N - M + 1$ to $N$. They are willing to pay $3$, $4$, and $2$, respectively.\n\nFrom node 1, the signal can be sent to node 2 at a cost of $2$;\nit can also be sent to node 5 at a cost of $3$ (as shown by the second line of data).\nFrom node 2, the signal can be sent to node 3 at a cost of $2$;\nit can also be sent to node 4 at a cost of $3$ (as shown by the third line of data).\n\nIf all users (3, 4, 5) are to watch the match, the total transmission cost is $2 + 3 + 2 + 3 = 10$, which is greater than the total amount users are willing to pay $3 + 4 + 2 = 9$, so the cable network would incur a loss. If only users 3 and 4 watch the match, then there is no loss.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "有线电视网", "background": null, "description": "某收费有线电视网计划转播一场重要的足球比赛。他们的转播网和用户终端构成一棵树状结构，这棵树的根结点位于足球比赛的现场，树叶为各个用户终端，其他中转站为该树的内部节点。\n\n从转播站到转播站以及从转播站到所有用户终端的信号传输费用都是已知的，一场转播的总费用等于传输信号的费用总和。\n\n现在每个用户都准备了一笔费用想观看这场精彩的足球比赛，有线电视网有权决定给哪些用户提供信号而不给哪些用户提供信号。\n\n写一个程序找出一个方案使得有线电视网在不亏本的情况下使观看转播的用户尽可能多。", "inputFormat": "输入文件的第一行包含两个用空格隔开的整数 $N$ 和 $M$，其中 $2 \\le N \\le 3000$，$1 \\le M \\le N-1$，$N$ 为整个有线电视网的结点总数，$M$ 为用户终端的数量。\n\n第一个转播站即树的根结点编号为 $1$，其他的转播站编号为 $2$ 到 $N-M$，用户终端编号为 $N-M+1$ 到 $N$。\n\n接下来的 $N-M$ 行每行表示—个转播站的数据，第 $i+1$ 行表示第 $i$ 个转播站的数据，其格式如下：\n\n$K \\ \\ A_1 \\ \\ C_1 \\ \\ A_2 \\ \\ C_2 \\ \\ \\ldots \\ \\ A_k \\ \\ C_k$\n\n$K$ 表示该转播站下接 $K$ 个结点（转播站或用户），每个结点对应一对整数 $A$ 与 $C$ ，$A$ 表示结点编号，$C$ 表示从当前转播站传输信号到结点 $A$ 的费用。最后一行依次表示所有用户为观看比赛而准备支付的钱数。单次传输成本和用户愿意交的费用均不超过 $10$。\n\n[](https://paste.ubuntu.com/p/xN9NRmYvpY/)", "outputFormat": "输出文件仅一行，包含一个整数，表示上述问题所要求的最大用户数。", "hint": "**样例解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7yj4u55m.png)\n\n如图所示，共有五个结点。结点 ① 为根结点，即现场直播站，② 为一个中转站，③④⑤ 为用户端，共 $M$ 个，编号从 $N-M+1$ 到 $N$，他们为观看比赛分别准备的钱数为 $3$、$4$、$2$。\n\n从结点 ① 可以传送信号到结点 ②，费用为 $2$；\n\n也可以传送信号到结点 ⑤，费用为 $3$（第二行数据所示）；\n\n从结点 ② 可以传输信号到结点 ③，费用为$2$；\n\n也可传输信号到结点 ④，费用为 $3$（第三行数据所示）。\n\n如果要让所有用户（③④⑤）都能看上比赛，则信号传输的总费用为：$2+3+2+3=10$，大于用户愿意支付的总费用 $3+4+2=9$，有线电视网就亏本了，而只让 ③④ 两个用户看比赛就不亏本了。\n\n[](https://paste.ubuntu.com/p/H9BMGJvFHH/)", "locale": "zh-CN"}}}
{"pid": "P1274", "type": "P", "difficulty": 4, "samples": [["1 1\n", "1 4 13 16 \n14 15 2 3 \n8 5 12 9 \n11 10 7 6 \n\n1 4 13 16 \n14 15 2 3 \n12 9 8 5 \n7 6 11 10 \n\n……剩余214组合法解省略"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "魔术数字游戏", "background": "", "description": "填数字方格的游戏有很多种变化，如下图所示的 $4 \\times 4$ 方格中，我们要选择从数字 $1$ 到 $16$ 来填满这十六个格子($A_{i,j}$ ，其中 $i=1 \\cdots 4$ ，$j=1 \\cdots 4$)。为了让游戏更有挑战性，我们要求下列六项中的每一项所指定的四个格子，其数字累加的和必须为 $34$ ：\n\n| $A_{1,1}$ | $A_{1,2}$ | $A_{1,3}$ |  $A_{1,4}$|\n| :----------- | :----------- | :----------- | :----------- |\n| $A_{2,1}$ | $A_{2,2}$ | $A_{2,3}$ | $A_{2,4}$ |\n| $A_{3,1}$ | $A_{3,2}$ | $A_{3,3}$ | $A_{3,4}$ |\n| $A_{4,1}$ | $A_{4,2}$ | $A_{4,3}$ | $A_{4,4}$ |\n\n- 四个角落上的数字，即 $A_{1,1}+A_{1,4}+A_{4,1}+A_{4,4}=34$ 。\n- 每个角落上的 $2 \\times 2$ 方格中的数字，例如左上角 $A_{1,1}+A_{1,2}+A_{2,1}+A_{2,2}=34$ 。\n- 最中间的 $2 \\times 2$ 方格中的数字，即 $A_{2,2}+A_{2,3}+A_{3,2}+A_{3,3}=34$ 。\n- 每条水平线上四个格子中的数字，即 $A_{i,1}+A_{i,2}+A_{i,3}+A_{i,4}=34$，其中 $i=1 \\cdots 4$ 。\n- 每条垂直线上四个格子中的数字，即 $A_{1,j}+A_{2,j}+A_{3,j}+A_{4,j}=34$，其中 $j=1 \\cdots 4$ 。\n- 两条对角线上四个格子中的数字，例如左上角到右下角 $A_{1,1}+A_{2,2}+A_{3,3}+A_{4,4}=34$ 。\n- 右上角到左下角：$A_{1,4}+A_{2,3}+A_{3,2}+A_{4,1}=34$ 。\n\n特别的，我们会指定把数字 $1$ 先固定在某一格内。", "inputFormat": "输入只有一行包含两个正数据 $i$ 和 $j$ ，表示第 $i$ 行和第 $j$ 列的格子放数字 $1$。剩下的十五个格子，请按照前述六项条件用数字 $2$ 到 $16$ 来填满。", "outputFormat": "输出所有合法解，并且依序排好。相邻两组合法解之间用一个空行隔开。\n\n对于每一组合法解，输出四行，每行四个数，相邻两数之间用一个空格隔开。\n\n合法解排序的方式，是先从第一行的数字开始比较，每一行数字，由最左边的数字开始比，数字较小的解答必须先输出到文件中。", "hint": "\n可以得到，对于样例，合理的填写方法有 $216$ 种，以上仅为其中的两种。\n\n#### 数据规模与约定 \n对于全部的测试点，保证 $1 \\leq i, j \\leq 4$。", "locale": "zh-CN", "translations": {"en": {"title": "Magic Number Game", "background": "", "description": "There are many variations of number-filling grid games. In the $4 \\times 4$ grid below, we are to fill the sixteen cells with the numbers $1$ through $16$ (cells $A_{i,j}$, where $i = 1 \\cdots 4$, $j = 1 \\cdots 4$). To make the game more challenging, we require that the four numbers specified in each of the following items must add up to $34$:\n\n| $A_{1,1}$ | $A_{1,2}$ | $A_{1,3}$ |  $A_{1,4}$|\n| :----------- | :----------- | :----------- | :----------- |\n| $A_{2,1}$ | $A_{2,2}$ | $A_{2,3}$ | $A_{2,4}$ |\n| $A_{3,1}$ | $A_{3,2}$ | $A_{3,3}$ | $A_{3,4}$ |\n| $A_{4,1}$ | $A_{4,2}$ | $A_{4,3}$ | $A_{4,4}$ |\n\n- The four corner cells: $A_{1,1}+A_{1,4}+A_{4,1}+A_{4,4}=34$.\n- Each $2 \\times 2$ block at a corner, for example the top-left: $A_{1,1}+A_{1,2}+A_{2,1}+A_{2,2}=34$.\n- The central $2 \\times 2$ block: $A_{2,2}+A_{2,3}+A_{3,2}+A_{3,3}=34$.\n- Each row: $A_{i,1}+A_{i,2}+A_{i,3}+A_{i,4}=34$, where $i = 1 \\cdots 4$.\n- Each column: $A_{1,j}+A_{2,j}+A_{3,j}+A_{4,j}=34$, where $j = 1 \\cdots 4$.\n- The two diagonals, for example the main diagonal from top-left to bottom-right: $A_{1,1}+A_{2,2}+A_{3,3}+A_{4,4}=34$.\n- From top-right to bottom-left: $A_{1,4}+A_{2,3}+A_{3,2}+A_{4,1}=34$.\n\nIn particular, we will fix the number $1$ in a specified cell.", "inputFormat": "The input contains a single line with two positive integers $i$ and $j$, indicating that the cell in row $i$ and column $j$ contains the number $1$. Fill the remaining fifteen cells with the numbers $2$ through $16$ according to the conditions above.", "outputFormat": "Output all valid solutions in increasing order, separated by a single empty line.\n\nFor each valid solution, output four lines, each containing four numbers separated by a single space.\n\nThe ordering of valid solutions is determined as follows: compare numbers starting from the first row; within each row, compare from the leftmost number. The solution with the smaller number at the first differing position must be printed first.", "hint": "For the sample, there are $216$ valid fillings.\n\nConstraints: For all test points, it is guaranteed that $1 \\leq i, j \\leq 4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "魔术数字游戏", "background": "", "description": "填数字方格的游戏有很多种变化，如下图所示的 $4 \\times 4$ 方格中，我们要选择从数字 $1$ 到 $16$ 来填满这十六个格子($A_{i,j}$ ，其中 $i=1 \\cdots 4$ ，$j=1 \\cdots 4$)。为了让游戏更有挑战性，我们要求下列六项中的每一项所指定的四个格子，其数字累加的和必须为 $34$ ：\n\n| $A_{1,1}$ | $A_{1,2}$ | $A_{1,3}$ |  $A_{1,4}$|\n| :----------- | :----------- | :----------- | :----------- |\n| $A_{2,1}$ | $A_{2,2}$ | $A_{2,3}$ | $A_{2,4}$ |\n| $A_{3,1}$ | $A_{3,2}$ | $A_{3,3}$ | $A_{3,4}$ |\n| $A_{4,1}$ | $A_{4,2}$ | $A_{4,3}$ | $A_{4,4}$ |\n\n- 四个角落上的数字，即 $A_{1,1}+A_{1,4}+A_{4,1}+A_{4,4}=34$ 。\n- 每个角落上的 $2 \\times 2$ 方格中的数字，例如左上角 $A_{1,1}+A_{1,2}+A_{2,1}+A_{2,2}=34$ 。\n- 最中间的 $2 \\times 2$ 方格中的数字，即 $A_{2,2}+A_{2,3}+A_{3,2}+A_{3,3}=34$ 。\n- 每条水平线上四个格子中的数字，即 $A_{i,1}+A_{i,2}+A_{i,3}+A_{i,4}=34$，其中 $i=1 \\cdots 4$ 。\n- 每条垂直线上四个格子中的数字，即 $A_{1,j}+A_{2,j}+A_{3,j}+A_{4,j}=34$，其中 $j=1 \\cdots 4$ 。\n- 两条对角线上四个格子中的数字，例如左上角到右下角 $A_{1,1}+A_{2,2}+A_{3,3}+A_{4,4}=34$ 。\n- 右上角到左下角：$A_{1,4}+A_{2,3}+A_{3,2}+A_{4,1}=34$ 。\n\n特别的，我们会指定把数字 $1$ 先固定在某一格内。", "inputFormat": "输入只有一行包含两个正数据 $i$ 和 $j$ ，表示第 $i$ 行和第 $j$ 列的格子放数字 $1$。剩下的十五个格子，请按照前述六项条件用数字 $2$ 到 $16$ 来填满。", "outputFormat": "输出所有合法解，并且依序排好。相邻两组合法解之间用一个空行隔开。\n\n对于每一组合法解，输出四行，每行四个数，相邻两数之间用一个空格隔开。\n\n合法解排序的方式，是先从第一行的数字开始比较，每一行数字，由最左边的数字开始比，数字较小的解答必须先输出到文件中。", "hint": "\n可以得到，对于样例，合理的填写方法有 $216$ 种，以上仅为其中的两种。\n\n#### 数据规模与约定 \n对于全部的测试点，保证 $1 \\leq i, j \\leq 4$。", "locale": "zh-CN"}}}
{"pid": "P1275", "type": "P", "difficulty": 5, "samples": [["2\r\n3 4\r\n0 1 0 1\r\n1 0 0 1\r\n0 0 0 0\r\n0 1 0 1\r\n1 1 0 0\r\n0 0 0 0\r\n2 2\r\n0 0\r\n0 1\r\n1 1\r\n1 1", "YES\r\nNO\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "魔板", "background": null, "description": "有这样一种魔板：它是一个长方形的面板，被划分成 $n$ 行 $m$ 列的 $n \\times m$ 个方格。每个方格内有一个小灯泡，灯泡的状态有两种（亮或暗）。我们可以通过若干操作使魔板从一个状态改变为另一个状态。操作的方式有两种：\n\n1. 任选一行，改变该行中所有灯泡的状态，即亮的变暗、暗的变亮；\n2. 任选两列，交换其位置。\n\n当然并不是任意的两种状态都可以通过若干操作来实现互相转化的。\n\n你的任务就是根据给定两个魔板状态，判断两个状态能否互相转化。", "inputFormat": "文件中包含多组数据。第一行一个整数 $k$（$0 < k \\leq 5$），表示有 $k$ 组数据。\n\n每组数据的第一行两个整数 $n$ 和 $m$（$0 < n,m \\leq 100$）。\n\n以下的 $n$ 行描述第一个魔板。每行有 $m$ 个数字（$0$ 或 $1$），中间用空格分隔。若第 $x$ 行的第 $y$个数字为 $0$，则表示魔板的第 $x$ 行 $y$ 列的灯泡为“亮”；否则为“暗”。\n\n然后的 $n$ 行描述第二个魔板。数据格式同上。\n\n任意两组数据间没有空行。", "outputFormat": "共 $k$ 行，依次描述每一组数据的结果。\n\n若两个魔板可以相互转化，则输出 $\\texttt{YES}$，否则输出 $\\texttt{NO}$。（注意：请使用大写字母）", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Magic Board", "background": "", "description": "There is a kind of magic board: it is a rectangular panel divided into $n$ rows and $m$ columns, forming $n \\times m$ cells. Each cell contains a small light bulb, and each bulb has two possible states (on or off). We can transform the board from one state to another using several operations. There are two types of operations:\n\n1. Choose any row and toggle the state of all bulbs in that row, i.e., on becomes off and off becomes on.\n2. Choose any two columns and swap their positions.\n\nOf course, not every pair of states can be transformed into each other through these operations.\n\nYour task is to determine whether two given board states can be transformed into each other.", "inputFormat": "The file contains multiple datasets. The first line contains an integer $k$ ($0 < k \\leq 5$), indicating there are $k$ datasets.\n\nFor each dataset, the first line contains two integers $n$ and $m$ ($0 < n, m \\leq 100$).\n\nThe next $n$ lines describe the first magic board. Each line contains $m$ numbers ($0$ or $1$), separated by spaces. If the $y$-th number in the $x$-th row is $0$, then the bulb at row $x$, column $y$ is \"on\"; otherwise it is \"off\".\n\nThe following $n$ lines describe the second magic board in the same format.\n\nThere are no blank lines between any two datasets.", "outputFormat": "Output $k$ lines, each describing the result for one dataset in order.\n\nIf the two boards can be transformed into each other, output $\\texttt{YES}$; otherwise, output $\\texttt{NO}$. (Note: please use uppercase letters.)", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "魔板", "background": null, "description": "有这样一种魔板：它是一个长方形的面板，被划分成 $n$ 行 $m$ 列的 $n \\times m$ 个方格。每个方格内有一个小灯泡，灯泡的状态有两种（亮或暗）。我们可以通过若干操作使魔板从一个状态改变为另一个状态。操作的方式有两种：\n\n1. 任选一行，改变该行中所有灯泡的状态，即亮的变暗、暗的变亮；\n2. 任选两列，交换其位置。\n\n当然并不是任意的两种状态都可以通过若干操作来实现互相转化的。\n\n你的任务就是根据给定两个魔板状态，判断两个状态能否互相转化。", "inputFormat": "文件中包含多组数据。第一行一个整数 $k$（$0 < k \\leq 5$），表示有 $k$ 组数据。\n\n每组数据的第一行两个整数 $n$ 和 $m$（$0 < n,m \\leq 100$）。\n\n以下的 $n$ 行描述第一个魔板。每行有 $m$ 个数字（$0$ 或 $1$），中间用空格分隔。若第 $x$ 行的第 $y$个数字为 $0$，则表示魔板的第 $x$ 行 $y$ 列的灯泡为“亮”；否则为“暗”。\n\n然后的 $n$ 行描述第二个魔板。数据格式同上。\n\n任意两组数据间没有空行。", "outputFormat": "共 $k$ 行，依次描述每一组数据的结果。\n\n若两个魔板可以相互转化，则输出 $\\texttt{YES}$，否则输出 $\\texttt{NO}$。（注意：请使用大写字母）", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1276", "type": "P", "difficulty": 2, "samples": [["10 3\n0 2 6\n1 1 8\n0 5 7\n", "3\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "校门外的树（增强版）", "background": "", "description": "校门外马路上本来从编号 $0$ 到 $L$，每一编号的位置都有一棵树。有砍树者每次从编号 $A$ 到 $B$ 处连续砍掉每一棵树，就连树苗也不放过（记 `0 A B`，含 $A$ 和 $B$）；幸运的是还有植树者每次从编号 $C$ 到 $D$ 中凡是空穴（树被砍且还没种上树苗或树苗又被砍掉）的地方都补种上树苗（记 `1 C D`，含 $C$ 和 $D$）；问最终校门外留下的树苗多少棵？植树者种上又被砍掉的树苗有多少棵？", "inputFormat": "第一行，两个正整数 $L$ 和 $N$，表示校园外原来有 $L + 1$ 棵树，并有 $N$ 次砍树或种树的操作。\n\n以下 $N$ 行，每行三个整数，表示砍树或植树的标记和范围。", "outputFormat": "共两行。第一行校门外留下的树苗数目，第二行种上又被拔掉的树苗数目。", "hint": "对于 $100 \\%$ 的数据，$1 \\le L \\le 10000$，$1 \\le N \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Trees Outside the School Gate (Enhanced Version)", "background": "", "description": "Along the road outside the school gate, positions are numbered from $0$ to $L$, and at every numbered position there is a tree. A lumberjack removes every tree or sapling continuously from position $A$ to $B$ inclusive (denoted as `0 A B`, including $A$ and $B$); fortunately, a planter plants a sapling at every empty hole from position $C$ to $D$ inclusive (denoted as `1 C D`, including $C$ and $D$), where an empty hole means a position where the tree has been cut and there is currently no sapling (or a previously planted sapling there has been cut again). After all operations, how many saplings remain outside the school gate? How many saplings that were planted were later cut down?", "inputFormat": "The first line contains two positive integers $L$ and $N$, meaning there were originally $L + 1$ trees outside the campus, and there are $N$ cutting or planting operations.\n\nEach of the following $N$ lines contains three integers, indicating the operation tag and its range.", "outputFormat": "Output two lines. The first line is the number of saplings remaining outside the school gate. The second line is the number of saplings that were planted and then cut down.", "hint": "For $100\\%$ of the testdata, $1 \\le L \\le 10000$, $1 \\le N \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "校门外的树（增强版）", "background": "", "description": "校门外马路上本来从编号 $0$ 到 $L$，每一编号的位置都有一棵树。有砍树者每次从编号 $A$ 到 $B$ 处连续砍掉每一棵树，就连树苗也不放过（记 `0 A B`，含 $A$ 和 $B$）；幸运的是还有植树者每次从编号 $C$ 到 $D$ 中凡是空穴（树被砍且还没种上树苗或树苗又被砍掉）的地方都补种上树苗（记 `1 C D`，含 $C$ 和 $D$）；问最终校门外留下的树苗多少棵？植树者种上又被砍掉的树苗有多少棵？", "inputFormat": "第一行，两个正整数 $L$ 和 $N$，表示校园外原来有 $L + 1$ 棵树，并有 $N$ 次砍树或种树的操作。\n\n以下 $N$ 行，每行三个整数，表示砍树或植树的标记和范围。", "outputFormat": "共两行。第一行校门外留下的树苗数目，第二行种上又被拔掉的树苗数目。", "hint": "对于 $100 \\%$ 的数据，$1 \\le L \\le 10000$，$1 \\le N \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P1277", "type": "P", "difficulty": 6, "samples": [["130 120 172 140 157 93 144 168 66 195 0 1 15 1 3 49 2 2 16 3 0 33", "22 15 28 65\n49 1 21 49\n53 76 16 27\n33 1 79 27\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "Special Judge"], "title": "拼字游戏", "background": "", "description": "有一个未知的 $4 \\times 4$ 的拼盘 $M$，它的每个元素都是正整数。给出 $4$ 行元素的总和，$4$ 列元素的总和以及两条对角线元素总和。另外还给出了拼盘中任意 $4$ 个位置的元素值，它们的位置在输入文件中给定。\n\n编写一个程序求出拼盘中另外 $12$ 个位置的正整数的值，要求这些元素的行之和，列之和以及对角线之和与输入文件中给定的值相一致。\n", "inputFormat": "输入文件包含用空格隔开的 $22$ 个正整数。\n\n前四个数字分别表示四行中每一行元素的总和，接下来的 $4$ 个数字分别表示 $4$ 列中每列元素的总和。接下来的数字表示主对角线元素的总和，即 $M(0, 0)+M(1,1)+M(2, 2)+M(3, 3)$。然后的数字（第 $10$ 个数字）表示逆对角线上元数之和，即 $M(0, 3)+M(1, 2)+M(2, 1)+M(3, 0)$ 。剩下的部分还包含 $12$ 个数字，被分成三个一组的形式 $i,j,k$。表示 $M(i,j)=k$。\n\n你可以假设任何行对角线或列之和不会超过 $300$。另外还可假设对于给定的输入文件总是存在解决方案。\n", "outputFormat": "输出文件应包含按 $4 \\times 4$ 的形式输出的 $16$ 个数字，同一行的四个数字用一个空个隔开。注意：对于给定的输入文件，可能有一个以上可能的解决方案。任何一个方案都是可接受的。\n", "hint": "- 对于 $10\\%$ 的数据，任何行，列或对角线之和不会超过 $20$；\n- 对于 $30\\%$ 的数据，任何行，列或对角线之和不会超过 $80$；\n- 对于 $60\\%$ 的数据，任何行，列或对角线之和不会超过 $200$；\n- 对于 $100\\%$ 的数据，任何行，列或对角线之和不会超过 $300$。\n\n感谢 @Jomoo 的贡献。", "locale": "zh-CN", "translations": {"en": {"title": "Word Puzzle", "background": "", "description": "There is an unknown $4 \\times 4$ grid $M$, where each entry is a positive integer. You are given the sums of the $4$ rows, the sums of the $4$ columns, and the sums of both diagonals. In addition, the values of any $4$ positions in the grid are given; their positions are specified in the input.\n\nWrite a program to determine the positive integers in the remaining $12$ positions of the grid, such that the row sums, column sums, and diagonal sums match the values provided in the input.\n\nYou may assume that no row, column, or diagonal sum exceeds $300$. You may also assume that a solution always exists for the given input.", "inputFormat": "The input contains $22$ space-separated positive integers.\n\nThe first four numbers are the sums of the four rows, respectively; the next four numbers are the sums of the $4$ columns. The next number is the sum of the main diagonal elements, i.e., $M(0, 0)+M(1,1)+M(2, 2)+M(3, 3)$. The following number (the $10$th number) is the sum of the anti-diagonal elements, i.e., $M(0, 3)+M(1, 2)+M(2, 1)+M(3, 0)$. The remaining part contains $12$ numbers, grouped into triples $i, j, k$, meaning $M(i,j)=k$.", "outputFormat": "Output the $16$ numbers arranged as a $4 \\times 4$ grid; within each row, separate the four numbers by a single space. Note: For a given input, there may be more than one valid solution. Any one of them is acceptable.", "hint": "- For $10\\%$ of the testdata, no row, column, or diagonal sum exceeds $20$.\n- For $30\\%$ of the testdata, no row, column, or diagonal sum exceeds $80$.\n- For $60\\%$ of the testdata, no row, column, or diagonal sum exceeds $200$.\n- For $100\\%$ of the testdata, no row, column, or diagonal sum exceeds $300$.\n\nThanks to @Jomoo for the contribution.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "拼字游戏", "background": "", "description": "有一个未知的 $4 \\times 4$ 的拼盘 $M$，它的每个元素都是正整数。给出 $4$ 行元素的总和，$4$ 列元素的总和以及两条对角线元素总和。另外还给出了拼盘中任意 $4$ 个位置的元素值，它们的位置在输入文件中给定。\n\n编写一个程序求出拼盘中另外 $12$ 个位置的正整数的值，要求这些元素的行之和，列之和以及对角线之和与输入文件中给定的值相一致。\n", "inputFormat": "输入文件包含用空格隔开的 $22$ 个正整数。\n\n前四个数字分别表示四行中每一行元素的总和，接下来的 $4$ 个数字分别表示 $4$ 列中每列元素的总和。接下来的数字表示主对角线元素的总和，即 $M(0, 0)+M(1,1)+M(2, 2)+M(3, 3)$。然后的数字（第 $10$ 个数字）表示逆对角线上元数之和，即 $M(0, 3)+M(1, 2)+M(2, 1)+M(3, 0)$ 。剩下的部分还包含 $12$ 个数字，被分成三个一组的形式 $i,j,k$。表示 $M(i,j)=k$。\n\n你可以假设任何行对角线或列之和不会超过 $300$。另外还可假设对于给定的输入文件总是存在解决方案。\n", "outputFormat": "输出文件应包含按 $4 \\times 4$ 的形式输出的 $16$ 个数字，同一行的四个数字用一个空个隔开。注意：对于给定的输入文件，可能有一个以上可能的解决方案。任何一个方案都是可接受的。\n", "hint": "- 对于 $10\\%$ 的数据，任何行，列或对角线之和不会超过 $20$；\n- 对于 $30\\%$ 的数据，任何行，列或对角线之和不会超过 $80$；\n- 对于 $60\\%$ 的数据，任何行，列或对角线之和不会超过 $200$；\n- 对于 $100\\%$ 的数据，任何行，列或对角线之和不会超过 $300$。\n\n感谢 @Jomoo 的贡献。", "locale": "zh-CN"}}}
{"pid": "P1278", "type": "P", "difficulty": 4, "samples": [["5\r\nIOO\r\nIUUO\r\nAI\r\nOIOOI\r\nAOOI", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["记忆化搜索", "状压 DP"], "title": "单词游戏", "background": "", "description": "Io 和 Ao 在玩一个单词游戏。\n\n他们轮流说出一个仅包含元音字母的单词，并且后一个单词的第一个字母必须与前一个单词的最后一个字母一致。\n\n游戏可以从任何一个单词开始。\n\n任何单词禁止说两遍，游戏中只能使用给定词典中含有的单词。\n\n游戏的复杂度定义为游戏中所使用的单词长度总和。\n\n编写程序，求出使用一本给定的词典来玩这个游戏所能达到的游戏最大可能复杂度。\n", "inputFormat": "输入文件的第一行，表示一个自然数 $N(1 \\le N \\le 16)$，$N$ 表示一本字典中包含的单词数量以下的每一行包含字典中的一个单词，每一个单词是由字母 `A`、`E`、`I`、`O` 和 `U` 组成的一个字符串，每个单词的长度将小于等于 $100$，所有的单词是不一样的。\n", "outputFormat": "输出文件仅有一行，表示该游戏的最大可能复杂度。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Word Game", "background": "", "description": "Io and Ao are playing a word game.\n\nThey take turns saying a word that contains only vowels, and the first letter of each new word must be the same as the last letter of the previous word.\n\nThe game can start from any word.\n\nNo word may be said twice, and only words contained in the given dictionary may be used during the game.\n\nThe complexity of the game is defined as the total sum of the lengths of the words used in the game.\n\nWrite a program to compute the maximum possible complexity achievable when playing this game using a given dictionary.", "inputFormat": "The first line of the input file contains a natural number $N(1 \\le N \\le 16)$, where $N$ is the number of words in the dictionary. Each of the following $N$ lines contains one word from the dictionary. Each word is a string consisting only of the letters 'A', 'E', 'I', 'O', and 'U'. The length of each word is less than or equal to $100$. All words are different.", "outputFormat": "The output file contains a single line, which is the maximum possible complexity of the game.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "单词游戏", "background": "", "description": "Io 和 Ao 在玩一个单词游戏。\n\n他们轮流说出一个仅包含元音字母的单词，并且后一个单词的第一个字母必须与前一个单词的最后一个字母一致。\n\n游戏可以从任何一个单词开始。\n\n任何单词禁止说两遍，游戏中只能使用给定词典中含有的单词。\n\n游戏的复杂度定义为游戏中所使用的单词长度总和。\n\n编写程序，求出使用一本给定的词典来玩这个游戏所能达到的游戏最大可能复杂度。\n", "inputFormat": "输入文件的第一行，表示一个自然数 $N(1 \\le N \\le 16)$，$N$ 表示一本字典中包含的单词数量以下的每一行包含字典中的一个单词，每一个单词是由字母 `A`、`E`、`I`、`O` 和 `U` 组成的一个字符串，每个单词的长度将小于等于 $100$，所有的单词是不一样的。\n", "outputFormat": "输出文件仅有一行，表示该游戏的最大可能复杂度。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1279", "type": "P", "difficulty": 3, "samples": [["cmc\r\nsnmn\r\n2\r\n", "10\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "动态规划 DP"], "title": "字串距离", "background": "", "description": "设有字符串 $X$，我们称在 $X$ 的头尾及中间插入任意多个空格后构成的新字符串为 $X$ 的扩展串，如字符串 $X$ 为$\\verb!abcbcd!$，则字符串 $\\verb!abcb␣cd!$，$\\verb!␣a␣bcbcd␣!$ 和 $\\verb!abcb␣cd␣!$ 都是 $X$ 的扩展串，这里 $\\verb!␣!$ 代表空格字符。\n\n如果 $A_1$ 是字符串 $A$ 的扩展串，$B_1$ 是字符串 $B$ 的扩展串，$A_1$ 与 $B_1$ 具有相同的长度，那么我们定义字符串 $A_1$ 与 $B_1$ 的距离为相应位置上的字符的距离总和，而两个非空格字符的距离定义为它们的 ASCII 码的差的绝对值，而空格字符与其他任意字符之间的距离为已知的定值K，空格字符与空格字符的距离为 $0$。在字符串 $A$、$B$ 的所有扩展串中，必定存在两个等长的扩展串 $A_1$，$B_1$，使得 $A_1$ 与 $B_1$ 之间的距离达到最小，我们将这一距离定义为字符串 $A$，$B$ 的距离。\n\n请你写一个程序，求出字符串 $A$，$B$ 的距离。\n", "inputFormat": "输入文件第一行为字符串 $A$ ，第二行为字符串 $B$。$A$，$B$ 均由小写字母组成且长度均不超过 $2000$。第三行为一个整数 $K(1\\leq K\\leq 100)$，表示空格与其他字符的距离。\n", "outputFormat": "输出文件仅一行包含一个整数，表示所求得字符串 $A,B$ 的距离。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "String Distance", "background": "", "description": "Given a string $X$, we call any new string formed by inserting any number of spaces at the beginning, end, or between characters of $X$ an extended string of $X$. For example, if $X$ is $\\verb!abcbcd!$, then $\\verb!abcb␣cd!$, $\\verb!␣a␣bcbcd␣!$, and $\\verb!abcb␣cd␣!$ are all extended strings of $X$, where $\\verb!␣!$ denotes the space character.\n\nIf $A_1$ is an extended string of $A$, $B_1$ is an extended string of $B$, and $A_1$ and $B_1$ have the same length, then we define the distance between $A_1$ and $B_1$ as the sum of the distances at corresponding positions. The distance between two non-space characters is defined as the absolute difference of their ASCII codes. The distance between a space character and any other character is a given constant $K$, and the distance between a space and a space is $0$. Among all extended strings of $A$ and $B$, there must exist two extended strings $A_1$ and $B_1$ of equal length such that the distance between $A_1$ and $B_1$ is minimized. We define this minimal value as the distance between strings $A$ and $B$.\n\nPlease write a program to compute the distance between strings $A$ and $B$.", "inputFormat": "The first line contains string $A$, and the second line contains string $B$. Both $A$ and $B$ consist of lowercase letters, and each has length at most $2000$. The third line contains an integer $K(1\\leq K\\leq 100)$, which is the distance between a space and any other character.", "outputFormat": "Output a single line containing an integer, which is the distance between $A$ and $B$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "字串距离", "background": "", "description": "设有字符串 $X$，我们称在 $X$ 的头尾及中间插入任意多个空格后构成的新字符串为 $X$ 的扩展串，如字符串 $X$ 为$\\verb!abcbcd!$，则字符串 $\\verb!abcb␣cd!$，$\\verb!␣a␣bcbcd␣!$ 和 $\\verb!abcb␣cd␣!$ 都是 $X$ 的扩展串，这里 $\\verb!␣!$ 代表空格字符。\n\n如果 $A_1$ 是字符串 $A$ 的扩展串，$B_1$ 是字符串 $B$ 的扩展串，$A_1$ 与 $B_1$ 具有相同的长度，那么我们定义字符串 $A_1$ 与 $B_1$ 的距离为相应位置上的字符的距离总和，而两个非空格字符的距离定义为它们的 ASCII 码的差的绝对值，而空格字符与其他任意字符之间的距离为已知的定值K，空格字符与空格字符的距离为 $0$。在字符串 $A$、$B$ 的所有扩展串中，必定存在两个等长的扩展串 $A_1$，$B_1$，使得 $A_1$ 与 $B_1$ 之间的距离达到最小，我们将这一距离定义为字符串 $A$，$B$ 的距离。\n\n请你写一个程序，求出字符串 $A$，$B$ 的距离。\n", "inputFormat": "输入文件第一行为字符串 $A$ ，第二行为字符串 $B$。$A$，$B$ 均由小写字母组成且长度均不超过 $2000$。第三行为一个整数 $K(1\\leq K\\leq 100)$，表示空格与其他字符的距离。\n", "outputFormat": "输出文件仅一行包含一个整数，表示所求得字符串 $A,B$ 的距离。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1280", "type": "P", "difficulty": 3, "samples": [["15 6\n1 2\n1 6\n4 11\n8 5\n8 1\n11 5\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "枚举", "排序"], "title": "尼克的任务", "background": "", "description": "尼克每天上班之前都连接上英特网，接收他的上司发来的邮件，这些邮件包含了尼克主管的部门当天要完成的全部任务，每个任务由一个开始时刻与一个持续时间构成。\n\n尼克的一个工作日为 $n$ 分钟，从第 $1$ 分钟开始到第 $n$ 分钟结束。当尼克到达单位后他就开始干活，公司一共有 $k$ 个任务需要完成。如果在同一时刻有多个任务需要完成，尼克可以任选其中的一个来做，而其余的则由他的同事完成，反之如果只有一个任务，则该任务必需由尼克去完成，假如某些任务开始时刻尼克正在工作，则这些任务也由尼克的同事完成。如果某任务于第 $p$ 分钟开始，持续时间为 $t$ 分钟，则该任务将在第 $(p+t-1)$ 分钟结束。\n\n写一个程序计算尼克应该如何选取任务，才能获得最大的空暇时间。", "inputFormat": "输入数据第一行含两个用空格隔开的整数 $n$ 和 $k$。\n\n接下来共有 $k$ 行，每一行有两个用空格隔开的整数 $p$ 和 $t$，表示该任务从第 $p$ 分钟开始，持续时间为 $t$ 分钟。", "outputFormat": "输出文件仅一行，包含一个整数，表示尼克可能获得的最大空暇时间。", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^4,1 \\leq k \\leq 10^4,1 \\leq p \\leq n,1 \\leq p+t-1 \\leq n$。", "locale": "zh-CN", "translations": {"en": {"title": "Nick's Task", "background": "", "description": "Before going to work each day, Nick connects to the Internet and receives emails from his supervisor. These emails list all tasks that Nick’s department must complete that day. Each task is defined by a start time and a duration.\n\nNick’s workday lasts $n$ minutes, from minute $1$ to minute $n$. As soon as Nick arrives at work, he starts working. There are $k$ tasks in total. If, at the same moment, multiple tasks need to be done, Nick may choose any one of them to do, and the others will be completed by his colleagues. Conversely, if there is only one task, then that task must be done by Nick. If some tasks start at a time when Nick is already working, those tasks will also be handled by his colleagues. If a task starts at minute $p$ and lasts $t$ minutes, then it ends at minute $(p+t-1)$.\n\nWrite a program to determine how Nick should choose tasks in order to maximize his free time.", "inputFormat": "The first line contains two integers $n$ and $k$ separated by a space.\n\nEach of the next $k$ lines contains two integers $p$ and $t$, indicating a task that starts at minute $p$ and lasts $t$ minutes.", "outputFormat": "Output a single line containing one integer, the maximum free time Nick can obtain.", "hint": "Constraints\n\n- For 100% of the testdata, it is guaranteed that $1 \\leq n \\leq 10^4, 1 \\leq k \\leq 10^4, 1 \\leq p \\leq n, 1 \\leq p+t-1 \\leq n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "尼克的任务", "background": "", "description": "尼克每天上班之前都连接上英特网，接收他的上司发来的邮件，这些邮件包含了尼克主管的部门当天要完成的全部任务，每个任务由一个开始时刻与一个持续时间构成。\n\n尼克的一个工作日为 $n$ 分钟，从第 $1$ 分钟开始到第 $n$ 分钟结束。当尼克到达单位后他就开始干活，公司一共有 $k$ 个任务需要完成。如果在同一时刻有多个任务需要完成，尼克可以任选其中的一个来做，而其余的则由他的同事完成，反之如果只有一个任务，则该任务必需由尼克去完成，假如某些任务开始时刻尼克正在工作，则这些任务也由尼克的同事完成。如果某任务于第 $p$ 分钟开始，持续时间为 $t$ 分钟，则该任务将在第 $(p+t-1)$ 分钟结束。\n\n写一个程序计算尼克应该如何选取任务，才能获得最大的空暇时间。", "inputFormat": "输入数据第一行含两个用空格隔开的整数 $n$ 和 $k$。\n\n接下来共有 $k$ 行，每一行有两个用空格隔开的整数 $p$ 和 $t$，表示该任务从第 $p$ 分钟开始，持续时间为 $t$ 分钟。", "outputFormat": "输出文件仅一行，包含一个整数，表示尼克可能获得的最大空暇时间。", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^4,1 \\leq k \\leq 10^4,1 \\leq p \\leq n,1 \\leq p+t-1 \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P1281", "type": "P", "difficulty": 3, "samples": [["9 3\n1 2 3 4 5 6 7 8 9\n", "1 5\n6 7\n8 9\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "1998", "二分", "ICPC", "CERC"], "title": "[CERC1998] 书的复制", "background": "大多数人的错误原因：尽可能让前面的人少抄写，如果前几个人可以不写则不写，对应的人输出 `0 0` 。\n\n不过，已经修改数据，保证每个人都有活可干。", "description": "现在要把 $m$ 本有顺序的书分给 $k$ 个人复制（抄写），每一个人的抄写速度都一样，一本书不允许给两个（或以上）的人抄写，分给每一个人的书，必须是连续的，比如不能把第一、第三、第四本书给同一个人抄写。\n\n现在请你设计一种方案，使得复制时间最短。复制时间为抄写页数最多的人用去的时间。", "inputFormat": "第一行两个整数 $m,k$。\n\n第二行 $m$ 个整数，第 $i$ 个整数表示第 $i$ 本书的页数。", "outputFormat": "共 $k$ 行，每行两个整数，第 $i$ 行表示第 $i$ 个人抄写的书的起始编号和终止编号。 $k$ 行的起始编号应该从小到大排列，如果有多解，则尽可能让前面的人少抄写。", "hint": "$1\\le k \\le m \\le 500$，所有书的页数都是正整数且不超过 $10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[CERC1998] Copying Books", "background": "Most people's mistake: try to make earlier people copy as little as possible; if the first few people can skip, then let them skip, and output `0 0` for the corresponding person. However, the testdata has been modified to ensure that everyone has work to do.", "description": "We need to distribute $m$ ordered books to $k$ people for copying. Each person has the same copying speed. A book cannot be assigned to two (or more) people. The books assigned to each person must form a contiguous block; for example, you cannot assign the 1st, 3rd, and 4th books to the same person.\n\nPlease design a plan that minimizes the total copying time. The copying time is the time taken by the person who copies the most pages.", "inputFormat": "The first line contains two integers $m,k$.\n\nThe second line contains $m$ integers. The $i$-th integer indicates the number of pages in the $i$-th book.", "outputFormat": "Output $k$ lines, each with two integers. On the $i$-th line, output the starting and ending book indices assigned to the $i$-th person. The $k$ lines’ starting indices should be in increasing order. If there are multiple solutions, make the earlier people copy as little as possible.", "hint": "Constraints: $1\\le k \\le m \\le 500$, and the number of pages of each book is a positive integer not exceeding $10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CERC1998] 书的复制", "background": "大多数人的错误原因：尽可能让前面的人少抄写，如果前几个人可以不写则不写，对应的人输出 `0 0` 。\n\n不过，已经修改数据，保证每个人都有活可干。", "description": "现在要把 $m$ 本有顺序的书分给 $k$ 个人复制（抄写），每一个人的抄写速度都一样，一本书不允许给两个（或以上）的人抄写，分给每一个人的书，必须是连续的，比如不能把第一、第三、第四本书给同一个人抄写。\n\n现在请你设计一种方案，使得复制时间最短。复制时间为抄写页数最多的人用去的时间。", "inputFormat": "第一行两个整数 $m,k$。\n\n第二行 $m$ 个整数，第 $i$ 个整数表示第 $i$ 本书的页数。", "outputFormat": "共 $k$ 行，每行两个整数，第 $i$ 行表示第 $i$ 个人抄写的书的起始编号和终止编号。 $k$ 行的起始编号应该从小到大排列，如果有多解，则尽可能让前面的人少抄写。", "hint": "$1\\le k \\le m \\le 500$，所有书的页数都是正整数且不超过 $10^4$。", "locale": "zh-CN"}}}
{"pid": "P1282", "type": "P", "difficulty": 4, "samples": [["4\n6 1\n1 5\n1 3\n1 2\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "枚举", "背包 DP"], "title": "多米诺骨牌", "background": "", "description": "多米诺骨牌由上下 $2$ 个方块组成，每个方块中有 $1\\sim6$ 个点。现有排成行的上方块中点数之和记为 $S_1$，下方块中点数之和记为 $S_2$，它们的差为 $\\left|S_1-S_2\\right|$。如图，$S1=6+1+1+1=9$，$S2=1+5+3+2=11$，$\\left|S_1-S_2\\right|=2$。每个多米诺骨牌可以旋转 $180°$，使得上下两个方块互换位置。请你计算最少旋转多少次才能使多米诺骨牌上下 $2$ 行点数之差达到最小。\n\n![](https://cdn.luogu.com.cn/upload/pic/91.png)\n\n对于图中的例子，只要将最后一个多米诺骨牌旋转 $180°$，即可使上下 $2$ 行点数之差为 $0$。", "inputFormat": "输入文件的第一行是一个正整数 $n(1\\leq n\\leq 1000)$，表示多米诺骨牌数。接下来的 $n$ 行表示 $n$ 个多米诺骨牌的点数。每行有两个用空格隔开的正整数，表示多米诺骨牌上下方块中的点数 $a$ 和 $b$，且 $1\\leq a,b\\leq 6$。\n", "outputFormat": "输出文件仅一行，包含一个整数。表示求得的最小旋转次数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Dominoes", "background": "", "description": "A domino consists of two squares, upper and lower. Each square has $1$ to $6$ pips. For a row of dominoes, let $S_1$ be the sum of pips in the upper squares and $S_2$ be the sum of pips in the lower squares. Their difference is $\\left|S_1 - S_2\\right|$. As shown in the figure, $S_1 = 6+1+1+1 = 9$, $S_2 = 1+5+3+2 = 11$, and $\\left|S_1 - S_2\\right| = 2$. Each domino can be rotated by $180°$ so that the upper and lower squares swap positions. Please compute the minimum number of rotations needed to make the difference between the two rows as small as possible.\n\n![](https://cdn.luogu.com.cn/upload/pic/91.png)\n\nFor the example in the figure, rotating only the last domino by $180°$ makes the difference between the two rows equal to $0$.", "inputFormat": "The first line contains a positive integer $n$ ($1 \\le n \\le 1000$), the number of dominoes. Each of the next $n$ lines contains two positive integers $a$ and $b$ ($1 \\le a, b \\le 6$), representing the pips on the upper and lower squares of a domino.", "outputFormat": "Output a single line containing one integer: the minimum number of rotations.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "多米诺骨牌", "background": "", "description": "多米诺骨牌由上下 $2$ 个方块组成，每个方块中有 $1\\sim6$ 个点。现有排成行的上方块中点数之和记为 $S_1$，下方块中点数之和记为 $S_2$，它们的差为 $\\left|S_1-S_2\\right|$。如图，$S1=6+1+1+1=9$，$S2=1+5+3+2=11$，$\\left|S_1-S_2\\right|=2$。每个多米诺骨牌可以旋转 $180°$，使得上下两个方块互换位置。请你计算最少旋转多少次才能使多米诺骨牌上下 $2$ 行点数之差达到最小。\n\n![](https://cdn.luogu.com.cn/upload/pic/91.png)\n\n对于图中的例子，只要将最后一个多米诺骨牌旋转 $180°$，即可使上下 $2$ 行点数之差为 $0$。", "inputFormat": "输入文件的第一行是一个正整数 $n(1\\leq n\\leq 1000)$，表示多米诺骨牌数。接下来的 $n$ 行表示 $n$ 个多米诺骨牌的点数。每行有两个用空格隔开的正整数，表示多米诺骨牌上下方块中的点数 $a$ 和 $b$，且 $1\\leq a,b\\leq 6$。\n", "outputFormat": "输出文件仅一行，包含一个整数。表示求得的最小旋转次数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1283", "type": "P", "difficulty": 5, "samples": [["7\n0 0 2 2 1\n0 2 1 6 2\n2 0 4 2 1\n1 2 4 4 2\n1 4 3 6 1\n4 0 6 4 1\n3 4 6 6 2\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [125000, 125000, 125000, 125000, 125000, 125000, 125000, 125000, 125000]}, "tags": ["搜索", "深度优先搜索 DFS", "剪枝", "拓扑排序", "状压 DP"], "title": "平板涂色", "background": "", "description": "CE 数码公司开发了一种名为自动涂色机（APM）的产品。它能用预定的颜色给一块由不同尺寸且互不覆盖的矩形构成的平板涂色。\n\n为了涂色，APM 需要使用一组刷子。每个刷子涂一种不同的颜色 $C_i$ 。APM 拿起一把有颜色 $C_i$ 的刷子，并给所有颜色为 $C_i$ 且符合下面限制的矩形涂色：\n\n![](https://cdn.luogu.com.cn/upload/pic/90.png) \n\n为了避免颜料渗漏使颜色混合，一个矩形只能在所有紧靠它上方的矩形涂色后，才能涂色。例如图中矩形 $F$ 必须在 $C$ 和 $D$ 涂色后才能涂色。注意，每一个矩形必须立刻涂满，不能只涂一部分。\n\n写一个程序求一个使 APM 拿起刷子次数最少的涂色方案。注意，如果一把刷子被拿起超过一次，则每一次都必须记入总数中。", "inputFormat": "第一行为矩形的个数 $N$。下面有 $N$ 行描述了 $N$ 个矩形。每个矩形有 $5$ 个整数描述，左上角的 $y$ 坐标和 $x$ 坐标，右下角的 $y$ 坐标和 $x$ 坐标，以及预定颜色。\n\n平板的左上角坐标总是 $(0,0)$。", "outputFormat": "一个整数，表示拿起刷子的最少次数。", "hint": "$1\\le C_i \\le 20$，$0 \\le x_i,y_i \\le 99$，$1\\le N \\le 16$。", "locale": "zh-CN", "translations": {"en": {"title": "Board Painting", "background": "", "description": "CE Digital has developed a product called the Automatic Painting Machine (APM). It can paint a board composed of non-overlapping rectangles of various sizes using predetermined colors.\n\nTo paint, the APM uses a set of brushes. Each brush paints a distinct color $C_i$. The APM picks up a brush of color $C_i$ and paints all rectangles whose color is $C_i$ and which satisfy the restriction below:\n\n![](https://cdn.luogu.com.cn/upload/pic/90.png)\n\nTo prevent paint from seeping and mixing colors, a rectangle can be painted only after all rectangles that are immediately above it have been painted. For example, in the figure, rectangle $F$ can be painted only after $C$ and $D$ have been painted. Note that each rectangle must be painted to completion immediately; you cannot paint only part of it.\n\nWrite a program to find a painting plan that minimizes the number of times the APM picks up a brush. Note that if a brush is picked up more than once, each pickup counts toward the total.", "inputFormat": "The first line contains the number of rectangles $N$. The next $N$ lines each describe one rectangle. Each rectangle is given by $5$ integers: the top-left $y$-coordinate and $x$-coordinate, the bottom-right $y$-coordinate and $x$-coordinate, and the predetermined color.\n\nThe top-left coordinate of the board is always $(0, 0)$.", "outputFormat": "Output a single integer, the minimum number of brush pickups.", "hint": "Constraints: $1 \\le C_i \\le 20$, $0 \\le x_i, y_i \\le 99$, $1 \\le N \\le 16$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "平板涂色", "background": "", "description": "CE 数码公司开发了一种名为自动涂色机（APM）的产品。它能用预定的颜色给一块由不同尺寸且互不覆盖的矩形构成的平板涂色。\n\n为了涂色，APM 需要使用一组刷子。每个刷子涂一种不同的颜色 $C_i$ 。APM 拿起一把有颜色 $C_i$ 的刷子，并给所有颜色为 $C_i$ 且符合下面限制的矩形涂色：\n\n![](https://cdn.luogu.com.cn/upload/pic/90.png) \n\n为了避免颜料渗漏使颜色混合，一个矩形只能在所有紧靠它上方的矩形涂色后，才能涂色。例如图中矩形 $F$ 必须在 $C$ 和 $D$ 涂色后才能涂色。注意，每一个矩形必须立刻涂满，不能只涂一部分。\n\n写一个程序求一个使 APM 拿起刷子次数最少的涂色方案。注意，如果一把刷子被拿起超过一次，则每一次都必须记入总数中。", "inputFormat": "第一行为矩形的个数 $N$。下面有 $N$ 行描述了 $N$ 个矩形。每个矩形有 $5$ 个整数描述，左上角的 $y$ 坐标和 $x$ 坐标，右下角的 $y$ 坐标和 $x$ 坐标，以及预定颜色。\n\n平板的左上角坐标总是 $(0,0)$。", "outputFormat": "一个整数，表示拿起刷子的最少次数。", "hint": "$1\\le C_i \\le 20$，$0 \\le x_i,y_i \\le 99$，$1\\le N \\le 16$。", "locale": "zh-CN"}}}
{"pid": "P1284", "type": "P", "difficulty": 4, "samples": [["5\n1\n1\n3\n3\n4\n", "692\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "贪心", "背包 DP"], "title": "三角形牧场", "background": "", "description": "和所有人一样，奶牛喜欢变化。它们正在设想新造型的牧场。奶牛建筑师 Hei 想建造围有漂亮白色栅栏的三角形牧场。她拥有 $n$ 块木板，每块的长度 $l_i$ 都是整数，她想用所有的木板围成一个三角形使得牧场面积最大。\n\n请帮助 Hei 小姐构造这样的牧场，并计算出这个最大牧场的面积。", "inputFormat": "第 $1$ 行：一个整数 $n$；\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i + 1)$ 行的整数 $l_i$ 表示第 $i$ 块木板的长度。", "outputFormat": "仅一个整数：最大牧场面积乘以 $100$ 然后舍尾的结果。如果无法构建，输出 $-1$。", "hint": "#### 样例输入输出 1 解释\n\n$692=\\text{舍尾后的}(100\\times\\text{三角形面积})$，此三角形为等边三角形，边长为 $4$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $3\\le n\\le40$，$1\\le l_i\\le40$。", "locale": "zh-CN", "translations": {"en": {"title": "Triangular Pasture", "background": "", "description": "Like everyone, cows enjoy variety. They are imagining a new look for their pastures. The cow architect Hei wants to build a triangular pasture enclosed by a beautiful white fence. She has $n$ boards, each with an integer length $l_i$, and she wants to use all the boards to enclose a triangle so that the pasture area is maximized.\n\nPlease help Miss Hei construct such a pasture and compute this maximum area.", "inputFormat": "Line $1$: an integer $n$.\n\nLines $2$ to $(n + 1)$: each line contains one integer. On line $(i + 1)$, the integer $l_i$ denotes the length of the $i$-th board.", "outputFormat": "A single integer: the result of multiplying the maximum pasture area by $100$ and then truncating the fractional part. If it is impossible to construct, output $-1$.", "hint": "Explanation for Sample Input/Output 1: $692=\\text{truncated}(100\\times\\text{triangle area})$, and the triangle is equilateral with side length $4$.\n\nConstraints: For $100\\%$ of the testdata, it is guaranteed that $3 \\le n \\le 40$, $1 \\le l_i \\le 40$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "三角形牧场", "background": "", "description": "和所有人一样，奶牛喜欢变化。它们正在设想新造型的牧场。奶牛建筑师 Hei 想建造围有漂亮白色栅栏的三角形牧场。她拥有 $n$ 块木板，每块的长度 $l_i$ 都是整数，她想用所有的木板围成一个三角形使得牧场面积最大。\n\n请帮助 Hei 小姐构造这样的牧场，并计算出这个最大牧场的面积。", "inputFormat": "第 $1$ 行：一个整数 $n$；\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i + 1)$ 行的整数 $l_i$ 表示第 $i$ 块木板的长度。", "outputFormat": "仅一个整数：最大牧场面积乘以 $100$ 然后舍尾的结果。如果无法构建，输出 $-1$。", "hint": "#### 样例输入输出 1 解释\n\n$692=\\text{舍尾后的}(100\\times\\text{三角形面积})$，此三角形为等边三角形，边长为 $4$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $3\\le n\\le40$，$1\\le l_i\\le40$。", "locale": "zh-CN"}}}
{"pid": "P1285", "type": "P", "difficulty": 6, "samples": [["5\n2 3 5 0\n1 4 5 3 0\n1 2 5 0\n1 2 3 0\n4 3 2 1 0\n", "3 1 3 5\n2 2 4\n"], ["5\n3 4 5 0\n1 3 5 0\n2 1 4 5 0\n2 3 5 0\n1 2 3 4 0\n", "No solution\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2001", "Special Judge", "背包 DP", "二分图", "ICPC", "NERC/NEERC"], "title": "[NEERC 2001] 队员分组", "background": null, "description": "有 $n$ 个人从 $1$ 至 $n$ 编号，相互之间有一些认识关系，你的任务是把这些人分成两组，使得：\n\n- 每个人都被分到其中一组。\n- 每个组都至少有一个人。\n- 一组中的每个人都认识其他同组成员。\n\n在满足上述条件的基础上，要求两组成员的人数之差（绝对值）尽可能小。请构造一种可行的方案。\n\n请注意，$x$ 认识 $y$ 不一定说明 $y$ 认识 $x$；$x$ 认识 $y$ 且 $y$ 认识 $z$ 不一定说明 $x$ 认识 $z$。即认识关系是单向且不可传递的。", "inputFormat": "输入的第一行是一个整数，代表总人数 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行有若干个互不相同的整数，以 $0$ 结尾，第 $(i + 1)$ 行的第 $j$ 个整数 $a_{i, j}$（$0$ 除外）代表第 $i$ 个人认识 $a_{i, j}$。", "outputFormat": "**本题存在 Special Judge**。\n\n如果无解，请输出一行一个字符串 `No solution`。\n\n如果有解，请输出两行整数，分别代表两组的成员。每行的第一个整数是该组的人数，后面**以升序**若干个整数代表该组的成员编号，数字间用空格隔开。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $2 \\leq n \\leq 100$，$1 \\leq a_{i, j} \\leq n$。\n\n#### 说明\n\n由 @zhouyonglong 提供 SPJ。", "locale": "zh-CN", "translations": {"en": {"title": "[NEERC 2001] Team them up!", "background": null, "description": "There are $n$ people numbered from $1$ to $n$, with some acquaintance relations among them. Your task is to divide these people into two groups such that:\n\n- Everyone is assigned to one of the groups.\n- Each group contains at least one person.\n- In each group, every person knows every other member in the same group.\n\nSubject to the above conditions, the absolute difference between the sizes of the two groups should be as small as possible. Please construct one feasible grouping.\n\nPlease note that $x$ knowing $y$ does not necessarily mean that $y$ knows $x$; $x$ knowing $y$ and $y$ knowing $z$ does not necessarily mean that $x$ knows $z$. That is, the acquaintance relation is directed and non-transitive.", "inputFormat": "The first line contains an integer representing the total number of people $n$.\n\nFrom line $2$ to line $(n + 1)$, each line contains several pairwise distinct integers ending with $0$. On line $(i + 1)$, the $j$-th integer $a_{i, j}$ (excluding $0$) indicates that person $i$ knows $a_{i, j}$.", "outputFormat": "This problem uses a Special Judge.\n\nIf there is no solution, output a single line containing the string `No solution`.\n\nIf there is a solution, output two lines of integers describing the two groups. On each line, the first integer is the size of that group, followed by the member indices in ascending order, separated by spaces.", "hint": "Constraints\n\nFor all test points, it is guaranteed that $2 \\leq n \\leq 100$, $1 \\leq a_{i, j} \\leq n$.\n\nExplanation\n\nSPJ provided by @zhouyonglong.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NEERC 2001] 队员分组", "background": null, "description": "有 $n$ 个人从 $1$ 至 $n$ 编号，相互之间有一些认识关系，你的任务是把这些人分成两组，使得：\n\n- 每个人都被分到其中一组。\n- 每个组都至少有一个人。\n- 一组中的每个人都认识其他同组成员。\n\n在满足上述条件的基础上，要求两组成员的人数之差（绝对值）尽可能小。请构造一种可行的方案。\n\n请注意，$x$ 认识 $y$ 不一定说明 $y$ 认识 $x$；$x$ 认识 $y$ 且 $y$ 认识 $z$ 不一定说明 $x$ 认识 $z$。即认识关系是单向且不可传递的。", "inputFormat": "输入的第一行是一个整数，代表总人数 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行有若干个互不相同的整数，以 $0$ 结尾，第 $(i + 1)$ 行的第 $j$ 个整数 $a_{i, j}$（$0$ 除外）代表第 $i$ 个人认识 $a_{i, j}$。", "outputFormat": "**本题存在 Special Judge**。\n\n如果无解，请输出一行一个字符串 `No solution`。\n\n如果有解，请输出两行整数，分别代表两组的成员。每行的第一个整数是该组的人数，后面**以升序**若干个整数代表该组的成员编号，数字间用空格隔开。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $2 \\leq n \\leq 100$，$1 \\leq a_{i, j} \\leq n$。\n\n#### 说明\n\n由 @zhouyonglong 提供 SPJ。", "locale": "zh-CN"}}}
{"pid": "P1286", "type": "P", "difficulty": 5, "samples": [["3 1269 1160 1663\n", "383 777 886\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "Special Judge"], "title": "两数之和", "background": "", "description": "我们知道从 $n$ 个非负整数中任取两个相加共有 $\\frac{n(n-1)}{2}$ 个和，现在已知这 $\\frac{n(n-1)}{2}$ 个和值，要求 $n$ 个非负整数。", "inputFormat": "输入文件有若干行，每行一组数据，包含 $\\frac{n(n-1)}{2}+1$ 个空格隔开的非负整数，其中第一个数表示 $n$（$2<n<10$），其余 $\\frac{n(n-1)}{2}$ 个数表示和值，每个数不超过 $100000$。文件末以 `EOF` 结尾。\n", "outputFormat": "输出文件若干行，对应每一个输入，该行按从小到大的次序依次输出一组满足要求的 $n$ 个非负整数，相邻两个整数之间用一个空格隔开；若问题无解则输出 `Impossible`。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Sum of Two Numbers", "background": "", "description": "We know that taking any two from $n$ non-negative integers and adding them yields $\\frac{n(n-1)}{2}$ sums. Now, given these $\\frac{n(n-1)}{2}$ sums, determine the $n$ non-negative integers.", "inputFormat": "The input contains multiple lines. Each line is one dataset, consisting of $\\frac{n(n-1)}{2} + 1$ non-negative integers separated by spaces. The first number denotes $n$ ($2 < n < 10$). The remaining $\\frac{n(n-1)}{2}$ numbers are the pairwise sums. Each number does not exceed $100000$. The file ends with `EOF`.", "outputFormat": "Output multiple lines. For each input line, output one line that contains a set of $n$ non-negative integers in ascending order, separated by single spaces. If there is no solution, output `Impossible`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "两数之和", "background": "", "description": "我们知道从 $n$ 个非负整数中任取两个相加共有 $\\frac{n(n-1)}{2}$ 个和，现在已知这 $\\frac{n(n-1)}{2}$ 个和值，要求 $n$ 个非负整数。", "inputFormat": "输入文件有若干行，每行一组数据，包含 $\\frac{n(n-1)}{2}+1$ 个空格隔开的非负整数，其中第一个数表示 $n$（$2<n<10$），其余 $\\frac{n(n-1)}{2}$ 个数表示和值，每个数不超过 $100000$。文件末以 `EOF` 结尾。\n", "outputFormat": "输出文件若干行，对应每一个输入，该行按从小到大的次序依次输出一组满足要求的 $n$ 个非负整数，相邻两个整数之间用一个空格隔开；若问题无解则输出 `Impossible`。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1287", "type": "P", "difficulty": 2, "samples": [["3 2\n", "6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "枚举", "容斥原理", "Stirling 数"], "title": "盒子与球", "background": "", "description": "现有 $r$ 个互不相同的盒子和 $n$ 个互不相同的球，要将这 $n$ 个球放入 $r$ 个盒子中，且不允许有空盒子。请求出有多少种不同的放法。\n\n两种放法不同当且仅当存在一个球使得该球在两种放法中放入了不同的盒子。", "inputFormat": "输入只有一行两个整数，分别代表 $n$ 和 $r$。", "outputFormat": "输出一行一个整数代表答案。", "hint": "#### 样例输入输出 1 解释\n\n有两个盒子（编号为 $1, 2$）和三个球（编号为 $1, 2, 3$），共有六种方案，分别如下：\n\n| 盒子编号 |   方案 1    |   方案 2    |   方案 3    |   方案 4    |   方案 5    |   方案 6    |\n| :------: | :---------: | :---------: | :---------: | :---------: | :---------: | :---------: |\n| 盒子 $1$ |  小球 $1$   |  小球 $2$   |  小球 $3$   | 小球 $2, 3$ | 小球 $1, 3$ | 小球 $1, 2$ |\n| 盒子 $2$ | 小球 $2, 3$ | 小球 $1, 3$ | 小球 $1, 2$ |  小球 $1$   |  小球 $2$   |  小球 $3$   |\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $0 \\leq r \\leq n \\leq 10$，且答案小于 $2^{31}$。", "locale": "zh-CN", "translations": {"en": {"title": "Boxes and Balls", "background": "", "description": "There are $r$ distinct boxes and $n$ distinct balls. Put these $n$ balls into the $r$ boxes, with no box left empty. Find how many different placements there are.\n\nTwo placements are different if and only if there exists a ball that is placed into different boxes in the two placements.", "inputFormat": "The input contains one line with two integers, representing $n$ and $r$.", "outputFormat": "Output one line with a single integer representing the answer.", "hint": "#### Sample Explanation 1\n\nThere are two boxes (IDs $1, 2$) and three balls (IDs $1, 2, 3$), for a total of six arrangements, as follows:\n\n| Box ID | Arrangement 1 | Arrangement 2 | Arrangement 3 | Arrangement 4 | Arrangement 5 | Arrangement 6 |\n| :----: | :------------: | :------------: | :------------: | :------------: | :------------: | :------------: |\n| Box $1$ |   Ball $1$    |   Ball $2$    |   Ball $3$    |  Balls $2, 3$ |  Balls $1, 3$ |  Balls $1, 2$ |\n| Box $2$ |  Balls $2, 3$ |  Balls $1, 3$ |  Balls $1, 2$ |   Ball $1$    |   Ball $2$    |   Ball $3$    |\n\n#### Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $0 \\leq r \\leq n \\leq 10$, and the answer is less than $2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "盒子与球", "background": "", "description": "现有 $r$ 个互不相同的盒子和 $n$ 个互不相同的球，要将这 $n$ 个球放入 $r$ 个盒子中，且不允许有空盒子。请求出有多少种不同的放法。\n\n两种放法不同当且仅当存在一个球使得该球在两种放法中放入了不同的盒子。", "inputFormat": "输入只有一行两个整数，分别代表 $n$ 和 $r$。", "outputFormat": "输出一行一个整数代表答案。", "hint": "#### 样例输入输出 1 解释\n\n有两个盒子（编号为 $1, 2$）和三个球（编号为 $1, 2, 3$），共有六种方案，分别如下：\n\n| 盒子编号 |   方案 1    |   方案 2    |   方案 3    |   方案 4    |   方案 5    |   方案 6    |\n| :------: | :---------: | :---------: | :---------: | :---------: | :---------: | :---------: |\n| 盒子 $1$ |  小球 $1$   |  小球 $2$   |  小球 $3$   | 小球 $2, 3$ | 小球 $1, 3$ | 小球 $1, 2$ |\n| 盒子 $2$ | 小球 $2, 3$ | 小球 $1, 3$ | 小球 $1, 2$ |  小球 $1$   |  小球 $2$   |  小球 $3$   |\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $0 \\leq r \\leq n \\leq 10$，且答案小于 $2^{31}$。", "locale": "zh-CN"}}}
{"pid": "P1288", "type": "P", "difficulty": 2, "samples": [["4\n2 5 3 0\n", "YES\n"], ["3\n0 0 0\n", "NO\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "博弈论"], "title": "取数游戏 II", "background": "", "description": "有一个取数的游戏。初始时，给出一个环，环上的每条边上都有一个非负整数。这些整数中至少有一个 $0$。然后，将一枚硬币放在环上的一个节点上。两个玩家就是以这个放硬币的节点为起点开始这个游戏，两人轮流取数，取数的规则如下：\n\n1.  选择硬币左边或者右边的一条边，并且边上的数非 $0$；\n1.  将这条边上的数减至任意一个非负整数（至少要有所减小）；\n1.  将硬币移至边的另一端。\n\n如果轮到一个玩家走，这时硬币左右两边的边上的数值都是 $0$，那么这个玩家就输了。\n\n如下图，描述的是 Alice 和 Bob 两人的对弈过程（其中黑色节点表示硬币所在节点）。\n\n ![](https://cdn.luogu.com.cn/upload/pic/93.png) \n\n各图的结果为：\n\n- $\\text{A}$：轮到 Alice 操作；\n- $\\text{B}$：轮到 Bob 操作；\n- $\\text{C}$：轮到 Alice 操作；\n- $\\text{D}$：轮到 Bob 操作。\n\n$\\text{D}$ 中，轮到 Bob 走时，硬币两边的边上都是 $0$，所以 Alice 获胜。\n\n现在，你的任务就是根据给出的环、边上的数值以及起点（硬币所在位置），判断先走方是否有必胜的策略。", "inputFormat": "第一行一个整数 $N$ $(N \\leq 20)$，表示环上的节点数。\n\n第二行 $N$ 个数，数值不超过 $30$，依次表示 $N$ 条边上的数值。硬币的起始位置在第一条边与最后一条边之间的节点上。", "outputFormat": "仅一行。若存在必胜策略，则输出 ```YES```，否则输出 ```NO```。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Number Picking Game II", "background": "", "description": "There is a number-picking game. Initially, you are given a ring; each edge on the ring has a non-negative integer on it. Among these integers, at least one is $0$. Then, a coin is placed on a node of the ring. Starting from this node, two players take turns according to the following rules:\n\n1. Choose one of the two edges adjacent to the coin (left or right), and its number must be non-zero.\n2. Decrease the number on that edge to any non-negative integer (it must strictly decrease).\n3. Move the coin to the other endpoint of that edge.\n\nIf it is a player's turn and the numbers on both edges adjacent to the coin are $0$, then that player loses.\n\nAs shown below is a sequence of moves between Alice and Bob (the black node marks the coin's position).\n\n![](https://cdn.luogu.com.cn/upload/pic/93.png)\n\nThe results of the panels are:\n\n- $\\text{A}$: Alice to move.\n- $\\text{B}$: Bob to move.\n- $\\text{C}$: Alice to move.\n- $\\text{D}$: Bob to move.\n\nIn $\\text{D}$, when it is Bob's turn, both adjacent edges have number $0$, so Alice wins.\n\nYour task is to determine, given the ring, the edge values, and the starting node (the coin's position), whether the first player has a forced winning strategy.", "inputFormat": "The first line contains an integer $N$ $(N \\leq 20)$, the number of nodes on the ring.\n\nThe second line contains $N$ integers, each not exceeding $30$, giving the values on the $N$ edges in order. The coin initially sits on the node between the first edge and the last edge.", "outputFormat": "Output a single line. If there exists a winning strategy, output ```YES```, otherwise output ```NO```.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "取数游戏 II", "background": "", "description": "有一个取数的游戏。初始时，给出一个环，环上的每条边上都有一个非负整数。这些整数中至少有一个 $0$。然后，将一枚硬币放在环上的一个节点上。两个玩家就是以这个放硬币的节点为起点开始这个游戏，两人轮流取数，取数的规则如下：\n\n1.  选择硬币左边或者右边的一条边，并且边上的数非 $0$；\n1.  将这条边上的数减至任意一个非负整数（至少要有所减小）；\n1.  将硬币移至边的另一端。\n\n如果轮到一个玩家走，这时硬币左右两边的边上的数值都是 $0$，那么这个玩家就输了。\n\n如下图，描述的是 Alice 和 Bob 两人的对弈过程（其中黑色节点表示硬币所在节点）。\n\n ![](https://cdn.luogu.com.cn/upload/pic/93.png) \n\n各图的结果为：\n\n- $\\text{A}$：轮到 Alice 操作；\n- $\\text{B}$：轮到 Bob 操作；\n- $\\text{C}$：轮到 Alice 操作；\n- $\\text{D}$：轮到 Bob 操作。\n\n$\\text{D}$ 中，轮到 Bob 走时，硬币两边的边上都是 $0$，所以 Alice 获胜。\n\n现在，你的任务就是根据给出的环、边上的数值以及起点（硬币所在位置），判断先走方是否有必胜的策略。", "inputFormat": "第一行一个整数 $N$ $(N \\leq 20)$，表示环上的节点数。\n\n第二行 $N$ 个数，数值不超过 $30$，依次表示 $N$ 条边上的数值。硬币的起始位置在第一条边与最后一条边之间的节点上。", "outputFormat": "仅一行。若存在必胜策略，则输出 ```YES```，否则输出 ```NO```。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1289", "type": "P", "difficulty": 3, "samples": [["20 3\n4 2 3 11 12\n1 7\n3 18 5 10\n", "We need 9 move operations.\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "磁盘碎片整理", "background": "", "description": "出于最高安全性考虑，司令部采用了特殊的安全操作系统，该系统采用一个特殊的文件系统。在这个文件系统中所有磁盘空间都被分成了相同尺寸的 $N$ 块，用整数 $1$ 到 $N$ 标识。每个文件占用磁盘上任意区域的一块或多块存储区，未被文件占用的存储块被认为是可是用的。如果文件存储在磁盘上自然连续的存储块中，则能被以最快的速度读出。\n\n因为磁盘是匀速转动的，所以存取上面不同的存储块需要的时间也不同。读取磁盘开头处的存储块比读取磁盘尾处的存储块快。根据以上现象，我们事先将文件按其存取频率的大小用整数 $1$ 到 $K$ 标识。按文件在磁盘上的最佳存储方法，$1$ 号文件将占用 $1,2,\\cdots,S_1$ 的存储块，$2$ 号文件将占用 $S_1+1,S_1+2,\\cdots, S_1+S_2$ 的存储块，以此类推（$S_i$ 是被第 $i$ 个文件占用的存储块的个数）。为了将文件以最佳形式存储在磁盘上，需要执行存储块移动操作。一个存储块移动操作包括从磁盘上读取一个被占用的存储块至内存并将它写入其他空的存储块，然后宣称前一个存储块被释放，后一个存储块被占用。\n\n本程序的目的是通过执行最少次数的存储块移动操作，将文件按最佳方式存储到磁盘上，注意同一个文件的存储块在移动之后其相对次序不可改变。", "inputFormat": "每个磁盘说明的第一行包含两个用空格隔开的整数 $N$ 和 $K(1 \\le K \\le N \\le 10^5)$，接下来的 $K$ 行每行说明一个文件，对第 $i$ 个文件的说明是这样的：首先以整数 $S_i$ 开头，表示第 $i$ 个文件的存储块数量，$1 \\le S_i \\le N-K$，然后跟 $S_i$ 个整数，每个整数之间用空格隔开，表示该文件按自然顺序在磁盘上占用的存储块的标识。所有这些数都介于 $1$ 和 $N$ 之间，包括 $1$ 和 $N$。一个磁盘说明中所有存储块的标识都是不同的，并且该盘至少有一个空的存储块。", "outputFormat": "对于每一个磁盘说明，只需输出一行句子 $\\text{``\\texttt{We need \\textrm{\\textit{M}} move operations.}''}$，$M$ 表示将文件按最佳方式存储到磁盘上所需进行的最少存储块移动操作次数。如果文件已按最佳方式存储，仅需输出 $\\text{``\\texttt{No optimization needed.}''}$。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Disk Defragmentation", "background": "", "description": "For maximum security, the headquarters uses a special secure operating system with a special file system. In this file system, all disk space is divided into $N$ blocks of equal size, labeled with integers $1$ to $N$. Each file occupies one or more blocks located in arbitrary regions of the disk, and blocks not occupied by any file are considered available. If a file is stored in physically contiguous blocks on the disk, it can be read at the highest speed.\n\nBecause the disk rotates at a constant speed, the time needed to access different blocks varies. Reading blocks near the beginning of the disk is faster than reading blocks near the end. Based on this, files are pre-labeled by their access frequency with integers $1$ to $K$. In the optimal placement on the disk, file $1$ occupies blocks $1, 2, \\cdots, S_1$, file $2$ occupies blocks $S_1 + 1, S_1 + 2, \\cdots, S_1 + S_2$, and so on (where $S_i$ is the number of blocks occupied by file $i$). To store files in their optimal form, block move operations may be performed. One block move operation consists of reading an occupied block from the disk into memory and writing it to some other empty block, then marking the former block free and the latter block occupied.\n\nThe goal is to store the files in the optimal way using the minimum number of block move operations. Note that the relative order of the blocks within the same file must not change after moving.", "inputFormat": "Each disk description starts with a line containing two integers $N$ and $K$ ($1 \\le K \\le N \\le 10^5$). The next $K$ lines each describe one file. For file $i$, the description begins with an integer $S_i$, the number of blocks of this file ($1 \\le S_i \\le N - K$), followed by $S_i$ integers separated by spaces, giving the block IDs that the file currently occupies on the disk in natural order. All these numbers are between $1$ and $N$, inclusive. Within one disk description, all occupied block IDs are distinct, and there is at least one empty block.\n\nThere may be multiple disk descriptions; process all of them until EOF.", "outputFormat": "For each disk description, output a single line\n$\\text{``\\texttt{We need \\textrm{\\textit{M}} move operations.}''}$,\nwhere $M$ is the minimum number of block move operations required to store the files in the optimal way. If the files are already in the optimal placement, output\n$\\text{``\\texttt{No optimization needed.}''}$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "磁盘碎片整理", "background": "", "description": "出于最高安全性考虑，司令部采用了特殊的安全操作系统，该系统采用一个特殊的文件系统。在这个文件系统中所有磁盘空间都被分成了相同尺寸的 $N$ 块，用整数 $1$ 到 $N$ 标识。每个文件占用磁盘上任意区域的一块或多块存储区，未被文件占用的存储块被认为是可是用的。如果文件存储在磁盘上自然连续的存储块中，则能被以最快的速度读出。\n\n因为磁盘是匀速转动的，所以存取上面不同的存储块需要的时间也不同。读取磁盘开头处的存储块比读取磁盘尾处的存储块快。根据以上现象，我们事先将文件按其存取频率的大小用整数 $1$ 到 $K$ 标识。按文件在磁盘上的最佳存储方法，$1$ 号文件将占用 $1,2,\\cdots,S_1$ 的存储块，$2$ 号文件将占用 $S_1+1,S_1+2,\\cdots, S_1+S_2$ 的存储块，以此类推（$S_i$ 是被第 $i$ 个文件占用的存储块的个数）。为了将文件以最佳形式存储在磁盘上，需要执行存储块移动操作。一个存储块移动操作包括从磁盘上读取一个被占用的存储块至内存并将它写入其他空的存储块，然后宣称前一个存储块被释放，后一个存储块被占用。\n\n本程序的目的是通过执行最少次数的存储块移动操作，将文件按最佳方式存储到磁盘上，注意同一个文件的存储块在移动之后其相对次序不可改变。", "inputFormat": "每个磁盘说明的第一行包含两个用空格隔开的整数 $N$ 和 $K(1 \\le K \\le N \\le 10^5)$，接下来的 $K$ 行每行说明一个文件，对第 $i$ 个文件的说明是这样的：首先以整数 $S_i$ 开头，表示第 $i$ 个文件的存储块数量，$1 \\le S_i \\le N-K$，然后跟 $S_i$ 个整数，每个整数之间用空格隔开，表示该文件按自然顺序在磁盘上占用的存储块的标识。所有这些数都介于 $1$ 和 $N$ 之间，包括 $1$ 和 $N$。一个磁盘说明中所有存储块的标识都是不同的，并且该盘至少有一个空的存储块。", "outputFormat": "对于每一个磁盘说明，只需输出一行句子 $\\text{``\\texttt{We need \\textrm{\\textit{M}} move operations.}''}$，$M$ 表示将文件按最佳方式存储到磁盘上所需进行的最少存储块移动操作次数。如果文件已按最佳方式存储，仅需输出 $\\text{``\\texttt{No optimization needed.}''}$。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1290", "type": "P", "difficulty": 4, "samples": [["2\n25 7\n24 15\n", "Stan wins\nOllie wins\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "博弈论", "递归"], "title": "欧几里德的游戏", "background": "", "description": "欧几里德的两个后代 Stan 和 Ollie 正在玩一种数字游戏，这个游戏是他们的祖先欧几里德发明的。给定两个正整数 $M$ 和 $N$，从 Stan 开始，从其中较大的一个数，减去较小的数的正整数倍，当然，得到的数不能小于 $0$。然后是 Ollie，对刚才得到的数，和 $M,N$ 中较小的那个数，再进行同样的操作……直到一个人得到了 $0$，他就取得了胜利。下面是他们用 $(25,7)$ 两个数游戏的过程：\n\n- 初始：$(25,7)$；\n- Stan：$(11,7)$；\n- Ollie：$(4,7)$；\n- Stan：$(4,3)$；\n- Ollie：$(1,3)$；\n- Stan：$(1,0)$。\n\nStan 赢得了游戏的胜利。\n\n现在，假设他们完美地操作，谁会取得胜利呢？", "inputFormat": "**本题有多组测试数据。**\n\n第一行为测试数据的组数 $C$。\n下面 $C$ 行，每行为一组数据，包含两个正整数 $M,N(M,N<2^{31})$。", "outputFormat": "对每组输入数据输出一行，如果 Stan 胜利，则输出 `Stan wins`；否则输出 `Ollie wins`。\n", "hint": "$1 \\leq C \\leq 6$。", "locale": "zh-CN", "translations": {"en": {"title": "Euclid's Game", "background": "", "description": "Two descendants of Euclid, Stan and Ollie, are playing a number game invented by their ancestor. Given two positive integers $M$ and $N$, starting with Stan, on each turn the player subtracts a positive multiple of the smaller number from the larger number, and the result must not be less than $0$. Then it is Ollie’s turn, using the new pair formed by the result and the other number, and the same operation is repeated. The process continues until someone makes the larger number become $0$; that player wins. The play sequence for the numbers $(25, 7)$ is as follows:\n\n- Start: $(25, 7)$.\n- Stan: $(11, 7)$.\n- Ollie: $(4, 7)$.\n- Stan: $(4, 3)$.\n- Ollie: $(1, 3)$.\n- Stan: $(1, 0)$.\n\nStan wins the game.\n\nNow, assuming both players play optimally, who will win?", "inputFormat": "**This problem contains multiple test cases.**\n\nThe first line contains the number of test cases $C$.  \nEach of the next $C$ lines contains one test case with two positive integers $M,N(M,N<2^{31})$.", "outputFormat": "For each test case, output one line. If Stan wins, output `Stan wins`; otherwise output `Ollie wins`.", "hint": "$1 \\leq C \\leq 6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "欧几里德的游戏", "background": "", "description": "欧几里德的两个后代 Stan 和 Ollie 正在玩一种数字游戏，这个游戏是他们的祖先欧几里德发明的。给定两个正整数 $M$ 和 $N$，从 Stan 开始，从其中较大的一个数，减去较小的数的正整数倍，当然，得到的数不能小于 $0$。然后是 Ollie，对刚才得到的数，和 $M,N$ 中较小的那个数，再进行同样的操作……直到一个人得到了 $0$，他就取得了胜利。下面是他们用 $(25,7)$ 两个数游戏的过程：\n\n- 初始：$(25,7)$；\n- Stan：$(11,7)$；\n- Ollie：$(4,7)$；\n- Stan：$(4,3)$；\n- Ollie：$(1,3)$；\n- Stan：$(1,0)$。\n\nStan 赢得了游戏的胜利。\n\n现在，假设他们完美地操作，谁会取得胜利呢？", "inputFormat": "**本题有多组测试数据。**\n\n第一行为测试数据的组数 $C$。\n下面 $C$ 行，每行为一组数据，包含两个正整数 $M,N(M,N<2^{31})$。", "outputFormat": "对每组输入数据输出一行，如果 Stan 胜利，则输出 `Stan wins`；否则输出 `Ollie wins`。\n", "hint": "$1 \\leq C \\leq 6$。", "locale": "zh-CN"}}}
{"pid": "P1291", "type": "P", "difficulty": 4, "samples": [["2\n", "3\n"], ["17", "  340463\n58------\n  720720"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2002", "各省省选", "上海"], "title": "[SHOI2002] 百事世界杯之旅", "background": "“……在 2002 年 6 月之前购买的百事任何饮料的瓶盖上都会有一个百事球星的名字。只要凑齐所有百事球星的名字，就可参加百事世界杯之旅的抽奖活动，获得球星背包，随声听，更可赴日韩观看世界杯。还不赶快行动！”", "description": "你关上电视，心想：假设有 $n$ 个不同的球星名字，每个名字出现的概率相同，平均需要买几瓶饮料才能凑齐所有的名字呢？", "inputFormat": "输入只有一行一个整数，表示不同球星名字的个数 $n$。", "outputFormat": "输出凑齐所有的名字平均需要买的饮料瓶数。如果是一个整数，则直接输出，否则应该直接按照分数格式输出，例如五又二十分之三应该输出为：\n\n```plain\n 3\n5--\n 20\n```\n\n第一行是分数部分的分子，第二行首先是整数部分，然后是由减号组成的分数线，第三行是分母。减号的个数应等于分母的位数。分子和分母的首位都与第一个减号对齐。\n\n分数必须是不可约的。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $2 \\leq n \\leq 33$。", "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2002] Pepsi World Cup Tour", "background": "\"... Before June 2002, the cap of any Pepsi beverage will have the name of a Pepsi soccer star. As long as you collect all Pepsi soccer star names, you can enter the drawing for the Pepsi World Cup Tour, win a star backpack and a portable music player, and even go to Japan and South Korea to watch the World Cup. Hurry up!\"", "description": "You turn off the TV and think: assuming there are $n$ different star names and each name appears with equal probability, on average how many bottles do you need to buy to collect all the names?", "inputFormat": "The input contains a single integer on one line, representing the number of different star names $n$.", "outputFormat": "Output the average number of bottles needed to collect all the names. If it is an integer, print it directly. Otherwise, print it directly in fractional format. For example, five and three twentieths should be printed as:\n\n```plain\n 3\n5--\n 20\n```\n\nThe first line is the numerator of the fractional part. The second line contains the integer part first, followed by a bar made of minus signs. The third line is the denominator. The number of minus signs should equal the number of digits in the denominator. The first digit of the numerator and the first digit of the denominator must align with the first minus sign. The fraction must be in lowest terms.", "hint": "### Constraints\n\nFor all testdata, it is guaranteed that $2 \\leq n \\leq 33$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2002] 百事世界杯之旅", "background": "“……在 2002 年 6 月之前购买的百事任何饮料的瓶盖上都会有一个百事球星的名字。只要凑齐所有百事球星的名字，就可参加百事世界杯之旅的抽奖活动，获得球星背包，随声听，更可赴日韩观看世界杯。还不赶快行动！”", "description": "你关上电视，心想：假设有 $n$ 个不同的球星名字，每个名字出现的概率相同，平均需要买几瓶饮料才能凑齐所有的名字呢？", "inputFormat": "输入只有一行一个整数，表示不同球星名字的个数 $n$。", "outputFormat": "输出凑齐所有的名字平均需要买的饮料瓶数。如果是一个整数，则直接输出，否则应该直接按照分数格式输出，例如五又二十分之三应该输出为：\n\n```plain\n 3\n5--\n 20\n```\n\n第一行是分数部分的分子，第二行首先是整数部分，然后是由减号组成的分数线，第三行是分母。减号的个数应等于分母的位数。分子和分母的首位都与第一个减号对齐。\n\n分数必须是不可约的。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $2 \\leq n \\leq 33$。", "locale": "zh-CN"}}}
{"pid": "P1292", "type": "P", "difficulty": 4, "samples": [["5 3\r\n", "1\r\n1 2\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "扩展欧几里德算法"], "title": "倒酒", "background": null, "description": "Winy 是一家酒吧的老板，他的酒吧提供两种体积的啤酒，$a$ ml 和 $b$ ml，分别使用容积为 $a$ ml 和 $b$ ml 的酒杯来装载。\n\n酒吧的生意并不好。Winy 发现酒鬼们都非常穷。有时，他们会因为负担不起 $a$ ml 或者 $b$ ml 啤酒的消费，而不得不离去。因此，Winy 决定出售第三种体积的啤酒（较小体积的啤酒）。\n\nWiny 只有两种杯子，容积分别为 $a$ ml 和 $b$ ml，而且啤酒杯是没有刻度的。他只能通过两种杯子和酒桶间的互相倾倒来得到新的体积的酒。\n\n为了简化倒酒的步骤，Winy 规定：\n\n1.  $a \\ge b$；\n2.  酒桶容积无限大，酒桶中酒的体积也是无限大（但远小于桶的容积）；\n3. 只包含三种可能的倒酒操作：  \n   1. 将酒桶中的酒倒入容积为 $b$ ml 的酒杯中；  \n   2. 将容积为 $a$ ml 的酒杯中的酒倒入酒桶；  \n   3. 将容积为 $b$ ml 的酒杯中的酒倒入容积为 $a$ ml 的酒杯中。\n4. 每次倒酒必须把杯子倒满或把被倾倒的杯子倒空。\n\nWiny 希望通过若干次倾倒得到容积为 $a$ ml 酒杯中剩下的酒的体积尽可能小，他请求你帮助他设计倾倒的方案。", "inputFormat": "输入共一行两个整数 $a$ 和 $b$，满足 $0 < b \\le a \\le 10^9$。", "outputFormat": "第一行一个整数 $c~(c > 0)$，表示可以得到的酒的最小体积。\n\n第二行两个整数 $P_a$ 和 $P_b$（中间用一个空格分隔），分别表示从体积为 $a$ ml 的酒杯中倒出酒的次数和将酒倒入体积为 $b$ ml 的酒杯中的次数。\n\n若有多种可能的 $P_a,P_b$ 满足要求，那么请输出 $P_a$ 最小的一个。若在 $P_a$ 最小的情况下，有多个 $P_b$ 满足要求，请输出 $P_b$ 最小的一个。", "hint": "### 样例解释\n\n倾倒的方案为：\n\n1. 桶 $\\to$ B 杯；\n2. B 杯 $\\to$ A 杯；\n3. 桶 $\\to$ B 杯；\n4. B 杯 $\\to$ A 杯；\n5. A 杯 $\\to$ 桶; \n6. B 杯 $\\to$ A 杯。", "locale": "zh-CN", "translations": {"en": {"title": "Pouring Beer", "background": "", "description": "Winy is the owner of a bar. His bar offers two volumes of beer, $a$ ml and $b$ ml, served in cups with capacities $a$ ml and $b$ ml respectively.\n\nBusiness is not good. Winy finds that the drunks are very poor. Sometimes they have to leave because they cannot afford $a$ ml or $b$ ml of beer. Therefore, Winy decides to sell a third volume of beer (a smaller volume).\n\nWiny has only two cups with capacities $a$ ml and $b$ ml, and the cups have no markings. He can only obtain new volumes by pouring between the two cups and the barrel.\n\nTo simplify the pouring steps, Winy stipulates:\n1. $a≥b$.\n2. The barrel has infinite capacity, and the amount of beer in the barrel is also infinite (but much smaller than the barrel’s capacity).\n3. Only three pouring operations are allowed:\n   1. Pour beer from the barrel into the cup of capacity $b$ ml.\n   2. Pour the beer from the cup of capacity $a$ ml into the barrel.\n   3. Pour the beer from the cup of capacity $b$ ml into the cup of capacity $a$ ml.\n4. Each pour must either fill the receiving cup to full or empty the source cup completely.\n\nWiny hopes that after several pours, the remaining volume of beer in the $a$ ml cup is as small as possible. He asks you to help design a pouring plan.", "inputFormat": "A single line with two integers $a$ and $b$, satisfying $0<b≤a≤10^9$.", "outputFormat": "The first line contains an integer $c$, representing the minimal volume that can be obtained.\n\nThe second line contains two integers $P_a$ and $P_b$ (separated by a space), representing respectively the number of times pouring from the $a$ ml cup into the barrel and the number of times pouring into the $b$ ml cup from the barrel.\n\nIf multiple pairs $P_a,P_b$ satisfy the requirement, output the one with the smallest $P_a$. If there are still multiple choices under the smallest $P_a$, output the one with the smallest $P_b$.", "hint": "Sample explanation:\n\nThe pouring plan is:\n1. Barrel -> cup B.\n2. Cup B -> cup A.\n3. Barrel -> cup B.\n4. Cup B -> cup A.\n5. Cup A -> barrel.\n6. Cup B -> cup A.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "倒酒", "background": null, "description": "Winy 是一家酒吧的老板，他的酒吧提供两种体积的啤酒，$a$ ml 和 $b$ ml，分别使用容积为 $a$ ml 和 $b$ ml 的酒杯来装载。\n\n酒吧的生意并不好。Winy 发现酒鬼们都非常穷。有时，他们会因为负担不起 $a$ ml 或者 $b$ ml 啤酒的消费，而不得不离去。因此，Winy 决定出售第三种体积的啤酒（较小体积的啤酒）。\n\nWiny 只有两种杯子，容积分别为 $a$ ml 和 $b$ ml，而且啤酒杯是没有刻度的。他只能通过两种杯子和酒桶间的互相倾倒来得到新的体积的酒。\n\n为了简化倒酒的步骤，Winy 规定：\n\n1.  $a \\ge b$；\n2.  酒桶容积无限大，酒桶中酒的体积也是无限大（但远小于桶的容积）；\n3. 只包含三种可能的倒酒操作：  \n   1. 将酒桶中的酒倒入容积为 $b$ ml 的酒杯中；  \n   2. 将容积为 $a$ ml 的酒杯中的酒倒入酒桶；  \n   3. 将容积为 $b$ ml 的酒杯中的酒倒入容积为 $a$ ml 的酒杯中。\n4. 每次倒酒必须把杯子倒满或把被倾倒的杯子倒空。\n\nWiny 希望通过若干次倾倒得到容积为 $a$ ml 酒杯中剩下的酒的体积尽可能小，他请求你帮助他设计倾倒的方案。", "inputFormat": "输入共一行两个整数 $a$ 和 $b$，满足 $0 < b \\le a \\le 10^9$。", "outputFormat": "第一行一个整数 $c~(c > 0)$，表示可以得到的酒的最小体积。\n\n第二行两个整数 $P_a$ 和 $P_b$（中间用一个空格分隔），分别表示从体积为 $a$ ml 的酒杯中倒出酒的次数和将酒倒入体积为 $b$ ml 的酒杯中的次数。\n\n若有多种可能的 $P_a,P_b$ 满足要求，那么请输出 $P_a$ 最小的一个。若在 $P_a$ 最小的情况下，有多个 $P_b$ 满足要求，请输出 $P_b$ 最小的一个。", "hint": "### 样例解释\n\n倾倒的方案为：\n\n1. 桶 $\\to$ B 杯；\n2. B 杯 $\\to$ A 杯；\n3. 桶 $\\to$ B 杯；\n4. B 杯 $\\to$ A 杯；\n5. A 杯 $\\to$ 桶; \n6. B 杯 $\\to$ A 杯。", "locale": "zh-CN"}}}
{"pid": "P1293", "type": "P", "difficulty": 2, "samples": [["7 9289 Vladivostok\n5 8523 Chabarovsk\n3 5184 Irkutsk\n8 2213 Yalutorovsk\n10 0 Moscow\n", "Yalutorovsk 112125\n"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "班级聚会", "background": null, "description": "毕业 25 年以后，我们的主人公开始准备同学聚会。打了无数电话后他终于搞到了所有同学的地址。他们有些人仍在本城市，但大多数人分散在其他的城市。不过，他发现一个巧合，所有地址都恰好分散在一条铁路线上。他准备出发邀请但无法决定应该在哪个地方举行宴会。最后他决定选择一个地点，使大家旅行的花费和最小。\n\n不幸的是，我们的主人公既不擅长数学，也不擅长计算机。他请你帮忙写一个程序，根据他同学的地址，选择聚会的最佳地点。花费相同时优先取靠近莫斯科的城市。", "inputFormat": "输入数据的每一行描述一个城市的信息。对于每个城市，\n\n首先是城市里同学的个数，紧跟着是这个城市到 Moscow（起点站）的距离（单位 $\\rm km$），最后是城市的名称。最后一行描述的总是 Moscow，它在铁路线的一端，距离为 $0$。", "outputFormat": "聚会地点城市名称和旅行费用（单程），两者之间用一空格隔开。每 $\\rm km$ 花费一个卢布。", "hint": "### 数据范围及约定\n\n对于全部数据，保证城市数量 $ \\le 150$，距离 $ \\le 10000$，同学个数 $ \\le 50$。", "locale": "zh-CN", "translations": {"en": {"title": "Class Reunion", "background": "", "description": "Twenty-five years after graduation, our protagonist starts preparing a class reunion. After countless phone calls, he finally obtains the addresses of all classmates. Some still live in the same city, but most are scattered in other cities. However, he notices a coincidence: all addresses happen to lie along a single railway line. He plans to set out to invite them but cannot decide where to hold the banquet. In the end, he decides to choose a location that minimizes the sum of everyone’s travel costs.\n\nUnfortunately, our protagonist is neither good at math nor computers. He asks you to write a program that, given his classmates’ addresses, selects the best reunion location. If the total cost is tied, choose the city closer to Moscow.", "inputFormat": "Each line of the input data describes one city. For each city, first comes the number of classmates living in that city, followed by the distance from this city to Moscow (the starting station) in $\\rm km$, and finally the city name. The last line always describes Moscow, which lies at one end of the railway line and has distance $0$.", "outputFormat": "Output the city name of the meeting location and the travel cost (one-way), separated by a single space. Each $\\rm km$ costs one ruble.", "hint": "Constraints\n\nFor all testdata, it is guaranteed that the number of cities $ \\le 150$, the distance $ \\le 10000$, and the number of classmates $ \\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "班级聚会", "background": null, "description": "毕业 25 年以后，我们的主人公开始准备同学聚会。打了无数电话后他终于搞到了所有同学的地址。他们有些人仍在本城市，但大多数人分散在其他的城市。不过，他发现一个巧合，所有地址都恰好分散在一条铁路线上。他准备出发邀请但无法决定应该在哪个地方举行宴会。最后他决定选择一个地点，使大家旅行的花费和最小。\n\n不幸的是，我们的主人公既不擅长数学，也不擅长计算机。他请你帮忙写一个程序，根据他同学的地址，选择聚会的最佳地点。花费相同时优先取靠近莫斯科的城市。", "inputFormat": "输入数据的每一行描述一个城市的信息。对于每个城市，\n\n首先是城市里同学的个数，紧跟着是这个城市到 Moscow（起点站）的距离（单位 $\\rm km$），最后是城市的名称。最后一行描述的总是 Moscow，它在铁路线的一端，距离为 $0$。", "outputFormat": "聚会地点城市名称和旅行费用（单程），两者之间用一空格隔开。每 $\\rm km$ 花费一个卢布。", "hint": "### 数据范围及约定\n\n对于全部数据，保证城市数量 $ \\le 150$，距离 $ \\le 10000$，同学个数 $ \\le 50$。", "locale": "zh-CN"}}}
{"pid": "P1294", "type": "P", "difficulty": 2, "samples": [["4 6\n1 2 10\n2 3 20\n3 4 30\n4 1 40\n1 3 50\n2 4 60", "150"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "洛谷原创", "深度优先搜索 DFS"], "title": "高手去散步", "background": "高手最近谈恋爱了。不过是单相思。“即使是单相思，也是完整的爱情”，高手从未放弃对它的追求。今天，这个阳光明媚的早晨，太阳从西边缓缓升起。于是它找到高手，希望在晨读开始之前和高手一起在鳌头山上一起散步。高手当然不会放弃这次梦寐以求的机会，他已经准备好了一切。\n", "description": "鳌头山上有 $n$ 个观景点，观景点两两之间有游步道共 $m$ 条。高手的那个它，不喜欢太刺激的过程，因此那些没有路的观景点高手是不会选择去的。另外，她也不喜欢去同一个观景点一次以上。而高手想让他们在一起的路程最长（观景时它不会理高手），已知高手的穿梭机可以让他们在任意一个观景点出发，也在任意一个观景点结束。", "inputFormat": "第一行，两个用空格隔开的整数 $n$ 、 $m.$ 之后 $m$ 行，为每条游步道的信息：两端观景点编号、长度。", "outputFormat": "一个整数，表示他们最长相伴的路程。\n", "hint": "对于 $100\\%$ 的数据：$n \\le 20$，$m \\le 50$，保证观景点两两之间不会有多条游步道连接。", "locale": "zh-CN", "translations": {"en": {"title": "Gaoshou Goes for a Walk", "background": "Gaoshou (高手) has recently fallen in love, but it is unrequited. “Even unrequited love is still a complete love.” Gaoshou has never given up pursuing it. Today, on this sunny morning, the sun slowly rose from the west. So she found Gaoshou and hoped to take a walk with him on Aotou Mountain before morning reading begins. Of course, Gaoshou would not miss this long‑awaited opportunity; he has prepared everything.", "description": "There are $n$ viewpoints on Aotou Mountain, and there are $m$ footpaths between pairs of viewpoints. Gaoshou’s crush does not like anything too thrilling, so Gaoshou will not choose viewpoints that have no roads at all. In addition, she does not like to visit the same viewpoint more than once. Gaoshou wants their walking distance together to be as long as possible (while viewing the scenery, she will ignore Gaoshou). It is known that Gaoshou’s shuttle can start at any viewpoint and end at any viewpoint.", "inputFormat": "The first line contains two space‑separated integers $n$ 、 $m.$ After that, there are $m$ lines, each describing one footpath: the indices of its two endpoints and its length.", "outputFormat": "Output a single integer, representing the maximum distance they can stay together.", "hint": "Constraints: For $100\\%$ of the testdata: $n \\le 20$, $m \\le 50$. It is guaranteed that there is no more than one footpath between any pair of viewpoints.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "高手去散步", "background": "高手最近谈恋爱了。不过是单相思。“即使是单相思，也是完整的爱情”，高手从未放弃对它的追求。今天，这个阳光明媚的早晨，太阳从西边缓缓升起。于是它找到高手，希望在晨读开始之前和高手一起在鳌头山上一起散步。高手当然不会放弃这次梦寐以求的机会，他已经准备好了一切。\n", "description": "鳌头山上有 $n$ 个观景点，观景点两两之间有游步道共 $m$ 条。高手的那个它，不喜欢太刺激的过程，因此那些没有路的观景点高手是不会选择去的。另外，她也不喜欢去同一个观景点一次以上。而高手想让他们在一起的路程最长（观景时它不会理高手），已知高手的穿梭机可以让他们在任意一个观景点出发，也在任意一个观景点结束。", "inputFormat": "第一行，两个用空格隔开的整数 $n$ 、 $m.$ 之后 $m$ 行，为每条游步道的信息：两端观景点编号、长度。", "outputFormat": "一个整数，表示他们最长相伴的路程。\n", "hint": "对于 $100\\%$ 的数据：$n \\le 20$，$m \\le 50$，保证观景点两两之间不会有多条游步道连接。", "locale": "zh-CN"}}}
{"pid": "P1295", "type": "P", "difficulty": 5, "samples": [["4 6\n1\n3\n3\n1", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2011", "线段树", "二分", "各省省选", "单调队列", "cdq 分治", "动态规划优化", "天津", "单调栈"], "title": "[TJOI2011] 书架", "background": "由于最近又购买了很多书，所以你打算在自己的书房做一个新书架，为了照顾整体效果，你希望你的书架的宽度越小越好。\n\n书架背靠墙摆放，宽度就是指书架在垂直于墙面的方向上占据的距离。", "description": "现按一定顺序给出所有要放置于书架上的书，共有 $n$ 本，第 $i$ 本书有一个长度 $h_i$。\n\n书架有若干层，层与层之间的宽度不一定相等，但是一层的宽度不能小于其上所摆放的任何一本书的长度。同时，每层上的书的长度之和不能超过一个给定的参数 $m$，且任何层上的书必须是给出的书的序列中连续的几本。\n\n书架的宽度是所有层的宽度之和，求书架的最小宽度。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i + 1)$ 行的整数代表第 $i$ 本书的长度 $h_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $ n \\leq 10^3$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq h_i \\leq 10^9$，$\\max\\limits_{i = 1}^{n} h_i \\leq m \\leq 10^9$。\n\n#### 提示\n\n由于原题题意严重模糊不清，现给出简化版题意：\n\n给出一个长度为 $n$ 的序列 $h$，请将 $h$ 分成若干段，满足每段数字之和都不超过 $m$，最小化每段的最大值之和。 ", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2011] Bookshelf", "background": "Since you have recently bought many books, you plan to make a new bookshelf in your study. To keep the overall style, you want the bookshelf’s width to be as small as possible.\n\nThe bookshelf is placed against a wall; the width refers to the distance it occupies in the direction perpendicular to the wall.", "description": "You are given, in a fixed order, all the books to be placed on the bookshelf. There are $n$ books, and the $i$-th book has a length $h_i$.\n\nThe bookshelf has several layers (shelves). The widths of different layers may vary, but the width of a layer cannot be smaller than the length of any book placed on that layer. At the same time, the sum of the lengths of the books on each layer cannot exceed a given parameter $m$, and the books on any layer must be a contiguous subsequence in the given order.\n\nThe width of the bookshelf is the sum of the widths of all layers. Find the minimum possible width of the bookshelf.", "inputFormat": "The first line contains two integers $n$ and $m$.\n\nFrom line $2$ to line $(n + 1)$, each line contains one integer. The integer on line $(i + 1)$ is the length $h_i$ of the $i$-th book.", "outputFormat": "Output a single integer on one line representing the answer.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, it is guaranteed that $n \\leq 10^3$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\leq 10^5$, $1 \\leq h_i \\leq 10^9$, $\\max\\limits_{i = 1}^{n} h_i \\leq m \\leq 10^9$.\n\nHint\n\nBecause the original statement was quite ambiguous, here is a simplified version:\n\nGiven a sequence $h$ of length $n$, partition $h$ into several segments such that the sum of numbers in each segment does not exceed $m$, and minimize the sum of the maximum values of all segments.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2011] 书架", "background": "由于最近又购买了很多书，所以你打算在自己的书房做一个新书架，为了照顾整体效果，你希望你的书架的宽度越小越好。\n\n书架背靠墙摆放，宽度就是指书架在垂直于墙面的方向上占据的距离。", "description": "现按一定顺序给出所有要放置于书架上的书，共有 $n$ 本，第 $i$ 本书有一个长度 $h_i$。\n\n书架有若干层，层与层之间的宽度不一定相等，但是一层的宽度不能小于其上所摆放的任何一本书的长度。同时，每层上的书的长度之和不能超过一个给定的参数 $m$，且任何层上的书必须是给出的书的序列中连续的几本。\n\n书架的宽度是所有层的宽度之和，求书架的最小宽度。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i + 1)$ 行的整数代表第 $i$ 本书的长度 $h_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $ n \\leq 10^3$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq h_i \\leq 10^9$，$\\max\\limits_{i = 1}^{n} h_i \\leq m \\leq 10^9$。\n\n#### 提示\n\n由于原题题意严重模糊不清，现给出简化版题意：\n\n给出一个长度为 $n$ 的序列 $h$，请将 $h$ 分成若干段，满足每段数字之和都不超过 $m$，最小化每段的最大值之和。 ", "locale": "zh-CN"}}}
{"pid": "P1296", "type": "P", "difficulty": 2, "samples": [["5 10\n10 12 16 37 40\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "二分", "排序", "队列", "双指针 two-pointer"], "title": "奶牛的耳语", "background": "", "description": "在你的养牛场，所有的奶牛都养在一排呈直线的牛栏中。一共有 $n$ 头奶牛，其中第 $i$ 头牛在直线上所处的位置可以用一个整数坐标 $p_i(0\\le p_i \\le 10^8)$ 来表示。在无聊的日子里，奶牛们常常在自己的牛栏里与其它奶牛交流一些八卦新闻。每头奶牛发出的声音响度是一样的，而由于声波的能量衰减，某头奶牛发出的声音只能被与它距离不超过 $d(0 \\le d \\le 10^4)$ 的奶牛所听到，这样这对奶牛就称为可以相互交流的。现在给出所有奶牛的位置和声音所能传播的最远距离 $d$ ，请你编个程序来计算你的养牛场里究竟有多少对可以相互交流的奶牛。", "inputFormat": "第一行包含两个整数 $n,d$。\n\n第二行包含 $n$ 个整数，每个整数都是一个坐标 $p_i$，描述一头奶牛在直线上的位置。", "outputFormat": "一个数，表示养牛场中可以相互交流奶牛的对数。\n", "hint": "数据规模\n\n对于 $40\\%$ 的数据，$1 \\leq n \\leq 10^3$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Cows' Whispers", "background": "", "description": "In your cattle farm, all cows are kept in a row of stalls arranged along a straight line. There are $n$ cows, and the position of the $i$-th cow on the line is represented by an integer coordinate $p_i(0\\le p_i \\le 10^8)$. On boring days, cows often share gossip from their own stalls. Each cow speaks with the same loudness, but due to sound attenuation, a cow’s voice can only be heard by cows within a distance no greater than $d(0 \\le d \\le 10^4)$. In this case, the pair of cows is said to be able to communicate with each other. Given all cows’ positions and the maximum propagation distance $d$, please write a program to compute how many pairs of cows in your farm can communicate.", "inputFormat": "The first line contains two integers $n,d$.\n\nThe second line contains $n$ integers, each being a coordinate $p_i$, describing a cow’s position on the line.", "outputFormat": "A single integer, the number of pairs of cows in the farm that can communicate.", "hint": "Constraints\n\n- For $40\\%$ of the data, $1 \\leq n \\leq 10^3$.\n- For $100\\%$ of the data, $1 \\leq n \\leq 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "奶牛的耳语", "background": "", "description": "在你的养牛场，所有的奶牛都养在一排呈直线的牛栏中。一共有 $n$ 头奶牛，其中第 $i$ 头牛在直线上所处的位置可以用一个整数坐标 $p_i(0\\le p_i \\le 10^8)$ 来表示。在无聊的日子里，奶牛们常常在自己的牛栏里与其它奶牛交流一些八卦新闻。每头奶牛发出的声音响度是一样的，而由于声波的能量衰减，某头奶牛发出的声音只能被与它距离不超过 $d(0 \\le d \\le 10^4)$ 的奶牛所听到，这样这对奶牛就称为可以相互交流的。现在给出所有奶牛的位置和声音所能传播的最远距离 $d$ ，请你编个程序来计算你的养牛场里究竟有多少对可以相互交流的奶牛。", "inputFormat": "第一行包含两个整数 $n,d$。\n\n第二行包含 $n$ 个整数，每个整数都是一个坐标 $p_i$，描述一头奶牛在直线上的位置。", "outputFormat": "一个数，表示养牛场中可以相互交流奶牛的对数。\n", "hint": "数据规模\n\n对于 $40\\%$ 的数据，$1 \\leq n \\leq 10^3$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P1297", "type": "P", "difficulty": 4, "samples": [["3 2 0 4 1", "1.167\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "集训队互测", "概率论", "期望"], "title": "[国家集训队] 单选错位", "background": "", "description": "gx 和 lc 去参加 noip 初赛，其中有一种题型叫单项选择题，顾名思义，只有一个选项是正确答案。\n\n试卷上共有 $n$ 道单选题，第 $i$ 道单选题有 $a_i$ 个选项，这 $a_i$ 个选项编号是 $1,2,3,\\ldots,a_i$，每个选项成为正确答案的概率都是相等的。\n\nlc 采取的策略是每道题目随机写上 $1 \\sim a_i$ 的某个数作为答案选项，他用不了多少时间就能期望做对 $\\sum_{i=1}^n \\frac{1}{a_i}$ 道题目。gx 则是认认真真地做完了这 $n$ 道题目，可是等他做完的时候时间也所剩无几了，于是他匆忙地把答案抄到答题纸上，没想到抄错位了：第 $i$ 道题目的答案抄到了答题纸上的第 $i+1$ 道题目的位置上，特别地，第 $n$ 道题目的答案抄到了第 $1$ 道题目的位置上。\n\n现在 gx 已经走出考场没法改了，不过他还是想知道自己期望能做对几道题目，这样他就知道会不会被 lc 鄙视了。\n\n我们假设 gx 没有做错任何题目，只是答案抄错位置了。\n", "inputFormat": "$n$ 很大，为了避免读入耗时太多，输入文件只有 $5$ 个整数参数 $n, A, B, C, a_1$，由上交的程序产生数列 $a$。下面给出 pascal/C/C++ 的读入语句和产生序列的语句（默认从标准输入读入）：\n\n```cpp\n// for pascal\nreadln(n,A,B,C,q[1]);\nfor i:=2 to n do\nq[i] := (int64(q[i-1]) * A + B) mod 100000001;\nfor i:=1 to n do\nq[i] := q[i] mod C + 1;\n\n\n// for C/C++\nscanf(\"%d%d%d%d%d\", &n, &A, &B, &C, a + 1);\nfor (int i = 2; i <= n; i++)\n\ta[i] = ((long long) a[i - 1] * A + B) % 100000001;\nfor (int i = 1; i <= n; i++)\n\ta[i] = a[i] % C + 1;\n```\n\n选手可以通过以上的程序语句得到 $n$ 和数列 $a$（$a$ 的元素类型是 $32$ 位整数），$n$ 和 $a$ 的含义见题目描述。\n", "outputFormat": "输出一个实数，表示 gx 期望做对的题目个数，保留三位小数。\n", "hint": "【样例说明】\n\n| 正确答案   |   gx的答案    | 做对题目 | 出现概率 |\n| :----------: | :----------: |:----------: | :----------: |\n| $\\{1,1,1\\}$  |    $\\{1,1,1\\}$    |    $3$    |    $\\frac16$ |\n| $\\{1,2,1\\}$    |   $ \\{1,1,2\\}$   |    $1$    |    $\\frac16$ |\n|$\\{1,3,1\\}$    |   $ \\{1,1,3\\} $   |    $1$    |    $\\frac16$ |\n|$\\{2,1,1\\}$    |   $ \\{1,2,1\\} $   |    $1$    |    $\\frac16$|\n|$\\{2,2,1\\}$    |   $ \\{1,2,2\\}$    |    $1$    |    $\\frac16$ |\n|$\\{2,3,1\\}$    |    $\\{1,2,3\\} $   |    $0$    |    $\\frac16$ |\n\n\n\n\n$a = \\{2,3,1\\}$。\n\n共有 $6$ 种情况，每种情况出现的概率是 $\\frac{1}{6}$，gx 期望做对 $\\frac{3+1+1+1+1+0}6 = \\frac76$ 题。（相比之下，lc 随机就能期望做对 $\\frac{11}6$ 题）\n\n\n\n对于 $30\\%$ 的数据，$n\\leq 10, C\\leq 10$。\n\n对于 $80\\%$ 的数据，$n\\leq 10^4, C\\leq 10$。\n\n对于 $90\\%$ 的数据，$n\\leq 5\\times 10^5, C\\leq 10^8$。\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 10^7, 0\\leq A,B,C \\leq 10^8$，$1 \\leq a_i \\leq 10^8$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[National Training Team] Single-Choice Misalignment", "background": "", "description": "gx and lc went to take the NOIP preliminary round. There is a type of problem called single-choice questions, meaning only one option is the correct answer.\n\nThere are $n$ single-choice questions on the paper. The $i$-th question has $a_i$ options, numbered $1, 2, 3, \\ldots, a_i$. Each option is equally likely to be the correct answer.\n\nlc’s strategy is to randomly write down some number from $1 \\sim a_i$ as the answer for each question. In little time, he can expect to get $\\sum_{i=1}^n \\frac{1}{a_i}$ questions correct. gx carefully solved all $n$ questions, but when he finished, time was running out. He hurriedly copied his answers onto the answer sheet, but accidentally shifted them: the answer to the $i$-th question was written in the position of the $(i+1)$-th question on the answer sheet. Specifically, the answer to the $n$-th question was written in the position of the $1$-st question.\n\nNow that gx has left the exam room, he cannot change his answers, but he still wants to know the expected number of questions he got correct, so he can tell whether he will be looked down upon by lc.\n\nWe assume gx did not solve any question incorrectly; only the positions of his answers were misaligned.", "inputFormat": "$n$ is large. To avoid slow input, the input file contains only $5$ integers $n, A, B, C, a_1$, and the submitted program generates the sequence $a$. Below are the Pascal/C/C++ input statements and the sequence-generation statements (input is read from standard input by default):\n\n```cpp\n// for pascal\nreadln(n,A,B,C,q[1]);\nfor i:=2 to n do\nq[i] := (int64(q[i-1]) * A + B) mod 100000001;\nfor i:=1 to n do\nq[i] := q[i] mod C + 1;\n\n\n// for C/C++\nscanf(\"%d%d%d%d%d\", &n, &A, &B, &C, a + 1);\nfor (int i = 2; i <= n; i++)\n\ta[i] = ((long long) a[i - 1] * A + B) % 100000001;\nfor (int i = 1; i <= n; i++)\n\ta[i] = a[i] % C + 1;\n```\n\nContestants can obtain $n$ and the sequence $a$ using the code above (the elements of $a$ are $32$-bit integers). The meanings of $n$ and $a$ are as described in the problem statement.", "outputFormat": "Output a real number representing the expected number of questions gx gets correct, rounded to three decimal places.", "hint": "[Sample Explanation]\n\n| Correct answers | gx's answers | Number correct | Probability |\n| :----------: | :----------: |:----------: | :----------: |\n| $\\{1,1,1\\}$  | $\\{1,1,1\\}$  | $3$ | $\\frac16$ |\n| $\\{1,2,1\\}$  | $\\{1,1,2\\}$  | $1$ | $\\frac16$ |\n| $\\{1,3,1\\}$  | $\\{1,1,3\\}$  | $1$ | $\\frac16$ |\n| $\\{2,1,1\\}$  | $\\{1,2,1\\}$  | $1$ | $\\frac16$ |\n| $\\{2,2,1\\}$  | $\\{1,2,2\\}$  | $1$ | $\\frac16$ |\n| $\\{2,3,1\\}$  | $\\{1,2,3\\}$  | $0$ | $\\frac16$ |\n\n$a = \\{2,3,1\\}$.\n\nThere are $6$ cases, each occurring with probability $\\frac{1}{6}$. The expected number of correct answers for gx is $\\frac{3+1+1+1+1+0}6 = \\frac76$. (In comparison, lc’s random strategy yields an expectation of $\\frac{11}6$.)\n\nFor $30\\%$ of the testdata, $n \\le 10$, $C \\le 10$.\n\nFor $80\\%$ of the testdata, $n \\le 10^4$, $C \\le 10$.\n\nFor $90\\%$ of the testdata, $n \\le 5 \\times 10^5$, $C \\le 10^8$.\n\nFor $100\\%$ of the testdata, $2 \\le n \\le 10^7$, $0 \\le A, B, C \\le 10^8$, $1 \\le a_i \\le 10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 单选错位", "background": "", "description": "gx 和 lc 去参加 noip 初赛，其中有一种题型叫单项选择题，顾名思义，只有一个选项是正确答案。\n\n试卷上共有 $n$ 道单选题，第 $i$ 道单选题有 $a_i$ 个选项，这 $a_i$ 个选项编号是 $1,2,3,\\ldots,a_i$，每个选项成为正确答案的概率都是相等的。\n\nlc 采取的策略是每道题目随机写上 $1 \\sim a_i$ 的某个数作为答案选项，他用不了多少时间就能期望做对 $\\sum_{i=1}^n \\frac{1}{a_i}$ 道题目。gx 则是认认真真地做完了这 $n$ 道题目，可是等他做完的时候时间也所剩无几了，于是他匆忙地把答案抄到答题纸上，没想到抄错位了：第 $i$ 道题目的答案抄到了答题纸上的第 $i+1$ 道题目的位置上，特别地，第 $n$ 道题目的答案抄到了第 $1$ 道题目的位置上。\n\n现在 gx 已经走出考场没法改了，不过他还是想知道自己期望能做对几道题目，这样他就知道会不会被 lc 鄙视了。\n\n我们假设 gx 没有做错任何题目，只是答案抄错位置了。\n", "inputFormat": "$n$ 很大，为了避免读入耗时太多，输入文件只有 $5$ 个整数参数 $n, A, B, C, a_1$，由上交的程序产生数列 $a$。下面给出 pascal/C/C++ 的读入语句和产生序列的语句（默认从标准输入读入）：\n\n```cpp\n// for pascal\nreadln(n,A,B,C,q[1]);\nfor i:=2 to n do\nq[i] := (int64(q[i-1]) * A + B) mod 100000001;\nfor i:=1 to n do\nq[i] := q[i] mod C + 1;\n\n\n// for C/C++\nscanf(\"%d%d%d%d%d\", &n, &A, &B, &C, a + 1);\nfor (int i = 2; i <= n; i++)\n\ta[i] = ((long long) a[i - 1] * A + B) % 100000001;\nfor (int i = 1; i <= n; i++)\n\ta[i] = a[i] % C + 1;\n```\n\n选手可以通过以上的程序语句得到 $n$ 和数列 $a$（$a$ 的元素类型是 $32$ 位整数），$n$ 和 $a$ 的含义见题目描述。\n", "outputFormat": "输出一个实数，表示 gx 期望做对的题目个数，保留三位小数。\n", "hint": "【样例说明】\n\n| 正确答案   |   gx的答案    | 做对题目 | 出现概率 |\n| :----------: | :----------: |:----------: | :----------: |\n| $\\{1,1,1\\}$  |    $\\{1,1,1\\}$    |    $3$    |    $\\frac16$ |\n| $\\{1,2,1\\}$    |   $ \\{1,1,2\\}$   |    $1$    |    $\\frac16$ |\n|$\\{1,3,1\\}$    |   $ \\{1,1,3\\} $   |    $1$    |    $\\frac16$ |\n|$\\{2,1,1\\}$    |   $ \\{1,2,1\\} $   |    $1$    |    $\\frac16$|\n|$\\{2,2,1\\}$    |   $ \\{1,2,2\\}$    |    $1$    |    $\\frac16$ |\n|$\\{2,3,1\\}$    |    $\\{1,2,3\\} $   |    $0$    |    $\\frac16$ |\n\n\n\n\n$a = \\{2,3,1\\}$。\n\n共有 $6$ 种情况，每种情况出现的概率是 $\\frac{1}{6}$，gx 期望做对 $\\frac{3+1+1+1+1+0}6 = \\frac76$ 题。（相比之下，lc 随机就能期望做对 $\\frac{11}6$ 题）\n\n\n\n对于 $30\\%$ 的数据，$n\\leq 10, C\\leq 10$。\n\n对于 $80\\%$ 的数据，$n\\leq 10^4, C\\leq 10$。\n\n对于 $90\\%$ 的数据，$n\\leq 5\\times 10^5, C\\leq 10^8$。\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 10^7, 0\\leq A,B,C \\leq 10^8$，$1 \\leq a_i \\leq 10^8$。\n", "locale": "zh-CN"}}}
{"pid": "P1298", "type": "P", "difficulty": 5, "samples": [["360 120\n3.1415926536\n", "355/113\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "数论"], "title": "最接近的分数", "background": "", "description": "给出一个正小数，找出分子（分子 $ \\ge 0$）不超过 $M$，分母不超过 $N$ 的最简分数或整数，使其最接近给出的小数。“最接近”是指在数轴上该分数距离给出的小数最近，如果这个分数不唯一，输出 ``TOO MANY``。", "inputFormat": "输入共有 $2$ 行，第一行包含两个用空格隔开的正整数 $M$ 和 $N$，表示要求的分数其分子不超过 $M$，分母不超过 $N$；第二行为小数 $R(R>0)$，$R$ 的整数部分为一个阿拉伯数字，小数部分最多有十位。", "outputFormat": "输出仅 $1$ 行，若解唯一则输出 `分子/分母`（整数 $K$ 写成 $\\dfrac{K}{1}$），否则输出 ``TOO MANY``。", "hint": "### 数据范围及约定\n\n对于全部数据，保证 $1\\le M,N\\le 10^7$。", "locale": "zh-CN", "translations": {"en": {"title": "Closest Fraction", "background": "", "description": "Given a positive decimal number, find a reduced fraction or an integer whose numerator (numerator $ \\ge 0$) does not exceed $M$ and denominator does not exceed $N$, such that it is closest to the given decimal on the number line. If this closest fraction is not unique, output ``TOO MANY``.", "inputFormat": "There are $2$ lines of input. The first line contains two space-separated positive integers $M$ and $N$, indicating that the fraction’s numerator does not exceed $M$ and the denominator does not exceed $N$. The second line contains a decimal $R(R>0)$; the integer part of $R$ is a single Arabic digit, and the fractional part has at most ten digits.", "outputFormat": "Output exactly $1$ line. If the solution is unique, output `numerator/denominator` (an integer $K$ should be written as $\\dfrac{K}{1}$); otherwise output ``TOO MANY``.", "hint": "### Constraints\n\nFor all testdata, it is guaranteed that $1\\le M,N\\le 10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最接近的分数", "background": "", "description": "给出一个正小数，找出分子（分子 $ \\ge 0$）不超过 $M$，分母不超过 $N$ 的最简分数或整数，使其最接近给出的小数。“最接近”是指在数轴上该分数距离给出的小数最近，如果这个分数不唯一，输出 ``TOO MANY``。", "inputFormat": "输入共有 $2$ 行，第一行包含两个用空格隔开的正整数 $M$ 和 $N$，表示要求的分数其分子不超过 $M$，分母不超过 $N$；第二行为小数 $R(R>0)$，$R$ 的整数部分为一个阿拉伯数字，小数部分最多有十位。", "outputFormat": "输出仅 $1$ 行，若解唯一则输出 `分子/分母`（整数 $K$ 写成 $\\dfrac{K}{1}$），否则输出 ``TOO MANY``。", "hint": "### 数据范围及约定\n\n对于全部数据，保证 $1\\le M,N\\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P1299", "type": "P", "difficulty": 4, "samples": [["4\n0 1 1 1\n1 1 1 0\n1 0 0 0\n0 0 0 1\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "切孔机", "background": null, "description": "司令部的助理经常需要在大纸上切割各种形状的孔。他们刚刚购买了一台新的切孔机，该机比他们以前使用的要方便自由的多。他们想编写一个程序来求出经过一系列复杂的切孔后会发生什么情况，他们特别想知道纸上形成的孔的数量。\n\n下图列出了经过切割后形成的一些图样。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tbek5h3m.png)", "inputFormat": "第一行是一个整数 $N$，表示切纸操作的次数，$1≤N≤100$。接下来的 $N$ 行中每行给出一个精确的切割操作，每次切割都给出了用空格隔开的四个整数，$x_1,y_1,x_2,y_2,\\ -1000≤x_1,y_1,x_2,y_2≤1000$。$x_1$ 和 $y_1$ 是切割线开始处的坐标值，$x_2$ 和 $y_2$ 是切割线结束时的坐标值。你可以假设所有的切割点都在纸上，不会出界。每次切割都平行于纸上的 $x$ 和 $y$ 坐标轴。", "outputFormat": "一行一个整数，表示切割完成后纸上留下的单独的孔数。注意任何孔的最小面积不低于 $1$ 平方单位。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Hole Cutting Machine", "background": "", "description": "Assistants at the headquarters often need to cut holes of various shapes in a large sheet of paper. They have just purchased a new hole cutting machine, which is much more convenient and flexible than the one they used before. They want to write a program to determine what happens after a sequence of complex cuts; in particular, they want to know how many holes are formed in the paper.\n\nThe figure below shows several patterns formed after cutting.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tbek5h3m.png)", "inputFormat": "The first line contains an integer $N$, the number of cutting operations, with $1 \\le N \\le 100$. Each of the next $N$ lines gives one precise cut, described by four space-separated integers $x_1, y_1, x_2, y_2$, with $-1000 \\le x_1, y_1, x_2, y_2 \\le 1000$. Here, $x_1$ and $y_1$ are the coordinates where the cut starts, and $x_2$ and $y_2$ are the coordinates where the cut ends. You may assume all cutting points lie on the paper and never go out of bounds. Each cut is an axis-aligned segment (parallel to the $x$ or $y$ axis).", "outputFormat": "Output a single integer on one line, the number of separate holes on the paper after all cuts are completed. Note that the area of any hole is at least $1$ square unit.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "切孔机", "background": null, "description": "司令部的助理经常需要在大纸上切割各种形状的孔。他们刚刚购买了一台新的切孔机，该机比他们以前使用的要方便自由的多。他们想编写一个程序来求出经过一系列复杂的切孔后会发生什么情况，他们特别想知道纸上形成的孔的数量。\n\n下图列出了经过切割后形成的一些图样。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tbek5h3m.png)", "inputFormat": "第一行是一个整数 $N$，表示切纸操作的次数，$1≤N≤100$。接下来的 $N$ 行中每行给出一个精确的切割操作，每次切割都给出了用空格隔开的四个整数，$x_1,y_1,x_2,y_2,\\ -1000≤x_1,y_1,x_2,y_2≤1000$。$x_1$ 和 $y_1$ 是切割线开始处的坐标值，$x_2$ 和 $y_2$ 是切割线结束时的坐标值。你可以假设所有的切割点都在纸上，不会出界。每次切割都平行于纸上的 $x$ 和 $y$ 坐标轴。", "outputFormat": "一行一个整数，表示切割完成后纸上留下的单独的孔数。注意任何孔的最小面积不低于 $1$ 平方单位。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1300", "type": "P", "difficulty": 4, "samples": [["8 11\n...........\n....#####..\n....#...#..\n....#...#..\n.#E######..\n....#......\n.##F#......\n...........\n", "8\n"], ["17 21\n.....................\n.#######.............\n.#.....#.......#.....\n.###...#.......#.....\n...#...#.......#.....\n.###...#.......#.....\n.#.....#.......#.....\n.############F#####..\n.......#..........#..\n.......#..........#..\n...#...#...#####..#..\n...#...#...#.#.#..#..\n..#S########.#.#..#..\n...#.......#.###..#..\n...#.......#......#..\n...........########..\n.....................", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论"], "title": "城市街道交通费系统", "background": "", "description": "城市街道交费系统最近创立了。一辆汽车左转一次需付费 $1$ ，右转一次需付费 $5$ 。只有当前进、左转、右转都无路可走的时候，调头才是允许的，调头每次付费 $10$ 。\n\n给出一张城市地图，要求你求出从起始点到达终止点的花费最少的路径。幸运的是，所有的道路都是正北、正南、正西或正东方向的。", "inputFormat": "输入格式如下：\n\n1. 第一行有两个整数，地图高度 $h$ 和宽度 $w$。\n2. 其后 $h$ 行，每行 $w$ 个字符，将是以下字符中的一个：\n\n- `.` 表示障碍区。\n- `#` 表示道路。\n- `E` 表示起始点且汽车面朝东。\n- `W` 表示起始点且汽车面朝西。\n- `N` 表示起始点且汽车面朝北。\n- `S` 表示起始点且汽车面朝南。\n- `F` 表示终点。", "outputFormat": "仅包含一个整数，即为最便宜路径的费用。\n", "hint": "样例一解释：\n\n直走，然后左转 $3$ 次，最后右转到终止点 `F`。如果先直走然后右转 $2$ 次，花费将是 $10$ 。\n\n---\n\n样例二解释：\n\n最便宜的路径花费 $7$ ：立刻左转，直走，在第一个岔路口左转，随后右转。\n\n---\n\n对于 $100\\%$ 的数据：$4 \\leq h,w \\leq 30$。\n\n数据保证地图中只有一个起点，一个终点，他们之间存在着可通达的路径。同时保证地图最外层一圈都是障碍。", "locale": "zh-CN", "translations": {"en": {"title": "City Street Traffic Fee System", "background": "", "description": "A city street toll system was recently established. A car must pay $1$ for each left turn and $5$ for each right turn. A U-turn is allowed only when going straight, turning left, and turning right are all impossible; each U-turn costs $10$.\n\nGiven a city map, find the path from the start to the finish with the minimum cost. Fortunately, all roads run due north, due south, due west, or due east.", "inputFormat": "The input format is as follows:\n\n1. The first line contains two integers, the map height $h$ and width $w$.\n2. Then follow $h$ lines, each with $w$ characters, each being one of the following:\n\n- `.` denotes an obstacle.\n- `#` denotes a road.\n- `E` denotes the start, with the car facing east.\n- `W` denotes the start, with the car facing west.\n- `N` denotes the start, with the car facing north.\n- `S` denotes the start, with the car facing south.\n- `F` denotes the finish.", "outputFormat": "Output a single integer: the cost of the cheapest path.", "hint": "Explanation for Sample 1:\n\nGo straight, then turn left $3$ times, and finally turn right to reach `F`. If you go straight first and then turn right $2$ times, the cost will be $10$.\n\n---\n\nExplanation for Sample 2:\n\nThe cheapest path costs $7$: turn left immediately, go straight, turn left at the first intersection, then turn right.\n\n---\n\nFor $100\\%$ of the testdata: $4 \\leq h,w \\leq 30$.\n\nIt is guaranteed that there is exactly one start and one finish on the map, and that there exists a reachable path between them. It is also guaranteed that the outermost border of the map consists entirely of obstacles.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "城市街道交通费系统", "background": "", "description": "城市街道交费系统最近创立了。一辆汽车左转一次需付费 $1$ ，右转一次需付费 $5$ 。只有当前进、左转、右转都无路可走的时候，调头才是允许的，调头每次付费 $10$ 。\n\n给出一张城市地图，要求你求出从起始点到达终止点的花费最少的路径。幸运的是，所有的道路都是正北、正南、正西或正东方向的。", "inputFormat": "输入格式如下：\n\n1. 第一行有两个整数，地图高度 $h$ 和宽度 $w$。\n2. 其后 $h$ 行，每行 $w$ 个字符，将是以下字符中的一个：\n\n- `.` 表示障碍区。\n- `#` 表示道路。\n- `E` 表示起始点且汽车面朝东。\n- `W` 表示起始点且汽车面朝西。\n- `N` 表示起始点且汽车面朝北。\n- `S` 表示起始点且汽车面朝南。\n- `F` 表示终点。", "outputFormat": "仅包含一个整数，即为最便宜路径的费用。\n", "hint": "样例一解释：\n\n直走，然后左转 $3$ 次，最后右转到终止点 `F`。如果先直走然后右转 $2$ 次，花费将是 $10$ 。\n\n---\n\n样例二解释：\n\n最便宜的路径花费 $7$ ：立刻左转，直走，在第一个岔路口左转，随后右转。\n\n---\n\n对于 $100\\%$ 的数据：$4 \\leq h,w \\leq 30$。\n\n数据保证地图中只有一个起点，一个终点，他们之间存在着可通达的路径。同时保证地图最外层一圈都是障碍。", "locale": "zh-CN"}}}
{"pid": "P1301", "type": "P", "difficulty": 4, "samples": [["5 4\r\n3 3 6 7 11\r\n3 2 1 1 3\r\n3 2 2 1 1\r\n2 1 2 2 1\r\n", "4\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "魔鬼之城", "background": "", "description": "在一个被分割为 $N\\times M$ 个正方形房间的矩形魔鬼之城中，一个探险者必须遵循下列规则才能跳跃行动。他必须从 $(1,1)$ 进入，从 $(N,M)$ 走出；在每一房间的墙壁上都写了一个魔法数字，是 $1\\sim 13$ 之内的自然数；探险者可以想像出 $8$ 个方向中的任何一个（水平或垂直或对角线方向），随后他就可以作一次空间跳跃穿过这一方向上的连续的 $X$ 个房间，其中 $X$ 是他原来所在房间的魔法数字。但如果在这一方向上的房间数小于 $X$，则他不作任何跳跃，而必须想像另一个方向。同时，探险者不能作连续两次相同方向的跳跃。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1r5tkwsy.png)\n \n例如在上图的 $5\\ \\times 4$ 的魔鬼之城中，如果探险者现在所在的位置是 $(3,3)$，那么通过依次空间跳跃他可以到达下列房间中的一个：$(1,1)$，$(3,1)$，$(1,3)$，$(5,1)$，或 $(5,3)$。另外，如果他要用两次跳跃从 $(5,4)$ 到达 $(3,2)$，则他不能首先跳到 $(4,3)$（因为这样他第二次跳跃的方向将和第一次相同，而这是不允许的）。所以他必须先跳跃到 $(2,1)$。\n请你写一个程序，对给定的地图，算出探险者至少需要跳跃多少步才能离开魔鬼之城。\n\n", "inputFormat": "第一行两个整数 $N,M\\ (1\\le N,M\\le 100)$。\n\n下来有 $M$ 行，每行为 $N$ 个自然数，表示对应房间中的魔法数字。", "outputFormat": "出最小步数，如果探险者无法离开魔鬼之城，请输出 `NEVER`。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Devil City", "background": "", "description": "In a rectangular “Devil City” divided into $N \\times M$ square rooms, an explorer must follow the rules below to move by jumping. He must enter at $(1, 1)$ and exit at $(N, M)$. On the wall of every room there is a magic number, which is a natural number from $1$ to $13$ inclusive. The explorer can imagine any of the $8$ directions (horizontal, vertical, or diagonal), and then make a spatial jump passing through $X$ consecutive rooms in that direction, where $X$ is the magic number of the room he is currently in. However, if the number of rooms available in that direction is less than $X$, he does not jump and must imagine another direction. In addition, the explorer cannot make two consecutive jumps in the same direction.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1r5tkwsy.png)\n\nFor example, in the $5 \\times 4$ Devil City shown above, if the explorer is currently at $(3, 3)$, then by making successive spatial jumps he can reach one of the following rooms: $(1, 1)$, $(3, 1)$, $(1, 3)$, $(5, 1)$, or $(5, 3)$. Moreover, if he wants to reach $(3, 2)$ from $(5, 4)$ in two jumps, he cannot first jump to $(4, 3)$ (because then the direction of his second jump would be the same as the first, which is not allowed). Therefore, he must first jump to $(2, 1)$.  \nPlease write a program that, for a given map, computes the minimum number of jumps the explorer needs to escape the Devil City.", "inputFormat": "The first line contains two integers $N, M$ $(1 \\le N, M \\le 100)$.  \nThen follow $N$ lines, each containing $M$ natural numbers, representing the magic numbers in the corresponding rooms.", "outputFormat": "Output the minimum number of jumps. If the explorer cannot escape the Devil City, output `NEVER`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "魔鬼之城", "background": "", "description": "在一个被分割为 $N\\times M$ 个正方形房间的矩形魔鬼之城中，一个探险者必须遵循下列规则才能跳跃行动。他必须从 $(1,1)$ 进入，从 $(N,M)$ 走出；在每一房间的墙壁上都写了一个魔法数字，是 $1\\sim 13$ 之内的自然数；探险者可以想像出 $8$ 个方向中的任何一个（水平或垂直或对角线方向），随后他就可以作一次空间跳跃穿过这一方向上的连续的 $X$ 个房间，其中 $X$ 是他原来所在房间的魔法数字。但如果在这一方向上的房间数小于 $X$，则他不作任何跳跃，而必须想像另一个方向。同时，探险者不能作连续两次相同方向的跳跃。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1r5tkwsy.png)\n \n例如在上图的 $5\\ \\times 4$ 的魔鬼之城中，如果探险者现在所在的位置是 $(3,3)$，那么通过依次空间跳跃他可以到达下列房间中的一个：$(1,1)$，$(3,1)$，$(1,3)$，$(5,1)$，或 $(5,3)$。另外，如果他要用两次跳跃从 $(5,4)$ 到达 $(3,2)$，则他不能首先跳到 $(4,3)$（因为这样他第二次跳跃的方向将和第一次相同，而这是不允许的）。所以他必须先跳跃到 $(2,1)$。\n请你写一个程序，对给定的地图，算出探险者至少需要跳跃多少步才能离开魔鬼之城。\n\n", "inputFormat": "第一行两个整数 $N,M\\ (1\\le N,M\\le 100)$。\n\n下来有 $M$ 行，每行为 $N$ 个自然数，表示对应房间中的魔法数字。", "outputFormat": "出最小步数，如果探险者无法离开魔鬼之城，请输出 `NEVER`。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1302", "type": "P", "difficulty": 4, "samples": [["3\r\n2 6 4\r\n1 4 1\r\n2 4 1\r\n", "3\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "可见矩形", "background": "", "description": "给定平面上 $n$ 个互不相交（指公共面积为零）的正方形，它们的顶点坐标均为整数。设坐标原点为 $O(0,0)$。对于任一正方形 $R$，如果可以找到 $R$ 的边上 $2$ 个不同的点 $A$ 和 $B$，使 $\\triangle OAB$ 的内部与其他正方形无公共点，则称正方形 $R$ 是从 $O$ 点可见的正方形。\n\n对于给定的 $n$ 个互不相交的正方形，计算从坐标原点 $O$ 可见的正方形个数。", "inputFormat": "输入文件的第一行是正方形个数 $n$（$1\\le n\\le 1000$）。\n\n接下来 $n$ 行中，每行有三个表示正方形的整数 $X,Y,L$。其中，$X$ 和 $Y$ 表示正方形的左下角顶点坐标，$L$ 表示边长，$1\\le X,Y,L\\le 10000$。", "outputFormat": "输出文件仅有一行包含一个整数，表示从坐标原点 $O$ 可见的正方形个数。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Visible Squares", "background": "", "description": "Given $n$ pairwise non-overlapping (their common area is zero) squares on the plane, whose vertex coordinates are all integers. Let the origin be $O(0,0)$. For any square $R$, if there exist two distinct points $A$ and $B$ on the boundary of $R$ such that the interior of $\\triangle OAB$ has no common point with any other square, then we say that $R$ is visible from $O$.\n\nGiven these $n$ pairwise non-overlapping squares, compute the number of squares visible from the origin $O$.", "inputFormat": "The first line contains the number of squares $n$ ($1 \\le n \\le 1000$).\n\nEach of the next $n$ lines contains three integers $X,Y,L$ describing a square. Here $X$ and $Y$ are the coordinates of the lower-left vertex, and $L$ is the side length, where $1 \\le X, Y, L \\le 10000$.", "outputFormat": "Output a single line containing one integer, the number of squares visible from the origin $O$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "可见矩形", "background": "", "description": "给定平面上 $n$ 个互不相交（指公共面积为零）的正方形，它们的顶点坐标均为整数。设坐标原点为 $O(0,0)$。对于任一正方形 $R$，如果可以找到 $R$ 的边上 $2$ 个不同的点 $A$ 和 $B$，使 $\\triangle OAB$ 的内部与其他正方形无公共点，则称正方形 $R$ 是从 $O$ 点可见的正方形。\n\n对于给定的 $n$ 个互不相交的正方形，计算从坐标原点 $O$ 可见的正方形个数。", "inputFormat": "输入文件的第一行是正方形个数 $n$（$1\\le n\\le 1000$）。\n\n接下来 $n$ 行中，每行有三个表示正方形的整数 $X,Y,L$。其中，$X$ 和 $Y$ 表示正方形的左下角顶点坐标，$L$ 表示边长，$1\\le X,Y,L\\le 10000$。", "outputFormat": "输出文件仅有一行包含一个整数，表示从坐标原点 $O$ 可见的正方形个数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1303", "type": "P", "difficulty": 2, "samples": [["1 \n2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "高精度"], "title": "A*B Problem", "background": "高精度乘法模板题。", "description": "给出两个非负整数，求它们的乘积。", "inputFormat": "输入共两行，每行一个非负整数。\n", "outputFormat": "输出一个非负整数表示乘积。", "hint": "每个非负整数不超过 $10^{2000}$。", "locale": "zh-CN", "translations": {"en": {"title": "A*B Problem", "background": "A template problem for big-integer multiplication.", "description": "Given two non-negative integers, compute their product.", "inputFormat": "The input consists of two lines, each containing a non-negative integer.", "outputFormat": "Output a single non-negative integer representing the product.", "hint": "Each non-negative integer does not exceed $10^{2000}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "A*B Problem", "background": "高精度乘法模板题。", "description": "给出两个非负整数，求它们的乘积。", "inputFormat": "输入共两行，每行一个非负整数。\n", "outputFormat": "输出一个非负整数表示乘积。", "hint": "每个非负整数不超过 $10^{2000}$。", "locale": "zh-CN"}}}
{"pid": "P1304", "type": "P", "difficulty": 1, "samples": [["10", "4=2+2\n6=3+3\n8=3+5\n10=3+7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "数学", "素数判断,质数,筛法"], "title": "哥德巴赫猜想", "background": "", "description": "输入一个偶数 $N$，验证 $4\\sim N$ 所有偶数是否符合哥德巴赫猜想：任一大于 $2$ 的偶数都可写成两个质数之和。如果一个数不止一种分法，则输出第一个加数相比其他分法最小的方案。例如 $10$，$10=3+7=5+5$，则 $10=5+5$ 是错误答案。", "inputFormat": "第一行输入一个正偶数 $N$\n", "outputFormat": "输出 $\\dfrac{N-2}{2}$ 行。对于第 $i$ 行：\n\n首先先输出正偶数 $2i+2$，然后输出等号，再输出加和为 $2i+2$ 且第一个加数最小的两个质数，以加号隔开。", "hint": "数据保证，$ 4 \\leq N\\leq10000$。", "locale": "zh-CN", "translations": {"en": {"title": "Goldbach's Conjecture", "background": "", "description": "Given an even number $N$, verify whether all even numbers from $4$ to $N$ satisfy Goldbach's conjecture: every even number greater than $2$ can be written as the sum of two primes. If a number has more than one representation, output the one whose first addend is minimal among all representations. For example, for $10$, $10=3+7=5+5$, then $10=5+5$ is a wrong answer.", "inputFormat": "The first line contains a positive even integer $N$.", "outputFormat": "Output $\\dfrac{N-2}{2}$ lines. For the $i$-th line:\nFirst output the positive even number $2i+2$, then an equals sign, and then two primes that sum to $2i+2$ with the smallest possible first addend, separated by a plus sign.", "hint": "Constraints: $4 \\leq N \\leq 10000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "哥德巴赫猜想", "background": "", "description": "输入一个偶数 $N$，验证 $4\\sim N$ 所有偶数是否符合哥德巴赫猜想：任一大于 $2$ 的偶数都可写成两个质数之和。如果一个数不止一种分法，则输出第一个加数相比其他分法最小的方案。例如 $10$，$10=3+7=5+5$，则 $10=5+5$ 是错误答案。", "inputFormat": "第一行输入一个正偶数 $N$\n", "outputFormat": "输出 $\\dfrac{N-2}{2}$ 行。对于第 $i$ 行：\n\n首先先输出正偶数 $2i+2$，然后输出等号，再输出加和为 $2i+2$ 且第一个加数最小的两个质数，以加号隔开。", "hint": "数据保证，$ 4 \\leq N\\leq10000$。", "locale": "zh-CN"}}}
{"pid": "P1305", "type": "P", "difficulty": 2, "samples": [["6\nabc\nbdi\ncj*\nd**\ni**\nj**", "abdicj"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "搜索", "树形数据结构", "递归"], "title": "新二叉树", "background": null, "description": "输入一串二叉树，输出其前序遍历。", "inputFormat": "第一行为二叉树的节点数 $n$。($1 \\leq n \\leq 26$)\n\n后面 $n$ 行，第一个字母为节点，后两个字母分别为其左右儿子。特别地，数据保证第一行读入的节点必为根节点。\n\n空节点用 `*` 表示", "outputFormat": "二叉树的前序遍历。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "New Binary Tree", "background": "", "description": "Given a binary tree, output its preorder traversal.", "inputFormat": "The first line contains the number of nodes $n$ ($1 \\leq n \\leq 26$).\n\nEach of the next $n$ lines contains three characters: the first character is the node, and the next two characters are its left and right children, respectively. In particular, the testdata guarantees that the node appearing on the first of these $n$ lines is the root node.\n\nA null child is denoted by `*`.", "outputFormat": "The preorder traversal of the binary tree.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "新二叉树", "background": null, "description": "输入一串二叉树，输出其前序遍历。", "inputFormat": "第一行为二叉树的节点数 $n$。($1 \\leq n \\leq 26$)\n\n后面 $n$ 行，第一个字母为节点，后两个字母分别为其左右儿子。特别地，数据保证第一行读入的节点必为根节点。\n\n空节点用 `*` 表示", "outputFormat": "二叉树的前序遍历。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1306", "type": "P", "difficulty": 5, "samples": [["4 7", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "倍增", "线性数据结构", "递归", "Fibonacci 数列"], "title": "斐波那契公约数", "background": "", "description": "对于 Fibonacci 数列：\n\n$$ f_i = \\begin{cases}\n  [i = 1]               & i \\leq 1 \\\\\n  f_{i - 1} + f_{i - 2} & i \\gt 1\n\\end{cases}$$\n\n请求出 $f_n$ 与 $f_m$ 的最大公约数，即 $\\gcd(f_n, f_m)$。", "inputFormat": "一行两个正整数 $n$ 和 $m$ 。", "outputFormat": "输出一行一个整数，代表 $f_n$ 和 $f_m$ 的最大公约数。答案请对 $10^8$ 取模。", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n, m \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Fibonacci GCD", "background": "", "description": "For the Fibonacci sequence:\n\n$$ f_i = \\begin{cases}\n  [i = 1]               & i \\leq 1 \\\\\n  f_{i - 1} + f_{i - 2} & i \\gt 1\n\\end{cases}$$\n\nCompute the greatest common divisor of $f_n$ and $f_m$, i.e., $\\gcd(f_n, f_m)$.", "inputFormat": "One line contains two positive integers $n$ and $m$.", "outputFormat": "Output one integer, the greatest common divisor of $f_n$ and $f_m$. Print the answer modulo $10^8$.", "hint": "- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n, m \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "斐波那契公约数", "background": "", "description": "对于 Fibonacci 数列：\n\n$$ f_i = \\begin{cases}\n  [i = 1]               & i \\leq 1 \\\\\n  f_{i - 1} + f_{i - 2} & i \\gt 1\n\\end{cases}$$\n\n请求出 $f_n$ 与 $f_m$ 的最大公约数，即 $\\gcd(f_n, f_m)$。", "inputFormat": "一行两个正整数 $n$ 和 $m$ 。", "outputFormat": "输出一行一个整数，代表 $f_n$ 和 $f_m$ 的最大公约数。答案请对 $10^8$ 取模。", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n, m \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1307", "type": "P", "difficulty": 1, "samples": [["123", "321"], ["-380", "-83"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "字符串", "2011", "NOIP 普及组"], "title": "[NOIP 2011 普及组] 数字反转", "background": "", "description": "给定一个整数 $N$，请将该数各个位上数字反转得到一个新数。新数也应满足整数的常见形式，即除非给定的原数为零，否则反转后得到的新数的最高位数字不应为零（参见样例 2）。\n", "inputFormat": "一个整数 $N$。\n", "outputFormat": "一个整数，表示反转后的新数。\n", "hint": "**【数据范围】**\n\n$-1,000,000,000\\leq N\\leq 1,000,000,000 $。\n\nnoip2011 普及组第一题\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2011 Junior] Digit Reversal", "background": "", "description": "Given an integer $N$, reverse its digits to obtain a new number. The new number should also follow the usual form of integers: unless the original number is zero, the leading digit of the reversed number must not be zero (see Sample 2).", "inputFormat": "A single integer N.", "outputFormat": "A single integer, which is the reversed number.", "hint": "【Constraints】\n\n$-1,000,000,000\\leq N\\leq 1,000,000,000$.\n\nNOIP 2011 Junior Problem 1.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2011 普及组] 数字反转", "background": "", "description": "给定一个整数 $N$，请将该数各个位上数字反转得到一个新数。新数也应满足整数的常见形式，即除非给定的原数为零，否则反转后得到的新数的最高位数字不应为零（参见样例 2）。\n", "inputFormat": "一个整数 $N$。\n", "outputFormat": "一个整数，表示反转后的新数。\n", "hint": "**【数据范围】**\n\n$-1,000,000,000\\leq N\\leq 1,000,000,000 $。\n\nnoip2011 普及组第一题\n", "locale": "zh-CN"}}}
{"pid": "P1308", "type": "P", "difficulty": 2, "samples": [["To\nto be or not to be is a question\n", "2 0\n\n"], ["to\nDid the Ottoman Empire lose its power at that time", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "2011", "NOIP 普及组"], "title": "[NOIP 2011 普及组] 统计单词数", "background": "", "description": "一般的文本编辑器都有查找单词的功能，该功能可以快速定位特定单词在文章中的位置，有的还能统计出特定单词在文章中出现的次数。\n\n现在，请你编程实现这一功能，具体要求是：给定一个单词，请你输出它在给定的文章中出现的次数和第一次出现的位置。注意：匹配单词时，不区分大小写，但要求完全匹配，即给定单词必须与文章中的某一独立单词在不区分大小写的情况下完全相同（参见样例 1），如果给定单词仅是文章中某一单词的一部分则不算匹配（参见样例 2）。\n", "inputFormat": "共 $2$ 行。\n\n第 $1$ 行为一个字符串，其中只含字母，表示给定单词；\n\n第 $2$ 行为一个字符串，其中只可能包含字母和空格，表示给定的文章。\n", "outputFormat": "一行，如果在文章中找到给定单词则输出两个整数，两个整数之间用一个空格隔开，分别是单词在文章中出现的次数和第一次出现的位置（即在文章中第一次出现时，单词首字母在文章中的位置，位置从 $0$ 开始）；如果单词在文章中没有出现，则直接输出一个整数 $-1$。\n\n注意：空格占一个字母位\n", "hint": "数据范围\n\n$1\\leq $ 第一行单词长度 $\\leq10$。\n\n$1\\leq $ 文章长度 $\\leq10^6$。\n\nnoip2011 普及组第 2 题\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2011 Junior] Count Word Occurrences", "background": "", "description": "Most text editors have a “find word” feature that can quickly locate the position of a specific word in an article; some can also count how many times the word appears.\n\nNow, please program to implement this feature. Specifically: given a word, output the number of times it appears in the given article and the position of its first occurrence. Note: Matching is case-insensitive, but it must be an exact match, meaning the given word must be exactly the same as an independent word in the article when case is ignored (see Sample 1). If the given word is only a part of a word in the article, it does not count as a match (see Sample 2).", "inputFormat": "A total of $2$ lines.\n\nThe first line is a string containing only letters, representing the given word.\n\nThe second line is a string that may contain only letters and spaces, representing the given article.", "outputFormat": "Output one line. If the given word is found in the article, output two integers separated by a single space: the number of occurrences of the word in the article and the position of its first occurrence (that is, when it first appears, the position of the word’s first letter in the article; the position starts from $0$). If the word does not appear in the article, output a single integer $-1$.\n\nNote: A space counts as one character position.", "hint": "Constraints\n\n$1\\leq $ length of the word on the first line $\\leq10$.\n\n$1\\leq $ article length $\\leq10^6$.\n\nNOIP 2011 Junior, Problem 2.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2011 普及组] 统计单词数", "background": "", "description": "一般的文本编辑器都有查找单词的功能，该功能可以快速定位特定单词在文章中的位置，有的还能统计出特定单词在文章中出现的次数。\n\n现在，请你编程实现这一功能，具体要求是：给定一个单词，请你输出它在给定的文章中出现的次数和第一次出现的位置。注意：匹配单词时，不区分大小写，但要求完全匹配，即给定单词必须与文章中的某一独立单词在不区分大小写的情况下完全相同（参见样例 1），如果给定单词仅是文章中某一单词的一部分则不算匹配（参见样例 2）。\n", "inputFormat": "共 $2$ 行。\n\n第 $1$ 行为一个字符串，其中只含字母，表示给定单词；\n\n第 $2$ 行为一个字符串，其中只可能包含字母和空格，表示给定的文章。\n", "outputFormat": "一行，如果在文章中找到给定单词则输出两个整数，两个整数之间用一个空格隔开，分别是单词在文章中出现的次数和第一次出现的位置（即在文章中第一次出现时，单词首字母在文章中的位置，位置从 $0$ 开始）；如果单词在文章中没有出现，则直接输出一个整数 $-1$。\n\n注意：空格占一个字母位\n", "hint": "数据范围\n\n$1\\leq $ 第一行单词长度 $\\leq10$。\n\n$1\\leq $ 文章长度 $\\leq10^6$。\n\nnoip2011 普及组第 2 题\n", "locale": "zh-CN"}}}
{"pid": "P1309", "type": "P", "difficulty": 3, "samples": [["2 4 2 \n7 6 6 7 \n10 5 20 15 \n", "1\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2011", "递归", "NOIP 普及组", "排序"], "title": "[NOIP 2011 普及组] 瑞士轮", "background": "在双人对决的竞技性比赛，如乒乓球、羽毛球、国际象棋中，最常见的赛制是淘汰赛和循环赛。前者的特点是比赛场数少，每场都紧张刺激，但偶然性较高。后者的特点是较为公平，偶然性较低，但比赛过程往往十分冗长。\n\n本题中介绍的瑞士轮赛制，因最早使用于 1895 年在瑞士举办的国际象棋比赛而得名。它可以看作是淘汰赛与循环赛的折中，既保证了比赛的稳定性，又能使赛程不至于过长。", "description": "$2 \\times N$ 名编号为 $1\\sim 2\\times N$ 的选手共进行 $R$ 轮比赛。每轮比赛开始前，以及所有比赛结束后，都会按照总分从高到低对选手进行一次排名。选手的总分为第一轮开始前的初始分数加上已参加过的所有比赛的得分和。总分相同的，约定编号较小的选手排名靠前。\n\n每轮比赛的对阵安排与该轮比赛开始前的排名有关：第 $1$ 名和第 $2$ 名、第 $3$ 名和第 $4$ 名、……、第 $2\\times K - 1 $ 名和第 $2\\times K$ 名、……  、第 $2\\times N - 1$ 名和第 $2\\times N$ 名，各进行一场比赛。每场比赛胜者得 $1$ 分，负者得 $0$ 分。也就是说除了首轮以外，其它轮比赛的安排均不能事先确定，而是要取决于选手在之前比赛中的表现。\n\n现给定每个选手的初始分数及其实力值，试计算在 $R$ 轮比赛过后，排名第 $Q$ 的选手编号是多少。我们假设选手的实力值两两不同，且每场比赛中实力值较高的总能获胜。", "inputFormat": "第一行是三个正整数 $N,R,Q$，每两个数之间用一个空格隔开，表示有 $2\\times N $ 名选手、$R$ 轮比赛，以及我们关心的名次 $Q$。\n\n第二行是 $2\\times N$ 个非负整数 $s_1, s_2,\\dots, s_{2\\times N}$，每两个数之间用一个空格隔开，其中 $s_i $ 表示编号为 $i$ 的选手的初始分数。\n\n第三行是 $2\\times N$ 个正整数 $w_1,w_2,\\dots,w_{2\\times N}$，每两个数之间用一个空格隔开，其中 $w_i$ 表示编号为 $i$ 的选手的实力值。", "outputFormat": "一个整数，即 $R$ 轮比赛结束后，排名第 $Q$ 的选手的编号。", "hint": "【样例解释】\n\n ![](https://cdn.luogu.com.cn/upload/pic/98.png) \n\n【数据范围】\n\n对于 $30\\%$ 的数据，$1\\le N\\le 100$；\n\n对于 $50\\%$ 的数据，$1\\le N\\le 10000$；\n\n对于 $100\\%$ 的数据，$1\\le N\\le 10^5,1\\le R\\le 50,1\\le Q\\le 2\\times N,0\\le s_1, s_2,\\dots,s_{2\\times N}\\le 10^8,1\\le w_1, w_2 , \\dots, w_{2\\times N}\\le 10^8$。\n\nnoip2011 普及组第 3 题。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2011 Junior] Swiss-system Tournament", "background": "In head-to-head competitive sports such as table tennis, badminton, and chess, the most common formats are knockout and round-robin. The former requires fewer matches and each match is tense and exciting, but it is more random. The latter is fairer and less random, but the process is often very long.\n\nThe Swiss-system format introduced in this problem is named after its earliest use in an international chess tournament held in Switzerland in 1895. It can be seen as a compromise between knockout and round-robin: it ensures stability while keeping the schedule from becoming too long.", "description": "$2 \\times N$ players, numbered $1 \\sim 2 \\times N$, play $R$ rounds. Before each round starts, and after all matches are finished, players are ranked in descending order by total points. A player's total points equal the initial points before round $1$ plus the sum of points earned in all matches already played. If the total points are the same, the player with the smaller id ranks ahead.\n\nThe pairings of each round depend on the ranking at the start of that round: rank $1$ vs rank $2$, rank $3$ vs rank $4$, ..., rank $2 \\times K - 1$ vs rank $2 \\times K$, ..., rank $2 \\times N - 1$ vs rank $2 \\times N$. The winner of each match gets $1$ point and the loser gets $0$ points. That is, except for the first round, the arrangements of the other rounds cannot be determined in advance; they depend on the players' performances in previous matches.\n\nGiven each player's initial points and strength value, compute the id of the player ranked $Q$-th after $R$ rounds. We assume all strength values are pairwise distinct, and in every match the player with the higher strength always wins.", "inputFormat": "The first line contains three positive integers $N, R, Q$, separated by single spaces, indicating there are $2 \\times N$ players, $R$ rounds, and we are interested in the $Q$-th place.\n\nThe second line contains $2 \\times N$ non-negative integers $s_1, s_2, \\dots, s_{2 \\times N}$, separated by single spaces, where $s_i$ denotes the initial points of the player with id $i$.\n\nThe third line contains $2 \\times N$ positive integers $w_1, w_2, \\dots, w_{2 \\times N}$, separated by single spaces, where $w_i$ denotes the strength value of the player with id $i$.", "outputFormat": "Output a single integer: the id of the player ranked $Q$-th after $R$ rounds.", "hint": "Sample Explanation:\n\n![](https://cdn.luogu.com.cn/upload/pic/98.png)\n\nConstraints:\n\n- For $30\\%$ of the testdata, $1 \\le N \\le 100$.\n- For $50\\%$ of the testdata, $1 \\le N \\le 10000$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 10^5$, $1 \\le R \\le 50$, $1 \\le Q \\le 2 \\times N$, $0 \\le s_1, s_2, \\dots, s_{2 \\times N} \\le 10^8$, $1 \\le w_1, w_2, \\dots, w_{2 \\times N} \\le 10^8$.\n\nNOIP 2011 Junior Problem 3.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2011 普及组] 瑞士轮", "background": "在双人对决的竞技性比赛，如乒乓球、羽毛球、国际象棋中，最常见的赛制是淘汰赛和循环赛。前者的特点是比赛场数少，每场都紧张刺激，但偶然性较高。后者的特点是较为公平，偶然性较低，但比赛过程往往十分冗长。\n\n本题中介绍的瑞士轮赛制，因最早使用于 1895 年在瑞士举办的国际象棋比赛而得名。它可以看作是淘汰赛与循环赛的折中，既保证了比赛的稳定性，又能使赛程不至于过长。", "description": "$2 \\times N$ 名编号为 $1\\sim 2\\times N$ 的选手共进行 $R$ 轮比赛。每轮比赛开始前，以及所有比赛结束后，都会按照总分从高到低对选手进行一次排名。选手的总分为第一轮开始前的初始分数加上已参加过的所有比赛的得分和。总分相同的，约定编号较小的选手排名靠前。\n\n每轮比赛的对阵安排与该轮比赛开始前的排名有关：第 $1$ 名和第 $2$ 名、第 $3$ 名和第 $4$ 名、……、第 $2\\times K - 1 $ 名和第 $2\\times K$ 名、……  、第 $2\\times N - 1$ 名和第 $2\\times N$ 名，各进行一场比赛。每场比赛胜者得 $1$ 分，负者得 $0$ 分。也就是说除了首轮以外，其它轮比赛的安排均不能事先确定，而是要取决于选手在之前比赛中的表现。\n\n现给定每个选手的初始分数及其实力值，试计算在 $R$ 轮比赛过后，排名第 $Q$ 的选手编号是多少。我们假设选手的实力值两两不同，且每场比赛中实力值较高的总能获胜。", "inputFormat": "第一行是三个正整数 $N,R,Q$，每两个数之间用一个空格隔开，表示有 $2\\times N $ 名选手、$R$ 轮比赛，以及我们关心的名次 $Q$。\n\n第二行是 $2\\times N$ 个非负整数 $s_1, s_2,\\dots, s_{2\\times N}$，每两个数之间用一个空格隔开，其中 $s_i $ 表示编号为 $i$ 的选手的初始分数。\n\n第三行是 $2\\times N$ 个正整数 $w_1,w_2,\\dots,w_{2\\times N}$，每两个数之间用一个空格隔开，其中 $w_i$ 表示编号为 $i$ 的选手的实力值。", "outputFormat": "一个整数，即 $R$ 轮比赛结束后，排名第 $Q$ 的选手的编号。", "hint": "【样例解释】\n\n ![](https://cdn.luogu.com.cn/upload/pic/98.png) \n\n【数据范围】\n\n对于 $30\\%$ 的数据，$1\\le N\\le 100$；\n\n对于 $50\\%$ 的数据，$1\\le N\\le 10000$；\n\n对于 $100\\%$ 的数据，$1\\le N\\le 10^5,1\\le R\\le 50,1\\le Q\\le 2\\times N,0\\le s_1, s_2,\\dots,s_{2\\times N}\\le 10^8,1\\le w_1, w_2 , \\dots, w_{2\\times N}\\le 10^8$。\n\nnoip2011 普及组第 3 题。", "locale": "zh-CN"}}}
{"pid": "P1310", "type": "P", "difficulty": 4, "samples": [["4\n+(*)\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "动态规划 DP", "2011", "NOIP 普及组"], "title": "[NOIP 2011 普及组] 表达式的值", "background": null, "description": "对于 $1$ 位二进制变量定义两种运算：\n\n$$\n\\begin{array}{|c|c|} \\hline\n\\qquad\\qquad\\quad\\textsf{运算符}\\qquad\\qquad\\quad & \\qquad\\qquad\\quad\\textsf{运算规则}\\qquad\\qquad\\quad \\\\ \\hline\n\\oplus &\n\\begin{aligned}\n0 \\oplus 0 &= 0 \\\\\n0 \\oplus 1 &= 1 \\\\\n1 \\oplus 0 &= 1 \\\\\n1 \\oplus 1 &= 1 \\\\\n\\end{aligned} \\\\ \\hline\n\\times &\n\\begin{aligned}\n0 \\times 0 &= 0 \\\\\n0 \\times 1 &= 0 \\\\\n1 \\times 0 &= 0 \\\\\n1 \\times 1 &= 1 \\\\\n\\end{aligned} \\\\ \\hline\n\\end{array}\n$$\n\n运算的优先级是：\n\n1. 先计算括号内的，再计算括号外的。\n\n  2. “$\\times$”运算优先于“$\\oplus$”运算，即计算表达式时，先计算“$\\times$”运算，再计算“$\\oplus$”运算。例如：计算表达式 $A\\oplus B \\times C$ 时，先计算 $B \\times C$，其结果再与 $A$ 做“$\\oplus$”运算。\n\n现给定一个未完成的表达式，例如 $\\_+(\\_ * \\_)$，请你在横线处填入数字 $0$ 或者 $1$，请问有多少种填法可以使得表达式的值为 $0$。", "inputFormat": "共 $2$ 行。\n\n第 $1$ 行为一个整数 $L$，表示给定的表达式中除去横线外的运算符和括号的个数。\n\n第 $2$ 行为一个字符串包含 $L$ 个字符，其中只包含 `(`,`)`,`+`,`*` 这 $4$ 种字符，其中 `(`,`)` 是左右括号,`+`,`*` 分别表示前面定义的运算符 $\\oplus$ 和 $\\times$。这行字符按顺序给出了给定表达式中除去变量外的运算符和括号。", "outputFormat": "共 $1$ 行。包含一个整数，即所有的方案数。注意：这个数可能会很大，请输出方案数对 $10007$ 取模后的结果。", "hint": "【输入输出样例说明】\n\n  给定的表达式包括横线字符之后为：$\\_+(\\_ * \\_)$。 \n\n  在横线位置填入 $(0,0,0)$ $(0,1,0)$ $(0,0,1)$ 时，表达式的值均为 $0$，所以共有 $3$ 种填法。 \n\n【数据范围】\n\n对于 $20\\%$ 的数据有 $ 0 \\le L \\le 10$。\n\n对于 $50\\%$ 的数据有 $0 \\le L \\le 1,000$。\n\n对于 $70\\%$ 的数据有 $ 0 \\le L \\le 10,000$ 。\n\n对于 $100\\%$的数据有 $ 0 \\le L \\le 100,000$。\n\n对于$50\\%$ 的数据输入表达式中不含括号。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2011 Junior] The Value of the Expression", "background": "", "description": "Define two operations on $1$-bit binary variables:\n\n$$\n\\begin{array}{|c|c|} \\hline\n\\qquad\\qquad\\quad\\textsf{Operator}\\qquad\\qquad\\quad & \\qquad\\qquad\\quad\\textsf{Operation rule}\\qquad\\qquad\\quad \\\\ \\hline\n\\oplus &\n\\begin{aligned}\n0 \\oplus 0 &= 0 \\\\\n0 \\oplus 1 &= 1 \\\\\n1 \\oplus 0 &= 1 \\\\\n1 \\oplus 1 &= 1 \\\\\n\\end{aligned} \\\\ \\hline\n\\times &\n\\begin{aligned}\n0 \\times 0 &= 0 \\\\\n0 \\times 1 &= 0 \\\\\n1 \\times 0 &= 0 \\\\\n1 \\times 1 &= 1 \\\\\n\\end{aligned} \\\\ \\hline\n\\end{array}\n$$\n\nThe precedence of operations is:\n\n1. Evaluate inside parentheses first, then outside.\n\n2. The \"×\" operation has higher precedence than \"⊕\", i.e., when evaluating an expression, evaluate \"×\" before \"⊕\". For example, when evaluating the expression $A \\oplus B \\times C$, compute $B \\times C$ first, and then perform \"⊕\" with $A$ on the result.\n\nGiven an incomplete expression, for example $\\_+(\\_ * \\_)$, fill each underscore with the digit $0$ or $1$. How many ways are there to make the value of the expression equal to $0$?", "inputFormat": "There are $2$ lines.\n\nThe first line contains an integer $L$, the number of operators and parentheses in the given expression, excluding the underscores.\n\nThe second line contains a string of $L$ characters, consisting only of `(`, `)`, `+`, `*`. Here `(` and `)` are the left and right parentheses, and `+`, `*` represent the operators $\\oplus$ and $\\times$ defined above. This line lists, in order, the operators and parentheses in the given expression, excluding variables.", "outputFormat": "Output one line containing a single integer, the number of ways. Note: This number can be very large, so output the result modulo $10007$.", "hint": "[Explanation of the sample input and output]\n\nThe given expression, after including the underscores, is: $\\_+(\\_ * \\_)$.\n\nIf we fill the underscores with $(0,0,0)$, $(0,1,0)$, or $(0,0,1)$, the value of the expression is $0$, so there are $3$ valid fillings.\n\n[Constraints]\n\nFor $20\\%$ of the testdata, $0 \\le L \\le 10$.\n\nFor $50\\%$ of the testdata, $0 \\le L \\le 1{,}000$.\n\nFor $70\\%$ of the testdata, $0 \\le L \\le 10{,}000$.\n\nFor $100\\%$ of the testdata, $0 \\le L \\le 100{,}000$.\n\nFor $50\\%$ of the testdata, the input expression contains no parentheses.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2011 普及组] 表达式的值", "background": null, "description": "对于 $1$ 位二进制变量定义两种运算：\n\n$$\n\\begin{array}{|c|c|} \\hline\n\\qquad\\qquad\\quad\\textsf{运算符}\\qquad\\qquad\\quad & \\qquad\\qquad\\quad\\textsf{运算规则}\\qquad\\qquad\\quad \\\\ \\hline\n\\oplus &\n\\begin{aligned}\n0 \\oplus 0 &= 0 \\\\\n0 \\oplus 1 &= 1 \\\\\n1 \\oplus 0 &= 1 \\\\\n1 \\oplus 1 &= 1 \\\\\n\\end{aligned} \\\\ \\hline\n\\times &\n\\begin{aligned}\n0 \\times 0 &= 0 \\\\\n0 \\times 1 &= 0 \\\\\n1 \\times 0 &= 0 \\\\\n1 \\times 1 &= 1 \\\\\n\\end{aligned} \\\\ \\hline\n\\end{array}\n$$\n\n运算的优先级是：\n\n1. 先计算括号内的，再计算括号外的。\n\n  2. “$\\times$”运算优先于“$\\oplus$”运算，即计算表达式时，先计算“$\\times$”运算，再计算“$\\oplus$”运算。例如：计算表达式 $A\\oplus B \\times C$ 时，先计算 $B \\times C$，其结果再与 $A$ 做“$\\oplus$”运算。\n\n现给定一个未完成的表达式，例如 $\\_+(\\_ * \\_)$，请你在横线处填入数字 $0$ 或者 $1$，请问有多少种填法可以使得表达式的值为 $0$。", "inputFormat": "共 $2$ 行。\n\n第 $1$ 行为一个整数 $L$，表示给定的表达式中除去横线外的运算符和括号的个数。\n\n第 $2$ 行为一个字符串包含 $L$ 个字符，其中只包含 `(`,`)`,`+`,`*` 这 $4$ 种字符，其中 `(`,`)` 是左右括号,`+`,`*` 分别表示前面定义的运算符 $\\oplus$ 和 $\\times$。这行字符按顺序给出了给定表达式中除去变量外的运算符和括号。", "outputFormat": "共 $1$ 行。包含一个整数，即所有的方案数。注意：这个数可能会很大，请输出方案数对 $10007$ 取模后的结果。", "hint": "【输入输出样例说明】\n\n  给定的表达式包括横线字符之后为：$\\_+(\\_ * \\_)$。 \n\n  在横线位置填入 $(0,0,0)$ $(0,1,0)$ $(0,0,1)$ 时，表达式的值均为 $0$，所以共有 $3$ 种填法。 \n\n【数据范围】\n\n对于 $20\\%$ 的数据有 $ 0 \\le L \\le 10$。\n\n对于 $50\\%$ 的数据有 $0 \\le L \\le 1,000$。\n\n对于 $70\\%$ 的数据有 $ 0 \\le L \\le 10,000$ 。\n\n对于 $100\\%$的数据有 $ 0 \\le L \\le 100,000$。\n\n对于$50\\%$ 的数据输入表达式中不含括号。", "locale": "zh-CN"}}}
{"pid": "P1311", "type": "P", "difficulty": 3, "samples": [["5 2 3 \n0 5 \n1 3 \n0 2 \n1 4 \n1 5 \n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "2011", "NOIP 提高组"], "title": "[NOIP 2011 提高组] 选择客栈", "background": "", "description": "丽江河边有 $n$ 家很有特色的客栈，客栈按照其位置顺序从 $1$ 到 $n$ 编号。每家客栈都按照某一种色调进行装饰（总共 $k$ 种，用整数 $0 \\sim k-1$ 表示），且每家客栈都设有一家咖啡店，每家咖啡店均有各自的最低消费。\n\n两位游客一起去丽江旅游，他们喜欢相同的色调，又想尝试两个不同的客栈，因此决定分别住在色调相同的两家客栈中。晚上，他们打算选择一家咖啡店喝咖啡，要求咖啡店位于两人住的两家客栈之间（包括他们住的客栈），且咖啡店的最低消费不超过 $p$ 。\n\n他们想知道总共有多少种选择住宿的方案，保证晚上可以找到一家最低消费不超过 $p$ 元的咖啡店小聚。", "inputFormat": "共 $n+1$ 行。\n\n第一行三个整数 $n, k, p$，每两个整数之间用一个空格隔开，分别表示客栈的个数，色调的数目和能接受的最低消费的最高值；\n\n接下来的 $n$ 行，第 $i+1$ 行两个整数，之间用一个空格隔开，分别表示 $i $ 号客栈的装饰色调 $a_i$ 和 $i$ 号客栈的咖啡店的最低消费 $b_i$。", "outputFormat": "一个整数，表示可选的住宿方案的总数。\n", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/pic/101.png) \n\n2 人要住同样色调的客栈，所有可选的住宿方案包括：住客栈①③，②④，②⑤，④⑤，但是若选择住 $4,5$号客栈的话，$4,5$ 号客栈之间的咖啡店的最低消费是 $4$ ，而两人能承受的最低消费是 $3$ 元，所以不满足要求。因此只有前 $3$ 种方案可选。\n\n### 数据范围\n\n- 对于 $30\\% $ 的数据，有 $n \\leq 100$ ；\n- 对于 $50\\% $ 的数据，有 $n \\leq 1\\,000$；\n- 对于 $100\\%$ 的数据，有 $2 \\leq n \\leq 2 \\times 10^5$，$1 \\leq k\n \\leq 50$，$0 \\leq p \\leq 100$，$0 \\leq b_i \\leq 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2011 Senior] Choosing Inns", "background": "", "description": "Along the Lijiang River, there are $n$ distinctive inns, numbered from $1$ to $n$ in order of their locations. Each inn is decorated in one of $k$ hues (represented by integers $0 \\sim k-1$), and each inn has a coffee shop with its own minimum charge.\n\nTwo tourists are traveling together. They like the same hue but want to try two different inns, so they decide to stay at two inns with the same hue. At night, they plan to choose a coffee shop to have coffee. The coffee shop must be located between the two inns they stay at (including the inns themselves), and its minimum charge must not exceed $p$.\n\nThey want to know the total number of ways to choose their accommodations such that they can find a coffee shop whose minimum charge is no more than $p$ yuan at night.", "inputFormat": "There are $n+1$ lines.\n\nThe first line contains three integers $n, k, p$, separated by single spaces, representing the number of inns, the number of hues, and the maximum acceptable minimum charge, respectively.\n\nFor the next $n$ lines, the $(i+1)$-th line contains two integers, separated by a single space, denoting the hue $a_i$ of inn $i$ and the minimum charge $b_i$ of the coffee shop of inn $i$.", "outputFormat": "Output a single integer, the total number of valid accommodation choices.", "hint": "Sample Explanation.\n\n![](https://cdn.luogu.com.cn/upload/pic/101.png)\n\nSince the two people must stay in inns with the same hue, all possible choices include: inns $1$ and $3$, $2$ and $4$, $2$ and $5$, $4$ and $5$. However, if they choose inns $4,5$, the minimum charge of the coffee shops between inns $4$ and $5$ is $4$, while their acceptable minimum charge is $3$ yuan, so this does not satisfy the requirement. Therefore, only the first $3$ choices are valid.\n\nConstraints.\n- For $30\\%$ of the testdata, $n \\leq 100$.\n- For $50\\%$ of the testdata, $n \\leq 1\\,000$.\n- For $100\\%$ of the testdata, $2 \\leq n \\leq 2 \\times 10^5$, $1 \\leq k \\leq 50$, $0 \\leq p \\leq 100$, $0 \\leq b_i \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2011 提高组] 选择客栈", "background": "", "description": "丽江河边有 $n$ 家很有特色的客栈，客栈按照其位置顺序从 $1$ 到 $n$ 编号。每家客栈都按照某一种色调进行装饰（总共 $k$ 种，用整数 $0 \\sim k-1$ 表示），且每家客栈都设有一家咖啡店，每家咖啡店均有各自的最低消费。\n\n两位游客一起去丽江旅游，他们喜欢相同的色调，又想尝试两个不同的客栈，因此决定分别住在色调相同的两家客栈中。晚上，他们打算选择一家咖啡店喝咖啡，要求咖啡店位于两人住的两家客栈之间（包括他们住的客栈），且咖啡店的最低消费不超过 $p$ 。\n\n他们想知道总共有多少种选择住宿的方案，保证晚上可以找到一家最低消费不超过 $p$ 元的咖啡店小聚。", "inputFormat": "共 $n+1$ 行。\n\n第一行三个整数 $n, k, p$，每两个整数之间用一个空格隔开，分别表示客栈的个数，色调的数目和能接受的最低消费的最高值；\n\n接下来的 $n$ 行，第 $i+1$ 行两个整数，之间用一个空格隔开，分别表示 $i $ 号客栈的装饰色调 $a_i$ 和 $i$ 号客栈的咖啡店的最低消费 $b_i$。", "outputFormat": "一个整数，表示可选的住宿方案的总数。\n", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/pic/101.png) \n\n2 人要住同样色调的客栈，所有可选的住宿方案包括：住客栈①③，②④，②⑤，④⑤，但是若选择住 $4,5$号客栈的话，$4,5$ 号客栈之间的咖啡店的最低消费是 $4$ ，而两人能承受的最低消费是 $3$ 元，所以不满足要求。因此只有前 $3$ 种方案可选。\n\n### 数据范围\n\n- 对于 $30\\% $ 的数据，有 $n \\leq 100$ ；\n- 对于 $50\\% $ 的数据，有 $n \\leq 1\\,000$；\n- 对于 $100\\%$ 的数据，有 $2 \\leq n \\leq 2 \\times 10^5$，$1 \\leq k\n \\leq 50$，$0 \\leq p \\leq 100$，$0 \\leq b_i \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P1312", "type": "P", "difficulty": 5, "samples": [["3\n1 0\n2 1 0\n2 3 4 0\n3 1 0\n2 4 3 4 0", "2 1 1\n3 1 1\n3 0 1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2011", "NOIP 提高组", "深度优先搜索 DFS", "剪枝"], "title": "[NOIP 2011 提高组] Mayan 游戏", "background": null, "description": "Mayan puzzle 是最近流行起来的一个游戏。游戏界面是一个$7$ 行 $\\times5$ 列的棋盘，上面堆放着一些方块，方块不能悬空堆放，即方块必须放在最下面一行，或者放在其他方块之上。游戏通关是指在规定的步数内消除所有的方块，消除方块的规则如下：\n\n1. 每步移动可以且仅可以沿横向（即向左或向右）拖动某一方块一格：当拖动这一方块时，如果拖动后到达的位置（以下称目标位置）也有方块，那么这两个方块将交换位置（参见输入输出样例说明中的图 $6$ 到图 $7$）；如果目标位置上没有方块，那么被拖动的方块将从原来的竖列中抽出，并从目标位置上掉落（直到不悬空，参见下面图 $1$ 和图 $2$）；\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gyse4ktp.png)\n\n2. 任一时刻，如果在一横行或者竖列上有连续三个或者三个以上相同颜色的方块，则它们将立即被消除（参见图 $1$ 到图 $3$）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/et7at5fd.png)\n\n注意：\n\na) 如果同时有多组方块满足消除条件，几组方块会同时被消除（例如下面图 $4$，三个颜色为 $1$ 的方块和三个颜色为 $2$ 的方块会同时被消除，最后剩下一个颜色为 $2$ 的方块）。\n\nb) 当出现行和列都满足消除条件且行列共享某个方块时，行和列上满足消除条件的所有方块会被同时消除（例如下面图5 所示的情形，$5$ 个方块会同时被消除）。\n\n3. 方块消除之后，消除位置之上的方块将掉落，掉落后可能会引起新的方块消除。注意：掉落的过程中将不会有方块的消除。\n\n上面图 $1$ 到图 $3$ 给出了在棋盘上移动一块方块之后棋盘的变化。棋盘的左下角方块的坐标为 $(0,0)$，将位于 $(3,3)$ 的方块向左移动之后，游戏界面从图 $1$ 变成图 $2$ 所示的状态，此时在一竖列上有连续三块颜色为 $4$ 的方块，满足消除条件，消除连续 $3$ 块颜色为 $4$ 的方块后，上方的颜色为 $3$ 的方块掉落，形成图 $3$ 所示的局面。", "inputFormat": "共 $6$ 行。\n\n第一行为一个正整数 $n$，表示要求游戏通关的步数。\n\n接下来的 $5$ 行，描述 $7 \\times 5$ 的游戏界面。每行若干个整数，每两个整数之间用一个空格隔开，每行以一个 $0$ 结束，自下向上表示每竖列方块的颜色编号（颜色不多于 $10$ 种，从 $1$ 开始顺序编号，相同数字表示相同颜色）。\n\n输入数据保证初始棋盘中没有可以消除的方块。", "outputFormat": "如果有解决方案，输出 $n$ 行，每行包含 $3$ 个整数 $x,y,g$，表示一次移动，每两个整数之间用一个空格隔开，其中 $(x,y)$ 表示要移动的方块的坐标，$g$ 表示移动的方向，$1$ 表示向右移动，$-1$ 表示向左移动。注意：多组解时，按照 $x$ 为第一关键字，$y$ 为第二关键字，$1$ 优先于 $-1$，给出一组字典序最小的解。游戏界面左下角的坐标为 $(0,0)$。\n\n如果没有解决方案，输出一行 `-1`。", "hint": "**【输入输出样例说明】**\n\n按箭头方向的顺序分别为图 $6$ 到图 $11$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vmb8yy6n.png)\n\n样例输入的游戏局面如上面第一个图片所示，依次移动的三步是：$(2,1)$ 处的方格向右移动，$(3,1)$ 处的方格向右移动，$(3,0)$ 处的方格向右移动，最后可以将棋盘上所有方块消除。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，初始棋盘上的方块都在棋盘的最下面一行；\n\n对于 $100\\%$ 的数据，$0<n \\le 5$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2011 Senior] Mayan Game", "background": "", "description": "Mayan puzzle is a recently popular game. The game interface is a $7$-row $\\times 5$-column board stacked with some blocks. Blocks cannot be suspended in the air, i.e., a block must be placed on the bottom row or on top of another block. To clear the game means to eliminate all blocks within a given number of moves. The elimination rules are as follows:\n\n1. In each move, you may and only may drag one block horizontally (left or right) by one cell: When dragging this block, if the target position also has a block, the two blocks will swap positions (see Figures $6$ to $7$ in the sample I/O explanation). If the target position is empty, the dragged block will be pulled out of its original column and will fall from the target position (until it is supported; see Figures $1$ and $2$ below).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gyse4ktp.png)\n\n2. At any time, if there are three or more consecutive blocks of the same color in any row or column, they will be eliminated immediately (see Figures 1 to 3).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/et7at5fd.png)\n\nNotes:\na) If multiple groups of blocks simultaneously satisfy the elimination condition, all such groups will be eliminated at the same time (for example, in Figure $4$, three blocks of color $1$ and three blocks of color $2$ are eliminated simultaneously, leaving one block of color $2$).\nb) When both a row and a column satisfy the elimination condition and they share a block, all blocks in that row and column that satisfy the condition will be eliminated simultaneously (for example, in the situation shown in Figure 5, $5$ blocks are eliminated at the same time).\n\n3. After blocks are eliminated, the blocks above the eliminated positions will fall, and the falling may trigger new eliminations. Note: No elimination occurs during the falling process.\n\nFigures $1$ to $3$ above show the changes on the board after moving a block. The coordinates of the block in the lower-left corner of the board are $(0,0)$. After moving the block at $(3,3)$ to the left, the interface changes from Figure $1$ to the state shown in Figure $2$. At this time there are three consecutive blocks of color $4$ in one column, satisfying the elimination condition. After eliminating the three consecutive blocks of color $4$, the blocks of color $3$ above fall, forming the situation shown in Figure $3$.", "inputFormat": "A total of $6$ lines.\n\n- The first line is a positive integer $n$, the number of moves required to clear the game.\n- The next $5$ lines describe the $7 \\times 5$ game interface. Each line contains several integers separated by a space and ends with a $0$. For each column (from left to right), the integers list the color numbers of the blocks from bottom to top. There are at most $10$ colors, numbered in order starting from $1$, and the same number indicates the same color.\n- The testdata guarantees that there are no eliminable blocks on the initial board.", "outputFormat": "If there is a solution, output $n$ lines, each containing $3$ integers $x, y, g$ separated by a space, representing one move. Here $(x, y)$ is the coordinate of the block to move, and $g$ is the direction: $1$ means move to the right, $-1$ means move to the left. Note: If there are multiple solutions, use $x$ as the primary key, $y$ as the secondary key, and prefer $1$ over $-1$, and output the lexicographically smallest solution. The coordinate of the lower-left corner of the board is $(0, 0)$.\n\nIf there is no solution, output a single line `-1`.", "hint": "【Sample I/O Explanation】\n\nIn the direction of the arrows, these are Figures $6$ to $11$ in order.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vmb8yy6n.png)\n\nThe game state of the sample input is shown in the first image above. The three moves in order are: move the block at $(2,1)$ to the right, move the block at $(3,1)$ to the right, and move the block at $(3,0)$ to the right. In the end, all blocks on the board can be eliminated.\n\n【Constraints】\n\n- For $30\\%$ of the testdata, all blocks on the initial board are on the bottom row.\n- For $100\\%$ of the testdata, $0 < n \\le 5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2011 提高组] Mayan 游戏", "background": null, "description": "Mayan puzzle 是最近流行起来的一个游戏。游戏界面是一个$7$ 行 $\\times5$ 列的棋盘，上面堆放着一些方块，方块不能悬空堆放，即方块必须放在最下面一行，或者放在其他方块之上。游戏通关是指在规定的步数内消除所有的方块，消除方块的规则如下：\n\n1. 每步移动可以且仅可以沿横向（即向左或向右）拖动某一方块一格：当拖动这一方块时，如果拖动后到达的位置（以下称目标位置）也有方块，那么这两个方块将交换位置（参见输入输出样例说明中的图 $6$ 到图 $7$）；如果目标位置上没有方块，那么被拖动的方块将从原来的竖列中抽出，并从目标位置上掉落（直到不悬空，参见下面图 $1$ 和图 $2$）；\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gyse4ktp.png)\n\n2. 任一时刻，如果在一横行或者竖列上有连续三个或者三个以上相同颜色的方块，则它们将立即被消除（参见图 $1$ 到图 $3$）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/et7at5fd.png)\n\n注意：\n\na) 如果同时有多组方块满足消除条件，几组方块会同时被消除（例如下面图 $4$，三个颜色为 $1$ 的方块和三个颜色为 $2$ 的方块会同时被消除，最后剩下一个颜色为 $2$ 的方块）。\n\nb) 当出现行和列都满足消除条件且行列共享某个方块时，行和列上满足消除条件的所有方块会被同时消除（例如下面图5 所示的情形，$5$ 个方块会同时被消除）。\n\n3. 方块消除之后，消除位置之上的方块将掉落，掉落后可能会引起新的方块消除。注意：掉落的过程中将不会有方块的消除。\n\n上面图 $1$ 到图 $3$ 给出了在棋盘上移动一块方块之后棋盘的变化。棋盘的左下角方块的坐标为 $(0,0)$，将位于 $(3,3)$ 的方块向左移动之后，游戏界面从图 $1$ 变成图 $2$ 所示的状态，此时在一竖列上有连续三块颜色为 $4$ 的方块，满足消除条件，消除连续 $3$ 块颜色为 $4$ 的方块后，上方的颜色为 $3$ 的方块掉落，形成图 $3$ 所示的局面。", "inputFormat": "共 $6$ 行。\n\n第一行为一个正整数 $n$，表示要求游戏通关的步数。\n\n接下来的 $5$ 行，描述 $7 \\times 5$ 的游戏界面。每行若干个整数，每两个整数之间用一个空格隔开，每行以一个 $0$ 结束，自下向上表示每竖列方块的颜色编号（颜色不多于 $10$ 种，从 $1$ 开始顺序编号，相同数字表示相同颜色）。\n\n输入数据保证初始棋盘中没有可以消除的方块。", "outputFormat": "如果有解决方案，输出 $n$ 行，每行包含 $3$ 个整数 $x,y,g$，表示一次移动，每两个整数之间用一个空格隔开，其中 $(x,y)$ 表示要移动的方块的坐标，$g$ 表示移动的方向，$1$ 表示向右移动，$-1$ 表示向左移动。注意：多组解时，按照 $x$ 为第一关键字，$y$ 为第二关键字，$1$ 优先于 $-1$，给出一组字典序最小的解。游戏界面左下角的坐标为 $(0,0)$。\n\n如果没有解决方案，输出一行 `-1`。", "hint": "**【输入输出样例说明】**\n\n按箭头方向的顺序分别为图 $6$ 到图 $11$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vmb8yy6n.png)\n\n样例输入的游戏局面如上面第一个图片所示，依次移动的三步是：$(2,1)$ 处的方格向右移动，$(3,1)$ 处的方格向右移动，$(3,0)$ 处的方格向右移动，最后可以将棋盘上所有方块消除。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，初始棋盘上的方块都在棋盘的最下面一行；\n\n对于 $100\\%$ 的数据，$0<n \\le 5$。", "locale": "zh-CN"}}}
{"pid": "P1313", "type": "P", "difficulty": 3, "samples": [["1 1 3 1 2\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2011", "NOIP 提高组", "组合数学"], "title": "[NOIP 2011 提高组] 计算系数", "background": "", "description": "给定一个多项式 $(by+ax)^k$，请求出多项式展开后 $x^n\\times y^m$ 项的系数。", "inputFormat": "输入共一行，包含 $5$ 个整数，分别为 $a,b,k,n,m$，每两个整数之间用一个空格隔开。", "outputFormat": "输出共一行，包含一个整数，表示所求的系数。\n\n这个系数可能很大，输出对 $10007$ 取模后的结果。", "hint": "【数据范围】\n\n对于 $30\\%$ 的数据，有 $ 0\\le k\\le 10$。\n\n对于 $50\\%$ 的数据，有 $ a=1$，$b=1$。\n\n对于 $100\\%$ 的数据，有 $0\\le k\\le 1000$，$0\\le n,m\\le k$，$n+m=k$，$0\\le a,b\\le 10^6$。\n\nnoip2011 提高组 day2 第 1 题。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2011 Senior] Compute the Coefficient", "background": "", "description": "Given a polynomial $(by+ax)^k$, compute the coefficient of the term $x^n\\times y^m$ in its expansion.", "inputFormat": "The input contains one line with $5$ integers, namely $a, b, k, n, m$, separated by a single space.", "outputFormat": "Output one line containing a single integer, which is the required coefficient. This coefficient may be large; output the result modulo $10007$.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $0\\le k\\le 10$.\n- For $50\\%$ of the testdata, $a=1$, $b=1$.\n- For $100\\%$ of the testdata, $0\\le k\\le 1000$, $0\\le n, m\\le k$, $n + m = k$, $0\\le a, b\\le 10^6$.\n\nNOIP 2011 Senior Day 2 Problem 1.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2011 提高组] 计算系数", "background": "", "description": "给定一个多项式 $(by+ax)^k$，请求出多项式展开后 $x^n\\times y^m$ 项的系数。", "inputFormat": "输入共一行，包含 $5$ 个整数，分别为 $a,b,k,n,m$，每两个整数之间用一个空格隔开。", "outputFormat": "输出共一行，包含一个整数，表示所求的系数。\n\n这个系数可能很大，输出对 $10007$ 取模后的结果。", "hint": "【数据范围】\n\n对于 $30\\%$ 的数据，有 $ 0\\le k\\le 10$。\n\n对于 $50\\%$ 的数据，有 $ a=1$，$b=1$。\n\n对于 $100\\%$ 的数据，有 $0\\le k\\le 1000$，$0\\le n,m\\le k$，$n+m=k$，$0\\le a,b\\le 10^6$。\n\nnoip2011 提高组 day2 第 1 题。\n", "locale": "zh-CN"}}}
{"pid": "P1314", "type": "P", "difficulty": 4, "samples": [["5 3 15 \n1 5 \n2 5 \n3 5 \n4 5 \n5 5 \n1 5 \n2 4 \n3 3 ", "10\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2011", "二分", "NOIP 提高组", "前缀和"], "title": "[NOIP 2011 提高组] 聪明的质监员", "background": null, "description": "小 T 是一名质量监督员，最近负责检验一批矿产的质量。这批矿产共有 $n$ 个矿石，从 $1$ 到 $n$ 逐一编号，每个矿石都有自己的重量 $w_i$ 以及价值 $v_i$。检验矿产的流程是：\n\n1. 给定 $m$ 个区间 $[l_i,r_i]$；\n2. 选出一个参数 $W$；\n3. 对于一个区间 $[l_i,r_i]$，计算矿石在这个区间上的检验值 $y_i$：\n\n$$y_i=\\sum\\limits_{j=l_i}^{r_i}[w_j \\ge W] \\times \\sum\\limits_{j=l_i}^{r_i}[w_j \\ge W]v_j$$  \n\n其中 $j$ 为矿石编号，$[p]$ 是指示函数，若条件 $p$ 为真返回 $1$，否则返回 $0$。\n\n这批矿产的检验结果 $y$ 为各个区间的检验值之和。即：$\\sum\\limits_{i=1}^m y_i$。\n\n若这批矿产的检验结果与所给标准值 $s$ 相差太多，就需要再去检验另一批矿产。小 T 不想费时间去检验另一批矿产，所以他想通过调整参数 $W$ 的值，让检验结果尽可能的靠近标准值 $s$，即使得 $|s-y|$ 最小。请你帮忙求出这个最小值。", "inputFormat": "第一行包含三个整数 $n,m,s$，分别表示矿石的个数、区间的个数和标准值。\n\n接下来的 $n$ 行，每行两个整数，中间用空格隔开，第 $i+1$ 行表示 $i$ 号矿石的重量 $w_i$ 和价值 $v_i$。\n\n接下来的 $m$ 行，表示区间，每行两个整数，中间用空格隔开，第 $i+n+1$ 行表示区间 $[l_i,r_i]$ 的两个端点 $l_i$ 和 $r_i$。注意：不同区间可能重合或相互重叠。", "outputFormat": "一个整数，表示所求的最小值。", "hint": "【输入输出样例说明】\n\n当 $W$ 选 $4$ 的时候，三个区间上检验值分别为 $20,5,0$，这批矿产的检验结果为 $25$，此时与标准值 $S$ 相差最小为 $10$。\n\n【数据范围】\n\n对于 $10\\%$ 的数据，有 $1 ≤n,m≤10$；\n\n对于 $30\\%$ 的数据，有 $1 ≤n,m≤500$；\n\n对于 $50\\%$ 的数据，有 $1 ≤n,m≤5,000$；\n \n对于 $70\\%$ 的数据，有 $1 ≤n,m≤10,000$；\n\n对于 $100\\%$ 的数据，有 $1 ≤n,m≤200,000$，$0 < w_i,v_i≤10^6$，$0 < s≤10^{12}$，$1 ≤l_i ≤r_i ≤n$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2011 Senior] Smart Quality Inspector", "background": "", "description": "Xiao T is a quality inspector in charge of checking a batch of ores. There are $n$ ores, numbered from $1$ to $n$. Each ore has a weight $w_i$ and a value $v_i$. The inspection process is:\n\n1. Given $m$ intervals $[l_i, r_i]$.\n2. Choose a parameter $W$.\n3. For an interval $[l_i, r_i]$, compute the inspection value $y_i$:\n$$y_i=\\sum\\limits_{j=l_i}^{r_i}[w_j \\ge W] \\times \\sum\\limits_{j=l_i}^{r_i}[w_j \\ge W]v_j$$\nHere $j$ is the ore index, and $[p]$ is the indicator function: it returns $1$ if condition $p$ is true, and $0$ otherwise.\n\nThe overall inspection result $y$ for this batch is the sum of inspection values over all intervals, i.e., $\\sum\\limits_{i=1}^m y_i$.\n\nIf the overall inspection result differs too much from the given standard value $s$, another batch must be inspected. Xiao T wants to avoid extra work, so he will adjust the parameter $W$ to make the result as close to $s$ as possible, i.e., minimize $|s - y|$. Please compute this minimum value.", "inputFormat": "The first line contains three integers $n, m, s$, denoting the number of ores, the number of intervals, and the standard value.\n\nThe next $n$ lines each contain two integers separated by a space. The $(i+1)$-th line gives the weight $w_i$ and value $v_i$ of ore $i$.\n\nThe next $m$ lines describe the intervals. Each line contains two integers separated by a space. The $(n+i+1)$-th line gives the endpoints $l_i$ and $r_i$ of interval $[l_i, r_i]$. Note: different intervals may coincide or overlap.", "outputFormat": "Output a single integer, the minimum value required.", "hint": "Explanation for the sample input and output:\n\nWhen $W$ is $4$, the inspection values on the three intervals are $20$, $5$, $0$, so the overall result is $25$. The minimum difference from the standard value $s$ is $10$.\n\nConstraints:\n\n- For $10\\%$ of the testdata, $1 \\le n, m \\le 10$.\n- For $30\\%$ of the testdata, $1 \\le n, m \\le 500$.\n- For $50\\%$ of the testdata, $1 \\le n, m \\le 5{,}000$.\n- For $70\\%$ of the testdata, $1 \\le n, m \\le 10{,}000$.\n- For $100\\%$ of the testdata, $1 \\le n, m \\le 200{,}000$, $0 < w_i, v_i \\le 10^6$, $0 < s \\le 10^{12}$, $1 \\le l_i \\le r_i \\le n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2011 提高组] 聪明的质监员", "background": null, "description": "小 T 是一名质量监督员，最近负责检验一批矿产的质量。这批矿产共有 $n$ 个矿石，从 $1$ 到 $n$ 逐一编号，每个矿石都有自己的重量 $w_i$ 以及价值 $v_i$。检验矿产的流程是：\n\n1. 给定 $m$ 个区间 $[l_i,r_i]$；\n2. 选出一个参数 $W$；\n3. 对于一个区间 $[l_i,r_i]$，计算矿石在这个区间上的检验值 $y_i$：\n\n$$y_i=\\sum\\limits_{j=l_i}^{r_i}[w_j \\ge W] \\times \\sum\\limits_{j=l_i}^{r_i}[w_j \\ge W]v_j$$  \n\n其中 $j$ 为矿石编号，$[p]$ 是指示函数，若条件 $p$ 为真返回 $1$，否则返回 $0$。\n\n这批矿产的检验结果 $y$ 为各个区间的检验值之和。即：$\\sum\\limits_{i=1}^m y_i$。\n\n若这批矿产的检验结果与所给标准值 $s$ 相差太多，就需要再去检验另一批矿产。小 T 不想费时间去检验另一批矿产，所以他想通过调整参数 $W$ 的值，让检验结果尽可能的靠近标准值 $s$，即使得 $|s-y|$ 最小。请你帮忙求出这个最小值。", "inputFormat": "第一行包含三个整数 $n,m,s$，分别表示矿石的个数、区间的个数和标准值。\n\n接下来的 $n$ 行，每行两个整数，中间用空格隔开，第 $i+1$ 行表示 $i$ 号矿石的重量 $w_i$ 和价值 $v_i$。\n\n接下来的 $m$ 行，表示区间，每行两个整数，中间用空格隔开，第 $i+n+1$ 行表示区间 $[l_i,r_i]$ 的两个端点 $l_i$ 和 $r_i$。注意：不同区间可能重合或相互重叠。", "outputFormat": "一个整数，表示所求的最小值。", "hint": "【输入输出样例说明】\n\n当 $W$ 选 $4$ 的时候，三个区间上检验值分别为 $20,5,0$，这批矿产的检验结果为 $25$，此时与标准值 $S$ 相差最小为 $10$。\n\n【数据范围】\n\n对于 $10\\%$ 的数据，有 $1 ≤n,m≤10$；\n\n对于 $30\\%$ 的数据，有 $1 ≤n,m≤500$；\n\n对于 $50\\%$ 的数据，有 $1 ≤n,m≤5,000$；\n \n对于 $70\\%$ 的数据，有 $1 ≤n,m≤10,000$；\n\n对于 $100\\%$ 的数据，有 $1 ≤n,m≤200,000$，$0 < w_i,v_i≤10^6$，$0 < s≤10^{12}$，$1 ≤l_i ≤r_i ≤n$。", "locale": "zh-CN"}}}
{"pid": "P1315", "type": "P", "difficulty": 5, "samples": [["3 3 2\n1 4\n0 1 3\n1 1 2\n5 2 3", "10\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "递推", "2011", "NOIP 提高组"], "title": "[NOIP 2011 提高组] 观光公交", "background": "感谢 @Transhumanist 提供的一组 Hack 数据", "description": "风景迷人的小城 Y 市，拥有 $n$ 个美丽的景点。由于慕名而来的游客越来越多，Y 市特意安排了一辆观光公交车，为游客提供更便捷的交通服务。观光公交车在第 $0$ 分钟出现在 $1$ 号景点，随后依次前往 $2,3,4,\\cdots,n$ 号景点。从第 $i$ 号景点开到第 $i+1$ 号景点需要 $D_i$ 分钟。任意时刻，公交车只能往前开，或在景点处等待。\n\n设共有 $m$ 个游客，每位游客需要乘车 $1$ 次从一个景点到达另一个景点，第 $i$ 位游客在 $T_i$ 分钟来到景点 $A_i$，希望乘车前往景点 $B_i$（$A_i<B_i$）。为了使所有乘客都能顺利到达目的地，公交车在每站都必须等待需要从该景点出发的所有乘客都上车后才能出发开往下一景点。\n\n假设乘客上下车不需要时间。一个乘客的旅行时间，等于他到达目的地的时刻减去他来到出发地的时刻。因为只有一辆观光车，有时候还要停下来等其他乘客，乘客们纷纷抱怨旅行时间太长了。于是聪明的司机 ZZ 给公交车安装了 $k$ 个氮气加速器，每使用一个加速器，可以使其中一个 $D_i-1$。对于同一个 $D_i$ 可以重复使用加速器，但是必须保证使用后 $D_i\\ge0$。\n\n那么 ZZ 该如何安排使用加速器，才能使所有乘客的旅行时间总和最小？", "inputFormat": "第 $1$ 行是 $3$ 个整数 $n,m,k$，每两个整数之间用一个空格隔开。分别表示景点数、乘客数和氮气加速器个数。\n\n第 $2$ 行是 $n-1$ 个整数，每两个整数之间用一个空格隔开，第 $i$ 个数表示从第 $i$ 个景点开往第 $i+1$ 个景点所需要的时间，即 $D_i$。\n\n第 $3$ 行至 $m+2$ 行每行 $3$ 个整数 $T_i,A_i,B_i$，每两个整数之间用一个空格隔开。第 $i+2$ 行表示第 $i$ 位乘客来到出发景点的时刻，出发的景点编号和到达的景点编号。", "outputFormat": "一个整数，表示最小的总旅行时间。\n", "hint": "**【输入输出样例说明】**\n\n对 $D_2$ 使用 $2$ 个加速器，从 $2$ 号景点到 $3$ 号景点时间变为 $2$ 分钟。\n\n公交车在第 $1$ 分钟从 $1$ 号景点出发，第 $2$ 分钟到达 $2$ 号景点，第 $5$ 分钟从 $2$ 号景点出发，第 $7$ 分钟到达 $3$ 号景点。\n\n第 $1$ 个旅客旅行时间 $7-0=7$ 分钟。\n\n第 $2$ 个旅客旅行时间 $2-1=1$ 分钟。\n\n第 $3$ 个旅客旅行时间 $7-5=2$ 分钟。\n\n总时间 $7+1+2=10$ 分钟。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$k=0$。\n\n对于 $20\\%$ 的数据，$k=1$。\n\n对于 $40\\%$ 的数据，$2 \\le n \\le 50$，$1 \\le m \\le 10^3$，$0 \\le k \\le 20$，$0 \\le D_i \\le 10$，$0 \\le T_i \\le 500$。\n\n对于 $60\\%$ 的数据，$1 \\le n \\le 100$，$1 \\le m \\le 10^3$，$0 \\le k \\le 100$，$0 \\le D_i \\le 100$，$0 \\le T_i \\le 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^3$，$1 \\le m \\le 10^4$，$0 \\le k \\le 10^5$，$0 \\le D_i \\le 100$，$0 \\le T_i \\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2011 Senior] Sightseeing Bus", "background": "Thanks to @Transhumanist for providing a set of hack testdata.", "description": "In the scenic city Y, there are $n$ beautiful spots. As more tourists arrive, the city arranges a sightseeing bus to offer convenient transportation. The bus appears at spot $1$ at minute $0$, and then visits spots $2, 3, 4, \\cdots, n$ in order. It takes $D_i$ minutes to go from spot $i$ to spot $i+1$. At any time, the bus can only move forward, or wait at a spot.\n\nThere are $m$ passengers in total. Each passenger needs exactly one ride from one spot to another. The $i$-th passenger arrives at spot $A_i$ at minute $T_i$ and wants to ride to spot $B_i$ ($A_i < B_i$). To ensure that all passengers can reach their destinations, the bus must, at each spot, wait until all passengers who need to depart from that spot have boarded, and then depart for the next spot.\n\nAssume boarding and alighting take no time. A passenger’s travel time equals the time they reach their destination minus the time they arrive at their origin. Because there is only one bus and it sometimes needs to wait for other passengers, passengers complain that the travel time is too long. The clever driver ZZ installs $k$ nitro boosters. Each booster can decrease some $D_i$ by $1$. You may apply boosters multiple times to the same $D_i$, but must ensure that after all applications $D_i \\ge 0$.\n\nHow should ZZ allocate the boosters to minimize the sum of all passengers’ travel times?", "inputFormat": "- The first line contains $3$ integers $n, m, k$, separated by single spaces, denoting the number of spots, the number of passengers, and the number of boosters.\n- The second line contains $n-1$ integers, separated by single spaces. The $i$-th integer is the travel time $D_i$ from spot $i$ to spot $i+1$.\n- Lines $3$ to $m+2$: each line contains $3$ integers $T_i, A_i, B_i$, separated by single spaces. The $(i+2)$-th line gives the arrival time at the origin, the origin spot index, and the destination spot index for passenger $i$.", "outputFormat": "Output a single integer: the minimal possible total travel time.", "hint": "【Sample Explanation】\n\nUse $2$ boosters on $D_2$, reducing the travel time from spot $2$ to spot $3$ to $2$ minutes.\n\nThe bus departs from spot $1$ at minute $1$, arrives at spot $2$ at minute $2$, departs from spot $2$ at minute $5$, and arrives at spot $3$ at minute $7$.\n\n- Passenger $1$: travel time $=\\,$ $7-0=7$ minutes.\n- Passenger $2$: travel time $=\\,$ $2-1=1$ minute.\n- Passenger $3$: travel time $=\\,$ $7-5=2$ minutes.\n\nTotal time $=\\,$ $7+1+2=10$ minutes.\n\n【Constraints】\n\n- For $10\\%$ of the testdata, $k=0$.\n- For $20\\%$ of the testdata, $k=1$.\n- For $40\\%$ of the testdata, $2 \\le n \\le 50$, $1 \\le m \\le 10^3$, $0 \\le k \\le 20$, $0 \\le D_i \\le 10$, $0 \\le T_i \\le 500$.\n- For $60\\%$ of the testdata, $1 \\le n \\le 100$, $1 \\le m \\le 10^3$, $0 \\le k \\le 100$, $0 \\le D_i \\le 100$, $0 \\le T_i \\le 10^4$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 10^3$, $1 \\le m \\le 10^4$, $0 \\le k \\le 10^5$, $0 \\le D_i \\le 100$, $0 \\le T_i \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2011 提高组] 观光公交", "background": "感谢 @Transhumanist 提供的一组 Hack 数据", "description": "风景迷人的小城 Y 市，拥有 $n$ 个美丽的景点。由于慕名而来的游客越来越多，Y 市特意安排了一辆观光公交车，为游客提供更便捷的交通服务。观光公交车在第 $0$ 分钟出现在 $1$ 号景点，随后依次前往 $2,3,4,\\cdots,n$ 号景点。从第 $i$ 号景点开到第 $i+1$ 号景点需要 $D_i$ 分钟。任意时刻，公交车只能往前开，或在景点处等待。\n\n设共有 $m$ 个游客，每位游客需要乘车 $1$ 次从一个景点到达另一个景点，第 $i$ 位游客在 $T_i$ 分钟来到景点 $A_i$，希望乘车前往景点 $B_i$（$A_i<B_i$）。为了使所有乘客都能顺利到达目的地，公交车在每站都必须等待需要从该景点出发的所有乘客都上车后才能出发开往下一景点。\n\n假设乘客上下车不需要时间。一个乘客的旅行时间，等于他到达目的地的时刻减去他来到出发地的时刻。因为只有一辆观光车，有时候还要停下来等其他乘客，乘客们纷纷抱怨旅行时间太长了。于是聪明的司机 ZZ 给公交车安装了 $k$ 个氮气加速器，每使用一个加速器，可以使其中一个 $D_i-1$。对于同一个 $D_i$ 可以重复使用加速器，但是必须保证使用后 $D_i\\ge0$。\n\n那么 ZZ 该如何安排使用加速器，才能使所有乘客的旅行时间总和最小？", "inputFormat": "第 $1$ 行是 $3$ 个整数 $n,m,k$，每两个整数之间用一个空格隔开。分别表示景点数、乘客数和氮气加速器个数。\n\n第 $2$ 行是 $n-1$ 个整数，每两个整数之间用一个空格隔开，第 $i$ 个数表示从第 $i$ 个景点开往第 $i+1$ 个景点所需要的时间，即 $D_i$。\n\n第 $3$ 行至 $m+2$ 行每行 $3$ 个整数 $T_i,A_i,B_i$，每两个整数之间用一个空格隔开。第 $i+2$ 行表示第 $i$ 位乘客来到出发景点的时刻，出发的景点编号和到达的景点编号。", "outputFormat": "一个整数，表示最小的总旅行时间。\n", "hint": "**【输入输出样例说明】**\n\n对 $D_2$ 使用 $2$ 个加速器，从 $2$ 号景点到 $3$ 号景点时间变为 $2$ 分钟。\n\n公交车在第 $1$ 分钟从 $1$ 号景点出发，第 $2$ 分钟到达 $2$ 号景点，第 $5$ 分钟从 $2$ 号景点出发，第 $7$ 分钟到达 $3$ 号景点。\n\n第 $1$ 个旅客旅行时间 $7-0=7$ 分钟。\n\n第 $2$ 个旅客旅行时间 $2-1=1$ 分钟。\n\n第 $3$ 个旅客旅行时间 $7-5=2$ 分钟。\n\n总时间 $7+1+2=10$ 分钟。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$k=0$。\n\n对于 $20\\%$ 的数据，$k=1$。\n\n对于 $40\\%$ 的数据，$2 \\le n \\le 50$，$1 \\le m \\le 10^3$，$0 \\le k \\le 20$，$0 \\le D_i \\le 10$，$0 \\le T_i \\le 500$。\n\n对于 $60\\%$ 的数据，$1 \\le n \\le 100$，$1 \\le m \\le 10^3$，$0 \\le k \\le 100$，$0 \\le D_i \\le 100$，$0 \\le T_i \\le 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^3$，$1 \\le m \\le 10^4$，$0 \\le k \\le 10^5$，$0 \\le D_i \\le 100$，$0 \\le T_i \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1316", "type": "P", "difficulty": 6, "samples": [["2 2", "500000006"], ["3 3", "5"], ["3 4", "250000007"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["字符串", "枚举", "容斥原理", "快速数论变换 NTT"], "title": "Mivik 写书", "background": "Mivik 想当大作家。", "description": "Mivik 的键盘上有 $m$ 个不同的按键，对应着 $m$ 个不同的字符。由于 Mivik 不会写文章，所以他只好**等概率**随机乱按了 $n$ 个键，打出了一篇文章。\n\nMivik 定义一篇文章的复杂度是这篇文章所有**非空**本质不同子串的数目。我们认为两个字符串本质不同当且仅当它们的长度不同或者它们有任意一位上的字符不同。例如，文章 `abaa` 的复杂度是 8，因为它一共有 `a`、`b`、`ab`、`ba`、`aa`、`aba`、`baa`、`abaa` 这 8 个非空的本质不同子串。\n\nMivik 现在想知道，这篇文章期望的复杂度是多少。由于 Mivik 不喜欢奇形怪状的小数，你只需要输出期望的复杂度对 $10^9+7$ 取模后的值。", "inputFormat": "一行两个整数 $n$ 和 $m$，意义见题目描述。", "outputFormat": "一行一个整数，代表答案对 $10^9+7$ 取模后的值。", "hint": "### 样例解释\n\n样例一：假设键盘上的字符分别为 `a` 和 `b`，那么可能打出来的文章一共有 `aa`、`ab`、`ba`、`bb` 四种，它们的复杂度分别为 2、3、3、2，因此答案为 $\\frac{2+3+3+2}{4}=\\frac{5}{2}$，对 $10^9+7$ 取模后得到 500000006。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n\\le 20$，$1\\le m\\le 5\\cdot 10^6$。\n\nSubtask 1 (10 pts)：满足 $1\\le n, m\\le 7$。\n\nSubtask 2 (20 pts)：满足 $1\\le n\\le 5$。\n\nSubtask 3 (20 pts)：满足 $1\\le n\\le 10$。\n\nSubtask 4 (50 pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Mivik 写书", "background": "Mivik 想当大作家。", "description": "Mivik 的键盘上有 $m$ 个不同的按键，对应着 $m$ 个不同的字符。由于 Mivik 不会写文章，所以他只好**等概率**随机乱按了 $n$ 个键，打出了一篇文章。\n\nMivik 定义一篇文章的复杂度是这篇文章所有**非空**本质不同子串的数目。我们认为两个字符串本质不同当且仅当它们的长度不同或者它们有任意一位上的字符不同。例如，文章 `abaa` 的复杂度是 8，因为它一共有 `a`、`b`、`ab`、`ba`、`aa`、`aba`、`baa`、`abaa` 这 8 个非空的本质不同子串。\n\nMivik 现在想知道，这篇文章期望的复杂度是多少。由于 Mivik 不喜欢奇形怪状的小数，你只需要输出期望的复杂度对 $10^9+7$ 取模后的值。", "inputFormat": "一行两个整数 $n$ 和 $m$，意义见题目描述。", "outputFormat": "一行一个整数，代表答案对 $10^9+7$ 取模后的值。", "hint": "### 样例解释\n\n样例一：假设键盘上的字符分别为 `a` 和 `b`，那么可能打出来的文章一共有 `aa`、`ab`、`ba`、`bb` 四种，它们的复杂度分别为 2、3、3、2，因此答案为 $\\frac{2+3+3+2}{4}=\\frac{5}{2}$，对 $10^9+7$ 取模后得到 500000006。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n\\le 20$，$1\\le m\\le 5\\cdot 10^6$。\n\nSubtask 1 (10 pts)：满足 $1\\le n, m\\le 7$。\n\nSubtask 2 (20 pts)：满足 $1\\le n\\le 5$。\n\nSubtask 3 (20 pts)：满足 $1\\le n\\le 10$。\n\nSubtask 4 (50 pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P1317", "type": "P", "difficulty": 1, "samples": [["10\n0 1 0 2 1 2 0 0 2 0\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创"], "title": "低洼地", "background": "", "description": "一组数，分别表示地平线的高度变化。高度值为整数，相邻高度用直线连接。找出并统计有多少个可能积水的低洼地？\n\n如图：地高变化为 $[0,1,0,2,1,2,0,0,2,0]$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c1zyz8wu.png)\n\n", "inputFormat": "两行，第一行 $n,$ 表示有 $n$ 个数。第 $2$ 行连续 $n$ 个数表示地平线高度变化的数据，保证首尾为 $0$。$(3 \\le n \\le 10000,0 \\le $ 高度 $ \\le 1000)$。", "outputFormat": "一个数，可能积水低洼地的数目。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Depressions", "background": "", "description": "A sequence of numbers represents the ground profile’s elevation changes. The height values are integers, and adjacent heights are connected by straight line segments. Find and count how many low-lying depressions could hold water.\n\nAs shown: the elevation changes are $[0,1,0,2,1,2,0,0,2,0]$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c1zyz8wu.png)", "inputFormat": "Two lines.\n- Line 1: $n$, the number of heights.\n- Line 2: $n$ integers giving the ground profile heights, with the first and last equal to $0$. $(3 \\le n \\le 10000, 0 \\le$ height $\\le 1000)$.", "outputFormat": "A single integer: the number of depressions that can potentially hold water.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "低洼地", "background": "", "description": "一组数，分别表示地平线的高度变化。高度值为整数，相邻高度用直线连接。找出并统计有多少个可能积水的低洼地？\n\n如图：地高变化为 $[0,1,0,2,1,2,0,0,2,0]$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c1zyz8wu.png)\n\n", "inputFormat": "两行，第一行 $n,$ 表示有 $n$ 个数。第 $2$ 行连续 $n$ 个数表示地平线高度变化的数据，保证首尾为 $0$。$(3 \\le n \\le 10000,0 \\le $ 高度 $ \\le 1000)$。", "outputFormat": "一个数，可能积水低洼地的数目。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1318", "type": "P", "difficulty": 3, "samples": [["10\n0 1 0 2 1 2 0 0 2 0\n", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "单调栈"], "title": "积水面积", "background": "", "description": "一组正整数，分别表示由正方体叠起的柱子的高度。若某高度值为 $x$，表示由 $x$ 个正立方的方块叠起（如下图，$0 \\le x \\le 5000$）。找出所有可能积水的地方（图中蓝色部分），统计它们可能积水的面积总和（计算的是图中的横截面积。一个立方体的位置，为一个单位面积）。\n\n如图：柱子高度变化为 `0 1 0 2 1 2 0 0 2 0`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8bu0hhke.png)\n\n图中蓝色部分为积水面积，共有 $6$ 个单位面积积水。", "inputFormat": "两行，第一行 $n$，表示有 $n$ 个数（$3 \\le n \\le 10000$）。第 $2$ 行连续 $n$ 个数表示依次由正方体叠起的高度，保证首尾为 $0$。", "outputFormat": "一个数，可能积水的面积。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Trapped Water Area", "background": "", "description": "A sequence of positive integers represents the heights of columns formed by stacking cubes. If a height value is $x$, it means $x$ unit cubes are stacked (as in the figure, $0 \\le x \\le 5000$). Find all positions where water can be trapped (the blue parts in the figure) and compute the total trapped area (this is the cross-sectional area in the figure. Each unit cube position corresponds to 1 unit area).\n\nExample: the column heights change as `0 1 0 2 1 2 0 0 2 0`.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8bu0hhke.png)\n\nThe blue parts in the figure are the trapped area, totaling $6$ unit areas.", "inputFormat": "Two lines. The first line contains $n$, the number of values ($3 \\le n \\le 10000$). The second line contains $n$ consecutive integers giving the heights of the stacked cubes in order, with the guarantee that the first and last values are $0$.", "outputFormat": "A single number: the total trapped area.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "积水面积", "background": "", "description": "一组正整数，分别表示由正方体叠起的柱子的高度。若某高度值为 $x$，表示由 $x$ 个正立方的方块叠起（如下图，$0 \\le x \\le 5000$）。找出所有可能积水的地方（图中蓝色部分），统计它们可能积水的面积总和（计算的是图中的横截面积。一个立方体的位置，为一个单位面积）。\n\n如图：柱子高度变化为 `0 1 0 2 1 2 0 0 2 0`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8bu0hhke.png)\n\n图中蓝色部分为积水面积，共有 $6$ 个单位面积积水。", "inputFormat": "两行，第一行 $n$，表示有 $n$ 个数（$3 \\le n \\le 10000$）。第 $2$ 行连续 $n$ 个数表示依次由正方体叠起的高度，保证首尾为 $0$。", "outputFormat": "一个数，可能积水的面积。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1319", "type": "P", "difficulty": 1, "samples": [["7 3 1 6 1 6 4 3 1 6 1 6 1 3 7", "0001000\n0001000\n0001111\n0001000\n0001000\n0001000\n1111111\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "洛谷原创"], "title": "压缩技术", "background": "", "description": "设某汉字由 $N \\times N$ 的 $\\texttt 0$ 和 $\\texttt 1$ 的点阵图案组成。\n\n我们依照以下规则生成压缩码。连续一组数值：从汉字点阵图案的第一行第一个符号开始计算，按书写顺序从左到右，由上至下。第一个数表示连续有几个 $\\texttt 0$，第二个数表示接下来连续有几个 $\\texttt 1$，第三个数再接下来连续有几个 $\\texttt 0$，第四个数接着连续几个 $\\texttt 1$，以此类推……\n\n例如: 以下汉字点阵图案：\n\n```\n0001000\n0001000\n0001111\n0001000\n0001000\n0001000\n1111111\n```\n\n对应的压缩码是： $\\texttt {7 3 1 6 1 6 4 3 1 6 1 6 1 3 7}$ （第一个数是 $N$ ,其余各位表示交替表示0和1 的个数，压缩码保证 $N \\times N=$ 交替的各位数之和）\n", "inputFormat": "数据输入一行，由空格隔开的若干个整数，表示压缩码。\n\n其中，压缩码的第一个数字就是 $N$，表示这个点阵应当是 $N\\times N$ 的大小。\n\n接下来的若干个数字，含义如题目描述所述。", "outputFormat": "输出一个 $N\\times N$ 的 01 矩阵，表示最后的汉字点阵图（点阵符号之间不留空格）。\n", "hint": "## 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rsx9qytk.png)\n\n## 数据范围\n\n数据保证，$3\\leq N\\leq 200$。", "locale": "zh-CN", "translations": {"en": {"title": "Compression Technique", "background": "", "description": "Suppose a Chinese character is represented by an $N \\times N$ dot-matrix pattern of $\\texttt 0$ and $\\texttt 1$.\n\nWe generate a compression code according to the following rule. A sequence of consecutive counts: start from the first symbol of the first row of the dot-matrix pattern, and scan in reading order, left to right and top to bottom. The first number is how many consecutive $\\texttt 0$ appear, the second number is how many consecutive $\\texttt 1$ appear next, the third number is how many consecutive $\\texttt 0$ appear next, the fourth number is how many consecutive $\\texttt 1$ appear next, and so on.\n\nFor example, the following dot-matrix pattern:\n\n```\n0001000\n0001000\n0001111\n0001000\n0001000\n0001000\n1111111\n```\n\ncorresponds to the compression code: $\\texttt {7 3 1 6 1 6 4 3 1 6 1 6 1 3 7}$ (the first number is $N$, the remaining numbers alternately denote the counts of 0 and 1. It is guaranteed that $N \\times N=$ the sum of those alternating counts).", "inputFormat": "The input is one line containing several integers separated by spaces, representing the compression code.\n\nAmong them, the first integer of the compression code is $N$, indicating that the dot matrix should be of size $N\\times N$.\n\nThe meanings of the remaining integers are as described in the problem statement.", "outputFormat": "Output an $N\\times N$ 01 matrix representing the final dot-matrix pattern of the character (do not print spaces between symbols).", "hint": "Sample Explanation\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rsx9qytk.png)\n\nConstraints\n\nIt is guaranteed that $3\\leq N\\leq 200$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "压缩技术", "background": "", "description": "设某汉字由 $N \\times N$ 的 $\\texttt 0$ 和 $\\texttt 1$ 的点阵图案组成。\n\n我们依照以下规则生成压缩码。连续一组数值：从汉字点阵图案的第一行第一个符号开始计算，按书写顺序从左到右，由上至下。第一个数表示连续有几个 $\\texttt 0$，第二个数表示接下来连续有几个 $\\texttt 1$，第三个数再接下来连续有几个 $\\texttt 0$，第四个数接着连续几个 $\\texttt 1$，以此类推……\n\n例如: 以下汉字点阵图案：\n\n```\n0001000\n0001000\n0001111\n0001000\n0001000\n0001000\n1111111\n```\n\n对应的压缩码是： $\\texttt {7 3 1 6 1 6 4 3 1 6 1 6 1 3 7}$ （第一个数是 $N$ ,其余各位表示交替表示0和1 的个数，压缩码保证 $N \\times N=$ 交替的各位数之和）\n", "inputFormat": "数据输入一行，由空格隔开的若干个整数，表示压缩码。\n\n其中，压缩码的第一个数字就是 $N$，表示这个点阵应当是 $N\\times N$ 的大小。\n\n接下来的若干个数字，含义如题目描述所述。", "outputFormat": "输出一个 $N\\times N$ 的 01 矩阵，表示最后的汉字点阵图（点阵符号之间不留空格）。\n", "hint": "## 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rsx9qytk.png)\n\n## 数据范围\n\n数据保证，$3\\leq N\\leq 200$。", "locale": "zh-CN"}}}
{"pid": "P1320", "type": "P", "difficulty": 1, "samples": [["0001000\n0001000\n0001111\n0001000\n0001000\n0001000\n1111111\n", "7 3 1 6 1 6 4 3 1 6 1 6 1 3 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "洛谷原创"], "title": "压缩技术（续集版）", "background": "", "description": "设某汉字由 $N \\times N$ 的 $\\texttt 0$ 和 $\\texttt 1$ 的点阵图案组成。\n\n我们依照以下规则生成压缩码。连续一组数值：从汉字点阵图案的第一行第一个符号开始计算，按书写顺序从左到右，由上至下。第一个数表示连续有几个 $\\texttt 0$，第二个数表示接下来连续有几个 $\\texttt 1$，第三个数再接下来连续有几个 $\\texttt 0$，第四个数接着连续几个 $\\texttt 1$，以此类推……\n\n例如: 以下汉字点阵图案：\n\n```\n0001000\n0001000\n0001111\n0001000\n0001000\n0001000\n1111111\n```\n\n对应的压缩码是： $\\texttt {7 3 1 6 1 6 4 3 1 6 1 6 1 3 7}$ （第一个数是 $N$，其余各位表示交替表示 $\\tt 0$ 和 $\\tt 1$ 的个数，压缩码保证 $N \\times N=$ 交替的各位数之和）\n", "inputFormat": "汉字点阵图（点阵符号之间不留空格）。\n", "outputFormat": "输出一行，压缩码。\n", "hint": "数据保证，$3\\leq N\\leq 200$。", "locale": "zh-CN", "translations": {"en": {"title": "Compression Technology (Sequel Edition)", "background": "", "description": "Suppose a Chinese character is composed of an $N \\times N$ dot-matrix pattern of $\\texttt 0$ and $\\texttt 1$.\n\nWe generate a compression code according to the following rule. It is a sequence of consecutive counts: starting from the first symbol of the first row of the dot-matrix pattern, scan in writing order, left to right, top to bottom. The first number gives how many consecutive $\\texttt 0$ there are, the second number gives how many consecutive $\\texttt 1$ follow, the third number gives how many consecutive $\\texttt 0$ follow, the fourth number gives how many consecutive $\\texttt 1$ follow, and so on...\n\nFor example, the following dot-matrix pattern:\n\n```\n0001000\n0001000\n0001111\n0001000\n0001000\n0001000\n1111111\n```\n\nThe corresponding compression code is: $\\texttt {7 3 1 6 1 6 4 3 1 6 1 6 1 3 7}$ (the first number is $N$, and the remaining numbers alternately give the counts of $\\tt 0$ and $\\tt 1$; the compression code guarantees $N \\times N=$ the sum of these alternating counts).", "inputFormat": "The character’s dot-matrix (no spaces between symbols).", "outputFormat": "Output one line, the compression code.", "hint": "It is guaranteed that $3 \\leq N \\leq 200$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "压缩技术（续集版）", "background": "", "description": "设某汉字由 $N \\times N$ 的 $\\texttt 0$ 和 $\\texttt 1$ 的点阵图案组成。\n\n我们依照以下规则生成压缩码。连续一组数值：从汉字点阵图案的第一行第一个符号开始计算，按书写顺序从左到右，由上至下。第一个数表示连续有几个 $\\texttt 0$，第二个数表示接下来连续有几个 $\\texttt 1$，第三个数再接下来连续有几个 $\\texttt 0$，第四个数接着连续几个 $\\texttt 1$，以此类推……\n\n例如: 以下汉字点阵图案：\n\n```\n0001000\n0001000\n0001111\n0001000\n0001000\n0001000\n1111111\n```\n\n对应的压缩码是： $\\texttt {7 3 1 6 1 6 4 3 1 6 1 6 1 3 7}$ （第一个数是 $N$，其余各位表示交替表示 $\\tt 0$ 和 $\\tt 1$ 的个数，压缩码保证 $N \\times N=$ 交替的各位数之和）\n", "inputFormat": "汉字点阵图（点阵符号之间不留空格）。\n", "outputFormat": "输出一行，压缩码。\n", "hint": "数据保证，$3\\leq N\\leq 200$。", "locale": "zh-CN"}}}
{"pid": "P1321", "type": "P", "difficulty": 1, "samples": [["......boyogirlyy......girl.......\n", "4\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "字符串", "洛谷原创"], "title": "单词覆盖还原", "background": "", "description": "我有一个长度为 $l$ 的字符串，最开始时，这个字符串由 $l$ 个句号（`.`）组成。\n\n我在这个字符串中，将多次把 `boy` 或者 `girl` 两单词，依次贴到这个字符串中。\n\n后贴上单词，会覆盖之前贴上的单词，或者覆盖句号。最终，每个单词至少有一个字符没有被覆盖。\n\n请问，一共贴有几个 `boy` 几个 `girl`？", "inputFormat": "一行被反复贴有 `boy` 和 `girl` 两单词的字符串。\n", "outputFormat": "两行，两个整数。第一行为 `boy` 的个数，第二行为 `girl` 的个数。\n", "hint": "数据保证，$3\\le l\\le255$，字符串仅仅包含如下字符：$\\texttt{.bgilory}$。", "locale": "zh-CN", "translations": {"en": {"title": "Word Overlay Restoration", "background": "", "description": "I have a string of length $l$, which initially consists of $l$ periods ('.').\n\nI repeatedly paste the words `boy` or `girl` onto this string in order.\n\nWords pasted later will overwrite previously pasted words or periods. In the end, each word has at least one character that is not overwritten.\n\nHow many `boy` and how many `girl` were pasted in total?", "inputFormat": "A single line: the string after repeatedly pasting the words `boy` and `girl`.", "outputFormat": "Two lines, each with one integer. The first line is the count of `boy`, and the second line is the count of `girl`.", "hint": "It is guaranteed that $3\\le l\\le255$, and the string contains only the following characters: $\\texttt{.bgilory}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "单词覆盖还原", "background": "", "description": "我有一个长度为 $l$ 的字符串，最开始时，这个字符串由 $l$ 个句号（`.`）组成。\n\n我在这个字符串中，将多次把 `boy` 或者 `girl` 两单词，依次贴到这个字符串中。\n\n后贴上单词，会覆盖之前贴上的单词，或者覆盖句号。最终，每个单词至少有一个字符没有被覆盖。\n\n请问，一共贴有几个 `boy` 几个 `girl`？", "inputFormat": "一行被反复贴有 `boy` 和 `girl` 两单词的字符串。\n", "outputFormat": "两行，两个整数。第一行为 `boy` 的个数，第二行为 `girl` 的个数。\n", "hint": "数据保证，$3\\le l\\le255$，字符串仅仅包含如下字符：$\\texttt{.bgilory}$。", "locale": "zh-CN"}}}
{"pid": "P1322", "type": "P", "difficulty": 3, "samples": [["FD 100\n", "100\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "搜索", "递归"], "title": "logo语言", "background": "", "description": "Logo 语言命令可以指挥海龟在屏幕中爬行。本问题只使用 Logo 语言的三个语句：前进 `FD`，倒退 `BK` 和重复 `REPEAT`，因此，海龟只在一条直线上来回爬行。输入一行 logo 的命令行，输出海龟在屏幕中离开原来位子的距离（假设屏幕很大，可以让海龟移开 $10^9$ 的距离）。\n\n例如：\n\n- 输入 `FD 100` ，输出：$100$。\n\n- 输入 `FD 100 BK 150`， 输出：$50$。\n\n- 输入 `REPEAT 5[FD 100 BK 50]`， 输出：$250$。\n\n- 输入 `REPEAT 5[FD 50 REPEAT 10[FD 100]]`， 输出：$5250$。", "inputFormat": "一行，一个字符串，符合上述规定的 logo 命令行。", "outputFormat": "一个数据，海龟离开原来位子的距离。", "hint": "每个语句输入数据的绝对值不超过 $1000$。输出结果不会超过 $10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Logo Language", "background": "", "description": "Logo language commands can direct a turtle to crawl on the screen. This problem uses only three Logo statements: forward `FD`, backward `BK`, and repeat `REPEAT`, so the turtle moves back and forth along a single straight line. Given one line of a Logo command line, output the distance between the turtle and its original position (assume the screen is large enough to let the turtle move up to a distance of $10^9$).\n\nFor example:\n- Input `FD 100`, output: $100$.\n- Input `FD 100 BK 150`, output: $50$.\n- Input `REPEAT 5[FD 100 BK 50]`, output: $250$.\n- Input `REPEAT 5[FD 50 REPEAT 10[FD 100]]`, output: $5250$.", "inputFormat": "One line containing a string that is a valid Logo command line as specified above.", "outputFormat": "A single number: the distance from the turtle’s original position.", "hint": "The absolute value of each statement’s argument does not exceed $1000$. The output will not exceed $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "logo语言", "background": "", "description": "Logo 语言命令可以指挥海龟在屏幕中爬行。本问题只使用 Logo 语言的三个语句：前进 `FD`，倒退 `BK` 和重复 `REPEAT`，因此，海龟只在一条直线上来回爬行。输入一行 logo 的命令行，输出海龟在屏幕中离开原来位子的距离（假设屏幕很大，可以让海龟移开 $10^9$ 的距离）。\n\n例如：\n\n- 输入 `FD 100` ，输出：$100$。\n\n- 输入 `FD 100 BK 150`， 输出：$50$。\n\n- 输入 `REPEAT 5[FD 100 BK 50]`， 输出：$250$。\n\n- 输入 `REPEAT 5[FD 50 REPEAT 10[FD 100]]`， 输出：$5250$。", "inputFormat": "一行，一个字符串，符合上述规定的 logo 命令行。", "outputFormat": "一个数据，海龟离开原来位子的距离。", "hint": "每个语句输入数据的绝对值不超过 $1000$。输出结果不会超过 $10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P1323", "type": "P", "difficulty": 3, "samples": [["5 4", "137915\n95"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "贪心", "优先队列", "队列"], "title": "删数问题", "background": "", "description": "一个集合有如下元素：$1$ 是集合元素；若 $P$ 是集合的元素，则 $2\\times P+1$，$4\\times P+5$ 也是集合的元素。\n\n取出此集合中最小的 $k$ 个元素，按从小到大的顺序组合成一个多位数，现要求从中删除 $m$ 个数位上的数字，使得剩下的数字最大，编程输出删除前和删除后的多位数字。\n\n注：不存在所有数被删除的情况。", "inputFormat": "只有一行两个整数，分别代表 $k$ 和 $m$。", "outputFormat": "输出为两行两个整数，第一行为删除前的数字，第二行为删除后的数字。\n", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $1\\le k,m\\le300$。\n- 对于 $100\\%$ 的数据，保证 $1\\le k,m\\le3\\times10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Deleting Digits Problem", "background": "", "description": "A set is defined as follows: $1$ is an element of the set; if $P$ is an element of the set, then $2\\times P+1$ and $4\\times P+5$ are also elements of the set.\n\nTake the smallest $k$ elements from this set, concatenate them in increasing order to form a multi-digit integer. You are required to delete $m$ digits from this integer so that the remaining number is as large as possible. Write a program to output the integer before deletion and the integer after deletion.\n\nNote: It is guaranteed that not all digits are deleted.", "inputFormat": "A single line with two integers representing $k$ and $m$.", "outputFormat": "Output two lines. The first line is the number before deletion. The second line is the number after deletion.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, it is guaranteed that $1 \\le k, m \\le 300$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\le k, m \\le 3\\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "删数问题", "background": "", "description": "一个集合有如下元素：$1$ 是集合元素；若 $P$ 是集合的元素，则 $2\\times P+1$，$4\\times P+5$ 也是集合的元素。\n\n取出此集合中最小的 $k$ 个元素，按从小到大的顺序组合成一个多位数，现要求从中删除 $m$ 个数位上的数字，使得剩下的数字最大，编程输出删除前和删除后的多位数字。\n\n注：不存在所有数被删除的情况。", "inputFormat": "只有一行两个整数，分别代表 $k$ 和 $m$。", "outputFormat": "输出为两行两个整数，第一行为删除前的数字，第二行为删除后的数字。\n", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $1\\le k,m\\le300$。\n- 对于 $100\\%$ 的数据，保证 $1\\le k,m\\le3\\times10^4$。", "locale": "zh-CN"}}}
{"pid": "P1324", "type": "P", "difficulty": 3, "samples": [["2 2\n3\n3\n", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心"], "title": "矩形分割", "background": "", "description": "出于某些方面的需求，我们要把一块 $N \\times M$ 的木板切成一个个 $1 \\times 1$ 的小方块。\n\n对于一块木板，我们只能从某条横线或者某条竖线（要在方格线上），而且这木板是不均匀的，从不同的线切割下去要花不同的代价。而且，对于一块木板，切割一次以后就被分割成两块，而且不能把这两块木板拼在一起然后一刀切成四块，只能两块分别再进行一次切割。\n\n现在，给出从不同的线切割所要花的代价，求把整块木板分割成 $1 \\times 1$ 块小方块所需要耗费的最小代价。", "inputFormat": "输入文件第一行包括 $N$ 和 $M$，表示长 $N$ 宽 $M$ 的矩阵。\n\n第二行包括 $N-1$ 个非负整数，分别表示沿着 $N-1$ 条横线切割的代价。\n\n第三行包括 $M-1$ 个非负整数，分别表示沿着 $M-1$ 条竖线切割的代价。", "outputFormat": "输出一个整数，表示最小代价。\n", "hint": "数据范围：\n\n对于 $60\\%$ 的数据，有 $1 \\le N,M \\le 100$；\n\n对于 $100\\%$ 的数据，有 $1 \\le N,M \\le 2000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Rectangle Partition", "background": "", "description": "For certain needs, we need to cut an $N \\times M$ wooden board into $1 \\times 1$ small squares.\n\nFor a board, we may only cut along a horizontal or a vertical grid line (on the grid lines). The board is non-uniform, so cutting along different lines costs different amounts. Each cut splits one current piece into two pieces. You cannot put pieces together and make a single cut across them to get four pieces; you must cut the two pieces separately.\n\nGiven the costs of cutting along each line, find the minimum total cost to partition the whole board into $1 \\times 1$ squares.", "inputFormat": "The first line contains $N$ and $M$, denoting an $N \\times M$ board.\n\nThe second line contains $N - 1$ non-negative integers, representing the costs of cutting along the $N - 1$ horizontal grid lines.\n\nThe third line contains $M - 1$ non-negative integers, representing the costs of cutting along the $M - 1$ vertical grid lines.", "outputFormat": "Output a single integer, the minimum total cost.", "hint": "Constraints:\n\n- For $60\\%$ of the testdata, $1 \\le N, M \\le 100$.\n- For $100\\%$ of the testdata, $1 \\le N, M \\le 2000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "矩形分割", "background": "", "description": "出于某些方面的需求，我们要把一块 $N \\times M$ 的木板切成一个个 $1 \\times 1$ 的小方块。\n\n对于一块木板，我们只能从某条横线或者某条竖线（要在方格线上），而且这木板是不均匀的，从不同的线切割下去要花不同的代价。而且，对于一块木板，切割一次以后就被分割成两块，而且不能把这两块木板拼在一起然后一刀切成四块，只能两块分别再进行一次切割。\n\n现在，给出从不同的线切割所要花的代价，求把整块木板分割成 $1 \\times 1$ 块小方块所需要耗费的最小代价。", "inputFormat": "输入文件第一行包括 $N$ 和 $M$，表示长 $N$ 宽 $M$ 的矩阵。\n\n第二行包括 $N-1$ 个非负整数，分别表示沿着 $N-1$ 条横线切割的代价。\n\n第三行包括 $M-1$ 个非负整数，分别表示沿着 $M-1$ 条竖线切割的代价。", "outputFormat": "输出一个整数，表示最小代价。\n", "hint": "数据范围：\n\n对于 $60\\%$ 的数据，有 $1 \\le N,M \\le 100$；\n\n对于 $100\\%$ 的数据，有 $1 \\le N,M \\le 2000$。\n", "locale": "zh-CN"}}}
{"pid": "P1325", "type": "P", "difficulty": 3, "samples": [["3 2\n1 2\n-3 1\n2 1\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "计算几何", "排序"], "title": "雷达安装", "background": "", "description": "假设海岸线是一条无限延伸的直线。它的一侧是陆地，另一侧是海洋。每一座小岛是在海面上的一个点。雷达必须安装在陆地上（包括海岸线），并且每个雷达都有相同的扫描范围 $d$。你的任务是建立尽量少的雷达站，使所有小岛都在扫描范围之内。\n\n数据使用笛卡尔坐标系，定义海岸线为 $x$ 轴。在 $x$ 轴上方为海洋，下方为陆地。\n\n\n", "inputFormat": "第一行包括 $2$ 个整数 $n$ 和 $d$，$n$ 是岛屿数目，$d$ 是雷达扫描范围。\n\n接下来 $n$ 行，每行两个整数，为岛屿坐标。\n", "outputFormat": "一个整数表示最少需要的雷达数目，若不可能覆盖所有岛屿，输出 `-1`。\n", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fnezefht.png)\n\n### 数据范围\n\n对于全部数据，$n\\le1000$，$ d \\le 2\\times 10^4$，$ | x_i | \\le 2 \\times 10^6 $，$ 0 \\le y_i \\le 2\\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Radar Installation", "background": "", "description": "Assume the coastline is an infinitely long straight line. One side is land, and the other side is ocean. Each island is a point on the sea surface. Radars must be installed on land (including the coastline), and each radar has the same scan range $d$. Your task is to build as few radar stations as possible so that all islands are within the scan range.\n\nThe data use the Cartesian coordinate system, with the coastline defined as the $x$ axis. The ocean is above the $x$ axis, and the land is below it.", "inputFormat": "The first line contains $2$ integers $n$ and $d$, where $n$ is the number of islands and $d$ is the radar scan range.\n\nThen follow $n$ lines, each containing two integers, the coordinates of an island.", "outputFormat": "Output a single integer: the minimum number of radars required. If it is impossible to cover all islands, output `-1`.", "hint": "### Sample 1 Explanation\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fnezefht.png)\n\n### Constraints\n\n对于全部数据，$n\\le1000$，$ d \\le 2\\times 10^4$，$ | x_i | \\le 2 \\times 10^6 $，$ 0 \\le y_i \\le 2\\times 10^4$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "雷达安装", "background": "", "description": "假设海岸线是一条无限延伸的直线。它的一侧是陆地，另一侧是海洋。每一座小岛是在海面上的一个点。雷达必须安装在陆地上（包括海岸线），并且每个雷达都有相同的扫描范围 $d$。你的任务是建立尽量少的雷达站，使所有小岛都在扫描范围之内。\n\n数据使用笛卡尔坐标系，定义海岸线为 $x$ 轴。在 $x$ 轴上方为海洋，下方为陆地。\n\n\n", "inputFormat": "第一行包括 $2$ 个整数 $n$ 和 $d$，$n$ 是岛屿数目，$d$ 是雷达扫描范围。\n\n接下来 $n$ 行，每行两个整数，为岛屿坐标。\n", "outputFormat": "一个整数表示最少需要的雷达数目，若不可能覆盖所有岛屿，输出 `-1`。\n", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fnezefht.png)\n\n### 数据范围\n\n对于全部数据，$n\\le1000$，$ d \\le 2\\times 10^4$，$ | x_i | \\le 2 \\times 10^6 $，$ 0 \\le y_i \\le 2\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P1326", "type": "P", "difficulty": 3, "samples": [["1 1 1\n1 1 2", "1 1\n3 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "福建省历届夏令营"], "title": "足球", "background": "", "description": "我们当中有很多热爱中国足球的同学，我们都知道中超（中国足球超级联赛）的规则：\n\n一场比赛中，若获胜（即你的得分严格大于对手得分）则获得 $3$ 的积分，若打平（即你的得分等于对手得分）则获得 $1$ 分，若失败（即你的得分严格小于对手得分）获得 $0$ 积分。\n\n这个问题很简单，假设 $N$ 轮比赛中你一共攻入 $S$ 个球，丢掉 $T$ 个球，那么你可能获得的最大得分和最小得分是多少？", "inputFormat": "多组数据，每组数据一行三个整数 $S,T,N$（$10^9\\ge S,T \\ge 0$，$10^9\\ge N \\ge 1$）。每个测试点内数据组数不超过 $3\\times 10^4$ 组。", "outputFormat": "对于每组数据输出一行，两个整数表示最大得分和最小得分。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Football", "background": "", "description": "Many of us love Chinese football; we all know the rules of the Chinese Super League (CSL):\n\nIn a match, if you win (i.e., your goals are strictly greater than your opponent's), you get $3$ points; if you draw (i.e., your goals equal your opponent's), you get $1$ point; if you lose (i.e., your goals are strictly less than your opponent's), you get $0$ points.\n\nThis problem is simple: suppose over $N$ rounds you scored $S$ goals in total and conceded $T$ goals. What are the maximum and minimum points you could possibly obtain?", "inputFormat": "Multiple test cases. Each test case contains one line with three integers $S, T, N$ ($10^9 \\ge S, T \\ge 0$, $10^9 \\ge N \\ge 1$). There are at most $3 \\times 10^4$ test cases per test point.", "outputFormat": "For each test case, output one line with two integers: the maximum points and the minimum points.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "足球", "background": "", "description": "我们当中有很多热爱中国足球的同学，我们都知道中超（中国足球超级联赛）的规则：\n\n一场比赛中，若获胜（即你的得分严格大于对手得分）则获得 $3$ 的积分，若打平（即你的得分等于对手得分）则获得 $1$ 分，若失败（即你的得分严格小于对手得分）获得 $0$ 积分。\n\n这个问题很简单，假设 $N$ 轮比赛中你一共攻入 $S$ 个球，丢掉 $T$ 个球，那么你可能获得的最大得分和最小得分是多少？", "inputFormat": "多组数据，每组数据一行三个整数 $S,T,N$（$10^9\\ge S,T \\ge 0$，$10^9\\ge N \\ge 1$）。每个测试点内数据组数不超过 $3\\times 10^4$ 组。", "outputFormat": "对于每组数据输出一行，两个整数表示最大得分和最小得分。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1327", "type": "P", "difficulty": 3, "samples": [["8\n8 23 4 16 77 -5 53 100\n", "5\n\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "福建省历届夏令营"], "title": "数列排序", "background": "", "description": "给定一个数列 $a$，这个数列满足 $a_i \\not  =a_j$（$i\\not=j$），现在要求你把这个数列从小到大排序，每次允许你交换其中任意一对数，请问最少需要几次交换？", "inputFormat": "第一行是一个整数，代表数字个数 $n$。\n\n第二行有 $n$ 个整数用空格分隔开，表示数列 $a$。", "outputFormat": "只有一行，包含一个数，表示最少的交换次数。\n\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le10^5$，$-2^{31}\\lt a_i\\lt2^{31}-1$。", "locale": "zh-CN", "translations": {"en": {"title": "Sequence Sorting", "background": "", "description": "Given a sequence $a$ that satisfies $a_i \\not  =a_j$ ($i\\not=j$), you are asked to sort this sequence in ascending order. Each time, you may swap any pair of numbers. What is the minimum number of swaps required?", "inputFormat": "The first line contains an integer $n$, the number of elements.\n\nThe second line contains $n$ integers separated by spaces, representing the sequence $a$.", "outputFormat": "Output a single line containing one integer, the minimum number of swaps.", "hint": "#### Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $1\\le n\\le10^5$, $-2^{31}\\lt a_i\\lt2^{31}-1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数列排序", "background": "", "description": "给定一个数列 $a$，这个数列满足 $a_i \\not  =a_j$（$i\\not=j$），现在要求你把这个数列从小到大排序，每次允许你交换其中任意一对数，请问最少需要几次交换？", "inputFormat": "第一行是一个整数，代表数字个数 $n$。\n\n第二行有 $n$ 个整数用空格分隔开，表示数列 $a$。", "outputFormat": "只有一行，包含一个数，表示最少的交换次数。\n\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le10^5$，$-2^{31}\\lt a_i\\lt2^{31}-1$。", "locale": "zh-CN"}}}
{"pid": "P1328", "type": "P", "difficulty": 2, "samples": [["10 5 6\n0 1 2 3 4\n0 3 4 2 1 0\n", "6 2\n"], ["9 5 5\n0 1 2 3 4\n1 0 3 2 4\n", "4 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2014", "NOIP 提高组"], "title": "[NOIP 2014 提高组] 生活大爆炸版石头剪刀布", "background": "NOIP2014 提高组 D1T1", "description": "石头剪刀布是常见的猜拳游戏：石头胜剪刀，剪刀胜布，布胜石头。如果两个人出拳一样，则不分胜负。在《生活大爆炸》第二季第 8 集中出现了一种石头剪刀布的升级版游戏。\n\n升级版游戏在传统的石头剪刀布游戏的基础上，增加了两个新手势：\n\n斯波克:《星际迷航》主角之一。\n\n蜥蜴人:《星际迷航》中的反面角色。\n\n这五种手势的胜负关系如表一所示,表中列出的是甲对乙的游戏结果。\n\n![](https://cdn.luogu.com.cn/upload/pic/1346.png)\n\n现在，小 A 和小 B 尝试玩这种升级版的猜拳游戏。已知他们的出拳都是有周期性规律的，但周期长度不一定相等。例如：如果小 A 以 `石头-布-石头-剪刀-蜥蜴人-斯波克` 长度为 $6$ 的周期出拳,那么他的出拳序列就是 `石头-布-石头-剪刀-蜥蜴人-斯波克-石头-布-石头-剪刀-蜥蜴人-斯波克-...`，而如果小 B 以 `剪刀-石头-布-斯波克-蜥蜴人` 长度为 $5$ 的周期出拳,那么他出拳的序列就是 `剪刀-石头-布-斯波克-蜥蜴人-剪刀-石头-布-斯波克-蜥蜴人-...`。\n\n已知小 A 和小 B 一共进行 $N$ 次猜拳。每一次赢的人得 $1$ 分，输的得 $0$ 分；平局两人都得 $0$ 分。现请你统计 $N$ 次猜拳结束之后两人的得分。", "inputFormat": "第一行包含三个整数：$N,N_A,N_B$，分别表示共进行 $N$ 次猜拳、小 A 出拳的周期长度，小 B 出拳的周期长度。数与数之间以一个空格分隔。\n\n第二行包含 $N_A$ 个整数,表示小 A 出拳的规律,第三行包含 $N_B$ 个整数，表示小 B 出拳的规律。其中，$0$ 表示 `剪刀`，$1$ 表示 `石头`，$2$ 表示 `布`，$3$ 表示 `蜥蜴人`，$4$ 表示 `斯波克`。数与数之间以一个空格分隔。", "outputFormat": "输出一行，包含两个整数，以一个空格分隔，分别表示小 A、小 B 的得分。", "hint": "对于 $100\\%$ 的数据，$0 < N \\leq 200, 0 < N_A \\leq 200, 0 < N_B \\leq 200$ 。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Senior] Rock-Paper-Scissors-Lizard-Spock", "background": "NOIP 2014 Senior D1T1.", "description": "Rock-paper-scissors is a common hand game: rock beats scissors, scissors beat paper, and paper beats rock. If two players show the same gesture, it is a draw. In Season 2, Episode 8 of “The Big Bang Theory,” an upgraded version of the game appears.\n\nOn top of the traditional rock-paper-scissors game, the upgraded version adds two new gestures:\n\nSpock: one of the main characters in Star Trek.\n\nLizard: a villain in Star Trek.\n\nThe win–loss relationships among the five gestures are shown in Table 1. The table lists the result of player A versus player B.\n\n![](https://cdn.luogu.com.cn/upload/pic/1346.png)\n\nNow, Xiao A and Xiao B are trying this upgraded hand game. It is known that their moves follow periodic patterns, though their period lengths may differ. For example: if Xiao A plays with the period `石头-布-石头-剪刀-蜥蜴人-斯波克` of length $6$, then his sequence of moves is `石头-布-石头-剪刀-蜥蜴人-斯波克-石头-布-石头-剪刀-蜥蜴人-斯波克-...`; and if Xiao B plays with the period `剪刀-石头-布-斯波克-蜥蜴人` of length $5$, then his sequence of moves is `剪刀-石头-布-斯波克-蜥蜴人-剪刀-石头-布-斯波克-蜥蜴人-...`.\n\nThey will play a total of $N$ rounds. In each round, the winner gets $1$ point, the loser gets $0$ points; in a draw, both get $0$ points. Please compute the scores of the two players after $N$ rounds.", "inputFormat": "The first line contains three integers: $N, N_A, N_B$, representing the total number of rounds, the period length of Xiao A’s moves, and the period length of Xiao B’s moves, respectively. The numbers are separated by a space.\n\nThe second line contains $N_A$ integers representing Xiao A’s pattern, and the third line contains $N_B$ integers representing Xiao B’s pattern. Here, $0$ denotes `剪刀`, $1$ denotes `石头`, $2$ denotes `布`, $3$ denotes `蜥蜴人`, and $4$ denotes `斯波克`. The numbers are separated by a space.", "outputFormat": "Output a single line containing two integers separated by a space, representing the scores of Xiao A and Xiao B, respectively.", "hint": "For $100\\%$ of the testdata, $0 < N \\leq 200, 0 < N_A \\leq 200, 0 < N_B \\leq 200$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 提高组] 生活大爆炸版石头剪刀布", "background": "NOIP2014 提高组 D1T1", "description": "石头剪刀布是常见的猜拳游戏：石头胜剪刀，剪刀胜布，布胜石头。如果两个人出拳一样，则不分胜负。在《生活大爆炸》第二季第 8 集中出现了一种石头剪刀布的升级版游戏。\n\n升级版游戏在传统的石头剪刀布游戏的基础上，增加了两个新手势：\n\n斯波克:《星际迷航》主角之一。\n\n蜥蜴人:《星际迷航》中的反面角色。\n\n这五种手势的胜负关系如表一所示,表中列出的是甲对乙的游戏结果。\n\n![](https://cdn.luogu.com.cn/upload/pic/1346.png)\n\n现在，小 A 和小 B 尝试玩这种升级版的猜拳游戏。已知他们的出拳都是有周期性规律的，但周期长度不一定相等。例如：如果小 A 以 `石头-布-石头-剪刀-蜥蜴人-斯波克` 长度为 $6$ 的周期出拳,那么他的出拳序列就是 `石头-布-石头-剪刀-蜥蜴人-斯波克-石头-布-石头-剪刀-蜥蜴人-斯波克-...`，而如果小 B 以 `剪刀-石头-布-斯波克-蜥蜴人` 长度为 $5$ 的周期出拳,那么他出拳的序列就是 `剪刀-石头-布-斯波克-蜥蜴人-剪刀-石头-布-斯波克-蜥蜴人-...`。\n\n已知小 A 和小 B 一共进行 $N$ 次猜拳。每一次赢的人得 $1$ 分，输的得 $0$ 分；平局两人都得 $0$ 分。现请你统计 $N$ 次猜拳结束之后两人的得分。", "inputFormat": "第一行包含三个整数：$N,N_A,N_B$，分别表示共进行 $N$ 次猜拳、小 A 出拳的周期长度，小 B 出拳的周期长度。数与数之间以一个空格分隔。\n\n第二行包含 $N_A$ 个整数,表示小 A 出拳的规律,第三行包含 $N_B$ 个整数，表示小 B 出拳的规律。其中，$0$ 表示 `剪刀`，$1$ 表示 `石头`，$2$ 表示 `布`，$3$ 表示 `蜥蜴人`，$4$ 表示 `斯波克`。数与数之间以一个空格分隔。", "outputFormat": "输出一行，包含两个整数，以一个空格分隔，分别表示小 A、小 B 的得分。", "hint": "对于 $100\\%$ 的数据，$0 < N \\leq 200, 0 < N_A \\leq 200, 0 < N_B \\leq 200$ 。\n", "locale": "zh-CN"}}}
{"pid": "P1329", "type": "P", "difficulty": 4, "samples": [["4 0\n", "2\n0 -1 0 1\n0 1 0 -1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "福建省历届夏令营", "Special Judge", "O2优化"], "title": "数列", "background": "", "description": "有这样一种数列 $a_1, a_2, \\cdots a_n$，其中 $a_{1}=0$，且对任意一项 $a_{i}$ 满足 $|a_{i}-a_{i+1}|=1$（$1\\le i<n$）。设 $s=\\sum_{i = 1}^n a_i = a_{1}+a_{2}+ \\cdots +a_{n}$，表示前 $n$ 项之和。\n\n现在给出数列长度 $n$ 与数列前 $n$ 项之和 $s$，要求：\n\n输出满足条件的数列的总数对 $2^{64}$ 取模后的结果。\n\n输出满足条件的 $100$ 个数列（如果不满 $100$ 个就全部输出）。\n", "inputFormat": "\n输入只有一行两个整数，分别表示数列长度 $n$ 与数列之和 $s$。", "outputFormat": "**本题存在 Special Judge**。\n\n在第一行输出一行一个整数 $t$，表示满足条件的数列总数对 $2^{64}$ 取模后的结果。\n\n接下来若干行，每行 $n$ 个整数，表示一个数列。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 100$，$-2^{63} \\leq s \\lt 2^{63}$。\n\n#### 说明\n\nspj provider：@[xiaolilsq](user/230249)。", "locale": "zh-CN", "translations": {"en": {"title": "Sequence", "background": "", "description": "There is a sequence $a_1, a_2, \\cdots, a_n$, where $a_{1} = 0$, and for any term $a_i$ it holds that $|a_i - a_{i+1}| = 1$ ($1 \\le i < n$). Let $s = \\sum_{i = 1}^n a_i = a_{1} + a_{2} + \\cdots + a_{n}$ denote the sum of the first $n$ terms.\n\nGiven the length $n$ and the sum $s$ of the first $n$ terms, do the following:\n\n- Output the total number of sequences that satisfy the conditions, modulo $2^{64}$.\n- Output up to $100$ sequences that satisfy the conditions (if fewer than $100$ exist, output all of them).", "inputFormat": "The input contains a single line with two integers, the sequence length $n$ and the sum $s$.", "outputFormat": "This problem uses a Special Judge.\n\nOn the first line, output a single integer $t$, the total number of valid sequences modulo $2^{64}$.\n\nThen output several lines, each containing $n$ integers, describing one valid sequence.", "hint": "- Constraints\n\n  For all testdata, it is guaranteed that $1 \\le n \\le 100$, $-2^{63} \\le s < 2^{63}$.\n\n- Notes\n\n  Special Judge provider: @[xiaolilsq](user/230249).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数列", "background": "", "description": "有这样一种数列 $a_1, a_2, \\cdots a_n$，其中 $a_{1}=0$，且对任意一项 $a_{i}$ 满足 $|a_{i}-a_{i+1}|=1$（$1\\le i<n$）。设 $s=\\sum_{i = 1}^n a_i = a_{1}+a_{2}+ \\cdots +a_{n}$，表示前 $n$ 项之和。\n\n现在给出数列长度 $n$ 与数列前 $n$ 项之和 $s$，要求：\n\n输出满足条件的数列的总数对 $2^{64}$ 取模后的结果。\n\n输出满足条件的 $100$ 个数列（如果不满 $100$ 个就全部输出）。\n", "inputFormat": "\n输入只有一行两个整数，分别表示数列长度 $n$ 与数列之和 $s$。", "outputFormat": "**本题存在 Special Judge**。\n\n在第一行输出一行一个整数 $t$，表示满足条件的数列总数对 $2^{64}$ 取模后的结果。\n\n接下来若干行，每行 $n$ 个整数，表示一个数列。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 100$，$-2^{63} \\leq s \\lt 2^{63}$。\n\n#### 说明\n\nspj provider：@[xiaolilsq](user/230249)。", "locale": "zh-CN"}}}
{"pid": "P1330", "type": "P", "difficulty": 3, "samples": [["3 3\n1 2\n1 3\n2 3\n", "Impossible\n"], ["3 2\n1 2\n2 3\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "福建省历届夏令营", "广度优先搜索 BFS", "深度优先搜索 DFS", "二分图"], "title": "封锁阳光大学", "background": null, "description": "曹是一只爱刷街的老曹，暑假期间，他每天都欢快地在阳光大学的校园里刷街。河蟹看到欢快的曹，感到不爽。河蟹决定封锁阳光大学，不让曹刷街。\n\n阳光大学的校园是一张由 $n$ 个点构成的无向图，$n$ 个点之间由 $m$ 条道路连接。每只河蟹可以对一个点进行封锁，当某个点被封锁后，与这个点相连的道路就被封锁了，曹就无法在这些道路上刷街了。非常悲剧的一点是，河蟹是一种不和谐的生物，当两只河蟹封锁了相邻的两个点时，他们会发生冲突。\n\n询问：最少需要多少只河蟹，可以封锁所有道路并且不发生冲突。", "inputFormat": "第一行两个正整数，表示节点数和边数。\n接下来 $m$ 行，每行两个整数 $u,v$，表示点 $u$ 到点 $v$ 之间有道路相连。", "outputFormat": "仅一行，如果河蟹无法封锁所有道路，则输出 `Impossible`，否则输出一个整数，表示最少需要多少只河蟹。", "hint": "【数据规模】   \n对于 $100\\%$ 的数据，$1\\le n \\le 10^4$，$1\\le m \\le 10^5$，保证没有重边。", "locale": "zh-CN", "translations": {"en": {"title": "Locking Down Sunshine University", "background": "", "description": "Cao is a veteran who loves cruising around. During the summer break, he happily cruises through the campus streets of Sunshine University every day. The He Xie (河蟹) feel annoyed seeing happy Cao and decide to lock down Sunshine University so that Cao cannot cruise around.\n\nThe campus of Sunshine University is an undirected graph with $n$ vertices connected by $m$ roads. Each He Xie can block one vertex. When a vertex is blocked, all roads incident to this vertex are blocked, and Cao cannot cruise on those roads. Unfortunately, the He Xie are disharmonious creatures: if two He Xie block two adjacent vertices, they will get into a conflict.\n\nQuestion: What is the minimum number of He Xie needed to block all roads without any conflicts?", "inputFormat": "The first line contains two positive integers, the number of vertices and the number of edges.  \nThen $m$ lines follow. Each line contains two integers $u, v$, indicating that there is a road between vertices $u$ and $v$.", "outputFormat": "Output a single line. If the He Xie cannot block all roads, output `Impossible`. Otherwise, output a single integer, the minimum number of He Xie required.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 10^4$, $1 \\le m \\le 10^5$, and there are no multiple edges.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "封锁阳光大学", "background": null, "description": "曹是一只爱刷街的老曹，暑假期间，他每天都欢快地在阳光大学的校园里刷街。河蟹看到欢快的曹，感到不爽。河蟹决定封锁阳光大学，不让曹刷街。\n\n阳光大学的校园是一张由 $n$ 个点构成的无向图，$n$ 个点之间由 $m$ 条道路连接。每只河蟹可以对一个点进行封锁，当某个点被封锁后，与这个点相连的道路就被封锁了，曹就无法在这些道路上刷街了。非常悲剧的一点是，河蟹是一种不和谐的生物，当两只河蟹封锁了相邻的两个点时，他们会发生冲突。\n\n询问：最少需要多少只河蟹，可以封锁所有道路并且不发生冲突。", "inputFormat": "第一行两个正整数，表示节点数和边数。\n接下来 $m$ 行，每行两个整数 $u,v$，表示点 $u$ 到点 $v$ 之间有道路相连。", "outputFormat": "仅一行，如果河蟹无法封锁所有道路，则输出 `Impossible`，否则输出一个整数，表示最少需要多少只河蟹。", "hint": "【数据规模】   \n对于 $100\\%$ 的数据，$1\\le n \\le 10^4$，$1\\le m \\le 10^5$，保证没有重边。", "locale": "zh-CN"}}}
{"pid": "P1331", "type": "P", "difficulty": 2, "samples": [["6 8\n.....#.#\n##.....#\n##.....#\n.......#\n#......#\n#..#...#", "There are 5 ships.\n"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "福建省历届夏令营", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "海战", "background": "在峰会期间，武装部队得处于高度戒备。警察将监视每一条大街，军队将保卫建筑物，领空将布满了 F-2003 飞机。\n\n此外，巡洋船只和舰队将被派去保护海岸线。不幸的是，因为种种原因，国防海军部仅有很少的几位军官能指挥大型海战。因此，他们培养了一些新海军指挥官。军官们选择了“海战”游戏来帮助他们学习。", "description": "在一个方形的盘上，放置了固定数量和形状的船只，每只船却不能碰到其它的船。在本题中，我们认为船是方形的，所有的船只都是由图形组成的方形。\n\n求出该棋盘上放置的船只的总数。", "inputFormat": "第一行为两个整数 $R$ 和 $C$，用空格隔开，分别表示游戏棋盘的行数和列数。\n\n接下来 $R$ 行，每行 $C$ 个字符，为 `#` 或 `.`。`#` 表示船只的一部分，`.` 表示水。", "outputFormat": "一行一个字符串，如果船的位置放得正确（即棋盘上只存在相互之间不能接触的方形，如果两个 `#` 号上下相邻或左右相邻却分属两艘不同的船只，则称这两艘船相互接触了）。就输出 `There are S ships.`，$S$ 表示船只的数量。否则输出 `Bad placement.`。\n", "hint": "对于 $100\\%$ 的数据，$1 \\le R,C \\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Naval Battle", "background": "During the summit, the armed forces are on high alert. Police will monitor every street, the army will guard buildings, and the airspace will be filled with F-2003 aircraft.\n\nIn addition, cruisers and fleets will be sent to protect the coastline. Unfortunately, for various reasons, only a few officers in the Navy can command large naval battles. Therefore, they have trained some new naval commanders. The officers chose the \"Sea Battle\" game to help them learn.", "description": "On a square board, a fixed number of ships with fixed shapes are placed, and no ship may touch any other ship. In this problem, each ship is a square: every ship must be a solid square composed of connected `#` cells with sides parallel to the grid axes.\n\nCompute the total number of ships placed on the board.", "inputFormat": "The first line contains two integers $R$ and $C$, separated by a space, denoting the number of rows and columns of the game board.\n\nEach of the next $R$ lines contains $C$ characters, each being `#` or `.`. `#` denotes a part of a ship, and `.` denotes water.", "outputFormat": "Output one line. If the placement is correct (that is, the board consists only of pairwise non-touching square ships; if two `#` cells are vertically or horizontally adjacent but belong to two different ships, then those two ships are considered touching), output `There are S ships.`, where $S$ is the number of ships. Otherwise, output `Bad placement.`.", "hint": "For $100\\%$ of the testdata, $1 \\le R, C \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "海战", "background": "在峰会期间，武装部队得处于高度戒备。警察将监视每一条大街，军队将保卫建筑物，领空将布满了 F-2003 飞机。\n\n此外，巡洋船只和舰队将被派去保护海岸线。不幸的是，因为种种原因，国防海军部仅有很少的几位军官能指挥大型海战。因此，他们培养了一些新海军指挥官。军官们选择了“海战”游戏来帮助他们学习。", "description": "在一个方形的盘上，放置了固定数量和形状的船只，每只船却不能碰到其它的船。在本题中，我们认为船是方形的，所有的船只都是由图形组成的方形。\n\n求出该棋盘上放置的船只的总数。", "inputFormat": "第一行为两个整数 $R$ 和 $C$，用空格隔开，分别表示游戏棋盘的行数和列数。\n\n接下来 $R$ 行，每行 $C$ 个字符，为 `#` 或 `.`。`#` 表示船只的一部分，`.` 表示水。", "outputFormat": "一行一个字符串，如果船的位置放得正确（即棋盘上只存在相互之间不能接触的方形，如果两个 `#` 号上下相邻或左右相邻却分属两艘不同的船只，则称这两艘船相互接触了）。就输出 `There are S ships.`，$S$ 表示船只的数量。否则输出 `Bad placement.`。\n", "hint": "对于 $100\\%$ 的数据，$1 \\le R,C \\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P1332", "type": "P", "difficulty": 3, "samples": [["5 4 2 3\n1 1\n5 4\n3 3\n5 3\n2 4\n", "3\n1\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "搜索", "福建省历届夏令营", "广度优先搜索 BFS", "剪枝"], "title": "血色先锋队", "background": "巫妖王的天灾军团终于卷土重来，血色十字军组织了一支先锋军前往诺森德大陆对抗天灾军团，以及一切沾有亡灵气息的生物。孤立于联盟和部落的血色先锋军很快就遭到了天灾军团的重重包围，现在他们将主力只好聚集了起来，以抵抗天灾军团的围剿。可怕的是，他们之中有人感染上了亡灵瘟疫，如果不设法阻止瘟疫的扩散，很快就会遭到灭顶之灾。大领主阿比迪斯已经开始调查瘟疫的源头。原来是血色先锋军的内部出现了叛徒，这个叛徒已经投靠了天灾军团，想要将整个血色先锋军全部转化为天灾军团！无需惊讶，你就是那个叛徒。在你的行踪败露之前，要尽快完成巫妖王交给你的任务。", "description": "军团是一个 $n$ 行 $m$ 列的矩阵，每个单元是一个血色先锋军的成员。感染瘟疫的人，每过一个小时，就会向四周扩散瘟疫，直到所有人全部感染上瘟疫。你已经掌握了感染源的位置，任务是算出血色先锋军的领主们感染瘟疫的时间，并且将它报告给巫妖王，以便对血色先锋军进行一轮有针对性的围剿。", "inputFormat": "第 $1$ 行：四个整数 $n$，$m$，$a$，$b$，表示军团矩阵有 $n$ 行 $m$ 列。有 $a$ 个感染源，$b$ 为血色敢死队中领主的数量。\n\n接下来 $a$ 行：每行有两个整数 $x$，$y$，表示感染源在第 $x$ 行第 $y$ 列。\n\n接下来 $b$ 行：每行有两个整数 $x$，$y$，表示领主的位置在第 $x$ 行第 $y$ 列。\n", "outputFormat": "第 $1$ 至 $b$ 行：每行一个整数，表示这个领主感染瘟疫的时间，输出顺序与输入顺序一致。如果某个人的位置在感染源，那么他感染瘟疫的时间为 $0$。", "hint": "#### 输入输出样例 1 解释\n\n如下图，标记出了所有人感染瘟疫的时间以及感染源和领主的位置。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3j3g02cn.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\le n,m\\le500$，$1\\le a,b\\le10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Scarlet Vanguard", "background": "The Lich King’s Scourge has returned in force. The Scarlet Crusade organized a vanguard to sail to Northrend to fight the Scourge and any creature tainted by undeath. Isolated from both the Alliance and the Horde, the Scarlet Vanguard was soon surrounded by the Scourge. They gathered their main forces to resist the encirclement. Terrifyingly, some of them have been infected by the undead plague. If the spread is not stopped, annihilation is imminent. Highlord Abbendis has begun investigating the source of the plague. It turns out there is a traitor within the Scarlet Vanguard who has defected to the Scourge, seeking to convert the entire Scarlet Vanguard into the Scourge! Do not be surprised—you are that traitor. Before your identity is exposed, you must quickly complete the task assigned to you by the Lich King.", "description": "The legion is an $n$ by $m$ matrix, and each cell represents a member of the Scarlet Vanguard. An infected person spreads the plague to the four adjacent cells (up, down, left, right) every hour, until everyone is infected. You already know the positions of the infection sources. Your task is to compute the time when each of the Scarlet Vanguard’s lords becomes infected, and report it to the Lich King to enable a targeted strike against the Scarlet Vanguard.", "inputFormat": "Line $1$: Four integers $n$, $m$, $a$, $b$, meaning the legion matrix has $n$ rows and $m$ columns. There are $a$ infection sources, and $b$ is the number of lords in the Scarlet Vanguard.\n\nThe next $a$ lines: Each line has two integers $x$, $y$, indicating an infection source at row $x$, column $y$.\n\nThe next $b$ lines: Each line has two integers $x$, $y$, indicating a lord at row $x$, column $y$.", "outputFormat": "Lines $1$ to $b$: Each line contains one integer, the time when that lord becomes infected. The output order matches the input order. If a person’s position is an infection source, then their infection time is $0$.", "hint": "#### Explanation for Sample 1\n\nAs shown below, the infection times for all people, and the positions of infection sources and lords, are marked.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3j3g02cn.png)\n\n#### Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\le n, m \\le 500$, $1 \\le a, b \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "血色先锋队", "background": "巫妖王的天灾军团终于卷土重来，血色十字军组织了一支先锋军前往诺森德大陆对抗天灾军团，以及一切沾有亡灵气息的生物。孤立于联盟和部落的血色先锋军很快就遭到了天灾军团的重重包围，现在他们将主力只好聚集了起来，以抵抗天灾军团的围剿。可怕的是，他们之中有人感染上了亡灵瘟疫，如果不设法阻止瘟疫的扩散，很快就会遭到灭顶之灾。大领主阿比迪斯已经开始调查瘟疫的源头。原来是血色先锋军的内部出现了叛徒，这个叛徒已经投靠了天灾军团，想要将整个血色先锋军全部转化为天灾军团！无需惊讶，你就是那个叛徒。在你的行踪败露之前，要尽快完成巫妖王交给你的任务。", "description": "军团是一个 $n$ 行 $m$ 列的矩阵，每个单元是一个血色先锋军的成员。感染瘟疫的人，每过一个小时，就会向四周扩散瘟疫，直到所有人全部感染上瘟疫。你已经掌握了感染源的位置，任务是算出血色先锋军的领主们感染瘟疫的时间，并且将它报告给巫妖王，以便对血色先锋军进行一轮有针对性的围剿。", "inputFormat": "第 $1$ 行：四个整数 $n$，$m$，$a$，$b$，表示军团矩阵有 $n$ 行 $m$ 列。有 $a$ 个感染源，$b$ 为血色敢死队中领主的数量。\n\n接下来 $a$ 行：每行有两个整数 $x$，$y$，表示感染源在第 $x$ 行第 $y$ 列。\n\n接下来 $b$ 行：每行有两个整数 $x$，$y$，表示领主的位置在第 $x$ 行第 $y$ 列。\n", "outputFormat": "第 $1$ 至 $b$ 行：每行一个整数，表示这个领主感染瘟疫的时间，输出顺序与输入顺序一致。如果某个人的位置在感染源，那么他感染瘟疫的时间为 $0$。", "hint": "#### 输入输出样例 1 解释\n\n如下图，标记出了所有人感染瘟疫的时间以及感染源和领主的位置。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3j3g02cn.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\le n,m\\le500$，$1\\le a,b\\le10^5$。", "locale": "zh-CN"}}}
{"pid": "P1333", "type": "P", "difficulty": 4, "samples": [["blue red\nred violet\ncyan blue\nblue magenta\nmagenta cyan\n", "Possible\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "福建省历届夏令营", "欧拉回路"], "title": "瑞瑞的木棍", "background": null, "description": "瑞瑞有一堆的玩具木棍，每根木棍的两端分别被染上了某种颜色，现在他突然有了一个想法，想要把这些木棍连在一起拼成一条线，并且使得木棍与木棍相接触的两端颜色都是相同的，给出每根木棍两端的颜色，请问是否存在满足要求的排列方式。\n\n例如，如果只有 $2$ 根木棍，第一根两端的颜色分别为 `red` 和 `blue`，第二根两端的颜色分别为 `red` 和 `yellow`，那么 `blue --- red | red --- yellow` 便是一种满足要求的排列方式。", "inputFormat": "输入有若干行，每行包括两个单词，表示一根木棍两端的颜色，单词由小写字母组成，且单词长度不会超过 $10$ 个字母，最多有 $250000$ 根木棍。", "outputFormat": "如果木棒能够按要求排列，输出 `Possible`，否则输出 `Impossible`。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Ruirui's Sticks", "background": "", "description": "Ruirui has a pile of toy sticks. Each stick has a color painted on each end. He suddenly has an idea: he wants to connect these sticks end to end to form a single line, such that the colors on the touching ends of adjacent sticks are the same. Given the colors on both ends of each stick, determine whether there exists an arrangement that meets this requirement.\n\nFor example, if there are only $2$ sticks, the first stick has colors `red` and `blue` on its ends, and the second stick has colors `red` and `yellow` on its ends, then `blue --- red | red --- yellow` is a valid arrangement.", "inputFormat": "The input consists of multiple lines. Each line contains two words representing the colors on the two ends of a stick. Each word consists of lowercase letters, and the length of each word does not exceed $10$ letters. There are at most $250000$ sticks.", "outputFormat": "If the sticks can be arranged as required, output `Possible`; otherwise, output `Impossible`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "瑞瑞的木棍", "background": null, "description": "瑞瑞有一堆的玩具木棍，每根木棍的两端分别被染上了某种颜色，现在他突然有了一个想法，想要把这些木棍连在一起拼成一条线，并且使得木棍与木棍相接触的两端颜色都是相同的，给出每根木棍两端的颜色，请问是否存在满足要求的排列方式。\n\n例如，如果只有 $2$ 根木棍，第一根两端的颜色分别为 `red` 和 `blue`，第二根两端的颜色分别为 `red` 和 `yellow`，那么 `blue --- red | red --- yellow` 便是一种满足要求的排列方式。", "inputFormat": "输入有若干行，每行包括两个单词，表示一根木棍两端的颜色，单词由小写字母组成，且单词长度不会超过 $10$ 个字母，最多有 $250000$ 根木棍。", "outputFormat": "如果木棒能够按要求排列，输出 `Possible`，否则输出 `Impossible`。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1334", "type": "P", "difficulty": 3, "samples": [["3\n8\n5\n8\n", "34\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["堆", "福建省历届夏令营", "排序"], "title": "瑞瑞的木板", "background": "瑞瑞想要亲自修复在他的一个小牧场周围的围栏。", "description": "他测量栅栏并发现他需要 $n$ 根木板，每根的长度为整数 $l_i$。于是，他买了一根足够长的木板，长度为所需的 $n$ 根木板的长度的总和，他决定将这根木板切成所需的 $n$ 根木板（瑞瑞在切割木板时不会产生木屑，不需考虑切割时损耗的长度)。\n\n瑞瑞切割木板时使用的是一种特殊的方式，这种方式在将一根长度为 $x$ 的木板切为两根时，需要消耗 $x$ 个单位的能量。瑞瑞拥有无尽的能量，但现在提倡节约能量，所以作为榜样，他决定尽可能节约能量。显然，总共需要切割 $(n-1)$ 次，问题是，每次应该怎么切呢？请编程计算最少需要消耗的能量总和。", "inputFormat": "输入的第一行是整数，表示所需木板的数量 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i + 1)$ 行的整数 $l_i$ 代表第  $i$ 根木板的长度 $l_i$。", "outputFormat": "一个整数，表示最少需要消耗的能量总和。", "hint": "#### 输入输出样例 1 解释\n\n将长度为 $21$ 的木板，第一次切割为长度为 $8$ 和长度为 $13$ 的，消耗 $21$ 个单位的能量，第二次将长度为 $13$ 的木板切割为长度为 $5$ 和 $8$ 的，消耗 $13$ 个单位的能量，共消耗 $34$ 个单位的能量，是消耗能量最小的方案。\n\n----\n\n#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，保证 $1\\le n \\le 2 \\times 10^4$，$1 \\leq l_i \\leq 5 \\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "{{Ruirui's Wooden Boards}}", "background": "{{Ruirui wants to repair the fence around his small pasture by himself.}}", "description": "{{He measured the fence and found that he needs $n$ wooden boards, each with an integer length $l_i$. So, he bought one board long enough, whose length equals the sum of the required $n$ boards, and decided to cut it into the $n$ boards he needs (Ruirui produces no sawdust when cutting, so ignore any loss of length).\n\nRuirui uses a special method: cutting a board of length $x$ into two pieces costs $x$ units of energy. He has endless energy, but in the spirit of saving energy, he wants to minimize the total energy used. Clearly, there must be $(n-1)$ cuts in total. The question is: how should he cut each time? Please compute the minimum possible total energy.}}", "inputFormat": "{{The first line contains an integer $n$, the number of boards needed.\n\nLines $2$ to $n+1$ each contain one integer. The integer on line $(i+1)$ is $l_i$, the length of the $i$-th board.}}", "outputFormat": "{{Output a single integer, the minimum total energy required.}}", "hint": "{{Explanation for Sample 1\n\nCut the board of length $21$ first into lengths $8$ and $13$, costing $21$ units of energy. Then cut the board of length $13$ into $5$ and $8$, costing $13$ units of energy. The total cost is $34$ units, which is minimal.\n\n----\n\nConstraints\n\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\le n \\le 2 \\times 10^4$, $1 \\le l_i \\le 5 \\times 10^4$.}}\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "瑞瑞的木板", "background": "瑞瑞想要亲自修复在他的一个小牧场周围的围栏。", "description": "他测量栅栏并发现他需要 $n$ 根木板，每根的长度为整数 $l_i$。于是，他买了一根足够长的木板，长度为所需的 $n$ 根木板的长度的总和，他决定将这根木板切成所需的 $n$ 根木板（瑞瑞在切割木板时不会产生木屑，不需考虑切割时损耗的长度)。\n\n瑞瑞切割木板时使用的是一种特殊的方式，这种方式在将一根长度为 $x$ 的木板切为两根时，需要消耗 $x$ 个单位的能量。瑞瑞拥有无尽的能量，但现在提倡节约能量，所以作为榜样，他决定尽可能节约能量。显然，总共需要切割 $(n-1)$ 次，问题是，每次应该怎么切呢？请编程计算最少需要消耗的能量总和。", "inputFormat": "输入的第一行是整数，表示所需木板的数量 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i + 1)$ 行的整数 $l_i$ 代表第  $i$ 根木板的长度 $l_i$。", "outputFormat": "一个整数，表示最少需要消耗的能量总和。", "hint": "#### 输入输出样例 1 解释\n\n将长度为 $21$ 的木板，第一次切割为长度为 $8$ 和长度为 $13$ 的，消耗 $21$ 个单位的能量，第二次将长度为 $13$ 的木板切割为长度为 $5$ 和 $8$ 的，消耗 $13$ 个单位的能量，共消耗 $34$ 个单位的能量，是消耗能量最小的方案。\n\n----\n\n#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，保证 $1\\le n \\le 2 \\times 10^4$，$1 \\leq l_i \\leq 5 \\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P1335", "type": "P", "difficulty": 7, "samples": [["11 2\nv 2 + c 19\ni v 2 c 3 7 3\ns 4 7\nv 1 + c 13\nv 2 - c 3\ni c 0 c 1 2 0\ni v 2 c 5 12 8\ns 9 12\nv 1 + c 23\nv 2 - c 5\ni c 0 c 1 7 0\n", "1\n1\n1\n2\n1\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "2013", "NOI", "提交答案", "Special Judge", "枚举"], "title": "[NOI2013] 小 Q 的修炼", "background": "", "description": "小 Q 最近发现了一款新游戏，游戏的目标是从一个新手修炼成为武功高强的大侠。面对错综复杂的游戏世界，小 Q 要对他面临的每件事情做出谨慎的选择。例如，是否参加一个陌生人邀请的比武；同意或是拒绝用宝剑交换他人的武功秘籍......而小 Q 做出的每一个选择都有可能影响到他以后的发展：面对一个高手，若主动与之比武，很可能会损失惨重；但若不去比武，也许今后就再也见不到这个高手了。\n\n对着这个游戏，小 Q 玩了很多次仍然玩不出他想要的结局，于是他费尽千辛万苦找到了游戏的剧本。令人惊讶的是,游戏的剧本并不像我们平时见到的剧本，反而很像代码。这个剧本是这样描述的：\n- 量：有 $2$ 种量，常数和变量。\n- 常数：一个整数。\n- 变量：初始值为 $0$ 的可变整数，不同变量用不同正整数编号区分。\n- 事件：整个剧本由若干个事件构成。所有的事件按照给定的顺序从 $1$ 开始依次编号。事件共有 $3$ 种：普通事件、选择跳转和条件跳转。\n- 执行位置：一个整数，表示接下来将会执行的事件编号，如果不存在这个编号的事件则停止，即游戏到了一个结局。最初的时候执行位置为 $1$。\n- 普通事件：一个变量增加或减少一个量的值。之后执行位置增加 $1$。\n- 选择跳转：两个整数。执行到这里时玩家需要在这两个整数中选择一个，之后执行位置将被修改为这个整数。\n- 条件跳转：两个量和两个整数。执行到这里时，若第一个量小于第二个量，则执行位置将被修改为第一个整数，否则将被修改为第二个整数。\n\n小 Q 认为，整个游戏是希望一个叫做「成就值」的变量（编号为 $1$）最大。", "inputFormat": "该题为提交答案型试题，所有输入数据 `train1.in`~`train10.in` 已在附加文件中。\n\n输入的第一行包含两个正整数 $n, m$，表示事件的个数和变量的个数。\n\n接下来有 $n$ 行，每行描述一个事件。这些事件按照给出的顺序依次编号为 $1$ 到 $n$。\n\n描述量和事件的格式如下（格式中 `#`表示空格）\n\n::cute-table{tuack}\n\n| 类型 | 格式 | 例子 |\n|:-:|:-:|:-:|\n| 常数 | `c#整数` | `c -2` |\n| 变量 | `v#正整数` | `v 5` |\n| 普通事件 | `变量#+#量` | `v 1 + c 1` |\n| 普通事件 | `变量#-#量` | `v 2 - c 2` |\n| 选择跳转 | `s#整数 1#整数 2` | `s 10 20` |\n| 条件跳转 | `i#量 1#量 2#整数 1#整数 2` | `i c 99 v 2 0 1` |\n", "outputFormat": "针对给定的 $10$ 个输入文件 `train1.in` ~ `train10.in`，你需要分别提交你的输出文件 `train1.out` ~ `train10.out`。\n\n每个文件需要输出若干行，每行输出一个字符 `1` 或 `2`，表示执行过程中遇到的每个选择跳转所作的选择。输出的行数需要严格等于此次游戏执行过程中遇到的选择跳转的个数。", "hint": "### 评分标准\n\n对于每组数据，我们采用如下方式评分：\n- 如果你的输出不合法,得 $0$ 分。\n- 如果你的输出执行了超过 $10^6$ 行剧本,得 $0$ 分。\n- 如果你的输出能让剧本正常结束，得 $1$ 分。\n- 如果你的输出能让剧本正常结束，且结束时成就值为正数，得 $2$ 分。\n\n我们设置了 $8$ 个评分参数 $a_3 , a_4 , \\ldots , a_{10}$。\n\n如果你的输出能让剧本正常结束，且结束时成就值不小于 $a_s$，得 $s$ 分。\n\n如果以上条目有多项满足，则取满足条件中的最高得分。\n\n### 如何测试你的输出\n\n我们提供 `checker` 这个工具来测试你的输出文件是否是可接受的。使用这个工具的方法是，首先进入终端，在终端中运行下面的命令进入本题的文件夹：\n\n`cd train`\n\n然后运行：\n\n`./checker <case_no>`\n\n其中 `case_no` 是测试数据的编号。例如\n\n`./checker 3`\n\n将测试 `train3.out` 是否可以接受。\n\n在你调用这个程序后，`checker` 将根据你给出的输出文件给出测试的结果，其中包括：\n- 非法退出：未知错误。\n- `Input/Output file does not exist.`：输入/输出文件不存在。\n- `Output invalid.`：输出文件有误,此时可能包含具体错误信息。\n- `Correct! Your answer is x.`：输出可接受,最后的成就值为 $x$。\n\n### 更多功能\n`checker` 还可以检查任意输入输出文件的测试结果，方法是在终端中运行：\n\n`cd train`\n\n`./checker <input_file_name> <output_file_name>`\n\n其中 `input_file_name` 和 `output_file_name` 分别是输入输出文件的名称。例如\n\n`./checker train3.in train3.out`\n\n将测试 `train3.out` 是否可以接受。\n\n使用 `-w` 可以输出每步运行的结果。用法是\n\n`./checker -w <input_file_name> <output_file_name>`\n\n或者\n\n`./checker -w <case_no>`\n\n例如\n\n`./checker -w train3.in train3.out`\n\n### 特别提示\n\n如果选手使用自己生成输入文件进行调试，有可能因规模过大造成 checker 出错。若发生这类情况，请尝试较小规模的数据。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2013] Xiao Q's Training", "background": "", "description": "Xiao Q recently found a new game whose goal is to train a novice into a master of martial arts. Facing a complex game world, Xiao Q must make careful choices for everything he encounters. For example, whether to accept a duel invitation from a stranger; whether to agree or refuse to exchange a treasured sword for someone else’s martial arts manual... Every choice Xiao Q makes may affect his future development: when facing an expert, actively dueling may cause heavy losses; but if he doesn’t duel, he might never meet that expert again.\n\nAfter playing many times without getting the ending he wants, Xiao Q finally managed to obtain the game’s script. Surprisingly, the script is not like the ones we usually see; it looks more like code. The script is described as follows:\n- Quantity: There are $2$ kinds of quantities, constants and variables.\n- Constant: An integer.\n- Variable: A mutable integer with initial value $0$. Different variables are distinguished by different positive integer IDs.\n- Event: The entire script consists of several events. All events are numbered in the given order starting from $1$. There are $3$ kinds of events: normal event, choice jump, and conditional jump.\n- Execution position: An integer indicating the event number to be executed next. If there is no event with this number, execution stops; that is, the game reaches an ending. Initially, the execution position is $1$.\n- Normal event: A variable increases or decreases by the value of a quantity. Afterwards, the execution position increases by $1$.\n- Choice jump: Two integers. When execution reaches this point, the player must choose one of the two integers, and the execution position will be set to that integer.\n- Conditional jump: Two quantities and two integers. When execution reaches this point, if the first quantity is less than the second quantity, the execution position will be set to the first integer; otherwise, it will be set to the second integer.\n\nXiao Q believes the game intends to maximize a variable called \"achievement value\" (ID $1$).", "inputFormat": "This is an answer-submission problem. All input data `train1.in` ~ `train10.in` are provided in the attached files.\n\nThe first line of input contains two positive integers $n, m$, denoting the number of events and the number of variables.\n\nThen there are $n$ lines, each describing an event. These events are numbered $1$ to $n$ in the given order.\n\nThe formats for quantities and events are as follows (in the format, `#` denotes a space):\n\n::cute-table{tuack}\n\n| Type | Format | Example |\n|:-:|:-:|:-:|\n| Constant | `c#整数` | `c -2` |\n| Variable | `v#正整数` | `v 5` |\n| Normal event | `变量#+#量` | `v 1 + c 1` |\n| Normal event | `变量#-#量` | `v 2 - c 2` |\n| Choice jump | `s#整数 1#整数 2` | `s 10 20` |\n| Conditional jump | `i#量 1#量 2#整数 1#整数 2` | `i c 99 v 2 0 1` |", "outputFormat": "For the given $10$ input files `train1.in` ~ `train10.in`, you need to submit your output files `train1.out` ~ `train10.out` respectively.\n\nEach file should output several lines, each line containing a single character `1` or `2`, indicating the choice made at each encountered choice jump during execution. The number of output lines must be exactly equal to the number of choice jumps encountered during this run.", "hint": "Scoring\n\nFor each set of data, we score as follows:\n- If your output is invalid, you get $0$ points.\n- If your output causes the script to execute more than $10^6$ lines, you get $0$ points.\n- If your output lets the script terminate normally, you get $1$ point.\n- If your output lets the script terminate normally and the final achievement value is positive, you get $2$ points.\n\nWe set $8$ scoring parameters $a_3 , a_4 , \\ldots , a_{10}$.\n\nIf your output lets the script terminate normally and the final achievement value is at least $a_s$, you get $s$ points.\n\nIf multiple items above are satisfied, the highest applicable score is taken.\n\nHow to test your output\n\nWe provide the tool `checker` to test whether your output file is acceptable. To use it, first open a terminal and run the following commands to enter this problem’s folder:\n\n`cd train`\n\nThen run:\n\n`./checker <case_no>`\n\nHere `case_no` is the testdata ID. For example,\n\n`./checker 3`\n\nwill test whether `train3.out` is acceptable.\n\nAfter you invoke this program, `checker` will report the test result for your output file, including:\n- Abnormal exit: Unknown error.\n- `Input/Output file does not exist.`: Input/output file does not exist.\n- `Output invalid.`: The output file is incorrect; specific error messages may be included.\n- `Correct! Your answer is x.`: The output is acceptable, and the final achievement value is $x$.\n\nMore features\n`checker` can also check arbitrary input/output files. In the terminal, run:\n\n`cd train`\n\n`./checker <input_file_name> <output_file_name>`\n\nwhere `input_file_name` and `output_file_name` are the names of the input and output files, respectively. For example,\n\n`./checker train3.in train3.out`\n\ntests whether `train3.out` is acceptable.\n\nUse `-w` to print the result of each execution step. Usage:\n\n`./checker -w <input_file_name> <output_file_name>`\n\nor\n\n`./checker -w <case_no>`\n\nFor example,\n\n`./checker -w train3.in train3.out`\n\nSpecial Note\n\nIf you use self-generated input files for debugging, the checker may fail due to excessive scale. If this happens, please try smaller-scale testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2013] 小 Q 的修炼", "background": "", "description": "小 Q 最近发现了一款新游戏，游戏的目标是从一个新手修炼成为武功高强的大侠。面对错综复杂的游戏世界，小 Q 要对他面临的每件事情做出谨慎的选择。例如，是否参加一个陌生人邀请的比武；同意或是拒绝用宝剑交换他人的武功秘籍......而小 Q 做出的每一个选择都有可能影响到他以后的发展：面对一个高手，若主动与之比武，很可能会损失惨重；但若不去比武，也许今后就再也见不到这个高手了。\n\n对着这个游戏，小 Q 玩了很多次仍然玩不出他想要的结局，于是他费尽千辛万苦找到了游戏的剧本。令人惊讶的是,游戏的剧本并不像我们平时见到的剧本，反而很像代码。这个剧本是这样描述的：\n- 量：有 $2$ 种量，常数和变量。\n- 常数：一个整数。\n- 变量：初始值为 $0$ 的可变整数，不同变量用不同正整数编号区分。\n- 事件：整个剧本由若干个事件构成。所有的事件按照给定的顺序从 $1$ 开始依次编号。事件共有 $3$ 种：普通事件、选择跳转和条件跳转。\n- 执行位置：一个整数，表示接下来将会执行的事件编号，如果不存在这个编号的事件则停止，即游戏到了一个结局。最初的时候执行位置为 $1$。\n- 普通事件：一个变量增加或减少一个量的值。之后执行位置增加 $1$。\n- 选择跳转：两个整数。执行到这里时玩家需要在这两个整数中选择一个，之后执行位置将被修改为这个整数。\n- 条件跳转：两个量和两个整数。执行到这里时，若第一个量小于第二个量，则执行位置将被修改为第一个整数，否则将被修改为第二个整数。\n\n小 Q 认为，整个游戏是希望一个叫做「成就值」的变量（编号为 $1$）最大。", "inputFormat": "该题为提交答案型试题，所有输入数据 `train1.in`~`train10.in` 已在附加文件中。\n\n输入的第一行包含两个正整数 $n, m$，表示事件的个数和变量的个数。\n\n接下来有 $n$ 行，每行描述一个事件。这些事件按照给出的顺序依次编号为 $1$ 到 $n$。\n\n描述量和事件的格式如下（格式中 `#`表示空格）\n\n::cute-table{tuack}\n\n| 类型 | 格式 | 例子 |\n|:-:|:-:|:-:|\n| 常数 | `c#整数` | `c -2` |\n| 变量 | `v#正整数` | `v 5` |\n| 普通事件 | `变量#+#量` | `v 1 + c 1` |\n| 普通事件 | `变量#-#量` | `v 2 - c 2` |\n| 选择跳转 | `s#整数 1#整数 2` | `s 10 20` |\n| 条件跳转 | `i#量 1#量 2#整数 1#整数 2` | `i c 99 v 2 0 1` |\n", "outputFormat": "针对给定的 $10$ 个输入文件 `train1.in` ~ `train10.in`，你需要分别提交你的输出文件 `train1.out` ~ `train10.out`。\n\n每个文件需要输出若干行，每行输出一个字符 `1` 或 `2`，表示执行过程中遇到的每个选择跳转所作的选择。输出的行数需要严格等于此次游戏执行过程中遇到的选择跳转的个数。", "hint": "### 评分标准\n\n对于每组数据，我们采用如下方式评分：\n- 如果你的输出不合法,得 $0$ 分。\n- 如果你的输出执行了超过 $10^6$ 行剧本,得 $0$ 分。\n- 如果你的输出能让剧本正常结束，得 $1$ 分。\n- 如果你的输出能让剧本正常结束，且结束时成就值为正数，得 $2$ 分。\n\n我们设置了 $8$ 个评分参数 $a_3 , a_4 , \\ldots , a_{10}$。\n\n如果你的输出能让剧本正常结束，且结束时成就值不小于 $a_s$，得 $s$ 分。\n\n如果以上条目有多项满足，则取满足条件中的最高得分。\n\n### 如何测试你的输出\n\n我们提供 `checker` 这个工具来测试你的输出文件是否是可接受的。使用这个工具的方法是，首先进入终端，在终端中运行下面的命令进入本题的文件夹：\n\n`cd train`\n\n然后运行：\n\n`./checker <case_no>`\n\n其中 `case_no` 是测试数据的编号。例如\n\n`./checker 3`\n\n将测试 `train3.out` 是否可以接受。\n\n在你调用这个程序后，`checker` 将根据你给出的输出文件给出测试的结果，其中包括：\n- 非法退出：未知错误。\n- `Input/Output file does not exist.`：输入/输出文件不存在。\n- `Output invalid.`：输出文件有误,此时可能包含具体错误信息。\n- `Correct! Your answer is x.`：输出可接受,最后的成就值为 $x$。\n\n### 更多功能\n`checker` 还可以检查任意输入输出文件的测试结果，方法是在终端中运行：\n\n`cd train`\n\n`./checker <input_file_name> <output_file_name>`\n\n其中 `input_file_name` 和 `output_file_name` 分别是输入输出文件的名称。例如\n\n`./checker train3.in train3.out`\n\n将测试 `train3.out` 是否可以接受。\n\n使用 `-w` 可以输出每步运行的结果。用法是\n\n`./checker -w <input_file_name> <output_file_name>`\n\n或者\n\n`./checker -w <case_no>`\n\n例如\n\n`./checker -w train3.in train3.out`\n\n### 特别提示\n\n如果选手使用自己生成输入文件进行调试，有可能因规模过大造成 checker 出错。若发生这类情况，请尝试较小规模的数据。", "locale": "zh-CN"}}}
{"pid": "P1336", "type": "P", "difficulty": 3, "samples": [["10 3\n2 1\n1 2\n2 1\n", "19\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "福建省历届夏令营"], "title": "最佳课题选择", "background": "", "description": "Matrix67 要在下个月交给老师 $n$ 篇论文，论文的内容可以从 $m$ 个课题中选择。由于课题数有限，Matrix67 不得不重复选择一些课题。完成不同课题的论文所花的时间不同。具体地说，对于某个课题 $i$，若 Matrix67 计划一共写 $x$ 篇论文，则完成该课题的论文总共需要花费 $A_i\\times x^{B_i}$ 个单位时间。给定与每一个课题相对应的 $A_i$ 和 $B_i$ 的值，请帮助 Matrix67 计算出如何选择论文的课题使得他可以花费最少的时间完成这 $n$ 篇论文。", "inputFormat": "第一行两个整数 $n$ 和 $m$，分别代表需要完成的论文数和可供选择的课题数。\n\n接下来 $m$ 行每行两个整数。其中，第 $i$ 行的两个数分别代表与第 $i$ 个课题相对应的时间系数 $A_i$ 和指数 $B_i$。", "outputFormat": "输出完成 $n$ 篇论文所需要耗费的最少时间。", "hint": "### 样例说明\n\n$4$ 篇论文选择课题一，$5$ 篇论文选择课题三，剩下一篇论文选择课题二，总耗时为 $2\\times4^1+1\\times1^2+2\\times5^1=8+1+10=19$ 。可以证明，不存在更优的方案使耗时小于 $19$。\n\n### 数据规模与约定\n\n对于 $30\\%$ 的数据，$n\\le10,m\\le5$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le200$，$1\\le m\\le20$，$1\\le A_i\\le100$，$1\\le B_i \\le 5$。", "locale": "zh-CN", "translations": {"en": {"title": "Best Topic Selection", "background": "", "description": "Matrix67 must submit $n$ papers to his teacher next month. The content of each paper can be chosen from $m$ topics. Since the number of topics is limited, Matrix67 has to reuse some topics. The time required to complete papers on different topics varies. Specifically, for topic $i$, if Matrix67 plans to write a total of $x$ papers, then the total time needed for that topic is $A_i \\times x^{B_i}$ time units. Given $A_i$ and $B_i$ for each topic, please help Matrix67 determine how to choose the topics for the $n$ papers so that the total time is minimized.", "inputFormat": "The first line contains two integers $n$ and $m$, representing the number of papers to complete and the number of available topics, respectively.  \nThe next $m$ lines each contain two integers. On the $i$-th line, the two numbers represent the time coefficient $A_i$ and the exponent $B_i$ corresponding to topic $i$.", "outputFormat": "Output the minimum total time required to complete $n$ papers.", "hint": "Sample Explanation:  \nChoose topic 1 for $4$ papers, topic 3 for $5$ papers, and topic 2 for the remaining $1$ paper. The total time is $2\\times4^1+1\\times1^2+2\\times5^1=8+1+10=19$. It can be proven that there is no better plan with total time less than $19$.\n\nConstraints:  \nFor $30\\%$ of the testdata, $n \\le 10$, $m \\le 5$.  \nFor $100\\%$ of the testdata, $1 \\le n \\le 200$, $1 \\le m \\le 20$, $1 \\le A_i \\le 100$, $1 \\le B_i \\le 5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最佳课题选择", "background": "", "description": "Matrix67 要在下个月交给老师 $n$ 篇论文，论文的内容可以从 $m$ 个课题中选择。由于课题数有限，Matrix67 不得不重复选择一些课题。完成不同课题的论文所花的时间不同。具体地说，对于某个课题 $i$，若 Matrix67 计划一共写 $x$ 篇论文，则完成该课题的论文总共需要花费 $A_i\\times x^{B_i}$ 个单位时间。给定与每一个课题相对应的 $A_i$ 和 $B_i$ 的值，请帮助 Matrix67 计算出如何选择论文的课题使得他可以花费最少的时间完成这 $n$ 篇论文。", "inputFormat": "第一行两个整数 $n$ 和 $m$，分别代表需要完成的论文数和可供选择的课题数。\n\n接下来 $m$ 行每行两个整数。其中，第 $i$ 行的两个数分别代表与第 $i$ 个课题相对应的时间系数 $A_i$ 和指数 $B_i$。", "outputFormat": "输出完成 $n$ 篇论文所需要耗费的最少时间。", "hint": "### 样例说明\n\n$4$ 篇论文选择课题一，$5$ 篇论文选择课题三，剩下一篇论文选择课题二，总耗时为 $2\\times4^1+1\\times1^2+2\\times5^1=8+1+10=19$ 。可以证明，不存在更优的方案使耗时小于 $19$。\n\n### 数据规模与约定\n\n对于 $30\\%$ 的数据，$n\\le10,m\\le5$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le200$，$1\\le m\\le20$，$1\\le A_i\\le100$，$1\\le B_i \\le 5$。", "locale": "zh-CN"}}}
{"pid": "P1337", "type": "P", "difficulty": 5, "samples": [["3\n0 0 1\n0 2 1\n1 1 1", "0.577 1.000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["计算几何", "2004", "二分", "各省省选", "三分", "江苏", "模拟退火", "凸包", "梯度下降法"], "title": "[JSOI2004] 平衡点 / 吊打XXX", "background": null, "description": "如图，有 $n$ 个重物，每个重物系在一条足够长的绳子上。\n\n每条绳子自上而下穿过桌面上的洞，然后系在一起。图中 $x$ 处就是公共的绳结。假设绳子是完全弹性的（即不会造成能量损失），桌子足够高（重物不会垂到地上），且忽略所有的摩擦，求绳结 $x$ 最终平衡于何处。\n\n**注意**：桌面上的洞都比绳结 $x$ 小得多，所以即使某个重物特别重，绳结 $x$ 也不可能穿过桌面上的洞掉下来，最多是卡在某个洞口处。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u20jvui9.png)", "inputFormat": "文件的第一行为一个正整数 $n$（$1\\le n\\le 1000$），表示重物和洞的数目。\n\n接下来的 $n$ 行，每行是 $3$ 个整数 $x_i, y_i, w_i$，分别表示第 $i$ 个洞的坐标以及第 $i$ 个重物的重量。（$-10000\\le x_i,y_i\\le10000, 0<w_i\\le1000$）", "outputFormat": "你的程序必须输出两个浮点数（保留小数点后三位），分别表示处于最终平衡状态时绳结 $x$ 的横坐标和纵坐标。两个数以一个空格隔开。", "hint": "数据保证平衡点是唯一的，也就是说形如 $n=2$ 且两个物品质量相等的情况不会出现。", "locale": "zh-CN", "translations": {"en": {"title": "[JSOI2004] Balance Point / Crushing XXX", "background": "", "description": "As shown in the figure, there are $n$ weights, each tied to a sufficiently long rope.\n\nEach rope passes from above through a hole on the tabletop and then they are tied together. The point $x$ in the figure is the common knot. Assume the ropes are perfectly elastic (i.e., cause no energy loss), the table is high enough (the weights will not reach the ground), and all friction is ignored. Find the final equilibrium position of the knot $x$.\n\nNote: The holes on the tabletop are much smaller than the knot $x$, so even if some weight is particularly heavy, the knot $x$ cannot pass through a hole and fall. At most, it will get stuck at the edge of some hole.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u20jvui9.png)", "inputFormat": "The first line of the file is a positive integer $n$ ($1 \\le n \\le 1000$), indicating the number of weights and holes.\n\nThe next $n$ lines each contain $3$ integers $x_i, y_i, w_i$, denoting the coordinates of the $i$-th hole and the weight of the $i$-th object, respectively ($-10000 \\le x_i, y_i \\le 10000, 0 < w_i \\le 1000$).", "outputFormat": "Your program must output two floating-point numbers (rounded to three decimal places), representing the $x$-coordinate and $y$-coordinate of the knot $x$ at the final equilibrium position. The two numbers are separated by a space.", "hint": "The testdata guarantees that the balance point is unique, i.e., cases like $n=2$ with two equal masses will not appear.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[JSOI2004] 平衡点 / 吊打XXX", "background": null, "description": "如图，有 $n$ 个重物，每个重物系在一条足够长的绳子上。\n\n每条绳子自上而下穿过桌面上的洞，然后系在一起。图中 $x$ 处就是公共的绳结。假设绳子是完全弹性的（即不会造成能量损失），桌子足够高（重物不会垂到地上），且忽略所有的摩擦，求绳结 $x$ 最终平衡于何处。\n\n**注意**：桌面上的洞都比绳结 $x$ 小得多，所以即使某个重物特别重，绳结 $x$ 也不可能穿过桌面上的洞掉下来，最多是卡在某个洞口处。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u20jvui9.png)", "inputFormat": "文件的第一行为一个正整数 $n$（$1\\le n\\le 1000$），表示重物和洞的数目。\n\n接下来的 $n$ 行，每行是 $3$ 个整数 $x_i, y_i, w_i$，分别表示第 $i$ 个洞的坐标以及第 $i$ 个重物的重量。（$-10000\\le x_i,y_i\\le10000, 0<w_i\\le1000$）", "outputFormat": "你的程序必须输出两个浮点数（保留小数点后三位），分别表示处于最终平衡状态时绳结 $x$ 的横坐标和纵坐标。两个数以一个空格隔开。", "hint": "数据保证平衡点是唯一的，也就是说形如 $n=2$ 且两个物品质量相等的情况不会出现。", "locale": "zh-CN"}}}
{"pid": "P1338", "type": "P", "difficulty": 3, "samples": [["5 4\n", "1 3 5 4 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "贪心", "矩阵运算"], "title": "末日的传说", "background": null, "description": "只要是参加 jsoi 活动的同学一定都听说过 Hanoi 塔的传说：三根柱子上的金片每天被移动一次，当所有的金片都被移完之后，世界末日也就随之降临了。\n\n在古老东方的幻想乡，人们都采用一种奇特的方式记录日期：他们用一些特殊的符号来表示从 $1$ 开始的连续整数，$1$ 表示最小而 $n$ 表示最大。创世纪的第一天，日历就被赋予了生命，它自动地开始计数，就像排列不断地增加。\n\n我们用 $1-n$ 来表示日历的元素，第一天日历就是：\n$$1,2,\\ldots,n-2,n-1,n$$\n第二天，日历自动变为：\n$$1,2,\\ldots,n-2,n,n-1$$\n······\n\n每次它都生成一个以前未出现过的“最小”的排列——把它转为 $n+1$ 进制后数的数值最小。\n\n日子一天一天地过着。有一天，一位预言者出现了——他预言道，当这个日历到达某个上帝安排的时刻，这个世界就会崩溃······他还预言到，假如某一个日期的逆序达到一个值 $m$ 的时候，世界末日就要降临。\n\n什么是逆序？日历中的两个不同符号，假如排在前面的那个比排在后面的那个更大，就是一个逆序，一个日期的逆序总数达到 $m$ 后，末日就要降临，人们都期待一个贤者，能够预见那一天到底将在什么时候到来？", "inputFormat": "只包含一行两个正整数，分别为 $n$ 和 $m$。", "outputFormat": "输出一行，为世界末日的日期，每个数字之间用一个空格隔开。", "hint": "对于 $10\\%$ 的数据有 $n\\le10$；\n\n对于 $40\\%$ 的数据有 $n\\le1000$；\n\n对于 $100\\%$ 的数据有 $n\\le5\\times10^4$。\n\n所有数据均有解。", "locale": "zh-CN", "translations": {"en": {"title": "Legend of Doomsday", "background": "", "description": "Anyone who has participated in JSOI events must have heard the legend of the Tower of Hanoi: the disks on three pegs are moved once per day, and when all disks have been moved, the end of the world will come.\n\nIn a fantasy land of the ancient East, people record dates in a peculiar way: they use special symbols to denote consecutive integers starting from 1, where 1 is the smallest and n is the largest. On the first day of creation, the calendar was given life; it started counting automatically, as permutations keep increasing.\n\nWe denote the calendar’s elements by 1..n. On day one, the calendar is:\n$$1,2,\\ldots,n-2,n-1,n$$\nOn the second day, it becomes:\n$$1,2,\\ldots,n-2,n,n-1$$\n... Each time, it produces a “smallest” permutation not seen before—after converting it to base $n+1$, its numeric value is minimal.\n\nDays pass one by one. One day, a prophet appeared—he foretold that when this calendar reaches a moment arranged by God, the world would collapse... He also prophesied that if the inversion count of some date reaches a value $m$, doomsday will come.\n\nWhat is an inversion? For two different symbols in the calendar, if the one that appears earlier is greater than the one that appears later, that forms an inversion. When the total number of inversions of a date reaches $m$, doomsday comes. People are waiting for a sage who can foresee exactly when that day will arrive. Your task is to determine that date.", "inputFormat": "A single line containing two positive integers $n$ and $m$.", "outputFormat": "Output one line: the date of doomsday, with numbers separated by a single space.", "hint": "For 10% of the testdata, $n \\le 10$.\n\nFor 40% of the testdata, $n \\le 1000$.\n\nFor 100% of the testdata, $n \\le 5 \\times 10^4$.\n\nAll testdata have a solution.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "末日的传说", "background": null, "description": "只要是参加 jsoi 活动的同学一定都听说过 Hanoi 塔的传说：三根柱子上的金片每天被移动一次，当所有的金片都被移完之后，世界末日也就随之降临了。\n\n在古老东方的幻想乡，人们都采用一种奇特的方式记录日期：他们用一些特殊的符号来表示从 $1$ 开始的连续整数，$1$ 表示最小而 $n$ 表示最大。创世纪的第一天，日历就被赋予了生命，它自动地开始计数，就像排列不断地增加。\n\n我们用 $1-n$ 来表示日历的元素，第一天日历就是：\n$$1,2,\\ldots,n-2,n-1,n$$\n第二天，日历自动变为：\n$$1,2,\\ldots,n-2,n,n-1$$\n······\n\n每次它都生成一个以前未出现过的“最小”的排列——把它转为 $n+1$ 进制后数的数值最小。\n\n日子一天一天地过着。有一天，一位预言者出现了——他预言道，当这个日历到达某个上帝安排的时刻，这个世界就会崩溃······他还预言到，假如某一个日期的逆序达到一个值 $m$ 的时候，世界末日就要降临。\n\n什么是逆序？日历中的两个不同符号，假如排在前面的那个比排在后面的那个更大，就是一个逆序，一个日期的逆序总数达到 $m$ 后，末日就要降临，人们都期待一个贤者，能够预见那一天到底将在什么时候到来？", "inputFormat": "只包含一行两个正整数，分别为 $n$ 和 $m$。", "outputFormat": "输出一行，为世界末日的日期，每个数字之间用一个空格隔开。", "hint": "对于 $10\\%$ 的数据有 $n\\le10$；\n\n对于 $40\\%$ 的数据有 $n\\le1000$；\n\n对于 $100\\%$ 的数据有 $n\\le5\\times10^4$。\n\n所有数据均有解。", "locale": "zh-CN"}}}
{"pid": "P1339", "type": "P", "difficulty": 3, "samples": [["7 11 5 4\n2 4 2\n1 4 3\n7 2 2\n3 4 3\n5 7 5\n7 3 3\n6 1 1\n6 3 4\n2 4 3\n5 6 3\n7 2 1", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2009", "USACO", "福建省历届夏令营", "最短路"], "title": "[USACO09OCT] Heat Wave G", "background": "", "description": "有一个 $n$ 个点 $m$ 条边的无向图，请求出从 $s$ 到 $t$ 的最短路长度。", "inputFormat": "第一行四个正整数 $n,m,s,t$。\n接下来 $m$ 行，每行三个正整数 $u,v,w$，表示一条连接 $u,v$，长为 $w$ 的边。\n", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 2500$，$1\\le m \\le 6200$，$1\\le w \\le 1000$。\n\n【样例说明】   \n$5 \\to 6 \\to 1 \\to 4$ 为最短路，长度为 $3+1+3 = 7$。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO09OCT] Heat Wave G", "background": "", "description": "Given an undirected graph with $n$ vertices and $m$ edges, find the length of the shortest path from $s$ to $t$.", "inputFormat": "The first line contains four positive integers $n, m, s, t$.  \nThe next $m$ lines each contain three positive integers $u, v, w$, indicating an edge connecting $u$ and $v$ with length $w$.", "outputFormat": "Output one line containing a single integer, the answer.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 2500$, $1 \\le m \\le 6200$, $1 \\le w \\le 1000$.\n\nSample Explanation  \n$5 \\to 6 \\to 1 \\to 4$ is the shortest path, with length $3+1+3 = 7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO09OCT] Heat Wave G", "background": "", "description": "有一个 $n$ 个点 $m$ 条边的无向图，请求出从 $s$ 到 $t$ 的最短路长度。", "inputFormat": "第一行四个正整数 $n,m,s,t$。\n接下来 $m$ 行，每行三个正整数 $u,v,w$，表示一条连接 $u,v$，长为 $w$ 的边。\n", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 2500$，$1\\le m \\le 6200$，$1\\le w \\le 1000$。\n\n【样例说明】   \n$5 \\to 6 \\to 1 \\to 4$ 为最短路，长度为 $3+1+3 = 7$。\n\n", "locale": "zh-CN"}}}
{"pid": "P1340", "type": "P", "difficulty": 4, "samples": [["4 6\t \t \n1 2 10\t \t \n1 3 8\t \t \n3 2 3\t \t \n1 4 3\t \t \n1 3 6\t \t \n2 1 2\t \t \n", "-1\n-1\n-1\n14\n12\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "福建省历届夏令营", "排序", "生成树"], "title": "兽径管理", "background": "", "description": "约翰农场的牛群希望能够在 $N$ 个草地之间任意移动。草地的编号由 $1$ 到 $N$。草地之间有树林隔开。牛群希望能够选择草地间的路径，使牛群能够从任一 片草地移动到任一片其它草地。 牛群可在路径上双向通行。\n\n牛群并不能创造路径，但是他们会保有及利用已经发现的野兽所走出来的路径（以下简称兽径）。每星期他们会选择并管理一些或全部已知的兽径当作通路。\n\n牛群每星期初会发现一条新的兽径。他们接着必须决定管理哪些兽径来组成该周牛群移动的通路，使得牛群得以从任一草地移动到任一草地。牛群只能使用当周有被管理的兽径做为通路。\n\n牛群希望他们管理的兽径长度和为最小。牛群可以从所有他们知道的所有兽径中挑选出一些来管理。牛群可以挑选的兽径与它之前是否曾被管理无关。\n\n兽径决不会是直线，因此连接两片草地之间的不同兽径长度可以不同。 此外虽然两条兽径或许会相交，但牛群非常的专注，除非交点是在草地内，否则不会在交点换到另外一条兽径上。\n\n在每周开始的时候，牛群会描述他们新发现的兽径。如果可能的话，请找出可从任何一草地通达另一草地的一组需管理的兽径，使其兽径长度和最小。\n", "inputFormat": "输入的第一行包含两个用空白分开的整数 $N$ 和 $W$。$W$ 代表你的程序需要处理的周数。\n\n以下每处理一周，读入一行数据，代表该周新发现的兽径，由三个以空白分开的整数分别代表该兽径的两个端点（两片草地的编号) 与该兽径的长度。一条兽径的两个端点一定不同。\n", "outputFormat": "每次读入新发现的兽径后，你的程序必须立刻输出一组兽径的长度和，此组兽径可从任何一草地通达另一草地，并使兽径长度和最小。如果不能找到一组可从任一草地通达另一草地的兽径，则输出 $-1$。\n", "hint": "### 样例解释\n\n对于每一周，\n\n- 第一周时 $4$ 号草地不能与其他草地连通，输出 $-1$；\n- 第二周时 $4$ 号草地不能与其他草地连通，输出 $-1$；\n- 第三周时 $4$ 号草地不能与其他草地连通，输出 $-1$；\n- 第四周时可以选择兽径 $(1,4,3),(1,3,8)$ 和 $(3,2,3)$；\n- 第五周时可以选择兽径 $(1,4,3),(1,3,6)$ 和 $(3,2,3)$；\n- 第六周时可以选择兽径 $(1,4,3),(2,1,2)$ 和 $(3,2,3)$。\n\n\n### 数据范围及约定\n\n对于全部数据，$1\\le N\\le 200$，$1 \\le W \\le 6000$，兽径的长度不超过 $10^4$ 且为正整数。", "locale": "zh-CN", "translations": {"en": {"title": "Beast Trail Management", "background": "", "description": "The herd on Farmer John's farm wants to be able to move freely among $N$ pastures labeled $1$ to $N$, which are separated by forests. They wish to choose routes between pastures so that the herd can travel from any pasture to any other pasture. The herd can travel in both directions along a route.\n\nThe herd cannot create new routes, but they will keep and use trails made by wild animals (hereafter called \"game trails\"). Each week, they choose and manage some or all of the known game trails as usable routes.\n\nAt the start of each week, the herd discovers one new game trail. They must then decide which game trails to manage for that week to form their network of routes, so that the herd can travel from any pasture to any other pasture. The herd may only use the trails that are managed during that week.\n\nThey want the sum of lengths of the managed trails to be as small as possible. They may choose any subset of all game trails they have discovered so far. Whether a trail was managed in a previous week does not matter.\n\nGame trails are never straight lines, so different trails connecting the same pair of pastures may have different lengths. Although two game trails may intersect, the herd is very focused and will not switch trails at intersections unless the intersection lies inside a pasture.\n\nAt the beginning of each week, the herd will describe the newly discovered game trail. If possible, find a set of managed game trails that makes all pastures mutually reachable, with the minimum possible total length.", "inputFormat": "The first line contains two integers $N$ and $W$ separated by a space. $W$ is the number of weeks your program needs to process.\n\nFor each subsequent week, read one line describing the newly discovered game trail. The line contains three integers separated by spaces: the two endpoints of the trail (the pasture labels) and the trail’s length. The two endpoints of a game trail are always distinct.", "outputFormat": "After reading each newly discovered game trail, immediately output the minimum possible total length of a set of trails that makes all pastures mutually reachable. If no such set exists, output $-1$. Output one result per week on its own line.", "hint": "### Sample Explanation\n\nFor each week:\n\n- In week 1, pasture $4$ cannot connect to the others, so output $-1$.\n- In week 2, pasture $4$ cannot connect to the others, so output $-1$.\n- In week 3, pasture $4$ cannot connect to the others, so output $-1$.\n- In week 4, you can choose trails $(1, 4, 3)$, $(1, 3, 8)$, and $(3, 2, 3)$.\n- In week 5, you can choose trails $(1, 4, 3)$, $(1, 3, 6)$, and $(3, 2, 3)$.\n- In week 6, you can choose trails $(1, 4, 3)$, $(2, 1, 2)$, and $(3, 2, 3)$.\n\n### Constraints\n\nFor all testdata, $1 \\le N \\le 200$, $1 \\le W \\le 6000$, and each trail length is a positive integer not exceeding $10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "兽径管理", "background": "", "description": "约翰农场的牛群希望能够在 $N$ 个草地之间任意移动。草地的编号由 $1$ 到 $N$。草地之间有树林隔开。牛群希望能够选择草地间的路径，使牛群能够从任一 片草地移动到任一片其它草地。 牛群可在路径上双向通行。\n\n牛群并不能创造路径，但是他们会保有及利用已经发现的野兽所走出来的路径（以下简称兽径）。每星期他们会选择并管理一些或全部已知的兽径当作通路。\n\n牛群每星期初会发现一条新的兽径。他们接着必须决定管理哪些兽径来组成该周牛群移动的通路，使得牛群得以从任一草地移动到任一草地。牛群只能使用当周有被管理的兽径做为通路。\n\n牛群希望他们管理的兽径长度和为最小。牛群可以从所有他们知道的所有兽径中挑选出一些来管理。牛群可以挑选的兽径与它之前是否曾被管理无关。\n\n兽径决不会是直线，因此连接两片草地之间的不同兽径长度可以不同。 此外虽然两条兽径或许会相交，但牛群非常的专注，除非交点是在草地内，否则不会在交点换到另外一条兽径上。\n\n在每周开始的时候，牛群会描述他们新发现的兽径。如果可能的话，请找出可从任何一草地通达另一草地的一组需管理的兽径，使其兽径长度和最小。\n", "inputFormat": "输入的第一行包含两个用空白分开的整数 $N$ 和 $W$。$W$ 代表你的程序需要处理的周数。\n\n以下每处理一周，读入一行数据，代表该周新发现的兽径，由三个以空白分开的整数分别代表该兽径的两个端点（两片草地的编号) 与该兽径的长度。一条兽径的两个端点一定不同。\n", "outputFormat": "每次读入新发现的兽径后，你的程序必须立刻输出一组兽径的长度和，此组兽径可从任何一草地通达另一草地，并使兽径长度和最小。如果不能找到一组可从任一草地通达另一草地的兽径，则输出 $-1$。\n", "hint": "### 样例解释\n\n对于每一周，\n\n- 第一周时 $4$ 号草地不能与其他草地连通，输出 $-1$；\n- 第二周时 $4$ 号草地不能与其他草地连通，输出 $-1$；\n- 第三周时 $4$ 号草地不能与其他草地连通，输出 $-1$；\n- 第四周时可以选择兽径 $(1,4,3),(1,3,8)$ 和 $(3,2,3)$；\n- 第五周时可以选择兽径 $(1,4,3),(1,3,6)$ 和 $(3,2,3)$；\n- 第六周时可以选择兽径 $(1,4,3),(2,1,2)$ 和 $(3,2,3)$。\n\n\n### 数据范围及约定\n\n对于全部数据，$1\\le N\\le 200$，$1 \\le W \\le 6000$，兽径的长度不超过 $10^4$ 且为正整数。", "locale": "zh-CN"}}}
{"pid": "P1341", "type": "P", "difficulty": 4, "samples": [["4\naZ\ntZ\nXt\naX", "XaZtX"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "福建省历届夏令营", "深度优先搜索 DFS", "欧拉回路"], "title": "无序字母对", "background": "", "description": "给定 $n$ 个各不相同的无序字母对（区分大小写，无序即字母对中的两个字母可以位置颠倒）。请构造一个有 $(n+1)$ 个字母的字符串使得每个字母对都在这个字符串中出现。", "inputFormat": "第一行输入一个正整数 $n$。\n\n第二行到第 $(n+1)$ 行每行两个字母，表示这两个字母需要相邻。", "outputFormat": "输出满足要求的字符串。\n\n如果没有满足要求的字符串，请输出 `No Solution`。\n\n如果有多种方案，请输出字典序最小的方案（即满足前面的字母的 ASCII 编码尽可能小）。", "hint": "不同的无序字母对个数有限，$n$ 的规模可以通过计算得到。", "locale": "zh-CN", "translations": {"en": {"title": "Unordered Letter Pairs", "background": "", "description": "Given $n$ distinct unordered letter pairs (case-sensitive; unordered means the two letters in a pair can appear in either order), construct a string with $(n+1)$ letters such that each letter pair appears in this string.", "inputFormat": "The first line contains a positive integer $n$.\n\nEach of the next $n$ lines contains two letters, indicating that these two letters must be adjacent.", "outputFormat": "Output a string that satisfies the requirement.\n\nIf no such string exists, output `No Solution`.\n\nIf multiple solutions exist, output the lexicographically smallest one (i.e., the earlier letters should have smaller ASCII codes).", "hint": "The number of different unordered letter pairs is finite, and the scale of $n$ can be calculated.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "无序字母对", "background": "", "description": "给定 $n$ 个各不相同的无序字母对（区分大小写，无序即字母对中的两个字母可以位置颠倒）。请构造一个有 $(n+1)$ 个字母的字符串使得每个字母对都在这个字符串中出现。", "inputFormat": "第一行输入一个正整数 $n$。\n\n第二行到第 $(n+1)$ 行每行两个字母，表示这两个字母需要相邻。", "outputFormat": "输出满足要求的字符串。\n\n如果没有满足要求的字符串，请输出 `No Solution`。\n\n如果有多种方案，请输出字典序最小的方案（即满足前面的字母的 ASCII 编码尽可能小）。", "hint": "不同的无序字母对个数有限，$n$ 的规模可以通过计算得到。", "locale": "zh-CN"}}}
{"pid": "P1342", "type": "P", "difficulty": 3, "samples": [["4 6\n1 2 10\n2 1 60\n1 3 20\n3 4 10\n2 4 5\n4 1 50", "210 "]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000]}, "tags": ["图论", "1998", "福建省历届夏令营", "最短路", "ICPC", "CERC"], "title": "[CERC1998] 请柬", "background": "在电视时代，没有多少人观看戏剧表演。Malidinesia 古董喜剧演员意识到这一事实，他们想宣传剧院，尤其是古色古香的喜剧片。", "description": "他们已经打印了请帖和所有必要的信息和计划。许多学生被雇来分发这些请柬。每个学生志愿者被指定一个确切的公共汽车站，他或她将留在那里一整天，邀请人们参与。\n\n这里的公交系统是非常特殊的：共有 $n$ 个站点和 $m$ 个线路，所有的线路都是单向的，连接两个站点。公共汽车离开起始点，到达目的地之后又空车返回起始点。\n\n学生每天早上从总部所在的 $1$ 号站点出发，乘公交车到一个预定的站点邀请乘客。每个站点都被安排了一名学生。在一天结束的时候，所有的学生都回到总部。现在需要知道的是，学生所需的公交费用的总和最小是多少。", "inputFormat": "输入的第一行是两个整数，代表站点个数 $n$ 和线路条数 $m$。\n\n第 $2$ 到第 $(m + 1)$ 行，每行三个整数 $u, v, w$，代表存在一条从 $u$ 出发到达 $v$ 的线路，费用为 $w$。", "outputFormat": "输出一行一个整数，表示最小费用。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证：\n\n- $1 \\leq n, m \\leq 10^6$。\n- $1 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^9$。\n- 从 $1$ 出发可以到达所有的站点。", "locale": "zh-CN", "translations": {"en": {"title": "[CERC1998] Invitation Cards", "background": "In the television era, few people watch stage plays. The antique comedians of Malidinesia noticed this and want to promote the theater, especially the quaint comedies.", "description": "They have printed invitation cards and all the necessary information and plans. Many students are hired to distribute these invitations. Each student volunteer is assigned exactly one bus stop where he or she will stay for the whole day, inviting people to participate.\n\nThe bus system here is very special: there are $n$ stops and $m$ routes; all routes are one-way, connecting two stops. A bus departs from its origin and, after reaching its destination, returns empty to its origin.\n\nEach morning, the students depart from the headquarters at stop $1$, take buses to their assigned stop, and invite passengers there. Exactly one student is scheduled at each stop. At the end of the day, all students return to the headquarters. Now you need to find the minimal possible sum of bus fares required for the students.", "inputFormat": "The first line contains two integers $n$ and $m$.\n\nLines $2$ through $m + 1$ each contain three integers $u, v, w$, indicating that there is a one-way route from $u$ to $v$ with fare $w$.", "outputFormat": "Output a single line with one integer, the minimal total fare.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that:\n- $1 \\leq n, m \\leq 10^6$.\n- $1 \\leq u, v \\leq n$, $1 \\leq w \\leq 10^9$.\n- Every stop is reachable from $1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CERC1998] 请柬", "background": "在电视时代，没有多少人观看戏剧表演。Malidinesia 古董喜剧演员意识到这一事实，他们想宣传剧院，尤其是古色古香的喜剧片。", "description": "他们已经打印了请帖和所有必要的信息和计划。许多学生被雇来分发这些请柬。每个学生志愿者被指定一个确切的公共汽车站，他或她将留在那里一整天，邀请人们参与。\n\n这里的公交系统是非常特殊的：共有 $n$ 个站点和 $m$ 个线路，所有的线路都是单向的，连接两个站点。公共汽车离开起始点，到达目的地之后又空车返回起始点。\n\n学生每天早上从总部所在的 $1$ 号站点出发，乘公交车到一个预定的站点邀请乘客。每个站点都被安排了一名学生。在一天结束的时候，所有的学生都回到总部。现在需要知道的是，学生所需的公交费用的总和最小是多少。", "inputFormat": "输入的第一行是两个整数，代表站点个数 $n$ 和线路条数 $m$。\n\n第 $2$ 到第 $(m + 1)$ 行，每行三个整数 $u, v, w$，代表存在一条从 $u$ 出发到达 $v$ 的线路，费用为 $w$。", "outputFormat": "输出一行一个整数，表示最小费用。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证：\n\n- $1 \\leq n, m \\leq 10^6$。\n- $1 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^9$。\n- 从 $1$ 出发可以到达所有的站点。", "locale": "zh-CN"}}}
{"pid": "P1343", "type": "P", "difficulty": 5, "samples": [["6 7 7\n1 2 1\n1 4 2\n2 3 1\n4 5 1\n4 3 1\n3 6 2\n5 6 1\n", "3 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "福建省历届夏令营", "网络流"], "title": "地震逃生", "background": null, "description": "汶川地震发生时，四川\\*\\*中学正在上课，一看地震发生，老师们立刻带领 $x$ 名学生逃跑，整个学校可以抽象地看成一个有向图，图中有 $n$ 个点，$m$ 条边。$1$ 号点为教室，$n$ 号点为安全地带，每条边都只能容纳一定量的学生，超过楼就要倒塌，由于人数太多，校长决定让同学们分成几批逃生，只有第一批学生全部逃生完毕后，第二批学生才能从 $1$ 号点出发逃生，现在请你帮校长算算，每批最多能运出多少个学生，$x$ 名学生分几批才能运完。", "inputFormat": "第一行三个整数 $n,m,x$；  \n以下 $m$ 行，每行三个整数 $a,b,c$（$1\\leq a,b\\leq n$，$0\\leq c\\leq x$）描述一条边，分别代表从 $a$ 点到 $b$ 点有一条边，且可容纳 $c$ 名学生。", "outputFormat": "如果无法到达目的地（$n$ 号点），输出 `Orz Ni Jinan Saint Cow!`。否则输出两个整数，分别表示每批最多能运出多少个学生，$x$ 名学生分几批才能运完。", "hint": "**【注释】**\n\n比如有图\n\n```plain\n1 2 100\n2 3 1\n```\n\n$100$ 个学生先冲到 $2$ 号点，然后一个一个慢慢沿 $2 \\to 3$ 边走过去。\n\n18 神牛规定这样是不可以的……\n\n也就是说，每批学生必须同时从起点出发，并且同时到达终点。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$0 \\le x < 2^{31}$，$2 \\le n \\le 200$，$1 \\le m \\le 2000$。", "locale": "zh-CN", "translations": {"en": {"title": "Earthquake Escape", "background": "", "description": "When the Wenchuan earthquake struck, Sichuan ** High School was in class. As soon as the earthquake occurred, the teachers immediately led $x$ students to evacuate. The whole school can be abstracted as a directed graph with $n$ nodes and $m$ edges. Node $1$ is the classroom, and node $n$ is the safe zone. Each edge can only accommodate a certain number of students; if exceeded, the building would collapse. Due to the large number of people, the principal decided to evacuate in several batches. Only after the first batch has completely evacuated may the second batch start from node $1$. Please help the principal calculate the maximum number of students that can be transported in each batch, and how many batches are needed to transport all $x$ students.", "inputFormat": "The first line contains three integers $n, m, x$.  \nThe next $m$ lines each contain three integers $a, b, c$ ($1 \\le a, b \\le n$, $0 \\le c \\le x$), describing an edge: there is an edge from node $a$ to node $b$ that can accommodate $c$ students.", "outputFormat": "If it is impossible to reach the destination (node $n$), output `Orz Ni Jinan Saint Cow!`. Otherwise, output two integers: the maximum number of students that can be transported in each batch, and the number of batches needed to transport all $x$ students.", "hint": "[Note]\n\nFor example, consider the graph\n\n```plain\n1 2 100\n2 3 1\n```\n\n$100$ students first rush to node $2$, and then go along edge $2 \\to 3$ one by one.\n\nAccording to the 2018 \"Shen Niu\" rules, this is not allowed.\n\nIn other words, each batch of students must depart from the source simultaneously and arrive at the sink simultaneously.\n\n[Constraints]\n\nFor $100\\%$ of the testdata, $0 \\le x < 2^{31}$, $2 \\le n \\le 200$, $1 \\le m \\le 2000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "地震逃生", "background": null, "description": "汶川地震发生时，四川\\*\\*中学正在上课，一看地震发生，老师们立刻带领 $x$ 名学生逃跑，整个学校可以抽象地看成一个有向图，图中有 $n$ 个点，$m$ 条边。$1$ 号点为教室，$n$ 号点为安全地带，每条边都只能容纳一定量的学生，超过楼就要倒塌，由于人数太多，校长决定让同学们分成几批逃生，只有第一批学生全部逃生完毕后，第二批学生才能从 $1$ 号点出发逃生，现在请你帮校长算算，每批最多能运出多少个学生，$x$ 名学生分几批才能运完。", "inputFormat": "第一行三个整数 $n,m,x$；  \n以下 $m$ 行，每行三个整数 $a,b,c$（$1\\leq a,b\\leq n$，$0\\leq c\\leq x$）描述一条边，分别代表从 $a$ 点到 $b$ 点有一条边，且可容纳 $c$ 名学生。", "outputFormat": "如果无法到达目的地（$n$ 号点），输出 `Orz Ni Jinan Saint Cow!`。否则输出两个整数，分别表示每批最多能运出多少个学生，$x$ 名学生分几批才能运完。", "hint": "**【注释】**\n\n比如有图\n\n```plain\n1 2 100\n2 3 1\n```\n\n$100$ 个学生先冲到 $2$ 号点，然后一个一个慢慢沿 $2 \\to 3$ 边走过去。\n\n18 神牛规定这样是不可以的……\n\n也就是说，每批学生必须同时从起点出发，并且同时到达终点。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$0 \\le x < 2^{31}$，$2 \\le n \\le 200$，$1 \\le m \\le 2000$。", "locale": "zh-CN"}}}
{"pid": "P1344", "type": "P", "difficulty": 6, "samples": [["4 5\r\n1 3 100\r\n3 2 50\r\n2 4 60\r\n1 2 40\r\n2 3 80\r\n", "60 1\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "USACO", "最小割"], "title": "[USACO4.4] 追查坏牛奶 Pollutant Control", "background": "", "description": "你第一天接手三鹿牛奶公司就发生了一件倒霉的事情：公司不小心发送了一批有三聚氰胺的牛奶。\n\n很不幸，你发现这件事的时候，有三聚氰胺的牛奶已经进入了送货网。这个送货网很大，而且关系复杂。你知道这批牛奶要发给哪个零售商，但是要把这批牛奶送到他手中有许多种途径。\n\n送货网由一些仓库和运输卡车组成，每辆卡车都在各自固定的两个仓库之间单向运输牛奶。在追查这些有三聚氰胺的牛奶的时候，有必要保证它不被送到零售商手里，所以必须使某些运输卡车停止运输，但是停止每辆卡车都会有一定的经济损失。\n\n你的任务是，在保证坏牛奶不送到零售商的前提下，制定出停止卡车运输的方案，使损失最小。\n", "inputFormat": "第 $1$ 行两个整数 $N$、$M$，$N$ 表示仓库的数目，$M$ 表示运输卡车的数量。仓库 $1$ 代表发货工厂，仓库 $N$ 代表有三聚氰胺的牛奶要发往的零售商。\n\n第 $2\\sim M+1$ 行，每行 $3$ 个整数 $S_i$、$E_i$ 和 $C_i$。其中 $S_i$、$E_i$ 分别表示这辆卡车的出发仓库和目的仓库。$C_i$ 表示让这辆卡车停止运输的损失。\n", "outputFormat": "两个整数 $C$ 和 $T$，$C$ 表示最小的损失，$T$ 表示在损失最小的前提下，最少要停止的卡车数。", "hint": "对于 $100 \\%$ 的数据，满足 $2 \\le N \\le 32$，$0 \\le M \\le 10^3$，$1 \\le S_i \\le N$，$1 \\le E_i \\le N$，$0 \\le C_i \\le 2 \\times 10^6$。\n\n题目翻译来自 NOCOW。\n\nUSACO Training Section 4.4", "locale": "zh-CN", "translations": {"en": {"title": "[USACO4.4] Pollutant Control", "background": null, "description": "On your first day at Sanlu Milk Company, something unlucky happens: the company accidentally shipped a batch of milk containing melamine.\n\nUnfortunately, by the time you discovered this, the melamine-tainted milk had already entered the delivery network. The network is large and complex. You know which retailer this batch is destined for, but there are many different routes to deliver it.\n\nThe delivery network consists of warehouses and transport trucks. Each truck carries milk in one direction between a fixed pair of warehouses. To trace and block the tainted milk, you must ensure it is not delivered to the retailer, so some transport trucks must be stopped. However, stopping each truck incurs a certain monetary loss.\n\nYour task is to decide which trucks to stop so that the tainted milk cannot reach the retailer, while minimizing the total loss.", "inputFormat": "The first line contains two integers $N$ and $M$. $N$ is the number of warehouses, and $M$ is the number of transport trucks. Warehouse $1$ is the factory (source), and warehouse $N$ is the retailer that the melamine-tainted milk is destined for.\n\nLines $2\\sim M+1$ each contain three integers $S_i$, $E_i$, and $C_i$. Here, $S_i$ and $E_i$ are the starting and ending warehouse of this truck, respectively. $C_i$ is the loss incurred by stopping this truck.", "outputFormat": "Output two integers $C$ and $T$. $C$ is the minimum total loss, and, among all solutions with minimum loss, $T$ is the minimum number of trucks that must be stopped.", "hint": "Constraints: For $100 \\%$ of the testdata, $2 \\le N \\le 32$, $0 \\le M \\le 10^3$, $1 \\le S_i \\le N$, $1 \\le E_i \\le N$, $0 \\le C_i \\le 2 \\times 10^6$.\n\nTranslation of the problem statement is from NOCOW.\n\nUSACO Training Section 4.4.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO4.4] 追查坏牛奶 Pollutant Control", "background": "", "description": "你第一天接手三鹿牛奶公司就发生了一件倒霉的事情：公司不小心发送了一批有三聚氰胺的牛奶。\n\n很不幸，你发现这件事的时候，有三聚氰胺的牛奶已经进入了送货网。这个送货网很大，而且关系复杂。你知道这批牛奶要发给哪个零售商，但是要把这批牛奶送到他手中有许多种途径。\n\n送货网由一些仓库和运输卡车组成，每辆卡车都在各自固定的两个仓库之间单向运输牛奶。在追查这些有三聚氰胺的牛奶的时候，有必要保证它不被送到零售商手里，所以必须使某些运输卡车停止运输，但是停止每辆卡车都会有一定的经济损失。\n\n你的任务是，在保证坏牛奶不送到零售商的前提下，制定出停止卡车运输的方案，使损失最小。\n", "inputFormat": "第 $1$ 行两个整数 $N$、$M$，$N$ 表示仓库的数目，$M$ 表示运输卡车的数量。仓库 $1$ 代表发货工厂，仓库 $N$ 代表有三聚氰胺的牛奶要发往的零售商。\n\n第 $2\\sim M+1$ 行，每行 $3$ 个整数 $S_i$、$E_i$ 和 $C_i$。其中 $S_i$、$E_i$ 分别表示这辆卡车的出发仓库和目的仓库。$C_i$ 表示让这辆卡车停止运输的损失。\n", "outputFormat": "两个整数 $C$ 和 $T$，$C$ 表示最小的损失，$T$ 表示在损失最小的前提下，最少要停止的卡车数。", "hint": "对于 $100 \\%$ 的数据，满足 $2 \\le N \\le 32$，$0 \\le M \\le 10^3$，$1 \\le S_i \\le N$，$1 \\le E_i \\le N$，$0 \\le C_i \\le 2 \\times 10^6$。\n\n题目翻译来自 NOCOW。\n\nUSACO Training Section 4.4", "locale": "zh-CN"}}}
{"pid": "P1345", "type": "P", "difficulty": 5, "samples": [["3 2 1 2\n1 3\n2 3", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "USACO", "福建省历届夏令营", "网络流", "最小割"], "title": "[USACO5.4] 奶牛的电信 Telecowmunication", "background": "", "description": "农夫约翰的奶牛们喜欢通过电邮保持联系，于是她们建立了一个奶牛电脑网络，以便互相交流。这些机器用如下的方式发送电邮：如果存在一个由 $c$ 台电脑组成的序列 $a_1,a_2,\\cdots ,a_c$，且 $a_1$ 与 $a_2$ 相连，$a_2$ 与 $a_3$ 相连，等等。那么电脑 $a_1$ 和 $a_c$ 就可以互发电邮。\n\n很不幸，有时候奶牛会不小心踩到电脑上，农夫约翰的车也可能碾过电脑，这台倒霉的电脑就会坏掉。这意味着这台电脑不能再发送电邮了，于是与这台电脑相关的连接也就不可用了。\n\n有两头奶牛就想：如果我们两个不能互发电邮，至少需要坏掉多少台电脑呢？请注意，$c_1,c_2$ 不能被破坏。请编写一个程序为她们计算这个最小值。\n\n以如下网络为例：\n\n```plain\n   1*\n  /\n 3 - 2*\n```\n\n这张图画的是有 $2$ 条连接的 $3$ 台电脑。我们想要在电脑 $1$ 和 $2$ 之间传送信息。电脑 $1$ 与 $3$，$2$ 与 $3$ 直接连通。如果电脑 $3$ 坏了，电脑 $1$ 与 $2$ 便不能互发信息了。", "inputFormat": "第一行：四个由空格分隔的整数：$N,M,c_1,c_2$。$N$ 是电脑总数，电脑由 $1$ 到 $N$ 编号。$M$ 是电脑之间连接的总数。后面的两个整数 $c_1$ 和 $c_2$ 是上述两头奶牛使用的电脑编号。连接没有重复且均为双向的（即如果 $c_1$ 与 $c_2$ 相连，那么 $c_2$ 与 $c_1$ 也相连）。两台电脑之间至多有一条连接。电脑 $c_1$ 和 $c_2$ 不会直接相连。\n\n第 $2$ 到 $M+1$ 行：接下来的 $M$ 行中，每行包含两台直接相连的电脑的编号。", "outputFormat": "一行，一个整数，表示使电脑 $c_1$ 和 $c_2$ 不能互相通信需要坏掉的电脑数目的最小值。", "hint": "对于 $100\\%$ 的数据：$1\\le N \\le 100$，$1\\le M \\le 600$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO5.4] Telecowmunication", "background": "", "description": "Farmer John's cows like to keep in touch by email, so they set up a cow computer network to communicate. The machines send email as follows: if there exists a sequence of $c$ computers $a_1,a_2,\\cdots ,a_c$ such that $a_1$ is connected to $a_2$, $a_2$ is connected to $a_3$, and so on, then computers $a_1$ and $a_c$ can exchange email.\n\nUnfortunately, sometimes a cow may accidentally step on a computer, and Farmer John's truck might run over a computer, and that unlucky computer will break. This means that computer can no longer send email, and all connections incident to it become unusable.\n\nTwo cows wonder: if the two of us are to be unable to email each other, what is the minimum number of computers that must fail? Note that $c_1$ and $c_2$ cannot be destroyed. Please write a program to compute this minimum.\n\nConsider the following network:\n\n```plain\n   1*\n  /\n 3 - 2*\n```\n\nThis figure shows $3$ computers with $2$ connections. We want to send messages between computers $1$ and $2$. Computer $1$ is directly connected to $3$, and $2$ is directly connected to $3$. If computer $3$ fails, then $1$ and $2$ can no longer communicate.", "inputFormat": "The first line contains four space-separated integers: $N, M, c_1, c_2$. $N$ is the total number of computers, numbered from $1$ to $N$. $M$ is the total number of connections. The last two integers $c_1$ and $c_2$ are the computers used by the two cows mentioned above. Connections have no duplicates and are undirected (i.e., if $c_1$ is connected to $c_2$, then $c_2$ is connected to $c_1$ as well). There is at most one connection between any pair of computers. Computers $c_1$ and $c_2$ are not directly connected.\n\nLines $2$ to $M+1$: each of the next $M$ lines contains the indices of two directly connected computers.", "outputFormat": "One line containing a single integer: the minimum number of computers that must fail to make computers $c_1$ and $c_2$ unable to communicate with each other.", "hint": "For $100\\%$ of the testdata: $1 \\le N \\le 100$, $1 \\le M \\le 600$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO5.4] 奶牛的电信 Telecowmunication", "background": "", "description": "农夫约翰的奶牛们喜欢通过电邮保持联系，于是她们建立了一个奶牛电脑网络，以便互相交流。这些机器用如下的方式发送电邮：如果存在一个由 $c$ 台电脑组成的序列 $a_1,a_2,\\cdots ,a_c$，且 $a_1$ 与 $a_2$ 相连，$a_2$ 与 $a_3$ 相连，等等。那么电脑 $a_1$ 和 $a_c$ 就可以互发电邮。\n\n很不幸，有时候奶牛会不小心踩到电脑上，农夫约翰的车也可能碾过电脑，这台倒霉的电脑就会坏掉。这意味着这台电脑不能再发送电邮了，于是与这台电脑相关的连接也就不可用了。\n\n有两头奶牛就想：如果我们两个不能互发电邮，至少需要坏掉多少台电脑呢？请注意，$c_1,c_2$ 不能被破坏。请编写一个程序为她们计算这个最小值。\n\n以如下网络为例：\n\n```plain\n   1*\n  /\n 3 - 2*\n```\n\n这张图画的是有 $2$ 条连接的 $3$ 台电脑。我们想要在电脑 $1$ 和 $2$ 之间传送信息。电脑 $1$ 与 $3$，$2$ 与 $3$ 直接连通。如果电脑 $3$ 坏了，电脑 $1$ 与 $2$ 便不能互发信息了。", "inputFormat": "第一行：四个由空格分隔的整数：$N,M,c_1,c_2$。$N$ 是电脑总数，电脑由 $1$ 到 $N$ 编号。$M$ 是电脑之间连接的总数。后面的两个整数 $c_1$ 和 $c_2$ 是上述两头奶牛使用的电脑编号。连接没有重复且均为双向的（即如果 $c_1$ 与 $c_2$ 相连，那么 $c_2$ 与 $c_1$ 也相连）。两台电脑之间至多有一条连接。电脑 $c_1$ 和 $c_2$ 不会直接相连。\n\n第 $2$ 到 $M+1$ 行：接下来的 $M$ 行中，每行包含两台直接相连的电脑的编号。", "outputFormat": "一行，一个整数，表示使电脑 $c_1$ 和 $c_2$ 不能互相通信需要坏掉的电脑数目的最小值。", "hint": "对于 $100\\%$ 的数据：$1\\le N \\le 100$，$1\\le M \\le 600$。", "locale": "zh-CN"}}}
{"pid": "P1346", "type": "P", "difficulty": 3, "samples": [["3 2 1\n2 2 3\n2 3 1\n2 1 2", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "福建省历届夏令营"], "title": "电车", "background": "", "description": "在一个神奇的小镇上有着一个特别的电车网络，它由一些路口和轨道组成，每个路口都连接着若干个轨道，每个轨道都通向一个路口（不排除有的观光轨道转一圈后返回路口的可能）。在每个路口，都有一个开关决定着出去的轨道，每个开关都有一个默认的状态，每辆电车行驶到路口之后，只能从开关所指向的轨道出去，如果电车司机想走另一个轨道，他就必须下车切换开关的状态。\n\n为了行驶向目标地点，电车司机不得不经常下车来切换开关，于是，他们想请你写一个程序，计算一辆从路口 $A$ 到路口 $B$ 最少需要下车切换几次开关。\n", "inputFormat": "第一行有 $3$ 个整数 $N,A,B$（$2 \\leq N \\leq 100, 1 \\leq A,B \\leq N$），分别表示路口的数量，和电车的起点，终点。\n\n接下来有 $N$ 行，每行的开头有一个数字 $K_i$（$0 \\leq K_i \\leq N-1$），表示这个路口与 $K_i$ 条轨道相连，接下来有 $K_i$ 个数字表示每条轨道所通向的路口，开关默认指向第一个数字表示的轨道。", "outputFormat": "输出文件只有一个数字，表示从 $A$ 到 $B$ 所需的最少的切换开关次数，若无法从 $A$ 前往 $B$，输出 $-1$。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Tram", "background": "", "description": "In a magical small town, there is a special tram network composed of intersections and tracks. Each intersection connects to several tracks, and each track leads to an intersection (some scenic tracks may loop back to the same intersection). At every intersection, there is a switch that determines the outgoing track. Each switch has a default position. When a tram arrives at an intersection, it can only leave along the track currently selected by the switch. If the driver wants to take a different track, they must get off and toggle the switch.\n\nTo reach the destination, drivers often have to get off to toggle switches. Please write a program to compute the minimum number of switch toggles needed for a tram to travel from intersection $A$ to intersection $B$.", "inputFormat": "The first line contains 3 integers $N, A, B$ ( $2 \\leq N \\leq 100, 1 \\leq A, B \\leq N$ ), representing the number of intersections, and the start and destination intersections.\n\nThen $N$ lines follow. Each line starts with a number $K_i$ ( $0 \\leq K_i \\leq N - 1$ ), indicating that this intersection is connected to $K_i$ tracks, followed by $K_i$ integers, each giving the intersection that the corresponding track leads to. The switch’s default position points to the track indicated by the first of these integers.", "outputFormat": "Output a single integer: the minimum number of switch toggles required to go from $A$ to $B$. If it is impossible to reach $B$ from $A$, output $-1$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "电车", "background": "", "description": "在一个神奇的小镇上有着一个特别的电车网络，它由一些路口和轨道组成，每个路口都连接着若干个轨道，每个轨道都通向一个路口（不排除有的观光轨道转一圈后返回路口的可能）。在每个路口，都有一个开关决定着出去的轨道，每个开关都有一个默认的状态，每辆电车行驶到路口之后，只能从开关所指向的轨道出去，如果电车司机想走另一个轨道，他就必须下车切换开关的状态。\n\n为了行驶向目标地点，电车司机不得不经常下车来切换开关，于是，他们想请你写一个程序，计算一辆从路口 $A$ 到路口 $B$ 最少需要下车切换几次开关。\n", "inputFormat": "第一行有 $3$ 个整数 $N,A,B$（$2 \\leq N \\leq 100, 1 \\leq A,B \\leq N$），分别表示路口的数量，和电车的起点，终点。\n\n接下来有 $N$ 行，每行的开头有一个数字 $K_i$（$0 \\leq K_i \\leq N-1$），表示这个路口与 $K_i$ 条轨道相连，接下来有 $K_i$ 个数字表示每条轨道所通向的路口，开关默认指向第一个数字表示的轨道。", "outputFormat": "输出文件只有一个数字，表示从 $A$ 到 $B$ 所需的最少的切换开关次数，若无法从 $A$ 前往 $B$，输出 $-1$。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1347", "type": "P", "difficulty": 4, "samples": [["4 6\nA<B\nA<C\nB<C\nC<D\nB<D\nA<B\n", "Sorted sequence determined after 4 relations: ABCD."], ["3 2\nA<B\nB<A", "Inconsistency found after 2 relations."], ["26 1\nA<Z", "Sorted sequence cannot be determined."]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "并查集", "福建省历届夏令营", "排序", "拓扑排序"], "title": "排序", "background": null, "description": "一个不同的值的升序排序数列指的是一个从左到右元素依次增大的序列，例如，一个有序的数列 $A,B,C,D$ 表示 $A<B,B<C,C<D$。在这道题中，我们将给你一系列形如 $A<B$ 的关系，并要求你判断是否能够根据这些关系确定这个数列的顺序。", "inputFormat": "第一行有两个正整数 $n,m$，$n$ 表示需要排序的元素数量，$2\\leq n\\leq 26$，第 $1$ 到 $n$ 个元素将用大写的 $A,B,C,D,\\dots$ 表示。$m$ 表示将给出的形如 $A<B$ 的关系的数量。\n\n接下来有 $m$ 行，每行有 $3$ 个字符，分别为一个大写字母，一个 `<` 符号，一个大写字母，表示两个元素之间的关系。", "outputFormat": "若根据前 $x$ 个关系即可确定这 $n$ 个元素的顺序 `yyy..y`（如 `ABC`），输出\n\n`Sorted sequence determined after x relations: yyy...y.`\n\n其中 $x$ 表示上述的前 $x$ 个关系。\n\n若根据前 $x$ 个关系即发现存在矛盾（如 $A<B,B<C,C<A$），输出\n\n`Inconsistency found after x relations.`\n\n其中 $x$ 表示的意义同上。\n\n若根据这 $m$ 个关系无法确定这 $n$ 个元素的顺序，输出\n\n`Sorted sequence cannot be determined.`\n\n（提示：确定 $n$ 个元素的顺序后即可结束程序，可以不用考虑确定顺序之后出现矛盾的情况）", "hint": "$2 \\leq n \\leq 26,1 \\leq m \\leq 600$。", "locale": "zh-CN", "translations": {"en": {"title": "Sorting", "background": "", "description": "An ascending sorted sequence of distinct values is a sequence whose elements strictly increase from left to right. For example, an ordered sequence $A, B, C, D$ means $A < B$, $B < C$, $C < D$. In this problem, you are given a series of relations of the form $A < B$, and you are asked to determine whether these relations are sufficient to determine the order of the sequence.", "inputFormat": "The first line contains two positive integers $n$ and $m$. Here, $n$ is the number of elements to sort, $2 \\leq n \\leq 26$. The $1$-st to the $n$-th elements are represented by uppercase letters $A, B, C, D, \\dots$. The integer $m$ is the number of relations of the form $A < B$.\n\nThe next $m$ lines each contain exactly $3$ characters: an uppercase letter, the character `<`, and another uppercase letter, representing a relation between two elements.", "outputFormat": "If the first $x$ relations are sufficient to determine the order of the $n$ elements `yyy...y` (e.g., `ABC`), output\n\n`Sorted sequence determined after x relations: yyy...y.`\n\nHere, $x$ means the number of relations considered (the first $x$ relations).\n\nIf a contradiction is detected within the first $x$ relations (e.g., $A < B$, $B < C$, $C < A$), output\n\n`Inconsistency found after x relations.`\n\nHere, $x$ has the same meaning as above.\n\nIf the order of the $n$ elements cannot be determined after all $m$ relations, output\n\n`Sorted sequence cannot be determined.`\n\n(Hint: Once the order of the $n$ elements is determined, you can terminate the program immediately. You do not need to consider contradictions that may appear after that.)\n\n# Input Format\n\n\n\n# Output Format", "hint": "$2 \\leq n \\leq 26, 1 \\leq m \\leq 600$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "排序", "background": null, "description": "一个不同的值的升序排序数列指的是一个从左到右元素依次增大的序列，例如，一个有序的数列 $A,B,C,D$ 表示 $A<B,B<C,C<D$。在这道题中，我们将给你一系列形如 $A<B$ 的关系，并要求你判断是否能够根据这些关系确定这个数列的顺序。", "inputFormat": "第一行有两个正整数 $n,m$，$n$ 表示需要排序的元素数量，$2\\leq n\\leq 26$，第 $1$ 到 $n$ 个元素将用大写的 $A,B,C,D,\\dots$ 表示。$m$ 表示将给出的形如 $A<B$ 的关系的数量。\n\n接下来有 $m$ 行，每行有 $3$ 个字符，分别为一个大写字母，一个 `<` 符号，一个大写字母，表示两个元素之间的关系。", "outputFormat": "若根据前 $x$ 个关系即可确定这 $n$ 个元素的顺序 `yyy..y`（如 `ABC`），输出\n\n`Sorted sequence determined after x relations: yyy...y.`\n\n其中 $x$ 表示上述的前 $x$ 个关系。\n\n若根据前 $x$ 个关系即发现存在矛盾（如 $A<B,B<C,C<A$），输出\n\n`Inconsistency found after x relations.`\n\n其中 $x$ 表示的意义同上。\n\n若根据这 $m$ 个关系无法确定这 $n$ 个元素的顺序，输出\n\n`Sorted sequence cannot be determined.`\n\n（提示：确定 $n$ 个元素的顺序后即可结束程序，可以不用考虑确定顺序之后出现矛盾的情况）", "hint": "$2 \\leq n \\leq 26,1 \\leq m \\leq 600$。", "locale": "zh-CN"}}}
{"pid": "P1348", "type": "P", "difficulty": 2, "samples": [["1 10\n", "7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "福建省历届夏令营", "枚举", "位运算"], "title": "Couple number", "background": "", "description": "对于一个整数 $n$，若存在两个自然数 $x, y$，满足 $n = x^2 - y^2$，则称 $n$ 是 Couple number。\n\n给出 $a,b$，请求出 $[a, b]$ 范围内有多少个 Couple number。", "inputFormat": "输入只有一行两个整数，分别表示 $a, b$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $-10^7 \\le a < b \\le 10^7$ ，$b - a \\le 10^7$。", "locale": "zh-CN", "translations": {"en": {"title": "Couple number", "background": "", "description": "For an integer $n$, if there exist two non-negative integers $x, y$ such that $n = x^2 - y^2$, then $n$ is called a Couple number.\n\nGiven $a, b$, find how many Couple numbers are in the range $[a, b]$.", "inputFormat": "The input contains one line with two integers $a, b$.", "outputFormat": "Output one line with a single integer representing the answer.", "hint": "#### Constraints\n\nFor all test points, it is guaranteed that $-10^7 \\le a < b \\le 10^7$, $b - a \\le 10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Couple number", "background": "", "description": "对于一个整数 $n$，若存在两个自然数 $x, y$，满足 $n = x^2 - y^2$，则称 $n$ 是 Couple number。\n\n给出 $a,b$，请求出 $[a, b]$ 范围内有多少个 Couple number。", "inputFormat": "输入只有一行两个整数，分别表示 $a, b$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $-10^7 \\le a < b \\le 10^7$ ，$b - a \\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P1349", "type": "P", "difficulty": 4, "samples": [["1 1 1 1 10 7\n", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "福建省历届夏令营", "矩阵加速"], "title": "广义斐波那契数列", "background": null, "description": "广义的斐波那契数列是指形如 $a_n=p\\times a_{n-1}+q\\times a_{n-2}$ 的数列。\n\n今给定数列的两系数 $p$ 和 $q$，以及数列的最前两项 $a_1$ 和 $ a_2$，另给出两个整数 $n$ 和 $m$，试求数列的第 $n$ 项 $a_n$ 对 $m$ 取模后的结果。", "inputFormat": "输入包含一行六个整数，$p,q,a_1,a_2,n,m$。", "outputFormat": "输出包含一行一个整数表示答案。", "hint": "数列第 $10 $ 项是 $55$，$55 \\bmod 7 = 6$。\n\n**【数据范围】**  \n对于 $100\\%$ 的数据，$p,q,a_1,a_2 \\in [0,2^{31}-1]$，$1\\le n,m \\le 2^{31}-1$。\n\n---\n\n$\\text{upd 2023.8.23}$：新增加一组 Hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "Generalized Fibonacci Sequence", "background": "", "description": "A generalized Fibonacci sequence is a sequence of the form $a_n=p\\times a_{n-1}+q\\times a_{n-2}$.\n\nGiven the two coefficients $p$ and $q$, the first two terms $a_1$ and $a_2$, and two integers $n$ and $m$, compute the $n$-th term $a_n$ modulo $m$.", "inputFormat": "The input contains one line with six integers: $p,q,a_1,a_2,n,m$.", "outputFormat": "Output a single integer on one line: the answer.", "hint": "The $10 $-th term is $55$, and $55 \\bmod 7 = 6$.\n\n**Constraints**  \nFor $100\\%$ of the testdata, $p,q,a_1,a_2 \\in [0,2^{31}-1]$, $1\\le n,m \\le 2^{31}-1$.\n\n---\n\n$\\text{upd 2023.8.23}$: Added a new set of hack testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "广义斐波那契数列", "background": null, "description": "广义的斐波那契数列是指形如 $a_n=p\\times a_{n-1}+q\\times a_{n-2}$ 的数列。\n\n今给定数列的两系数 $p$ 和 $q$，以及数列的最前两项 $a_1$ 和 $ a_2$，另给出两个整数 $n$ 和 $m$，试求数列的第 $n$ 项 $a_n$ 对 $m$ 取模后的结果。", "inputFormat": "输入包含一行六个整数，$p,q,a_1,a_2,n,m$。", "outputFormat": "输出包含一行一个整数表示答案。", "hint": "数列第 $10 $ 项是 $55$，$55 \\bmod 7 = 6$。\n\n**【数据范围】**  \n对于 $100\\%$ 的数据，$p,q,a_1,a_2 \\in [0,2^{31}-1]$，$1\\le n,m \\le 2^{31}-1$。\n\n---\n\n$\\text{upd 2023.8.23}$：新增加一组 Hack 数据。", "locale": "zh-CN"}}}
{"pid": "P1350", "type": "P", "difficulty": 3, "samples": [["2 2 2 2 2", "38\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "福建省历届夏令营", "组合数学", "排列组合"], "title": "车的放置", "background": "", "description": "有下面这样的一个网格棋盘，$a,b,c,d$ 表示了对应边长度，也就是对应格子数：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7ulpevu.png)\n\n当 $a=b=c=d=2$ 时，对应下面这样一个棋盘：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e2ntmjlk.png)\n\n要在这个棋盘上放 $k$ 个相互不攻击的车，也就是这 $k$ 个车没有两个车在同一行，也没有两个车在同一列，问有多少种方案。\n", "inputFormat": "只有一行，为五个非负整数，分别代表 $a,b,c,d$ 和 $k$。\n", "outputFormat": "输出一行一个整数代表答案 $\\bmod$ $10^5+3$ 后的结果。", "hint": "#### 数据规模与约定\n\n- 存在部分数据，保证 $b=0$；\n- 存在部分数据，保证 $a,b,c,d\\leq 4$。\n- 对于 $100\\%$ 的数据，保证 $0\\leq a,b,c,d,k\\leq 10^3$，且至少有一种可行方案。", "locale": "zh-CN", "translations": {"en": {"title": "Placing Rooks", "background": "", "description": "There is a grid board as shown below, where $a,b,c,d$ denote the lengths of the corresponding sides, i.e., the numbers of cells on those sides:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7ulpevu.png)\n\nWhen $a=b=c=d=2$, the corresponding board is as follows:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e2ntmjlk.png)\n\nYou need to place $k$ non-attacking rooks on this board, meaning that among these $k$ rooks, no two share the same row and no two share the same column. Find the number of such placements.", "inputFormat": "A single line with five non-negative integers, representing $a,b,c,d$ and $k$.", "outputFormat": "Output one line with a single integer, which is the answer $\\bmod$ $10^5+3$.", "hint": "#### Constraints and Notes\n\n- For some testdata, it is guaranteed that $b=0$.\n- For some testdata, it is guaranteed that $a,b,c,d\\leq 4$.\n- For $100\\%$ of the data, it is guaranteed that $0\\leq a,b,c,d,k\\leq 10^3$, and there is at least one feasible solution.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "车的放置", "background": "", "description": "有下面这样的一个网格棋盘，$a,b,c,d$ 表示了对应边长度，也就是对应格子数：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7ulpevu.png)\n\n当 $a=b=c=d=2$ 时，对应下面这样一个棋盘：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e2ntmjlk.png)\n\n要在这个棋盘上放 $k$ 个相互不攻击的车，也就是这 $k$ 个车没有两个车在同一行，也没有两个车在同一列，问有多少种方案。\n", "inputFormat": "只有一行，为五个非负整数，分别代表 $a,b,c,d$ 和 $k$。\n", "outputFormat": "输出一行一个整数代表答案 $\\bmod$ $10^5+3$ 后的结果。", "hint": "#### 数据规模与约定\n\n- 存在部分数据，保证 $b=0$；\n- 存在部分数据，保证 $a,b,c,d\\leq 4$。\n- 对于 $100\\%$ 的数据，保证 $0\\leq a,b,c,d,k\\leq 10^3$，且至少有一种可行方案。", "locale": "zh-CN"}}}
{"pid": "P1351", "type": "P", "difficulty": 3, "samples": [["5  \n1 2  \n2 3\n3 4  \n4 5  \n1 5 2 3 10 ", "20 74"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "NOIP 提高组"], "title": "[NOIP 2014 提高组] 联合权值", "background": "NOIP2014 提高组 D1T2", "description": "无向连通图 $G$ 有 $n$ 个点，$n-1$ 条边。点从 $1$ 到 $n$ 依次编号,编号为 $i$ 的点的权值为 $W_i$，每条边的长度均为 $1$。图上两点 $(u, v)$ 的距离定义为 $u$ 点到 $v$ 点的最短距离。对于图 $G$ 上的点对 $(u, v)$，若它们的距离为 $2$，则它们之间会产生 $W_v \\times W_u$ 的联合权值。\n\n请问图 $G$ 上所有可产生联合权值的有序点对中，联合权值最大的是多少？所有联合权值之和是多少？", "inputFormat": "第一行包含 $1$ 个整数 $n$。\n\n接下来 $n-1$ 行,每行包含 $2$ 个用空格隔开的正整数 $u,v$，表示编号为 $u$ 和编号为 $v$ 的点之间有边相连。\n\n最后 $1$ 行，包含 $n$ 个正整数，每两个正整数之间用一个空格隔开，其中第 $i$ 个整数表示图 $G$ 上编号为 $i$ 的点的权值为 $W_i$。", "outputFormat": "输出共 $1$ 行，包含 $2$ 个整数，之间用一个空格隔开,依次为图 $G$ 上联合权值的最大值和所有联合权值之和。由于所有联合权值之和可能很大，输出它时要对 $10007$ 取余。", "hint": "**样例解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5zkpab9k.png)\n\n本例输入的图如上所示，距离为 $2$ 的有序点对有$(1,3)$ 、$(2,4)$ 、$(3,1)$ 、$(3,5) $、$(4,2)$ 、$(5,3) $。\n\n其联合权值分别为 $2,15,2,20,15,20$。其中最大的是 $20$，总和为 $74$。\n\n \n**数据说明**\n\n- 对于 $30\\%$ 的数据，$2 < n \\leq 100$；\n- 对于 $60\\%$ 的数据，$2 < n \\leq 2000$；\n- 对于 $100\\%$ 的数据，$2 < n \\leq 2\\times 10^5$，$0 < W_i \\leq 10000$。\n\n保证一定存在可产生联合权值的有序点对。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Senior] Joint Weight", "background": "NOIP 2014 Senior D1T2.", "description": "An undirected connected graph $G$ has $n$ vertices and $n-1$ edges. The vertices are numbered from $1$ to $n$, and the weight of vertex $i$ is $W_i$. Each edge has length $1$. For any two vertices $u$ and $v$, their distance is defined as the length of the shortest path from $u$ to $v$. For a pair of vertices $(u, v)$ in $G$, if their distance is $2$, then they generate a joint weight of $W_v \\times W_u$.\n\nAmong all ordered pairs in $G$ that can generate a joint weight, what is the maximum joint weight? What is the sum of all joint weights?", "inputFormat": "The first line contains $1$ integer $n$.\n\nThe next $n-1$ lines each contain $2$ positive integers $u, v$ separated by a space, indicating that there is an edge between vertex $u$ and vertex $v$.\n\nThe last line contains $n$ positive integers separated by single spaces, where the $i$-th integer indicates that the weight of vertex $i$ in $G$ is $W_i$.", "outputFormat": "Output a single line containing $2$ integers separated by a space: the maximum joint weight on graph $G$ and the sum of all joint weights. Since the sum may be large, output it modulo $10007$.", "hint": "Sample Explanation.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5zkpab9k.png)\n\nFor the input in this example, the graph is as shown above. The ordered pairs at distance $2$ are $(1, 3), (2, 4), (3, 1), (3, 5), (4, 2), (5, 3)$.\n\nTheir joint weights are $2, 15, 2, 20, 15, 20$. The maximum is $20$, and the total sum is $74$.\n\nConstraints\n\n- For $30\\%$ of the testdata, $2 < n \\leq 100$.\n- For $60\\%$ of the testdata, $2 < n \\leq 2000$.\n- For $100\\%$ of the testdata, $2 < n \\leq 2 \\times 10^5$, $0 < W_i \\leq 10000$.\n\nIt is guaranteed that there exists at least one ordered pair that can generate a joint weight.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 提高组] 联合权值", "background": "NOIP2014 提高组 D1T2", "description": "无向连通图 $G$ 有 $n$ 个点，$n-1$ 条边。点从 $1$ 到 $n$ 依次编号,编号为 $i$ 的点的权值为 $W_i$，每条边的长度均为 $1$。图上两点 $(u, v)$ 的距离定义为 $u$ 点到 $v$ 点的最短距离。对于图 $G$ 上的点对 $(u, v)$，若它们的距离为 $2$，则它们之间会产生 $W_v \\times W_u$ 的联合权值。\n\n请问图 $G$ 上所有可产生联合权值的有序点对中，联合权值最大的是多少？所有联合权值之和是多少？", "inputFormat": "第一行包含 $1$ 个整数 $n$。\n\n接下来 $n-1$ 行,每行包含 $2$ 个用空格隔开的正整数 $u,v$，表示编号为 $u$ 和编号为 $v$ 的点之间有边相连。\n\n最后 $1$ 行，包含 $n$ 个正整数，每两个正整数之间用一个空格隔开，其中第 $i$ 个整数表示图 $G$ 上编号为 $i$ 的点的权值为 $W_i$。", "outputFormat": "输出共 $1$ 行，包含 $2$ 个整数，之间用一个空格隔开,依次为图 $G$ 上联合权值的最大值和所有联合权值之和。由于所有联合权值之和可能很大，输出它时要对 $10007$ 取余。", "hint": "**样例解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5zkpab9k.png)\n\n本例输入的图如上所示，距离为 $2$ 的有序点对有$(1,3)$ 、$(2,4)$ 、$(3,1)$ 、$(3,5) $、$(4,2)$ 、$(5,3) $。\n\n其联合权值分别为 $2,15,2,20,15,20$。其中最大的是 $20$，总和为 $74$。\n\n \n**数据说明**\n\n- 对于 $30\\%$ 的数据，$2 < n \\leq 100$；\n- 对于 $60\\%$ 的数据，$2 < n \\leq 2000$；\n- 对于 $100\\%$ 的数据，$2 < n \\leq 2\\times 10^5$，$0 < W_i \\leq 10000$。\n\n保证一定存在可产生联合权值的有序点对。", "locale": "zh-CN"}}}
{"pid": "P1352", "type": "P", "difficulty": 3, "samples": [["7\n1\n1\n1\n1\n1\n1\n1\n1 3\n2 3\n6 4\n7 4\n4 5\n3 5\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "福建省历届夏令营", "树形 DP"], "title": "没有上司的舞会", "background": "", "description": "某大学有 $n$ 个职员，编号为 $1\\ldots n$。\n\n他们之间有从属关系，也就是说他们的关系就像一棵以校长为根的树，父结点就是子结点的直接上司。\n\n现在有个周年庆宴会，宴会每邀请来一个职员都会增加一定的快乐指数 $r_i$，但是呢，如果某个职员的直接上司来参加舞会了，那么这个职员就无论如何也不肯来参加舞会了。\n\n所以，请你编程计算，邀请哪些职员可以使快乐指数最大，求最大的快乐指数。", "inputFormat": "输入的第一行是一个整数 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i+1)$ 行的整数表示 $i$ 号职员的快乐指数 $r_i$。\n\n第 $(n + 2)$ 到第 $2n$ 行，每行输入一对整数 $l, k$，代表 $k$ 是 $l$ 的直接上司。", "outputFormat": "输出一行一个整数代表最大的快乐指数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n \\leq 6 \\times 10^3$，$-128 \\leq r_i\\leq 127$，$1 \\leq l, k \\leq n$，且给出的关系一定是一棵树。", "locale": "zh-CN", "translations": {"en": {"title": "Party Without a Boss", "background": "", "description": "A university has $n$ employees, numbered $1 \\ldots n$.\n\nThere is a hierarchy among them, meaning their relationships form a tree rooted at the university president, where a parent node is the direct supervisor of its child nodes.\n\nThere will be an anniversary banquet. Inviting an employee increases the happiness index by $r_i$. However, if an employee’s direct supervisor attends the banquet, that employee will refuse to attend no matter what.\n\nPlease compute which employees to invite so that the total happiness index is maximized, and find the maximum total happiness index.", "inputFormat": "The first line contains an integer $n$.\n\nLines $2$ to $(n + 1)$ each contain one integer. The integer on line $(i + 1)$ is the happiness index $r_i$ of employee $i$.\n\nLines $(n + 2)$ to $2n$ each contain a pair of integers $l, k$, meaning $k$ is the direct supervisor of $l$.", "outputFormat": "Output a single line with one integer representing the maximum total happiness index.", "hint": "Constraints\n\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\leq 6 \\times 10^3$, $-128 \\leq r_i \\leq 127$, $1 \\leq l, k \\leq n$, and the given relations form a tree.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "没有上司的舞会", "background": "", "description": "某大学有 $n$ 个职员，编号为 $1\\ldots n$。\n\n他们之间有从属关系，也就是说他们的关系就像一棵以校长为根的树，父结点就是子结点的直接上司。\n\n现在有个周年庆宴会，宴会每邀请来一个职员都会增加一定的快乐指数 $r_i$，但是呢，如果某个职员的直接上司来参加舞会了，那么这个职员就无论如何也不肯来参加舞会了。\n\n所以，请你编程计算，邀请哪些职员可以使快乐指数最大，求最大的快乐指数。", "inputFormat": "输入的第一行是一个整数 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i+1)$ 行的整数表示 $i$ 号职员的快乐指数 $r_i$。\n\n第 $(n + 2)$ 到第 $2n$ 行，每行输入一对整数 $l, k$，代表 $k$ 是 $l$ 的直接上司。", "outputFormat": "输出一行一个整数代表最大的快乐指数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n \\leq 6 \\times 10^3$，$-128 \\leq r_i\\leq 127$，$1 \\leq l, k \\leq n$，且给出的关系一定是一棵树。", "locale": "zh-CN"}}}
{"pid": "P1353", "type": "P", "difficulty": 4, "samples": [["5 2\n5\n3\n4\n2\n10\n", "9\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2008", "USACO", "福建省历届夏令营"], "title": "[USACO08JAN] Running S", "background": "", "description": "奶牛们打算通过锻炼来培养自己的运动细胞，作为其中的一员，贝茜选择的运动方式是每天进行 $n$ 分钟的晨跑。在每分钟的开始，贝茜会选择下一分钟是用来跑步还是休息。\n\n\n贝茜的体力限制了她跑步的距离。更具体地，如果贝茜选择在第 $i$ 分钟内跑步，她可以在这一分钟内跑 $d_i$ 米，并且她的疲劳度会增加 $1$。不过，无论何时贝茜的疲劳度都不能超过 $m$。  \n\n如果贝茜选择休息，那么她的疲劳度就会每分钟减少 $1$，但她必须休息到疲劳度恢复到 $0$ 为止。在疲劳度为 $0$ 时休息的话，疲劳度不会再变动。晨跑开始时，贝茜的疲劳度为 $0$ 。\n\n还有，在 $n$ 分钟的锻炼结束时，贝茜的疲劳度也必须恢复到 $0$，否则她将没有足够的精力来对付这一整天中剩下的事情。\n\n请你计算一下，贝茜最多能跑多少米。\n", "inputFormat": "第一行两个正整数 $n,m$。   \n接下来 $n$ 行，每行一个正整数 $d_i$。\n", "outputFormat": "输出一个整数，表示在满足所有限制条件的情况下，贝茜能跑的最大距离。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^4$，$1\\le d_i \\le 1000$，$1\\le m \\le 500$。\n\n【样例说明】\n\n贝茜在第 $1$ 分钟内选择跑步（跑了 $5$ 米），在第 $2$ 分钟内休息，在第 $3$ 分钟内跑步（跑了 $4$ 米），剩余的时间都用来休息。  \n因为在晨跑结束时贝茜的疲劳度必须为0，所以她不能在第 $5$ 分钟内选择跑步。  \n最终跑的总距离为 $9$。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO08JAN] Running S", "background": "", "description": "The cows plan to develop their athleticism through exercise. As one of them, Bessie chooses to do a morning run for $n$ minutes every day. At the beginning of each minute, Bessie chooses whether the next minute will be used for running or resting.\n\nBessie’s stamina limits how far she can run. Specifically, if Bessie chooses to run during minute $i$, she can run $d_i$ meters in that minute, and her fatigue increases by $1$. However, at any time her fatigue must not exceed $m$.\n\nIf Bessie chooses to rest, her fatigue decreases by $1$ per minute, but she must continue resting until her fatigue returns to $0$. If she rests when her fatigue is $0$, the fatigue level will not change further. At the start of the run, Bessie’s fatigue is $0$.\n\nAlso, at the end of the $n$ minutes of exercise, Bessie’s fatigue must be $0$ as well, or she will not have enough energy to handle the rest of the day.\n\nPlease compute the maximum total distance Bessie can run.", "inputFormat": "The first line contains two positive integers $n, m$.  \nThe next $n$ lines each contain one positive integer $d_i$.", "outputFormat": "Output a single integer, the maximum distance Bessie can run while satisfying all constraints.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 10^4$, $1 \\le d_i \\le 1000$, $1 \\le m \\le 500$.\n\nSample explanation:\n\nBessie runs in minute $1$ (running $5$ meters), rests in minute $2$, runs in minute $3$ (running $4$ meters), and rests for the remaining time.  \nBecause her fatigue must be $0$ at the end of the morning run, she cannot choose to run in minute $5$.  \nThe total distance run is $9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO08JAN] Running S", "background": "", "description": "奶牛们打算通过锻炼来培养自己的运动细胞，作为其中的一员，贝茜选择的运动方式是每天进行 $n$ 分钟的晨跑。在每分钟的开始，贝茜会选择下一分钟是用来跑步还是休息。\n\n\n贝茜的体力限制了她跑步的距离。更具体地，如果贝茜选择在第 $i$ 分钟内跑步，她可以在这一分钟内跑 $d_i$ 米，并且她的疲劳度会增加 $1$。不过，无论何时贝茜的疲劳度都不能超过 $m$。  \n\n如果贝茜选择休息，那么她的疲劳度就会每分钟减少 $1$，但她必须休息到疲劳度恢复到 $0$ 为止。在疲劳度为 $0$ 时休息的话，疲劳度不会再变动。晨跑开始时，贝茜的疲劳度为 $0$ 。\n\n还有，在 $n$ 分钟的锻炼结束时，贝茜的疲劳度也必须恢复到 $0$，否则她将没有足够的精力来对付这一整天中剩下的事情。\n\n请你计算一下，贝茜最多能跑多少米。\n", "inputFormat": "第一行两个正整数 $n,m$。   \n接下来 $n$ 行，每行一个正整数 $d_i$。\n", "outputFormat": "输出一个整数，表示在满足所有限制条件的情况下，贝茜能跑的最大距离。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^4$，$1\\le d_i \\le 1000$，$1\\le m \\le 500$。\n\n【样例说明】\n\n贝茜在第 $1$ 分钟内选择跑步（跑了 $5$ 米），在第 $2$ 分钟内休息，在第 $3$ 分钟内跑步（跑了 $4$ 米），剩余的时间都用来休息。  \n因为在晨跑结束时贝茜的疲劳度必须为0，所以她不能在第 $5$ 分钟内选择跑步。  \n最终跑的总距离为 $9$。\n\n", "locale": "zh-CN"}}}
{"pid": "P1354", "type": "P", "difficulty": 4, "samples": [["2\n4 2 7 8 9\n7 3 4.5 6 7\n", "10.06\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "图论", "计算几何", "福建省历届夏令营", "图论建模", "最短路"], "title": "房间最短路问题", "background": "", "description": "在一个长宽均为 $10$，入口、出口分别为 $(0,5)$、$(10,5)$ 的房间里，有几堵墙，每堵墙上有两个缺口，求入口到出口的最短路经。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i929rz3l.png)", "inputFormat": "第一排为 $n$（$n \\le 20$），墙的数目。\n\n接下来 $n$ 排，每排 $5$ 个实数 $x,a_1,b_1,a_2,b_2$。\n\n$x$ 表示墙的横坐标（所有墙都是竖直的），$a_1 \\sim b_1$ 和 $a_2 \\sim b_2$ 之间为空缺。\n\n$a_1,b_1,a_2,b_2$ 保持递增，$x_1 \\sim x_n$ 也是递增的。", "outputFormat": "输出最短距离，保留 $2$ 位小数。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Shortest Path in a Room", "background": "", "description": "In a room with both length and width equal to $10$, with the entrance and exit at $(0,5)$ and $(10,5)$ respectively, there are several walls, each with two gaps. Find the shortest path from the entrance to the exit.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i929rz3l.png)", "inputFormat": "The first line contains $n$ ($n \\le 20$), the number of walls.\n\nThe next $n$ lines each contain $5$ real numbers $x, a_1, b_1, a_2, b_2$.\n\n$x$ is the $x$-coordinate of the wall (all walls are vertical). The segments between $a_1 \\sim b_1$ and $a_2 \\sim b_2$ are openings.\n\n$a_1, b_1, a_2, b_2$ are in increasing order, and $x_1 \\sim x_n$ are also in increasing order.", "outputFormat": "Output the shortest distance, keeping $2$ decimal places.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "房间最短路问题", "background": "", "description": "在一个长宽均为 $10$，入口、出口分别为 $(0,5)$、$(10,5)$ 的房间里，有几堵墙，每堵墙上有两个缺口，求入口到出口的最短路经。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i929rz3l.png)", "inputFormat": "第一排为 $n$（$n \\le 20$），墙的数目。\n\n接下来 $n$ 排，每排 $5$ 个实数 $x,a_1,b_1,a_2,b_2$。\n\n$x$ 表示墙的横坐标（所有墙都是竖直的），$a_1 \\sim b_1$ 和 $a_2 \\sim b_2$ 之间为空缺。\n\n$a_1,b_1,a_2,b_2$ 保持递增，$x_1 \\sim x_n$ 也是递增的。", "outputFormat": "输出最短距离，保留 $2$ 位小数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1355", "type": "P", "difficulty": 3, "samples": [["(0,0)\r\n(3,0)\r\n(0,3)\r\n(1,1)\r\n", "1\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "计算几何", "福建省历届夏令营", "向量", "叉积"], "title": "神秘大三角", "background": "", "description": "判断一个点与已知三角形的位置关系。\n", "inputFormat": "前三行，每行一个坐标，表示该三角形的三个顶点。\n\n第四行，一个点的坐标，试判断该点与前三个点围成三角形的位置关系。\n\n所有坐标值均为整数。", "outputFormat": "- 若点在三角形内（不含边界），输出 $1$；\n- 若点在三角形外（不含边界），输出 $2$；\n- 若点在三角形边界上（不含顶点），输出 $3$；\n- 若点在三角形顶点上，输出 $4$。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 数据，$0\\le x_i,y_i\\le 100$。\n\n ", "locale": "zh-CN", "translations": {"en": {"title": "Mysterious Big Triangle", "background": "", "description": "Determine the positional relationship between a point and a given triangle.", "inputFormat": "- The first three lines, each contains a coordinate, representing the three vertices of the triangle.\n- The fourth line contains the coordinate of a point. Determine the positional relationship between this point and the triangle formed by the previous three points.\n- All coordinate values are integers.", "outputFormat": "- If the point is inside the triangle (excluding the boundary), output $1$.\n- If the point is outside the triangle (excluding the boundary), output $2$.\n- If the point is on the boundary of the triangle (excluding vertices), output $3$.\n- If the point is on a vertex of the triangle, output $4$.", "hint": "### Constraints\n\nFor $100\\%$ testdata, $0 \\le x_i, y_i \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "神秘大三角", "background": "", "description": "判断一个点与已知三角形的位置关系。\n", "inputFormat": "前三行，每行一个坐标，表示该三角形的三个顶点。\n\n第四行，一个点的坐标，试判断该点与前三个点围成三角形的位置关系。\n\n所有坐标值均为整数。", "outputFormat": "- 若点在三角形内（不含边界），输出 $1$；\n- 若点在三角形外（不含边界），输出 $2$；\n- 若点在三角形边界上（不含顶点），输出 $3$；\n- 若点在三角形顶点上，输出 $4$。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 数据，$0\\le x_i,y_i\\le 100$。\n\n ", "locale": "zh-CN"}}}
{"pid": "P1356", "type": "P", "difficulty": 4, "samples": [["2\n4 7\n17 5 -21 15\n4 5\n17 5 -21 15\n", "Divisible\nNot divisible\n\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "数学", "福建省历届夏令营"], "title": "数列的整除性", "background": null, "description": "对于任意一个整数数列，我们可以在每两个整数中间任意放一个符号 `+` 或 `-`，这样就可以构成一个表达式，也就可以计算出表达式的值。对于一个整数数列来说，我们能通过如上的方法构造出不同的表达式，从而得到不同的数值，如果其中某一个数值能够被 $k$ 整除的话，我们就称该数列能被 $k$ 整除。现在你的任务是判断某个数列是否能被某数整除。", "inputFormat": "**本题有多组数据**。  \n\n第一行一个整数 $M$，表示数据组数。  \n\n对于每组数据：  \n\n第一行两个整数 $n$ 和 $k$，$n$ 表示数列中整数的个数。  \n\n第二行  $n$ 个整数，表示输入数列 $\\{a_n\\}$。", "outputFormat": "输出应有 $M$ 行，依次对应输入文件中的 $M$ 个子任务，若数列能被 $k$ 整除则输出 `Divisible`，否则输出 `Not divisible` ，行首行末应没有空格。", "hint": "#### 样例输入输出 1 解释\n\n对于整数数列：$17,5,-21,15$，可以构造出 $8$ 个表达式：\n\n- $17+5+(-21)+15=16$\n- $17+5+(-21)-15=-14$\n- $17+5-(-21)+15=58$\n- $17+5-(-21)-15=28$\n- $17-5+(-21)+15=6$\n- $17-5+(-21)-15=-24$\n- $17-5-(-21)+15=48$\n- $17-5-(-21)-15=18$\n\n\n该数列能被 $7$ 整除（$17+5+(-21)-15=-14$），但不能被 $5$ 整除。\n\n#### 数据规模与约定\n对于全部的测试点，保证 $1 \\le M\\le 20,1 \\le n \\le 10^4,2 \\le k \\le 100,\\left| a_i \\right| \\le 10^4$。\n\n- $\\text{upd 2022.9.27}$：新增加一组 Hack 数据。\n- $\\text{upd 2023.11.29}$：新增加一组 Hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "Divisibility of a Sequence", "background": "", "description": "For any integer sequence, we can insert either the symbol `+` or `-` between every two integers to form an expression, and thus compute its value. For a given integer sequence, we can construct different expressions in this way and obtain different values. If any one of these values is divisible by $k$, we say the sequence is divisible by $k$. Your task is to determine whether a given sequence is divisible by a given number.", "inputFormat": "This problem has multiple test cases.\n\nThe first line contains an integer $M$, the number of test cases.\n\nFor each test case:\n\n- The first line contains two integers $n$ and $k$, where $n$ is the number of integers in the sequence.\n- The second line contains $n$ integers, which form the input sequence $\\{a_i\\}$.", "outputFormat": "Output $M$ lines, each corresponding to a test case in the input. If the sequence is divisible by $k$, output `Divisible`; otherwise, output `Not divisible`. There should be no leading or trailing spaces on the line.", "hint": "Explanation for Sample 1\n\nFor the integer sequence $17, 5, -21, 15$, we can construct $8$ expressions:\n\n- $17+5+(-21)+15=16$.\n- $17+5+(-21)-15=-14$.\n- $17+5-(-21)+15=58$.\n- $17+5-(-21)-15=28$.\n- $17-5+(-21)+15=6$.\n- $17-5+(-21)-15=-24$.\n- $17-5-(-21)+15=48$.\n- $17-5-(-21)-15=18$.\n\nThis sequence is divisible by $7$ ($17+5+(-21)-15=-14$), but not divisible by $5$.\n\nConstraints\nFor all test points, it is guaranteed that $1 \\le M \\le 20$, $1 \\le n \\le 10^4$, $2 \\le k \\le 100$, and $\\left| a_i \\right| \\le 10^4$.\n\n- $\\text{upd 2022.9.27}$: Added one Hack testdata set.\n- $\\text{upd 2023.11.29}$: Added one Hack testdata set.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数列的整除性", "background": null, "description": "对于任意一个整数数列，我们可以在每两个整数中间任意放一个符号 `+` 或 `-`，这样就可以构成一个表达式，也就可以计算出表达式的值。对于一个整数数列来说，我们能通过如上的方法构造出不同的表达式，从而得到不同的数值，如果其中某一个数值能够被 $k$ 整除的话，我们就称该数列能被 $k$ 整除。现在你的任务是判断某个数列是否能被某数整除。", "inputFormat": "**本题有多组数据**。  \n\n第一行一个整数 $M$，表示数据组数。  \n\n对于每组数据：  \n\n第一行两个整数 $n$ 和 $k$，$n$ 表示数列中整数的个数。  \n\n第二行  $n$ 个整数，表示输入数列 $\\{a_n\\}$。", "outputFormat": "输出应有 $M$ 行，依次对应输入文件中的 $M$ 个子任务，若数列能被 $k$ 整除则输出 `Divisible`，否则输出 `Not divisible` ，行首行末应没有空格。", "hint": "#### 样例输入输出 1 解释\n\n对于整数数列：$17,5,-21,15$，可以构造出 $8$ 个表达式：\n\n- $17+5+(-21)+15=16$\n- $17+5+(-21)-15=-14$\n- $17+5-(-21)+15=58$\n- $17+5-(-21)-15=28$\n- $17-5+(-21)+15=6$\n- $17-5+(-21)-15=-24$\n- $17-5-(-21)+15=48$\n- $17-5-(-21)-15=18$\n\n\n该数列能被 $7$ 整除（$17+5+(-21)-15=-14$），但不能被 $5$ 整除。\n\n#### 数据规模与约定\n对于全部的测试点，保证 $1 \\le M\\le 20,1 \\le n \\le 10^4,2 \\le k \\le 100,\\left| a_i \\right| \\le 10^4$。\n\n- $\\text{upd 2022.9.27}$：新增加一组 Hack 数据。\n- $\\text{upd 2023.11.29}$：新增加一组 Hack 数据。", "locale": "zh-CN"}}}
{"pid": "P1357", "type": "P", "difficulty": 5, "samples": [["10 5 3\n", "458"], ["6 2 1\n", "18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["福建省历届夏令营", "矩阵加速", "矩阵乘法", "位运算", "状压 DP"], "title": "花园", "background": "", "description": "小 L 有一座环形花园，沿花园的顺时针方向，他把各个花圃编号为 $1 \\sim n$。花园 $1$ 和 $n$ 是相邻的。\n\n他的环形花园每天都会换一个新花样，但他的花园都不外乎一个规则：任意相邻 $m$ 个花圃中都只有不超过 $k$ 个 C 形的花圃，其余花圃均为 P 形的花圃。\n\n例如，若 $n=10$ , $m=5$ , $k=3$ ，则\n\n- `CCPCPPPPCC` 是一种不符合规则的花圃。\n- `CCPPPPCPCP` 是一种符合规则的花圃。\n\n请帮小 L 求出符合规则的花园种数对 $10^9+7$ 取模的结果。", "inputFormat": "只有一行三个整数，分别表示 $n, m, k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $40\\%$ 的数据，保证 $n \\le 20$。\n- 对于 $60\\%$ 的数据，保证 $m=2$。\n- 对于 $80\\%$ 的数据，保证 $n \\le 10^5$；\n- 对于 $100\\%$ 的数据，保证 $2 \\leq n \\le 10^{15}$，$2 \\leq m \\leq \\min(n, 5)$，$1 \\leq k \\lt m$。", "locale": "zh-CN", "translations": {"en": {"title": "Garden", "background": "", "description": "Xiao L has a circular garden. Number the flower plots from $1$ to $n$ in the clockwise direction. Plots $1$ and $n$ are adjacent.\n\nHis circular garden can have a new arrangement every day, but all arrangements must follow one rule: in any $m$ consecutive plots, there are at most $k$ plots of type \"C\", and all remaining plots are of type \"P\".\n\nFor example, if $n = 10$, $m = 5$, $k = 3$, then:\n- `CCPCPPPPCC` is an arrangement that does not satisfy the rule.\n- `CCPPPPCPCP` is an arrangement that satisfies the rule.\n\nPlease compute the number of arrangements that satisfy the rule, modulo $10^9 + 7$.", "inputFormat": "One line containing three integers $n$, $m$, and $k$.", "outputFormat": "Output one line with a single integer, the answer.", "hint": "#### Constraints\n\n- For $40\\%$ of the testdata, $n \\le 20$.\n- For $60\\%$ of the testdata, $m = 2$.\n- For $80\\%$ of the testdata, $n \\le 10^5$.\n- For $100\\%$ of the testdata, $2 \\le n \\le 10^{15}$, $2 \\le m \\le \\min(n, 5)$, $1 \\le k \\lt m$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "花园", "background": "", "description": "小 L 有一座环形花园，沿花园的顺时针方向，他把各个花圃编号为 $1 \\sim n$。花园 $1$ 和 $n$ 是相邻的。\n\n他的环形花园每天都会换一个新花样，但他的花园都不外乎一个规则：任意相邻 $m$ 个花圃中都只有不超过 $k$ 个 C 形的花圃，其余花圃均为 P 形的花圃。\n\n例如，若 $n=10$ , $m=5$ , $k=3$ ，则\n\n- `CCPCPPPPCC` 是一种不符合规则的花圃。\n- `CCPPPPCPCP` 是一种符合规则的花圃。\n\n请帮小 L 求出符合规则的花园种数对 $10^9+7$ 取模的结果。", "inputFormat": "只有一行三个整数，分别表示 $n, m, k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $40\\%$ 的数据，保证 $n \\le 20$。\n- 对于 $60\\%$ 的数据，保证 $m=2$。\n- 对于 $80\\%$ 的数据，保证 $n \\le 10^5$；\n- 对于 $100\\%$ 的数据，保证 $2 \\leq n \\le 10^{15}$，$2 \\leq m \\leq \\min(n, 5)$，$1 \\leq k \\lt m$。", "locale": "zh-CN"}}}
{"pid": "P1358", "type": "P", "difficulty": 2, "samples": [["5 2\n3 1\n", "20\n"], ["20 19\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n", "8707\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "递推", "福建省历届夏令营", "枚举", "背包 DP"], "title": "扑克牌", "background": "", "description": "组合数学是数学的重要组成部分，是一门研究离散对象的科学，它主要研究满足一定条件的组态（也称组合模型）的存在、计数以及构造等方面的问题。组合数学的主要内容有组合计数、组合设计、组合矩阵、组合优化等。\n\n随着计算机科学的日益发展，组合数学的重要性也日渐凸显，因为计算机科学的核心内容是使用算法处理离散数据。\n\n今天我们来研究组合数学中的一个有趣的问题，也是一个简单的计数问题：\n\n从一副含有 $n$ 张的扑克牌(每张扑克牌都不相同)中，分给 $m$ 个人，第 $i$ 个人得到 $a_i$ 张牌，求一共有几种分法，这个数可能非常大，请输出此数模 $10007$ 后的结果。", "inputFormat": "第一行两个整数为 $n,m$。\n\n第二行 $m$ 个整数 $a_i$。\n", "outputFormat": "此数模 $10007$ 后的结果。\n", "hint": "对于 $50\\%$ 的数据：$a_i=1$。\n\n对于 $100\\%$ 的数据：$1 \\leq n \\leq 10^4$，$1 \\leq m \\leq 100$，$0 \\leq a_i \\leq 100$。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "Playing Cards", "background": "", "description": "Combinatorics is an important branch of mathematics that studies discrete objects. It mainly focuses on problems about the existence, counting, and construction of configurations (also called combinatorial models) that satisfy certain conditions. Its main topics include combinatorial counting, combinatorial design, combinatorial matrices, and combinatorial optimization.\n\nWith the rapid development of computer science, the importance of combinatorics has become more and more evident, because the core of computer science is using algorithms to process discrete data.\n\nToday we study an interesting and simple counting problem in combinatorics:\n\nFrom a deck of $n$ distinct playing cards, deal to $m$ people; the $i$-th person receives $a_i$ cards. Find the number of ways to do this. This number may be very large; please output the result modulo $10007$.", "inputFormat": "The first line contains two integers $n, m$.\n\nThe second line contains $m$ integers $a_i$.", "outputFormat": "Output the result modulo $10007$.", "hint": "For $50\\%$ of the testdata: $a_i = 1$.\n\nFor $100\\%$ of the testdata: $1 \\leq n \\leq 10^4$, $1 \\leq m \\leq 100$, $0 \\leq a_i \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "扑克牌", "background": "", "description": "组合数学是数学的重要组成部分，是一门研究离散对象的科学，它主要研究满足一定条件的组态（也称组合模型）的存在、计数以及构造等方面的问题。组合数学的主要内容有组合计数、组合设计、组合矩阵、组合优化等。\n\n随着计算机科学的日益发展，组合数学的重要性也日渐凸显，因为计算机科学的核心内容是使用算法处理离散数据。\n\n今天我们来研究组合数学中的一个有趣的问题，也是一个简单的计数问题：\n\n从一副含有 $n$ 张的扑克牌(每张扑克牌都不相同)中，分给 $m$ 个人，第 $i$ 个人得到 $a_i$ 张牌，求一共有几种分法，这个数可能非常大，请输出此数模 $10007$ 后的结果。", "inputFormat": "第一行两个整数为 $n,m$。\n\n第二行 $m$ 个整数 $a_i$。\n", "outputFormat": "此数模 $10007$ 后的结果。\n", "hint": "对于 $50\\%$ 的数据：$a_i=1$。\n\n对于 $100\\%$ 的数据：$1 \\leq n \\leq 10^4$，$1 \\leq m \\leq 100$，$0 \\leq a_i \\leq 100$。\n\n", "locale": "zh-CN"}}}
{"pid": "P1359", "type": "P", "difficulty": 2, "samples": [["3\n5 15\n7", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "图论", "福建省历届夏令营", "最短路", "Floyd 算法"], "title": "租用游艇", "background": "", "description": "长江游艇俱乐部在长江上设置了 $n$ 个游艇出租站 $1,2,\\dots,n$。游客可在这些游艇出租站租用游艇，并在下游的任何一个游艇出租站归还游艇。游艇出租站 $i$ 到游艇出租站 $j$ 之间的租金为 $r_{i,j}$（$1\\le i\\lt j\\le n$）。试设计一个算法，计算出从游艇出租站 $1$ 到游艇出租站 $n$ 所需的最少租金。", "inputFormat": "第一行中有一个正整数 $n$，表示有 $n$ 个游艇出租站。接下来的 $n-1$ 行是一个半矩阵 $r_{i,j}$（$1\\le i<j\\le n$）。", "outputFormat": "输出计算出的从游艇出租站 $1$ 到游艇出租站 $n$ 所需的最少租金。", "hint": "$1\\le n\\le 200$，保证计算过程中任何时刻数值都不超过 $10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Yacht Rental", "background": "", "description": "The Yangtze River Yacht Club has set up $n$ yacht rental stations $1,2,\\dots,n$ along the Yangtze River. Tourists can rent a yacht at any of these stations and return it at any downstream station. The rent between yacht rental station $i$ and yacht rental station $j$ is $r_{i,j}$ ($1\\le i\\lt j\\le n$). Design an algorithm to compute the minimum total rent needed to travel from yacht rental station $1$ to yacht rental station $n$.", "inputFormat": "The first line contains a positive integer $n$, indicating there are $n$ yacht rental stations.  \nThe next $n-1$ lines give a half matrix $r_{i,j}$ ($1\\le i<j\\le n$): for each $i$ from $1$ to $n-1$, the $i$-th of these lines contains $n-i$ integers $r_{i,i+1}, r_{i,i+2}, \\dots, r_{i,n}$.", "outputFormat": "Output the minimum total rent required to travel from yacht rental station $1$ to yacht rental station $n$.", "hint": "$1\\le n\\le 200$, and it is guaranteed that at any time during the computation, all numbers do not exceed $10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "租用游艇", "background": "", "description": "长江游艇俱乐部在长江上设置了 $n$ 个游艇出租站 $1,2,\\dots,n$。游客可在这些游艇出租站租用游艇，并在下游的任何一个游艇出租站归还游艇。游艇出租站 $i$ 到游艇出租站 $j$ 之间的租金为 $r_{i,j}$（$1\\le i\\lt j\\le n$）。试设计一个算法，计算出从游艇出租站 $1$ 到游艇出租站 $n$ 所需的最少租金。", "inputFormat": "第一行中有一个正整数 $n$，表示有 $n$ 个游艇出租站。接下来的 $n-1$ 行是一个半矩阵 $r_{i,j}$（$1\\le i<j\\le n$）。", "outputFormat": "输出计算出的从游艇出租站 $1$ 到游艇出租站 $n$ 所需的最少租金。", "hint": "$1\\le n\\le 200$，保证计算过程中任何时刻数值都不超过 $10^6$。", "locale": "zh-CN"}}}
{"pid": "P1360", "type": "P", "difficulty": 4, "samples": [["7 3\n7\n6\n7\n2\n1\n4\n2\n", "4\n\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "USACO", "离散化", "进制", "前缀和", "队列"], "title": "[USACO07MAR] Gold Balanced Lineup G", "background": "", "description": "神仙 $\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ 在许多方面都有着很强的能力。具体的说，他总共有 $m$ 种能力，并将这些能力编号为 $1 \\sim m$。  \n\n他的能力是一天一天地提升的，每天都会有一些能力得到一次提升，她对每天的能力提升都用一个数字表示，称之为能力提升数字，比如数字 $13$，转化为二进制为 $1101$，并且从右往左看，表示他的编号为 $1,3,4$ 的能力分别得到了一次提升。  \n\n$\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ 把每天表示能力提升的数字的记了下来，如果在连续的一段时间内，她的每项能力都提升了相同的次数，她就会称这段时间为一个均衡时期，比如在连续 $5$ 天内，她的每种能力都提升了 $4$ 次，那么这就是一个长度为 $5$ 的均衡时期。\n\n于是，问题来了，给出 $\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ $n$ 天的能力提升数字，请求出均衡时期的最大长度。\n", "inputFormat": "第一行有两个整数 $n,m$，表示有 $n$ 天，$m$ 种能力。　　\n\n接下来有 $n$ 行，每行有一个整数，分别表示第 $1\\sim n$ 天的能力提升数字。  \n\n能力提升数字转化为二进制后，从右到左的每一位表示对应的能力是否在当天得到了一次提升。\n\n\n", "outputFormat": "输出只有一个整数，表示长度最大的均衡时期的长度。\n", "hint": "【数据范围】    \n对于 $50\\%$ 的数据，$1\\le n \\le 1000$。  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$1\\le m \\le 30$。\n\n【样例解释】\n\n每天被提升的能力种类分别为：\n\n| 天数 | 提升的能力 |\n| :-----------: | :-----------: |\n| $1$ | $1,2,3$ |\n| $2$ | $2,3$ |\n| $3$ | $1,2,3$ |\n| $4$ | $2$ |\n| $5$ | $1$ |\n| $6$ | $3$ |\n| $7$ | $2$ |\n\n第三天到第六天为长度最长的均衡时期，因为这四天每种能力分别提升了 $2$ 次。\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07MAR] Gold Balanced Lineup G", "background": "", "description": "Immortal $\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ has strong abilities in many aspects. Specifically, she has a total of $m$ abilities, numbered $1 \\sim m$.\n\nHer abilities improve day by day. Each day, some abilities increase once. She records each day’s improvements with a single integer, called the ability upgrade number. For example, the number $13$ in binary is $1101$, and read from right to left, it indicates that abilities numbered $1, 3, 4$ each increased once that day.\n\n$\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ writes down the ability upgrade number for every day. If over a consecutive period each of her abilities increases the same number of times, she calls that period a balanced period. For example, if over $5$ consecutive days each ability increases $4$ times, then it is a balanced period of length $5$.\n\nGiven the ability upgrade numbers for $n$ days, find the maximum length of a balanced period.", "inputFormat": "The first line contains two integers $n, m$, meaning there are $n$ days and $m$ abilities.\n\nThe next $n$ lines each contain one integer, representing the ability upgrade number for days $1 \\sim n$.\n\nAfter converting an ability upgrade number to binary, from right to left, each bit indicates whether the corresponding ability increased once that day.", "outputFormat": "Output a single integer, the maximum length of a balanced period.", "hint": "Constraints  \n- For $50\\%$ of the testdata, $1 \\le n \\le 1000$.  \n- For $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $1 \\le m \\le 30$.\n\nSample Explanation\n\nThe abilities improved each day are as follows:\n\n| Day | Abilities improved |\n| :-----------: | :-----------: |\n| $1$ | $1, 2, 3$ |\n| $2$ | $2, 3$ |\n| $3$ | $1, 2, 3$ |\n| $4$ | $2$ |\n| $5$ | $1$ |\n| $6$ | $3$ |\n| $7$ | $2$ |\n\nDays $3$ through $6$ form the longest balanced period because, in those four days, each ability increased exactly $2$ times.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO07MAR] Gold Balanced Lineup G", "background": "", "description": "神仙 $\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ 在许多方面都有着很强的能力。具体的说，他总共有 $m$ 种能力，并将这些能力编号为 $1 \\sim m$。  \n\n他的能力是一天一天地提升的，每天都会有一些能力得到一次提升，她对每天的能力提升都用一个数字表示，称之为能力提升数字，比如数字 $13$，转化为二进制为 $1101$，并且从右往左看，表示他的编号为 $1,3,4$ 的能力分别得到了一次提升。  \n\n$\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ 把每天表示能力提升的数字的记了下来，如果在连续的一段时间内，她的每项能力都提升了相同的次数，她就会称这段时间为一个均衡时期，比如在连续 $5$ 天内，她的每种能力都提升了 $4$ 次，那么这就是一个长度为 $5$ 的均衡时期。\n\n于是，问题来了，给出 $\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ $n$ 天的能力提升数字，请求出均衡时期的最大长度。\n", "inputFormat": "第一行有两个整数 $n,m$，表示有 $n$ 天，$m$ 种能力。　　\n\n接下来有 $n$ 行，每行有一个整数，分别表示第 $1\\sim n$ 天的能力提升数字。  \n\n能力提升数字转化为二进制后，从右到左的每一位表示对应的能力是否在当天得到了一次提升。\n\n\n", "outputFormat": "输出只有一个整数，表示长度最大的均衡时期的长度。\n", "hint": "【数据范围】    \n对于 $50\\%$ 的数据，$1\\le n \\le 1000$。  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$1\\le m \\le 30$。\n\n【样例解释】\n\n每天被提升的能力种类分别为：\n\n| 天数 | 提升的能力 |\n| :-----------: | :-----------: |\n| $1$ | $1,2,3$ |\n| $2$ | $2,3$ |\n| $3$ | $1,2,3$ |\n| $4$ | $2$ |\n| $5$ | $1$ |\n| $6$ | $3$ |\n| $7$ | $2$ |\n\n第三天到第六天为长度最长的均衡时期，因为这四天每种能力分别提升了 $2$ 次。\n", "locale": "zh-CN"}}}
{"pid": "P1361", "type": "P", "difficulty": 6, "samples": [["3\n4 2 1\n2 3 2\n1\n2 3 2 1 2", "11"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "网络流", "最小割"], "title": "小M的作物", "background": "", "description": "小 M 在 MC 里开辟了两块巨大的耕地 $A$ 和 $B$（你可以认为容量是无穷），现在，小 P 有 $n$ 种作物的种子，每种作物的种子有 $1$ 个（就是可以种一棵作物），编号为 $1$ 到 $n$。\n\n现在，第 $i$ 种作物种植在 $A$ 中种植可以获得 $a_i$ 的收益，在 $B$ 中种植可以获得 $b_i$ 的收益，而且，现在还有这么一种神奇的现象，就是某些作物共同种在一块耕地中可以获得额外的收益，小 M 找到了规则中共有 $m$ 种作物组合，第 $i$ 个组合中的作物共同种在 $A$ 中可以获得 $c_{1,i}$ 的额外收益，共同种在 $B$ 中可以获得 $c_{2,i}$ 的额外收益。\n\n小 M 很快的算出了种植的最大收益，但是他想要考考你，你能回答他这个问题么？", "inputFormat": "第一行一个整数 $n$，表示作物种数。\n\n第二行 $n$ 个整数，表示 $a_i$。\n\n第三行 $n$ 个整数，表示 $b_i$。\n\n第四行一个整数 $m$，表示组合种数。\n\n接下来 $m$ 行中，第 $i$ 行第一个整数 $k_i$，表示第 $i$ 个作物组合中的作物种数，接下来两个整数 $c_{1,i},c_{2,i}$，然后 $k_i$ 个整数，表示该组合中的作物编号。", "outputFormat": "只有一行，包括一个整数，表示最大收益。", "hint": "### 样例解释\n\n $A$ 耕地种作物 $1,2$，$B$ 耕地种作物 $3$，收益： $4+2+3+2=11$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1 \\le k < n \\le 10^3$，$1 \\le m \\le 10^3$。题目当中出现的所有权值均为不大于 $1000$ 的非负整数。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao M's Crops", "background": "", "description": "Xiao M opened two huge farmlands $A$ and $B$ in MC (you can assume their capacity is infinite). Now, Xiao P has seeds of $n$ crop types, exactly $1$ seed for each type (i.e., you can plant at most one plant of each type), numbered from $1$ to $n$.\n\nFor the $i$-th crop, planting it in $A$ yields a profit of $a_i$, and planting it in $B$ yields a profit of $b_i$. There is also a special phenomenon: certain sets of crops planted together on the same field yield an extra profit. Xiao M found $m$ such crop combinations in total. For the $i$-th combination, if all its crops are planted together in $A$, you gain an extra $c_{1,i}$ profit; if they are planted together in $B$, you gain an extra $c_{2,i}$ profit.\n\nXiao M quickly computed the maximum profit, but he wants to test you. Can you answer this question?", "inputFormat": "The first line contains an integer $n$, the number of crop types.\n\nThe second line contains $n$ integers, representing $a_i$.\n\nThe third line contains $n$ integers, representing $b_i$.\n\nThe fourth line contains an integer $m$, the number of combinations.\n\nEach of the next $m$ lines describes one combination: on the $i$-th line, the first integer $k_i$ is the number of crops in the $i$-th combination, followed by two integers $c_{1,i}, c_{2,i}$, then $k_i$ integers indicating the indices of the crops in this combination.", "outputFormat": "Output a single line containing one integer, the maximum profit.", "hint": "Sample Explanation:\n\nPlant crops $1, 2$ in field $A$, and crop $3$ in field $B$. Profit: $4+2+3+2=11$.\n\nConstraints:\n\nFor $100\\%$ of the testdata, $1 \\le k_i < n \\le 10^3$, $1 \\le m \\le 10^3$. All values that appear in the problem are non-negative integers not exceeding $1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小M的作物", "background": "", "description": "小 M 在 MC 里开辟了两块巨大的耕地 $A$ 和 $B$（你可以认为容量是无穷），现在，小 P 有 $n$ 种作物的种子，每种作物的种子有 $1$ 个（就是可以种一棵作物），编号为 $1$ 到 $n$。\n\n现在，第 $i$ 种作物种植在 $A$ 中种植可以获得 $a_i$ 的收益，在 $B$ 中种植可以获得 $b_i$ 的收益，而且，现在还有这么一种神奇的现象，就是某些作物共同种在一块耕地中可以获得额外的收益，小 M 找到了规则中共有 $m$ 种作物组合，第 $i$ 个组合中的作物共同种在 $A$ 中可以获得 $c_{1,i}$ 的额外收益，共同种在 $B$ 中可以获得 $c_{2,i}$ 的额外收益。\n\n小 M 很快的算出了种植的最大收益，但是他想要考考你，你能回答他这个问题么？", "inputFormat": "第一行一个整数 $n$，表示作物种数。\n\n第二行 $n$ 个整数，表示 $a_i$。\n\n第三行 $n$ 个整数，表示 $b_i$。\n\n第四行一个整数 $m$，表示组合种数。\n\n接下来 $m$ 行中，第 $i$ 行第一个整数 $k_i$，表示第 $i$ 个作物组合中的作物种数，接下来两个整数 $c_{1,i},c_{2,i}$，然后 $k_i$ 个整数，表示该组合中的作物编号。", "outputFormat": "只有一行，包括一个整数，表示最大收益。", "hint": "### 样例解释\n\n $A$ 耕地种作物 $1,2$，$B$ 耕地种作物 $3$，收益： $4+2+3+2=11$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1 \\le k < n \\le 10^3$，$1 \\le m \\le 10^3$。题目当中出现的所有权值均为不大于 $1000$ 的非负整数。", "locale": "zh-CN"}}}
{"pid": "P1362", "type": "P", "difficulty": 3, "samples": [["22 22\n", "1\n"], ["484 484\n", "0"], ["1 58\n", "12"], ["58 484\n", "24"], ["1000000000 1000000000\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "数学"], "title": "兔子数", "background": "", "description": "设 $S(N)$ 表示 $N$ 的各位数字之和，如 $S(484) = 4+8+4 = 16$， $S(22) = 2+2 = 4$。如果一个正整数满足 $S(x \\cdot x) = S(x) \\cdot S(x)$，我们称之为 Rabbit Number。比方说，$22$ 就是一个 Rabbit Number，因为 $S(484) = S(22) \\cdot S(22)$。\n\n现在，给出一个区间 $[L,R]$，求在该区间内的 Rabbit Number 的个数。", "inputFormat": "输入仅一行，为空格隔开的两个数 $L$ 和 $R$。", "outputFormat": "输出仅一行一个整数，表示所求 Rabbit Number 的个数。", "hint": "对于 $100 \\%$ 的数据，$1 \\le L \\le R \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Rabbit Number", "background": "", "description": "Let $S(N)$ denote the sum of the digits of $N$, such as $S(484) = 4+8+4 = 16$, $S(22) = 2+2 = 4$. If a positive integer satisfies $S(x \\cdot x) = S(x) \\cdot S(x)$, we call it a Rabbit Number. For example, $22$ is a Rabbit Number, because $S(484) = S(22) \\cdot S(22)$.\n\nNow, given an interval $[L,R]$, find the number of Rabbit Numbers within this interval.", "inputFormat": "The input consists of a single line with two numbers $L$ and $R$ separated by a space.", "outputFormat": "Output a single line containing one integer, the number of Rabbit Numbers in $[L,R]$.", "hint": "Constraints: For $100 \\%$ of the testdata, $1 \\le L \\le R \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "兔子数", "background": "", "description": "设 $S(N)$ 表示 $N$ 的各位数字之和，如 $S(484) = 4+8+4 = 16$， $S(22) = 2+2 = 4$。如果一个正整数满足 $S(x \\cdot x) = S(x) \\cdot S(x)$，我们称之为 Rabbit Number。比方说，$22$ 就是一个 Rabbit Number，因为 $S(484) = S(22) \\cdot S(22)$。\n\n现在，给出一个区间 $[L,R]$，求在该区间内的 Rabbit Number 的个数。", "inputFormat": "输入仅一行，为空格隔开的两个数 $L$ 和 $R$。", "outputFormat": "输出仅一行一个整数，表示所求 Rabbit Number 的个数。", "hint": "对于 $100 \\%$ 的数据，$1 \\le L \\le R \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1363", "type": "P", "difficulty": 4, "samples": [["5 4\n##.#\n##S#\n#..#\n#.##\n#..#\n5 4\n##.#\n##S#\n#..#\n..#.\n#.##\n", "Yes\nNo\n\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "广度优先搜索 BFS", "深度优先搜索 DFS", "栈"], "title": "幻象迷宫", "background": "（喵星人 LHX 和 WD 同心协力击退了汪星人的入侵，不幸的是，汪星人撤退之前给它们制造了一片幻象迷宫。）\n\nWD：呜呜，肿么办啊……\n\nLHX：momo...我们一定能走出去的！\n\nWD：嗯，+U+U！", "description": "幻象迷宫可以认为是无限大的，不过它由若干个 $N\\times M$ 的矩阵重复组成。矩阵中有的地方是道路，用 $\\verb!.!$ 表示；有的地方是墙，用 $\\verb!#!$ 表示。LHX 和 WD 所在的位置用 $\\verb!S!$ 表示。也就是对于迷宫中的一个点$(x,y)$，如果 $(x \\bmod n,y \\bmod m)$ 是 $\\verb!.!$ 或者 $\\verb!S!$，那么这个地方是道路；如果 $(x \\bmod n,y \\bmod m)$ 是$\\verb!#!$，那么这个地方是墙。LHX 和 WD 可以向上下左右四个方向移动，当然不能移动到墙上。\n\n请你告诉 LHX 和 WD，它们能否走出幻象迷宫（如果它们能走到距离起点无限远处，就认为能走出去）。如果不能的话，LHX 就只好启动城堡的毁灭程序了……当然不到万不得已，他不想这么做。", "inputFormat": "输入包含多组数据。\n\n每组数据的第一行是两个整数 $N,M$。\n\n接下来是一个 $N\\times M$ 的字符矩阵，表示迷宫里 $(0,0)$ 到 $(n-1,m-1)$ 这个矩阵单元。", "outputFormat": "对于每组数据，输出一个字符串，`Yes` 或者 `No`。", "hint": "- 对于 $30\\%$ 的数据，$1\\le N,M\\le 20$；\n- 对于 $50\\%$ 的数据，$1\\le N,M\\le 100$；\n- 对于 $100\\%$ 的数据，$1\\le N,M\\le 1500$，每个测试点不超过 $10$ 组数据。", "locale": "zh-CN", "translations": {"en": {"title": "Illusion Maze", "background": "(The cat-people LHX and WD joined forces to repel the dog-people’s invasion. Unfortunately, before retreating, the dog-people created an illusion maze for them.)\n\nWD: Boo-hoo, what should we do...\n\nLHX: Momo... We can definitely get out!\n\nWD: Mm, +U+U!", "description": "The illusion maze can be regarded as infinite, but it is formed by repeating several $N \\times M$ matrices. In the matrix, some cells are roads, denoted by \\verb!.!, and some cells are walls, denoted by \\verb!#!. The position of LHX and WD is denoted by \\verb!S!. That is, for a point $(x,y)$ in the maze, if $(x \\bmod n,y \\bmod m)$ is \\verb!.! or \\verb!S!, then this location is a road; if $(x \\bmod n,y \\bmod m)$ is \\verb!#!, then this location is a wall. LHX and WD can move in the four directions up, down, left, and right, and of course they cannot move into walls. Here, $n$ and $m$ refer to $N$ and $M$ respectively.\n\nPlease tell LHX and WD whether they can escape from the illusion maze (if they can reach positions at unbounded distance from the starting point, we consider that they can escape). Otherwise, LHX will have to activate the castle’s self-destruction program... but he really does not want to do that unless absolutely necessary.", "inputFormat": "The input contains multiple test cases.\n\nFor each test case, the first line contains two integers $N, M$.\n\nThen follows an $N \\times M$ character matrix, representing the cells from $(0,0)$ to $(n-1,m-1)$.", "outputFormat": "For each test case, output a string, \"Yes\" or \"No\".", "hint": "- For 30% of the testdata, $1 \\le N, M \\le 20$.\n- For 50% of the testdata, $1 \\le N, M \\le 100$.\n- For 100% of the testdata, $1 \\le N, M \\le 1500$, with no more than $10$ test cases per test point.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "幻象迷宫", "background": "（喵星人 LHX 和 WD 同心协力击退了汪星人的入侵，不幸的是，汪星人撤退之前给它们制造了一片幻象迷宫。）\n\nWD：呜呜，肿么办啊……\n\nLHX：momo...我们一定能走出去的！\n\nWD：嗯，+U+U！", "description": "幻象迷宫可以认为是无限大的，不过它由若干个 $N\\times M$ 的矩阵重复组成。矩阵中有的地方是道路，用 $\\verb!.!$ 表示；有的地方是墙，用 $\\verb!#!$ 表示。LHX 和 WD 所在的位置用 $\\verb!S!$ 表示。也就是对于迷宫中的一个点$(x,y)$，如果 $(x \\bmod n,y \\bmod m)$ 是 $\\verb!.!$ 或者 $\\verb!S!$，那么这个地方是道路；如果 $(x \\bmod n,y \\bmod m)$ 是$\\verb!#!$，那么这个地方是墙。LHX 和 WD 可以向上下左右四个方向移动，当然不能移动到墙上。\n\n请你告诉 LHX 和 WD，它们能否走出幻象迷宫（如果它们能走到距离起点无限远处，就认为能走出去）。如果不能的话，LHX 就只好启动城堡的毁灭程序了……当然不到万不得已，他不想这么做。", "inputFormat": "输入包含多组数据。\n\n每组数据的第一行是两个整数 $N,M$。\n\n接下来是一个 $N\\times M$ 的字符矩阵，表示迷宫里 $(0,0)$ 到 $(n-1,m-1)$ 这个矩阵单元。", "outputFormat": "对于每组数据，输出一个字符串，`Yes` 或者 `No`。", "hint": "- 对于 $30\\%$ 的数据，$1\\le N,M\\le 20$；\n- 对于 $50\\%$ 的数据，$1\\le N,M\\le 100$；\n- 对于 $100\\%$ 的数据，$1\\le N,M\\le 1500$，每个测试点不超过 $10$ 组数据。", "locale": "zh-CN"}}}
{"pid": "P1364", "type": "P", "difficulty": 3, "samples": [["5\t\t\t\t\t\t\n13 2 3\n4 0 0\n12 4 5\n20 0 0\n40 0 0\n", "81"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "树形数据结构", "广度优先搜索 BFS", "最短路", "树的重心"], "title": "医院设置", "background": "", "description": "设有一棵二叉树，如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kawht13x.png)\n\n其中，圈中的数字表示结点中居民的人口。圈边上数字表示结点编号，现在要求在某个结点上建立一个医院，使所有居民所走的路程之和为最小，同时约定，相邻接点之间的距离为 $1$。如上图中，若医院建在 $1$ 处，则距离和 $=4+12+2\\times20+2\\times40=136$；若医院建在 $3$ 处，则距离和 $=4\\times2+13+20+40=81$。", "inputFormat": "第一行一个整数 $n$，表示树的结点数。\n\n接下来的 $n$ 行每行描述了一个结点的状况，包含三个整数 $w, u, v$，其中 $w$ 为居民人口数，$u$ 为左链接（为 $0$ 表示无链接），$v$ 为右链接（为 $0$ 表示无链接）。", "outputFormat": "一个整数，表示最小距离和。\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 100$，$0 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Hospital Placement", "background": "", "description": "Given a binary tree as shown:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kawht13x.png)\n\nThe number inside each circle is the population at that node. The number beside each circle is the node index. Choose one node to build a hospital so that the total distance traveled by all residents is minimized. The distance between two adjacent nodes is $1$.\n\nFor example, if the hospital is built at node $1$, the total distance is $4 + 12 + 2 \\times 20 + 2 \\times 40 = 136$. If it is built at node $3$, the total distance is $4 \\times 2 + 13 + 20 + 40 = 81$.", "inputFormat": "The first line contains an integer $n$, the number of nodes in the tree.\n\nEach of the next $n$ lines describes one node with three integers $w, u, v$, where $w$ is the population at the node, $u$ is the left child (with $0$ meaning no child), and $v$ is the right child (with $0$ meaning no child).", "outputFormat": "Output a single integer, the minimum total distance.", "hint": "Constraints\n\nFor 100% of the testdata, it is guaranteed that $1 \\leq n \\leq 100$, $0 \\leq u, v \\leq n$, $1 \\leq w \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "医院设置", "background": "", "description": "设有一棵二叉树，如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kawht13x.png)\n\n其中，圈中的数字表示结点中居民的人口。圈边上数字表示结点编号，现在要求在某个结点上建立一个医院，使所有居民所走的路程之和为最小，同时约定，相邻接点之间的距离为 $1$。如上图中，若医院建在 $1$ 处，则距离和 $=4+12+2\\times20+2\\times40=136$；若医院建在 $3$ 处，则距离和 $=4\\times2+13+20+40=81$。", "inputFormat": "第一行一个整数 $n$，表示树的结点数。\n\n接下来的 $n$ 行每行描述了一个结点的状况，包含三个整数 $w, u, v$，其中 $w$ 为居民人口数，$u$ 为左链接（为 $0$ 表示无链接），$v$ 为右链接（为 $0$ 表示无链接）。", "outputFormat": "一个整数，表示最小距离和。\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 100$，$0 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1365", "type": "P", "difficulty": 4, "samples": [["4\n????", "4.1250"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "期望"], "title": "WJMZBMR打osu! / Easy", "background": "原 维护队列 参见 P1903", "description": "某一天 WJMZBMR 在打 osu，~~但是他太弱了，有些地方完全靠运气:(~~。\n\n我们来简化一下这个游戏的规则\n\n有 $n$ 次点击要做，成功了就是 `o`，失败了就是 `x`，分数是按 combo 计算的，连续 $a$ 个 combo 就有 $a\\times a$ 分，combo 就是极大的连续 `o`。\n\n比如`ooxxxxooooxxx`，分数就是 $2 \\times 2 + 4 \\times 4 = 4 +16=20$。\n\nSevenkplus 闲的慌就看他打了一盘，有些地方跟运气无关要么是 `o` 要么是 `x`，有些地方 `o` 或者 `x` 各有 $50\\%$ 的可能性，用 `?` 号来表示。\n\n比如 `oo?xx` 就是一个可能的输入。\n那么 WJMZBMR 这场 osu 的期望得分是多少呢？\n\n比如 `oo?xx` 的话，`?` 是 `o` 的话就是 `oooxx`（$9$），是x的话就是 `ooxxx`（$4$），期望自然就是 $(4+9)/2 =6.5$ 了。", "inputFormat": "第一行一个整数 $n$（$n\\le3\\times10^5$），表示点击的个数\n\n接下来一个字符串，每个字符都是 `o`，`x`，`?` 中的一个\n", "outputFormat": "一行一个浮点数表示答案\n\n四舍五入到小数点后 $4$ 位\n\n如果害怕精度跪建议用 long double 或者 extended。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "WJMZBMR Plays osu! / Easy", "background": "Original: Maintain Queue, see P1903.", "description": "One day WJMZBMR was playing osu, ~~but he is too weak; some parts rely entirely on luck :(~~.\n\nLet’s simplify the rules of the game.\n\nThere are $n$ clicks to make. A success is `o`, a miss is `x`. The score is computed by combos: a combo of length $a$ is worth $a\\times a$ points. A combo is a maximal consecutive block of `o`.\n\nFor example, for `ooxxxxooooxxx`, the score is $2 \\times 2 + 4 \\times 4 = 4 +16=20$.\n\nSome positions are fixed (either `o` or `x`), and some positions are random with $50\\%$ chance for each, denoted by `?`.\n\nFor example, `oo?xx` is a possible input. What is the expected score of this osu game?\n\nFor `oo?xx`, if `?` is `o`, then it becomes `oooxx` ($9$); if it is `x`, then it becomes `ooxxx` ($4$). The expected value is $(4+9)/2 =6.5$.", "inputFormat": "The first line contains an integer $n$ ($n\\le3\\times10^5$), the number of clicks.\n\nThe next line contains a string, where each character is one of `o`, `x`, `?`.", "outputFormat": "Output a single floating-point number: the answer.\n\nRound to $4$ decimal places.\n\nIf you are worried about precision, it is recommended to use long double or extended.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "WJMZBMR打osu! / Easy", "background": "原 维护队列 参见 P1903", "description": "某一天 WJMZBMR 在打 osu，~~但是他太弱了，有些地方完全靠运气:(~~。\n\n我们来简化一下这个游戏的规则\n\n有 $n$ 次点击要做，成功了就是 `o`，失败了就是 `x`，分数是按 combo 计算的，连续 $a$ 个 combo 就有 $a\\times a$ 分，combo 就是极大的连续 `o`。\n\n比如`ooxxxxooooxxx`，分数就是 $2 \\times 2 + 4 \\times 4 = 4 +16=20$。\n\nSevenkplus 闲的慌就看他打了一盘，有些地方跟运气无关要么是 `o` 要么是 `x`，有些地方 `o` 或者 `x` 各有 $50\\%$ 的可能性，用 `?` 号来表示。\n\n比如 `oo?xx` 就是一个可能的输入。\n那么 WJMZBMR 这场 osu 的期望得分是多少呢？\n\n比如 `oo?xx` 的话，`?` 是 `o` 的话就是 `oooxx`（$9$），是x的话就是 `ooxxx`（$4$），期望自然就是 $(4+9)/2 =6.5$ 了。", "inputFormat": "第一行一个整数 $n$（$n\\le3\\times10^5$），表示点击的个数\n\n接下来一个字符串，每个字符都是 `o`，`x`，`?` 中的一个\n", "outputFormat": "一行一个浮点数表示答案\n\n四舍五入到小数点后 $4$ 位\n\n如果害怕精度跪建议用 long double 或者 extended。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1366", "type": "P", "difficulty": 3, "samples": [["1\n3 5\n1 3 6\n1 3 3 5 5", "3"], ["1\n9 4\n1 2 3 4 5 6 7 8 9\n1 1 4 5", "2"], ["2\n3 5\n1 3 6\n1 3 3 5 5\n9 4\n1 2 3 4 5 6 7 8 9\n1 1 4 5", "3\n2"]], "limits": {"time": [1400], "memory": [131072]}, "tags": ["O2优化", "双指针 two-pointer"], "title": "有序表的合并", "background": "", "description": "给出两个数列 $a, b$，均按不降序排序。其中保证 $a$ 中没有重复的数字。\n\n现在请你求出：$a$ 中每一个数字在 $b$ 中出现了几次？", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n输入的第一行是一个整数，表示数据组数 $T$。接下来按顺序给出每组数据的输入信息：\n\n第一行为两个整数，依次表示 $a$ 数列的长度 $n$ 和 $b$ 数列的长度 $m$。  \n第二行有 $n$ 个整数表示数列 $a$，第 $i$ 个整数表示 $a_i$。  \n第三行有 $m$ 个整数表示数列 $b$，第 $i$ 个整数表示 $b_i$。", "outputFormat": "为了避免输出过大，对于每组数据，请你输出一行一个整数，表示数列 $a$ 的每个数在 $b$ 中出现次数的**按位异或和**。\n\n形式化的，设 $a_i$ 在 $b$ 中出现了 $c_i$ 次，则你需要输出 $c_1 \\bigoplus c_2 \\bigoplus \\dots \\bigoplus c_n$ 的值，其中 $\\bigoplus$ 表示按位异或操作。你可以参考提示来完成计算。", "hint": "### 样例 1 解释\n\n- $a_1 = 1$ 在 $b$ 中出现了 $1$ 次。\n- $a_2 = 3$ 在 $b$ 中出现了 $2$ 次。\n- $a_3 = 6$ 在 $b$ 中出现了 $0$ 次。\n\n故输出为 $1 \\bigoplus 2 = 3$。\n\n### 样例 2 解释\n\n$1, 4, 5$ 分别在 $b$ 中出现了 $2, 1, 1$ 次，故输出为 $2 \\bigoplus 1 \\bigoplus 1 = 2$。\n\n### 数据规模与约定\n\n对于全部的测试点，保证：\n- $1 \\leq T \\leq 10$；\n- $1 \\leq n, m \\leq 10^7$，$\\sum (n + m) \\leq  10^7$；\n- $1 \\leq a_i, b_i < 2^{64}$，且 $a_i < a_{i + 1}$，$b_i \\leq b_{i + 1}$。\n\n其中 $\\sum (n+m)$ 表示单测试点内所有 $n$ 与 $m$ 的和，即输入数列的总长度不超过 $10^7$。\n\n### 提示\n\n- 请注意大量数据读入对程序效率造成的影响，选择合适的读入方式，避免超时。\n- 请采用合适的数据类型存储变量，避免溢出。\n- 如果你不知道什么是按位异或和，可以在你的代码里添加如下的函数：\n\n```cpp\ntemplate <class T>\nT getXorSum(T *begin, T *end) {\n  T ret = 0;\n  for (T *it = begin; it != end; ++it) ret ^= *it;\n  return ret;\n}\n```\n这一函数的作用是计算传入数组（包括 `std::vector`）某一左闭右开区间的按位异或和，返回值类型与传入数组的类型相同，调用方法与 `std::sort` 类似，例如，要求数组 $a$ 的 $a_1 \\sim a_n$ 的按位异或和，则调用 `getXorSum(a + 1, a + 1 + n)`，求 $a_0 \\sim a_{n - 1}$ 的按位异或和，则调用 `getXorSum(a, a + n)`。如果 $a$ 是 `std::vector`，则将上述调用代码里的 `a` 均改为 `a.begin()` 即可。\n", "locale": "zh-CN", "translations": {"en": {"title": "Merging Sorted Sequences", "background": "", "description": "Given two sequences $a, b$, both sorted in non-decreasing order. It is guaranteed that there are no duplicate numbers in $a$.\n\nNow, for each number in $a$, determine how many times it appears in $b$.", "inputFormat": "There are multiple test cases in a single test file.\n\nThe first line contains an integer $T$, the number of test cases. Then, for each test case, the input is given as follows:\n- The first line contains two integers, the lengths of sequences $a$ and $b$, denoted by $n$ and $m$.\n- The second line contains $n$ integers representing sequence $a$, where the $i$-th integer is $a_i$.\n- The third line contains $m$ integers representing sequence $b$, where the $i$-th integer is $b_i$.", "outputFormat": "To avoid excessive output, for each test case, output a single integer on one line: the bitwise XOR sum of the occurrence counts of every number of $a$ in $b$.\n\nFormally, let $a_i$ appear $c_i$ times in $b$. You need to output $c_1 \\bigoplus c_2 \\bigoplus \\dots \\bigoplus c_n$, where $\\bigoplus$ denotes the bitwise XOR operation. You may refer to the Hint to complete the computation.", "hint": "### Explanation of Sample 1\n\n- $a_1 = 1$ appears $1$ time in $b$.\n- $a_2 = 3$ appears $2$ times in $b$.\n- $a_3 = 6$ appears $0$ times in $b$.\n\nTherefore, the output is $1 \\bigoplus 2 = 3$.\n\n### Explanation of Sample 2\n\n$1, 4, 5$ appear $2, 1, 1$ times in $b$, respectively, so the output is $2 \\bigoplus 1 \\bigoplus 1 = 2$.\n\n### Constraints\n\nFor all test files, it is guaranteed that:\n- $1 \\leq T \\leq 10$;\n- $1 \\leq n, m \\leq 10^7$, and $\\sum (n + m) \\leq 10^7$;\n- $1 \\leq a_i, b_i < 2^{64}$, and $a_i < a_{i + 1}$, $b_i \\leq b_{i + 1}$.\n\nHere, $\\sum (n + m)$ denotes the sum of all $n$ and $m$ within a single test file, i.e., the total length of the input sequences does not exceed $10^7$.\n\n### Notes\n\n- Pay attention to the impact of large input on program efficiency. Choose an appropriate input method to avoid timeouts.\n- Use suitable data types to store variables to avoid overflow.\n- If you do not know what a bitwise XOR sum is, you can add the following function to your code:\n\n```cpp\ntemplate <class T>\nT getXorSum(T *begin, T *end) {\n  T ret = 0;\n  for (T *it = begin; it != end; ++it) ret ^= *it;\n  return ret;\n}\n```\nThis function computes the bitwise XOR sum over a half-open interval of the given array (including `std::vector`). The return type matches the type of the input array. The usage is similar to `std::sort`. For example, to compute the bitwise XOR sum of $a_1 \\sim a_n$, call `getXorSum(a + 1, a + 1 + n)`. To compute the bitwise XOR sum of $a_0 \\sim a_{n - 1}$, call `getXorSum(a, a + n)`. If $a$ is a `std::vector`, replace `a` in the calls above with `a.begin()` accordingly.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "有序表的合并", "background": "", "description": "给出两个数列 $a, b$，均按不降序排序。其中保证 $a$ 中没有重复的数字。\n\n现在请你求出：$a$ 中每一个数字在 $b$ 中出现了几次？", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n输入的第一行是一个整数，表示数据组数 $T$。接下来按顺序给出每组数据的输入信息：\n\n第一行为两个整数，依次表示 $a$ 数列的长度 $n$ 和 $b$ 数列的长度 $m$。  \n第二行有 $n$ 个整数表示数列 $a$，第 $i$ 个整数表示 $a_i$。  \n第三行有 $m$ 个整数表示数列 $b$，第 $i$ 个整数表示 $b_i$。", "outputFormat": "为了避免输出过大，对于每组数据，请你输出一行一个整数，表示数列 $a$ 的每个数在 $b$ 中出现次数的**按位异或和**。\n\n形式化的，设 $a_i$ 在 $b$ 中出现了 $c_i$ 次，则你需要输出 $c_1 \\bigoplus c_2 \\bigoplus \\dots \\bigoplus c_n$ 的值，其中 $\\bigoplus$ 表示按位异或操作。你可以参考提示来完成计算。", "hint": "### 样例 1 解释\n\n- $a_1 = 1$ 在 $b$ 中出现了 $1$ 次。\n- $a_2 = 3$ 在 $b$ 中出现了 $2$ 次。\n- $a_3 = 6$ 在 $b$ 中出现了 $0$ 次。\n\n故输出为 $1 \\bigoplus 2 = 3$。\n\n### 样例 2 解释\n\n$1, 4, 5$ 分别在 $b$ 中出现了 $2, 1, 1$ 次，故输出为 $2 \\bigoplus 1 \\bigoplus 1 = 2$。\n\n### 数据规模与约定\n\n对于全部的测试点，保证：\n- $1 \\leq T \\leq 10$；\n- $1 \\leq n, m \\leq 10^7$，$\\sum (n + m) \\leq  10^7$；\n- $1 \\leq a_i, b_i < 2^{64}$，且 $a_i < a_{i + 1}$，$b_i \\leq b_{i + 1}$。\n\n其中 $\\sum (n+m)$ 表示单测试点内所有 $n$ 与 $m$ 的和，即输入数列的总长度不超过 $10^7$。\n\n### 提示\n\n- 请注意大量数据读入对程序效率造成的影响，选择合适的读入方式，避免超时。\n- 请采用合适的数据类型存储变量，避免溢出。\n- 如果你不知道什么是按位异或和，可以在你的代码里添加如下的函数：\n\n```cpp\ntemplate <class T>\nT getXorSum(T *begin, T *end) {\n  T ret = 0;\n  for (T *it = begin; it != end; ++it) ret ^= *it;\n  return ret;\n}\n```\n这一函数的作用是计算传入数组（包括 `std::vector`）某一左闭右开区间的按位异或和，返回值类型与传入数组的类型相同，调用方法与 `std::sort` 类似，例如，要求数组 $a$ 的 $a_1 \\sim a_n$ 的按位异或和，则调用 `getXorSum(a + 1, a + 1 + n)`，求 $a_0 \\sim a_{n - 1}$ 的按位异或和，则调用 `getXorSum(a, a + n)`。如果 $a$ 是 `std::vector`，则将上述调用代码里的 `a` 均改为 `a.begin()` 即可。\n", "locale": "zh-CN"}}}
{"pid": "P1367", "type": "P", "difficulty": 3, "samples": [["4 1\n1 1\n5 1\n3 -1 \n10 1\n", "2 0\n6 1\n2 0\n11 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "蚂蚁", "background": "", "description": "有许多蚂蚁在一根无限长的木棍上，每一只蚂蚁都有一个初始位置和初始朝向（任意两只蚂蚁的初始位置不同）。蚂蚁们以每秒一个单位的速度向前移动，当两只蚂蚁相遇时，它们会掉头（掉头时间忽略不计）。现给出每只蚂蚁的初始位置和初始朝向，请你计算出它们在 $t$ 秒后的位置和朝向。\n", "inputFormat": "第一行，两个空格隔开的整数 $n,t$（代表蚂蚁数 $n$ 和时间 $t$）。\n\n第 $2\\sim n+1$ 行每行两个整数，第 $i+1$ 行代表第 $i$ 只蚂蚁的初始位置 $a_i$ 及初始朝向 $b_i$（$b_i=1$ 时蚂蚁朝右，$b_i=-1$ 时蚂蚁朝左）。\n", "outputFormat": "共 $n$ 行，每行两个整数，第 $i$ 行代表 $t$ 秒后第 $i$ 只蚂蚁的位置及朝向（$-1$ 表示朝左，$1$ 表示朝右，$0$ 表示正在转向中）。", "hint": "### 数据范围及约定\n\n- 对于 $40\\%$ 的数据，$1\\le n\\le 100$；\n- 对于 $80\\%$ 的数据，$1\\le n\\le 10^4$，$0\\le t\\le 1000$；\n- 对于 $100\\%$ 的数据，$n\\le 10^5$，$0\\le t\\le 10^5$，$|a_i|\\le 10^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Ants", "background": "", "description": "There are many ants on an infinitely long stick. Each ant has an initial position and an initial direction (no two ants share the same initial position). The ants move forward in their current direction at a speed of 1 unit per second. When two ants meet, they turn around (the turning time is negligible). Given the initial position and initial direction of each ant, please compute their positions and directions after $t$ seconds.", "inputFormat": "The first line contains two space-separated integers $n, t$ (the number of ants $n$ and the time $t$).\n\nLines $2$ to $n+1$ each contain two integers. Line $i+1$ gives the initial position $a_i$ and initial direction $b_i$ of the $i$-th ant ($b_i = 1$ means facing right, $b_i = -1$ means facing left).", "outputFormat": "Output $n$ lines, each containing two integers. The $i$-th line represents the position and direction of the $i$-th ant after $t$ seconds ($-1$ means facing left, $1$ means facing right, $0$ means currently turning).", "hint": "### Constraints and Conventions\n\n- For $40\\%$ of the testdata, $1 \\le n \\le 100$.\n- For $80\\%$ of the testdata, $1 \\le n \\le 10^4$, $0 \\le t \\le 1000$.\n- For $100\\%$ of the testdata, $n \\le 10^5$, $0 \\le t \\le 10^5$, $|a_i| \\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "蚂蚁", "background": "", "description": "有许多蚂蚁在一根无限长的木棍上，每一只蚂蚁都有一个初始位置和初始朝向（任意两只蚂蚁的初始位置不同）。蚂蚁们以每秒一个单位的速度向前移动，当两只蚂蚁相遇时，它们会掉头（掉头时间忽略不计）。现给出每只蚂蚁的初始位置和初始朝向，请你计算出它们在 $t$ 秒后的位置和朝向。\n", "inputFormat": "第一行，两个空格隔开的整数 $n,t$（代表蚂蚁数 $n$ 和时间 $t$）。\n\n第 $2\\sim n+1$ 行每行两个整数，第 $i+1$ 行代表第 $i$ 只蚂蚁的初始位置 $a_i$ 及初始朝向 $b_i$（$b_i=1$ 时蚂蚁朝右，$b_i=-1$ 时蚂蚁朝左）。\n", "outputFormat": "共 $n$ 行，每行两个整数，第 $i$ 行代表 $t$ 秒后第 $i$ 只蚂蚁的位置及朝向（$-1$ 表示朝左，$1$ 表示朝右，$0$ 表示正在转向中）。", "hint": "### 数据范围及约定\n\n- 对于 $40\\%$ 的数据，$1\\le n\\le 100$；\n- 对于 $80\\%$ 的数据，$1\\le n\\le 10^4$，$0\\le t\\le 1000$；\n- 对于 $100\\%$ 的数据，$n\\le 10^5$，$0\\le t\\le 10^5$，$|a_i|\\le 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P1368", "type": "P", "difficulty": 5, "samples": [["10\n10 9 8 7 6 5 4 3 2 1\n", "1 10 9 8 7 6 5 4 3 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "后缀自动机 SAM"], "title": "工艺", "background": "新模板题：[P13270 【模板】最小表示法](https://www.luogu.com.cn/problem/P13270)。", "description": "小敏和小燕是一对好朋友。\n\n他们正在玩一种神奇的游戏，叫 Minecraft。\n\n他们现在要做一个由方块构成的长条工艺品。但是方块现在是乱的，而且由于机器的要求，他们只能做到把这个工艺品最左边的方块放到最右边。\n\n他们想，在仅这一个操作下，最漂亮的工艺品能多漂亮。\n\n两个工艺品美观的比较方法是，从头开始比较，如果第 $i$ 个位置上方块不一样那么谁的瑕疵度小，那么谁就更漂亮，如果一样那么继续比较第 $i+1$ 个方块。如果全都一样，那么这两个工艺品就一样漂亮。", "inputFormat": "第一行一个整数 $n$，代表方块的数目。\n\n第二行 $n$ 个整数，每个整数按从左到右的顺序输出方块瑕疵度的值，保证其小于 $30$。", "outputFormat": "一行 $n$ 个整数，代表最美观工艺品从左到右瑕疵度的值。", "hint": "- 对于 $20\\%$ 的数据，$n\\le 1000$；\n- 对于 $40\\%$ 的数据，$n\\le 10^4$；\n- 对于 $100\\%$ 的数据，$n\\le 3\\times 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Craft", "background": "New template problem: [P13270 [Template] Minimal Representation](https://www.luogu.com.cn/problem/P13270).", "description": "Xiaomin and Xiaoyan are good friends.\n\nThey are playing a magical game called Minecraft.\n\nThey are going to make a long strip craftwork composed of blocks. However, the blocks are currently in disorder, and due to the machine’s limitation, they can only move the leftmost block of the craftwork to the right end.\n\nThey want to know, using only this single operation, how pretty the craftwork can become.\n\nTo compare the beauty of two craftworks, compare them from the beginning. If at position $i$ the blocks differ, the one with the smaller defect score is prettier; if they are the same, continue to compare the block at position $i+1$. If all positions are the same, then the two craftworks are equally pretty.", "inputFormat": "The first line contains an integer $n$, the number of blocks.\n\nThe second line contains $n$ integers, which are the defect scores of the blocks from left to right. Each score is less than $30$.", "outputFormat": "Output one line with $n$ integers, which are the defect scores from left to right of the prettiest craftwork.", "hint": "- For $20\\%$ of the testdata, $n \\le 1000$.\n- For $40\\%$ of the testdata, $n \\le 10^4$.\n- For $100\\%$ of the testdata, $n \\le 3\\times 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "工艺", "background": "新模板题：[P13270 【模板】最小表示法](https://www.luogu.com.cn/problem/P13270)。", "description": "小敏和小燕是一对好朋友。\n\n他们正在玩一种神奇的游戏，叫 Minecraft。\n\n他们现在要做一个由方块构成的长条工艺品。但是方块现在是乱的，而且由于机器的要求，他们只能做到把这个工艺品最左边的方块放到最右边。\n\n他们想，在仅这一个操作下，最漂亮的工艺品能多漂亮。\n\n两个工艺品美观的比较方法是，从头开始比较，如果第 $i$ 个位置上方块不一样那么谁的瑕疵度小，那么谁就更漂亮，如果一样那么继续比较第 $i+1$ 个方块。如果全都一样，那么这两个工艺品就一样漂亮。", "inputFormat": "第一行一个整数 $n$，代表方块的数目。\n\n第二行 $n$ 个整数，每个整数按从左到右的顺序输出方块瑕疵度的值，保证其小于 $30$。", "outputFormat": "一行 $n$ 个整数，代表最美观工艺品从左到右瑕疵度的值。", "hint": "- 对于 $20\\%$ 的数据，$n\\le 1000$；\n- 对于 $40\\%$ 的数据，$n\\le 10^4$；\n- 对于 $100\\%$ 的数据，$n\\le 3\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1369", "type": "P", "difficulty": 3, "samples": [["10\r\n2 3\r\n9 2\r\n7 4\r\n3 4\r\n5 7\r\n1 5\r\n10 4\r\n10 6\r\n11 4\r\n4 6\r\n", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心"], "title": "矩形", "background": "", "description": "给出平面上的 $n$ 个点，请找出一个边与坐标轴平行的矩形，使得它的边界上有尽量多的点。\n", "inputFormat": "第一行一个整数 $n$，为平面内点的个数。\n\n第 $2\\sim n+1$ 行每行两个整数，为点的横、纵坐标。\n", "outputFormat": "只有一个数，为所取矩形边界上能包含尽量多的点的个数。\n", "hint": "### 数据范围及约定\n\n- 对于 $40\\%$ 的数据，$1\\le n\\le 30$；\n- 对于 $100\\%$ 的数据，$1\\le n\\le 300$，各点的横、纵坐标在 $[1,100]$ 范围内。\n", "locale": "zh-CN", "translations": {"en": {"title": "Rectangle", "background": "", "description": "Given $n$ points on the plane, find an axis-aligned rectangle whose boundary contains as many points as possible.", "inputFormat": "The first line contains an integer $n$, the number of points in the plane.\nEach of lines $2\\sim n+1$ contains two integers, the $x$- and $y$-coordinates of a point.", "outputFormat": "Output a single integer: the maximum number of points that can lie on the boundary of the chosen rectangle.", "hint": "Constraints and Notes\n- For $40\\%$ of the data, $1 \\le n \\le 30$.\n- For $100\\%$ of the data, $1 \\le n \\le 300$, and each coordinate lies in the range $[1,100]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "矩形", "background": "", "description": "给出平面上的 $n$ 个点，请找出一个边与坐标轴平行的矩形，使得它的边界上有尽量多的点。\n", "inputFormat": "第一行一个整数 $n$，为平面内点的个数。\n\n第 $2\\sim n+1$ 行每行两个整数，为点的横、纵坐标。\n", "outputFormat": "只有一个数，为所取矩形边界上能包含尽量多的点的个数。\n", "hint": "### 数据范围及约定\n\n- 对于 $40\\%$ 的数据，$1\\le n\\le 30$；\n- 对于 $100\\%$ 的数据，$1\\le n\\le 300$，各点的横、纵坐标在 $[1,100]$ 范围内。\n", "locale": "zh-CN"}}}
{"pid": "P1370", "type": "P", "difficulty": 5, "samples": [["8\r\n1 9 9 8 0 3 2 1", "814"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "洛谷原创", "生成树", "洛谷月赛"], "title": "Charlie 的云笔记序列", "background": "Charlie 是 oiinhand 的忠实粉丝。他有使用 oih 云笔记记录自己的题解的习惯。只有一点一滴的积累才能留下自己的足迹。\n\noih 云笔记有什么特点吗？\n\noih 的站长 soha 表示，目前 oih2 的云笔记功能比较简陋，但是正在开发 oih3 中的新版云笔记功能将是世界上最适合 oier 的储藏笔记的工具。\n\n首先，新版云笔记支持 markdown 功能，并且可以实时预览，插入公式图片都不是问题。实时自动保存，不用担心突然断电啊文档消失，而且不管在哪里都可以看！\n\n其次，可以一键生成题解模板摘要，不用各种复制粘贴了，超省事！\n\n再者，云笔记可以给其他同学分享自己的笔记，共同进步。写完了笔记，还可以一键向洛谷投稿呢！\n\n然而 Charlie 最喜欢的功能是 oih 的题目收藏。现在他收藏了一系列题目，但是觉得不过瘾所以正在玩弄这个功能。", "description": "某天，Charlie 将收藏的题目抽象为一个序列。$a=[a_1,a_2,a_3,\\cdots,a_{n-1},a_n]$。\n\n设 $a[l:r]$ 表示序列 ${a_i}$ 第 $l$ 个数到第 $r$ 个数之间的子串，其中 $1 \\le l \\le r \\le n$。形式化地，$a[l:r]={a_l,a_{l+1},a_{l+2},\\cdots,a_{r-1},a_r}$。比如说，$a=[9,8,0,3,2,1]$，那么 $a[2:5]=[8,0,3,2]$。\n\nCharlie 对序列 $[a_i]$ 定义了一个函数 $F(l,r)$，表示序列 $a[l:r]$ 的本质不同的子序列个数。特别地，一个空序列也被当作一个本质不同的子序列。\n\n序列 $a[l:r]$ 的子序列定义为 $[a_{i_1},a_{i_2},a_{i_3},\\cdots,a_{i_{k-1}},a_{i_k}]$，其中 $l \\le i_1<i_2<i_3<\\cdots<i_{k-1}<i_k \\le r$。比如说，$a=[9,8,0,3,2,1]$，那么 $[8,3,2]$ 是 $a[2:5]=[8,0,3,2]$ 的一个子序列。\n\n长度为 $n$ 的序列 $a$ 和长度为 $m$ 的序列 $b$ 被称作本质不同的，当且仅当 $n\\neq m$，或存在 $i$，使得 $a_i \\neq b_i$。反之，则称这 $2$ 个序列是本质相同的。比如说，$[9,8]$ 和 $[9,7]$ 是本质不同的，$[9,8]$ 和 $[9,8,7]$ 也是本质不同的，而 $[9,8]$ 和 $[9,8]$ 是本质相同的。\n\n举个例子，设 $a=[1,9,9,8,0,3,2,1]$，那么 $F(1,3)=6$，因为 $a[1:3]=[1,9,9]$ 有 $6$ 个子序列：$[],[1],[9],[1,9],[9,9],[1,9,9]$。\n\n现在 Charlie 想知道，$\\sum _{1\\le l\\le r\\le n} F(l,r)$ 的值是多少。由于这个数可能很大，请输出它对 $998244353$（$7\\times 17\\times 2^{23}+1$，一个质数）取模后的结果。", "inputFormat": "第一行一个整数 $n$，表示序列 $a$ 的长度。\n\n第二行包括 $n$ 个整数，表示 $a_1,a_2,a_3,\\cdots a_{n-1},a_n$。", "outputFormat": "一行，一个整数表示 $\\sum _{1\\le l\\le r\\le n} F(l,r)$ 的值对 $998244353$ 取模后的结果。", "hint": "- 对于 $10\\%$ 的数据，$1\\le n \\le 10$；\n- 对于 $30\\%$ 的数据，$1 \\le n \\le 100$；\n- 对于 $50\\%$ 的数据，$1\\le n \\le 1000$，$0 \\le a_i \\le 10^5$；\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$|a_i| \\le 10^9$。\n\noiinhand 3.0 正在开发中。\n\n这将是 oiers 都需要的工具，它不仅集合了全网所有大型 OJ 的资源（题目、题解）而且针对用户还可以将自己在其他 OJ 评测过的代码储存下来，并且有超贴心的云笔记功能，帮助大家最大效率练习。\n\nsoha 借此地征求意见，有奖哦！<http://www.wenjuan.com/s/M7fqIv/>", "locale": "zh-CN", "translations": {"en": {"title": "Charlie's Cloud Notes Sequence", "background": "Charlie is a loyal fan of oiinhand. He has the habit of using oih cloud notes to record his problem solutions. Only bit-by-bit accumulation can leave his own footprints.\n\nDoes oih cloud notes have any special features?\n\noih’s admin soha says that the current cloud notes in oih2 are relatively simple, but the new cloud notes under development for oih3 will be the best tool in the world for OIers to store their notes.\n\nFirst, the new cloud notes support Markdown with real-time preview; inserting formulas and images is not a problem. It saves automatically in real time, so you do not need to worry about sudden power outages or document loss, and you can view it anywhere!\n\nSecond, it can generate a problem-solution template summary with one click, so you no longer need to copy and paste. Super convenient!\n\nMoreover, cloud notes can be shared with other classmates for mutual improvement. After finishing a note, you can submit it to Luogu with one click!\n\nHowever, Charlie’s favorite feature is oih’s problem collection. He has now collected a series of problems, but he feels it is not enough, so he is playing with this feature.", "description": "One day, Charlie abstracts his collected problems into a sequence. $a = [a_1, a_2, a_3, \\cdots, a_{n-1}, a_n]$.\n\nLet $a[l:r]$ denote the subarray of the sequence $\\{a_i\\}$ from the $l$-th element to the $r$-th element, where $1 \\le l \\le r \\le n$. Formally, $a[l:r] = \\{a_l, a_{l+1}, a_{l+2}, \\cdots, a_{r-1}, a_r\\}$. For example, if $a = [9, 8, 0, 3, 2, 1]$, then $a[2:5] = [8, 0, 3, 2]$.\n\nCharlie defines a function $F(l, r)$ on the sequence $[a_i]$, which denotes the number of essentially different subsequences of $a[l:r]$. In particular, the empty sequence is also counted as one essentially different subsequence.\n\nA subsequence of $a[l:r]$ is defined as $[a_{i_1}, a_{i_2}, a_{i_3}, \\cdots, a_{i_{k-1}}, a_{i_k}]$, where $l \\le i_1 < i_2 < i_3 < \\cdots < i_{k-1} < i_k \\le r$. For example, if $a = [9, 8, 0, 3, 2, 1]$, then $[8, 3, 2]$ is a subsequence of $a[2:5] = [8, 0, 3, 2]$.\n\nA sequence $a$ of length $n$ and a sequence $b$ of length $m$ are called essentially different if and only if $n \\ne m$, or there exists $i$ such that $a_i \\ne b_i$. Otherwise, the two sequences are called essentially the same. For example, $[9, 8]$ and $[9, 7]$ are essentially different; $[9, 8]$ and $[9, 8, 7]$ are also essentially different; while $[9, 8]$ and $[9, 8]$ are essentially the same.\n\nFor example, let $a = [1, 9, 9, 8, 0, 3, 2, 1]$. Then $F(1, 3) = 6$, because $a[1:3] = [1, 9, 9]$ has $6$ subsequences: $[], [1], [9], [1, 9], [9, 9], [1, 9, 9]$.\n\nNow Charlie wants to know the value of $\\sum_{1 \\le l \\le r \\le n} F(l, r)$. Since this number may be large, please output it modulo $998244353$ ($7 \\times 17 \\times 2^{23} + 1$, a prime).", "inputFormat": "The first line contains an integer $n$, denoting the length of the sequence $a$.\n\nThe second line contains $n$ integers, denoting $a_1, a_2, a_3, \\cdots, a_{n-1}, a_n$.", "outputFormat": "One line containing a single integer: the value of $\\sum_{1 \\le l \\le r \\le n} F(l, r)$ modulo $998244353$.", "hint": "- For $10\\%$ of the testdata, $1 \\le n \\le 10$.\n- For $30\\%$ of the testdata, $1 \\le n \\le 100$.\n- For $50\\%$ of the testdata, $1 \\le n \\le 1000$, $0 \\le a_i \\le 10^5$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $|a_i| \\le 10^9$.\n\noiinhand 3.0 is under development.\n\nThis will be a must-have tool for OIers. It not only aggregates resources (problems, solutions) from all major OJs across the web, but also allows users to store code they have been judged on other OJs, and it has a very considerate cloud notes feature to help everyone practice with maximum efficiency.\n\nsoha is soliciting feedback here, with rewards! <http://www.wenjuan.com/s/M7fqIv/>\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Charlie 的云笔记序列", "background": "Charlie 是 oiinhand 的忠实粉丝。他有使用 oih 云笔记记录自己的题解的习惯。只有一点一滴的积累才能留下自己的足迹。\n\noih 云笔记有什么特点吗？\n\noih 的站长 soha 表示，目前 oih2 的云笔记功能比较简陋，但是正在开发 oih3 中的新版云笔记功能将是世界上最适合 oier 的储藏笔记的工具。\n\n首先，新版云笔记支持 markdown 功能，并且可以实时预览，插入公式图片都不是问题。实时自动保存，不用担心突然断电啊文档消失，而且不管在哪里都可以看！\n\n其次，可以一键生成题解模板摘要，不用各种复制粘贴了，超省事！\n\n再者，云笔记可以给其他同学分享自己的笔记，共同进步。写完了笔记，还可以一键向洛谷投稿呢！\n\n然而 Charlie 最喜欢的功能是 oih 的题目收藏。现在他收藏了一系列题目，但是觉得不过瘾所以正在玩弄这个功能。", "description": "某天，Charlie 将收藏的题目抽象为一个序列。$a=[a_1,a_2,a_3,\\cdots,a_{n-1},a_n]$。\n\n设 $a[l:r]$ 表示序列 ${a_i}$ 第 $l$ 个数到第 $r$ 个数之间的子串，其中 $1 \\le l \\le r \\le n$。形式化地，$a[l:r]={a_l,a_{l+1},a_{l+2},\\cdots,a_{r-1},a_r}$。比如说，$a=[9,8,0,3,2,1]$，那么 $a[2:5]=[8,0,3,2]$。\n\nCharlie 对序列 $[a_i]$ 定义了一个函数 $F(l,r)$，表示序列 $a[l:r]$ 的本质不同的子序列个数。特别地，一个空序列也被当作一个本质不同的子序列。\n\n序列 $a[l:r]$ 的子序列定义为 $[a_{i_1},a_{i_2},a_{i_3},\\cdots,a_{i_{k-1}},a_{i_k}]$，其中 $l \\le i_1<i_2<i_3<\\cdots<i_{k-1}<i_k \\le r$。比如说，$a=[9,8,0,3,2,1]$，那么 $[8,3,2]$ 是 $a[2:5]=[8,0,3,2]$ 的一个子序列。\n\n长度为 $n$ 的序列 $a$ 和长度为 $m$ 的序列 $b$ 被称作本质不同的，当且仅当 $n\\neq m$，或存在 $i$，使得 $a_i \\neq b_i$。反之，则称这 $2$ 个序列是本质相同的。比如说，$[9,8]$ 和 $[9,7]$ 是本质不同的，$[9,8]$ 和 $[9,8,7]$ 也是本质不同的，而 $[9,8]$ 和 $[9,8]$ 是本质相同的。\n\n举个例子，设 $a=[1,9,9,8,0,3,2,1]$，那么 $F(1,3)=6$，因为 $a[1:3]=[1,9,9]$ 有 $6$ 个子序列：$[],[1],[9],[1,9],[9,9],[1,9,9]$。\n\n现在 Charlie 想知道，$\\sum _{1\\le l\\le r\\le n} F(l,r)$ 的值是多少。由于这个数可能很大，请输出它对 $998244353$（$7\\times 17\\times 2^{23}+1$，一个质数）取模后的结果。", "inputFormat": "第一行一个整数 $n$，表示序列 $a$ 的长度。\n\n第二行包括 $n$ 个整数，表示 $a_1,a_2,a_3,\\cdots a_{n-1},a_n$。", "outputFormat": "一行，一个整数表示 $\\sum _{1\\le l\\le r\\le n} F(l,r)$ 的值对 $998244353$ 取模后的结果。", "hint": "- 对于 $10\\%$ 的数据，$1\\le n \\le 10$；\n- 对于 $30\\%$ 的数据，$1 \\le n \\le 100$；\n- 对于 $50\\%$ 的数据，$1\\le n \\le 1000$，$0 \\le a_i \\le 10^5$；\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$|a_i| \\le 10^9$。\n\noiinhand 3.0 正在开发中。\n\n这将是 oiers 都需要的工具，它不仅集合了全网所有大型 OJ 的资源（题目、题解）而且针对用户还可以将自己在其他 OJ 评测过的代码储存下来，并且有超贴心的云笔记功能，帮助大家最大效率练习。\n\nsoha 借此地征求意见，有奖哦！<http://www.wenjuan.com/s/M7fqIv/>", "locale": "zh-CN"}}}
{"pid": "P1371", "type": "P", "difficulty": 3, "samples": [["5\nNOIOI", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "洛谷原创", "洛谷月赛"], "title": "NOI元丹", "background": null, "description": "小A打算开始炼 $\\texttt{NOI}$ 元丹（什么鬼），据说吃了可以提高 $\\texttt{NOI}$ 时的成绩。\n\n是这么炼的。元丹有三种元核，`N`、`O`、`I`。现有很多个这样原核，按顺序排成一行。炼元丹时，从左往右分别挑出 `N`、`O`、`I` 三个原核吞下。\n\n现在他关心，有几种服用方式……且慢！\n\n他觉得服用方式太少，以至于不能成仙。所以他可以通过某个途径，得到 `N`、`O`、`I` 的三种原核中的**任意一个**，至于哪一种由他决定。然后他将获得这个原核的插入到这一排原核中的任意位置（包括最前最后）。\n\n现在你要知道，新的元核序列中能有多少种 `N`、`O`、`I` 的取出方式。子序列的字母并不要求连续。", "inputFormat": "第一行，一个整数 $N$，表示字符串的长度。\n\n第二行，一行字符串，里面只有只有 `N`、`O`、`I` 三种字母。", "outputFormat": "表示出最多可以提炼出来的 $\\texttt{NOI}$ 元丹的方案种数。", "hint": "样例解释：\n\n他可以获取一个 `N` 元核，加到最前面。\n\n```plain\nNNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI\n~ ~~   | ~ ~  ~ | ~   ~~ |  ~~~   |  ~~  ~ |  ~  ~~\n```\n对于 $30\\%$ 的数据 $N \\le 200$。\n\n对于 $50\\%$ 的数据 $N \\le 2000$。\n\n对于 $100\\%$ 的数据 $3 \\le N \\le 10 ^ 5$。", "locale": "zh-CN", "translations": {"en": {"title": "NOI Yuandan", "background": "", "description": "Xiao A plans to start refining the $\\texttt{NOI}$ \"Yuandan\" (whatever that is). It is said that taking it can improve one’s performance in $\\texttt{NOI}$.\n\nHere is how it is refined. The Yuandan has three kinds of cores: `N`, `O`, and `I`. There are many such cores arranged in a line in order. During refinement, he picks, from left to right, an `N`, then an `O`, then an `I`, and swallows them.\n\nNow he wonders how many ways there are to take it... Hold on!\n\nHe feels the number of ways is too few to become immortal. So he can, by some means, obtain any one of the three types of cores `N`, `O`, `I` (he may choose which type). Then he inserts this acquired core at any position in the line (including before the first and after the last).\n\nYou need to find, in the new sequence of cores, how many ways there are to take out `N`, `O`, `I`. The letters in the substring do not need to be consecutive.", "inputFormat": "- The first line contains an integer $N$, the length of the string.\n- The second line contains a string consisting only of the letters `N`, `O`, and `I`.", "outputFormat": "Output the maximum number of ways to refine the $\\texttt{NOI}$ Yuandan.", "hint": "Sample explanation:\n\nHe can obtain an `N` core and add it to the front.\n\n```plain\nNNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI\n~ ~~   | ~ ~  ~ | ~   ~~ |  ~~~   |  ~~  ~ |  ~  ~~\n```\nConstraints:\n- For 30% of the testdata, $N \\le 200$.\n- For 50% of the testdata, $N \\le 2000$.\n- For 100% of the testdata, $3 \\le N \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "NOI元丹", "background": null, "description": "小A打算开始炼 $\\texttt{NOI}$ 元丹（什么鬼），据说吃了可以提高 $\\texttt{NOI}$ 时的成绩。\n\n是这么炼的。元丹有三种元核，`N`、`O`、`I`。现有很多个这样原核，按顺序排成一行。炼元丹时，从左往右分别挑出 `N`、`O`、`I` 三个原核吞下。\n\n现在他关心，有几种服用方式……且慢！\n\n他觉得服用方式太少，以至于不能成仙。所以他可以通过某个途径，得到 `N`、`O`、`I` 的三种原核中的**任意一个**，至于哪一种由他决定。然后他将获得这个原核的插入到这一排原核中的任意位置（包括最前最后）。\n\n现在你要知道，新的元核序列中能有多少种 `N`、`O`、`I` 的取出方式。子序列的字母并不要求连续。", "inputFormat": "第一行，一个整数 $N$，表示字符串的长度。\n\n第二行，一行字符串，里面只有只有 `N`、`O`、`I` 三种字母。", "outputFormat": "表示出最多可以提炼出来的 $\\texttt{NOI}$ 元丹的方案种数。", "hint": "样例解释：\n\n他可以获取一个 `N` 元核，加到最前面。\n\n```plain\nNNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI\n~ ~~   | ~ ~  ~ | ~   ~~ |  ~~~   |  ~~  ~ |  ~  ~~\n```\n对于 $30\\%$ 的数据 $N \\le 200$。\n\n对于 $50\\%$ 的数据 $N \\le 2000$。\n\n对于 $100\\%$ 的数据 $3 \\le N \\le 10 ^ 5$。", "locale": "zh-CN"}}}
{"pid": "P1372", "type": "P", "difficulty": 2, "samples": [["4 2\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "洛谷原创", "最大公约数 gcd"], "title": "又是毕业季I", "background": "“叮铃铃铃”，随着高考最后一科结考铃声的敲响，三年青春时光顿时凝固于此刻。毕业的欣喜怎敌那离别的不舍，憧憬着未来仍毋忘逝去的歌。$1000$ 多个日夜的欢笑和泪水，全凝聚在毕业晚会上，相信，这一定是一生最难忘的时刻！", "description": "为了把毕业晚会办得更好，老师想要挑出默契程度最大的 $k$ 个人参与毕业晚会彩排。可是如何挑呢？老师列出全班同学的号数 $1,2,\\ldots ,n$ 并且相信 $k$ 个人的默契程度便是他们的最大公约数（这不是迷信哦~）。这可难为了他，请你帮帮忙吧！\n\nPS：一个数的最大公约数即本身。", "inputFormat": "两个空格分开的正整数 $n$ 和 $k$。", "outputFormat": "一个整数，为最大的默契值。", "hint": "对于 $20\\%$ 的数据，$k \\le 2$，$n \\le 10^3$。\n\n对于另 $30\\%$ 的数据，$k \\le 10$，$n \\le 100$。\n\n对于 $100\\%$ 的数据，$k \\le 10^9$，$n \\le 10^9$，$n \\ge k \\ge 1$（神犇学校，人数众多）。", "locale": "zh-CN", "translations": {"en": {"title": "Graduation Season Again I", "background": "\"Ding-ling-ling-ling.\" With the ringing of the final bell of the Gaokao, three years of youth are frozen in this moment. The joy of graduation cannot outweigh the sorrow of parting; while looking forward to the future, we still do not forget the songs of the past. Over $1000$ days and nights of laughter and tears are condensed into the graduation party. We believe this must be one of the most unforgettable moments in a lifetime.", "description": "To make the graduation party better, the teacher wants to select $k$ students with the highest compatibility to participate in the rehearsal. But how to choose? The teacher lists all student numbers $1, 2, \\ldots, n$ and believes that the compatibility level of $k$ students is their greatest common divisor (this is not superstition~). This is difficult for him, so please help!\n\nPS: The greatest common divisor of a single number is the number itself.", "inputFormat": "Two space-separated positive integers $n$ and $k$.", "outputFormat": "A single integer: the maximum compatibility value.", "hint": "For $20\\%$ of the testdata, $k \\le 2$, $n \\le 10^3$.\n\nFor another $30\\%$ of the testdata, $k \\le 10$, $n \\le 100$.\n\nFor $100\\%$ of the testdata, $k \\le 10^9$, $n \\le 10^9$, $n \\ge k \\ge 1$ (a \"Shenben\" school, many students).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "又是毕业季I", "background": "“叮铃铃铃”，随着高考最后一科结考铃声的敲响，三年青春时光顿时凝固于此刻。毕业的欣喜怎敌那离别的不舍，憧憬着未来仍毋忘逝去的歌。$1000$ 多个日夜的欢笑和泪水，全凝聚在毕业晚会上，相信，这一定是一生最难忘的时刻！", "description": "为了把毕业晚会办得更好，老师想要挑出默契程度最大的 $k$ 个人参与毕业晚会彩排。可是如何挑呢？老师列出全班同学的号数 $1,2,\\ldots ,n$ 并且相信 $k$ 个人的默契程度便是他们的最大公约数（这不是迷信哦~）。这可难为了他，请你帮帮忙吧！\n\nPS：一个数的最大公约数即本身。", "inputFormat": "两个空格分开的正整数 $n$ 和 $k$。", "outputFormat": "一个整数，为最大的默契值。", "hint": "对于 $20\\%$ 的数据，$k \\le 2$，$n \\le 10^3$。\n\n对于另 $30\\%$ 的数据，$k \\le 10$，$n \\le 100$。\n\n对于 $100\\%$ 的数据，$k \\le 10^9$，$n \\le 10^9$，$n \\ge k \\ge 1$（神犇学校，人数众多）。", "locale": "zh-CN"}}}
{"pid": "P1373", "type": "P", "difficulty": 4, "samples": [["2 2 3\n1 1\n1 1\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "洛谷原创"], "title": "小 a 和 uim 之大逃离", "background": "小 a 和 uim 来到雨林中探险。突然一阵北风吹来，一片乌云从北部天边急涌过来，还伴着一道道闪电，一阵阵雷声。刹那间，狂风大作，乌云布满了天空，紧接着豆大的雨点从天空中打落下来，只见前方出现了一个披头散发、青面獠牙的怪物，低沉着声音说：“呵呵，既然你们来到这，只能活下来一个！”。小 a 和他的小伙伴都惊呆了！\n", "description": "瞬间，地面上出现了一个 $n\\times m$ 的巨幅矩阵，矩阵的每个格子上有一坨 $0\\sim k$ 不等量的魔液。\n\n怪物各给了小 a 和 uim 一个魔瓶，说道，你们可以从矩阵的任一个格子开始，每次向右或向下走一步，从任一个格子结束。开始时小 a 用魔瓶吸收地面上的魔液，下一步由 uim 吸收，如此交替下去，并且要求最后一步必须由 uim 吸收。魔瓶只有 $k$ 的容量，也就是说，如果装了 $k+1$ 那么魔瓶会被清空成零，如果装了 $k+2$ 就只剩下 $1$，依次类推。\n\n怪物还说道，最后谁的魔瓶装的魔液多，谁就能活下来。小 a 和 uim 感情深厚，情同手足，怎能忍心让小伙伴离自己而去呢？沉默片刻，小 a 灵机一动，如果他俩的魔瓶中魔液一样多，不就都能活下来了吗？小 a 和他的小伙伴都笑呆了！\n\n现在他想知道他们都能活下来有多少种方法。", "inputFormat": "第一行，三个空格隔开的整数 $n,m,k$。\n\n接下来 $n$ 行，$m$ 列，表示矩阵每一个的魔液量。同一行的数字用空格隔开。\n", "outputFormat": "一个整数，表示方法数。由于可能很大，输出对 $1,000,000,007$ 取余后的结果。", "hint": "【题目来源】\n\nlzn 改编\n\n【样例解释】\n\n样例解释：四种方案是：$(1,1)\\to (1,2)$，$(1,1)\\to (2,1)$，$(1,2)\\to (2,2)$，$(2,1)\\to (2,2)$。\n\n【数据范围】\n\n对于 $20\\%$ 的数据，$n,m\\leq 10$，$k\\leq2$；\n\n对于 $50\\%$ 的数据，$n,m\\leq 100$，$k\\leq5$；\n\n对于 $100\\%$ 的数据，$1 \\leq n,m\\leq 800$，$1\\leq k\\leq 15$。\n", "locale": "zh-CN", "translations": {"en": {"title": "The Great Escape of Xiao a and uim", "background": "Xiao a and uim came to explore the rainforest. Suddenly a north wind blew, a dark cloud surged in from the northern horizon with flashes of lightning and peals of thunder. In an instant, a gale rose, dark clouds covered the sky, and then big raindrops fell from above. A disheveled, green-faced, tusked monster appeared ahead, and said in a deep voice: \"Hehe, since you have come here, only one of you can survive!\" Xiao a and his partner were stunned.", "description": "In a flash, a gigantic $n \\times m$ matrix appeared on the ground, and each cell of the matrix held an amount of magic fluid between $0 \\sim k$.\n\nThe monster gave Xiao a and uim a magic bottle each, and said: You may start from any cell of the matrix, move one step to the right or down each time, and end at any cell. At the start, Xiao a uses his bottle to absorb the magic fluid on the ground; on the next step, uim absorbs; and so on, alternating. Moreover, the last absorption must be performed by uim. Each magic bottle has capacity $k$, meaning the amount in a bottle is always taken modulo $k+1$: if it reaches $k+1$ it resets to $0$, if it reaches $k+2$ it becomes $1$, and so on.\n\nThe monster also said that whoever has more magic fluid in their bottle at the end will survive. Xiao a and uim are very close, like brothers. How could he bear to let his partner perish? After a brief silence, Xiao a had a brainwave: if the amounts in their bottles are the same, both can survive. Xiao a and his partner burst into laughter.\n\nNow he wants to know in how many ways both of them can survive.", "inputFormat": "The first line contains three integers $n, m, k$ separated by spaces.\n\nThe next $n$ lines each contain $m$ integers, representing the amount of magic fluid in each cell of the matrix. Numbers in the same row are separated by spaces.", "outputFormat": "Output a single integer: the number of ways. Since the answer may be large, output it modulo $1,000,000,007$.", "hint": "[Problem Source]\n\nAdapted by lzn.\n\n[Sample Explanation]\n\nSample explanation: The four valid schemes are: $(1,1)\\to (1,2)$, $(1,1)\\to (2,1)$, $(1,2)\\to (2,2)$, $(2,1)\\to (2,2)$.\n\n[Constraints]\n\nFor $20\\%$ of the testdata, $n, m \\leq 10$, $k \\leq 2$.\nFor $50\\%$ of the testdata, $n, m \\leq 100$, $k \\leq 5$.\nFor $100\\%$ of the testdata, $1 \\leq n, m \\leq 800$, $1 \\leq k \\leq 15$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小 a 和 uim 之大逃离", "background": "小 a 和 uim 来到雨林中探险。突然一阵北风吹来，一片乌云从北部天边急涌过来，还伴着一道道闪电，一阵阵雷声。刹那间，狂风大作，乌云布满了天空，紧接着豆大的雨点从天空中打落下来，只见前方出现了一个披头散发、青面獠牙的怪物，低沉着声音说：“呵呵，既然你们来到这，只能活下来一个！”。小 a 和他的小伙伴都惊呆了！\n", "description": "瞬间，地面上出现了一个 $n\\times m$ 的巨幅矩阵，矩阵的每个格子上有一坨 $0\\sim k$ 不等量的魔液。\n\n怪物各给了小 a 和 uim 一个魔瓶，说道，你们可以从矩阵的任一个格子开始，每次向右或向下走一步，从任一个格子结束。开始时小 a 用魔瓶吸收地面上的魔液，下一步由 uim 吸收，如此交替下去，并且要求最后一步必须由 uim 吸收。魔瓶只有 $k$ 的容量，也就是说，如果装了 $k+1$ 那么魔瓶会被清空成零，如果装了 $k+2$ 就只剩下 $1$，依次类推。\n\n怪物还说道，最后谁的魔瓶装的魔液多，谁就能活下来。小 a 和 uim 感情深厚，情同手足，怎能忍心让小伙伴离自己而去呢？沉默片刻，小 a 灵机一动，如果他俩的魔瓶中魔液一样多，不就都能活下来了吗？小 a 和他的小伙伴都笑呆了！\n\n现在他想知道他们都能活下来有多少种方法。", "inputFormat": "第一行，三个空格隔开的整数 $n,m,k$。\n\n接下来 $n$ 行，$m$ 列，表示矩阵每一个的魔液量。同一行的数字用空格隔开。\n", "outputFormat": "一个整数，表示方法数。由于可能很大，输出对 $1,000,000,007$ 取余后的结果。", "hint": "【题目来源】\n\nlzn 改编\n\n【样例解释】\n\n样例解释：四种方案是：$(1,1)\\to (1,2)$，$(1,1)\\to (2,1)$，$(1,2)\\to (2,2)$，$(2,1)\\to (2,2)$。\n\n【数据范围】\n\n对于 $20\\%$ 的数据，$n,m\\leq 10$，$k\\leq2$；\n\n对于 $50\\%$ 的数据，$n,m\\leq 100$，$k\\leq5$；\n\n对于 $100\\%$ 的数据，$1 \\leq n,m\\leq 800$，$1\\leq k\\leq 15$。\n", "locale": "zh-CN"}}}
{"pid": "P1374", "type": "P", "difficulty": 4, "samples": [["3 4 7 3\n1010\n0000\n0101\n1 2 3 3\n0132401\n12131\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "洛谷原创", "迭代加深搜索"], "title": "进攻幽暗城", "background": "由于震惊海内外的 “愤怒门投毒事件” 的发生，部落为了对抗皇家药剂师协会的叛乱，所有的外交工作完成后，部落大酋长萨尔带领着小 A 穿过传送门到达幽暗城平叛。\n", "description": "幽暗城的地图是一个 $n \\times m$ 的 $01$ 串。$a_{i, j} = 1$ 时表示 $(i, j)$ 的位置是障碍，无法通过；$a_{i, j} = 0$ 时表示 $(i, j)$ 的位置可以进入。\n\n小 A 与萨尔的初始位置是 $(x_1, y_1)$，而恐惧魔王的初始位置是 $(x_2, y_2)$。小 A 的目标就是到达恐惧魔王的位置。\n\n萨尔会按照一个特定的路线行走，该路线是一个数字串，由 $0 \\sim 4$ 组成。\n\n第 $i$ 秒，若数字串第（$i \\bmod {}$数字串的长度）位等于 $0$，则表示这一秒萨尔将会原地不动；   \n等于 $1$，则表示这一秒萨尔会向上走一格；   \n等于 $2$，则表示这一秒萨尔会向下走一格；   \n等于 $3$，则表示这一秒萨尔会向左走一格；   \n等于 $4$，则表示这一秒萨尔会向右走一格。\n\n若萨尔将要移动的位置是墙或者超出迷宫的范围，则萨尔会原地不动。恐惧魔王也是这样。（换句话说，你可以认为如果将数字串是重复无限次，第 $i$ 秒就是字符串第 $i$ 位）\n\n小A每秒可以选择从上下左右四个方向中选择一个方向，朝那个方向走一格，前提是那个位置不是墙并且没有超出迷宫的范围；或者原地不动。不过，由于幽暗城的诡异环境，小 A 只能持续脱离萨尔的光环 $s$ 秒，若超过 $s$ 秒小 A 则会死亡。光环的有效半径为 $d$ ，表示当小 A 与萨尔之间的距离 $\\sqrt{(x-xx)^2+(y-yy)^2}$ 小于等于 $d$ 时小 A 才能受到萨尔光环的效果。若小 A 脱离萨尔的光环又重新进入光环有效区域，则再次离开光环时持续时间归零重记。\n\n小 A 想知道最少需要几秒他才能到达恐惧魔王所在的位置。", "inputFormat": "第一行四个数 $n,m,s,d$。\n\n接下来的 $n$ 行，每行 $m$ 个数（$0$ 或 $1$），之间没有空格，表示幽暗城的地图。\n\n接下来的一行四个整数，$x_1,y_1,x_2,y_2$（$1 \\le x_1,x_2 \\le n$，$1 \\le y_1,y_2 \\le m$）。\n\n接下来的一行是一个数字串，表示萨尔的移动方式。\n\n接下来的一行是一个数字串，表示恐惧魔王的移动方式。", "outputFormat": "一行一个整数，表示需要最少的时间。\n", "hint": "**【题目来源】**\n\nkiro 原创\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 50$，$0 \\le s \\le 1000$，$0 \\le d \\le 100$，$1 \\le $ 数字串长度 $ \\le 100$，$0 \\le $ 答案 $ \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Assault on the Undercity", "background": "Because of the shocking “Wrathgate poisoning incident,” in order to suppress the rebellion of the Royal Apothecary Society, after all diplomatic work was completed, Warchief Thrall led Xiao A through the portal to the Undercity to quell the uprising.", "description": "The map of the Undercity is an $n \\times m$ grid of $0/1$. If $a_{i, j} = 1$, then position $(i, j)$ is an obstacle and cannot be traversed; if $a_{i, j} = 0$, then position $(i, j)$ is passable.\n\nXiao A and Thrall start at $(x_1, y_1)$, and the Dreadlord starts at $(x_2, y_2)$. Xiao A’s goal is to reach the Dreadlord’s position.\n\nThrall moves according to a specific route, which is a digit string composed of digits $0$ to $4$.\n\nAt second $i$:\n- If the $i$-th digit (thinking of the digit string repeated infinitely) is $0$, Thrall stays still this second.\n- If it is $1$, Thrall moves up by one cell this second.\n- If it is $2$, Thrall moves down by one cell this second.\n- If it is $3$, Thrall moves left by one cell this second.\n- If it is $4$, Thrall moves right by one cell this second.\n\nIf Thrall’s next position would be a wall or outside the maze, Thrall stays in place. The Dreadlord follows the same rule. (In other words, you can think of the digit string as repeating infinitely; at second $i$, take the $i$-th character of this infinite string.)\n\nEach second, Xiao A may choose one of the four directions (up, down, left, right) and move one cell in that direction, provided the destination is not a wall and not out of bounds; or Xiao A may stay in place. However, due to the strange environment in the Undercity, Xiao A can remain outside Thrall’s “aura” for at most $s$ consecutive seconds; if this limit is exceeded, Xiao A dies. The aura has effective radius $d$, meaning Xiao A receives Thrall’s aura effect only when the distance $\\sqrt{(x-xx)^2+(y-yy)^2}$ between Xiao A and Thrall is less than or equal to $d$. If Xiao A leaves Thrall’s aura and then re-enters the effective area of the aura, the counter resets to zero the next time Xiao A leaves the aura.\n\nXiao A wants to know the minimum number of seconds needed to reach the Dreadlord’s position.", "inputFormat": "The first line contains four integers $n, m, s, d$.\n\nThe next $n$ lines each contain $m$ digits ($0$ or $1$) without spaces, representing the map of the Undercity.\n\nThe next line contains four integers $x_1, y_1, x_2, y_2$ ($1 \\le x_1, x_2 \\le n$, $1 \\le y_1, y_2 \\le m$).\n\nThe next line is a digit string describing Thrall’s movement.\n\nThe next line is a digit string describing the Dreadlord’s movement.", "outputFormat": "Output a single integer on one line, the minimum time required.", "hint": "Source: kiro, original.\n\nConstraints:\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 50$, $0 \\le s \\le 1000$, $0 \\le d \\le 100$, $1 \\le$ length of the digit string $\\le 100$, $0 \\le$ answer $\\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "进攻幽暗城", "background": "由于震惊海内外的 “愤怒门投毒事件” 的发生，部落为了对抗皇家药剂师协会的叛乱，所有的外交工作完成后，部落大酋长萨尔带领着小 A 穿过传送门到达幽暗城平叛。\n", "description": "幽暗城的地图是一个 $n \\times m$ 的 $01$ 串。$a_{i, j} = 1$ 时表示 $(i, j)$ 的位置是障碍，无法通过；$a_{i, j} = 0$ 时表示 $(i, j)$ 的位置可以进入。\n\n小 A 与萨尔的初始位置是 $(x_1, y_1)$，而恐惧魔王的初始位置是 $(x_2, y_2)$。小 A 的目标就是到达恐惧魔王的位置。\n\n萨尔会按照一个特定的路线行走，该路线是一个数字串，由 $0 \\sim 4$ 组成。\n\n第 $i$ 秒，若数字串第（$i \\bmod {}$数字串的长度）位等于 $0$，则表示这一秒萨尔将会原地不动；   \n等于 $1$，则表示这一秒萨尔会向上走一格；   \n等于 $2$，则表示这一秒萨尔会向下走一格；   \n等于 $3$，则表示这一秒萨尔会向左走一格；   \n等于 $4$，则表示这一秒萨尔会向右走一格。\n\n若萨尔将要移动的位置是墙或者超出迷宫的范围，则萨尔会原地不动。恐惧魔王也是这样。（换句话说，你可以认为如果将数字串是重复无限次，第 $i$ 秒就是字符串第 $i$ 位）\n\n小A每秒可以选择从上下左右四个方向中选择一个方向，朝那个方向走一格，前提是那个位置不是墙并且没有超出迷宫的范围；或者原地不动。不过，由于幽暗城的诡异环境，小 A 只能持续脱离萨尔的光环 $s$ 秒，若超过 $s$ 秒小 A 则会死亡。光环的有效半径为 $d$ ，表示当小 A 与萨尔之间的距离 $\\sqrt{(x-xx)^2+(y-yy)^2}$ 小于等于 $d$ 时小 A 才能受到萨尔光环的效果。若小 A 脱离萨尔的光环又重新进入光环有效区域，则再次离开光环时持续时间归零重记。\n\n小 A 想知道最少需要几秒他才能到达恐惧魔王所在的位置。", "inputFormat": "第一行四个数 $n,m,s,d$。\n\n接下来的 $n$ 行，每行 $m$ 个数（$0$ 或 $1$），之间没有空格，表示幽暗城的地图。\n\n接下来的一行四个整数，$x_1,y_1,x_2,y_2$（$1 \\le x_1,x_2 \\le n$，$1 \\le y_1,y_2 \\le m$）。\n\n接下来的一行是一个数字串，表示萨尔的移动方式。\n\n接下来的一行是一个数字串，表示恐惧魔王的移动方式。", "outputFormat": "一行一个整数，表示需要最少的时间。\n", "hint": "**【题目来源】**\n\nkiro 原创\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 50$，$0 \\le s \\le 1000$，$0 \\le d \\le 100$，$1 \\le $ 数字串长度 $ \\le 100$，$0 \\le $ 答案 $ \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P1375", "type": "P", "difficulty": 3, "samples": [["3", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "福建省历届夏令营", "Catalan 数"], "title": "小猫", "background": "", "description": "有 $2n$ 只小猫站成一圈，主人小明想把它们两两之间用绳子绑住尾巴连在一起。同时小明是个完美主义者，不容许看到有两根绳子交叉。请问小明有几种连线方案，可以把让所有小猫两两配对？\n\n方案数很大，仅需输出方案数模 $10^9+7$（一个质数）的值。\n\n\n", "inputFormat": "输入共一行，一个整数 $n$。\n", "outputFormat": "输出方案数对 $10^9+7$ 取模后的值。\n", "hint": "### 数据范围\n\n- 对于 $60\\%$ 的数据，$1\\le N \\le 100$。\n- 对于 $100\\%$ 的数据，$1\\le N \\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Kittens", "background": "", "description": "There are $2n$ kittens standing in a circle. Their owner, Xiao Ming, wants to tie their tails together in pairs with strings. At the same time, Xiao Ming is a perfectionist and does not allow any two strings to cross. How many ways are there to connect them so that all kittens are paired?\n\nThe number of ways can be large; you only need to output the value modulo $10^9+7$ (a prime).", "inputFormat": "A single line containing an integer $n$.", "outputFormat": "Output the number of ways modulo $10^9+7$.", "hint": "### Constraints\n\n- For 60% of the testdata, $1 \\le n \\le 100$.\n- For 100% of the testdata, $1 \\le n \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小猫", "background": "", "description": "有 $2n$ 只小猫站成一圈，主人小明想把它们两两之间用绳子绑住尾巴连在一起。同时小明是个完美主义者，不容许看到有两根绳子交叉。请问小明有几种连线方案，可以把让所有小猫两两配对？\n\n方案数很大，仅需输出方案数模 $10^9+7$（一个质数）的值。\n\n\n", "inputFormat": "输入共一行，一个整数 $n$。\n", "outputFormat": "输出方案数对 $10^9+7$ 取模后的值。\n", "hint": "### 数据范围\n\n- 对于 $60\\%$ 的数据，$1\\le N \\le 100$。\n- 对于 $100\\%$ 的数据，$1\\le N \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1376", "type": "P", "difficulty": 2, "samples": [["4 5\n88 200\n89 400\n97 300\n91 500\n", "126900\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["贪心", "2005", "USACO", "福建省历届夏令营"], "title": "[USACO05MAR] Yogurt factory 机器工厂", "background": null, "description": "小 T 开办了一家机器工厂，在 $N$ 个星期内，原材料成本和劳动力价格不断起伏，第 $i$ 周生产一台机器需要花费 $C_i$ 元。若没把机器卖出去，每保养一台机器，每周需要花费 $S$ 元，这个费用不会发生变化。\n\n机器工厂接到订单，在第 $i$ 周需要交付 $Y_i$ 台机器给委托人，第 $i$ 周刚生产的机器，或者之前的存货，都可以进行交付。\n\n请你计算出这 $n$ 周时间内完成订单的最小代价。", "inputFormat": "第一行输入两个整数 $N$ 和 $S$，接下来 $N$ 行每行两个数 $C_i$ 和 $Y_i$。", "outputFormat": "输出一个整数，表示最少的代价。", "hint": "对于 $100\\%$ 的数据，$1 \\le n\\le 10^4$，$1 \\le C_i \\le 5000$，$1 \\le S \\le 100$，$0 \\le Y_i \\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO05MAR] Yogurt factory Machine Factory", "background": "", "description": "Xiao T opened a machine factory. Over $N$ weeks, raw material costs and labor prices fluctuate; in week $i$, producing one machine costs $C_i$ yuan. If a machine is not sold, maintaining each machine costs $S$ yuan per week; this fee is constant.\n\nThe factory has received orders: in week $i$, it must deliver $Y_i$ machines to the client. Machines produced in week $i$, as well as inventory from previous weeks, can be used to fulfill the order.\n\nPlease compute the minimum total cost to complete all orders over these $N$ weeks.", "inputFormat": "The first line contains two integers $N$ and $S$. The next $N$ lines each contain two integers $C_i$ and $Y_i$.", "outputFormat": "Output a single integer, the minimum cost.", "hint": "For $100\\%$ of the testdata, $1 \\le N \\le 10^4$, $1 \\le C_i \\le 5000$, $1 \\le S \\le 100$, $0 \\le Y_i \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO05MAR] Yogurt factory 机器工厂", "background": null, "description": "小 T 开办了一家机器工厂，在 $N$ 个星期内，原材料成本和劳动力价格不断起伏，第 $i$ 周生产一台机器需要花费 $C_i$ 元。若没把机器卖出去，每保养一台机器，每周需要花费 $S$ 元，这个费用不会发生变化。\n\n机器工厂接到订单，在第 $i$ 周需要交付 $Y_i$ 台机器给委托人，第 $i$ 周刚生产的机器，或者之前的存货，都可以进行交付。\n\n请你计算出这 $n$ 周时间内完成订单的最小代价。", "inputFormat": "第一行输入两个整数 $N$ 和 $S$，接下来 $N$ 行每行两个数 $C_i$ 和 $Y_i$。", "outputFormat": "输出一个整数，表示最少的代价。", "hint": "对于 $100\\%$ 的数据，$1 \\le n\\le 10^4$，$1 \\le C_i \\le 5000$，$1 \\le S \\le 100$，$0 \\le Y_i \\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P1377", "type": "P", "difficulty": 5, "samples": [["4\n1 3 4 2\n", "1 3 2 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "各省省选", "天津", "笛卡尔树"], "title": "[TJOI2011] 树的序", "background": "", "description": "众所周知，二叉查找树的形态和键值的插入顺序密切相关。准确的讲： \n1. 空树中加入一个键值 $k$，则变为只有一个结点的二叉查找树，此结点的键值即为 $k$。\n2. 在非空树中插入一个键值 $k$，若 $k$ 小于其根的键值，则在其左子树中插入 $k$，否则在其右子树中插入 $k$。\n\n我们将一棵二叉查找树的键值插入序列称为树的生成序列，现给出一个生成序列，求与其生成同样二叉查找树的所有生成序列中字典序最小的那个，其中，字典序关系是指对两个长度同为 $n$ 的生成序列，先比较第一个插入键值，再比较第二个，依此类推。", "inputFormat": "第一行，一个整数 $n$，表示二叉查找树的结点个数。第二行，有 $n$ 个正整数 $k_1, k_2, \\cdots,k_n$，表示生成序列，简单起见，$k_1 \\sim k_n$ 为一个 $1$ 到 $n$ 的排列。", "outputFormat": "一行，$n$ 个正整数，为能够生成同样二叉查找树的所有生成序列中最小的。", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 的数据， $1\\le n ≤ 10$。\n- 对于 $50\\%$ 的数据， $1\\le n ≤ 100$。\n- 对于 $100\\%$ 的数据， $1\\le n ≤ 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2011] Tree Order", "background": "", "description": "It is well known that the shape of a binary search tree (BST) is closely related to the insertion order of keys. Specifically:\n1. Inserting a key $k$ into an empty tree yields a BST with a single node whose key is $k$.\n2. When inserting a key $k$ into a non-empty tree, if $k$ is less than the key of its root, insert $k$ into its left subtree; otherwise, insert it into its right subtree.\n\nWe call an insertion sequence of keys for a BST a generating sequence of the tree. Given one generating sequence, find the lexicographically smallest generating sequence among all sequences that generate the same BST. Here, the lexicographic order means that for two generating sequences both of length $n$, we first compare the first inserted keys, then the second, and so on.", "inputFormat": "The first line contains an integer $n$, the number of nodes in the BST. The second line contains $n$ positive integers $k_1, k_2, \\cdots, k_n$, representing the generating sequence. For simplicity, $k_1 \\sim k_n$ is a permutation of $1$ to $n$.", "outputFormat": "One line with $n$ positive integers, which is the lexicographically smallest among all generating sequences that can generate the same BST.", "hint": "Constraints and Conventions\n\n- For $20\\%$ of the testdata, $1 \\le n \\le 10$.\n- For $50\\%$ of the testdata, $1 \\le n \\le 100$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2011] 树的序", "background": "", "description": "众所周知，二叉查找树的形态和键值的插入顺序密切相关。准确的讲： \n1. 空树中加入一个键值 $k$，则变为只有一个结点的二叉查找树，此结点的键值即为 $k$。\n2. 在非空树中插入一个键值 $k$，若 $k$ 小于其根的键值，则在其左子树中插入 $k$，否则在其右子树中插入 $k$。\n\n我们将一棵二叉查找树的键值插入序列称为树的生成序列，现给出一个生成序列，求与其生成同样二叉查找树的所有生成序列中字典序最小的那个，其中，字典序关系是指对两个长度同为 $n$ 的生成序列，先比较第一个插入键值，再比较第二个，依此类推。", "inputFormat": "第一行，一个整数 $n$，表示二叉查找树的结点个数。第二行，有 $n$ 个正整数 $k_1, k_2, \\cdots,k_n$，表示生成序列，简单起见，$k_1 \\sim k_n$ 为一个 $1$ 到 $n$ 的排列。", "outputFormat": "一行，$n$ 个正整数，为能够生成同样二叉查找树的所有生成序列中最小的。", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 的数据， $1\\le n ≤ 10$。\n- 对于 $50\\%$ 的数据， $1\\le n ≤ 100$。\n- 对于 $100\\%$ 的数据， $1\\le n ≤ 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1378", "type": "P", "difficulty": 4, "samples": [["2\n20 0 10 10\n13 3\n17 7\n", "50\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "数学", "福建省历届夏令营", "枚举", "深度优先搜索 DFS"], "title": "油滴扩展", "background": "", "description": "在一个长方形框子里，最多有 $N$ 个相异的点，在其中任何一个点上放一个很小的油滴，那么这个油滴会一直扩展，直到接触到其他油滴或者框子的边界。必须等一个油滴扩展完毕才能放置下一个油滴。那么应该按照怎样的顺序在这 $N$ 个点上放置油滴，才能使放置完毕后所有油滴占据的总面积最大呢？（不同的油滴不会相互融合）\n\n注：圆的面积公式 $S = \\pi r^2$，其中 $r$ 为圆的半径。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，四个整数 $x, y, x', y'$，表示长方形边框一个顶点及其对角顶点的坐标。\n\n接下来 $N$ 行，第 $i$ 行两个整数 $x_i, y_i$，表示盒子内第 $i$ 个点的坐标。", "outputFormat": "一行，一个整数，长方形盒子剩余的最小空间（结果四舍五入输出）。", "hint": "对于 $100\\%$ 的数据，$1 \\le N \\le 6$，坐标范围在 $[-1000, 1000]$ 内。", "locale": "zh-CN", "translations": {"en": {"title": "Oil Droplet Expansion", "background": "", "description": "Inside a rectangular frame, there are at most $N$ distinct points. If you place a tiny oil droplet at any one of these points, the droplet will keep expanding until it touches another droplet or the boundary of the frame. You must wait for one droplet to finish expanding before placing the next droplet. In what order should you place droplets at these $N$ points so that the total area occupied by all droplets after placement is maximized? (Different droplets do not merge.)\n\nNote: The area of a circle is $S = \\pi r^2$, where $r$ is the radius.", "inputFormat": "The first line contains an integer $N$.\n\nThe second line contains four integers $x, y, x', y'$, which represent the coordinates of one vertex of the rectangle and its diagonally opposite vertex.\n\nThe next $N$ lines each contain two integers $x_i, y_i$, representing the coordinates of the $i$-th point inside the rectangle.", "outputFormat": "One line with a single integer: the minimum remaining area of the rectangle (rounded to the nearest integer).", "hint": "For $100\\%$ of the testdata, $1 \\le N \\le 6$, and coordinate values are within $[-1000, 1000]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "油滴扩展", "background": "", "description": "在一个长方形框子里，最多有 $N$ 个相异的点，在其中任何一个点上放一个很小的油滴，那么这个油滴会一直扩展，直到接触到其他油滴或者框子的边界。必须等一个油滴扩展完毕才能放置下一个油滴。那么应该按照怎样的顺序在这 $N$ 个点上放置油滴，才能使放置完毕后所有油滴占据的总面积最大呢？（不同的油滴不会相互融合）\n\n注：圆的面积公式 $S = \\pi r^2$，其中 $r$ 为圆的半径。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，四个整数 $x, y, x', y'$，表示长方形边框一个顶点及其对角顶点的坐标。\n\n接下来 $N$ 行，第 $i$ 行两个整数 $x_i, y_i$，表示盒子内第 $i$ 个点的坐标。", "outputFormat": "一行，一个整数，长方形盒子剩余的最小空间（结果四舍五入输出）。", "hint": "对于 $100\\%$ 的数据，$1 \\le N \\le 6$，坐标范围在 $[-1000, 1000]$ 内。", "locale": "zh-CN"}}}
{"pid": "P1379", "type": "P", "difficulty": 4, "samples": [["283104765\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "福建省历届夏令营", "枚举", "广度优先搜索 BFS", "哈希 hashing", "A*  算法"], "title": "八数码难题", "background": "", "description": "在 $3\\times 3$ 的棋盘上，摆有八个棋子，每个棋子上标有 $1$ 至 $8$ 的某一数字。棋盘中留有一个空格，空格用 $0$ 来表示。空格周围的棋子可以移到空格中。要求解的问题是：给出一种初始布局（初始状态）和目标布局（为了使题目简单,设目标状态为 $123804765$），找到一种最少步骤的移动方法，实现从初始布局到目标布局的转变。\n", "inputFormat": "输入初始状态，一行九个数字，空格用 $0$ 表示。\n", "outputFormat": "只有一行，该行只有一个数字，表示从初始状态到目标状态需要的最少移动次数。保证测试数据中无特殊无法到达目标状态数据。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7rhxbnup.png)\n\n图中标有 $0$ 的是空格。绿色格子是空格所在位置，橙色格子是下一步可以移动到空格的位置。如图所示，用四步可以达到目标状态。\n\n并且可以证明，不存在更优的策略。", "locale": "zh-CN", "translations": {"en": {"title": "Eight-Puzzle Problem", "background": "", "description": "On a $3\\times 3$ board, there are eight tiles, each labeled with a digit from $1$ to $8$. One cell is left empty and is denoted by $0$. A tile adjacent to the blank can be moved into the blank. The task is: given an initial layout (initial state) and a target layout (to simplify the problem, the target state is set to $123804765$), find a sequence of moves with the minimum number of steps to transform the initial state into the target state.", "inputFormat": "Input the initial state: nine numbers in one line, with the blank denoted by $0$.", "outputFormat": "Output a single line containing one integer, the minimum number of moves required to reach the target state from the initial state. It is guaranteed that in the testdata there are no unsolvable initial states.", "hint": "### Sample Explanation\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7rhxbnup.png)\n\nIn the figure, the cell labeled $0$ is the blank. The green cell is the position of the blank, and the orange cells are the positions that can be moved into the blank in the next step. As shown, the target state can be reached in four moves.\n\nMoreover, it can be proven that no better strategy exists.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "八数码难题", "background": "", "description": "在 $3\\times 3$ 的棋盘上，摆有八个棋子，每个棋子上标有 $1$ 至 $8$ 的某一数字。棋盘中留有一个空格，空格用 $0$ 来表示。空格周围的棋子可以移到空格中。要求解的问题是：给出一种初始布局（初始状态）和目标布局（为了使题目简单,设目标状态为 $123804765$），找到一种最少步骤的移动方法，实现从初始布局到目标布局的转变。\n", "inputFormat": "输入初始状态，一行九个数字，空格用 $0$ 表示。\n", "outputFormat": "只有一行，该行只有一个数字，表示从初始状态到目标状态需要的最少移动次数。保证测试数据中无特殊无法到达目标状态数据。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7rhxbnup.png)\n\n图中标有 $0$ 的是空格。绿色格子是空格所在位置，橙色格子是下一步可以移动到空格的位置。如图所示，用四步可以达到目标状态。\n\n并且可以证明，不存在更优的策略。", "locale": "zh-CN"}}}
{"pid": "P1380", "type": "P", "difficulty": 5, "samples": [["5 6\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "福建省历届夏令营"], "title": "T 型骨牌", "background": null, "description": "现在要在 $n\\times m$ 的棋盘上，摆入 T 型，T 型可以旋转，具体包括如下四个样式（“#”代表被 T 型占据的格子，“.”代表自由的格子）：\n\n```plain\n###      ..#      .#.      #..\n.#.      ###      .#.      ###\n.#.      ..#      ###      #..\n```\n\n问最多能在 $n\\times m$ 的棋盘上摆入多少个不重叠的 T 型。", "inputFormat": "输入共一行两个数 $n,m$。", "outputFormat": "输出共一个数，表示最多能放入多少个 T 型。", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le n,m\\le 9$。\n\n### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r08wh2nu.png)", "locale": "zh-CN", "translations": {"en": {"title": "T-shaped Pentomino", "background": "", "description": "We want to place T-shaped pentominoes on an $n\\times m$ grid. The T-shaped pentomino can be rotated and specifically has the following four orientations (\"#\" represents a cell occupied by the T, \".\" represents a free cell):\n\n```plain\n###      ..#      .#.      #..\n.#.      ###      .#.      ###\n.#.      ..#      ###      #..\n```\n\nWhat is the maximum number of non-overlapping T-shaped pentominoes that can be placed on an $n\\times m$ grid?", "inputFormat": "A single line containing two integers $n,m$.", "outputFormat": "Output a single integer, the maximum number of T-shaped pentominoes that can be placed.", "hint": "### Constraints\n\nFor all testdata, $1\\le n,m\\le 9$.\n\n### Sample Explanation\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r08wh2nu.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "T 型骨牌", "background": null, "description": "现在要在 $n\\times m$ 的棋盘上，摆入 T 型，T 型可以旋转，具体包括如下四个样式（“#”代表被 T 型占据的格子，“.”代表自由的格子）：\n\n```plain\n###      ..#      .#.      #..\n.#.      ###      .#.      ###\n.#.      ..#      ###      #..\n```\n\n问最多能在 $n\\times m$ 的棋盘上摆入多少个不重叠的 T 型。", "inputFormat": "输入共一行两个数 $n,m$。", "outputFormat": "输出共一个数，表示最多能放入多少个 T 型。", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le n,m\\le 9$。\n\n### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r08wh2nu.png)", "locale": "zh-CN"}}}
{"pid": "P1381", "type": "P", "difficulty": 4, "samples": [["3\r\nhot\r\ndog\r\nmilk\r\n5\r\nhot\r\ndog\r\ndog\r\nmilk\r\nhot\r\n", "3\r\n3\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "二分", "福建省历届夏令营", "哈希 hashing", "双指针 two-pointer"], "title": "单词背诵", "background": null, "description": "灵梦有 $n$ 个单词想要背，但她想通过一篇文章中的一段来记住这些单词。\n\n文章由 $m$ 个单词构成，她想在文章中找出连续的一段，其中包含最多的她想要背的单词（重复的只算一个）。并且在背诵的单词量尽量多的情况下，还要使选出的文章段落尽量短，这样她就可以用尽量短的时间学习尽可能多的单词了。", "inputFormat": "第 $1$ 行一个数 $n$，接下来 $n$ 行每行是一个长度不超过 $10$ 的字符串，表示一个要背的单词。\n\n接着是一个数 $m$，然后是 $m$ 行长度不超过 $10$ 的字符串，每个表示文章中的一个单词。", "outputFormat": "输出文件共 $2$ 行。第 $1$ 行为文章中最多包含的要背的单词数，第 $2$ 行表示在文章中包含最多要背单词的最短的连续段的长度。", "hint": "### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，$n \\le 50$，$m \\le 500$；\n- 对于 $60\\%$ 的数据，$n \\le 300$，$m \\le 5000$；\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 1000$，$1 \\le m \\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Word Recitation", "background": "", "description": "Reimu has $n$ words she wants to memorize, and she plans to remember them through a contiguous segment of an article.\n\nThe article consists of $m$ words. She wants to find a contiguous segment in the article that contains as many of her target words as possible, counting only distinct target words within the segment (duplicates count as one). Among all segments that contain the maximum number of target words, she also wants the segment to be as short as possible, so that she can spend the least time learning as many words as she can.", "inputFormat": "The first line contains an integer $n$, followed by $n$ lines, each of which is a string of length at most $10$, representing a target word to memorize.\n\nThen an integer $m$ follows, and then $m$ lines, each of which is a string of length at most $10$, representing a word in the article.", "outputFormat": "Output two lines. The first line is the maximum number of target words contained in any contiguous segment of the article. The second line is the length of the shortest contiguous segment that contains this maximum number of target words.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $n \\le 50$, $m \\le 500$.\n- For $60\\%$ of the testdata, $n \\le 300$, $m \\le 5000$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 1000$, $1 \\le m \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "单词背诵", "background": null, "description": "灵梦有 $n$ 个单词想要背，但她想通过一篇文章中的一段来记住这些单词。\n\n文章由 $m$ 个单词构成，她想在文章中找出连续的一段，其中包含最多的她想要背的单词（重复的只算一个）。并且在背诵的单词量尽量多的情况下，还要使选出的文章段落尽量短，这样她就可以用尽量短的时间学习尽可能多的单词了。", "inputFormat": "第 $1$ 行一个数 $n$，接下来 $n$ 行每行是一个长度不超过 $10$ 的字符串，表示一个要背的单词。\n\n接着是一个数 $m$，然后是 $m$ 行长度不超过 $10$ 的字符串，每个表示文章中的一个单词。", "outputFormat": "输出文件共 $2$ 行。第 $1$ 行为文章中最多包含的要背的单词数，第 $2$ 行表示在文章中包含最多要背单词的最短的连续段的长度。", "hint": "### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，$n \\le 50$，$m \\le 500$；\n- 对于 $60\\%$ 的数据，$n \\le 300$，$m \\le 5000$；\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 1000$，$1 \\le m \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1382", "type": "P", "difficulty": 5, "samples": [["2\n3 0 2\n4 1 3\n", "6\n0 0\n0 3\n1 3\n1 4\n3 4\n3 0"], ["5\n3 -3 0\n2 -1 1\n4 2 4\n2 3 7\n3 6 8", "14\n-3 0\n-3 3\n0 3\n0 2\n1 2\n1 0\n2 0\n2 4\n4 4\n4 2\n6 2\n6 3\n8 3\n8 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "堆", "福建省历届夏令营"], "title": "楼房", "background": "", "description": "地平线（$x$ 轴）上有 $n$ 个楼房，每个楼房可以表示为一个矩形。\n\n用三个整数 $h_i,l_i,r_i$ 来表示第 $i$ 个矩形：矩形左下角为 $(l_i,0)$，右上角为 $(r_i,h_i)$。\n\n地平线高度为 $0$。在轮廓线长度最小的前提下，从左到右输出轮廓线。", "inputFormat": "第一行一个整数 $n$，表示矩形个数。\n\n以下 $n$ 行，每行 $3$ 个整数 $h_i,l_i,r_i$ 表示第 $i$ 个矩形。", "outputFormat": "第一行一个整数 $m$，表示节点个数。\n\n以下 $m$ 行，每行一个坐标表示轮廓线上的节点。\n\n要求从左到右遍历轮廓线并顺序输出节点。\n\n注：第一个和最后一个节点的 $y$ 坐标必然为 $0$。", "hint": "样例二如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pmf4pzif.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5ec8sxwi.png)\n\n数据范围:\n\n对于 $30\\%$ 的数据，$n\\le100$。\n\n对于另外 $30\\%$ 的数据，$1\\le h_i,l_i,r_i\\le 1000$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$1\\le h_i\\le 10^9$，$-10^9\\le l_i<r_i\\le10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Buildings", "background": "", "description": "There are $n$ buildings on the horizon (the $x$ axis), and each building is represented as a rectangle.\n\nThe $i$-th rectangle is represented by three integers $h_i, l_i, r_i$: its bottom-left corner is at $(l_i, 0)$ and its top-right corner is at $(r_i, h_i)$.\n\nThe horizon has height $0$. Subject to minimizing the skyline polyline length (i.e., without redundant points), output the skyline from left to right.", "inputFormat": "The first line contains an integer $n$, the number of rectangles.\n\nEach of the following $n$ lines contains $3$ integers $h_i, l_i, r_i$ describing the $i$-th rectangle.", "outputFormat": "The first line contains an integer $m$, the number of nodes.\n\nEach of the following $m$ lines contains one coordinate, representing a node on the skyline.\n\nTraverse the skyline from left to right and output the nodes in order.\n\nNote: The $y$-coordinates of the first and the last node are both $0$.", "hint": "Sample 2 as shown:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pmf4pzif.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5ec8sxwi.png)\n\nConstraints:\n\nFor $30\\%$ of the testdata, $n \\le 100$.\n\nFor another $30\\%$ of the testdata, $1 \\le h_i, l_i, r_i \\le 1000$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $1 \\le h_i \\le 10^9$, $-10^9 \\le l_i < r_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "楼房", "background": "", "description": "地平线（$x$ 轴）上有 $n$ 个楼房，每个楼房可以表示为一个矩形。\n\n用三个整数 $h_i,l_i,r_i$ 来表示第 $i$ 个矩形：矩形左下角为 $(l_i,0)$，右上角为 $(r_i,h_i)$。\n\n地平线高度为 $0$。在轮廓线长度最小的前提下，从左到右输出轮廓线。", "inputFormat": "第一行一个整数 $n$，表示矩形个数。\n\n以下 $n$ 行，每行 $3$ 个整数 $h_i,l_i,r_i$ 表示第 $i$ 个矩形。", "outputFormat": "第一行一个整数 $m$，表示节点个数。\n\n以下 $m$ 行，每行一个坐标表示轮廓线上的节点。\n\n要求从左到右遍历轮廓线并顺序输出节点。\n\n注：第一个和最后一个节点的 $y$ 坐标必然为 $0$。", "hint": "样例二如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pmf4pzif.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5ec8sxwi.png)\n\n数据范围:\n\n对于 $30\\%$ 的数据，$n\\le100$。\n\n对于另外 $30\\%$ 的数据，$1\\le h_i,l_i,r_i\\le 1000$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$1\\le h_i\\le 10^9$，$-10^9\\le l_i<r_i\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P1383", "type": "P", "difficulty": 5, "samples": [["7\nT a\nT b\nT c\nQ 2\nU 2\nT c\nQ 2\n", "b\nc\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["倍增", "福建省历届夏令营", "可持久化线段树", "可持久化"], "title": "高级打字机", "background": "", "description": "早苗入手了最新的高级打字机。最新款自然有着与以往不同的功能，那就是它具备撤销功能，厉害吧。\n\n请为这种高级打字机设计一个程序，支持如下 $3$ 种操作：\n\n1. `T x`：Type 操作，表示在文章末尾打下一个小写字母 $x$。\n2. `U x`：Undo 操作，表示撤销最后的 $x$ 次修改操作。\n3. `Q x`：Query 操作，表示询问当前文章中第 $x$ 个字母并输出。请注意 Query 操作并不算修改操作。\n\n文章一开始可以视为空串。", "inputFormat": "第 $1$ 行：一个整数 $n$，表示操作数量。\n\n以下 $n$ 行，每行一个命令。保证输入的命令合法。", "outputFormat": "每行输出一个字母，表示 Query 操作的答案。\n\n", "hint": "对于前 $20\\%$ 的数据，$n\\le 200$。\n\n对于前 $50\\%$ 的数据，保证 Undo 操作不会撤销 Undo 操作。\n\n对于 $100\\%$ 的数据，$n\\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Advanced Typewriter", "background": "", "description": "Sanae has bought the latest advanced typewriter. As you would expect, the latest model has a new feature: it supports undo.\n\nPlease design a program for this advanced typewriter that supports the following $3$ types of operations:\n\n1. `T x`: Type operation, which appends a lowercase letter $x$ to the end of the text.\n2. `U x`: Undo operation, which undoes the last $x$ modification operations.\n3. `Q x`: Query operation, which asks for and outputs the $x$-th letter of the current text. Note that the Query operation does not count as a modification operation.\n\nInitially, the text can be regarded as an empty string.", "inputFormat": "Line $1$: an integer $n$, the number of operations.\n\nThe next $n$ lines each contain one command. It is guaranteed that the input commands are valid.", "outputFormat": "Output one letter per line, which is the answer to each Query operation.", "hint": "For the first $20\\%$ of the testdata, $n \\le 200$.\n\nFor the first $50\\%$ of the testdata, it is guaranteed that an Undo operation will not undo an Undo operation.\n\nFor $100\\%$ of the testdata, $n \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "高级打字机", "background": "", "description": "早苗入手了最新的高级打字机。最新款自然有着与以往不同的功能，那就是它具备撤销功能，厉害吧。\n\n请为这种高级打字机设计一个程序，支持如下 $3$ 种操作：\n\n1. `T x`：Type 操作，表示在文章末尾打下一个小写字母 $x$。\n2. `U x`：Undo 操作，表示撤销最后的 $x$ 次修改操作。\n3. `Q x`：Query 操作，表示询问当前文章中第 $x$ 个字母并输出。请注意 Query 操作并不算修改操作。\n\n文章一开始可以视为空串。", "inputFormat": "第 $1$ 行：一个整数 $n$，表示操作数量。\n\n以下 $n$ 行，每行一个命令。保证输入的命令合法。", "outputFormat": "每行输出一个字母，表示 Query 操作的答案。\n\n", "hint": "对于前 $20\\%$ 的数据，$n\\le 200$。\n\n对于前 $50\\%$ 的数据，保证 Undo 操作不会撤销 Undo 操作。\n\n对于 $100\\%$ 的数据，$n\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1384", "type": "P", "difficulty": 4, "samples": [["7 4\n", "1"], ["4 7\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "福建省历届夏令营"], "title": "幸运数与排列", "background": "", "description": "一个数是幸运数当且仅当这个数仅由 $4$ 和 $7$ 构成，比如 $47$，$744$，$4747$。\n\n询问在 $1$ 到 $n$ 的全排列中字典序第 $k$ 小的排列中，有多少个幸运数在排列中的位置编号也是幸运数。", "inputFormat": "一行，包含两个整数 $n$，$k$。", "outputFormat": "一个整数表示答案。如果不存在第 $k$ 小的排列，则输出 $-1$。", "hint": "#### 样例 1 解释\n\n排列为 $1,2,3,4,6,7,5$。\n\n#### 样例 2 解释\n\n排列为：$2,1,3,4$。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n\\le 8$。\n- 对于 $60\\%$ 的数据，保证 $n\\le 100$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n,k\\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Lucky Numbers and Permutations", "background": "", "description": "A number is a lucky number if and only if it consists only of the digits $4$ and $7$, for example $47$, $744$, $4747$.\n\nAmong all permutations of $1$ to $n$ in lexicographical order, consider the $k$-th smallest permutation. Count how many indices $i$ such that both the position $i$ and the element at position $i$ are lucky numbers.", "inputFormat": "One line containing two integers $n$, $k$.", "outputFormat": "Output a single integer representing the answer. If the $k$-th smallest permutation does not exist, output $-1$.", "hint": "Sample 1 Explanation:\nThe permutation is 1, 2, 3, 4, 6, 7, 5.\n\nSample 2 Explanation:\nThe permutation is: 2, 1, 3, 4.\n\nConstraints:\n- For $30\\%$ of the testdata, it is guaranteed that $n \\le 8$.\n- For $60\\%$ of the testdata, it is guaranteed that $n \\le 100$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n, k \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "幸运数与排列", "background": "", "description": "一个数是幸运数当且仅当这个数仅由 $4$ 和 $7$ 构成，比如 $47$，$744$，$4747$。\n\n询问在 $1$ 到 $n$ 的全排列中字典序第 $k$ 小的排列中，有多少个幸运数在排列中的位置编号也是幸运数。", "inputFormat": "一行，包含两个整数 $n$，$k$。", "outputFormat": "一个整数表示答案。如果不存在第 $k$ 小的排列，则输出 $-1$。", "hint": "#### 样例 1 解释\n\n排列为 $1,2,3,4,6,7,5$。\n\n#### 样例 2 解释\n\n排列为：$2,1,3,4$。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n\\le 8$。\n- 对于 $60\\%$ 的数据，保证 $n\\le 100$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n,k\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1385", "type": "P", "difficulty": 4, "samples": [["3\naaaaaaaaa\nya\nklmbfxzb", "0\n24\n320092793"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数学", "福建省历届夏令营"], "title": "密令", "background": null, "description": "给定一小写字母串 $s$，每次操作你可以选择一个 $p$（$1 \\leq p \\lt |s|$）执行下述修改中的任意一个：\n\n1. 将 $s_p$ 改为其字典序 $+1$ 的字母，将 $s_{p+1}$ 改为其字典序 $-1$ 的字母；\n2. 将 $s_p$ 改为其字典序 $-1$ 的字母，将 $s_{p+1}$ 改为其字典序 $+1$ 的字母。\n\n在经过任意多次操作后，串 $s$ 能变化成多少种不同于 $s$ 的字符串？\n\n修改过程中必须保证 $s$ 是合法的小写字母串（即不能对字母 a 进行字典序 $-1$ 的操作和不能对字母 z 进行字典序 $+1$ 的操作），答案对 $10^9 + 7$ 取模。", "inputFormat": "第一行一个整数 $T$，表示数据组数\n\n接下来 $T$ 行，每行一个小写字母串 $s$。", "outputFormat": "输出 $T$ 行，每行一个整数表示答案。", "hint": "- 对于 $30\\%$ 的数据，$T=1$，$|s| \\leq 10$；\n- 对于 $60\\%$ 的数据，$T \\leq 10$；\n- 对于 $100\\%$ 的数据，$T \\leq 10000$，$1 \\leq |s| \\leq 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Secret Code", "background": "", "description": "Given a lowercase string $s$, in each operation you may choose a position $p$ ($1 \\leq p \\lt |s|$) and perform one of the following modifications:\n\n1. Change $s_p$ to the letter with lexicographic order $+1$, and change $s_{p+1}$ to the letter with lexicographic order $-1$.\n2. Change $s_p$ to the letter with lexicographic order $-1$, and change $s_{p+1}$ to the letter with lexicographic order $+1$.\n\nAfter performing any number of operations, into how many different strings can $s$ be transformed?\n\nDuring the modifications, $s$ must always remain a valid lowercase string (that is, you cannot apply lexicographic $-1$ to the letter 'a', and you cannot apply lexicographic $+1$ to the letter 'z'). Output the answer modulo $10^9 + 7$.", "inputFormat": "The first line contains an integer $T$, the number of test cases.\n\nThe next $T$ lines each contain a lowercase string $s$.", "outputFormat": "Output $T$ lines, each containing one integer, the answer for the corresponding test case.", "hint": "- For $30\\%$ of the testdata, $T = 1$, $|s| \\leq 10$.\n- For $60\\%$ of the testdata, $T \\leq 10$.\n- For $100\\%$ of the testdata, $T \\leq 10000$, $1 \\leq |s| \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "密令", "background": null, "description": "给定一小写字母串 $s$，每次操作你可以选择一个 $p$（$1 \\leq p \\lt |s|$）执行下述修改中的任意一个：\n\n1. 将 $s_p$ 改为其字典序 $+1$ 的字母，将 $s_{p+1}$ 改为其字典序 $-1$ 的字母；\n2. 将 $s_p$ 改为其字典序 $-1$ 的字母，将 $s_{p+1}$ 改为其字典序 $+1$ 的字母。\n\n在经过任意多次操作后，串 $s$ 能变化成多少种不同于 $s$ 的字符串？\n\n修改过程中必须保证 $s$ 是合法的小写字母串（即不能对字母 a 进行字典序 $-1$ 的操作和不能对字母 z 进行字典序 $+1$ 的操作），答案对 $10^9 + 7$ 取模。", "inputFormat": "第一行一个整数 $T$，表示数据组数\n\n接下来 $T$ 行，每行一个小写字母串 $s$。", "outputFormat": "输出 $T$ 行，每行一个整数表示答案。", "hint": "- 对于 $30\\%$ 的数据，$T=1$，$|s| \\leq 10$；\n- 对于 $60\\%$ 的数据，$T \\leq 10$；\n- 对于 $100\\%$ 的数据，$T \\leq 10000$，$1 \\leq |s| \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P1386", "type": "P", "difficulty": 5, "samples": [["2\r\n4 3 10\r\n1 2 2 1 3 1\r\n10 3 8882\r\n7 9 2 9 5 10\r\n", "YES 4\r\nNO\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数学", "福建省历届夏令营"], "title": "座位安排", "background": null, "description": "给 $n$ 个人安排座位，先给每个人一个 $1\\sim n$ 的编号，设第 $i$ 个人的编号为 $a_i$（不同人的编号可以相同），接着从第一个人开始，大家依次入座。\n\n第 $i$ 个人来了以后尝试坐到 $a_i$，如果 $a_i$ 被占据了，就尝试 $a_{i+1}$，$a_{i+1}$ 也被占据了的话就尝试 $a_{i+2}$，……，如果一直尝试到第 $n$ 个都不行，该安排方案就不合法。\n\n然而有 $m$ 个人的编号已经确定（他们或许贿赂了你的上司），你只能安排剩下的人的编号。求有多少种合法的安排方案。由于答案可能很大，只需输出其除以 $M$ 后的余数即可。", "inputFormat": "第一行一个整数 $T$，表示数据组数；\n\n对于每组数据，第一行有三个整数，分别表示 $n,m,M$；\n\n若 $m$ 不为 $0$，则接下来一行有 $m$ 对整数，$p_1,q_1,p_2,q_2,\\ldots,p_m,q_m$，其中第 $i$ 对整数 $p_i,q_i$ 表示第 $p_i$ 个人的编号必须为 $q_i$。", "outputFormat": "对于每组数据输出一行，若是有解则输出 `YES`，后跟一个整数表示方案数 $\\bmod\\ M$，注意，`YES` 和数之间只有一个空格；否则输出 `NO`。", "hint": "对于 $30\\%$ 的数据，$1\\le n\\le 10$，$1\\le M\\le 32767$；\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10$，$1 \\le n \\le 300$，$0 \\le m \\le n$，$2 \\le M \\le 10^9$，$1 \\le p_i,q_i \\le n$，且保证 $p_i$ 互不相同。", "locale": "zh-CN", "translations": {"en": {"title": "Seat Arrangement", "background": "", "description": "Arrange seats for $n$ people. First assign each person a number from $1\\sim n$. Let the number of the $i$-th person be $a_i$ (different people may share the same number). Then, starting from the first person, everyone takes their seat in order.\n\nWhen the $i$-th person arrives, they try to sit at seat $a_i$. If $a_i$ is occupied, they try $a_{i+1}$. If $a_{i+1}$ is also occupied, they try $a_{i+2}$, … If they have tried up to the $n$-th and still cannot sit, then the arrangement is invalid.\n\nHowever, the numbers of $m$ people are already fixed (they may have bribed your boss), and you can only assign numbers for the remaining people. Find how many valid arrangements there are. Since the answer may be large, output it modulo $M$.", "inputFormat": "The first line contains an integer $T$, the number of test cases.\n\nFor each test case, the first line contains three integers, representing $n,m,M$.\n\nIf $m$ is not $0$, the next line contains $m$ pairs of integers $p_1,q_1,p_2,q_2,\\ldots,p_m,q_m$, where the $i$-th pair $p_i,q_i$ means that the number of the $p_i$-th person must be $q_i$.", "outputFormat": "For each test case, output one line. If there is a solution, output `YES` followed by one integer equal to the number of valid arrangements $\\bmod\\ M$. Note that there is exactly one space between `YES` and the number. Otherwise, output `NO`.", "hint": "Constraints:\n- For $30\\%$ of the testdata, $1 \\le n \\le 10$, $1 \\le M \\le 32767$.\n- For $100\\%$ of the testdata, $1 \\le T \\le 10$, $1 \\le n \\le 300$, $0 \\le m \\le n$, $2 \\le M \\le 10^9$, $1 \\le p_i,q_i \\le n$, and it is guaranteed that the $p_i$ are pairwise distinct.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "座位安排", "background": null, "description": "给 $n$ 个人安排座位，先给每个人一个 $1\\sim n$ 的编号，设第 $i$ 个人的编号为 $a_i$（不同人的编号可以相同），接着从第一个人开始，大家依次入座。\n\n第 $i$ 个人来了以后尝试坐到 $a_i$，如果 $a_i$ 被占据了，就尝试 $a_{i+1}$，$a_{i+1}$ 也被占据了的话就尝试 $a_{i+2}$，……，如果一直尝试到第 $n$ 个都不行，该安排方案就不合法。\n\n然而有 $m$ 个人的编号已经确定（他们或许贿赂了你的上司），你只能安排剩下的人的编号。求有多少种合法的安排方案。由于答案可能很大，只需输出其除以 $M$ 后的余数即可。", "inputFormat": "第一行一个整数 $T$，表示数据组数；\n\n对于每组数据，第一行有三个整数，分别表示 $n,m,M$；\n\n若 $m$ 不为 $0$，则接下来一行有 $m$ 对整数，$p_1,q_1,p_2,q_2,\\ldots,p_m,q_m$，其中第 $i$ 对整数 $p_i,q_i$ 表示第 $p_i$ 个人的编号必须为 $q_i$。", "outputFormat": "对于每组数据输出一行，若是有解则输出 `YES`，后跟一个整数表示方案数 $\\bmod\\ M$，注意，`YES` 和数之间只有一个空格；否则输出 `NO`。", "hint": "对于 $30\\%$ 的数据，$1\\le n\\le 10$，$1\\le M\\le 32767$；\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10$，$1 \\le n \\le 300$，$0 \\le m \\le n$，$2 \\le M \\le 10^9$，$1 \\le p_i,q_i \\le n$，且保证 $p_i$ 互不相同。", "locale": "zh-CN"}}}
{"pid": "P1387", "type": "P", "difficulty": 2, "samples": [["4 4\n0 1 1 1\n1 1 1 0\n0 1 1 0\n1 1 0 1\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "福建省历届夏令营", "枚举", "前缀和"], "title": "最大正方形", "background": null, "description": "在一个 $n\\times m$ 的只包含 $0$ 和 $1$ 的矩阵里找出一个不包含 $0$ 的最大正方形，输出边长。\n\n保证矩阵里有至少一个 $1$。", "inputFormat": "输入文件第一行为两个整数 $n,m(1\\leq n,m\\leq 100)$，接下来 $n$ 行，每行 $m$ 个数字，用空格隔开，$0$ 或 $1$。", "outputFormat": "一个整数，最大正方形的边长。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Largest Square", "background": "", "description": "In an $n\\times m$ matrix that contains only $0$ and $1$, find a largest square that does not contain any $0$, and output its side length. It is guaranteed that there is at least one $1$ in the matrix.", "inputFormat": "The first line of input contains two integers $n,m(1\\leq n,m\\leq 100)$. Then follow $n$ lines, each containing $m$ numbers separated by spaces, $0$ or $1$.", "outputFormat": "A single integer, the side length of the largest square.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最大正方形", "background": null, "description": "在一个 $n\\times m$ 的只包含 $0$ 和 $1$ 的矩阵里找出一个不包含 $0$ 的最大正方形，输出边长。\n\n保证矩阵里有至少一个 $1$。", "inputFormat": "输入文件第一行为两个整数 $n,m(1\\leq n,m\\leq 100)$，接下来 $n$ 行，每行 $m$ 个数字，用空格隔开，$0$ 或 $1$。", "outputFormat": "一个整数，最大正方形的边长。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1388", "type": "P", "difficulty": 4, "samples": [["5 2\n1 2 3 4 5\n", "120\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "搜索", "福建省历届夏令营", "区间 DP"], "title": "算式", "background": "", "description": "给出 $n$ 个数字，不改变它们的相对位置，在中间加入 $k$ 个乘号和 $(n-k-1)$ 个加号，括号随便加，使最终结果尽量大。因为乘号和加号一共就是 $n-1$ 个了，所以恰好每两个相邻数字之间都有一个符号。例如：\n\n$n=5$，$k=2$，$5$ 个数字分别为 $1$，$2$，$3$，$4$，$5$，可以加成：\n\n$$1\\times 2\\times(3+4+5)=24$$\n$$1\\times(2+3)\\times(4+5)=45$$\n$$(1\\times2+3)\\times(4+5)=45$$\n$$\\ldots\\ldots$$", "inputFormat": "输入的第一行为两个用空格隔开的整数，分别表示表示 $n$ 和 $k$。\n\n第二行为 $n$ 个用空格隔开的整数 $a_i$，代表给出的数字。", "outputFormat": "输出文件仅一行包含一个整数，表示要求的最大的结果。\n", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，保证 $2\\le n\\le15$，$0\\le k\\lt n$，$0 \\leq a_i \\leq 9$，答案小于 $2^{31}$。", "locale": "zh-CN", "translations": {"en": {"title": "Expression", "background": "", "description": "Given $n$ numbers, without changing their relative order, insert $k$ multiplication signs and $(n-k-1)$ plus signs between them. Parentheses can be added arbitrarily to maximize the final result. Since the total number of operators is $n-1$, there is exactly one operator between every pair of adjacent numbers. For example:\n\nWhen $n=5$, $k=2$, and the $5$ numbers are $1$, $2$, $3$, $4$, $5$, you can form:\n\n$$1\\times 2\\times(3+4+5)=24$$\n$$1\\times(2+3)\\times(4+5)=45$$\n$$(1\\times2+3)\\times(4+5)=45$$\n$$\\ldots\\ldots$$", "inputFormat": "The first line contains two integers separated by a space, denoting $n$ and $k$.\n\nThe second line contains $n$ space-separated integers $a_i$, representing the given numbers.", "outputFormat": "Output a single line containing one integer, the maximum possible result.", "hint": "#### Constraints\n\n- For $100\\%$ of the testdata, it is guaranteed that $2\\le n\\le15$, $0\\le k\\lt n$, $0 \\leq a_i \\leq 9$, and the answer is less than $2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "算式", "background": "", "description": "给出 $n$ 个数字，不改变它们的相对位置，在中间加入 $k$ 个乘号和 $(n-k-1)$ 个加号，括号随便加，使最终结果尽量大。因为乘号和加号一共就是 $n-1$ 个了，所以恰好每两个相邻数字之间都有一个符号。例如：\n\n$n=5$，$k=2$，$5$ 个数字分别为 $1$，$2$，$3$，$4$，$5$，可以加成：\n\n$$1\\times 2\\times(3+4+5)=24$$\n$$1\\times(2+3)\\times(4+5)=45$$\n$$(1\\times2+3)\\times(4+5)=45$$\n$$\\ldots\\ldots$$", "inputFormat": "输入的第一行为两个用空格隔开的整数，分别表示表示 $n$ 和 $k$。\n\n第二行为 $n$ 个用空格隔开的整数 $a_i$，代表给出的数字。", "outputFormat": "输出文件仅一行包含一个整数，表示要求的最大的结果。\n", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，保证 $2\\le n\\le15$，$0\\le k\\lt n$，$0 \\leq a_i \\leq 9$，答案小于 $2^{31}$。", "locale": "zh-CN"}}}
{"pid": "P1389", "type": "P", "difficulty": 5, "samples": [["6\n-100 5 6 10 0 0\n3 1 2 3 4 10\n", "11\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "福建省历届夏令营"], "title": "一个关于序列的游戏", "background": null, "description": "有一个序列，你可以在上面删除符合要求的连续段若干次。每次删除都会得到连续段长度对应的分数。\n\n需要符合的要求为：\n\n1. 相邻两个元素相差为 $1$。\n2. 如果某个元素不在连续段的最左或最右，那么这个元素就不能同时小于相邻的左右两个元素。\n\n$[1,2,3,4,3],[1,2],[3,2],[3]$ 都符合条件。\n\n显然，删除掉连续段后，这个段的左边和右边并在一起成为相邻元素。\n\n你的任务是对于给出的序列，计算出可能获得的最大总分。", "inputFormat": "第一行一个整数 $N$，表示序列长度。\n\n第二行 $N$ 个数，$V_1,V_2 \\cdots V_N$，代表每个长度对应的分数。\n\n第三行 $N$ 个数，$A_1,A_2 \\cdots A_N$，代表初始序列的每个元素。", "outputFormat": "一个数，可以获得的最大总分。", "hint": "### 数据范围及约定\n\n- 对于 $10\\%$ 的数据 $,N \\le 3$；\n- 对于 $40\\%$ 的数据 $,N \\le 10$；\n- 对于 $70\\%$ 的数据 $,N \\le 70$；\n- 对于 $100\\%$ 的数据 $,1 \\le N \\le 150$，$-10^4 \\le V_i \\le 10^4$，$0 \\le A_i \\le 10^9$。相同的 $A_i$ 不会超过 $14$ 个。", "locale": "zh-CN", "translations": {"en": {"title": "A Game About a Sequence", "background": "", "description": "There is a sequence. You may delete, any number of times, a contiguous segment that meets the rules below. Each deletion yields a score equal to the length of that segment.\n\nThe segment must satisfy:\n1. For every pair of adjacent elements, the absolute difference is $1$.\n2. If an element is not the leftmost or rightmost element of the segment, then it cannot be strictly smaller than both of its immediate neighbors.\n\nAll of $[1,2,3,4,3]$, $[1,2]$, $[3,2]$, and $[3]$ satisfy the rules.\n\nAfter removing a segment, the elements to the left and right of that segment become adjacent.\n\nYour task is: for the given sequence, compute the maximum possible total score.", "inputFormat": "The first line contains an integer $N$, the length of the sequence.\n\nThe second line contains $N$ integers $V_1, V_2 \\cdots V_N$, where $V_L$ is the score for deleting a segment of length $L$.\n\nThe third line contains $N$ integers $A_1, A_2 \\cdots A_N$, the elements of the initial sequence.", "outputFormat": "Output a single integer: the maximum total score that can be obtained.", "hint": "### Constraints\n\n- For $10\\%$ of the testdata, $N \\le 3$.\n- For $40\\%$ of the testdata, $N \\le 10$.\n- For $70\\%$ of the testdata, $N \\le 70$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 150$, $-10000 \\le V_i \\le 10000$, $0 \\le A_i \\le 1000000000$. No value $A_i$ appears more than $14$ times.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "一个关于序列的游戏", "background": null, "description": "有一个序列，你可以在上面删除符合要求的连续段若干次。每次删除都会得到连续段长度对应的分数。\n\n需要符合的要求为：\n\n1. 相邻两个元素相差为 $1$。\n2. 如果某个元素不在连续段的最左或最右，那么这个元素就不能同时小于相邻的左右两个元素。\n\n$[1,2,3,4,3],[1,2],[3,2],[3]$ 都符合条件。\n\n显然，删除掉连续段后，这个段的左边和右边并在一起成为相邻元素。\n\n你的任务是对于给出的序列，计算出可能获得的最大总分。", "inputFormat": "第一行一个整数 $N$，表示序列长度。\n\n第二行 $N$ 个数，$V_1,V_2 \\cdots V_N$，代表每个长度对应的分数。\n\n第三行 $N$ 个数，$A_1,A_2 \\cdots A_N$，代表初始序列的每个元素。", "outputFormat": "一个数，可以获得的最大总分。", "hint": "### 数据范围及约定\n\n- 对于 $10\\%$ 的数据 $,N \\le 3$；\n- 对于 $40\\%$ 的数据 $,N \\le 10$；\n- 对于 $70\\%$ 的数据 $,N \\le 70$；\n- 对于 $100\\%$ 的数据 $,1 \\le N \\le 150$，$-10^4 \\le V_i \\le 10^4$，$0 \\le A_i \\le 10^9$。相同的 $A_i$ 不会超过 $14$ 个。", "locale": "zh-CN"}}}
{"pid": "P1390", "type": "P", "difficulty": 4, "samples": [["10\n", "67"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "数论", "O2优化", "莫比乌斯反演", "容斥原理", "整除分块", "欧拉函数"], "title": "公约数的和", "background": "有一天，TIBBAR 和 LXL 比赛谁先算出 $1 \\sim n$ 这 $n$ 个数中每任意两个不同的数的最大公约数的和。LXL 还在敲一个复杂而冗长的程序，争取能在 $100s$ 内出解。而 TIBBAR 则直接想 $1s$ 秒过而获得完胜，请你帮他完成这个任务。\n", "description": "给定 $n$，求\n$$\\sum_{i = 1}^n \\sum_{j = i + 1}^n \\gcd(i, j)$$\n\n其中 $\\gcd(i, j)$ 表示 $i$ 和 $j$ 的最大公约数。", "inputFormat": "输入只有一行一个整数，表示 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $40\\%$ 的数据，保证 $n \\leq 2 \\times 10^3$。\n- 对于 $100\\%$ 的数据，保证 $2 \\leq n \\leq 2 \\times 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Sum of GCDs", "background": "One day, TIBBAR and LXL competed to see who could first compute the sum of the greatest common divisors of every pair of distinct numbers among the $n$ numbers from $1 \\sim n$. LXL is still typing a complicated and lengthy program, hoping to get an answer within $100s$. TIBBAR, however, wants to pass in $1s$ for a decisive win; please help him accomplish this task.", "description": "Given $n$, compute\n$$\\sum_{i = 1}^n \\sum_{j = i + 1}^n \\gcd(i, j)$$\n\nwhere $\\gcd(i, j)$ denotes the greatest common divisor of $i$ and $j$.", "inputFormat": "The input consists of a single line with one integer, denoting $n$.", "outputFormat": "Output a single line with one integer representing the answer.", "hint": "Constraints\n\n- For 40% of the testdata, $n \\leq 2 \\times 10^3$.\n- For 100% of the testdata, $2 \\leq n \\leq 2 \\times 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "公约数的和", "background": "有一天，TIBBAR 和 LXL 比赛谁先算出 $1 \\sim n$ 这 $n$ 个数中每任意两个不同的数的最大公约数的和。LXL 还在敲一个复杂而冗长的程序，争取能在 $100s$ 内出解。而 TIBBAR 则直接想 $1s$ 秒过而获得完胜，请你帮他完成这个任务。\n", "description": "给定 $n$，求\n$$\\sum_{i = 1}^n \\sum_{j = i + 1}^n \\gcd(i, j)$$\n\n其中 $\\gcd(i, j)$ 表示 $i$ 和 $j$ 的最大公约数。", "inputFormat": "输入只有一行一个整数，表示 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $40\\%$ 的数据，保证 $n \\leq 2 \\times 10^3$。\n- 对于 $100\\%$ 的数据，保证 $2 \\leq n \\leq 2 \\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P1391", "type": "P", "difficulty": 5, "samples": [["3\n0 0 0\n1 0 0\n0 0 0\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "方阵安排", "background": "", "description": "A 班希望在学校的行军比赛中取得一个好成绩，他们希望自己班级的行军方阵是一个完美的方阵。他们认为，如果每个人四周的男生个数为偶数，那么这就是一个完美的方阵。\n\n现在你已知道 A 班现有的方阵，你需要把尽量少的女生改成男生，使这个方阵变成一个完美的方阵。\n", "inputFormat": "输入的第一行是一个正整数 $n$，表示方阵大小为 $n \\times n$ 。\n\n第 $2$ 到第 $(n+1)$ 行，每行 $n$ 个数非零即一的数字，第 $(i + 1)$ 行的第 $j$ 个数字代表方阵第 $i$ 行第 $j$ 列的人的性别，其中 $0$ 为女生，$1$ 为男生。", "outputFormat": "输出一个数，表示最少需要把女生改成男生的个数。若无解，输出 $-1$。", "hint": "#### 输入输出样例 1 解释\n\n将方阵改为\n\n```\n0 1 0\n1 0 1\n0 1 0\n```\n\n---\n\n#### 数据规模与约定\n\n对于 $40\\%$ 的数据，保证 $n \\leq 6$。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 18$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Square Formation Arrangement", "background": "", "description": "Class A wants a good result in the school marching competition, and they hope their class’s marching formation is a perfect square formation. They consider the formation perfect if, for every person, the number of boys among the four adjacent neighbors (up, down, left, right) is even, considering only neighbors within the grid.\n\nYou are given Class A’s current formation. You need to change as few girls as possible into boys to make the formation perfect.", "inputFormat": "The first line contains a positive integer $n$, meaning the formation is of size $n \\times n$.\n\nLines $2$ to $(n+1)$ each contain $n$ numbers, each either $0$ or $1$. In the $(i+1)$-th line, the $j$-th number represents the gender of the person at row $i$, column $j$, where $0$ means girl and $1$ means boy.", "outputFormat": "Output a single number: the minimum number of girls that need to be changed into boys. If there is no solution, output $-1$.", "hint": "#### Explanation for Sample 1\n\nChange the formation to:\n\n```\n0 1 0\n1 0 1\n0 1 0\n```\n\n---\n\n#### Constraints\n\nFor $40\\%$ of the testdata, $n \\leq 6$.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 18$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "方阵安排", "background": "", "description": "A 班希望在学校的行军比赛中取得一个好成绩，他们希望自己班级的行军方阵是一个完美的方阵。他们认为，如果每个人四周的男生个数为偶数，那么这就是一个完美的方阵。\n\n现在你已知道 A 班现有的方阵，你需要把尽量少的女生改成男生，使这个方阵变成一个完美的方阵。\n", "inputFormat": "输入的第一行是一个正整数 $n$，表示方阵大小为 $n \\times n$ 。\n\n第 $2$ 到第 $(n+1)$ 行，每行 $n$ 个数非零即一的数字，第 $(i + 1)$ 行的第 $j$ 个数字代表方阵第 $i$ 行第 $j$ 列的人的性别，其中 $0$ 为女生，$1$ 为男生。", "outputFormat": "输出一个数，表示最少需要把女生改成男生的个数。若无解，输出 $-1$。", "hint": "#### 输入输出样例 1 解释\n\n将方阵改为\n\n```\n0 1 0\n1 0 1\n0 1 0\n```\n\n---\n\n#### 数据规模与约定\n\n对于 $40\\%$ 的数据，保证 $n \\leq 6$。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 18$。\n", "locale": "zh-CN"}}}
{"pid": "P1392", "type": "P", "difficulty": 5, "samples": [["3 3 2\n1 2 3\n6 3 5\n4 1 2\n", "5 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["堆"], "title": "取数", "background": null, "description": "在一个 $n$ 行 $m$ 列的数阵中，你须在每一行取一个数（共 $n$ 个数），并将它们相加得到一个和。对于给定的数阵，请你输出和前 $k$ 小的取数方法。", "inputFormat": "第一行，三个数 $n,m,k$。\n\n第 $2\\sim n+1$ 行，每行 $m$ 个正整数。", "outputFormat": "一行共 $k$ 个数，代表在每一行取一个数前 $k$ 小的加和。", "hint": "对于 $20\\%$ 的数据，$1\\le n\\le 8$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 800$，$1\\le k\\le m\\le 800$，保证最后答案不超过 $2^{31}-1$。", "locale": "zh-CN", "translations": {"en": {"title": "Picking Numbers", "background": "", "description": "In an $n$-row, $m$-column array of numbers, you must pick one number from each row (a total of $n$ numbers) and add them to get a sum. For the given array, please output the $k$ smallest picking methods by sum.", "inputFormat": "The first line contains three numbers $n,m,k$.\nLines $2\\sim n+1$, each line contains $m$ positive integers.", "outputFormat": "One line containing $k$ numbers, representing the $k$ smallest sums when picking one number from each row.", "hint": "For $20\\%$ of the testdata, $1\\le n\\le 8$.\nFor $100\\%$ of the testdata, $1\\le n\\le 800$, $1\\le k\\le m\\le 800$. It is guaranteed that the final answer does not exceed $2^{31}-1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "取数", "background": null, "description": "在一个 $n$ 行 $m$ 列的数阵中，你须在每一行取一个数（共 $n$ 个数），并将它们相加得到一个和。对于给定的数阵，请你输出和前 $k$ 小的取数方法。", "inputFormat": "第一行，三个数 $n,m,k$。\n\n第 $2\\sim n+1$ 行，每行 $m$ 个正整数。", "outputFormat": "一行共 $k$ 个数，代表在每一行取一个数前 $k$ 小的加和。", "hint": "对于 $20\\%$ 的数据，$1\\le n\\le 8$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 800$，$1\\le k\\le m\\le 800$，保证最后答案不超过 $2^{31}-1$。", "locale": "zh-CN"}}}
{"pid": "P1393", "type": "P", "difficulty": 6, "samples": [["3 2 2\n1 1", "623902721"], ["6 3 4\n1 2 3 2", "480636170"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["字符串", "数学", "KMP 算法", "快速数论变换 NTT"], "title": "Mivik 的标题", "background": "Mivik 现在已经写好了他的书，他现在准备给这本书起个书名去投稿。", "description": "由于 Mivik 写书是乱敲键盘敲出来的，他准备对书名干同样的事情。Mivik 的键盘上有 $m$ 个不同的按键，对应着 $m$ 个不同的字符。Mivik 决定在这个键盘上**等概率**随机敲 $n$ 次敲出标题。但出于某些原因，Mivik 希望书名中要包含有一个人的名字 $S$。于是 Mivik 来问你，他随机敲出的标题有多大的概率包含有这个名字。\n\n同样的，Mivik 并不喜欢奇形怪状的小数，所以你只需要输出这个概率对 $998244353$ 取模后的值。", "inputFormat": "第一行三个整数 $n$、$m$、$|S|$，其中 $|S|$ 代表这个名字的长度。\n\n第二行给出 $|S|$ 个整数 $a_i$，代表这个名字。", "outputFormat": "一行一个整数，代表概率对 $998244353$ 取模后的值。", "hint": "### 样例解释\n\n样例一：为方便描述，我们定义键盘上两个按键为 `a` 和 `b`。那么长度为 3 的所有字符串共有 `aaa`、`aab`、`aba`、`abb`、`baa`、`bab`、`bba`、`bbb` 这 8 个，其中包含有指定名字 `aa` 的共有 `aaa`、`aab`、`baa` 这三个，则概率为 $\\frac{3}{8}$，取模后得到 623902721。\n\n### 数据范围\n\n对于全部数据，有 $1\\le |S|\\le 10^5$，$|S|\\le n\\le |S|+10^5$，$1\\le m\\le 10^8$。\n\nSubtask 1 (5 pts)：满足 $m=1$。\n\nSubtask 2 (20 pts)：满足 $1\\le n, m\\le 250$。\n\nSubtask 3 (30 pts)：满足 $1\\le n, m\\le 5000$。\n\nSubtask 3 (45 pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Mivik 的标题", "background": "Mivik 现在已经写好了他的书，他现在准备给这本书起个书名去投稿。", "description": "由于 Mivik 写书是乱敲键盘敲出来的，他准备对书名干同样的事情。Mivik 的键盘上有 $m$ 个不同的按键，对应着 $m$ 个不同的字符。Mivik 决定在这个键盘上**等概率**随机敲 $n$ 次敲出标题。但出于某些原因，Mivik 希望书名中要包含有一个人的名字 $S$。于是 Mivik 来问你，他随机敲出的标题有多大的概率包含有这个名字。\n\n同样的，Mivik 并不喜欢奇形怪状的小数，所以你只需要输出这个概率对 $998244353$ 取模后的值。", "inputFormat": "第一行三个整数 $n$、$m$、$|S|$，其中 $|S|$ 代表这个名字的长度。\n\n第二行给出 $|S|$ 个整数 $a_i$，代表这个名字。", "outputFormat": "一行一个整数，代表概率对 $998244353$ 取模后的值。", "hint": "### 样例解释\n\n样例一：为方便描述，我们定义键盘上两个按键为 `a` 和 `b`。那么长度为 3 的所有字符串共有 `aaa`、`aab`、`aba`、`abb`、`baa`、`bab`、`bba`、`bbb` 这 8 个，其中包含有指定名字 `aa` 的共有 `aaa`、`aab`、`baa` 这三个，则概率为 $\\frac{3}{8}$，取模后得到 623902721。\n\n### 数据范围\n\n对于全部数据，有 $1\\le |S|\\le 10^5$，$|S|\\le n\\le |S|+10^5$，$1\\le m\\le 10^8$。\n\nSubtask 1 (5 pts)：满足 $m=1$。\n\nSubtask 2 (20 pts)：满足 $1\\le n, m\\le 250$。\n\nSubtask 3 (30 pts)：满足 $1\\le n, m\\le 5000$。\n\nSubtask 3 (45 pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P1394", "type": "P", "difficulty": 3, "samples": [["4 2\n1 2 3 4\n1 2\n3 4\n", "Non"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "图论", "福建省历届夏令营"], "title": "山上的国度", "background": "", "description": "有一个神秘的小国坐落在南方的青山之上，只有当黄昏时，落日耀眼的余晖刺破薄雾的遮拦，有机缘者才可看到小山上面的 $n$ 个美丽的村庄。\n\n传说这个古老的国家里有 $m$ 条枢纽管道，每一条苍老的管道连接着两个村庄，千百年来为村民提供水源的流通。\n\n$n$ 个村庄里只有一个水库，从有水库的村庄通过这些枢纽管道向其它村庄提供水源。大家都明白水往低处流，所有村庄都能得到水库的供水。\n\n黄小明就是那个有机缘者，同时他也是个偏执狂（把小猫绑在一起的那个变态小明），他迫切的想要知道水库应该在哪一个村庄，你能帮他解决疑惑吗？\n", "inputFormat": "第一行输入 $n,m$（$n,m \\leq 300$）。\n\n第二行输入 $n$ 个正整数，第 $i$ 个数表示第 $i$ 个村庄的海拔。之后 $m$ 行每行两个数表示这两个村庄之间有一条道路。（同海拔之间不能相互流水）\n", "outputFormat": "若存在这样的村庄，输出两行：第一行为 `Oui, j'ai trouve la solution.`，第二行为村庄的编号。\n\n否则，请输出 `Non`。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "The Kingdom on the Mountain", "background": "", "description": "A mysterious small country lies atop the verdant mountains in the south. Only at dusk, when the dazzling afterglow of the setting sun pierces the thin mist, can the destined few see the $n$ beautiful villages on the hill.\n\nLegend says there are $m$ hub pipelines in this ancient country. Each aged pipeline connects two villages and has carried water for the villagers for centuries.\n\nAmong the $n$ villages there is exactly one reservoir, which supplies water from its village to the others through these hub pipelines. Everyone knows that water flows downhill, and all villages can receive supply from the reservoir.\n\nHuang Xiaoming is one of the destined few, and he is also quite obsessive. He is eager to know in which village the reservoir should be located. Can you help resolve his doubt?", "inputFormat": "The first line contains $n, m$ ($n, m \\leq 300$).\n\nThe second line contains $n$ positive integers; the $i$-th number is the elevation of the $i$-th village. Then follow $m$ lines, each containing two integers indicating that there is a pipeline between those two villages. (No flow is possible between villages of the same elevation.)", "outputFormat": "If such a village exists, output two lines: the first line is `Oui, j'ai trouve la solution.`, and the second line is the index of the village.\n\nOtherwise, output `Non`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "山上的国度", "background": "", "description": "有一个神秘的小国坐落在南方的青山之上，只有当黄昏时，落日耀眼的余晖刺破薄雾的遮拦，有机缘者才可看到小山上面的 $n$ 个美丽的村庄。\n\n传说这个古老的国家里有 $m$ 条枢纽管道，每一条苍老的管道连接着两个村庄，千百年来为村民提供水源的流通。\n\n$n$ 个村庄里只有一个水库，从有水库的村庄通过这些枢纽管道向其它村庄提供水源。大家都明白水往低处流，所有村庄都能得到水库的供水。\n\n黄小明就是那个有机缘者，同时他也是个偏执狂（把小猫绑在一起的那个变态小明），他迫切的想要知道水库应该在哪一个村庄，你能帮他解决疑惑吗？\n", "inputFormat": "第一行输入 $n,m$（$n,m \\leq 300$）。\n\n第二行输入 $n$ 个正整数，第 $i$ 个数表示第 $i$ 个村庄的海拔。之后 $m$ 行每行两个数表示这两个村庄之间有一条道路。（同海拔之间不能相互流水）\n", "outputFormat": "若存在这样的村庄，输出两行：第一行为 `Oui, j'ai trouve la solution.`，第二行为村庄的编号。\n\n否则，请输出 `Non`。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1395", "type": "P", "difficulty": 3, "samples": [["4\n1 2 \n2 3 \n3 4 \n", "2 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["福建省历届夏令营", "树的重心"], "title": "会议", "background": "", "description": "有一个村庄居住着 $n$ 个村民，有 $n-1$ 条路径使得这 $n$ 个村民的家联通，每条路径的长度都为 $1$。现在村长希望在某个村民家中召开一场会议，村长希望所有村民到会议地点的距离之和最小，那么村长应该要把会议地点设置在哪个村民的家中，并且这个距离总和最小是多少？若有多个节点都满足条件，则选择节点编号最小的那个点。", "inputFormat": "第一行，一个数 $n$，表示有 $n$ 个村民。\n\n接下来 $n-1$ 行，每行两个数字 $a$ 和 $b$，表示村民 $a$ 的家和村民 $b$ 的家之间存在一条路径。", "outputFormat": "一行输出两个数字 $x$ 和 $y$。\n\n$x$ 表示村长将会在哪个村民家中举办会议。\n\n$y$ 表示距离之和的最小值。", "hint": "#### 数据范围\n\n对于 $70\\%$ 数据 $n \\le 10^3$。\n\n对于 $100\\%$ 数据 $n \\le 5 \\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Meeting", "background": "", "description": "There is a village with $n$ villagers, connected by $n-1$ paths so that all $n$ homes are connected. Each path has length $1$. The village head wants to hold a meeting at some villager’s home. He wants the sum of distances from all villagers to the meeting place to be minimal. Which villager’s home should be chosen, and what is the minimum total distance? If multiple nodes meet the condition, choose the node with the smallest index.", "inputFormat": "The first line contains an integer $n$, the number of villagers.\n\nThe next $n-1$ lines each contain two integers $a$ and $b$, indicating that there is a path between villager $a$ and villager $b$.", "outputFormat": "Output two integers $x$ and $y$ in one line.\n\nHere, $x$ is the villager’s home where the meeting will be held.\n\n$y$ is the minimum possible sum of distances.", "hint": "#### Constraints\n\nFor $70\\%$ of the testdata, $n \\le 10^3$.\n\nFor $100\\%$ of the testdata, $n \\le 5 \\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "会议", "background": "", "description": "有一个村庄居住着 $n$ 个村民，有 $n-1$ 条路径使得这 $n$ 个村民的家联通，每条路径的长度都为 $1$。现在村长希望在某个村民家中召开一场会议，村长希望所有村民到会议地点的距离之和最小，那么村长应该要把会议地点设置在哪个村民的家中，并且这个距离总和最小是多少？若有多个节点都满足条件，则选择节点编号最小的那个点。", "inputFormat": "第一行，一个数 $n$，表示有 $n$ 个村民。\n\n接下来 $n-1$ 行，每行两个数字 $a$ 和 $b$，表示村民 $a$ 的家和村民 $b$ 的家之间存在一条路径。", "outputFormat": "一行输出两个数字 $x$ 和 $y$。\n\n$x$ 表示村长将会在哪个村民家中举办会议。\n\n$y$ 表示距离之和的最小值。", "hint": "#### 数据范围\n\n对于 $70\\%$ 数据 $n \\le 10^3$。\n\n对于 $100\\%$ 数据 $n \\le 5 \\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P1396", "type": "P", "difficulty": 3, "samples": [["3 3 1 3\n1 2 2\n2 3 1\n1 3 3", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "二分", "并查集", "福建省历届夏令营", "广度优先搜索 BFS", "最短路", "生成树"], "title": "营救", "background": "“咚咚咚……”“查水表！”原来是查水表来了，现在哪里找这么热心上门的查表员啊！小明感动得热泪盈眶，开起了门……", "description": "妈妈下班回家，街坊邻居说小明被一群陌生人强行押上了警车！妈妈丰富的经验告诉她小明被带到了 $t$ 区，而自己在 $s$ 区。\n\n该市有 $m$ 条大道连接 $n$ 个区，一条大道将两个区相连接，每个大道有一个拥挤度。小明的妈妈虽然很着急，但是不愿意拥挤的人潮冲乱了她优雅的步伐。所以请你帮她规划一条从 $s$ 至 $t$ 的路线，使得经过道路的拥挤度最大值最小。", "inputFormat": "第一行有四个用空格隔开的 $n$，$m$，$s$，$t$，其含义见【题目描述】。\n\n接下来 $m$ 行，每行三个整数 $u, v, w$，表示有一条大道连接区 $u$ 和区 $v$，且拥挤度为 $w$。\n\n**两个区之间可能存在多条大道**。", "outputFormat": "输出一行一个整数，代表最大的拥挤度。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n\\leq 10$。\n- 对于 $60\\%$ 的数据，保证 $n\\leq 100$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n\\leq 10^4$，$1 \\leq m \\leq 2 \\times 10^4$，$w \\leq 10^4$，$1 \\leq s, t \\leq n$。且从 $s$ 出发一定能到达 $t$ 区。\n\n--- \n\n#### 样例输入输出 1 解释\n\n小明的妈妈要从 $1$ 号点去 $3$ 号点，最优路线为 $1 \\to 2 \\to 3$。", "locale": "zh-CN", "translations": {"en": {"title": "Rescue", "background": "“Knock, knock...” “Water meter inspection!” Turns out it’s the meter inspector. Where can you find such thoughtful door-to-door inspectors these days? Moved to tears, Xiaoming opened the door.", "description": "When Mom came home from work, the neighbors said that Xiaoming had been forced into a police car by a group of strangers. With her experience, she inferred that Xiaoming was taken to district $t$, while she herself is in district $s$.\n\nThe city has $m$ avenues connecting $n$ districts. Each avenue connects two districts and has a congestion level. Although Xiaoming’s mom is in a hurry, she does not want the crowded flow to disrupt her elegant pace. Please help her plan a route from $s$ to $t$ such that the maximum congestion level among the avenues on the route is minimized.", "inputFormat": "The first line contains four space-separated integers $n$, $m$, $s$, $t$, whose meanings are as described above.\n\nThe next $m$ lines each contain three integers $u, v, w$, indicating there is an avenue connecting districts $u$ and $v$ with congestion level $w$.\n\nThere may be multiple avenues between two districts.", "outputFormat": "Output a single integer: the minimal possible value of the maximum congestion level along the chosen route.", "hint": "#### Constraints\n\n- For $30\\%$ of the testdata, $n \\leq 10$.\n- For $60\\%$ of the testdata, $n \\leq 100$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 10^4$, $1 \\leq m \\leq 2 \\times 10^4$, $w \\leq 10^4$, $1 \\leq s, t \\leq n$. It is guaranteed that from $s$ one can reach district $t$.\n\n---\n\n#### Explanation for Sample 1\n\nXiaoming’s mom needs to go from point 1 to point 3. An optimal route is 1 -> 2 -> 3.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "营救", "background": "“咚咚咚……”“查水表！”原来是查水表来了，现在哪里找这么热心上门的查表员啊！小明感动得热泪盈眶，开起了门……", "description": "妈妈下班回家，街坊邻居说小明被一群陌生人强行押上了警车！妈妈丰富的经验告诉她小明被带到了 $t$ 区，而自己在 $s$ 区。\n\n该市有 $m$ 条大道连接 $n$ 个区，一条大道将两个区相连接，每个大道有一个拥挤度。小明的妈妈虽然很着急，但是不愿意拥挤的人潮冲乱了她优雅的步伐。所以请你帮她规划一条从 $s$ 至 $t$ 的路线，使得经过道路的拥挤度最大值最小。", "inputFormat": "第一行有四个用空格隔开的 $n$，$m$，$s$，$t$，其含义见【题目描述】。\n\n接下来 $m$ 行，每行三个整数 $u, v, w$，表示有一条大道连接区 $u$ 和区 $v$，且拥挤度为 $w$。\n\n**两个区之间可能存在多条大道**。", "outputFormat": "输出一行一个整数，代表最大的拥挤度。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n\\leq 10$。\n- 对于 $60\\%$ 的数据，保证 $n\\leq 100$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n\\leq 10^4$，$1 \\leq m \\leq 2 \\times 10^4$，$w \\leq 10^4$，$1 \\leq s, t \\leq n$。且从 $s$ 出发一定能到达 $t$ 区。\n\n--- \n\n#### 样例输入输出 1 解释\n\n小明的妈妈要从 $1$ 号点去 $3$ 号点，最优路线为 $1 \\to 2 \\to 3$。", "locale": "zh-CN"}}}
{"pid": "P1397", "type": "P", "difficulty": 5, "samples": [["3 4 1 3 2 6\n", "85\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["递推", "2013", "NOI", "矩阵乘法", "线性递推"], "title": "[NOI2013] 矩阵游戏", "background": "", "description": "婷婷是个喜欢矩阵的小朋友，有一天她想用电脑生成一个巨大的 $n$ 行 $m$ 列的矩阵（你不用担心她如何存储）。她生成的这个矩阵满足一个神奇的性质：若用 $F[i,j]$ 来表示矩阵中第 $i$ 行第 $j$ 列的元素，则 $F[i,j]$ 满足下面的递推式:\n\n$$\\begin{aligned}\nF[1, 1] &= 1 \\\\\nF[i, j] &=a\\times F[i, j-1]+b, &j\\neq 1 \\\\\nF[i, 1] &=c\\times F[i-1, m]+d, &i\\neq 1 \\\\\n\\end{aligned}$$\n\n递推式中 $a,b,c,d$ 都是给定的常数。\n\n现在婷婷想知道 $F[n,m]$ 的值是多少，请你帮助她。由于最终结果可能很大，你只需要输出 $F[n,m]$ 除以 $10^9+7$ 的余数。\n", "inputFormat": "包含一行有六个整数 $n,m,a,b,c,d$。意义如题所述。\n", "outputFormat": "包含一个整数，表示 $F[n,m]$ 除以 $10^9+7$ 的余数。\n", "hint": "【样例1说明】\n\n样例中的矩阵为：\n\n$$\\begin{pmatrix}\n 1 &  4 &  7 & 10 \\\\\n26 & 29 & 32 & 35 \\\\\n76 & 79 & 82 & 85 \\\\\n\\end{pmatrix}$$\n\n### 数据范围\n\n::cute-table{tuack}\n\n| 测试点编号 | 数据范围 |\n| :-: | :-: |\n| 1 | $1 \\le n,m \\le 10$；$1 \\le a,b,c,d \\le 1000$ |\n| 2 | $1 \\le n,m \\le 100$；$1 \\le a,b,c,d \\le 1000$ |\n| 3 | $1 \\le n,m \\le 10^3$；$1 \\le a,b,c,d \\le 10^9$ |\n| 4 | $1 \\le n,m \\le 10^3$；$1 \\le a,b,c,d \\le 10^9$ |\n| 5 | $1 \\le n,m \\le 10^9$；$1 \\le a = c \\le 10^9$；$1 \\le b = d \\le 10^9$ |\n| 6 | $1 \\le n,m \\le 10^9$；$a = c = 1$；$1 \\le b,d \\le 10^9$ |\n| 7 | $1 \\le n,m,a,b,c,d \\le 10^9$ |\n| 8 | $1 \\le n,m,a,b,c,d \\le 10^9$ |\n| 9 | $1 \\le n,m,a,b,c,d \\le 10^9$ |\n| 10 | $1 \\le n,m,a,b,c,d \\le 10^9$ |\n| 11 | $1 \\le n,m \\le 10^{1\\,000}$；$a = c = 1$；$1 \\le b,d \\le 10^9$ |\n| 12 | $1 \\le n,m \\le 10^{1\\,000}$；$1 \\le a = c \\le 10^9$；$1 \\le b = d \\le 10^9$ |\n| 13 | $1 \\le n,m \\le 10^{1\\,000}$；$1 \\le a,b,c,d \\le 10^9$ |\n| 14 | $1 \\le n,m \\le 10^{1\\,000}$；$1 \\le a,b,c,d \\le 10^9$ |\n| 15 | $1 \\le n,m \\le 10^{20\\,000}$；$1 \\le a,b,c,d \\le 10^9$ |\n| 16 | $1 \\le n,m \\le 10^{20\\,000}$；$1 \\le a,b,c,d \\le 10^9$ |\n| 17 | $1 \\le n,m \\le 10^{1\\,000\\,000}$；$a = c = 1$；$1 \\le b,d \\le 10^9$ |\n| 18 | $1 \\le n,m \\le 10^{1\\,000\\,000}$；$1 \\le a = c \\le 10^9$；$1 \\le b = d \\le 10^9$ |\n| 19 | $1 \\le n,m \\le 10^{1\\,000\\,000}$；$1 \\le a,b,c,d \\le 10^9$ |\n| 20 | $1 \\le n,m \\le 10^{1\\,000\\,000}$；$1 \\le a,b,c,d \\le 10^9$ |", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2013] Matrix Game", "background": "", "description": "Tingting is a kid who likes matrices. One day she wants to use a computer to generate a huge matrix with $n$ rows and $m$ columns (you do not need to worry about how she stores it). The matrix she generates has a magical property: let $F[i, j]$ denote the element at row $i$, column $j$, then $F[i, j]$ satisfies the following recurrence:\n\n$$\\begin{aligned}\nF[1, 1] &= 1 \\\\\nF[i, j] &=a\\times F[i, j-1]+b, &j\\neq 1 \\\\\nF[i, 1] &=c\\times F[i-1, m]+d, &i\\neq 1 \\\\\n\\end{aligned}$$\n\nIn the recurrence, $a, b, c, d$ are given constants.\n\nNow Tingting wants to know the value of $F[n, m]$. Please help her. Since the final result can be large, you only need to output the remainder of $F[n, m]$ modulo $10^9 + 7$.", "inputFormat": "One line containing six integers $n, m, a, b, c, d$. The meaning is as described above.", "outputFormat": "Output a single integer, the value of $F[n, m]$ modulo $10^9 + 7$.", "hint": "Explanation for Sample 1.\n\nThe matrix in the sample is:\n\n$$\\begin{pmatrix}\n 1 &  4 &  7 & 10 \\\\\n26 & 29 & 32 & 35 \\\\\n76 & 79 & 82 & 85 \\\\\n\\end{pmatrix}$$\n\n### Constraints\n\n::cute-table{tuack}\n\n| Test point ID | Constraints |\n| :-: | :-: |\n| 1 | $1 \\le n,m \\le 10$; $1 \\le a,b,c,d \\le 1000$ |\n| 2 | $1 \\le n,m \\le 100$; $1 \\le a,b,c,d \\le 1000$ |\n| 3 | $1 \\le n,m \\le 10^3$; $1 \\le a,b,c,d \\le 10^9$ |\n| 4 | $1 \\le n,m \\le 10^3$; $1 \\le a,b,c,d \\le 10^9$ |\n| 5 | $1 \\le n,m \\le 10^9$; $1 \\le a = c \\le 10^9$; $1 \\le b = d \\le 10^9$ |\n| 6 | $1 \\le n,m \\le 10^9$; $a = c = 1$; $1 \\le b,d \\le 10^9$ |\n| 7 | $1 \\le n,m,a,b,c,d \\le 10^9$ |\n| 8 | $1 \\le n,m,a,b,c,d \\le 10^9$ |\n| 9 | $1 \\le n,m,a,b,c,d \\le 10^9$ |\n| 10 | $1 \\le n,m,a,b,c,d \\le 10^9$ |\n| 11 | $1 \\le n,m \\le 10^{1\\,000}$; $a = c = 1$; $1 \\le b,d \\le 10^9$ |\n| 12 | $1 \\le n,m \\le 10^{1\\,000}$; $1 \\le a = c \\le 10^9$; $1 \\le b = d \\le 10^9$ |\n| 13 | $1 \\le n,m \\le 10^{1\\,000}$; $1 \\le a,b,c,d \\le 10^9$ |\n| 14 | $1 \\le n,m \\le 10^{1\\,000}$; $1 \\le a,b,c,d \\le 10^9$ |\n| 15 | $1 \\le n,m \\le 10^{20\\,000}$; $1 \\le a,b,c,d \\le 10^9$ |\n| 16 | $1 \\le n,m \\le 10^{20\\,000}$; $1 \\le a,b,c,d \\le 10^9$ |\n| 17 | $1 \\le n,m \\le 10^{1\\,000\\,000}$; $a = c = 1$; $1 \\le b,d \\le 10^9$ |\n| 18 | $1 \\le n,m \\le 10^{1\\,000\\,000}$; $1 \\le a = c \\le 10^9$; $1 \\le b = d \\le 10^9$ |\n| 19 | $1 \\le n,m \\le 10^{1\\,000\\,000}$; $1 \\le a,b,c,d \\le 10^9$ |\n| 20 | $1 \\le n,m \\le 10^{1\\,000\\,000}$; $1 \\le a,b,c,d \\le 10^9$ |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2013] 矩阵游戏", "background": "", "description": "婷婷是个喜欢矩阵的小朋友，有一天她想用电脑生成一个巨大的 $n$ 行 $m$ 列的矩阵（你不用担心她如何存储）。她生成的这个矩阵满足一个神奇的性质：若用 $F[i,j]$ 来表示矩阵中第 $i$ 行第 $j$ 列的元素，则 $F[i,j]$ 满足下面的递推式:\n\n$$\\begin{aligned}\nF[1, 1] &= 1 \\\\\nF[i, j] &=a\\times F[i, j-1]+b, &j\\neq 1 \\\\\nF[i, 1] &=c\\times F[i-1, m]+d, &i\\neq 1 \\\\\n\\end{aligned}$$\n\n递推式中 $a,b,c,d$ 都是给定的常数。\n\n现在婷婷想知道 $F[n,m]$ 的值是多少，请你帮助她。由于最终结果可能很大，你只需要输出 $F[n,m]$ 除以 $10^9+7$ 的余数。\n", "inputFormat": "包含一行有六个整数 $n,m,a,b,c,d$。意义如题所述。\n", "outputFormat": "包含一个整数，表示 $F[n,m]$ 除以 $10^9+7$ 的余数。\n", "hint": "【样例1说明】\n\n样例中的矩阵为：\n\n$$\\begin{pmatrix}\n 1 &  4 &  7 & 10 \\\\\n26 & 29 & 32 & 35 \\\\\n76 & 79 & 82 & 85 \\\\\n\\end{pmatrix}$$\n\n### 数据范围\n\n::cute-table{tuack}\n\n| 测试点编号 | 数据范围 |\n| :-: | :-: |\n| 1 | $1 \\le n,m \\le 10$；$1 \\le a,b,c,d \\le 1000$ |\n| 2 | $1 \\le n,m \\le 100$；$1 \\le a,b,c,d \\le 1000$ |\n| 3 | $1 \\le n,m \\le 10^3$；$1 \\le a,b,c,d \\le 10^9$ |\n| 4 | $1 \\le n,m \\le 10^3$；$1 \\le a,b,c,d \\le 10^9$ |\n| 5 | $1 \\le n,m \\le 10^9$；$1 \\le a = c \\le 10^9$；$1 \\le b = d \\le 10^9$ |\n| 6 | $1 \\le n,m \\le 10^9$；$a = c = 1$；$1 \\le b,d \\le 10^9$ |\n| 7 | $1 \\le n,m,a,b,c,d \\le 10^9$ |\n| 8 | $1 \\le n,m,a,b,c,d \\le 10^9$ |\n| 9 | $1 \\le n,m,a,b,c,d \\le 10^9$ |\n| 10 | $1 \\le n,m,a,b,c,d \\le 10^9$ |\n| 11 | $1 \\le n,m \\le 10^{1\\,000}$；$a = c = 1$；$1 \\le b,d \\le 10^9$ |\n| 12 | $1 \\le n,m \\le 10^{1\\,000}$；$1 \\le a = c \\le 10^9$；$1 \\le b = d \\le 10^9$ |\n| 13 | $1 \\le n,m \\le 10^{1\\,000}$；$1 \\le a,b,c,d \\le 10^9$ |\n| 14 | $1 \\le n,m \\le 10^{1\\,000}$；$1 \\le a,b,c,d \\le 10^9$ |\n| 15 | $1 \\le n,m \\le 10^{20\\,000}$；$1 \\le a,b,c,d \\le 10^9$ |\n| 16 | $1 \\le n,m \\le 10^{20\\,000}$；$1 \\le a,b,c,d \\le 10^9$ |\n| 17 | $1 \\le n,m \\le 10^{1\\,000\\,000}$；$a = c = 1$；$1 \\le b,d \\le 10^9$ |\n| 18 | $1 \\le n,m \\le 10^{1\\,000\\,000}$；$1 \\le a = c \\le 10^9$；$1 \\le b = d \\le 10^9$ |\n| 19 | $1 \\le n,m \\le 10^{1\\,000\\,000}$；$1 \\le a,b,c,d \\le 10^9$ |\n| 20 | $1 \\le n,m \\le 10^{1\\,000\\,000}$；$1 \\le a,b,c,d \\le 10^9$ |", "locale": "zh-CN"}}}
{"pid": "P1398", "type": "P", "difficulty": 6, "samples": [["3 13 \n1 1 -1 -1 1 -1 1 1 1 -1 1 1 1 \n1 -1 1 -1 1 -1 1 -1 1 -1 -1 1 -1 \n1 -1 -1 1 1 -1 1 1 1 -1 1 1 1 \n", "24"], ["3 13\n-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1\n-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1\n-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1\n\n", "-20"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2013", "NOI", "枚举"], "title": "[NOI2013] 书法家", "background": "", "description": "小 E 同学非常喜欢书法，他听说 NOI2013 已经开始了，想题一幅 “NOI” 的字送给大家。\n\n小 E 有一张非常神奇的纸，纸可以用一个 $n$ 行 $m$ 列的二维方格矩阵来表示，为了描述方便，我们定义矩阵左下角方格坐标为 $(1,1)$，右上角方格坐标为 $(m, n)$。\n\n矩阵的每个方格有一个整数的幸运值。在格子上面写字可以增加大家的幸运度，幸运度的大小恰好是所有被笔写到的方格的幸运值之和。现在你要在上面写\n上 `N`，`O`，`I` 三个字母。\n\n下面给出 $3$ 个书法字的定义:\n- `N` 由若干（$\\ge 3$）个边平行于坐标轴的矩形组成，设由 $K$ 个矩形组成（标号 $1 \\ldots K$），第 $i$ 个矩形的左下角方格坐标设为 $(L_i, B_i)$，右上角坐标设为 $(R_i, T_i )$，要求满足：\n  1. $L_i \\le R_i, B_i \\le T_i$；\n  2. 对任意 $1 < i \\le K$，有 $L_i = R_{i-1} + 1$；\n  3. 对任意 $3 \\le i < K$，有 $B_{i−1} − 1 \\le T_i \\le T_{i-1}$，$B_i \\le B_{i-1}$；\n  4. $B_2 > B_1$，$T_2 = T_1$，$B_{K-1} = B_K$，$T_{K-1} < T_K$；\n- `O` 由一个大矩形 $A$，挖去一个小矩形 $B$ 得到，这两个矩形的边都平行于坐标轴。设大矩形 $A$ 左下角的方格坐标为 $(u, v)$，长为 $W$，宽为 $H$，则小矩形 $B$ 满足左下角方格坐标为 $(u + 1, v + 1)$，长 $W - 2$，宽 $H - 2$。要求满足：\n  1. $W \\ge 3$，$H \\ge 3$；\n  2. $u > R_K + 1$；\n- `I` 为 $3$ 个边平行于坐标轴的从下到上的实心矩形组成，从下到上依次标号为 $1,2,3$，第 $i$ 个矩形的左下角格子坐标设为 $(P_i , Q_i )$，右上角格子坐标设为 $(G_i , H_i )$，要求满足：\n  1. $P_i \\le G_i , Q_i \\le H_i$；\n  2. $P_1 = P_3 > u + W$，$G_1 = G_3$；\n  3. $Q_1 = H_1 = Q_2 - 1, H_2 + 1 = Q_3 = H_3$；\n  4. $P_1 < P_2 \\le G_2 < G_1$。\n\n下图是一个 `N`,`O`,`I` 的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7t4tquv.png)\n\n另外，所有画的图形均不允许超过纸张的边界。现在小 E 想要知道,他能画出的最大幸运度是多少。", "inputFormat": "第一行包含两个正整数 $n$ 和 $m$ ,分别表示矩阵的行数和列数。\n\n接下来 $n$ 行，每行有 $m$ 个整数，第 $i + 1$ 行的第 $j$ 个数表示格子 $(j, n - i + 1)$ 的幸运值。", "outputFormat": "输出一个整数 $T$，表示小 E 能够获得的最大幸运度。", "hint": "### 样例解释 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vq7asar5.png)\n\n### 样例解释 2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1ojygumc.png)\n\n### 数据范围\n\n::cute-table{tuack}\n\n| 测试点编号 |   $n$   |   $m$    | 幸运值范围 |\n| :--------: | :------: | :------: | :--------: |\n|     1      |   $=3$   |  $=12$   | $[-50,50]$ |\n|     2      |   ^   |  ^   | ^ |\n|     3      |   ^   |  ^   | ^ |\n|     4      |   ^   |  ^   | ^ |\n|     5      | $\\le10$  | $\\le20$  | ^ |\n|     6      | ^  | ^  | ^ |\n|     7      | ^  | ^  | ^ |\n|     8      | ^  | ^  | ^ |\n|     9      | $\\le150$ | $\\le500$ |    $=1$    |\n|     10     | ^ | ^ |    ^    |\n|     11     | $\\le80$  | $\\le80$  |    $[-200,200]$    |\n|     12     | ^  | ^  |    ^    |\n|     13     | ^  | ^  |    ^    |\n|     14     | ^  | ^  |    ^    |\n|     15     | $\\le150$  | $\\le500$  |    ^    |\n|     16     | ^  | ^  |    ^    |\n|     17     | ^  | ^  |    ^    |\n|     18     | ^  | ^  |    ^    |\n|     19     | ^  | ^  |    ^    |\n|     20     | ^  | ^  |    ^    |\n\n对于所有的测试数据，保证 $n \\ge 3,m \\ge 12$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2013] Calligrapher", "background": "", "description": "Student Xiao E loves calligraphy. He heard that NOI2013 has started, and he wants to write the word \"NOI\" to give to everyone.\n\nXiao E has a magical sheet of paper, which can be represented as a 2D grid of $n$ rows and $m$ columns. For convenience, we define the lower-left cell of the grid to have coordinates $(1, 1)$, and the upper-right cell to have coordinates $(m, n)$.\n\nEach cell in the grid has an integer luck value. Writing on the cells increases everyone’s luck. The total luck equals the sum of the luck values of all the cells touched by the brush. Now you need to write the three letters `N`, `O`, and `I` on the paper.\n\nDefinitions of the three calligraphic letters:\n- `N` consists of several (at least $3$) rectangles whose edges are parallel to the coordinate axes. Suppose it consists of $K$ rectangles (indexed $1 \\ldots K$). Let the lower-left cell of the $i$-th rectangle be $(L_i, B_i)$ and the upper-right cell be $(R_i, T_i)$. They must satisfy:\n  1. $L_i \\le R_i, B_i \\le T_i$.\n  2. For any $1 < i \\le K$, $L_i = R_{i-1} + 1$.\n  3. For any $3 \\le i < K$, $B_{i-1} - 1 \\le T_i \\le T_{i-1}$, $B_i \\le B_{i-1}$.\n  4. $B_2 > B_1$, $T_2 = T_1$, $B_{K-1} = B_K$, $T_{K-1} < T_K$.\n- `O` is formed by taking a large rectangle $A$ and removing a smaller rectangle $B$ from its interior. Both rectangles are axis-aligned. Let the lower-left cell of the large rectangle $A$ be $(u, v)$, with width $W$ and height $H$. Then the small rectangle $B$ has lower-left cell $(u + 1, v + 1)$, width $W - 2$, and height $H - 2$. They must satisfy:\n  1. $W \\ge 3$, $H \\ge 3$.\n  2. $u > R_K + 1$.\n- `I` consists of $3$ solid rectangles whose edges are parallel to the coordinate axes and are stacked from bottom to top, indexed $1, 2, 3$ from bottom to top. Let the lower-left cell of the $i$-th rectangle be $(P_i, Q_i)$ and the upper-right cell be $(G_i, H_i)$. They must satisfy:\n  1. $P_i \\le G_i, Q_i \\le H_i$.\n  2. $P_1 = P_3 > u + W$, $G_1 = G_3$.\n  3. $Q_1 = H_1 = Q_2 - 1$, $H_2 + 1 = Q_3 = H_3$.\n  4. $P_1 < P_2 \\le G_2 < G_1$.\n\nAn example of `N`, `O`, and `I` is shown below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7t4tquv.png)\n\nIn addition, all drawn shapes are not allowed to go beyond the boundaries of the paper. Now Xiao E wants to know the maximum total luck he can achieve.", "inputFormat": "The first line contains two positive integers $n$ and $m$, representing the number of rows and columns of the matrix, respectively.\n\nThen $n$ lines follow, each containing $m$ integers. In the $(i + 1)$-th line, the $j$-th number is the luck value of cell $(j, n - i + 1)$.", "outputFormat": "Output an integer $T$, which is the maximum total luck that Xiao E can obtain.", "hint": "### Sample Explanation 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vq7asar5.png)\n\n### Sample Explanation 2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1ojygumc.png)\n\n### Constraints\n\n| Test point ID |   $n$   |   $m$    | Luck value range |\n| :-----------: | :-----: | :------: | :--------------: |\n|       1       |   $=3$  |  $=12$   |   $[-50,50]$     |\n|       2       |    ^    |    ^     |        ^         |\n|       3       |    ^    |    ^     |        ^         |\n|       4       |    ^    |    ^     |        ^         |\n|       5       | $\\le10$ | $\\le20$  |        ^         |\n|       6       |    ^    |    ^     |        ^         |\n|       7       |    ^    |    ^     |        ^         |\n|       8       |    ^    |    ^     |        ^         |\n|       9       | $\\le150$| $\\le500$ |       $=1$       |\n|      10       |    ^    |    ^     |        ^         |\n|      11       |  $\\le80$|  $\\le80$ |   $[-200,200]$   |\n|      12       |    ^    |    ^     |        ^         |\n|      13       |    ^    |    ^     |        ^         |\n|      14       |    ^    |    ^     |        ^         |\n|      15       | $\\le150$| $\\le500$ |        ^         |\n|      16       |    ^    |    ^     |        ^         |\n|      17       |    ^    |    ^     |        ^         |\n|      18       |    ^    |    ^     |        ^         |\n|      19       |    ^    |    ^     |        ^         |\n|      20       |    ^    |    ^     |        ^         |\n\nFor all testdata, it is guaranteed that $n \\ge 3, m \\ge 12$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2013] 书法家", "background": "", "description": "小 E 同学非常喜欢书法，他听说 NOI2013 已经开始了，想题一幅 “NOI” 的字送给大家。\n\n小 E 有一张非常神奇的纸，纸可以用一个 $n$ 行 $m$ 列的二维方格矩阵来表示，为了描述方便，我们定义矩阵左下角方格坐标为 $(1,1)$，右上角方格坐标为 $(m, n)$。\n\n矩阵的每个方格有一个整数的幸运值。在格子上面写字可以增加大家的幸运度，幸运度的大小恰好是所有被笔写到的方格的幸运值之和。现在你要在上面写\n上 `N`，`O`，`I` 三个字母。\n\n下面给出 $3$ 个书法字的定义:\n- `N` 由若干（$\\ge 3$）个边平行于坐标轴的矩形组成，设由 $K$ 个矩形组成（标号 $1 \\ldots K$），第 $i$ 个矩形的左下角方格坐标设为 $(L_i, B_i)$，右上角坐标设为 $(R_i, T_i )$，要求满足：\n  1. $L_i \\le R_i, B_i \\le T_i$；\n  2. 对任意 $1 < i \\le K$，有 $L_i = R_{i-1} + 1$；\n  3. 对任意 $3 \\le i < K$，有 $B_{i−1} − 1 \\le T_i \\le T_{i-1}$，$B_i \\le B_{i-1}$；\n  4. $B_2 > B_1$，$T_2 = T_1$，$B_{K-1} = B_K$，$T_{K-1} < T_K$；\n- `O` 由一个大矩形 $A$，挖去一个小矩形 $B$ 得到，这两个矩形的边都平行于坐标轴。设大矩形 $A$ 左下角的方格坐标为 $(u, v)$，长为 $W$，宽为 $H$，则小矩形 $B$ 满足左下角方格坐标为 $(u + 1, v + 1)$，长 $W - 2$，宽 $H - 2$。要求满足：\n  1. $W \\ge 3$，$H \\ge 3$；\n  2. $u > R_K + 1$；\n- `I` 为 $3$ 个边平行于坐标轴的从下到上的实心矩形组成，从下到上依次标号为 $1,2,3$，第 $i$ 个矩形的左下角格子坐标设为 $(P_i , Q_i )$，右上角格子坐标设为 $(G_i , H_i )$，要求满足：\n  1. $P_i \\le G_i , Q_i \\le H_i$；\n  2. $P_1 = P_3 > u + W$，$G_1 = G_3$；\n  3. $Q_1 = H_1 = Q_2 - 1, H_2 + 1 = Q_3 = H_3$；\n  4. $P_1 < P_2 \\le G_2 < G_1$。\n\n下图是一个 `N`,`O`,`I` 的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7t4tquv.png)\n\n另外，所有画的图形均不允许超过纸张的边界。现在小 E 想要知道,他能画出的最大幸运度是多少。", "inputFormat": "第一行包含两个正整数 $n$ 和 $m$ ,分别表示矩阵的行数和列数。\n\n接下来 $n$ 行，每行有 $m$ 个整数，第 $i + 1$ 行的第 $j$ 个数表示格子 $(j, n - i + 1)$ 的幸运值。", "outputFormat": "输出一个整数 $T$，表示小 E 能够获得的最大幸运度。", "hint": "### 样例解释 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vq7asar5.png)\n\n### 样例解释 2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1ojygumc.png)\n\n### 数据范围\n\n::cute-table{tuack}\n\n| 测试点编号 |   $n$   |   $m$    | 幸运值范围 |\n| :--------: | :------: | :------: | :--------: |\n|     1      |   $=3$   |  $=12$   | $[-50,50]$ |\n|     2      |   ^   |  ^   | ^ |\n|     3      |   ^   |  ^   | ^ |\n|     4      |   ^   |  ^   | ^ |\n|     5      | $\\le10$  | $\\le20$  | ^ |\n|     6      | ^  | ^  | ^ |\n|     7      | ^  | ^  | ^ |\n|     8      | ^  | ^  | ^ |\n|     9      | $\\le150$ | $\\le500$ |    $=1$    |\n|     10     | ^ | ^ |    ^    |\n|     11     | $\\le80$  | $\\le80$  |    $[-200,200]$    |\n|     12     | ^  | ^  |    ^    |\n|     13     | ^  | ^  |    ^    |\n|     14     | ^  | ^  |    ^    |\n|     15     | $\\le150$  | $\\le500$  |    ^    |\n|     16     | ^  | ^  |    ^    |\n|     17     | ^  | ^  |    ^    |\n|     18     | ^  | ^  |    ^    |\n|     19     | ^  | ^  |    ^    |\n|     20     | ^  | ^  |    ^    |\n\n对于所有的测试数据，保证 $n \\ge 3,m \\ge 12$。", "locale": "zh-CN"}}}
{"pid": "P1399", "type": "P", "difficulty": 6, "samples": [["4 \n1 2 1 \n1 4 2 \n1 3 2 \n2 4 1\n", "2.0 "], ["5\n1 5 100\n2 1 77\n3 2 80\n4 1 64\n5 3 41", "109.0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["递推", "2013", "线段树", "NOI", "深度优先搜索 DFS", "基环树"], "title": "[NOI2013] 快餐店", "background": "", "description": "小 T 打算在城市 C 开设一家外送快餐店。送餐到某一个地点的时间与外卖店到该地点之间最短路径长度是成正比的，小 T 希望快餐店的地址选在离最远的顾客距离最近的地方。\n\n快餐店的顾客分布在城市 C 的 $N$ 个建筑中，这 $N$ 个建筑通过恰好 $N$ 条双向道路连接起来，不存在任何两条道路连接了相同的两个建筑。任意两个建筑之间至少存在一条由双向道路连接而成的路径。小 T 的快餐店可以开设在任一建筑中，也可以开设在任意一条道路的某个位置上（该位置与道路两端的建筑的距离不一定是整数）。\n\n现给定城市 C 的地图（道路分布及其长度），请找出最佳的快餐店选址，输出其与最远的顾客之间的距离。", "inputFormat": "第一行包含一个整数 $N$，表示城市 C 中的建筑和道路数目。\n\n接下来 $N$ 行，每行 $3$ 个整数，$A_i,B_i,L_i$（$1\\leq i\\leq N$，$L_i>0$），表示一条道路连接了建筑 $A_i$ 与 $B_i$，其长度为 $L_i$。\n", "outputFormat": "输出仅包含一个实数，四舍五入保留**恰好一位小数**，表示最佳快餐店选址距离最远用户的距离。\n\n注意：你的结果必须恰好有一位小数，小数位数不正确不得分。", "hint": "### 样例解释 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r0dmxcgy.png)\n\n### 样例解释 2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pf8eaowl.png)\n\n### 数据范围\n\n- 对于 $10\\%$ 的数据，$N\\leq 80$，$L_i=1$；\n- 对于 $30\\%$ 的数据，$N\\leq 600$，$L_i\\leq 100$；\n- 对于 $60\\%$ 的数据，$N\\leq 2000$，$L_i\\leq 10^9$；\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq 10^5$，$1\\leq L_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2013] Fast Food Restaurant", "background": "", "description": "Xiao T plans to open a delivery fast food restaurant in city C. The time to deliver to a location is proportional to the length of the shortest path from the restaurant to that location. Xiao T wants to choose a location that minimizes the distance to the farthest customer.\n\nCustomers are located in $N$ buildings in city C. These $N$ buildings are connected by exactly $N$ bidirectional roads. No two roads connect the same pair of buildings. Between any two buildings, there exists at least one path formed by bidirectional roads. The restaurant can be placed at any building, or at any point on any road (the distances from that point to the two endpoints of the road do not need to be integers).\n\nGiven the map of city C (the road layout and lengths), find the optimal location for the restaurant and output its distance to the farthest customer.", "inputFormat": "The first line contains an integer $N$, representing the number of buildings in city C. There are also exactly $N$ bidirectional roads.\n\nThe next $N$ lines each contain $3$ integers, $A_i,B_i,L_i$ ($1\\leq i\\leq N$, $L_i>0$), indicating that there is a road between buildings $A_i$ and $B_i$ with length $L_i$.", "outputFormat": "Output a single real number, rounded and kept to **exactly one decimal place**, representing the distance from the optimal restaurant location to its farthest customer.\n\nNote: Your result must have exactly one digit after the decimal point. An incorrect number of decimal places will receive no credit.", "hint": "- Sample Explanation 1.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r0dmxcgy.png)\n\n- Sample Explanation 2.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pf8eaowl.png)\n\n- Constraints:\n  - For $10\\%$ of the testdata, $N\\leq 80$, $L_i=1$.\n  - For $30\\%$ of the testdata, $N\\leq 600$, $L_i\\leq 100$.\n  - For $60\\%$ of the testdata, $N\\leq 2000$, $L_i\\leq 10^9$.\n  - For $100\\%$ of the testdata, $1\\leq N\\leq 10^5$, $1\\leq L_i \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2013] 快餐店", "background": "", "description": "小 T 打算在城市 C 开设一家外送快餐店。送餐到某一个地点的时间与外卖店到该地点之间最短路径长度是成正比的，小 T 希望快餐店的地址选在离最远的顾客距离最近的地方。\n\n快餐店的顾客分布在城市 C 的 $N$ 个建筑中，这 $N$ 个建筑通过恰好 $N$ 条双向道路连接起来，不存在任何两条道路连接了相同的两个建筑。任意两个建筑之间至少存在一条由双向道路连接而成的路径。小 T 的快餐店可以开设在任一建筑中，也可以开设在任意一条道路的某个位置上（该位置与道路两端的建筑的距离不一定是整数）。\n\n现给定城市 C 的地图（道路分布及其长度），请找出最佳的快餐店选址，输出其与最远的顾客之间的距离。", "inputFormat": "第一行包含一个整数 $N$，表示城市 C 中的建筑和道路数目。\n\n接下来 $N$ 行，每行 $3$ 个整数，$A_i,B_i,L_i$（$1\\leq i\\leq N$，$L_i>0$），表示一条道路连接了建筑 $A_i$ 与 $B_i$，其长度为 $L_i$。\n", "outputFormat": "输出仅包含一个实数，四舍五入保留**恰好一位小数**，表示最佳快餐店选址距离最远用户的距离。\n\n注意：你的结果必须恰好有一位小数，小数位数不正确不得分。", "hint": "### 样例解释 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r0dmxcgy.png)\n\n### 样例解释 2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pf8eaowl.png)\n\n### 数据范围\n\n- 对于 $10\\%$ 的数据，$N\\leq 80$，$L_i=1$；\n- 对于 $30\\%$ 的数据，$N\\leq 600$，$L_i\\leq 100$；\n- 对于 $60\\%$ 的数据，$N\\leq 2000$，$L_i\\leq 10^9$；\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq 10^5$，$1\\leq L_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1400", "type": "P", "difficulty": 6, "samples": [["2 8", "1 2 6\n3 10 24\n12 35 88\n15 28 84\n4 5 18\n14 33 90\n40 104 273\n21 60 152"], ["3 3", "1 3 12\n8 21 87\n44 165 615"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "Special Judge", "ICPC", "CERC"], "title": "[CERC2016] Easy Equation", "background": "", "description": "Given an integer $k$ greater than $1$, it is possible to prove that there are infinitely many triples of positive integers $(a, b, c)$ that satisfy the following equation:\n\n$$a^2+b^2+c^2=k(ab+bc+ca)+1$$\n\nGiven positive integers $n$ and $k$, find $n$ arbitrary triples $(a_1, b_1, c_1), (a_2, b_2, c_2), \\cdots , (a_n, b_n, c_n)$ that all\nsatisfy the equation. Furthermore, all $3n$ integers $(a_1, b_1, c_1), (a_2, b_2, c_2), \\cdots , (a_n, b_n, c_n)$ should be different positive integers with at most $100$ decimal digits each.", "inputFormat": "The first line contains two integers $k$ and $n\\;(2 \\leq k \\leq 1000, 1 \\leq n \\leq 1000)$ — the constant k in the\nequation and the target number of triples.", "outputFormat": "Output $n$ lines. The $i$-th line should contain three space separated integers $a_i$, $b_i$ and $c_i$ with at most $100$ digits each — the $i$-th of the solutions you found.", "hint": "", "locale": "en", "translations": {"en": {"title": "[CERC2016] Easy Equation", "background": "", "description": "Given an integer $k$ greater than $1$, it is possible to prove that there are infinitely many triples of positive integers $(a, b, c)$ that satisfy the following equation:\n\n$$a^2+b^2+c^2=k(ab+bc+ca)+1$$\n\nGiven positive integers $n$ and $k$, find $n$ arbitrary triples $(a_1, b_1, c_1), (a_2, b_2, c_2), \\cdots , (a_n, b_n, c_n)$ that all\nsatisfy the equation. Furthermore, all $3n$ integers $(a_1, b_1, c_1), (a_2, b_2, c_2), \\cdots , (a_n, b_n, c_n)$ should be different positive integers with at most $100$ decimal digits each.", "inputFormat": "The first line contains two integers $k$ and $n\\;(2 \\leq k \\leq 1000, 1 \\leq n \\leq 1000)$ — the constant k in the\nequation and the target number of triples.", "outputFormat": "Output $n$ lines. The $i$-th line should contain three space separated integers $a_i$, $b_i$ and $c_i$ with at most $100$ digits each — the $i$-th of the solutions you found.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[CERC2016] Easy Equation", "background": "", "description": "假设 $k$ 大于 $1$，\n可以证明有无穷多个正整数三元组 $(a, b, c)$ 满足以下方程:\n\n   $a^2 + b^2 + c^2 = k(ab + bc + ca) + 1$\n    \n给定正整数 $n$ 和 $k$，找出 $n$ 个三元组 $(a_1, b_1, c_1), (a_2, b_2, c_2), ⋯ ,(a_n, b_n, c_n)$ 使它们都满足方程。另外，这 $3n$ 个正整数 $(a_1, b_1, c_1), (a_2, b_2, c_2), ⋯ ,(a_n, b_n, c_n)$ 应该是不同的，每个数最多有 $100$ 位。", "inputFormat": "第一行包含两个整数：\n方程中的常数 $k$ 和 \n所求三元组的数量 $n$ $(2 ≤ k ≤ 1000, 1 ≤ n ≤ 1000)$;", "outputFormat": "输出有 $n$ 行。第 $i$ 行应该包含三个空格分隔的正整数 $ai$, $bi$ 和 $ci$，\n为你找到的第 $i$ 个解。每个数最多 $100$ 位。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1401", "type": "P", "difficulty": 1, "samples": [["1 5\n1 5", "int"], ["-2147483647 2147483647\n-2147483647 2147483647", "long long int"]], "limits": {"time": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "数学", "2023", "O2优化", "语言月赛"], "title": "[入门赛 #18] 禁止在 int 乘 int 时不开 long long", "background": "", "description": "在比赛中，根据数据范围，分析清楚变量的取值范围，是非常重要的。int 类型变量与 int 类型变量相乘，往往可能超出 int 类型可以表示的取值范围。\n\n现在，给出两个 int 类型变量 $x,y$ 及其取值范围，请问 $x\\times y$ 的值是否可能超过 int 类型可以表示的范围？\n\n> 提示：int 类型可以表示的范围为 $[-2147483648, 2147483647]$，即 $[-2^{31},2^{31}-1]$。也就是，int 类型可以表示的最小值为 $-2147483648$，最大值为 $2147483647$。", "inputFormat": "输入共两行。\n\n输入的第一行为两个整数 $x_l,x_u$，表示变量 $x$ 的取值范围为 $x_l \\le x \\le x_u$。\n\n输入的第二行为两个整数 $y_l,y_u$，表示变量 $y$ 的取值范围为 $y_l \\le y \\le y_u$。", "outputFormat": "输出一行一个字符串：\n\n- 若会超过，则输出 `long long int`；\n- 若不会超过，则输出 `int`。", "hint": "### 数据规模与约定\n\n- 对于 $50\\%$ 的测试数据，$0 \\le x_l \\le x_u < 2^{31}$，$0 \\le y_l \\le y_u < 2^{31}$。\n- 对于 $100\\%$ 的测试数据，$-2^{31} \\le x_l \\le x_u < 2^{31}$，$-2^{31} \\le y_l \\le y_u < 2^{31}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #18] 禁止在 int 乘 int 时不开 long long", "background": "", "description": "在比赛中，根据数据范围，分析清楚变量的取值范围，是非常重要的。int 类型变量与 int 类型变量相乘，往往可能超出 int 类型可以表示的取值范围。\n\n现在，给出两个 int 类型变量 $x,y$ 及其取值范围，请问 $x\\times y$ 的值是否可能超过 int 类型可以表示的范围？\n\n> 提示：int 类型可以表示的范围为 $[-2147483648, 2147483647]$，即 $[-2^{31},2^{31}-1]$。也就是，int 类型可以表示的最小值为 $-2147483648$，最大值为 $2147483647$。", "inputFormat": "输入共两行。\n\n输入的第一行为两个整数 $x_l,x_u$，表示变量 $x$ 的取值范围为 $x_l \\le x \\le x_u$。\n\n输入的第二行为两个整数 $y_l,y_u$，表示变量 $y$ 的取值范围为 $y_l \\le y \\le y_u$。", "outputFormat": "输出一行一个字符串：\n\n- 若会超过，则输出 `long long int`；\n- 若不会超过，则输出 `int`。", "hint": "### 数据规模与约定\n\n- 对于 $50\\%$ 的测试数据，$0 \\le x_l \\le x_u < 2^{31}$，$0 \\le y_l \\le y_u < 2^{31}$。\n- 对于 $100\\%$ 的测试数据，$-2^{31} \\le x_l \\le x_u < 2^{31}$，$-2^{31} \\le y_l \\le y_u < 2^{31}$。", "locale": "zh-CN"}}}
{"pid": "P1402", "type": "P", "difficulty": 6, "samples": [["2 2 2\n1 0\n1 0\n1 1\n1 1\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["福建省历届夏令营", "网络流", "二分图"], "title": "酒店之王", "background": "", "description": "XX 酒店的老板想成为酒店之王，本着这种希望，第一步要将酒店变得人性化。由于很多来住店的旅客有自己喜好的房间色调、阳光等，也有自己所爱的菜，但是该酒店只有 $p$ 间房间，一天只有固定的 $q$ 道不同的菜，每个房间只能住一位客人，每道菜也只能给一位客人食用。\n\n有一天来了 $n$ 个客人，每个客人说出了自己喜欢哪些房间，喜欢哪道菜。但是很不幸，可能做不到让所有顾客满意（满意的条件是住进喜欢的房间且吃到喜欢的菜）。\n\n要怎么分配，能使最多顾客满意呢？", "inputFormat": "第一行给出三个整数，分别表示表示 $n,p,q$。\n\n之后 $n$ 行，每行 $p$ 个整数，只可能是 $0$ 或 $1$，第 $i$ 行第 $j$ 个数表示第 $i$ 个人喜不喜欢第 $j$ 个房间（$1$ 表示喜欢， $0$ 表示不喜欢）。\n\n之后 $n$ 行，每行 $q$ 个整数，只可能是 $0$ 或 $1$，第 $i$ 行第 $j$ 个数表示第 $i$ 个人喜不喜欢第 $j$ 道菜（$1$ 表示喜欢， $0$ 表示不喜欢）。", "outputFormat": "最大的顾客满意数。\n\n", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n,p,q \\leq 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Hotel King", "background": "", "description": "The owner of XX Hotel wants to become the \"Hotel King.\" With this goal, the first step is to make the hotel more user-friendly. Many guests have their preferences for room color tones, sunlight, and favorite dishes. However, the hotel has only $p$ rooms, and there are only $q$ different dishes each day. Each room can accommodate only one guest, and each dish can be served to only one guest.\n\nOne day, $n$ guests arrived. Each guest stated which rooms they like and which dishes they like. Unfortunately, it may be impossible to satisfy all guests (a guest is satisfied if they both live in a liked room and eat a liked dish).\n\nHow should we assign rooms and dishes to maximize the number of satisfied guests?", "inputFormat": "The first line contains three integers, representing $n, p, q$.\n\nThen follow $n$ lines, each containing $p$ integers, each being $0$ or $1$. On the $i$-th line, the $j$-th number indicates whether the $i$-th person likes the $j$-th room ($1$ means like, $0$ means do not like).\n\nThen follow $n$ lines, each containing $q$ integers, each being $0$ or $1$. On the $i$-th line, the $j$-th number indicates whether the $i$-th person likes the $j$-th dish ($1$ means like, $0$ means do not like).", "outputFormat": "Output the maximum number of satisfied guests.", "hint": "Constraints\n\nFor all test points, $1 \\leq n, p, q \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "酒店之王", "background": "", "description": "XX 酒店的老板想成为酒店之王，本着这种希望，第一步要将酒店变得人性化。由于很多来住店的旅客有自己喜好的房间色调、阳光等，也有自己所爱的菜，但是该酒店只有 $p$ 间房间，一天只有固定的 $q$ 道不同的菜，每个房间只能住一位客人，每道菜也只能给一位客人食用。\n\n有一天来了 $n$ 个客人，每个客人说出了自己喜欢哪些房间，喜欢哪道菜。但是很不幸，可能做不到让所有顾客满意（满意的条件是住进喜欢的房间且吃到喜欢的菜）。\n\n要怎么分配，能使最多顾客满意呢？", "inputFormat": "第一行给出三个整数，分别表示表示 $n,p,q$。\n\n之后 $n$ 行，每行 $p$ 个整数，只可能是 $0$ 或 $1$，第 $i$ 行第 $j$ 个数表示第 $i$ 个人喜不喜欢第 $j$ 个房间（$1$ 表示喜欢， $0$ 表示不喜欢）。\n\n之后 $n$ 行，每行 $q$ 个整数，只可能是 $0$ 或 $1$，第 $i$ 行第 $j$ 个数表示第 $i$ 个人喜不喜欢第 $j$ 道菜（$1$ 表示喜欢， $0$ 表示不喜欢）。", "outputFormat": "最大的顾客满意数。\n\n", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n,p,q \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P1403", "type": "P", "difficulty": 2, "samples": [["3\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2005", "各省省选", "福建省历届夏令营", "安徽", "枚举"], "title": "[AHOI2005] 约数研究", "background": "", "description": "科学家们在 Samuel 星球上的探险得到了丰富的能源储备，这使得空间站中大型计算机 Samuel II 的长时间运算成为了可能。由于在去年一年的辛苦工作取得了不错的成绩，小联被允许用 Samuel II 进行数学研究。\n\n小联最近在研究和约数有关的问题，他统计每个正数 $N$ 的约数的个数，并以 $f(N)$ 来表示。例如 $12$ 的约数有 $1,2,3,4,6,12$，因此 $f(12)=6$。下表给出了一些 $f(N)$ 的取值：\n\n| $N$    | $1$  | $2$  | $3$  | $4$  | $5$  | $6$  |\n| ------ | ---- | ---- | ---- | ---- | ---- | ---- |\n| $f(N)$ | $1$  | $2$  | $2$  | $3$  | $2$  | $4$  |\n\n现在请你求出：\n\n$$\n\\sum_{i=1}^n f(i)\n$$", "inputFormat": "输入一个整数 $n$。\n", "outputFormat": "输出答案。", "hint": "- 对于 $20\\%$ 的数据，$N \\leq 5000$；\n- 对于 $100\\%$ 的数据，$1 \\leq N \\leq 10^6$。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2005] Divisor Research", "background": "", "description": "The scientists’ expedition on the planet Samuel has yielded abundant energy reserves, making long computations on the large computer Samuel II in the space station possible. Because of his solid performance last year, Xiaolian was allowed to use Samuel II for mathematical research.\n\nXiaolian is studying problems related to divisors. He counts the number of divisors of each positive integer $N$, denoted by $f(N)$. For example, the divisors of $12$ are $1, 2, 3, 4, 6, 12$, so $f(12) = 6$. Some values of $f(N)$ are given below:\n\n| $N$    | $1$  | $2$  | $3$  | $4$  | $5$  | $6$  |\n| ------ | ---- | ---- | ---- | ---- | ---- | ---- |\n| $f(N)$ | $1$  | $2$  | $2$  | $3$  | $2$  | $4$  |\n\nNow, please compute:\n$$\n\\sum_{i=1}^n f(i)\n$$", "inputFormat": "Input a single integer $n$.", "outputFormat": "Output the answer.", "hint": "- For $20\\%$ of the testdata, $n \\leq 5000$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2005] 约数研究", "background": "", "description": "科学家们在 Samuel 星球上的探险得到了丰富的能源储备，这使得空间站中大型计算机 Samuel II 的长时间运算成为了可能。由于在去年一年的辛苦工作取得了不错的成绩，小联被允许用 Samuel II 进行数学研究。\n\n小联最近在研究和约数有关的问题，他统计每个正数 $N$ 的约数的个数，并以 $f(N)$ 来表示。例如 $12$ 的约数有 $1,2,3,4,6,12$，因此 $f(12)=6$。下表给出了一些 $f(N)$ 的取值：\n\n| $N$    | $1$  | $2$  | $3$  | $4$  | $5$  | $6$  |\n| ------ | ---- | ---- | ---- | ---- | ---- | ---- |\n| $f(N)$ | $1$  | $2$  | $2$  | $3$  | $2$  | $4$  |\n\n现在请你求出：\n\n$$\n\\sum_{i=1}^n f(i)\n$$", "inputFormat": "输入一个整数 $n$。\n", "outputFormat": "输出答案。", "hint": "- 对于 $20\\%$ 的数据，$N \\leq 5000$；\n- 对于 $100\\%$ 的数据，$1 \\leq N \\leq 10^6$。\n\n", "locale": "zh-CN"}}}
{"pid": "P1404", "type": "P", "difficulty": 3, "samples": [["10 6\n6\n4\n2\n10\n3\n8\n5\n9\n4\n1\n", "6500\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "二分", "福建省历届夏令营", "分数规划"], "title": "平均数", "background": "", "description": "给一个长度为 $n$ 的数列，我们需要找出该数列的一个子串，使得子串平均数最大化，并且子串长度 $\\ge m$。", "inputFormat": "第一行两个整数 $n$ 和 $m$。\n\n接下来 $n$ 行，每行一个整数 $a_i$，表示序列第 $i$ 个数字。\n", "outputFormat": "一个整数，表示最大平均数的 $1000$ 倍，如果末尾有小数，直接舍去，不要用四舍五入求整。", "hint": "#### 数据规模与约定\n\n- 对于 $60\\%$ 的数据，保证 $m\\le n\\le 10^4$；\n- 对于 $100\\%$ 的数据，保证 $1 \\leq m\\le n\\le 10^5$，$0\\le a_i\\le2000$。", "locale": "zh-CN", "translations": {"en": {"title": "Average", "background": "", "description": "Given a sequence of length $n$, find a contiguous subarray whose average is maximized, with the subarray length $\\ge m$.", "inputFormat": "The first line contains two integers $n$ and $m$.  \nThe next $n$ lines each contain an integer $a_i$, representing the $i$-th number of the sequence.", "outputFormat": "Output a single integer: $1000$ times the maximum average. If there is a fractional part, truncate it directly; do not round.", "hint": "#### Constraints\n\n- For $60\\%$ of the testdata, it is guaranteed that $m\\le n\\le 10^4$。\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq m\\le n\\le 10^5$, $0\\le a_i\\le2000$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "平均数", "background": "", "description": "给一个长度为 $n$ 的数列，我们需要找出该数列的一个子串，使得子串平均数最大化，并且子串长度 $\\ge m$。", "inputFormat": "第一行两个整数 $n$ 和 $m$。\n\n接下来 $n$ 行，每行一个整数 $a_i$，表示序列第 $i$ 个数字。\n", "outputFormat": "一个整数，表示最大平均数的 $1000$ 倍，如果末尾有小数，直接舍去，不要用四舍五入求整。", "hint": "#### 数据规模与约定\n\n- 对于 $60\\%$ 的数据，保证 $m\\le n\\le 10^4$；\n- 对于 $100\\%$ 的数据，保证 $1 \\leq m\\le n\\le 10^5$，$0\\le a_i\\le2000$。", "locale": "zh-CN"}}}
{"pid": "P1405", "type": "P", "difficulty": 5, "samples": [["2\t\t\t\t\t\t\t\t\t\t\r\n17 747", "173"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "福建省历届夏令营"], "title": "苦恼的小明", "background": "", "description": "黄小明和他的合伙人想要创办一所英语培训机构，注册的时候要填一张个人情况的表格，在身高一栏小明犯了愁。\n\n身高要求精确到厘米，但小明实在太高了，无法在纸上填下这么长的数字。小明花钱买通了办事人员，于是只要写上他的身高模 $10007$ 的结果就行了。\n\n可小明不会取模，想起前几天请你帮他解决了水库的问题，于是又来找你帮忙。", "inputFormat": "小明的身高用 $a_1^{a_2^{\\cdots^{a_n}}}$ 表示，第一行输入 $n$，第二行输入 $n$ 个整数表示 $a_1$ 至 $a_n$。", "outputFormat": "一个数字表示小明身高 $\\bmod 10007$ 的值。", "hint": "所有的 $0\\le a_i<10^4$。\n\n第 $1 \\sim 6$ 数据点满足 $n=2$。\n\n第 $7 \\sim 10$ 数据点满足 $n=3$。\n\n第 $11$ 个数据点满足 $n=1234567$。", "locale": "zh-CN", "translations": {"en": {"title": "Worried Xiaoming", "background": "", "description": "Huang Xiaoming and his partner want to start an English training institute. When registering, they need to fill out a personal information form, and Xiaoming is troubled by the height field.\n\nThe height must be accurate to centimeters, but Xiaoming is so tall that such a long number cannot fit on the paper. He bribed the staff, so he only needs to write the result of his height modulo $10007$.\n\nHowever, Xiaoming does not know how to take a modulus. Remembering that you helped him solve the reservoir problem a few days ago, he came to you again for help.", "inputFormat": "Xiaoming’s height is represented as $a_1^{a_2^{\\cdots^{a_n}}}$. The first line contains $n$, and the second line contains $n$ positive integers representing $a_1$ to $a_n$.", "outputFormat": "Output a single number representing Xiaoming’s height $\\bmod 10007$.", "hint": "All $0 \\le a_i < 10^4$.\n\nFor testdata 1–6, $n = 2$.\n\nFor testdata 7–10, $n = 3$.\n\nFor testdata 11, $n = 1234567$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "苦恼的小明", "background": "", "description": "黄小明和他的合伙人想要创办一所英语培训机构，注册的时候要填一张个人情况的表格，在身高一栏小明犯了愁。\n\n身高要求精确到厘米，但小明实在太高了，无法在纸上填下这么长的数字。小明花钱买通了办事人员，于是只要写上他的身高模 $10007$ 的结果就行了。\n\n可小明不会取模，想起前几天请你帮他解决了水库的问题，于是又来找你帮忙。", "inputFormat": "小明的身高用 $a_1^{a_2^{\\cdots^{a_n}}}$ 表示，第一行输入 $n$，第二行输入 $n$ 个整数表示 $a_1$ 至 $a_n$。", "outputFormat": "一个数字表示小明身高 $\\bmod 10007$ 的值。", "hint": "所有的 $0\\le a_i<10^4$。\n\n第 $1 \\sim 6$ 数据点满足 $n=2$。\n\n第 $7 \\sim 10$ 数据点满足 $n=3$。\n\n第 $11$ 个数据点满足 $n=1234567$。", "locale": "zh-CN"}}}
{"pid": "P1406", "type": "P", "difficulty": 4, "samples": [["3\r\n1 2 3 4 5 6 7 8 9\r\n", "15\r\n2 7 6\r\n9 5 1\r\n4 3 8\r\n\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "福建省历届夏令营"], "title": "方格填数", "background": "", "description": "给一个 $n\\times n$ 的方格矩阵，还有 $n\\times n$ 个整数，让你将这些整数填入矩阵，使得每行每列每个对角线上整数的和都相等。下面给出几个例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6m0pbzzu.png)", "inputFormat": "第一行一个整数 $n\\ (1 \\le n \\le 4)$。\n\n第二行 $n\\times n$ 个整数 $a_i\\ (-10^8 \\le a_i \\le 10^8)$。", "outputFormat": "第一行一个整数 $s$ 代表每行每列每个对角线的和值。\n\n接下来输出一个 $n\\times n$ 的矩阵，表示填数方案。\n\n数据保证有解，可能存在多种方案，输出字典序最小的（将每行顺次相连之后，字典序最小）", "hint": "### 数据范围及约定\n\n- 对于 $80\\%$ 的数据，保证 $1 \\le n \\le 3$；\n- 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 4$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Fill Numbers in a Grid", "background": "", "description": "Given an $n \\times n$ grid and $n \\times n$ integers, fill these integers into the grid so that the sum of the integers in every row, every column, and each diagonal are all equal. Several examples are shown below.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6m0pbzzu.png)", "inputFormat": "The first line contains an integer $n\\ (1 \\le n \\le 4)$.\n\nThe second line contains $n \\times n$ integers $a_i\\ (-10^8 \\le a_i \\le 10^8)$.", "outputFormat": "Output an integer $s$ on the first line, representing the common sum of every row, every column, and each diagonal.\n\nThen output an $n \\times n$ matrix, representing a valid filling scheme.\n\nThe testdata guarantees that there is a solution. There may be multiple solutions; output the lexicographically smallest one (after concatenating the rows in order).", "hint": "### Constraints and Conventions\n\n- For $80\\%$ of the testdata, it is guaranteed that $1 \\le n \\le 3$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\le n \\le 4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "方格填数", "background": "", "description": "给一个 $n\\times n$ 的方格矩阵，还有 $n\\times n$ 个整数，让你将这些整数填入矩阵，使得每行每列每个对角线上整数的和都相等。下面给出几个例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6m0pbzzu.png)", "inputFormat": "第一行一个整数 $n\\ (1 \\le n \\le 4)$。\n\n第二行 $n\\times n$ 个整数 $a_i\\ (-10^8 \\le a_i \\le 10^8)$。", "outputFormat": "第一行一个整数 $s$ 代表每行每列每个对角线的和值。\n\n接下来输出一个 $n\\times n$ 的矩阵，表示填数方案。\n\n数据保证有解，可能存在多种方案，输出字典序最小的（将每行顺次相连之后，字典序最小）", "hint": "### 数据范围及约定\n\n- 对于 $80\\%$ 的数据，保证 $1 \\le n \\le 3$；\n- 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 4$。\n", "locale": "zh-CN"}}}
{"pid": "P1407", "type": "P", "difficulty": 5, "samples": [["2\nMelanie Ashley\nScarlett Charles\n1\nScarlett Ashley", "Safe\nSafe"], ["2\nMelanie Ashley\nScarlett Charles\n2\nScarlett Ashley\nMelanie Charles", "Unsafe\nUnsafe"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["集训队互测", "强连通分量", "Tarjan", "二分图"], "title": "[国家集训队] 稳定婚姻", "background": null, "description": "我们已知 $n$ 对夫妻的婚姻状况，称第 $i$ 对夫妻的男方为 $B_i$，女方为 $G_i$。若某男 $B_i$ 与某女 $G_j$ 曾经交往过（无论是大学，高中，亦或是幼儿园阶段，$i \\neq j$），则当某方与其配偶（即 $B_i$ 与 $G_i$ 或 $B_j$ 与 $G_j$）感情出现问题时，他们有私奔的可能性。不妨设 $B_i$ 和其配偶 $G_i$ 感情不和，于是 $B_i$ 和 $G_j$ 旧情复燃，进而 $B_j$ 因被戴绿帽而感到不爽，联系上了他的初恋情人 $G_k$ ……一串串的离婚事件像多米诺骨牌一般接踵而至。若在 $B_i$ 和 $G_i$ 离婚的前提下，这 $2n$ 个人最终依然能够结合成 $n$ 对情侣，那么我们称婚姻 $i$ 为不安全的，否则婚姻 $i$ 就是安全的。\n\n给定所需信息，你的任务是判断每对婚姻是否安全。", "inputFormat": "第一行为一个正整数 $n$，表示夫妻的对数；\n\n以下 $n$ 行，每行包含两个字符串，表示这 $n$ 对夫妻的姓名（先女后男），由一个空格隔开；\n\n第 $n+2$ 行包含一个正整数 $m$，表示曾经相互喜欢过的情侣对数；\n\n以下 $m$ 行，每行包含两个字符串，表示这 $m$ 对相互喜欢过的情侣姓名（先女后男），由一个空格隔开。", "outputFormat": "输出文件共包含 $n$ 行，第 $i$ 行为 `Safe`（如果婚姻 $i$ 是安全的）或 `Unsafe`（如果婚姻 $i$ 是不安全的）。", "hint": "对于 $20\\%$ 的数据，$n \\le 20$；\n\n对于 $40\\%$ 的数据，$n \\le 100$，$m \\le 400$；\n\n对于 $100\\%$ 的数据，所有姓名字符串中只包含英文大小写字母，大小写敏感，长度不大于 $8$，保证每对关系只在输入文件中出现一次，输入文件的最后 $m$ 行不会出现未在之前出现过的姓名，这 $2n$ 个人的姓名各不相同，$1 \\le n \\le 4000$，$0 \\le m \\le 20000$。", "locale": "zh-CN", "translations": {"en": {"title": "[National Training Team] Stable Marriage", "background": "", "description": "We know the marital status of $n$ couples. Denote the man of the $i$-th couple as $B_i$ and the woman as $G_i$. If some man $B_i$ and some woman $G_j$ once dated (whether in college, high school, or even kindergarten, with $i \\neq j$), then when either party has problems with his or her spouse (that is, $B_i$ with $G_i$ or $B_j$ with $G_j$), they may elope. Suppose $B_i$ and his spouse $G_i$ do not get along, then $B_i$ and $G_j$ rekindle their relationship, and then $B_j$, feeling upset after being cheated on, contacts his first love $G_k$... A chain of divorces follows like dominoes. If, under the premise that $B_i$ and $G_i$ divorce, these $2n$ people can still eventually be paired into $n$ couples, then we call marriage $i$ unsafe; otherwise, marriage $i$ is safe.\n\nGiven the required information, your task is to determine whether each marriage is safe.", "inputFormat": "The first line contains a positive integer $n$, the number of couples.\n\nEach of the following $n$ lines contains two strings, the names of these $n$ couples (female first, then male), separated by a space.\n\nThe $n+2$-th line contains a positive integer $m$, the number of couples who once dated each other.\n\nEach of the following $m$ lines contains two strings, the names of these $m$ couples who once dated each other (female first, then male), separated by a space.", "outputFormat": "The output contains $n$ lines. The $i$-th line is `Safe` (if marriage $i$ is safe) or `Unsafe` (if marriage $i$ is unsafe).", "hint": "For $20\\%$ of the testdata, $n \\le 20$.\n\nFor $40\\%$ of the testdata, $n \\le 100$, $m \\le 400$.\n\nFor $100\\%$ of the testdata, all name strings contain only English letters, are case-sensitive, and have length no greater than $8$. Each relationship appears only once in the input. The last $m$ lines of the input file will not contain any names that did not appear before. All $2n$ names are distinct. $1 \\le n \\le 4000$, $0 \\le m \\le 20000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 稳定婚姻", "background": null, "description": "我们已知 $n$ 对夫妻的婚姻状况，称第 $i$ 对夫妻的男方为 $B_i$，女方为 $G_i$。若某男 $B_i$ 与某女 $G_j$ 曾经交往过（无论是大学，高中，亦或是幼儿园阶段，$i \\neq j$），则当某方与其配偶（即 $B_i$ 与 $G_i$ 或 $B_j$ 与 $G_j$）感情出现问题时，他们有私奔的可能性。不妨设 $B_i$ 和其配偶 $G_i$ 感情不和，于是 $B_i$ 和 $G_j$ 旧情复燃，进而 $B_j$ 因被戴绿帽而感到不爽，联系上了他的初恋情人 $G_k$ ……一串串的离婚事件像多米诺骨牌一般接踵而至。若在 $B_i$ 和 $G_i$ 离婚的前提下，这 $2n$ 个人最终依然能够结合成 $n$ 对情侣，那么我们称婚姻 $i$ 为不安全的，否则婚姻 $i$ 就是安全的。\n\n给定所需信息，你的任务是判断每对婚姻是否安全。", "inputFormat": "第一行为一个正整数 $n$，表示夫妻的对数；\n\n以下 $n$ 行，每行包含两个字符串，表示这 $n$ 对夫妻的姓名（先女后男），由一个空格隔开；\n\n第 $n+2$ 行包含一个正整数 $m$，表示曾经相互喜欢过的情侣对数；\n\n以下 $m$ 行，每行包含两个字符串，表示这 $m$ 对相互喜欢过的情侣姓名（先女后男），由一个空格隔开。", "outputFormat": "输出文件共包含 $n$ 行，第 $i$ 行为 `Safe`（如果婚姻 $i$ 是安全的）或 `Unsafe`（如果婚姻 $i$ 是不安全的）。", "hint": "对于 $20\\%$ 的数据，$n \\le 20$；\n\n对于 $40\\%$ 的数据，$n \\le 100$，$m \\le 400$；\n\n对于 $100\\%$ 的数据，所有姓名字符串中只包含英文大小写字母，大小写敏感，长度不大于 $8$，保证每对关系只在输入文件中出现一次，输入文件的最后 $m$ 行不会出现未在之前出现过的姓名，这 $2n$ 个人的姓名各不相同，$1 \\le n \\le 4000$，$0 \\le m \\le 20000$。", "locale": "zh-CN"}}}
{"pid": "P1408", "type": "P", "difficulty": 5, "samples": [["3\n3\n12\n6\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "福建省历届夏令营"], "title": "互质数列sequence【数据疑似有误】", "background": "", "description": "一个数列有 $n$ 个数字，我们定义一种操作：我们可以将相邻两个数字同时除以它们的一个公约数，这个操作所花费的代价为作为除数的这个公约数的值。我们经过若干次这样操作，可以将原数列变为相邻的数对都互质的数列。问达成要求的最小代价。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行一个整数，依次表示数列中的每个数字。", "outputFormat": "输出最小代价。\n", "hint": "- $30\\%$ 数据满足 $n \\leq 20$；\n- $100\\%$ 数据满足 $1 \\leq n \\leq 10000$，数列中的数字 $1\\le A_i \\leq 2 \\times 10^7$。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "Coprime Sequence [Data Suspected to Be Wrong]", "background": "", "description": "A sequence has $n$ numbers. We define an operation: we can divide two adjacent numbers simultaneously by one of their common divisors, and the cost of this operation is the value of that divisor. After performing such operations several times, we can transform the original sequence so that every pair of adjacent numbers is coprime. Find the minimum total cost to achieve this.", "inputFormat": "The first line contains a positive integer $n$.\nIn the next $n$ lines, each line contains an integer, representing each number in the sequence in order.", "outputFormat": "Output the minimum cost.", "hint": "- 30% of the testdata satisfies $n \\leq 20$.\n- 100% of the testdata satisfies $1 \\leq n \\leq 10000$, and the numbers in the sequence satisfy $1 \\leq A_i \\leq 2 \\times 10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "互质数列sequence【数据疑似有误】", "background": "", "description": "一个数列有 $n$ 个数字，我们定义一种操作：我们可以将相邻两个数字同时除以它们的一个公约数，这个操作所花费的代价为作为除数的这个公约数的值。我们经过若干次这样操作，可以将原数列变为相邻的数对都互质的数列。问达成要求的最小代价。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行一个整数，依次表示数列中的每个数字。", "outputFormat": "输出最小代价。\n", "hint": "- $30\\%$ 数据满足 $n \\leq 20$；\n- $100\\%$ 数据满足 $1 \\leq n \\leq 10000$，数列中的数字 $1\\le A_i \\leq 2 \\times 10^7$。\n\n", "locale": "zh-CN"}}}
{"pid": "P1409", "type": "P", "difficulty": 5, "samples": [["2 1\n", "0.444444444\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "福建省历届夏令营"], "title": "骰子", "background": "", "description": "$n$ 个人排成一排，你排在第 $m$ 个。\n\n每轮队首的人投一次骰子。\n\n- 若掷到 $1$，则队首的人获胜。\n- 若掷到 $2,4,6$，则队首的人排到队尾。\n- 若掷到 $3,5$，则队首的人出队。\n\n若队列中仅剩一人，则该人获胜，求你获胜的概率。", "inputFormat": "一行两个整数 $n,m$。\n", "outputFormat": "一个实数表示获胜概率，精确到小数点后 $9$ 位。\n", "hint": "- 对于 $30\\%$ 的数据，$0<m\\le n\\le 10$。\n- 对于 $100\\%$ 的数据，$0<m\\le n\\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Dice", "background": "", "description": "$n$ people stand in a line, and you are the $m$-th.\n\nIn each round, the person at the front of the queue rolls a die once.\n\n- If they roll $1$, the person at the front wins.\n- If they roll $2, 4, 6$, the person at the front moves to the end of the queue.\n- If they roll $3, 5$, the person at the front leaves the queue.\n\nIf only one person remains in the queue, that person wins. Find the probability that you win.", "inputFormat": "One line containing two integers $n, m$.", "outputFormat": "A real number representing the winning probability, to $9$ digits after the decimal point.", "hint": "- For $30\\%$ of the testdata, $0 < m \\le n \\le 10$.\n- For $100\\%$ of the testdata, $0 < m \\le n \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "骰子", "background": "", "description": "$n$ 个人排成一排，你排在第 $m$ 个。\n\n每轮队首的人投一次骰子。\n\n- 若掷到 $1$，则队首的人获胜。\n- 若掷到 $2,4,6$，则队首的人排到队尾。\n- 若掷到 $3,5$，则队首的人出队。\n\n若队列中仅剩一人，则该人获胜，求你获胜的概率。", "inputFormat": "一行两个整数 $n,m$。\n", "outputFormat": "一个实数表示获胜概率，精确到小数点后 $9$ 位。\n", "hint": "- 对于 $30\\%$ 的数据，$0<m\\le n\\le 10$。\n- 对于 $100\\%$ 的数据，$0<m\\le n\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P1410", "type": "P", "difficulty": 5, "samples": [["6 3 1 4 5 8 7\r\n6 3 2 1 6 5 4\r\n", "Yes!\r\nNo!\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "福建省历届夏令营"], "title": "子序列", "background": null, "description": "给定一个长度为 $N$（$N$ 为偶数）的序列，问能否将其划分为两个长度为 $N / 2$ 的严格递增子序列。", "inputFormat": "若干行，每行表示一组数据。\n\n对于每组数据，首先输入一个整数 $N$，表示序列的长度。之后 $N$ 个整数表示这个序列。", "outputFormat": "输出行数与输入行数相同。\n\n对于每组数据，如果存在一种划分，则输出 `Yes!`，否则输出 `No!`。", "hint": "**【数据范围】**\n\n共三组数据，每组数据行数 $\\le 50$，$0 \\le$ 输入的所有数 $\\le 10^9$。\n\n第一组（$30\\%$）：$N \\le 20$；\n\n第二组（$30\\%$）：$N \\le 100$；\n\n第三组（$40\\%$）：$N \\le 2000$。", "locale": "zh-CN", "translations": {"en": {"title": "Subsequence", "background": "", "description": "Given a sequence of length $N$ (where $N$ is even), determine whether it can be partitioned into two strictly increasing subsequences, each of length $N / 2$.", "inputFormat": "Multiple lines, each line represents one set of testdata.\n\nFor each set of testdata, first input an integer $N$, the length of the sequence. Then $N$ integers follow, representing the sequence.", "outputFormat": "The number of output lines is the same as the number of input lines.\n\nFor each set of testdata, if such a partition exists, output `Yes!`, otherwise output `No!`.", "hint": "**Constraints**\n\nThere are three sets of testdata, each set contains at most $50$ lines, $0 \\le$ all input numbers $\\le 10^9$.\n\nSet 1 ($30\\%$): $N \\le 20$;\n\nSet 2 ($30\\%$): $N \\le 100$;\n\nSet 3 ($40\\%$): $N \\le 2000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "子序列", "background": null, "description": "给定一个长度为 $N$（$N$ 为偶数）的序列，问能否将其划分为两个长度为 $N / 2$ 的严格递增子序列。", "inputFormat": "若干行，每行表示一组数据。\n\n对于每组数据，首先输入一个整数 $N$，表示序列的长度。之后 $N$ 个整数表示这个序列。", "outputFormat": "输出行数与输入行数相同。\n\n对于每组数据，如果存在一种划分，则输出 `Yes!`，否则输出 `No!`。", "hint": "**【数据范围】**\n\n共三组数据，每组数据行数 $\\le 50$，$0 \\le$ 输入的所有数 $\\le 10^9$。\n\n第一组（$30\\%$）：$N \\le 20$；\n\n第二组（$30\\%$）：$N \\le 100$；\n\n第三组（$40\\%$）：$N \\le 2000$。", "locale": "zh-CN"}}}
{"pid": "P1411", "type": "P", "difficulty": 6, "samples": [["5\n1 2\n2 3\n3 4\n4 5\n", "6\n"], ["8\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7\n6 8\n", "18\n"], ["3\n1 2\n1 3 \n", "3 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "高精度", "树形数据结构", "福建省历届夏令营", "背包 DP", "树形 DP"], "title": "树", "background": "L 发明了一种与树有关的游戏。", "description": "他从树中删除任意数量（可以为 $0$）的边，计算删除后所有连通块大小的乘积，L 将得到这么多的分数。\n\n你的任务就是对于一颗给定的树，求出 L 能得到的最大分数。\n", "inputFormat": "第一行一个整数 $n$，表示树的节点个数。\n\n接下来 $(n-1)$ 行，每行两个整数 $u, v$，代表存在一条连接 $u, v$ 的边。\n", "outputFormat": "输出一行一个整数，表示 L 能得到的最大分数。\n", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，保证 $n \\leq 5$。\n- 对于 $30\\%$ 的数据，保证 $n \\leq 100$。\n- 另有 $30\\%$ 的数据，保证给出的树是一条链。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 700$，$1 \\leq u, v \\leq n$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Tree", "background": "L invented a game related to trees.", "description": "He deletes any number (possibly $0$) of edges from the tree and computes the product of the sizes of all connected components after the deletions. L scores that many points. Your task is, for a given tree, to find the maximum score L can obtain.", "inputFormat": "The first line contains an integer $n$, the number of nodes in the tree.\n\nThe next $(n-1)$ lines each contain two integers $u, v$, indicating that there is an edge connecting $u$ and $v$.", "outputFormat": "Output a single integer, the maximum score L can obtain.", "hint": "#### Constraints\n\n- For $10\\%$ of the testdata, $n \\leq 5$.\n- For $30\\%$ of the testdata, $n \\leq 100$.\n- For another $30\\%$ of the testdata, the given tree is a path.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 700$, $1 \\leq u, v \\leq n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "树", "background": "L 发明了一种与树有关的游戏。", "description": "他从树中删除任意数量（可以为 $0$）的边，计算删除后所有连通块大小的乘积，L 将得到这么多的分数。\n\n你的任务就是对于一颗给定的树，求出 L 能得到的最大分数。\n", "inputFormat": "第一行一个整数 $n$，表示树的节点个数。\n\n接下来 $(n-1)$ 行，每行两个整数 $u, v$，代表存在一条连接 $u, v$ 的边。\n", "outputFormat": "输出一行一个整数，表示 L 能得到的最大分数。\n", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，保证 $n \\leq 5$。\n- 对于 $30\\%$ 的数据，保证 $n \\leq 100$。\n- 另有 $30\\%$ 的数据，保证给出的树是一条链。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 700$，$1 \\leq u, v \\leq n$。\n", "locale": "zh-CN"}}}
{"pid": "P1412", "type": "P", "difficulty": 3, "samples": [["5 50 50 10\r\n1 10\r\n1 20\r\n2 10\r\n2 20\r\n1 30\r\n", "375.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "福建省历届夏令营"], "title": "经营与开发", "background": "", "description": "$4X$ 概念体系，是指在 PC 战略游戏中一种相当普及和成熟的系统概念，得名自 $4$ 个同样以 EX 为开头的英语单词。\n\n- $\\verb!eXplore!$（探索）\n- $\\verb!eXpand!$（拓张与发展）\n- $\\verb!eXploit!$（经营与开发）\n- $\\verb!eXterminate!$（征服）\n\n——维基百科\n\n今次我们着重考虑 exploit 部分，并将其模型简化：\n\n你驾驶着一台带有钻头（初始能力值 $w$）的飞船，按既定路线依次飞过 $n$ 个星球。星球笼统的分为 $2$ 类：资源型和维修型。（$p$ 为钻头当前能力值）\n\n1. 资源型：含矿物质量 $a_i$，若选择开采，则得到 $a_i\\times p$ 的金钱，之后钻头损耗 $k\\%$，即 $p\\gets p\\times (1-0.01k)$；\n2. 维修型：维护费用 $b_i$，若选择维修，则支付 $b_i\\times p$ 的金钱，之后钻头修复 $c\\%$，即 $p\\gets p\\times (1+0.01c)$。\n\n注：维修后钻头的能力值可以超过初始值（你可以认为是翻修 + 升级）\n\n金钱可以透支。\n\n请作为舰长的你仔细抉择以最大化收入。", "inputFormat": "第一行 $4$ 个整数 $n,k,c,w$。\n\n以下 $n$ 行，每行 $2$ 个整数 $\\mathrm{type},x$。\n\n- $\\mathrm{type}$ 为 $1$ 则代表其为资源型星球，$x$ 为其矿物质含量 $a_i$；\n- $\\mathrm{type}$ 为 $2$ 则代表其为维修型星球，$x$ 为其维护费用 $b_i$；", "outputFormat": "一个实数（保留 $2$ 位小数），表示最大的收入。", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据 $n \\le 100$；\n- 另有 $20\\%$ 的数据 $n \\le 1000$，$k=100$；\n- 对于 $100\\%$ 的数据 $n \\le 100000$，$0 \\le k,c,w,a_i,b_i \\le 100$，保证答案不超过 $10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Operation and Development", "background": "", "description": "The $4X$ concept system refers to a widely used and mature system in PC strategy games, named after four English words that all begin with EX.\n\n- $\\verb!eXplore!$ (exploration)\n- $\\verb!eXpand!$ (expansion and development)\n- $\\verb!eXploit!$ (operation and development)\n- $\\verb!eXterminate!$ (conquest)\n\n— Wikipedia\n\nThis time we focus on the exploit part and simplify its model:\n\nYou pilot a spaceship with a drill (initial capability value $w$), flying in a fixed route through $n$ planets in order. Planets are broadly divided into $2$ types: resource and maintenance. (Let $p$ be the current capability of the drill.)\n\n1. Resource type: mineral mass $a_i$. If you choose to mine, you gain $a_i \\times p$ money, and then the drill wears by $k\\%$, i.e., $p \\gets p \\times (1 - 0.01k)$.\n2. Maintenance type: maintenance fee $b_i$. If you choose to repair, you pay $b_i \\times p$ money, and then the drill is restored by $c\\%$, i.e., $p \\gets p \\times (1 + 0.01c)$.\n\nNote: After maintenance, the drill’s capability value can exceed the initial value (you can think of it as refurbishment + upgrade).\n\nYour balance may go into overdraft.\n\nAs the captain, make careful choices to maximize income.", "inputFormat": "The first line contains $4$ integers $n, k, c, w$.\n\nThe next $n$ lines each contain $2$ integers $\\mathrm{type}, x$.\n\n- If $\\mathrm{type} = 1$, it is a resource planet and $x$ is its mineral mass $a_i$.\n- If $\\mathrm{type} = 2$, it is a maintenance planet and $x$ is its maintenance fee $b_i$.", "outputFormat": "Output a real number (rounded to $2$ decimal places) representing the maximum income.", "hint": "### Constraints\n\n- For $30\\%$ of the testdata, $n \\le 100$.\n- For another $20\\%$ of the testdata, $n \\le 1000$, $k = 100$.\n- For $100\\%$ of the testdata, $n \\le 100000$, $0 \\le k, c, w, a_i, b_i \\le 100$, and the answer is guaranteed not to exceed $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "经营与开发", "background": "", "description": "$4X$ 概念体系，是指在 PC 战略游戏中一种相当普及和成熟的系统概念，得名自 $4$ 个同样以 EX 为开头的英语单词。\n\n- $\\verb!eXplore!$（探索）\n- $\\verb!eXpand!$（拓张与发展）\n- $\\verb!eXploit!$（经营与开发）\n- $\\verb!eXterminate!$（征服）\n\n——维基百科\n\n今次我们着重考虑 exploit 部分，并将其模型简化：\n\n你驾驶着一台带有钻头（初始能力值 $w$）的飞船，按既定路线依次飞过 $n$ 个星球。星球笼统的分为 $2$ 类：资源型和维修型。（$p$ 为钻头当前能力值）\n\n1. 资源型：含矿物质量 $a_i$，若选择开采，则得到 $a_i\\times p$ 的金钱，之后钻头损耗 $k\\%$，即 $p\\gets p\\times (1-0.01k)$；\n2. 维修型：维护费用 $b_i$，若选择维修，则支付 $b_i\\times p$ 的金钱，之后钻头修复 $c\\%$，即 $p\\gets p\\times (1+0.01c)$。\n\n注：维修后钻头的能力值可以超过初始值（你可以认为是翻修 + 升级）\n\n金钱可以透支。\n\n请作为舰长的你仔细抉择以最大化收入。", "inputFormat": "第一行 $4$ 个整数 $n,k,c,w$。\n\n以下 $n$ 行，每行 $2$ 个整数 $\\mathrm{type},x$。\n\n- $\\mathrm{type}$ 为 $1$ 则代表其为资源型星球，$x$ 为其矿物质含量 $a_i$；\n- $\\mathrm{type}$ 为 $2$ 则代表其为维修型星球，$x$ 为其维护费用 $b_i$；", "outputFormat": "一个实数（保留 $2$ 位小数），表示最大的收入。", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据 $n \\le 100$；\n- 另有 $20\\%$ 的数据 $n \\le 1000$，$k=100$；\n- 对于 $100\\%$ 的数据 $n \\le 100000$，$0 \\le k,c,w,a_i,b_i \\le 100$，保证答案不超过 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P1413", "type": "P", "difficulty": 2, "samples": [["10\n1 1\n1 61\n2 1\n2 60\n3 1\n3 2\n3 3\n3 4\n4 1\n4 99999", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心"], "title": "坚果保龄球", "background": "", "description": "PVZ 这款游戏中，有一种坚果保龄球。zombie 从地图右侧不断出现，向左走，玩家需要从左侧滚动坚果来碾死他们。\n\n我们可以认为地图是一个行数为 $6$，列数为 $60$ 的棋盘。zombie 出现的那一秒站在这一行的第 $60$ 列，之后每秒向左移动一步。玩家可以随时在屏幕最某一行第一列摆放坚果，这一行的 zombie 瞬间全被滚过去的坚果碾死。如果 zombie 走到第 $1$ 列没有被消灭，如果再向左走，则你的大脑就会被 zombie 吃掉。\n\n现在有 $n$ 只 zombie！告诉你每只 zombie 出现的时间以及在出现的行数（可能会同时出现同一位置的僵尸），请问至少需要多少坚果才能消灭所有的 zombie。", "inputFormat": "第一行一个正整数 $n$，表示 zombie 数量。\n\n之后 $n$ 行中，每行两个正整数 $P$ 和 $t$，分别表示 zombie 所在行和 zombie 出现的时间。", "outputFormat": "一个正整数，最少需要的坚果数。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$n \\le 2000$，$t \\le 100000$，$1 \\le P \\le 6$。\n\n### 题目来源\n\nkkksc03 改编\n", "locale": "zh-CN", "translations": {"en": {"title": "Wall-nut Bowling", "background": "", "description": "In the game PVZ, there is a mode called Wall-nut Bowling. Zombies appear from the right side of the map and walk left, and the player needs to roll wall-nuts from the left side to crush them.\n\nWe can model the map as a board with $6$ rows and $60$ columns. A zombie, at the instant it appears, stands at column $60$ of its row, and then moves one step to the left every second. The player may place a wall-nut at column $1$ of any row at any time; the wall-nut instantly rolls through that row and crushes all zombies currently on that row. If a zombie reaches column $1$ and is not eliminated, and then moves further left, your brain will be eaten by the zombie.\n\nNow there are $n$ zombies. You are given each zombie’s appearance time and row (multiple zombies may appear at the same position simultaneously). What is the minimum number of wall-nuts required to eliminate all zombies?", "inputFormat": "The first line contains a positive integer $n$, the number of zombies.\n\nEach of the following $n$ lines contains two positive integers $P$ and $t$, denoting the row index of the zombie and the time when the zombie appears.", "outputFormat": "Output a single integer, the minimum number of wall-nuts required.", "hint": "Constraints\n\nFor all testdata, $n \\le 2000$, $t \\le 100000$, $1 \\le P \\le 6$.\n\nSource\n\nAdapted from kkksc03.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "坚果保龄球", "background": "", "description": "PVZ 这款游戏中，有一种坚果保龄球。zombie 从地图右侧不断出现，向左走，玩家需要从左侧滚动坚果来碾死他们。\n\n我们可以认为地图是一个行数为 $6$，列数为 $60$ 的棋盘。zombie 出现的那一秒站在这一行的第 $60$ 列，之后每秒向左移动一步。玩家可以随时在屏幕最某一行第一列摆放坚果，这一行的 zombie 瞬间全被滚过去的坚果碾死。如果 zombie 走到第 $1$ 列没有被消灭，如果再向左走，则你的大脑就会被 zombie 吃掉。\n\n现在有 $n$ 只 zombie！告诉你每只 zombie 出现的时间以及在出现的行数（可能会同时出现同一位置的僵尸），请问至少需要多少坚果才能消灭所有的 zombie。", "inputFormat": "第一行一个正整数 $n$，表示 zombie 数量。\n\n之后 $n$ 行中，每行两个正整数 $P$ 和 $t$，分别表示 zombie 所在行和 zombie 出现的时间。", "outputFormat": "一个正整数，最少需要的坚果数。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$n \\le 2000$，$t \\le 100000$，$1 \\le P \\le 6$。\n\n### 题目来源\n\nkkksc03 改编\n", "locale": "zh-CN"}}}
{"pid": "P1414", "type": "P", "difficulty": 4, "samples": [["4\n1 2 3 4\n", "4\n2\n1\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "洛谷原创", "枚举", "最大公约数 gcd", "调和级数"], "title": "又是毕业季II", "background": "“叮铃铃铃”，随着高考最后一科结考铃声的敲响，三年青春时光顿时凝固于此刻。毕业的欣喜怎敌那离别的不舍，憧憬着未来仍毋忘逝去的歌。一千多个日夜的欢笑和泪水，全凝聚在毕业晚会上，相信，这一定是一生最难忘的时刻！\n", "description": "彩排了一次，老师不太满意。当然啦，取每位同学的号数来找最大公约数显然不太合理。于是老师给每位同学评了一个能力值。于是现在问题变为，从 $n$ 个学生中挑出 $k$ 个人使得他们的默契程度（即能力值的最大公约数）最大。但因为节目太多了，而且每个节目需要的人数又不知道。老师想要知道所有情况下能达到的最大默契程度是多少。这下子更麻烦了，还是交给你吧~\n\nPS：一个数的最大公约数即本身。\n", "inputFormat": "第一行一个正整数 $n$。\n\n第二行为 $n$ 个空格隔开的正整数，表示每个学生的能力值。\n", "outputFormat": "总共 $n$ 行，第 $i$ 行为 $k=i$ 情况下的最大默契程度。\n", "hint": "【题目来源】\n\nlzn 原创\n\n【数据范围】\n\n记输入数据中能力值的最大值为 $\\textit{inf}$。\n\n- 对于 $20\\%$ 的数据，$n \\leq 5$，$\\textit{inf}\\leq 10^3$；\n- 对于另 $30\\%$ 的数据，$n \\leq 100$，$\\textit{inf} \\leq 10$；\n- 对于 $100\\%$ 的数据，$n \\leq 10^4$，$\\textit{inf} \\leq 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Graduation Season Again II", "background": "“Ding-ling-ling.” With the ringing of the bell for the last subject of the Gaokao, three years of youth suddenly freeze at this moment. The joy of graduation cannot outweigh the sadness of parting; while looking forward to the future, we still remember the songs of the past. The laughter and tears of over a thousand days and nights all converge at the graduation party. Surely, this will be one of the most unforgettable moments in life.", "description": "After one rehearsal, the teacher was not very satisfied. Of course, taking each student's ID number to compute a greatest common divisor is clearly unreasonable. So the teacher assigned an ability value to each student. Now the problem becomes: choose $k$ students from $n$ students so that their synergy (defined as the greatest common divisor of the selected ability values) is maximized. However, there are too many programs, and the required number of people for each program is unknown. The teacher wants to know, for every possible $k$, the maximum achievable synergy. This is getting troublesome, so it is up to you.\n\nNote: The greatest common divisor of a single number is the number itself.", "inputFormat": "The first line contains a positive integer $n$.\n\nThe second line contains $n$ space-separated positive integers, representing each student's ability value.", "outputFormat": "Output $n$ lines. The $i$-th line is the maximum synergy when $k = i$.", "hint": "Source: lzn original.\n\nConstraints\n\nLet the maximum ability value in the input be $\\textit{inf}$.\n\n- For $20\\%$ of the testdata, $n \\leq 5$, $\\textit{inf} \\leq 10^3$.\n- For another $30\\%$ of the testdata, $n \\leq 100$, $\\textit{inf} \\leq 10$.\n- For $100\\%$ of the testdata, $n \\leq 10^4$, $\\textit{inf} \\leq 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "又是毕业季II", "background": "“叮铃铃铃”，随着高考最后一科结考铃声的敲响，三年青春时光顿时凝固于此刻。毕业的欣喜怎敌那离别的不舍，憧憬着未来仍毋忘逝去的歌。一千多个日夜的欢笑和泪水，全凝聚在毕业晚会上，相信，这一定是一生最难忘的时刻！\n", "description": "彩排了一次，老师不太满意。当然啦，取每位同学的号数来找最大公约数显然不太合理。于是老师给每位同学评了一个能力值。于是现在问题变为，从 $n$ 个学生中挑出 $k$ 个人使得他们的默契程度（即能力值的最大公约数）最大。但因为节目太多了，而且每个节目需要的人数又不知道。老师想要知道所有情况下能达到的最大默契程度是多少。这下子更麻烦了，还是交给你吧~\n\nPS：一个数的最大公约数即本身。\n", "inputFormat": "第一行一个正整数 $n$。\n\n第二行为 $n$ 个空格隔开的正整数，表示每个学生的能力值。\n", "outputFormat": "总共 $n$ 行，第 $i$ 行为 $k=i$ 情况下的最大默契程度。\n", "hint": "【题目来源】\n\nlzn 原创\n\n【数据范围】\n\n记输入数据中能力值的最大值为 $\\textit{inf}$。\n\n- 对于 $20\\%$ 的数据，$n \\leq 5$，$\\textit{inf}\\leq 10^3$；\n- 对于另 $30\\%$ 的数据，$n \\leq 100$，$\\textit{inf} \\leq 10$；\n- 对于 $100\\%$ 的数据，$n \\leq 10^4$，$\\textit{inf} \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P1415", "type": "P", "difficulty": 6, "samples": [["3456", "3,4,5,6"], ["3526", "3,5,26"], ["3546", "35,46"], ["0001", "0001"], ["100000101", "100,000101"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "动态规划 DP", "搜索", "洛谷原创"], "title": "拆分数列", "background": "", "description": "给出一列数字，需要你添加任意多个逗号将其拆成若干个严格递增的数。如果有多组解，则输出使得最后一个数最小的同时，字典序最大的解（即先要满足最后一个数最小；如果有多组解，则使得第一个数尽量大；如果仍有多组解，则使得第二个数尽量大，依次类推……）。\n", "inputFormat": "共一行，为初始的数字。\n", "outputFormat": "共一行，为拆分之后的数列。每个数之间用逗号分隔。行尾无逗号。\n", "hint": "\n### 数据范围及约定\n\n记输入的字符串的长度为 $l$。\n\n- 对于 $10\\%$ 的数据，$l \\le 5$；\n- 对于 $30\\%$ 的数据，$l \\le 15$；\n- 对于 $50\\%$ 的数据，$l \\le 50$；\n- 对于 $100\\%$ 的数据，$l \\le 500$。\n\n### 题目来源\n\nlzn 改编", "locale": "zh-CN", "translations": {"en": {"title": "Split the Number Sequence", "background": "", "description": "You are given a sequence of digits. You need to insert any number of commas to split it into a sequence of strictly increasing integers. If there are multiple solutions, output the one that minimizes the last number and, at the same time, is lexicographically largest (that is, first ensure the last number is minimized; if there are still multiple solutions, make the first number as large as possible; if there are still multiple solutions, make the second number as large as possible, and so on).", "inputFormat": "A single line containing the initial number.", "outputFormat": "A single line containing the sequence after splitting. Numbers are separated by commas, with no trailing comma.", "hint": "Constraints\n\nLet the length of the input string be $l$.\n\n- For $10\\%$ of the testdata, $l \\le 5$.\n- For $30\\%$ of the testdata, $l \\le 15$.\n- For $50\\%$ of the testdata, $l \\le 50$.\n- For $100\\%$ of the testdata, $l \\le 500$.\n\nSource: adapted by lzn.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "拆分数列", "background": "", "description": "给出一列数字，需要你添加任意多个逗号将其拆成若干个严格递增的数。如果有多组解，则输出使得最后一个数最小的同时，字典序最大的解（即先要满足最后一个数最小；如果有多组解，则使得第一个数尽量大；如果仍有多组解，则使得第二个数尽量大，依次类推……）。\n", "inputFormat": "共一行，为初始的数字。\n", "outputFormat": "共一行，为拆分之后的数列。每个数之间用逗号分隔。行尾无逗号。\n", "hint": "\n### 数据范围及约定\n\n记输入的字符串的长度为 $l$。\n\n- 对于 $10\\%$ 的数据，$l \\le 5$；\n- 对于 $30\\%$ 的数据，$l \\le 15$；\n- 对于 $50\\%$ 的数据，$l \\le 50$；\n- 对于 $100\\%$ 的数据，$l \\le 500$。\n\n### 题目来源\n\nlzn 改编", "locale": "zh-CN"}}}
{"pid": "P1416", "type": "P", "difficulty": 3, "samples": [["3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "构造"], "title": "攻击火星", "background": "", "description": "一群外星人将要攻击火星。\n\n火星的地图是一个 $n$ 个点的无向图。这伙外星人将按照如下方法入侵，先攻击度为 $0$ 的点（相当于从图中删除掉它），然后是度为 $1$ 的点，依此类推直到度为 $n-1$ 的点。\n\n所有的点度统计是动态统计的。（一个点删掉后，与之相连的点的点度都会 $-1$）。外星人攻击度为某个数的点时是同时攻击的。\n\n你需要设计这个图的边的方案来使得未被攻击的点最多。注意：你设计的图**不允许自环及重边**。\n\n", "inputFormat": "输入文件包含一行一个整数 $n$。\n", "outputFormat": "一行一个整数，表示最多的最后未被攻击的点。\n", "hint": "【样例解释】\n\n一种可能的方案是 $1\\leftrightarrow 2\\leftrightarrow 3$，这样首先删掉度为 $1$ 的点 $1$ 和点 $3$，此时点 $2$ 度数为 $0$，不会被删去。\n\n【数据范围】\n\n- 对于 $20\\%$ 的数据 $1\\le n\\le 10$；\n- 对于 $100\\%$ 的数据 $1\\le n\\le 5\\times 10^4$。\n\n【题目来源】\n\ntinylic改编\n", "locale": "zh-CN", "translations": {"en": {"title": "Attacking Mars", "background": "", "description": "A group of aliens are going to attack Mars.\n\nThe map of Mars is an undirected graph with $n$ vertices. The aliens invade as follows: they first attack vertices of degree $0$ (equivalently, delete them from the graph), then vertices of degree $1$, and so on up to degree $n-1$.\n\nAll degree counts are updated dynamically. After a vertex is deleted, the degrees of its adjacent vertices all decrease by $1$. When attacking vertices of a certain degree, the aliens attack them simultaneously.\n\nYou need to design the edges of the graph to maximize the number of vertices that remain un-attacked. Note: the graph you design **does not allow self-loops or multiple edges**.", "inputFormat": "The input contains one line with an integer $n$.", "outputFormat": "Output a single integer, the maximum number of vertices that remain un-attacked in the end.", "hint": "[Sample Explanation]\n\nOne possible construction is $1\\leftrightarrow 2\\leftrightarrow 3$. In this case, vertices $1$ and $3$ with degree $1$ are deleted first. Then vertex $2$ has degree $0$ and will not be deleted.\n\n[Constraints]\n\n- For $20\\%$ of the testdata, $1\\le n\\le 10$.\n- For $100\\%$ of the testdata, $1\\le n\\le 5\\times 10^4$.\n\n[Source]\n\nAdapted by tinylic.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "攻击火星", "background": "", "description": "一群外星人将要攻击火星。\n\n火星的地图是一个 $n$ 个点的无向图。这伙外星人将按照如下方法入侵，先攻击度为 $0$ 的点（相当于从图中删除掉它），然后是度为 $1$ 的点，依此类推直到度为 $n-1$ 的点。\n\n所有的点度统计是动态统计的。（一个点删掉后，与之相连的点的点度都会 $-1$）。外星人攻击度为某个数的点时是同时攻击的。\n\n你需要设计这个图的边的方案来使得未被攻击的点最多。注意：你设计的图**不允许自环及重边**。\n\n", "inputFormat": "输入文件包含一行一个整数 $n$。\n", "outputFormat": "一行一个整数，表示最多的最后未被攻击的点。\n", "hint": "【样例解释】\n\n一种可能的方案是 $1\\leftrightarrow 2\\leftrightarrow 3$，这样首先删掉度为 $1$ 的点 $1$ 和点 $3$，此时点 $2$ 度数为 $0$，不会被删去。\n\n【数据范围】\n\n- 对于 $20\\%$ 的数据 $1\\le n\\le 10$；\n- 对于 $100\\%$ 的数据 $1\\le n\\le 5\\times 10^4$。\n\n【题目来源】\n\ntinylic改编\n", "locale": "zh-CN"}}}
{"pid": "P1417", "type": "P", "difficulty": 4, "samples": [["74 1\n502\n2\n47\n", "408"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "排序", "背包 DP"], "title": "烹调方案", "background": "由于你的帮助，火星只遭受了最小的损失。但 gw 懒得重建家园了，就造了一艘飞船飞向遥远的 earth 星。不过飞船飞到一半，gw 发现了一个很严重的问题：肚子饿了 ~。\n\ngw 还是会做饭的，于是拿出了储藏的食物准备填饱肚子。gw 希望能在 $T$ 时间内做出最美味的食物，但是这些食物美味程度的计算方式比较奇葩，于是绝望的 gw 只好求助于你了。", "description": "一共有 $n$ 件食材，每件食材有三个属性，$a_i$，$b_i$ 和 $c_i$，如果在 $t$ 时刻完成第 $i$ 样食材则得到 $a_i-t\\times b_i$ 的美味指数，用第 $i$ 件食材做饭要花去 $c_i$ 的时间。\n\n众所周知，gw 的厨艺不怎么样，所以他需要你设计烹调方案使得美味指数最大。", "inputFormat": "第一行是两个正整数 $T$ 和 $n$，表示到达地球所需时间和食材个数。\n\n- 下面一行 $n$ 个整数，$a_i$；\n- 下面一行 $n$ 个整数，$b_i$；\n- 下面一行 $n$ 个整数，$c_i$。", "outputFormat": "输出最大美味指数。\n", "hint": "### 数据范围及约定\n\n- 对于 $40\\%$ 的数据 $1 \\le n \\le 10$；\n- 对于 $100\\%$ 的数据 $1 \\le n \\le 50$。\n\n所有数字均小于 $10^5$。\n\n### 题目来源\n\ntinylic 改编\n", "locale": "zh-CN", "translations": {"en": {"title": "Cooking Plan", "background": "Thanks to your help, Mars suffered only minimal damage. But gw was too lazy to rebuild his home, so he built a spaceship and headed toward the distant planet Earth. Halfway through the journey, gw realized a serious problem: he was hungry.\n\ngw can still cook, so he took out stored food to fill his stomach. gw hopes to cook the most delicious food within $T$ time, but the way to calculate deliciousness is unusual, so the desperate gw is asking for your help.", "description": "There are $n$ ingredients. Each ingredient has three attributes, $a_i$, $b_i$, and $c_i$. If ingredient $i$ is completed at time $t$, you gain a deliciousness score of $a_i-t\\times b_i$. Cooking ingredient $i$ takes $c_i$ time.\n\nAs everyone knows, gw is not very good at cooking, so you need to design a cooking plan to maximize the deliciousness score. All cooking must be finished within time $T$.", "inputFormat": "The first line contains two positive integers $T$ and $n$, representing the time needed to reach Earth and the number of ingredients.\n\n- The next line contains $n$ integers, $a_i$.\n- The next line contains $n$ integers, $b_i$.\n- The next line contains $n$ integers, $c_i$.", "outputFormat": "Output the maximum deliciousness score.", "hint": "- Constraints:\n  - For $40\\%$ of the testdata, $1 \\le n \\le 10$.\n  - For $100\\%$ of the testdata, $1 \\le n \\le 50$.\n  - All numbers are less than $10^5$.\n- Source: adapted by tinylic.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "烹调方案", "background": "由于你的帮助，火星只遭受了最小的损失。但 gw 懒得重建家园了，就造了一艘飞船飞向遥远的 earth 星。不过飞船飞到一半，gw 发现了一个很严重的问题：肚子饿了 ~。\n\ngw 还是会做饭的，于是拿出了储藏的食物准备填饱肚子。gw 希望能在 $T$ 时间内做出最美味的食物，但是这些食物美味程度的计算方式比较奇葩，于是绝望的 gw 只好求助于你了。", "description": "一共有 $n$ 件食材，每件食材有三个属性，$a_i$，$b_i$ 和 $c_i$，如果在 $t$ 时刻完成第 $i$ 样食材则得到 $a_i-t\\times b_i$ 的美味指数，用第 $i$ 件食材做饭要花去 $c_i$ 的时间。\n\n众所周知，gw 的厨艺不怎么样，所以他需要你设计烹调方案使得美味指数最大。", "inputFormat": "第一行是两个正整数 $T$ 和 $n$，表示到达地球所需时间和食材个数。\n\n- 下面一行 $n$ 个整数，$a_i$；\n- 下面一行 $n$ 个整数，$b_i$；\n- 下面一行 $n$ 个整数，$c_i$。", "outputFormat": "输出最大美味指数。\n", "hint": "### 数据范围及约定\n\n- 对于 $40\\%$ 的数据 $1 \\le n \\le 10$；\n- 对于 $100\\%$ 的数据 $1 \\le n \\le 50$。\n\n所有数字均小于 $10^5$。\n\n### 题目来源\n\ntinylic 改编\n", "locale": "zh-CN"}}}
{"pid": "P1418", "type": "P", "difficulty": 5, "samples": [["2 3\n2 1 \n1 0 2 \n", "101\n001\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "各省省选", "天津"], "title": "[TJOI2011] 构造矩阵", "background": "", "description": "要求构造一个 $n\\times m$ 的 $01$ 矩阵，满足每一行中 $1$ 的个数分别为 $r_1,r_2,\\ldots,r_n$ ,每一列中1的个数为 $c_1,c_2,\\ldots,c_m$。\n\n在此基础上要求字典序最小。两个矩阵比较字典序时先比较第一行，第一行相等再比较第二行……", "inputFormat": "第一行输入两个整数 $n,m$。\n\n第二行输入 $n$ 个整数 $r_1,r_2,\\ldots,r_n$。\n\n第三行输入 $m$ 个整数 $c_1,c_2,\\ldots,c_m $。", "outputFormat": "输出一个 $n\\times m$ 的矩阵。", "hint": "对于 $100\\%$ 的数据 $n,m\\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2011] Construct a Matrix", "background": "", "description": "Construct an $n\\times m$ $01$ matrix such that the number of $1$s in each row is $r_1,r_2,\\ldots,r_n$, and the number of $1$s in each column is $c_1,c_2,\\ldots,c_m$.\n\nAmong all valid matrices, the result should be lexicographically smallest. When comparing two matrices in lexicographical order, first compare the first row; if they are equal, compare the second row; and so on.", "inputFormat": "The first line contains two integers $n,m$.\n\nThe second line contains $n$ integers $r_1,r_2,\\ldots,r_n$.\n\nThe third line contains $m$ integers $c_1,c_2,\\ldots,c_m $.", "outputFormat": "Output an $n\\times m$ matrix.", "hint": "For $100\\%$ of the testdata, $n,m\\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2011] 构造矩阵", "background": "", "description": "要求构造一个 $n\\times m$ 的 $01$ 矩阵，满足每一行中 $1$ 的个数分别为 $r_1,r_2,\\ldots,r_n$ ,每一列中1的个数为 $c_1,c_2,\\ldots,c_m$。\n\n在此基础上要求字典序最小。两个矩阵比较字典序时先比较第一行，第一行相等再比较第二行……", "inputFormat": "第一行输入两个整数 $n,m$。\n\n第二行输入 $n$ 个整数 $r_1,r_2,\\ldots,r_n$。\n\n第三行输入 $m$ 个整数 $c_1,c_2,\\ldots,c_m $。", "outputFormat": "输出一个 $n\\times m$ 的矩阵。", "hint": "对于 $100\\%$ 的数据 $n,m\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P1419", "type": "P", "difficulty": 4, "samples": [["3\r\n2 2\r\n3\r\n-1\r\n2\r\n", "1.000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["二分", "单调队列"], "title": "寻找段落", "background": "", "description": "给定一个长度为 $n$ 的序列 $a$，定义 $a_i$ 为第 $i$ 个元素的价值。现在需要找出序列中最有价值的“段落”。段落的定义是长度在 $[S, T]$ 之间的连续序列。最有价值段落是指平均值最大的段落。\n\n**段落的平均值** 等于 **段落总价值** 除以 **段落长度**。", "inputFormat": "第一行一个整数 $n$，表示序列长度。\n\n第二行两个整数 $S$ 和 $T$，表示段落长度的范围，在 $[S, T]$ 之间。\n\n第三行到第 $n+2$ 行，每行一个整数表示每个元素的价值指数。", "outputFormat": "一个实数，保留 $3$ 位小数，表示最优段落的平均值。", "hint": "【数据范围】\n\n对于 $30\\%$ 的数据有 $n \\le 1000$。\n\n对于 $100\\%$ 的数据有 $1 \\le n \\le 100000$，$1 \\le S \\le T \\le n$，$-{10}^4 \\le a_i \\le {10}^4$。\n\n【题目来源】\n\ntinylic 改编\n", "locale": "zh-CN", "translations": {"en": {"title": "Finding a Segment", "background": "", "description": "Given a sequence $a$ of length $n$, where $a_i$ is the value of the $i$-th element. You need to find the most valuable \"segment\" in the sequence. A segment is a contiguous subsequence whose length is in $[S, T]$. The most valuable segment is the one with the maximum average value.\n\nThe average value of a segment equals the total value of the segment divided by the segment length.", "inputFormat": "The first line contains an integer $n$, the length of the sequence.\n\nThe second line contains two integers $S$ and $T$, the allowed range of the segment length, i.e., in $[S, T]$.\n\nFrom the 3rd line to line $n+2$, each line contains one integer, the value of each element.", "outputFormat": "Output a real number with $3$ decimal places, representing the average value of the optimal segment.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $n \\le 1000$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 100000$, $1 \\le S \\le T \\le n$, $-{10}^4 \\le a_i \\le {10}^4$.\n\nSource\n\n- Adapted by tinylic.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "寻找段落", "background": "", "description": "给定一个长度为 $n$ 的序列 $a$，定义 $a_i$ 为第 $i$ 个元素的价值。现在需要找出序列中最有价值的“段落”。段落的定义是长度在 $[S, T]$ 之间的连续序列。最有价值段落是指平均值最大的段落。\n\n**段落的平均值** 等于 **段落总价值** 除以 **段落长度**。", "inputFormat": "第一行一个整数 $n$，表示序列长度。\n\n第二行两个整数 $S$ 和 $T$，表示段落长度的范围，在 $[S, T]$ 之间。\n\n第三行到第 $n+2$ 行，每行一个整数表示每个元素的价值指数。", "outputFormat": "一个实数，保留 $3$ 位小数，表示最优段落的平均值。", "hint": "【数据范围】\n\n对于 $30\\%$ 的数据有 $n \\le 1000$。\n\n对于 $100\\%$ 的数据有 $1 \\le n \\le 100000$，$1 \\le S \\le T \\le n$，$-{10}^4 \\le a_i \\le {10}^4$。\n\n【题目来源】\n\ntinylic 改编\n", "locale": "zh-CN"}}}
{"pid": "P1420", "type": "P", "difficulty": 1, "samples": [["10\n1 5 6 2 3 4 5 6 8 9", "5\n\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟"], "title": "最长连号", "background": "", "description": "输入长度为 $n$ 的一个正整数序列，要求输出序列中最长连号的长度。\n\n连号指在序列中，从小到大的连续自然数。\n", "inputFormat": "第一行，一个整数 $n$。\n\n第二行，$n$ 个整数 $a_i$，之间用空格隔开。\n", "outputFormat": "一个数，最长连号的长度。\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^4$，$1 \\leq a_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Longest Consecutive Sequence", "background": "", "description": "Given a sequence of positive integers of length $n$, output the length of the longest consecutive sequence in the sequence.\n\n“Consecutive” means consecutive natural numbers in increasing order that appear in the sequence.", "inputFormat": "The first line contains an integer $n$.\n\nThe second line contains $n$ integers $a_i$, separated by spaces.", "outputFormat": "Output one integer: the number of elements in the longest consecutive sequence.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\leq 10^4$, $1 \\leq a_i \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最长连号", "background": "", "description": "输入长度为 $n$ 的一个正整数序列，要求输出序列中最长连号的长度。\n\n连号指在序列中，从小到大的连续自然数。\n", "inputFormat": "第一行，一个整数 $n$。\n\n第二行，$n$ 个整数 $a_i$，之间用空格隔开。\n", "outputFormat": "一个数，最长连号的长度。\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^4$，$1 \\leq a_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1421", "type": "P", "difficulty": 1, "samples": [["10 3\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "小玉买文具", "background": "", "description": "班主任给小玉一个任务，到文具店里买尽量多的签字笔。已知一只签字笔的价格是 $1$ 元 $9$ 角，而班主任给小玉的钱是 $a$ 元 $b$ 角，小玉想知道，她最多能买多少只签字笔呢。\n", "inputFormat": "输入只有一行两个整数，分别表示 $a$ 和 $b$。", "outputFormat": "输出一行一个整数，表示小玉最多能买多少只签字笔。\n", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $0 \\leq a \\leq 10^4$，$0 \\leq b \\leq 9$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiaoyu Buys Stationery", "background": "", "description": "The homeroom teacher gives Xiaoyu a task: go to the stationery store and buy as many pens as possible. It is known that the price of one pen is $1$ yuan $9$ jiao, and the homeroom teacher gives Xiaoyu $a$ yuan $b$ jiao. Xiaoyu wants to know the maximum number of pens she can buy.", "inputFormat": "The input contains one line with two integers, representing $a$ and $b$.", "outputFormat": "Output one line with a single integer, the maximum number of pens Xiaoyu can buy.", "hint": "#### Constraints\n\nFor all test points, it is guaranteed that $0 \\leq a \\leq 10^4$, $0 \\leq b \\leq 9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小玉买文具", "background": "", "description": "班主任给小玉一个任务，到文具店里买尽量多的签字笔。已知一只签字笔的价格是 $1$ 元 $9$ 角，而班主任给小玉的钱是 $a$ 元 $b$ 角，小玉想知道，她最多能买多少只签字笔呢。\n", "inputFormat": "输入只有一行两个整数，分别表示 $a$ 和 $b$。", "outputFormat": "输出一行一个整数，表示小玉最多能买多少只签字笔。\n", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $0 \\leq a \\leq 10^4$，$0 \\leq b \\leq 9$。", "locale": "zh-CN"}}}
{"pid": "P1422", "type": "P", "difficulty": 1, "samples": [["267", "121.5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "小玉家的电费", "background": "", "description": "夏天到了，各家各户的用电量都增加了许多，相应的电费也交的更多了。小玉家今天收到了一份电费通知单。小玉看到上面写：据闽价电 [2006]27 号规定，月用电量在 $150$ 千瓦时及以下部分按每千瓦时 $0.4463$ 元执行，月用电量在 $151\\sim 400$ 千瓦时的部分按每千瓦时 $0.4663$ 元执行，月用电量在 $401$ 千瓦时及以上部分按每千瓦时 $0.5663$ 元执行。小玉想自己验证一下，电费通知单上应交电费的数目到底是否正确呢。请编写一个程序，已知用电总计，根据电价规定，计算出应交的电费应该是多少。\n", "inputFormat": "输入一个正整数，表示用电总计（单位以千瓦时计），不超过 $10000$。\n", "outputFormat": "输出一个数，保留到小数点后 $1$ 位（单位以元计，保留到小数点后 $1$ 位）。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Electricity Bill of Xiao Yu's Family", "background": "", "description": "Summer has arrived, and households are using much more electricity, so their electricity bills have increased as well. Today, Xiao Yu’s family received an electricity bill notice. Xiao Yu saw that it stated: According to Minjiadian [2006] No. 27, the portion of monthly electricity consumption up to and including $150$ kilowatt-hours is charged at $0.4463$ yuan per kilowatt-hour, the portion within $151\\sim 400$ kilowatt-hours is charged at $0.4663$ yuan per kilowatt-hour, and the portion at $401$ kilowatt-hours and above is charged at $0.5663$ yuan per kilowatt-hour. Xiao Yu wants to verify whether the amount due on the bill is correct. Please write a program that, given the total electricity consumption, calculates the amount of the electricity bill according to the pricing rules.", "inputFormat": "Input a positive integer representing the total electricity consumption (in kilowatt-hours), not exceeding $10000$.", "outputFormat": "Output a number with exactly $1$ decimal place (in yuan).", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小玉家的电费", "background": "", "description": "夏天到了，各家各户的用电量都增加了许多，相应的电费也交的更多了。小玉家今天收到了一份电费通知单。小玉看到上面写：据闽价电 [2006]27 号规定，月用电量在 $150$ 千瓦时及以下部分按每千瓦时 $0.4463$ 元执行，月用电量在 $151\\sim 400$ 千瓦时的部分按每千瓦时 $0.4663$ 元执行，月用电量在 $401$ 千瓦时及以上部分按每千瓦时 $0.5663$ 元执行。小玉想自己验证一下，电费通知单上应交电费的数目到底是否正确呢。请编写一个程序，已知用电总计，根据电价规定，计算出应交的电费应该是多少。\n", "inputFormat": "输入一个正整数，表示用电总计（单位以千瓦时计），不超过 $10000$。\n", "outputFormat": "输出一个数，保留到小数点后 $1$ 位（单位以元计，保留到小数点后 $1$ 位）。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1423", "type": "P", "difficulty": 1, "samples": [["4.3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "小玉在游泳", "background": "", "description": "小玉开心的在游泳，可是她很快难过的发现，自己的力气不够，游泳好累哦。已知小玉第一步能游 $2$ 米，可是随着越来越累，力气越来越小，她接下来的每一步都只能游出上一步距离的 $98\\%$。现在小玉想知道，如果要游到距离 $s$ 米的地方，她需要游多少步呢。请你编程解决这个问题。\n", "inputFormat": "输入一个实数 $s$（单位：米），表示要游的目标距离。\n", "outputFormat": "输出一个整数，表示小玉一共需要游多少步。\n", "hint": "数据保证，$0 \\leq s < 100$，且 $s$ 小数点后最多只有一位。", "locale": "zh-CN", "translations": {"en": {"title": "{{Xiaoyu Is Swimming}}", "background": "{{}}", "description": "{{Xiaoyu is happily swimming, but she soon sadly finds that she lacks strength and swimming is tiring. It is known that Xiaoyu can swim $2$ meters in the first step, but as she becomes more and more tired and weaker, each subsequent step can only cover $98\\%$ of the distance of the previous step. Now Xiaoyu wants to know, if she wants to swim to a place $s$ meters away, how many steps does she need? Please write a program to solve this problem.}}", "inputFormat": "{{Input a real number $s$ (unit: meters), representing the target distance to swim.}}", "outputFormat": "{{Output an integer, representing the total number of steps Xiaoyu needs.}}", "hint": "{{It is guaranteed that $0 \\leq s < 100$, and $s$ has at most one digit after the decimal point.}}\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小玉在游泳", "background": "", "description": "小玉开心的在游泳，可是她很快难过的发现，自己的力气不够，游泳好累哦。已知小玉第一步能游 $2$ 米，可是随着越来越累，力气越来越小，她接下来的每一步都只能游出上一步距离的 $98\\%$。现在小玉想知道，如果要游到距离 $s$ 米的地方，她需要游多少步呢。请你编程解决这个问题。\n", "inputFormat": "输入一个实数 $s$（单位：米），表示要游的目标距离。\n", "outputFormat": "输出一个整数，表示小玉一共需要游多少步。\n", "hint": "数据保证，$0 \\leq s < 100$，且 $s$ 小数点后最多只有一位。", "locale": "zh-CN"}}}
{"pid": "P1424", "type": "P", "difficulty": 1, "samples": [["3 10", "2000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "小鱼的航程（改进版）", "background": "", "description": "有一只小鱼，它平日每天游泳 $250$ 公里，周末休息（实行双休日)，假设从周 $x$ 开始算起，过了 $n$ 天以后，小鱼一共累计游泳了多少公里呢？", "inputFormat": "输入两个正整数 $x,n$，表示从周 $x$ 算起，经过 $n$ 天。\n", "outputFormat": "输出一个整数，表示小鱼累计游泳了多少公里。\n", "hint": "数据保证，$1\\le x \\le 7$，$1 \\le n\\le 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Little Fish's Journey (Improved Version)", "background": "", "description": "There is a little fish that swims $250$ kilometers every weekday and rests on weekends (two-day weekend). Starting from day $x$ of the week, after $n$ days, how many kilometers has the little fish swum in total?", "inputFormat": "Two positive integers $x, n$, meaning starting from day $x$ of the week and continuing for $n$ days.", "outputFormat": "Output a single integer, the total number of kilometers the little fish has swum.", "hint": "The testdata guarantees $1\\le x \\le 7$, $1 \\le n\\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小鱼的航程（改进版）", "background": "", "description": "有一只小鱼，它平日每天游泳 $250$ 公里，周末休息（实行双休日)，假设从周 $x$ 开始算起，过了 $n$ 天以后，小鱼一共累计游泳了多少公里呢？", "inputFormat": "输入两个正整数 $x,n$，表示从周 $x$ 算起，经过 $n$ 天。\n", "outputFormat": "输出一个整数，表示小鱼累计游泳了多少公里。\n", "hint": "数据保证，$1\\le x \\le 7$，$1 \\le n\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P1425", "type": "P", "difficulty": 1, "samples": [["12 50 19 10", "6 20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "枚举"], "title": "小鱼的游泳时间", "background": "", "description": "伦敦奥运会要到了，小鱼在拼命练习游泳准备参加游泳比赛，可怜的小鱼并不知道鱼类是不能参加人类的奥运会的。\n\n这一天，小鱼给自己的游泳时间做了精确的计时（本题中的计时都按 $24$ 小时制计算），它发现自己从 $a$ 时 $b$ 分一直游泳到当天的 $c$ 时 $d$ 分，请你帮小鱼计算一下，它这天一共游了多少时间呢？\n\n小鱼游的好辛苦呀，你可不要算错了哦。\n", "inputFormat": "一行内输入四个整数，以空格隔开，分别表示题目中的 $a, b, c, d$。", "outputFormat": "一行内输出两个整数 $e$ 和 $f$，用空格间隔，依次表示小鱼这天一共游了多少小时多少分钟。其中表示分钟的整数 $f$ 应该小于 $60$。", "hint": "对于全部测试数据，$0\\le a,c \\le 24$，$0\\le b,d \\le 60$，且结束时间一定晚于开始时间。", "locale": "zh-CN", "translations": {"en": {"title": "Little Fish's Swimming Time", "background": "", "description": "The London Olympics are coming, and Little Fish is training hard for the swimming competition. Poor Little Fish doesn’t know that fish cannot participate in the human Olympics.\n\nOn this day, Little Fish measured its swimming time precisely (all timing in this problem uses the $24$-hour clock). It found that it swam from $a$ hours $b$ minutes to $c$ hours $d$ minutes on the same day. Please help Little Fish calculate how long it swam in total that day.\n\nLittle Fish worked really hard, so please don’t miscalculate.", "inputFormat": "A single line contains four integers separated by spaces, representing $a, b, c, d$ in the statement.", "outputFormat": "Output two integers $e$ and $f$ in one line, separated by a space, indicating how many hours and minutes Little Fish swam in total that day. The minutes integer $f$ should be less than $60$.", "hint": "For all testdata, $0 \\le a, c \\le 24$, $0 \\le b, d \\le 60$, and the end time is guaranteed to be later than the start time.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小鱼的游泳时间", "background": "", "description": "伦敦奥运会要到了，小鱼在拼命练习游泳准备参加游泳比赛，可怜的小鱼并不知道鱼类是不能参加人类的奥运会的。\n\n这一天，小鱼给自己的游泳时间做了精确的计时（本题中的计时都按 $24$ 小时制计算），它发现自己从 $a$ 时 $b$ 分一直游泳到当天的 $c$ 时 $d$ 分，请你帮小鱼计算一下，它这天一共游了多少时间呢？\n\n小鱼游的好辛苦呀，你可不要算错了哦。\n", "inputFormat": "一行内输入四个整数，以空格隔开，分别表示题目中的 $a, b, c, d$。", "outputFormat": "一行内输出两个整数 $e$ 和 $f$，用空格间隔，依次表示小鱼这天一共游了多少小时多少分钟。其中表示分钟的整数 $f$ 应该小于 $60$。", "hint": "对于全部测试数据，$0\\le a,c \\le 24$，$0\\le b,d \\le 60$，且结束时间一定晚于开始时间。", "locale": "zh-CN"}}}
{"pid": "P1426", "type": "P", "difficulty": 1, "samples": [["14 1", "n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟"], "title": "小鱼会有危险吗", "background": null, "description": "有一次，小鱼要从 A 处沿直线往右边游，小鱼第一秒可以游 $7$ 米，从第二秒开始每秒游的距离只有前一秒的 $98\\%$。有个极其邪恶的猎人在距离 A 处右边 $s$ 米的地方，安装了一个隐蔽的探测器，探测器左右 $x$ 米之内是探测范围。一旦小鱼进入探测器的范围，探测器就会在这一秒结束时把信号传递给那个猎人，猎人在一秒后就要对探测器范围内的水域进行抓捕，这时如果小鱼还在这范围内就危险了。也就是说小鱼一旦进入探测器范围，如果能在下 $1$ 秒的时间内马上游出探测器的范围，还是安全的。现在给出 $s$ 和 $x$ 的数据，请你判断小鱼会不会有危险？如果有危险输出 `y`，没有危险输出 `n`。", "inputFormat": "一行内输入两个实数，用空格分隔，表示 $s$ 和 $x$。", "outputFormat": "一行内输出 `y` 或者 `n` 表示小鱼是否会有危险。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq s,x\\le100$，小数点后最多有 $6$ 位小数。", "locale": "zh-CN", "translations": {"en": {"title": "Will the Little Fish Be in Danger?", "background": "", "description": "Once, a little fish started swimming to the right along a straight line from point $A$. In the first second, it can swim $7$ meters. Starting from the second second, the distance it swims each second is only $98\\%$ of the distance swum in the previous second. An extremely evil hunter has installed a concealed detector at a point $s$ meters to the right of $A$. The detector’s detection range extends $x$ meters to both the left and right. Once the little fish enters the detector’s range, the detector will transmit a signal to the hunter at the end of that second. One second later, the hunter will conduct a capture within the detector’s range. If the little fish is still within this range at that time, it will be in danger. In other words, once the little fish enters the detector’s range, it is still safe if it can swim out of the detector’s range within the next $1$ second. Now, given $s$ and $x$, please determine whether the little fish will be in danger. Output `y` if it is in danger, and `n` if it is not.", "inputFormat": "A single line containing two real numbers separated by a space, representing $s$ and $x$.", "outputFormat": "Output a single line containing `y` or `n` to indicate whether the little fish will be in danger.", "hint": "#### Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\leq s, x \\leq 100$, with at most $6$ digits after the decimal point.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小鱼会有危险吗", "background": null, "description": "有一次，小鱼要从 A 处沿直线往右边游，小鱼第一秒可以游 $7$ 米，从第二秒开始每秒游的距离只有前一秒的 $98\\%$。有个极其邪恶的猎人在距离 A 处右边 $s$ 米的地方，安装了一个隐蔽的探测器，探测器左右 $x$ 米之内是探测范围。一旦小鱼进入探测器的范围，探测器就会在这一秒结束时把信号传递给那个猎人，猎人在一秒后就要对探测器范围内的水域进行抓捕，这时如果小鱼还在这范围内就危险了。也就是说小鱼一旦进入探测器范围，如果能在下 $1$ 秒的时间内马上游出探测器的范围，还是安全的。现在给出 $s$ 和 $x$ 的数据，请你判断小鱼会不会有危险？如果有危险输出 `y`，没有危险输出 `n`。", "inputFormat": "一行内输入两个实数，用空格分隔，表示 $s$ 和 $x$。", "outputFormat": "一行内输出 `y` 或者 `n` 表示小鱼是否会有危险。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq s,x\\le100$，小数点后最多有 $6$ 位小数。", "locale": "zh-CN"}}}
{"pid": "P1427", "type": "P", "difficulty": 1, "samples": [["3 65 23 5 34 1 30 0", "30 1 34 5 23 65 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["栈"], "title": "小鱼的数字游戏", "background": "", "description": "小鱼最近被要求参加一个数字游戏，要求它把看到的一串数字 $a_i$（长度不一定，以 $0$ 结束），记住了然后反着念出来（表示结束的数字 $0$ 就不要念出来了）。这对小鱼的那点记忆力来说实在是太难了，你也不想想小鱼的整个脑袋才多大，其中一部分还是好吃的肉！所以请你帮小鱼编程解决这个问题。", "inputFormat": "一行内输入一串整数，以 $0$ 结束，以空格间隔。", "outputFormat": "一行内倒着输出这一串整数，以空格间隔。\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $0 \\leq a_i \\leq 2^{31} - 1$，数字个数不超过 $100$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Yu's Number Game", "background": "", "description": "Xiao Yu was recently asked to take part in a number game: it needs to remember a sequence of numbers $a_i$ (with arbitrary length, ending with $0$), then recite them in reverse order (do not recite the terminating $0$). This is really too hard for Xiao Yu's limited memory—you know, its whole head isn't that big, and part of it is delicious meat! So please help Xiao Yu by writing a program to solve this problem.", "inputFormat": "A single line containing a sequence of integers, ending with $0$, separated by spaces.", "outputFormat": "Output this sequence in reverse on a single line, separated by spaces.", "hint": "#### Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $0 \\leq a_i \\leq 2^{31} - 1$, and the number of integers does not exceed $100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小鱼的数字游戏", "background": "", "description": "小鱼最近被要求参加一个数字游戏，要求它把看到的一串数字 $a_i$（长度不一定，以 $0$ 结束），记住了然后反着念出来（表示结束的数字 $0$ 就不要念出来了）。这对小鱼的那点记忆力来说实在是太难了，你也不想想小鱼的整个脑袋才多大，其中一部分还是好吃的肉！所以请你帮小鱼编程解决这个问题。", "inputFormat": "一行内输入一串整数，以 $0$ 结束，以空格间隔。", "outputFormat": "一行内倒着输出这一串整数，以空格间隔。\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $0 \\leq a_i \\leq 2^{31} - 1$，数字个数不超过 $100$。", "locale": "zh-CN"}}}
{"pid": "P1428", "type": "P", "difficulty": 1, "samples": [["6\n4 3 0 5 1 2\n", "0 0 0 3 1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟"], "title": "小鱼比可爱", "background": "", "description": "人比人，气死人；鱼比鱼，难死鱼。小鱼最近参加了一个“比可爱”比赛，比的是每只鱼的可爱程度。参赛的鱼被从左到右排成一排，头都朝向左边，然后每只鱼会得到一个整数数值，表示这只鱼的可爱程度，很显然整数越大，表示这只鱼越可爱，而且任意两只鱼的可爱程度**可能一样**。由于所有的鱼头都朝向左边，所以每只鱼只能看见在它左边的鱼的可爱程度，它们心里都在计算，在自己的眼力范围内有多少只鱼不如自己可爱呢。请你帮这些可爱但是鱼脑不够用的小鱼们计算一下。\n", "inputFormat": "第一行输入一个正整数 $n$，表示鱼的数目。\n\n第二行内输入 $n$ 个正整数，用空格间隔，依次表示从左到右每只小鱼的可爱程度 $a_i$。\n", "outputFormat": "一行，输出 $n$ 个整数，用空格间隔，依次表示每只小鱼眼中有多少只鱼不如自己可爱。\n", "hint": "对于 $100\\%$ 的数据，$1 \\leq n\\leq 100$，$0 \\leq a_i \\leq 10$。", "locale": "zh-CN", "translations": {"en": {"title": "Little Fish Compare Cuteness", "background": "", "description": "Comparing people can drive you mad; comparing fish can be even harder on fish. A little fish recently entered a “cuteness contest,” where each fish is judged by its cuteness. The competing fish are arranged in a line from left to right, all facing left. Each fish is given an integer value that represents its cuteness. Clearly, the larger the integer, the cuter the fish, and the cuteness values of any two fish may be the same. Because all heads face left, each fish can see only the fish to its left. Each fish is mentally counting how many fish in its field of view are less cute than itself. Please help these cute but forgetful little fish compute this number.", "inputFormat": "The first line contains a positive integer $n$, the number of fish.\n\nThe second line contains $n$ non-negative integers, separated by spaces, representing from left to right the cuteness $a_i$ of each fish.", "outputFormat": "Output one line with $n$ integers, separated by spaces, representing from left to right, for each fish, how many fish to its left are less cute than itself.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\leq n \\leq 100$, $0 \\leq a_i \\leq 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小鱼比可爱", "background": "", "description": "人比人，气死人；鱼比鱼，难死鱼。小鱼最近参加了一个“比可爱”比赛，比的是每只鱼的可爱程度。参赛的鱼被从左到右排成一排，头都朝向左边，然后每只鱼会得到一个整数数值，表示这只鱼的可爱程度，很显然整数越大，表示这只鱼越可爱，而且任意两只鱼的可爱程度**可能一样**。由于所有的鱼头都朝向左边，所以每只鱼只能看见在它左边的鱼的可爱程度，它们心里都在计算，在自己的眼力范围内有多少只鱼不如自己可爱呢。请你帮这些可爱但是鱼脑不够用的小鱼们计算一下。\n", "inputFormat": "第一行输入一个正整数 $n$，表示鱼的数目。\n\n第二行内输入 $n$ 个正整数，用空格间隔，依次表示从左到右每只小鱼的可爱程度 $a_i$。\n", "outputFormat": "一行，输出 $n$ 个整数，用空格间隔，依次表示每只小鱼眼中有多少只鱼不如自己可爱。\n", "hint": "对于 $100\\%$ 的数据，$1 \\leq n\\leq 100$，$0 \\leq a_i \\leq 10$。", "locale": "zh-CN"}}}
{"pid": "P1429", "type": "P", "difficulty": 5, "samples": [["3\n1 1\n1 2\n2 2", "1.0000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["计算几何", "递归", "分治", "K-D Tree"], "title": "平面最近点对（加强版）", "background": "[P7883](/problem/P7883) 平面最近点对（加强加强版）", "description": "给定平面上 $n$ 个点，找出其中的一对点的距离，使得在这 $n$ 个点的所有点对中，该距离为所有点对中最小的。", "inputFormat": "第一行：$n$ ，保证 $2\\le n\\le 200000$ 。\n\n接下来 $n$ 行：每行两个整数：$x\\ y$ ，表示一个点的行坐标和列坐标，中间用一个空格隔开。", "outputFormat": "仅一行，一个实数，表示最短距离，精确到小数点后面 $4$ 位。", "hint": "数据保证 $0\\le x,y\\le 10^9$", "locale": "zh-CN", "translations": {"en": {"title": "Closest Pair of Points in the Plane (Enhanced Version)", "background": "[P7883](/problem/P7883) Closest Pair of Points in the Plane (Enhanced-Enhanced Version)", "description": "Given $n$ points in the plane, find the minimum distance among all pairs of points.", "inputFormat": "The first line contains $n$, with $2 \\le n \\le 200000$.\n\nEach of the next $n$ lines contains two integers $x$ and $y$, the $x$-coordinate and $y$-coordinate of a point, separated by a single space.", "outputFormat": "Output a single real number on one line: the shortest distance, rounded to $4$ decimal places.", "hint": "The testdata guarantees $0 \\le x, y \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "平面最近点对（加强版）", "background": "[P7883](/problem/P7883) 平面最近点对（加强加强版）", "description": "给定平面上 $n$ 个点，找出其中的一对点的距离，使得在这 $n$ 个点的所有点对中，该距离为所有点对中最小的。", "inputFormat": "第一行：$n$ ，保证 $2\\le n\\le 200000$ 。\n\n接下来 $n$ 行：每行两个整数：$x\\ y$ ，表示一个点的行坐标和列坐标，中间用一个空格隔开。", "outputFormat": "仅一行，一个实数，表示最短距离，精确到小数点后面 $4$ 位。", "hint": "数据保证 $0\\le x,y\\le 10^9$", "locale": "zh-CN"}}}
{"pid": "P1430", "type": "P", "difficulty": 4, "samples": [["2\r\n1 -1\r\n2 1 2", "-1\r\n3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "序列取数", "background": "", "description": "给定一个长为 $n$ 的整数序列 $(n \\le 1000)$，由 A 和 B 轮流取数（A 先取）。每个人可从序列的左端或右端取若干个数（至少一个），但不能两端都取。所有数都被取走后，两人分别统计所取数的和作为各自的得分。假设 A 和 B 都足够聪明，都使自己得分尽量高，求 A 的最终得分。", "inputFormat": "第一行，一个正整数 $T$，表示有 $T$ 组数据。（$T \\le 100$）\n\n接着 $T$ 行，每行第一个数为 $n$，接着 $n$ 个整数表示给定的序列。", "outputFormat": "输出T行，每行一个整数，表示 A 的得分。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Taking Numbers from a Sequence", "background": "", "description": "Given an integer sequence of length $n$ $(n \\le 1000)$, A and B take numbers in turns (A goes first). On each turn, a player may take one or more numbers from either the left end or the right end of the sequence, but not from both ends in the same turn. After all numbers have been taken, each player sums the numbers they took as their score. Assume A and B are both clever enough to play optimally and maximize their own score. Find A's final score.", "inputFormat": "The first line contains a positive integer $T$, indicating there are $T$ testcases $(T \\le 100)$.\nThen follow $T$ lines. In each line, the first number is $n$, followed by $n$ integers that form the given sequence.", "outputFormat": "Output $T$ lines, each containing one integer, which is A's score.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "序列取数", "background": "", "description": "给定一个长为 $n$ 的整数序列 $(n \\le 1000)$，由 A 和 B 轮流取数（A 先取）。每个人可从序列的左端或右端取若干个数（至少一个），但不能两端都取。所有数都被取走后，两人分别统计所取数的和作为各自的得分。假设 A 和 B 都足够聪明，都使自己得分尽量高，求 A 的最终得分。", "inputFormat": "第一行，一个正整数 $T$，表示有 $T$ 组数据。（$T \\le 100$）\n\n接着 $T$ 行，每行第一个数为 $n$，接着 $n$ 个整数表示给定的序列。", "outputFormat": "输出T行，每行一个整数，表示 A 的得分。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1431", "type": "P", "difficulty": 5, "samples": [["2\n1 1 6\n1 0 6", "2\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "找出伪币", "background": "", "description": "给你一个装有 $n$ 枚硬币的袋子。$n$ 枚硬币中有一个是伪造的，并且那个伪造的硬币和真的硬币重量不一样。你的任务是找出这枚伪造的硬币。\n\n为了帮助你完成这一任务，将提供一台可用来比较两组硬币重量的仪器，比如天平。利用这台仪器，可以知道两组硬币的重量是否相同。\n", "inputFormat": "第一行，一个正整数 $T$，表示有 $T$ 组数据。\n\n接着 $T$ 行，每行三个正整数 $k,p,n$。\n\n$p=-1$：伪币偏轻；$p=1$：伪币偏重；$p=0$：你不知道伪币与真币的重量对比关系。\n\n$n$ 为一个 $k$ 位十进制正整数（没有前导 $0$）。\n", "outputFormat": "输出 $T$ 行，每行一个整数 $m$，表示至少要称量 $m$ 次就一定能找出伪币。\n", "hint": "对于 $40\\%$ 的数据，$n\\leq 10^5$。\n\n对于 $100\\%$ 的数据，$k\\leq 10^4$，$3\\lt n\\lt 10^{10001}$，$1\\leq T\\leq 40$。\n\n当 $p=0$ 时，你还需要知道伪币与真币相比是轻是重\n", "locale": "zh-CN", "translations": {"en": {"title": "Find the Counterfeit Coin", "background": "", "description": "You are given a bag containing $n$ coins. Among the $n$ coins, exactly one is counterfeit, and its weight is different from that of a genuine coin. Your task is to find this counterfeit coin.\n\nTo help you, you are given a device that can compare the weights of two groups of coins, e.g., a balance scale. Using this device, you can tell whether the two groups have the same total weight.", "inputFormat": "The first line contains a positive integer $T$, the number of test cases.\n\nThen follow $T$ lines, each containing three positive integers $k,p,n$.\n\n$p=-1$: the counterfeit coin is lighter; $p=1$: the counterfeit coin is heavier; $p=0$: you do not know whether the counterfeit coin is lighter or heavier.\n\n$n$ is a $k$-digit positive decimal integer (with no leading $0$).", "outputFormat": "Output $T$ lines, each containing an integer $m$, the minimum number of weighings that guarantees finding the counterfeit coin.", "hint": "For $40\\%$ of the testdata, $n\\leq 10^5$.\n\nFor $100\\%$ of the testdata, $k\\leq 10^4$, $3\\lt n\\lt 10^{10001}$, $1\\leq T\\leq 40$.\n\nWhen $p=0$, you also need to determine whether the counterfeit coin is lighter or heavier than a genuine one.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "找出伪币", "background": "", "description": "给你一个装有 $n$ 枚硬币的袋子。$n$ 枚硬币中有一个是伪造的，并且那个伪造的硬币和真的硬币重量不一样。你的任务是找出这枚伪造的硬币。\n\n为了帮助你完成这一任务，将提供一台可用来比较两组硬币重量的仪器，比如天平。利用这台仪器，可以知道两组硬币的重量是否相同。\n", "inputFormat": "第一行，一个正整数 $T$，表示有 $T$ 组数据。\n\n接着 $T$ 行，每行三个正整数 $k,p,n$。\n\n$p=-1$：伪币偏轻；$p=1$：伪币偏重；$p=0$：你不知道伪币与真币的重量对比关系。\n\n$n$ 为一个 $k$ 位十进制正整数（没有前导 $0$）。\n", "outputFormat": "输出 $T$ 行，每行一个整数 $m$，表示至少要称量 $m$ 次就一定能找出伪币。\n", "hint": "对于 $40\\%$ 的数据，$n\\leq 10^5$。\n\n对于 $100\\%$ 的数据，$k\\leq 10^4$，$3\\lt n\\lt 10^{10001}$，$1\\leq T\\leq 40$。\n\n当 $p=0$ 时，你还需要知道伪币与真币相比是轻是重\n", "locale": "zh-CN"}}}
{"pid": "P1432", "type": "P", "difficulty": 4, "samples": [["2\n3 5 4 \n5 7 3 \n", "6 2 5 3 5 2 5 \n6 1 6 1 6 4 6 \n"], ["1\n26 29 11\n", "22 1 6 1 6 4 6 1 6 4 6 1 6 4 6 1 6 4 6 1 6 4 6 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "Special Judge", "O2优化"], "title": "倒水问题", "background": "**输入输出已更改，请不要直接提交原先的代码。**", "description": "假定两个水壶 $A$ 和 $B$，供水量不限。可以使用三种方法装水：\n\n- 给一个水壶装水；\n- 把一个水壶倒空；\n- 从一个水壶倒进另一个水壶。\n\n当从一个水壶倒进另一个水壶时，如果第一个水壶倒空，或者第二个水壶装满就不能再倒了。例如，一个水壶 $A$ 是 $5$ 加仑和另一个水壶 $B$ 是 $6$ 加仑，水量是 $8$ 加仑，则从水壶 $A$ 倒进水壶 $B$ 时，让水壶 $B$ 充满水而水壶 $A$ 剩 $3$ 加仑水。\n\n问题有 $3$ 个参数：$C_a$，$C_b$ 和 $N$，分别表示水壶 $A$ 和 $B$ 的容量，目标水量 $N$。问题的目标是，给出一系列倒水的步骤，使水壶 $B$ 中的水量恰好是 $N$。\n\n如果有多种操作方案，请给出操作次数最少的任意一种方案。", "inputFormat": "第一行为数据组数 $T$。\n\n接下来的 $T$ 行，每行三个数字 $C_a$，$C_b$ 和 $N$，意义如题目所示。\n\n$T$ 不超过 $30$，$0<C_a\\le C_b$，$N\\le C_b\\le 1000$，且 $C_a$ 和 $C_b$ 互质。", "outputFormat": "输出共为 $T$ 行，第一个数字为要达成的完成次数 $a_i$（题目保证存在解）。\n\n接下来 $a_i$ 个数字，表示各种操作：\n- 1 操作：`fill A` 意为给 $A$ 灌满水\n- 2 操作：`fill B` \n- 3 操作：`empty A` 意为将 $A$ 中水倒空\n- 4 操作：`empty B`\n- 5 操作：`pour B A` 意为将 $B$ 中水倒到 $A$ 中（直到 $A$ 满或者 $B$ 中水没有剩余）\n- 6 操作：`pour A B`", "hint": "开启了 spj。\n\n如果你的方案比答案优，会提示 UKE，此时请联系管理员修改数据。\n\n如果你的方案比答案差，分数会相应减损。", "locale": "zh-CN", "translations": {"en": {"title": "Water Pouring Problem", "background": "The input and output have been changed. Please do not directly submit your previous code.", "description": "Assume two jugs $A$ and $B$, with unlimited water supply. You can use three kinds of operations:\n- Fill a jug.\n- Empty a jug.\n- Pour water from one jug into the other.\n\nWhen pouring from one jug into the other, you must stop when either the first jug becomes empty or the second jug becomes full. For example, if jug $A$ has capacity $5$ gallons and jug $B$ has capacity $6$ gallons, and the amount of water is $8$ gallons, then when pouring from jug $A$ into jug $B$, jug $B$ becomes full and jug $A$ has $3$ gallons left.\n\nThe problem has $3$ parameters: $C_a$, $C_b$, and $N$, which are the capacities of jugs $A$ and $B$ and the target amount $N$, respectively. The goal is to output a sequence of pouring steps so that the amount of water in jug $B$ is exactly $N$.\n\nIf there are multiple valid sequences, output any one with the minimum number of operations.", "inputFormat": "The first line contains the number of test cases $T$.\n\nThe next $T$ lines each contain three numbers $C_a$, $C_b$, and $N$, as described above.\n\nConstraints: $T \\le 30$, $0 < C_a \\le C_b$, $N \\le C_b \\le 1000$, and $C_a$ and $C_b$ are coprime.", "outputFormat": "Print $T$ lines. For each test case, first output the number of operations $a_i$ (a solution is guaranteed to exist). Then output $a_i$ integers, each representing an operation:\n- Operation 1: `fill A` means fill $A$ to full.\n- Operation 2: `fill B`.\n- Operation 3: `empty A` means empty $A$.\n- Operation 4: `empty B`.\n- Operation 5: `pour B A` means pour from $B$ into $A$ (until $A$ is full or $B$ is empty).\n- Operation 6: `pour A B`.", "hint": "SPJ is enabled.\n\nIf your sequence is better than the official answer, it will show UKE. In this case, please contact an administrator to update the testdata.\n\nIf your sequence is worse than the official answer, your score will be reduced accordingly.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "倒水问题", "background": "**输入输出已更改，请不要直接提交原先的代码。**", "description": "假定两个水壶 $A$ 和 $B$，供水量不限。可以使用三种方法装水：\n\n- 给一个水壶装水；\n- 把一个水壶倒空；\n- 从一个水壶倒进另一个水壶。\n\n当从一个水壶倒进另一个水壶时，如果第一个水壶倒空，或者第二个水壶装满就不能再倒了。例如，一个水壶 $A$ 是 $5$ 加仑和另一个水壶 $B$ 是 $6$ 加仑，水量是 $8$ 加仑，则从水壶 $A$ 倒进水壶 $B$ 时，让水壶 $B$ 充满水而水壶 $A$ 剩 $3$ 加仑水。\n\n问题有 $3$ 个参数：$C_a$，$C_b$ 和 $N$，分别表示水壶 $A$ 和 $B$ 的容量，目标水量 $N$。问题的目标是，给出一系列倒水的步骤，使水壶 $B$ 中的水量恰好是 $N$。\n\n如果有多种操作方案，请给出操作次数最少的任意一种方案。", "inputFormat": "第一行为数据组数 $T$。\n\n接下来的 $T$ 行，每行三个数字 $C_a$，$C_b$ 和 $N$，意义如题目所示。\n\n$T$ 不超过 $30$，$0<C_a\\le C_b$，$N\\le C_b\\le 1000$，且 $C_a$ 和 $C_b$ 互质。", "outputFormat": "输出共为 $T$ 行，第一个数字为要达成的完成次数 $a_i$（题目保证存在解）。\n\n接下来 $a_i$ 个数字，表示各种操作：\n- 1 操作：`fill A` 意为给 $A$ 灌满水\n- 2 操作：`fill B` \n- 3 操作：`empty A` 意为将 $A$ 中水倒空\n- 4 操作：`empty B`\n- 5 操作：`pour B A` 意为将 $B$ 中水倒到 $A$ 中（直到 $A$ 满或者 $B$ 中水没有剩余）\n- 6 操作：`pour A B`", "hint": "开启了 spj。\n\n如果你的方案比答案优，会提示 UKE，此时请联系管理员修改数据。\n\n如果你的方案比答案差，分数会相应减损。", "locale": "zh-CN"}}}
{"pid": "P1433", "type": "P", "difficulty": 4, "samples": [["4\n1 1\n1 -1\n-1 1\n-1 -1", "7.41"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "搜索", "深度优先搜索 DFS", "剪枝", "记忆化搜索", "状压 DP"], "title": "吃奶酪", "background": "", "description": "房间里放着 $n$ 块奶酪。一只小老鼠要把它们都吃掉，问至少要跑多少距离？老鼠一开始在 $(0,0)$ 点处。\n", "inputFormat": "第一行有一个整数，表示奶酪的数量 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行两个实数，第 $(i + 1)$ 行的实数分别表示第 $i$ 块奶酪的横纵坐标 $x_i, y_i$。", "outputFormat": "输出一行一个实数，表示要跑的最少距离，保留 $2$ 位小数。\n", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1\\leq n\\leq 15$，$|x_i|, |y_i| \\leq 200$，小数点后最多有 $3$ 位数字。\n\n#### 提示\n\n对于两个点 $(x_1,y_1)$，$(x_2, y_2)$，两点之间的距离公式为 $\\sqrt{(x_1-x_2)^2+(y_1-y_2)^2}$。\n\n---\n\n$2022.7.13$：新增加一组 $\\text{Hack}$ 数据。", "locale": "zh-CN", "translations": {"en": {"title": "Eating Cheese", "background": "", "description": "There are $n$ pieces of cheese in a room. A little mouse wants to eat them all. What is the minimum distance it must run? The mouse starts at point $(0, 0)$.", "inputFormat": "The first line contains an integer $n$, the number of pieces of cheese.\n\nLines $2$ to $(n + 1)$ each contain two real numbers. The real numbers on the $(i + 1)$-th line represent the coordinates $x_i, y_i$ of the $i$-th piece of cheese.", "outputFormat": "Output a single real number: the minimum distance required, with $2$ decimal places.", "hint": "- Constraints\n\nFor all test points, it is guaranteed that $1 \\leq n \\leq 15$, $|x_i|, |y_i| \\leq 200$, and there are at most $3$ digits after the decimal point.\n\n- Hint\n\nFor two points $(x_1, y_1)$ and $(x_2, y_2)$, the distance formula is $\\sqrt{(x_1 - x_2)^2 + (y_1 - y_2)^2}$.\n\n---\n\n$2022.7.13$: A new set of $\\text{Hack}$ testdata has been added.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "吃奶酪", "background": "", "description": "房间里放着 $n$ 块奶酪。一只小老鼠要把它们都吃掉，问至少要跑多少距离？老鼠一开始在 $(0,0)$ 点处。\n", "inputFormat": "第一行有一个整数，表示奶酪的数量 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行两个实数，第 $(i + 1)$ 行的实数分别表示第 $i$ 块奶酪的横纵坐标 $x_i, y_i$。", "outputFormat": "输出一行一个实数，表示要跑的最少距离，保留 $2$ 位小数。\n", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1\\leq n\\leq 15$，$|x_i|, |y_i| \\leq 200$，小数点后最多有 $3$ 位数字。\n\n#### 提示\n\n对于两个点 $(x_1,y_1)$，$(x_2, y_2)$，两点之间的距离公式为 $\\sqrt{(x_1-x_2)^2+(y_1-y_2)^2}$。\n\n---\n\n$2022.7.13$：新增加一组 $\\text{Hack}$ 数据。", "locale": "zh-CN"}}}
{"pid": "P1434", "type": "P", "difficulty": 3, "samples": [["5 5\n1 2 3 4 5\n16 17 18 19 6\n15 24 25 20 7\n14 23 22 21 8\n13 12 11 10 9\n", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "2002", "各省省选", "递归", "上海", "记忆化搜索"], "title": "[SHOI2002] 滑雪", "background": null, "description": "Michael 喜欢滑雪。这并不奇怪，因为滑雪的确很刺激。可是为了获得速度，滑的区域必须向下倾斜，而且当你滑到坡底，你不得不再次走上坡或者等待升降机来载你。Michael 想知道在一个区域中最长的滑坡。区域由一个二维数组给出。数组的每个数字代表点的高度。下面是一个例子：\n```plain\n1   2   3   4   5\n16  17  18  19  6\n15  24  25  20  7\n14  23  22  21  8\n13  12  11  10  9\n```\n一个人可以从某个点滑向上下左右相邻四个点之一，当且仅当高度会减小。在上面的例子中，一条可行的滑坡为 $24-17-16-1$（从 $24$ 开始，在 $1$ 结束）。当然    $25$－$24$－$23$－$\\ldots$－$3$－$2$－$1$ 更长。事实上，这是最长的一条。", "inputFormat": "输入的第一行为表示区域的二维数组的行数 $R$ 和列数 $C$。下面是 $R$ 行，每行有 $C$ 个数，代表高度（两个数字之间用 $1$ 个空格间隔）。", "outputFormat": "输出区域中最长滑坡的长度。", "hint": "对于 $100\\%$ 的数据，$1\\leq R,C\\leq 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2002] Skiing", "background": "", "description": "Michael likes skiing. This is not surprising, because skiing is really exciting. But to gain speed, the area must slope downward, and when you reach the bottom of the slope, you have to walk back up or wait for a lift to take you. Michael wants to know the longest downhill run in an area. The area is given by a 2D array. Each number represents the elevation of a point. Here is an example:\n```plain\n1   2   3   4   5\n16  17  18  19  6\n15  24  25  20  7\n14  23  22  21  8\n13  12  11  10  9\n```\nA person can move from a point to one of its four adjacent points (up, down, left, or right) if and only if the elevation decreases. In the example above, one possible run is $24-17-16-1$ (starting at $24$ and ending at $1$). Of course, $25-24-23-\\ldots-3-2-1$ is longer. In fact, it is the longest one.", "inputFormat": "The first line contains the number of rows $R$ and columns $C$ of the 2D array representing the area. The next $R$ lines each contain $C$ numbers, representing elevations (two numbers are separated by 1 space).", "outputFormat": "Output the length of the longest downhill run in the area.", "hint": "For $100\\%$ of the testdata, $1 \\le R, C \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2002] 滑雪", "background": null, "description": "Michael 喜欢滑雪。这并不奇怪，因为滑雪的确很刺激。可是为了获得速度，滑的区域必须向下倾斜，而且当你滑到坡底，你不得不再次走上坡或者等待升降机来载你。Michael 想知道在一个区域中最长的滑坡。区域由一个二维数组给出。数组的每个数字代表点的高度。下面是一个例子：\n```plain\n1   2   3   4   5\n16  17  18  19  6\n15  24  25  20  7\n14  23  22  21  8\n13  12  11  10  9\n```\n一个人可以从某个点滑向上下左右相邻四个点之一，当且仅当高度会减小。在上面的例子中，一条可行的滑坡为 $24-17-16-1$（从 $24$ 开始，在 $1$ 结束）。当然    $25$－$24$－$23$－$\\ldots$－$3$－$2$－$1$ 更长。事实上，这是最长的一条。", "inputFormat": "输入的第一行为表示区域的二维数组的行数 $R$ 和列数 $C$。下面是 $R$ 行，每行有 $C$ 个数，代表高度（两个数字之间用 $1$ 个空格间隔）。", "outputFormat": "输出区域中最长滑坡的长度。", "hint": "对于 $100\\%$ 的数据，$1\\leq R,C\\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P1435", "type": "P", "difficulty": 3, "samples": [["Ab3bd", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2000", "IOI", "区间 DP"], "title": "[IOI 2000] 回文字串", "background": "IOI2000 第一题\n", "description": "回文词是一种对称的字符串。任意给定一个字符串，通过插入若干字符，都可以变成回文词。此题的任务是，求出将给定字符串变成回文词所需要插入的最少字符数。\n\n比如 $\\verb!Ab3bd!$ 插入 $2$ 个字符后可以变成回文词 $\\verb!dAb3bAd!$ 或 $\\verb!Adb3bdA!$，但是插入少于 $2$ 个的字符无法变成回文词。\n\n**注意**：此问题区分大小写。\n", "inputFormat": "输入共一行，一个字符串。", "outputFormat": "有且只有一个整数，即最少插入字符数。\n", "hint": "### 数据范围及约定\n\n记字符串长度为 $l$。\n\n对于全部数据，$0<l\\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2000] Palindromic String", "background": "IOI 2000 Problem 1.", "description": "A palindrome is a symmetric string. For any given string, by inserting some characters, it can be turned into a palindrome. The task is to find the minimum number of characters that need to be inserted to make the given string a palindrome.\n\nFor example, $\\verb!Ab3bd!$ can become a palindrome after inserting $2$ characters, such as $\\verb!dAb3bAd!$ or $\\verb!Adb3bdA!$, but it cannot become a palindrome with fewer than $2$ insertions.\n\nNote: This problem is case-sensitive.", "inputFormat": "The input consists of one line containing a string.", "outputFormat": "Output a single integer: the minimum number of inserted characters.", "hint": "### Constraints\n\nLet the length of the string be $l$.\n\nFor all testdata, $0 < l \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2000] 回文字串", "background": "IOI2000 第一题\n", "description": "回文词是一种对称的字符串。任意给定一个字符串，通过插入若干字符，都可以变成回文词。此题的任务是，求出将给定字符串变成回文词所需要插入的最少字符数。\n\n比如 $\\verb!Ab3bd!$ 插入 $2$ 个字符后可以变成回文词 $\\verb!dAb3bAd!$ 或 $\\verb!Adb3bdA!$，但是插入少于 $2$ 个的字符无法变成回文词。\n\n**注意**：此问题区分大小写。\n", "inputFormat": "输入共一行，一个字符串。", "outputFormat": "有且只有一个整数，即最少插入字符数。\n", "hint": "### 数据范围及约定\n\n记字符串长度为 $l$。\n\n对于全部数据，$0<l\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P1436", "type": "P", "difficulty": 4, "samples": [["3\r\n1 1 1 1 1 1 1 3\r\n1 1 1 1 1 1 1 1\r\n1 1 1 1 1 1 1 1\r\n1 1 1 1 1 1 1 1\r\n1 1 1 1 1 1 1 1\r\n1 1 1 1 1 1 1 1\r\n1 1 1 1 1 1 1 0\r\n1 1 1 1 1 1 0 3", "1460"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "棋盘分割", "background": "", "description": "将一个 $8\\times 8$ 的棋盘进行如下分割：将原棋盘割下一块矩形棋盘并使剩下部分也是矩形，再将剩下的两部分中的任意一块继续如此分割，这样割了 $(n-1)$ 次后，连同最后剩下的矩形棋盘共有 $n$ 块矩形棋盘。（每次切割都只能沿着棋盘格子的边进行）。\n \n![](https://cdn.luogu.com.cn/upload/image_hosting/rxnb404s.png)\n\n原棋盘上每一格有一个分值，一块矩形棋盘的总分为其所含各格分值之和。现在需要把棋盘按上述规则分割成 $n$ 块矩形棋盘，并使各矩形棋盘总分的平方和最小。\n\n请编程对给出的棋盘及 $n$，求出平方和的最小值。", "inputFormat": "第一行为一个整数 $n\\ (1<n \\le 15)$。\n\n第二行至第九行每行为 $8$ 个小于 $100$ 的非负整数，表示棋盘上相应格子的分值。每行相邻两数之间用一个空格分隔。", "outputFormat": "仅一个数，为平方和。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Chessboard Partition", "background": "", "description": "Partition an $8\\times 8$ chessboard as follows: cut off a rectangular subboard from the original chessboard so that the remaining part is also a rectangle; then pick either of the two remaining parts and continue to partition it in the same way. After doing this $(n-1)$ times, together with the final remaining rectangle, there are $n$ rectangular boards. (Each cut may only follow the edges of the grid cells.)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rxnb404s.png)\n\nEach cell on the original chessboard has a score. The total score of a rectangular board is the sum of the scores of its cells. Partition the chessboard into $n$ rectangles according to the rule above so that the sum of squares of the rectangles’ total scores is minimized.\n\nGiven the chessboard and $n$, write a program to compute the minimum possible sum of squares.", "inputFormat": "The first line contains an integer $n\\ (1<n \\le 15)$.\n\nLines two through nine each contain $8$ non-negative integers less than $100$, representing the scores of the corresponding cells on the chessboard. Adjacent numbers in the same line are separated by a single space.", "outputFormat": "Output a single number: the minimum sum of squares.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "棋盘分割", "background": "", "description": "将一个 $8\\times 8$ 的棋盘进行如下分割：将原棋盘割下一块矩形棋盘并使剩下部分也是矩形，再将剩下的两部分中的任意一块继续如此分割，这样割了 $(n-1)$ 次后，连同最后剩下的矩形棋盘共有 $n$ 块矩形棋盘。（每次切割都只能沿着棋盘格子的边进行）。\n \n![](https://cdn.luogu.com.cn/upload/image_hosting/rxnb404s.png)\n\n原棋盘上每一格有一个分值，一块矩形棋盘的总分为其所含各格分值之和。现在需要把棋盘按上述规则分割成 $n$ 块矩形棋盘，并使各矩形棋盘总分的平方和最小。\n\n请编程对给出的棋盘及 $n$，求出平方和的最小值。", "inputFormat": "第一行为一个整数 $n\\ (1<n \\le 15)$。\n\n第二行至第九行每行为 $8$ 个小于 $100$ 的非负整数，表示棋盘上相应格子的分值。每行相邻两数之间用一个空格分隔。", "outputFormat": "仅一个数，为平方和。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1437", "type": "P", "difficulty": 5, "samples": [["4 5\n2 2 3 4\n8 2 7\n2 3\n49", "19"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2004", "各省省选", "湖南", "前缀和"], "title": "[HNOI2004] 敲砖块", "background": null, "description": "在一个凹槽中放置了 $n$ 层砖块、最上面的一层有 $n$ 块砖，从上到下每层依次减少一块砖。每块砖都有一个分值，敲掉这块砖就能得到相应的分值，如下图所示：\n\n```cpp\n14 15  4  3  23\n 33  33 76  2\n   2   13 11\n     22 23\n       31\n```\n如果你想敲掉第 $i$ 层的第 $j$ 块砖的话，若 $i=1$，你可以直接敲掉它；若 $i>1$，则你必须先敲掉第 $i-1$ 层的第 $j$ 和第 $j+1$ 块砖。\n\n你现在可以敲掉最多 $m$ 块砖，求得分最多能有多少。", "inputFormat": "输入文件的第一行为两个正整数 $n$ 和 $m$；接下来 $n$ 行，描述这 $n$ 层砖块上的分值 $a_{i,j}$，满足 $0\\leq a_{i,j}\\leq 100$。\n\n对于 $100\\%$ 的数据，满足 $1\\leq n\\leq 50$，$1\\leq m\\leq \\frac{n\\times(n+1)}{2}$；", "outputFormat": "输出文件仅一行为一个正整数，表示被敲掉砖块的最大价值总和。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2004] Knocking Bricks", "background": "", "description": "In a trough, there are $n$ layers of bricks. The top layer has $n$ bricks, and each lower layer has one fewer brick. Each brick has a score; knocking out a brick yields its score, as shown below:\n\n```cpp\n14 15  4  3  23\n 33  33 76  2\n   2   13 11\n     22 23\n       31\n```\n\nIf you want to knock out the $j$-th brick in the $i$-th layer, then if $i=1$, you can knock it out directly; if $i>1$, you must first knock out the $j$-th and the $(j+1)$-th bricks in layer $i-1$.\n\nYou may knock out at most $m$ bricks. Find the maximum total score you can obtain.", "inputFormat": "The first line contains two positive integers $n$ and $m$; then $n$ lines follow, describing the scores $a_{i,j}$ on these $n$ layers, where $0 \\leq a_{i,j} \\leq 100$.\n\nFor $100\\%$ of the testdata, it holds that $1 \\leq n \\leq 50$, $1 \\leq m \\leq \\frac{n \\times (n+1)}{2}$.", "outputFormat": "Output a single line containing one positive integer, the maximum total value of the knocked-out bricks.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2004] 敲砖块", "background": null, "description": "在一个凹槽中放置了 $n$ 层砖块、最上面的一层有 $n$ 块砖，从上到下每层依次减少一块砖。每块砖都有一个分值，敲掉这块砖就能得到相应的分值，如下图所示：\n\n```cpp\n14 15  4  3  23\n 33  33 76  2\n   2   13 11\n     22 23\n       31\n```\n如果你想敲掉第 $i$ 层的第 $j$ 块砖的话，若 $i=1$，你可以直接敲掉它；若 $i>1$，则你必须先敲掉第 $i-1$ 层的第 $j$ 和第 $j+1$ 块砖。\n\n你现在可以敲掉最多 $m$ 块砖，求得分最多能有多少。", "inputFormat": "输入文件的第一行为两个正整数 $n$ 和 $m$；接下来 $n$ 行，描述这 $n$ 层砖块上的分值 $a_{i,j}$，满足 $0\\leq a_{i,j}\\leq 100$。\n\n对于 $100\\%$ 的数据，满足 $1\\leq n\\leq 50$，$1\\leq m\\leq \\frac{n\\times(n+1)}{2}$；", "outputFormat": "输出文件仅一行为一个正整数，表示被敲掉砖块的最大价值总和。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1438", "type": "P", "difficulty": 4, "samples": [["5 2\n1 2 3 4 5\n1 2 4 1 2\n2 3\n", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "树状数组", "递归", "洛谷原创", "差分"], "title": "无聊的数列", "background": "无聊的 YYB 总喜欢搞出一些正常人无法搞出的东西。有一天，无聊的 YYB 想出了一道无聊的题：无聊的数列。。。", "description": "维护一个数列 $a_i$，支持两种操作：\n\n - `1 l r K D`：给出一个长度等于 $r-l+1$ 的等差数列，首项为 $K$，公差为 $D$，并将它对应加到 $[l,r]$ 范围中的每一个数上。即：令 $a_l=a_l+K,a_{l+1}=a_{l+1}+K+D\\ldots a_r=a_r+K+(r-l) \\times D$。\n\n - `2 p`：询问序列的第 $p$ 个数的值 $a_p$。", "inputFormat": "第一行两个整数 $n,m$ 表示数列长度和操作个数。\n\n第二行 $n$ 个整数，第 $i$ 个数表示 $a_i$。\n\n接下来的 $m$ 行，每行先输入一个整数 $opt$。\n\n若 $opt=1$ 则再输入四个整数 $l\\ r\\ K\\ D$；\n\n若 $opt=2$ 则再输入一个整数 $p$。", "outputFormat": "对于每个询问，一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 数据，$0\\le n,m \\le 10^5,-200\\le a_i,K,D\\le 200, 1 \\leq l \\leq r \\leq n, 1 \\leq p \\leq n$。", "locale": "zh-CN", "translations": {"en": {"title": "Boring Sequence", "background": "The bored YYB always comes up with things that normal people would not. One day, the bored YYB came up with a boring problem: a boring sequence.", "description": "Maintain a sequence $a_i$ supporting two operations:\n\n- `1 l r K D`: You are given an arithmetic progression of length $r - l + 1$ with first term $K$ and common difference $D$, and you add it correspondingly to each number in the range $[l, r]$. Specifically: let $a_l=a_l+K,a_{l+1}=a_{l+1}+K+D\\ldots a_r=a_r+K+(r-l) \\times D$.\n\n- `2 p`: Query the value of the $p$-th element $a_p$.", "inputFormat": "The first line contains two integers $n, m$ denoting the length of the sequence and the number of operations.\n\nThe second line contains $n$ integers, where the $i$-th number is $a_i$.\n\nEach of the next $m$ lines starts with an integer $opt$.\n\nIf $opt = 1$, then four more integers $l\\ r\\ K\\ D$ follow.\n\nIf $opt = 2$, then one more integer $p$ follows.", "outputFormat": "For each query, output one integer per line representing the answer.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $0\\le n,m \\le 10^5,-200\\le a_i,K,D\\le 200, 1 \\leq l \\leq r \\leq n, 1 \\leq p \\leq n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "无聊的数列", "background": "无聊的 YYB 总喜欢搞出一些正常人无法搞出的东西。有一天，无聊的 YYB 想出了一道无聊的题：无聊的数列。。。", "description": "维护一个数列 $a_i$，支持两种操作：\n\n - `1 l r K D`：给出一个长度等于 $r-l+1$ 的等差数列，首项为 $K$，公差为 $D$，并将它对应加到 $[l,r]$ 范围中的每一个数上。即：令 $a_l=a_l+K,a_{l+1}=a_{l+1}+K+D\\ldots a_r=a_r+K+(r-l) \\times D$。\n\n - `2 p`：询问序列的第 $p$ 个数的值 $a_p$。", "inputFormat": "第一行两个整数 $n,m$ 表示数列长度和操作个数。\n\n第二行 $n$ 个整数，第 $i$ 个数表示 $a_i$。\n\n接下来的 $m$ 行，每行先输入一个整数 $opt$。\n\n若 $opt=1$ 则再输入四个整数 $l\\ r\\ K\\ D$；\n\n若 $opt=2$ 则再输入一个整数 $p$。", "outputFormat": "对于每个询问，一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 数据，$0\\le n,m \\le 10^5,-200\\le a_i,K,D\\le 200, 1 \\leq l \\leq r \\leq n, 1 \\leq p \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P1439", "type": "P", "difficulty": 4, "samples": [["5 \n3 2 1 4 5\n1 2 3 4 5\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "二分", "树状数组"], "title": "两个排列的最长公共子序列", "background": null, "description": "给出 $1,2,\\ldots,n$ 的两个排列 $P_1$ 和 $P_2$ ，求它们的最长公共子序列。", "inputFormat": "第一行是一个数 $n$。\n\n接下来两行，每行为 $n$ 个数，为自然数 $1,2,\\ldots,n$ 的一个排列。", "outputFormat": "一个数，即最长公共子序列的长度。", "hint": "- 对于 $50\\%$ 的数据， $n \\le 10^3$；\n- 对于 $100\\%$ 的数据， $n \\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Longest Common Subsequence of Two Permutations", "background": "", "description": "Given two permutations $P_1$ and $P_2$ of $1,2,\\ldots,n$, find their longest common subsequence.", "inputFormat": "The first line contains an integer $n$.\nEach of the next two lines contains $n$ integers forming a permutation of $1,2,\\ldots,n$.", "outputFormat": "A single integer, the length of the longest common subsequence.", "hint": "- For $50\\%$ of the testdata, $n \\le 10^3$.\n- For $100\\%$ of the testdata, $n \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "两个排列的最长公共子序列", "background": null, "description": "给出 $1,2,\\ldots,n$ 的两个排列 $P_1$ 和 $P_2$ ，求它们的最长公共子序列。", "inputFormat": "第一行是一个数 $n$。\n\n接下来两行，每行为 $n$ 个数，为自然数 $1,2,\\ldots,n$ 的一个排列。", "outputFormat": "一个数，即最长公共子序列的长度。", "hint": "- 对于 $50\\%$ 的数据， $n \\le 10^3$；\n- 对于 $100\\%$ 的数据， $n \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1440", "type": "P", "difficulty": 3, "samples": [["6 2\n7 8 1 4 3 2\n", "0\n7\n7\n1\n1\n3 \n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "单调队列", "队列", "ST 表"], "title": "求m区间内的最小值", "background": "", "description": "一个含有 $n$ 项的数列，求出每一项前的 $m$ 个数到它这个区间内的最小值。若前面的数不足 $m$ 项则从第 $1$ 个数开始，若前面没有数则输出 $0$。", "inputFormat": "第一行两个整数，分别表示 $n$，$m$。\n\n第二行，$n$ 个正整数，为所给定的数列 $a_i$。", "outputFormat": "$n$ 行，每行一个整数，第 $i$ 个数为序列中 $a_i$ 之前 $m$ 个数的最小值。", "hint": "对于 $100\\%$ 的数据，保证 $1\\le m\\le n\\le2\\times10^6$，$1\\le a_i\\le3\\times10^7$。", "locale": "zh-CN", "translations": {"en": {"title": "Minimum in the Previous m Elements", "background": "", "description": "Given a sequence with $n$ terms, for each term, find the minimum within the interval consisting of the previous $m$ numbers before it. If there are fewer than $m$ previous numbers, start from the first number. If there are no previous numbers, output $0$.", "inputFormat": "The first line contains two integers $n$, $m$.\n\nThe second line contains $n$ positive integers, which form the given sequence $a_i$.", "outputFormat": "Output $n$ lines, one integer per line. The $i$-th number is the minimum among the $m$ numbers before $a_i$ in the sequence.", "hint": "For $100\\%$ of the testdata, it is guaranteed that $1 \\le m \\le n \\le 2\\times 10^6$, $1 \\le a_i \\le 3\\times 10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "求m区间内的最小值", "background": "", "description": "一个含有 $n$ 项的数列，求出每一项前的 $m$ 个数到它这个区间内的最小值。若前面的数不足 $m$ 项则从第 $1$ 个数开始，若前面没有数则输出 $0$。", "inputFormat": "第一行两个整数，分别表示 $n$，$m$。\n\n第二行，$n$ 个正整数，为所给定的数列 $a_i$。", "outputFormat": "$n$ 行，每行一个整数，第 $i$ 个数为序列中 $a_i$ 之前 $m$ 个数的最小值。", "hint": "对于 $100\\%$ 的数据，保证 $1\\le m\\le n\\le2\\times10^6$，$1\\le a_i\\le3\\times10^7$。", "locale": "zh-CN"}}}
{"pid": "P1441", "type": "P", "difficulty": 4, "samples": [["3 1\n1 2 2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "福建省历届夏令营"], "title": "砝码称重", "background": "", "description": "现有 $n$ 个砝码，重量分别为 $a_i$，在去掉 $m$ 个砝码后，问最多能称量出多少不同的重量（不包括 $0$）。\n\n请注意，砝码只能放在其中一边。", "inputFormat": "第 $1$ 行为有两个整数 $n$ 和 $m$，用空格分隔。\n\n第 $2$ 行有 $n$ 个正整数 $a_1, a_2, a_3,\\ldots , a_n$，表示每个砝码的重量。\n", "outputFormat": "仅包括 $1$ 个整数，为最多能称量出的重量数量。\n", "hint": "【样例说明】\n\n在去掉一个重量为 $2$ 的砝码后，能称量出 $1, 2, 3$ 共 $3$ 种重量。\n\n\n【数据规模】\n\n对于 $20\\%$ 的数据，$m=0$。\n\n对于 $50\\%$ 的数据，$m\\leq 1$。\n\n对于 $50\\%$ 的数据，$n\\leq 10$。\n\n对于 $100\\%$ 的数据，$n\\leq 20$， $m\\leq 4$，$m < n$，$a_i\\leq 100$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Weighing with Weights", "background": "", "description": "There are $n$ weights with masses $a_i$. After removing exactly $m$ weights, ask for the maximum number of different measurable weights (excluding $0$).\n\nNote that weights can only be placed on one side of the balance.", "inputFormat": "The first line contains two integers $n$ and $m$, separated by a space.\n\nThe second line contains $n$ positive integers $a_1, a_2, a_3, \\ldots, a_n$, representing each weight’s mass.", "outputFormat": "Output a single integer: the maximum number of different measurable weights.", "hint": "[Sample Explanation]\n\nAfter removing one weight of $2$, you can measure $1, 2, 3$, for a total of $3$ distinct weights.\n\n[Constraints]\n\n- For $20\\%$ of the testdata, $m = 0$.\n- For $50\\%$ of the testdata, $m \\leq 1$.\n- For $50\\%$ of the testdata, $n \\leq 10$.\n- For $100\\%$ of the testdata, $n \\leq 20$, $m \\leq 4$, $m < n$, $a_i \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "砝码称重", "background": "", "description": "现有 $n$ 个砝码，重量分别为 $a_i$，在去掉 $m$ 个砝码后，问最多能称量出多少不同的重量（不包括 $0$）。\n\n请注意，砝码只能放在其中一边。", "inputFormat": "第 $1$ 行为有两个整数 $n$ 和 $m$，用空格分隔。\n\n第 $2$ 行有 $n$ 个正整数 $a_1, a_2, a_3,\\ldots , a_n$，表示每个砝码的重量。\n", "outputFormat": "仅包括 $1$ 个整数，为最多能称量出的重量数量。\n", "hint": "【样例说明】\n\n在去掉一个重量为 $2$ 的砝码后，能称量出 $1, 2, 3$ 共 $3$ 种重量。\n\n\n【数据规模】\n\n对于 $20\\%$ 的数据，$m=0$。\n\n对于 $50\\%$ 的数据，$m\\leq 1$。\n\n对于 $50\\%$ 的数据，$n\\leq 10$。\n\n对于 $100\\%$ 的数据，$n\\leq 20$， $m\\leq 4$，$m < n$，$a_i\\leq 100$。\n", "locale": "zh-CN"}}}
{"pid": "P1442", "type": "P", "difficulty": 5, "samples": [["5 3\n6 10\n5 2 4\n9 3 9\n6 7 10\n2 1 5\n3 8 11\n", "15"], ["10 156\n84 139\n63 22 50\n79 96 100\n87 77 98\n60 24 53\n47 1 29\n62 55 89\n68 68 78\n10 5 85\n85 67 71\n73 57 61\n", "155\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "线段树", "颜色段均摊（珂朵莉树 ODT）", "O2优化", "最短路"], "title": "铁球落地", "background": "", "description": "在二维坐标系内有 $n$ 个平台（定义平台是一条两端点纵坐标相同的开线段，开线段指线段两个端点不算做线段本身）和一个铁球，铁球如果下面没有物体，则每秒会下落一个单位长度。\n\n球每次落到某个平台上后，游戏者可以选择水平向左或水平向右滚，球滚动速度是每秒 $1$ 个单位长度。由于铁球的质量不太好，每次落下的高度不能超过 $h$。\n\n设计一种策略，使得球尽快落到地面而不被摔碎。\n\n假设地面高度为 $0$，且无限宽。球体积相对平台极小，可以看作一个质点。**请注意，球滚动至平台的一个端点处即可下落，不需要滚动至下一个格子**。例如下图，小球在 $(9,9)$ 处已经开始下落。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b19ucru5.png)", "inputFormat": "第一行有两个整数，分别代表平台个数 $n$ 和最大下落高度 $h$。\n\n第二行有两个整数 $x, y$，表示铁球起始时在坐标为 $(x, y)$ 的位置。\n\n第 $3$ 到第 $(n + 2)$ 行，每行三个整数，第 $(i + 2)$ 行的整数 $h_i, l_i, r_i$ 分别代表第 $i$ 个平台的端点纵坐标 $h_i$ 和左右端点的横坐标 $l_i,r_i$。\n", "outputFormat": "输出一行一个整数表示最小的坠落时间。", "hint": "#### 数据规模与约定 \n\n对于全部的测试点，保证：\n\n- $1 \\leq n \\leq 10^5$。\n- $1 \\leq x, y, h, h_i, l_i, r_i \\leq 10^9$，$l_i \\leq r_i$。\n- 对于所有的 $h_i$，保证互不相同，$l_i$ 与 $r_i$ 也互不相同，且对于任意 $i \\neq j$，保证 $l_i \\neq r_j$ 。\n- 数据保证有解，最终答案不超过 $10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Falling Iron Ball", "background": "", "description": "In a 2D coordinate system, there are $n$ platforms (a platform is defined as a horizontal open line segment whose two endpoints share the same $y$-coordinate; an open line segment means its two endpoints are not part of the segment itself) and one iron ball. If there is no object directly below, the ball falls $1$ unit length per second.\n\nEach time the ball lands on a platform, the player may choose to roll horizontally to the left or to the right. The rolling speed is $1$ unit length per second. Because the iron ball is fragile, the height of each single drop must not exceed $h$.\n\nDesign a strategy to make the ball reach the ground as quickly as possible without breaking.\n\nAssume the ground has height $0$ and is infinitely wide. The ball’s size is negligible compared to the platforms and can be treated as a point mass. Please note: the ball begins to fall as soon as it reaches an endpoint of a platform; it does not need to roll into the next cell. For example, in the figure below, the ball at $(9, 9)$ has already started to fall.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b19ucru5.png)", "inputFormat": "The first line contains two integers representing the number of platforms $n$ and the maximum allowed drop height $h$.\n\nThe second line contains two integers $x, y$, indicating that the iron ball starts at position $(x, y)$.\n\nLines $3$ to $n + 2$: each line contains three integers. On line $i + 2$, the integers $h_i, l_i, r_i$ denote the $y$-coordinate $h_i$ of the $i$-th platform and the $x$-coordinates $l_i, r_i$ of its left and right endpoints, respectively.", "outputFormat": "Output one line with a single integer: the minimum total time to reach the ground.", "hint": "Constraints and Conventions\n\nFor all test points, it is guaranteed that:\n\n- $1 \\leq n \\leq 10^5$.\n- $1 \\leq x, y, h, h_i, l_i, r_i \\leq 10^9$, $l_i \\leq r_i$.\n- All $h_i$ are pairwise distinct; all $l_i$ and $r_i$ are also pairwise distinct; and for any $i \\neq j$, it holds that $l_i \\neq r_j$.\n- The testdata guarantees there is a solution, and the final answer does not exceed $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "铁球落地", "background": "", "description": "在二维坐标系内有 $n$ 个平台（定义平台是一条两端点纵坐标相同的开线段，开线段指线段两个端点不算做线段本身）和一个铁球，铁球如果下面没有物体，则每秒会下落一个单位长度。\n\n球每次落到某个平台上后，游戏者可以选择水平向左或水平向右滚，球滚动速度是每秒 $1$ 个单位长度。由于铁球的质量不太好，每次落下的高度不能超过 $h$。\n\n设计一种策略，使得球尽快落到地面而不被摔碎。\n\n假设地面高度为 $0$，且无限宽。球体积相对平台极小，可以看作一个质点。**请注意，球滚动至平台的一个端点处即可下落，不需要滚动至下一个格子**。例如下图，小球在 $(9,9)$ 处已经开始下落。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b19ucru5.png)", "inputFormat": "第一行有两个整数，分别代表平台个数 $n$ 和最大下落高度 $h$。\n\n第二行有两个整数 $x, y$，表示铁球起始时在坐标为 $(x, y)$ 的位置。\n\n第 $3$ 到第 $(n + 2)$ 行，每行三个整数，第 $(i + 2)$ 行的整数 $h_i, l_i, r_i$ 分别代表第 $i$ 个平台的端点纵坐标 $h_i$ 和左右端点的横坐标 $l_i,r_i$。\n", "outputFormat": "输出一行一个整数表示最小的坠落时间。", "hint": "#### 数据规模与约定 \n\n对于全部的测试点，保证：\n\n- $1 \\leq n \\leq 10^5$。\n- $1 \\leq x, y, h, h_i, l_i, r_i \\leq 10^9$，$l_i \\leq r_i$。\n- 对于所有的 $h_i$，保证互不相同，$l_i$ 与 $r_i$ 也互不相同，且对于任意 $i \\neq j$，保证 $l_i \\neq r_j$ 。\n- 数据保证有解，最终答案不超过 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P1443", "type": "P", "difficulty": 3, "samples": [["3 3 1 1\n", "0 3 2    \n3 -1 1    \n2 1 4    "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "Special Judge", "广度优先搜索 BFS", "队列"], "title": "马的遍历", "background": "", "description": "有一个 $n \\times m$ 的棋盘，在某个点 $(x, y)$ 上有一个马，要求你计算出马到达棋盘上任意一个点最少要走几步。\n", "inputFormat": "输入只有一行四个整数，分别为 $n, m, x, y$。\n", "outputFormat": "一个 $n \\times m$ 的矩阵，代表马到达某个点最少要走几步（不能到达则输出 $-1$）。\n", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq x \\leq n \\leq 400$，$1 \\leq y \\leq m \\leq 400$。\n\n2022 年 8 月之后，本题去除了对输出保留场宽的要求。为了与之兼容，本题的输出以空格或者合理的场宽分割每个整数都将判作正确。", "locale": "zh-CN", "translations": {"en": {"title": "Knight's Traversal", "background": "", "description": "There is an $n \\times m$ chessboard. A knight is at $(x, y)$. Compute, for every square on the board, the minimum number of moves the knight needs to reach it.", "inputFormat": "A single line containing four integers $n, m, x, y$.", "outputFormat": "An $n \\times m$ matrix where each entry is the minimum number of moves for the knight to reach that square (output $-1$ if it is unreachable).", "hint": "Constraints and Conventions\n\nFor all test points, it is guaranteed that $1 \\leq x \\leq n \\leq 400$, $1 \\leq y \\leq m \\leq 400$.\n\nAfter August 2022, the requirement on fixed field width in the output was removed. For compatibility, outputs where each integer is separated by spaces or by reasonable field widths will both be judged correct.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "马的遍历", "background": "", "description": "有一个 $n \\times m$ 的棋盘，在某个点 $(x, y)$ 上有一个马，要求你计算出马到达棋盘上任意一个点最少要走几步。\n", "inputFormat": "输入只有一行四个整数，分别为 $n, m, x, y$。\n", "outputFormat": "一个 $n \\times m$ 的矩阵，代表马到达某个点最少要走几步（不能到达则输出 $-1$）。\n", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq x \\leq n \\leq 400$，$1 \\leq y \\leq m \\leq 400$。\n\n2022 年 8 月之后，本题去除了对输出保留场宽的要求。为了与之兼容，本题的输出以空格或者合理的场宽分割每个整数都将判作正确。", "locale": "zh-CN"}}}
{"pid": "P1444", "type": "P", "difficulty": 3, "samples": [["4\n0 0\n1 0\n1 1\n0 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "USACO", "枚举"], "title": "[USACO1.3] 虫洞 wormhole", "background": "", "description": "Farmer John 周末进行高能物理实验的结果却适得其反，导致 $n$ 个虫洞出现在农场上，农场是一个二维平面，没有两个虫洞处于同一位置。\n\n根据他的计算，FJ 知道他的虫洞两两配对，形成 $\\dfrac{n}{2}$ 对配对。例如，如果 $A$ 和 $B$ 的虫洞连接成一对，进入虫洞 $A$ 的任何物体将从虫洞 $B$ 出去，方向不变；反之亦然。  \n\n然而这可能发生相当令人不快的后果。例如，假设有两个成对的虫洞 $A(1,1)$ 和 $B(3,1)$，Bessie 从 $(2,1)$ 开始朝着 $x$ 正方向移动。Bessie 将进入虫洞 $B(3,1)$，从 $A(1,1)$ 出去，然后再次进入 $B$，困在一个无限循环中！\n\nFJ 知道他的农场里每个虫洞的确切位置。他知道 Bessie 总是向 $x$ 正方向走进来，虽然他不记得贝茜的当前位置。  \n\n请帮助 FJ 计算有多少种虫洞配对方案，使得存在一个位置，使得 Bessie 从该位置出发，会被困在一个无限循环中。", "inputFormat": "第一行一个正整数 $n$，表示虫洞数量。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个虫洞的坐标。", "outputFormat": "输出一行一个整数表示答案。\n", "hint": "### 数据范围\n对于 $100\\%$ 的数据，$2\\le n \\le 12$，$0 \\le x,y \\le 10^9$。  \n保证 $n$ 为偶数。\n\n### 样例解释\n\n将虫洞编号为 $1 \\sim 4$，然后通过将 $1,2$ 和 $3,4$ 匹配，如果 Bessie 从 $(0,0)$ 到 $(1,0)$ 之间的任意位置出发，她会陷入无限循环中。\n\n相似的，在相同的起始点，如果配对是 $1,3$ 和 $2,4$，贝茜也会陷入循环。（如果贝西从 $3$ 进去，$1$ 出来，她会走向 $2$ ，然后被传送到 $4$，最后又回到 $3$）\n\n仅有 $1,4$ 和 $2,3$ 的配对允许贝茜从任何二维平面上的点向 $x$ 正方向走，而不出现无限循环。\n\n题面翻译摘自 NOCOW", "locale": "zh-CN", "translations": {"en": {"title": "[USACO1.3] Wormhole", "background": "", "description": "Farmer John's high-energy physics experiment over the weekend backfired, causing $n$ wormholes to appear on the farm, which is a two-dimensional plane. No two wormholes are at the same position.\n\nAccording to his calculations, FJ knows the wormholes are paired up, forming $\\dfrac{n}{2}$ pairs. For example, if wormholes $A$ and $B$ form a pair, any object entering wormhole $A$ will exit from wormhole $B$ with its direction unchanged, and vice versa.\n\nHowever, this can lead to a rather unpleasant consequence. For instance, suppose there are two paired wormholes $A(1,1)$ and $B(3,1)$, and Bessie starts at $(2,1)$ moving in the positive $x$ direction. Bessie will enter wormhole $B(3,1)$, exit from $A(1,1)$, then enter $B$ again, getting trapped in an infinite loop!\n\nFJ knows the exact position of every wormhole on his farm. He knows Bessie always moves in the positive $x$ direction, although he does not remember Bessie's current position.\n\nPlease help FJ count how many pairing schemes of wormholes have the property that there exists a position such that if Bessie starts there, she will be trapped in an infinite loop.", "inputFormat": "The first line contains a positive integer $n$, the number of wormholes.\n\nEach of the next $n$ lines contains two integers $x, y$, the coordinates of a wormhole.", "outputFormat": "Output a single integer, the answer.", "hint": "### Constraints\nFor 100% of the testdata, $2 \\le n \\le 12$, $0 \\le x,y \\le 10^9$.  \nIt is guaranteed that $n$ is even.\n\n### Sample Explanation\nNumber the wormholes $1$ to $4$. If we pair $1,2$ and $3,4$, then if Bessie starts anywhere between $(0,0)$ and $(1,0)$, she will fall into an infinite loop.\n\nSimilarly, with the same starting point, if the pairings are $1,3$ and $2,4$, Bessie will also be trapped in a loop. (If Bessie enters through $3$ and exits from $1$, she will move toward $2$, then be teleported to $4$, and finally return to $3$.)\n\nOnly the pairing $1,4$ and $2,3$ allows Bessie to walk in the positive $x$ direction from any point in the plane without entering an infinite loop.\n\nProblem statement translation from NOCOW.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO1.3] 虫洞 wormhole", "background": "", "description": "Farmer John 周末进行高能物理实验的结果却适得其反，导致 $n$ 个虫洞出现在农场上，农场是一个二维平面，没有两个虫洞处于同一位置。\n\n根据他的计算，FJ 知道他的虫洞两两配对，形成 $\\dfrac{n}{2}$ 对配对。例如，如果 $A$ 和 $B$ 的虫洞连接成一对，进入虫洞 $A$ 的任何物体将从虫洞 $B$ 出去，方向不变；反之亦然。  \n\n然而这可能发生相当令人不快的后果。例如，假设有两个成对的虫洞 $A(1,1)$ 和 $B(3,1)$，Bessie 从 $(2,1)$ 开始朝着 $x$ 正方向移动。Bessie 将进入虫洞 $B(3,1)$，从 $A(1,1)$ 出去，然后再次进入 $B$，困在一个无限循环中！\n\nFJ 知道他的农场里每个虫洞的确切位置。他知道 Bessie 总是向 $x$ 正方向走进来，虽然他不记得贝茜的当前位置。  \n\n请帮助 FJ 计算有多少种虫洞配对方案，使得存在一个位置，使得 Bessie 从该位置出发，会被困在一个无限循环中。", "inputFormat": "第一行一个正整数 $n$，表示虫洞数量。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个虫洞的坐标。", "outputFormat": "输出一行一个整数表示答案。\n", "hint": "### 数据范围\n对于 $100\\%$ 的数据，$2\\le n \\le 12$，$0 \\le x,y \\le 10^9$。  \n保证 $n$ 为偶数。\n\n### 样例解释\n\n将虫洞编号为 $1 \\sim 4$，然后通过将 $1,2$ 和 $3,4$ 匹配，如果 Bessie 从 $(0,0)$ 到 $(1,0)$ 之间的任意位置出发，她会陷入无限循环中。\n\n相似的，在相同的起始点，如果配对是 $1,3$ 和 $2,4$，贝茜也会陷入循环。（如果贝西从 $3$ 进去，$1$ 出来，她会走向 $2$ ，然后被传送到 $4$，最后又回到 $3$）\n\n仅有 $1,4$ 和 $2,3$ 的配对允许贝茜从任何二维平面上的点向 $x$ 正方向走，而不出现无限循环。\n\n题面翻译摘自 NOCOW", "locale": "zh-CN"}}}
{"pid": "P1445", "type": "P", "difficulty": 5, "samples": [["2\n", "3"], ["1439\n", "102426508"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "洛谷原创"], "title": "[Violet] 樱花", "background": "又到了一年樱花盛开的时节。Vani 和妹子一起去看樱花的时候，找到了一棵大大的樱花树，上面开满了粉红色的樱花。Vani 粗略估计了一下，一共有足足 $n!$ 片花瓣。\n\n\n\nVani 轻柔地对她说：“你知道吗？这里面的一片花瓣代表着你，我从里面随机摘一片，能和你相遇的概率只有 $1/n!$ 那么小。我该是多么的幸运，才让你今天这么近地站在我面前。相信我，我一定会把这亿万分之一的缘分变为永远。”\n\n粉红的樱花漫天飞舞，妹子瞬间被 Vani 感动了。她轻轻地牵起了他的手，和他相依而坐。这时，她突然看到田野的尽头也长着两棵樱花树，于是慢慢地把头靠在 Vani 的肩上，在他耳边低语：“看到夕阳里的那两棵樱花树了吗？其中一棵树上的一片花瓣是你，另一棵树上的一片花瓣是我，如果有人从这棵摘下一片，从那棵采下一瓣，我们相遇的概率会不会正好是 $1/n!$ 呢？”\n\nVani 的大脑飞速运作了一下，立即算出了答案。正要告诉妹子，她突然又轻轻地说：“以前你总是说我数学不好，但是这种简单的题我还是会算的。你看假如左边那棵树上有 $x$ 片花瓣，右边那个有 $y$ 片花瓣，那么我们相遇的概率不就是 $1/x+1/y$ 么，不过有多少种情况能使它正好可以等于 $1/n!$ 呢？这个你就帮我算一下吧～”\n\n显然，面对天然呆的可爱妹子，Vani 不但不能吐槽她的渣数学，而且还要老老实实地 帮她算出答案哦。\n", "description": "求方程：\n\n$$\\dfrac{1}{x} + \\dfrac{1}{y} = \\dfrac{1}{n!}$$ \n\n的正整数解的组数，答案对 $10^9+7$ 取模。", "inputFormat": "输入只有一行一个整数，表示 $n$。", "outputFormat": "输出一行一个整数表示正整数解的组数模 $10^9+7$ 的值。", "hint": "#### 样例 1 解释\n\n共有三个数对 $(x,y)$ 满足条件，分别是 $(3,6),(4,4)$ 和 $(6,3)$。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n\\le 100$ 。\n- 对于 $100\\%$ 的数据，保证 $1 \\le n\\le 10^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[Violet] Sakura", "background": "It is the season when cherry blossoms bloom again. When Vani and the girl went to see the cherry blossoms, they found a big cherry tree full of pink blossoms. Vani roughly estimated that there were $n!$ petals.\n\nVani gently said to her: \"Do you know? One petal among them represents you. If I randomly pick one, the probability that I meet you is only $1/n!$. How lucky I must be to have you standing so close in front of me today. Believe me, I will turn this one-in-hundreds-of-millions fate into forever.\"\n\nPink cherry blossoms fluttered all over the sky, and the girl was instantly touched by Vani. She gently held his hand, and they sat close together. At this moment, she suddenly saw two cherry trees at the end of the field, then slowly leaned her head on Vani’s shoulder and whispered in his ear: \"Do you see those two cherry trees in the sunset? One petal on one tree is you, and one petal on the other tree is me. If someone picks one petal from this tree and one from that tree, will the probability that we meet happen to be $1/n!$?\"\n\nVani’s brain ran fast, and he immediately got the answer. Just as he was about to tell the girl, she softly said again: \"You used to say I’m bad at math, but I can still do this simple problem. Look, if the tree on the left has $x$ petals and the one on the right has $y$ petals, then the probability that we meet is just $1/x + 1/y$, but how many cases make it exactly equal to $1/n!$? Please help me figure this out~\"\n\nObviously, facing the adorably airheaded girl, Vani not only cannot complain about her math, but also has to honestly compute the answer for her.", "description": "Find the number of ordered positive integer solutions to the equation:\n$$\\dfrac{1}{x} + \\dfrac{1}{y} = \\dfrac{1}{n!}$$\nOutput the answer modulo $10^9+7$.", "inputFormat": "The input consists of a single integer $n$.", "outputFormat": "Output a single integer: the number of ordered positive integer pairs $(x, y)$ modulo $10^9+7$.", "hint": "#### Sample 1 Explanation\n\nThere are three pairs $(x, y)$ that satisfy the condition: $(3,6)$, $(4,4)$, and $(6,3)$.\n\n#### Constraints\n\n- For $30\\%$ of the testdata, it is guaranteed that $n \\le 100$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\le n \\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Violet] 樱花", "background": "又到了一年樱花盛开的时节。Vani 和妹子一起去看樱花的时候，找到了一棵大大的樱花树，上面开满了粉红色的樱花。Vani 粗略估计了一下，一共有足足 $n!$ 片花瓣。\n\n\n\nVani 轻柔地对她说：“你知道吗？这里面的一片花瓣代表着你，我从里面随机摘一片，能和你相遇的概率只有 $1/n!$ 那么小。我该是多么的幸运，才让你今天这么近地站在我面前。相信我，我一定会把这亿万分之一的缘分变为永远。”\n\n粉红的樱花漫天飞舞，妹子瞬间被 Vani 感动了。她轻轻地牵起了他的手，和他相依而坐。这时，她突然看到田野的尽头也长着两棵樱花树，于是慢慢地把头靠在 Vani 的肩上，在他耳边低语：“看到夕阳里的那两棵樱花树了吗？其中一棵树上的一片花瓣是你，另一棵树上的一片花瓣是我，如果有人从这棵摘下一片，从那棵采下一瓣，我们相遇的概率会不会正好是 $1/n!$ 呢？”\n\nVani 的大脑飞速运作了一下，立即算出了答案。正要告诉妹子，她突然又轻轻地说：“以前你总是说我数学不好，但是这种简单的题我还是会算的。你看假如左边那棵树上有 $x$ 片花瓣，右边那个有 $y$ 片花瓣，那么我们相遇的概率不就是 $1/x+1/y$ 么，不过有多少种情况能使它正好可以等于 $1/n!$ 呢？这个你就帮我算一下吧～”\n\n显然，面对天然呆的可爱妹子，Vani 不但不能吐槽她的渣数学，而且还要老老实实地 帮她算出答案哦。\n", "description": "求方程：\n\n$$\\dfrac{1}{x} + \\dfrac{1}{y} = \\dfrac{1}{n!}$$ \n\n的正整数解的组数，答案对 $10^9+7$ 取模。", "inputFormat": "输入只有一行一个整数，表示 $n$。", "outputFormat": "输出一行一个整数表示正整数解的组数模 $10^9+7$ 的值。", "hint": "#### 样例 1 解释\n\n共有三个数对 $(x,y)$ 满足条件，分别是 $(3,6),(4,4)$ 和 $(6,3)$。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n\\le 100$ 。\n- 对于 $100\\%$ 的数据，保证 $1 \\le n\\le 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P1446", "type": "P", "difficulty": 6, "samples": [["1 1 1 2 7\n2 3 1\n3 1 2\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "数学", "2008", "各省省选", "湖南", "置换", "逆元"], "title": "[HNOI2008] Cards", "background": null, "description": "小春现在很清闲，面对书桌上的 $n$ 张牌，他决定给每张牌染色，目前小春拥有 $3$ 种颜色：红色，蓝色，绿色。他询问 Sun 有多少种染色方案，Sun 很快就给出了答案。\n\n进一步，小春要求染出 $S_r$ 张红色，$S_b$ 张蓝色，$S_g$ 张绿色。他又询问有多少种方案，Sun 想了一下，又给出了正确答案。最后小春发明了 $m$ 种不同的洗牌法，这里他又问 Sun 有多少种不同的染色方案。两种染色方法相同当且仅当其中一种可以通过任意的洗牌法（即可以使用多种洗牌法，而每种方法可以使用多次）洗成另一种。\n\nSun 发现这个问题有点难度，决定交给你，由于答案可能很大，你只需要求出答案对于 $P$ 取模的结果。 保证 $P$ 为一个质数。", "inputFormat": "第一行输入 $5$ 个整数，依次表示：$S_r,S_b,S_g,m,P$（$m\\le 60,m+1<P<100$）。其中，题面所提及的 $n$ 为 $S_r+S_b+S_g$，即 $n=S_r+S_b+S_g$。\n\n接下来 $m$ 行，每行描述一种洗牌法，每行有 $n$ 个用空格隔开的整数 $X_1X_2...X_n$，保证其为 $1$ 到 $n$ 的一个排列，表示使用这种洗牌法，第 $i$ 位变为原来的 $X_i$ 位的牌。输入数据保证任意多次洗牌都可用这 $m$ 种洗牌法中的一种代替，且对每种洗牌法，都存在一种洗牌法使得能回到原状态。\n\n同时，对于 $100\\%$ 的数据满足 $\\max\\{S_r,S_b,S_g\\}\\le 20$ 。", "outputFormat": "不同的染色方法对 $P$ 取模的结果。", "hint": "有 $2$ 种本质上不同的染色法：`RGB` 和 `RBG`，使用洗牌法 `231` 一次，可得 `GBR` 和 `BGR`，使用洗牌法 `312` 一次，可得 `BRG` 和 `GRB`。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2008] Cards", "background": "# Description\n\nXiaochun is quite idle. Facing $n$ cards on the desk, he decides to color each card. He currently has $3$ colors: red, blue, and green. He asks Sun how many colorings there are, and Sun quickly gives the answer.\n\nFurthermore, Xiaochun requires exactly $S_r$ red, $S_b$ blue, and $S_g$ green cards. He asks again how many colorings there are; Sun thinks for a moment and gives the correct answer. Finally, Xiaochun invents $m$ different shuffles. He asks Sun how many essentially different colorings there are now. Two colorings are considered the same if and only if one can be transformed into the other by applying arbitrary shuffles (that is, you may use multiple shuffles, and each shuffle may be used multiple times).\n\nSun finds this problem somewhat challenging and decides to leave it to you. Since the answer may be large, you only need to output the result modulo $P$. It is guaranteed that $P$ is a prime.", "description": "Xiaochun is quite idle. Facing $n$ cards on the desk, he decides to color each card. He currently has $3$ colors: red, blue, and green. He asks Sun how many colorings there are, and Sun quickly gives the answer.\n\nFurthermore, Xiaochun requires exactly $S_r$ red, $S_b$ blue, and $S_g$ green cards. He asks again how many colorings there are; Sun thinks for a moment and gives the correct answer. Finally, Xiaochun invents $m$ different shuffles. He asks Sun how many essentially different colorings there are now. Two colorings are considered the same if and only if one can be transformed into the other by applying arbitrary shuffles (that is, you may use multiple shuffles, and each shuffle may be used multiple times).\n\nSun finds this problem somewhat challenging and decides to leave it to you. Since the answer may be large, you only need to output the result modulo $P$. It is guaranteed that $P$ is a prime.\n\n# Description", "inputFormat": "The first line contains $5$ integers: $S_r, S_b, S_g, m, P$ (with $m \\le 60, m+1 < P < 100$). Here, the $n$ mentioned in the statement is $S_r + S_b + S_g$, i.e., $n = S_r + S_b + S_g$.\n\nThe next $m$ lines each describe a shuffle. Each line has $n$ space-separated integers $X_1, X_2, \\dots, X_n$, guaranteed to be a permutation of $1$ to $n$, meaning that when using this shuffle, position $i$ becomes the card that was originally at position $X_i$. The input guarantees that any number of shuffles can be replaced by one of these $m$ shuffles, and that for every shuffle, there exists a shuffle that brings you back to the original state.\n\nAlso, for $100\\%$ of the testdata, $\\max\\{S_r, S_b, S_g\\} \\le 20$.", "outputFormat": "Output the number of distinct colorings modulo $P$.", "hint": "There are $2$ essentially different colorings: `RGB` and `RBG`. Using shuffle `231` once gives `GBR` and `BGR`; using shuffle `312` once gives `BRG` and `GRB`.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2008] Cards", "background": null, "description": "小春现在很清闲，面对书桌上的 $n$ 张牌，他决定给每张牌染色，目前小春拥有 $3$ 种颜色：红色，蓝色，绿色。他询问 Sun 有多少种染色方案，Sun 很快就给出了答案。\n\n进一步，小春要求染出 $S_r$ 张红色，$S_b$ 张蓝色，$S_g$ 张绿色。他又询问有多少种方案，Sun 想了一下，又给出了正确答案。最后小春发明了 $m$ 种不同的洗牌法，这里他又问 Sun 有多少种不同的染色方案。两种染色方法相同当且仅当其中一种可以通过任意的洗牌法（即可以使用多种洗牌法，而每种方法可以使用多次）洗成另一种。\n\nSun 发现这个问题有点难度，决定交给你，由于答案可能很大，你只需要求出答案对于 $P$ 取模的结果。 保证 $P$ 为一个质数。", "inputFormat": "第一行输入 $5$ 个整数，依次表示：$S_r,S_b,S_g,m,P$（$m\\le 60,m+1<P<100$）。其中，题面所提及的 $n$ 为 $S_r+S_b+S_g$，即 $n=S_r+S_b+S_g$。\n\n接下来 $m$ 行，每行描述一种洗牌法，每行有 $n$ 个用空格隔开的整数 $X_1X_2...X_n$，保证其为 $1$ 到 $n$ 的一个排列，表示使用这种洗牌法，第 $i$ 位变为原来的 $X_i$ 位的牌。输入数据保证任意多次洗牌都可用这 $m$ 种洗牌法中的一种代替，且对每种洗牌法，都存在一种洗牌法使得能回到原状态。\n\n同时，对于 $100\\%$ 的数据满足 $\\max\\{S_r,S_b,S_g\\}\\le 20$ 。", "outputFormat": "不同的染色方法对 $P$ 取模的结果。", "hint": "有 $2$ 种本质上不同的染色法：`RGB` 和 `RBG`，使用洗牌法 `231` 一次，可得 `GBR` 和 `BGR`，使用洗牌法 `312` 一次，可得 `BRG` 和 `GRB`。", "locale": "zh-CN"}}}
{"pid": "P1447", "type": "P", "difficulty": 5, "samples": [["5 4\n", "36\n"], ["3 4", "20\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2010", "NOI", "最大公约数 gcd", "莫比乌斯反演", "整除分块"], "title": "[NOI2010] 能量采集", "background": "", "description": "栋栋有一块长方形的地，他在地上种了一种能量植物，这种植物可以采集太阳光的能量。在这些植物采集能量后，栋栋再使用一个能量汇集机器把这些植物采集到的能量汇集到一起。\n\n栋栋的植物种得非常整齐，一共有 $n$ 列，每列有 $m$ 棵，植物的横竖间距都一样，因此对于每一棵植物，栋栋可以用一个坐标 $(x, y)$ 来表示，其中 $x$ 的范围是 $1$ 至 $n$，$y$ 的范围是 $1$ 至 $m$，表示是在第 $x$ 列的第 $y$ 棵。\n\n由于能量汇集机器较大，不便移动，栋栋将它放在了一个角上，坐标正好是 $(0, 0)$。\n\n能量汇集机器在汇集的过程中有一定的能量损失。如果一棵植物与能量汇集机器连接而成的线段上有 $k$ 棵植物，则能量的损失为 $2k + 1$。例如，当能量汇集机器收集坐标为 $(2, 4)$ 的植物时，由于连接线段上存在一棵植物 $(1, 2)$，会产生 $3$ 的能量损失。注意，如果一棵植物与能量汇集机器连接的线段上没有植物，则能量损失为 $1$。现在要计算总的能量损失。\n\n下面给出了一个能量采集的例子，其中 $n = 5$，$m = 4$，一共有 $20$ 棵植物，在每棵植物上标明了能量汇集机器收集它的能量时产生的能量损失。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fhzpmm7b.png)\n\n在这个例子中，总共产生了 $36$ 的能量损失。", "inputFormat": "一行两个整数 $n,m$。", "outputFormat": "仅包含一个整数，表示总共产生的能量损失。\n", "hint": "- 对于 $10\\%$ 的数据：$n, m \\leq 10$；\n- 对于 $50\\%$ 的数据：$n, m \\leq 100$；\n- 对于 $80\\%$ 的数据：$n, m \\leq 10^3$；\n- 对于 $90\\%$ 的数据：$n, m \\leq 10^4$；\n- 对于 $100\\%$ 的数据：$1 \\leq n, m \\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2010] Energy Collection", "background": "", "description": "Dongdong has a rectangular field where he planted an energy plant that can harvest energy from sunlight. After these plants harvest energy, Dongdong uses an energy aggregation machine to gather all the energy collected by the plants.\n\nDongdong planted the plants in a very neat grid: there are $n$ columns, and each column has $m$ plants, with equal spacing both horizontally and vertically. Therefore, for each plant, Dongdong can denote it by a coordinate $(x, y)$, where $x$ ranges from $1$ to $n$ and $y$ ranges from $1$ to $m$, meaning it is the $y$-th plant in column $x$.\n\nBecause the energy aggregation machine is large and not easy to move, Dongdong placed it at a corner, exactly at the coordinate $(0, 0)$.\n\nThere is some energy loss during the aggregation process. If the line segment connecting a plant and the energy aggregation machine contains $k$ plants, then the energy loss is $2k + 1$. For example, when the machine collects energy from the plant at $(2, 4)$, since there is a plant at $(1, 2)$ on the connecting segment, the loss is $3$. Note that if there are no plants on the line segment connecting the plant and the machine, then the energy loss is $1$. Now compute the total energy loss.\n\nBelow is an example of energy collection with $n = 5$ and $m = 4$, for a total of $20$ plants. Each plant is labeled with the energy loss incurred when the machine collects its energy.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fhzpmm7b.png)\n\nIn this example, the total energy loss is $36$.", "inputFormat": "One line with two integers $n, m$.", "outputFormat": "Output a single integer representing the total energy loss.", "hint": "- For 10% of the testdata: $n, m \\le 10$.\n- For 50% of the testdata: $n, m \\le 100$.\n- For 80% of the testdata: $n, m \\le 10^3$.\n- For 90% of the testdata: $n, m \\le 10^4$.\n- For 100% of the testdata: $1 \\le n, m \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2010] 能量采集", "background": "", "description": "栋栋有一块长方形的地，他在地上种了一种能量植物，这种植物可以采集太阳光的能量。在这些植物采集能量后，栋栋再使用一个能量汇集机器把这些植物采集到的能量汇集到一起。\n\n栋栋的植物种得非常整齐，一共有 $n$ 列，每列有 $m$ 棵，植物的横竖间距都一样，因此对于每一棵植物，栋栋可以用一个坐标 $(x, y)$ 来表示，其中 $x$ 的范围是 $1$ 至 $n$，$y$ 的范围是 $1$ 至 $m$，表示是在第 $x$ 列的第 $y$ 棵。\n\n由于能量汇集机器较大，不便移动，栋栋将它放在了一个角上，坐标正好是 $(0, 0)$。\n\n能量汇集机器在汇集的过程中有一定的能量损失。如果一棵植物与能量汇集机器连接而成的线段上有 $k$ 棵植物，则能量的损失为 $2k + 1$。例如，当能量汇集机器收集坐标为 $(2, 4)$ 的植物时，由于连接线段上存在一棵植物 $(1, 2)$，会产生 $3$ 的能量损失。注意，如果一棵植物与能量汇集机器连接的线段上没有植物，则能量损失为 $1$。现在要计算总的能量损失。\n\n下面给出了一个能量采集的例子，其中 $n = 5$，$m = 4$，一共有 $20$ 棵植物，在每棵植物上标明了能量汇集机器收集它的能量时产生的能量损失。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fhzpmm7b.png)\n\n在这个例子中，总共产生了 $36$ 的能量损失。", "inputFormat": "一行两个整数 $n,m$。", "outputFormat": "仅包含一个整数，表示总共产生的能量损失。\n", "hint": "- 对于 $10\\%$ 的数据：$n, m \\leq 10$；\n- 对于 $50\\%$ 的数据：$n, m \\leq 100$；\n- 对于 $80\\%$ 的数据：$n, m \\leq 10^3$；\n- 对于 $90\\%$ 的数据：$n, m \\leq 10^4$；\n- 对于 $100\\%$ 的数据：$1 \\leq n, m \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1448", "type": "P", "difficulty": 5, "samples": [["5\n5\n3 2\n4 1\n4 4\n5 4\n5 2", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "动态规划 DP", "1998", "NOI"], "title": "[NOI1998] 围巾裁剪", "background": "NOI1998 Day2 T1", "description": "裁缝有一块非常珍贵的丝绸围巾。可惜的是，围巾的某些部分已经被蛀虫给咬坏了。裁缝当然不愿意就这么把围巾给丢了，于是，他想把围巾给裁成两块小围巾送给他的两个女儿。自然，两块小围巾的面积之和越大越好。\n\n这块围巾是一个正三角形，三条边被均匀地分成了 $N$ 段，即这个正三角形被均匀地分成了 $N^2$ 个单元，每个单元是一个面积为 $1$ 的正三角形。\n\n如图所示为一个 $N=5$ 的围巾，图中带阴影的单元表示被蛀虫咬坏的部分。  \n从上往下看，围巾被分成了 $N$ 行：\n- 第一行有 $1$ 个单元。\n- 第二行有 $3$ 个单元，其中有 $2$ 个是形如 $\\Delta$ 的，有 $1$ 个是形如 $\\nabla$ 的（这两种三角形我们认为是形状相同的）。\n- 第三行有 $5$ 个单元，其中有 $3$ 个是形如 $\\Delta$ 的，有 $2$ 个是形如 $\\nabla$ 的……\n\n用坐标 $(X,Y)$ 给每个单元定位，第一行的单元的坐标为 $(1,1)$；第二行从左到右的三个单元的坐标依次为 $(2,1)$、$(2,2)$、$(2,3)$；……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rwklebsy.png)\n\n围巾的剪裁条件如下：  \n  1. 裁成的两块小围巾形状与原来的大围巾完全相同，都是正三角形；\n  2. 每一块小围巾里都不存在被蛀虫咬坏的部分；\n  3. 裁剪时必须沿着单元的边界裁剪；\n  4. 要求两块小围巾的面积的总和最大。\n\n图中，最优的裁剪方法已经用粗线画了出来，面积和为 $4+9=13$。  \n现在需要你编一个程序来帮助裁缝解决这个问题。", "inputFormat": "- 输入的第一行为一个整数 $N$（$1\\leq N\\leq100$），表示这块围巾总共被分成了 $N^2$ 个单元。\n- 第二行为一个整数 $M$（$1\\leq M\\leq N^2-2$），表示这块围巾共有 $M$ 个单元被蛀虫咬坏了。\n- 接下来的 $M$ 行，每一行有两个正整数 $X$ 和 $Y$，为这 $M$ 个被蛀虫咬坏的单元的坐标。\n\n输入文件中同一行相邻两项之间用一个或多个空格隔开。", "outputFormat": "输出文件仅含一个整数，为你所找到的裁出两块小围巾面积总和的最大值。", "hint": "**【样例解释】**\n\n如「题目描述」中图所示，两块小围巾面积总和的最大值为 $4+9=13$。\n\n**【数据范围】**\n\n- 对于 $50\\%$ 的数据，$1\\leq N\\leq50$；\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq100$，$0\\leq M\\leq N^2-2$，$1\\leq X\\leq N$，$1\\leq Y\\leq 2\\times N-1$。\n\n本题数据为 Windows（CRLF）格式。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI1998] Scarf Cutting", "background": "NOI1998 Day 2 T1.", "description": "A tailor has a very precious silk scarf. Unfortunately, some parts of the scarf have been eaten by moths. The tailor certainly does not want to throw it away, so he plans to cut the scarf into two small scarves for his two daughters. Naturally, the larger the sum of the areas of the two small scarves, the better.\n\nThe scarf is an equilateral triangle, and each of its three sides is evenly divided into $N$ segments, that is, the equilateral triangle is evenly divided into $N^2$ cells, each of which is an equilateral triangle of area $1$.\n\nAs shown in the figure for $N=5$, the shaded cells represent the parts eaten by moths.  \nFrom top to bottom, the scarf is divided into $N$ rows:\n- The first row has $1$ cell.\n- The second row has $3$ cells, among which $2$ are of the shape $\\Delta$ and $1$ is of the shape $\\nabla$ (we consider these two triangles to be the same shape).\n- The third row has $5$ cells, among which $3$ are of the shape $\\Delta$ and $2$ are of the shape $\\nabla$, and so on.\n\nWe use coordinates $(X, Y)$ to locate each cell. The cell in the first row has coordinates $(1, 1)$; for the second row, from left to right, the three cells have coordinates $(2, 1)$, $(2, 2)$, $(2, 3)$; and so on.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rwklebsy.png)\n\nThe cutting conditions for the scarf are as follows:  \n  1. The two small scarves must be exactly the same shape as the original large scarf, i.e., equilateral triangles.\n  2. There must be no moth-eaten parts within either small scarf.\n  3. Cutting must follow the cell boundaries.\n  4. The total area of the two small scarves must be maximized.\n\nIn the figure, the optimal cutting method has been drawn with bold lines, and the sum of areas is $4+9=13$.  \nNow you need to write a program to help the tailor solve this problem.", "inputFormat": "- The first line contains an integer $N$ ($1 \\leq N \\leq 100$), indicating that the scarf is divided into $N^2$ cells in total.\n- The second line contains an integer $M$ ($1 \\leq M \\leq N^2 - 2$), indicating that $M$ cells of the scarf have been eaten by moths.\n- The next $M$ lines each contain two positive integers $X$ and $Y$, which are the coordinates of the $M$ moth-eaten cells.\n\nAdjacent items on the same line in the input file are separated by one or more spaces.", "outputFormat": "Output a single integer, the maximum total area of the two small scarves you can cut out.", "hint": "- Sample explanation: As shown in the figure in the Description, the maximum total area of the two small scarves is $4+9=13$.\n- Constraints:\n  - For $50\\%$ of the testdata, $1 \\leq N \\leq 50$.\n  - For $100\\%$ of the testdata, $1 \\leq N \\leq 100$, $0 \\leq M \\leq N^2 - 2$, $1 \\leq X \\leq N$, $1 \\leq Y \\leq 2 \\times N - 1$.\n\nThe testdata are in Windows (CRLF) format.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI1998] 围巾裁剪", "background": "NOI1998 Day2 T1", "description": "裁缝有一块非常珍贵的丝绸围巾。可惜的是，围巾的某些部分已经被蛀虫给咬坏了。裁缝当然不愿意就这么把围巾给丢了，于是，他想把围巾给裁成两块小围巾送给他的两个女儿。自然，两块小围巾的面积之和越大越好。\n\n这块围巾是一个正三角形，三条边被均匀地分成了 $N$ 段，即这个正三角形被均匀地分成了 $N^2$ 个单元，每个单元是一个面积为 $1$ 的正三角形。\n\n如图所示为一个 $N=5$ 的围巾，图中带阴影的单元表示被蛀虫咬坏的部分。  \n从上往下看，围巾被分成了 $N$ 行：\n- 第一行有 $1$ 个单元。\n- 第二行有 $3$ 个单元，其中有 $2$ 个是形如 $\\Delta$ 的，有 $1$ 个是形如 $\\nabla$ 的（这两种三角形我们认为是形状相同的）。\n- 第三行有 $5$ 个单元，其中有 $3$ 个是形如 $\\Delta$ 的，有 $2$ 个是形如 $\\nabla$ 的……\n\n用坐标 $(X,Y)$ 给每个单元定位，第一行的单元的坐标为 $(1,1)$；第二行从左到右的三个单元的坐标依次为 $(2,1)$、$(2,2)$、$(2,3)$；……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rwklebsy.png)\n\n围巾的剪裁条件如下：  \n  1. 裁成的两块小围巾形状与原来的大围巾完全相同，都是正三角形；\n  2. 每一块小围巾里都不存在被蛀虫咬坏的部分；\n  3. 裁剪时必须沿着单元的边界裁剪；\n  4. 要求两块小围巾的面积的总和最大。\n\n图中，最优的裁剪方法已经用粗线画了出来，面积和为 $4+9=13$。  \n现在需要你编一个程序来帮助裁缝解决这个问题。", "inputFormat": "- 输入的第一行为一个整数 $N$（$1\\leq N\\leq100$），表示这块围巾总共被分成了 $N^2$ 个单元。\n- 第二行为一个整数 $M$（$1\\leq M\\leq N^2-2$），表示这块围巾共有 $M$ 个单元被蛀虫咬坏了。\n- 接下来的 $M$ 行，每一行有两个正整数 $X$ 和 $Y$，为这 $M$ 个被蛀虫咬坏的单元的坐标。\n\n输入文件中同一行相邻两项之间用一个或多个空格隔开。", "outputFormat": "输出文件仅含一个整数，为你所找到的裁出两块小围巾面积总和的最大值。", "hint": "**【样例解释】**\n\n如「题目描述」中图所示，两块小围巾面积总和的最大值为 $4+9=13$。\n\n**【数据范围】**\n\n- 对于 $50\\%$ 的数据，$1\\leq N\\leq50$；\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq100$，$0\\leq M\\leq N^2-2$，$1\\leq X\\leq N$，$1\\leq Y\\leq 2\\times N-1$。\n\n本题数据为 Windows（CRLF）格式。", "locale": "zh-CN"}}}
{"pid": "P1449", "type": "P", "difficulty": 2, "samples": [["3.5.2.-*7.+@", "16"], ["10.28.30./*7.-@", "-7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "线性数据结构", "栈"], "title": "后缀表达式", "background": "", "description": "所谓后缀表达式是指这样的一个表达式：式中不再引用括号，运算符号放在两个运算对象之后，所有计算按运算符号出现的顺序，严格地由左而右新进行（不用考虑运算符的优先级）。\n\n本题中运算符仅包含 $\\texttt{+-*/}$。保证对于 $\\texttt{/}$ 运算除数不为 0。特别地，其中 $\\texttt{/}$ 运算的结果需要**向 0 取整**（即与 C++ `/` 运算的规则一致）。\n\n如：$\\texttt{3*(5-2)+7}$ 对应的后缀表达式为：$\\texttt{3.5.2.-*7.+@}$。在该式中，`@` 为表达式的结束符号。`.` 为操作数的结束符号。\n", "inputFormat": "输入一行一个字符串 $s$，表示后缀表达式。\n", "outputFormat": "输出一个整数，表示表达式的值。", "hint": "数据保证，$1 \\leq |s| \\leq 50$，答案和计算过程中的每一个值的绝对值不超过 $10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Postfix Expression", "background": "", "description": "A postfix expression is an expression in which parentheses are not used, operators are placed after their two operands, and all computations are performed strictly from left to right in the order in which the operators appear (operator precedence does not need to be considered).\n\nIn this problem, the operators include only $\\texttt{+-*/}$. It is guaranteed that for the $\\texttt{/}$ operation the divisor is not 0. In particular, the result of the $\\texttt{/}$ operation should be truncated toward 0 (i.e., the same rule as C++ `/`).\n\nFor example: $\\texttt{3*(5-2)+7}$ corresponds to the postfix expression $\\texttt{3.5.2.-*7.+@}$. In this expression, `@` is the end marker for the expression. `.` is the end marker for an operand.", "inputFormat": "Input a single line containing a string $s$, denoting the postfix expression.", "outputFormat": "Output a single integer, the value of the expression.", "hint": "It is guaranteed that $1 \\leq |s| \\leq 50$, and the absolute value of the answer and of every intermediate value during computation does not exceed $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "后缀表达式", "background": "", "description": "所谓后缀表达式是指这样的一个表达式：式中不再引用括号，运算符号放在两个运算对象之后，所有计算按运算符号出现的顺序，严格地由左而右新进行（不用考虑运算符的优先级）。\n\n本题中运算符仅包含 $\\texttt{+-*/}$。保证对于 $\\texttt{/}$ 运算除数不为 0。特别地，其中 $\\texttt{/}$ 运算的结果需要**向 0 取整**（即与 C++ `/` 运算的规则一致）。\n\n如：$\\texttt{3*(5-2)+7}$ 对应的后缀表达式为：$\\texttt{3.5.2.-*7.+@}$。在该式中，`@` 为表达式的结束符号。`.` 为操作数的结束符号。\n", "inputFormat": "输入一行一个字符串 $s$，表示后缀表达式。\n", "outputFormat": "输出一个整数，表示表达式的值。", "hint": "数据保证，$1 \\leq |s| \\leq 50$，答案和计算过程中的每一个值的绝对值不超过 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P1450", "type": "P", "difficulty": 5, "samples": [["1 2 5 10 2\n3 2 3 1 10\n1000 2 2 2 900\n", "4\n27\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2008", "河南", "各省省选", "单调队列", "背包 DP", "容斥原理"], "title": "[HAOI2008] 硬币购物", "background": "", "description": "共有 $4$ 种硬币。面值分别为 $c_1,c_2,c_3,c_4$。\n\n某人去商店买东西，去了 $n$ 次，对于每次购买，他带了 $d_i$ 枚 $i$ 种硬币，想购买 $s$ 的价值的东西。请问每次有多少种付款方法。", "inputFormat": "输入的第一行是五个整数，分别代表 $c_1,c_2,c_3,c_4, n$。\n\n接下来 $n$ 行，每行有五个整数，描述一次购买，分别代表 $d_1, d_2, d_3, d_4,s$。", "outputFormat": "对于每次购买，输出一行一个整数代表答案。", "hint": "#### 数据规模与约定\n\n* 对于 $100\\%$ 的数据，保证 $1 \\leq c_i, d_i, s \\leq 10^5$，$1 \\leq n \\leq 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2008] Coin Shopping", "background": "", "description": "There are $4$ types of coins with face values $c_1, c_2, c_3, c_4$.\n\nA person goes shopping $n$ times. For each purchase, they carry $d_i$ coins of type $i$ and want to buy items worth an amount of $s$. For each purchase, how many payment methods are there?", "inputFormat": "The first line contains five integers, representing $c_1, c_2, c_3, c_4, n$.\n\nThe next $n$ lines each contain five integers describing one purchase, representing $d_1, d_2, d_3, d_4, s$.", "outputFormat": "For each purchase, output one line with a single integer representing the answer.", "hint": "- Constraints  \n  For $100\\%$ of the testdata, $1 \\leq c_i, d_i, s \\leq 10^5$, $1 \\leq n \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2008] 硬币购物", "background": "", "description": "共有 $4$ 种硬币。面值分别为 $c_1,c_2,c_3,c_4$。\n\n某人去商店买东西，去了 $n$ 次，对于每次购买，他带了 $d_i$ 枚 $i$ 种硬币，想购买 $s$ 的价值的东西。请问每次有多少种付款方法。", "inputFormat": "输入的第一行是五个整数，分别代表 $c_1,c_2,c_3,c_4, n$。\n\n接下来 $n$ 行，每行有五个整数，描述一次购买，分别代表 $d_1, d_2, d_3, d_4,s$。", "outputFormat": "对于每次购买，输出一行一个整数代表答案。", "hint": "#### 数据规模与约定\n\n* 对于 $100\\%$ 的数据，保证 $1 \\leq c_i, d_i, s \\leq 10^5$，$1 \\leq n \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P1451", "type": "P", "difficulty": 2, "samples": [["4 10\n0234500067\n1034560500\n2045600671\n0000000089\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "求细胞数量", "background": "", "description": "一矩形阵列由数字 $0$ 到 $9$ 组成，数字 $1$ 到 $9$ 代表细胞，细胞的定义为沿细胞数字上下左右若还是细胞数字则为同一细胞，求给定矩形阵列的细胞个数。", "inputFormat": "第一行两个整数代表矩阵大小 $n$ 和 $m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的只含字符 `0` 到 `9` 的字符串，代表这个 $n \\times m$ 的矩阵。\n", "outputFormat": "一行一个整数代表细胞个数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\le n,m \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Count the Number of Cells", "background": "", "description": "A rectangular array consists of digits $0$ to $9$. Digits $1$ to $9$ denote cells. Two positions belong to the same cell if, moving up, down, left, or right through positions with cell digits, they are connected. Given the array, count the number of cells.", "inputFormat": "The first line contains two integers $n$ and $m$.\n\nThe next $n$ lines each contain a string of length $m$ consisting only of characters `0` to `9`, representing the $n \\times m$ matrix.", "outputFormat": "Output a single integer, the number of cells.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "求细胞数量", "background": "", "description": "一矩形阵列由数字 $0$ 到 $9$ 组成，数字 $1$ 到 $9$ 代表细胞，细胞的定义为沿细胞数字上下左右若还是细胞数字则为同一细胞，求给定矩形阵列的细胞个数。", "inputFormat": "第一行两个整数代表矩阵大小 $n$ 和 $m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的只含字符 `0` 到 `9` 的字符串，代表这个 $n \\times m$ 的矩阵。\n", "outputFormat": "一行一个整数代表细胞个数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\le n,m \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P1452", "type": "P", "difficulty": 6, "samples": [["4\n0 0\n0 1\n1 1\n1 0\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["计算几何", "2003", "USACO", "枚举", "凸包", "旋转卡壳", "模板题"], "title": "【模板】旋转卡壳 / [USACO03FALL] Beauty Contest G", "background": null, "description": "给定平面上 $n$ 个点，求凸包直径。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个点的坐标。保证所有点的坐标两两不同。", "outputFormat": "输出一行一个整数，表示答案的平方。", "hint": "### 数据范围  \n对于 $100\\%$ 的数据，$2\\le n\\le 5\\times 10^4$，$|x|,|y|\\le 10^4$。\n\n---\n\n$\\text{upd 2022.7.22}$：新增加四组 Hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Rotating Calipers / [USACO03FALL] Beauty Contest G", "background": "", "description": "Given $n$ points on the plane, find the diameter of the convex hull.", "inputFormat": "The first line contains a positive integer $n$.\nThe next $n$ lines each contain two integers $x, y$, representing the coordinates of a point. All point coordinates are pairwise distinct.", "outputFormat": "Output one line with a single integer, the square of the answer.", "hint": "### Constraints\nFor $100\\%$ of the testdata, $2 \\le n \\le 5 \\times 10^4$, $|x|, |y| \\le 10^4$.\n\n---\n\n$\\text{upd 2022.7.22}$: Four new Hack testdata have been added.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】旋转卡壳 / [USACO03FALL] Beauty Contest G", "background": null, "description": "给定平面上 $n$ 个点，求凸包直径。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个点的坐标。保证所有点的坐标两两不同。", "outputFormat": "输出一行一个整数，表示答案的平方。", "hint": "### 数据范围  \n对于 $100\\%$ 的数据，$2\\le n\\le 5\\times 10^4$，$|x|,|y|\\le 10^4$。\n\n---\n\n$\\text{upd 2022.7.22}$：新增加四组 Hack 数据。", "locale": "zh-CN"}}}
{"pid": "P1453", "type": "P", "difficulty": 5, "samples": [["4\n1 2 1 5\n0 1\n0 2\n1 2\n1 3\n2\n", "12.0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "图论", "树形 DP", "基环树"], "title": "城市环路", "background": "", "description": "一座城市，往往会被人们划分为几个区域，例如住宅区、商业区、工业区等等。\n\nB 市就被分为了以下的两个区域——城市中心和城市郊区。在这两个区域的中间是一条围绕 B 市的环路，环路之内便是 B 市中心。\n\n\n整个城市可以看做一个 $n$ 个点，$n$ 条边的单圈图（保证图连通），唯一的环便是绕城的环路。保证环上任意两点有且只有 $2$ 条简单路径互通。图中的其它部分皆隶属城市郊区。\n\n现在，有一位名叫 Jim 的同学想在 B 市开店，但是任意一条边的 $2$ 个点不能同时开店，每个点都有一定的人流量，第 $i$ 个点的人流量是 $p_i$，在该点开店的利润就等于 $p_i×k$，其中 $k$ 是一个常数。\n\nJim 想尽量多的赚取利润，请问他应该在哪些地方开店？\n", "inputFormat": "第一行一个整数 $n$，代表城市中点的个数。城市中的 $n$ 个点由 $0 \\sim n-1$ 编号。\n\n第二行有 $n$ 个整数，第 $(i + 1)$ 个整数表示第 $i$ 个点的人流量 $p_i$。\n\n接下来 $n$ 行，每行有两个整数 $u, v$，代表存在一条连接 $u$ 和 $v$ 的道路。\n\n最后一行有一个实数，代表常数 $k$。\n", "outputFormat": "输出一行一个实数代表答案，结果保留一位小数。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n \\leq 100$。\n- 另有 $20\\%$ 的数据，保证环上的点不超过 $2000$ 个。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq p_i \\leq 10^4$，$0 \\leq u, v < n$，$0 \\leq k \\leq 10^4$，$k$ 的小数点后最多有 $6$ 位数字。", "locale": "zh-CN", "translations": {"en": {"title": "City Ring Road", "background": "", "description": "A city is often divided into several zones, such as residential, commercial, and industrial.\n\nCity B is divided into two zones—the city center and the suburbs. Between these two zones lies a ring road encircling City B; the area inside the ring is the city center.\n\nThe whole city can be modeled as a connected unicyclic graph with $n$ vertices and $n$ edges. The unique cycle is the ring road. For any two vertices on the cycle, there are exactly $2$ simple paths between them. All other parts of the graph belong to the suburbs.\n\nJim wants to open shops in City B. However, the two endpoints of any edge cannot both have shops. Each vertex $i$ has a foot traffic $p_i$, and opening a shop at that vertex yields a profit of $p_i \\times k$, where $k$ is a constant.\n\nFind the maximum total profit Jim can earn.", "inputFormat": "- The first line contains an integer $n$, the number of vertices in the city. The $n$ vertices are numbered $0 \\sim n-1$.\n- The second line contains $n$ integers. The $(i + 1)$-th integer is $p_i$, the foot traffic of vertex $i$.\n- The next $n$ lines each contain two integers $u, v$, indicating that there is a road between $u$ and $v$.\n- The last line contains a real number, the constant $k$.", "outputFormat": "Output one line containing a real number representing the answer, rounded to one decimal place.", "hint": "#### Constraints\n\n- For $20\\%$ of the testdata, $n \\leq 100$.\n- For another $20\\%$ of the testdata, the number of vertices on the cycle does not exceed $2000$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 10^5$, $1 \\leq p_i \\leq 10^4$, $0 \\leq u, v < n$, $0 \\leq k \\leq 10^4$, and $k$ has at most $6$ digits after the decimal point.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "城市环路", "background": "", "description": "一座城市，往往会被人们划分为几个区域，例如住宅区、商业区、工业区等等。\n\nB 市就被分为了以下的两个区域——城市中心和城市郊区。在这两个区域的中间是一条围绕 B 市的环路，环路之内便是 B 市中心。\n\n\n整个城市可以看做一个 $n$ 个点，$n$ 条边的单圈图（保证图连通），唯一的环便是绕城的环路。保证环上任意两点有且只有 $2$ 条简单路径互通。图中的其它部分皆隶属城市郊区。\n\n现在，有一位名叫 Jim 的同学想在 B 市开店，但是任意一条边的 $2$ 个点不能同时开店，每个点都有一定的人流量，第 $i$ 个点的人流量是 $p_i$，在该点开店的利润就等于 $p_i×k$，其中 $k$ 是一个常数。\n\nJim 想尽量多的赚取利润，请问他应该在哪些地方开店？\n", "inputFormat": "第一行一个整数 $n$，代表城市中点的个数。城市中的 $n$ 个点由 $0 \\sim n-1$ 编号。\n\n第二行有 $n$ 个整数，第 $(i + 1)$ 个整数表示第 $i$ 个点的人流量 $p_i$。\n\n接下来 $n$ 行，每行有两个整数 $u, v$，代表存在一条连接 $u$ 和 $v$ 的道路。\n\n最后一行有一个实数，代表常数 $k$。\n", "outputFormat": "输出一行一个实数代表答案，结果保留一位小数。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n \\leq 100$。\n- 另有 $20\\%$ 的数据，保证环上的点不超过 $2000$ 个。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq p_i \\leq 10^4$，$0 \\leq u, v < n$，$0 \\leq k \\leq 10^4$，$k$ 的小数点后最多有 $6$ 位数字。", "locale": "zh-CN"}}}
{"pid": "P1454", "type": "P", "difficulty": 2, "samples": [["19 48\n------------------------------------------------\n---####-----#-----#----------------------####---\n--######----#-----#---------------------######--\n-########--#-#---#-#####--#-##-##---#--########-\n-###--###--#-#---#-#----#-##-##--#--#--###--###-\n-###--###--#--#-#--######-#--#---#-#---###--###-\n-########--#--#-#--#------#--#----##---########-\n--######---#---#---######-#--#-----#----######--\n---####----------------------------#-----####---\n----------------------------------#-------------\n------------------------------------------------\n---###--#--------#------#-----------------------\n--#---#-#---------------#-----------------------\n-#------#-##--#-##--##-###-#-##-###--###-#--##--\n-#------##--#-##-#-#----#--##--#---##---##-#----\n-#------#---#-#--#--#---#--#---#---##----#--#---\n--#---#-#---#-#--#---#--#--#---#---##---##---#--\n---###--#---#-#--#-##---#--#---#---#-###-#-##---\n------------------------------------------------", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "圣诞夜的极光", "background": "圣诞夜系列~~\n", "description": "圣诞老人回到了北极圣诞区，已经快到 12 点了。也就是说极光表演要开始了。这里的极光不是极地特有的自然极光景象。而是圣诞老人主持的人造极光。\n\n轰隆隆 …… 烟花响起（来自中国的浏阳花炮之乡）。接下来就是极光表演了。\n\n人造极光其实就是空中的一幅幅 $n\\times m$ 的点阵图像。只是因为特别明亮而吸引了很多很多小精灵的目光，也成为了圣诞夜最美丽的一刻。\n\n然而在每幅 $n \\times m$ 的点阵图像中，每一个点只有发光和不发光两种状态。对于所有的发光的点，在空中就形成了美丽的图画。而这个图画是以若干个（$s$ 个）图案组成的。对于图案，圣诞老人有着严格的定义：对于两个发光的点，如果他们的曼哈顿距离（对于 $A(x_1, y_1)$ 和 $B(x_2, y_2)$ ，$A$ 和 $B$ 之间的曼哈顿距离为 $|x_1-x_2|+|y_1-y_2|$ ）小于等于 $2$。那么这两个点就属于一个图案 …… 小精灵们一边欣赏着极光，一边数着每一幅极光图像中的图案数。伴着歌声和舞蹈，度过了美丽的圣诞之夜。^_^", "inputFormat": "第一行，两个数 $n$ 和 $m$ 。\n\n接下来一共 $n$ 行，每行 $m$ 个字符。对于第 $i$ 行第 $j$ 个字符，如果其为 `-`\n ，那么表示该点不发光，如果其为 `#` ，那么表示该点发光。不可能出现其他的字符。", "outputFormat": "第一行，一个数 $s$。\n", "hint": "$1 \\le n,m \\le 100$。\n\nDFS~~", "locale": "zh-CN", "translations": {"en": {"title": "Aurora on Christmas Night", "background": "Christmas Night series.", "description": "Santa Claus has returned to the Arctic Christmas Zone; it is almost 12 o'clock, which means the aurora show is about to begin. Here the aurora is not the natural polar lights but a man-made display directed by Santa.\n\nBoom... fireworks go off (from Liuyang, the hometown of fireworks in China). Then comes the aurora show.\n\nThe man-made aurora is actually a series of $n \\times m$ dot-matrix images in the sky. Each point has only two states: lit or unlit. The lit points together form beautiful pictures. Each picture consists of several (exactly $s$) “patterns”. Santa defines a “pattern” strictly as follows: view lit points as vertices of a graph where two lit points are adjacent if their Manhattan distance is at most $2$. For $A(x_1, y_1)$ and $B(x_2, y_2)$, the Manhattan distance between $A$ and $B$ is $|x_1 - x_2| + |y_1 - y_2|$. A “pattern” is a connected component of this graph. The elves watch the aurora and count the number of patterns in each image, singing and dancing through a beautiful Christmas night. ^_^", "inputFormat": "The first line contains two integers $n$ and $m$.\n\nThe next $n$ lines each contain $m$ characters. In the $i$-th line, the $j$-th character is `-` if the point is unlit, or `#` if the point is lit. No other characters appear.", "outputFormat": "Output one integer $s$ on a single line.", "hint": "Constraints: $1 \\le n, m \\le 100$.\n\nHint: DFS.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "圣诞夜的极光", "background": "圣诞夜系列~~\n", "description": "圣诞老人回到了北极圣诞区，已经快到 12 点了。也就是说极光表演要开始了。这里的极光不是极地特有的自然极光景象。而是圣诞老人主持的人造极光。\n\n轰隆隆 …… 烟花响起（来自中国的浏阳花炮之乡）。接下来就是极光表演了。\n\n人造极光其实就是空中的一幅幅 $n\\times m$ 的点阵图像。只是因为特别明亮而吸引了很多很多小精灵的目光，也成为了圣诞夜最美丽的一刻。\n\n然而在每幅 $n \\times m$ 的点阵图像中，每一个点只有发光和不发光两种状态。对于所有的发光的点，在空中就形成了美丽的图画。而这个图画是以若干个（$s$ 个）图案组成的。对于图案，圣诞老人有着严格的定义：对于两个发光的点，如果他们的曼哈顿距离（对于 $A(x_1, y_1)$ 和 $B(x_2, y_2)$ ，$A$ 和 $B$ 之间的曼哈顿距离为 $|x_1-x_2|+|y_1-y_2|$ ）小于等于 $2$。那么这两个点就属于一个图案 …… 小精灵们一边欣赏着极光，一边数着每一幅极光图像中的图案数。伴着歌声和舞蹈，度过了美丽的圣诞之夜。^_^", "inputFormat": "第一行，两个数 $n$ 和 $m$ 。\n\n接下来一共 $n$ 行，每行 $m$ 个字符。对于第 $i$ 行第 $j$ 个字符，如果其为 `-`\n ，那么表示该点不发光，如果其为 `#` ，那么表示该点发光。不可能出现其他的字符。", "outputFormat": "第一行，一个数 $s$。\n", "hint": "$1 \\le n,m \\le 100$。\n\nDFS~~", "locale": "zh-CN"}}}
{"pid": "P1455", "type": "P", "difficulty": 3, "samples": [["5 3 10\n3 10\n3 10\n3 10\n5 100\n10 1\n1 3\n3 2\n4 2\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["并查集", "背包 DP", "强连通分量"], "title": "搭配购买", "background": "", "description": "明天就是母亲节了，电脑组的小朋友们在忙碌的课业之余挖空心思想着该送什么礼物来表达自己的心意呢？听说在某个网站上有卖云朵的，小朋友们决定一同前往去看看这种神奇的商品，这个店里有 $n$ 朵云，云朵已经被老板编号为 $1,2,3,...,n$，并且每朵云都有一个价值，但是商店的老板是个很奇怪的人，他会告诉你一些云朵要搭配起来买才卖，也就是说买一朵云则与这朵云有搭配的云都要买，电脑组的你觉得这礼物实在是太新奇了，但是你的钱是有限的，所以你肯定是想用现有的钱买到尽量多价值的云。", "inputFormat": "第一行输入三个整数，$n,m,w$，表示有 $n$ 朵云，$m$ 个搭配和你现有的钱的数目。\n\n第二行至 $n+1$ 行，每行有两个整数， $c_i,d_i$，表示第 $i$ 朵云的价钱和价值。\n\n第 $n+2$ 至 $n+1+m$ 行 ，每行有两个整数 $u_i,v_i$。表示买第 $u_i$ 朵云就必须买第 $v_i$ 朵云,同理，如果买第 $v_i$ 朵就必须买第 $u_i$ 朵。", "outputFormat": "一行，表示可以获得的最大价值。", "hint": "- 对于 $30\\%$ 的数据，满足 $1 \\le n \\le 100$；\n- 对于 $50\\%$ 的数据，满足 $1 \\le n, w,c_i,d_i \\le 10^3$，$1 \\le m \\le 100$；\n- 对于 $100\\%$ 的数据，满足 $1 \\le n, w,c_i,d_i \\le 10^4$，$0 \\le m \\le 5 \\times 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "Bundled Purchase", "background": "", "description": "Mother's Day is tomorrow, and the kids in the computer club are racking their brains about what gift to give to express their feelings. They heard that a certain website sells clouds, so they decided to check out this magical product together. The store has $n$ clouds, labeled $1,2,3,...,n$, and each cloud has a value. However, the shop owner is a peculiar person: he will tell you that some clouds must be bought together as a bundle. In other words, if you buy one cloud, then all clouds paired with it must also be bought. You find this gift idea very novel, but your money is limited, so you want to use your budget to buy clouds with the maximum total value.", "inputFormat": "- The first line contains three integers $n,m,w$, meaning there are $n$ clouds, $m$ bundling relations, and your current amount of money $w$.\n- From the second line to line $n+1$, each line contains two integers $c_i,d_i$, representing the price and value of the $i$-th cloud.\n- From line $n+2$ to line $n+1+m$, each line contains two integers $u_i,v_i$, meaning if you buy cloud $u_i$, you must also buy cloud $v_i$. Similarly, if you buy cloud $v_i$, you must also buy cloud $u_i$.", "outputFormat": "Output one line: the maximum total value you can obtain.", "hint": "Constraints:\n- For $30\\%$ of the testdata, $1 \\le n \\le 100$.\n- For $50\\%$ of the testdata, $1 \\le n, w \\le 10^3$, $1 \\le m \\le 100$.\n- For $100\\%$ of the testdata, $1 \\le n, w \\le 10^4$, $0 \\le m \\le 5 \\times 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "搭配购买", "background": "", "description": "明天就是母亲节了，电脑组的小朋友们在忙碌的课业之余挖空心思想着该送什么礼物来表达自己的心意呢？听说在某个网站上有卖云朵的，小朋友们决定一同前往去看看这种神奇的商品，这个店里有 $n$ 朵云，云朵已经被老板编号为 $1,2,3,...,n$，并且每朵云都有一个价值，但是商店的老板是个很奇怪的人，他会告诉你一些云朵要搭配起来买才卖，也就是说买一朵云则与这朵云有搭配的云都要买，电脑组的你觉得这礼物实在是太新奇了，但是你的钱是有限的，所以你肯定是想用现有的钱买到尽量多价值的云。", "inputFormat": "第一行输入三个整数，$n,m,w$，表示有 $n$ 朵云，$m$ 个搭配和你现有的钱的数目。\n\n第二行至 $n+1$ 行，每行有两个整数， $c_i,d_i$，表示第 $i$ 朵云的价钱和价值。\n\n第 $n+2$ 至 $n+1+m$ 行 ，每行有两个整数 $u_i,v_i$。表示买第 $u_i$ 朵云就必须买第 $v_i$ 朵云,同理，如果买第 $v_i$ 朵就必须买第 $u_i$ 朵。", "outputFormat": "一行，表示可以获得的最大价值。", "hint": "- 对于 $30\\%$ 的数据，满足 $1 \\le n \\le 100$；\n- 对于 $50\\%$ 的数据，满足 $1 \\le n, w,c_i,d_i \\le 10^3$，$1 \\le m \\le 100$；\n- 对于 $100\\%$ 的数据，满足 $1 \\le n, w,c_i,d_i \\le 10^4$，$0 \\le m \\le 5 \\times 10^3$。", "locale": "zh-CN"}}}
{"pid": "P1456", "type": "P", "difficulty": 5, "samples": [["5\n20\n16\n10\n10\n4\n5\n2 3\n3 4\n3 5\n4 5\n1 5\n", "8\n5\n5\n-1\n10\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["可并堆", "启发式合并"], "title": "Monkey King", "background": "", "description": "Once in a forest, there lived N aggressive monkeys. At the beginning, they each does things in its own way and none of them knows each other. But monkeys can't avoid quarrelling, and it only happens between two monkeys who does not know each other. And when it happens, both the two monkeys will invite the strongest friend of them, and duel. Of course, after the duel, the two monkeys and all of their friends will know each other, and the quarrel above will no longer happen among these monkeys even if they have ever conflicted.\n\n\nAssume that every money has a strongness value, which will be reduced to only half of the original after a duel(that is, 10 will be reduced to 5 and 5 will be reduced to 2).\n\n\nAnd we also assume that every monkey knows himself. That is, when he is the strongest one in all of his friends, he himself will go to duel.", "inputFormat": "There are several test cases, and each case consists of two parts.\n\n\nFirst part: The first line contains an integer N(N<=100,000), which indicates the number of monkeys. And then N lines follows. There is one number on each line, indicating the strongness value of ith monkey(<=32768).\n\n\nSecond part: The first line contains an integer M(M<=100,000), which indicates there are M conflicts happened. And then M lines follows, each line of which contains two integers x and y, indicating that there is a conflict between the Xth monkey and Yth.", "outputFormat": "For each of the conflict, output -1 if the two monkeys know each other, otherwise output the strength value of the strongest monkey among all of its friends after the duel.", "hint": "题目可能有多组数据\n\n题目来源 ZOJ 3rd Anniversary Contest", "locale": "en", "translations": {"en": {"title": "Monkey King", "background": "", "description": "Once in a forest, there lived N aggressive monkeys. At the beginning, they each does things in its own way and none of them knows each other. But monkeys can't avoid quarrelling, and it only happens between two monkeys who does not know each other. And when it happens, both the two monkeys will invite the strongest friend of them, and duel. Of course, after the duel, the two monkeys and all of their friends will know each other, and the quarrel above will no longer happen among these monkeys even if they have ever conflicted.\n\n\nAssume that every money has a strongness value, which will be reduced to only half of the original after a duel(that is, 10 will be reduced to 5 and 5 will be reduced to 2).\n\n\nAnd we also assume that every monkey knows himself. That is, when he is the strongest one in all of his friends, he himself will go to duel.", "inputFormat": "There are several test cases, and each case consists of two parts.\n\n\nFirst part: The first line contains an integer N(N<=100,000), which indicates the number of monkeys. And then N lines follows. There is one number on each line, indicating the strongness value of ith monkey(<=32768).\n\n\nSecond part: The first line contains an integer M(M<=100,000), which indicates there are M conflicts happened. And then M lines follows, each line of which contains two integers x and y, indicating that there is a conflict between the Xth monkey and Yth.", "outputFormat": "For each of the conflict, output -1 if the two monkeys know each other, otherwise output the strength value of the strongest monkey among all of its friends after the duel.", "hint": "题目可能有多组数据\n\n题目来源 ZOJ 3rd Anniversary Contest", "locale": "en"}, "zh-CN": {"title": "Monkey King", "background": "", "description": "曾经在一个森林中居住着 $N$ 只好斗的猴子。在最初他们我行我素，互不认识。但是猴子们不能避免争吵，且两只猴子只会在不认识对方时发生争吵，当争吵发生时，双方会邀请它们各自最强壮的朋友并发起决斗（决斗的为各自最强壮的朋友）。当然，在决斗之后两只猴子和他们各自的伙伴都认识对方了（成为朋友），虽然他们曾经有过冲突，但是他们之间绝不会再发生争吵了。\n\n假设每只猴子有一个强壮值，强壮值将在一场决斗后减少为原先的一半（例如  $10$ 会减少到  $5$，而  $5$ 会减少到  $2$，即向下取整）。\n\n我们也假设每只猴子都认识它自己（是自己的朋友）。即当他是他朋友中最强壮的，他自己就会去决斗。", "inputFormat": "有多组数据，每一组数据有两部分。\n\n第一部分：第一行包含一个整数 $N$ 表示猴子的数量。后为 $N$ 行，每行一个数字为第 $i$ 只猴子的强壮值  $s_{i}$。\n\n第二部分：第一行包含一个整数 $M$ 表示发生了 $M$ 次冲突。后为 $M$ 行，每行两个整数 $x$ 和 $y$，表示第 $x$ 只猴子和第 $y$ 只猴子之间发生了冲突。", "outputFormat": "对于每次冲突，如果两只猴子认识对方，输出 `-1`，否则输出决斗后他们朋友中最强壮的猴子的强壮值。", "hint": "$N,M\\leq 100000$，$s_{i}\\leq 32768$", "locale": "zh-CN"}}}
{"pid": "P1457", "type": "P", "difficulty": 3, "samples": [["7 4\n11 6 11 6 3 10 6\n7 9 6 13 5 15 5\n1 10 12 7 13 7 5\n13 11 10 8 10 12 13", "5\n9\n16\n4 1 E"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "USACO", "枚举", "连通块"], "title": "[USACO2.1] 城堡 The Castle", "background": "我们憨厚的 USACO 主人公农夫约翰（Farmer John）以无法想象的运气,在他生日那天收到了一份特别的礼物：一张“幸运爱尔兰”（一种彩票）。结果这张彩票让他获得了这次比赛唯一的奖品——坐落于爱尔兰郊外的一座梦幻般的城堡！", "description": "喜欢吹嘘的农夫约翰立刻回到有着吹嘘传统的威斯康辛老家开始吹嘘了, 农夫约翰想要告诉他的奶牛们关于他城堡的一切。他需要做一些吹嘘前的准备工作：比如说知道城堡有多少个房间，每个房间有多大。  \n\n另外，农夫约翰想要把一面单独的墙（指两个单位间的墙）拆掉以形成一个更大的房间。 你的工作就是帮农夫约翰做以上的准备，算出房间数与房间的大小。\n\n城堡的平面图被划分成 $n \\times m$ 个正方形的单位，一个这样的单位可以有 $0 \\sim 4 $ 面墙环绕。城堡周围一定有外墙环绕以遮风挡雨。（就是说平面图的四周一定是墙。）\n\n请仔细研究下面这个有注解的城堡平面图：\n\n```plain\n     1   2   3   4   5   6   7\n   #############################\n 1 #   |   #   |   #   |   |   #\n   #####---#####---#---#####---#\n 2 #   #   |   #   #   #   #   #\n   #---#####---#####---#####---#\n 3 #   |   |   #   #   #   #   #\n   #---#########---#####---#---#\n 4 # ->#   |   |   |   |   #   #\n   #############################\n```\n\n- $\\verb!#!$ 表示墙壁；\n- $\\verb!|!$ 和 $\\verb!-!$ 表示没有墙壁；\n- $\\verb!->!$ 指向了一面墙，移除了这面墙我们就有一间最大的新房间。\n\n友情提示，这个城堡的平面图是 $4 \\times 7$ 个单位的。一个“房间”的是平面图中一个由 `#`、`-`、`|` 围成的格子（就是图里面的那一个个的格子）。比如说这个样例就有 $5$ 个房间。（大小分别为 $9,7,3,1,8$ 个单位（排名不分先后））\n\n移去箭头所指的那面墙，可以使 $2$ 个房间合为一个新房间，且比移去其他墙所形成的房间都大。\n\n城堡保证至少有 $2$ 个房间，而且一定有一面墙可以被移走。\n", "inputFormat": "第一行两个正整数 $m,n$，表示城堡有 $n$ 行 $m$ 列。 \n\n每一个单位的数字告诉我们这个单位的东西南北是否有墙存在。每个数字是由以下四个整数中的任意个加起来的。\n\n$1$: 在西面有墙\n\n$2$: 在北面有墙\n\n$4$: 在东面有墙\n\n$8$: 在南面有墙\n\n城堡内部的墙会被规定两次。比如说 $(1,1)$ 南面的墙，亦会被标记为 $(2,1)$ 北面的墙。\n", "outputFormat": "输出包含如下四行:\n\n第一行：城堡的房间数目。\n\n第二行：最大的房间的大小\n\n第三行：移除一面墙能得到的最大的房间的大小\n\n第四行：移除哪面墙可以得到面积最大的新房间。\n\n选择最佳的墙来推倒。有多解时选最靠西的，仍然有多解时选最靠南的。同一格子北边的墙比东边的墙更优先。\n\n用该墙的南邻单位的北墙或西邻单位的东墙来表示这面墙，方法是输出邻近单位的行数、列数和墙的方位（ `N`（北）或者 `E`（东））。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n,m \\le 50$。\n\nUSACO 2.1\n\n翻译来自NOCOW\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.1] The Castle", "background": "Our honest USACO protagonist, Farmer John, received a special birthday gift with unbelievable luck: a “Lucky Ireland” lottery ticket. It won him the only prize of the contest — a dreamlike castle located in the Irish countryside!", "description": "Boastful Farmer John immediately returned to his hometown in Wisconsin, where boasting is a tradition, to brag about everything regarding his castle. He needs to prepare before boasting: for example, how many rooms the castle has and how large each room is.\n\nIn addition, Farmer John wants to remove a single wall (a wall between two unit squares) to form a larger room. Your job is to help him prepare by computing the number of rooms and the size of each room.\n\nThe castle floor plan is divided into $n \\times m$ unit squares. Each unit square may have $0 \\sim 4$ surrounding walls. The entire castle is enclosed by exterior walls to keep out wind and rain. (That is, the outer boundary of the floor plan is certainly walled.)\n\nPlease study carefully the annotated floor plan of a castle below:\n\n```plain\n     1   2   3   4   5   6   7\n   #############################\n 1 #   |   #   |   #   |   |   #\n   #####---#####---#---#####---#\n 2 #   #   |   #   #   #   #   #\n   #---#####---#####---#####---#\n 3 #   |   |   #   #   #   #   #\n   #---#########---#####---#---#\n 4 # ->#   |   |   |   |   #   #\n   #############################\n```\n\n- $\\verb!#!$ denotes a wall.\n- $\\verb!|!$ and $\\verb!-!$ denote the absence of a wall.\n- $\\verb!->!$ points to a wall; removing this wall yields the largest possible new room.\n\nA friendly reminder: this castle floor plan has $4 \\times 7$ unit squares. A “room” is a maximal set of unit squares connected through openings (i.e., adjacent squares without a wall between them). For example, this sample has $5$ rooms (with sizes $9,7,3,1,8$ units, in no particular order).\n\nRemoving the wall indicated by the arrow merges $2$ rooms into one new room that is larger than any room obtained by removing any other single wall.\n\nThe castle is guaranteed to have at least $2$ rooms, and there is always at least one wall that can be removed.", "inputFormat": "The first line contains two positive integers $m,n$, meaning the castle has $n$ rows and $m$ columns.\n\nThe next $n$ lines each contain $m$ integers. Each integer for a unit square tells whether there are walls to its west, north, east, and south. Each number is the sum of any subset of the following four integers:\n\n$1$: a wall to the west.\n\n$2$: a wall to the north.\n\n$4$: a wall to the east.\n\n$8$: a wall to the south.\n\nInterior walls are specified twice. For example, the south wall of $(1,1)$ is also specified as the north wall of $(2,1)$.", "outputFormat": "Output four lines:\n\n- The first line: the number of rooms in the castle.\n- The second line: the size of the largest room.\n- The third line: the largest room size obtainable by removing one wall.\n- The fourth line: which wall to remove to obtain the largest possible new room.\n\nChoose the best wall to remove. If there are multiple choices, pick the westernmost one. If there is still a tie, pick the southernmost one. For the same cell, prefer the north wall over the east wall.\n\nRepresent the wall by outputting the row number, column number, and the wall’s direction ($N$ for north or $E$ for east). That is, identify a wall by the cell whose north or east wall is to be removed.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n,m \\le 50$.\n\nUSACO 2.1\n\nTranslated from NOCOW.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.1] 城堡 The Castle", "background": "我们憨厚的 USACO 主人公农夫约翰（Farmer John）以无法想象的运气,在他生日那天收到了一份特别的礼物：一张“幸运爱尔兰”（一种彩票）。结果这张彩票让他获得了这次比赛唯一的奖品——坐落于爱尔兰郊外的一座梦幻般的城堡！", "description": "喜欢吹嘘的农夫约翰立刻回到有着吹嘘传统的威斯康辛老家开始吹嘘了, 农夫约翰想要告诉他的奶牛们关于他城堡的一切。他需要做一些吹嘘前的准备工作：比如说知道城堡有多少个房间，每个房间有多大。  \n\n另外，农夫约翰想要把一面单独的墙（指两个单位间的墙）拆掉以形成一个更大的房间。 你的工作就是帮农夫约翰做以上的准备，算出房间数与房间的大小。\n\n城堡的平面图被划分成 $n \\times m$ 个正方形的单位，一个这样的单位可以有 $0 \\sim 4 $ 面墙环绕。城堡周围一定有外墙环绕以遮风挡雨。（就是说平面图的四周一定是墙。）\n\n请仔细研究下面这个有注解的城堡平面图：\n\n```plain\n     1   2   3   4   5   6   7\n   #############################\n 1 #   |   #   |   #   |   |   #\n   #####---#####---#---#####---#\n 2 #   #   |   #   #   #   #   #\n   #---#####---#####---#####---#\n 3 #   |   |   #   #   #   #   #\n   #---#########---#####---#---#\n 4 # ->#   |   |   |   |   #   #\n   #############################\n```\n\n- $\\verb!#!$ 表示墙壁；\n- $\\verb!|!$ 和 $\\verb!-!$ 表示没有墙壁；\n- $\\verb!->!$ 指向了一面墙，移除了这面墙我们就有一间最大的新房间。\n\n友情提示，这个城堡的平面图是 $4 \\times 7$ 个单位的。一个“房间”的是平面图中一个由 `#`、`-`、`|` 围成的格子（就是图里面的那一个个的格子）。比如说这个样例就有 $5$ 个房间。（大小分别为 $9,7,3,1,8$ 个单位（排名不分先后））\n\n移去箭头所指的那面墙，可以使 $2$ 个房间合为一个新房间，且比移去其他墙所形成的房间都大。\n\n城堡保证至少有 $2$ 个房间，而且一定有一面墙可以被移走。\n", "inputFormat": "第一行两个正整数 $m,n$，表示城堡有 $n$ 行 $m$ 列。 \n\n每一个单位的数字告诉我们这个单位的东西南北是否有墙存在。每个数字是由以下四个整数中的任意个加起来的。\n\n$1$: 在西面有墙\n\n$2$: 在北面有墙\n\n$4$: 在东面有墙\n\n$8$: 在南面有墙\n\n城堡内部的墙会被规定两次。比如说 $(1,1)$ 南面的墙，亦会被标记为 $(2,1)$ 北面的墙。\n", "outputFormat": "输出包含如下四行:\n\n第一行：城堡的房间数目。\n\n第二行：最大的房间的大小\n\n第三行：移除一面墙能得到的最大的房间的大小\n\n第四行：移除哪面墙可以得到面积最大的新房间。\n\n选择最佳的墙来推倒。有多解时选最靠西的，仍然有多解时选最靠南的。同一格子北边的墙比东边的墙更优先。\n\n用该墙的南邻单位的北墙或西邻单位的东墙来表示这面墙，方法是输出邻近单位的行数、列数和墙的方位（ `N`（北）或者 `E`（东））。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n,m \\le 50$。\n\nUSACO 2.1\n\n翻译来自NOCOW\n", "locale": "zh-CN"}}}
{"pid": "P1458", "type": "P", "difficulty": 2, "samples": [["5\n", "0/1\n1/5\n1/4\n1/3\n2/5\n1/2\n3/5\n2/3\n3/4\n4/5\n1/1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "数学", "USACO", "枚举", "排序"], "title": "[USACO2.1] 顺序的分数 Ordered Fractions", "background": "", "description": "输入一个自然数 $n$，对于一个最简分数 $a/b$（分子和分母互质的分数），满足 $1 \\le b \\le n,0 \\le a/b \\le 1$，请找出所有满足条件的分数。\n\n这有一个例子，当 $n=5$ 时，所有解为：\n\n$$\\frac01,\\frac15,\\frac14,\\frac13,\\frac25,\\frac12,\\frac35,\\frac23,\\frac34 ,\\frac45,\\frac11$$\n\n给定一个自然数 $n$，请编程按分数值递增的顺序输出所有解。\n \n注：   \n1、$0$ 和任意自然数的最大公约数就是那个自然数。    \n2、互质指最大公约数等于1的两个自然数。\n", "inputFormat": "单独的一行一个自然数 $n$\n", "outputFormat": "每个分数单独占一行，按照大小次序排列\n", "hint": "【数据范围】    \n对于 $100\\%$ 的数据，$1\\le n \\le 160$。\n\nUSACO 2.1\n\n翻译来自NOCOW\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.1] Ordered Fractions", "background": "", "description": "Input a natural number $n$. For a reduced fraction $a/b$ (a fraction whose numerator and denominator are coprime) that satisfies $1 \\le b \\le n, 0 \\le a/b \\le 1$, find all fractions meeting the conditions.\n\nHere is an example. When $n=5$, all solutions are:\n\n$$\\frac01,\\frac15,\\frac14,\\frac13,\\frac25,\\frac12,\\frac35,\\frac23,\\frac34 ,\\frac45,\\frac11$$\n\nGiven a natural number $n$, write a program to output all solutions in increasing order of their values.\n\nNote:\n1. The greatest common divisor of $0$ and any natural number is that natural number.\n2. “Coprime” means the greatest common divisor of the two natural numbers equals $1$.", "inputFormat": "A single line containing a natural number $n$.", "outputFormat": "Each fraction occupies one line, in increasing order.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 160$.\n\nUSACO 2.1\n\nTranslation from NOCOW.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.1] 顺序的分数 Ordered Fractions", "background": "", "description": "输入一个自然数 $n$，对于一个最简分数 $a/b$（分子和分母互质的分数），满足 $1 \\le b \\le n,0 \\le a/b \\le 1$，请找出所有满足条件的分数。\n\n这有一个例子，当 $n=5$ 时，所有解为：\n\n$$\\frac01,\\frac15,\\frac14,\\frac13,\\frac25,\\frac12,\\frac35,\\frac23,\\frac34 ,\\frac45,\\frac11$$\n\n给定一个自然数 $n$，请编程按分数值递增的顺序输出所有解。\n \n注：   \n1、$0$ 和任意自然数的最大公约数就是那个自然数。    \n2、互质指最大公约数等于1的两个自然数。\n", "inputFormat": "单独的一行一个自然数 $n$\n", "outputFormat": "每个分数单独占一行，按照大小次序排列\n", "hint": "【数据范围】    \n对于 $100\\%$ 的数据，$1\\le n \\le 160$。\n\nUSACO 2.1\n\n翻译来自NOCOW\n", "locale": "zh-CN"}}}
{"pid": "P1459", "type": "P", "difficulty": 2, "samples": [["9\n2\n2\n1\n3\n3\n3\n2\n3\n1", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "USACO", "IOI", "排序", "1996"], "title": "[IOI 1996 / USACO2.1] 三值的排序 Sorting a Three-Valued Sequence", "background": null, "description": "排序是一种很频繁的计算任务。现在考虑最多只有三值的排序问题。一个实际的例子是，当我们给某项竞赛的优胜者按金银铜牌排序的时候。在这个任务中可能的值只有三种 $1,2,3$。我们用交换的方法把他排成升序的。\n\n写一个程序计算出，给定的一个 $1,2,3$ 组成的数字序列，排成升序所需的最少交换次数。", "inputFormat": "第一行一个正整数 $n$，表示奖牌个数。\n\n接下来 $n$ 行，每行一个 $[1,3]$ 内的整数，表示奖牌。", "outputFormat": "输出一行一个整数，表示排成升序所需的最少交换次数。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 1000$。\n\n翻译来自 NOCOW。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 1996 / USACO2.1] Sorting a Three-Valued Sequence", "background": "", "description": "Sorting is a frequent computational task. Now consider sorting when there are at most three possible values. A practical example is ranking winners of a competition by gold, silver, and bronze medals. In this task, the possible values are only $1,2,3$. We use swaps to arrange the sequence in ascending order.\n\nWrite a program to compute the minimum number of swaps needed to sort a given sequence consisting only of $1,2,3$ into ascending order.", "inputFormat": "The first line contains a positive integer $n$, the number of medals.\n\nEach of the next $n$ lines contains an integer in $[1,3]$, representing a medal.", "outputFormat": "Output a single integer, the minimum number of swaps needed to sort the sequence in ascending order.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 1996 / USACO2.1] 三值的排序 Sorting a Three-Valued Sequence", "background": null, "description": "排序是一种很频繁的计算任务。现在考虑最多只有三值的排序问题。一个实际的例子是，当我们给某项竞赛的优胜者按金银铜牌排序的时候。在这个任务中可能的值只有三种 $1,2,3$。我们用交换的方法把他排成升序的。\n\n写一个程序计算出，给定的一个 $1,2,3$ 组成的数字序列，排成升序所需的最少交换次数。", "inputFormat": "第一行一个正整数 $n$，表示奖牌个数。\n\n接下来 $n$ 行，每行一个 $[1,3]$ 内的整数，表示奖牌。", "outputFormat": "输出一行一个整数，表示排成升序所需的最少交换次数。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 1000$。\n\n翻译来自 NOCOW。", "locale": "zh-CN"}}}
{"pid": "P1460", "type": "P", "difficulty": 2, "samples": [["4\n100 200 300 400\n3\n50  50  50  50\n200 300 200 300\n900 150 389 399", "2 1 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "USACO", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "[USACO2.1] 健康的荷斯坦奶牛 Healthy Holsteins", "background": "", "description": "农民 John 以拥有世界上最健康的奶牛为傲。他知道每种饲料中所包含的牛所需的最低的维他命量是多少。请你帮助农夫喂养他的牛，以保持它们的健康，使喂给牛的饲料的种数最少。\n\n给出牛所需的最低的维他命量，输出喂给牛需要哪些种类的饲料，且所需的饲料剂量最少。\n\n维他命量以整数表示，每种饲料最多只能对牛使用一次，数据保证存在解。\n", "inputFormat": "第一行一个整数 $v$，表示需要的维他命的种类数。  \n第二行 $v$ 个整数，表示牛每天需要的每种维他命的最小量。\n\n第三行一个整数 $g$，表示可用来喂牛的饲料的种数。   \n下面 $g$ 行，第 $n$ 行表示编号为 $n$ 饲料包含的各种维他命的量的多少。\n", "outputFormat": "输出文件只有一行，包括牛必需的最小的饲料种数 $p$；后面有 $p$ 个数，表示所选择的饲料编号（按从小到大排列）。\n\n如果有多个解，输出饲料序号最小的（即字典序最小）。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le v \\le 25$，$1\\le g \\le 15$。  \n输入的所有整数在 $[1,1000]$ 范围内。\n\nUSACO 2.1\n\n翻译来自NOCOW\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.1] Healthy Holsteins", "background": "", "description": "Farmer John prides himself on having the healthiest cows in the world. He knows the minimum amount of each vitamin that the cows need from different feeds. Please help him feed his cows to keep them healthy while minimizing the number of feed types used.\n\nGiven the cows’ minimum vitamin requirements, output which types of feed to use so that the total number of feeds is minimized.\n\nVitamin amounts are integers. Each type of feed can be used at most once. It is guaranteed that a solution exists.", "inputFormat": "The first line contains an integer $v$, the number of vitamin types required.\nThe second line contains $v$ integers, the minimum daily amount required for each vitamin.\n\nThe third line contains an integer $g$, the number of available feed types.\nEach of the next $g$ lines contains $v$ integers; the $n$-th of these lines gives the amounts of each vitamin contained in feed number $n$.", "outputFormat": "Output a single line containing the minimum number of feed types $p$, followed by $p$ integers: the chosen feed indices in increasing order.\n\nIf there are multiple solutions, output the one with the smallest sequence of feed indices (i.e., lexicographically smallest).", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1\\le v \\le 25$, $1\\le g \\le 15$.  \nAll integers in the input are in the range $[1,1000]$.\n\nUSACO 2.1\n\nTranslation from NOCOW.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.1] 健康的荷斯坦奶牛 Healthy Holsteins", "background": "", "description": "农民 John 以拥有世界上最健康的奶牛为傲。他知道每种饲料中所包含的牛所需的最低的维他命量是多少。请你帮助农夫喂养他的牛，以保持它们的健康，使喂给牛的饲料的种数最少。\n\n给出牛所需的最低的维他命量，输出喂给牛需要哪些种类的饲料，且所需的饲料剂量最少。\n\n维他命量以整数表示，每种饲料最多只能对牛使用一次，数据保证存在解。\n", "inputFormat": "第一行一个整数 $v$，表示需要的维他命的种类数。  \n第二行 $v$ 个整数，表示牛每天需要的每种维他命的最小量。\n\n第三行一个整数 $g$，表示可用来喂牛的饲料的种数。   \n下面 $g$ 行，第 $n$ 行表示编号为 $n$ 饲料包含的各种维他命的量的多少。\n", "outputFormat": "输出文件只有一行，包括牛必需的最小的饲料种数 $p$；后面有 $p$ 个数，表示所选择的饲料编号（按从小到大排列）。\n\n如果有多个解，输出饲料序号最小的（即字典序最小）。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le v \\le 25$，$1\\le g \\le 15$。  \n输入的所有整数在 $[1,1000]$ 范围内。\n\nUSACO 2.1\n\n翻译来自NOCOW\n", "locale": "zh-CN"}}}
{"pid": "P1461", "type": "P", "difficulty": 3, "samples": [["16 7 3", "0 7 25 30 42 45 51 52 75 76\n82 85 97 102 120 127"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "USACO", "进制", "位运算"], "title": "[USACO2.1] 海明码 Hamming Codes", "background": null, "description": "给出 $n,b,d$，要求找出 $n$ 个由 $0,1$ 组成的编码，每个编码有 $b$ 位，使得两两编码之间至少有 $d$ 个单位的 **Hamming 距离**。 \n\n**Hamming 距离**是指两个二进制编码中的不同二进制位的数目。例如，编码 `0101 0101 0100` 和 `0010 0011 0100` 之间的 **Hamming 距离**是 $5$：\n\n```plain\n0101 0101 0100\n0010 0011 0100\n ^^^  ^^       \n```", "inputFormat": "一行三个整数 $n,b,d$。", "outputFormat": "输出字典序最小的解（$n$ 个编码同样也要升序输出），每输出 $10$ 个编码换一行。\n\n你需要先将每个编码当成二进制数，再将其转成十进制数输出。", "hint": "对于 $100\\%$ 的数据，$1\\le n \\le 64$，$1\\le b \\le 8$，$1\\le d \\le 7$。\n\n**请注意：题目中只要求 Hamming 距离至少为 $\\bm d$，因此也可以大于 $\\bm d$。**\n\nUSACO 2.1\n\n翻译来自NOCOW", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.1] Hamming Codes", "background": "", "description": "Given $n,b,d$, find $n$ binary codewords consisting of 0 and 1, each with $b$ bits, such that the Hamming distance between every pair of codewords is at least $d$.\n\nThe Hamming distance is the number of differing bit positions between two binary codewords. For example, the Hamming distance between `0101 0101 0100` and `0010 0011 0100` is $5$:\n\n```plain\n0101 0101 0100\n0010 0011 0100\n ^^^  ^^       \n```", "inputFormat": "One line containing three integers $n,b,d$.", "outputFormat": "Output the lexicographically smallest solution (the $n$ codewords must also be printed in ascending order). Print a newline after every $10$ codewords.\n\nYou should first treat each codeword as a binary number, then convert it to a decimal number for output.", "hint": "Constraints: For $100\\%$ of the testdata, $1\\le n \\le 64$, $1\\le b \\le 8$, $1\\le d \\le 7$.\n\nPlease note: the problem only requires the Hamming distance to be at least $\\bm d$, so it may also be greater than $\\bm d$.\n\nUSACO 2.1\n\nTranslation from NOCOW\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.1] 海明码 Hamming Codes", "background": null, "description": "给出 $n,b,d$，要求找出 $n$ 个由 $0,1$ 组成的编码，每个编码有 $b$ 位，使得两两编码之间至少有 $d$ 个单位的 **Hamming 距离**。 \n\n**Hamming 距离**是指两个二进制编码中的不同二进制位的数目。例如，编码 `0101 0101 0100` 和 `0010 0011 0100` 之间的 **Hamming 距离**是 $5$：\n\n```plain\n0101 0101 0100\n0010 0011 0100\n ^^^  ^^       \n```", "inputFormat": "一行三个整数 $n,b,d$。", "outputFormat": "输出字典序最小的解（$n$ 个编码同样也要升序输出），每输出 $10$ 个编码换一行。\n\n你需要先将每个编码当成二进制数，再将其转成十进制数输出。", "hint": "对于 $100\\%$ 的数据，$1\\le n \\le 64$，$1\\le b \\le 8$，$1\\le d \\le 7$。\n\n**请注意：题目中只要求 Hamming 距离至少为 $\\bm d$，因此也可以大于 $\\bm d$。**\n\nUSACO 2.1\n\n翻译来自NOCOW", "locale": "zh-CN"}}}
{"pid": "P1462", "type": "P", "difficulty": 4, "samples": [["4 4 8\n8\n5\n6\n10\n2 1 2\n2 4 1\n1 3 4\n3 4 3\n", "10\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "二分", "洛谷原创", "最短路"], "title": "通往奥格瑞玛的道路", "background": "在艾泽拉斯大陆上有一位名叫歪嘴哦的神奇术士，他是部落的中坚力量。\n\n有一天他醒来后发现自己居然到了联盟的主城暴风城。\n\n在被众多联盟的士兵攻击后，他决定逃回自己的家乡奥格瑞玛。", "description": "在艾泽拉斯，有 $n$ 个城市。编号为 $1,2,3,\\ldots,n$。\n\n城市之间有 $m$ 条双向的公路，连接着两个城市，从某个城市到另一个城市，会遭到联盟的攻击，进而损失一定的血量。\n\n每次经过一个城市，都会被收取一定的过路费（包括起点和终点）。路上并没有收费站。\n\n假设 $1$ 为暴风城，$n$ 为奥格瑞玛，而他的血量最多为 $b$，出发时他的血量是满的。如果他的血量降低至负数，则他就无法到达奥格瑞玛。\n\n歪嘴哦不希望花很多钱，他想知道，在所有可以到达奥格瑞玛的道路中，对于每条道路所经过的城市单次收费的最大值，其最小值为多少。", "inputFormat": "第一行 $3$ 个正整数，$n,m,b$。分别表示有 $n$ 个城市，$m$ 条公路，歪嘴哦的血量为 $b$。\n\n接下来有 $n$ 行，每行 $1$ 个非负整数，$f_i$。表示经过城市 $i$，需要交费 $f_i$ 元。\n\n再接下来有 $m$ 行，每行 $3$ 个正整数，$a_i,b_i,c_i$（$1\\leq a_i,b_i\\leq n$）。表示城市 $a_i$ 和城市 $b_i$ 之间有一条公路，如果从城市 $a_i$ 到城市 $b_i$，或者从城市 $b_i$ 到城市 $a_i$，会损失 $c_i$ 的血量。", "outputFormat": "仅一个整数，表示歪嘴哦经过城市单次交费最大值的最小值。\n\n如果他无法到达奥格瑞玛，输出 `AFK`。", "hint": "对于 $60\\%$ 的数据，满足 $n\\leq 200$，$m\\leq 10^4$，$b\\leq 200$；\n\n对于 $100\\%$ 的数据，满足 $1\\leq n\\leq 10^4$，$1\\leq m\\leq 5\\times 10^4$，$1\\leq b\\leq 10^9$；\n\n对于 $100\\%$ 的数据，满足 $1\\leq c_i\\leq 10^9$，$0\\leq f_i\\leq 10^9$，可能有两条边连接着相同的城市。", "locale": "zh-CN", "translations": {"en": {"title": "The Road to Orgrimmar", "background": "On the continent of Azeroth, there is a remarkable warlock named Waizui O, a core member of the Horde. One day he wakes up and finds himself in the Alliance capital, Stormwind City. After being attacked by many Alliance soldiers, he decides to flee back to his home, Orgrimmar.", "description": "There are $n$ cities in Azeroth, numbered $1, 2, 3, \\ldots, n$.\n\nThere are $m$ undirected roads between cities. Traveling from one city to another will trigger attacks by the Alliance, causing a certain amount of health loss.\n\nEach time he passes through a city, he must pay a toll (including the start and the end). There are no toll booths along the roads.\n\nAssume $1$ is Stormwind City, $n$ is Orgrimmar, and his maximum health is $b$. At the start, his health is full. If his health drops below zero, he cannot reach Orgrimmar.\n\nWaizui O does not want to spend too much money. Among all routes that can reach Orgrimmar, consider the maximum single-city toll along the route; find the minimal possible value of this maximum.", "inputFormat": "The first line contains 3 positive integers, $n, m, b$, representing the number of cities, the number of roads, and Waizui O’s health $b$.\n\nThen follow $n$ lines, each containing 1 non-negative integer, $f_i$, meaning that passing city $i$ requires a toll of $f_i$.\n\nThen follow $m$ lines, each containing 3 positive integers, $a_i, b_i, c_i$ ($1\\leq a_i,b_i\\leq n$). This means there is a two-way road between cities $a_i$ and $b_i$. If you travel from city $a_i$ to city $b_i$, or from city $b_i$ to city $a_i$, you will lose $c_i$ health.", "outputFormat": "Output a single integer: the minimal possible value of the maximum single-city toll along the route.\n\nIf he cannot reach Orgrimmar, output `AFK`.", "hint": "Constraints:\n- For $60\\%$ of the testdata, $n\\leq 200$, $m\\leq 10^4$, $b\\leq 200$.\n- For $100\\%$ of the testdata, $1\\leq n\\leq 10^4$, $1\\leq m\\leq 5\\times 10^4$, $1\\leq b\\leq 10^9$.\n- For $100\\%$ of the testdata, $1\\leq c_i\\leq 10^9$, $0\\leq f_i\\leq 10^9$. There may be two edges connecting the same pair of cities.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "通往奥格瑞玛的道路", "background": "在艾泽拉斯大陆上有一位名叫歪嘴哦的神奇术士，他是部落的中坚力量。\n\n有一天他醒来后发现自己居然到了联盟的主城暴风城。\n\n在被众多联盟的士兵攻击后，他决定逃回自己的家乡奥格瑞玛。", "description": "在艾泽拉斯，有 $n$ 个城市。编号为 $1,2,3,\\ldots,n$。\n\n城市之间有 $m$ 条双向的公路，连接着两个城市，从某个城市到另一个城市，会遭到联盟的攻击，进而损失一定的血量。\n\n每次经过一个城市，都会被收取一定的过路费（包括起点和终点）。路上并没有收费站。\n\n假设 $1$ 为暴风城，$n$ 为奥格瑞玛，而他的血量最多为 $b$，出发时他的血量是满的。如果他的血量降低至负数，则他就无法到达奥格瑞玛。\n\n歪嘴哦不希望花很多钱，他想知道，在所有可以到达奥格瑞玛的道路中，对于每条道路所经过的城市单次收费的最大值，其最小值为多少。", "inputFormat": "第一行 $3$ 个正整数，$n,m,b$。分别表示有 $n$ 个城市，$m$ 条公路，歪嘴哦的血量为 $b$。\n\n接下来有 $n$ 行，每行 $1$ 个非负整数，$f_i$。表示经过城市 $i$，需要交费 $f_i$ 元。\n\n再接下来有 $m$ 行，每行 $3$ 个正整数，$a_i,b_i,c_i$（$1\\leq a_i,b_i\\leq n$）。表示城市 $a_i$ 和城市 $b_i$ 之间有一条公路，如果从城市 $a_i$ 到城市 $b_i$，或者从城市 $b_i$ 到城市 $a_i$，会损失 $c_i$ 的血量。", "outputFormat": "仅一个整数，表示歪嘴哦经过城市单次交费最大值的最小值。\n\n如果他无法到达奥格瑞玛，输出 `AFK`。", "hint": "对于 $60\\%$ 的数据，满足 $n\\leq 200$，$m\\leq 10^4$，$b\\leq 200$；\n\n对于 $100\\%$ 的数据，满足 $1\\leq n\\leq 10^4$，$1\\leq m\\leq 5\\times 10^4$，$1\\leq b\\leq 10^9$；\n\n对于 $100\\%$ 的数据，满足 $1\\leq c_i\\leq 10^9$，$0\\leq f_i\\leq 10^9$，可能有两条边连接着相同的城市。", "locale": "zh-CN"}}}
{"pid": "P1463", "type": "P", "difficulty": 5, "samples": [["1000", "840"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "数学", "2001", "2006", "2007", "河南", "各省省选", "POI（波兰）", "浙江", "素数判断,质数,筛法"], "title": "[POI 2001 R1 / ZJOI2006 / HAOI2007] 反素数", "background": null, "description": "对于任何正整数 $x$，其约数的个数记作 $g(x)$。例如 $g(1)=1$，$g(6)=4$。\n\n如果某个正整数 $x$ 满足：$\\forall 0 \\lt i \\lt x$，都有 $g(x) \\gt g(i)$，则称 $x$ 为**反素数**。例如，$1,2,4,6,12,24$ 等都是反素数。\n\n现在给定一个正整数 $N$，你能求出不超过 $N$ 的最大的反素数么？", "inputFormat": "仅一行一个正整数 $N$。", "outputFormat": "仅一行一个正整数，代表不超过 $N$ 的最大的反素数。", "hint": "对于所有数据，有 $1 \\leq N \\leq 2 \\times 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2001 R1 / HAOI2007] Anti-Prime Number", "background": "", "description": "For any positive integer $x$, let $g(x)$ be the number of its divisors. For example, $g(1)=1$, $g(6)=4$.\n\nIf a positive integer $x$ satisfies: $\\forall 0 \\lt i \\lt x$, we have $g(x) \\gt g(i)$, then $x$ is called an anti-prime number. For example, $1,2,4,6,12,24$ are all anti-prime numbers.\n\nNow given a positive integer $N$, can you find the largest anti-prime number not exceeding $N$?", "inputFormat": "A single line with a positive integer $N$.", "outputFormat": "A single line with a positive integer, representing the largest anti-prime number not exceeding $N$.", "hint": "For all testdata, $1 \\leq N \\leq 2 \\times 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2001 R1 / ZJOI2006 / HAOI2007] 反素数", "background": null, "description": "对于任何正整数 $x$，其约数的个数记作 $g(x)$。例如 $g(1)=1$，$g(6)=4$。\n\n如果某个正整数 $x$ 满足：$\\forall 0 \\lt i \\lt x$，都有 $g(x) \\gt g(i)$，则称 $x$ 为**反素数**。例如，$1,2,4,6,12,24$ 等都是反素数。\n\n现在给定一个正整数 $N$，你能求出不超过 $N$ 的最大的反素数么？", "inputFormat": "仅一行一个正整数 $N$。", "outputFormat": "仅一行一个正整数，代表不超过 $N$ 的最大的反素数。", "hint": "对于所有数据，有 $1 \\leq N \\leq 2 \\times 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1464", "type": "P", "difficulty": 2, "samples": [["1 1 1\n2 2 2\n-1 -1 -1", "w(1, 1, 1) = 2\nw(2, 2, 2) = 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "递归", "记忆化搜索"], "title": "Function", "background": "", "description": "对于一个递归函数 $w(a,b,c)$\n\n\n- 如果 $a \\le 0$ 或 $b \\le 0$ 或 $c \\le 0$ 就返回值 $1$。\n- 如果 $a>20$ 或 $b>20$ 或 $c>20$ 就返回 $w(20,20,20)$\n- 如果 $a<b$ 并且 $b<c$ 就返回 $w(a,b,c-1)+w(a,b-1,c-1)-w(a,b-1,c)$。\n- 其它的情况就返回 $w(a-1,b,c)+w(a-1,b-1,c)+w(a-1,b,c-1)-w(a-1,b-1,c-1)$\n\n\n这是个简单的递归函数，但实现起来可能会有些问题。当 $a,b,c$ 均为 $15$ 时，调用的次数将非常的多。你要想个办法才行。\n\n注意：例如 $w(30,-1,0)$ 又满足条件 $1$ 又满足条件 $2$，请按照最上面的条件来算，答案为 $1$。", "inputFormat": "会有若干行。\n\n并以 $-1,-1,-1$ 结束。", "outputFormat": "输出若干行，每一行格式：\n\n`w(a, b, c) = ans`\n\n注意空格。\n", "hint": "### 数据规模与约定\n\n保证输入的数在 $[-9223372036854775808,9223372036854775807]$ 之间，并且是整数。\n\n保证不包括 $-1, -1, -1$ 的输入行数 $T$ 满足 $1 \\leq T \\leq 10 ^ 5$。", "locale": "zh-CN", "translations": {"en": {"title": "Function", "background": "", "description": "For a recursive function $w(a,b,c)$:\n\n- If $a \\le 0$ or $b \\le 0$ or $c \\le 0$, return $1$.\n- If $a>20$ or $b>20$ or $c>20$, return $w(20,20,20)$.\n- If $a<b$ and $b<c$, return $w(a,b,c-1)+w(a,b-1,c-1)-w(a,b-1,c)$.\n- Otherwise, return $w(a-1,b,c)+w(a-1,b-1,c)+w(a-1,b,c-1)-w(a-1,b-1,c-1)$.\n\nThis is a simple recursive function, but implementing it naively may cause issues. When $a, b, c$ are all $15$, the number of calls becomes very large. You need to find a way to handle this efficiently.\n\nNote: For example, $w(30,-1,0)$ satisfies both condition 1 and condition 2. Evaluate according to the earliest condition listed above. The answer is $1$.", "inputFormat": "Multiple lines of input. Each line contains three integers $a, b, c$.\n\nThe input ends with $-1,-1,-1$.", "outputFormat": "Output multiple lines. Each line should be in the format:\n\n`w(a, b, c) = ans`\n\nMind the spaces.", "hint": "### Constraints\n\n- Each input number is an integer in $[-9223372036854775808, 9223372036854775807]$.\n- The number of input lines excluding $-1, -1, -1$, denoted $T$, satisfies $1 \\leq T \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Function", "background": "", "description": "对于一个递归函数 $w(a,b,c)$\n\n\n- 如果 $a \\le 0$ 或 $b \\le 0$ 或 $c \\le 0$ 就返回值 $1$。\n- 如果 $a>20$ 或 $b>20$ 或 $c>20$ 就返回 $w(20,20,20)$\n- 如果 $a<b$ 并且 $b<c$ 就返回 $w(a,b,c-1)+w(a,b-1,c-1)-w(a,b-1,c)$。\n- 其它的情况就返回 $w(a-1,b,c)+w(a-1,b-1,c)+w(a-1,b,c-1)-w(a-1,b-1,c-1)$\n\n\n这是个简单的递归函数，但实现起来可能会有些问题。当 $a,b,c$ 均为 $15$ 时，调用的次数将非常的多。你要想个办法才行。\n\n注意：例如 $w(30,-1,0)$ 又满足条件 $1$ 又满足条件 $2$，请按照最上面的条件来算，答案为 $1$。", "inputFormat": "会有若干行。\n\n并以 $-1,-1,-1$ 结束。", "outputFormat": "输出若干行，每一行格式：\n\n`w(a, b, c) = ans`\n\n注意空格。\n", "hint": "### 数据规模与约定\n\n保证输入的数在 $[-9223372036854775808,9223372036854775807]$ 之间，并且是整数。\n\n保证不包括 $-1, -1, -1$ 的输入行数 $T$ 满足 $1 \\leq T \\leq 10 ^ 5$。", "locale": "zh-CN"}}}
{"pid": "P1465", "type": "P", "difficulty": 3, "samples": [["5\n", "I 7\nV 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "USACO", "枚举"], "title": "[USACO2.2] 序言页码 Preface Numbering", "background": "", "description": "给定 $n$，求 $1 \\sim n$ 的 **罗马数字** 表示中，各个字符出现了多少次。\n\n比如 $n = 5$，表示为  I, II, III, IV, V。总共有 $7$ 个 I 出现，$2$ 个 V 出现。\n", "inputFormat": "一个整数 $n$。\n", "outputFormat": "每行一个字符和一个数字 $k$，表示这个字符出现了 $k$ 次。字符必须按罗马数字表中的递增顺序输出。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 3500$。\n\n翻译来自NOCOW\n\nUSACO 2.2\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.2] Preface Numbering", "background": "", "description": "Given $n$, count how many times each character appears in the Roman numeral representations of $1 \\sim n$.\n\nFor example, when $n = 5$, the representations are I, II, III, IV, V. There are $7$ occurrences of I and $2$ occurrences of V.", "inputFormat": "A single integer $n$.", "outputFormat": "Each line contains a character and an integer $k$, indicating that this character appears $k$ times. Characters must be printed in the increasing order of the Roman numeral table.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 3500$.\n\nTranslated from NOCOW.\n\nUSACO 2.2.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.2] 序言页码 Preface Numbering", "background": "", "description": "给定 $n$，求 $1 \\sim n$ 的 **罗马数字** 表示中，各个字符出现了多少次。\n\n比如 $n = 5$，表示为  I, II, III, IV, V。总共有 $7$ 个 I 出现，$2$ 个 V 出现。\n", "inputFormat": "一个整数 $n$。\n", "outputFormat": "每行一个字符和一个数字 $k$，表示这个字符出现了 $k$ 次。字符必须按罗马数字表中的递增顺序输出。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 3500$。\n\n翻译来自NOCOW\n\nUSACO 2.2\n", "locale": "zh-CN"}}}
{"pid": "P1466", "type": "P", "difficulty": 3, "samples": [["7\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "USACO", "背包 DP", "折半搜索 meet in the middle"], "title": "[USACO2.2] 集合 Subset Sums", "background": null, "description": "对于从 $1\\sim n$ 的连续整数集合，能划分成两个子集合，且保证每个集合的数字和是相等的。举个例子，如果 $n=3$，对于 $\\{1,2,3\\}$ 能划分成两个子集合，每个子集合的所有数字和是相等的：\n\n$\\{3\\}$ 和 $\\{1,2\\}$ 是唯一一种分法（交换集合位置被认为是同一种划分方案，因此不会增加划分方案总数）  \n\n如果 $n=7$，有四种方法能划分集合 $\\{1,2,3,4,5,6,7 \\}$，每一种分法的子集合各数字和是相等的：\n\n$\\{1,6,7\\}$ 和 $\\{2,3,4,5\\}$  \n$\\{2,5,7\\}$ 和 $\\{1,3,4,6\\}$  \n$\\{3,4,7\\}$ 和 $\\{1,2,5,6\\}$  \n$\\{1,2,4,7\\}$ 和 $\\{3,5,6\\}$  \n\n给出 $n$，你的程序应该输出划分方案总数。", "inputFormat": "输入文件只有一行，且只有一个整数 $n$。", "outputFormat": "输出划分方案总数。", "hint": "**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le n \\le 39$。\n\n翻译来自 NOCOW。\n\nUSACO 2.2", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.2] Subset Sums", "background": "", "description": "For the set of consecutive integers from $1\\sim n$, determine the number of ways to partition it into two subsets such that the sum of numbers in each subset is equal. For example, if $n = 3$, the set $\\{1, 2, 3\\}$ can be partitioned into two subsets with equal sums:\n\n$\\{3\\}$ and $\\{1, 2\\}$ is the only way (swapping the two subsets is considered the same partition, so it does not increase the total count).\n\nIf $n = 7$, there are four ways to partition the set $\\{1, 2, 3, 4, 5, 6, 7\\}$ into two subsets with equal sums:\n$\\{1, 6, 7\\}$ and $\\{2, 3, 4, 5\\}$.\n$\\{2, 5, 7\\}$ and $\\{1, 3, 4, 6\\}$.\n$\\{3, 4, 7\\}$ and $\\{1, 2, 5, 6\\}$.\n$\\{1, 2, 4, 7\\}$ and $\\{3, 5, 6\\}$.\n\nGiven $n$, your program should output the total number of such partitions.", "inputFormat": "The input contains a single line with one integer $n$.", "outputFormat": "Output the total number of valid partitions.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 39$.\n\nTranslation from NOCOW.\n\nUSACO 2.2.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.2] 集合 Subset Sums", "background": null, "description": "对于从 $1\\sim n$ 的连续整数集合，能划分成两个子集合，且保证每个集合的数字和是相等的。举个例子，如果 $n=3$，对于 $\\{1,2,3\\}$ 能划分成两个子集合，每个子集合的所有数字和是相等的：\n\n$\\{3\\}$ 和 $\\{1,2\\}$ 是唯一一种分法（交换集合位置被认为是同一种划分方案，因此不会增加划分方案总数）  \n\n如果 $n=7$，有四种方法能划分集合 $\\{1,2,3,4,5,6,7 \\}$，每一种分法的子集合各数字和是相等的：\n\n$\\{1,6,7\\}$ 和 $\\{2,3,4,5\\}$  \n$\\{2,5,7\\}$ 和 $\\{1,3,4,6\\}$  \n$\\{3,4,7\\}$ 和 $\\{1,2,5,6\\}$  \n$\\{1,2,4,7\\}$ 和 $\\{3,5,6\\}$  \n\n给出 $n$，你的程序应该输出划分方案总数。", "inputFormat": "输入文件只有一行，且只有一个整数 $n$。", "outputFormat": "输出划分方案总数。", "hint": "**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le n \\le 39$。\n\n翻译来自 NOCOW。\n\nUSACO 2.2", "locale": "zh-CN"}}}
{"pid": "P1467", "type": "P", "difficulty": 2, "samples": [["81361\n", "81362\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "USACO"], "title": "[USACO2.2] 循环数 Runaround Numbers", "background": null, "description": "循环数是那些不包括 $0$ 且没有重复数字的正整数（比如 $81362$），并且还应同时具有一个有趣的性质——\n\n如果你从最左边的数字开始（在 $\\color{red}{8}\\color{black}1362$ 中是 $8$）向右数这个数字对应的次数（如果数到了最右边就回到最左边；在 $\\color{red}{8}\\color{black}1362$ 中是 $8$ 次），你会停止在另一个新的数字（在 $\\color{red}{8}\\color{black}1362$ 中是 $\\color{red}8\\color{black}\\to 1\\to 3\\to 6\\to 2\\to 8\\to 1\\to 3\\to \\color{red}6$；如果停在一个相同的数字上，这个数就不是循环数）。\n\n重复这样做，如果能在经过每个数位恰好一次后回到最左边，那么这个正整数就是循环数。\n\n仍然以 $81362$ 为例，以下模拟过程证明了 $81362$ 是循环数：\n\n$$\\color{red}8\\color{black}\\to 1\\to 3\\to 6\\to 2\\to 8\\to 1\\to 3\\to \\color{red}6$$  \n$$\\color{red}6\\color{black}\\to 2\\to 8\\to 1\\to 3\\to 6\\to \\color{red}2$$   \n$$\\color{red}2\\color{black}\\to 8\\to \\color{red}1$$  \n$$\\color{red}1\\color{black}\\to \\color{red}3$$  \n$$\\color{red}3\\color{black}\\to 6\\to 2\\to  \\color{red}8$$  \n\n**任务：**\n\n给你一个正整数 $m$，找出最小的比 $m$ 大的循环数 $m'$。\n\n数据保证 $m' \\le 2^{32}-1$。", "inputFormat": "仅仅一行, 包括 $m$。", "outputFormat": "仅仅一行，输出小的比 $m$ 大的循环数 $m'$。", "hint": "对于 $100\\%$ 的数据，$1\\le m \\le 10^9$。\n\nUSACO 2.2", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.2] Runaround Numbers", "background": "", "description": "Runaround numbers are positive integers that contain no $0$ and have no repeated digits (for example, $81362$). They must also have the following property:\n\nStarting from the leftmost digit (in $\\color{red}{8}\\color{black}1362$, that digit is $8$), move to the right a number of positions equal to the value of the current digit (wrapping around to the leftmost digit after the rightmost one; in $\\color{red}{8}\\color{black}1362$, you move $8$ steps). You will land on another new digit (in $\\color{red}{8}\\color{black}1362$, this is $\\color{red}8\\color{black}\\to 1\\to 3\\to 6\\to 2\\to 8\\to 1\\to 3\\to \\color{red}6$; if you land on a digit that has already been visited, then the number is not a runaround number).\n\nRepeat this process. If you return to the leftmost digit after visiting every digit exactly once, then the integer is a runaround number.\n\nUsing $81362$ as an example, the following simulation shows that $81362$ is a runaround number:\n\n$$\\color{red}8\\color{black}\\to 1\\to 3\\to 6\\to 2\\to 8\\to 1\\to 3\\to \\color{red}6$$  \n$$\\color{red}6\\color{black}\\to 2\\to 8\\to 1\\to 3\\to 6\\to \\color{red}2$$   \n$$\\color{red}2\\color{black}\\to 8\\to \\color{red}1$$  \n$$\\color{red}1\\color{black}\\to \\color{red}3$$  \n$$\\color{red}3\\color{black}\\to 6\\to 2\\to  \\color{red}8$$  \n\nTask:\nGiven a positive integer $m$, find the smallest runaround number $m'$ that is greater than $m$.\n\nIt is guaranteed that $m' \\le 2^{32} - 1$.", "inputFormat": "A single line containing $m$.", "outputFormat": "A single line containing the smallest runaround number $m'$ such that $m' > m$.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\le m \\le 10^9$.\n\nSource: USACO 2.2.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.2] 循环数 Runaround Numbers", "background": null, "description": "循环数是那些不包括 $0$ 且没有重复数字的正整数（比如 $81362$），并且还应同时具有一个有趣的性质——\n\n如果你从最左边的数字开始（在 $\\color{red}{8}\\color{black}1362$ 中是 $8$）向右数这个数字对应的次数（如果数到了最右边就回到最左边；在 $\\color{red}{8}\\color{black}1362$ 中是 $8$ 次），你会停止在另一个新的数字（在 $\\color{red}{8}\\color{black}1362$ 中是 $\\color{red}8\\color{black}\\to 1\\to 3\\to 6\\to 2\\to 8\\to 1\\to 3\\to \\color{red}6$；如果停在一个相同的数字上，这个数就不是循环数）。\n\n重复这样做，如果能在经过每个数位恰好一次后回到最左边，那么这个正整数就是循环数。\n\n仍然以 $81362$ 为例，以下模拟过程证明了 $81362$ 是循环数：\n\n$$\\color{red}8\\color{black}\\to 1\\to 3\\to 6\\to 2\\to 8\\to 1\\to 3\\to \\color{red}6$$  \n$$\\color{red}6\\color{black}\\to 2\\to 8\\to 1\\to 3\\to 6\\to \\color{red}2$$   \n$$\\color{red}2\\color{black}\\to 8\\to \\color{red}1$$  \n$$\\color{red}1\\color{black}\\to \\color{red}3$$  \n$$\\color{red}3\\color{black}\\to 6\\to 2\\to  \\color{red}8$$  \n\n**任务：**\n\n给你一个正整数 $m$，找出最小的比 $m$ 大的循环数 $m'$。\n\n数据保证 $m' \\le 2^{32}-1$。", "inputFormat": "仅仅一行, 包括 $m$。", "outputFormat": "仅仅一行，输出小的比 $m$ 大的循环数 $m'$。", "hint": "对于 $100\\%$ 的数据，$1\\le m \\le 10^9$。\n\nUSACO 2.2", "locale": "zh-CN"}}}
{"pid": "P1468", "type": "P", "difficulty": 4, "samples": [["10\n1\n-1\n7 -1\n", "0000000000\n0101010101\n0110110110\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "搜索", "1998", "USACO", "IOI", "位运算"], "title": "[IOI 1998 / USACO2.2] 派对灯 Party Lamps", "background": null, "description": "在 IOI98 的节日宴会上，我们有 $n$ 盏彩色灯，他们分别从 $1 \\sim n$ 被标上号码。这些灯都连接到四个按钮：\n- 按钮 $1$：当按下此按钮，将改变所有的灯：本来亮着的灯就熄灭，本来是关着的灯被点亮；\n- 按钮 $2$：当按下此按钮，将改变所有奇数号的灯；\n- 按钮 $3$：当按下此按钮，将改变所有偶数号的灯；\n- 按钮 $4$：当按下此按钮，将改变所有序号是 $3k+1 \\ (k \\in [0,+\\infty) \\cap \\mathbb Z)$ 的灯。例如：$1,4,7,10 \\dots$。\n\n一个计数器 $c$ 记录按钮被按下的次数。当宴会开始，所有的灯都亮着，此时计数器 $c$ 为 $0$。\n\n你将得到计数器 $c$ 上的数值和经过若干操作后某些灯的状态。写一个程序去找出所有灯最后可能的与所给出信息相符的状态，并且没有重复。", "inputFormat": "第一行一个正整数 $n$；第二行一个整数 $c$，表示最后计数器的数值。\n\n第三行若干个整数，表示最后亮着的灯，以 `-1` 结束。\n\n第四行若干个整数，表示最后关着的灯，以 `-1` 结束。\n\n保证不会有灯会在输入中出现两次。", "outputFormat": "每一行是所有灯可能的最后状态（没有重复）。\n\n每一行有 $n$ 个字符，第 $i$ 个字符表示 $i$ 号灯。$0$ 表示关闭，$1$ 表示亮着。这些行必须从小到大排列（看作是二进制数）。\n\n如果没有可能的状态，则输出一行 `IMPOSSIBLE`。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$10 \\le n \\le 100$，$0 \\le c \\le 10^4$。\n\n【样例解释】  \n在这个样例中，有三种可能的状态：\n- 所有灯都关着；\n- $1,4,7,10$ 号灯关着，$2,3,5,6,8,9$ 亮着；\n- $1,3,5,7,9$ 号灯关着，$2,4,6,8,10$ 亮着。\n\n翻译来自 NOCOW。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 1998 / USACO2.2] Party Lamps", "background": "", "description": "At the IOI 1998 holiday banquet, we have $n$ colored lamps, numbered from 1 to $n$. These lamps are connected to four buttons:\n- Button $1$: When pressed, it toggles all lamps: lamps that are on turn off, and lamps that are off turn on.\n- Button $2$: When pressed, it toggles all lamps with odd indices.\n- Button $3$: When pressed, it toggles all lamps with even indices.\n- Button $4$: When pressed, it toggles all lamps whose indices are $3k+1 \\ (k \\in [0,+\\infty) \\cap \\mathbb Z)$. For example: 1, 4, 7, 10, …\n\nA counter $c$ records how many times buttons have been pressed. When the banquet starts, all lamps are on, and the counter $c$ is 0.\n\nYou are given the value on the counter $c$ and the final states of some lamps after several operations. Write a program to find all possible final states of the lamps that are consistent with the given information, without duplicates.", "inputFormat": "The first line contains a positive integer $n$.  \nThe second line contains an integer $c$, the final value of the counter.\n\nThe third line contains several integers, indicating the lamps that are on in the end, terminated by `-1`.\n\nThe fourth line contains several integers, indicating the lamps that are off in the end, terminated by `-1`.\n\nIt is guaranteed that no lamp appears twice in the input.", "outputFormat": "Each line contains one possible final state of all lamps (without duplicates).\n\nEach line has $n$ characters. The $i$-th character corresponds to lamp $i$. `0` means off, and `1` means on. These lines must be sorted from small to large when viewed as binary numbers.\n\nIf there is no possible state, output a single line `IMPOSSIBLE`.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $10 \\le n \\le 100$, $0 \\le c \\le 10^4$.\n\nSample explanation  \nIn this sample, there are three possible states:\n- All lamps are off.\n- Lamps 1, 4, 7, 10 are off; 2, 3, 5, 6, 8, 9 are on.\n- Lamps 1, 3, 5, 7, 9 are off; 2, 4, 6, 8, 10 are on.\n\nTranslation from NOCOW.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 1998 / USACO2.2] 派对灯 Party Lamps", "background": null, "description": "在 IOI98 的节日宴会上，我们有 $n$ 盏彩色灯，他们分别从 $1 \\sim n$ 被标上号码。这些灯都连接到四个按钮：\n- 按钮 $1$：当按下此按钮，将改变所有的灯：本来亮着的灯就熄灭，本来是关着的灯被点亮；\n- 按钮 $2$：当按下此按钮，将改变所有奇数号的灯；\n- 按钮 $3$：当按下此按钮，将改变所有偶数号的灯；\n- 按钮 $4$：当按下此按钮，将改变所有序号是 $3k+1 \\ (k \\in [0,+\\infty) \\cap \\mathbb Z)$ 的灯。例如：$1,4,7,10 \\dots$。\n\n一个计数器 $c$ 记录按钮被按下的次数。当宴会开始，所有的灯都亮着，此时计数器 $c$ 为 $0$。\n\n你将得到计数器 $c$ 上的数值和经过若干操作后某些灯的状态。写一个程序去找出所有灯最后可能的与所给出信息相符的状态，并且没有重复。", "inputFormat": "第一行一个正整数 $n$；第二行一个整数 $c$，表示最后计数器的数值。\n\n第三行若干个整数，表示最后亮着的灯，以 `-1` 结束。\n\n第四行若干个整数，表示最后关着的灯，以 `-1` 结束。\n\n保证不会有灯会在输入中出现两次。", "outputFormat": "每一行是所有灯可能的最后状态（没有重复）。\n\n每一行有 $n$ 个字符，第 $i$ 个字符表示 $i$ 号灯。$0$ 表示关闭，$1$ 表示亮着。这些行必须从小到大排列（看作是二进制数）。\n\n如果没有可能的状态，则输出一行 `IMPOSSIBLE`。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$10 \\le n \\le 100$，$0 \\le c \\le 10^4$。\n\n【样例解释】  \n在这个样例中，有三种可能的状态：\n- 所有灯都关着；\n- $1,4,7,10$ 号灯关着，$2,3,5,6,8,9$ 亮着；\n- $1,3,5,7,9$ 号灯关着，$2,4,6,8,10$ 亮着。\n\n翻译来自 NOCOW。", "locale": "zh-CN"}}}
{"pid": "P1469", "type": "P", "difficulty": 2, "samples": [["9\n2 2 1 3 3 3 2 3 1\n", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192]}, "tags": ["数学", "O2优化", "位运算"], "title": "找筷子", "background": "", "description": "经过一段时间的紧张筹备，电脑小组的“RP 餐厅”终于开业了，这天，经理 LXC 接到了一个定餐大单，可把大家乐坏了！员工们齐心协力按要求准备好了套餐正准备派送时，突然碰到一个棘手的问题：筷子！\n\nCX 小朋友找出了餐厅中所有的筷子，但遗憾的是这些筷子长短不一，而我们都知道筷子需要长度一样的才能组成一双，更麻烦的是 CX 找出来的这些筷子数量为奇数，但是巧合的是，这些筷子中只有一只筷子是落单的，其余都成双，善良的你，可以帮 CX 找出这只落单的筷子的长度吗？\n", "inputFormat": "第一行是一个整数，表示筷子的数量 $n$。\n\n第二行有 $n$ 个整数，第 $i$ 个整数表示第 $i$ 根筷子的长度 $a_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n \\leq 10^5$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^7 + 1$，$1 \\leq a_i \\leq 10^9$。\n\n\n#### 提示\n\n- 请注意数据读入对程序效率造成的影响。\n- 请注意本题的空间限制为 $8$ Mb。", "locale": "zh-CN", "translations": {"en": {"title": "Find the Chopstick", "background": "", "description": "After a period of intense preparation, the computer club’s \"RP Restaurant\" finally opened. One day, manager LXC received a large order, which made everyone very happy! The staff worked together to prepare the set meals as required and were about to deliver them when they suddenly encountered a tricky problem: chopsticks!\n\nCX found all the chopsticks in the restaurant, but unfortunately they are of different lengths. We all know that a pair of chopsticks must be of the same length. To make it worse, the number of chopsticks CX found is odd. Coincidentally, among these chopsticks, only one chopstick is single, and all the others are in pairs. Kind-hearted as you are, can you help CX find the length of this single chopstick?", "inputFormat": "The first line contains an integer, the number of chopsticks $n$.\n\nThe second line contains $n$ integers. The $i$-th integer is the length $a_i$ of the $i$-th chopstick.", "outputFormat": "Output a single integer in one line representing the answer.", "hint": "Constraints\n- For 30% of the testdata, it is guaranteed that $n \\leq 10^5$.\n- For 100% of the testdata, it is guaranteed that $1 \\leq n \\leq 10^7 + 1$, $1 \\leq a_i \\leq 10^9$.\n\nHints\n- Pay attention to how input reading affects program efficiency.\n- Note the space limit of $8$ Mb.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "找筷子", "background": "", "description": "经过一段时间的紧张筹备，电脑小组的“RP 餐厅”终于开业了，这天，经理 LXC 接到了一个定餐大单，可把大家乐坏了！员工们齐心协力按要求准备好了套餐正准备派送时，突然碰到一个棘手的问题：筷子！\n\nCX 小朋友找出了餐厅中所有的筷子，但遗憾的是这些筷子长短不一，而我们都知道筷子需要长度一样的才能组成一双，更麻烦的是 CX 找出来的这些筷子数量为奇数，但是巧合的是，这些筷子中只有一只筷子是落单的，其余都成双，善良的你，可以帮 CX 找出这只落单的筷子的长度吗？\n", "inputFormat": "第一行是一个整数，表示筷子的数量 $n$。\n\n第二行有 $n$ 个整数，第 $i$ 个整数表示第 $i$ 根筷子的长度 $a_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n \\leq 10^5$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^7 + 1$，$1 \\leq a_i \\leq 10^9$。\n\n\n#### 提示\n\n- 请注意数据读入对程序效率造成的影响。\n- 请注意本题的空间限制为 $8$ Mb。", "locale": "zh-CN"}}}
{"pid": "P1470", "type": "P", "difficulty": 4, "samples": [["A AB BA CA BBC\n.\nABABACABAABC\n", "11\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "动态规划 DP", "USACO", "IOI", "字典树 Trie", "KMP 算法", "1996"], "title": "[IOI 1996 / USACO2.3] 最长前缀 Longest Prefix", "background": null, "description": "在生物学中，一些生物的结构是用包含其要素的大写字母序列来表示的。生物学家对于把长的序列分解成较短的序列（即元素）很感兴趣。\n\n如果一个集合 $P$ 中的元素可以串起来（元素可以重复使用）组成一个序列 $S$，那么我们认为序列 $S$ 可以分解为 $P$ 中的元素。元素不一定要全部出现（如下例中 `BBC` 就没有出现）。举个例子，序列 `ABABACABAAB` 可以分解为下面集合中的元素：`{A,AB,BA,CA,BBC}`。\n\n序列 $S$ 的前面 $k$ 个字符称作 $S$ 中长度为 $k$ 的前缀。设计一个程序，输入一个元素集合以及一个大写字母序列，设 $S'$ 是序列 $S$ 的前缀，使其可以分解为给出的集合 $P$ 中的元素，求 $S'$ 的长度 $k$ 的最大值。", "inputFormat": "输入数据的开头包括若干个元素组成的集合 $P$，用连续的以空格分开的字符串表示。字母全部是大写，数据可能不止一行。元素集合结束的标志是一个只包含一个 `.` 的行，集合中的元素没有重复。  \n\n接着是大写字母序列 $S$，用字符串表示，每 $76$ 个字符换一行。", "outputFormat": "只有一行，输出一个整数，表示 $S$ 符合条件的前缀的最大长度。", "hint": "**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le \\text{card}(P) \\le 200$，$1\\le |S| \\le 2\\times 10^5$，$P$ 中的元素长度均不超过 $10$。\n\n翻译来自 NOCOW。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 1996 / USACO2.3] Longest Prefix", "background": "", "description": "In biology, the structures of some organisms are represented by sequences of uppercase letters that contain their components. Biologists are interested in breaking long sequences into shorter sequences (i.e., elements).\n\nIf the elements in a set $P$ can be concatenated (elements may be reused) to form a sequence $S$, then we say that $S$ can be decomposed into elements from $P$. Not all elements need to appear (for example, `BBC` does not appear below). For instance, the sequence `ABABACABAAB` can be decomposed into elements from the set `{A, AB, BA, CA, BBC}`.\n\nThe first $k$ characters of sequence $S$ are called the length-$k$ prefix of $S$. Design a program that, given a set of elements and an uppercase-letter sequence, lets $S'$ be the longest prefix of $S$ that can be decomposed into elements from the given set $P$, and computes the length $k$ of $S'$.", "inputFormat": "The input begins with a set $P$ consisting of several elements, given as a sequence of space-separated strings. All letters are uppercase, and the data may span multiple lines. The set ends with a line that contains only a single `.`. There are no duplicate elements in the set.\n\nThen follows the uppercase-letter sequence $S$, given as a string, with a newline after every $76$ characters.", "outputFormat": "Output a single line containing one integer: the maximum length of a prefix of $S$ that satisfies the condition.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $1 \\le \\text{card}(P) \\le 200$, $1 \\le |S| \\le 2 \\times 10^5$, and the length of each element in $P$ does not exceed $10$.\n\nTranslation from NOCOW.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 1996 / USACO2.3] 最长前缀 Longest Prefix", "background": null, "description": "在生物学中，一些生物的结构是用包含其要素的大写字母序列来表示的。生物学家对于把长的序列分解成较短的序列（即元素）很感兴趣。\n\n如果一个集合 $P$ 中的元素可以串起来（元素可以重复使用）组成一个序列 $S$，那么我们认为序列 $S$ 可以分解为 $P$ 中的元素。元素不一定要全部出现（如下例中 `BBC` 就没有出现）。举个例子，序列 `ABABACABAAB` 可以分解为下面集合中的元素：`{A,AB,BA,CA,BBC}`。\n\n序列 $S$ 的前面 $k$ 个字符称作 $S$ 中长度为 $k$ 的前缀。设计一个程序，输入一个元素集合以及一个大写字母序列，设 $S'$ 是序列 $S$ 的前缀，使其可以分解为给出的集合 $P$ 中的元素，求 $S'$ 的长度 $k$ 的最大值。", "inputFormat": "输入数据的开头包括若干个元素组成的集合 $P$，用连续的以空格分开的字符串表示。字母全部是大写，数据可能不止一行。元素集合结束的标志是一个只包含一个 `.` 的行，集合中的元素没有重复。  \n\n接着是大写字母序列 $S$，用字符串表示，每 $76$ 个字符换一行。", "outputFormat": "只有一行，输出一个整数，表示 $S$ 符合条件的前缀的最大长度。", "hint": "**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le \\text{card}(P) \\le 200$，$1\\le |S| \\le 2\\times 10^5$，$P$ 中的元素长度均不超过 $10$。\n\n翻译来自 NOCOW。", "locale": "zh-CN"}}}
{"pid": "P1471", "type": "P", "difficulty": 5, "samples": [["5 5\n1 5 4 2 3\n2 1 4\n3 1 5\n1 1 1 1\n1 2 2 -1\n3 1 5\n", "3.0000\n2.0000\n0.8000\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2016", "线段树", "树状数组", "洛谷原创", "分块", "洛谷月赛"], "title": "方差", "background": "滚粗了的 HansBug 在收拾旧数学书，然而他发现了什么奇妙的东西。\n", "description": "蒟蒻 HansBug 在一本数学书里面发现了一个神奇的数列，包含 $N$ 个实数。他想算算这个数列的平均数和方差。\n", "inputFormat": "第一行包含两个正整数 $N,M$，分别表示数列中实数的个数和操作的个数。\n\n第二行包含 $N$ 个实数，其中第 $i$ 个实数表示数列的第 $i$ 项。\n\n接下来 $M$ 行，每行为一条操作，格式为以下三种之一：\n\n操作 $1$：`1 x y k` ，表示将第 $x$ 到第 $y$ 项每项加上 $k$，$k$ 为一实数。  \n操作 $2$：`2 x y` ，表示求出第 $x$ 到第 $y$ 项这一子数列的平均数。  \n操作 $3$：`3 x y` ，表示求出第 $x$ 到第 $y$ 项这一子数列的方差。", "outputFormat": "输出包含若干行，每行为一个实数，即依次为每一次操作 $2$ 或操作 $3$ 所得的结果（所有结果四舍五入保留 $4$ 位小数）。\n", "hint": "关于方差：对于一个有 $n$ 项的数列 $A$，其方差 $s^2$ 定义如下：\n$$s^2=\\frac{1}{n}\\sum\\limits_{i=1}^n\\left(A_i-\\overline A\\right)^2$$\n其中 $\\overline A$ 表示数列 $A$ 的平均数，$A_i$ 表示数列 $A$ 的第 $i$ 项。\n\n样例说明：\n| 操作步骤 | 输入内容 | 操作要求 | 数列 | 输出结果 | 说明 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | - | - | `1 5 4 2 3` | - | - |\n| $1$ | `2 1 4` | 求 $\\left[1,4\\right]$ 内所有数字的平均数 | `1 5 4 2 3` | `3.0000` | 平均数 $=\\left(1+5+4+2\\right)\\div 4=3.0000$ |\n| $2$ | `3 1 5` | 求 $\\left[1,5\\right]$ 内所有数字的方差 | `1 5 4 2 3` | `2.0000` | 平均数 $=\\left(1+5+4+2+3\\right)\\div 5=3$，方差 $=\\left(\\left(1-3\\right)^2+\\left(5-3\\right)^2+\\left(4-3\\right)^2+\\left(2-3\\right)^2+\\left(3-3\\right)^2\\right)\\div 5=2.0000$ |\n| $3$ | `1 1 1 1` | 将 $\\left[1,1\\right]$ 内所有数字加 $1$ | `2 5 4 2 3` | - | - |\n| $4$ | `1 2 2 -1` | 将 $\\left[2,2\\right]$ 内所有数字加 $-1$ | `2 4 4 2 3` | - | - |\n| $5$ | `3 1 5` | 求 $\\left[1,5\\right]$ 内所有数字的方差 | `2 4 4 2 3` | `0.8000` | 平均数 $=\\left(2+4+4+2+3\\right)\\div 5=3$，方差 $=\\left(\\left(2-3\\right)^2+\\left(4-3\\right)^2+\\left(4-3\\right)^2+\\left(2-3\\right)^2+\\left(3-3\\right)^2\\right)\\div 5=0.8000$ |\n\n数据规模：\n| 数据点 | $N$ | $M$ | 备注 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim3$ | $N\\le 8$ | $M\\le 15$ | - |\n| $4\\sim7$ | $N\\le 10^5$ | $M\\le 10^5$ | 不包含操作 $3$|\n| $8\\sim10$ | $N\\le 10^5$ | $M\\le 10^5$ | - |\n\n保证原数列和输入的所有 $k$ 均为 $[-100,100]$ 范围内的实数。", "locale": "zh-CN", "translations": {"en": {"title": "Variance", "background": "While tidying up his old math books, HansBug discovered something curious.", "description": "The noob HansBug found a magical sequence in a math book, consisting of $N$ real numbers. He wants to compute the mean and variance of this sequence.", "inputFormat": "The first line contains two positive integers $N, M$, denoting the number of real numbers in the sequence and the number of operations.\n\nThe second line contains $N$ real numbers, where the $i$-th real number is the $i$-th term of the sequence.\n\nThe next $M$ lines each describe an operation, in one of the following three formats:\n- Operation 1: `1 x y k`, add $k$ (a real number) to every term from the $x$-th to the $y$-th item.\n- Operation 2: `2 x y`, compute the mean of the subsequence from the $x$-th to the $y$-th item.\n- Operation 3: `3 x y`, compute the variance of the subsequence from the $x$-th to the $y$-th item.", "outputFormat": "Output several lines, each containing one real number, which are the results of every Operation 2 or Operation 3 in order. Round all results to $4$ decimal places using standard rounding.", "hint": "About variance: For a sequence $A$ with $n$ terms, its variance $s^2$ is defined as:\n$$s^2=\\frac{1}{n}\\sum\\limits_{i=1}^n\\left(A_i-\\overline A\\right)^2$$\nwhere $\\overline A$ is the mean of sequence $A$, and $A_i$ is the $i$-th term of sequence $A$.\n\nSample explanation:\n| Step | Input | Requirement | Sequence | Output | Note |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | - | - | `1 5 4 2 3` | - | - |\n| $1$ | `2 1 4` | Compute the mean of all numbers in $\\left[1,4\\right]$ | `1 5 4 2 3` | `3.0000` | Mean $=\\left(1+5+4+2\\right)\\div 4=3.0000$. |\n| $2$ | `3 1 5` | Compute the variance of all numbers in $\\left[1,5\\right]$ | `1 5 4 2 3` | `2.0000` | Mean $=\\left(1+5+4+2+3\\right)\\div 5=3$, variance $=\\left(\\left(1-3\\right)^2+\\left(5-3\\right)^2+\\left(4-3\\right)^2+\\left(2-3\\right)^2+\\left(3-3\\right)^2\\right)\\div 5=2.0000$. |\n| $3$ | `1 1 1 1` | Add $1$ to all numbers in $\\left[1,1\\right]$ | `2 5 4 2 3` | - | - |\n| $4$ | `1 2 2 -1` | Add $-1$ to all numbers in $\\left[2,2\\right]$ | `2 4 4 2 3` | - | - |\n| $5$ | `3 1 5` | Compute the variance of all numbers in $\\left[1,5\\right]$ | `2 4 4 2 3` | `0.8000` | Mean $=\\left(2+4+4+2+3\\right)\\div 5=3$, variance $=\\left(\\left(2-3\\right)^2+\\left(4-3\\right)^2+\\left(4-3\\right)^2+\\left(2-3\\right)^2+\\left(3-3\\right)^2\\right)\\div 5=0.8000$. |\n\nConstraints:\n| Test points | $N$ | $M$ | Note |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim3$ | $N\\le 8$ | $M\\le 15$ | - |\n| $4\\sim7$ | $N\\le 10^5$ | $M\\le 10^5$ | Operation $3$ not included. |\n| $8\\sim10$ | $N\\le 10^5$ | $M\\le 10^5$ | - |\n\nAll numbers in the original sequence and all input $k$ are real numbers within the range $[-100, 100]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "方差", "background": "滚粗了的 HansBug 在收拾旧数学书，然而他发现了什么奇妙的东西。\n", "description": "蒟蒻 HansBug 在一本数学书里面发现了一个神奇的数列，包含 $N$ 个实数。他想算算这个数列的平均数和方差。\n", "inputFormat": "第一行包含两个正整数 $N,M$，分别表示数列中实数的个数和操作的个数。\n\n第二行包含 $N$ 个实数，其中第 $i$ 个实数表示数列的第 $i$ 项。\n\n接下来 $M$ 行，每行为一条操作，格式为以下三种之一：\n\n操作 $1$：`1 x y k` ，表示将第 $x$ 到第 $y$ 项每项加上 $k$，$k$ 为一实数。  \n操作 $2$：`2 x y` ，表示求出第 $x$ 到第 $y$ 项这一子数列的平均数。  \n操作 $3$：`3 x y` ，表示求出第 $x$ 到第 $y$ 项这一子数列的方差。", "outputFormat": "输出包含若干行，每行为一个实数，即依次为每一次操作 $2$ 或操作 $3$ 所得的结果（所有结果四舍五入保留 $4$ 位小数）。\n", "hint": "关于方差：对于一个有 $n$ 项的数列 $A$，其方差 $s^2$ 定义如下：\n$$s^2=\\frac{1}{n}\\sum\\limits_{i=1}^n\\left(A_i-\\overline A\\right)^2$$\n其中 $\\overline A$ 表示数列 $A$ 的平均数，$A_i$ 表示数列 $A$ 的第 $i$ 项。\n\n样例说明：\n| 操作步骤 | 输入内容 | 操作要求 | 数列 | 输出结果 | 说明 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | - | - | `1 5 4 2 3` | - | - |\n| $1$ | `2 1 4` | 求 $\\left[1,4\\right]$ 内所有数字的平均数 | `1 5 4 2 3` | `3.0000` | 平均数 $=\\left(1+5+4+2\\right)\\div 4=3.0000$ |\n| $2$ | `3 1 5` | 求 $\\left[1,5\\right]$ 内所有数字的方差 | `1 5 4 2 3` | `2.0000` | 平均数 $=\\left(1+5+4+2+3\\right)\\div 5=3$，方差 $=\\left(\\left(1-3\\right)^2+\\left(5-3\\right)^2+\\left(4-3\\right)^2+\\left(2-3\\right)^2+\\left(3-3\\right)^2\\right)\\div 5=2.0000$ |\n| $3$ | `1 1 1 1` | 将 $\\left[1,1\\right]$ 内所有数字加 $1$ | `2 5 4 2 3` | - | - |\n| $4$ | `1 2 2 -1` | 将 $\\left[2,2\\right]$ 内所有数字加 $-1$ | `2 4 4 2 3` | - | - |\n| $5$ | `3 1 5` | 求 $\\left[1,5\\right]$ 内所有数字的方差 | `2 4 4 2 3` | `0.8000` | 平均数 $=\\left(2+4+4+2+3\\right)\\div 5=3$，方差 $=\\left(\\left(2-3\\right)^2+\\left(4-3\\right)^2+\\left(4-3\\right)^2+\\left(2-3\\right)^2+\\left(3-3\\right)^2\\right)\\div 5=0.8000$ |\n\n数据规模：\n| 数据点 | $N$ | $M$ | 备注 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim3$ | $N\\le 8$ | $M\\le 15$ | - |\n| $4\\sim7$ | $N\\le 10^5$ | $M\\le 10^5$ | 不包含操作 $3$|\n| $8\\sim10$ | $N\\le 10^5$ | $M\\le 10^5$ | - |\n\n保证原数列和输入的所有 $k$ 均为 $[-100,100]$ 范围内的实数。", "locale": "zh-CN"}}}
{"pid": "P1472", "type": "P", "difficulty": 5, "samples": [["5 3\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "树形数据结构", "USACO", "前缀和", "构造"], "title": "[USACO2.3] 奶牛家谱 Cow Pedigrees", "background": "", "description": "一个有 $n$ 个节点，深度为 $k$ 的无标号完满二叉树（即每个节点的儿子数为 $0$ 或 $2$）有多少种结构？定义根节点深度为 $1$。\n\n答案对 $9901$ 取模。", "inputFormat": "两个空格分开的整数 $n,k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$3\\le n < 200$，$2 \\le k < 100$。\n\nUSACO 2.3\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.3] Cow Pedigrees", "background": "", "description": "How many distinct structures are there for an unlabeled full binary tree (each node has either $0$ or $2$ children) with $n$ nodes and depth $k$? The depth of the root is defined as $1$.\n\nOutput the answer modulo $9901$.", "inputFormat": "Two space-separated integers $n, k$.", "outputFormat": "Output a single integer on one line representing the answer.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $3 \\le n < 200$, $2 \\le k < 100$.\n\nUSACO 2.3.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.3] 奶牛家谱 Cow Pedigrees", "background": "", "description": "一个有 $n$ 个节点，深度为 $k$ 的无标号完满二叉树（即每个节点的儿子数为 $0$ 或 $2$）有多少种结构？定义根节点深度为 $1$。\n\n答案对 $9901$ 取模。", "inputFormat": "两个空格分开的整数 $n,k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$3\\le n < 200$，$2 \\le k < 100$。\n\nUSACO 2.3\n", "locale": "zh-CN"}}}
{"pid": "P1473", "type": "P", "difficulty": 3, "samples": [["7\n", "1+2-3+4-5-6+7\n1+2-3-4+5+6-7\n1-2 3+4+5+6+7\n1-2 3-4 5+6 7\n1-2+3+4-5+6-7\n1-2-3-4-5+6+7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "搜索", "数学", "USACO", "进制"], "title": "[USACO2.3] 零的数列 Zero Sum", "background": "", "description": "请考虑一个由 $1$ 到 $N$ 的数字组成的递增数列：$1, 2, 3, \\ldots, N$。\n\n现在请在数列中插入 `+` 表示加，或者 `-` 表示减，` `（空格） 表示空白（例如 `1-2 3` 就等于 `1-23`），来将每一对数字组合在一起（请不要在第一个数字前插入符号）。\n\n计算该表达式的结果并判断其值是否为 $0$。 请你写一个程序找出所有产生和为零的长度为N的数列。\n", "inputFormat": "单独的一行表示整数 $N$（$3 \\leq N \\leq 9$）。\n", "outputFormat": "按照 ASCI I码的顺序，输出所有在每对数字间插入 `+`，`-`，` `（空格） 后能得到结果为零的数列。\n", "hint": "翻译来自NOCOW\n\nUSACO 2.3\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.3] Zero Sum", "background": "", "description": "Consider an increasing sequence of numbers from $1$ to $N$: $1, 2, 3, \\ldots, N$.\n\nInsert `+` for addition, `-` for subtraction, or ` ` (a space) for blank between each pair of consecutive numbers (for example, `1-2 3` equals `1-23`). Do not insert any symbol before the first number.\n\nEvaluate the resulting expression and determine whether its value is $0$. Write a program to find all expressions of length $N$ whose value is zero.", "inputFormat": "A single line containing an integer $N$ ($3 \\leq N \\leq 9$).", "outputFormat": "In ASCII order, output all expressions obtained by inserting `+`, `-`, or ` ` (space) between each pair of consecutive numbers such that the resulting expression evaluates to $0$. Print one expression per line.", "hint": "Translated from NOCOW.\n\nUSACO 2.3.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.3] 零的数列 Zero Sum", "background": "", "description": "请考虑一个由 $1$ 到 $N$ 的数字组成的递增数列：$1, 2, 3, \\ldots, N$。\n\n现在请在数列中插入 `+` 表示加，或者 `-` 表示减，` `（空格） 表示空白（例如 `1-2 3` 就等于 `1-23`），来将每一对数字组合在一起（请不要在第一个数字前插入符号）。\n\n计算该表达式的结果并判断其值是否为 $0$。 请你写一个程序找出所有产生和为零的长度为N的数列。\n", "inputFormat": "单独的一行表示整数 $N$（$3 \\leq N \\leq 9$）。\n", "outputFormat": "按照 ASCI I码的顺序，输出所有在每对数字间插入 `+`，`-`，` `（空格） 后能得到结果为零的数列。\n", "hint": "翻译来自NOCOW\n\nUSACO 2.3\n", "locale": "zh-CN"}}}
{"pid": "P1474", "type": "P", "difficulty": 3, "samples": [["3 10\n1 2 5\n", "10\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2007", "USACO"], "title": "[USACO2.3] Money System / [USACO07OCT] Cow Cash G", "background": "", "description": "母牛们不但创建了它们自己的政党，而且选择了建立了自己的货币系统。由于它们特殊的思考方式，它们对货币的数值感到好奇。\n\n传统地，一个货币系统是由 $1,5,10,20,25,50,100$ 的单位面值组成的。\n\n母牛们想知道有多少种不同的方案来用货币系统中的货币来构造一个确定的面值。\n\n举例来说，使用一个由 $1,2,5,10$ 的单位面值组成的货币系统产生 $18$ 面值的一些可能的方法是：$18 \\times 1$，$9 \\times 2$，$8 \\times 2+2 \\times 1$，$3 \\times 5+2+1$，等等。\n\n写一个程序来计算有多少种方法用给定的货币系统来构造一定数量的面值。保证总数在 $64$ 位带符号整数的范围内。", "inputFormat": "第一行两个整数，代表货币系统中货币的种类数目 $V$（$1 \\leq V \\leq 25$）和要构造的面值 $N$（$1 \\leq N \\leq 10,000$）。\n\n第二行 $V$ 个整数，代表所有货币的单位面值。", "outputFormat": "仅一行一个整数，代表方案数。", "hint": "翻译来自 NOCOW。\n\nUSACO Training Section 2.3", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.3] Money System / [USACO07OCT] Cow Cash G", "background": "", "description": "The cows have not only created their own political party but also chosen to establish their own currency system. Because of their unique way of thinking, they are curious about monetary values.\n\nTraditionally, a currency system consists of denominations $1,5,10,20,25,50,100$.\n\nThe cows want to know how many different ways there are to form a specified value using the coins in the currency system.\n\nFor example, using a currency system with denominations $1,2,5,10$ to make a value of $18$, some possible ways are: $18 \\times 1$, $9 \\times 2$, $8 \\times 2+2 \\times 1$, $3 \\times 5+2+1$, and so on.\n\nWrite a program to compute how many ways there are to make a given amount using the provided currency system. It is guaranteed that the total fits in a $64$-bit signed integer.", "inputFormat": "The first line contains two integers, the number of coin types $V$ ($1 \\leq V \\leq 25$) and the target value $N$ ($1 \\leq N \\leq 10,000$).\n\nThe second line contains $V$ integers, the denominations of all coins.", "outputFormat": "A single line with one integer, the number of ways.", "hint": "Translated from NOCOW.\n\nUSACO Training Section 2.3.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.3] Money System / [USACO07OCT] Cow Cash G", "background": "", "description": "母牛们不但创建了它们自己的政党，而且选择了建立了自己的货币系统。由于它们特殊的思考方式，它们对货币的数值感到好奇。\n\n传统地，一个货币系统是由 $1,5,10,20,25,50,100$ 的单位面值组成的。\n\n母牛们想知道有多少种不同的方案来用货币系统中的货币来构造一个确定的面值。\n\n举例来说，使用一个由 $1,2,5,10$ 的单位面值组成的货币系统产生 $18$ 面值的一些可能的方法是：$18 \\times 1$，$9 \\times 2$，$8 \\times 2+2 \\times 1$，$3 \\times 5+2+1$，等等。\n\n写一个程序来计算有多少种方法用给定的货币系统来构造一定数量的面值。保证总数在 $64$ 位带符号整数的范围内。", "inputFormat": "第一行两个整数，代表货币系统中货币的种类数目 $V$（$1 \\leq V \\leq 25$）和要构造的面值 $N$（$1 \\leq N \\leq 10,000$）。\n\n第二行 $V$ 个整数，代表所有货币的单位面值。", "outputFormat": "仅一行一个整数，代表方案数。", "hint": "翻译来自 NOCOW。\n\nUSACO Training Section 2.3", "locale": "zh-CN"}}}
{"pid": "P1475", "type": "P", "difficulty": 3, "samples": [["3\n1 2 80\n2 3 80\n3 1 20", "1 2\n1 3\n2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "USACO"], "title": "[USACO2.3] 控制公司 Controlling Companies", "background": "", "description": "有些公司是其他公司的部分拥有者，因为他们获得了其他公司发行的股票的一部分。\n\n据说，如果至少满足了以下三个条件之一，公司 $A$ 就可以控制公司 $B$ 了：\n\n- 公司 $A$ = 公司 $B$。\n- 公司 $A$ 拥有大于 $50\\%$ 的公司 $B$ 的股票。\n- 公司 $A$ 控制 $K$（$K \\geq 1$）个公司，记为 $C_1, \\ldots, C_K$，每个公司 $C_i$ 拥有 $x_i\\%$ 的公司 $B$ 的股票，并且 $x_1+ \\ldots + x_K \\gt 50\\%$。\n\n给你一个表，每行包括三个数 $i,j,p$：表明公司 $i$ 享有公司 $j$ 的 $p\\%$ 的股票。计算所有的数对 $(h,s)$，表明公司 $h$ 控制公司 $s$。至多有 $100$ 个公司。", "inputFormat": "第一行一个整数 $N$，表明表格的行数。\n\n接下来 $N$ 行，每行三个整数 $i,j,p$，表示 $i$ 公司拥有 $j$ 公司 $p\\%$ 的股份。", "outputFormat": "输出零个或更多个的控制其他公司的公司。每行包括两个整数 $A,B$，表示 $A$ 公司控制了 $B$ 公司。将输出的数对以 $A$ 为第一关键字，$B$ 为第二关键字升序排列。\n\n请不要输出控制自己的公司（即你输出的数对均要满足 $A \\neq B$）。", "hint": "翻译来自NOCOW\n\nUSACO 2.3\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.3] Controlling Companies", "background": "", "description": "Some companies are partial owners of other companies because they own a portion of the shares issued by those companies.\n\nIt is said that if at least one of the following three conditions is met, company $A$ can control company $B$:\n\n- Company $A$ = company $B$.\n- Company $A$ owns more than $50\\%$ of company $B$'s stock.\n- Company $A$ controls $K$ ($K \\geq 1$) companies, denoted $C_1, \\ldots, C_K$, each company $C_i$ owns $x_i\\%$ of company $B$'s stock, and $x_1+ \\ldots + x_K \\gt 50\\%$.\n\nYou are given a table where each row contains three numbers $i,j,p$: it means company $i$ owns $p\\%$ of company $j$. Compute all pairs $(h,s)$ indicating that company $h$ controls company $s$. There are at most $100$ companies.", "inputFormat": "The first line contains an integer $N$, the number of rows in the table.\n\nEach of the next $N$ lines contains three integers $i,j,p$, meaning company $i$ owns $p\\%$ of company $j$'s stock.", "outputFormat": "Output zero or more companies that control other companies. Each line contains two integers $A,B$, meaning company $A$ controls company $B$. Sort the output pairs in ascending order by $A$ as the primary key and $B$ as the secondary key.\n\nDo not output cases where a company controls itself (i.e., all pairs must satisfy $A \\neq B$).", "hint": "Translated from NOCOW.\n\nUSACO 2.3.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.3] 控制公司 Controlling Companies", "background": "", "description": "有些公司是其他公司的部分拥有者，因为他们获得了其他公司发行的股票的一部分。\n\n据说，如果至少满足了以下三个条件之一，公司 $A$ 就可以控制公司 $B$ 了：\n\n- 公司 $A$ = 公司 $B$。\n- 公司 $A$ 拥有大于 $50\\%$ 的公司 $B$ 的股票。\n- 公司 $A$ 控制 $K$（$K \\geq 1$）个公司，记为 $C_1, \\ldots, C_K$，每个公司 $C_i$ 拥有 $x_i\\%$ 的公司 $B$ 的股票，并且 $x_1+ \\ldots + x_K \\gt 50\\%$。\n\n给你一个表，每行包括三个数 $i,j,p$：表明公司 $i$ 享有公司 $j$ 的 $p\\%$ 的股票。计算所有的数对 $(h,s)$，表明公司 $h$ 控制公司 $s$。至多有 $100$ 个公司。", "inputFormat": "第一行一个整数 $N$，表明表格的行数。\n\n接下来 $N$ 行，每行三个整数 $i,j,p$，表示 $i$ 公司拥有 $j$ 公司 $p\\%$ 的股份。", "outputFormat": "输出零个或更多个的控制其他公司的公司。每行包括两个整数 $A,B$，表示 $A$ 公司控制了 $B$ 公司。将输出的数对以 $A$ 为第一关键字，$B$ 为第二关键字升序排列。\n\n请不要输出控制自己的公司（即你输出的数对均要满足 $A \\neq B$）。", "hint": "翻译来自NOCOW\n\nUSACO 2.3\n", "locale": "zh-CN"}}}
{"pid": "P1476", "type": "P", "difficulty": 3, "samples": [["4\r\n5\r\n1 2 2\r\n2 3 2\r\n3 5 3\r\n1 4 3\r\n4 5 3\r\n", "7\r\n1 2 3 5\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论"], "title": "休息中的小呆", "background": null, "description": "当大家在考场中接受考验（折磨？）的时候，小呆正在悠闲（欠扁）地玩一个叫“最初梦想”的游戏。游戏描述的是一个叫 pass 的有志少年在不同的时空穿越对抗传说中的大魔王 chinesesonic 的故事。小呆发现这个游戏的故事流程设计得很复杂，它有着很多的分支剧情，但不同的分支剧情是可以同时进行的，因此游戏可以由剧情和剧情的结束点组成，某些剧情必须要在一些特定的剧情结束后才能继续发展。为了体验游戏的完整性，小呆决定要看到所有的分支剧情——完成所有的任务。但这样做会不会耽误小呆宝贵的睡觉时间呢？所以就请你来解决这个问题了。", "inputFormat": "小呆会给你一个剧情流程和完成条件的列表，\n\n其中第一行有一个数 $n$，表示总共有 $n$ 个剧情结束点；\n\n第二行一个数 $m$，表示有 $m$ 个不同的剧情；\n\n下面的 $m$ 行中每行有三个数，表示从剧情结束点 $i$ 必须完成一个耗费时间为 $k$ 的剧情才能到达剧情结束点 $j$。", "outputFormat": "你要告诉小呆完成整个游戏至少需要多少时间，以及要经过的所有可能的剧情结束点（按升序输出）。", "hint": "### 数据范围及约定\n\n对于全部数据，$0<n<100$，$0<m\\le 120$，$0<i\\le 100$，$0<j\\le 100$，$0<k\\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Dai at Rest", "background": "", "description": "While everyone is being tested (tortured?) in the exam room, Xiao Dai is leisurely (annoyingly) playing a game called \"Initial Dream.\" The game tells the story of an aspiring young man named pass who travels through different times and spaces to fight the legendary demon king chinesesonic. Xiao Dai finds the game's story flow quite complex. It has many branching plots, and different branches can proceed at the same time. Therefore, the game can be described by plots and plot endpoints, and some plots can only continue after certain specific plot endpoints are reached. To experience the game's completeness, Xiao Dai decides to see all the branches — complete all tasks. But will this delay Xiao Dai's precious sleep time? So please solve this problem.", "inputFormat": "Xiao Dai will give you a list describing the plot flow and completion conditions.\n\n- The first line contains a number $n$, meaning there are $n$ plot endpoints in total.\n- The second line contains a number $m$, meaning there are $m$ different plots.\n- Each of the next $m$ lines contains three numbers, meaning that from plot endpoint $i$, you must complete a plot that takes time $k$ in order to reach plot endpoint $j$.", "outputFormat": "You must tell Xiao Dai the minimum time needed to complete the entire game, and all possible plot endpoints that will be passed through (output in ascending order).", "hint": "Constraints\n\nFor all testdata, $0<n<100$, $0<m\\le 120$, $0<i\\le 100$, $0<j\\le 100$, $0<k\\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "休息中的小呆", "background": null, "description": "当大家在考场中接受考验（折磨？）的时候，小呆正在悠闲（欠扁）地玩一个叫“最初梦想”的游戏。游戏描述的是一个叫 pass 的有志少年在不同的时空穿越对抗传说中的大魔王 chinesesonic 的故事。小呆发现这个游戏的故事流程设计得很复杂，它有着很多的分支剧情，但不同的分支剧情是可以同时进行的，因此游戏可以由剧情和剧情的结束点组成，某些剧情必须要在一些特定的剧情结束后才能继续发展。为了体验游戏的完整性，小呆决定要看到所有的分支剧情——完成所有的任务。但这样做会不会耽误小呆宝贵的睡觉时间呢？所以就请你来解决这个问题了。", "inputFormat": "小呆会给你一个剧情流程和完成条件的列表，\n\n其中第一行有一个数 $n$，表示总共有 $n$ 个剧情结束点；\n\n第二行一个数 $m$，表示有 $m$ 个不同的剧情；\n\n下面的 $m$ 行中每行有三个数，表示从剧情结束点 $i$ 必须完成一个耗费时间为 $k$ 的剧情才能到达剧情结束点 $j$。", "outputFormat": "你要告诉小呆完成整个游戏至少需要多少时间，以及要经过的所有可能的剧情结束点（按升序输出）。", "hint": "### 数据范围及约定\n\n对于全部数据，$0<n<100$，$0<m\\le 120$，$0<i\\le 100$，$0<j\\le 100$，$0<k\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P1477", "type": "P", "difficulty": 5, "samples": [["6 5\n1 2\n2 3\n3 4\n4 1\n3 5", "4 4\n"], ["3 3\n1 2\n2 1\n2 3", "-1 -1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2008", "NOI", "深度优先搜索 DFS", "最大公约数 gcd"], "title": "[NOI2008] 假面舞会", "background": "", "description": "一年一度的假面舞会又开始了，栋栋也兴致勃勃的参加了今年的舞会。\n\n今年的面具都是主办方特别定制的。每个参加舞会的人都可以在入场时选择一个自己喜欢的面具。每个面具都有一个编号，主办方会把此编号告诉拿该面具的人。\n\n为了使舞会更有神秘感，主办方把面具分为 $k$（$k\\geq 3$）类，并使用特殊的技术将每个面具的编号标在了面具上，只有戴第 $i$ 类面具的人才能看到戴第 $i+1$  类面具的人的编号，戴第 $k$ 类面具的人能看到戴第 $1$ 类面具的人的编号。\n\n参加舞会的人并不知道有多少类面具，但是栋栋对此却特别好奇，他想自己算出有多少类面具，于是他开始在人群中收集信息。\n\n栋栋收集的信息都是戴第几号面具的人看到了第几号面具的编号。如戴第 $2$ 号面具的人看到了第 $5$ 号面具的编号。栋栋自己也会看到一些编号，他也会根据自己的面具编号把信息补充进去。\n\n由于并不是每个人都能记住自己所看到的全部编号，因此，栋栋收集的信息不能保证其完整性。现在请你计算，按照栋栋目前得到的信息，至多和至少有多少类面具。由于主办方已经声明了 $k\\geq 3$，所以你必须将这条信息也考虑进去。\n", "inputFormat": "第一行包含两个整数 $n, m$，用一个空格分隔，$n$ 表示主办方总共准备了多少个面具，$m$ 表示栋栋收集了多少条信息。接下来 $m$ 行，每行为两个用空格分开的整数 $a, b$，表示戴第 $a$ 号面具的人看到了第 $b$ 号面具的编号。相同的数对 $a, b$ 在输入文件中可能出现多次。\n", "outputFormat": "包含两个数，第一个数为最大可能的面具类数，第二个数为最小可能的面具类数。如果无法将所有的面具分为至少 $3$ 类，使得这些信息都满足，则认为栋栋收集的信息有错误，输出两个 `-1`。\n", "hint": "- 对于 $50\\%$ 的数据，满足 $n \\leq 300$，$m \\leq 10^3$；\n- 对于 $100\\%$ 的数据，满足 $n \\leq 10^5$，$m \\leq 10^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2008] Masquerade", "background": "", "description": "The annual masquerade has begun, and Dongdong is excited to attend this year’s party.\n\nThis year’s masks are specially made by the organizers. Each participant can choose a mask they like upon entry. Every mask has an ID number, and the organizer tells the wearer that number.\n\nTo add mystery, the organizer divides masks into $k$ classes ($k \\geq 3$). Using special techniques, the number of each mask is marked so that only people wearing a class $i$ mask can see the numbers of people wearing class $i+1$ masks, and people wearing class $k$ masks can see the numbers of people wearing class $1$ masks.\n\nParticipants do not know how many classes there are, but Dongdong is very curious and wants to figure it out himself, so he starts collecting information from the crowd.\n\nThe information Dongdong collects is of the form: “the wearer of mask number $a$ saw the number of mask $b$.” For example, the wearer of mask $2$ saw the number of mask $5$. Dongdong also sees some numbers himself, and he adds the corresponding information using his own mask number.\n\nSince not everyone can remember all the numbers they saw, Dongdong’s collected information may be incomplete. Please compute, based on the information Dongdong currently has, the maximum and the minimum possible numbers of mask classes. Since the organizer has declared $k \\geq 3$, you must also take this into account.", "inputFormat": "The first line contains two integers $n, m$, separated by a space, where $n$ is the total number of masks prepared by the organizer, and $m$ is the number of pieces of information Dongdong collected. The next $m$ lines each contain two integers $a, b$ separated by a space, meaning the wearer of mask $a$ saw the number of mask $b$. The same pair $a, b$ may appear multiple times in the input.", "outputFormat": "Output two numbers: the first is the maximum possible number of mask classes, and the second is the minimum possible number of mask classes. If it is impossible to partition all masks into at least $3$ classes so that all the information is satisfied, print two `-1`.", "hint": "- For $50\\%$ of the testdata, $n \\leq 300$, $m \\leq 10^3$.\n- For $100\\%$ of the testdata, $n \\leq 10^5$, $m \\leq 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2008] 假面舞会", "background": "", "description": "一年一度的假面舞会又开始了，栋栋也兴致勃勃的参加了今年的舞会。\n\n今年的面具都是主办方特别定制的。每个参加舞会的人都可以在入场时选择一个自己喜欢的面具。每个面具都有一个编号，主办方会把此编号告诉拿该面具的人。\n\n为了使舞会更有神秘感，主办方把面具分为 $k$（$k\\geq 3$）类，并使用特殊的技术将每个面具的编号标在了面具上，只有戴第 $i$ 类面具的人才能看到戴第 $i+1$  类面具的人的编号，戴第 $k$ 类面具的人能看到戴第 $1$ 类面具的人的编号。\n\n参加舞会的人并不知道有多少类面具，但是栋栋对此却特别好奇，他想自己算出有多少类面具，于是他开始在人群中收集信息。\n\n栋栋收集的信息都是戴第几号面具的人看到了第几号面具的编号。如戴第 $2$ 号面具的人看到了第 $5$ 号面具的编号。栋栋自己也会看到一些编号，他也会根据自己的面具编号把信息补充进去。\n\n由于并不是每个人都能记住自己所看到的全部编号，因此，栋栋收集的信息不能保证其完整性。现在请你计算，按照栋栋目前得到的信息，至多和至少有多少类面具。由于主办方已经声明了 $k\\geq 3$，所以你必须将这条信息也考虑进去。\n", "inputFormat": "第一行包含两个整数 $n, m$，用一个空格分隔，$n$ 表示主办方总共准备了多少个面具，$m$ 表示栋栋收集了多少条信息。接下来 $m$ 行，每行为两个用空格分开的整数 $a, b$，表示戴第 $a$ 号面具的人看到了第 $b$ 号面具的编号。相同的数对 $a, b$ 在输入文件中可能出现多次。\n", "outputFormat": "包含两个数，第一个数为最大可能的面具类数，第二个数为最小可能的面具类数。如果无法将所有的面具分为至少 $3$ 类，使得这些信息都满足，则认为栋栋收集的信息有错误，输出两个 `-1`。\n", "hint": "- 对于 $50\\%$ 的数据，满足 $n \\leq 300$，$m \\leq 10^3$；\n- 对于 $100\\%$ 的数据，满足 $n \\leq 10^5$，$m \\leq 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P1478", "type": "P", "difficulty": 2, "samples": [["8 15\n20 130\n120 3\n150 2\n110 7\n180 1\n50 8\n200 0\n140 3\n120 2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "洛谷原创", "排序", "背包 DP"], "title": "陶陶摘苹果（升级版）", "background": "", "description": "又是一年秋季时，陶陶家的苹果树结了 $n$ 个果子。陶陶又跑去摘苹果，这次他有一个 $a$ 公分的椅子。当他手够不着时，他会站到椅子上再试试。\n\n这次与 NOIp2005 普及组第一题不同的是：陶陶之前搬凳子，力气只剩下 $s$ 了。当然，每次摘苹果时都要用一定的力气。陶陶想知道在 $s<0$ 之前最多能摘到多少个苹果。\n\n现在已知 $n$ 个苹果到达地上的高度 $x_i$，椅子的高度 $a$，陶陶手伸直的最大长度 $b$，陶陶所剩的力气 $s$，陶陶摘一个苹果需要的力气 $y_i$，求陶陶最多能摘到多少个苹果。\n", "inputFormat": "第 $1$ 行：两个数 苹果数 $n$，力气 $s$。\n\n第 $2$ 行：两个数 椅子的高度 $a$，陶陶手伸直的最大长度 $b$。\n\n第 $3$ 行~第 $3+n-1$ 行：每行两个数 苹果高度 $x_i$，摘这个苹果需要的力气 $y_i$。\n", "outputFormat": "只有一个整数，表示陶陶最多能摘到的苹果数。\n", "hint": "对于 $100\\%$ 的数据，$n\\leq 5000$, $a\\leq 50$, $b\\leq 200$, $s\\leq 1000$, $x_i\\leq 280$, $y_i\\leq 100$。\n", "locale": "zh-CN", "translations": {"en": {"title": "TaoTao Picks Apples (Upgraded Version)", "background": "", "description": "It is autumn again, and the apple tree at TaoTao’s home has borne $n$ fruits. TaoTao goes to pick apples; this time he has a chair of height $a$ centimeters. When he cannot reach with his hand, he will stand on the chair and try again.\n\nDifferent from the first problem of NOIp 2005 Junior: after moving the stool earlier, TaoTao has only $s$ strength left. Of course, each time he picks an apple, it costs some strength. TaoTao wants to know the maximum number of apples he can pick before $s < 0$.\n\nNow you are given the heights above the ground of the $n$ apples $x_i$, the chair height $a$, TaoTao’s maximum reach $b$, his remaining strength $s$, and the strength needed to pick each apple $y_i$. Find the maximum number of apples TaoTao can pick.", "inputFormat": "Line 1: two numbers, the number of apples $n$ and the strength $s$.\n\nLine 2: two numbers, the chair height $a$ and TaoTao’s maximum reach $b$.\n\nLines 3 to $3 + n - 1$: each line contains two numbers, the apple height $x_i$ and the strength needed to pick this apple $y_i$.", "outputFormat": "Output a single integer, the maximum number of apples that TaoTao can pick.", "hint": "For $100\\%$ of the testdata, $n \\leq 5000$, $a \\leq 50$, $b \\leq 200$, $s \\leq 1000$, $x_i \\leq 280$, $y_i \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "陶陶摘苹果（升级版）", "background": "", "description": "又是一年秋季时，陶陶家的苹果树结了 $n$ 个果子。陶陶又跑去摘苹果，这次他有一个 $a$ 公分的椅子。当他手够不着时，他会站到椅子上再试试。\n\n这次与 NOIp2005 普及组第一题不同的是：陶陶之前搬凳子，力气只剩下 $s$ 了。当然，每次摘苹果时都要用一定的力气。陶陶想知道在 $s<0$ 之前最多能摘到多少个苹果。\n\n现在已知 $n$ 个苹果到达地上的高度 $x_i$，椅子的高度 $a$，陶陶手伸直的最大长度 $b$，陶陶所剩的力气 $s$，陶陶摘一个苹果需要的力气 $y_i$，求陶陶最多能摘到多少个苹果。\n", "inputFormat": "第 $1$ 行：两个数 苹果数 $n$，力气 $s$。\n\n第 $2$ 行：两个数 椅子的高度 $a$，陶陶手伸直的最大长度 $b$。\n\n第 $3$ 行~第 $3+n-1$ 行：每行两个数 苹果高度 $x_i$，摘这个苹果需要的力气 $y_i$。\n", "outputFormat": "只有一个整数，表示陶陶最多能摘到的苹果数。\n", "hint": "对于 $100\\%$ 的数据，$n\\leq 5000$, $a\\leq 50$, $b\\leq 200$, $s\\leq 1000$, $x_i\\leq 280$, $y_i\\leq 100$。\n", "locale": "zh-CN"}}}
{"pid": "P1479", "type": "P", "difficulty": 2, "samples": [["11", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "宿舍里的故事之五子棋", "background": "", "description": "宿舍里好多好多有趣的事！\n\n7890653 今天看到不知何时流行的五子棋，在宿舍里拿个本子，画一些格子，一个棋盘就做好了。\n\n当 7890653 把目光放到棋上，突发奇想……\n\n在一个 $5 \\times 5$ 的棋盘内，放上 $n$ 颗棋子，其中 $5 \\le n \\le 25$；\n\n这 $n$ 颗棋子可以放到棋盘内任意一个地方，但是不能重叠在一起。于是，便会有五颗棋子排成一行，或一列，或处在同一条对角线上。不同的放法可能会出现不同个数的五子的排列。\n\n本题你要做的是，给你一个 $n$，你要找出不同放法出现的五子连线的数量（设为 $k$），如 $n=11$，有：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rcwazq5o.png)\n\n只有这两种非负的 $k$ 值，（注意 $k$ 不重复），你要输出的便是 $k$ 值的和。\n\n也就是 $1+2=3$。", "inputFormat": "输入共一行一个数 $n$，含义如题意所示。保证 $1\\le n\\le 25$。", "outputFormat": "输出所有可能的 $k$ 值的和。容易发现 $k\\le 12$。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Stories in the Dormitory: Gomoku", "background": "", "description": "There are lots and lots of fun things in the dormitory!\n\nToday 7890653 saw Gomoku, which had unknowingly become popular. In the dorm, they took a notebook, drew some squares, and a board was ready.\n\nWhen 7890653 looked at the board, an idea came to mind...\n\nOn a $5 \\times 5$ board, place $n$ stones, where $5 \\le n \\le 25$; the $n$ stones can be placed anywhere on the board, but they cannot overlap. Thus, there may be five stones forming a row, a column, or lying on the same diagonal. Different placements may produce different numbers of five-in-a-row lines.\n\nYour task: given $n$, find all possible counts $k$ of five-in-a-row lines that can appear over different placements (counting full lines among the 5 rows, 5 columns, and 2 diagonals). For example, when $n = 11$, we have:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rcwazq5o.png)\n\nOnly these two nonnegative $k$ values occur (note that $k$ values are not repeated). You should output the sum of these distinct $k$ values.\n\nThat is, $1 + 2 = 3$.", "inputFormat": "The input contains one line with a single integer $n$, as described. Guaranteed $1 \\le n \\le 25$.", "outputFormat": "Output the sum of all possible $k$ values. It is easy to see that $k \\le 12$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "宿舍里的故事之五子棋", "background": "", "description": "宿舍里好多好多有趣的事！\n\n7890653 今天看到不知何时流行的五子棋，在宿舍里拿个本子，画一些格子，一个棋盘就做好了。\n\n当 7890653 把目光放到棋上，突发奇想……\n\n在一个 $5 \\times 5$ 的棋盘内，放上 $n$ 颗棋子，其中 $5 \\le n \\le 25$；\n\n这 $n$ 颗棋子可以放到棋盘内任意一个地方，但是不能重叠在一起。于是，便会有五颗棋子排成一行，或一列，或处在同一条对角线上。不同的放法可能会出现不同个数的五子的排列。\n\n本题你要做的是，给你一个 $n$，你要找出不同放法出现的五子连线的数量（设为 $k$），如 $n=11$，有：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rcwazq5o.png)\n\n只有这两种非负的 $k$ 值，（注意 $k$ 不重复），你要输出的便是 $k$ 值的和。\n\n也就是 $1+2=3$。", "inputFormat": "输入共一行一个数 $n$，含义如题意所示。保证 $1\\le n\\le 25$。", "outputFormat": "输出所有可能的 $k$ 值的和。容易发现 $k\\le 12$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1480", "type": "P", "difficulty": 2, "samples": [["10\n2", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "高精度"], "title": "A/B Problem（高精度除法Ⅰ）", "background": "", "description": "输入两个整数 $a,b$，输出它们的商。\n", "inputFormat": "两行，第一行是被除数，第二行是除数。\n", "outputFormat": "一行，商的整数部分。\n", "hint": "$0\\le a\\le 10^{5000}$，$1\\le b\\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "A/B Problem(High-Precision DivisionⅠ)", "background": "", "description": "Given two integers $a, b$, output their quotient.", "inputFormat": "Two lines. The first line is the dividend, the second line is the divisor.", "outputFormat": "One line: the integer part of the quotient.", "hint": "$0\\le a\\le 10^{5000}$, $1\\le b\\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "A/B Problem（高精度除法Ⅰ）", "background": "", "description": "输入两个整数 $a,b$，输出它们的商。\n", "inputFormat": "两行，第一行是被除数，第二行是除数。\n", "outputFormat": "一行，商的整数部分。\n", "hint": "$0\\le a\\le 10^{5000}$，$1\\le b\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1481", "type": "P", "difficulty": 2, "samples": [["5\ni\nint\ninteger\nintern\ninternet\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "树形 DP", "哈希 hashing", "字典树 Trie", "差分"], "title": "魔族密码", "background": "风之子刚走进他的考场，就……\n\n花花：当当当当~~偶是魅力女皇——花花！！^^（华丽出场，礼炮，鲜花）\n\n风之子：我呕……（杀死人的眼神）快说题目！否则……-\\_-###", "description": "\n\n花花：……咦~~好冷~~我们现在要解决的是魔族的密码问题（自我陶醉：搞不好魔族里面还会有人用密码给我和菜虫写情书咧，哦活活，当然是给我的比较多拉\\*^\\_^\\*）。\n\n魔族现在使用一种新型的密码系统。每一个密码都是一个给定的仅包含小写字母的英文单词表，每个单词至少包含 $1$ 个字母，至多 $75$ 个字母。如果在一个由一个词或多个词组成的表中，除了最后一个以外，每个单词都被其后的一个单词所包含，即前一个单词是后一个单词的前缀，则称词表为一个词链。例如下面单词组成了一个词链：\n\n- $\\verb!i!$；\n- $\\verb!int!$；\n- $\\verb!integer!$。\n\n但下面的单词不组成词链：\n\n- $\\verb!integer!$；\n- $\\verb!intern!$。\n\n现在你要做的就是在一个给定的单词表中取出一些词，组成最长的词链，就是包含单词数最多的词链。将它的单词数统计出来，就得到密码了。\n\n风之子：密码就是最长词链所包括的单词数阿……\n", "inputFormat": "这些文件的格式是，第一行为单词表中的单词数 $N$（$1 \\le N \\le 2000$），下面每一行有一个单词，按字典顺序排列，中间也没有重复的单词。", "outputFormat": "输出共一行，一个整数，表示密码。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Demon Password", "background": "As soon as Feng Zhi Zi stepped into his exam room, ...\n\nHuahua: Ta-da~~ I am the Queen of Charm — Huahua!! ^^ (grand entrance, confetti, flowers)\n\nFeng Zhi Zi: Ugh... (a killer stare) State the problem! Or else... -_-###", "description": "Huahua: ... Eh~~ such a chill~~ We are going to solve the demons’ password problem (self-indulgent: maybe some demons will even use ciphers to write love letters to me and Caichong; oh ho ho, of course I’ll get more of them ^_^).\n\nThe demon clan now uses a new kind of password system. Each password is a given list of English words containing only lowercase letters, and each word has at least $1$ letter and at most $75$ letters. If, in a list consisting of one or more words, every word except the last is contained by the next word, that is, the previous word is a prefix of the next word, then the list is called a “word chain.” For example, the following words form a word chain:\n- `i`.\n- `int`.\n- `integer`.\n\nBut the following words do not form a word chain:\n- `integer`.\n- `intern`.\n\nYour task is to pick some words from the given list to form the longest word chain, i.e., the chain that contains the most words. Count its number of words; that number is the password.\n\nFeng Zhi Zi: So the password is the number of words in the longest word chain...", "inputFormat": "The first line contains the number of words $N$ ($1 \\le N \\le 2000$). Each of the next $N$ lines contains one word, in lexicographic order, with no duplicates.", "outputFormat": "Output a single line with one integer, the password.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "魔族密码", "background": "风之子刚走进他的考场，就……\n\n花花：当当当当~~偶是魅力女皇——花花！！^^（华丽出场，礼炮，鲜花）\n\n风之子：我呕……（杀死人的眼神）快说题目！否则……-\\_-###", "description": "\n\n花花：……咦~~好冷~~我们现在要解决的是魔族的密码问题（自我陶醉：搞不好魔族里面还会有人用密码给我和菜虫写情书咧，哦活活，当然是给我的比较多拉\\*^\\_^\\*）。\n\n魔族现在使用一种新型的密码系统。每一个密码都是一个给定的仅包含小写字母的英文单词表，每个单词至少包含 $1$ 个字母，至多 $75$ 个字母。如果在一个由一个词或多个词组成的表中，除了最后一个以外，每个单词都被其后的一个单词所包含，即前一个单词是后一个单词的前缀，则称词表为一个词链。例如下面单词组成了一个词链：\n\n- $\\verb!i!$；\n- $\\verb!int!$；\n- $\\verb!integer!$。\n\n但下面的单词不组成词链：\n\n- $\\verb!integer!$；\n- $\\verb!intern!$。\n\n现在你要做的就是在一个给定的单词表中取出一些词，组成最长的词链，就是包含单词数最多的词链。将它的单词数统计出来，就得到密码了。\n\n风之子：密码就是最长词链所包括的单词数阿……\n", "inputFormat": "这些文件的格式是，第一行为单词表中的单词数 $N$（$1 \\le N \\le 2000$），下面每一行有一个单词，按字典顺序排列，中间也没有重复的单词。", "outputFormat": "输出共一行，一个整数，表示密码。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1482", "type": "P", "difficulty": 1, "samples": [["4/5\n5/4", "1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "洛谷原创"], "title": "Cantor表（升级版）", "background": "", "description": "现代数学的著名证明之一是 Georg Cantor 证明了有理数是可枚举的。他是用下面这一张表来证明这一命题的：\n\n$$\\begin{matrix}\n1/1 & 1/2 & 1/3 & 1/4 & 1/5 & \\cdots \\cr\n2/1 & 2/2 & 2/3 & 2/4 &  \\cdots \\cr\n3/1 & 3/2 & 3/3 &  \\cdots \\cr\n4/1 & 4/2 &  \\cdots \\cr\n5/1 &  \\cdots \\cr\n\\end{matrix}\n$$\n\n这次与 NOIp1999 第一题不同的是：这次需输入两个分数（不一定是最简分数），算出这两个分数的积（注意需要约分至最简分数），输出积在原表的第几列第几行（若积形如 $a$（即结果为整数）或者 $1/a$，则看作表内的 $a/1$ 或 $1/a$ 结算）。\n", "inputFormat": "共两行。每行输入一个分数（不一定是最简分数）。\n", "outputFormat": "两个整数，表示输入的两个分数的积在表中的第几列第几行。\n", "hint": "### 数据范围\n\n对于全部数据，两个分数的分母和分子均小于 $10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Cantor Table (Upgraded Version)", "background": "", "description": "One of the famous results in modern mathematics is Georg Cantor’s proof that the rational numbers are countable. He used the following table to demonstrate this fact:\n\n$$\\begin{matrix}\n1/1 & 1/2 & 1/3 & 1/4 & 1/5 & \\cdots \\cr\n2/1 & 2/2 & 2/3 & 2/4 &  \\cdots \\cr\n3/1 & 3/2 & 3/3 &  \\cdots \\cr\n4/1 & 4/2 &  \\cdots \\cr\n5/1 &  \\cdots \\cr\n\\end{matrix}\n$$\n\nThis time, unlike NOIp 1999 Problem 1, you need to input two fractions (not necessarily in lowest terms), compute their product (make sure to reduce it to lowest terms), and output which column and which row the product falls into in the original table (if the product is of the form $a$ (i.e., an integer) or $1/a$, treat it as $a/1$ or $1/a$ in the table).", "inputFormat": "Two lines. Each line contains a fraction (not necessarily in lowest terms).", "outputFormat": "Two integers, indicating in which column and which row the product of the two input fractions appears in the table.", "hint": "### Constraints\n\nFor all testdata, the numerators and denominators of the two fractions are less than $10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Cantor表（升级版）", "background": "", "description": "现代数学的著名证明之一是 Georg Cantor 证明了有理数是可枚举的。他是用下面这一张表来证明这一命题的：\n\n$$\\begin{matrix}\n1/1 & 1/2 & 1/3 & 1/4 & 1/5 & \\cdots \\cr\n2/1 & 2/2 & 2/3 & 2/4 &  \\cdots \\cr\n3/1 & 3/2 & 3/3 &  \\cdots \\cr\n4/1 & 4/2 &  \\cdots \\cr\n5/1 &  \\cdots \\cr\n\\end{matrix}\n$$\n\n这次与 NOIp1999 第一题不同的是：这次需输入两个分数（不一定是最简分数），算出这两个分数的积（注意需要约分至最简分数），输出积在原表的第几列第几行（若积形如 $a$（即结果为整数）或者 $1/a$，则看作表内的 $a/1$ 或 $1/a$ 结算）。\n", "inputFormat": "共两行。每行输入一个分数（不一定是最简分数）。\n", "outputFormat": "两个整数，表示输入的两个分数的积在表中的第几列第几行。\n", "hint": "### 数据范围\n\n对于全部数据，两个分数的分母和分子均小于 $10^4$。", "locale": "zh-CN"}}}
{"pid": "P1483", "type": "P", "difficulty": 4, "samples": [["5 4\n6 9 9 8 1 \n2 4\n1 2 5\n1 3 1\n2 4\n", "8\n13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学"], "title": "序列变换", "background": null, "description": "给定一个由 $n$ 个整数构成的序列 $a_1, a_2, \\ldots , a_n$，你需要对它进行如下操作：\n\n1. 输入格式 `1 x y`，表示把所有 $a_{k x}$（$k$ 为正整数，$k x \\le n$）都加上 $y$。\n2. 输入格式 `2 j`，表示输出 $a_j$。\n\n**特别的，对于操作 $2$ 当 $j=0$ 时输出 $0$。**", "inputFormat": "第一行，两个数 $n, m$，表示有 $n$ 个数，$m$ 条操作。  \n第二行，$n$ 个数 $a_1, a_2, \\ldots , a_n$。  \n接下来 $m$ 行，为 $m$ 条操作。", "outputFormat": "输出若干行，每行对应一次操作 $2$。", "hint": "对于 $40 \\%$ 的数据，$n \\le 100$。  \n对于 $100 \\%$ 的数据，$1 \\le n \\le {10}^6$，$1 \\le m \\le {10}^5$，$|a_i| \\le {10}^6$，$|y| \\le {10}^6$，$1 \\le x\\le n$，$0\\le j \\le n$，操作 $2$ 不超过 ${10}^4$ 条。", "locale": "zh-CN", "translations": {"en": {"title": "Sequence Transformation", "background": "", "description": "Given a sequence of $n$ integers $a_1, a_2, \\ldots , a_n$, you need to perform the following operations:\n\n1. Input format `1 x y`, which means add $y$ to all $a_{k x}$ (where $k$ is a positive integer and $k x \\le n$).\n2. Input format `2 j`, which means output $a_j$.\n\nSpecifically, for operation 2, when $j = 0$, output $0$.", "inputFormat": "The first line contains two integers $n, m$, meaning there are $n$ numbers and $m$ operations.  \nThe second line contains $n$ integers $a_1, a_2, \\ldots , a_n$.  \nThen follow $m$ lines, each describing one of the $m$ operations.", "outputFormat": "Output several lines, each corresponding to one operation 2.", "hint": "For $40 \\%$ of the testdata, $n \\le 100$.  \nFor $100 \\%$ of the testdata, $1 \\le n \\le {10}^6$, $1 \\le m \\le {10}^5$, $|a_i| \\le {10}^6$, $|y| \\le {10}^6$, $1 \\le x\\le n$, $0\\le j \\le n$, and the number of operation 2 is at most ${10}^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "序列变换", "background": null, "description": "给定一个由 $n$ 个整数构成的序列 $a_1, a_2, \\ldots , a_n$，你需要对它进行如下操作：\n\n1. 输入格式 `1 x y`，表示把所有 $a_{k x}$（$k$ 为正整数，$k x \\le n$）都加上 $y$。\n2. 输入格式 `2 j`，表示输出 $a_j$。\n\n**特别的，对于操作 $2$ 当 $j=0$ 时输出 $0$。**", "inputFormat": "第一行，两个数 $n, m$，表示有 $n$ 个数，$m$ 条操作。  \n第二行，$n$ 个数 $a_1, a_2, \\ldots , a_n$。  \n接下来 $m$ 行，为 $m$ 条操作。", "outputFormat": "输出若干行，每行对应一次操作 $2$。", "hint": "对于 $40 \\%$ 的数据，$n \\le 100$。  \n对于 $100 \\%$ 的数据，$1 \\le n \\le {10}^6$，$1 \\le m \\le {10}^5$，$|a_i| \\le {10}^6$，$|y| \\le {10}^6$，$1 \\le x\\le n$，$0\\le j \\le n$，操作 $2$ 不超过 ${10}^4$ 条。", "locale": "zh-CN"}}}
{"pid": "P1484", "type": "P", "difficulty": 5, "samples": [["6 3 \r\n100 1 -1 100 1 -1\r\n", "200"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "堆", "凸完全单调性（wqs 二分）", "链表", "反悔贪心"], "title": "种树", "background": "", "description": "cyrcyr 今天在种树，他在一条直线上挖了 $n$ 个坑。这 $n$ 个坑都可以种树，但为了保证每一棵树都有充足的养料，cyrcyr 不会在相邻的两个坑中种树。而且由于 cyrcyr 的树种不够，他至多会种 $k$ 棵树。假设 cyrcyr 有某种神能力，能预知自己在某个坑种树的获利会是多少（可能为负），请你帮助他计算出他的最大获利。\n", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个整数，第 $i$ 个数表示在直线上从左往右数第 $i$ 个坑种树的获利。\n", "outputFormat": "输出一个数，表示 cyrcyr 种树的最大获利。\n", "hint": "对于 $20\\%$ 的数据，$n\\leq 20$。\n\n对于 $50\\%$ 的数据，$n\\leq 6000$。\n\n对于 $100\\%$ 的数据，$1 \\le n\\leq 300000$，$1 \\le k\\leq \\dfrac{n}{2}$，在一个地方种树获利的绝对值在 $10^6$ 以内。\n", "locale": "zh-CN", "translations": {"en": {"title": "Planting Trees", "background": "", "description": "cyrcyr is planting trees today. He dug $n$ pits on a straight line. Each of these $n$ pits can be used to plant a tree, but to ensure every tree has sufficient nutrients, cyrcyr will not plant trees in two adjacent pits. Also, because cyrcyr does not have enough saplings, he will plant at most $k$ trees. Assuming cyrcyr has a special ability to foresee the profit from planting a tree in any pit (which may be negative), please help him compute his maximum total profit.", "inputFormat": "The first line contains two positive integers $n, k$.\n\nThe second line contains $n$ integers. The $i$-th number denotes the profit from planting a tree in the $i$-th pit from left to right on the line.", "outputFormat": "Output a single number, the maximum profit that cyrcyr can obtain.", "hint": "For $20\\%$ of the testdata, $n \\leq 20$.\n\nFor $50\\%$ of the testdata, $n \\leq 6000$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 300000$, $1 \\le k \\le \\dfrac{n}{2}$, and the absolute value of the profit at any single position is at most $10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "种树", "background": "", "description": "cyrcyr 今天在种树，他在一条直线上挖了 $n$ 个坑。这 $n$ 个坑都可以种树，但为了保证每一棵树都有充足的养料，cyrcyr 不会在相邻的两个坑中种树。而且由于 cyrcyr 的树种不够，他至多会种 $k$ 棵树。假设 cyrcyr 有某种神能力，能预知自己在某个坑种树的获利会是多少（可能为负），请你帮助他计算出他的最大获利。\n", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个整数，第 $i$ 个数表示在直线上从左往右数第 $i$ 个坑种树的获利。\n", "outputFormat": "输出一个数，表示 cyrcyr 种树的最大获利。\n", "hint": "对于 $20\\%$ 的数据，$n\\leq 20$。\n\n对于 $50\\%$ 的数据，$n\\leq 6000$。\n\n对于 $100\\%$ 的数据，$1 \\le n\\leq 300000$，$1 \\le k\\leq \\dfrac{n}{2}$，在一个地方种树获利的绝对值在 $10^6$ 以内。\n", "locale": "zh-CN"}}}
{"pid": "P1485", "type": "P", "difficulty": 4, "samples": [["3 1\n1 4 5\n", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线性数据结构", "二分"], "title": "火枪打怪", "background": null, "description": "LXL 进入到了一片丛林，结果他发现有 $n$ 只怪物排成一排站在他面前。LXL 有一杆火枪能对付这些怪物。他知道从左至右数第 $i$ 只怪物的血量是 $m_i$。现在 LXL 可以将一些子弹射向某个怪物。LXL 可以控制他所发射的子弹数量及子弹的威力值。当某个子弹射到第 $i$ 个怪物，如果这个子弹的威力值为 $p$，除了这个怪物会掉 $p$ 点血以外，它左边的第 $j$ 个怪物 $(j<i)$，也会遭到 $\\max(0, p - (i - j)^2)$ 的溅射伤害（好神奇的子弹）。当某只怪物的血量小于 $0$ 时，它就死了，但它的尸体还在，即怪物的位置永远不会改变。LXL 希望只用 $k$ 发子弹，请你求出一个最小的正整数 $p$，使 LXL 用 $k$ 发子弹且每发子弹的威力值为 $p$ 就可以消灭所有怪物。", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个正整数，第 $i$ 个正整数表示从左至右数第 $i$ 只怪物的血量 $m_i$。", "outputFormat": "一个正整数，表示子弹的最小威力值 $p$。", "hint": "对于 $30\\%$ 的数据，$n\\leq 300$。\n\n对于 $100\\%$ 的数据，$n\\leq 5\\times 10^5$，$k\\leq 5\\times 10^5$，$1\\leq m_i\\leq 10^{10}$。", "locale": "zh-CN", "translations": {"en": {"title": "Musket vs Monsters", "background": "", "description": "LXL enters a jungle and finds $n$ monsters standing in a line in front of him. LXL has a musket to deal with these monsters. He knows that the health of the $i$-th monster from left to right is $m_i$. Now LXL can shoot some bullets at certain monsters. LXL can control both the number of bullets he fires and the power of each bullet. When a bullet hits the $i$-th monster with power $p$, besides that monster losing $p$ health, the monster at position $j$ to its left (where $j < i$) also takes splash damage of $\\max(0, p - (i - j)^2)$ (what a magical bullet). When a monster’s health becomes less than $0$, it dies, but its body remains, i.e., the positions of the monsters never change. LXL wants to use exactly $k$ bullets. Please find the smallest positive integer $p$ such that LXL can eliminate all monsters by firing $k$ bullets, each with power $p$.", "inputFormat": "The first line contains two positive integers $n, k$.\n\nThe second line contains $n$ positive integers, where the $i$-th integer denotes the health $m_i$ of the $i$-th monster from left to right.", "outputFormat": "Output a single integer, the minimal bullet power $p$.", "hint": "For $30\\%$ of the testdata, $n \\leq 300$.\n\nFor $100\\%$ of the testdata, $n \\leq 5 \\times 10^5$, $k \\leq 5 \\times 10^5$, $1 \\leq m_i \\leq 10^{10}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "火枪打怪", "background": null, "description": "LXL 进入到了一片丛林，结果他发现有 $n$ 只怪物排成一排站在他面前。LXL 有一杆火枪能对付这些怪物。他知道从左至右数第 $i$ 只怪物的血量是 $m_i$。现在 LXL 可以将一些子弹射向某个怪物。LXL 可以控制他所发射的子弹数量及子弹的威力值。当某个子弹射到第 $i$ 个怪物，如果这个子弹的威力值为 $p$，除了这个怪物会掉 $p$ 点血以外，它左边的第 $j$ 个怪物 $(j<i)$，也会遭到 $\\max(0, p - (i - j)^2)$ 的溅射伤害（好神奇的子弹）。当某只怪物的血量小于 $0$ 时，它就死了，但它的尸体还在，即怪物的位置永远不会改变。LXL 希望只用 $k$ 发子弹，请你求出一个最小的正整数 $p$，使 LXL 用 $k$ 发子弹且每发子弹的威力值为 $p$ 就可以消灭所有怪物。", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个正整数，第 $i$ 个正整数表示从左至右数第 $i$ 只怪物的血量 $m_i$。", "outputFormat": "一个正整数，表示子弹的最小威力值 $p$。", "hint": "对于 $30\\%$ 的数据，$n\\leq 300$。\n\n对于 $100\\%$ 的数据，$n\\leq 5\\times 10^5$，$k\\leq 5\\times 10^5$，$1\\leq m_i\\leq 10^{10}$。", "locale": "zh-CN"}}}
{"pid": "P1486", "type": "P", "difficulty": 5, "samples": [["9 10\nI 60\nI 70\nS 50\nF 2\nI 30\nS 15\nA 5\nF 1\nF 2\n", "10\n20\n-1\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2004", "线段树", "二分", "平衡树", "树状数组", "NOI"], "title": "[NOI2004] 郁闷的出纳员", "background": "", "description": "OIER 公司是一家大型专业化软件公司，有着数以万计的员工。作为一名出纳员，我的任务之一便是统计每位员工的工资。这本来是一份不错的工作，但是令人郁闷的是，我们的老板反复无常，经常调整员工的工资。如果他心情好，就可能把每位员工的工资加上一个相同的量。反之，如果心情不好，就可能把当前在公司的所有员工的工资扣除一个相同的量。我真不知道除了调工资他还做什么其它事情。\n\n工资的频繁调整很让员工反感，尤其是集体扣除工资的时候，一旦某位员工发现自己的工资已经低于了合同规定的工资下界，他就会立刻气愤地离开公司，并且再也不会回来了。每位员工的工资下界都是统一规定的。每当一个人离开公司，我就要从电脑中把他的工资档案删去，同样，每当公司招聘了一位新员工，我就得为他新建一个工资档案。\n\n老板经常到我这边来询问工资情况，他并不问具体某位员工的工资情况，而是问现在工资第 $k$ 多的员工拿多少工资。每当这时，我就不得不对数万个员工进行一次漫长的排序，然后告诉他答案。\n\n好了，现在你已经对我的工作了解不少了。正如你猜的那样，我想请你编一个工资统计程序。怎么样，不是很困难吧？\n\n如果某个员工的初始工资低于最低工资标准，那么将不计入最后的答案内。", "inputFormat": "第一行有两个整数 $n$ 和 $\\min$。$n$ 表示下面有多少条命令，$\\min$ 表示工资下界。\n\n接下来的 $n$ 行，每行一个字符 $x$ 和一个整数 $k$，表示一条命令。命令可以是以下四种之一：\n\n- `I k`  新建一个工资档案，初始工资为 $k$。如果某员工的初始工资低于工资下界，他将立刻离开公司。\n- `A k`   把每位员工的工资加上 $k$。\n- `S k`   把每位员工的工资扣除 $k$。\n- `F k`    查询第 $k$ 多的工资。\n\n在初始时，可以认为公司里一个员工也没有。", "outputFormat": "对于每条 `F` 命令，你的程序要输出一行，仅包含一个整数，为当前工资第  $k$ 多的员工所拿的工资数，如果 $k$ 大于目前员工的数目，则输出 $-1$。\n\n输出的最后一行包含一个整数，为离开公司的员工的总数。\n\n请注意，初始工资低于工资下界的员工不算做离开公司的员工。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证：\n\n- `I` 命令的条数不超过 $10^5$；\n- `A` 和 `S` 命令的总条数不超过 $100$；\n- `F` 命令的条数不超过 $10^5$；\n- 每次工资调整的调整量不超过 $10^3$；\n- 新员工的工资不超过 $10^5$。\n- $0 \\leq n \\leq 3 \\times 10^5$，$0 \\leq \\text{min} \\leq 10^9$，输入的所有数字均在 $32$ 位带符号整形范围内。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2004] Depressed Cashier", "background": "", "description": "OIER is a large specialized software company with tens of thousands of employees. As a cashier, one of my tasks is to record every employee’s salary. It used to be a decent job, but what is depressing is that our boss is capricious and frequently adjusts employees’ salaries. If he is in a good mood, he may add the same amount to every employee’s salary. Conversely, if he is in a bad mood, he may deduct the same amount from the salaries of all employees currently in the company. I really do not know what else he does besides adjusting salaries.\n\nFrequent salary adjustments make employees unhappy, especially during collective deductions. Once an employee finds that his salary has fallen below the contractually agreed lower bound, he will immediately leave the company and never return. The lower bound is uniformly defined for all employees. Whenever someone leaves, I must delete his salary record from the computer. Similarly, whenever the company hires a new employee, I must create a new salary record for them.\n\nThe boss often asks me about the salary status. He does not ask about the salary of any specific employee, but instead asks for the salary of the $k$-th highest employee at the moment. Every time he does that, I have to sort tens of thousands of employees and then tell him the answer.\n\nAlright, now you know a lot about my job. As you guessed, I want you to write a salary statistics program. How about it, not too hard, right?\n\nIf an employee’s initial salary is below the minimum wage threshold, they are not included in the final tally.\n\n# Description\n\nInput\n\nThe first line contains two integers $n$ and $\\min$. Here, $n$ is the number of commands that follow, and $\\min$ is the lower bound of the salary.\n\nEach of the next $n$ lines contains a character $x$ and an integer $k$, representing one command. The command can be one of the following four types:\n- `I k`  Create a new salary record with initial salary $k$. If the initial salary is below the lower bound, the employee leaves immediately.\n- `A k`  Add $k$ to every employee’s salary.\n- `S k`  Subtract $k$ from every employee’s salary.\n- `F k`  Query the $k$-th highest salary.\n\nInitially, the company has no employees.", "inputFormat": "The first line contains two integers $n$ and $\\min$.\n\nEach of the following $n$ lines contains a character $x$ and an integer $k$, representing one command of the following four types:\n- `I k`  Insert a new employee with initial salary $k$. If $k < \\min$, the employee leaves immediately.\n- `A k`  Add $k$ to all current employees’ salaries.\n- `S k`  Subtract $k$ from all current employees’ salaries. Any employee whose salary falls below $\\min$ leaves immediately and is removed from the records.\n- `F k`  Query the $k$-th highest salary among current employees.\n\nInitially, there are no employees in the company.", "outputFormat": "For each `F` command, output one line containing a single integer: the current $k$-th highest salary. If $k$ is greater than the number of current employees, output $-1$.\n\nThe last line outputs a single integer: the total number of employees who have left the company.\n\nPlease note that employees whose initial salary is below the lower bound do not count as having left.", "hint": "Constraints\n\n- The number of `I` commands does not exceed $10^5$.\n- The total number of `A` and `S` commands does not exceed $100$.\n- The number of `F` commands does not exceed $10^5$.\n- The adjustment amount for each salary update does not exceed $10^3$.\n- A new employee’s salary does not exceed $10^5$.\n- $0 \\leq n \\leq 3 \\times 10^5$, $0 \\leq \\min \\leq 10^9$, and all input numbers are within the 32-bit signed integer range.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2004] 郁闷的出纳员", "background": "", "description": "OIER 公司是一家大型专业化软件公司，有着数以万计的员工。作为一名出纳员，我的任务之一便是统计每位员工的工资。这本来是一份不错的工作，但是令人郁闷的是，我们的老板反复无常，经常调整员工的工资。如果他心情好，就可能把每位员工的工资加上一个相同的量。反之，如果心情不好，就可能把当前在公司的所有员工的工资扣除一个相同的量。我真不知道除了调工资他还做什么其它事情。\n\n工资的频繁调整很让员工反感，尤其是集体扣除工资的时候，一旦某位员工发现自己的工资已经低于了合同规定的工资下界，他就会立刻气愤地离开公司，并且再也不会回来了。每位员工的工资下界都是统一规定的。每当一个人离开公司，我就要从电脑中把他的工资档案删去，同样，每当公司招聘了一位新员工，我就得为他新建一个工资档案。\n\n老板经常到我这边来询问工资情况，他并不问具体某位员工的工资情况，而是问现在工资第 $k$ 多的员工拿多少工资。每当这时，我就不得不对数万个员工进行一次漫长的排序，然后告诉他答案。\n\n好了，现在你已经对我的工作了解不少了。正如你猜的那样，我想请你编一个工资统计程序。怎么样，不是很困难吧？\n\n如果某个员工的初始工资低于最低工资标准，那么将不计入最后的答案内。", "inputFormat": "第一行有两个整数 $n$ 和 $\\min$。$n$ 表示下面有多少条命令，$\\min$ 表示工资下界。\n\n接下来的 $n$ 行，每行一个字符 $x$ 和一个整数 $k$，表示一条命令。命令可以是以下四种之一：\n\n- `I k`  新建一个工资档案，初始工资为 $k$。如果某员工的初始工资低于工资下界，他将立刻离开公司。\n- `A k`   把每位员工的工资加上 $k$。\n- `S k`   把每位员工的工资扣除 $k$。\n- `F k`    查询第 $k$ 多的工资。\n\n在初始时，可以认为公司里一个员工也没有。", "outputFormat": "对于每条 `F` 命令，你的程序要输出一行，仅包含一个整数，为当前工资第  $k$ 多的员工所拿的工资数，如果 $k$ 大于目前员工的数目，则输出 $-1$。\n\n输出的最后一行包含一个整数，为离开公司的员工的总数。\n\n请注意，初始工资低于工资下界的员工不算做离开公司的员工。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证：\n\n- `I` 命令的条数不超过 $10^5$；\n- `A` 和 `S` 命令的总条数不超过 $100$；\n- `F` 命令的条数不超过 $10^5$；\n- 每次工资调整的调整量不超过 $10^3$；\n- 新员工的工资不超过 $10^5$。\n- $0 \\leq n \\leq 3 \\times 10^5$，$0 \\leq \\text{min} \\leq 10^9$，输入的所有数字均在 $32$ 位带符号整形范围内。", "locale": "zh-CN"}}}
{"pid": "P1487", "type": "P", "difficulty": 5, "samples": [["53 23\r\n0.543 1.213 9768.134\r\n", "0.543"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学"], "title": "失落的成绩单", "background": "谁都知道，录成绩是件麻烦事，可 MC 却把成绩单丢了……\n", "description": "这一天老师要查第 $m$ 个同学的成绩，为了不挨批，MC努力回想，想起成绩单上的一个规律：\n\n若把成绩看作是一个实数数列，则 $A_i=\\dfrac{(A_{i-1})-(A_{i+1})}{2}+d$，（就是每一项为其前后两项之差除以 $2$ 再加 $d$）。此时，我告诉了 MC 一共 $n$ 项的数列首项 $A_1$ 和末项 $A_n$，以及 $d$。剩下的靠你了！\n", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行三个实数，依次是 $d,A_1,A_n$。", "outputFormat": "输出一个实数 $A_m$，保留 $3$ 位小数。\n", "hint": "$1\\le n\\le 60$，$0\\le m\\le n$，$|d|,|A_1|,|A_n|<10^4$", "locale": "zh-CN", "translations": {"en": {"title": "The Lost Report Card", "background": "Everyone knows recording grades is a hassle, but MC lost the report card....", "description": "On this day, the teacher wants to check the $m$-th student's grade. To avoid getting scolded, MC tries hard to recall and remembers a pattern on the report card:\n\nIf the grades are viewed as a real-valued sequence, then $A_i=\\dfrac{(A_{i-1})-(A_{i+1})}{2}+d$ (that is, each term equals the difference between its previous and next terms divided by $2$, then plus $d$). At this point, I told MC the first term $A_1$ and the last term $A_n$ of an $n$-term sequence, as well as $d$. The rest is up to you!", "inputFormat": "The first line contains two integers $n, m$.\n\nThe second line contains three real numbers, in order: $d, A_1, A_n$.", "outputFormat": "Output a real number $A_m$, rounded to $3$ decimal places.", "hint": "Constraints: $1 \\le n \\le 60$, $0 \\le m \\le n$, $|d|, |A_1|, |A_n| < 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "失落的成绩单", "background": "谁都知道，录成绩是件麻烦事，可 MC 却把成绩单丢了……\n", "description": "这一天老师要查第 $m$ 个同学的成绩，为了不挨批，MC努力回想，想起成绩单上的一个规律：\n\n若把成绩看作是一个实数数列，则 $A_i=\\dfrac{(A_{i-1})-(A_{i+1})}{2}+d$，（就是每一项为其前后两项之差除以 $2$ 再加 $d$）。此时，我告诉了 MC 一共 $n$ 项的数列首项 $A_1$ 和末项 $A_n$，以及 $d$。剩下的靠你了！\n", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行三个实数，依次是 $d,A_1,A_n$。", "outputFormat": "输出一个实数 $A_m$，保留 $3$ 位小数。\n", "hint": "$1\\le n\\le 60$，$0\\le m\\le n$，$|d|,|A_1|,|A_n|<10^4$", "locale": "zh-CN"}}}
{"pid": "P1488", "type": "P", "difficulty": 3, "samples": [["6\n0 1 2\n2 4 3\n4 2 0\n0 5 4\n", "JMcat Win\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["博弈论"], "title": "肥猫的游戏", "background": null, "description": "野猫与胖子，合起来简称肥猫，是一个班的同学，他们也都是数学高手，所以经常在一起讨论数学问题也就不足为奇了。\n\n一次，野猫遇到了一道有趣的几何游戏题目，便拿给胖子看。游戏要求在一个有 $n$ 个顶点凸多边形上进行，这个凸多边形的 $n-3$ 条对角线将多边形分成 $n-2$ 个三角形，这 $n-3$ 条对角线在多边形的顶点相交。三角形中的一个被染成黑色，其余是白色。\n\n双方轮流进行游戏，当轮到一方时，他必须沿着画好的对角线，从多边形上切下一个三角形。切下黑色三角形的一方获胜。胖子一看觉得确实很有趣，不如就一起玩玩吧。假设游戏由野猫先开始，那么野猫是否有必胜的策略呢？请写一个程序帮助野猫算一算。", "inputFormat": "第一行为一个整数 $n$，表示多边形的顶点数，多边形的顶点由 $0$ 至 $n-1$ 顺时针标号。\n\n接着的 $n-2$ 行描述组成多边形的三角形。第 $i+1$ 行 $(1 \\leq i \\leq n-2)$ 有三个空格分隔的非负整数 $a$、$b$、$c$，它们是第 $i$ 个三角形的顶点编号。第一个给出的三角形是黑色的。", "outputFormat": "只有一行，倘若野猫有必胜策略，输出 `JMcat Win`；否则，输出 `PZ Win`（注意大小写和空格）。", "hint": "$4 \\leq n \\leq 5 \\times 10^4$。\n\n如果连接一个多边形中任意两点的线段都完全包含于这个多边形，则称这个多边形为凸多边形。", "locale": "zh-CN", "translations": {"en": {"title": "The Fat Cat's Game", "background": "", "description": "JMcat and PZ are classmates, and both are math whizzes, so it is no surprise that they often discuss math problems together.\n\nOne day, JMcat found an interesting geometric game and showed it to PZ. The game is played on a convex polygon with $n$ vertices. Its $n-3$ diagonals divide the polygon into $n-2$ triangles, and these $n-3$ diagonals intersect at the polygon’s vertices. One of the triangles is colored black, and the others are white.\n\nThe two players take turns. On your turn, you must cut off one triangle from the polygon along the drawn diagonals. The player who cuts off the black triangle wins. Assume JMcat moves first. Does JMcat have a winning strategy? Please write a program to help JMcat find out.", "inputFormat": "The first line contains an integer $n$, the number of vertices of the polygon. The vertices are labeled from $0$ to $n-1$ in clockwise order.\n\nEach of the next $n-2$ lines describes one of the triangles forming the polygon. Line $i+1$ $(1 \\leq i \\leq n-2)$ contains three space-separated nonnegative integers $a$, $b$, and $c$, which are the vertex labels of the $i$-th triangle. The first triangle given is black.", "outputFormat": "Output a single line. If JMcat has a winning strategy, print `JMcat Win`; otherwise, print `PZ Win` (note the case and the space).", "hint": "Constraints: $4 \\leq n \\leq 5 \\times 10^4$.\n\nA polygon is called convex if every line segment connecting any two points of the polygon lies entirely within the polygon.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "肥猫的游戏", "background": null, "description": "野猫与胖子，合起来简称肥猫，是一个班的同学，他们也都是数学高手，所以经常在一起讨论数学问题也就不足为奇了。\n\n一次，野猫遇到了一道有趣的几何游戏题目，便拿给胖子看。游戏要求在一个有 $n$ 个顶点凸多边形上进行，这个凸多边形的 $n-3$ 条对角线将多边形分成 $n-2$ 个三角形，这 $n-3$ 条对角线在多边形的顶点相交。三角形中的一个被染成黑色，其余是白色。\n\n双方轮流进行游戏，当轮到一方时，他必须沿着画好的对角线，从多边形上切下一个三角形。切下黑色三角形的一方获胜。胖子一看觉得确实很有趣，不如就一起玩玩吧。假设游戏由野猫先开始，那么野猫是否有必胜的策略呢？请写一个程序帮助野猫算一算。", "inputFormat": "第一行为一个整数 $n$，表示多边形的顶点数，多边形的顶点由 $0$ 至 $n-1$ 顺时针标号。\n\n接着的 $n-2$ 行描述组成多边形的三角形。第 $i+1$ 行 $(1 \\leq i \\leq n-2)$ 有三个空格分隔的非负整数 $a$、$b$、$c$，它们是第 $i$ 个三角形的顶点编号。第一个给出的三角形是黑色的。", "outputFormat": "只有一行，倘若野猫有必胜策略，输出 `JMcat Win`；否则，输出 `PZ Win`（注意大小写和空格）。", "hint": "$4 \\leq n \\leq 5 \\times 10^4$。\n\n如果连接一个多边形中任意两点的线段都完全包含于这个多边形，则称这个多边形为凸多边形。", "locale": "zh-CN"}}}
{"pid": "P1489", "type": "P", "difficulty": 4, "samples": [["3\n35\n20\n32\n", "35 52"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP"], "title": "猫狗大战", "background": "", "description": "新一年度的猫狗大战通过 SC（星际争霸）这款经典的游戏来较量，野猫和飞狗这对冤家为此已经准备好久了，为了使战争更有难度和戏剧性，双方约定只能选择 Terran（人族）并且只能造机枪兵。\n\n比赛开始了，很快，野猫已经攒足几队机枪兵，试探性的发动进攻；然而，飞狗的机枪兵个数也已经不少了。野猫和飞狗的兵在飞狗的家门口相遇了，于是，便有一场腥风血雨和阵阵惨叫声。由于是在飞狗的家门口，飞狗的兵补给会很快，野猫看敌不过，决定撤退。这时飞狗的兵力也不足够多，所以没追出来。\n\n由于不允许造医生，机枪兵没办法补血。受伤的兵只好忍了。\n\n现在，野猫又攒足了足够的兵力，决定发起第二次进攻。为了使这次进攻给狗狗造成更大的打击，野猫决定把现有的兵分成两部分，从两路进攻。由于有些兵在第一次战斗中受伤了，为了使两部分的兵实力平均些，分的规则是这样的：\n\n1. 两部分兵的个数最多只能差一个；\n2. 每部分兵的血值总和必须要尽可能接近。\n\n现在请你编写一个程序，给定野猫现在有的兵的个数以及每个兵的血格值，求出野猫按上述规则分成两部分后每部分兵的血值总和。", "inputFormat": "第一行为一个整数 $n\\ (1 \\le n \\le 200)$，表示野猫现在有的机枪兵的个数。以下的 $n$ 行每行一个整数，表示每个机枪兵的血格 $(1 \\le a_i \\le 40)$。", "outputFormat": "一行，为两个整数，表示分成两部分后每部分兵的血值总和。要求输出的第一部分兵的血量总和不大于第二部分兵的血量总和。", "hint": "TO 狗狗：这道题的数据范围我已经尽量按星际的游戏规则来了，如果你再固执于由于机枪兵的攻击力一定使不能达到某些血格值或者游戏中一定要造农民不能使机枪兵的人数达到 $200$ 的话，我只能决定将那场猫狗大战的录像公开于世人了！！！\n", "locale": "zh-CN", "translations": {"en": {"title": "Cat–Dog Showdown", "background": "", "description": "In the new season of the Cat–Dog showdown, the competition is decided through the classic game SC (StarCraft). The archrivals Wildcat and Flying Dog have prepared for a long time. To make the war more challenging and dramatic, they agreed that both sides can only choose Terran and build only Marines.\n\nThe match begins. Soon, Wildcat gathers several squads of Marines and launches a probing attack; however, Flying Dog also has quite a few Marines. The forces meet at Flying Dog’s doorstep, and a bloody battle ensues with anguished screams. Since the fight is at Flying Dog’s home base, his reinforcements arrive quickly. Seeing the disadvantage, Wildcat retreats. At that moment, Flying Dog’s forces are not numerous enough to pursue.\n\nBecause Medics are not allowed, Marines cannot heal. The wounded just have to endure.\n\nNow, Wildcat has once again amassed enough forces and decides to launch a second offensive. To deal a heavier blow this time, Wildcat decides to split the current army into two parts to attack from two routes. Since some Marines were wounded in the first battle, the splitting rule aims to balance the two groups as follows:\n\n1. The numbers of Marines in the two parts may differ by at most one.\n2. The total HP of each part must be as close as possible.\n\nPlease write a program that, given the number of Marines Wildcat currently has and the HP of each Marine, computes the total HP of each part after splitting according to the rules above.", "inputFormat": "The first line contains an integer $n\\ (1 \\le n \\le 200)$, the number of Marines Wildcat currently has. Each of the following $n$ lines contains one integer, the HP of a Marine $(1 \\le a_i \\le 40)$.", "outputFormat": "Output one line with two integers: the total HP of each part after splitting. The total HP of the first part must not exceed that of the second part.", "hint": "To Flying Dog: I have tried to set the Constraints of this problem in line with StarCraft’s rules. If you still insist that a Marine’s attack values make certain HP totals unreachable, or that the game must build SCVs so the number of Marines cannot reach $200$, then I will have no choice but to make the replay of that Cat–Dog showdown public to the world!\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "猫狗大战", "background": "", "description": "新一年度的猫狗大战通过 SC（星际争霸）这款经典的游戏来较量，野猫和飞狗这对冤家为此已经准备好久了，为了使战争更有难度和戏剧性，双方约定只能选择 Terran（人族）并且只能造机枪兵。\n\n比赛开始了，很快，野猫已经攒足几队机枪兵，试探性的发动进攻；然而，飞狗的机枪兵个数也已经不少了。野猫和飞狗的兵在飞狗的家门口相遇了，于是，便有一场腥风血雨和阵阵惨叫声。由于是在飞狗的家门口，飞狗的兵补给会很快，野猫看敌不过，决定撤退。这时飞狗的兵力也不足够多，所以没追出来。\n\n由于不允许造医生，机枪兵没办法补血。受伤的兵只好忍了。\n\n现在，野猫又攒足了足够的兵力，决定发起第二次进攻。为了使这次进攻给狗狗造成更大的打击，野猫决定把现有的兵分成两部分，从两路进攻。由于有些兵在第一次战斗中受伤了，为了使两部分的兵实力平均些，分的规则是这样的：\n\n1. 两部分兵的个数最多只能差一个；\n2. 每部分兵的血值总和必须要尽可能接近。\n\n现在请你编写一个程序，给定野猫现在有的兵的个数以及每个兵的血格值，求出野猫按上述规则分成两部分后每部分兵的血值总和。", "inputFormat": "第一行为一个整数 $n\\ (1 \\le n \\le 200)$，表示野猫现在有的机枪兵的个数。以下的 $n$ 行每行一个整数，表示每个机枪兵的血格 $(1 \\le a_i \\le 40)$。", "outputFormat": "一行，为两个整数，表示分成两部分后每部分兵的血值总和。要求输出的第一部分兵的血量总和不大于第二部分兵的血量总和。", "hint": "TO 狗狗：这道题的数据范围我已经尽量按星际的游戏规则来了，如果你再固执于由于机枪兵的攻击力一定使不能达到某些血格值或者游戏中一定要造农民不能使机枪兵的人数达到 $200$ 的话，我只能决定将那场猫狗大战的录像公开于世人了！！！\n", "locale": "zh-CN"}}}
{"pid": "P1490", "type": "P", "difficulty": 5, "samples": [["6\r\n", "3 2\r\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索"], "title": "买蛋糕", "background": "", "description": "野猫过生日，大家当然会送礼物了（咳咳，没送礼物的同志注意了哈！！），由于不知道送什么好，又考虑到实用性等其他问题，大家决定合伙给野猫买一个生日蛋糕。大家不知道最后要买的蛋糕的准确价格，而只会给蛋糕估价，即要买一个不超过多少钱的蛋糕。众 OIer 借此发挥：能否用最少的钱币数去凑成估价范围内的所有价值，使得不管蛋糕价值多少，都不用找钱……\n\n现在问题由此引出：对于一个给定的 $n$，能否用最少的不等的正整数去组成 $n$ 以内（包括 $n$）的所有的正整数呢？如果能，最少需要多少个正整数，用最少个数又有多少不同的组成方法呢？\n", "inputFormat": "只有一行包含一个整数 $n\\ (1\\le n\\le 1000)$。\n\n ", "outputFormat": "一行两个数，第一个数是最少需要多少个数，第二个数是用最少个数的组成方案个数。两个答案用空格分隔。\n", "hint": "最少用三个数，有两种方法，分别是：$1,2,3$ 和 $1,2,4$。\n\n- 对于 $1,2,3$ 有 $1,2,3$，$1+3$，$2+3$，$1+2+3$；\n- 对于 $1,2,4$ 有 $1$，$2$，$1+2$，$4$，$1+4$，$2+4$。\n\n \n ", "locale": "zh-CN", "translations": {"en": {"title": "Buying a Cake", "background": "", "description": "It’s Wildcat’s birthday, and of course everyone is bringing gifts (ahem, those who didn’t, take note!). Not knowing what to buy and considering practicality, everyone decides to chip in to buy Wildcat a birthday cake. They don’t know the exact price of the cake, but they can set a price estimate, i.e., they will buy a cake that does not exceed a certain amount. The OIers then pose a challenge: can we use the fewest number of coins to make all values within the estimate range, so that no matter the cake’s price, no change is needed?\n\nThis leads to the following problem: for a given $n$, can we use the fewest distinct positive integers to form all positive integers up to and including $n$? If yes, what is the minimal number of positive integers required, and with that minimal number, how many different ways are there?", "inputFormat": "A single line containing an integer $n\\ (1\\le n\\le 1000)$.", "outputFormat": "One line with two numbers: the first is the minimal required count, and the second is the number of compositions using that minimal count. The two answers are separated by a space.", "hint": "Using three numbers is minimal; there are two methods: $1,2,3$ and $1,2,4$.\n\n- For $1,2,3$ there are $1,2,3$，$1+3$，$2+3$，$1+2+3$.\n- For $1,2,4$ there are $1$，$2$，$1+2$，$4$，$1+4$，$2+4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "买蛋糕", "background": "", "description": "野猫过生日，大家当然会送礼物了（咳咳，没送礼物的同志注意了哈！！），由于不知道送什么好，又考虑到实用性等其他问题，大家决定合伙给野猫买一个生日蛋糕。大家不知道最后要买的蛋糕的准确价格，而只会给蛋糕估价，即要买一个不超过多少钱的蛋糕。众 OIer 借此发挥：能否用最少的钱币数去凑成估价范围内的所有价值，使得不管蛋糕价值多少，都不用找钱……\n\n现在问题由此引出：对于一个给定的 $n$，能否用最少的不等的正整数去组成 $n$ 以内（包括 $n$）的所有的正整数呢？如果能，最少需要多少个正整数，用最少个数又有多少不同的组成方法呢？\n", "inputFormat": "只有一行包含一个整数 $n\\ (1\\le n\\le 1000)$。\n\n ", "outputFormat": "一行两个数，第一个数是最少需要多少个数，第二个数是用最少个数的组成方案个数。两个答案用空格分隔。\n", "hint": "最少用三个数，有两种方法，分别是：$1,2,3$ 和 $1,2,4$。\n\n- 对于 $1,2,3$ 有 $1,2,3$，$1+3$，$2+3$，$1+2+3$；\n- 对于 $1,2,4$ 有 $1$，$2$，$1+2$，$4$，$1+4$，$2+4$。\n\n \n ", "locale": "zh-CN"}}}
{"pid": "P1491", "type": "P", "difficulty": 5, "samples": [["3 3\r\n0 0\r\n1 1\r\n0 2\r\n1 2\r\n1 3\r\n2 3\r\n", "2.83"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "优先队列", "最短路"], "title": "集合位置", "background": null, "description": "每次有大的活动，大家都要在一起“聚一聚”，不管是去好乐迪，还是避风塘，或者汤姆熊，大家都要玩的痛快。还记得心语和花儿在跳舞机上的激情与释放，还记得草草的投篮技艺是如此的高超，还记得狗狗的枪法永远是 S ……还有不能忘了，胖子的歌声永远是让我们惊叫的！！\n\n今天是野猫的生日，所以想到这些也正常，只是因为是上学日，没法一起去玩了。但回忆一下那时的甜蜜总是一种幸福嘛。。。\n\n但是每次集合的时候都会出现问题！野猫是公认的“路盲”，野猫自己心里也很清楚，每次都提前出门，但还是经常迟到，这点让大家很是无奈。后来，野猫在每次出门前，都会向花儿咨询一下路径，根据已知的路径中，总算能按时到了。\n\n现在提出这样的一个问题：给出 $n$ 个点的坐标，其中第一个为野猫的出发位置，最后一个为大家的集合位置，并给出哪些位置点是相连的。野猫从出发点到达集合点，总会挑一条最近的路走，如果野猫没找到最近的路，他就会走第二近的路。请帮野猫求一下这条第二最短路径长度。\n\n特别地，选取的第二短路径**不会重复经过同一个点**，即使可能重复走过同一个点多次路程会更短。", "inputFormat": "第一行是两个整数 $n(1 \\le n \\le 200)$ 和 $m(1 \\le m\\le 10000)$，表示一共有 $n$ 个点和 $m$ 条路，以下 $n$ 行每行两个数 $x_i$，$y_i$，$(-500 \\le x_i,y_i \\le 500),$ 代表第 $i$ 个点的坐标，再往下的 $m$ 行每行两个整数 $p_j$，$q_j,(1 \\le p_j,q_j \\le n)$，表示两个点之间有一条路，数据没有重边，**可能有自环**。", "outputFormat": "只有一行包含一个数，为第二最短路线的距离（保留两位小数），如果存在多条第一短路径，则答案就是第一最短路径的长度；如果不存在第二最短路径，输出 `-1`。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Meeting Location", "background": "", "description": "Every time there is a big hangout, everyone gets together no matter if it is at Haoledi, Bifengtang, or Tangmuxiong, and we all have a blast. We still remember Xinyu and Hua'er’s passion and release on the dance machine, remember how amazing Caocao’s basketball shooting was, remember how Gougou’s aim was always S... and we must not forget that Pangzi’s singing always made us scream in surprise!\n\nToday is Wildcat’s birthday, so it’s normal to think of all this. It’s just a school day, so we can’t go out together. But recalling those sweet times is still a kind of happiness.\n\nHowever, every time we meet up, there is a problem! Wildcat is a recognized “road-blind” person. Wildcat knows this well, always leaving early, yet still often arriving late, which leaves everyone helpless. Later, before each trip, Wildcat would consult Hua'er about the route. Based on known routes, he could finally arrive on time.\n\nNow here is the problem: given the coordinates of $n$ points, where the first one is Wildcat’s starting position and the last one is the group’s meeting position, and given which positions are connected. From the start to the meeting point, Wildcat will always choose a shortest route. If Wildcat does not find the shortest route, he will take the second-shortest route. Please help Wildcat find the length of this second-shortest path.\n\nIn particular, the chosen second-shortest path will not visit the same vertex more than once, even if allowing repeated visits to the same vertex could make it shorter.", "inputFormat": "The first line contains two integers $n$ ($1 \\le n \\le 200$) and $m$ ($1 \\le m \\le 10000$), indicating there are $n$ points and $m$ roads in total. The next $n$ lines each contain two numbers $x_i$, $y_i$ ($-500 \\le x_i, y_i \\le 500$), representing the coordinates of the $i$-th point. The following $m$ lines each contain two integers $p_j$, $q_j$ ($1 \\le p_j, q_j \\le n$), indicating that there is a road between these two points. There are no multiple edges in the testdata; self-loops may exist.", "outputFormat": "Output a single line containing one number: the distance of the second-shortest route (keep two decimal places). If there are multiple shortest paths, then the answer is the shortest-path length. If no second-shortest path exists, output `-1`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "集合位置", "background": null, "description": "每次有大的活动，大家都要在一起“聚一聚”，不管是去好乐迪，还是避风塘，或者汤姆熊，大家都要玩的痛快。还记得心语和花儿在跳舞机上的激情与释放，还记得草草的投篮技艺是如此的高超，还记得狗狗的枪法永远是 S ……还有不能忘了，胖子的歌声永远是让我们惊叫的！！\n\n今天是野猫的生日，所以想到这些也正常，只是因为是上学日，没法一起去玩了。但回忆一下那时的甜蜜总是一种幸福嘛。。。\n\n但是每次集合的时候都会出现问题！野猫是公认的“路盲”，野猫自己心里也很清楚，每次都提前出门，但还是经常迟到，这点让大家很是无奈。后来，野猫在每次出门前，都会向花儿咨询一下路径，根据已知的路径中，总算能按时到了。\n\n现在提出这样的一个问题：给出 $n$ 个点的坐标，其中第一个为野猫的出发位置，最后一个为大家的集合位置，并给出哪些位置点是相连的。野猫从出发点到达集合点，总会挑一条最近的路走，如果野猫没找到最近的路，他就会走第二近的路。请帮野猫求一下这条第二最短路径长度。\n\n特别地，选取的第二短路径**不会重复经过同一个点**，即使可能重复走过同一个点多次路程会更短。", "inputFormat": "第一行是两个整数 $n(1 \\le n \\le 200)$ 和 $m(1 \\le m\\le 10000)$，表示一共有 $n$ 个点和 $m$ 条路，以下 $n$ 行每行两个数 $x_i$，$y_i$，$(-500 \\le x_i,y_i \\le 500),$ 代表第 $i$ 个点的坐标，再往下的 $m$ 行每行两个整数 $p_j$，$q_j,(1 \\le p_j,q_j \\le n)$，表示两个点之间有一条路，数据没有重边，**可能有自环**。", "outputFormat": "只有一行包含一个数，为第二最短路线的距离（保留两位小数），如果存在多条第一短路径，则答案就是第一最短路径的长度；如果不存在第二最短路径，输出 `-1`。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1492", "type": "P", "difficulty": 5, "samples": [["7 4\r\n", "0000000000\r\n0000000000\r\n0000000000\r\n0000000000\r\n0000000000\r\n0000000000\r\n0000000000\r\n0000000000\r\n0000000000\r\n0000000330\r\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "猩猩散步", "background": "", "description": "猩猩，骆驼，还有泡泡经常喜欢在饭后到操场上散步，由于猩猩的走路姿势最突出最显眼，理所应当的成为他们中的主角，所以我的题目就说猩猩散步了。（骆驼和泡泡别有意见哈，和猩猩争啥……）\n\n当然，话说回来，猩猩在 OI 上的能力也是不容低估的，你看，散步时还会想一道与此相关的问题，这是道经典的不能再经典的问题了。\n\n在一个 $m×n$ 的矩阵上，猩猩在左下角的顶点出现了，他只能沿着路径向上或者向右走，他的目标是“蠕动”到右上角的顶点，问他有多少路径可以选择。嗯，这个、这个、这个似乎地球人都知道怎么做，但是请注意，我有个条件没给呢！$m$ 和 $n$ 现在的最大范围是 $5\\times 10^4$，这可怎么办？仔细想想吧。\n", "inputFormat": "只有一行，包含两个整数 $m$ 和 $n$，其上限均为 $5\\times 10^4$。\n", "outputFormat": "由于最后的答案数目过大，所以只检查后 $100$ 位，输出时每行十个数字，没空格间隔，共十行，如果答案位数没超过 $100$ 位，则需要在空位上补 $0$。\n\n ", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Xingxing's Stroll", "background": "", "description": "Xingxing, Luotuo, and Paopao often like to take a stroll on the playground after dinner. Because Xingxing's walking posture is the most eye-catching, he naturally becomes the protagonist among them, so my problem is about Xingxing's stroll. (Luotuo and Paopao, please don’t mind—no need to compete with Xingxing.)\n\nBy the way, Xingxing’s ability in OI is not to be underestimated. Even during a walk, he thinks about a related problem—this one is as classic as it gets.\n\nOn an $m\\times n$ grid, Xingxing appears at the lower-left corner vertex. He can only move along the grid lines either up or right. His goal is to “wriggle” to the upper-right corner vertex. How many paths can he choose? Well, it seems like every Earthling knows how to do this, but note that I haven’t given one condition yet! The current maximum ranges of $m$ and $n$ are $5\\times 10^4$. What should we do? Think carefully.", "inputFormat": "One line containing two integers $m$ and $n$, each with an upper bound of $5\\times 10^4$.", "outputFormat": "Since the final answer can be very large, only the last 100 digits are checked. Output exactly 10 digits per line with no spaces, for a total of 10 lines. If the answer has no more than 100 digits, pad the remaining positions with leading zeros.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "猩猩散步", "background": "", "description": "猩猩，骆驼，还有泡泡经常喜欢在饭后到操场上散步，由于猩猩的走路姿势最突出最显眼，理所应当的成为他们中的主角，所以我的题目就说猩猩散步了。（骆驼和泡泡别有意见哈，和猩猩争啥……）\n\n当然，话说回来，猩猩在 OI 上的能力也是不容低估的，你看，散步时还会想一道与此相关的问题，这是道经典的不能再经典的问题了。\n\n在一个 $m×n$ 的矩阵上，猩猩在左下角的顶点出现了，他只能沿着路径向上或者向右走，他的目标是“蠕动”到右上角的顶点，问他有多少路径可以选择。嗯，这个、这个、这个似乎地球人都知道怎么做，但是请注意，我有个条件没给呢！$m$ 和 $n$ 现在的最大范围是 $5\\times 10^4$，这可怎么办？仔细想想吧。\n", "inputFormat": "只有一行，包含两个整数 $m$ 和 $n$，其上限均为 $5\\times 10^4$。\n", "outputFormat": "由于最后的答案数目过大，所以只检查后 $100$ 位，输出时每行十个数字，没空格间隔，共十行，如果答案位数没超过 $100$ 位，则需要在空位上补 $0$。\n\n ", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1493", "type": "P", "difficulty": 5, "samples": [["3\r\n2 3 6\r\n3 2\r\n1 1\r\n2 1\r\n", "2\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "分梨子", "background": null, "description": "Finley 家的院子里有棵梨树，最近收获了许多梨子。于是，Finley 决定挑出一些梨子，分给幼稚园的宝宝们。可是梨子大小味道都不太一样，一定要尽量挑选那些差不多的梨子分给孩子们，那些分到小梨子的宝宝才不会哭闹。\n\n每个梨子都具有两个属性值，$A_i$ 和 $B_i$，分别表示梨子的大小和甜度情况。假设在选出的梨子中，两个属性的最小值分别是 $A_0$ 和 $B_0$。只要对于所有被选出的梨子 $i$，都满足 $C_1 \\times (A_i-A_0)+C_2 \\times (B_i-B_0) \\le C_3$（其中，$C_1,C_2$ 和 $C_3$ 都是已知的常数），就可以认为这些梨子是相差不多的，可以用来分给小朋友们。\n\n那么，作为幼稚园园长的你，能算出最多可以挑选出多少个梨子吗？", "inputFormat": "第一行一个整数 $N$（$1 \\le N \\le 2000$），表示梨子的总个数。\n\n第二行三个正整数，依次为 $C_1,C_2$ 和 $C_3$（$C_1,C_2 \\le 2000$，$C_3 \\le 10^9$）。\n\n接下来的 $N$ 行，每行两个整数。第 $i$ 行的两个整数依次为 $A_i$ 和 $B_i$。", "outputFormat": "只有一个整数，表示最多可以选出的梨子个数。", "hint": "### 样例说明\n\n可以选择 $1,3$ 两个梨子或者 $2,3$ 两个梨子。", "locale": "zh-CN", "translations": {"en": {"title": "Sharing Pears", "background": "", "description": "There is a pear tree in Finley's yard, and it has recently produced many pears. Finley decides to pick some pears to distribute to the kindergarten children. However, the pears vary in size and taste, so it is important to choose pears that are as similar as possible to give to the kids, so that those who get smaller pears will not cry.\n\nEach pear has two attributes, $A_i$ and $B_i$, representing the pear's size and sweetness, respectively. Suppose among the selected pears, the minimum values of the two attributes are $A_0$ and $B_0$. As long as for every selected pear $i$, the inequality $C_1 \\times (A_i-A_0)+C_2 \\times (B_i-B_0) \\le C_3$ holds (where $C_1,C_2$ and $C_3$ are known constants), then these pears are considered similar enough and can be given to the children.\n\nAs the kindergarten principal, can you compute the maximum number of pears that can be selected?", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 2000$), the total number of pears.\n\nThe second line contains three positive integers, $C_1,C_2$ and $C_3$ ($C_1,C_2 \\le 2000$, $C_3 \\le 10^9$).\n\nThe next $N$ lines each contain two integers. On the $i$-th line, the two integers are $A_i$ and $B_i$.", "outputFormat": "Output a single integer, the maximum number of pears that can be selected.", "hint": "Sample explanation: You can choose pears $1,3$ or $2,3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "分梨子", "background": null, "description": "Finley 家的院子里有棵梨树，最近收获了许多梨子。于是，Finley 决定挑出一些梨子，分给幼稚园的宝宝们。可是梨子大小味道都不太一样，一定要尽量挑选那些差不多的梨子分给孩子们，那些分到小梨子的宝宝才不会哭闹。\n\n每个梨子都具有两个属性值，$A_i$ 和 $B_i$，分别表示梨子的大小和甜度情况。假设在选出的梨子中，两个属性的最小值分别是 $A_0$ 和 $B_0$。只要对于所有被选出的梨子 $i$，都满足 $C_1 \\times (A_i-A_0)+C_2 \\times (B_i-B_0) \\le C_3$（其中，$C_1,C_2$ 和 $C_3$ 都是已知的常数），就可以认为这些梨子是相差不多的，可以用来分给小朋友们。\n\n那么，作为幼稚园园长的你，能算出最多可以挑选出多少个梨子吗？", "inputFormat": "第一行一个整数 $N$（$1 \\le N \\le 2000$），表示梨子的总个数。\n\n第二行三个正整数，依次为 $C_1,C_2$ 和 $C_3$（$C_1,C_2 \\le 2000$，$C_3 \\le 10^9$）。\n\n接下来的 $N$ 行，每行两个整数。第 $i$ 行的两个整数依次为 $A_i$ 和 $B_i$。", "outputFormat": "只有一个整数，表示最多可以选出的梨子个数。", "hint": "### 样例说明\n\n可以选择 $1,3$ 两个梨子或者 $2,3$ 两个梨子。", "locale": "zh-CN"}}}
{"pid": "P1494", "type": "P", "difficulty": 5, "samples": [["6 4\n1 2 3 3 3 2\n2 6\n1 3\n3 5\n1 6", "2/5\n0/1\n1/1\n4/15"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["莫队", "集训队互测", "O2优化", "离线处理"], "title": "[国家集训队] 小 Z 的袜子", "background": "", "description": "upd on 2020.6.10 ：更新了时限。\n\n作为一个生活散漫的人，小 Z 每天早上都要耗费很久从一堆五颜六色的袜子中找出一双来穿。终于有一天，小 Z 再也无法忍受这恼人的找袜子过程，于是他决定听天由命……\n\n具体来说，小 Z 把这 $N$ 只袜子从 $1$ 到 $N$ 编号，然后从编号 $L$ 到 $R$ 的袜子中随机选出两只来穿。尽管小 Z 并不在意两只袜子是不是完整的一双，他却很在意袜子的颜色，毕竟穿两只不同色的袜子会很尴尬。\n\n你的任务便是告诉小 Z，他有多大的概率抽到两只颜色相同的袜子。当然，小 Z 希望这个概率尽量高，所以他可能会询问多个 $(L,R)$ 以方便自己选择。\n\n**然而数据中有 $L=R$ 的情况，请特判这种情况，输出`0/1`。**\n", "inputFormat": "输入文件第一行包含两个正整数 $N$ 和 $M$。$N$ 为袜子的数量，$M$ 为小 Z 所提的询问的数量。接下来一行包含 $N$ 个正整数 $C_i$，其中 $C_i$ 表示第 $i$ 只袜子的颜色，相同的颜色用相同的数字表示。再接下来 $M$ 行，每行两个正整数 $L, R$ 表示一个询问。\n", "outputFormat": "包含 $M$ 行，对于每个询问在一行中输出分数 $A/B$ 表示从该询问的区间 $[L,R]$ 中随机抽出两只袜子颜色相同的概率。若该概率为 $0$ 则输出 `0/1`，否则输出的 $A/B$ 必须为最简分数。（详见样例）\n", "hint": "$30\\%$ 的数据中，$N,M\\leq 5000$；\n\n$60\\%$ 的数据中，$N,M \\leq 25000$；\n\n$100\\%$ 的数据中，$N,M \\leq 50000$，$1 \\leq L \\leq R \\leq N$，$C_i \\leq N$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Xiao Z's Socks", "background": "", "description": "Updated on 2020.6.10: time limit updated.\n\nAs a somewhat careless person, Xiao Z spends a long time every morning trying to find a pair of socks from a pile of colorful ones. One day, he could no longer stand this annoying process and decided to leave it to fate.\n\nSpecifically, Xiao Z numbers his $N$ socks from $1$ to $N$, then randomly selects two socks to wear from those numbered $L$ to $R$. Although Xiao Z does not care whether the two socks form a true pair, he does care about their colors, since wearing two socks of different colors would be embarrassing.\n\nYour task is to tell Xiao Z the probability that he draws two socks of the same color. Of course, Xiao Z wants this probability to be as high as possible, so he may ask multiple queries $(L, R)$ to help him choose.\n\nHowever, there are cases with $L = R$ in the testdata. Please handle this case specially and output `0/1`.", "inputFormat": "The first line contains two positive integers $N$ and $M$. $N$ is the number of socks, and $M$ is the number of queries Xiao Z asks. The next line contains $N$ positive integers $C_i$, where $C_i$ denotes the color of the $i$-th sock; the same color is represented by the same integer. Then follow $M$ lines, each containing two positive integers $L, R$ representing a query.", "outputFormat": "Output $M$ lines. For each query, output a fraction $A/B$ on a single line representing the probability that two randomly chosen socks from the interval $[L, R]$ have the same color. If this probability is $0$, output `0/1`. Otherwise, $A/B$ must be in lowest terms (see the sample).", "hint": "In $30\\%$ of the testdata, $N, M \\leq 5000$.\n\nIn $60\\%$ of the testdata, $N, M \\leq 25000$.\n\nIn $100\\%$ of the testdata, $N, M \\leq 50000$, $1 \\leq L \\leq R \\leq N$, $C_i \\leq N$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 小 Z 的袜子", "background": "", "description": "upd on 2020.6.10 ：更新了时限。\n\n作为一个生活散漫的人，小 Z 每天早上都要耗费很久从一堆五颜六色的袜子中找出一双来穿。终于有一天，小 Z 再也无法忍受这恼人的找袜子过程，于是他决定听天由命……\n\n具体来说，小 Z 把这 $N$ 只袜子从 $1$ 到 $N$ 编号，然后从编号 $L$ 到 $R$ 的袜子中随机选出两只来穿。尽管小 Z 并不在意两只袜子是不是完整的一双，他却很在意袜子的颜色，毕竟穿两只不同色的袜子会很尴尬。\n\n你的任务便是告诉小 Z，他有多大的概率抽到两只颜色相同的袜子。当然，小 Z 希望这个概率尽量高，所以他可能会询问多个 $(L,R)$ 以方便自己选择。\n\n**然而数据中有 $L=R$ 的情况，请特判这种情况，输出`0/1`。**\n", "inputFormat": "输入文件第一行包含两个正整数 $N$ 和 $M$。$N$ 为袜子的数量，$M$ 为小 Z 所提的询问的数量。接下来一行包含 $N$ 个正整数 $C_i$，其中 $C_i$ 表示第 $i$ 只袜子的颜色，相同的颜色用相同的数字表示。再接下来 $M$ 行，每行两个正整数 $L, R$ 表示一个询问。\n", "outputFormat": "包含 $M$ 行，对于每个询问在一行中输出分数 $A/B$ 表示从该询问的区间 $[L,R]$ 中随机抽出两只袜子颜色相同的概率。若该概率为 $0$ 则输出 `0/1`，否则输出的 $A/B$ 必须为最简分数。（详见样例）\n", "hint": "$30\\%$ 的数据中，$N,M\\leq 5000$；\n\n$60\\%$ 的数据中，$N,M \\leq 25000$；\n\n$100\\%$ 的数据中，$N,M \\leq 50000$，$1 \\leq L \\leq R \\leq N$，$C_i \\leq N$。\n", "locale": "zh-CN"}}}
{"pid": "P1495", "type": "P", "difficulty": 5, "samples": [["3\n3 1\n5 1\n7 2", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "中国剩余定理 CRT", "模板题"], "title": "【模板】中国剩余定理（CRT）/ 曹冲养猪", "background": "", "description": "自从曹冲搞定了大象以后，曹操就开始捉摸让儿子干些事业，于是派他到中原养猪场养猪，可是曹冲满不高兴，于是在工作中马马虎虎，有一次曹操想知道母猪的数量，于是曹冲想狠狠耍曹操一把。举个例子，假如有 $16$ 头母猪，如果建了 $3$ 个猪圈，剩下 $1$ 头猪就没有地方安家了。如果建造了 $5$ 个猪圈，但是仍然有 $1$ 头猪没有地方去，然后如果建造了 $7$ 个猪圈，还有 $2$ 头没有地方去。你作为曹总的私人秘书理所当然要将准确的猪数报给曹总，你该怎么办？", "inputFormat": "第一行包含一个整数 $n$ —— 建立猪圈的次数，接下来 $n$ 行，每行两个整数 $a_i, b_i$，表示建立了 $a_i$ 个猪圈，有 $b_i$ 头猪没有去处。你可以假定 $a_1 \\sim a_n$ 互质。", "outputFormat": "输出包含一个自然数，即为曹冲至少养母猪的数目。\n", "hint": "$1 \\leq n\\le10$，$0 \\leq b_i\\lt a_i\\le100000$，$1 \\leq \\prod a_i \\leq 10^{18}$", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Chinese Remainder Theorem (CRT) / Cao Chong Raises Pigs", "background": "", "description": "After Cao Chong solved the elephant problem, Cao Cao wanted his son to take on some real work, so he sent him to manage a pig farm in the Central Plains. Cao Chong was unhappy and worked carelessly. One day, Cao Cao wanted to know the number of sows, so Cao Chong decided to play a trick on him. For example, suppose there are $16$ sows. If $3$ pens are built, then $1$ sow has nowhere to go. If $5$ pens are built, there is still $1$ sow with no place to go. If $7$ pens are built, there are $2$ sows left without a place. As Cao Cao’s personal secretary, you must report the exact number of sows. What should you do?", "inputFormat": "The first line contains an integer $n$ — the number of times pens are built. The next $n$ lines each contain two integers $a_i, b_i$, meaning that when $a_i$ pens are built, there are $b_i$ sows without a place to go. You may assume $a_1 \\sim a_n$ are pairwise coprime.", "outputFormat": "Output a single positive integer: the minimum possible number of sows that Cao Chong raises.", "hint": "$1 \\leq n\\le10$，$0 \\leq b_i\\lt a_i\\le100000$，$1 \\leq \\prod a_i \\leq 10^{18}$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】中国剩余定理（CRT）/ 曹冲养猪", "background": "", "description": "自从曹冲搞定了大象以后，曹操就开始捉摸让儿子干些事业，于是派他到中原养猪场养猪，可是曹冲满不高兴，于是在工作中马马虎虎，有一次曹操想知道母猪的数量，于是曹冲想狠狠耍曹操一把。举个例子，假如有 $16$ 头母猪，如果建了 $3$ 个猪圈，剩下 $1$ 头猪就没有地方安家了。如果建造了 $5$ 个猪圈，但是仍然有 $1$ 头猪没有地方去，然后如果建造了 $7$ 个猪圈，还有 $2$ 头没有地方去。你作为曹总的私人秘书理所当然要将准确的猪数报给曹总，你该怎么办？", "inputFormat": "第一行包含一个整数 $n$ —— 建立猪圈的次数，接下来 $n$ 行，每行两个整数 $a_i, b_i$，表示建立了 $a_i$ 个猪圈，有 $b_i$ 头猪没有去处。你可以假定 $a_1 \\sim a_n$ 互质。", "outputFormat": "输出包含一个自然数，即为曹冲至少养母猪的数目。\n", "hint": "$1 \\leq n\\le10$，$0 \\leq b_i\\lt a_i\\le100000$，$1 \\leq \\prod a_i \\leq 10^{18}$", "locale": "zh-CN"}}}
{"pid": "P1496", "type": "P", "difficulty": 2, "samples": [["3\n-1 1\n5 11\n2 9", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "离散化", "O2优化"], "title": "火烧赤壁", "background": "曹操平定北方以后，公元 208 年，率领大军南下，进攻刘表。他的人马还没有到荆州，刘表已经病死。他的儿子刘琮听到曹军声势浩大，吓破了胆，先派人求降了。\n\n孙权任命周瑜为都督，拨给他三万水军，叫他同刘备协力抵抗曹操。\n\n隆冬的十一月，天气突然回暖，刮起了东南风。\n\n没想到东吴船队离开北岸大约二里距离，前面十条大船突然同时起火。火借风势，风助火威。十条火船，好比十条火龙一样，闯进曹军水寨。那里的船舰，都挤在一起，又躲不开，很快地都烧起来。一眨眼工夫，已经烧成一片火海。\n\n曹操气急败坏的把你找来，要你钻入火海把连环线上着火的船只的长度统计出来！", "description": "给定每个起火部分的起点和终点，请你求出燃烧位置的长度之和。", "inputFormat": "第一行一个整数，表示起火的信息条数 $n$。  \n接下来 $n$ 行，每行两个整数 $a, b$，表示一个着火位置的起点和终点（**注意：左闭右开**）。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 2 \\times 10^4$，$-2^{31} \\leq a <  b \\lt 2^{31}$，且答案小于 $2^{31}$。\n\n\n", "locale": "zh-CN", "translations": {"en": {"title": "Burning of Red Cliffs", "background": "After pacifying the north, in AD 208, Cao Cao led a massive army south to attack Liu Biao. Before his forces reached Jingzhou, Liu Biao had already died of illness. His son Liu Cong, terrified by the might of Cao Cao’s army, sent envoys to surrender first.\n\nSun Quan appointed Zhou Yu as the commander-in-chief, assigned him 30,000 marines, and ordered him to join forces with Liu Bei to resist Cao Cao.\n\nIn the eleventh month of deep winter, the weather suddenly turned warm and a southeast wind began to blow.\n\nUnexpectedly, when the fleet of Eastern Wu was about two li away from the north bank, the front ten large ships suddenly caught fire at the same time. The fire rode the wind, and the wind fed the fire. The ten fire ships, like ten fire dragons, charged into Cao Cao’s naval camp. The ships there were all crowded together and had no way to evade, and they quickly caught fire. In the blink of an eye, the whole place was a sea of flames.\n\nCao Cao, in a panic, summoned you and ordered you to plunge into the sea of fire to compute the total length of the ships on the chained line that are on fire.", "description": "Given the start and end of each burning segment, please compute the total length of the burning positions.", "inputFormat": "The first line contains an integer $n$, indicating the number of fire reports.  \nThen follow $n$ lines; each line contains two integers $a, b$, denoting the start and end of a burning segment (Note: left-closed, right-open).", "outputFormat": "Output a single line with one integer representing the answer.", "hint": "Constraints\n\nFor all test points, it is guaranteed that $1 \\leq n \\leq 2 \\times 10^4$, $-2^{31} \\leq a < b \\lt 2^{31}$, and the answer is less than $2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "火烧赤壁", "background": "曹操平定北方以后，公元 208 年，率领大军南下，进攻刘表。他的人马还没有到荆州，刘表已经病死。他的儿子刘琮听到曹军声势浩大，吓破了胆，先派人求降了。\n\n孙权任命周瑜为都督，拨给他三万水军，叫他同刘备协力抵抗曹操。\n\n隆冬的十一月，天气突然回暖，刮起了东南风。\n\n没想到东吴船队离开北岸大约二里距离，前面十条大船突然同时起火。火借风势，风助火威。十条火船，好比十条火龙一样，闯进曹军水寨。那里的船舰，都挤在一起，又躲不开，很快地都烧起来。一眨眼工夫，已经烧成一片火海。\n\n曹操气急败坏的把你找来，要你钻入火海把连环线上着火的船只的长度统计出来！", "description": "给定每个起火部分的起点和终点，请你求出燃烧位置的长度之和。", "inputFormat": "第一行一个整数，表示起火的信息条数 $n$。  \n接下来 $n$ 行，每行两个整数 $a, b$，表示一个着火位置的起点和终点（**注意：左闭右开**）。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 2 \\times 10^4$，$-2^{31} \\leq a <  b \\lt 2^{31}$，且答案小于 $2^{31}$。\n\n\n", "locale": "zh-CN"}}}
{"pid": "P1497", "type": "P", "difficulty": 2, "samples": [["4 4 1\n4\n", "24\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "木牛流马", "background": "孔明造出了木牛流马。\n\n> 木牛者，方腹曲头，一脚四足，头入领中，舌著于腹。载多而行少，宜可大用，不可小使；特行者数十里，群行者二十里也。曲者为牛头，双者为牛脚，横者为牛领，转者为牛足，覆者为牛背，方者为牛腹，垂者为牛舌，曲者为牛肋，刻者为牛齿，立者为牛角，细者为牛鞅，摄者为牛秋轴。牛仰双辕，人行六尺，牛行四步。载一岁粮，日行二十里，而人不大劳。流马尺寸之数，肋长三尺五寸，广三寸，厚二寸二分，左右同。前轴孔分墨去头四寸，径中二寸。前脚孔分墨二寸，去前轴孔四寸五分，广一寸。前杠孔去前脚孔分墨二寸七分，孔长二寸，广一寸。后轴孔去前杠分墨一尺五分，大小与前同。后脚孔分墨去后轴孔三寸五分，大小与前同。后杠孔去后脚孔分墨二寸七分，后载克去后杠孔分墨四寸五分。前杠长一尺八寸，广二寸，厚一寸五分。后杠与等版方囊二枚，厚八分，长二尺七寸，高一尺六寸五分，广一尺六寸，每枚受米二斛三斗。从上杠孔去肋下七寸，前后同。上杠孔去下杠孔分墨一尺三寸，孔长一寸五分，广七分，八孔同。前后四脚，广二寸，厚一寸五分。形制如象，靬长四寸，径面四寸三分。孔径中三脚杠，长二尺一寸，广一寸五分，厚一寸四分，同杠耳。（《三国志·亮集载作木牛流马法》）\n\n可是在现实中它有个缺陷，就是两个不能在同一行或同一列！", "description": "孔明兴高采烈的叫庞统来参观，孔明存心想难一难庞统，他把 $k$ 个木牛流马放在一个大的 $n \\times n$ 的格子地板上，并且给他们都染上色，想让庞统帮着算算有多少种不同的合理布局情况？", "inputFormat": "第一行: $n, k, h$（$n \\le 20$，$h$ 为有多少种颜色）。\n\n接下来 $h$ 行为每种颜色多少个。", "outputFormat": "合理布局情况总数。", "hint": "不需要高精度，并且孔明规定在格子地板上不能翻转，也就是说如果两种布局在翻转后是一样的仍算两种。", "locale": "zh-CN", "translations": {"en": {"title": "Wooden Ox and Flowing Horse", "background": "Kongming created the Wooden Ox and Flowing Horse.\n\n> The “wooden ox” has a square belly and a curved head, one leg with four feet; the head goes into the collar, and the tongue is attached to the belly. When heavily loaded it travels less, suitable for large-scale use, not for small errands; a single unit travels several tens of li, while a group travels twenty li. Curved pieces make the ox’s head, paired pieces the ox’s legs, crosswise pieces the ox’s collar, turning pieces the ox’s feet, covering pieces the ox’s back, square pieces the ox’s belly, hanging pieces the ox’s tongue, curved pieces the ox’s ribs, carved pieces the ox’s teeth, upright pieces the ox’s horns, thin pieces the ox’s yoke, and “she” pieces the ox’s autumn axle. When the ox is facing up with double shafts: when a person walks six chi, the ox walks four steps. Carrying one year’s grain, it travels twenty li per day, and the person is not greatly fatigued. As for the dimensions of the “flowing horse”: rib length 3 chi 5 cun, width 3 cun, thickness 2 cun 2 fen, the same on left and right. The front axle hole “fenmo” is 4 cun from the head, with a diameter of 2 cun. The front leg hole “fenmo” is 2 cun, 4 cun 5 fen from the front axle hole, width 1 cun. The front bar hole is 2 cun 7 fen from the front leg hole, hole length 2 cun, width 1 cun. The rear axle hole is 1 chi 5 fen from the front bar “fenmo”, same size as the front. The rear leg hole is 3 cun 5 fen from the rear axle hole “fenmo”, same size as the front. The rear bar hole is 2 cun 7 fen from the rear leg hole “fenmo”; the rear load clamp is 4 cun 5 fen from the rear bar hole “fenmo”. The front bar length is 1 chi 8 cun, width 2 cun, thickness 1 cun 5 fen. The rear bar and equal boards, two square bags, thickness 8 fen, length 2 chi 7 cun, height 1 chi 6 cun 5 fen, width 1 chi 6 cun; each holds 2 hu 3 dou of rice. From the upper bar hole to the underside of the rib is 7 cun, the same front and rear. The upper bar hole is 1 chi 3 cun from the lower bar hole “fenmo”, hole length 1 cun 5 fen, width 7 fen; all eight holes are the same. The four legs, front and rear, are 2 cun wide and 1 cun 5 fen thick. The shape is like an elephant; the shoe length is 4 cun, diameter 4 cun 3 fen. The hole diameter is for the central three-legged bar; its length is 2 chi 1 cun, width 1 cun 5 fen, thickness 1 cun 4 fen, and the bar ears are the same. (Records of the Three Kingdoms, “Zhuge Liang Collection: Method for Making the Wooden Ox and Flowing Horse”).\n\nHowever, in practice it has a flaw: no two can be in the same row or the same column!", "description": "Kongming excitedly invited Pang Tong to visit. Intending to challenge him, Kongming placed $k$ Wooden Ox and Flowing Horse pieces on a large $n \\times n$ tiled grid and painted them in colors. He asked Pang Tong to count how many different valid layout configurations there are.", "inputFormat": "First line: $n, k, h$ ($n \\le 20$, $h$ is the number of colors).\n\nThe next $h$ lines give the quantity of each color.", "outputFormat": "The total number of valid layouts.", "hint": "No big integer is needed. Moreover, Kongming stipulates that the grid cannot be flipped; that is, if two layouts become the same after a flip, they are still counted as two.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "木牛流马", "background": "孔明造出了木牛流马。\n\n> 木牛者，方腹曲头，一脚四足，头入领中，舌著于腹。载多而行少，宜可大用，不可小使；特行者数十里，群行者二十里也。曲者为牛头，双者为牛脚，横者为牛领，转者为牛足，覆者为牛背，方者为牛腹，垂者为牛舌，曲者为牛肋，刻者为牛齿，立者为牛角，细者为牛鞅，摄者为牛秋轴。牛仰双辕，人行六尺，牛行四步。载一岁粮，日行二十里，而人不大劳。流马尺寸之数，肋长三尺五寸，广三寸，厚二寸二分，左右同。前轴孔分墨去头四寸，径中二寸。前脚孔分墨二寸，去前轴孔四寸五分，广一寸。前杠孔去前脚孔分墨二寸七分，孔长二寸，广一寸。后轴孔去前杠分墨一尺五分，大小与前同。后脚孔分墨去后轴孔三寸五分，大小与前同。后杠孔去后脚孔分墨二寸七分，后载克去后杠孔分墨四寸五分。前杠长一尺八寸，广二寸，厚一寸五分。后杠与等版方囊二枚，厚八分，长二尺七寸，高一尺六寸五分，广一尺六寸，每枚受米二斛三斗。从上杠孔去肋下七寸，前后同。上杠孔去下杠孔分墨一尺三寸，孔长一寸五分，广七分，八孔同。前后四脚，广二寸，厚一寸五分。形制如象，靬长四寸，径面四寸三分。孔径中三脚杠，长二尺一寸，广一寸五分，厚一寸四分，同杠耳。（《三国志·亮集载作木牛流马法》）\n\n可是在现实中它有个缺陷，就是两个不能在同一行或同一列！", "description": "孔明兴高采烈的叫庞统来参观，孔明存心想难一难庞统，他把 $k$ 个木牛流马放在一个大的 $n \\times n$ 的格子地板上，并且给他们都染上色，想让庞统帮着算算有多少种不同的合理布局情况？", "inputFormat": "第一行: $n, k, h$（$n \\le 20$，$h$ 为有多少种颜色）。\n\n接下来 $h$ 行为每种颜色多少个。", "outputFormat": "合理布局情况总数。", "hint": "不需要高精度，并且孔明规定在格子地板上不能翻转，也就是说如果两种布局在翻转后是一样的仍算两种。", "locale": "zh-CN"}}}
{"pid": "P1498", "type": "P", "difficulty": 3, "samples": [["2", "   /\\\n  /__\\\n /\\  /\\\n/__\\/__\\\n"], ["3", "       /\\\n      /__\\\n     /\\  /\\\n    /__\\/__\\\n   /\\      /\\\n  /__\\    /__\\\n /\\  /\\  /\\  /\\\n/__\\/__\\/__\\/__\\"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "递归", "湖南", "分治", "深度优先搜索 DFS"], "title": "南蛮图腾", "background": "自从到了南蛮之地，孔明不仅把孟获收拾的服服帖帖，而且还发现了不少少数民族的智慧，他发现少数民族的图腾往往有着一种分形的效果，在得到了酋长的传授后，孔明掌握了不少绘图技术，但唯独不会画他们的图腾，于是他找上了你的爷爷的爷爷的爷爷的爷爷……帮忙，作为一个好孙子的孙子的孙子的孙子……你能做到吗？", "description": "给定一个正整数 $n$，参考输出样例，输出图形。", "inputFormat": "每个数据输入一个正整数 $n$，表示图腾的大小（此大小非彼大小）。", "outputFormat": "这个大小的图腾。", "hint": "数据保证，$1 \\leq n \\leq 10$。", "locale": "zh-CN", "translations": {"en": {"title": "Nanman Totem", "background": "Since arriving in the land of the Nanman, Kongming not only subdued Meng Huo, but also discovered much wisdom among the ethnic minorities. He noticed that their totems often exhibit a fractal effect. After learning from the chieftain, he mastered many drawing techniques, but still could not draw their totem. So he sought help from your grandpa’s grandpa’s grandpa’s grandpa… As the grandchild’s grandchild’s grandchild’s grandchild…, can you do it?", "description": "Given a positive integer $n$, refer to the sample output and print the pattern.", "inputFormat": "Each test contains a single positive integer $n$, representing the totem’s size.", "outputFormat": "Output the totem of size $n$.", "hint": "Constraints: $1 \\leq n \\leq 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "南蛮图腾", "background": "自从到了南蛮之地，孔明不仅把孟获收拾的服服帖帖，而且还发现了不少少数民族的智慧，他发现少数民族的图腾往往有着一种分形的效果，在得到了酋长的传授后，孔明掌握了不少绘图技术，但唯独不会画他们的图腾，于是他找上了你的爷爷的爷爷的爷爷的爷爷……帮忙，作为一个好孙子的孙子的孙子的孙子……你能做到吗？", "description": "给定一个正整数 $n$，参考输出样例，输出图形。", "inputFormat": "每个数据输入一个正整数 $n$，表示图腾的大小（此大小非彼大小）。", "outputFormat": "这个大小的图腾。", "hint": "数据保证，$1 \\leq n \\leq 10$。", "locale": "zh-CN"}}}
{"pid": "P1499", "type": "P", "difficulty": 4, "samples": [["3 2\n1 060000 301\n2 060300 600\n", "0\n061301\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2000", "枚举", "CTSC/CTS"], "title": "[CTSC2000] 公路巡逻", "background": null, "description": "在一条没有分岔的高速公路上有 $n$ 个关口，相邻两个关口之间的距离都是 $10\\rm km$ 。所有车辆在这条高速公路上的最低速度为 $60\\rm km/h$ ，最高速度为 $120\\rm km/h$，并且只能在关口处改变速度。\n\n巡逻的方式是在某个时刻 $T_{i}$ 从第 $n_{i}$ 个关口派出一辆巡逻车匀速驶抵第 $n_{i}+1$ 个关口，路上耗费的时间为 $t_{i}$ 秒。\n\n两辆车相遇是指它们之间发生超车或者两车同时到达某关口（同时出发不算相遇）。\n\n巡逻部门想知道一辆于 $6$ 点整从第 $1$ 个关口出发去第 $n$ 个关口的车（称为目标车）最少会与多少辆巡逻车相遇，请编程计算之。假设所有车辆到达关口的时刻都是整秒。", "inputFormat": "输入文件第一行为两个整数，分别为关口数 $n$ 和巡逻车数 $m$ 。\n\n接下来的 $m$ 行每一行为一辆巡逻车的信息（按出发位置递增排序），格式为 $n_{i}$，$T_{i}$，$t_{i}$，分别表示第 $i$ 辆巡逻车的出发位置、出发时刻和路上耗费的时间，其中 $n_{i}$ 和 $T_{i}$ 为整数， $T_{i}$ 形如 `HHMMSS`，表示时、分、秒，采用 $24$ 小时制，不足两位的数用前置 $0$ 补齐。", "outputFormat": "输出文件第一行为目标车与巡逻车相遇次数。\n\n第二行为目标车与巡逻车相遇次数最少时最早到达第 $n$ 个关口的时刻（格式同输入中的 $T_{i}$ ）。", "hint": "$1 < n < 50$，$1 < m < 300$，$1 \\leq  n_{i} < n$，$300 \\leq t_i \\leq 600$，所有的 $T_i$ 不早于 $05:00$，不晚于 $23:00$。\n\nCTSC2000 第一试", "locale": "zh-CN", "translations": {"en": {"title": "[CTSC2000] Highway Patrol", "background": "", "description": "On a straight highway with no forks, there are $n$ checkpoints, and the distance between any two adjacent checkpoints is $10\\rm km$ . All vehicles on this highway have a minimum speed of $60\\rm km/h$ and a maximum speed of $120\\rm km/h$, and they may change speed only at checkpoints.\n\nPatrolling is performed as follows: at some time $T_{i}$, a patrol car is dispatched from checkpoint $n_{i}$, travels at a constant speed to checkpoint $n_{i}+1$, and spends $t_{i}$ seconds on the road.\n\nTwo cars are considered to have met if one overtakes the other or if both arrive at the same checkpoint at the same time (departing at the same time does not count as a meeting).\n\nThe patrol department wants to know the minimum number of patrol cars that a car (the “target car”) departing from checkpoint $1$ at exactly $6$ o’clock to checkpoint $n$ will meet. Please write a program to compute this. Assume that all vehicles arrive at checkpoints at integer seconds.", "inputFormat": "The first line of the input file contains two integers, the number of checkpoints $n$ and the number of patrol cars $m$.\n\nEach of the next $m$ lines describes one patrol car (sorted by increasing starting position). The format is $n_{i}$, $T_{i}$, $t_{i}$, representing the $i$-th patrol car’s starting position, departure time, and time spent on the road, respectively. Here $n_{i}$ and $T_{i}$ are integers. $T_{i}$ has the form `HHMMSS`, representing hour, minute, and second in 24-hour time; numbers with fewer than two digits are padded with a leading 0.", "outputFormat": "The first line of the output file is the number of meetings between the target car and the patrol cars.\n\nThe second line is the earliest arrival time at checkpoint $n$ when the number of meetings is minimized (format is the same as $T_{i}$ in the input).", "hint": "Constraints: $1 < n < 50$，$1 < m < 300$，$1 \\leq n_{i} < n$，$300 \\leq t_i \\leq 600$，all $T_i$ are no earlier than 05:00 and no later than 23:00.\n\nCTSC 2000 First Session.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC2000] 公路巡逻", "background": null, "description": "在一条没有分岔的高速公路上有 $n$ 个关口，相邻两个关口之间的距离都是 $10\\rm km$ 。所有车辆在这条高速公路上的最低速度为 $60\\rm km/h$ ，最高速度为 $120\\rm km/h$，并且只能在关口处改变速度。\n\n巡逻的方式是在某个时刻 $T_{i}$ 从第 $n_{i}$ 个关口派出一辆巡逻车匀速驶抵第 $n_{i}+1$ 个关口，路上耗费的时间为 $t_{i}$ 秒。\n\n两辆车相遇是指它们之间发生超车或者两车同时到达某关口（同时出发不算相遇）。\n\n巡逻部门想知道一辆于 $6$ 点整从第 $1$ 个关口出发去第 $n$ 个关口的车（称为目标车）最少会与多少辆巡逻车相遇，请编程计算之。假设所有车辆到达关口的时刻都是整秒。", "inputFormat": "输入文件第一行为两个整数，分别为关口数 $n$ 和巡逻车数 $m$ 。\n\n接下来的 $m$ 行每一行为一辆巡逻车的信息（按出发位置递增排序），格式为 $n_{i}$，$T_{i}$，$t_{i}$，分别表示第 $i$ 辆巡逻车的出发位置、出发时刻和路上耗费的时间，其中 $n_{i}$ 和 $T_{i}$ 为整数， $T_{i}$ 形如 `HHMMSS`，表示时、分、秒，采用 $24$ 小时制，不足两位的数用前置 $0$ 补齐。", "outputFormat": "输出文件第一行为目标车与巡逻车相遇次数。\n\n第二行为目标车与巡逻车相遇次数最少时最早到达第 $n$ 个关口的时刻（格式同输入中的 $T_{i}$ ）。", "hint": "$1 < n < 50$，$1 < m < 300$，$1 \\leq  n_{i} < n$，$300 \\leq t_i \\leq 600$，所有的 $T_i$ 不早于 $05:00$，不晚于 $23:00$。\n\nCTSC2000 第一试", "locale": "zh-CN"}}}
{"pid": "P1500", "type": "P", "difficulty": 6, "samples": [["2\n3\n0 0 Adam\n1 1 Jack\n0 2 George\n1 0 Victoria\n0 1 Susan\n1 2 Cathy\nAdam Cathy 100\nSusan George 20\nGeorge Cathy 40\nJack Susan 5\nCathy Jack 30\nVictoria Jack 20\nAdam Victoria 15\nEnd\n", "65"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2000", "CTSC/CTS"], "title": "[CTSC2000] 丘比特的烦恼", "background": "随着社会的不断发展，人与人之间的感情越来越功利化。最近，爱神丘比特发现，爱情也已不再是完全纯洁的了。这使得丘比特很是苦恼，他越来越难找到合适的男女，并向他们射去丘比特之箭。于是丘比特千里迢迢远赴中国，找到了掌管东方人爱情的神——月下老人，向他求教。\n\n月下老人告诉丘比特，纯洁的爱情并不是不存在，而是他没有找到。在东方，人们讲究的是缘分。月下老人只要做一男一女两个泥人，在他们之间连上一条红线，那么它们所代表的人就会相爱——无论他们身处何地。而丘比特的爱情之箭只能射中两个距离相当近的人，选择的范围自然就小了很多，不能找到真正的有缘人。", "description": "情人节（Valentine's day）的午夜零时，丘比特开始了自己的工作。他选择了一组数目相等的男女，感应到他们互相之间的缘分大小，并依此射出了神箭，使他们产生爱意。他希望能选择最好的方法，使被他选择的每一个人被射中一次，且每一对被射中的人之间的缘分的和最大。\n\n当然，无论丘比特怎么改造自己的弓箭，总还是存在缺陷的。首先，弓箭的射程尽管增大了，但毕竟还是有限的，不能像月下老人那样，做到“千里姻缘一线牵”。其次，无论怎么改造，箭的轨迹终归只能是一条直线，也就是说，如果两个人之间的连线段上有别人，那么莫不可向他们射出丘比特之箭，否则，按月下老人的话，就是“乱点鸳鸯谱”了。\n\n作为一个凡人，你的任务是运用先进的计算机为丘比特找到最佳的方案。", "inputFormat": "输入第一行为正整数 $k$，表示丘比特之箭的射程。\n\n第二行为正整数 $n$。\n\n随后有 $2 \\times n$ 行，表示丘比特选中的人的信息，其中前 $n$ 行为男子，后 $n$ 行为女子。\n\n每个人的信息由两部分组成：他的姓名和他的位置。姓名是长度小于 $20$ 且仅包含字母的字符串，忽略大小写的区别，位置是由一对整数表示的坐标，它们之间用空格分隔。格式为 ```x y Name```。\n\n输入文件剩下的部分描述了这些人的缘分。每一行的格式为 ```Name1 Name2 p```。\n\n`Name1` 和 `Name2` 为有缘人的姓名，$p$ 是他们之间的缘分值（$p$ 为小于等于 $255$ 的正整数）。\n\n以一个 ```End``` 作为文件结束标志。\n\n每两个人之间的缘分至多只被描述一次。如果没有被描述，则说明他们缘分值为 $1$。", "outputFormat": "输出仅一个正整数，表示每一对被射中的人之间的缘分的总和。这个和应当是最大的。", "hint": "$1\\le n\\le 30$。\n\nCTSC2000 第二试", "locale": "zh-CN", "translations": {"en": {"title": "[CTT 2000] Cupid's Trouble", "background": "As society develops, relationships between people are becoming increasingly utilitarian. Recently, Cupid, the god of love, found that love is no longer entirely pure. This troubled him greatly: it became harder for him to find suitable couples to shoot with his arrows. So Cupid traveled all the way to China to consult Yue Lao (Yuelao), the deity who governs love among Eastern people.\n\nYue Lao told Cupid that pure love does exist; he just had not found it. In the East, people value “fate.” As long as Yue Lao makes a clay man and a clay woman and connects them with a red thread, the people they represent will fall in love—no matter where they are. Cupid’s arrows, however, can only hit two people who are relatively close to each other, which greatly limits his choices and keeps him from finding truly destined couples.", "description": "At midnight on Valentine’s Day, Cupid begins his work. He selects an equal number of men and women, senses the “affinity” between every pair of them, and shoots his divine arrows accordingly to make them fall in love. He wants to choose the best plan so that every selected person is shot exactly once, and the sum of the affinities of all chosen pairs is maximized.\n\nHowever, Cupid’s bow and arrows have limitations. First, the shooting range, though enlarged, is still finite: unlike Yue Lao’s “red thread,” the arrow cannot connect lovers from any distance. Second, regardless of any modifications, an arrow always flies along a straight line. That is, if there is any other person lying on the line segment connecting a man and a woman, Cupid must not shoot that pair—otherwise, as Yue Lao would say, he would be “randomly matching couples.”\n\nYour task is to use a computer to help Cupid find the optimal plan: match the $n$ men to the $n$ women one-to-one to maximize the total affinity, subject to:\n- The Euclidean distance between the man and the woman in each chosen pair is at most $k$.\n- No other person lies on the line segment between the two in each chosen pair.", "inputFormat": "The first line contains a positive integer $k$, the shooting range of Cupid’s arrow.\n\nThe second line contains a positive integer $n$.\n\nThen follow $2 \\times n$ lines describing the selected people: the first $n$ lines are men, the last $n$ lines are women.\n\nEach person’s information has two parts: their name and their position. The name is a case-insensitive string of letters with length less than $20$. The position is a pair of integers representing coordinates, separated by a space. The format is:\n```x y Name```\n\nThe remaining part of the input describes affinities. Each line has the format:\n```Name1 Name2 p```\n\nHere, `Name1` and `Name2` are the names of two people who are “destined,” and $p$ is their affinity value (a positive integer with $p \\le 255$).\n\nThe input ends with:\n```End```\n\nFor any pair of people, the affinity is described at most once. If it is not described, their affinity is $1$.", "outputFormat": "Output a single positive integer: the maximum possible sum of affinities over all valid one-to-one matchings. Each selected person must be matched exactly once.", "hint": "$1 \\le n \\le 30$.\n\nCTSC 2000, Round 2.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC2000] 丘比特的烦恼", "background": "随着社会的不断发展，人与人之间的感情越来越功利化。最近，爱神丘比特发现，爱情也已不再是完全纯洁的了。这使得丘比特很是苦恼，他越来越难找到合适的男女，并向他们射去丘比特之箭。于是丘比特千里迢迢远赴中国，找到了掌管东方人爱情的神——月下老人，向他求教。\n\n月下老人告诉丘比特，纯洁的爱情并不是不存在，而是他没有找到。在东方，人们讲究的是缘分。月下老人只要做一男一女两个泥人，在他们之间连上一条红线，那么它们所代表的人就会相爱——无论他们身处何地。而丘比特的爱情之箭只能射中两个距离相当近的人，选择的范围自然就小了很多，不能找到真正的有缘人。", "description": "情人节（Valentine's day）的午夜零时，丘比特开始了自己的工作。他选择了一组数目相等的男女，感应到他们互相之间的缘分大小，并依此射出了神箭，使他们产生爱意。他希望能选择最好的方法，使被他选择的每一个人被射中一次，且每一对被射中的人之间的缘分的和最大。\n\n当然，无论丘比特怎么改造自己的弓箭，总还是存在缺陷的。首先，弓箭的射程尽管增大了，但毕竟还是有限的，不能像月下老人那样，做到“千里姻缘一线牵”。其次，无论怎么改造，箭的轨迹终归只能是一条直线，也就是说，如果两个人之间的连线段上有别人，那么莫不可向他们射出丘比特之箭，否则，按月下老人的话，就是“乱点鸳鸯谱”了。\n\n作为一个凡人，你的任务是运用先进的计算机为丘比特找到最佳的方案。", "inputFormat": "输入第一行为正整数 $k$，表示丘比特之箭的射程。\n\n第二行为正整数 $n$。\n\n随后有 $2 \\times n$ 行，表示丘比特选中的人的信息，其中前 $n$ 行为男子，后 $n$ 行为女子。\n\n每个人的信息由两部分组成：他的姓名和他的位置。姓名是长度小于 $20$ 且仅包含字母的字符串，忽略大小写的区别，位置是由一对整数表示的坐标，它们之间用空格分隔。格式为 ```x y Name```。\n\n输入文件剩下的部分描述了这些人的缘分。每一行的格式为 ```Name1 Name2 p```。\n\n`Name1` 和 `Name2` 为有缘人的姓名，$p$ 是他们之间的缘分值（$p$ 为小于等于 $255$ 的正整数）。\n\n以一个 ```End``` 作为文件结束标志。\n\n每两个人之间的缘分至多只被描述一次。如果没有被描述，则说明他们缘分值为 $1$。", "outputFormat": "输出仅一个正整数，表示每一对被射中的人之间的缘分的总和。这个和应当是最大的。", "hint": "$1\\le n\\le 30$。\n\nCTSC2000 第二试", "locale": "zh-CN"}}}
