{"pid": "P12163", "type": "P", "difficulty": 1, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["模拟", "2025", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 C/Java A] 2025", "background": "", "description": "求 $1 \\sim 20250412$ 中，有多少个数可以通过改变其数字顺序后含有 $2025$。\n\n例如，$5220$、$21520$ 可以，而 $205$、$225$、$2200$、$222555111$ 则不行。\n\n提示：要求的数就是含有至少 $1$ 个 $0$、$2$ 个 $2$、$1$ 个 $5$ 的数。", "inputFormat": "", "outputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 C/Java A] 2025", "background": "", "description": "求 $1 \\sim 20250412$ 中，有多少个数可以通过改变其数字顺序后含有 $2025$。\n\n例如，$5220$、$21520$ 可以，而 $205$、$225$、$2200$、$222555111$ 则不行。\n\n提示：要求的数就是含有至少 $1$ 个 $0$、$2$ 个 $2$、$1$ 个 $5$ 的数。", "inputFormat": "", "outputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P12164", "type": "P", "difficulty": 1, "samples": [["4 5", "20252\n02520\n25202\n52025"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2025", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 C/Python A] 2025 图形", "background": "本站蓝桥杯 2025 省赛测试数据均为洛谷自造，与官方数据可能存在差异，仅供学习参考。", "description": "小蓝要画一个 $2025$ 图形。图形的形状为一个 $h \\times w$ 的矩形，其中 $h$ 表示图形的高，$w$ 表示图形的宽。当 $h = 5, w = 10$ 时，图形如下所示：\n\n```\n2025202520\n0252025202\n2520252025\n5202520252\n2025202520\n```\n\n图形的规律是：第一行用 $2025$ 重复填入，第二行开始，每行向左移动一个字符，用 $2025$ 重复填入。\n给定 $h, w$，请输出对应的图形。", "inputFormat": "输入的第一行包含两个正整数 $h, w$，用一个空格分隔。", "outputFormat": "输出若干行，表示对应的图形。", "hint": "### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$h = 1$，$1 \\leq w \\leq 20$；\n- 对于 $60\\%$ 的评测用例，$1 \\leq h, w \\leq 20$；\n- 对于所有评测用例，$1 \\leq h, w \\leq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 C/Python A] 2025 图形", "background": "本站蓝桥杯 2025 省赛测试数据均为洛谷自造，与官方数据可能存在差异，仅供学习参考。", "description": "小蓝要画一个 $2025$ 图形。图形的形状为一个 $h \\times w$ 的矩形，其中 $h$ 表示图形的高，$w$ 表示图形的宽。当 $h = 5, w = 10$ 时，图形如下所示：\n\n```\n2025202520\n0252025202\n2520252025\n5202520252\n2025202520\n```\n\n图形的规律是：第一行用 $2025$ 重复填入，第二行开始，每行向左移动一个字符，用 $2025$ 重复填入。\n给定 $h, w$，请输出对应的图形。", "inputFormat": "输入的第一行包含两个正整数 $h, w$，用一个空格分隔。", "outputFormat": "输出若干行，表示对应的图形。", "hint": "### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$h = 1$，$1 \\leq w \\leq 20$；\n- 对于 $60\\%$ 的评测用例，$1 \\leq h, w \\leq 20$；\n- 对于所有评测用例，$1 \\leq h, w \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P12165", "type": "P", "difficulty": 2, "samples": [["2\n0\n1\n2\n3", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2025", "排序", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 C/Java A] 最短距离", "background": "", "description": "在一条一维的直线上，存在着 $n$ 台显示器和 $n$ 个电源插座。老师给小蓝布置了个任务：负责将每台显示器通过电源线与一个插座相连接（每个插座最多只能给一台显示器供电）；同时，老师希望所消耗的电源线的长度尽可能的少，请你帮小蓝计算下电源线的最小消耗长度为多少？\n\n为了便于计算，你只需要考虑直线距离即可。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vyof7ql0.png)", "inputFormat": "输入的第一行包含一个正整数 $n$。\n\n接下来 $n$ 行，每行包含一个整数 $x_i$，依次表示每台显示器的坐标。\n\n接下来 $n$ 行，每行包含一个整数 $y_i$，依次表示每个插座的坐标。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 评测用例规模与约定\n\n- 对于 $20\\%$ 的评测用例，$1 \\leq n \\leq 10$，$0 \\leq x_i, y_i \\leq 100$；\n- 对于 $40\\%$ 的评测用例，$1 \\leq n \\leq 100$，$0 \\leq x_i, y_i \\leq 10^3$；\n- 对于 $60\\%$ 的评测用例，$1 \\leq n \\leq 1000$，$0 \\leq x_i, y_i \\leq 10^5$；\n- 对于 $80\\%$ 的评测用例，$1 \\leq n \\leq 10000$，$0 \\leq x_i, y_i \\leq 10^9$；\n- 对于所有评测用例，$1 \\leq n \\leq 50000$，$0 \\leq x_i, y_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 C/Java A] 最短距离", "background": "", "description": "在一条一维的直线上，存在着 $n$ 台显示器和 $n$ 个电源插座。老师给小蓝布置了个任务：负责将每台显示器通过电源线与一个插座相连接（每个插座最多只能给一台显示器供电）；同时，老师希望所消耗的电源线的长度尽可能的少，请你帮小蓝计算下电源线的最小消耗长度为多少？\n\n为了便于计算，你只需要考虑直线距离即可。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vyof7ql0.png)", "inputFormat": "输入的第一行包含一个正整数 $n$。\n\n接下来 $n$ 行，每行包含一个整数 $x_i$，依次表示每台显示器的坐标。\n\n接下来 $n$ 行，每行包含一个整数 $y_i$，依次表示每个插座的坐标。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 评测用例规模与约定\n\n- 对于 $20\\%$ 的评测用例，$1 \\leq n \\leq 10$，$0 \\leq x_i, y_i \\leq 100$；\n- 对于 $40\\%$ 的评测用例，$1 \\leq n \\leq 100$，$0 \\leq x_i, y_i \\leq 10^3$；\n- 对于 $60\\%$ 的评测用例，$1 \\leq n \\leq 1000$，$0 \\leq x_i, y_i \\leq 10^5$；\n- 对于 $80\\%$ 的评测用例，$1 \\leq n \\leq 10000$，$0 \\leq x_i, y_i \\leq 10^9$；\n- 对于所有评测用例，$1 \\leq n \\leq 50000$，$0 \\leq x_i, y_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P12166", "type": "P", "difficulty": 3, "samples": [["3 3\n10\n1 2 3 4 3 2 2 1 3 4", "4 3 2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2025", "链表", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 C/Java A/研究生组] 冷热数据队列", "background": "", "description": "冷热数据队列 $q$ 可以看做由两个子队列组成：长度为 $n_1$ 的热数据队列 $q_1$ 和长度为 $n_2$ 的冷数据队列 $q_2$。当我们需要访问某个数据页 $p$ 时：\n\n1. 若 $p$ 不在队列 $q$ 中（即既不在 $q_1$ 中，也不在 $q_2$ 中），则加载数据页 $p$，并插入到 $q_2$ 的首部。\n2. 若 $p$ 已经在队列 $q$ 中，则将 $p$ 移动至 $q_1$ 首部。\n3. 当 $q_1$ 或 $q_2$ 队列容量不足时，会将其尾部的数据页淘汰出去。\n4. 当 $q_1$ 已满，但 $q_2$ 未满时，从 $q_1$ 中淘汰出的数据页会移动到 $q_2$ 首部。", "inputFormat": "输入的第一行包含两个正整数 $n_1, n_2$，用一个空格分隔。\n\n第二行包含一个整数 $m$，表示操作次数。\n\n第三行包含 $m$ 个非负整数 $v_1, v_2, \\cdots, v_m$，表示依次访问到的数据页的编号，相邻整数之间使用一个空格分隔。", "outputFormat": "输出两行。\n\n第一行包含若干个整数，相邻整数之间使用一个空格分隔，依次表示 $q_1$ 中的数据页。\n\n第二行包含若干个整数，相邻整数之间使用一个空格分隔，依次表示 $q_2$ 中的数据页。", "hint": "### 样例说明\n\n| $i$   | $v_i$   | $q_1$           | $q_2$           |\n|-------|---------|-----------------|-----------------|\n| $- $  | $-$     | $[]$            | $[]$            |\n| $1 $  | $1$     | $[]$            | $[1]$           |\n| $2 $  | $2$     | $[]$            | $[2,1]$         |\n| $3 $  | $3$     | $[]$            | $[3,2,1]$       |\n| $4 $  | $4$     | $[]$            | $[4,3,2]$       |\n| $5 $  | $3$     | $[3]$           | $[4,2]$         |\n| $6 $  | $2$     | $[2,3]$         | $[4]$           |\n| $7 $  | $2$     | $[2,3]$         | $[4]$           |\n| $8 $  | $1$     | $[2,3]$         | $[1,4]$         |\n| $9 $  | $3$     | $[3,2]$         | $[1,4]$         |\n| $10$  | $4$     | $[4,3,2]$       | $[1]$           |\n\n### 评测用例规模与约定\n\n- 对于 $20\\%$ 的评测用例，$1 \\leq n_1, n_2 \\leq 10$，$1 \\leq m \\leq 10$；\n- 对于 $40\\%$ 的评测用例，$1 \\leq n_1, n_2 \\leq 20$，$1 \\leq m \\leq 100$；\n- 对于 $60\\%$ 的评测用例，$1 \\leq n_1, n_2 \\leq 100$，$1 \\leq m \\leq 1000$；\n- 对于 $80\\%$ 的评测用例，$1 \\leq n_1, n_2 \\leq 10^3$，$1 \\leq m \\leq 10^4$；\n- 对于所有评测用例，$1 \\leq n_1, n_2 \\leq 10^4$，$1 \\leq m \\leq 10^5$，$0 \\leq v_i \\leq 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 C/Java A/研究生组] 冷热数据队列", "background": "", "description": "冷热数据队列 $q$ 可以看做由两个子队列组成：长度为 $n_1$ 的热数据队列 $q_1$ 和长度为 $n_2$ 的冷数据队列 $q_2$。当我们需要访问某个数据页 $p$ 时：\n\n1. 若 $p$ 不在队列 $q$ 中（即既不在 $q_1$ 中，也不在 $q_2$ 中），则加载数据页 $p$，并插入到 $q_2$ 的首部。\n2. 若 $p$ 已经在队列 $q$ 中，则将 $p$ 移动至 $q_1$ 首部。\n3. 当 $q_1$ 或 $q_2$ 队列容量不足时，会将其尾部的数据页淘汰出去。\n4. 当 $q_1$ 已满，但 $q_2$ 未满时，从 $q_1$ 中淘汰出的数据页会移动到 $q_2$ 首部。", "inputFormat": "输入的第一行包含两个正整数 $n_1, n_2$，用一个空格分隔。\n\n第二行包含一个整数 $m$，表示操作次数。\n\n第三行包含 $m$ 个非负整数 $v_1, v_2, \\cdots, v_m$，表示依次访问到的数据页的编号，相邻整数之间使用一个空格分隔。", "outputFormat": "输出两行。\n\n第一行包含若干个整数，相邻整数之间使用一个空格分隔，依次表示 $q_1$ 中的数据页。\n\n第二行包含若干个整数，相邻整数之间使用一个空格分隔，依次表示 $q_2$ 中的数据页。", "hint": "### 样例说明\n\n| $i$   | $v_i$   | $q_1$           | $q_2$           |\n|-------|---------|-----------------|-----------------|\n| $- $  | $-$     | $[]$            | $[]$            |\n| $1 $  | $1$     | $[]$            | $[1]$           |\n| $2 $  | $2$     | $[]$            | $[2,1]$         |\n| $3 $  | $3$     | $[]$            | $[3,2,1]$       |\n| $4 $  | $4$     | $[]$            | $[4,3,2]$       |\n| $5 $  | $3$     | $[3]$           | $[4,2]$         |\n| $6 $  | $2$     | $[2,3]$         | $[4]$           |\n| $7 $  | $2$     | $[2,3]$         | $[4]$           |\n| $8 $  | $1$     | $[2,3]$         | $[1,4]$         |\n| $9 $  | $3$     | $[3,2]$         | $[1,4]$         |\n| $10$  | $4$     | $[4,3,2]$       | $[1]$           |\n\n### 评测用例规模与约定\n\n- 对于 $20\\%$ 的评测用例，$1 \\leq n_1, n_2 \\leq 10$，$1 \\leq m \\leq 10$；\n- 对于 $40\\%$ 的评测用例，$1 \\leq n_1, n_2 \\leq 20$，$1 \\leq m \\leq 100$；\n- 对于 $60\\%$ 的评测用例，$1 \\leq n_1, n_2 \\leq 100$，$1 \\leq m \\leq 1000$；\n- 对于 $80\\%$ 的评测用例，$1 \\leq n_1, n_2 \\leq 10^3$，$1 \\leq m \\leq 10^4$；\n- 对于所有评测用例，$1 \\leq n_1, n_2 \\leq 10^4$，$1 \\leq m \\leq 10^5$，$0 \\leq v_i \\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P12167", "type": "P", "difficulty": 3, "samples": [["7 3\n8 5 5 2 2 3 4", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "2025", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 C/Python A] 倒水", "background": "", "description": "小蓝有 $n$ 个装了水的瓶子，从左到右摆放，第 $i$ 个瓶子里装有 $a_i$ 单位的水。为了美观，小蓝将水循环染成了 $k$ 种颜色，也就是说，第 $i$ 个瓶子和第 $i + k$ 个瓶子里的水的颜色相同。\n\n小蓝发现有的瓶子里的水太少了，因此他规定如果第 $i$ 个瓶子和第 $j$ 个瓶子中的水颜色相同并且满足 $i < j$，即可将任意整数单位的水从第 $i$ 个水瓶倒出，倒入第 $j$ 个水瓶中。小蓝想知道任意次操作后所有瓶子中的水的最小值 $\\min\\{a_i\\}$ 最大可以是多少？", "inputFormat": "输入的第一行包含两个正整数 $n, k$，用一个空格分隔。\n\n第二行包含 $n$ 个正整数 $a_1, a_2, \\cdots, a_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 样例说明\n\n其中一种方案：\n- $a_1$ 往 $a_4$ 倒入 $3$ 单位；\n- $a_2$ 往 $a_5$ 倒入 $2$ 单位；\n- $a_3$ 往 $a_6$ 倒入 $1$ 单位；\n最终每个瓶子里的水：$5, 3, 4, 5, 4, 4, 4$，最小值为 $3$。\n\n### 评测用例规模与约定\n\n- 对于 $40\\%$ 的评测用例，$1 \\leq n, a_i \\leq 100$；\n- 对于所有评测用例，$1 \\leq n, a_i \\leq 100000$，$1 \\leq k \\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 C/Python A] 倒水", "background": "", "description": "小蓝有 $n$ 个装了水的瓶子，从左到右摆放，第 $i$ 个瓶子里装有 $a_i$ 单位的水。为了美观，小蓝将水循环染成了 $k$ 种颜色，也就是说，第 $i$ 个瓶子和第 $i + k$ 个瓶子里的水的颜色相同。\n\n小蓝发现有的瓶子里的水太少了，因此他规定如果第 $i$ 个瓶子和第 $j$ 个瓶子中的水颜色相同并且满足 $i < j$，即可将任意整数单位的水从第 $i$ 个水瓶倒出，倒入第 $j$ 个水瓶中。小蓝想知道任意次操作后所有瓶子中的水的最小值 $\\min\\{a_i\\}$ 最大可以是多少？", "inputFormat": "输入的第一行包含两个正整数 $n, k$，用一个空格分隔。\n\n第二行包含 $n$ 个正整数 $a_1, a_2, \\cdots, a_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 样例说明\n\n其中一种方案：\n- $a_1$ 往 $a_4$ 倒入 $3$ 单位；\n- $a_2$ 往 $a_5$ 倒入 $2$ 单位；\n- $a_3$ 往 $a_6$ 倒入 $1$ 单位；\n最终每个瓶子里的水：$5, 3, 4, 5, 4, 4, 4$，最小值为 $3$。\n\n### 评测用例规模与约定\n\n- 对于 $40\\%$ 的评测用例，$1 \\leq n, a_i \\leq 100$；\n- 对于所有评测用例，$1 \\leq n, a_i \\leq 100000$，$1 \\leq k \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P12168", "type": "P", "difficulty": 3, "samples": [["3\n66 66 66", "1"], ["7\n666666 16166 6696 666 6 6 6", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2025", "蓝桥杯省赛", "分类讨论"], "title": "[蓝桥杯 2025 省 C/Python A/Java A] 拼好数", "background": null, "description": "我们将含有不少于 $6$ 个 $6$ 的数视为一个好数。例如 $666666$、$162636465666$ 是好数，$12366666$ 不是好数。\n\n给定 $n$ 个正整数 $a_i$，你可以把这些数分成若干组拼起来，每组内的数可以按任意顺序拼，但一组最多只能有 $3$ 个数。求最多可以得到多少个好数。", "inputFormat": "输入的第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个正整数 $a_1, a_2, \\cdots, a_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案，即最多可以得到的好数的数量。", "hint": "### 评测用例规模与约定\n\n- 对于 $20\\%$ 的评测用例，$1 \\leq n \\leq 20$；\n- 对于所有评测用例，$1 \\leq n \\leq 1000$，$0 \\leq a_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 C/Python A/Java A] 拼好数", "background": null, "description": "我们将含有不少于 $6$ 个 $6$ 的数视为一个好数。例如 $666666$、$162636465666$ 是好数，$12366666$ 不是好数。\n\n给定 $n$ 个正整数 $a_i$，你可以把这些数分成若干组拼起来，每组内的数可以按任意顺序拼，但一组最多只能有 $3$ 个数。求最多可以得到多少个好数。", "inputFormat": "输入的第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个正整数 $a_1, a_2, \\cdots, a_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案，即最多可以得到的好数的数量。", "hint": "### 评测用例规模与约定\n\n- 对于 $20\\%$ 的评测用例，$1 \\leq n \\leq 20$；\n- 对于所有评测用例，$1 \\leq n \\leq 1000$，$0 \\leq a_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P12169", "type": "P", "difficulty": 4, "samples": [["2 2\n1 3\n3 2", "2.500000"], ["2 3\n2 4 1\n4 2 5", "4.166667"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["并查集", "2025", "分治", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 C/Python A/Java C] 登山", "background": "", "description": "小蓝正在登山，山峰的高度构成 $n$ 行 $m$ 列的正整数矩阵，$a_{i,j}$ 表示第 $i$ 行第 $j$ 列格子 $(i,j)$ 上的山峰的高度。小蓝以一种特别的方式进行登山，如果他此刻在第 $p$ 行第 $q$ 列的格子 $(p,q)$ 上，那么下一步可以选择：\n\n1. 走到格子 $(i,q)$，满足 $a_{i,q} < a_{p,q}$ 且 $i > p$；\n2. 走到格子 $(i,q)$，满足 $a_{i,q} > a_{p,q}$ 且 $i < p$；\n3. 走到格子 $(p,j)$，满足 $a_{p,j} < a_{p,q}$ 且 $j > q$；\n4. 走到格子 $(p,j)$，满足 $a_{p,j} > a_{p,q}$ 且 $j < q$。\n\n小蓝想知道，如果他依次从每一个格子开始出发，按照最优策略，他最高能到达的山峰的高度的平均值是多少？", "inputFormat": "输入的第一行包含两个正整数 $n, m$，用一个空格分隔。\n\n接下来 $n$ 行，每行包含 $m$ 个正整数。其中第 $i$ 行包含 $a_{i,1}, a_{i,2}, \\cdots, a_{i,m}$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个实数表示答案，四舍五入保留正好 $6$ 位小数。", "hint": "### 样例说明 1\n\n除了从格子 $(1,1)$ 出发以外，其他格子都能到达高度为 $3$ 的山峰，$(1 + 3 + 3 + 3)/4 = 2.5$。\n\n### 样例说明 2\n\n每个格子能到达的高度：\n\n$$\\begin{matrix} 4 & 4 & 4 \\\\ 4 & 4 & 5\\end{matrix}$$\n\n其中 $(1,1)$ 可以先到达格子 $(1,3)$ 再到达格子 $(1,2)$。\n\n### 评测用例规模与约定\n\n- 对于 $40\\%$ 的评测用例，$1 \\leq n, m \\leq 10^2$；\n- 对于所有评测用例，$1 \\leq n, m \\leq 10^4$，$1 \\leq n \\times m \\leq 10^6$，$1 \\leq a_{ij} \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 C/Python A/Java C] 登山", "background": "", "description": "小蓝正在登山，山峰的高度构成 $n$ 行 $m$ 列的正整数矩阵，$a_{i,j}$ 表示第 $i$ 行第 $j$ 列格子 $(i,j)$ 上的山峰的高度。小蓝以一种特别的方式进行登山，如果他此刻在第 $p$ 行第 $q$ 列的格子 $(p,q)$ 上，那么下一步可以选择：\n\n1. 走到格子 $(i,q)$，满足 $a_{i,q} < a_{p,q}$ 且 $i > p$；\n2. 走到格子 $(i,q)$，满足 $a_{i,q} > a_{p,q}$ 且 $i < p$；\n3. 走到格子 $(p,j)$，满足 $a_{p,j} < a_{p,q}$ 且 $j > q$；\n4. 走到格子 $(p,j)$，满足 $a_{p,j} > a_{p,q}$ 且 $j < q$。\n\n小蓝想知道，如果他依次从每一个格子开始出发，按照最优策略，他最高能到达的山峰的高度的平均值是多少？", "inputFormat": "输入的第一行包含两个正整数 $n, m$，用一个空格分隔。\n\n接下来 $n$ 行，每行包含 $m$ 个正整数。其中第 $i$ 行包含 $a_{i,1}, a_{i,2}, \\cdots, a_{i,m}$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个实数表示答案，四舍五入保留正好 $6$ 位小数。", "hint": "### 样例说明 1\n\n除了从格子 $(1,1)$ 出发以外，其他格子都能到达高度为 $3$ 的山峰，$(1 + 3 + 3 + 3)/4 = 2.5$。\n\n### 样例说明 2\n\n每个格子能到达的高度：\n\n$$\\begin{matrix} 4 & 4 & 4 \\\\ 4 & 4 & 5\\end{matrix}$$\n\n其中 $(1,1)$ 可以先到达格子 $(1,3)$ 再到达格子 $(1,2)$。\n\n### 评测用例规模与约定\n\n- 对于 $40\\%$ 的评测用例，$1 \\leq n, m \\leq 10^2$；\n- 对于所有评测用例，$1 \\leq n, m \\leq 10^4$，$1 \\leq n \\times m \\leq 10^6$，$1 \\leq a_{ij} \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P12170", "type": "P", "difficulty": 1, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["模拟", "2025", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 Python B] 攻击次数", "background": "本站蓝桥杯 2025 省赛测试数据均为洛谷自造，与官方数据可能存在差异，仅供学习参考。\n\n【2025-04-13 13:05】本题题目有歧义，根据多数用户理解我们修改了数据，目前洛谷数据判定为：$3$ 个英雄只要能攻击就一起攻击。如果 $3$ 个英雄只能选择能攻击的中攻击最高的，答案为 $181$。", "description": "小蓝正在玩一个游戏，游戏中小蓝要控制自己的三个英雄来攻击一个敌人。敌人初始的血量为 $2025$。\n\n小蓝的第一个英雄攻击力恒定，每回合攻击 $5$ 的血量。\n\n小蓝的第二个英雄拥有一些技能，奇数回合触发，攻击 $15$ 的血量，偶数回合攻击 $2$ 的血量。\n\n小蓝的第三个英雄拥有一些道具，当回合数除以 $3$ 的余数为 $1$ 时攻击 $2$ 的血量；当回合数除以 $3$ 的余数为 $2$ 时攻击 $10$ 的血量；当回合数除以 $3$ 的余数为 $0$ 时攻击 $7$ 的血量。\n\n游戏从第 $1$ 回合开始。不考虑敌人对小蓝英雄的攻击，敌人的血量也仅受攻击的影响。如果敌人的血量小于等于零，则游戏结束。\n\n请问到第几回合游戏结束？", "inputFormat": "", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只需要**编写一个程序输出这个整数**，输出多余的内容将无法得分。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 Python B] 攻击次数", "background": "本站蓝桥杯 2025 省赛测试数据均为洛谷自造，与官方数据可能存在差异，仅供学习参考。\n\n【2025-04-13 13:05】本题题目有歧义，根据多数用户理解我们修改了数据，目前洛谷数据判定为：$3$ 个英雄只要能攻击就一起攻击。如果 $3$ 个英雄只能选择能攻击的中攻击最高的，答案为 $181$。", "description": "小蓝正在玩一个游戏，游戏中小蓝要控制自己的三个英雄来攻击一个敌人。敌人初始的血量为 $2025$。\n\n小蓝的第一个英雄攻击力恒定，每回合攻击 $5$ 的血量。\n\n小蓝的第二个英雄拥有一些技能，奇数回合触发，攻击 $15$ 的血量，偶数回合攻击 $2$ 的血量。\n\n小蓝的第三个英雄拥有一些道具，当回合数除以 $3$ 的余数为 $1$ 时攻击 $2$ 的血量；当回合数除以 $3$ 的余数为 $2$ 时攻击 $10$ 的血量；当回合数除以 $3$ 的余数为 $0$ 时攻击 $7$ 的血量。\n\n游戏从第 $1$ 回合开始。不考虑敌人对小蓝英雄的攻击，敌人的血量也仅受攻击的影响。如果敌人的血量小于等于零，则游戏结束。\n\n请问到第几回合游戏结束？", "inputFormat": "", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只需要**编写一个程序输出这个整数**，输出多余的内容将无法得分。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P12171", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["字符串", "2025", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 Python B] 最长字符串", "background": "", "description": "小蓝手里有一个单词本，上面记录了一些单词，保存在 words.txt 中，其中每一行包含一个仅有小写英文字母组成的单词。\n\n小蓝想要找到一个最长的优美字符串。\n\n一个长度为 $n$ 的字符串 $s = c_1c_2 \\cdots c_n$ 是优美字符串，必须满足 $s$ 在单词本中，且满足以下两个条件之一：\n\n1) $n = 1$；\n2) $n > 1$，且存在一个优美字符串 $s'$，$s'$ 的长度为 $n - 1$，$s'$ 的字符调整顺序后与 $c_1c_2 \\cdots c_{n-1}$ 一致。\n\n示例，假设 words.txt 文件中的单词如下：b、bc、cbd、dbca，那么：\n\n- $s_1 = \\tt{b}$，长度 1，是优美字符串；\n- $s_2 = \\tt{bc}$，$s' =\\tt b$ 在单词本中出现过，并且是优美字符串，所以 $s_2$ 是优美字符串；\n- $s_3 =\\tt cbd$，$s' =\\tt bc$ 在单词本中出现过，并且是优美字符串，所以 $s_3$ 是优美字符串；\n- $s_4 =\\tt dbca$，$s' =\\tt cbd$ 在单词本中出现过，并且是优美字符串，所以 $s_4$ 是优美字符串；\n\n现在请你帮助小蓝从单词本 words.txt 中找出长度最大的优美字符串，如果存在多个答案，优先使用字典序最小的那一个作为答案。", "inputFormat": "$ $    ", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个字符串，在提交答案时只需要**编写一个程序输出这个字符串**，输出多余的内容将无法得分。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 Python B] 最长字符串", "background": "", "description": "小蓝手里有一个单词本，上面记录了一些单词，保存在 words.txt 中，其中每一行包含一个仅有小写英文字母组成的单词。\n\n小蓝想要找到一个最长的优美字符串。\n\n一个长度为 $n$ 的字符串 $s = c_1c_2 \\cdots c_n$ 是优美字符串，必须满足 $s$ 在单词本中，且满足以下两个条件之一：\n\n1) $n = 1$；\n2) $n > 1$，且存在一个优美字符串 $s'$，$s'$ 的长度为 $n - 1$，$s'$ 的字符调整顺序后与 $c_1c_2 \\cdots c_{n-1}$ 一致。\n\n示例，假设 words.txt 文件中的单词如下：b、bc、cbd、dbca，那么：\n\n- $s_1 = \\tt{b}$，长度 1，是优美字符串；\n- $s_2 = \\tt{bc}$，$s' =\\tt b$ 在单词本中出现过，并且是优美字符串，所以 $s_2$ 是优美字符串；\n- $s_3 =\\tt cbd$，$s' =\\tt bc$ 在单词本中出现过，并且是优美字符串，所以 $s_3$ 是优美字符串；\n- $s_4 =\\tt dbca$，$s' =\\tt cbd$ 在单词本中出现过，并且是优美字符串，所以 $s_4$ 是优美字符串；\n\n现在请你帮助小蓝从单词本 words.txt 中找出长度最大的优美字符串，如果存在多个答案，优先使用字典序最小的那一个作为答案。", "inputFormat": "$ $    ", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个字符串，在提交答案时只需要**编写一个程序输出这个字符串**，输出多余的内容将无法得分。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P12172", "type": "P", "difficulty": 1, "samples": [["3 4 5", "QQQ\nQQQ\nQQQ\nQQQ\nQQQQQQQQ\nQQQQQQQQ\nQQQQQQQQ"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2025", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 Python B] LQ 图形", "background": "本站蓝桥杯 2025 省赛测试数据均为洛谷自造，与官方数据可能存在差异，仅供学习参考。", "description": "小蓝要为蓝桥画一个图形。由于小蓝的画图能力有限，他准备用大写字母 Q 画一个 L 形状的字符画。他希望 L 的粗细正好是 $w$ 个字符宽，竖的笔划伸出 $h$ 高（因此图形总共 $h + w$ 高），横的笔划伸出 $v$ 宽（因此图形总共 $v + w$ 宽），要求每个笔划方方正正不能有多余内容。\n\n例如，当 $w = 2, h = 3, v = 4$ 时，图形如下所示：\n\n```\nQQ\nQQ\nQQ\nQQQQQQ\nQQQQQQ\n```\n\n给定 $w, h, v$，请帮助小蓝画出这个图形。", "inputFormat": "输入的第一行包含三个正整数 $w, h, v$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出若干行，表示对应的图形。", "hint": "### 评测用例规模与约定\n\n对于 $30\\%$ 的评测用例，$w = 1$，$1 \\leq h, v \\leq 20$；\n\n对于 $60\\%$ 的评测用例，$1 \\leq w, h, v \\leq 20$；\n\n对于所有评测用例，$1 \\leq w, h, v \\leq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 Python B] LQ 图形", "background": "本站蓝桥杯 2025 省赛测试数据均为洛谷自造，与官方数据可能存在差异，仅供学习参考。", "description": "小蓝要为蓝桥画一个图形。由于小蓝的画图能力有限，他准备用大写字母 Q 画一个 L 形状的字符画。他希望 L 的粗细正好是 $w$ 个字符宽，竖的笔划伸出 $h$ 高（因此图形总共 $h + w$ 高），横的笔划伸出 $v$ 宽（因此图形总共 $v + w$ 宽），要求每个笔划方方正正不能有多余内容。\n\n例如，当 $w = 2, h = 3, v = 4$ 时，图形如下所示：\n\n```\nQQ\nQQ\nQQ\nQQQQQQ\nQQQQQQ\n```\n\n给定 $w, h, v$，请帮助小蓝画出这个图形。", "inputFormat": "输入的第一行包含三个正整数 $w, h, v$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出若干行，表示对应的图形。", "hint": "### 评测用例规模与约定\n\n对于 $30\\%$ 的评测用例，$w = 1$，$1 \\leq h, v \\leq 20$；\n\n对于 $60\\%$ 的评测用例，$1 \\leq w, h, v \\leq 20$；\n\n对于所有评测用例，$1 \\leq w, h, v \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P12173", "type": "P", "difficulty": 2, "samples": [["lqbblqblqlxqb", "3"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "贪心", "2025", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 Python B] 最多次数", "background": "", "description": "小蓝有一个字符串 $s$，他特别喜欢由以下三个字符组成的单词：$\\tt {l}, \\tt{q}, \\tt{b}$，任意顺序都可以，一共有 $6$ 种可能：$\\tt{lqb}$、$\\tt{lbq}$、$\\tt{qlb}$、$\\tt{qbl}$、$\\tt{blq}$、$\\tt{bql}$。\n\n现在他想从 $s$ 中，尽可能切割出多个他喜欢的单词，请问最多能切割出多少个？单词指的是由若干个连续的字符组成的子字符串。", "inputFormat": "输入一行包含一个字符串 $s$。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 评测用例规模与约定\n\n- 对于 $20\\%$ 的评测用例，$1 \\leq |s| \\leq 10$；\n- 对于 $40\\%$ 的评测用例，$1 \\leq |s| \\leq 20$；\n- 对于 $60\\%$ 的评测用例，$1 \\leq |s| \\leq 100$；\n- 对于 $70\\%$ 的评测用例，$1 \\leq |s| \\leq 10^3$；\n- 对于 $80\\%$ 的评测用例，$1 \\leq |s| \\leq 10^4$；\n- 对于所有评测用例，$1 \\leq |s| \\leq 10^5$，$s$ 中只包含小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 Python B] 最多次数", "background": "", "description": "小蓝有一个字符串 $s$，他特别喜欢由以下三个字符组成的单词：$\\tt {l}, \\tt{q}, \\tt{b}$，任意顺序都可以，一共有 $6$ 种可能：$\\tt{lqb}$、$\\tt{lbq}$、$\\tt{qlb}$、$\\tt{qbl}$、$\\tt{blq}$、$\\tt{bql}$。\n\n现在他想从 $s$ 中，尽可能切割出多个他喜欢的单词，请问最多能切割出多少个？单词指的是由若干个连续的字符组成的子字符串。", "inputFormat": "输入一行包含一个字符串 $s$。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 评测用例规模与约定\n\n- 对于 $20\\%$ 的评测用例，$1 \\leq |s| \\leq 10$；\n- 对于 $40\\%$ 的评测用例，$1 \\leq |s| \\leq 20$；\n- 对于 $60\\%$ 的评测用例，$1 \\leq |s| \\leq 100$；\n- 对于 $70\\%$ 的评测用例，$1 \\leq |s| \\leq 10^3$；\n- 对于 $80\\%$ 的评测用例，$1 \\leq |s| \\leq 10^4$；\n- 对于所有评测用例，$1 \\leq |s| \\leq 10^5$，$s$ 中只包含小写字母。", "locale": "zh-CN"}}}
{"pid": "P12174", "type": "P", "difficulty": 3, "samples": [["2", "1"], ["3", "5"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "数论", "蓝桥杯省赛", "调和级数"], "title": "[蓝桥杯 2025 省 Python B] A · B Problem", "background": "", "description": "设有两个二维向量 $\\overrightarrow{A}(X_A, Y_A), \\overrightarrow{B}(X_B, Y_B)$。给定 $L$，求 $(X_A, Y_A), (X_B, Y_B)$ 有多少种不同的取值，使得：\n\n1. $X_A, Y_A, X_B, Y_B$ 均为正整数；\n2. $\\overrightarrow{A} \\cdot \\overrightarrow{B} \\leq L$，其中 $\\overrightarrow{A} \\cdot \\overrightarrow{B}$ 表示 $\\overrightarrow{A}, \\overrightarrow{B}$ 的内积，即 $X_A \\cdot X_B + Y_A \\cdot Y_B$。", "inputFormat": "输入的第一行包含一个正整数 $L$，表示题目描述中的限制条件。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 评测用例规模与约定\n\n- 对于 $40\\%$ 的评测用例，$L \\leq 50$；\n- 对于 $80\\%$ 的评测用例，$L \\leq 5000$；\n- 对于所有评测用例，$1 \\leq L \\leq 2^{20}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 Python B] A · B Problem", "background": "", "description": "设有两个二维向量 $\\overrightarrow{A}(X_A, Y_A), \\overrightarrow{B}(X_B, Y_B)$。给定 $L$，求 $(X_A, Y_A), (X_B, Y_B)$ 有多少种不同的取值，使得：\n\n1. $X_A, Y_A, X_B, Y_B$ 均为正整数；\n2. $\\overrightarrow{A} \\cdot \\overrightarrow{B} \\leq L$，其中 $\\overrightarrow{A} \\cdot \\overrightarrow{B}$ 表示 $\\overrightarrow{A}, \\overrightarrow{B}$ 的内积，即 $X_A \\cdot X_B + Y_A \\cdot Y_B$。", "inputFormat": "输入的第一行包含一个正整数 $L$，表示题目描述中的限制条件。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 评测用例规模与约定\n\n- 对于 $40\\%$ 的评测用例，$L \\leq 50$；\n- 对于 $80\\%$ 的评测用例，$L \\leq 5000$；\n- 对于所有评测用例，$1 \\leq L \\leq 2^{20}$。", "locale": "zh-CN"}}}
{"pid": "P12175", "type": "P", "difficulty": 2, "samples": [["6\n3 5 4 7 6 7", "3"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2025", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 Python B] 园艺", "background": "", "description": "小蓝从左到右种了 $n$ 棵小树，第 $i$ 棵树的高度为 $h_i$，相邻树的间隔相同。小蓝想挪走一些树使得剩下的树等间隔分布，且从左到右高度逐渐上升（相邻两棵树高度满足右边的比左边的高），小蓝想知道最多能留下多少棵树。", "inputFormat": "输入的第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个正整数 $h_1, h_2, \\cdots, h_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 样例说明\n\n留下第 1、3、5 棵树，它们等间隔且从左到右高度逐渐上升。\n\n### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$1 \\leq n \\leq 500$；\n- 对于 $60\\%$ 的评测用例，$1 \\leq n \\leq 3000$；\n- 对于所有评测用例，$1 \\leq n \\leq 5000$，$0 < h_i < 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 Python B] 园艺", "background": "", "description": "小蓝从左到右种了 $n$ 棵小树，第 $i$ 棵树的高度为 $h_i$，相邻树的间隔相同。小蓝想挪走一些树使得剩下的树等间隔分布，且从左到右高度逐渐上升（相邻两棵树高度满足右边的比左边的高），小蓝想知道最多能留下多少棵树。", "inputFormat": "输入的第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个正整数 $h_1, h_2, \\cdots, h_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 样例说明\n\n留下第 1、3、5 棵树，它们等间隔且从左到右高度逐渐上升。\n\n### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$1 \\leq n \\leq 500$；\n- 对于 $60\\%$ 的评测用例，$1 \\leq n \\leq 3000$；\n- 对于所有评测用例，$1 \\leq n \\leq 5000$，$0 < h_i < 10^6$。", "locale": "zh-CN"}}}
{"pid": "P12176", "type": "P", "difficulty": 2, "samples": [["3\n3 1 2", "2"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2025", "图论建模", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 Python B] 书架还原", "background": "", "description": "在一个偏远的图书馆里，有个书架上放着 $n$ 本书，每本书上都标有一个从 $1$ 到 $n$ 的唯一编号。\n\n按照规矩，这些书应该按编号从小到大依次排列：$1$ 号书位于最左端，$2$ 号书紧随其后，以此类推，直到 $n$ 号书在最右端。这样的顺序不仅看起来整齐，也方便读者快速找到想借的书。\n\n可昨天店里人来人往，借书还书忙得不可开交，书架上的顺序出现了错乱。现在，书架上的书变成了 $a = (a_1, a_2, \\ldots, a_n)$，其中 $a_i$ 表示第 $i$ 个位置上的书编号。\n\n管理员决定动手整理书架，但时间有限，他希望用最少的操作把书的顺序恢复到正确的排列。每次操作，他可以挑选书架上任意两本书，交换它们的位置。例如，如果当前排列是 $(3, 1, 2)$，他可以交换第 $1$ 本和第 $2$ 本，得到 $(1, 3, 2)$，再交换第 $2$ 本和第 $3$ 本，得到 $(1, 2, 3)$。\n\n你的任务是帮助管理员计算，最少需要进行多少次操作，才能让书架上的书的编号排列变为 $(1, 2, \\ldots, n)$。", "inputFormat": "输入的第一行包含一个正整数 $n$，表示书架上书的总数。\n\n第二行包含 $n$ 个正整数 $a_1, a_2, \\ldots, a_n$，相邻整数之间使用一个空格分隔，依次表示当前书架上每本书的编号。$a_1, a_2, \\ldots, a_n$ 是一个 $1$ 到 $n$ 的排列。", "outputFormat": "输出一行包含一个整数表示答案，即将书架上的书恢复到正确排列所需的最少操作次数。", "hint": "### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$1 \\leq n \\leq 10^3$，$1 \\leq a_i \\leq n$，$a_1, a_2, \\dots, a_n$ 各不相同；\n- 对于所有评测用例，$1 \\leq n \\leq 10^6$，$1 \\leq a_i \\leq n$，$a_1, a_2, \\dots, a_n$ 各不相同。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 Python B] 书架还原", "background": "", "description": "在一个偏远的图书馆里，有个书架上放着 $n$ 本书，每本书上都标有一个从 $1$ 到 $n$ 的唯一编号。\n\n按照规矩，这些书应该按编号从小到大依次排列：$1$ 号书位于最左端，$2$ 号书紧随其后，以此类推，直到 $n$ 号书在最右端。这样的顺序不仅看起来整齐，也方便读者快速找到想借的书。\n\n可昨天店里人来人往，借书还书忙得不可开交，书架上的顺序出现了错乱。现在，书架上的书变成了 $a = (a_1, a_2, \\ldots, a_n)$，其中 $a_i$ 表示第 $i$ 个位置上的书编号。\n\n管理员决定动手整理书架，但时间有限，他希望用最少的操作把书的顺序恢复到正确的排列。每次操作，他可以挑选书架上任意两本书，交换它们的位置。例如，如果当前排列是 $(3, 1, 2)$，他可以交换第 $1$ 本和第 $2$ 本，得到 $(1, 3, 2)$，再交换第 $2$ 本和第 $3$ 本，得到 $(1, 2, 3)$。\n\n你的任务是帮助管理员计算，最少需要进行多少次操作，才能让书架上的书的编号排列变为 $(1, 2, \\ldots, n)$。", "inputFormat": "输入的第一行包含一个正整数 $n$，表示书架上书的总数。\n\n第二行包含 $n$ 个正整数 $a_1, a_2, \\ldots, a_n$，相邻整数之间使用一个空格分隔，依次表示当前书架上每本书的编号。$a_1, a_2, \\ldots, a_n$ 是一个 $1$ 到 $n$ 的排列。", "outputFormat": "输出一行包含一个整数表示答案，即将书架上的书恢复到正确排列所需的最少操作次数。", "hint": "### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$1 \\leq n \\leq 10^3$，$1 \\leq a_i \\leq n$，$a_1, a_2, \\dots, a_n$ 各不相同；\n- 对于所有评测用例，$1 \\leq n \\leq 10^6$，$1 \\leq a_i \\leq n$，$a_1, a_2, \\dots, a_n$ 各不相同。\n", "locale": "zh-CN"}}}
{"pid": "P12177", "type": "P", "difficulty": 3, "samples": [["3\n1 2 3", "8"], ["4\n9 8 7 6", "118"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2025", "位运算", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 Python B] 异或和", "background": "", "description": "小蓝有 $n$ 个数 $a_i$，他想知道这 $n$ 个数中的所有数对下标的差值乘上它们的异或之后，得到的结果的和是多少。\n\n也就是说，小蓝想要得到\n\n$$\\sum_{i=1}^{n} \\sum_{j=i+1}^{n} (a_i \\oplus a_j) \\times (j - i)$$\n\n的值，其中 $\\oplus$ 表示按位异或。", "inputFormat": "输入的第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个正整数 $a_1, a_2, \\cdots, a_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 评测用例规模与约定\n\n- 对于 $40\\%$ 的评测用例，$n \\leq 5000$；\n- 对于所有评测用例，$1 \\leq n \\leq 10^5$，$1 \\leq a_i \\leq 2^{20}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 Python B] 异或和", "background": "", "description": "小蓝有 $n$ 个数 $a_i$，他想知道这 $n$ 个数中的所有数对下标的差值乘上它们的异或之后，得到的结果的和是多少。\n\n也就是说，小蓝想要得到\n\n$$\\sum_{i=1}^{n} \\sum_{j=i+1}^{n} (a_i \\oplus a_j) \\times (j - i)$$\n\n的值，其中 $\\oplus$ 表示按位异或。", "inputFormat": "输入的第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个正整数 $a_1, a_2, \\cdots, a_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 评测用例规模与约定\n\n- 对于 $40\\%$ 的评测用例，$n \\leq 5000$；\n- 对于所有评测用例，$1 \\leq n \\leq 10^5$，$1 \\leq a_i \\leq 2^{20}$。", "locale": "zh-CN"}}}
{"pid": "P12178", "type": "P", "difficulty": 3, "samples": [["4\n0 1 3 2", "0132"], ["4\n6 9 8 7", "5876"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "枚举"], "title": "DerrickLo's Decimals (UBC002A)", "background": "You can switch the language of the problem description.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/96tdfgkh.png)", "description": "有一个循环节长度为 $n$ 的纯循环小数，它可以表示为 $a = 0.\\dot{a_1}a_2\\dots\\dot{a_n}$。\n\n由于 DerrickLo 的计算机受奶龙影响产生了精度问题，它只给 DerrickLo $n$ 个数 $b_1, b_2, \\dots, b_n$，其中 $b_i$ 表示将 $a$ 四舍五入到小数点后 $i$ 位后第 $i$ 位的值。\n\nDerrickLo 请你帮忙计算出所有可能的 $a$ 的值，将它们求和后**乘以 $10^n - 1$** 输出。\n\n注意，这里的四舍五入只看下一位的数值。令 $\\text{round}$ 表示四舍五入函数，则 $\\text{round}(0.5) = 1$，$\\text{round}(0.49999) = 0$。形式化地，$b_i$ 可以表示为 $(\\text{round}(a \\times 10^i)) \\bmod 10$。", "inputFormat": "第一行一个整数 $n$，表示循环节长度。\n\n第二行 $n$ 个整数，以一个空格分隔，表示 $b_1, b_2, \\dots, b_n$。", "outputFormat": "一行一个整数，表示答案。\n\n可以证明，答案的位数不超过 $n$，**若不到 $n$ 位，设答案位数为 $k$，请先输出 $n-k$ 个前导零再输出答案。**", "hint": "## 样例解释\n\n### 样例 $1$\n\n令 $a = 0.\\dot{0}13\\dot{2}$，则有：\n\n- $a$ 四舍五入到第一位的值为 $0.0$，第一位为 $0$。\n- $a$ 四舍五入到第二位的值为 $0.01$，第二位为 $1$。\n- $a$ 四舍五入到第三位的值为 $0.013$，第三位为 $3$。\n- $a$ 四舍五入到第四位的值为 $0.0132$，第四位为 $2$。\n\n因此 $a = 0.\\dot{0}13\\dot{2}$ 符合题目要求。\n\n可以证明，没有其他答案，故符合条件的 $a$ 的和为 $0.\\dot{0}13\\dot{2}$，乘以 $10^4 - 1$ 后为 $132$，补齐前导零后为 $0132$。\n\n### 样例 $2$\n\n令 $a = 0.\\dot{5}87\\dot{6}$，则有：\n\n- $a$ 四舍五入到第一位的值为 $0.6$，第一位为 $6$。\n- $a$ 四舍五入到第二位的值为 $0.59$，第二位为 $9$。\n- $a$ 四舍五入到第三位的值为 $0.588$，第三位为 $8$。\n- $a$ 四舍五入到第四位的值为 $0.5877$，第四位为 $7$。\n\n因此 $a = 0.\\dot{5}87\\dot{6}$ 符合题目要求。\n\n可以证明，没有其他答案，故符合条件的 $a$ 的和为 $0.\\dot{5}87\\dot{6}$，乘以 $10^4 - 1$ 后为 $5876$。\n\n## 数据范围\n\n对于所有数据，满足 $1 \\le n \\le 10^6$，$0 \\le b_i \\le 9$。", "locale": "zh-CN", "translations": {"en": {"title": "DerrickLo's Decimals (UBC002A)", "background": "", "description": "There is a pure recurring decimal whose recurring period has a length of $n$. This number $a$ can be written as $0.\\dot{a_1}a_2\\dots\\dot{a_n}$.\n\nDue to some strange problems of Nailoong, DerrickLo's computer faced some accuracy issues, that is, when he is asking for the value of $a$, the computer only tells him $n$ digits $b_1, b_2, \\dots, b_n$, where $b_i$ shows the last digit when rounding $a$ to the $i\\text{-th}$ digit after floating point.\n\nDerrickLo wants you to calculate the sum of all the possible values of $a$. To reduce output, output the sum multiplied by $10^n - 1$.\n\nNote that when rounding a decimal to an integer, we only consider the value of at most one digit right to the floating point. If we let $\\text{round}$ be the function of rounding, then $\\text{round}(0.5) = 1, \\text{round}(0.49999) = 0$ hold.\n\nFormally, $b_i = (\\text{round}(a \\times 10^i)) \\pmod {10}$.", "inputFormat": "The input is consisted of two lines.\n\nThe first line contains one single integer $n$, the length of the recurring period.\n\nThe second line is consisted of $n$ integers separated by a space, $b_1, b_2, \\dots, b_n$.\n", "outputFormat": "One line, consisting of one number showing the answer.\n\nIt can be shown that the answer is always an integer whose number of digits is not greater than $n$.\n\nIf its number of digit $k$ is less than $n$, output $n-k$ zeros right before the answer (without any spaces).\n", "hint": "#### Testcase 1\n\nLet $a = 0.\\dot013\\dot2$.\n\n- When rounding $a$ to the 1st digit, $0.0$, the 1st digit is $0$.\n- When rounding $a$ to the 2nd digit, $0.01$, the 2nd digit is $1$.\n- When rounding $a$ to the 3rd digit, $0.013$, the 3rd digit is $3$.\n- When rounding $a$ to the 4th digit, $0.0132$, the 4th digit is $2$.\n\nThus $a = 0.\\dot013\\dot2$ satisfies the constraints.\n\nIt can be proven that there aren't any possibles values other than $0.\\dot013\\dot2$ that can be the value of $a$. So, the sum is $0.\\dot013\\dot2$. After multiplying it by $10^4 - 1$, it becomes $132$, so you should output `0132`.\n\n#### Testcase 2\n\n\nLet $a = 0.\\dot587\\dot6$.\n\n- When rounding $a$ to the 1st digit, $0.6$, the 1st digit is $6$.\n- When rounding $a$ to the 2nd digit, $0.59$, the 2nd digit is $9$.\n- When rounding $a$ to the 3rd digit, $0.588$, the 3rd digit is $8$.\n- When rounding $a$ to the 4th digit, $0.5877$, the 4th digit is $7$.\n\nThus $a = 0.\\dot587\\dot6$ satisfies the constraints.\n\nIt can be proven that there aren't any possibles values other than $0.\\dot587\\dot6$ that can be the value of $a$, so the sum is $0.\\dot587\\dot6$. After multiplying it by $10^4 - 1$, it becomes $5876$, so you should output `5876`.\n\n#### Constraints\n\nFor all testcases, $1 \\le n \\le 10^6, 0 \\le b_i \\le 9$.\n", "locale": "en"}, "zh-CN": {"title": "DerrickLo's Decimals (UBC002A)", "background": "You can switch the language of the problem description.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/96tdfgkh.png)", "description": "有一个循环节长度为 $n$ 的纯循环小数，它可以表示为 $a = 0.\\dot{a_1}a_2\\dots\\dot{a_n}$。\n\n由于 DerrickLo 的计算机受奶龙影响产生了精度问题，它只给 DerrickLo $n$ 个数 $b_1, b_2, \\dots, b_n$，其中 $b_i$ 表示将 $a$ 四舍五入到小数点后 $i$ 位后第 $i$ 位的值。\n\nDerrickLo 请你帮忙计算出所有可能的 $a$ 的值，将它们求和后**乘以 $10^n - 1$** 输出。\n\n注意，这里的四舍五入只看下一位的数值。令 $\\text{round}$ 表示四舍五入函数，则 $\\text{round}(0.5) = 1$，$\\text{round}(0.49999) = 0$。形式化地，$b_i$ 可以表示为 $(\\text{round}(a \\times 10^i)) \\bmod 10$。", "inputFormat": "第一行一个整数 $n$，表示循环节长度。\n\n第二行 $n$ 个整数，以一个空格分隔，表示 $b_1, b_2, \\dots, b_n$。", "outputFormat": "一行一个整数，表示答案。\n\n可以证明，答案的位数不超过 $n$，**若不到 $n$ 位，设答案位数为 $k$，请先输出 $n-k$ 个前导零再输出答案。**", "hint": "## 样例解释\n\n### 样例 $1$\n\n令 $a = 0.\\dot{0}13\\dot{2}$，则有：\n\n- $a$ 四舍五入到第一位的值为 $0.0$，第一位为 $0$。\n- $a$ 四舍五入到第二位的值为 $0.01$，第二位为 $1$。\n- $a$ 四舍五入到第三位的值为 $0.013$，第三位为 $3$。\n- $a$ 四舍五入到第四位的值为 $0.0132$，第四位为 $2$。\n\n因此 $a = 0.\\dot{0}13\\dot{2}$ 符合题目要求。\n\n可以证明，没有其他答案，故符合条件的 $a$ 的和为 $0.\\dot{0}13\\dot{2}$，乘以 $10^4 - 1$ 后为 $132$，补齐前导零后为 $0132$。\n\n### 样例 $2$\n\n令 $a = 0.\\dot{5}87\\dot{6}$，则有：\n\n- $a$ 四舍五入到第一位的值为 $0.6$，第一位为 $6$。\n- $a$ 四舍五入到第二位的值为 $0.59$，第二位为 $9$。\n- $a$ 四舍五入到第三位的值为 $0.588$，第三位为 $8$。\n- $a$ 四舍五入到第四位的值为 $0.5877$，第四位为 $7$。\n\n因此 $a = 0.\\dot{5}87\\dot{6}$ 符合题目要求。\n\n可以证明，没有其他答案，故符合条件的 $a$ 的和为 $0.\\dot{5}87\\dot{6}$，乘以 $10^4 - 1$ 后为 $5876$。\n\n## 数据范围\n\n对于所有数据，满足 $1 \\le n \\le 10^6$，$0 \\le b_i \\le 9$。", "locale": "zh-CN"}}}
{"pid": "P12179", "type": "P", "difficulty": 5, "samples": [["3 2\n1 2 3\n2 1 2\n2 1 1", "1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "平衡树", "O2优化"], "title": "DerrickLo's Game (UBC002B)", "background": "", "description": "在 DerrickLo 的游戏中，他有 $n$ 个属性，第 $i$ 个属性的初始值为 $a_i$，接下来根据游戏进度变化，他会给你一些修改操作或者询问，形如：\n\n- `1 k x`，将 $a_k$ 变为 $x$（修改操作）。\n- `2 l r`，问仅通过以下操作（**但不真正执行**）使区间变为相同的数的最小代价（询问）。操作分别是：\n\n1. 选择整数 $p$，将 $a_p$ 增加 $1$，代价为 $1$。\n2. 选择整数区间 $x,y$，将 $a_x\\dots a_y$ 全部变为 $\\max\\limits_{i=x}^y a_i$，代价为 $(y-x+1)^2$。", "inputFormat": "第一行，两个正整数 $n,q$，表示 DerrickLo 的属性个数与修改操作和询问的总数。\n\n第二行，$n$ 个正整数表示序列 $a$。\n\n接下来 $q$ 行，每行三个整数，表示一次修改操作或询问。", "outputFormat": "设共有 $t$ 次询问，输出 $t$ 行，分别表示每次询问的答案。", "hint": "**样例说明**\n\n第一次询问中，选择 $a_1$ 使其增加 $1$ 即可，代价为 $1$。\n\n第二次询问中，由于区间大小为 $1$，所以不需要任何操作。\n\n**数据范围**\n\n对于 $100\\%$ 的数据，保证输入数据全部为整数，且 $1\\le n,q,a_i\\le 2\\times 10^5$，对于修改操作，$1\\le k\\le n$，$1\\le x\\le 2\\times 10^5$；对于询问，$1\\le l\\le r\\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "DerrickLo's Game (UBC002B)", "background": "", "description": "There is an array $a$ with $n$ numbers ($1\\le n,a_i\\le 2\\times10^5$). You have to handle $q$ modifications or queries ($1\\le q\\le 2\\times10^5$). There are two types of modifications or queries:\n\n- Input `1 k x`, this changes $a_k$ into $x$ ($1\\le k\\le n$, $1\\le x\\le 2\\times10^5$) (modify).\n\n- Input `2 l r`, you have to print the minimum cost of making $a_l\\dots a_r$ the same by the two operations below (**This does not really changes the array.**) ($1\\le l\\le r\\le 2\\times 10^5$) (query):\n\n1. Choose an integer $p$, increase $a_p$ by $1$. This costs $1$.\n\n2. Choose an interval $[x,y]$, change $a_x\\dots a_y$ into $\\max\\limits_{i=x}^ya_i$. This costs $(y-x+1)^2$.", "inputFormat": "The first line contains two integers $n,q$.\n\nThe second line contains $n$ integers, representing $a$.\n\nFor the next $q$ lines, each line contains three integers, representing a modify or a query.", "outputFormat": "Suppose there are $t$ queries. Please output $t$ lines, representing the answers for each one.", "hint": "For the first query, we choose $a_1$ and increase it by $1$. This costs $1$. So output $1$.\n\nFor the second query, we don't need to do any operations since the number in $[1,1]$ is already the same.", "locale": "en"}, "zh-CN": {"title": "DerrickLo's Game (UBC002B)", "background": "", "description": "在 DerrickLo 的游戏中，他有 $n$ 个属性，第 $i$ 个属性的初始值为 $a_i$，接下来根据游戏进度变化，他会给你一些修改操作或者询问，形如：\n\n- `1 k x`，将 $a_k$ 变为 $x$（修改操作）。\n- `2 l r`，问仅通过以下操作（**但不真正执行**）使区间变为相同的数的最小代价（询问）。操作分别是：\n\n1. 选择整数 $p$，将 $a_p$ 增加 $1$，代价为 $1$。\n2. 选择整数区间 $x,y$，将 $a_x\\dots a_y$ 全部变为 $\\max\\limits_{i=x}^y a_i$，代价为 $(y-x+1)^2$。", "inputFormat": "第一行，两个正整数 $n,q$，表示 DerrickLo 的属性个数与修改操作和询问的总数。\n\n第二行，$n$ 个正整数表示序列 $a$。\n\n接下来 $q$ 行，每行三个整数，表示一次修改操作或询问。", "outputFormat": "设共有 $t$ 次询问，输出 $t$ 行，分别表示每次询问的答案。", "hint": "**样例说明**\n\n第一次询问中，选择 $a_1$ 使其增加 $1$ 即可，代价为 $1$。\n\n第二次询问中，由于区间大小为 $1$，所以不需要任何操作。\n\n**数据范围**\n\n对于 $100\\%$ 的数据，保证输入数据全部为整数，且 $1\\le n,q,a_i\\le 2\\times 10^5$，对于修改操作，$1\\le k\\le n$，$1\\le x\\le 2\\times 10^5$；对于询问，$1\\le l\\le r\\le n$。", "locale": "zh-CN"}}}
{"pid": "P12180", "type": "P", "difficulty": 5, "samples": [["6 2\n1 2\n1 3\n2 4\n2 5\n1 6\n3 5\n2 4\n", "Yes\nNo\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化", "树链剖分"], "title": "DerrickLo's City (UBC002C)", "background": "DerrickLo 看到了一个 $n \\le 7.5 \\times 10^5$ 的题，并且发现很多人写了 $O(n^2)$ 过了。于是他想写 $O(n\\log^3n)$，但是挂了。于是将原题的序列改成了树。\n\n注：以上故事是将出题人的名字换成 DerrickLo 得到的。\n", "description": "DerrickLo 在游戏中掌控着一个城市。这个城市内的团体间并不是非常的和谐，因此需要通过开会来增进关系。\n\n已知这个组织所在的城市被分为了 $n$ 个镇，每一个镇上恰好有一个团体。其中编号为 $1$ 的镇上分布着团体 $1$，$2$ 号镇上有团体 $2$，等等。这 $n$ 个镇通过 $n-1$ 条路径相连，两两可以互相到达。\n\n每次开会，DerrickLo 会指定一个区间 $[l, r]$，邀请编号在 $[l, r]$ 之间的团体来开会。由于团体比较分散，因此他还需要指定一个开会地址 $p$。因为团体的关系比较僵硬，所以前往开会的团体去 $p$ 的途中，不能到达别的与会团体所在的镇。\n\n由于 DerrickLo 刚接触这个游戏，操作不太熟悉，确定 $p$ 的任务就交给你了。\n", "inputFormat": "第一行两个正整数 $n, q$，表示镇的数量，会议个数。\n\n接下来 $n-1$ 行，每行两个正整数 $a_i, b_i$，表示 $a_i$ 镇 和 $b_i$ 镇之间有道路直接相连。\n\n接下来 $q$ 行，每行两个整数 $l_i, r_i$，表示此次由编号在 $[l_i, r_i]$ 之间的团体与会。\n", "outputFormat": "对于每一个会议，单独输出一行。如果能够选出这个地点，则输出 `Yes`，否则输出 `No`。\n", "hint": "对于第一个会议，$1, 2, 6$ 镇均可作为参会点。\n\n对于第二个会议，无论选哪里作为参会点，$2, 4$ 两团体均会有一方经过另一镇。\n\n### 数据范围\n\n$1 \\le n, q \\le 10^5$。\n\n保证道路 $(a_i, b_i)$ 使得任意两镇可互相到达。\n\n$1 \\le l_i \\le r_i \\le n$。\n", "locale": "zh-CN", "translations": {"en": {"title": "DerrickLo's City (UBC002C)", "background": "", "description": "In a game, DerrickLo is operating a city. There are $n$ groups in this city. Since the relations between these groups are not very nice, DerrickLo needs to hold some meetings to relieve the relationships.\n\nThe city is constructed of $n$ towns indexed from $1$ to $n$. There is exactly one group in each town. The group in town $i$ is indexed $i$. The towns are linked with $n - 1$ roads, so that every two towns can get to each other through these roads.\n\nEvery time DerrickLo holds a meeting, he will invite all the groups whose index is in an interval $[l, r]$ to a town $p$, where town $p$ is the place of the meeting. Since the relations are not very nice, groups can not pass by a town whose group is also attending the meeting while going to town $p$.\n\nBecause DerrickLo is new to this game, the task of determining town $p$ is handed to you.\n", "inputFormat": "The first line contains two positive integers $n, q(1 \\le n, q \\le 10^5)$, the number of towns and the number of meetings.\n\nThere are two positive integers $a_i, b_i$ in the next $n - 1$ lines, describing an edge which directly links town $a_i$ and $b_i$. It's guaranteed that these roads forms a tree.\n\nThere are two positive integers $l_i, r_i(1 \\le l_i \\le r_i \\le n)$ in the next $q$ lines, which means that DerrickLo invites the groups indexed in $[l_i, r_i]$ to a meeting.\n", "outputFormat": "For every meeting, if there exists such town $p$, output `Yes`. Otherwise output `No`.\n", "hint": "For the first meeting, the place of the meeting can be town $1$, $2$ or $6$.\n\nFor the second meeting, it can be proved that no matter which town is chosen, one of group $2, 4$ will pass by the other's town.\n", "locale": "en"}, "zh-CN": {"title": "DerrickLo's City (UBC002C)", "background": "DerrickLo 看到了一个 $n \\le 7.5 \\times 10^5$ 的题，并且发现很多人写了 $O(n^2)$ 过了。于是他想写 $O(n\\log^3n)$，但是挂了。于是将原题的序列改成了树。\n\n注：以上故事是将出题人的名字换成 DerrickLo 得到的。\n", "description": "DerrickLo 在游戏中掌控着一个城市。这个城市内的团体间并不是非常的和谐，因此需要通过开会来增进关系。\n\n已知这个组织所在的城市被分为了 $n$ 个镇，每一个镇上恰好有一个团体。其中编号为 $1$ 的镇上分布着团体 $1$，$2$ 号镇上有团体 $2$，等等。这 $n$ 个镇通过 $n-1$ 条路径相连，两两可以互相到达。\n\n每次开会，DerrickLo 会指定一个区间 $[l, r]$，邀请编号在 $[l, r]$ 之间的团体来开会。由于团体比较分散，因此他还需要指定一个开会地址 $p$。因为团体的关系比较僵硬，所以前往开会的团体去 $p$ 的途中，不能到达别的与会团体所在的镇。\n\n由于 DerrickLo 刚接触这个游戏，操作不太熟悉，确定 $p$ 的任务就交给你了。\n", "inputFormat": "第一行两个正整数 $n, q$，表示镇的数量，会议个数。\n\n接下来 $n-1$ 行，每行两个正整数 $a_i, b_i$，表示 $a_i$ 镇 和 $b_i$ 镇之间有道路直接相连。\n\n接下来 $q$ 行，每行两个整数 $l_i, r_i$，表示此次由编号在 $[l_i, r_i]$ 之间的团体与会。\n", "outputFormat": "对于每一个会议，单独输出一行。如果能够选出这个地点，则输出 `Yes`，否则输出 `No`。\n", "hint": "对于第一个会议，$1, 2, 6$ 镇均可作为参会点。\n\n对于第二个会议，无论选哪里作为参会点，$2, 4$ 两团体均会有一方经过另一镇。\n\n### 数据范围\n\n$1 \\le n, q \\le 10^5$。\n\n保证道路 $(a_i, b_i)$ 使得任意两镇可互相到达。\n\n$1 \\le l_i \\le r_i \\le n$。\n", "locale": "zh-CN"}}}
{"pid": "P12181", "type": "P", "difficulty": 5, "samples": [["1\n1 2 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "O2优化", "期望", "整除分块"], "title": "DerrickLo's Buildings (UBC002D)", "background": "", "description": "在某游戏中，DerrickLo 的任务是操作一堆建筑。这些建筑被摆放在了编号为 $1$ 到 $M$ 的空位上，它们的高度也分别为 $1$ 到 $M$。一开始，对于所有 $i = 1, 2, \\dots, M$，高度为 $i$ 的建筑被摆在了 $i$ 号位置上。\n\n在这个游戏中，有 $M$ 个挑战。具体地，第 $i$ 个挑战都会指定一个高度因数 $l = i$ 和目标长度 $N$，这个挑战的**得分**为在重新摆放建筑后，对于所有 $j = 1, 2, \\dots N$，满足高度为 $j$ 的建筑被摆在了 $j \\times l$ 号位置的数量。**注意：所有挑战的目标长度都是相同的，但高度因数是互不相同的。**\n\n为了重新摆放这些建筑，DerrickLo 需要指定一个调换排列 $v$，每执行一次调换，就会**同时**将位置 $i$ 上的建筑移到 $v(i)$ 处。\n\n由于 DerrickLo 并不是很看重得分是否最高，因此他指定的排列 $v$ 将是从所有 $1$ 到 $M$ 的排列中**等概率**选取的一个。不过，他还是很好奇，对于每一个挑战 $i$，在他分别调换 $1, 2, \\dots, V$ 次时，他的期望得分是多少。\n\n由于挑战的个数以及调换的次数实在太多，DerrickLo 希望你告诉所有这些得分之和模 $998244353$ 之后的结果。即：\n$$\n\\left(\\sum_{i=1}^M\\sum_{k=1}^VE\\left(\\sum_{j=1}^N[v_k(j) = i \\times j]\\right)\\right)\\bmod 998244353\n$$\n其中 $v_k(j)$ 表示根据排列 $v$ 调换了 $k$ 次之后，高度为 $j$ 的建筑所在的位置编号。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据的个数。\n\n接下来 $T$ 行，每行三个整数 $N, M, V$，描述一个测试数据。\n\n**注意：输入数据不一定在 `int` 范围内。**\n", "outputFormat": "共 $T$ 行，每行一个整数，表示答案。\n", "hint": "在样例中，$v$ 只有 $\\{1, 2\\}$ 与 $\\{2, 1\\}$ 两种取值。你需要计算：\n$$\n\\sum_{i=1}^2E([v(1) = i])\n$$\n当 $i=1$ 时，$E([v(1) = 1]) = \\frac 1 2$；当 $i=2$ 时，$E([v(1) = 2]) = \\frac 1 2$。因此，求和之后是 $\\frac{1 + 1}{2} = 1$。\n\n---\n\n对于所有测试数据：\n\n- $1 \\le T \\le 5$。\n- $1 \\le N \\le M \\le 10^{12}$。\n- $2 \\le (M \\bmod 998244353)$。\n- $1 \\le V \\le 10^{12}$。\n\n**注意：输入数据不一定在 `int` 范围内。**\n", "locale": "zh-CN", "translations": {"en": {"title": "DerrickLo's Buildings (UBC002D)", "background": "", "description": "In a game, DerrickLo needs to complete a task of managing a bunch of buildings. These buildings are placed on position $1$ to $M$. Their heights are $1$ to $M$, too. Initially, the building with height $i$ is placed on position $i$, for each $i$ from $1$ to $M$.\n\nThere are also $M$ challenges, the $i$-th challenge contains a height factor $l = i$ and a target length $N$. The **score** of this challenge is the number of $j$ from $1$ to $N$ such that the building with height $j$ is placed on position $(j \\times l)$ after rearranging the positions of the buildings. **Note that the target lengths of each challenge are the same, but the height factors are distinct.**\n\nTo rearrange the buildings, DerrickLo needs to give a *shift* permutation $v$. Whenever he *shifts*, he moves the building on position $i$ to position $v(i)$ for each $i$ from $1$ to $M$ **simultaneously**.\n\nSince DerrickLo is not interested in whether he achieved the maximum score, the shift permutation $v$ is chosen **uniformly** from all permutations of $\\{1, 2, \\dots, M\\}$. However, he is curious that for each challenge $i$, what is the expected score if he shifts $1, 2, \\dots, V$ times separately.\n\nBecause the number of challenges and shifts are too big, DerrickLo wants you to calculate the sum of the expected scores modulo $998244353$, that is,\n$$\n\\left(\\sum_{i=1}^M\\sum_{k=1}^VE\\left(\\sum_{j=1}^N[v_k(j) = i \\times j]\\right)\\right) \\bmod 998244353\n$$\nwhere $v_k(j)$ is the position of building with height $j$ after shifting $k$ times based on the shift permutation $v$.\n", "inputFormat": "**This problem has multiple testcases.**\n\nThe first line contains an integer $T$, the number of testcases.\n\nThe following $T$ lines, each contains three integers $N, M, V$, which discribes a testcase.\n\n**Note that the input data may NOT fit into a 32-bit integer.**", "outputFormat": "$T$ lines, each represents an answer to a testcase in given order.", "hint": "In the sample, $v$ is either $\\{1, 2\\}$ or $\\{2, 1\\}$. You need to calculate:\n$$\n\\sum_{i=1}^2E([v(1)=i])\n$$\nWhen $i = 1$, $E([v(1)=1]) = \\frac{1}{2}$. When $i=2$, $E([v(1) = 2]) = \\frac{1}{2}$. Thus, the sum is $\\frac{1 + 1}{2} = 1$.\n\n---\n\nFor all testcases:\n\n- $1 \\le T \\le 5$.\n- $1 \\le N \\le M \\le 10^{12}$.\n- $2 \\le (M \\bmod 998244353)$.\n- $1 \\le V \\le 10^{12}$.\n\n**Note that the input data may NOT fit into a 32-bit integer.**", "locale": "en"}, "zh-CN": {"title": "DerrickLo's Buildings (UBC002D)", "background": "", "description": "在某游戏中，DerrickLo 的任务是操作一堆建筑。这些建筑被摆放在了编号为 $1$ 到 $M$ 的空位上，它们的高度也分别为 $1$ 到 $M$。一开始，对于所有 $i = 1, 2, \\dots, M$，高度为 $i$ 的建筑被摆在了 $i$ 号位置上。\n\n在这个游戏中，有 $M$ 个挑战。具体地，第 $i$ 个挑战都会指定一个高度因数 $l = i$ 和目标长度 $N$，这个挑战的**得分**为在重新摆放建筑后，对于所有 $j = 1, 2, \\dots N$，满足高度为 $j$ 的建筑被摆在了 $j \\times l$ 号位置的数量。**注意：所有挑战的目标长度都是相同的，但高度因数是互不相同的。**\n\n为了重新摆放这些建筑，DerrickLo 需要指定一个调换排列 $v$，每执行一次调换，就会**同时**将位置 $i$ 上的建筑移到 $v(i)$ 处。\n\n由于 DerrickLo 并不是很看重得分是否最高，因此他指定的排列 $v$ 将是从所有 $1$ 到 $M$ 的排列中**等概率**选取的一个。不过，他还是很好奇，对于每一个挑战 $i$，在他分别调换 $1, 2, \\dots, V$ 次时，他的期望得分是多少。\n\n由于挑战的个数以及调换的次数实在太多，DerrickLo 希望你告诉所有这些得分之和模 $998244353$ 之后的结果。即：\n$$\n\\left(\\sum_{i=1}^M\\sum_{k=1}^VE\\left(\\sum_{j=1}^N[v_k(j) = i \\times j]\\right)\\right)\\bmod 998244353\n$$\n其中 $v_k(j)$ 表示根据排列 $v$ 调换了 $k$ 次之后，高度为 $j$ 的建筑所在的位置编号。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据的个数。\n\n接下来 $T$ 行，每行三个整数 $N, M, V$，描述一个测试数据。\n\n**注意：输入数据不一定在 `int` 范围内。**\n", "outputFormat": "共 $T$ 行，每行一个整数，表示答案。\n", "hint": "在样例中，$v$ 只有 $\\{1, 2\\}$ 与 $\\{2, 1\\}$ 两种取值。你需要计算：\n$$\n\\sum_{i=1}^2E([v(1) = i])\n$$\n当 $i=1$ 时，$E([v(1) = 1]) = \\frac 1 2$；当 $i=2$ 时，$E([v(1) = 2]) = \\frac 1 2$。因此，求和之后是 $\\frac{1 + 1}{2} = 1$。\n\n---\n\n对于所有测试数据：\n\n- $1 \\le T \\le 5$。\n- $1 \\le N \\le M \\le 10^{12}$。\n- $2 \\le (M \\bmod 998244353)$。\n- $1 \\le V \\le 10^{12}$。\n\n**注意：输入数据不一定在 `int` 范围内。**\n", "locale": "zh-CN"}}}
{"pid": "P12182", "type": "P", "difficulty": 6, "samples": [["3 2\n2 3 1\n()(\n1 3\n2 3", "4\n0"]], "limits": {"time": [3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288]}, "tags": ["树状数组", "O2优化"], "title": "DerrickLo's Brackets (UBC002E)", "background": "", "description": "DerrickLo 有一个长度为 $n$ 的正整数序列 $a$，以及一个长度为 $n$ 的仅含有 `(` 与 `)` 的字符序列 $t$。他现在要根据这两个序列生成 $q$ 组括号序列，具体地，他会选择两个在 $[1,n]$ 中的正整数 $l,r$ 且 $l\\le r$ 并对一个初始为空的字符串 $S$ 进行如下操作：\n\n- 从小到大枚举每个在 $[l,r]$ 之间的正整数 $i$，将 $a_i$ 个 $t_i$ 加到 $S$ 的末尾。\n\n他希望你能在每次他生成了一个括号序列 $S$ 后告诉他 $S$ 的最长合法匹配子串的大小。\n\n合法匹配串的定义如下：\n\n- 空串是合法匹配串。\n- 若 $A$ 是合法匹配串，则 $(A)$ 为合法匹配串。\n- 若 $A,B$ 都是合法匹配串，则 $AB$ 为合法匹配串。\n- 除此以外的所有字符串都不是合法匹配串。", "inputFormat": "第一行，两个正整数 $n,q$。\n\n第二行，$n$ 个正整数表示 $a$。\n\n第三行，一个字符串表示 $t$。\n\n接下来 $q$ 行，每行两个正整数表示一次生成中的 $l,r$。", "outputFormat": "$q$ 行，每行一个正整数表示答案。", "hint": "**样例说明**\n\n第一次生成的括号序列为 `(()))(`，它的最长合法匹配子串为 `(())`。\n\n第二次生成的括号序列为 `)))(`，它的最长合法匹配子串为空串。\n\n**数据范围**\n\n$1\\le n,q\\le 10^6$，$1\\le a_i\\le 10^9$，每次生成中的 $l,r$ 满足 $1\\le l\\le r\\le n$，$t$ 仅由 `(` 与 `)` 组成。除 $t$ 外所有输入数据为整数。", "locale": "zh-CN", "translations": {"en": {"title": "DerrickLo's Brackets (UBC002E)", "background": "", "description": "DerrickLo has an integer array $a$ with $n$ numbers, and a array $t$ with $n$ characters which are either `(` or `)` ($1\\le n\\le 10^6$, $1\\le a_i\\le 10^9$). Now he will generate $q$ bracket strings by selecting an interval $[l,r]$ ($1\\le l\\le r\\le n$) and perform the following operation to a string $S$ which is initially empty.\n\n- For each integer $i$ from $l$ to $r$, append $a_i$ copies of $t_i$ to $S$.\n\nAfter each generation, DerrickLo wants to know the longest good substring of $S$. Please help him!\n\nA good string is defined as,\n\n- An empty string is a good string.\n\n- If $A$ is a good string, then so does $(A)$.\n\n- If $A,B$ are both good strings, then so does $AB$.\n\n- Any other strings are **not** good strings.", "inputFormat": "The first line contains two integers $n,q$.\n\nThe second line contains $n$ integers representing $a$.\n\nThe third line contains a string representing $t$.\n\nFor the next $q$ lines, each one contains two integers representing $l,r$ for a generation.", "outputFormat": "Output $q$ lines. The $i$-th one representing the $i$-th answer.", "hint": "$S$ of the first generation is `(()))(`. Its longest good substring is `(())`, so output $4$.\n\n$S$ of the second generation is `)))(`. Its longest good substring is an empty string, so output $0$.", "locale": "en"}, "zh-CN": {"title": "DerrickLo's Brackets (UBC002E)", "background": "", "description": "DerrickLo 有一个长度为 $n$ 的正整数序列 $a$，以及一个长度为 $n$ 的仅含有 `(` 与 `)` 的字符序列 $t$。他现在要根据这两个序列生成 $q$ 组括号序列，具体地，他会选择两个在 $[1,n]$ 中的正整数 $l,r$ 且 $l\\le r$ 并对一个初始为空的字符串 $S$ 进行如下操作：\n\n- 从小到大枚举每个在 $[l,r]$ 之间的正整数 $i$，将 $a_i$ 个 $t_i$ 加到 $S$ 的末尾。\n\n他希望你能在每次他生成了一个括号序列 $S$ 后告诉他 $S$ 的最长合法匹配子串的大小。\n\n合法匹配串的定义如下：\n\n- 空串是合法匹配串。\n- 若 $A$ 是合法匹配串，则 $(A)$ 为合法匹配串。\n- 若 $A,B$ 都是合法匹配串，则 $AB$ 为合法匹配串。\n- 除此以外的所有字符串都不是合法匹配串。", "inputFormat": "第一行，两个正整数 $n,q$。\n\n第二行，$n$ 个正整数表示 $a$。\n\n第三行，一个字符串表示 $t$。\n\n接下来 $q$ 行，每行两个正整数表示一次生成中的 $l,r$。", "outputFormat": "$q$ 行，每行一个正整数表示答案。", "hint": "**样例说明**\n\n第一次生成的括号序列为 `(()))(`，它的最长合法匹配子串为 `(())`。\n\n第二次生成的括号序列为 `)))(`，它的最长合法匹配子串为空串。\n\n**数据范围**\n\n$1\\le n,q\\le 10^6$，$1\\le a_i\\le 10^9$，每次生成中的 $l,r$ 满足 $1\\le l\\le r\\le n$，$t$ 仅由 `(` 与 `)` 组成。除 $t$ 外所有输入数据为整数。", "locale": "zh-CN"}}}
