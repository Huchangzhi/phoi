{"pid": "P11143", "type": "P", "difficulty": 2, "samples": [["3 3\n1\n1 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "博弈论", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「SFMOI Round I」Strange Cake Game", "background": "小 $\\mathcal{W}$ 和 小 $\\mathcal{M}$ 在 CF 庄园里分蛋糕。\n", "description": "\n有一块面积为 $n\\times m$ 的矩形蛋糕。记其左上角顶点为 $(0,0)$，右下角顶点为 $(n,m)$，右上角顶点为 $(0,m)$。\n\n蛋糕上分布着 $k$ 块巧克力，第 $i$ 块的位置为 $(x_i-0.5,y_i-0.5)$。**一个点上可能有不止一块巧克力。**\n\n小 M 和 小 W 要切蛋糕。蛋糕刀起初在 $(0,0)$，小 W 先手，轮流移动蛋糕刀。设蛋糕刀在 $(x,y)$，则它可以被移动到 $(x,y+1)$ 或 $(x+1,y)$。\n\n在若干步后，蛋糕会被切割轨迹完全分成两个部分——右上角的部分归小 W，左下角的部分归小 M。小 W 和小 M 都想吃到最多的巧克力，请帮他们计算：如果双方都按照最优策略行动，小 W 能分到几块巧克力。\n\n如下是蛋糕的示例和一种可能的切蛋糕的方式。\n\n![蛋糕示例](https://cdn.luogu.com.cn/upload/image_hosting/er9wuv91.png?x-oss-process=image/resize,m_lfit,h_500)\n![切蛋糕示例](https://cdn.luogu.com.cn/upload/image_hosting/9o6ntvlb.png?x-oss-process=image/resize,m_lfit,h_500)", "inputFormat": "第一行，两个正整数 $n,m$，含义见题面。\n\n第二行，一个整数 $k$ ，表示巧克力块数。\n\n接下来 $k$ 行，每行两个正整数 $x_i,y_i$，表示第 $i$ 块巧克力的坐标为 $(x_i-0.5,y_i-0.5)$。\n\n注意：第 $i$ 块巧克力的坐标为 $(x_i-0.5,y_i-0.5)$。**一个格子上可能有多块巧克力。**", "outputFormat": "输出一个整数，代表小 W 最多能拿到的巧克力块数。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$n=m=1$；\n- Subtask 2（10 pts）：$1 \\le n \\times m \\le 60$；\n- Subtask 3（15 pts）：$1 \\le n \\times m \\le 10^5$；\n- Subtask 4（20 pts）：$k=1$；\n- Subtask 5（50 pts）：无特殊限制。\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $0 \\le k \\le 2 \\times 10^5$；\n- $1 \\le n,m \\le 10^{18}$；\n- $1 \\le x_i \\le n$，$1 \\le y_i \\le m$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Strange Cake Game", "background": "", "description": "There is a rectangular cake with an area of $n\\times m$. Its upper-left vertex is represented as $(0,0)$, and the bottom-right vertex is represented as $(n,m)$.\n\nThere are $k$ chocolates on the cake. The position of the $i$-th chocolate is $(x_i-0.5,y_i-0.5)$. **There may be more than one chocolate at the same position.**\n\nLittle M and Little W are going to cut the cake with a cake knife. At the very beginning, the knife is positioned at $(0,0)$. Little M and Little W are taking turns to move the knife, with Little W going first. Let's say the knife is at $(x,y)$, and it can be moved to $(x,y+1)$ or $(x+1,y)$ in a turn.  \n\nAfter several turns, the cake will be cut into two parts — the upper-right part belongs to Little W, and the other part belongs to Little W. Both Little W and Little M want to have the most chocolates, so please help them determine: if both of them move the knife optimally, how many chocolates Little W will have.\n\n\nThe following picture shows a cake and a possible way of cutting the cake.\n\n![Example: cake](https://cdn.luogu.com.cn/upload/image_hosting/er9wuv91.png?x-oss-process=image/resize,m_lfit,h_500)\n![Example: cutting the cake](https://cdn.luogu.com.cn/upload/image_hosting/s37ugr7i.png?x-oss-process=image/resize,m_lfit,h_500)", "inputFormat": "The first line contains two integers $n,m$ — the position of the bottom-right vertex of the cake.\n\nThe following line contains $k$ — number of the chocolates.\n\nNext $k$ lines, the $i$-th line contains two integers $x_i,y_i$ — the position of $i$-th chocolate is $(x_i-0.5,y_i-0.5)$.   \n\n\nNote that **There may be more than one chocolate at the same position.**", "outputFormat": "A single integer — the number of chocolates that Little W will have if they move the knife optimally.", "hint": "#### Subtasks and Contraints\n\n- Subtask 1 (5 pts): $n=m=1$;\n- Subtask 2 (10 pts): $1 \\le n \\times m \\le 60$;\n- Subtask 3 (15 pts): $1 \\le n \\times m \\le 10^5$;\n- Subtask 4 (20 pts): $k=1$;\n- Subtask 5 (50 pts): No further constraints.\n\n\nIt is guaranteed that\n\n- $0 \\le k \\le 2 \\times 10^5$;\n- $1 \\le n,m \\le 10^{18}$;\n- $1 \\le x_i \\le n$, $1 \\le y_i \\le m$.", "locale": "en"}, "zh-CN": {"title": "「SFMOI Round I」Strange Cake Game", "background": "小 $\\mathcal{W}$ 和 小 $\\mathcal{M}$ 在 CF 庄园里分蛋糕。\n", "description": "\n有一块面积为 $n\\times m$ 的矩形蛋糕。记其左上角顶点为 $(0,0)$，右下角顶点为 $(n,m)$，右上角顶点为 $(0,m)$。\n\n蛋糕上分布着 $k$ 块巧克力，第 $i$ 块的位置为 $(x_i-0.5,y_i-0.5)$。**一个点上可能有不止一块巧克力。**\n\n小 M 和 小 W 要切蛋糕。蛋糕刀起初在 $(0,0)$，小 W 先手，轮流移动蛋糕刀。设蛋糕刀在 $(x,y)$，则它可以被移动到 $(x,y+1)$ 或 $(x+1,y)$。\n\n在若干步后，蛋糕会被切割轨迹完全分成两个部分——右上角的部分归小 W，左下角的部分归小 M。小 W 和小 M 都想吃到最多的巧克力，请帮他们计算：如果双方都按照最优策略行动，小 W 能分到几块巧克力。\n\n如下是蛋糕的示例和一种可能的切蛋糕的方式。\n\n![蛋糕示例](https://cdn.luogu.com.cn/upload/image_hosting/er9wuv91.png?x-oss-process=image/resize,m_lfit,h_500)\n![切蛋糕示例](https://cdn.luogu.com.cn/upload/image_hosting/9o6ntvlb.png?x-oss-process=image/resize,m_lfit,h_500)", "inputFormat": "第一行，两个正整数 $n,m$，含义见题面。\n\n第二行，一个整数 $k$ ，表示巧克力块数。\n\n接下来 $k$ 行，每行两个正整数 $x_i,y_i$，表示第 $i$ 块巧克力的坐标为 $(x_i-0.5,y_i-0.5)$。\n\n注意：第 $i$ 块巧克力的坐标为 $(x_i-0.5,y_i-0.5)$。**一个格子上可能有多块巧克力。**", "outputFormat": "输出一个整数，代表小 W 最多能拿到的巧克力块数。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$n=m=1$；\n- Subtask 2（10 pts）：$1 \\le n \\times m \\le 60$；\n- Subtask 3（15 pts）：$1 \\le n \\times m \\le 10^5$；\n- Subtask 4（20 pts）：$k=1$；\n- Subtask 5（50 pts）：无特殊限制。\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $0 \\le k \\le 2 \\times 10^5$；\n- $1 \\le n,m \\le 10^{18}$；\n- $1 \\le x_i \\le n$，$1 \\le y_i \\le m$。\n", "locale": "zh-CN"}}}
{"pid": "P11144", "type": "P", "difficulty": 3, "samples": [["1\n\n1\n\n2", "\n? 2\n\n? 3\n\n! 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "洛谷原创", "交互题", "Special Judge", "O2优化", "不定方程", "洛谷月赛"], "title": "「SFMOI Round I」Strange Madoka Game", "background": "> いつも君の側にいるから / 无论何时我都与你同在 \\\n> 儚すぎて / 世界如此虚幻 \\\n> 消えて行きそうな世界 / 似乎随时随地都会消失 \\\n> だけど君がいる / 然而只要有你 \\\n> それだけで守りたいと思った / 我就心甘情愿将它守护", "description": "\n**本题和 B2 是不同的问题，请分别仔细阅读两题题面。**\n\n**这是一道交互题。**\n\n**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\n圆和焰在玩游戏。\n\n圆在心中想了一个非负整数 $m$，让焰猜出 $m$ 的值。当然，圆不会为难焰，所以 $\\textcolor{red}{0}\\le m\\le 10^{17}$。圆不会作弊，也就是说，**圆不会悄悄更换想好的数字。**\n\n焰可以问圆：对于**正**整数 $x$，$m\\bmod x$ 的值是多少。焰需要用最少的询问次数来猜出 $m$ 的值。（为了得到全部分数，最多只能使用 $2$ 次询问。）\n\n圆一共和焰玩了 $T$ 次游戏。然而，焰的数学很差，于是她找来了你，来帮她猜出这 $T$ 次游戏的答案。\n\n\n\n**形式化地**：有一个隐藏的非负整数 $m\\in [\\textcolor{red}{0},10^{17}]$。每次询问给定**正**整数 $x$，回答 $m\\bmod x$。用最少的询问次数找出 $m$。共有 $T$ 组测试数据。$m$ 的数值在事先确定，不会根据询问变化，也就是说，**交互库是非适应性的**。\n\n【实现细节】\n\n对于每个测试点，输入一行一个正整数 $T$，表示游戏次数。\n\n对于每组测试数据，你可以用以下的格式发起一次询问：\n\n- $\\texttt{? }x$：询问 $m\\bmod x$ 的值。你需要保证 $x$ 是**正**整数，且 $x \\in \\textcolor{red} {[1,4\\times 10^8]}$。\n\n\t从标准输入流读入一个整数表示答案。特别地，若整数是 $\\texttt{-1}$，你的程序已经被判定为 $\\texttt{Wrong Answer}$，此时你需要立刻终止程序。\n\n你可以用以下的格式回答答案：\n\n- $\\texttt{! }m$：回答 $m$ 的值。\n\n在发起询问后，需要刷新缓冲区，否则可能导致 TLE。\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。 特别地，利用 `std::endl` 来换行也会刷新缓冲区。\n- 在 Pascal 中，使用 `flush(output)`。  \n- 在 Python 中，使用 `stdout.flush()`。  \n- 对于其它语言，可自行查阅文档。", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le T\\le 100$，$m$ 为非负整数，$\\textcolor{red}{0}\\le m\\le 10^{17}$。\n\n#### 评分方式\n\n记单个测试点中，你的询问次数的最大值为 $Q$。则得分 $\\mathrm{score}$ 如下所示：\n\n$$\n\\begin{aligned}\n\\mathrm{score}=\\begin{cases}\n0, & Q\\in [81,+\\infty) \\\\\n10, & Q\\in [11,81) \\\\\n25, & Q\\in [3,11) \\\\\n50, & Q\\in [0,3) \\\\\n\\end{cases}\n\\end{aligned}\n$$\n\n本题得分为所有测试点得分的最小值。\n\n本题数据点的范围是非严格单调递增的。", "locale": "zh-CN", "translations": {"en": {"title": "Strange Madoka Game", "background": "", "description": "**This problem is different from B2. You had better read both statements.**\n\n**This is an interactive problem.**\n\n**Hint:** We provide a formalized description of this problem at the end of the statement.\n\nMadoka and Homura are playing a game.\n\nMadoka has thought of a non-negative integer $m$, and Homura need to determine its value. It is guaranteed that $\\textcolor{red}{0}\\le m\\le 10^{17}$. Also, Madoka doesn't cheat, that is, **Madoka wouldn't change the value of $m$** during the whole game.\n\nHomura can ask Madoka: for a **positive** integer $x$, what is the value of $m\\bmod x$. Homura aims to determine the value of $m$ with the number of queries as small as possible. (In order to get full points, you need to solve this problem within $2$ queries.)\n\nThe game will be played for $T$ rounds. However, Homura is poor at math. Thus, she turns to you.\n\n**Formally,** there exists a hidden non-negative integer $m\\in [\\textcolor{red}{0},10^{17}]$. In each query, a **positive** integer $x$ is given, and it returns $m \\bmod x$. \n\nFind $m$ with the least number of queries. There are $T$ test cases.\n\nThe value of $m$ is read from input file and does not change according to queries. That is, **the interactor is non-adaptive.**\n\n### Implementation Details\n\nInput a positive integer $T$ first, which stands for the number of the rounds.\n\nFor each test case:\n\n- Output a single line containing $\\texttt{? }x$ to make a query. Then, an integer indicating $m\\bmod x$ is available. \n\n\t$x$ is a **positive** integer should be guaranteed, and $x$ must fall in $ \\textcolor{red} {[1,4\\times 10^8]}$.\n    \n    If $x=-1$ instead of the answer, it means that the query limit is excceeded, or the query is invalid. The solution should quit immediately.\n    \n- Output a single line containing $\\texttt{! }m$ to respond to the guess. \n\nAfter outputing the queries, do not forget to output a newline character and flush the output buffer. Otherwise, you will receive the verdict TLE. To flush the buffer, use: \n\n- `fflush(stdout)` or `cout.flush()` in C++;\n- `flush(output)` in Pascal;\n- `stdout.flush()` in Python;\n- refer to the documentation for other languages. ", "inputFormat": "See [Implementation Details].", "outputFormat": "See [Implementation Details].", "hint": "\n#### Constraints\n\nIt is guaranteed that \n- $1\\le T\\le 100$;\n- $m$ is a non-negative number, and $\\textcolor{red}{0}\\le m\\le 10^{17}$。\n\n#### Scoring\n\nLet $Q$ be the maximum queries used in each test. The $\\mathrm{score}$ is calculated as following:\n\n$$\n\\begin{aligned}\n\\mathrm{score}=\\begin{cases}\n0, & Q\\in [81,+\\infty) \\\\\n10, & Q\\in [11,81) \\\\\n25, & Q\\in [3,11) \\\\\n50, & Q\\in [0,3) \\\\\n\\end{cases}\n\\end{aligned}\n$$\n\nThe score of this problem is the minimum score among all tests.\n", "locale": "en"}, "zh-CN": {"title": "「SFMOI Round I」Strange Madoka Game", "background": "> いつも君の側にいるから / 无论何时我都与你同在 \\\n> 儚すぎて / 世界如此虚幻 \\\n> 消えて行きそうな世界 / 似乎随时随地都会消失 \\\n> だけど君がいる / 然而只要有你 \\\n> それだけで守りたいと思った / 我就心甘情愿将它守护", "description": "\n**本题和 B2 是不同的问题，请分别仔细阅读两题题面。**\n\n**这是一道交互题。**\n\n**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\n圆和焰在玩游戏。\n\n圆在心中想了一个非负整数 $m$，让焰猜出 $m$ 的值。当然，圆不会为难焰，所以 $\\textcolor{red}{0}\\le m\\le 10^{17}$。圆不会作弊，也就是说，**圆不会悄悄更换想好的数字。**\n\n焰可以问圆：对于**正**整数 $x$，$m\\bmod x$ 的值是多少。焰需要用最少的询问次数来猜出 $m$ 的值。（为了得到全部分数，最多只能使用 $2$ 次询问。）\n\n圆一共和焰玩了 $T$ 次游戏。然而，焰的数学很差，于是她找来了你，来帮她猜出这 $T$ 次游戏的答案。\n\n\n\n**形式化地**：有一个隐藏的非负整数 $m\\in [\\textcolor{red}{0},10^{17}]$。每次询问给定**正**整数 $x$，回答 $m\\bmod x$。用最少的询问次数找出 $m$。共有 $T$ 组测试数据。$m$ 的数值在事先确定，不会根据询问变化，也就是说，**交互库是非适应性的**。\n\n【实现细节】\n\n对于每个测试点，输入一行一个正整数 $T$，表示游戏次数。\n\n对于每组测试数据，你可以用以下的格式发起一次询问：\n\n- $\\texttt{? }x$：询问 $m\\bmod x$ 的值。你需要保证 $x$ 是**正**整数，且 $x \\in \\textcolor{red} {[1,4\\times 10^8]}$。\n\n\t从标准输入流读入一个整数表示答案。特别地，若整数是 $\\texttt{-1}$，你的程序已经被判定为 $\\texttt{Wrong Answer}$，此时你需要立刻终止程序。\n\n你可以用以下的格式回答答案：\n\n- $\\texttt{! }m$：回答 $m$ 的值。\n\n在发起询问后，需要刷新缓冲区，否则可能导致 TLE。\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。 特别地，利用 `std::endl` 来换行也会刷新缓冲区。\n- 在 Pascal 中，使用 `flush(output)`。  \n- 在 Python 中，使用 `stdout.flush()`。  \n- 对于其它语言，可自行查阅文档。", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le T\\le 100$，$m$ 为非负整数，$\\textcolor{red}{0}\\le m\\le 10^{17}$。\n\n#### 评分方式\n\n记单个测试点中，你的询问次数的最大值为 $Q$。则得分 $\\mathrm{score}$ 如下所示：\n\n$$\n\\begin{aligned}\n\\mathrm{score}=\\begin{cases}\n0, & Q\\in [81,+\\infty) \\\\\n10, & Q\\in [11,81) \\\\\n25, & Q\\in [3,11) \\\\\n50, & Q\\in [0,3) \\\\\n\\end{cases}\n\\end{aligned}\n$$\n\n本题得分为所有测试点得分的最小值。\n\n本题数据点的范围是非严格单调递增的。", "locale": "zh-CN"}}}
{"pid": "P11145", "type": "P", "difficulty": 3, "samples": [["1\n\n0\n\n1", "\n? 5\n\n? 1\n\n! 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "交互题", "Special Judge", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「SFMOI Round I」Strange Homura Game", "background": "> 伝えたいコトバは たったひとつ / 想要传达的言语 唯有一个 \\\n> キミがいたから 強くなれた / 因有你在 我变坚强了 \\\n> 2 人ならどんな空も飛べるね / 只要两人一起就能任意飞翔 \\\n> キミをいつでも 信じてるから / 因为一直都 坚信着你 \\\n> ずっとずっと夢を見ていよう / 能同做此梦不复醒吧", "description": "\n**本题和 B1 是不同的问题，请分别仔细阅读两题题面。**\n\n**这是一道交互题。**\n\n\n**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\n焰和圆在玩游戏。\n\n焰在心中想了一个正整数 $m$，让圆猜出 $m$ 的值。当然，焰不会为难圆，所以 $\\textcolor{red}{2}\\le m\\le 10^{17}$。焰不会作弊，也就是说，**焰不会悄悄更换想好的数字。**\n\n圆可以问焰：对于**非负**整数 $x$，$x\\bmod m$ 的值是多少。圆需要用最少的询问次数来猜出 $m$ 的值。（为了得到全部分数，最多只能使用 $2$ 次询问。）\n\n焰一共和圆玩了 $T$ 次游戏。圆的数学很好，在 $\\varepsilon $ 秒内就秒了这题，但是她在军训，于是她找来了你，来帮她猜出这 $T$ 次游戏的答案。\n\n\n\n**形式化地**：有一个隐藏的正整数 $m\\in [\\textcolor{red}{2},10^{17}]$。每次询问给定**非负**整数 $x$，回答 $x\\bmod m$。用最少的询问次数找出 $m$。共有 $T$ 组测试数据。$m$ 的数值在事先确定，不会根据询问变化，也就是说，**交互库是非适应性的**。\n\n【实现细节】\n\n对于每个测试点，输入一行一个正整数 $T$，表示游戏次数。\n\n对于每组测试数据，你可以用以下的格式发起一次询问：\n\n- $\\texttt{? }x$：询问 $x\\bmod m$ 的值。你需要保证 $x$ 是**非负**整数，且 $x \\in \\textcolor{red}{ [0,10^{18}]}$。\n\t\n    从标准输入流读入一个整数表示答案。特别地，若整数是 $\\texttt{-1}$，你的程序已经被判定为 $\\texttt{Wrong Answer}$，此时你需要立刻终止程序。\n\n你可以用以下的格式回答答案：\n\n- $\\texttt{! }m$：回答 $m$ 的值。\n\n在发起询问后，需要刷新缓冲区，否则可能导致 TLE。\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。 特别地，利用 `std::endl` 来换行也会刷新缓冲区。\n- 在 Pascal 中，使用 `flush(output)`。  \n- 在 Python 中，使用 `stdout.flush()`。  \n- 对于其它语言，可自行查阅文档。\n", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le T\\le 100$，$m$ 为正整数，$\\textcolor{red}{2}\\le m\\le 10^{17}$。\n\n#### 评分方式\n\n记单个测试点中，你的询问次数的最大值为 $Q$。则得分 $\\mathrm{score}$ 如下所示：\n\n$$\n\\begin{aligned}\n\\mathrm{score}=\\begin{cases}\n0, & Q\\in [101,+\\infty) \\\\\n30, & Q\\in [3,101) \\\\\n50, & Q\\in [0,3) \\\\\n\\end{cases}\n\\end{aligned}\n$$\n\n本题得分为所有测试点得分的最小值。", "locale": "zh-CN", "translations": {"en": {"title": "Strange Homura Game", "background": "", "description": "\n**This problem is differ from B1. You had better read both statements.**\n\n**This is an interactive problem.**\n\n**Hint:** We provide a formalized description of this problem at the end of the statement.\n\nHomura and Madoka are playing a game.\n\nHomura has thought of a positive integer $m$, and Madoka need to determine its value.. It is guaranteed that $\\textcolor{red}{2}\\le m\\le 10^{17}$. Also, Homura doesn't cheat, that is, **Madoka wouldn't change the value of $m$** during the whole game.\n\nMadoka can ask Homura: for a **non-negative** integer $x$, what is the value of $x\\bmod m$. Madoka aimed to determine the value of $m$ with the number of queries as small as possible. (In order to get full points, you need to solve this problem within $2$ queries.)\n\nThe game will be played for $T$ rounds. However, Madoka is at the military training, so she turned to you.\n\n**Formally,** there exists a hidden positive integer $m\\in [\\textcolor{red}{2},10^{17}]$. In each query, a **non-negative** integer $x$ is given, and it returns $x \\bmod m$. \n\nFind $m$ with the least number of queries. There are $T$ test cases.\n\nThe value of $m$ is read from input file and won't change according to queries. That is, **the interactor is non-adaptive.**\n\n### Implementation Details\n\nInput a positive integer $T$ first, which stands for the number of the rounds.\n\nFor each test case:\n\n- Output a single line containing $\\texttt{? }x$ to make a query. Then, an integer indicating $x\\bmod m$ is available. \n\n\t$x$ is a **positive** integer should be guaranteed, and $x$ must fall in $ \\textcolor{red} {[0,10^{18}]}$.\n    \n    If $x=-1$ instead of the answer, it means that the query limit is excceeded, or the query is invalid. The solution should quit immediately.\n    \n- Output a single line containing $\\texttt{! }m$ to respond to the guess. \n\nAfter outputting the queries, do not forget to output a newline character and flush the output buffer. Otherwise, you will receive the verdict TLE. To flush the buffer, use: \n\n- `fflush(stdout)` or `cout.flush()` in C++;\n- `flush(output)` in Pascal;\n- `stdout.flush()` in Python;\n- refer to the documentation for other languages.", "inputFormat": "See [Implementation Details].", "outputFormat": "See [Implementation Details].", "hint": "\n#### Constraints\n\nIt is guaranteed that \n- $1\\le T\\le 100$;\n- $m$ is a positive ineteger, and $\\textcolor{red}{2}\\le m\\le 10^{17}$。\n\n#### Scoring\n\nLet $Q$ be the maximum queries used in each test. The $\\mathrm{score}$ is calculated as following:\n\n$$\n\\begin{aligned}\n\\mathrm{score}=\\begin{cases}\n0, & Q\\in [101,+\\infty) \\\\\n30, & Q\\in [3,101) \\\\\n50, & Q\\in [0,3) \\\\\n\\end{cases}\n\\end{aligned}\n$$\n\nThe score of the task is the minimum score of each test.", "locale": "en"}, "zh-CN": {"title": "「SFMOI Round I」Strange Homura Game", "background": "> 伝えたいコトバは たったひとつ / 想要传达的言语 唯有一个 \\\n> キミがいたから 強くなれた / 因有你在 我变坚强了 \\\n> 2 人ならどんな空も飛べるね / 只要两人一起就能任意飞翔 \\\n> キミをいつでも 信じてるから / 因为一直都 坚信着你 \\\n> ずっとずっと夢を見ていよう / 能同做此梦不复醒吧", "description": "\n**本题和 B1 是不同的问题，请分别仔细阅读两题题面。**\n\n**这是一道交互题。**\n\n\n**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\n焰和圆在玩游戏。\n\n焰在心中想了一个正整数 $m$，让圆猜出 $m$ 的值。当然，焰不会为难圆，所以 $\\textcolor{red}{2}\\le m\\le 10^{17}$。焰不会作弊，也就是说，**焰不会悄悄更换想好的数字。**\n\n圆可以问焰：对于**非负**整数 $x$，$x\\bmod m$ 的值是多少。圆需要用最少的询问次数来猜出 $m$ 的值。（为了得到全部分数，最多只能使用 $2$ 次询问。）\n\n焰一共和圆玩了 $T$ 次游戏。圆的数学很好，在 $\\varepsilon $ 秒内就秒了这题，但是她在军训，于是她找来了你，来帮她猜出这 $T$ 次游戏的答案。\n\n\n\n**形式化地**：有一个隐藏的正整数 $m\\in [\\textcolor{red}{2},10^{17}]$。每次询问给定**非负**整数 $x$，回答 $x\\bmod m$。用最少的询问次数找出 $m$。共有 $T$ 组测试数据。$m$ 的数值在事先确定，不会根据询问变化，也就是说，**交互库是非适应性的**。\n\n【实现细节】\n\n对于每个测试点，输入一行一个正整数 $T$，表示游戏次数。\n\n对于每组测试数据，你可以用以下的格式发起一次询问：\n\n- $\\texttt{? }x$：询问 $x\\bmod m$ 的值。你需要保证 $x$ 是**非负**整数，且 $x \\in \\textcolor{red}{ [0,10^{18}]}$。\n\t\n    从标准输入流读入一个整数表示答案。特别地，若整数是 $\\texttt{-1}$，你的程序已经被判定为 $\\texttt{Wrong Answer}$，此时你需要立刻终止程序。\n\n你可以用以下的格式回答答案：\n\n- $\\texttt{! }m$：回答 $m$ 的值。\n\n在发起询问后，需要刷新缓冲区，否则可能导致 TLE。\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。 特别地，利用 `std::endl` 来换行也会刷新缓冲区。\n- 在 Pascal 中，使用 `flush(output)`。  \n- 在 Python 中，使用 `stdout.flush()`。  \n- 对于其它语言，可自行查阅文档。\n", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le T\\le 100$，$m$ 为正整数，$\\textcolor{red}{2}\\le m\\le 10^{17}$。\n\n#### 评分方式\n\n记单个测试点中，你的询问次数的最大值为 $Q$。则得分 $\\mathrm{score}$ 如下所示：\n\n$$\n\\begin{aligned}\n\\mathrm{score}=\\begin{cases}\n0, & Q\\in [101,+\\infty) \\\\\n30, & Q\\in [3,101) \\\\\n50, & Q\\in [0,3) \\\\\n\\end{cases}\n\\end{aligned}\n$$\n\n本题得分为所有测试点得分的最小值。", "locale": "zh-CN"}}}
{"pid": "P11146", "type": "P", "difficulty": 5, "samples": [["10 5\n0101011001\n0101001110\n5 10\n2 6\n1 10\n6 6\n3 4", "0101011110"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "并查集", "洛谷原创", "O2优化", "图论建模", "线性基", "随机化", "洛谷月赛"], "title": "「SFMOI Round I」Strange Train Game", "background": "SFM 团队又断网了，于是玩起了 Mini Metro，结果发现游戏更新了，列车要自己组装，于是有了这题。\n\n", "description": "**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nSFM 号列车由 $n$ 节车厢组成，编号为 $1\\sim n$。每节车厢有一个舒适度 $a_i\\in \\{0,1\\}$，$0$ 代表不舒适，$1$ 代表舒适。管理组想要让舒适的车厢的编号尽量小，也就是说，让 $a$ 的字典序最大。\n\n为此，管理组运来了一辆 $n$ 节车厢的备用车，舒适度表示为 $b_i\\in \\{0,1\\}$。共有 $m$ 个可进行的操作，第 $i$ 个操作的操作参数为 $l_i,r_i$，表示 $\\forall l_i\\le k\\le r_i$，交换 $a_k,b_k$。\n\n可以**从小到大依次**决定是否执行每个操作，但是一共有 $2^m$ 种方案，于是，管理组找来了你，帮忙选出一种最优的方案，最大化 $a$ 的字典序。只需要输出最终得到的 $a$ 即可。\n\n**形式化地**：给定长度为 $n$ 的 $01$ 串 $a,b$，给定 $2m$ 个正整数 $l_i,r_i$。对于 $i=1,2,\\cdots,m$，**依次**执行以下操作：\n- 选择是否执行第 $i$ 次操作。\n    - 如果执行，则对于 $k=l_i,l_{i}+1,\\cdots,r_i$，交换 $a_k,b_k$。\n\n最大化 $a$ 的字典序并输出最终的结果。\n", "inputFormat": "第一行，两个正整数 $n,m$，表示字符串的长度和操作次数。\n\n第二行，一个长度为 $n$ 的 $01$ 串 $a$。\n\n第三行，一个长度为 $n$ 的 $01$ 串 $b$。\n\n接下来 $m$ 行，每行两个正整数 $l_i,r_i$，描述第 $i$ 个操作。\n", "outputFormat": "输出一行长度为 $n$ 的 $01$ 串，表示最优操作后的 $a$。\n", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$1\\le n,m\\le 20$；\n- Subtask 2（30 pts）：$l_i$ 互不相同，$a_i \\ne b_i$；\n- Subtask 3（30 pts）：$1 \\le n ,m \\le 10^3$；\n- Subtask 4（20 pts）：无限制；\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le n,m\\le 2\\times 10^5$；\n- $1\\le l_i\\le r_i\\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "Strange Train Game", "background": "", "description": "**Hint**: A brief and formalized statement is provided at the end of the description.\n\nA train called SFM consists of $n$ carriages, numbered from $1$ to $n$. Carriage indexed $i$ has **comfort** $a_i\\in \\{0,1\\}$, where $1$ stands for comfortable, and $0$ stands for uncomfortable. We want to minimize the indices of comfortable carriages, in other words, to **maximize** the lexicographical order of $a$.\n\nIn order to do that, we have another train consists also $n$ carriages, whose comfortable numbers are denoted by $b_i\\in \\{0,1\\}$. There are $m$ operations available, the $i$-th operation has two parameters $l_i,r_i$, which denotes swapping $a_k$ and $b_k$ for every $k\\in [l_i,r_i]$.\n\nYou can choose to perform or not to perform the operations **in a given order**. There are $2^m$ ways to do that, so we turned to you to choose the best one to maximize the lexicographical order of $a$. You only  need to output the final result.\n\n**Formally**: Two binary string $a,b$ are given, whose length are both $n$. Also, $2m$ integers $l_i,r_i$ is given. For $i=1,2,\\ldots,m$, by this order, excecute the precedure:\n\n- Choose to perform $i$-th operation or not.\n\t- If so, for $k=l_i,l_i+1,\\cdots,r_i$, swap $a_k$ and $b_k$.\n\nYou need to maximize the lexicographical order of $a$ and output the final result.\n", "inputFormat": "The first line contains two integers $n,m$—the number of carriages and the number of operations, respectively.\n\nThe second line contains a binary string $a$, where $a_i$ is the comfort of the train SFM.\n\nThe second line contains a binary string $b$, where $b_i$ is the comfort of another train.\n\nThe following $m$ lines, the $i$-th line contains two integers $l_i,r_i$, to describe the $i$-th operation.\n", "outputFormat": "Output one line containing a binary string—the best result after the operations.", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1 (20 pts): $1\\le n,m\\le 20$;\n- Subtask 2 (30 pts)：$l_i$ are pairwise distinct, $a_i \\ne b_i$;\n- Subtask 3 (30 pts)：$1 \\le n ,m \\le 10^3$;\n- Subtask 4 (20 pts)：No further constraints.\n\nIt is guaranteed that \n\n- $1\\le n,m\\le 2\\times 10^5$;\n- $1\\le l_i\\le r_i\\le n$.", "locale": "en"}, "zh-CN": {"title": "「SFMOI Round I」Strange Train Game", "background": "SFM 团队又断网了，于是玩起了 Mini Metro，结果发现游戏更新了，列车要自己组装，于是有了这题。\n\n", "description": "**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nSFM 号列车由 $n$ 节车厢组成，编号为 $1\\sim n$。每节车厢有一个舒适度 $a_i\\in \\{0,1\\}$，$0$ 代表不舒适，$1$ 代表舒适。管理组想要让舒适的车厢的编号尽量小，也就是说，让 $a$ 的字典序最大。\n\n为此，管理组运来了一辆 $n$ 节车厢的备用车，舒适度表示为 $b_i\\in \\{0,1\\}$。共有 $m$ 个可进行的操作，第 $i$ 个操作的操作参数为 $l_i,r_i$，表示 $\\forall l_i\\le k\\le r_i$，交换 $a_k,b_k$。\n\n可以**从小到大依次**决定是否执行每个操作，但是一共有 $2^m$ 种方案，于是，管理组找来了你，帮忙选出一种最优的方案，最大化 $a$ 的字典序。只需要输出最终得到的 $a$ 即可。\n\n**形式化地**：给定长度为 $n$ 的 $01$ 串 $a,b$，给定 $2m$ 个正整数 $l_i,r_i$。对于 $i=1,2,\\cdots,m$，**依次**执行以下操作：\n- 选择是否执行第 $i$ 次操作。\n    - 如果执行，则对于 $k=l_i,l_{i}+1,\\cdots,r_i$，交换 $a_k,b_k$。\n\n最大化 $a$ 的字典序并输出最终的结果。\n", "inputFormat": "第一行，两个正整数 $n,m$，表示字符串的长度和操作次数。\n\n第二行，一个长度为 $n$ 的 $01$ 串 $a$。\n\n第三行，一个长度为 $n$ 的 $01$ 串 $b$。\n\n接下来 $m$ 行，每行两个正整数 $l_i,r_i$，描述第 $i$ 个操作。\n", "outputFormat": "输出一行长度为 $n$ 的 $01$ 串，表示最优操作后的 $a$。\n", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$1\\le n,m\\le 20$；\n- Subtask 2（30 pts）：$l_i$ 互不相同，$a_i \\ne b_i$；\n- Subtask 3（30 pts）：$1 \\le n ,m \\le 10^3$；\n- Subtask 4（20 pts）：无限制；\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le n,m\\le 2\\times 10^5$；\n- $1\\le l_i\\le r_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P11147", "type": "P", "difficulty": 6, "samples": [["2\n1 3\n1 2\n1 2 1\n2 2\n3 2\n1000000000 1000000000\n1 0\n114514 1919 810", "3\nDino!"], ["1\n8 16\n8 3\n5 18 13\n4 20 10\n6 13 1\n2 17 11\n1 11 6\n5 1 1\n2 6 3\n1 16 1\n7 20\n7 13\n3 2", "6"], ["1\n5 5\n1 2\n5 5 1\n6 1\n16 3", "16"], ["1\n5 5\n1 4\n19 10 8\n4 1\n15 1\n22 2\n20 1", "22"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "动态规划 DP", "贪心", "二分", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「SFMOI Round I」Strange Dino Game", "background": "[English statement](https://www.luogu.com.cn/problem/T517979). **You must submit your code at the Chinese version of the statement.**\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/59joca92.png?x-oss-process=image/resize,m_lfit,h_600)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iyhol5l6.png?x-oss-process=image/resize,m_lfit,h_600)\n\nWatersphere 同学在家没网了，只好玩起了 dino 游戏，但是他很菜，一玩到后面就头晕眼花，所以想让你编个程序帮助他拿到更高分，于是有了这题。\n\n本题的游戏背景是 [Dino](https://dinosaur.game)。可以考虑点击链接游玩，以便更好理解题意。", "description": "\n我们将问题放在二维平面上描述。我们给出一些游戏要素：\n\n- 玩家：Dino。可以将其视为一个点。\n- 障碍物：\n    - 仙人掌：形如 $(x_i',0),(x_i',h_i)$ 的线段。\n    - 飞鸟：形如 $(x_i,d_i),(x_i,u_i)$ 的线段。\n- 游戏结束：Dino 与障碍物上的任意一点（包括线段端点）重合时，游戏结束。\n- 起点：原点 $(0,0)$。\n- 终点：使游戏结束的位置，位于第一象限（或 $x$ 轴上）。可能不存在（即游戏能无限进行）。\n- 游戏分数：终点的 $x$ 坐标。终点不存在时定义为无穷大。\n- 跳跃参数：正整数 $d,h$。\n- 步行：Dino 在 $x$ 轴上沿着 $x$ 轴正方向移动。\n- 跳跃：当 Dino 在 $x$ 轴上时，可以进行一次跳跃。以起跳点为原点，跳跃轨迹为\n    $$f(x) = \\begin{cases}\n    \\displaystyle  \\frac{h}{d}x & x\\in [0, d)  \\\\\n    \\displaystyle-\\frac{h}{d}x+2h  & x\\in [d, 2d)  \\\\\n    \\end{cases}$$\n    - 需要注意的是，由上述定义可以推出：**在一次跳跃后落地的瞬间进行第二次跳跃是合法的。**\n    - 需要注意的是，可以在任意**实数点**（只要在 $x$ 轴上）处开始跳跃。也就是说，跳跃不一定在整点开始。\n    \n下图展示了 $d=2,h=6$ 时的一次跳跃。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1gxrno9x.png?x-oss-process=image/resize,m_lfit,h_400)\n\n在一局游戏中，Dino 从起点出发向 $x$ 轴正方向移动。目标是最大化得分，即尽量避开障碍物，使自己移动的距离尽量长。\n\n每一时刻，Dino 只能做一件事：步行，或跳跃。当且仅当 Dino 在 $x$ 轴上时可以进行跳跃。\n\n形式化地说，Dino 的行为可以被描述为一个长度为 $(k+1)$ 的实数二元组序列 $[(x_0,t_0),(x_1,t_1),\\cdots,(x_k,t_k)]$，满足：\n\n- $x_0=0$；\n- $t_i\\in \\{0,1\\}$；\n- $\\forall 0\\le i\\lt k$, $x_i\\lt x_{i+1}$；\n- $t_i=1,i\\lt k\\implies x_{i+1}-x_i\\ge 2d$；(二段跳是不允许的)\n- $\\forall 0\\le i\\lt k$, $t_i=t_{i+1}\\implies t_i=t_{i+1}=1$。\n\n当 $t_i=0$ 时，我们定义 Dino 在 $x_i$ **进入步行状态**，否则定义 Dino 在 $x_i$ **进入跳跃状态**。\n\n当 Dino 与障碍物重合时，游戏结束。此时 Dino 在的位置为终点，得分为终点的 $x$ 坐标。\n\n已知有 $b$ 只飞鸟和 $c$ 个仙人掌，求出 Dino 的最大得分。特别地，得分可以为无穷大。\n\n可参阅样例解释的图片。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，代表游戏次数。\n\n接下来依次描述 $T$ 组数据：\n\n- 每组数据第一行，两个正整数 $d,h$，表示 dino 的跳跃参数。\n- 每组数据第二行，两个整数 $b,c$，表示飞鸟个数与仙人掌个数。\n- 接下来 $b$ 行，每行三个正整数 $x_{i},u_i,d_i$，描述第 $i$ 只飞鸟。\n- 接下来 $c$ 行，每行两个正整数 $x'_{i},h_{i}$，描述第 $i$ 株仙人掌。\n", "outputFormat": "对于每组数据输出一行，表示得分的最大值。\n\n特别地，如果得分为正无穷，输出 `Dino!`。\n", "hint": "\n样例 $1$ 解释：  \n\n- 对于第 $1$ 组数据，dino 无论如何也无法跳过连续的两株高为 $2$ 的仙人掌，答案即为第二株仙人掌的 $x$ 轴坐标。\n- 对于第 $2$ 组数据，dino 可以在原点直接起跳跳过唯一的一只鸟，也完全可以不起跳从飞鸟下方走过。\n\n其中第一组数据的解释如下所示，红线代表飞鸟，绿线代表仙人掌，粉线代表 Dino 的轨迹。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ge17so5a.png?x-oss-process=image/resize,m_lfit,h_400)\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$c=0$；\n- Subtask 2（5 pts）：$b,c \\le 10$；\n- Subtask 3（20 pts）：$b=0$；\n- Subtask 4（20 pts）：$1 \\le d,h,x_{b_i},d_i,u_i,x_i',h_i \\le 10^5$;\n- Subtask 5（40 pts）：无特殊限制。\n- Subtask 6（10 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证：\n- $1 \\le T \\le 10$；\n- $0 \\le b,c \\le 2\\times 10^4$；\n- $1 \\le d,h,x_{b_i},d_i,u_i,x_i',h_i\\le 10^9$；\n- $d_i\\le u_i$。", "locale": "zh-CN", "translations": {"en": {"title": "Strange Dino Game", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/59joca92.png?x-oss-process=image/resize,m_lfit,h_600)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iyhol5l6.png?x-oss-process=image/resize,m_lfit,h_600)\n\nWatersphere is at home, with Internet disconnected. He has nothing to do, but playing the game Dino. \n\nHowever, he is poor at Dino, getting dizzy after playing for a while. So, he let you help him to get a better score.\n\nThis problem is based on the game [Dino](https://dinosaur.game). You may click the link to have a try, to have a better understanding.", "description": "\nWe describe this problem on a 2D plane. First, we list out some elements of the game.\n\n- Player: Dino. We treat Dino as a point.\n- Obstacle:\n    - Cactus: A segment, whose endpoints are $(x_i',0)$ and $(x_i',h_i)$.\n    - Bird: A segment, whose endpoints are $(x_i,d_i)$ and $(x_i,u_i)$.\n- Game Over: The game ends, once the position of Dino coincides with any obstacle, including the both ends of the segments. \n- Starting point: $(0,0)$ (origin).\n- Endpoint: The position of Dino when the game ends. It is possible that the game has no endpoint, i.e. Dino can go forever.\n- Score: The $x$-coordination of the endpoint. When there is no endpoint, the score is defined to be infinity.\n- Jumping arguments: Positive integers $d,h$.\n- Walking: Dino moves towards the positive direction of the $x$-axis **when Dino is on the $x$-axis**.\n- Jumping: **When Dino is on the $x$-axis**, Dino can perform a jump. Take the point where Dino starts jumping as origin, the trajectory of jumping can be described as the following function:\n    $$f(x) = \\begin{cases}\n    \\displaystyle  \\frac{h}{d}x & x\\in [0, d)  \\\\\n    \\displaystyle-\\frac{h}{d}x+2h  & x\\in [d, 2d)  \\\\\n    \\end{cases}$$\n    - Note that, we can infer that, **it is possible to make the second jump immediately right after the first jump ends.**\n    - Note that, it is possible to make a jump at an **arbitrary point with a real coordination** (as long as it is on the $x$-axis), not necessarily at an integer point.\n    \nThe figure below shows a jump where $d=2,h=6$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1gxrno9x.png?x-oss-process=image/resize,m_lfit,h_400)\n\n\n\nIn a round of game, starting from the origin, Dino moves towards the positive direction of $x$-axis. The goal is to maximize the score, that is, to bypass the obstacles, making himself move as far as possible.\n\nAt every instant, Dino can only do one thing: Walk, or jump. Dino can make a jump if and only if he is on the $x$-axis.\n\nFormally, the behavior of Dino can be described as a sequence of length $(k+1)$ consisting of tuples of real numbers $[(x_0,t_0),(x_1,t_1),\\cdots,(x_k,t_k)]$, where the following conditions holds:\n\n- $x_0=0$;\n- $t_i\\in \\{0,1\\}$;\n- $\\forall 0\\le i\\lt k$, $x_i\\lt x_{i+1}$;\n- $t_i=1,i\\lt k\\implies x_{i+1}-x_i\\ge 2d$; (You cannot make the second jump before the first jump ends)\n- $\\forall 0\\le i\\lt k$, $t_i=t_{i+1}\\implies t_i=t_{i+1}=1$.\n\nWhen $t_i=0$, we say Dino **starts walking** at $x_i$; Otherwise, when $t_i=1$, we say Dino **starts jumping** at $x_i$. \n\nThe game ends when the position of Dino coinsides with any obstacle. Let's say the position of Dino, at this moment, is the endpoint; and the score is the $x$-coordination of the endpoint.\n\nThere are $b$ birds and $c$ cacti. You are to calculate the maximum possible score that Dino can obtain. Specially, the score can be infinity.\n\nFor better understanding, see the figure in the sample description.", "inputFormat": "The first line, an integer $T$ — the number of rounds.\n\nFor each round:\n- The first line contains two positive integers $d,h$ — jumping arguments.\n- The second line contains two integers $b,c$ — the number of birds and the number of cactus, respectively.\n- The following $b$ lines contains three integers $x_i,u_i,d_i$ — the birds.\n- The following $c$ lines contains three integers $x_i',h_i$ — the cacti.\n", "outputFormat": "Output a line for each round, indicating the maximum possible score.\n\nSpecially, when the score is infinity, output a line containing `Dino!`.", "hint": "Explanation of sample $1$:\n- For the first round, Dino can't bypass the second cactus, thus the answer is the $x$ coordination of the second cactus.\n- For the second round, for example, Dino can bypass the only obstacle by starting jumping at origin. \n\nA possible move of the first round is shown below, in which red segments denote the birds, green segments denote the cacti and pink segments denote Dino.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ge17so5a.png?x-oss-process=image/resize,m_lfit,h_400)\n\n### Contraints\n\n\n- Subtask 1 (5 pts): $c=0$;\n- Subtask 2 (5 pts): $b,c \\le 10$;\n- Subtask 3 (20 pts): $b=0$;\n- Subtask 4 (20 pts): $1 \\le d,h,x_{b_i},d_i,u_i,x_i',h_i \\le 10^5$;\n- Subtask 5 (40 pts): No further contraints.\n- Subtask 6 (10 pts): No further contraints.\n\nIt is guaranteed that \n\n- $1 \\le T \\le 10$;\n- $0 \\le b,c \\le 2\\times 10^4$;\n- $1 \\le d,h,x_{b_i},d_i,u_i,x_i',h_i\\le 10^9$;\n- $d_i\\le u_i$.", "locale": "en"}, "zh-CN": {"title": "「SFMOI Round I」Strange Dino Game", "background": "[English statement](https://www.luogu.com.cn/problem/T517979). **You must submit your code at the Chinese version of the statement.**\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/59joca92.png?x-oss-process=image/resize,m_lfit,h_600)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iyhol5l6.png?x-oss-process=image/resize,m_lfit,h_600)\n\nWatersphere 同学在家没网了，只好玩起了 dino 游戏，但是他很菜，一玩到后面就头晕眼花，所以想让你编个程序帮助他拿到更高分，于是有了这题。\n\n本题的游戏背景是 [Dino](https://dinosaur.game)。可以考虑点击链接游玩，以便更好理解题意。", "description": "\n我们将问题放在二维平面上描述。我们给出一些游戏要素：\n\n- 玩家：Dino。可以将其视为一个点。\n- 障碍物：\n    - 仙人掌：形如 $(x_i',0),(x_i',h_i)$ 的线段。\n    - 飞鸟：形如 $(x_i,d_i),(x_i,u_i)$ 的线段。\n- 游戏结束：Dino 与障碍物上的任意一点（包括线段端点）重合时，游戏结束。\n- 起点：原点 $(0,0)$。\n- 终点：使游戏结束的位置，位于第一象限（或 $x$ 轴上）。可能不存在（即游戏能无限进行）。\n- 游戏分数：终点的 $x$ 坐标。终点不存在时定义为无穷大。\n- 跳跃参数：正整数 $d,h$。\n- 步行：Dino 在 $x$ 轴上沿着 $x$ 轴正方向移动。\n- 跳跃：当 Dino 在 $x$ 轴上时，可以进行一次跳跃。以起跳点为原点，跳跃轨迹为\n    $$f(x) = \\begin{cases}\n    \\displaystyle  \\frac{h}{d}x & x\\in [0, d)  \\\\\n    \\displaystyle-\\frac{h}{d}x+2h  & x\\in [d, 2d)  \\\\\n    \\end{cases}$$\n    - 需要注意的是，由上述定义可以推出：**在一次跳跃后落地的瞬间进行第二次跳跃是合法的。**\n    - 需要注意的是，可以在任意**实数点**（只要在 $x$ 轴上）处开始跳跃。也就是说，跳跃不一定在整点开始。\n    \n下图展示了 $d=2,h=6$ 时的一次跳跃。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1gxrno9x.png?x-oss-process=image/resize,m_lfit,h_400)\n\n在一局游戏中，Dino 从起点出发向 $x$ 轴正方向移动。目标是最大化得分，即尽量避开障碍物，使自己移动的距离尽量长。\n\n每一时刻，Dino 只能做一件事：步行，或跳跃。当且仅当 Dino 在 $x$ 轴上时可以进行跳跃。\n\n形式化地说，Dino 的行为可以被描述为一个长度为 $(k+1)$ 的实数二元组序列 $[(x_0,t_0),(x_1,t_1),\\cdots,(x_k,t_k)]$，满足：\n\n- $x_0=0$；\n- $t_i\\in \\{0,1\\}$；\n- $\\forall 0\\le i\\lt k$, $x_i\\lt x_{i+1}$；\n- $t_i=1,i\\lt k\\implies x_{i+1}-x_i\\ge 2d$；(二段跳是不允许的)\n- $\\forall 0\\le i\\lt k$, $t_i=t_{i+1}\\implies t_i=t_{i+1}=1$。\n\n当 $t_i=0$ 时，我们定义 Dino 在 $x_i$ **进入步行状态**，否则定义 Dino 在 $x_i$ **进入跳跃状态**。\n\n当 Dino 与障碍物重合时，游戏结束。此时 Dino 在的位置为终点，得分为终点的 $x$ 坐标。\n\n已知有 $b$ 只飞鸟和 $c$ 个仙人掌，求出 Dino 的最大得分。特别地，得分可以为无穷大。\n\n可参阅样例解释的图片。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，代表游戏次数。\n\n接下来依次描述 $T$ 组数据：\n\n- 每组数据第一行，两个正整数 $d,h$，表示 dino 的跳跃参数。\n- 每组数据第二行，两个整数 $b,c$，表示飞鸟个数与仙人掌个数。\n- 接下来 $b$ 行，每行三个正整数 $x_{i},u_i,d_i$，描述第 $i$ 只飞鸟。\n- 接下来 $c$ 行，每行两个正整数 $x'_{i},h_{i}$，描述第 $i$ 株仙人掌。\n", "outputFormat": "对于每组数据输出一行，表示得分的最大值。\n\n特别地，如果得分为正无穷，输出 `Dino!`。\n", "hint": "\n样例 $1$ 解释：  \n\n- 对于第 $1$ 组数据，dino 无论如何也无法跳过连续的两株高为 $2$ 的仙人掌，答案即为第二株仙人掌的 $x$ 轴坐标。\n- 对于第 $2$ 组数据，dino 可以在原点直接起跳跳过唯一的一只鸟，也完全可以不起跳从飞鸟下方走过。\n\n其中第一组数据的解释如下所示，红线代表飞鸟，绿线代表仙人掌，粉线代表 Dino 的轨迹。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ge17so5a.png?x-oss-process=image/resize,m_lfit,h_400)\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$c=0$；\n- Subtask 2（5 pts）：$b,c \\le 10$；\n- Subtask 3（20 pts）：$b=0$；\n- Subtask 4（20 pts）：$1 \\le d,h,x_{b_i},d_i,u_i,x_i',h_i \\le 10^5$;\n- Subtask 5（40 pts）：无特殊限制。\n- Subtask 6（10 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证：\n- $1 \\le T \\le 10$；\n- $0 \\le b,c \\le 2\\times 10^4$；\n- $1 \\le d,h,x_{b_i},d_i,u_i,x_i',h_i\\le 10^9$；\n- $d_i\\le u_i$。", "locale": "zh-CN"}}}
{"pid": "P11148", "type": "P", "difficulty": 3, "samples": [["4\n1\n100\n1\n-2\n1\n-100\n2\n20 -10\n3\n1 -1 1\n2\n-1 1\n5\n2 3 3 -3 -3\n5\n6 6 6 -6 -6", "0\n20\n3\n26"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "THUWC"], "title": "[THUWC 2018] 零食", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D1T1。$\\texttt{1s,1G}$。", "description": "\nYazid 是一名清华大学的学生，他非常喜欢吃零食。 \n\nYazid 共有 $n$ 包**薯片**，（由于它们的口味各不相同）Yazid 把他们从 $1$ 至 $n$ 编号；Yazid 还有 $m$ 包**果干**，Yazid 也把他们从 $1$ 至 $m$ 编号。 \n\n为了不引起歧义，我们规定：两包零食**类型**相同当且仅当它们同为薯片或果干。 \n\nYazid 打算按一定顺序吃掉所有的零食。在开始吃一包零食后，直到这包零食被吃完前， Yazid 都不会吃其他零食。也就是说， Yazid 的吃零食顺序可以用一个**待吃零食的排列**来表示。 \n\n连续吃同一种食物可能会有别样的体验，所以，每包零食都有一个**妙值**。编号为 $i$（$1\\leq i\\leq n$）的薯片的妙值为 $a_i$，编号为 $i$（$1\\leq i\\leq m$）的果干的妙值为 $b_i$。 \n\n我们保证所有零食的妙值是整数，但需要注意的是，它们有可能为负。 \n\n在吃每包零食时，如果 Yazid 在其之前吃的零食与其类型相同，则 Yazid 会增加当前零食妙值的**快乐度**（吃第一包零食时不会获得快乐度）。初始时， Yazid 的快乐度为 $0$。 \n\nYazid 希望获得最大的快乐度（需要提醒你的是，这个值可能是负的）。 \n\n饥肠辘辘的 Yazid 还要吃遍清华大学 $19$ 座食堂，所以请你帮他计算他能获得的最大快乐度。 \n", "inputFormat": "从标准输入读入数据。 \n\n**本题包含多组数据**。输入的第一行为一个非负整数 $T$ ，表示数据组数。接下来依次描述每组数据，对于每组数据： \n\n第一行 $1$ 个正整数 $n$ ，表示薯片的数量。 \n\n第二行 $n$ 个用空格隔开的整数 $a_1,\\dots,a_n$，表示所有薯片的妙值。 \n\n第三行 $1$ 个正整数 $m$ ，表示果干的数量。 \n\n第四行 $m$ 个用空格隔开的整数 $b_1,\\dots,b_m$，表示所有果干的妙值。 ", "outputFormat": "输出到标准输出。 \n\n对于每组数据，输出一行一个整数，表示 Yazid 能获得的最大快乐度。 ", "hint": "\n\n#### 解释 \n\n为了方便起见，我们约定用 $A_i$ 表示编号为 $i$ 的薯片，用 $B_i$ 表示编号为 $i$ 的果干。 \n\n对于第 $1$ 组数据：无论以何种顺序吃这些零食， Yazid 都不会获得任何快乐度，因此答案为 $0$ 。 \n\n对于第 $2$ 组数据：最优方案可以是 $B_2\\rightarrow B_1\\rightarrow A_1$ ，可以在吃 $B_1$ 时获得  $20$ 的快乐度。可以证明不存在更优的解。 \n\n对于第 $3$ 组数据：按 $B_1\\rightarrow B_2\\rightarrow A_2\\rightarrow A_3\\rightarrow A_1$ 的顺序吃零食即可获得 $3$ 的快乐度。可以证明不存在更优的解。 \n\n#### 子任务\n\n \n\t\n\n \n| 测试点编号 | $\\sum(n+m)\\le $ | $n,m\\le $ | $\\vert a_i\\vert ,\\vert b_i\\vert \\le $ | 其他约束 | 分值 |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| $1$ | $300$ | $4$ | $1,000$ | 无 | $7$ |\n| $2$ | $2\\times 10^6$ | $10^5$ | $1$ | 无 | $8$ |\n| $3$ | $2\\times 10^6$ | $10^5$ | $2$ | 无 | $11$ |\n| $4$ | $2\\times 10^6$ | $10^5$ | $10^9$ | 所有 $a_i,b_i$ 均为负数 | $9$ |\n| $5$ | $10^4$ | $10^3$ | $10^9$ | 无 | $23$ |\n| $6$ | $2\\times 10^6$ | $10^5$ | $10^9$ | 无 | $42$ |\n\n\n其中， $\\sum (n+m)$ 表示该测试点中所有数据的 $n,m$ 之和。例如，样例1中的 $\\sum (n+m)$ 即为 $1+1+1+2+3+2+5+5=20$ 。 \n\n对于所有测试点，保证 $T\\leq 5,000$ ， $\\sum (n+m)\\leq 2\\times {10}^{6}$。 \n\n对于每个测试点的所有数据，保证 $n,m\\leq 100,000$ ，$1\\leq \\left|a_i \\right|,\\left|b_i \\right|\\leq 10^9$。 \n\n对于所有测试点，保证：所有数据中 $n,m$ 的最大值、所有数据中 $\\left| a_i\\right|,\\left| b_i\\right|$ 的最大值分别不会小于该测试点 $n,m$ 、 $\\left|a_i \\right|,\\left|b_i \\right|$ 上界的 $\\frac{2}{3}$ ； $\\sum (n+m)$ 也不会小于对应上界的**一半**。 \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2018] 零食", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D1T1。$\\texttt{1s,1G}$。", "description": "\nYazid 是一名清华大学的学生，他非常喜欢吃零食。 \n\nYazid 共有 $n$ 包**薯片**，（由于它们的口味各不相同）Yazid 把他们从 $1$ 至 $n$ 编号；Yazid 还有 $m$ 包**果干**，Yazid 也把他们从 $1$ 至 $m$ 编号。 \n\n为了不引起歧义，我们规定：两包零食**类型**相同当且仅当它们同为薯片或果干。 \n\nYazid 打算按一定顺序吃掉所有的零食。在开始吃一包零食后，直到这包零食被吃完前， Yazid 都不会吃其他零食。也就是说， Yazid 的吃零食顺序可以用一个**待吃零食的排列**来表示。 \n\n连续吃同一种食物可能会有别样的体验，所以，每包零食都有一个**妙值**。编号为 $i$（$1\\leq i\\leq n$）的薯片的妙值为 $a_i$，编号为 $i$（$1\\leq i\\leq m$）的果干的妙值为 $b_i$。 \n\n我们保证所有零食的妙值是整数，但需要注意的是，它们有可能为负。 \n\n在吃每包零食时，如果 Yazid 在其之前吃的零食与其类型相同，则 Yazid 会增加当前零食妙值的**快乐度**（吃第一包零食时不会获得快乐度）。初始时， Yazid 的快乐度为 $0$。 \n\nYazid 希望获得最大的快乐度（需要提醒你的是，这个值可能是负的）。 \n\n饥肠辘辘的 Yazid 还要吃遍清华大学 $19$ 座食堂，所以请你帮他计算他能获得的最大快乐度。 \n", "inputFormat": "从标准输入读入数据。 \n\n**本题包含多组数据**。输入的第一行为一个非负整数 $T$ ，表示数据组数。接下来依次描述每组数据，对于每组数据： \n\n第一行 $1$ 个正整数 $n$ ，表示薯片的数量。 \n\n第二行 $n$ 个用空格隔开的整数 $a_1,\\dots,a_n$，表示所有薯片的妙值。 \n\n第三行 $1$ 个正整数 $m$ ，表示果干的数量。 \n\n第四行 $m$ 个用空格隔开的整数 $b_1,\\dots,b_m$，表示所有果干的妙值。 ", "outputFormat": "输出到标准输出。 \n\n对于每组数据，输出一行一个整数，表示 Yazid 能获得的最大快乐度。 ", "hint": "\n\n#### 解释 \n\n为了方便起见，我们约定用 $A_i$ 表示编号为 $i$ 的薯片，用 $B_i$ 表示编号为 $i$ 的果干。 \n\n对于第 $1$ 组数据：无论以何种顺序吃这些零食， Yazid 都不会获得任何快乐度，因此答案为 $0$ 。 \n\n对于第 $2$ 组数据：最优方案可以是 $B_2\\rightarrow B_1\\rightarrow A_1$ ，可以在吃 $B_1$ 时获得  $20$ 的快乐度。可以证明不存在更优的解。 \n\n对于第 $3$ 组数据：按 $B_1\\rightarrow B_2\\rightarrow A_2\\rightarrow A_3\\rightarrow A_1$ 的顺序吃零食即可获得 $3$ 的快乐度。可以证明不存在更优的解。 \n\n#### 子任务\n\n \n\t\n\n \n| 测试点编号 | $\\sum(n+m)\\le $ | $n,m\\le $ | $\\vert a_i\\vert ,\\vert b_i\\vert \\le $ | 其他约束 | 分值 |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| $1$ | $300$ | $4$ | $1,000$ | 无 | $7$ |\n| $2$ | $2\\times 10^6$ | $10^5$ | $1$ | 无 | $8$ |\n| $3$ | $2\\times 10^6$ | $10^5$ | $2$ | 无 | $11$ |\n| $4$ | $2\\times 10^6$ | $10^5$ | $10^9$ | 所有 $a_i,b_i$ 均为负数 | $9$ |\n| $5$ | $10^4$ | $10^3$ | $10^9$ | 无 | $23$ |\n| $6$ | $2\\times 10^6$ | $10^5$ | $10^9$ | 无 | $42$ |\n\n\n其中， $\\sum (n+m)$ 表示该测试点中所有数据的 $n,m$ 之和。例如，样例1中的 $\\sum (n+m)$ 即为 $1+1+1+2+3+2+5+5=20$ 。 \n\n对于所有测试点，保证 $T\\leq 5,000$ ， $\\sum (n+m)\\leq 2\\times {10}^{6}$。 \n\n对于每个测试点的所有数据，保证 $n,m\\leq 100,000$ ，$1\\leq \\left|a_i \\right|,\\left|b_i \\right|\\leq 10^9$。 \n\n对于所有测试点，保证：所有数据中 $n,m$ 的最大值、所有数据中 $\\left| a_i\\right|,\\left| b_i\\right|$ 的最大值分别不会小于该测试点 $n,m$ 、 $\\left|a_i \\right|,\\left|b_i \\right|$ 上界的 $\\frac{2}{3}$ ； $\\sum (n+m)$ 也不会小于对应上界的**一半**。 \n", "locale": "zh-CN"}}}
{"pid": "P11149", "type": "P", "difficulty": 7, "samples": [["6\n5 1 1 3 2 6\n1 2\n2 3\n3 4\n3 5\n2 6", "15"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2018", "树形 DP", "线段树合并", "THUWC"], "title": "[THUWC 2018] 城市规划", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D1T2。$\\texttt{1.5s,2G}$。", "description": "access_globe 最近在玩一款城市规划的游戏。在游戏中，有 $n$ 个城市，$n-1$ 条可以双向通行的道路连接着这些城市，任意两个城市都可以通过这些道路互相到达。\n\n最近，游戏中的“世界杯”比赛开始了。每一个城市都恰好支持一支球队，设第 $i$ 个城市支持的球队为 $a_i$。游戏给 access_globe 一个新的任务：选择一些城市，在这些城市建立可以承办世界杯的足球场。\n\naccess_globe 不希望建立足球场的城市所喜欢的球队的差异太大，因此他要求建立了足球场的这些城市中，不能存在 $3$ 个城市，使得它们支持的球队互不相同。同时为了减少球员花费在路上的时间，access_globe 希望任意两个建立了足球场的城市，都可以只经过其他建立了足球场的城市互相到达。\n\naccess_globe 是一个喜欢不同的同学，因此他希望你帮他求出，有多少种不同的建立足球场的方案。两种方案被认为是不同的，当且存在一个城市，使得该城市在恰好一种方案中被建立了足球场。\n\n但你并不想帮他解决这个问题，你只想告诉他答案在 $998,244,353$ 进制下的个位（即答案除以 $998,244,353$ 的余数）。", "inputFormat": "\n从标准输入读入数据。\n\n第 $1$ 行包含一个整数 $n$，表示城市的个数。\n\n第 $2$ 行包含 $n$ 个用空格隔开的整数 $a_1,…,a_n$ ，表示每个城市支持的球队。\n\n第 $3$ 到第 $n+1$ 行，每行包含 $2$ 个用空格隔开的整数 $x_i,y_i$ ，表示一条连接城市 $x_i$ 和城市 $y_i$ 的双向道路。保证任意两个城市都可以通过这些道路互相到达。", "outputFormat": "\n输出到标准输出。\n\n输出一行一个数，表示不同的建立足球场的方案数除以 $998,244,353$ 的余数。\n", "hint": "\n\n#### 解释\n\n城市的道路情况和支持的球队情况如下图，其中颜色相同的城市支持相同的球队。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x18dbmxv.png)\n\n任何只建立一个足球场或将足球场建立在两个有道路直接相连的方案都是合法的，这样共有 $5+6=11​$ 种方案。其余方案为在城市 $2​$、$3​$ 和其它任意一个城市建立足球场，共 $4​$ 种方案，因此总共有 $15​$ 种方案。\n\n#### 子任务\n\n \n| 测试点 | 分值 | $n=$ | 特殊性质 |\n| :--: | :--: | :--: | :--: |\n| $1$ |  $3$ |  $500$  | 无 |\n| $2$ |  $7$ |  $5,000$  |  无 |\n| $3$ |  $9$ |  $2\\times 10^5$  |  A |\n| $4$ |  $13$ |  $5\\times 10^5$  |  A |\n| $5$ |  $7$ |  $2\\times 10^5$  |  B |\n| $6$ |  $11$ |  $5\\times 10^5$  |  B |\n| $7$ |  $12$ |  $5\\times 10^4$  |  无 |\n| $8$ |  $14$ |  $2\\times 10^5$  |  无 |\n| $9$ |  $12$ |  $5\\times 10^5$  |  无 |\n| $10$ |  $12$ |  $5\\times 10^5$  |  无 |\n\n特殊性质 A：每条道路连接的两个城市支持的球队不同；每个城市最多连出 $10$ 条道路。\n\n特殊性质 B：每条道路连接的两个城市支持的球队不同。\n\n对于所有数据，保证 $1\\le a_i\\le n\\le 5 \\times 10^{5}$。\n\n\n#### 提示\n\n请注意本题的**空间限制**是 2 GB，请计算好程序的内存使用，不要超出限制。超出空间限制可能导致**整道题目得 0 分**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2018] 城市规划", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D1T2。$\\texttt{1.5s,2G}$。", "description": "access_globe 最近在玩一款城市规划的游戏。在游戏中，有 $n$ 个城市，$n-1$ 条可以双向通行的道路连接着这些城市，任意两个城市都可以通过这些道路互相到达。\n\n最近，游戏中的“世界杯”比赛开始了。每一个城市都恰好支持一支球队，设第 $i$ 个城市支持的球队为 $a_i$。游戏给 access_globe 一个新的任务：选择一些城市，在这些城市建立可以承办世界杯的足球场。\n\naccess_globe 不希望建立足球场的城市所喜欢的球队的差异太大，因此他要求建立了足球场的这些城市中，不能存在 $3$ 个城市，使得它们支持的球队互不相同。同时为了减少球员花费在路上的时间，access_globe 希望任意两个建立了足球场的城市，都可以只经过其他建立了足球场的城市互相到达。\n\naccess_globe 是一个喜欢不同的同学，因此他希望你帮他求出，有多少种不同的建立足球场的方案。两种方案被认为是不同的，当且存在一个城市，使得该城市在恰好一种方案中被建立了足球场。\n\n但你并不想帮他解决这个问题，你只想告诉他答案在 $998,244,353$ 进制下的个位（即答案除以 $998,244,353$ 的余数）。", "inputFormat": "\n从标准输入读入数据。\n\n第 $1$ 行包含一个整数 $n$，表示城市的个数。\n\n第 $2$ 行包含 $n$ 个用空格隔开的整数 $a_1,…,a_n$ ，表示每个城市支持的球队。\n\n第 $3$ 到第 $n+1$ 行，每行包含 $2$ 个用空格隔开的整数 $x_i,y_i$ ，表示一条连接城市 $x_i$ 和城市 $y_i$ 的双向道路。保证任意两个城市都可以通过这些道路互相到达。", "outputFormat": "\n输出到标准输出。\n\n输出一行一个数，表示不同的建立足球场的方案数除以 $998,244,353$ 的余数。\n", "hint": "\n\n#### 解释\n\n城市的道路情况和支持的球队情况如下图，其中颜色相同的城市支持相同的球队。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x18dbmxv.png)\n\n任何只建立一个足球场或将足球场建立在两个有道路直接相连的方案都是合法的，这样共有 $5+6=11​$ 种方案。其余方案为在城市 $2​$、$3​$ 和其它任意一个城市建立足球场，共 $4​$ 种方案，因此总共有 $15​$ 种方案。\n\n#### 子任务\n\n \n| 测试点 | 分值 | $n=$ | 特殊性质 |\n| :--: | :--: | :--: | :--: |\n| $1$ |  $3$ |  $500$  | 无 |\n| $2$ |  $7$ |  $5,000$  |  无 |\n| $3$ |  $9$ |  $2\\times 10^5$  |  A |\n| $4$ |  $13$ |  $5\\times 10^5$  |  A |\n| $5$ |  $7$ |  $2\\times 10^5$  |  B |\n| $6$ |  $11$ |  $5\\times 10^5$  |  B |\n| $7$ |  $12$ |  $5\\times 10^4$  |  无 |\n| $8$ |  $14$ |  $2\\times 10^5$  |  无 |\n| $9$ |  $12$ |  $5\\times 10^5$  |  无 |\n| $10$ |  $12$ |  $5\\times 10^5$  |  无 |\n\n特殊性质 A：每条道路连接的两个城市支持的球队不同；每个城市最多连出 $10$ 条道路。\n\n特殊性质 B：每条道路连接的两个城市支持的球队不同。\n\n对于所有数据，保证 $1\\le a_i\\le n\\le 5 \\times 10^{5}$。\n\n\n#### 提示\n\n请注意本题的**空间限制**是 2 GB，请计算好程序的内存使用，不要超出限制。超出空间限制可能导致**整道题目得 0 分**。", "locale": "zh-CN"}}}
{"pid": "P11150", "type": "P", "difficulty": 7, "samples": [["6 2\n000001\n00\n01", "0\n5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "THUWC"], "title": "[THUWC 2018] 字胡串", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D1T3。$\\texttt{2s,0.5G}$。\n\n----\n\n我希望你明白，优秀的出题人是懒得写题目背景的。但是优秀的题目也可能需要让选手了解一些基本定义， 例如以下这些内容， 而熟练的算法竞赛选手几乎可以无视。\n\n对于一个字符串 $S$， 我们定义 $\\left|S\\right|$ 表示 $S$ 的长度。接着，我们定义 $S_i$ 表示 $S$ 中第 $i$ 个字符，$S_{L,R}$ 表示由 $S$ 中从左往右数，第 $L$ 个字符到第 $R$ 个字符依次连接形成的字符串。特别的，如果 $L>R$，或者 $L \\notin \\left[1,\\left|S\\right|\\right]$，或者$R \\notin \\left[1,\\left|S\\right|\\right]$，则我们可以认为 $S_{L,R}$ 为空串。 \n\n我们再定义两个字符串 $A$ 和 $B$ 的加法， $A+B$ 为将 $B$ 字符串整体连接在 $A$ 的最后一个字符后面得到的大字符串。\n\n例如，我们可以认为 `aaaa` $+$ `bbbb` $=$ `aaaabbbb`。 \n\n我们不难发现，上述定义的加法满足结合律，但不满足交换律。\n\n最后，我希望你还能明白，字典序是什么。\n\n为了让你明白字典序是什么，你还需要明白前缀是什么。我们说一个字符串 $A$ 是另一个字符串 $B$ 的前缀，当且仅当存在一个整数 $len$，使得 $A$ 与 $B_{1,len}$ 是完全相同的字符串。\n\n对于两个不同的字符串 $A$ 和 $B$，如果 $A$ 是 $B$ 的一个前缀，则我们认为在字典序下， $A < B$； 如果 $B$ 是 $A$ 的前缀，则我们认为在字典序下，$B < A$。 否则，我们总能找到一个最小的 $i$， 使得 $A_i \\neq B_i$， 如果 $A_i < B_i$， 则我们认为在字典序下，$A < B$，否则 $B > A$。", "description": "\n现在给出一个长度为 $n$ 的字符串 $A$。 在此基础上，我会进行 $Q$ 次询问。 \n\n对于第 $i$（$1 \\leq i \\leq Q$）次的询问，我们会给出一个非空字符串 $B^{(i)}$， 并希望你找出一个最小的 $j$（$0 \\leq j \\leq n$）， 使得 $A_{1,j} + B^{(i)} + A_{j+1,n}$ 的字典序最小。 对于每个询问，你只需要输出你找到的这个 $j$ 即可。", "inputFormat": "\n从标准输入读入数据。\n\n第一行有两个用空格隔开的整数 $n, Q$， 分别代表字符串 $A$ 的长度，以及询问次数。\n\n第二行给出一个长度为 $n$ 的字符串，表示字符串 $A$。\n\n第三行到第 $Q+2$ 行， 每行会给出一个非空字符串， 第 $i$ 行所给出的字符串表示 $B^{(i-2)}$。\n", "outputFormat": "\n\n输出到标准输出。\n\n对于每个询问，请输出一行一个整数表示你所找到的最小的 $j$（$0 \\leq j \\leq n$）。\n", "hint": "#### 子任务\n\n \n| 测试点编号 | $n=$ | $\\sum \\left\\lvert B^{(i)}\\right\\rvert\\le$ | $Q\\le$ | 其他约定 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1\\sim 3$ | $100$ | $100$ | $100$ | 无 |\n| $4\\sim 8$ | $10^3$ | $10^3$ | $10^3$ | 无 |\n| $9\\sim 10$ | $10^6$ | $10^6$ | $5\\times 10^5$ | $\\lvert B^{(i)}\\rvert=1$ |\n| $11\\sim 14$ | $3\\times 10^5$ | $5\\times 10^5$ | $3\\times 10^5$ | 无 |\n| $15\\sim 20$ | $10^6$ | $10^6$ | $5\\times 10^5$ | 无 |\n\n对于所有测试数据，$1 \\leq n \\leq 10^6$，$1 \\leq Q \\leq 5 \\times 10^5$，$1 \\leq \\sum \\limits _{i=1}^{Q} \\left|B^{(i)}\\right| \\leq 10^6$，输入的字符串全部由**数字**组成。\n\n此外，我们保证，对于所有测试数据， $\\sum \\limits _{i=1}^{Q} \\left|B^{(i)}\\right|$ 不会小于其在该测试点对应上界的 $\\frac{1}{10}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2018] 字胡串", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D1T3。$\\texttt{2s,0.5G}$。\n\n----\n\n我希望你明白，优秀的出题人是懒得写题目背景的。但是优秀的题目也可能需要让选手了解一些基本定义， 例如以下这些内容， 而熟练的算法竞赛选手几乎可以无视。\n\n对于一个字符串 $S$， 我们定义 $\\left|S\\right|$ 表示 $S$ 的长度。接着，我们定义 $S_i$ 表示 $S$ 中第 $i$ 个字符，$S_{L,R}$ 表示由 $S$ 中从左往右数，第 $L$ 个字符到第 $R$ 个字符依次连接形成的字符串。特别的，如果 $L>R$，或者 $L \\notin \\left[1,\\left|S\\right|\\right]$，或者$R \\notin \\left[1,\\left|S\\right|\\right]$，则我们可以认为 $S_{L,R}$ 为空串。 \n\n我们再定义两个字符串 $A$ 和 $B$ 的加法， $A+B$ 为将 $B$ 字符串整体连接在 $A$ 的最后一个字符后面得到的大字符串。\n\n例如，我们可以认为 `aaaa` $+$ `bbbb` $=$ `aaaabbbb`。 \n\n我们不难发现，上述定义的加法满足结合律，但不满足交换律。\n\n最后，我希望你还能明白，字典序是什么。\n\n为了让你明白字典序是什么，你还需要明白前缀是什么。我们说一个字符串 $A$ 是另一个字符串 $B$ 的前缀，当且仅当存在一个整数 $len$，使得 $A$ 与 $B_{1,len}$ 是完全相同的字符串。\n\n对于两个不同的字符串 $A$ 和 $B$，如果 $A$ 是 $B$ 的一个前缀，则我们认为在字典序下， $A < B$； 如果 $B$ 是 $A$ 的前缀，则我们认为在字典序下，$B < A$。 否则，我们总能找到一个最小的 $i$， 使得 $A_i \\neq B_i$， 如果 $A_i < B_i$， 则我们认为在字典序下，$A < B$，否则 $B > A$。", "description": "\n现在给出一个长度为 $n$ 的字符串 $A$。 在此基础上，我会进行 $Q$ 次询问。 \n\n对于第 $i$（$1 \\leq i \\leq Q$）次的询问，我们会给出一个非空字符串 $B^{(i)}$， 并希望你找出一个最小的 $j$（$0 \\leq j \\leq n$）， 使得 $A_{1,j} + B^{(i)} + A_{j+1,n}$ 的字典序最小。 对于每个询问，你只需要输出你找到的这个 $j$ 即可。", "inputFormat": "\n从标准输入读入数据。\n\n第一行有两个用空格隔开的整数 $n, Q$， 分别代表字符串 $A$ 的长度，以及询问次数。\n\n第二行给出一个长度为 $n$ 的字符串，表示字符串 $A$。\n\n第三行到第 $Q+2$ 行， 每行会给出一个非空字符串， 第 $i$ 行所给出的字符串表示 $B^{(i-2)}$。\n", "outputFormat": "\n\n输出到标准输出。\n\n对于每个询问，请输出一行一个整数表示你所找到的最小的 $j$（$0 \\leq j \\leq n$）。\n", "hint": "#### 子任务\n\n \n| 测试点编号 | $n=$ | $\\sum \\left\\lvert B^{(i)}\\right\\rvert\\le$ | $Q\\le$ | 其他约定 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1\\sim 3$ | $100$ | $100$ | $100$ | 无 |\n| $4\\sim 8$ | $10^3$ | $10^3$ | $10^3$ | 无 |\n| $9\\sim 10$ | $10^6$ | $10^6$ | $5\\times 10^5$ | $\\lvert B^{(i)}\\rvert=1$ |\n| $11\\sim 14$ | $3\\times 10^5$ | $5\\times 10^5$ | $3\\times 10^5$ | 无 |\n| $15\\sim 20$ | $10^6$ | $10^6$ | $5\\times 10^5$ | 无 |\n\n对于所有测试数据，$1 \\leq n \\leq 10^6$，$1 \\leq Q \\leq 5 \\times 10^5$，$1 \\leq \\sum \\limits _{i=1}^{Q} \\left|B^{(i)}\\right| \\leq 10^6$，输入的字符串全部由**数字**组成。\n\n此外，我们保证，对于所有测试数据， $\\sum \\limits _{i=1}^{Q} \\left|B^{(i)}\\right|$ 不会小于其在该测试点对应上界的 $\\frac{1}{10}$。", "locale": "zh-CN"}}}
{"pid": "P11151", "type": "P", "difficulty": 6, "samples": [["6 5 5\n1 6 2 3 5 1\n1 2 4 3 4\n1 6 1\n2 6 1\n2 6 5\n3 5 1\n3 4 5", "32\n38\n26\n14\n0"], ["见附件中的 ex_2.in。", "见附件中的 ex_2.ans。"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "THUWC"], "title": "[THUWC 2018] 明天的太阳会照常升起", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D2T1。$\\texttt{7s,0.5G}$。", "description": "\n小 R 为了看日出，来到了 C 国的东海岸。\n\n东海岸的海岸线上从北到南依次排列着 $n$ 座城市，编号为 $1$ 到 $n$。其中编号小的城市在编号大的城市的北边。相邻编号之间的城市由海滨公路连接，连接城市 $i$ 和 $i+1$ 的公路长度为 $l_i$ 公里。\n\n小 R 有一辆汽车，这辆汽车每行驶一公里需要消耗一单位的汽油。在城市之间的道路上没有加油站，因此小R只能选择在路途中的城市里加油。城市 $i$ 每单位汽油的价格是 $p_i$。小R的汽车在消耗完所有的汽油之后就会立刻熄火，无法前进，且小R的汽车油箱最多能装 $V$ 单位汽油。\n\n小 R 一共规划了 $m$ 次看日出的行程，在第 $i$ 次行程中，小 R 晚上住在 $s_i$ 号城市，第二天凌晨要开车赶往 $t_i$ 号城市看日出。由于某些原因，小 R 总是会从**编号较小**的城市赶往**编号较大**的城市，即满足 $s_i<t_i$ 。因为行程的时间非常紧张，所以每次行程小 R 都会选择距离最短的路线。在选择最短路线的基础上，小 R 希望合理安排加油的地点，使得每次行程的花费最小。在第 $i$ 次行程刚开始时，小 R 的汽车油箱的油量为 $v_i$（$0\\le v_i\\le V$）。\n\n注意，每次行程都是相互独立的，第 $i$ 次行程刚开始的油箱的油量总是 $v_i$，不会受到上一次行程结束时油箱中剩余油量的影响。", "inputFormat": "\n从标准输入读入数据。\n\n第一行三个用空格隔开的正整数$n，m，V$，分别表示城市的数量，行程的数量和油箱容量。\n\n第二行 $n$ 个用空格隔开的正整数，第 $i$ 个正整数表示 $p_i$。\n\n第三行 $n-1$ 个用空格隔开的正整数，第 $i$ 个正整数表示 $l_i$。\n\n接下来 $m$ 行，每行三个用空格隔开的整数 $s_i$，$t_i$，$v_i$，表示第 $i$ 次行程小 R 要从 $s_i$ 出发赶往 $t_i$，出发时油箱里有 $v_i$ 单位汽油。\t", "outputFormat": "\n输出到标准输出。\n\n输出 $m$ 行，第 $i$ 行表示第 $i$ 次行程的最小花费。\n", "hint": "\n对于 100% 的数据，$n\\le10^6$，$m\\le10^6$，$1\\le V\\le 10^{18}$，$1\\le s_i<t_i \\le n$，$0\\le v_i \\le V$，$1\\le l_i\\le\\min(V,10^6)$，$1\\le p_i\\le5\\times10^6$。\n\n本题共 $20$ 个数据点，每个数据点 $5$ 分。各个数据点的限制如下：\n\n \n| 测试点编号 | $n=$ | $m=$ | $V$ | 其它约定 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1$ | $10$ | $10$ | $\\le 10$ | 无 |\n| $2\\sim 3$ | $10^3$ | $10^3$ | $\\le 10^{18}$ | 无 |\n| $4\\sim 8$ | $10^5$ | $10^5$ | $\\le 10^{18}$ | 无 |\n| $9\\sim 11$ | $5\\times 10^5$ | $5\\times 10^5$ | $\\le 10^{18}$ | $s_i=1$ |\n| $12,13$ | $5\\times 10^5$ | $5\\times 10^5$ | $= 10^{18}$ | 无 |\n| $14,15$ | $5\\times 10^5$ | $5\\times 10^5$ | $\\le 10^{18}$ | 无 |\n| $16\\sim 20$ | $10^6$ | $10^6$ | $\\le 10^{18}$ | 无 |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2018] 明天的太阳会照常升起", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D2T1。$\\texttt{7s,0.5G}$。", "description": "\n小 R 为了看日出，来到了 C 国的东海岸。\n\n东海岸的海岸线上从北到南依次排列着 $n$ 座城市，编号为 $1$ 到 $n$。其中编号小的城市在编号大的城市的北边。相邻编号之间的城市由海滨公路连接，连接城市 $i$ 和 $i+1$ 的公路长度为 $l_i$ 公里。\n\n小 R 有一辆汽车，这辆汽车每行驶一公里需要消耗一单位的汽油。在城市之间的道路上没有加油站，因此小R只能选择在路途中的城市里加油。城市 $i$ 每单位汽油的价格是 $p_i$。小R的汽车在消耗完所有的汽油之后就会立刻熄火，无法前进，且小R的汽车油箱最多能装 $V$ 单位汽油。\n\n小 R 一共规划了 $m$ 次看日出的行程，在第 $i$ 次行程中，小 R 晚上住在 $s_i$ 号城市，第二天凌晨要开车赶往 $t_i$ 号城市看日出。由于某些原因，小 R 总是会从**编号较小**的城市赶往**编号较大**的城市，即满足 $s_i<t_i$ 。因为行程的时间非常紧张，所以每次行程小 R 都会选择距离最短的路线。在选择最短路线的基础上，小 R 希望合理安排加油的地点，使得每次行程的花费最小。在第 $i$ 次行程刚开始时，小 R 的汽车油箱的油量为 $v_i$（$0\\le v_i\\le V$）。\n\n注意，每次行程都是相互独立的，第 $i$ 次行程刚开始的油箱的油量总是 $v_i$，不会受到上一次行程结束时油箱中剩余油量的影响。", "inputFormat": "\n从标准输入读入数据。\n\n第一行三个用空格隔开的正整数$n，m，V$，分别表示城市的数量，行程的数量和油箱容量。\n\n第二行 $n$ 个用空格隔开的正整数，第 $i$ 个正整数表示 $p_i$。\n\n第三行 $n-1$ 个用空格隔开的正整数，第 $i$ 个正整数表示 $l_i$。\n\n接下来 $m$ 行，每行三个用空格隔开的整数 $s_i$，$t_i$，$v_i$，表示第 $i$ 次行程小 R 要从 $s_i$ 出发赶往 $t_i$，出发时油箱里有 $v_i$ 单位汽油。\t", "outputFormat": "\n输出到标准输出。\n\n输出 $m$ 行，第 $i$ 行表示第 $i$ 次行程的最小花费。\n", "hint": "\n对于 100% 的数据，$n\\le10^6$，$m\\le10^6$，$1\\le V\\le 10^{18}$，$1\\le s_i<t_i \\le n$，$0\\le v_i \\le V$，$1\\le l_i\\le\\min(V,10^6)$，$1\\le p_i\\le5\\times10^6$。\n\n本题共 $20$ 个数据点，每个数据点 $5$ 分。各个数据点的限制如下：\n\n \n| 测试点编号 | $n=$ | $m=$ | $V$ | 其它约定 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1$ | $10$ | $10$ | $\\le 10$ | 无 |\n| $2\\sim 3$ | $10^3$ | $10^3$ | $\\le 10^{18}$ | 无 |\n| $4\\sim 8$ | $10^5$ | $10^5$ | $\\le 10^{18}$ | 无 |\n| $9\\sim 11$ | $5\\times 10^5$ | $5\\times 10^5$ | $\\le 10^{18}$ | $s_i=1$ |\n| $12,13$ | $5\\times 10^5$ | $5\\times 10^5$ | $= 10^{18}$ | 无 |\n| $14,15$ | $5\\times 10^5$ | $5\\times 10^5$ | $\\le 10^{18}$ | 无 |\n| $16\\sim 20$ | $10^6$ | $10^6$ | $\\le 10^{18}$ | 无 |\n\n", "locale": "zh-CN"}}}
{"pid": "P11152", "type": "P", "difficulty": 7, "samples": [["3\n1 1 2", "2"], ["5\n5 6 7 8 9\n", "322192262"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "THUWC"], "title": "[THUWC 2018] 七彩序列", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D2T2。$\\texttt{5s,0.5G}$。", "description": "\n给出 $n$ 种颜色的小球若干，颜色的编号从 $1$ 至 $n$ ，第 $i$ 种颜色的小球共有 $a_i$ 个。小 $L$ 要把这些小球排成一个序列，使得**不**存在一个非空前缀或非空后缀是“整齐的”。这里我们称一个前缀或后缀是“整齐的”，当且仅当其中**所有 $n$ 个颜色**小球的出现次数相同。你的任务是计算本质不同的序列数目。\n\n善良的 temporaryDO 给大家指出了一些必要的说明：\n\n1. 一个序列长度为 $len$ 的**前缀**（后缀）指的是序列中最靠**左**（右）的 $len$ 个小球。而非空前缀或后缀指的即是 $len\\neq 0$ 的前缀或后缀。\n\n2. 对于一个小球的序列 $S$，令 $S_i$ 表示从左到右数的第 $i$ 个小球的颜色。我们认为两个小球序列 $S, T$ 本质不同，当且仅当存在一个位置 $i$ 使得 $S_i$ 不同于 $T_i$。\n\n为了避免高精度，你只需要计算答案对 $998,244,353​$ 取模的结果即可。", "inputFormat": "\n从标准输入读入数据。\n\n输入的第一行包含一个整数 $n$ ，表示颜色的种类数。\n\n接下来一行包含 $n$ 个用空格隔开的整数，第 $i$ 个正整数为 $a_i$ ，表示第 $i$ 种颜色小球的数量。", "outputFormat": "\n输出到标准输出。\n\n输出包含一行一个整数，表示本质不同的小球序列数目对 $998,244,353$ 取模的结果。\n", "hint": "#### 样例 $1$ 解释\n\n合法的两种方案分别为：`1 3 3 2` 和 `2 3 3 1`，显然，没有其他满足条件的序列。\n\n\n### 子任务\n\n\n \n| 测试点编号 | $n=$ | $a_i\\le$ |\n| :--: | :--: | :--: |\n| $1$ | $2$ | $500$ |\n| $2$ | $2$ | $2\\times 10^5$ | \n| $3$ | $2$ | $2\\times 10^5$ | \n| $4$ | $50$ | $2\\times 10^3$ | \n| $5$ | $75$ | $2\\times 10^3$ | \n| $6$ | $100$ | $2\\times 10^3$ | \n| $7$ | $50$ | $10^5$ | \n| $8$ | $75$ | $1.5\\times 10^5$ | \n| $9$ | $90$ | $1.75\\times 10^5$ | \n| $10$ | $100$ | $2\\times 10^5$ | \n\n对于 $100\\%$ 的数据，保证 $n \\le 100$，所有 $a_i\\le 200,000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2018] 七彩序列", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D2T2。$\\texttt{5s,0.5G}$。", "description": "\n给出 $n$ 种颜色的小球若干，颜色的编号从 $1$ 至 $n$ ，第 $i$ 种颜色的小球共有 $a_i$ 个。小 $L$ 要把这些小球排成一个序列，使得**不**存在一个非空前缀或非空后缀是“整齐的”。这里我们称一个前缀或后缀是“整齐的”，当且仅当其中**所有 $n$ 个颜色**小球的出现次数相同。你的任务是计算本质不同的序列数目。\n\n善良的 temporaryDO 给大家指出了一些必要的说明：\n\n1. 一个序列长度为 $len$ 的**前缀**（后缀）指的是序列中最靠**左**（右）的 $len$ 个小球。而非空前缀或后缀指的即是 $len\\neq 0$ 的前缀或后缀。\n\n2. 对于一个小球的序列 $S$，令 $S_i$ 表示从左到右数的第 $i$ 个小球的颜色。我们认为两个小球序列 $S, T$ 本质不同，当且仅当存在一个位置 $i$ 使得 $S_i$ 不同于 $T_i$。\n\n为了避免高精度，你只需要计算答案对 $998,244,353​$ 取模的结果即可。", "inputFormat": "\n从标准输入读入数据。\n\n输入的第一行包含一个整数 $n$ ，表示颜色的种类数。\n\n接下来一行包含 $n$ 个用空格隔开的整数，第 $i$ 个正整数为 $a_i$ ，表示第 $i$ 种颜色小球的数量。", "outputFormat": "\n输出到标准输出。\n\n输出包含一行一个整数，表示本质不同的小球序列数目对 $998,244,353$ 取模的结果。\n", "hint": "#### 样例 $1$ 解释\n\n合法的两种方案分别为：`1 3 3 2` 和 `2 3 3 1`，显然，没有其他满足条件的序列。\n\n\n### 子任务\n\n\n \n| 测试点编号 | $n=$ | $a_i\\le$ |\n| :--: | :--: | :--: |\n| $1$ | $2$ | $500$ |\n| $2$ | $2$ | $2\\times 10^5$ | \n| $3$ | $2$ | $2\\times 10^5$ | \n| $4$ | $50$ | $2\\times 10^3$ | \n| $5$ | $75$ | $2\\times 10^3$ | \n| $6$ | $100$ | $2\\times 10^3$ | \n| $7$ | $50$ | $10^5$ | \n| $8$ | $75$ | $1.5\\times 10^5$ | \n| $9$ | $90$ | $1.75\\times 10^5$ | \n| $10$ | $100$ | $2\\times 10^5$ | \n\n对于 $100\\%$ 的数据，保证 $n \\le 100$，所有 $a_i\\le 200,000$。", "locale": "zh-CN"}}}
{"pid": "P11153", "type": "P", "difficulty": 0, "samples": [["见附件压缩包中的 1~10.in。", "见附件压缩包中的 1~10.ans。"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "THUWC"], "title": "[THUWC 2018] 角点检测（未配置 SPJ）", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D2T3。$\\texttt{3s,0.5G}$。\n\n---\n\n\n计算机视觉（Computer Vision）中，一个局部特征（local feature）被定义为“一个与其直接邻域有显著不同的小区域”，其中“显著不同”可以是许多可能，如亮度、颜色、纹理等等。足够好的特征可以让我们进一步获取图片中除颜色以外的更多（语义）信息。例如，在卷积神经网络（Convolutional Neural Network）中，特征是通过卷积核来提取的，而其层级结构使得高层的信息能通过低层信息结合来生成。一个用于人脸识别的网络中可以存在感知诸如眼、嘴、耳、发、皮肤的不同神经元，并通过卷积连接来激励感知人脸的单元。\n", "description": "在本问题中，我们将会研究一种最基本的局部特征——\"角点\"。从数学上说，角点可以被认为是两条边相交的点；边在图片中，可以认为是其梯度（导数）图像上的光滑连续段（如果你拿黑笔在白纸上画一条直线，由于黑线是一个有宽度的区域，所以实际上是会有两条非常接近的边）。基于这种考虑，学术界已经提出了若干基于 SUSAN、Harris、CSS 等，并有一定表现的角点算法。我们提供了描述 SUSAN、Harris、CSS 算法的一些阅读材料，而你的任务是则是基于我们给出的资料，选取适合自己的算法并完成对应的实现和优化。\n\n注意在实际图片中，由于存在像素离散、色彩渐变、噪声、失真等等因素，很少会有遵循良定义的边存在，因此按某种数学方法找到的这些特征点，从人的角度而言并不一定是角点，或者说会有一定的偏差。但在具体运用上，虽然这些检测点并非角点，但它们在局部上通常依然有足够的特征，所以依然被广泛应用。", "inputFormat": "\n从标准输入读入数据。\n\n输入的第一行包含两个正整数 $w$、$h$，表示图片的宽度和高度。保证 $w \\le 1280$，$h \\le 1280$。\n\n接下来 $h\\times w$ 行，每行包含 $3$ 个非负整数，描述一个像素。其中这些行中的第 $(i-1) \\times w + j$ 行的三个数表示图片第 $i$ 行，第 $j$ 列的像素的 **RGB**，即红（red）、绿（green）、蓝（blue）三通道的数值。整数的范围在 $[0, 255]$ 中。", "outputFormat": "输出到标准输出。\n\n第一行一个整数 $k$，表示检测到的角点数量。\n\n接下来 $k$ 行，每行两个非负整数 $x$、$y$，描述一个角点的坐标。**注意：坐标中 $x$ 是横坐标，即宽度方向；$y$ 是纵坐标，即高度方向。图像左上角的像素 （第 $1$ 行第 $1$ 列）的坐标规定为 $(0, 0)$**。\n", "hint": "#### 样例 $1$ 解释\n\n这组样例的图片和其参考的检测结果如下左图和右图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3vdmk3ar.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/ht9npydk.png)\n#### 数据和评分方法\n\n测试数据一共 $20$ 张图片，每张图片就是一个测试点。**另外**有 $10$ 张图片已经作为你的参考用例和预测试数据。注意：本题的预测试数据与样例**完全相同**，且预测试数据的评测结果与最终评测结果**没有关系**。\n\n我们使用 CSS + Harris(refine) 的结果作为参考算法，并将在参考算法上人工标注的结果作为参考答案。\n\n在评价你的角点是否正确输出时，我们会对你输出的角点和答案的角点进行二分图最大匹配。其中如果一对点对 $a$，$b$ 满足 $a$ 在以 $b$ 为中心的 $5 \\times 5$ 范围以内，那么我们认为这个角点对是可匹配的。如果一个你输出的角点在最大匹配中，那么我们就认为这个角点是正确的。\n\n每个测试点的得分比例用 $F_1$ 表示，它的具体定义为\n\n$$\nF_1 = \\frac{2\\mathit{TP}}{2\\mathit{TP}+\\mathit{FP}+\\mathit{FN}}\n$$\n\n其中 $\\mathit{TP}$（true positive）表示是正确输出的角点数量（即最大匹配数），$\\mathit{FP}$（false positive）表示你输出的点中错误的角点数量，$\\mathit{FN}$（false negative）表示正确的角点中没有被你的角点匹配的数量。\n\n对 $F_1$ 的更进一步解释为：你输出的点中，正确的比例 $\\frac{\\mathit{TP}}{\\mathit{TP}+\\mathit{FP}}$ 叫做“准确率”；应该输出的点中，被你输出的比例 $\\frac{\\mathit{TP}}{\\mathit{TP}+\\mathit{FN}}$ 叫做“召回率”。$F_1$ 是准确率和召回率的调和平均数。\n\n我们选取的图片会保证提供材料中的算法**在特定的优化下**都会有较好的表现。在给定的测试图片下，参考算法对角点的 $F_1$ 检测率为 $90\\%\\sim 100\\%$ 左右。\n\n#### 如何完成本题\n\n下发文件除参考用例外，还有两类文件：描述参考算法的文档和其中一部分实现、一些工具。这些材料你可以任意使用，包括阅读并实现、直接使用部分代码、使用它们辅助你实现或调试等。你也可以不使用它们，完全自己完成本题。\n\n我们推荐你实现我们给出材料中三个算法中的一个或者两个，并在此基础上尝试进行自己的调整~~或魔改~~。三种算法的实现难度和效果从低到高分别为：SUSAN（或它的一种实现方式FAST），Harris，CSS。\n\n工具中包括：输入和PNG格式图片的转换工具，输出结果的可视化工具。\n\n下发文件的具体使用方法，以及**文档的导读**请阅读文件中的 `README.pdf`。\n\n最后请注意：如果你需要用到下发文件中的代码，你应当将其直接复制到你提交的代码中，而不应该使用诸如 `#include` 的方法尝试包含它。你只能提交一个文件，且测试时无法读取到给你的这些文件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2018] 角点检测（未配置 SPJ）", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D2T3。$\\texttt{3s,0.5G}$。\n\n---\n\n\n计算机视觉（Computer Vision）中，一个局部特征（local feature）被定义为“一个与其直接邻域有显著不同的小区域”，其中“显著不同”可以是许多可能，如亮度、颜色、纹理等等。足够好的特征可以让我们进一步获取图片中除颜色以外的更多（语义）信息。例如，在卷积神经网络（Convolutional Neural Network）中，特征是通过卷积核来提取的，而其层级结构使得高层的信息能通过低层信息结合来生成。一个用于人脸识别的网络中可以存在感知诸如眼、嘴、耳、发、皮肤的不同神经元，并通过卷积连接来激励感知人脸的单元。\n", "description": "在本问题中，我们将会研究一种最基本的局部特征——\"角点\"。从数学上说，角点可以被认为是两条边相交的点；边在图片中，可以认为是其梯度（导数）图像上的光滑连续段（如果你拿黑笔在白纸上画一条直线，由于黑线是一个有宽度的区域，所以实际上是会有两条非常接近的边）。基于这种考虑，学术界已经提出了若干基于 SUSAN、Harris、CSS 等，并有一定表现的角点算法。我们提供了描述 SUSAN、Harris、CSS 算法的一些阅读材料，而你的任务是则是基于我们给出的资料，选取适合自己的算法并完成对应的实现和优化。\n\n注意在实际图片中，由于存在像素离散、色彩渐变、噪声、失真等等因素，很少会有遵循良定义的边存在，因此按某种数学方法找到的这些特征点，从人的角度而言并不一定是角点，或者说会有一定的偏差。但在具体运用上，虽然这些检测点并非角点，但它们在局部上通常依然有足够的特征，所以依然被广泛应用。", "inputFormat": "\n从标准输入读入数据。\n\n输入的第一行包含两个正整数 $w$、$h$，表示图片的宽度和高度。保证 $w \\le 1280$，$h \\le 1280$。\n\n接下来 $h\\times w$ 行，每行包含 $3$ 个非负整数，描述一个像素。其中这些行中的第 $(i-1) \\times w + j$ 行的三个数表示图片第 $i$ 行，第 $j$ 列的像素的 **RGB**，即红（red）、绿（green）、蓝（blue）三通道的数值。整数的范围在 $[0, 255]$ 中。", "outputFormat": "输出到标准输出。\n\n第一行一个整数 $k$，表示检测到的角点数量。\n\n接下来 $k$ 行，每行两个非负整数 $x$、$y$，描述一个角点的坐标。**注意：坐标中 $x$ 是横坐标，即宽度方向；$y$ 是纵坐标，即高度方向。图像左上角的像素 （第 $1$ 行第 $1$ 列）的坐标规定为 $(0, 0)$**。\n", "hint": "#### 样例 $1$ 解释\n\n这组样例的图片和其参考的检测结果如下左图和右图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3vdmk3ar.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/ht9npydk.png)\n#### 数据和评分方法\n\n测试数据一共 $20$ 张图片，每张图片就是一个测试点。**另外**有 $10$ 张图片已经作为你的参考用例和预测试数据。注意：本题的预测试数据与样例**完全相同**，且预测试数据的评测结果与最终评测结果**没有关系**。\n\n我们使用 CSS + Harris(refine) 的结果作为参考算法，并将在参考算法上人工标注的结果作为参考答案。\n\n在评价你的角点是否正确输出时，我们会对你输出的角点和答案的角点进行二分图最大匹配。其中如果一对点对 $a$，$b$ 满足 $a$ 在以 $b$ 为中心的 $5 \\times 5$ 范围以内，那么我们认为这个角点对是可匹配的。如果一个你输出的角点在最大匹配中，那么我们就认为这个角点是正确的。\n\n每个测试点的得分比例用 $F_1$ 表示，它的具体定义为\n\n$$\nF_1 = \\frac{2\\mathit{TP}}{2\\mathit{TP}+\\mathit{FP}+\\mathit{FN}}\n$$\n\n其中 $\\mathit{TP}$（true positive）表示是正确输出的角点数量（即最大匹配数），$\\mathit{FP}$（false positive）表示你输出的点中错误的角点数量，$\\mathit{FN}$（false negative）表示正确的角点中没有被你的角点匹配的数量。\n\n对 $F_1$ 的更进一步解释为：你输出的点中，正确的比例 $\\frac{\\mathit{TP}}{\\mathit{TP}+\\mathit{FP}}$ 叫做“准确率”；应该输出的点中，被你输出的比例 $\\frac{\\mathit{TP}}{\\mathit{TP}+\\mathit{FN}}$ 叫做“召回率”。$F_1$ 是准确率和召回率的调和平均数。\n\n我们选取的图片会保证提供材料中的算法**在特定的优化下**都会有较好的表现。在给定的测试图片下，参考算法对角点的 $F_1$ 检测率为 $90\\%\\sim 100\\%$ 左右。\n\n#### 如何完成本题\n\n下发文件除参考用例外，还有两类文件：描述参考算法的文档和其中一部分实现、一些工具。这些材料你可以任意使用，包括阅读并实现、直接使用部分代码、使用它们辅助你实现或调试等。你也可以不使用它们，完全自己完成本题。\n\n我们推荐你实现我们给出材料中三个算法中的一个或者两个，并在此基础上尝试进行自己的调整~~或魔改~~。三种算法的实现难度和效果从低到高分别为：SUSAN（或它的一种实现方式FAST），Harris，CSS。\n\n工具中包括：输入和PNG格式图片的转换工具，输出结果的可视化工具。\n\n下发文件的具体使用方法，以及**文档的导读**请阅读文件中的 `README.pdf`。\n\n最后请注意：如果你需要用到下发文件中的代码，你应当将其直接复制到你提交的代码中，而不应该使用诸如 `#include` 的方法尝试包含它。你只能提交一个文件，且测试时无法读取到给你的这些文件。", "locale": "zh-CN"}}}
{"pid": "P11154", "type": "P", "difficulty": 1, "samples": [["44 0 0 0", "EX+"], ["33 10 0 1", "AA"], ["0 0 0 1", "D"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "梦熊比赛"], "title": "【MX-X6-T0】Arcaea Scoring System", "background": "原题链接：<https://oier.team/problems/X6A>。", "description": "Arcaea 是一款风靡全球的音乐游戏，以其创新式的三维立体游玩界面知名。在 Arcaea 中，玩家通过点击/滑动屏幕的方式随着音乐的节奏游玩对应的谱面。一次谱面游玩的计分方式如下：\n\n- 谱面包含若干个**物件**。每一个物件的判定结果有 **大 Pure**、**小 Pure**、**Far**、**Lost** 四种。\n- 对于一个 $n$ 个物件的谱面，其 **基本分** 为 $10^7$ 分，**附加分** 为 $n$ 分，满分为 $10^7+n$ 分。每一个物件分别占 $\\dfrac{10^7}{n}$ 分 **基本分** 和 $1$ 分 **附加分**。\n- 如果一个物件获得 **大 Pure** 判定，则玩家获得该物件的全部基本分和附加分。\n- 如果一个物件获得 **小 Pure** 判定，则玩家仅获得该物件的全部基本分，不获得附加分。\n- 如果一个物件获得 **Far** 判定，则玩家仅获得该物件的基本分的一半。\n- 如果一个物件获得 **Lost** 判定，则玩家不获得任何分数。\n- 游玩分数为玩家所有物件获得的分数总和**下取整**。\n\n玩家在分数的基础上可以获得 **评级**：\n\n- 游玩分数 $\\geq 9.9\\times 10^6$ 时，获得 **EX+** 评级；\n- 游玩分数 $\\geq 9.8\\times 10^6$ 但 $<9.9\\times 10^6$ 时，获得 **EX** 评级；\n- 游玩分数 $\\geq 9.5\\times 10^6$ 但 $<9.8\\times 10^6$ 时，获得 **AA** 评级；\n- 游玩分数 $\\geq 9.2\\times 10^6$ 但 $<9.5\\times 10^6$ 时，获得 **A** 评级；\n- 游玩分数 $\\geq 8.9\\times 10^6$ 但 $<9.2\\times 10^6$ 时，获得 **B** 评级；\n- 游玩分数 $\\geq 8.6\\times 10^6$ 但 $<8.9\\times 10^6$ 时，获得 **C** 评级；\n- 游玩分数 $<8.6\\times 10^6$ 时，获得 **D** 评级。\n\n现在分别给定一次谱面游玩的四种判定的个数，请计算这次游玩的评级。", "inputFormat": "一行四个空格分隔的整数 $p_1,p_0,f,l$，分别表示 **大 Pure**、**小 Pure**、**Far**、**Lost** 的个数。其中谱面物件个数 $n=p_1+p_0+f+l$。", "outputFormat": "输出一个字符串表示评级，七种评级分别对应输出 `EX+`、`EX`、`AA`、`A`、`B`、`C`、`D`。", "hint": "**【样例解释 #1】**\n\n所有物件的判定结果均为大 Pure，因此玩家获得全部基本分 $10^7$ 分和全部附加分，由于总共有 $44$ 个物件，故额外获得 $44$ 分，故游玩分数为 $10{,}000{,}044$；总分大于等于 $9.9\\times 10^6$，从而获得 EX+ 评级。\n\n**【样例解释 #2】**\n\n物件个数为 $33 + 10 + 0 + 1 = 44$ 个。$33$ 个物件的判定结果为大 Pure、$10$ 个物件的判定结果为小 Pure、$1$ 个物件的判定结果为 Lost，因此玩家获得 $\\dfrac{43}{44} \\times 10^7$ 的基本分和 $33$ 分附加分，故分数总和为 $9{,}772{,}760.\\dot 2 \\dot 7$，游玩分数向下取整到 $9{,}772{,}760$；总分大于等于 $9.5\\times 10^6$ 且小于 $9.8\\times 10^6$，从而获得 AA 评级。\n\n**【数据范围】**\n\n对于所有数据，保证 $p_0,p_1,f,l\\geq 0$，$1\\leq n\\leq 100$。\n\n共 $10$ 组数据，对于前 $2$ 组数据，保证 $n=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T0】Arcaea Scoring System", "background": "原题链接：<https://oier.team/problems/X6A>。", "description": "Arcaea 是一款风靡全球的音乐游戏，以其创新式的三维立体游玩界面知名。在 Arcaea 中，玩家通过点击/滑动屏幕的方式随着音乐的节奏游玩对应的谱面。一次谱面游玩的计分方式如下：\n\n- 谱面包含若干个**物件**。每一个物件的判定结果有 **大 Pure**、**小 Pure**、**Far**、**Lost** 四种。\n- 对于一个 $n$ 个物件的谱面，其 **基本分** 为 $10^7$ 分，**附加分** 为 $n$ 分，满分为 $10^7+n$ 分。每一个物件分别占 $\\dfrac{10^7}{n}$ 分 **基本分** 和 $1$ 分 **附加分**。\n- 如果一个物件获得 **大 Pure** 判定，则玩家获得该物件的全部基本分和附加分。\n- 如果一个物件获得 **小 Pure** 判定，则玩家仅获得该物件的全部基本分，不获得附加分。\n- 如果一个物件获得 **Far** 判定，则玩家仅获得该物件的基本分的一半。\n- 如果一个物件获得 **Lost** 判定，则玩家不获得任何分数。\n- 游玩分数为玩家所有物件获得的分数总和**下取整**。\n\n玩家在分数的基础上可以获得 **评级**：\n\n- 游玩分数 $\\geq 9.9\\times 10^6$ 时，获得 **EX+** 评级；\n- 游玩分数 $\\geq 9.8\\times 10^6$ 但 $<9.9\\times 10^6$ 时，获得 **EX** 评级；\n- 游玩分数 $\\geq 9.5\\times 10^6$ 但 $<9.8\\times 10^6$ 时，获得 **AA** 评级；\n- 游玩分数 $\\geq 9.2\\times 10^6$ 但 $<9.5\\times 10^6$ 时，获得 **A** 评级；\n- 游玩分数 $\\geq 8.9\\times 10^6$ 但 $<9.2\\times 10^6$ 时，获得 **B** 评级；\n- 游玩分数 $\\geq 8.6\\times 10^6$ 但 $<8.9\\times 10^6$ 时，获得 **C** 评级；\n- 游玩分数 $<8.6\\times 10^6$ 时，获得 **D** 评级。\n\n现在分别给定一次谱面游玩的四种判定的个数，请计算这次游玩的评级。", "inputFormat": "一行四个空格分隔的整数 $p_1,p_0,f,l$，分别表示 **大 Pure**、**小 Pure**、**Far**、**Lost** 的个数。其中谱面物件个数 $n=p_1+p_0+f+l$。", "outputFormat": "输出一个字符串表示评级，七种评级分别对应输出 `EX+`、`EX`、`AA`、`A`、`B`、`C`、`D`。", "hint": "**【样例解释 #1】**\n\n所有物件的判定结果均为大 Pure，因此玩家获得全部基本分 $10^7$ 分和全部附加分，由于总共有 $44$ 个物件，故额外获得 $44$ 分，故游玩分数为 $10{,}000{,}044$；总分大于等于 $9.9\\times 10^6$，从而获得 EX+ 评级。\n\n**【样例解释 #2】**\n\n物件个数为 $33 + 10 + 0 + 1 = 44$ 个。$33$ 个物件的判定结果为大 Pure、$10$ 个物件的判定结果为小 Pure、$1$ 个物件的判定结果为 Lost，因此玩家获得 $\\dfrac{43}{44} \\times 10^7$ 的基本分和 $33$ 分附加分，故分数总和为 $9{,}772{,}760.\\dot 2 \\dot 7$，游玩分数向下取整到 $9{,}772{,}760$；总分大于等于 $9.5\\times 10^6$ 且小于 $9.8\\times 10^6$，从而获得 AA 评级。\n\n**【数据范围】**\n\n对于所有数据，保证 $p_0,p_1,f,l\\geq 0$，$1\\leq n\\leq 100$。\n\n共 $10$ 组数据，对于前 $2$ 组数据，保证 $n=1$。", "locale": "zh-CN"}}}
{"pid": "P11155", "type": "P", "difficulty": 2, "samples": [["3\n0\n1 1\n1 2\n3\n1 1 1\n1 0 1\n0 0 0\n", "3\n1\n0"], ["10\n0\n1 1\n1 2\n3 1 2 3\n4 1 4 2 3\n0\n5 6 4 5 2 1\n0\n1 4\n1 9\n10\n1 0 0 1 1 0 1 0 0 0\n1 0 1 0 1 0 1 0 1 0\n1 0 1 1 1 1 1 1 0 1\n1 1 0 1 1 0 1 1 0 1\n1 1 0 1 0 0 0 1 1 1\n1 1 0 1 0 1 0 1 1 1\n1 0 0 1 0 1 1 1 0 1\n1 1 0 1 1 1 0 0 1 1\n1 1 1 0 0 0 0 0 1 1\n1 0 0 0 1 1 1 0 1 1", "1\n1\n3\n3\n3\n4\n3\n3\n3\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "梦熊比赛"], "title": "【MX-X6-T1】 Subtask Dependency", "background": "原题链接：<https://oier.team/problems/X6B>。", "description": "现在有一道 OI 题。这道题有 $n$ 个子任务，编号从 $1$ 到 $n$。编号为 $i$ 的子任务依赖 $d_i$ 个子任务，这些子任务的编号分别为 $a_{i,1},a_{i,2},\\dots,a_{i,d_i}$。保证对于所有 $1\\leq i\\leq n,1\\leq j\\leq d_i$，有 $a_{i,j}<i$，即**一个子任务只会依赖编号小于自己的子任务**。注意一个子任务可能不依赖任何子任务。\n\n一个选手的程序可以描述为一个长度为 $n$ 的 $0/1$ 序列 $p_1,p_2,\\dots,p_n$，分别表示该程序能否通过第 $i$ 个子任务。\n\n评测一个程序时，评测机会按照编号从小到大依次考虑每一个子任务。当考虑到第 $i$ 个子任务时：\n\n- 如果该子任务依赖的子任务中存在一个子任务的状态为错误，则该子任务的状态为错误；\n- 否则，评测机测试该子任务。如果选手的程序能通过该子任务，则该子任务状态为正确；否则状态为错误。\n\n一个程序的得分是评测后状态为正确的子任务个数。\n\n现在有 $m$ 个选手提交程序，你需要分别计算它们的得分。", "inputFormat": "第一行一个整数 $n$ 表示子任务个数。\n\n接下来 $n$ 行，第 $i$ 行首先输入一个整数 $d_i$ 表示第 $i$ 个子任务依赖的子任务个数；接下来输入 $d_i$ 个整数 $a_{i,1},a_{i,2},\\dots,a_{i,d_i}$ 表示依赖的子任务编号。保证所有 $a_{i,j}<i$。\n\n接下来一行一个整数 $m$，表示选手程序个数。\n\n接下来 $m$ 行，每行 $n$ 个整数，其中第 $i$ 行第 $j$ 个整数 $p_{i,j}$ 为 $0$ 表示第 $i$ 个选手的程序不能通过第 $j$ 个子任务；为 $1$ 表示第 $i$ 个选手的程序能通过第 $j$ 个子任务。", "outputFormat": "输出 $m$ 行，第 $i$ 行输出第 $i$ 个选手的得分。", "hint": "**【样例解释 #1】**\n\n- 选手 1 的程序可以通过所有子任务，因此所有 $3$ 个子任务的结果均为正确；\n- 选手 2 的程序不能通过子任务 2，因此子任务 2 会被判定为错误；由于子任务 3 依赖子任务 2，因此即使选手 2 的程序可以通过子任务 3，子任务 3 也会被判定为错误。该选手的程序的评测结果只有子任务 1 正确。\n- 选手 3 的程序不能通过任何子任务，因此所有子任务结果均为错误。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq n,m\\leq 100$，$0\\leq d_i<i$，$1\\leq a_{i,j}<i$，$0\\leq p_{i,j}\\leq 1$，不存在 $i$ 和 $j_1\\neq j_2$ 使得 $a_{i,j_1}=a_{i,j_2}$。\n\n共 $10$ 组数据，具体限制如下：\n\n- 对于第 $1,2$ 组数据，满足 $n=1$；\n- 对于第 $3,4,5$ 组数据，满足对所有 $i$，有 $d_i\\leq 1$；\n- 对于其他数据，不满足任何附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T1】 Subtask Dependency", "background": "原题链接：<https://oier.team/problems/X6B>。", "description": "现在有一道 OI 题。这道题有 $n$ 个子任务，编号从 $1$ 到 $n$。编号为 $i$ 的子任务依赖 $d_i$ 个子任务，这些子任务的编号分别为 $a_{i,1},a_{i,2},\\dots,a_{i,d_i}$。保证对于所有 $1\\leq i\\leq n,1\\leq j\\leq d_i$，有 $a_{i,j}<i$，即**一个子任务只会依赖编号小于自己的子任务**。注意一个子任务可能不依赖任何子任务。\n\n一个选手的程序可以描述为一个长度为 $n$ 的 $0/1$ 序列 $p_1,p_2,\\dots,p_n$，分别表示该程序能否通过第 $i$ 个子任务。\n\n评测一个程序时，评测机会按照编号从小到大依次考虑每一个子任务。当考虑到第 $i$ 个子任务时：\n\n- 如果该子任务依赖的子任务中存在一个子任务的状态为错误，则该子任务的状态为错误；\n- 否则，评测机测试该子任务。如果选手的程序能通过该子任务，则该子任务状态为正确；否则状态为错误。\n\n一个程序的得分是评测后状态为正确的子任务个数。\n\n现在有 $m$ 个选手提交程序，你需要分别计算它们的得分。", "inputFormat": "第一行一个整数 $n$ 表示子任务个数。\n\n接下来 $n$ 行，第 $i$ 行首先输入一个整数 $d_i$ 表示第 $i$ 个子任务依赖的子任务个数；接下来输入 $d_i$ 个整数 $a_{i,1},a_{i,2},\\dots,a_{i,d_i}$ 表示依赖的子任务编号。保证所有 $a_{i,j}<i$。\n\n接下来一行一个整数 $m$，表示选手程序个数。\n\n接下来 $m$ 行，每行 $n$ 个整数，其中第 $i$ 行第 $j$ 个整数 $p_{i,j}$ 为 $0$ 表示第 $i$ 个选手的程序不能通过第 $j$ 个子任务；为 $1$ 表示第 $i$ 个选手的程序能通过第 $j$ 个子任务。", "outputFormat": "输出 $m$ 行，第 $i$ 行输出第 $i$ 个选手的得分。", "hint": "**【样例解释 #1】**\n\n- 选手 1 的程序可以通过所有子任务，因此所有 $3$ 个子任务的结果均为正确；\n- 选手 2 的程序不能通过子任务 2，因此子任务 2 会被判定为错误；由于子任务 3 依赖子任务 2，因此即使选手 2 的程序可以通过子任务 3，子任务 3 也会被判定为错误。该选手的程序的评测结果只有子任务 1 正确。\n- 选手 3 的程序不能通过任何子任务，因此所有子任务结果均为错误。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq n,m\\leq 100$，$0\\leq d_i<i$，$1\\leq a_{i,j}<i$，$0\\leq p_{i,j}\\leq 1$，不存在 $i$ 和 $j_1\\neq j_2$ 使得 $a_{i,j_1}=a_{i,j_2}$。\n\n共 $10$ 组数据，具体限制如下：\n\n- 对于第 $1,2$ 组数据，满足 $n=1$；\n- 对于第 $3,4,5$ 组数据，满足对所有 $i$，有 $d_i\\leq 1$；\n- 对于其他数据，不满足任何附加限制。", "locale": "zh-CN"}}}
{"pid": "P11156", "type": "P", "difficulty": 2, "samples": [["3\n3 1\n3 2\n6 3", "114 514\n2005 1130\n59001 897"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "Special Judge", "梦熊比赛"], "title": "【MX-X6-T2】もしも", "background": "原题链接：<https://oier.team/problems/X6C>。\n\n---\n\n> _もしも$\\\\$\n数字がない世界だったら$\\\\$\n生きる期限なんて$\\\\$\nなかったのかな$\\\\$\nもしもの話なら良かった$\\\\$\nまた出逢えるからって$\\\\$\n言うんだ$\\\\$\nまたね。_\n>\n>_—— [もしも - Nanatsukaze / Dankidz](https://music.163.com/#/song?id=2102257032)_\n\n除法能够帮我们消除这个世界上的数字吗？\n\n如果不能，又能否让我们再次相见？", "description": "假设有正整数序列 $a_1, a_2, \\ldots, a_n$，其中：\n\n- 对于 $i\\geq 3$，满足 $a_i$ 等于 $\\dfrac{a_{i-2}}{a_{i-1}}$ **上取整**；\n- 对于任意 $1\\leq i\\leq n$，满足 $1\\leq a_i\\leq 10^9$。\n\n现在给定 $n$ 和 $a_n$，求任意一组可能的 $a_1,a_2$。\n\n其中一个数 $x$ 上取整等于最小的 $\\geq x$ 的整数。例如 $\\dfrac{7}{3}$ 上取整等于 $3$，$4$ 上取整等于 $4$。", "inputFormat": "单个测试点包含多组测试数据，第一行一个整数 $T$ 表示数据组数。\n\n接下来 $T$ 行，每行两个空格分隔的整数表示该组数据的 $n,a_n$。", "outputFormat": "对于每一组数据输出一行两个整数表示一组可能的 $a_1,a_2$。如有多种解可任意输出一种。可以证明本题数据范围下一定有解。", "hint": "**【样例解释】**\n\n对于三组数据，序列分别为：\n\n- $a=[114,514,1]$；\n- $a=[2005,1130,2]$；\n- $a=[59001,897,66,14,5,3]$。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq T\\leq 1000$，$3\\leq n\\leq 10^9$，$1\\leq a_n\\leq 10^9$。\n\n共 $10$ 组数据：\n\n- 对于前 $2$ 组数据，额外满足 $n\\leq 6$，$a_n\\leq 10$；\n- 对于前 $5$ 组数据，额外满足 $n\\leq 1000$；\n- 对于第 $6,7$ 组数据，额外满足 $a_n=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T2】もしも", "background": "原题链接：<https://oier.team/problems/X6C>。\n\n---\n\n> _もしも$\\\\$\n数字がない世界だったら$\\\\$\n生きる期限なんて$\\\\$\nなかったのかな$\\\\$\nもしもの話なら良かった$\\\\$\nまた出逢えるからって$\\\\$\n言うんだ$\\\\$\nまたね。_\n>\n>_—— [もしも - Nanatsukaze / Dankidz](https://music.163.com/#/song?id=2102257032)_\n\n除法能够帮我们消除这个世界上的数字吗？\n\n如果不能，又能否让我们再次相见？", "description": "假设有正整数序列 $a_1, a_2, \\ldots, a_n$，其中：\n\n- 对于 $i\\geq 3$，满足 $a_i$ 等于 $\\dfrac{a_{i-2}}{a_{i-1}}$ **上取整**；\n- 对于任意 $1\\leq i\\leq n$，满足 $1\\leq a_i\\leq 10^9$。\n\n现在给定 $n$ 和 $a_n$，求任意一组可能的 $a_1,a_2$。\n\n其中一个数 $x$ 上取整等于最小的 $\\geq x$ 的整数。例如 $\\dfrac{7}{3}$ 上取整等于 $3$，$4$ 上取整等于 $4$。", "inputFormat": "单个测试点包含多组测试数据，第一行一个整数 $T$ 表示数据组数。\n\n接下来 $T$ 行，每行两个空格分隔的整数表示该组数据的 $n,a_n$。", "outputFormat": "对于每一组数据输出一行两个整数表示一组可能的 $a_1,a_2$。如有多种解可任意输出一种。可以证明本题数据范围下一定有解。", "hint": "**【样例解释】**\n\n对于三组数据，序列分别为：\n\n- $a=[114,514,1]$；\n- $a=[2005,1130,2]$；\n- $a=[59001,897,66,14,5,3]$。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq T\\leq 1000$，$3\\leq n\\leq 10^9$，$1\\leq a_n\\leq 10^9$。\n\n共 $10$ 组数据：\n\n- 对于前 $2$ 组数据，额外满足 $n\\leq 6$，$a_n\\leq 10$；\n- 对于前 $5$ 组数据，额外满足 $n\\leq 1000$；\n- 对于第 $6,7$ 组数据，额外满足 $a_n=1$。", "locale": "zh-CN"}}}
{"pid": "P11157", "type": "P", "difficulty": 4, "samples": [["3\n-1 1 4", "1 2\n1 1\n0"], ["5\n1 -1 0 2 -3", "0\n1 -1\n1 0\n0\n1 -3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "Special Judge", "梦熊比赛"], "title": "【MX-X6-T3】さよならワンダーランド", "background": "原题链接：<https://oier.team/problems/X6D>。\n\n---\n\n> _ほら行くよって$\\\\$\n手を引いてくれた君は$\\\\$\n綺麗な目して言うんだ$\\\\$\n僕らあの頃と$\\\\$\n何も変わらないから$\\\\$\nせめて$\\\\$\n二人で夢を見させて_\n>\n>_—— [さよならワンダーランド - Nanatsukaze](https://music.163.com/#/song?id=2053736409)_\n\n能够带你进入孩童时期的梦境中的那个人，该在哪里寻找呢？", "description": "给定序列 $a_1, a_2, \\dots, a_n$，请对于每一个 $1\\sim n$ 的整数 $i$ 求任意一个整数 $j$ 使得以下条件同时成立，或判断不存在这样的 $j$：\n\n- $1\\leq i+j\\leq n$；\n- $a_i \\leq j \\leq a_{i+j}$。\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个空格分隔的整数 $a_1,a_2,\\dots,a_n$。", "outputFormat": "输出 $n$ 行。\n\n对于第 $i$ 行，如果能够找到 $j$ 使得 $1\\leq i+j\\leq n$ 且 $a_i \\leq j \\leq a_{i+j}$ 成立，则先输出一个 $1$，再输出你找到的 $j$，空格分隔。如果有多个合法 $j$ 可输出任意一个。如果不存在这样的 $j$，则仅输出一个 $0$。", "hint": "**【样例解释 #1】**\n\n$i=1,j=2$ 时，$a_i=-1$，$a_{i+j}=4$，满足 $a_i\\leq j\\leq a_{i+j}$。\n\n$i=2,j=1$ 时，$a_i=1$，$a_{i+j}=4$，满足 $a_i\\leq j\\leq a_{i+j}$。\n\n$i=3$ 时可以证明不存在符合条件的 $j$。\n\n**【数据范围】**\n\n对于所有数据，保证 $1\\leq n \\leq 3\\times 10^5$，$-10^9\\leq a_i\\leq 10^9$。\n\n**捆绑测试**，共 3 个 Subtask，具体限制如下所示：\n\n- Subtask 1（17 pts）：$n\\leq 1000$。\n- Subtask 2（39 pts）：对所有 $1\\leq i\\leq n$ 保证 $a_i\\leq -i$。\n- Subtask 3（44 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T3】さよならワンダーランド", "background": "原题链接：<https://oier.team/problems/X6D>。\n\n---\n\n> _ほら行くよって$\\\\$\n手を引いてくれた君は$\\\\$\n綺麗な目して言うんだ$\\\\$\n僕らあの頃と$\\\\$\n何も変わらないから$\\\\$\nせめて$\\\\$\n二人で夢を見させて_\n>\n>_—— [さよならワンダーランド - Nanatsukaze](https://music.163.com/#/song?id=2053736409)_\n\n能够带你进入孩童时期的梦境中的那个人，该在哪里寻找呢？", "description": "给定序列 $a_1, a_2, \\dots, a_n$，请对于每一个 $1\\sim n$ 的整数 $i$ 求任意一个整数 $j$ 使得以下条件同时成立，或判断不存在这样的 $j$：\n\n- $1\\leq i+j\\leq n$；\n- $a_i \\leq j \\leq a_{i+j}$。\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个空格分隔的整数 $a_1,a_2,\\dots,a_n$。", "outputFormat": "输出 $n$ 行。\n\n对于第 $i$ 行，如果能够找到 $j$ 使得 $1\\leq i+j\\leq n$ 且 $a_i \\leq j \\leq a_{i+j}$ 成立，则先输出一个 $1$，再输出你找到的 $j$，空格分隔。如果有多个合法 $j$ 可输出任意一个。如果不存在这样的 $j$，则仅输出一个 $0$。", "hint": "**【样例解释 #1】**\n\n$i=1,j=2$ 时，$a_i=-1$，$a_{i+j}=4$，满足 $a_i\\leq j\\leq a_{i+j}$。\n\n$i=2,j=1$ 时，$a_i=1$，$a_{i+j}=4$，满足 $a_i\\leq j\\leq a_{i+j}$。\n\n$i=3$ 时可以证明不存在符合条件的 $j$。\n\n**【数据范围】**\n\n对于所有数据，保证 $1\\leq n \\leq 3\\times 10^5$，$-10^9\\leq a_i\\leq 10^9$。\n\n**捆绑测试**，共 3 个 Subtask，具体限制如下所示：\n\n- Subtask 1（17 pts）：$n\\leq 1000$。\n- Subtask 2（39 pts）：对所有 $1\\leq i\\leq n$ 保证 $a_i\\leq -i$。\n- Subtask 3（44 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11158", "type": "P", "difficulty": 5, "samples": [["4\n1 2 3 4", "8"], ["10\n9 8 1 10 7 2 4 3 6 5", "27"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "分类讨论", "梦熊比赛"], "title": "【MX-X6-T4】夢重力", "background": "原题链接：<https://oier.team/problems/X6E>。\n\n---\n\n> _空を仰げば$\\\\$\n青さが僕を$\\\\$\n飲み込んでしまう気がしてて$\\\\$\n無重力なら楽だろうか$\\\\$\n宇宙まで行けたら_\n>\n> _—— [夢重力 - Nanatsukaze](https://music.163.com/#/song?id=2155399298)_\n\n在天体的随机运转中，如何找到一个没有重力的点呢？", "description": "给定一个 $n\\times n$ 的网格，其中有 $n$ 个关键点，保证每行每列各有一个关键点。保证 $n$ 是偶数。\n\n我们定义网格中的一个无重力区域为网格的连续的 $\\dfrac{n}{2}$ 行和连续的 $\\dfrac{n}{2}$ 列构成的大小为 $\\dfrac{n}{2}\\times \\dfrac{n}{2}$ 的子正方形，使得其中不包含任意关键点。\n\n定义 $f(i,j)$ 为交换网格的第 $i$ 行和第 $j$ 行后，不同的无重力区域个数。请对于所有可能的交换求 $f(i,j)$ 的和，即你需要求：\n\n$$\\sum_{1\\leq i<j\\leq n}f(i,j)$$\n\n注意求 $f$ 并不会真正在网格中执行交换，整个过程中不会对网格进行任何修改。", "inputFormat": "第一行一个整数表示 $n$。保证 $n$ 是偶数。\n\n接下来一行 $n$ 个空格分隔的整数 $p_1,p_2,\\dots,p_n$，表示 $n$ 个关键点的位置分别是 $(1,p_1),(2,p_2),\\dots,(n,p_n)$。保证 $p$ 是一个排列。", "outputFormat": "一行一个整数表示答案。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/49w2x0r4.png)\n\n上图中，左上角对应原网格。灰色的部分表示关键点。\n\n下面的 $6$ 个网格分别对应所有可能的交换产生的网格（依次为交换 $(1,2),(1,3),(1,4),(2,3),(2,4),(3,4)$），并使用红色和蓝色标出存在的无重力区域（紫色的位置表示两个无重力区域的交）。不难看出答案为 $2+2+0+0+2+2=8$。\n\n**【数据范围】**\n\n对于所有数据，保证 $2\\leq n\\leq 2\\times 10^5$ 且 $n$ 是偶数，保证 $p$ 是一个排列。\n\n**捆绑测试**，共 4 个 Subtask，具体限制如下所示：\n\n- Subtask 1（12 pts）：$n\\leq 10$；\n- Subtask 2（19 pts）：$n\\leq 200$；\n- Subtask 3（34 pts）：$n\\leq 2000$；\n- Subtask 4（35 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T4】夢重力", "background": "原题链接：<https://oier.team/problems/X6E>。\n\n---\n\n> _空を仰げば$\\\\$\n青さが僕を$\\\\$\n飲み込んでしまう気がしてて$\\\\$\n無重力なら楽だろうか$\\\\$\n宇宙まで行けたら_\n>\n> _—— [夢重力 - Nanatsukaze](https://music.163.com/#/song?id=2155399298)_\n\n在天体的随机运转中，如何找到一个没有重力的点呢？", "description": "给定一个 $n\\times n$ 的网格，其中有 $n$ 个关键点，保证每行每列各有一个关键点。保证 $n$ 是偶数。\n\n我们定义网格中的一个无重力区域为网格的连续的 $\\dfrac{n}{2}$ 行和连续的 $\\dfrac{n}{2}$ 列构成的大小为 $\\dfrac{n}{2}\\times \\dfrac{n}{2}$ 的子正方形，使得其中不包含任意关键点。\n\n定义 $f(i,j)$ 为交换网格的第 $i$ 行和第 $j$ 行后，不同的无重力区域个数。请对于所有可能的交换求 $f(i,j)$ 的和，即你需要求：\n\n$$\\sum_{1\\leq i<j\\leq n}f(i,j)$$\n\n注意求 $f$ 并不会真正在网格中执行交换，整个过程中不会对网格进行任何修改。", "inputFormat": "第一行一个整数表示 $n$。保证 $n$ 是偶数。\n\n接下来一行 $n$ 个空格分隔的整数 $p_1,p_2,\\dots,p_n$，表示 $n$ 个关键点的位置分别是 $(1,p_1),(2,p_2),\\dots,(n,p_n)$。保证 $p$ 是一个排列。", "outputFormat": "一行一个整数表示答案。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/49w2x0r4.png)\n\n上图中，左上角对应原网格。灰色的部分表示关键点。\n\n下面的 $6$ 个网格分别对应所有可能的交换产生的网格（依次为交换 $(1,2),(1,3),(1,4),(2,3),(2,4),(3,4)$），并使用红色和蓝色标出存在的无重力区域（紫色的位置表示两个无重力区域的交）。不难看出答案为 $2+2+0+0+2+2=8$。\n\n**【数据范围】**\n\n对于所有数据，保证 $2\\leq n\\leq 2\\times 10^5$ 且 $n$ 是偶数，保证 $p$ 是一个排列。\n\n**捆绑测试**，共 4 个 Subtask，具体限制如下所示：\n\n- Subtask 1（12 pts）：$n\\leq 10$；\n- Subtask 2（19 pts）：$n\\leq 200$；\n- Subtask 3（34 pts）：$n\\leq 2000$；\n- Subtask 4（35 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11159", "type": "P", "difficulty": 5, "samples": [["5\n1 1 1 4 4", "2"], ["16\n1 2 1 4 1 4 1 4 9 1 1 12 1 1 12 1", "7181107"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["组合数学", "梦熊比赛"], "title": "【MX-X6-T5】 再生", "background": "原题链接：<https://oier.team/problems/X6F>。\n\n---\n\n> _このまま$\\\\$\nらったった$\\\\$\n音に乗って$\\\\$\n今きっと世界で僕だけだ$\\\\$\n後ろ向きな歌を聴いて$\\\\$\n少しだけ$\\\\$\n前向きに生きていく_\n>\n>_—— [再生 - Nanatsukaze](https://music.163.com/#/song?id=2133659925)_\n\n破碎的点依照破碎的规则进行重组，如此再生的一个结构将会是什么样的呢？", "description": "现有一棵 $n$ 个点的有标号有根树，给定其长链剖分得到的 top 数组，请你输出有多少种不同的树可以在长链剖分之后得到该 top 数组。答案对 $20051131$（质数）取模。\n\n具体来说，对于一棵树 $T$，对所有点 $u$ 定义其树高 $h_u$：\n\n- 如果 $u$ 是叶子，则 $h_u=1$。\n- 否则设 $u$ 的孩子集合为 $S_u$，则 $h_u=\\max\\limits_{v\\in S_u}h_v + 1$。\n\n给定数组 $t_{1\\cdots n}$，你需要计算有多少种树满足：\n\n- 对于根节点 $r$，满足 $t_r=r$。\n- 对于每一个不是叶子的节点 $u$，存在恰好一个孩子 $v$ 满足 $h_v+1=h_u$ 并且 $t_v=t_u$，其他孩子满足 $t_v=v$。\n\n模 $20051131$（质数）。\n\n两棵树不同当且仅当它们的根不同或它们的边集不同。\n\n**保证答案不为 $\\bf 0$，但是不保证答案在模意义下不为 $\\bf 0$。**", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行，$n$ 个空格分隔的正整数 $t_{1\\cdots n}$，表示 top 数组。", "outputFormat": "一行一个整数表示答案对 $20051131$ 取模的值。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7np2ikvh.png)\n\n仅有图中的两种树满足条件。\n\n**【数据范围】**\n\n对于所有数据，保证 $1\\leq n\\leq 5\\times 10^5$，$1\\leq t_i\\leq i$，保证取模前答案不为 $0$。\n\n**捆绑测试**，共 5 个 Subtask，具体限制如下所示：\n\n- Subtask 1（11 pts）：$t_i=1$。\n- Subtask 2（24 pts）：$n\\leq 5$。\n- Subtask 3（17 pts）：$n\\leq 16$。\n- Subtask 4（22 pts）：$n\\leq 2\\times 10^3$。\n- Subtask 5（26 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T5】 再生", "background": "原题链接：<https://oier.team/problems/X6F>。\n\n---\n\n> _このまま$\\\\$\nらったった$\\\\$\n音に乗って$\\\\$\n今きっと世界で僕だけだ$\\\\$\n後ろ向きな歌を聴いて$\\\\$\n少しだけ$\\\\$\n前向きに生きていく_\n>\n>_—— [再生 - Nanatsukaze](https://music.163.com/#/song?id=2133659925)_\n\n破碎的点依照破碎的规则进行重组，如此再生的一个结构将会是什么样的呢？", "description": "现有一棵 $n$ 个点的有标号有根树，给定其长链剖分得到的 top 数组，请你输出有多少种不同的树可以在长链剖分之后得到该 top 数组。答案对 $20051131$（质数）取模。\n\n具体来说，对于一棵树 $T$，对所有点 $u$ 定义其树高 $h_u$：\n\n- 如果 $u$ 是叶子，则 $h_u=1$。\n- 否则设 $u$ 的孩子集合为 $S_u$，则 $h_u=\\max\\limits_{v\\in S_u}h_v + 1$。\n\n给定数组 $t_{1\\cdots n}$，你需要计算有多少种树满足：\n\n- 对于根节点 $r$，满足 $t_r=r$。\n- 对于每一个不是叶子的节点 $u$，存在恰好一个孩子 $v$ 满足 $h_v+1=h_u$ 并且 $t_v=t_u$，其他孩子满足 $t_v=v$。\n\n模 $20051131$（质数）。\n\n两棵树不同当且仅当它们的根不同或它们的边集不同。\n\n**保证答案不为 $\\bf 0$，但是不保证答案在模意义下不为 $\\bf 0$。**", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行，$n$ 个空格分隔的正整数 $t_{1\\cdots n}$，表示 top 数组。", "outputFormat": "一行一个整数表示答案对 $20051131$ 取模的值。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7np2ikvh.png)\n\n仅有图中的两种树满足条件。\n\n**【数据范围】**\n\n对于所有数据，保证 $1\\leq n\\leq 5\\times 10^5$，$1\\leq t_i\\leq i$，保证取模前答案不为 $0$。\n\n**捆绑测试**，共 5 个 Subtask，具体限制如下所示：\n\n- Subtask 1（11 pts）：$t_i=1$。\n- Subtask 2（24 pts）：$n\\leq 5$。\n- Subtask 3（17 pts）：$n\\leq 16$。\n- Subtask 4（22 pts）：$n\\leq 2\\times 10^3$。\n- Subtask 5（26 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11160", "type": "P", "difficulty": 6, "samples": [["11\n1 1\n1 2\n1 2\n1 3\n1 4\n4 10\n3 2 1 2\n2 4\n4 16\n2 4\n4 16", "8\n4\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "字典树 Trie", "梦熊比赛"], "title": "【MX-X6-T6】機械生命体", "background": "原题链接：<https://oier.team/problems/X6G>。\n\n---\n\n> _許してよ、もう$\\\\$\n分かってよ$\\\\$\n此処の正体を$\\\\$\n僕ですら僕を$\\\\$\n愛せないんだって$\\\\$\n感情を持った代償をくれよ$\\\\$\n狂っている_\n>\n> _—— [機械生命体 - Nanatsukaze](https://music.163.com/#/song?id=2627128854)_\n\n二进制的运算和记忆，能够在机械生命体中还原出人类的情感吗？", "description": "维护一个**可重集** $S$，初始为空。支持如下操作：\n\n- `1 x`，你需要在 $S$ 中加入一个数 $x$。\n- `2 x`，你需要在 $S$ 中删除一个数 $x$。保证此时 $S$ 中存在至少一个 $x$。如果存在多个 $x$，则仅删除一个。\n- `3 x k v`，你需要对 $S$ 中所有满足 $\\operatorname{lowbit}(x\\oplus y)\\geq 2^k$ 的 $y$ 增加 $v$ 并对 $2^{32}$ 取模。\n- `4 x`，你需要求出 $\\max\\limits_{y\\in S} \\operatorname{lowbit}(x\\oplus y)$。保证此时 $S$ 不为空。\n\n其中 $\\operatorname{lowbit}(x)$ 表示最大的整数 $k$，使得 $k$ 是 $2$ 的整数次幂并且整除 $x$。$\\oplus$ 代表[按位异或](https://baike.baidu.com/item/%E5%BC%82%E6%88%96/10993677)。\n\n**特殊的，我们在本题定义 $\\boldsymbol{\\textbf{lowbit}(0)=2^{32}}$。**", "inputFormat": "第一行一个整数 $q$，代表询问数量。\n\n接下来 $q$ 行，每行首先输入一个整数 $opt$ 表示操作类型；如果 $opt=3$，则接下来依次输入三个整数 $x,k,v$，否则接下来输入一个整数 $x$。", "outputFormat": "对每一次 `4` 操作，输出一个整数代表答案。", "hint": "**【样例解释】**\n\n第 $6$ 次操作时，集合为 $\\{1,2,2,3,4\\}$，查询 $10$ 时，$\\operatorname{lowbit}(10\\oplus 2)=\\operatorname{lowbit}(8)=8$ 为最大值。\n\n第 $7$ 次操作后，所有 $\\operatorname{lowbit}(x\\oplus 2)\\geq 2^1$ 的数增加 $2$，集合中满足条件的数有 $2,2,4$，于是集合变为 $\\{1,3,4,4,6\\}$。\n\n第 $8$ 次操作删去一个 $4$，集合变为 $\\{1,3,4,6\\}$。\n\n第 $9$ 次操作查询 $16$，$\\operatorname{lowbit}(16\\oplus 4)=\\operatorname{lowbit}(20)=4$ 为最大值。\n\n第 $10$ 次操作再次删去一个 $4$，集合变为 $\\{1,3,6\\}$。\n\n第 $11$ 次操作查询 $16$，$\\operatorname{lowbit}(16\\oplus 6)=\\operatorname{lowbit}(22)=2$ 为最大值。\n\n**【数据范围】**\n\n对于所有数据，$1\\leq q\\leq 5\\times 10^5$，$0\\leq x,y,v\\leq 2^{32}-1$，$0\\leq k\\leq 32$。\n\n**捆绑测试**，共 5 个 Subtask，具体限制如下所示：\n\n- Subtask 1（7 pts）：$q\\leq 10^3$。\n- Subtask 2（16 pts）：不存在 3 操作。\n- Subtask 3（21 pts）：对于 3 操作，$k=0$。\n- Subtask 4（28 pts）：对于 3 操作，$v=1$。\n- Subtask 5（28 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T6】機械生命体", "background": "原题链接：<https://oier.team/problems/X6G>。\n\n---\n\n> _許してよ、もう$\\\\$\n分かってよ$\\\\$\n此処の正体を$\\\\$\n僕ですら僕を$\\\\$\n愛せないんだって$\\\\$\n感情を持った代償をくれよ$\\\\$\n狂っている_\n>\n> _—— [機械生命体 - Nanatsukaze](https://music.163.com/#/song?id=2627128854)_\n\n二进制的运算和记忆，能够在机械生命体中还原出人类的情感吗？", "description": "维护一个**可重集** $S$，初始为空。支持如下操作：\n\n- `1 x`，你需要在 $S$ 中加入一个数 $x$。\n- `2 x`，你需要在 $S$ 中删除一个数 $x$。保证此时 $S$ 中存在至少一个 $x$。如果存在多个 $x$，则仅删除一个。\n- `3 x k v`，你需要对 $S$ 中所有满足 $\\operatorname{lowbit}(x\\oplus y)\\geq 2^k$ 的 $y$ 增加 $v$ 并对 $2^{32}$ 取模。\n- `4 x`，你需要求出 $\\max\\limits_{y\\in S} \\operatorname{lowbit}(x\\oplus y)$。保证此时 $S$ 不为空。\n\n其中 $\\operatorname{lowbit}(x)$ 表示最大的整数 $k$，使得 $k$ 是 $2$ 的整数次幂并且整除 $x$。$\\oplus$ 代表[按位异或](https://baike.baidu.com/item/%E5%BC%82%E6%88%96/10993677)。\n\n**特殊的，我们在本题定义 $\\boldsymbol{\\textbf{lowbit}(0)=2^{32}}$。**", "inputFormat": "第一行一个整数 $q$，代表询问数量。\n\n接下来 $q$ 行，每行首先输入一个整数 $opt$ 表示操作类型；如果 $opt=3$，则接下来依次输入三个整数 $x,k,v$，否则接下来输入一个整数 $x$。", "outputFormat": "对每一次 `4` 操作，输出一个整数代表答案。", "hint": "**【样例解释】**\n\n第 $6$ 次操作时，集合为 $\\{1,2,2,3,4\\}$，查询 $10$ 时，$\\operatorname{lowbit}(10\\oplus 2)=\\operatorname{lowbit}(8)=8$ 为最大值。\n\n第 $7$ 次操作后，所有 $\\operatorname{lowbit}(x\\oplus 2)\\geq 2^1$ 的数增加 $2$，集合中满足条件的数有 $2,2,4$，于是集合变为 $\\{1,3,4,4,6\\}$。\n\n第 $8$ 次操作删去一个 $4$，集合变为 $\\{1,3,4,6\\}$。\n\n第 $9$ 次操作查询 $16$，$\\operatorname{lowbit}(16\\oplus 4)=\\operatorname{lowbit}(20)=4$ 为最大值。\n\n第 $10$ 次操作再次删去一个 $4$，集合变为 $\\{1,3,6\\}$。\n\n第 $11$ 次操作查询 $16$，$\\operatorname{lowbit}(16\\oplus 6)=\\operatorname{lowbit}(22)=2$ 为最大值。\n\n**【数据范围】**\n\n对于所有数据，$1\\leq q\\leq 5\\times 10^5$，$0\\leq x,y,v\\leq 2^{32}-1$，$0\\leq k\\leq 32$。\n\n**捆绑测试**，共 5 个 Subtask，具体限制如下所示：\n\n- Subtask 1（7 pts）：$q\\leq 10^3$。\n- Subtask 2（16 pts）：不存在 3 操作。\n- Subtask 3（21 pts）：对于 3 操作，$k=0$。\n- Subtask 4（28 pts）：对于 3 操作，$v=1$。\n- Subtask 5（28 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11161", "type": "P", "difficulty": 7, "samples": [["5 3\n1 2 1\n2 3 1\n3 4 1\n4 5 1\n1 4 3 5 1\n2 1 5 1\n1 1 1 3 100", "1\n1\n3"], ["6 12\n3 5 18\n3 1 8\n5 6 3\n6 4 10\n6 2 8\n1 4 3 4 10\n1 5 6 2 5\n2 2 5 1\n1 7 3 2 19\n2 4 6 1\n1 3 5 6 20\n2 3 4 1\n1 9 5 6 16\n2 3 1 32\n2 3 4 30\n2 3 5 22\n2 3 2 21", "0\n0\n0\n8\n8\n8\n8\n8\n12\n19\n19\n40"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态树 LCT", "梦熊比赛"], "title": "【MX-X6-T7】夏が終わる", "background": "原题链接：<https://oier.team/problems/X6H>。\n\n---\n\n> _夏の終わりを知って$\\\\$\nラムネの雫に映る僕達は$\\\\$\n見失いそうな$\\\\$\n茜色の頬を追いかけて$\\\\$\n来年もまた此処に来るんだ_\n>\n>_—— [夏が終わる - Nanatsukaze](https://music.163.com/#/song?id=2614276904)_\n\n一年时间，走一个环，再次回到原点。\n\n在这个世界不间断的变化中，还有机会再遇到你吗？选择一条最优的路径时，又有多大的机会呢？", "description": "给定一棵 $n$ 个点的树 $T$，边带权。定义无向完全图 $G(T)$：\n\n- 包含 $n$ 个点。\n- 如果 $T$ 中包含边 $u,v$，则 $G$ 上 $u,v$ 边的权值为这条边的权值；否则为 $0$。\n\n记 $w(T)$ 为 $G(T)$ 的权值最小的哈密顿回路的权值。\n\n给定 $q$ 次修改操作，分为两种：\n\n- 在 $T$ 上删去一条边再加上一条边，**保证每次操作后仍然是一棵树**；\n- 给定 $T$ 上的一条路径，给路径上的每一条边的边权增加一个值。\n\n你需要在每次操作之后计算 $w(T)$。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来 $n-1$ 行每行三个正整数 $u,v,w$ 表示树上的一条边，边按照输入顺序编号为 $1\\sim n-1$。\n\n接下来 $q$ 行每行 $4$ 或 $5$ 个整数，第一个整数表示操作编号 $opt$：\n\n- 如果 $opt=1$，则表示删边再加边操作，接下来 $4$ 个整数依次为 $i,u,v,w$：$i$ 表示这一次操作删去的边的编号；$u,v,w$ 表示新加的边。这些新增的边按照操作顺序从 $n$ 开始依次向上编号。\n- 如果 $opt=2$，则表示路径加操作，接下来 $3$ 个整数 $u,v,w$：表示给树上 $u,v$ 之间的简单路径上的每一条边的边权增加 $w$。", "outputFormat": "$q$ 行每行一个整数表示操作后的 $w(T)$。", "hint": "**【样例解释 #1】**\n\n第一次操作后，$G(T)$ 的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0yznosjr.png)\n\n其中树边用红色标出，最优的哈密顿回路之一为 $1-5-4-2-3-1$。\n\n**【数据范围】**\n\n对于所有数据，保证 $5\\leq n\\leq 1.5\\times 10^5$，$1\\leq q\\leq 3\\times 10^5$，$1\\leq u,v\\leq n$，$1\\leq w\\leq 2\\times 10^{11}$，保证任意时刻边权不超过 $4\\times 10^{11}$，保证不会重复删除已经删除的边。\n\n**捆绑测试**，共 5 个 Subtask，具体限制如下所示：\n\n- Subtask 1（6 pts）：$n\\leq 10$，$q\\leq 500$；\n- Subtask 2（27 pts）：$n,q\\leq 2000$；\n- Subtask 3（15 pts）：所有答案均 $\\geq 1$；\n- Subtask 4（26 pts）：$n\\leq 7.5\\times 10^4$，$q\\leq 1.5\\times 10^5$；\n- Subtask 5（26 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T7】夏が終わる", "background": "原题链接：<https://oier.team/problems/X6H>。\n\n---\n\n> _夏の終わりを知って$\\\\$\nラムネの雫に映る僕達は$\\\\$\n見失いそうな$\\\\$\n茜色の頬を追いかけて$\\\\$\n来年もまた此処に来るんだ_\n>\n>_—— [夏が終わる - Nanatsukaze](https://music.163.com/#/song?id=2614276904)_\n\n一年时间，走一个环，再次回到原点。\n\n在这个世界不间断的变化中，还有机会再遇到你吗？选择一条最优的路径时，又有多大的机会呢？", "description": "给定一棵 $n$ 个点的树 $T$，边带权。定义无向完全图 $G(T)$：\n\n- 包含 $n$ 个点。\n- 如果 $T$ 中包含边 $u,v$，则 $G$ 上 $u,v$ 边的权值为这条边的权值；否则为 $0$。\n\n记 $w(T)$ 为 $G(T)$ 的权值最小的哈密顿回路的权值。\n\n给定 $q$ 次修改操作，分为两种：\n\n- 在 $T$ 上删去一条边再加上一条边，**保证每次操作后仍然是一棵树**；\n- 给定 $T$ 上的一条路径，给路径上的每一条边的边权增加一个值。\n\n你需要在每次操作之后计算 $w(T)$。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来 $n-1$ 行每行三个正整数 $u,v,w$ 表示树上的一条边，边按照输入顺序编号为 $1\\sim n-1$。\n\n接下来 $q$ 行每行 $4$ 或 $5$ 个整数，第一个整数表示操作编号 $opt$：\n\n- 如果 $opt=1$，则表示删边再加边操作，接下来 $4$ 个整数依次为 $i,u,v,w$：$i$ 表示这一次操作删去的边的编号；$u,v,w$ 表示新加的边。这些新增的边按照操作顺序从 $n$ 开始依次向上编号。\n- 如果 $opt=2$，则表示路径加操作，接下来 $3$ 个整数 $u,v,w$：表示给树上 $u,v$ 之间的简单路径上的每一条边的边权增加 $w$。", "outputFormat": "$q$ 行每行一个整数表示操作后的 $w(T)$。", "hint": "**【样例解释 #1】**\n\n第一次操作后，$G(T)$ 的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0yznosjr.png)\n\n其中树边用红色标出，最优的哈密顿回路之一为 $1-5-4-2-3-1$。\n\n**【数据范围】**\n\n对于所有数据，保证 $5\\leq n\\leq 1.5\\times 10^5$，$1\\leq q\\leq 3\\times 10^5$，$1\\leq u,v\\leq n$，$1\\leq w\\leq 2\\times 10^{11}$，保证任意时刻边权不超过 $4\\times 10^{11}$，保证不会重复删除已经删除的边。\n\n**捆绑测试**，共 5 个 Subtask，具体限制如下所示：\n\n- Subtask 1（6 pts）：$n\\leq 10$，$q\\leq 500$；\n- Subtask 2（27 pts）：$n,q\\leq 2000$；\n- Subtask 3（15 pts）：所有答案均 $\\geq 1$；\n- Subtask 4（26 pts）：$n\\leq 7.5\\times 10^4$，$q\\leq 1.5\\times 10^5$；\n- Subtask 5（26 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11162", "type": "P", "difficulty": 5, "samples": [["5\n0 1 1 3\n0 1 1 1 1", "-1 1 -1 -1 3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2023", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2023] Car Race", "background": "", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day1 T1「[Car Race](https://boi2023.zotks.si/wp-content/uploads/day_1/d1_car_race/en_EN.pdf)」**\n\n为了吸引更多的游客和资金到曾经骄傲但现在几乎被废弃的马里博尔工业区，这座城市在前 Metalna 工厂的地点建了一条赛道（Metalna 工厂是 1990 年代初被迫关闭的多家马里博尔大型企业之一）。赛道的形状是一棵有 $n$ 个顶点的有根树。树的顶点用整数 $0,1, \\ldots, n-1$ 编号，根的编号是 $0$。\n\n比赛开始了！最初，有些顶点上有赛车。每秒，每辆赛车都向着根的方向移动到相邻的顶点。在任何时刻，如果两辆或更多的赛车同时在一个编号大于 $0$ 的顶点上，它们就会相撞，不能再参加比赛。根上可以在任何时刻容纳任意数量的赛车。\n\n对于每个顶点 $v$，输出一个整数 $c_{v}$，它的定义如下：\n\n- 如果在比赛开始时顶点 $v$ 上没有赛车，$c_{v}$ 是 $-1$。\n- 否则，如果从顶点 $v$ 出发的赛车在到达根的途中相撞，那么 $c_{v}$ 是 $-1$。\n- 否则，$c_{v}$ 是从顶点 $v$ 出发的赛车到达根的时间。", "inputFormat": "第一行包含一个整数 $n$，表示树的顶点数。\n\n第二行包含 $n-1$ 个整数 $p_{1}, p_{2}, \\ldots, p_{n-1}$。$p_{i}\\ (1\\leq i\\leq n-1)$ 表示顶点 $i$ 的父亲，满足 $0 \\leq p_{i}<i$。\n\n第三行包含 $n$ 个整数 $a_{0}, a_{1}, \\ldots, a_{n-1}$。如果在比赛开始时顶点 $i$ 上有赛车 $a_{i}=1$；否则 $a_{i}=0$。", "outputFormat": "输出一行包含 $n$ 个整数 $c_{0}, c_{1}, \\ldots, c_{n-1}$，整数之间用一个空格分隔。", "hint": "### 样例解释\n\n顶点 $0$（根）在比赛开始时没有赛车。从顶点 $1$ 出发的赛车到达根需要 $1$ 秒，从顶点 $4$ 出发的赛车需要 $3$ 秒。从顶点 2 和 $3$ 出发的赛车在到达根的途中在顶点 $1$ 相撞。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq n \\leq 10^{6}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 |  附加限制  | 分值 |\n| :--: | :--: | :--: |\n| $1$ | $n \\leq 3$ | $3$ |\n| $2$ | $p_{i}=i-1\\ (1\\leq i\\leq n-1)$ | $5$ |\n| $3$ | $n \\leq 500$ | $8$ |\n| $4$ | $n \\leq 3000$ | $9$ |\n| $5$ | $n \\leq 10^{5}$ | $10$ |\n| $6$ | $p_{i}=\\frac{i-1}{2}$ | $9$ |\n| $7$ | $n \\leq 2 \\cdot 10^{5}$ | $14$ |\n| $8$ | 每个顶点最多有 $3$ 个相邻的点 | $19$ |\n| $9$ | 无附加限制 | $23$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2023] Car Race", "background": "", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day1 T1「[Car Race](https://boi2023.zotks.si/wp-content/uploads/day_1/d1_car_race/en_EN.pdf)」**\n\n为了吸引更多的游客和资金到曾经骄傲但现在几乎被废弃的马里博尔工业区，这座城市在前 Metalna 工厂的地点建了一条赛道（Metalna 工厂是 1990 年代初被迫关闭的多家马里博尔大型企业之一）。赛道的形状是一棵有 $n$ 个顶点的有根树。树的顶点用整数 $0,1, \\ldots, n-1$ 编号，根的编号是 $0$。\n\n比赛开始了！最初，有些顶点上有赛车。每秒，每辆赛车都向着根的方向移动到相邻的顶点。在任何时刻，如果两辆或更多的赛车同时在一个编号大于 $0$ 的顶点上，它们就会相撞，不能再参加比赛。根上可以在任何时刻容纳任意数量的赛车。\n\n对于每个顶点 $v$，输出一个整数 $c_{v}$，它的定义如下：\n\n- 如果在比赛开始时顶点 $v$ 上没有赛车，$c_{v}$ 是 $-1$。\n- 否则，如果从顶点 $v$ 出发的赛车在到达根的途中相撞，那么 $c_{v}$ 是 $-1$。\n- 否则，$c_{v}$ 是从顶点 $v$ 出发的赛车到达根的时间。", "inputFormat": "第一行包含一个整数 $n$，表示树的顶点数。\n\n第二行包含 $n-1$ 个整数 $p_{1}, p_{2}, \\ldots, p_{n-1}$。$p_{i}\\ (1\\leq i\\leq n-1)$ 表示顶点 $i$ 的父亲，满足 $0 \\leq p_{i}<i$。\n\n第三行包含 $n$ 个整数 $a_{0}, a_{1}, \\ldots, a_{n-1}$。如果在比赛开始时顶点 $i$ 上有赛车 $a_{i}=1$；否则 $a_{i}=0$。", "outputFormat": "输出一行包含 $n$ 个整数 $c_{0}, c_{1}, \\ldots, c_{n-1}$，整数之间用一个空格分隔。", "hint": "### 样例解释\n\n顶点 $0$（根）在比赛开始时没有赛车。从顶点 $1$ 出发的赛车到达根需要 $1$ 秒，从顶点 $4$ 出发的赛车需要 $3$ 秒。从顶点 2 和 $3$ 出发的赛车在到达根的途中在顶点 $1$ 相撞。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq n \\leq 10^{6}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 |  附加限制  | 分值 |\n| :--: | :--: | :--: |\n| $1$ | $n \\leq 3$ | $3$ |\n| $2$ | $p_{i}=i-1\\ (1\\leq i\\leq n-1)$ | $5$ |\n| $3$ | $n \\leq 500$ | $8$ |\n| $4$ | $n \\leq 3000$ | $9$ |\n| $5$ | $n \\leq 10^{5}$ | $10$ |\n| $6$ | $p_{i}=\\frac{i-1}{2}$ | $9$ |\n| $7$ | $n \\leq 2 \\cdot 10^{5}$ | $14$ |\n| $8$ | 每个顶点最多有 $3$ 个相邻的点 | $19$ |\n| $9$ | 无附加限制 | $23$ |", "locale": "zh-CN"}}}
{"pid": "P11163", "type": "P", "difficulty": 6, "samples": [["3 5\nS 2 W 2\nW 1 S 3\nW 4 W 3\n3 6 1 1\n2 2\n2 1\n1 3 2\n2 1\n2 3", "6\n12\n16\n4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2023", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2023] Weights", "background": "", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day1 T2「[Weights](https://boi2023.zotks.si/wp-content/uploads/day_1/d1_weights/en_EN.pdf)」**\n\n给你 $N$ 个天平，每个天平有两个质量可以忽略不计的盘子。天平用从 $1$ 到 $N$ 的整数编号。每个盘子上要么放着另一个天平，要么放着一个质量不可忽略的砝码。编号为 $1$ 的天平放在地上，其他的天平都放在某个天平的盘子上。一共有 $N+1$ 个砝码。砝码用 $1$ 到 $N+1$ 的整数编号，每个砝码的质量用 $N+1$ 个整数 $w_{1}, w_{2} \\cdots, w_{N+1}$ 表示。\n\n下图给出了一个由三个天平和四个砝码组成的例子。正体字的数字表示天平和砝码的编号，斜体字的数字表示砝码的质量。例如，编号为 $2$ 的天平放在编号为 $1$ 的天平的左盘上，编号为 $2$ 质量为 $6$ 的砝码放在编号为 $1$ 的天平的右盘上。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6sw0vac1.png)\n\n如果一个天平的左盘和右盘的总质量相等，我们说它是平衡的。如果一个天平是平衡的，并且它的两个盘子上要么都是超平衡的天平，要么都是砝码，我们说它是超平衡的。\n\n在上图中，只有天平 $3$ 是平衡的（也是超平衡的），但是如果我们把砝码 $3$ 和 $4$ 的质量都增加到 $1.5$，那么三个天平都会变成超平衡的。然而，如果我们把砝码 $1$ 的质量增加到 $4$，天平 $1$ 会变成平衡的但不是超平衡的，因为天平 $2$ 仍然不平衡。\n\n现在我们要处理 $Q$ 个两种类型的操作：\n\n- $1\\,k\\,w$ : 把砝码 $k$ 的质量改成整数 $w$。\n- $2\\,s$ : 假设我们想让天平 $s$ 变成超平衡的。我们可以用魔法把一些砝码变得更重！注意新的质量不一定是整数。要让天平 $s$ 变成超平衡的，天平 $s$ 上的最小总质量是多少？由于这个数可能很大，输出它对 $998244353$ 取模的结果。可以证明在给定的限制下，结果总是一个整数。\n\n注意，类型 $1$ 的操作会改变砝码的质量，而类型 $2$ 的操作不会。", "inputFormat": "第一行包含两个整数 $N$ 和 $Q$。\n\n接下来的 $N$ 行中的第 $i\\ (1\\leq i\\leq N)$ 行包含两对字符和数字，每对描述了第 $i$ 个天平的一个盘子：字符是 `S`（天平）或 `W`（砝码），表示盘子上的物体的类型，整数是相应物体的编号。保证一个天平永远不会放在一个编号更大的天平上。\n\n接下来的一行包含 $N+1$ 个整数 $w_{1}, w_{2}, \\cdots, w_{N+1}$，表示砝码的质量。\n\n最后的 $Q$ 行表示操作。每行要么是形如 $1\\,k\\,w$ 的，要么是形如 $2\\,s$ 的，如问题描述中所述。", "outputFormat": "对于每个类型 $2$ 的操作，在一行上输出相应的最小质量对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n为了让天平 $2$ 变成超平衡的，我们把砝码 $3$ 和 $4$ 的质量都增加到 $1.5$。这样，天平 $2$ 和 $3$ 都会变成平衡的，因此 $2$ 也就是超平衡的。天平 $2$ 上的总质量是 $3+1.5+1.5=6$。当我们这样做的时候，天平 $1$ 也会变成平衡的，所以它也是超平衡的，它的总质量是 $6+3+1.5+1.5=12$。当我们把砝码 $3$ 的质量改成 $2$ 的时候，这种方法就不行了。因此，为了让天平 $1$ 变成超平衡的，我们可以把砝码 $1$ 的质量改成 $4$，砝码 $2$ 的质量改成 $8$，砝码 $4$ 的质量改成 $2$。这样，天平 $1$ 上的总质量就是 $8+4+2+2=16$。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 2 \\cdot 10^{5}$\n- $1 \\leq Q \\leq 2 \\cdot 10^{5}$\n- $1 \\leq w_{i} \\leq 10^{9}$\n- 对于每个类型 $1$ 的操作：$1 \\leq k \\leq N+1$\n- 对于每个类型 $1$ 的操作：$1 \\leq w \\leq 10^{9}$\n- 对于每个类型 $2$ 的操作：$1 \\leq s \\leq N$\n\n详细子任务附加限制及分值如下表所示。令砝码的深度表示它直接或间接所在的盘子的数量。\n\n| 子任务编号 |  附加限制  | 分值 |\n| :--: | :--: | :--: |\n| $1$ | 每个天平的至少一个盘子上有砝码 | $9$ |\n| $2$ | 每个砝码的深度相同 | $8$ |\n| $3$ | 每个砝码的深度小于 $30$，且 $N, Q \\leq 5000$ | $24$ |\n| $4$ | 每个砝码的深度小于 $30$ | $14$ |\n| $5$ | $N, Q \\leq 5000$ | $14$ |\n| $6$ | 无附加限制 | $31$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2023] Weights", "background": "", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day1 T2「[Weights](https://boi2023.zotks.si/wp-content/uploads/day_1/d1_weights/en_EN.pdf)」**\n\n给你 $N$ 个天平，每个天平有两个质量可以忽略不计的盘子。天平用从 $1$ 到 $N$ 的整数编号。每个盘子上要么放着另一个天平，要么放着一个质量不可忽略的砝码。编号为 $1$ 的天平放在地上，其他的天平都放在某个天平的盘子上。一共有 $N+1$ 个砝码。砝码用 $1$ 到 $N+1$ 的整数编号，每个砝码的质量用 $N+1$ 个整数 $w_{1}, w_{2} \\cdots, w_{N+1}$ 表示。\n\n下图给出了一个由三个天平和四个砝码组成的例子。正体字的数字表示天平和砝码的编号，斜体字的数字表示砝码的质量。例如，编号为 $2$ 的天平放在编号为 $1$ 的天平的左盘上，编号为 $2$ 质量为 $6$ 的砝码放在编号为 $1$ 的天平的右盘上。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6sw0vac1.png)\n\n如果一个天平的左盘和右盘的总质量相等，我们说它是平衡的。如果一个天平是平衡的，并且它的两个盘子上要么都是超平衡的天平，要么都是砝码，我们说它是超平衡的。\n\n在上图中，只有天平 $3$ 是平衡的（也是超平衡的），但是如果我们把砝码 $3$ 和 $4$ 的质量都增加到 $1.5$，那么三个天平都会变成超平衡的。然而，如果我们把砝码 $1$ 的质量增加到 $4$，天平 $1$ 会变成平衡的但不是超平衡的，因为天平 $2$ 仍然不平衡。\n\n现在我们要处理 $Q$ 个两种类型的操作：\n\n- $1\\,k\\,w$ : 把砝码 $k$ 的质量改成整数 $w$。\n- $2\\,s$ : 假设我们想让天平 $s$ 变成超平衡的。我们可以用魔法把一些砝码变得更重！注意新的质量不一定是整数。要让天平 $s$ 变成超平衡的，天平 $s$ 上的最小总质量是多少？由于这个数可能很大，输出它对 $998244353$ 取模的结果。可以证明在给定的限制下，结果总是一个整数。\n\n注意，类型 $1$ 的操作会改变砝码的质量，而类型 $2$ 的操作不会。", "inputFormat": "第一行包含两个整数 $N$ 和 $Q$。\n\n接下来的 $N$ 行中的第 $i\\ (1\\leq i\\leq N)$ 行包含两对字符和数字，每对描述了第 $i$ 个天平的一个盘子：字符是 `S`（天平）或 `W`（砝码），表示盘子上的物体的类型，整数是相应物体的编号。保证一个天平永远不会放在一个编号更大的天平上。\n\n接下来的一行包含 $N+1$ 个整数 $w_{1}, w_{2}, \\cdots, w_{N+1}$，表示砝码的质量。\n\n最后的 $Q$ 行表示操作。每行要么是形如 $1\\,k\\,w$ 的，要么是形如 $2\\,s$ 的，如问题描述中所述。", "outputFormat": "对于每个类型 $2$ 的操作，在一行上输出相应的最小质量对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n为了让天平 $2$ 变成超平衡的，我们把砝码 $3$ 和 $4$ 的质量都增加到 $1.5$。这样，天平 $2$ 和 $3$ 都会变成平衡的，因此 $2$ 也就是超平衡的。天平 $2$ 上的总质量是 $3+1.5+1.5=6$。当我们这样做的时候，天平 $1$ 也会变成平衡的，所以它也是超平衡的，它的总质量是 $6+3+1.5+1.5=12$。当我们把砝码 $3$ 的质量改成 $2$ 的时候，这种方法就不行了。因此，为了让天平 $1$ 变成超平衡的，我们可以把砝码 $1$ 的质量改成 $4$，砝码 $2$ 的质量改成 $8$，砝码 $4$ 的质量改成 $2$。这样，天平 $1$ 上的总质量就是 $8+4+2+2=16$。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 2 \\cdot 10^{5}$\n- $1 \\leq Q \\leq 2 \\cdot 10^{5}$\n- $1 \\leq w_{i} \\leq 10^{9}$\n- 对于每个类型 $1$ 的操作：$1 \\leq k \\leq N+1$\n- 对于每个类型 $1$ 的操作：$1 \\leq w \\leq 10^{9}$\n- 对于每个类型 $2$ 的操作：$1 \\leq s \\leq N$\n\n详细子任务附加限制及分值如下表所示。令砝码的深度表示它直接或间接所在的盘子的数量。\n\n| 子任务编号 |  附加限制  | 分值 |\n| :--: | :--: | :--: |\n| $1$ | 每个天平的至少一个盘子上有砝码 | $9$ |\n| $2$ | 每个砝码的深度相同 | $8$ |\n| $3$ | 每个砝码的深度小于 $30$，且 $N, Q \\leq 5000$ | $24$ |\n| $4$ | 每个砝码的深度小于 $30$ | $14$ |\n| $5$ | $N, Q \\leq 5000$ | $14$ |\n| $6$ | 无附加限制 | $31$ |", "locale": "zh-CN"}}}
{"pid": "P11164", "type": "P", "difficulty": 7, "samples": [["5\n4 2 1 5 3\n4\n1 1\n2 3\n2 4\n1 3", "4\n5\n1\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2023", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2023] Permutations", "background": "", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day1 T3「[Permutations](https://boi2023.zotks.si/wp-content/uploads/day_1/d1_permutations/en_EN.pdf)」**\n\n给你一个由数字 $1,2, \\ldots, n$ 组成的排列 $p_{1}, p_{2}, \\ldots, p_{n}$。你需要回答 $q$ 个查询。\n\n第 $i\\ (1\\leq i\\leq q)$ 个查询由两个数字 $L_{i},R_{i}\\ (1 \\leq L_{i} \\leq R_{i} \\leq n)$ 表示。你需要回答满足以下条件的排列个数：\n\n- 排列的长度为 $n$；\n- 以序列 $p_{L_{i}}, p_{L_{i}+1}, \\ldots, p_{R_{i}-1}, p_{R_{i}}$ 作为开头；\n- 排列的最长递减子序列的长度至多为 $2$。\n\n由于答案可能很大，输出它们对 $10^{9}+7$ 取模的结果。\n\n对于一个序列 $a_{1}, a_{2}, \\ldots, a_{k}$，它的最长递减子序列的长度是最大的整数 $t$，使得存在 $t$ 个下标 $s_{1}, s_{2}, \\ldots, s_{t}$，满足 $1 \\leq s_{1}<s_{2}<\\ldots<s_{t} \\leq k$ 且 $a_{s_{1}}>a_{s_{2}}>\\ldots>a_{s_{t}}$。", "inputFormat": "第一行包含一个整数 $n$。\n\n第二行包含 $n$ 个整数 $p_{1}, \\ldots, p_{n}$，即区间 $[1, n]$ 中的 $n$ 个不同的整数。\n\n第三行包含一个整数 $q$。\n\n接下来的 $q$ 行每行描述了一个查询。第 $i\\ (1\\leq i\\leq q)$ 行包含两个整数字 $L_{i}$ 和 $R_{i}$。", "outputFormat": "对于每个查询输出单独的一行，表示打印排列的个数对 $10^{9}+7$ 取模的结果。", "hint": "### 样例解释\n\n对于第一个查询，考虑到有四个序列 $\\langle 1,2,3,4,5\\rangle$ 的排列以 $4$ 开始，并且它们的最长递减子序列的长度至多为 $2$。这些排列是：\n\n- $\\langle 4,1,2,3,5\\rangle$；\n- $\\langle 4,1,2,5,3\\rangle$；\n- $\\langle 4,1,5,2,3\\rangle$；\n- $\\langle 4,5,1,2,3\\rangle$。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq n \\leq 3 \\cdot 10^{5}$\n- $1 \\leq q \\leq 3 \\cdot 10^{5}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 |  附加限制  | 分值 |\n| :--: | :--: | :--: |\n| $1$ | $n \\leq 10, q \\leq 10$ | $6$ |\n| $2$ | $n \\leq 1000, q \\leq 1000$，每个查询的区间内都包含 $p_{j}=n$ | $7$ |\n| $3$ | 每个查询的区间内都包含 $p_{j}=n$ | $9$ |\n| $4$ | $n \\leq 1000, q \\leq 1000$，$p_{i}=i\\ (1\\leq i\\leq n)$，$L_{j}=1\\ (1\\leq j\\leq q)$ | $12$ |\n| $5$ |$p_{i}=i\\ (1\\leq i \\leq n)$，$L_{j}=1\\ (1\\leq j\\leq q)$ | $18$ |\n| $6$ | $n \\leq 1000, q \\leq 1000$ | $12$ |\n| $7$ | 无附加限制 | $36$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2023] Permutations", "background": "", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day1 T3「[Permutations](https://boi2023.zotks.si/wp-content/uploads/day_1/d1_permutations/en_EN.pdf)」**\n\n给你一个由数字 $1,2, \\ldots, n$ 组成的排列 $p_{1}, p_{2}, \\ldots, p_{n}$。你需要回答 $q$ 个查询。\n\n第 $i\\ (1\\leq i\\leq q)$ 个查询由两个数字 $L_{i},R_{i}\\ (1 \\leq L_{i} \\leq R_{i} \\leq n)$ 表示。你需要回答满足以下条件的排列个数：\n\n- 排列的长度为 $n$；\n- 以序列 $p_{L_{i}}, p_{L_{i}+1}, \\ldots, p_{R_{i}-1}, p_{R_{i}}$ 作为开头；\n- 排列的最长递减子序列的长度至多为 $2$。\n\n由于答案可能很大，输出它们对 $10^{9}+7$ 取模的结果。\n\n对于一个序列 $a_{1}, a_{2}, \\ldots, a_{k}$，它的最长递减子序列的长度是最大的整数 $t$，使得存在 $t$ 个下标 $s_{1}, s_{2}, \\ldots, s_{t}$，满足 $1 \\leq s_{1}<s_{2}<\\ldots<s_{t} \\leq k$ 且 $a_{s_{1}}>a_{s_{2}}>\\ldots>a_{s_{t}}$。", "inputFormat": "第一行包含一个整数 $n$。\n\n第二行包含 $n$ 个整数 $p_{1}, \\ldots, p_{n}$，即区间 $[1, n]$ 中的 $n$ 个不同的整数。\n\n第三行包含一个整数 $q$。\n\n接下来的 $q$ 行每行描述了一个查询。第 $i\\ (1\\leq i\\leq q)$ 行包含两个整数字 $L_{i}$ 和 $R_{i}$。", "outputFormat": "对于每个查询输出单独的一行，表示打印排列的个数对 $10^{9}+7$ 取模的结果。", "hint": "### 样例解释\n\n对于第一个查询，考虑到有四个序列 $\\langle 1,2,3,4,5\\rangle$ 的排列以 $4$ 开始，并且它们的最长递减子序列的长度至多为 $2$。这些排列是：\n\n- $\\langle 4,1,2,3,5\\rangle$；\n- $\\langle 4,1,2,5,3\\rangle$；\n- $\\langle 4,1,5,2,3\\rangle$；\n- $\\langle 4,5,1,2,3\\rangle$。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq n \\leq 3 \\cdot 10^{5}$\n- $1 \\leq q \\leq 3 \\cdot 10^{5}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 |  附加限制  | 分值 |\n| :--: | :--: | :--: |\n| $1$ | $n \\leq 10, q \\leq 10$ | $6$ |\n| $2$ | $n \\leq 1000, q \\leq 1000$，每个查询的区间内都包含 $p_{j}=n$ | $7$ |\n| $3$ | 每个查询的区间内都包含 $p_{j}=n$ | $9$ |\n| $4$ | $n \\leq 1000, q \\leq 1000$，$p_{i}=i\\ (1\\leq i\\leq n)$，$L_{j}=1\\ (1\\leq j\\leq q)$ | $12$ |\n| $5$ |$p_{i}=i\\ (1\\leq i \\leq n)$，$L_{j}=1\\ (1\\leq j\\leq q)$ | $18$ |\n| $6$ | $n \\leq 1000, q \\leq 1000$ | $12$ |\n| $7$ | 无附加限制 | $36$ |", "locale": "zh-CN"}}}
{"pid": "P11165", "type": "P", "difficulty": 5, "samples": [["3 3\n0 0\n7 3 4\n1 6\n2 2\n0 3", "196 61\n169 50\n81 14\n25 6"], ["4 2\n0 0 1\n6 5 6 2\n1 2\n0 3", "256 84\n144 36\n16 4"], ["7 3\n0 0 1 1 2 2\n7 6 5 7 3 4 2\n4 4\n3 3\n2 1", "900 367\n784 311\n576 223\n256 83"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["2023", "Special Judge", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2023] Super Tree", "background": "**请仔细阅读【提示说明】中的【评分方式】。**", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day2 T1「[Super Tree](https://boi2023.zotks.si/wp-content/uploads/day_2/d2_tree/en.pdf)」**\n\n给定一棵有 $n$ 个节点的有根树，节点用 $0, \\ldots, n-1$ 的编号来标识。根节点的编号为 $0$。节点 $i\\ (0\\leq i\\leq n-1)$ 被赋予一个整数 $a_{i}$。令 $f_{v}$ 为从节点 $v$ 到根节点的简单路径（包括 $x$ 和 $y$ 本身）上所有 $a_{i}$ 的**按位与**（以下用 $\\&$ 表示）的值。令树的能量为\n\n$$\n\\sum_{0 \\leq u, v<n} f_{u} \\cdot f_{v}\n$$\n\n的值，令树的超能量为（注意范围的区别）\n\n$$\n\\sum_{0 \\leq u<v<n} f_{u} \\cdot f_{v}\n$$\n\n的值。为了说明清楚，可以参考下面的样例解释。\n\n我们说一个节点 $u$ 属于另一个节点 $v$ 的子树，如果 $v$ 在从节点 $u$ 到根节点的简单路径上。注意，一个节点 $x$ 的子树包括 $x$ 本身。\n\n给定 $q$ 次更新。每次更新由两个整数 $v$ 和 $x$ 描述，要求你对节点 $v$ 的子树中的每个节点 $u$，令 $a_{u}=a_{u} \\& x$。在每次更新后，你应该输出当前树的能量和超能量。\n\n由于输出值可能很大，你只需要求出答案对 $10^{9}+7$ 取模的结果。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$。\n\n第二行包含 $n-1$ 个整数 $p_{1}, p_{2}, \\ldots, p_{n-1}$。$p_{i}\\ (0\\leq i\\leq n-1)$ 是节点 $i$ 的父节点的编号，且满足 $0 \\leq p_{i}<i$。\n\n第三行包含 $n$ 个整数 $a_{0}, a_{1}, \\ldots, a_{n-1}$。这些是赋给节点的值。\n\n接下来的 $q$ 行，每行包含两个整数 $v$（$0 \\leq v<n$）和 $x$。这些整数指定了各个更新。", "outputFormat": "输出 $q+1$ 行。每行包含两个用空格分隔的整数。第一行，输出初始树的能量和超能量对 $10^{9}+7$ 取模的结果。在剩下的 $q$ 行中，第 $i\\ (1\\leq i\\leq q)$ 行输出第 $i$ 次更新后的树的能量和超能量对 $10^{9}+7$ 取模的结果。\n\n", "hint": "### 样例 1 解释\n\n初始时，我们有\n\n$$\nf_{0}=7, f_{1}=7 \\& 3=3, f_{2}=7 \\& 4=4\n$$\n\n因此，树的能量等于\n\n$$\n\\begin{gathered}\nf_{0} \\cdot f_{0}+f_{0} \\cdot f_{1}+f_{0} \\cdot f_{2}+f_{1} \\cdot f_{0}+f_{1} \\cdot f_{1}+f_{1} \\cdot f_{2}+f_{2} \\cdot f_{0}+f_{2} \\cdot f_{1}+f_{2} \\cdot f_{2}= \\\\\n=7 \\cdot 7+7 \\cdot 3+7 \\cdot 4+3 \\cdot 7+3 \\cdot 3+3 \\cdot 4+4 \\cdot 7+4 \\cdot 3+4 \\cdot 4=196 .\n\\end{gathered}\n$$\n\n树的超能量等于\n\n$$\nf_{0} \\cdot f_{1}+f_{0} \\cdot f_{2}+f_{1} \\cdot f_{2}=7 \\cdot 3+7 \\cdot 4+3 \\cdot 4=61 \\text {. }\n$$\n\n第一次更新后：\n\n$$\n\\begin{gathered}\na_{0}=7, a_{1}=3 \\& 6=2, a_{2}=4 ; \\\\\nf_{0}=7, f_{1}=2, f_{2}=4 .\n\\end{gathered}\n$$\n\n第二次更新后：\n\n$$\n\\begin{gathered}\na_{0}=7, a_{1}=2, a_{2}=4 \\& 2=0 \\\\\nf_{0}=7, f_{1}=2, f_{2}=0\n\\end{gathered}\n$$\n\n第三次更新后：\n\n$$\n\\begin{gathered}\na_{0}=7 \\& 3=3, a_{1}=2 \\& 3=2, a_{2}=0 \\& 3=0 \\\\\nf_{0}=3, f_{1}=2, f_{2}=0\n\\end{gathered}\n$$\n\n### 样例 2 解释\n\n初始时，我们有\n\n$$\nf_{0}=6, f_{1}=6 \\& 5=4, f_{2}=6 \\& 6=6, f_{3}=2 \\& 5 \\& 6=0\n$$\n\n第一次更新后：\n\n$$\n\\begin{gathered}\na_{0}=6, a_{1}=5 \\& 2=0, a_{2}=6, a_{3}=2 \\& 2=2 ; \\\\\nf_{0}=6, f_{1}=0, f_{2}=6, f_{3}=2 \\& 0=0\n\\end{gathered}\n$$\n\n第二次更新后：\n\n$$\n\\begin{gathered}\na_{0}=7, a_{1}=2, a_{2}=4 \\& 2=0 \\\\\nf_{0}=7, f_{1}=2, f_{2}=0\n\\end{gathered}\n$$\n\n### 评分方式\n\n对于给定的测试点，如果你的代码正确计算了所有的能量值，但是至少有一个超能量值计算错误，那么你的代码将获得该测试点 $50 \\%$ 的分数。\n\n同样地，如果你的代码正确计算了所有的超能量值，但是至少有一个能量值计算错误，那么你的代码将获得该测试点 $50 \\%$ 的分数。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq n, q \\leq 10^{6}$\n- $0 \\leq a_{i}<2^{60}\\ (0\\leq i\\leq n-1)$\n- $0 \\leq x<2^{60}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 |  附加限制  | 分值 |\n| :--: | :--: | :--: |\n| $1$ | $n=3$ | $4$ |\n| $2$ | $n, q \\leq 700$ | $7$ |\n| $3$ | $n, q \\leq 5000$ | $13$ |\n| $4$ | $n \\leq 10^{5}, p_{i}=i-1\\ (1\\leq i\\leq n-1);a_{i}, x<2^{20}\\ (0\\leq i\\leq n-1)$ | $6$ |\n| $5$ | $p_{i}=i-1\\ (1\\leq i\\leq n-1)$ | $7$ |\n| $6$ | $a_{i}, x<2^{20}\\ (0\\leq i\\leq n-1)$ | $12$ |\n| $7$ | $n \\leq 10^{5}$ | $14$ |\n| $8$ | $n \\leq 5 \\cdot 10^{5}$ | $11$ |\n| $9$ | 无附加限制 | $26$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2023] Super Tree", "background": "**请仔细阅读【提示说明】中的【评分方式】。**", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day2 T1「[Super Tree](https://boi2023.zotks.si/wp-content/uploads/day_2/d2_tree/en.pdf)」**\n\n给定一棵有 $n$ 个节点的有根树，节点用 $0, \\ldots, n-1$ 的编号来标识。根节点的编号为 $0$。节点 $i\\ (0\\leq i\\leq n-1)$ 被赋予一个整数 $a_{i}$。令 $f_{v}$ 为从节点 $v$ 到根节点的简单路径（包括 $x$ 和 $y$ 本身）上所有 $a_{i}$ 的**按位与**（以下用 $\\&$ 表示）的值。令树的能量为\n\n$$\n\\sum_{0 \\leq u, v<n} f_{u} \\cdot f_{v}\n$$\n\n的值，令树的超能量为（注意范围的区别）\n\n$$\n\\sum_{0 \\leq u<v<n} f_{u} \\cdot f_{v}\n$$\n\n的值。为了说明清楚，可以参考下面的样例解释。\n\n我们说一个节点 $u$ 属于另一个节点 $v$ 的子树，如果 $v$ 在从节点 $u$ 到根节点的简单路径上。注意，一个节点 $x$ 的子树包括 $x$ 本身。\n\n给定 $q$ 次更新。每次更新由两个整数 $v$ 和 $x$ 描述，要求你对节点 $v$ 的子树中的每个节点 $u$，令 $a_{u}=a_{u} \\& x$。在每次更新后，你应该输出当前树的能量和超能量。\n\n由于输出值可能很大，你只需要求出答案对 $10^{9}+7$ 取模的结果。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$。\n\n第二行包含 $n-1$ 个整数 $p_{1}, p_{2}, \\ldots, p_{n-1}$。$p_{i}\\ (0\\leq i\\leq n-1)$ 是节点 $i$ 的父节点的编号，且满足 $0 \\leq p_{i}<i$。\n\n第三行包含 $n$ 个整数 $a_{0}, a_{1}, \\ldots, a_{n-1}$。这些是赋给节点的值。\n\n接下来的 $q$ 行，每行包含两个整数 $v$（$0 \\leq v<n$）和 $x$。这些整数指定了各个更新。", "outputFormat": "输出 $q+1$ 行。每行包含两个用空格分隔的整数。第一行，输出初始树的能量和超能量对 $10^{9}+7$ 取模的结果。在剩下的 $q$ 行中，第 $i\\ (1\\leq i\\leq q)$ 行输出第 $i$ 次更新后的树的能量和超能量对 $10^{9}+7$ 取模的结果。\n\n", "hint": "### 样例 1 解释\n\n初始时，我们有\n\n$$\nf_{0}=7, f_{1}=7 \\& 3=3, f_{2}=7 \\& 4=4\n$$\n\n因此，树的能量等于\n\n$$\n\\begin{gathered}\nf_{0} \\cdot f_{0}+f_{0} \\cdot f_{1}+f_{0} \\cdot f_{2}+f_{1} \\cdot f_{0}+f_{1} \\cdot f_{1}+f_{1} \\cdot f_{2}+f_{2} \\cdot f_{0}+f_{2} \\cdot f_{1}+f_{2} \\cdot f_{2}= \\\\\n=7 \\cdot 7+7 \\cdot 3+7 \\cdot 4+3 \\cdot 7+3 \\cdot 3+3 \\cdot 4+4 \\cdot 7+4 \\cdot 3+4 \\cdot 4=196 .\n\\end{gathered}\n$$\n\n树的超能量等于\n\n$$\nf_{0} \\cdot f_{1}+f_{0} \\cdot f_{2}+f_{1} \\cdot f_{2}=7 \\cdot 3+7 \\cdot 4+3 \\cdot 4=61 \\text {. }\n$$\n\n第一次更新后：\n\n$$\n\\begin{gathered}\na_{0}=7, a_{1}=3 \\& 6=2, a_{2}=4 ; \\\\\nf_{0}=7, f_{1}=2, f_{2}=4 .\n\\end{gathered}\n$$\n\n第二次更新后：\n\n$$\n\\begin{gathered}\na_{0}=7, a_{1}=2, a_{2}=4 \\& 2=0 \\\\\nf_{0}=7, f_{1}=2, f_{2}=0\n\\end{gathered}\n$$\n\n第三次更新后：\n\n$$\n\\begin{gathered}\na_{0}=7 \\& 3=3, a_{1}=2 \\& 3=2, a_{2}=0 \\& 3=0 \\\\\nf_{0}=3, f_{1}=2, f_{2}=0\n\\end{gathered}\n$$\n\n### 样例 2 解释\n\n初始时，我们有\n\n$$\nf_{0}=6, f_{1}=6 \\& 5=4, f_{2}=6 \\& 6=6, f_{3}=2 \\& 5 \\& 6=0\n$$\n\n第一次更新后：\n\n$$\n\\begin{gathered}\na_{0}=6, a_{1}=5 \\& 2=0, a_{2}=6, a_{3}=2 \\& 2=2 ; \\\\\nf_{0}=6, f_{1}=0, f_{2}=6, f_{3}=2 \\& 0=0\n\\end{gathered}\n$$\n\n第二次更新后：\n\n$$\n\\begin{gathered}\na_{0}=7, a_{1}=2, a_{2}=4 \\& 2=0 \\\\\nf_{0}=7, f_{1}=2, f_{2}=0\n\\end{gathered}\n$$\n\n### 评分方式\n\n对于给定的测试点，如果你的代码正确计算了所有的能量值，但是至少有一个超能量值计算错误，那么你的代码将获得该测试点 $50 \\%$ 的分数。\n\n同样地，如果你的代码正确计算了所有的超能量值，但是至少有一个能量值计算错误，那么你的代码将获得该测试点 $50 \\%$ 的分数。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq n, q \\leq 10^{6}$\n- $0 \\leq a_{i}<2^{60}\\ (0\\leq i\\leq n-1)$\n- $0 \\leq x<2^{60}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 |  附加限制  | 分值 |\n| :--: | :--: | :--: |\n| $1$ | $n=3$ | $4$ |\n| $2$ | $n, q \\leq 700$ | $7$ |\n| $3$ | $n, q \\leq 5000$ | $13$ |\n| $4$ | $n \\leq 10^{5}, p_{i}=i-1\\ (1\\leq i\\leq n-1);a_{i}, x<2^{20}\\ (0\\leq i\\leq n-1)$ | $6$ |\n| $5$ | $p_{i}=i-1\\ (1\\leq i\\leq n-1)$ | $7$ |\n| $6$ | $a_{i}, x<2^{20}\\ (0\\leq i\\leq n-1)$ | $12$ |\n| $7$ | $n \\leq 10^{5}$ | $14$ |\n| $8$ | $n \\leq 5 \\cdot 10^{5}$ | $11$ |\n| $9$ | 无附加限制 | $26$ |", "locale": "zh-CN"}}}
{"pid": "P11166", "type": "P", "difficulty": 0, "samples": [["5 4\n8 3 4\n5 2 3\n10 9 10\n20 4 6\n12 7 9", "12"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2023", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2023] Save the Vine!", "background": "", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day2 T2「[Save the Vine!](https://boi2023.zotks.si/wp-content/uploads/day_2/d2_vine/en.pdf)」**\n\n一群又臭又丑的绿色小人准备毒死 450 年历史的葡萄藤，这是马里博尔的象征！他们正在 Kodžak 纪念碑周围聚集，制定他们的计划，准备向 Drava 河左岸的著名 Lent 街上的房子进军，那里就是那棵古老的葡萄藤生长的地方！你，强大的紫色战士，被召唤来在他们实施致命的行动之前消灭敌人！\n\n一共有 $n$ 个敌人，每个敌人都有三个属性：臭度、绿度和丑度。对于每个 $i \\in\\{1, \\ldots, n\\}$，整数 $a_{i}, b_{i}$ 和 $c_{i}$ 分别决定了第 $i$ 个敌人的臭度、绿度和丑度。而你有两个属性：力量 $X$ 和紫度 $Y$。\n\n作为一个自豪的马里博尔人，你的紫度 $Y$ 在你出生时就已经确定，永远不会改变。但是，通过击败敌人，你的力量 $X$ 会增加。特别地，当你击败敌人 $i$ 时，$X$ 会增加该敌人的丑度 $c_{i}$。你可以按任意顺序一个一个地击败敌人，但你只能在你的力量大于他的臭度（$X \\geq a_{i}$）且你的紫度大于他的绿度（$Y \\geq b_{i}$）时击败敌人 $i$。另外，你只能击败每个敌人一次。\n\n你肯定想知道，为了击败至少 $k$ 个敌人，你最初的力量和紫度（即 $X+Y$）的最小和是多少。编写一个程序来找到这个值！", "inputFormat": "第一行包含整数 $n$ 和 $k$。接下来的 $n$ 行中的第 $i\\ (1\\leq i\\leq n)$ 行包含整数 $a_{i}, b_{i}$ 和 $c_{i}$。", "outputFormat": "输出至少击败 $k$ 个敌人所需的 $X+Y$ 的最小初始值。", "hint": "### 样例解释\n\n为了击败至少四个敌人，只需要从 $X=5$ 和 $Y=7$ 开始。首先，你击败敌人 $2$，将你的 $X$ 提升到 $8$。现在，你可以摧毁敌人 $1$，并达到 $X=12$。有了这样的力量，你可以击败敌人 $5$，达到 $X=21$。你完成你的任务，消灭敌人 $4$。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq n \\leq 2 \\cdot 10^{5}$\n- $1 \\leq k \\leq n$\n- $0 \\leq a_{i}, b_{i}, c_{i} \\leq 10^{9}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n| $1$ | $n \\leq 1000$ | $19$ |\n| $2$ | $b_{i}=0\\ (1\\leq i\\leq n)$ | $15$ |\n| $3$ | $c_{i}=0\\ (1\\leq i\\leq n)$ | $24$ |\n| $4$ | 无附加限制 | $42$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2023] Save the Vine!", "background": "", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day2 T2「[Save the Vine!](https://boi2023.zotks.si/wp-content/uploads/day_2/d2_vine/en.pdf)」**\n\n一群又臭又丑的绿色小人准备毒死 450 年历史的葡萄藤，这是马里博尔的象征！他们正在 Kodžak 纪念碑周围聚集，制定他们的计划，准备向 Drava 河左岸的著名 Lent 街上的房子进军，那里就是那棵古老的葡萄藤生长的地方！你，强大的紫色战士，被召唤来在他们实施致命的行动之前消灭敌人！\n\n一共有 $n$ 个敌人，每个敌人都有三个属性：臭度、绿度和丑度。对于每个 $i \\in\\{1, \\ldots, n\\}$，整数 $a_{i}, b_{i}$ 和 $c_{i}$ 分别决定了第 $i$ 个敌人的臭度、绿度和丑度。而你有两个属性：力量 $X$ 和紫度 $Y$。\n\n作为一个自豪的马里博尔人，你的紫度 $Y$ 在你出生时就已经确定，永远不会改变。但是，通过击败敌人，你的力量 $X$ 会增加。特别地，当你击败敌人 $i$ 时，$X$ 会增加该敌人的丑度 $c_{i}$。你可以按任意顺序一个一个地击败敌人，但你只能在你的力量大于他的臭度（$X \\geq a_{i}$）且你的紫度大于他的绿度（$Y \\geq b_{i}$）时击败敌人 $i$。另外，你只能击败每个敌人一次。\n\n你肯定想知道，为了击败至少 $k$ 个敌人，你最初的力量和紫度（即 $X+Y$）的最小和是多少。编写一个程序来找到这个值！", "inputFormat": "第一行包含整数 $n$ 和 $k$。接下来的 $n$ 行中的第 $i\\ (1\\leq i\\leq n)$ 行包含整数 $a_{i}, b_{i}$ 和 $c_{i}$。", "outputFormat": "输出至少击败 $k$ 个敌人所需的 $X+Y$ 的最小初始值。", "hint": "### 样例解释\n\n为了击败至少四个敌人，只需要从 $X=5$ 和 $Y=7$ 开始。首先，你击败敌人 $2$，将你的 $X$ 提升到 $8$。现在，你可以摧毁敌人 $1$，并达到 $X=12$。有了这样的力量，你可以击败敌人 $5$，达到 $X=21$。你完成你的任务，消灭敌人 $4$。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq n \\leq 2 \\cdot 10^{5}$\n- $1 \\leq k \\leq n$\n- $0 \\leq a_{i}, b_{i}, c_{i} \\leq 10^{9}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n| $1$ | $n \\leq 1000$ | $19$ |\n| $2$ | $b_{i}=0\\ (1\\leq i\\leq n)$ | $15$ |\n| $3$ | $c_{i}=0\\ (1\\leq i\\leq n)$ | $24$ |\n| $4$ | 无附加限制 | $42$ |", "locale": "zh-CN"}}}
{"pid": "P11167", "type": "P", "difficulty": 6, "samples": [["5 1 5\n8 7 9 4 16 12\n1\n0 4\n3 1\n2 4\n5 4\n4 3\n1\n2 4 2 1\n2 3 2 1\n2 4 1 3\n2 5 2 3", "4\n1\n0\n2\n2"], ["10 2 11\n1 2 3 4 5 6 7 8 9 10 11\n9 3\n5 8\n2 7\n3 4\n6 8\n0 1\n2 9\n5 2\n4 5\n7 10\n1 2\n1\n2 5 1 2\n2 5 2 2\n2 5 2 3\n2 5 2 4\n2 9 3 2\n2 9 3 3\n2 9 4 1\n2 2 1 3\n2 2 2 4\n2 2 3 1", "7\n4\n3\n6\n7\n4\n8\n3\n7\n10\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2023] Aliens", "background": "", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day2 T3「[Aliens](https://boi2023.zotks.si/wp-content/uploads/day_2/d2_aliens/en.pdf)」**\n\n马里博尔刚刚被外星人拜访了！他们与你分享了他们的技术和历史。\n\n有 $N+1$ 个行星，从 $0$ 到 $N$ 编号，地球的编号为 $N$。每个行星都有一个唯一的人口数 $P_{i}\\ (0\\leq i\\leq N)$。行星之间用 $N$ 个双向传送门连接，你可以只用这些传送门在任意两个行星之间旅行。传送门 $i$（$0\\leq i\\leq N-1$）连接了行星 $U_{i}$ 和 $V_{i}$。两个行星之间的距离是旅行所需的最少传送门数。\n\n你从地球出发，想要去游览 $K$ 个其他行星 $A_{0}, A_{1}, \\ldots, A_{K-1}$。这些被称为**起源行星**。每个起源行星和地球只有一个传送门连接。你的旅程为从地球出发，访问所有起源行星以及沿途所有行星的最短路线。令 $S$ 为所有访问过的行星的集合。\n\n现在，外星人决定通过向你提问 $Q$ 个以下两种类型的问题来测试地球是否有资格加入他们的超级文明：\n\n- 类型 $1$：集合 $S$ 的大小是多少？\n- 类型 $2$：他们从 $S$ 中选出一个行星 $x$，一个距离 $d$，和一个数字 $r$。他们问你，在距离 $x$ 为 $d$ 的行星中，按人口数从小到大排列的第 $r$ 个行星是哪个。（例如，如果 $r=1$ 答案就是距离 $x$ 为 $d$ 的星球中人口数最少的行星。这个行星可以也可以不属于集合 $S$。）\n\n只有一个类型 $1$ 的查询。", "inputFormat": "第一行包含三个整数 $N, K, Q$。\n\n第二行包含 $N+1$ 个整数 $P_{0}, \\ldots, P_{N}$。\n\n第三行包含 $K$ 个整数 $A_{0}, \\ldots, A_{K-1}$。\n\n接下来的 $N$ 行中的第 $i\\ (1\\leq i\\leq N-1)$ 行包含两个整数 $U_{i}$ 和 $V_{i}$。\n\n接下来的 $Q$ 行满足以下格式之一：\n\n- $1$ 表示一个类型 $1$ 的查询；\n- $2\\,x\\,d\\,r$ 表示一个类型 $2$ 的查询。", "outputFormat": "对于每个查询，输出一行。对于类型 $1$ 的查询，输出游览期间访问的行星数；对于类型 $2$ 的查询，输出距离 $x$ 为 $d$ 的行星中按人口数排列的第 $r$ 个行星。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7q7mu3wl.png)\n\n只有一个起源行星，我们在游览中访问了行星 $S=\\{1,3,4,5\\}$。类型 $2$ 的查询有：\n\n- $x=4, d=2, r=1$\n- 距离行星 $4$ 为 $2$ 的只有行星 $1$。\n- $x=3, d=2, r=1$\n- 距离行星 $3$ 为 $2$ 的有行星 $0,2,5$。其中，行星 $0$ 的人口数最少。\n- $x=4, d=1, r=3$\n- 距离行星 $4$ 为 $1$ 的有行星 $0,2,3,5$，它们按人口数的顺序是 $3,0,2,5$。其中第三个是行星 $2$。\n- $x=5, d=2, r=3$\n- 距离行星 $5$ 为 $2$ 的有行星 $0,2,3$，它们按人口数的顺序是 $3,0,2$。其中第三个是行星 $2$。\n\n### 样例 2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sytqzdyc.png)\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 10^5$\n- $1 \\leq K \\leq 10$\n- $1 \\leq Q \\leq 10^5$\n- $1 \\leq P_{i} \\leq 10^{9}\\ (0 \\leq i \\leq N)$；\n- 所有的 $P_{i}$ 都是不同的\n- $0 \\leq A_{i} \\leq N-1\\ (0 \\leq i \\leq K-1)$\n- $0 \\leq U_{i}, V_{i} \\leq N\\ (0 \\leq i \\leq N-1)$\n- $K$ 个起源行星和地球只有一个传送门连接\n- 对于每个类型 $2$ 的查询，满足 $x \\in S, d \\geq 1$，且 $r \\geq 1$\n- 保证距离 $x$ 为 $d$ 的行星至少有 $r$ 个\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n| $1$ | $Q=1$ | $3$ |\n| $2$ | $N \\leq 2000, Q \\leq 2000$ | $14$ |\n| $3$ | $K=1$ | $21$ |\n| $4$ | $N \\leq 10000$ | $12$ |\n| $5$ | $Q \\leq 10000$ | $13$ |\n| $6$ | 无附加限制 | $37$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2023] Aliens", "background": "", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day2 T3「[Aliens](https://boi2023.zotks.si/wp-content/uploads/day_2/d2_aliens/en.pdf)」**\n\n马里博尔刚刚被外星人拜访了！他们与你分享了他们的技术和历史。\n\n有 $N+1$ 个行星，从 $0$ 到 $N$ 编号，地球的编号为 $N$。每个行星都有一个唯一的人口数 $P_{i}\\ (0\\leq i\\leq N)$。行星之间用 $N$ 个双向传送门连接，你可以只用这些传送门在任意两个行星之间旅行。传送门 $i$（$0\\leq i\\leq N-1$）连接了行星 $U_{i}$ 和 $V_{i}$。两个行星之间的距离是旅行所需的最少传送门数。\n\n你从地球出发，想要去游览 $K$ 个其他行星 $A_{0}, A_{1}, \\ldots, A_{K-1}$。这些被称为**起源行星**。每个起源行星和地球只有一个传送门连接。你的旅程为从地球出发，访问所有起源行星以及沿途所有行星的最短路线。令 $S$ 为所有访问过的行星的集合。\n\n现在，外星人决定通过向你提问 $Q$ 个以下两种类型的问题来测试地球是否有资格加入他们的超级文明：\n\n- 类型 $1$：集合 $S$ 的大小是多少？\n- 类型 $2$：他们从 $S$ 中选出一个行星 $x$，一个距离 $d$，和一个数字 $r$。他们问你，在距离 $x$ 为 $d$ 的行星中，按人口数从小到大排列的第 $r$ 个行星是哪个。（例如，如果 $r=1$ 答案就是距离 $x$ 为 $d$ 的星球中人口数最少的行星。这个行星可以也可以不属于集合 $S$。）\n\n只有一个类型 $1$ 的查询。", "inputFormat": "第一行包含三个整数 $N, K, Q$。\n\n第二行包含 $N+1$ 个整数 $P_{0}, \\ldots, P_{N}$。\n\n第三行包含 $K$ 个整数 $A_{0}, \\ldots, A_{K-1}$。\n\n接下来的 $N$ 行中的第 $i\\ (1\\leq i\\leq N-1)$ 行包含两个整数 $U_{i}$ 和 $V_{i}$。\n\n接下来的 $Q$ 行满足以下格式之一：\n\n- $1$ 表示一个类型 $1$ 的查询；\n- $2\\,x\\,d\\,r$ 表示一个类型 $2$ 的查询。", "outputFormat": "对于每个查询，输出一行。对于类型 $1$ 的查询，输出游览期间访问的行星数；对于类型 $2$ 的查询，输出距离 $x$ 为 $d$ 的行星中按人口数排列的第 $r$ 个行星。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7q7mu3wl.png)\n\n只有一个起源行星，我们在游览中访问了行星 $S=\\{1,3,4,5\\}$。类型 $2$ 的查询有：\n\n- $x=4, d=2, r=1$\n- 距离行星 $4$ 为 $2$ 的只有行星 $1$。\n- $x=3, d=2, r=1$\n- 距离行星 $3$ 为 $2$ 的有行星 $0,2,5$。其中，行星 $0$ 的人口数最少。\n- $x=4, d=1, r=3$\n- 距离行星 $4$ 为 $1$ 的有行星 $0,2,3,5$，它们按人口数的顺序是 $3,0,2,5$。其中第三个是行星 $2$。\n- $x=5, d=2, r=3$\n- 距离行星 $5$ 为 $2$ 的有行星 $0,2,3$，它们按人口数的顺序是 $3,0,2$。其中第三个是行星 $2$。\n\n### 样例 2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sytqzdyc.png)\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 10^5$\n- $1 \\leq K \\leq 10$\n- $1 \\leq Q \\leq 10^5$\n- $1 \\leq P_{i} \\leq 10^{9}\\ (0 \\leq i \\leq N)$；\n- 所有的 $P_{i}$ 都是不同的\n- $0 \\leq A_{i} \\leq N-1\\ (0 \\leq i \\leq K-1)$\n- $0 \\leq U_{i}, V_{i} \\leq N\\ (0 \\leq i \\leq N-1)$\n- $K$ 个起源行星和地球只有一个传送门连接\n- 对于每个类型 $2$ 的查询，满足 $x \\in S, d \\geq 1$，且 $r \\geq 1$\n- 保证距离 $x$ 为 $d$ 的行星至少有 $r$ 个\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n| $1$ | $Q=1$ | $3$ |\n| $2$ | $N \\leq 2000, Q \\leq 2000$ | $14$ |\n| $3$ | $K=1$ | $21$ |\n| $4$ | $N \\leq 10000$ | $12$ |\n| $5$ | $Q \\leq 10000$ | $13$ |\n| $6$ | 无附加限制 | $37$ |\n", "locale": "zh-CN"}}}
{"pid": "P11168", "type": "P", "difficulty": 4, "samples": [["3 3\n2 2 1", "5"], ["2 5\n1 3 0", "7"], ["4 5\n3 2 0", "16"]], "limits": {"time": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2024", "洛谷原创", "O2优化"], "title": "「CMOI R1」First Town of This Journey／Grid Covering", "background": "![Link:First Town of This Journey](bilibili:BV1ka411G78Y)$\\small\\color{white}/10^{\\text{th}}\\text{Problem by AtC}.$\n\n本题中认为两个点间的连线为以这两个点作为端点的线段。", "description": "$\\text{BiOI}$ 有一个 $n$ 行 $m$ 列的网格。你需要选出最少的格点，使得任意两个**不同的**格点的连线至少经过一个被选中的点（这里我们认为一条线段**经过了**它的两个端点）。\n\n$\\text{CmOI}$ 觉得这个问题太简单了，所以他会另外给定 $a,b,x$，表示第 $a$ 行第 $b$ 列的格点必须被或不被选中：\n\n* $x=0$ 时该格点不可选中；\n* $x=1$ 时该格点必须选中。\n\n你只需要求出最少选出几个格点，$\\text{BiOI}$ 和 $\\text{CmOI}$ 会把网格和你的答案一起丢给 $\\text{ArCu}$ 让他构造方案。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行三个整数 $a,b,x$。", "outputFormat": "一行一个整数，最少选出的格点数。", "hint": "$\\text{Details about Subtasks}:$\n\n所有数据满足 $1\\leq n,m<2^{32},1\\leq a\\leq n,1\\leq b\\leq m,0\\leq x\\leq 1$。\n\n* $\\text{Subtask 1}:1\\leq n,m\\leq 10,\\text{5 points.}$\n* $\\text{Subtask 2}:x=0,\\text{25 points}.$\n* $\\text{Subtask 3}:x=1,\\text{30 points.}$\n* $\\text{Subtask 4}:\\text{40 points.}$\n\n$\\text{Sample Explanation}:$\n\n* $\\text{Sample 1}:$\n\n此时网格有 $3$ 行 $3$ 列，要求第 $2$ 行第 $2$ 列的格点必须被选中。\n\n最优方案如下（黑色是被选中的格点）：\n\n![010111010](https://cdn.luogu.com.cn/upload/image_hosting/qltw919n.png)\n\n注意以下方案并不合法：\n\n* 图中给出了两种方法使得两个不同的格点间连线不经过黑点；\n* 第二行第二列的格点没有被选中，输入中要求这个格点必须被选中。\n\n![011100011](https://cdn.luogu.com.cn/upload/image_hosting/egvtdeq2.png)\n\n以及我们认为端点在黑点上算是经过黑点。也就是说下面的这种连线经过了一个黑色格点。\n\n![011110011](https://cdn.luogu.com.cn/upload/image_hosting/zk2d5ou2.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CMOI R1」First Town of This Journey／Grid Covering", "background": "![Link:First Town of This Journey](bilibili:BV1ka411G78Y)$\\small\\color{white}/10^{\\text{th}}\\text{Problem by AtC}.$\n\n本题中认为两个点间的连线为以这两个点作为端点的线段。", "description": "$\\text{BiOI}$ 有一个 $n$ 行 $m$ 列的网格。你需要选出最少的格点，使得任意两个**不同的**格点的连线至少经过一个被选中的点（这里我们认为一条线段**经过了**它的两个端点）。\n\n$\\text{CmOI}$ 觉得这个问题太简单了，所以他会另外给定 $a,b,x$，表示第 $a$ 行第 $b$ 列的格点必须被或不被选中：\n\n* $x=0$ 时该格点不可选中；\n* $x=1$ 时该格点必须选中。\n\n你只需要求出最少选出几个格点，$\\text{BiOI}$ 和 $\\text{CmOI}$ 会把网格和你的答案一起丢给 $\\text{ArCu}$ 让他构造方案。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行三个整数 $a,b,x$。", "outputFormat": "一行一个整数，最少选出的格点数。", "hint": "$\\text{Details about Subtasks}:$\n\n所有数据满足 $1\\leq n,m<2^{32},1\\leq a\\leq n,1\\leq b\\leq m,0\\leq x\\leq 1$。\n\n* $\\text{Subtask 1}:1\\leq n,m\\leq 10,\\text{5 points.}$\n* $\\text{Subtask 2}:x=0,\\text{25 points}.$\n* $\\text{Subtask 3}:x=1,\\text{30 points.}$\n* $\\text{Subtask 4}:\\text{40 points.}$\n\n$\\text{Sample Explanation}:$\n\n* $\\text{Sample 1}:$\n\n此时网格有 $3$ 行 $3$ 列，要求第 $2$ 行第 $2$ 列的格点必须被选中。\n\n最优方案如下（黑色是被选中的格点）：\n\n![010111010](https://cdn.luogu.com.cn/upload/image_hosting/qltw919n.png)\n\n注意以下方案并不合法：\n\n* 图中给出了两种方法使得两个不同的格点间连线不经过黑点；\n* 第二行第二列的格点没有被选中，输入中要求这个格点必须被选中。\n\n![011100011](https://cdn.luogu.com.cn/upload/image_hosting/egvtdeq2.png)\n\n以及我们认为端点在黑点上算是经过黑点。也就是说下面的这种连线经过了一个黑色格点。\n\n![011110011](https://cdn.luogu.com.cn/upload/image_hosting/zk2d5ou2.png)", "locale": "zh-CN"}}}
{"pid": "P11169", "type": "P", "difficulty": 4, "samples": [["100", "50 30"], ["9876543", "4938272 3092277"], ["998877665544332211", "499438832772166106 312742219398875473"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2024", "洛谷原创", "Special Judge", "O2优化"], "title": "「CMOI R1」Bismuth / Linear Sieve", "background": "![](bilibili:BV1qF4m157gc)\n\n> Can you imagine find wakeless,like a satellite,in the black sky?\n>\n> Somewhere,like a star.\n>\n> We dream about things way beyond this atmosphere.\n>\n> At we're now,on the air.\n>\n> ……\n>\n> But I eventually evaporates in a blackhole…\n>\n> Will I just stick up there?……", "description": "给定以下程序中的 $n$（即输入），求以下伪代码的输出结果。\n\n```\nInput n\nFor i := 1 to n\n\tis_not_prime[i] := 0\ncntp := 0\ncounter := 0\nFor i := 2 to n {\n\tIf is_not_prime[i] = 0 {\n\t\tcntp := cntp + 1\n\t\tprimes[cntp] := i\n\t}\n\tFor j := 1 to cntp {\n\t\tIf i * primes[j] > n\n\t\t\tbreak\n\t\tis_not_prime[i * primes[j]] := 1\n\t\tIf i Mod primes[j] > 0 // should be `If i Mod primes[j] = 0` in Sieve of Euler\n\t\t\tbreak\n\t\tcounter := counter + 1\n\t}\n}\nPrint cntp, counter\n```\n请注意此代码**不是线性筛**，差别在注释过的那一行。", "inputFormat": "一行一个整数，即输入，也就是给定的 $n$。", "outputFormat": "一行两个非负整数，即伪代码输出。", "hint": "**本题采用捆绑测试**，并且存在子任务依赖（只有你拿到了一个子任务前一个子任务的分，你才有可能拿到该子任务的分）。\n\n## 数据范围\n\n| $\\text{Subtask}$ | 约束条件 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $n\\leq 10^7$ |$10$|\n| $2$ | $n\\leq 10^9$ |$40$|\n| $3$ | $n\\leq 10^{18}$ |$50$|\n\n对于 $100\\%$ 的数据，满足 $1\\leq n\\leq 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CMOI R1」Bismuth / Linear Sieve", "background": "![](bilibili:BV1qF4m157gc)\n\n> Can you imagine find wakeless,like a satellite,in the black sky?\n>\n> Somewhere,like a star.\n>\n> We dream about things way beyond this atmosphere.\n>\n> At we're now,on the air.\n>\n> ……\n>\n> But I eventually evaporates in a blackhole…\n>\n> Will I just stick up there?……", "description": "给定以下程序中的 $n$（即输入），求以下伪代码的输出结果。\n\n```\nInput n\nFor i := 1 to n\n\tis_not_prime[i] := 0\ncntp := 0\ncounter := 0\nFor i := 2 to n {\n\tIf is_not_prime[i] = 0 {\n\t\tcntp := cntp + 1\n\t\tprimes[cntp] := i\n\t}\n\tFor j := 1 to cntp {\n\t\tIf i * primes[j] > n\n\t\t\tbreak\n\t\tis_not_prime[i * primes[j]] := 1\n\t\tIf i Mod primes[j] > 0 // should be `If i Mod primes[j] = 0` in Sieve of Euler\n\t\t\tbreak\n\t\tcounter := counter + 1\n\t}\n}\nPrint cntp, counter\n```\n请注意此代码**不是线性筛**，差别在注释过的那一行。", "inputFormat": "一行一个整数，即输入，也就是给定的 $n$。", "outputFormat": "一行两个非负整数，即伪代码输出。", "hint": "**本题采用捆绑测试**，并且存在子任务依赖（只有你拿到了一个子任务前一个子任务的分，你才有可能拿到该子任务的分）。\n\n## 数据范围\n\n| $\\text{Subtask}$ | 约束条件 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $n\\leq 10^7$ |$10$|\n| $2$ | $n\\leq 10^9$ |$40$|\n| $3$ | $n\\leq 10^{18}$ |$50$|\n\n对于 $100\\%$ 的数据，满足 $1\\leq n\\leq 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P11170", "type": "P", "difficulty": 5, "samples": [["3 3\n1 2 2\n2 3 3\n3 1 1", "Yes\n2 3 114514"], ["1 1\n1 1 1", "No"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "图论", "2024", "洛谷原创", "Special Judge", "O2优化", "构造", "Ad-hoc"], "title": "「CMOI R1」图上交互题 / Constructive Minimum Xor Path", "background": "2024 年 1 月 13 日 15:59:31，随着最后一发交互 J 题的提交出现了 Wrong Answer，小 G 的 EC-Final 比赛结束了，也意味着在 ICPC 生涯中第一次打铁。\n\n痛定思痛，小 G 决定批量生产交互题给自己做。如何批量生产交互题？只要在一个数据结构中有若干个未知量 $a_i$，每次询问给定向量 $x$，交互库会返回关于 $a_i$ 的函数 $f(x)$，这样就能批量生产交互题了！\n\n~~那为什么这题并不是交互题呢。~~", "description": "给定一个 $n$ 个点，$m$ 条边的**无向图**。第 $i$ 条边 $(u_i,v_i)$ 有一个**未知边权** $a_i$。\n\n对于任何一条**路径**，定义其**代价**如下：设路径为 $(p_0,p_1,...,p_k)$，其中要求 $(p_{i-1},p_i)$ 是无向图中的边，设其为第 $e_i$ 条边。那么路径的代价即为 $\\bigoplus\\limits_{i=1}^{k} a_{e_i}$。其中 $\\bigoplus$ 表示异或。（该路径可以经过重复点和重复边，即 $p$ 和 $e$ 可以包含重复的数）\n\n\n\n定义 $f(x,y)$ 为从 $x$ 到 $y$ 的所有路径中代价的**最小值**。特别地，当 $x=y$ 时，$f(x,y)=0$。\n\n给定 $n,m$，再对于每条边 $(u_i,v_i)$ 给定 $f(u_i,v_i)$，你需要求出是否存在一组合法的 $a_i$，如果有解，你还需要构造一组解。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第 $2\\sim m+1$ 行每行两个正整数 $u_i,v_i$ 和一个非负整数 $f(u_i,v_i)$。\n\n**请注意：本题并不保证图连通；可能会存在重边和自环。**", "outputFormat": "如果不存在解，则仅输出 `No`。\n\n否则，在第一行输出 `Yes`，在第二行输出 $m$ 个非负整数 $a_i$ 表示一组合法的解。\n\n答案可能有很多组，此时输出任意一组解即可。你需要保证 输出的 $0\\le a_i<2^{63}$。", "hint": "### 样例解释\n\n答案输出的图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/06683y6o.png)\n\n考虑 $f(1,2)$：\n\n+ 考虑路径 $1\\rightarrow 2$，路径的代价为 $2$。\n\n+ 考虑路径 $1\\rightarrow 2\\rightarrow 3\\rightarrow 1\\rightarrow 2$，路径的代价为 $2\\oplus3\\oplus114514\\oplus2=114513$。\n\n此外还存在其他路径，但可以证明不存在代价比 $2$ 更小的路径，故 $f(1,2)=2$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n|$\\text{Subtask}$ |特殊性质|分数|\n|-:|-:|-:|\n|$1$|保证有解|$20$|\n|$2$|$m\\le n+10$|$30$|\n|$3$||$50$|\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 5\\times 10^5$，$1\\le u_i,v_i\\le n$，$0\\le f(u_i,v_i)<2^{31}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CMOI R1」图上交互题 / Constructive Minimum Xor Path", "background": "2024 年 1 月 13 日 15:59:31，随着最后一发交互 J 题的提交出现了 Wrong Answer，小 G 的 EC-Final 比赛结束了，也意味着在 ICPC 生涯中第一次打铁。\n\n痛定思痛，小 G 决定批量生产交互题给自己做。如何批量生产交互题？只要在一个数据结构中有若干个未知量 $a_i$，每次询问给定向量 $x$，交互库会返回关于 $a_i$ 的函数 $f(x)$，这样就能批量生产交互题了！\n\n~~那为什么这题并不是交互题呢。~~", "description": "给定一个 $n$ 个点，$m$ 条边的**无向图**。第 $i$ 条边 $(u_i,v_i)$ 有一个**未知边权** $a_i$。\n\n对于任何一条**路径**，定义其**代价**如下：设路径为 $(p_0,p_1,...,p_k)$，其中要求 $(p_{i-1},p_i)$ 是无向图中的边，设其为第 $e_i$ 条边。那么路径的代价即为 $\\bigoplus\\limits_{i=1}^{k} a_{e_i}$。其中 $\\bigoplus$ 表示异或。（该路径可以经过重复点和重复边，即 $p$ 和 $e$ 可以包含重复的数）\n\n\n\n定义 $f(x,y)$ 为从 $x$ 到 $y$ 的所有路径中代价的**最小值**。特别地，当 $x=y$ 时，$f(x,y)=0$。\n\n给定 $n,m$，再对于每条边 $(u_i,v_i)$ 给定 $f(u_i,v_i)$，你需要求出是否存在一组合法的 $a_i$，如果有解，你还需要构造一组解。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第 $2\\sim m+1$ 行每行两个正整数 $u_i,v_i$ 和一个非负整数 $f(u_i,v_i)$。\n\n**请注意：本题并不保证图连通；可能会存在重边和自环。**", "outputFormat": "如果不存在解，则仅输出 `No`。\n\n否则，在第一行输出 `Yes`，在第二行输出 $m$ 个非负整数 $a_i$ 表示一组合法的解。\n\n答案可能有很多组，此时输出任意一组解即可。你需要保证 输出的 $0\\le a_i<2^{63}$。", "hint": "### 样例解释\n\n答案输出的图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/06683y6o.png)\n\n考虑 $f(1,2)$：\n\n+ 考虑路径 $1\\rightarrow 2$，路径的代价为 $2$。\n\n+ 考虑路径 $1\\rightarrow 2\\rightarrow 3\\rightarrow 1\\rightarrow 2$，路径的代价为 $2\\oplus3\\oplus114514\\oplus2=114513$。\n\n此外还存在其他路径，但可以证明不存在代价比 $2$ 更小的路径，故 $f(1,2)=2$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n|$\\text{Subtask}$ |特殊性质|分数|\n|-:|-:|-:|\n|$1$|保证有解|$20$|\n|$2$|$m\\le n+10$|$30$|\n|$3$||$50$|\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 5\\times 10^5$，$1\\le u_i,v_i\\le n$，$0\\le f(u_i,v_i)<2^{31}$。", "locale": "zh-CN"}}}
{"pid": "P11171", "type": "P", "difficulty": 6, "samples": [["5\n120\n8128\n248\n0\n5", "7\n1 9 1 9 8 1 0\n13\n1 1 4 5 1 4 1 9 1 9 8 1 0\n8\n1 2 3 9 0 7 3 8\n7\n1 2 3 9 7 3 8\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2024", "洛谷原创", "Special Judge", "O2优化", "深度优先搜索 DFS", "剪枝", "构造"], "title": "「CMOI R1」mex1", "background": "小 U 对于从一个集合映射到一个数的函数很感兴趣，而 $\\text{mex}$ 是一个很好的例子。\n\n$\\text{mex}(S)$ 指的是在集合 $S$ 中没有出现过的最小非负整数。", "description": "多组数据。\n\n每组数据，给定 $c$，要求构造序列 $a_1,a_2,...,a_n\\in [0,2\\times 10^9]$ 满足 \n\n$$\\sum\\limits_{S\\neq \\emptyset,S\\subseteq \\{1,2,...,n\\}}\\text{mex}(a_{S_1},a_{S_2},...,a_{S_{|S|}})=c$$\n\n\n其中要求 $1\\le n\\le40$。可以证明在该题的数据范围内如果存在解，则在 $1\\le n\\le 40$ 时一定存在解。", "inputFormat": "第一行一个整数，数据组数 $T$。\n\n之后 $T$ 行每行一个非负整数 $c$。", "outputFormat": "对于每组数据：\n\n如果无解，则仅输出一行一个整数 $-1$。\n\n否则，第一行输出一个正整数 $n$。\n\n第二行输出 $n$ 个非负整数 $a_1,a_2,...,a_n$。", "hint": "### 样例解释\n\n我有一个绝妙的解释，可惜这里写不下。\n\n### 数据范围\n\n$id$ 为 $\\text{subtask}$ 编号。\n\n|$id$|特殊性质|分数|$id$|特殊性质|分数|\n|-:|-:|-:|-:|-:|-:|\n|$1$|$c\\le10$|$3$|$6$|$c\\le1\\times 10^6$|$15$|\n|$2$|$c\\le30$|$6$|$7$|$T\\le 10$|$5$|\n|$3$|$c\\le500$|$6$|$8$|$T\\le 5\\times 10^4$|$15$|\n|$4$|$c\\le2\\times 10^3$|$5$|$9$|$T\\le 8\\times 10^4$|$10$|\n|$5$|$c\\le1\\times 10^5$|$20$|$10$||$15$|\n\n对于 $100\\%$ 的数据，$T\\le 10^5$，$0\\le c\\le 2\\times 10^9$。\n\n### 提示\n\n由于部分 STL 的常数较大，如果认为你的时间复杂度没有问题却 TLE，请不要使用 STL。\n\n请注意输出效率，这里提供一种快写模板（请不要用以下代码输出负数）：\n\n```cpp\nvoid write(int x){\n\tif(x>9)write(x/10);\n\tputchar(x%10+'0');\n}\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CMOI R1」mex1", "background": "小 U 对于从一个集合映射到一个数的函数很感兴趣，而 $\\text{mex}$ 是一个很好的例子。\n\n$\\text{mex}(S)$ 指的是在集合 $S$ 中没有出现过的最小非负整数。", "description": "多组数据。\n\n每组数据，给定 $c$，要求构造序列 $a_1,a_2,...,a_n\\in [0,2\\times 10^9]$ 满足 \n\n$$\\sum\\limits_{S\\neq \\emptyset,S\\subseteq \\{1,2,...,n\\}}\\text{mex}(a_{S_1},a_{S_2},...,a_{S_{|S|}})=c$$\n\n\n其中要求 $1\\le n\\le40$。可以证明在该题的数据范围内如果存在解，则在 $1\\le n\\le 40$ 时一定存在解。", "inputFormat": "第一行一个整数，数据组数 $T$。\n\n之后 $T$ 行每行一个非负整数 $c$。", "outputFormat": "对于每组数据：\n\n如果无解，则仅输出一行一个整数 $-1$。\n\n否则，第一行输出一个正整数 $n$。\n\n第二行输出 $n$ 个非负整数 $a_1,a_2,...,a_n$。", "hint": "### 样例解释\n\n我有一个绝妙的解释，可惜这里写不下。\n\n### 数据范围\n\n$id$ 为 $\\text{subtask}$ 编号。\n\n|$id$|特殊性质|分数|$id$|特殊性质|分数|\n|-:|-:|-:|-:|-:|-:|\n|$1$|$c\\le10$|$3$|$6$|$c\\le1\\times 10^6$|$15$|\n|$2$|$c\\le30$|$6$|$7$|$T\\le 10$|$5$|\n|$3$|$c\\le500$|$6$|$8$|$T\\le 5\\times 10^4$|$15$|\n|$4$|$c\\le2\\times 10^3$|$5$|$9$|$T\\le 8\\times 10^4$|$10$|\n|$5$|$c\\le1\\times 10^5$|$20$|$10$||$15$|\n\n对于 $100\\%$ 的数据，$T\\le 10^5$，$0\\le c\\le 2\\times 10^9$。\n\n### 提示\n\n由于部分 STL 的常数较大，如果认为你的时间复杂度没有问题却 TLE，请不要使用 STL。\n\n请注意输出效率，这里提供一种快写模板（请不要用以下代码输出负数）：\n\n```cpp\nvoid write(int x){\n\tif(x>9)write(x/10);\n\tputchar(x%10+'0');\n}\n```", "locale": "zh-CN"}}}
{"pid": "P11172", "type": "P", "difficulty": 6, "samples": [["4\n13\n25\n32\n0", "7\n1 9 1 9 8 1 0\n13\n1 1 4 5 1 4 1 9 1 9 8 1 0\n8\n1 2 3 9 0 7 3 8\n7\n1 2 3 9 7 3 8\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2024", "洛谷原创", "Special Judge", "O2优化", "构造"], "title": "「CMOI R1」mex2", "background": "小 U 对于从一个集合映射到一个数的函数很感兴趣，而 $\\text{mex}$ 是一个很好的例子。\n\n$\\text{mex}(S)$ 指的是在集合 $S$ 中没有出现过的最小非负整数。", "description": "多组数据。\n\n每组数据，给定 $c$，要求构造序列 $a_1,a_2,...,a_n\\in [0,2\\times 10^9]$ 满足 \n\n$$\\sum\\limits_{1\\le l\\le r\\le n}\\text{mex}(a_l,a_{l+1},...,a_r)=c$$\n\n\n其中要求 $1\\le n\\le3000$。可以证明在该题的数据范围内如果存在解，则在 $1\\le n\\le 3000$ 时一定存在解。", "inputFormat": "第一行一个整数，数据组数 $T$。\n\n之后 $T$ 行每行一个非负整数 $c$。", "outputFormat": "对于每组数据：\n\n如果无解，则仅输出一行一个整数 $-1$。\n\n否则，第一行输出一个正整数 $n$。\n\n第二行输出 $n$ 个非负整数 $a_1,a_2,...,a_n$。", "hint": "### 样例解释\n\n对于样例 #1：只有 $\\text{mex}(a_7)=1$，且 $∀1\\le i\\le6$ 有 $\\text{mex}(a_i,a_{i+1},...,a_7)=2$，因而总和为 $13$。\n\n### 数据范围\n\n$id$ 为 $\\text{subtask}$ 编号。\n\n|$id$|特殊性质|分数|$id$|特殊性质|分数|\n|-:|-:|-:|-:|-:|-:|\n|$1$|$c\\le3\\times10^3$|$3$|$5$|$c\\le8\\times 10^6$|$10$|\n|$2$|$c\\le6\\times 10^3$|$7$|$6$|$c\\le1\\times 10^8$|$10$|\n|$3$|$c\\le8\\times10^4$|$10$|$7$|$c\\le1\\times 10^9$|$25$|\n|$4$|$c\\le4\\times 10^6$|$15$|$8$|$c\\le2\\times 10^9$|$20$|\n\n对于 $100\\%$ 的数据，$T\\le 310$，$0\\le c\\le 2\\times 10^9$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CMOI R1」mex2", "background": "小 U 对于从一个集合映射到一个数的函数很感兴趣，而 $\\text{mex}$ 是一个很好的例子。\n\n$\\text{mex}(S)$ 指的是在集合 $S$ 中没有出现过的最小非负整数。", "description": "多组数据。\n\n每组数据，给定 $c$，要求构造序列 $a_1,a_2,...,a_n\\in [0,2\\times 10^9]$ 满足 \n\n$$\\sum\\limits_{1\\le l\\le r\\le n}\\text{mex}(a_l,a_{l+1},...,a_r)=c$$\n\n\n其中要求 $1\\le n\\le3000$。可以证明在该题的数据范围内如果存在解，则在 $1\\le n\\le 3000$ 时一定存在解。", "inputFormat": "第一行一个整数，数据组数 $T$。\n\n之后 $T$ 行每行一个非负整数 $c$。", "outputFormat": "对于每组数据：\n\n如果无解，则仅输出一行一个整数 $-1$。\n\n否则，第一行输出一个正整数 $n$。\n\n第二行输出 $n$ 个非负整数 $a_1,a_2,...,a_n$。", "hint": "### 样例解释\n\n对于样例 #1：只有 $\\text{mex}(a_7)=1$，且 $∀1\\le i\\le6$ 有 $\\text{mex}(a_i,a_{i+1},...,a_7)=2$，因而总和为 $13$。\n\n### 数据范围\n\n$id$ 为 $\\text{subtask}$ 编号。\n\n|$id$|特殊性质|分数|$id$|特殊性质|分数|\n|-:|-:|-:|-:|-:|-:|\n|$1$|$c\\le3\\times10^3$|$3$|$5$|$c\\le8\\times 10^6$|$10$|\n|$2$|$c\\le6\\times 10^3$|$7$|$6$|$c\\le1\\times 10^8$|$10$|\n|$3$|$c\\le8\\times10^4$|$10$|$7$|$c\\le1\\times 10^9$|$25$|\n|$4$|$c\\le4\\times 10^6$|$15$|$8$|$c\\le2\\times 10^9$|$20$|\n\n对于 $100\\%$ 的数据，$T\\le 310$，$0\\le c\\le 2\\times 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P11173", "type": "P", "difficulty": 6, "samples": [["2 2", "5"], ["3 4", "793"], ["5 10", "59350891"], ["18 15932416", "52138206"], ["1 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "数学", "2024", "洛谷原创", "O2优化", "动态规划优化", "图论建模", "线性代数"], "title": "「CMOI R1」We Want To Run / Nilpotent", "background": "![](bilibili:BV1qW4y1Q7Ce)\n\n$\\small\\color{white}54^{\\text{th}}\\text{Problem by ArCu}.$", "description": "对于 $n\\times n$ 矩阵 $A$，定义 $f(A)$ 为最小的满足 $A^b=O$ 的正整数 $b$，若不存在这样的数则 $f(A)=0$。其中 $O$ 是零矩阵，即所有元素都是 $0$ 的矩阵。\n\n给定 $n,a$，每个元素都是 $[0,a)$ 中整数的 $n\\times n$ 矩阵有 $a^{n^2}$ 种。对所有 $a^{n^2}$ 种可能的矩阵 $A$ 求 $f(A)$ 之和。\n\n答案对 $202407031$ 取模。", "inputFormat": "一行两个整数 $n,a(1\\leq n\\leq 600,0<a<2^{64})$。", "outputFormat": "一行一个整数，表示你求得的答案。", "hint": "$\\text{Sample 1 Explanation}:$\n\n注意到对于任意正整数 $b$，$\\begin{bmatrix}1&0\\\\1&1\\end{bmatrix}^b\\neq O$，所以 $f\\left(\\begin{bmatrix}1&0\\\\1&1\\end{bmatrix}\\right)=0$。而 $\\begin{bmatrix}0&0\\\\1&0\\end{bmatrix}^2=O$，所以 $f\\left(\\begin{bmatrix}0&0\\\\1&0\\end{bmatrix}\\right)=2$。\n\n一共有 $2^4=16$ 种可能的矩阵。其中 $f(A)$ 不为 $0$ 的只有\n\n$$f\\left(\\begin{bmatrix}0&0\\\\0&0\\end{bmatrix}\\right)=1,f\\left(\\begin{bmatrix}0&0\\\\1&0\\end{bmatrix}\\right)=f\\left(\\begin{bmatrix}0&1\\\\0&0\\end{bmatrix}\\right)=2$$\n\n答案即为 $1+2+2=5$。\n\n$\\text{Details of Subtasks}:$\n\n所有数据满足 $1\\leq n\\leq 600,0<a<2^{64}$。\n\n| $\\text{Subtask}$ | $\\text{Special Constraints}$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | \n| $1$ | $n\\leq 5,a\\leq 2$ | $3$ |\n| $2$ | $n\\leq 5$ | $7$ | \n| $3$ | $n\\leq 10$ | $10$ | \n| $4$ | $n\\leq 40$ | $20$ | \n| $5$ | $n\\leq 200$ | $30$ |\n| $6$ |  | $30$ |\n\n$\\text{Hint}:202407031=13009\\times 15559.$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CMOI R1」We Want To Run / Nilpotent", "background": "![](bilibili:BV1qW4y1Q7Ce)\n\n$\\small\\color{white}54^{\\text{th}}\\text{Problem by ArCu}.$", "description": "对于 $n\\times n$ 矩阵 $A$，定义 $f(A)$ 为最小的满足 $A^b=O$ 的正整数 $b$，若不存在这样的数则 $f(A)=0$。其中 $O$ 是零矩阵，即所有元素都是 $0$ 的矩阵。\n\n给定 $n,a$，每个元素都是 $[0,a)$ 中整数的 $n\\times n$ 矩阵有 $a^{n^2}$ 种。对所有 $a^{n^2}$ 种可能的矩阵 $A$ 求 $f(A)$ 之和。\n\n答案对 $202407031$ 取模。", "inputFormat": "一行两个整数 $n,a(1\\leq n\\leq 600,0<a<2^{64})$。", "outputFormat": "一行一个整数，表示你求得的答案。", "hint": "$\\text{Sample 1 Explanation}:$\n\n注意到对于任意正整数 $b$，$\\begin{bmatrix}1&0\\\\1&1\\end{bmatrix}^b\\neq O$，所以 $f\\left(\\begin{bmatrix}1&0\\\\1&1\\end{bmatrix}\\right)=0$。而 $\\begin{bmatrix}0&0\\\\1&0\\end{bmatrix}^2=O$，所以 $f\\left(\\begin{bmatrix}0&0\\\\1&0\\end{bmatrix}\\right)=2$。\n\n一共有 $2^4=16$ 种可能的矩阵。其中 $f(A)$ 不为 $0$ 的只有\n\n$$f\\left(\\begin{bmatrix}0&0\\\\0&0\\end{bmatrix}\\right)=1,f\\left(\\begin{bmatrix}0&0\\\\1&0\\end{bmatrix}\\right)=f\\left(\\begin{bmatrix}0&1\\\\0&0\\end{bmatrix}\\right)=2$$\n\n答案即为 $1+2+2=5$。\n\n$\\text{Details of Subtasks}:$\n\n所有数据满足 $1\\leq n\\leq 600,0<a<2^{64}$。\n\n| $\\text{Subtask}$ | $\\text{Special Constraints}$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | \n| $1$ | $n\\leq 5,a\\leq 2$ | $3$ |\n| $2$ | $n\\leq 5$ | $7$ | \n| $3$ | $n\\leq 10$ | $10$ | \n| $4$ | $n\\leq 40$ | $20$ | \n| $5$ | $n\\leq 200$ | $30$ |\n| $6$ |  | $30$ |\n\n$\\text{Hint}:202407031=13009\\times 15559.$", "locale": "zh-CN"}}}
{"pid": "P11174", "type": "P", "difficulty": 7, "samples": [["3", "12"], ["4", "812"], ["5", "223440"], ["107", "404390093"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2024", "O2优化", "组合数学", "容斥原理", "生成函数", "快速傅里叶变换 FFT", "快速数论变换 NTT", "拉格朗日反演", "洛谷比赛"], "title": "「CMOI R1」Looking For Edge Of Ground／City Planning", "background": "![](bilibili:BV1np4y19753)\n\n[如何对 $n$ 个点的简单有标号无向连通图计数？](https://www.luogu.com.cn/problem/P4841)$\\small\\color{white}/42^{\\text{nd}}\\text{Problem by ArCu}.$\n\n有一个显然错误的做法：枚举一棵树，然后在上面加边。\n\n你需要求每张图被统计的次数的平方和。", "description": "给定正整数 $n$。\n\n一开始，$\\text{ClBe}$ 会选定一棵 $n$ 个点的有标号无向无根树，将树上的边染成白色。然后他会在这棵树上加任意多条边，且满足：\n\n* 新加的边是黑色的无向边；\n* 加完边后的图忽略边的颜色后是一张简单图。\n\n接下来 $\\text{ClBe}$ 会将所有可能得到的结果放到一个集合 $S$ 中。\n\n显然这种统计连通图个数的方法会把一个图算很多遍，所以 $\\text{ClBe}$ 定义 $f(G)$：$S$ 中有 $f(G)$ 个图在忽略边的颜色后和 $G$ 相同（两个图 $A,B$ 相同指对于任意一条边 $(u,v)$，$(u,v)\\in A\\iff(u,v)\\in B$）。\n\n（$\\sum_G$ 代表对所有可能的图 $G$ 求和。）显然\n\n$$\\sum_{G}f(G)=n^{n-2}2^\\binom{n-1}2$$\n\n所以你需要求\n\n$$\\sum_{G}f(G)^2$$\n\n答案对 $998244353$ 取模。很可惜因为一些原因模数**不能**取 $1004535809$。", "inputFormat": "一行一个正整数 $n(0<n<2^{25})$。", "outputFormat": "一行一个整数，为你求得的答案。", "hint": "$\\text{Sample Explanation}:$\n\n集合 $S$ 中包含以下 $6$ 张图（边权为 $0$ 代表白边，为 $1$ 代表黑边，点的编号为 $1A$ 代表这是图 $A$ 的 $1$ 号点）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/neuo34c3.png)\n\n$3$ 个点的连通图有 $4$ 种：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q8kvdjgj.png)\n\n忽略颜色后，\n\n* 与 $G$ 相同的有 $B$；\n* 与 $H$ 相同的有 $A$；\n* 与 $I$ 相同的有 $C$；\n* 与 $J$ 相同的有 $D,E,F$；\n\n答案为 $f(G)^2+f(H)^2+f(I)^2+f(J)^2=1^2+1^2+1^2+3^2=12$。\n\n$\\text{Details of Subtasks}:$\n\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n<$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | \n| $1$ | $10$ | $5$ |\n| $2$ | $500$ | $25$ |\n| $3$ | $1500$ | $30$ |\n| $4$ | $4500$ | $5$ |\n| $5$ | $2^{16}$ | $5$ |\n| $6$ | $2^{17}$ | $5$ |\n| $7$ | $2^{20}$ | $20$ |\n| $8$ | $2^{25}$ | $5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CMOI R1」Looking For Edge Of Ground／City Planning", "background": "![](bilibili:BV1np4y19753)\n\n[如何对 $n$ 个点的简单有标号无向连通图计数？](https://www.luogu.com.cn/problem/P4841)$\\small\\color{white}/42^{\\text{nd}}\\text{Problem by ArCu}.$\n\n有一个显然错误的做法：枚举一棵树，然后在上面加边。\n\n你需要求每张图被统计的次数的平方和。", "description": "给定正整数 $n$。\n\n一开始，$\\text{ClBe}$ 会选定一棵 $n$ 个点的有标号无向无根树，将树上的边染成白色。然后他会在这棵树上加任意多条边，且满足：\n\n* 新加的边是黑色的无向边；\n* 加完边后的图忽略边的颜色后是一张简单图。\n\n接下来 $\\text{ClBe}$ 会将所有可能得到的结果放到一个集合 $S$ 中。\n\n显然这种统计连通图个数的方法会把一个图算很多遍，所以 $\\text{ClBe}$ 定义 $f(G)$：$S$ 中有 $f(G)$ 个图在忽略边的颜色后和 $G$ 相同（两个图 $A,B$ 相同指对于任意一条边 $(u,v)$，$(u,v)\\in A\\iff(u,v)\\in B$）。\n\n（$\\sum_G$ 代表对所有可能的图 $G$ 求和。）显然\n\n$$\\sum_{G}f(G)=n^{n-2}2^\\binom{n-1}2$$\n\n所以你需要求\n\n$$\\sum_{G}f(G)^2$$\n\n答案对 $998244353$ 取模。很可惜因为一些原因模数**不能**取 $1004535809$。", "inputFormat": "一行一个正整数 $n(0<n<2^{25})$。", "outputFormat": "一行一个整数，为你求得的答案。", "hint": "$\\text{Sample Explanation}:$\n\n集合 $S$ 中包含以下 $6$ 张图（边权为 $0$ 代表白边，为 $1$ 代表黑边，点的编号为 $1A$ 代表这是图 $A$ 的 $1$ 号点）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/neuo34c3.png)\n\n$3$ 个点的连通图有 $4$ 种：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q8kvdjgj.png)\n\n忽略颜色后，\n\n* 与 $G$ 相同的有 $B$；\n* 与 $H$ 相同的有 $A$；\n* 与 $I$ 相同的有 $C$；\n* 与 $J$ 相同的有 $D,E,F$；\n\n答案为 $f(G)^2+f(H)^2+f(I)^2+f(J)^2=1^2+1^2+1^2+3^2=12$。\n\n$\\text{Details of Subtasks}:$\n\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n<$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | \n| $1$ | $10$ | $5$ |\n| $2$ | $500$ | $25$ |\n| $3$ | $1500$ | $30$ |\n| $4$ | $4500$ | $5$ |\n| $5$ | $2^{16}$ | $5$ |\n| $6$ | $2^{17}$ | $5$ |\n| $7$ | $2^{20}$ | $20$ |\n| $8$ | $2^{25}$ | $5$ |", "locale": "zh-CN"}}}
{"pid": "P11175", "type": "P", "difficulty": 6, "samples": [["998244353 3\n9\n1\n11\n111\n1111\n11111\n111111\n1111111\n11111111\n111111111", "0\n258630203\n771331691\n346105458\n268271589\n571255383\n916731589\n304666893\n915484870"], ["1000000007 5\n13\n1\n5\n25\n125\n625\n3125\n15625\n78125\n390625\n1953125\n9765625\n48828125\n244140625", "0\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "原根", "模板题"], "title": "【模板】基于值域预处理的快速离散对数", "background": "模板题，无背景。", "description": "给定质数 $P$ 以及它的一个原根 $g$。\n\n有 $q$ 组询问，每组询问给出整数 $y$，你需要找到最小的非负整数 $x$ 使得 $g^x\\equiv y\\pmod P$。", "inputFormat": "第一行两个整数 $P,g$，描述质数 $P$ 及其一个原根 $g$。\n\n第二行一个整数 $q$，表示询问次数。\n\n接下来 $q$ 行，每行一个整数 $y$，表示每次询问的值。", "outputFormat": "输出共 $q$ 行，每行一个整数表示答案。", "hint": "### 数据范围及约束\n\n- 对于前 $15\\%$ 的数据，满足 $1\\le g < P\\le 100$，$1\\le q\\le 100$；\n- 对于前 $30\\%$ 的数据，满足 $1\\le g < P\\le 10^9+7$，$1\\le q\\le 100$；\n- 另有 $15\\%$ 的数据，满足 $y_i=i$；\n- 另有 $15\\%$ 的数据，满足 $P=998244353$，$g=3$；\n- 对于全部数据，满足 $1\\le g,y_i<P\\le 10^9+7$，$1\\le q\\le 5\\times 10^5$。\n\n请注意读入效率对程序运行速度的影响。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】基于值域预处理的快速离散对数", "background": "模板题，无背景。", "description": "给定质数 $P$ 以及它的一个原根 $g$。\n\n有 $q$ 组询问，每组询问给出整数 $y$，你需要找到最小的非负整数 $x$ 使得 $g^x\\equiv y\\pmod P$。", "inputFormat": "第一行两个整数 $P,g$，描述质数 $P$ 及其一个原根 $g$。\n\n第二行一个整数 $q$，表示询问次数。\n\n接下来 $q$ 行，每行一个整数 $y$，表示每次询问的值。", "outputFormat": "输出共 $q$ 行，每行一个整数表示答案。", "hint": "### 数据范围及约束\n\n- 对于前 $15\\%$ 的数据，满足 $1\\le g < P\\le 100$，$1\\le q\\le 100$；\n- 对于前 $30\\%$ 的数据，满足 $1\\le g < P\\le 10^9+7$，$1\\le q\\le 100$；\n- 另有 $15\\%$ 的数据，满足 $y_i=i$；\n- 另有 $15\\%$ 的数据，满足 $P=998244353$，$g=3$；\n- 对于全部数据，满足 $1\\le g,y_i<P\\le 10^9+7$，$1\\le q\\le 5\\times 10^5$。\n\n请注意读入效率对程序运行速度的影响。", "locale": "zh-CN"}}}
{"pid": "P11176", "type": "P", "difficulty": 1, "samples": [["2\n0\n0", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2018", "ROIR（俄罗斯）"], "title": "[ROIR 2018] 提高成绩 (Day1)", "background": "", "description": "**译自 ROI 2018 Regional. Day1 T1.** ***[Квадраты и кубы](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day1.pdf)***\n\n在中学的计算机课上，学生的答案会被评为 $2$ 到 $5$ 分的整数分数。计算机课的最终成绩是所有课上分数的算术平均值，四舍五入到最接近的整数。如果平均值正好在两个整数之间，则向上取整。\n\n以下是分数四舍五入的示例：\n\n| 课上分数 | 算术平均值 | 最终成绩 |\n| :---: | :---: | :---: |\n| $2,3,5$ | $\\frac{2+3+5}{3}=3 \\frac{1}{3}$ | $3$ |\n| $3,3,4,4$ | $\\frac{3+3+4+4}{4}=3 \\frac{1}{2}$ | $4$ |\n| $5,5,5,3,5$ | $\\frac{5+5+5+3+5}{5}=4 \\frac{3}{5}$ | $5$ |\n\n所有中学的学生都希望计算机课的最终成绩不低于 $4$ 分。不幸的是，有一个学生在课上得了 $a$ 个 $2$ 分，$b$ 个 $3$ 分和 $c$ 个 $4$ 分。现在他计划获得一些 $5$ 分，以确保最终成绩不低于 $4$ 分。他需要知道，至少需要获得多少个 $5$ 分才能达到目标。\n\n需要编写一个程序，根据给定的非负整数 $a$、$b$ 和 $c$，确定学生至少需要获得多少个 $5$ 分，才能使他的计算机课最终成绩不低于 $4$ 分。", "inputFormat": "输入包含三行。第一行包含一个非负整数 $a$，第二行包含一个非负整数 $b$，第三行包含一个非负整数 $c$ $(0 \\leq a, b, c \\leq 10^{15}, a+b+c \\geq 1)$。", "outputFormat": "输出一个整数，表示学生至少需要获得的 $5$ 分的数量，以确保最终成绩不低于 $4$ 分。", "hint": "详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $13$ | $1 \\leq a \\leq 100, b=0, c=0$（学生只得了 $2$ 分） |  \n| $2$ | $14$ | $a=0,1 \\leq b \\leq 100, c=0$（学生只得了 $3$ 分） |  \n| $3$ | $15$ | $0 \\leq a, b, c \\leq 100$ |\n| $4$ | $28$ | $0 \\leq a, b, c \\leq 10^{6}$ |\n| $5$ | $30$ | $0 \\leq a, b, c \\leq 10^{15}$ | ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2018] 提高成绩 (Day1)", "background": "", "description": "**译自 ROI 2018 Regional. Day1 T1.** ***[Квадраты и кубы](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day1.pdf)***\n\n在中学的计算机课上，学生的答案会被评为 $2$ 到 $5$ 分的整数分数。计算机课的最终成绩是所有课上分数的算术平均值，四舍五入到最接近的整数。如果平均值正好在两个整数之间，则向上取整。\n\n以下是分数四舍五入的示例：\n\n| 课上分数 | 算术平均值 | 最终成绩 |\n| :---: | :---: | :---: |\n| $2,3,5$ | $\\frac{2+3+5}{3}=3 \\frac{1}{3}$ | $3$ |\n| $3,3,4,4$ | $\\frac{3+3+4+4}{4}=3 \\frac{1}{2}$ | $4$ |\n| $5,5,5,3,5$ | $\\frac{5+5+5+3+5}{5}=4 \\frac{3}{5}$ | $5$ |\n\n所有中学的学生都希望计算机课的最终成绩不低于 $4$ 分。不幸的是，有一个学生在课上得了 $a$ 个 $2$ 分，$b$ 个 $3$ 分和 $c$ 个 $4$ 分。现在他计划获得一些 $5$ 分，以确保最终成绩不低于 $4$ 分。他需要知道，至少需要获得多少个 $5$ 分才能达到目标。\n\n需要编写一个程序，根据给定的非负整数 $a$、$b$ 和 $c$，确定学生至少需要获得多少个 $5$ 分，才能使他的计算机课最终成绩不低于 $4$ 分。", "inputFormat": "输入包含三行。第一行包含一个非负整数 $a$，第二行包含一个非负整数 $b$，第三行包含一个非负整数 $c$ $(0 \\leq a, b, c \\leq 10^{15}, a+b+c \\geq 1)$。", "outputFormat": "输出一个整数，表示学生至少需要获得的 $5$ 分的数量，以确保最终成绩不低于 $4$ 分。", "hint": "详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $13$ | $1 \\leq a \\leq 100, b=0, c=0$（学生只得了 $2$ 分） |  \n| $2$ | $14$ | $a=0,1 \\leq b \\leq 100, c=0$（学生只得了 $3$ 分） |  \n| $3$ | $15$ | $0 \\leq a, b, c \\leq 100$ |\n| $4$ | $28$ | $0 \\leq a, b, c \\leq 10^{6}$ |\n| $5$ | $30$ | $0 \\leq a, b, c \\leq 10^{15}$ | ", "locale": "zh-CN"}}}
{"pid": "P11177", "type": "P", "difficulty": 2, "samples": [["1\n30\n2", "3"]], "limits": {"time": [200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2018", "ROIR（俄罗斯）"], "title": "[ROIR 2018] 平方与立方 (Day1)", "background": "", "description": "**译自 ROI 2018 Regional. Day1 T2.** ***[Квадраты и кубы](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day1.pdf)***\n\n数学家们研究了「自然数的平方的分布」与「自然数的立方的分布」之间的关系。\n\n已知非负整数 $a,b,k$。考虑集合 $S=\\{a,a+1,\\ldots,b\\}$，该集合的「$k$ 密度」表示的是 $T$ 中元素的个数，其中 $T=\\{(x,y)|$ $x\\in\\mathbb{N},$ $y\\in\\mathbb{N},$ $x^2\\in S,$ $y^3\\in S,$ $|x^2 - y^3| ≤ k\\}$。请求出 $S$ 的 $k$ 密度。\n\n", "inputFormat": "输入包含三行，分别为 $a,b,k$。", "outputFormat": "输出一行，表示答案。", "hint": "### 样例解释\n- $x = 1, y = 1, |x^2 - y^3| = |1 - 1| = 0$;\n- $x = 3, y = 2, |x^2 - y^3| = |9 - 8| = 1$;\n- $x = 5, y = 3, |x^2 - y^3| = |25 - 27| = 2$.\n\n### 数据范围\n\n对于所有数据，$1 ≤ a ≤ b ≤ 10^{18},$ $0 ≤ k ≤ 10^{18}$.\n\n|子任务编号|分值|$1 ≤ a ≤ b ≤ $|$k$|\n|:-:|:-:|:-:|:-:|\n|1|10|$1000$|$k = 0$|\n|2|&nbsp;10&nbsp;|$10^{18}$|$k = 0$|\n|3|15|$1000$|$0 ≤ k ≤ 10$|\n|4|&nbsp;15&nbsp;|$10^6$|$0 ≤ k ≤ 10$|\n|5|15|$10^9$|$0 ≤ k ≤ 10$|\n|6|&nbsp;15&nbsp;|$10^9$|$0 ≤ k ≤ 10^9$|\n|7|20|$10^{18}$|$0 ≤ k ≤ 10^{18}$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2018] 平方与立方 (Day1)", "background": "", "description": "**译自 ROI 2018 Regional. Day1 T2.** ***[Квадраты и кубы](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day1.pdf)***\n\n数学家们研究了「自然数的平方的分布」与「自然数的立方的分布」之间的关系。\n\n已知非负整数 $a,b,k$。考虑集合 $S=\\{a,a+1,\\ldots,b\\}$，该集合的「$k$ 密度」表示的是 $T$ 中元素的个数，其中 $T=\\{(x,y)|$ $x\\in\\mathbb{N},$ $y\\in\\mathbb{N},$ $x^2\\in S,$ $y^3\\in S,$ $|x^2 - y^3| ≤ k\\}$。请求出 $S$ 的 $k$ 密度。\n\n", "inputFormat": "输入包含三行，分别为 $a,b,k$。", "outputFormat": "输出一行，表示答案。", "hint": "### 样例解释\n- $x = 1, y = 1, |x^2 - y^3| = |1 - 1| = 0$;\n- $x = 3, y = 2, |x^2 - y^3| = |9 - 8| = 1$;\n- $x = 5, y = 3, |x^2 - y^3| = |25 - 27| = 2$.\n\n### 数据范围\n\n对于所有数据，$1 ≤ a ≤ b ≤ 10^{18},$ $0 ≤ k ≤ 10^{18}$.\n\n|子任务编号|分值|$1 ≤ a ≤ b ≤ $|$k$|\n|:-:|:-:|:-:|:-:|\n|1|10|$1000$|$k = 0$|\n|2|&nbsp;10&nbsp;|$10^{18}$|$k = 0$|\n|3|15|$1000$|$0 ≤ k ≤ 10$|\n|4|&nbsp;15&nbsp;|$10^6$|$0 ≤ k ≤ 10$|\n|5|15|$10^9$|$0 ≤ k ≤ 10$|\n|6|&nbsp;15&nbsp;|$10^9$|$0 ≤ k ≤ 10^9$|\n|7|20|$10^{18}$|$0 ≤ k ≤ 10^{18}$|", "locale": "zh-CN"}}}
{"pid": "P11178", "type": "P", "difficulty": 4, "samples": [["5 4\n2 3\n2 4\n5 2\n5 3\n9 3", "6\n12\n6\n12\n12"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["模拟", "2018", "ROIR（俄罗斯）"], "title": "[ROIR 2018] 电梯 (Day1)", "background": "", "description": "**译自 ROI 2018 Regional. Day1 T3.** ***[Лифт](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day1.pdf)***\n\n某公司有一座大厦，大厦有 $m$ 层，自底向上依次称作 $1\\ldots m$ 楼（层）。\n\n有 $n$ 名雇员在大厦中工作，其编号分别为 $1\\ldots n$。每天下班时，所有雇员都需坐电梯下到一楼，并离开大厦。已知开始时 $i$ 号雇员位于 $a_i$ 层，该雇员在第 $t_i$ 秒到达该层的电梯口。\n\n每层都有可能有人在等电梯。当一名雇员到达电梯口时，如果这层已经有人摁电梯了，他会等电梯；如果这层没人摁电梯，则他会去摁电梯。摁电梯会给电梯主控发送一个请求信号。\n\n开始时电梯空闲，位于一楼。电梯每秒可以上升 / 下降一层。当第一次有人摁电梯时，电梯会响应该信号，到达对应楼层。如果电梯同时接受到多个信号，则它会响应编号较小的员工的请求信号。\n\n电梯上升至对应楼层时，所有在这层楼等电梯的人都会进入电梯，然后电梯以同样的速度下降，直到电梯到达一楼。对于电梯下降过程中会经过的楼层，如果电梯到达该楼层时该楼层有请求信号，则电梯会在该楼层停，所有在该楼层等电梯的人都会进入电梯。\n\n如果电梯空闲时有至少一个未响应的信号，则电梯会响应最早者。如果有多个最早者，则响应编号最小者。电梯会持续运作，直到 $n$ 名雇员全部到达一楼。\n\n雇员进出电梯的时间忽略不计。每一秒开始时，人们先摁电梯，然后进行对应的行为。（电梯上升 / 下降一层，人们进出电梯，电梯决定响应哪个信号）\n\n请求出每位雇员何时到达一楼。", "inputFormat": "- 第一行：$n,m$\n- 接下来 $n$ 行，每行两个整数，表示 $t_i,a_i$", "outputFormat": "$n$ 行，每行一个整数，表示答案。", "hint": "### 样例解释\n\n|时刻|1 楼| 2 楼| 3 楼| 4 楼|\n|-|-|-|-|-|\n|0|$\\tt []$|&nbsp;||&nbsp;|\n|1|$\\tt []$||&nbsp;||\n|2|$\\tt []↑3$|&nbsp;|$\\tt ☺\\:\\:1$|$\\tt ☺\\:\\:2$|\n|3||$\\tt []↑3$|$\\tt ☺\\:\\:1$|$\\tt ☺\\:\\:2$|\n|4|&nbsp;||$\\tt []←☺\\:\\:1$|$\\tt ☺\\:\\:2$|\n|5||$\\tt [☺\\:\\:1]←☺\\:\\:3$|$\\tt ☺\\:\\:4$|$\\tt ☺\\:\\:2$|\n|6|$\\tt [☺\\:\\:1→,☺\\:\\:3→]↑4$||$\\tt ☺\\:\\:4$|$\\tt ☺\\:\\:2$|\n|7||$\\tt []↑4$|$\\tt ☺\\:\\:4$|$\\tt ☺\\:\\:2$|\n|8|&nbsp;||$\\tt []↑4  ☺\\:\\:4$|$\\tt ☺\\:\\:2$|\n|9||&nbsp;|$\\tt ☺\\:\\:4,☺\\:\\:5$|$\\tt []←☺\\:\\:2$|\n|10|&nbsp;||$\\tt [☺\\:\\:2]←☺\\:\\:4,←☺\\:\\:5$||\n|11||$\\tt [☺\\:\\:2,☺\\:\\:4,☺\\:\\:5]$||&nbsp;|\n|12|$\\tt [☺\\:\\:2→,☺\\:\\:4→,☺\\:\\:5→]$||&nbsp;||\n\n---\n|符号|含义|符号|含义|\n|-|-|-|-|\n|$\\tt []↑3$|电梯将上到 3 楼|$\\tt []←☺\\:\\:1$|1 号雇员进入电梯|\n|$\\tt [☺\\:\\:1→,☺\\:\\:3→]$|1 号和 3 号雇员走出电梯|$\\tt [☺\\:\\:1→]↑4$|1 号雇员走出电梯后，电梯准备上到 4 楼|\n\n### 数据范围\n\n对于所有数据，$1 \\leqslant n \\leqslant 10^5,$ $2 \\leqslant m \\leqslant 10^9,$ $1 \\leqslant t_1 \\leqslant t_2 \\leqslant \\dots \\leqslant t_n \\leqslant 10^9, 2 \\leqslant a_i \\leqslant m$.\n\n|子任务 #|分值|$n$|$m$|$t_i$|\n|-|-|-|-|-|\n|1|15|$n = 1$|$2 \\leqslant m \\leqslant 100$|$1 \\leqslant t_i \\leqslant 100$|\n|2|30|$1 \\leqslant n \\leqslant 100$|$2 \\leqslant m \\leqslant 100$|$1 \\leqslant t_i \\leqslant 100$|\n|3|16|$1 \\leqslant n \\leqslant 100$&nbsp;|$2 \\leqslant m \\leqslant 10^9$|$1 \\leqslant t_i \\leqslant 10^9$|\n|4|12|$1 \\leqslant n \\leqslant 10^5$|$2 \\leqslant m \\leqslant 10^4$|$1 \\leqslant t_i \\leqslant 10^4$|\n|5|27|$1 \\leqslant n \\leqslant 10^5$&nbsp;|$2 \\leqslant m \\leqslant 10^9$|$1 \\leqslant t_i \\leqslant 10^9$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2018] 电梯 (Day1)", "background": "", "description": "**译自 ROI 2018 Regional. Day1 T3.** ***[Лифт](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day1.pdf)***\n\n某公司有一座大厦，大厦有 $m$ 层，自底向上依次称作 $1\\ldots m$ 楼（层）。\n\n有 $n$ 名雇员在大厦中工作，其编号分别为 $1\\ldots n$。每天下班时，所有雇员都需坐电梯下到一楼，并离开大厦。已知开始时 $i$ 号雇员位于 $a_i$ 层，该雇员在第 $t_i$ 秒到达该层的电梯口。\n\n每层都有可能有人在等电梯。当一名雇员到达电梯口时，如果这层已经有人摁电梯了，他会等电梯；如果这层没人摁电梯，则他会去摁电梯。摁电梯会给电梯主控发送一个请求信号。\n\n开始时电梯空闲，位于一楼。电梯每秒可以上升 / 下降一层。当第一次有人摁电梯时，电梯会响应该信号，到达对应楼层。如果电梯同时接受到多个信号，则它会响应编号较小的员工的请求信号。\n\n电梯上升至对应楼层时，所有在这层楼等电梯的人都会进入电梯，然后电梯以同样的速度下降，直到电梯到达一楼。对于电梯下降过程中会经过的楼层，如果电梯到达该楼层时该楼层有请求信号，则电梯会在该楼层停，所有在该楼层等电梯的人都会进入电梯。\n\n如果电梯空闲时有至少一个未响应的信号，则电梯会响应最早者。如果有多个最早者，则响应编号最小者。电梯会持续运作，直到 $n$ 名雇员全部到达一楼。\n\n雇员进出电梯的时间忽略不计。每一秒开始时，人们先摁电梯，然后进行对应的行为。（电梯上升 / 下降一层，人们进出电梯，电梯决定响应哪个信号）\n\n请求出每位雇员何时到达一楼。", "inputFormat": "- 第一行：$n,m$\n- 接下来 $n$ 行，每行两个整数，表示 $t_i,a_i$", "outputFormat": "$n$ 行，每行一个整数，表示答案。", "hint": "### 样例解释\n\n|时刻|1 楼| 2 楼| 3 楼| 4 楼|\n|-|-|-|-|-|\n|0|$\\tt []$|&nbsp;||&nbsp;|\n|1|$\\tt []$||&nbsp;||\n|2|$\\tt []↑3$|&nbsp;|$\\tt ☺\\:\\:1$|$\\tt ☺\\:\\:2$|\n|3||$\\tt []↑3$|$\\tt ☺\\:\\:1$|$\\tt ☺\\:\\:2$|\n|4|&nbsp;||$\\tt []←☺\\:\\:1$|$\\tt ☺\\:\\:2$|\n|5||$\\tt [☺\\:\\:1]←☺\\:\\:3$|$\\tt ☺\\:\\:4$|$\\tt ☺\\:\\:2$|\n|6|$\\tt [☺\\:\\:1→,☺\\:\\:3→]↑4$||$\\tt ☺\\:\\:4$|$\\tt ☺\\:\\:2$|\n|7||$\\tt []↑4$|$\\tt ☺\\:\\:4$|$\\tt ☺\\:\\:2$|\n|8|&nbsp;||$\\tt []↑4  ☺\\:\\:4$|$\\tt ☺\\:\\:2$|\n|9||&nbsp;|$\\tt ☺\\:\\:4,☺\\:\\:5$|$\\tt []←☺\\:\\:2$|\n|10|&nbsp;||$\\tt [☺\\:\\:2]←☺\\:\\:4,←☺\\:\\:5$||\n|11||$\\tt [☺\\:\\:2,☺\\:\\:4,☺\\:\\:5]$||&nbsp;|\n|12|$\\tt [☺\\:\\:2→,☺\\:\\:4→,☺\\:\\:5→]$||&nbsp;||\n\n---\n|符号|含义|符号|含义|\n|-|-|-|-|\n|$\\tt []↑3$|电梯将上到 3 楼|$\\tt []←☺\\:\\:1$|1 号雇员进入电梯|\n|$\\tt [☺\\:\\:1→,☺\\:\\:3→]$|1 号和 3 号雇员走出电梯|$\\tt [☺\\:\\:1→]↑4$|1 号雇员走出电梯后，电梯准备上到 4 楼|\n\n### 数据范围\n\n对于所有数据，$1 \\leqslant n \\leqslant 10^5,$ $2 \\leqslant m \\leqslant 10^9,$ $1 \\leqslant t_1 \\leqslant t_2 \\leqslant \\dots \\leqslant t_n \\leqslant 10^9, 2 \\leqslant a_i \\leqslant m$.\n\n|子任务 #|分值|$n$|$m$|$t_i$|\n|-|-|-|-|-|\n|1|15|$n = 1$|$2 \\leqslant m \\leqslant 100$|$1 \\leqslant t_i \\leqslant 100$|\n|2|30|$1 \\leqslant n \\leqslant 100$|$2 \\leqslant m \\leqslant 100$|$1 \\leqslant t_i \\leqslant 100$|\n|3|16|$1 \\leqslant n \\leqslant 100$&nbsp;|$2 \\leqslant m \\leqslant 10^9$|$1 \\leqslant t_i \\leqslant 10^9$|\n|4|12|$1 \\leqslant n \\leqslant 10^5$|$2 \\leqslant m \\leqslant 10^4$|$1 \\leqslant t_i \\leqslant 10^4$|\n|5|27|$1 \\leqslant n \\leqslant 10^5$&nbsp;|$2 \\leqslant m \\leqslant 10^9$|$1 \\leqslant t_i \\leqslant 10^9$|", "locale": "zh-CN"}}}
{"pid": "P11179", "type": "P", "difficulty": 6, "samples": [["3 3 0\n1 a\n2 b\n3 a\n4 b\n2 a", "6"], ["7 3 1\n1 a\n2 a\n3 b\n3 b\n1 b\n6 b\n3 aab\n5 b\n2 ab", "15\n4\n1 4 1\n2 5 3\n1 6 2\n6 7 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2018", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2018] 管道监控 (Day1)", "background": "", "description": "**译自 ROI 2018 Regional. Day1 T4.** ***[Мониторинг труб](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day1.pdf)***\n\n某输气系统包含 $n$ 个节点，编号分别为 $1\\ldots n$，某些节点间有单向管道连接。$1$ 号节点是中央储气设施。\n\n节点系统可用数列 $p_2,$ $p_3,$ $\\ldots,$ $p_n$ 来表示。对于 $i\\in[\\;\\!2,n\\;\\!],$ $p_i$ 号节点会有一条通向 $i$ 号节点的单向管道。已知中央储气设施可以将气体输送到系统中的所有节点。输气系统包含不同种类的管道，用英文小写字母 $\\texttt{a}\\sim\\texttt{z}$ 来表示。$p_i$ 号节点通向 $i$ 号节点的管道的类型为 $c_i$。\n\n有一种特殊的机器人被用来检查管道的质量。我们把「机器人从一个节点沿着一根管道前行到另一个节点，且机器人前进方向与气体方向一致」称作「一次移动」。\n\n机器人会先被放在一个节点中，然后它会进行一次或多次移动，最后被人从输气系统中取出。这被称为「机器人进行了一次执勤」。\n\n每次执勤时都需遵循 $m$ 种「规格」中的其中一种，这些规格的编号分别为 $1\\ldots m$。每种规格都用一个由英文小写字母组成的字符串 $st_k$ 来表示。如果在一次执勤中机器人遵循了 $k$ 号规范，则在这次执勤中，机器人移动的次数与 $\\mathrm{len}(st_k)$ 相等，并且对于 $j\\in[1,\\mathrm{len}(st_k)],$ $st_{k\\:\\!,\\;\\!j}$ 等于机器人第 $j$ 次经过的管道的类型。\n\n若某次执勤遵循了 $t$ 号规格，则这次的花费为 $w_t$。\n\n请问，要想让所有的管道都至少被检查一次，至少需要花费多少钱，并给出执勤路线的方案。\n", "inputFormat": "第一行：$n,m,t$，$t$ 的含义在【输出格式】中。\n\n接下来 $n-1$ 行：$p_i,$ $c_i$ 。\n\n接下来 $m$ 行：$w_i,$ $st_i$。", "outputFormat": "第一行包含一个整数，表示最小花费。若无解请输出 $-1$。\n\n若 $t=0$ 就不用管后续了，若 $t=1$ 且有解则需输出方案。 \n\n输出方案时，在第一行输出最小花费之后，第二行应包含方案中路径的数量 $k$，接下来 $k$ 行，每行包括三个整数 $a_i,$ $b_i,$ $c_i$，依次表示一条执勤路线的起点、终点，以及这次执勤所使用的规格。", "hint": "### 样例 2 解释\n\n![kxhEVg.png](https://s2.ax1x.com/2019/03/07/kxhEVg.png)\n\n### 数据范围\n\n对于所有数据，$1 ≤ n ≤ 500,$ $1 ≤ m ≤ 10^5,$ $t=0$ 或 $1,$ $1 ≤ p_i ≤ i-1,$ $1 ≤ w_i ≤ 10^9,$ $\\sum \\mathrm{len}(st_k) ≤ 10^6$.\n\n|子任务 #|分值|$n≤$|$m≤$|特殊条件|$t$|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|1|9|$500$| $10^5$|$\\mathrm{len}(st_i)=1$|$t = 0$|\n|2|10|$500$| $10^5$|$p_i=i-1$|$t = 0$|\n|3|22|$15$| $10^5$||$t = 0$||\n|4|20|$500$| $500$|&nbsp;|$t = 0$|\n|5|19|$500$| $10^5$||$t = 0$|\n|6|20|$500$| $10^5$|&nbsp;|$t = 1$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2018] 管道监控 (Day1)", "background": "", "description": "**译自 ROI 2018 Regional. Day1 T4.** ***[Мониторинг труб](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day1.pdf)***\n\n某输气系统包含 $n$ 个节点，编号分别为 $1\\ldots n$，某些节点间有单向管道连接。$1$ 号节点是中央储气设施。\n\n节点系统可用数列 $p_2,$ $p_3,$ $\\ldots,$ $p_n$ 来表示。对于 $i\\in[\\;\\!2,n\\;\\!],$ $p_i$ 号节点会有一条通向 $i$ 号节点的单向管道。已知中央储气设施可以将气体输送到系统中的所有节点。输气系统包含不同种类的管道，用英文小写字母 $\\texttt{a}\\sim\\texttt{z}$ 来表示。$p_i$ 号节点通向 $i$ 号节点的管道的类型为 $c_i$。\n\n有一种特殊的机器人被用来检查管道的质量。我们把「机器人从一个节点沿着一根管道前行到另一个节点，且机器人前进方向与气体方向一致」称作「一次移动」。\n\n机器人会先被放在一个节点中，然后它会进行一次或多次移动，最后被人从输气系统中取出。这被称为「机器人进行了一次执勤」。\n\n每次执勤时都需遵循 $m$ 种「规格」中的其中一种，这些规格的编号分别为 $1\\ldots m$。每种规格都用一个由英文小写字母组成的字符串 $st_k$ 来表示。如果在一次执勤中机器人遵循了 $k$ 号规范，则在这次执勤中，机器人移动的次数与 $\\mathrm{len}(st_k)$ 相等，并且对于 $j\\in[1,\\mathrm{len}(st_k)],$ $st_{k\\:\\!,\\;\\!j}$ 等于机器人第 $j$ 次经过的管道的类型。\n\n若某次执勤遵循了 $t$ 号规格，则这次的花费为 $w_t$。\n\n请问，要想让所有的管道都至少被检查一次，至少需要花费多少钱，并给出执勤路线的方案。\n", "inputFormat": "第一行：$n,m,t$，$t$ 的含义在【输出格式】中。\n\n接下来 $n-1$ 行：$p_i,$ $c_i$ 。\n\n接下来 $m$ 行：$w_i,$ $st_i$。", "outputFormat": "第一行包含一个整数，表示最小花费。若无解请输出 $-1$。\n\n若 $t=0$ 就不用管后续了，若 $t=1$ 且有解则需输出方案。 \n\n输出方案时，在第一行输出最小花费之后，第二行应包含方案中路径的数量 $k$，接下来 $k$ 行，每行包括三个整数 $a_i,$ $b_i,$ $c_i$，依次表示一条执勤路线的起点、终点，以及这次执勤所使用的规格。", "hint": "### 样例 2 解释\n\n![kxhEVg.png](https://s2.ax1x.com/2019/03/07/kxhEVg.png)\n\n### 数据范围\n\n对于所有数据，$1 ≤ n ≤ 500,$ $1 ≤ m ≤ 10^5,$ $t=0$ 或 $1,$ $1 ≤ p_i ≤ i-1,$ $1 ≤ w_i ≤ 10^9,$ $\\sum \\mathrm{len}(st_k) ≤ 10^6$.\n\n|子任务 #|分值|$n≤$|$m≤$|特殊条件|$t$|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|1|9|$500$| $10^5$|$\\mathrm{len}(st_i)=1$|$t = 0$|\n|2|10|$500$| $10^5$|$p_i=i-1$|$t = 0$|\n|3|22|$15$| $10^5$||$t = 0$||\n|4|20|$500$| $500$|&nbsp;|$t = 0$|\n|5|19|$500$| $10^5$||$t = 0$|\n|6|20|$500$| $10^5$|&nbsp;|$t = 1$|", "locale": "zh-CN"}}}
{"pid": "P11180", "type": "P", "difficulty": 2, "samples": [["13\n2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2018", "ROIR（俄罗斯）"], "title": "[ROIR 2018] 删除数字 (Day2)", "background": "", "description": "**译自 ROI 2018 Regional. Day2 T1.** ***[Удаление чисел](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day2.pdf)***\n\n给定一个从 $1$ 到 $n$ 的自然数序列和一个自然数 $k$。通过一个或多个操作删除序列中的数字。在每一个操作中，按升序查看剩余的数字，每隔 $k$ 个数字删除一个。如果在某一个操作之后剩余的数字少于 $k$ 个，则删除过程结束。\n\n需要确定在第几个操作删除数字 $n$，或者判断在删除过程结束前数字 $n$ 是否不会被删除。\n\n例如，设 $n=13, k=2$。\n\n- 第一个操作将删除数字 $2, 4, 6, 8, 10, 12$，剩下的数字是 $1, 3, 5, 7, 9, 11, 13$。\n- 第二个操作将删除数字 $3, 7, 11$，剩下的数字是 $1, 5, 9, 13$。\n- 第三个操作将删除数字 $5, 13$，剩下的数字是 $1, 9$。\n- 第四个操作将删除数字 $9$，剩下的数字是 $1$。由于只剩下一个数字，删除过程结束。\n\n因此，数字 $13$ 将在第三个操作被删除。\n\n需要编写一个程序，根据给定的 $n$ 和 $k$ 确定数字 $n$ 在第几个操作被删除。", "inputFormat": "第一行输入包含一个整数 $n$ $(3 \\leq n \\leq 10^{18})$。\n\n第二行输入包含一个整数 $k$ $(2 \\leq k \\leq 100, k < n)$。", "outputFormat": "输出一个整数，表示数字 $n$ 被删除的操作编号；如果数字 $n$ 不会被删除，则输出 $0$。", "hint": "详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | $n$ 的限制 | $k$ 的限制 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $16$ | $3 \\leq n \\leq 1000$ | $k=2$ | \n| $2$ | $10$ | $3 \\leq n \\leq 10^{18}$ | $k=2$ |\n| $3$ | $14$ | $3 \\leq n \\leq 1000$ | $2 \\leq k \\leq 100, k < n$ |\n| $4$ | $20$ | $3 \\leq n \\leq 10^{6}$ | $2 \\leq k \\leq 100, k < n$ |\n| $5$ | $40$ | $3 \\leq n \\leq 10^{18}$ | $2 \\leq k \\leq 100, k < n$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2018] 删除数字 (Day2)", "background": "", "description": "**译自 ROI 2018 Regional. Day2 T1.** ***[Удаление чисел](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day2.pdf)***\n\n给定一个从 $1$ 到 $n$ 的自然数序列和一个自然数 $k$。通过一个或多个操作删除序列中的数字。在每一个操作中，按升序查看剩余的数字，每隔 $k$ 个数字删除一个。如果在某一个操作之后剩余的数字少于 $k$ 个，则删除过程结束。\n\n需要确定在第几个操作删除数字 $n$，或者判断在删除过程结束前数字 $n$ 是否不会被删除。\n\n例如，设 $n=13, k=2$。\n\n- 第一个操作将删除数字 $2, 4, 6, 8, 10, 12$，剩下的数字是 $1, 3, 5, 7, 9, 11, 13$。\n- 第二个操作将删除数字 $3, 7, 11$，剩下的数字是 $1, 5, 9, 13$。\n- 第三个操作将删除数字 $5, 13$，剩下的数字是 $1, 9$。\n- 第四个操作将删除数字 $9$，剩下的数字是 $1$。由于只剩下一个数字，删除过程结束。\n\n因此，数字 $13$ 将在第三个操作被删除。\n\n需要编写一个程序，根据给定的 $n$ 和 $k$ 确定数字 $n$ 在第几个操作被删除。", "inputFormat": "第一行输入包含一个整数 $n$ $(3 \\leq n \\leq 10^{18})$。\n\n第二行输入包含一个整数 $k$ $(2 \\leq k \\leq 100, k < n)$。", "outputFormat": "输出一个整数，表示数字 $n$ 被删除的操作编号；如果数字 $n$ 不会被删除，则输出 $0$。", "hint": "详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | $n$ 的限制 | $k$ 的限制 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $16$ | $3 \\leq n \\leq 1000$ | $k=2$ | \n| $2$ | $10$ | $3 \\leq n \\leq 10^{18}$ | $k=2$ |\n| $3$ | $14$ | $3 \\leq n \\leq 1000$ | $2 \\leq k \\leq 100, k < n$ |\n| $4$ | $20$ | $3 \\leq n \\leq 10^{6}$ | $2 \\leq k \\leq 100, k < n$ |\n| $5$ | $40$ | $3 \\leq n \\leq 10^{18}$ | $2 \\leq k \\leq 100, k < n$ |", "locale": "zh-CN"}}}
{"pid": "P11181", "type": "P", "difficulty": 3, "samples": [["1\n8", "3"]], "limits": {"time": [250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2018", "ROIR（俄罗斯）"], "title": "[ROIR 2018] 书页 (Day2)", "background": "", "description": "**译自 ROI 2018 Regional. Day2 T2.** ***[Старая книга](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day2.pdf)***\n\n一群年轻的考古学家正在发掘一座古图书馆。他们偶然发现了一本旧书的残片。经过研究，他们得出了以下结论。\n\n每一页上要么全是文本（称为文本页），要么全是插图（称为插图页）。已知前 $k$ 页全是插图页。这本书有页码，但只在文本页注明页码。已知注明的页码的总和为 $s$。\n\n很可惜，考古学家既无法确定这本书有多少页，也无法确定哪些页面是插图页。不过，考古学家想知道，这本书最少有几个插图页。", "inputFormat": "第一行一个整数 $k$，第二行一个整数 $s$。", "outputFormat": "输出一行，表示这本书最少有几个插图页。", "hint": "### 样例解释\n\n满足 $k=1,$ $s=8$ 的情况共有三种：\n- 图文图图图文（4 个插图页）\n- 图图文图文（3 个插图页）\n- 图图图图图图图文（7 个插图页）\n\n综上，至少会有 3 个插图页。\n\n### 数据范围\n\n|子任务编号|分值|$k$|$s$|\n|:-:|:-:|:-:|:-:|\n|1|15|$k = 0$|$1 ≤ s ≤ 200$|\n|2|20|$k = 0$|$1 ≤ s ≤ 10^{12}$|\n|3|30|$0 ≤ k ≤ 199$|$k + 1 ≤ s ≤ 200$|\n|4|35|$0 ≤ k ≤ 10^9$|$k + 1 ≤ s ≤ 10^{12}$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2018] 书页 (Day2)", "background": "", "description": "**译自 ROI 2018 Regional. Day2 T2.** ***[Старая книга](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day2.pdf)***\n\n一群年轻的考古学家正在发掘一座古图书馆。他们偶然发现了一本旧书的残片。经过研究，他们得出了以下结论。\n\n每一页上要么全是文本（称为文本页），要么全是插图（称为插图页）。已知前 $k$ 页全是插图页。这本书有页码，但只在文本页注明页码。已知注明的页码的总和为 $s$。\n\n很可惜，考古学家既无法确定这本书有多少页，也无法确定哪些页面是插图页。不过，考古学家想知道，这本书最少有几个插图页。", "inputFormat": "第一行一个整数 $k$，第二行一个整数 $s$。", "outputFormat": "输出一行，表示这本书最少有几个插图页。", "hint": "### 样例解释\n\n满足 $k=1,$ $s=8$ 的情况共有三种：\n- 图文图图图文（4 个插图页）\n- 图图文图文（3 个插图页）\n- 图图图图图图图文（7 个插图页）\n\n综上，至少会有 3 个插图页。\n\n### 数据范围\n\n|子任务编号|分值|$k$|$s$|\n|:-:|:-:|:-:|:-:|\n|1|15|$k = 0$|$1 ≤ s ≤ 200$|\n|2|20|$k = 0$|$1 ≤ s ≤ 10^{12}$|\n|3|30|$0 ≤ k ≤ 199$|$k + 1 ≤ s ≤ 200$|\n|4|35|$0 ≤ k ≤ 10^9$|$k + 1 ≤ s ≤ 10^{12}$|", "locale": "zh-CN"}}}
{"pid": "P11182", "type": "P", "difficulty": 3, "samples": [["4 2\n1 1 2", "10"]], "limits": {"time": [250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2018", "ROIR（俄罗斯）"], "title": "[ROIR 2018] 分形 (Day2)", "background": "", "description": "**译自 ROI 2018 Regional. Day2 T3.** ***[Красота фейерверка](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day2.pdf)***\n\n已知一棵包含 $n$ 个元素的有根树 $T^1$。定义 $T^m$ 为一棵树，生成方式是在 $T^{m-1}$ 的每个叶结点下面连一棵 $T^1$ 而得。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s596ep9z.png)\n\n试求 $T^m$ 的直径的长度（这里的长度指的是直径上的点数）。", "inputFormat": "第一行 $n,m$。  \n第二行 $p_2\\ldots p_n,\\ \\ $ $p_i$ 表示结点 $p_i$ 与结点 $i$ 有边连接。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g4tsci1c.png)\n\n### 数据范围\n\n$3≤n≤2\\times 10^5,$ $1≤m≤2\\times 10^5,$ $1\\le p_i\\le i-1.$\n\n|子任务编号|分值|$n$|$m$|\n|:-:|:-:|:-:|:-:|\n|1|19|$3 ≤ n ≤ 5000$|$m = 1$|\n|2|10| |$m=1$|\n|3|20|$3 ≤ n ≤ 5000$|$1 ≤ m ≤ 5000$|\n|4|19|$3 ≤ n≤ 5000$||\n|5|32||&nbsp;|\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2018] 分形 (Day2)", "background": "", "description": "**译自 ROI 2018 Regional. Day2 T3.** ***[Красота фейерверка](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day2.pdf)***\n\n已知一棵包含 $n$ 个元素的有根树 $T^1$。定义 $T^m$ 为一棵树，生成方式是在 $T^{m-1}$ 的每个叶结点下面连一棵 $T^1$ 而得。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s596ep9z.png)\n\n试求 $T^m$ 的直径的长度（这里的长度指的是直径上的点数）。", "inputFormat": "第一行 $n,m$。  \n第二行 $p_2\\ldots p_n,\\ \\ $ $p_i$ 表示结点 $p_i$ 与结点 $i$ 有边连接。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g4tsci1c.png)\n\n### 数据范围\n\n$3≤n≤2\\times 10^5,$ $1≤m≤2\\times 10^5,$ $1\\le p_i\\le i-1.$\n\n|子任务编号|分值|$n$|$m$|\n|:-:|:-:|:-:|:-:|\n|1|19|$3 ≤ n ≤ 5000$|$m = 1$|\n|2|10| |$m=1$|\n|3|20|$3 ≤ n ≤ 5000$|$1 ≤ m ≤ 5000$|\n|4|19|$3 ≤ n≤ 5000$||\n|5|32||&nbsp;|\n", "locale": "zh-CN"}}}
{"pid": "P11183", "type": "P", "difficulty": 6, "samples": [["3 3 2\n1 1\n2 2\n5 1", "3"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2018", "ROIR（俄罗斯）"], "title": "[ROIR 2018] 大数据处理 (Day2)", "background": "", "description": "**译自 ROI 2018 Regional. Day2 T4.** ***[Обработка больших данных](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day2.pdf)***\n\n某实验室正在研发一种能处理大规模数据的新型超级计算机。\n\n这台超算的内存包含 $2^k$ 个存储单元，依次编号为 $0\\ldots 2^k-1.$ 用内存段 $[L,R]$ 表示编号 $≥L$ 且 $≤R$ 的所有存储单元，该内存段的长度为 $R-L+1.$\n\n定义：如果内存段 $[L,R]$ 的长度是 $2$ 的整数次幂（不妨假设是 $2^i$），且 $L$ 是 $2^i$ 的整数倍，那么这个内存段是「正确的内存段」。\n\n若 $k=3,$ 则正确的内存段为 $[0,7],$ $[0,3],$ $[4,7],$ $[0,1],$ $[2,3],$ $[4,5],$ $[6,7],$ $[0,0],$ $[1,1],$ $[2,2],$ $[3,3],$ $[4,4],$ $[5,5],$ $[6,6]$ 和 $[7,7].$\n\n现在，每个存储单元所存储的值均为 0. 你需要给每个存储单元赋值。简单起见，我们用游程编码的形式给出每个单元上的值。开头的 $c_1$ 个单元中存储的值为 $v_1,$ 接下来 $c_2$ 个单元中存储的的值为 $v_2,$ 以此类推，最后的 $c_n$ 个单元中存储的值为 $c_n,$ $1≤v_i≤m.$\n\n举个例子，如果 $k = 3,$ $n = 3,$ $m = 2,$ $c = \\{1,$ $2,$ $5\\},$ $v = \\{1,$ $2,$ $1\\},$ 那么内存将被赋值为 $[1,$ $2,$ $2,$ $1,$ $1,$ $1,$ $1,$ $1].$\n\n你只有一种方法给单元赋值：$\\mathtt{STORE}([l,r],x).$ 该函数表示将内存段 $[l,r]$ 中所有单元全部赋值为 $x.$ 注意，$[l,r]$ 必须是合法的内存段。\n\n试求至少需要多少次操作才能达成要求。", "inputFormat": "第一行三个整数 $k,n,m$。  \n接下来的 $n$ 行，每行两个整数 $c_i,v_i$。", "outputFormat": "输出一行一个整数，表示至少的次数。", "hint": "### 样例解释\n\n目标：$[1, 2, 2, 1, 1, 1, 1, 1]$\n- $\\mathtt{STORE}([0, 7], 1),$ 得到 $[1, 1, 1, 1, 1, 1, 1, 1];$\n- $\\mathtt{STORE}([1, 1], 2),$ 得到 $[1, 2, 1, 1, 1, 1, 1, 1];$\n- $\\mathtt{STORE}([2, 2], 2),$ 得到 $[1, 2, 2, 1, 1, 1, 1, 1].$\n\n### 数据范围\n\n$0 ≤ k ≤ 30,$ $1 ≤ n ≤ 10^5,$ $1 ≤ m ≤ 10^9.$\n\n|子任务编号|分值|$k\\le $|$k\\le$|$m\\le$|\n|:-:|:-:|:-:|:-:|:-:|\n|1|15|$3$|$8$|&nbsp;$8$&nbsp;|\n|2|&nbsp;15&nbsp;|$19$| |$10$|\n|3|15| | |$10$|\n|4|10| | |$50$|\n|5|15|$19$| | |\n|6|30| | | |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2018] 大数据处理 (Day2)", "background": "", "description": "**译自 ROI 2018 Regional. Day2 T4.** ***[Обработка больших данных](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day2.pdf)***\n\n某实验室正在研发一种能处理大规模数据的新型超级计算机。\n\n这台超算的内存包含 $2^k$ 个存储单元，依次编号为 $0\\ldots 2^k-1.$ 用内存段 $[L,R]$ 表示编号 $≥L$ 且 $≤R$ 的所有存储单元，该内存段的长度为 $R-L+1.$\n\n定义：如果内存段 $[L,R]$ 的长度是 $2$ 的整数次幂（不妨假设是 $2^i$），且 $L$ 是 $2^i$ 的整数倍，那么这个内存段是「正确的内存段」。\n\n若 $k=3,$ 则正确的内存段为 $[0,7],$ $[0,3],$ $[4,7],$ $[0,1],$ $[2,3],$ $[4,5],$ $[6,7],$ $[0,0],$ $[1,1],$ $[2,2],$ $[3,3],$ $[4,4],$ $[5,5],$ $[6,6]$ 和 $[7,7].$\n\n现在，每个存储单元所存储的值均为 0. 你需要给每个存储单元赋值。简单起见，我们用游程编码的形式给出每个单元上的值。开头的 $c_1$ 个单元中存储的值为 $v_1,$ 接下来 $c_2$ 个单元中存储的的值为 $v_2,$ 以此类推，最后的 $c_n$ 个单元中存储的值为 $c_n,$ $1≤v_i≤m.$\n\n举个例子，如果 $k = 3,$ $n = 3,$ $m = 2,$ $c = \\{1,$ $2,$ $5\\},$ $v = \\{1,$ $2,$ $1\\},$ 那么内存将被赋值为 $[1,$ $2,$ $2,$ $1,$ $1,$ $1,$ $1,$ $1].$\n\n你只有一种方法给单元赋值：$\\mathtt{STORE}([l,r],x).$ 该函数表示将内存段 $[l,r]$ 中所有单元全部赋值为 $x.$ 注意，$[l,r]$ 必须是合法的内存段。\n\n试求至少需要多少次操作才能达成要求。", "inputFormat": "第一行三个整数 $k,n,m$。  \n接下来的 $n$ 行，每行两个整数 $c_i,v_i$。", "outputFormat": "输出一行一个整数，表示至少的次数。", "hint": "### 样例解释\n\n目标：$[1, 2, 2, 1, 1, 1, 1, 1]$\n- $\\mathtt{STORE}([0, 7], 1),$ 得到 $[1, 1, 1, 1, 1, 1, 1, 1];$\n- $\\mathtt{STORE}([1, 1], 2),$ 得到 $[1, 2, 1, 1, 1, 1, 1, 1];$\n- $\\mathtt{STORE}([2, 2], 2),$ 得到 $[1, 2, 2, 1, 1, 1, 1, 1].$\n\n### 数据范围\n\n$0 ≤ k ≤ 30,$ $1 ≤ n ≤ 10^5,$ $1 ≤ m ≤ 10^9.$\n\n|子任务编号|分值|$k\\le $|$k\\le$|$m\\le$|\n|:-:|:-:|:-:|:-:|:-:|\n|1|15|$3$|$8$|&nbsp;$8$&nbsp;|\n|2|&nbsp;15&nbsp;|$19$| |$10$|\n|3|15| | |$10$|\n|4|10| | |$50$|\n|5|15|$19$| | |\n|6|30| | | |", "locale": "zh-CN"}}}
{"pid": "P11184", "type": "P", "difficulty": 2, "samples": [["2\n10 2\n1 0\n", "2\n1\n"], ["参见 division/division2.in", "参见 division/division2.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "洛谷原创", "洛谷月赛"], "title": "带余除法", "background": "**注意：提交至洛谷时，请使用标准输入输出，而非文件输入输出。**\n\n**NOTICE: When submitting your code on Luogu site, please use standard IO instead of file IO.**\n\n[点我（或在本题底部）下载中文试题 PDF。](https://www.luogu.com.cn/fe/api/problem/downloadAttachment/asjh3my3?contestId=200686)\n\n[Click here (or at the bottom  of this page) to download the English version of statements (PDF).](https://www.luogu.com.cn/fe/api/problem/downloadAttachment/lkux3617?contestId=200686)\n\n**注意：本次比赛所有题目的大样例均为 Linux 换行符格式，在 Windows 系统内可能无法正常显示换行。**\n", "description": "我们已经学过带余除法。对于两个正整数 $n,q$，如果 $n$ 除以 $q$ 的商为 $k$，余数为 $r$，我们可以写出带余除法算式 $n\\div q = k \\cdots\\cdots r$，或被记为 $n\\div q = k (\\text{r. } r)$。本题中，为了简化，哪怕 $r=0$，我们也要写出这个余数。\n\n现在有一个带余除法，然而你只知道被除数 $n​$ 和商 $k​$，而并不知道除数 $q​$ 和余数 $r​$。你想知道余数有多少种可能。", "inputFormat": "**本题有多组测试数据**。输入的第一行有一个正整数 $T$，表示数据组数。\n\n之后 $T$ 行，每行有一个正整数 $n$ 和自然数 $k$，分别表示带余除法的被除数和商。", "outputFormat": "对于每组测试数据，输出一行一个自然数，表示余数的不同可能性数量。", "hint": "【样例 1 解释】\n\n对于第一组数据，被除数为 $10$，商为 $2$。\n\n- 如果除数是 $1,2,3$，那么商分别是 $k=10,5,3$，不符合题意。\n- 如果除数是 $4$，那么商为 $2$，余数为 $r=2$。\n- 如果除数是 $5$，那么商为 $2$，余数为 $r=0$。\n- 如果除数是 $6,7,8,9,10$，那么商都是 $1$，不符合题意。\n- 如果除数 $>10$，那么商为 $0$，不符合题意。\n\n对于第二组数据，被除数为 $1$，商为 $0$。\n\n只要除数 $q>1$，那么 $1\\div q = 0 \\cdots\\cdots 1$ 一定是正确的带余除法算式。余数只有 $1$ 这一种可能。\n\n【数据范围】\n\n对于前 $30\\%$ 的数据，保证 $1\\le n\\le 1000$，$0\\le k\\le 1000$。\n\n另有 $20\\%$ 的数据，保证 $k\\le 10^5$。\n\n另有 $20\\%$ 的数据，保证 $k\\ge 10^9$。\n\n对于全体数据，保证 $1\\le T\\le 10$，$1\\le n\\le 10^{14}$，$0\\le k\\le 10^{14}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "带余除法", "background": "**注意：提交至洛谷时，请使用标准输入输出，而非文件输入输出。**\n\n**NOTICE: When submitting your code on Luogu site, please use standard IO instead of file IO.**\n\n[点我（或在本题底部）下载中文试题 PDF。](https://www.luogu.com.cn/fe/api/problem/downloadAttachment/asjh3my3?contestId=200686)\n\n[Click here (or at the bottom  of this page) to download the English version of statements (PDF).](https://www.luogu.com.cn/fe/api/problem/downloadAttachment/lkux3617?contestId=200686)\n\n**注意：本次比赛所有题目的大样例均为 Linux 换行符格式，在 Windows 系统内可能无法正常显示换行。**\n", "description": "我们已经学过带余除法。对于两个正整数 $n,q$，如果 $n$ 除以 $q$ 的商为 $k$，余数为 $r$，我们可以写出带余除法算式 $n\\div q = k \\cdots\\cdots r$，或被记为 $n\\div q = k (\\text{r. } r)$。本题中，为了简化，哪怕 $r=0$，我们也要写出这个余数。\n\n现在有一个带余除法，然而你只知道被除数 $n​$ 和商 $k​$，而并不知道除数 $q​$ 和余数 $r​$。你想知道余数有多少种可能。", "inputFormat": "**本题有多组测试数据**。输入的第一行有一个正整数 $T$，表示数据组数。\n\n之后 $T$ 行，每行有一个正整数 $n$ 和自然数 $k$，分别表示带余除法的被除数和商。", "outputFormat": "对于每组测试数据，输出一行一个自然数，表示余数的不同可能性数量。", "hint": "【样例 1 解释】\n\n对于第一组数据，被除数为 $10$，商为 $2$。\n\n- 如果除数是 $1,2,3$，那么商分别是 $k=10,5,3$，不符合题意。\n- 如果除数是 $4$，那么商为 $2$，余数为 $r=2$。\n- 如果除数是 $5$，那么商为 $2$，余数为 $r=0$。\n- 如果除数是 $6,7,8,9,10$，那么商都是 $1$，不符合题意。\n- 如果除数 $>10$，那么商为 $0$，不符合题意。\n\n对于第二组数据，被除数为 $1$，商为 $0$。\n\n只要除数 $q>1$，那么 $1\\div q = 0 \\cdots\\cdots 1$ 一定是正确的带余除法算式。余数只有 $1$ 这一种可能。\n\n【数据范围】\n\n对于前 $30\\%$ 的数据，保证 $1\\le n\\le 1000$，$0\\le k\\le 1000$。\n\n另有 $20\\%$ 的数据，保证 $k\\le 10^5$。\n\n另有 $20\\%$ 的数据，保证 $k\\ge 10^9$。\n\n对于全体数据，保证 $1\\le T\\le 10$，$1\\le n\\le 10^{14}$，$0\\le k\\le 10^{14}$。", "locale": "zh-CN"}}}
{"pid": "P11185", "type": "P", "difficulty": 2, "samples": [["4\n8 5 0\n4 5 3\n4 1 2\n2 1 1\n", "1\n1\n2\n3\n"], ["参见 medal/medal2.in", "参见 medal/medal2.ans"], ["参见 medal/medal3.in", "参见 medal/medal3.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "奖牌排序", "background": "", "description": "有 $n$ 个小朋友参加了若干场比赛，其中第 $i$ 个小朋友获得了 $g_i$ 枚金牌、$s_i$ 枚银牌和 $b_i$ 枚铜牌。老师希望**每个小朋友**制作一张**所有小朋友**的排行榜。\n\n然而小朋友们为了让自己的排名尽量靠前，自然是可以动一些小心思的，体现在排序标准上——每个小朋友可以选择按照金牌数从大到小排序，也可以选择按照银牌数从大到小排序，也可以选择按照铜牌数从大到小排序。在小朋友自制的排行榜里，如果自己和别的小朋友并列，那么他可以把自己写在最前面。\n\n给出每个小朋友获得的金牌数、银牌数和铜牌数，请对于每个小朋友 $i$，计算他在他自己的排行榜里最好能排第几名。", "inputFormat": "输入的第一行有一个正整数 $n$，表示小朋友的个数。\n\n之后 $n$ 行，每行有三个自然数 $g_i,s_i,b_i$ 表示一个小朋友的金牌、银牌和铜牌数量。", "outputFormat": "输出 $n$ 行，每行一个正整数，其中第 $i$ 行的正整数表示第 $i$ 个小朋友的最好排名。", "hint": "【样例 1 解释】\n\n下面给出一种可能得情况，其中加粗的一列表示这个小朋友的排序依据。\n\n第一个小朋友制作的排行榜如下：\n\n|小朋友编号|金牌数|银牌数|铜牌数|\n|:-:|:-:|:-:|:-:|\n|$1$|$\\bf{8}$|$5$|$0$|\n|$2$|$\\bf 4$|$5$|$3$|\n|$3$|$\\bf 4$|$1$|$2$|\n|$4$|$\\bf 2$|$1$|$1$|\n\n第二个小朋友制作的排行榜如下：\n\n|小朋友编号|金牌数|银牌数|铜牌数|\n|:-:|:-:|:-:|:-:|\n|$2$|$4$|$\\bf 5$|$3$|\n|$1$|$8$|$\\bf 5$|$0$|\n|$3$|$4$|$\\bf 1$|$2$|\n|$4$|$2$|$\\bf 1$|$1$|\n\n第三个小朋友的排行榜如下（按照金牌排序，也可以获得第二名）：\n\n|小朋友编号|金牌数|银牌数|铜牌数|\n|:-:|:-:|:-:|:-:|\n|$2$|$4$|$5$|$\\bf 3$|\n|$3$|$4$|$1$|$\\bf 2$|\n|$4$|$2$|$1$|$\\bf 1$|\n|$1$|$8$|$5$|$\\bf 0$|\n\n第四个小朋友的排行榜如下：\n\n|小朋友编号|金牌数|银牌数|铜牌数|\n|:-:|:-:|:-:|:-:|\n|$2$|$4$|$\\bf 5$|$3$|\n|$1$|$8$|$\\bf 5$|$0$|\n|$4$|$2$|$\\bf 1$|$1$|\n|$3$|$4$|$\\bf 1$|$2$|\n\n【样例 2 解释】\n\n该样例符合测试点 $8$ 的性质。\n\n【样例 3 解释】\n\n该样例符合测试点 $10$ 的性质。\n\n【数据范围】\n\n对于全体数据，保证 $1\\le n\\le 2\\times 10^5$，且 $0\\le g_i,s_i,b_i\\le 10^9$。\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 2$|$3$||\n|$3\\sim 4$|$100$||\n|$5\\sim 7$|$1000$|A|\n|$8\\sim 9$|$1000$||\n|$10\\sim 12$|$2\\times 10^5$|A|\n|$13\\sim 15$|$2\\times 10^5$|B|\n|$16\\sim 20$|$2\\times 10^5$||\n\n- 特殊性质 A：$g_i$ 互不相同，$s_i$ 互不相同，$b_i$ 互不相同。\n- 特殊性质 B：$1\\le g_i,s_i,b_i\\le 2\\times 10^5$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "奖牌排序", "background": "", "description": "有 $n$ 个小朋友参加了若干场比赛，其中第 $i$ 个小朋友获得了 $g_i$ 枚金牌、$s_i$ 枚银牌和 $b_i$ 枚铜牌。老师希望**每个小朋友**制作一张**所有小朋友**的排行榜。\n\n然而小朋友们为了让自己的排名尽量靠前，自然是可以动一些小心思的，体现在排序标准上——每个小朋友可以选择按照金牌数从大到小排序，也可以选择按照银牌数从大到小排序，也可以选择按照铜牌数从大到小排序。在小朋友自制的排行榜里，如果自己和别的小朋友并列，那么他可以把自己写在最前面。\n\n给出每个小朋友获得的金牌数、银牌数和铜牌数，请对于每个小朋友 $i$，计算他在他自己的排行榜里最好能排第几名。", "inputFormat": "输入的第一行有一个正整数 $n$，表示小朋友的个数。\n\n之后 $n$ 行，每行有三个自然数 $g_i,s_i,b_i$ 表示一个小朋友的金牌、银牌和铜牌数量。", "outputFormat": "输出 $n$ 行，每行一个正整数，其中第 $i$ 行的正整数表示第 $i$ 个小朋友的最好排名。", "hint": "【样例 1 解释】\n\n下面给出一种可能得情况，其中加粗的一列表示这个小朋友的排序依据。\n\n第一个小朋友制作的排行榜如下：\n\n|小朋友编号|金牌数|银牌数|铜牌数|\n|:-:|:-:|:-:|:-:|\n|$1$|$\\bf{8}$|$5$|$0$|\n|$2$|$\\bf 4$|$5$|$3$|\n|$3$|$\\bf 4$|$1$|$2$|\n|$4$|$\\bf 2$|$1$|$1$|\n\n第二个小朋友制作的排行榜如下：\n\n|小朋友编号|金牌数|银牌数|铜牌数|\n|:-:|:-:|:-:|:-:|\n|$2$|$4$|$\\bf 5$|$3$|\n|$1$|$8$|$\\bf 5$|$0$|\n|$3$|$4$|$\\bf 1$|$2$|\n|$4$|$2$|$\\bf 1$|$1$|\n\n第三个小朋友的排行榜如下（按照金牌排序，也可以获得第二名）：\n\n|小朋友编号|金牌数|银牌数|铜牌数|\n|:-:|:-:|:-:|:-:|\n|$2$|$4$|$5$|$\\bf 3$|\n|$3$|$4$|$1$|$\\bf 2$|\n|$4$|$2$|$1$|$\\bf 1$|\n|$1$|$8$|$5$|$\\bf 0$|\n\n第四个小朋友的排行榜如下：\n\n|小朋友编号|金牌数|银牌数|铜牌数|\n|:-:|:-:|:-:|:-:|\n|$2$|$4$|$\\bf 5$|$3$|\n|$1$|$8$|$\\bf 5$|$0$|\n|$4$|$2$|$\\bf 1$|$1$|\n|$3$|$4$|$\\bf 1$|$2$|\n\n【样例 2 解释】\n\n该样例符合测试点 $8$ 的性质。\n\n【样例 3 解释】\n\n该样例符合测试点 $10$ 的性质。\n\n【数据范围】\n\n对于全体数据，保证 $1\\le n\\le 2\\times 10^5$，且 $0\\le g_i,s_i,b_i\\le 10^9$。\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 2$|$3$||\n|$3\\sim 4$|$100$||\n|$5\\sim 7$|$1000$|A|\n|$8\\sim 9$|$1000$||\n|$10\\sim 12$|$2\\times 10^5$|A|\n|$13\\sim 15$|$2\\times 10^5$|B|\n|$16\\sim 20$|$2\\times 10^5$||\n\n- 特殊性质 A：$g_i$ 互不相同，$s_i$ 互不相同，$b_i$ 互不相同。\n- 特殊性质 B：$1\\le g_i,s_i,b_i\\le 2\\times 10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P11186", "type": "P", "difficulty": 4, "samples": [["20 5\nx>12?x<15?4:10:x<12?14:7\n15\n12\n14\n7\n1000000", "10\n7\n4\n14\n10\n"], ["参见 expr/expr2.in", "参见 expr/expr2.ans"], ["参见 expr/expr3.in", "参见 expr/expr3.ans"], ["参见 expr/expr4.in", "参见 expr/expr4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "树形数据结构", "二分", "递归", "洛谷原创", "洛谷月赛"], "title": "三目运算", "background": "", "description": "三目运算是一种比较特殊的运算，功能类似于 `if` 语句，其语法格式如下：\n\n`条件?数值1:数值2`，三目运算得到的结果也是数值。当条件成立时得到的结果是数值 1，不成立时得到的结果为数值 2。\n\n例如，`x>5?8:6` 就是一种三目运算表达式（也是分段常数表达式，见下文）。当 $x=7$ 时，该表达式的结果为 $8$，而 $x=3$ 时，该表达式的结果为 $6$。\n\n---\n\n本题中，称满足下列条件中**至少一条**的字符串 $S$ 是**分段常数表达式**：\n\n- 十进制正整数 $a$，如 `243`，是分段常数表达式。\n- 如果 $a$ 为一个十进制正整数，$p,q$ 为两个分段常数表达式，则 $\\texttt{x>}a\\texttt{?}p\\texttt{:}q$ 是分段常数表达式。\n- 如果 $a$ 为一个十进制正整数，$p,q$ 为两个分段常数表达式，则 $\\texttt{x<}a\\texttt{?}p\\texttt{:}q$ 是分段常数表达式。\n\n（后两条条件中， $x>a$ 和 $x<a$ 是条件，$p,q$ 为数值，该表达式是三目运算表达式。）\n\n例如，`x>154?220:x<37?16:10` 是一个分段常数表达式，因为 `220` 和 `x<37?16:10` 都是分段常数表达式，从而整个表达式由第 2 条规则也是分段常数表达式。\n\n---\n\n给出一个分段常数表达式 $S$，保证出现的正整数均不超过 $m$。\n\nyummy 有 $q$ 个询问，每次给出一个自然数 $x$ 的值，希望你求出分段常数表达式的值。", "inputFormat": "输入的第一行有两个正整数 $m,q$，分别表示表达式出现数字的最大可能值和询问个数。\n\n第二行有一个字符串 $S$，表示这个分段常数表达式。\n\n之后有 $q$ 行，每行有一个自然数 $x$，表示一次询问。", "outputFormat": "对于每个询问输出一行一个正整数，表示表达式的结果。", "hint": "【样例 1 解释】\n\n如果我们进行适当的换行和缩进可以得到：\n\n```cpp\nx>12?    //如果 x>12\n  x<15?  //那么判断 x<15 是否成立\n    4    //如果是则得到 4\n    :10  //如果不是则得到 10\n  :x<12? //否则（如果 x<=12) 判断 x<12 是否成立\n    14   //如果是则返回 14\n    :7   //如果不是则返回 7\n```\n\n按照这个思路模拟即可得到样例输出。\n\n【样例 2 解释】\n\n该样例满足测试点 $6$ 的性质。\n\n【样例 3 解释】\n\n该样例满足测试点 $10$ 的性质。\n\n【样例 4 解释】\n\n该样例满足测试点 $19$ 的性质。\n\n【数据范围】\n\n设 $n$ 为 $S$ 中三目运算符的个数。（选手可以通过 $n$ 来估计 $S$ 的串长。）\n\n对于全体数据，保证 $0\\le n\\le 10^5$，$1\\le m\\le 10^5$，$1\\le q\\le 10^5​$，$1\\le x\\le 10^9$，且 $S$ 是分段常数表达式。\n\n| 测试点编号  | $n\\le$ | $m\\le$ | $q\\le$ |\n|:-:|:-:|:-:|:-:|\n| $1$         | $0$    | $10^5$ | $10$   |\n| $2$         | $1$   | $10^5$ | $10$   |\n| $3\\sim 5$   | $100$ | $9$    | $10$   |\n| $6\\sim 9$   | $100$ | $10^5$ | $10$   |\n| $10\\sim 12$ | $10^5$ | $9$    | $10$   |\n| $13\\sim 16$ | $10^5$ | $10^5$ | $10$   |\n| $17\\sim 18$ | $10^5$ | $9$    | $10^5$ |\n| $19\\sim 25$ | $10^5$ | $10^5$ | $10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "三目运算", "background": "", "description": "三目运算是一种比较特殊的运算，功能类似于 `if` 语句，其语法格式如下：\n\n`条件?数值1:数值2`，三目运算得到的结果也是数值。当条件成立时得到的结果是数值 1，不成立时得到的结果为数值 2。\n\n例如，`x>5?8:6` 就是一种三目运算表达式（也是分段常数表达式，见下文）。当 $x=7$ 时，该表达式的结果为 $8$，而 $x=3$ 时，该表达式的结果为 $6$。\n\n---\n\n本题中，称满足下列条件中**至少一条**的字符串 $S$ 是**分段常数表达式**：\n\n- 十进制正整数 $a$，如 `243`，是分段常数表达式。\n- 如果 $a$ 为一个十进制正整数，$p,q$ 为两个分段常数表达式，则 $\\texttt{x>}a\\texttt{?}p\\texttt{:}q$ 是分段常数表达式。\n- 如果 $a$ 为一个十进制正整数，$p,q$ 为两个分段常数表达式，则 $\\texttt{x<}a\\texttt{?}p\\texttt{:}q$ 是分段常数表达式。\n\n（后两条条件中， $x>a$ 和 $x<a$ 是条件，$p,q$ 为数值，该表达式是三目运算表达式。）\n\n例如，`x>154?220:x<37?16:10` 是一个分段常数表达式，因为 `220` 和 `x<37?16:10` 都是分段常数表达式，从而整个表达式由第 2 条规则也是分段常数表达式。\n\n---\n\n给出一个分段常数表达式 $S$，保证出现的正整数均不超过 $m$。\n\nyummy 有 $q$ 个询问，每次给出一个自然数 $x$ 的值，希望你求出分段常数表达式的值。", "inputFormat": "输入的第一行有两个正整数 $m,q$，分别表示表达式出现数字的最大可能值和询问个数。\n\n第二行有一个字符串 $S$，表示这个分段常数表达式。\n\n之后有 $q$ 行，每行有一个自然数 $x$，表示一次询问。", "outputFormat": "对于每个询问输出一行一个正整数，表示表达式的结果。", "hint": "【样例 1 解释】\n\n如果我们进行适当的换行和缩进可以得到：\n\n```cpp\nx>12?    //如果 x>12\n  x<15?  //那么判断 x<15 是否成立\n    4    //如果是则得到 4\n    :10  //如果不是则得到 10\n  :x<12? //否则（如果 x<=12) 判断 x<12 是否成立\n    14   //如果是则返回 14\n    :7   //如果不是则返回 7\n```\n\n按照这个思路模拟即可得到样例输出。\n\n【样例 2 解释】\n\n该样例满足测试点 $6$ 的性质。\n\n【样例 3 解释】\n\n该样例满足测试点 $10$ 的性质。\n\n【样例 4 解释】\n\n该样例满足测试点 $19$ 的性质。\n\n【数据范围】\n\n设 $n$ 为 $S$ 中三目运算符的个数。（选手可以通过 $n$ 来估计 $S$ 的串长。）\n\n对于全体数据，保证 $0\\le n\\le 10^5$，$1\\le m\\le 10^5$，$1\\le q\\le 10^5​$，$1\\le x\\le 10^9$，且 $S$ 是分段常数表达式。\n\n| 测试点编号  | $n\\le$ | $m\\le$ | $q\\le$ |\n|:-:|:-:|:-:|:-:|\n| $1$         | $0$    | $10^5$ | $10$   |\n| $2$         | $1$   | $10^5$ | $10$   |\n| $3\\sim 5$   | $100$ | $9$    | $10$   |\n| $6\\sim 9$   | $100$ | $10^5$ | $10$   |\n| $10\\sim 12$ | $10^5$ | $9$    | $10$   |\n| $13\\sim 16$ | $10^5$ | $10^5$ | $10$   |\n| $17\\sim 18$ | $10^5$ | $9$    | $10^5$ |\n| $19\\sim 25$ | $10^5$ | $10^5$ | $10^5$ |", "locale": "zh-CN"}}}
{"pid": "P11187", "type": "P", "difficulty": 4, "samples": [["8\n1 2 2 2 2 1 2 2\n", "4\n"], ["11\n1 1 4 1 1 2 1000 2 5 5 4\n", "6\n"], ["参见 pairing3.in", "参见 pairing3.out"], ["参见 pairing4.in", "参见 pairing4.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "配对序列", "background": "", "description": "一个序列 $s_1,\\ldots s_{2k}$ 是**配对的**，当且仅当：\n\n- 对于任意 $1\\le i \\le k$，$s_{2i}=s_{2i-1}$。\n- 对于任意 $1\\le i<k$，$s_{2i}\\ne s_{2i+1}$。\n\n注意，配对的序列长度必然为偶数。\n\n例如，$3,3,5,5,2,2$ 是配对的，而 $2,2,2,2,5,5$（$s_2=s_3$ 不满足第二条要求）或者 $1,2,3,3,1,1$（$s_1\\ne s_2$ 不满足第一条要求）都不是配对的。\n\n给出一个数列 $a_1,\\ldots, a_n$，求所有配对的子序列长度的最大值。", "inputFormat": "输入的第一行有一个正整数 $n$，表示序列的长度。\n\n第二行有 $n$ 个正整数 $a_1,\\ldots,a_n$，表示这个序列。", "outputFormat": "输出一行一个自然数，表示最长的配对子序列长度。特别地，如果不存在非空的配对子序列，那么输出 $0$。", "hint": "【样例 1 解释】\n\n取 $1,1,2,2$ 这个子序列即可。\n\n【样例 2 解释】\n\n取 $1,1,2,2,5,5$ 这个配对子序列即可。\n\n【样例 3 解释】\n\n该样例符合测试点 $3$ 的限制。\n\n【样例 4 解释】\n\n该样例符合测试点 $12$ 的限制。\n\n【数据范围】\n\n对于全体数据，保证 $2\\le n\\le 5\\times 10^5$，$1\\le a_i\\le 5\\times 10^5$。\n\n|测试点编号|$n\\le$|$a_i\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1\\sim 2$|$18$|$5\\times 10^5$||\n|$3\\sim 5$|$500$|$500$||\n|$6\\sim 7$|$5000$|$5000$||\n|$8\\sim 9$|$5000$|$5\\times 10^5$||\n|$10$|$5\\times 10^5$|$5\\times 10^5$|每个数最多出现 $1$ 次|\n|$11$|$5\\times 10^5$|$5\\times 10^5$|$a_i\\le a_{i+1}$ 恒成立|\n|$12\\sim 14$|$5\\times 10^5$|$5\\times 10^5$|每个数最多出现 $2$ 次|\n|$15\\sim 20$|$5\\times 10^5$|$5\\times 10^5$||", "locale": "zh-CN", "translations": {"zh-CN": {"title": "配对序列", "background": "", "description": "一个序列 $s_1,\\ldots s_{2k}$ 是**配对的**，当且仅当：\n\n- 对于任意 $1\\le i \\le k$，$s_{2i}=s_{2i-1}$。\n- 对于任意 $1\\le i<k$，$s_{2i}\\ne s_{2i+1}$。\n\n注意，配对的序列长度必然为偶数。\n\n例如，$3,3,5,5,2,2$ 是配对的，而 $2,2,2,2,5,5$（$s_2=s_3$ 不满足第二条要求）或者 $1,2,3,3,1,1$（$s_1\\ne s_2$ 不满足第一条要求）都不是配对的。\n\n给出一个数列 $a_1,\\ldots, a_n$，求所有配对的子序列长度的最大值。", "inputFormat": "输入的第一行有一个正整数 $n$，表示序列的长度。\n\n第二行有 $n$ 个正整数 $a_1,\\ldots,a_n$，表示这个序列。", "outputFormat": "输出一行一个自然数，表示最长的配对子序列长度。特别地，如果不存在非空的配对子序列，那么输出 $0$。", "hint": "【样例 1 解释】\n\n取 $1,1,2,2$ 这个子序列即可。\n\n【样例 2 解释】\n\n取 $1,1,2,2,5,5$ 这个配对子序列即可。\n\n【样例 3 解释】\n\n该样例符合测试点 $3$ 的限制。\n\n【样例 4 解释】\n\n该样例符合测试点 $12$ 的限制。\n\n【数据范围】\n\n对于全体数据，保证 $2\\le n\\le 5\\times 10^5$，$1\\le a_i\\le 5\\times 10^5$。\n\n|测试点编号|$n\\le$|$a_i\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1\\sim 2$|$18$|$5\\times 10^5$||\n|$3\\sim 5$|$500$|$500$||\n|$6\\sim 7$|$5000$|$5000$||\n|$8\\sim 9$|$5000$|$5\\times 10^5$||\n|$10$|$5\\times 10^5$|$5\\times 10^5$|每个数最多出现 $1$ 次|\n|$11$|$5\\times 10^5$|$5\\times 10^5$|$a_i\\le a_{i+1}$ 恒成立|\n|$12\\sim 14$|$5\\times 10^5$|$5\\times 10^5$|每个数最多出现 $2$ 次|\n|$15\\sim 20$|$5\\times 10^5$|$5\\times 10^5$||", "locale": "zh-CN"}}}
{"pid": "P11188", "type": "P", "difficulty": 4, "samples": [["0\n3\n123\n10 10 10 10 10 10 10 10 10 \n1121\n2 1 2 2 2 2 2 2 2\n987654321\n1 2 3 4 5 6 7 8 9\n", "21\n6\n45\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「KDOI-10」商店砍价", "background": "您可以点击 [这里](https://www.luogu.com.cn/fe/api/problem/downloadAttachment/3jbtilzv) 下载本场比赛的选手文件。\n\n密码：`rAnHoUyaSuoBaoMimaNijuEdefAngsHa2)2$1)0(2@0!`\n\n**本场比赛所有题目从标准输入读入数据，输出到标准输出。**", "description": "有一个正整数 $n$，保证其只由数字 $1\\sim 9$ 构成。\n\n你可以做任意多次如下操作：\n\n- 选择 $n$ 的一个数位 $x$，花费 $v_x$ 的代价删除它，注意，此时 $n$ 的数位个数会减少 $1$，$n$ 的值也会发生相应的变化；\n- 或者，花费 $n$ 的代价把剩余的所有数位删除。\n\n求把整个数删除的最小代价。", "inputFormat": "从标准输入读入数据。\n\n**本题有多组测试数据。** \n\n输入的第一行包含一个正整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行包含一个正整数 $t$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行一个正整数 $n$，表示这个数的初始值。\n- 第二行九个正整数 $v_1,v_2,\\dots,v_9$，表示删除每个数位的代价。", "outputFormat": "输出到标准输出。\n\n对于每组测试数据：\n\n- 输出一行一个正整数，表示最小代价。", "hint": "**【样例 1 解释】**\n\n对于第一组测试数据，最优操作方案如下：\n\n- 删除数位 $2$，代价为 $10$，此时 $n$ 变为 $13$；\n- 删除数位 $3$，代价为 $10$，此时 $n$ 变为 $1$；\n- 删除 $n$ 的剩余所有数位，代价为 $1$。\n\n总代价为 $10+10+1=21$，可以证明，这是代价的最小值。\n\n对于第二组测试数据，一种最优操作方案如下：\n\n- 删除第一个数位 $1$，代价为 $2$，此时 $n$ 变为 $121$；\n- 删除最后一个数位 $1$，代价为 $2$，此时 $n$ 变为 $12$；\n- 删除数位 $2$，代价为 $1$，此时 $n$ 变为 $1$；\n- 删除 $n$ 的剩余所有数位，代价为 $1$。\n\n总代价为 $2+2+1+1=6$。\n\n**【样例 2】**\n\n见选手目录下的 `bargain/bargain2.in` 与 `bargain/bargain2.ans`。\n\n这个样例满足测试点 $3\\sim 6$ 的约束条件。\n\n**【样例 3】**\n\n见选手目录下的 `bargain/bargain3.in` 与 `bargain/bargain3.ans`。\n\n这个样例满足测试点 $11$ 的约束条件。\n\n**【样例 4】**\n\n见选手目录下的 `bargain/bargain4.in` 与 `bargain/bargain4.ans`。\n\n这个样例满足测试点 $17,18$ 的约束条件。\n\n**【样例 5】**\n\n见选手目录下的 `bargain/bargain5.in` 与 `bargain/bargain5.ans`。\n\n这个样例满足测试点 $23\\sim 25$ 的约束条件。\n\n***\n\n**【数据范围】**\n\n对于全部的测试数据，保证：\n\n- $1\\le t\\le 10$；\n- $1\\le n< 10^{10^5}$；\n- 对于任意 $1\\le i\\le 9$，$1\\le v_i\\le 10^5$；\n- $n$ 由数字 $1\\sim 9$ 构成。\n\n|   测试点    |   $n<$    | $v_i\\le$ |        特殊性质        |\n| :---------: | :---------: | :------: | :--------------------: |\n|     $1$     |    $100$     |  $10^5$  |           无           |\n|     $2$     |    $10^3$    |  $10^5$  |           无           |\n|  $3\\sim 6$  |  $10^{18}$  |  $10^5$  |           无           |\n| $7\\sim 9$  |  $10^{40}$  |  $10^5$  |           无           |\n|    $10$    | $10^{10^5}$ |  $10^5$  | $n$ 由至多一种数字构成 |\n|    $11$     | $10^{10^5}$ |  $10^5$  | $n$ 由至多两种数字构成 |\n| $12,13$ | $10^{10^5}$ |  $10^5$  | $n$ 由至多三种数字构成 |\n| $14\\sim 16$ | $10^{10^3}$ | $10^5$ | $v_1=v_2=v_3=\\dots =v_9$ |\n| $17,18$ | $10^{10^5}$ | $10^5$ | $v_1=v_2=v_3=\\dots =v_9$ |\n| $19,20$ | $10^{100}$ | $100$ | 无 |\n| $21,22$ | $10^{10^3}$ | $10^3$ | 无 |\n| $23\\sim 25$ | $10^{10^5}$ | $10^5$ | 无 |", "locale": "zh-CN", "translations": {"en": {"title": "「KDOI-10」Bargain", "background": "You can click [here](https://www.luogu.com.cn/fe/api/problem/downloadAttachment/5fzhd8sk) to download all tasks and examples of the contest.\n\nPassword: `rAnHoUyaSuoBaoMimaNijuEdefAngsHa2)2$1)0(2@0!`\n\n|Input|Output|Time Limit|Memory Limit|\n|:--:|:--:|:--:|:--:|\n|standard input|standard output|1.0 s|512 MiB|\n\nThis problem has $25$ tests. The full score is $100$ points, and $4$ points per test.", "description": "There is an integer $n$ consisting only of digits $1\\sim 9$.\n\nYou can do an arbitrary number of operations on $n$ (possibly zero):\n\n- Choose a digit of $n$ and delete it. Suppose the digit is $x$, this operation will cost $v_x$. Note that after this operation, the length of $n$ decreases by $1$, and the value of $n$ also changes;\n- Delete all the remaining digits of $n$. This operation will cost $n$.\n\nFind the minimum cost to delete all digits of $n$.", "inputFormat": "**Each test contains multiple test cases.**\n\nThe first line of the input contains a single integer $c$ — the id of the test. $c=0$ represents that this is a sample test.\n\nThe second line contains a single integer $t$ — the number of test cases.\n\nFor each test case:\n\n- The first line contains a single integer $n$ — the initial value of the integer.\n- The second line contains nine integers $v_1,v_2,\\ldots,v_9$ — the cost of deleting each digit.", "outputFormat": "For each test case:\n\n- Print a single integer in the only line of the output — the minimum cost.", "hint": "**Sample 1 Explanation**\n\nIn the first test case, the optimal operations are:\n\n- Delete digit $2$ with a cost of $10$. After that, $n$ becomes $13$;\n- Delete digit $3$ with a cost of $10$. After that, $n$ becomes $1$;\n- Delete all the remaining digits of $n$ with a cost of $1$.\n\nThe total cost is $10+10+1=21$. It can be shown that this is the minimum cost.\n\nIn the second test case, the optimal operations are:\n\n- Delete the first digit $1$ with a cost of $2$. After that, $n$ becomes $121$;\n- Delete the last digit $1$ with a cost of $2$. After that, $n$ becomes $12$;\n- Delete digit $2$ with a cost of $1$. After that, $n$ becomes $1$;\n- Delete all the remaining digits of $n$ with a cost of $1$.\n\nThe total cost is $2+2+1+1=6$.\n\n**Sample 2**\n\nSee `bargain/bargain2.in` and `bargain/bargain2.ans` in the attachments.\n\nThis sample satisfies the constraints of test $3\\sim 6$.\n\n**Sample 3**\n\nSee `bargain/bargain3.in` and `bargain/bargain3.ans` in the attachments.\n\nThis sample satisfies the constraints of test $11$.\n\n\n**Sample 4**\n\nSee `bargain/bargain4.in` and `bargain/bargain4.ans` in the attachments.\n\nThis sample satisfies the constraints of test $17,18$.\n\n\n**Sample 5**\n\nSee `bargain/bargain5.in` and `bargain/bargain5.ans` in the attachments.\n\nThis sample satisfies the constraints of test $23\\sim 25$.\n\n***\n\n**Constraints**\n\nFor all the tests, it is guaranteed that:\n\n- $1\\le t\\le 10$;\n- $1\\le n< 10^{10^5}$;\n- For each $1\\le i\\le 9$，$1\\le v_i\\le 10^5$;\n- $n$ consists only of digits $1\\sim 9$.\n\n|   Test Id    |   $n<$    | $v_i\\le$ |        Special Properties        |\n| :---------: | :---------: | :------: | :--------------------: |\n|     $1$     |    $100$     |  $10^5$  |           -           |\n|     $2$     |    $10^3$    |  $10^5$  |           -           |\n|  $3\\sim 6$  |  $10^{18}$  |  $10^5$  |           -           |\n| $7\\sim 9$  |  $10^{40}$  |  $10^5$  |           -           |\n|    $10$    | $10^{10^5}$ |  $10^5$  | $n$ consists of only one type of digits. |\n|    $11$     | $10^{10^5}$ |  $10^5$  | $n$ consists of at most two types of digits. |\n| $12,13$ | $10^{10^5}$ |  $10^5$  | $n$ consists of at most three types of digits. |\n| $14\\sim 16$ | $10^{10^3}$ | $10^5$ | $v_1=v_2=v_3=\\dots =v_9$ |\n| $17,18$ | $10^{10^5}$ | $10^5$ | $v_1=v_2=v_3=\\dots =v_9$ |\n| $19,20$ | $10^{100}$ | $100$ | - |\n| $21,22$ | $10^{10^3}$ | $10^3$ | - |\n| $23\\sim 25$ | $10^{10^5}$ | $10^5$ | - |", "locale": "en"}, "zh-CN": {"title": "「KDOI-10」商店砍价", "background": "您可以点击 [这里](https://www.luogu.com.cn/fe/api/problem/downloadAttachment/3jbtilzv) 下载本场比赛的选手文件。\n\n密码：`rAnHoUyaSuoBaoMimaNijuEdefAngsHa2)2$1)0(2@0!`\n\n**本场比赛所有题目从标准输入读入数据，输出到标准输出。**", "description": "有一个正整数 $n$，保证其只由数字 $1\\sim 9$ 构成。\n\n你可以做任意多次如下操作：\n\n- 选择 $n$ 的一个数位 $x$，花费 $v_x$ 的代价删除它，注意，此时 $n$ 的数位个数会减少 $1$，$n$ 的值也会发生相应的变化；\n- 或者，花费 $n$ 的代价把剩余的所有数位删除。\n\n求把整个数删除的最小代价。", "inputFormat": "从标准输入读入数据。\n\n**本题有多组测试数据。** \n\n输入的第一行包含一个正整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行包含一个正整数 $t$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行一个正整数 $n$，表示这个数的初始值。\n- 第二行九个正整数 $v_1,v_2,\\dots,v_9$，表示删除每个数位的代价。", "outputFormat": "输出到标准输出。\n\n对于每组测试数据：\n\n- 输出一行一个正整数，表示最小代价。", "hint": "**【样例 1 解释】**\n\n对于第一组测试数据，最优操作方案如下：\n\n- 删除数位 $2$，代价为 $10$，此时 $n$ 变为 $13$；\n- 删除数位 $3$，代价为 $10$，此时 $n$ 变为 $1$；\n- 删除 $n$ 的剩余所有数位，代价为 $1$。\n\n总代价为 $10+10+1=21$，可以证明，这是代价的最小值。\n\n对于第二组测试数据，一种最优操作方案如下：\n\n- 删除第一个数位 $1$，代价为 $2$，此时 $n$ 变为 $121$；\n- 删除最后一个数位 $1$，代价为 $2$，此时 $n$ 变为 $12$；\n- 删除数位 $2$，代价为 $1$，此时 $n$ 变为 $1$；\n- 删除 $n$ 的剩余所有数位，代价为 $1$。\n\n总代价为 $2+2+1+1=6$。\n\n**【样例 2】**\n\n见选手目录下的 `bargain/bargain2.in` 与 `bargain/bargain2.ans`。\n\n这个样例满足测试点 $3\\sim 6$ 的约束条件。\n\n**【样例 3】**\n\n见选手目录下的 `bargain/bargain3.in` 与 `bargain/bargain3.ans`。\n\n这个样例满足测试点 $11$ 的约束条件。\n\n**【样例 4】**\n\n见选手目录下的 `bargain/bargain4.in` 与 `bargain/bargain4.ans`。\n\n这个样例满足测试点 $17,18$ 的约束条件。\n\n**【样例 5】**\n\n见选手目录下的 `bargain/bargain5.in` 与 `bargain/bargain5.ans`。\n\n这个样例满足测试点 $23\\sim 25$ 的约束条件。\n\n***\n\n**【数据范围】**\n\n对于全部的测试数据，保证：\n\n- $1\\le t\\le 10$；\n- $1\\le n< 10^{10^5}$；\n- 对于任意 $1\\le i\\le 9$，$1\\le v_i\\le 10^5$；\n- $n$ 由数字 $1\\sim 9$ 构成。\n\n|   测试点    |   $n<$    | $v_i\\le$ |        特殊性质        |\n| :---------: | :---------: | :------: | :--------------------: |\n|     $1$     |    $100$     |  $10^5$  |           无           |\n|     $2$     |    $10^3$    |  $10^5$  |           无           |\n|  $3\\sim 6$  |  $10^{18}$  |  $10^5$  |           无           |\n| $7\\sim 9$  |  $10^{40}$  |  $10^5$  |           无           |\n|    $10$    | $10^{10^5}$ |  $10^5$  | $n$ 由至多一种数字构成 |\n|    $11$     | $10^{10^5}$ |  $10^5$  | $n$ 由至多两种数字构成 |\n| $12,13$ | $10^{10^5}$ |  $10^5$  | $n$ 由至多三种数字构成 |\n| $14\\sim 16$ | $10^{10^3}$ | $10^5$ | $v_1=v_2=v_3=\\dots =v_9$ |\n| $17,18$ | $10^{10^5}$ | $10^5$ | $v_1=v_2=v_3=\\dots =v_9$ |\n| $19,20$ | $10^{100}$ | $100$ | 无 |\n| $21,22$ | $10^{10^3}$ | $10^3$ | 无 |\n| $23\\sim 25$ | $10^{10^5}$ | $10^5$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11189", "type": "P", "difficulty": 6, "samples": [["0\n5\n5\n1 1 2 3\n6 5 2 2 1\n5\n1 1 2 2\n6 5 1 2 1\n5\n1 1 2 2\n4 -1 5 -2 -2\n5\n1 1 2 2\n6 -4 8 -3 -3\n5\n1 1 2 2\n-1 -1 -1 -4 -1", "Shuiniao\nHuoyu\nShuiniao\nShuiniao\nHuoyu"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "二分", "2024", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「KDOI-10」水杯降温", "background": "**本场比赛所有题目从标准输入读入数据，输出到标准输出。**", "description": "小 S 有一棵包含 $n$ 个节点的有根树，且根为节点 $1$。节点 $i$ $(1\\le i\\le n)$ 上放置了一个初始水温为 $a_i$ 的水杯。\n\n在不知道水温的情况下拿起水杯喝水并被烫了 inf 次的小 S 决定将这些水杯的水温全部变为 $0$ 后再喝它们。\n\n现在，小 S 可以分别进行以下两种操作任意次：\n\n* 使用一个在节点 $i$ 的加热装置。这会使以 $i$ 为根的子树内所有水杯里的水温均增加 $1$；\n* 或者，从某个**叶子**节点 $i$ 向根方向吹一阵风。这会使 $i$ 到根所有水杯里的水温均减少 $1$。\n\n请你帮小 S 判断：能否将所有节点上的水杯的水温都变为 $0$。\n\n", "inputFormat": "从标准输入读入数据。\n\n**本题有多组测试数据。** \n\n输入的第一行包含一个正整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行包含一个正整数 $t$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行包含一个正整数 $n$，表示节点数量。\n- 第二行 $n-1$ 个正整数 $f_2,\\dots,f_n$，$f_i$ 表示 $i$ 节点的父亲节点编号。保证 $f_i<i$。\n- 第三行 $n$ 个整数 $a_i$，表示初始水温。", "outputFormat": "输出到标准输出。\n\n对于每组测试数据：\n\n- 如果可以将水温变为 $0$，输出一行一个字符串 `Huoyu`；\n- 如果无法将水温变为 $0$，输出一行一个字符串 `Shuiniao`。", "hint": "**【样例 1 解释】**\n\n记 $A_u$ 表示在节点 $u$ 使用加热装置的操作，$B_u$ 表示从节点 $u$ 吹一阵风的操作，$(S)^k$ 表示将操作序列 $S$ 重复 $k$ 次。\n\n- 对于第一、三、四组测试数据，可以证明，小 S 无法将所有水杯的水温都变为 $0$；\n- 对于第二组测试数据，一种可能的操作序列为：$B_3(A_4)^2(B_4)^4B_5$；\n- 对于第五组测试数据，一种可能的操作序列为：$(A_4)^3A_1$。\n\n**【样例 2】**\n\n见选手目录下的 `water/water2.in` 与 `water/water2.ans`。\n\n这个样例满足测试点 $3$ 的约束条件。\n\n**【样例 3】**\n\n见选手目录下的 `water/water3.in` 与 `water/water3.ans`。\n\n这个样例满足测试点 $7,8$ 的约束条件。\n\n**【样例 4】**\n\n见选手目录下的 `water/water4.in` 与 `water/water4.ans`。\n\n这个样例满足测试点 $12$ 的约束条件。\n\n**【样例 5】**\n\n见选手目录下的 `water/water5.in` 与 `water/water5.ans`。\n\n这个样例满足测试点 $13,14$ 的约束条件。\n\n**【样例 6】**\n\n见选手目录下的 `water/water6.in` 与 `water/water6.ans`。\n\n这个样例满足测试点 $15\\sim 17$ 的约束条件。\n\n**【样例 7】**\n\n见选手目录下的 `water/water7.in` 与 `water/water7.ans`。\n\n这个样例满足测试点 $18\\sim 21$ 的约束条件。\n\n\n***\n\n**【数据范围】**\n\n记 $\\sum n$ 为单个测试点内所有测试数据中 $n$ 的和。\n\n对于全部的测试数据，保证：\n\n- $1\\leq t\\leq 1\\,000$；\n- $2\\leq n\\leq 10^5$，$\\sum n\\le 10^6$；\n- 对于任意 $2\\le i\\le n$，$1\\le f_i<i$；\n- 对于任意 $1\\le i\\le n$，$-10^{12}\\leq a_i\\leq10^{12}$。\n\n| 测试点 | $n\\leq$ | $\\sum n\\le $ | $\\lvert a_i\\rvert\\leq$ | 特殊性质 |\n| :----: | :-----: | :----------: | :--------------------: | :------: |\n| $1$ | $5$ | $50$ | $5$ | 无 |\n| $2$ | $5$ | $200$ | $5$ | 无 |\n| $3$ | $5$ | $5\\,000$ | $5$ | 无 |\n| $4,5$ | $50$ | $500$ | $50$ | 无 |\n| $6$ | $50$ | $500$ | $10^{8}$ | 无 |\n| $7,8$ | $200$ | $2\\,000$ | $200$ | 无 |\n| $9$ | $200$ | $2\\,000$ | $10^{8}$ | 无 |\n| $10,11$ | $1\\,000$ | $10^4$ | $1\\,000$ | 无|\n| $12$ | $1\\,000$ | $10^4$ | $10^{8}$ | 无 |\n| $13,14$ | $10^5$ | $3\\times 10^5$ | $10^{12}$ | A |\n| $15\\sim 17$ | $10^5$ | $3\\times 10^5$ | $10^{12}$ | B |\n| $18\\sim 21$ | $10^5$ | $3\\times 10^5$ | $10^{12}$ | C |\n| $22,23$ | $3\\times 10^4$ | $10^5$ | $10^{8}$ | 无 |\n| $24,25$ | $10^5$ | $10^6$ | $10^{12}$ | 无 |\n\n- 特殊性质 A：对于任意 $2\\le i\\le n$，$f_i=i-1$；\n- 特殊性质 B：对于任意 $1\\le i\\le n$，$a_i\\le \\left(\\sum_{f_j=i}a_j\\right)+5$，其中设 $f_1=0$；\n- 特殊性质 C：树的深度不超过 $2$，其中深度指所有节点到根的边数中的最大值。\n\n***\n\n**【提示】**\n\n本题输入输出量较大，请使用适当的 I/O 方式。", "locale": "zh-CN", "translations": {"en": {"title": "「KDOI-10」Water", "background": "|Input|Output|Time Limit|Memory Limit|\n|:--:|:--:|:--:|:--:|\n|standard input|standard output|2.0 s|512 MiB|\n\nThis problem has $25$ tests. The full score is $100$ points, and $4$ points per test.", "description": "Little S has a tree with $n$ vertices, rooted at vertex $1$. On vertex $i$ $(1\\le i\\le n)$, there is a water cup with an initial temperature of $a_i$.\n\nLittle S, who picked up a water cup and drank water without knowing the temperature and was scalded many times, decided to change all the temperatures of the water in the cups to $0$.\n\nNow, Little S can do the following two types of operations an arbitrary number of times (possibly zero):\n\n- Use a heater at vertex $i$. This will make the temperature of the water cups on all vertices in subtree $i$ increase by $1$;\n- Or, blow a gust of wind from a **leaf** $i$. This will make the temperature of the water cups on the route between $1$ and $i$ decrease by $1$.\n\nHelp Little S determine whether he can make the temperature of all the water cups become $0$.", "inputFormat": "**Each test contains multiple test cases.**\n\nThe first line of the input contains a single integer $c$ — the id of the test. $c=0$ represents that this is a sample test.\n\nThe second line contains a single integer $t$ — the number of test cases.\n\nFor each test case:\n\n- The first line contains a single integer $n$ — the number of vertices.\n- The second line contains $n-1$ integers $f_2,f_3,\\dots,f_n$, in which $f_i$ is the parent vertex of vertex $i$. It is guaranteed that $f_i<i$.\n- The third line contains $n$ integers $a_i$ — the initial temperature of the water cup on vertex $i$.", "outputFormat": "For each test case:\n\n- If it is possible to make the temperature of all the water cups $0$, print one line, a string `Huoyu`;\n- If it is impossible to do so, print one line, a string `Shuiniao`.", "hint": "**Sample 1 Explanation**\n\nLet $A_u$ be a heating operation on vertex $u$, $B_u$ be a wind operation from vertex $u$ and $(S)^k$ be repeating the operations in $S$ for $k$ times.\n\n- In the first, third and fourth test case, it can be proven that Little S can't make the temperature of all the water cups $0$;\n- In the second test case, a possible operation sequence is $B_3(A_4)^3(B_4)^5B_5$;\n- For the fifth test case, a possible operation sequence is $(A_4)^3A_1$.\n\n**Sample 2**\n\nSee `water/water2.in` and `water/water2.ans` in the attachments.\n\nThis sample satisfies the constraints of test $3$.\n\n**Sample 3**\n\nSee `water/water3.in` and `water/water3.ans` in the attachments.\n\nThis sample satisfies the constraints of test $7,8$.\n\n\n**Sample 4**\n\nSee `water/water4.in` and `water/water4.ans` in the attachments.\n\nThis sample satisfies the constraints of test $12$.\n\n\n**Sample 5**\n\nSee `water/water5.in` and `water/water5.ans` in the attachments.\n\nThis sample satisfies the constraints of test $13,14$.\n\n**Sample 6**\n\nSee `water/water6.in` and `water/water6.ans` in the attachments.\n\nThis sample satisfies the constraints of test $15\\sim 17$.\n\n**Sample 7**\n\nSee `water/water7.in` and `water/water7.ans` in the attachments.\n\nThis sample satisfies the constraints of test $18\\sim 21$.\n\n***\n\n**Constraints**\n\nLet $\\sum n$ be the sum of $n$ over all test cases in a single test.\n\nFor all the tests, it is guaranteed that:\n\n- $1\\leq t\\leq 1\\,000$;\n- $2\\leq n\\leq 10^5$, $\\sum n\\le 10^6$;\n- For each $2\\le i\\le n$, $1\\le f_i<i$;\n- For each $1\\le i\\le n$, $-10^{12}\\leq a_i\\leq10^{12}$.\n\n| Test Id | $n\\leq$ | $\\sum n\\le $ | $\\lvert a_i\\rvert\\leq$ | Special Properties |\n| :----: | :-----: | :----------: | :--------------------: | :------: |\n| $1$ | $5$ | $50$ | $5$ | - |\n| $2$ | $5$ | $200$ | $5$ | - |\n| $3$ | $5$ | $5\\,000$ | $5$ | - |\n| $4,5$ | $50$ | $500$ | $50$ | - |\n| $6$ | $50$ | $500$ | $10^{8}$ | - |\n| $7,8$ | $200$ | $2\\,000$ | $200$ | - |\n| $9$ | $200$ | $2\\,000$ | $10^{8}$ | - |\n| $10,11$ | $1\\,000$ | $10^4$ | $1\\,000$ | - |\n| $12$ | $1\\,000$ | $10^4$ | $10^{8}$ | - |\n| $13,14$ | $10^5$ | $3\\times 10^5$ | $10^{12}$ | A |\n| $15\\sim 17$ | $10^5$ | $3\\times 10^5$ | $10^{12}$ | B |\n| $18\\sim 21$ | $10^5$ | $3\\times 10^5$ | $10^{12}$ | C |\n| $22,23$ | $3\\times 10^4$ | $10^5$ | $10^{8}$ | - |\n| $24,25$ | $10^5$ | $10^6$ | $10^{12}$ | - |\n\n- Property A: For each $2\\le i\\le n$, $f_i=i-1$;\n- Property B: For each $1\\le i\\le n$, $a_i\\le \\left(\\sum_{f_j=i}a_j\\right)+5$, where $f_1=0$;\n- Property C: The depth of the tree does not exceed $2$, where the depth of the tree denotes the maximum number of edges in the simple path from a node to the root.\n\n***\n\n**Hints**\n\nThe input and output files are huge in this problem, please use fast I/O methods.\n", "locale": "en"}, "zh-CN": {"title": "「KDOI-10」水杯降温", "background": "**本场比赛所有题目从标准输入读入数据，输出到标准输出。**", "description": "小 S 有一棵包含 $n$ 个节点的有根树，且根为节点 $1$。节点 $i$ $(1\\le i\\le n)$ 上放置了一个初始水温为 $a_i$ 的水杯。\n\n在不知道水温的情况下拿起水杯喝水并被烫了 inf 次的小 S 决定将这些水杯的水温全部变为 $0$ 后再喝它们。\n\n现在，小 S 可以分别进行以下两种操作任意次：\n\n* 使用一个在节点 $i$ 的加热装置。这会使以 $i$ 为根的子树内所有水杯里的水温均增加 $1$；\n* 或者，从某个**叶子**节点 $i$ 向根方向吹一阵风。这会使 $i$ 到根所有水杯里的水温均减少 $1$。\n\n请你帮小 S 判断：能否将所有节点上的水杯的水温都变为 $0$。\n\n", "inputFormat": "从标准输入读入数据。\n\n**本题有多组测试数据。** \n\n输入的第一行包含一个正整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行包含一个正整数 $t$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行包含一个正整数 $n$，表示节点数量。\n- 第二行 $n-1$ 个正整数 $f_2,\\dots,f_n$，$f_i$ 表示 $i$ 节点的父亲节点编号。保证 $f_i<i$。\n- 第三行 $n$ 个整数 $a_i$，表示初始水温。", "outputFormat": "输出到标准输出。\n\n对于每组测试数据：\n\n- 如果可以将水温变为 $0$，输出一行一个字符串 `Huoyu`；\n- 如果无法将水温变为 $0$，输出一行一个字符串 `Shuiniao`。", "hint": "**【样例 1 解释】**\n\n记 $A_u$ 表示在节点 $u$ 使用加热装置的操作，$B_u$ 表示从节点 $u$ 吹一阵风的操作，$(S)^k$ 表示将操作序列 $S$ 重复 $k$ 次。\n\n- 对于第一、三、四组测试数据，可以证明，小 S 无法将所有水杯的水温都变为 $0$；\n- 对于第二组测试数据，一种可能的操作序列为：$B_3(A_4)^2(B_4)^4B_5$；\n- 对于第五组测试数据，一种可能的操作序列为：$(A_4)^3A_1$。\n\n**【样例 2】**\n\n见选手目录下的 `water/water2.in` 与 `water/water2.ans`。\n\n这个样例满足测试点 $3$ 的约束条件。\n\n**【样例 3】**\n\n见选手目录下的 `water/water3.in` 与 `water/water3.ans`。\n\n这个样例满足测试点 $7,8$ 的约束条件。\n\n**【样例 4】**\n\n见选手目录下的 `water/water4.in` 与 `water/water4.ans`。\n\n这个样例满足测试点 $12$ 的约束条件。\n\n**【样例 5】**\n\n见选手目录下的 `water/water5.in` 与 `water/water5.ans`。\n\n这个样例满足测试点 $13,14$ 的约束条件。\n\n**【样例 6】**\n\n见选手目录下的 `water/water6.in` 与 `water/water6.ans`。\n\n这个样例满足测试点 $15\\sim 17$ 的约束条件。\n\n**【样例 7】**\n\n见选手目录下的 `water/water7.in` 与 `water/water7.ans`。\n\n这个样例满足测试点 $18\\sim 21$ 的约束条件。\n\n\n***\n\n**【数据范围】**\n\n记 $\\sum n$ 为单个测试点内所有测试数据中 $n$ 的和。\n\n对于全部的测试数据，保证：\n\n- $1\\leq t\\leq 1\\,000$；\n- $2\\leq n\\leq 10^5$，$\\sum n\\le 10^6$；\n- 对于任意 $2\\le i\\le n$，$1\\le f_i<i$；\n- 对于任意 $1\\le i\\le n$，$-10^{12}\\leq a_i\\leq10^{12}$。\n\n| 测试点 | $n\\leq$ | $\\sum n\\le $ | $\\lvert a_i\\rvert\\leq$ | 特殊性质 |\n| :----: | :-----: | :----------: | :--------------------: | :------: |\n| $1$ | $5$ | $50$ | $5$ | 无 |\n| $2$ | $5$ | $200$ | $5$ | 无 |\n| $3$ | $5$ | $5\\,000$ | $5$ | 无 |\n| $4,5$ | $50$ | $500$ | $50$ | 无 |\n| $6$ | $50$ | $500$ | $10^{8}$ | 无 |\n| $7,8$ | $200$ | $2\\,000$ | $200$ | 无 |\n| $9$ | $200$ | $2\\,000$ | $10^{8}$ | 无 |\n| $10,11$ | $1\\,000$ | $10^4$ | $1\\,000$ | 无|\n| $12$ | $1\\,000$ | $10^4$ | $10^{8}$ | 无 |\n| $13,14$ | $10^5$ | $3\\times 10^5$ | $10^{12}$ | A |\n| $15\\sim 17$ | $10^5$ | $3\\times 10^5$ | $10^{12}$ | B |\n| $18\\sim 21$ | $10^5$ | $3\\times 10^5$ | $10^{12}$ | C |\n| $22,23$ | $3\\times 10^4$ | $10^5$ | $10^{8}$ | 无 |\n| $24,25$ | $10^5$ | $10^6$ | $10^{12}$ | 无 |\n\n- 特殊性质 A：对于任意 $2\\le i\\le n$，$f_i=i-1$；\n- 特殊性质 B：对于任意 $1\\le i\\le n$，$a_i\\le \\left(\\sum_{f_j=i}a_j\\right)+5$，其中设 $f_1=0$；\n- 特殊性质 C：树的深度不超过 $2$，其中深度指所有节点到根的边数中的最大值。\n\n***\n\n**【提示】**\n\n本题输入输出量较大，请使用适当的 I/O 方式。", "locale": "zh-CN"}}}
{"pid": "P11190", "type": "P", "difficulty": 5, "samples": [["0\n4\n4\nkdoi\n7\nccccccc\n7\nsszcdjr\n7\nabacaca", "Huoyu\n2\n2 1 2\n2 3 4\nShuiniao\nHuoyu\n3\n3 1 2 3\n2 4 5\n2 6 7\nHuoyu\n3\n2 1 4\n3 2 3 5\n2 6 7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "贪心", "2024", "洛谷原创", "Special Judge", "O2优化", "随机化", "构造", "洛谷月赛"], "title": "「KDOI-10」反回文串", "background": "**本场比赛所有题目从标准输入读入数据，输出到标准输出。**", "description": "我们称一个长度为 $m$ 的字符串 $r$ 是回文的，当且仅当 $r_i=r_{m+1-i}$ 对所有 $1\\le i\\le m$ 均成立。\n\n给定一个长度为 $n$ 的字符串 $s$，你需要把 $s$ 分成若干个非空子序列，使得每一个子序列都**不是**回文的，并最大化划分成的子序列数。\n\n形式化地说，你需要给出一组序列 $(a_1,a_2,\\ldots,a_k)$，满足：\n\n- 对于任意 $1\\le i\\le k$，记 $l_i$ 为 $a_i$ 的长度，则 $l_i\\ge 1$，且 $1\\le a_{i,1}<a_{i,2}<\\cdots<a_{i,l_i}\\le n$；\n- 对于任意 $1\\le i\\le n$，恰好存在一个二元组 $(p,q)$，使得 $a_{p,q}=i$；\n- 对于任意 $1\\le i\\le k$，记字符串 $t=s_{a_{i,1}}s_{a_{i,2}}\\ldots s_{a_{i,l_i}}$，则 $t$ 不是回文的。\n\n在此基础上，你需要最大化 $k$ 的值；或者判断不存在一种合法的方案。\n\n特别地，如果 $k$ 的值不是最大的，你也可能获得一定的部分分。\n", "inputFormat": "从标准输入读入数据。\n\n**本题有多组测试数据。** \n\n输入的第一行包含一个正整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行包含一个正整数 $q$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行包含一个正整数 $n$，表示字符串 $s$ 的长度；\n- 第二行包含一个长度为 $n$ 的字符串 $s$。保证 $s$ 中仅包含小写英文字母。", "outputFormat": "输出到标准输出。\n\n对于每组测试数据：\n\n- 如果不存在一种合法的方案，输出一行一个字符串 `Shuiniao`；\n- 否则，你需要：\n  - 在第一行输出一个字符串 `Huoyu`；\n  - 第二行输出一个正整数 $k$ $(1\\le k\\le n)$，表示你划分成的子序列个数；\n  - 接下来 $k$ 行，对于第 $i$ 行 $(1\\le i\\le k)$：\n    - 首先输出一个正整数 $l_i$ $(1\\le l_i\\le n)$，表示第 $i$ 个子序列的长度；\n    - 接下来输出 $l_i$ 个正整数 $a_{i,1},a_{i,2},\\ldots, a_{i,l_i}$ $(1\\le a_{i,j}\\le n)$，表示第 $i$ 个子序列。\n\n请注意，你的输出需要满足题目描述中所有的限制，否则，你将会得到 $0$ 分。", "hint": "**【样例 1 解释】**\n\n对于第一组测试数据，显然输出构成一个合法的子序列划分，并且\n\n- 对于第一个子序列，$t=\\tt{kd}$ 不是回文的；\n- 对于第二个子序列，$t=\\tt{oi}$ 不是回文的。\n\n故这是一组合法的输出。可以证明，对于这组测试数据，$2$ 是 $k$ 的最大可能值。\n\n对于第二组数据，它的任意一个子序列都是回文的， 故显然不存在合法的划分方案。\n\n**【样例 2】**\n\n见选手目录下的 `anti/anti2.in` 与 `anti/anti2.ans`。\n\n这个样例共有 $10$ 组数据，均满足 $n=1\\,000$。其中第 $1\\sim 3$ 组数据满足特殊性质 A，第 $4\\sim 6$ 组数据满足特殊性质 B。\n\n***\n\n**【评分方式】**\n\n本题共有 $20$ 个测试点，每个测试点满分 $5$ 分。\n\n本题采用自定义校验器（special judge）评测。每组测试数据可能有多组解，你只需要给出**任意**一组。\n\n在每个测试点中，你的得分是在所有测试数据上得分的最小值。对于每组测试数据：\n\n- 如果你错误地判断了是否有解或者给出了一组不合法的序列，你将会获得 $0$ 分；\n- 如果你正确判断了是否有解，并在有解时给出了一组合法的序列：\n  - 如果 $k$ 的值不是最大的，你将会获得 $2$ 分；\n  - 如果 $k$ 的值是最大的，你将会获得 $5$ 分。\n  \n***\n\n**【数据范围】**\n\n对于全部的测试数据，保证：\n\n- $1\\le q\\le 10$；\n- $1\\le n\\le 10^5$；\n- $s$ 中仅包含小写英文字母。\n\n|测试点|$n\\le$|特殊性质|\n|:--:|:--:|:--:|\n|$1,2$|$5$|无|\n|$3\\sim 5$|$18$|无|\n|$6\\sim 8$|$1\\,000$|B|\n|$9\\sim 11$|$1\\,000$|无|\n|$12\\sim 14$|$10^5$|A|\n|$15\\sim 17$|$10^5$|B|\n|$18\\sim 20$|$10^5$|无|\n\n- 特殊性质 A：保证 $n$ 是偶数，且 $s$ 中每个字符的出现次数都不超过 $\\frac{n}{2}$；\n- 特殊性质 B：保证 $s$ 中仅有 `a` 和 `b`。\n\n***\n\n**【如何使用校验器】**\n\n为了方便选手测试，在附件的 `anti` 目录下我们下发了 `checker.cpp` 文件作为样例校验器，选手可以编译该程序，并使用它校验自己的输出文件的结果是否**合法**。但请注意它与最终评测时所使用的校验器并不完全一致。你也不需要关心其代码的具体内容。\n\n编译命令为：\n\n```sh\ng++ -o checker -std=c++14 -O2 checker.cpp\n```\n\n`checker` 的使用方式为：\n\n```sh\nchecker <input-file> <output-file>\n```\n\n其中，参数 ` <input-file>` 与 `<output-file>` 依次表示输入文件与你的输出文件。\n\n若你的输出中的数字大小范围不合法，则校验器会给出相应提示并立即退出。否则，校验器输出以下内容：\n\n- 在第 $i$ 行 $(1\\le i\\le q)$ 中，输出第 $i$ 组测试数据的详细提示信息；\n- 在第 $(q+1)$ 行，输出这个测试点的总结信息。\n\n例如，对于样例 1 的输入与输出，校验器将会向屏幕打印如下内容：\n\n```plain\nTest case 1: OK. Participant's answer is YES (Huoyu), and k=2.\nTest case 2: OK. Participant's answer is NO (Shuiniao).\nTest case 3: OK. Participant's answer is YES (Huoyu), and k=3.\nTest case 4: OK. Participant's answer is YES (Huoyu), and k=3.\nok 4 / 4 test cases passed. (4 test cases)\n```\n\n若将输出改为如下：\n\n```plain\nHuoyu\n2\n2 1 2\n2 3 4\nHuoyu\n1\n7 1 2 3 4 5 6 7\nHuoyu\n3\n3 1 2 3\n2 4 5\n2 6 7\nHuoyu\n3\n2 1 4\n3 2 3 5\n2 6 7\n```\n\n则会向屏幕打印如下内容：\n\n```plain\nTest case 1: OK. Participant's answer is YES (Huoyu), and k=2.\nTest case 2: Wrong answer. The string t obtained in the subsequence a[1] is palindrome.\nTest case 3: OK. Participant's answer is YES (Huoyu), and k=3.\nTest case 4: OK. Participant's answer is YES (Huoyu), and k=3.\nwrong answer 3 / 4 test cases passed.\n```\n\n**请注意：** 样例校验器只会检查你的输出是否合法，而**不会**：\n\n- 检查有解性是否判断正确；\n- 检查 $k$ 是否被最大化。\n\n例如，将样例 1 的输出改为如下：\n\n```plain\nShuiniao\nShuiniao\nShuiniao\nShuiniao\n```\n\n此时，样例校验器仍会返回 `ok` 的检查结果。\n", "locale": "zh-CN", "translations": {"en": {"title": "「KDOI-10」Anti-palindrome", "background": "|Input|Output|Time Limit|Memory Limit|\n|:--:|:--:|:--:|:--:|\n|standard input|standard output|1.0 s|512 MiB|\n\nThis problem has $20$ tests. The full score is $100$ points, and $5$ points per test.", "description": "We call a string $r$ with length $m$ *palindrome* if and only if for each $1\\le i\\le m$, $r_i=r_{m+1-i}$ holds.\n\nGiven a string $s$ of length $n$, you have to divide $s$ into several non-empty subsequences such that each of these subsequences is **not** palindrome, and maximize the number of subsequences.\n\nFormally, you have to find a group of sequences $(a_1,a_2,\\dots a_k)$ such that:\n\n- For each $1\\le i\\le k$, let $l_i$ be the length of $a_i$, then $l_i\\ge 1$ and $1\\leq a_{i,1}< a_{i,2}<\\dots<a_{i,l_i}\\leq n$;\n- For each $1\\le i\\le n$, there is exactly one integer pair $(p,q)$ such that $a_{p,q}=i$;\n- For each $1\\le i\\le k$, let string $t:=s_{a_{i,1}}s_{a_{i,2}}\\dots s_{a_{i,l_i}}$, then $t$ is not palindrome.\n\nYou have to maximize $k$, or determine there is no solution.\n\nSpecially, if your $k$ is not maximized, you may still get partial scores.", "inputFormat": "**Each test contains multiple test cases.**\n\nThe first line of the input contains a single integer $c$ — the id of the test. $c=0$ represents that this is a sample test.\n\nThe second line contains a single integer $q$ — the number of test cases.\n\nFor each test case:\n\n- The first line contains a single integer $n$ — the length of the string $s$.\n- The second line contains a string $s$ length $n$. It is guaranteed that $s$ only contains lowercase English letters.", "outputFormat": "For each test case:\n\n- If there is no valid solution, print single string `Shuiniao` on the only line of output.\n- Otherwise, you have to:\n  - Print a sinle string `Huoyu` on the first line;\n  - Print an integer $k$ $(1\\le k\\le n)$ — the number of subsequences such that the string $s$ is divided into;\n  - For the $i$-th line of the next $k$ lines $(1\\le i\\le k)$:\n    - First, output an integer $l_i$ $(1\\le l_i\\le n)$ — the length of the $i$-th subsequence;\n    - Next, output $l_i$ integers $a_{i,1},a_{i,2},\\ldots, a_{i,l_i}$ $(1\\le a_{i,j}\\le n)$ — the $i$-th subsequence.\n\nNote that your output should satisfy all the constraints above, otherwise, you will get $0$ points in corresponding tests.", "hint": "**Sample 1 Explanation**\n\nIn the first test case, it is obvious that the output satisfies the constraints. And:\n\n- For the first subsequence, $t=\\tt{kd}$ which is not palindrome.\n- For the second subsequence, $t=\\tt{oi}$ which is not palindrome.\n\nAs a result, this is a valid output. It can be proven that for this test case, the maximum possible value of $k$ is $2$.\n\nIn the second test case, all of subsequences of $s$ are palindrome, so it is obvious that there is no solution.\n\n**Sample 2**\n\nSee `anti/anti2.in` and `anti/anti2.ans` in the attachments.\n\nThis sample has $10$ test cases, all satisfying $n=1\\,000$. Among them, the first to third test cases satisfy property A and the fourth to sixth test cases satisfy property B.\n\n***\n\n**Scoring**\n\nThis problem has $20$ tests and each worth $5$ points.\n\nThis problem is judged using ___Special Judge___. Each test case might have multiple solutions and you only need to output one of them.\n\nIn each test, your score is the minimum number of points you receive in each test case. For each test case:\n\n- If you incorrectly judged whether there is a solution or print an invalid solution, no points will be given.\n- If you correctly judged whether there is a valid solution and print a valid solution:\n  - If $k$ is not maximized, $2$ points will be given.\n  - If $k$ is maximized, $5$ points will be given.\n  \n***\n\n**Constraints**\n\nFor all the tests, it is guaranteed that:\n\n- $1\\le q\\le 10$;\n- $1\\le n\\le 10^5$;\n- $s$ only contains lowercase English letters.\n\n|Test Id|$n\\le$|Special Properties|\n|:--:|:--:|:--:|\n|$1,2$|$5$|-|\n|$3\\sim 5$|$18$|-|\n|$6\\sim 8$|$1\\,000$|B|\n|$9\\sim 11$|$1\\,000$|-|\n|$12\\sim 14$|$10^5$|A|\n|$15\\sim 17$|$10^5$|B|\n|$18\\sim 20$|$10^5$|-|\n\n- Property A: It is guaranteed that $n$ is even and each type of letter in $s$ appears no more than $\\frac{n}{2}$ times.\n- Property B: It is guaranteed that $s$ only consists of `a` or `b`.\n\n***\n\n**How to Use the Checker**\n\nTo help participants test their program, in the `anti` directory in the attachments, `checker.cpp` is provided. Participants can compile their codes and check whether the output is **valid** with it. Note that it is not exactly the same as the checker in final testing. You needn't care its content.\n\nThe compile commands are:\n\n```sh\ng++ −o checker -std=c++14 -O2 checker.cpp\n```\n\nYou can use `checker.cpp` like this:\n\n```sh\nchecker <input-file> <output-file>\n```\n\nParameters ` <input-file>` and `<output-file>` are respectively the input file and your output file.\n\nIf your output is out of range, the checker will report it and exit immediately. Otherwise, the checker will do the following things:\n\n- In the $i$-th line $(1\\le i\\le q)$, output the detail of the $i$-th test case.\n- In the $(q+1)$-th line, output the summary of this test.\n\nAs an example, for the input and output of the first sample, the checker will output the following things to the screen: \n\n```plain\nTest case 1: OK. Participant's answer is YES (Huoyu), and k=2.\nTest case 2: OK. Participant's answer is NO (Shuiniao).\nTest case 3: OK. Participant's answer is YES (Huoyu), and k=3.\nTest case 4: OK. Participant's answer is YES (Huoyu), and k=3.\nok 4 / 4 test cases passed. (4 test cases)\n```\n\nIf the output file is changed to this:\n\n```plain\nHuoyu\n2\n2 1 2\n2 3 4\nHuoyu\n1\n7 1 2 3 4 5 6 7\nHuoyu\n3\n3 1 2 3\n2 4 5\n2 6 7\nHuoyu\n3\n2 1 4\n3 2 3 5\n2 6 7\n```\n\nThen the checker will output the following things to the screen:  \n\n```plain\nTest case 1: OK. Participant's answer is YES (Huoyu), and k=2.\nTest case 2: Wrong answer. The string t obtained in the subsequence a[1] is palindrome.\nTest case 3: OK. Participant's answer is YES (Huoyu), and k=3.\nTest case 4: OK. Participant's answer is YES (Huoyu), and k=3.\nwrong answer 3 / 4 test cases passed.\n```\n\n**Note that** `checker.cpp` will only check whether your output is valid, and **will not**:\n\n* Check whether you correctly judge if there's a valid solution.\n* Check whether $k$ is maximized.\n\nAs an example, if the output file of sample $1$ is changed to this:\n\n```plain\nShuiniao\nShuiniao\nShuiniao\nShuiniao\n```\n\n`checker.cpp` will still report `ok` as a result.\n", "locale": "en"}, "zh-CN": {"title": "「KDOI-10」反回文串", "background": "**本场比赛所有题目从标准输入读入数据，输出到标准输出。**", "description": "我们称一个长度为 $m$ 的字符串 $r$ 是回文的，当且仅当 $r_i=r_{m+1-i}$ 对所有 $1\\le i\\le m$ 均成立。\n\n给定一个长度为 $n$ 的字符串 $s$，你需要把 $s$ 分成若干个非空子序列，使得每一个子序列都**不是**回文的，并最大化划分成的子序列数。\n\n形式化地说，你需要给出一组序列 $(a_1,a_2,\\ldots,a_k)$，满足：\n\n- 对于任意 $1\\le i\\le k$，记 $l_i$ 为 $a_i$ 的长度，则 $l_i\\ge 1$，且 $1\\le a_{i,1}<a_{i,2}<\\cdots<a_{i,l_i}\\le n$；\n- 对于任意 $1\\le i\\le n$，恰好存在一个二元组 $(p,q)$，使得 $a_{p,q}=i$；\n- 对于任意 $1\\le i\\le k$，记字符串 $t=s_{a_{i,1}}s_{a_{i,2}}\\ldots s_{a_{i,l_i}}$，则 $t$ 不是回文的。\n\n在此基础上，你需要最大化 $k$ 的值；或者判断不存在一种合法的方案。\n\n特别地，如果 $k$ 的值不是最大的，你也可能获得一定的部分分。\n", "inputFormat": "从标准输入读入数据。\n\n**本题有多组测试数据。** \n\n输入的第一行包含一个正整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行包含一个正整数 $q$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行包含一个正整数 $n$，表示字符串 $s$ 的长度；\n- 第二行包含一个长度为 $n$ 的字符串 $s$。保证 $s$ 中仅包含小写英文字母。", "outputFormat": "输出到标准输出。\n\n对于每组测试数据：\n\n- 如果不存在一种合法的方案，输出一行一个字符串 `Shuiniao`；\n- 否则，你需要：\n  - 在第一行输出一个字符串 `Huoyu`；\n  - 第二行输出一个正整数 $k$ $(1\\le k\\le n)$，表示你划分成的子序列个数；\n  - 接下来 $k$ 行，对于第 $i$ 行 $(1\\le i\\le k)$：\n    - 首先输出一个正整数 $l_i$ $(1\\le l_i\\le n)$，表示第 $i$ 个子序列的长度；\n    - 接下来输出 $l_i$ 个正整数 $a_{i,1},a_{i,2},\\ldots, a_{i,l_i}$ $(1\\le a_{i,j}\\le n)$，表示第 $i$ 个子序列。\n\n请注意，你的输出需要满足题目描述中所有的限制，否则，你将会得到 $0$ 分。", "hint": "**【样例 1 解释】**\n\n对于第一组测试数据，显然输出构成一个合法的子序列划分，并且\n\n- 对于第一个子序列，$t=\\tt{kd}$ 不是回文的；\n- 对于第二个子序列，$t=\\tt{oi}$ 不是回文的。\n\n故这是一组合法的输出。可以证明，对于这组测试数据，$2$ 是 $k$ 的最大可能值。\n\n对于第二组数据，它的任意一个子序列都是回文的， 故显然不存在合法的划分方案。\n\n**【样例 2】**\n\n见选手目录下的 `anti/anti2.in` 与 `anti/anti2.ans`。\n\n这个样例共有 $10$ 组数据，均满足 $n=1\\,000$。其中第 $1\\sim 3$ 组数据满足特殊性质 A，第 $4\\sim 6$ 组数据满足特殊性质 B。\n\n***\n\n**【评分方式】**\n\n本题共有 $20$ 个测试点，每个测试点满分 $5$ 分。\n\n本题采用自定义校验器（special judge）评测。每组测试数据可能有多组解，你只需要给出**任意**一组。\n\n在每个测试点中，你的得分是在所有测试数据上得分的最小值。对于每组测试数据：\n\n- 如果你错误地判断了是否有解或者给出了一组不合法的序列，你将会获得 $0$ 分；\n- 如果你正确判断了是否有解，并在有解时给出了一组合法的序列：\n  - 如果 $k$ 的值不是最大的，你将会获得 $2$ 分；\n  - 如果 $k$ 的值是最大的，你将会获得 $5$ 分。\n  \n***\n\n**【数据范围】**\n\n对于全部的测试数据，保证：\n\n- $1\\le q\\le 10$；\n- $1\\le n\\le 10^5$；\n- $s$ 中仅包含小写英文字母。\n\n|测试点|$n\\le$|特殊性质|\n|:--:|:--:|:--:|\n|$1,2$|$5$|无|\n|$3\\sim 5$|$18$|无|\n|$6\\sim 8$|$1\\,000$|B|\n|$9\\sim 11$|$1\\,000$|无|\n|$12\\sim 14$|$10^5$|A|\n|$15\\sim 17$|$10^5$|B|\n|$18\\sim 20$|$10^5$|无|\n\n- 特殊性质 A：保证 $n$ 是偶数，且 $s$ 中每个字符的出现次数都不超过 $\\frac{n}{2}$；\n- 特殊性质 B：保证 $s$ 中仅有 `a` 和 `b`。\n\n***\n\n**【如何使用校验器】**\n\n为了方便选手测试，在附件的 `anti` 目录下我们下发了 `checker.cpp` 文件作为样例校验器，选手可以编译该程序，并使用它校验自己的输出文件的结果是否**合法**。但请注意它与最终评测时所使用的校验器并不完全一致。你也不需要关心其代码的具体内容。\n\n编译命令为：\n\n```sh\ng++ -o checker -std=c++14 -O2 checker.cpp\n```\n\n`checker` 的使用方式为：\n\n```sh\nchecker <input-file> <output-file>\n```\n\n其中，参数 ` <input-file>` 与 `<output-file>` 依次表示输入文件与你的输出文件。\n\n若你的输出中的数字大小范围不合法，则校验器会给出相应提示并立即退出。否则，校验器输出以下内容：\n\n- 在第 $i$ 行 $(1\\le i\\le q)$ 中，输出第 $i$ 组测试数据的详细提示信息；\n- 在第 $(q+1)$ 行，输出这个测试点的总结信息。\n\n例如，对于样例 1 的输入与输出，校验器将会向屏幕打印如下内容：\n\n```plain\nTest case 1: OK. Participant's answer is YES (Huoyu), and k=2.\nTest case 2: OK. Participant's answer is NO (Shuiniao).\nTest case 3: OK. Participant's answer is YES (Huoyu), and k=3.\nTest case 4: OK. Participant's answer is YES (Huoyu), and k=3.\nok 4 / 4 test cases passed. (4 test cases)\n```\n\n若将输出改为如下：\n\n```plain\nHuoyu\n2\n2 1 2\n2 3 4\nHuoyu\n1\n7 1 2 3 4 5 6 7\nHuoyu\n3\n3 1 2 3\n2 4 5\n2 6 7\nHuoyu\n3\n2 1 4\n3 2 3 5\n2 6 7\n```\n\n则会向屏幕打印如下内容：\n\n```plain\nTest case 1: OK. Participant's answer is YES (Huoyu), and k=2.\nTest case 2: Wrong answer. The string t obtained in the subsequence a[1] is palindrome.\nTest case 3: OK. Participant's answer is YES (Huoyu), and k=3.\nTest case 4: OK. Participant's answer is YES (Huoyu), and k=3.\nwrong answer 3 / 4 test cases passed.\n```\n\n**请注意：** 样例校验器只会检查你的输出是否合法，而**不会**：\n\n- 检查有解性是否判断正确；\n- 检查 $k$ 是否被最大化。\n\n例如，将样例 1 的输出改为如下：\n\n```plain\nShuiniao\nShuiniao\nShuiniao\nShuiniao\n```\n\n此时，样例校验器仍会返回 `ok` 的检查结果。\n", "locale": "zh-CN"}}}
{"pid": "P11191", "type": "P", "difficulty": 6, "samples": [["0\n5 5 5 4\n2 1\n3 1\n5 1\n4 2\n4 3\n2 4 4 3 5\n1 2\n1 5\n3 5\n2 3\n", "2\n0\n2\n4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2024", "洛谷原创", "O2优化", "扫描线", "洛谷月赛", "根号分治"], "title": "「KDOI-10」超级演出", "background": "**本场比赛所有题目从标准输入读入数据，输出到标准输出。**", "description": "巡准备了一场超级演出。舞台和候场室可以看作一个包含 $n$ 个点 $m$ 条边的有向图，并且这个图当中没有环，也就是说，这是一张有向无环图（DAG）。\n\n舞台为 $1$ 号节点，**保证所有节点均有到达节点 $\\bm 1$ 的路径**。其余的节点均为候场室，每个候场室恰有一个剧团进行等待。\n\n巡可以对一个候场室 $u$ 发布出场命令：\n\n- 如果这个候场室的剧团还没有出场，并且存在一条 $u\\to 1$ 的路径上没有其余候场的剧团。那么这个剧团就会沿着这条路径到达舞台进行演出，随后退场。注意：**一个剧团退场后不会重新回到候场室。**\n- 否则，这个命令被认为是无效的。\n\n巡有一个命令序列 $a_1,a_2,\\dots,a_k$ 和 $q$ 次询问，每次给出一个区间 $[l,r]$。巡想要知道如果依次对候场室 $a_l,a_{l+1},\\dots,a_r$ 发布出场命令后，候场室还会剩下多少剧团等待演出。\n\n注意：每次询问相互独立，也就是说，每次询问之前，每个候场室都恰有一个剧团进行等待。\n", "inputFormat": "从标准输入读入数据。\n\n输入的第一行包含一个正整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行包含四个正整数 $n,m,k,q$，表示图的点数，边数，序列长度，和询问次数。\n\n接下来 $m$ 行，每行两个正整数 $u,v$，表示一条从 $u$ 到 $v$ 的有向边。保证无自环，无重边。\n\n接下来的一行，$k$ 个正整数 $a_1,a_2,\\dots,a_k$。\n\n接下来 $q$ 行，每行两个正整数 $l,r$，表示一次询问的区间。", "outputFormat": "输出到标准输出。\n\n$q$ 行，每行一个非负整数，表示一次询问的答案。", "hint": "**【样例 1 解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2a4qed7w.png)\n\n如图：\n\n- 当询问 $l=1,r=2$ 时：\n\t- 发布出场命令 $a_1=2$。$2$ 沿着 $2\\to 1$ 出场。\n   - 发布出场命令 $a_2=4$。$4$ 沿着 $4\\to 2\\to 1$ 出场。\n   \n   此时余下 $3,5$ 两个剧团，输出 $2$。\n   \n- 当询问 $l=2,r=3$ 时：\n\t- 发布出场命令 $a_2=4$。找不到 $4\\to 1$ 的且路上没有别的剧团的路线，该指令被认为无效。\n   - 发布出场命令 $a_3=4$。找不到 $4\\to 1$ 的且路上没有别的剧团的路线，该指令被认为无效。\n   \n   此时余下 $2,3,4,5$ 四个剧团，输出 $4$。\n  \n**【样例 2】**\n\n见选手目录下的 `show/show2.in` 与 `show/show2.ans`。\n\n这个样例满足测试点 $1,2$ 的限制条件。\n\n**【样例 3】**\n\n见选手目录下的 `show/show3.in` 与 `show/show3.ans`。\n\n这个样例满足测试点 $5\\sim 8$ 的限制条件。\n\n**【样例 4】**\n\n见选手目录下的 `show/show4.in` 与 `show/show4.ans`。\n\n这个样例满足测试点 $9\\sim 11$ 的限制条件。\n\n**【样例 5】**\n\n见选手目录下的 `show/show5.in` 与 `show/show5.ans`。\n\n这个样例满足测试点 $12,13$ 的限制条件。\n\n\n**【样例 6】**\n\n见选手目录下的 `show/show6.in` 与 `show/show6.ans`。\n\n这个样例满足测试点 $18,19$ 的限制条件。\n\n***\n\n**【数据范围】**\n\n对于全部的测试数据，保证：\n\n- $1\\leq n,k,q\\leq2\\times10^5$；\n- $1\\leq m\\leq4\\times10^5$；\n- $1\\leq v<u\\leq n$，且不存在两组相同的 $(u,v)$；\n- 对于任意 $1\\le i\\le k$，$2\\leq a_i\\leq n$；\n- 对于每组询问，$1\\leq l\\leq r\\leq k$；\n- 输入构成一张有向无环图，且所有节点均存在到达节点 $1$ 的路径。\n\n| 测试点 | $n,k,q\\leq$ | $m\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|\n| $1,2$ | $300$ | $600$ | 无 |\n| $3,4$ | $2\\,000$ | $4\\,000$ | A |\n| $5\\sim 8$ | $2\\,000$ | $4\\,000$ | 无 |\n| $9\\sim 11$ | $2\\times10^5$ | $4\\times10^5$ | A |\n| $12,13$ | $2\\times10^5$ | $4\\times10^5$ | BC |\n| $14,15$ | $2\\times10^5$ | $4\\times10^5$ | C |\n| $16,17$ | $2\\times10^5$ | $4\\times10^5$ | BD |\n| $18,19$ | $2\\times10^5$ | $4\\times10^5$ | D |\n| $20\\sim 22$ | $2\\times10^5$ | $4\\times10^5$ | B |\n| $23\\sim 25$ | $2\\times10^5$ | $4\\times10^5$ | 无 |\n\n- 特殊性质 A：图退化为一棵内向树，也就是说，除节点 $1$ 外，每个点恰有一条出边，节点 $1$ 没有出边；\n- 特殊性质 B：保证对于每组询问，$r=k$；\n- 特殊性质 C：保证对于任意 $1\\leq i< j\\leq k$，$a_i\\neq a_j$；\n- 特殊性质 D：保证每个点的入度和出度均不超过 $30$。", "locale": "zh-CN", "translations": {"en": {"title": "「KDOI-10」Super Show", "background": "|Input|Output|Time Limit|Memory Limit|\n|:--:|:--:|:--:|:--:|\n|standard input|standard output|1.0 s|512 MiB|\n\nThis problem has $25$ tests. The full score is $100$ points, and $4$ points per test.", "description": "Meguru has prepared a super show!\n\nThe stage and the waiting rooms can be seen as a directed acyclic graph (DAG) consisting of $n$ vertices and $m$ edges.\n\nThe stage is at vertex $1$, and the rest vertices are all waiting rooms. It is guaranteed that each vertex has at least one path to vertex $1$. For each waiting room, there is a troupe in it initially.\n\nMeguru can send an *enter* command to a waiting room $u$:\n\n- If the troupe in this room has not come to the stage yet, and there exists a path from $u$ to $1$ such that there are no troupe waiting for entrance, then the troupe in waiting room $u$ will come to the stage and subsequently exit. Note that a troupe will **not** return to the waiting room after the exit.\n- Otherwise, this command is considered as *inoperative*.\n\nMeguru has a command sequence $a_1,a_2,\\ldots, a_k$ and $q$ queries. In each query, an interval $[l,r]$ is given, and Meguru asks you that, if she sends the enter command to waiting room $a_l,a_{l+1},\\ldots,a_r$ successively, how many troupes are still in the waiting room.\n\nNote that each query is **independent**, i.e., before each query, there is a troupe in each waiting room.", "inputFormat": "The first line of the input contains a single integer $c$ — the id of the test. $c=0$ represents that this is a sample test.\n\nThe second line contains four integers $n$, $m$, $k$, and $q$ — the number of vertices, the number of edges, the length of the command sequence, and the number of queries.\n\nThen $m$ lines follow, each containing two integer $u$ and $v$ — there is an edge connecting $u$ and $v$. It is guaranteed that there are no self-loops or multiple-edges.\n\nThe next line contains $k$ integers $a_1,a_2,\\ldots, a_k$ — the command sequence.\n\nThen $q$ lines follow, each containing two integers $l$ and $r$ — the interval in the query.\n\n", "outputFormat": "Print $q$ lines, each line containing a single integer — the answer to the query.", "hint": "**Sample 1 Explanation**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2a4qed7w.png)\n\n- In the query $l=1$, $r=2$:\n\t- For the command $a_1=2$, $2$ comes to the stage by $2\\to 1$;\n   - For the command $a_2=4$, $4$ comes to the stage by $4\\to 2\\to 1$.\n   \n   Troupes $3,5$ are left, so output $2$.\n   \n- In the query $l=2$, $r=3$:\n\t- For the command $a_2=4$, there does not exist a valid path, so this command is inoperative.\n   - For the command $a_3=4$, there does not exist a valid path, so this command is inoperative.\n   \n   Troupes $2,3,4,5$ are left, so output $4$.\n\n**Sample 2**\n\nSee `show/show2.in` and `show/show2.ans` in the attachments.\n\nThis sample satisfies the constraints of test $1,2$.\n\n**Sample 3**\n\nSee `show/show3.in` and `show/show3.ans` in the attachments.\n\nThis sample satisfies the constraints of test $5\\sim 8$.\n\n**Sample 4**\n\nSee `show/show4.in` and `show/show4.ans` in the attachments.\n\nThis sample satisfies the constraints of test $9\\sim 11$.\n\n**Sample 5**\n\nSee `show/show5.in` and `show/show5.ans` in the attachments.\n\nThis sample satisfies the constraints of test $12,13$.\n\n**Sample 6**\n\nSee `show/show6.in` and `show/show6.ans` in the attachments.\n\nThis sample satisfies the constraints of test $18,19$.\n\n***\n\n**Constraints**\n\nFor all the tests, it is guaranteed that:\n\n- $1\\leq n,k,q\\leq2\\times10^5$;\n- $1\\leq m\\leq4\\times10^5$;\n- $1\\leq v<u\\leq n$, and all $(u,v)$-s are distinct;\n- For each $1\\le i\\le k$, $2\\leq a_i\\leq n$;\n- For each query, $1\\leq l\\leq r\\leq k$;\n- The input forms a DAG, and each vertex has at least one path to vertex $1$.\n\n| Test Id | $n,k,q\\leq$ | $m\\leq$ | Special Properties |\n|:--:|:--:|:--:|:--:|\n| $1,2$ | $300$ | $600$ | - |\n| $3,4$ | $2\\,000$ | $4\\,000$ | A |\n| $5\\sim 8$ | $2\\,000$ | $4\\,000$ | - |\n| $9\\sim 11$ | $2\\times10^5$ | $4\\times10^5$ | A |\n| $12,13$ | $2\\times10^5$ | $4\\times10^5$ | BC |\n| $14,15$ | $2\\times10^5$ | $4\\times10^5$ | C |\n| $16,17$ | $2\\times10^5$ | $4\\times10^5$ | BD |\n| $18,19$ | $2\\times10^5$ | $4\\times10^5$ | D |\n| $20\\sim 22$ | $2\\times10^5$ | $4\\times10^5$ | B |\n| $23\\sim 25$ | $2\\times10^5$ | $4\\times10^5$ | - |\n\n- Property A: The graph is degenerated into an inward-directed tree, i.e. each vertex except vertex $1$ has out-degree $1$;\n- Property B: For each query, $r=k$;\n- Property C: For each $1\\leq i< j\\leq k$, $a_i\\neq a_j$;\n- Property D: The in-degree and out-degree of each vertex does not exceed $30$, respectively.", "locale": "en"}, "zh-CN": {"title": "「KDOI-10」超级演出", "background": "**本场比赛所有题目从标准输入读入数据，输出到标准输出。**", "description": "巡准备了一场超级演出。舞台和候场室可以看作一个包含 $n$ 个点 $m$ 条边的有向图，并且这个图当中没有环，也就是说，这是一张有向无环图（DAG）。\n\n舞台为 $1$ 号节点，**保证所有节点均有到达节点 $\\bm 1$ 的路径**。其余的节点均为候场室，每个候场室恰有一个剧团进行等待。\n\n巡可以对一个候场室 $u$ 发布出场命令：\n\n- 如果这个候场室的剧团还没有出场，并且存在一条 $u\\to 1$ 的路径上没有其余候场的剧团。那么这个剧团就会沿着这条路径到达舞台进行演出，随后退场。注意：**一个剧团退场后不会重新回到候场室。**\n- 否则，这个命令被认为是无效的。\n\n巡有一个命令序列 $a_1,a_2,\\dots,a_k$ 和 $q$ 次询问，每次给出一个区间 $[l,r]$。巡想要知道如果依次对候场室 $a_l,a_{l+1},\\dots,a_r$ 发布出场命令后，候场室还会剩下多少剧团等待演出。\n\n注意：每次询问相互独立，也就是说，每次询问之前，每个候场室都恰有一个剧团进行等待。\n", "inputFormat": "从标准输入读入数据。\n\n输入的第一行包含一个正整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行包含四个正整数 $n,m,k,q$，表示图的点数，边数，序列长度，和询问次数。\n\n接下来 $m$ 行，每行两个正整数 $u,v$，表示一条从 $u$ 到 $v$ 的有向边。保证无自环，无重边。\n\n接下来的一行，$k$ 个正整数 $a_1,a_2,\\dots,a_k$。\n\n接下来 $q$ 行，每行两个正整数 $l,r$，表示一次询问的区间。", "outputFormat": "输出到标准输出。\n\n$q$ 行，每行一个非负整数，表示一次询问的答案。", "hint": "**【样例 1 解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2a4qed7w.png)\n\n如图：\n\n- 当询问 $l=1,r=2$ 时：\n\t- 发布出场命令 $a_1=2$。$2$ 沿着 $2\\to 1$ 出场。\n   - 发布出场命令 $a_2=4$。$4$ 沿着 $4\\to 2\\to 1$ 出场。\n   \n   此时余下 $3,5$ 两个剧团，输出 $2$。\n   \n- 当询问 $l=2,r=3$ 时：\n\t- 发布出场命令 $a_2=4$。找不到 $4\\to 1$ 的且路上没有别的剧团的路线，该指令被认为无效。\n   - 发布出场命令 $a_3=4$。找不到 $4\\to 1$ 的且路上没有别的剧团的路线，该指令被认为无效。\n   \n   此时余下 $2,3,4,5$ 四个剧团，输出 $4$。\n  \n**【样例 2】**\n\n见选手目录下的 `show/show2.in` 与 `show/show2.ans`。\n\n这个样例满足测试点 $1,2$ 的限制条件。\n\n**【样例 3】**\n\n见选手目录下的 `show/show3.in` 与 `show/show3.ans`。\n\n这个样例满足测试点 $5\\sim 8$ 的限制条件。\n\n**【样例 4】**\n\n见选手目录下的 `show/show4.in` 与 `show/show4.ans`。\n\n这个样例满足测试点 $9\\sim 11$ 的限制条件。\n\n**【样例 5】**\n\n见选手目录下的 `show/show5.in` 与 `show/show5.ans`。\n\n这个样例满足测试点 $12,13$ 的限制条件。\n\n\n**【样例 6】**\n\n见选手目录下的 `show/show6.in` 与 `show/show6.ans`。\n\n这个样例满足测试点 $18,19$ 的限制条件。\n\n***\n\n**【数据范围】**\n\n对于全部的测试数据，保证：\n\n- $1\\leq n,k,q\\leq2\\times10^5$；\n- $1\\leq m\\leq4\\times10^5$；\n- $1\\leq v<u\\leq n$，且不存在两组相同的 $(u,v)$；\n- 对于任意 $1\\le i\\le k$，$2\\leq a_i\\leq n$；\n- 对于每组询问，$1\\leq l\\leq r\\leq k$；\n- 输入构成一张有向无环图，且所有节点均存在到达节点 $1$ 的路径。\n\n| 测试点 | $n,k,q\\leq$ | $m\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|\n| $1,2$ | $300$ | $600$ | 无 |\n| $3,4$ | $2\\,000$ | $4\\,000$ | A |\n| $5\\sim 8$ | $2\\,000$ | $4\\,000$ | 无 |\n| $9\\sim 11$ | $2\\times10^5$ | $4\\times10^5$ | A |\n| $12,13$ | $2\\times10^5$ | $4\\times10^5$ | BC |\n| $14,15$ | $2\\times10^5$ | $4\\times10^5$ | C |\n| $16,17$ | $2\\times10^5$ | $4\\times10^5$ | BD |\n| $18,19$ | $2\\times10^5$ | $4\\times10^5$ | D |\n| $20\\sim 22$ | $2\\times10^5$ | $4\\times10^5$ | B |\n| $23\\sim 25$ | $2\\times10^5$ | $4\\times10^5$ | 无 |\n\n- 特殊性质 A：图退化为一棵内向树，也就是说，除节点 $1$ 外，每个点恰有一条出边，节点 $1$ 没有出边；\n- 特殊性质 B：保证对于每组询问，$r=k$；\n- 特殊性质 C：保证对于任意 $1\\leq i< j\\leq k$，$a_i\\neq a_j$；\n- 特殊性质 D：保证每个点的入度和出度均不超过 $30$。", "locale": "zh-CN"}}}
{"pid": "P11192", "type": "P", "difficulty": 7, "samples": [["4", "6\n0 1 2 4 8 15"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2021", "提交答案", "Special Judge", "O2优化", "群论", "线性代数", "位运算", "构造", "COTS（克罗地亚）"], "title": "[COTS 2021] 菜 Jelo", "background": "译自 [Izborne Pripreme 2021 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2021/) D1T1。$\\texttt{1s,0.5G}$。\n\n由于本题特殊的 SPJ，将本题的 TL 和 ML 分别改为 $\\texttt{10s,2G}$。但是对于选手程序，本题的时空限制和原题相同。\n\n如果使用压缩包上传答案：将文件分别命名为 $\\texttt{jelo-1.out}\\sim \\texttt{jelo-5.out}$。", "description": "给定正偶数 $N$。构造一个最大的集合 $S\\subseteq \\{0,1,\\cdots,2^{N}-1\\}$，使得 $\\left|\\bigcup_{i,j\\in S,i\\lt j} \\{i\\oplus j\\}\\right|={|S|\\choose 2}$ 。换言之，在 $S$ 中任意选定 $(a,b),(c,d)$（$a,b,c,d\\in S$，$a\\lt b$，$c\\lt d$，$(a,b)\\neq (c,d)$），都有 $a\\oplus b\\neq c\\oplus d$ 成立。\n\n其中 $\\oplus$ 表示按位异或运算。", "inputFormat": "一行一个正整数 $N$。", "outputFormat": "第一行一个整数 $|S|$。\n\n接下来 $|S|$ 个数描述 $S$。", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 30$。\n\n本题共有 $5$ 个测试点，每个测试点有三个评分参数 $t_1,t_2,t_3$，记 $t=|S|$，则得分计算方式为：\n\n$$\\mathrm{score}(t)=\n\\begin{cases}\n2.4\\cdot \\frac{t}{t_1} & t\\in [0,t_1) \\\\\n2.4+3.6\\cdot \\frac{t-t_1}{t_2-t_1} & t\\in [t_1,t_2) \\\\\n6+12\\cdot \\frac{t-t_2}{t_3-t_2} & t\\in [t_2,t_3) \\\\\n20 & t\\in [t_3,2^N] \\\\\n\\end{cases}$$\n\n| 测试点编号 | $N=$ | $t_1=$   | $t_2=$   | $t_3=$    | 得分 |  \n| :--: | :--: | :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 18 $    | $ 267 $   | $ 283 $   | $ 512 $    | $ 20 $   |  \n| $ 2 $    | $ 20 $    | $ 444 $   | $ 462 $   | $ 1024 $   | $ 20 $   |  \n| $ 3 $    | $ 26 $    | $ 2019 $  | $ 2040 $  | $ 8192 $   | $ 20 $   |  \n| $ 4 $    | $ 28 $    | $ 3295 $  | $ 3327 $  | $ 16384 $  | $ 20 $   |  \n| $ 5 $    | $ 30 $    | $ 5377 $  | $ 5430 $  | $ 32768 $  | $ 20 $   |\n\n【提示】请注意代码长度限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2021] 菜 Jelo", "background": "译自 [Izborne Pripreme 2021 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2021/) D1T1。$\\texttt{1s,0.5G}$。\n\n由于本题特殊的 SPJ，将本题的 TL 和 ML 分别改为 $\\texttt{10s,2G}$。但是对于选手程序，本题的时空限制和原题相同。\n\n如果使用压缩包上传答案：将文件分别命名为 $\\texttt{jelo-1.out}\\sim \\texttt{jelo-5.out}$。", "description": "给定正偶数 $N$。构造一个最大的集合 $S\\subseteq \\{0,1,\\cdots,2^{N}-1\\}$，使得 $\\left|\\bigcup_{i,j\\in S,i\\lt j} \\{i\\oplus j\\}\\right|={|S|\\choose 2}$ 。换言之，在 $S$ 中任意选定 $(a,b),(c,d)$（$a,b,c,d\\in S$，$a\\lt b$，$c\\lt d$，$(a,b)\\neq (c,d)$），都有 $a\\oplus b\\neq c\\oplus d$ 成立。\n\n其中 $\\oplus$ 表示按位异或运算。", "inputFormat": "一行一个正整数 $N$。", "outputFormat": "第一行一个整数 $|S|$。\n\n接下来 $|S|$ 个数描述 $S$。", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 30$。\n\n本题共有 $5$ 个测试点，每个测试点有三个评分参数 $t_1,t_2,t_3$，记 $t=|S|$，则得分计算方式为：\n\n$$\\mathrm{score}(t)=\n\\begin{cases}\n2.4\\cdot \\frac{t}{t_1} & t\\in [0,t_1) \\\\\n2.4+3.6\\cdot \\frac{t-t_1}{t_2-t_1} & t\\in [t_1,t_2) \\\\\n6+12\\cdot \\frac{t-t_2}{t_3-t_2} & t\\in [t_2,t_3) \\\\\n20 & t\\in [t_3,2^N] \\\\\n\\end{cases}$$\n\n| 测试点编号 | $N=$ | $t_1=$   | $t_2=$   | $t_3=$    | 得分 |  \n| :--: | :--: | :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 18 $    | $ 267 $   | $ 283 $   | $ 512 $    | $ 20 $   |  \n| $ 2 $    | $ 20 $    | $ 444 $   | $ 462 $   | $ 1024 $   | $ 20 $   |  \n| $ 3 $    | $ 26 $    | $ 2019 $  | $ 2040 $  | $ 8192 $   | $ 20 $   |  \n| $ 4 $    | $ 28 $    | $ 3295 $  | $ 3327 $  | $ 16384 $  | $ 20 $   |  \n| $ 5 $    | $ 30 $    | $ 5377 $  | $ 5430 $  | $ 32768 $  | $ 20 $   |\n\n【提示】请注意代码长度限制。", "locale": "zh-CN"}}}
{"pid": "P11193", "type": "P", "difficulty": 5, "samples": [["5 125\n\n1\n\n1\n\n0\n\n0", "\n? 1 2 3\n\n? 0 4 1\n\n? 2 5 4\n\n? 0 1 5\n\n! 0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "交互题", "Special Judge", "O2优化", "COTS（克罗地亚）"], "title": "[COTS 2021] 虫 Kukac", "background": "\n译自 [Izborne Pripreme 2021 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2021/) D1T2。$\\texttt{3s,0.5G}$。\n\n众所周知，昆虫只对顺逆时针方向有感觉。\n\n如果怀疑 SPJ 有误，请联系搬题人。[SPJ 代码](https://www.luogu.com.cn/paste/94gufjh7)。", "description": "\n**这是一道交互题。**\n\n二维平面上有一个 $N$ 个点的多边形 $P$。注意 $P$ **不一定**是凸的（它可以是凹包）。我们将多边形上的点**依次**编号为 $1\\sim N$。\n\n此外，还有一个额外的点 $0$。试通过交互来确定它是否在 $P$ 内部。\n\n**保证多边形的线段不交。保证这 $(N+1)$ 个点两两不同。保证无三点共线。**\n\n定义：$A,B,C$ **逆时针排列**当且仅当从 $A$ 看向 $B$ 时，$C$ 在直线 $AB$ 左侧。如左图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g40wcp0e.png)\n\n【实现细节】\n\n交互开始前，需要读入一行两个整数 $N,Q$，表示多边形点数，和允许的最大询问数。\n\n接下来，你的程序通过标准输入输出流与交互库交互。以下是允许的询问：\n\n- $\\texttt{? a b c}$：询问点 $a,b,c$ 是否逆时针排列。必须保证 $a,b,c$ 两两不同，且 $0\\le a,b,c\\le N$。\n\n    如果 $a,b,c$ 逆时针排列，回答为 $1$；否则回答为 $0$。\n\n确定答案后，按照以下格式回答：\n\n- $\\texttt{! x}$：如果 $x=1$，则代表 $0$ 号点在多边形内部；$x=0$ 代表 $0$ 号点不在多边形内部。\n\n每次输出后，别忘了刷新缓冲区。如：`std::cout.flush()`。\n", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "\n#### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4en0fhqq.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $3\\le N\\le 500$。\n\n再次提醒，**多边形不一定是凸的**。保证多边形的线段不交。保证这 $(N+1)$ 个点两两不同。保证无三点共线。\n\n\n| 子任务编号 | $N\\le $ | $Q=$   |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 50 $    | $ N^3 $   | 有  | $ 5 $   |  \n| $ 2 $    | $ 50 $    | $ N^3 $   | 无 | $ 25 $   |  \n| $ 3 $    | $ 500 $    | $ N^2 $  | 无  | $ 15 $   |  \n| $ 4 $    | $ 500 $    | $ 4N $  | 无 | $ 25 $   |  \n| $ 5 $    | $ 500 $    | $ 2N $  | 无   | $ 30 $   |\n\n特殊性质：$P$ 是凸的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2021] 虫 Kukac", "background": "\n译自 [Izborne Pripreme 2021 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2021/) D1T2。$\\texttt{3s,0.5G}$。\n\n众所周知，昆虫只对顺逆时针方向有感觉。\n\n如果怀疑 SPJ 有误，请联系搬题人。[SPJ 代码](https://www.luogu.com.cn/paste/94gufjh7)。", "description": "\n**这是一道交互题。**\n\n二维平面上有一个 $N$ 个点的多边形 $P$。注意 $P$ **不一定**是凸的（它可以是凹包）。我们将多边形上的点**依次**编号为 $1\\sim N$。\n\n此外，还有一个额外的点 $0$。试通过交互来确定它是否在 $P$ 内部。\n\n**保证多边形的线段不交。保证这 $(N+1)$ 个点两两不同。保证无三点共线。**\n\n定义：$A,B,C$ **逆时针排列**当且仅当从 $A$ 看向 $B$ 时，$C$ 在直线 $AB$ 左侧。如左图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g40wcp0e.png)\n\n【实现细节】\n\n交互开始前，需要读入一行两个整数 $N,Q$，表示多边形点数，和允许的最大询问数。\n\n接下来，你的程序通过标准输入输出流与交互库交互。以下是允许的询问：\n\n- $\\texttt{? a b c}$：询问点 $a,b,c$ 是否逆时针排列。必须保证 $a,b,c$ 两两不同，且 $0\\le a,b,c\\le N$。\n\n    如果 $a,b,c$ 逆时针排列，回答为 $1$；否则回答为 $0$。\n\n确定答案后，按照以下格式回答：\n\n- $\\texttt{! x}$：如果 $x=1$，则代表 $0$ 号点在多边形内部；$x=0$ 代表 $0$ 号点不在多边形内部。\n\n每次输出后，别忘了刷新缓冲区。如：`std::cout.flush()`。\n", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "\n#### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4en0fhqq.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $3\\le N\\le 500$。\n\n再次提醒，**多边形不一定是凸的**。保证多边形的线段不交。保证这 $(N+1)$ 个点两两不同。保证无三点共线。\n\n\n| 子任务编号 | $N\\le $ | $Q=$   |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 50 $    | $ N^3 $   | 有  | $ 5 $   |  \n| $ 2 $    | $ 50 $    | $ N^3 $   | 无 | $ 25 $   |  \n| $ 3 $    | $ 500 $    | $ N^2 $  | 无  | $ 15 $   |  \n| $ 4 $    | $ 500 $    | $ 4N $  | 无 | $ 25 $   |  \n| $ 5 $    | $ 500 $    | $ 2N $  | 无   | $ 30 $   |\n\n特殊性质：$P$ 是凸的。", "locale": "zh-CN"}}}
{"pid": "P11194", "type": "P", "difficulty": 6, "samples": [["3 2\n1 1 2\n1 2\n2 3", "DA\n2 3"], ["4 3\n1 2 2 3\n1 2\n2 3\n3 4", "NE"], ["8 3\n1 2 1 2 2 1 3 3\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7\n7 8", "DA\n1 2 8"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "O2优化", "构造", "COTS（克罗地亚）"], "title": "[COTS 2021] 县 Županije", "background": "\n译自 [Izborne Pripreme 2021 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2021/) D1T3。$\\texttt{2s,0.5G}$。\n\n2025/07/06：加入两组 Hack 数据并进行了重测（贡献者 @[konyakest](https://www.luogu.com.cn/user/482660)），Hack 数据位于 Subtask 0。", "description": "\n\n给定 $N$ 个点的树。已经将这 $N$ 个点划分成了 $K$ 个县。\n\n现在你要为每个县确定一个**县城**。设第 $i$ 个点属于的县为 $B_i$，每个县的县城为 $A_1,A_2,\\cdots,A_K$（必须两两不同），则下列关系式必须满足：\n\n- $\\forall 1\\le i\\le N$，$\\displaystyle \\operatorname{dist}(i,A_{B_i})\\lt \\min_{j=1,j\\neq B_i}^K \\operatorname{dist}(i,A_j)$。\n\n其中，$\\mathrm{dist}(a,b)$ 定义为 $a,b$ 之间简单路径的边数。\n\n也就是说，每个县中的点到它所属的县城距离必须**严格小于**到其它县城的距离。\n\n判断这是否是可以达成的。如果可以的话，需要给出一组符合条件的方案。", "inputFormat": "\n第一行，两个正整数 $N,K$。\n\n第二行，$N$ 个整数 $B_1,B_2,\\cdots,B_N$。\n\n接下来 $(N-1)$ 行，每行两个正整数 $u,v$，描述一条树边 $(u,v)$。", "outputFormat": "\n如果可行的话，第一行输出 `DA`（克罗地亚语「是」）；第二行 $K$ 个整数，第 $i$ 个整数表示第 $i$ 个县的县城。\n\n否则输出 `NE`（克罗地亚语「否」）。", "hint": "\n\n#### 样例解释\n\n下图是样例 $3$ 的解释。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l3nlu402.png)\n\n#### 数据范围\n\n【评分方式】如果你回答对了第一问，可以获得 $40\\%$ 的分数。但是需要保证输出格式正确，即，如果只打算回答第一问，也要在第二行输出 $K$ 个不同的 $\\in [1,N]$ 的整数。\n\n对于 $100\\%$ 的数据，保证 $1\\le B_i\\le K\\le N\\le 2\\times 10^5$，给出的是一棵树。\n\n| 子任务编号 | $N\\le $ |   特殊性质   | 得分 |  \n| :--: | :--: | :--: |  :--: |  \n| $ 1 $    | $ 20 $    |  无  | $ 10 $   |  \n| $ 2 $    | $ 2\\, 000 $    |  无 | $ 25 $   |  \n| $ 3 $    | $ 2\\times 10^5 $    | 有  | $ 30 $   |  \n| $ 4 $    | $ 2\\times 10^5 $    | 无 | $ 35 $   |  \n\n特殊性质：每个点的度数为 $1$ 或 $3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2021] 县 Županije", "background": "\n译自 [Izborne Pripreme 2021 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2021/) D1T3。$\\texttt{2s,0.5G}$。\n\n2025/07/06：加入两组 Hack 数据并进行了重测（贡献者 @[konyakest](https://www.luogu.com.cn/user/482660)），Hack 数据位于 Subtask 0。", "description": "\n\n给定 $N$ 个点的树。已经将这 $N$ 个点划分成了 $K$ 个县。\n\n现在你要为每个县确定一个**县城**。设第 $i$ 个点属于的县为 $B_i$，每个县的县城为 $A_1,A_2,\\cdots,A_K$（必须两两不同），则下列关系式必须满足：\n\n- $\\forall 1\\le i\\le N$，$\\displaystyle \\operatorname{dist}(i,A_{B_i})\\lt \\min_{j=1,j\\neq B_i}^K \\operatorname{dist}(i,A_j)$。\n\n其中，$\\mathrm{dist}(a,b)$ 定义为 $a,b$ 之间简单路径的边数。\n\n也就是说，每个县中的点到它所属的县城距离必须**严格小于**到其它县城的距离。\n\n判断这是否是可以达成的。如果可以的话，需要给出一组符合条件的方案。", "inputFormat": "\n第一行，两个正整数 $N,K$。\n\n第二行，$N$ 个整数 $B_1,B_2,\\cdots,B_N$。\n\n接下来 $(N-1)$ 行，每行两个正整数 $u,v$，描述一条树边 $(u,v)$。", "outputFormat": "\n如果可行的话，第一行输出 `DA`（克罗地亚语「是」）；第二行 $K$ 个整数，第 $i$ 个整数表示第 $i$ 个县的县城。\n\n否则输出 `NE`（克罗地亚语「否」）。", "hint": "\n\n#### 样例解释\n\n下图是样例 $3$ 的解释。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l3nlu402.png)\n\n#### 数据范围\n\n【评分方式】如果你回答对了第一问，可以获得 $40\\%$ 的分数。但是需要保证输出格式正确，即，如果只打算回答第一问，也要在第二行输出 $K$ 个不同的 $\\in [1,N]$ 的整数。\n\n对于 $100\\%$ 的数据，保证 $1\\le B_i\\le K\\le N\\le 2\\times 10^5$，给出的是一棵树。\n\n| 子任务编号 | $N\\le $ |   特殊性质   | 得分 |  \n| :--: | :--: | :--: |  :--: |  \n| $ 1 $    | $ 20 $    |  无  | $ 10 $   |  \n| $ 2 $    | $ 2\\, 000 $    |  无 | $ 25 $   |  \n| $ 3 $    | $ 2\\times 10^5 $    | 有  | $ 30 $   |  \n| $ 4 $    | $ 2\\times 10^5 $    | 无 | $ 35 $   |  \n\n特殊性质：每个点的度数为 $1$ 或 $3$。", "locale": "zh-CN"}}}
{"pid": "P11195", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3\n1 2\n1 3\n3\n1\n2\n3", "0\n1\n0"], ["7\n45 13 19 3 81 27 77\n1 2\n1 3\n1 4\n3 5\n3 6\n4 7\n3\n5\n6\n7", "0\n1\n1"], ["8\n23 4 9 7 11 4 1 18\n2 1\n3 2\n4 2\n5 2\n6 3\n7 4\n8 1\n3\n2\n3\n7", "1\n2\n3"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2021", "O2优化", "COTS（克罗地亚）"], "title": "[COTS 2021] 疫苗接种 Cijepise", "background": "译自 [Izborne Pripreme 2021 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2021/) D2T1。$\\texttt{5s,1G}$。", "description": "\n给定以 $1$ 为根的有 $N$ 个节点的有根树，记 $i$ 号点的点权为 $a_i$。\n\n定义一次操作为：\n\n- 初始化 $u$ 为树根。\n\t1. 设 $u$ 儿子中点权最大的点为 $v$（若有多个，则**等概率随机选取一个**）。令 $a_u\\gets a_v$，$a_v\\gets 0$。\n\t2. 若 $v$ 为叶子，则删去 $v$，终止这个过程。否则令 $u\\gets v$，回到 1。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u6c8gliu.png)\n\n\n定义 $f(v)$ 为：**在最坏情况下**，欲让 $a_v$ 尽可能快地（也就是使用尽量少的操作次数）出现在树根上，至少需要更改多少个点的点权（可以不更改）。\n\n换句话说，我们定义在最坏情况下，$v$ 需要操作 $k$ 次到达树根。显然树的形态固定时，不同的点权会使得 $k$ 取不同的值，且 $k$ 存在一个下界。你需要修改若干个点的点权，使得 $k$ 取到下界，并最小化修改的数量。\n\n点权可以被改为 $[0,2\\times 10^9]$ 内的任意整数。\n\n\n$Q$ 次询问给定 $v$，回答 $f(v)$。", "inputFormat": "\n第一行，一个正整数 $N$。\n\n第二行，$N$ 个正整数 $a_i$。\n\n接下来 $(N-1)$ 行，每行两个正整数 $u,v$，描述一条树边 $(u,v)$。\n\n接下来一行，一个正整数 $Q$。\n\n接下来 $Q$ 行，每行一个正整数 $v$，表示询问 $f(v)$。\n", "outputFormat": "\n输出 $Q$ 行，表示每个询问的答案。", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le Q\\le N\\le 1\\times 10^5$，$1\\le a_i\\le 10^9$，$1\\le v\\le N$，给出的是一棵树。\n\n| 子任务编号 | $N\\le $ |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 12 $    |  无  | $ 10 $   |  \n| $ 2 $    | $ 300 $   |  无 | $ 11 $   |  \n| $ 3 $    | $ 3\\,000 $ | 有  | $ 12 $   |  \n| $ 4 $    | $ 3\\,000 $  |  无 | $ 13 $   |  \n| $ 5 $    | $ 100\\,000 $  |   有 | $ 20 $   |  \n| $ 6 $    | $ 100\\,000 $  |   无 | $ 34 $   |  \n\n特殊性质：$Q\\le 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2021] 疫苗接种 Cijepise", "background": "译自 [Izborne Pripreme 2021 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2021/) D2T1。$\\texttt{5s,1G}$。", "description": "\n给定以 $1$ 为根的有 $N$ 个节点的有根树，记 $i$ 号点的点权为 $a_i$。\n\n定义一次操作为：\n\n- 初始化 $u$ 为树根。\n\t1. 设 $u$ 儿子中点权最大的点为 $v$（若有多个，则**等概率随机选取一个**）。令 $a_u\\gets a_v$，$a_v\\gets 0$。\n\t2. 若 $v$ 为叶子，则删去 $v$，终止这个过程。否则令 $u\\gets v$，回到 1。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u6c8gliu.png)\n\n\n定义 $f(v)$ 为：**在最坏情况下**，欲让 $a_v$ 尽可能快地（也就是使用尽量少的操作次数）出现在树根上，至少需要更改多少个点的点权（可以不更改）。\n\n换句话说，我们定义在最坏情况下，$v$ 需要操作 $k$ 次到达树根。显然树的形态固定时，不同的点权会使得 $k$ 取不同的值，且 $k$ 存在一个下界。你需要修改若干个点的点权，使得 $k$ 取到下界，并最小化修改的数量。\n\n点权可以被改为 $[0,2\\times 10^9]$ 内的任意整数。\n\n\n$Q$ 次询问给定 $v$，回答 $f(v)$。", "inputFormat": "\n第一行，一个正整数 $N$。\n\n第二行，$N$ 个正整数 $a_i$。\n\n接下来 $(N-1)$ 行，每行两个正整数 $u,v$，描述一条树边 $(u,v)$。\n\n接下来一行，一个正整数 $Q$。\n\n接下来 $Q$ 行，每行一个正整数 $v$，表示询问 $f(v)$。\n", "outputFormat": "\n输出 $Q$ 行，表示每个询问的答案。", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le Q\\le N\\le 1\\times 10^5$，$1\\le a_i\\le 10^9$，$1\\le v\\le N$，给出的是一棵树。\n\n| 子任务编号 | $N\\le $ |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 12 $    |  无  | $ 10 $   |  \n| $ 2 $    | $ 300 $   |  无 | $ 11 $   |  \n| $ 3 $    | $ 3\\,000 $ | 有  | $ 12 $   |  \n| $ 4 $    | $ 3\\,000 $  |  无 | $ 13 $   |  \n| $ 5 $    | $ 100\\,000 $  |   有 | $ 20 $   |  \n| $ 6 $    | $ 100\\,000 $  |   无 | $ 34 $   |  \n\n特殊性质：$Q\\le 1$。", "locale": "zh-CN"}}}
{"pid": "P11197", "type": "P", "difficulty": 6, "samples": [["3\n2 3 1\n1 2 3\n1 2 3\n2 3 1", "1"], ["4\n3 1 2 4\n4 3 2 1\n1 2 3 4\n1 2 4 3", "0"], ["5\n1 3 2 4 5\n4 3 5 2 1\n4 3 1 2 5\n1 2 4 3 5", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["树状数组", "2021", "cdq 分治", "O2优化", "COTS（克罗地亚）"], "title": "[COTS 2021] 赛狗游戏 Tiket", "background": "Rebirth.\n\n译自 [Izborne Pripreme 2021 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2021/) D2T3。$\\texttt{1s,0.5G}$。\n", "description": "有三个人在观看赛狗游戏。\n\n三个人都猜测了狗冲过终点的顺序，即 $P_i$ 表示第 $i$ 只冲过终点的狗的编号。我们假设没有平局。\n\n有 $N$ 条狗，因此 $P_i$ 构成一个 $1\\sim N$ 的排列。不妨记第 $j$ 个人猜测的排列为 $P(j)$。\n\n此外，最终狗冲过终点的顺序构成排列 $T$。\n\n计算满足以下条件的数对 $(a,b)$ 的数量：\n\n- 在 $T$ 中，$a$ 在 $b$ 前面；\n- $\\forall 1\\le j\\le 3$，要么 $a$ 在所有的 $P(j)$ 中都在 $b$ 前面，要么 $b$ 在所有的 $P(j)$ 中都在 $a$ 前面。\n", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，$N$ 个正整数描述 $T$。\n\n接下来三行，第 $j$ 行 $N$ 个正整数，描述 $P(j)$。", "outputFormat": "输出一行一个整数，即答案。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：只有 $(2,3)$ 满足条件。\n\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $2\\le N\\le 5\\times 10^5$；\n- $\\forall 1\\le j\\le 3$，$P(j)$ 构成一个 $1\\sim N$ 的排列。\n- $T$ 构成一个 $1\\sim N$ 的排列。\n\n\n| 子任务编号 | $N\\le $ |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 5\\, 000 $    |  无  | $ 7 $   |  \n| $ 2 $    | $ 5\\times 10^5 $   |  有 | $ 8 $   |  \n| $ 3 $    | $ 5\\times 10^4$ | 无  | $ 29 $   |  \n| $ 4 $    | $ 5\\times 10^5 $  |  无 | $ 56 $   |  \n\n特殊性质：$P(1)=P(2)$。也就是说前两个人猜的排列是一样的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2021] 赛狗游戏 Tiket", "background": "Rebirth.\n\n译自 [Izborne Pripreme 2021 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2021/) D2T3。$\\texttt{1s,0.5G}$。\n", "description": "有三个人在观看赛狗游戏。\n\n三个人都猜测了狗冲过终点的顺序，即 $P_i$ 表示第 $i$ 只冲过终点的狗的编号。我们假设没有平局。\n\n有 $N$ 条狗，因此 $P_i$ 构成一个 $1\\sim N$ 的排列。不妨记第 $j$ 个人猜测的排列为 $P(j)$。\n\n此外，最终狗冲过终点的顺序构成排列 $T$。\n\n计算满足以下条件的数对 $(a,b)$ 的数量：\n\n- 在 $T$ 中，$a$ 在 $b$ 前面；\n- $\\forall 1\\le j\\le 3$，要么 $a$ 在所有的 $P(j)$ 中都在 $b$ 前面，要么 $b$ 在所有的 $P(j)$ 中都在 $a$ 前面。\n", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，$N$ 个正整数描述 $T$。\n\n接下来三行，第 $j$ 行 $N$ 个正整数，描述 $P(j)$。", "outputFormat": "输出一行一个整数，即答案。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：只有 $(2,3)$ 满足条件。\n\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $2\\le N\\le 5\\times 10^5$；\n- $\\forall 1\\le j\\le 3$，$P(j)$ 构成一个 $1\\sim N$ 的排列。\n- $T$ 构成一个 $1\\sim N$ 的排列。\n\n\n| 子任务编号 | $N\\le $ |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 5\\, 000 $    |  无  | $ 7 $   |  \n| $ 2 $    | $ 5\\times 10^5 $   |  有 | $ 8 $   |  \n| $ 3 $    | $ 5\\times 10^4$ | 无  | $ 29 $   |  \n| $ 4 $    | $ 5\\times 10^5 $  |  无 | $ 56 $   |  \n\n特殊性质：$P(1)=P(2)$。也就是说前两个人猜的排列是一样的。", "locale": "zh-CN"}}}
{"pid": "P11198", "type": "P", "difficulty": 1, "samples": [["5\noxooo", "Yes"], ["5\nxooxo", "No"], ["1\no", "No"], ["10\noooooooooo", "Yes"], ["20\nxooxxoooxoxooxooxoox", "Yes"], ["20\nxooxxxooxoxooxooxoox", "No"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "2024", "O2优化", "JOI（日本）"], "title": "[JOIG 2024] 三連続 / Three Consecutive", "background": "", "description": "给定长度为 $N$ 的字符串 $S$，$S$ 中的每个字符都是 `o` 或 `x`。\n\n判断 $S$ 中是否包含**连续**的 $3$ 个 `o`。", "inputFormat": "第一行输入一个整数 $N$。\n\n第二行输入一个字符串 $S$。", "outputFormat": "输出一行一个字符串 `Yes` 或 `No`：如果是 `Yes` 表示 $S$ 中存在连续的 $3$ 个 `o`，反之亦然。", "hint": "#### 【样例解释 #1】\n\n$S$ 中第 $3\\sim 5$ 个字符是连续的 $3$ 个 `o`。\n\n该样例满足子任务 $1,2$ 的限制。\n\n#### 【样例解释 #2】\n\n$S$ 中不存在连续的 $3$ 个 `o`。\n\n该样例满足子任务 $1,2$ 的限制。\n\n#### 【样例解释 #3】\n\n$S$ 中不存在连续的 $3$ 个 `o`。\n\n该样例满足子任务 $2$ 的限制。\n\n#### 【样例解释 #4】\n\n$S$ 中第 $1\\sim 3$ 个字符是连续的 $3$ 个 `o`。\n\n注意，$3$ 个连续的 `o` 旁边可能有其他的 `o`。\n\n该样例满足子任务 $2$ 的限制。\n\n#### 【样例解释 #5】\n\n该样例满足子任务 $2$ 的限制。\n\n#### 【样例解释 #6】\n\n该样例满足子任务 $2$ 的限制。\n\n#### 【数据范围】\n\n- $1\\le N\\le 10^5$；\n- $S$ 是长度为 $N$ 且仅包含小写字符 `o` 和 `x` 的字符串。\n\n#### 【子任务】\n\n1. （$40$ 分）$N=5$；\n2. （$60$ 分）无附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIG 2024] 三連続 / Three Consecutive", "background": "", "description": "给定长度为 $N$ 的字符串 $S$，$S$ 中的每个字符都是 `o` 或 `x`。\n\n判断 $S$ 中是否包含**连续**的 $3$ 个 `o`。", "inputFormat": "第一行输入一个整数 $N$。\n\n第二行输入一个字符串 $S$。", "outputFormat": "输出一行一个字符串 `Yes` 或 `No`：如果是 `Yes` 表示 $S$ 中存在连续的 $3$ 个 `o`，反之亦然。", "hint": "#### 【样例解释 #1】\n\n$S$ 中第 $3\\sim 5$ 个字符是连续的 $3$ 个 `o`。\n\n该样例满足子任务 $1,2$ 的限制。\n\n#### 【样例解释 #2】\n\n$S$ 中不存在连续的 $3$ 个 `o`。\n\n该样例满足子任务 $1,2$ 的限制。\n\n#### 【样例解释 #3】\n\n$S$ 中不存在连续的 $3$ 个 `o`。\n\n该样例满足子任务 $2$ 的限制。\n\n#### 【样例解释 #4】\n\n$S$ 中第 $1\\sim 3$ 个字符是连续的 $3$ 个 `o`。\n\n注意，$3$ 个连续的 `o` 旁边可能有其他的 `o`。\n\n该样例满足子任务 $2$ 的限制。\n\n#### 【样例解释 #5】\n\n该样例满足子任务 $2$ 的限制。\n\n#### 【样例解释 #6】\n\n该样例满足子任务 $2$ 的限制。\n\n#### 【数据范围】\n\n- $1\\le N\\le 10^5$；\n- $S$ 是长度为 $N$ 且仅包含小写字符 `o` 和 `x` 的字符串。\n\n#### 【子任务】\n\n1. （$40$ 分）$N=5$；\n2. （$60$ 分）无附加限制。", "locale": "zh-CN"}}}
{"pid": "P11199", "type": "P", "difficulty": 1, "samples": [["1 5\n2 7", "Yes"], ["3 0\n10 10 10 11 10 10", "No"], ["6 4\n22 15 32 36 16 30 42 30 39 23 17 18", "Yes"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2024", "O2优化", "排序", "JOI（日本）"], "title": "[JOIG 2024] ダンス / Dance", "background": "", "description": "一所中学的一个班级有 $2N$ 名学生，第 $i(1\\le i\\le 2N)$ 名学生的身高是 $A_i$。\n\n在即将开始的体育课上，学生们将两两配对，形成 $N$ 组进行舞蹈。\n\n要跳出优美的舞蹈，每一对舞伴之间的身高差必须小于或等于 $D$。\n\n给定每个学生的身高，确定能否跳出优美的舞蹈。", "inputFormat": "第一行输入两个整数 $N,D$。\n\n第二行输入 $2N$ 个整数 $A_1,A_2,\\ldots,A_{2N}$。", "outputFormat": "输出一行一个字符串，如果可以跳出优美的舞蹈输出 `Yes`，否则输出 `No`。", "hint": "#### 【样例解释 #1】\n\n只有一种配对方案，满足 $|2-7|\\le 5$，符合条件。\n\n该样例满足子任务 $1,3$ 的限制。\n\n#### 【样例解释 #2】\n\n无论如何都没法进行配对，使得任意一对舞伴的身高差 $\\le 0$。\n\n该样例满足子任务 $2,3$ 的限制。\n\n#### 【样例解释 #3】\n\n考虑如下配对方案：\n\n- 身高 $39$ 的学生和身高 $42$ 的学生配对；\n- 身高 $22$ 的学生和身高 $23$ 的学生配对；\n- 身高 $16$ 的学生和身高 $17$ 的学生配对；\n- 身高 $32$ 的学生和身高 $36$ 的学生配对；\n- 身高 $15$ 的学生和身高 $18$ 的学生配对；\n- 身高 $30$ 的学生和身高 $30$ 的学生配对。\n\n符合条件。\n\n该样例满足子任务 $3$ 的限制。\n\n#### 【数据范围】\n\n- $1\\le N\\le 100$；\n- $0\\le D\\le 100$；\n- $1\\le A_i\\le 100(1\\le i\\le 2N)$。\n\n#### 【子任务】\n\n1. （$20$ 分）$N=1$；\n2. （$40$ 分）$D=0$；\n3. （$40$ 分）无附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIG 2024] ダンス / Dance", "background": "", "description": "一所中学的一个班级有 $2N$ 名学生，第 $i(1\\le i\\le 2N)$ 名学生的身高是 $A_i$。\n\n在即将开始的体育课上，学生们将两两配对，形成 $N$ 组进行舞蹈。\n\n要跳出优美的舞蹈，每一对舞伴之间的身高差必须小于或等于 $D$。\n\n给定每个学生的身高，确定能否跳出优美的舞蹈。", "inputFormat": "第一行输入两个整数 $N,D$。\n\n第二行输入 $2N$ 个整数 $A_1,A_2,\\ldots,A_{2N}$。", "outputFormat": "输出一行一个字符串，如果可以跳出优美的舞蹈输出 `Yes`，否则输出 `No`。", "hint": "#### 【样例解释 #1】\n\n只有一种配对方案，满足 $|2-7|\\le 5$，符合条件。\n\n该样例满足子任务 $1,3$ 的限制。\n\n#### 【样例解释 #2】\n\n无论如何都没法进行配对，使得任意一对舞伴的身高差 $\\le 0$。\n\n该样例满足子任务 $2,3$ 的限制。\n\n#### 【样例解释 #3】\n\n考虑如下配对方案：\n\n- 身高 $39$ 的学生和身高 $42$ 的学生配对；\n- 身高 $22$ 的学生和身高 $23$ 的学生配对；\n- 身高 $16$ 的学生和身高 $17$ 的学生配对；\n- 身高 $32$ 的学生和身高 $36$ 的学生配对；\n- 身高 $15$ 的学生和身高 $18$ 的学生配对；\n- 身高 $30$ 的学生和身高 $30$ 的学生配对。\n\n符合条件。\n\n该样例满足子任务 $3$ 的限制。\n\n#### 【数据范围】\n\n- $1\\le N\\le 100$；\n- $0\\le D\\le 100$；\n- $1\\le A_i\\le 100(1\\le i\\le 2N)$。\n\n#### 【子任务】\n\n1. （$20$ 分）$N=1$；\n2. （$40$ 分）$D=0$；\n3. （$40$ 分）无附加限制。", "locale": "zh-CN"}}}
{"pid": "P11200", "type": "P", "difficulty": 2, "samples": [["3\n2 5\n1 1\n1 2", "3\n4\n3"], ["5\n1 1\n2 4\n2 14\n3 10\n2 2", "1\n3\n4\n4\n1"], ["3\n1 1\n2 1\n1 1", "0\n0\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2024", "O2优化", "JOI（日本）"], "title": "[JOIG 2024] 座席 2 / Seats 2", "background": "", "description": "今年，JOI 国将主办 IOI（国际信息学奥林匹克竞赛）。届时将有 $N$ 名选手参赛，编号从 $1$ 到 $N$。\n\n每位选手的国籍由一个介于 $1$ 和 $10^9$ 之间的整数表示：选手 $i(1\\le i\\le N)$ 来自国家 $C_i$。保证 $N$ 个选手的国籍**不完全相同**（即存在 $i\\ne j(1\\le i,j\\le N)$ 使得 $C_i\\ne C_j$）。\n\n选手的座位排成一条直线，选手 $i(1\\le i\\le N)$ 的座位在 $X_i$ 处。选手 $i(1\\le i\\le N)$ 和选手 $j(1\\le j\\le N)$ 之间的**座位距离**为 $|X_i-X_j|$。\n\n每个选手都想知道在与其他选手交流时，与离自己最近的异国选手的座位距离。\n\n给定每个选手的国籍和座位位置，请为每个选手 $i(1\\le i\\le N)$ 求出与其来自不同国家的选手中，座位离选手 $i$ 最近的选手与 $i$ 的座位距离。", "inputFormat": "第一行输入一个整数 $N$。\n\n接下来 $N$ 行，每行输入两个整数 $C_i,X_i$。", "outputFormat": "输出 $N$ 行，第 $i$ 行输出一个整数，表示座位离选手 $i$ 最近的选手与 $i$ 的座位距离。", "hint": "#### 【样例解释 #1】\n\n- 选手 $1$ 来自国家 $2$，选手 $2, 3$ 和他 / 她来自不同国家。在这些选手中，与选手 $1$ 座位距离最小的是选手 $3$，座位距离为 $3$。因此，答案为 $3$；\n- 选手 $2$ 来自国家 $1$，选手 $1$ 是唯一和他 / 她来自不同国家的选手。选手 $2$ 和选手 $1$ 之间的座位距离为 $4$；\n- 选手 $3$ 来自国家 $1$，选手 $1$ 是唯一和他 / 她来自不同国家的选手。选手 $3$ 和选手 $1$ 之间的座位距离为 $3$。\n\n该样例满足子任务 $1,2,3$ 的限制。\n\n#### 【样例解释 #2】\n\n该样例满足子任务 $1,2,3$ 的限制。\n\n#### 【样例解释 #3】\n\n该样例满足子任务 $1,2,3$ 的限制。\n\n#### 【数据范围】\n\n- $2\\le N \\le 3\\times 10^5$；\n- $1\\le C_i\\le 10^9(1\\le i\\le N)$ 且 $C_i$ 不完全相同；\n- $1\\le X_i\\le 10^9(1\\le i\\le N)$。\n\n#### 【子任务】\n\n1. （$20$ 分）$N\\le 1000$；\n2. （$40$ 分）$C_i\\le 10(1\\le i\\le N)$；\n3. （$40$ 分）无附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIG 2024] 座席 2 / Seats 2", "background": "", "description": "今年，JOI 国将主办 IOI（国际信息学奥林匹克竞赛）。届时将有 $N$ 名选手参赛，编号从 $1$ 到 $N$。\n\n每位选手的国籍由一个介于 $1$ 和 $10^9$ 之间的整数表示：选手 $i(1\\le i\\le N)$ 来自国家 $C_i$。保证 $N$ 个选手的国籍**不完全相同**（即存在 $i\\ne j(1\\le i,j\\le N)$ 使得 $C_i\\ne C_j$）。\n\n选手的座位排成一条直线，选手 $i(1\\le i\\le N)$ 的座位在 $X_i$ 处。选手 $i(1\\le i\\le N)$ 和选手 $j(1\\le j\\le N)$ 之间的**座位距离**为 $|X_i-X_j|$。\n\n每个选手都想知道在与其他选手交流时，与离自己最近的异国选手的座位距离。\n\n给定每个选手的国籍和座位位置，请为每个选手 $i(1\\le i\\le N)$ 求出与其来自不同国家的选手中，座位离选手 $i$ 最近的选手与 $i$ 的座位距离。", "inputFormat": "第一行输入一个整数 $N$。\n\n接下来 $N$ 行，每行输入两个整数 $C_i,X_i$。", "outputFormat": "输出 $N$ 行，第 $i$ 行输出一个整数，表示座位离选手 $i$ 最近的选手与 $i$ 的座位距离。", "hint": "#### 【样例解释 #1】\n\n- 选手 $1$ 来自国家 $2$，选手 $2, 3$ 和他 / 她来自不同国家。在这些选手中，与选手 $1$ 座位距离最小的是选手 $3$，座位距离为 $3$。因此，答案为 $3$；\n- 选手 $2$ 来自国家 $1$，选手 $1$ 是唯一和他 / 她来自不同国家的选手。选手 $2$ 和选手 $1$ 之间的座位距离为 $4$；\n- 选手 $3$ 来自国家 $1$，选手 $1$ 是唯一和他 / 她来自不同国家的选手。选手 $3$ 和选手 $1$ 之间的座位距离为 $3$。\n\n该样例满足子任务 $1,2,3$ 的限制。\n\n#### 【样例解释 #2】\n\n该样例满足子任务 $1,2,3$ 的限制。\n\n#### 【样例解释 #3】\n\n该样例满足子任务 $1,2,3$ 的限制。\n\n#### 【数据范围】\n\n- $2\\le N \\le 3\\times 10^5$；\n- $1\\le C_i\\le 10^9(1\\le i\\le N)$ 且 $C_i$ 不完全相同；\n- $1\\le X_i\\le 10^9(1\\le i\\le N)$。\n\n#### 【子任务】\n\n1. （$20$ 分）$N\\le 1000$；\n2. （$40$ 分）$C_i\\le 10(1\\le i\\le N)$；\n3. （$40$ 分）无附加限制。", "locale": "zh-CN"}}}
{"pid": "P11201", "type": "P", "difficulty": 3, "samples": [["3\n97 79 7\n20 2 21", "20"], ["4\n8 97 996 9995\n1 2 3 4\n", "46"], ["1\n500000000\n500000000", "10"], ["7\n436981378 523812834 456708479 413571178 506402783 598271009 523936624\n401203104 501634329 506090236 527167431 485527116 439442403 568364549", "463"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["二分", "2024", "O2优化", "JOI（日本）"], "title": "[JOIG 2024] たくさんの数字 / Many Digits", "background": "", "description": "JOI 高中的 Aoi 决定在 $N\\times N$ 的表格中写下 $N^2$ 个非负整数。具体地，给定两个长度为 $N$ 的序列 $A,B$，她会在第 $i$ 行第 $j$ 列的格子上写下 $A_i+B_j$。\n\nAoi 想知道写出这些数需要多少个字符。也就是说，你需要求出写出的 $N^2$ 个整数在十进制下的位数的和。", "inputFormat": "第一行输入一个整数 $N$。\n\n第二行输入 $N$ 个整数 $A_1,A_2,\\ldots,A_N$。\n\n第三行输入 $N$ 个整数 $B_1,B_2,\\ldots,B_N$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 【样例解释 #1】\n\n|$+$|$\\textbf{20}$|$\\textbf{2}$|$\\textbf{21}$|\n|:-:|:-:|:-:|:-:|\n|$\\textbf{97}$|$117$|$99$|$118$|\n|$\\textbf{79}$|$99$|$81$|$100$|\n|$\\textbf{7}$|$27$|$9$|$28$|\n\n未加粗字体为 Aoi 填写的内容。\n\n例如，第 $1$ 行第 $1$ 列的方格中的整数为 $A_1 + B_1 = 97 + 20 = 117$，位数为 $3$。第 $3$ 行第 $2$ 列的方格中的整数为 $A_3 + B_2 = 7 + 2 = 9$，位数为 $1$。\n\n$9$ 个数的位数分别为 $3, 2, 3, 2, 2, 3, 2, 1, 2$，故位数之和为 $3 + 2 + 3 + 2 + 2 + 3 + 2 + 1 + 2 = 20$。\n\n该样例满足子任务 $2,3,8$ 的限制。\n\n#### 【样例解释 #2】\n\n|$+$|$\\textbf{1}$|$\\textbf{2}$|$\\textbf{3}$|$\\textbf{4}$|\n|:-:|:-:|:-:|:-:|:-:|\n|$\\textbf{8}$|$9$|$10$|$11$|$12$|\n|$\\textbf{97}$|$98$|$99$|$100$|$101$|\n|$\\textbf{996}$|$997$|$998$|$999$|$1000$|\n|$\\textbf{9995}$|$9996$|$9997$|$9998$|$9999$|\n\n未加粗字体为 Aoi 填写的内容。\n\n例如，第 $2$ 行第 $3$ 列的方格中的整数为 $A_2 + B_3 = 97 + 3 = 100$，位数为 $3$。第 $4$ 行第 $2$ 列的方格中的整数为 $A_4 + B_2 = 9995 + 2 = 9997$，位数为 $4$。\n\n可以得出答案为 $46$。\n\n该样例满足子任务 $2,6,7,8$ 的限制。\n\n#### 【样例解释 #3】\n\n方格中仅有一个整数 $10^9$，位数为 $10$，故位数之和为 $10$。\n\n该样例满足子任务 $1,2,4,5,8$ 的限制。\n\n#### 【样例解释 #4】\n\n该样例满足子任务 $2,5,8$ 的限制。\n\n#### 【数据范围】\n\n- $1\\le N\\le 1.5\\times 10^5$；\n- $1\\le A_i\\le 999,999,999(1\\le i\\le N)$；\n- $1\\le B_j\\le 999,999,999(1\\le j\\le N)$。\n\n#### 【子任务】\n\n1. （$5$ 分）$N=1$；\n2. （$11$ 分）$N\\le 2000$；\n3. （$15$ 分）$A_i\\le 2000(1\\le i\\le N)$，$B_j\\le 2000(1\\le j\\le N)$；\n4. （$8$ 分）$10^8\\le A_i\\le 5\\times 10^8(1\\le i\\le N)$，$10^8\\le B_j\\le 5\\times 10^8(1\\le j\\le N)$；\n5. （$22$ 分）$10^8\\le A_i(1\\le i\\le N)$，$10^8\\le B_j(1\\le j\\le N)$；\n6. （$12$ 分）$A_i\\le 1.5\\times 10^5(1\\le i\\le N)$，$B_j = j(1\\le j\\le N)$；\n7. （$13$ 分）$B_j=j(1\\le j\\le N)$；\n8. （$14$ 分）无附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIG 2024] たくさんの数字 / Many Digits", "background": "", "description": "JOI 高中的 Aoi 决定在 $N\\times N$ 的表格中写下 $N^2$ 个非负整数。具体地，给定两个长度为 $N$ 的序列 $A,B$，她会在第 $i$ 行第 $j$ 列的格子上写下 $A_i+B_j$。\n\nAoi 想知道写出这些数需要多少个字符。也就是说，你需要求出写出的 $N^2$ 个整数在十进制下的位数的和。", "inputFormat": "第一行输入一个整数 $N$。\n\n第二行输入 $N$ 个整数 $A_1,A_2,\\ldots,A_N$。\n\n第三行输入 $N$ 个整数 $B_1,B_2,\\ldots,B_N$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 【样例解释 #1】\n\n|$+$|$\\textbf{20}$|$\\textbf{2}$|$\\textbf{21}$|\n|:-:|:-:|:-:|:-:|\n|$\\textbf{97}$|$117$|$99$|$118$|\n|$\\textbf{79}$|$99$|$81$|$100$|\n|$\\textbf{7}$|$27$|$9$|$28$|\n\n未加粗字体为 Aoi 填写的内容。\n\n例如，第 $1$ 行第 $1$ 列的方格中的整数为 $A_1 + B_1 = 97 + 20 = 117$，位数为 $3$。第 $3$ 行第 $2$ 列的方格中的整数为 $A_3 + B_2 = 7 + 2 = 9$，位数为 $1$。\n\n$9$ 个数的位数分别为 $3, 2, 3, 2, 2, 3, 2, 1, 2$，故位数之和为 $3 + 2 + 3 + 2 + 2 + 3 + 2 + 1 + 2 = 20$。\n\n该样例满足子任务 $2,3,8$ 的限制。\n\n#### 【样例解释 #2】\n\n|$+$|$\\textbf{1}$|$\\textbf{2}$|$\\textbf{3}$|$\\textbf{4}$|\n|:-:|:-:|:-:|:-:|:-:|\n|$\\textbf{8}$|$9$|$10$|$11$|$12$|\n|$\\textbf{97}$|$98$|$99$|$100$|$101$|\n|$\\textbf{996}$|$997$|$998$|$999$|$1000$|\n|$\\textbf{9995}$|$9996$|$9997$|$9998$|$9999$|\n\n未加粗字体为 Aoi 填写的内容。\n\n例如，第 $2$ 行第 $3$ 列的方格中的整数为 $A_2 + B_3 = 97 + 3 = 100$，位数为 $3$。第 $4$ 行第 $2$ 列的方格中的整数为 $A_4 + B_2 = 9995 + 2 = 9997$，位数为 $4$。\n\n可以得出答案为 $46$。\n\n该样例满足子任务 $2,6,7,8$ 的限制。\n\n#### 【样例解释 #3】\n\n方格中仅有一个整数 $10^9$，位数为 $10$，故位数之和为 $10$。\n\n该样例满足子任务 $1,2,4,5,8$ 的限制。\n\n#### 【样例解释 #4】\n\n该样例满足子任务 $2,5,8$ 的限制。\n\n#### 【数据范围】\n\n- $1\\le N\\le 1.5\\times 10^5$；\n- $1\\le A_i\\le 999,999,999(1\\le i\\le N)$；\n- $1\\le B_j\\le 999,999,999(1\\le j\\le N)$。\n\n#### 【子任务】\n\n1. （$5$ 分）$N=1$；\n2. （$11$ 分）$N\\le 2000$；\n3. （$15$ 分）$A_i\\le 2000(1\\le i\\le N)$，$B_j\\le 2000(1\\le j\\le N)$；\n4. （$8$ 分）$10^8\\le A_i\\le 5\\times 10^8(1\\le i\\le N)$，$10^8\\le B_j\\le 5\\times 10^8(1\\le j\\le N)$；\n5. （$22$ 分）$10^8\\le A_i(1\\le i\\le N)$，$10^8\\le B_j(1\\le j\\le N)$；\n6. （$12$ 分）$A_i\\le 1.5\\times 10^5(1\\le i\\le N)$，$B_j = j(1\\le j\\le N)$；\n7. （$13$ 分）$B_j=j(1\\le j\\le N)$；\n8. （$14$ 分）无附加限制。", "locale": "zh-CN"}}}
{"pid": "P11202", "type": "P", "difficulty": 5, "samples": [["10 10 0\nhottokeiki\nhottokeiki", "10"], ["10 10 1\nhottokeiki\nhottokeiki", "11"], ["10 10 3\nhottokeiki\nhottokeiki", "15"], ["6 9 0\nJouhou\nOrinpikku", "14"], ["9 7 1\nCoMMiTTee\nTeRRaCe", "15"], ["6 8 2\nJOIIOI\nJOIGEGOI", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2024", "O2优化", "广度优先搜索 BFS", "JOI（日本）"], "title": "[JOIG 2024] 名前 / Name", "background": "", "description": "JOI 君和 IOI 君决定养一只狗。经过讨论，他们决定给狗取一个满足以下所有条件的名字：\n\n1. 名字必须仅包含大写字母和小写字母；\n2. JOI 君最喜欢的字符串是长度为 $N$ 的字符串 $S$，名字必须包含 $S$ 作为子序列；\n3. IOI 君最喜欢的字符串是长度为 $M$ 的字符串 $T$，名字必须包含 $T$ 作为子序列；\n4. 名字中任意两个相同的字符之间必须间隔至少 $K$ 个其他字符。\n\n以上的所有条件**区分大小写**，例如，我们将 `A` 和 `a` 视为不同的字符。\n\n一个字符串的子序列定义为删除其中若干个字符（可以为 $0$ 个）形成的字符串。例如该字符串为 `algorithm`，那么 `ai` 和 `lgtm` 是它的子序列，而 `joi` 和 `logarithm` 不是。\n\n由于他们都认为名称越短越好，所以他们决定选用满足上述四个条件的且最短的名字。\n\n给定字符串 $S,T$ 和整数 $K$，请你求出满足条件的名字的最短长度。", "inputFormat": "第一行输入三个整数 $N,M,K$。\n\n第二行输入一个字符串 $S$。\n\n第三行输入一个字符串 $T$。", "outputFormat": "输出一行一个整数表示最小长度。", "hint": "#### 【样例解释 #1】\n\n字符串 `hottokeiki` 满足条件。可以证明，不存在长度更小的字符串满足条件，故答案为 $10$。\n\n该样例满足子任务 $1,3,4,7,8$ 的限制。\n\n#### 【样例解释 #2】\n\n相较于上一个样例，仅有 $K$ 的值发生变化。\n\n在该样例中，上一个样例的输出 `hottokeiki` 不满足第四个条件（任意两个相同的字符之间必须间隔至少 $K$ 个其他字符），因为两个 `t` 中没有其他字符。\n\n而字符串 `hotNtokeiki` 满足条件，可以证明，不存在长度更小的字符串满足条件，故答案为 $11$。\n\n该样例满足子任务 $2,3,5,6,7,8$ 的限制。\n\n#### 【样例解释 #3】\n\n相较于前两个样例，仅有 $K$ 的值发生变化。\n\n在该样例中，上一个样例的输出 `hotNtokeiki` 不满足第四个条件（任意两个相同的字符之间必须间隔至少 $K$ 个其他字符），因为两个 `t` 之间仅有 $1$ 个字符，两个 `k` 之间仅有 $2$ 个字符，两个 `i` 之间仅有 $1$ 个字符。\n\n而字符串 `hotarutokeiyuki` 满足条件，可以证明，不存在长度更小的字符串满足条件，故答案为 $15$。\n\n该样例满足子任务 $3,8$ 的限制。\n\n#### 【样例解释 #4】\n\n字符串 `OJouhorinpikku` 满足条件。可以证明，不存在长度更小的字符串满足条件，故答案为 $14$。\n\n请注意上面的条件区分大小写，因此诸如 `jouhorinpikku`（长度为 $13$）这样的字符串**不**符合条件。\n\n该样例满足子任务 $4,7,8$ 的限制。\n\n#### 【样例解释 #5】\n\n字符串 `CoMaMiTeRTeRaCe` 是长度最小且满足条件的字符串，故答案为 $15$。\n\n该样例满足子任务 $5,6,7,8$ 的限制。\n\n#### 【样例解释 #6】\n\n字符串 `JOIGEIGOI` 是长度最小且满足条件的字符串，故答案为 $9$。\n\n该样例满足子任务 $7,8$ 的限制。\n\n#### 【数据范围】\n\n- $1\\le N,M\\le 500$；\n- $0\\le K\\le 3$；\n- $S,T$ 中仅包含大写字母和小写字母。\n\n#### 【子任务】\n\n1. （$2$ 分）$S=T$，$K=0$；\n2. （$7$ 分）$S=T$，$K=1$；\n3. （$16$ 分）$S=T$；\n4. （$17$ 分）$K=0$；\n5. （$13$ 分）$K=1$，$N,M\\le 25$；\n6. （$15$ 分）$K=1$；\n7. （$20$ 分）$K\\le 2$；\n8. （$10$ 分）无附加条件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIG 2024] 名前 / Name", "background": "", "description": "JOI 君和 IOI 君决定养一只狗。经过讨论，他们决定给狗取一个满足以下所有条件的名字：\n\n1. 名字必须仅包含大写字母和小写字母；\n2. JOI 君最喜欢的字符串是长度为 $N$ 的字符串 $S$，名字必须包含 $S$ 作为子序列；\n3. IOI 君最喜欢的字符串是长度为 $M$ 的字符串 $T$，名字必须包含 $T$ 作为子序列；\n4. 名字中任意两个相同的字符之间必须间隔至少 $K$ 个其他字符。\n\n以上的所有条件**区分大小写**，例如，我们将 `A` 和 `a` 视为不同的字符。\n\n一个字符串的子序列定义为删除其中若干个字符（可以为 $0$ 个）形成的字符串。例如该字符串为 `algorithm`，那么 `ai` 和 `lgtm` 是它的子序列，而 `joi` 和 `logarithm` 不是。\n\n由于他们都认为名称越短越好，所以他们决定选用满足上述四个条件的且最短的名字。\n\n给定字符串 $S,T$ 和整数 $K$，请你求出满足条件的名字的最短长度。", "inputFormat": "第一行输入三个整数 $N,M,K$。\n\n第二行输入一个字符串 $S$。\n\n第三行输入一个字符串 $T$。", "outputFormat": "输出一行一个整数表示最小长度。", "hint": "#### 【样例解释 #1】\n\n字符串 `hottokeiki` 满足条件。可以证明，不存在长度更小的字符串满足条件，故答案为 $10$。\n\n该样例满足子任务 $1,3,4,7,8$ 的限制。\n\n#### 【样例解释 #2】\n\n相较于上一个样例，仅有 $K$ 的值发生变化。\n\n在该样例中，上一个样例的输出 `hottokeiki` 不满足第四个条件（任意两个相同的字符之间必须间隔至少 $K$ 个其他字符），因为两个 `t` 中没有其他字符。\n\n而字符串 `hotNtokeiki` 满足条件，可以证明，不存在长度更小的字符串满足条件，故答案为 $11$。\n\n该样例满足子任务 $2,3,5,6,7,8$ 的限制。\n\n#### 【样例解释 #3】\n\n相较于前两个样例，仅有 $K$ 的值发生变化。\n\n在该样例中，上一个样例的输出 `hotNtokeiki` 不满足第四个条件（任意两个相同的字符之间必须间隔至少 $K$ 个其他字符），因为两个 `t` 之间仅有 $1$ 个字符，两个 `k` 之间仅有 $2$ 个字符，两个 `i` 之间仅有 $1$ 个字符。\n\n而字符串 `hotarutokeiyuki` 满足条件，可以证明，不存在长度更小的字符串满足条件，故答案为 $15$。\n\n该样例满足子任务 $3,8$ 的限制。\n\n#### 【样例解释 #4】\n\n字符串 `OJouhorinpikku` 满足条件。可以证明，不存在长度更小的字符串满足条件，故答案为 $14$。\n\n请注意上面的条件区分大小写，因此诸如 `jouhorinpikku`（长度为 $13$）这样的字符串**不**符合条件。\n\n该样例满足子任务 $4,7,8$ 的限制。\n\n#### 【样例解释 #5】\n\n字符串 `CoMaMiTeRTeRaCe` 是长度最小且满足条件的字符串，故答案为 $15$。\n\n该样例满足子任务 $5,6,7,8$ 的限制。\n\n#### 【样例解释 #6】\n\n字符串 `JOIGEIGOI` 是长度最小且满足条件的字符串，故答案为 $9$。\n\n该样例满足子任务 $7,8$ 的限制。\n\n#### 【数据范围】\n\n- $1\\le N,M\\le 500$；\n- $0\\le K\\le 3$；\n- $S,T$ 中仅包含大写字母和小写字母。\n\n#### 【子任务】\n\n1. （$2$ 分）$S=T$，$K=0$；\n2. （$7$ 分）$S=T$，$K=1$；\n3. （$16$ 分）$S=T$；\n4. （$17$ 分）$K=0$；\n5. （$13$ 分）$K=1$，$N,M\\le 25$；\n6. （$15$ 分）$K=1$；\n7. （$20$ 分）$K\\le 2$；\n8. （$10$ 分）无附加条件。", "locale": "zh-CN"}}}
{"pid": "P11203", "type": "P", "difficulty": 6, "samples": [["4\n10 40\n20 80\n45 60\n70 95\n1\n1 15", "3"], ["8\n0 30\n0 90\n0 80\n0 60\n0 20\n0 40\n0 70\n0 50\n3\n1 30\n1 40\n4 50", "7\n1\n5"], ["5\n0 10\n0 10\n0 10\n0 10\n0 10\n4\n1 9\n1 10\n1 11\n1 1000000000", "5\n5\n1\n1"], ["7\n38 61\n13 27\n10 54\n22 56\n49 75\n27 47\n70 99\n1\n3 10", "6"], ["10\n10 20\n11 21\n13 23\n16 26\n20 30\n25 35\n31 41\n38 48\n46 56\n80 90\n4\n1 3\n1 6\n1 8\n1 10", "8\n5\n3\n1"], ["7\n10 54\n38 61\n13 27\n22 56\n49 75\n27 47\n70 99\n5\n1 3\n1 6\n1 9\n1 12\n1 15", "7\n6\n6\n6\n4"], ["7\n38 61\n13 27\n10 54\n22 56\n49 75\n27 47\n70 99\n5\n1 10\n2 10\n3 10\n4 10\n5 10", "4\n6\n6\n5\n2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "倍增", "树状数组", "2024", "O2优化", "JOI（日本）"], "title": "[JOIG 2024] 感染シミュレーション / Infection Simulation", "background": "", "description": "昨天，$N$ 位顾客光顾了 EGOI 自助餐厅。顾客编号从 $1$ 到 $N$，顾客 $i(1\\le i\\le N)$ 到达时间为 $L_i$，离开时间为 $R_i$。今天，我们发现有一位顾客来店时感染了目前在 JOI 国流行的新型传染病 X。\n\n传染病 X 的**传染性**用整数 $x$ 表示。具体来说，对于 $1\\le i\\le N$，当顾客 $i$ 与一个或多个感染者同时进入餐厅的累计总时间至少达到 $x$ 时，顾客 $i$ 就会成为新感染者。\n\n现在，由于 JOI 国采取了严格的感染控制措施，因此必须确定感染者人数。然而，问题在于调查组并不知道哪些人感染了传染病，而代表传染性的整数 $x$ 的值也是未知数。\n\n因此，EGOI 自助餐厅经理理惠决定对于 $Q$ 种情况，分别求出最终会有多少顾客被感染。在第 $j(1\\le j\\le Q)$ 种情况下，最初只有顾客 $P_j$ 受到感染，传染性为 $X_j$。\n\n根据到店顾客的信息，求出每种情况下最终的感染人数。注意，即使受感染的人数是在他们离开餐厅时被感染的，也应包括在内。此外，还假定一旦顾客感染了传染病 X，他就不能再被感染。", "inputFormat": "第一行输入一个整数 $N$。\n\n接下来 $N$ 行，每行两个整数 $L_i,R_i$。\n\n接下来一行输入一个整数 $Q$。\n\n接下来 $Q$ 行，每行两个整数 $P_i,X_i$。", "outputFormat": "输出 $Q$ 行，第 $j(1\\le j\\le Q)$ 行一个整数表示第 $j$ 种情况下的最终感染人数。", "hint": "#### 【样例解释 #1】\n\n在第 $1$ 个询问中，初始的感染者是顾客 $1$，传染性为 $15$，因此感染的传播方式如下\n\n- 在时间 $10$，顾客 $1$ 到达餐厅；\n- 在时间 $20$，顾客 $2$ 到达餐厅；\n- 在时间 $35$，顾客 $2$ 与顾客 $1$ 同时出现在餐厅累计时间为 $15$，顾客 $2$ 被感染；\n- 在时间 $40$，顾客 $1$ 离开餐厅；\n- 在时间 $45$，顾客 $3$ 到达餐厅；\n- 在时间 $60$，顾客 $3$ 与顾客 $2$ 同时出现在餐厅累计时间为 $15$，顾客 $3$ 被感染；与此同时，顾客 $3$ 离开餐厅；\n- 在时间 $70$，顾客 $4$ 到达餐厅；\n- 在时间 $80$，顾客 $2$ 离开餐厅；\n- 在时间 $95$，顾客 $4$ 与顾客 $2$ 同时出现在餐厅累计时间为 $10$，因此顾客 $4$ 未感染；与此同时，顾客 $4$ 离开餐厅。\n\n最终顾客 $1,2,3$ 被感染，共 $3$ 人，故第 $1$ 个询问答案为 $3$。\n\n该样例满足子任务 $4,5,6,8,9,10$ 的限制。\n\n#### 【样例解释 #2】\n\n- 在第 $1$ 个询问中，$7$ 个顾客 $1,2,3,4,6,7,8$ 最终被感染，答案为 $7$。\n- 在第 $2$ 个询问中，$1$ 个顾客 $1$ 最终被感染，答案为 $1$。\n- 在第 $3$ 个询问中，$5$ 个顾客 $2,3,4,7,8$ 最终被感染，答案为 $5$。\n\n该样例满足子任务 $2,3,4,5,6,10$ 的限制。\n\n#### 【样例解释 #3】\n\n该样例满足子任务 $1,2,3,5,6,8,10$ 的限制。\n\n#### 【样例解释 #4】\n\n该样例满足子任务 $4,5,6,9,10$ 的限制。\n\n#### 【样例解释 #5】\n\n该样例满足子任务 $4,5,6,7,8,9,10$ 的限制。\n\n#### 【样例解释 #6】\n\n该样例满足子任务 $4,5,6,7,8,10$ 的限制。\n\n#### 【样例解释 #7】\n\n该样例满足子任务 $4,5,6,7,9,10$ 的限制。\n\n#### 【数据范围】\n\n- $1\\le N\\le 10^5$；\n- $0\\le L_i<R_i\\le 10^9(1\\le i\\le N)$；\n- $1\\le Q\\le 10^5$；\n- $1\\le P_j\\le N(1\\le j\\le Q)$；\n- $1\\le X_j\\le 10^9(1\\le j\\le Q)$。\n\n#### 【子任务】\n\n1. （$2$ 分）$L_i=0(1\\le i\\le N)$，$R_i=10(1\\le i\\le N)$，$Q\\le 5$；\n2. （$3$ 分）$L_i=0(1\\le i\\le N)$，$Q\\le 5$；\n3. （$6$ 分）$L_i=0(1\\le i\\le N)$；\n4. （$10$ 分）$N\\le 500$，$Q\\le 5$，$R_i\\le 500(1\\le i\\le N)$，$X_j\\le 500(1\\le j\\le Q)$；\n5. （$11$ 分）$N\\le 500$，$Q\\le 5$；\n6. （$16$ 分）$Q\\le 5$；\n7. （$13$ 分）$P_j=1(1\\le j\\le Q)$，$L_1<L_2<\\cdots<L_N$，$R_1<R_2<\\cdots<R_N$；\n8. （$14$ 分）$P_j=1(1\\le j\\le Q)$；\n9. （$15$ 分）$R_i-L_i(1\\le i\\le N)$ 的最小值大于或等于 $X_j(1\\le j\\le Q)$ 的最大值；\n10. （$10$ 分）无附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIG 2024] 感染シミュレーション / Infection Simulation", "background": "", "description": "昨天，$N$ 位顾客光顾了 EGOI 自助餐厅。顾客编号从 $1$ 到 $N$，顾客 $i(1\\le i\\le N)$ 到达时间为 $L_i$，离开时间为 $R_i$。今天，我们发现有一位顾客来店时感染了目前在 JOI 国流行的新型传染病 X。\n\n传染病 X 的**传染性**用整数 $x$ 表示。具体来说，对于 $1\\le i\\le N$，当顾客 $i$ 与一个或多个感染者同时进入餐厅的累计总时间至少达到 $x$ 时，顾客 $i$ 就会成为新感染者。\n\n现在，由于 JOI 国采取了严格的感染控制措施，因此必须确定感染者人数。然而，问题在于调查组并不知道哪些人感染了传染病，而代表传染性的整数 $x$ 的值也是未知数。\n\n因此，EGOI 自助餐厅经理理惠决定对于 $Q$ 种情况，分别求出最终会有多少顾客被感染。在第 $j(1\\le j\\le Q)$ 种情况下，最初只有顾客 $P_j$ 受到感染，传染性为 $X_j$。\n\n根据到店顾客的信息，求出每种情况下最终的感染人数。注意，即使受感染的人数是在他们离开餐厅时被感染的，也应包括在内。此外，还假定一旦顾客感染了传染病 X，他就不能再被感染。", "inputFormat": "第一行输入一个整数 $N$。\n\n接下来 $N$ 行，每行两个整数 $L_i,R_i$。\n\n接下来一行输入一个整数 $Q$。\n\n接下来 $Q$ 行，每行两个整数 $P_i,X_i$。", "outputFormat": "输出 $Q$ 行，第 $j(1\\le j\\le Q)$ 行一个整数表示第 $j$ 种情况下的最终感染人数。", "hint": "#### 【样例解释 #1】\n\n在第 $1$ 个询问中，初始的感染者是顾客 $1$，传染性为 $15$，因此感染的传播方式如下\n\n- 在时间 $10$，顾客 $1$ 到达餐厅；\n- 在时间 $20$，顾客 $2$ 到达餐厅；\n- 在时间 $35$，顾客 $2$ 与顾客 $1$ 同时出现在餐厅累计时间为 $15$，顾客 $2$ 被感染；\n- 在时间 $40$，顾客 $1$ 离开餐厅；\n- 在时间 $45$，顾客 $3$ 到达餐厅；\n- 在时间 $60$，顾客 $3$ 与顾客 $2$ 同时出现在餐厅累计时间为 $15$，顾客 $3$ 被感染；与此同时，顾客 $3$ 离开餐厅；\n- 在时间 $70$，顾客 $4$ 到达餐厅；\n- 在时间 $80$，顾客 $2$ 离开餐厅；\n- 在时间 $95$，顾客 $4$ 与顾客 $2$ 同时出现在餐厅累计时间为 $10$，因此顾客 $4$ 未感染；与此同时，顾客 $4$ 离开餐厅。\n\n最终顾客 $1,2,3$ 被感染，共 $3$ 人，故第 $1$ 个询问答案为 $3$。\n\n该样例满足子任务 $4,5,6,8,9,10$ 的限制。\n\n#### 【样例解释 #2】\n\n- 在第 $1$ 个询问中，$7$ 个顾客 $1,2,3,4,6,7,8$ 最终被感染，答案为 $7$。\n- 在第 $2$ 个询问中，$1$ 个顾客 $1$ 最终被感染，答案为 $1$。\n- 在第 $3$ 个询问中，$5$ 个顾客 $2,3,4,7,8$ 最终被感染，答案为 $5$。\n\n该样例满足子任务 $2,3,4,5,6,10$ 的限制。\n\n#### 【样例解释 #3】\n\n该样例满足子任务 $1,2,3,5,6,8,10$ 的限制。\n\n#### 【样例解释 #4】\n\n该样例满足子任务 $4,5,6,9,10$ 的限制。\n\n#### 【样例解释 #5】\n\n该样例满足子任务 $4,5,6,7,8,9,10$ 的限制。\n\n#### 【样例解释 #6】\n\n该样例满足子任务 $4,5,6,7,8,10$ 的限制。\n\n#### 【样例解释 #7】\n\n该样例满足子任务 $4,5,6,7,9,10$ 的限制。\n\n#### 【数据范围】\n\n- $1\\le N\\le 10^5$；\n- $0\\le L_i<R_i\\le 10^9(1\\le i\\le N)$；\n- $1\\le Q\\le 10^5$；\n- $1\\le P_j\\le N(1\\le j\\le Q)$；\n- $1\\le X_j\\le 10^9(1\\le j\\le Q)$。\n\n#### 【子任务】\n\n1. （$2$ 分）$L_i=0(1\\le i\\le N)$，$R_i=10(1\\le i\\le N)$，$Q\\le 5$；\n2. （$3$ 分）$L_i=0(1\\le i\\le N)$，$Q\\le 5$；\n3. （$6$ 分）$L_i=0(1\\le i\\le N)$；\n4. （$10$ 分）$N\\le 500$，$Q\\le 5$，$R_i\\le 500(1\\le i\\le N)$，$X_j\\le 500(1\\le j\\le Q)$；\n5. （$11$ 分）$N\\le 500$，$Q\\le 5$；\n6. （$16$ 分）$Q\\le 5$；\n7. （$13$ 分）$P_j=1(1\\le j\\le Q)$，$L_1<L_2<\\cdots<L_N$，$R_1<R_2<\\cdots<R_N$；\n8. （$14$ 分）$P_j=1(1\\le j\\le Q)$；\n9. （$15$ 分）$R_i-L_i(1\\le i\\le N)$ 的最小值大于或等于 $X_j(1\\le j\\le Q)$ 的最大值；\n10. （$10$ 分）无附加限制。", "locale": "zh-CN"}}}
{"pid": "P11204", "type": "P", "difficulty": 1, "samples": [["3\n4 7\n3 4\n5 21", "Yes\nNo\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷比赛"], "title": "「Cfz Round 9」Lone", "background": "[Click here (or at the bottom of this page) to download the English version of statements for this contest (PDF).](https://www.luogu.com.cn/fe/api/problem/downloadAttachment/of2k8jng?contestId=205839)", "description": "她有一根长度为 $m$ 的木棍。\n\n她希望你把这根木棍分成 $n$ 根小木棍，使得每一根小木棍的长度均为**正整数**，且从中任选 $3$ 根小木棍都可以通过首尾相连的方式组成一个三角形。\n\n你想求出，你能否满足她的愿望。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入共一行，包含两个整数 $n,m$。", "outputFormat": "对于每组测试数据，输出一行一个字符串：\n\n- 若你能满足她的愿望，则输出 `Yes`；\n- 若你不能满足她的愿望，则输出 `No`。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组测试数据，可以把木棍分成长度分别为 $1,2,2,2$ 的小木棍。\n\n对于第 $2$ 组测试数据，可以证明不存在满足要求的方案。\n\n对于第 $3$ 组测试数据，其中一种满足要求的方案为把木棍分成长度分别为 $3,4,4,5,5$ 的小木棍。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 100$；\n- $3 \\le n \\le m \\le 10^9$。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（18 points）：$m \\le 500$，$n=3$。\n- Subtask 1（15 points）：$n=3$。  \n- Subtask 2（32 points）：$n\\times 2 \\ge m$。  \n- Subtask 3（35 points）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 9」Lone", "background": "[Click here (or at the bottom of this page) to download the English version of statements for this contest (PDF).](https://www.luogu.com.cn/fe/api/problem/downloadAttachment/of2k8jng?contestId=205839)", "description": "她有一根长度为 $m$ 的木棍。\n\n她希望你把这根木棍分成 $n$ 根小木棍，使得每一根小木棍的长度均为**正整数**，且从中任选 $3$ 根小木棍都可以通过首尾相连的方式组成一个三角形。\n\n你想求出，你能否满足她的愿望。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入共一行，包含两个整数 $n,m$。", "outputFormat": "对于每组测试数据，输出一行一个字符串：\n\n- 若你能满足她的愿望，则输出 `Yes`；\n- 若你不能满足她的愿望，则输出 `No`。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组测试数据，可以把木棍分成长度分别为 $1,2,2,2$ 的小木棍。\n\n对于第 $2$ 组测试数据，可以证明不存在满足要求的方案。\n\n对于第 $3$ 组测试数据，其中一种满足要求的方案为把木棍分成长度分别为 $3,4,4,5,5$ 的小木棍。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 100$；\n- $3 \\le n \\le m \\le 10^9$。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（18 points）：$m \\le 500$，$n=3$。\n- Subtask 1（15 points）：$n=3$。  \n- Subtask 2（32 points）：$n\\times 2 \\ge m$。  \n- Subtask 3（35 points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11205", "type": "P", "difficulty": 3, "samples": [["3\n3\n6 1 3\n6\n3 1 2 1 1 3\n4\n3 4 3 6", "5\n4\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "洛谷原创", "O2优化", "洛谷比赛"], "title": "「Cfz Round 9」Hope", "background": "", "description": "她的面前有 $n$ 堆花瓣。其中，第 $i$ 堆花瓣中共有 $a_i$ 片花瓣。\n\n你可以选择若干堆花瓣，并在你选择的每一堆花瓣中拿出任意正整数片花瓣，最后将所有拿出的花瓣组成一堆新的花瓣。你**不能将某一堆花瓣中的所有花瓣都拿走**，但你可以选择 $0$ 堆花瓣，即不进行任何操作。**你只能进行至多一次操作。**\n\n她希望，在你操作结束后，最小的**不等于任意一堆中花瓣的数量**的正整数尽可能大。\n\n你想求出这个正整数的最大值。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行一个正整数 $n$。\n- 第二行 $n$ 个正整数，表示给定的序列 $a$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示在你操作结束后，最小的**不等于任意一堆中花瓣的数量**的正整数的最大值。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组测试数据，你可以选择第 $1$ 堆花瓣并拿走 $2$ 片花瓣。\n\n对于第 $2$ 组测试数据，你可以不进行任何操作。\n\n对于第 $3$ 组测试数据，你可以拿走第 $1$ 堆花瓣中的 $1$ 片花瓣和第 $4$ 堆花瓣中的 $5$ 片花瓣。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 10$；\n- $1 \\le n \\le 10^5$；\n- $1 \\le a_i \\le 10^9$。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（10 points）：$n=1$。\n- Subtask 1（30 points）：序列 $a$ 中的每一项互不相同。\n- Subtask 2（24 points）：$a_i \\le 10^4$。\n- Subtask 3（36 points）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 9」Hope", "background": "", "description": "她的面前有 $n$ 堆花瓣。其中，第 $i$ 堆花瓣中共有 $a_i$ 片花瓣。\n\n你可以选择若干堆花瓣，并在你选择的每一堆花瓣中拿出任意正整数片花瓣，最后将所有拿出的花瓣组成一堆新的花瓣。你**不能将某一堆花瓣中的所有花瓣都拿走**，但你可以选择 $0$ 堆花瓣，即不进行任何操作。**你只能进行至多一次操作。**\n\n她希望，在你操作结束后，最小的**不等于任意一堆中花瓣的数量**的正整数尽可能大。\n\n你想求出这个正整数的最大值。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行一个正整数 $n$。\n- 第二行 $n$ 个正整数，表示给定的序列 $a$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示在你操作结束后，最小的**不等于任意一堆中花瓣的数量**的正整数的最大值。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组测试数据，你可以选择第 $1$ 堆花瓣并拿走 $2$ 片花瓣。\n\n对于第 $2$ 组测试数据，你可以不进行任何操作。\n\n对于第 $3$ 组测试数据，你可以拿走第 $1$ 堆花瓣中的 $1$ 片花瓣和第 $4$ 堆花瓣中的 $5$ 片花瓣。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 10$；\n- $1 \\le n \\le 10^5$；\n- $1 \\le a_i \\le 10^9$。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（10 points）：$n=1$。\n- Subtask 1（30 points）：序列 $a$ 中的每一项互不相同。\n- Subtask 2（24 points）：$a_i \\le 10^4$。\n- Subtask 3（36 points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11206", "type": "P", "difficulty": 3, "samples": [["2\n3\n1 2\n1 3\n5\n4 2\n1 5\n3 1\n2 1", "1 3 2\n1 2 3 4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "树的遍历", "构造", "洛谷比赛"], "title": "「Cfz Round 9」Dove", "background": "", "description": "你的面前有一棵树。\n\n这棵树共有 $n$ 个结点，这些结点之间由 $n-1$ 根树枝相连，每个结点上都有一只鸽子。\n\n她希望你对所有鸽子进行编号。设第 $i$ 只鸽子的编号为 $p_i$，你需要满足：\n\n- 序列 $p$ 为一个 $1 \\sim n$ 的排列，即 $1\\sim n$ 中的每个数在所有鸽子的编号中恰好出现一次；\n- 对于结点 $u,v$，若结点 $u$ 与结点 $v$ 之间存在一根树枝，则结点 $u$ 上的鸽子的编号与结点 $v$ 上的鸽子的编号之和不大于 $n+1$，即 $p_u+p_v \\le n+1$。\n\n你想求出一种满足条件的对鸽子进行编号的方式。可以证明，一定存在至少一组解。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行一个正整数 $n$。\n- 接下来 $n-1$ 行，每行两个正整数 $u_i,v_i$，表示结点 $u_i$ 与结点 $v_i$ 之间存在一根树枝。", "outputFormat": "对于每组测试数据，输出一行 $n$ 个正整数，其中第 $i$ 个正整数表示你求出的对鸽子进行编号的方式中 $p_i$ 的值，即结点 $i$ 上的鸽子的编号。\n\n可以证明，一定存在至少一组解。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组测试数据，结点 $1$ 上的鸽子的编号为 $1$，结点 $2$ 上的鸽子的编号为 $3$，结点 $3$ 上的鸽子的编号为 $2$，由于 $1+2$ 和 $1+3$ 均不大于 $4$，所以这种对鸽子进行编号的方式满足条件。\n\n对于第 $2$ 组测试数据，另一种满足条件的对鸽子进行编号的方式为：令结点 $1,2,3,4,5$ 上的鸽子的编号分别为 $2,1,4,5,3$。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 10$；\n- $2 \\le n \\le 10^5$；\n- $1 \\le u_i,v_i \\le n$；\n- 输入数据形成一棵树。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（21 points）：$n \\le 8$。\n- Subtask 1（25 points）：$n \\le 1000$。\n- Subtask 2（11 points）：对于任意小于 $n$ 的正整数 $i$，都满足 $u_i=1$ 且 $v_i=i+1$。\n- Subtask 3（18 points）：对于任意小于 $n$ 的正整数 $i$，都满足 $u_i=i$ 且 $v_i=i+1$。\n- Subtask 4（25 points）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 9」Dove", "background": "", "description": "你的面前有一棵树。\n\n这棵树共有 $n$ 个结点，这些结点之间由 $n-1$ 根树枝相连，每个结点上都有一只鸽子。\n\n她希望你对所有鸽子进行编号。设第 $i$ 只鸽子的编号为 $p_i$，你需要满足：\n\n- 序列 $p$ 为一个 $1 \\sim n$ 的排列，即 $1\\sim n$ 中的每个数在所有鸽子的编号中恰好出现一次；\n- 对于结点 $u,v$，若结点 $u$ 与结点 $v$ 之间存在一根树枝，则结点 $u$ 上的鸽子的编号与结点 $v$ 上的鸽子的编号之和不大于 $n+1$，即 $p_u+p_v \\le n+1$。\n\n你想求出一种满足条件的对鸽子进行编号的方式。可以证明，一定存在至少一组解。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行一个正整数 $n$。\n- 接下来 $n-1$ 行，每行两个正整数 $u_i,v_i$，表示结点 $u_i$ 与结点 $v_i$ 之间存在一根树枝。", "outputFormat": "对于每组测试数据，输出一行 $n$ 个正整数，其中第 $i$ 个正整数表示你求出的对鸽子进行编号的方式中 $p_i$ 的值，即结点 $i$ 上的鸽子的编号。\n\n可以证明，一定存在至少一组解。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组测试数据，结点 $1$ 上的鸽子的编号为 $1$，结点 $2$ 上的鸽子的编号为 $3$，结点 $3$ 上的鸽子的编号为 $2$，由于 $1+2$ 和 $1+3$ 均不大于 $4$，所以这种对鸽子进行编号的方式满足条件。\n\n对于第 $2$ 组测试数据，另一种满足条件的对鸽子进行编号的方式为：令结点 $1,2,3,4,5$ 上的鸽子的编号分别为 $2,1,4,5,3$。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 10$；\n- $2 \\le n \\le 10^5$；\n- $1 \\le u_i,v_i \\le n$；\n- 输入数据形成一棵树。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（21 points）：$n \\le 8$。\n- Subtask 1（25 points）：$n \\le 1000$。\n- Subtask 2（11 points）：对于任意小于 $n$ 的正整数 $i$，都满足 $u_i=1$ 且 $v_i=i+1$。\n- Subtask 3（18 points）：对于任意小于 $n$ 的正整数 $i$，都满足 $u_i=i$ 且 $v_i=i+1$。\n- Subtask 4（25 points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11207", "type": "P", "difficulty": 4, "samples": [["3\n2\nPW\nVP\n5\nPPWWP\nPWVWV\n6\nWVPPWW\nVVPVWP", "0\n2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "递推", "洛谷原创", "O2优化", "洛谷比赛"], "title": "「Cfz Round 9」Rose", "background": "", "description": "你和她正在进行一个游戏。\n\n你和她各有 $n$ 张**有序的**卡牌，每张卡牌的颜色可能为粉色、紫色或白色。\n\n**从她开始**，你和她需要各自按照卡牌的顺序，轮流打出手里的卡牌。打出的卡牌将会被移至牌堆中。\n\n若某个人打出卡牌后，牌堆中三种颜色的卡牌的数量相同，则这个人获胜，游戏结束。若你和她的卡牌都打完后，还没有人获胜，则游戏平局。\n\n在游戏开始前，你可以进行若干次操作。每次操作，你可以给任意一个人的任意一张卡牌更换颜色。\n\n你想求出，你至少需要进行多少次操作才能**使她获胜**。可以证明，一定存在至少一种可以使她获胜的操作方案。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行一个正整数 $n$。\n- 第二行一个长度为 $n$ 的字符串 $s$，描述**她**的卡牌：\n  - 若 $s_i$ 为 `P`，则表示她的第 $i$ 张卡牌的颜色为粉色；\n  - 若 $s_i$ 为 `V`，则表示她的第 $i$ 张卡牌的颜色为紫色；\n  - 若 $s_i$ 为 `W`，则表示她的第 $i$ 张卡牌的颜色为白色。\n- 第三行一个长度为 $n$ 的字符串 $t$，描述**你**的卡牌：\n  - 若 $t_i$ 为 `P`，则表示你的第 $i$ 张卡牌的颜色为粉色；\n  - 若 $t_i$ 为 `V`，则表示你的第 $i$ 张卡牌的颜色为紫色；\n  - 若 $t_i$ 为 `W`，则表示你的第 $i$ 张卡牌的颜色为白色。\n  \n其中，$s_i$ 表示字符串 $s$ 的第 $i$ 个字符，$t_i$ 同理。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示你使她获胜所至少需要进行的操作的次数。若你不需要进行操作就能使她获胜，则你需要输出 $0$。\n\n可以证明，一定存在至少一种可以使她获胜的操作方案。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组测试数据，不需要进行操作就能使她获胜。\n\n对于第 $2$ 组测试数据，一种可能的操作方案为将她的第 $4$ 张卡牌和第 $5$ 张卡牌的颜色均更换为紫色。\n\n对于第 $3$ 组测试数据，一种可能的操作方案为将你的第 $4$ 张卡牌的颜色更换为白色。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 30$；\n- $2 \\le n \\le 10^5$；\n- 对于所有不大于 $n$ 的正整数 $i$，满足 $s_i$ 和 $t_i$ 均为 `PVW` 中的某个字符。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（18 points）：$n \\le 6$。\n- Subtask 1（20 points）：$n \\le 1000$。\n- Subtask 2（12 points）：对于任意不大于 $n$ 的正整数 $i$，都满足 $s_i \\ne t_i$。\n- Subtask 3（25 points）：若你不进行任何操作，则你不会获胜。\n- Subtask 4（25 points）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 9」Rose", "background": "", "description": "你和她正在进行一个游戏。\n\n你和她各有 $n$ 张**有序的**卡牌，每张卡牌的颜色可能为粉色、紫色或白色。\n\n**从她开始**，你和她需要各自按照卡牌的顺序，轮流打出手里的卡牌。打出的卡牌将会被移至牌堆中。\n\n若某个人打出卡牌后，牌堆中三种颜色的卡牌的数量相同，则这个人获胜，游戏结束。若你和她的卡牌都打完后，还没有人获胜，则游戏平局。\n\n在游戏开始前，你可以进行若干次操作。每次操作，你可以给任意一个人的任意一张卡牌更换颜色。\n\n你想求出，你至少需要进行多少次操作才能**使她获胜**。可以证明，一定存在至少一种可以使她获胜的操作方案。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行一个正整数 $n$。\n- 第二行一个长度为 $n$ 的字符串 $s$，描述**她**的卡牌：\n  - 若 $s_i$ 为 `P`，则表示她的第 $i$ 张卡牌的颜色为粉色；\n  - 若 $s_i$ 为 `V`，则表示她的第 $i$ 张卡牌的颜色为紫色；\n  - 若 $s_i$ 为 `W`，则表示她的第 $i$ 张卡牌的颜色为白色。\n- 第三行一个长度为 $n$ 的字符串 $t$，描述**你**的卡牌：\n  - 若 $t_i$ 为 `P`，则表示你的第 $i$ 张卡牌的颜色为粉色；\n  - 若 $t_i$ 为 `V`，则表示你的第 $i$ 张卡牌的颜色为紫色；\n  - 若 $t_i$ 为 `W`，则表示你的第 $i$ 张卡牌的颜色为白色。\n  \n其中，$s_i$ 表示字符串 $s$ 的第 $i$ 个字符，$t_i$ 同理。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示你使她获胜所至少需要进行的操作的次数。若你不需要进行操作就能使她获胜，则你需要输出 $0$。\n\n可以证明，一定存在至少一种可以使她获胜的操作方案。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组测试数据，不需要进行操作就能使她获胜。\n\n对于第 $2$ 组测试数据，一种可能的操作方案为将她的第 $4$ 张卡牌和第 $5$ 张卡牌的颜色均更换为紫色。\n\n对于第 $3$ 组测试数据，一种可能的操作方案为将你的第 $4$ 张卡牌的颜色更换为白色。\n\n#### 「数据范围」\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 30$；\n- $2 \\le n \\le 10^5$；\n- 对于所有不大于 $n$ 的正整数 $i$，满足 $s_i$ 和 $t_i$ 均为 `PVW` 中的某个字符。\n\n**本题采用捆绑测试。**\n\n- Subtask 0（18 points）：$n \\le 6$。\n- Subtask 1（20 points）：$n \\le 1000$。\n- Subtask 2（12 points）：对于任意不大于 $n$ 的正整数 $i$，都满足 $s_i \\ne t_i$。\n- Subtask 3（25 points）：若你不进行任何操作，则你不会获胜。\n- Subtask 4（25 points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11208", "type": "P", "difficulty": 4, "samples": [["3\n3 2 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "树状数组", "O2优化", "排序"], "title": "『STA - R8』轮回疯狂", "background": "", "description": "给一个 $1$ 到 $n$ 的排列 $p$，你可以使用两种操作：\n- 轮回：交换 $p$ 中相邻的两个位置。\n- 疯狂：删除 $p$ 中的最小值。如果 $p$ 为空则不能进行操作。\n\n问最少需要多少次操作才能使得序列单调递增。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数，描述排列 $p$。", "outputFormat": "一行一个正整数，表示答案。", "hint": "样例解释：先删除 $p_3$，再交换 $p_1,p_2$。\n\n***\n**本题采用捆绑测试。**\n\n数据范围：\n- Subtask 1 (10pts)：$n\\le 3$。\n- Subtask 2 (30pts)：$n\\le 10^3$。\n- Subtask 3 (10pts)：$p_i=n-i+1$。\n- Subtask 4 (50pts)：无特殊限制。\n\n\n对于全部数据，$1\\le n\\le 10^5$，$p$ 是 $1$ 到 $n$ 的排列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R8』轮回疯狂", "background": "", "description": "给一个 $1$ 到 $n$ 的排列 $p$，你可以使用两种操作：\n- 轮回：交换 $p$ 中相邻的两个位置。\n- 疯狂：删除 $p$ 中的最小值。如果 $p$ 为空则不能进行操作。\n\n问最少需要多少次操作才能使得序列单调递增。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数，描述排列 $p$。", "outputFormat": "一行一个正整数，表示答案。", "hint": "样例解释：先删除 $p_3$，再交换 $p_1,p_2$。\n\n***\n**本题采用捆绑测试。**\n\n数据范围：\n- Subtask 1 (10pts)：$n\\le 3$。\n- Subtask 2 (30pts)：$n\\le 10^3$。\n- Subtask 3 (10pts)：$p_i=n-i+1$。\n- Subtask 4 (50pts)：无特殊限制。\n\n\n对于全部数据，$1\\le n\\le 10^5$，$p$ 是 $1$ 到 $n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P11209", "type": "P", "difficulty": 4, "samples": [["1 1 1\n1\n1\n1", "1"], ["0 5 5\n3 1 4 0 2\n3 7 2 5 1\n0\n2\n3\n5\n7", "3\n4\n4\n3\n1"], ["1 5 5\n3 1 4 0 2\n3 7 2 5 1\n0\n1\n7\n1\n4", "3\n4\n4\n3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "字典树 Trie", "位运算"], "title": "『STA - R8』小熊游景点 II", "background": "", "description": "给定序列 $\\{a_n\\},\\{b_n\\}$，有 $m$ 次询问，\n\n每次询问给定 $k$，求 $\\sum\\limits_{i=1}^n[(a_i\\oplus k)\\le b_i]$，其中 $\\oplus$ 是按位异或。\n\n**本题部分测试点强制在线。**", "inputFormat": "第一行三个整数 $T,n,m$，$T=1/0$ 表示这组数据是/否强制在线。\n\n第二行 $n$ 个整数 $\\{a_n\\}$。\n\n第三行 $n$ 个整数 $\\{b_n\\}$。\n\n接下来 $m$ 行，每行一个整数 $k'$，表示一次询问 $k=k'\\oplus(l\\times T)$，\n\n其中 $l$ 是上次询问的答案，第一次询问时 $l=0$。", "outputFormat": "$m$ 行每行一个整数，表示每次询问的答案。", "hint": "**本题采用捆绑测试。**\n\n| Subtask | $n,m$ | $a_i,b_i,k$ | $T$ | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\le 10^3$ | $<2^{30}$ | $=1$ | $10$ |\n| $2$ | $\\le 5\\times 10^5$ | $<2^{10}$ | $=1$ | $10$ |\n| $3$ | $\\le 5\\times 10^5$ | $<2^{30}$ | $=0$ | $40$ |\n| $4$ | $\\le 5\\times 10^5$ | $<2^{30}$ | $=1$ | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 5\\times 10^5$，$0\\le a_i,b_i,k<2^{30}$，$T\\in\\{0,1\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R8』小熊游景点 II", "background": "", "description": "给定序列 $\\{a_n\\},\\{b_n\\}$，有 $m$ 次询问，\n\n每次询问给定 $k$，求 $\\sum\\limits_{i=1}^n[(a_i\\oplus k)\\le b_i]$，其中 $\\oplus$ 是按位异或。\n\n**本题部分测试点强制在线。**", "inputFormat": "第一行三个整数 $T,n,m$，$T=1/0$ 表示这组数据是/否强制在线。\n\n第二行 $n$ 个整数 $\\{a_n\\}$。\n\n第三行 $n$ 个整数 $\\{b_n\\}$。\n\n接下来 $m$ 行，每行一个整数 $k'$，表示一次询问 $k=k'\\oplus(l\\times T)$，\n\n其中 $l$ 是上次询问的答案，第一次询问时 $l=0$。", "outputFormat": "$m$ 行每行一个整数，表示每次询问的答案。", "hint": "**本题采用捆绑测试。**\n\n| Subtask | $n,m$ | $a_i,b_i,k$ | $T$ | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\le 10^3$ | $<2^{30}$ | $=1$ | $10$ |\n| $2$ | $\\le 5\\times 10^5$ | $<2^{10}$ | $=1$ | $10$ |\n| $3$ | $\\le 5\\times 10^5$ | $<2^{30}$ | $=0$ | $40$ |\n| $4$ | $\\le 5\\times 10^5$ | $<2^{30}$ | $=1$ | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 5\\times 10^5$，$0\\le a_i,b_i,k<2^{30}$，$T\\in\\{0,1\\}$。", "locale": "zh-CN"}}}
{"pid": "P11210", "type": "P", "difficulty": 6, "samples": [["5 6\n4 1\n4 1\n4 2\n4 1\n5 2\nQ 2 5\nU 6 6 3\nQ 3 7\nQ 1 6\nU 2 4 2\nQ 2 3", "2\n2\n0\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "二分", "2024", "洛谷原创", "O2优化", "Ad-hoc", "洛谷比赛"], "title": "『STA - R8』强制在线动态二维数点", "background": "> 数据结构界的最新成果！强制在线动态二维数点已经可以做到线性时间！\n", "description": "要拿到图灵奖，你需要解决下面这道动态在线二维数点问题：\n\n平面上有 $n$ 个点 $(x_i,y_i)$，**排列在 $\\bm{y=x}$ 的直线下方（即，$\\bm{y_i\\le x_i}$ 成立）**。\n\n我会进行 $q$ 次操作，操作有两种类型：\n\n1. 修改操作 `U i x y`：令 $x_i:=x,y_i:=y$。（即，将 $x_i$ 和 $y_i$ 分别赋值为 $x$ 和 $y$。）\n2. 询问操作 `Q l r`：给出一个**四个顶点分别是 $\\bm{(l,l),(r,l),(l,r),(r,r)}$ 的矩形**，求出在给出的矩形内的点 $^\\dagger$ $(x,y)$ 中最小的 $x-y$ 的值。**特别地，规定当矩形没有包含任何一个点时答案为 $\\bm{0}$。**\n\n两种操作会以某种方式进行加密，详细要求见下方【输入格式】一栏。\n\n$^\\dagger$：点 $(x,y)$ 在 $(l,l),(r,l),(l,r),(r,r)$ 所构成的矩形内，当且仅当 $l\\le x\\le r$ 且 $l\\le y\\le r$。", "inputFormat": "第一行两个整数 $n$ 和 $q$。\n\n随后 $n$ 行，每行两个整数 $x_i$ 和 $y_i$ 描述每个点的坐标。\n\n接下来 $q$ 行，给出每个操作的类型和对应参数的加密值。解密后的真实的参数 $i,x,y,l,r$ 的值，**均要异或你上一次输出的答案**（第一次询问操作前不异或）。我会保证解密后 $1\\le l\\le r\\le n$ 和 $1\\le i\\le n$，$1\\le y\\le x\\le n$ 的约束存在。", "outputFormat": "对每个询问操作，输出一行你的答案。", "hint": "对于所有测试数据，$1\\le n,q\\le 5\\times 10^5$，并且保证解密后的 $1\\le l\\le r\\le n$ 且 $1\\le i\\le n$，$1\\le y\\le x\\le n$。\n\n**本题采用捆绑测试，并开启子任务依赖。**\n\n- Subtask 0（5 points）：$n,q\\le 5\\times 10^3$。\n- Subtask 1（20 points）：无修改操作。 \n- Subtask 2（25 points）：满足特殊性质。\n- Subtask 3（20 points）：$n,q\\le 10^5$。\n- Subtask 4（30 points）：无特殊限制。\n\n特殊性质（数据随机）：操作类型、修改的位置、初始时和修改后的点的坐标和询问区间（参数 $(i,x,y),(l,r)$ 的值）在合法范围内独立地均匀随机生成。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R8』强制在线动态二维数点", "background": "> 数据结构界的最新成果！强制在线动态二维数点已经可以做到线性时间！\n", "description": "要拿到图灵奖，你需要解决下面这道动态在线二维数点问题：\n\n平面上有 $n$ 个点 $(x_i,y_i)$，**排列在 $\\bm{y=x}$ 的直线下方（即，$\\bm{y_i\\le x_i}$ 成立）**。\n\n我会进行 $q$ 次操作，操作有两种类型：\n\n1. 修改操作 `U i x y`：令 $x_i:=x,y_i:=y$。（即，将 $x_i$ 和 $y_i$ 分别赋值为 $x$ 和 $y$。）\n2. 询问操作 `Q l r`：给出一个**四个顶点分别是 $\\bm{(l,l),(r,l),(l,r),(r,r)}$ 的矩形**，求出在给出的矩形内的点 $^\\dagger$ $(x,y)$ 中最小的 $x-y$ 的值。**特别地，规定当矩形没有包含任何一个点时答案为 $\\bm{0}$。**\n\n两种操作会以某种方式进行加密，详细要求见下方【输入格式】一栏。\n\n$^\\dagger$：点 $(x,y)$ 在 $(l,l),(r,l),(l,r),(r,r)$ 所构成的矩形内，当且仅当 $l\\le x\\le r$ 且 $l\\le y\\le r$。", "inputFormat": "第一行两个整数 $n$ 和 $q$。\n\n随后 $n$ 行，每行两个整数 $x_i$ 和 $y_i$ 描述每个点的坐标。\n\n接下来 $q$ 行，给出每个操作的类型和对应参数的加密值。解密后的真实的参数 $i,x,y,l,r$ 的值，**均要异或你上一次输出的答案**（第一次询问操作前不异或）。我会保证解密后 $1\\le l\\le r\\le n$ 和 $1\\le i\\le n$，$1\\le y\\le x\\le n$ 的约束存在。", "outputFormat": "对每个询问操作，输出一行你的答案。", "hint": "对于所有测试数据，$1\\le n,q\\le 5\\times 10^5$，并且保证解密后的 $1\\le l\\le r\\le n$ 且 $1\\le i\\le n$，$1\\le y\\le x\\le n$。\n\n**本题采用捆绑测试，并开启子任务依赖。**\n\n- Subtask 0（5 points）：$n,q\\le 5\\times 10^3$。\n- Subtask 1（20 points）：无修改操作。 \n- Subtask 2（25 points）：满足特殊性质。\n- Subtask 3（20 points）：$n,q\\le 10^5$。\n- Subtask 4（30 points）：无特殊限制。\n\n特殊性质（数据随机）：操作类型、修改的位置、初始时和修改后的点的坐标和询问区间（参数 $(i,x,y),(l,r)$ 的值）在合法范围内独立地均匀随机生成。\n", "locale": "zh-CN"}}}
{"pid": "P11211", "type": "P", "difficulty": 6, "samples": [["1 10007\n\n4960", "\n?\n\n! 114"], ["2 10007\n\n4960\n\n6980", "\n?\n\n?\n\n! 514"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "交互题", "Special Judge", "O2优化", "中国剩余定理 CRT"], "title": "『STA - R8』随机数生成器", "background": "**Upd on 2024/10/22** 加入一组 Hack 数据（#13）", "description": "**这是一道交互题。**\n\nLloyd 有一个随机数生成器，对于随机种子 $s$ 和生成器类型 $t$，它第 $x$ 次（$x<p$）生成的随机数是：\n$$r_{s,t}(x)=\\begin{cases}s^x\\bmod p&t=1\\\\x^s\\bmod p&t=2\\end{cases}$$\n其中 $p$ 是一个固定素数。$0\\le s<p-1$。\n\n现在给定 $p,t$。已知随机数生成器在你询问之前已经生成过若干随机数，而在你生成随机数的时候不会有任何其他随机数生成访问（也就是你生成的是一段连续的随机数）。你每次可以调用随机数生成器来获取一个随机数，并且在若干次调用之后找出随机数种子 $s$ 的值。**保证有解且 5 次询问后一定能得到唯一的解。**\n\n***\n**实现细节**\n\n本题采用 IO 交互模式。\n\n第一行输入两个正整数 $t,p$。\n\n接下来，可以向交互库发送以下两种操作：\n- `?`，表示调用一次随机数生成器，随即你可以从标准输入中读入随机数生成器生成的数值。\n- `! s`，报告你发现的 $s$。\n\n发送 `!` 操作后你应该立即结束程序。另外在每一次操作后都需要清空缓冲区。评分方式见数据范围部分。\n\n如果你的操作不符合交互格式可能出现不可预料的结果。保证在交互次数不超过 19930（也就是至少可以获得 1 分）时交互库的运行时间不超过 100ms。对于 19930 之上的交互次数不保证交互库运行时间。", "inputFormat": "见题目描述中实现细节部分。", "outputFormat": "见题目描述中实现细节部分。", "hint": "**样例解释**\n\n样例仅供参考，不一定具有实际逻辑。\n\n第一组样例：$p=10007$，$s=114$，在询问之前生成过 $513$ 次随机数。\n\n第二组样例：$p=10007$，$s=514$，在询问之前生成过 $113$ 次随机数。\n***\n\n**数据范围**\n\n**本题采用捆绑测试。**（Subtask 分数为 Subtask 内各测试点分数之最小值）\n\n- Subtask 1 (20pts)：$t=1$。\n- Subtask 2 (20pts)：$p\\le 10^3$。\n- Subtask 3 (60pts)：无特殊限制。\n\n对于全部数据，$2\\le p\\le2\\times10^6$ 且 $p$ 是素数，$t\\in\\{1,2\\}$，保证有解。\n\n对于每个测试点，如果你向交互库发送了 $c$ 次 `?` 操作，那么你可以得到的分数由如下表达式给出：\n$$\\mathrm{score}=\\begin{cases}100&c\\le 5\\\\\\max\\{0,100-\\lceil10\\ln(c)\\rceil\\}&\\text{otherwise.}\\end{cases}$$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R8』随机数生成器", "background": "**Upd on 2024/10/22** 加入一组 Hack 数据（#13）", "description": "**这是一道交互题。**\n\nLloyd 有一个随机数生成器，对于随机种子 $s$ 和生成器类型 $t$，它第 $x$ 次（$x<p$）生成的随机数是：\n$$r_{s,t}(x)=\\begin{cases}s^x\\bmod p&t=1\\\\x^s\\bmod p&t=2\\end{cases}$$\n其中 $p$ 是一个固定素数。$0\\le s<p-1$。\n\n现在给定 $p,t$。已知随机数生成器在你询问之前已经生成过若干随机数，而在你生成随机数的时候不会有任何其他随机数生成访问（也就是你生成的是一段连续的随机数）。你每次可以调用随机数生成器来获取一个随机数，并且在若干次调用之后找出随机数种子 $s$ 的值。**保证有解且 5 次询问后一定能得到唯一的解。**\n\n***\n**实现细节**\n\n本题采用 IO 交互模式。\n\n第一行输入两个正整数 $t,p$。\n\n接下来，可以向交互库发送以下两种操作：\n- `?`，表示调用一次随机数生成器，随即你可以从标准输入中读入随机数生成器生成的数值。\n- `! s`，报告你发现的 $s$。\n\n发送 `!` 操作后你应该立即结束程序。另外在每一次操作后都需要清空缓冲区。评分方式见数据范围部分。\n\n如果你的操作不符合交互格式可能出现不可预料的结果。保证在交互次数不超过 19930（也就是至少可以获得 1 分）时交互库的运行时间不超过 100ms。对于 19930 之上的交互次数不保证交互库运行时间。", "inputFormat": "见题目描述中实现细节部分。", "outputFormat": "见题目描述中实现细节部分。", "hint": "**样例解释**\n\n样例仅供参考，不一定具有实际逻辑。\n\n第一组样例：$p=10007$，$s=114$，在询问之前生成过 $513$ 次随机数。\n\n第二组样例：$p=10007$，$s=514$，在询问之前生成过 $113$ 次随机数。\n***\n\n**数据范围**\n\n**本题采用捆绑测试。**（Subtask 分数为 Subtask 内各测试点分数之最小值）\n\n- Subtask 1 (20pts)：$t=1$。\n- Subtask 2 (20pts)：$p\\le 10^3$。\n- Subtask 3 (60pts)：无特殊限制。\n\n对于全部数据，$2\\le p\\le2\\times10^6$ 且 $p$ 是素数，$t\\in\\{1,2\\}$，保证有解。\n\n对于每个测试点，如果你向交互库发送了 $c$ 次 `?` 操作，那么你可以得到的分数由如下表达式给出：\n$$\\mathrm{score}=\\begin{cases}100&c\\le 5\\\\\\max\\{0,100-\\lceil10\\ln(c)\\rceil\\}&\\text{otherwise.}\\end{cases}$$", "locale": "zh-CN"}}}
{"pid": "P11212", "type": "P", "difficulty": 5, "samples": [["5\n5\n55\n555\n5555\n55555", "1\n3\n22\n93\n447"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "O2优化"], "title": "『STA - R8』挑战 Goldbach 猜想", "background": "", "description": "$q$ 次询问，每次给一个正整数 $n$，问有多少个不超过 $n$ 的正整数 $i$ 使得 $i$ 和 $n\\bmod i$ 都是质数。\n\n", "inputFormat": "第一行一个正整数 $q$。\n\n后 $q$ 行，每行一个正整数 $n$。", "outputFormat": "$q$ 行，每行回答一组询问。", "hint": "**本题采用捆绑测试。**\n\n数据范围：\n\n- Subtask 1 (30pts)：$q=1$。\n- Subtask 2 (70pts)：无特殊限制。\n\n对于全部数据，$1\\le n,q\\le2\\times10^5$。\n\n洛谷代码长度限制：50 KB。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R8』挑战 Goldbach 猜想", "background": "", "description": "$q$ 次询问，每次给一个正整数 $n$，问有多少个不超过 $n$ 的正整数 $i$ 使得 $i$ 和 $n\\bmod i$ 都是质数。\n\n", "inputFormat": "第一行一个正整数 $q$。\n\n后 $q$ 行，每行一个正整数 $n$。", "outputFormat": "$q$ 行，每行回答一组询问。", "hint": "**本题采用捆绑测试。**\n\n数据范围：\n\n- Subtask 1 (30pts)：$q=1$。\n- Subtask 2 (70pts)：无特殊限制。\n\n对于全部数据，$1\\le n,q\\le2\\times10^5$。\n\n洛谷代码长度限制：50 KB。", "locale": "zh-CN"}}}
{"pid": "P11213", "type": "P", "difficulty": 1, "samples": [["2\n5 2\n4 3\n", "6\n"], ["4\n5 1\n5 2\n5 3\n5 4\n", "8\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-J8-T1】竹竿", "background": "原题链接：<https://oier.team/problems/J8A>。", "description": "有 $n$ 根竹竿，第 $i$ 根竹竿的长度为 $a_i$，在距离一端的 $b_i$ 长度处有一个标记。\n\n现要将所有竹竿放在一条直线上，要求每根竹竿的**标记必须重合**。你可以左右调换每根竹竿的方向，使得这条直线被竹竿覆盖到的部分尽可能长。\n\n请求出被竹竿覆盖到的部分的最大长度。", "inputFormat": "第一行，一个正整数 $n$，表示竹竿的数量。\n\n接下来 $n$ 行，第 $i$ 行包含两个整数 $a_i, b_i$，描述第 $i$ 根竹竿。", "outputFormat": "仅一行一个正整数，表示被覆盖到的部分的最大长度。", "hint": "**【样例解释 \\#1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/crjj8h0g.png)\n\n**【样例 \\#3】**\n\n见附件中的 `bamboo/bamboo3.in` 与 `bamboo/bamboo3.ans`。\n\n该组样例满足测试点 $5 \\sim 6$ 的约束条件。\n\n**【样例 \\#4】**\n\n见附件中的 `bamboo/bamboo4.in` 与 `bamboo/bamboo4.ans`。\n\n该组样例满足测试点 $10$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $10$ 个测试点，每个 $10$ 分。\n\n|测试点编号|$n\\le$|$a_i\\le$|$b_i\\le$|\n| :-----------: | :-------------:|:-----------:|:-----------: |\n|$1\\sim2$|$10$|$10$|$10$|\n|$3\\sim4$|$2$|$10^9$|$10^9$|\n|$5\\sim6$|$1000$|$1000$|$1000$|\n|$7$|$10^5$|$10^9$|$0$|\n|$8\\sim 9$|$10^5$|$10^5$|$10^5$|\n|$10$|$10^5$|$10^9$|$10^9$|\n\n\n对于全部数据，保证：$2\\le n\\le 10^5$，$1\\le a_i\\le10^9$，$0\\le b_i\\le a_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J8-T1】竹竿", "background": "原题链接：<https://oier.team/problems/J8A>。", "description": "有 $n$ 根竹竿，第 $i$ 根竹竿的长度为 $a_i$，在距离一端的 $b_i$ 长度处有一个标记。\n\n现要将所有竹竿放在一条直线上，要求每根竹竿的**标记必须重合**。你可以左右调换每根竹竿的方向，使得这条直线被竹竿覆盖到的部分尽可能长。\n\n请求出被竹竿覆盖到的部分的最大长度。", "inputFormat": "第一行，一个正整数 $n$，表示竹竿的数量。\n\n接下来 $n$ 行，第 $i$ 行包含两个整数 $a_i, b_i$，描述第 $i$ 根竹竿。", "outputFormat": "仅一行一个正整数，表示被覆盖到的部分的最大长度。", "hint": "**【样例解释 \\#1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/crjj8h0g.png)\n\n**【样例 \\#3】**\n\n见附件中的 `bamboo/bamboo3.in` 与 `bamboo/bamboo3.ans`。\n\n该组样例满足测试点 $5 \\sim 6$ 的约束条件。\n\n**【样例 \\#4】**\n\n见附件中的 `bamboo/bamboo4.in` 与 `bamboo/bamboo4.ans`。\n\n该组样例满足测试点 $10$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $10$ 个测试点，每个 $10$ 分。\n\n|测试点编号|$n\\le$|$a_i\\le$|$b_i\\le$|\n| :-----------: | :-------------:|:-----------:|:-----------: |\n|$1\\sim2$|$10$|$10$|$10$|\n|$3\\sim4$|$2$|$10^9$|$10^9$|\n|$5\\sim6$|$1000$|$1000$|$1000$|\n|$7$|$10^5$|$10^9$|$0$|\n|$8\\sim 9$|$10^5$|$10^5$|$10^5$|\n|$10$|$10^5$|$10^9$|$10^9$|\n\n\n对于全部数据，保证：$2\\le n\\le 10^5$，$1\\le a_i\\le10^9$，$0\\le b_i\\le a_i$。", "locale": "zh-CN"}}}
{"pid": "P11214", "type": "P", "difficulty": 3, "samples": [["2\n6 6 \n2 3", "8"], ["2\n999999999 999999999\n500000000 500000000", "999999990"], ["3\n5 7 8\n4 5 2", "12"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "O2优化", "枚举", "排序", "梦熊比赛"], "title": "【MX-J8-T2】黑洞", "background": "原题链接：<https://oier.team/problems/J8B>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a8hxrkor.png)\n\n上图给出了二维下与红点在同一条对角线上的所有方格。\n\n考虑三维下的情况，下图给出了与红色方块在同一条对角线上的所有方块。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/56pkuoah.png)\n\n本题我们将会把对角线这个概念推广到 $n$ 维上。", "description": "已知一片 $n$ 维空间，第 $i$ 维的大小为 $m_i$。我们使用一个 $n$ 维坐标 $(x_1, x_2, \\dots, x_n)$ 表示这片 $n$ 维空间里的一个位置，其中 $x_i$ 为 $[1, m_i]$ 间的整数。\n\n在位置 $(a_1, a_2, \\dots, a_n)$ 处有一颗黑洞。这片 $n$ 维空间中所有与它在同一条对角线上的位置都将被吞噬：\n- 称位置 $(a_1, a_2, \\dots, a_n)$ 与 $(b_1, b_2, \\dots, b_n)$ 在同一条对角线上，当且仅当存在一个整数 $k \\geq 0$，使得对每个 $1 \\leq i \\leq n$，都有 $\\lvert a_i - b_i \\rvert = k$。\n\n你需要求出共有多少个位置会被黑洞吞噬（即与黑洞在同一条对角线上，包括黑洞所处位置本身）。答案对 $10^9 + 7$ 取模。", "inputFormat": "第一行，一个正整数 $n$，表示维度数。\n\n第二行，$n$ 个正整数 $m_1, \\dots, m_n$，表示每一维的大小。\n\n第三行，$n$ 个正整数 $a_1, \\dots, a_n$，表示黑洞的位置。", "outputFormat": "仅一行一个整数，表示该 $n$ 维空间中被黑洞吞噬的位置个数。答案对 $10^9 + 7$ 取模。", "hint": "**【样例解释 \\#1】**\n\n如题目背景中的图所示，其中红色圆形为黑洞所在位置，黑色方格为被黑洞吞噬的位置，共 $8$ 个。\n\n**【样例解释 \\#2】**\n\n有 $1999999997$ 个位置被黑洞吞噬，$1999999997$ 对 $10^9+7$ 取模的结果为 $999999990$。\n\n**【样例解释 \\#3】**\n\n如题目背景中的图所示，$(1,2,5)$，$(2,3,4)$，$(2,7,4)$，$(3,4,1)$，$(3,4,3)$，$(3,6,1)$，$(3,6,3)$，$(4,5,2)$，$(5,4,1)$，$(5,4,3)$，$(5,6,1)$，$(5,6,3)$ 共 $12$ 个位置被黑洞吞噬。\n\n**【样例 \\#4】**\n\n见附件中的 `hole/hole4.in` 与 `hole/hole4.ans`。\n\n该组样例满足测试点 $9 \\sim 10$ 的约束条件。\n\n**【样例 \\#5】**\n\n见附件中的 `hole/hole5.in` 与 `hole/hole5.ans`。\n\n该组样例满足测试点 $11 \\sim 13$ 的约束条件。\n\n**【样例 \\#6】**\n\n见附件中的 `hole/hole6.in` 与 `hole/hole6.ans`。\n\n该组样例满足测试点 $14 \\sim 19$ 的约束条件。\n\n**【样例 \\#7】**\n\n见附件中的 `hole/hole7.in` 与 `hole/hole7.ans`。\n\n该组样例满足测试点 $20 \\sim 25$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点，每个 $4$ 分。\n  \n|测试点编号|$n$|$m_i\\le$|\n| :-----------: | :-------------:|:-----------:|\n|$1\\sim2$|$=2$|$10^6$|\n|$3\\sim4$|$=2$|$10^9$|\n|$5\\sim6$|$=3$|$10^6$|\n|$7\\sim8$|$=3$|$10^9$|\n|$9\\sim10$|$\\le20$|$15$|\n|$11\\sim13$|$\\le20$|$10^9$|\n|$14\\sim19$|$\\le1000$|$10^9$|\n|$20\\sim25$|$\\le2\\times10^5$|$10^9$|\n\n对于全部数据，保证：$2\\le n\\le 2\\times10^5$，$1\\le a_i\\le m_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J8-T2】黑洞", "background": "原题链接：<https://oier.team/problems/J8B>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a8hxrkor.png)\n\n上图给出了二维下与红点在同一条对角线上的所有方格。\n\n考虑三维下的情况，下图给出了与红色方块在同一条对角线上的所有方块。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/56pkuoah.png)\n\n本题我们将会把对角线这个概念推广到 $n$ 维上。", "description": "已知一片 $n$ 维空间，第 $i$ 维的大小为 $m_i$。我们使用一个 $n$ 维坐标 $(x_1, x_2, \\dots, x_n)$ 表示这片 $n$ 维空间里的一个位置，其中 $x_i$ 为 $[1, m_i]$ 间的整数。\n\n在位置 $(a_1, a_2, \\dots, a_n)$ 处有一颗黑洞。这片 $n$ 维空间中所有与它在同一条对角线上的位置都将被吞噬：\n- 称位置 $(a_1, a_2, \\dots, a_n)$ 与 $(b_1, b_2, \\dots, b_n)$ 在同一条对角线上，当且仅当存在一个整数 $k \\geq 0$，使得对每个 $1 \\leq i \\leq n$，都有 $\\lvert a_i - b_i \\rvert = k$。\n\n你需要求出共有多少个位置会被黑洞吞噬（即与黑洞在同一条对角线上，包括黑洞所处位置本身）。答案对 $10^9 + 7$ 取模。", "inputFormat": "第一行，一个正整数 $n$，表示维度数。\n\n第二行，$n$ 个正整数 $m_1, \\dots, m_n$，表示每一维的大小。\n\n第三行，$n$ 个正整数 $a_1, \\dots, a_n$，表示黑洞的位置。", "outputFormat": "仅一行一个整数，表示该 $n$ 维空间中被黑洞吞噬的位置个数。答案对 $10^9 + 7$ 取模。", "hint": "**【样例解释 \\#1】**\n\n如题目背景中的图所示，其中红色圆形为黑洞所在位置，黑色方格为被黑洞吞噬的位置，共 $8$ 个。\n\n**【样例解释 \\#2】**\n\n有 $1999999997$ 个位置被黑洞吞噬，$1999999997$ 对 $10^9+7$ 取模的结果为 $999999990$。\n\n**【样例解释 \\#3】**\n\n如题目背景中的图所示，$(1,2,5)$，$(2,3,4)$，$(2,7,4)$，$(3,4,1)$，$(3,4,3)$，$(3,6,1)$，$(3,6,3)$，$(4,5,2)$，$(5,4,1)$，$(5,4,3)$，$(5,6,1)$，$(5,6,3)$ 共 $12$ 个位置被黑洞吞噬。\n\n**【样例 \\#4】**\n\n见附件中的 `hole/hole4.in` 与 `hole/hole4.ans`。\n\n该组样例满足测试点 $9 \\sim 10$ 的约束条件。\n\n**【样例 \\#5】**\n\n见附件中的 `hole/hole5.in` 与 `hole/hole5.ans`。\n\n该组样例满足测试点 $11 \\sim 13$ 的约束条件。\n\n**【样例 \\#6】**\n\n见附件中的 `hole/hole6.in` 与 `hole/hole6.ans`。\n\n该组样例满足测试点 $14 \\sim 19$ 的约束条件。\n\n**【样例 \\#7】**\n\n见附件中的 `hole/hole7.in` 与 `hole/hole7.ans`。\n\n该组样例满足测试点 $20 \\sim 25$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点，每个 $4$ 分。\n  \n|测试点编号|$n$|$m_i\\le$|\n| :-----------: | :-------------:|:-----------:|\n|$1\\sim2$|$=2$|$10^6$|\n|$3\\sim4$|$=2$|$10^9$|\n|$5\\sim6$|$=3$|$10^6$|\n|$7\\sim8$|$=3$|$10^9$|\n|$9\\sim10$|$\\le20$|$15$|\n|$11\\sim13$|$\\le20$|$10^9$|\n|$14\\sim19$|$\\le1000$|$10^9$|\n|$20\\sim25$|$\\le2\\times10^5$|$10^9$|\n\n对于全部数据，保证：$2\\le n\\le 2\\times10^5$，$1\\le a_i\\le m_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11215", "type": "P", "difficulty": 4, "samples": [["5 6 2 1 1\n2 1 3 3\n3 5 5 6\n1 1 5", "10"], ["3 3 0 3 1\n1 3 1\n2 1 1\n3 2 1\n", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "搜索", "O2优化", "队列", "梦熊比赛"], "title": "【MX-J8-T3】水星湖", "background": "原题链接：<https://oier.team/problems/J8C>。", "description": "有一个 $n\\times m$ 的矩形网格。用数对 $(x, y)$ 表示第 $x$ 行、第 $y$ 列的位置。\n\n网格内有 $q$ 片湖泊（$q$ 可能为 $0$），第 $i$ 片湖泊覆盖了左上角为 $(a_{i, 1}, b_{i, 1})$、右下角为 $(a_{i, 2}, b_{i, 2})$ 的矩形区域，这片区域里的所有位置都被称为湖泊。如果一个位置不属于任何一片湖泊，它就是陆地。湖泊两两不会重叠，但可能相邻。\n\n小 Y 会进行 $r$ 次种树。第 $i$ 次，他在第 $t_i$ 秒向 $(x_i, y_i)$ 里种下一棵树，保证该位置不为湖泊，且要么没有种下或生长过树，要么曾经种下或生长的树已经死亡。保证种树是按照时间顺序进行的，即 $t_1, t_2, \\dots, t_r$ 单调不降。\n\n每一秒，对于每个位置 $(x, y)$，若它同时满足如下所有条件，则会在 $(x, y)$ 处生长出一棵树：\n- 它是一块无树存活的陆地；\n- 它与一块湖泊**相邻**；\n- 它**在前一秒**与一棵存活的树**相邻**。\n\n（上述所说的**相邻**是在四连通意义下的，即位置 $(x_1, y_1)$ 和 $(x_2, y_2)$ 相邻当且仅当 $\\lvert x_1 - x_2 \\rvert + \\lvert y_1 - y_2 \\rvert = 1$。）\n\n如果一棵树在存活**大于 $\\bm k$ 秒**后（以其被种下或生长出来时开始计算），与其相邻的所有位置**均为无树存活的陆地**，则它会死亡。\n\n小 Y 想要知道：经过充分多时间后（也即，经过足够多的时间，使得网格内不会有新的位置长出树，也不会有旧的树死去的状态下），网格内最终会有多少棵树。", "inputFormat": "第一行，五个整数 $n, m, q, r, k$。\n\n接下来 $q$ 行，每行四个正整数 $a_{i, 1}, b_{i, 1}, a_{i, 2}, b_{i, 2}$，描述第 $i$ 片湖泊的位置。保证湖泊两两不会重叠。\n\n接下来 $r$ 行，每行三个正整数 $t_i, x_i, y_i$，分别表示第 $i$ 棵树被种下的秒数和行列位置。保证 $t_1, t_2, \\dots, t_r$ 单调不降。", "outputFormat": "仅一行一个整数，表示经过充分多时间后，网格内最终会有多少棵树。", "hint": "**【样例解释 \\#1】**\n\n如图所示，为经过充分多时间后网格中的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kdlmoo7p.png)\n\n网格内不会有新的位置长出树，也不会有旧的树死去，所以经过充分多时间后，网格内有 $10$ 棵树。\n\n**【样例解释 \\#2】**\n\n在这一组数据中，所有位置都是陆地，没有湖泊。\n\n第 $1$ 秒时，第一棵树在 $(3, 1)$ 被种下。\n\n第 $2$ 秒时，第二棵树在 $(1, 1)$ 被种下。紧接着，第一棵树已存活 $> 1$ 秒，且与其相邻的所有位置均为没有存活的树的陆地，因此死亡。\n\n第 $3$ 秒时，第三棵树在 $(2, 1)$ 被种下。紧接着，第二棵树已存活 $> 1$ 秒，而此时第三棵树与其相邻，因此不死亡。\n\n随后，网格内不会有新的位置长出树，也不会有旧的树死去。所以经过充分多时间后，网格内有 $2$ 棵树。\n\n**【样例 \\#3】**\n\n见附件中的 `lake/lake3.in` 与 `lake/lake3.ans`。\n\n该组样例满足测试点 $4 \\sim 7$ 的约束条件。\n\n**【样例 \\#4】**\n\n见附件中的 `lake/lake4.in` 与 `lake/lake4.ans`。\n\n该组样例满足测试点 $8 \\sim 10$ 的约束条件。\n\n**【样例 \\#5】**\n\n见附件中的 `lake/lake5.in` 与 `lake/lake5.ans`。\n\n该组样例满足测试点 $13 \\sim 15$ 的约束条件。\n\n**【样例 \\#6】**\n\n见附件中的 `lake/lake6.in` 与 `lake/lake6.ans`。\n\n该组样例满足测试点 $16 \\sim 20$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $20$ 个测试点，每个 $5$ 分。\n\n|测试点编号|$n,m\\le$|$q\\le$|$r\\le$|$t_i,k\\le$|\n| :-----------: | :-------------:|:-----------: |:-----------: |:-----------: |\n|$1\\sim3$|$10$|$10$|$10$|$10$|\n|$4\\sim7$|$50$|$100$|$1000$|$1000$|\n|$8\\sim 10$|$3000$|$0$|$10^5$|$10^9$|\n|$11\\sim12$|$3000$|$10^5$|$1$|$10^9$|\n|$13\\sim15$|$1000$|$10^5$|$10^5$|$12$|\n|$16\\sim20$|$3000$|$10^5$|$10^5$|$10^9$|\n\n对于全部数据，保证：\n- $1 \\leq n, m \\leq 3000$；\n- $0 \\leq q \\leq 10^5$；\n- $1 \\leq a_{i, 1} \\le a_{i, 2} \\leq n$，$1 \\leq b_{i, 1} \\le b_{i, 2} \\leq m$；\n- 湖泊两两不会重叠；\n- $1 \\leq r \\leq 10^5$；\n- $1 \\leq t_1 \\leq t_2 \\leq \\dots \\leq t_r \\leq 10^9$；\n- $1 \\leq x_i \\leq n$，$1 \\leq y_i \\leq m$；\n- 位置 $(x_i, y_i)$ 不是湖泊且无树存活；\n- $1 \\leq k \\leq 10^9$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J8-T3】水星湖", "background": "原题链接：<https://oier.team/problems/J8C>。", "description": "有一个 $n\\times m$ 的矩形网格。用数对 $(x, y)$ 表示第 $x$ 行、第 $y$ 列的位置。\n\n网格内有 $q$ 片湖泊（$q$ 可能为 $0$），第 $i$ 片湖泊覆盖了左上角为 $(a_{i, 1}, b_{i, 1})$、右下角为 $(a_{i, 2}, b_{i, 2})$ 的矩形区域，这片区域里的所有位置都被称为湖泊。如果一个位置不属于任何一片湖泊，它就是陆地。湖泊两两不会重叠，但可能相邻。\n\n小 Y 会进行 $r$ 次种树。第 $i$ 次，他在第 $t_i$ 秒向 $(x_i, y_i)$ 里种下一棵树，保证该位置不为湖泊，且要么没有种下或生长过树，要么曾经种下或生长的树已经死亡。保证种树是按照时间顺序进行的，即 $t_1, t_2, \\dots, t_r$ 单调不降。\n\n每一秒，对于每个位置 $(x, y)$，若它同时满足如下所有条件，则会在 $(x, y)$ 处生长出一棵树：\n- 它是一块无树存活的陆地；\n- 它与一块湖泊**相邻**；\n- 它**在前一秒**与一棵存活的树**相邻**。\n\n（上述所说的**相邻**是在四连通意义下的，即位置 $(x_1, y_1)$ 和 $(x_2, y_2)$ 相邻当且仅当 $\\lvert x_1 - x_2 \\rvert + \\lvert y_1 - y_2 \\rvert = 1$。）\n\n如果一棵树在存活**大于 $\\bm k$ 秒**后（以其被种下或生长出来时开始计算），与其相邻的所有位置**均为无树存活的陆地**，则它会死亡。\n\n小 Y 想要知道：经过充分多时间后（也即，经过足够多的时间，使得网格内不会有新的位置长出树，也不会有旧的树死去的状态下），网格内最终会有多少棵树。", "inputFormat": "第一行，五个整数 $n, m, q, r, k$。\n\n接下来 $q$ 行，每行四个正整数 $a_{i, 1}, b_{i, 1}, a_{i, 2}, b_{i, 2}$，描述第 $i$ 片湖泊的位置。保证湖泊两两不会重叠。\n\n接下来 $r$ 行，每行三个正整数 $t_i, x_i, y_i$，分别表示第 $i$ 棵树被种下的秒数和行列位置。保证 $t_1, t_2, \\dots, t_r$ 单调不降。", "outputFormat": "仅一行一个整数，表示经过充分多时间后，网格内最终会有多少棵树。", "hint": "**【样例解释 \\#1】**\n\n如图所示，为经过充分多时间后网格中的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kdlmoo7p.png)\n\n网格内不会有新的位置长出树，也不会有旧的树死去，所以经过充分多时间后，网格内有 $10$ 棵树。\n\n**【样例解释 \\#2】**\n\n在这一组数据中，所有位置都是陆地，没有湖泊。\n\n第 $1$ 秒时，第一棵树在 $(3, 1)$ 被种下。\n\n第 $2$ 秒时，第二棵树在 $(1, 1)$ 被种下。紧接着，第一棵树已存活 $> 1$ 秒，且与其相邻的所有位置均为没有存活的树的陆地，因此死亡。\n\n第 $3$ 秒时，第三棵树在 $(2, 1)$ 被种下。紧接着，第二棵树已存活 $> 1$ 秒，而此时第三棵树与其相邻，因此不死亡。\n\n随后，网格内不会有新的位置长出树，也不会有旧的树死去。所以经过充分多时间后，网格内有 $2$ 棵树。\n\n**【样例 \\#3】**\n\n见附件中的 `lake/lake3.in` 与 `lake/lake3.ans`。\n\n该组样例满足测试点 $4 \\sim 7$ 的约束条件。\n\n**【样例 \\#4】**\n\n见附件中的 `lake/lake4.in` 与 `lake/lake4.ans`。\n\n该组样例满足测试点 $8 \\sim 10$ 的约束条件。\n\n**【样例 \\#5】**\n\n见附件中的 `lake/lake5.in` 与 `lake/lake5.ans`。\n\n该组样例满足测试点 $13 \\sim 15$ 的约束条件。\n\n**【样例 \\#6】**\n\n见附件中的 `lake/lake6.in` 与 `lake/lake6.ans`。\n\n该组样例满足测试点 $16 \\sim 20$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $20$ 个测试点，每个 $5$ 分。\n\n|测试点编号|$n,m\\le$|$q\\le$|$r\\le$|$t_i,k\\le$|\n| :-----------: | :-------------:|:-----------: |:-----------: |:-----------: |\n|$1\\sim3$|$10$|$10$|$10$|$10$|\n|$4\\sim7$|$50$|$100$|$1000$|$1000$|\n|$8\\sim 10$|$3000$|$0$|$10^5$|$10^9$|\n|$11\\sim12$|$3000$|$10^5$|$1$|$10^9$|\n|$13\\sim15$|$1000$|$10^5$|$10^5$|$12$|\n|$16\\sim20$|$3000$|$10^5$|$10^5$|$10^9$|\n\n对于全部数据，保证：\n- $1 \\leq n, m \\leq 3000$；\n- $0 \\leq q \\leq 10^5$；\n- $1 \\leq a_{i, 1} \\le a_{i, 2} \\leq n$，$1 \\leq b_{i, 1} \\le b_{i, 2} \\leq m$；\n- 湖泊两两不会重叠；\n- $1 \\leq r \\leq 10^5$；\n- $1 \\leq t_1 \\leq t_2 \\leq \\dots \\leq t_r \\leq 10^9$；\n- $1 \\leq x_i \\leq n$，$1 \\leq y_i \\leq m$；\n- 位置 $(x_i, y_i)$ 不是湖泊且无树存活；\n- $1 \\leq k \\leq 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P11216", "type": "P", "difficulty": 6, "samples": [["5 71\n3 4\n4 3\n4 4\n4 5\n5 6\n", "8\n0\n12\n34\n20\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "O2优化", "区间 DP", "动态规划优化", "前缀和", "梦熊比赛"], "title": "【MX-J8-T4】2048", "background": "原题链接：<https://oier.team/problems/J8D>。\n\n---\n\n[《2048》](https://2048game.com/)是一款非常好玩，火爆全球的小游戏。", "description": "现在，小 Y 把《2048》稍做修改，得到如下的一维变种（其中部分规则可能与你对《2048》的印象相悖，请以下文为准）：\n\n- 游戏在一行 $n$ 个格子组成的网格中进行。每个格子要么为空，要么包含一个带有正整数权值的方块。\n- 游戏开始时，会在一个任意的格子上生成一个权值为 $2$ 的方块，其他格子为空。\n- 玩家通过向左（或右，下同）滑动进行操作。每次操作：\n  1. 所有方块将全部靠左（或右）堆叠放置，彼此紧贴，不留空位。\n  2. 如果堆叠完毕后，存在相邻的两个方块权值相等，设其权值均为 $k$，则消除这两个方块，并在原先其中一个方块的位置生成一个权值为 $2k$ 的方块（这称作一次合并）（**可以证明，在该游戏过程中不会存在连续 $\\bm 3$ 个相邻方块权值相等，因此不需要考虑合并顺序的问题**），随后所有方块继续向左（或右）堆叠，直到不存在能合并的情况为止。\n  3. 最后，在最右（或左）端，即滑动方向的相反方向，生成一个权值为 $2$ 的新方块。\n\n下图展示了一次向左滑动操作的示例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d7qp6f1i.png)\n\n- 如下定义一个方块的**出现时间**：\n  - 设它被生成时，游戏进行的轮数（即玩家进行滑动操作的次数）为 $i$（包括当前操作）。\n  - 如果该方块是被合并生成的，令它的出现时间为 $2 i$；\n  - 否则该方块是新生成的，令它的出现时间为 $2 i + 1$；\n  - 如果该方块是游戏最开始时生成的权值为 $2$ 的方块，令它的出现时间为 $1$。\n  - 可以证明，按如上定义的出现时间满足：在游戏进行的任意时刻下，任意两个不同方块的出现时间均不同。\n- 游戏的目标是生成 $2^x$，因此在游戏的任何过程中，一旦出现了 $2^x$，游戏立刻结束，且游戏胜利。\n- 如果一次滑动操作的步骤 2 结束时，所有 $n$ 个格子全都包含方块（事实上，这次滑动操作是滑不动的，但仍然认为是一次滑动操作），则步骤 3 中无法正常生成新方块，不会进行步骤 3，且游戏失败。\n\n小 Y 正在研究这个新 2048 游戏的所有失败状态的个数。具体地，在游戏失败时，两个失败状态 A 和 \nB 被认为**本质相同**，当且仅当以下条件同时成立：\n\n- 对每个 $1 \\leq i \\leq n$，A 中方块 $i$ 和 B 中方块 $i$ 的权值均相同；\n- 对每对 $1 \\le i < j \\le n$，A 中的方块 $i$ 与方块 $j$ 的出现时间的大小关系，与 B 中的方块 $i$ 与方块 $j$ 的出现时间的大小关系相同。\n\n小 Y 想要知道，总共有多少种**本质不同**的失败状态。答案对给定模数 $p$ 取模（$p$ 未必为素数）。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，两个正整数 $T, p$，分别表示数据组数和模数。对于每组数据：\n\n- 仅一行，两个整数 $n, x$。", "outputFormat": "对于每组数据：\n\n- 仅一行一个正整数，表示本质不同的失败状态数，答案对 $p$ 取模。", "hint": "**【样例解释 \\#1】**\n\n对于第一组数据，$n = 3$，$x = 4$：\n- 仅从网格状态上看，共有 $6$ 种失败的可能性：$[8, 4, 2], [2, 4, 8], [2, 8, 4], [4, 8, 2], [2, 8, 2],[2, 4, 2]$。\n  - 但考虑 $[2, 8, 2]$，其可以对应两种本质不同的失败状态：\n    - 中间的 $8$ 先被生成，随后左边的 $2$ 生成，随后右边的 $2$ 生成；\n    - 中间的 $8$ 先被生成，随后右边的 $2$ 生成，随后左边的 $2$ 生成。\n  - 对于 $[2, 4, 2]$ 也是同理。\n- 对于其它的可能性，可以证明其只能对应一种本质不同的失败状态。\n- 所以，答案为 $1 + 1 + 1 + 1 + 2 + 2 = 8$，在模 $71$ 意义下为 $8$。\n\n对于第二组数据，$n = 4$，$x = 3$：\n- 可以证明，无论如何，游戏都将胜利，因此不存在任何失败状态，答案为 $0$。\n\n对于第三组数据，$n = 4$，$x = 4$：\n- 仅从网格状态上看，共有 $4$ 种失败的可能性：$[2, 8, 4, 2], [2, 4, 8, 2], [4, 8, 4, 2],[2, 4, 8, 4]$。\n- 其中，$[2, 8, 4, 2]$ 和 $[2, 4, 8, 2]$ 分别对应 $4$ 种本质不同的失败情况，$[4, 8, 4, 2]$ 和 $[2, 4, 8, 4]$ 分别对应 $2$ 种本质不同的失败情况。\n  - 以 $[2, 8, 4, 2]$ 为例，下面列举该局面对应的 $4$ 种本质不同的失败情况（操作方式不唯一，数字上面的小数字表示出现时间）：\n    $$ \\begin{aligned} & [\\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}] & & [\\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}] & & [\\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}] & & [\\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}] \\\\ \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}3\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}3\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}3\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}3\\hspace{3.84625mu}}{2}] \\\\ \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{R}}\\to& [\\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}] \\\\ \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}7\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}7\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}7\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}7\\hspace{3.84625mu}}{2}] \\\\ \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{R}}\\to& [\\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{3.84625mu}7\\hspace{3.84625mu}}{2}, \\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}] \\\\ \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{11}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{11}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{\\hspace{15.385mu}}{}, \\overset{11}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{10}{8}, \\overset{\\hspace{15.385mu}}{}, \\overset{11}{2}] \\\\ \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{12}{4}, \\overset{\\hspace{15.385mu}}{}, \\overset{13}{2}] & \\stackrel{\\text{R}}\\to& [\\overset{13}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{12}{4}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{11}{2}, \\overset{13}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{10}{8}, \\overset{11}{2}, \\overset{13}{2}] \\\\ \\stackrel{\\text{R}}\\to& [\\overset{15}{2}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{12}{4}, \\overset{13}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{13}{2}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{12}{4}, \\overset{15}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{14}{4}, \\overset{15}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{10}{8}, \\overset{14}{4}, \\overset{15}{2}] \\end{aligned} $$\n    对这 $4$ 种情况，出现时间的大小关系（离散化后）分别为 $[4, 1, 2, 3]$、$[3, 1, 2, 4]$、$[2, 1, 3, 4]$、$[1, 2, 3, 4]$。\n- 所以，答案为 $4 + 4 + 2 + 2 = 12$，在模 $71$ 意义下为 $12$。\n\n对于第四组数据，$n = 4$，$x = 5$：\n- 可以证明答案为 $34$，在模 $71$ 意义下为 $34$。\n\n对于第五组数据，$n = 5$，$x = 6$：\n- 可以证明答案为 $162$，在模 $71$ 意义下为 $20$。\n\n**【样例 \\#2】**\n\n见附件中的 `game/game2.in` 与 `game/game2.ans`。\n\n该组样例满足测试点 $3 \\sim 5$ 的约束条件。\n\n**【样例 \\#3】**\n\n见附件中的 `game/game3.in` 与 `game/game3.ans`。\n\n该组样例满足测试点 $6 \\sim 10$ 的约束条件。\n\n**【样例 \\#4】**\n\n见附件中的 `game/game4.in` 与 `game/game4.ans`。\n\n该组样例满足测试点 $14 \\sim 17$ 的约束条件。\n\n**【样例 \\#5】**\n\n见附件中的 `game/game5.in` 与 `game/game5.ans`。\n\n该组样例满足测试点 $22 \\sim 25$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点，每个 $4$ 分。\n\n|测试点编号|$T \\le$|$n,x \\le$|特殊性质|\n| :-----------: | :-------------:|:-----------:|:-----------: |\n|$1\\sim2$|$10$|$4$|无\n|$3\\sim5$|$10$|$10$|无\n|$6\\sim10$|$10$|$22$|无\n|$11\\sim13$|$1$|$80$|无\n|$14\\sim17$|$1000$|$80$|无\n|$18\\sim20$|$1$|$300$|无\n|$21$|$10^5$|$300$| $p = 2$ |\n|$22\\sim25$|$10^5$|$300$|无\n\n\n对于全部数据，保证：$1\\le T\\le 10^5$，$1\\le n,x\\le 300$，$2\\le p\\le10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J8-T4】2048", "background": "原题链接：<https://oier.team/problems/J8D>。\n\n---\n\n[《2048》](https://2048game.com/)是一款非常好玩，火爆全球的小游戏。", "description": "现在，小 Y 把《2048》稍做修改，得到如下的一维变种（其中部分规则可能与你对《2048》的印象相悖，请以下文为准）：\n\n- 游戏在一行 $n$ 个格子组成的网格中进行。每个格子要么为空，要么包含一个带有正整数权值的方块。\n- 游戏开始时，会在一个任意的格子上生成一个权值为 $2$ 的方块，其他格子为空。\n- 玩家通过向左（或右，下同）滑动进行操作。每次操作：\n  1. 所有方块将全部靠左（或右）堆叠放置，彼此紧贴，不留空位。\n  2. 如果堆叠完毕后，存在相邻的两个方块权值相等，设其权值均为 $k$，则消除这两个方块，并在原先其中一个方块的位置生成一个权值为 $2k$ 的方块（这称作一次合并）（**可以证明，在该游戏过程中不会存在连续 $\\bm 3$ 个相邻方块权值相等，因此不需要考虑合并顺序的问题**），随后所有方块继续向左（或右）堆叠，直到不存在能合并的情况为止。\n  3. 最后，在最右（或左）端，即滑动方向的相反方向，生成一个权值为 $2$ 的新方块。\n\n下图展示了一次向左滑动操作的示例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d7qp6f1i.png)\n\n- 如下定义一个方块的**出现时间**：\n  - 设它被生成时，游戏进行的轮数（即玩家进行滑动操作的次数）为 $i$（包括当前操作）。\n  - 如果该方块是被合并生成的，令它的出现时间为 $2 i$；\n  - 否则该方块是新生成的，令它的出现时间为 $2 i + 1$；\n  - 如果该方块是游戏最开始时生成的权值为 $2$ 的方块，令它的出现时间为 $1$。\n  - 可以证明，按如上定义的出现时间满足：在游戏进行的任意时刻下，任意两个不同方块的出现时间均不同。\n- 游戏的目标是生成 $2^x$，因此在游戏的任何过程中，一旦出现了 $2^x$，游戏立刻结束，且游戏胜利。\n- 如果一次滑动操作的步骤 2 结束时，所有 $n$ 个格子全都包含方块（事实上，这次滑动操作是滑不动的，但仍然认为是一次滑动操作），则步骤 3 中无法正常生成新方块，不会进行步骤 3，且游戏失败。\n\n小 Y 正在研究这个新 2048 游戏的所有失败状态的个数。具体地，在游戏失败时，两个失败状态 A 和 \nB 被认为**本质相同**，当且仅当以下条件同时成立：\n\n- 对每个 $1 \\leq i \\leq n$，A 中方块 $i$ 和 B 中方块 $i$ 的权值均相同；\n- 对每对 $1 \\le i < j \\le n$，A 中的方块 $i$ 与方块 $j$ 的出现时间的大小关系，与 B 中的方块 $i$ 与方块 $j$ 的出现时间的大小关系相同。\n\n小 Y 想要知道，总共有多少种**本质不同**的失败状态。答案对给定模数 $p$ 取模（$p$ 未必为素数）。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，两个正整数 $T, p$，分别表示数据组数和模数。对于每组数据：\n\n- 仅一行，两个整数 $n, x$。", "outputFormat": "对于每组数据：\n\n- 仅一行一个正整数，表示本质不同的失败状态数，答案对 $p$ 取模。", "hint": "**【样例解释 \\#1】**\n\n对于第一组数据，$n = 3$，$x = 4$：\n- 仅从网格状态上看，共有 $6$ 种失败的可能性：$[8, 4, 2], [2, 4, 8], [2, 8, 4], [4, 8, 2], [2, 8, 2],[2, 4, 2]$。\n  - 但考虑 $[2, 8, 2]$，其可以对应两种本质不同的失败状态：\n    - 中间的 $8$ 先被生成，随后左边的 $2$ 生成，随后右边的 $2$ 生成；\n    - 中间的 $8$ 先被生成，随后右边的 $2$ 生成，随后左边的 $2$ 生成。\n  - 对于 $[2, 4, 2]$ 也是同理。\n- 对于其它的可能性，可以证明其只能对应一种本质不同的失败状态。\n- 所以，答案为 $1 + 1 + 1 + 1 + 2 + 2 = 8$，在模 $71$ 意义下为 $8$。\n\n对于第二组数据，$n = 4$，$x = 3$：\n- 可以证明，无论如何，游戏都将胜利，因此不存在任何失败状态，答案为 $0$。\n\n对于第三组数据，$n = 4$，$x = 4$：\n- 仅从网格状态上看，共有 $4$ 种失败的可能性：$[2, 8, 4, 2], [2, 4, 8, 2], [4, 8, 4, 2],[2, 4, 8, 4]$。\n- 其中，$[2, 8, 4, 2]$ 和 $[2, 4, 8, 2]$ 分别对应 $4$ 种本质不同的失败情况，$[4, 8, 4, 2]$ 和 $[2, 4, 8, 4]$ 分别对应 $2$ 种本质不同的失败情况。\n  - 以 $[2, 8, 4, 2]$ 为例，下面列举该局面对应的 $4$ 种本质不同的失败情况（操作方式不唯一，数字上面的小数字表示出现时间）：\n    $$ \\begin{aligned} & [\\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}] & & [\\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}] & & [\\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}] & & [\\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}] \\\\ \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}3\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}3\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}3\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}1\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}3\\hspace{3.84625mu}}{2}] \\\\ \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{R}}\\to& [\\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}] \\\\ \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}7\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}7\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}7\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}7\\hspace{3.84625mu}}{2}] \\\\ \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}] & \\stackrel{\\text{R}}\\to& [\\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{\\hspace{3.84625mu}4\\hspace{3.84625mu}}{4}, \\overset{\\hspace{3.84625mu}7\\hspace{3.84625mu}}{2}, \\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}] \\\\ \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{11}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{11}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{\\hspace{15.385mu}}{}, \\overset{11}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{10}{8}, \\overset{\\hspace{15.385mu}}{}, \\overset{11}{2}] \\\\ \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{12}{4}, \\overset{\\hspace{15.385mu}}{}, \\overset{13}{2}] & \\stackrel{\\text{R}}\\to& [\\overset{13}{2}, \\overset{\\hspace{15.385mu}}{}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{12}{4}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{11}{2}, \\overset{13}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{10}{8}, \\overset{11}{2}, \\overset{13}{2}] \\\\ \\stackrel{\\text{R}}\\to& [\\overset{15}{2}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{12}{4}, \\overset{13}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{13}{2}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{12}{4}, \\overset{15}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}9\\hspace{3.84625mu}}{2}, \\overset{\\hspace{3.84625mu}8\\hspace{3.84625mu}}{8}, \\overset{14}{4}, \\overset{15}{2}] & \\stackrel{\\text{L}}\\to& [\\overset{\\hspace{3.84625mu}5\\hspace{3.84625mu}}{2}, \\overset{10}{8}, \\overset{14}{4}, \\overset{15}{2}] \\end{aligned} $$\n    对这 $4$ 种情况，出现时间的大小关系（离散化后）分别为 $[4, 1, 2, 3]$、$[3, 1, 2, 4]$、$[2, 1, 3, 4]$、$[1, 2, 3, 4]$。\n- 所以，答案为 $4 + 4 + 2 + 2 = 12$，在模 $71$ 意义下为 $12$。\n\n对于第四组数据，$n = 4$，$x = 5$：\n- 可以证明答案为 $34$，在模 $71$ 意义下为 $34$。\n\n对于第五组数据，$n = 5$，$x = 6$：\n- 可以证明答案为 $162$，在模 $71$ 意义下为 $20$。\n\n**【样例 \\#2】**\n\n见附件中的 `game/game2.in` 与 `game/game2.ans`。\n\n该组样例满足测试点 $3 \\sim 5$ 的约束条件。\n\n**【样例 \\#3】**\n\n见附件中的 `game/game3.in` 与 `game/game3.ans`。\n\n该组样例满足测试点 $6 \\sim 10$ 的约束条件。\n\n**【样例 \\#4】**\n\n见附件中的 `game/game4.in` 与 `game/game4.ans`。\n\n该组样例满足测试点 $14 \\sim 17$ 的约束条件。\n\n**【样例 \\#5】**\n\n见附件中的 `game/game5.in` 与 `game/game5.ans`。\n\n该组样例满足测试点 $22 \\sim 25$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点，每个 $4$ 分。\n\n|测试点编号|$T \\le$|$n,x \\le$|特殊性质|\n| :-----------: | :-------------:|:-----------:|:-----------: |\n|$1\\sim2$|$10$|$4$|无\n|$3\\sim5$|$10$|$10$|无\n|$6\\sim10$|$10$|$22$|无\n|$11\\sim13$|$1$|$80$|无\n|$14\\sim17$|$1000$|$80$|无\n|$18\\sim20$|$1$|$300$|无\n|$21$|$10^5$|$300$| $p = 2$ |\n|$22\\sim25$|$10^5$|$300$|无\n\n\n对于全部数据，保证：$1\\le T\\le 10^5$，$1\\le n,x\\le 300$，$2\\le p\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P11217", "type": "P", "difficulty": 4, "samples": [["6 4 75\n9 1 4 5 1 4\n1 1 1\n3 5 3\n3 5 1\n3 5 3\n", "11\n9\n8\n8\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "二分", "O2优化", "梦熊比赛"], "title": "【MX-S4-T1】「yyOI R2」youyou 的垃圾桶", "background": "原题链接：<https://oier.team/problems/S4A>。", "description": "现在有 $n$ 个垃圾桶，它们对 youyou 发起攻击。第 $i$ 个垃圾桶的初始攻击力为正整数 $a_i$。youyou 的初始生命值为正整数 $W$。\n\n定义如下流程为一场战斗：\n\n- 从第 $1$ 个垃圾桶开始，每个垃圾桶依次进行攻击。第 $i$ 个垃圾桶发起攻击时，youyou 的生命值 $W$ 减去 $a_i$，然后本次战斗第 $i$ 个垃圾桶的攻击力 $a_i$ 翻倍。在第 $n$ 个垃圾桶攻击完后，重复执行此流程。\n\n当 $W\\le 0$ 时，也即 youyou 死亡时，本场战斗立刻结束。然后重置 youyou 的生命值 $W$ 以及所有垃圾桶的攻击力 $a_i$ 为本场战斗之前的值。\n\n定义本次战斗的评分为受到垃圾桶攻击的次数（不包括恰好使 youyou 死亡的垃圾桶的攻击）。\n\n现在一共要进行 $q$ 场战斗，每场战斗给出三个数 $l,r,d$，表示先对第 $[l,r]$ 只垃圾桶进行强化，使这些垃圾桶的初始攻击力 $a_i$ 增加 $d$，然后进行一场战斗。你需要告诉 youyou 此次战斗的评分。\n\n**每场战斗前对垃圾桶初始攻击力的增加会对之后所有的战斗产生影响。**", "inputFormat": "第一行为三个整数 $n,q,W$，分别表示垃圾桶个数、战斗次数、生命值。\n\n第二行为 $n$ 个整数，第 $i$ 个数表示进行所有战斗之前第 $i$ 个垃圾桶的攻击力 $a_i$。\n\n下面 $q$ 行，第 $i$ 行为三个整数 $l,r,d$，表示第 $i$ 场战斗前强化的参数。", "outputFormat": "输出共 $q$ 行，第 $i$ 行输出一个数 $s_i$ 表示第 $i$ 次战斗的评分。", "hint": "**【样例解释 #1】**\n\n四场战斗前的强化分别是：\n\n- 对 $[1,1]$ 的垃圾桶增加 $1$ 点攻击力。\n- 对 $[3,5]$ 的垃圾桶增加 $3$ 点攻击力。\n- 对 $[3,5]$ 的垃圾桶增加 $1$ 点攻击力。\n- 对 $[3,5]$ 的垃圾桶增加 $3$ 点攻击力。\n\n第一场战斗，垃圾桶的初始攻击力分别为 $10,1,4,5,1,4$。\n\nyouyou 首先分别依次受到这些垃圾桶的攻击各一次，此时剩余生命值 $50$。垃圾桶攻击力变为 $20,2,8,10,2,8$。\n\n接着 youyou 受到第一只垃圾桶的攻击，剩余生命值为 $30$。\n\n受到第二只垃圾桶攻击，剩余生命值 $28$。\n\n受到第三只垃圾桶攻击，剩余生命值 $20$。\n\n依次类推，受到第六只垃圾桶攻击时，剩余生命值为 $0$。因为不包括致命攻击，所以共接受了 $6+5=11$ 次攻击。\n\n第二场战斗，垃圾桶的初始攻击力分别为 $10,1,7,8,4,4$。\n\n第三场战斗，垃圾桶的初始攻击力分别为 $10,1,8,9,5,4$。\n\n第四场战斗，垃圾桶的初始攻击力分别为 $10,1,11,12,8,4$。\n\n可以得出第 $2\\sim 4$ 场战斗的评分分别为 $9,8,8$。\n\n\n\n**【样例 #2】**\n\n见附件中的 ```wxyt/wxyt2.in``` 与 ```wxyt/wxyt2.ans```。\n\n该组样例满足测试点 $1\\sim 4$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 ```wxyt/wxyt3.in``` 与 ```wxyt/wxyt3.ans```。\n\n该组样例满足测试点 $13\\sim 14$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 ```wxyt/wxyt4.in``` 与 ```wxyt/wxyt4.ans```。\n\n该组样例满足测试点 $15\\sim 20$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $20$ 个测试点，每个 $5$ 分。\n\n| 测试点编号 | $n$ | $q$ |\n| :-----------: | :-----------: | :-----------: |\n| $1 \\sim 4$ | $\\le 2 \\times 10^5$ | $\\le 10$ |  \n| $5 \\sim 7$ | $\\le 2 \\times 10^5$ | $\\le 10^3$ |\n| $8 \\sim 10$ | $\\le 2 \\times 10^5$ | $\\le 10^5$ | \n| $11 \\sim 12$ | $\\le 3 \\times 10^3$ | $\\le 10^5$ |\n| $13 \\sim 14$ | $\\le 3 \\times 10^3$ | $\\le10^6$ |\n| $15 \\sim 20$ | $\\le 2 \\times 10^5$ | $\\le10^6$ |\n\n对于全部数据，保证：$1 \\le n \\le 2 \\times 10^5$，$1 \\le q \\le 10^6$，$1 \\le W \\le 10^{18}$，$1 \\le a_i \\le 10^{6}$，$1 \\le l \\le r \\le n$，$1 \\le d \\le 2^{15}$。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S4-T1】「yyOI R2」youyou 的垃圾桶", "background": "原题链接：<https://oier.team/problems/S4A>。", "description": "现在有 $n$ 个垃圾桶，它们对 youyou 发起攻击。第 $i$ 个垃圾桶的初始攻击力为正整数 $a_i$。youyou 的初始生命值为正整数 $W$。\n\n定义如下流程为一场战斗：\n\n- 从第 $1$ 个垃圾桶开始，每个垃圾桶依次进行攻击。第 $i$ 个垃圾桶发起攻击时，youyou 的生命值 $W$ 减去 $a_i$，然后本次战斗第 $i$ 个垃圾桶的攻击力 $a_i$ 翻倍。在第 $n$ 个垃圾桶攻击完后，重复执行此流程。\n\n当 $W\\le 0$ 时，也即 youyou 死亡时，本场战斗立刻结束。然后重置 youyou 的生命值 $W$ 以及所有垃圾桶的攻击力 $a_i$ 为本场战斗之前的值。\n\n定义本次战斗的评分为受到垃圾桶攻击的次数（不包括恰好使 youyou 死亡的垃圾桶的攻击）。\n\n现在一共要进行 $q$ 场战斗，每场战斗给出三个数 $l,r,d$，表示先对第 $[l,r]$ 只垃圾桶进行强化，使这些垃圾桶的初始攻击力 $a_i$ 增加 $d$，然后进行一场战斗。你需要告诉 youyou 此次战斗的评分。\n\n**每场战斗前对垃圾桶初始攻击力的增加会对之后所有的战斗产生影响。**", "inputFormat": "第一行为三个整数 $n,q,W$，分别表示垃圾桶个数、战斗次数、生命值。\n\n第二行为 $n$ 个整数，第 $i$ 个数表示进行所有战斗之前第 $i$ 个垃圾桶的攻击力 $a_i$。\n\n下面 $q$ 行，第 $i$ 行为三个整数 $l,r,d$，表示第 $i$ 场战斗前强化的参数。", "outputFormat": "输出共 $q$ 行，第 $i$ 行输出一个数 $s_i$ 表示第 $i$ 次战斗的评分。", "hint": "**【样例解释 #1】**\n\n四场战斗前的强化分别是：\n\n- 对 $[1,1]$ 的垃圾桶增加 $1$ 点攻击力。\n- 对 $[3,5]$ 的垃圾桶增加 $3$ 点攻击力。\n- 对 $[3,5]$ 的垃圾桶增加 $1$ 点攻击力。\n- 对 $[3,5]$ 的垃圾桶增加 $3$ 点攻击力。\n\n第一场战斗，垃圾桶的初始攻击力分别为 $10,1,4,5,1,4$。\n\nyouyou 首先分别依次受到这些垃圾桶的攻击各一次，此时剩余生命值 $50$。垃圾桶攻击力变为 $20,2,8,10,2,8$。\n\n接着 youyou 受到第一只垃圾桶的攻击，剩余生命值为 $30$。\n\n受到第二只垃圾桶攻击，剩余生命值 $28$。\n\n受到第三只垃圾桶攻击，剩余生命值 $20$。\n\n依次类推，受到第六只垃圾桶攻击时，剩余生命值为 $0$。因为不包括致命攻击，所以共接受了 $6+5=11$ 次攻击。\n\n第二场战斗，垃圾桶的初始攻击力分别为 $10,1,7,8,4,4$。\n\n第三场战斗，垃圾桶的初始攻击力分别为 $10,1,8,9,5,4$。\n\n第四场战斗，垃圾桶的初始攻击力分别为 $10,1,11,12,8,4$。\n\n可以得出第 $2\\sim 4$ 场战斗的评分分别为 $9,8,8$。\n\n\n\n**【样例 #2】**\n\n见附件中的 ```wxyt/wxyt2.in``` 与 ```wxyt/wxyt2.ans```。\n\n该组样例满足测试点 $1\\sim 4$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 ```wxyt/wxyt3.in``` 与 ```wxyt/wxyt3.ans```。\n\n该组样例满足测试点 $13\\sim 14$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 ```wxyt/wxyt4.in``` 与 ```wxyt/wxyt4.ans```。\n\n该组样例满足测试点 $15\\sim 20$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $20$ 个测试点，每个 $5$ 分。\n\n| 测试点编号 | $n$ | $q$ |\n| :-----------: | :-----------: | :-----------: |\n| $1 \\sim 4$ | $\\le 2 \\times 10^5$ | $\\le 10$ |  \n| $5 \\sim 7$ | $\\le 2 \\times 10^5$ | $\\le 10^3$ |\n| $8 \\sim 10$ | $\\le 2 \\times 10^5$ | $\\le 10^5$ | \n| $11 \\sim 12$ | $\\le 3 \\times 10^3$ | $\\le 10^5$ |\n| $13 \\sim 14$ | $\\le 3 \\times 10^3$ | $\\le10^6$ |\n| $15 \\sim 20$ | $\\le 2 \\times 10^5$ | $\\le10^6$ |\n\n对于全部数据，保证：$1 \\le n \\le 2 \\times 10^5$，$1 \\le q \\le 10^6$，$1 \\le W \\le 10^{18}$，$1 \\le a_i \\le 10^{6}$，$1 \\le l \\le r \\le n$，$1 \\le d \\le 2^{15}$。 ", "locale": "zh-CN"}}}
{"pid": "P11218", "type": "P", "difficulty": 5, "samples": [["0 2\n5 2\n11110\n01001\n7 1\n1110000\n0001111", "2\n4\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "博弈论", "O2优化", "连通块", "梦熊比赛"], "title": "【MX-S4-T2】「yyOI R2」youyou 不喜欢夏天", "background": "原题链接：<https://oier.team/problems/S4B>。", "description": "youyou 有一个大小为 $2 \\times n $ 的网格，每个格子可能是黑色或者白色。\n\n现在 youyou 和 yy 要在这个网格上玩一个游戏：\n\n- youyou 先选取出一个可以为空的**连通块**。\n- 之后 yy 可以选择网格中最多 $m$ 列，将这些列上下行的格子颜色互换。\n\n定义一个格子集合 $S$ 为一个连通块，当且仅当 $S$ 中任意两个格子可以通过集合 $S$ 内**边相邻**的若干个格子连通（即四连通）。\n\nyouyou 希望最大化最终连通块中黑色格子减白色格子的数量，而 yy 希望最小化之。\n\n现在 youyou 希望你求出：在双方都采用最优策略的情况下，最终连通块黑色格子减白色格子的数量是多少？\n", "inputFormat": "**本题有多组测试数据**。\n\n第一行为两个整数 $c,T$，分别表示测试点编号和数据组数，$c = 0$ 表示该测试点为样例。\n\n对于每一组测试数据，第一行为两个整数 $n,m$，表示给定网格图的列数和交换次数。\n\n接下来两行，每行用一个长度为 $n$ 的 $01$ 串表示每个对应位置网格的颜色，其中 $1$ 表示黑色格子，$0$ 表示白色格子。", "outputFormat": "对于每一组测试数据，输出一行一个数，表示最终黑色格子减白色格子的数量。", "hint": "**【样例解释 \\#1】**\n\n下文中记 $(x,y)$ 表示第 $x$ 行第 $y$ 列的格子。\n\n对于第一组数据，youyou 选择 $(1,2)$ 和 $(2,2)$ 两个格子，无论 yy 怎么交换，最终黑色格子和白色格子数量的差至少为 $2$。可以证明没有更优的解。\n\n对于第二组数据，youyou 选择 $(1,1),(1,2),(1,3),(1,4),(2,4),(2,5),(2,6),(2,7)$ 八个格子，无论 yy 怎么交换，最终黑色格子和白色格子数量的差至少为 $4$。可以证明没有更优的解。\n\n**【样例 #2】**\n\n见附件中的 ```summer/summer2.in``` 与 ```summer/summer2.ans```。\n\n该组样例满足测试点 $4\\sim 7$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 ```summer/summer3.in``` 与 ```summer/summer3.ans```。\n\n该组样例满足测试点 $10\\sim 11$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 ```summer/summer4.in``` 与 ```summer/summer4.ans```。\n\n\n对于第一组测试数据，其满足特殊性质 A。\n\n对于第二组测试数据，其满足特殊性质 B 和 C。\n\n对于第三组测试数据，其满足特殊性质 B。\n\n对于第四组测试数据，其满足特殊性质 C。\n\n对于第五组测试数据，其满足特殊性质 D。\n\n该组样例满足 $T=5$，$\\sum n \\le 2\\times10^6$。\n\n**【样例 #5】**\n\n见附件中的 ```summer/summer5.in``` 与 ```summer/summer5.ans```。\n\n该组样例满足测试点 $23 \\sim 25$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点，每个 $4$ 分。\n\n|  测试点编号  |         $\\sum n$         | 特殊性质 |\n| :----------: | :-----------------: | :------: |\n|  $1 \\sim 3$  |      $\\le 18$       |    无    |\n|  $4 \\sim 7$  |      $\\le 100$      |    无    |\n| $8 \\sim 9$  | $\\le10^3$ |    无    |\n| $10 \\sim 11$  | $\\le2\\times10^5$ |    无    |\n| $12 \\sim 13$ | $\\le 2 \\times 10^6$ |    A|\n| $14 \\sim 15$ | $\\le 2 \\times 10^6$ |    B 和 C|\n| $16 \\sim 17$ |     $\\le 2 \\times 10^6$   |  B  |\n| $18 \\sim 19$ |    $\\le 2 \\times 10^6$    |  C  |\n| $20 \\sim 22$ |     $\\le 2 \\times 10^6$   |  D  |\n| $23 \\sim 25$  | $\\le 2 \\times 10^6$ |    无    |\n\n特殊性质 A：保证不存在任何一列，使得上下两格为一黑一白。  \n特殊性质 B：保证不存在任何一列，使得上下两格均为黑色。  \n特殊性质 C：保证不存在任何一列，使得上下两格均为白色。  \n特殊性质 D：保证对于任意位置，其颜色在黑白中等概率随机生成。\n\n对于全部数据，保证：$1\\le T \\le 5$，$1 \\le m \\le n \\le 2\\times 10^6$，$\\sum{n}\\le 2\\times10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S4-T2】「yyOI R2」youyou 不喜欢夏天", "background": "原题链接：<https://oier.team/problems/S4B>。", "description": "youyou 有一个大小为 $2 \\times n $ 的网格，每个格子可能是黑色或者白色。\n\n现在 youyou 和 yy 要在这个网格上玩一个游戏：\n\n- youyou 先选取出一个可以为空的**连通块**。\n- 之后 yy 可以选择网格中最多 $m$ 列，将这些列上下行的格子颜色互换。\n\n定义一个格子集合 $S$ 为一个连通块，当且仅当 $S$ 中任意两个格子可以通过集合 $S$ 内**边相邻**的若干个格子连通（即四连通）。\n\nyouyou 希望最大化最终连通块中黑色格子减白色格子的数量，而 yy 希望最小化之。\n\n现在 youyou 希望你求出：在双方都采用最优策略的情况下，最终连通块黑色格子减白色格子的数量是多少？\n", "inputFormat": "**本题有多组测试数据**。\n\n第一行为两个整数 $c,T$，分别表示测试点编号和数据组数，$c = 0$ 表示该测试点为样例。\n\n对于每一组测试数据，第一行为两个整数 $n,m$，表示给定网格图的列数和交换次数。\n\n接下来两行，每行用一个长度为 $n$ 的 $01$ 串表示每个对应位置网格的颜色，其中 $1$ 表示黑色格子，$0$ 表示白色格子。", "outputFormat": "对于每一组测试数据，输出一行一个数，表示最终黑色格子减白色格子的数量。", "hint": "**【样例解释 \\#1】**\n\n下文中记 $(x,y)$ 表示第 $x$ 行第 $y$ 列的格子。\n\n对于第一组数据，youyou 选择 $(1,2)$ 和 $(2,2)$ 两个格子，无论 yy 怎么交换，最终黑色格子和白色格子数量的差至少为 $2$。可以证明没有更优的解。\n\n对于第二组数据，youyou 选择 $(1,1),(1,2),(1,3),(1,4),(2,4),(2,5),(2,6),(2,7)$ 八个格子，无论 yy 怎么交换，最终黑色格子和白色格子数量的差至少为 $4$。可以证明没有更优的解。\n\n**【样例 #2】**\n\n见附件中的 ```summer/summer2.in``` 与 ```summer/summer2.ans```。\n\n该组样例满足测试点 $4\\sim 7$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 ```summer/summer3.in``` 与 ```summer/summer3.ans```。\n\n该组样例满足测试点 $10\\sim 11$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 ```summer/summer4.in``` 与 ```summer/summer4.ans```。\n\n\n对于第一组测试数据，其满足特殊性质 A。\n\n对于第二组测试数据，其满足特殊性质 B 和 C。\n\n对于第三组测试数据，其满足特殊性质 B。\n\n对于第四组测试数据，其满足特殊性质 C。\n\n对于第五组测试数据，其满足特殊性质 D。\n\n该组样例满足 $T=5$，$\\sum n \\le 2\\times10^6$。\n\n**【样例 #5】**\n\n见附件中的 ```summer/summer5.in``` 与 ```summer/summer5.ans```。\n\n该组样例满足测试点 $23 \\sim 25$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点，每个 $4$ 分。\n\n|  测试点编号  |         $\\sum n$         | 特殊性质 |\n| :----------: | :-----------------: | :------: |\n|  $1 \\sim 3$  |      $\\le 18$       |    无    |\n|  $4 \\sim 7$  |      $\\le 100$      |    无    |\n| $8 \\sim 9$  | $\\le10^3$ |    无    |\n| $10 \\sim 11$  | $\\le2\\times10^5$ |    无    |\n| $12 \\sim 13$ | $\\le 2 \\times 10^6$ |    A|\n| $14 \\sim 15$ | $\\le 2 \\times 10^6$ |    B 和 C|\n| $16 \\sim 17$ |     $\\le 2 \\times 10^6$   |  B  |\n| $18 \\sim 19$ |    $\\le 2 \\times 10^6$    |  C  |\n| $20 \\sim 22$ |     $\\le 2 \\times 10^6$   |  D  |\n| $23 \\sim 25$  | $\\le 2 \\times 10^6$ |    无    |\n\n特殊性质 A：保证不存在任何一列，使得上下两格为一黑一白。  \n特殊性质 B：保证不存在任何一列，使得上下两格均为黑色。  \n特殊性质 C：保证不存在任何一列，使得上下两格均为白色。  \n特殊性质 D：保证对于任意位置，其颜色在黑白中等概率随机生成。\n\n对于全部数据，保证：$1\\le T \\le 5$，$1 \\le m \\le n \\le 2\\times 10^6$，$\\sum{n}\\le 2\\times10^6$。", "locale": "zh-CN"}}}
{"pid": "P11219", "type": "P", "difficulty": 6, "samples": [["5 3 4 2 2 3\n1 0 0 1 1\n2 1 5\n1 3 3\n2 1 5", "cont\ntetris\n"], ["8 6 10 3 5 2\n0 1 0 0 1 0 0 1\n2 1 7\n1 4 2\n2 5 7\n1 5 1\n1 7 2\n2 1 8", "cont\ncont\ntetris\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "线段树", "树状数组", "O2优化", "梦熊比赛"], "title": "【MX-S4-T3】「yyOI R2」youyou 的序列 II", "background": "原题链接：<https://oier.team/problems/S4C>。", "description": "给定一个长度为 $n$ 的非负整数序列 $a$，初始时所有数均被标记为**蓝色**，youyou 和 yy 轮流对序列 $a$ 进行操作，由 youyou 开始。\n\n- 如果当前是 youyou 的回合，那么他可以选择一个长度至多为 $c_1$ 的区间，如果该区间内所有数的和小于等于 $w_1$，则标记该区间所有数为**红色**。\n\n- 如果当前是 yy 的回合，那么他可以选择一个长度至多为 $c_2$ 的区间，如果该区间内所有数的和大于 $w_2$，则标记该区间所有数为**蓝色**。\n\n如果当前操作方没有可操作的区间，他将跳过本回合。\n\n定义 youyou 胜利即是在游戏任意时刻，所有数都被标记为红色。定义 yy 胜利则是在 $10^{51971}$ 个回合内，youyou 无法胜利。两者都会以最优策略进行游戏。\n\n但是他们认为这个游戏太简单了，于是决定上上强度。\n\n现在给定 $q$ 个操作，对于每个操作给定三个数 $opt,x,y$。\n\n- 如果 $opt$ 为 $1$，表示将 $a_x$ 增加 $y$（$0\\le y \\le 10^9$）。\n- 如果 $opt$ 为 $2$，表示 youyou 和 yy 将在区间 $[x,y]$ 所形成的序列上进行一轮游戏。\n\n对于每个 $opt=2$ 的操作，请你求出在区间 $[x,y]$ 所形成的序列上进行游戏，youyou 能否获得胜利。如果 youyou 能胜利，输出 ```cont```；否则，输出 ```tetris```。\n", "inputFormat": "第一行，六个整数 $n,q,c_1,c_2,w_1,w_2$，其中 $n$ 为序列长度，$q$ 为操作个数，$c_1,c_2,w_1,w_2$ 的定义在题目描述中给出。\n\n第二行，$n$ 个整数 $a_1, a_2, \\ldots, a_n$。\n\n接下来 $q$ 行，每行三个整数 $opt,x,y$，表示一个操作，操作的定义在上面已给出。", "outputFormat": "对于每一个 $opt=2$ 的操作，输出一行表示答案。\n", "hint": "**【样例解释 #1】**\n\n第一次游戏在序列 $[1,0,0,1,1]$ 上进行。\n\n回合 $1$：youyou 将区间 $[1,3]$ 内的数染红。\n\n回合 $2$：yy 没有可操作的区间，**跳过**了本回合。\n\n回合 $3$：youyou 将区间 $[4,5]$ 内的数染红。\n\n此时所有数都被染红，youyou 获胜，输出  ```cont```。\n\n第二次游戏在序列 $[1,0,3,1,1]$ 上进行。\n\n容易发现，此时 youyou 无法获胜，输出 ```tetris```。\n\n\n**【样例 #3】**\n\n见附件中的 ```seq/seq3.in``` 与 ```seq/seq3.ans```。\n\n该组样例满足测试点 $5\\sim 8$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 ```seq/seq4.in``` 与 ```seq/seq4.ans```。\n\n该组样例满足测试点 $9\\sim10$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 ```seq/seq5.in``` 与 ```seq/seq5.ans```。\n\n该组样例满足测试点 $11\\sim 14$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $20$ 个测试点，每个 $5$ 分。\n\n|  测试点编号  |          $n$          |         $q$         |  特殊性质  |\n| :----------: | :-------------------: | :-----------------: | :--------: |\n|  $1\\sim 4$   |       $\\le10^2$       | $\\le 3 \\times 10^2$ | A |\n|  $5 \\sim 8$  |       $\\le10^3$       | $\\le 3 \\times 10^3$ | B |\n| $9 \\sim 10$  |       $\\le10^4$       | $\\le 3 \\times 10^4$ | C |\n| $11 \\sim 14$ |     $\\le  10 ^ 5$     | $\\le 3 \\times 10^5$ | D |\n| $15\\sim 20$  | $\\le 3 \\times 10 ^ 5$ | $\\le 3 \\times 10^5$ |     无     |\n\n特殊性质 A：$c_2 > n$，$w_2 = 0$。  \n特殊性质 B：$w_1 \\le w_2$。  \n特殊性质 C：$c_1 \\le c_2$。  \n特殊性质 D：$c_1,c_2 \\le 10^3$。\n\n对于全部数据，保证：\n- $1\\le n,q,c_1,c_2\\le 3\\times10^5$。\n- $0\\le a_i,w_1,w_2\\le 10^9$。\n- $opt\\in \\{1,2\\}$。\n- 对于 $opt=1$ 的操作，$1\\leq x\\leq n$，$0\\leq y\\leq 10^9$。\n- 对于 $opt=2$ 的操作，$1\\leq x\\leq y\\leq n$。\n- 至少有一个 $2$ 类操作。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S4-T3】「yyOI R2」youyou 的序列 II", "background": "原题链接：<https://oier.team/problems/S4C>。", "description": "给定一个长度为 $n$ 的非负整数序列 $a$，初始时所有数均被标记为**蓝色**，youyou 和 yy 轮流对序列 $a$ 进行操作，由 youyou 开始。\n\n- 如果当前是 youyou 的回合，那么他可以选择一个长度至多为 $c_1$ 的区间，如果该区间内所有数的和小于等于 $w_1$，则标记该区间所有数为**红色**。\n\n- 如果当前是 yy 的回合，那么他可以选择一个长度至多为 $c_2$ 的区间，如果该区间内所有数的和大于 $w_2$，则标记该区间所有数为**蓝色**。\n\n如果当前操作方没有可操作的区间，他将跳过本回合。\n\n定义 youyou 胜利即是在游戏任意时刻，所有数都被标记为红色。定义 yy 胜利则是在 $10^{51971}$ 个回合内，youyou 无法胜利。两者都会以最优策略进行游戏。\n\n但是他们认为这个游戏太简单了，于是决定上上强度。\n\n现在给定 $q$ 个操作，对于每个操作给定三个数 $opt,x,y$。\n\n- 如果 $opt$ 为 $1$，表示将 $a_x$ 增加 $y$（$0\\le y \\le 10^9$）。\n- 如果 $opt$ 为 $2$，表示 youyou 和 yy 将在区间 $[x,y]$ 所形成的序列上进行一轮游戏。\n\n对于每个 $opt=2$ 的操作，请你求出在区间 $[x,y]$ 所形成的序列上进行游戏，youyou 能否获得胜利。如果 youyou 能胜利，输出 ```cont```；否则，输出 ```tetris```。\n", "inputFormat": "第一行，六个整数 $n,q,c_1,c_2,w_1,w_2$，其中 $n$ 为序列长度，$q$ 为操作个数，$c_1,c_2,w_1,w_2$ 的定义在题目描述中给出。\n\n第二行，$n$ 个整数 $a_1, a_2, \\ldots, a_n$。\n\n接下来 $q$ 行，每行三个整数 $opt,x,y$，表示一个操作，操作的定义在上面已给出。", "outputFormat": "对于每一个 $opt=2$ 的操作，输出一行表示答案。\n", "hint": "**【样例解释 #1】**\n\n第一次游戏在序列 $[1,0,0,1,1]$ 上进行。\n\n回合 $1$：youyou 将区间 $[1,3]$ 内的数染红。\n\n回合 $2$：yy 没有可操作的区间，**跳过**了本回合。\n\n回合 $3$：youyou 将区间 $[4,5]$ 内的数染红。\n\n此时所有数都被染红，youyou 获胜，输出  ```cont```。\n\n第二次游戏在序列 $[1,0,3,1,1]$ 上进行。\n\n容易发现，此时 youyou 无法获胜，输出 ```tetris```。\n\n\n**【样例 #3】**\n\n见附件中的 ```seq/seq3.in``` 与 ```seq/seq3.ans```。\n\n该组样例满足测试点 $5\\sim 8$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 ```seq/seq4.in``` 与 ```seq/seq4.ans```。\n\n该组样例满足测试点 $9\\sim10$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 ```seq/seq5.in``` 与 ```seq/seq5.ans```。\n\n该组样例满足测试点 $11\\sim 14$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $20$ 个测试点，每个 $5$ 分。\n\n|  测试点编号  |          $n$          |         $q$         |  特殊性质  |\n| :----------: | :-------------------: | :-----------------: | :--------: |\n|  $1\\sim 4$   |       $\\le10^2$       | $\\le 3 \\times 10^2$ | A |\n|  $5 \\sim 8$  |       $\\le10^3$       | $\\le 3 \\times 10^3$ | B |\n| $9 \\sim 10$  |       $\\le10^4$       | $\\le 3 \\times 10^4$ | C |\n| $11 \\sim 14$ |     $\\le  10 ^ 5$     | $\\le 3 \\times 10^5$ | D |\n| $15\\sim 20$  | $\\le 3 \\times 10 ^ 5$ | $\\le 3 \\times 10^5$ |     无     |\n\n特殊性质 A：$c_2 > n$，$w_2 = 0$。  \n特殊性质 B：$w_1 \\le w_2$。  \n特殊性质 C：$c_1 \\le c_2$。  \n特殊性质 D：$c_1,c_2 \\le 10^3$。\n\n对于全部数据，保证：\n- $1\\le n,q,c_1,c_2\\le 3\\times10^5$。\n- $0\\le a_i,w_1,w_2\\le 10^9$。\n- $opt\\in \\{1,2\\}$。\n- 对于 $opt=1$ 的操作，$1\\leq x\\leq n$，$0\\leq y\\leq 10^9$。\n- 对于 $opt=2$ 的操作，$1\\leq x\\leq y\\leq n$。\n- 至少有一个 $2$ 类操作。", "locale": "zh-CN"}}}
{"pid": "P11220", "type": "P", "difficulty": 6, "samples": [["4 3", "20\n20\n20\n20\n20"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-S4-T4】「yyOI R2」youyou 的三进制数", "background": "原题链接：<https://oier.team/problems/S4D>。", "description": "现在有 $0 \\sim n$ 共 $n + 1$ 个数。\n定义 $(x)_{3}$ 表示十进制数 $x$ 的三进制形式。**如果没有特别强调，那么这些数均为十进制形式。**\n\nyouyou 想构造一个序列长度为 $p$（$p \\ge 1$）的非负整数序列 $a$。使之满足：\n\n- $a_i \\in [0,n]$。\n- 不存在 $i,j$（$1 \\le i <j \\le p$），使得 $a_i = a_j$。\n- 对于任意 $1 \\le i < n$，$a_i$ 与 $a_{i+1}$ 至少满足以下四个条件中的一个：\n  1. $(a_i)_3$ 去掉最后一位，恰好等于 $(a_{i+1})_3$（若只有一位，则去掉后的数字为 $0$）。\n  2. 在 $(a_i)_3$ 末尾添上某一位 $t(0 \\le t \\le 2)$，恰好等于 $(a_{i+1})_3$（若 $a_i = 0$，则添加后舍去前置 $0$）。\n  3. $a_i \\le w$， $(a_i)_3$ 的末尾不是 $0$，且将末尾的一位数字移到开头与 $(a_{i + 1})_3$ 相等。\n  4. 当 $(a_i)_3$ 长度 $\\ge 2$，且 $(a_i)_3$ 次高位非零时，将 $(a_i)_3$ 开头的一位数字移到末尾，形成的数的十进制值 $\\le w$，且恰好等于 $(a_{i+1})_3$。\n\n这样的序列 $a$ 被称为“完美的”。\n\nyouyou 认为，如果十进制三元组 $(x,y,z)$ 是好的，必须满足以下条件：\n\n- $0 \\le x,y,z \\le n$，$x \\neq y$。\n- 存在至少一个”完美的“序列 $b$，使得十进制下有 $b_1=x$，$b_s = y$。其中 $s$ 为序列长度。\n- 存在至少一个”完美的”序列 $c$，使得十进制下有 $c_1=z$。同时，对于上述**任意的** $b$，均有**恰好**一对 $(i, j)$，满足 $1 \\le i \\le |b|$，$1 \\le j \\le |c|$，使得 $b_i = c_j$。\n\n对于每一个 $0 \\le z \\le n$，求能构成“好的”三元组 $(x,y,z)$ 的有序对 $(x,y)$ 的个数。", "inputFormat": "仅一行，为一个正整数 $n$ 和一个非负整数 $w$，其含义在题目描述中给出。", "outputFormat": "共 $n + 1$ 行，其中第 $i + 1$ 行一个数表示当 $z = i$ 时，能构成“好的”三元组 $(x,y,z)$ 的有序对 $(x,y)$ 的个数。", "hint": "**【样例解释 #1】**\n\n一共有 $5$ 个数，用三进制表示分别为 $0,1,2,10,11$。\n\n当 $z = 0,1,2,3,4$ 时，全部 $(x,y)(x \\neq y)$ 数对均满足题意。\n\n下面给出三元组 $(2,3,1)$ 是“好的”的证明。\n\n当 $x=2,y=3,z=1$ 时，序列 $b$ 可以为 $\\{2,0,1,3\\}$。\n\n其中 $b_1,b_2$ 满足条件 $1$，$b_2,b_3$ 满足条件 $2$，$b_3,b_4$ 满足条件 $2$。\n\n可以证明只有这一个序列 $b$ 满足题意。因此，存在 $c = \\{1\\}$，使得 $B \\cap C = \\{1\\}$。所以 $(2,3,1)$ 是“好的”三元组。\n\n**【样例 #2】**\n\n见附件中的 ```ternary/ternary2.in``` 与 ```ternary/ternary2.ans```。\n\n该组样例满足测试点 $4\\sim 6$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 ```ternary/ternary3.in``` 与 ```ternary/ternary3.ans```。\n\n该组样例满足测试点 $7\\sim 10$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 ```ternary/ternary4.in``` 与 ```ternary/ternary4.ans```。\n\n该组样例满足测试点 $13\\sim 15$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 ```ternary/ternary5.in``` 与 ```ternary/ternary5.ans```。\n\n该组样例满足测试点 $20\\sim 25$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点，每个 $4$ 分。\n\n| 测试点编号 | $n$ | $w$ | 特殊性质\n| :-----------: | :-----------: | :-----------: | :-----------: | \n| $1 \\sim 3$ | $\\le 18$ | $\\le 18$ | 无\n| $4 \\sim 6$ | $\\le 242$ | $\\le 242$ |  无\n| $7 \\sim 10$ | $\\le 6560$ | $\\le6560$ |  无\n| $11\\sim12$ | $\\le 10^5$ | $\\le 10^5$ |  无\n| $13\\sim15$ | $\\le 3 \\times 10^5$ | $\\le 10^5$ | 有 |\n| $16\\sim 17$ | $\\le 3 \\times 10^5$ | $=0$ | 无 |\n| $18\\sim 19$ | $\\le 3 \\times 10^5$ | $=n$ |  无 |\n| $20\\sim25$ | $\\le 3 \\times 10^5$ | $\\le 3 \\times 10^5$ |  无 |\n\n特殊性质：$w \\ge 10^4$。\n\n对于全部数据，保证：$1\\le n \\le 3 \\times 10^5$，$0 \\le w \\le n$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S4-T4】「yyOI R2」youyou 的三进制数", "background": "原题链接：<https://oier.team/problems/S4D>。", "description": "现在有 $0 \\sim n$ 共 $n + 1$ 个数。\n定义 $(x)_{3}$ 表示十进制数 $x$ 的三进制形式。**如果没有特别强调，那么这些数均为十进制形式。**\n\nyouyou 想构造一个序列长度为 $p$（$p \\ge 1$）的非负整数序列 $a$。使之满足：\n\n- $a_i \\in [0,n]$。\n- 不存在 $i,j$（$1 \\le i <j \\le p$），使得 $a_i = a_j$。\n- 对于任意 $1 \\le i < n$，$a_i$ 与 $a_{i+1}$ 至少满足以下四个条件中的一个：\n  1. $(a_i)_3$ 去掉最后一位，恰好等于 $(a_{i+1})_3$（若只有一位，则去掉后的数字为 $0$）。\n  2. 在 $(a_i)_3$ 末尾添上某一位 $t(0 \\le t \\le 2)$，恰好等于 $(a_{i+1})_3$（若 $a_i = 0$，则添加后舍去前置 $0$）。\n  3. $a_i \\le w$， $(a_i)_3$ 的末尾不是 $0$，且将末尾的一位数字移到开头与 $(a_{i + 1})_3$ 相等。\n  4. 当 $(a_i)_3$ 长度 $\\ge 2$，且 $(a_i)_3$ 次高位非零时，将 $(a_i)_3$ 开头的一位数字移到末尾，形成的数的十进制值 $\\le w$，且恰好等于 $(a_{i+1})_3$。\n\n这样的序列 $a$ 被称为“完美的”。\n\nyouyou 认为，如果十进制三元组 $(x,y,z)$ 是好的，必须满足以下条件：\n\n- $0 \\le x,y,z \\le n$，$x \\neq y$。\n- 存在至少一个”完美的“序列 $b$，使得十进制下有 $b_1=x$，$b_s = y$。其中 $s$ 为序列长度。\n- 存在至少一个”完美的”序列 $c$，使得十进制下有 $c_1=z$。同时，对于上述**任意的** $b$，均有**恰好**一对 $(i, j)$，满足 $1 \\le i \\le |b|$，$1 \\le j \\le |c|$，使得 $b_i = c_j$。\n\n对于每一个 $0 \\le z \\le n$，求能构成“好的”三元组 $(x,y,z)$ 的有序对 $(x,y)$ 的个数。", "inputFormat": "仅一行，为一个正整数 $n$ 和一个非负整数 $w$，其含义在题目描述中给出。", "outputFormat": "共 $n + 1$ 行，其中第 $i + 1$ 行一个数表示当 $z = i$ 时，能构成“好的”三元组 $(x,y,z)$ 的有序对 $(x,y)$ 的个数。", "hint": "**【样例解释 #1】**\n\n一共有 $5$ 个数，用三进制表示分别为 $0,1,2,10,11$。\n\n当 $z = 0,1,2,3,4$ 时，全部 $(x,y)(x \\neq y)$ 数对均满足题意。\n\n下面给出三元组 $(2,3,1)$ 是“好的”的证明。\n\n当 $x=2,y=3,z=1$ 时，序列 $b$ 可以为 $\\{2,0,1,3\\}$。\n\n其中 $b_1,b_2$ 满足条件 $1$，$b_2,b_3$ 满足条件 $2$，$b_3,b_4$ 满足条件 $2$。\n\n可以证明只有这一个序列 $b$ 满足题意。因此，存在 $c = \\{1\\}$，使得 $B \\cap C = \\{1\\}$。所以 $(2,3,1)$ 是“好的”三元组。\n\n**【样例 #2】**\n\n见附件中的 ```ternary/ternary2.in``` 与 ```ternary/ternary2.ans```。\n\n该组样例满足测试点 $4\\sim 6$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 ```ternary/ternary3.in``` 与 ```ternary/ternary3.ans```。\n\n该组样例满足测试点 $7\\sim 10$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 ```ternary/ternary4.in``` 与 ```ternary/ternary4.ans```。\n\n该组样例满足测试点 $13\\sim 15$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 ```ternary/ternary5.in``` 与 ```ternary/ternary5.ans```。\n\n该组样例满足测试点 $20\\sim 25$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点，每个 $4$ 分。\n\n| 测试点编号 | $n$ | $w$ | 特殊性质\n| :-----------: | :-----------: | :-----------: | :-----------: | \n| $1 \\sim 3$ | $\\le 18$ | $\\le 18$ | 无\n| $4 \\sim 6$ | $\\le 242$ | $\\le 242$ |  无\n| $7 \\sim 10$ | $\\le 6560$ | $\\le6560$ |  无\n| $11\\sim12$ | $\\le 10^5$ | $\\le 10^5$ |  无\n| $13\\sim15$ | $\\le 3 \\times 10^5$ | $\\le 10^5$ | 有 |\n| $16\\sim 17$ | $\\le 3 \\times 10^5$ | $=0$ | 无 |\n| $18\\sim 19$ | $\\le 3 \\times 10^5$ | $=n$ |  无 |\n| $20\\sim25$ | $\\le 3 \\times 10^5$ | $\\le 3 \\times 10^5$ |  无 |\n\n特殊性质：$w \\ge 10^4$。\n\n对于全部数据，保证：$1\\le n \\le 3 \\times 10^5$，$0 \\le w \\le n$。\n", "locale": "zh-CN"}}}
{"pid": "P11221", "type": "P", "difficulty": 5, "samples": [["10 2\n2 3 1 9 10 4 5 6 1 5", "10\n6\n4\n5\n2\n9\n3\n5\n1\n1"], ["10 3\n2 3 1 9 10 4 5 6 1 5", "9\n10\n4\n5\n6\n2\n5\n3\n1\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "分块", "链表", "根号分治", "COTS（克罗地亚）"], "title": "[COTS 2019] 序列操作 K-ti", "background": "译自 [Izborne Pripreme 2019 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2019/) D1T1。$\\texttt{2s,0.5G}$。\n", "description": "给定长度为 $N$ 的正整数序列 $a_0,a_1,\\cdots,a_{N-1}$ 和正整数 $k$。注意是 $\\texttt{0-index}$。\n\n进行 $N$ 次操作，将 $a$ 删空。对于每次操作：\n\n- 设当前 $a$ 的长度为 $n$。\n- 令 $S=\\{0,k,2k,\\cdots,k\\lfloor\\frac{n-1}{k}\\rfloor\\}$。找到 $v=\\max_{i\\in S}a_i$。\n- 令 $p$ 为 $\\min_{i\\in S,a_i=v} i$。\n- 删去 $a_p$。后面的元素顺次前移一位。\n\n求出每次操作删去的数。", "inputFormat": "第一行，两个正整数 $N,k$。\n\n第二行，$N$ 个正整数描述 $a$。", "outputFormat": "输出 $N$ 行，每行一个整数，即每次操作删去的数。", "hint": "\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $2\\le k\\le N\\le 10^5$；\n- $1\\le a_i\\le N$。\n\n\n| 子任务编号 | $N\\le $ |  $k$   | 得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 1\\, 000 $    |  $\\le N$  | $ 7 $   |  \n| $ 2 $    | $ 10^5 $   |  $=2$ | $ 25 $   |  \n| $ 3 $    | $ 10^5$ | $\\le 10$ | $ 23 $   |  \n| $ 4 $    | $ 10^5$ | $\\ge 100$ | $ 25 $   |  \n| $ 5 $    | $ 10^5$  |  $\\le N$ | $ 20 $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2019] 序列操作 K-ti", "background": "译自 [Izborne Pripreme 2019 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2019/) D1T1。$\\texttt{2s,0.5G}$。\n", "description": "给定长度为 $N$ 的正整数序列 $a_0,a_1,\\cdots,a_{N-1}$ 和正整数 $k$。注意是 $\\texttt{0-index}$。\n\n进行 $N$ 次操作，将 $a$ 删空。对于每次操作：\n\n- 设当前 $a$ 的长度为 $n$。\n- 令 $S=\\{0,k,2k,\\cdots,k\\lfloor\\frac{n-1}{k}\\rfloor\\}$。找到 $v=\\max_{i\\in S}a_i$。\n- 令 $p$ 为 $\\min_{i\\in S,a_i=v} i$。\n- 删去 $a_p$。后面的元素顺次前移一位。\n\n求出每次操作删去的数。", "inputFormat": "第一行，两个正整数 $N,k$。\n\n第二行，$N$ 个正整数描述 $a$。", "outputFormat": "输出 $N$ 行，每行一个整数，即每次操作删去的数。", "hint": "\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $2\\le k\\le N\\le 10^5$；\n- $1\\le a_i\\le N$。\n\n\n| 子任务编号 | $N\\le $ |  $k$   | 得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 1\\, 000 $    |  $\\le N$  | $ 7 $   |  \n| $ 2 $    | $ 10^5 $   |  $=2$ | $ 25 $   |  \n| $ 3 $    | $ 10^5$ | $\\le 10$ | $ 23 $   |  \n| $ 4 $    | $ 10^5$ | $\\ge 100$ | $ 25 $   |  \n| $ 5 $    | $ 10^5$  |  $\\le N$ | $ 20 $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11222", "type": "P", "difficulty": 6, "samples": [["3 3\n...\n.x.\n...", "2"], ["3 3\n...\n..x\n...", "4"], ["3 6\n.x..x.\n..x.x.\n......", "3"], ["4 5\n....x\n....x\n..x..\n.x..x", "7"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "状压 DP", "COTS（克罗地亚）"], "title": "[COTS 2019] 车位安排 Parking", "background": "译自 [Izborne Pripreme 2019 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2019/) D1T2。$\\texttt{3s,0.5G}$。", "description": "\n萨格勒布市政府决定修建一个新停车场。\n\n土地是 $N\\times M$ 的矩形，被划分为 $N$ 行 $M$ 列 $N\\times M$ 个格子。我们记第 $i$ 行第 $j$ 列的格子为 $(i,j)$。\n\n为了吸引游客，事先确定了一些格子内建设水景。剩下的格子将被改造成停车位或车道。**特别地，停车场的出入口为 $(1,1)$，只能用作车道。**\n\n车辆可以在停车场内自由移动，每次可以移动到上下左右四个相邻的格子（只要移动到的格子仍然属于停车场内）。\n\n一个合法的修建方案必须满足以下条件：\n\n- 任意一辆停在停车位内的车，都能在不经过其他停车位的情况下，到达停车场的出入口。\n\n求出所有合法修建方案中，修建停车场数量的最大值。", "inputFormat": "\n第一行，两个正整数 $N,M$。\n\n接下来，一个 $N\\times M$ 的字符矩阵描述土地。\n\n- 第 $i$ 行第 $j$ 列的字符为 `.`，代表这里可以被用作车道或者停车位；\n- 第 $i$ 行第 $j$ 列的字符为 `X`，代表这里被用来建设水景。", "outputFormat": "\n输出一行一个整数，即能够修建停车位数量的最大值。\n", "hint": "\n样例 $4$ 解释：记 `P` 为停车位，如下所示。\n\n```plain\n.PPPx\n....x\n.Px.P\nPxP.x\n```\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 6$；\n- $1\\le M\\le 100$；\n- 不会在 $(1,1)$ 上修建水景。 \n\n\n| 子任务编号 | $N\\le $ |  $M\\le $   | 得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 4$    |  $4$  | $10 $   |  \n| $ 2 $    | $ 2 $   |  $100$ | $ 10 $   |  \n| $ 3 $    | $ 3$ | $100$ | $ 20 $   |  \n| $ 4 $    | $ 4$ | $ 100$ | $ 20 $   |  \n| $ 5 $    | $ 5$  |  $100$ | $ 20 $   |  \n| $ 5 $    | $ 6$  |  $100$ | $ 20 $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2019] 车位安排 Parking", "background": "译自 [Izborne Pripreme 2019 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2019/) D1T2。$\\texttt{3s,0.5G}$。", "description": "\n萨格勒布市政府决定修建一个新停车场。\n\n土地是 $N\\times M$ 的矩形，被划分为 $N$ 行 $M$ 列 $N\\times M$ 个格子。我们记第 $i$ 行第 $j$ 列的格子为 $(i,j)$。\n\n为了吸引游客，事先确定了一些格子内建设水景。剩下的格子将被改造成停车位或车道。**特别地，停车场的出入口为 $(1,1)$，只能用作车道。**\n\n车辆可以在停车场内自由移动，每次可以移动到上下左右四个相邻的格子（只要移动到的格子仍然属于停车场内）。\n\n一个合法的修建方案必须满足以下条件：\n\n- 任意一辆停在停车位内的车，都能在不经过其他停车位的情况下，到达停车场的出入口。\n\n求出所有合法修建方案中，修建停车场数量的最大值。", "inputFormat": "\n第一行，两个正整数 $N,M$。\n\n接下来，一个 $N\\times M$ 的字符矩阵描述土地。\n\n- 第 $i$ 行第 $j$ 列的字符为 `.`，代表这里可以被用作车道或者停车位；\n- 第 $i$ 行第 $j$ 列的字符为 `X`，代表这里被用来建设水景。", "outputFormat": "\n输出一行一个整数，即能够修建停车位数量的最大值。\n", "hint": "\n样例 $4$ 解释：记 `P` 为停车位，如下所示。\n\n```plain\n.PPPx\n....x\n.Px.P\nPxP.x\n```\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 6$；\n- $1\\le M\\le 100$；\n- 不会在 $(1,1)$ 上修建水景。 \n\n\n| 子任务编号 | $N\\le $ |  $M\\le $   | 得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 4$    |  $4$  | $10 $   |  \n| $ 2 $    | $ 2 $   |  $100$ | $ 10 $   |  \n| $ 3 $    | $ 3$ | $100$ | $ 20 $   |  \n| $ 4 $    | $ 4$ | $ 100$ | $ 20 $   |  \n| $ 5 $    | $ 5$  |  $100$ | $ 20 $   |  \n| $ 5 $    | $ 6$  |  $100$ | $ 20 $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11223", "type": "P", "difficulty": 6, "samples": [["1\n2\n3 2\n2 1", "3 3\n2 1 3\n3 2 2\n1 3 2\n2 1\n1 1\n2 2"], ["2\n2\n3 3\n4 0", "6 2\n1 2 3 4 5 6\n6 5 4 3 2 1\n2 4 1 4 3 2\n2 2\n1 1\n1 1\n1 1\n1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "Special Judge", "构造", "COTS（克罗地亚）"], "title": "[COTS 2019] 传话游戏 Pokvareni", "background": "\n译自 [Izborne Pripreme 2019 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2019/) D1T3。$\\texttt{1s,0.5G}$。", "description": "**提示**：搬题人在题面的最后提供了简要题意。\n\n老师带着 $N$ 个小朋友玩传话游戏。他们都知道同样的 $M$ 个单词，我们不妨编号为 $1\\sim M$。\n\n游戏进行方式是这样的：\n\n- 小朋友们被排成一列；\n- 老师对第一个小朋友耳语单词 $1$；\n- 对于 $1\\le i\\lt N$，第 $i$ 个小朋友对第 $(i+1)$ 个小朋友耳语听到的词；\n- 第 $N$ 个小朋友大声说出他听到的词。\n\n由于当时旁边有 OIer 在大力敲打键盘，游戏受到了干扰，小朋友常常听错词。但是，神奇的是，对于第 $i$ 个小朋友，无论谁对他耳语，以及他在队列中的哪个位置，对他耳语相同的词 $A$，他都会听到相同的词 $B$（$A=B$ 是可能的）。\n\n老师重复进行了 $N!$ 局游戏，每种排列都试了一次。她注意到，有一个词恰好被大声说出 $K$ 次。老师很好奇，于是找来了你，来复现这样的情况。\n\n具体地说，给定整数 $N,K$。构造正整数 $M,X$，以及一种小朋友误听单词的方式，使得在 $N!$ 局游戏中，$X$ 恰好被大声说出 $K$ 次。\n\n找到的 $M$ 越小，得分越高，详见【计分方式】。\n\n**简单地说**：给定 $N,K$。构造 $N$ 个 $[1,M]\\to [1,M]$ 的函数 $f_1(x),f_2(x),\\ldots,f_{N}(x)$（$M$ 是你选定的正整数），使得：\n\n- 令 $p_1,p_2,\\ldots,p_N$ 取遍 $N!$ 个 $1\\sim N$ 的排列；\n\t- 将 $N!$ 种排列 $p$ 中，$f_{p_N}(f_{p_{N-1}}\\cdots(f_{p_2}(f_{p_1}(1)))\\cdots)$ 取到的值放入**多重集** $S$。则存在 $X\\in S$，使得 $X$ **恰好**在 $S$ 中出现 $K$ 次。\n\n这里，$[1,M]$ 指的是 $[1,M]\\cap \\mathbb{Z}$。\n\n目标是使 $M$ 尽量小。\n", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n第一行，正整数 $\\mathrm{id}$，表示子任务编号；\n\n第二行，正整数 $T$，表示测试数据组数；\n\n接下来 $T$ 行，每行两个整数 $N,K$，描述一组数据。", "outputFormat": "\n对于每组数据，输出 $(N+1)$ 行：\n\n第一行，两个正整数 $M,X$。你需要保证 $1\\le X\\le M\\le 10^4$。\n\n接下来 $N$ 行，每行 $M$ 个正整数。\n\n第 $i$ 行第 $j$ 个正整数 $f_{i}(j)$ 表示：如果对第 $i$ 个小朋友耳语 $j$，他会听到 $f_{i}(j)$。你需要保证 $f_i(j)\\in [1,M]$。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $\\mathrm{id}\\in \\{1,2\\}$；\n- $1\\le N\\le 12$；\n- $0\\le K\\le N!$；\n- $1\\le T\\le 10$。\n\n【计分方式】\n\n本题分为两个子任务计分。\n\n- Subtask $1$（$30$ pts）：保证 $1\\le N\\le 7$。\n\n    只要构造方案合法，就能获得满分。否则得 $0$ 分。\n- Subtask $2$（$70$ pts）：保证 $1\\le N\\le 12$。\n    \n    如果输出不合法，得 $0$ 分。\n\n    否则单组测试数据得分为 $70\\cdot k$，$k$ 按照下式计算：\n\n    $$k=\n    \\begin{cases}\n    \\displaystyle 1, & M\\le N+1 \\\\\n    \\displaystyle 0.7 + \\frac{0.15}{M-N-1}\\, \\in [0.7,0.85], & N+1\\lt M\\le N+5 \\\\\n    \\displaystyle 0.5 + 0.05 \\left(5-\\frac{M}{N}\\right) \\, \\in[0.5,0.7], & N+5\\lt M\\le 5\\cdot N \\\\\n    \\displaystyle \\frac{0.5}{\\log_{10}(M/5N)+1}\\, \\in [0,0.5]& 5\\cdot N\\lt M\\le 10^4 \\\\\n\n    \\end{cases}\n    $$\n    \n    单个测试点得分是所有测试数据中得分的最小值。例如，样例 $2$ 的两组数据的 $k$ 分别为 $0.77,1$。该输出得 $0.7\\cdot  70$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2019] 传话游戏 Pokvareni", "background": "\n译自 [Izborne Pripreme 2019 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2019/) D1T3。$\\texttt{1s,0.5G}$。", "description": "**提示**：搬题人在题面的最后提供了简要题意。\n\n老师带着 $N$ 个小朋友玩传话游戏。他们都知道同样的 $M$ 个单词，我们不妨编号为 $1\\sim M$。\n\n游戏进行方式是这样的：\n\n- 小朋友们被排成一列；\n- 老师对第一个小朋友耳语单词 $1$；\n- 对于 $1\\le i\\lt N$，第 $i$ 个小朋友对第 $(i+1)$ 个小朋友耳语听到的词；\n- 第 $N$ 个小朋友大声说出他听到的词。\n\n由于当时旁边有 OIer 在大力敲打键盘，游戏受到了干扰，小朋友常常听错词。但是，神奇的是，对于第 $i$ 个小朋友，无论谁对他耳语，以及他在队列中的哪个位置，对他耳语相同的词 $A$，他都会听到相同的词 $B$（$A=B$ 是可能的）。\n\n老师重复进行了 $N!$ 局游戏，每种排列都试了一次。她注意到，有一个词恰好被大声说出 $K$ 次。老师很好奇，于是找来了你，来复现这样的情况。\n\n具体地说，给定整数 $N,K$。构造正整数 $M,X$，以及一种小朋友误听单词的方式，使得在 $N!$ 局游戏中，$X$ 恰好被大声说出 $K$ 次。\n\n找到的 $M$ 越小，得分越高，详见【计分方式】。\n\n**简单地说**：给定 $N,K$。构造 $N$ 个 $[1,M]\\to [1,M]$ 的函数 $f_1(x),f_2(x),\\ldots,f_{N}(x)$（$M$ 是你选定的正整数），使得：\n\n- 令 $p_1,p_2,\\ldots,p_N$ 取遍 $N!$ 个 $1\\sim N$ 的排列；\n\t- 将 $N!$ 种排列 $p$ 中，$f_{p_N}(f_{p_{N-1}}\\cdots(f_{p_2}(f_{p_1}(1)))\\cdots)$ 取到的值放入**多重集** $S$。则存在 $X\\in S$，使得 $X$ **恰好**在 $S$ 中出现 $K$ 次。\n\n这里，$[1,M]$ 指的是 $[1,M]\\cap \\mathbb{Z}$。\n\n目标是使 $M$ 尽量小。\n", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n第一行，正整数 $\\mathrm{id}$，表示子任务编号；\n\n第二行，正整数 $T$，表示测试数据组数；\n\n接下来 $T$ 行，每行两个整数 $N,K$，描述一组数据。", "outputFormat": "\n对于每组数据，输出 $(N+1)$ 行：\n\n第一行，两个正整数 $M,X$。你需要保证 $1\\le X\\le M\\le 10^4$。\n\n接下来 $N$ 行，每行 $M$ 个正整数。\n\n第 $i$ 行第 $j$ 个正整数 $f_{i}(j)$ 表示：如果对第 $i$ 个小朋友耳语 $j$，他会听到 $f_{i}(j)$。你需要保证 $f_i(j)\\in [1,M]$。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $\\mathrm{id}\\in \\{1,2\\}$；\n- $1\\le N\\le 12$；\n- $0\\le K\\le N!$；\n- $1\\le T\\le 10$。\n\n【计分方式】\n\n本题分为两个子任务计分。\n\n- Subtask $1$（$30$ pts）：保证 $1\\le N\\le 7$。\n\n    只要构造方案合法，就能获得满分。否则得 $0$ 分。\n- Subtask $2$（$70$ pts）：保证 $1\\le N\\le 12$。\n    \n    如果输出不合法，得 $0$ 分。\n\n    否则单组测试数据得分为 $70\\cdot k$，$k$ 按照下式计算：\n\n    $$k=\n    \\begin{cases}\n    \\displaystyle 1, & M\\le N+1 \\\\\n    \\displaystyle 0.7 + \\frac{0.15}{M-N-1}\\, \\in [0.7,0.85], & N+1\\lt M\\le N+5 \\\\\n    \\displaystyle 0.5 + 0.05 \\left(5-\\frac{M}{N}\\right) \\, \\in[0.5,0.7], & N+5\\lt M\\le 5\\cdot N \\\\\n    \\displaystyle \\frac{0.5}{\\log_{10}(M/5N)+1}\\, \\in [0,0.5]& 5\\cdot N\\lt M\\le 10^4 \\\\\n\n    \\end{cases}\n    $$\n    \n    单个测试点得分是所有测试数据中得分的最小值。例如，样例 $2$ 的两组数据的 $k$ 分别为 $0.77,1$。该输出得 $0.7\\cdot  70$ 分。", "locale": "zh-CN"}}}
{"pid": "P11224", "type": "P", "difficulty": 7, "samples": [["4 5\nCCBCB\nCCBBB\nCCCBB\nCCCBB", "1 1 0 2 0\n1 1 0 0 0\n3 3 3 0 0\n3 3 3 0 0"], ["7 5\nCCCBB\nBCBBB\nBCCCB\nBCCCB\nCCCCC\nBBBBB\nBCCCB", "1 1 1 0 0\n0 2 0 0 0\n0 3 3 3 0\n0 3 3 3 0\n4 4 4 4 4\n0 0 0 0 0\n0 5 5 5 0"], ["5 11\nBBCCCBCCCBC\nBCCBCBBCCCC\nCCCCBCCCCCC\nBCBCCCBCCCB\nCCCCBCBBCCB", "0 0 1 1 1 0 2 2 2 0 3\n0 4 4 0 5 0 0 6 6 6 3\n7 7 7 7 0 8 8 6 6 6 3\n0 9 0 10 10 10 0 6 6 6 0\n11 11 11 11 0 12 0 0 13 13 0"]], "limits": {"time": [15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "网络流", "Special Judge", "二分图", "COTS（克罗地亚）"], "title": "[COTS 2019] 挑战 Izazov", "background": "\n译自 [Izborne Pripreme 2019 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2019/) D2T1。$\\texttt{15s,0.5G}$。", "description": "\n给定 $N\\times M$ 的黑白矩阵。用尽可能少数量的矩形覆盖住所有黑色格子，要求：\n- 每个黑色格子**恰好被一个**矩形覆盖；\n- 任意两个矩形不重叠；\n- 矩形不覆盖白色格子。\n\n并输出方案。", "inputFormat": "第一行，两个正整数 $N,M$。\n\n接下来一个 $N\\times M$ 的矩阵，每个位置是 $\\texttt{C}$ 或者 $\\texttt{B}$。其中，$\\texttt{C}$ 代表黑色（克罗地亚语「crno」），$\\texttt{B}$ 代表白色（克罗地亚语「bijelo」）。\n", "outputFormat": "\n输出 $N$ 行，每行 $M$ 个数，表示你的方案：\n- 未被覆盖的区域，用 $0$ 表示；\n- 否则，设使用了 $K$ 个矩形，将矩形用 $1\\sim K$ 标号后，对应位置用覆盖它的矩形编号表示。\n\n每一行相邻的数要用空格隔开。", "hint": "\n\n对于 $100\\%$ 的数据，保证 $1\\le N,M\\le 500$。\n\n\n| 测试点编号 | $N,M\\le $    | 得分 |  \n| :--: | :--: |:--: |  \n| $ 1\\sim 5 $    | $ 26 $ |   $ 25 $   |  \n| $ 6\\sim 10 $    | $ 100 $ |  $ 25 $   |  \n| $ 11\\sim 15 $    | $ 250 $ | $ 25 $   |  \n| $ 16\\sim 20 $    | $ 500 $ |$ 25 $   |  \n\n【计分方式】\n\n如果你输出的是最优解，得满分。\n\n否则，设最优解用的矩形数量为 $A$，你的解用的矩形数量为 $B$，该测试点得分为 $0.75\\cdot (A/B)^{10}\\cdot 5$ 分。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2019] 挑战 Izazov", "background": "\n译自 [Izborne Pripreme 2019 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2019/) D2T1。$\\texttt{15s,0.5G}$。", "description": "\n给定 $N\\times M$ 的黑白矩阵。用尽可能少数量的矩形覆盖住所有黑色格子，要求：\n- 每个黑色格子**恰好被一个**矩形覆盖；\n- 任意两个矩形不重叠；\n- 矩形不覆盖白色格子。\n\n并输出方案。", "inputFormat": "第一行，两个正整数 $N,M$。\n\n接下来一个 $N\\times M$ 的矩阵，每个位置是 $\\texttt{C}$ 或者 $\\texttt{B}$。其中，$\\texttt{C}$ 代表黑色（克罗地亚语「crno」），$\\texttt{B}$ 代表白色（克罗地亚语「bijelo」）。\n", "outputFormat": "\n输出 $N$ 行，每行 $M$ 个数，表示你的方案：\n- 未被覆盖的区域，用 $0$ 表示；\n- 否则，设使用了 $K$ 个矩形，将矩形用 $1\\sim K$ 标号后，对应位置用覆盖它的矩形编号表示。\n\n每一行相邻的数要用空格隔开。", "hint": "\n\n对于 $100\\%$ 的数据，保证 $1\\le N,M\\le 500$。\n\n\n| 测试点编号 | $N,M\\le $    | 得分 |  \n| :--: | :--: |:--: |  \n| $ 1\\sim 5 $    | $ 26 $ |   $ 25 $   |  \n| $ 6\\sim 10 $    | $ 100 $ |  $ 25 $   |  \n| $ 11\\sim 15 $    | $ 250 $ | $ 25 $   |  \n| $ 16\\sim 20 $    | $ 500 $ |$ 25 $   |  \n\n【计分方式】\n\n如果你输出的是最优解，得满分。\n\n否则，设最优解用的矩形数量为 $A$，你的解用的矩形数量为 $B$，该测试点得分为 $0.75\\cdot (A/B)^{10}\\cdot 5$ 分。 ", "locale": "zh-CN"}}}
{"pid": "P11225", "type": "P", "difficulty": 6, "samples": [["5 5 2\n1 2 1\n1 3 3\n2 3 4\n3 4 1\n4 5 1\n1 10\n4 2", "3"], ["7 8 3\n1 2 5\n2 3 3\n3 4 5\n1 4 1\n4 5 7\n5 6 2\n6 7 1\n4 7 4\n3 3\n7 3\n6 2", "5"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "网络流", "二分图", "COTS（克罗地亚）"], "title": "[COTS 2019] 疏散 Sklonište", "background": "\n译自 [Izborne Pripreme 2019 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2019/) D2T2。$\\texttt{4s,0.5G}$。", "description": "\n给定 $N$ 个点 $M$ 条边的无向连通图，边有边权。有 $K$ 个关键点 $A_1,A_2,\\cdots,A_K$，**容量**为 $S_1,S_2,\\cdots,S_K$。\n\n图中的居民要疏散。也就是说，你需要构造一个序列 $B_1,B_2,\\cdots,B_N$，使得：\n\n- $\\forall 1\\le i\\le N$，$1\\le B_i\\le K$；\n- 对于 $1\\le i\\le K$，定义 $\\displaystyle \\mathrm{cnt}_i=\\sum_{1\\le j\\le N} [B_j=i]$，也就是 $i$ 在 $B$ 序列中出现的次数。则 $\\mathrm{cnt}_i\\le S_i$。\n\n定义序列 $B$ 的**疏散时间**为 $\\displaystyle \\max_{1\\le i\\le N} \\operatorname{dist}(i,A_{B_i})$，其中 $\\operatorname{dist}(u,v)$ 指图中 $u,v$ 间最短路的长度。\n\n求出疏散时间的最小值。保证 $\\sum_i S_i\\ge N$。\n", "inputFormat": "\n第一行，三个正整数 $N,M,K$；\n\n接下来 $M$ 行，每行三个正整数 $u,v,w$，描述一条无向边 $(u,v)$，边权为 $w$。保证 $u\\neq v$。\n\n接下来 $K$ 行，每行两个正整数描述 $A_i,S_i$。\n\n保证 $\\sum_i S_i\\ge N$。", "outputFormat": "\n输出一行一个数，表示答案。", "hint": "\n对于 $100\\%$ 的数据，保证：\n- $1\\le N\\le 10^5$；\n- $N-1\\le M\\le 3\\times 10^5$；\n- $1\\le K\\le 17$；\n- 给定图连通，无自环；\n- $1\\le w,S_i\\le 10^9$；\n- $1\\le u,v,A_i\\le N$；\n- $S_i$ 两两不同；\n- $\\sum_i S_i\\ge N$。\n\n\n| 子任务编号 | $N\\le $ | $M\\le $ | $K\\le$    | 得分 |  \n| :--: | :--: |:--: |  :--: | :--: | \n| $ 1 $    | $ 100 $ |   $ 500 $   |  $5$ | $30$ |\n| $ 2 $    | $ 10^5 $ |  $ 3\\times 10^5 $   |  $10 $ | $30$ |\n| $ 3 $    | $ 10^5 $ | $ 3\\times 10^5 $   |  $17$ |  $40$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2019] 疏散 Sklonište", "background": "\n译自 [Izborne Pripreme 2019 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2019/) D2T2。$\\texttt{4s,0.5G}$。", "description": "\n给定 $N$ 个点 $M$ 条边的无向连通图，边有边权。有 $K$ 个关键点 $A_1,A_2,\\cdots,A_K$，**容量**为 $S_1,S_2,\\cdots,S_K$。\n\n图中的居民要疏散。也就是说，你需要构造一个序列 $B_1,B_2,\\cdots,B_N$，使得：\n\n- $\\forall 1\\le i\\le N$，$1\\le B_i\\le K$；\n- 对于 $1\\le i\\le K$，定义 $\\displaystyle \\mathrm{cnt}_i=\\sum_{1\\le j\\le N} [B_j=i]$，也就是 $i$ 在 $B$ 序列中出现的次数。则 $\\mathrm{cnt}_i\\le S_i$。\n\n定义序列 $B$ 的**疏散时间**为 $\\displaystyle \\max_{1\\le i\\le N} \\operatorname{dist}(i,A_{B_i})$，其中 $\\operatorname{dist}(u,v)$ 指图中 $u,v$ 间最短路的长度。\n\n求出疏散时间的最小值。保证 $\\sum_i S_i\\ge N$。\n", "inputFormat": "\n第一行，三个正整数 $N,M,K$；\n\n接下来 $M$ 行，每行三个正整数 $u,v,w$，描述一条无向边 $(u,v)$，边权为 $w$。保证 $u\\neq v$。\n\n接下来 $K$ 行，每行两个正整数描述 $A_i,S_i$。\n\n保证 $\\sum_i S_i\\ge N$。", "outputFormat": "\n输出一行一个数，表示答案。", "hint": "\n对于 $100\\%$ 的数据，保证：\n- $1\\le N\\le 10^5$；\n- $N-1\\le M\\le 3\\times 10^5$；\n- $1\\le K\\le 17$；\n- 给定图连通，无自环；\n- $1\\le w,S_i\\le 10^9$；\n- $1\\le u,v,A_i\\le N$；\n- $S_i$ 两两不同；\n- $\\sum_i S_i\\ge N$。\n\n\n| 子任务编号 | $N\\le $ | $M\\le $ | $K\\le$    | 得分 |  \n| :--: | :--: |:--: |  :--: | :--: | \n| $ 1 $    | $ 100 $ |   $ 500 $   |  $5$ | $30$ |\n| $ 2 $    | $ 10^5 $ |  $ 3\\times 10^5 $   |  $10 $ | $30$ |\n| $ 3 $    | $ 10^5 $ | $ 3\\times 10^5 $   |  $17$ |  $40$ |", "locale": "zh-CN"}}}
{"pid": "P11226", "type": "P", "difficulty": 5, "samples": [["3\nwar\nzag\nwro", "agorwzbcdefhijklmnpqstuvxy\nagorzwbcdefhijklmnpqstuvxy\ngorawzbcdefhijklmnpqstuvxy"], ["3\nb\nab\naa", "bacdefghijklmnopqrstuvwxyz\nnemoguce\nabcdefghijklmnopqrstuvwxyz"], ["7\nbcada\ndbaab\nbbabc\nababb\naacdf\nbcdff\nbaddb", "cbadfeghijklmnopqrstuvwxyz\ncdabfeghijklmnopqrstuvwxyz\nbacdfeghijklmnopqrstuvwxyz\nnemoguce\nabcdfeghijklmnopqrstuvwxyz\ncbdafeghijklmnopqrstuvwxyz\nnemoguce"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "Special Judge", "拓扑排序", "字典树 Trie", "构造", "COTS（克罗地亚）"], "title": "[COTS 2019] 排名 Vezuv", "background": "\n译自 [Izborne Pripreme 2019 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2019/) D2T3。$\\texttt{1.5s,0.5G}$。", "description": "\n\n在某场 ICPC Regional 中，组委会决定用队伍名的字典序来决定排名。不幸的是，对于队名以字母 $\\texttt{z}$ 开头的队伍，这是相当不公平的。\n\n经过讨论，组委会决定：随机抽取一个 $26$ 个字母的排列，用字母的排列对应的字典序来决定排名。\n\n有 $N$ 支队伍参加了这场比赛，队伍名都为小写英文字母。\n\nEtna 写了一个程序枚举了 $26!$ 个排列，以期找到能使每个队伍夺冠的排列。但是这个程序至今都没有跑出结果。\n\n所以她找来了你，为每个队伍构造一个排列，使得这支队伍夺冠。\n", "inputFormat": "\n第一行，一个正整数 $N$；\n\n接下来 $N$ 行，第 $i$ 行一个字符串，表示第 $i$ 支队伍的队伍名。\n\n保证队伍名两两不同。", "outputFormat": "\n输出 $N$ 行：\n- 如果可能使得这支队伍获胜，输出一个 $26$ 个字母的排列；\n- 否则，输出 `nemoguce`（克罗地亚语「不可能」）。", "hint": "\n令 $L$ 为字符串总长度，$|\\Sigma|$ 为字符串字符集大小。\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 25\\, 000$；\n- $1\\le L\\le 10^6$；\n- 队伍名两两不同；\n- $1\\le |\\Sigma|\\le 26$。\n\n\n| 子任务编号 | $N\\le $ | $L\\le $ | $\\vert\\Sigma\\vert\\le$    | 得分 |  \n| :--: | :--: |:--: |  :--: | :--: | \n| $ 1 $    | $ 100 $ |   $ 10^4 $   |  $6$ | $13$ |\n| $ 2 $    | $ 350 $ |  $ 10^4 $   |  $26 $ | $32$ |\n| $ 3 $    | $ 25\\, 000 $ | $ 10^6 $   |  $26$ |  $55$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2019] 排名 Vezuv", "background": "\n译自 [Izborne Pripreme 2019 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2019/) D2T3。$\\texttt{1.5s,0.5G}$。", "description": "\n\n在某场 ICPC Regional 中，组委会决定用队伍名的字典序来决定排名。不幸的是，对于队名以字母 $\\texttt{z}$ 开头的队伍，这是相当不公平的。\n\n经过讨论，组委会决定：随机抽取一个 $26$ 个字母的排列，用字母的排列对应的字典序来决定排名。\n\n有 $N$ 支队伍参加了这场比赛，队伍名都为小写英文字母。\n\nEtna 写了一个程序枚举了 $26!$ 个排列，以期找到能使每个队伍夺冠的排列。但是这个程序至今都没有跑出结果。\n\n所以她找来了你，为每个队伍构造一个排列，使得这支队伍夺冠。\n", "inputFormat": "\n第一行，一个正整数 $N$；\n\n接下来 $N$ 行，第 $i$ 行一个字符串，表示第 $i$ 支队伍的队伍名。\n\n保证队伍名两两不同。", "outputFormat": "\n输出 $N$ 行：\n- 如果可能使得这支队伍获胜，输出一个 $26$ 个字母的排列；\n- 否则，输出 `nemoguce`（克罗地亚语「不可能」）。", "hint": "\n令 $L$ 为字符串总长度，$|\\Sigma|$ 为字符串字符集大小。\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 25\\, 000$；\n- $1\\le L\\le 10^6$；\n- 队伍名两两不同；\n- $1\\le |\\Sigma|\\le 26$。\n\n\n| 子任务编号 | $N\\le $ | $L\\le $ | $\\vert\\Sigma\\vert\\le$    | 得分 |  \n| :--: | :--: |:--: |  :--: | :--: | \n| $ 1 $    | $ 100 $ |   $ 10^4 $   |  $6$ | $13$ |\n| $ 2 $    | $ 350 $ |  $ 10^4 $   |  $26 $ | $32$ |\n| $ 3 $    | $ 25\\, 000 $ | $ 10^6 $   |  $26$ |  $55$ |", "locale": "zh-CN"}}}
{"pid": "P11227", "type": "P", "difficulty": 1, "samples": [["1\nSA", "51"], ["4\nDQ\nH3\nDQ\nDT", "49"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2024", "O2优化", "CSP-J 入门级"], "title": "[CSP-J 2024] 扑克牌", "background": null, "description": "小 P 从同学小 Q 那儿借来一副 $n$ 张牌的扑克牌。\n\n本题中我们不考虑大小王，此时每张牌具有两个属性：花色和点数。花色共有 $4$ 种：方片、草花、红桃和黑桃。点数共有 $13$ 种，从小到大分别为 $\\tt{A 2 3 4 5 6 7 8 9 T J Q K}$。注意：点数 $10$ 在本题中记为 $\\tt T$。\n\n我们称一副扑克牌是**完整**的，当且仅当对于每一种花色和每一种点数，都**恰好**有一张牌具有对应的花色和点数。由此，一副完整的扑克牌恰好有 $4 \\times 13 = 52$ 张牌。以下图片展示了一副完整的扑克牌里所有的 52 张牌。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qj53w3yq.png)\n\n小 P 借来的牌可能不是完整的，为此小 P 准备再向同学小 S 借若干张牌。可以认为小 S 每种牌都有无限张，因此小 P 可以任意选择借来的牌。小 P 想知道他至少得向小 S 借多少张牌，才能让从小 S 和小 Q 借来的牌中，可以选出 $52$ 张牌构成一副完整的扑克牌。\n\n为了方便你的输入，我们使用字符 $\\tt D$ 代表方片，字符 $\\tt C$ 代表草花，字符 $\\tt H$ 代表红桃，字符 $\\tt S$ 代表黑桃，这样每张牌可以通过一个长度为 $2$ 的字符串表示，其中第一个字符表示这张牌的花色，第二个字符表示这张牌的点数，例如 $\\tt{CA}$ 表示草花 $\\tt A$，$\\tt{ST}$ 表示黑桃 $\\tt T$（黑桃 10）。", "inputFormat": "输入的第一行包含一个整数 $n$ 表示牌数。\n\n接下来 $n$ 行：\n\n每行包含一个长度为 $2$ 的字符串描述一张牌，其中第一个字符描述其花色，第二个字符描述其点数。", "outputFormat": "输出一行一个整数，表示最少还需要向小 S 借几张牌才能凑成一副完整的扑克牌。", "hint": "**【样例 1 解释】**\n\n这一副牌中包含一张黑桃 $\\tt A$，小 P 还需要借除了黑桃 $\\tt A$ 以外的 51 张牌以构成一副完整的扑克牌。\n\n**【样例 2 解释】**\n\n这一副牌中包含两张方片 $\\tt Q$、一张方片 $\\tt T$（方片 10）以及一张红桃 3，小 P 还需要借除了红桃 3、方片 $\\tt T$ 和方片 $\\tt Q$ 以外的 $49$ 张牌。\n\n**【样例 3 解释】**\n\n见选手目录下的 poker/poker3.in 与 poker/poker3.ans。\n\n这一副扑克牌是完整的，故不需要再借任何牌。\n\n该样例满足所有牌按照点数从小到大依次输入，点数相同时按照方片、草花、红桃、黑桃的顺序依次输入。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\leq n \\leq 52$，输入的 $n$ 个字符串每个都代表一张合法的扑克牌，即字符串长度为 $2$，且第一个字符为 $\\tt{D C H S}$ 中的某个字符，第二个字符为 $\\tt{A 2 3 4 5 6 7 8 9 T J Q K}$ 中的某个字符。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $1$ | A |\n| $2\\sim 4$ | $52$ | ^ |\n| $5\\sim 7$ | ^ | B |\n| $8\\sim 10$ | ^ | 无 |\n\n特殊性质 A：保证输入的 $n$ 张牌两两不同。\n\n特殊性质 B：保证所有牌按照点数从小到大依次输入，点数相同时按照方片、草花、红桃、黑桃的顺序依次输入。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2024] 扑克牌", "background": null, "description": "小 P 从同学小 Q 那儿借来一副 $n$ 张牌的扑克牌。\n\n本题中我们不考虑大小王，此时每张牌具有两个属性：花色和点数。花色共有 $4$ 种：方片、草花、红桃和黑桃。点数共有 $13$ 种，从小到大分别为 $\\tt{A 2 3 4 5 6 7 8 9 T J Q K}$。注意：点数 $10$ 在本题中记为 $\\tt T$。\n\n我们称一副扑克牌是**完整**的，当且仅当对于每一种花色和每一种点数，都**恰好**有一张牌具有对应的花色和点数。由此，一副完整的扑克牌恰好有 $4 \\times 13 = 52$ 张牌。以下图片展示了一副完整的扑克牌里所有的 52 张牌。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qj53w3yq.png)\n\n小 P 借来的牌可能不是完整的，为此小 P 准备再向同学小 S 借若干张牌。可以认为小 S 每种牌都有无限张，因此小 P 可以任意选择借来的牌。小 P 想知道他至少得向小 S 借多少张牌，才能让从小 S 和小 Q 借来的牌中，可以选出 $52$ 张牌构成一副完整的扑克牌。\n\n为了方便你的输入，我们使用字符 $\\tt D$ 代表方片，字符 $\\tt C$ 代表草花，字符 $\\tt H$ 代表红桃，字符 $\\tt S$ 代表黑桃，这样每张牌可以通过一个长度为 $2$ 的字符串表示，其中第一个字符表示这张牌的花色，第二个字符表示这张牌的点数，例如 $\\tt{CA}$ 表示草花 $\\tt A$，$\\tt{ST}$ 表示黑桃 $\\tt T$（黑桃 10）。", "inputFormat": "输入的第一行包含一个整数 $n$ 表示牌数。\n\n接下来 $n$ 行：\n\n每行包含一个长度为 $2$ 的字符串描述一张牌，其中第一个字符描述其花色，第二个字符描述其点数。", "outputFormat": "输出一行一个整数，表示最少还需要向小 S 借几张牌才能凑成一副完整的扑克牌。", "hint": "**【样例 1 解释】**\n\n这一副牌中包含一张黑桃 $\\tt A$，小 P 还需要借除了黑桃 $\\tt A$ 以外的 51 张牌以构成一副完整的扑克牌。\n\n**【样例 2 解释】**\n\n这一副牌中包含两张方片 $\\tt Q$、一张方片 $\\tt T$（方片 10）以及一张红桃 3，小 P 还需要借除了红桃 3、方片 $\\tt T$ 和方片 $\\tt Q$ 以外的 $49$ 张牌。\n\n**【样例 3 解释】**\n\n见选手目录下的 poker/poker3.in 与 poker/poker3.ans。\n\n这一副扑克牌是完整的，故不需要再借任何牌。\n\n该样例满足所有牌按照点数从小到大依次输入，点数相同时按照方片、草花、红桃、黑桃的顺序依次输入。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\leq n \\leq 52$，输入的 $n$ 个字符串每个都代表一张合法的扑克牌，即字符串长度为 $2$，且第一个字符为 $\\tt{D C H S}$ 中的某个字符，第二个字符为 $\\tt{A 2 3 4 5 6 7 8 9 T J Q K}$ 中的某个字符。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $1$ | A |\n| $2\\sim 4$ | $52$ | ^ |\n| $5\\sim 7$ | ^ | B |\n| $8\\sim 10$ | ^ | 无 |\n\n特殊性质 A：保证输入的 $n$ 张牌两两不同。\n\n特殊性质 B：保证所有牌按照点数从小到大依次输入，点数相同时按照方片、草花、红桃、黑桃的顺序依次输入。", "locale": "zh-CN"}}}
{"pid": "P11228", "type": "P", "difficulty": 2, "samples": [["2\n1 5 4\n1 1 2\n....x\n5 5 20\n1 1 0\n.....\n.xxx.\n.x.x.\n..xx.\nx....", "3\n13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2024", "O2优化", "CSP-J 入门级"], "title": "[CSP-J 2024] 地图探险", "background": null, "description": "小 A 打算前往一片丛林去探险。丛林的地理环境十分复杂，为了防止迷路，他先派遣了一个机器人前去探路。\n\n丛林的地图可以用一个 $n$ 行 $m$ 列的字符表来表示。我们将第 $i$ 行第 $j$ 列的位置的坐标记作 $(i, j)(1 \\leq i \\leq n$，$1 \\leq j \\leq m)$。如果这个位置的字符为 $\\tt x$，即代表这个位置上有障碍，不可通过。反之，若这个位置的字符为 $\\tt.$，即代表这个位置是一片空地，可以通过。\n\n这个机器人的状态由位置和朝向两部分组成。其中位置由坐标 $(x, y)(1 \\leq x \\leq n$，$1 \\leq y \\leq m)$ 刻画，它表示机器人处在地图上第 $x$ 行第 $y$ 列的位置。而朝向用一个 $0 \\sim 3$ 的整数 $d$ 表示，其中 $d = 0$ 代表向东，$d = 1$ 代表向南，$d = 2$ 代表向西，$d = 3$ 代表向北。\n\n初始时，机器人的位置为 $(x_0, y_0)$，朝向为 $d_0$。**保证初始时机器人所在的位置为空地**。接下来机器人将要进行 $k$ 次操作。每一步，机器人将按照如下的模式操作：\n\n1. 假设机器人当前处在的位置为 $(x, y)$，朝向为 $d$。则它的方向上的下一步的位置 $(x^′, y^′)$ 定义如下：若 $d = 0$，则令 $(x^′, y^′) = (x, y + 1)$，若 $d = 1$，则令 $(x^′, y^′) = (x + 1, y)$，若 $d = 2$，则令 $(x^′, y^′) = (x, y - 1)$，若 $d = 3$，则令 $(x^′, y^′) = (x - 1, y)$。\n\n2. 接下来，机器人判断它下一步的位置是否在地图内，且是否为空地。具体地说，它判断 $(x^′, y^′)$ 是否满足 $1 \\leq x^′ \\leq n, 1 \\leq y^′ \\leq m$，且 $(x^′, y^′)$ 位置上是空地。如果条件成立，则机器人会向前走一步。它新的位置变为 $(x^′, y^′)$，且朝向不变。如果条件不成立，则它会执行“向右转”操作。也就是说，令 $d^′ = (d + 1) \\bmod 4$（即 $d + 1$ 除以 $4$ 的余数），且它所处的位置保持不变，但朝向由 $d$ 变为 $d^′$。\n\n小 A 想要知道，在机器人执行完 $k$ 步操作之后，地图上所有被机器人经过的位置（包括起始位置）有几个。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含三个正整数 $n, m, k$。其中 $n, m$ 表示地图的行数和列数，$k$ 表示机器人执行操作的次数。\n\n第二行包含两个正整数 $x_0, y_0$ 和一个非负整数 $d_0$。\n\n接下来 $n$ 行，每行包含一个长度为 $m$ 的字符串。保证字符串中只包含 $\\tt{x}$ 和 $\\tt{.}$ 两个字符。其中，第 $x$ 行的字符串的第 $y$ 个字符代表的位置为 $(x, y)$。这个位置是 $\\tt{x}$ 即代表它是障碍，否则代表它是空地。数据保证机器人初始时所在的位置为空地。", "outputFormat": "对于每组数据：输出一行包含一个正整数，表示地图上所有被机器人经过的位置（包括起始位置）的个数。", "hint": "**【样例 1 解释】**\n\n该样例包含两组数据。对第一组数据，机器人的状态以如下方式变化：\n1. 初始时，机器人位于位置 $(1, 1)$，方向朝西（用数字 $2$ 代表）。\n2. 第一步，机器人发现它下一步的位置 $(1, 0)$ 不在地图内，因此，它会执行“向右转”操作。此时，它的位置仍然为 $(1, 1)$，但方向朝北（用数字 $3$ 代表）。\n3. 第二步，机器人发现它下一步的位置 $(0, 1)$ 不在地图内，因此，它仍然会执行“向右转”操作。此时，它的位置仍然为 $(1, 1)$，但方向朝东（用数字 $0$ 代表）。\n4. 第三步，机器人发现它下一步的位置 $(1, 2)$ 在地图内，且为空地。因此，它会向东走一步。此时，它的位置变为 $(1, 2)$，方向仍然朝东。\n5. 第四步，机器人发现它下一步的位置 $(1, 3)$ 在地图内，且为空地。因此，它会向东走一步。此时，它的位置变为 $(1, 3)$，方向仍然朝东。\n\n因此，四步之后，机器人经过的位置有三个，分别为 $(1, 1),(1, 2),(1, 3)$。\n\n对第二组数据，机器人依次执行的操作指令为：向东走到 $(1, 2)$，向东走到 $(1, 3)$，向东走到 $(1, 4)$，向东走到 $(1, 5)$，向右转，向南走到 $(2, 5)$，向南走到 $(3, 5)$，向南走到 $(4, 5)$，向南走到 $(5, 5)$，向右转，向西走到 $(5, 4)$，向西走到 $(5, 3)$，向西走到 $(5, 2)$，向右转，向北走到 $(4, 2)$，向右转，向右转，向南走到 $(5, 2)$，向右转，向右转。\n\n**【样例 2】**\n\n见选手目录下的 explore/explore2.in 与 explore/explore2.ans。\n\n该样例满足第 $3\\sim 4$ 个测试点的限制条件。\n\n**【样例 3】**\n\n见选手目录下的 explore/explore3.in 与 explore/explore3.ans。\n\n该样例满足第 $5$ 个测试点的限制条件。\n\n**【样例 4】**\n\n见选手目录下的 explore/explore4.in 与 explore/explore4.ans。\n\n该样例满足第 $6$ 个测试点的限制条件。\n\n**【样例 5】**\n\n见选手目录下的 explore/explore5.in 与 explore/explore5.ans。\n\n该样例满足第 $8 \\sim 10$ 个测试点的限制条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\leq T \\leq 5$，$1 \\leq n, m \\leq 10^3$，$1 \\leq k \\leq 10^6$，$1 \\leq x_0 \\leq n$，$1 \\leq y_0 \\leq m$，$0 \\leq d_0 \\leq 3$，且机器人的起始位置为空地。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n$ | $m$ | $k$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $=1$ | $\\leq 2$ | $=1$ | 无 |\n| $2$ | ^ | ^ | ^ | ^ |\n| $3$ | $\\leq 10^2$ | $\\leq 10^2$ | ^ | ^ |\n| $4$ | ^ | ^ | ^ | ^ |\n| $5$ | $=1$ | $\\leq 10^3$ | $\\leq 2\\times 10^3$ | 地图上所有位置均为空地 |\n| $6$ | ^ | ^ | ^ | 无|\n| $7$ | $\\leq 10^3$ | ^ | $\\leq 10^6$ |  地图上所有位置均为空地 |\n| $8$ | ^ | ^ | ^ | 无 |\n| $9$ | ^ | ^ | ^ | ^ |\n| $10$ | ^ | ^ | ^ | ^ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2024] 地图探险", "background": null, "description": "小 A 打算前往一片丛林去探险。丛林的地理环境十分复杂，为了防止迷路，他先派遣了一个机器人前去探路。\n\n丛林的地图可以用一个 $n$ 行 $m$ 列的字符表来表示。我们将第 $i$ 行第 $j$ 列的位置的坐标记作 $(i, j)(1 \\leq i \\leq n$，$1 \\leq j \\leq m)$。如果这个位置的字符为 $\\tt x$，即代表这个位置上有障碍，不可通过。反之，若这个位置的字符为 $\\tt.$，即代表这个位置是一片空地，可以通过。\n\n这个机器人的状态由位置和朝向两部分组成。其中位置由坐标 $(x, y)(1 \\leq x \\leq n$，$1 \\leq y \\leq m)$ 刻画，它表示机器人处在地图上第 $x$ 行第 $y$ 列的位置。而朝向用一个 $0 \\sim 3$ 的整数 $d$ 表示，其中 $d = 0$ 代表向东，$d = 1$ 代表向南，$d = 2$ 代表向西，$d = 3$ 代表向北。\n\n初始时，机器人的位置为 $(x_0, y_0)$，朝向为 $d_0$。**保证初始时机器人所在的位置为空地**。接下来机器人将要进行 $k$ 次操作。每一步，机器人将按照如下的模式操作：\n\n1. 假设机器人当前处在的位置为 $(x, y)$，朝向为 $d$。则它的方向上的下一步的位置 $(x^′, y^′)$ 定义如下：若 $d = 0$，则令 $(x^′, y^′) = (x, y + 1)$，若 $d = 1$，则令 $(x^′, y^′) = (x + 1, y)$，若 $d = 2$，则令 $(x^′, y^′) = (x, y - 1)$，若 $d = 3$，则令 $(x^′, y^′) = (x - 1, y)$。\n\n2. 接下来，机器人判断它下一步的位置是否在地图内，且是否为空地。具体地说，它判断 $(x^′, y^′)$ 是否满足 $1 \\leq x^′ \\leq n, 1 \\leq y^′ \\leq m$，且 $(x^′, y^′)$ 位置上是空地。如果条件成立，则机器人会向前走一步。它新的位置变为 $(x^′, y^′)$，且朝向不变。如果条件不成立，则它会执行“向右转”操作。也就是说，令 $d^′ = (d + 1) \\bmod 4$（即 $d + 1$ 除以 $4$ 的余数），且它所处的位置保持不变，但朝向由 $d$ 变为 $d^′$。\n\n小 A 想要知道，在机器人执行完 $k$ 步操作之后，地图上所有被机器人经过的位置（包括起始位置）有几个。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含三个正整数 $n, m, k$。其中 $n, m$ 表示地图的行数和列数，$k$ 表示机器人执行操作的次数。\n\n第二行包含两个正整数 $x_0, y_0$ 和一个非负整数 $d_0$。\n\n接下来 $n$ 行，每行包含一个长度为 $m$ 的字符串。保证字符串中只包含 $\\tt{x}$ 和 $\\tt{.}$ 两个字符。其中，第 $x$ 行的字符串的第 $y$ 个字符代表的位置为 $(x, y)$。这个位置是 $\\tt{x}$ 即代表它是障碍，否则代表它是空地。数据保证机器人初始时所在的位置为空地。", "outputFormat": "对于每组数据：输出一行包含一个正整数，表示地图上所有被机器人经过的位置（包括起始位置）的个数。", "hint": "**【样例 1 解释】**\n\n该样例包含两组数据。对第一组数据，机器人的状态以如下方式变化：\n1. 初始时，机器人位于位置 $(1, 1)$，方向朝西（用数字 $2$ 代表）。\n2. 第一步，机器人发现它下一步的位置 $(1, 0)$ 不在地图内，因此，它会执行“向右转”操作。此时，它的位置仍然为 $(1, 1)$，但方向朝北（用数字 $3$ 代表）。\n3. 第二步，机器人发现它下一步的位置 $(0, 1)$ 不在地图内，因此，它仍然会执行“向右转”操作。此时，它的位置仍然为 $(1, 1)$，但方向朝东（用数字 $0$ 代表）。\n4. 第三步，机器人发现它下一步的位置 $(1, 2)$ 在地图内，且为空地。因此，它会向东走一步。此时，它的位置变为 $(1, 2)$，方向仍然朝东。\n5. 第四步，机器人发现它下一步的位置 $(1, 3)$ 在地图内，且为空地。因此，它会向东走一步。此时，它的位置变为 $(1, 3)$，方向仍然朝东。\n\n因此，四步之后，机器人经过的位置有三个，分别为 $(1, 1),(1, 2),(1, 3)$。\n\n对第二组数据，机器人依次执行的操作指令为：向东走到 $(1, 2)$，向东走到 $(1, 3)$，向东走到 $(1, 4)$，向东走到 $(1, 5)$，向右转，向南走到 $(2, 5)$，向南走到 $(3, 5)$，向南走到 $(4, 5)$，向南走到 $(5, 5)$，向右转，向西走到 $(5, 4)$，向西走到 $(5, 3)$，向西走到 $(5, 2)$，向右转，向北走到 $(4, 2)$，向右转，向右转，向南走到 $(5, 2)$，向右转，向右转。\n\n**【样例 2】**\n\n见选手目录下的 explore/explore2.in 与 explore/explore2.ans。\n\n该样例满足第 $3\\sim 4$ 个测试点的限制条件。\n\n**【样例 3】**\n\n见选手目录下的 explore/explore3.in 与 explore/explore3.ans。\n\n该样例满足第 $5$ 个测试点的限制条件。\n\n**【样例 4】**\n\n见选手目录下的 explore/explore4.in 与 explore/explore4.ans。\n\n该样例满足第 $6$ 个测试点的限制条件。\n\n**【样例 5】**\n\n见选手目录下的 explore/explore5.in 与 explore/explore5.ans。\n\n该样例满足第 $8 \\sim 10$ 个测试点的限制条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\leq T \\leq 5$，$1 \\leq n, m \\leq 10^3$，$1 \\leq k \\leq 10^6$，$1 \\leq x_0 \\leq n$，$1 \\leq y_0 \\leq m$，$0 \\leq d_0 \\leq 3$，且机器人的起始位置为空地。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n$ | $m$ | $k$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $=1$ | $\\leq 2$ | $=1$ | 无 |\n| $2$ | ^ | ^ | ^ | ^ |\n| $3$ | $\\leq 10^2$ | $\\leq 10^2$ | ^ | ^ |\n| $4$ | ^ | ^ | ^ | ^ |\n| $5$ | $=1$ | $\\leq 10^3$ | $\\leq 2\\times 10^3$ | 地图上所有位置均为空地 |\n| $6$ | ^ | ^ | ^ | 无|\n| $7$ | $\\leq 10^3$ | ^ | $\\leq 10^6$ |  地图上所有位置均为空地 |\n| $8$ | ^ | ^ | ^ | 无 |\n| $9$ | ^ | ^ | ^ | ^ |\n| $10$ | ^ | ^ | ^ | ^ |", "locale": "zh-CN"}}}
{"pid": "P11229", "type": "P", "difficulty": 3, "samples": [["5\n1\n2\n3\n6\n18", "-1\n1\n7\n6\n208"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "数学", "贪心", "2024", "O2优化", "构造", "CSP-J 入门级", "分类讨论"], "title": "[CSP-J 2024] 小木棍", "background": null, "description": "小 S 喜欢收集小木棍。在收集了 $n$ 根长度相等的小木棍之后，他闲来无事，便用它们拼起了数字。用小木棍拼每种数字的方法如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8zubqass.png)\n\n现在小 S 希望拼出一个**正**整数，满足如下条件：\n\n- 拼出这个数**恰好**使用 $n$ 根小木棍；\n- 拼出的数没有前导 $0$；\n- 在满足以上两个条件的前提下，这个数尽可能小。\n\n小 S 想知道这个数是多少，可 $n$ 很大，把木棍整理清楚就把小 S 折腾坏了，所以你需要帮他解决这个问题。如果不存在正整数满足以上条件，你需要输出 $-1$ 进行报告。", "inputFormat": "本题有多组测试数据。\n\n输入的第一行包含一个正整数 $T$，表示数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n一行包含一个整数 $n$，表示木棍数。", "outputFormat": "对于每组数据：输出一行，如果存在满足题意的正整数，输出这个数；否则输出 $-1$。", "hint": "**【样例 1 解释】**\n\n- 对于第一组测试数据，不存在任何一个正整数可以使用恰好一根小木棍摆出，故输出 $-1$。\n- 对于第四组测试数据，注意 $0$ 并不是一个满足要求的方案。摆出 $9$、$41$ 以及 $111$ 都恰好需要 $6$ 根小木棍，但它们不是摆出的数最小的方案。\n- 对于第五组测试数据，摆出 $208$ 需要 $5 + 6 + 7 = 18$ 根小木棍。可以证明摆出任何一个小于 $208$ 的正整数需要的小木棍数都不是 $18$。注意尽管拼出 $006$ 也需要 $18$ 根小木棍，但因为这个数有前导零，因此并不是一个满足要求的方案。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\leq T \\leq 50$，$1 \\leq n \\leq 10^5$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $20$ | 无 |\n| $2$ | $50$ | ^ |\n| $3$ | $10^3$ | A |\n| $4,5$ | $10^5$ | ^ |\n| $6$ | $10^3$ | B |\n| $7,8$ | $10^5$ | ^ |\n| $9$ | $10^3$ | 无 |\n| $10$ | $10^5$ | ^ |\n\n特殊性质 A：保证 $n$ 是 $7$ 的倍数且 $n \\geq 100$。\n\n特殊性质 B：保证存在整数 $k$ 使得 $n = 7k + 1$，且 $n \\geq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2024] 小木棍", "background": null, "description": "小 S 喜欢收集小木棍。在收集了 $n$ 根长度相等的小木棍之后，他闲来无事，便用它们拼起了数字。用小木棍拼每种数字的方法如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8zubqass.png)\n\n现在小 S 希望拼出一个**正**整数，满足如下条件：\n\n- 拼出这个数**恰好**使用 $n$ 根小木棍；\n- 拼出的数没有前导 $0$；\n- 在满足以上两个条件的前提下，这个数尽可能小。\n\n小 S 想知道这个数是多少，可 $n$ 很大，把木棍整理清楚就把小 S 折腾坏了，所以你需要帮他解决这个问题。如果不存在正整数满足以上条件，你需要输出 $-1$ 进行报告。", "inputFormat": "本题有多组测试数据。\n\n输入的第一行包含一个正整数 $T$，表示数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n一行包含一个整数 $n$，表示木棍数。", "outputFormat": "对于每组数据：输出一行，如果存在满足题意的正整数，输出这个数；否则输出 $-1$。", "hint": "**【样例 1 解释】**\n\n- 对于第一组测试数据，不存在任何一个正整数可以使用恰好一根小木棍摆出，故输出 $-1$。\n- 对于第四组测试数据，注意 $0$ 并不是一个满足要求的方案。摆出 $9$、$41$ 以及 $111$ 都恰好需要 $6$ 根小木棍，但它们不是摆出的数最小的方案。\n- 对于第五组测试数据，摆出 $208$ 需要 $5 + 6 + 7 = 18$ 根小木棍。可以证明摆出任何一个小于 $208$ 的正整数需要的小木棍数都不是 $18$。注意尽管拼出 $006$ 也需要 $18$ 根小木棍，但因为这个数有前导零，因此并不是一个满足要求的方案。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\leq T \\leq 50$，$1 \\leq n \\leq 10^5$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $20$ | 无 |\n| $2$ | $50$ | ^ |\n| $3$ | $10^3$ | A |\n| $4,5$ | $10^5$ | ^ |\n| $6$ | $10^3$ | B |\n| $7,8$ | $10^5$ | ^ |\n| $9$ | $10^3$ | 无 |\n| $10$ | $10^5$ | ^ |\n\n特殊性质 A：保证 $n$ 是 $7$ 的倍数且 $n \\geq 100$。\n\n特殊性质 B：保证存在整数 $k$ 使得 $n = 7k + 1$，且 $n \\geq 100$。", "locale": "zh-CN"}}}
{"pid": "P11230", "type": "P", "difficulty": 5, "samples": [["1\n3 3 7\n5 1 2 3 4 1\n3 1 2 5\n3 5 1 6\n1 2\n1 4\n2 4\n3 4\n6 6\n1 1\n7 7", "1\n0\n1\n0\n1\n0\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "图论", "2024", "O2优化", "最短路", "CSP-J 入门级"], "title": "[CSP-J 2024] 接龙", "background": null, "description": "在玩惯了成语接龙之后，小 J 和他的朋友们发明了一个新的接龙规则。\n\n总共有 $n$ 个人参与这个接龙游戏，第 $i$ 个人会获得一个整数序列 $S_i$ 作为他的词库。\n\n一次游戏分为若干轮，每一轮规则如下：\n\n- $n$ 个人中的某个人 $p$ 带着他的词库 $S_p$ 进行接龙。若这不是游戏的第一轮，那么这一轮进行接龙的人不能与上一轮相同，但可以与上上轮或更往前的轮相同。\n- 接龙的人选择一个长度在 $[2, k]$ 的 $S_p$ 的连续子序列 $A$ 作为这一轮的**接龙序列**，其中 $k$ 是给定的常数。若这是游戏的第一轮，那么 $A$ 需要以元素 $1$ 开头，否则 $A$ 需要以上一轮的接龙序列的最后一个元素开头。\n  - 序列 $A$ 是序列 $S$ 的连续子序列当且仅当可以通过删除 $S$ 的开头和结尾的若干元素（可以不删除）得到 $A$。\n\n为了强调合作，小 J 给了 $n$ 个参与游戏的人 $q$ 个任务，第 $j$ 个任务需要这 $n$ 个人进行一次游戏，在这次游戏里进行恰好 $r_j$ 轮接龙，且最后一轮的接龙序列的最后一个元素恰好为 $c_j$。为了保证任务的可行性，小 J 请来你判断这 $q$ 个任务是否可以完成的，即是否存在一个可能的游戏过程满足任务条件。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含三个整数 $n, k, q$，分别表示参与游戏的人数、接龙序列长度上限以及任务个数。\n\n接下来 $n$ 行：\n\n第 $i$ 行包含 $(l_i + 1)$ 个整数 $l_i, S_{i,1}, S_{i,2}, \\dots , S_{i,l_i}$，其中第一个整数 $l_i$ 表示序列 $S_i$ 的长度，接下来 $l_i$ 个整数描述序列 $S_i$。\n\n接下来 $q$ 行：\n\n第 $j$ 行包含两个整数 $r_j, c_j$，描述一个任务。", "outputFormat": "对于每个任务：输出一行包含一个整数，若任务可以完成输出 1，否则输出 0。", "hint": "**【样例 1 解释】**\n\n在下文中，我们使用 $\\{A_i\\} = \\{A_1, A_2, \\dots , A_r\\}$ 表示一轮游戏中所有的接龙序列，$\\{p_i\\} = \\{p_1, p_2, \\dots , p_r\\}$ 表示对应的接龙的人的编号。由于所有字符均为一位数字，为了方便我们直接使用数字字符串表示序列。\n\n- 对于第一组询问，$p_1 = 1$、$A_1 = 12$ 是一个满足条件的游戏过程。\n- 对于第二组询问，可以证明任务不可完成。注意 $p_1 = 1$、$A_1 = 1234$ 不是合法的游戏过程，因为此时 $|A_1| = 4 > k$。\n- 对于第三组询问，$\\{p_i\\} = \\{2, 1\\}$、$\\{A_i\\} = \\{12, 234\\}$ 是一个满足条件的游戏过程。\n- 对于第四组询问，可以证明任务不可完成。注意 $\\{p_i\\} = \\{2, 1, 1\\}、\\{A_i\\} = \\{12, 23, 34\\}$ 不是一个合法的游戏过程，因为尽管所有的接龙序列长度均不超过 $k$，但第二轮和第三轮由同一个人接龙，不符合要求。\n- 对于第五组询问，$\\{p_i\\} = \\{1, 2, 3, 1, 2, 3\\}$、$\\{A_i\\} = \\{12, 25, 51, 12, 25, 516\\}$ 是一个满足条件的游戏过程。\n-  对于第六组询问，可以证明任务不可完成。注意每个接龙序列的长度必须大于等于 $2$，因此 $A_1 = 1$ 不是一个合法的游戏过程。\n- 对于第七组询问，所有人的词库均不存在字符 $\\tt 7$，因此任务显然不可完成。\n\n**【样例 2】**\n\n见选手目录下的 chain/chain2.in 与 chain/chain2.ans。\n\n该样例满足测试点 1 的特殊性质。\n\n**【样例 3】**\n\n见选手目录下的 chain/chain3.in 与 chain/chain3.ans。\n\n该样例满足测试点 2 的特殊性质。\n\n**【样例 4】**\n\n见选手目录下的 chain/chain4.in 与 chain/chain4.ans。\n\n该样例满足特殊性质 A，其中前两组测试数据满足 $n \\leq 1000$、$r \\leq 10$、单组测试数据内所有词库的长度和 $\\leq 2000$、$q \\leq 1000$。\n\n**【样例 5】**\n\n见选手目录下的 chain/chain5.in 与 chain/chain5.ans。\n\n该样例满足特殊性质 B，其中前两组测试数据满足 $n \\leq 1000$、$r \\leq 10$、单组测试数据内所有词库的长度和 $\\leq 2000$、$q \\leq 1000$。\n\n**【样例 6】**\n\n见选手目录下的 chain/chain6.in 与 chain/chain6.ans。\n\n该样例满足特殊性质 C，其中前两组测试数据满足 $n \\leq 1000$、$r \\leq 10$、单组测试数据内所有词库的长度和 $\\leq 2000$、$q \\leq 1000$。\n\n**【数据范围】**\n\n对于所有测试数据，保证：\n- $1 \\leq T \\leq 5$；\n- $1 \\leq n \\leq 10^5$，$2 \\leq k \\leq 2 \\times 10^5$，$1 \\leq q \\leq 10^5$；\n- $1 \\leq l_i \\leq 2 \\times 10^5$，$1 \\leq S_{i,j} \\leq 2 \\times 10^5$；\n- $1 \\leq r_j \\leq 10^2$，$1 \\leq c_j \\leq 2 \\times 10^5$；\n- 设 $\\sum l$ 为**单组测试数据内**所有 $l_i$ 的和，则 $\\sum l\\leq 2\\times 10^5$。\n\n::cute-table{tuack}\n\n| 测试点 | $n\\leq$ | $r\\leq$ | $\\sum l\\leq$ | $q\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^3$ | $1$ | $2000$ | $10^3$ | 无 |\n| $2,3$ | $10$ | $5$ | $20$ | $10^2$ | ^ |\n| $4,5$ | $10^3$ | $10$ | $2000$ | $10^3$ | A |\n| $6$ | $10^5$ | $10^2$ | $2\\times 10^5$ | $10^5$ | ^ |\n| $7,8$ | $10^3$ | $10$ | $2000$ | $10^3$ | B |\n| $9,10$ | $10^5$ | $10^2$ | $2\\times 10^5$ | $10^5$ | ^ |\n| $11,12$ | $10^3$ | $10$ | $2000$ | $10^3$ | C |\n| $13,14$ | $10^5$ | $10^2$ | $2\\times 10^5$ | $10^5$ | ^ |\n| $15\\sim 17$ | $10^3$ | $10$ | $2000$ | $10^3$ | 无 |\n| $18\\sim 20$ | $10^5$ | $10^2$ | $2\\times 10^5$ | $10^5$ | ^ |\n\n特殊性质 A：保证 $k = 2 \\times 10^5$。\n\n特殊性质 B：保证 $k ≤ 5$。\n\n特殊性质 C：保证在单组测试数据中，任意一个字符在词库中出现次数之和均不超过 $5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2024] 接龙", "background": null, "description": "在玩惯了成语接龙之后，小 J 和他的朋友们发明了一个新的接龙规则。\n\n总共有 $n$ 个人参与这个接龙游戏，第 $i$ 个人会获得一个整数序列 $S_i$ 作为他的词库。\n\n一次游戏分为若干轮，每一轮规则如下：\n\n- $n$ 个人中的某个人 $p$ 带着他的词库 $S_p$ 进行接龙。若这不是游戏的第一轮，那么这一轮进行接龙的人不能与上一轮相同，但可以与上上轮或更往前的轮相同。\n- 接龙的人选择一个长度在 $[2, k]$ 的 $S_p$ 的连续子序列 $A$ 作为这一轮的**接龙序列**，其中 $k$ 是给定的常数。若这是游戏的第一轮，那么 $A$ 需要以元素 $1$ 开头，否则 $A$ 需要以上一轮的接龙序列的最后一个元素开头。\n  - 序列 $A$ 是序列 $S$ 的连续子序列当且仅当可以通过删除 $S$ 的开头和结尾的若干元素（可以不删除）得到 $A$。\n\n为了强调合作，小 J 给了 $n$ 个参与游戏的人 $q$ 个任务，第 $j$ 个任务需要这 $n$ 个人进行一次游戏，在这次游戏里进行恰好 $r_j$ 轮接龙，且最后一轮的接龙序列的最后一个元素恰好为 $c_j$。为了保证任务的可行性，小 J 请来你判断这 $q$ 个任务是否可以完成的，即是否存在一个可能的游戏过程满足任务条件。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含三个整数 $n, k, q$，分别表示参与游戏的人数、接龙序列长度上限以及任务个数。\n\n接下来 $n$ 行：\n\n第 $i$ 行包含 $(l_i + 1)$ 个整数 $l_i, S_{i,1}, S_{i,2}, \\dots , S_{i,l_i}$，其中第一个整数 $l_i$ 表示序列 $S_i$ 的长度，接下来 $l_i$ 个整数描述序列 $S_i$。\n\n接下来 $q$ 行：\n\n第 $j$ 行包含两个整数 $r_j, c_j$，描述一个任务。", "outputFormat": "对于每个任务：输出一行包含一个整数，若任务可以完成输出 1，否则输出 0。", "hint": "**【样例 1 解释】**\n\n在下文中，我们使用 $\\{A_i\\} = \\{A_1, A_2, \\dots , A_r\\}$ 表示一轮游戏中所有的接龙序列，$\\{p_i\\} = \\{p_1, p_2, \\dots , p_r\\}$ 表示对应的接龙的人的编号。由于所有字符均为一位数字，为了方便我们直接使用数字字符串表示序列。\n\n- 对于第一组询问，$p_1 = 1$、$A_1 = 12$ 是一个满足条件的游戏过程。\n- 对于第二组询问，可以证明任务不可完成。注意 $p_1 = 1$、$A_1 = 1234$ 不是合法的游戏过程，因为此时 $|A_1| = 4 > k$。\n- 对于第三组询问，$\\{p_i\\} = \\{2, 1\\}$、$\\{A_i\\} = \\{12, 234\\}$ 是一个满足条件的游戏过程。\n- 对于第四组询问，可以证明任务不可完成。注意 $\\{p_i\\} = \\{2, 1, 1\\}、\\{A_i\\} = \\{12, 23, 34\\}$ 不是一个合法的游戏过程，因为尽管所有的接龙序列长度均不超过 $k$，但第二轮和第三轮由同一个人接龙，不符合要求。\n- 对于第五组询问，$\\{p_i\\} = \\{1, 2, 3, 1, 2, 3\\}$、$\\{A_i\\} = \\{12, 25, 51, 12, 25, 516\\}$ 是一个满足条件的游戏过程。\n-  对于第六组询问，可以证明任务不可完成。注意每个接龙序列的长度必须大于等于 $2$，因此 $A_1 = 1$ 不是一个合法的游戏过程。\n- 对于第七组询问，所有人的词库均不存在字符 $\\tt 7$，因此任务显然不可完成。\n\n**【样例 2】**\n\n见选手目录下的 chain/chain2.in 与 chain/chain2.ans。\n\n该样例满足测试点 1 的特殊性质。\n\n**【样例 3】**\n\n见选手目录下的 chain/chain3.in 与 chain/chain3.ans。\n\n该样例满足测试点 2 的特殊性质。\n\n**【样例 4】**\n\n见选手目录下的 chain/chain4.in 与 chain/chain4.ans。\n\n该样例满足特殊性质 A，其中前两组测试数据满足 $n \\leq 1000$、$r \\leq 10$、单组测试数据内所有词库的长度和 $\\leq 2000$、$q \\leq 1000$。\n\n**【样例 5】**\n\n见选手目录下的 chain/chain5.in 与 chain/chain5.ans。\n\n该样例满足特殊性质 B，其中前两组测试数据满足 $n \\leq 1000$、$r \\leq 10$、单组测试数据内所有词库的长度和 $\\leq 2000$、$q \\leq 1000$。\n\n**【样例 6】**\n\n见选手目录下的 chain/chain6.in 与 chain/chain6.ans。\n\n该样例满足特殊性质 C，其中前两组测试数据满足 $n \\leq 1000$、$r \\leq 10$、单组测试数据内所有词库的长度和 $\\leq 2000$、$q \\leq 1000$。\n\n**【数据范围】**\n\n对于所有测试数据，保证：\n- $1 \\leq T \\leq 5$；\n- $1 \\leq n \\leq 10^5$，$2 \\leq k \\leq 2 \\times 10^5$，$1 \\leq q \\leq 10^5$；\n- $1 \\leq l_i \\leq 2 \\times 10^5$，$1 \\leq S_{i,j} \\leq 2 \\times 10^5$；\n- $1 \\leq r_j \\leq 10^2$，$1 \\leq c_j \\leq 2 \\times 10^5$；\n- 设 $\\sum l$ 为**单组测试数据内**所有 $l_i$ 的和，则 $\\sum l\\leq 2\\times 10^5$。\n\n::cute-table{tuack}\n\n| 测试点 | $n\\leq$ | $r\\leq$ | $\\sum l\\leq$ | $q\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^3$ | $1$ | $2000$ | $10^3$ | 无 |\n| $2,3$ | $10$ | $5$ | $20$ | $10^2$ | ^ |\n| $4,5$ | $10^3$ | $10$ | $2000$ | $10^3$ | A |\n| $6$ | $10^5$ | $10^2$ | $2\\times 10^5$ | $10^5$ | ^ |\n| $7,8$ | $10^3$ | $10$ | $2000$ | $10^3$ | B |\n| $9,10$ | $10^5$ | $10^2$ | $2\\times 10^5$ | $10^5$ | ^ |\n| $11,12$ | $10^3$ | $10$ | $2000$ | $10^3$ | C |\n| $13,14$ | $10^5$ | $10^2$ | $2\\times 10^5$ | $10^5$ | ^ |\n| $15\\sim 17$ | $10^3$ | $10$ | $2000$ | $10^3$ | 无 |\n| $18\\sim 20$ | $10^5$ | $10^2$ | $2\\times 10^5$ | $10^5$ | ^ |\n\n特殊性质 A：保证 $k = 2 \\times 10^5$。\n\n特殊性质 B：保证 $k ≤ 5$。\n\n特殊性质 C：保证在单组测试数据中，任意一个字符在词库中出现次数之和均不超过 $5$。", "locale": "zh-CN"}}}
{"pid": "P11231", "type": "P", "difficulty": 2, "samples": [["5\n1 2 3 1 2", "2"], ["10\n136 136 136 2417 136 136 2417 136 136 136", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2024", "O2优化", "CSP-S 提高级"], "title": "[CSP-S 2024] 决斗", "background": null, "description": "今天是小 Q 的生日，他得到了 $n$ 张卡牌作为礼物。这些卡牌属于火爆的“决斗怪兽”，其中，第 $i$ 张卡代表一只攻击力为 $r_i$，防御力也为 $r_i$ 的怪兽。\n\n一场游戏分为若干回合。每回合，小 Q 会选择某只怪兽 $i$ 以及**另一只**怪兽 $j(i \\neq j)$，并让怪兽 $i$ 向怪兽 $j$ 发起攻击。此时，若怪兽 $i$ 的攻击力小于等于怪兽 $j$ 的防御力，则无事发生；否则，怪兽 $j$ 的防御被打破，怪兽 $j$ 退出游戏不再参与到剩下的游戏中。一只怪兽在整场游戏中**至多**只能发起一次攻击。当未退出游戏的怪兽都已发起过攻击时，游戏结束。\n\n小 Q 希望决定一组攻击顺序，使得在游戏结束时，未退出游戏的怪兽数量尽可能少。", "inputFormat": "输入的第一行包含一个正整数 $n$，表示卡牌的个数。\n\n输入的第二行包含 $n$ 个正整数，其中第 $i$ 个正整数表示第 $i$ 个怪兽的攻击力及防御力 $r_i$。", "outputFormat": "输出一行包含一个整数表示游戏结束时未退出游戏的怪兽数量的最小值。", "hint": "**【样例 1 解释】**\n\n其中一种最优方案为：第一回合让第 $2$ 只怪兽向第 $1$ 只怪兽发起攻击，第二回合让第 $5$ 只怪兽向第 $4$ 只怪兽发起攻击，第三回合让第 $3$ 只怪兽向第 $5$ 只怪兽发起攻击。此时没有退出游戏的怪兽都进行过攻击，游戏结束。可以证明没有更优的攻击顺序。\n\n**【样例 3】**\n\n见选手目录下的 duel/duel3.in 与 duel/duel3.ans。\n\n该样例满足 $\\forall 1 \\leq i \\leq n, r_i \\leq 2$。\n\n**【样例 4】**\n\n见选手目录下的 duel/duel4.in 与 duel/duel4.ans。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\leq n \\leq 10^5$，$1 \\leq r_i \\leq 10^5$。\n\n::cute-table{tuack}\n\n| 测试点 | $n$ | $r_i$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 4$ | $\\leq 10$ | $\\leq 10^5$ | 无特殊性质 |\n| $5\\sim 10$ | $\\leq 10^5$ | $\\leq 2$ | ^ |\n| $11\\sim 15$ | $\\leq 30$ | $\\leq 10^5$ | 特殊性质 A |\n| $16\\sim 20$ | $\\leq 10^5$ | ^ | 无特殊性质 |\n\n特殊性质 A：保证每个 $r_i$ 在可能的值域中独立均匀随机生成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-S 2024] 决斗", "background": null, "description": "今天是小 Q 的生日，他得到了 $n$ 张卡牌作为礼物。这些卡牌属于火爆的“决斗怪兽”，其中，第 $i$ 张卡代表一只攻击力为 $r_i$，防御力也为 $r_i$ 的怪兽。\n\n一场游戏分为若干回合。每回合，小 Q 会选择某只怪兽 $i$ 以及**另一只**怪兽 $j(i \\neq j)$，并让怪兽 $i$ 向怪兽 $j$ 发起攻击。此时，若怪兽 $i$ 的攻击力小于等于怪兽 $j$ 的防御力，则无事发生；否则，怪兽 $j$ 的防御被打破，怪兽 $j$ 退出游戏不再参与到剩下的游戏中。一只怪兽在整场游戏中**至多**只能发起一次攻击。当未退出游戏的怪兽都已发起过攻击时，游戏结束。\n\n小 Q 希望决定一组攻击顺序，使得在游戏结束时，未退出游戏的怪兽数量尽可能少。", "inputFormat": "输入的第一行包含一个正整数 $n$，表示卡牌的个数。\n\n输入的第二行包含 $n$ 个正整数，其中第 $i$ 个正整数表示第 $i$ 个怪兽的攻击力及防御力 $r_i$。", "outputFormat": "输出一行包含一个整数表示游戏结束时未退出游戏的怪兽数量的最小值。", "hint": "**【样例 1 解释】**\n\n其中一种最优方案为：第一回合让第 $2$ 只怪兽向第 $1$ 只怪兽发起攻击，第二回合让第 $5$ 只怪兽向第 $4$ 只怪兽发起攻击，第三回合让第 $3$ 只怪兽向第 $5$ 只怪兽发起攻击。此时没有退出游戏的怪兽都进行过攻击，游戏结束。可以证明没有更优的攻击顺序。\n\n**【样例 3】**\n\n见选手目录下的 duel/duel3.in 与 duel/duel3.ans。\n\n该样例满足 $\\forall 1 \\leq i \\leq n, r_i \\leq 2$。\n\n**【样例 4】**\n\n见选手目录下的 duel/duel4.in 与 duel/duel4.ans。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\leq n \\leq 10^5$，$1 \\leq r_i \\leq 10^5$。\n\n::cute-table{tuack}\n\n| 测试点 | $n$ | $r_i$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 4$ | $\\leq 10$ | $\\leq 10^5$ | 无特殊性质 |\n| $5\\sim 10$ | $\\leq 10^5$ | $\\leq 2$ | ^ |\n| $11\\sim 15$ | $\\leq 30$ | $\\leq 10^5$ | 特殊性质 A |\n| $16\\sim 20$ | $\\leq 10^5$ | ^ | 无特殊性质 |\n\n特殊性质 A：保证每个 $r_i$ 在可能的值域中独立均匀随机生成。", "locale": "zh-CN"}}}
{"pid": "P11232", "type": "P", "difficulty": 4, "samples": [["1\n5 5 15 3\n0 3 0\n12 4 0\n1 1 4\n5 5 -2\n6 4 -4\n2 5 8 9 15", "3 3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "数学", "贪心", "二分", "2024", "O2优化", "排序", "CSP-S 提高级", "分类讨论"], "title": "[CSP-S 2024] 超速检测", "background": null, "description": "小 D 新入职了某国的交管部门，他的第一个任务是负责国家的一条长度为 $L$ 的南北主干道的车辆超速检测。为了考考小 D，上司首先需要他解决一个简化的场景。\n\n这个周末，主干道上预计出现 $n$ 辆车，其中第 $i$ 辆车从主干道上距离最南端 $d_i$ 的位置驶入，以 $v_i$ 的初速度和 $a_i$ 的加速度做匀加速运动向北行驶。我们只考虑从南向北的车辆，故 $v_i > 0$，但 $a_i$ 可正可负，也可以为零。当车辆行驶到主干道最北端（即距离最南端为 $L$ 的位置）或速度降为 $0$（这只可能在 $a_i < 0$ 时发生）时，我们认为该车驶离主干道。\n\n主干道上设置了 $m$ 个测速仪，其中第 $j$ 个测速仪位于主干道上距离最南端 $p_j$ 的位置，每个测速仪可以设置开启或关闭。当某辆车经过某个开启的测速仪时，若这辆车的瞬时速度**超过**了道路限速 $V$，那么这辆车就会被判定为超速。注意当车辆驶入与驶出主干道时，如果在对应位置有一个开启的测速仪，这个测速仪也会对这辆车进行测速。\n\n上司首先想知道，如果所有测速仪都是开启的，那么这 $n$ 辆车中会有多少辆车被判定为超速。\n\n其次，为了节能，部门想关闭一部分测速仪。然而，他们不希望漏掉超速的车，也就是说，当 $n$ 辆车里的某辆车在所有测速仪都开启时被判定为超速，他们希望在关闭一部分测速仪以后它依然被判定为超速。上司还想知道在这样的条件下最多可以关闭多少测速仪。\n\n由于 $n$ 很大，上司允许小 D 使用编程解决这两个问题，于是小 D 找到了你。\n\n如果你对于加速度并不熟悉，小 D 贴心地在本题的“提示”部分提供了有关加速度的公式。", "inputFormat": "输入的第一行包含一个正整数 $T$，表示数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含四个整数 $n, m, L, V$，分别表示车辆数量、测速仪数量、主干道长度和道路限速。\n\n接下来 $n$ 行：\n\n第 $i$ 行包含三个整数 $d_i, v_i, a_i$ 描述一辆车。\n\n最后一行包含 $m$ 个整数 $p_1, p_2, \\dots , p_m$ 描述道路上所有测速仪的位置。", "outputFormat": "对于每组数据：输出一行包含两个整数，第一个整数为所有测速仪都开启时被判定为超速的车辆数量，第二个整数为在不漏掉超速车辆的前提下最多可以关闭的测速仪数量。", "hint": "**【样例 1 解释】**\n\n在该组测试数据中，主干道长度为 $15$，限速为 $3$，在距离最南端 $2, 5, 8, 9, 15$ 的位置各设有一个测速仪。\n- 第一辆车在最南端驶入，以 $3$ 的速度匀速行驶。这辆车在整个路段上都没有超速。\n- 第二辆车在距离最南端 $12$ 的位置驶入，以 $4$ 的速度匀速行驶。在最北端驶离主干道时，它会被距离最南端 $15$ 的测速仪判定为超速。\n- 第三辆车在距离最南端 $1$ 的位置驶入，以 $1$ 的初速度、$4$ 的加速度行驶。其在行驶了 $\\frac{3^2-1^2}{2\\times 4}=1$ 的距离，即到达 $2$ 的位置时，速度变为 $3$，并在之后一直超速。因此这辆车会被除了距离最南端 $2$ 的测速仪以外的其他测速仪判定为超速。\n- 第四辆车在距离最南端 $5$ 的位置驶入，以 $5$ 的初速度、$-2$ 的加速度行驶。其在行驶了 $\\frac{3^2-5^2}{2\\times (-2)}$ 的距离，即到达 $9$ 的位置时，速度变为 $3$。因此这辆车在距离最南端 $[5, 9)$ 时超速，会被距离最南端 $5$ 和 $8$ 的两个测速仪判定为超速。\n- 第五辆车在距离最南端 $6$ 的位置驶入，以 $4$ 的初速度、$−4$ 的加速度行驶。在其行驶了 $\\frac{3^2-4^2}{2\\times (-4)}=\\frac{7}{8}$ 的距离后，即这辆车到达 $6\\frac{7}{8}$ 的位置时，其速度变为 $3$。因此这辆车在距离最南端 $[6,6\\frac{7}{8})$ 时超速，但这段区间内没有测速仪，因此不会被判定为超速。\n\n因此第二、三、四辆车会被判定为超速，输出的第一个数为 $3$。\n\n我们可以关闭距离最南端 $2, 8, 9$ 的三个测速仪，保留 $5$ 和 $15$ 的两个测速仪，此时三辆之前被判定为超速的车依然被判定为超速。可以证明不存在更优方案，因此输出的第二个数为 $3$。\n\n**【样例 2】**\n\n见选手目录下的 detect/detect2.in 与 detect/detect2.ans。\n\n该组样例满足 $n, m \\leq 10$。\n\n**【样例 3】**\n\n见选手目录下的 detect/detect3.in 与 detect/detect3.ans。\n\n该组样例满足特殊性质 A，其中前十组测试数据满足 $n, m \\leq 3000$。\n\n**【样例 4】**\n\n见选手目录下的 detect/detect4.in 与 detect/detect4.ans。\n\n该组样例满足特殊性质 B，其中前十组测试数据满足 $n, m \\leq 3000$。\n\n**【样例 5】**\n\n见选手目录下的 detect/detect5.in 与 detect/detect5.ans。\n\n该组样例满足特殊性质 C，其中前十组测试数据满足 $n, m \\leq 3000$。\n\n**【数据范围】**\n\n对于所有测试数据，保证：\n\n- $1 \\leq T \\leq 20$；\n- $1 \\leq n, m \\leq 10^5$，$1 \\leq L \\leq 10^6$，$1 \\leq V \\leq 10^3$；\n- $0 \\leq d_i < L$，$1 \\leq v_i \\leq 10^3$，$|a_i| \\leq 10^3$；\n- $0 \\leq p_1 < p_2 < \\dots < p_m \\leq L$。\n\n::cute-table{tuack}\n\n| 测试点 | $n,m\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | 无 |\n| $2$ | $20$ | ^ |\n| $3$ | $3000$ | A |\n| $4$ | $10^5$ | ^ |\n| $5$ | $3000$ | B |\n| $6$ | $10^5$ | ^ |\n| $7$ | $3000$ | C |\n| $8$ | $10^5$ | ^ |\n| $9$ | $3000$ | 无 |\n| $10$ | $10^5$ | ^ |\n\n特殊性质 A：保证 $a_i = 0$。\n\n特殊性质 B：保证 $a_i > 0$。\n\n特殊性质 C：保证 $a_i < 0$，且所有车都不在最北端驶离主干道。\n\n**【提示】**\n\n与加速度有关的定义和公式如下：\n\n- 匀加速运动是指物体在运动过程中，加速度保持不变的运动，即每单位时间内速度的变化量是恒定的。\n- 当一辆车的初速度为 $v_0$、加速度 $a\\neq 0$，做匀加速运动，则 $t$ 时刻后它的速度 $v_1 = v_0 + a \\times t$，它的位移（即行驶路程）$s=v_0\\times t+0.5\\times a\\times t^2$。\n- 当一辆车的初速度为 $v_0$、加速度 $a \\neq 0$，做匀加速运动，则当它的位移（即行驶路程）为 $s$ 时，这辆车的瞬时速度为 $\\sqrt{v_0^2+2\\times a\\times s}$。\n- 当一辆车的初速度为 $v_0$、加速度 $a \\neq 0$，在它的位移（即行驶路程）为 $\\frac{v_1^2-v_0^2}{2a}$ 时，这辆车的瞬时速度为 $v_1$。\n\n如果你使用浮点数进行计算，需要注意潜在的精度问题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-S 2024] 超速检测", "background": null, "description": "小 D 新入职了某国的交管部门，他的第一个任务是负责国家的一条长度为 $L$ 的南北主干道的车辆超速检测。为了考考小 D，上司首先需要他解决一个简化的场景。\n\n这个周末，主干道上预计出现 $n$ 辆车，其中第 $i$ 辆车从主干道上距离最南端 $d_i$ 的位置驶入，以 $v_i$ 的初速度和 $a_i$ 的加速度做匀加速运动向北行驶。我们只考虑从南向北的车辆，故 $v_i > 0$，但 $a_i$ 可正可负，也可以为零。当车辆行驶到主干道最北端（即距离最南端为 $L$ 的位置）或速度降为 $0$（这只可能在 $a_i < 0$ 时发生）时，我们认为该车驶离主干道。\n\n主干道上设置了 $m$ 个测速仪，其中第 $j$ 个测速仪位于主干道上距离最南端 $p_j$ 的位置，每个测速仪可以设置开启或关闭。当某辆车经过某个开启的测速仪时，若这辆车的瞬时速度**超过**了道路限速 $V$，那么这辆车就会被判定为超速。注意当车辆驶入与驶出主干道时，如果在对应位置有一个开启的测速仪，这个测速仪也会对这辆车进行测速。\n\n上司首先想知道，如果所有测速仪都是开启的，那么这 $n$ 辆车中会有多少辆车被判定为超速。\n\n其次，为了节能，部门想关闭一部分测速仪。然而，他们不希望漏掉超速的车，也就是说，当 $n$ 辆车里的某辆车在所有测速仪都开启时被判定为超速，他们希望在关闭一部分测速仪以后它依然被判定为超速。上司还想知道在这样的条件下最多可以关闭多少测速仪。\n\n由于 $n$ 很大，上司允许小 D 使用编程解决这两个问题，于是小 D 找到了你。\n\n如果你对于加速度并不熟悉，小 D 贴心地在本题的“提示”部分提供了有关加速度的公式。", "inputFormat": "输入的第一行包含一个正整数 $T$，表示数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含四个整数 $n, m, L, V$，分别表示车辆数量、测速仪数量、主干道长度和道路限速。\n\n接下来 $n$ 行：\n\n第 $i$ 行包含三个整数 $d_i, v_i, a_i$ 描述一辆车。\n\n最后一行包含 $m$ 个整数 $p_1, p_2, \\dots , p_m$ 描述道路上所有测速仪的位置。", "outputFormat": "对于每组数据：输出一行包含两个整数，第一个整数为所有测速仪都开启时被判定为超速的车辆数量，第二个整数为在不漏掉超速车辆的前提下最多可以关闭的测速仪数量。", "hint": "**【样例 1 解释】**\n\n在该组测试数据中，主干道长度为 $15$，限速为 $3$，在距离最南端 $2, 5, 8, 9, 15$ 的位置各设有一个测速仪。\n- 第一辆车在最南端驶入，以 $3$ 的速度匀速行驶。这辆车在整个路段上都没有超速。\n- 第二辆车在距离最南端 $12$ 的位置驶入，以 $4$ 的速度匀速行驶。在最北端驶离主干道时，它会被距离最南端 $15$ 的测速仪判定为超速。\n- 第三辆车在距离最南端 $1$ 的位置驶入，以 $1$ 的初速度、$4$ 的加速度行驶。其在行驶了 $\\frac{3^2-1^2}{2\\times 4}=1$ 的距离，即到达 $2$ 的位置时，速度变为 $3$，并在之后一直超速。因此这辆车会被除了距离最南端 $2$ 的测速仪以外的其他测速仪判定为超速。\n- 第四辆车在距离最南端 $5$ 的位置驶入，以 $5$ 的初速度、$-2$ 的加速度行驶。其在行驶了 $\\frac{3^2-5^2}{2\\times (-2)}$ 的距离，即到达 $9$ 的位置时，速度变为 $3$。因此这辆车在距离最南端 $[5, 9)$ 时超速，会被距离最南端 $5$ 和 $8$ 的两个测速仪判定为超速。\n- 第五辆车在距离最南端 $6$ 的位置驶入，以 $4$ 的初速度、$−4$ 的加速度行驶。在其行驶了 $\\frac{3^2-4^2}{2\\times (-4)}=\\frac{7}{8}$ 的距离后，即这辆车到达 $6\\frac{7}{8}$ 的位置时，其速度变为 $3$。因此这辆车在距离最南端 $[6,6\\frac{7}{8})$ 时超速，但这段区间内没有测速仪，因此不会被判定为超速。\n\n因此第二、三、四辆车会被判定为超速，输出的第一个数为 $3$。\n\n我们可以关闭距离最南端 $2, 8, 9$ 的三个测速仪，保留 $5$ 和 $15$ 的两个测速仪，此时三辆之前被判定为超速的车依然被判定为超速。可以证明不存在更优方案，因此输出的第二个数为 $3$。\n\n**【样例 2】**\n\n见选手目录下的 detect/detect2.in 与 detect/detect2.ans。\n\n该组样例满足 $n, m \\leq 10$。\n\n**【样例 3】**\n\n见选手目录下的 detect/detect3.in 与 detect/detect3.ans。\n\n该组样例满足特殊性质 A，其中前十组测试数据满足 $n, m \\leq 3000$。\n\n**【样例 4】**\n\n见选手目录下的 detect/detect4.in 与 detect/detect4.ans。\n\n该组样例满足特殊性质 B，其中前十组测试数据满足 $n, m \\leq 3000$。\n\n**【样例 5】**\n\n见选手目录下的 detect/detect5.in 与 detect/detect5.ans。\n\n该组样例满足特殊性质 C，其中前十组测试数据满足 $n, m \\leq 3000$。\n\n**【数据范围】**\n\n对于所有测试数据，保证：\n\n- $1 \\leq T \\leq 20$；\n- $1 \\leq n, m \\leq 10^5$，$1 \\leq L \\leq 10^6$，$1 \\leq V \\leq 10^3$；\n- $0 \\leq d_i < L$，$1 \\leq v_i \\leq 10^3$，$|a_i| \\leq 10^3$；\n- $0 \\leq p_1 < p_2 < \\dots < p_m \\leq L$。\n\n::cute-table{tuack}\n\n| 测试点 | $n,m\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | 无 |\n| $2$ | $20$ | ^ |\n| $3$ | $3000$ | A |\n| $4$ | $10^5$ | ^ |\n| $5$ | $3000$ | B |\n| $6$ | $10^5$ | ^ |\n| $7$ | $3000$ | C |\n| $8$ | $10^5$ | ^ |\n| $9$ | $3000$ | 无 |\n| $10$ | $10^5$ | ^ |\n\n特殊性质 A：保证 $a_i = 0$。\n\n特殊性质 B：保证 $a_i > 0$。\n\n特殊性质 C：保证 $a_i < 0$，且所有车都不在最北端驶离主干道。\n\n**【提示】**\n\n与加速度有关的定义和公式如下：\n\n- 匀加速运动是指物体在运动过程中，加速度保持不变的运动，即每单位时间内速度的变化量是恒定的。\n- 当一辆车的初速度为 $v_0$、加速度 $a\\neq 0$，做匀加速运动，则 $t$ 时刻后它的速度 $v_1 = v_0 + a \\times t$，它的位移（即行驶路程）$s=v_0\\times t+0.5\\times a\\times t^2$。\n- 当一辆车的初速度为 $v_0$、加速度 $a \\neq 0$，做匀加速运动，则当它的位移（即行驶路程）为 $s$ 时，这辆车的瞬时速度为 $\\sqrt{v_0^2+2\\times a\\times s}$。\n- 当一辆车的初速度为 $v_0$、加速度 $a \\neq 0$，在它的位移（即行驶路程）为 $\\frac{v_1^2-v_0^2}{2a}$ 时，这辆车的瞬时速度为 $v_1$。\n\n如果你使用浮点数进行计算，需要注意潜在的精度问题。", "locale": "zh-CN"}}}
{"pid": "P11233", "type": "P", "difficulty": 5, "samples": [["3\n3\n1 2 1\n4\n1 2 3 4\n8\n3 5 2 5 1 2 1 4", "1\n0\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "2024", "O2优化", "动态规划优化", "CSP-S 提高级"], "title": "[CSP-S 2024] 染色", "background": null, "description": "给定一个长度为 $n$ 的正整数数组 $A$，其中所有数从左至右排成一排。\n\n你需要将 $A$ 中的每个数染成红色或蓝色之一，然后按如下方式计算最终得分：\n\n设 $C$ 为长度为 $n$ 的整数数组，对于 $A$ 中的每个数 $A_i$（$1 \\leq i \\leq n$）：\n\n- 如果 $A_i$ 左侧没有与其同色的数，则令 $C_i = 0$。\n- 否则，记其左侧**与其最靠近的同色数**为 $A_j$，若 $A_i = A_j$，则令 $C_i = A_i$，否则令 $C_i = 0$。\n\n你的最终得分为 $C$ 中所有整数的和，即 $\\sum \\limits_{i=1}^n C_i$。你需要最大化最终得分，请求出最终得分的最大值。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含一个正整数 $n$，表示数组长度。\n\n第二行包含 $n$ 个正整数 $A_1, A_2, \\dots, A_n$，表示数组 $A$ 中的元素。", "outputFormat": "对于每组数据：输出一行包含一个非负整数，表示最终得分的最大可能值。", "hint": "**【样例 1 解释】**\n\n对于第一组数据，以下为三种可能的染色方案：\n\n1. 将 $A_1, A_2$ 染成红色，将 $A_3$ 染成蓝色（$\\red{1}\\red{2}\\blue{1}$），其得分计算方式如下：\n- 对于 $A_1$，由于其左侧没有红色的数，所以 $C_1 = 0$。\n- 对于 $A_2$，其左侧与其最靠近的红色数为 $A_1$。由于 $A_1 \\neq A_2$，所以 $C_2 = 0$。\n- 对于 $A_3$，由于其左侧没有蓝色的数，所以 $C_3 = 0$。    \n该方案最终得分为 $C_1 + C_2 + C_3 = 0$。\n2. 将 $A_1, A_2, A_3$ 全部染成红色（$\\red{121}$），其得分计算方式如下：\n- 对于 $A_1$，由于其左侧没有红色的数，所以 $C_1 = 0$。\n- 对于 $A_2$，其左侧与其最靠近的红色数为 $A_1$。由于 $A_1 \\neq A_2$，所以 $C_2 = 0$。\n- 对于 $A_3$，其左侧与其最靠近的红色数为 $A_2$。由于 $A_2 \\neq A_3$，所以 $C_3 = 0$。    \n该方案最终得分为 $C_1 + C_2 + C_3 = 0$。\n3. 将 $A_1, A_3$ 染成红色，将 $A_2$ 染成蓝色（$\\red{1}\\blue{2}\\red{1}$），其得分计算方式如下：\n- 对于 $A_1$，由于其左侧没有红色的数，所以 $C_1 = 0$。\n- 对于 $A_2$，由于其左侧没有蓝色的数，所以 $C_2 = 0$。\n- 对于 $A_3$，其左侧与其最靠近的红色数为 $A_1$。由于 $A_1 = A_3$，所以 $C_3 = A_3 = 1$。    \n该方案最终得分为 $C_1 + C_2 + C_3 = 1$。\n\n可以证明，没有染色方案使得最终得分大于 $1$。\n\n对于第二组数据，可以证明，任何染色方案的最终得分都是 $0$。\n\n对于第三组数据，一种最优的染色方案为将 $A_1, A_2, A_4, A_5, A_7$ 染为红色，将 $A_3, A_6, A_8$ 染为蓝色（$\\red{35}\\blue{2}\\red{51}\\blue{2}\\red{1}\\blue{4}$），其对应 $C = [0, 0, 0, 5, 0, 2, 1, 0]$，最终得分为 $8$。\n\n**【样例 2】**\n\n见选手目录下的 color/color2.in 与 color/color2.ans。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\leq T\\leq 10$，$2\\leq n\\leq 2\\times 10^5$，$1\\leq A_i\\leq 10^6$。\n\n::cute-table{tuack}\n\n| 测试点 | $n$ | $A_i$ |\n| :----------: | :----------: | :----------: |\n| $1\\sim 4$ | $\\leq 15$ | $\\leq 15$ |\n| $5\\sim 7$ | $\\leq 10^2$ | $\\leq 10^2$ |\n| $8\\sim 10$ | $\\leq 2000$ | $\\leq 2000$ |\n| $11,12$ | $\\leq 2\\times 10^4$ | $\\leq 10^6$ |\n| $13\\sim 15$ | $\\leq 2\\times 10^5$ | $\\leq 10$ |\n| $16\\sim 20$ | ^ | $\\leq 10^6$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-S 2024] 染色", "background": null, "description": "给定一个长度为 $n$ 的正整数数组 $A$，其中所有数从左至右排成一排。\n\n你需要将 $A$ 中的每个数染成红色或蓝色之一，然后按如下方式计算最终得分：\n\n设 $C$ 为长度为 $n$ 的整数数组，对于 $A$ 中的每个数 $A_i$（$1 \\leq i \\leq n$）：\n\n- 如果 $A_i$ 左侧没有与其同色的数，则令 $C_i = 0$。\n- 否则，记其左侧**与其最靠近的同色数**为 $A_j$，若 $A_i = A_j$，则令 $C_i = A_i$，否则令 $C_i = 0$。\n\n你的最终得分为 $C$ 中所有整数的和，即 $\\sum \\limits_{i=1}^n C_i$。你需要最大化最终得分，请求出最终得分的最大值。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含一个正整数 $n$，表示数组长度。\n\n第二行包含 $n$ 个正整数 $A_1, A_2, \\dots, A_n$，表示数组 $A$ 中的元素。", "outputFormat": "对于每组数据：输出一行包含一个非负整数，表示最终得分的最大可能值。", "hint": "**【样例 1 解释】**\n\n对于第一组数据，以下为三种可能的染色方案：\n\n1. 将 $A_1, A_2$ 染成红色，将 $A_3$ 染成蓝色（$\\red{1}\\red{2}\\blue{1}$），其得分计算方式如下：\n- 对于 $A_1$，由于其左侧没有红色的数，所以 $C_1 = 0$。\n- 对于 $A_2$，其左侧与其最靠近的红色数为 $A_1$。由于 $A_1 \\neq A_2$，所以 $C_2 = 0$。\n- 对于 $A_3$，由于其左侧没有蓝色的数，所以 $C_3 = 0$。    \n该方案最终得分为 $C_1 + C_2 + C_3 = 0$。\n2. 将 $A_1, A_2, A_3$ 全部染成红色（$\\red{121}$），其得分计算方式如下：\n- 对于 $A_1$，由于其左侧没有红色的数，所以 $C_1 = 0$。\n- 对于 $A_2$，其左侧与其最靠近的红色数为 $A_1$。由于 $A_1 \\neq A_2$，所以 $C_2 = 0$。\n- 对于 $A_3$，其左侧与其最靠近的红色数为 $A_2$。由于 $A_2 \\neq A_3$，所以 $C_3 = 0$。    \n该方案最终得分为 $C_1 + C_2 + C_3 = 0$。\n3. 将 $A_1, A_3$ 染成红色，将 $A_2$ 染成蓝色（$\\red{1}\\blue{2}\\red{1}$），其得分计算方式如下：\n- 对于 $A_1$，由于其左侧没有红色的数，所以 $C_1 = 0$。\n- 对于 $A_2$，由于其左侧没有蓝色的数，所以 $C_2 = 0$。\n- 对于 $A_3$，其左侧与其最靠近的红色数为 $A_1$。由于 $A_1 = A_3$，所以 $C_3 = A_3 = 1$。    \n该方案最终得分为 $C_1 + C_2 + C_3 = 1$。\n\n可以证明，没有染色方案使得最终得分大于 $1$。\n\n对于第二组数据，可以证明，任何染色方案的最终得分都是 $0$。\n\n对于第三组数据，一种最优的染色方案为将 $A_1, A_2, A_4, A_5, A_7$ 染为红色，将 $A_3, A_6, A_8$ 染为蓝色（$\\red{35}\\blue{2}\\red{51}\\blue{2}\\red{1}\\blue{4}$），其对应 $C = [0, 0, 0, 5, 0, 2, 1, 0]$，最终得分为 $8$。\n\n**【样例 2】**\n\n见选手目录下的 color/color2.in 与 color/color2.ans。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\leq T\\leq 10$，$2\\leq n\\leq 2\\times 10^5$，$1\\leq A_i\\leq 10^6$。\n\n::cute-table{tuack}\n\n| 测试点 | $n$ | $A_i$ |\n| :----------: | :----------: | :----------: |\n| $1\\sim 4$ | $\\leq 15$ | $\\leq 15$ |\n| $5\\sim 7$ | $\\leq 10^2$ | $\\leq 10^2$ |\n| $8\\sim 10$ | $\\leq 2000$ | $\\leq 2000$ |\n| $11,12$ | $\\leq 2\\times 10^4$ | $\\leq 10^6$ |\n| $13\\sim 15$ | $\\leq 2\\times 10^5$ | $\\leq 10$ |\n| $16\\sim 20$ | ^ | $\\leq 10^6$ |", "locale": "zh-CN"}}}
{"pid": "P11234", "type": "P", "difficulty": 7, "samples": [["5 5\n0 0 0 0 0\n5 4 1 2 3\n1001\n10\n1\n4\n2 1 0 0\n1 2 1 0\n0 2 3 1\n2 2 0 1", "5\n19\n7\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "递推", "递归", "2024", "O2优化", "深度优先搜索 DFS", "树形 DP", "差分", "CSP-S 提高级"], "title": "[CSP-S 2024] 擂台游戏", "background": "", "description": "小 S 想要举办一场擂台游戏，如果共有 $2^k$ 名选手参加，那么游戏分为 $k$ 轮进行：\n\n- 第一轮编号为 $1, 2$ 的选手进行一次对局，编号为 $3, 4$ 的选手进行一次对局，以此类推，编号为 $2^k - 1, 2^k$ 的选手进行一次对局。\n- 第二轮在只保留第一轮的胜者的前提下，相邻的两位依次进行一场对局。\n- 以此类推，第 $k - 1$ 轮在只保留第 $k - 2$ 轮的 $4$ 位胜者的前提下，前两位、后两位分别进行对局，也就是所谓的半决赛。\n- 第 $k$ 轮即为半决赛两位胜者的决赛。\n\n确定了游戏晋级的规则后，小 S 将比赛的规则设置为了擂台赛。具体而言，每位选手都有一个能力值 $a_1, a_2, \\dots , a_{2^k}$，能力值为 $[0,2^{31}-1]$ 之内的整数。对于每场比赛，会先抽签决定一个数 $0/1$，我们将第 $R$ 轮的第 $G$ 场比赛抽到的数记为 $d_{R,G}$。抽到 $0$ 则表示表示编号小的选手为擂主，抽到 $1$ 则表示编号大的选手为擂主。擂主获胜当且仅当他的能力值 $a\\geq R$。也就是说，游戏的胜负只取决于**擂主的能力值**与**当前比赛是第几轮**的大小关系，**与另一位的能力值无关**。\n\n现在，小 S 先后陆续收到了 $n$ 位选手的报名信息，他们分别告知了小 S 自己的能力值。小 S 会按照报名的先后顺序对选手进行编号为 $1, 2, \\dots, n$。小 S 关心的是，补充**尽量少**的选手使总人数为 $2$ 的整次幂，且所有选手进行一次完整的擂台游戏后，所有可能成为总冠军的选手的**编号之和**是多少。\n\n形式化地，设 $k$ 是最小的非负整数使得 $2^k\\geq n$，那么应当补充 $(2^k-n)$ 名选手，且补充的选手的能力值可以任取 $[0,2^{31}-1]$ 之内的整数。**如果补充的选手有可能取胜，也应当计入答案中**。\n\n当然小 S 觉得这个问题还是太简单了，所以他给了你 $m$ 个询问 $c_1,c_2,\\dots,c_m$。小 S 希望你帮忙对于每个 $c_i$ 求出，在只收到前 $c_i$ 位选手的报名信息时，这个问题的答案是多少。", "inputFormat": "**本题的测试点包含有多组测试数据。** 但不同测试数据只是通过修改 $a_1, a_2, \\dots , a_n$ 得到，其他内容均保持不变，请参考以下格式。其中 $\\oplus$ 代表异或运算符，$a \\bmod b$ 代表 $a$ 除以 $b$ 的余数。\n\n输入的第一行包含两个正整数 $n, m$，表示报名的选手数量和询问的数量。\n\n输入的第二行包含 $n$ 个非负整数 $a'_1,a'_2,\\dots,a'_n$，这列数将用来计算真正的能力值。\n\n输入的第三行包含 $m$ 个正整数 $c_1, c_2, \\dots , c_m$，表示询问。\n\n设 $K$ 是使得 $2^K \\geq n$ 的最小的非负整数，接下来的 $K$ 行当中，第 $R$ 行包含 $2^{K-R}$ 个数（无空格），其中第 $G$ 个数表示第 $R$ 轮的第 $G$ 场比赛抽签得到的 $d_{R,G}=0/1$。\n\n注意，由于询问只是将人数凑齐到 $2^k\\geq c_i$，这里的 $k\\leq K$，因此你未必会用到全部的输入值。\n\n接下来一行包含一个正整数 $T$，表示有 $T$ 组测试数据。\n\n接下来共 $T$ 行，每行描述一组数据，包含 $4$ 个非负整数 $X_0,X_1,X_2,X_3$，该组数据的能力值 $a_i=a'_i \\oplus X_{i\\bmod 4}$，其中 $1\\leq i\\leq n$。", "outputFormat": "共输出 $T$ 行，对于每组数据，设 $A_i$ 为第 $i$（$1 \\leq i \\leq m$）组询问的答案，你只需要输出一行包含一个整数，表示 $(1\\times A_1) \\oplus (2\\times A_2) \\oplus \\dots \\oplus (m\\times A_m)$ 的结果。", "hint": "**【样例 1 解释】**\n\n共有 $T = 4$ 组数据，这里只解释第一组。$5$ 名选手的真实能力值为 $[1, 0, 0, 2, 1]$。$5$ 组询问分别是对长度为 $5, 4, 1, 2, 3$ 的前缀进行的。\n\n1. 对于长度为 $1$ 的前缀，由于只有 $1$ 号一个人，因此答案为 $1$。\n2. 对于长度为 $2$ 的前缀，由于 $2$ 个人已经是 $2$ 的幂次，因此不需要进行扩充。根据抽签 $d_{1,1} = 1$ 可知 $2$ 号为擂主，由于 $a_2 < 1$，因此 $1$ 号获胜，答案为 $1$。\n3. 对于长度为 $3$ 的前缀，首先 $1$ 号、$2$ 号比赛是 $1$ 号获胜（因为 $d_{1,1} = 1$，故 $2$ 号为擂主，$a_2 < 1$），然后虽然 $4$ 号能力值还不知道，但 $3$ 号、$4$ 号比赛一定是 $4$ 号获胜（因为 $d_{1,2} = 0$，故 $3$ 号为擂主，$a_3 < 1$），而决赛 $1$ 号、$4$ 号谁获胜都有可能（因为 $d_{2,1} = 1$，故 $4$ 号为擂主，如果 $a_4 < 2$ 则 $1$ 号获胜，$a_4 \\geq 2$ 则 $4$ 号获胜）。综上所述，答案为 $1 + 4 = 5$。\n4. 对于长度为 $4$ 的前缀，我们根据上一条的分析得知，由于 $a_4 \\geq 2$ ，所以决赛获胜的是 $4$ 号。\n5. 对于长度为 $5$ 的前缀，可以证明，可能获胜的选手包括 $4$ 号、$7$ 号、$8$ 号，答案为 $19$。\n\n因此，该组测试数据的答案为 $(1 \\times 19) \\oplus (2 \\times 4) \\oplus (3 \\times 1) \\oplus (4 \\times 1) \\oplus (5 \\times 5) = 5$。\n\n**【样例 2】**\n\n见选手目录下的 arena/arena2.in 与 arena/arena2.ans。\n\n这组样例满足特殊性质 A。\n\n**【样例 3】**\n\n见选手目录下的 arena/arena3.in 与 arena/arena3.ans。\n\n这组样例满足特殊性质 B。\n\n**【样例 4】**\n\n见选手目录下的 arena/arena4.in 与 arena/arena4.ans。\n\n**【样例 5】**\n\n见选手目录下的 arena/arena5.in 与 arena/arena5.ans。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$2 \\leq n, m \\leq 10^5$，$0 \\leq a_i, X_j < 2^{31}$，$1 \\leq c_i \\leq n$，$1 \\leq T \\leq 256$。\n\n::cute-table{tuack}\n\n| 测试点 | $T=$ | $n,m\\leq$ | 特殊性质 A | 特殊性质 B |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $1$ | $8$ | 否 | 否 |\n| $4,5$ | ^ | $500$ | 是 | ^ |\n| $6\\sim 8$ | ^ | ^ | 否 | 是 |\n| $9,10$ | ^ | $5000$ | ^ | 否 |\n| $11,12$ | ^ | $10^5$ | 是 | ^ |\n| $13\\sim 15$ | ^ | ^ | 否 | 是 |\n| $16,17$ | $4$ | ^ | ^ | 否 |\n| $18,19$ | $16$ | ^ | ^ | ^ |\n| $20,21$ | $64$ | ^ | ^ | ^ |\n| $22,23$ | $128$ | ^ | ^ | ^ |\n| $24,25$ | $256$ | ^ | ^ | ^ |\n\n\n特殊性质 A：保证询问的 $c_i$ 均为 $2$ 的幂次。\n\n特殊性质 B：保证所有的 $d_{R,G} = 0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-S 2024] 擂台游戏", "background": "", "description": "小 S 想要举办一场擂台游戏，如果共有 $2^k$ 名选手参加，那么游戏分为 $k$ 轮进行：\n\n- 第一轮编号为 $1, 2$ 的选手进行一次对局，编号为 $3, 4$ 的选手进行一次对局，以此类推，编号为 $2^k - 1, 2^k$ 的选手进行一次对局。\n- 第二轮在只保留第一轮的胜者的前提下，相邻的两位依次进行一场对局。\n- 以此类推，第 $k - 1$ 轮在只保留第 $k - 2$ 轮的 $4$ 位胜者的前提下，前两位、后两位分别进行对局，也就是所谓的半决赛。\n- 第 $k$ 轮即为半决赛两位胜者的决赛。\n\n确定了游戏晋级的规则后，小 S 将比赛的规则设置为了擂台赛。具体而言，每位选手都有一个能力值 $a_1, a_2, \\dots , a_{2^k}$，能力值为 $[0,2^{31}-1]$ 之内的整数。对于每场比赛，会先抽签决定一个数 $0/1$，我们将第 $R$ 轮的第 $G$ 场比赛抽到的数记为 $d_{R,G}$。抽到 $0$ 则表示表示编号小的选手为擂主，抽到 $1$ 则表示编号大的选手为擂主。擂主获胜当且仅当他的能力值 $a\\geq R$。也就是说，游戏的胜负只取决于**擂主的能力值**与**当前比赛是第几轮**的大小关系，**与另一位的能力值无关**。\n\n现在，小 S 先后陆续收到了 $n$ 位选手的报名信息，他们分别告知了小 S 自己的能力值。小 S 会按照报名的先后顺序对选手进行编号为 $1, 2, \\dots, n$。小 S 关心的是，补充**尽量少**的选手使总人数为 $2$ 的整次幂，且所有选手进行一次完整的擂台游戏后，所有可能成为总冠军的选手的**编号之和**是多少。\n\n形式化地，设 $k$ 是最小的非负整数使得 $2^k\\geq n$，那么应当补充 $(2^k-n)$ 名选手，且补充的选手的能力值可以任取 $[0,2^{31}-1]$ 之内的整数。**如果补充的选手有可能取胜，也应当计入答案中**。\n\n当然小 S 觉得这个问题还是太简单了，所以他给了你 $m$ 个询问 $c_1,c_2,\\dots,c_m$。小 S 希望你帮忙对于每个 $c_i$ 求出，在只收到前 $c_i$ 位选手的报名信息时，这个问题的答案是多少。", "inputFormat": "**本题的测试点包含有多组测试数据。** 但不同测试数据只是通过修改 $a_1, a_2, \\dots , a_n$ 得到，其他内容均保持不变，请参考以下格式。其中 $\\oplus$ 代表异或运算符，$a \\bmod b$ 代表 $a$ 除以 $b$ 的余数。\n\n输入的第一行包含两个正整数 $n, m$，表示报名的选手数量和询问的数量。\n\n输入的第二行包含 $n$ 个非负整数 $a'_1,a'_2,\\dots,a'_n$，这列数将用来计算真正的能力值。\n\n输入的第三行包含 $m$ 个正整数 $c_1, c_2, \\dots , c_m$，表示询问。\n\n设 $K$ 是使得 $2^K \\geq n$ 的最小的非负整数，接下来的 $K$ 行当中，第 $R$ 行包含 $2^{K-R}$ 个数（无空格），其中第 $G$ 个数表示第 $R$ 轮的第 $G$ 场比赛抽签得到的 $d_{R,G}=0/1$。\n\n注意，由于询问只是将人数凑齐到 $2^k\\geq c_i$，这里的 $k\\leq K$，因此你未必会用到全部的输入值。\n\n接下来一行包含一个正整数 $T$，表示有 $T$ 组测试数据。\n\n接下来共 $T$ 行，每行描述一组数据，包含 $4$ 个非负整数 $X_0,X_1,X_2,X_3$，该组数据的能力值 $a_i=a'_i \\oplus X_{i\\bmod 4}$，其中 $1\\leq i\\leq n$。", "outputFormat": "共输出 $T$ 行，对于每组数据，设 $A_i$ 为第 $i$（$1 \\leq i \\leq m$）组询问的答案，你只需要输出一行包含一个整数，表示 $(1\\times A_1) \\oplus (2\\times A_2) \\oplus \\dots \\oplus (m\\times A_m)$ 的结果。", "hint": "**【样例 1 解释】**\n\n共有 $T = 4$ 组数据，这里只解释第一组。$5$ 名选手的真实能力值为 $[1, 0, 0, 2, 1]$。$5$ 组询问分别是对长度为 $5, 4, 1, 2, 3$ 的前缀进行的。\n\n1. 对于长度为 $1$ 的前缀，由于只有 $1$ 号一个人，因此答案为 $1$。\n2. 对于长度为 $2$ 的前缀，由于 $2$ 个人已经是 $2$ 的幂次，因此不需要进行扩充。根据抽签 $d_{1,1} = 1$ 可知 $2$ 号为擂主，由于 $a_2 < 1$，因此 $1$ 号获胜，答案为 $1$。\n3. 对于长度为 $3$ 的前缀，首先 $1$ 号、$2$ 号比赛是 $1$ 号获胜（因为 $d_{1,1} = 1$，故 $2$ 号为擂主，$a_2 < 1$），然后虽然 $4$ 号能力值还不知道，但 $3$ 号、$4$ 号比赛一定是 $4$ 号获胜（因为 $d_{1,2} = 0$，故 $3$ 号为擂主，$a_3 < 1$），而决赛 $1$ 号、$4$ 号谁获胜都有可能（因为 $d_{2,1} = 1$，故 $4$ 号为擂主，如果 $a_4 < 2$ 则 $1$ 号获胜，$a_4 \\geq 2$ 则 $4$ 号获胜）。综上所述，答案为 $1 + 4 = 5$。\n4. 对于长度为 $4$ 的前缀，我们根据上一条的分析得知，由于 $a_4 \\geq 2$ ，所以决赛获胜的是 $4$ 号。\n5. 对于长度为 $5$ 的前缀，可以证明，可能获胜的选手包括 $4$ 号、$7$ 号、$8$ 号，答案为 $19$。\n\n因此，该组测试数据的答案为 $(1 \\times 19) \\oplus (2 \\times 4) \\oplus (3 \\times 1) \\oplus (4 \\times 1) \\oplus (5 \\times 5) = 5$。\n\n**【样例 2】**\n\n见选手目录下的 arena/arena2.in 与 arena/arena2.ans。\n\n这组样例满足特殊性质 A。\n\n**【样例 3】**\n\n见选手目录下的 arena/arena3.in 与 arena/arena3.ans。\n\n这组样例满足特殊性质 B。\n\n**【样例 4】**\n\n见选手目录下的 arena/arena4.in 与 arena/arena4.ans。\n\n**【样例 5】**\n\n见选手目录下的 arena/arena5.in 与 arena/arena5.ans。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$2 \\leq n, m \\leq 10^5$，$0 \\leq a_i, X_j < 2^{31}$，$1 \\leq c_i \\leq n$，$1 \\leq T \\leq 256$。\n\n::cute-table{tuack}\n\n| 测试点 | $T=$ | $n,m\\leq$ | 特殊性质 A | 特殊性质 B |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $1$ | $8$ | 否 | 否 |\n| $4,5$ | ^ | $500$ | 是 | ^ |\n| $6\\sim 8$ | ^ | ^ | 否 | 是 |\n| $9,10$ | ^ | $5000$ | ^ | 否 |\n| $11,12$ | ^ | $10^5$ | 是 | ^ |\n| $13\\sim 15$ | ^ | ^ | 否 | 是 |\n| $16,17$ | $4$ | ^ | ^ | 否 |\n| $18,19$ | $16$ | ^ | ^ | ^ |\n| $20,21$ | $64$ | ^ | ^ | ^ |\n| $22,23$ | $128$ | ^ | ^ | ^ |\n| $24,25$ | $256$ | ^ | ^ | ^ |\n\n\n特殊性质 A：保证询问的 $c_i$ 均为 $2$ 的幂次。\n\n特殊性质 B：保证所有的 $d_{R,G} = 0$。", "locale": "zh-CN"}}}
{"pid": "P11235", "type": "P", "difficulty": 7, "samples": [["10\n2 4 3 9 9 9 9 9 9 1\n2\n0 2\n0 9", "3 1\n20 3"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2024", "交互题", "KOI（韩国）"], "title": "[KTSC 2024 R1] 最大化平均值", "background": "**请勿用 C++14 (GCC 9) 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<vector>\n#include<array>\nvoid initialize(std::vector<int> A);\nstd::array<long long, 2> maximum_average(int i, int j);\n```\n\n题目保证时限在标程的十倍以上，交互库代码运行很快。", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T1 「[평균 최대화](https://assets.ioikorea.kr/ioitst/2024/1/average/average_statement.pdf)」**\n\n给定一个由正整数组成的长度为 $m$ $(m \\geq 2)$ 的序列 $x[0], \\cdots, x[m-1]$，如果该序列满足以下条件，则称其为**封闭序列**：\n\n- 对于所有 $k$ $(1 \\leq k \\leq m-2)$，$x[k] > x[0]$ 且 $x[k] > x[m-1]$。\n\n也就是说，如果序列 $x$ 的两端元素都小于中间的所有元素，那么 $x$ 就是一个封闭序列。例如，$[3,7,8,4,2]$ 和 $[7,7]$ 是封闭序列，但 $[5,8,4,6,7]$ 和 $[3,3,4]$ 不是封闭序列。注意，长度为 $2$ 的所有序列都是封闭序列，而长度小于等于 $1$ 的序列不是封闭序列。\n\n给定一个长度为 $K$ 的序列 $X[0], \\cdots, X[K-1]$，定义**剔除操作**为选择一个封闭序列 $X[i], \\cdots, X[j]$，并从序列中移除 $X[i+1], \\cdots, X[j-1]$（即将序列变为 $X[0], \\cdots, X[i], X[j], \\cdots, X[K-1]$）。定义 $f(X)$ 为通过任意次数的剔除操作（可以不使用，也可以多次使用）得到的最终序列的最大平均值。\n\n例如，$f([1,3,2,100,97,98,2,3,4,1])=43$，可以通过以下剔除操作实现：\n\n- 选择 $i=0, j=2$，将序列变为 $[1,2,100,97,98,2,3,4,1]$。\n- 选择 $i=5, j=8$，将序列变为 $[1,2,100,97,98,2,1]$。\n- 最终序列为 $[1,2,100,97,98,2,1]$，其平均值为 $(1+2+100+97+98+2+1) / 7=43$。\n\n给定一个由正整数组成的长度为 $N$ 的序列 $A[0], \\cdots, A[N-1]$。对于每个给定的封闭序列 $(i, j)$，你需要计算 $f(A[i], \\cdots, A[j])$ 的值。\n\n你需要实现以下函数：\n\n```cpp\nvoid initialize(std::vector<int> A);\n```\n- 该函数只会被调用一次，并且在其他所有函数调用之前调用。\n- `A`：大小为 $N$ 的整数数组。\n- 如果需要进行预处理或设置全局变量，可以在此函数中实现。\n\n```cpp\nstd::array<long long, 2> maximum_average(int i, int j);\n```\n- $0 \\leq i < j \\leq N-1$，且 $A[i], \\cdots, A[j]$ 是一个封闭序列。\n- 该函数应返回 $f(A[i], \\cdots, A[j])=s / t$，其中 $[s, t]$ 是一个数组。\n- $s$ 和 $t$ 是 $1$ 到 $10^{18}$ 之间的整数。可以证明，对于所有满足约束条件的输入，答案总能表示为这种形式的分数。\n- 该函数会被调用 $Q$ 次。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$A[0]\\,A[1]\\,\\cdots \\,A[N-1]$\n- 第 $3$ 行：$Q$\n- 第 $3+k$ $(1 \\leq k \\leq Q)$ 行：$i[k]\\,j[k]$（第 $k$ 次调用 `maximum_average` 函数的参数）", "outputFormat": "示例评测程序输出：\n\n- 第 $k$ 行：第 $k$ 次调用 `maximum_average` 返回的数组中的两个整数\n", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 3\\cdot 10^5$\n- $1 \\leq Q \\leq 6\\cdot 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$1 \\leq A[i] \\leq 10^7$\n- 对于所有 `maximum_average` 调用，$0 \\leq i < j \\leq N-1$，且 $A[i], \\cdots, A[j]$ 是一个封闭序列。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $5$ | $N \\leq 15$ |\n| $2$ | $6$ | $N \\leq 50$ |\n| $3$ | $13$ | $N \\leq 250$ |\n| $4$ | $7$ | 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$A[i] \\leq 4$ |\n| $5$ | $12$ | $N \\leq 5000$ |\n| $6$ | $17$ | $A$ 是一个封闭序列；$Q=1$，且调用 `maximum_average(0, N-1)`，即只需计算整个序列 $A$ 的答案 |\n| $7$ | $8$ | 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$A[i] \\leq 20$ |\n| $8$ | $32$ | 无附加限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2024 R1] 最大化平均值", "background": "**请勿用 C++14 (GCC 9) 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<vector>\n#include<array>\nvoid initialize(std::vector<int> A);\nstd::array<long long, 2> maximum_average(int i, int j);\n```\n\n题目保证时限在标程的十倍以上，交互库代码运行很快。", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T1 「[평균 최대화](https://assets.ioikorea.kr/ioitst/2024/1/average/average_statement.pdf)」**\n\n给定一个由正整数组成的长度为 $m$ $(m \\geq 2)$ 的序列 $x[0], \\cdots, x[m-1]$，如果该序列满足以下条件，则称其为**封闭序列**：\n\n- 对于所有 $k$ $(1 \\leq k \\leq m-2)$，$x[k] > x[0]$ 且 $x[k] > x[m-1]$。\n\n也就是说，如果序列 $x$ 的两端元素都小于中间的所有元素，那么 $x$ 就是一个封闭序列。例如，$[3,7,8,4,2]$ 和 $[7,7]$ 是封闭序列，但 $[5,8,4,6,7]$ 和 $[3,3,4]$ 不是封闭序列。注意，长度为 $2$ 的所有序列都是封闭序列，而长度小于等于 $1$ 的序列不是封闭序列。\n\n给定一个长度为 $K$ 的序列 $X[0], \\cdots, X[K-1]$，定义**剔除操作**为选择一个封闭序列 $X[i], \\cdots, X[j]$，并从序列中移除 $X[i+1], \\cdots, X[j-1]$（即将序列变为 $X[0], \\cdots, X[i], X[j], \\cdots, X[K-1]$）。定义 $f(X)$ 为通过任意次数的剔除操作（可以不使用，也可以多次使用）得到的最终序列的最大平均值。\n\n例如，$f([1,3,2,100,97,98,2,3,4,1])=43$，可以通过以下剔除操作实现：\n\n- 选择 $i=0, j=2$，将序列变为 $[1,2,100,97,98,2,3,4,1]$。\n- 选择 $i=5, j=8$，将序列变为 $[1,2,100,97,98,2,1]$。\n- 最终序列为 $[1,2,100,97,98,2,1]$，其平均值为 $(1+2+100+97+98+2+1) / 7=43$。\n\n给定一个由正整数组成的长度为 $N$ 的序列 $A[0], \\cdots, A[N-1]$。对于每个给定的封闭序列 $(i, j)$，你需要计算 $f(A[i], \\cdots, A[j])$ 的值。\n\n你需要实现以下函数：\n\n```cpp\nvoid initialize(std::vector<int> A);\n```\n- 该函数只会被调用一次，并且在其他所有函数调用之前调用。\n- `A`：大小为 $N$ 的整数数组。\n- 如果需要进行预处理或设置全局变量，可以在此函数中实现。\n\n```cpp\nstd::array<long long, 2> maximum_average(int i, int j);\n```\n- $0 \\leq i < j \\leq N-1$，且 $A[i], \\cdots, A[j]$ 是一个封闭序列。\n- 该函数应返回 $f(A[i], \\cdots, A[j])=s / t$，其中 $[s, t]$ 是一个数组。\n- $s$ 和 $t$ 是 $1$ 到 $10^{18}$ 之间的整数。可以证明，对于所有满足约束条件的输入，答案总能表示为这种形式的分数。\n- 该函数会被调用 $Q$ 次。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$A[0]\\,A[1]\\,\\cdots \\,A[N-1]$\n- 第 $3$ 行：$Q$\n- 第 $3+k$ $(1 \\leq k \\leq Q)$ 行：$i[k]\\,j[k]$（第 $k$ 次调用 `maximum_average` 函数的参数）", "outputFormat": "示例评测程序输出：\n\n- 第 $k$ 行：第 $k$ 次调用 `maximum_average` 返回的数组中的两个整数\n", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 3\\cdot 10^5$\n- $1 \\leq Q \\leq 6\\cdot 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$1 \\leq A[i] \\leq 10^7$\n- 对于所有 `maximum_average` 调用，$0 \\leq i < j \\leq N-1$，且 $A[i], \\cdots, A[j]$ 是一个封闭序列。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $5$ | $N \\leq 15$ |\n| $2$ | $6$ | $N \\leq 50$ |\n| $3$ | $13$ | $N \\leq 250$ |\n| $4$ | $7$ | 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$A[i] \\leq 4$ |\n| $5$ | $12$ | $N \\leq 5000$ |\n| $6$ | $17$ | $A$ 是一个封闭序列；$Q=1$，且调用 `maximum_average(0, N-1)`，即只需计算整个序列 $A$ 的答案 |\n| $7$ | $8$ | 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$A[i] \\leq 20$ |\n| $8$ | $32$ | 无附加限制 |", "locale": "zh-CN"}}}
{"pid": "P11236", "type": "P", "difficulty": 7, "samples": [["5\n2 1 1 3 4\n5\n1 0 4\n2 2 3\n1 2 4\n2 1 2\n1 0 2", "5\n5\n4"], ["7\n1 1 1 1 2 2 2\n5\n1 0 6\n1 2 4\n2 6 4\n1 4 6\n1 0 6", "4\n3\n4\n5"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2024", "交互题", "KOI（韩国）"], "title": "[KTSC 2024 R1] 水果游戏", "background": "**请勿用 C++14 (GCC 9) 提交**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<vector>\nvoid prepare_game(std::vector<int> A);\nint play_game(int l, int r);\nvoid update_game(int p, int v);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T2 「[과일 게임](https://assets.ioikorea.kr/ioitst/2024/1/fruitgame/fruitgame_statement.pdf)」**\n\n水果游戏是一款将各种水果合并成更大水果的游戏。游戏板可以表示为一个序列 $X[0], X[1], \\cdots, X[K-1]$，其中每个数字代表一种水果的编号，编号越大，水果越大。\n\n玩家可以执行合并操作，将相邻且相同的两个水果合并成更大的水果。合并操作定义如下：\n\n合并：在表示为 $X[0], X[1], \\cdots, X[K-1]$ 的游戏板上，选择一个整数 $0 \\leq i \\leq K-2$，如果 $X[i]=X[i+1]$，则将游戏板变为 $X[0], \\cdots, X[i-1], X[i]+1, X[i+2], \\cdots, X[K-1]$。\n\n玩家的目标是，在给定初始游戏板的情况下，通过 $0$ 次或多次合并操作，尽可能生成更大的水果。\n\n例如，游戏板 $X=[2,1,1,3,2]$，因为 $X[1]=X[2]$，选择 $i=1$ 进行合并操作，游戏板变为 $X=[2,2,3,2]$。然后，因为 $X[0]=X[1]$，选择 $i=0$ 进行合并操作，游戏板变为 $X=[3,3,2]$。最后，因为 $X[0]=X[1]$，选择 $i=0$ 进行合并操作，游戏板变为 $X=[4,2]$。这样可以得到编号为 $4$ 的水果，这是可以得到的最大水果编号。\n\n给定一个长度为 $N$ 的序列 $A$，序列中的元素可以在中途发生变化，并且这些变化是累积的。每当给定一个满足 $0 \\leq l \\leq r \\leq N-1$ 的整数对 $(l, r)$ 时，你需要计算由 $A[l], \\cdots, A[r]$ 表示的游戏板上可以得到的最大水果编号。序列的元素变化或给定的整数对的次数总共为 $Q$ 次。\n\n你需要实现以下函数：\n\n```cpp\nvoid prepare_game(std::vector<int> A);\n```\n- `A`：大小为 $N$ 的整数数组。\n- 该函数只会被调用一次，并且在其他所有函数调用之前调用。\n- 如果需要进行预处理或设置全局变量，可以在此函数中实现。\n\n```cpp\nint play_game(int l, int r);\n```\n- 该函数应返回由 $A[l], \\cdots, A[r]$ 组成的游戏板上可以得到的最大水果编号。\n- 该函数会被调用多次。\n\n```cpp\nvoid update_game(int p, int v);\n```\n- 该函数应将 $A[p]$ 的值更改为 $v$。\n- `play_game` 函数或 `update_game` 函数的调用次数总共为 $Q$ 次。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$A[0]\\,A[1]\\,\\cdots\\,A[N-1]$\n- 第 $3$ 行：$Q$\n- 第 $3+i$ $(1 \\leq i \\leq Q)$ 行：如果调用 `play_game` 函数，则为 `1 l r`；如果调用 `update_game` 函数，则为 `2 p v`", "outputFormat": "示例评测程序输出：\n\n- 第 $i$ 行：第 $i$ 次调用 `play_game` 函数返回的值", "hint": "对于所有输入数据，满足：\n\n- $1 \\leq N, Q \\leq 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$1 \\leq A[i] \\leq 10$\n- 对于所有 `play_game` 调用，$0 \\leq l \\leq r \\leq N-1$\n- 对于所有 `update_game` 调用，$0 \\leq p \\leq N-1, 1 \\leq v \\leq 10$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $5$ | $N \\leq 10,Q \\leq 10$ |\n| $2$ | $6$ | $N \\leq 600,Q \\leq 600$ |\n| $3$ | $8$ | $N \\leq 4000,Q \\leq 4000$；对于所有 $i$ $(0 \\leq i \\leq N-1)$，$A[i] \\leq 2$；对于所有 `update_game` 调用，$v \\leq 2$ |\n| $4$ | $15$ | $N \\leq 4000,Q \\leq 4000$ |\n| $5$ | $12$ | 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$A[i] \\leq 2$；对于所有 `update_game` 调用，$v \\leq 2$ |\n| $6$ | $14$ | 不会调用 `update_game` |\n| $7$ | $40$ | 无附加限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2024 R1] 水果游戏", "background": "**请勿用 C++14 (GCC 9) 提交**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<vector>\nvoid prepare_game(std::vector<int> A);\nint play_game(int l, int r);\nvoid update_game(int p, int v);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T2 「[과일 게임](https://assets.ioikorea.kr/ioitst/2024/1/fruitgame/fruitgame_statement.pdf)」**\n\n水果游戏是一款将各种水果合并成更大水果的游戏。游戏板可以表示为一个序列 $X[0], X[1], \\cdots, X[K-1]$，其中每个数字代表一种水果的编号，编号越大，水果越大。\n\n玩家可以执行合并操作，将相邻且相同的两个水果合并成更大的水果。合并操作定义如下：\n\n合并：在表示为 $X[0], X[1], \\cdots, X[K-1]$ 的游戏板上，选择一个整数 $0 \\leq i \\leq K-2$，如果 $X[i]=X[i+1]$，则将游戏板变为 $X[0], \\cdots, X[i-1], X[i]+1, X[i+2], \\cdots, X[K-1]$。\n\n玩家的目标是，在给定初始游戏板的情况下，通过 $0$ 次或多次合并操作，尽可能生成更大的水果。\n\n例如，游戏板 $X=[2,1,1,3,2]$，因为 $X[1]=X[2]$，选择 $i=1$ 进行合并操作，游戏板变为 $X=[2,2,3,2]$。然后，因为 $X[0]=X[1]$，选择 $i=0$ 进行合并操作，游戏板变为 $X=[3,3,2]$。最后，因为 $X[0]=X[1]$，选择 $i=0$ 进行合并操作，游戏板变为 $X=[4,2]$。这样可以得到编号为 $4$ 的水果，这是可以得到的最大水果编号。\n\n给定一个长度为 $N$ 的序列 $A$，序列中的元素可以在中途发生变化，并且这些变化是累积的。每当给定一个满足 $0 \\leq l \\leq r \\leq N-1$ 的整数对 $(l, r)$ 时，你需要计算由 $A[l], \\cdots, A[r]$ 表示的游戏板上可以得到的最大水果编号。序列的元素变化或给定的整数对的次数总共为 $Q$ 次。\n\n你需要实现以下函数：\n\n```cpp\nvoid prepare_game(std::vector<int> A);\n```\n- `A`：大小为 $N$ 的整数数组。\n- 该函数只会被调用一次，并且在其他所有函数调用之前调用。\n- 如果需要进行预处理或设置全局变量，可以在此函数中实现。\n\n```cpp\nint play_game(int l, int r);\n```\n- 该函数应返回由 $A[l], \\cdots, A[r]$ 组成的游戏板上可以得到的最大水果编号。\n- 该函数会被调用多次。\n\n```cpp\nvoid update_game(int p, int v);\n```\n- 该函数应将 $A[p]$ 的值更改为 $v$。\n- `play_game` 函数或 `update_game` 函数的调用次数总共为 $Q$ 次。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$A[0]\\,A[1]\\,\\cdots\\,A[N-1]$\n- 第 $3$ 行：$Q$\n- 第 $3+i$ $(1 \\leq i \\leq Q)$ 行：如果调用 `play_game` 函数，则为 `1 l r`；如果调用 `update_game` 函数，则为 `2 p v`", "outputFormat": "示例评测程序输出：\n\n- 第 $i$ 行：第 $i$ 次调用 `play_game` 函数返回的值", "hint": "对于所有输入数据，满足：\n\n- $1 \\leq N, Q \\leq 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$1 \\leq A[i] \\leq 10$\n- 对于所有 `play_game` 调用，$0 \\leq l \\leq r \\leq N-1$\n- 对于所有 `update_game` 调用，$0 \\leq p \\leq N-1, 1 \\leq v \\leq 10$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $5$ | $N \\leq 10,Q \\leq 10$ |\n| $2$ | $6$ | $N \\leq 600,Q \\leq 600$ |\n| $3$ | $8$ | $N \\leq 4000,Q \\leq 4000$；对于所有 $i$ $(0 \\leq i \\leq N-1)$，$A[i] \\leq 2$；对于所有 `update_game` 调用，$v \\leq 2$ |\n| $4$ | $15$ | $N \\leq 4000,Q \\leq 4000$ |\n| $5$ | $12$ | 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$A[i] \\leq 2$；对于所有 `update_game` 调用，$v \\leq 2$ |\n| $6$ | $14$ | 不会调用 `update_game` |\n| $7$ | $40$ | 无附加限制 |", "locale": "zh-CN"}}}
{"pid": "P11237", "type": "P", "difficulty": 6, "samples": [["4 3\n0 1 557912\n0 2 517656\n0 3 275807\n3 265381 0 1000000\n0 190435 2 12345\n0 195025 3 67890", "833719 265381\n517656 190435\n275807 195025"], ["6 4\n0 1 2\n1 2 2\n2 3 10\n1 4 8\n2 5 16\n3 4 0 3\n3 2 0 1\n3 19 0 9\n3 20 0 19", "6 1\n10 1\n1 1\n13 10"], ["10 10\n4 9 7\n2 8 8\n9 0 4\n9 1 5\n3 1 1\n7 6 2\n1 2 5\n6 2 10\n5 9 2\n3 1 5 9\n0 6 5 7\n5 6 9 6\n2 5 1 7\n0 2 6 4\n5 6 2 10\n5 5 0 10\n7 4 1 8\n9 1 8 7\n8 5 4 5", "18 1\n13 3\n4 1\n17 5\n13 1\n4 1\n6 5\n29 4\n22 1\n5 1"], ["10 10\n6 7 1\n8 5 1\n8 2 4\n3 9 4\n4 1 4\n9 7 7\n0 4 3\n1 3 4\n8 4 7\n3 5 0 2\n1 7 7 2\n6 9 8 5\n2 7 0 5\n3 5 2 4\n3 10 0 5\n2 8 0 7\n6 8 7 2\n1 4 8 2\n2 8 5 7", "11 5\n16 7\n31 9\n4 1\n19 5\n11 10\n31 8\n1 6\n15 4\n3 1"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["二分", "2024", "交互题", "Special Judge", "树链剖分", "KOI（韩国）"], "title": "[KTSC 2024 R1] 警察与小偷", "background": "**请勿使用 C++14 (GCC 9) 提交**。\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<vector>\n#include<array>\nstd::vector<std::array<long long, 2>> police_thief(std::vector<int> A, std::vector<int> B, std::vector<int> D, std::vector<int> P, std::vector<int> V1, std::vector<int> T, std::vector<int> V2);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T3 「[경찰과 도둑](https://assets.ioikorea.kr/ioitst/2024/1/police/police_statement.pdf)」**\n\nKOI 村由 $N$ 座房子和连接这些房子的 $N-1$ 条双向道路组成。任意两座不同的房子都可以通过这些道路互相到达。也就是说，KOI 村的道路网络是一个树结构。\n\nKOI 村的房子编号从 $0$ 到 $N-1$，道路编号从 $0$ 到 $N-2$。对于编号为 $i$ 的道路，它连接了编号为 $A[i]$ 和 $B[i]$ 的房子，长度为 $D[i]$ 米。\n\n最近，KOI 村频繁发生盗窃事件，村民们非常困扰。为了应对这种情况，村里决定在某个房子里安排警察待命，以便在小偷出现时迅速抓捕。村民们想知道在不同情况下，警察需要多长时间才能抓住小偷。\n\n你将会得到 $Q$ 个场景，每个场景编号从 $0$ 到 $Q-1$。每个场景如下：\n\n- 在第 $j$ 个场景中，警察从编号为 $P[j]$ 的房子出发，最大速度为 $V1[j]$ 米/秒。\n- 在第 $j$ 个场景中，小偷从编号为 $T[j]$ 的房子出发，最大速度为 $V2[j]$ 米/秒。\n- 警察和小偷出发的房子不同，即 $P[j] \\neq T[j]$。\n- 房子的大小可以忽略不计，因此可以将房子视为一个点。道路的宽度也可以忽略不计，因此可以将道路视为一条线段。道路之间不相交。\n- 警察和小偷可以在 KOI 村内自由移动，速度不超过各自的最大速度。可以选择不移动。\n- 如果警察和小偷在同一个位置，警察就能抓住小偷。这个位置可以是房子，也可以是道路的中间。\n- 在每个场景中，警察和小偷都知道对方的速度，并且随时知道对方的位置。\n- 警察和小偷都会采用最优策略。警察会尽快抓住小偷，而小偷会尽量拖延被抓住的时间。可以证明，在最优策略下，小偷一定会在有限时间内被抓住。\n\n你需要计算每个场景中，小偷被抓住所需的时间。\n\n你需要实现以下函数：\n\n```cpp\nstd::vector<std::array<long long, 2>> police_thief(std::vector<int> A, std::vector<int> B, std::vector<int> D, std::vector<int> P, std::vector<int> V1, std::vector<int> T, std::vector<int> V2);\n```\n\n- `A, B, D`：大小为 $N-1$ 的整数数组。对于每条编号为 $i$ 的道路，它连接了编号为 $A[i]$ 和 $B[i]$ 的房子，长度为 $D[i]$ 米。\n- `P, V1, T, V2`：大小为 $Q$ 的整数数组。对于第 $j$ 个场景，警察从编号为 $P[j]$ 的房子出发，最大速度为 $V1[j]$ 米/秒，小偷从编号为 $T[j]$ 的房子出发，最大速度为 $V2[j]$ 米/秒。\n- 该函数返回一个大小为 $Q$ 的数组 $C$，每个元素是一个大小为 $2$ 的数组。对于第 $j$ 个场景，小偷被抓住所需的时间（以秒为单位）表示为分数 $C[j][0] / C[j][1]$。\n- $C[j][0] / C[j][1]$ 可以不是最简分数，但 $C[j][0]$ 和 $C[j][1]$ 必须是 $1$ 到 $10^{18}$ 之间的整数。可以证明，对于所有满足约束条件的输入，答案总能表示为这种形式的分数。\n\n注意，提交的代码中不应包含任何输入输出操作。\n", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,Q$\n- 第 $2+i$ $(0 \\leq i \\leq N-2)$ 行：$A[i]\\,B[i]\\,D[i]$\n- 第 $1+N+j$ $(0 \\leq j \\leq Q-1)$ 行：$P[j]\\,V1[j]\\,T[j]\\,V2[j]$", "outputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,Q$\n- 第 $2+i$ $(0 \\leq i \\leq N-2)$ 行：$A[i]\\,B[i]\\,D[i]$\n- 第 $1+N+j$ $(0 \\leq j \\leq Q-1)$ 行：$P[j]\\,V1[j]\\,T[j]\\,V2[j]$\n\n假设 `police_thief` 返回的数组为 $C$。示例评测程序将输出：\n\n- 第 $1+j$ $(0 \\leq j \\leq Q-1)$ 行：$C[j][0]\\,C[j][1]$\n", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 10^5$\n- $1 \\leq Q \\leq 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq A[i], B[i] \\leq N-1$ 且 $A[i] \\neq B[i]$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$1 \\leq D[i] \\leq 10^6$\n- KOI 村是一棵树的结构\n- 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$0 \\leq P[j], T[j] \\leq N-1$ 且 $P[j] \\neq T[j]$\n- 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$1 \\leq V1[j], V2[j] \\leq 10^6$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $15$ | $N \\leq 5000, Q \\leq 5000$ |\n| $2$ | $21$ | $N \\leq 50000,Q \\leq 50000$ |\n| $3$ | $5$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$A[i]=i, B[i]=i+1$ |\n| $4$ | $6$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$A[i]=0, B[i]=i+1$ |\n| $5$ | $14$ | 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$V1[j] \\leq V2[j]$ |\n| $6$ | $9$ | 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$P[j]$ 和 $T[j]$ 之间的道路数量不超过 $10$ 条 |\n| $7$ | $9$ | 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$P[j]=0$ |\n| $8$ | $10$ | 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$T[j]=0$ |\n| $9$ | $11$ | 无附加限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2024 R1] 警察与小偷", "background": "**请勿使用 C++14 (GCC 9) 提交**。\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<vector>\n#include<array>\nstd::vector<std::array<long long, 2>> police_thief(std::vector<int> A, std::vector<int> B, std::vector<int> D, std::vector<int> P, std::vector<int> V1, std::vector<int> T, std::vector<int> V2);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T3 「[경찰과 도둑](https://assets.ioikorea.kr/ioitst/2024/1/police/police_statement.pdf)」**\n\nKOI 村由 $N$ 座房子和连接这些房子的 $N-1$ 条双向道路组成。任意两座不同的房子都可以通过这些道路互相到达。也就是说，KOI 村的道路网络是一个树结构。\n\nKOI 村的房子编号从 $0$ 到 $N-1$，道路编号从 $0$ 到 $N-2$。对于编号为 $i$ 的道路，它连接了编号为 $A[i]$ 和 $B[i]$ 的房子，长度为 $D[i]$ 米。\n\n最近，KOI 村频繁发生盗窃事件，村民们非常困扰。为了应对这种情况，村里决定在某个房子里安排警察待命，以便在小偷出现时迅速抓捕。村民们想知道在不同情况下，警察需要多长时间才能抓住小偷。\n\n你将会得到 $Q$ 个场景，每个场景编号从 $0$ 到 $Q-1$。每个场景如下：\n\n- 在第 $j$ 个场景中，警察从编号为 $P[j]$ 的房子出发，最大速度为 $V1[j]$ 米/秒。\n- 在第 $j$ 个场景中，小偷从编号为 $T[j]$ 的房子出发，最大速度为 $V2[j]$ 米/秒。\n- 警察和小偷出发的房子不同，即 $P[j] \\neq T[j]$。\n- 房子的大小可以忽略不计，因此可以将房子视为一个点。道路的宽度也可以忽略不计，因此可以将道路视为一条线段。道路之间不相交。\n- 警察和小偷可以在 KOI 村内自由移动，速度不超过各自的最大速度。可以选择不移动。\n- 如果警察和小偷在同一个位置，警察就能抓住小偷。这个位置可以是房子，也可以是道路的中间。\n- 在每个场景中，警察和小偷都知道对方的速度，并且随时知道对方的位置。\n- 警察和小偷都会采用最优策略。警察会尽快抓住小偷，而小偷会尽量拖延被抓住的时间。可以证明，在最优策略下，小偷一定会在有限时间内被抓住。\n\n你需要计算每个场景中，小偷被抓住所需的时间。\n\n你需要实现以下函数：\n\n```cpp\nstd::vector<std::array<long long, 2>> police_thief(std::vector<int> A, std::vector<int> B, std::vector<int> D, std::vector<int> P, std::vector<int> V1, std::vector<int> T, std::vector<int> V2);\n```\n\n- `A, B, D`：大小为 $N-1$ 的整数数组。对于每条编号为 $i$ 的道路，它连接了编号为 $A[i]$ 和 $B[i]$ 的房子，长度为 $D[i]$ 米。\n- `P, V1, T, V2`：大小为 $Q$ 的整数数组。对于第 $j$ 个场景，警察从编号为 $P[j]$ 的房子出发，最大速度为 $V1[j]$ 米/秒，小偷从编号为 $T[j]$ 的房子出发，最大速度为 $V2[j]$ 米/秒。\n- 该函数返回一个大小为 $Q$ 的数组 $C$，每个元素是一个大小为 $2$ 的数组。对于第 $j$ 个场景，小偷被抓住所需的时间（以秒为单位）表示为分数 $C[j][0] / C[j][1]$。\n- $C[j][0] / C[j][1]$ 可以不是最简分数，但 $C[j][0]$ 和 $C[j][1]$ 必须是 $1$ 到 $10^{18}$ 之间的整数。可以证明，对于所有满足约束条件的输入，答案总能表示为这种形式的分数。\n\n注意，提交的代码中不应包含任何输入输出操作。\n", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,Q$\n- 第 $2+i$ $(0 \\leq i \\leq N-2)$ 行：$A[i]\\,B[i]\\,D[i]$\n- 第 $1+N+j$ $(0 \\leq j \\leq Q-1)$ 行：$P[j]\\,V1[j]\\,T[j]\\,V2[j]$", "outputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,Q$\n- 第 $2+i$ $(0 \\leq i \\leq N-2)$ 行：$A[i]\\,B[i]\\,D[i]$\n- 第 $1+N+j$ $(0 \\leq j \\leq Q-1)$ 行：$P[j]\\,V1[j]\\,T[j]\\,V2[j]$\n\n假设 `police_thief` 返回的数组为 $C$。示例评测程序将输出：\n\n- 第 $1+j$ $(0 \\leq j \\leq Q-1)$ 行：$C[j][0]\\,C[j][1]$\n", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 10^5$\n- $1 \\leq Q \\leq 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq A[i], B[i] \\leq N-1$ 且 $A[i] \\neq B[i]$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$1 \\leq D[i] \\leq 10^6$\n- KOI 村是一棵树的结构\n- 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$0 \\leq P[j], T[j] \\leq N-1$ 且 $P[j] \\neq T[j]$\n- 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$1 \\leq V1[j], V2[j] \\leq 10^6$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $15$ | $N \\leq 5000, Q \\leq 5000$ |\n| $2$ | $21$ | $N \\leq 50000,Q \\leq 50000$ |\n| $3$ | $5$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$A[i]=i, B[i]=i+1$ |\n| $4$ | $6$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$A[i]=0, B[i]=i+1$ |\n| $5$ | $14$ | 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$V1[j] \\leq V2[j]$ |\n| $6$ | $9$ | 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$P[j]$ 和 $T[j]$ 之间的道路数量不超过 $10$ 条 |\n| $7$ | $9$ | 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$P[j]=0$ |\n| $8$ | $10$ | 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$T[j]=0$ |\n| $9$ | $11$ | 无附加限制 |", "locale": "zh-CN"}}}
{"pid": "P11238", "type": "P", "difficulty": 5, "samples": [["5\n0 1 1\n1 2 2 \n0 3 3\n0 4 2", "80"], ["5 \n0 1 3 \n0 2 2\n0 3 2\n0 4 1", "78"], ["6 \n0 1 3 \n1 2 1\n2 3 4\n3 4 1\n4 5 5", "284"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2024", "交互题", "树的直径", "KOI（韩国）"], "title": "[KTSC 2024 R1] 铁路 2", "background": "**请勿用 C++14 (GCC 9) 提交。**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<vector>\nint travel(std::vector<int> U, std::vector<int> V, std::vector<int> W);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T4 「[철도 2](https://assets.ioikorea.kr/ioitst/2024/1/railroad2/railroad2_statement.pdf)」**\n\nIOI 国有 $N$ 个城市和连接这些城市的 $N-1$ 条双向铁路，任意两个不同的城市都可以通过铁路互相到达。也就是说，IOI 国的铁路网络是一个树结构。城市编号从 $0$ 到 $N-1$，铁路编号从 $0$ 到 $N-2$。对于每条编号为 $i$ 的铁路，它连接了编号为 $U[i]$ 和 $V[i]$ 的城市，长度为 $W[i]$。\n\n在 IOI 国的任何一个城市出发，都可以乘坐直达列车直接到达另一个城市。也就是说，对于所有 $u,v$ $(0 \\leq u, v \\leq N-1, u \\neq v)$ 的 $N(N-1)$ 个城市对 $(u, v)$，从 $u$ 城市出发到达 $v$ 城市的直达列车存在。乘坐这趟直达列车时，直到到达 $v$ 城市之前不能下车，这趟列车的耗时等于 IOI 国铁路网络中从 $u$ 城市到 $v$ 城市的唯一简单路径上所有铁路的长度之和。\n\n作为铁路爱好者，你喜欢长时间乘坐一列火车，享受悠闲的时光。因此，乘坐耗时长的直达列车会让你感到更大的乐趣。\n\n具体来说，对于两个不同的城市 $x, y$，乐趣 $\\operatorname{joy}(x, y)$ 定义为满足以下条件的最大正整数 $D$：\n\n- 从 $x$ 城市出发，乘坐耗时至少为 $D$ 的直达列车，经过有限次后到达 $y$ 城市。\n\n你需要编写一个程序，计算满足 $0 \\leq x, y \\leq N-1, x \\neq y$ 的所有 $N(N-1)$ 个城市对 $(x, y)$ 的 $\\operatorname{joy}(x, y)$ 之和，并对 $1000000007\\left(=10^{9}+7\\right)$ 取模。\n\n你需要实现以下函数：\n\n```cpp\nint travel(std::vector<int> U, std::vector<int> V, std::vector<int> W);\n```\n\n- 该函数只会被调用一次。\n- `U, V, W`：大小为 $N-1$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-2)$，存在一条连接 $U[i]$ 和 $V[i]$ 的长度为 $W[i]$ 的铁路。\n- 该函数需要返回满足 $0 \\leq x, y \\leq N-1, x \\neq y$ 的所有 $N(N-1)$ 个城市对 $(x, y)$ 的 $\\operatorname{joy}(x, y)$ 之和，并对 $1000000007\\left(=10^{9}+7\\right)$ 取模。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2+i$ $(0 \\leq i \\leq N-2)$ 行：$U[i]\\,V[i]\\,W[i]$", "outputFormat": "示例评测程序将输出：\n\n- 第 $1$ 行：`travel` 函数返回的值", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 5\\cdot 10^5$\n- IOI 国的铁路网络是一个树结构\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq U[i], V[i] \\leq N-1 ; U[i] \\neq V[i]$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$1 \\leq W[i] \\leq 10^9$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $3$ | $N \\leq 50$ |\n| $2$ | $6$ | $N \\leq 500$ |\n| $3$ | $19$ | $N \\leq 2000$ |\n| $4$ | $5$ | $N \\leq 8000$；<br>对于所有 $i$ $(0 \\leq i \\leq N-2)$，$U[i]=0$ |\n| $5$ | $7$ | $N \\leq 8000$；<br>对于所有 $i$ $(0 \\leq i \\leq N-2)$，$U[i]=i, V[i]=i+1$ |\n| $6$ | $15$ | $N \\leq 8000$ |\n| $7$ | $4$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$U[i]=0$ |\n| $8$ | $11$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$U[i]=i ; V[i]=i+1$ |\n| $9$ | $30$ | 无附加限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2024 R1] 铁路 2", "background": "**请勿用 C++14 (GCC 9) 提交。**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<vector>\nint travel(std::vector<int> U, std::vector<int> V, std::vector<int> W);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T4 「[철도 2](https://assets.ioikorea.kr/ioitst/2024/1/railroad2/railroad2_statement.pdf)」**\n\nIOI 国有 $N$ 个城市和连接这些城市的 $N-1$ 条双向铁路，任意两个不同的城市都可以通过铁路互相到达。也就是说，IOI 国的铁路网络是一个树结构。城市编号从 $0$ 到 $N-1$，铁路编号从 $0$ 到 $N-2$。对于每条编号为 $i$ 的铁路，它连接了编号为 $U[i]$ 和 $V[i]$ 的城市，长度为 $W[i]$。\n\n在 IOI 国的任何一个城市出发，都可以乘坐直达列车直接到达另一个城市。也就是说，对于所有 $u,v$ $(0 \\leq u, v \\leq N-1, u \\neq v)$ 的 $N(N-1)$ 个城市对 $(u, v)$，从 $u$ 城市出发到达 $v$ 城市的直达列车存在。乘坐这趟直达列车时，直到到达 $v$ 城市之前不能下车，这趟列车的耗时等于 IOI 国铁路网络中从 $u$ 城市到 $v$ 城市的唯一简单路径上所有铁路的长度之和。\n\n作为铁路爱好者，你喜欢长时间乘坐一列火车，享受悠闲的时光。因此，乘坐耗时长的直达列车会让你感到更大的乐趣。\n\n具体来说，对于两个不同的城市 $x, y$，乐趣 $\\operatorname{joy}(x, y)$ 定义为满足以下条件的最大正整数 $D$：\n\n- 从 $x$ 城市出发，乘坐耗时至少为 $D$ 的直达列车，经过有限次后到达 $y$ 城市。\n\n你需要编写一个程序，计算满足 $0 \\leq x, y \\leq N-1, x \\neq y$ 的所有 $N(N-1)$ 个城市对 $(x, y)$ 的 $\\operatorname{joy}(x, y)$ 之和，并对 $1000000007\\left(=10^{9}+7\\right)$ 取模。\n\n你需要实现以下函数：\n\n```cpp\nint travel(std::vector<int> U, std::vector<int> V, std::vector<int> W);\n```\n\n- 该函数只会被调用一次。\n- `U, V, W`：大小为 $N-1$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-2)$，存在一条连接 $U[i]$ 和 $V[i]$ 的长度为 $W[i]$ 的铁路。\n- 该函数需要返回满足 $0 \\leq x, y \\leq N-1, x \\neq y$ 的所有 $N(N-1)$ 个城市对 $(x, y)$ 的 $\\operatorname{joy}(x, y)$ 之和，并对 $1000000007\\left(=10^{9}+7\\right)$ 取模。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2+i$ $(0 \\leq i \\leq N-2)$ 行：$U[i]\\,V[i]\\,W[i]$", "outputFormat": "示例评测程序将输出：\n\n- 第 $1$ 行：`travel` 函数返回的值", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 5\\cdot 10^5$\n- IOI 国的铁路网络是一个树结构\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq U[i], V[i] \\leq N-1 ; U[i] \\neq V[i]$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$1 \\leq W[i] \\leq 10^9$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $3$ | $N \\leq 50$ |\n| $2$ | $6$ | $N \\leq 500$ |\n| $3$ | $19$ | $N \\leq 2000$ |\n| $4$ | $5$ | $N \\leq 8000$；<br>对于所有 $i$ $(0 \\leq i \\leq N-2)$，$U[i]=0$ |\n| $5$ | $7$ | $N \\leq 8000$；<br>对于所有 $i$ $(0 \\leq i \\leq N-2)$，$U[i]=i, V[i]=i+1$ |\n| $6$ | $15$ | $N \\leq 8000$ |\n| $7$ | $4$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$U[i]=0$ |\n| $8$ | $11$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$U[i]=i ; V[i]=i+1$ |\n| $9$ | $30$ | 无附加限制 |", "locale": "zh-CN"}}}
{"pid": "P11239", "type": "P", "difficulty": 7, "samples": [["3 5 2\n0 2\n0 2\n1 1\n1 1\n1 1", "5"], ["250 8 50\n0 200\n40 140\n49 49\n50 150\n100 190\n149 199\n199 199\n75 249", "17"], ["250 8 49\n0 200\n40 140\n49 49\n50 150\n100 190\n149 199\n199 199\n75 249", "19"], ["100 6 50\n0 99\n0 70\n0 10\n20 30\n40 50\n60 70", "6"], ["1000000000000 2 1\n0 999999999999\n0 999999999999", "2000000000000"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["贪心", "线段树", "2024", "离散化", "交互题", "动态规划优化", "KOI（韩国）"], "title": "[KTSC 2024 R2] 跳跃游戏", "background": "**请使用 C++17 或 C++20 提交**\n\n你需要在程序开头加入如下代码：\n```cpp\n#include<vector>\nlong long play_game(long long N, int Q, long long K, std::vector<long long> L, std::vector<long long> R);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T2 「[점프 게임](https://assets.ioikorea.kr/ioitst/2024/2/jumpgame/jumpgame_statement.pdf)」**\n\nKOI 公司推出的跳跃游戏是一款通过多次跳跃穿越 $N$ 个踏板的游戏。具体来说，游戏中有 $N$ 个踏板按顺序排列在一条直线上，每个踏板从左到右依次编号为 $0, 1, \\ldots, N-1$。游戏开始时，主角站在最左边的 $0$ 号踏板上，初始得分为 $0$。\n\n对于每个 $i$ $(0 \\leq i \\leq N-1)$，主角可以选择走一步或跳跃。如果选择走一步，主角将移动到 $i+1$ 号踏板，得分不变。如果选择跳跃，主角将移动到 $i+K$ 号踏板，得分增加 $A[i]$。其中 $K$ 是预先设定的常数。游戏在主角到达 $N-1$ 号踏板的右侧时成功结束。也就是说，主角到达编号为 $N, N+1, \\ldots$ 的踏板时，游戏结束——这些编号大于等于 $N$ 的踏板实际上不存在，但表示主角已经越过了 $N-1$ 号踏板。游戏的目标是通过合理控制主角的行动，使得分最大化并成功结束游戏。\n\n喜欢网络直播的尚赫偶尔会玩 KOI 公司的跳跃游戏。虽然他自己玩得很开心，但观众们却反应平平。跳跃游戏不受欢迎的原因在于游戏非常困难且枯燥。首先，这款游戏的踏板数量可以多达 $10^{12}$ 个。其次，即使是 KOI 公司的优秀开发者也无法设计出如此多的踏板，因此他们采用了一种相对简单的方法来生成每个踏板。开发者们最初将所有 $A[i]$ 设置为 $0$，然后进行 $Q$ 次操作：对于每个 $j$ $(0 \\leq j \\leq Q-1)$，他们选择一个区间 $0 \\leq L[j] \\leq R[j] \\leq N-1$，将 $A[L[j]], A[L[j]+1], A[L[j]+2], \\ldots, A[R[j]]$ 的值增加 $1$。所有操作完成后的数组 $A$ 就是游戏中每个踏板跳跃时获得的得分。\n\n你是一名制作计算机科学视频的创作者，决定制作一个关于如何以最高得分完成 KOI 公司的跳跃游戏的视频。你认为这个视频会在尚赫的观众中大受欢迎，但你担心游戏规模太大，难以找到高效的算法。克服所有困难，在给定的 5 小时内成为这款游戏的高手吧！\n\n你需要实现以下函数：\n\n```cpp\nlong long play_game(long long N, int Q, long long K, std::vector<long long> L, std::vector<long long> R);\n```\n\n- `N`：游戏中存在的踏板数量。\n- `Q`：开发者执行的操作次数。\n- `K`：跳跃后到达的下一个踏板的编号。\n- `L, R`：大小为 $Q$ 的整数数组。\n- 该函数返回一个整数，表示跳跃游戏结束时可以获得的最高得分。\n- 该函数在每个测试点中只会被调用一次。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,Q\\,K$\n- 第 $2+i$ $(0 \\leq i \\leq Q-1)$ 行：$L[i]\\,R[i]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：`play_game` 返回的值", "hint": "对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 10^{12}$\n- $1 \\leq Q \\leq 2.5\\cdot 10^5$\n- $1 \\leq K \\leq N$\n- 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$0 \\leq L[j] \\leq R[j] \\leq N-1$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $6$ | $N \\leq 2.5\\cdot 10^5$ |\n| $2$ | $2$ | $K=1$ |\n| $3$ | $13$ | $2 K \\geq N$|\n| $4$ | $15$ | $5 K \\geq N$ |\n| $5$ | $16$ | $Q \\leq 500$ |\n| $6$ | $7$ | $Q \\leq 5000$ |\n| $7$ | $41$ | 无附加限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2024 R2] 跳跃游戏", "background": "**请使用 C++17 或 C++20 提交**\n\n你需要在程序开头加入如下代码：\n```cpp\n#include<vector>\nlong long play_game(long long N, int Q, long long K, std::vector<long long> L, std::vector<long long> R);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T2 「[점프 게임](https://assets.ioikorea.kr/ioitst/2024/2/jumpgame/jumpgame_statement.pdf)」**\n\nKOI 公司推出的跳跃游戏是一款通过多次跳跃穿越 $N$ 个踏板的游戏。具体来说，游戏中有 $N$ 个踏板按顺序排列在一条直线上，每个踏板从左到右依次编号为 $0, 1, \\ldots, N-1$。游戏开始时，主角站在最左边的 $0$ 号踏板上，初始得分为 $0$。\n\n对于每个 $i$ $(0 \\leq i \\leq N-1)$，主角可以选择走一步或跳跃。如果选择走一步，主角将移动到 $i+1$ 号踏板，得分不变。如果选择跳跃，主角将移动到 $i+K$ 号踏板，得分增加 $A[i]$。其中 $K$ 是预先设定的常数。游戏在主角到达 $N-1$ 号踏板的右侧时成功结束。也就是说，主角到达编号为 $N, N+1, \\ldots$ 的踏板时，游戏结束——这些编号大于等于 $N$ 的踏板实际上不存在，但表示主角已经越过了 $N-1$ 号踏板。游戏的目标是通过合理控制主角的行动，使得分最大化并成功结束游戏。\n\n喜欢网络直播的尚赫偶尔会玩 KOI 公司的跳跃游戏。虽然他自己玩得很开心，但观众们却反应平平。跳跃游戏不受欢迎的原因在于游戏非常困难且枯燥。首先，这款游戏的踏板数量可以多达 $10^{12}$ 个。其次，即使是 KOI 公司的优秀开发者也无法设计出如此多的踏板，因此他们采用了一种相对简单的方法来生成每个踏板。开发者们最初将所有 $A[i]$ 设置为 $0$，然后进行 $Q$ 次操作：对于每个 $j$ $(0 \\leq j \\leq Q-1)$，他们选择一个区间 $0 \\leq L[j] \\leq R[j] \\leq N-1$，将 $A[L[j]], A[L[j]+1], A[L[j]+2], \\ldots, A[R[j]]$ 的值增加 $1$。所有操作完成后的数组 $A$ 就是游戏中每个踏板跳跃时获得的得分。\n\n你是一名制作计算机科学视频的创作者，决定制作一个关于如何以最高得分完成 KOI 公司的跳跃游戏的视频。你认为这个视频会在尚赫的观众中大受欢迎，但你担心游戏规模太大，难以找到高效的算法。克服所有困难，在给定的 5 小时内成为这款游戏的高手吧！\n\n你需要实现以下函数：\n\n```cpp\nlong long play_game(long long N, int Q, long long K, std::vector<long long> L, std::vector<long long> R);\n```\n\n- `N`：游戏中存在的踏板数量。\n- `Q`：开发者执行的操作次数。\n- `K`：跳跃后到达的下一个踏板的编号。\n- `L, R`：大小为 $Q$ 的整数数组。\n- 该函数返回一个整数，表示跳跃游戏结束时可以获得的最高得分。\n- 该函数在每个测试点中只会被调用一次。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,Q\\,K$\n- 第 $2+i$ $(0 \\leq i \\leq Q-1)$ 行：$L[i]\\,R[i]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：`play_game` 返回的值", "hint": "对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 10^{12}$\n- $1 \\leq Q \\leq 2.5\\cdot 10^5$\n- $1 \\leq K \\leq N$\n- 对于所有 $j$ $(0 \\leq j \\leq Q-1)$，$0 \\leq L[j] \\leq R[j] \\leq N-1$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $6$ | $N \\leq 2.5\\cdot 10^5$ |\n| $2$ | $2$ | $K=1$ |\n| $3$ | $13$ | $2 K \\geq N$|\n| $4$ | $15$ | $5 K \\geq N$ |\n| $5$ | $16$ | $Q \\leq 500$ |\n| $6$ | $7$ | $Q \\leq 5000$ |\n| $7$ | $41$ | 无附加限制 |", "locale": "zh-CN"}}}
{"pid": "P11240", "type": "P", "difficulty": 5, "samples": [["1\n6\n1 2 3 1 2 1", "Correct : 4 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2024", "交互题", "KOI（韩国）"], "title": "[KTSC 2024 R2] 回文判定", "background": "**请使用 C++17 或 C++20 提交**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<vector>\nint guess_palindromicity(int N);\nint count_pair(int x, int y, int z);\nint find_character(int x, std::vector<int> Y);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T3 「[팰린드롬 판별하기](https://assets.ioikorea.kr/ioitst/2024/2/palindrome/palindrome_statement.pdf)」**\n\nKOI 公司为了宣传算法比赛，推出了一个新活动！要参加这个活动，你需要判断 KOI 公司秘密序列 $S$ 是否是回文。\n\n当一个序列翻转后与原序列相同，这个序列就是回文。也就是说，长度为 $N$ 的序列 $S$ 是回文，当且仅当对于所有 $i$ $(0 \\leq i \\leq N-1)$，都有 $S[i] = S[N-1-i]$。例如，$[1,2,3,2,1]$ 和 $[1,2,2,1]$ 是回文，而 $[1,2,3,1]$ 和 $[1,2,2]$ 不是回文。\n\n你知道秘密序列 $S$ 的长度 $N$，并且 $S$ 是由 $1$ 到 $5000$ 之间的整数组成的。为了帮助活动参与者，KOI 公司提供了两种特殊的机器：\n\n- `count_pair` 机器需要输入三个不同的数 $x, y, z$。它会返回 $S[x], S[y], S[z]$ 中相同元素的对数。例如，如果 $S[x] = S[y] = S[z]$，机器会返回 `3`。\n- `find_character` 机器需要输入一个整数 $x$ 和一个整数列表 $Y$。如果 $S[x] = S[y]$ 且 $y$ 在列表 $Y$ 中，机器返回 `1`，否则返回 `0`。\n- 两种机器输入的所有数必须是 $0$ 到 $N-1$ 之间的整数。\n- `find_character` 机器输入的 $Y$ 的总大小不能超过 $N$。\n\n你需要尽可能少地使用机器来判断秘密序列 $S$ 是否是回文。\n\n你需要实现以下函数：\n\n```cpp\nint guess_palindromicity(int N);\n```\n\n- `N`：序列 $S$ 的长度。\n- 如果 $S$ 是回文，函数返回 `1`，否则返回 `0`。\n- 该函数在一个测试用例中可能被调用多次。\n\n程序可以调用以下函数：\n\n```cpp\nint count_pair(int x, int y, int z);\n```\n\n- $x, y, z$ 必须是 $0$ 到 $N-1$ 之间的不同整数。\n- 该函数返回 $S[x], S[y], S[z]$ 中相同元素的对数。\n- 在每次 `guess_palindromicity` 调用中，该函数的调用次数不能超过 $2N$ 次。\n\n```cpp\nint find_character(int x, vector<int> Y);\n```\n\n- $x$ 和 $Y$ 的所有元素必须是 $0$ 到 $N-1$ 之间的整数。\n- 如果 $S[x] = S[y]$ 且 $y \\in Y$，函数返回 `1`，否则返回 `0`。\n- 在每次 `guess_palindromicity` 调用中，该函数的调用次数不能超过 $N$ 次。\n- 在每次 `guess_palindromicity` 调用中，调用该函数的 $Y$ 的总大小不能超过 $N$。\n", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$S[0]\\,S[1]\\,\\ldots\\,S[N-1]$", "outputFormat": "如果程序判定为 `Accepted`，示例评测程序输出 `Correct : A B`，其中 A 是 `count_pair` 的调用次数，$B$ 是 `find_character` 的调用次数。\n\n如果程序判定为 `Wrong Answer`，示例评测程序输出 `Wrong : MSG`，其中 `MSG` 为以下之一：\n\n- `Wrong Input`：输入格式错误。\n- `Invalid Query`：查询值错误。\n- `Wrong Guess`：$S$ 是回文但 `guess_palindromicity` 返回 `0`，或相反。", "hint": "对于所有输入数据，满足：\n\n- $5 \\leq N \\leq 5000$\n- 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$1 \\leq S[i] \\leq 5000$\n- 一个测试用例中给定的 $N$ 的总和为 $M$，满足 $5 \\leq M \\leq 5000$\n\n在这个问题中，评测程序是非自适应的（NOT adaptive）。这意味着 $S$ 在评测程序执行开始时固定，不会根据查询而改变。\n\n## 部分问题\n\n每次 `guess_palindromicity` 调用的评分如下。你的提交得分是所有测试用例中 `guess_palindromicity` 调用得分的最小值。\n\n每次 `guess_palindromicity` 调用中，`count_pair` 函数的调用次数为 $A$，`find_character` 函数的调用次数为 $B$。\n\n如果程序未正常结束，或 `guess_palindromicity` 返回错误值，得分为 $0$。若 `guess_palindromicity` 返回正确值，得分如下表所示：\n\n| 条件 | 得分 |\n| :---: | :---: |\n| $A \\leq 2N, 2 \\leq B \\leq N$ | $15$ |\n| $N < A \\leq 2N, B \\leq 1$ | $50$ |\n| $\\left\\lfloor\\frac{N}{2}\\right\\rfloor + 2 < A \\leq N, B \\leq 1$ | $70$ |\n| $A = \\left\\lfloor\\frac{N}{2}\\right\\rfloor + 2, B \\leq 1$ | $90$ |\n| $A \\leq \\left\\lfloor\\frac{N}{2}\\right\\rfloor + 1, B \\leq 1$ | $100$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2024 R2] 回文判定", "background": "**请使用 C++17 或 C++20 提交**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<vector>\nint guess_palindromicity(int N);\nint count_pair(int x, int y, int z);\nint find_character(int x, std::vector<int> Y);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T3 「[팰린드롬 판별하기](https://assets.ioikorea.kr/ioitst/2024/2/palindrome/palindrome_statement.pdf)」**\n\nKOI 公司为了宣传算法比赛，推出了一个新活动！要参加这个活动，你需要判断 KOI 公司秘密序列 $S$ 是否是回文。\n\n当一个序列翻转后与原序列相同，这个序列就是回文。也就是说，长度为 $N$ 的序列 $S$ 是回文，当且仅当对于所有 $i$ $(0 \\leq i \\leq N-1)$，都有 $S[i] = S[N-1-i]$。例如，$[1,2,3,2,1]$ 和 $[1,2,2,1]$ 是回文，而 $[1,2,3,1]$ 和 $[1,2,2]$ 不是回文。\n\n你知道秘密序列 $S$ 的长度 $N$，并且 $S$ 是由 $1$ 到 $5000$ 之间的整数组成的。为了帮助活动参与者，KOI 公司提供了两种特殊的机器：\n\n- `count_pair` 机器需要输入三个不同的数 $x, y, z$。它会返回 $S[x], S[y], S[z]$ 中相同元素的对数。例如，如果 $S[x] = S[y] = S[z]$，机器会返回 `3`。\n- `find_character` 机器需要输入一个整数 $x$ 和一个整数列表 $Y$。如果 $S[x] = S[y]$ 且 $y$ 在列表 $Y$ 中，机器返回 `1`，否则返回 `0`。\n- 两种机器输入的所有数必须是 $0$ 到 $N-1$ 之间的整数。\n- `find_character` 机器输入的 $Y$ 的总大小不能超过 $N$。\n\n你需要尽可能少地使用机器来判断秘密序列 $S$ 是否是回文。\n\n你需要实现以下函数：\n\n```cpp\nint guess_palindromicity(int N);\n```\n\n- `N`：序列 $S$ 的长度。\n- 如果 $S$ 是回文，函数返回 `1`，否则返回 `0`。\n- 该函数在一个测试用例中可能被调用多次。\n\n程序可以调用以下函数：\n\n```cpp\nint count_pair(int x, int y, int z);\n```\n\n- $x, y, z$ 必须是 $0$ 到 $N-1$ 之间的不同整数。\n- 该函数返回 $S[x], S[y], S[z]$ 中相同元素的对数。\n- 在每次 `guess_palindromicity` 调用中，该函数的调用次数不能超过 $2N$ 次。\n\n```cpp\nint find_character(int x, vector<int> Y);\n```\n\n- $x$ 和 $Y$ 的所有元素必须是 $0$ 到 $N-1$ 之间的整数。\n- 如果 $S[x] = S[y]$ 且 $y \\in Y$，函数返回 `1`，否则返回 `0`。\n- 在每次 `guess_palindromicity` 调用中，该函数的调用次数不能超过 $N$ 次。\n- 在每次 `guess_palindromicity` 调用中，调用该函数的 $Y$ 的总大小不能超过 $N$。\n", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$S[0]\\,S[1]\\,\\ldots\\,S[N-1]$", "outputFormat": "如果程序判定为 `Accepted`，示例评测程序输出 `Correct : A B`，其中 A 是 `count_pair` 的调用次数，$B$ 是 `find_character` 的调用次数。\n\n如果程序判定为 `Wrong Answer`，示例评测程序输出 `Wrong : MSG`，其中 `MSG` 为以下之一：\n\n- `Wrong Input`：输入格式错误。\n- `Invalid Query`：查询值错误。\n- `Wrong Guess`：$S$ 是回文但 `guess_palindromicity` 返回 `0`，或相反。", "hint": "对于所有输入数据，满足：\n\n- $5 \\leq N \\leq 5000$\n- 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$1 \\leq S[i] \\leq 5000$\n- 一个测试用例中给定的 $N$ 的总和为 $M$，满足 $5 \\leq M \\leq 5000$\n\n在这个问题中，评测程序是非自适应的（NOT adaptive）。这意味着 $S$ 在评测程序执行开始时固定，不会根据查询而改变。\n\n## 部分问题\n\n每次 `guess_palindromicity` 调用的评分如下。你的提交得分是所有测试用例中 `guess_palindromicity` 调用得分的最小值。\n\n每次 `guess_palindromicity` 调用中，`count_pair` 函数的调用次数为 $A$，`find_character` 函数的调用次数为 $B$。\n\n如果程序未正常结束，或 `guess_palindromicity` 返回错误值，得分为 $0$。若 `guess_palindromicity` 返回正确值，得分如下表所示：\n\n| 条件 | 得分 |\n| :---: | :---: |\n| $A \\leq 2N, 2 \\leq B \\leq N$ | $15$ |\n| $N < A \\leq 2N, B \\leq 1$ | $50$ |\n| $\\left\\lfloor\\frac{N}{2}\\right\\rfloor + 2 < A \\leq N, B \\leq 1$ | $70$ |\n| $A = \\left\\lfloor\\frac{N}{2}\\right\\rfloor + 2, B \\leq 1$ | $90$ |\n| $A \\leq \\left\\lfloor\\frac{N}{2}\\right\\rfloor + 1, B \\leq 1$ | $100$ |", "locale": "zh-CN"}}}
{"pid": "P11241", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["点分治", "2024", "交互题", "KOI（韩国）"], "title": "[KTSC 2024 R2] 病毒", "background": "**请用 C++14 或 C++17 提交本题**\n\n你需要在代码开头加入如下代码：\n\n```cpp\n#include<vector>\nstd::vector<long long> find_spread(int N, int M, std::vector<int> A, std::vector<int> B, std::vector<int> P, std::vector<int> D, std::vector<int> C);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T4 「[바이러스](https://assets.ioikorea.kr/ioitst/2024/2/virus/virus_statement.pdf)」**\n\n由于上次新冠疫情的严重影响，KOI 城市决定为未来可能发生的疫情做好充分准备。为此，KOI 城市希望分析当前城市结构对病毒的脆弱程度。\n\nKOI 城市由 $N$ 个地点和 $N-1$ 条双向道路组成，任意两个不同的地点都可以通过这些道路互相到达。也就是说，城市的道路网络是一个树结构。每个地点用 $0$ 到 $N-1$ 的不同整数表示。由于城市的道路网络是树结构，对于任意两个地点 $u$ 和 $v$，从 $u$ 到 $v$ 的唯一简单路径上的边数定义为 $u$ 和 $v$ 之间的距离。\n\nKOI 城市有 $M$ 名居民。对于每个 $j$ $(0 \\leq j \\leq M-1)$，第 $j$ 个人住在 $P[j]$ 号地点，并且可以到达距离 $P[j]$ 不超过 $D[j]$ 的地点。\n\nKOI 城市的病毒学家们建立了一个模型来模拟病毒在两个人之间的传播过程。对于每个 $0 \\leq v \\leq N-1$，第 $v$ 号地点的传播时间用一个正整数 $C[v]$ 表示。假设第 $j$ 个人在时间 $t$ 首次感染病毒，并且第 $k$ 个人从第 $j$ 个人那里接收到病毒。如果存在一个地点 $w$，使得 $w$ 号地点与 $P[j]$ 号地点的距离不超过 $D[j]$，且 $w$ 号地点与 $P[k]$ 号地点的距离不超过 $D[k]$，那么 $w$ 号地点就是传播的媒介。\n\n如果没有这样的传播媒介，第 $k$ 个人不会直接从第 $j$ 个人那里感染病毒（当然，他可能通过其他人间接感染）。如果存在传播媒介，那么在所有可能的传播媒介中，选择传播时间最短的地点 $x$。如果第 $k$ 个人在时间 $t+C[x]$ 之前没有感染病毒，那么他将在时间 $t+C[x]$ 被第 $j$ 个人感染。病毒以这种方式在所有不同的两个人之间传播。\n\n在上述模型下，KOI 城市的研究人员希望计算当第 $0$ 个人在时间 $0$ 感染病毒时，其他人何时感染病毒。你需要计算对于每个 $0 \\leq j \\leq M-1$，第 $j$ 个人首次感染病毒的时间。如果第 $j$ 个人没有感染病毒，则记录为 $-1$。\n\n你需要实现以下函数：\n\n```cpp\nstd::vector<long long> find_spread(int N, int M, std::vector<int> A, std::vector<int> B, std::vector<int> P, std::vector<int> D, std::vector<int> C);\n```\n\n- `N`：KOI 城市的地点数量。\n- `M`：KOI 城市的居民数量。\n- `A, B`：长度为 $N-1$ 的数组。对于每个 $i$ $(0 \\leq i \\leq N-2)$，存在一条连接 $A[i]$ 和 $B[i]$ 的道路。每条道路在两个数组中只出现一次。\n- `P, D`：长度为 $M$ 的数组。对于每个 $j$ $(0 \\leq j \\leq M-1)$，第 $j$ 个人住在 $P[j]$ 号地点，并且可以到达距离 $P[j]$ 不超过 $D[j]$ 的地点。\n- `C`：长度为 $N$ 的数组。对于每个 $v$ $(0 \\leq v \\leq N-1)$，第 $v$ 号地点的传播时间为 $C[v]$。\n- 该函数返回一个长度为 $M$ 的数组 $T$。对于每个 $j$ $(0 \\leq j \\leq M-1)$，如果第 $j$ 个人感染病毒，$T[j]$ 表示他首次感染病毒的时间；如果没有感染，则为 $-1$。\n- 该函数在每个测试用例中只会被调用一次。\n", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,M$\n- 第 $2+i$ $(0 \\leq i \\leq N-2)$ 行：$A[i]\\,B[i]$\n- 第 $1+N+j$ $(0 \\leq j \\leq M-1)$ 行：$P[j]\\,D[j]$\n- 第 $1+N+M$ 行：$C[0]\\,C[1]\\,\\ldots\\,C[N-1]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1+j$ $(0 \\leq j \\leq M-1)$ 行：函数 `find_spread` 返回的数组的第 $j$ 个元素", "hint": "对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 10^5$\n- $1 \\leq M \\leq 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq A[i], B[i] \\leq N-1, A[i] \\neq B[i]$\n- 对于所有 $j$ $(0 \\leq j \\leq M-1)$，$0 \\leq P[j], D[j] \\leq N-1$\n- 对于所有 $v$ $(0 \\leq v \\leq N-1)$，$1 \\leq C[v] \\leq 10^{9}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $5$ | $N \\leq 500, M \\leq 500$；<br>对于所有 $i$ $(0 \\leq i \\leq N-2)$，$A[i]=i, B[i]=i+1$ |\n| $2$ | $8$ | $N \\leq 5000, M \\leq 5000$；<br>对于所有 $i$ $(0 \\leq i \\leq N-2)$，$A[i]=i, B[i]=i+1$ |\n| $3$ | $27$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$A[i]=i, B[i]=i+1$ |\n| $4$ | $5$ | $N \\leq 500, M \\leq 500$ |\n| $5$ | $8$ | $N \\leq 5000, M \\leq 5000$ |\n| $6$ | $47$ | 无附加限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2024 R2] 病毒", "background": "**请用 C++14 或 C++17 提交本题**\n\n你需要在代码开头加入如下代码：\n\n```cpp\n#include<vector>\nstd::vector<long long> find_spread(int N, int M, std::vector<int> A, std::vector<int> B, std::vector<int> P, std::vector<int> D, std::vector<int> C);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T4 「[바이러스](https://assets.ioikorea.kr/ioitst/2024/2/virus/virus_statement.pdf)」**\n\n由于上次新冠疫情的严重影响，KOI 城市决定为未来可能发生的疫情做好充分准备。为此，KOI 城市希望分析当前城市结构对病毒的脆弱程度。\n\nKOI 城市由 $N$ 个地点和 $N-1$ 条双向道路组成，任意两个不同的地点都可以通过这些道路互相到达。也就是说，城市的道路网络是一个树结构。每个地点用 $0$ 到 $N-1$ 的不同整数表示。由于城市的道路网络是树结构，对于任意两个地点 $u$ 和 $v$，从 $u$ 到 $v$ 的唯一简单路径上的边数定义为 $u$ 和 $v$ 之间的距离。\n\nKOI 城市有 $M$ 名居民。对于每个 $j$ $(0 \\leq j \\leq M-1)$，第 $j$ 个人住在 $P[j]$ 号地点，并且可以到达距离 $P[j]$ 不超过 $D[j]$ 的地点。\n\nKOI 城市的病毒学家们建立了一个模型来模拟病毒在两个人之间的传播过程。对于每个 $0 \\leq v \\leq N-1$，第 $v$ 号地点的传播时间用一个正整数 $C[v]$ 表示。假设第 $j$ 个人在时间 $t$ 首次感染病毒，并且第 $k$ 个人从第 $j$ 个人那里接收到病毒。如果存在一个地点 $w$，使得 $w$ 号地点与 $P[j]$ 号地点的距离不超过 $D[j]$，且 $w$ 号地点与 $P[k]$ 号地点的距离不超过 $D[k]$，那么 $w$ 号地点就是传播的媒介。\n\n如果没有这样的传播媒介，第 $k$ 个人不会直接从第 $j$ 个人那里感染病毒（当然，他可能通过其他人间接感染）。如果存在传播媒介，那么在所有可能的传播媒介中，选择传播时间最短的地点 $x$。如果第 $k$ 个人在时间 $t+C[x]$ 之前没有感染病毒，那么他将在时间 $t+C[x]$ 被第 $j$ 个人感染。病毒以这种方式在所有不同的两个人之间传播。\n\n在上述模型下，KOI 城市的研究人员希望计算当第 $0$ 个人在时间 $0$ 感染病毒时，其他人何时感染病毒。你需要计算对于每个 $0 \\leq j \\leq M-1$，第 $j$ 个人首次感染病毒的时间。如果第 $j$ 个人没有感染病毒，则记录为 $-1$。\n\n你需要实现以下函数：\n\n```cpp\nstd::vector<long long> find_spread(int N, int M, std::vector<int> A, std::vector<int> B, std::vector<int> P, std::vector<int> D, std::vector<int> C);\n```\n\n- `N`：KOI 城市的地点数量。\n- `M`：KOI 城市的居民数量。\n- `A, B`：长度为 $N-1$ 的数组。对于每个 $i$ $(0 \\leq i \\leq N-2)$，存在一条连接 $A[i]$ 和 $B[i]$ 的道路。每条道路在两个数组中只出现一次。\n- `P, D`：长度为 $M$ 的数组。对于每个 $j$ $(0 \\leq j \\leq M-1)$，第 $j$ 个人住在 $P[j]$ 号地点，并且可以到达距离 $P[j]$ 不超过 $D[j]$ 的地点。\n- `C`：长度为 $N$ 的数组。对于每个 $v$ $(0 \\leq v \\leq N-1)$，第 $v$ 号地点的传播时间为 $C[v]$。\n- 该函数返回一个长度为 $M$ 的数组 $T$。对于每个 $j$ $(0 \\leq j \\leq M-1)$，如果第 $j$ 个人感染病毒，$T[j]$ 表示他首次感染病毒的时间；如果没有感染，则为 $-1$。\n- 该函数在每个测试用例中只会被调用一次。\n", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,M$\n- 第 $2+i$ $(0 \\leq i \\leq N-2)$ 行：$A[i]\\,B[i]$\n- 第 $1+N+j$ $(0 \\leq j \\leq M-1)$ 行：$P[j]\\,D[j]$\n- 第 $1+N+M$ 行：$C[0]\\,C[1]\\,\\ldots\\,C[N-1]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1+j$ $(0 \\leq j \\leq M-1)$ 行：函数 `find_spread` 返回的数组的第 $j$ 个元素", "hint": "对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 10^5$\n- $1 \\leq M \\leq 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq A[i], B[i] \\leq N-1, A[i] \\neq B[i]$\n- 对于所有 $j$ $(0 \\leq j \\leq M-1)$，$0 \\leq P[j], D[j] \\leq N-1$\n- 对于所有 $v$ $(0 \\leq v \\leq N-1)$，$1 \\leq C[v] \\leq 10^{9}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $5$ | $N \\leq 500, M \\leq 500$；<br>对于所有 $i$ $(0 \\leq i \\leq N-2)$，$A[i]=i, B[i]=i+1$ |\n| $2$ | $8$ | $N \\leq 5000, M \\leq 5000$；<br>对于所有 $i$ $(0 \\leq i \\leq N-2)$，$A[i]=i, B[i]=i+1$ |\n| $3$ | $27$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$A[i]=i, B[i]=i+1$ |\n| $4$ | $5$ | $N \\leq 500, M \\leq 500$ |\n| $5$ | $8$ | $N \\leq 5000, M \\leq 5000$ |\n| $6$ | $47$ | 无附加限制 |", "locale": "zh-CN"}}}
{"pid": "P11242", "type": "P", "difficulty": 2, "samples": [["4\n2 3 4 5", "8\n"], ["7\n6 6 7 8 4 2 4", "14\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "树论", "洛谷月赛"], "title": "碧树", "background": "[English statement](https://www.luogu.com.cn/problem/U505210). **You must submit your code at the Chinese version of the statement.**\n\n小 T 不知道交流是什么。\n\n是为了弄懂一串奇怪的符号，然后再把它放入他人的大脑吗？\n\n是为了得到一些抽象的知识，然后再用它打破自己的习惯吗？\n\n为了交流，小 T 最终决定接通了 $\\text{220V}$ 的电压。", "description": "> t1k1x1ww。\n\n小 T 注视着这一串自己不能理解的符号，决定先和你交流一个 OI 题目。\n\n小 T 有一棵有根树，它共有 $k$ 个叶子结点，同时他还告诉了你，其叶子结点的深度分别为 $a_1\\dots a_k$。请你帮他计算，这棵树最少包含多少个结点。小 T 保证存在至少一棵这样的树。\n\n如果您不熟悉题面中的若干定义，我们乐意提醒您：\n\n- 图上的 **简单路径** 指一条经过顶点不重复、经过边不重复的路径。\n- 一棵 **树** 是一张联通，且任意两点之间有且仅有一条简单路径的图。在一棵树里，我们会选择一个节点为根结点。\n- 树上的 **叶子结点** 为不是根结点，且度数为 $1$ 的结点。\n- 树上一个节点的 **深度** 是该结点到根结点的简单路径上结点的个数。", "inputFormat": "第一行一个整数 $k$。\n\n接下来一行 $k$ 个整数，描述 $a_1\\dots a_k$。", "outputFormat": "仅一行一个整数，表示答案。", "hint": "### 样例解释\n\n- 对于第一组数据，下面是一棵可能的树：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kh6cgtyp.png?x-oss-process=image/resize,m_lfit,h_400,w_400)\n\n其大小为 $8$，其中叶子 $3, 5, 6, 8$ 的深度分别为 $2, 3, 4, 5$。容易证明没有大小 $\\leq 7$ 的树符合题意。\n\n### 数据规模与约定\n\n**本题采用捆绑测试和子任务依赖。**\n\n- Subtask 0（0 pts）：样例。\n- Subtask 1（30 pts）：$k = 2$。\n- Subtask 2（30 pts）：$a_1 = a_2 = \\dots = a_k$。\n- Subtask 3（40 pts）：无特殊限制。依赖于子任务 $0 \\sim 2$。\n\n对于所有数据，保证 $1 \\leq k \\leq 10^5$，$2 \\leq a_i \\leq 10^5$，且保证存在至少一棵这样的树。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "碧树", "background": "[English statement](https://www.luogu.com.cn/problem/U505210). **You must submit your code at the Chinese version of the statement.**\n\n小 T 不知道交流是什么。\n\n是为了弄懂一串奇怪的符号，然后再把它放入他人的大脑吗？\n\n是为了得到一些抽象的知识，然后再用它打破自己的习惯吗？\n\n为了交流，小 T 最终决定接通了 $\\text{220V}$ 的电压。", "description": "> t1k1x1ww。\n\n小 T 注视着这一串自己不能理解的符号，决定先和你交流一个 OI 题目。\n\n小 T 有一棵有根树，它共有 $k$ 个叶子结点，同时他还告诉了你，其叶子结点的深度分别为 $a_1\\dots a_k$。请你帮他计算，这棵树最少包含多少个结点。小 T 保证存在至少一棵这样的树。\n\n如果您不熟悉题面中的若干定义，我们乐意提醒您：\n\n- 图上的 **简单路径** 指一条经过顶点不重复、经过边不重复的路径。\n- 一棵 **树** 是一张联通，且任意两点之间有且仅有一条简单路径的图。在一棵树里，我们会选择一个节点为根结点。\n- 树上的 **叶子结点** 为不是根结点，且度数为 $1$ 的结点。\n- 树上一个节点的 **深度** 是该结点到根结点的简单路径上结点的个数。", "inputFormat": "第一行一个整数 $k$。\n\n接下来一行 $k$ 个整数，描述 $a_1\\dots a_k$。", "outputFormat": "仅一行一个整数，表示答案。", "hint": "### 样例解释\n\n- 对于第一组数据，下面是一棵可能的树：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kh6cgtyp.png?x-oss-process=image/resize,m_lfit,h_400,w_400)\n\n其大小为 $8$，其中叶子 $3, 5, 6, 8$ 的深度分别为 $2, 3, 4, 5$。容易证明没有大小 $\\leq 7$ 的树符合题意。\n\n### 数据规模与约定\n\n**本题采用捆绑测试和子任务依赖。**\n\n- Subtask 0（0 pts）：样例。\n- Subtask 1（30 pts）：$k = 2$。\n- Subtask 2（30 pts）：$a_1 = a_2 = \\dots = a_k$。\n- Subtask 3（40 pts）：无特殊限制。依赖于子任务 $0 \\sim 2$。\n\n对于所有数据，保证 $1 \\leq k \\leq 10^5$，$2 \\leq a_i \\leq 10^5$，且保证存在至少一棵这样的树。", "locale": "zh-CN"}}}
{"pid": "P11243", "type": "P", "difficulty": 3, "samples": [["5\n5\n<<<<\n7\n<=><=<\n9\n=<<><==<\n11\n>=<<=>>>=>\n13\n=><<=<=>=><>\n", "10\n9\n13\n29\n25\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["递推", "洛谷原创", "O2优化", "洛谷月赛", "双指针 two-pointer"], "title": "繁花", "background": "[English statement](https://www.luogu.com.cn/problem/U505208). **You must submit your code at the Chinese version of the statement.**\n\n我已经知道，在设置好循环播放时就已经知道，我是在麻痹自己，在逃避问题。\n\n我承认如此，可捞起那些沉于水底的细节时，却一瞬间突然和所有所有真实的心跳共鸣。\n\n那时总想的太少，现在常想得太多，不知所措似荒塘里的绿藻蔓延着。\n\n然而这世间情感太多，小 R 也只能体会更开心和更难过。", "description": "小 R 想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n小 R 有 $n$ 个未知量 $a_1\\dots a_n$，对每个 $1 \\leq i < n$，她都比较了 $a_i$ 和 $a_{i+1}$ 并写下了一个字符 $c_i \\in \\{\\texttt <, \\texttt >, \\texttt =\\}$，表示两个未知量之间的比较结果。具体地：\n\n- 若 $c_i = \\texttt >$，则 $a_i > a_{i+1}$；\n- 若 $c_i = \\texttt <$，则 $a_i < a_{i+1}$；\n- 否则（$c_i = \\texttt =$），表示 $a_i = a_{i+1}$。\n\n小 R 称 $\\bm{a_i}$ **比** $\\bm{a_j}$ **更开心**，当且仅当对任何 **满足上述 $\\bm{n - 1}$ 条约束的** $[a_1, \\dots, a_n] \\in \\mathbb R^n$，都有 $a_i < a_j$。请你帮她数出 $1 \\leq i, j \\leq n$ 且 $a_i$ 比 $a_j$ 更开心的整数数对 $(i, j)$ 个数。\n\n因为要循环播放，所以有多组数据。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行一个整数 $n$。\n- 接下来一行，一个长度为 $n - 1$ 的字符串 $c_1c_2\\dots c_{n-1}$。", "outputFormat": "对于每组数据，输出仅一行一个整数，表示符合条件的整数数对个数。", "hint": "### 样例解释\n\n- 对于第一组数据，$a_i$ 比 $a_j$ 开心当且仅当 $1 \\leq i < j \\leq n$，故共有 $\\frac{5\\times 4}{2} = 10$ 对合法的 $(i, j)$。\n- 对于第二组数据，合法的 $(i, j)$ 分别为：$(1, 2), (1, 3), (4, 2), (4, 3), (4, 5), (4, 6), (4, 7), (5, 7), (6, 7)$，共 $9$ 对。\n- 对于其他几组数据，聪明的读者可以自行验证。\n\n### 数据规模与约定\n\n**本题采用捆绑测试和子任务依赖。**\n\n- Subtask 0（0 pts）：样例。\n- Subtask 1（10 pts）：$n \\leq 8$，$T \\leq 8$。\n- Subtask 2（20 pts）：$n \\leq 5000$，$T \\leq 8$。依赖于子任务 $0, 1$。\n- Subtask 3（20 pts）：$c_i \\neq \\texttt =$。\n- Subtask 4（50 pts）：无特殊限制。依赖于子任务 $0 \\sim 3$。\n\n对于所有数据，保证 $2 \\leq n \\leq 2\\times 10^5$，$1 \\leq T \\leq 10^4$，$c_i \\in \\{\\texttt <, \\texttt >, \\texttt =\\}$，$\\sum n \\leq 5\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "繁花", "background": "[English statement](https://www.luogu.com.cn/problem/U505208). **You must submit your code at the Chinese version of the statement.**\n\n我已经知道，在设置好循环播放时就已经知道，我是在麻痹自己，在逃避问题。\n\n我承认如此，可捞起那些沉于水底的细节时，却一瞬间突然和所有所有真实的心跳共鸣。\n\n那时总想的太少，现在常想得太多，不知所措似荒塘里的绿藻蔓延着。\n\n然而这世间情感太多，小 R 也只能体会更开心和更难过。", "description": "小 R 想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n小 R 有 $n$ 个未知量 $a_1\\dots a_n$，对每个 $1 \\leq i < n$，她都比较了 $a_i$ 和 $a_{i+1}$ 并写下了一个字符 $c_i \\in \\{\\texttt <, \\texttt >, \\texttt =\\}$，表示两个未知量之间的比较结果。具体地：\n\n- 若 $c_i = \\texttt >$，则 $a_i > a_{i+1}$；\n- 若 $c_i = \\texttt <$，则 $a_i < a_{i+1}$；\n- 否则（$c_i = \\texttt =$），表示 $a_i = a_{i+1}$。\n\n小 R 称 $\\bm{a_i}$ **比** $\\bm{a_j}$ **更开心**，当且仅当对任何 **满足上述 $\\bm{n - 1}$ 条约束的** $[a_1, \\dots, a_n] \\in \\mathbb R^n$，都有 $a_i < a_j$。请你帮她数出 $1 \\leq i, j \\leq n$ 且 $a_i$ 比 $a_j$ 更开心的整数数对 $(i, j)$ 个数。\n\n因为要循环播放，所以有多组数据。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行一个整数 $n$。\n- 接下来一行，一个长度为 $n - 1$ 的字符串 $c_1c_2\\dots c_{n-1}$。", "outputFormat": "对于每组数据，输出仅一行一个整数，表示符合条件的整数数对个数。", "hint": "### 样例解释\n\n- 对于第一组数据，$a_i$ 比 $a_j$ 开心当且仅当 $1 \\leq i < j \\leq n$，故共有 $\\frac{5\\times 4}{2} = 10$ 对合法的 $(i, j)$。\n- 对于第二组数据，合法的 $(i, j)$ 分别为：$(1, 2), (1, 3), (4, 2), (4, 3), (4, 5), (4, 6), (4, 7), (5, 7), (6, 7)$，共 $9$ 对。\n- 对于其他几组数据，聪明的读者可以自行验证。\n\n### 数据规模与约定\n\n**本题采用捆绑测试和子任务依赖。**\n\n- Subtask 0（0 pts）：样例。\n- Subtask 1（10 pts）：$n \\leq 8$，$T \\leq 8$。\n- Subtask 2（20 pts）：$n \\leq 5000$，$T \\leq 8$。依赖于子任务 $0, 1$。\n- Subtask 3（20 pts）：$c_i \\neq \\texttt =$。\n- Subtask 4（50 pts）：无特殊限制。依赖于子任务 $0 \\sim 3$。\n\n对于所有数据，保证 $2 \\leq n \\leq 2\\times 10^5$，$1 \\leq T \\leq 10^4$，$c_i \\in \\{\\texttt <, \\texttt >, \\texttt =\\}$，$\\sum n \\leq 5\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P11244", "type": "P", "difficulty": 4, "samples": [["5 3 6\n1 3 2 5 6\n2 7 8 2 2\n3 5 3 4 8\n2 1 5\n1 1 2\n2 2 4\n1 1 3\n1 2 1\n2 2 3", "6\n7\n2\n"], ["6 5 20\n5 14 13 1 15 17\n7 7 19 3 8 6\n16 13 13 6 14 2\n12 5 4 17 12 3\n19 19 4 6 3 3\n2 5 3\n1 4 3\n2 1 1\n1 2 5\n2 4 6\n2 2 2\n1 4 2\n1 2 4\n2 1 1\n2 3 3\n2 3 3\n1 4 2\n1 4 1\n2 3 5\n1 3 4\n1 4 1\n1 1 4\n1 5 1\n2 2 4\n2 4 2\n", "4\n5\n12\n3\n5\n13\n13\n16\n6\n14\n"]], "limits": {"time": [900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "暴力数据结构", "洛谷原创", "O2优化", "枚举", "排序", "洛谷月赛"], "title": "吻秋", "background": "[English statement](https://www.luogu.com.cn/problem/U500140). **You must submit your code at the Chinese version of the statement.**\n\n秋雨刚刚亲吻过大地，白云便卷起赤橙黄绿青蓝紫。\n\n波长在可见光范围内自由落体，让蒸腾的水汽都带上了递进的旋律。\n\n渐变色模糊的印象总被晴天匆匆带过，但往往反常的极差让我们更加记忆犹新。\n\n所以有序，真的最优吗？", "description": "小 C 有 $m$ 个整数序列 $a_1\\dots a_m$，每个序列的长度都为 $n$。\n\n小 C 想要把自己的序列按照整数大小排序。于是小 C 有 $q$ 次操作，每次操作：\n\n- 要么，小 C 给出 $x, y\\ (x \\neq y)$，他想把 $a_x, a_y$ 拼接在一起形成长度为 $2n$ 的序列 $b$，将 $b$ 升序排序后取 $b_1\\dots b_n$ 作为新的 $a_x$，$b_{n+1}\\dots b_{2n}$ 作为新的 $a_y$；\n- 要么，小 C 给出 $i, j$，细心的小 C 想要询问你，经过前面的若干次操作后，$a_{i,j}$ 的值，你需要准确回答他的问题。", "inputFormat": "第一行，三个整数 $n, m, q$。\n\n接下来 $m$ 行，每行 $n$ 个整数，第 $i$ 行 $j$ 个整数表示 $a_{i,j}$。\n\n接下来 $q$ 行，每行三个整数，描述一次操作或询问。其格式为下述两种之一：\n\n- $\\verb!1 x y!$ 表示对 $a_x, a_y$ 进行排序，其中 $1 \\leq x \\neq y \\leq m$；\n- $\\verb!2 i j!$ 表示查询 $a_{i,j}$，其中 $1 \\leq i \\leq m$，$1 \\leq j \\leq n$。", "outputFormat": "对于每组询问，一行一个整数，表示答案。", "hint": "### 数据规模与约定\n\n**本题采用捆绑测试和子任务依赖**。\n\n因为最后两个 Subtask 的极限输入数据大小分别达到 18MB、50MB 以上，C++ 选手可以选择使用下面的 **快速输入输出模板**：\n\n```cpp\nnamespace FastIO {\n\tchar buf[1 << 21], *p1 = buf, *p2 = buf;\n#define getchar() (p1 == p2 && (p1 = buf, p2 = (p1 + fread(buf, 1, 1 << 21, stdin))) == p1 ? EOF : *p1++)\n\ttemplate <typename T> inline T read() { T x = 0, w = 0; char ch = getchar(); while (ch < '0' || ch > '9') w |= (ch == '-'), ch = getchar(); while ('0' <= ch && ch <= '9') x = x * 10 + (ch ^ '0'), ch = getchar(); return w ? -x : x; }\n\ttemplate <typename T> inline void write(T x) { if (!x) return; write<T>(x / 10), putchar((x % 10) ^ '0'); }\n\ttemplate <typename T> inline void print(T x) { if (x > 0) write<T>(x); else if (x < 0) putchar('-'), write<T>(-x); else putchar('0'); }\n\ttemplate <typename T> inline void print(T x, char en) { print<T>(x), putchar(en); }\n}; using namespace FastIO;\n#undef getchar()\n```\n\n**不保证除了 C++ 以外的语言一定能够通过，但保证对于 C++ 语言有充足的时限。**\n\n---\n\n- Subtask 0（0 pts）：样例。\n- Subtask 1（9 pts）：$n \\leq 10^4$，$q \\leq 3000$。依赖于子任务 $0$。\n- Subtask 2（23 pts）：$q \\leq 3000$。依赖于子任务 $0, 1$。\n- Subtask 3（20 pts）：$m \\leq 5$，$q \\leq 4\\times 10^5$。依赖于子任务 $0$。\n- Subtask 4（28 pts）：$q \\leq 4\\times 10^5$。依赖于子任务 $0 \\sim 3$。\n- Subtask 5（20 pts）：无特殊限制。依赖于子任务 $0 \\sim 4$。\n\n对于所有数据，满足 $1 \\leq n\\cdot m \\leq 2\\times 10^6$，$1 \\leq m \\leq 20$，$1 \\leq q \\leq 5\\times 10^6$，$1 \\leq a_{i,j} \\leq 10^7$；对于操作或询问，$1 \\leq x \\neq y \\leq m$，$1 \\leq i \\leq m$，$1 \\leq j \\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "吻秋", "background": "[English statement](https://www.luogu.com.cn/problem/U500140). **You must submit your code at the Chinese version of the statement.**\n\n秋雨刚刚亲吻过大地，白云便卷起赤橙黄绿青蓝紫。\n\n波长在可见光范围内自由落体，让蒸腾的水汽都带上了递进的旋律。\n\n渐变色模糊的印象总被晴天匆匆带过，但往往反常的极差让我们更加记忆犹新。\n\n所以有序，真的最优吗？", "description": "小 C 有 $m$ 个整数序列 $a_1\\dots a_m$，每个序列的长度都为 $n$。\n\n小 C 想要把自己的序列按照整数大小排序。于是小 C 有 $q$ 次操作，每次操作：\n\n- 要么，小 C 给出 $x, y\\ (x \\neq y)$，他想把 $a_x, a_y$ 拼接在一起形成长度为 $2n$ 的序列 $b$，将 $b$ 升序排序后取 $b_1\\dots b_n$ 作为新的 $a_x$，$b_{n+1}\\dots b_{2n}$ 作为新的 $a_y$；\n- 要么，小 C 给出 $i, j$，细心的小 C 想要询问你，经过前面的若干次操作后，$a_{i,j}$ 的值，你需要准确回答他的问题。", "inputFormat": "第一行，三个整数 $n, m, q$。\n\n接下来 $m$ 行，每行 $n$ 个整数，第 $i$ 行 $j$ 个整数表示 $a_{i,j}$。\n\n接下来 $q$ 行，每行三个整数，描述一次操作或询问。其格式为下述两种之一：\n\n- $\\verb!1 x y!$ 表示对 $a_x, a_y$ 进行排序，其中 $1 \\leq x \\neq y \\leq m$；\n- $\\verb!2 i j!$ 表示查询 $a_{i,j}$，其中 $1 \\leq i \\leq m$，$1 \\leq j \\leq n$。", "outputFormat": "对于每组询问，一行一个整数，表示答案。", "hint": "### 数据规模与约定\n\n**本题采用捆绑测试和子任务依赖**。\n\n因为最后两个 Subtask 的极限输入数据大小分别达到 18MB、50MB 以上，C++ 选手可以选择使用下面的 **快速输入输出模板**：\n\n```cpp\nnamespace FastIO {\n\tchar buf[1 << 21], *p1 = buf, *p2 = buf;\n#define getchar() (p1 == p2 && (p1 = buf, p2 = (p1 + fread(buf, 1, 1 << 21, stdin))) == p1 ? EOF : *p1++)\n\ttemplate <typename T> inline T read() { T x = 0, w = 0; char ch = getchar(); while (ch < '0' || ch > '9') w |= (ch == '-'), ch = getchar(); while ('0' <= ch && ch <= '9') x = x * 10 + (ch ^ '0'), ch = getchar(); return w ? -x : x; }\n\ttemplate <typename T> inline void write(T x) { if (!x) return; write<T>(x / 10), putchar((x % 10) ^ '0'); }\n\ttemplate <typename T> inline void print(T x) { if (x > 0) write<T>(x); else if (x < 0) putchar('-'), write<T>(-x); else putchar('0'); }\n\ttemplate <typename T> inline void print(T x, char en) { print<T>(x), putchar(en); }\n}; using namespace FastIO;\n#undef getchar()\n```\n\n**不保证除了 C++ 以外的语言一定能够通过，但保证对于 C++ 语言有充足的时限。**\n\n---\n\n- Subtask 0（0 pts）：样例。\n- Subtask 1（9 pts）：$n \\leq 10^4$，$q \\leq 3000$。依赖于子任务 $0$。\n- Subtask 2（23 pts）：$q \\leq 3000$。依赖于子任务 $0, 1$。\n- Subtask 3（20 pts）：$m \\leq 5$，$q \\leq 4\\times 10^5$。依赖于子任务 $0$。\n- Subtask 4（28 pts）：$q \\leq 4\\times 10^5$。依赖于子任务 $0 \\sim 3$。\n- Subtask 5（20 pts）：无特殊限制。依赖于子任务 $0 \\sim 4$。\n\n对于所有数据，满足 $1 \\leq n\\cdot m \\leq 2\\times 10^6$，$1 \\leq m \\leq 20$，$1 \\leq q \\leq 5\\times 10^6$，$1 \\leq a_{i,j} \\leq 10^7$；对于操作或询问，$1 \\leq x \\neq y \\leq m$，$1 \\leq i \\leq m$，$1 \\leq j \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P11245", "type": "P", "difficulty": 6, "samples": [["5\n1 2 3 5\n3 3 4 6\n5 6 11 13\n10 15 33 22\n10 13 11 11", "No\nYes\nNo\nYes\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "残雪", "background": "[English statement](https://www.luogu.com.cn/problem/U500139). **You must submit your code at the Chinese version of the statement.**\n\n如果我再和你走在同一条路上的话，我也会把远方的星星讲过无限的话再跟你说一遍吧。\n\n你微笑着把竖起的手指放在嘴角，似乎是在暗示我，原来你就是远方的 Polestar 罢了。\n\n令人伤感的事情是，这个世界上没有了小王子，也没有了去年今日的那位飞行员。\n\n试问闲愁都几许？一川烟草，满城风絮，梅子黄时雨。\n\n![](https://pic.imgdb.cn/item/670fd597d29ded1a8c604148.png)", "description": "给出集合 $S$。我们定义一个 $\\tt 01$ 串 $t$ 是不好的，当且仅当存在 $k \\in S$，使得 $t$ 包含一个长度为 $2k$ 的子串 $t'$，且 $t'$ 恰好包含 $k$ 个 $\\tt 0$ 和 $k$ 个 $\\tt 1$。对立地，一个 $\\tt 01$ 串如果不是不好的，那么它就是好的。\n\n小 Y 有 $q$ 组询问，每次给出 $L, R, m, n$，表示 $S = \\{x \\in \\N_+ \\mid L \\leq x \\leq R\\}$，判断是否存在一个好的字符串 $t$ 满足 $t$ 恰好包含 $m$ 个 $\\tt 0$ 和 $n$ 个 $\\tt 1$。", "inputFormat": "第一行，一个整数 $q$，表示询问个数。对于每组询问：\n\n- 仅一行，四个整数 $L, R, m, n$。", "outputFormat": "输出共 $q$ 行。对于每组询问，一行一个字符串 `Yes` 或 `No` 表示你的答案：你应当输出 `Yes`，当且仅当你对小 Y 的问题的回答是肯定的。\n\n本题中字符串大小写不敏感，即 `yEs`、`yes`、`Yes`、`YES` 等都被认为是 `Yes`；`No` 同理。", "hint": "### 样例解释\n\n- 对于第一组数据，因为包含 $\\tt 0, 1$ 但 $L = 1$，所以一定不合法。\n- 对于第二组数据，存在 $t = \\tt 0011111100$。容易证明这是合法的。\n- 对于第三组数据，事实确实如此。\n- 对于其它数据，暂时不能给你一个明确的答复。\n\n### 数据规模与约定\n\n**本题采用捆绑测试和子任务依赖。**\n\n- Subtask 0（0 pts）：样例。\n- Subtask 1（13 pts）：$q \\leq 10^3$，$n + m \\leq 14$，$R \\leq 14$。\n- Subtask 2（20 pts）：$\\sum \\max(n, m, L, R) \\leq 5\\times 10^3 + 5$。依赖于子任务 $0$。\n- Subtask 3（13 pts）：$\\sum \\max(n, m, L, R) \\leq 10^7 + 100$。依赖于子任务 $0 \\sim 2$。\n- Subtask 4（13 pts）：$L = R$。\n- Subtask 5（41 pts）：无特殊限制。依赖于子任务 $0 \\sim 4$。\n\n对于所有数据，保证 $1 \\leq q \\leq 10^5$，$1 \\leq L \\leq R \\leq 10^{18}$，$0 \\leq n, m \\leq 10^{18}$，$n + m \\geq 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "残雪", "background": "[English statement](https://www.luogu.com.cn/problem/U500139). **You must submit your code at the Chinese version of the statement.**\n\n如果我再和你走在同一条路上的话，我也会把远方的星星讲过无限的话再跟你说一遍吧。\n\n你微笑着把竖起的手指放在嘴角，似乎是在暗示我，原来你就是远方的 Polestar 罢了。\n\n令人伤感的事情是，这个世界上没有了小王子，也没有了去年今日的那位飞行员。\n\n试问闲愁都几许？一川烟草，满城风絮，梅子黄时雨。\n\n![](https://pic.imgdb.cn/item/670fd597d29ded1a8c604148.png)", "description": "给出集合 $S$。我们定义一个 $\\tt 01$ 串 $t$ 是不好的，当且仅当存在 $k \\in S$，使得 $t$ 包含一个长度为 $2k$ 的子串 $t'$，且 $t'$ 恰好包含 $k$ 个 $\\tt 0$ 和 $k$ 个 $\\tt 1$。对立地，一个 $\\tt 01$ 串如果不是不好的，那么它就是好的。\n\n小 Y 有 $q$ 组询问，每次给出 $L, R, m, n$，表示 $S = \\{x \\in \\N_+ \\mid L \\leq x \\leq R\\}$，判断是否存在一个好的字符串 $t$ 满足 $t$ 恰好包含 $m$ 个 $\\tt 0$ 和 $n$ 个 $\\tt 1$。", "inputFormat": "第一行，一个整数 $q$，表示询问个数。对于每组询问：\n\n- 仅一行，四个整数 $L, R, m, n$。", "outputFormat": "输出共 $q$ 行。对于每组询问，一行一个字符串 `Yes` 或 `No` 表示你的答案：你应当输出 `Yes`，当且仅当你对小 Y 的问题的回答是肯定的。\n\n本题中字符串大小写不敏感，即 `yEs`、`yes`、`Yes`、`YES` 等都被认为是 `Yes`；`No` 同理。", "hint": "### 样例解释\n\n- 对于第一组数据，因为包含 $\\tt 0, 1$ 但 $L = 1$，所以一定不合法。\n- 对于第二组数据，存在 $t = \\tt 0011111100$。容易证明这是合法的。\n- 对于第三组数据，事实确实如此。\n- 对于其它数据，暂时不能给你一个明确的答复。\n\n### 数据规模与约定\n\n**本题采用捆绑测试和子任务依赖。**\n\n- Subtask 0（0 pts）：样例。\n- Subtask 1（13 pts）：$q \\leq 10^3$，$n + m \\leq 14$，$R \\leq 14$。\n- Subtask 2（20 pts）：$\\sum \\max(n, m, L, R) \\leq 5\\times 10^3 + 5$。依赖于子任务 $0$。\n- Subtask 3（13 pts）：$\\sum \\max(n, m, L, R) \\leq 10^7 + 100$。依赖于子任务 $0 \\sim 2$。\n- Subtask 4（13 pts）：$L = R$。\n- Subtask 5（41 pts）：无特殊限制。依赖于子任务 $0 \\sim 4$。\n\n对于所有数据，保证 $1 \\leq q \\leq 10^5$，$1 \\leq L \\leq R \\leq 10^{18}$，$0 \\leq n, m \\leq 10^{18}$，$n + m \\geq 1$。", "locale": "zh-CN"}}}
{"pid": "P11246", "type": "P", "difficulty": 2, "samples": [["18\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "GESP"], "title": "[GESP202409 六级] 小杨和整数拆分", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1162>", "description": "小杨有一个正整数 $n$，小杨想将它拆分成若干完全平方数的和，同时小杨希望拆分的数量越少越好。\n\n编程计算总和为 $n$ 的完全平方数的最小数量。", "inputFormat": "输入只有一行一个正整数 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n对全部的测试数据，保证 $1 \\leq n \\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202409 六级] 小杨和整数拆分", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1162>", "description": "小杨有一个正整数 $n$，小杨想将它拆分成若干完全平方数的和，同时小杨希望拆分的数量越少越好。\n\n编程计算总和为 $n$ 的完全平方数的最小数量。", "inputFormat": "输入只有一行一个正整数 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n对全部的测试数据，保证 $1 \\leq n \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P11247", "type": "P", "difficulty": 3, "samples": [["3 5 10\n1 1 2 3 3\n9 1 10 10 1", "4"], ["2 4 10\n1 1 1 2\n1 2 7 10", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2024", "GESP"], "title": "[GESP202409 六级] 算法学习", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1162>", "description": "小杨计划学习 $m$ 种算法，为此他找了 $n$ 道题目来帮助自己学习，每道题目最多学习一次。\n\n小杨对于 $m$ 种算法的初始掌握程度均为 $0$。第 $i$ 道题目有对应的知识点 $a_i$，即学习第 $i$ 道题目可以令小杨对第 $a_i$ 种算法的掌握程度提高 $b_i$。小杨的学习目标是对于 $m$ 种算法的掌握程度均至少为 $k$。\n\n小杨认为连续学习两道相同知识点的题目是不好的，小杨想请你编写程序帮他计算出他最少需要学习多少道题目才能使得他在完成学习目标的同时避免连续学习两道相同知识点的题目。", "inputFormat": "第一行三个正整数 $m, n, k$，代表算法种类数，题目数和目标掌握程度。  \n第二行 $n$ 个正整数 $a_1, a_2, ..., a_n$，代表每道题目的知识点。  \n第三行 $n$ 个正整数 $b_1, b_2, ..., b_n$，代表每道题目提升的掌握程度。", "outputFormat": "输出一个整数，代表小杨最少需要学习题目的数量，如果不存在满足条件的方案，输出 -1。", "hint": "### 样例 1 解释\n\n一种最优学习顺序为第一道题，第三道题，第四道题，第二道题。\n\n### 数据规模与约定\n\n| 子任务编号 | 数据点占比 | $m$ | $n$ | $b_i$ | $k$ |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $30\\%$ | $2$ | $\\leq 9$ | $\\leq 10$ | $\\leq 10$ |\n| $2$ | $30\\%$ | $\\leq 9$ | $\\leq 9$ | $\\leq 10$ | $\\leq 10$ |\n| $3$ | $40\\%$ | $\\leq 10^5$ | $\\leq 10^5$ | $\\leq 10^5$ | $\\leq 10^5$ |\n\n对于全部数据，保证有 $1 \\leq m, n, b_i, k \\leq 10^5$，$1 \\leq a_i \\leq m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202409 六级] 算法学习", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1162>", "description": "小杨计划学习 $m$ 种算法，为此他找了 $n$ 道题目来帮助自己学习，每道题目最多学习一次。\n\n小杨对于 $m$ 种算法的初始掌握程度均为 $0$。第 $i$ 道题目有对应的知识点 $a_i$，即学习第 $i$ 道题目可以令小杨对第 $a_i$ 种算法的掌握程度提高 $b_i$。小杨的学习目标是对于 $m$ 种算法的掌握程度均至少为 $k$。\n\n小杨认为连续学习两道相同知识点的题目是不好的，小杨想请你编写程序帮他计算出他最少需要学习多少道题目才能使得他在完成学习目标的同时避免连续学习两道相同知识点的题目。", "inputFormat": "第一行三个正整数 $m, n, k$，代表算法种类数，题目数和目标掌握程度。  \n第二行 $n$ 个正整数 $a_1, a_2, ..., a_n$，代表每道题目的知识点。  \n第三行 $n$ 个正整数 $b_1, b_2, ..., b_n$，代表每道题目提升的掌握程度。", "outputFormat": "输出一个整数，代表小杨最少需要学习题目的数量，如果不存在满足条件的方案，输出 -1。", "hint": "### 样例 1 解释\n\n一种最优学习顺序为第一道题，第三道题，第四道题，第二道题。\n\n### 数据规模与约定\n\n| 子任务编号 | 数据点占比 | $m$ | $n$ | $b_i$ | $k$ |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $30\\%$ | $2$ | $\\leq 9$ | $\\leq 10$ | $\\leq 10$ |\n| $2$ | $30\\%$ | $\\leq 9$ | $\\leq 9$ | $\\leq 10$ | $\\leq 10$ |\n| $3$ | $40\\%$ | $\\leq 10^5$ | $\\leq 10^5$ | $\\leq 10^5$ | $\\leq 10^5$ |\n\n对于全部数据，保证有 $1 \\leq m, n, b_i, k \\leq 10^5$，$1 \\leq a_i \\leq m$。", "locale": "zh-CN"}}}
{"pid": "P11248", "type": "P", "difficulty": 2, "samples": [["2\n3 3 1\n000\n111\n01?\n3 3 1\n000\n?0?\n01?\n", "4\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "GESP"], "title": "[GESP202409 七级] 矩阵移动", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1163>", "description": "小杨有一个 $n \\times m$ 的矩阵，仅包含 `01?` 三种字符。矩阵的行从上到下编号依次为 $1,2,\\dots, n$，列从左到右编号依次为 $1, 2, \\dots, m$。小杨开始在矩阵的左上角 $(1,1)$，小杨只能向下或者向右移动，最终到达右下角 $(n, m)$ 时停止，在移动的过程中每经过一个字符 `1` 得分会增加一分（包括起点和终点），经过其它字符则分数不变。小杨的初始分数为 $0$ 分。\n\n小杨可以将矩阵中不超过 $x$ 个字符 `?` 变为字符  `1`。小杨在修改矩阵后，会以最优的策略从左上角移动到右下角。他想知道自己最多能获得多少分。", "inputFormat": "第一行包含一个正整数 $t$，代表测试用例组数，接下来是 $t$ 组测试用例。对于每组测试用例，一共 $n + 1$ 行。\n\n第一行包含三个正整数 $n, m, x$，含义如题面所示。  \n之后 $n$ 行，每行一个长度为 $m$ 的仅含 `01?` 的字符串。", "outputFormat": "对于每组测试用例，输出一行一个整数，代表最优策略下小杨的得分最多是多少。", "hint": "### 样例 1 解释\n\n对于第二组测试用例，将 $(2,1)$ 或者 $(3,3)$ 变为 $1$ 均是最优策略。\n\n### 数据规模与约定\n\n| 子任务编号 | 数据点占比 | $t$ | $n,m$ | $x$ |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $30\\%$ | $\\leq 5$ | $\\le 10$ | $=1$ |\n| $2$ | $30\\%$ | $\\le 10$ | $\\le 500$ | $\\le 30$ |\n| $3$ | $40\\%$ | $\\le 10$ | $\\le 500$ | $\\le 300$ |\n\n对全部的测试数据，保证 $1 \\leq t \\leq 10$，$1 \\leq n,m \\leq 500$，$1 \\leq x \\leq 300$，保证所有测试用例 $n \\times m$ 的总和不超过 $2.5 \\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202409 七级] 矩阵移动", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1163>", "description": "小杨有一个 $n \\times m$ 的矩阵，仅包含 `01?` 三种字符。矩阵的行从上到下编号依次为 $1,2,\\dots, n$，列从左到右编号依次为 $1, 2, \\dots, m$。小杨开始在矩阵的左上角 $(1,1)$，小杨只能向下或者向右移动，最终到达右下角 $(n, m)$ 时停止，在移动的过程中每经过一个字符 `1` 得分会增加一分（包括起点和终点），经过其它字符则分数不变。小杨的初始分数为 $0$ 分。\n\n小杨可以将矩阵中不超过 $x$ 个字符 `?` 变为字符  `1`。小杨在修改矩阵后，会以最优的策略从左上角移动到右下角。他想知道自己最多能获得多少分。", "inputFormat": "第一行包含一个正整数 $t$，代表测试用例组数，接下来是 $t$ 组测试用例。对于每组测试用例，一共 $n + 1$ 行。\n\n第一行包含三个正整数 $n, m, x$，含义如题面所示。  \n之后 $n$ 行，每行一个长度为 $m$ 的仅含 `01?` 的字符串。", "outputFormat": "对于每组测试用例，输出一行一个整数，代表最优策略下小杨的得分最多是多少。", "hint": "### 样例 1 解释\n\n对于第二组测试用例，将 $(2,1)$ 或者 $(3,3)$ 变为 $1$ 均是最优策略。\n\n### 数据规模与约定\n\n| 子任务编号 | 数据点占比 | $t$ | $n,m$ | $x$ |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $30\\%$ | $\\leq 5$ | $\\le 10$ | $=1$ |\n| $2$ | $30\\%$ | $\\le 10$ | $\\le 500$ | $\\le 30$ |\n| $3$ | $40\\%$ | $\\le 10$ | $\\le 500$ | $\\le 300$ |\n\n对全部的测试数据，保证 $1 \\leq t \\leq 10$，$1 \\leq n,m \\leq 500$，$1 \\leq x \\leq 300$，保证所有测试用例 $n \\times m$ 的总和不超过 $2.5 \\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P11249", "type": "P", "difficulty": 3, "samples": [["2\n5\n0 1 0 1 0\n1 2\n1 3\n3 4\n3 5\n5\n1 1 1 1 1\n1 2\n1 3\n3 4\n3 5\n", "Yes\nNo\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2024", "深度优先搜索 DFS", "树形 DP", "树的遍历", "GESP"], "title": "[GESP202409 七级] 小杨寻宝", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1163>", "description": "小杨有一棵包含 $n$ 个节点的树，树上的一些节点放置有宝物。\n\n小杨可以任意选择一个节点作为起点并在树上移动，但是小杨只能经过每条边至多一次，当小杨经过一条边后，这条边就会消失。小杨每经过一个放置有宝物的节点就会取得该宝物。\n\n小杨想请你帮他判断自己能否成功取得所有宝物。", "inputFormat": "\n**本题单个测试点内有多组测试数据**。输入第一行包含一个正整数 $t$，代表测试用例组数。  \n接下来是 $t$ 组测试用例。对于每组测试用例，一共 $n+1$ 行。\n\n第一行包含一个正整数 $n$，代表树的节点数。  \n第二行包含 $n$ 个非负整数 $a_1, a_2, \\dots a_n$，其中如果 $a_i = 1$，则节点 $i$ 放置有宝物；若 $a_i = 0$，则节点 $i$ 没有宝物。  \n之后 $n - 1$ 行，每行包含两个正整数 $x_i, y_i$，代表存在一条连接节点 $x_i$ 和 $y_i$ 的边。\n", "outputFormat": "\n对于每组测试数据，如果小杨能成功取得所有宝物，输出 Yes，否则输出 No。", "hint": "\n### 样例 1 解释\n\n对于第一组测试用例，小杨从节点 $2$ 出发，按照 $2-1-3-4$ 的顺序即可成功取得所有宝物。\n\n### 数据规模与约定\n\n| 子任务编号 | 数据点占比 | $t$ | $n$ |\n| :-: | :-: | :-: | :-: |\n| $1$ | $20\\%$ | $\\leq 10$ | $\\leq 5$ |\n| $2$ | $20\\%$ | $\\leq 10$ | $\\leq 10^3$ |\n| $3$ | $60\\%$ | $\\leq 10$ | $\\leq 10^5$ |\n\n对全部的测试点，保证 $1 \\leq t \\leq 10$，$1 \\leq n \\leq 10^5$，$0 \\leq a_i \\leq 1$，且保证树上至少有一个点放置有宝物。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202409 七级] 小杨寻宝", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1163>", "description": "小杨有一棵包含 $n$ 个节点的树，树上的一些节点放置有宝物。\n\n小杨可以任意选择一个节点作为起点并在树上移动，但是小杨只能经过每条边至多一次，当小杨经过一条边后，这条边就会消失。小杨每经过一个放置有宝物的节点就会取得该宝物。\n\n小杨想请你帮他判断自己能否成功取得所有宝物。", "inputFormat": "\n**本题单个测试点内有多组测试数据**。输入第一行包含一个正整数 $t$，代表测试用例组数。  \n接下来是 $t$ 组测试用例。对于每组测试用例，一共 $n+1$ 行。\n\n第一行包含一个正整数 $n$，代表树的节点数。  \n第二行包含 $n$ 个非负整数 $a_1, a_2, \\dots a_n$，其中如果 $a_i = 1$，则节点 $i$ 放置有宝物；若 $a_i = 0$，则节点 $i$ 没有宝物。  \n之后 $n - 1$ 行，每行包含两个正整数 $x_i, y_i$，代表存在一条连接节点 $x_i$ 和 $y_i$ 的边。\n", "outputFormat": "\n对于每组测试数据，如果小杨能成功取得所有宝物，输出 Yes，否则输出 No。", "hint": "\n### 样例 1 解释\n\n对于第一组测试用例，小杨从节点 $2$ 出发，按照 $2-1-3-4$ 的顺序即可成功取得所有宝物。\n\n### 数据规模与约定\n\n| 子任务编号 | 数据点占比 | $t$ | $n$ |\n| :-: | :-: | :-: | :-: |\n| $1$ | $20\\%$ | $\\leq 10$ | $\\leq 5$ |\n| $2$ | $20\\%$ | $\\leq 10$ | $\\leq 10^3$ |\n| $3$ | $60\\%$ | $\\leq 10$ | $\\leq 10^5$ |\n\n对全部的测试点，保证 $1 \\leq t \\leq 10$，$1 \\leq n \\leq 10^5$，$0 \\leq a_i \\leq 1$，且保证树上至少有一个点放置有宝物。", "locale": "zh-CN"}}}
{"pid": "P11250", "type": "P", "difficulty": 3, "samples": [["2\n5 6 2\n5 1 5", "120\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "组合数学", "排列组合", "GESP"], "title": "[GESP202409 八级] 手套配对", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1164>", "description": "小杨有 $n$ 对不同的手套，每对手套由左右各一只组成。\n\n小杨想知道从中取出 $m$ 只手套，$m$ 只手套恰好包含 $k$ 对手套的情况有多少种。\n\n小杨认为两种取出的情况不同，当且仅当两种情况取出的手套中存在不同的手套（同一对手套的左右手也视为不同的手套）。", "inputFormat": "**本题单个测试点内有多组测试数据**。\n\n第一行包含一个正整数 $t$，代表测试用例组数。\n\n接下来是 $t$ 组测试用例。对于每组测试用例，一共一行。\n\n第一行包含三个正整数 $n,m,k$，代表手套数量，取出的手套数和目标对数。", "outputFormat": "对于每组测试数据，输出一个整数，代表可能的情况数量对 $10^9+7$ 取模的结果。", "hint": "::cute-table{tuack}\n\n| 子任务 | 占比 | $t$ | $n$ | $m$ | $k$ |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $30\\%$ | $\\leq 5$ | $\\leq 1000$ | $\\le 3$ | $=1$ |\n| $2$ | $30\\%$ | $\\leq 5$ | $\\leq 5$ | $\\leq 10$ | $\\leq 5$ |\n| $3$ | $40\\%$ | $\\leq 10^5$ | $\\leq 1000$ | $\\leq 2000$ | $\\leq 2000$ |\n\n对全部的测试数据，保证 $1 \\leq t \\leq 10^5,1 \\leq n \\leq 1000,1 \\leq m \\leq 2 \\times n,1 \\leq k \\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202409 八级] 手套配对", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1164>", "description": "小杨有 $n$ 对不同的手套，每对手套由左右各一只组成。\n\n小杨想知道从中取出 $m$ 只手套，$m$ 只手套恰好包含 $k$ 对手套的情况有多少种。\n\n小杨认为两种取出的情况不同，当且仅当两种情况取出的手套中存在不同的手套（同一对手套的左右手也视为不同的手套）。", "inputFormat": "**本题单个测试点内有多组测试数据**。\n\n第一行包含一个正整数 $t$，代表测试用例组数。\n\n接下来是 $t$ 组测试用例。对于每组测试用例，一共一行。\n\n第一行包含三个正整数 $n,m,k$，代表手套数量，取出的手套数和目标对数。", "outputFormat": "对于每组测试数据，输出一个整数，代表可能的情况数量对 $10^9+7$ 取模的结果。", "hint": "::cute-table{tuack}\n\n| 子任务 | 占比 | $t$ | $n$ | $m$ | $k$ |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $30\\%$ | $\\leq 5$ | $\\leq 1000$ | $\\le 3$ | $=1$ |\n| $2$ | $30\\%$ | $\\leq 5$ | $\\leq 5$ | $\\leq 10$ | $\\leq 5$ |\n| $3$ | $40\\%$ | $\\leq 10^5$ | $\\leq 1000$ | $\\leq 2000$ | $\\leq 2000$ |\n\n对全部的测试数据，保证 $1 \\leq t \\leq 10^5,1 \\leq n \\leq 1000,1 \\leq m \\leq 2 \\times n,1 \\leq k \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P11251", "type": "P", "difficulty": 3, "samples": [["5\n1 0 0 1 0\n1 2\n3 5\n4 3\n1 3", "4"], ["5\n0 0 0 0 0\n1 2\n2 3\n3 4\n4 5", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "GESP"], "title": "[GESP202409 八级] 美丽路径", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1164>", "description": "小杨有一棵包含 $n$ 个节点的树，节点从 $1$ 到 $n$ 编号，并且每个节点要么是白色，要么是黑色。\n\n对于树上的一条简单路径（不经过重复节点的路径），小杨认为它是**美丽**的当且仅当路径上相邻节点的颜色均不相同。例如下图，其中节点 $1$ 和节点 $4$ 是黑色，其余节点是白色，路径 $2-1-3-4$ 是美丽路径，而路径 $2-1-3-5$ 不是美丽路径（相邻节点 $3$ 和 $5$ 颜色相同）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zyz3v6jo.png)\n\n对于树上的一条简单路径，小杨认为它的长度是路径包含节点的数量。小杨想知道**最长的美丽路径**的长度是多少。", "inputFormat": "第一行包含一个正整数 $n$，代表节点数量。\n\n第二行包含 $n$ 个整数 $c_1,c_2,\\dots,c_n$，代表每个节点的颜色，如果 $c_i=0$，代表节点 $i$ 为白色，如果 $c_i=1$，代表节点 $i$ 为黑色。\n\n之后 $n-1$ 行，每行包含两个正整数 $u_i,v_i$，代表存在一条连接节点 $u_i$ 和节点 $v_i$ 的边。", "outputFormat": "输出一个整数，代表最长美丽路径的长度。", "hint": "| 子任务编号 | 数据点占比 | $n$ | 特殊条件 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $30\\%$ | $\\leq 1000$ | 树的形态是一条链 |\n| $2$ | $30\\%$ | $\\leq 1000$ |  |\n| $3$ | $40\\%$ | $\\leq 10^5$ |  |\n\n对于全部数据，保证有 $1 \\leq n \\leq 10^5,0 \\leq c_i \\leq 1$，同时保证给出的数据构成一棵树。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202409 八级] 美丽路径", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1164>", "description": "小杨有一棵包含 $n$ 个节点的树，节点从 $1$ 到 $n$ 编号，并且每个节点要么是白色，要么是黑色。\n\n对于树上的一条简单路径（不经过重复节点的路径），小杨认为它是**美丽**的当且仅当路径上相邻节点的颜色均不相同。例如下图，其中节点 $1$ 和节点 $4$ 是黑色，其余节点是白色，路径 $2-1-3-4$ 是美丽路径，而路径 $2-1-3-5$ 不是美丽路径（相邻节点 $3$ 和 $5$ 颜色相同）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zyz3v6jo.png)\n\n对于树上的一条简单路径，小杨认为它的长度是路径包含节点的数量。小杨想知道**最长的美丽路径**的长度是多少。", "inputFormat": "第一行包含一个正整数 $n$，代表节点数量。\n\n第二行包含 $n$ 个整数 $c_1,c_2,\\dots,c_n$，代表每个节点的颜色，如果 $c_i=0$，代表节点 $i$ 为白色，如果 $c_i=1$，代表节点 $i$ 为黑色。\n\n之后 $n-1$ 行，每行包含两个正整数 $u_i,v_i$，代表存在一条连接节点 $u_i$ 和节点 $v_i$ 的边。", "outputFormat": "输出一个整数，代表最长美丽路径的长度。", "hint": "| 子任务编号 | 数据点占比 | $n$ | 特殊条件 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $30\\%$ | $\\leq 1000$ | 树的形态是一条链 |\n| $2$ | $30\\%$ | $\\leq 1000$ |  |\n| $3$ | $40\\%$ | $\\leq 10^5$ |  |\n\n对于全部数据，保证有 $1 \\leq n \\leq 10^5,0 \\leq c_i \\leq 1$，同时保证给出的数据构成一棵树。", "locale": "zh-CN"}}}
{"pid": "P11252", "type": "P", "difficulty": 6, "samples": [["4\n0 2", "1\n4\n0 1\n0 2\n0 3\n4 2\n2\n4\n4 0\n3 4\n2 3\n2 1\n1\n0 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["图论", "2024", "交互题", "Special Judge", "KOI（韩国）"], "title": "[KTSC 2024 R2] 岛屿", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<vector>\n#include<array>\nvoid construct_two_trees(int N, std::vector<int> U, std::vector<int> V);\nint add_vertex(int a, int b, int c);\nvoid report(std::vector<std::array<int, 2>> tree);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T1 「[섬](https://assets.ioikorea.kr/ioitst/2024/2/island/island_statement.pdf)」**\n\nIOI 国建立在一个正 $N$ 边形的岛屿上。每个顶点代表一个区域，这些区域按顺时针方向依次编号为 $0, 1, \\cdots, N-1$。IOI 国的道路网络由以下两种道路组成：\n\n- **海滨道路**：海滨道路连接正 $N$ 边形相邻顶点对应的区域，共有 $N$ 条道路。也就是说，对于所有 $i$ $(0 \\leq i \\leq N-2)$，存在连接 $i$ 区域和 $i+1$ 区域的道路，并且存在连接 $N-1$ 区域和 0 区域的道路。\n- **内陆道路**：内陆道路连接不直接相邻的两个区域，共有 $N-3$ 条道路。这些道路除了端点外不相交，即它们对应于正 $N$ 边形中不相交的 $N-3$ 条对角线。\n\n对于连接 $K$ 个区域的道路网络，如果道路集合 $T$ 满足以下条件，则称 $T$ 为一棵树：\n\n- $|T|=K-1$\n- 仅使用 $T$ 中的道路可以在所有区域之间通行。\n\n树在连接所有区域的运输中起着重要作用。如果在一棵树的道路无法使用时，仍有另一棵树可以使用，这将大大提高稳定性。因此，如果道路网络中存在两棵树 $T_1$ 和 $T_2$，且 $T_1 \\cap T_2 = \\emptyset$，即没有任何道路重叠，则称该道路网络为良好道路网络。\n\nIOI 国计划通过以下方式建设新的区域和道路，以构建良好道路网络：\n\n- **区域建设**：对于区域 $a, b, c$，如果存在连接 $a$ 和 $b$、$b$ 和 $c$、$c$ 和 $a$ 的道路，则在这三个区域形成的三角形的内心处建立一个新区域 $d$，并连接 $a$ 和 $d$、$b$ 和 $d$、$c$ 和 $d$。新区域 $d$ 的编号从 $N$ 开始依次递增。对于相同的三个区域，不能进行多次区域建设，即每次建设使用的区域集合 $\\{a, b, c\\}$ 必须不同。\n\nIOI 国可以进行多次区域建设，但希望通过尽可能少的建设次数，构建出没有重叠道路的两棵树的良好道路网络。请注意，良好道路网络不仅包括原有的 $N$ 个区域，还包括新建的区域。你需要帮助 IOI 国解决这个道路网络问题。即使没有最小化建设次数，也可以获得部分分数。\n\n你需要实现以下函数：\n\n```cpp\nvoid construct_two_trees(int N, std::vector<int> U, std::vector<int> V);\n```\n\n- `U, V`：大小为 $N-3$ 的整数数组。对于所有 $i$ $(0 \\leq i \\leq N-4)$，存在连接 $U[i]$ 和 $V[i]$ 的内陆道路。\n- 该函数只会被调用一次，你需要在该函数内调用后续定义的 `add_vertex` 函数进行区域建设，并找到不共享道路的两棵树，然后调用 `report` 函数报告结果。\n\n```cpp\nint add_vertex(int a, int b, int c);\n```\n\n- 该函数表示在区域 $a, b, c$ 之间进行区域建设。\n- 在调用该函数之前，区域 $a, b, c$ 中任意两个区域必须直接相连。\n- 对于相同的三个区域，不能多次调用该函数，即每次建设使用的区域集合 $\\{a, b, c\\}$ 必须不同。\n- 该函数返回新建区域的编号。即，当该函数第 $j$ 次执行时，返回 $N-1+j$。\n- 在调用 `report` 函数后，不应再调用该函数。\n\n```cpp\nvoid report(std::vector<std::array<int, 2>> tree);\n```\n\n- 该函数用于报告找到的树。\n- 在 `construct_two_trees` 函数中，所有 `add_vertex` 函数调用结束后，必须准确调用两次该函数。\n- 参数 `tree` 的每个元素是一个包含两区域编号的数组 `std::array<int, 2>`。区域编号的顺序无关紧要。\n- 两次调用 `report(T1), report(T2)` 时，$T_1$ 和 $T_2$ 不应共享道路，并且每棵树的道路应能连接所有区域，包括新建区域。\n", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2+i$ $(0 \\leq i \\leq N-4)$ 行：$U[i]\\,V[i]$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n每次调用 `report` 函数时，评测程序输出：\n\n- 第 $1$ 行：整数 $k$，表示第 $k$ 次调用 `report` 函数。\n- 第 $2$ 行：树的道路数量 $M$\n- 第 $2+i$ $(1 \\leq i \\leq M)$ 行：树的第 $i$ 条道路的两个端点编号 $A[i]\\,B[i]$\n\n在 `construct_two_trees` 函数执行完毕后，评测程序输出 `add_vertex` 函数的调用信息：\n\n- 第 $1$ 行：`add_vertex` 函数的总调用次数 $K$\n- 第 $1+i$ $(1 \\leq i \\leq K)$ 行：`add_vertex` 函数第 $i$ 次调用的参数 $A[i]\\,B[i]\\,C[i]$", "hint": "对于所有输入数据，满足：\n\n- $3 \\leq N \\leq 2\\cdot 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-4)$：\n  - $0 \\leq U[i], V[i] \\leq N-1$\n  - $U[i] \\neq V[i]$\n- 给定的 $U$ 和 $V$ 满足内陆道路的条件。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $6$ | $N \\leq 5$ |\n| $2$ | $8$ | 存在一个区域与除自己外的所有区域直接相连 |\n| $3$ | $14$ | 初始状态下，对于所有可能的区域对 $(a, b, c)$，连接这三个区域的三条道路中至少有一条是海滨道路 |\n| $4$ | $21$ | $N \\leq 5000$ |\n| $5$ | $51$ | 无附加限制 |\n\n当 `construct_two_trees` 函数正确解决了问题时，如果 `add_vertex` 的调用次数大于最小值但不超过 $N$，则可以获得 $40\\%$ 的分数。如果 `add_vertex` 的调用次数超过 $N$，则无法获得分数。可以证明，在给定限制条件下，可以通过不超过 $N$ 次调用 `add_vertex` 构建良好道路网络。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2024 R2] 岛屿", "background": "**请使用 C++17 或 C++20 提交本题**\n\n你需要在程序开头加入如下代码：\n\n```cpp\n#include<vector>\n#include<array>\nvoid construct_two_trees(int N, std::vector<int> U, std::vector<int> V);\nint add_vertex(int a, int b, int c);\nvoid report(std::vector<std::array<int, 2>> tree);\n```", "description": "**题目译自 [2024년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2024/)  T1 「[섬](https://assets.ioikorea.kr/ioitst/2024/2/island/island_statement.pdf)」**\n\nIOI 国建立在一个正 $N$ 边形的岛屿上。每个顶点代表一个区域，这些区域按顺时针方向依次编号为 $0, 1, \\cdots, N-1$。IOI 国的道路网络由以下两种道路组成：\n\n- **海滨道路**：海滨道路连接正 $N$ 边形相邻顶点对应的区域，共有 $N$ 条道路。也就是说，对于所有 $i$ $(0 \\leq i \\leq N-2)$，存在连接 $i$ 区域和 $i+1$ 区域的道路，并且存在连接 $N-1$ 区域和 0 区域的道路。\n- **内陆道路**：内陆道路连接不直接相邻的两个区域，共有 $N-3$ 条道路。这些道路除了端点外不相交，即它们对应于正 $N$ 边形中不相交的 $N-3$ 条对角线。\n\n对于连接 $K$ 个区域的道路网络，如果道路集合 $T$ 满足以下条件，则称 $T$ 为一棵树：\n\n- $|T|=K-1$\n- 仅使用 $T$ 中的道路可以在所有区域之间通行。\n\n树在连接所有区域的运输中起着重要作用。如果在一棵树的道路无法使用时，仍有另一棵树可以使用，这将大大提高稳定性。因此，如果道路网络中存在两棵树 $T_1$ 和 $T_2$，且 $T_1 \\cap T_2 = \\emptyset$，即没有任何道路重叠，则称该道路网络为良好道路网络。\n\nIOI 国计划通过以下方式建设新的区域和道路，以构建良好道路网络：\n\n- **区域建设**：对于区域 $a, b, c$，如果存在连接 $a$ 和 $b$、$b$ 和 $c$、$c$ 和 $a$ 的道路，则在这三个区域形成的三角形的内心处建立一个新区域 $d$，并连接 $a$ 和 $d$、$b$ 和 $d$、$c$ 和 $d$。新区域 $d$ 的编号从 $N$ 开始依次递增。对于相同的三个区域，不能进行多次区域建设，即每次建设使用的区域集合 $\\{a, b, c\\}$ 必须不同。\n\nIOI 国可以进行多次区域建设，但希望通过尽可能少的建设次数，构建出没有重叠道路的两棵树的良好道路网络。请注意，良好道路网络不仅包括原有的 $N$ 个区域，还包括新建的区域。你需要帮助 IOI 国解决这个道路网络问题。即使没有最小化建设次数，也可以获得部分分数。\n\n你需要实现以下函数：\n\n```cpp\nvoid construct_two_trees(int N, std::vector<int> U, std::vector<int> V);\n```\n\n- `U, V`：大小为 $N-3$ 的整数数组。对于所有 $i$ $(0 \\leq i \\leq N-4)$，存在连接 $U[i]$ 和 $V[i]$ 的内陆道路。\n- 该函数只会被调用一次，你需要在该函数内调用后续定义的 `add_vertex` 函数进行区域建设，并找到不共享道路的两棵树，然后调用 `report` 函数报告结果。\n\n```cpp\nint add_vertex(int a, int b, int c);\n```\n\n- 该函数表示在区域 $a, b, c$ 之间进行区域建设。\n- 在调用该函数之前，区域 $a, b, c$ 中任意两个区域必须直接相连。\n- 对于相同的三个区域，不能多次调用该函数，即每次建设使用的区域集合 $\\{a, b, c\\}$ 必须不同。\n- 该函数返回新建区域的编号。即，当该函数第 $j$ 次执行时，返回 $N-1+j$。\n- 在调用 `report` 函数后，不应再调用该函数。\n\n```cpp\nvoid report(std::vector<std::array<int, 2>> tree);\n```\n\n- 该函数用于报告找到的树。\n- 在 `construct_two_trees` 函数中，所有 `add_vertex` 函数调用结束后，必须准确调用两次该函数。\n- 参数 `tree` 的每个元素是一个包含两区域编号的数组 `std::array<int, 2>`。区域编号的顺序无关紧要。\n- 两次调用 `report(T1), report(T2)` 时，$T_1$ 和 $T_2$ 不应共享道路，并且每棵树的道路应能连接所有区域，包括新建区域。\n", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2+i$ $(0 \\leq i \\leq N-4)$ 行：$U[i]\\,V[i]$\n", "outputFormat": "示例评测程序按以下格式输出：\n\n每次调用 `report` 函数时，评测程序输出：\n\n- 第 $1$ 行：整数 $k$，表示第 $k$ 次调用 `report` 函数。\n- 第 $2$ 行：树的道路数量 $M$\n- 第 $2+i$ $(1 \\leq i \\leq M)$ 行：树的第 $i$ 条道路的两个端点编号 $A[i]\\,B[i]$\n\n在 `construct_two_trees` 函数执行完毕后，评测程序输出 `add_vertex` 函数的调用信息：\n\n- 第 $1$ 行：`add_vertex` 函数的总调用次数 $K$\n- 第 $1+i$ $(1 \\leq i \\leq K)$ 行：`add_vertex` 函数第 $i$ 次调用的参数 $A[i]\\,B[i]\\,C[i]$", "hint": "对于所有输入数据，满足：\n\n- $3 \\leq N \\leq 2\\cdot 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-4)$：\n  - $0 \\leq U[i], V[i] \\leq N-1$\n  - $U[i] \\neq V[i]$\n- 给定的 $U$ 和 $V$ 满足内陆道路的条件。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $6$ | $N \\leq 5$ |\n| $2$ | $8$ | 存在一个区域与除自己外的所有区域直接相连 |\n| $3$ | $14$ | 初始状态下，对于所有可能的区域对 $(a, b, c)$，连接这三个区域的三条道路中至少有一条是海滨道路 |\n| $4$ | $21$ | $N \\leq 5000$ |\n| $5$ | $51$ | 无附加限制 |\n\n当 `construct_two_trees` 函数正确解决了问题时，如果 `add_vertex` 的调用次数大于最小值但不超过 $N$，则可以获得 $40\\%$ 的分数。如果 `add_vertex` 的调用次数超过 $N$，则无法获得分数。可以证明，在给定限制条件下，可以通过不超过 $N$ 次调用 `add_vertex` 构建良好道路网络。", "locale": "zh-CN"}}}
{"pid": "P11253", "type": "P", "difficulty": 4, "samples": [["5 1 ", "34"], ["100 100", "523011929"], ["10000000 10000000", "686183373"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "广东", "O2优化"], "title": "[GDKOI2023 普及组] 小学生数学题", "background": "", "description": "Moon 是一名小学生，在做作业时遇到了这样一个问题，对于给定正整数 $n,k$，求出下面表达式的值：\n\n$$\\sum_{i=1}^n \\frac{i!}{i^k}$$\n\n其中 $i!$ 表示 $i$ 的阶乘运算，即 $i!=1\\times 2\\times 3\\times 4...\\times i$。这个式子太难了，所以 Moon 希望得到你的帮助。但是因为 Moon 只学过整数运算，还没有学过实数运算，所以希望你可以帮助他求出这个式子在模 $998244353$ 意义下的值。也就是说，如果最终的结果假如化简成为最简分数 $\\frac{p}{q}$，只需要输出 $p\\times q^{-1} \\bmod 998244353$ 即可，其中 $q^{-1}$ 为 $q$ 在模 $998244353$ 下的逆元。", "inputFormat": "第一行两个整数 $n,k$。", "outputFormat": "一行，一个整数，代表模 $998244353$ 意义下的答案。", "hint": "### 样例解释\n\n样例 $1$ 中，因为 $\\frac{i!}{i}=(i-1)!$，所以原式等价于 $\\sum_{i=1}^5 (i-1)!=34$。\n\n### 数据范围\n\n对于所有的数据，有 $1\\le n,k\\le 2 \\times 10^7$；\n\n对于 $30 \\%$ 的数据，有 $k=1$；\n\n对于另外 $30\\%$ 的数据，有 $1\\le k \\le 3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 普及组] 小学生数学题", "background": "", "description": "Moon 是一名小学生，在做作业时遇到了这样一个问题，对于给定正整数 $n,k$，求出下面表达式的值：\n\n$$\\sum_{i=1}^n \\frac{i!}{i^k}$$\n\n其中 $i!$ 表示 $i$ 的阶乘运算，即 $i!=1\\times 2\\times 3\\times 4...\\times i$。这个式子太难了，所以 Moon 希望得到你的帮助。但是因为 Moon 只学过整数运算，还没有学过实数运算，所以希望你可以帮助他求出这个式子在模 $998244353$ 意义下的值。也就是说，如果最终的结果假如化简成为最简分数 $\\frac{p}{q}$，只需要输出 $p\\times q^{-1} \\bmod 998244353$ 即可，其中 $q^{-1}$ 为 $q$ 在模 $998244353$ 下的逆元。", "inputFormat": "第一行两个整数 $n,k$。", "outputFormat": "一行，一个整数，代表模 $998244353$ 意义下的答案。", "hint": "### 样例解释\n\n样例 $1$ 中，因为 $\\frac{i!}{i}=(i-1)!$，所以原式等价于 $\\sum_{i=1}^5 (i-1)!=34$。\n\n### 数据范围\n\n对于所有的数据，有 $1\\le n,k\\le 2 \\times 10^7$；\n\n对于 $30 \\%$ 的数据，有 $k=1$；\n\n对于另外 $30\\%$ 的数据，有 $1\\le k \\le 3$。", "locale": "zh-CN"}}}
{"pid": "P11254", "type": "P", "difficulty": 3, "samples": [["10 10\n5\n4 5\n5\n7 10\n6 10\n5 9\n4 9\n4 10", "29"], ["见/example/macaron/下的 macaron1.in", "见/example/macaron/下的 macaron1.out"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "广东", "O2优化"], "title": "[GDKOI2023 普及组] Macaron", "background": "", "description": "给出 $n\\times m$ 的一块二维平面作为 Nana 的家，左上角墙角为 $(0, 0)$ ，右下角墙角为 $(n + 1, m + 1)$。其中\n家里有 $k$ 个家具，每个家具会占其中一个点，题目将会给出每个家具的坐标。\n\n马卡龙是一只扫地机器人，半径为 $r$ 的圆形的它可以向上下左右四个方向移动，移动前后必须保持圆心在整点上，并且不能穿过家具或外墙进行打扫，即身躯不可以与家具或墙壁有重合部分（允许相切）。它初始圆心位置为 $(x_s, y_s)$ ，将会从此出发，打扫它能到达的区域。\n\n马卡龙想知道自己可以打扫到多大面积。你只需要告诉马卡龙，它出发后它的圆心可以到达的平面内的\n整点数量。\n\n对了，你只用将答案告诉马卡龙就够了，不需要告诉 Nana ，因为马卡龙不希望伤心的 Nana 会为这些\n琐事烦心。", "inputFormat": "第一行有两个整数 $n, m$ ，表示 Nana 的家的大小。\n\n第二行有一个整数 $r^2$ ，表示马卡龙半径的平方。\n\n第三行有两个整数 $x_s, y_s$ ，表示马卡龙出发的位置，保证在其初始位置上，马卡龙不会与家具有重合部\n分。\n\n第四行有一个整数 $k$，接下来 $k$ 行里每行给出两个整数 $x, y$ ，表示其中一个家具的坐标。", "outputFormat": "仅一个整数 $ans$ ，表示答案。", "hint": "### 数据范围\n\n对所有数据满足 $0 \\le k \\le n \\times  m，1 \\le r \\le \\min(\\lfloor \\frac{n}{2} \\rfloor , \\lfloor \\frac{m}{2} \\rfloor)$；\n\n其中有 $30\\%$ 的数据点满足 $1 \\le n, m \\le 100$;\n\n剩下 $70\\%$ 的数据点满足 $1 \\le n, m \\le 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 普及组] Macaron", "background": "", "description": "给出 $n\\times m$ 的一块二维平面作为 Nana 的家，左上角墙角为 $(0, 0)$ ，右下角墙角为 $(n + 1, m + 1)$。其中\n家里有 $k$ 个家具，每个家具会占其中一个点，题目将会给出每个家具的坐标。\n\n马卡龙是一只扫地机器人，半径为 $r$ 的圆形的它可以向上下左右四个方向移动，移动前后必须保持圆心在整点上，并且不能穿过家具或外墙进行打扫，即身躯不可以与家具或墙壁有重合部分（允许相切）。它初始圆心位置为 $(x_s, y_s)$ ，将会从此出发，打扫它能到达的区域。\n\n马卡龙想知道自己可以打扫到多大面积。你只需要告诉马卡龙，它出发后它的圆心可以到达的平面内的\n整点数量。\n\n对了，你只用将答案告诉马卡龙就够了，不需要告诉 Nana ，因为马卡龙不希望伤心的 Nana 会为这些\n琐事烦心。", "inputFormat": "第一行有两个整数 $n, m$ ，表示 Nana 的家的大小。\n\n第二行有一个整数 $r^2$ ，表示马卡龙半径的平方。\n\n第三行有两个整数 $x_s, y_s$ ，表示马卡龙出发的位置，保证在其初始位置上，马卡龙不会与家具有重合部\n分。\n\n第四行有一个整数 $k$，接下来 $k$ 行里每行给出两个整数 $x, y$ ，表示其中一个家具的坐标。", "outputFormat": "仅一个整数 $ans$ ，表示答案。", "hint": "### 数据范围\n\n对所有数据满足 $0 \\le k \\le n \\times  m，1 \\le r \\le \\min(\\lfloor \\frac{n}{2} \\rfloor , \\lfloor \\frac{m}{2} \\rfloor)$；\n\n其中有 $30\\%$ 的数据点满足 $1 \\le n, m \\le 100$;\n\n剩下 $70\\%$ 的数据点满足 $1 \\le n, m \\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P11255", "type": "P", "difficulty": 5, "samples": [["4 4 1 1 5\n-3 2 \n4 1 \n0 4 \n2 3 \n-4\n1\n-2 \n0", "2\n3\n2\n3"], ["见/example/rain/下的 rain1.in ", "见/example/rain/下的 rain1.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "树状数组", "2023", "广东", "cdq 分治", "O2优化", "动态规划优化"], "title": "[GDKOI2023 普及组] 淋雨", "background": "", "description": "Moon 发现自己来到了一个二维平面上，但是自己只能在 $y=0$ 的直线上以不超过 $v_c \\space m/s$ 的速度行走（可以折返来回行走）。这个时候天空开始下了倾盆大雨，一共有 $n$ 个雨滴，第 $i(1 \\le i \\le n)$ 个雨滴以 $v_g\\space  m/s$ 的\n速度从 $(x_i, y_i)$ 开始匀速下落，同时开始刮起了速度为 $v_w \\space m/s$，方向为 $x$ 轴正方向的大风, 可以认为每个雨滴在水平方向上有了和风速一样的速度, 以及风不会影响人的行走速度。\n\nMoon 非常喜欢淋雨，为了简单起见把每个雨滴和 Moon 都视为是一个点，只有某个雨滴到达 $x$ 轴的位\n置的同时，Moon 也正好在这个位置上，Moon 才可以被这个雨滴淋到。现在给出 $q$ 个询问，第 $i(1 \\le i \\le q)$\n次询问给出一个初始位置 $(s_i, 0)$，Moon 想知道自己从 $(s_i, 0)$ 出发，在整个运动过程中，最多可以被多少个\n雨滴淋到呢？", "inputFormat": "第一行五个整数 $n, q, v_g , v_w, v_c$；\n\n接下来 $n$ 行每行两个整数 $x_i, y_i$；\n\n再接下来 $q$ 行每行一个整数 $s_i$。", "outputFormat": "对于每个询问输出一行一个整数，表示 Moon 最多可以被淋到的雨滴数量。", "hint": "### 数据范围\n\n对于所有的数据，有 $1 \\le n, q \\le 10^5, 1 \\le v_w, v_g , v_c, y_i \\le 10^6, −10^6 \\le x_i, s_i \\le 10^6$；\n\n对于 $30\\%$ 的数据，有 $1 \\le n, q \\le 100$；\n\n对于另外 $30\\%$ 的数据，有 $1 \\le q \\le 5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 普及组] 淋雨", "background": "", "description": "Moon 发现自己来到了一个二维平面上，但是自己只能在 $y=0$ 的直线上以不超过 $v_c \\space m/s$ 的速度行走（可以折返来回行走）。这个时候天空开始下了倾盆大雨，一共有 $n$ 个雨滴，第 $i(1 \\le i \\le n)$ 个雨滴以 $v_g\\space  m/s$ 的\n速度从 $(x_i, y_i)$ 开始匀速下落，同时开始刮起了速度为 $v_w \\space m/s$，方向为 $x$ 轴正方向的大风, 可以认为每个雨滴在水平方向上有了和风速一样的速度, 以及风不会影响人的行走速度。\n\nMoon 非常喜欢淋雨，为了简单起见把每个雨滴和 Moon 都视为是一个点，只有某个雨滴到达 $x$ 轴的位\n置的同时，Moon 也正好在这个位置上，Moon 才可以被这个雨滴淋到。现在给出 $q$ 个询问，第 $i(1 \\le i \\le q)$\n次询问给出一个初始位置 $(s_i, 0)$，Moon 想知道自己从 $(s_i, 0)$ 出发，在整个运动过程中，最多可以被多少个\n雨滴淋到呢？", "inputFormat": "第一行五个整数 $n, q, v_g , v_w, v_c$；\n\n接下来 $n$ 行每行两个整数 $x_i, y_i$；\n\n再接下来 $q$ 行每行一个整数 $s_i$。", "outputFormat": "对于每个询问输出一行一个整数，表示 Moon 最多可以被淋到的雨滴数量。", "hint": "### 数据范围\n\n对于所有的数据，有 $1 \\le n, q \\le 10^5, 1 \\le v_w, v_g , v_c, y_i \\le 10^6, −10^6 \\le x_i, s_i \\le 10^6$；\n\n对于 $30\\%$ 的数据，有 $1 \\le n, q \\le 100$；\n\n对于另外 $30\\%$ 的数据，有 $1 \\le q \\le 5$。", "locale": "zh-CN"}}}
{"pid": "P11256", "type": "P", "difficulty": 6, "samples": [["1\n5 6\n2 1 4 3 5", "2"], ["见/example/permutation/下的\npermutation1.in", "见/example/permutation/下的\npermutation1.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "广东", "O2优化"], "title": "[GDKOI2023 普及组] 置换", "background": "", "description": "Moon 最近在玩一款名为 Shadowverse 的卡牌游戏，在非常有趣的游戏过程中，Moon 想到这样一个关于洗牌的问题。假设当前牌堆中有 $n$ 张牌，第 $i$ 张牌的标号为 $i$，我们定义一种洗牌方式是一个排列 $X=\\{x_1, x_2, ..., x_n\\}$, 也就是把牌堆中第 $i$ 张位置的牌变成第 $x_i$ 张。那么假设现在 Moon 按照 $X$ 的洗牌方式洗了 $k$ 次牌，不妨设最终得到了一个排列 $Y =\\{y_1, y_2, ..., y_n\\}$，$y_i$ 表示洗完牌后第 $i$ 张牌的标号。Moon 希望你可以帮助他算出有多少合法的洗牌方式 $X$，满足洗了 $K$ 次后变成排列 $Y$ ，由于答案可能很大，所以你只需要输出对 $998244353$ 取模的答案即可。\n\n形式化而言，考虑对于排列 $P=\\{p_1, p_2, ..., p_n\\}$ 和排列 $Q=\\{q_1, q_2, ..., q_n\\}$, 定义这两个排列的乘积:\n\n$$ P \\times Q = \\{q_{p1} , q_{p2} , ..., q_{pn} \\}$$\n\n而排列 $X$ 的 $k$ 次幂 $X^k$ 为 $k$ 个排列 $X$ 的乘积，现在考虑给定排列 $Y$ 和正整数 $k$, 求满足方程 $X^k = Y$ 的排列 $X$ 的数量，对 $998244353$ 取模。", "inputFormat": "第一行是一个整数 $T$ 表示测试数据组数。\n\n每组数据包括两行，第一行两个正整数 $n,k$，分别表示排列 $X$ 和 $Y$ 的长度、洗了 $k$ 次牌。\n\n第二行是 $n$ 个 $1$ 到 $n$ 内互不相同的正整数 $\\{y_1, y_2, ..., y_n\\}$，表示排列 $Y$ 。", "outputFormat": "$T$ 行，每行一个整数, 表示合法的洗牌方式的数量，对 $998244353$ 取模。", "hint": "### 样例解释\n\n样例中，$X=[3,4,2,1,5]$ 或者 $[4,3,1,2,5]$, 共两个合法排列。\n\n### 数据范围\n\n对于所有的数据，有 $1 \\le n \\le 3000, 1 \\le k \\le 10^6, 1 \\le T \\le 10$；\n\n对于 $20\\%$ 的数据，有 $1 \\le n, k \\le 8$；\n\n对于另外 $10\\%$ 的数据，仅保证 $1 \\le n \\le 8$；\n\n对于另外 $30\\%$ 的数据，仅保证 $1 \\le n \\le 50$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 普及组] 置换", "background": "", "description": "Moon 最近在玩一款名为 Shadowverse 的卡牌游戏，在非常有趣的游戏过程中，Moon 想到这样一个关于洗牌的问题。假设当前牌堆中有 $n$ 张牌，第 $i$ 张牌的标号为 $i$，我们定义一种洗牌方式是一个排列 $X=\\{x_1, x_2, ..., x_n\\}$, 也就是把牌堆中第 $i$ 张位置的牌变成第 $x_i$ 张。那么假设现在 Moon 按照 $X$ 的洗牌方式洗了 $k$ 次牌，不妨设最终得到了一个排列 $Y =\\{y_1, y_2, ..., y_n\\}$，$y_i$ 表示洗完牌后第 $i$ 张牌的标号。Moon 希望你可以帮助他算出有多少合法的洗牌方式 $X$，满足洗了 $K$ 次后变成排列 $Y$ ，由于答案可能很大，所以你只需要输出对 $998244353$ 取模的答案即可。\n\n形式化而言，考虑对于排列 $P=\\{p_1, p_2, ..., p_n\\}$ 和排列 $Q=\\{q_1, q_2, ..., q_n\\}$, 定义这两个排列的乘积:\n\n$$ P \\times Q = \\{q_{p1} , q_{p2} , ..., q_{pn} \\}$$\n\n而排列 $X$ 的 $k$ 次幂 $X^k$ 为 $k$ 个排列 $X$ 的乘积，现在考虑给定排列 $Y$ 和正整数 $k$, 求满足方程 $X^k = Y$ 的排列 $X$ 的数量，对 $998244353$ 取模。", "inputFormat": "第一行是一个整数 $T$ 表示测试数据组数。\n\n每组数据包括两行，第一行两个正整数 $n,k$，分别表示排列 $X$ 和 $Y$ 的长度、洗了 $k$ 次牌。\n\n第二行是 $n$ 个 $1$ 到 $n$ 内互不相同的正整数 $\\{y_1, y_2, ..., y_n\\}$，表示排列 $Y$ 。", "outputFormat": "$T$ 行，每行一个整数, 表示合法的洗牌方式的数量，对 $998244353$ 取模。", "hint": "### 样例解释\n\n样例中，$X=[3,4,2,1,5]$ 或者 $[4,3,1,2,5]$, 共两个合法排列。\n\n### 数据范围\n\n对于所有的数据，有 $1 \\le n \\le 3000, 1 \\le k \\le 10^6, 1 \\le T \\le 10$；\n\n对于 $20\\%$ 的数据，有 $1 \\le n, k \\le 8$；\n\n对于另外 $10\\%$ 的数据，仅保证 $1 \\le n \\le 8$；\n\n对于另外 $30\\%$ 的数据，仅保证 $1 \\le n \\le 50$。", "locale": "zh-CN"}}}
{"pid": "P11257", "type": "P", "difficulty": 3, "samples": [["4 10\n0123456789ABCDEF 00:10\n0000000000ABCDEF 08:11\n0123456789ABCDEF 00:15\n0000000000ABCDEF 00:11", "2"], ["3 60\n0123456789ABCDEF 13:00\n0000000000000000 14:00\n0123456789ABCDEF 12:30", "1"], ["见/example/switch/下的 switch1.in ", "见/example/switch/下的 switch1.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "广东", "O2优化"], "title": "[GDKOI2023 普及组] 交换机", "background": "", "description": "Moon 正在准备计算机网络的开学考，复习到了有关交换机的知识。交换机具有令人惊奇的特性那就是它的表是自动、动态和自治地建立的，即没有来自网络管理员或来自配置协议的任何干预。换句话说，交换机是自学习的。这种能力大概是通过如下方式实现的:\n\n1) 交换机表初始为空。\n2) 对于在每个接口接收到的每个数据帧，该交换机在其表中存储数据帧的源 $\\text{MAC}$ 地址。\n3) 如果在一段时间 (称为老化期) 后，交换机没有接收到含有某个源 $\\text{MAC}$  地址的数据帧，就会在表中删除这个源 $\\text{MAC}$  地址。\n\n现在给出了某天中一个交换机所有收到的数据帧（每一个数据帧包含一个源 $\\text{MAC}$  地址，以及该数据帧的到达时间），请你帮助 Moon 算出在这一天中，这个交换机的表最少需要多少项，才可以使得这天所有数据帧的信息可以存储下来。**注意为了简单起见，每个时间点先进行删除操作再进行插入操作。**\n\n简单来说，需要维护一个字符串集合 $S$，有若干次插入操作，每次插入操作包含一个字符串以及一个有效时间区间（区间长度为定值），需要求出所有时间内，字符串集合 $S$ 大小的最大值。", "inputFormat": "第一行两个整数 $n，k$，分别表示数据帧的个数，以及老化期时间（单位：分钟）。\n\n接下来 $n$ 行，每行两个字符串 $s_1, s_2$，表示数据帧包含的源地址帧，以及到达时间，其中 $s_1$ 是一个 MAC\n地址，包含 $12$ 个 $16$ 进制数，$s_2$ 的格式为 $a:b$，其中 $0 \\le a \\le 23, 0 \\le b \\le 59$，表示该数据帧在 $a$ 时 $b$ 分钟 $0$ 秒到达交换机，并且 $a, b$ 不足 $10$ 的数字前面要补充一个零。", "outputFormat": "一行，一个整数，代表答案。", "hint": "### 样例解释\n\n样例 $1$ 中，时刻 $00:11$ 分表项中有 $2$ 个源 $\\text{MAC}$ 地址 $\\text{0123456789ABC}$ 和 $\\text{0000000000ABCDEF}$，所以至\n少需要表项大小至少为 $2$，可以证明这是最少需要的表项大小。\n\n### 数据范围\n\n对于所有的数据，有 $1 \\le n \\le 10^5, 1 \\le k \\le 1440$；\n\n对于 $50\\%$ 的数据，有 $1 \\le n \\le 500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 普及组] 交换机", "background": "", "description": "Moon 正在准备计算机网络的开学考，复习到了有关交换机的知识。交换机具有令人惊奇的特性那就是它的表是自动、动态和自治地建立的，即没有来自网络管理员或来自配置协议的任何干预。换句话说，交换机是自学习的。这种能力大概是通过如下方式实现的:\n\n1) 交换机表初始为空。\n2) 对于在每个接口接收到的每个数据帧，该交换机在其表中存储数据帧的源 $\\text{MAC}$ 地址。\n3) 如果在一段时间 (称为老化期) 后，交换机没有接收到含有某个源 $\\text{MAC}$  地址的数据帧，就会在表中删除这个源 $\\text{MAC}$  地址。\n\n现在给出了某天中一个交换机所有收到的数据帧（每一个数据帧包含一个源 $\\text{MAC}$  地址，以及该数据帧的到达时间），请你帮助 Moon 算出在这一天中，这个交换机的表最少需要多少项，才可以使得这天所有数据帧的信息可以存储下来。**注意为了简单起见，每个时间点先进行删除操作再进行插入操作。**\n\n简单来说，需要维护一个字符串集合 $S$，有若干次插入操作，每次插入操作包含一个字符串以及一个有效时间区间（区间长度为定值），需要求出所有时间内，字符串集合 $S$ 大小的最大值。", "inputFormat": "第一行两个整数 $n，k$，分别表示数据帧的个数，以及老化期时间（单位：分钟）。\n\n接下来 $n$ 行，每行两个字符串 $s_1, s_2$，表示数据帧包含的源地址帧，以及到达时间，其中 $s_1$ 是一个 MAC\n地址，包含 $12$ 个 $16$ 进制数，$s_2$ 的格式为 $a:b$，其中 $0 \\le a \\le 23, 0 \\le b \\le 59$，表示该数据帧在 $a$ 时 $b$ 分钟 $0$ 秒到达交换机，并且 $a, b$ 不足 $10$ 的数字前面要补充一个零。", "outputFormat": "一行，一个整数，代表答案。", "hint": "### 样例解释\n\n样例 $1$ 中，时刻 $00:11$ 分表项中有 $2$ 个源 $\\text{MAC}$ 地址 $\\text{0123456789ABC}$ 和 $\\text{0000000000ABCDEF}$，所以至\n少需要表项大小至少为 $2$，可以证明这是最少需要的表项大小。\n\n### 数据范围\n\n对于所有的数据，有 $1 \\le n \\le 10^5, 1 \\le k \\le 1440$；\n\n对于 $50\\%$ 的数据，有 $1 \\le n \\le 500$。", "locale": "zh-CN"}}}
{"pid": "P11258", "type": "P", "difficulty": 5, "samples": [["6\n3\n", "12"], ["1000\n1000", "32561"], ["100000\n10000", "10099799"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "广东", "O2优化"], "title": "[GDKOI2023 普及组]  城市建设", "background": "", "description": "现在有 $N$ 个城市分别位于 $1, 2, ..., N$ 号节点上。作为城市的管理者小明希望花最小的代价把这 $N$ 个城\n市联通起来。联通城市的花费主要分为下面两种。\n\n第一种：建设道路，在 $a$ 号城市和 $b$ 号城市之间建设道路将会花费 $|a - b|$ 的代价；\n\n第二种：设置管理城市，对于一个城市 $X$ 可以使用 $C$ 的代价将其升级为管理城市；\n\n在保证每条道路至少联结一个管理城市，以及非管理城市只能连接一条边的前提下，小明想知道他最少\n能用多少的代价使所有城市联通。", "inputFormat": "第一行一个正整数 $N$，表示城市数量；\n\n第二行一个整数 $C$，表示设置管理城市的代价。", "outputFormat": "一行，一个整数，表示小明使城市联通的最小代价。", "hint": "### 样例解释\n\n以 $2, 5$ 分别为管理城市，并联结 $(1, 2), (2, 3), (2, 5), (4, 5), (5, 6)$ 共五条边时取得最小代价;\n\n也可以以 $3$ 或 $4$ 作为管理城市，并联结其余所有点，此时也取得最小代价。\n\n### 数据范围\n\n对于 $20\\%$ 的数据，$1 \\le N \\le 20$;\n\n对于 $40\\%$ 的数据，$1 \\le N \\le 10^3$;\n\n对于另外 $20\\%$ 的数据，$1 ≤ N ≤ 10^5, 0 \\le C \\le 10^4$;\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^9, 0 \\le C \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 普及组]  城市建设", "background": "", "description": "现在有 $N$ 个城市分别位于 $1, 2, ..., N$ 号节点上。作为城市的管理者小明希望花最小的代价把这 $N$ 个城\n市联通起来。联通城市的花费主要分为下面两种。\n\n第一种：建设道路，在 $a$ 号城市和 $b$ 号城市之间建设道路将会花费 $|a - b|$ 的代价；\n\n第二种：设置管理城市，对于一个城市 $X$ 可以使用 $C$ 的代价将其升级为管理城市；\n\n在保证每条道路至少联结一个管理城市，以及非管理城市只能连接一条边的前提下，小明想知道他最少\n能用多少的代价使所有城市联通。", "inputFormat": "第一行一个正整数 $N$，表示城市数量；\n\n第二行一个整数 $C$，表示设置管理城市的代价。", "outputFormat": "一行，一个整数，表示小明使城市联通的最小代价。", "hint": "### 样例解释\n\n以 $2, 5$ 分别为管理城市，并联结 $(1, 2), (2, 3), (2, 5), (4, 5), (5, 6)$ 共五条边时取得最小代价;\n\n也可以以 $3$ 或 $4$ 作为管理城市，并联结其余所有点，此时也取得最小代价。\n\n### 数据范围\n\n对于 $20\\%$ 的数据，$1 \\le N \\le 20$;\n\n对于 $40\\%$ 的数据，$1 \\le N \\le 10^3$;\n\n对于另外 $20\\%$ 的数据，$1 ≤ N ≤ 10^5, 0 \\le C \\le 10^4$;\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^9, 0 \\le C \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11259", "type": "P", "difficulty": 5, "samples": [["5\n-2 -3 4 -5 1\n1 2\n1 3\n2 4\n2 5", "10"], ["见/example/starfish/下", "见/example/starfish/下"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "广东", "O2优化"], "title": "[GDKOI2023 普及组] 海星", "background": "", "description": "小明想去海底抓海星, 海底是一个树状的结构，而海星就藏在里面。\n\n给定一棵 $n$ 个点的树，分别标号为 $1, 2, 3, ..., n$, 且对应的点权记为 $p_i$。\n\n定义海星为其中的花子图，不妨设其中心节点标号为 $O$, 边缘节点标号为 $a_1, a_2, ..., a_t$ (其中边缘节点必\n定直接与中心节点相连，同时花子图至少由一个中心节点和一个边缘节点构成)。此时记海星的价值为 $|p_O -\n\\sum p_{a_i} |$。\n\n小明想知道他最多能抓到价值总和为多少的海星。（可以同时抓很多只海星，但是任意两个海星之间点的\n交集必须为空）\n\n补充定义:\n\n**花图: 直径小于等于三的联通图，其中度数最大的节点为中心节点，其余节点为边缘节点（可知任意的边\n缘节点度数为一）**\n\n**示例：最小的花图，是 $(G,V)=({1,2},{(1,2)})$，仅由两个节点和联结它们的一条边构成。**", "inputFormat": "第一行，一个正整数 $n$，表示树的大小；\n\n第 $2$ 行，$n$ 个整数，表示 $p_i$；\n\n第 $3 ∼ n + 1$ 行，每行 $2$ 个整数 $a, b$，分别表示 $a$ 号节点与 $b$ 号节点之间有一条边。", "outputFormat": "一行，一个整数，表示小明能抓到的最大海星的价值总和。", "hint": "### 样例解释\n\n一个合法的方案是，小明抓了两个海星，第一个海星的中心节点为 $1$，边缘节点为 $3$，价值为 $6$；第二个\n海星的中心节点为 $2$，边缘节点为 $5$，价值为 $4$，此时得到最大总价值 $10$。\n\n### 数据范围\n\n$(1)$ 对于 $10\\%$ 的数据，保证数据形成一个花图。\n\n$(2)$ 对于 $20\\%$ 的数据，保证数据形成一条链。\n\n$(3)$ 对于 $20\\%$ 的数据，保证数据相邻节点乘积恒负。\n\n$(4)$ 对于 $20\\%$ 的数据，保证数据形成一颗以 1 为根节点的二叉树。\n\n$(5)$ 对于 $30\\%$ 的数据，无特殊限制。\n\n对于所有数据 $1 \\le a, b \\le n \\le 10^5$，$-10^9 \\leq p_i \\leq 10^8$。\n\n下发样例中编号为 $i, i + 5$ 的数据对应序号为 $i$ 的限制条件. $i \\in \\{1, 2, 3, 4, 5\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 普及组] 海星", "background": "", "description": "小明想去海底抓海星, 海底是一个树状的结构，而海星就藏在里面。\n\n给定一棵 $n$ 个点的树，分别标号为 $1, 2, 3, ..., n$, 且对应的点权记为 $p_i$。\n\n定义海星为其中的花子图，不妨设其中心节点标号为 $O$, 边缘节点标号为 $a_1, a_2, ..., a_t$ (其中边缘节点必\n定直接与中心节点相连，同时花子图至少由一个中心节点和一个边缘节点构成)。此时记海星的价值为 $|p_O -\n\\sum p_{a_i} |$。\n\n小明想知道他最多能抓到价值总和为多少的海星。（可以同时抓很多只海星，但是任意两个海星之间点的\n交集必须为空）\n\n补充定义:\n\n**花图: 直径小于等于三的联通图，其中度数最大的节点为中心节点，其余节点为边缘节点（可知任意的边\n缘节点度数为一）**\n\n**示例：最小的花图，是 $(G,V)=({1,2},{(1,2)})$，仅由两个节点和联结它们的一条边构成。**", "inputFormat": "第一行，一个正整数 $n$，表示树的大小；\n\n第 $2$ 行，$n$ 个整数，表示 $p_i$；\n\n第 $3 ∼ n + 1$ 行，每行 $2$ 个整数 $a, b$，分别表示 $a$ 号节点与 $b$ 号节点之间有一条边。", "outputFormat": "一行，一个整数，表示小明能抓到的最大海星的价值总和。", "hint": "### 样例解释\n\n一个合法的方案是，小明抓了两个海星，第一个海星的中心节点为 $1$，边缘节点为 $3$，价值为 $6$；第二个\n海星的中心节点为 $2$，边缘节点为 $5$，价值为 $4$，此时得到最大总价值 $10$。\n\n### 数据范围\n\n$(1)$ 对于 $10\\%$ 的数据，保证数据形成一个花图。\n\n$(2)$ 对于 $20\\%$ 的数据，保证数据形成一条链。\n\n$(3)$ 对于 $20\\%$ 的数据，保证数据相邻节点乘积恒负。\n\n$(4)$ 对于 $20\\%$ 的数据，保证数据形成一颗以 1 为根节点的二叉树。\n\n$(5)$ 对于 $30\\%$ 的数据，无特殊限制。\n\n对于所有数据 $1 \\le a, b \\le n \\le 10^5$，$-10^9 \\leq p_i \\leq 10^8$。\n\n下发样例中编号为 $i, i + 5$ 的数据对应序号为 $i$ 的限制条件. $i \\in \\{1, 2, 3, 4, 5\\}$。", "locale": "zh-CN"}}}
{"pid": "P11260", "type": "P", "difficulty": 5, "samples": [["5 8 2\n3 4 6\n2 1 6\n1 4 8\n1 2 10\n2 3 4\n3 4 5\n4 5 4\n2 4 6", "21\n19\n20"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "广东", "O2优化"], "title": "[GDKOI2023 普及组]  Himitsu", "background": "省略了一些不必要的图片。", "description": "Lily 忘不掉小时候临别前与 Nana 一起出逃的夜晚，两人为了探索宇宙的真相而沿着铁路轨道前行，望见从天际线涌出的大鱼浮在夜空里。从那以后 Lily 便未曾停止过钻研宇宙的秘密。\n\n秘密啊，总是会有那么一两个的。以浮起的大鱼为典型，Lily 所在的世界发生了 $n$ 件关于宇宙的重大事件。阴谋诡计，完全犯罪，宇宙的暗物质，事件与事件之间看似互不相干，但 Lily 每天阅读着关于宇宙的书籍，从书籍最后一页总结出 $m$ 段解读，每段解读都能将其中某两件事件联系起来。\n\n大人们希望 Lily 揭露部分已经得到的解读，使所有发生的事件都能被串联起来。但是 Lily 清楚，如果这些解读暴露，班里大概有一半的同学会开始计划着出逃——秘密的揭露都是需要 Lily 付出代价的，假设每一段解读的揭露需要付出的代价可以被量化，第 $i$ 段解读的揭露需要付出的代价为整数值 $w_i$ 。Lily 需要付出的总代价为，在确保解读们能将所有事件联系起来的前提下，Lily 所揭露的所有解读的代价之和。\n\nLily 知道，其中有 $k$ 段解读是关于世界真理的关键解读，是承载着 $70$ 亿的秘密，这些解读被透露的数量将直接决定着人类延续的可能性。人们议论纷纷，说着或许只有这两个孩子才能拯救世界，$70$ 亿人所凝聚的正义将 $2$ 人的自由剥夺，迫切地想要知道 Lily 给出的答案。\n\n你想要知道，对于 $0$ 到 $k$ 中所有整数 $i$ ，Lily 透露了一部分解读，能将所有事件联系起来，且其中正好\n有 $i$ 个关键解读的前提下，Lily 需要付出的最小总代价。\n\n“我不明白啊”，Lily 这样的哭了。她会坚守着秘密，按照约定等待着与 Nana 再会的那一刻。", "inputFormat": "第一行有三个整数 $n, m, k$ ，分别表示事件数量，解读总数和关键解读的数量。\n\n紧接着 $m$ 行每行有三个整数 $u, v, w$ ，分别表示一种能将事件 $u$ 与事件 $v$ 联系起来的解读，但是这解读的揭露需要付出 $ w$ 的代价。\n\n这 $m$ 行中前 $k$ 行表示 Lily 所知道的关键解读。", "outputFormat": "$k + 1$ 行每行有一个整数 $ans$ 。其中第 $i$ 行整数 $ans_i$ 表示揭露正好 $i − 1$ 个关键解读的。\n\n数据保证在所有关键解读都不揭露的情况下，剩余的解读能将所有事件联系在一起。", "hint": "### 数据范围\n\n$1 \\le u, v \\le n, 1 \\le w \\le 10^9$；\n\n对于 $30\\%$ 的数据满足 $1 \\le n \\le 100, 1 \\le m \\le 400, 1 \\le k \\le 5$；\n\n对于另外 $30\\%$ 的数据满足 $1 \\le n \\le 10000, 1 \\le m \\le 1000000, 1 \\le k \\le 20$；\n\n对于剩下 $40\\%$ 的数据满足 $1 \\le n \\le 10000, 1 \\le m \\le 1000000, 1 \\le k \\le 50$。\n\n赛题被启用的时候，小小的行星上已经有 $80$ 亿人了。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 普及组]  Himitsu", "background": "省略了一些不必要的图片。", "description": "Lily 忘不掉小时候临别前与 Nana 一起出逃的夜晚，两人为了探索宇宙的真相而沿着铁路轨道前行，望见从天际线涌出的大鱼浮在夜空里。从那以后 Lily 便未曾停止过钻研宇宙的秘密。\n\n秘密啊，总是会有那么一两个的。以浮起的大鱼为典型，Lily 所在的世界发生了 $n$ 件关于宇宙的重大事件。阴谋诡计，完全犯罪，宇宙的暗物质，事件与事件之间看似互不相干，但 Lily 每天阅读着关于宇宙的书籍，从书籍最后一页总结出 $m$ 段解读，每段解读都能将其中某两件事件联系起来。\n\n大人们希望 Lily 揭露部分已经得到的解读，使所有发生的事件都能被串联起来。但是 Lily 清楚，如果这些解读暴露，班里大概有一半的同学会开始计划着出逃——秘密的揭露都是需要 Lily 付出代价的，假设每一段解读的揭露需要付出的代价可以被量化，第 $i$ 段解读的揭露需要付出的代价为整数值 $w_i$ 。Lily 需要付出的总代价为，在确保解读们能将所有事件联系起来的前提下，Lily 所揭露的所有解读的代价之和。\n\nLily 知道，其中有 $k$ 段解读是关于世界真理的关键解读，是承载着 $70$ 亿的秘密，这些解读被透露的数量将直接决定着人类延续的可能性。人们议论纷纷，说着或许只有这两个孩子才能拯救世界，$70$ 亿人所凝聚的正义将 $2$ 人的自由剥夺，迫切地想要知道 Lily 给出的答案。\n\n你想要知道，对于 $0$ 到 $k$ 中所有整数 $i$ ，Lily 透露了一部分解读，能将所有事件联系起来，且其中正好\n有 $i$ 个关键解读的前提下，Lily 需要付出的最小总代价。\n\n“我不明白啊”，Lily 这样的哭了。她会坚守着秘密，按照约定等待着与 Nana 再会的那一刻。", "inputFormat": "第一行有三个整数 $n, m, k$ ，分别表示事件数量，解读总数和关键解读的数量。\n\n紧接着 $m$ 行每行有三个整数 $u, v, w$ ，分别表示一种能将事件 $u$ 与事件 $v$ 联系起来的解读，但是这解读的揭露需要付出 $ w$ 的代价。\n\n这 $m$ 行中前 $k$ 行表示 Lily 所知道的关键解读。", "outputFormat": "$k + 1$ 行每行有一个整数 $ans$ 。其中第 $i$ 行整数 $ans_i$ 表示揭露正好 $i − 1$ 个关键解读的。\n\n数据保证在所有关键解读都不揭露的情况下，剩余的解读能将所有事件联系在一起。", "hint": "### 数据范围\n\n$1 \\le u, v \\le n, 1 \\le w \\le 10^9$；\n\n对于 $30\\%$ 的数据满足 $1 \\le n \\le 100, 1 \\le m \\le 400, 1 \\le k \\le 5$；\n\n对于另外 $30\\%$ 的数据满足 $1 \\le n \\le 10000, 1 \\le m \\le 1000000, 1 \\le k \\le 20$；\n\n对于剩下 $40\\%$ 的数据满足 $1 \\le n \\le 10000, 1 \\le m \\le 1000000, 1 \\le k \\le 50$。\n\n赛题被启用的时候，小小的行星上已经有 $80$ 亿人了。", "locale": "zh-CN"}}}
{"pid": "P11261", "type": "P", "difficulty": 5, "samples": [["6 9\n1 4 4 5 2 3", "3"], ["10 5\n3 6 1 3 2 1 5 3 4 2", "31"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2018", "分治", "笛卡尔树", "COTS（克罗地亚）"], "title": "[COTS 2018] 直方图 Histogram", "background": "\n译自 [Izborne Pripreme 2018 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2018/) D1T1。$\\texttt{1s,1G}$。", "description": "\n\n给定笛卡尔坐标系中的直方图，宽度为 $n$，第 $i$ 格的高度为 $h_i$。也就是说，对于 $\\forall 1\\le i\\le n$，第 $i$ 格所占矩形的顶点坐标分别为 $(i-1,0),(i,0),(i-1,h_i),(i,h_i)$。\n\n给定正整数 $p$，求出满足以下条件的矩形的数量：\n\n- 矩形的四个顶点的坐标均为整数；\n- 矩形有一条边在 $x$ 轴上；\n- 矩形完全位于直方图内部（可以与边界相切）；\n- 矩形的面积至少为 $p$。", "inputFormat": "\n第一行，两个正整数 $n,p$。\n\n第二行，$n$ 个正整数 $h_1,h_2,\\ldots,h_n$。", "outputFormat": "\n输出一行一个整数，表示答案。", "hint": "#### 样例解释\n\n样例一解释：\n![](https://cdn.luogu.com.cn/upload/image_hosting/mzxlfq5x.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 10^5$；\n- $1\\le p\\le 10^{14}$；\n- $1\\le h_i\\le 10^{9}$。\n\n\n| 子任务编号 | $n\\le $ |  $p$ | $h_i\\le$   | 得分 |  \n| :--: | :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 3\\, 000 $    |  $\\le 10^{12}$ | $ 10^9$ | $ 10 $   |  \n| $ 2 $    | $ 10^5 $   |  $\\le 10^8$ | $1\\, 000$ | $ 15 $   |  \n| $ 3 $    | $ 10^5$ | $=1$ | $10^9$  | $ 15 $   |  \n| $ 4 $    | $ 10^5$ | $\\le 10^5$ | $10^9$ | $  25 $   |  \n| $ 5 $    | $ 10^5$  |  $\\le 10^{14}$ | $10^9$ | $ 35 $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2018] 直方图 Histogram", "background": "\n译自 [Izborne Pripreme 2018 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2018/) D1T1。$\\texttt{1s,1G}$。", "description": "\n\n给定笛卡尔坐标系中的直方图，宽度为 $n$，第 $i$ 格的高度为 $h_i$。也就是说，对于 $\\forall 1\\le i\\le n$，第 $i$ 格所占矩形的顶点坐标分别为 $(i-1,0),(i,0),(i-1,h_i),(i,h_i)$。\n\n给定正整数 $p$，求出满足以下条件的矩形的数量：\n\n- 矩形的四个顶点的坐标均为整数；\n- 矩形有一条边在 $x$ 轴上；\n- 矩形完全位于直方图内部（可以与边界相切）；\n- 矩形的面积至少为 $p$。", "inputFormat": "\n第一行，两个正整数 $n,p$。\n\n第二行，$n$ 个正整数 $h_1,h_2,\\ldots,h_n$。", "outputFormat": "\n输出一行一个整数，表示答案。", "hint": "#### 样例解释\n\n样例一解释：\n![](https://cdn.luogu.com.cn/upload/image_hosting/mzxlfq5x.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 10^5$；\n- $1\\le p\\le 10^{14}$；\n- $1\\le h_i\\le 10^{9}$。\n\n\n| 子任务编号 | $n\\le $ |  $p$ | $h_i\\le$   | 得分 |  \n| :--: | :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 3\\, 000 $    |  $\\le 10^{12}$ | $ 10^9$ | $ 10 $   |  \n| $ 2 $    | $ 10^5 $   |  $\\le 10^8$ | $1\\, 000$ | $ 15 $   |  \n| $ 3 $    | $ 10^5$ | $=1$ | $10^9$  | $ 15 $   |  \n| $ 4 $    | $ 10^5$ | $\\le 10^5$ | $10^9$ | $  25 $   |  \n| $ 5 $    | $ 10^5$  |  $\\le 10^{14}$ | $10^9$ | $ 35 $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11262", "type": "P", "difficulty": 5, "samples": [["6 4\n1 3 2 3 1 2\n1 1 2 2\n2 3 3 4\n2 3 4 5\n1 3 2 4", "DA\nNE\nDA\nDA"], ["10 5\n3 3 3 1 2 2 1 2 2 1\n2 3 5 6\n9 10 5 6\n5 6 4 5\n5 8 3 6\n3 7 5 9", "NE\nDA\nDA\nDA\nNE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2018", "莫队", "线段树", "可持久化线段树", "哈希 hashing", "COTS（克罗地亚）"], "title": "[COTS 2018] 题日 Zapatak", "background": "\n译自 [Izborne Pripreme 2018 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2018/) D1T2。$\\texttt{1s,1G}$。\n\n关于题目名：原文如此（「题目」的克罗地亚语是「zadatak」）。", "description": "\n定义长度均为 $k$ 的数列 $[a_1,a_2,\\ldots,a_k]$ 和 $[b_1,b_2,\\ldots,b_k]$ **几乎相等**，当且仅当存在**恰好一个** $1\\le p\\le k$，使得 $a_p\\neq b_p$。\n\n定义长度均为 $k$ 的数列 $[a_1,a_2,\\ldots,a_k]$ 和 $[b_1,b_2,\\ldots,b_k]$ **相似**，当且仅当可以通过重排使得 $a,b$ **几乎相等**。\n\n给定长度为 $n$ 的数列 $[a_1,a_2,\\ldots,a_n]$。$m$ 次询问，每次询问给定 $l_1,r_1,l_2,r_2$，问 $[a_{l_1},a_{{l_1}+1},\\ldots,a_{r_1}]$ 与 $[a_{l_2},a_{{l_2}+1},\\ldots,a_{r_2}]$ 是否相似。", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n第二行，$n$ 个非负整数 $a_1,a_2,\\ldots,a_n$。\n\n接下来 $m$ 行，每行四个正整数 $l_1,r_1,l_2,r_2$，描述一次询问。保证 $r_1-l_1=r_2-l_2$。\n", "outputFormat": "\n对于每个询问，输出一行：\n\n如果答案为是的话，输出 $\\texttt{DA}$（克罗地亚语「是」）；\n\n否则输出 $\\texttt{NE}$（克罗地亚语「否」）。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n,m\\le 10^5$；\n- $0\\le a_i\\le 10^9$；\n- $1\\le l_1\\le r_1\\le n$，$1\\le l_2\\le r_2\\le n$；\n- $r_1-l_1=r_2-l_2$。\n\n\n| 子任务编号 | $n\\le $ |  $m\\le $ | $a_i\\le$   | 得分 |  \n| :--: | :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 1\\, 000 $    |  $1\\, 000$ | $ 10^9$ | $ 10 $   |  \n| $ 2 $    | $ 5\\times 10^4 $   |  $5\\times 10^4$ | $30$ | $ 15 $   |  \n| $ 3 $    | $ 10^5$ | $10^4$ | $10^9$  | $ 30 $   |  \n| $ 4 $    | $ 10^5$ | $10^5$ | $10^9$ | $  45 $   |    \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2018] 题日 Zapatak", "background": "\n译自 [Izborne Pripreme 2018 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2018/) D1T2。$\\texttt{1s,1G}$。\n\n关于题目名：原文如此（「题目」的克罗地亚语是「zadatak」）。", "description": "\n定义长度均为 $k$ 的数列 $[a_1,a_2,\\ldots,a_k]$ 和 $[b_1,b_2,\\ldots,b_k]$ **几乎相等**，当且仅当存在**恰好一个** $1\\le p\\le k$，使得 $a_p\\neq b_p$。\n\n定义长度均为 $k$ 的数列 $[a_1,a_2,\\ldots,a_k]$ 和 $[b_1,b_2,\\ldots,b_k]$ **相似**，当且仅当可以通过重排使得 $a,b$ **几乎相等**。\n\n给定长度为 $n$ 的数列 $[a_1,a_2,\\ldots,a_n]$。$m$ 次询问，每次询问给定 $l_1,r_1,l_2,r_2$，问 $[a_{l_1},a_{{l_1}+1},\\ldots,a_{r_1}]$ 与 $[a_{l_2},a_{{l_2}+1},\\ldots,a_{r_2}]$ 是否相似。", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n第二行，$n$ 个非负整数 $a_1,a_2,\\ldots,a_n$。\n\n接下来 $m$ 行，每行四个正整数 $l_1,r_1,l_2,r_2$，描述一次询问。保证 $r_1-l_1=r_2-l_2$。\n", "outputFormat": "\n对于每个询问，输出一行：\n\n如果答案为是的话，输出 $\\texttt{DA}$（克罗地亚语「是」）；\n\n否则输出 $\\texttt{NE}$（克罗地亚语「否」）。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n,m\\le 10^5$；\n- $0\\le a_i\\le 10^9$；\n- $1\\le l_1\\le r_1\\le n$，$1\\le l_2\\le r_2\\le n$；\n- $r_1-l_1=r_2-l_2$。\n\n\n| 子任务编号 | $n\\le $ |  $m\\le $ | $a_i\\le$   | 得分 |  \n| :--: | :--: | :--: | :--: |  :--: |    \n| $ 1 $    | $ 1\\, 000 $    |  $1\\, 000$ | $ 10^9$ | $ 10 $   |  \n| $ 2 $    | $ 5\\times 10^4 $   |  $5\\times 10^4$ | $30$ | $ 15 $   |  \n| $ 3 $    | $ 10^5$ | $10^4$ | $10^9$  | $ 30 $   |  \n| $ 4 $    | $ 10^5$ | $10^5$ | $10^9$ | $  45 $   |    \n", "locale": "zh-CN"}}}
{"pid": "P11263", "type": "P", "difficulty": 7, "samples": [["4 6 4\n-----+\n----++\n--++++\n-+++++", "2364"], ["3 3 2\n--+\n--+\n-++", "2"], ["2 3 2\n---\n+++", "0"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2018", "COTS（克罗地亚）"], "title": "[COTS 2018] 仲裁 Arbitraža", "background": "\n\n译自 [Izborne Pripreme 2018 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2018/) D2T1。$\\texttt{10s,1G}$。\n", "description": "\nA 国和 B 国正在划分一块 $n\\times m$ 的矩形土地。\n\n显然，这块土地上有 $(n-1)$ 条水平线和 $(m-1)$ 条垂直线。\n\n给这 $(n+m-2)$ 条线分配 $[1,k]$ 间的整数。定义一个格子的**权值**为在它左/上方的线上整数之和减去在它右/下方的线上整数之和。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l5bb8lab.png)\n\n给定每个格子权值的要求（要求这个格子的权值 $\\lt 0$ 或者 $\\gt 0$）。在 $k^{n+m-2}$ 种分配整数的方案中，求出有多少个方案符合要求。\n\n只需要输出答案对 $(10^9+7)$ 取模后得到的结果。", "inputFormat": "\n第一行，三个正整数 $n,m,k$。\n\n接下来一个 $n\\times m$ 的矩阵，里面的元素不是 $\\texttt{+}$ 就是 $\\texttt{-}$，表示每个格子权值符号的要求。", "outputFormat": "输出一行一个整数，表示答案。\n", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le n,m,k\\le 80$。\n\n\n| 子任务编号 | $n$ |  $m $ | $k\\le$   | 特殊性质 |  得分 |  \n| :--: | :--: | :--: | :--: |  :--: |  :--: |\n| $ 1 $    | $ \\le 10 $    |  $\\le 10$ | $ 4$ |  | $ 10 $   |   |\n| $ 2 $    | $ \\le 80 $   |  $=1$ | $80$ | | $ 10 $   |\n| $ 3 $    | $\\le20$ | $\\le 20$ | $20$  |  | $ 10 $   |  \n| $ 4 $    | $\\le40$ | $\\le 40$ | $40$ |   |$  20 $   |   \n| $ 5 $    | $\\le79$ | $=n+1$ | $80$ |  A |$  20 $   |   \n| $ 6 $    | $\\le 80$ | $\\le 80$ | $80$ |  |$  30 $   |   \n\n\n特殊性质 A：$(i,j)$ 要求为 $\\texttt{+}$，当且仅当 $i+j\\ge m+1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2018] 仲裁 Arbitraža", "background": "\n\n译自 [Izborne Pripreme 2018 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2018/) D2T1。$\\texttt{10s,1G}$。\n", "description": "\nA 国和 B 国正在划分一块 $n\\times m$ 的矩形土地。\n\n显然，这块土地上有 $(n-1)$ 条水平线和 $(m-1)$ 条垂直线。\n\n给这 $(n+m-2)$ 条线分配 $[1,k]$ 间的整数。定义一个格子的**权值**为在它左/上方的线上整数之和减去在它右/下方的线上整数之和。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l5bb8lab.png)\n\n给定每个格子权值的要求（要求这个格子的权值 $\\lt 0$ 或者 $\\gt 0$）。在 $k^{n+m-2}$ 种分配整数的方案中，求出有多少个方案符合要求。\n\n只需要输出答案对 $(10^9+7)$ 取模后得到的结果。", "inputFormat": "\n第一行，三个正整数 $n,m,k$。\n\n接下来一个 $n\\times m$ 的矩阵，里面的元素不是 $\\texttt{+}$ 就是 $\\texttt{-}$，表示每个格子权值符号的要求。", "outputFormat": "输出一行一个整数，表示答案。\n", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le n,m,k\\le 80$。\n\n\n| 子任务编号 | $n$ |  $m $ | $k\\le$   | 特殊性质 |  得分 |  \n| :--: | :--: | :--: | :--: |  :--: |  :--: |\n| $ 1 $    | $ \\le 10 $    |  $\\le 10$ | $ 4$ |  | $ 10 $   |   |\n| $ 2 $    | $ \\le 80 $   |  $=1$ | $80$ | | $ 10 $   |\n| $ 3 $    | $\\le20$ | $\\le 20$ | $20$  |  | $ 10 $   |  \n| $ 4 $    | $\\le40$ | $\\le 40$ | $40$ |   |$  20 $   |   \n| $ 5 $    | $\\le79$ | $=n+1$ | $80$ |  A |$  20 $   |   \n| $ 6 $    | $\\le 80$ | $\\le 80$ | $80$ |  |$  30 $   |   \n\n\n特殊性质 A：$(i,j)$ 要求为 $\\texttt{+}$，当且仅当 $i+j\\ge m+1$。", "locale": "zh-CN"}}}
{"pid": "P11264", "type": "P", "difficulty": 6, "samples": [["4\n4 4\n-4 4\n-4 -4\n4 -4", "4"], ["3\n3 0\n-3 1\n-3 -1", "9.617692030835672"], ["2\n1 1\n0 1", "-1"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2018", "二分", "Special Judge", "半平面交", "COTS（克罗地亚）"], "title": "[COTS 2018] 逃遁 Bijeg", "background": "\n译自 [Izborne Pripreme 2018 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2018/) D2T2。$\\texttt{10s,1G}$。\n", "description": "\n考虑一个二维笛卡尔坐标系。\n\n劫匪初始时在原点，此外有 $n$ 个警察分布在平面上。\n\n他们的**速率**均为 $v$（一个正实数），且只会沿着一个特定的方向做**匀速直线**运动（每个人运动的方向可能不同）。\n\n劫匪可以任意选定自己逃跑的方向，而警察会选择最优的方式追捕劫匪。当警察和劫匪的位置重合时，劫匪即被逮捕。\n\n试判断：\n\n- 劫匪是否可以成功逃跑，也就是，是否存在一个方向，使得劫匪不被逮捕。\n\n如果无法逃跑，还需要求出劫匪被逮捕时，离原点的欧几里得距离的最大值。\n\n数据保证这 $(n+1)$ 个人的位置两两不同。\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，描述警察的位置。\n\n\n数据保证 $(n+1)$ 个人的位置两两不同。", "outputFormat": "\n如果劫匪可以成功逃跑，输出 $-1$。\n\n否则，输出一个实数，表示劫匪被逮捕时距离的最大值。\n\n当且仅当你的答案与标准答案的绝对或相对误差不大于 $10^{-5}$ 时，认为你的答案正确。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fdrlttoq.png)\n\n#### 子任务\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^5$，$|x|,|y|\\le 10^3$，所有人的位置均不同。\n\n\n| 子任务编号 | $n\\le $ |  $\\vert x\\vert ,\\vert y\\vert \\le $ |  得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 100 $    |  $10$ | $ 20 $   |  \n| $ 2 $    | $ 3\\, 000 $   |  $100$ | $ 30 $   |  \n| $ 3 $    | $ 10^5$ | $1\\, 000$ |  $ 50 $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2018] 逃遁 Bijeg", "background": "\n译自 [Izborne Pripreme 2018 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2018/) D2T2。$\\texttt{10s,1G}$。\n", "description": "\n考虑一个二维笛卡尔坐标系。\n\n劫匪初始时在原点，此外有 $n$ 个警察分布在平面上。\n\n他们的**速率**均为 $v$（一个正实数），且只会沿着一个特定的方向做**匀速直线**运动（每个人运动的方向可能不同）。\n\n劫匪可以任意选定自己逃跑的方向，而警察会选择最优的方式追捕劫匪。当警察和劫匪的位置重合时，劫匪即被逮捕。\n\n试判断：\n\n- 劫匪是否可以成功逃跑，也就是，是否存在一个方向，使得劫匪不被逮捕。\n\n如果无法逃跑，还需要求出劫匪被逮捕时，离原点的欧几里得距离的最大值。\n\n数据保证这 $(n+1)$ 个人的位置两两不同。\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，描述警察的位置。\n\n\n数据保证 $(n+1)$ 个人的位置两两不同。", "outputFormat": "\n如果劫匪可以成功逃跑，输出 $-1$。\n\n否则，输出一个实数，表示劫匪被逮捕时距离的最大值。\n\n当且仅当你的答案与标准答案的绝对或相对误差不大于 $10^{-5}$ 时，认为你的答案正确。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fdrlttoq.png)\n\n#### 子任务\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^5$，$|x|,|y|\\le 10^3$，所有人的位置均不同。\n\n\n| 子任务编号 | $n\\le $ |  $\\vert x\\vert ,\\vert y\\vert \\le $ |  得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 100 $    |  $10$ | $ 20 $   |  \n| $ 2 $    | $ 3\\, 000 $   |  $100$ | $ 30 $   |  \n| $ 3 $    | $ 10^5$ | $1\\, 000$ |  $ 50 $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11265", "type": "P", "difficulty": 5, "samples": [["3 3 13148274 0\n87 75 218 205", "0"], ["10 10 1145141919810 0\n1 0 6 4", "2028"], ["200000 1000000 61884 100\n5 3 0 7", "45263464"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "分块", "模板题"], "title": "【模板】静态区间半群查询", "background": "", "description": "给定一个序列 $a_1,a_2,\\cdots,a_n$，其中的每个元素都是一个 $2\\times2$ 的矩阵。你需要处理 $m$ 次查询，每次查询给定一个区间 $[l,r]$，你需要求出 $\\prod_{i=l}^ra_i$，其中 $\\times$ 符号代表 $(\\min,+)$ 矩阵积。\n\n**注意：本题时限极其宽松，主要作正确性测试使用和不准确的效率对比使用。请不要过分滥用本题评测资源。**", "inputFormat": "由于本题数据范围较大，测试点将在程序内生成。如果你不想看这一部分，我们也在题目最后提供了一份可以得到 $10\\%$ 分数的 C++ 代码，可以直接拉到主函数改实现。\n\n第一行四个非负整数 $n,m,sd,b$，代表序列长度，查询数目，你的随机数种子（64 位无符号二进制数），以及查询的随机参数。你需要将 $sd$ 重赋值为对其调用 `splitmix64` 得到的值。\n\n第二行四个非负整数 $kv_{0,0},kv_{0,1},kv_{1,0},kv_{1,1}$。\n\n接下来你需要调用 $n$ 次 `rnd`。设第 $i$ 次 `rnd` 的结果为 $(\\overline{qwrxsytz})_{256}$，则 $a_i=\\begin{pmatrix}z&y\\\\x&w\\end{pmatrix}$。\n\n接下来你需要生成 $m$ 次查询。对于每一次查询，先调用一次 `rnd`。若 $b>0$ 且结果为奇数，你调用一次 `rnd` 并记结果对 $n-b$ 取余的值 $c$，调用一次 `rnd` 并记结果对 $n-c$ 取模的值加一作为询问左端点 $l$，取 $l+c$ 作为询问右端点 $r$；否则，你调用两次 `rnd` 生成两个结果并将其分别对 $n$ 取余，取其中较小的余数加一作为询问左端点 $l$，较大的余数加一作为询问右端点 $r$。\n\n以上提到的两个函数实现如下：\n\n```cpp\nuint64_t splitmix64(uint64_t x) {\n  x += 0x9e3779b97f4a7c15;\n  x = (x ^ (x >> 30)) * 0xbf58476d1ce4e5b9;\n  x = (x ^ (x >> 27)) * 0x94d049bb133111eb;\n  return x ^ (x >> 31);\n}\nuint64_t rnd() {\n  sd ^= sd << 13, sd ^= sd >> 7;\n  return sd ^= sd << 17;\n}\n```", "outputFormat": "设你某次查询得到的矩阵为 $res$，则这次查询的结果视为 $\\sum_{0\\le i,j\\le1}(res_{i,j}\\oplus kv_{i,j})$，其中 $\\oplus$ 代表按位异或。输出所有 $m$ 个结果的异或值。", "hint": "**本题采用捆绑测试。**\n\n|Subtask 编号|$n$|$m$|$b$|分值|时限|\n|-|-|-|-|-|-|\n|0|$10^3$|$10^3$|$0$|$10$|$\\texttt{1s}$|\n|1|$5\\times10^4$|$5\\times10^4$|$0$|$10$|$\\texttt{1s}$|\n|2|$2\\times10^5$|$2\\times10^5$|$0$|$10$|$\\texttt{1s}$|\n|3|$10^6$|$2\\times10^5$|$0$|$10$|$\\texttt{3s}$|\n|4|$2\\times10^5$|$10^6$|$0$|$20$|$\\texttt{3s}$|\n|5|$10^6$|$10^6$|$0$|$10$|$\\texttt{3s}$|\n|6|$10^6$|$10^6$|$n-300$|$10$|$\\texttt{3s}$|\n|7|$10^6$|$10^6$|$n-500$|$10$|$\\texttt{3s}$|\n|8|$10^6$|$10^6$|$n-1000$|$10$|$\\texttt{3s}$|\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 10^6$，$0\\le b\\le n-1$，$0\\le sd\\le2^{64}-1$，$0\\le kv_{i,j}\\le2\\times10^8$（$0\\le i,j\\le1$）。\n\n---\n\n样例 1 解释：我们有 $a_1=\\begin{pmatrix}202&50\\\\51&238\\end{pmatrix}\n$，$a_2=\n\\begin{pmatrix}167&154\\\\37&25\\end{pmatrix}$，$a_3=\\begin{pmatrix}164&145\\\\208&27\\end{pmatrix}$，三组查询分别是 $[1,3]$，$[1,3]$ 和 $[1,2]$。前两组的答案矩阵均为 $\\begin{pmatrix}251&102\\\\382&232\\end{pmatrix}\n$，而第三组的答案矩阵为 $\\begin{pmatrix}87&75\\\\218&205\\end{pmatrix}\n$。根据题意模拟计算，最终输出为 $0$。\n\n以下是一份可以得到 $10\\%$ 分数的 C++ 代码。\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstruct mat {\n  int a[2][2];\n  mat() {\n    a[0][0] = a[1][1] = 0;\n    a[1][0] = a[0][1] = 0x3f3f3f3f;\n  }\n  mat(int x, int y, int z, int w) {\n    a[0][0] = x, a[0][1] = y, a[1][0] = z, a[1][1] = w;\n  }\n};\nmat mul(const mat& x, const mat& y) {\n  return {min(x.a[0][0] + y.a[0][0], x.a[0][1] + y.a[1][0]),\n          min(x.a[0][0] + y.a[0][1], x.a[0][1] + y.a[1][1]),\n          min(x.a[1][0] + y.a[0][0], x.a[1][1] + y.a[1][0]),\n          min(x.a[1][0] + y.a[0][1], x.a[1][1] + y.a[1][1])};\n}\nstruct random {\n  static uint64_t splitmix64(uint64_t x) {\n    x += 0x9e3779b97f4a7c15;\n    x = (x ^ (x >> 30)) * 0xbf58476d1ce4e5b9;\n    x = (x ^ (x >> 27)) * 0x94d049bb133111eb;\n    return x ^ (x >> 31);\n  }\n  uint64_t rnd() {\n    sd ^= sd << 13, sd ^= sd >> 7;\n    return sd ^= sd << 17;\n  }\n  void init() { cin >> sd >> b, sd = splitmix64(sd); }\n  void genmat(mat& res) {\n    uint64_t val = rnd();\n    for (int i : {0, 1})\n      for (int j : {0, 1}) res.a[i][j] = val >> ((i << 1 | j) << 4) & 0xff;\n  }\n  void genqry(int& l, int& r, int n) {\n    if ((rnd() & 1) && b) {\n      int c = rnd() % (n - b);\n      l = rnd() % (n - c) + 1, r = l + c;\n    } else {\n      l = rnd() % n + 1, r = rnd() % n + 1;\n      if (l > r) swap(l, r);\n    }\n  }\n  uint64_t sd;\n  int b;\n} rnd;\nstruct output {\n  int ans, kv[2][2];\n  void init() {\n    for (int i : {0, 1})\n      for (int j : {0, 1}) cin >> kv[i][j];\n  }\n  void setres(mat res) {\n    int tmp = 0;\n    for (int i : {0, 1})\n      for (int j : {0, 1}) tmp += res.a[i][j] ^ kv[i][j];\n    ans ^= tmp;\n  }\n} out;\nconstexpr int N = 1e6 + 9;\nint n, m, ans;\nmat a[N];\nsigned main() {\n  cin.tie(nullptr)->sync_with_stdio(false);\n  cin >> n >> m, rnd.init(), out.init();\n  for (int i = 1; i <= n; ++i) rnd.genmat(a[i]);\n  // 你可以在这里进行你所需要的初始化。\n  for (int l, r; m; --m) {\n    rnd.genqry(l, r, n);\n    out.setres(accumulate(a + l, a + r + 1, mat(), mul));\n    // 你可以把上面这个 accumulate 改成自己的查询函数。\n  }\n  return cout << out.ans << endl, 0;\n}\n```\n\n**注意：观察代码可以发现，你实际上可以以任意顺序调用这 $m$ 次 `setres`。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】静态区间半群查询", "background": "", "description": "给定一个序列 $a_1,a_2,\\cdots,a_n$，其中的每个元素都是一个 $2\\times2$ 的矩阵。你需要处理 $m$ 次查询，每次查询给定一个区间 $[l,r]$，你需要求出 $\\prod_{i=l}^ra_i$，其中 $\\times$ 符号代表 $(\\min,+)$ 矩阵积。\n\n**注意：本题时限极其宽松，主要作正确性测试使用和不准确的效率对比使用。请不要过分滥用本题评测资源。**", "inputFormat": "由于本题数据范围较大，测试点将在程序内生成。如果你不想看这一部分，我们也在题目最后提供了一份可以得到 $10\\%$ 分数的 C++ 代码，可以直接拉到主函数改实现。\n\n第一行四个非负整数 $n,m,sd,b$，代表序列长度，查询数目，你的随机数种子（64 位无符号二进制数），以及查询的随机参数。你需要将 $sd$ 重赋值为对其调用 `splitmix64` 得到的值。\n\n第二行四个非负整数 $kv_{0,0},kv_{0,1},kv_{1,0},kv_{1,1}$。\n\n接下来你需要调用 $n$ 次 `rnd`。设第 $i$ 次 `rnd` 的结果为 $(\\overline{qwrxsytz})_{256}$，则 $a_i=\\begin{pmatrix}z&y\\\\x&w\\end{pmatrix}$。\n\n接下来你需要生成 $m$ 次查询。对于每一次查询，先调用一次 `rnd`。若 $b>0$ 且结果为奇数，你调用一次 `rnd` 并记结果对 $n-b$ 取余的值 $c$，调用一次 `rnd` 并记结果对 $n-c$ 取模的值加一作为询问左端点 $l$，取 $l+c$ 作为询问右端点 $r$；否则，你调用两次 `rnd` 生成两个结果并将其分别对 $n$ 取余，取其中较小的余数加一作为询问左端点 $l$，较大的余数加一作为询问右端点 $r$。\n\n以上提到的两个函数实现如下：\n\n```cpp\nuint64_t splitmix64(uint64_t x) {\n  x += 0x9e3779b97f4a7c15;\n  x = (x ^ (x >> 30)) * 0xbf58476d1ce4e5b9;\n  x = (x ^ (x >> 27)) * 0x94d049bb133111eb;\n  return x ^ (x >> 31);\n}\nuint64_t rnd() {\n  sd ^= sd << 13, sd ^= sd >> 7;\n  return sd ^= sd << 17;\n}\n```", "outputFormat": "设你某次查询得到的矩阵为 $res$，则这次查询的结果视为 $\\sum_{0\\le i,j\\le1}(res_{i,j}\\oplus kv_{i,j})$，其中 $\\oplus$ 代表按位异或。输出所有 $m$ 个结果的异或值。", "hint": "**本题采用捆绑测试。**\n\n|Subtask 编号|$n$|$m$|$b$|分值|时限|\n|-|-|-|-|-|-|\n|0|$10^3$|$10^3$|$0$|$10$|$\\texttt{1s}$|\n|1|$5\\times10^4$|$5\\times10^4$|$0$|$10$|$\\texttt{1s}$|\n|2|$2\\times10^5$|$2\\times10^5$|$0$|$10$|$\\texttt{1s}$|\n|3|$10^6$|$2\\times10^5$|$0$|$10$|$\\texttt{3s}$|\n|4|$2\\times10^5$|$10^6$|$0$|$20$|$\\texttt{3s}$|\n|5|$10^6$|$10^6$|$0$|$10$|$\\texttt{3s}$|\n|6|$10^6$|$10^6$|$n-300$|$10$|$\\texttt{3s}$|\n|7|$10^6$|$10^6$|$n-500$|$10$|$\\texttt{3s}$|\n|8|$10^6$|$10^6$|$n-1000$|$10$|$\\texttt{3s}$|\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 10^6$，$0\\le b\\le n-1$，$0\\le sd\\le2^{64}-1$，$0\\le kv_{i,j}\\le2\\times10^8$（$0\\le i,j\\le1$）。\n\n---\n\n样例 1 解释：我们有 $a_1=\\begin{pmatrix}202&50\\\\51&238\\end{pmatrix}\n$，$a_2=\n\\begin{pmatrix}167&154\\\\37&25\\end{pmatrix}$，$a_3=\\begin{pmatrix}164&145\\\\208&27\\end{pmatrix}$，三组查询分别是 $[1,3]$，$[1,3]$ 和 $[1,2]$。前两组的答案矩阵均为 $\\begin{pmatrix}251&102\\\\382&232\\end{pmatrix}\n$，而第三组的答案矩阵为 $\\begin{pmatrix}87&75\\\\218&205\\end{pmatrix}\n$。根据题意模拟计算，最终输出为 $0$。\n\n以下是一份可以得到 $10\\%$ 分数的 C++ 代码。\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstruct mat {\n  int a[2][2];\n  mat() {\n    a[0][0] = a[1][1] = 0;\n    a[1][0] = a[0][1] = 0x3f3f3f3f;\n  }\n  mat(int x, int y, int z, int w) {\n    a[0][0] = x, a[0][1] = y, a[1][0] = z, a[1][1] = w;\n  }\n};\nmat mul(const mat& x, const mat& y) {\n  return {min(x.a[0][0] + y.a[0][0], x.a[0][1] + y.a[1][0]),\n          min(x.a[0][0] + y.a[0][1], x.a[0][1] + y.a[1][1]),\n          min(x.a[1][0] + y.a[0][0], x.a[1][1] + y.a[1][0]),\n          min(x.a[1][0] + y.a[0][1], x.a[1][1] + y.a[1][1])};\n}\nstruct random {\n  static uint64_t splitmix64(uint64_t x) {\n    x += 0x9e3779b97f4a7c15;\n    x = (x ^ (x >> 30)) * 0xbf58476d1ce4e5b9;\n    x = (x ^ (x >> 27)) * 0x94d049bb133111eb;\n    return x ^ (x >> 31);\n  }\n  uint64_t rnd() {\n    sd ^= sd << 13, sd ^= sd >> 7;\n    return sd ^= sd << 17;\n  }\n  void init() { cin >> sd >> b, sd = splitmix64(sd); }\n  void genmat(mat& res) {\n    uint64_t val = rnd();\n    for (int i : {0, 1})\n      for (int j : {0, 1}) res.a[i][j] = val >> ((i << 1 | j) << 4) & 0xff;\n  }\n  void genqry(int& l, int& r, int n) {\n    if ((rnd() & 1) && b) {\n      int c = rnd() % (n - b);\n      l = rnd() % (n - c) + 1, r = l + c;\n    } else {\n      l = rnd() % n + 1, r = rnd() % n + 1;\n      if (l > r) swap(l, r);\n    }\n  }\n  uint64_t sd;\n  int b;\n} rnd;\nstruct output {\n  int ans, kv[2][2];\n  void init() {\n    for (int i : {0, 1})\n      for (int j : {0, 1}) cin >> kv[i][j];\n  }\n  void setres(mat res) {\n    int tmp = 0;\n    for (int i : {0, 1})\n      for (int j : {0, 1}) tmp += res.a[i][j] ^ kv[i][j];\n    ans ^= tmp;\n  }\n} out;\nconstexpr int N = 1e6 + 9;\nint n, m, ans;\nmat a[N];\nsigned main() {\n  cin.tie(nullptr)->sync_with_stdio(false);\n  cin >> n >> m, rnd.init(), out.init();\n  for (int i = 1; i <= n; ++i) rnd.genmat(a[i]);\n  // 你可以在这里进行你所需要的初始化。\n  for (int l, r; m; --m) {\n    rnd.genqry(l, r, n);\n    out.setres(accumulate(a + l, a + r + 1, mat(), mul));\n    // 你可以把上面这个 accumulate 改成自己的查询函数。\n  }\n  return cout << out.ans << endl, 0;\n}\n```\n\n**注意：观察代码可以发现，你实际上可以以任意顺序调用这 $m$ 次 `setres`。**", "locale": "zh-CN"}}}
{"pid": "P11266", "type": "P", "difficulty": 5, "samples": [["5 5\n1 2 3 4 4\n2 4 5\n3 4 5 3\n1 4\n0 4 5\n1 4", "3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["可并堆", "模板题"], "title": "【模板】可并堆 2", "background": "感谢 @[Spasmodic](https://www.luogu.com.cn/user/121027) 提供初版数据生成器。\n\n[gen](https://www.luogu.com.cn/paste/4vk36jsp)。", "description": "给定正整数 $n$ 和 $m$ 以及一个长为 $n$ 的整数序列 $a_{1,\\dots,n}$。\n\n你需要维护序列 $a_{1,\\dots,n}$ 以及 $n$ 个集合 $S_{1,\\dots,n}$，初始时 $S_i=\\{i\\}$。\n\n接下来要进行以下四种操作共 $m$ 次，每次操作形如：\n\n- `0 x y`：表示将元素 $y$ 从集合 $S_x$ 中删去。保证此时元素 $y$ 在集合 $S_x$ 中。\n- `1 x`：表示询问 $\\min_{i\\in S_x} a_i$，保证此时集合 $S_x$ 非空。\n- `2 x y`：将集合 $S_y$ 中并入 $S_x$ 并清空集合 $S_y$。保证此时集合 $S_x,S_y$ 均非空，且此次操作后不会再出现涉及集合 $S_y$ 的操作。\n- `3 x y z`：表示将 $a_y$ 赋值为 $z$。保证此时元素 $y$ 在集合 $S_x$ 中，且 $z<a_y$。\n\n不难发现这是一道堆的模板题，所以现在请你完成它。", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n$ 个正整数，第 $i$ 个正整数表示 $a_i$。\n\n接下来 $m$ 行每行一个操作如题。", "outputFormat": "对于每个 `1` 操作一行整数（注意不保证依然为正）表示答案。", "hint": "对于 $20\\%$ 的数据，$n=m=10$；\n\n对于 $80\\%$ 的数据，$n=m=10^5$；\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^6$，$1\\le a_i\\le2\\times10^9$，保证任意时刻任意堆中元素绝对值不超过 $10^{15}$（人话：保证每次 `3` 操作最多单点减 $5\\times10^8$）。\n\n---\n\n最后两个点出题人的手写堆和 pbds 的配对堆都跑到了几百毫秒，如果有被卡常的可私。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】可并堆 2", "background": "感谢 @[Spasmodic](https://www.luogu.com.cn/user/121027) 提供初版数据生成器。\n\n[gen](https://www.luogu.com.cn/paste/4vk36jsp)。", "description": "给定正整数 $n$ 和 $m$ 以及一个长为 $n$ 的整数序列 $a_{1,\\dots,n}$。\n\n你需要维护序列 $a_{1,\\dots,n}$ 以及 $n$ 个集合 $S_{1,\\dots,n}$，初始时 $S_i=\\{i\\}$。\n\n接下来要进行以下四种操作共 $m$ 次，每次操作形如：\n\n- `0 x y`：表示将元素 $y$ 从集合 $S_x$ 中删去。保证此时元素 $y$ 在集合 $S_x$ 中。\n- `1 x`：表示询问 $\\min_{i\\in S_x} a_i$，保证此时集合 $S_x$ 非空。\n- `2 x y`：将集合 $S_y$ 中并入 $S_x$ 并清空集合 $S_y$。保证此时集合 $S_x,S_y$ 均非空，且此次操作后不会再出现涉及集合 $S_y$ 的操作。\n- `3 x y z`：表示将 $a_y$ 赋值为 $z$。保证此时元素 $y$ 在集合 $S_x$ 中，且 $z<a_y$。\n\n不难发现这是一道堆的模板题，所以现在请你完成它。", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n$ 个正整数，第 $i$ 个正整数表示 $a_i$。\n\n接下来 $m$ 行每行一个操作如题。", "outputFormat": "对于每个 `1` 操作一行整数（注意不保证依然为正）表示答案。", "hint": "对于 $20\\%$ 的数据，$n=m=10$；\n\n对于 $80\\%$ 的数据，$n=m=10^5$；\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^6$，$1\\le a_i\\le2\\times10^9$，保证任意时刻任意堆中元素绝对值不超过 $10^{15}$（人话：保证每次 `3` 操作最多单点减 $5\\times10^8$）。\n\n---\n\n最后两个点出题人的手写堆和 pbds 的配对堆都跑到了几百毫秒，如果有被卡常的可私。", "locale": "zh-CN"}}}
{"pid": "P11267", "type": "P", "difficulty": 4, "samples": [["8 3 2\n10001011\n1 2\n4 3", "5\n10"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "O2优化", "梦熊比赛"], "title": "【MX-S5-T1】王国边缘", "background": "原题链接：<https://oier.team/problems/S5A>。\n\n---\n\n> 纷飞白雪零碎了异客的心，在无数的高山外，故人是否还在记忆的流水中，细嗅往年往月的百花？\n> \n> 只是他们在旧地的怀抱中，但有一个人却在海的那一端，潸然泪下……\n> \n> 人都有归属，只是某些人看不到罢了……\n\n**约定记号 $S^c$ 表示字符串 $S$ 循环 $c$ 次拼接而成的字符串。特别地，若 $c = \\infty$，则表示字符串 $S$ 无限循环拼接而成的字符串。**", "description": "异客在一个无限循环的 $\\texttt{01}$ 字符串 $T=S^\\infty$ 上进行着他的旅程，其中 $S$ 的长度为 $n$，$T$ 的第 $i$ 个字符为 $T_i$。\n\n异客的视野有限，只能看到后面 $m$ 个字符。\n\n异客会进行 $q$ 次旅程，每次起点不同，移动次数也不同。\n\n当异客在 $T_i$ 上时：\n\n- 若 $T_{i+1\\dots i+m}$ 中存在 $\\texttt{1}$，则异客下一次会移动到其中最远的一个 $\\texttt{1}$ 上。\n- 否则，异客下一次会移动到下一个字符 $T_{i+1}$ 上。\n\n你需要告诉异客，他会在哪里停下。由于答案会很大，你只需要告诉他对 $10^9+7$ 取模后的结果。\n\n", "inputFormat": "第一行，三个正整数 $n,m,q$。\n\n第二行，一个长度为 $n$ 的 $\\texttt{01}$ 字符串 $S$。\n\n接下来 $q$ 行，每行两个整数 $s, k$，表示起点在 $T_s$，移动 $k$ 次。", "outputFormat": "$q$ 行，每行一个整数，表示停下的位置对 $10^9+7$ 取模后的值。", "hint": "**【样例解释 #1】**\n\n$T$ 的前 $16$ 位为 $\\texttt{1000101110001011}$。\n\n第一次询问，位置移动为 $1 \\to 2 \\to 5$。\n\n第二次询问，位置移动为 $4 \\to 7 \\to 9 \\to 10$。\n\n**【样例 #2】**\n\n见附件中的 `kingdom/kingdom2.in` 与 `kingdom/kingdom2.ans`。\n\n**【样例 #3】**\n\n见附件中的 `kingdom/kingdom3.in` 与 `kingdom/kingdom3.ans`。\n\n该组样例满足测试点 $5$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `kingdom/kingdom4.in` 与 `kingdom/kingdom4.ans`。\n\n该组样例满足测试点 $9\\sim 10$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `kingdom/kingdom5.in` 与 `kingdom/kingdom5.ans`。\n\n该组样例满足测试点 $18\\sim 20$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\le n \\le 2 \\times 10^{5}$，$1 \\le m \\le 10^{18}$，$1 \\le q \\le 2 \\times 10^5$，$1 \\le s \\le 10^{18}$，$0 \\le k \\le 10^{18}$。\n\n|  测试点编号  |    $n \\le$     |  $m \\le$  |    $q \\le$     |  $s \\le$  |    $k \\le$     |    特殊性质    |\n| :----------: | :------------: | :-------: | :------------: | :-------: | :------------: | :------------: |\n|     $1$      | $2\\times 10^5$ |  $10^9$   | $2\\times 10^5$ |  $10^9$   |      $0$       |       无       |\n|     $2$      | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |      $0$       |       无       |\n|  $3\\sim 4$   | $2\\times 10^5$ |  $10^9$   | $2\\times 10^5$ |  $10^9$   |     $10^9$     | $S$ 为 $\\texttt{0}^n$ 或 $\\texttt{1}^n$ |\n|     $5$      | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |   $10^{18}$    | $S$ 为 $\\texttt{0}^n$ 或 $\\texttt{1}^n$ |\n|  $6\\sim 8$   |     $10^2$     |   $ n $   |     $10^2$     |    $n$    |     $10^2$     |       无       |\n|  $9\\sim 10$  | $3\\times 10^3$ |   $ n $   | $3\\times 10^3$ |    $n$    | $3\\times 10^3$ |       无       |\n| $11\\sim 12$  | $2\\times 10^5$ |    $n$    | $2\\times 10^5$ |    $n$    |      $1$       |       无       |\n| $13\\sim 14$  | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |      $1$       |       无       |\n| $15\\sim 17$  | $2\\times 10^5$ |  $10^9$   | $2\\times 10^5$ |  $10^9$   |     $10^9$     |       无       |\n| $18 \\sim 20$ | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |   $10^{18}$    |       无       |\n\n\n\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S5-T1】王国边缘", "background": "原题链接：<https://oier.team/problems/S5A>。\n\n---\n\n> 纷飞白雪零碎了异客的心，在无数的高山外，故人是否还在记忆的流水中，细嗅往年往月的百花？\n> \n> 只是他们在旧地的怀抱中，但有一个人却在海的那一端，潸然泪下……\n> \n> 人都有归属，只是某些人看不到罢了……\n\n**约定记号 $S^c$ 表示字符串 $S$ 循环 $c$ 次拼接而成的字符串。特别地，若 $c = \\infty$，则表示字符串 $S$ 无限循环拼接而成的字符串。**", "description": "异客在一个无限循环的 $\\texttt{01}$ 字符串 $T=S^\\infty$ 上进行着他的旅程，其中 $S$ 的长度为 $n$，$T$ 的第 $i$ 个字符为 $T_i$。\n\n异客的视野有限，只能看到后面 $m$ 个字符。\n\n异客会进行 $q$ 次旅程，每次起点不同，移动次数也不同。\n\n当异客在 $T_i$ 上时：\n\n- 若 $T_{i+1\\dots i+m}$ 中存在 $\\texttt{1}$，则异客下一次会移动到其中最远的一个 $\\texttt{1}$ 上。\n- 否则，异客下一次会移动到下一个字符 $T_{i+1}$ 上。\n\n你需要告诉异客，他会在哪里停下。由于答案会很大，你只需要告诉他对 $10^9+7$ 取模后的结果。\n\n", "inputFormat": "第一行，三个正整数 $n,m,q$。\n\n第二行，一个长度为 $n$ 的 $\\texttt{01}$ 字符串 $S$。\n\n接下来 $q$ 行，每行两个整数 $s, k$，表示起点在 $T_s$，移动 $k$ 次。", "outputFormat": "$q$ 行，每行一个整数，表示停下的位置对 $10^9+7$ 取模后的值。", "hint": "**【样例解释 #1】**\n\n$T$ 的前 $16$ 位为 $\\texttt{1000101110001011}$。\n\n第一次询问，位置移动为 $1 \\to 2 \\to 5$。\n\n第二次询问，位置移动为 $4 \\to 7 \\to 9 \\to 10$。\n\n**【样例 #2】**\n\n见附件中的 `kingdom/kingdom2.in` 与 `kingdom/kingdom2.ans`。\n\n**【样例 #3】**\n\n见附件中的 `kingdom/kingdom3.in` 与 `kingdom/kingdom3.ans`。\n\n该组样例满足测试点 $5$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `kingdom/kingdom4.in` 与 `kingdom/kingdom4.ans`。\n\n该组样例满足测试点 $9\\sim 10$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `kingdom/kingdom5.in` 与 `kingdom/kingdom5.ans`。\n\n该组样例满足测试点 $18\\sim 20$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\le n \\le 2 \\times 10^{5}$，$1 \\le m \\le 10^{18}$，$1 \\le q \\le 2 \\times 10^5$，$1 \\le s \\le 10^{18}$，$0 \\le k \\le 10^{18}$。\n\n|  测试点编号  |    $n \\le$     |  $m \\le$  |    $q \\le$     |  $s \\le$  |    $k \\le$     |    特殊性质    |\n| :----------: | :------------: | :-------: | :------------: | :-------: | :------------: | :------------: |\n|     $1$      | $2\\times 10^5$ |  $10^9$   | $2\\times 10^5$ |  $10^9$   |      $0$       |       无       |\n|     $2$      | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |      $0$       |       无       |\n|  $3\\sim 4$   | $2\\times 10^5$ |  $10^9$   | $2\\times 10^5$ |  $10^9$   |     $10^9$     | $S$ 为 $\\texttt{0}^n$ 或 $\\texttt{1}^n$ |\n|     $5$      | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |   $10^{18}$    | $S$ 为 $\\texttt{0}^n$ 或 $\\texttt{1}^n$ |\n|  $6\\sim 8$   |     $10^2$     |   $ n $   |     $10^2$     |    $n$    |     $10^2$     |       无       |\n|  $9\\sim 10$  | $3\\times 10^3$ |   $ n $   | $3\\times 10^3$ |    $n$    | $3\\times 10^3$ |       无       |\n| $11\\sim 12$  | $2\\times 10^5$ |    $n$    | $2\\times 10^5$ |    $n$    |      $1$       |       无       |\n| $13\\sim 14$  | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |      $1$       |       无       |\n| $15\\sim 17$  | $2\\times 10^5$ |  $10^9$   | $2\\times 10^5$ |  $10^9$   |     $10^9$     |       无       |\n| $18 \\sim 20$ | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |   $10^{18}$    |       无       |\n\n\n\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11268", "type": "P", "difficulty": 5, "samples": [["5 4\n7 5\n4 2\n5 2\n6 4\n6 3\n5 1\n7 4\n5 4\n3 2", "12"], ["3 4\n3 2\n5 1\n5 5\n5 5\n3 3\n4 2\n2 1", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "O2优化", "梦熊比赛", "反悔贪心"], "title": "【MX-S5-T2】买东西题", "background": "原题链接：<https://oier.team/problems/S5B>。\n\n---\n\n**此题题意与关联的现实生活情景略有不同，请认真阅读题目描述。**", "description": "你要买 $n$ 个物品，第 $i$ 个物品原价 $a_i$ 元，折扣价 $b_i$ 元（保证 $b_i \\le a_i$）。\n\n你还有 $m$ 个满减优惠券，第 $j$ 个优惠券形如**原价**满 $w_j$ 减 $v_j$（保证 $v_j \\le w_j$）。\n\n对于第 $i$ 个物品，你可以选择以下三种购买方式之一：\n\n1. 使用**原价** $a_i$ 购买。\n2. 使用**折扣价** $b_i$ 购买。\n3. 选择**一个未使用过的优惠券** $j$，要求满足 $a_i \\ge w_j$，使用优惠券 $j$，以 $a_i - v_j$ 的价格购买。注意每个优惠券 $j$ 只能被**最多一个** $i$ 使用。\n\n求购买所有物品最少用钱。", "inputFormat": "第一行，两个正整数 $n,m$，表示物品数量和优惠券数量。\n\n接下来 $n$ 行，每行两个正整数 $a_i,b_i$，表示第 $i$ 个物品的原价和折扣价。\n\n接下来 $m$ 行，每行两个正整数 $w_j,v_j$，表示第 $j$ 个优惠券是满 $w_j$ 减 $v_j$ 的。", "outputFormat": "仅一行，一个整数，表示最少用钱。", "hint": "**【样例解释 #1】**\n\n因为满足 $w_2\\le a_1$ 即 $7\\le 7$，所以可以使用原价和第 $2$ 个优惠券购买第 $1$ 个物品，花费 $7-4=3$ 元。\n\n因为满足 $w_4\\le a_2$ 即 $3\\le 4$，所以可以使用原价和第 $4$ 个优惠券购买第 $2$ 个物品，花费 $4-2=2$ 元。\n\n使用折扣价购买第 $3$ 个物品，花费 $2$ 元。\n\n使用原价和第 $3$ 个优惠券购买第 $4$ 个物品，花费 $6-4=2$ 元。\n\n使用折扣价购买第 $5$ 个物品，花费 $3$ 元。\n\n共 $3+2+2+2+3=12$ 元。可以证明这是最少用钱方案。\n\n**【样例解释 #2】**\n\n使用原价和第 $2$ 个优惠券购买第 $1$ 个物品。\n\n使用折扣价购买第 $2$ 个物品。\n\n使用原价和第 $1$ 个优惠券购买第 $3$ 个物品。\n\n共 $0+1+0=1$ 元。\n\n**【样例 #3】**\n\n见附件中的 `buy/buy3.in` 与 `buy/buy3.ans`。\n\n该组样例满足测试点 $3$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `buy/buy4.in` 与 `buy/buy4.ans`。\n\n该组样例满足测试点 $5\\sim 6$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `buy/buy5.in` 与 `buy/buy5.ans`。\n\n该组样例满足测试点 $8$ 的约束条件。\n\n**【样例 #6】**\n\n见附件中的 `buy/buy6.in` 与 `buy/buy6.ans`。\n\n该组样例满足测试点 $9\\sim 10$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\le n,m \\le 10^6$，$1 \\le a_i,b_i,w_j,v_j \\le 10^9$，$b_i\\le a_i$，$v_j\\le w_j$。\n\n| 测试点编号 |    $n\\le$    |    $m\\le$    | $a_i,w_j\\le$ | 特殊性质 |\n| :--------: | :-------: | :-------: | :-------: | :------: |\n|    $1$     |  $10$  |  $10$  |  $10$  |    无    |\n|    $2$     | $10^5$ | $10^5$ | $10^4$ |    $a_i=b_i$     |\n|    $3$     | $10^5$ | $10^5$ | $10^9$ |    $a_i=b_i$     |\n|    $4$     | $10^5$ | $10^5$ | $10^4$ |    $\\max_j w_j\\le\\min_i a_i$     |\n| $5\\sim 6$  | $10^5$ | $10^5$ | $10^9$ |    $\\max_j w_j\\le\\min_i a_i$     |\n|    $7$     | $10^3$ | $10^3$ | $10^6$ |    无    |\n|    $8$     | $10^3$ | $10^3$ | $10^9$ |    无    |\n| $9\\sim 10$ | $10^6$ | $10^6$ | $10^9$ |    无    |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S5-T2】买东西题", "background": "原题链接：<https://oier.team/problems/S5B>。\n\n---\n\n**此题题意与关联的现实生活情景略有不同，请认真阅读题目描述。**", "description": "你要买 $n$ 个物品，第 $i$ 个物品原价 $a_i$ 元，折扣价 $b_i$ 元（保证 $b_i \\le a_i$）。\n\n你还有 $m$ 个满减优惠券，第 $j$ 个优惠券形如**原价**满 $w_j$ 减 $v_j$（保证 $v_j \\le w_j$）。\n\n对于第 $i$ 个物品，你可以选择以下三种购买方式之一：\n\n1. 使用**原价** $a_i$ 购买。\n2. 使用**折扣价** $b_i$ 购买。\n3. 选择**一个未使用过的优惠券** $j$，要求满足 $a_i \\ge w_j$，使用优惠券 $j$，以 $a_i - v_j$ 的价格购买。注意每个优惠券 $j$ 只能被**最多一个** $i$ 使用。\n\n求购买所有物品最少用钱。", "inputFormat": "第一行，两个正整数 $n,m$，表示物品数量和优惠券数量。\n\n接下来 $n$ 行，每行两个正整数 $a_i,b_i$，表示第 $i$ 个物品的原价和折扣价。\n\n接下来 $m$ 行，每行两个正整数 $w_j,v_j$，表示第 $j$ 个优惠券是满 $w_j$ 减 $v_j$ 的。", "outputFormat": "仅一行，一个整数，表示最少用钱。", "hint": "**【样例解释 #1】**\n\n因为满足 $w_2\\le a_1$ 即 $7\\le 7$，所以可以使用原价和第 $2$ 个优惠券购买第 $1$ 个物品，花费 $7-4=3$ 元。\n\n因为满足 $w_4\\le a_2$ 即 $3\\le 4$，所以可以使用原价和第 $4$ 个优惠券购买第 $2$ 个物品，花费 $4-2=2$ 元。\n\n使用折扣价购买第 $3$ 个物品，花费 $2$ 元。\n\n使用原价和第 $3$ 个优惠券购买第 $4$ 个物品，花费 $6-4=2$ 元。\n\n使用折扣价购买第 $5$ 个物品，花费 $3$ 元。\n\n共 $3+2+2+2+3=12$ 元。可以证明这是最少用钱方案。\n\n**【样例解释 #2】**\n\n使用原价和第 $2$ 个优惠券购买第 $1$ 个物品。\n\n使用折扣价购买第 $2$ 个物品。\n\n使用原价和第 $1$ 个优惠券购买第 $3$ 个物品。\n\n共 $0+1+0=1$ 元。\n\n**【样例 #3】**\n\n见附件中的 `buy/buy3.in` 与 `buy/buy3.ans`。\n\n该组样例满足测试点 $3$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `buy/buy4.in` 与 `buy/buy4.ans`。\n\n该组样例满足测试点 $5\\sim 6$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `buy/buy5.in` 与 `buy/buy5.ans`。\n\n该组样例满足测试点 $8$ 的约束条件。\n\n**【样例 #6】**\n\n见附件中的 `buy/buy6.in` 与 `buy/buy6.ans`。\n\n该组样例满足测试点 $9\\sim 10$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\le n,m \\le 10^6$，$1 \\le a_i,b_i,w_j,v_j \\le 10^9$，$b_i\\le a_i$，$v_j\\le w_j$。\n\n| 测试点编号 |    $n\\le$    |    $m\\le$    | $a_i,w_j\\le$ | 特殊性质 |\n| :--------: | :-------: | :-------: | :-------: | :------: |\n|    $1$     |  $10$  |  $10$  |  $10$  |    无    |\n|    $2$     | $10^5$ | $10^5$ | $10^4$ |    $a_i=b_i$     |\n|    $3$     | $10^5$ | $10^5$ | $10^9$ |    $a_i=b_i$     |\n|    $4$     | $10^5$ | $10^5$ | $10^4$ |    $\\max_j w_j\\le\\min_i a_i$     |\n| $5\\sim 6$  | $10^5$ | $10^5$ | $10^9$ |    $\\max_j w_j\\le\\min_i a_i$     |\n|    $7$     | $10^3$ | $10^3$ | $10^6$ |    无    |\n|    $8$     | $10^3$ | $10^3$ | $10^9$ |    无    |\n| $9\\sim 10$ | $10^6$ | $10^6$ | $10^9$ |    无    |", "locale": "zh-CN"}}}
{"pid": "P11269", "type": "P", "difficulty": 6, "samples": [["7\n110121\n120202\n1202\n1121212\n000\n010101110\n0112210112\n", "1 31589928355420248\n1 31587559229276557\n2 177728893\n2 15233797274127957404\n0 13332\n1 4098728445451629840\n1 892964726593242284\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "梦熊比赛"], "title": "【MX-S5-T3】IMAWANOKIWA (Construction ver.)", "background": "原题链接：<https://oier.team/problems/S5C>。\n\n---\n\n[IMAWANOKIWA - いよわ / 初音ミク](https://www.bilibili.com/video/BV1iE411Y7bf)\n\n> あなたの未来が見たかった。", "description": "给你一个初始长度为 $n$，**只包含** $\\boldsymbol{0, 1, 2}$ 的序列 $a_{1 \\sim n}$，你可以执行以下操作：\n\n- 选择相邻的两个位置 $j$ 和 $j + 1$，删去 $a_j, a_{j + 1}$，并在原位置插入 $\\mathrm{popc}(a_j + a_{j + 1})$，后半部分序列因此向前移动一位。其中，$\\mathrm{popc}(x)$ 表示 $x$ 在二进制表示下 $1$ 的个数。\n\n显然每次操作后序列长度都会减少 $1$，所以执行 $n - 1$ 次操作后，这个序列会恰好剩下一个数。\n\n记在所有可能的 $n-1$ 次操作之后剩下的数的最小值为 $t$，定义一个好的操作序列 $p$ 为一个长度为 $n - 1$ 的正整数序列，其中 $p_i$ 表示第 $i$ 次操作所选择的 $j$（显然 $1 \\le p_i \\le n - i$），且满足按照这个操作序列操作之后剩下的数为 $t$，你需要求出 $t$ 与**字典序最小**的好的操作序列。\n\n**如果你不会求出字典序最小的好的操作序列也可以获得部分分数**，详见【评分方式】。\n\n为了避免输出量过大，你只需要输出字典序最小的好的操作序列按照某种哈希方式得到的哈希值即可，详见【输出格式】。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示数据组数。接下来，对于每组数据：\n- 仅一行，一个长度为 $n$ 的字符串，其中第 $i$ 个字符表示 $a_i$。", "outputFormat": "对于每组测试数据：\n- 输出一行，两个自然数 $t, \\mathrm{Hash}(p')$，其中\n  - 第一个数表示剩下的数的最小值；\n  - 第二个数表示字典序最小的好的操作序列 $p'$ 的哈希值 $\\mathrm{Hash}(p')$，定义见下。\n  - 如果你输出的**第二个数不正确，也可以获得部分分数**，本题将使用**自定义校验器**做到这一点，详见【评分方式】。\n\n> 令 $B = 13331$，$M = 2^{64}$，我们定义一个正整数序列 $c_{1 \\sim l}$ 的哈希值 $\\mathrm{Hash}(c)$ 为 $\\sum_{i = 1}^l B^{l - i}c_i$ 对 $M$ 取模的结果。\n>\n> 提示：代码实现时可以使用 C++ 的 `unsigned long long` 类型的自然溢出来实现对 $2^{64}$ 取模的效果。", "hint": "**【样例解释 #1】**\n\n对于第一组数据，字典序最小的好的操作序列 $p$ 为 $[1, 3, 2, 1, 1]$，按照该操作序列操作时，$a$ 序列的变化过程如下：\n\n$$\n[1, 1, 0, 1, 2, 1]\\\\\n[1, 0, 1, 2, 1]\\\\\n[1, 0, 2, 1]\\\\\n[1, 1, 1]\\\\\n[1, 1]\\\\\n[1]\n$$\n\n所以你应输出的哈希值为 $\\mathrm{Hash}([1, 3, 2, 1, 1]) = (1 \\times 13331^4 + 3 \\times 13331^3 + 2 \\times 13331^2 + 1 \\times 13331^1 + 1 \\times 13331^0) \\bmod 2^{64} = 31589928355420248$。\n\n对于第二组数据，字典序最小的好的操作序列 $p$ 为 $[1, 2, 2, 1, 1]$，按照该操作序列操作时，$a$ 序列的变化过程如下：\n\n$$\n[1, 2, 0, 2, 0, 2]\\\\\n[2, 0, 2, 0, 2]\\\\\n[2, 1, 0, 2]\\\\\n[2, 1, 2]\\\\\n[2, 2]\\\\\n[1]\n$$\n\n**【样例 #2】**\n\n见附件中的 `popc/popc2.in` 与 `popc/popc2.ans`。\n\n该组样例共有十组测试数据，所有测试数据均满足 $n = 10^5$，其中测试数据 $1 \\sim 5$ 满足序列 $a$ 中不存在 $0$，$6 \\sim 10$ 满足序列 $a$ 中不存在 $1$。\n\n**【样例 #3】**\n\n见附件中的 `popc/popc3.in` 与 `popc/popc3.ans`。\n\n该组样例共有四十组测试数据，其中测试数据 $1 \\sim 10$ 满足 $n = 300$，$11 \\sim 20$ 满足 $n = 3000$，$21 \\sim 30$ 满足 $n = 3 \\times 10^4$，$31 \\sim 40$ 满足 $n = 10^5$。\n\n**【评分方式】**\n\n本题将使用**自定义校验器**计算你获得的部分分数。\n\n对于一个测试点，如果你存在数据输出的最小值不正确，那么无法获得该测试点的分数。\n\n对于一个测试点，如果你每组数据输出的最小值正确，但是存在数据求出的字典序最小的好的操作序列的哈希值不正确，那么可以获得该测试点 $25\\%$ 的分数（即 $1$ 分，见【数据范围】）。**注意你仍需输出任意一个 $\\boldsymbol{[0, 2^{64})}$ 内的整数表示你的方案的哈希值。**\n\n对于一个测试点，如果你每组数据输出的最小值正确，且求出的字典序最小的好的操作序列的哈希值正确，那么可以获得该测试点的全部分数。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\le T \\le 200$，$2 \\le n \\le 10^5$，序列 $a$ **只包含** $\\boldsymbol{0, 1, 2}$。\n\n| 测试点编号 | $T\\le$ | $n\\le$ | 特殊性质 |\n| :-: | :-: | :-: | :-: |\n| $1 \\sim 3$ | $10$ | $10$ | 无 |\n| $4 \\sim 6$ | $10$ | $300$ | 无 |\n| $7 \\sim 9$ | $10$ | $3000$ | 无 |\n| $10 \\sim 12$ | $10$ | $3 \\times 10^4$ | 无 |\n| $13 \\sim 15$ | $10$ | $10^5$ | 序列 $a$ 中不存在 $0$ |\n| $16 \\sim 19$ | $10$ | $10^5$ | 序列 $a$ 中不存在 $1$ |\n| $20 \\sim 21$ | $10$ | $10^5$ | 无 |\n| $22 \\sim 23$ | $50$ | $10^5$ | 无 |\n| $24 \\sim 25$ | $200$ | $10^5$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S5-T3】IMAWANOKIWA (Construction ver.)", "background": "原题链接：<https://oier.team/problems/S5C>。\n\n---\n\n[IMAWANOKIWA - いよわ / 初音ミク](https://www.bilibili.com/video/BV1iE411Y7bf)\n\n> あなたの未来が見たかった。", "description": "给你一个初始长度为 $n$，**只包含** $\\boldsymbol{0, 1, 2}$ 的序列 $a_{1 \\sim n}$，你可以执行以下操作：\n\n- 选择相邻的两个位置 $j$ 和 $j + 1$，删去 $a_j, a_{j + 1}$，并在原位置插入 $\\mathrm{popc}(a_j + a_{j + 1})$，后半部分序列因此向前移动一位。其中，$\\mathrm{popc}(x)$ 表示 $x$ 在二进制表示下 $1$ 的个数。\n\n显然每次操作后序列长度都会减少 $1$，所以执行 $n - 1$ 次操作后，这个序列会恰好剩下一个数。\n\n记在所有可能的 $n-1$ 次操作之后剩下的数的最小值为 $t$，定义一个好的操作序列 $p$ 为一个长度为 $n - 1$ 的正整数序列，其中 $p_i$ 表示第 $i$ 次操作所选择的 $j$（显然 $1 \\le p_i \\le n - i$），且满足按照这个操作序列操作之后剩下的数为 $t$，你需要求出 $t$ 与**字典序最小**的好的操作序列。\n\n**如果你不会求出字典序最小的好的操作序列也可以获得部分分数**，详见【评分方式】。\n\n为了避免输出量过大，你只需要输出字典序最小的好的操作序列按照某种哈希方式得到的哈希值即可，详见【输出格式】。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示数据组数。接下来，对于每组数据：\n- 仅一行，一个长度为 $n$ 的字符串，其中第 $i$ 个字符表示 $a_i$。", "outputFormat": "对于每组测试数据：\n- 输出一行，两个自然数 $t, \\mathrm{Hash}(p')$，其中\n  - 第一个数表示剩下的数的最小值；\n  - 第二个数表示字典序最小的好的操作序列 $p'$ 的哈希值 $\\mathrm{Hash}(p')$，定义见下。\n  - 如果你输出的**第二个数不正确，也可以获得部分分数**，本题将使用**自定义校验器**做到这一点，详见【评分方式】。\n\n> 令 $B = 13331$，$M = 2^{64}$，我们定义一个正整数序列 $c_{1 \\sim l}$ 的哈希值 $\\mathrm{Hash}(c)$ 为 $\\sum_{i = 1}^l B^{l - i}c_i$ 对 $M$ 取模的结果。\n>\n> 提示：代码实现时可以使用 C++ 的 `unsigned long long` 类型的自然溢出来实现对 $2^{64}$ 取模的效果。", "hint": "**【样例解释 #1】**\n\n对于第一组数据，字典序最小的好的操作序列 $p$ 为 $[1, 3, 2, 1, 1]$，按照该操作序列操作时，$a$ 序列的变化过程如下：\n\n$$\n[1, 1, 0, 1, 2, 1]\\\\\n[1, 0, 1, 2, 1]\\\\\n[1, 0, 2, 1]\\\\\n[1, 1, 1]\\\\\n[1, 1]\\\\\n[1]\n$$\n\n所以你应输出的哈希值为 $\\mathrm{Hash}([1, 3, 2, 1, 1]) = (1 \\times 13331^4 + 3 \\times 13331^3 + 2 \\times 13331^2 + 1 \\times 13331^1 + 1 \\times 13331^0) \\bmod 2^{64} = 31589928355420248$。\n\n对于第二组数据，字典序最小的好的操作序列 $p$ 为 $[1, 2, 2, 1, 1]$，按照该操作序列操作时，$a$ 序列的变化过程如下：\n\n$$\n[1, 2, 0, 2, 0, 2]\\\\\n[2, 0, 2, 0, 2]\\\\\n[2, 1, 0, 2]\\\\\n[2, 1, 2]\\\\\n[2, 2]\\\\\n[1]\n$$\n\n**【样例 #2】**\n\n见附件中的 `popc/popc2.in` 与 `popc/popc2.ans`。\n\n该组样例共有十组测试数据，所有测试数据均满足 $n = 10^5$，其中测试数据 $1 \\sim 5$ 满足序列 $a$ 中不存在 $0$，$6 \\sim 10$ 满足序列 $a$ 中不存在 $1$。\n\n**【样例 #3】**\n\n见附件中的 `popc/popc3.in` 与 `popc/popc3.ans`。\n\n该组样例共有四十组测试数据，其中测试数据 $1 \\sim 10$ 满足 $n = 300$，$11 \\sim 20$ 满足 $n = 3000$，$21 \\sim 30$ 满足 $n = 3 \\times 10^4$，$31 \\sim 40$ 满足 $n = 10^5$。\n\n**【评分方式】**\n\n本题将使用**自定义校验器**计算你获得的部分分数。\n\n对于一个测试点，如果你存在数据输出的最小值不正确，那么无法获得该测试点的分数。\n\n对于一个测试点，如果你每组数据输出的最小值正确，但是存在数据求出的字典序最小的好的操作序列的哈希值不正确，那么可以获得该测试点 $25\\%$ 的分数（即 $1$ 分，见【数据范围】）。**注意你仍需输出任意一个 $\\boldsymbol{[0, 2^{64})}$ 内的整数表示你的方案的哈希值。**\n\n对于一个测试点，如果你每组数据输出的最小值正确，且求出的字典序最小的好的操作序列的哈希值正确，那么可以获得该测试点的全部分数。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\le T \\le 200$，$2 \\le n \\le 10^5$，序列 $a$ **只包含** $\\boldsymbol{0, 1, 2}$。\n\n| 测试点编号 | $T\\le$ | $n\\le$ | 特殊性质 |\n| :-: | :-: | :-: | :-: |\n| $1 \\sim 3$ | $10$ | $10$ | 无 |\n| $4 \\sim 6$ | $10$ | $300$ | 无 |\n| $7 \\sim 9$ | $10$ | $3000$ | 无 |\n| $10 \\sim 12$ | $10$ | $3 \\times 10^4$ | 无 |\n| $13 \\sim 15$ | $10$ | $10^5$ | 序列 $a$ 中不存在 $0$ |\n| $16 \\sim 19$ | $10$ | $10^5$ | 序列 $a$ 中不存在 $1$ |\n| $20 \\sim 21$ | $10$ | $10^5$ | 无 |\n| $22 \\sim 23$ | $50$ | $10^5$ | 无 |\n| $24 \\sim 25$ | $200$ | $10^5$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11270", "type": "P", "difficulty": 7, "samples": [["0\n1 2 6\n(\n()\n())", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "容斥原理", "根号分治", "梦熊比赛"], "title": "【MX-S5-T4】魔法少女们", "background": "原题链接：<https://oier.team/problems/S5D>。\n\n---\n\n> 祈祷着今后的你的人生，永远都有幸福的“魔法”相伴。\n\n**以下是本题所用记号的约定。**\n\n字符串下标均从 $1$ 开始。\n\n$|S|$ 表示字符串 $S$ 的长度。\n\n$S_i$ 表示字符串 $S$ 的第 $i$ 个字符。\n\n记字符串 $S$ 为 $T$ 的前缀，当且仅当：\n\n- $|S|\\leq |T|$，\n- $\\forall i\\in[1,|S|]$，$S_i=T_i$。\n\n记字符串 $S$ 为 $T$ 的后缀，当且仅当：\n\n- $|S|\\leq |T|$，\n- $\\forall i\\in[1,|S|]$，$S_{|S|-i+1}=T_{|T|-i+1}$。\n\n合法括号序列的定义如下：\n\n- 空串是合法括号序列。\n- 若 $A$ 为合法括号序列，则 $(A)$ 为合法括号序列。\n- 若 $A,B$ 为合法括号序列，则 $AB$ 为合法括号序列。", "description": "千和有 $n$ 个**括号序列**，分别是 $S_1,S_2,S_3,\\dots,S_n$。\n\n小黑有 $m$ 个**括号序列**，分别是 $T_1,T_2,T_3,\\dots,T_m$。\n\n对一个括号序列 $A$，$f(A)$ 为满足以下条件的正整数对 $(i,j)$ 对数：\n\n- $i\\in[1,n]$，$j\\in [1,m]$；\n- $S_i$ 是 $A$ 的**前缀**且 $T_j$ 是 $A$ 的**后缀**。\n\n她们想知道对于所有长度为偶数 $k$ 的**合法括号序列** $S$，$f(S)$ 的和。答案对 $10^9+7$ 取模。", "inputFormat": "第一行，一个正整数 $c$，表示测试点编号。特殊地，对样例，$c=0$。\n\n第二行，三个正整数 $n,m,k$，其中 $k$ 为偶数。\n\n接下来 $n$ 行，每行一个字符串 $S_i$。\n\n接下来 $m$ 行，每行一个字符串 $T_j$。", "outputFormat": "仅一行，一个自然数，表示答案对 $10^9+7$ 取模后的值。", "hint": "**【样例解释 #1】**\n\n长度为 $6$ 的合法括号序列有 `()()()`、`()(())`、`(())()`、`(()())`、`((()))`，分别记作 $S_1,S_2,S_3,S_4,S_5$，答案为 $f(S_1)+f(S_2)+f(S_3)+f(S_4)+f(S_5)=1+1+1+1+0=4$。\n\n**【样例 #2】**\n\n见附件中的 `bracket/bracket2.in` 与 `bracket/bracket2.ans`。\n\n该组样例满足测试点 $1\\sim 2$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `bracket/bracket3.in` 与 `bracket/bracket3.ans`。\n\n该组样例满足测试点 $3\\sim 4$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `bracket/bracket4.in` 与 `bracket/bracket4.ans`。\n\n该组样例满足测试点 $14\\sim 15$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `bracket/bracket5.in` 与 `bracket/bracket5.ans`。\n\n该组样例满足测试点 $20\\sim 21$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证 $1\\leq n,m\\leq 2\\times 10^5$，$1\\leq \\vert S_i\\vert,\\vert T_j\\vert\\leq \\min(k,5\\times 10^5)$，$1\\leq \\sum \\vert S_i\\vert,\\sum \\vert T_j\\vert\\leq 10^7$，$2\\leq k\\leq 10^6$，$k$ 为偶数。\n\n| 测试点编号 | $n,m\\leq$      | $\\vert S_i\\vert,\\vert T_j\\vert\\leq$ | $\\sum \\vert S_i\\vert,\\sum \\vert T_j\\vert\\leq$ | $k\\leq$       | 特殊性质 |\n| :----------: | :--------------: | :-----------------------------------: | :---------------------------------------------: | :-------------: | :--------: |\n| $1\\sim2$   | $10$           | $10$                                | $100$                                         | $15$          | 无       |\n| $3\\sim4$   | $50$           | $100$                               | $5\\times10^3$                                 | $100$         | 无       |\n| $5\\sim8$   | $250$          | $5\\times10^3$                       | $5\\times10^5$                                 | $5\\times10^3$ | 无       |\n| $9\\sim11$  | $5\\times 10^3$ | $10^5$                              | $5\\times10^5$                                 | $2\\times10^5$ | 无       |\n| $12\\sim13$ | $5\\times10^4$  | $10^5$                              | $5\\times10^5$                                 | $2\\times10^5$ | A        |\n| $14\\sim15$ | $5\\times10^4$  | $10^5$                              | $5\\times10^5$                                 | $2\\times10^5$ | B        |\n| $16\\sim17$ | $10^5$         | $2\\times10^3$                       | $10^6$                                        | $2\\times10^5$ | C        |\n| $18\\sim19$ | $10^5$         | $10^5$                              | $10^6$                                        | $2\\times10^5$ | C        |\n| $20\\sim21$ | $10^5$         | $10^5$                              | $10^6$                                        | $2\\times10^5$ | 无       |\n| $22\\sim23$ | $2\\times10^5$  | $5\\times 10^5$                      | $10^7$                                        | $10^6$        | C        |\n| $24\\sim25$ | $2\\times10^5$  | $5\\times 10^5$                      | $10^7$                                        | $10^6$        | 无       |\n\n* 特殊性质 A：$k<\\min\\vert S_i\\vert+\\min\\vert T_j\\vert$；\n* 特殊性质 B：保证 $S_i,T_j$ 是合法的括号序列；\n* 特殊性质 C：$k\\geq\\max\\vert S_i\\vert+\\max\\vert T_j\\vert$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S5-T4】魔法少女们", "background": "原题链接：<https://oier.team/problems/S5D>。\n\n---\n\n> 祈祷着今后的你的人生，永远都有幸福的“魔法”相伴。\n\n**以下是本题所用记号的约定。**\n\n字符串下标均从 $1$ 开始。\n\n$|S|$ 表示字符串 $S$ 的长度。\n\n$S_i$ 表示字符串 $S$ 的第 $i$ 个字符。\n\n记字符串 $S$ 为 $T$ 的前缀，当且仅当：\n\n- $|S|\\leq |T|$，\n- $\\forall i\\in[1,|S|]$，$S_i=T_i$。\n\n记字符串 $S$ 为 $T$ 的后缀，当且仅当：\n\n- $|S|\\leq |T|$，\n- $\\forall i\\in[1,|S|]$，$S_{|S|-i+1}=T_{|T|-i+1}$。\n\n合法括号序列的定义如下：\n\n- 空串是合法括号序列。\n- 若 $A$ 为合法括号序列，则 $(A)$ 为合法括号序列。\n- 若 $A,B$ 为合法括号序列，则 $AB$ 为合法括号序列。", "description": "千和有 $n$ 个**括号序列**，分别是 $S_1,S_2,S_3,\\dots,S_n$。\n\n小黑有 $m$ 个**括号序列**，分别是 $T_1,T_2,T_3,\\dots,T_m$。\n\n对一个括号序列 $A$，$f(A)$ 为满足以下条件的正整数对 $(i,j)$ 对数：\n\n- $i\\in[1,n]$，$j\\in [1,m]$；\n- $S_i$ 是 $A$ 的**前缀**且 $T_j$ 是 $A$ 的**后缀**。\n\n她们想知道对于所有长度为偶数 $k$ 的**合法括号序列** $S$，$f(S)$ 的和。答案对 $10^9+7$ 取模。", "inputFormat": "第一行，一个正整数 $c$，表示测试点编号。特殊地，对样例，$c=0$。\n\n第二行，三个正整数 $n,m,k$，其中 $k$ 为偶数。\n\n接下来 $n$ 行，每行一个字符串 $S_i$。\n\n接下来 $m$ 行，每行一个字符串 $T_j$。", "outputFormat": "仅一行，一个自然数，表示答案对 $10^9+7$ 取模后的值。", "hint": "**【样例解释 #1】**\n\n长度为 $6$ 的合法括号序列有 `()()()`、`()(())`、`(())()`、`(()())`、`((()))`，分别记作 $S_1,S_2,S_3,S_4,S_5$，答案为 $f(S_1)+f(S_2)+f(S_3)+f(S_4)+f(S_5)=1+1+1+1+0=4$。\n\n**【样例 #2】**\n\n见附件中的 `bracket/bracket2.in` 与 `bracket/bracket2.ans`。\n\n该组样例满足测试点 $1\\sim 2$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `bracket/bracket3.in` 与 `bracket/bracket3.ans`。\n\n该组样例满足测试点 $3\\sim 4$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `bracket/bracket4.in` 与 `bracket/bracket4.ans`。\n\n该组样例满足测试点 $14\\sim 15$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `bracket/bracket5.in` 与 `bracket/bracket5.ans`。\n\n该组样例满足测试点 $20\\sim 21$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证 $1\\leq n,m\\leq 2\\times 10^5$，$1\\leq \\vert S_i\\vert,\\vert T_j\\vert\\leq \\min(k,5\\times 10^5)$，$1\\leq \\sum \\vert S_i\\vert,\\sum \\vert T_j\\vert\\leq 10^7$，$2\\leq k\\leq 10^6$，$k$ 为偶数。\n\n| 测试点编号 | $n,m\\leq$      | $\\vert S_i\\vert,\\vert T_j\\vert\\leq$ | $\\sum \\vert S_i\\vert,\\sum \\vert T_j\\vert\\leq$ | $k\\leq$       | 特殊性质 |\n| :----------: | :--------------: | :-----------------------------------: | :---------------------------------------------: | :-------------: | :--------: |\n| $1\\sim2$   | $10$           | $10$                                | $100$                                         | $15$          | 无       |\n| $3\\sim4$   | $50$           | $100$                               | $5\\times10^3$                                 | $100$         | 无       |\n| $5\\sim8$   | $250$          | $5\\times10^3$                       | $5\\times10^5$                                 | $5\\times10^3$ | 无       |\n| $9\\sim11$  | $5\\times 10^3$ | $10^5$                              | $5\\times10^5$                                 | $2\\times10^5$ | 无       |\n| $12\\sim13$ | $5\\times10^4$  | $10^5$                              | $5\\times10^5$                                 | $2\\times10^5$ | A        |\n| $14\\sim15$ | $5\\times10^4$  | $10^5$                              | $5\\times10^5$                                 | $2\\times10^5$ | B        |\n| $16\\sim17$ | $10^5$         | $2\\times10^3$                       | $10^6$                                        | $2\\times10^5$ | C        |\n| $18\\sim19$ | $10^5$         | $10^5$                              | $10^6$                                        | $2\\times10^5$ | C        |\n| $20\\sim21$ | $10^5$         | $10^5$                              | $10^6$                                        | $2\\times10^5$ | 无       |\n| $22\\sim23$ | $2\\times10^5$  | $5\\times 10^5$                      | $10^7$                                        | $10^6$        | C        |\n| $24\\sim25$ | $2\\times10^5$  | $5\\times 10^5$                      | $10^7$                                        | $10^6$        | 无       |\n\n* 特殊性质 A：$k<\\min\\vert S_i\\vert+\\min\\vert T_j\\vert$；\n* 特殊性质 B：保证 $S_i,T_j$ 是合法的括号序列；\n* 特殊性质 C：$k\\geq\\max\\vert S_i\\vert+\\max\\vert T_j\\vert$。\n\n", "locale": "zh-CN"}}}
{"pid": "P11271", "type": "P", "difficulty": 1, "samples": [["10 5 3 4", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "洛谷月赛"], "title": "「Diligent-OI R1 A」DlgtPattern", "background": "", "description": "现有一个水杯放在一个不透明的盒子中。水杯的底面可以看成一个圆形。盒子可以看成一个长方体，其厚度忽略不计。\n\n现将盒子的底面放在一个平面直角坐标系中，它的四个顶点分别位于 $(0,0)$，$(x,0)$，$(0,y)$ 和 $(x,y)$。\n\n你只知道水杯底面的圆心位于 $(p,q)$。那水杯底面的半径最大可以是多少呢？", "inputFormat": "只输入一行，四个整数 $x,y,p,q$。", "outputFormat": "只输出一个数，水杯底面半径的最大值。", "hint": "#### 样例 #1 解释\n\n水杯半径最大的情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gpbwxjuj.png)\n\n#### 数据范围\n\n对于 $100\\%$ 数据，$0<p<x\\le100$，$0<q<y\\le100$。\n\n| 测试点编号 | 特殊性质 |\n| :----------: | :----------: |\n| $1\\sim 4$ | AB |\n| $5\\sim 6$ | B |\n| $7\\sim 10$ | 无 |\n\n特殊性质 A：$x=y$。\n\n特殊性质 B：$x=2p,y=2q$。即水杯底面的圆心在盒子底面的几何中心。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Diligent-OI R1 A」DlgtPattern", "background": "", "description": "现有一个水杯放在一个不透明的盒子中。水杯的底面可以看成一个圆形。盒子可以看成一个长方体，其厚度忽略不计。\n\n现将盒子的底面放在一个平面直角坐标系中，它的四个顶点分别位于 $(0,0)$，$(x,0)$，$(0,y)$ 和 $(x,y)$。\n\n你只知道水杯底面的圆心位于 $(p,q)$。那水杯底面的半径最大可以是多少呢？", "inputFormat": "只输入一行，四个整数 $x,y,p,q$。", "outputFormat": "只输出一个数，水杯底面半径的最大值。", "hint": "#### 样例 #1 解释\n\n水杯半径最大的情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gpbwxjuj.png)\n\n#### 数据范围\n\n对于 $100\\%$ 数据，$0<p<x\\le100$，$0<q<y\\le100$。\n\n| 测试点编号 | 特殊性质 |\n| :----------: | :----------: |\n| $1\\sim 4$ | AB |\n| $5\\sim 6$ | B |\n| $7\\sim 10$ | 无 |\n\n特殊性质 A：$x=y$。\n\n特殊性质 B：$x=2p,y=2q$。即水杯底面的圆心在盒子底面的几何中心。", "locale": "zh-CN"}}}
{"pid": "P11272", "type": "P", "difficulty": 2, "samples": [["5 4\n0 0 1 0 1\n1 3 2\n2 4 0\n3 5 2\n1 1 1", "1\n1\n0 \n-1"], ["8 3\n1 1 1 1 1 1 1 1\n2 6 2\n5 8 2\n1 8 7", "3\n2\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "前缀和", "洛谷月赛"], "title": "「Diligent-OI R1 B」DlgtArray", "background": "", "description": "现给定一个长为 $n$ 的序列 $a_1\\sim a_n$，其中 $a_i\\in\\{0,1\\}$。\n\n$q$ 次询问，每次给定 $l,r,k$，要你更改一些位置上的数值（只能改为 $0$ 或 $1$）使得 $\\sum\\limits_{i=l}^ra_i=k+\\prod\\limits_{i=l}^ra_i$。也就是说要让 $a_l\\sim a_r$ 的和要恰好等于 $a_l\\sim a_r$ 的乘积再加上 $k$。你需要求出最少的修改次数。如果无解，输出 $-1$。\n\n**请注意每次的更改不会对后续询问产生影响。**", "inputFormat": "第一行输入 $n,q$。\n\n接下来一行 $n$ 个整数 $a_1\\sim a_n$。\n\n接下来 $q$ 行，每行三个整数 $l,r,k$。", "outputFormat": "输出 $q$ 行，每行一个整数表示最少的修改次数。如果无解请输出 `-1`。", "hint": "#### 样例 #1 解释\n\n$a=\\{0,0,1,0,1\\}$。\n\n第一个询问只需将 $a_1$ 或 $a_2$ 改为 $1$。此时和为 $2$，积为 $0$。\n\n第二个询问只需将 $a_3$ 改为 $0$。此时和为 $0$，积为 $0$。\n\n第三个询问不需进行更改，和为 $2$，积为 $0$。\n\n第四个询问，因为只有一个数，所以和与积相等，所以不可能做到。\n\n#### 数据范围\n\n对于 $100\\%$ 数据，$1\\le n,q\\le10^6$，$0\\le k\\le10^6$，$1\\le l\\le r\\le n$，$a_i\\in\\{0,1\\}$。\n\n| Subtask 编号 | $n,q\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | 无 | $10$ |\n| $1$ | $10^3$ | A | $7$ |\n| $2$ | $10^3$ | BC | $7$ |\n| $3$ | $10^3$ | B | $13$ |\n| $4$ | $10^3$ | C | $13$ |\n| $5$ | $10^3$ | 无 | $20$ |\n| $6$ | $10^5$ | B | $9$ |\n| $7$ | $10^5$ | C | $9$ |\n| $8$ | $10^6$ | 无 | $12$ |\n\n特殊性质 A：$k=n$。\n\n特殊性质 B：$\\forall 1\\le i\\le n,a_i=0$。\n\n特殊性质 C：$k=0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Diligent-OI R1 B」DlgtArray", "background": "", "description": "现给定一个长为 $n$ 的序列 $a_1\\sim a_n$，其中 $a_i\\in\\{0,1\\}$。\n\n$q$ 次询问，每次给定 $l,r,k$，要你更改一些位置上的数值（只能改为 $0$ 或 $1$）使得 $\\sum\\limits_{i=l}^ra_i=k+\\prod\\limits_{i=l}^ra_i$。也就是说要让 $a_l\\sim a_r$ 的和要恰好等于 $a_l\\sim a_r$ 的乘积再加上 $k$。你需要求出最少的修改次数。如果无解，输出 $-1$。\n\n**请注意每次的更改不会对后续询问产生影响。**", "inputFormat": "第一行输入 $n,q$。\n\n接下来一行 $n$ 个整数 $a_1\\sim a_n$。\n\n接下来 $q$ 行，每行三个整数 $l,r,k$。", "outputFormat": "输出 $q$ 行，每行一个整数表示最少的修改次数。如果无解请输出 `-1`。", "hint": "#### 样例 #1 解释\n\n$a=\\{0,0,1,0,1\\}$。\n\n第一个询问只需将 $a_1$ 或 $a_2$ 改为 $1$。此时和为 $2$，积为 $0$。\n\n第二个询问只需将 $a_3$ 改为 $0$。此时和为 $0$，积为 $0$。\n\n第三个询问不需进行更改，和为 $2$，积为 $0$。\n\n第四个询问，因为只有一个数，所以和与积相等，所以不可能做到。\n\n#### 数据范围\n\n对于 $100\\%$ 数据，$1\\le n,q\\le10^6$，$0\\le k\\le10^6$，$1\\le l\\le r\\le n$，$a_i\\in\\{0,1\\}$。\n\n| Subtask 编号 | $n,q\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | 无 | $10$ |\n| $1$ | $10^3$ | A | $7$ |\n| $2$ | $10^3$ | BC | $7$ |\n| $3$ | $10^3$ | B | $13$ |\n| $4$ | $10^3$ | C | $13$ |\n| $5$ | $10^3$ | 无 | $20$ |\n| $6$ | $10^5$ | B | $9$ |\n| $7$ | $10^5$ | C | $9$ |\n| $8$ | $10^6$ | 无 | $12$ |\n\n特殊性质 A：$k=n$。\n\n特殊性质 B：$\\forall 1\\le i\\le n,a_i=0$。\n\n特殊性质 C：$k=0$。", "locale": "zh-CN"}}}
{"pid": "P11273", "type": "P", "difficulty": 3, "samples": [["3 1\n1 3 4", "1 1 0"], ["6 2\n1 2 5 6 7 8", "4 3 3 2 1 0"], ["8 10\n1 14 5 14 19 19 8 10", "5 1 4 1 0 0 3 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "洛谷原创", "排序", "洛谷月赛"], "title": "「Diligent-OI R1 C」DlgtRank", "background": "", "description": "给你一个长为 $n$ 的序列 $a_1\\sim a_n$。这里定义 $a_i$ 的**排名**为 $a$ 中**严格大于** $a_i$ 的数的个数 $+1$。\n\n现有一些操作来更改 $a$ 中的元素。所有操作之前会事先给你一个常量 $k$。每次操作前，定义 $a_i$ 是**可移动**的，当且仅当**仅将 $a_i$ 的值加上 $k$，其他值不变**后，$a_i$ 的排名不变。否则 $a_i$ 在这次操作是不可移动的。然后这次操作为：将序列中所有可移动的数加上 $k$。\n\n可以证明经过若干次操作后，$a$ 中所有值都会变成可移动的，并且第一次达到这种状态时，后面的操作也会是这种状态。也就是说，无论做多少次操作，$a$ 中每个值为**不可移动**状态的次数是有限的。\n\n现在询问，做足够多次这个操作后，$a$ 中每个值为**不可移动**状态的次数是多少。", "inputFormat": "第一行输入两个整数 $n,k$。\n\n接下来一行，输入 $n$ 个整数 $a_1\\sim a_n$ 表示初始时的 $a$ 数列。", "outputFormat": "输出一行 $n$ 个整数。第 $i$ 个整数表示 $a_i$ 在操作过程中为**不可移动**状态的次数。", "hint": "#### 样例 #1 解释\n\n初始的 $a_1=1,a_2=3,a_3=4$。\n\n操作一次后 $a_1=2,a_2=3,a_3=5$。$a_2$ 不可移动，是因为如果仅将 $a_2$ 加上 $1$，它的排名会由 $2$ 变成 $1$。\n\n操作两次后 $a_1=2,a_2=4,a_3=6$。$a_1$ 不可移动，是因为如果仅将 $a_1$ 加上 $1$，它的排名会由 $3$ 变成 $2$。\n\n操作三次后 $a_1=3,a_2=5,a_3=7$。这次操作所有值都是可移动的了。可以证明再操作任意多次也不会再出现不可移动的状态了。\n\n因此过程中 $a_1$ 有一次不可移动，$a_2$ 有一次不可移动，$a_3$ 没有不可移动的时候。\n\n#### 数据范围与约定\n\n对于 $100\\%$ 数据，$1\\le n\\le2\\times10^5$，$1\\le k,a_i\\le10^9$。\n\n| Subtask 编号 | $n\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $1$ | ABC | $4$ |\n| $1$ | $100$ | C | $14$ |\n| $2$ | $100$ | 无 | $13$ |\n| $3$ | $3000$ | C | $18$ |\n| $4$ | $3000$ | 无 | $16$ |\n| $5$ | $2\\times10^5$ | A | $6$ |\n| $6$ | $2\\times10^5$ | BC | $8$ |\n| $7$ | $2\\times10^5$ | C | $7$ |\n| $8$ | $2\\times10^5$ | 无 | $14$ |\n\n特殊性质 A：所有的 $a_i$ 都相等。\n\n特殊性质 B：对于任意的 $i<n$ 满足 $a_{i+1}=a_i+k$。\n\n特殊性质 C：对于任意的 $i\\neq j$ 满足 $a_i\\neq a_j$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Diligent-OI R1 C」DlgtRank", "background": "", "description": "给你一个长为 $n$ 的序列 $a_1\\sim a_n$。这里定义 $a_i$ 的**排名**为 $a$ 中**严格大于** $a_i$ 的数的个数 $+1$。\n\n现有一些操作来更改 $a$ 中的元素。所有操作之前会事先给你一个常量 $k$。每次操作前，定义 $a_i$ 是**可移动**的，当且仅当**仅将 $a_i$ 的值加上 $k$，其他值不变**后，$a_i$ 的排名不变。否则 $a_i$ 在这次操作是不可移动的。然后这次操作为：将序列中所有可移动的数加上 $k$。\n\n可以证明经过若干次操作后，$a$ 中所有值都会变成可移动的，并且第一次达到这种状态时，后面的操作也会是这种状态。也就是说，无论做多少次操作，$a$ 中每个值为**不可移动**状态的次数是有限的。\n\n现在询问，做足够多次这个操作后，$a$ 中每个值为**不可移动**状态的次数是多少。", "inputFormat": "第一行输入两个整数 $n,k$。\n\n接下来一行，输入 $n$ 个整数 $a_1\\sim a_n$ 表示初始时的 $a$ 数列。", "outputFormat": "输出一行 $n$ 个整数。第 $i$ 个整数表示 $a_i$ 在操作过程中为**不可移动**状态的次数。", "hint": "#### 样例 #1 解释\n\n初始的 $a_1=1,a_2=3,a_3=4$。\n\n操作一次后 $a_1=2,a_2=3,a_3=5$。$a_2$ 不可移动，是因为如果仅将 $a_2$ 加上 $1$，它的排名会由 $2$ 变成 $1$。\n\n操作两次后 $a_1=2,a_2=4,a_3=6$。$a_1$ 不可移动，是因为如果仅将 $a_1$ 加上 $1$，它的排名会由 $3$ 变成 $2$。\n\n操作三次后 $a_1=3,a_2=5,a_3=7$。这次操作所有值都是可移动的了。可以证明再操作任意多次也不会再出现不可移动的状态了。\n\n因此过程中 $a_1$ 有一次不可移动，$a_2$ 有一次不可移动，$a_3$ 没有不可移动的时候。\n\n#### 数据范围与约定\n\n对于 $100\\%$ 数据，$1\\le n\\le2\\times10^5$，$1\\le k,a_i\\le10^9$。\n\n| Subtask 编号 | $n\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $1$ | ABC | $4$ |\n| $1$ | $100$ | C | $14$ |\n| $2$ | $100$ | 无 | $13$ |\n| $3$ | $3000$ | C | $18$ |\n| $4$ | $3000$ | 无 | $16$ |\n| $5$ | $2\\times10^5$ | A | $6$ |\n| $6$ | $2\\times10^5$ | BC | $8$ |\n| $7$ | $2\\times10^5$ | C | $7$ |\n| $8$ | $2\\times10^5$ | 无 | $14$ |\n\n特殊性质 A：所有的 $a_i$ 都相等。\n\n特殊性质 B：对于任意的 $i<n$ 满足 $a_{i+1}=a_i+k$。\n\n特殊性质 C：对于任意的 $i\\neq j$ 满足 $a_i\\neq a_j$。", "locale": "zh-CN"}}}
{"pid": "P11274", "type": "P", "difficulty": 5, "samples": [["6\n1 1 4 5 1 4\n1 0 0 2 1 1", "4\n1 2 3 4\n9"], ["13\n-1 1 4 -5 -1 -4 1 9 -1 9 -8 -1 0\n1 0 2 1 3 0 0 2 0 0 2 0 1", "5\n1 2 7 8 10 \n19"], ["3\n-1 -1 0\n0 1 2", "0\n\n0"], ["6\n1 1 4 5 1 4\n1 1 1 3 0 1", "2\n4 5\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "Special Judge", "背包 DP", "洛谷月赛"], "title": "「Diligent-OI R1 D」DlgtTemplate", "background": "棋盘是用板子做成的。这题是棋盘的题，所以……", "description": "有一个 $1$ 行 $n$ 个格子的棋盘编号 $1\\sim n$，上面每个格子写着一个得分 $a_i$。\n\n现在你需要**从左到右**依次地选择一些格子，可以不选。有些格子选了之后，会将当前选的最靠前的 $b_i$ 个格子清除为未选格子，但你**不能**回去把这些格子重新选上。特殊地，如果该格子之前的已选格子不到 $b_i$ 个，那么该格子以及该格子以后的格子**不会**被清除为未选格子。\n\n请你找出一种从左到右选择的方案，使得已选格子的得分之和最大。", "inputFormat": "第一行输入 $n$，表示棋盘有 $n$ 个格子。\n\n接下来一行 $n$ 个整数，依次表示第 $1\\sim n$ 个格子的得分 $a_1\\sim a_n$。\n\n接下来一行 $n$ 个非负整数，依次表示第 $1\\sim n$ 个格子的清除个数 $b_1\\sim b_n$。", "outputFormat": "你需要给出具体方案。\n\n第一行输出非负整数 $k$，表示你选了 $k$ 个格子。\n\n第二行 $k$ 个从小到大排列的正整数，表示你从左到右依次选择的格子编号。如果不选格子输出一个空行。\n\n第三行输出 $ans$，表示你的最终答案。\n\nNs6 是很善良的。如果你不会求方案但答案正确，你也能得到测试点 $40\\%$ 的分数。但这种情况下你也需要输出 $k$ 和 $k$ 个从小到大排列的正整数。", "hint": "#### 【样例 #1 解释】\n\n先选择第一个数 $1$，这时虽然 $b_1=1$，但是因为前面没有数，所以不会清除。\n\n再选择第二个数 $1$，这时因为 $b_2=0$，所以不会清除。\n\n再选择第三个数 $4$，这时因为 $b_3=0$，所以不会清除。\n\n再选择第四个数 $5$，这时因为 $b_4=2$，所以选择的第一个数和第二个数会被清除为未选的数。\n\n此时答案 $4+5=9$。方法不唯一。\n\n#### 【数据范围与约定】\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le3000$，$|a_i|\\le10^8$，$0\\le b_i\\le n$。\n\n| Subtask 编号 | $n\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $20$ | 无 | $25$ |\n| $1$ | $500$ | 无 | $20$ |\n| $2$ | $3000$ | $b_i>0$ | $5$ |\n| $3$ | $3000$ | $b_i=0$ | $5$ |\n| $4$ | $3000$ | $a_i=1$ | $15$ |\n| $5$ | $3000$ | 无 | $30$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Diligent-OI R1 D」DlgtTemplate", "background": "棋盘是用板子做成的。这题是棋盘的题，所以……", "description": "有一个 $1$ 行 $n$ 个格子的棋盘编号 $1\\sim n$，上面每个格子写着一个得分 $a_i$。\n\n现在你需要**从左到右**依次地选择一些格子，可以不选。有些格子选了之后，会将当前选的最靠前的 $b_i$ 个格子清除为未选格子，但你**不能**回去把这些格子重新选上。特殊地，如果该格子之前的已选格子不到 $b_i$ 个，那么该格子以及该格子以后的格子**不会**被清除为未选格子。\n\n请你找出一种从左到右选择的方案，使得已选格子的得分之和最大。", "inputFormat": "第一行输入 $n$，表示棋盘有 $n$ 个格子。\n\n接下来一行 $n$ 个整数，依次表示第 $1\\sim n$ 个格子的得分 $a_1\\sim a_n$。\n\n接下来一行 $n$ 个非负整数，依次表示第 $1\\sim n$ 个格子的清除个数 $b_1\\sim b_n$。", "outputFormat": "你需要给出具体方案。\n\n第一行输出非负整数 $k$，表示你选了 $k$ 个格子。\n\n第二行 $k$ 个从小到大排列的正整数，表示你从左到右依次选择的格子编号。如果不选格子输出一个空行。\n\n第三行输出 $ans$，表示你的最终答案。\n\nNs6 是很善良的。如果你不会求方案但答案正确，你也能得到测试点 $40\\%$ 的分数。但这种情况下你也需要输出 $k$ 和 $k$ 个从小到大排列的正整数。", "hint": "#### 【样例 #1 解释】\n\n先选择第一个数 $1$，这时虽然 $b_1=1$，但是因为前面没有数，所以不会清除。\n\n再选择第二个数 $1$，这时因为 $b_2=0$，所以不会清除。\n\n再选择第三个数 $4$，这时因为 $b_3=0$，所以不会清除。\n\n再选择第四个数 $5$，这时因为 $b_4=2$，所以选择的第一个数和第二个数会被清除为未选的数。\n\n此时答案 $4+5=9$。方法不唯一。\n\n#### 【数据范围与约定】\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le3000$，$|a_i|\\le10^8$，$0\\le b_i\\le n$。\n\n| Subtask 编号 | $n\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $20$ | 无 | $25$ |\n| $1$ | $500$ | 无 | $20$ |\n| $2$ | $3000$ | $b_i>0$ | $5$ |\n| $3$ | $3000$ | $b_i=0$ | $5$ |\n| $4$ | $3000$ | $a_i=1$ | $15$ |\n| $5$ | $3000$ | 无 | $30$ |", "locale": "zh-CN"}}}
{"pid": "P11275", "type": "P", "difficulty": 2, "samples": [["4\n3 6\n1 4\n2 5\n314652 314652", "6\n4\n7\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "微观戏剧", "background": "$$\n\\begin{array}{cr}\n\\text{不　我不会说　那愚蠢的诅咒}\\\\\n\\text{因为你和我　都不被神明保佑}\\\\\n\\text{跃动着右心而降生的我}\\\\\n\\text{将一切标为}\\overset{\\text{Unaccepted}}{\\text{不接受}}\\\\\n&\\text{——《微观戏剧》}\n\\end{array}\n$$\n\n![](bilibili:BV1DY4y1q7S4)\n\n---\n\n在数不尽层数的世界中，迷失在回忆中的少女，寻找着不知是否存在的「真实」。\n\n决定了起点和终点后，你能帮助泠珞，找出如何最快地追寻她想要知道的真相呢？", "description": "有一个 $10^{100}$ 个结点的无向图，结点从 $1$ 到 $10^{100}$ 编号，每对结点 $u$ 与结点 $v$ 之间都有一条长度为 $\\operatorname{lcm}(u,v)$ 的边连接。$\\operatorname{lcm}(u,v)$ 是指 $u$ 和 $v$ 的最小公倍数，即最小的能被 $u$ 和 $v$ 同时整除的正整数。\n\n有 $q$ 次询问，每次给定 $x,y$，问结点 $x$ 到结点 $y$ 的最短路径长度是多少。", "inputFormat": "第一行一个正整数 $q$。\n\n接下来 $q$ 行，每行两个正整数 $x,y$。", "outputFormat": "对于每组询问，一行一个非负整数表示答案。", "hint": "**【样例 #1 解释】**\n\n对于第一组数据，最优路径是 $3\\to 6$，路径长度为 $\\operatorname{lcm}(3,6)=6$。可以证明**不存在**更短的路径。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n对于 $100\\%$ 的数据，$1\\le q\\le 2\\times10^5$，$1\\le x,y\\le 1\\times10^{18}$。\n\n| 子任务编号 | 分值 | $q\\le $ | $x,y\\le $ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $2$ | $1$ | $5$ |\n| $2$ | $5$ | $1$ | $3\\times10^3$ |\n| $3$ | $17$ | $100$ | $2\\times10^5$ |\n| $4$ | $29$ | $2\\times10^5$ | $1\\times10^9$ |\n| $5$ | $47$ | $2\\times10^5$ | $1\\times10^{18}$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "微观戏剧", "background": "$$\n\\begin{array}{cr}\n\\text{不　我不会说　那愚蠢的诅咒}\\\\\n\\text{因为你和我　都不被神明保佑}\\\\\n\\text{跃动着右心而降生的我}\\\\\n\\text{将一切标为}\\overset{\\text{Unaccepted}}{\\text{不接受}}\\\\\n&\\text{——《微观戏剧》}\n\\end{array}\n$$\n\n![](bilibili:BV1DY4y1q7S4)\n\n---\n\n在数不尽层数的世界中，迷失在回忆中的少女，寻找着不知是否存在的「真实」。\n\n决定了起点和终点后，你能帮助泠珞，找出如何最快地追寻她想要知道的真相呢？", "description": "有一个 $10^{100}$ 个结点的无向图，结点从 $1$ 到 $10^{100}$ 编号，每对结点 $u$ 与结点 $v$ 之间都有一条长度为 $\\operatorname{lcm}(u,v)$ 的边连接。$\\operatorname{lcm}(u,v)$ 是指 $u$ 和 $v$ 的最小公倍数，即最小的能被 $u$ 和 $v$ 同时整除的正整数。\n\n有 $q$ 次询问，每次给定 $x,y$，问结点 $x$ 到结点 $y$ 的最短路径长度是多少。", "inputFormat": "第一行一个正整数 $q$。\n\n接下来 $q$ 行，每行两个正整数 $x,y$。", "outputFormat": "对于每组询问，一行一个非负整数表示答案。", "hint": "**【样例 #1 解释】**\n\n对于第一组数据，最优路径是 $3\\to 6$，路径长度为 $\\operatorname{lcm}(3,6)=6$。可以证明**不存在**更短的路径。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n对于 $100\\%$ 的数据，$1\\le q\\le 2\\times10^5$，$1\\le x,y\\le 1\\times10^{18}$。\n\n| 子任务编号 | 分值 | $q\\le $ | $x,y\\le $ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $2$ | $1$ | $5$ |\n| $2$ | $5$ | $1$ | $3\\times10^3$ |\n| $3$ | $17$ | $100$ | $2\\times10^5$ |\n| $4$ | $29$ | $2\\times10^5$ | $1\\times10^9$ |\n| $5$ | $47$ | $2\\times10^5$ | $1\\times10^{18}$ |\n", "locale": "zh-CN"}}}
{"pid": "P11276", "type": "P", "difficulty": 4, "samples": [["qwq", "qwqwq"], ["lingyu", "lingyulingyu"], ["aaaaaaabaa", "aaaaaaabaaaaaaabaa"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "洛谷原创", "Special Judge", "O2优化", "KMP 算法", "洛谷月赛"], "title": "第一首歌", "background": "$$\n\\begin{array}{cr}\n\\text{在燥热的黑暗中}\\\\\n\\text{折叠陈旧的心}\\\\\n\\text{不禁开始自我怀疑}\\\\\n\\text{布满}\\overset{\\text{Wrong Answer}}{\\text{谬误}}\\text{的曾经}\\\\\n&\\text{——《第一首歌》}\n\\end{array}\n$$\n\n![](bilibili:62989560)\n\n---\n\n那个绝对不能忘却的人，如今还能在回忆中找到些许线索吗？\n\n她的名字，即使只记得一部分，泠珞也想要请你帮忙还原呢。", "description": "给定一个字符串 $s$，请求出一个最短的字符串 $t$，满足 $s$ 是 $t$ 的**最长** border。\n\n称字符串 $s$ 是字符串 $t$ 的 border，当且仅当 $s$ 是满足以下三者皆成立的字符串：\n\n- $s$ 为 $t$ 的前缀。\n- $s$ 为 $t$ 的后缀。\n- $s$ 不为 $t$。\n\n如果有多个可能的最短的 $t$，输出任意一个均可。", "inputFormat": "一行一个只由小写英文字母组成的的字符串 $s$。", "outputFormat": "一行一个只由小写英文字母组成的的字符串 $t$。\n\n如果有多个可能的最短的 $t$，输出任意一个均可。", "hint": "**【样例 #1 解释】**\n\n$t=\\texttt{qwqwq}$ 的最长 border 为 $s=\\texttt{qwq}$，且可以证明**不存在**更小的符合要求的 $t$，所以输出是正确的。\n\n$t=\\texttt{qwqaqwq}$ 符合条件，但是它不是最短的，所以不是可能的输出。\n\n$t=\\texttt{qwqwqwq}$ 不符合条件，因为它的最长 border 为 $\\texttt{qwqwq}$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le |s|\\le 1\\times10^6$，$s$ 仅由小写英文字母构成。其中，$|s|$ 表示 $s$ 的长度。 \n\n| 子任务编号 | 分值 | $\\vert s\\vert\\le $ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $17$ | $4$ | 无 |\n| $2$ | $29$ | $3\\times10^3$ | 无 |\n| $3$ | $11$ | $1\\times10^6$ | $s$ 仅由一种字符组成 |\n| $4$ | $43$ | $1\\times10^6$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "第一首歌", "background": "$$\n\\begin{array}{cr}\n\\text{在燥热的黑暗中}\\\\\n\\text{折叠陈旧的心}\\\\\n\\text{不禁开始自我怀疑}\\\\\n\\text{布满}\\overset{\\text{Wrong Answer}}{\\text{谬误}}\\text{的曾经}\\\\\n&\\text{——《第一首歌》}\n\\end{array}\n$$\n\n![](bilibili:62989560)\n\n---\n\n那个绝对不能忘却的人，如今还能在回忆中找到些许线索吗？\n\n她的名字，即使只记得一部分，泠珞也想要请你帮忙还原呢。", "description": "给定一个字符串 $s$，请求出一个最短的字符串 $t$，满足 $s$ 是 $t$ 的**最长** border。\n\n称字符串 $s$ 是字符串 $t$ 的 border，当且仅当 $s$ 是满足以下三者皆成立的字符串：\n\n- $s$ 为 $t$ 的前缀。\n- $s$ 为 $t$ 的后缀。\n- $s$ 不为 $t$。\n\n如果有多个可能的最短的 $t$，输出任意一个均可。", "inputFormat": "一行一个只由小写英文字母组成的的字符串 $s$。", "outputFormat": "一行一个只由小写英文字母组成的的字符串 $t$。\n\n如果有多个可能的最短的 $t$，输出任意一个均可。", "hint": "**【样例 #1 解释】**\n\n$t=\\texttt{qwqwq}$ 的最长 border 为 $s=\\texttt{qwq}$，且可以证明**不存在**更小的符合要求的 $t$，所以输出是正确的。\n\n$t=\\texttt{qwqaqwq}$ 符合条件，但是它不是最短的，所以不是可能的输出。\n\n$t=\\texttt{qwqwqwq}$ 不符合条件，因为它的最长 border 为 $\\texttt{qwqwq}$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le |s|\\le 1\\times10^6$，$s$ 仅由小写英文字母构成。其中，$|s|$ 表示 $s$ 的长度。 \n\n| 子任务编号 | 分值 | $\\vert s\\vert\\le $ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $17$ | $4$ | 无 |\n| $2$ | $29$ | $3\\times10^3$ | 无 |\n| $3$ | $11$ | $1\\times10^6$ | $s$ 仅由一种字符组成 |\n| $4$ | $43$ | $1\\times10^6$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P11277", "type": "P", "difficulty": 5, "samples": [["6 8", "3 6 1 4 2 5"], ["3 3", "5 5 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "构造", "Ad-hoc"], "title": "世界沉睡童话", "background": "$$\n\\begin{array}{cr}\n\\text{时针停在相互拥抱的前一秒}\\\\\n\\text{凝视每件事的空白}\\\\\n\\text{等待缝隙}\\overset{\\text{Memory Limit Exceeded}}{\\text{被缺失章节填满}}\\\\\n\\text{等}\\overset{\\text{return }{\\color{#EE0000}0}\\text{;}}{{\\color{#EE0000}\\text{某个人}}\\text{回来}}\\\\\n&\\text{——《世界沉睡童话》}\n\\end{array}\n$$\n\n![](bilibili:34574689)\n\n---\n\n在不断变化着的世界中，找出彼此的所属。\n\n压缩成一个数的记忆，泠珞又能否还原呢？", "description": "给定正整数 $n$ 和非负整数 $k$，请构造一个正整数序列 $a_1,a_2,\\cdots,a_n$，满足恰有 $k$ 组正整数对 $(i,j)$  $(1\\le i<j\\le n)$，满足 $\\max(a_i,a_j)$ 是 $\\min(a_i,a_j)$ 的倍数。\n\n输入保证有解。\n\n为了获得满分，你需要保证 $a_i\\le 2n-1$。", "inputFormat": "第一行两个非负整数 $n,k$。输入保证有解。", "outputFormat": "一行 $n$ 个正整数，第 $i$ 个表示你构造的 $a_i$。\n\n为了获得满分，你需要保证 $a_i\\le 2n-1$。\n\n输出任意一组可行解均可。", "hint": "**【样例 #1 解释】**\n\n符合要求的数对有 $(1,2),(1,3),(2,3),(2,5),(3,4),(3,5),(3,6),(4,5)$ 共 $k=8$ 组。\n\n**【数据范围】**\n\n**本题采用捆绑测试和子任务依赖。**\n\n本题中，**RE 会显示为 UKE，这是正常现象**。\n\n具体地，部分测试点可能属于多个子任务。因此，子任务不会显式地显示出来。以下表格表示了每个测试点属于的子任务情况：\n\n| 测试点编号 | 所属子任务 |\n| :----------: | :----------: |\n| $1,2,4,8$ | $1,2,3,4,5$ |\n| $22$ | $2,3,4,5$ |\n| $43$ | $3,4,5$ |\n| $3,5,6,9\\sim11,15\\sim18$ | $1,2,4,5$ |\n| $7,12\\sim 14,19\\sim 21$ | $1,2,5$ |\n| $23\\sim25,33,39$ | $2,4,5$ |\n| $26\\sim 32,34\\sim 38,40\\sim 42$ | $2,5$ |\n| $44\\sim 54$ | $4,5$ |\n| $55\\sim 100$ | $5$ |\n\n不保证**不存在**某些数据符合它不在的 Subtask 的条件。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2.5\\times10^5$，$0\\le k\\le \\dfrac{n(n-1)}{2}$，本题的数据保证有解。\n\n对于每个子任务，如果你保证了 $a_i\\le 4n$，你将获得 $p_1$ 的分数。如果你保证了 $a_i\\le 3n$，你将获得 $p_2$ 的分数。如果你保证了 $a_i\\le 2n-1$，你将获得 $p_3$ 的分数，即满分。\n\n对于每个子任务，你只有保证了**所有**属于它的测试点都保证了以上的条件，你才能获得对应的分数。\n\n输出任意一组符合要求的可行解都可以获得对应的分数。\n\n因此，您无法直接知道每个子任务的 $p_1,p_2$ 部分分数的获取情况。你可以通过在程序内进行 `assert`（用法：`assert(表达式)`，若表达式为 `0` / `false` 则会 RE）确认自己的通过情况。\n\n| 子任务编号 | $p_1$ | $p_2$ | $p_3$ | $n\\le $ | $k\\le $ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $3$ | $5$ | $5$ | $\\dfrac{n(n-1)}{2}$ |\n| $2$ | $5$ | $11$ | $17$ | $10^4$ | $\\dfrac{n(n-1)}{2}$ |\n| $3$ | $1$ | $1$ | $2$ | $2.5\\times10^5$ | $0$ |\n| $4$ | $7$ | $13$ | $29$ | $2.5\\times10^5$ | $n-1$ |\n| $5$ | $11$ | $23$ | $47$ | $2.5\\times10^5$ | $\\dfrac{n(n-1)}{2}$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "世界沉睡童话", "background": "$$\n\\begin{array}{cr}\n\\text{时针停在相互拥抱的前一秒}\\\\\n\\text{凝视每件事的空白}\\\\\n\\text{等待缝隙}\\overset{\\text{Memory Limit Exceeded}}{\\text{被缺失章节填满}}\\\\\n\\text{等}\\overset{\\text{return }{\\color{#EE0000}0}\\text{;}}{{\\color{#EE0000}\\text{某个人}}\\text{回来}}\\\\\n&\\text{——《世界沉睡童话》}\n\\end{array}\n$$\n\n![](bilibili:34574689)\n\n---\n\n在不断变化着的世界中，找出彼此的所属。\n\n压缩成一个数的记忆，泠珞又能否还原呢？", "description": "给定正整数 $n$ 和非负整数 $k$，请构造一个正整数序列 $a_1,a_2,\\cdots,a_n$，满足恰有 $k$ 组正整数对 $(i,j)$  $(1\\le i<j\\le n)$，满足 $\\max(a_i,a_j)$ 是 $\\min(a_i,a_j)$ 的倍数。\n\n输入保证有解。\n\n为了获得满分，你需要保证 $a_i\\le 2n-1$。", "inputFormat": "第一行两个非负整数 $n,k$。输入保证有解。", "outputFormat": "一行 $n$ 个正整数，第 $i$ 个表示你构造的 $a_i$。\n\n为了获得满分，你需要保证 $a_i\\le 2n-1$。\n\n输出任意一组可行解均可。", "hint": "**【样例 #1 解释】**\n\n符合要求的数对有 $(1,2),(1,3),(2,3),(2,5),(3,4),(3,5),(3,6),(4,5)$ 共 $k=8$ 组。\n\n**【数据范围】**\n\n**本题采用捆绑测试和子任务依赖。**\n\n本题中，**RE 会显示为 UKE，这是正常现象**。\n\n具体地，部分测试点可能属于多个子任务。因此，子任务不会显式地显示出来。以下表格表示了每个测试点属于的子任务情况：\n\n| 测试点编号 | 所属子任务 |\n| :----------: | :----------: |\n| $1,2,4,8$ | $1,2,3,4,5$ |\n| $22$ | $2,3,4,5$ |\n| $43$ | $3,4,5$ |\n| $3,5,6,9\\sim11,15\\sim18$ | $1,2,4,5$ |\n| $7,12\\sim 14,19\\sim 21$ | $1,2,5$ |\n| $23\\sim25,33,39$ | $2,4,5$ |\n| $26\\sim 32,34\\sim 38,40\\sim 42$ | $2,5$ |\n| $44\\sim 54$ | $4,5$ |\n| $55\\sim 100$ | $5$ |\n\n不保证**不存在**某些数据符合它不在的 Subtask 的条件。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2.5\\times10^5$，$0\\le k\\le \\dfrac{n(n-1)}{2}$，本题的数据保证有解。\n\n对于每个子任务，如果你保证了 $a_i\\le 4n$，你将获得 $p_1$ 的分数。如果你保证了 $a_i\\le 3n$，你将获得 $p_2$ 的分数。如果你保证了 $a_i\\le 2n-1$，你将获得 $p_3$ 的分数，即满分。\n\n对于每个子任务，你只有保证了**所有**属于它的测试点都保证了以上的条件，你才能获得对应的分数。\n\n输出任意一组符合要求的可行解都可以获得对应的分数。\n\n因此，您无法直接知道每个子任务的 $p_1,p_2$ 部分分数的获取情况。你可以通过在程序内进行 `assert`（用法：`assert(表达式)`，若表达式为 `0` / `false` 则会 RE）确认自己的通过情况。\n\n| 子任务编号 | $p_1$ | $p_2$ | $p_3$ | $n\\le $ | $k\\le $ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $3$ | $5$ | $5$ | $\\dfrac{n(n-1)}{2}$ |\n| $2$ | $5$ | $11$ | $17$ | $10^4$ | $\\dfrac{n(n-1)}{2}$ |\n| $3$ | $1$ | $1$ | $2$ | $2.5\\times10^5$ | $0$ |\n| $4$ | $7$ | $13$ | $29$ | $2.5\\times10^5$ | $n-1$ |\n| $5$ | $11$ | $23$ | $47$ | $2.5\\times10^5$ | $\\dfrac{n(n-1)}{2}$ |", "locale": "zh-CN"}}}
{"pid": "P11278", "type": "P", "difficulty": 7, "samples": [["6 6\n3 6 1 4 2 5\n2 2 5\n3 1 4\n1 5 5\n2 1 6\n1 1 3\n3 5 6\n", "1\n14\n6\n8"], ["10 10\n1234567890 130113 3614258193 1000000007 3146527164 3141592653 2147483648 998244353 2346886432 20151114\n2 1 10\n3 5 8\n1 2 9\n3 1 4\n1 5 8\n1 3 10\n2 1 9\n3 1 8\n1 1 4\n2 8 8", "2499610911\n9433847818\n4602641167\n4258698016\n17656837678\n704481058"], ["10 10\n36 14 35 0 13 0 11 3 5 20\n2 1 10\n3 1 4\n2 2 5\n3 1 8\n3 1 4\n2 5 6\n2 8 9\n3 3 7\n3 1 10\n2 1 5", "29\n85\n32\n112\n85\n13\n6\n59\n137\n4"], ["10 10\n36 14 35 0 13 0 11 3 5 20\n1 1 10\n2 1 4\n1 2 5\n2 1 8\n2 1 4\n2 5 6\n2 8 9\n1 3 7\n1 1 10\n2 1 5", "12\n21\n22\n14\n5\n9"], ["10 10\n36 14 35 0 13 0 11 3 5 20\n1 5 5\n3 1 4\n2 2 5\n3 1 8\n1 9 9\n2 5 6\n1 9 9\n3 3 7\n3 1 10\n2 1 5", "85\n39\n109\n10\n56\n133\n3"], ["10 10\n36 14 35 0 13 0 11 3 5 20\n1 1 10\n3 1 4\n2 2 5\n3 1 8\n1 1 10\n2 5 6\n1 1 10\n3 3 7\n3 1 10\n2 1 5", "112\n52\n139\n14\n76\n179\n7"], ["10 10\n36 14 35 0 13 0 11 3 5 20\n1 3 8\n1 1 6\n1 2 10\n3 1 4\n2 2 5\n3 1 8\n2 5 6\n3 3 7\n3 1 10\n2 1 5", "119\n61\n139\n8\n73\n176\n15"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "位运算"], "title": "绝世丑角", "background": "$$\n\\begin{array}{cr}\n\\text{我好恨　恨这固执到厚颜无耻的人}\\\\\n\\text{竟和曾经快乐的我同个模样}\\\\\n\\text{即使信仰和记忆都}\\overset{\\text{Runtime Error}}{\\text{遍体鳞伤}}\\\\\n\\text{仍在深渊妄想得到}\\overset{\\text{return }{\\color{#EE0000}0}\\text{;}}{{\\color{#EE0000}\\text{你}}\\text{的回望}}\\\\\n&\\text{——《绝世丑角》}\n\\end{array}\n$$\n\n![](bilibili:BV12i4y1976j)\n\n---\n\n在被修改的、破碎不堪的回忆中取出仅有的连续片段。\n\n泠珞还是想知道，能否从中提取出，有意义的回忆呢。", "description": "对于两个非负整数 $a,b$，定义它们的 Nim 积为 $a\\otimes b=\\operatorname{mex}(\\{(a\\otimes d)\\oplus(c\\otimes b)\\oplus (c\\otimes d)|0\\le c<a,0\\le d<b\\})$，其中 $x\\oplus y$ 表示 $x$ 与 $y$ 的二进制异或和，$\\operatorname{mex}(S)$ 表示**不存在**于 $S$ 中的最小的非负整数。\n\n给定一个长度为 $n$ 的非负整数序列 $a_1,a_2,\\cdots,a_n$，给定 $q$ 次操作，每次操作有三个参数 $(t,\\ell,r)$。\n\n- 若 $t=1$，表示对于 $i=\\ell,\\ell+1,\\cdots,r$，令 $a_i\\gets a_i\\otimes a_i$。\n- 若 $t=2$，表示查询 $a_\\ell\\oplus a_{\\ell+1}\\oplus\\cdots\\oplus a_r$。\n- 若 $t=3$，表示查询 $a_\\ell+ a_{\\ell+1}+\\cdots+ a_r$。\n\n你需要输出每次查询的结果。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来一行 $n$ 个非负整数，第 $i$ 个表示 $a_i$。\n\n接下来 $q$ 行，每行三个正整数 $t,\\ell,r$ 表示当前操作的参数。", "outputFormat": "对于每次查询操作，输出一行一个非负整数表示答案。", "hint": "**【样例 #1 解释】**\n\n第一次操作是查询，输出 $6\\oplus 1\\oplus 4\\oplus 2=1$。\n\n第二次操作是查询，输出 $3+6+1+4=14$。\n\n第三次操作是修改，序列变为 $[3,6,1,4,3,5]$。\n\n第四次操作是查询，输出 $3\\oplus6\\oplus1\\oplus4\\oplus3\\oplus5=6$。\n\n第五次操作是修改，序列变为 $[2,5,1,4,3,5]$。\n\n第六次操作是查询，输出 $3+5=8$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le2.5\\times10^5$，$0\\le a_i<2^{32}$，$1\\le q\\le 1\\times10^5$，$1\\le t\\le 3$，$1\\le \\ell\\le r\\le n$。保证最后一次操作是查询操作。\n\n| 子任务编号 | 分值 | $n\\le $ | $q\\le $ | $a_i<$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | $t\\neq 1$ |\n| $2$ | $11$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 若 $t=1$，则 $\\ell=r$ |\n| $3$ | $19$ | $2.5\\times10^5$ | $1\\times10^5$ | $64$ | 无|\n| $4$ | $13$ | $1\\times10^5$ | $3\\times10^4$ | $2^{32}$ | $t\\neq 3$ |\n| $5$ | $17$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | $t\\neq 3$ |\n| $6$ | $7$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 若 $t=1$，则 $\\ell=1,r=n$ |\n| $7$ | $23$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 所有 $t=1$ 的操作在 $t\\neq 1$ 前 |\n| $8$ | $3$ | $1\\times10^5$ | $3\\times10^4$ | $2^{32}$ | 无 |\n| $9$ | $5$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "绝世丑角", "background": "$$\n\\begin{array}{cr}\n\\text{我好恨　恨这固执到厚颜无耻的人}\\\\\n\\text{竟和曾经快乐的我同个模样}\\\\\n\\text{即使信仰和记忆都}\\overset{\\text{Runtime Error}}{\\text{遍体鳞伤}}\\\\\n\\text{仍在深渊妄想得到}\\overset{\\text{return }{\\color{#EE0000}0}\\text{;}}{{\\color{#EE0000}\\text{你}}\\text{的回望}}\\\\\n&\\text{——《绝世丑角》}\n\\end{array}\n$$\n\n![](bilibili:BV12i4y1976j)\n\n---\n\n在被修改的、破碎不堪的回忆中取出仅有的连续片段。\n\n泠珞还是想知道，能否从中提取出，有意义的回忆呢。", "description": "对于两个非负整数 $a,b$，定义它们的 Nim 积为 $a\\otimes b=\\operatorname{mex}(\\{(a\\otimes d)\\oplus(c\\otimes b)\\oplus (c\\otimes d)|0\\le c<a,0\\le d<b\\})$，其中 $x\\oplus y$ 表示 $x$ 与 $y$ 的二进制异或和，$\\operatorname{mex}(S)$ 表示**不存在**于 $S$ 中的最小的非负整数。\n\n给定一个长度为 $n$ 的非负整数序列 $a_1,a_2,\\cdots,a_n$，给定 $q$ 次操作，每次操作有三个参数 $(t,\\ell,r)$。\n\n- 若 $t=1$，表示对于 $i=\\ell,\\ell+1,\\cdots,r$，令 $a_i\\gets a_i\\otimes a_i$。\n- 若 $t=2$，表示查询 $a_\\ell\\oplus a_{\\ell+1}\\oplus\\cdots\\oplus a_r$。\n- 若 $t=3$，表示查询 $a_\\ell+ a_{\\ell+1}+\\cdots+ a_r$。\n\n你需要输出每次查询的结果。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来一行 $n$ 个非负整数，第 $i$ 个表示 $a_i$。\n\n接下来 $q$ 行，每行三个正整数 $t,\\ell,r$ 表示当前操作的参数。", "outputFormat": "对于每次查询操作，输出一行一个非负整数表示答案。", "hint": "**【样例 #1 解释】**\n\n第一次操作是查询，输出 $6\\oplus 1\\oplus 4\\oplus 2=1$。\n\n第二次操作是查询，输出 $3+6+1+4=14$。\n\n第三次操作是修改，序列变为 $[3,6,1,4,3,5]$。\n\n第四次操作是查询，输出 $3\\oplus6\\oplus1\\oplus4\\oplus3\\oplus5=6$。\n\n第五次操作是修改，序列变为 $[2,5,1,4,3,5]$。\n\n第六次操作是查询，输出 $3+5=8$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le2.5\\times10^5$，$0\\le a_i<2^{32}$，$1\\le q\\le 1\\times10^5$，$1\\le t\\le 3$，$1\\le \\ell\\le r\\le n$。保证最后一次操作是查询操作。\n\n| 子任务编号 | 分值 | $n\\le $ | $q\\le $ | $a_i<$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | $t\\neq 1$ |\n| $2$ | $11$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 若 $t=1$，则 $\\ell=r$ |\n| $3$ | $19$ | $2.5\\times10^5$ | $1\\times10^5$ | $64$ | 无|\n| $4$ | $13$ | $1\\times10^5$ | $3\\times10^4$ | $2^{32}$ | $t\\neq 3$ |\n| $5$ | $17$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | $t\\neq 3$ |\n| $6$ | $7$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 若 $t=1$，则 $\\ell=1,r=n$ |\n| $7$ | $23$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 所有 $t=1$ 的操作在 $t\\neq 1$ 前 |\n| $8$ | $3$ | $1\\times10^5$ | $3\\times10^4$ | $2^{32}$ | 无 |\n| $9$ | $5$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P11279", "type": "P", "difficulty": 2, "samples": [["9\ncbbccxxxx", "godfather"], ["26\nabcdefghijklmnopqrstuvwxyz", "abcdefghijklmnopqrstuvwxyz"], ["28\naabcdefghijklmnopqrstuvwxyzz", "cybcdefghijklmnopqrstuvwxycy"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "贪心", "洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "「GFOI Round 2」Abstract String Basic", "background": "**[English statement](https://www.luogu.com.cn/problem/T533480). You must submit your code at the Chinese version of the statement.**", "description": "Charlie 正在上一门叫做《抽象字符串基础》的课。\n\n> **定义 3.1：** 对于两个长度相同的小写字母串 $S$ 和 $T$，定义它们的**相似度**为它们相同的对应位置个数。形式化地，设 $|S|=|T|=n$，则 $S$ 和 $T$ 的相似度 $\\psi(S,T)=\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^n[i=j][S_i=T_j]$。  \n>\n> **引理 3.1：** 对于任意小写字母串 $S$，存在唯一的小写字母串 $T$，使得 $\\psi(S,T)$ 最大化。  \n>\n> **引理 3.1 的证明：**……\n\nCharlie 逐渐开始神游，在纸上写写画画。忽然，他想到定义 $S$ 和 $T$ 的**不相似度**为有几对不同位置上的字符不同，即 $\\tilde\\psi(S,T)=\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^n[i\\neq j][S_i\\neq T_j]$。这个清奇的定义让 Charlie 一下子清醒了，他想到，什么样的小写字母串 $T$ 能够最大化 $S$ 和 $T$ 的**不相似度**呢？\n\n注：$[x]$ 的方括号为艾弗森括号，其定义为：若条件表达式 $x$ 为真则 $[x]$ 取值为 $1$，否则 $[x]$ 取值为 $0$。", "inputFormat": "第一行包含一个正整数 $n$。\n\n第二行包含一个长度为 $n$ 的字符串 $S$，保证 $S$ 中仅含小写字母。", "outputFormat": "输出一行小写字母字符串 $T$，表示你的答案。你需要使得 $S$ 与 $T$ 的**不相似度**最大化。如果有多种答案，输出任意一种均可。", "hint": "#### 【样例解释 #1】\n\n当 $T=\\texttt{godfather}$ 时，$\\tilde\\psi(S,T)=72$，取到最大值。注意答案可能不止一种。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n|子任务编号  |$n\\le$  |特殊性质|分值|\n| :-----------: | :-----------: |:----:|:----:|\n|$0$  |$28$  | 是样例 | $0$ |\n|$1$  |$4$  | 无 |$20$  |\n|$2$  |$10^6$  | $S$ 中不包含字符 `z` |$20$  |\n|$3$  |$10^3$  | 无 |$20$  |\n|$4$  |$10^6$  | 无 |$40$  |\n\n对于所有数据，满足：\n\n- $1 \\leq n \\leq 10^6$；\n- $S$ 中仅包含小写字母。", "locale": "zh-CN", "translations": {"en": {"title": "「GFOI Round 2」Abstract String Basic", "background": "", "description": "Charlie is taking a course called *Basics of Abstract Strings*. \n\n> **Definition 3.1:** For two lowercase strings $S$ and $T$ of the same length, their **similarity** is defined as the number of matching characters in corresponding positions. Formally, if $|S| = |T| = n$, then the similarity between $S$ and $T$ is given by $\\psi(S, T) = \\sum\\limits_{i=1}^n \\sum\\limits_{j=1}^n [i = j][S_i = T_j]$.\n> \n> **Lemma 3.1:** For any lowercase string $S$, there exists a unique lowercase string $T$ that maximizes $\\psi(S, T)$.  \n> \n> **Proof of Lemma 3.1:** ...\n\nCharlie’s mind begins to wander, and he starts scribbling aimlessly on his paper. Suddenly, he comes up with a new idea: what if he defines the **dissimilarity** between $S$ and $T$ as the number of pairs where both the position and the character are different? Formally, this similarity can be defined as $\\tilde{\\psi}(S, T) = \\sum\\limits_{i=1}^n \\sum\\limits_{j=1}^n [i \\neq j][S_i \\neq T_j]$. This whimsical definition snaps Charlie out of his daydream. Now, he wonders: what kind of lowercase string $T$ would maximize the dissimilarity between $S$ and $T$?\n\n**Note:** The square brackets $[x]$ represent Iverson brackets, which evaluate to $1$ if the condition $x$ is true, and $0$ otherwise.", "inputFormat": "The first line contains a positive integer $n$.  \n\nThe second line contains a string $S$ of length $n$, consisting only of lowercase letters.", "outputFormat": "Output a single line containing a lowercase string $T$, representing your answer. You need to maximize the **dissimilarity** between $S$ and $T$. If there are multiple answers, output any.", "hint": "#### Sample $1$ Explanation\n\nWhen $T = \\texttt{godfather}$, $\\tilde{\\psi}(S, T) = 72$, reaching the maximum value. Note that there may be more than one valid answer.\n\n#### Subtasks and Constraints\n\n| Subtask ID |$n\\le$  | Special Properties | Score |\n| :-----------: | :-----------: |:----:|:----:|\n|$0$  |$28$  | Tests are samples | $0$ |\n|$1$  |$4$  | No |$20$  |\n|$2$  |$10^6$  | $S$ doesn't contain the character `z` |$20$  |\n|$3$  |$10^3$  | No |$20$  |\n|$4$  |$10^6$  | No |$40$  |\n\nFor all tests, it is guaranteed that:\n\n- $1 \\le n \\le 10^6$;\n- $S$ consists only of lowercase letters.", "locale": "en"}, "zh-CN": {"title": "「GFOI Round 2」Abstract String Basic", "background": "**[English statement](https://www.luogu.com.cn/problem/T533480). You must submit your code at the Chinese version of the statement.**", "description": "Charlie 正在上一门叫做《抽象字符串基础》的课。\n\n> **定义 3.1：** 对于两个长度相同的小写字母串 $S$ 和 $T$，定义它们的**相似度**为它们相同的对应位置个数。形式化地，设 $|S|=|T|=n$，则 $S$ 和 $T$ 的相似度 $\\psi(S,T)=\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^n[i=j][S_i=T_j]$。  \n>\n> **引理 3.1：** 对于任意小写字母串 $S$，存在唯一的小写字母串 $T$，使得 $\\psi(S,T)$ 最大化。  \n>\n> **引理 3.1 的证明：**……\n\nCharlie 逐渐开始神游，在纸上写写画画。忽然，他想到定义 $S$ 和 $T$ 的**不相似度**为有几对不同位置上的字符不同，即 $\\tilde\\psi(S,T)=\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^n[i\\neq j][S_i\\neq T_j]$。这个清奇的定义让 Charlie 一下子清醒了，他想到，什么样的小写字母串 $T$ 能够最大化 $S$ 和 $T$ 的**不相似度**呢？\n\n注：$[x]$ 的方括号为艾弗森括号，其定义为：若条件表达式 $x$ 为真则 $[x]$ 取值为 $1$，否则 $[x]$ 取值为 $0$。", "inputFormat": "第一行包含一个正整数 $n$。\n\n第二行包含一个长度为 $n$ 的字符串 $S$，保证 $S$ 中仅含小写字母。", "outputFormat": "输出一行小写字母字符串 $T$，表示你的答案。你需要使得 $S$ 与 $T$ 的**不相似度**最大化。如果有多种答案，输出任意一种均可。", "hint": "#### 【样例解释 #1】\n\n当 $T=\\texttt{godfather}$ 时，$\\tilde\\psi(S,T)=72$，取到最大值。注意答案可能不止一种。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n|子任务编号  |$n\\le$  |特殊性质|分值|\n| :-----------: | :-----------: |:----:|:----:|\n|$0$  |$28$  | 是样例 | $0$ |\n|$1$  |$4$  | 无 |$20$  |\n|$2$  |$10^6$  | $S$ 中不包含字符 `z` |$20$  |\n|$3$  |$10^3$  | 无 |$20$  |\n|$4$  |$10^6$  | 无 |$40$  |\n\n对于所有数据，满足：\n\n- $1 \\leq n \\leq 10^6$；\n- $S$ 中仅包含小写字母。", "locale": "zh-CN"}}}
{"pid": "P11280", "type": "P", "difficulty": 3, "samples": [["5 4 3\n4 3\n3 2\n1 5\n1 2\n2\n1 2\n5 4", "I'm here!\nJom\nJom"], ["5 5 4\n1 4\n4 3\n3 2\n4 5\n5 3\n2\n3 1\n5 1", "I'm here!\nTerry\nTerry"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "图遍历", "最短路", "洛谷月赛"], "title": "「GFOI Round 2」Jom & Terry", "background": "我在做 [#3406. 「2020-2021 集训队作业」Tom & Jerry](https://loj.ac/p/3406)……\n\n你说得对，但是：\n> Tom and Jerry is an American animated media franchise and series of comedy short films created in 1940 by William Hanna and Joseph Barbera. Best known for its 161 theatrical short films by Metro-Goldwyn-Mayer, the series centers on the rivalry between the titular characters of a cat named Tom and a mouse named Jerry. Many shorts also feature several recurring characters.\n> \n> In its original run, Hanna and Barbera produced 114 Tom and Jerry shorts for MGM from 1940 to 1958. During this time, they won seven Academy Awards for Best Animated Short Film, tying for first place with Walt Disney's Silly Symphonies with the most awards in the category. After the MGM cartoon studio closed in 1957, MGM revived the series with Gene Deitch directing an additional 13 Tom and Jerry shorts for Rembrandt Films from 1961 to 1962. Tom and Jerry became the highest-grossing animated short film series of that time, overtaking Looney Tunes. Chuck Jones produced another 34 shorts with Sib Tower 12 Productions between 1963 and 1967. Five more shorts have been produced since 2001, making a total of 166 shorts.\n>\n> A number of spin-offs have been made, including the television series The Tom and Jerry Show (1975), The Tom and Jerry Comedy Show (1980–1982), Tom & Jerry Kids (1990–1993), Tom and Jerry Tales (2006–2008), and The Tom and Jerry Show (2014–2021). In 1992, the first feature-length film based on the series, Tom and Jerry: The Movie, was released. 13 direct-to-video films have been produced since 2002. In 2021, a a live-action/animated hybrid film was released. In 2019, a musical adaptation of the series, titled Tom and Jerry: Purr-Chance to Dream, debuted in Japan, in advance of Tom and Jerry's 80th anniversary.", "description": "Terry 和 Jom 在一个 $n$ 个点 $m$ 条边的有“根”无向连通图上博弈（图的根为 $r$），遵循以下规则：\n\n- Terry 先手；\n- 两人轮流在图上移动，每次只能走一条边（也可以睡觉，啥都不干）；\n- Terry 不能走到 Jom 所在的结点（我们认为只有 Terry 自投罗网时才会被抓到，即如果 Terry 先移动到结点 $u$ 后 Jom 在同一回合也移动到 $u$ 是合法的）。\n\n给定 $q$ 次询问，每次询问给定 Terry 和 Jom 的起点 $a, b$，你需要回答 Terry 能否到达根（即点 $r$）。", "inputFormat": "第一行包含三个整数 $n, m, r$，表示点数、边数和根的编号；\n\n接下来 $m$ 行，每行包含两个整数 $(u, v)$ 表示一条边（注意可能存在重边或自环）；\n\n接下来一行包含一个整数 $q$，表示询问数；\n\n接下来 $q$ 行，每行包含两个整数 $a, b$，表示 Terry 和 Jom 的起点。", "outputFormat": "因为这是签到题，所以你应该在开头输出 `I'm here!`。\n\n接下来 $q$ 行的第 $i$ 行，如果在第 $i$ 次询问中 Terry 能到达根就输出 `Terry`，否则输出 `Jom`。", "hint": "#### 【提示】\n\n本题 IO 量较大，请选手使用较快的读入输出方式。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n, m, q \\le$ |     特殊性质     | 分值 |\n| :--------: | :-----------: | :--------------: | :--------: |\n|    $0$     |       $10^6$       | A |    $1$     |\n|    $1$     |     $10$      |        无        |    $9$     |\n|    $2$     |       $10^6$       |  B  |    $15$    |\n|    $3$     |       $10^6$       | C |    $15$    |\n|    $4$     |       $10^6$       |        无        |    $60$    |\n\n- 特殊性质 A：$q = 0$。\n- 特殊性质 B：保证图是一条链。\n- 特殊性质 C：保证图是一个菊花。\n\n对于所有数据，满足：\n\n- $1 \\le n, m \\le 10^6$；\n- $0 \\le q \\le 10^6$；\n- $1 \\le r, u, v, a, b \\le n$；\n- 给定的图是一个无向连通图。", "locale": "zh-CN", "translations": {"en": {"title": "「GFOI Round 2」Jom & Terry", "background": "I am solving [#3406. 「2020-2021 集训队作业」Tom & Jerry](https://loj.ac/p/3406)......\n\nYou are right, but:\n\n> Tom and Jerry is an American animated media franchise and series of comedy short films created in 1940 by William Hanna and Joseph Barbera. Best known for its 161 theatrical short films by Metro-Goldwyn-Mayer, the series centers on the rivalry between the titular characters of a cat named Tom and a mouse named Jerry. Many shorts also feature several recurring characters.\n> \n> In its original run, Hanna and Barbera produced 114 Tom and Jerry shorts for MGM from 1940 to 1958. During this time, they won seven Academy Awards for Best Animated Short Film, tying for first place with Walt Disney's Silly Symphonies with the most awards in the category. After the MGM cartoon studio closed in 1957, MGM revived the series with Gene Deitch directing an additional 13 Tom and Jerry shorts for Rembrandt Films from 1961 to 1962. Tom and Jerry became the highest-grossing animated short film series of that time, overtaking Looney Tunes. Chuck Jones produced another 34 shorts with Sib Tower 12 Productions between 1963 and 1967. Five more shorts have been produced since 2001, making a total of 166 shorts.\n>\n> A number of spin-offs have been made, including the television series The Tom and Jerry Show (1975), The Tom and Jerry Comedy Show (1980–1982), Tom & Jerry Kids (1990–1993), Tom and Jerry Tales (2006–2008), and The Tom and Jerry Show (2014–2021). In 1992, the first feature-length film based on the series, Tom and Jerry: The Movie, was released. 13 direct-to-video films have been produced since 2002. In 2021, a a live-action/animated hybrid film was released. In 2019, a musical adaptation of the series, titled Tom and Jerry: Purr-Chance to Dream, debuted in Japan, in advance of Tom and Jerry's 80th anniversary.", "description": "Terry and Jom are playing a game on an undirected connected graph with $n$ nodes and $m$ edges, which has a designated \"root\" node $r$. The game follows these rules:\n\n- Terry moves first.  \n- The two players take turns moving along the edges of the graph, with each move traversing one edge (or they can choose to \"rest\" and do nothing).  \n- Terry cannot move to the node where Jom is currently located (Terry is only considered \"caught\" if he voluntarily moves to the same node as Jom; it is allowed for both to move to the same node $u$ within the same turn, as long as Terry goes there first).\n\nGiven $q$ queries, each specifying the starting positions $a$ and $b$ of Terry and Jom respectively, determine whether Terry can reach the root node $r$.", "inputFormat": "The first line contains three integers $n$, $m$, and $r$, representing the number of nodes, the number of edges, and the index of the root, respectively.\n\nThe next $m$ lines each contain two integers $(u, v)$, representing an edge between nodes $u$ and $v$ (Note that there may contain multiple edges and self-loops).\n\nThe following line contains a single integer $q$, representing the number of queries.\n\nThe next $q$ lines each contain two integers $a$ and $b$, representing the starting positions of Terry and Jom, respectively.", "outputFormat": "Since this is a warm-up problem, you should print `I'm here!` at the beginning.\n\nFor the $i$-th line of the next $q$ lines, print `Terry` if Terry can reach the root in the $i$-th query; otherwise, print `Jom`.", "hint": "#### Subtasks and Constraints\n\n| Subtask ID | $n, m, q \\le$ |     Special Properties     | Score |\n| :--------: | :-----------: | :--------------: | :--------: |\n|    $0$     |       $10^6$       | A |    $1$     |\n|    $1$     |     $10$      |        No        |    $9$     |\n|    $2$     |       $10^6$       |  B  |    $15$    |\n|    $3$     |       $10^6$       | C |    $15$    |\n|    $4$     |       $10^6$       |        No        |    $60$    |\n\n- Special Property A: $q = 0$.\n- Special Property B: The graph is a chain.\n- Special Property C: The graph is a star graph.\n\nFor all tests, it is guaranteed that:\n\n- $1 \\le n, m \\le 10^6$;\n- $0 \\le q \\le 10^6$;\n- $1 \\le r, u, v, a, b \\le n$;\n- The given graph is an undirected connected graph.", "locale": "en"}, "zh-CN": {"title": "「GFOI Round 2」Jom & Terry", "background": "我在做 [#3406. 「2020-2021 集训队作业」Tom & Jerry](https://loj.ac/p/3406)……\n\n你说得对，但是：\n> Tom and Jerry is an American animated media franchise and series of comedy short films created in 1940 by William Hanna and Joseph Barbera. Best known for its 161 theatrical short films by Metro-Goldwyn-Mayer, the series centers on the rivalry between the titular characters of a cat named Tom and a mouse named Jerry. Many shorts also feature several recurring characters.\n> \n> In its original run, Hanna and Barbera produced 114 Tom and Jerry shorts for MGM from 1940 to 1958. During this time, they won seven Academy Awards for Best Animated Short Film, tying for first place with Walt Disney's Silly Symphonies with the most awards in the category. After the MGM cartoon studio closed in 1957, MGM revived the series with Gene Deitch directing an additional 13 Tom and Jerry shorts for Rembrandt Films from 1961 to 1962. Tom and Jerry became the highest-grossing animated short film series of that time, overtaking Looney Tunes. Chuck Jones produced another 34 shorts with Sib Tower 12 Productions between 1963 and 1967. Five more shorts have been produced since 2001, making a total of 166 shorts.\n>\n> A number of spin-offs have been made, including the television series The Tom and Jerry Show (1975), The Tom and Jerry Comedy Show (1980–1982), Tom & Jerry Kids (1990–1993), Tom and Jerry Tales (2006–2008), and The Tom and Jerry Show (2014–2021). In 1992, the first feature-length film based on the series, Tom and Jerry: The Movie, was released. 13 direct-to-video films have been produced since 2002. In 2021, a a live-action/animated hybrid film was released. In 2019, a musical adaptation of the series, titled Tom and Jerry: Purr-Chance to Dream, debuted in Japan, in advance of Tom and Jerry's 80th anniversary.", "description": "Terry 和 Jom 在一个 $n$ 个点 $m$ 条边的有“根”无向连通图上博弈（图的根为 $r$），遵循以下规则：\n\n- Terry 先手；\n- 两人轮流在图上移动，每次只能走一条边（也可以睡觉，啥都不干）；\n- Terry 不能走到 Jom 所在的结点（我们认为只有 Terry 自投罗网时才会被抓到，即如果 Terry 先移动到结点 $u$ 后 Jom 在同一回合也移动到 $u$ 是合法的）。\n\n给定 $q$ 次询问，每次询问给定 Terry 和 Jom 的起点 $a, b$，你需要回答 Terry 能否到达根（即点 $r$）。", "inputFormat": "第一行包含三个整数 $n, m, r$，表示点数、边数和根的编号；\n\n接下来 $m$ 行，每行包含两个整数 $(u, v)$ 表示一条边（注意可能存在重边或自环）；\n\n接下来一行包含一个整数 $q$，表示询问数；\n\n接下来 $q$ 行，每行包含两个整数 $a, b$，表示 Terry 和 Jom 的起点。", "outputFormat": "因为这是签到题，所以你应该在开头输出 `I'm here!`。\n\n接下来 $q$ 行的第 $i$ 行，如果在第 $i$ 次询问中 Terry 能到达根就输出 `Terry`，否则输出 `Jom`。", "hint": "#### 【提示】\n\n本题 IO 量较大，请选手使用较快的读入输出方式。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n, m, q \\le$ |     特殊性质     | 分值 |\n| :--------: | :-----------: | :--------------: | :--------: |\n|    $0$     |       $10^6$       | A |    $1$     |\n|    $1$     |     $10$      |        无        |    $9$     |\n|    $2$     |       $10^6$       |  B  |    $15$    |\n|    $3$     |       $10^6$       | C |    $15$    |\n|    $4$     |       $10^6$       |        无        |    $60$    |\n\n- 特殊性质 A：$q = 0$。\n- 特殊性质 B：保证图是一条链。\n- 特殊性质 C：保证图是一个菊花。\n\n对于所有数据，满足：\n\n- $1 \\le n, m \\le 10^6$；\n- $0 \\le q \\le 10^6$；\n- $1 \\le r, u, v, a, b \\le n$；\n- 给定的图是一个无向连通图。", "locale": "zh-CN"}}}
{"pid": "P11281", "type": "P", "difficulty": 5, "samples": [["3\n0 2 0", "2"], ["7\n0 3 2 0 5 7 0", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "递推", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「GFOI Round 2」Aob & Blice", "background": "", "description": "Aob 和 Blice 在玩游戏。\n\n现在有一个长为 $n$ 的排列 $p$，且 Aob 和 Blice 手里分别有一个初始为空的**不可重**集合 $S_A,S_B$。定义一轮游戏过程如下：\n\n- 首先 Aob 会**随机**选取两个满足 $1 \\leq x < y \\leq n$ 且 $p_x>p_y$ 的数 $x,y$ ，然后从 $(x,y)$ 和 $(p_x,p_y)$ 这两个**有序二元组**中**随机选取一个**放入自己的集合 $S_A$ 中。\n\n- 在这之后，Blice 会从 $(y,x)$ 和 $(p_y,p_x)$ 中选择一个放入自己的集合 $S_B$ 中。**注意这里的 $x,y$ 均为上一步中 Aob 选择的**。\n\n在无限轮游戏之后 $^{\\dagger}$，Aob 和 Blice 会比较他们手里的集合。虽然 Aob 只会随机，Blice 看起来更聪明些，但是 Blice 想要最终他们两个的集合完全相等，这样平局就不会有任何一个人伤心啦！\n\n不幸的是，这个排列中的某些数消失了，于是 Blice 找到了你，想知道有多少种可能的原排列，使得他们两个人能够在无限轮后达成平局。为了方便，你只需要求出答案对 $998244353$ 取模的值。\n\n$^{\\dagger}$ 在“无限轮”之后 Blice 能达到平局，定义为对于任意 $\\varepsilon>0$，存在一个正整数 $N$，使得对于任意 $n>N$，Blice 存在一种策略使得他在 $n$ 轮结束之后**不**平局的概率 $<\\varepsilon$。", "inputFormat": "第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个整数 $p_i$。对于每个 $i$，若 $p_i=0$，则表示第 $i$ 位上的数消失了；否则表示原排列中第 $i$ 位上的数。", "outputFormat": "输出一行一个整数，表示答案对 $998244353$ 取模的值。", "hint": "#### 【样例解释 #1】\n\n两种排列都是合法的：$\\{1,2,3\\},\\{3,2,1\\}$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\leq$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | $9$ | 无 | $20$ |\n| 2 | $2000$ | A | $15$ |\n| 3 | $2000$ | 无 | $10$ |\n| 4 | $10^6$ | A | $15$ |\n| 5 | $10^6$ | B | $10$ |\n| 6 | $10^6$ | 无 | $30$ |\n\n- 特殊性质 A：$p_i \\ne 0$。\n- 特殊性质 B：$p_i = 0$。\n\n对于所有数据，满足：\n\n- $1 \\le n \\le 10^6$；\n- $0 \\le p_i \\le n$；\n- 对于任意 $1 \\le i < j \\le n$，若 $p_i \\ne 0$ 且 $p_j \\ne 0$，则 $p_i \\ne p_j$。", "locale": "zh-CN", "translations": {"en": {"title": "「GFOI Round 2」Aob & Blice", "background": "", "description": "Aob and Blice are playing a game.\n\nThere is a permutation $p$ of length $n$, and both Aob and Blice each hold an initially empty **distinct** set, denoted as $S_A$ and $S_B$ respectively. The rules for one round of the game are as follows:\n\n- First, Aob **randomly** selects two integers $x$ and $y$ such that $1 \\leq x < y \\leq n$ and $p_x > p_y$. Then, Aob **randomly** chooses one of the two **ordered pairs** $(x, y)$ or $(p_x, p_y)$ to add to his set $S_A$.\n\n- After that, Blice must choose one of the pairs $(y, x)$ or $(p_y, p_x)$ to add to her set $S_B$. **Note that $x$ and $y$ are the same as those chosen by Aob in the previous step.**\n\nAfter infinitely many rounds $^{\\dagger}$, Aob and Blice will compare their sets. Although Aob plays randomly, Blice is smarter and hopes to make both sets exactly the same in the end, so the game will end in a tie—this way, neither of them will be upset!\n\nUnfortunately, some elements in the permutation have disappeared. Blice has asked for your help to determine how many possible original permutations could allow them to achieve a tie after infinitely many rounds. For convenience, you only need to compute the answer modulo $998244353$.  \n\n---\n\n$^{\\dagger}$ A tie after infinitely many rounds is defined as follows: for any $\\varepsilon > 0$, there exists a positive integer $N$ such that for all $n > N$, Blice can adopt a strategy ensuring that the probability of not achieving a tie after $n$ rounds is less than $\\varepsilon$.", "inputFormat": "The first line contains a positive integer $n$.\n\nThe second line contains $n$ integers $p_i$. For each $i$, if $p_i = 0$, it indicates that the number at the $i$-th position has disappeared; otherwise, it represents the number that was originally at the $i$-th position in the permutation.", "outputFormat": "Output a single line containing an integer that represents the answer modulo $998244353$.", "hint": "#### Sample $1$ Explanation\n\nExactly two permutations are valid: $\\{1,2,3\\},\\{3,2,1\\}$.\n\n#### Subtasks and Constraints\n\n| Subtask ID | $n \\leq$ | Special Properties | Score |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | $9$ | No | $20$ |\n| 2 | $2000$ | A | $15$ |\n| 3 | $2000$ | No | $10$ |\n| 4 | $10^6$ | A | $15$ |\n| 5 | $10^6$ | B | $10$ |\n| 6 | $10^6$ | No | $30$ |\n\n- Special Property A: $p_i \\ne 0$.\n- Special Property B: $p_i = 0$.\n\nFor all tests, it is guaranteed that:\n\n- $1 \\le n \\le 10^6$;\n- $0 \\le p_i \\le n$;\n- For all $1 \\le i < j \\le n$, if $p_i \\ne 0$ and $p_j \\ne 0$, then $p_i \\ne p_j$.", "locale": "en"}, "zh-CN": {"title": "「GFOI Round 2」Aob & Blice", "background": "", "description": "Aob 和 Blice 在玩游戏。\n\n现在有一个长为 $n$ 的排列 $p$，且 Aob 和 Blice 手里分别有一个初始为空的**不可重**集合 $S_A,S_B$。定义一轮游戏过程如下：\n\n- 首先 Aob 会**随机**选取两个满足 $1 \\leq x < y \\leq n$ 且 $p_x>p_y$ 的数 $x,y$ ，然后从 $(x,y)$ 和 $(p_x,p_y)$ 这两个**有序二元组**中**随机选取一个**放入自己的集合 $S_A$ 中。\n\n- 在这之后，Blice 会从 $(y,x)$ 和 $(p_y,p_x)$ 中选择一个放入自己的集合 $S_B$ 中。**注意这里的 $x,y$ 均为上一步中 Aob 选择的**。\n\n在无限轮游戏之后 $^{\\dagger}$，Aob 和 Blice 会比较他们手里的集合。虽然 Aob 只会随机，Blice 看起来更聪明些，但是 Blice 想要最终他们两个的集合完全相等，这样平局就不会有任何一个人伤心啦！\n\n不幸的是，这个排列中的某些数消失了，于是 Blice 找到了你，想知道有多少种可能的原排列，使得他们两个人能够在无限轮后达成平局。为了方便，你只需要求出答案对 $998244353$ 取模的值。\n\n$^{\\dagger}$ 在“无限轮”之后 Blice 能达到平局，定义为对于任意 $\\varepsilon>0$，存在一个正整数 $N$，使得对于任意 $n>N$，Blice 存在一种策略使得他在 $n$ 轮结束之后**不**平局的概率 $<\\varepsilon$。", "inputFormat": "第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个整数 $p_i$。对于每个 $i$，若 $p_i=0$，则表示第 $i$ 位上的数消失了；否则表示原排列中第 $i$ 位上的数。", "outputFormat": "输出一行一个整数，表示答案对 $998244353$ 取模的值。", "hint": "#### 【样例解释 #1】\n\n两种排列都是合法的：$\\{1,2,3\\},\\{3,2,1\\}$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\leq$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | $9$ | 无 | $20$ |\n| 2 | $2000$ | A | $15$ |\n| 3 | $2000$ | 无 | $10$ |\n| 4 | $10^6$ | A | $15$ |\n| 5 | $10^6$ | B | $10$ |\n| 6 | $10^6$ | 无 | $30$ |\n\n- 特殊性质 A：$p_i \\ne 0$。\n- 特殊性质 B：$p_i = 0$。\n\n对于所有数据，满足：\n\n- $1 \\le n \\le 10^6$；\n- $0 \\le p_i \\le n$；\n- 对于任意 $1 \\le i < j \\le n$，若 $p_i \\ne 0$ 且 $p_j \\ne 0$，则 $p_i \\ne p_j$。", "locale": "zh-CN"}}}
{"pid": "P11282", "type": "P", "difficulty": 5, "samples": [["4\n3\n3 2 1\n5\n1 3 5 2 4\n5\n5 4 3 1 2\n9\n4 7 3 6 1 2 5 8 9", "101\n11111\n11101\n111111101"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "洛谷原创", "O2优化", "洛谷月赛", "分类讨论"], "title": "「GFOI Round 2」Colors", "background": "> 世界が鮮やかに 染まって", "description": "有 $n$ 个球排成一排，从左到右依次编号为 $1 \\sim n$。每个球初始都是红色的。第 $i$ 个球的初始权值为 $p_i$。**保证 $\\bm{n}$ 为奇数且 $\\bm{p}$ 是一个 $\\bm{1 \\sim n}$ 的排列。**\n\n你需要恰好进行 $\\frac{n - 1}{2}$ 次操作。在一次操作中，你需要：\n\n- 选择一个**红色**的球 $i$，使得 $1 \\sim i - 1$ 中至少有一个红球且 $i + 1 \\sim n$ 中至少有一个红球。\n- 设 $j$ 为最大的整数使得 $j < i$ 且球 $j$ 为红球，$k$ 为最小的整数使得 $k > i$ 且球 $k$ 为红球。你要将球 $i$ 和球 $k$ 都染成蓝色。\n- 然后进行以下两种操作的**恰好一个**：\n\t- 将 $p_j$（即球 $j$ 的权值）修改为 $\\max(p_i, p_j, p_k)$；\n    - 将 $p_j$（即球 $j$ 的权值）修改为 $\\min(p_i, p_j, p_k)$。\n\n容易发现进行了 $\\frac{n - 1}{2}$ 次操作后恰好剩下一个红球。\n\n你需要对于每个 $1 \\sim n$ 的正整数 $x$，求出是否能合理地进行操作，使得最后剩下的红球的权值为 $x$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个正整数 $p_1, p_2, \\ldots, p_n$。", "outputFormat": "对于每组数据，输出一行一个 $01$ 串。对于每个 $1 \\sim n$ 的正整数 $i$，若能合理地进行操作使得最后剩下的红球的权值为 $i$，那么这个 $01$ 串的第 $i$ 位为 $1$，否则为 $0$。", "hint": "#### 【样例解释】\n\n对于第一组数据，初始的球的状态（颜色和权值）依次为 $\\color{red}{3\\ 2\\ 1}$。\n\n你需要进行 $1$ 次操作。在这次操作中你只能选择球 $2$，将球 $2$ 和球 $3$ 染成蓝色。\n\n- 若你选择将 $p_1$ 修改为 $\\max(p_1, p_2, p_3)$，那么操作后球的状态变为 $\\color{red}{3}\\ \\color{blue}{2\\ 1}$，最后剩下的红球的权值为 $3$；\n- 若你选择将 $p_1$ 修改为 $\\min(p_1, p_2, p_3)$，那么操作后球的状态变为 $\\color{red}{1}\\ \\color{blue}{2\\ 1}$，最后剩下的红球的权值为 $1$。\n\n所以你输出一个 $01$ 串需要使得第 $1$ 和第 $3$ 位为 $1$，其余位为 $0$。\n\n对于第二组数据，容易证明最后剩下的红球权值可以取 $1 \\sim n$ 之间的所有正整数。下面给出一个能使得最后剩下的红球权值为 $2$ 的操作过程：\n\n- 初始的球的状态为 $\\color{red}{1\\ 3\\ 5\\ 2\\ 4}$。\n- 选择球 $2$，将球 $2$ 和球 $3$ 染成蓝色，并将 $p_1$ 赋值为 $\\max(p_1, p_2, p_3) = 5$。操作后球的状态变为 $\\color{red}{5}\\ \\color{blue}{3\\ 5}\\ \\color{red}{2\\ 4}$。\n- 选择球 $4$，将球 $4$ 和球 $5$ 染成蓝色，并将 $p_1$ 赋值为 $\\min(p_1, p_4, p_5) = 2$。操作后球的状态变为 $\\color{red}{2}\\ \\color{blue}{3\\ 5\\ 2\\ 4}$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\le$ | $\\sum n \\le$ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $5$ | $10^4$ | 无 | $16$ |\n| $2$ | $19$ | $10^4$ | 无 | $19$ |\n| $3$ | $99$ | $10^6$ | 无 | $19$ |\n| $4$ | $10^6 - 1$ | $10^6$ | A | $3$ |\n| $5$ | $10^6 - 1$ | $10^6$ | 无 | $43$ |\n\n- 特殊性质 A：$p_i = i$。\n\n对于所有数据，满足：\n\n- $1 \\le T \\le 10^5$；\n- $3 \\le n \\le 10^6 - 1$ 且 $n$ 是奇数；\n- $\\sum n \\le 10^6$；\n- $p$ 是一个 $1 \\sim n$ 的排列。", "locale": "zh-CN", "translations": {"en": {"title": "「GFOI Round 2」Colors", "background": "> 世界が鮮やかに 染まって", "description": "There are $n$ balls arranged in a row, numbered from $1$ to $n$ from left to right. Initially, each ball is red. The initial weight of the $i$-th ball is $p_i$. **It is guaranteed that $\\bm{n}$ is an odd number and that $\\bm{p}$ is a permutation of $\\bm{1 \\sim n}$.**\n\nYou need to perform exactly $\\frac{n - 1}{2}$ operations. In one operation, you must:\n\n- Choose a **red** ball $i$ such that there is at least one red ball in the range $1 \\sim i - 1$ and at least one red ball in the range $i + 1 \\sim n$.\n- Let $j$ be the largest integer such that $j < i$ and the ball at position $j$ is red, and let $k$ be the smallest integer such that $k > i$ and the ball at position $k$ is red. You will paint both balls $i$ and $k$ blue.\n- Then, perform exactly one of the following two operations:\n  - Modify $p_j$ (the weight of ball $j$) to $\\max(p_i, p_j, p_k)$;\n  - Modify $p_j$ (the weight of ball $j$) to $\\min(p_i, p_j, p_k)$.\n\nAfter performing $\\frac{n - 1}{2}$ operations, there will be exactly one red ball left.\n\nYou need to determine for each positive integer $x$ in the range $1$ to $n$ whether it is possible to perform the operations in such a way that the weight of the remaining red ball is $x$.", "inputFormat": "**This problem has multiple test cases in a single test.**\n\nThe first line contains a positive integer $T$, indicating the number of test cases.\n\nFor each test case:\n\n- The first line contains a positive integer $n$.\n- The second line contains $n$ positive integers $p_1, p_2, \\ldots, p_n$.", "outputFormat": "For each test case, output a line containing a $01$ string. For each positive integer $i$ in the range $1 \\sim n$, if it is possible to perform the operations in such a way that the weight of the remaining red ball is $i$, then the $i$-th position of this $01$ string will be $1$; otherwise, it will be $0$.", "hint": "#### Sample Explanation\n\nFor the first test case, the initial state of the balls (color and weight) is $\\color{red}{3\\ 2\\ 1}$.\n\nYou need to perform $1$ operation. In this operation, you can only choose ball $2$ and paint both balls $2$ and $3$ blue.\n\n- If you choose to modify $p_1$ to $\\max(p_1, p_2, p_3)$, then after the operation, the state of the balls will be $\\color{red}{3}\\ \\color{blue}{2\\ 1}$, and the weight of the remaining red ball will be $3$;\n- If you choose to modify $p_1$ to $\\min(p_1, p_2, p_3)$, then after the operation, the state of the balls will be $\\color{red}{1}\\ \\color{blue}{2\\ 1}$, and the weight of the remaining red ball will be $1$.\n\nThus, you will output a $01$ string that has $1$s at the $1$st and $3$rd positions, and $0$s in the other positions.\n\nFor the second test case, it can be easily proven that the weight of the remaining red ball can take all positive integers from $1$ to $n$. Here is an example of a sequence of operations that results in the remaining red ball having a weight of $2$:\n\n- The initial state of the balls is $\\color{red}{1\\ 3\\ 5\\ 2\\ 4}$.\n- Choose ball $2$, paint both balls $2$ and $3$ blue, and set $p_1$ to $\\max(p_1, p_2, p_3) = 5$. After this operation, the state of the balls becomes $\\color{red}{5}\\ \\color{blue}{3\\ 5}\\ \\color{red}{2\\ 4}$.\n- Choose ball $4$, paint both balls $4$ and $5$ blue, and set $p_1$ to $\\min(p_1, p_4, p_5) = 2$. After this operation, the state of the balls becomes $\\color{red}{2}\\ \\color{blue}{3\\ 5\\ 2\\ 4}$.\n\n#### Subtasks and Constraints\n\n| Subtask ID | $n \\le$ | $\\sum n \\le$ | Special Properties | Score |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $5$ | $10^4$ | No | $16$ |\n| $2$ | $19$ | $10^4$ | No | $19$ |\n| $3$ | $99$ | $10^6$ | No | $19$ |\n| $4$ | $10^6 - 1$ | $10^6$ | A | $3$ |\n| $5$ | $10^6 - 1$ | $10^6$ | No | $43$ |\n\n- Special Property A: $p_i = i$.\n\nFor all tests, it is guaranteed that:\n\n- $1 \\le T \\le 10^5$;\n- $3 \\le n \\le 10^6 - 1$ and $n$ is an odd number;\n- $\\sum n \\le 10^6$;\n- $p$ is a permutation of $1 \\sim n$.", "locale": "en"}, "zh-CN": {"title": "「GFOI Round 2」Colors", "background": "> 世界が鮮やかに 染まって", "description": "有 $n$ 个球排成一排，从左到右依次编号为 $1 \\sim n$。每个球初始都是红色的。第 $i$ 个球的初始权值为 $p_i$。**保证 $\\bm{n}$ 为奇数且 $\\bm{p}$ 是一个 $\\bm{1 \\sim n}$ 的排列。**\n\n你需要恰好进行 $\\frac{n - 1}{2}$ 次操作。在一次操作中，你需要：\n\n- 选择一个**红色**的球 $i$，使得 $1 \\sim i - 1$ 中至少有一个红球且 $i + 1 \\sim n$ 中至少有一个红球。\n- 设 $j$ 为最大的整数使得 $j < i$ 且球 $j$ 为红球，$k$ 为最小的整数使得 $k > i$ 且球 $k$ 为红球。你要将球 $i$ 和球 $k$ 都染成蓝色。\n- 然后进行以下两种操作的**恰好一个**：\n\t- 将 $p_j$（即球 $j$ 的权值）修改为 $\\max(p_i, p_j, p_k)$；\n    - 将 $p_j$（即球 $j$ 的权值）修改为 $\\min(p_i, p_j, p_k)$。\n\n容易发现进行了 $\\frac{n - 1}{2}$ 次操作后恰好剩下一个红球。\n\n你需要对于每个 $1 \\sim n$ 的正整数 $x$，求出是否能合理地进行操作，使得最后剩下的红球的权值为 $x$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个正整数 $p_1, p_2, \\ldots, p_n$。", "outputFormat": "对于每组数据，输出一行一个 $01$ 串。对于每个 $1 \\sim n$ 的正整数 $i$，若能合理地进行操作使得最后剩下的红球的权值为 $i$，那么这个 $01$ 串的第 $i$ 位为 $1$，否则为 $0$。", "hint": "#### 【样例解释】\n\n对于第一组数据，初始的球的状态（颜色和权值）依次为 $\\color{red}{3\\ 2\\ 1}$。\n\n你需要进行 $1$ 次操作。在这次操作中你只能选择球 $2$，将球 $2$ 和球 $3$ 染成蓝色。\n\n- 若你选择将 $p_1$ 修改为 $\\max(p_1, p_2, p_3)$，那么操作后球的状态变为 $\\color{red}{3}\\ \\color{blue}{2\\ 1}$，最后剩下的红球的权值为 $3$；\n- 若你选择将 $p_1$ 修改为 $\\min(p_1, p_2, p_3)$，那么操作后球的状态变为 $\\color{red}{1}\\ \\color{blue}{2\\ 1}$，最后剩下的红球的权值为 $1$。\n\n所以你输出一个 $01$ 串需要使得第 $1$ 和第 $3$ 位为 $1$，其余位为 $0$。\n\n对于第二组数据，容易证明最后剩下的红球权值可以取 $1 \\sim n$ 之间的所有正整数。下面给出一个能使得最后剩下的红球权值为 $2$ 的操作过程：\n\n- 初始的球的状态为 $\\color{red}{1\\ 3\\ 5\\ 2\\ 4}$。\n- 选择球 $2$，将球 $2$ 和球 $3$ 染成蓝色，并将 $p_1$ 赋值为 $\\max(p_1, p_2, p_3) = 5$。操作后球的状态变为 $\\color{red}{5}\\ \\color{blue}{3\\ 5}\\ \\color{red}{2\\ 4}$。\n- 选择球 $4$，将球 $4$ 和球 $5$ 染成蓝色，并将 $p_1$ 赋值为 $\\min(p_1, p_4, p_5) = 2$。操作后球的状态变为 $\\color{red}{2}\\ \\color{blue}{3\\ 5\\ 2\\ 4}$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\le$ | $\\sum n \\le$ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $5$ | $10^4$ | 无 | $16$ |\n| $2$ | $19$ | $10^4$ | 无 | $19$ |\n| $3$ | $99$ | $10^6$ | 无 | $19$ |\n| $4$ | $10^6 - 1$ | $10^6$ | A | $3$ |\n| $5$ | $10^6 - 1$ | $10^6$ | 无 | $43$ |\n\n- 特殊性质 A：$p_i = i$。\n\n对于所有数据，满足：\n\n- $1 \\le T \\le 10^5$；\n- $3 \\le n \\le 10^6 - 1$ 且 $n$ 是奇数；\n- $\\sum n \\le 10^6$；\n- $p$ 是一个 $1 \\sim n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P11283", "type": "P", "difficulty": 6, "samples": [["4 4 114 514 1919 810\n1 3 4 2\n", "1\n"], ["10 100 123456 789123 456789 123456789\n3 9 5 7 6 4 10 8 2 1\n", "142\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "ST 表", "洛谷月赛", "单调栈"], "title": "「GFOI Round 2」Turtle and Nediam", "background": "", "description": "对一个元素互不相同的长度 $\\ge 3$ 的正整数序列 $a$，定义 $a$ 的“肿胃数（nediam）”$f(a)$ 为：\n\n- 当 $|a| = 3$ 时，$f(a)$ 为 $a$ 的中位数；\n- 当 $|a| > 3$ 时，取 $a$ 的任意一个长度为 $3$ 的子段 $[a_i, a_{i + 1}, a_{i + 2}]$，记这个子段的中位数为 $x$，$a$ 删掉 $x$ 后的序列为 $b$，$f(a)$ 为所有 $b$ 中 $f(b)$ 的最大值。\n\n乌龟给你一个 $1 \\sim n$ 的排列 $p_1, p_2, \\ldots, p_n$ 和 $m$ 次询问，每次询问给定 $l, r$，你需要求出 $[p_l, p_{l + 1}, \\ldots, p_r]$ 的“肿胃数（nediam）”，即 $f([p_l, p_{l + 1}, \\ldots, p_r])$。", "inputFormat": "为了加快读入速度，我们采用以下读入方法。\n\n第一行包含六个正整数 $n, m, seed, A, B, C$。\n\n第二行包含一个排列 $p_1, p_2, \\ldots, p_n$。\n\n接下来的 $m$ 组询问，每组询问你要按照如下的方式生成 $(l, r)$：\n\n```cpp\nunsigned seed, A, B, C;\n\ninline unsigned rnd() {\n\tseed = A * seed * seed + B * seed + C;\n\tseed = seed ^ (seed << 27);\n\tseed = seed ^ (seed >> 19);\n\treturn seed;\n}\n\ninline std::pair<int, int> gen() {\n\tint l, r;\n\tdo {\n\t\tl = rnd() % n + 1;\n\t\tr = rnd() % n + 1;\n\t} while (abs(l - r) < 2);\n\tif (l > r) {\n\t\tstd::swap(l, r);\n\t}\n\treturn std::make_pair(l, r);\n}\n```\n\n每组询问调用一次 `gen()` 生成这组询问的 $(l, r)$。", "outputFormat": "为了加快输出速度，我们采用以下输出方法。\n\n设第 $i$ 组询问的答案为 $ans_i$，你需要输出 $(1 \\times ans_1) \\oplus (2 \\times ans_2) \\oplus \\cdots \\oplus (m \\times ans_m)$，其中 $\\oplus$ 为按位异或。", "hint": "#### 【样例解释 #1】\n\n生成的四组询问分别为 $(1, 4), (1, 3), (1, 3), (2, 4)$，答案分别为 $2, 3, 3, 3$，所以你需要输出 $(1 \\times 2) \\oplus (2 \\times 3) \\oplus (3 \\times 3) \\oplus (4 \\times 3) = 2 \\oplus 6 \\oplus 9 \\oplus 12 = 1$。\n\n对于第一组询问，选择子段 $[1, 3, 4]$ 或 $[3, 4, 2]$ 都会使得 $3$ 被删除。删除 $3$ 后的序列为 $[1, 4, 2]$，中位数为 $2$。\n\n#### 【数据范围】\n\n**本题使用捆绑测试。**\n\n| 子任务编号 | $n \\le$ | $m \\le$ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $18$ | $100$ | 无 | $9$ |\n| $2$ | $10^6$ | $5 \\times 10^6$ | A | $5$ |\n| $3$ | $10^3$ | $10^4$ | 无 | $19$ |\n| $4$ | $10^5$ | $10^5$ | 无 | $17$ |\n| $5$ | $10^6$ | $10^6$ | B | $15$ |\n| $6$ | $10^6$ | $10^6$ | 无 | $13$ |\n| $7$ | $10^6$ | $5 \\times 10^6$ | 无 | $22$ |\n\n- 特殊性质 A：$p_i = i$；\n- 特殊性质 B：$p$ 从所有 $1 \\sim n$ 的排列中等概率随机生成。\n\n对于所有数据，满足：\n\n- $3 \\le n \\le 10^6$；\n- $1 \\le m \\le 5 \\times 10^6$；\n- $0 \\le seed, A, B, C < 2^{32}$；\n- $p$ 是一个 $1 \\sim n$ 的排列。", "locale": "zh-CN", "translations": {"en": {"title": "「GFOI Round 2」Turtle and Nediam", "background": "", "description": "For a sequence $a$ of distinct positive integers with length $|a| \\geq 3$, the \"nediam\" $f(a)$ is defined as follows:\n\n- When $|a| = 3$, $f(a)$ is the median of $a$;\n- When $|a| > 3$, for any contiguous subsequence of length $3$ denoted as $[a_i, a_{i + 1}, a_{i + 2}]$, let the median of this subsequence be $x$. The sequence obtained by removing $x$ from $a$ is denoted as $b$, and $f(a)$ is the maximum value of $f(b)$ over all such subsequences.\n\nTurtle gives you a permutation $p_1, p_2, \\ldots, p_n$ of the integers from $1$ to $n$ and $m$ queries. For each query, given $l$ and $r$, you need to calculate the \"nediam\" $f([p_l, p_{l + 1}, \\ldots, p_r])$.", "inputFormat": "To speed up the input process, we will use the following method.\n\nThe first line contains six positive integers $n, m, seed, A, B, C$.\n\nThe second line contains a permutation $p_1, p_2, \\ldots, p_n$.\n\nFor the next $m$ queries, you will generate the pair $(l, r)$ as follows:\n\n```cpp\nunsigned seed, A, B, C;\n\ninline unsigned rnd() {\n\tseed = A * seed * seed + B * seed + C;\n\tseed = seed ^ (seed << 27);\n\tseed = seed ^ (seed >> 19);\n\treturn seed;\n}\n\ninline std::pair<int, int> gen() {\n\tint l, r;\n\tdo {\n\t\tl = rnd() % n + 1;\n\t\tr = rnd() % n + 1;\n\t} while (abs(l - r) < 2);\n\tif (l > r) {\n\t\tstd::swap(l, r);\n\t}\n\treturn std::make_pair(l, r);\n}\n```\n\nFor each query, call `gen()` once to generate the pair $(l, r)$ for that query.", "outputFormat": "To speed up the output process, we will use the following method.\n\nLet the answer for the $i$-th query be $ans_i$. You need to output $(1 \\times ans_1) \\oplus (2 \\times ans_2) \\oplus \\cdots \\oplus (m \\times ans_m)$, where $\\oplus$ denotes the bitwise XOR operation.", "hint": "#### Sample $1$ Explanation\n\nThe generated four queries are $(1, 4), (1, 3), (1, 3), (2, 4)$, with answers $2, 3, 3, 3$ respectively. Therefore, you need to output $(1 \\times 2) \\oplus (2 \\times 3) \\oplus (3 \\times 3) \\oplus (4 \\times 3) = 2 \\oplus 6 \\oplus 9 \\oplus 12 = 1$.\n\nFor the first query, choosing the contiguous subsequence $[1, 3, 4]$ or $[3, 4, 2]$ will result in the deletion of $3$. After removing $3$, the remaining sequence is $[1, 4, 2]$, and the median is $2$.\n\n#### Subtasks and Constraints\n\n| Subtask ID | $n \\le$ | $m \\le$ | Special Properties | Score |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $18$ | $100$ | No | $9$ |\n| $2$ | $10^6$ | $5 \\times 10^6$ | A | $5$ |\n| $3$ | $10^3$ | $10^4$ | No | $19$ |\n| $4$ | $10^5$ | $10^5$ | No | $17$ |\n| $5$ | $10^6$ | $10^6$ | B | $15$ |\n| $6$ | $10^6$ | $10^6$ | No | $13$ |\n| $7$ | $10^6$ | $5 \\times 10^6$ | No | $22$ |\n\n- Special Property A: $p_i = i$.\n- Special Property B: $p$ is randomly generated with equal probability from all permutations of $1 \\sim n$.\n\nFor all tests, it is guaranteed that:\n\n- $3 \\le n \\le 10^6$;\n- $1 \\le m \\le 5 \\times 10^6$;\n- $0 \\le seed, A, B, C < 2^{32}$;\n- $p$ is a permutation of $1 \\sim n$.", "locale": "en"}, "zh-CN": {"title": "「GFOI Round 2」Turtle and Nediam", "background": "", "description": "对一个元素互不相同的长度 $\\ge 3$ 的正整数序列 $a$，定义 $a$ 的“肿胃数（nediam）”$f(a)$ 为：\n\n- 当 $|a| = 3$ 时，$f(a)$ 为 $a$ 的中位数；\n- 当 $|a| > 3$ 时，取 $a$ 的任意一个长度为 $3$ 的子段 $[a_i, a_{i + 1}, a_{i + 2}]$，记这个子段的中位数为 $x$，$a$ 删掉 $x$ 后的序列为 $b$，$f(a)$ 为所有 $b$ 中 $f(b)$ 的最大值。\n\n乌龟给你一个 $1 \\sim n$ 的排列 $p_1, p_2, \\ldots, p_n$ 和 $m$ 次询问，每次询问给定 $l, r$，你需要求出 $[p_l, p_{l + 1}, \\ldots, p_r]$ 的“肿胃数（nediam）”，即 $f([p_l, p_{l + 1}, \\ldots, p_r])$。", "inputFormat": "为了加快读入速度，我们采用以下读入方法。\n\n第一行包含六个正整数 $n, m, seed, A, B, C$。\n\n第二行包含一个排列 $p_1, p_2, \\ldots, p_n$。\n\n接下来的 $m$ 组询问，每组询问你要按照如下的方式生成 $(l, r)$：\n\n```cpp\nunsigned seed, A, B, C;\n\ninline unsigned rnd() {\n\tseed = A * seed * seed + B * seed + C;\n\tseed = seed ^ (seed << 27);\n\tseed = seed ^ (seed >> 19);\n\treturn seed;\n}\n\ninline std::pair<int, int> gen() {\n\tint l, r;\n\tdo {\n\t\tl = rnd() % n + 1;\n\t\tr = rnd() % n + 1;\n\t} while (abs(l - r) < 2);\n\tif (l > r) {\n\t\tstd::swap(l, r);\n\t}\n\treturn std::make_pair(l, r);\n}\n```\n\n每组询问调用一次 `gen()` 生成这组询问的 $(l, r)$。", "outputFormat": "为了加快输出速度，我们采用以下输出方法。\n\n设第 $i$ 组询问的答案为 $ans_i$，你需要输出 $(1 \\times ans_1) \\oplus (2 \\times ans_2) \\oplus \\cdots \\oplus (m \\times ans_m)$，其中 $\\oplus$ 为按位异或。", "hint": "#### 【样例解释 #1】\n\n生成的四组询问分别为 $(1, 4), (1, 3), (1, 3), (2, 4)$，答案分别为 $2, 3, 3, 3$，所以你需要输出 $(1 \\times 2) \\oplus (2 \\times 3) \\oplus (3 \\times 3) \\oplus (4 \\times 3) = 2 \\oplus 6 \\oplus 9 \\oplus 12 = 1$。\n\n对于第一组询问，选择子段 $[1, 3, 4]$ 或 $[3, 4, 2]$ 都会使得 $3$ 被删除。删除 $3$ 后的序列为 $[1, 4, 2]$，中位数为 $2$。\n\n#### 【数据范围】\n\n**本题使用捆绑测试。**\n\n| 子任务编号 | $n \\le$ | $m \\le$ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $18$ | $100$ | 无 | $9$ |\n| $2$ | $10^6$ | $5 \\times 10^6$ | A | $5$ |\n| $3$ | $10^3$ | $10^4$ | 无 | $19$ |\n| $4$ | $10^5$ | $10^5$ | 无 | $17$ |\n| $5$ | $10^6$ | $10^6$ | B | $15$ |\n| $6$ | $10^6$ | $10^6$ | 无 | $13$ |\n| $7$ | $10^6$ | $5 \\times 10^6$ | 无 | $22$ |\n\n- 特殊性质 A：$p_i = i$；\n- 特殊性质 B：$p$ 从所有 $1 \\sim n$ 的排列中等概率随机生成。\n\n对于所有数据，满足：\n\n- $3 \\le n \\le 10^6$；\n- $1 \\le m \\le 5 \\times 10^6$；\n- $0 \\le seed, A, B, C < 2^{32}$；\n- $p$ 是一个 $1 \\sim n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P11284", "type": "P", "difficulty": 7, "samples": [["4\n3 2\n5 3\n10 4\n100000 998244353123456", "4\n117\n430352\n967771719"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["递归", "洛谷原创", "O2优化", "矩阵加速", "组合数学", "洛谷月赛"], "title": "「GFOI Round 2」Strings", "background": "", "description": "给你两个正整数 $n, m$。\n\n我们称一个长度为 $k$ 的正整数序列 $a_1, a_2, \\ldots, a_k$ 是好的当且仅当：\n\n- $\\forall i \\in [1, k], 1 \\le a_i \\le m$；\n- 存在一个正整数 $l \\in [1, \\frac{k}{3}]$ 满足：$\\forall i \\in [1, l], a_i = a_{2l + 1 - i}$。\n\n求有多少个长度 $\\le n$ 的好的序列，对 $10^9 + 7$ 取模。", "inputFormat": "**本题有多组测试数据。**\n\n第一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含两个正整数 $n, m$。", "outputFormat": "对于每组数据，输出一行一个非负整数，表示答案对 $10^9 + 7$ 取模后的值。", "hint": "#### 【样例解释】\n\n对于第一组数据，长度 $\\le 3$ 的好的序列有 $[1, 1, 1], [1, 1, 2], [2, 2, 1], [2, 2, 2]$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | $n \\le$ | $m \\le$ | 子任务依赖 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $10^{18}$ | $1$ | 无 | $1$ |\n| $2$ | $10$ | $4$ | 无 | $7$ |\n| $3$ | $10^5$ | $10^{18}$ | $2$ | $28$ |\n| $4$ | $10^{18}$ | $10^{18}$ | $1, 2, 3$ | $64$ |\n\n对于所有数据，满足：\n\n- $1 \\le T \\le 10$；\n- $3 \\le n \\le 10^{18}$；\n- $1 \\le m \\le 10^{18}$。", "locale": "zh-CN", "translations": {"en": {"title": "「GFOI Round 2」Strings", "background": "", "description": "Given two positive integers $n$ and $m$.\n\nWe define a sequence of positive integers $a_1, a_2, \\ldots, a_k$ of length $k$ as \"good\" if and only if:\n\n- $\\forall i \\in [1, k], 1 \\leq a_i \\leq m$;\n- There exists a positive integer $l \\in [1, \\frac{k}{3}]$ such that: $\\forall i \\in [1, l], a_i = a_{2l + 1 - i}$.\n\nYou need to determine how many good sequences of length $\\leq n$ exist, modulo $10^9 + 7$.", "inputFormat": "**This problem has multiple test cases in a single test.**\n\nThe first line contains a positive integer $T$, indicating the number of test cases.\n\nFor each test case:\n\n- The first line contains two positive integers $n$ and $m$.", "outputFormat": "For each test case, output a line containing a non-negative integer representing the answer modulo $10^9 + 7$.", "hint": "#### Sample Explanation\n\nFor the first test case, the good sequences of length $\\le 3$ are $[1, 1, 1], [1, 1, 2], [2, 2, 1], [2, 2, 2]$.\n\n#### Subtasks and Constraints\n\n| Subtask ID | $n \\le$ | $m \\le$ | Subtask Dependencies | Score |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $10^{18}$ | $1$ | No | $1$ |\n| $2$ | $10$ | $4$ | No | $7$ |\n| $3$ | $10^5$ | $10^{18}$ | $2$ | $28$ |\n| $4$ | $10^{18}$ | $10^{18}$ | $1, 2, 3$ | $64$ |\n\nFor all tests, it is guaranteed that:\n\n- $1 \\le T \\le 10$;\n- $3 \\le n \\le 10^{18}$;\n- $1 \\le m \\le 10^{18}$.", "locale": "en"}, "zh-CN": {"title": "「GFOI Round 2」Strings", "background": "", "description": "给你两个正整数 $n, m$。\n\n我们称一个长度为 $k$ 的正整数序列 $a_1, a_2, \\ldots, a_k$ 是好的当且仅当：\n\n- $\\forall i \\in [1, k], 1 \\le a_i \\le m$；\n- 存在一个正整数 $l \\in [1, \\frac{k}{3}]$ 满足：$\\forall i \\in [1, l], a_i = a_{2l + 1 - i}$。\n\n求有多少个长度 $\\le n$ 的好的序列，对 $10^9 + 7$ 取模。", "inputFormat": "**本题有多组测试数据。**\n\n第一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含两个正整数 $n, m$。", "outputFormat": "对于每组数据，输出一行一个非负整数，表示答案对 $10^9 + 7$ 取模后的值。", "hint": "#### 【样例解释】\n\n对于第一组数据，长度 $\\le 3$ 的好的序列有 $[1, 1, 1], [1, 1, 2], [2, 2, 1], [2, 2, 2]$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | $n \\le$ | $m \\le$ | 子任务依赖 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $10^{18}$ | $1$ | 无 | $1$ |\n| $2$ | $10$ | $4$ | 无 | $7$ |\n| $3$ | $10^5$ | $10^{18}$ | $2$ | $28$ |\n| $4$ | $10^{18}$ | $10^{18}$ | $1, 2, 3$ | $64$ |\n\n对于所有数据，满足：\n\n- $1 \\le T \\le 10$；\n- $3 \\le n \\le 10^{18}$；\n- $1 \\le m \\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P11285", "type": "P", "difficulty": 7, "samples": [["6 3\n100010", "2"], ["8 4\n10000001", "72"], ["10 5\n0010000100", "428"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2017", "COTS（克罗地亚）"], "title": "[COTS 2017] 周期 Ciklusi", "background": "\n译自 [Izborne Pripreme 2017 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2017/) D1T1。$\\texttt{2s,0.5G}$。", "description": "\n给定简单无向图 $G=(V,E)$，其中 $V\\subset \\{1,2,\\ldots,n\\}$。\n\n给定正整数 $k$。$G$ 中只有编号之差不大于 $k$ 的点间有连边。换言之，$(u,v)\\in E\\iff 1\\le |u-v|\\le k$。\n\n定义 $G$ 的一条**回路**为一个长度为 $m=|V|$ 的序列 $a_0,a_1,\\cdots,a_{m-1}$，满足:\n- $\\forall 0\\le i\\lt m$，都有 $(a_i,a_{(i+1)\\bmod m})\\in E$；\n- $a_0,a_1,\\cdots,a_{m-1}$ 恰好取遍 $V$ 中的每一个元素。\n\n定义两条回路 $a,a'$ **本质相同**，当且仅当它们循环同构。形式化地说，两条回路 $a,a'$ 本质相同，当且仅当存在非负整数 $k$，使得 $a_0=a'_{k\\bmod m},a_1=a'_{(1+k)\\bmod m},\\cdots,a_{m-1}=a'_{(m-1+k)\\bmod m}$。\n\n求出 $G$ 中本质不同的回路条数，答案对 $(10^9+7)$ 取模。", "inputFormat": "\n第一行，两个正整数 $n,k$。\n\n第二行，一个长度为 $n$ 的 $\\texttt{01}$ 串 $s$。当且仅当 $s_i=1$ 时，$i\\in V$。\n\n保证 $|V|+3\\le |n|$。", "outputFormat": "输出一行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 100$；\n- $3\\le k\\le 5$；\n- $|V|+3\\le n$。\n\n\n| 子任务编号 | $n\\le $ |  $k\\le $ |得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 20 $    |  $5$ |  $ 10 $   |  \n| $ 2 $    | $ 100 $   |  $3$ |  $ 40 $   |  \n| $ 3 $    | $ 100 $ | $5$ | $ 50 $   |  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2017] 周期 Ciklusi", "background": "\n译自 [Izborne Pripreme 2017 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2017/) D1T1。$\\texttt{2s,0.5G}$。", "description": "\n给定简单无向图 $G=(V,E)$，其中 $V\\subset \\{1,2,\\ldots,n\\}$。\n\n给定正整数 $k$。$G$ 中只有编号之差不大于 $k$ 的点间有连边。换言之，$(u,v)\\in E\\iff 1\\le |u-v|\\le k$。\n\n定义 $G$ 的一条**回路**为一个长度为 $m=|V|$ 的序列 $a_0,a_1,\\cdots,a_{m-1}$，满足:\n- $\\forall 0\\le i\\lt m$，都有 $(a_i,a_{(i+1)\\bmod m})\\in E$；\n- $a_0,a_1,\\cdots,a_{m-1}$ 恰好取遍 $V$ 中的每一个元素。\n\n定义两条回路 $a,a'$ **本质相同**，当且仅当它们循环同构。形式化地说，两条回路 $a,a'$ 本质相同，当且仅当存在非负整数 $k$，使得 $a_0=a'_{k\\bmod m},a_1=a'_{(1+k)\\bmod m},\\cdots,a_{m-1}=a'_{(m-1+k)\\bmod m}$。\n\n求出 $G$ 中本质不同的回路条数，答案对 $(10^9+7)$ 取模。", "inputFormat": "\n第一行，两个正整数 $n,k$。\n\n第二行，一个长度为 $n$ 的 $\\texttt{01}$ 串 $s$。当且仅当 $s_i=1$ 时，$i\\in V$。\n\n保证 $|V|+3\\le |n|$。", "outputFormat": "输出一行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 100$；\n- $3\\le k\\le 5$；\n- $|V|+3\\le n$。\n\n\n| 子任务编号 | $n\\le $ |  $k\\le $ |得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 20 $    |  $5$ |  $ 10 $   |  \n| $ 2 $    | $ 100 $   |  $3$ |  $ 40 $   |  \n| $ 3 $    | $ 100 $ | $5$ | $ 50 $   |  ", "locale": "zh-CN"}}}
{"pid": "P11286", "type": "P", "difficulty": 6, "samples": [["10 3\n3 5 5 4 3 6 10 0 4 7\n2 10 9\n6 6 2\n2 8 4", "6\n3\n4"], ["8 5\n2 3 0 9 2 6 0 6\n5 6 8\n3 4 7\n3 8 8\n8 8 7\n6 7 9", "6\n7\n6\n6\n7"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2017", "二分", "树状数组", "COTS（克罗地亚）"], "title": "[COTS 2017] 盗道 Krimošten", "background": "译自 [Izborne Pripreme 2017 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2017/) D1T2。$\\texttt{4s,0.5G}$。\n\n库纳（Kuna）是克罗地亚的货币单位。", "description": "\n海岸线上有一排房子，从西到东标号 $1\\sim n$。第 $i$ 座房子内有 $a_i$ 库纳。\n\n有 $m$ 个窃贼要行窃。第 $i$ 个窃贼初始囊中有 $c_i$ 库纳，他将依次对编号为 $l_i,l_i+1,\\cdots, r_i$ 的房子行窃。\n\n盗亦有道，窃贼们践行盗之道。当窃贼对编号为 $j$ 的房子行窃时，令他囊中有 $k$ 库纳：\n\n- 若 $k\\lt a_j$，则窃贼将 $1$ 库纳收入囊中，即 $k\\gets k+1$；\n- 若 $k=a_j$，无事发生；\n- 若 $k\\gt a_j$，则窃贼拿出 $1$ 库纳赠给房主，即 $k\\gets k-1$。\n\n对于每个窃贼，求出他最后囊中会有多少库纳。\n\n需要注意的是，**每个窃贼的行窃是独立的，不互相影响**。换句话说，可以认为一个窃贼行窃结束后，（在下一个窃贼行窃前）房子会恢复到初始状态。", "inputFormat": "\n第一行，两个正整数 $n,m$;\n\n第二行，$n$ 个非负整数 $a_1,a_2,\\cdots,a_n$;\n\n接下来 $m$ 行，每行三个整数 $l_i,r_i,c_i$。", "outputFormat": "对于每个询问，输出一行一个整数表示答案。\n", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 5\\times 10^5$；\n- $0\\le a_i,c_i\\le 10^6$；\n- $1\\le l_i\\le r_i\\le n $。\n\n\n| 子任务编号 | $n\\le $ |  $m\\le $ |得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 10^3 $    |  $10^3$ |  $ 7 $   |  \n| $ 2 $    | $ 5\\times 10^4 $   |  $10^5$ |  $ 48 $   |  \n| $ 3 $    | $ 5\\times 10^5 $ | $5\\times 10^5$ | $ 45 $   |  \n\n再次提醒，**每个窃贼的行窃是独立的，不互相影响**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2017] 盗道 Krimošten", "background": "译自 [Izborne Pripreme 2017 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2017/) D1T2。$\\texttt{4s,0.5G}$。\n\n库纳（Kuna）是克罗地亚的货币单位。", "description": "\n海岸线上有一排房子，从西到东标号 $1\\sim n$。第 $i$ 座房子内有 $a_i$ 库纳。\n\n有 $m$ 个窃贼要行窃。第 $i$ 个窃贼初始囊中有 $c_i$ 库纳，他将依次对编号为 $l_i,l_i+1,\\cdots, r_i$ 的房子行窃。\n\n盗亦有道，窃贼们践行盗之道。当窃贼对编号为 $j$ 的房子行窃时，令他囊中有 $k$ 库纳：\n\n- 若 $k\\lt a_j$，则窃贼将 $1$ 库纳收入囊中，即 $k\\gets k+1$；\n- 若 $k=a_j$，无事发生；\n- 若 $k\\gt a_j$，则窃贼拿出 $1$ 库纳赠给房主，即 $k\\gets k-1$。\n\n对于每个窃贼，求出他最后囊中会有多少库纳。\n\n需要注意的是，**每个窃贼的行窃是独立的，不互相影响**。换句话说，可以认为一个窃贼行窃结束后，（在下一个窃贼行窃前）房子会恢复到初始状态。", "inputFormat": "\n第一行，两个正整数 $n,m$;\n\n第二行，$n$ 个非负整数 $a_1,a_2,\\cdots,a_n$;\n\n接下来 $m$ 行，每行三个整数 $l_i,r_i,c_i$。", "outputFormat": "对于每个询问，输出一行一个整数表示答案。\n", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 5\\times 10^5$；\n- $0\\le a_i,c_i\\le 10^6$；\n- $1\\le l_i\\le r_i\\le n $。\n\n\n| 子任务编号 | $n\\le $ |  $m\\le $ |得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 10^3 $    |  $10^3$ |  $ 7 $   |  \n| $ 2 $    | $ 5\\times 10^4 $   |  $10^5$ |  $ 48 $   |  \n| $ 3 $    | $ 5\\times 10^5 $ | $5\\times 10^5$ | $ 45 $   |  \n\n再次提醒，**每个窃贼的行窃是独立的，不互相影响**。", "locale": "zh-CN"}}}
{"pid": "P11287", "type": "P", "difficulty": 5, "samples": [["6 7\n0 0 1 0 0 1\n4 3 0 9 6 2\n1 2\n2 3\n4 3\n4 1\n5 3\n5 6\n3 6\n2\n2 3\n2 6", "22\n8"], ["6 6\n1 0 1 1 0 0\n1 2 4 3 5 6\n1 2\n1 3\n3 2\n6 5\n4 5\n1 6\n8\n2 3\n1 2 7\n2 3\n2 1\n1 6 0\n1 4 9\n2 1\n2 4", "6\n11\n19\n13\n14"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2017", "根号分治", "COTS（克罗地亚）"], "title": "[COTS 2017] 影响 Utjecaj", "background": "译自 [Izborne Pripreme 2017 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2017/) D2T1。$\\texttt{1.5s,0.5G}$。\n", "description": "\n给定 $n$ 个点 $m$ 条边的无向图（不一定连通，无自环，可能有重边）。\n\n点 $i$ 的点权为 $a_i$。此外，图中有若干个点是**关键点**。\n\n定义关键点 $u$ 的**影响力**为：不经过其他关键点（也不从其他关键点出发），且能到达点 $u$ 的点的点权和。\n\n有 $q$ 次操作：\n\n- $\\texttt{1}$ $u$ $x$：令 $a_u\\gets x$；\n- $\\texttt{2}$ $v$：查询关键点 $v$ 的影响力。\n\n依次处理之，并对每个操作 $2$ 输出答案。\n", "inputFormat": "\n\n第一行，两个正整数 $n,m$;\n\n第二行，$n$ 个非零即一的整数 $x_1,x_2,\\cdots,x_n$。点 $i$ 是关键点当且仅当 $x_i=1$。\n\n第三行，$n$ 个整数 $a_1,a_2,\\cdots,a_n$。\n\n接下来 $m$ 行，每行两个正整数 $u,v$，表示图中的一条边。\n\n接下来一行，一个正整数 $q$。\n\n接下来 $q$ 行，每行若干个整数描述一个操作。", "outputFormat": "对于每个操作 $2$，输出一行一个整数表示答案。\n", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n,m,q\\le 2\\times 10^5$；\n- $0\\le a_i,x\\le 10^9$；\n- $1\\le u,v\\le n$；\n- 图中无自环；\n- 操作 $2$ 中给定的点 $v$ 是关键点。\n\n\n| 子任务编号 | $n,m,q\\le $ |  特殊性质 |得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 10^3 $    |   |  $ 10 $   |  \n| $ 2 $    | $ 2\\times 10^5 $   |  A |  $ 20 $   |  \n| $ 3 $    | $ 2\\times 10^5 $ |  | $ 70 $   |  \n\n特殊性质 A：没有操作 $1$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2017] 影响 Utjecaj", "background": "译自 [Izborne Pripreme 2017 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2017/) D2T1。$\\texttt{1.5s,0.5G}$。\n", "description": "\n给定 $n$ 个点 $m$ 条边的无向图（不一定连通，无自环，可能有重边）。\n\n点 $i$ 的点权为 $a_i$。此外，图中有若干个点是**关键点**。\n\n定义关键点 $u$ 的**影响力**为：不经过其他关键点（也不从其他关键点出发），且能到达点 $u$ 的点的点权和。\n\n有 $q$ 次操作：\n\n- $\\texttt{1}$ $u$ $x$：令 $a_u\\gets x$；\n- $\\texttt{2}$ $v$：查询关键点 $v$ 的影响力。\n\n依次处理之，并对每个操作 $2$ 输出答案。\n", "inputFormat": "\n\n第一行，两个正整数 $n,m$;\n\n第二行，$n$ 个非零即一的整数 $x_1,x_2,\\cdots,x_n$。点 $i$ 是关键点当且仅当 $x_i=1$。\n\n第三行，$n$ 个整数 $a_1,a_2,\\cdots,a_n$。\n\n接下来 $m$ 行，每行两个正整数 $u,v$，表示图中的一条边。\n\n接下来一行，一个正整数 $q$。\n\n接下来 $q$ 行，每行若干个整数描述一个操作。", "outputFormat": "对于每个操作 $2$，输出一行一个整数表示答案。\n", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n,m,q\\le 2\\times 10^5$；\n- $0\\le a_i,x\\le 10^9$；\n- $1\\le u,v\\le n$；\n- 图中无自环；\n- 操作 $2$ 中给定的点 $v$ 是关键点。\n\n\n| 子任务编号 | $n,m,q\\le $ |  特殊性质 |得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 10^3 $    |   |  $ 10 $   |  \n| $ 2 $    | $ 2\\times 10^5 $   |  A |  $ 20 $   |  \n| $ 3 $    | $ 2\\times 10^5 $ |  | $ 70 $   |  \n\n特殊性质 A：没有操作 $1$。\n", "locale": "zh-CN"}}}
{"pid": "P11288", "type": "P", "difficulty": 7, "samples": [["3 2 3\n1 2 1\n2 2 0", "3"], ["7 10 3\n1 3 1\n3 4 1\n3 6 2\n4 5 2\n1 1 1\n1 2 1\n3 3 0\n1 1 1\n3 3 0\n3 6 2", "18"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2017", "线段树", "树状数组", "容斥原理", "COTS（克罗地亚）"], "title": "[COTS 2017] 模板 Z1", "background": "\n译自 [Izborne Pripreme 2017 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2017/) D2T2。$\\texttt{4s,0.5G}$。\n", "description": "\n> **题目**（【模板】RMQ）。\n>\n> 给定整数序列 $a_1,a_2,\\cdots,a_n$，值域为 $[0,h)$。\n> \n> 有 $m$ 次询问。第 $i$ 次询问给定 $l_i,r_i$，求出 $\\displaystyle \\max_{k\\in [l_i,r_i]} \\{a_k\\}$。\n\n\n给定 $n,m,h$，每个询问和对应的答案。求出一共有多少个可能的 $a$ 序列满足条件。只需要求出答案对 $(10^9+7)$ 取模后的结果。", "inputFormat": "\n\n第一行，三个正整数 $n,m,h$;\n\n接下来 $m$ 行，每行三个整数 $l_i,r_i,x_i$，表示 $\\displaystyle \\max_{k\\in [l_i,r_i]} \\{a_k\\}=x_i$。", "outputFormat": "输出一行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：只有 $[1,0,0]$，$[1,0,1]$，$[1,0,2]$ 满足条件。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n,m,h\\le 10^6$；\n- $1\\le l_i\\le r_i\\le n$；\n- $0\\le x_i\\lt h$。\n\n\n| 子任务编号 | $n\\le $ |得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ 100 $    | $ 20 $   |  \n| $ 2 $    | $ 10^3 $   |   $ 30 $   |  \n| $ 3 $    | $10^6$ |  $ 50 $   |  \n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2017] 模板 Z1", "background": "\n译自 [Izborne Pripreme 2017 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2017/) D2T2。$\\texttt{4s,0.5G}$。\n", "description": "\n> **题目**（【模板】RMQ）。\n>\n> 给定整数序列 $a_1,a_2,\\cdots,a_n$，值域为 $[0,h)$。\n> \n> 有 $m$ 次询问。第 $i$ 次询问给定 $l_i,r_i$，求出 $\\displaystyle \\max_{k\\in [l_i,r_i]} \\{a_k\\}$。\n\n\n给定 $n,m,h$，每个询问和对应的答案。求出一共有多少个可能的 $a$ 序列满足条件。只需要求出答案对 $(10^9+7)$ 取模后的结果。", "inputFormat": "\n\n第一行，三个正整数 $n,m,h$;\n\n接下来 $m$ 行，每行三个整数 $l_i,r_i,x_i$，表示 $\\displaystyle \\max_{k\\in [l_i,r_i]} \\{a_k\\}=x_i$。", "outputFormat": "输出一行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：只有 $[1,0,0]$，$[1,0,1]$，$[1,0,2]$ 满足条件。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n,m,h\\le 10^6$；\n- $1\\le l_i\\le r_i\\le n$；\n- $0\\le x_i\\lt h$。\n\n\n| 子任务编号 | $n\\le $ |得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ 100 $    | $ 20 $   |  \n| $ 2 $    | $ 10^3 $   |   $ 30 $   |  \n| $ 3 $    | $10^6$ |  $ 50 $   |  \n\n\n", "locale": "zh-CN"}}}
{"pid": "P11289", "type": "P", "difficulty": 4, "samples": [["3 3\n2 3\n2 1\n5 2", "2 1 2\n1 3\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "O2优化", "排序", "优先队列", "梦熊比赛"], "title": "【MX-S6-T1】「KDOI-11」打印", "background": "原题链接：<https://oier.team/problems/S6A>。", "description": "巡的家有 $m$ 台打印机，编号从 $1$ 到 $m$。她有 $n$ 个文件想要打印。其中第 $i$ 个文件会在第 $t_i$ 时刻下发打印命令，打印这个文件需要 $s_i$ 的时间。\n\n每次发送一个文件打印会选择等待时间最短的打印机，如有多个，选择编号最小的。\n\n你需要告诉巡每台打印机打印了哪些文件。\n\n**保证同一时刻不会下发多个打印命令。**", "inputFormat": "第一行，两个正整数 $n,m$，表示文件的数量和打印机的数量。\n\n接下来 $n$ 行，每行两个正整数 $s_i,t_i$，表示第 $i$ 个文件需要的打印时间以及下发命令的时刻。保证所有 $t_i$ 互不相同。", "outputFormat": "$m$ 行，第 $i$ 行 $k_i + 1$ 个整数：\n- 第一个非负整数 $k_i$，表示第 $i$ 台打印机打印的文件数量；\n- 接下来 $k_i$ 个正整数，从小到大排序，表示其打印的文件编号。", "hint": "**【样例解释 #1】**\n\n共有 $3$ 台打印机。按时间顺序，打印命令如下：\n- 文件 $2$ 在第 $1$ 秒被下发。此时所有打印机等待时间都是 $0$。因此选择编号最小的 $1$ 号打印机。\n- 文件 $3$ 在第 $2$ 秒被下发。此时 $1$ 号打印机正在打印文件 $2$，其余打印机等待时间都是 $0$。因此选择编号最小的 $2$ 号打印机。\n- 文件 $1$ 在第 $3$ 秒被下发。此时 $1$ 号打印机已经完成文件 $2$ 的打印，等待时间为 $0$。因此选择 $1$ 号打印机。\n\n故三台打印机分别打印了编号为 $[1,2],[3],[]$ 的文件。\n\n**【样例 #2】**\n\n见附件中的 `print/print2.in` 与 `print/print2.ans`。\n\n该组样例满足测试点 $1\\sim 3$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `print/print3.in` 与 `print/print3.ans`。\n\n该组样例满足测试点 $4\\sim 9$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `print/print4.in` 与 `print/print4.ans`。\n\n该组样例满足测试点 $18\\sim 20$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\leq n,m\\leq 2\\times 10^5$，$1\\leq s_i,t_i\\leq 10^9$，所有 $t_i$ 互不相同。\n\n| 测试点编号  |   $n,m\\leq$    | $s_i\\leq $ |   $t_i\\leq $   |\n| :---------: | :------------: | :--------: | :------------: |\n|  $1\\sim 3$  |      $10$      |   $10^9$   |     $10^9$     |\n|  $4\\sim 9$  |     $5000$     |   $10^9$   |     $10^9$     |\n| $10\\sim 13$ | $2\\times 10^5$ |    $1$     |     $2\\times 10^5$     |\n| $14\\sim 17$ | $2\\times 10^5$ |   $10^9$   | $2\\times 10^5$ |\n| $18\\sim 20$ | $2\\times 10^5$ |   $10^9$   |     $10^9$     |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S6-T1】「KDOI-11」打印", "background": "原题链接：<https://oier.team/problems/S6A>。", "description": "巡的家有 $m$ 台打印机，编号从 $1$ 到 $m$。她有 $n$ 个文件想要打印。其中第 $i$ 个文件会在第 $t_i$ 时刻下发打印命令，打印这个文件需要 $s_i$ 的时间。\n\n每次发送一个文件打印会选择等待时间最短的打印机，如有多个，选择编号最小的。\n\n你需要告诉巡每台打印机打印了哪些文件。\n\n**保证同一时刻不会下发多个打印命令。**", "inputFormat": "第一行，两个正整数 $n,m$，表示文件的数量和打印机的数量。\n\n接下来 $n$ 行，每行两个正整数 $s_i,t_i$，表示第 $i$ 个文件需要的打印时间以及下发命令的时刻。保证所有 $t_i$ 互不相同。", "outputFormat": "$m$ 行，第 $i$ 行 $k_i + 1$ 个整数：\n- 第一个非负整数 $k_i$，表示第 $i$ 台打印机打印的文件数量；\n- 接下来 $k_i$ 个正整数，从小到大排序，表示其打印的文件编号。", "hint": "**【样例解释 #1】**\n\n共有 $3$ 台打印机。按时间顺序，打印命令如下：\n- 文件 $2$ 在第 $1$ 秒被下发。此时所有打印机等待时间都是 $0$。因此选择编号最小的 $1$ 号打印机。\n- 文件 $3$ 在第 $2$ 秒被下发。此时 $1$ 号打印机正在打印文件 $2$，其余打印机等待时间都是 $0$。因此选择编号最小的 $2$ 号打印机。\n- 文件 $1$ 在第 $3$ 秒被下发。此时 $1$ 号打印机已经完成文件 $2$ 的打印，等待时间为 $0$。因此选择 $1$ 号打印机。\n\n故三台打印机分别打印了编号为 $[1,2],[3],[]$ 的文件。\n\n**【样例 #2】**\n\n见附件中的 `print/print2.in` 与 `print/print2.ans`。\n\n该组样例满足测试点 $1\\sim 3$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `print/print3.in` 与 `print/print3.ans`。\n\n该组样例满足测试点 $4\\sim 9$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `print/print4.in` 与 `print/print4.ans`。\n\n该组样例满足测试点 $18\\sim 20$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\leq n,m\\leq 2\\times 10^5$，$1\\leq s_i,t_i\\leq 10^9$，所有 $t_i$ 互不相同。\n\n| 测试点编号  |   $n,m\\leq$    | $s_i\\leq $ |   $t_i\\leq $   |\n| :---------: | :------------: | :--------: | :------------: |\n|  $1\\sim 3$  |      $10$      |   $10^9$   |     $10^9$     |\n|  $4\\sim 9$  |     $5000$     |   $10^9$   |     $10^9$     |\n| $10\\sim 13$ | $2\\times 10^5$ |    $1$     |     $2\\times 10^5$     |\n| $14\\sim 17$ | $2\\times 10^5$ |   $10^9$   | $2\\times 10^5$ |\n| $18\\sim 20$ | $2\\times 10^5$ |   $10^9$   |     $10^9$     |\n\n", "locale": "zh-CN"}}}
{"pid": "P11290", "type": "P", "difficulty": 5, "samples": [["4 4\n1 1 1\n3 1 2\n8 5 2\n10 100 3\n1 4 10 1000", "1\n4\n7.5\n194.5\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "Special Judge", "O2优化", "背包 DP", "梦熊比赛"], "title": "【MX-S6-T2】「KDOI-11」飞船", "background": "原题链接：<https://oier.team/problems/S6B>。", "description": "巡造了一个很牛的飞船，巡为了测试她的飞船，造了一条无限远的从起点出发的射线作为跑道。在跑道上有 $n$ 个加油站，第 $i$ 个在距离起点 $p_i$ 的位置，巡可以在这里花费 $t_i$ 的时间加编号为 $x_i$ 的燃油，**同一个加油站的油不能加两次**，**保证 $\\boldsymbol{1\\leq x_i\\leq 4}$ 且 $\\boldsymbol{x_i}$ 为整数**。\n\n巡的飞船牛在两个点：\n\n- 这个飞船油量消耗极低，在本题中可以忽略不计。也就是，**我们不考虑油消耗殆尽的情况。**\n- 如果给飞船加编号为 $x$ 的燃油，**飞船的速度会从 $v$ 提升为 $v\\times x$**。需要注意的是，**燃油的效果能叠加**。\n\n现在，巡给出了 $q$ 次询问。每次巡会将终点设在跑道上距离起点 $y_i$ 的位置，从起点出发，将飞船速度设定为 $1$ 单位每时间，途径的每个加油站可以自由选择是否加油。你需要告诉巡每次至少需要多少时间才能到达终点（即 $y_i$）。", "inputFormat": "第一行，两个正整数 $n,q$，表示加油站个数和询问个数。\n\n接下来 $n$ 行，每行三个正整数 $p_i,t_i,x_i$，分别表示第 $i$ 个加油站距离起点的距离、加油需要的时间和燃油的编号。加油站按 $p_i$ 严格升序给出，即 $p_i < p_{i + 1}$。保证 $1\\leq x_i\\leq 4$。\n\n接下来一行，$q$ 个正整数 $y_1, \\ldots, y_q$，表示询问。", "outputFormat": "$q$ 行，每行一个非负实数，表示答案。\n\n本题使用**自定义校验器**检验你的答案是否正确，你只需要保证你的答案与标准答案相对或绝对误差不超过 $10^{-6}$ 即可。即如果对每个询问，假设你的答案为 $x$，而标准答案为 $y$，都有 $\\frac{\\lvert x-y\\rvert}{\\max(1,\\lvert y\\rvert)}\\leq 10^{-6}$，则你的答案被认为是正确的。", "hint": "**【样例解释 #1】**\n\n- 对询问 $y_1=1$，不加油，需要时间为 $1$。\n- 对询问 $y_2=4$，不加油，需要时间为 $4$。\n- 对询问 $y_3=10$，在位于起点 $3$ 单位距离的加油站 $2$ 加 $2$ 号燃油，速度提升为 $2$，需要时间为 $3+1+\\frac{10-3}{2}=7.5$。\n\n**【样例 #2】**\n\n见附件中的 `ship/ship2.in` 与 `ship/ship2.ans`。\n\n该组样例满足测试点 $1\\sim 3$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `ship/ship3.in` 与 `ship/ship3.ans`。\n\n该组样例满足测试点 $5\\sim 7$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `ship/ship4.in` 与 `ship/ship4.ans`。\n\n该组样例满足测试点 $18\\sim 20$ 的约束条件。\n\n**【数据范围】**\n\n\n对于所有测试数据，保证：$1\\leq n\\leq 10^5$，$1\\leq q\\leq10^5$，$1\\leq p_1<p_2<\\dots<p_n\\leq 10^9$，$1\\leq t_i\\leq10^9$，$1\\leq x_i\\leq4$，$1\\leq y_i\\leq 10^9$。\n\n| 测试点编号  | $n\\leq$ | $q\\leq$ |   $x_i\\in $   | $p_i,y_i\\leq $ |\n| :---------: | :-----: | :-----: | :-----------: | :------------: |\n|  $1\\sim 3$  |  $10$   |  $10$   | $\\{1,2,3,4\\}$ |     $10^9$     |\n|     $4$     | $10^5$  | $10^5$  |    $\\{1\\}$    |     $10^9$     |\n|  $5\\sim 7$  |  $100$  |  $100$  | $\\{1,2,3,4\\}$ |     $1000$     |\n|  $8\\sim 9$  | $10^5$  | $10^5$  |   $\\{1,2\\}$   |     $10^9$     |\n| $10\\sim 13$ | $10^5$  | $10^5$  |  $\\{1,2,4\\}$  |     $10^9$     |\n| $14\\sim 17$ | $10^5$  |  $10$   | $\\{1,2,3,4\\}$ |     $10^9$     |\n| $18\\sim 20$ | $10^5$  | $10^5$  | $\\{1,2,3,4\\}$ |     $10^9$     |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S6-T2】「KDOI-11」飞船", "background": "原题链接：<https://oier.team/problems/S6B>。", "description": "巡造了一个很牛的飞船，巡为了测试她的飞船，造了一条无限远的从起点出发的射线作为跑道。在跑道上有 $n$ 个加油站，第 $i$ 个在距离起点 $p_i$ 的位置，巡可以在这里花费 $t_i$ 的时间加编号为 $x_i$ 的燃油，**同一个加油站的油不能加两次**，**保证 $\\boldsymbol{1\\leq x_i\\leq 4}$ 且 $\\boldsymbol{x_i}$ 为整数**。\n\n巡的飞船牛在两个点：\n\n- 这个飞船油量消耗极低，在本题中可以忽略不计。也就是，**我们不考虑油消耗殆尽的情况。**\n- 如果给飞船加编号为 $x$ 的燃油，**飞船的速度会从 $v$ 提升为 $v\\times x$**。需要注意的是，**燃油的效果能叠加**。\n\n现在，巡给出了 $q$ 次询问。每次巡会将终点设在跑道上距离起点 $y_i$ 的位置，从起点出发，将飞船速度设定为 $1$ 单位每时间，途径的每个加油站可以自由选择是否加油。你需要告诉巡每次至少需要多少时间才能到达终点（即 $y_i$）。", "inputFormat": "第一行，两个正整数 $n,q$，表示加油站个数和询问个数。\n\n接下来 $n$ 行，每行三个正整数 $p_i,t_i,x_i$，分别表示第 $i$ 个加油站距离起点的距离、加油需要的时间和燃油的编号。加油站按 $p_i$ 严格升序给出，即 $p_i < p_{i + 1}$。保证 $1\\leq x_i\\leq 4$。\n\n接下来一行，$q$ 个正整数 $y_1, \\ldots, y_q$，表示询问。", "outputFormat": "$q$ 行，每行一个非负实数，表示答案。\n\n本题使用**自定义校验器**检验你的答案是否正确，你只需要保证你的答案与标准答案相对或绝对误差不超过 $10^{-6}$ 即可。即如果对每个询问，假设你的答案为 $x$，而标准答案为 $y$，都有 $\\frac{\\lvert x-y\\rvert}{\\max(1,\\lvert y\\rvert)}\\leq 10^{-6}$，则你的答案被认为是正确的。", "hint": "**【样例解释 #1】**\n\n- 对询问 $y_1=1$，不加油，需要时间为 $1$。\n- 对询问 $y_2=4$，不加油，需要时间为 $4$。\n- 对询问 $y_3=10$，在位于起点 $3$ 单位距离的加油站 $2$ 加 $2$ 号燃油，速度提升为 $2$，需要时间为 $3+1+\\frac{10-3}{2}=7.5$。\n\n**【样例 #2】**\n\n见附件中的 `ship/ship2.in` 与 `ship/ship2.ans`。\n\n该组样例满足测试点 $1\\sim 3$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `ship/ship3.in` 与 `ship/ship3.ans`。\n\n该组样例满足测试点 $5\\sim 7$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `ship/ship4.in` 与 `ship/ship4.ans`。\n\n该组样例满足测试点 $18\\sim 20$ 的约束条件。\n\n**【数据范围】**\n\n\n对于所有测试数据，保证：$1\\leq n\\leq 10^5$，$1\\leq q\\leq10^5$，$1\\leq p_1<p_2<\\dots<p_n\\leq 10^9$，$1\\leq t_i\\leq10^9$，$1\\leq x_i\\leq4$，$1\\leq y_i\\leq 10^9$。\n\n| 测试点编号  | $n\\leq$ | $q\\leq$ |   $x_i\\in $   | $p_i,y_i\\leq $ |\n| :---------: | :-----: | :-----: | :-----------: | :------------: |\n|  $1\\sim 3$  |  $10$   |  $10$   | $\\{1,2,3,4\\}$ |     $10^9$     |\n|     $4$     | $10^5$  | $10^5$  |    $\\{1\\}$    |     $10^9$     |\n|  $5\\sim 7$  |  $100$  |  $100$  | $\\{1,2,3,4\\}$ |     $1000$     |\n|  $8\\sim 9$  | $10^5$  | $10^5$  |   $\\{1,2\\}$   |     $10^9$     |\n| $10\\sim 13$ | $10^5$  | $10^5$  |  $\\{1,2,4\\}$  |     $10^9$     |\n| $14\\sim 17$ | $10^5$  |  $10$   | $\\{1,2,3,4\\}$ |     $10^9$     |\n| $18\\sim 20$ | $10^5$  | $10^5$  | $\\{1,2,3,4\\}$ |     $10^9$     |\n\n", "locale": "zh-CN"}}}
{"pid": "P11291", "type": "P", "difficulty": 6, "samples": [["0 1 2\nab\nabaab", "13\n5 3 5 6 3"], ["0 3 2\nabc\nac\nb\nbacabcab", "27\n4 9 6 11 10 5 6 5"], ["0 10 10\nwooogpgpoo\nowpwgwwp\nooogpgpooo\ngppwppgwoo\nwooogpgpoo\nwowooogpgp\ngwwp\nggggogwgpp\nwowooogpgp\npgpoooowpw\npgwgwggggggogwgppwppgwooggoogwowooogpgpoooowpwgwwp", "7698\n183 390 577 792 990 1213 1422 1651 1780 1889 1984 2099 2235 2355 2491 2458 2435 2426 2439 2466 2478 2498 2503 2489 2481 2477 2477 2483 2491 2527 2532 2559 2571 2540 2489 2433 2372 2276 2163 2041 1932 1803 1662 1491 1308 1111 900 702 486 252"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "贪心", "倍增", "Special Judge", "O2优化", "哈希 hashing", "前缀和", "KMP 算法", "梦熊比赛"], "title": "【MX-S6-T3】「KDOI-11」简单的字符串问题 2", "background": "原题链接：<https://oier.team/problems/S6C>。", "description": "给定 $n$ 个字符串 $S_1, \\ldots, S_n$ 以及一个字符串 $T$。\n\n对于一个字符串 $R$，定义 $|R|$ 表示 $R$ 的长度、$R_{[l,r]}$ 表示 $R$ 的第 $l\\sim r$ 个字符组成的字符串。字符串 $R'$ 是字符串 $R$ 的前缀当且仅当存在 $1\\leq p\\leq |R|$ 且 $p$ 为整数使得 $R'=R_{[1,p]}$。\n\n定义一个字符串 $R$ 是**好的**当且仅当它是某个 $S_i$ 的前缀**或** $R$ **为空**。\n\n对于若干字符串 $R_1,R_2,\\dots,R_k$，定义 $R_1+R_2+\\dots+R_k$ 为 $R_1,R_2,\\dots,R_k$ 顺次拼接得到的字符串。\n\n定义一个三元组 $(l,r,k)$（$l,r,k$ 均为整数）是好的当且仅当 $1\\leq l\\leq r\\leq|T|$，$1\\leq k\\leq K$ 且存在 $k$ 个**好的**字符串 $R_1,R_2,\\dots,R_k$ 使得 $R_1+R_2+\\dots+R_k=T_{[l,r]}$。\n\n请你求出好的三元组的数量，并对于每个 $i$ 求出有多少好的三元组 $(l,r,k)$ 满足 $l\\leq i\\leq r$。如果你只能求出两者中其一，也可以获得部分分数，见【**输出格式**】。", "inputFormat": "第一行，三个非负整数 $id,n,K$，其中 $id$ 表示测试点编号（所有样例满足 $id=0$），$n$ 表示字符串数量，$K$ 表示对好的三元组的限制。\n\n接下来 $n$ 行，每行一个字符串 $S_i$。\n\n接下来一行，一个字符串 $T$。", "outputFormat": "第一行，一个非负整数，表示好的三元组的数量。\n\n第二行，$\\lvert T\\rvert$ 个非负整数，第 $i$ 个表示满足 $l\\leq i\\leq r$ 的好的三元组 $(l,r,k)$ 的数量。\n\n本题使用**自定义校验器**进行评分，对于每个测试点：\n\n* 如果你的程序正确地求出了好的三元组的数量并正确地对于每个 $1\\leq i\\leq |T|$ 求出了满足 $l\\leq i\\leq r$ 的好的三元组 $(l,r,k)$ 的数量，你可以获得该测试点 $100\\%$ 的分数。\n* 如果你的程序未能正确地求出了好的三元组的数量但正确地对于每个 $1\\leq i\\leq |T|$ 求出了满足 $l\\leq i\\leq r$ 的好的三元组 $(l,r,k)$ 的数量，你可以获得该测试点 $80\\%$ 的分数。\n* 如果你的程序正确地求出了好的三元组的数量但未能正确地对于每个 $1\\leq i\\leq |T|$ 求出了满足 $l\\leq i\\leq r$ 的好的三元组 $(l,r,k)$ 的数量，你可以获得该测试点 $60\\%$ 的分数。\n* 否则，你不能获得该测试点的任何分数。\n\n注意，即使你希望获得某测试点 $80\\%$ 或 $60\\%$ 的分数，你也需要在第一行输出一个数并在第二行输出 $\\lvert T\\rvert$ 个数。", "hint": "**【样例解释 #1】**\n\n符合要求的 $(l,r,k)$ 有以下 $13$ 组：\n\n* $(1,1,1)$；\n* $(1,1,2)$；\n* $(1,2,1)$；\n* $(1,2,2)$；\n* $(1,3,2)$；\n* $(3,3,1)$；\n* $(3,3,2)$；\n* $(3,4,2)$；\n* $(3,5,2)$；\n* $(4,4,1)$；\n* $(4,4,2)$；\n* $(4,5,1)$；\n* $(4,5,2)$。\n\n**【样例 #4】**\n\n见附件中的 `string/string4.in` 与 `string/string4.ans`。\n\n该组样例满足测试点 $1\\sim3$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `string/string5.in` 与 `string/string5.ans`。\n\n该组样例满足测试点 $4\\sim6$ 的约束条件。\n\n**【样例 #6】**\n\n见附件中的 `string/string6.in` 与 `string/string6.ans`。\n\n该组样例满足测试点 $7\\sim10$ 的约束条件。\n\n**【样例 #7】**\n\n见附件中的 `string/string7.in` 与 `string/string7.ans`。\n\n该组样例满足测试点 $13\\sim14$ 和测试点 $16\\sim17$ 的约束条件。\n\n**【样例 #8】**\n\n见附件中的 `string/string8.in` 与 `string/string8.ans`。\n\n该组样例满足测试点 $18\\sim20$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\leq n\\leq10$，$1\\leq |S_i|\\leq5\\times10^4$，$1\\leq |T|,K\\leq5\\times10^5$，字符串仅包含小写英文字母 $\\texttt{a}\\sim\\texttt{z}$。\n\n| 测试点编号 | $n\\leq$ | $\\lvert S_i\\rvert\\leq$ |  $\\lvert T\\rvert\\leq$ | $K\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|:--:|:--:|\n| $1\\sim3$ | $10$ | $50$ | $50$ | $50$ | 无 |\n| $4\\sim6$ | $10$ | $100$ | $300$ | $300$ | 无 |\n| $7\\sim10$ | $10$ | $1000$ | $5000$ | $5000$ | 无 |\n| $11\\sim12$ | $10$ | $5\\times10^4$ | $5\\times10^5$ | $1$ | 无 |\n| $13\\sim14$ | $10$ | $5\\times10^4$ | $5\\times10^5$ | $10$ | 无 |\n| $15$ | $10$ | $5\\times10^4$ | $5\\times10^5$ | $5\\times10^5$ | 所有字符均为 $\\texttt{a}$ |\n| $16\\sim17$ | $10$ | $5\\times10^4$ | $5\\times10^5$ | $5\\times10^5$ | 所有字符在 $\\{\\texttt{a},\\texttt{b}\\}$ 中独立均匀随机生成 |\n| $18\\sim20$ | $10$ | $5\\times10^4$ | $5\\times10^5$ | $5\\times10^5$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S6-T3】「KDOI-11」简单的字符串问题 2", "background": "原题链接：<https://oier.team/problems/S6C>。", "description": "给定 $n$ 个字符串 $S_1, \\ldots, S_n$ 以及一个字符串 $T$。\n\n对于一个字符串 $R$，定义 $|R|$ 表示 $R$ 的长度、$R_{[l,r]}$ 表示 $R$ 的第 $l\\sim r$ 个字符组成的字符串。字符串 $R'$ 是字符串 $R$ 的前缀当且仅当存在 $1\\leq p\\leq |R|$ 且 $p$ 为整数使得 $R'=R_{[1,p]}$。\n\n定义一个字符串 $R$ 是**好的**当且仅当它是某个 $S_i$ 的前缀**或** $R$ **为空**。\n\n对于若干字符串 $R_1,R_2,\\dots,R_k$，定义 $R_1+R_2+\\dots+R_k$ 为 $R_1,R_2,\\dots,R_k$ 顺次拼接得到的字符串。\n\n定义一个三元组 $(l,r,k)$（$l,r,k$ 均为整数）是好的当且仅当 $1\\leq l\\leq r\\leq|T|$，$1\\leq k\\leq K$ 且存在 $k$ 个**好的**字符串 $R_1,R_2,\\dots,R_k$ 使得 $R_1+R_2+\\dots+R_k=T_{[l,r]}$。\n\n请你求出好的三元组的数量，并对于每个 $i$ 求出有多少好的三元组 $(l,r,k)$ 满足 $l\\leq i\\leq r$。如果你只能求出两者中其一，也可以获得部分分数，见【**输出格式**】。", "inputFormat": "第一行，三个非负整数 $id,n,K$，其中 $id$ 表示测试点编号（所有样例满足 $id=0$），$n$ 表示字符串数量，$K$ 表示对好的三元组的限制。\n\n接下来 $n$ 行，每行一个字符串 $S_i$。\n\n接下来一行，一个字符串 $T$。", "outputFormat": "第一行，一个非负整数，表示好的三元组的数量。\n\n第二行，$\\lvert T\\rvert$ 个非负整数，第 $i$ 个表示满足 $l\\leq i\\leq r$ 的好的三元组 $(l,r,k)$ 的数量。\n\n本题使用**自定义校验器**进行评分，对于每个测试点：\n\n* 如果你的程序正确地求出了好的三元组的数量并正确地对于每个 $1\\leq i\\leq |T|$ 求出了满足 $l\\leq i\\leq r$ 的好的三元组 $(l,r,k)$ 的数量，你可以获得该测试点 $100\\%$ 的分数。\n* 如果你的程序未能正确地求出了好的三元组的数量但正确地对于每个 $1\\leq i\\leq |T|$ 求出了满足 $l\\leq i\\leq r$ 的好的三元组 $(l,r,k)$ 的数量，你可以获得该测试点 $80\\%$ 的分数。\n* 如果你的程序正确地求出了好的三元组的数量但未能正确地对于每个 $1\\leq i\\leq |T|$ 求出了满足 $l\\leq i\\leq r$ 的好的三元组 $(l,r,k)$ 的数量，你可以获得该测试点 $60\\%$ 的分数。\n* 否则，你不能获得该测试点的任何分数。\n\n注意，即使你希望获得某测试点 $80\\%$ 或 $60\\%$ 的分数，你也需要在第一行输出一个数并在第二行输出 $\\lvert T\\rvert$ 个数。", "hint": "**【样例解释 #1】**\n\n符合要求的 $(l,r,k)$ 有以下 $13$ 组：\n\n* $(1,1,1)$；\n* $(1,1,2)$；\n* $(1,2,1)$；\n* $(1,2,2)$；\n* $(1,3,2)$；\n* $(3,3,1)$；\n* $(3,3,2)$；\n* $(3,4,2)$；\n* $(3,5,2)$；\n* $(4,4,1)$；\n* $(4,4,2)$；\n* $(4,5,1)$；\n* $(4,5,2)$。\n\n**【样例 #4】**\n\n见附件中的 `string/string4.in` 与 `string/string4.ans`。\n\n该组样例满足测试点 $1\\sim3$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `string/string5.in` 与 `string/string5.ans`。\n\n该组样例满足测试点 $4\\sim6$ 的约束条件。\n\n**【样例 #6】**\n\n见附件中的 `string/string6.in` 与 `string/string6.ans`。\n\n该组样例满足测试点 $7\\sim10$ 的约束条件。\n\n**【样例 #7】**\n\n见附件中的 `string/string7.in` 与 `string/string7.ans`。\n\n该组样例满足测试点 $13\\sim14$ 和测试点 $16\\sim17$ 的约束条件。\n\n**【样例 #8】**\n\n见附件中的 `string/string8.in` 与 `string/string8.ans`。\n\n该组样例满足测试点 $18\\sim20$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\leq n\\leq10$，$1\\leq |S_i|\\leq5\\times10^4$，$1\\leq |T|,K\\leq5\\times10^5$，字符串仅包含小写英文字母 $\\texttt{a}\\sim\\texttt{z}$。\n\n| 测试点编号 | $n\\leq$ | $\\lvert S_i\\rvert\\leq$ |  $\\lvert T\\rvert\\leq$ | $K\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|:--:|:--:|\n| $1\\sim3$ | $10$ | $50$ | $50$ | $50$ | 无 |\n| $4\\sim6$ | $10$ | $100$ | $300$ | $300$ | 无 |\n| $7\\sim10$ | $10$ | $1000$ | $5000$ | $5000$ | 无 |\n| $11\\sim12$ | $10$ | $5\\times10^4$ | $5\\times10^5$ | $1$ | 无 |\n| $13\\sim14$ | $10$ | $5\\times10^4$ | $5\\times10^5$ | $10$ | 无 |\n| $15$ | $10$ | $5\\times10^4$ | $5\\times10^5$ | $5\\times10^5$ | 所有字符均为 $\\texttt{a}$ |\n| $16\\sim17$ | $10$ | $5\\times10^4$ | $5\\times10^5$ | $5\\times10^5$ | 所有字符在 $\\{\\texttt{a},\\texttt{b}\\}$ 中独立均匀随机生成 |\n| $18\\sim20$ | $10$ | $5\\times10^4$ | $5\\times10^5$ | $5\\times10^5$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11292", "type": "P", "difficulty": 6, "samples": [["0 3 2 2 2\n1 3 1\n3 2 1", "12"], ["0 5 4 3 7\n1 4 4\n1 5 2\n4 3 1\n5 3 2\n3 2 3\n4 5 1\n5 2 2", "16096"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "动态规划优化", "拓扑排序", "组合数学", "容斥原理", "梦熊比赛"], "title": "【MX-S6-T4】「KDOI-11」彩灯晚会", "background": "原题链接：<https://oier.team/problems/S6D>。", "description": "小 K 家的房子还蛮大的，所以他举办了彩灯晚会。\n\n彩灯晚会显然有彩灯。于是小 K 找来了 $n$ 盏彩灯。\n\n小 K 不希望彩灯散在地上，于是他用 $m$ 条**有向边**连接了这些彩灯，使得他们连在一起。也就是说，在将有向边看成无向边的情况下，这些彩灯是连通的。保证该图为**有向无环图**。\n\n小 K 的彩灯很厉害，每个都可以独立地发出 $k$ 种颜色中的任意一种。小 K 作为世界顶尖 Light Glowing Master（简称 LGM），决定将所有方案（共 $k^n$ 种）都尝试一下。\n\n小 K 不喜欢很多的颜色，于是他给定了一个正整数 $l$，并定义一个方案的美丽度为每种颜色长度为 $l$ 的链数量的平方之和。形式化地讲，设第 $i$ 种颜色的长度为 $l$ 的链的数量为 $cnt_i$，则一个方案的美丽度为 $\\sum_{i=1}^kcnt_i^2$。\n\n现在小 K 想知道所有 $k^n$ 种方案的美丽度之和，对 $998244353$ 取模。\n\n两种方案是不同的当且仅当存在某个彩灯在两种方案中发出不同的颜色。\n\n一条长度为 $l$ 的链是一个 $2l-1$ 元组 $(v_1,e_1,v_2,e_2,\\dots,e_{l-1},v_l)$，使得对于任意 $1\\leq i<l$，第 $e_i$ 条有向边是由 $v_i$ 连向 $v_{i+1}$ 的。两条长度为 $l$ 的链 $(v_1,e_1,v_2,e_2,\\dots,e_{l-1},v_l)$ 和 $(v'_1,e'_1,v'_2,e'_2,\\dots,e'_{l-1},v'_l)$ 不同当且仅当存在 $1\\leq i<l$ 满足 $e_i\\neq e'_i$ 或存在 $1\\leq i\\leq l$ 满足 $v_i\\neq v'_i$。\n\n一种颜色 $x$ 的长度为 $l$ 的链是一条长度为 $l$ 的链 $(v_1,e_1,v_2,e_2,\\dots,e_{l-1},v_l)$ 使得对于任意 $1\\leq i\\leq l$，$v_i$ 编号的彩灯发出颜色为 $x$。", "inputFormat": "第一行，五个非负整数 $id,n,k,l,M$，其中 $id$ 表示测试点编号（所有样例满足 $id=0$），$n$ 表示彩灯数量，$k$ 表示颜色数量，$l$ 表示链的长度，$M$ 的意义如后文所示。\n\n接下来 $M$ 行，第 $i$ 行三个正整数 $u_i,v_i,c_i$，表示有 $c_i$ 条 $u_i\\to v_i$ 的有向边。也就是说，第 $\\bigl(\\sum_{j=1}^{i-1}c_j\\bigr)+1$ 至第 $\\bigl(\\sum_{j=1}^ic_j\\bigr)$ 条有向边由 $u_i$ 连向 $v_i$。\n\n题面中 $m$ 满足 $m=\\sum_{i=1}^Mc_i$。保证：$(u,v)$ 互不相同，给定图为有向无环图，在将有向边看成无向边的情况下，彩灯是连通的。", "outputFormat": "仅一行，一个非负整数，表示所有 $k^n$ 种方案的美丽度之和，对 $998244353$ 取模。", "hint": "**【样例解释 #1】**\n\n共有 $2^3=8$ 种不同的彩灯显示颜色的方案，如下表所示（不妨假设颜色为黑和白）：\n\n| 编号 | $1$ 号彩灯颜色 | $2$ 号彩灯颜色 | $3$ 号彩灯颜色 | 美丽度 |\n|:--:|:--:|:--:|:--:|:--:|\n| $1$ | 黑 | 黑 | 黑 | $4$ |\n| $2$ | 黑 | 黑 | 白 | $0$ |\n| $3$ | 黑 | 白 | 黑 | $1$ |\n| $4$ | 黑 | 白 | 白 | $1$ |\n| $5$ | 白 | 黑 | 黑 | $1$ |\n| $6$ | 白 | 黑 | 白 | $1$ |\n| $7$ | 白 | 白 | 黑 | $0$ |\n| $8$ | 白 | 白 | 白 | $4$ |\n\n美丽度之和为 $4+0+1+1+1+1+0+4=12$。\n\n**【样例 #3】**\n\n见附件中的 `party/party3.in` 与 `party/party3.ans`。\n\n该组样例满足测试点 $1$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `party/party4.in` 与 `party/party4.ans`。\n\n该组样例满足测试点 $2\\sim3$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `party/party5.in` 与 `party/party5.ans`。\n\n该组样例满足测试点 $4\\sim5$ 的约束条件。\n\n**【样例 #6】**\n\n见附件中的 `party/party6.in` 与 `party/party6.ans`。\n\n该组样例满足测试点 $6\\sim9$ 的约束条件。\n\n**【样例 #7】**\n\n见附件中的 `party/party7.in` 与 `party/party7.ans`。\n\n该组样例满足测试点 $10\\sim12$ 的约束条件。\n\n**【样例 #8】**\n\n见附件中的 `party/party8.in` 与 `party/party8.ans`。\n\n该组样例满足测试点 $13\\sim15$ 的约束条件。\n\n**【样例 #9】**\n\n见附件中的 `party/party9.in` 与 `party/party9.ans`。\n\n该组样例满足测试点 $20\\sim21$ 的约束条件。\n\n**【数据范围】**\n\n记 $P=998244353$，对于所有测试数据，保证：$1\\leq n\\leq300$，$1\\leq M\\leq\\frac{n(n-1)}{2}$，$1\\leq k<P$，$1\\leq l\\leq 20$，$1\\leq c_i<P$，$(u_i,v_i)$ 互不相同，给定图为有向无环图，在将有向边看成无向边的情况下，彩灯是连通的。\n\n| 测试点编号 | $n\\leq$ | $k\\leq$ | $l\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|:--:|\n| $1$ | $6$ | $6$ | $6$ | $m\\leq10$，$c_i=1$ |\n| $2\\sim3$ | $300$ | $P-1$ | $1$ | 无 |\n| $4\\sim5$ | $300$ | $P-1$ | $2$ | 无 |\n| $6\\sim9$ | $300$ | $P-1$ | $3$ | 无 |\n| $10\\sim12$ | $300$ | $P-1$ | $20$ | $M=n-1$ 且有且仅有一个点入度为 $0$ |\n| $13\\sim15$ | $30$ | $P-1$ | $10$ | 无 |\n| $16$ | $150$ | $P-1$ | $7$ | 无 |\n| $17$ | $150$ | $P-1$ | $10$ | 无 |\n| $18\\sim19$ | $150$ | $P-1$ | $13$ | 无 |\n| $20\\sim21$ | $300$ | $P-1$ | $9$ | 无 |\n| $22$ | $300$ | $P-1$ | $13$ | 无 |\n| $23$ | $300$ | $P-1$ | $16$ | 无 |\n| $24\\sim25$ | $300$ | $P-1$ | $20$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S6-T4】「KDOI-11」彩灯晚会", "background": "原题链接：<https://oier.team/problems/S6D>。", "description": "小 K 家的房子还蛮大的，所以他举办了彩灯晚会。\n\n彩灯晚会显然有彩灯。于是小 K 找来了 $n$ 盏彩灯。\n\n小 K 不希望彩灯散在地上，于是他用 $m$ 条**有向边**连接了这些彩灯，使得他们连在一起。也就是说，在将有向边看成无向边的情况下，这些彩灯是连通的。保证该图为**有向无环图**。\n\n小 K 的彩灯很厉害，每个都可以独立地发出 $k$ 种颜色中的任意一种。小 K 作为世界顶尖 Light Glowing Master（简称 LGM），决定将所有方案（共 $k^n$ 种）都尝试一下。\n\n小 K 不喜欢很多的颜色，于是他给定了一个正整数 $l$，并定义一个方案的美丽度为每种颜色长度为 $l$ 的链数量的平方之和。形式化地讲，设第 $i$ 种颜色的长度为 $l$ 的链的数量为 $cnt_i$，则一个方案的美丽度为 $\\sum_{i=1}^kcnt_i^2$。\n\n现在小 K 想知道所有 $k^n$ 种方案的美丽度之和，对 $998244353$ 取模。\n\n两种方案是不同的当且仅当存在某个彩灯在两种方案中发出不同的颜色。\n\n一条长度为 $l$ 的链是一个 $2l-1$ 元组 $(v_1,e_1,v_2,e_2,\\dots,e_{l-1},v_l)$，使得对于任意 $1\\leq i<l$，第 $e_i$ 条有向边是由 $v_i$ 连向 $v_{i+1}$ 的。两条长度为 $l$ 的链 $(v_1,e_1,v_2,e_2,\\dots,e_{l-1},v_l)$ 和 $(v'_1,e'_1,v'_2,e'_2,\\dots,e'_{l-1},v'_l)$ 不同当且仅当存在 $1\\leq i<l$ 满足 $e_i\\neq e'_i$ 或存在 $1\\leq i\\leq l$ 满足 $v_i\\neq v'_i$。\n\n一种颜色 $x$ 的长度为 $l$ 的链是一条长度为 $l$ 的链 $(v_1,e_1,v_2,e_2,\\dots,e_{l-1},v_l)$ 使得对于任意 $1\\leq i\\leq l$，$v_i$ 编号的彩灯发出颜色为 $x$。", "inputFormat": "第一行，五个非负整数 $id,n,k,l,M$，其中 $id$ 表示测试点编号（所有样例满足 $id=0$），$n$ 表示彩灯数量，$k$ 表示颜色数量，$l$ 表示链的长度，$M$ 的意义如后文所示。\n\n接下来 $M$ 行，第 $i$ 行三个正整数 $u_i,v_i,c_i$，表示有 $c_i$ 条 $u_i\\to v_i$ 的有向边。也就是说，第 $\\bigl(\\sum_{j=1}^{i-1}c_j\\bigr)+1$ 至第 $\\bigl(\\sum_{j=1}^ic_j\\bigr)$ 条有向边由 $u_i$ 连向 $v_i$。\n\n题面中 $m$ 满足 $m=\\sum_{i=1}^Mc_i$。保证：$(u,v)$ 互不相同，给定图为有向无环图，在将有向边看成无向边的情况下，彩灯是连通的。", "outputFormat": "仅一行，一个非负整数，表示所有 $k^n$ 种方案的美丽度之和，对 $998244353$ 取模。", "hint": "**【样例解释 #1】**\n\n共有 $2^3=8$ 种不同的彩灯显示颜色的方案，如下表所示（不妨假设颜色为黑和白）：\n\n| 编号 | $1$ 号彩灯颜色 | $2$ 号彩灯颜色 | $3$ 号彩灯颜色 | 美丽度 |\n|:--:|:--:|:--:|:--:|:--:|\n| $1$ | 黑 | 黑 | 黑 | $4$ |\n| $2$ | 黑 | 黑 | 白 | $0$ |\n| $3$ | 黑 | 白 | 黑 | $1$ |\n| $4$ | 黑 | 白 | 白 | $1$ |\n| $5$ | 白 | 黑 | 黑 | $1$ |\n| $6$ | 白 | 黑 | 白 | $1$ |\n| $7$ | 白 | 白 | 黑 | $0$ |\n| $8$ | 白 | 白 | 白 | $4$ |\n\n美丽度之和为 $4+0+1+1+1+1+0+4=12$。\n\n**【样例 #3】**\n\n见附件中的 `party/party3.in` 与 `party/party3.ans`。\n\n该组样例满足测试点 $1$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `party/party4.in` 与 `party/party4.ans`。\n\n该组样例满足测试点 $2\\sim3$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `party/party5.in` 与 `party/party5.ans`。\n\n该组样例满足测试点 $4\\sim5$ 的约束条件。\n\n**【样例 #6】**\n\n见附件中的 `party/party6.in` 与 `party/party6.ans`。\n\n该组样例满足测试点 $6\\sim9$ 的约束条件。\n\n**【样例 #7】**\n\n见附件中的 `party/party7.in` 与 `party/party7.ans`。\n\n该组样例满足测试点 $10\\sim12$ 的约束条件。\n\n**【样例 #8】**\n\n见附件中的 `party/party8.in` 与 `party/party8.ans`。\n\n该组样例满足测试点 $13\\sim15$ 的约束条件。\n\n**【样例 #9】**\n\n见附件中的 `party/party9.in` 与 `party/party9.ans`。\n\n该组样例满足测试点 $20\\sim21$ 的约束条件。\n\n**【数据范围】**\n\n记 $P=998244353$，对于所有测试数据，保证：$1\\leq n\\leq300$，$1\\leq M\\leq\\frac{n(n-1)}{2}$，$1\\leq k<P$，$1\\leq l\\leq 20$，$1\\leq c_i<P$，$(u_i,v_i)$ 互不相同，给定图为有向无环图，在将有向边看成无向边的情况下，彩灯是连通的。\n\n| 测试点编号 | $n\\leq$ | $k\\leq$ | $l\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|:--:|\n| $1$ | $6$ | $6$ | $6$ | $m\\leq10$，$c_i=1$ |\n| $2\\sim3$ | $300$ | $P-1$ | $1$ | 无 |\n| $4\\sim5$ | $300$ | $P-1$ | $2$ | 无 |\n| $6\\sim9$ | $300$ | $P-1$ | $3$ | 无 |\n| $10\\sim12$ | $300$ | $P-1$ | $20$ | $M=n-1$ 且有且仅有一个点入度为 $0$ |\n| $13\\sim15$ | $30$ | $P-1$ | $10$ | 无 |\n| $16$ | $150$ | $P-1$ | $7$ | 无 |\n| $17$ | $150$ | $P-1$ | $10$ | 无 |\n| $18\\sim19$ | $150$ | $P-1$ | $13$ | 无 |\n| $20\\sim21$ | $300$ | $P-1$ | $9$ | 无 |\n| $22$ | $300$ | $P-1$ | $13$ | 无 |\n| $23$ | $300$ | $P-1$ | $16$ | 无 |\n| $24\\sim25$ | $300$ | $P-1$ | $20$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11293", "type": "P", "difficulty": 4, "samples": [["2 2\n8 1\n3 4", "15"], ["1 8\n-2 -1 8 -2 9 0 -2 1", "15"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2022", "前缀和", "NOISG（新加坡）"], "title": "[NOISG 2022 Qualification] L-Board", "background": "Lord Pooty 有一个 $n \\times m$ 的整数棋盘 $A$。他希望在棋盘上画一个 L 型区域，并且希望覆盖的数字总和最大。L 型区域可以旋转 $4$ 种方向，且每一边不一定完整（可以是一条直线）。", "description": "给定一个 $n \\times m$ 的棋盘 $A$，你需要选择棋盘上的三个点 $(x_1, y_1)$, $(x_2, y_1)$, $(x_1, y_2)$，使得以下公式的值 $V$ 最大化：\n\n$$\nV = \\sum_{i=\\min(x_1,x_2)}^{\\max(x_1,x_2)} A_{i,y_1} + \\sum_{j=\\min(y_1,y_2)}^{\\max(y_1,y_2)} A_{x_1,j} - A_{x_1,y_1}\n$$", "inputFormat": "- 第一行包含两个整数 $n$ 和 $m$，分别表示棋盘的行数和列数。\n- 接下来的 $n$ 行，每行包含 $m$ 个整数，表示棋盘的元素。\n", "outputFormat": "输出一个整数，即最大化的 $V$ 值。", "hint": "【样例解释】\n\n对于样例 $1$，选择点 $(1,1)$, $(2,1)$, $(1,2)$，覆盖的数字为 $8, 3, 4$，总和为 $15$。  \n\n对于样例 $2$，选择点 $(1,3)$, $(1,5)$, $(1,3)$，形成一条直线，覆盖的数字为 $8, -2, 9$，总和为 $15$。\n\n【数据范围】\n\n- $1 \\leq n, m \\leq 1000$\n- $-10^9 \\leq A_{i,j} \\leq 10^9$\n\n| 子任务编号 | 分值 | 额外限制条件             |\n| :--------: | :--: | :----------------------: |\n| $1$        | $5$  | $1 \\leq n, m \\leq 2$    |\n| $2$        | $10$ | $n = 1$                 |\n| $3$        | $15$ | $1 \\leq n, m \\leq 100$  |\n| $4$        | $15$ | $1 \\leq n, m \\leq 300$  |\n| $5$        | $25$ | $0 \\leq A_{i,j} \\leq 10^9$ |\n| $6$        | $30$ | 无额外限制               |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2022 Qualification] L-Board", "background": "Lord Pooty 有一个 $n \\times m$ 的整数棋盘 $A$。他希望在棋盘上画一个 L 型区域，并且希望覆盖的数字总和最大。L 型区域可以旋转 $4$ 种方向，且每一边不一定完整（可以是一条直线）。", "description": "给定一个 $n \\times m$ 的棋盘 $A$，你需要选择棋盘上的三个点 $(x_1, y_1)$, $(x_2, y_1)$, $(x_1, y_2)$，使得以下公式的值 $V$ 最大化：\n\n$$\nV = \\sum_{i=\\min(x_1,x_2)}^{\\max(x_1,x_2)} A_{i,y_1} + \\sum_{j=\\min(y_1,y_2)}^{\\max(y_1,y_2)} A_{x_1,j} - A_{x_1,y_1}\n$$", "inputFormat": "- 第一行包含两个整数 $n$ 和 $m$，分别表示棋盘的行数和列数。\n- 接下来的 $n$ 行，每行包含 $m$ 个整数，表示棋盘的元素。\n", "outputFormat": "输出一个整数，即最大化的 $V$ 值。", "hint": "【样例解释】\n\n对于样例 $1$，选择点 $(1,1)$, $(2,1)$, $(1,2)$，覆盖的数字为 $8, 3, 4$，总和为 $15$。  \n\n对于样例 $2$，选择点 $(1,3)$, $(1,5)$, $(1,3)$，形成一条直线，覆盖的数字为 $8, -2, 9$，总和为 $15$。\n\n【数据范围】\n\n- $1 \\leq n, m \\leq 1000$\n- $-10^9 \\leq A_{i,j} \\leq 10^9$\n\n| 子任务编号 | 分值 | 额外限制条件             |\n| :--------: | :--: | :----------------------: |\n| $1$        | $5$  | $1 \\leq n, m \\leq 2$    |\n| $2$        | $10$ | $n = 1$                 |\n| $3$        | $15$ | $1 \\leq n, m \\leq 100$  |\n| $4$        | $15$ | $1 \\leq n, m \\leq 300$  |\n| $5$        | $25$ | $0 \\leq A_{i,j} \\leq 10^9$ |\n| $6$        | $30$ | 无额外限制               |", "locale": "zh-CN"}}}
{"pid": "P11294", "type": "P", "difficulty": 5, "samples": [["4\n1 2\n1 3\n3 4", "3"], ["6\n1 2\n2 3\n2 5\n4 5\n5 6", "5"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["树形数据结构", "2022", "深度优先搜索 DFS", "树形 DP", "NOISG（新加坡）"], "title": "[NOISG 2022 Qualification] Tree Cutting", "background": "一个国家有 $N$ 个城市，编号为 $1$ 到 $N$，以及 $N-1$ 条双向公路。通过这些公路，可以从任意一个城市到达另一个城市。\n\n城市 $x$ 和城市 $y$ 之间的距离定义为连接两城市所需经过的公路数。\n\n州长决定拆除一条公路，并新建另一条公路，使得任意两城市之间的最远距离最大化。", "description": "请计算新建公路后，任意两城市之间的最大距离。", "inputFormat": "- 第一行包含一个整数 $N$，表示城市的数量。\n- 接下来的 $N-1$ 行，每行包含两个整数 $u$ 和 $v$，表示城市 $u$ 和 $v$ 之间有一条双向公路。", "outputFormat": "输出一个整数，表示新建公路后任意两城市之间的最大距离。", "hint": "【样例解释】\n\n对于样例 $1$，最远距离无法增加，仍然为 $3$。  \n\n对于样例 $2$，可以拆除公路 $2-5$，新建公路 $3-4$，最远路径为 $1-2-3-4-5-6$，其长度为 $5$。\n\n【数据范围】\n\n- $2 \\leq N \\leq 300,000$\n- $1 \\leq u, v \\leq N$\n\n| 子任务编号 | 分值 | 额外限制条件                             |\n| :--------: | :--: | :--------------------------------------: |\n| $1$        | $5$  | $N \\leq 10$                              |\n| $2$        | $10$ | $N \\leq 100$                             |\n| $3$        | $15$ | $N \\leq 3000$                            |\n| $4$        | $15$ | $N \\leq 300,000$，至多一个城市连接至少 $3$ 条公路 |\n| $5$        | $55$ | 无额外限制                              |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2022 Qualification] Tree Cutting", "background": "一个国家有 $N$ 个城市，编号为 $1$ 到 $N$，以及 $N-1$ 条双向公路。通过这些公路，可以从任意一个城市到达另一个城市。\n\n城市 $x$ 和城市 $y$ 之间的距离定义为连接两城市所需经过的公路数。\n\n州长决定拆除一条公路，并新建另一条公路，使得任意两城市之间的最远距离最大化。", "description": "请计算新建公路后，任意两城市之间的最大距离。", "inputFormat": "- 第一行包含一个整数 $N$，表示城市的数量。\n- 接下来的 $N-1$ 行，每行包含两个整数 $u$ 和 $v$，表示城市 $u$ 和 $v$ 之间有一条双向公路。", "outputFormat": "输出一个整数，表示新建公路后任意两城市之间的最大距离。", "hint": "【样例解释】\n\n对于样例 $1$，最远距离无法增加，仍然为 $3$。  \n\n对于样例 $2$，可以拆除公路 $2-5$，新建公路 $3-4$，最远路径为 $1-2-3-4-5-6$，其长度为 $5$。\n\n【数据范围】\n\n- $2 \\leq N \\leq 300,000$\n- $1 \\leq u, v \\leq N$\n\n| 子任务编号 | 分值 | 额外限制条件                             |\n| :--------: | :--: | :--------------------------------------: |\n| $1$        | $5$  | $N \\leq 10$                              |\n| $2$        | $10$ | $N \\leq 100$                             |\n| $3$        | $15$ | $N \\leq 3000$                            |\n| $4$        | $15$ | $N \\leq 300,000$，至多一个城市连接至少 $3$ 条公路 |\n| $5$        | $55$ | 无额外限制                              |", "locale": "zh-CN"}}}
{"pid": "P11295", "type": "P", "difficulty": 6, "samples": [["5 6\n4 1 0 3 1\n1 3 2 2 1\n2 5 4 3 4 2\n5 2\n2 1\n1 4\n1 3", "2 1 2 1 1 0"], ["7 4\n0 2 4 4 0 1 3\n6 1 6 2 2 2 1\n7 5 2 4\n4 1\n4 5\n6 2\n1 6\n1 3\n6 7", "2 1 1 1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "树链剖分", "整体二分", "NOISG（新加坡）"], "title": "[NOISG 2022 Qualification] Dragonfly", "background": "在植物园和碧山公园周围的池塘中，经常可以看到蜻蜓。在一个更密集的森林区域中，Benson 记录了 $n$ 个池塘，以及蜻蜓可以捕食的昆虫数量和种类。\n\n在池塘 $i$，共有 $b_i$ 只昆虫，这些昆虫属于种类 $s_i$。\n\n此外，还有 $n-1$ 条小径，每条小径连接两池塘 $u_j$ 和 $v_j$（双向）。并且满足蜻蜓从每一个池塘出发都能到达其它所有池塘。\n\nBenson 抓住了 $d$ 只蜻蜓，并计划依次释放到池塘 $1$。每只蜻蜓有一个目标池塘 $h_k \\neq 1$，会沿着最短路径飞到目标池塘，并在经过的每个池塘中捕食昆虫（包括池塘 $1$）。\n\n每次捕食会减少池塘中 $1$ 只昆虫（如果昆虫数量不为 $0$）。需要帮助 Benson 计算每只蜻蜓的飞行过程中捕食到的不同种类昆虫的数量。", "description": "请确定每只蜻蜓的飞行过程中捕食到的不同种类昆虫的数量。", "inputFormat": "- 第一行包含两个整数 $n$ 和 $d$，分别表示池塘数量和蜻蜓数量。\n- 第二行包含 $n$ 个整数 $b_1, b_2, \\dots, b_n$，表示每个池塘的昆虫数量。\n- 第三行包含 $n$ 个整数 $s_1, s_2, \\dots, s_n$，表示每个池塘昆虫的种类。\n- 第四行包含 $d$ 个整数 $h_1, h_2, \\dots, h_d$，表示每只蜻蜓的目标池塘。\n- 接下来 $n-1$ 行，每行包含两个整数 $u_j$ 和 $v_j$，表示一条连接池塘 $u_j$ 和 $v_j$ 的小径。", "outputFormat": "输出一行包含 $d$ 个整数，第 $k$ 个整数表示第 $k$ 只蜻蜓捕食到的不同种类昆虫数量。", "hint": "【样例解释】\n\n对于样例 $1$，第一只蜻蜓飞向池塘 $2$，捕食 $1$ 只种类 $1$ 的昆虫和 $1$ 只种类 $2$ 的昆虫。第二只蜻蜓飞向池塘 $5$，捕食种类 $1$ 的昆虫，总共捕食 $1$ 个种类。  \n\n对于样例 $2$，每只蜻蜓飞行后捕食到的不同种类分别是 $2, 1, 1, 1$。\n\n【数据范围】\n\n- $2 \\leq n \\leq 2 \\times 10^5$\n- $1 \\leq d \\leq 2 \\times 10^6$\n- $1 \\leq s_i \\leq n$，$0 \\leq b_i \\leq d$，$1 \\leq u_j, v_j < n$\n\n| 子任务编号 | 分值 | 额外限制条件                              |\n| :--------: | :--: | :---------------------------------------: |\n| $1$        | $10$ | $n, d \\leq 1000$                          |\n| $2$        | $10$ | $b_i = d$                                 |\n| $3$        | $12$ | $b_i \\leq 10$                             |\n| $4$        | $12$ | $u_j = j$, $v_j = j + 1$                  |\n| $5$        | $37$ | $s_i = i$                                 |\n| $6$        | $16$ | $d \\leq 2 \\times 10^5$                    |\n| $7$        |  $3$ | 无额外限制                                |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2022 Qualification] Dragonfly", "background": "在植物园和碧山公园周围的池塘中，经常可以看到蜻蜓。在一个更密集的森林区域中，Benson 记录了 $n$ 个池塘，以及蜻蜓可以捕食的昆虫数量和种类。\n\n在池塘 $i$，共有 $b_i$ 只昆虫，这些昆虫属于种类 $s_i$。\n\n此外，还有 $n-1$ 条小径，每条小径连接两池塘 $u_j$ 和 $v_j$（双向）。并且满足蜻蜓从每一个池塘出发都能到达其它所有池塘。\n\nBenson 抓住了 $d$ 只蜻蜓，并计划依次释放到池塘 $1$。每只蜻蜓有一个目标池塘 $h_k \\neq 1$，会沿着最短路径飞到目标池塘，并在经过的每个池塘中捕食昆虫（包括池塘 $1$）。\n\n每次捕食会减少池塘中 $1$ 只昆虫（如果昆虫数量不为 $0$）。需要帮助 Benson 计算每只蜻蜓的飞行过程中捕食到的不同种类昆虫的数量。", "description": "请确定每只蜻蜓的飞行过程中捕食到的不同种类昆虫的数量。", "inputFormat": "- 第一行包含两个整数 $n$ 和 $d$，分别表示池塘数量和蜻蜓数量。\n- 第二行包含 $n$ 个整数 $b_1, b_2, \\dots, b_n$，表示每个池塘的昆虫数量。\n- 第三行包含 $n$ 个整数 $s_1, s_2, \\dots, s_n$，表示每个池塘昆虫的种类。\n- 第四行包含 $d$ 个整数 $h_1, h_2, \\dots, h_d$，表示每只蜻蜓的目标池塘。\n- 接下来 $n-1$ 行，每行包含两个整数 $u_j$ 和 $v_j$，表示一条连接池塘 $u_j$ 和 $v_j$ 的小径。", "outputFormat": "输出一行包含 $d$ 个整数，第 $k$ 个整数表示第 $k$ 只蜻蜓捕食到的不同种类昆虫数量。", "hint": "【样例解释】\n\n对于样例 $1$，第一只蜻蜓飞向池塘 $2$，捕食 $1$ 只种类 $1$ 的昆虫和 $1$ 只种类 $2$ 的昆虫。第二只蜻蜓飞向池塘 $5$，捕食种类 $1$ 的昆虫，总共捕食 $1$ 个种类。  \n\n对于样例 $2$，每只蜻蜓飞行后捕食到的不同种类分别是 $2, 1, 1, 1$。\n\n【数据范围】\n\n- $2 \\leq n \\leq 2 \\times 10^5$\n- $1 \\leq d \\leq 2 \\times 10^6$\n- $1 \\leq s_i \\leq n$，$0 \\leq b_i \\leq d$，$1 \\leq u_j, v_j < n$\n\n| 子任务编号 | 分值 | 额外限制条件                              |\n| :--------: | :--: | :---------------------------------------: |\n| $1$        | $10$ | $n, d \\leq 1000$                          |\n| $2$        | $10$ | $b_i = d$                                 |\n| $3$        | $12$ | $b_i \\leq 10$                             |\n| $4$        | $12$ | $u_j = j$, $v_j = j + 1$                  |\n| $5$        | $37$ | $s_i = i$                                 |\n| $6$        | $16$ | $d \\leq 2 \\times 10^5$                    |\n| $7$        |  $3$ | 无额外限制                                |", "locale": "zh-CN"}}}
{"pid": "P11296", "type": "P", "difficulty": 4, "samples": [["3 1\n1", "2 0"], ["5 1\n-1", "-1 -1"], ["5 2\n4 -2", "1 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "数学", "2018", "NOISG（新加坡）"], "title": "[NOISG 2018 Prelim] Snail", "background": "翻译自 [NOISG 2018 Prelim A. Snail](https://github.com/noisg/sg_noi_archive/tree/master/2018_prelim)。", "description": "有一只蜗牛被困在了高度为 $H$ 的井中。\n\n这只蜗牛正在不停的尝试爬出这口井。具体来说，这只蜗牛会在一天中经历 $N$ 个阶段，阶段 $i$ 会向井口爬 $P_i$ 米（**可能为负**）。当蜗牛的高度**大于等于**井口的高度时，这只蜗牛就离开了井。当蜗牛的高度小于 $0$ 时，高度视为 $0$。\n\n现要求你求出蜗牛最早什么时候离开井或报告无解。\n\n**注意，天数和阶段都以 $0$ 开头，也就是说第一阶段实际上是第 $0$ 阶段。此外，你可能需要使用 `long long` 来存放输入的数字。**", "inputFormat": "第一行两个整数 $H,N$。\n接下来的一行，$N$ 个整数，第 $i$ 个整数表示 $P_i$。", "outputFormat": "一行两个整数 $D,P$，表示蜗牛会在第 $D$ 天的第 $P$ 阶段离开井。若永远无法离开，输出 `-1 -1`。", "hint": "### 【样例 #1 解释】\n第 $0$ 天的第 $0$ 阶段，爬行 $1$ 米，共爬行 $1$ 米。\n\n第 $1$ 天的第 $0$ 阶段，爬行 $1$ 米，共爬行 $2$ 米。\n\n第 $2$ 天的第 $0$ 阶段，爬行 $1$ 米，共爬行 $3$ 米，离开井。\n\n### 【样例 #2 解释】\n显然，蜗牛永远无法离开。\n\n### 【数据范围】\n| Subtask | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $11$ | $N=1$ |\n| $2$ | $9$ | 所有的 $P_i$ 相同 |\n| $3$ | $25$ | $H\\times N \\leq 10^4$ |\n| $4$ | $17$ | $P_i\\geq0$ |\n| $5$ | $38$ | 无 |\n\n对于 $100\\%$ 的数据：$1 \\leq H \\leq 10^{12},-10^{12}\\leq P_i\\leq 10^{12},1\\leq N \\leq 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2018 Prelim] Snail", "background": "翻译自 [NOISG 2018 Prelim A. Snail](https://github.com/noisg/sg_noi_archive/tree/master/2018_prelim)。", "description": "有一只蜗牛被困在了高度为 $H$ 的井中。\n\n这只蜗牛正在不停的尝试爬出这口井。具体来说，这只蜗牛会在一天中经历 $N$ 个阶段，阶段 $i$ 会向井口爬 $P_i$ 米（**可能为负**）。当蜗牛的高度**大于等于**井口的高度时，这只蜗牛就离开了井。当蜗牛的高度小于 $0$ 时，高度视为 $0$。\n\n现要求你求出蜗牛最早什么时候离开井或报告无解。\n\n**注意，天数和阶段都以 $0$ 开头，也就是说第一阶段实际上是第 $0$ 阶段。此外，你可能需要使用 `long long` 来存放输入的数字。**", "inputFormat": "第一行两个整数 $H,N$。\n接下来的一行，$N$ 个整数，第 $i$ 个整数表示 $P_i$。", "outputFormat": "一行两个整数 $D,P$，表示蜗牛会在第 $D$ 天的第 $P$ 阶段离开井。若永远无法离开，输出 `-1 -1`。", "hint": "### 【样例 #1 解释】\n第 $0$ 天的第 $0$ 阶段，爬行 $1$ 米，共爬行 $1$ 米。\n\n第 $1$ 天的第 $0$ 阶段，爬行 $1$ 米，共爬行 $2$ 米。\n\n第 $2$ 天的第 $0$ 阶段，爬行 $1$ 米，共爬行 $3$ 米，离开井。\n\n### 【样例 #2 解释】\n显然，蜗牛永远无法离开。\n\n### 【数据范围】\n| Subtask | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $11$ | $N=1$ |\n| $2$ | $9$ | 所有的 $P_i$ 相同 |\n| $3$ | $25$ | $H\\times N \\leq 10^4$ |\n| $4$ | $17$ | $P_i\\geq0$ |\n| $5$ | $38$ | 无 |\n\n对于 $100\\%$ 的数据：$1 \\leq H \\leq 10^{12},-10^{12}\\leq P_i\\leq 10^{12},1\\leq N \\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P11297", "type": "P", "difficulty": 4, "samples": [["15 5 \n4 12 1 \n2 1 1 \n10 4 1 \n1 1 1 \n2 2 1", "15"], ["20 3 \n5000 15 1 \n100 1 3 \n50 1 4", "5400"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "NOISG（新加坡）"], "title": "[NOISG 2018 Prelim] Knapsack", "background": "翻译自 [NOISG 2018 Prelim B. Knapsack](https://github.com/noisg/sg_noi_archive/tree/master/2018_prelim)。", "description": "你获得了超市的“免费购物”优惠，规则如下：\n- 你有一个容量为 $S$ 的购物篮。超市里共有 $n$ 样东西。第 $i$ 样东西的重量 $w_i$，价值为 $v_i$，这样东西共有 $k_i$ 个。\n- 你可以向你的购物篮塞入你想买的东西，前提是**这些东西的重量总和不超过购物篮的容量**。\n\n现在，你只想知道，在满足规则的情况下，你最多能带多少价值的东西回去？\n\n**请不要低估本题目的难度，如果你看到这就想写，请查看【数据范围】一栏**。", "inputFormat": "第一行两个正整数 $S,n$。\n\n接下来 $n$ 行，每行三个正整数 $v_i,w_i,k_i$。", "outputFormat": "一行一个正整数，代表你最多能带多少价值的东西回去。", "hint": "### 【样例 #1 解释】\n拿第 $2,3,4,5$ 种东西，每种东西拿一个。\n\n此时价值为 $15$，重量为 $8$。\n\n### 【样例 #2 解释】\n拿完第 $1,2$ 种东西后拿两个第 $3$ 种东西。\n\n此时价值为 $5400$，重量为 $20$。\n\n### 【数据范围】\n| $\\text{Subtask}$ | 分值 | $n\\leq$ | $k\\leq$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $0$ | 样例 | 样例 |\n| $1$ | $12$ | $1$ | - |\n| $2$ | $17$ | $100$ | $1$ |\n| $3$ | $20$ | $100$ | $10$ |\n| $4$ | $24$ | $100$ | $10^9$ |\n| $5$ | $27$ | $10^5$ | $10^9$ |\n| $6$（hack） | $0$ | $10^5$ | $10^9$ |\n\n对于 $100\\%$ 的数据：\n- $1 \\leq w_i \\leq S \\leq 2000$\n- $1 \\leq n \\leq 10^5$\n- $1 \\leq v_i \\leq 10^6$\n- $1 \\leq k_i \\leq 10^9$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2018 Prelim] Knapsack", "background": "翻译自 [NOISG 2018 Prelim B. Knapsack](https://github.com/noisg/sg_noi_archive/tree/master/2018_prelim)。", "description": "你获得了超市的“免费购物”优惠，规则如下：\n- 你有一个容量为 $S$ 的购物篮。超市里共有 $n$ 样东西。第 $i$ 样东西的重量 $w_i$，价值为 $v_i$，这样东西共有 $k_i$ 个。\n- 你可以向你的购物篮塞入你想买的东西，前提是**这些东西的重量总和不超过购物篮的容量**。\n\n现在，你只想知道，在满足规则的情况下，你最多能带多少价值的东西回去？\n\n**请不要低估本题目的难度，如果你看到这就想写，请查看【数据范围】一栏**。", "inputFormat": "第一行两个正整数 $S,n$。\n\n接下来 $n$ 行，每行三个正整数 $v_i,w_i,k_i$。", "outputFormat": "一行一个正整数，代表你最多能带多少价值的东西回去。", "hint": "### 【样例 #1 解释】\n拿第 $2,3,4,5$ 种东西，每种东西拿一个。\n\n此时价值为 $15$，重量为 $8$。\n\n### 【样例 #2 解释】\n拿完第 $1,2$ 种东西后拿两个第 $3$ 种东西。\n\n此时价值为 $5400$，重量为 $20$。\n\n### 【数据范围】\n| $\\text{Subtask}$ | 分值 | $n\\leq$ | $k\\leq$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $0$ | 样例 | 样例 |\n| $1$ | $12$ | $1$ | - |\n| $2$ | $17$ | $100$ | $1$ |\n| $3$ | $20$ | $100$ | $10$ |\n| $4$ | $24$ | $100$ | $10^9$ |\n| $5$ | $27$ | $10^5$ | $10^9$ |\n| $6$（hack） | $0$ | $10^5$ | $10^9$ |\n\n对于 $100\\%$ 的数据：\n- $1 \\leq w_i \\leq S \\leq 2000$\n- $1 \\leq n \\leq 10^5$\n- $1 \\leq v_i \\leq 10^6$\n- $1 \\leq k_i \\leq 10^9$", "locale": "zh-CN"}}}
{"pid": "P11298", "type": "P", "difficulty": 3, "samples": [["5 2\n1 7\n3 7\n6 2\n7 4\n6 7\n5 6", "3 1\n4 1"], ["5 1\n6 1\n6 2\n6 3\n6 4\n6 5", "3 1\n2 3"], ["6 3\n7 1\n7 2\n8 3\n8 4\n9 5\n9 6\n7 8\n9 8", "24 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "图论", "2018", "Special Judge", "NOISG（新加坡）"], "title": "[NOISG 2018 Prelim]  Island", "background": "翻译自 [NOISG 2018 Prelim C. Island](https://github.com/noisg/sg_noi_archive/tree/master/2018_prelim)。\n\n**本题已启用 Special Judge，满足题目条件的任何答案都将视为正确。保证 SPJ 用时不超过 $1$ 秒**。", "description": "老鼠吱吱发现了一座小岛，这座小岛上的人以捕鱼为生，所以他们的 $n$ 所房子（标号为 $1$ 到 $n$）都在小岛的**边缘**，大家还需要交换各自的鱼，所以有些路在小岛的中间。\n\n为了连接城镇，在岛的内部创建了 $m$ 个路口（标号为 $n+1$ 到 $n+m$）。为了最大限度地降低建设成本，这个岛上**只有 $n+m−1$ 条路**，这样任何两个城镇之间就有且仅有一条路。\n\n换言之，道路网络可以**表示为一棵树**，有 $n$ 个叶子（代表 $n$  所房子）和 $m$ 个非叶子节点（代表 $m$ 个路口）。根据树的性质，这棵树有 $n+m−1$条边（代表 $n+m-1$ 条路）。\n\n此外，**每个路口至少有三条路与之相连**，除了路口外，路不会与其他路相交，也没有桥梁或隧道（它们很贵）。以下是一个有 $37$ 所房子、$20$ 个路口和 $56$ 条道路的岛的参考图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h32hwja1.png)\n\n老鼠吱吱很喜欢这座小岛，但是因为某种原因，它的地图被吹走了。但是吱吱想规划它的行程，所以他想知道小岛房子的位置。\n\n幸运的是，它记录了**每一条道路的起点和终点**的观察记录本还在，现在请你推出，共有几种不同的情况使得小岛房子的位置不同。\n\n**注意小岛是环形的，经过旋转完全一样的顺序视为同一种顺序**。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n+m-1$ 行，每行两个整数 $u,v$，表示这条道路的起点与终点。如 $u \\leq n$，则起点是一所房子，否则是一个路口。对 $v$ 同理。", "outputFormat": "若干行，第 $i$ 行两个整数 $a_i,b_i$。\n\n假设你的答案由 $k$ 行构成。你的输出表示 答案 $P=a_1^{b_1}a_2^{b_2}\\cdots a_k^{b_k}$（也可记作 $\\prod_{j=1}^ka_j^{b_j}$）。\n\n你的输出应满足以下要求：\n- $0\\leq k\\leq 10^6$\n- $1\\leq a_i,b_i\\leq 10^{18}$\n\n**如果无解，请什么都不要输出**。", "hint": "### 【样例 #1 解释】\n有 $12$ 种合法的排列，如下图。\n\n使用其他的方式（如 $4^1\\times3^1$）也是可以的。\n\n所有排列如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/847a8hm5.png)\n### 【样例 #2 解释】\n有 $24$ 种合法的排列，其中一种如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/xrc1rdel.png)\n\n算出答案是 $5!=120$ 的很有可能是因为没有考虑旋转后一样的视为同一种方案的问题。\n### 【样例 #3 解释】\n有 $24$ 种合法的排列，其中一种如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/d7xgyycj.png)\n### 【数据范围】\n| $\\text{Subtask}$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $7$ | $n+m\\leq 2\\times 10^5,m\\leq1$ |\n| $2$ | $20$ | $n+m\\leq 2\\times 10^5,m\\leq10$ |\n| $3$ | $31$ | $n+m\\leq 10^3$ |\n| $4$ | $42$ | $n+m\\leq 2\\times 10^5$ |\n\n对于 $100\\%$ 的数据：\n- $2 \\leq n,0\\leq m$\n- $n+m \\leq 2\\times10^5$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2018 Prelim]  Island", "background": "翻译自 [NOISG 2018 Prelim C. Island](https://github.com/noisg/sg_noi_archive/tree/master/2018_prelim)。\n\n**本题已启用 Special Judge，满足题目条件的任何答案都将视为正确。保证 SPJ 用时不超过 $1$ 秒**。", "description": "老鼠吱吱发现了一座小岛，这座小岛上的人以捕鱼为生，所以他们的 $n$ 所房子（标号为 $1$ 到 $n$）都在小岛的**边缘**，大家还需要交换各自的鱼，所以有些路在小岛的中间。\n\n为了连接城镇，在岛的内部创建了 $m$ 个路口（标号为 $n+1$ 到 $n+m$）。为了最大限度地降低建设成本，这个岛上**只有 $n+m−1$ 条路**，这样任何两个城镇之间就有且仅有一条路。\n\n换言之，道路网络可以**表示为一棵树**，有 $n$ 个叶子（代表 $n$  所房子）和 $m$ 个非叶子节点（代表 $m$ 个路口）。根据树的性质，这棵树有 $n+m−1$条边（代表 $n+m-1$ 条路）。\n\n此外，**每个路口至少有三条路与之相连**，除了路口外，路不会与其他路相交，也没有桥梁或隧道（它们很贵）。以下是一个有 $37$ 所房子、$20$ 个路口和 $56$ 条道路的岛的参考图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h32hwja1.png)\n\n老鼠吱吱很喜欢这座小岛，但是因为某种原因，它的地图被吹走了。但是吱吱想规划它的行程，所以他想知道小岛房子的位置。\n\n幸运的是，它记录了**每一条道路的起点和终点**的观察记录本还在，现在请你推出，共有几种不同的情况使得小岛房子的位置不同。\n\n**注意小岛是环形的，经过旋转完全一样的顺序视为同一种顺序**。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n+m-1$ 行，每行两个整数 $u,v$，表示这条道路的起点与终点。如 $u \\leq n$，则起点是一所房子，否则是一个路口。对 $v$ 同理。", "outputFormat": "若干行，第 $i$ 行两个整数 $a_i,b_i$。\n\n假设你的答案由 $k$ 行构成。你的输出表示 答案 $P=a_1^{b_1}a_2^{b_2}\\cdots a_k^{b_k}$（也可记作 $\\prod_{j=1}^ka_j^{b_j}$）。\n\n你的输出应满足以下要求：\n- $0\\leq k\\leq 10^6$\n- $1\\leq a_i,b_i\\leq 10^{18}$\n\n**如果无解，请什么都不要输出**。", "hint": "### 【样例 #1 解释】\n有 $12$ 种合法的排列，如下图。\n\n使用其他的方式（如 $4^1\\times3^1$）也是可以的。\n\n所有排列如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/847a8hm5.png)\n### 【样例 #2 解释】\n有 $24$ 种合法的排列，其中一种如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/xrc1rdel.png)\n\n算出答案是 $5!=120$ 的很有可能是因为没有考虑旋转后一样的视为同一种方案的问题。\n### 【样例 #3 解释】\n有 $24$ 种合法的排列，其中一种如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/d7xgyycj.png)\n### 【数据范围】\n| $\\text{Subtask}$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $7$ | $n+m\\leq 2\\times 10^5,m\\leq1$ |\n| $2$ | $20$ | $n+m\\leq 2\\times 10^5,m\\leq10$ |\n| $3$ | $31$ | $n+m\\leq 10^3$ |\n| $4$ | $42$ | $n+m\\leq 2\\times 10^5$ |\n\n对于 $100\\%$ 的数据：\n- $2 \\leq n,0\\leq m$\n- $n+m \\leq 2\\times10^5$", "locale": "zh-CN"}}}
{"pid": "P11299", "type": "P", "difficulty": 3, "samples": [["2\n1 2\n2 1", "YES"], ["3\n2 4 3\n4 2 3", "NO"], ["2\n5 1\n0 0", "YES"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "分类讨论", "NOISG（新加坡）"], "title": "[NOISG 2021 Finals] Fraud", "background": "你被任命为第 $24$ 届全国信息学奥林匹克竞赛的负责人！", "description": "本次竞赛共有 $N$ 名参赛者和 $2$ 轮比赛。第 $i$ 名参赛者在第一轮获得了 $A_i$ 分，在第二轮获得了 $B_i$ 分。\n\n每轮比赛分别有一个正整数权重 $X$ 和 $Y$。第 $i$ 名参赛者的最终得分 $S_i$ 计算公式为：\n\n$$\nS_i = A_i \\times X + B_i \\times Y\n$$\n\n作为竞赛负责人，你可以自由选择 $X$ 和 $Y$ 的值。\n\n然而，老鼠 Squeaky 贿赂了你，要求你选择某些 $X$ 和 $Y$，使得 $S_i > S_j$ 对所有 $1 \\leq i < j \\leq N$ 都成立。如果能做到，他会重金酬谢。\n\n但是，这是否可能呢？", "inputFormat": "- 第一行包含一个整数 $N$，表示参赛者的数量。\n- 第二行包含 $N$ 个整数 $A_1, A_2, \\dots, A_N$，表示第一轮的得分。\n- 第三行包含 $N$ 个整数 $B_1, B_2, \\dots, B_N$，表示第二轮的得分。", "outputFormat": "输出一行：如果可以实现目标，输出 `YES`；否则输出 `NO`。", "hint": "【样例解释】\n\n- 对于样例 $1$，选择 $X = 1$ 和 $Y = 2$，此时 $S_1 = 1 \\times 1 + 2 \\times 2 = 5$，$S_2 = 2 \\times 1 + 1 \\times 2 = 4$，满足条件。\n- 对于样例 $2$，无论如何选择 $X$ 和 $Y$，都无法满足条件。\n- 对于样例 $3$，选择任意非零 $X$ 均满足条件，因为 $S_1 > S_2$。\n\n【数据范围】\n\n- $2 \\leq N \\leq 3 \\times 10^5$\n- $0 \\leq A_i, B_i \\leq 10^6$\n\n| 子任务编号 | 分值 | 额外限制条件      |\n| :--------: | :--: | :---------------: |\n| $1$        | $10$ | $B_i = 0$         |\n| $2$        | $25$ | $N = 2$           |\n| $3$        | $50$ | $2 \\leq N \\leq 10^4$ |\n| $4$        | $15$ | 无额外限制        |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2021 Finals] Fraud", "background": "你被任命为第 $24$ 届全国信息学奥林匹克竞赛的负责人！", "description": "本次竞赛共有 $N$ 名参赛者和 $2$ 轮比赛。第 $i$ 名参赛者在第一轮获得了 $A_i$ 分，在第二轮获得了 $B_i$ 分。\n\n每轮比赛分别有一个正整数权重 $X$ 和 $Y$。第 $i$ 名参赛者的最终得分 $S_i$ 计算公式为：\n\n$$\nS_i = A_i \\times X + B_i \\times Y\n$$\n\n作为竞赛负责人，你可以自由选择 $X$ 和 $Y$ 的值。\n\n然而，老鼠 Squeaky 贿赂了你，要求你选择某些 $X$ 和 $Y$，使得 $S_i > S_j$ 对所有 $1 \\leq i < j \\leq N$ 都成立。如果能做到，他会重金酬谢。\n\n但是，这是否可能呢？", "inputFormat": "- 第一行包含一个整数 $N$，表示参赛者的数量。\n- 第二行包含 $N$ 个整数 $A_1, A_2, \\dots, A_N$，表示第一轮的得分。\n- 第三行包含 $N$ 个整数 $B_1, B_2, \\dots, B_N$，表示第二轮的得分。", "outputFormat": "输出一行：如果可以实现目标，输出 `YES`；否则输出 `NO`。", "hint": "【样例解释】\n\n- 对于样例 $1$，选择 $X = 1$ 和 $Y = 2$，此时 $S_1 = 1 \\times 1 + 2 \\times 2 = 5$，$S_2 = 2 \\times 1 + 1 \\times 2 = 4$，满足条件。\n- 对于样例 $2$，无论如何选择 $X$ 和 $Y$，都无法满足条件。\n- 对于样例 $3$，选择任意非零 $X$ 均满足条件，因为 $S_1 > S_2$。\n\n【数据范围】\n\n- $2 \\leq N \\leq 3 \\times 10^5$\n- $0 \\leq A_i, B_i \\leq 10^6$\n\n| 子任务编号 | 分值 | 额外限制条件      |\n| :--------: | :--: | :---------------: |\n| $1$        | $10$ | $B_i = 0$         |\n| $2$        | $25$ | $N = 2$           |\n| $3$        | $50$ | $2 \\leq N \\leq 10^4$ |\n| $4$        | $15$ | 无额外限制        |", "locale": "zh-CN"}}}
{"pid": "P11300", "type": "P", "difficulty": 0, "samples": [["7 4 2\n0 0 1 1 2 2", "无"]], "limits": {"time": [12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "交互题", "Special Judge", "NOISG（新加坡）"], "title": "[NOISG 2021 Finals] Archaeologist", "background": "### 滥用本题评测将被封号。\n\n一组考古学家正在探索一个由房间和双向通道组成的遗迹。遗迹中的房间编号为 $0$ 到 $N-1$，且满足以下条件：\n\n1. 遗迹中不存在环。\n2. 所有房间均可从入口房间（编号为 $0$）到达。\n\n考古学家无法回头（即不能沿已走过的通道返回），也无法得知其他考古学家的数量或位置。然而，他们可以通过调整房间的光照等级来标记房间的状态。每个房间的光照等级初始为 $0$，可以被设置为 $0$ 到 $L$ 之间的任意值。\n\n任务是设计一种策略，使得所有房间均能被 $K$ 名考古学家探索到。", "description": "为了完成本题，你需要在程序开头定义函数 `void set_light(int level)`，你无需引入其他头文件。\n\n实现以下函数：\n\n```cpp\nvoid archaeologist(int N, int K, int L, vector<int> map, int lightlevel, vector<int> paths)\n```\n\n- `N`：房间总数。\n- `K`：考古学家总数。\n- `L`：光照等级的最大值。\n- `map`：长度为 $N$ 的数组，其中 `map[0]` $= -1$，对于 $i \\geq 1$，`map[i]` 表示房间 $i$ 直接连接的父房间编号。\n- `lightlevel`：当前房间的光照等级。\n- `paths`：当前房间中其他通道终点的光照等级列表（顺序随机，不包括返回的通道）。\n\n### 函数行为\n\n1. 每次调用 `archaeologist` 表示一位考古学家从房间 $0$ 出发，依次探索多个房间，直到到达目标房间。\n2. 考古学家可以调用以下辅助函数完成任务：\n   - `void set_light(int level)`：\n     - 设置当前房间的光照等级。\n     - 参数 `level` 为新的光照等级，需满足 $0 \\leq$ `level` $\\leq L$。\n   - `(int, int[]) take_path(int corridor)`：\n     - 选择通道进入相邻房间。\n     - 参数 `corridor` 表示通道索引。\n     - 返回值包含两个数据：\n       1. 新房间的编号。\n       2. 新房间中其他通道终点的光照等级列表（顺序随机，不包括返回的通道）。\n\n### 注意事项\n\n1. 每次调用 `archaeologist` 仅代表一位考古学家的行为，不能共享全局变量。\n2. 程序不能通过调用 `exit()` 提前终止。", "inputFormat": "- 第一行包含三个整数 $N, K, L$。\n- 第二行包含 $N-1$ 个整数，表示 `map[i]` 的值（$i \\geq 1$）。", "outputFormat": "程序通过调用辅助函数完成所有探索任务，无需额外输出。", "hint": "【数据范围】\n\n- $1 \\leq N \\leq 1000$\n- $K$ 等于无其他出口的房间数量（死胡同房间）。\n- $L$ 大于等于房间 $0$ 到最远房间的通道数。\n\n| 子任务编号 | 分值 | 限制条件                          |\n| :--------: | :--: | :------------------------------: |\n| $1$          | $6$    | $L = 1$，且 `map[i]` $= 0$ 对所有 $1 \\leq i < N$ 成立 |\n| $2$          | $14$   | $L = N$                          |\n| $3$          | $15$   | `map` 为完全二叉树 |\n| $4$          | $18$   | `map` 除 $-1$ 外所有元素都至少出现了两次        |\n| $5$          | $47$   | 无额外限制                       |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2021 Finals] Archaeologist", "background": "### 滥用本题评测将被封号。\n\n一组考古学家正在探索一个由房间和双向通道组成的遗迹。遗迹中的房间编号为 $0$ 到 $N-1$，且满足以下条件：\n\n1. 遗迹中不存在环。\n2. 所有房间均可从入口房间（编号为 $0$）到达。\n\n考古学家无法回头（即不能沿已走过的通道返回），也无法得知其他考古学家的数量或位置。然而，他们可以通过调整房间的光照等级来标记房间的状态。每个房间的光照等级初始为 $0$，可以被设置为 $0$ 到 $L$ 之间的任意值。\n\n任务是设计一种策略，使得所有房间均能被 $K$ 名考古学家探索到。", "description": "为了完成本题，你需要在程序开头定义函数 `void set_light(int level)`，你无需引入其他头文件。\n\n实现以下函数：\n\n```cpp\nvoid archaeologist(int N, int K, int L, vector<int> map, int lightlevel, vector<int> paths)\n```\n\n- `N`：房间总数。\n- `K`：考古学家总数。\n- `L`：光照等级的最大值。\n- `map`：长度为 $N$ 的数组，其中 `map[0]` $= -1$，对于 $i \\geq 1$，`map[i]` 表示房间 $i$ 直接连接的父房间编号。\n- `lightlevel`：当前房间的光照等级。\n- `paths`：当前房间中其他通道终点的光照等级列表（顺序随机，不包括返回的通道）。\n\n### 函数行为\n\n1. 每次调用 `archaeologist` 表示一位考古学家从房间 $0$ 出发，依次探索多个房间，直到到达目标房间。\n2. 考古学家可以调用以下辅助函数完成任务：\n   - `void set_light(int level)`：\n     - 设置当前房间的光照等级。\n     - 参数 `level` 为新的光照等级，需满足 $0 \\leq$ `level` $\\leq L$。\n   - `(int, int[]) take_path(int corridor)`：\n     - 选择通道进入相邻房间。\n     - 参数 `corridor` 表示通道索引。\n     - 返回值包含两个数据：\n       1. 新房间的编号。\n       2. 新房间中其他通道终点的光照等级列表（顺序随机，不包括返回的通道）。\n\n### 注意事项\n\n1. 每次调用 `archaeologist` 仅代表一位考古学家的行为，不能共享全局变量。\n2. 程序不能通过调用 `exit()` 提前终止。", "inputFormat": "- 第一行包含三个整数 $N, K, L$。\n- 第二行包含 $N-1$ 个整数，表示 `map[i]` 的值（$i \\geq 1$）。", "outputFormat": "程序通过调用辅助函数完成所有探索任务，无需额外输出。", "hint": "【数据范围】\n\n- $1 \\leq N \\leq 1000$\n- $K$ 等于无其他出口的房间数量（死胡同房间）。\n- $L$ 大于等于房间 $0$ 到最远房间的通道数。\n\n| 子任务编号 | 分值 | 限制条件                          |\n| :--------: | :--: | :------------------------------: |\n| $1$          | $6$    | $L = 1$，且 `map[i]` $= 0$ 对所有 $1 \\leq i < N$ 成立 |\n| $2$          | $14$   | $L = N$                          |\n| $3$          | $15$   | `map` 为完全二叉树 |\n| $4$          | $18$   | `map` 除 $-1$ 外所有元素都至少出现了两次        |\n| $5$          | $47$   | 无额外限制                       |", "locale": "zh-CN"}}}
{"pid": "P11301", "type": "P", "difficulty": 0, "samples": [["3 4\n1 2 0\n2 1 2", "4"], ["7 1\n1 0 1 0 1 1 1\n0 0 1 1 0 1 0", "3"], ["7 9\n1 5 3 4 8 3 2\n7 4 8 3 2 3 1", "18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "NOISG（新加坡）"], "title": "[NOISG 2021 Finals] Password", "background": "神秘的怪盗鲁邦四世（通常称为鲁邦）接下了一项艰巨任务——闯入世界上最大、最宏伟、最先进的城堡：“卡利奥斯特罗城堡”的金库。尽管城堡有最顶尖的安保系统，鲁邦依然无所畏惧。他成功绕过了守卫和监控，破解了许多陷阱和谜题，最终抵达金库。\n\n然而，金库的最后一道防线是一个电子密码系统。密码系统需要输入正确的密码才能打开金库。屏幕上最初显示了 $N$ 个非负整数，编号为 $A_i$。密码由 $N$ 个数字 $P_i$ 组成，且所有数字范围均为 $0$ 到 $K$。通过鲁邦的天才智慧，他推导出了密码的值。", "description": "输入密码的过程很复杂：当前显示的数字 $C_i$ 需要通过特定的操作变为密码数字 $P_i$ 才能打开金库。\n\n操作规则如下：\n- 选择两个整数 $i, j$，其中 $1 \\leq i \\leq j \\leq N$。\n- 对所有满足 $i \\leq l \\leq j$ 的数字 $C_l$，将其更改为 $C_l + 1 \\mod (K + 1)$。\n\n鲁邦希望用最少的操作次数将屏幕上的数字转变为密码。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $K$。\n- 第二行包含 $N$ 个整数 $A_1, A_2, \\dots, A_N$，表示初始显示的数字。\n- 第三行包含 $N$ 个整数 $P_1, P_2, \\dots, P_N$，表示密码。", "outputFormat": "输出一个整数，表示将屏幕上的数字变为密码所需的最小操作次数。", "hint": "【样例解释】\n\n- 对于样例 $1$，一个最优的操作序列为选择 $(i, j) = (1, 3)$ 一次，$(2, 3)$ 一次，以及 $(2, 2)$ 两次，总操作次数为 $4$。\n- 对于样例 $2$，一个最优的操作序列为选择 $(i, j) = (1, 3)$ 一次，$(2, 6)$ 一次，以及 $(6, 7)$ 一次，总操作次数为 $3$。\n- 对于样例 $3$，最优的操作需要 $18$ 次。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$\n- $0 \\leq K \\leq 10^9$\n- $0 \\leq A_i, P_i \\leq K$\n\n| 子任务编号 | 分值 | 额外限制条件                                   |\n| :--------: | :--: | :------------------------------------------: |\n| $1$        | $6$  | $N \\leq 3$                                    |\n| $2$        | $5$  | $A_i \\leq A_{i+1}$ 且 $P_i = 0$               |\n| $3$        | $9$  | $K \\leq 1$                                    |\n| $4$        | $10$ | $N, K \\leq 80$                                |\n| $5$        | $13$ | $N \\leq 400$                                  |\n| $6$        | $23$ | $N \\leq 3000$                                 |\n| $7$        | $34$ | 无额外限制                                   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2021 Finals] Password", "background": "神秘的怪盗鲁邦四世（通常称为鲁邦）接下了一项艰巨任务——闯入世界上最大、最宏伟、最先进的城堡：“卡利奥斯特罗城堡”的金库。尽管城堡有最顶尖的安保系统，鲁邦依然无所畏惧。他成功绕过了守卫和监控，破解了许多陷阱和谜题，最终抵达金库。\n\n然而，金库的最后一道防线是一个电子密码系统。密码系统需要输入正确的密码才能打开金库。屏幕上最初显示了 $N$ 个非负整数，编号为 $A_i$。密码由 $N$ 个数字 $P_i$ 组成，且所有数字范围均为 $0$ 到 $K$。通过鲁邦的天才智慧，他推导出了密码的值。", "description": "输入密码的过程很复杂：当前显示的数字 $C_i$ 需要通过特定的操作变为密码数字 $P_i$ 才能打开金库。\n\n操作规则如下：\n- 选择两个整数 $i, j$，其中 $1 \\leq i \\leq j \\leq N$。\n- 对所有满足 $i \\leq l \\leq j$ 的数字 $C_l$，将其更改为 $C_l + 1 \\mod (K + 1)$。\n\n鲁邦希望用最少的操作次数将屏幕上的数字转变为密码。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $K$。\n- 第二行包含 $N$ 个整数 $A_1, A_2, \\dots, A_N$，表示初始显示的数字。\n- 第三行包含 $N$ 个整数 $P_1, P_2, \\dots, P_N$，表示密码。", "outputFormat": "输出一个整数，表示将屏幕上的数字变为密码所需的最小操作次数。", "hint": "【样例解释】\n\n- 对于样例 $1$，一个最优的操作序列为选择 $(i, j) = (1, 3)$ 一次，$(2, 3)$ 一次，以及 $(2, 2)$ 两次，总操作次数为 $4$。\n- 对于样例 $2$，一个最优的操作序列为选择 $(i, j) = (1, 3)$ 一次，$(2, 6)$ 一次，以及 $(6, 7)$ 一次，总操作次数为 $3$。\n- 对于样例 $3$，最优的操作需要 $18$ 次。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$\n- $0 \\leq K \\leq 10^9$\n- $0 \\leq A_i, P_i \\leq K$\n\n| 子任务编号 | 分值 | 额外限制条件                                   |\n| :--------: | :--: | :------------------------------------------: |\n| $1$        | $6$  | $N \\leq 3$                                    |\n| $2$        | $5$  | $A_i \\leq A_{i+1}$ 且 $P_i = 0$               |\n| $3$        | $9$  | $K \\leq 1$                                    |\n| $4$        | $10$ | $N, K \\leq 80$                                |\n| $5$        | $13$ | $N \\leq 400$                                  |\n| $6$        | $23$ | $N \\leq 3000$                                 |\n| $7$        | $34$ | 无额外限制                                   |", "locale": "zh-CN"}}}
{"pid": "P11302", "type": "P", "difficulty": 6, "samples": [["4 5\n.x.x\nxx..\n...x\n2 1 4\n2 3 3\n1 2 3\n2 1 4\n2 3 3", "11\n3\n3\n1"], ["2 1\n..\n..\nxx\n2 1 2", "7"], ["14 2\n..............\n..............\n..............\n2 2 11\n2 1 14", "47177097\n254767228"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "NOISG（新加坡）"], "title": "[NOISG 2021 Finals] Tiles", "background": "Eustace the Sheep 刚搬进新家，决定翻新他的浴室，因为他实在受不了它单调的内部装饰。目前，浴室的地板是一个 $3 \\times N$ 的黑白方格网格。\n\n他有大量相同的 $1 \\times 2$ 长方形瓷砖。为了保持浴室的美观，瓷砖可以旋转，但必须平行于墙壁摆放。此外，粘贴瓷砖的胶水不能涂在黑色方格上，因此瓷砖只能放在白色方格上。\n", "description": "Eustace 想知道，在从第 $a$ 列到第 $b$ 列的区域中，可以形成多少种不同的瓷砖铺设方案（可以不铺瓷砖）。如果两种方案中，某两个方格是否共用一块瓷砖不同，则认为两种方案不同。\n\n在计算铺设方案的同时，Eustace 注意到由于霉菌等问题，部分方格可能会变色（从黑变白，或从白变黑）。\n\n请帮助 Eustace 在不断变化的地板颜色中回答以下问题：\n1. 翻转某个方格的颜色。\n2. 查询特定区域内可能的瓷砖铺设方案数。\n\n输出结果需要对 $10^9 + 7$ 取模。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $Q$，表示浴室地板的列数以及查询和更新操作的总数。\n- 接下来 $3$ 行，每行包含一个长度为 $N$ 的字符串，仅由 `.` 和 `x` 组成：\n  - `.` 表示白色方格。\n  - `x` 表示黑色方格。\n- 接下来的 $Q$ 行中，每行有两种格式之一：\n  - `1 x y`：表示翻转第 $x$ 行第 $y$ 列的方格颜色。\n  - `2 a b`：查询从第 $a$ 列到第 $b$ 列可能的铺设方案数。", "outputFormat": "对于每个查询操作（格式为 `2 a b`），输出一个整数表示方案数对 $10^9 + 7$ 取模后的结果。", "hint": "【样例解释】\n\n- 对于样例 $1$，在第一次查询时，可以形成 $11$ 种铺设方案。  \n- 在更新操作后，某些区域的方格颜色发生变化，导致后续查询结果也发生改变。\n\n【数据范围】\n\n- $1 \\leq N, Q \\leq 30000$\n- $1 \\leq x \\leq 3$\n- $1 \\leq y \\leq N$\n- $1 \\leq a \\leq b \\leq N$\n\n| 子任务编号 | 分值 | 额外限制条件                |\n| :--------: | :--: | :------------------------: |\n| $1$        | $17$ | $1 \\leq N, Q \\leq 8$      |\n| $2$        | $23$ | 不存在黑色方格            |\n| $3$        | $26$ | $1 \\leq N, Q \\leq 7000$   |\n| $4$        | $34$ | 无额外限制                |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2021 Finals] Tiles", "background": "Eustace the Sheep 刚搬进新家，决定翻新他的浴室，因为他实在受不了它单调的内部装饰。目前，浴室的地板是一个 $3 \\times N$ 的黑白方格网格。\n\n他有大量相同的 $1 \\times 2$ 长方形瓷砖。为了保持浴室的美观，瓷砖可以旋转，但必须平行于墙壁摆放。此外，粘贴瓷砖的胶水不能涂在黑色方格上，因此瓷砖只能放在白色方格上。\n", "description": "Eustace 想知道，在从第 $a$ 列到第 $b$ 列的区域中，可以形成多少种不同的瓷砖铺设方案（可以不铺瓷砖）。如果两种方案中，某两个方格是否共用一块瓷砖不同，则认为两种方案不同。\n\n在计算铺设方案的同时，Eustace 注意到由于霉菌等问题，部分方格可能会变色（从黑变白，或从白变黑）。\n\n请帮助 Eustace 在不断变化的地板颜色中回答以下问题：\n1. 翻转某个方格的颜色。\n2. 查询特定区域内可能的瓷砖铺设方案数。\n\n输出结果需要对 $10^9 + 7$ 取模。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $Q$，表示浴室地板的列数以及查询和更新操作的总数。\n- 接下来 $3$ 行，每行包含一个长度为 $N$ 的字符串，仅由 `.` 和 `x` 组成：\n  - `.` 表示白色方格。\n  - `x` 表示黑色方格。\n- 接下来的 $Q$ 行中，每行有两种格式之一：\n  - `1 x y`：表示翻转第 $x$ 行第 $y$ 列的方格颜色。\n  - `2 a b`：查询从第 $a$ 列到第 $b$ 列可能的铺设方案数。", "outputFormat": "对于每个查询操作（格式为 `2 a b`），输出一个整数表示方案数对 $10^9 + 7$ 取模后的结果。", "hint": "【样例解释】\n\n- 对于样例 $1$，在第一次查询时，可以形成 $11$ 种铺设方案。  \n- 在更新操作后，某些区域的方格颜色发生变化，导致后续查询结果也发生改变。\n\n【数据范围】\n\n- $1 \\leq N, Q \\leq 30000$\n- $1 \\leq x \\leq 3$\n- $1 \\leq y \\leq N$\n- $1 \\leq a \\leq b \\leq N$\n\n| 子任务编号 | 分值 | 额外限制条件                |\n| :--------: | :--: | :------------------------: |\n| $1$        | $17$ | $1 \\leq N, Q \\leq 8$      |\n| $2$        | $23$ | 不存在黑色方格            |\n| $3$        | $26$ | $1 \\leq N, Q \\leq 7000$   |\n| $4$        | $34$ | 无额外限制                |", "locale": "zh-CN"}}}
{"pid": "P11303", "type": "P", "difficulty": 7, "samples": [["7 3\n5 2 4 2 2 5", "86"], ["9 5\n4 3 2 1 1 3 6 10", "129"], ["6 4\n1 1 1 1 1", "21"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "NOISG（新加坡）"], "title": "[NOISG 2021 Finals] Pond", "background": "乌龟 Syrup 经常在他家旁边的池塘里游泳。这个池塘是由很久以前的冰川运动形成的，呈狭长直线状，水面平静，适合双向游泳。", "description": "今天，Syrup 像往常一样游泳时，发现了一簇绿点——正在萌发的藻类孢子。经过暴雨冲刷，富含营养的土壤流入池塘，为藻类提供了大量养分，导致它们以惊人的速度生长。如果不加以控制，这些藻类会遮挡阳光，破坏水下生态平衡。\n\n幸运的是，Syrup 有一个简单有效的解决方案——吃掉它们。他已经识别出池塘中 $N$ 个土壤流失点，标号为 $1$ 到 $N$，并记下了它们之间的距离 $D_i$（第 $i$ 点到第 $i+1$ 点之间的距离为 $D_i$）。目前，Syrup 位于第 $K$ 个点，并从这里开始消灭藻类。\n\n池塘中的每个点初始有 $0$ 条藻类，并且每秒会增加 $1$ 条藻类，直到 Syrup 到达该点并吃掉所有藻类。Syrup 需要选择一个方向，沿着池塘游泳，并依次吃掉遇到的所有藻类。为了让藻类不至于变得太难吃，他希望尽可能减少吃下的藻类总数。\n\n你的任务是计算 Syrup 吃下的最少藻类总数。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $K$，分别表示池塘中的土壤流失点数量和 Syrup 的起始位置。\n- 第二行包含 $N-1$ 个整数 $D_1, D_2, \\dots, D_{N-1}$，表示相邻流失点之间的距离。", "outputFormat": "输出一个整数，表示 Syrup 吃下的最少藻类总数。", "hint": "【样例解释】\n\n- 对于样例 $1$，最优路径是按顺序访问点 $3 \\to 2 \\to 4 \\to 5 \\to 6 \\to 7 \\to 1$，总共吃掉 $0 + 2 + 8 + 10 + 12 + 17 + 37 = 86$ 条藻类。\n- 对于样例 $2$，最优路径是按顺序访问点 $5 \\to 6 \\to 4 \\to 3 \\to 2 \\to 1 \\to 7 \\to 8 \\to 9$，总共吃掉 $0 + 1 + 3 + 5 + 8 + 12 + 26 + 32 + 42 = 129$ 条藻类。\n- 对于样例 $3$，最优路径是按顺序访问点 $4 \\to 3 \\to 2 \\to 1 \\to 5 \\to 6$，总共吃掉 $0 + 1 + 2 + 3 + 7 + 8 = 21$ 条藻类。\n\n【数据范围】\n\n- $2 \\leq N \\leq 3 \\times 10^5$\n- $1 \\leq K \\leq N$\n- $1 \\leq D_i \\leq 10^6$\n\n| 子任务编号 | 分值 | 额外限制条件                       |\n| :--------: | :--: | :-------------------------------: |\n| $1$        | $7$  | $N \\leq 100$                     |\n| $2$        | $11$ | $N \\leq 2000$                    |\n| $3$        | $10$ | $1 \\leq K \\leq \\min(N, 20)$      |\n| $4$        | $6$  | $D_i = 1$                        |\n| $5$        | $12$ | $1 \\leq K \\leq \\min(N, 2000)$ 且 $D_i \\geq D_{i+1}$（对所有 $i$ 满足 $i \\not\\equiv 0 \\pmod{100}$） |\n| $6$        | $25$ | $1 \\leq K \\leq \\min(N, 2000)$    |\n| $7$        | $29$ | 无额外限制                       |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2021 Finals] Pond", "background": "乌龟 Syrup 经常在他家旁边的池塘里游泳。这个池塘是由很久以前的冰川运动形成的，呈狭长直线状，水面平静，适合双向游泳。", "description": "今天，Syrup 像往常一样游泳时，发现了一簇绿点——正在萌发的藻类孢子。经过暴雨冲刷，富含营养的土壤流入池塘，为藻类提供了大量养分，导致它们以惊人的速度生长。如果不加以控制，这些藻类会遮挡阳光，破坏水下生态平衡。\n\n幸运的是，Syrup 有一个简单有效的解决方案——吃掉它们。他已经识别出池塘中 $N$ 个土壤流失点，标号为 $1$ 到 $N$，并记下了它们之间的距离 $D_i$（第 $i$ 点到第 $i+1$ 点之间的距离为 $D_i$）。目前，Syrup 位于第 $K$ 个点，并从这里开始消灭藻类。\n\n池塘中的每个点初始有 $0$ 条藻类，并且每秒会增加 $1$ 条藻类，直到 Syrup 到达该点并吃掉所有藻类。Syrup 需要选择一个方向，沿着池塘游泳，并依次吃掉遇到的所有藻类。为了让藻类不至于变得太难吃，他希望尽可能减少吃下的藻类总数。\n\n你的任务是计算 Syrup 吃下的最少藻类总数。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $K$，分别表示池塘中的土壤流失点数量和 Syrup 的起始位置。\n- 第二行包含 $N-1$ 个整数 $D_1, D_2, \\dots, D_{N-1}$，表示相邻流失点之间的距离。", "outputFormat": "输出一个整数，表示 Syrup 吃下的最少藻类总数。", "hint": "【样例解释】\n\n- 对于样例 $1$，最优路径是按顺序访问点 $3 \\to 2 \\to 4 \\to 5 \\to 6 \\to 7 \\to 1$，总共吃掉 $0 + 2 + 8 + 10 + 12 + 17 + 37 = 86$ 条藻类。\n- 对于样例 $2$，最优路径是按顺序访问点 $5 \\to 6 \\to 4 \\to 3 \\to 2 \\to 1 \\to 7 \\to 8 \\to 9$，总共吃掉 $0 + 1 + 3 + 5 + 8 + 12 + 26 + 32 + 42 = 129$ 条藻类。\n- 对于样例 $3$，最优路径是按顺序访问点 $4 \\to 3 \\to 2 \\to 1 \\to 5 \\to 6$，总共吃掉 $0 + 1 + 2 + 3 + 7 + 8 = 21$ 条藻类。\n\n【数据范围】\n\n- $2 \\leq N \\leq 3 \\times 10^5$\n- $1 \\leq K \\leq N$\n- $1 \\leq D_i \\leq 10^6$\n\n| 子任务编号 | 分值 | 额外限制条件                       |\n| :--------: | :--: | :-------------------------------: |\n| $1$        | $7$  | $N \\leq 100$                     |\n| $2$        | $11$ | $N \\leq 2000$                    |\n| $3$        | $10$ | $1 \\leq K \\leq \\min(N, 20)$      |\n| $4$        | $6$  | $D_i = 1$                        |\n| $5$        | $12$ | $1 \\leq K \\leq \\min(N, 2000)$ 且 $D_i \\geq D_{i+1}$（对所有 $i$ 满足 $i \\not\\equiv 0 \\pmod{100}$） |\n| $6$        | $25$ | $1 \\leq K \\leq \\min(N, 2000)$    |\n| $7$        | $29$ | 无额外限制                       |", "locale": "zh-CN"}}}
{"pid": "P11304", "type": "P", "difficulty": 0, "samples": [["7\n154 39 225 99 151 145 -1", "011000110010100101100110000000000000111011"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "提交答案", "Special Judge", "构造", "COTS（克罗地亚）"], "title": "[COTS 2016] 破译 DeCSS", "background": "译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D1T1。\n\n提交答案时，采用文件名为 $\\texttt{decss-*.out}$。", "description": "\n**这是一道提交答案题。** 输入文件可以在附件中下载。\n\n### 基本定义\n\n**内容扰乱系统**（Content Scramble System，CSS）是一种对 DVD 进行加密的技术，以期保护版权。为了方便做题，此题对 CSS 进行了一定的简化。\n\n**密钥** $k$ 是一个长度为 $42$ 的 $\\texttt{01}$ 序列 $k_1,k_2,\\cdots,k_{42}$。\n\n**明文**、**密文**是由 $n$ 个字节组成的序列。\n\n**密钥流** $T(k)$ 同样是由 $n$ 个字节组成的序列。\n\n加密时，首先基于密钥 $k$ 生成密钥流 $T(k)$，然后将密钥流与明文按位异或，即得到密文。如果已知密文和部分明文，即可得到部分密钥流。\n\n在本题中，你需要基于部分密钥流 $T(k)$ 确定一个可能的密钥 $k$。\n\n---\n\n### LFSR\n\n从密钥生成密钥流使用了线性反馈移位寄存器（LFSR）。\n\nLFSR 的状态由 $m$ 位二进制位 $b_1\\sim b_m$ 组成。定义**反馈位置集** $S\\subseteq \\{1,2,\\cdots,m\\}$，它控制输出时会基于哪些位进行运算。\n\n在一个**周期**内，LFSR 会做如下的事情：\n\n- 输出 $\\displaystyle b=\\bigoplus_{i\\in S} b_i$，其中 $\\oplus$ 表示按位异或运算。\n- 对于 $1\\le i\\lt m$，**同时**令 $b_i\\gets b_{i+1}$，并让 $b_m\\gets b$。\n\nLFSR 的一**步**由 $8$ 个周期组成，一步输出一个字节。令这 $8$ 个周期输出的位为 $i_1\\sim i_8$，则该步输出的字节为 $(\\overline{i_8i_7i_6i_5i_4i_3i_2i_1})_2$。\n\nCSS 使用的 LFSR 有：\n\n| 名称 | $m=$ | $S=$ | 初始状态 |\n| :--: | :--: | :--: | :--: |\n| LFSR17 | $17$ | $\\{1,15\\}$ | $k_1,k_2,\\cdots,k_{17}$ |\n| LFSR25 | $25$ | $\\{1,4,5,13\\}$ | $k_{18},k_{19},\\cdots,k_{42}$ |\n\n------\n\n### 生成密钥流\n\n接下来介绍 $T(k)$ 的生成方法。\n\n1. 用 $k$ 将 LFSR17 和 LFSR25 初始化；\n2. $c\\gets 0$；\n3. 重复以下操作 $n$ 次：\n    - 令 $x$ 为 LFSR17 执行一步的结果；\n    - 令 $y$ 为 LFSR25 执行一步的结果；\n    - 令 $z\\gets x+y+c$；\n    - $c\\gets \\lfloor z/256\\rfloor,z\\gets z\\bmod 256$；\n    - 将 $z$ 新增到密钥流的末尾。\n\n给定部分密钥流，确定一个可能的密钥 $k$，使得它能够生成符合条件的密钥流。", "inputFormat": "\n第一行，一个正整数 $n$。\n\n第二行，$n$ 个整数 $t_1,t_2,\\cdots,t_n$，描述一个密钥流。\n\n- 如果 $t_i=-1$，表示 $t_i$ 未知。否则 $t_i\\in [0,256)$。", "outputFormat": "\n输出一行一个长度为 $42$ 的 $\\texttt{01}$ 串，表示密钥 $k$。\n\n**数据保证有解。**\n输出任意一组合法解均可。", "hint": "\n\n#### 评分方式\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 500$，**保证有解**。\n\n令 $m$ 表示已知的密钥流中元素的个数。\n\n| 输入文件名 | $n\\le $ |  $m\\le $ |得分 |  \n| :--: | :--: | :--: | :--: |  \n| $\\texttt{decss-1.in}$ | $ 20 $ |  $20$ |  $ 8 $   |  \n| $\\texttt{decss-2.in}$ | $ 25 $ |  $21$ |  ^   |  \n| $\\texttt{decss-3.in}$ | $ 20 $ |  $8$ | ^  |  \n| $\\texttt{decss-4.in}$ | $ 30 $ |  $10$ | ^  |  \n| $\\texttt{decss-5.in}$ | $ 31 $ |  $8$ | $ 9 $   |  \n| $\\texttt{decss-6.in}$ | $ 30 $ |  $20$ | ^   |  \n| $\\texttt{decss-7.in}$ | $ 200 $ | $9$ | $ 12 $   |  \n| $\\texttt{decss-8.in}$ | $ 300 $ | $12$ | ^   |  \n| $\\texttt{decss-9.in}$ | $ 500 $ | ^ | $ 13 $   |  \n| $\\texttt{decss-10.in}$ | ^ | ^ | ^  |  \n\n#### 样例解释\n\n\n| 步数 | 周期 | LFSR17 | LFSR25 | $x$ | $y$ | $c$ | $z$ |\n| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |\n| 初态 |  | 1 1100 0110 0101 0010 | 1 1001 1000 0000 0000 0011 1011 |  |  | $0$ |  |\n|  | 1 | 1 1000 1100 1010 0100 | 1 0011 0000 0000 0000 0111 0110 |  |  |  |  |\n|  | 2 | 1 0001 1001 0100 1000 | 0 0110 0000 0000 0000 1110 1101 |  |  |  |  |\n|  | 3 | 0 0011 0010 1001 0001 | 0 1100 0000 0000 0001 1101 1011 |  |  |  |  |\n|  | 4 | 0 0110 0101 0010 0010 | 1 1000 0000 0000 0011 1011 0110 |  |  |  |  |\n|  | 5 | 0 1100 1010 0100 0100 | 1 0000 0000 0000 0111 0110 1101 |  |  |  |  |\n|  | 6 | 1 1001 0100 1000 1001 | 0 0000 0000 0000 1110 1101 1011 |  |  |  |  |\n|  | 7 | 1 0010 1001 0001 0011 | 0 0000 0000 0001 1101 1011 0110 |  |  |  |  |\n|  | 8 | 0 0101 0010 0010 0111 | 0 0000 0000 0011 1011 0110 1101 |  |  |  |  |\n| 1 |  |  |  | $228$ | $182$ | $1$ | $154$ |\n|  | 9 | 0 1010 0100 0100 1111 | 0 0000 0000 0111 0110 1101 1011 |  |  |  |  |\n|  | 10 | 1 0100 1000 1001 1111 | 0 0000 0000 1110 1101 1011 0111 |  |  |  |  |\n|  | 11 | 0 1001 0001 0011 1110 | 0 0000 0001 1101 1011 0110 1110 |  |  |  |  |\n|  | 12 | 1 0010 0010 0111 1101 | 0 0000 0011 1011 0110 1101 1101 |  |  |  |  |\n|  | 13 | 0 0100 0100 1111 1010 | 0 0000 0111 0110 1101 1011 1011 |  |  |  |  |\n|  | 14 | 0 1000 1001 1111 0100 | 0 0000 1110 1101 1011 0111 0110 |  |  |  |  |\n|  | 15 | 1 0001 0011 1110 1001 | 0 0001 1101 1011 0110 1110 1101 |  |  |  |  |\n|  | 16 | 0 0010 0111 1101 0011 | 0 0011 1011 0110 1101 1101 1010 |  |  |  |  |\n| 2 |  |  |  | $203$ | $91$ | $1$ | $39$ |\n|  | 17 | 0 0100 1111 1010 0110 | 0 0111 0110 1101 1011 1011 0100 |  |  |  |  |\n|  | 18 | 0 1001 1111 0100 1101 | 0 1110 1101 1011 0111 0110 1001 |  |  |  |  |\n|  | 19 | 1 0011 1110 1001 1011 | 1 1101 1011 0110 1110 1101 0010 |  |  |  |  |\n|  | 20 | 0 0111 1101 0011 0111 | 1 1011 0110 1101 1101 1010 0100 |  |  |  |  |\n|  | 21 | 0 1111 1010 0110 1111 | 1 0110 1101 1011 1011 0100 1000 |  |  |  |  |\n|  | 22 | 1 1111 0100 1101 1111 | 0 1101 1011 0111 0110 1001 0001 |  |  |  |  |\n|  | 23 | 1 1110 1001 1011 1110 | 1 1011 0110 1110 1101 0010 0010 |  |  |  |  |\n|  | 24 | 1 1101 0011 0111 1100 | 1 0110 1101 1101 1010 0100 0101 |  |  |  |  |\n| 3 |  |  |  | $62$ | $162$ | $0$ | $225$ |\n|  | 25 | 1 1010 0110 1111 1000 | 0 1101 1011 1011 0100 1000 1011 |  |  |  |  |\n|  | 26 | 1 0100 1101 1111 0001 | 1 1011 0111 0110 1001 0001 0110 |  |  |  |  |\n|  | 27 | 0 1001 1011 1110 0011 | 1 0110 1110 1101 0010 0010 1101 |  |  |  |  |\n|  | 28 | 1 0011 0111 1100 0110 | 0 1101 1101 1010 0100 0101 1011 |  |  |  |  |\n|  | 29 | 0 0110 1111 1000 1100 | 1 1011 1011 0100 1000 1011 0111 |  |  |  |  |\n|  | 30 | 0 1101 1111 0001 1001 | 1 0111 0110 1001 0001 0110 1111 |  |  |  |  |\n|  | 31 | 1 1011 1110 0011 0010 | 0 1110 1101 0010 0010 1101 1110 |  |  |  |  |\n|  | 32 | 1 0111 1100 0110 0101 | 1 1101 1010 0100 0101 1011 1101 |  |  |  |  |\n| 4 |  |  |  | $166$ | $189$ | $1$ | $99$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2016] 破译 DeCSS", "background": "译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D1T1。\n\n提交答案时，采用文件名为 $\\texttt{decss-*.out}$。", "description": "\n**这是一道提交答案题。** 输入文件可以在附件中下载。\n\n### 基本定义\n\n**内容扰乱系统**（Content Scramble System，CSS）是一种对 DVD 进行加密的技术，以期保护版权。为了方便做题，此题对 CSS 进行了一定的简化。\n\n**密钥** $k$ 是一个长度为 $42$ 的 $\\texttt{01}$ 序列 $k_1,k_2,\\cdots,k_{42}$。\n\n**明文**、**密文**是由 $n$ 个字节组成的序列。\n\n**密钥流** $T(k)$ 同样是由 $n$ 个字节组成的序列。\n\n加密时，首先基于密钥 $k$ 生成密钥流 $T(k)$，然后将密钥流与明文按位异或，即得到密文。如果已知密文和部分明文，即可得到部分密钥流。\n\n在本题中，你需要基于部分密钥流 $T(k)$ 确定一个可能的密钥 $k$。\n\n---\n\n### LFSR\n\n从密钥生成密钥流使用了线性反馈移位寄存器（LFSR）。\n\nLFSR 的状态由 $m$ 位二进制位 $b_1\\sim b_m$ 组成。定义**反馈位置集** $S\\subseteq \\{1,2,\\cdots,m\\}$，它控制输出时会基于哪些位进行运算。\n\n在一个**周期**内，LFSR 会做如下的事情：\n\n- 输出 $\\displaystyle b=\\bigoplus_{i\\in S} b_i$，其中 $\\oplus$ 表示按位异或运算。\n- 对于 $1\\le i\\lt m$，**同时**令 $b_i\\gets b_{i+1}$，并让 $b_m\\gets b$。\n\nLFSR 的一**步**由 $8$ 个周期组成，一步输出一个字节。令这 $8$ 个周期输出的位为 $i_1\\sim i_8$，则该步输出的字节为 $(\\overline{i_8i_7i_6i_5i_4i_3i_2i_1})_2$。\n\nCSS 使用的 LFSR 有：\n\n| 名称 | $m=$ | $S=$ | 初始状态 |\n| :--: | :--: | :--: | :--: |\n| LFSR17 | $17$ | $\\{1,15\\}$ | $k_1,k_2,\\cdots,k_{17}$ |\n| LFSR25 | $25$ | $\\{1,4,5,13\\}$ | $k_{18},k_{19},\\cdots,k_{42}$ |\n\n------\n\n### 生成密钥流\n\n接下来介绍 $T(k)$ 的生成方法。\n\n1. 用 $k$ 将 LFSR17 和 LFSR25 初始化；\n2. $c\\gets 0$；\n3. 重复以下操作 $n$ 次：\n    - 令 $x$ 为 LFSR17 执行一步的结果；\n    - 令 $y$ 为 LFSR25 执行一步的结果；\n    - 令 $z\\gets x+y+c$；\n    - $c\\gets \\lfloor z/256\\rfloor,z\\gets z\\bmod 256$；\n    - 将 $z$ 新增到密钥流的末尾。\n\n给定部分密钥流，确定一个可能的密钥 $k$，使得它能够生成符合条件的密钥流。", "inputFormat": "\n第一行，一个正整数 $n$。\n\n第二行，$n$ 个整数 $t_1,t_2,\\cdots,t_n$，描述一个密钥流。\n\n- 如果 $t_i=-1$，表示 $t_i$ 未知。否则 $t_i\\in [0,256)$。", "outputFormat": "\n输出一行一个长度为 $42$ 的 $\\texttt{01}$ 串，表示密钥 $k$。\n\n**数据保证有解。**\n输出任意一组合法解均可。", "hint": "\n\n#### 评分方式\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 500$，**保证有解**。\n\n令 $m$ 表示已知的密钥流中元素的个数。\n\n| 输入文件名 | $n\\le $ |  $m\\le $ |得分 |  \n| :--: | :--: | :--: | :--: |  \n| $\\texttt{decss-1.in}$ | $ 20 $ |  $20$ |  $ 8 $   |  \n| $\\texttt{decss-2.in}$ | $ 25 $ |  $21$ |  ^   |  \n| $\\texttt{decss-3.in}$ | $ 20 $ |  $8$ | ^  |  \n| $\\texttt{decss-4.in}$ | $ 30 $ |  $10$ | ^  |  \n| $\\texttt{decss-5.in}$ | $ 31 $ |  $8$ | $ 9 $   |  \n| $\\texttt{decss-6.in}$ | $ 30 $ |  $20$ | ^   |  \n| $\\texttt{decss-7.in}$ | $ 200 $ | $9$ | $ 12 $   |  \n| $\\texttt{decss-8.in}$ | $ 300 $ | $12$ | ^   |  \n| $\\texttt{decss-9.in}$ | $ 500 $ | ^ | $ 13 $   |  \n| $\\texttt{decss-10.in}$ | ^ | ^ | ^  |  \n\n#### 样例解释\n\n\n| 步数 | 周期 | LFSR17 | LFSR25 | $x$ | $y$ | $c$ | $z$ |\n| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |\n| 初态 |  | 1 1100 0110 0101 0010 | 1 1001 1000 0000 0000 0011 1011 |  |  | $0$ |  |\n|  | 1 | 1 1000 1100 1010 0100 | 1 0011 0000 0000 0000 0111 0110 |  |  |  |  |\n|  | 2 | 1 0001 1001 0100 1000 | 0 0110 0000 0000 0000 1110 1101 |  |  |  |  |\n|  | 3 | 0 0011 0010 1001 0001 | 0 1100 0000 0000 0001 1101 1011 |  |  |  |  |\n|  | 4 | 0 0110 0101 0010 0010 | 1 1000 0000 0000 0011 1011 0110 |  |  |  |  |\n|  | 5 | 0 1100 1010 0100 0100 | 1 0000 0000 0000 0111 0110 1101 |  |  |  |  |\n|  | 6 | 1 1001 0100 1000 1001 | 0 0000 0000 0000 1110 1101 1011 |  |  |  |  |\n|  | 7 | 1 0010 1001 0001 0011 | 0 0000 0000 0001 1101 1011 0110 |  |  |  |  |\n|  | 8 | 0 0101 0010 0010 0111 | 0 0000 0000 0011 1011 0110 1101 |  |  |  |  |\n| 1 |  |  |  | $228$ | $182$ | $1$ | $154$ |\n|  | 9 | 0 1010 0100 0100 1111 | 0 0000 0000 0111 0110 1101 1011 |  |  |  |  |\n|  | 10 | 1 0100 1000 1001 1111 | 0 0000 0000 1110 1101 1011 0111 |  |  |  |  |\n|  | 11 | 0 1001 0001 0011 1110 | 0 0000 0001 1101 1011 0110 1110 |  |  |  |  |\n|  | 12 | 1 0010 0010 0111 1101 | 0 0000 0011 1011 0110 1101 1101 |  |  |  |  |\n|  | 13 | 0 0100 0100 1111 1010 | 0 0000 0111 0110 1101 1011 1011 |  |  |  |  |\n|  | 14 | 0 1000 1001 1111 0100 | 0 0000 1110 1101 1011 0111 0110 |  |  |  |  |\n|  | 15 | 1 0001 0011 1110 1001 | 0 0001 1101 1011 0110 1110 1101 |  |  |  |  |\n|  | 16 | 0 0010 0111 1101 0011 | 0 0011 1011 0110 1101 1101 1010 |  |  |  |  |\n| 2 |  |  |  | $203$ | $91$ | $1$ | $39$ |\n|  | 17 | 0 0100 1111 1010 0110 | 0 0111 0110 1101 1011 1011 0100 |  |  |  |  |\n|  | 18 | 0 1001 1111 0100 1101 | 0 1110 1101 1011 0111 0110 1001 |  |  |  |  |\n|  | 19 | 1 0011 1110 1001 1011 | 1 1101 1011 0110 1110 1101 0010 |  |  |  |  |\n|  | 20 | 0 0111 1101 0011 0111 | 1 1011 0110 1101 1101 1010 0100 |  |  |  |  |\n|  | 21 | 0 1111 1010 0110 1111 | 1 0110 1101 1011 1011 0100 1000 |  |  |  |  |\n|  | 22 | 1 1111 0100 1101 1111 | 0 1101 1011 0111 0110 1001 0001 |  |  |  |  |\n|  | 23 | 1 1110 1001 1011 1110 | 1 1011 0110 1110 1101 0010 0010 |  |  |  |  |\n|  | 24 | 1 1101 0011 0111 1100 | 1 0110 1101 1101 1010 0100 0101 |  |  |  |  |\n| 3 |  |  |  | $62$ | $162$ | $0$ | $225$ |\n|  | 25 | 1 1010 0110 1111 1000 | 0 1101 1011 1011 0100 1000 1011 |  |  |  |  |\n|  | 26 | 1 0100 1101 1111 0001 | 1 1011 0111 0110 1001 0001 0110 |  |  |  |  |\n|  | 27 | 0 1001 1011 1110 0011 | 1 0110 1110 1101 0010 0010 1101 |  |  |  |  |\n|  | 28 | 1 0011 0111 1100 0110 | 0 1101 1101 1010 0100 0101 1011 |  |  |  |  |\n|  | 29 | 0 0110 1111 1000 1100 | 1 1011 1011 0100 1000 1011 0111 |  |  |  |  |\n|  | 30 | 0 1101 1111 0001 1001 | 1 0111 0110 1001 0001 0110 1111 |  |  |  |  |\n|  | 31 | 1 1011 1110 0011 0010 | 0 1110 1101 0010 0010 1101 1110 |  |  |  |  |\n|  | 32 | 1 0111 1100 0110 0101 | 1 1101 1010 0100 0101 1011 1101 |  |  |  |  |\n| 4 |  |  |  | $166$ | $189$ | $1$ | $99$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P11305", "type": "P", "difficulty": 6, "samples": [["abcxyzabc\n", "3"], ["bbcdbcbbcbadadda", "5"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "二分", "哈希 hashing", "后缀数组 SA", "COTS（克罗地亚）"], "title": "[COTS 2016] 删除 Brisanje", "background": "\n译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D1T2。$\\texttt{4s,0.5G}$。\n\n\n为了卡掉理论复杂度较劣的解法，在 Subtask 0 添加了 Hack 数据（#35~#39，感谢 @Hoks 和 @N_z_），同时将时限改为 1.5s。欢迎对数据的加强。\n", "description": "\n给定字符串 $s$。\n\n定义 $s(l,r)$ 为 $s$ 第 $l\\sim r$ 个字符组成的字符串。\n\n定义 $t(l,r)$ 为 $s$ 删除第 $l\\sim r$ 个字符后得到的字符串。\n\n找到最长的区间 $[l,r]$，使得 $s(l,r)$ 在 $t(l,r)$ 中作为子串出现。\n", "inputFormat": "一行一个字符串 $s$。\n", "outputFormat": "输出一个整数，表示最长可能的区间长度。  \n", "hint": "\n#### 样例解释\n\n不难注意到 $\\texttt{bbcdbcb\\underline{bcbad}adda} \\to \\texttt{bbcd\\underline{bcbad}da}$。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le |s| \\le 10^5$；\n- $s$ 中只有小写字母。\n\n\n| 子任务编号 | $\\vert s\\vert \\in $ | 得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ [1,400] $    |   $ 16 $   |  \n| $ 2 $    | $ (400,5000] $   |  $ 24 $   |  \n| $ 3 $    | $ (5000,10^5]$ | $ 60 $   |  \n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2016] 删除 Brisanje", "background": "\n译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D1T2。$\\texttt{4s,0.5G}$。\n\n\n为了卡掉理论复杂度较劣的解法，在 Subtask 0 添加了 Hack 数据（#35~#39，感谢 @Hoks 和 @N_z_），同时将时限改为 1.5s。欢迎对数据的加强。\n", "description": "\n给定字符串 $s$。\n\n定义 $s(l,r)$ 为 $s$ 第 $l\\sim r$ 个字符组成的字符串。\n\n定义 $t(l,r)$ 为 $s$ 删除第 $l\\sim r$ 个字符后得到的字符串。\n\n找到最长的区间 $[l,r]$，使得 $s(l,r)$ 在 $t(l,r)$ 中作为子串出现。\n", "inputFormat": "一行一个字符串 $s$。\n", "outputFormat": "输出一个整数，表示最长可能的区间长度。  \n", "hint": "\n#### 样例解释\n\n不难注意到 $\\texttt{bbcdbcb\\underline{bcbad}adda} \\to \\texttt{bbcd\\underline{bcbad}da}$。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le |s| \\le 10^5$；\n- $s$ 中只有小写字母。\n\n\n| 子任务编号 | $\\vert s\\vert \\in $ | 得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ [1,400] $    |   $ 16 $   |  \n| $ 2 $    | $ (400,5000] $   |  $ 24 $   |  \n| $ 3 $    | $ (5000,10^5]$ | $ 60 $   |  \n\n", "locale": "zh-CN"}}}
{"pid": "P11306", "type": "P", "difficulty": 6, "samples": [["6 5\n2 3\n4 0\n5 6\n0 0\n0 0\n0 0\n4 1 3 2 2 5\n3 3\n2 2\n3 5\n5 4\n6 1", "4\n5\n5\n6\n4"], ["8 10\n4 5\n8 0\n0 0\n3 7\n0 6\n0 0\n2 0\n0 0\n7 0 9 3 6 0 6 2\n3 0\n4 0\n8 2\n2 3\n7 6\n1 6\n5 7\n6 9\n1 1\n1 7", "3\n3\n3\n6\n6\n6\n6\n8\n7\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "线段树", "倍增", "树状数组", "树的遍历", "树链剖分", "COTS（克罗地亚）"], "title": "[COTS 2016] 搜索树 Jelka", "background": "译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D2T1。$\\texttt{1s,0.5G}$。\n", "description": "\n给定一棵 $n$ 个点的二叉树，点有点权，其中 $1$ 号点为根节点。\n\n$m$ 次操作修改某个点的点权。在每次修改后询问：这棵树上有多少个节点的子树（包含自身）是二叉搜索树（BST）？\n\n我们给定 BST 的定义：\n\n- 含有一个节点的树是 BST。\n- 对于大于一个节点的树，它是 BST 当且仅当：\n\t- 根节点的左子树为空，或者左子树是二叉搜索树，且左子树内所有点的点权均**不大于**根节点的点权；\n   - 根节点的右子树为空，或者右子树是二叉搜索树，且右子树内所有点的点权均**不小于**根节点的点权。\n\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行两个整数 $l_i,r_i$，表示 $i$ 号点的左儿子和右儿子编号。\n- 特别地，若不存在，则为 $0$。\n\n接下来一行，$n$ 个整数 $a_1,\\cdots,a_n$，表示每个点的点权。\n\n接下来 $m$ 行，每行两个整数 $x,v$，表示一次操作 $a_x\\gets v$。\n", "outputFormat": "输出 $m$ 行 $m$ 个整数，表示答案。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释如图所示。\n\n其中节点内的数字表示 BST 权值，节点外的数字表示节点编号。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yabnaj75.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le n,m\\le 2\\times 10^5$；\n- $0\\le a_i,v\\le 10^9$；\n- 操作和树的形态均合法。\n\n\n| 子任务编号 | $n,m\\le  $ | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $ 5\\, 000$    |  | $ 16 $   |  \n| $ 2 $    | $ 2\\times 10^5 $   | A |  $ 24 $   |  \n| $ 3 $    | $ 2\\times 10^5$ | | $ 60 $   |  \n\n特殊性质 A：$\\forall 1\\le i\\le n$，$l_i=0\\lor r_i=0$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2016] 搜索树 Jelka", "background": "译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D2T1。$\\texttt{1s,0.5G}$。\n", "description": "\n给定一棵 $n$ 个点的二叉树，点有点权，其中 $1$ 号点为根节点。\n\n$m$ 次操作修改某个点的点权。在每次修改后询问：这棵树上有多少个节点的子树（包含自身）是二叉搜索树（BST）？\n\n我们给定 BST 的定义：\n\n- 含有一个节点的树是 BST。\n- 对于大于一个节点的树，它是 BST 当且仅当：\n\t- 根节点的左子树为空，或者左子树是二叉搜索树，且左子树内所有点的点权均**不大于**根节点的点权；\n   - 根节点的右子树为空，或者右子树是二叉搜索树，且右子树内所有点的点权均**不小于**根节点的点权。\n\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行两个整数 $l_i,r_i$，表示 $i$ 号点的左儿子和右儿子编号。\n- 特别地，若不存在，则为 $0$。\n\n接下来一行，$n$ 个整数 $a_1,\\cdots,a_n$，表示每个点的点权。\n\n接下来 $m$ 行，每行两个整数 $x,v$，表示一次操作 $a_x\\gets v$。\n", "outputFormat": "输出 $m$ 行 $m$ 个整数，表示答案。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释如图所示。\n\n其中节点内的数字表示 BST 权值，节点外的数字表示节点编号。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yabnaj75.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le n,m\\le 2\\times 10^5$；\n- $0\\le a_i,v\\le 10^9$；\n- 操作和树的形态均合法。\n\n\n| 子任务编号 | $n,m\\le  $ | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $ 5\\, 000$    |  | $ 16 $   |  \n| $ 2 $    | $ 2\\times 10^5 $   | A |  $ 24 $   |  \n| $ 3 $    | $ 2\\times 10^5$ | | $ 60 $   |  \n\n特殊性质 A：$\\forall 1\\le i\\le n$，$l_i=0\\lor r_i=0$。\n\n", "locale": "zh-CN"}}}
{"pid": "P11307", "type": "P", "difficulty": 6, "samples": [["4 4\n2 4 1 0\n1 2 3\n1 3 4\n3 1 1\n4 1 2", "9"], ["6 8\n3 5 8 2 9 4\n3 1 2\n6 3 3\n3 1 1\n6 2 2\n2 3 6\n3 1 2\n3 2 2\n4 1 1", "46"], ["12 10\n9 2 7 5 5 9 3 6 5 7 8 8\n6 3 3\n9 1 1\n6 10 11\n1 3 11\n5 6 12\n3 5 5\n12 3 7\n6 1 4\n4 6 6\n10 4 6", "126"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "线段树", "生成树", "ST 表", "COTS（克罗地亚）"], "title": "[COTS 2016] 建造费 Pristojba", "background": "译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D2T2。$\\texttt{5s,0.5G}$。\n", "description": "\n有一张 $n$ 个点的简单无向图 $G$。\n\n给定数列 $p$，边 $(i,j)$（$i\\neq j$）的边权为 $p_i+p_j$。\n\n然而，不是所有 $i,j$ 间都有边连接。给定 $m$ 个三元组形如 $x,l,r$，表示「$\\forall l\\le y\\le r$，$x,y$ 间有边连接」。\n\n求出这张无向图的[最小生成树](https://www.luogu.com.cn/user/398152)的边权和。\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n第二行，$n$ 个非负整数 $p_1,\\cdots,p_n$。\n\n接下来 $m$ 行，每行三个正整数 $x,l,r$。\n\n**不保证三元组两两不同**，但保证 $x\\not\\in [l,r]$。\n\n**输入数据保证有解。**", "outputFormat": "输出一行一个整数，表示答案。\n", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le n,m\\le  10^5$；\n- $0\\le p_i\\le 10^6$；\n- $1\\le x\\le n$；\n- $1\\le l\\le r\\le n$，$x\\not\\in [l,r]$；\n- 存在一组解。\n\n\n| 子任务编号 | $n,m\\le  $ |  得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ 10^3$  |   $ 20 $   |  \n| $ 2 $    | $ 10^5 $  | $ 80 $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2016] 建造费 Pristojba", "background": "译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D2T2。$\\texttt{5s,0.5G}$。\n", "description": "\n有一张 $n$ 个点的简单无向图 $G$。\n\n给定数列 $p$，边 $(i,j)$（$i\\neq j$）的边权为 $p_i+p_j$。\n\n然而，不是所有 $i,j$ 间都有边连接。给定 $m$ 个三元组形如 $x,l,r$，表示「$\\forall l\\le y\\le r$，$x,y$ 间有边连接」。\n\n求出这张无向图的[最小生成树](https://www.luogu.com.cn/user/398152)的边权和。\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n第二行，$n$ 个非负整数 $p_1,\\cdots,p_n$。\n\n接下来 $m$ 行，每行三个正整数 $x,l,r$。\n\n**不保证三元组两两不同**，但保证 $x\\not\\in [l,r]$。\n\n**输入数据保证有解。**", "outputFormat": "输出一行一个整数，表示答案。\n", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le n,m\\le  10^5$；\n- $0\\le p_i\\le 10^6$；\n- $1\\le x\\le n$；\n- $1\\le l\\le r\\le n$，$x\\not\\in [l,r]$；\n- 存在一组解。\n\n\n| 子任务编号 | $n,m\\le  $ |  得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ 10^3$  |   $ 20 $   |  \n| $ 2 $    | $ 10^5 $  | $ 80 $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11308", "type": "P", "difficulty": 2, "samples": [["10\n3 3 3 1\n3 3 4 5\n4 4 4 12\n4 4 3 8\n10 10 7 34\n10 10 8 34\n12 11 11 12\n12 11 12 12\n9 9 1 80\n9 9 6 70", "Together\nDivide\nChance\nChance\nTogether\nChance\nChance\nDivide\nTogether\nChance"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "鸽笼原理", "洛谷月赛", "分类讨论"], "title": "茫茫的不归路", "background": "NoitaCesaE 的匹配机制总是很奇怪，小 $ \\zeta $ 总是被匹配到与他的其他车队成员不同的阵营，这时他就没法享受被优质队友带飞的快感了。", "description": "具体的，有 $ n $ 个阵营，每个阵营最多 $ m $ 人。已经有 $ p $ 个人被分配了所属的阵营，且此时每个阵营人数均不超限。\n\n小 $ \\zeta $ 的 $ k $ 人车队进入了这个房间，在不改变已经进入的 $ p $ 个人的所属阵营的情况下，如果他们能一起进入同一个阵营使得阵营人数不超过限制，那么就会进入同一个阵营，否则车队就分散进不同的阵营了。\n\n请求出对于给定的 $ n,m,k,p $，任意的已经进入的 $ p $ 个人的阵营归属情况下，小 $ \\zeta $ 的车队能够进入同一个阵营的**可能性情况**（具体参见输出格式）。", "inputFormat": "**本题多测**，第一行输入一个整数 $ T $，代表这个测试点内有 $ T $ 组数据。\n\n对于每组数据：\n\n一行四个整数 $ n,m,k,p $，含义见题目描述。", "outputFormat": "对于每组数据，输出以下三种情况之一：\n\n* `Together` 表示无论已经进入的人如何归属，这个车队一定能进入同一个阵营；\n\n* `Chance` 表示存在一部分已经进入的人的阵营归属情况，使得这个车队的所有人进入同一个阵营；\n\n* `Divide` 表示无论已经进入的人如何归属，这个车队的所有人必然进入不同的阵营。", "hint": "**【样例 1 解释】**\n\n对于第一组数据，无论这个人在哪个阵营，都有至少两个阵营为空，因此一定可以容纳这个 $ 3 $ 人车队，故输出 `Together`。\n\n**【数据规模与约定】**\n\n对于 $ 40\\% $ 的数据，$ T \\le 10 $，$ n,m \\le 4 $，$ k \\le 6 $，$ p \\le 10 $。\n\n对于另 $ 20\\% $ 的数据，保证输出没有 `Together`。\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 1000 $，$ 1 \\le n,m \\le 10^4 $，$ 1 \\le k \\le 10^8 $，$ 0 \\le p \\le 10^8 $，$ p+k \\le n \\times m $。", "locale": "zh-CN", "translations": {"en": {"title": "The Endless Road of No Return", "background": "NoitaCesaE’s matchmaking system has always been peculiar. Little ζ frequently finds himself assigned to teams different from his squad members, depriving him of the joy of being carried by his skilled teammates.", "description": "Specifically, there are $ n $ teams, each with a maximum capacity of $ m $ players. Currently, $ p $ players have already been assigned to teams, with no team exceeding its capacity limit.\n\nLittle $ \\zeta $'s squad of $ k $ players enters the room. Without changing the team assignments of the $ p $ existing players, if they can all join the same team without exceeding the team capacity limit, they will do so. Otherwise, the squad will be split across different teams.\n\nGiven n, m, k, p, determine the possibility scenario for Little $ \\zeta $'s squad to join the same team, considering all possible team distributions of the $ p $ existing players (see output format for details).", "inputFormat": "Multiple test cases. The first line contains an integer T, representing the number of test cases.\n\nFor each test case:\n\nOne line containing four integers $ n, m, k, p $, as described in the problem.", "outputFormat": "For each test case, output one of these three possibilities:\n\n* `Together` indicates the squad will definitely be able to join the same team regardless of existing player distribution;\n* `Chance` indicates there exist some distributions of existing players where the squad can join the same team;\n* `Divide` indicates the squad will inevitably be split across different teams regardless of existing player distribution.", "hint": "**「Sample 1 Explanation」**\n\nFor the first test case, regardless of which team the one existing player is in,\nat least two teams will be empty. \n\nTherefore, a squad of 3 players can definitely\nfit in one team, thus outputting Together.\n\n**「Data Constraints」**\n\n* For 40% of test cases: $ T ≤ 10$，$n, m ≤ 4，k ≤ 6$，$p ≤ 10 $；\n* For another 20% of test cases, the output will not be `Together`.\n* For 100% of test cases: $ 1 ≤ T ≤ 1000$，$1 ≤ n, m ≤ 10^4$，$1 ≤ k ≤ 10^8$，$0 ≤ p ≤ 10^8$，$p + k ≤ n × m $.", "locale": "en"}, "zh-CN": {"title": "茫茫的不归路", "background": "NoitaCesaE 的匹配机制总是很奇怪，小 $ \\zeta $ 总是被匹配到与他的其他车队成员不同的阵营，这时他就没法享受被优质队友带飞的快感了。", "description": "具体的，有 $ n $ 个阵营，每个阵营最多 $ m $ 人。已经有 $ p $ 个人被分配了所属的阵营，且此时每个阵营人数均不超限。\n\n小 $ \\zeta $ 的 $ k $ 人车队进入了这个房间，在不改变已经进入的 $ p $ 个人的所属阵营的情况下，如果他们能一起进入同一个阵营使得阵营人数不超过限制，那么就会进入同一个阵营，否则车队就分散进不同的阵营了。\n\n请求出对于给定的 $ n,m,k,p $，任意的已经进入的 $ p $ 个人的阵营归属情况下，小 $ \\zeta $ 的车队能够进入同一个阵营的**可能性情况**（具体参见输出格式）。", "inputFormat": "**本题多测**，第一行输入一个整数 $ T $，代表这个测试点内有 $ T $ 组数据。\n\n对于每组数据：\n\n一行四个整数 $ n,m,k,p $，含义见题目描述。", "outputFormat": "对于每组数据，输出以下三种情况之一：\n\n* `Together` 表示无论已经进入的人如何归属，这个车队一定能进入同一个阵营；\n\n* `Chance` 表示存在一部分已经进入的人的阵营归属情况，使得这个车队的所有人进入同一个阵营；\n\n* `Divide` 表示无论已经进入的人如何归属，这个车队的所有人必然进入不同的阵营。", "hint": "**【样例 1 解释】**\n\n对于第一组数据，无论这个人在哪个阵营，都有至少两个阵营为空，因此一定可以容纳这个 $ 3 $ 人车队，故输出 `Together`。\n\n**【数据规模与约定】**\n\n对于 $ 40\\% $ 的数据，$ T \\le 10 $，$ n,m \\le 4 $，$ k \\le 6 $，$ p \\le 10 $。\n\n对于另 $ 20\\% $ 的数据，保证输出没有 `Together`。\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 1000 $，$ 1 \\le n,m \\le 10^4 $，$ 1 \\le k \\le 10^8 $，$ 0 \\le p \\le 10^8 $，$ p+k \\le n \\times m $。", "locale": "zh-CN"}}}
{"pid": "P11309", "type": "P", "difficulty": 2, "samples": [["3\n3 0\n9 8 2\n2 1\n10 11\n5 10\n1 2 3 4 5", "27\n22\n25"], ["5\n5 0\n100 101 102 103 104\n5 1\n20 40 50 70 10\n2 103\n30 20\n7 2\n1 2 3 4 5 6 7\n2 10\n1 1", "510\n350\n50\n49\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛", "分类讨论"], "title": "纷飞的樱花雨", "background": "高中的时候做过樱花雨实验，氯化钴遇到氢氧化钠溶液产生的沉淀物就像是一场铺天盖地的樱花雨。\n\n小 $ \\zeta $ 问她，你见过樱花吗？\n\n她抬头摇起眼睛，碎亮的光倒映在少女乌黑的瞳孔里。\n\n她侧头定定看了我一会儿，然后淡淡地笑了。\n\n她说，「我知道你想考武汉大学。」\n\n「我也会去武汉大学。」\n\n「今年九月，你要和我一起去看樱花吗？」", "description": "小 $ \\zeta $ 喜欢观赏樱花。\n\n$ n $ 朵樱花的掉落过程中，第 $ i $ 个掉落的樱花的美丽度为 $ a_i $。\n\n每朵樱花掉落后，樱花掉落的总观赏度会增加这朵樱花及之前所有已经掉落的樱花的美丽度的最大值。\n\n交换**正好** $ k $ 次两朵樱花的掉落顺序（不能交换一朵樱花和本身，但可以重复交换两朵樱花），最大化总观赏度的值。\n\n形式化地讲，给出一个长度为 $ n $ 的数组，进行正好 $ k $ 次交换使得 $ \\sum_{i=1}^n \\max_{j=1}^ia_j $  最大。", "inputFormat": "**本题多测**，第一行输入该测试点内数据组数 $ T $。\n\n对于每组测试数据：\n\n第一行两个整数 $ n $ 和 $ k $，含义见题目描述。\n\n接下来 $ n $ 个空格分隔的整数，第 $ i $ 个代表 $ a_i $ 的初始值。", "outputFormat": "对于每组测试数据，输出一行一个整数表示题目要求的值。", "hint": "**【样例 1 解释】**\n\n第二组数据可以将 $ 10 $ 和 $ 11 $ 交换，观赏度总和为 $ 11+11=22 $。\n\n**【数据规模与约定】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 500 $，$ 2 \\le n \\le 10^5 $，$ 0 \\le k \\le 10^9 $，$ \\sum n \\le 10^6 $，$ 1 \\le a_i \\le 10^9 $。\n\n**本题测试点等分，按测试点加和计分。**\n\n| 测试点编号 | $ n $ | $ k $ |\n|:-:|:-:|:-:|\n| $ 1 $ | $ \\le 50 $ | $ =0 $ |\n| $ 2 $ | - | $ =0 $ |\n| $ 3 \\sim 4 $ | $ \\le 50 $ | $ =1 $ |\n| $ 5 \\sim 7 $ | - | $ =1 $ |\n| $ 8 \\sim 10 $ | - | - |", "locale": "zh-CN", "translations": {"en": {"title": "Dancing Cherry Blossom Rain", "background": "In memoriam tempus scholae - In those halcyon days of high school chemistry, we conducted an ethereal experiment where cobalt chloride met sodium\nhydroxide, creating a precipitate that descended like a magnificent storm of\ncherry blossoms from the heavens.\n\nLittle $ \\zeta $ asked her, “Have you ever witnessed the cherry blossoms?”\n\nShe lifted her gaze, and in her obsidian pupils danced fragments of light, like\nstars caught in midnight pools.\n\nAfter a thoughtful pause, her eyes fixed upon me, a gentle smile gracing her\nlips.\n\n“I know your heart is set on Wuhan University,” she said.\n\n“That’s where I shall be too.”\n\n“This September... would you join me in watching the cherry blossoms?”", "description": "Little $ \\zeta $ adores watching cherry blossoms. During the falling of $ n $ cherry blossoms, the beauty value of the $ i $-th falling blossom is $ a_i $.\n\nAfter each blossom falls, the total viewing score increases by the maximum beauty value among all fallen blossoms (including the current one and all previous ones). You can swap the falling order of two blossoms exactly k times (you cannot swap a blossom with itself, but you can swap the same pair multiple times).\n\nYour task is to maximize the total viewing score.\n\nFormally, given an array $ a $ of length $ n $, perform **exactly** $ k $ swaps to maximize $ \\sum_{i=1}^n\\max_{j=1}^ia_j $.", "inputFormat": "Multiple test cases. \n\nThe first line contains $ T $, the number of test cases.For each test case:\n\nFirst line contains two integers $ n $ and $ k $.\n\nNext line contains n space-separated integers representing the initial values\nof $ a_i $.", "outputFormat": "For each test case, output one line containing a single integer - the maximum possible total viewing score.", "hint": "**「Sample 1 Explanation」**\n\nFor the second test case, you can swap 10 and 11, making the total viewing\nscore 11 + 11 = 22.\n\n**「Data Constraints」**\n\nFor 100% of test cases: $ 1 \\le T \\le 500 $，$ 2 \\le n \\le 10^5 $，$ 0 \\le k \\le 10^9 $，$ \\sum n \\le 10^6 $，$ 1 \\le a_i \\le 10^9 $。\n\n| Test Point ID | $ n $ | $ k $ |\n|:-:|:-:|:-:|\n| $ 1 $ | $ \\le 50 $ | $ =0 $ |\n| $ 2 $ | - | $ =0 $ |\n| $ 3 \\sim 4 $ | $ \\le 50 $ | $ =1 $ |\n| $ 5 \\sim 7 $ | - | $ =1 $ |\n| $ 8 \\sim 10 $ | - | - |", "locale": "en"}, "zh-CN": {"title": "纷飞的樱花雨", "background": "高中的时候做过樱花雨实验，氯化钴遇到氢氧化钠溶液产生的沉淀物就像是一场铺天盖地的樱花雨。\n\n小 $ \\zeta $ 问她，你见过樱花吗？\n\n她抬头摇起眼睛，碎亮的光倒映在少女乌黑的瞳孔里。\n\n她侧头定定看了我一会儿，然后淡淡地笑了。\n\n她说，「我知道你想考武汉大学。」\n\n「我也会去武汉大学。」\n\n「今年九月，你要和我一起去看樱花吗？」", "description": "小 $ \\zeta $ 喜欢观赏樱花。\n\n$ n $ 朵樱花的掉落过程中，第 $ i $ 个掉落的樱花的美丽度为 $ a_i $。\n\n每朵樱花掉落后，樱花掉落的总观赏度会增加这朵樱花及之前所有已经掉落的樱花的美丽度的最大值。\n\n交换**正好** $ k $ 次两朵樱花的掉落顺序（不能交换一朵樱花和本身，但可以重复交换两朵樱花），最大化总观赏度的值。\n\n形式化地讲，给出一个长度为 $ n $ 的数组，进行正好 $ k $ 次交换使得 $ \\sum_{i=1}^n \\max_{j=1}^ia_j $  最大。", "inputFormat": "**本题多测**，第一行输入该测试点内数据组数 $ T $。\n\n对于每组测试数据：\n\n第一行两个整数 $ n $ 和 $ k $，含义见题目描述。\n\n接下来 $ n $ 个空格分隔的整数，第 $ i $ 个代表 $ a_i $ 的初始值。", "outputFormat": "对于每组测试数据，输出一行一个整数表示题目要求的值。", "hint": "**【样例 1 解释】**\n\n第二组数据可以将 $ 10 $ 和 $ 11 $ 交换，观赏度总和为 $ 11+11=22 $。\n\n**【数据规模与约定】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 500 $，$ 2 \\le n \\le 10^5 $，$ 0 \\le k \\le 10^9 $，$ \\sum n \\le 10^6 $，$ 1 \\le a_i \\le 10^9 $。\n\n**本题测试点等分，按测试点加和计分。**\n\n| 测试点编号 | $ n $ | $ k $ |\n|:-:|:-:|:-:|\n| $ 1 $ | $ \\le 50 $ | $ =0 $ |\n| $ 2 $ | - | $ =0 $ |\n| $ 3 \\sim 4 $ | $ \\le 50 $ | $ =1 $ |\n| $ 5 \\sim 7 $ | - | $ =1 $ |\n| $ 8 \\sim 10 $ | - | - |", "locale": "zh-CN"}}}
{"pid": "P11310", "type": "P", "difficulty": 3, "samples": [["1\n4", "3"], ["1\n0", "NO!"]], "limits": {"time": [1000, 1000, 1000], "memory": [524288, 524288, 524288]}, "tags": ["数学", "数论", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「WPOI-R2」无穷的迭代器", "background": "You can also see the pdf at the bottom of the chinese problem statement.", "description": "对于实数 $ r $，记一次操作为：\n\n* 找到不小于 $ r $ 的最小整数即 $ \\lceil r \\rceil $，并将 $ r $ 的值乘上 $ \\lceil r \\rceil $。\n\n现在给定非负整数 $ k $，对于 $ r=k+\\frac{1}{2} $，至少需要对 $ r $ 进行几次操作才能使 $ r $ 为整数？", "inputFormat": "本题多测，第一行一个整数 $ T $ 代表数据组数。\n\n对于每组数据：\n\n一行一个整数 $k$，含义见题目描述。", "outputFormat": "对于每组数据：\n\n若可以变成整数，输出一行一个整数代表你找到的最小的次数。\n\n若不能变成整数，输出一行 `NO!`。", "hint": "**【样例 1 解释】**\n\n| 操作次数 | $ r= $ |\n|:-:|:-:|\n| 初始 | $ \\frac{9}{2} $ |\n| $ 1 $ | $ \\frac{45}{2} $ |\n| $ 2 $ | $ \\frac{1035}{2} $ |\n| $ 3 $ | $ 268065 $ |\n\n**【数据规模与约定】**\n\n**提示：本题采用捆绑计分。**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 20 $，$ 0 \\le k \\le 10^{18} $。\n\n* Subtask 1（15 pts）：$ 1 \\le k \\le 10 $。\n* Subtask 2（40 pts）：$ 1 \\le k \\le 100 $。\n* Subtask 3（45 pts）：$ 0 \\le k \\le 10^{18} $。", "locale": "zh-CN", "translations": {"en": {"title": "Iterators for Infinity", "background": "", "description": "For a real number $ r $, defining an operation as:\n\n* $ r \\leftarrow r\\lceil r \\rceil $（$ \\lceil r \\rceil $ is smallest integer that is not less than r）.\n\nGive a nonnegative integer $ k $，what is the minimum number of operations that need to be performed on $ r=k+0.5 $ to make $ r $ an integer?", "inputFormat": "This is a multiple test problem, where the first line an integer $ T $ represents the\nnumber of data sets.\n\nFor each group of data: One integer $ k $ in the first line, the meaning of which is described in the description section.\n", "outputFormat": "If it can be made into an integer, output one line with an integer representing the smallest number of times you found it.\n\nIf it cannot be made into an integer, output a line `NO!`.", "hint": "**「Sample 1 Explanation」**\n\n| Times | $ r $ |\n|:-:|:-:|\n| $ 0 $ | $ \\frac{9}{2} $ |\n| $ 1 $ | $ \\frac{45}{2} $ |\n| $ 2 $ | $ \\frac{1035}{2} $ |\n| $ 3 $ | $ 268065 $ |\n\n**「Data sizes and conventions」**\n\n**This question is scored as a bundle.**\n\nFor 100% of data, $ 1 \\le T \\le 20 $，$ 0 \\le k \\le 10^{18} $.\n\n* Subtask 1（15 pts）：$ 1 \\le k \\le 10 $。\n* Subtask 2（40 pts）：$ 1 \\le k \\le 100 $。\n* Subtask 3（45 pts）：$ 0 \\le k \\le 10^{18} $。", "locale": "en"}, "zh-CN": {"title": "「WPOI-R2」无穷的迭代器", "background": "You can also see the pdf at the bottom of the chinese problem statement.", "description": "对于实数 $ r $，记一次操作为：\n\n* 找到不小于 $ r $ 的最小整数即 $ \\lceil r \\rceil $，并将 $ r $ 的值乘上 $ \\lceil r \\rceil $。\n\n现在给定非负整数 $ k $，对于 $ r=k+\\frac{1}{2} $，至少需要对 $ r $ 进行几次操作才能使 $ r $ 为整数？", "inputFormat": "本题多测，第一行一个整数 $ T $ 代表数据组数。\n\n对于每组数据：\n\n一行一个整数 $k$，含义见题目描述。", "outputFormat": "对于每组数据：\n\n若可以变成整数，输出一行一个整数代表你找到的最小的次数。\n\n若不能变成整数，输出一行 `NO!`。", "hint": "**【样例 1 解释】**\n\n| 操作次数 | $ r= $ |\n|:-:|:-:|\n| 初始 | $ \\frac{9}{2} $ |\n| $ 1 $ | $ \\frac{45}{2} $ |\n| $ 2 $ | $ \\frac{1035}{2} $ |\n| $ 3 $ | $ 268065 $ |\n\n**【数据规模与约定】**\n\n**提示：本题采用捆绑计分。**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 20 $，$ 0 \\le k \\le 10^{18} $。\n\n* Subtask 1（15 pts）：$ 1 \\le k \\le 10 $。\n* Subtask 2（40 pts）：$ 1 \\le k \\le 100 $。\n* Subtask 3（45 pts）：$ 0 \\le k \\le 10^{18} $。", "locale": "zh-CN"}}}
{"pid": "P11311", "type": "P", "difficulty": 5, "samples": [["5\n1 2 3 4 5", "5"], ["6\n1 2 2 1 2 3", "5"], ["9\n1 2 1 4 1 2 1 1 2", "8"], ["21\n1 2 1 2 1 2 1 2 1 2 3 4 5 6 7 1 2 1 2 1 2", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "排序", "洛谷月赛"], "title": "漫长的小纸带", "background": "You can also see the pdf at the bottom of the chinese problem statement.\n\n小 $ \\zeta $ 是一个喜欢打暴力的 OIer。在每次模拟赛中，他秉持着“10 分钟想不出来正解那就把暴力糊上去”的理念，每次都稳定地拿到很高的分数；平时训练时，他会关注题目的部分分，针对部分分任务进行求解，有时在部分分求解上使用的时间比这个题正解的思考都长。", "description": "小 $ \\zeta $ 经过了几年的暴力训练，暴力水平更是炉火纯青。在 S-PSC 2077 的比赛中，他惊喜的发现第二题《漫长的小纸带》是一道很困难的题目，正适合他这种暴力选手发挥。\n\n这道题目是多测题目，在某个测试点内有 $ n $ 组数据，第 $ i $ 组数据的规模为 $ a_i $。他写出了一个暴力程序，对于一段连续的数据，程序解决这段数据需要消耗的时间为这段数据中出现的不同的 $ a_i $ 的种类数平方。形式化地讲，对于一个从第 $ l $ 组到第 $ r $ 组的连续的数据段，记 $ S=\\{a_i|l \\le i \\le r\\} $，程序需要消耗 $ |S|^2 $ 的时间来一起解决它们。\n\n现在，他给你 $ n $ 和 $ n $ 组数据的规模，请找到一种将这些数据划分成若干个数据段的方案，使得程序消耗的总时间最短。", "inputFormat": "第一行一个整数 $ n $。\n\n接下来一行 $ n $ 个整数 $ a_i $，代表每一组测试数据的规模。", "outputFormat": "输出一个数代表总时间消耗。", "hint": "**【样例 3 解释】**\n\n分段方式为：\n\n* 第一段 $ \\{1\\} $，消耗为 $ 1 $。\n* 第二段 $ \\{2\\} $，消耗为 $ 1 $。\n* 第三段 $ \\{1\\} $，消耗为 $ 1 $。\n* 第四段 $ \\{4\\} $，消耗为 $ 1 $。\n* 第五段 $ \\{1,2,1,1,2\\} $，消耗为 $ 4 $。\n\n故程序总共消耗的时间为 $ 8 $。\n\n**【数据范围】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le n \\le 2 \\times 10^5 $，$ 1 \\le a_i \\le 10^9 $。\n\n**提示：本题开启捆绑测试。**\n\n| 子任务编号 | $ n \\le $ | 特殊性质 | 分数 |\n|:-:|:-:|:-:|:-:|\n| $ 1 $ | $ 10 $ | - | $ 8 $ |\n| $ 2 $ | $ 300 $ | - | $ 8 $ |\n| $ 3 $ | $ 2000 $ | - | $ 16 $ |\n| $ 4 $ | - | A | $ 16 $ |\n| $ 5 $ | - | B | $ 24 $ |\n| $ 6 $ | - | - | $ 28 $ |\n\n特殊性质 A：所有的 $ a_i $ 在 $ [1,10^9] $ 内等概率随机生成，且本子任务只有 $ 1 $ 个测试点。\n\n特殊性质 B：$ 1 \\le a_i \\le 1000 $。\n", "locale": "zh-CN", "translations": {"en": {"title": "The Long Paper Tape", "background": "Little $ ζ $ is an OIer who loves brute force solutions. During each mock competition, he follows the philosophy of “if I can’t figure out the optimal solution in 10 minutes, I’ll submit a brute force one,” consistently achieving high scores.\n\nDuring practice, he pays special attention to partial scores, solving tasks specifically for these partial points. Sometimes, he spends more time optimizing for partial scores than thinking about the complete solution.", "description": "After years of brute force training, Little $ζ$ has mastered the art. During SPSC 2077, he was delighted to find that the second problem, “The Long Paper Tape,” was a challenging one - perfect for a brute force specialist like him.\n\nThis is a multiple test case problem with $ n $ test cases in one test point. The size of the i-th test case is $a_i$. He wrote a brute force program where, for a continuous segment of data, the time needed to solve that segment is the square of the number of different $a_i$ values in that segment. Formally, for a continuous segment from the l-th to the r-th test case, let $ S = \\{a_i|l ≤ i ≤ r\\}$, the program needs $ |S|^2 $ time to solve them together.\n\nNow, given $ n $ and the sizes of $ n $ test cases, find a way to divide these cases into several segments so that the total time consumed by the program is minimized.", "inputFormat": "The first line contains an integer $n $.\n\nThe next line contains $n$ integers $a_i$, representing the size of each test case.", "outputFormat": "Output one number representing the minimum total time consumption.", "hint": "**「Sample 3 Explanation」**\n\nThe segments are:\n* First segment $\\{1\\}$, cost = $ 1 $;\n* Second segment $\\{2\\}$, cost = $ 1 $;\n* Third segment $\\{1\\}$, cost = $1$;\n* Fourth segment $\\{4\\}$, cost = $1$;\n* Fifth segment $\\{1, 2, 1, 1, 2\\}$, cost = $4$;\n\nTherefore, the total time consumption is $8$.\n\n**「Data Constraints」**\n\nFor 100% of test cases：$ 1 \\le n \\le 2 \\times 10^5 $，$ 1 \\le a_i \\le 10^9 $。\n\n| Subtask ID | $ n \\le $ | Special Property | pts |\n|:-:|:-:|:-:|:-:|\n| $ 1 $ | $ 10 $ | - | $ 8 $ |\n| $ 2 $ | $ 300 $ | - | $ 8 $ |\n| $ 3 $ | $ 2000 $ | - | $ 16 $ |\n| $ 4 $ | - | A | $ 16 $ |\n| $ 5 $ | - | B | $ 24 $ |\n| $ 6 $ | - | - | $ 28 $ |\n\nSpecial Property A: All $a_i $ are randomly generated with uniform distribution in range $[1, 10^9]$, and this subtask has only one test point.\n\nSpecial Property B: $1 ≤ a_i ≤ 1000$.", "locale": "en"}, "zh-CN": {"title": "漫长的小纸带", "background": "You can also see the pdf at the bottom of the chinese problem statement.\n\n小 $ \\zeta $ 是一个喜欢打暴力的 OIer。在每次模拟赛中，他秉持着“10 分钟想不出来正解那就把暴力糊上去”的理念，每次都稳定地拿到很高的分数；平时训练时，他会关注题目的部分分，针对部分分任务进行求解，有时在部分分求解上使用的时间比这个题正解的思考都长。", "description": "小 $ \\zeta $ 经过了几年的暴力训练，暴力水平更是炉火纯青。在 S-PSC 2077 的比赛中，他惊喜的发现第二题《漫长的小纸带》是一道很困难的题目，正适合他这种暴力选手发挥。\n\n这道题目是多测题目，在某个测试点内有 $ n $ 组数据，第 $ i $ 组数据的规模为 $ a_i $。他写出了一个暴力程序，对于一段连续的数据，程序解决这段数据需要消耗的时间为这段数据中出现的不同的 $ a_i $ 的种类数平方。形式化地讲，对于一个从第 $ l $ 组到第 $ r $ 组的连续的数据段，记 $ S=\\{a_i|l \\le i \\le r\\} $，程序需要消耗 $ |S|^2 $ 的时间来一起解决它们。\n\n现在，他给你 $ n $ 和 $ n $ 组数据的规模，请找到一种将这些数据划分成若干个数据段的方案，使得程序消耗的总时间最短。", "inputFormat": "第一行一个整数 $ n $。\n\n接下来一行 $ n $ 个整数 $ a_i $，代表每一组测试数据的规模。", "outputFormat": "输出一个数代表总时间消耗。", "hint": "**【样例 3 解释】**\n\n分段方式为：\n\n* 第一段 $ \\{1\\} $，消耗为 $ 1 $。\n* 第二段 $ \\{2\\} $，消耗为 $ 1 $。\n* 第三段 $ \\{1\\} $，消耗为 $ 1 $。\n* 第四段 $ \\{4\\} $，消耗为 $ 1 $。\n* 第五段 $ \\{1,2,1,1,2\\} $，消耗为 $ 4 $。\n\n故程序总共消耗的时间为 $ 8 $。\n\n**【数据范围】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le n \\le 2 \\times 10^5 $，$ 1 \\le a_i \\le 10^9 $。\n\n**提示：本题开启捆绑测试。**\n\n| 子任务编号 | $ n \\le $ | 特殊性质 | 分数 |\n|:-:|:-:|:-:|:-:|\n| $ 1 $ | $ 10 $ | - | $ 8 $ |\n| $ 2 $ | $ 300 $ | - | $ 8 $ |\n| $ 3 $ | $ 2000 $ | - | $ 16 $ |\n| $ 4 $ | - | A | $ 16 $ |\n| $ 5 $ | - | B | $ 24 $ |\n| $ 6 $ | - | - | $ 28 $ |\n\n特殊性质 A：所有的 $ a_i $ 在 $ [1,10^9] $ 内等概率随机生成，且本子任务只有 $ 1 $ 个测试点。\n\n特殊性质 B：$ 1 \\le a_i \\le 1000 $。\n", "locale": "zh-CN"}}}
{"pid": "P11312", "type": "P", "difficulty": 4, "samples": [["1\n5 10\n1 12\n44 50\n9 10\n88 99\n29 99", "Yes\n10 50 10 90 30"], ["2\n3 11\n99 10003\n39 299\n39 10003\n5 55\n1 54\n1 20\n1 300\n1 300\n1 300", "Yes\n123 246 369\nNo"], ["3\n6 1\n1 10\n1 10\n1 10\n1 10\n1 10\n1 10\n5 4\n11 15\n6 10\n9 14\n20 23\n27 29\n5 11\n20 30\n50 70\n111 120\n72 77\n119 121", "Yes\n1 1 4 5 1 4\nYes\n14 7 14 21 28\nYes\n24 60 120 72 120"], ["4\n3 33\n32 34\n65 67\n97 101\n3 5\n299 99494993\n499 49992999\n499 39999939\n4 25\n719 830\n2194 2893\n132 142\n199 225\n3 10\n140 143\n131 135\n238 241", "Yes\n33 66 99\nYes\n1919810 11400 51400\nYes\n729 2700 135 216\nNo"], ["1\n10 7\n77 77\n82 174\n77 77\n82 174\n77 77\n82 174\n77 77\n82 174\n77 77\n82 174", "Yes\n77 154 77 154 77 154 77 154 77 154"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "洛谷原创", "Special Judge", "O2优化", "枚举", "洛谷月赛", "调和级数"], "title": "神奇的小江鸟", "background": "You can also see the pdf at the bottom of the chinese problem statement.\n\n感谢 [ineverleft](https://www.luogu.com.cn/user/362679) 为本题提供的本地调试 checker。\n\n「愿有前程可奔赴，亦有岁月可回首。」", "description": "小 $ \\zeta $ 在探险过程中看到了一个大锁。\n\n这个大锁有 $ n $ 个拨圈，第 $ i $ 个拨圈的拨动范围为 $ l_i $ 到 $ r_i $ 之间（含两个边界）的所有整数（保证 $ l_i \\le r_i $）。\n\n我们定义这个大锁的「自由度」为所有拨圈上的数的**最大公约数**，当锁的「自由度」大于等于 $ k $ 时，会被打开。\n\n请你找到一种锁的开启方案，或报告无解。", "inputFormat": "**本题单测试点内含有多组测试数据**，第一行一个整数 $ T $，代表数据组数。\n\n对于每组数据：\n\n第一行两个整数 $ n,k $，分别代表拨圈数量和自由度限制。\n\n接下来 $ n $ 行，每行两个整数 $ l_i,r_i $，含义见题目描述。", "outputFormat": "对于每组数据：\n\n* 如果有解，第一行输出 `Yes`，下一行输出 $ n $ 个空格分隔的整数，第 $ i $ 个为你的构造方案中第 $ i $ 个拨圈显示的数。**本题使用了 Special Judge，符合要求的答案均判对。**\n\n* 否则，输出一行 `No` 表示无解。", "hint": "**【样例 1 解释】**\n\n唯一的一组数据 $ \\gcd $ 为 $ 10 $。\n\n五个样例自测均可使用下发的附件。**请注意部分样例可能存在多解，样例输出仅列举了一组可行解。**\n\n**【数据规模与约定】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 5 $，$ 2 \\le n \\le 10^4 $，$ 1 \\le l_i \\le r_i \\le 10^9 $，$ 1 \\le k \\le 1000 $。\n\n**本题开启子任务捆绑测试。**\n\n* Subtask 1（10 pts）：$ k=1 $。\n* Subtask 2（15 pts）：$ n \\le 10 $，$ r_i - l_i + 1 \\le 5 $。\n* Subtask 3（15 pts）：$ r_i \\le 10^3 $。\n* Subtask 4（10 pts）：$ k \\le 5 $，$ l_i,r_i $ 均在 $ 1 \\le l_i \\le r_i \\le 10^9 $ 范围内等概率随机生成，该子任务只有 $ 1 $ 个测试点。\n* Subtask 5（15 pts）：对于每组数据，$ \\exist 1 \\le i \\le n,l_i=r_i $。\n* Subtask 6（35 pts）：无特殊限制。\n\n**【关于附加文件】**\n\n**本题下发了 `checker.cpp` 作为自测器。**\n\n请将输入内容、你的程序输出、参考答案输出分别放置在 `restore.in`、`restore.out`、`restore.ans` 中，这三个文件必须与 `checker.cpp` 在同一目录下，运行 `checker.cpp`，终端上会给出自测结果。\n\n**你需要保证你的输入满足 $ 100\\% $ 数据范围的要求。**\n\n注意，如果你的输入/输出/答案的格式和范围不正确的话，`checker.cpp` 出现的结果是不可预料的。因此，**请先确保你的三个文件格式正确。**", "locale": "zh-CN", "translations": {"en": {"title": "The Magical River Bird", "background": "I wish a good future to enjoy, and a good memories to traceback.", "description": "Little ζ discovered a large lock during his adventure.\n\nThis lock has $n$ dials, where the $i$-th dial can be set to any integer from $l_i$\nto $r_i$ (inclusive, and $l_i ≤ r_i$ is guaranteed).\n\nWe define the lock’s “degree of freedom” as the greatest common divisor (GCD) of all numbers shown on the dials. The lock opens when its “degree of freedom” is greater than or equal to $k$.\n\nYour task is to find a valid combination to open the lock, or report if it’s impossible.", "inputFormat": "Multiple test cases within a single test point. \nThe first line contains an integer $T $, representing the number of test cases.\n\nFor each test case:\n\nFirst line contains two integers $n, k$, representing the number of dials and\nthe freedom degree requirement.\n\nThe next $n$ lines each contain two integers $l_i, r_i$, as described in the problem.", "outputFormat": "For each test case:\n* If a solution exists, output `Yes` on the first line, followed by a line containing n space-separated integers, where the i-th number represents the value shown on the $i$-th dial in your solution. This problem uses Special Judge, any answer meeting the requirements will be accepted.\n* Otherwise, output a single line containing `No` to indicate no solution exists.", "hint": "**「Sample 1 Explanation」**\n\nFor the only test case, the $\\gcd$ is 10.\n\nAll five samples can be tested using the provided attachment. Note that some samples may have multiple valid solutions; the sample output shows just one possible solution.\n\n**「Data Constraints」**\n\nFor 100% of testcases：$ 1 \\le T \\le 5 $，$ 2 \\le n \\le 10^4 $，$ 1 \\le l_i \\le r_i \\le 10^9 $，$ 1 \\le k \\le 1000 $。\n\n**This problem uses subtask scoring。**\n\n* Subtask 1（10 pts）：$ k=1 $。\n* Subtask 2（15 pts）：$ n \\le 10 $，$ r_i - l_i + 1 \\le 5 $。\n* Subtask 3（15 pts）：$ r_i \\le 10^3 $。\n* Subtask 4（10 pts）：$ k \\le 5 $，$ l_i, r_i $ are randomly generated with uniform distribution in range $ [1, 10^9] $, this subtask has only one test point.\n* Subtask 5（15 pts）：For all cases，$ \\exist 1 \\le i \\le n,l_i=r_i $。\n* Subtask 6（35 pts）：No additional constraints.\n\n**「About Additional Files」**\n\nA `checker.cpp` is provided as a testing tool.\n\nPlace your input content, program output, and reference answer in `restore.in`, `restore.out`, and `restore.ans` respectively. These three files must be in the same directory as `checker.cpp`. Run `checker.cpp` to see the testing results.\n\nYour input must satisfy the constraints for $100\\%$ of test cases.\n\nNote that if your input/output/answer format or range is incorrect, the results from checker.cpp are unpredictable. Therefore, please ensure your three files are correctly formatted first.", "locale": "en"}, "zh-CN": {"title": "神奇的小江鸟", "background": "You can also see the pdf at the bottom of the chinese problem statement.\n\n感谢 [ineverleft](https://www.luogu.com.cn/user/362679) 为本题提供的本地调试 checker。\n\n「愿有前程可奔赴，亦有岁月可回首。」", "description": "小 $ \\zeta $ 在探险过程中看到了一个大锁。\n\n这个大锁有 $ n $ 个拨圈，第 $ i $ 个拨圈的拨动范围为 $ l_i $ 到 $ r_i $ 之间（含两个边界）的所有整数（保证 $ l_i \\le r_i $）。\n\n我们定义这个大锁的「自由度」为所有拨圈上的数的**最大公约数**，当锁的「自由度」大于等于 $ k $ 时，会被打开。\n\n请你找到一种锁的开启方案，或报告无解。", "inputFormat": "**本题单测试点内含有多组测试数据**，第一行一个整数 $ T $，代表数据组数。\n\n对于每组数据：\n\n第一行两个整数 $ n,k $，分别代表拨圈数量和自由度限制。\n\n接下来 $ n $ 行，每行两个整数 $ l_i,r_i $，含义见题目描述。", "outputFormat": "对于每组数据：\n\n* 如果有解，第一行输出 `Yes`，下一行输出 $ n $ 个空格分隔的整数，第 $ i $ 个为你的构造方案中第 $ i $ 个拨圈显示的数。**本题使用了 Special Judge，符合要求的答案均判对。**\n\n* 否则，输出一行 `No` 表示无解。", "hint": "**【样例 1 解释】**\n\n唯一的一组数据 $ \\gcd $ 为 $ 10 $。\n\n五个样例自测均可使用下发的附件。**请注意部分样例可能存在多解，样例输出仅列举了一组可行解。**\n\n**【数据规模与约定】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 5 $，$ 2 \\le n \\le 10^4 $，$ 1 \\le l_i \\le r_i \\le 10^9 $，$ 1 \\le k \\le 1000 $。\n\n**本题开启子任务捆绑测试。**\n\n* Subtask 1（10 pts）：$ k=1 $。\n* Subtask 2（15 pts）：$ n \\le 10 $，$ r_i - l_i + 1 \\le 5 $。\n* Subtask 3（15 pts）：$ r_i \\le 10^3 $。\n* Subtask 4（10 pts）：$ k \\le 5 $，$ l_i,r_i $ 均在 $ 1 \\le l_i \\le r_i \\le 10^9 $ 范围内等概率随机生成，该子任务只有 $ 1 $ 个测试点。\n* Subtask 5（15 pts）：对于每组数据，$ \\exist 1 \\le i \\le n,l_i=r_i $。\n* Subtask 6（35 pts）：无特殊限制。\n\n**【关于附加文件】**\n\n**本题下发了 `checker.cpp` 作为自测器。**\n\n请将输入内容、你的程序输出、参考答案输出分别放置在 `restore.in`、`restore.out`、`restore.ans` 中，这三个文件必须与 `checker.cpp` 在同一目录下，运行 `checker.cpp`，终端上会给出自测结果。\n\n**你需要保证你的输入满足 $ 100\\% $ 数据范围的要求。**\n\n注意，如果你的输入/输出/答案的格式和范围不正确的话，`checker.cpp` 出现的结果是不可预料的。因此，**请先确保你的三个文件格式正确。**", "locale": "zh-CN"}}}
{"pid": "P11313", "type": "P", "difficulty": 7, "samples": [["5\n2 2 2\n2 2 1\n4 4 4\n4 4 2\n4 6 3", "NO\nYES\n1 1\n1 1\nYES\n1 1 2 2\n1 1 2 2\n3 3 4 4\n3 3 4 4\nYES\n1 1 1 1\n1 2 2 1\n1 2 2 1\n1 1 1 1\nYES\n1 1 1 1 1 1\n1 2 2 3 3 1\n1 2 2 3 3 1\n1 1 1 1 1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "Special Judge", "构造", "Ad-hoc", "分类讨论", "RMI（罗马尼亚）"], "title": "[RMI 2021] 园艺 / Gardening", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D1T1。$\\texttt{1s,0.5G}$。", "description": "\n现在要在 $N$ 行 $M$ 列的矩形格子内种花，每个格子内种一株花。一共有 $K$ 种品种的花，编号为 $1\\sim K$。\n\n为了让花更好看，以下条件必须满足：\n\n- 每种花至少出现一株。\n- 每种花所在的格子形成一个四连通块。\n- 与格子 $(i,j)$ 四连通的格子中，**恰好**有两个格子种的花与 $(i,j)$ 种的花的品种相同。\n\n请你构造一组方案，或者指出这是不可能实现的。\n", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来 $T$ 组测试数据，每组测试数据包含一行三个正整数 $N,M,K$。\n\n", "outputFormat": "\n对于每组测试数据：\n\n- 如果不可能构造，输出一行一个 $\\texttt{NO}$；\n- 否则，输出一行一个 $\\texttt{YES}$；接下来 $N$ 行，每行 $M$ 个正整数，描述一个方案。\n\n任意一组合法方案都可以得分。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le N,M\\le 2\\times 10^5$； \n- $1\\le K\\le N\\cdot M$；\n- $1\\le T\\le 10^5$；\n- 令 $S$ 为**有解**的测试数据中的 $\\sum N\\cdot M$，则 $S\\le 2\\times 10^5$。\n\n\n| 子任务编号 | $N\\le  $ | 特殊性质 |  得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $ 4 $  | A |  $5$ |\n| $ 2 $    | $ 4 $  |  |  $6$ |\n| $ 3 $    | $ 6 $  |  |  $10$ |\n| $ 4 $    | $ 2\\times 10^5$  | B |  $18$ |\n| $ 5 $    | $ 2\\times 10^5$  | C |  $39$ |\n| $ 6 $    | $ 2\\times 10^5$  |  |  $22$ |\n\n- 特殊性质 A：$M\\le 4$。\n- 特殊性质 B：$N=M$。\n- 特殊性质 C：$K$ 在 $[1,N\\cdot M]$ 中等概率独立随机选取。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2021] 园艺 / Gardening", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D1T1。$\\texttt{1s,0.5G}$。", "description": "\n现在要在 $N$ 行 $M$ 列的矩形格子内种花，每个格子内种一株花。一共有 $K$ 种品种的花，编号为 $1\\sim K$。\n\n为了让花更好看，以下条件必须满足：\n\n- 每种花至少出现一株。\n- 每种花所在的格子形成一个四连通块。\n- 与格子 $(i,j)$ 四连通的格子中，**恰好**有两个格子种的花与 $(i,j)$ 种的花的品种相同。\n\n请你构造一组方案，或者指出这是不可能实现的。\n", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来 $T$ 组测试数据，每组测试数据包含一行三个正整数 $N,M,K$。\n\n", "outputFormat": "\n对于每组测试数据：\n\n- 如果不可能构造，输出一行一个 $\\texttt{NO}$；\n- 否则，输出一行一个 $\\texttt{YES}$；接下来 $N$ 行，每行 $M$ 个正整数，描述一个方案。\n\n任意一组合法方案都可以得分。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le N,M\\le 2\\times 10^5$； \n- $1\\le K\\le N\\cdot M$；\n- $1\\le T\\le 10^5$；\n- 令 $S$ 为**有解**的测试数据中的 $\\sum N\\cdot M$，则 $S\\le 2\\times 10^5$。\n\n\n| 子任务编号 | $N\\le  $ | 特殊性质 |  得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $ 4 $  | A |  $5$ |\n| $ 2 $    | $ 4 $  |  |  $6$ |\n| $ 3 $    | $ 6 $  |  |  $10$ |\n| $ 4 $    | $ 2\\times 10^5$  | B |  $18$ |\n| $ 5 $    | $ 2\\times 10^5$  | C |  $39$ |\n| $ 6 $    | $ 2\\times 10^5$  |  |  $22$ |\n\n- 特殊性质 A：$M\\le 4$。\n- 特殊性质 B：$N=M$。\n- 特殊性质 C：$K$ 在 $[1,N\\cdot M]$ 中等概率独立随机选取。\n\n", "locale": "zh-CN"}}}
{"pid": "P11314", "type": "P", "difficulty": 7, "samples": [["5\n0\n1\n2\n3\n4", "0\n1 1\n1 2\n2 1 2\n1 3"], ["4\n5\n6\n100\n1000", "2 1 3\n3 1 2 3\n5 1 2 3 7 8\n7 1 2 3 5 10 11 12"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "RMI（罗马尼亚）"], "title": "[RMI 2021] 礼物 / Present", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D1T2。$\\texttt{4s,0.5G}$。", "description": "\n> 定义一个集合 $S$ 是**好的**，当且仅当：\n> \n> - $S$ 为有限集合；\n> - $S$ 中只包含正整数；\n> - $\\forall x,y\\in S$，都有 $\\gcd(x,y)\\in S$。\n> \n> 注意到 $\\varnothing$ **也是好的**。\n\n\n> **Laikan 序**\n> \n> 定义好的集合 $A,B$ 满足 $A\\lt B$，当且仅当下列条件至少有一个成立：\n> \n> - $\\max A\\lt \\max B$；\n> - $\\max A=\\max B\\land A\\backslash \\{\\max A\\}\\lt B\\backslash\\{\\max B\\}$。\n> \n> 特别地，定义 $\\max \\varnothing=-\\infty$。\n> \n> 不难发现，对于好的集合 $S$，这总是良定义的。\n\n你要将一个**好的**集合 $S$ 作为礼物送给你的挚友。\n\n由于你们已经分隔 $k$ 天，你想要让这个礼物更有纪念意义。\n\n于是，你将所有好的集合按照 **Laikan 序** 排序，得到一个无穷序列 $S_0,S_1,\\cdots$。你将要把 $S_k$ 送给你的挚友。\n\n你想要知道，你要送的集合里面的元素是什么。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来 $T$ 组测试数据，每组测试数据包含一行一个整数 $k$。\n\t", "outputFormat": "\n对于每组测试数据，输出一行。\n\n第一个数，表示 $|S|$。\n\n接下来 $|S|$ 个数，**升序**输出 $S$ 中的元素。\n", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le T\\le 5$； \n- $0\\le k\\le 1.5\\times 10^9$。\n\n\n| 子任务编号 | $k\\le  $ |得分 |  \n| :--: | :--: |  :--: |\n| $ 1 $    | $ 10^2 $  | $8$ |\n| $ 2 $    | $ 10^6 $  | $21$ |\n| $ 3 $    | $ 5\\times 10^8 $  | $41$ |\n| $ 4 $    | $ 10^9 $  | $14$ |\n| $ 5 $    | $ 1.5\\times 10^9$  | $16$ |\n\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2021] 礼物 / Present", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D1T2。$\\texttt{4s,0.5G}$。", "description": "\n> 定义一个集合 $S$ 是**好的**，当且仅当：\n> \n> - $S$ 为有限集合；\n> - $S$ 中只包含正整数；\n> - $\\forall x,y\\in S$，都有 $\\gcd(x,y)\\in S$。\n> \n> 注意到 $\\varnothing$ **也是好的**。\n\n\n> **Laikan 序**\n> \n> 定义好的集合 $A,B$ 满足 $A\\lt B$，当且仅当下列条件至少有一个成立：\n> \n> - $\\max A\\lt \\max B$；\n> - $\\max A=\\max B\\land A\\backslash \\{\\max A\\}\\lt B\\backslash\\{\\max B\\}$。\n> \n> 特别地，定义 $\\max \\varnothing=-\\infty$。\n> \n> 不难发现，对于好的集合 $S$，这总是良定义的。\n\n你要将一个**好的**集合 $S$ 作为礼物送给你的挚友。\n\n由于你们已经分隔 $k$ 天，你想要让这个礼物更有纪念意义。\n\n于是，你将所有好的集合按照 **Laikan 序** 排序，得到一个无穷序列 $S_0,S_1,\\cdots$。你将要把 $S_k$ 送给你的挚友。\n\n你想要知道，你要送的集合里面的元素是什么。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来 $T$ 组测试数据，每组测试数据包含一行一个整数 $k$。\n\t", "outputFormat": "\n对于每组测试数据，输出一行。\n\n第一个数，表示 $|S|$。\n\n接下来 $|S|$ 个数，**升序**输出 $S$ 中的元素。\n", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le T\\le 5$； \n- $0\\le k\\le 1.5\\times 10^9$。\n\n\n| 子任务编号 | $k\\le  $ |得分 |  \n| :--: | :--: |  :--: |\n| $ 1 $    | $ 10^2 $  | $8$ |\n| $ 2 $    | $ 10^6 $  | $21$ |\n| $ 3 $    | $ 5\\times 10^8 $  | $41$ |\n| $ 4 $    | $ 10^9 $  | $14$ |\n| $ 5 $    | $ 1.5\\times 10^9$  | $16$ |\n\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11315", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "交互题", "Special Judge", "树的遍历", "通信题", "RMI（罗马尼亚）"], "title": "[RMI 2021] 速通 / Speedrun", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D1T3。$\\texttt{3.5s,0.5G}$。\n\n评测时，**不要引入头文件**。在文件头加入如下的语句：\n\n```\nvoid setHintLen(int);\nvoid setHint(int,int, bool);\nint getLength();\nbool getHint(int);\nbool goTo(int);\n```", "description": "\n**这是一道通信题。**\n\n你在一棵 $N$ 个节点的树上，从某个节点出发跑酷。\n\n**你不知道这棵树的具体形态**，只知道现在自己在哪个节点。你在点 $u$ 时，唯一能做的就是选择一个 $v$，尝试走到 $v$。如果 $(u,v)$ 这条边存在，你会走到 $v$；否则你将留在原地。\n\n需要注意的是，**你最多能试错 $Q$ 次**。也就是说，如果你超过 $Q$ 次选择了一条不存在的边，就失败了。\n\n当你经过每个节点至少一次时，我们说你**速通成功**。\n\n现在有一个作弊的机会。你可以在每个节点放一个长度为 $l$ 的 $\\texttt{01}$ 串，当你在某个节点时，可以读取那个节点上 $\\texttt{01}$ 串的信息。需要注意的是，在放置 $\\texttt{01}$ 串的时候**你是知道这棵树的形态的，但是你不知道自己跑酷时的出发点。**\n\n\n请你找到一种设置信息和速通的方式，使得速通成功。\n\n### 实现细节\n\n你不需要，也不应该实现 main 函数。\n\n你需要实现以下的函数：\n\n```cpp\nvoid assignHints(int subtask, int N, int A[], int B[]);\nvoid speedrun(int subtask, int N, int start);\n```\n\n你可以调用以下的函数：\n\n```cpp\nvoid setHintLen(int l);\nvoid setHint(int i, int j, bool b);\nint getLength();\nbool getHint(int j);\nbool goTo(int x);\n```\n#### 第一次运行\n\n第一次运行用于确定每个节点上的信息。\n\n交互库将会调用 `assignHints` 函数恰好一次。参数的含义：\n- `subtask`：子任务编号。\n- `N`：树的节点数量。\n- `A[]`, `B[]`：长度为 $N$ 的整数数组，含义为对于每个 $i=1,2,\\cdots, N-1$，$A[i],B[i]$ 间有一条边连接。\n\n随后，你需要立刻调用 `setHintLen` 函数恰好一次。传入正整数 `l` 表示你的 $\\texttt{01}$ 串的长度。\n\n$\\texttt{01}$ 串起初全为 $0$。\n\n接下来，你可以多次调用 `setHint`，其中 $1\\le j\\le l$，表示将节点 $i$ 的 $\\texttt{01}$ 串的第 $j$ 位设置成 `b`。\n\n在第一次运行中，禁止调用 `getLength`，`getHint` 和 `goTo`。\n\n#### 第二次运行\n\n交互库将会调用 `speedrun` 函数恰好一次。参数的含义：\n- `subtask`：子任务编号。\n- `N`：树的节点数量。\n- `start`：你的初始位置。\n\n调用 `getLength` 来获得 $\\texttt{01}$ 串的长度。\n\n当你在节点 $i$ 时，调用 `getHint(j)` 来获得当前节点上 $\\texttt{01}$ 串的第 $j$ 位。\n\n可以调用 `goTo` 来尝试移动一步。如果成功，返回值为 `true`；否则返回值为 `false`。\n\n在第二次运行中，禁止调用 `setHint` 和 `setHintLen`。\n\n", "inputFormat": "", "outputFormat": "", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^3$。\n\n令 $Q$ 为 `goTo` 函数返回 `False` 的最大次数，$L$ 为 $l$ 的最大值。超出限制，得 $0$ 分。\n\n| 子任务编号 | $L\\le  $ | $Q\\le$ | 树的形态 | 计分方式 | 得分 |  \n| :--: | :--: |  :--: | :--: |:--: | :--: |\n| $ 1 $    | $ N $  | $2\\,000$ | | I | $21$ | \n| $ 2 $    | $ 20 $  | $2\\,000$ | 菊花图 | I | $8$ | \n| $ 3 $    | $ 20 $ | $2\\,000$ | 链 | I | $19$ |\n| $ 4 $    | $ 316 $  | $32\\, 000$ | | I |$12$ |\n| $ 5 $    | $ 40 $  | $2\\, 000$ | | II | $40$ |\n\n- 菊花图：存在一个度数为 $(N-1)$ 的节点。\n- 链：每个节点度数均不大于 $2$。\n- 计分方式 $\\text{I}$：成功遍历树，得满分；否则得 $0$ 分。\n- 计分方式 $\\text{II}$：成功遍历树的得分为 $\\min(40,60-l)$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2021] 速通 / Speedrun", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D1T3。$\\texttt{3.5s,0.5G}$。\n\n评测时，**不要引入头文件**。在文件头加入如下的语句：\n\n```\nvoid setHintLen(int);\nvoid setHint(int,int, bool);\nint getLength();\nbool getHint(int);\nbool goTo(int);\n```", "description": "\n**这是一道通信题。**\n\n你在一棵 $N$ 个节点的树上，从某个节点出发跑酷。\n\n**你不知道这棵树的具体形态**，只知道现在自己在哪个节点。你在点 $u$ 时，唯一能做的就是选择一个 $v$，尝试走到 $v$。如果 $(u,v)$ 这条边存在，你会走到 $v$；否则你将留在原地。\n\n需要注意的是，**你最多能试错 $Q$ 次**。也就是说，如果你超过 $Q$ 次选择了一条不存在的边，就失败了。\n\n当你经过每个节点至少一次时，我们说你**速通成功**。\n\n现在有一个作弊的机会。你可以在每个节点放一个长度为 $l$ 的 $\\texttt{01}$ 串，当你在某个节点时，可以读取那个节点上 $\\texttt{01}$ 串的信息。需要注意的是，在放置 $\\texttt{01}$ 串的时候**你是知道这棵树的形态的，但是你不知道自己跑酷时的出发点。**\n\n\n请你找到一种设置信息和速通的方式，使得速通成功。\n\n### 实现细节\n\n你不需要，也不应该实现 main 函数。\n\n你需要实现以下的函数：\n\n```cpp\nvoid assignHints(int subtask, int N, int A[], int B[]);\nvoid speedrun(int subtask, int N, int start);\n```\n\n你可以调用以下的函数：\n\n```cpp\nvoid setHintLen(int l);\nvoid setHint(int i, int j, bool b);\nint getLength();\nbool getHint(int j);\nbool goTo(int x);\n```\n#### 第一次运行\n\n第一次运行用于确定每个节点上的信息。\n\n交互库将会调用 `assignHints` 函数恰好一次。参数的含义：\n- `subtask`：子任务编号。\n- `N`：树的节点数量。\n- `A[]`, `B[]`：长度为 $N$ 的整数数组，含义为对于每个 $i=1,2,\\cdots, N-1$，$A[i],B[i]$ 间有一条边连接。\n\n随后，你需要立刻调用 `setHintLen` 函数恰好一次。传入正整数 `l` 表示你的 $\\texttt{01}$ 串的长度。\n\n$\\texttt{01}$ 串起初全为 $0$。\n\n接下来，你可以多次调用 `setHint`，其中 $1\\le j\\le l$，表示将节点 $i$ 的 $\\texttt{01}$ 串的第 $j$ 位设置成 `b`。\n\n在第一次运行中，禁止调用 `getLength`，`getHint` 和 `goTo`。\n\n#### 第二次运行\n\n交互库将会调用 `speedrun` 函数恰好一次。参数的含义：\n- `subtask`：子任务编号。\n- `N`：树的节点数量。\n- `start`：你的初始位置。\n\n调用 `getLength` 来获得 $\\texttt{01}$ 串的长度。\n\n当你在节点 $i$ 时，调用 `getHint(j)` 来获得当前节点上 $\\texttt{01}$ 串的第 $j$ 位。\n\n可以调用 `goTo` 来尝试移动一步。如果成功，返回值为 `true`；否则返回值为 `false`。\n\n在第二次运行中，禁止调用 `setHint` 和 `setHintLen`。\n\n", "inputFormat": "", "outputFormat": "", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^3$。\n\n令 $Q$ 为 `goTo` 函数返回 `False` 的最大次数，$L$ 为 $l$ 的最大值。超出限制，得 $0$ 分。\n\n| 子任务编号 | $L\\le  $ | $Q\\le$ | 树的形态 | 计分方式 | 得分 |  \n| :--: | :--: |  :--: | :--: |:--: | :--: |\n| $ 1 $    | $ N $  | $2\\,000$ | | I | $21$ | \n| $ 2 $    | $ 20 $  | $2\\,000$ | 菊花图 | I | $8$ | \n| $ 3 $    | $ 20 $ | $2\\,000$ | 链 | I | $19$ |\n| $ 4 $    | $ 316 $  | $32\\, 000$ | | I |$12$ |\n| $ 5 $    | $ 40 $  | $2\\, 000$ | | II | $40$ |\n\n- 菊花图：存在一个度数为 $(N-1)$ 的节点。\n- 链：每个节点度数均不大于 $2$。\n- 计分方式 $\\text{I}$：成功遍历树，得满分；否则得 $0$ 分。\n- 计分方式 $\\text{II}$：成功遍历树的得分为 $\\min(40,60-l)$。\n", "locale": "zh-CN"}}}
{"pid": "P11316", "type": "P", "difficulty": 5, "samples": [["100 23", "171243255"], ["1 1", "0"], ["3 2", "288"], ["300 300", "929890502"]], "limits": {"time": [200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "背包 DP", "组合数学", "排列组合", "容斥原理", "RMI（罗马尼亚）"], "title": "[RMI 2021] 去 M / NoM", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D2T1。$\\texttt{0.2s,0.5G}$。", "description": "\n有 $N$ 个绿色的石子，标号 $1\\sim N$。\n\n有 $N$ 个灰色的石子，标号 $1\\sim N$。\n\n将 $2N$ 个石子任意排成一列，两个相邻石子的距离为 $1$。定义 $\\mathrm{dist}(i)$ 为绿色的上面标有 $i$ 的石子与灰色的上面标有 $i$ 的石子的距离。\n\n给定正整数 $M$。若存在 $1\\le i\\le N$，使得 $M\\mid \\mathrm{dist}(i)$，我们就说这样的排列方式是**不好的**（因为可能会导致 IDE 卡死）。否则我们就说这样的排列方式是**好的**。\n\n求出好的排列方案数，对 $(10^9+7)$ 取模。\n\n两种排列方案相同，当且仅当对应石子颜色和编号都相同。\n\n", "inputFormat": "\n一行两个正整数 $N,M$。\n", "outputFormat": "\n输出一行一个整数，表示方案数对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le M\\le N\\le 2\\, 000$。\n\n\n| 子任务编号 | $N,M\\le  $ |得分 |  \n| :--: | :--: |  :--: |\n| $ 1 $    | $ 5 $  | $9$ |\n| $ 2 $    | $ 100 $  | $12$ |\n| $ 3 $    | $ 300 $  | $13$ |\n| $ 4 $    | $ 900 $  | $18$ |\n| $ 5 $    | $ 2\\, 000$  | $48$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2021] 去 M / NoM", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D2T1。$\\texttt{0.2s,0.5G}$。", "description": "\n有 $N$ 个绿色的石子，标号 $1\\sim N$。\n\n有 $N$ 个灰色的石子，标号 $1\\sim N$。\n\n将 $2N$ 个石子任意排成一列，两个相邻石子的距离为 $1$。定义 $\\mathrm{dist}(i)$ 为绿色的上面标有 $i$ 的石子与灰色的上面标有 $i$ 的石子的距离。\n\n给定正整数 $M$。若存在 $1\\le i\\le N$，使得 $M\\mid \\mathrm{dist}(i)$，我们就说这样的排列方式是**不好的**（因为可能会导致 IDE 卡死）。否则我们就说这样的排列方式是**好的**。\n\n求出好的排列方案数，对 $(10^9+7)$ 取模。\n\n两种排列方案相同，当且仅当对应石子颜色和编号都相同。\n\n", "inputFormat": "\n一行两个正整数 $N,M$。\n", "outputFormat": "\n输出一行一个整数，表示方案数对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le M\\le N\\le 2\\, 000$。\n\n\n| 子任务编号 | $N,M\\le  $ |得分 |  \n| :--: | :--: |  :--: |\n| $ 1 $    | $ 5 $  | $9$ |\n| $ 2 $    | $ 100 $  | $12$ |\n| $ 3 $    | $ 300 $  | $13$ |\n| $ 4 $    | $ 900 $  | $18$ |\n| $ 5 $    | $ 2\\, 000$  | $48$ |", "locale": "zh-CN"}}}
{"pid": "P11317", "type": "P", "difficulty": 6, "samples": [["11 3\n1 2 5\n2 3 3\n2 6 5\n3 4 4\n3 5 2\n1 7 6\n7 8 4\n7 9 5\n1 10 1\n10 11 1\n", "28\n28\n28\n32\n30\n32\n28\n32\n32\n29\n30"]], "limits": {"time": [450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "RMI（罗马尼亚）"], "title": "[RMI 2021] 路径 / Paths", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D2T2。$\\texttt{0.3s,0.5G}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9hniafzi.png)", "description": "\n橘猫有一棵树 $T=(V,E)$，边有边权。其中 $|V|=n$。\n\n令 $\\operatorname{path}(u,v)$ 为 $u,v$ 间最短路径上的边集。\n\n对于根节点 $\\mathrm{root}$，定义点集 $V'\\subseteq V$ 的**路径并**为 $\\displaystyle E'(V')=\\bigcup_{u\\in V'} \\operatorname{path}(\\mathrm{root},u)$。在此基础上，定义 $V'$ 的**权值**为 $\\displaystyle \\sum_{(u,v,w)\\in E'(V') } w$，即路径并的边权和。\n\n给定正整数 $k$。定义 $f(u)$ 为：当 $u$ 为根时，在 ${n\\choose k}$ 种选择 $V'\\subseteq V$ 且 $|V'|=k$ 的方案中，$V'$ 权值的最大值。\n\n对于 $u=1,2,\\cdots,n$，橘猫请你帮她求出 $f(u)$ 的值。", "inputFormat": "\n第一行，两个正整数 $n,k$。\n\n接下来 $(n-1)$ 行，每行三个整数 $u,v,w$，表示 $(u,v,w)\\in E$。\n", "outputFormat": "\n输出 $n$ 行，第 $i$ 行一个整数表示 $f(i)$。\n", "hint": "\n#### 样例解释\n\n$u=1$ 时，一种最优方案是选择 $V'=\\{4,6,9\\}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kflft23q.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le k\\le n\\le 10^5$； \n- $0\\le w\\le 10^9$。\n\n\n| 子任务编号 | $n\\le  $ | $k\\le$ |得分 |  \n| :--: | :--: |  :--: | :--: |\n| $ 1 $    | $ 18 $  | $n$ | $8$ |\n| $ 2 $    | $ 200 $  | $20$ | $11$ |\n| $ 3 $    | $ 10^3 $ | $100$ | $17$ |\n| $ 4 $    | $ 2\\times 10^3 $  | $n$ | $20$ |\n| $ 5 $    | $ 10^5 $  | $1$ | $12$ |\n| $ 6 $    | $ 10^5$ | $n$ | $32$ |\n\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2021] 路径 / Paths", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D2T2。$\\texttt{0.3s,0.5G}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9hniafzi.png)", "description": "\n橘猫有一棵树 $T=(V,E)$，边有边权。其中 $|V|=n$。\n\n令 $\\operatorname{path}(u,v)$ 为 $u,v$ 间最短路径上的边集。\n\n对于根节点 $\\mathrm{root}$，定义点集 $V'\\subseteq V$ 的**路径并**为 $\\displaystyle E'(V')=\\bigcup_{u\\in V'} \\operatorname{path}(\\mathrm{root},u)$。在此基础上，定义 $V'$ 的**权值**为 $\\displaystyle \\sum_{(u,v,w)\\in E'(V') } w$，即路径并的边权和。\n\n给定正整数 $k$。定义 $f(u)$ 为：当 $u$ 为根时，在 ${n\\choose k}$ 种选择 $V'\\subseteq V$ 且 $|V'|=k$ 的方案中，$V'$ 权值的最大值。\n\n对于 $u=1,2,\\cdots,n$，橘猫请你帮她求出 $f(u)$ 的值。", "inputFormat": "\n第一行，两个正整数 $n,k$。\n\n接下来 $(n-1)$ 行，每行三个整数 $u,v,w$，表示 $(u,v,w)\\in E$。\n", "outputFormat": "\n输出 $n$ 行，第 $i$ 行一个整数表示 $f(i)$。\n", "hint": "\n#### 样例解释\n\n$u=1$ 时，一种最优方案是选择 $V'=\\{4,6,9\\}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kflft23q.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le k\\le n\\le 10^5$； \n- $0\\le w\\le 10^9$。\n\n\n| 子任务编号 | $n\\le  $ | $k\\le$ |得分 |  \n| :--: | :--: |  :--: | :--: |\n| $ 1 $    | $ 18 $  | $n$ | $8$ |\n| $ 2 $    | $ 200 $  | $20$ | $11$ |\n| $ 3 $    | $ 10^3 $ | $100$ | $17$ |\n| $ 4 $    | $ 2\\times 10^3 $  | $n$ | $20$ |\n| $ 5 $    | $ 10^5 $  | $1$ | $12$ |\n| $ 6 $    | $ 10^5$ | $n$ | $32$ |\n\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11318", "type": "P", "difficulty": 6, "samples": [["6 10\n1 2 3 1 2 3\n1 1 6 3\n3 1 6\n1 1 3 3\n3 1 6\n1 1 3 1000\n3 1 6\n2 1 1000\n3 1 6\n1 1 3 999\n3 1 5", "9\n6\n5\n1005\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["暴力数据结构", "2021", "交互题", "均摊分析", "吉司机线段树 segment tree beats", "RMI（罗马尼亚）"], "title": "[RMI 2021] 奇树 / Weirdtree", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D2T3。$\\texttt{1s,0.5G}$。\n\n提交时，需要在文件头添加\n\n```cpp\nvoid initialise(int N, int Q, int h[]);\nvoid cut(int l, int r, int k);\nvoid magic(int i, int x);\nlong long int inspect(int l, int r);\n```\n\n请使用 C++17 或更高版本提交。", "description": "\n**这是一道（函数式）交互题。**\n\n你需要维护一个长度为 $N$ 的非负整数序列 $h_1,h_2,\\cdots,h_N$。有三种操作，一共 $Q$ 次：\n\n- 操作 1（砍树）。给定 $l,r,k$。执行 $k$ 次以下操作：\n\t- 若区间 $[l,r]$ 的最大值为 $0$，无事发生；\n    - 否则，将最大值减去 $1$（如果存在多个，取下标最小的一个）。\n    \n    形式化地：\n    - 若 $\\displaystyle \\max_{i\\in [l,r]} \\{h_i\\}=0$，无事发生。\n    - 否则，记 $\\displaystyle x=\\min\\argmax_{i\\in [l,r]}\\{h_i\\}$（换句话说，满足 $x\\in [l,r],h_x=\\max_{i\\in [l,r]}\\{h_i\\}$ 的最小的 $x$）。令 $h_x\\gets h_x-1$。\n- 操作 2（施法）。给定 $x,v$，令 $h_x\\gets v$。\n- 操作 3（查询）。给定 $l,r$，求 $\\displaystyle \\sum_{i\\in [l,r]} h_i$。\n\n\n### 实现细节\n\n你不需要，也不应该实现 `main` 函数。你应当实现以下函数：\n\n```cpp\nvoid initialise(int N, int Q, int h[]);\nvoid cut(int l, int r, int k);\nvoid magic(int i, int x);\nlong long int inspect(int l, int r);\n```\n\n- `initialise` 函数：\n    - 将在最开始被调用恰好一次。\n    - `N`：数组长度。\n    - `Q`：询问次数。\n    - `h[]`：长度为 $(N+1)$ 的数组，`h[i]`（$1\\le i\\le N$）表示数列中的第 $i$ 个数。\n- `cut` 函数：\n    - 见操作 1。\n- `magic` 函数：\n    - 见操作 2。\n- `inspect` 函数：\n    - 见操作 3。\n    - 返回一个整数表示答案。\n\n你可以自由使用全局变量，STL 库等。\n\n为了方便选手本地测试，我们在附件中提供了 $\\texttt{grader.cpp}$。下面的输入输出格式均表示 sample grader 的输入输出格式。\n", "inputFormat": "\n第一行，两个正整数 $N,Q$;\n\n第二行，$N$ 个整数 $h_1,\\cdots,h_N$；\n\n接下来 $Q$ 行，每行若干个整数：第一个整数表示操作类型，接下来若干个数表示参数。", "outputFormat": "\n对于每个操作 3，输出一行表示答案。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le N, Q\\le 3\\times 10^5$；\n- $1\\le i\\le N$；\n- $1\\le l\\le r\\le N$；\n- $0\\le x,k,h_i\\le 10^9$。\n\n\n| 子任务编号 | $N,Q\\le  $ | 特殊性质 |得分 |  \n| :--: | :--: |  :--: | :--: |\n| $ 1 $    | $ 10^3 $  | A | $5$ |\n| $ 2 $    | $ 8\\times 10^4 $  | A | $8$ |\n| $ 3 $    | $ 10^3 $ | B | $8$ |\n| $ 4 $    | $ 3\\times 10^5 $  | B | $19$ |\n| $ 5 $    | $ 3\\times 10^5 $  | C | $10$ |\n| $ 6 $    | $ 8\\times 10^4 $ |  | $21$ |\n| $ 7 $    | $ 3\\times 10^5 $ |  | $29$ |\n\n- 特殊性质 A：$k=1$。\n- 特殊性质 B：没有操作 2。\n- 特殊性质 C：$l=1,r=N$（这对操作 $1,3$ 都有效）。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2021] 奇树 / Weirdtree", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D2T3。$\\texttt{1s,0.5G}$。\n\n提交时，需要在文件头添加\n\n```cpp\nvoid initialise(int N, int Q, int h[]);\nvoid cut(int l, int r, int k);\nvoid magic(int i, int x);\nlong long int inspect(int l, int r);\n```\n\n请使用 C++17 或更高版本提交。", "description": "\n**这是一道（函数式）交互题。**\n\n你需要维护一个长度为 $N$ 的非负整数序列 $h_1,h_2,\\cdots,h_N$。有三种操作，一共 $Q$ 次：\n\n- 操作 1（砍树）。给定 $l,r,k$。执行 $k$ 次以下操作：\n\t- 若区间 $[l,r]$ 的最大值为 $0$，无事发生；\n    - 否则，将最大值减去 $1$（如果存在多个，取下标最小的一个）。\n    \n    形式化地：\n    - 若 $\\displaystyle \\max_{i\\in [l,r]} \\{h_i\\}=0$，无事发生。\n    - 否则，记 $\\displaystyle x=\\min\\argmax_{i\\in [l,r]}\\{h_i\\}$（换句话说，满足 $x\\in [l,r],h_x=\\max_{i\\in [l,r]}\\{h_i\\}$ 的最小的 $x$）。令 $h_x\\gets h_x-1$。\n- 操作 2（施法）。给定 $x,v$，令 $h_x\\gets v$。\n- 操作 3（查询）。给定 $l,r$，求 $\\displaystyle \\sum_{i\\in [l,r]} h_i$。\n\n\n### 实现细节\n\n你不需要，也不应该实现 `main` 函数。你应当实现以下函数：\n\n```cpp\nvoid initialise(int N, int Q, int h[]);\nvoid cut(int l, int r, int k);\nvoid magic(int i, int x);\nlong long int inspect(int l, int r);\n```\n\n- `initialise` 函数：\n    - 将在最开始被调用恰好一次。\n    - `N`：数组长度。\n    - `Q`：询问次数。\n    - `h[]`：长度为 $(N+1)$ 的数组，`h[i]`（$1\\le i\\le N$）表示数列中的第 $i$ 个数。\n- `cut` 函数：\n    - 见操作 1。\n- `magic` 函数：\n    - 见操作 2。\n- `inspect` 函数：\n    - 见操作 3。\n    - 返回一个整数表示答案。\n\n你可以自由使用全局变量，STL 库等。\n\n为了方便选手本地测试，我们在附件中提供了 $\\texttt{grader.cpp}$。下面的输入输出格式均表示 sample grader 的输入输出格式。\n", "inputFormat": "\n第一行，两个正整数 $N,Q$;\n\n第二行，$N$ 个整数 $h_1,\\cdots,h_N$；\n\n接下来 $Q$ 行，每行若干个整数：第一个整数表示操作类型，接下来若干个数表示参数。", "outputFormat": "\n对于每个操作 3，输出一行表示答案。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le N, Q\\le 3\\times 10^5$；\n- $1\\le i\\le N$；\n- $1\\le l\\le r\\le N$；\n- $0\\le x,k,h_i\\le 10^9$。\n\n\n| 子任务编号 | $N,Q\\le  $ | 特殊性质 |得分 |  \n| :--: | :--: |  :--: | :--: |\n| $ 1 $    | $ 10^3 $  | A | $5$ |\n| $ 2 $    | $ 8\\times 10^4 $  | A | $8$ |\n| $ 3 $    | $ 10^3 $ | B | $8$ |\n| $ 4 $    | $ 3\\times 10^5 $  | B | $19$ |\n| $ 5 $    | $ 3\\times 10^5 $  | C | $10$ |\n| $ 6 $    | $ 8\\times 10^4 $ |  | $21$ |\n| $ 7 $    | $ 3\\times 10^5 $ |  | $29$ |\n\n- 特殊性质 A：$k=1$。\n- 特殊性质 B：没有操作 2。\n- 特殊性质 C：$l=1,r=N$（这对操作 $1,3$ 都有效）。\n", "locale": "zh-CN"}}}
{"pid": "P11319", "type": "P", "difficulty": 4, "samples": [["3\n42 100 1", "4"], ["5\n1 5 2 4 3", "20"], ["2\n2 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "树状数组", "离散化", "康托展开", "NOISG（新加坡）"], "title": "[NOISG 2020 Qualification] Cryptography", "background": "Charles 是一位密码学家，他正在研究生成随机数的新方法。他试图通过组合多个随机数源来创建一个密码学安全的伪随机数生成器（CSPRNG）。", "description": "他发明了一种算法，包括以下步骤：\n\n1. 随机生成一个长度为 $N$ 的正整数序列 $S$，其中元素两两不同。\n2. 随机打乱 $S$，得到一个长度为 $N$ 的排列 $P$。\n3. 计算排列 $P$ 的字典序排名。\n4. 输出排名对 $10^9 + 7$ 取模的结果。\n\n排列 $P$ 的字典序排名定义为所有小于等于 $P$ 的排列数量。\n\nCharles 是一位密码学家，但不是程序员。现在，给定排列 $P$，请帮助 Charles 计算其字典序排名，并对 $10^9 + 7$ 取模。", "inputFormat": "第一行包含一个整数 $N$，表示排列的长度。  \n第二行包含 $N$ 个正整数 $P_1, P_2, \\dots, P_N$，表示排列 $P$。", "outputFormat": "输出一个整数，表示排列 $P$ 的字典序排名，对 $10^9 + 7$ 取模。", "hint": "【样例解释】\n\n对于样例 #1，以下是所有排列的字典序：\n\n1. $[1, 42, 100]$ \n2. $[1, 100, 42]$\n3. $[42, 1, 100]$\n4. $[42, 100, 1]$\n5. $[100, 1, 42]$\n6. $[100, 42, 1]$\n\n排列 $[42, 100, 1]$ 的字典序排名为 $4$。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$  \n- $1 \\leq P_i \\leq 10^9$  \n- 对于任意 $i \\neq j$，$P_i \\neq P_j$\n\n| 子任务编号 | 分值       | 限制条件                                              |\n|:--------:|:---------:|:--------------------------------------------------:|\n| $1$      | $5$       | $N = 2$                                              |\n| $2$      | $9$       | $1 \\leq N \\leq 8$                                    |\n| $3$      | $10$      | $P$ 为严格递增或递减                                 |\n| $4$      | $11$      | $P = [k, 1, \\dots, k-1, k+1, \\dots, N]$，$1 \\leq k \\leq N$ |\n| $5$      | $21$      | $1 \\leq N \\leq 3 \\times 10^3, 1 \\leq P_i \\leq N$     |\n| $6$      | $13$      | $1 \\leq N \\leq 3 \\times 10^3$                        |\n| $7$      | $19$      | $1 \\leq P_i \\leq N$                                  |\n| $8$      | $12$      | 无其他特殊限制                                       |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Qualification] Cryptography", "background": "Charles 是一位密码学家，他正在研究生成随机数的新方法。他试图通过组合多个随机数源来创建一个密码学安全的伪随机数生成器（CSPRNG）。", "description": "他发明了一种算法，包括以下步骤：\n\n1. 随机生成一个长度为 $N$ 的正整数序列 $S$，其中元素两两不同。\n2. 随机打乱 $S$，得到一个长度为 $N$ 的排列 $P$。\n3. 计算排列 $P$ 的字典序排名。\n4. 输出排名对 $10^9 + 7$ 取模的结果。\n\n排列 $P$ 的字典序排名定义为所有小于等于 $P$ 的排列数量。\n\nCharles 是一位密码学家，但不是程序员。现在，给定排列 $P$，请帮助 Charles 计算其字典序排名，并对 $10^9 + 7$ 取模。", "inputFormat": "第一行包含一个整数 $N$，表示排列的长度。  \n第二行包含 $N$ 个正整数 $P_1, P_2, \\dots, P_N$，表示排列 $P$。", "outputFormat": "输出一个整数，表示排列 $P$ 的字典序排名，对 $10^9 + 7$ 取模。", "hint": "【样例解释】\n\n对于样例 #1，以下是所有排列的字典序：\n\n1. $[1, 42, 100]$ \n2. $[1, 100, 42]$\n3. $[42, 1, 100]$\n4. $[42, 100, 1]$\n5. $[100, 1, 42]$\n6. $[100, 42, 1]$\n\n排列 $[42, 100, 1]$ 的字典序排名为 $4$。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$  \n- $1 \\leq P_i \\leq 10^9$  \n- 对于任意 $i \\neq j$，$P_i \\neq P_j$\n\n| 子任务编号 | 分值       | 限制条件                                              |\n|:--------:|:---------:|:--------------------------------------------------:|\n| $1$      | $5$       | $N = 2$                                              |\n| $2$      | $9$       | $1 \\leq N \\leq 8$                                    |\n| $3$      | $10$      | $P$ 为严格递增或递减                                 |\n| $4$      | $11$      | $P = [k, 1, \\dots, k-1, k+1, \\dots, N]$，$1 \\leq k \\leq N$ |\n| $5$      | $21$      | $1 \\leq N \\leq 3 \\times 10^3, 1 \\leq P_i \\leq N$     |\n| $6$      | $13$      | $1 \\leq N \\leq 3 \\times 10^3$                        |\n| $7$      | $19$      | $1 \\leq P_i \\leq N$                                  |\n| $8$      | $12$      | 无其他特殊限制                                       |", "locale": "zh-CN"}}}
{"pid": "P11320", "type": "P", "difficulty": 4, "samples": [["1 10\n4 8 6", "4"], ["5 100\n50 30 25\n50 40 25\n25 25 25\n75 20 25\n5 5 25", "20"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "NOISG（新加坡）"], "title": "[NOISG 2020 Qualification] Fuel Station", "background": null, "description": "随着油价的暴跌，企鹅 Pengu 决定去拜访老鼠 Squeaky，距离他的家有 $D$ 公里。\n\nPengu 的车辆从出发时拥有 $F$ 升燃料，每公里消耗 $1$ 升燃料，并且车辆在任何时候都能容纳任意数量的燃料。\n\n在 Pengu 和目的地之间有 $N$ 个加油站，第 $i$ 个加油站距离 Pengu 的家 $X_i$ 公里。  \n在每个加油站，Pengu 只能补充最多 $A_i$ 升燃料（为防止囤积便宜燃料），且只有当初始油量 $F \\leq B_i$ 时才能加油（优先给燃料少的车辆）。注意，这里的 $F$ 是出发时的初始燃料量。\n\nPengu 希望能够以尽可能少的初始燃料 $F$ 完成这次旅行。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $D$，分别表示加油站的数量和目的地的距。 \n- 接下来 $N$ 行，每行包含三个整数 $X_i, A_i, B_i$，表示第 $i$ 个加油站的距离、加油量上限以及加油条件限制。", "outputFormat": "输出一个整数，表示完成这次旅行所需的最小初始燃料 $F$。", "hint": "【样例解释】\n\n对于样例 #1：  \n- 以 $F = 4$ 升燃料出发。  \n- 到达第一个加油站（$X_1 = 4$）时油量剩余 $4 - 4 = 0$ 升。  \n- 加油 $A_1 = 8$ 升，因为 $F \\leq B_1 = 6$，此时油量为 $0 + 8 = 8$ 升。  \n- 到达目的地（$X = 10$）时油量剩余 $8 - (10 - 4) = 2$ 升。  \n\n这是可能的最小初始燃料量。\n\n对于样例 #2：  \n- 以 $F = 20$ 升燃料出发。  \n- 到达第 $5$ 个加油站（$X_5 = 5$）时油量剩余 $20 - 5 = 15$ 升。  \n- 加油 $A_5 = 5$ 升，因为 $F \\leq B_5 = 25$，此时油量为 $15 + 5 = 20$ 升。  \n- 到达第 $3$ 个加油站（$X_3 = 25$）时油量剩余 $20 - (25 - 5) = 0$ 升。  \n- 加油 $A_3 = 25$ 升，因为 $F \\leq B_3 = 25$，此时油量为 $0 + 25 = 25$ 升。  \n- 到达第 $1$ 和第 $2$ 个加油站（$X_1 = X_2 = 50$）时油量剩余 $25 - (50 - 25) = 0$ 升。  \n- 分别加油 $A_1 + A_2 = 70$ 升，此时油量为 $0 + 70 = 70$ 升。  \n- 到达目的地（$X = 100$）时油量剩余 $70 - (100 - 50) = 20$ 升。  \n\n这是可能的最小初始燃料量。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$  \n- $1 \\leq A_i, B_i, D \\leq 10^9$  \n- $0 < X_i < D$\n\n| 子任务编号 | 分值       | 限制条件                      |\n|:--------:|:---------:|:--------------------------:|\n| $1$      | $7$       | $N = 1$                     |\n| $2$      | $13$      | $B_i = 10^9$                |\n| $3$      | $17$      | $1 \\leq D \\leq 10^4, 1 \\leq N \\leq 10^4$ |\n| $4$      | $12$      | $1 \\leq D \\leq 10^4$        |\n| $5$      | $19$      | $1 \\leq N \\leq 16$          |\n| $6$      | $11$      | $1 \\leq N \\leq 10^4$        |\n| $7$      | $21$      | 无其他限制                  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Qualification] Fuel Station", "background": null, "description": "随着油价的暴跌，企鹅 Pengu 决定去拜访老鼠 Squeaky，距离他的家有 $D$ 公里。\n\nPengu 的车辆从出发时拥有 $F$ 升燃料，每公里消耗 $1$ 升燃料，并且车辆在任何时候都能容纳任意数量的燃料。\n\n在 Pengu 和目的地之间有 $N$ 个加油站，第 $i$ 个加油站距离 Pengu 的家 $X_i$ 公里。  \n在每个加油站，Pengu 只能补充最多 $A_i$ 升燃料（为防止囤积便宜燃料），且只有当初始油量 $F \\leq B_i$ 时才能加油（优先给燃料少的车辆）。注意，这里的 $F$ 是出发时的初始燃料量。\n\nPengu 希望能够以尽可能少的初始燃料 $F$ 完成这次旅行。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $D$，分别表示加油站的数量和目的地的距。 \n- 接下来 $N$ 行，每行包含三个整数 $X_i, A_i, B_i$，表示第 $i$ 个加油站的距离、加油量上限以及加油条件限制。", "outputFormat": "输出一个整数，表示完成这次旅行所需的最小初始燃料 $F$。", "hint": "【样例解释】\n\n对于样例 #1：  \n- 以 $F = 4$ 升燃料出发。  \n- 到达第一个加油站（$X_1 = 4$）时油量剩余 $4 - 4 = 0$ 升。  \n- 加油 $A_1 = 8$ 升，因为 $F \\leq B_1 = 6$，此时油量为 $0 + 8 = 8$ 升。  \n- 到达目的地（$X = 10$）时油量剩余 $8 - (10 - 4) = 2$ 升。  \n\n这是可能的最小初始燃料量。\n\n对于样例 #2：  \n- 以 $F = 20$ 升燃料出发。  \n- 到达第 $5$ 个加油站（$X_5 = 5$）时油量剩余 $20 - 5 = 15$ 升。  \n- 加油 $A_5 = 5$ 升，因为 $F \\leq B_5 = 25$，此时油量为 $15 + 5 = 20$ 升。  \n- 到达第 $3$ 个加油站（$X_3 = 25$）时油量剩余 $20 - (25 - 5) = 0$ 升。  \n- 加油 $A_3 = 25$ 升，因为 $F \\leq B_3 = 25$，此时油量为 $0 + 25 = 25$ 升。  \n- 到达第 $1$ 和第 $2$ 个加油站（$X_1 = X_2 = 50$）时油量剩余 $25 - (50 - 25) = 0$ 升。  \n- 分别加油 $A_1 + A_2 = 70$ 升，此时油量为 $0 + 70 = 70$ 升。  \n- 到达目的地（$X = 100$）时油量剩余 $70 - (100 - 50) = 20$ 升。  \n\n这是可能的最小初始燃料量。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$  \n- $1 \\leq A_i, B_i, D \\leq 10^9$  \n- $0 < X_i < D$\n\n| 子任务编号 | 分值       | 限制条件                      |\n|:--------:|:---------:|:--------------------------:|\n| $1$      | $7$       | $N = 1$                     |\n| $2$      | $13$      | $B_i = 10^9$                |\n| $3$      | $17$      | $1 \\leq D \\leq 10^4, 1 \\leq N \\leq 10^4$ |\n| $4$      | $12$      | $1 \\leq D \\leq 10^4$        |\n| $5$      | $19$      | $1 \\leq N \\leq 16$          |\n| $6$      | $11$      | $1 \\leq N \\leq 10^4$        |\n| $7$      | $21$      | 无其他限制                  |", "locale": "zh-CN"}}}
{"pid": "P11321", "type": "P", "difficulty": 5, "samples": [["5 4 4\n1 2 1\n3 4 2\n4 5 5\n5 3 8\n3 1 5 2", "8"], ["6 6 4\n1 2 5\n2 4 7\n4 6 50\n6 5 3\n1 5 15\n3 5 6\n1 5 4 6", "15"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "NOISG（新加坡）"], "title": "[NOISG 2020 Qualification] Relay Marathon", "background": "Nilan 是 Berapur 国家的一位马拉松组织者。他计划在国家内的城市网络中组织一场接力马拉松。", "description": "该国家共有 $N$ 个城市，通过 $M$ 条双向道路连接。每个城市编号为 $1$ 到 $N$，每条道路编号为 $1$ 到 $M$，第 $i$ 条道路连接城市 $u_i$ 和 $v_i$，通行时间为 $w_i$ 秒。道路网络中没有自环或重复边。\n\n在 $N$ 个城市中，有 $K$ 个特殊城市，编号分别为 $A_1, A_2, \\dots, A_K$。\n\n接力马拉松的规则如下：\n1. 两组人分别从两个起始城市 `start1` 和 `start2` 出发；\n2. 第一组人从 `start1` 前往 `finish1`；\n3. 第一组人到达 `finish1` 后，第二组人立即（无延迟）从 `start2` 前往 `finish2`；\n4. 接力马拉松在第二组人到达 `finish2` 时结束。\n\n接力马拉松的有效条件：\n- `start1`、`finish1`、`start2` 和 `finish2` 必须是四个不同的特殊城市。\n\n令 $D(a, b)$ 表示从城市 $a$ 到城市 $b$ 的最短通行时间。如果 $a$ 和 $b$ 之间无路径，则定义 $D(a, b) = \\infty$。\n\n接力马拉松的总耗时定义为：\n\n$$\nD(start1, finish1) + D(start2, finish2)\n$$  \n\n你的任务是找到所有有效的起点和终点组合中，总耗时的最小值。", "inputFormat": "- 第一行包含三个整数 $N, M, K$，分别表示城市数量、道路数量和特殊城市数量。\n- 接下来 $M$ 行，每行包含三个整数 $u_i, v_i, w_i$，表示城市 $u_i$ 和 $v_i$ 之间有一条通行时间为 $w_i$ 秒的道路。\n- 最后一行包含 $K$ 个整数 $A_1, A_2, \\dots, A_K$，表示特殊城市的编号。", "outputFormat": "输出一个整数，表示接力马拉松的最小总耗时。", "hint": "【样例解释】\n\n对于样例 #1：\n- 有效组合为 `start1 = 1, finish1 = 2, start2 = 3, finish2 = 5`；\n- $D(1, 2) = 1$，$D(3, 5) = 7$；\n- 总耗时为 $1 + 7 = 8$。\n\n对于样例 #2：\n- 有效组合为 `start1 = 1, finish1 = 4, start2 = 5, finish2 = 6`；\n- $D(1, 4) = 12$，$D(5, 6) = 3$；\n- 总耗时为 $12 + 3 = 15$。\n\n【数据范围】\n\n- $4 \\leq K \\leq N \\leq 10^5$  \n- $2 \\leq M \\leq \\min \\left( \\frac{N(N-1)}{2}, 3 \\times 10^6 \\right)$  \n- $1 \\leq w_i \\leq 1000$  \n- $1 \\leq u_i \\neq v_i \\leq N$\n\n| 子任务编号 | 分值       | 限制条件                     |\n|:--------:|:---------:|:-------------------------:|\n| $1$      | $5$       | $4 \\leq K \\leq N \\leq 50$  |\n| $2$      | $12$      | $4 \\leq K \\leq N \\leq 500$ |\n| $3$      | $25$      | 城市 $1$ 和城市 $2$ 是特殊城市，直接由一条耗时为 $1$ 秒的道路相连，且城市 $1$ 不与其他城市相连，城市 $2$ 也不与其他城市相连 |\n| $4$      | $58$      | 无额外限制                   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Qualification] Relay Marathon", "background": "Nilan 是 Berapur 国家的一位马拉松组织者。他计划在国家内的城市网络中组织一场接力马拉松。", "description": "该国家共有 $N$ 个城市，通过 $M$ 条双向道路连接。每个城市编号为 $1$ 到 $N$，每条道路编号为 $1$ 到 $M$，第 $i$ 条道路连接城市 $u_i$ 和 $v_i$，通行时间为 $w_i$ 秒。道路网络中没有自环或重复边。\n\n在 $N$ 个城市中，有 $K$ 个特殊城市，编号分别为 $A_1, A_2, \\dots, A_K$。\n\n接力马拉松的规则如下：\n1. 两组人分别从两个起始城市 `start1` 和 `start2` 出发；\n2. 第一组人从 `start1` 前往 `finish1`；\n3. 第一组人到达 `finish1` 后，第二组人立即（无延迟）从 `start2` 前往 `finish2`；\n4. 接力马拉松在第二组人到达 `finish2` 时结束。\n\n接力马拉松的有效条件：\n- `start1`、`finish1`、`start2` 和 `finish2` 必须是四个不同的特殊城市。\n\n令 $D(a, b)$ 表示从城市 $a$ 到城市 $b$ 的最短通行时间。如果 $a$ 和 $b$ 之间无路径，则定义 $D(a, b) = \\infty$。\n\n接力马拉松的总耗时定义为：\n\n$$\nD(start1, finish1) + D(start2, finish2)\n$$  \n\n你的任务是找到所有有效的起点和终点组合中，总耗时的最小值。", "inputFormat": "- 第一行包含三个整数 $N, M, K$，分别表示城市数量、道路数量和特殊城市数量。\n- 接下来 $M$ 行，每行包含三个整数 $u_i, v_i, w_i$，表示城市 $u_i$ 和 $v_i$ 之间有一条通行时间为 $w_i$ 秒的道路。\n- 最后一行包含 $K$ 个整数 $A_1, A_2, \\dots, A_K$，表示特殊城市的编号。", "outputFormat": "输出一个整数，表示接力马拉松的最小总耗时。", "hint": "【样例解释】\n\n对于样例 #1：\n- 有效组合为 `start1 = 1, finish1 = 2, start2 = 3, finish2 = 5`；\n- $D(1, 2) = 1$，$D(3, 5) = 7$；\n- 总耗时为 $1 + 7 = 8$。\n\n对于样例 #2：\n- 有效组合为 `start1 = 1, finish1 = 4, start2 = 5, finish2 = 6`；\n- $D(1, 4) = 12$，$D(5, 6) = 3$；\n- 总耗时为 $12 + 3 = 15$。\n\n【数据范围】\n\n- $4 \\leq K \\leq N \\leq 10^5$  \n- $2 \\leq M \\leq \\min \\left( \\frac{N(N-1)}{2}, 3 \\times 10^6 \\right)$  \n- $1 \\leq w_i \\leq 1000$  \n- $1 \\leq u_i \\neq v_i \\leq N$\n\n| 子任务编号 | 分值       | 限制条件                     |\n|:--------:|:---------:|:-------------------------:|\n| $1$      | $5$       | $4 \\leq K \\leq N \\leq 50$  |\n| $2$      | $12$      | $4 \\leq K \\leq N \\leq 500$ |\n| $3$      | $25$      | 城市 $1$ 和城市 $2$ 是特殊城市，直接由一条耗时为 $1$ 秒的道路相连，且城市 $1$ 不与其他城市相连，城市 $2$ 也不与其他城市相连 |\n| $4$      | $58$      | 无额外限制                   |", "locale": "zh-CN"}}}
{"pid": "P11322", "type": "P", "difficulty": 5, "samples": [["9 4\n1 2 10\n2 3 4\n8 9 4\n8 7 3\n7 3 5\n3 4 1\n4 5 3\n5 6 2", "4\n1 8 3 6"], ["9 26\n2 1 21\n2 9 21\n2 8 21\n2 3 56\n3 4 37\n4 5 29\n7 6 25\n6 4 24", "4\n5 6 2 3"], ["3 18\n1 2 35\n2 3 49", "3\n1 2 3"], ["10 3\n10 9 1\n9 8 1\n8 5 1\n1 2 1\n2 3 1\n5 4 1\n3 4 1\n5 6 1\n6 7 1", "2\n4 10"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "Special Judge", "NOISG（新加坡）"], "title": "[NOISG 2020 Qualification] Firefighting", "background": "在 Mouseopolis，这座鼠国的大都会，一场大火席卷了整座城市。为了防止类似灾难再次发生，鼠国的国王 Squeaky 决定在鼠国的城镇中建立消防站。", "description": "鼠国由 $N$ 个城镇组成，编号为 $1$ 到 $N$。城镇之间通过 $N-1$ 条双向道路连接，每条道路连接两个城镇，并且道路的长度可能不同。城镇网络保证任何两个城镇之间都可以通过某些道路相连。\n\n为了有效扑灭火灾，国王的顾问认为消防站到火灾发生地点的距离不得超过 $K$ 公里，否则火势将难以控制。然而，建设消防站的成本较高，国王希望尽可能减少消防站的数量。\n\n任务是确定在鼠国的哪些城镇建设消防站，以使得需要建设的消防站数量最少。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $K$，分别表示城镇的数量和消防站的最大服务距离。\n- 接下来的 $N-1$ 行，每行包含三个整数 $A_i, B_i, D_i$，表示城镇 $A_i$ 和城镇 $B_i$ 之间有一条长度为 $D_i$ 公里的双向道路。", "outputFormat": "- 第一行包含一个整数 $F$，表示需要建设的最少消防站数量。\n- 第二行包含 $F$ 个整数，表示建设消防站的城镇编号。\n\n可以按任意顺序输出。如果有多种可行方案，输出任意一种即可。", "hint": "【样例解释】\n\n对于样例 #1，最少需要在城镇 $1, 8, 3, 6$ 建立消防站，以保证每个城镇到最近的消防站的距离不超过 $4$ 公里。\n\n对于样例 #2，最少需要在城镇 $5, 6, 2, 3$ 建立消防站。\n\n对于样例 #3，必须在每个城镇建立消防站。\n\n对于样例 #4，可以在城镇 $4$ 和 $10$ 建立消防站，或者选择其他符合条件的方案。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$  \n- $1 \\leq K \\leq 10^{15}$  \n- $1 \\leq A_i, B_i \\leq N$  \n- $1 \\leq D_i \\leq 10^9$\n\n| 子任务编号 | 分值       | 限制条件                      |\n|:--------:|:---------:|:--------------------------:|\n| $1$      | $3$       | $K \\leq 20$，且 $D_i \\geq 30$ |\n| $2$      | $5$       | $N \\leq 17, K \\leq 17$，且 $D_i = 1$ |\n| $3$      | $9$       | $N \\leq 17, K \\leq 10^6$，且 $D_i \\leq 10^4$ |\n| $4$      | $19$      | $K \\leq 30$，且 $D_i \\geq 20$ |\n| $5$      | $26$      | $N \\leq 3 \\times 10^3$     |\n| $6$      | $38$      | 无额外限制                 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Qualification] Firefighting", "background": "在 Mouseopolis，这座鼠国的大都会，一场大火席卷了整座城市。为了防止类似灾难再次发生，鼠国的国王 Squeaky 决定在鼠国的城镇中建立消防站。", "description": "鼠国由 $N$ 个城镇组成，编号为 $1$ 到 $N$。城镇之间通过 $N-1$ 条双向道路连接，每条道路连接两个城镇，并且道路的长度可能不同。城镇网络保证任何两个城镇之间都可以通过某些道路相连。\n\n为了有效扑灭火灾，国王的顾问认为消防站到火灾发生地点的距离不得超过 $K$ 公里，否则火势将难以控制。然而，建设消防站的成本较高，国王希望尽可能减少消防站的数量。\n\n任务是确定在鼠国的哪些城镇建设消防站，以使得需要建设的消防站数量最少。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $K$，分别表示城镇的数量和消防站的最大服务距离。\n- 接下来的 $N-1$ 行，每行包含三个整数 $A_i, B_i, D_i$，表示城镇 $A_i$ 和城镇 $B_i$ 之间有一条长度为 $D_i$ 公里的双向道路。", "outputFormat": "- 第一行包含一个整数 $F$，表示需要建设的最少消防站数量。\n- 第二行包含 $F$ 个整数，表示建设消防站的城镇编号。\n\n可以按任意顺序输出。如果有多种可行方案，输出任意一种即可。", "hint": "【样例解释】\n\n对于样例 #1，最少需要在城镇 $1, 8, 3, 6$ 建立消防站，以保证每个城镇到最近的消防站的距离不超过 $4$ 公里。\n\n对于样例 #2，最少需要在城镇 $5, 6, 2, 3$ 建立消防站。\n\n对于样例 #3，必须在每个城镇建立消防站。\n\n对于样例 #4，可以在城镇 $4$ 和 $10$ 建立消防站，或者选择其他符合条件的方案。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$  \n- $1 \\leq K \\leq 10^{15}$  \n- $1 \\leq A_i, B_i \\leq N$  \n- $1 \\leq D_i \\leq 10^9$\n\n| 子任务编号 | 分值       | 限制条件                      |\n|:--------:|:---------:|:--------------------------:|\n| $1$      | $3$       | $K \\leq 20$，且 $D_i \\geq 30$ |\n| $2$      | $5$       | $N \\leq 17, K \\leq 17$，且 $D_i = 1$ |\n| $3$      | $9$       | $N \\leq 17, K \\leq 10^6$，且 $D_i \\leq 10^4$ |\n| $4$      | $19$      | $K \\leq 30$，且 $D_i \\geq 20$ |\n| $5$      | $26$      | $N \\leq 3 \\times 10^3$     |\n| $6$      | $38$      | 无额外限制                 |", "locale": "zh-CN"}}}
{"pid": "P11323", "type": "P", "difficulty": 4, "samples": [["3\n2\n5 1\n4\n4 4 3 3\n6\n1 1 4 5 1 4", "2\n4\n6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "O2优化", "分类讨论", "梦熊比赛"], "title": "【MX-S7-T1】「SMOI-R2」Happy Card", "background": "原题链接：<https://oier.team/problems/S7A>。", "description": "LLL 在 NOIP 前想愉悦身心，于是设计了一个有趣的纸牌游戏。\n\n该游戏中有 $n$ 种不同的牌，编号为 $1,2,\\dots,n$，第 $i$ 种牌有 $v_i$ 张。\n\n总共有四种出牌方法：\n\n- **单牌**：出一张单牌。\n- **对子**：出两张同种的牌。\n- **炸**：出四张同种的牌。\n- **三带一**：出三张同种的牌和一张不同种的牌。\n\n当出完所有牌后即可获得游戏胜利。\n\nLLL 想知道**最少需要出多少次牌**才能获得游戏胜利，请你帮他求出这个值。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示数据组数。接下来，对于每组数据：\n- 第一行，一个正整数 $n$，表示牌的种类数。\n- 第二行，$n$ 个非负整数 $v_1, \\ldots, v_n$，表示第 $i$ 种牌的数量。", "outputFormat": "对于每组测试数据：\n- 仅一行，一个整数，表示最少需要出多少次牌才能获得游戏胜利。", "hint": "**【样例解释 #1】**\n\n对于第一组数据，可以先出 $1, 1, 1, 2$（**三带一**），再出 $1, 1$（**对子**）。\n\n对于第二组数据，可以用 $4$ 次出完：\n\n- 出 $1, 1, 1, 1$（**炸**）。\n- 出 $2, 2, 2, 2$（**炸**）。\n- 出 $3, 3, 3, 4$（**三带一**）。\n- 出 $4, 4$（**对子**）。\n\n**【样例 #2】**\n\n见附件中的 `card/card2.in` 与 `card/card2.ans`。\n\n该组样例满足测试点 $2\\sim 3$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `card/card3.in` 与 `card/card3.ans`。\n\n该组样例满足测试点 $5\\sim 6$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `card/card4.in` 与 `card/card4.ans`。\n\n该组样例满足测试点 $9\\sim 10$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\le T\\le 10$，$1\\le n\\le3\\times10^5$，$0\\le v_i\\le10^9$。\n\n|测试点编号|$n\\le$|$v_i\\le$|\n|:-:|:-:|:-:|\n|$1$|$2$|$10^9$|\n|$2\\sim 3$|$5$|$5$|\n|$4$|$5$|$10^9$|\n|$5\\sim 6$|$50$|$10^9$|\n|$7$|$3\\times 10^5$|$2$|\n|$8$|$3\\times 10^5$|$3$|\n|$9\\sim 10$|$3\\times 10^5$|$10^9$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S7-T1】「SMOI-R2」Happy Card", "background": "原题链接：<https://oier.team/problems/S7A>。", "description": "LLL 在 NOIP 前想愉悦身心，于是设计了一个有趣的纸牌游戏。\n\n该游戏中有 $n$ 种不同的牌，编号为 $1,2,\\dots,n$，第 $i$ 种牌有 $v_i$ 张。\n\n总共有四种出牌方法：\n\n- **单牌**：出一张单牌。\n- **对子**：出两张同种的牌。\n- **炸**：出四张同种的牌。\n- **三带一**：出三张同种的牌和一张不同种的牌。\n\n当出完所有牌后即可获得游戏胜利。\n\nLLL 想知道**最少需要出多少次牌**才能获得游戏胜利，请你帮他求出这个值。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示数据组数。接下来，对于每组数据：\n- 第一行，一个正整数 $n$，表示牌的种类数。\n- 第二行，$n$ 个非负整数 $v_1, \\ldots, v_n$，表示第 $i$ 种牌的数量。", "outputFormat": "对于每组测试数据：\n- 仅一行，一个整数，表示最少需要出多少次牌才能获得游戏胜利。", "hint": "**【样例解释 #1】**\n\n对于第一组数据，可以先出 $1, 1, 1, 2$（**三带一**），再出 $1, 1$（**对子**）。\n\n对于第二组数据，可以用 $4$ 次出完：\n\n- 出 $1, 1, 1, 1$（**炸**）。\n- 出 $2, 2, 2, 2$（**炸**）。\n- 出 $3, 3, 3, 4$（**三带一**）。\n- 出 $4, 4$（**对子**）。\n\n**【样例 #2】**\n\n见附件中的 `card/card2.in` 与 `card/card2.ans`。\n\n该组样例满足测试点 $2\\sim 3$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `card/card3.in` 与 `card/card3.ans`。\n\n该组样例满足测试点 $5\\sim 6$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `card/card4.in` 与 `card/card4.ans`。\n\n该组样例满足测试点 $9\\sim 10$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\le T\\le 10$，$1\\le n\\le3\\times10^5$，$0\\le v_i\\le10^9$。\n\n|测试点编号|$n\\le$|$v_i\\le$|\n|:-:|:-:|:-:|\n|$1$|$2$|$10^9$|\n|$2\\sim 3$|$5$|$5$|\n|$4$|$5$|$10^9$|\n|$5\\sim 6$|$50$|$10^9$|\n|$7$|$3\\times 10^5$|$2$|\n|$8$|$3\\times 10^5$|$3$|\n|$9\\sim 10$|$3\\times 10^5$|$10^9$|", "locale": "zh-CN"}}}
{"pid": "P11324", "type": "P", "difficulty": 5, "samples": [["4 3\n4 6 2 7\n1 2 5\n2 3 2\n2 4 4\n1 1\n3 4\n3 3", "12\n10\n6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "倍增", "O2优化", "树链剖分", "梦熊比赛"], "title": "【MX-S7-T2】「SMOI-R2」Speaker", "background": "原题链接：<https://oier.team/problems/S7B>。", "description": "M 国有 $n$ 个城市和 $n - 1$ 条双向道路，城市编号为 $1,2,\\dots,n$，**保证这些城市连通**，即**构成了一棵树**。其中，第 $i$ 条道路连接了城市 $u_i$ 和城市 $v_i$，路费为 $w_i$。你是一名演说家，每天都要在 M 国举办三场演讲，每场演讲都会在某一个城市进行。在城市 $i$ 举办一场演讲可以获得 $c_i$ 的收入，**同一天内可以在同一个城市举办多场演讲**。\n\n接下来有 $q$ 天，第 $i$ 天的安排如下：你的第一场演讲必须在城市 $x_i$ 举行，第三场演讲必须在城市 $y_i$ 举行，而第二场演讲所在的城市可以自由选择。设第二场演讲所在的城市为 $z_i$，你需要向交通管理局支付经过 $x_i \\to z_i$ 路径以及 $z_i \\to y_i$ 路径上所有道路的路费。**注意，一条道路如果被多次经过，每次经过都需要支付相应的路费**。\n\n对于每一天，请计算当天可以获得的最大利润，即**总收入减去总路费的最大值**。**注意，答案可能是负数**。", "inputFormat": "第一行，两个正整数 $n,q$。\n\n第二行，$n$ 个非负整数 $c_1,c_2,\\dots,c_n$。\n\n接下来 $n - 1$ 行，每行三个非负整数 $u_i,v_i,w_i$，表示第 $i$ 条道路。\n\n接下来 $q$ 行，每行两个正整数 $x_i,y_i$，表示第 $i$ 天的安排。", "outputFormat": "$q$ 行，每行一个整数，表示第 $i$ 天的最大利润。", "hint": "**【样例解释 #1】**\n\n+ 第一天选择城市 $1$，答案为 $4 + 4 + 4 - 0 - 0 = 12$。\n+ 第二天选择城市 $4$，答案为 $2 + 7 + 7 - 6 - 0 = 10$。\n+ 第三天选择城市 $2$，答案为 $2 + 6 + 2 - 2 - 2 = 6$。\n\n**【样例 #2】**\n\n见附件中的 `speaker/speaker2.in` 与 `speaker/speaker2.ans`。\n\n该组样例满足测试点 $7\\sim 8$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `speaker/speaker3.in` 与 `speaker/speaker3.ans`。\n\n该组样例满足测试点 $11\\sim 13$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `speaker/speaker4.in` 与 `speaker/speaker4.ans`。\n\n该组样例满足测试点 $17\\sim 19$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\le n, q\\le 2\\times 10^5$，$1\\le u_i, v_i \\le n$，$0\\le w_i, c_i\\le 10^9$，所有城市和道路构成了一棵树，$1\\le x_i, y_i \\le n$。\n\n|测试点编号|$n\\le $|$q\\le $|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1\\sim 4$|$400$|$400$|无|\n|$5$|$2000$|$2000$|A|\n|$6$|$2000$|$2000$|B|\n|$7\\sim 8$|$2000$|$2000$|无|\n|$9$|$2000$|$2\\times 10^5$|A|\n|$10$|$2000$|$2\\times 10^5$|C|\n|$11\\sim 13$|$2000$|$2\\times 10^5$|无|\n|$14\\sim 15$|$2\\times 10^5$|$3$|无|\n|$16$|$2\\times 10^5$|$2\\times 10^5$|A|\n|$17\\sim 19$|$2\\times 10^5$|$2\\times 10^5$|C|\n|$20\\sim 25$|$2\\times 10^5$|$2\\times 10^5$|无|\n\n- 特殊性质 A：每个城市至多被两条道路连接。\n- 特殊性质 B：存在一座城市 $i$（$1\\le i\\le n$），满足对于所有其他城市 $j$（$1\\le j\\le n$、$j \\ne i$），都存在连接城市 $i$ 与城市 $j$ 的道路。\n- 特殊性质 C：对所有 $1 \\le i \\le q$，都有 $x_i = 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S7-T2】「SMOI-R2」Speaker", "background": "原题链接：<https://oier.team/problems/S7B>。", "description": "M 国有 $n$ 个城市和 $n - 1$ 条双向道路，城市编号为 $1,2,\\dots,n$，**保证这些城市连通**，即**构成了一棵树**。其中，第 $i$ 条道路连接了城市 $u_i$ 和城市 $v_i$，路费为 $w_i$。你是一名演说家，每天都要在 M 国举办三场演讲，每场演讲都会在某一个城市进行。在城市 $i$ 举办一场演讲可以获得 $c_i$ 的收入，**同一天内可以在同一个城市举办多场演讲**。\n\n接下来有 $q$ 天，第 $i$ 天的安排如下：你的第一场演讲必须在城市 $x_i$ 举行，第三场演讲必须在城市 $y_i$ 举行，而第二场演讲所在的城市可以自由选择。设第二场演讲所在的城市为 $z_i$，你需要向交通管理局支付经过 $x_i \\to z_i$ 路径以及 $z_i \\to y_i$ 路径上所有道路的路费。**注意，一条道路如果被多次经过，每次经过都需要支付相应的路费**。\n\n对于每一天，请计算当天可以获得的最大利润，即**总收入减去总路费的最大值**。**注意，答案可能是负数**。", "inputFormat": "第一行，两个正整数 $n,q$。\n\n第二行，$n$ 个非负整数 $c_1,c_2,\\dots,c_n$。\n\n接下来 $n - 1$ 行，每行三个非负整数 $u_i,v_i,w_i$，表示第 $i$ 条道路。\n\n接下来 $q$ 行，每行两个正整数 $x_i,y_i$，表示第 $i$ 天的安排。", "outputFormat": "$q$ 行，每行一个整数，表示第 $i$ 天的最大利润。", "hint": "**【样例解释 #1】**\n\n+ 第一天选择城市 $1$，答案为 $4 + 4 + 4 - 0 - 0 = 12$。\n+ 第二天选择城市 $4$，答案为 $2 + 7 + 7 - 6 - 0 = 10$。\n+ 第三天选择城市 $2$，答案为 $2 + 6 + 2 - 2 - 2 = 6$。\n\n**【样例 #2】**\n\n见附件中的 `speaker/speaker2.in` 与 `speaker/speaker2.ans`。\n\n该组样例满足测试点 $7\\sim 8$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `speaker/speaker3.in` 与 `speaker/speaker3.ans`。\n\n该组样例满足测试点 $11\\sim 13$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `speaker/speaker4.in` 与 `speaker/speaker4.ans`。\n\n该组样例满足测试点 $17\\sim 19$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\le n, q\\le 2\\times 10^5$，$1\\le u_i, v_i \\le n$，$0\\le w_i, c_i\\le 10^9$，所有城市和道路构成了一棵树，$1\\le x_i, y_i \\le n$。\n\n|测试点编号|$n\\le $|$q\\le $|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1\\sim 4$|$400$|$400$|无|\n|$5$|$2000$|$2000$|A|\n|$6$|$2000$|$2000$|B|\n|$7\\sim 8$|$2000$|$2000$|无|\n|$9$|$2000$|$2\\times 10^5$|A|\n|$10$|$2000$|$2\\times 10^5$|C|\n|$11\\sim 13$|$2000$|$2\\times 10^5$|无|\n|$14\\sim 15$|$2\\times 10^5$|$3$|无|\n|$16$|$2\\times 10^5$|$2\\times 10^5$|A|\n|$17\\sim 19$|$2\\times 10^5$|$2\\times 10^5$|C|\n|$20\\sim 25$|$2\\times 10^5$|$2\\times 10^5$|无|\n\n- 特殊性质 A：每个城市至多被两条道路连接。\n- 特殊性质 B：存在一座城市 $i$（$1\\le i\\le n$），满足对于所有其他城市 $j$（$1\\le j\\le n$、$j \\ne i$），都存在连接城市 $i$ 与城市 $j$ 的道路。\n- 特殊性质 C：对所有 $1 \\le i \\le q$，都有 $x_i = 1$。", "locale": "zh-CN"}}}
{"pid": "P11325", "type": "P", "difficulty": 5, "samples": [["5\n-190 133 210 155 -442\n1 3 2 4 5", "308"], ["10\n-205 -268 -487 -112 -82 -330 153 133 -219 -157\n5 6 7 9 2 1 4 10 3 8", "0"], ["5\n-288 479 205 -310 -66\n1 3 2 4 5", "396"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-S7-T3】「SMOI-R2」Monotonic Queue", "background": "原题链接：<https://oier.team/problems/S7C>。", "description": "给定一个正整数 $n$ 和 $n$ 个整数 $c_1, \\ldots, c_n$（这些数可能为负），以及一个 $1 \\sim n$ 的排列 $(a_1, \\ldots, a_n)$。\n\n为了考验朋友小 L 的能力，你设计了一道这样一道题目：\n\n> 给定 $n$ 个区间 $[l_1, r_1], [l_2, r_2], \\dots, [l_n, r_n]$，它们满足以下条件：  \n> - $1 \\leq l_i \\leq r_i \\leq n$；  \n> - $l_1 \\leq l_2 \\leq \\dots \\leq l_n$；  \n> - $r_1 \\leq r_2 \\leq \\dots \\leq r_n$。  \n>\n> 对于每个区间 $[l_i, r_i]$，小 L 需要求出 $a_{l_i \\sim r_i}$ 中最大值的位置，记为 $b_i$。\n\n小 L 准备使用**单调队列**来高效地完成这个题目。他的算法核心伪代码如下：\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/15a9sbx6.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n\n---\n\n对应的 C++ 实现代码如下：\n\n```cpp\ndeque<int> Q;\nl[0] = r[0] = sum = 0;\nfor (int i = 1; i <= n; i++) {\n    for (int j = r[i - 1] + 1; j <= r[i]; j++) {\n        while (!Q.empty() && a[Q.back()] < a[j]) {\n            sum = sum + c[Q.back()];\n            Q.pop_back();\n        }\n        Q.push_back(j);\n    }\n    while (Q.front() < l[i]) Q.pop_front();\n    b[i] = Q.front();\n}\n```\n\n你发现小 L 一遍就通过了这道题目，但是你突然对 `sum` 的值非常感兴趣。现在你想知道，在所有满足条件的 $n$ 个区间的组合中，算法结束后 `sum` 的最大值是多少。", "inputFormat": "第一行，一个正整数 $n$。\n\n第二行，$n$ 个整数 $c_1, \\ldots, c_n$。\n\n第三行，$n$ 个正整数 $a_1, \\ldots, a_n$，保证 $(a_1, \\ldots, a_n)$ 为 $1 \\sim n$ 的排列。", "outputFormat": "仅一行，一个整数，表示答案。", "hint": "**【样例解释 #1】**\n\n若所有区间都为 $[5,5]$，则算法结束后 `sum` 的值为 $308$。可以证明没有使 `sum` 更大的方案。\n\n**【样例解释 #2】**\n\n若所有区间都为 $[1,1]$，则算法结束后 `sum` 的值为 $0$。可以证明没有使 `sum` 更大的方案。\n\n**【样例解释 #3】**\n\n若 $5$ 个区间分别为 $[2,2]$、$[2,2]$、$[2,4]$、$[2,4]$、$[2,4]$，则算法结束后 `sum` 的值为 $396$。可以证明没有使 `sum` 更大的方案。\n\n**【样例 #4】**\n\n见附件中的 `queue/queue4.in` 与 `queue/queue4.ans`。\n\n该组样例满足测试点 $2\\sim 5$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `queue/queue5.in` 与 `queue/queue5.ans`。\n\n该组样例满足测试点 $8\\sim 12$ 的约束条件。\n\n**【样例 #6】**\n\n见附件中的 `queue/queue6.in` 与 `queue/queue6.ans`。\n\n该组样例满足测试点 $15\\sim 16$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$2\\le n\\le 5\\times 10^5$，$\\lvert c_i \\rvert\\le 10^9$，$1 \\le a_i \\le n$，$(a_1, \\ldots, a_n)$ 为 $1\\sim n$ 的排列。\n\n|测试点编号|$n\\le $|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$6$|无|\n|$2\\sim 5$|$15$|无|\n|$6\\sim 7$|$5\\times 10^5$|A|\n|$8\\sim 12$|$5000$|无|\n|$13\\sim 14$|$2\\times 10^5$|B|\n|$15\\sim 16$|$2\\times 10^5$|C|\n|$17\\sim 19$|$10^5$|无|\n|$20\\sim 25$|$5\\times 10^5$|无|\n\n- 特殊性质 A：满足 $c_i > 0$ 的 $i$ 不超过 $1$ 个。\n- 特殊性质 B：满足 $c_i < 0$ 的 $i$ 不超过 $2$ 个。\n- 特殊性质 C：满足 $c_i < 0$ 的 $i$ 不超过 $10$ 个。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S7-T3】「SMOI-R2」Monotonic Queue", "background": "原题链接：<https://oier.team/problems/S7C>。", "description": "给定一个正整数 $n$ 和 $n$ 个整数 $c_1, \\ldots, c_n$（这些数可能为负），以及一个 $1 \\sim n$ 的排列 $(a_1, \\ldots, a_n)$。\n\n为了考验朋友小 L 的能力，你设计了一道这样一道题目：\n\n> 给定 $n$ 个区间 $[l_1, r_1], [l_2, r_2], \\dots, [l_n, r_n]$，它们满足以下条件：  \n> - $1 \\leq l_i \\leq r_i \\leq n$；  \n> - $l_1 \\leq l_2 \\leq \\dots \\leq l_n$；  \n> - $r_1 \\leq r_2 \\leq \\dots \\leq r_n$。  \n>\n> 对于每个区间 $[l_i, r_i]$，小 L 需要求出 $a_{l_i \\sim r_i}$ 中最大值的位置，记为 $b_i$。\n\n小 L 准备使用**单调队列**来高效地完成这个题目。他的算法核心伪代码如下：\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/15a9sbx6.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n\n---\n\n对应的 C++ 实现代码如下：\n\n```cpp\ndeque<int> Q;\nl[0] = r[0] = sum = 0;\nfor (int i = 1; i <= n; i++) {\n    for (int j = r[i - 1] + 1; j <= r[i]; j++) {\n        while (!Q.empty() && a[Q.back()] < a[j]) {\n            sum = sum + c[Q.back()];\n            Q.pop_back();\n        }\n        Q.push_back(j);\n    }\n    while (Q.front() < l[i]) Q.pop_front();\n    b[i] = Q.front();\n}\n```\n\n你发现小 L 一遍就通过了这道题目，但是你突然对 `sum` 的值非常感兴趣。现在你想知道，在所有满足条件的 $n$ 个区间的组合中，算法结束后 `sum` 的最大值是多少。", "inputFormat": "第一行，一个正整数 $n$。\n\n第二行，$n$ 个整数 $c_1, \\ldots, c_n$。\n\n第三行，$n$ 个正整数 $a_1, \\ldots, a_n$，保证 $(a_1, \\ldots, a_n)$ 为 $1 \\sim n$ 的排列。", "outputFormat": "仅一行，一个整数，表示答案。", "hint": "**【样例解释 #1】**\n\n若所有区间都为 $[5,5]$，则算法结束后 `sum` 的值为 $308$。可以证明没有使 `sum` 更大的方案。\n\n**【样例解释 #2】**\n\n若所有区间都为 $[1,1]$，则算法结束后 `sum` 的值为 $0$。可以证明没有使 `sum` 更大的方案。\n\n**【样例解释 #3】**\n\n若 $5$ 个区间分别为 $[2,2]$、$[2,2]$、$[2,4]$、$[2,4]$、$[2,4]$，则算法结束后 `sum` 的值为 $396$。可以证明没有使 `sum` 更大的方案。\n\n**【样例 #4】**\n\n见附件中的 `queue/queue4.in` 与 `queue/queue4.ans`。\n\n该组样例满足测试点 $2\\sim 5$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `queue/queue5.in` 与 `queue/queue5.ans`。\n\n该组样例满足测试点 $8\\sim 12$ 的约束条件。\n\n**【样例 #6】**\n\n见附件中的 `queue/queue6.in` 与 `queue/queue6.ans`。\n\n该组样例满足测试点 $15\\sim 16$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$2\\le n\\le 5\\times 10^5$，$\\lvert c_i \\rvert\\le 10^9$，$1 \\le a_i \\le n$，$(a_1, \\ldots, a_n)$ 为 $1\\sim n$ 的排列。\n\n|测试点编号|$n\\le $|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$6$|无|\n|$2\\sim 5$|$15$|无|\n|$6\\sim 7$|$5\\times 10^5$|A|\n|$8\\sim 12$|$5000$|无|\n|$13\\sim 14$|$2\\times 10^5$|B|\n|$15\\sim 16$|$2\\times 10^5$|C|\n|$17\\sim 19$|$10^5$|无|\n|$20\\sim 25$|$5\\times 10^5$|无|\n\n- 特殊性质 A：满足 $c_i > 0$ 的 $i$ 不超过 $1$ 个。\n- 特殊性质 B：满足 $c_i < 0$ 的 $i$ 不超过 $2$ 个。\n- 特殊性质 C：满足 $c_i < 0$ 的 $i$ 不超过 $10$ 个。", "locale": "zh-CN"}}}
{"pid": "P11326", "type": "P", "difficulty": 6, "samples": [["5\n3 0\n5 2\n2 0\n4 1\n6 3\n1 0\n2 1\n4 1\n1234 4\n52 1\n110 1\n520 0\n999 1\n114514 0", "3\n12\n32\n27109943\n596672839"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "矩阵乘法", "梦熊比赛"], "title": "【MX-S7-T4】「SMOI-R2」XA-Game", "background": "原题链接：<https://oier.team/problems/S7D>。", "description": "Alice 和 Bob 在玩一个游戏。\n\n初始地，有一个长度为 $n$ 的 01 序列，位置编号为 $1,2,\\dots,n$。双方轮流操作，Alice 先操作。  \n\nAlice 的操作是任意选择序列中位置相邻的两个数，将它们合并为它们的**异或值**（即 C++ 中的 `^` 操作）。  \n\nBob 的操作是任意选择序列中位置相邻的两个数，将它们合并为它们的**与值**（即 C++ 中的 `&` 操作）。  \n\n游戏将持续进行，直至序列中仅剩一个数。如果最后剩下的数是 $1$，Alice 获胜；否则，Bob 获胜。\n\n在游戏开始前，Bob 施展了 $m$ 次魔法调整初始序列，第 $i$ 次魔法将第 $a_i$ 个位置的数改为 $v_i$。\n\nAlice 想知道，如果双方都使用最优策略，有多少种可能的**初始序列**（在 Bob 施展魔法之前）能够让她赢得游戏。由于答案可能非常大，你需要将结果对质数 $10^9 + 7$ 取模。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示数据组数。接下来，对于每组数据：\n- 第一行，两个非负整数 $n, m$，分别表示 01 序列的长度和 Bob 的魔法操作次数。\n- 接下来 $m$ 行，第 $i$ 行两个非负整数 $a_i, v_i$，表示第 $i$ 次魔法操作将第 $a_i$ 个位置的数改为 $v_i$。**保证 $\\boldsymbol{a_i}$ 严格递增给出，即 $\\boldsymbol{1 \\le a_1 < a_2 < \\cdots < a_m \\le n}$。**", "outputFormat": "对于每组测试数据：\n- 仅一行，一个整数，表示答案对 $10^9 + 7$ 取模后的结果。", "hint": "**【样例解释 #1】**\n\n第一组数据中，可以让 Alice 赢的序列有 $110$、$101$、$011$ 共 $3$ 种。\n\n第二组数据中，可以让 Alice 赢的序列有 $10100$、$11100$、$10110$、$11110$、$10001$、$11001$、$00101$、$01101$、$10011$、$11011$、$00111$、$01111$ 共 $12$ 种。\n\n其中序列 $11100$，在 Bob 实施完魔法后变成了 $10110$。Alice 第一次操作可以合并第四个数和第五个数，序列变成 $1011$，可以发现 Bob 无论怎么操作 Alice 都会赢。\n\n**【样例 #2】**\n\n见附件中的 `game/game2.in` 与 `game/game2.ans`。\n\n该组样例满足测试点 $5\\sim6$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `game/game3.in` 与 `game/game3.ans`。\n\n该组样例满足测试点 $10\\sim11$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `game/game4.in` 与 `game/game4.ans`。\n\n该组样例满足测试点 $12\\sim13$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `game/game5.in` 与 `game/game5.ans`。\n\n该组样例满足测试点 $18\\sim20$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\le T\\le5\\times 10^5$，$1\\le n\\le 10^{15}$，$0\\le m\\le n$，$\\sum m \\le5\\times 10^5$，$1\\le a_i\\le n$，$a_i < a_{i + 1}$，$v_i\\in\\{0,1\\}$。\n\n|测试点编号|$T\\le$|$n\\le$|$\\sum m\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$40$|$20$|$40$|无|\n|$2\\sim4$|$10^3$|$5\\times10^2$|$5\\times10^5$|A|\n|$5\\sim6$|$10^3$|$5\\times10^2$|$5\\times10^5$|B|\n|$7\\sim9$|$10^3$|$5\\times10^2$|$5\\times10^5$|C|\n|$10\\sim11$|$2\\times 10^5$|$10^6$|$0$|无|\n|$12\\sim13$|$2\\times 10^5$|$10^6$|$2\\times10^5$|无|\n|$14$|$2\\times 10^3$|$10^{15}$|$0$|无|\n|$15\\sim16$|$2\\times 10^3$|$10^{15}$|$2\\times10^3$|无|\n|$17$|$5\\times 10^5$|$10^{15}$|$0$|无|\n|$18\\sim20$|$5\\times 10^5$|$10^{15}$|$5\\times10^5$|无|\n\n- 特殊性质 A：$n = m$。\n- 特殊性质 B：$n = m$，且 $v_i=1$。\n- 特殊性质 C：$n = m$，且 $v$ 中没有相邻的两个 $0$，即 $v_i + v_{i + 1} \\ne 0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S7-T4】「SMOI-R2」XA-Game", "background": "原题链接：<https://oier.team/problems/S7D>。", "description": "Alice 和 Bob 在玩一个游戏。\n\n初始地，有一个长度为 $n$ 的 01 序列，位置编号为 $1,2,\\dots,n$。双方轮流操作，Alice 先操作。  \n\nAlice 的操作是任意选择序列中位置相邻的两个数，将它们合并为它们的**异或值**（即 C++ 中的 `^` 操作）。  \n\nBob 的操作是任意选择序列中位置相邻的两个数，将它们合并为它们的**与值**（即 C++ 中的 `&` 操作）。  \n\n游戏将持续进行，直至序列中仅剩一个数。如果最后剩下的数是 $1$，Alice 获胜；否则，Bob 获胜。\n\n在游戏开始前，Bob 施展了 $m$ 次魔法调整初始序列，第 $i$ 次魔法将第 $a_i$ 个位置的数改为 $v_i$。\n\nAlice 想知道，如果双方都使用最优策略，有多少种可能的**初始序列**（在 Bob 施展魔法之前）能够让她赢得游戏。由于答案可能非常大，你需要将结果对质数 $10^9 + 7$ 取模。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示数据组数。接下来，对于每组数据：\n- 第一行，两个非负整数 $n, m$，分别表示 01 序列的长度和 Bob 的魔法操作次数。\n- 接下来 $m$ 行，第 $i$ 行两个非负整数 $a_i, v_i$，表示第 $i$ 次魔法操作将第 $a_i$ 个位置的数改为 $v_i$。**保证 $\\boldsymbol{a_i}$ 严格递增给出，即 $\\boldsymbol{1 \\le a_1 < a_2 < \\cdots < a_m \\le n}$。**", "outputFormat": "对于每组测试数据：\n- 仅一行，一个整数，表示答案对 $10^9 + 7$ 取模后的结果。", "hint": "**【样例解释 #1】**\n\n第一组数据中，可以让 Alice 赢的序列有 $110$、$101$、$011$ 共 $3$ 种。\n\n第二组数据中，可以让 Alice 赢的序列有 $10100$、$11100$、$10110$、$11110$、$10001$、$11001$、$00101$、$01101$、$10011$、$11011$、$00111$、$01111$ 共 $12$ 种。\n\n其中序列 $11100$，在 Bob 实施完魔法后变成了 $10110$。Alice 第一次操作可以合并第四个数和第五个数，序列变成 $1011$，可以发现 Bob 无论怎么操作 Alice 都会赢。\n\n**【样例 #2】**\n\n见附件中的 `game/game2.in` 与 `game/game2.ans`。\n\n该组样例满足测试点 $5\\sim6$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `game/game3.in` 与 `game/game3.ans`。\n\n该组样例满足测试点 $10\\sim11$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `game/game4.in` 与 `game/game4.ans`。\n\n该组样例满足测试点 $12\\sim13$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `game/game5.in` 与 `game/game5.ans`。\n\n该组样例满足测试点 $18\\sim20$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\le T\\le5\\times 10^5$，$1\\le n\\le 10^{15}$，$0\\le m\\le n$，$\\sum m \\le5\\times 10^5$，$1\\le a_i\\le n$，$a_i < a_{i + 1}$，$v_i\\in\\{0,1\\}$。\n\n|测试点编号|$T\\le$|$n\\le$|$\\sum m\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$40$|$20$|$40$|无|\n|$2\\sim4$|$10^3$|$5\\times10^2$|$5\\times10^5$|A|\n|$5\\sim6$|$10^3$|$5\\times10^2$|$5\\times10^5$|B|\n|$7\\sim9$|$10^3$|$5\\times10^2$|$5\\times10^5$|C|\n|$10\\sim11$|$2\\times 10^5$|$10^6$|$0$|无|\n|$12\\sim13$|$2\\times 10^5$|$10^6$|$2\\times10^5$|无|\n|$14$|$2\\times 10^3$|$10^{15}$|$0$|无|\n|$15\\sim16$|$2\\times 10^3$|$10^{15}$|$2\\times10^3$|无|\n|$17$|$5\\times 10^5$|$10^{15}$|$0$|无|\n|$18\\sim20$|$5\\times 10^5$|$10^{15}$|$5\\times10^5$|无|\n\n- 特殊性质 A：$n = m$。\n- 特殊性质 B：$n = m$，且 $v_i=1$。\n- 特殊性质 C：$n = m$，且 $v$ 中没有相邻的两个 $0$，即 $v_i + v_{i + 1} \\ne 0$。", "locale": "zh-CN"}}}
{"pid": "P11327", "type": "P", "difficulty": 4, "samples": [["3 2 1\n2\n0 1 100\n1 2 200\n1\n0 10 20 1000 2000 -1", "280"], ["2 0 1\n1\n1\n0 -1 -1 -1 -1 -1", "-1"], ["6 3 2\n4 5\n0 4 100\n1 4 200\n2 5 300\n4\n0 -1 -1 -1 -1 -1\n1 20 40 10 100 4\n2 1 2 3 4 0\n3 0 -1 0 0 0\n", "100\n104\n150\n-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "最短路", "NOISG（新加坡）"], "title": "[NOISG 2022 Finals] Voting Cities", "background": null, "description": "你所在的国家的国家主席 $\\bf{Lord\\ Pooty}$ 将要退休了！他希望选择他的一个儿子作为他的继承人，出于各方面因素的考虑，他决定进行一次投票！他所在的国家中共有 $N$ 个国家，编号从 $0$ 到 $N-1$，其中 $K$ 个城市是可以投票的，第 $i$ 个可以投票的城市编号为 $T_i$。\n\n你认为，投票是你作为公民应该做的义务。于是你决定去某一个能投票的城市参与投票！所有城市之间有 $E$ 条公路，第 $j$ 条公路**单向**从城市 $U_j$ 通往城市 $V_j$，通过这条公路需要交过路税 $C_j$。幸运的是，为了更好的完成投票，国家颁布了一系列过路税优惠政策。\n\n具体的来说，你有 $5$ 种优惠券可以购买，使用第 $x$ 种优惠券通过一条过路税为 $y$ 的公路时，可以减少付 $y \\times (10x)\\%$。但是，由于很多人都想投票，需要使用优惠券，所以每一种优惠券你最多只能买 $1$ 张。\n\n你是个大忙人，你既不知道从哪个城市出发，也不知道每种优惠券的价格。你现在设想了 $Q$ 种情况，包括出发城市 $S$ 和优惠券价格 $P_1,P_2,P_3,P_4$ 和 $P_5$。**在有些情况下某些优惠券甚至已经被抢光了，你不能购买它们，此时这些无法购买的优惠券的价格将被表示为 $-1$。**\n\n现在你需要分别对这 $Q$ 种情况，输出到达某一个投票城市的最小花费。**请注意，你不一定总是能通过公路到达某一个投票城市，如果不能到达，你应该输出 $-1$。**", "inputFormat": "第一行，三个整数 $N,E,K$。\n\n第二行，$K$ 个整数，表示 $T_i$。\n\n接下来 $E$ 行，每行三个整数 $U_j,V_j,C_j$。**保证 $C_j$ 是 $10$ 的倍数。**\n\n接下来一行一个整数 $Q$。\n\n接下来 $Q$ 行，每行 $6$ 个整数 $S,P_1,P_2,P_3,P_4,P_5$。", "outputFormat": "共 $Q$ 行，每行一个整数表示答案。", "hint": "### 【样例 #1 解释】\n\n该样例满足 $\\tt{Subtask\\ 4,5,7,8}$ 的限制。\n\n对于这种情况，最佳方案是在 $1 \\to 2$ 的道路上使用一张 $2$ 类优惠券，在 $0 \\to 1$ 的道路上使用一张 $1$ 类优惠券，花费为 $200 \\times (1 - \\frac{2}{10})+100 \\times (1 - \\frac{1}{10})\\%+10+20=160+90+10+20=280$。\n\n### 【样例 #2 解释】\n\n该样例满足所有 $\\tt{Subtask}$ 的限制。\n\n没有道路可以从出发城市到达一个投票城市，所以输出 $-1$。\n\n### 【样例 #3 解释】\n\n该样例满足 $\\tt{Subtask\\ 7,8}$ 的限制。\n\n---\n\n\n### 【数据范围】\n\n|$\\tt{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$5$|对于所有 $i$，$P_i=-1$。换句话说，没有可用的优惠券。$Q=1,K=1$|\n|$2$|$5$|对于所有 $i$，$P_i=-1$。换句话说，没有可用的优惠券。$K=1$|\n|$3$|$5$|对于所有 $i$，$P_i=-1$。换句话说，没有可用的优惠券。|\n|$4$|$5$|$Q=1,K=1$|\n|$5$|$5$|$K=1$|\n|$6$|$10$|对于每种情况，最多有 $1$ 张优惠券可用。\n|$7$|$15$|$1 \\le N \\le 100,1 \\le E \\le 1000$|\n|$8$|$50$|无|\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5000,0 \\le E \\le 10000,1 \\le Q \\le 100,0 \\le K \\le N,0 \\le T_i < N,1 \\le C_i \\le 10^9,-1 \\le P_i \\le 10^9$，且对于所有 $1 \\le i < j \\le K$，有 $T_i \\not = T_j$；对于所有 $1 \\le i \\le E$，保证 $C_i$ 是 $10$ 的倍数，$0 \\le U_i,V_i < N,U_i\\not=V_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2022 Finals] Voting Cities", "background": null, "description": "你所在的国家的国家主席 $\\bf{Lord\\ Pooty}$ 将要退休了！他希望选择他的一个儿子作为他的继承人，出于各方面因素的考虑，他决定进行一次投票！他所在的国家中共有 $N$ 个国家，编号从 $0$ 到 $N-1$，其中 $K$ 个城市是可以投票的，第 $i$ 个可以投票的城市编号为 $T_i$。\n\n你认为，投票是你作为公民应该做的义务。于是你决定去某一个能投票的城市参与投票！所有城市之间有 $E$ 条公路，第 $j$ 条公路**单向**从城市 $U_j$ 通往城市 $V_j$，通过这条公路需要交过路税 $C_j$。幸运的是，为了更好的完成投票，国家颁布了一系列过路税优惠政策。\n\n具体的来说，你有 $5$ 种优惠券可以购买，使用第 $x$ 种优惠券通过一条过路税为 $y$ 的公路时，可以减少付 $y \\times (10x)\\%$。但是，由于很多人都想投票，需要使用优惠券，所以每一种优惠券你最多只能买 $1$ 张。\n\n你是个大忙人，你既不知道从哪个城市出发，也不知道每种优惠券的价格。你现在设想了 $Q$ 种情况，包括出发城市 $S$ 和优惠券价格 $P_1,P_2,P_3,P_4$ 和 $P_5$。**在有些情况下某些优惠券甚至已经被抢光了，你不能购买它们，此时这些无法购买的优惠券的价格将被表示为 $-1$。**\n\n现在你需要分别对这 $Q$ 种情况，输出到达某一个投票城市的最小花费。**请注意，你不一定总是能通过公路到达某一个投票城市，如果不能到达，你应该输出 $-1$。**", "inputFormat": "第一行，三个整数 $N,E,K$。\n\n第二行，$K$ 个整数，表示 $T_i$。\n\n接下来 $E$ 行，每行三个整数 $U_j,V_j,C_j$。**保证 $C_j$ 是 $10$ 的倍数。**\n\n接下来一行一个整数 $Q$。\n\n接下来 $Q$ 行，每行 $6$ 个整数 $S,P_1,P_2,P_3,P_4,P_5$。", "outputFormat": "共 $Q$ 行，每行一个整数表示答案。", "hint": "### 【样例 #1 解释】\n\n该样例满足 $\\tt{Subtask\\ 4,5,7,8}$ 的限制。\n\n对于这种情况，最佳方案是在 $1 \\to 2$ 的道路上使用一张 $2$ 类优惠券，在 $0 \\to 1$ 的道路上使用一张 $1$ 类优惠券，花费为 $200 \\times (1 - \\frac{2}{10})+100 \\times (1 - \\frac{1}{10})\\%+10+20=160+90+10+20=280$。\n\n### 【样例 #2 解释】\n\n该样例满足所有 $\\tt{Subtask}$ 的限制。\n\n没有道路可以从出发城市到达一个投票城市，所以输出 $-1$。\n\n### 【样例 #3 解释】\n\n该样例满足 $\\tt{Subtask\\ 7,8}$ 的限制。\n\n---\n\n\n### 【数据范围】\n\n|$\\tt{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$5$|对于所有 $i$，$P_i=-1$。换句话说，没有可用的优惠券。$Q=1,K=1$|\n|$2$|$5$|对于所有 $i$，$P_i=-1$。换句话说，没有可用的优惠券。$K=1$|\n|$3$|$5$|对于所有 $i$，$P_i=-1$。换句话说，没有可用的优惠券。|\n|$4$|$5$|$Q=1,K=1$|\n|$5$|$5$|$K=1$|\n|$6$|$10$|对于每种情况，最多有 $1$ 张优惠券可用。\n|$7$|$15$|$1 \\le N \\le 100,1 \\le E \\le 1000$|\n|$8$|$50$|无|\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5000,0 \\le E \\le 10000,1 \\le Q \\le 100,0 \\le K \\le N,0 \\le T_i < N,1 \\le C_i \\le 10^9,-1 \\le P_i \\le 10^9$，且对于所有 $1 \\le i < j \\le K$，有 $T_i \\not = T_j$；对于所有 $1 \\le i \\le E$，保证 $C_i$ 是 $10$ 的倍数，$0 \\le U_i,V_i < N,U_i\\not=V_i$。", "locale": "zh-CN"}}}
{"pid": "P11328", "type": "P", "difficulty": 5, "samples": [["5\n4 6 3 5 2\n10 6 4 8 12\n", "4"], ["5\n3 9 4 2 6\n10 10 10 10 10", "4"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2022", "NOISG（新加坡）", "反悔贪心"], "title": "[NOISG 2022 Finals] Gym Badges", "background": null, "description": "你是一只初始等级为 $0$ 的 $\\text{Wabbit}$。你希望到 $N$ 个比赛中提升自己的实力，并收集这些比赛的徽章。\n\n目前将要举行的比赛共有 $N$ 个。第 $i$ 个比赛可以用 $L_i$ 和 $X_i$ 来描述。如果你的当前等级 $\\le L_i$，那么你可以参加第 $i$ 个比赛，让自己的等级提升 $X_i$ 并获得一个徽章。\n\n你可以以任意顺序参加这些比赛。求出如果按照最佳顺序参加，你最多可以获得多少个徽章。", "inputFormat": "第一行，一个正整数 $N$；\n\n第二行 $N$ 个整数，表示 $X_i$。\n\n第三行 $N$ 个整数，表示 $L_i$。", "outputFormat": "一行一个整数，表示最多能收集到的徽章个数。", "hint": "**【样例 #1 解释】**\n\n一种最优的参加方式为 $3 \\to 4 \\to 1 \\to 5$。\n\n**【样例 #2 解释】**\n\n一种最优的参加方式为 $1 \\to 3 \\to 4 \\to 2$。\n\n**【数据范围】**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$15$|$1\\le N\\le10$|\n|$2$|$9$|所有 $L_i$ 均相等|\n|$3$|$27$|$1\\le N\\le5000$|\n|$4$|$49$|无|\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5 \\times 10 ^ 5, 1 \\le X_i, L_i \\le 10 ^ 9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2022 Finals] Gym Badges", "background": null, "description": "你是一只初始等级为 $0$ 的 $\\text{Wabbit}$。你希望到 $N$ 个比赛中提升自己的实力，并收集这些比赛的徽章。\n\n目前将要举行的比赛共有 $N$ 个。第 $i$ 个比赛可以用 $L_i$ 和 $X_i$ 来描述。如果你的当前等级 $\\le L_i$，那么你可以参加第 $i$ 个比赛，让自己的等级提升 $X_i$ 并获得一个徽章。\n\n你可以以任意顺序参加这些比赛。求出如果按照最佳顺序参加，你最多可以获得多少个徽章。", "inputFormat": "第一行，一个正整数 $N$；\n\n第二行 $N$ 个整数，表示 $X_i$。\n\n第三行 $N$ 个整数，表示 $L_i$。", "outputFormat": "一行一个整数，表示最多能收集到的徽章个数。", "hint": "**【样例 #1 解释】**\n\n一种最优的参加方式为 $3 \\to 4 \\to 1 \\to 5$。\n\n**【样例 #2 解释】**\n\n一种最优的参加方式为 $1 \\to 3 \\to 4 \\to 2$。\n\n**【数据范围】**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$15$|$1\\le N\\le10$|\n|$2$|$9$|所有 $L_i$ 均相等|\n|$3$|$27$|$1\\le N\\le5000$|\n|$4$|$49$|无|\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5 \\times 10 ^ 5, 1 \\le X_i, L_i \\le 10 ^ 9$。", "locale": "zh-CN"}}}
{"pid": "P11329", "type": "P", "difficulty": 5, "samples": [["3\n1 1\n1 6\n1 5\n", "110"], ["6\n1 1\n1 2\n2 1\n2 2\n3 1\n3 2", "110011"], ["8\n1 13\n2 13\n7 27\n7 13\n7 2\n2 27\n7 4\n4 13", "10101101"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2022", "Special Judge", "NOISG（新加坡）"], "title": "[NOISG 2022 Finals] Towers", "background": "### SPJ 已修复。", "description": "兔子 $\\text{Benson}$ 喜欢塔楼。在他的国家中有 $N$ 座城市，其中第 $i$ 座城市在坐标系中的位置为 $(X_i,Y_i)$。**没有两座城市在同一位置。**\n\n$\\text{Benson}$ 希望在这 $N$ 座城市中的一些城市修建塔楼，使得下面的条件全部满足：\n\n- 对于所有的整数 $a$，最多有两座塔楼的 $x$ 坐标为 $a$；\n\n- 对于所有的整数 $b$，最多有两座塔楼的 $y$ 坐标为 $b$；\n\n- 这 $N$ 座城市要么修建了塔楼，要么处在一条与坐标轴平行的线上的两座塔楼中间。换句话说，假设一个城市在 $(x,y)$，如果这座城市没有塔楼，那么需要有两座塔楼在 $(x,c)$ 和 $(x,d)$，其中 $c \\le y \\le d$，或者有两座塔楼在 $(e,y)$ 和 $(f,y)$，使得 $e \\le x \\le f$。\n\n$\\text{Benson}$ 知道肯定有一种可行的方案，但他不知道这种方案是什么。请你帮他找出符合条件的建造方案。", "inputFormat": "第一行，一个正整数 $N$；\n\n接下来 $N$ 行，每行两个整数 $X_i,Y_i$。", "outputFormat": "一行一个长度为 $N$ 的 $01$ 串 $A_1A_2\\dots A_n$，表示你的建造方案。$A_i$ 为 $1$ 表示第 $i$ 个城市建塔楼，反之亦然。\n\n**如果有多种可行的方案，你可以输出任意一种。**", "hint": "**【样例 #1 解释】**\n\n在第 1 和第 2 座城市建塔楼，第 3 座城市与他们有相同的 $x$ 坐标，且位于这两座城市之间。\n\n一种不符合要求的建设方法是`111`，它违反了最多有两座塔楼的 $x$ 坐标为 $1$ 的限制。\n\n另一种不符合要求的建设方法是`101`，第 2 座城市尽管与第 1、3 座城市有相同的 $x$ 坐标，但并不位于他们之间的线段上。\n\n**【数据范围】**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$5$|$N\\le3$|\n|$2$|$11$|$N\\le16$|\n|$3$|$7$|$N=ab$，其中 $a$ 和 $b$ 是两个正整数，且对于所有满足 $0 \\le i \\le b-1,1 \\le j \\le a$ 的整数 $i,j$，有 $(X_{ai+j},Y_{ai+j})=(i+1,j)$|\n|$4$|$6$|对于所有整数 $a$，最多有两座城市的 $x$ 坐标为 $a$|\n|$5$|$31$|$N\\le5000$|\n|$6$|$21$|$N\\le100000$|\n|$7$|$19$|无|\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^6, 1 \\le X_i,Y_i \\le 10^6$，保证对于所有 $1 \\le i < j \\le n$ 都有要么 $X_i\\not=X_j$，要么 $Y_i\\not=Y_j$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2022 Finals] Towers", "background": "### SPJ 已修复。", "description": "兔子 $\\text{Benson}$ 喜欢塔楼。在他的国家中有 $N$ 座城市，其中第 $i$ 座城市在坐标系中的位置为 $(X_i,Y_i)$。**没有两座城市在同一位置。**\n\n$\\text{Benson}$ 希望在这 $N$ 座城市中的一些城市修建塔楼，使得下面的条件全部满足：\n\n- 对于所有的整数 $a$，最多有两座塔楼的 $x$ 坐标为 $a$；\n\n- 对于所有的整数 $b$，最多有两座塔楼的 $y$ 坐标为 $b$；\n\n- 这 $N$ 座城市要么修建了塔楼，要么处在一条与坐标轴平行的线上的两座塔楼中间。换句话说，假设一个城市在 $(x,y)$，如果这座城市没有塔楼，那么需要有两座塔楼在 $(x,c)$ 和 $(x,d)$，其中 $c \\le y \\le d$，或者有两座塔楼在 $(e,y)$ 和 $(f,y)$，使得 $e \\le x \\le f$。\n\n$\\text{Benson}$ 知道肯定有一种可行的方案，但他不知道这种方案是什么。请你帮他找出符合条件的建造方案。", "inputFormat": "第一行，一个正整数 $N$；\n\n接下来 $N$ 行，每行两个整数 $X_i,Y_i$。", "outputFormat": "一行一个长度为 $N$ 的 $01$ 串 $A_1A_2\\dots A_n$，表示你的建造方案。$A_i$ 为 $1$ 表示第 $i$ 个城市建塔楼，反之亦然。\n\n**如果有多种可行的方案，你可以输出任意一种。**", "hint": "**【样例 #1 解释】**\n\n在第 1 和第 2 座城市建塔楼，第 3 座城市与他们有相同的 $x$ 坐标，且位于这两座城市之间。\n\n一种不符合要求的建设方法是`111`，它违反了最多有两座塔楼的 $x$ 坐标为 $1$ 的限制。\n\n另一种不符合要求的建设方法是`101`，第 2 座城市尽管与第 1、3 座城市有相同的 $x$ 坐标，但并不位于他们之间的线段上。\n\n**【数据范围】**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$5$|$N\\le3$|\n|$2$|$11$|$N\\le16$|\n|$3$|$7$|$N=ab$，其中 $a$ 和 $b$ 是两个正整数，且对于所有满足 $0 \\le i \\le b-1,1 \\le j \\le a$ 的整数 $i,j$，有 $(X_{ai+j},Y_{ai+j})=(i+1,j)$|\n|$4$|$6$|对于所有整数 $a$，最多有两座城市的 $x$ 坐标为 $a$|\n|$5$|$31$|$N\\le5000$|\n|$6$|$21$|$N\\le100000$|\n|$7$|$19$|无|\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^6, 1 \\le X_i,Y_i \\le 10^6$，保证对于所有 $1 \\le i < j \\le n$ 都有要么 $X_i\\not=X_j$，要么 $Y_i\\not=Y_j$。", "locale": "zh-CN"}}}
{"pid": "P11330", "type": "P", "difficulty": 6, "samples": [["7 11\n1 2 2\n2 3 4\n5 6 1\n5 3 6\n3 7 6\n2 4 9\n2 6\n2 4\n2 7\n1 1\n3 2 3 0\n1 1\n3 6 5 0\n1 1\n3 3 5 0\n3 2 4 0\n1 1\n", "11\n8\n8\n2"], ["6 11\n1 2 3\n1 3 4\n2 4 1\n2 5 4\n3 6 6\n2 3\n1 2\n2 4\n3 1 3 2\n1 1\n2 3\n3 2 1 2\n2 4\n1 3\n2 2\n1 3\n", "7\n2\n-1\n4"], ["7 8\n1 2 2\n2 3 3\n3 6 2\n4 6 1\n5 6 4\n6 7 3\n2 3\n1 4\n2 3\n2 5\n1 1\n3 6 7 4\n1 5\n1 7\n", "3\n11\n0\n8"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2022", "树链剖分", "NOISG（新加坡）"], "title": "[NOISG 2022 Finals] Grapevine", "background": "", "description": "Syrup 有一个巨大的葡萄藤。这个葡萄藤上共有 $N$ 片叶子，用 $1 \\sim N$ 编号；这些叶子之间有 $N-1$ 条藤连接。第 $i$ 条藤连接第 $A_i$ 和第 $B_i$ 片叶子，长度为 $W_i$。换句话说，这些叶子和藤组成了一棵树。没有两个葡萄藤的两端相同，且这些叶子之间都可以相互到达。\n\nSyrup 精通养护葡萄藤。他可以向一个叶子 $j$ **浇水**，使得这里飞速生长。如果这片叶子上还没有葡萄，那么浇完水后会立刻长出；如果已经有葡萄了，那么这个葡萄会因为水分过多而消失。\n\n他也可以选择一条树枝，并**改变它的长度**。因为这个葡萄藤实在太大了，所以他需要站在叶子上，并快速**找到**离它距离最近的一个葡萄。\n\n现在，刚刚经历过暴风雨的葡萄藤上没有葡萄。在这一周内，Syrup 打算进行 $Q$ 次以上操作，他想让你帮他快速回答出他的问题。", "inputFormat": "第一行，两个整数 $N,Q$；\n\n接下来 $N-1$ 行，每行三个整数 $A_i,B_i,W_i$。\n\n接下来 $Q$ 行，表示 $Q$ 个操作：\n\n- `1 q`：现在 Syrup 站在编号为 $q$ 的叶子上，他想找到离它最近的葡萄，请你输出这个最小距离。\n\n- `2 u`：向编号为 $u$ 的叶子浇水。\n\n- `3 a b w`：将第 $a$ 片叶子和第 $b$ 片叶子之间的树枝长度改为 $w$。", "outputFormat": "对于每个 `1` 操作，输出距离的最小值。如果当前没有任何一个葡萄，输出 `-1`。", "hint": "**【数据范围】**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$6$|$N,Q\\le2000$|\n|$2$|$14$|对于所有查询操作，保证 $q=1$|\n|$3$|$15$|整个葡萄藤是一颗完全二叉树，$A_i=\\lfloor\\frac{i+1}{2}\\rfloor,B_i=i+1$|\n|$4$|$15$|在任意时刻整个葡萄藤上都最多只有一个葡萄|\n|$5$|$18$|所有 `2` 操作都在 `1` 和 `3` 操作之前，且对于所有 `3` 操作，$w=0$|\n|$6$|$32$|无|\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 100000,1 \\le Q \\le 100000,1 \\le A_i \\not = B_i \\le N,0 \\le W_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2022 Finals] Grapevine", "background": "", "description": "Syrup 有一个巨大的葡萄藤。这个葡萄藤上共有 $N$ 片叶子，用 $1 \\sim N$ 编号；这些叶子之间有 $N-1$ 条藤连接。第 $i$ 条藤连接第 $A_i$ 和第 $B_i$ 片叶子，长度为 $W_i$。换句话说，这些叶子和藤组成了一棵树。没有两个葡萄藤的两端相同，且这些叶子之间都可以相互到达。\n\nSyrup 精通养护葡萄藤。他可以向一个叶子 $j$ **浇水**，使得这里飞速生长。如果这片叶子上还没有葡萄，那么浇完水后会立刻长出；如果已经有葡萄了，那么这个葡萄会因为水分过多而消失。\n\n他也可以选择一条树枝，并**改变它的长度**。因为这个葡萄藤实在太大了，所以他需要站在叶子上，并快速**找到**离它距离最近的一个葡萄。\n\n现在，刚刚经历过暴风雨的葡萄藤上没有葡萄。在这一周内，Syrup 打算进行 $Q$ 次以上操作，他想让你帮他快速回答出他的问题。", "inputFormat": "第一行，两个整数 $N,Q$；\n\n接下来 $N-1$ 行，每行三个整数 $A_i,B_i,W_i$。\n\n接下来 $Q$ 行，表示 $Q$ 个操作：\n\n- `1 q`：现在 Syrup 站在编号为 $q$ 的叶子上，他想找到离它最近的葡萄，请你输出这个最小距离。\n\n- `2 u`：向编号为 $u$ 的叶子浇水。\n\n- `3 a b w`：将第 $a$ 片叶子和第 $b$ 片叶子之间的树枝长度改为 $w$。", "outputFormat": "对于每个 `1` 操作，输出距离的最小值。如果当前没有任何一个葡萄，输出 `-1`。", "hint": "**【数据范围】**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$6$|$N,Q\\le2000$|\n|$2$|$14$|对于所有查询操作，保证 $q=1$|\n|$3$|$15$|整个葡萄藤是一颗完全二叉树，$A_i=\\lfloor\\frac{i+1}{2}\\rfloor,B_i=i+1$|\n|$4$|$15$|在任意时刻整个葡萄藤上都最多只有一个葡萄|\n|$5$|$18$|所有 `2` 操作都在 `1` 和 `3` 操作之前，且对于所有 `3` 操作，$w=0$|\n|$6$|$32$|无|\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 100000,1 \\le Q \\le 100000,1 \\le A_i \\not = B_i \\le N,0 \\le W_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11331", "type": "P", "difficulty": 7, "samples": [["5\n-1 -1 -1 -1 -1\n1 1 1 1 1", "1 2 3 4 5\n"], ["5\n-1 3 -1 -1 -1\n1 2 2 2 3\n", "3 4 7 9 9"], ["13\n-1 -1 5 6 -1 -1 7 11 -1 -1 10\n-1 -1\n1 1 1 1 1 1 1 1 1 1 1 1 1\n", "1 2 3 4 5 6 6 7 8 9 9 9 9"], ["10\n-1 -1 -1 -1 5 -1 -1 -1 9 -1\n5 11 24 27 35 60 72 81 91 92", "92 173 245 305 305 332 356 367 406 498\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "线段树", "2022", "颜色段均摊（珂朵莉树 ODT）", "NOISG（新加坡）"], "title": "[NOISG 2022 Finals] Fruits", "background": "", "description": "超市里通常有专门的一区卖水果。\n\n兔子 $\\text{Benson}$ 常去的超市一共有 $N$ 个柜台用来卖 $N$ 种水果。柜台编号从 $1 \\sim N$，水果编号从 $1 \\sim N$。第 $i$ 种水果的美味度是 $i$，购买需要花费 $C_i$ 元。**保证对于所有的 $1 \\le i < j \\le N$，有 $C_i \\le C_j$。**\n\n每一个柜台都只买一种水果，每一种水果都有且仅有一个柜台售卖。现在，工作人员规定了每个柜台卖哪一种水果。第 $i$ 个柜台卖第 $A_i$ 种水果。如果 $A_i=-1$，则表示这个柜台还没有确定卖什么。\n\n当所有柜台的水果都摆放好，$\\text{Benson}$ 就会进店抢购。他会按照 $1 \\sim N$ 的顺序去这些柜台。当他到了一个柜台，如果他的购物车里还是空的，或当前柜台水果的美味度大于所有他购物车里的水果，那么他就会购买这种水果，将其放进购物车中。\n\n现在你需要让商店赚到最多的钱。你需要计算怎么来摆放那些 $A_i=-1$ 的柜台使得利润最大化。由于 $\\text{Benson}$ 很赶时间，他可能不会逛完所有柜台，所以你需要对于所有的 $1 \\le k \\le N$ 计算如果 $\\text{Benson}$ 只逛第 $1 \\sim k$ 个柜台，那么这些柜台应该如何摆放最优。", "inputFormat": "第一行，一个正整数 $N$；\n\n第二行 $N$ 个整数，表示 $A_i$；\n\n第三行 $N$ 个整数，表示 $C_i$。", "outputFormat": "一行 $N$ 个整数，第 $k$ 个表示如果 $\\text{Benson}$ 只逛前 $k$ 个柜台且水果按照最优方案摆放，商店可获得的最大钱数。", "hint": "**【数据范围】**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$6$|$N\\le8$|\n|$2$|$5$|对于所有 $1\\le j\\le N$，$A_j=-1$|\n|$3$|$11$|$N\\le200$|\n|$4$|$13$|$N\\le2000$|\n|$5$|$23$|对于所有 $1\\le j\\le N$，$C_j=1$|\n|$6$|$42$|无|\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 400000,1 \\le A_j \\le N$ 或 $A_j=-1,1 \\le C_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2022 Finals] Fruits", "background": "", "description": "超市里通常有专门的一区卖水果。\n\n兔子 $\\text{Benson}$ 常去的超市一共有 $N$ 个柜台用来卖 $N$ 种水果。柜台编号从 $1 \\sim N$，水果编号从 $1 \\sim N$。第 $i$ 种水果的美味度是 $i$，购买需要花费 $C_i$ 元。**保证对于所有的 $1 \\le i < j \\le N$，有 $C_i \\le C_j$。**\n\n每一个柜台都只买一种水果，每一种水果都有且仅有一个柜台售卖。现在，工作人员规定了每个柜台卖哪一种水果。第 $i$ 个柜台卖第 $A_i$ 种水果。如果 $A_i=-1$，则表示这个柜台还没有确定卖什么。\n\n当所有柜台的水果都摆放好，$\\text{Benson}$ 就会进店抢购。他会按照 $1 \\sim N$ 的顺序去这些柜台。当他到了一个柜台，如果他的购物车里还是空的，或当前柜台水果的美味度大于所有他购物车里的水果，那么他就会购买这种水果，将其放进购物车中。\n\n现在你需要让商店赚到最多的钱。你需要计算怎么来摆放那些 $A_i=-1$ 的柜台使得利润最大化。由于 $\\text{Benson}$ 很赶时间，他可能不会逛完所有柜台，所以你需要对于所有的 $1 \\le k \\le N$ 计算如果 $\\text{Benson}$ 只逛第 $1 \\sim k$ 个柜台，那么这些柜台应该如何摆放最优。", "inputFormat": "第一行，一个正整数 $N$；\n\n第二行 $N$ 个整数，表示 $A_i$；\n\n第三行 $N$ 个整数，表示 $C_i$。", "outputFormat": "一行 $N$ 个整数，第 $k$ 个表示如果 $\\text{Benson}$ 只逛前 $k$ 个柜台且水果按照最优方案摆放，商店可获得的最大钱数。", "hint": "**【数据范围】**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$6$|$N\\le8$|\n|$2$|$5$|对于所有 $1\\le j\\le N$，$A_j=-1$|\n|$3$|$11$|$N\\le200$|\n|$4$|$13$|$N\\le2000$|\n|$5$|$23$|对于所有 $1\\le j\\le N$，$C_j=1$|\n|$6$|$42$|无|\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 400000,1 \\le A_j \\le N$ 或 $A_j=-1,1 \\le C_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11332", "type": "P", "difficulty": 2, "samples": [["5\n1 3 -2 1", "1 2 5 3 4"], ["5\n2 2 -3 1", "1 3 5 2 3"], ["2\n0", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "NOISG（新加坡）"], "title": "[NOISG 2020 Finals] Labels", "background": "今天是快递员 Charles 的第一天工作。", "description": "今天是快递员 Charles 的第一天工作。他需要派送 $N$ 个包裹，每个包裹都有一个标签编号，编号范围为 $1$ 到 $N$（不一定唯一）。每天结束时，他需要记录一个长度为 $N$ 的序列 $A$，其中 $A_i$ 是第 $i$ 个派送包裹的标签编号。\n\n为了节省存储空间，Charles 决定使用差分编码记录一个长度为 $N-1$ 的序列 $D$，其中 $D_i = A_{i+1} - A_i$。\n\n完成派送后，Charles 发现他不知道如何从 $D$ 恢复出 $A$。你的任务是帮助他恢复 $A$，或者判断是否无法唯一确定 $A$。", "inputFormat": "- 第一行一个整数 $N$，表示包裹数量。\n- 第二行一个长度为 $N-1$ 的整数序列 $D$，其中 $D_i$ 表示第 $i+1$ 个包裹和第 $i$ 个包裹标签编号的差。", "outputFormat": "- 如果可以唯一恢复 $A$，输出 $N$ 个用空格分隔的整数，表示序列 $A$。  \n- 如果无法唯一恢复 $A$，输出 `-1`。", "hint": "【样例解释】\n\n对于样例 #1，差分序列 $D = [1, 3, -2, 1]$，恢复出的序列为 $A = [1, 2, 5, 3, 4]$，验证如下：\n  - $A_2 - A_1 = 2 - 1 = 1 = D_1$\n  - $A_3 - A_2 = 5 - 2 = 3 = D_2$\n  - $A_4 - A_3 = 3 - 5 = -2 = D_3$\n  - $A_5 - A_4 = 4 - 3 = 1 = D_4$\n\n对于样例 #2，可以唯一恢复 $A = [1, 3, 5, 2, 3]$。\n\n对于样例 #3，差分序列 $D = [0]$，序列可能为 $A = [1, 1]$ 或 $A = [2, 2]$，因此无法唯一恢复，输出 $-1$。\n\n【数据范围】\n\n- $2 \\leq N \\leq 3 \\times 10^5$\n- $1 \\leq A_i \\leq N$\n- $-N < D_i < N$\n\n| 子任务编号 | 分值 | 限制条件          |\n|:---:|:---:|:---:|\n| $1$ | $7$  | $N = 2$          |\n| $2$ | $15$ | $2 \\leq N \\leq 6$ |\n| $3$ | $25$ | $2 \\leq N \\leq 10^3$ |\n| $4$ | $18$ | $-1 \\leq D_i \\leq 1$ |\n| $5$ | $35$ | 无额外限制        |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Finals] Labels", "background": "今天是快递员 Charles 的第一天工作。", "description": "今天是快递员 Charles 的第一天工作。他需要派送 $N$ 个包裹，每个包裹都有一个标签编号，编号范围为 $1$ 到 $N$（不一定唯一）。每天结束时，他需要记录一个长度为 $N$ 的序列 $A$，其中 $A_i$ 是第 $i$ 个派送包裹的标签编号。\n\n为了节省存储空间，Charles 决定使用差分编码记录一个长度为 $N-1$ 的序列 $D$，其中 $D_i = A_{i+1} - A_i$。\n\n完成派送后，Charles 发现他不知道如何从 $D$ 恢复出 $A$。你的任务是帮助他恢复 $A$，或者判断是否无法唯一确定 $A$。", "inputFormat": "- 第一行一个整数 $N$，表示包裹数量。\n- 第二行一个长度为 $N-1$ 的整数序列 $D$，其中 $D_i$ 表示第 $i+1$ 个包裹和第 $i$ 个包裹标签编号的差。", "outputFormat": "- 如果可以唯一恢复 $A$，输出 $N$ 个用空格分隔的整数，表示序列 $A$。  \n- 如果无法唯一恢复 $A$，输出 `-1`。", "hint": "【样例解释】\n\n对于样例 #1，差分序列 $D = [1, 3, -2, 1]$，恢复出的序列为 $A = [1, 2, 5, 3, 4]$，验证如下：\n  - $A_2 - A_1 = 2 - 1 = 1 = D_1$\n  - $A_3 - A_2 = 5 - 2 = 3 = D_2$\n  - $A_4 - A_3 = 3 - 5 = -2 = D_3$\n  - $A_5 - A_4 = 4 - 3 = 1 = D_4$\n\n对于样例 #2，可以唯一恢复 $A = [1, 3, 5, 2, 3]$。\n\n对于样例 #3，差分序列 $D = [0]$，序列可能为 $A = [1, 1]$ 或 $A = [2, 2]$，因此无法唯一恢复，输出 $-1$。\n\n【数据范围】\n\n- $2 \\leq N \\leq 3 \\times 10^5$\n- $1 \\leq A_i \\leq N$\n- $-N < D_i < N$\n\n| 子任务编号 | 分值 | 限制条件          |\n|:---:|:---:|:---:|\n| $1$ | $7$  | $N = 2$          |\n| $2$ | $15$ | $2 \\leq N \\leq 6$ |\n| $3$ | $25$ | $2 \\leq N \\leq 10^3$ |\n| $4$ | $18$ | $-1 \\leq D_i \\leq 1$ |\n| $5$ | $35$ | 无额外限制        |", "locale": "zh-CN"}}}
{"pid": "P11333", "type": "P", "difficulty": 6, "samples": [["5\n1 3 2 6 3", "27"], ["7\n1 1 2 2 2 2 2", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "NOISG（新加坡）"], "title": "[NOISG 2020 Finals] Discharging", "background": "为了成为最强的电力供应者，Pichuu 这只电鼠开启了一项新业务：使用他最爱的技能 Discharge 为顾客充电。由于业务的高效，Pichuu 每天都有许多顾客排队等待充电。", "description": "在某一天，Pichuu 有 $N$ 名顾客等待充电。Pichuu 可以同时为多部手机充电，每部手机的充电功率相同且恒定。然而，不同型号的手机电池容量不同，因此完全充满所需的时间也不同。第 $i$ 部手机需要 $T_i$ 分钟才能完全充满。\n\nPichuu 不会停止充电，直到所有手机都充满电。为了避免顾客等待过久，Pichuu 可以将顾客分成若干连续的组，然后按顺序为每组充电。每组中的顾客必须等待前面的组完成充电后，才能开始充电。\n\n对于第 $k$ 组，组内充电所需的时间为该组中 $T_i$ 的最大值（记为 $M_k$）。第 $i$ 名顾客的总等待时间 $W_i$ 是他所在组及其之前所有组的充电时间之和：\n\n$$\nW_i = \\sum_{n=1}^{G_i} M_n\n$$\n\n其中，$G_i$ 表示第 $i$ 名顾客所属的组编号。\n\nPichuu 希望通过合理分组最小化顾客的总等待时间。你的任务是帮助 Pichuu 计算最小的总等待时间。", "inputFormat": "- 第一行包含一个整数 $N$，表示顾客数量。\n- 第二行包含 $N$ 个整数，第 $i$ 个整数表示第 $i$ 部手机完全充电所需的时间 $T_i$。", "outputFormat": "- 输出一个整数，表示最小的总等待时间。", "hint": "【样例解释】\n\n对于样例 #1：\n- 最优分组为 $(1, 3, 2)$ 和 $(6, 3)$。两组的充电时间分别为 $3$ 和 $6$。  \n- 第一组的等待时间为 $3$（每名顾客），第二组的等待时间为 $3 + 6 = 9$（每名顾客）。  \n- 总等待时间为 $3 + 3 + 3 + 9 + 9 = 27$。\n\n对于样例 #2：\n- 最优分组为一个整体，等待时间为 $2$（每名顾客）。  \n- 总等待时间为 $2 + 2 + 2 + 2 + 2 + 2 + 2 = 14$。\n\n【数据范围】\n\n- $1 \\leq N \\leq 10^6$\n- $1 \\leq T_i \\leq 10^9$\n\n| 子任务编号 | 分值 | 限制条件                     |\n|:---:|:---:|:---:|\n| $1$ | $9$  | $1 \\leq N \\leq 3$              |\n| $2$ | $13$ | $1 \\leq N \\leq 1500$ 且 $T_i$ 非递减。 |\n| $3$ | $25$ | $T_i$ 非递减。                  |\n| $4$ | $11$ | $T_i$ 非递增。                  |\n| $5$ | $14$ | $1 \\leq N \\leq 1500$           |\n| $6$ | $28$ | 无额外限制。                    |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Finals] Discharging", "background": "为了成为最强的电力供应者，Pichuu 这只电鼠开启了一项新业务：使用他最爱的技能 Discharge 为顾客充电。由于业务的高效，Pichuu 每天都有许多顾客排队等待充电。", "description": "在某一天，Pichuu 有 $N$ 名顾客等待充电。Pichuu 可以同时为多部手机充电，每部手机的充电功率相同且恒定。然而，不同型号的手机电池容量不同，因此完全充满所需的时间也不同。第 $i$ 部手机需要 $T_i$ 分钟才能完全充满。\n\nPichuu 不会停止充电，直到所有手机都充满电。为了避免顾客等待过久，Pichuu 可以将顾客分成若干连续的组，然后按顺序为每组充电。每组中的顾客必须等待前面的组完成充电后，才能开始充电。\n\n对于第 $k$ 组，组内充电所需的时间为该组中 $T_i$ 的最大值（记为 $M_k$）。第 $i$ 名顾客的总等待时间 $W_i$ 是他所在组及其之前所有组的充电时间之和：\n\n$$\nW_i = \\sum_{n=1}^{G_i} M_n\n$$\n\n其中，$G_i$ 表示第 $i$ 名顾客所属的组编号。\n\nPichuu 希望通过合理分组最小化顾客的总等待时间。你的任务是帮助 Pichuu 计算最小的总等待时间。", "inputFormat": "- 第一行包含一个整数 $N$，表示顾客数量。\n- 第二行包含 $N$ 个整数，第 $i$ 个整数表示第 $i$ 部手机完全充电所需的时间 $T_i$。", "outputFormat": "- 输出一个整数，表示最小的总等待时间。", "hint": "【样例解释】\n\n对于样例 #1：\n- 最优分组为 $(1, 3, 2)$ 和 $(6, 3)$。两组的充电时间分别为 $3$ 和 $6$。  \n- 第一组的等待时间为 $3$（每名顾客），第二组的等待时间为 $3 + 6 = 9$（每名顾客）。  \n- 总等待时间为 $3 + 3 + 3 + 9 + 9 = 27$。\n\n对于样例 #2：\n- 最优分组为一个整体，等待时间为 $2$（每名顾客）。  \n- 总等待时间为 $2 + 2 + 2 + 2 + 2 + 2 + 2 = 14$。\n\n【数据范围】\n\n- $1 \\leq N \\leq 10^6$\n- $1 \\leq T_i \\leq 10^9$\n\n| 子任务编号 | 分值 | 限制条件                     |\n|:---:|:---:|:---:|\n| $1$ | $9$  | $1 \\leq N \\leq 3$              |\n| $2$ | $13$ | $1 \\leq N \\leq 1500$ 且 $T_i$ 非递减。 |\n| $3$ | $25$ | $T_i$ 非递减。                  |\n| $4$ | $11$ | $T_i$ 非递增。                  |\n| $5$ | $14$ | $1 \\leq N \\leq 1500$           |\n| $6$ | $28$ | 无额外限制。                    |", "locale": "zh-CN"}}}
{"pid": "P11334", "type": "P", "difficulty": 5, "samples": [["10 6\n1 2 3 4 1 2 3 4 5 5\n3 1 10\n1 1 4 -1 -1\n3 1 10\n3 9 10\n2 5 10 -2 -2\n3 1 10", "5\n6\n2\n7"], ["10 5\n1 2 3 4 1 2 3 4 5 5\n3 1 10\n1 1 10 1 2\n3 1 10\n2 1 10 3 4\n3 1 10", "5\n5\n10"], ["10 5\n1 2 3 4 1 2 3 4 5 5\n3 1 4\n3 4 5\n3 2 4\n3 5 9\n3 10 10", "4\n2\n3\n5\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "NOISG（新加坡）"], "title": "[NOISG 2020 Finals] Progression", "background": "Damian 正在开发一款视频游戏！", "description": "该游戏包含 $N$ 个任务，第 $i$ 个任务的初始难度为 $D_i$。为了让玩家感受到难度的渐进性，Damian 对任务难度进行了若干次调整操作。\n\n游戏设计支持两种操作：\n\n1. **补丁操作**：将任务 $L$ 到 $R$ 的难度按公式 $D_i = D_i + S + (i - L) \\times C$ 增加。\n2. **重写操作**：将任务 $L$ 到 $R$ 的难度直接设置为 $D_i = S + (i - L) \\times C$。\n\n为了让游戏更加有趣，Damian 希望找到任务的连续子序列，使它们的难度呈等差数列。玩家可以按顺序或倒序完成任务。任务 $a$ 到 $b$ ($1 \\leq a \\leq b \\leq N$) 构成可玩子段当且仅当对所有 $a \\leq i < b$，满足 $D_{i+1} - D_i = k$（$k$ 为某个整数，可以为负）。单个任务也构成长度为 $1$ 的可玩子段。\n\nDamian 有时需要回答一个查询：找出某一区间内最长的可玩子段长度。你需要帮助 Damian 处理这些查询。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $Q$，分别表示任务的数量和操作与查询的总数。\n- 第二行包含 $N$ 个整数，表示任务的初始难度 $D_1, D_2, \\dots, D_N$。\n- 接下来的 $Q$ 行描述操作或查询：\n  - 若行首为 $1$，接下来为 $L, R, S, C$，表示补丁操作。\n  - 若行首为 $2$，接下来为 $L, R, S, C$，表示重写操作。\n  - 若行首为 $3$，接下来为 $L, R$，表示查询操作。", "outputFormat": "对于每个查询操作，输出一个整数，表示指定区间内最长的可玩子段长度。", "hint": "【样例解释】\n\n对于样例 #1：\n- 第一次查询时，任务 $5$ 到 $9$ 构成最长可玩子段。\n- 第一次补丁操作后，任务难度变为 $[0, 0, 0, 0, 1, 2, 3, 4, 5, 5]$。  \n  第二次查询时，任务 $4$ 到 $9$ 构成最长可玩子段。  \n- 第二次补丁操作后，任务难度变为 $[0, 0, 0, 0, -2, -4, -6, -8, -10, -12]$。  \n  最后一次查询时，任务 $4$ 到 $10$ 构成最长可玩子段。\n\n【数据范围】\n\n- $1 \\leq N, Q \\leq 3 \\times 10^5$\n- $-10^6 \\leq D_i, S, C \\leq 10^6$\n- $1 \\leq L \\leq R \\leq N$\n\n| 子任务编号 | 分值 | 限制条件                     |\n|:---:|:---:|:---:|\n| $1$ | $9$  | $L = 1, R = N$                |\n| $2$ | $15$ | $1 \\leq N, Q \\leq 10^3$       |\n| $3$ | $35$ | 无补丁和重写操作。            |\n| $4$ | $11$ | $L = R$                      |\n| $5$ | $13$ | 无重写操作。                  |\n| $6$ | $17$ | 无额外限制。                  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Finals] Progression", "background": "Damian 正在开发一款视频游戏！", "description": "该游戏包含 $N$ 个任务，第 $i$ 个任务的初始难度为 $D_i$。为了让玩家感受到难度的渐进性，Damian 对任务难度进行了若干次调整操作。\n\n游戏设计支持两种操作：\n\n1. **补丁操作**：将任务 $L$ 到 $R$ 的难度按公式 $D_i = D_i + S + (i - L) \\times C$ 增加。\n2. **重写操作**：将任务 $L$ 到 $R$ 的难度直接设置为 $D_i = S + (i - L) \\times C$。\n\n为了让游戏更加有趣，Damian 希望找到任务的连续子序列，使它们的难度呈等差数列。玩家可以按顺序或倒序完成任务。任务 $a$ 到 $b$ ($1 \\leq a \\leq b \\leq N$) 构成可玩子段当且仅当对所有 $a \\leq i < b$，满足 $D_{i+1} - D_i = k$（$k$ 为某个整数，可以为负）。单个任务也构成长度为 $1$ 的可玩子段。\n\nDamian 有时需要回答一个查询：找出某一区间内最长的可玩子段长度。你需要帮助 Damian 处理这些查询。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $Q$，分别表示任务的数量和操作与查询的总数。\n- 第二行包含 $N$ 个整数，表示任务的初始难度 $D_1, D_2, \\dots, D_N$。\n- 接下来的 $Q$ 行描述操作或查询：\n  - 若行首为 $1$，接下来为 $L, R, S, C$，表示补丁操作。\n  - 若行首为 $2$，接下来为 $L, R, S, C$，表示重写操作。\n  - 若行首为 $3$，接下来为 $L, R$，表示查询操作。", "outputFormat": "对于每个查询操作，输出一个整数，表示指定区间内最长的可玩子段长度。", "hint": "【样例解释】\n\n对于样例 #1：\n- 第一次查询时，任务 $5$ 到 $9$ 构成最长可玩子段。\n- 第一次补丁操作后，任务难度变为 $[0, 0, 0, 0, 1, 2, 3, 4, 5, 5]$。  \n  第二次查询时，任务 $4$ 到 $9$ 构成最长可玩子段。  \n- 第二次补丁操作后，任务难度变为 $[0, 0, 0, 0, -2, -4, -6, -8, -10, -12]$。  \n  最后一次查询时，任务 $4$ 到 $10$ 构成最长可玩子段。\n\n【数据范围】\n\n- $1 \\leq N, Q \\leq 3 \\times 10^5$\n- $-10^6 \\leq D_i, S, C \\leq 10^6$\n- $1 \\leq L \\leq R \\leq N$\n\n| 子任务编号 | 分值 | 限制条件                     |\n|:---:|:---:|:---:|\n| $1$ | $9$  | $L = 1, R = N$                |\n| $2$ | $15$ | $1 \\leq N, Q \\leq 10^3$       |\n| $3$ | $35$ | 无补丁和重写操作。            |\n| $4$ | $11$ | $L = R$                      |\n| $5$ | $13$ | 无重写操作。                  |\n| $6$ | $17$ | 无额外限制。                  |", "locale": "zh-CN"}}}
{"pid": "P11335", "type": "P", "difficulty": 5, "samples": [["6 4\n1 2 3 4\n3 1 2 6", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2020", "Dilworth 定理", "NOISG（新加坡）", "线性 DP"], "title": "[NOISG 2020 Finals] Arcade", "background": "Emily 是一只外星章鱼，她正在玩一个街机游戏。", "description": "游戏机上有 $N$ 个按钮，从左到右编号为 $1$ 到 $N$。游戏的规则是按照时间顺序按下 $M$ 个按钮，每秒按一个按钮。在第 $T_i$ 秒时，需要按下按钮 $A_i$。注意，可能存在 $T_i = T_j$ 且 $A_i = A_j$，即使 $i \\neq j$。\n\nEmily 的每只手可以从任意位置开始游戏，每只手从一个按钮移动到相邻按钮需要正好 $1$ 秒的时间。Emily 的手可以同时移动，按下按钮所需时间为 $0$ 秒。由于外星章鱼拥有无限数量的手，她总是可以获得游戏的最高分。然而，由于 Emily 很懒，她不想使用太多的手。让我们计算完成游戏所需的最少手数 $S$。\n\n你的任务是帮助 Emily 计算完成游戏所需的最少手数 $S$。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $M$，分别表示按钮数量和按键次数。\n- 第二行包含 $M$ 个整数，第 $i$ 个整数表示第 $T_i$ 秒。\n- 第三行包含 $M$ 个整数，第 $i$ 个整数表示需要按下的按钮编号 $A_i$。", "outputFormat": "- 输出一个整数，表示完成游戏所需的最少手数。", "hint": "【样例解释】\n\n对于样例 #1：  \n- 游戏开始时，Emily 的右手在按钮 $3$，左手在按钮 $1$。\n- 接下来的一秒中，右手移动到按钮 $4$，左手按下按钮 $1$。\n- 随后，右手和左手同时移动到按钮 $2$，并分别按下按钮。\n- 最后，右手移动到按钮 $6$ 并按下。\n- 总共需要 $2$ 只手完成任务，因此输出为 $2$。\n\n【数据范围】\n\n- $1 \\leq N \\leq 10^9$\n- $1 \\leq M \\leq 5 \\times 10^5$\n- $1 \\leq A_i \\leq N$\n- $1 \\leq T_i \\leq 10^9$\n\n| 子任务编号 | 分值 | 限制条件                     |\n|:---:|:---:|:---:|\n| $1$ | $7$  | $1 \\leq N, M, T_i \\leq 100$, $1 \\leq S \\leq 2$ |\n| $2$ | $11$ | $1 \\leq N, M, T_i \\leq 100$, $1 \\leq S \\leq 3$ |\n| $3$ | $12$ | $1 \\leq N, M, T_i \\leq 100$, $1 \\leq S \\leq 4$ |\n| $4$ | $21$ | $1 \\leq M \\leq 300$             |\n| $5$ | $14$ | $1 \\leq M \\leq 15,000$         |\n| $6$ | $20$ | $1 \\leq M \\leq 100,000$        |\n| $7$ | $15$ | 无额外限制                     |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Finals] Arcade", "background": "Emily 是一只外星章鱼，她正在玩一个街机游戏。", "description": "游戏机上有 $N$ 个按钮，从左到右编号为 $1$ 到 $N$。游戏的规则是按照时间顺序按下 $M$ 个按钮，每秒按一个按钮。在第 $T_i$ 秒时，需要按下按钮 $A_i$。注意，可能存在 $T_i = T_j$ 且 $A_i = A_j$，即使 $i \\neq j$。\n\nEmily 的每只手可以从任意位置开始游戏，每只手从一个按钮移动到相邻按钮需要正好 $1$ 秒的时间。Emily 的手可以同时移动，按下按钮所需时间为 $0$ 秒。由于外星章鱼拥有无限数量的手，她总是可以获得游戏的最高分。然而，由于 Emily 很懒，她不想使用太多的手。让我们计算完成游戏所需的最少手数 $S$。\n\n你的任务是帮助 Emily 计算完成游戏所需的最少手数 $S$。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $M$，分别表示按钮数量和按键次数。\n- 第二行包含 $M$ 个整数，第 $i$ 个整数表示第 $T_i$ 秒。\n- 第三行包含 $M$ 个整数，第 $i$ 个整数表示需要按下的按钮编号 $A_i$。", "outputFormat": "- 输出一个整数，表示完成游戏所需的最少手数。", "hint": "【样例解释】\n\n对于样例 #1：  \n- 游戏开始时，Emily 的右手在按钮 $3$，左手在按钮 $1$。\n- 接下来的一秒中，右手移动到按钮 $4$，左手按下按钮 $1$。\n- 随后，右手和左手同时移动到按钮 $2$，并分别按下按钮。\n- 最后，右手移动到按钮 $6$ 并按下。\n- 总共需要 $2$ 只手完成任务，因此输出为 $2$。\n\n【数据范围】\n\n- $1 \\leq N \\leq 10^9$\n- $1 \\leq M \\leq 5 \\times 10^5$\n- $1 \\leq A_i \\leq N$\n- $1 \\leq T_i \\leq 10^9$\n\n| 子任务编号 | 分值 | 限制条件                     |\n|:---:|:---:|:---:|\n| $1$ | $7$  | $1 \\leq N, M, T_i \\leq 100$, $1 \\leq S \\leq 2$ |\n| $2$ | $11$ | $1 \\leq N, M, T_i \\leq 100$, $1 \\leq S \\leq 3$ |\n| $3$ | $12$ | $1 \\leq N, M, T_i \\leq 100$, $1 \\leq S \\leq 4$ |\n| $4$ | $21$ | $1 \\leq M \\leq 300$             |\n| $5$ | $14$ | $1 \\leq M \\leq 15,000$         |\n| $6$ | $20$ | $1 \\leq M \\leq 100,000$        |\n| $7$ | $15$ | 无额外限制                     |", "locale": "zh-CN"}}}
{"pid": "P11336", "type": "P", "difficulty": 6, "samples": [["6 8\n5 6 2\n3 1 4\n1 2 2\n6 2 3\n5 3 3\n3 2 1\n4 6 3\n2 4 2", "8"], ["5 6\n1 2 1\n4 3 1\n2 4 1\n3 2 1\n1 3 1\n4 5 1", "3"], ["7 6\n2 1 4\n1 3 3\n4 5 4\n5 7 3\n4 6 2\n1 4 0", "10"], ["5 5\n4 3 3\n1 4 4\n3 1 3\n4 5 2\n2 3 1", "8"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "NOISG（新加坡）"], "title": "[NOISG 2020 Finals] Aesthetic", "background": "", "description": "Syrup 是一只生活在城镇中的乌龟，这个城镇包含 $N$ 个地点和 $M$ 条双向道路。每个地点从 $1$ 到 $N$ 编号，每条道路从 $1$ 到 $M$ 编号。第 $i$ 条道路直接连接地点 $A_i$ 和 $B_i$，长度为 $W_i$，可以双向通行。所有地点通过这些道路直接或间接连通，且没有两条道路共享相同的端点。\n\n城镇的居民根据道路的美观性进行了排序，道路编号越大，美观性越高。现在，居民们计划将一条美观性更高的道路复制到一条美观性更低的道路上。这将使得美观性较低的道路长度增加，同时保留原有道路的其他属性。具体来说，如果道路 $j$ 被复制到道路 $i$，需要满足 $i < j$，且复制后道路 $i$ 的长度变为 $W_i + W_j$。\n\nSyrup 通常从他的家（地点 $N$）前往主广场（地点 $1$）。他希望知道在完成上述项目后，从地点 $1$ 到地点 $N$ 的最短路径长度可能达到的最大值。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $M$，分别表示地点数量和道路数量。\n- 接下来的 $M$ 行中，每行包含三个整数 $A_i, B_i, W_i$，描述一条道路。", "outputFormat": "输出一个整数，表示在完成项目后，从地点 $1$ 到地点 $N$ 的最短路径长度的最大值。", "hint": "【数据范围】\n\n- $3 \\leq N \\leq 300,000$\n- $2 \\leq M \\leq 300,000$\n- $1 \\leq A_i, B_i \\leq N$ 且 $A_i \\neq B_i$\n- $0 \\leq W_i \\leq 10^9$\n\n| 子任务编号 | 分值 | 限制条件                |\n|:---:|:---:|:---:|\n| $1$ | $5$  | $N, M \\leq 100$         |\n| $2$ | $8$  | $N, M \\leq 2000$        |\n| $3$ | $7$  | $M = N - 1$             |\n| $4$ | $15$ | $M = N$                 |\n| $5$ | $16$ | $W_i = 1$               |\n| $6$ | $22$ | $0 \\leq W_i \\leq 10$    |\n| $7$ | $27$ | 无额外限制              |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Finals] Aesthetic", "background": "", "description": "Syrup 是一只生活在城镇中的乌龟，这个城镇包含 $N$ 个地点和 $M$ 条双向道路。每个地点从 $1$ 到 $N$ 编号，每条道路从 $1$ 到 $M$ 编号。第 $i$ 条道路直接连接地点 $A_i$ 和 $B_i$，长度为 $W_i$，可以双向通行。所有地点通过这些道路直接或间接连通，且没有两条道路共享相同的端点。\n\n城镇的居民根据道路的美观性进行了排序，道路编号越大，美观性越高。现在，居民们计划将一条美观性更高的道路复制到一条美观性更低的道路上。这将使得美观性较低的道路长度增加，同时保留原有道路的其他属性。具体来说，如果道路 $j$ 被复制到道路 $i$，需要满足 $i < j$，且复制后道路 $i$ 的长度变为 $W_i + W_j$。\n\nSyrup 通常从他的家（地点 $N$）前往主广场（地点 $1$）。他希望知道在完成上述项目后，从地点 $1$ 到地点 $N$ 的最短路径长度可能达到的最大值。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $M$，分别表示地点数量和道路数量。\n- 接下来的 $M$ 行中，每行包含三个整数 $A_i, B_i, W_i$，描述一条道路。", "outputFormat": "输出一个整数，表示在完成项目后，从地点 $1$ 到地点 $N$ 的最短路径长度的最大值。", "hint": "【数据范围】\n\n- $3 \\leq N \\leq 300,000$\n- $2 \\leq M \\leq 300,000$\n- $1 \\leq A_i, B_i \\leq N$ 且 $A_i \\neq B_i$\n- $0 \\leq W_i \\leq 10^9$\n\n| 子任务编号 | 分值 | 限制条件                |\n|:---:|:---:|:---:|\n| $1$ | $5$  | $N, M \\leq 100$         |\n| $2$ | $8$  | $N, M \\leq 2000$        |\n| $3$ | $7$  | $M = N - 1$             |\n| $4$ | $15$ | $M = N$                 |\n| $5$ | $16$ | $W_i = 1$               |\n| $6$ | $22$ | $0 \\leq W_i \\leq 10$    |\n| $7$ | $27$ | 无额外限制              |", "locale": "zh-CN"}}}
{"pid": "P11337", "type": "P", "difficulty": 6, "samples": [["3\n5\n1 2 2 2 3\n2 1 3 3 2\n2 3 1 3 4\n2 3 3 1 3\n3 2 4 3 1", "1 2 3 4 4\n1 2\n1 3\n1 4\n2 5"], ["2\n4\n1 2 3 3\n2 1 2 2\n3 2 1 2\n3 2 2 1", "1 2 3 2\n1 2\n2 3\n3 4"], ["1\n5\n1 2 2 2 2\n2 1 1 2 2\n2 1 1 2 2\n2 2 2 1 2\n2 2 2 2 1", "1 2 2 1 2\n1 2\n2 3\n2 4\n1 5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "Special Judge", "COI（克罗地亚）"], "title": "[COI 2019] IZLET", "background": "", "description": "**译自 [COI 2019](https://hsin.hr/coci/archive/2018_2019/) T1「[IZLET](https://hsin.hr/coci/archive/2018_2019/olympiad_tasks.pdf)」**\n\nNikola 在观察一棵树。这是一颗 $N$ 个节点的树，每个节点有一个颜色，颜色在 $1$ 到 $N$ 之间。Nikola 记录下了这样一个 $N \\times N$ 的矩阵：\n\n矩阵的第 $i$ 行第 $j$ 列表示，节点 $i$ 到节点 $j$ 的路径上总共出现的颜色的数量。\n\n现在 Nikola 只记得这个矩阵，而忘记了树的具体信息！现在他把这个矩阵告诉你，请你找出一棵树并且给每个节点标上颜色，使得符合矩阵记录的信息。\n\nNikola 的记录和记忆都是正确的，所以你至少能找出一种合法的方案。\n", "inputFormat": "第一行输入一个正整数 $T$ 表示数据类型。\n\n第二行输入一个正整数 $N$ 表示节点数。\n\n接下来输入共 $N$ 行，每行 $N$ 个正整数，即输入 Nikola 记录下的矩阵。\n", "outputFormat": "第一行输出 $N$ 个正整数，表示每个节点的颜色。\n\n接下来输出 $N - 1$ 行，每行两个正整数 $A,B$ 表示节点 $A,B$ 间有一条边。\n", "hint": "对于 $100\\%$ 的数据，保证 $1\\le N\\le 3000$。\n\n| 子任务编号 $T$ | 分值 | 特殊性质 |\n|:-:|:-:|:-:|\n| $1$ | $18$ | 矩阵中的数均不超过 $2$ |\n| $2$ | $25$ | 存在一组解使得树的结构是一条链，每个节点 $i(1\\le i<n)$ 与 $i+1$ 间有一条边 |\n| $3$ | $57$ | |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2019] IZLET", "background": "", "description": "**译自 [COI 2019](https://hsin.hr/coci/archive/2018_2019/) T1「[IZLET](https://hsin.hr/coci/archive/2018_2019/olympiad_tasks.pdf)」**\n\nNikola 在观察一棵树。这是一颗 $N$ 个节点的树，每个节点有一个颜色，颜色在 $1$ 到 $N$ 之间。Nikola 记录下了这样一个 $N \\times N$ 的矩阵：\n\n矩阵的第 $i$ 行第 $j$ 列表示，节点 $i$ 到节点 $j$ 的路径上总共出现的颜色的数量。\n\n现在 Nikola 只记得这个矩阵，而忘记了树的具体信息！现在他把这个矩阵告诉你，请你找出一棵树并且给每个节点标上颜色，使得符合矩阵记录的信息。\n\nNikola 的记录和记忆都是正确的，所以你至少能找出一种合法的方案。\n", "inputFormat": "第一行输入一个正整数 $T$ 表示数据类型。\n\n第二行输入一个正整数 $N$ 表示节点数。\n\n接下来输入共 $N$ 行，每行 $N$ 个正整数，即输入 Nikola 记录下的矩阵。\n", "outputFormat": "第一行输出 $N$ 个正整数，表示每个节点的颜色。\n\n接下来输出 $N - 1$ 行，每行两个正整数 $A,B$ 表示节点 $A,B$ 间有一条边。\n", "hint": "对于 $100\\%$ 的数据，保证 $1\\le N\\le 3000$。\n\n| 子任务编号 $T$ | 分值 | 特殊性质 |\n|:-:|:-:|:-:|\n| $1$ | $18$ | 矩阵中的数均不超过 $2$ |\n| $2$ | $25$ | 存在一组解使得树的结构是一条链，每个节点 $i(1\\le i<n)$ 与 $i+1$ 间有一条边 |\n| $3$ | $57$ | |\n", "locale": "zh-CN"}}}
{"pid": "P11338", "type": "P", "difficulty": 5, "samples": [["3 0\nLR\n101\n110", "11"], ["4 2\nLRR\n1010\n1110", "37"], ["5 2\nRLLR\n10010\n10111", "82"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "COI（克罗地亚）"], "title": "[COI 2019] LJEPOTICA", "background": "", "description": "**译自 [COI 2019](https://hsin.hr/coci/archive/2018_2019/) T2「[LJEPOTICA](https://hsin.hr/coci/archive/2018_2019/olympiad_tasks.pdf)」**\n\n*[Beauty and the Geek](https://www.imdb.com/title/tt0460625/?ref_=tt_sims_tt)* 是一档电视真人秀节目。这档节目旨在将美女和男性极客联系起来，达到「终极社会实验」的目的。这道题旨在将电视节目和编程竞赛联系起来，达到出一道有趣的题的目的。\n\n我们的主人公是小姐姐 Ena，她现在被困在一棵深度为 $N$ 的完全二叉树中。树上每一个节点都有一个值：根节点的值为 $1$，对于每个值为 $x$ 的节点，其左儿子的值为 $2x$，右儿子的值为 $2x+1$。Ena 可以从一个节点出发到它的某个儿子去，她要前往位于某一个叶子节点的出口（叶子节点指深度为 $N$ 且没有儿子的节点）。\n\nEna 确切地知道一条从根节点到出口叶子节点的路径，更确切地说，她知道一个正确的长为 $N-1$ 的移动序列，每一项为「左」或「右」，它可以引导 Ena 从根节点走到出口处。遗憾的是，Ena 分不清左右。因此，在她前往出口的途中，她恰好改变了 $K$ 次「左」和「右」表示的方向。在她改变主意后，她会保持她认为的左右方向一直走到一个叶子节点或下一次改变主意。Ena 只能在移动之前改变主意（包括第一个节点）一次。并且，没人知道 Ena 在进入根节点的时候她认为的左右是否是正确的方向。\n\n节目制作人将拯救迷路的 Ena。但是需要你，Ena 的极客同伴，正确回答如下问题：只考虑值在 $A$ 到 $B$（包括两端）中的叶子节点，Ena 结束移动的叶子节点值的和是多少。", "inputFormat": "第一行两个整数 $N,K$，意义如题目描述；\n\n接下来一行包含一个长为 $N-1$ 的字符串，只包含字母 `L` 和 `R`，表示从根到有出口的叶子节点的一条路径；\n\n第三行一个 $01$ 串，为 $A$ 的二进制表示，无前导 $0$，意义如题目描述；\n\n第四行一个 $01$ 串，为 $B$ 的二进制表示，无前导 $0$，意义如题目描述。", "outputFormat": "输出所求的和对 $10^9+7$ 取模后的值。", "hint": "### 样例 1 解释\n\nEna 不会改变她对左右方向的认识，但是我们不知道她在进入根节点之前认识到的左右方向是否正确。因此她可能按照正确的左右方向先左后右走到节点 $5$，也可能先右后左走到节点 $6$，两个叶子节点分别为 $A$ 和 $B$，因此答案为 $5+6=11$。\n\n### 样例 2 解释\n\nEna 经过路径的可能（按正确的左右方向）：\n- $\\{\\texttt{L, L, L}\\}$；\n- $\\{\\texttt{L, L, R}\\}$；\n- $\\{\\texttt{L, R, L}\\}$；\n- $\\{\\texttt{R, L, R}\\}$；\n- $\\{\\texttt{R, R, L}\\}$；\n- $\\{\\texttt{R, R, R}\\}$。\n\n### 数据范围 \n\n对于全部数据，$2\\le N\\le 10^3,0\\le K\\le N-1$。保证 Ena 可以到达值为 $A$ 和 $B$ 的两个叶子节点。\n\n详细子任务附加限制及分值如下表：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$K=0$|$8$|\n|$2$|$N\\le 25$|$14$|\n|$3$|$A$ 是 Ena 可能结束的叶子节点最小值，$B$ 是可能的最大值|$17$|\n|$4$|无附加限制|$61$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2019] LJEPOTICA", "background": "", "description": "**译自 [COI 2019](https://hsin.hr/coci/archive/2018_2019/) T2「[LJEPOTICA](https://hsin.hr/coci/archive/2018_2019/olympiad_tasks.pdf)」**\n\n*[Beauty and the Geek](https://www.imdb.com/title/tt0460625/?ref_=tt_sims_tt)* 是一档电视真人秀节目。这档节目旨在将美女和男性极客联系起来，达到「终极社会实验」的目的。这道题旨在将电视节目和编程竞赛联系起来，达到出一道有趣的题的目的。\n\n我们的主人公是小姐姐 Ena，她现在被困在一棵深度为 $N$ 的完全二叉树中。树上每一个节点都有一个值：根节点的值为 $1$，对于每个值为 $x$ 的节点，其左儿子的值为 $2x$，右儿子的值为 $2x+1$。Ena 可以从一个节点出发到它的某个儿子去，她要前往位于某一个叶子节点的出口（叶子节点指深度为 $N$ 且没有儿子的节点）。\n\nEna 确切地知道一条从根节点到出口叶子节点的路径，更确切地说，她知道一个正确的长为 $N-1$ 的移动序列，每一项为「左」或「右」，它可以引导 Ena 从根节点走到出口处。遗憾的是，Ena 分不清左右。因此，在她前往出口的途中，她恰好改变了 $K$ 次「左」和「右」表示的方向。在她改变主意后，她会保持她认为的左右方向一直走到一个叶子节点或下一次改变主意。Ena 只能在移动之前改变主意（包括第一个节点）一次。并且，没人知道 Ena 在进入根节点的时候她认为的左右是否是正确的方向。\n\n节目制作人将拯救迷路的 Ena。但是需要你，Ena 的极客同伴，正确回答如下问题：只考虑值在 $A$ 到 $B$（包括两端）中的叶子节点，Ena 结束移动的叶子节点值的和是多少。", "inputFormat": "第一行两个整数 $N,K$，意义如题目描述；\n\n接下来一行包含一个长为 $N-1$ 的字符串，只包含字母 `L` 和 `R`，表示从根到有出口的叶子节点的一条路径；\n\n第三行一个 $01$ 串，为 $A$ 的二进制表示，无前导 $0$，意义如题目描述；\n\n第四行一个 $01$ 串，为 $B$ 的二进制表示，无前导 $0$，意义如题目描述。", "outputFormat": "输出所求的和对 $10^9+7$ 取模后的值。", "hint": "### 样例 1 解释\n\nEna 不会改变她对左右方向的认识，但是我们不知道她在进入根节点之前认识到的左右方向是否正确。因此她可能按照正确的左右方向先左后右走到节点 $5$，也可能先右后左走到节点 $6$，两个叶子节点分别为 $A$ 和 $B$，因此答案为 $5+6=11$。\n\n### 样例 2 解释\n\nEna 经过路径的可能（按正确的左右方向）：\n- $\\{\\texttt{L, L, L}\\}$；\n- $\\{\\texttt{L, L, R}\\}$；\n- $\\{\\texttt{L, R, L}\\}$；\n- $\\{\\texttt{R, L, R}\\}$；\n- $\\{\\texttt{R, R, L}\\}$；\n- $\\{\\texttt{R, R, R}\\}$。\n\n### 数据范围 \n\n对于全部数据，$2\\le N\\le 10^3,0\\le K\\le N-1$。保证 Ena 可以到达值为 $A$ 和 $B$ 的两个叶子节点。\n\n详细子任务附加限制及分值如下表：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$K=0$|$8$|\n|$2$|$N\\le 25$|$14$|\n|$3$|$A$ 是 Ena 可能结束的叶子节点最小值，$B$ 是可能的最大值|$17$|\n|$4$|无附加限制|$61$|", "locale": "zh-CN"}}}
{"pid": "P11339", "type": "P", "difficulty": 0, "samples": [["2\n1 2 3\n4 5 6\n0", "600\n1500"], ["3\n5 5 5\n6 2 10\n10 9 2\n2\n100 199", "1496\n1799\n2075"], ["5\n2 2 2\n6 6 6\n8 8 8\n9 9 9\n10 10 10\n2\n297 298", "600\n1790\n2386\n2676\n2973"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "COI（克罗地亚）"], "title": "[COI 2019] SEGWAY", "background": "", "description": "**译自 [COI 2019](https://hsin.hr/coci/archive/2018_2019/) T3「[SEGWAY](https://hsin.hr/coci/archive/2018_2019/olympiad_tasks.pdf)」**\n\n在杜布罗夫尼克举行了一次平衡车比赛。赛道包含三段，每段长 $100$ 米，即，赛道总长是 $300$ 米。基于选手平衡车的电池限制，每个选手都有一个策略：在第一段上的速度，在第二段上的速度和在第三段上的速度，除非允许加速到最大速度（具体操作会在下一段解释）。遗憾的是，平衡车很慢，它们的速度在 $1$ 到 $50$ **秒每米**之间。因此，题目中速度单位为**秒每米**（而不是米每秒）。\n\n在赛道沿途有一些加速点（放置加速器）。当选手到达加速点处时，他的平衡车就会获得额外的能量，可以以 $1$ 秒每米的速度行驶 $X\\bmod 20$ 米，这里 $X$ 是在他到达加速点处时，严格在他前面的人数（包含已到达终点的人）。选手不能在额外获得的能量用尽之前使用加速器。额外的能量用尽时，如果没有新的加速器，他将按原定速度继续行驶。\n\n假设选手有能用的加速器就会用，即使不是最优的。一个加速器可以被多人同时使用，并且不会使用后不会失效。你的任务是模拟这次比赛。假设所有选手同时出发，输出他们到达终点所用的时间。", "inputFormat": "第一行包含一个整数 $N$，表示选手数；\n\n接下来 $N$ 行，分别描述选手的策略，每行包含一个范围在 $[1,50]$ 的整数，分别表示在第一段，第二段和第三段的速度；\n\n接下来一行一个整数 $M$，表示加速器个数；\n\n如果 $M>0$，接下来一行有 $M$ 个范围在 $[1,299]$ 的整数，表示每个加速器到起点的距离。距离按严格递增的顺序给出。", "outputFormat": "输出 $N$ 行，每行一个整数，第 $i$ 行输出第 $i$ 名选手到达终点的用时。", "hint": "### 样例 1 解释\n\n因为没有加速器，所以所有选手按原定速度进行比赛。\n\n### 样例 2 解释\n\n第一名选手不会使用第一个加速器（因为在他前面没有选手），但是他会使用第二个加速器，因为第二名选手在此时超过了他。总得来说，第一名选手以 $5$ 秒每米的速度行驶了 $299$ 米，以 $1$ 秒每米的速度行驶了 $1$ 米。\n\n第二名选手会使用第一个加速器（他前面有一名选手），但是他不会使用第二个加速器。总得来说，第二名选手以 $6$ 秒每米的速度行驶了 $100$ 米，以 $1$ 秒每米的速度行驶了 $1$ 米，以 $2$ 秒每米的速度行驶了 $99$ 米，以 $10$ 秒每米的速度行驶了 $100$ 米。\n\n第三名选手在两个加速器处均会以 $1$ 秒每米的速度行驶 $2$ 米。总得来说，第三名选手以 $10$ 秒每米的速度行驶了 $100$ 米，以 $1$ 秒每米的速度行驶了 $2$ 米，以 $9$ 秒每米的速度行驶了 $97$ 米，以 $1$ 秒每米的速度行驶了 $2$ 米，以 $2$ 秒每米的速度行驶了 $99$ 米。\n\n### 样例 3 解释\n\n两个加速器离终点都很近。第一名选手不会使用任何加速器，第二名选手使用两个加速器（均加速 $1$ 米），然后剩下最后 $1$ 米按原速度行驶，第三名选手会使用第一个加速器（加速 $2$ 米），然后剩下 $1$ 米按原速度行驶。最后两名选手利用最后额外的能量加速冲线。\n\n### 数据范围 \n\n对于所有数据，$1\\le N\\le 2\\times 10^4$。\n\n详细子任务附加限制及分值如下表：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$M=1$|$15$|\n|$2$|$N\\le 300$|$40$|\n|$3$|无附加限制|$45$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2019] SEGWAY", "background": "", "description": "**译自 [COI 2019](https://hsin.hr/coci/archive/2018_2019/) T3「[SEGWAY](https://hsin.hr/coci/archive/2018_2019/olympiad_tasks.pdf)」**\n\n在杜布罗夫尼克举行了一次平衡车比赛。赛道包含三段，每段长 $100$ 米，即，赛道总长是 $300$ 米。基于选手平衡车的电池限制，每个选手都有一个策略：在第一段上的速度，在第二段上的速度和在第三段上的速度，除非允许加速到最大速度（具体操作会在下一段解释）。遗憾的是，平衡车很慢，它们的速度在 $1$ 到 $50$ **秒每米**之间。因此，题目中速度单位为**秒每米**（而不是米每秒）。\n\n在赛道沿途有一些加速点（放置加速器）。当选手到达加速点处时，他的平衡车就会获得额外的能量，可以以 $1$ 秒每米的速度行驶 $X\\bmod 20$ 米，这里 $X$ 是在他到达加速点处时，严格在他前面的人数（包含已到达终点的人）。选手不能在额外获得的能量用尽之前使用加速器。额外的能量用尽时，如果没有新的加速器，他将按原定速度继续行驶。\n\n假设选手有能用的加速器就会用，即使不是最优的。一个加速器可以被多人同时使用，并且不会使用后不会失效。你的任务是模拟这次比赛。假设所有选手同时出发，输出他们到达终点所用的时间。", "inputFormat": "第一行包含一个整数 $N$，表示选手数；\n\n接下来 $N$ 行，分别描述选手的策略，每行包含一个范围在 $[1,50]$ 的整数，分别表示在第一段，第二段和第三段的速度；\n\n接下来一行一个整数 $M$，表示加速器个数；\n\n如果 $M>0$，接下来一行有 $M$ 个范围在 $[1,299]$ 的整数，表示每个加速器到起点的距离。距离按严格递增的顺序给出。", "outputFormat": "输出 $N$ 行，每行一个整数，第 $i$ 行输出第 $i$ 名选手到达终点的用时。", "hint": "### 样例 1 解释\n\n因为没有加速器，所以所有选手按原定速度进行比赛。\n\n### 样例 2 解释\n\n第一名选手不会使用第一个加速器（因为在他前面没有选手），但是他会使用第二个加速器，因为第二名选手在此时超过了他。总得来说，第一名选手以 $5$ 秒每米的速度行驶了 $299$ 米，以 $1$ 秒每米的速度行驶了 $1$ 米。\n\n第二名选手会使用第一个加速器（他前面有一名选手），但是他不会使用第二个加速器。总得来说，第二名选手以 $6$ 秒每米的速度行驶了 $100$ 米，以 $1$ 秒每米的速度行驶了 $1$ 米，以 $2$ 秒每米的速度行驶了 $99$ 米，以 $10$ 秒每米的速度行驶了 $100$ 米。\n\n第三名选手在两个加速器处均会以 $1$ 秒每米的速度行驶 $2$ 米。总得来说，第三名选手以 $10$ 秒每米的速度行驶了 $100$ 米，以 $1$ 秒每米的速度行驶了 $2$ 米，以 $9$ 秒每米的速度行驶了 $97$ 米，以 $1$ 秒每米的速度行驶了 $2$ 米，以 $2$ 秒每米的速度行驶了 $99$ 米。\n\n### 样例 3 解释\n\n两个加速器离终点都很近。第一名选手不会使用任何加速器，第二名选手使用两个加速器（均加速 $1$ 米），然后剩下最后 $1$ 米按原速度行驶，第三名选手会使用第一个加速器（加速 $2$ 米），然后剩下 $1$ 米按原速度行驶。最后两名选手利用最后额外的能量加速冲线。\n\n### 数据范围 \n\n对于所有数据，$1\\le N\\le 2\\times 10^4$。\n\n详细子任务附加限制及分值如下表：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$M=1$|$15$|\n|$2$|$N\\le 300$|$40$|\n|$3$|无附加限制|$45$|", "locale": "zh-CN"}}}
{"pid": "P11340", "type": "P", "difficulty": 6, "samples": [["4 4\n1 2 3 4\n2 1 3 4\n2 4 3 1\n1 1\n1 4\n2 3 1 4\n1 4", "DA\nDA\nNE"], ["6 7\n4 6 1 5 3 2\n5 1 4 2 6 3\n4 6 1 5 2 3\n1 2\n2 2 4 5\n1 1\n2 2 4 5\n2 2 5 6\n1 2\n1 1", "DA\nNE\nNE\nDA"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "COI（克罗地亚）"], "title": "[COI 2019] TENIS", "background": "", "description": "**译自 [COI 2019](https://hsin.hr/coci/archive/2018_2019/) T4「[TENIS](https://hsin.hr/coci/archive/2018_2019/olympiad_tasks.pdf)」**\n\nVito 十分喜欢打网球。不久，他就会组织一次大规模的锦标赛。这次锦标赛会有 $N$ 名选手参加，编号为从 $1$ 到 $N$。Vito 在过去几年跟踪了这些选手的数据。因此，他确定了这些选手在三种不同的球场：红土，草地和硬地上比赛的能力值。也就是说，对于每种场地，他都按最强到最弱的顺序确定了选手的排名。\n\nVito 的锦标赛赛制有点与众不同。一共会进行 $N-1$ 轮比赛。在每场比赛中，还没有被淘汰的两名选手会在某种特定的场地上进行比赛。在这种场地上较弱的选手会被淘汰出局。$N-1$ 轮比赛后唯一的胜者就是这次锦标赛的冠军。\n\nVito 是一个很有影响力的人，可以操纵比赛的结果。即对于每场比赛，Vito 可以选择参赛选手和比赛场地。当然，他只能选择未被淘汰的选手。\n\nVito 经常更新他收集的数据，他有时会交换在某种场地上两名选手的排名。并且他有很多朋友，有些朋友会问他：「选手 $X$ 是我的外甥，他有机会夺冠吗？」（*wink*），为了回答这些询问，你需要写一个程序帮助 Vito 更新排名，并根据当前时刻 Vito 的排名表回答他朋友的提问。", "inputFormat": "第一行两个整数 $N,Q$，分别表示选手数和事件数；\n\n接下来三行，每行包含一个 $\\{1,2,\\ldots , N\\}$ 的排列，表示选手在这种特定的球场上的排名，按从最强到最弱的顺序给出。\n\n接下来 $Q$ 行，每行表示一个事件：\n- `1 X`：表示 Vito 的朋友想知道选手 $X$ 能否夺冠；\n- `2 P A B`：表示 Vito 意识到需要交换第 $P$ 个排名表中选手 $A$ 和选手 $B$ 的排名位置。", "outputFormat": "对于每个 `1` 类型的询问输出一行，包含 `DA` 或 `NE`（克罗地亚语中的「是」和「否」）。", "hint": "### 样例 1 解释\n\n如果所有比赛都在第一种场地上进行，选手 $1$ 会夺冠；\n\n选手 $4$ 夺冠的方式：\n- 选手 $3$ 和 $4$ 在第三种场地上进行比赛，选手 $4$ 赢了；\n- 选手 $1$ 和 $2$ 在第一种场地上进行比赛，选手 $1$ 赢了；\n- 选手 $1$ 和 $4$ 在第三种场地上进行比赛，选手 $4$ 赢了。\n\n在更新第三种场地上的选手排名后（排名变为：$\\{2,1,3,4\\}$），选手 $4$ 变成了在所有场地上都是最弱的了，因此他不可能夺冠。\n\n### 数据范围\n\n对于全部数据，$1\\le N,Q\\le 10^5,1\\le X,A,B\\le N,1\\le P\\le 3,A\\neq B$。\n\n详细子任务附加限制及分值如下表：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$N\\le 15,Q\\le 10$|$7$|\n|$2$|$N\\le 10^3,Q\\le 10$|$11$|\n|$3$|$Q\\le 10$|$12$|\n|$4$|所有的事件类型都是 `1` 类型|$21$|\n|$5$|无附加限制|$49$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2019] TENIS", "background": "", "description": "**译自 [COI 2019](https://hsin.hr/coci/archive/2018_2019/) T4「[TENIS](https://hsin.hr/coci/archive/2018_2019/olympiad_tasks.pdf)」**\n\nVito 十分喜欢打网球。不久，他就会组织一次大规模的锦标赛。这次锦标赛会有 $N$ 名选手参加，编号为从 $1$ 到 $N$。Vito 在过去几年跟踪了这些选手的数据。因此，他确定了这些选手在三种不同的球场：红土，草地和硬地上比赛的能力值。也就是说，对于每种场地，他都按最强到最弱的顺序确定了选手的排名。\n\nVito 的锦标赛赛制有点与众不同。一共会进行 $N-1$ 轮比赛。在每场比赛中，还没有被淘汰的两名选手会在某种特定的场地上进行比赛。在这种场地上较弱的选手会被淘汰出局。$N-1$ 轮比赛后唯一的胜者就是这次锦标赛的冠军。\n\nVito 是一个很有影响力的人，可以操纵比赛的结果。即对于每场比赛，Vito 可以选择参赛选手和比赛场地。当然，他只能选择未被淘汰的选手。\n\nVito 经常更新他收集的数据，他有时会交换在某种场地上两名选手的排名。并且他有很多朋友，有些朋友会问他：「选手 $X$ 是我的外甥，他有机会夺冠吗？」（*wink*），为了回答这些询问，你需要写一个程序帮助 Vito 更新排名，并根据当前时刻 Vito 的排名表回答他朋友的提问。", "inputFormat": "第一行两个整数 $N,Q$，分别表示选手数和事件数；\n\n接下来三行，每行包含一个 $\\{1,2,\\ldots , N\\}$ 的排列，表示选手在这种特定的球场上的排名，按从最强到最弱的顺序给出。\n\n接下来 $Q$ 行，每行表示一个事件：\n- `1 X`：表示 Vito 的朋友想知道选手 $X$ 能否夺冠；\n- `2 P A B`：表示 Vito 意识到需要交换第 $P$ 个排名表中选手 $A$ 和选手 $B$ 的排名位置。", "outputFormat": "对于每个 `1` 类型的询问输出一行，包含 `DA` 或 `NE`（克罗地亚语中的「是」和「否」）。", "hint": "### 样例 1 解释\n\n如果所有比赛都在第一种场地上进行，选手 $1$ 会夺冠；\n\n选手 $4$ 夺冠的方式：\n- 选手 $3$ 和 $4$ 在第三种场地上进行比赛，选手 $4$ 赢了；\n- 选手 $1$ 和 $2$ 在第一种场地上进行比赛，选手 $1$ 赢了；\n- 选手 $1$ 和 $4$ 在第三种场地上进行比赛，选手 $4$ 赢了。\n\n在更新第三种场地上的选手排名后（排名变为：$\\{2,1,3,4\\}$），选手 $4$ 变成了在所有场地上都是最弱的了，因此他不可能夺冠。\n\n### 数据范围\n\n对于全部数据，$1\\le N,Q\\le 10^5,1\\le X,A,B\\le N,1\\le P\\le 3,A\\neq B$。\n\n详细子任务附加限制及分值如下表：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$N\\le 15,Q\\le 10$|$7$|\n|$2$|$N\\le 10^3,Q\\le 10$|$11$|\n|$3$|$Q\\le 10$|$12$|\n|$4$|所有的事件类型都是 `1` 类型|$21$|\n|$5$|无附加限制|$49$|", "locale": "zh-CN"}}}
{"pid": "P11341", "type": "P", "difficulty": 0, "samples": [["5\n-1 -1 -1 -1 -1\n-1 -1 1 -1 -1\n-1 -1 -1 -1 -1\n-1 -1 1 -1 -1\n-1 -1 -1 -1 -1", "-9\n"], ["5\n1 2 3 4 5\n2 3 4 5 1\n3 4 5 1 2\n4 5 1 2 3\n5 1 2 3 4", "60"], ["5\n1 1 -1 -1 1\n-1 1 -1 1 1\n1 1 1 1 -1\n1 -1 -1 1 -1\n1 -1 -1 1 1", "15"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2023", "交互题", "KOI（韩国）"], "title": "[KTSC 2023 R1] 地牢", "background": "**请勿使用 C++14 (GCC 9) 提交。**\n\n你需要在文件开头加入如下代码：\n\n```cpp\n#include<vector>\nint max_item_sum(std::vector<std::vector<int>> V);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T1 「[던전](https://assets.ioikorea.kr/ioitst/2023/1/dungeon/dungeon_statement.pdf)」**\n\n哲洙和英姬在游戏中需要穿越一个地牢。地牢是一个 $N \\times N$ 的网格。网格的行从上到下编号为 $0$ 到 $N-1$，列从左到右编号为 $0$ 到 $N-1$。位于第 $i$ 行，第 $j$ 列的格子记为 $(i, j)$。\n\n穿越地牢的规则如下：\n\n- 哲洙从地牢的左上角出发，移动到右下角。每次移动时，哲洙只能向右或向下移动到相邻的格子。\n- 英姬从地牢的右上角出发，移动到左下角。每次移动时，英姬只能向左或向下移动到相邻的格子。\n\n地牢的每个格子里都有一个物品。每个物品的价值可以是正整数、$0$ 或负整数，位于 $(i, j)$ 格子的物品价值为 $V[i][j]$。哲洙和英姬已经知道所有格子中物品的价值。穿越地牢后，哲洙和英姬会收集他们经过的所有格子的物品。如果两人都经过同一个格子，那么这个格子的物品只会被收集一次。\n\n请编写一个程序，计算哲洙和英姬能够收集的物品价值的最大可能总和。\n\n你需要实现以下函数：\n\n```cpp\nint max_item_sum(std::vector<std::vector<int>> V);\n```\n\n- `V`：大小为 $N \\times N$ 的二维整数数组。对于所有 $i, j$ $(0 \\leq i, j \\leq N-1)$，$V[i][j]$ 是地牢中 $(i, j)$ 格子的物品价值。\n- 该函数返回哲洙和英姬能够收集的物品价值的最大可能总和。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2+i$ $(0 \\leq i \\leq N-1)$ 行：$V[i][0]\\,V[i][1]\\,\\cdots\\,V[i][N-1]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `max_item_sum` 返回的值\n", "hint": "### 样例 1 解释\n\n考虑 $N=5, V=[[-1,-1,-1,-1,-1],[-1,-1,1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,1,-1,-1],[-1,-1,-1,-1,-1]]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\nmax_item_sum([[-1,-1,-1,-1,-1],[-1,-1,1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,1,-1,-1],[-1,-1,-1,-1,-1]]);\n```\n\n下图展示了地牢的情况。每个格子中的值表示该格子的物品价值。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ig9pxx8x.png)\n\n下图左侧的蓝色格子表示哲洙经过的格子，右侧的黄色格子表示英姬经过的格子。哲洙经过的格子中物品的总价值为 $-4$，英姬经过的格子中物品的总价值也是 $-4$，两人都经过的格子中物品的总价值为 $-1$。因此，物品的总价值为 $-9$，这是可能的最大总和。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lx2xn39p.png)\n\n函数应返回 `-9`。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 1000$\n- 对于所有 $i,j$ $(0 \\leq i, j \\leq N-1)$，$-10^5 \\leq V[i][j] \\leq 10^5$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $11$ | $N \\leq 5$ |\n| $2$ | $44$ | $N \\leq 300$ |\n| $3$ | $15$ | 对于所有 $i,j$ $(0 \\leq i, j \\leq N-1)$，$V[i][j] \\geq 0$ |\n| $4$ | $30$ | 无附加限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2023 R1] 地牢", "background": "**请勿使用 C++14 (GCC 9) 提交。**\n\n你需要在文件开头加入如下代码：\n\n```cpp\n#include<vector>\nint max_item_sum(std::vector<std::vector<int>> V);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T1 「[던전](https://assets.ioikorea.kr/ioitst/2023/1/dungeon/dungeon_statement.pdf)」**\n\n哲洙和英姬在游戏中需要穿越一个地牢。地牢是一个 $N \\times N$ 的网格。网格的行从上到下编号为 $0$ 到 $N-1$，列从左到右编号为 $0$ 到 $N-1$。位于第 $i$ 行，第 $j$ 列的格子记为 $(i, j)$。\n\n穿越地牢的规则如下：\n\n- 哲洙从地牢的左上角出发，移动到右下角。每次移动时，哲洙只能向右或向下移动到相邻的格子。\n- 英姬从地牢的右上角出发，移动到左下角。每次移动时，英姬只能向左或向下移动到相邻的格子。\n\n地牢的每个格子里都有一个物品。每个物品的价值可以是正整数、$0$ 或负整数，位于 $(i, j)$ 格子的物品价值为 $V[i][j]$。哲洙和英姬已经知道所有格子中物品的价值。穿越地牢后，哲洙和英姬会收集他们经过的所有格子的物品。如果两人都经过同一个格子，那么这个格子的物品只会被收集一次。\n\n请编写一个程序，计算哲洙和英姬能够收集的物品价值的最大可能总和。\n\n你需要实现以下函数：\n\n```cpp\nint max_item_sum(std::vector<std::vector<int>> V);\n```\n\n- `V`：大小为 $N \\times N$ 的二维整数数组。对于所有 $i, j$ $(0 \\leq i, j \\leq N-1)$，$V[i][j]$ 是地牢中 $(i, j)$ 格子的物品价值。\n- 该函数返回哲洙和英姬能够收集的物品价值的最大可能总和。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2+i$ $(0 \\leq i \\leq N-1)$ 行：$V[i][0]\\,V[i][1]\\,\\cdots\\,V[i][N-1]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `max_item_sum` 返回的值\n", "hint": "### 样例 1 解释\n\n考虑 $N=5, V=[[-1,-1,-1,-1,-1],[-1,-1,1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,1,-1,-1],[-1,-1,-1,-1,-1]]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\nmax_item_sum([[-1,-1,-1,-1,-1],[-1,-1,1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,1,-1,-1],[-1,-1,-1,-1,-1]]);\n```\n\n下图展示了地牢的情况。每个格子中的值表示该格子的物品价值。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ig9pxx8x.png)\n\n下图左侧的蓝色格子表示哲洙经过的格子，右侧的黄色格子表示英姬经过的格子。哲洙经过的格子中物品的总价值为 $-4$，英姬经过的格子中物品的总价值也是 $-4$，两人都经过的格子中物品的总价值为 $-1$。因此，物品的总价值为 $-9$，这是可能的最大总和。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lx2xn39p.png)\n\n函数应返回 `-9`。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 1000$\n- 对于所有 $i,j$ $(0 \\leq i, j \\leq N-1)$，$-10^5 \\leq V[i][j] \\leq 10^5$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $11$ | $N \\leq 5$ |\n| $2$ | $44$ | $N \\leq 300$ |\n| $3$ | $15$ | 对于所有 $i,j$ $(0 \\leq i, j \\leq N-1)$，$V[i][j] \\geq 0$ |\n| $4$ | $30$ | 无附加限制 |", "locale": "zh-CN"}}}
{"pid": "P11342", "type": "P", "difficulty": 6, "samples": [["4\n0 9\n0 8\n0 0\n9 9 9", "9"], ["11\n0 9\n0 8\n2 0\n3 7\n3 1\n2 6\n0 0\n7 7\n7 1\n9 6\n1000000000000 1000000000000 1000000000000 1000000000000 1000000000000 1000000000000", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2023", "交互题", "KOI（韩国）"], "title": "[KTSC 2023 R1] 外环道路 2", "background": "**请勿使用 C++14 (GCC 9) 提交。**\n\n请在程序开头加入如下代码：\n\n```cpp\n#include<vector>\nlong long place_police(std::vector<int> P, std::vector<long long> C, std::vector<long long> W);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T2 「[외곽 순환 도로 2](https://assets.ioikorea.kr/ioitst/2023/1/ringroad2/ringroad2_statement.pdf)」**\n\nKOI 城市由 $N$ 个交叉路口和 $N-1$ 条双向道路组成，任意两个不同的交叉路口都可以通过这些道路互相到达。也就是说，城市的道路网络是一个树结构。道路位于二维平面上，除了端点外，任何两条道路都不相交。每条道路都有一个非负整数的权重。\n\nKOI 城市几十年前还是一个小村庄，但随着人口的涌入和城市的扩张，变得越来越大。在快速扩张的过程中，市长为了方便管理，给交叉路口编号为 $0$ 到 $N-1$。这种编号系统具有以下特性：\n\n- $0$ 号交叉路口是城市的中心，保证至少有两条道路与其相连。\n- 交叉路口的编号是以 $0$ 号交叉路口为根的树的前序遍历顺序之一。\n- 对于每个交叉路口，考虑与其相邻的（直接连接的）交叉路口中编号最小的一个。从这个交叉路口开始，按逆时针方向列出相邻交叉路口的编号，编号是递增的。\n\n随着越来越多的人涌入 KOI 城市，交通拥堵问题变得越来越严重。市长决定通过建设外环道路来解决这个问题。将所有只有一条道路相连的交叉路口按编号递增的顺序排列，得到列表 $\\{V[0], V[1], \\ldots, V[K-1]\\}$。市长决定在所有 $i$ $(0 \\leq i \\leq K-1)$ 的情况下，建设连接 $V[i]$ 和 $V[(i+1) \\bmod K]$ 的双向道路。每条道路的权重为非负整数 $W[i]$。根据编号系统的特性，可以确保这些外环道路不会在端点之外的任何位置相交。\n\nKOI 城市的邪恶犯罪团伙 Dlalswp 对市民造成了很大伤害。市长决定派遣情报人员来抓捕 Dlalswp 犯罪团伙。根据情报，Dlalswp 犯罪团伙将长度为奇数的简单环作为犯罪区域，并在这些环上进行犯罪活动。\n\n为了抓捕臭名昭著的 Dlalswp 犯罪团伙，市长决定在所有长度为奇数的简单环上部署警察。每条道路上部署警察的成本等于该道路的权重。请计算市长实现目标所需的最小成本。\n\n你需要实现以下函数：\n\n```cpp\nlong long place_police(vector<int> P, vector<long long> C, vector<long long> W);\n```\n\n- 该函数只会被调用一次。\n- `P`：大小为 $N-1$ 的整数数组，表示建设外环道路前 KOI 城市的原始道路。对于每个 $0 \\leq i \\leq N-2$，存在一条连接 $P[i]$ 和 $i+1$ 的道路。\n- `C`：大小为 $N-1$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-2)$，连接 $P[i]$ 和 $i+1$ 的道路的权重为 $C[i]$。\n- `W`：大小为 $K$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq K-1)$，连接 $V[i]$ 和 $V[(i+1) \\bmod K]$ 的双向道路的权重为 $W[i]$。\n- 该函数返回在所有长度为奇数的简单环上部署警察的最小成本。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2+i$ $(0 \\leq i \\leq N-2)$ 行：$P[i]\\,C[i]$\n- 第 $1+N$ 行：$W[0]\\,W[1]\\,\\cdots\\,W[K-1]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `place_police` 返回的值", "hint": "### 样例 1 解释\n考虑 $N=4, P=[0,0,0], C=[9,8,0], W=[9,9,9]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\nplace_police([0, 0, 0], [9, 8, 0], [9, 9, 9]);\n```\n\nKOI 城市中共有 $4$ 个奇数环，分别是 $\\{0,1,2\\},\\{0,2,3\\},\\{0,3,1\\},\\{1,2,3\\}$。如果市长在连接 $(0,3)$ 的权重为 $0$ 的道路和连接 $(1,2)$ 的权重为 $9$ 的道路上部署警察，那么所有奇数环上至少有一条道路上部署了警察。这个部署的成本是 $0+9=9$，这是实现目标的最小成本。\n\n函数应返回 `9`。\n\n### 样例 2 解释\n\n考虑 $N=11$,\n$P=[0,0,2,3,3,2,0,7,7,9]$,\n$C=[9,8,0,7,1,6,0,7,1,6]$,\n$W=[1000000000000, \\ldots, 1000000000000]$ 的情况。$W$ 的大小为 $6$，所有元素均为 $10^{12}$。\n\n评测程序将调用如下函数：\n\n```cpp\nplace_police([0, 0, 2, 3, 3, 2, 0, 7, 7, 9], [9, 8, 0, 7, 1, 6, 0, 7, 1, 6], [1000000000000, 1000000000000, 1000000000000, 1000000000000, 1000000000000, 1000000000000]);\n```\n\n如果市长在连接 $(2,3)$ 的权重为 0 的道路、连接 $(0,7)$ 的权重为 0 的道路和连接 $(3,5)$ 的权重为 1 的道路上部署警察，那么所有奇数环上至少有一条道路上部署了警察。这个部署的成本是 $0+0+1=1$，这是实现目标的最小成本。\n\n函数应返回 `1`。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $4 \\leq N \\leq 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq P[i] \\leq i$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq C[i] \\leq 10^{12}$\n- 对于所有 $i$ $(0 \\leq i \\leq K-1)$，$0 \\leq W[i] \\leq 10^{12}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $6$ | $K \\leq 5$ |\n| $2$ | $8$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$P[i]=0$ |\n| $3$ | $5$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$C[i] \\leq 10^{6}$；对于所有 $i$ $(0 \\leq i \\leq K-1)$，$W[i]=10^{12}$；$K$ 为偶数 |\n| $4$ | $15$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$C[i] \\leq 10^{6}$；对于所有 $i$ $(0 \\leq i \\leq K-1)$，$W[i]=10^{12}$ |\n| $5$ | $57$ | 不存在与 $4$ 条以上道路相连的交叉路口 |\n| $6$ | $9$ | 无附加限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2023 R1] 外环道路 2", "background": "**请勿使用 C++14 (GCC 9) 提交。**\n\n请在程序开头加入如下代码：\n\n```cpp\n#include<vector>\nlong long place_police(std::vector<int> P, std::vector<long long> C, std::vector<long long> W);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T2 「[외곽 순환 도로 2](https://assets.ioikorea.kr/ioitst/2023/1/ringroad2/ringroad2_statement.pdf)」**\n\nKOI 城市由 $N$ 个交叉路口和 $N-1$ 条双向道路组成，任意两个不同的交叉路口都可以通过这些道路互相到达。也就是说，城市的道路网络是一个树结构。道路位于二维平面上，除了端点外，任何两条道路都不相交。每条道路都有一个非负整数的权重。\n\nKOI 城市几十年前还是一个小村庄，但随着人口的涌入和城市的扩张，变得越来越大。在快速扩张的过程中，市长为了方便管理，给交叉路口编号为 $0$ 到 $N-1$。这种编号系统具有以下特性：\n\n- $0$ 号交叉路口是城市的中心，保证至少有两条道路与其相连。\n- 交叉路口的编号是以 $0$ 号交叉路口为根的树的前序遍历顺序之一。\n- 对于每个交叉路口，考虑与其相邻的（直接连接的）交叉路口中编号最小的一个。从这个交叉路口开始，按逆时针方向列出相邻交叉路口的编号，编号是递增的。\n\n随着越来越多的人涌入 KOI 城市，交通拥堵问题变得越来越严重。市长决定通过建设外环道路来解决这个问题。将所有只有一条道路相连的交叉路口按编号递增的顺序排列，得到列表 $\\{V[0], V[1], \\ldots, V[K-1]\\}$。市长决定在所有 $i$ $(0 \\leq i \\leq K-1)$ 的情况下，建设连接 $V[i]$ 和 $V[(i+1) \\bmod K]$ 的双向道路。每条道路的权重为非负整数 $W[i]$。根据编号系统的特性，可以确保这些外环道路不会在端点之外的任何位置相交。\n\nKOI 城市的邪恶犯罪团伙 Dlalswp 对市民造成了很大伤害。市长决定派遣情报人员来抓捕 Dlalswp 犯罪团伙。根据情报，Dlalswp 犯罪团伙将长度为奇数的简单环作为犯罪区域，并在这些环上进行犯罪活动。\n\n为了抓捕臭名昭著的 Dlalswp 犯罪团伙，市长决定在所有长度为奇数的简单环上部署警察。每条道路上部署警察的成本等于该道路的权重。请计算市长实现目标所需的最小成本。\n\n你需要实现以下函数：\n\n```cpp\nlong long place_police(vector<int> P, vector<long long> C, vector<long long> W);\n```\n\n- 该函数只会被调用一次。\n- `P`：大小为 $N-1$ 的整数数组，表示建设外环道路前 KOI 城市的原始道路。对于每个 $0 \\leq i \\leq N-2$，存在一条连接 $P[i]$ 和 $i+1$ 的道路。\n- `C`：大小为 $N-1$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-2)$，连接 $P[i]$ 和 $i+1$ 的道路的权重为 $C[i]$。\n- `W`：大小为 $K$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq K-1)$，连接 $V[i]$ 和 $V[(i+1) \\bmod K]$ 的双向道路的权重为 $W[i]$。\n- 该函数返回在所有长度为奇数的简单环上部署警察的最小成本。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2+i$ $(0 \\leq i \\leq N-2)$ 行：$P[i]\\,C[i]$\n- 第 $1+N$ 行：$W[0]\\,W[1]\\,\\cdots\\,W[K-1]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `place_police` 返回的值", "hint": "### 样例 1 解释\n考虑 $N=4, P=[0,0,0], C=[9,8,0], W=[9,9,9]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\nplace_police([0, 0, 0], [9, 8, 0], [9, 9, 9]);\n```\n\nKOI 城市中共有 $4$ 个奇数环，分别是 $\\{0,1,2\\},\\{0,2,3\\},\\{0,3,1\\},\\{1,2,3\\}$。如果市长在连接 $(0,3)$ 的权重为 $0$ 的道路和连接 $(1,2)$ 的权重为 $9$ 的道路上部署警察，那么所有奇数环上至少有一条道路上部署了警察。这个部署的成本是 $0+9=9$，这是实现目标的最小成本。\n\n函数应返回 `9`。\n\n### 样例 2 解释\n\n考虑 $N=11$,\n$P=[0,0,2,3,3,2,0,7,7,9]$,\n$C=[9,8,0,7,1,6,0,7,1,6]$,\n$W=[1000000000000, \\ldots, 1000000000000]$ 的情况。$W$ 的大小为 $6$，所有元素均为 $10^{12}$。\n\n评测程序将调用如下函数：\n\n```cpp\nplace_police([0, 0, 2, 3, 3, 2, 0, 7, 7, 9], [9, 8, 0, 7, 1, 6, 0, 7, 1, 6], [1000000000000, 1000000000000, 1000000000000, 1000000000000, 1000000000000, 1000000000000]);\n```\n\n如果市长在连接 $(2,3)$ 的权重为 0 的道路、连接 $(0,7)$ 的权重为 0 的道路和连接 $(3,5)$ 的权重为 1 的道路上部署警察，那么所有奇数环上至少有一条道路上部署了警察。这个部署的成本是 $0+0+1=1$，这是实现目标的最小成本。\n\n函数应返回 `1`。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $4 \\leq N \\leq 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq P[i] \\leq i$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq C[i] \\leq 10^{12}$\n- 对于所有 $i$ $(0 \\leq i \\leq K-1)$，$0 \\leq W[i] \\leq 10^{12}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $6$ | $K \\leq 5$ |\n| $2$ | $8$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$P[i]=0$ |\n| $3$ | $5$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$C[i] \\leq 10^{6}$；对于所有 $i$ $(0 \\leq i \\leq K-1)$，$W[i]=10^{12}$；$K$ 为偶数 |\n| $4$ | $15$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$C[i] \\leq 10^{6}$；对于所有 $i$ $(0 \\leq i \\leq K-1)$，$W[i]=10^{12}$ |\n| $5$ | $57$ | 不存在与 $4$ 条以上道路相连的交叉路口 |\n| $6$ | $9$ | 无附加限制 |", "locale": "zh-CN"}}}
{"pid": "P11343", "type": "P", "difficulty": 7, "samples": [["5\n10 5 13 4 3\n10 7 5 9 1\n1 0 1\n0 2 5\n3 2 10\n2 4 3", "20\n60\n104\n88"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["点分治", "2023", "交互题", "斜率优化", "KOI（韩国）"], "title": "[KTSC 2023 R1] 出租车旅行", "background": "**请勿用 C++14 (GCC 9) 提交。**\n\n请在程序开头加入如下代码：\n\n```cpp\n#include<vector>\nstd::vector<long long> travel(std::vector<long long> A, std::vector<int> B, std::vector<int> U, std::vector<int> V, std::vector<int> W);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T3 「[택시 여행](https://assets.ioikorea.kr/ioitst/2023/1/taxi/taxi_statement.pdf)」**\n\nIOI 国由 $N$ 个城市和连接这些城市的 $N-1$ 条双向道路组成，任意两个不同的城市都可以通过这些道路互相到达。也就是说，IOI 国的道路网络是一个树结构。\n\n每个城市都有一个编号，从 $0$ 到 $N-1$，其中 $0$ 号城市是 IOI 国的首都。对于每个 $i$ $(0 \\leq i \\leq N-2)$，第 $i$ 条道路连接 $U[i]$ 号城市和 $V[i]$ 号城市，道路长度为 $W[i]$ 公里。\n\n在 IOI 国，不同城市的出租车费用不同。具体来说，对于每个 $i$ $(0 \\leq i \\leq N-1)$，从 $i$ 号城市出发的出租车有一个基本费用 $A[i]$ 元和每公里的费用 $B[i]$ 元。这意味着，如果从 $i$ 号城市出发并行驶 $d$ 公里，需要支付 $A[i] + d \\times B[i]$ 元。\n\n小明目前住在首都 $0$ 号城市，他计划乘坐出租车去其他城市旅行。当他到达一个城市时，可以选择继续乘坐当前的出租车，或者换乘该城市出发的出租车。当然，换乘出租车需要支付基本费用，并且每公里的费用也可能不同。请计算从 0 号城市出发到达其他所有城市的最小费用。\n\n你需要实现以下函数：\n\n```cpp\nvector<long long> travel(vector<long long> A, vector<int> B, vector<int> U, vector<int> V, vector<int> W);\n```\n\n- 该函数只会被调用一次。\n- `A`：大小为 $N$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-1)$，$A[i]$ 是从 $i$ 号城市出发的出租车的基本费用。\n- `B`：大小为 $N$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-1)$，$B[i]$ 是从 $i$ 号城市出发的出租车的每公里费用。\n- `U, V, W`：大小为 $N-1$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-2)$，$U[i]$ 号城市和 $V[i]$ 号城市之间有一条长度为 $W[i]$ 公里的道路。\n- 该函数返回一个大小为 $N-1$ 的数组 $C$。对于每个 $i$ $(0 \\leq i \\leq N-2)$，$C[i]$ 是从 $0$ 号城市出发到达 $i+1$ 号城市的最小费用。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$A[0]\\,A[1]\\,\\cdots\\,A[N-1]$\n- 第 $3$ 行：$B[0]\\,B[1]\\,\\cdots\\,B[N-1]$\n- 第 $4+i$ $(0 \\leq i \\leq N-2)$ 行：$U[i]\\,V[i]\\,W[i]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $i$ 行：函数 `travel` 返回的数组的第 $i$ 个元素", "hint": "### 样例解释\n\n考虑 $N=5, A=[10,5,13,4,3], B=[10,7,5,9,1], U=[1,0,3,2], V=[0,2,2,4], W=[1,5,10,3]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\ntravel([10, 5, 13, 4, 3], [10, 7, 5, 9, 1], [1, 0, 3, 2], [0, 2, 2, 4], [1, 5, 10, 3]);\n```\n\n- 从 $0$ 号城市到 $1$ 号城市的最优方案是直接从 $0$ 号城市乘坐出租车，总费用为 $20$ 元。\n- 从 $0$ 号城市到 $2$ 号城市的最优方案是直接从 $0$ 号城市乘坐出租车，总费用为 $60$ 元。\n- 从 $0$ 号城市到 $4$ 号城市的最优方案是先从 $0$ 号城市乘坐出租车到 $1$ 号城市，然后换乘，再经过 $0$ 号和 $2$ 号城市到达 $4$ 号城市，总费用为 $88$ 元。\n- 从 $0$ 号城市到 $3$ 号城市的最优方案是先从 $0$ 号城市乘坐出租车到 $1$ 号城市，然后换乘，再经过 $0$ 号和 $2$ 号城市到达 $4$ 号城市，再换乘，经过 $2$ 号城市到达 $3$ 号城市，总费用为 $104$ 元。\n\n函数应返回 `[20, 60, 104, 88]`。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$0 \\leq A[i] \\leq 10^{12}$\n- 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$0 \\leq B[i] \\leq 10^6$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq U[i], V[i] \\leq N-1 ; U[i] \\neq V[i]$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$1 \\leq W[i] \\leq 10^6$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $7$ | $N \\leq 20$ |\n| $2$ | $8$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$U[i]=i ; V[i]=i+1$ |\n| $3$ | $13$ | $N \\leq 2000$ |\n| $4$ | $17$ | 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$B[i] \\leq 30$ |\n| $5$ | $29$ | $B[i] \\neq 0$ $(0 \\leq i \\leq N-1)$ 的 $i$ 不超过 $2000$ 个 |\n| $6$ | $26$ | 无附加限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2023 R1] 出租车旅行", "background": "**请勿用 C++14 (GCC 9) 提交。**\n\n请在程序开头加入如下代码：\n\n```cpp\n#include<vector>\nstd::vector<long long> travel(std::vector<long long> A, std::vector<int> B, std::vector<int> U, std::vector<int> V, std::vector<int> W);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 1차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T3 「[택시 여행](https://assets.ioikorea.kr/ioitst/2023/1/taxi/taxi_statement.pdf)」**\n\nIOI 国由 $N$ 个城市和连接这些城市的 $N-1$ 条双向道路组成，任意两个不同的城市都可以通过这些道路互相到达。也就是说，IOI 国的道路网络是一个树结构。\n\n每个城市都有一个编号，从 $0$ 到 $N-1$，其中 $0$ 号城市是 IOI 国的首都。对于每个 $i$ $(0 \\leq i \\leq N-2)$，第 $i$ 条道路连接 $U[i]$ 号城市和 $V[i]$ 号城市，道路长度为 $W[i]$ 公里。\n\n在 IOI 国，不同城市的出租车费用不同。具体来说，对于每个 $i$ $(0 \\leq i \\leq N-1)$，从 $i$ 号城市出发的出租车有一个基本费用 $A[i]$ 元和每公里的费用 $B[i]$ 元。这意味着，如果从 $i$ 号城市出发并行驶 $d$ 公里，需要支付 $A[i] + d \\times B[i]$ 元。\n\n小明目前住在首都 $0$ 号城市，他计划乘坐出租车去其他城市旅行。当他到达一个城市时，可以选择继续乘坐当前的出租车，或者换乘该城市出发的出租车。当然，换乘出租车需要支付基本费用，并且每公里的费用也可能不同。请计算从 0 号城市出发到达其他所有城市的最小费用。\n\n你需要实现以下函数：\n\n```cpp\nvector<long long> travel(vector<long long> A, vector<int> B, vector<int> U, vector<int> V, vector<int> W);\n```\n\n- 该函数只会被调用一次。\n- `A`：大小为 $N$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-1)$，$A[i]$ 是从 $i$ 号城市出发的出租车的基本费用。\n- `B`：大小为 $N$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-1)$，$B[i]$ 是从 $i$ 号城市出发的出租车的每公里费用。\n- `U, V, W`：大小为 $N-1$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-2)$，$U[i]$ 号城市和 $V[i]$ 号城市之间有一条长度为 $W[i]$ 公里的道路。\n- 该函数返回一个大小为 $N-1$ 的数组 $C$。对于每个 $i$ $(0 \\leq i \\leq N-2)$，$C[i]$ 是从 $0$ 号城市出发到达 $i+1$ 号城市的最小费用。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2$ 行：$A[0]\\,A[1]\\,\\cdots\\,A[N-1]$\n- 第 $3$ 行：$B[0]\\,B[1]\\,\\cdots\\,B[N-1]$\n- 第 $4+i$ $(0 \\leq i \\leq N-2)$ 行：$U[i]\\,V[i]\\,W[i]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $i$ 行：函数 `travel` 返回的数组的第 $i$ 个元素", "hint": "### 样例解释\n\n考虑 $N=5, A=[10,5,13,4,3], B=[10,7,5,9,1], U=[1,0,3,2], V=[0,2,2,4], W=[1,5,10,3]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\ntravel([10, 5, 13, 4, 3], [10, 7, 5, 9, 1], [1, 0, 3, 2], [0, 2, 2, 4], [1, 5, 10, 3]);\n```\n\n- 从 $0$ 号城市到 $1$ 号城市的最优方案是直接从 $0$ 号城市乘坐出租车，总费用为 $20$ 元。\n- 从 $0$ 号城市到 $2$ 号城市的最优方案是直接从 $0$ 号城市乘坐出租车，总费用为 $60$ 元。\n- 从 $0$ 号城市到 $4$ 号城市的最优方案是先从 $0$ 号城市乘坐出租车到 $1$ 号城市，然后换乘，再经过 $0$ 号和 $2$ 号城市到达 $4$ 号城市，总费用为 $88$ 元。\n- 从 $0$ 号城市到 $3$ 号城市的最优方案是先从 $0$ 号城市乘坐出租车到 $1$ 号城市，然后换乘，再经过 $0$ 号和 $2$ 号城市到达 $4$ 号城市，再换乘，经过 $2$ 号城市到达 $3$ 号城市，总费用为 $104$ 元。\n\n函数应返回 `[20, 60, 104, 88]`。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$0 \\leq A[i] \\leq 10^{12}$\n- 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$0 \\leq B[i] \\leq 10^6$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq U[i], V[i] \\leq N-1 ; U[i] \\neq V[i]$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$1 \\leq W[i] \\leq 10^6$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $7$ | $N \\leq 20$ |\n| $2$ | $8$ | 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$U[i]=i ; V[i]=i+1$ |\n| $3$ | $13$ | $N \\leq 2000$ |\n| $4$ | $17$ | 对于所有 $i$ $(0 \\leq i \\leq N-1)$，$B[i] \\leq 30$ |\n| $5$ | $29$ | $B[i] \\neq 0$ $(0 \\leq i \\leq N-1)$ 的 $i$ 不超过 $2000$ 个 |\n| $6$ | $26$ | 无附加限制 |", "locale": "zh-CN"}}}
{"pid": "P11345", "type": "P", "difficulty": 6, "samples": [["5\n0 2 2\n2 1 3\n2 4 6\n0 3 5", "98"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["树上启发式合并", "2023", "交互题", "KOI（韩国）", "STL"], "title": "[KTSC 2023 R2] 基地简化", "background": "**请勿用 C++14 (GCC 9) 提交。**\n\n请在程序开头加入如下代码：\n\n```cpp\n#include<vector>\nint maintenance_costs_sum(std::vector<int> U, std::vector<int> V, std::vector<int> W);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T1 「[기지 간소화](https://assets.ioikorea.kr/ioitst/2023/2/base/base_statement.pdf)」**\n\n在遥远的未来，人类已经扩展到许多外星行星。行星 X 是其中之一，宇宙探险公司 MR 在行星 X 上建立了基地，进行探险和资源采集活动。\n\n行星 X 上有 $N$ 个基地和连接这些基地的 $N-1$ 条双向通道，任意两个不同的基地都可以通过这些通道互相到达。也就是说，行星 X 的基地和通道构成了一棵树。\n\n每个基地都有一个编号，从 $0$ 到 $N-1$。对于每个 $i$ $(0 \\leq i \\leq N-2)$，第 $i$ 条通道连接 $U[i]$ 号基地和 $V[i]$ 号基地，通道的长度为 $W[i]$ 公里。\n\n随着行星 X 的开发逐渐稳定，维护所有基地和通道的成本变得很高，因此 MR 决定只保留部分基地，其他的将被停用。\n\n假设只保留编号为 $s$ 到 $e$ 的基地 $(0 \\leq s \\leq e \\leq N-1)$。此时的维护成本定义如下：\n\n- 选择 $0$ 条或更多的通道，使得以下条件得到满足，并且选择的通道长度之和最小（选择 $0$ 条通道时，长度之和为 $0$ 公里）。\n- 对于任意 $u, v$ $(s \\leq u < v \\leq e)$，$u$ 号基地和 $v$ 号基地可以通过选择的通道互相到达，中间经过停用的基地也没关系。\n- 选择的通道长度之和为 $C$ 公里时，维护成本为 $C$。\n\n由于尚未决定保留哪些基地，MR 希望知道所有可能的 $(i, j)$ $(0 \\leq i \\leq j \\leq N-1)$ 组合下，只保留编号为 $i$ 到 $j$ 的基地时的维护成本之和。你需要为 MR 计算这个值。由于结果可能非常大，请对 $1000000007$ 取模。\n\n你需要实现以下函数：\n\n```cpp\nint maintenance_costs_sum(vector<int> U, vector<int> V, vector<int> W);\n```\n\n- 该函数只会被调用一次。\n- `U, V, W`：大小为 $N-1$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-2)$，$U[i]$ 号基地和 $V[i]$ 号基地之间有一条长度为 $W[i]$ 公里的通道。\n- 该函数返回所有可能的 $(i, j)$ $(0 \\leq i \\leq j \\leq N-1)$ 组合下，只保留编号为 $i$ 到 $j$ 的基地时的维护成本之和，对 $1000000007$ 取模的结果。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2+i$ $(0 \\leq i \\leq N-2)$ 行：$U[i]\\,V[i]\\,W[i]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `maintenance_costs_sum` 返回的值", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 2.5\\cdot 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq U[i], V[i] \\leq N-1 ; U[i] \\neq V[i]$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$1 \\leq W[i] \\leq 10^9$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $5$ | $N \\leq 300$ |\n| $2$ | $6$ | $N \\leq 4000$ |\n| $3$ | $10$ | 基地的编号是以 $0$ 号基地为根的树的前序遍历顺序之一 |\n| $4$ | $26$ | 每个基地最多连接 $2$ 条通道 |\n| $5$ | $53$ | 无附加限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2023 R2] 基地简化", "background": "**请勿用 C++14 (GCC 9) 提交。**\n\n请在程序开头加入如下代码：\n\n```cpp\n#include<vector>\nint maintenance_costs_sum(std::vector<int> U, std::vector<int> V, std::vector<int> W);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T1 「[기지 간소화](https://assets.ioikorea.kr/ioitst/2023/2/base/base_statement.pdf)」**\n\n在遥远的未来，人类已经扩展到许多外星行星。行星 X 是其中之一，宇宙探险公司 MR 在行星 X 上建立了基地，进行探险和资源采集活动。\n\n行星 X 上有 $N$ 个基地和连接这些基地的 $N-1$ 条双向通道，任意两个不同的基地都可以通过这些通道互相到达。也就是说，行星 X 的基地和通道构成了一棵树。\n\n每个基地都有一个编号，从 $0$ 到 $N-1$。对于每个 $i$ $(0 \\leq i \\leq N-2)$，第 $i$ 条通道连接 $U[i]$ 号基地和 $V[i]$ 号基地，通道的长度为 $W[i]$ 公里。\n\n随着行星 X 的开发逐渐稳定，维护所有基地和通道的成本变得很高，因此 MR 决定只保留部分基地，其他的将被停用。\n\n假设只保留编号为 $s$ 到 $e$ 的基地 $(0 \\leq s \\leq e \\leq N-1)$。此时的维护成本定义如下：\n\n- 选择 $0$ 条或更多的通道，使得以下条件得到满足，并且选择的通道长度之和最小（选择 $0$ 条通道时，长度之和为 $0$ 公里）。\n- 对于任意 $u, v$ $(s \\leq u < v \\leq e)$，$u$ 号基地和 $v$ 号基地可以通过选择的通道互相到达，中间经过停用的基地也没关系。\n- 选择的通道长度之和为 $C$ 公里时，维护成本为 $C$。\n\n由于尚未决定保留哪些基地，MR 希望知道所有可能的 $(i, j)$ $(0 \\leq i \\leq j \\leq N-1)$ 组合下，只保留编号为 $i$ 到 $j$ 的基地时的维护成本之和。你需要为 MR 计算这个值。由于结果可能非常大，请对 $1000000007$ 取模。\n\n你需要实现以下函数：\n\n```cpp\nint maintenance_costs_sum(vector<int> U, vector<int> V, vector<int> W);\n```\n\n- 该函数只会被调用一次。\n- `U, V, W`：大小为 $N-1$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-2)$，$U[i]$ 号基地和 $V[i]$ 号基地之间有一条长度为 $W[i]$ 公里的通道。\n- 该函数返回所有可能的 $(i, j)$ $(0 \\leq i \\leq j \\leq N-1)$ 组合下，只保留编号为 $i$ 到 $j$ 的基地时的维护成本之和，对 $1000000007$ 取模的结果。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2+i$ $(0 \\leq i \\leq N-2)$ 行：$U[i]\\,V[i]\\,W[i]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `maintenance_costs_sum` 返回的值", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 2.5\\cdot 10^5$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$0 \\leq U[i], V[i] \\leq N-1 ; U[i] \\neq V[i]$\n- 对于所有 $i$ $(0 \\leq i \\leq N-2)$，$1 \\leq W[i] \\leq 10^9$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $5$ | $N \\leq 300$ |\n| $2$ | $6$ | $N \\leq 4000$ |\n| $3$ | $10$ | 基地的编号是以 $0$ 号基地为根的树的前序遍历顺序之一 |\n| $4$ | $26$ | 每个基地最多连接 $2$ 条通道 |\n| $5$ | $53$ | 无附加限制 |", "locale": "zh-CN"}}}
{"pid": "P11346", "type": "P", "difficulty": 7, "samples": [["4\n1 2\n3 4\n5 6\n7 8", "24"], ["10\n1 5\n2 3\n4 7\n6 11\n8 9\n10 15\n12 13\n14 20\n16 17\n18 19", "13280"], ["10\n1 20\n2 9\n3 4\n5 8\n6 7\n10 17\n11 16\n12 13\n14 15\n18 19", "845040"], ["10\n1 5\n2 9\n3 10\n4 12\n6 14\n7 16\n8 17\n11 18\n13 19\n15 20", "1797408"], ["10\n12 16\n5 7\n10 19\n2 3\n4 6\n17 20\n8 11\n1 15\n14 18\n9 13", "647760"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2023", "交互题", "KOI（韩国）"], "title": "[KTSC 2023 R2] 会议室 2", "background": "**请勿用 C++14 (GCC 9) 提交。**\n\n请在代码开头加入如下代码：\n\n```cpp\n#include<vector>\nint count_removals(std::vector<int> S, std::vector<int> E);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T2 「[회의실 2](https://assets.ioikorea.kr/ioitst/2023/2/meeting2/meeting2_statement.pdf)」**\n\nKDH 公司每天会举行 $N$ 场会议。每场会议都有一个编号，从 $0$ 到 $N-1$。对于每个 $i$ $(0 \\leq i \\leq N-1)$，第 $i$ 场会议在时间 $S[i]$ 开始，在时间 $E[i]$ 结束。\n\nKDH 公司安排会议的方式很特别。如果某一天进行的两场不同会议 $i$ 和 $j$ 满足以下条件之一，则称这两场会议在该天是相关的：\n\n- 两场会议有重叠的时间段。\n- 存在第三场会议 $k$，使得 $i$ 和 $j$ 都与 $k$ 相关。\n\n如果两场会议 $i$ 和 $j$ 在该天不是相关的，则称它们在该天是无关的。KDH 公司在安排会议时，会将每场会议分配到特定的会议室。要求在同一天内，无关的会议不能分配到同一个会议室。KDH 公司会选择满足这些条件的分配方案中所需会议室数量最少的方案。所需的最少会议室数量称为会议的成本。\n\nKDH 公司认为目前的会议安排浪费了太多资源，决定将会议数量减少到只剩一场。为此，KDH 公司将在 $N-1$ 天内每天进行以下操作：\n\n- 选择一个尚未取消的会议。\n- 从当天起永久取消该会议。\n- 进行所有未取消的会议。\n\n当这个过程结束时，除了最后一场会议外，所有会议都被取消。最后剩下的会议是哪一场并不重要。\n\n为了进一步节省成本，KDH 公司希望找到一种方法，使得在 $N-1$ 天内每天的总成本最小。你需要计算出有多少种方法可以实现这一目标。两种方法相同的定义是：在 $N-1$ 天内每天选择取消的会议完全相同。即使剩下的会议分配方式不同，只要每天取消的会议相同，就认为是相同的方法。由于方法数量可能非常大，结果需要对 $1000000007$ 取模。\n\n你需要实现以下函数：\n\n```cpp\nint count_removals(vector<int> S, vector<int> E);\n```\n\n- `S, E`：大小为 $N$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-1)$，第 $i$ 场会议在时间 $S[i]$ 开始，在时间 $E[i]$ 结束。\n- 该函数返回在 $N-1$ 天内每天的总成本最小的情况下，选择取消会议的方法数量，对 $1000000007$ 取模。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2+i$ $(0 \\leq i \\leq N-1)$ 行：$S[i]\\,E[i]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `count_removals` 返回的值", "hint": "### 样例 1 解释\n\n考虑 $N=4, S=[1,3,5,7], E=[2,4,6,8]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\ncount_removals([1,3,5,7], [2,4,6,8]);\n```\n\n无论选择哪种方式取消会议，每天所需的会议室数量（即成本）依次为 $3$、$2$、$1$，总成本为 $6$。因此，所有方法都是可行的。\n\n函数应返回 `24`。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 2000$\n- 对于每个 $i$ $(0 \\leq i \\leq N-1)$，$1 \\leq S[i] < E[i] \\leq 2N$\n- 对于每个 $i,j$ $(0 \\leq i < j \\leq N-1)$，$S[i] \\neq S[j], S[i] \\neq E[j], E[i] \\neq S[j], E[i] \\neq E[j]$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $3$ | $N \\leq 10$；$S[0]=1, E[0]=2N$ |\n| $2$ | $8$ | $N \\leq 20$ |\n| $3$ | $30$ | $N \\leq 300$ |\n| $4$ | $12$ | 任意时刻进行的会议最多为 $2$ 场 |\n| $5$ | $12$ | 对于每个 $i,j$ $(0 \\leq i, j \\leq N-1)$，不存在 $i \\neq j, S[i] < S[j] < E[i] < E[j]$ 的 $i, j$ 对 |\n| $6$ | $10$ | 对于每个 $i,j$ $(0 \\leq i, j \\leq N-1)$，不存在 $i \\neq j, S[i] < S[j] < E[j] < E[i]$ 的 $i, j$ 对 |\n| $7$ | $25$ | 无附加限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2023 R2] 会议室 2", "background": "**请勿用 C++14 (GCC 9) 提交。**\n\n请在代码开头加入如下代码：\n\n```cpp\n#include<vector>\nint count_removals(std::vector<int> S, std::vector<int> E);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T2 「[회의실 2](https://assets.ioikorea.kr/ioitst/2023/2/meeting2/meeting2_statement.pdf)」**\n\nKDH 公司每天会举行 $N$ 场会议。每场会议都有一个编号，从 $0$ 到 $N-1$。对于每个 $i$ $(0 \\leq i \\leq N-1)$，第 $i$ 场会议在时间 $S[i]$ 开始，在时间 $E[i]$ 结束。\n\nKDH 公司安排会议的方式很特别。如果某一天进行的两场不同会议 $i$ 和 $j$ 满足以下条件之一，则称这两场会议在该天是相关的：\n\n- 两场会议有重叠的时间段。\n- 存在第三场会议 $k$，使得 $i$ 和 $j$ 都与 $k$ 相关。\n\n如果两场会议 $i$ 和 $j$ 在该天不是相关的，则称它们在该天是无关的。KDH 公司在安排会议时，会将每场会议分配到特定的会议室。要求在同一天内，无关的会议不能分配到同一个会议室。KDH 公司会选择满足这些条件的分配方案中所需会议室数量最少的方案。所需的最少会议室数量称为会议的成本。\n\nKDH 公司认为目前的会议安排浪费了太多资源，决定将会议数量减少到只剩一场。为此，KDH 公司将在 $N-1$ 天内每天进行以下操作：\n\n- 选择一个尚未取消的会议。\n- 从当天起永久取消该会议。\n- 进行所有未取消的会议。\n\n当这个过程结束时，除了最后一场会议外，所有会议都被取消。最后剩下的会议是哪一场并不重要。\n\n为了进一步节省成本，KDH 公司希望找到一种方法，使得在 $N-1$ 天内每天的总成本最小。你需要计算出有多少种方法可以实现这一目标。两种方法相同的定义是：在 $N-1$ 天内每天选择取消的会议完全相同。即使剩下的会议分配方式不同，只要每天取消的会议相同，就认为是相同的方法。由于方法数量可能非常大，结果需要对 $1000000007$ 取模。\n\n你需要实现以下函数：\n\n```cpp\nint count_removals(vector<int> S, vector<int> E);\n```\n\n- `S, E`：大小为 $N$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq N-1)$，第 $i$ 场会议在时间 $S[i]$ 开始，在时间 $E[i]$ 结束。\n- 该函数返回在 $N-1$ 天内每天的总成本最小的情况下，选择取消会议的方法数量，对 $1000000007$ 取模。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N$\n- 第 $2+i$ $(0 \\leq i \\leq N-1)$ 行：$S[i]\\,E[i]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `count_removals` 返回的值", "hint": "### 样例 1 解释\n\n考虑 $N=4, S=[1,3,5,7], E=[2,4,6,8]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\ncount_removals([1,3,5,7], [2,4,6,8]);\n```\n\n无论选择哪种方式取消会议，每天所需的会议室数量（即成本）依次为 $3$、$2$、$1$，总成本为 $6$。因此，所有方法都是可行的。\n\n函数应返回 `24`。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 2000$\n- 对于每个 $i$ $(0 \\leq i \\leq N-1)$，$1 \\leq S[i] < E[i] \\leq 2N$\n- 对于每个 $i,j$ $(0 \\leq i < j \\leq N-1)$，$S[i] \\neq S[j], S[i] \\neq E[j], E[i] \\neq S[j], E[i] \\neq E[j]$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $3$ | $N \\leq 10$；$S[0]=1, E[0]=2N$ |\n| $2$ | $8$ | $N \\leq 20$ |\n| $3$ | $30$ | $N \\leq 300$ |\n| $4$ | $12$ | 任意时刻进行的会议最多为 $2$ 场 |\n| $5$ | $12$ | 对于每个 $i,j$ $(0 \\leq i, j \\leq N-1)$，不存在 $i \\neq j, S[i] < S[j] < E[i] < E[j]$ 的 $i, j$ 对 |\n| $6$ | $10$ | 对于每个 $i,j$ $(0 \\leq i, j \\leq N-1)$，不存在 $i \\neq j, S[i] < S[j] < E[j] < E[i]$ 的 $i, j$ 对 |\n| $7$ | $25$ | 无附加限制 |", "locale": "zh-CN"}}}
{"pid": "P11347", "type": "P", "difficulty": 5, "samples": [["6 3\n1 4\n2 5\n3 3", "1\n3"], ["10 4\n1 4\n4 7\n8 9\n2 6", "2\n4 8 9"], ["5 1\n0 4", "1\n0 1 2 3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2023", "交互题", "KOI（韩国）"], "title": "[KTSC 2023 R2] 学生", "background": "**请勿用 C++14 (GCC 9) 提交。**\n\n```cpp\n#include<vector>\nstd::pair<int, std::vector<int>> complaint(int N, std::vector<int> L, std::vector<int> R);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T3 「[학생들](https://assets.ioikorea.kr/ioitst/2023/2/students/students_statement.pdf)」**\n\n在 IOI 大学，学生们不是用名字，而是用考试排名来称呼彼此。这所大学有 $N$ 名学生，对于每个 $i$ $(0 \\leq i \\leq N-1)$，第 $i$ 名学生在期中考试中排名第 $i+1$。\n\n为了准备期末考试，学生们自发组成了辅导小组。每个辅导小组可以用两个整数 $0 \\leq L \\leq R \\leq N-1$ 表示，表示编号在 $L$ 到 $R$ 之间的学生不在这个小组中，其他学生都在这个小组中。\n\n某天早晨，IOI 大学的所有学生都收到了一封邮件，通知他们至少存在一个辅导小组。这一天被称为第 $1$ 天早晨。从第 $d \\geq 1$ 天晚上开始，以下情况会发生：\n\n- 如果某个学生在第 $d$ 天早晨之后推断出存在一个不包含自己的辅导小组，他会感到不公平，并在第 $d$ 天晚上结束前提交投诉。一旦投诉提交，所有辅导小组的活动将在第 $d+1$ 天早晨之前结束。\n- 如果没有学生推断出存在一个不包含自己的辅导小组，则没有投诉提交，辅导小组的活动会在第 $d+1$ 天早晨继续。所有学生都会意识到没有人在第 $d$ 天提交投诉。\n\n除此之外，学生们不会以任何方式共享信息。也就是说，他们只能知道自己所在的辅导小组及其成员，以及是否有投诉提交。学生们总是根据自己掌握的信息进行推断，不会推断出可能错误的结论。\n\n你是 IOI 大学所有学生的朋友，知道所有辅导小组及其成员。当给定 $M$ 个辅导小组的信息时，请编写一个程序，找出投诉提交的日期 $k$ 以及在第 $k$ 天提交投诉的学生编号。如果永远没有投诉提交，则返回 `-1`。\n\n请注意，只有你作为外部人知道所有辅导小组的信息，包括小组的数量 $M$、每个小组的成员、问题的整体限制和部分限制等。学生们对此一无所知。\n\n你需要实现以下函数：\n\n```cpp\npair<int, vector<int>> complaint(int N, vector<int> L, vector<int> R);\n```\n\n- `L, R`：大小为 $M$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq M-1)$，第 $i$ 个辅导小组由编号小于 $L[i]$ 或大于 $R[i]$ 的学生组成。\n- 该函数返回一个由整数 $k$ 和一个大小不超过 $N$ 的整数数组 $V$ 组成的对。$k$ 是投诉提交的日期，$V$ 是在第 $k$ 天提交投诉的学生编号，按升序排列。如果永远没有投诉提交，则 $k$ 为 $-1$，$V$ 为空数组。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,M$\n- 第 $2+i$ $(0 \\leq i \\leq M-1)$ 行：$L[i]\\,R[i]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `complaint` 返回的值 $k$\n- 第 $2$ 行：函数 `complaint` 返回的数组 $V$ 的元素，以空格分隔", "hint": "### 样例 1 解释\n\n考虑 $N=6, M=3, L=[1,2,3], R=[4,5,3]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\ncomplaint(6, [1, 2, 3], [4, 5, 3]);\n```\n\n由于第 $3$ 号学生被所有辅导小组排除在外，他会在第一天立即提交投诉。其他学生在第一天不会提交投诉。因此，函数应返回 `(1, [3])`。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 2.5\\cdot 10^5$\n- $1 \\leq M \\leq 2.5\\cdot 10^5$\n- 对于每个 $i$ $(0 \\leq i \\leq M-1)$，$0 \\leq L[i] \\leq R[i] \\leq N-1$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $12$ | $N, M \\leq 10$ |\n| $2$ | $6$ | 对于每个 $i$ $(0 \\leq i \\leq M-1)$，$L[i]=R[i]$ |\n| $3$ | $15$ | $N, M \\leq 2500$ |\n| $4$ | $10$ | 对于每个 $i$ $(0 \\leq i, j \\leq M-1)$，区间 $[L[i], R[i]]$ 和 $[L[j], R[j]]$ 互不相交或包含彼此。即如果 $L[i] < L[j]$，则 $R[i] < L[j]$ 或 $R[j] \\leq R[i]$ |\n| $5$ | $18$ | 对于每个 $i$ $(0 \\leq i \\leq M-2)$，$L[i] < L[i+1], R[i] < R[i+1]$ |\n| $6$ | $39$ | 无附加限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2023 R2] 学生", "background": "**请勿用 C++14 (GCC 9) 提交。**\n\n```cpp\n#include<vector>\nstd::pair<int, std::vector<int>> complaint(int N, std::vector<int> L, std::vector<int> R);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T3 「[학생들](https://assets.ioikorea.kr/ioitst/2023/2/students/students_statement.pdf)」**\n\n在 IOI 大学，学生们不是用名字，而是用考试排名来称呼彼此。这所大学有 $N$ 名学生，对于每个 $i$ $(0 \\leq i \\leq N-1)$，第 $i$ 名学生在期中考试中排名第 $i+1$。\n\n为了准备期末考试，学生们自发组成了辅导小组。每个辅导小组可以用两个整数 $0 \\leq L \\leq R \\leq N-1$ 表示，表示编号在 $L$ 到 $R$ 之间的学生不在这个小组中，其他学生都在这个小组中。\n\n某天早晨，IOI 大学的所有学生都收到了一封邮件，通知他们至少存在一个辅导小组。这一天被称为第 $1$ 天早晨。从第 $d \\geq 1$ 天晚上开始，以下情况会发生：\n\n- 如果某个学生在第 $d$ 天早晨之后推断出存在一个不包含自己的辅导小组，他会感到不公平，并在第 $d$ 天晚上结束前提交投诉。一旦投诉提交，所有辅导小组的活动将在第 $d+1$ 天早晨之前结束。\n- 如果没有学生推断出存在一个不包含自己的辅导小组，则没有投诉提交，辅导小组的活动会在第 $d+1$ 天早晨继续。所有学生都会意识到没有人在第 $d$ 天提交投诉。\n\n除此之外，学生们不会以任何方式共享信息。也就是说，他们只能知道自己所在的辅导小组及其成员，以及是否有投诉提交。学生们总是根据自己掌握的信息进行推断，不会推断出可能错误的结论。\n\n你是 IOI 大学所有学生的朋友，知道所有辅导小组及其成员。当给定 $M$ 个辅导小组的信息时，请编写一个程序，找出投诉提交的日期 $k$ 以及在第 $k$ 天提交投诉的学生编号。如果永远没有投诉提交，则返回 `-1`。\n\n请注意，只有你作为外部人知道所有辅导小组的信息，包括小组的数量 $M$、每个小组的成员、问题的整体限制和部分限制等。学生们对此一无所知。\n\n你需要实现以下函数：\n\n```cpp\npair<int, vector<int>> complaint(int N, vector<int> L, vector<int> R);\n```\n\n- `L, R`：大小为 $M$ 的整数数组。对于每个 $i$ $(0 \\leq i \\leq M-1)$，第 $i$ 个辅导小组由编号小于 $L[i]$ 或大于 $R[i]$ 的学生组成。\n- 该函数返回一个由整数 $k$ 和一个大小不超过 $N$ 的整数数组 $V$ 组成的对。$k$ 是投诉提交的日期，$V$ 是在第 $k$ 天提交投诉的学生编号，按升序排列。如果永远没有投诉提交，则 $k$ 为 $-1$，$V$ 为空数组。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,M$\n- 第 $2+i$ $(0 \\leq i \\leq M-1)$ 行：$L[i]\\,R[i]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1$ 行：函数 `complaint` 返回的值 $k$\n- 第 $2$ 行：函数 `complaint` 返回的数组 $V$ 的元素，以空格分隔", "hint": "### 样例 1 解释\n\n考虑 $N=6, M=3, L=[1,2,3], R=[4,5,3]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\ncomplaint(6, [1, 2, 3], [4, 5, 3]);\n```\n\n由于第 $3$ 号学生被所有辅导小组排除在外，他会在第一天立即提交投诉。其他学生在第一天不会提交投诉。因此，函数应返回 `(1, [3])`。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 2.5\\cdot 10^5$\n- $1 \\leq M \\leq 2.5\\cdot 10^5$\n- 对于每个 $i$ $(0 \\leq i \\leq M-1)$，$0 \\leq L[i] \\leq R[i] \\leq N-1$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $12$ | $N, M \\leq 10$ |\n| $2$ | $6$ | 对于每个 $i$ $(0 \\leq i \\leq M-1)$，$L[i]=R[i]$ |\n| $3$ | $15$ | $N, M \\leq 2500$ |\n| $4$ | $10$ | 对于每个 $i$ $(0 \\leq i, j \\leq M-1)$，区间 $[L[i], R[i]]$ 和 $[L[j], R[j]]$ 互不相交或包含彼此。即如果 $L[i] < L[j]$，则 $R[i] < L[j]$ 或 $R[j] \\leq R[i]$ |\n| $5$ | $18$ | 对于每个 $i$ $(0 \\leq i \\leq M-2)$，$L[i] < L[i+1], R[i] < R[i+1]$ |\n| $6$ | $39$ | 无附加限制 |", "locale": "zh-CN"}}}
{"pid": "P11348", "type": "P", "difficulty": 6, "samples": [["5 4\n2 10\n7 9\n8 8\n9 6\n10 1\n1 10\n3 8\n5 7\n9 5\n3\n0 4 1 3\n2 3 0 2\n1 1 0 0", "224\n195\n152"], ["4 2\n1 9\n6 5\n8 3\n10 1\n5 8\n6 7\n4\n0 0 0 1\n1 1 0 1\n2 2 0 1\n3 3 0 1", "112\n144\n143\n135"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2023", "交互题", "KOI（韩国）"], "title": "[KTSC 2023 R2] 团队建设", "background": "**请勿用 C++14 (GCC 9) 提交。**\n\n请在程序开头加入如下代码：\n\n```cpp\nstd::vector<long long> build_teams(std::vector<int> A1, std::vector<int> B1, std::vector<int> A2, std::vector<int> B2, std::vector<int> L1, std::vector<int> R1, std::vector<int> L2, std::vector<int> R2);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T4 「[팀 만들기](https://assets.ioikorea.kr/ioitst/2023/2/teambuilding/teambuilding_statement.pdf)」**\n\n在 20XX 年的国际信息学奥林匹克竞赛中，新增了一个混合项目。在这个项目中，一名男生和一名女生将组成一个团队来解决问题。为了组建代表队参加混合项目，信息学奥林匹克竞赛委员会选拔了 $N$ 名男生候选人和 $M$ 名女生候选人。每个男生候选人从 $0$ 到 $N-1$ 编号，每个女生候选人从 $0$ 到 $M-1$ 编号。\n\n团队的实力取决于两名学生的思维能力和编程能力。学生的思维能力和编程能力可以用 $1$ 到 $10^9$ 之间的整数表示。第 $i$ 名男生的思维能力是 $A_1[i]$，编程能力是 $B_1[i]$。第 $j$ 名女生的思维能力是 $A_2[j]$，编程能力是 $B_2[j]$。如果第 $i$ 名男生和第 $j$ 名女生组成一个团队，那么这个团队的实力定义为 $\\left(A_1[i] + A_2[j]\\right) \\times \\left(B_1[i] + B_2[j]\\right)$。\n\n由于所有学生都是经过激烈竞争选拔出来的，因此不存在某个男生在思维能力和编程能力上都优于另一个男生的情况。更具体地说，男生的思维能力随着编号的增加而增加，编程能力随着编号的增加而减少。即，对于 $i$ $(0 \\leq i \\leq N-2)$，有 $A_1[i] < A_1[i+1]$ 和 $B_1[i] > B_1[i+1]$。女生也是如此，思维能力随着编号的增加而增加，编程能力随着编号的增加而减少。即，对于 $0 \\leq j \\leq M-2$，有 $A_2[j] < A_2[j+1]$ 和 $B_2[j] > B_2[j+1]$。\n\n信息学奥林匹克竞赛委员会希望根据不同的场景组建实力最强的团队。共有 $Q$ 个场景，每个场景编号从 $0$ 到 $Q-1$。在第 $k$ 个场景中，男生的编号必须在 $L_1[k]$ 到 $R_1[k]$ 之间，女生的编号必须在 $L_2[k]$ 到 $R_2[k]$ 之间。请编写一个程序，计算每个场景中可以组建的团队的最大实力。\n\n你需要实现以下函数：\n\n```cpp\nvector<long long> build_teams(vector<int> A1, vector<int> B1, vector<int> A2, vector<int> B2, vector<int> L1, vector<int> R1, vector<int> L2, vector<int> R2);\n```\n\n- `A1, B1`：长度为 $N$ 的数组。第 $i$ $(0 \\leq i \\leq N-1)$ 名男生的思维能力是 $A1[i]$，编程能力是 $B1[i]$。\n- `A2, B2`：长度为 $M$ 的数组。第 $j$ $(0 \\leq j \\leq M-1)$ 名女生的思维能力是 $A2[j]$，编程能力是 $B2[j]$。\n- `L1, R1, L2, R2`：长度为 $Q$ 的数组。在第 $k$ $(0 \\leq k \\leq Q-1)$ 个场景中，男生的编号必须在 $L1[k]$ 到 $R1[k]$ 之间，女生的编号必须在 $L2[k]$ 到 $R2[k]$ 之间。\n- 该函数返回一个长度为 $Q$ 的数组 $C$。$C[k]$ 是第 $k$ 个场景中可以组建的团队的最大实力。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,M$\n- 第 $2+i$ $(0 \\leq i \\leq N-1)$ 行：$A1[i]\\,B1[i]$\n- 第 $2+N+j$ $(0 \\leq j \\leq M-1)$ 行：$A2[j]\\,B2[j]$\n- 第 $2+N+M$ 行：$Q$\n- 第 $3+N+M+k$ $(0 \\leq k \\leq Q-1)$ 行：$L1[k]\\,R1[k]\\,L2[k]\\,R2[k]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1+k$ $(0 \\leq k \\leq Q-1)$ 行：函数 `build_teams` 返回的数组的第 $k$ 个元素", "hint": "### 样例 1 解释\n\n考虑 $N=5, M=4, A1=[2,7,8,9,10], B1=[10,9,8,6,1], A2=[1,3,5,9], B2=[10,8,7,5], Q=3, L1=[0,2,1], R1=[4,3,1], L2=[1,0,0], R2=[3,2,0]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\nbuild_teams([2,7,8,9,10], [10,9,8,6,1], [1,3,5,9], [10,8,7,5], [0,2,1], [4,3,1], [1,0,0], [3,2,0]);\n```\n\n在第 $0$ 个场景中，男生的编号必须在 $0$ 到 $4$ 之间，女生的编号必须在 $1$ 到 $3$ 之间。选择 $1$ 号男生和 $3$ 号女生组成团队，团队的实力为 $(7+9) \\times (9+5) = 224$。这是满足条件的团队中实力最大的。\n\n在第 $1$ 个场景中，男生的编号必须在 $2$ 到 $3$ 之间，女生的编号必须在 $0$ 到 $2$ 之间。选择 $2$ 号男生和 $2$ 号女生组成团队，团队的实力为 $(8+5) \\times (8+7) = 195$。这是满足条件的团队中实力最大的。\n\n在第 $2$ 个场景中，男生的编号必须是 $1$，女生的编号必须是 $0$。团队的实力为 $(7+1) \\times (9+10) = 152$。\n\n因此，函数应返回 `[224,195,152]`。\n\n### 样例 2 解释\n\n考虑 $N=4, M=2, A1=[1,6,8,10], B1=[9,5,3,1], A2=[5,6], B2=[8,7], Q=4, L1=[0,1,2,3], R1=[0,1,2,3], L2=[0,0,0,0], R2=[1,1,1,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\nbuild_teams([1,6,8,10], [9,5,3,1], [5,6], [8,7], [0,1,2,3], [0,1,2,3], [0,0,0,0], [1,1,1,1]);\n```\n\n在第 $0$ 个场景中，选择 $0$ 号男生和 $1$ 号女生组成团队，团队的实力为 $(1+6) \\times (9+7) = 112$。\n\n在第 $1$ 个场景中，选择 $1$ 号男生和 $1$ 号女生组成团队，团队的实力为 $(6+6) \\times (5+7) = 144$。\n\n在第 $2$ 个场景中，选择 $2$ 号男生和 $0$ 号女生组成团队，团队的实力为 $(8+5) \\times (3+8) = 143$。\n\n在第 $3$ 个场景中，选择 $3$ 号男生和 $0$ 号女生组成团队，团队的实力为 $(10+5) \\times (1+8) = 135$。\n\n这些都是满足条件的团队中实力最大的。因此，函数应返回 `[112,144,143,135]`。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 10^5$\n- $1 \\leq M \\leq 10^5$\n- 对于每个 $i$ $(0 \\leq i \\leq N-1)$，$1 \\leq A1[i], B1[i] \\leq 10^9$\n- 对于每个 $j$ $(0 \\leq j \\leq M-1)$，$1 \\leq A2[j], B2[j] \\leq 10^9$\n- 对于每个 $i$ $(0 \\leq i \\leq N-2)$，$A1[i] < A1[i+1], B1[i] > B1[i+1]$\n- 对于每个 $j$ $(0 \\leq j \\leq M-2)$，$A2[j] < A2[j+1], B2[j] > B2[j+1]$\n- $1 \\leq Q \\leq 10^5$\n- 对于每个 $k$ $(0 \\leq k \\leq Q-1)$，$0 \\leq L1[k] \\leq R1[k] \\leq N-1$\n- 对于每个 $k$ $(0 \\leq k \\leq Q-1)$，$0 \\leq L2[k] \\leq R2[k] \\leq M-1$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $5$ | $N \\leq 500, M \\leq 500, Q \\leq 500$ |\n| $2$ | $10$ | $Q \\leq 20$ |\n| $3$ | $10$ | 对于每个 $k$ $(0 \\leq k \\leq Q-1)$，$L2[k]=0, R2[k]=M-1$ |\n| $4$ | $35$ | 对于每个 $k$ $(0 \\leq k \\leq Q-1)$，$L2[k]=R2[k]$ |\n| $5$ | $40$ | 无附加限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KTSC 2023 R2] 团队建设", "background": "**请勿用 C++14 (GCC 9) 提交。**\n\n请在程序开头加入如下代码：\n\n```cpp\nstd::vector<long long> build_teams(std::vector<int> A1, std::vector<int> B1, std::vector<int> A2, std::vector<int> B2, std::vector<int> L1, std::vector<int> R1, std::vector<int> L2, std::vector<int> R2);\n```", "description": "**题目译自 [2023년도 국제정보올림피아드 대표학생 선발고사 - 2차 선발고사](https://www.ioikorea.kr/archives/ioitst/2023/)  T4 「[팀 만들기](https://assets.ioikorea.kr/ioitst/2023/2/teambuilding/teambuilding_statement.pdf)」**\n\n在 20XX 年的国际信息学奥林匹克竞赛中，新增了一个混合项目。在这个项目中，一名男生和一名女生将组成一个团队来解决问题。为了组建代表队参加混合项目，信息学奥林匹克竞赛委员会选拔了 $N$ 名男生候选人和 $M$ 名女生候选人。每个男生候选人从 $0$ 到 $N-1$ 编号，每个女生候选人从 $0$ 到 $M-1$ 编号。\n\n团队的实力取决于两名学生的思维能力和编程能力。学生的思维能力和编程能力可以用 $1$ 到 $10^9$ 之间的整数表示。第 $i$ 名男生的思维能力是 $A_1[i]$，编程能力是 $B_1[i]$。第 $j$ 名女生的思维能力是 $A_2[j]$，编程能力是 $B_2[j]$。如果第 $i$ 名男生和第 $j$ 名女生组成一个团队，那么这个团队的实力定义为 $\\left(A_1[i] + A_2[j]\\right) \\times \\left(B_1[i] + B_2[j]\\right)$。\n\n由于所有学生都是经过激烈竞争选拔出来的，因此不存在某个男生在思维能力和编程能力上都优于另一个男生的情况。更具体地说，男生的思维能力随着编号的增加而增加，编程能力随着编号的增加而减少。即，对于 $i$ $(0 \\leq i \\leq N-2)$，有 $A_1[i] < A_1[i+1]$ 和 $B_1[i] > B_1[i+1]$。女生也是如此，思维能力随着编号的增加而增加，编程能力随着编号的增加而减少。即，对于 $0 \\leq j \\leq M-2$，有 $A_2[j] < A_2[j+1]$ 和 $B_2[j] > B_2[j+1]$。\n\n信息学奥林匹克竞赛委员会希望根据不同的场景组建实力最强的团队。共有 $Q$ 个场景，每个场景编号从 $0$ 到 $Q-1$。在第 $k$ 个场景中，男生的编号必须在 $L_1[k]$ 到 $R_1[k]$ 之间，女生的编号必须在 $L_2[k]$ 到 $R_2[k]$ 之间。请编写一个程序，计算每个场景中可以组建的团队的最大实力。\n\n你需要实现以下函数：\n\n```cpp\nvector<long long> build_teams(vector<int> A1, vector<int> B1, vector<int> A2, vector<int> B2, vector<int> L1, vector<int> R1, vector<int> L2, vector<int> R2);\n```\n\n- `A1, B1`：长度为 $N$ 的数组。第 $i$ $(0 \\leq i \\leq N-1)$ 名男生的思维能力是 $A1[i]$，编程能力是 $B1[i]$。\n- `A2, B2`：长度为 $M$ 的数组。第 $j$ $(0 \\leq j \\leq M-1)$ 名女生的思维能力是 $A2[j]$，编程能力是 $B2[j]$。\n- `L1, R1, L2, R2`：长度为 $Q$ 的数组。在第 $k$ $(0 \\leq k \\leq Q-1)$ 个场景中，男生的编号必须在 $L1[k]$ 到 $R1[k]$ 之间，女生的编号必须在 $L2[k]$ 到 $R2[k]$ 之间。\n- 该函数返回一个长度为 $Q$ 的数组 $C$。$C[k]$ 是第 $k$ 个场景中可以组建的团队的最大实力。\n\n注意，提交的代码中不应包含任何输入输出操作。", "inputFormat": "示例评测程序按以下格式读取输入：\n\n- 第 $1$ 行：$N\\,M$\n- 第 $2+i$ $(0 \\leq i \\leq N-1)$ 行：$A1[i]\\,B1[i]$\n- 第 $2+N+j$ $(0 \\leq j \\leq M-1)$ 行：$A2[j]\\,B2[j]$\n- 第 $2+N+M$ 行：$Q$\n- 第 $3+N+M+k$ $(0 \\leq k \\leq Q-1)$ 行：$L1[k]\\,R1[k]\\,L2[k]\\,R2[k]$", "outputFormat": "示例评测程序按以下格式输出：\n\n- 第 $1+k$ $(0 \\leq k \\leq Q-1)$ 行：函数 `build_teams` 返回的数组的第 $k$ 个元素", "hint": "### 样例 1 解释\n\n考虑 $N=5, M=4, A1=[2,7,8,9,10], B1=[10,9,8,6,1], A2=[1,3,5,9], B2=[10,8,7,5], Q=3, L1=[0,2,1], R1=[4,3,1], L2=[1,0,0], R2=[3,2,0]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\nbuild_teams([2,7,8,9,10], [10,9,8,6,1], [1,3,5,9], [10,8,7,5], [0,2,1], [4,3,1], [1,0,0], [3,2,0]);\n```\n\n在第 $0$ 个场景中，男生的编号必须在 $0$ 到 $4$ 之间，女生的编号必须在 $1$ 到 $3$ 之间。选择 $1$ 号男生和 $3$ 号女生组成团队，团队的实力为 $(7+9) \\times (9+5) = 224$。这是满足条件的团队中实力最大的。\n\n在第 $1$ 个场景中，男生的编号必须在 $2$ 到 $3$ 之间，女生的编号必须在 $0$ 到 $2$ 之间。选择 $2$ 号男生和 $2$ 号女生组成团队，团队的实力为 $(8+5) \\times (8+7) = 195$。这是满足条件的团队中实力最大的。\n\n在第 $2$ 个场景中，男生的编号必须是 $1$，女生的编号必须是 $0$。团队的实力为 $(7+1) \\times (9+10) = 152$。\n\n因此，函数应返回 `[224,195,152]`。\n\n### 样例 2 解释\n\n考虑 $N=4, M=2, A1=[1,6,8,10], B1=[9,5,3,1], A2=[5,6], B2=[8,7], Q=4, L1=[0,1,2,3], R1=[0,1,2,3], L2=[0,0,0,0], R2=[1,1,1,1]$ 的情况。\n\n评测程序将调用如下函数：\n\n```cpp\nbuild_teams([1,6,8,10], [9,5,3,1], [5,6], [8,7], [0,1,2,3], [0,1,2,3], [0,0,0,0], [1,1,1,1]);\n```\n\n在第 $0$ 个场景中，选择 $0$ 号男生和 $1$ 号女生组成团队，团队的实力为 $(1+6) \\times (9+7) = 112$。\n\n在第 $1$ 个场景中，选择 $1$ 号男生和 $1$ 号女生组成团队，团队的实力为 $(6+6) \\times (5+7) = 144$。\n\n在第 $2$ 个场景中，选择 $2$ 号男生和 $0$ 号女生组成团队，团队的实力为 $(8+5) \\times (3+8) = 143$。\n\n在第 $3$ 个场景中，选择 $3$ 号男生和 $0$ 号女生组成团队，团队的实力为 $(10+5) \\times (1+8) = 135$。\n\n这些都是满足条件的团队中实力最大的。因此，函数应返回 `[112,144,143,135]`。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 10^5$\n- $1 \\leq M \\leq 10^5$\n- 对于每个 $i$ $(0 \\leq i \\leq N-1)$，$1 \\leq A1[i], B1[i] \\leq 10^9$\n- 对于每个 $j$ $(0 \\leq j \\leq M-1)$，$1 \\leq A2[j], B2[j] \\leq 10^9$\n- 对于每个 $i$ $(0 \\leq i \\leq N-2)$，$A1[i] < A1[i+1], B1[i] > B1[i+1]$\n- 对于每个 $j$ $(0 \\leq j \\leq M-2)$，$A2[j] < A2[j+1], B2[j] > B2[j+1]$\n- $1 \\leq Q \\leq 10^5$\n- 对于每个 $k$ $(0 \\leq k \\leq Q-1)$，$0 \\leq L1[k] \\leq R1[k] \\leq N-1$\n- 对于每个 $k$ $(0 \\leq k \\leq Q-1)$，$0 \\leq L2[k] \\leq R2[k] \\leq M-1$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 分值 | 附加限制 |\n| :-: | :-: | :-: |\n| $1$ | $5$ | $N \\leq 500, M \\leq 500, Q \\leq 500$ |\n| $2$ | $10$ | $Q \\leq 20$ |\n| $3$ | $10$ | 对于每个 $k$ $(0 \\leq k \\leq Q-1)$，$L2[k]=0, R2[k]=M-1$ |\n| $4$ | $35$ | 对于每个 $k$ $(0 \\leq k \\leq Q-1)$，$L2[k]=R2[k]$ |\n| $5$ | $40$ | 无附加限制 |", "locale": "zh-CN"}}}
{"pid": "P11349", "type": "P", "difficulty": 3, "samples": [["3 3\n2 5\n1 1\n8 3\n3 2\n9 4\n1 3", "4"], ["3 4\n2 3\n1 1\n8 4\n2 0\n7 0\n1 0\n8 0", "11"], ["5 1\n3 4\n1 2\n5 6\n2 8\n4 0\n3 6", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2024", "双指针 two-pointer", "NOISG（新加坡）"], "title": "[NOISG 2024 Finals] Problem Setter", "background": "Stuart 是一名热衷于编程比赛的题目设计者，他为多个比赛设定了许多问题。他希望将自己的一些问题提交到编程比赛中，以获得更多的荣誉。", "description": "Stuart 可以将题目提交到 $c$ 个比赛中。如果将问题提交到第 $i$ 个比赛，他的满意度会增加 $s_i$。但由于比赛的结构和其他题目设计者的竞争，第 $i$ 个比赛只会接受质量至少为 $m_i$ 的题目。每个比赛可以接受多个问题，每个问题都会增加 $s_i$ 的满意度。\n\nStuart 总共设计了 $p$ 道问题，他认为第 $j$ 道问题的质量是 $q_j$。但由于问题准备过程的难度，提交第 $j$ 道问题到任何比赛会使他的满意度减少 $d_j$。显然，每个问题最多只能提交到一个比赛，或者可以选择不提交。\n\n请帮 Stuart 找到一个最优的提交方案，以使他的满意度最大化。如果所有提交方案都会导致负满意度，他可以选择不提交任何问题，最终满意度为 $0$。", "inputFormat": "- 第一行包含两个整数 $c$ 和 $p$，分别表示比赛数量和问题数量。\n- 接下来的 $c$ 行中，第 $i$ 行包含两个整数 $m_i$ 和 $s_i$，表示第 $i$ 个比赛的最低问题质量和增加的满意度。\n- 接下来的 $p$ 行中，第 $j$ 行包含两个整数 $q_j$ 和 $d_j$，表示第 $j$ 道问题的质量和提交所带来的满意度损失。", "outputFormat": "- 输出一个整数，表示 Stuart 可以获得的最大满意度。如果他选择不提交任何问题，输出 $0$。", "hint": "【样例解释】\n\n对于样例 #1：\n- 比赛 $1$ 的最低质量要求为 $2$，问题 $1$ 满足条件，提交后增加 $5 - 2 = 3$ 的满意度。\n- 比赛 $1$ 的最低质量要求为 $2$，问题 $2$ 满足条件，提交后增加 $5 - 4 = 1$ 的满意度。\n- 最终满意度为 $3 + 1 = 4$。\n- 问题 $3$ 和其他比赛没有提交。\n\n对于样例 #2：\n- 根据提交方案，最优满意度为 $11$。\n\n对于样例 #3：\n- 最优方案使满意度为 $2$。\n\n【数据范围】\n\n- $1 \\leq c, p \\leq 2\\times 10^5$\n- $0 \\leq m_i, s_i, q_j, d_j \\leq 10^6$\n\n| 子任务编号 | 分值 | 限制条件                     |\n|:---:|:---:|:---:|\n| $0$ | $0$  | 样例测试用例                     |\n| $1$ | $18$ | $1 \\leq c \\leq 1,000, p = 1$     |\n| $2$ | $16$ | $1 \\leq c, p \\leq 1,000$         |\n| $3$ | $26$ | $d_j = 0$                        |\n| $4$ | $40$ | 无额外限制                       |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2024 Finals] Problem Setter", "background": "Stuart 是一名热衷于编程比赛的题目设计者，他为多个比赛设定了许多问题。他希望将自己的一些问题提交到编程比赛中，以获得更多的荣誉。", "description": "Stuart 可以将题目提交到 $c$ 个比赛中。如果将问题提交到第 $i$ 个比赛，他的满意度会增加 $s_i$。但由于比赛的结构和其他题目设计者的竞争，第 $i$ 个比赛只会接受质量至少为 $m_i$ 的题目。每个比赛可以接受多个问题，每个问题都会增加 $s_i$ 的满意度。\n\nStuart 总共设计了 $p$ 道问题，他认为第 $j$ 道问题的质量是 $q_j$。但由于问题准备过程的难度，提交第 $j$ 道问题到任何比赛会使他的满意度减少 $d_j$。显然，每个问题最多只能提交到一个比赛，或者可以选择不提交。\n\n请帮 Stuart 找到一个最优的提交方案，以使他的满意度最大化。如果所有提交方案都会导致负满意度，他可以选择不提交任何问题，最终满意度为 $0$。", "inputFormat": "- 第一行包含两个整数 $c$ 和 $p$，分别表示比赛数量和问题数量。\n- 接下来的 $c$ 行中，第 $i$ 行包含两个整数 $m_i$ 和 $s_i$，表示第 $i$ 个比赛的最低问题质量和增加的满意度。\n- 接下来的 $p$ 行中，第 $j$ 行包含两个整数 $q_j$ 和 $d_j$，表示第 $j$ 道问题的质量和提交所带来的满意度损失。", "outputFormat": "- 输出一个整数，表示 Stuart 可以获得的最大满意度。如果他选择不提交任何问题，输出 $0$。", "hint": "【样例解释】\n\n对于样例 #1：\n- 比赛 $1$ 的最低质量要求为 $2$，问题 $1$ 满足条件，提交后增加 $5 - 2 = 3$ 的满意度。\n- 比赛 $1$ 的最低质量要求为 $2$，问题 $2$ 满足条件，提交后增加 $5 - 4 = 1$ 的满意度。\n- 最终满意度为 $3 + 1 = 4$。\n- 问题 $3$ 和其他比赛没有提交。\n\n对于样例 #2：\n- 根据提交方案，最优满意度为 $11$。\n\n对于样例 #3：\n- 最优方案使满意度为 $2$。\n\n【数据范围】\n\n- $1 \\leq c, p \\leq 2\\times 10^5$\n- $0 \\leq m_i, s_i, q_j, d_j \\leq 10^6$\n\n| 子任务编号 | 分值 | 限制条件                     |\n|:---:|:---:|:---:|\n| $0$ | $0$  | 样例测试用例                     |\n| $1$ | $18$ | $1 \\leq c \\leq 1,000, p = 1$     |\n| $2$ | $16$ | $1 \\leq c, p \\leq 1,000$         |\n| $3$ | $26$ | $d_j = 0$                        |\n| $4$ | $40$ | 无额外限制                       |", "locale": "zh-CN"}}}
{"pid": "P11350", "type": "P", "difficulty": 4, "samples": [["3 3\n1 2 3\n2 3 1\n1 3 2", "2\nBBD"], ["5 6\n3 2 3\n4 2 1\n5 3 9\n1 3 5\n1 4 2\n2 3 1", "9\nDBDDB"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "Special Judge", "NOISG（新加坡）"], "title": "[NOISG 2024 Finals] Shops", "background": "", "description": "Yuland 是一个由 $n$ 个城市组成的小镇，城市之间通过 $m$ 条双向道路连接，每条道路有不同的长度。从任何城市可以通过道路到达其他城市，可能存在多条道路连接相同的城市对。\n\n每个城市可以建造一个兔子店或鸭子店，但不能同时建造两者。每个城市的居民希望能够收集到这两种动物。一个城市的不便程度定义为距离最近的兔子店和距离最近的鸭子店的距离之间的最大值。\n\n你需要帮助 Yuland 的市长决定在每个城市建造哪种店铺，以最小化所有城市中的最大不便程度。", "inputFormat": "- 第一行包含两个整数 $n$ 和 $m$，分别表示城市数量和道路数量。\n- 接下来的 $m$ 行，每行包含三个整数 $u_i$、$v_i$ 和 $w_i$，表示一条连接城市 $u_i$ 和 $v_i$ 的双向道路，其长度为 $w_i$。\n", "outputFormat": "- 第一行输出一个整数，表示最小可能的不便程度的最大值。\n- 第二行输出一个由 $n$ 个字符组成的字符串，其中第 $i$ 个字符表示第 $i$ 个城市建造的店铺类型：\n  - `B` 表示兔子店。\n  - `D` 表示鸭子店。\n- 如果有多个满足条件的方案，可以输出任意一个。\n", "hint": "【样例解释】\n\n对于样例 #1：\n- 城市 $1$ 和 $2$ 建造兔子店，城市 $3$ 建造鸭子店。\n- 对于城市 $1$，到最近的鸭子店的距离为 $2$，到最近的兔子店的距离为 $0$。\n- 对于城市 $2$，到最近的兔子店和鸭子店的距离均为 $1$。\n- 对于城市 $3$，到最近的兔子店的距离为 $1$，到最近的鸭子店的距离为 $0$。\n- 最大不便程度为 $2$。\n\n对于样例 #2：\n- 城市建造的店铺类型为 `DBDDB`，最大不便程度为 $9$。\n\n【数据范围】\n\n- $2 \\leq n, m \\leq 500,000$\n- $1 \\leq u_i, v_i \\leq n$\n- $1 \\leq w_i \\leq 10^9$\n\n| 子任务编号 | 分值 | 限制条件                     |\n|:---:|:---:|:---:|\n| $0$ | $0$  | 样例测试用例                     |\n| $1$ | $7$  | $n \\leq 16$                      |\n| $2$ | $13$ | $m = n-1$ 且 $u_i = i, v_i = i+1$ |\n| $3$ | $18$ | $m = n-1$                        |\n| $4$ | $24$ | $w_i = 1$                        |\n| $5$ | $38$ | 无额外限制                       |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2024 Finals] Shops", "background": "", "description": "Yuland 是一个由 $n$ 个城市组成的小镇，城市之间通过 $m$ 条双向道路连接，每条道路有不同的长度。从任何城市可以通过道路到达其他城市，可能存在多条道路连接相同的城市对。\n\n每个城市可以建造一个兔子店或鸭子店，但不能同时建造两者。每个城市的居民希望能够收集到这两种动物。一个城市的不便程度定义为距离最近的兔子店和距离最近的鸭子店的距离之间的最大值。\n\n你需要帮助 Yuland 的市长决定在每个城市建造哪种店铺，以最小化所有城市中的最大不便程度。", "inputFormat": "- 第一行包含两个整数 $n$ 和 $m$，分别表示城市数量和道路数量。\n- 接下来的 $m$ 行，每行包含三个整数 $u_i$、$v_i$ 和 $w_i$，表示一条连接城市 $u_i$ 和 $v_i$ 的双向道路，其长度为 $w_i$。\n", "outputFormat": "- 第一行输出一个整数，表示最小可能的不便程度的最大值。\n- 第二行输出一个由 $n$ 个字符组成的字符串，其中第 $i$ 个字符表示第 $i$ 个城市建造的店铺类型：\n  - `B` 表示兔子店。\n  - `D` 表示鸭子店。\n- 如果有多个满足条件的方案，可以输出任意一个。\n", "hint": "【样例解释】\n\n对于样例 #1：\n- 城市 $1$ 和 $2$ 建造兔子店，城市 $3$ 建造鸭子店。\n- 对于城市 $1$，到最近的鸭子店的距离为 $2$，到最近的兔子店的距离为 $0$。\n- 对于城市 $2$，到最近的兔子店和鸭子店的距离均为 $1$。\n- 对于城市 $3$，到最近的兔子店的距离为 $1$，到最近的鸭子店的距离为 $0$。\n- 最大不便程度为 $2$。\n\n对于样例 #2：\n- 城市建造的店铺类型为 `DBDDB`，最大不便程度为 $9$。\n\n【数据范围】\n\n- $2 \\leq n, m \\leq 500,000$\n- $1 \\leq u_i, v_i \\leq n$\n- $1 \\leq w_i \\leq 10^9$\n\n| 子任务编号 | 分值 | 限制条件                     |\n|:---:|:---:|:---:|\n| $0$ | $0$  | 样例测试用例                     |\n| $1$ | $7$  | $n \\leq 16$                      |\n| $2$ | $13$ | $m = n-1$ 且 $u_i = i, v_i = i+1$ |\n| $3$ | $18$ | $m = n-1$                        |\n| $4$ | $24$ | $w_i = 1$                        |\n| $5$ | $38$ | 无额外限制                       |", "locale": "zh-CN"}}}
{"pid": "P11352", "type": "P", "difficulty": 6, "samples": [["4 4\n2 4\n3 1\n4 1\n2 3", "3 4 -1 -1"], ["6 8\n1 5\n5 4\n6 2\n2 5\n4 3\n6 1\n6 5\n2 1", "8 8 5 5 5 6"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "NOISG（新加坡）"], "title": "[NOISG 2024 Finals] Coin", "background": "", "description": "Benson 有 $n$ 枚不同重量的硬币和一个天平。每次将硬币 $x$ 和 $y$ 放在天平上，可以知道它们的相对重量，即 $x$ 是否比 $y$ 更重。\n\n硬币 $x$ 的排名（rank）定义为不比它更重的硬币数量（包括自身）。例如，最轻的硬币的排名是 $1$，次轻的是 $2$，最重的是 $n$。\n\n对于每个硬币，当且仅当基于已有的称量结果可以唯一确定其排名时，称其排名被“确定”（determined）。\n\n你的任务是帮助 Benson 找出每个硬币首次确定排名的称量序号，或者判断它的排名永远无法确定。", "inputFormat": "- 第一行包含两个用空格分隔的整数 $n$ 和 $m$，表示硬币的数量和称量的次数。\n- 接下来的 $m$ 行，每行包含两个整数 $x$ 和 $y$，表示硬币 $x$ 比硬币 $y$ 轻。", "outputFormat": "输出 $n$ 个整数。如果硬币 $i$ 的排名在所有 $m$ 次称量后仍未确定，输出 $-1$。否则，输出首次确定排名的称量序号 $k$（$1 \\leq k \\leq m$）。", "hint": "【样例解释】\n\n对于样例 #1：\n- 硬币 $1$ 的排名在第 $3$ 次称量后确定，输出 $3$。\n- 硬币 $2$ 的排名在第 $4$ 次称量后确定，输出 $4$。\n- 硬币 $3$ 和 $4$ 的排名无法确定，输出 $-1$。\n\n对于样例 #2：\n- 每个硬币的排名确定的时间点分别是 $8$，$8$，$5$，$5$，$5$ 和 $6$。\n\n【数据范围】\n\n- $2 \\leq n \\leq 200,000$\n- $1 \\leq m \\leq 800,000$\n- $1 \\leq x, y \\leq n$\n- 硬币之间的所有称量关系形成一个有效的偏序。\n\n| 子任务编号 | 分值 | 限制条件                     |\n|:---:|:---:|:---:|\n| $0$ | $0$  | 样例测试用例                     |\n| $1$ | $6$  | $1 \\leq n \\leq 7, 1 \\leq m \\leq 20$ |\n| $2$ | $16$ | $1 \\leq n \\leq 100, 1 \\leq m \\leq 400$ |\n| $3$ | $10$ | $1 \\leq n \\leq 1000, 1 \\leq m \\leq 4000$ |\n| $4$ | $68$ | 无额外限制                       |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2024 Finals] Coin", "background": "", "description": "Benson 有 $n$ 枚不同重量的硬币和一个天平。每次将硬币 $x$ 和 $y$ 放在天平上，可以知道它们的相对重量，即 $x$ 是否比 $y$ 更重。\n\n硬币 $x$ 的排名（rank）定义为不比它更重的硬币数量（包括自身）。例如，最轻的硬币的排名是 $1$，次轻的是 $2$，最重的是 $n$。\n\n对于每个硬币，当且仅当基于已有的称量结果可以唯一确定其排名时，称其排名被“确定”（determined）。\n\n你的任务是帮助 Benson 找出每个硬币首次确定排名的称量序号，或者判断它的排名永远无法确定。", "inputFormat": "- 第一行包含两个用空格分隔的整数 $n$ 和 $m$，表示硬币的数量和称量的次数。\n- 接下来的 $m$ 行，每行包含两个整数 $x$ 和 $y$，表示硬币 $x$ 比硬币 $y$ 轻。", "outputFormat": "输出 $n$ 个整数。如果硬币 $i$ 的排名在所有 $m$ 次称量后仍未确定，输出 $-1$。否则，输出首次确定排名的称量序号 $k$（$1 \\leq k \\leq m$）。", "hint": "【样例解释】\n\n对于样例 #1：\n- 硬币 $1$ 的排名在第 $3$ 次称量后确定，输出 $3$。\n- 硬币 $2$ 的排名在第 $4$ 次称量后确定，输出 $4$。\n- 硬币 $3$ 和 $4$ 的排名无法确定，输出 $-1$。\n\n对于样例 #2：\n- 每个硬币的排名确定的时间点分别是 $8$，$8$，$5$，$5$，$5$ 和 $6$。\n\n【数据范围】\n\n- $2 \\leq n \\leq 200,000$\n- $1 \\leq m \\leq 800,000$\n- $1 \\leq x, y \\leq n$\n- 硬币之间的所有称量关系形成一个有效的偏序。\n\n| 子任务编号 | 分值 | 限制条件                     |\n|:---:|:---:|:---:|\n| $0$ | $0$  | 样例测试用例                     |\n| $1$ | $6$  | $1 \\leq n \\leq 7, 1 \\leq m \\leq 20$ |\n| $2$ | $16$ | $1 \\leq n \\leq 100, 1 \\leq m \\leq 400$ |\n| $3$ | $10$ | $1 \\leq n \\leq 1000, 1 \\leq m \\leq 4000$ |\n| $4$ | $68$ | 无额外限制                       |", "locale": "zh-CN"}}}
{"pid": "P11353", "type": "P", "difficulty": 7, "samples": [["5 1 4\n-4 -3 -2 5\n-6 4 4 4\n1 2 0 6\n4 4 -1 4\n-2 6 -4 -2\n-1 2\n3 3\n0 6\n2 -3", "3\n8\n-1\n-1"], ["2 1 4\n-1000000000 -1 0 999999999\n0 999999999 -1000000000 -1\n1 1\n-1 1\n-1 -1\n1 -1", "2\n-1\n4000000002\n-1"], ["2 2 6\n-2 5 1 1\n0 1 -3 -2\n1\n2\n3\n4\n5\n6", "4\n8\n13\n21\n32\n48"], ["2 2 4\n0 9999999 -10000000 -1\n-10000000 -1 10000000 29999999\n12\n1234\n123456\n12345678", "235\n2285986\n22862261089\n231374765559370"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "NOISG（新加坡）"], "title": "[NOISG 2024 Finals] Field", "background": "", "description": "Stuart the Snail 住在一片田野上，这片田野可以被描述为一个无限的二维平面。在田野的每个整数坐标点上都有可以吃的植物，而 Stuart 的家位于原点 $(0, 0)$。\n\n下雨了，Stuart 能够轻松地在田野上移动。每小时他可以选择一个相邻的植物坐标移动过去并吃掉它。具体来说，如果他当前在 $(x, y)$，他可以移动到 $(x+1, y)$、$(x, y+1)$、$(x-1, y)$ 或 $(x, y-1)$。他可以在雨停前继续移动，也可以选择停止并停留在某个植物上，包括留在原地。\n\n然而，田野中有 $n$ 个深水坑，每个水坑覆盖一个矩形区域，Stuart 无法安全地通过。水坑 $i$ 的覆盖范围是满足 $a_i \\leq x \\leq b_i$ 且 $c_i \\leq y \\leq d_i$ 的所有整数坐标点。注意，水坑可能存在重叠。\n\n你需要回答 $q$ 个查询，每个查询的类型由 $t$ 指定：\n- 如果 $t = 1$，查询 Stuart 从原点移动到 $(x_j, y_j)$ 所需的最短时间（以小时为单位）。如果无法到达目的地，输出 $-1$。\n- 如果 $t = 2$，假设雨将持续 $m_j$ 小时，计算 Stuart 在最多 $m_j$ 小时内可以到达的不同位置数量。", "inputFormat": "- 第一行包含三个整数 $n$、$t$ 和 $q$，分别表示水坑数量、查询类型和查询数量。\n- 接下来的 $n$ 行中，每行包含四个整数 $a_i$、$b_i$、$c_i$ 和 $d_i$，表示水坑 $i$ 的范围。\n- 如果 $t = 1$，接下来的 $q$ 行每行包含两个整数 $x_j$ 和 $y_j$，表示查询的目标坐标。\n- 如果 $t = 2$，接下来的 $q$ 行每行包含一个整数 $m_j$，表示雨的持续时间。", "outputFormat": "- 对于每个查询，输出一个整数作为答案：\n  - 如果 $t = 1$，输出 Stuart 到达目标位置的最短时间；如果无法到达，输出 $-1$。\n  - 如果 $t = 2$，输出 Stuart 在最多 $m_j$ 小时内可以到达的不同位置数量。", "hint": "【样例解释】\n\n对于样例 #1：\n- Stuart 可以在 $3$ 小时内到达 $(3, 3)$。\n- Stuart 无法到达 $(2, -3)$，因为目标位置被水坑覆盖。\n\n对于样例 #2：\n- Stuart 在 $1$ 小时内可以到达 $4$ 个不同的位置。\n- 在 $2$ 小时内，可以到达 $8$ 个位置。\n\n【数据范围】\n\n- $1 \\leq n \\leq 400$\n- $1 \\leq t \\leq 2$\n- $1 \\leq q \\leq 200,000$\n- $-10^9 \\leq a_i \\leq b_i \\leq 10^9$\n- $-10^9 \\leq c_i \\leq d_i \\leq 10^9$\n- 原点 $(0, 0)$ 不被任何水坑覆盖。\n- 如果 $t = 1$，则 $-10^9 \\leq x_j, y_j \\leq 10^9$。\n- 如果 $t = 2$，则 $1 \\leq m_j \\leq 10^9$。\n\n| 子任务编号 | 分值 | $t=$ | $n\\le$ |  $q\\le$   |                  $a_i,b_i,c_i,d_i,x_i,y_i$                   |\n| :--------: | :--: | :--: | :----: | :-------: | :----------------------------------------------------------: |\n|    $0$     | $0$  | $/$  |  $/$   |    $/$    |                             $/$                              |\n|    $1$     | $5$  | $1$  | $100$  | $200,000$ |           $-400\\le a_i,b_i,c_i,d_i,x_i,y_i\\le400$            |\n|    $2$     | $17$ | $1$  | $100$  | $200,000$ | $a_i\\equiv c_i \\equiv 0,b_i\\equiv d_i \\equiv -1 \\pmod{10^7}$ |\n|    $3$     | $8$  | $1$  | $100$  | $200,000$ |                             $/$                              |\n|    $4$     | $8$  | $2$  | $100$  |   $400$   |           $-400\\le a_i,b_i,c_i,d_i,x_i,y_i\\le400$            |\n|    $5$     | $21$ | $2$  | $100$  |   $400$   | $a_i\\equiv c_i \\equiv 0,b_i\\equiv d_i \\equiv -1 \\pmod{10^7}$ |\n|    $6$     | $10$ | $2$  | $100$  |   $400$   |                             $/$                              |\n|    $7$     | $13$ | $2$  | $100$  |   $400$   |                             $/$                              |\n|    $8$     | $14$ | $2$  | $100$  | $200,000$ |                             $/$                              |\n|    $9$     | $4$  | $2$  | $400$  | $200,000$ |                             $/$                              |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2024 Finals] Field", "background": "", "description": "Stuart the Snail 住在一片田野上，这片田野可以被描述为一个无限的二维平面。在田野的每个整数坐标点上都有可以吃的植物，而 Stuart 的家位于原点 $(0, 0)$。\n\n下雨了，Stuart 能够轻松地在田野上移动。每小时他可以选择一个相邻的植物坐标移动过去并吃掉它。具体来说，如果他当前在 $(x, y)$，他可以移动到 $(x+1, y)$、$(x, y+1)$、$(x-1, y)$ 或 $(x, y-1)$。他可以在雨停前继续移动，也可以选择停止并停留在某个植物上，包括留在原地。\n\n然而，田野中有 $n$ 个深水坑，每个水坑覆盖一个矩形区域，Stuart 无法安全地通过。水坑 $i$ 的覆盖范围是满足 $a_i \\leq x \\leq b_i$ 且 $c_i \\leq y \\leq d_i$ 的所有整数坐标点。注意，水坑可能存在重叠。\n\n你需要回答 $q$ 个查询，每个查询的类型由 $t$ 指定：\n- 如果 $t = 1$，查询 Stuart 从原点移动到 $(x_j, y_j)$ 所需的最短时间（以小时为单位）。如果无法到达目的地，输出 $-1$。\n- 如果 $t = 2$，假设雨将持续 $m_j$ 小时，计算 Stuart 在最多 $m_j$ 小时内可以到达的不同位置数量。", "inputFormat": "- 第一行包含三个整数 $n$、$t$ 和 $q$，分别表示水坑数量、查询类型和查询数量。\n- 接下来的 $n$ 行中，每行包含四个整数 $a_i$、$b_i$、$c_i$ 和 $d_i$，表示水坑 $i$ 的范围。\n- 如果 $t = 1$，接下来的 $q$ 行每行包含两个整数 $x_j$ 和 $y_j$，表示查询的目标坐标。\n- 如果 $t = 2$，接下来的 $q$ 行每行包含一个整数 $m_j$，表示雨的持续时间。", "outputFormat": "- 对于每个查询，输出一个整数作为答案：\n  - 如果 $t = 1$，输出 Stuart 到达目标位置的最短时间；如果无法到达，输出 $-1$。\n  - 如果 $t = 2$，输出 Stuart 在最多 $m_j$ 小时内可以到达的不同位置数量。", "hint": "【样例解释】\n\n对于样例 #1：\n- Stuart 可以在 $3$ 小时内到达 $(3, 3)$。\n- Stuart 无法到达 $(2, -3)$，因为目标位置被水坑覆盖。\n\n对于样例 #2：\n- Stuart 在 $1$ 小时内可以到达 $4$ 个不同的位置。\n- 在 $2$ 小时内，可以到达 $8$ 个位置。\n\n【数据范围】\n\n- $1 \\leq n \\leq 400$\n- $1 \\leq t \\leq 2$\n- $1 \\leq q \\leq 200,000$\n- $-10^9 \\leq a_i \\leq b_i \\leq 10^9$\n- $-10^9 \\leq c_i \\leq d_i \\leq 10^9$\n- 原点 $(0, 0)$ 不被任何水坑覆盖。\n- 如果 $t = 1$，则 $-10^9 \\leq x_j, y_j \\leq 10^9$。\n- 如果 $t = 2$，则 $1 \\leq m_j \\leq 10^9$。\n\n| 子任务编号 | 分值 | $t=$ | $n\\le$ |  $q\\le$   |                  $a_i,b_i,c_i,d_i,x_i,y_i$                   |\n| :--------: | :--: | :--: | :----: | :-------: | :----------------------------------------------------------: |\n|    $0$     | $0$  | $/$  |  $/$   |    $/$    |                             $/$                              |\n|    $1$     | $5$  | $1$  | $100$  | $200,000$ |           $-400\\le a_i,b_i,c_i,d_i,x_i,y_i\\le400$            |\n|    $2$     | $17$ | $1$  | $100$  | $200,000$ | $a_i\\equiv c_i \\equiv 0,b_i\\equiv d_i \\equiv -1 \\pmod{10^7}$ |\n|    $3$     | $8$  | $1$  | $100$  | $200,000$ |                             $/$                              |\n|    $4$     | $8$  | $2$  | $100$  |   $400$   |           $-400\\le a_i,b_i,c_i,d_i,x_i,y_i\\le400$            |\n|    $5$     | $21$ | $2$  | $100$  |   $400$   | $a_i\\equiv c_i \\equiv 0,b_i\\equiv d_i \\equiv -1 \\pmod{10^7}$ |\n|    $6$     | $10$ | $2$  | $100$  |   $400$   |                             $/$                              |\n|    $7$     | $13$ | $2$  | $100$  |   $400$   |                             $/$                              |\n|    $8$     | $14$ | $2$  | $100$  | $200,000$ |                             $/$                              |\n|    $9$     | $4$  | $2$  | $400$  | $200,000$ |                             $/$                              |", "locale": "zh-CN"}}}
{"pid": "P11354", "type": "P", "difficulty": 5, "samples": [["5\n1 1 2 4\n\n1\n\n0\n ", " \n\n? 4\n\n? 5\n\n! 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2023", "交互题", "Special Judge", "eJOI（欧洲）"], "title": "[eJOI 2023] Tree Search", "background": "本题对洛谷交互格式进行了适配，你可以在以下代码的基础上进行实现：\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nextern \"C\" bool ask(int x);\nextern \"C\" int solve(int n,vector<int> p)\n{\n  \tassert(ask(1)==1);\n\treturn 20080520;\n}\n```", "description": "**这是一道交互题。**\n\n给定一棵 $N$ 个点的有根二叉树 $T$，保证根结点的编号为 $1$。\n\n树上恰有一个未知的结点是特殊的，你需要找出这个结点。\n\n你每次可以向交互库询问一棵子树中是否含有特殊结点，你可以询问至多 $35$ 次。\n\n**【实现细节】**\n\n你需要实现下列函数：\n\n``int solve(int N, std::vector < int > p)``\n\n- $N$：树的结点数量。\n- $p$：长度为 $N-1$ 的数组，描述树的形态。第 $i$ 个元素 $p_i$ 满足 $1\\leq p_i\\leq i+1$，代表编号为 $i+2$ 的结点的父亲编号。\n- $p$ 中的元素两两不同。\n- 你需要返回特殊结点的编号。\n- 这个函数只会被调用恰好一次。\n\n你可以调用以下函数：\n\n``int ask(int x)``\n\n- $x$：询问的子树根结点编号。\n- 你需要保证 $1\\leq x\\leq N$。\n- 如果子树包含特殊结点，返回值为 $1$，否则为 $0$。", "inputFormat": "**以下为下发 grader 的输入格式，你不应该从标准输入中读入任何信息。**\n\n第一行输入一个整数 $N$。\n\n第二行输入 $N-1$ 个整数 $p_i$。\n\n接下来对于每个询问，输入一个整数代表询问的返回值。", "outputFormat": "**以下为下发 grader 的输出格式，你不应该向标准输出中打印任何信息。**\n\n对于每个询问，输出一行 ``? x``，其中 $x$ 为询问的结点。\n\n最后输出一行 ``! x``，其中 $x$ 为猜测的结点编号。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$N\\leq 35$。\n- Subtask 2（30 pts）：$p_i=i+1$。\n- Subtask 3（15 pts）：$p_i=\\frac{i}{2}+1$。\n- Subtask 4（35 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\leq N\\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2023] Tree Search", "background": "本题对洛谷交互格式进行了适配，你可以在以下代码的基础上进行实现：\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nextern \"C\" bool ask(int x);\nextern \"C\" int solve(int n,vector<int> p)\n{\n  \tassert(ask(1)==1);\n\treturn 20080520;\n}\n```", "description": "**这是一道交互题。**\n\n给定一棵 $N$ 个点的有根二叉树 $T$，保证根结点的编号为 $1$。\n\n树上恰有一个未知的结点是特殊的，你需要找出这个结点。\n\n你每次可以向交互库询问一棵子树中是否含有特殊结点，你可以询问至多 $35$ 次。\n\n**【实现细节】**\n\n你需要实现下列函数：\n\n``int solve(int N, std::vector < int > p)``\n\n- $N$：树的结点数量。\n- $p$：长度为 $N-1$ 的数组，描述树的形态。第 $i$ 个元素 $p_i$ 满足 $1\\leq p_i\\leq i+1$，代表编号为 $i+2$ 的结点的父亲编号。\n- $p$ 中的元素两两不同。\n- 你需要返回特殊结点的编号。\n- 这个函数只会被调用恰好一次。\n\n你可以调用以下函数：\n\n``int ask(int x)``\n\n- $x$：询问的子树根结点编号。\n- 你需要保证 $1\\leq x\\leq N$。\n- 如果子树包含特殊结点，返回值为 $1$，否则为 $0$。", "inputFormat": "**以下为下发 grader 的输入格式，你不应该从标准输入中读入任何信息。**\n\n第一行输入一个整数 $N$。\n\n第二行输入 $N-1$ 个整数 $p_i$。\n\n接下来对于每个询问，输入一个整数代表询问的返回值。", "outputFormat": "**以下为下发 grader 的输出格式，你不应该向标准输出中打印任何信息。**\n\n对于每个询问，输出一行 ``? x``，其中 $x$ 为询问的结点。\n\n最后输出一行 ``! x``，其中 $x$ 为猜测的结点编号。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$N\\leq 35$。\n- Subtask 2（30 pts）：$p_i=i+1$。\n- Subtask 3（15 pts）：$p_i=\\frac{i}{2}+1$。\n- Subtask 4（35 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\leq N\\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P11355", "type": "P", "difficulty": 6, "samples": [["4 3\n4 6 8 10\n7 1 9 4\n3 11 1 50\n3 11 1 5\n5 7 1 1", "2 3 -1"], ["3 3\n-2 1 -1\n10 1 3\n-6 6 20 20\n-6 6 1 20\n-6 6 2 20", "-1 2 7"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "eJOI（欧洲）", "整体二分"], "title": "[eJOI 2023] Teleporters", "background": "", "description": "dXqwq 和 Haitang 在数轴上的两个不同的点 $A,B$，他们想要见面，但是他们只能通过传送器移动。\n\n有 $N$ 个传送器，第 $i$ 个位于坐标轴 $c_i$ 位置，频率为 $f_i$。由于某种原因，只有频率 $\\in[L,R]$ 的传送器可以使用。\n\n使用一个传送器会将一个人传送到与其坐标对称的点。形式化地说，一个人传送前后的位置 $x_1,x_2$ 与传送器的位置 $c_i$ 满足 $\\frac{x_1+x_2}{2}=c_i$。\n\ndXqwq 和 Haitang 会不断**同时**各自选择一个传送器 $p,q$（不需要相同），进行传送并经历 $|f_p-f_q|$ 的**疲劳值**，直到他们抵达同一位置。整个过程的疲劳值为每次经历的疲劳值的最大值。\n\n给定 $Q$ 次询问，每次给定一组 $[L,R]$，求 dXqwq 和 Haitang 见面的总疲劳值的最小值，或报告他们不可能通过这些传送器见面。", "inputFormat": "第一行输入两个整数 $N,Q$。\n\n第二行输入 $N$ 个整数 $c_i$。\n\n第三行输入 $N$ 个整数 $f_i$。\n\n接下来 $Q$ 行，每行输入四个整数 $A,B,L,R$，保证 $A\\neq B$。", "outputFormat": "输出一行 $Q$ 个整数，代表每个询问总疲劳值的最小值。特别地，如果不可能见面，输出 ``-1``。", "hint": "**【样例解释】**\n\n下面为第一组样例的解释。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dfq3lesn.png)\n\n第一次询问中，如果 dXqwq 选择第二个传送器，Haitang 选择第四个传送器，可以在 $9$ 处见面，疲劳值为 $3$。但如果 dXqwq 选择第一个传送器，Haitang 选择第三个传送器，可以在 $5$ 处见面，疲劳值为 $2$。\n\n第二次询问中，上述的第二种方法由于 $[L,R]$ 的限制不合法。\n\n第三次询问中，只有一个可用的传送器，见面是不可能的。\n\n注意坐标可能是负数。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$N,Q\\leq 10$，$|c_i|,f_i\\leq 50$。\n- Subtask 2（10 pts）：$N\\leq 100$，$L=1$，$R=10^9$，$|c_i|,f_i\\leq 100$。\n- Subtask 3（5 pts）：$N=2$，$L=1$，$R=10^9$。\n- Subtask 4（9 pts）：$N\\leq 10^3$，$L=1$，$R=10^9$，$f_i=1$。\n- Subtask 5（6 pts）：$L=1$，$R=10^9$，$f_i=1$。\n- Subtask 6（7 pts）：$N\\leq 10^3$，$L=1$，$R=10^9$。\n- Subtask 7（17 pts）：$L=1$，$R=10^9$。\n- Subtask 8（8 pts）：$L=1$。\n- Subtask 9（14 pts）：$N,Q\\leq 2\\times 10^4$。\n- Subtask 10（13 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $2\\leq N\\leq 5\\times 10^4$，$1\\leq Q\\leq 5\\times 10^4$，$1\\leq f_i\\leq 10^9$，$-10^9\\leq c_i,A,B\\leq 10^9$，$1\\leq L\\leq R\\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2023] Teleporters", "background": "", "description": "dXqwq 和 Haitang 在数轴上的两个不同的点 $A,B$，他们想要见面，但是他们只能通过传送器移动。\n\n有 $N$ 个传送器，第 $i$ 个位于坐标轴 $c_i$ 位置，频率为 $f_i$。由于某种原因，只有频率 $\\in[L,R]$ 的传送器可以使用。\n\n使用一个传送器会将一个人传送到与其坐标对称的点。形式化地说，一个人传送前后的位置 $x_1,x_2$ 与传送器的位置 $c_i$ 满足 $\\frac{x_1+x_2}{2}=c_i$。\n\ndXqwq 和 Haitang 会不断**同时**各自选择一个传送器 $p,q$（不需要相同），进行传送并经历 $|f_p-f_q|$ 的**疲劳值**，直到他们抵达同一位置。整个过程的疲劳值为每次经历的疲劳值的最大值。\n\n给定 $Q$ 次询问，每次给定一组 $[L,R]$，求 dXqwq 和 Haitang 见面的总疲劳值的最小值，或报告他们不可能通过这些传送器见面。", "inputFormat": "第一行输入两个整数 $N,Q$。\n\n第二行输入 $N$ 个整数 $c_i$。\n\n第三行输入 $N$ 个整数 $f_i$。\n\n接下来 $Q$ 行，每行输入四个整数 $A,B,L,R$，保证 $A\\neq B$。", "outputFormat": "输出一行 $Q$ 个整数，代表每个询问总疲劳值的最小值。特别地，如果不可能见面，输出 ``-1``。", "hint": "**【样例解释】**\n\n下面为第一组样例的解释。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dfq3lesn.png)\n\n第一次询问中，如果 dXqwq 选择第二个传送器，Haitang 选择第四个传送器，可以在 $9$ 处见面，疲劳值为 $3$。但如果 dXqwq 选择第一个传送器，Haitang 选择第三个传送器，可以在 $5$ 处见面，疲劳值为 $2$。\n\n第二次询问中，上述的第二种方法由于 $[L,R]$ 的限制不合法。\n\n第三次询问中，只有一个可用的传送器，见面是不可能的。\n\n注意坐标可能是负数。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$N,Q\\leq 10$，$|c_i|,f_i\\leq 50$。\n- Subtask 2（10 pts）：$N\\leq 100$，$L=1$，$R=10^9$，$|c_i|,f_i\\leq 100$。\n- Subtask 3（5 pts）：$N=2$，$L=1$，$R=10^9$。\n- Subtask 4（9 pts）：$N\\leq 10^3$，$L=1$，$R=10^9$，$f_i=1$。\n- Subtask 5（6 pts）：$L=1$，$R=10^9$，$f_i=1$。\n- Subtask 6（7 pts）：$N\\leq 10^3$，$L=1$，$R=10^9$。\n- Subtask 7（17 pts）：$L=1$，$R=10^9$。\n- Subtask 8（8 pts）：$L=1$。\n- Subtask 9（14 pts）：$N,Q\\leq 2\\times 10^4$。\n- Subtask 10（13 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $2\\leq N\\leq 5\\times 10^4$，$1\\leq Q\\leq 5\\times 10^4$，$1\\leq f_i\\leq 10^9$，$-10^9\\leq c_i,A,B\\leq 10^9$，$1\\leq L\\leq R\\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11356", "type": "P", "difficulty": 6, "samples": [["2 3 2\n022\n031", "12"], ["2 3 3\n022\n031", "10"], ["2 3 1\n022\n031", "25"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2023", "eJOI（欧洲）"], "title": "[eJOI 2023] Opening Offices", "background": "", "description": "你的公司要在 $N\\times M$ 的网格图上建造办公室。如图所示，网格图上有横着和竖着的边，其边权均为 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vfni68lx.png)\n\n在白天，所有道路都是可以走的。在晚上，只有 $N\\times M-1$ 条边有照明且可以走。\n\n你喜欢巡视办公室。每天，你都会以一个顺序从一个办公室开始，经过可用的边遍历每个办公室一次，最后回到起点。你希望选择网格图上一个点的子集 $S$，满足其在白天和晚上进行巡视所需走过的最短路径长度相等。\n\n你希望计算三种条件下，可能的 $S$ 的数量对 $10^9+7$ 取模的值：\n\n1. $|S|\\geq 2$。\n2. $|S|=2$。\n3. $|S|=3$。", "inputFormat": "第一行输入三个整数 $N,M,T$，其中 $T$ 代表你需要计算的问题编号。\n\n接下来 $N$ 行，每行输入一个长度为 $M$ 的字符串 $A_{i,j}$。\n\n- $A_{i,j}\\in\\{\\texttt{1},\\texttt{3}\\}$ 代表 $(i,j)$ 有连向 $(i-1,j)$ 的边。\n- $A_{i,j}\\in\\{\\texttt{2},\\texttt{3}\\}$ 代表 $(i,j)$ 有连向 $(i,j-1)$ 的边。\n\n保证输入的是一棵树。", "outputFormat": "输出一个整数，代表答案对 $10^9+7$ 取模的值。", "hint": "**【样例解释】**\n\n如上方示意图所示。\n\n以下为 $|S|=2$ 的方案：$\\{A,B\\}$，$\\{A,C\\}$，$\\{A,E\\}$，$\\{A,F\\}$，$\\{B,C\\}$，$\\{B,D\\}$，$\\{B,E\\}$，$\\{B,F\\}$，$\\{C,D\\}$，$\\{C,E\\}$，$\\{C,F\\}$，$\\{D,E\\}$。\n\n以下为 $|S|=3$ 的方案：$\\{A,B,C\\}$，$\\{A,B,E\\}$，$\\{A,B,F\\}$，$\\{A,C,E\\}$，$\\{A,C,F\\}$，$\\{B,C,D\\}$，$\\{B,C,E\\}$，$\\{B,C,F\\}$，$\\{B,D,E\\}$，$\\{C,D,E\\}$。\n\n以下为 $|S|=4$ 的方案：$\\{A,B,C,E\\}$，$\\{A,B,C,F\\}$，$\\{B,C,D,E\\}$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（4 pts）：$N,M\\leq 2$。\n- Subtask 2（5 pts）：$N=1$。\n- Subtask 3（9 pts）：$T=2$，$N,M\\leq 50$。\n- Subtask 4（11 pts）：$T=2$。\n- Subtask 5（9 pts）：$T=3$，$N,M\\leq 20$。\n- Subtask 6（13 pts）：$T=3$。\n- Subtask 7（14 pts）：$T=1$，$N,M\\leq 4$。\n- Subtask 8（10 pts）：$T=1$，$N,M\\leq 50$。\n- Subtask 9（9 pts）：$T=1$，$A_{i,j}\\neq \\texttt{3}$。\n- Subtask 10（16 pts）：$T=1$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq T\\leq 3$，$1\\leq N,M\\leq 10^3$，$A_{i,j}\\in\\{\\texttt{0},\\texttt{1},\\texttt{2},\\texttt{3}\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2023] Opening Offices", "background": "", "description": "你的公司要在 $N\\times M$ 的网格图上建造办公室。如图所示，网格图上有横着和竖着的边，其边权均为 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vfni68lx.png)\n\n在白天，所有道路都是可以走的。在晚上，只有 $N\\times M-1$ 条边有照明且可以走。\n\n你喜欢巡视办公室。每天，你都会以一个顺序从一个办公室开始，经过可用的边遍历每个办公室一次，最后回到起点。你希望选择网格图上一个点的子集 $S$，满足其在白天和晚上进行巡视所需走过的最短路径长度相等。\n\n你希望计算三种条件下，可能的 $S$ 的数量对 $10^9+7$ 取模的值：\n\n1. $|S|\\geq 2$。\n2. $|S|=2$。\n3. $|S|=3$。", "inputFormat": "第一行输入三个整数 $N,M,T$，其中 $T$ 代表你需要计算的问题编号。\n\n接下来 $N$ 行，每行输入一个长度为 $M$ 的字符串 $A_{i,j}$。\n\n- $A_{i,j}\\in\\{\\texttt{1},\\texttt{3}\\}$ 代表 $(i,j)$ 有连向 $(i-1,j)$ 的边。\n- $A_{i,j}\\in\\{\\texttt{2},\\texttt{3}\\}$ 代表 $(i,j)$ 有连向 $(i,j-1)$ 的边。\n\n保证输入的是一棵树。", "outputFormat": "输出一个整数，代表答案对 $10^9+7$ 取模的值。", "hint": "**【样例解释】**\n\n如上方示意图所示。\n\n以下为 $|S|=2$ 的方案：$\\{A,B\\}$，$\\{A,C\\}$，$\\{A,E\\}$，$\\{A,F\\}$，$\\{B,C\\}$，$\\{B,D\\}$，$\\{B,E\\}$，$\\{B,F\\}$，$\\{C,D\\}$，$\\{C,E\\}$，$\\{C,F\\}$，$\\{D,E\\}$。\n\n以下为 $|S|=3$ 的方案：$\\{A,B,C\\}$，$\\{A,B,E\\}$，$\\{A,B,F\\}$，$\\{A,C,E\\}$，$\\{A,C,F\\}$，$\\{B,C,D\\}$，$\\{B,C,E\\}$，$\\{B,C,F\\}$，$\\{B,D,E\\}$，$\\{C,D,E\\}$。\n\n以下为 $|S|=4$ 的方案：$\\{A,B,C,E\\}$，$\\{A,B,C,F\\}$，$\\{B,C,D,E\\}$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（4 pts）：$N,M\\leq 2$。\n- Subtask 2（5 pts）：$N=1$。\n- Subtask 3（9 pts）：$T=2$，$N,M\\leq 50$。\n- Subtask 4（11 pts）：$T=2$。\n- Subtask 5（9 pts）：$T=3$，$N,M\\leq 20$。\n- Subtask 6（13 pts）：$T=3$。\n- Subtask 7（14 pts）：$T=1$，$N,M\\leq 4$。\n- Subtask 8（10 pts）：$T=1$，$N,M\\leq 50$。\n- Subtask 9（9 pts）：$T=1$，$A_{i,j}\\neq \\texttt{3}$。\n- Subtask 10（16 pts）：$T=1$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq T\\leq 3$，$1\\leq N,M\\leq 10^3$，$A_{i,j}\\in\\{\\texttt{0},\\texttt{1},\\texttt{2},\\texttt{3}\\}$。", "locale": "zh-CN"}}}
{"pid": "P11357", "type": "P", "difficulty": 0, "samples": [["3\n1 4 2\n3 7 5\n6 8 0\n\n", "4\nR 3 6 1\nD 2 3 4\nD 5 6 7\nR 2 5 8"], ["2\n2 1\n0 3", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "eJOI（欧洲）"], "title": "[eJOI 2023] Square Grid Puzzle", "background": "", "description": "有一个 $N\\times N$ 的矩阵，元素从 $0\\sim N^2-1$ 编号。我们希望通过**小于** $3N$ 次操作将第 $i$ 行第 $j$ 列的元素变为 $i\\cdot N+j$。\n\n你可以对矩阵进行两种操作：\n\n- ``D a[0] a[1] ... a[N-1]``：对矩阵第一行重排，再将每一列向上循环位移一位，你需要保证给出的 $a$ 是矩阵第一行的一个重排。\n\n- ``R b[0] b[1] ... b[N-1]``：对矩阵第一列重排，再将每一行向左循环位移一位，你需要保证给出的 $b$ 是矩阵第一列的一个重排。\n\n例如，如果当前矩阵如下：\n\n|R/C|0|1|2|\n|:-:|:-:|:-:|:-:|\n|0|2|4|6|\n|1|8|1|5|\n|2|7|3|0|\n\n如果对原矩阵执行 ``D 2 6 4``，矩阵会变成下图：\n\n|R/C|0|1|2|\n|:-:|:-:|:-:|:-:|\n|0|8|1|5|\n|1|7|3|0|\n|2|**6**|**2**|**4**|\n\n如果对原矩阵执行 ``R 2 8 7``，矩阵会变成下图：\n\n|R/C|0|1|2|\n|:-:|:-:|:-:|:-:|\n|0|4|6|**2**|\n|1|1|5|**8**|\n|2|3|0|**7**|\n\n即使你使用了 $\\geq 3N$ 次操作，或者有一些数没有复原，你仍然可以得到一些部分分，见 **【评分方式】** 一栏。", "inputFormat": "第一行输入一个整数 $N$。\n\n接下来 $N$ 行每行输入 $N$ 个整数 $F_{i,j}$ 代表初始矩阵。", "outputFormat": "第一行输出一个整数 $M$，代表操作次数。\n\n接下来 $M$ 行每行输出一次操作，格式见上。", "hint": "**【评分方式】**\n\n令 $A=3N$，$B=2N^2$，$C$ 为操作后符合要求的位置个数。\n\n如果你的程序没有正常结束或格式错误或 $M>B$，该测试点不得分。\n\n\n否则，若 $C<N^2$，你获得该测试点 $50\\%\\cdot\\frac{C}{N^2}$ 的分数。\n\n否则，若 $A\\leq M\\leq B$，你获得该测试点 $(40\\cdot(\\frac{B-M}{B-A})^2+50)\\%$ 的分数。\n\n否则，你获得满分。\n\n**【样例解释】**\n\n第一个样例用了 $4$ 次操作复原了矩阵，可以获得 $100\\%$ 的分数。\n\n第二个样例用了 $0$ 次操作复原了 $\\frac{2}{4}=50\\%$ 的位置，可以获得该测试点 $25\\%$ 的分数。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，保证 $2\\leq N\\leq 9$，且 $N$ 在测试点中均匀分布。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2023] Square Grid Puzzle", "background": "", "description": "有一个 $N\\times N$ 的矩阵，元素从 $0\\sim N^2-1$ 编号。我们希望通过**小于** $3N$ 次操作将第 $i$ 行第 $j$ 列的元素变为 $i\\cdot N+j$。\n\n你可以对矩阵进行两种操作：\n\n- ``D a[0] a[1] ... a[N-1]``：对矩阵第一行重排，再将每一列向上循环位移一位，你需要保证给出的 $a$ 是矩阵第一行的一个重排。\n\n- ``R b[0] b[1] ... b[N-1]``：对矩阵第一列重排，再将每一行向左循环位移一位，你需要保证给出的 $b$ 是矩阵第一列的一个重排。\n\n例如，如果当前矩阵如下：\n\n|R/C|0|1|2|\n|:-:|:-:|:-:|:-:|\n|0|2|4|6|\n|1|8|1|5|\n|2|7|3|0|\n\n如果对原矩阵执行 ``D 2 6 4``，矩阵会变成下图：\n\n|R/C|0|1|2|\n|:-:|:-:|:-:|:-:|\n|0|8|1|5|\n|1|7|3|0|\n|2|**6**|**2**|**4**|\n\n如果对原矩阵执行 ``R 2 8 7``，矩阵会变成下图：\n\n|R/C|0|1|2|\n|:-:|:-:|:-:|:-:|\n|0|4|6|**2**|\n|1|1|5|**8**|\n|2|3|0|**7**|\n\n即使你使用了 $\\geq 3N$ 次操作，或者有一些数没有复原，你仍然可以得到一些部分分，见 **【评分方式】** 一栏。", "inputFormat": "第一行输入一个整数 $N$。\n\n接下来 $N$ 行每行输入 $N$ 个整数 $F_{i,j}$ 代表初始矩阵。", "outputFormat": "第一行输出一个整数 $M$，代表操作次数。\n\n接下来 $M$ 行每行输出一次操作，格式见上。", "hint": "**【评分方式】**\n\n令 $A=3N$，$B=2N^2$，$C$ 为操作后符合要求的位置个数。\n\n如果你的程序没有正常结束或格式错误或 $M>B$，该测试点不得分。\n\n\n否则，若 $C<N^2$，你获得该测试点 $50\\%\\cdot\\frac{C}{N^2}$ 的分数。\n\n否则，若 $A\\leq M\\leq B$，你获得该测试点 $(40\\cdot(\\frac{B-M}{B-A})^2+50)\\%$ 的分数。\n\n否则，你获得满分。\n\n**【样例解释】**\n\n第一个样例用了 $4$ 次操作复原了矩阵，可以获得 $100\\%$ 的分数。\n\n第二个样例用了 $0$ 次操作复原了 $\\frac{2}{4}=50\\%$ 的位置，可以获得该测试点 $25\\%$ 的分数。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，保证 $2\\leq N\\leq 9$，且 $N$ 在测试点中均匀分布。", "locale": "zh-CN"}}}
{"pid": "P11358", "type": "P", "difficulty": 0, "samples": [["13 2 2\n1 2 3 4 3 6 6 8 2 10 11 1", "16\n4\n15\n55\n66\n36\n66\n55\n66\n45\n55\n66\n66"], ["3 0 1\n1 2", "1\n1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "eJOI（欧洲）"], "title": "[eJOI 2023] Tree Infection", "background": "", "description": "给定一棵 $N$ 个点的有根树 $T$，保证根结点的编号为 $1$。\n\n树上的一个点 $s$ 会被选中，距离 $s$ **不超过** $R$ 的点会被感染，两个点的距离定义为其树上路径的边数。\n\n一对点是可达的当且仅当它们都没有被感染，且其树上路径经过被感染的点数**不超过** $M$。\n\n对于 $s=1,2,\\cdots,N$ 计算选中 $s$ 的可达点对数量。", "inputFormat": "第一行输入三个整数 $N,R,M$。\n\n第二行输入 $N-1$ 个整数 $p_2,p_3,\\cdots,p_N$，代表每个点的父亲。\n", "outputFormat": "输出 $N$ 行，每行一个整数，第 $s$ 行的整数代表选择 $s$ 的答案。", "hint": "**【样例解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/088jrf6x.png)\n\n$s=2$ 的树如图所示。\n\n所有可达点对为 $(1,13)$，$(7,8)$，$(7,9)$ 和 $(8,9)$。\n\n注意 $(1,2)$ 不可达，因为 $2$ 已经被感染；$(1,5)$ 不可达，因为路径上有三个被感染的点 $2,3,4$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$N\\leq 300$。\n- Subtask 2（14 pts）：$R=0$。\n- Subtask 3（15 pts）：$M=2R+1$。\n- Subtask 4（10 pts）：$M=2R-1$。\n- Subtask 5（16 pts）：$N\\leq 5\\times 10^3$。\n- Subtask 6（25 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $2\\leq N\\leq 5\\times 10^5$，$1\\leq p_i<i$，$0\\leq R\\leq N-1$，$0\\leq M\\leq 2R+1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2023] Tree Infection", "background": "", "description": "给定一棵 $N$ 个点的有根树 $T$，保证根结点的编号为 $1$。\n\n树上的一个点 $s$ 会被选中，距离 $s$ **不超过** $R$ 的点会被感染，两个点的距离定义为其树上路径的边数。\n\n一对点是可达的当且仅当它们都没有被感染，且其树上路径经过被感染的点数**不超过** $M$。\n\n对于 $s=1,2,\\cdots,N$ 计算选中 $s$ 的可达点对数量。", "inputFormat": "第一行输入三个整数 $N,R,M$。\n\n第二行输入 $N-1$ 个整数 $p_2,p_3,\\cdots,p_N$，代表每个点的父亲。\n", "outputFormat": "输出 $N$ 行，每行一个整数，第 $s$ 行的整数代表选择 $s$ 的答案。", "hint": "**【样例解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/088jrf6x.png)\n\n$s=2$ 的树如图所示。\n\n所有可达点对为 $(1,13)$，$(7,8)$，$(7,9)$ 和 $(8,9)$。\n\n注意 $(1,2)$ 不可达，因为 $2$ 已经被感染；$(1,5)$ 不可达，因为路径上有三个被感染的点 $2,3,4$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$N\\leq 300$。\n- Subtask 2（14 pts）：$R=0$。\n- Subtask 3（15 pts）：$M=2R+1$。\n- Subtask 4（10 pts）：$M=2R-1$。\n- Subtask 5（16 pts）：$N\\leq 5\\times 10^3$。\n- Subtask 6（25 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $2\\leq N\\leq 5\\times 10^5$，$1\\leq p_i<i$，$0\\leq R\\leq N-1$，$0\\leq M\\leq 2R+1$。", "locale": "zh-CN"}}}
{"pid": "P11359", "type": "P", "difficulty": 0, "samples": [["4 2\n2 0 2 3\n2 4\n4 0", "10\n14\n12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "eJOI（欧洲）"], "title": "[eJOI 2023] Team Building", "background": "", "description": "你需要集结一个 $N$ 人小队，第 $i$ 个人的能力值为 $s_i$，你可以逐一将每个人加入你的小队。\n\n在你的小队中，每个人拥有两个额外的属性：星语和可爱。加入一个人的过程分三步：\n\n- 这个人进入小队，其星语和可爱值均为 $0$。\n- 剩余所有人的星语值加上自己的可爱值。\n- 剩余所有人的可爱值加上新加入的人的能力值。\n\n最后，你的小队的总星语值定义为所有人的星语值之和，你需要最大化总星语值。\n\n例如，如果你按顺序加入了能力值为 $0,2,2,3$ 的人，所有人的属性变化如下：\n\n|行动|星语|可爱|\n|:-:|:-:|:-:|\n|加入第一个人|$0$|$0$|\n|加入第二个人|$0,0$|$0,0$|\n|更新星语值|$0,0$|$0,0$|\n|更新可爱值|$0,0$|$\\textbf{2},0$|\n|加入第三个人|$0,0,0$|$2,0,0$|\n|更新星语值|$\\textbf{2},\\textbf{0},0$|$2,0,0$|\n|更新可爱值|$2,0,0$|$\\textbf{4},\\textbf{2},0$|\n|加入第四个人|$2,0,0,0$|$4,2,0,0$|\n|更新星语值|$\\textbf{6},\\textbf{2},\\textbf{0},0$|$4,2,0,0$|\n|更新可爱值|$6,2,0,0$|$\\textbf{7},\\textbf{5},\\textbf{3},0$|\n\n此时总星语值为 $6+2+0+0=8$，但是将顺序改为 $2,2,3,0$ 就可以得到 $7+3+0+0=10$。\n\n你还需要处理 $Q$ 次修改，每次修改会将第 $x_i$ 个人的能力值改为 $y_i$，你需要求出每次修改后的最大总星语值，修改之间不独立，即每次修改在下一次保留。", "inputFormat": "第一行输入两个整数 $N,Q$。\n\n第二行输入 $N$ 个整数 $s_i$。\n\n接下来 $Q$ 行，每行输入两个整数 $x_i,y_i$。", "outputFormat": "输出 $Q+1$ 行，每行一个整数，代表初始序列和每次修改后的答案。", "hint": "**【样例解释】**\n\n原始序列的最优方案在题面中已经给出。\n\n第一次修改后的序列为 $(2,4,2,3)$。\n\n第二次修改后的序列为 $(2,4,2,0)$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$N\\leq 7$，$Q\\leq 100$。\n- Subtask 2（19 pts）：$N,Q\\leq 500$。\n- Subtask 3（15 pts）：$Q\\leq 10$。\n- Subtask 4（6 pts）：$s_i,y_i\\leq 1$。\n- Subtask 5（9 pts）：$s_i,y_i\\leq 500$。\n- Subtask 6（12 pts）：$x_i=1$。\n- Subtask 7（10 pts）：每次修改和原来的数之差不超过 $1$。\n- Subtask 8（18 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $2\\leq N\\leq 5\\times 10^4$，$1\\leq Q\\leq 10^5$，$0\\leq s_i\\leq 10^5$，$1\\leq x_i\\leq N$，$0\\leq y_i\\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2023] Team Building", "background": "", "description": "你需要集结一个 $N$ 人小队，第 $i$ 个人的能力值为 $s_i$，你可以逐一将每个人加入你的小队。\n\n在你的小队中，每个人拥有两个额外的属性：星语和可爱。加入一个人的过程分三步：\n\n- 这个人进入小队，其星语和可爱值均为 $0$。\n- 剩余所有人的星语值加上自己的可爱值。\n- 剩余所有人的可爱值加上新加入的人的能力值。\n\n最后，你的小队的总星语值定义为所有人的星语值之和，你需要最大化总星语值。\n\n例如，如果你按顺序加入了能力值为 $0,2,2,3$ 的人，所有人的属性变化如下：\n\n|行动|星语|可爱|\n|:-:|:-:|:-:|\n|加入第一个人|$0$|$0$|\n|加入第二个人|$0,0$|$0,0$|\n|更新星语值|$0,0$|$0,0$|\n|更新可爱值|$0,0$|$\\textbf{2},0$|\n|加入第三个人|$0,0,0$|$2,0,0$|\n|更新星语值|$\\textbf{2},\\textbf{0},0$|$2,0,0$|\n|更新可爱值|$2,0,0$|$\\textbf{4},\\textbf{2},0$|\n|加入第四个人|$2,0,0,0$|$4,2,0,0$|\n|更新星语值|$\\textbf{6},\\textbf{2},\\textbf{0},0$|$4,2,0,0$|\n|更新可爱值|$6,2,0,0$|$\\textbf{7},\\textbf{5},\\textbf{3},0$|\n\n此时总星语值为 $6+2+0+0=8$，但是将顺序改为 $2,2,3,0$ 就可以得到 $7+3+0+0=10$。\n\n你还需要处理 $Q$ 次修改，每次修改会将第 $x_i$ 个人的能力值改为 $y_i$，你需要求出每次修改后的最大总星语值，修改之间不独立，即每次修改在下一次保留。", "inputFormat": "第一行输入两个整数 $N,Q$。\n\n第二行输入 $N$ 个整数 $s_i$。\n\n接下来 $Q$ 行，每行输入两个整数 $x_i,y_i$。", "outputFormat": "输出 $Q+1$ 行，每行一个整数，代表初始序列和每次修改后的答案。", "hint": "**【样例解释】**\n\n原始序列的最优方案在题面中已经给出。\n\n第一次修改后的序列为 $(2,4,2,3)$。\n\n第二次修改后的序列为 $(2,4,2,0)$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$N\\leq 7$，$Q\\leq 100$。\n- Subtask 2（19 pts）：$N,Q\\leq 500$。\n- Subtask 3（15 pts）：$Q\\leq 10$。\n- Subtask 4（6 pts）：$s_i,y_i\\leq 1$。\n- Subtask 5（9 pts）：$s_i,y_i\\leq 500$。\n- Subtask 6（12 pts）：$x_i=1$。\n- Subtask 7（10 pts）：每次修改和原来的数之差不超过 $1$。\n- Subtask 8（18 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $2\\leq N\\leq 5\\times 10^4$，$1\\leq Q\\leq 10^5$，$0\\leq s_i\\leq 10^5$，$1\\leq x_i\\leq N$，$0\\leq y_i\\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P11360", "type": "P", "difficulty": 6, "samples": [["10 11\n1 7\n1 8\n1 6\n2 8\n6 7\n5 8\n2 5\n2 3\n2 4\n3 4\n10 9", "1 8\n9 10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384]}, "tags": ["图论", "2015", "Special Judge", "CEOI（中欧）", "哈希 hashing"], "title": "[CEOI 2015] 管道", "background": "", "description": "**简要题意**：$\\,$ 给出一个 $N$ 点 $M$ 边的无向图，不保证连通。将每个联通块视为子图，请求出每一个子图中的桥。**你只有 16 MB 的内存空间**。\n\n---\n\n在 Cahoots 的国度里，Lomikel 是掌管管道的神。他管理水管、排水沟、下水道，甚至地铁隧道。人们在许许多多的圣泉旁敬拜他，这些圣泉由一个巨大的管道网络连接起来。每个管道直接连接两泓圣泉。\n\n每个假期，Supreme Plumber（Lomikel 的最高祭司）会进行一场十分复杂的仪式，包括以管道运送圣水。\n\n有时，Lomikel 的愤怒会导致管道破裂，所以 Plumber 不得不使用其他路径，使得圣水在破裂的管道周围流动。然而凡事总有不尽人意之处，对于某些管道，不存在不同的路径。这些管道被称为“关键管道”，Plumber 必须特别注意。您可以在下图中看到用粗线标出的关键管道。\n\n![](https://i.loli.net/2018/08/12/5b6f9bfa600d8.png)\n\n你的任务是为 Plumber 找到所有关键管道。然而，网络错综复杂，而你只有非常有限的内存。**空间限制仅为 16 MB**。", "inputFormat": "第一行，两个整数 $N$ 和 $M$，分别表示泉水的数量与管道的数量 $(1 \\leq N \\leq 100\\ 000,1 \\leq M \\leq 6\\ 000\\ 000)$。\n\n接下来 $M$ 行，每行两个整数 $u$ 和 $v$，表示有一条由 $u$ 连接 $v$ 的管道 $(1 \\leq u,v \\leq N)$。\n\n两泓圣泉可以由多个管道连接，但单个管道的端点总是不同的弹簧。\n\n技术提示：可以对标准输入进行查找（例如返回其起始位置），但查找并不是解决问题的关键。此外，若采用多次读取输入的方式效率可能会大幅下降。", "outputFormat": "输出若干行，每行两个整数，表示一条关键管道连接的两泓圣泉。\n\n关键管道可以以任意顺序列出，单个管道的端点也是如此。", "hint": "$N$ 和 $M$ 的上限如下表所示：\n\n|数据点|1|2|3|4|5|6|7|8|9|10|\n|-|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$N\\le$|$100$|$5000$|$4000$|$10^5$|$3\\times 10^4$|$7\\times 10^4$|$8\\times 10^4$|$10^5$|$10^5$|$10^5$|\n|$M\\le$|$200$|$1.5\\times 10^4$|$6\\times 10^5$|$1.2\\times 10^6$|$1.5\\times 10^6$|$2\\times 10^6$|$3\\times 10^6$|$4\\times 10^6$|$5\\times 10^6$|$6\\times 10^6$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2015] 管道", "background": "", "description": "**简要题意**：$\\,$ 给出一个 $N$ 点 $M$ 边的无向图，不保证连通。将每个联通块视为子图，请求出每一个子图中的桥。**你只有 16 MB 的内存空间**。\n\n---\n\n在 Cahoots 的国度里，Lomikel 是掌管管道的神。他管理水管、排水沟、下水道，甚至地铁隧道。人们在许许多多的圣泉旁敬拜他，这些圣泉由一个巨大的管道网络连接起来。每个管道直接连接两泓圣泉。\n\n每个假期，Supreme Plumber（Lomikel 的最高祭司）会进行一场十分复杂的仪式，包括以管道运送圣水。\n\n有时，Lomikel 的愤怒会导致管道破裂，所以 Plumber 不得不使用其他路径，使得圣水在破裂的管道周围流动。然而凡事总有不尽人意之处，对于某些管道，不存在不同的路径。这些管道被称为“关键管道”，Plumber 必须特别注意。您可以在下图中看到用粗线标出的关键管道。\n\n![](https://i.loli.net/2018/08/12/5b6f9bfa600d8.png)\n\n你的任务是为 Plumber 找到所有关键管道。然而，网络错综复杂，而你只有非常有限的内存。**空间限制仅为 16 MB**。", "inputFormat": "第一行，两个整数 $N$ 和 $M$，分别表示泉水的数量与管道的数量 $(1 \\leq N \\leq 100\\ 000,1 \\leq M \\leq 6\\ 000\\ 000)$。\n\n接下来 $M$ 行，每行两个整数 $u$ 和 $v$，表示有一条由 $u$ 连接 $v$ 的管道 $(1 \\leq u,v \\leq N)$。\n\n两泓圣泉可以由多个管道连接，但单个管道的端点总是不同的弹簧。\n\n技术提示：可以对标准输入进行查找（例如返回其起始位置），但查找并不是解决问题的关键。此外，若采用多次读取输入的方式效率可能会大幅下降。", "outputFormat": "输出若干行，每行两个整数，表示一条关键管道连接的两泓圣泉。\n\n关键管道可以以任意顺序列出，单个管道的端点也是如此。", "hint": "$N$ 和 $M$ 的上限如下表所示：\n\n|数据点|1|2|3|4|5|6|7|8|9|10|\n|-|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$N\\le$|$100$|$5000$|$4000$|$10^5$|$3\\times 10^4$|$7\\times 10^4$|$8\\times 10^4$|$10^5$|$10^5$|$10^5$|\n|$M\\le$|$200$|$1.5\\times 10^4$|$6\\times 10^5$|$1.2\\times 10^6$|$1.5\\times 10^6$|$2\\times 10^6$|$3\\times 10^6$|$4\\times 10^6$|$5\\times 10^6$|$6\\times 10^6$|", "locale": "zh-CN"}}}
{"pid": "P11361", "type": "P", "difficulty": 5, "samples": [["1\n6\n011101\n111010\n111010\n101101", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "贪心", "2024", "NOIP 提高组", "前缀和", "Ad-hoc"], "title": "[NOIP2024] 编辑字符串", "background": null, "description": "小 M 有两个长度为 $n$ 且字符集为 $\\{0, 1\\}$ 的字符串 $s_1, s_2$。\n\n小 M 希望两个字符串中对应位置字符相同的出现次数尽可能多，即满足 $s_{1,i} = s_{2,i}$ 的 $i(1 \\leq i \\leq n)$ 尽可能多。为此小 M 有一个字符串编辑工具，这个工具提供的基本操作是在一个字符串中交换两个**相邻**的字符。为了保持字符串的可辨识性，规定两个字符串中的部分字符不能参与交换。小 M 可以用工具对 $s_1$ 或 $s_2$ 进行多次字符交换，其中可以参与交换的字符能够交换任意多次。\n\n现在小 M 想知道，在使用编辑工具后，两个字符串中对应位置字符相同的出现次数最多能有多少。", "inputFormat": "**本题包含多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据的组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n- 第一行包含一个整数 $n$，表示字符串长度。\n- 第二行包含一个长度为 $n$ 且字符集为 $\\{0, 1\\}$ 的字符串 $s_1$。\n- 第三行包含一个长度为 $n$ 且字符集为 $\\{0, 1\\}$ 的字符串 $s_2$。\n- 第四行包含一个长度为 $n$ 且字符集为 $\\{0, 1\\}$ 的字符串 $t_1$，其中 $t_{1,i}$ 为 $1$ 表示 $s_{1,i}$ 可以参与交换，$t_{1,i}$ 为 $0$ 表示 $s_{1,i}$ 不可以参与交换。\n- 第五行包含一个长度为 $n$ 且字符集为 $\\{0, 1\\}$ 的字符串 $t_2$，其中 $t_{2,i}$ 为 $1$ 表示 $s_{2,i}$ 可以参与交换，$t_{2,i}$ 为 $0$ 表示 $s_{2,i}$ 不可以参与交换。", "outputFormat": "对于每组测试数据输出一行，包含一个整数，表示对应的答案。", "hint": "**【样例 1 解释】**\n\n最开始时，$s_1 = \\tt{011101}$，第 $4$ 和第 $6$ 个字符不能参与交换；$s_2 = \\tt{111010}$，第 $2$ 和第 $5$ 个字符不能参与交换。\n\n考虑如下操作：先交换 $s_{1,1}$ 与 $s_{1,2}$ 得到 $s_1 = \\tt{101101}$，再交换 $s_{1,2}$ 与 $s_{1,3}$ 得到 $s_1 = \\tt{110101}$，最后交换 $s_{2,3}$ 与 $s_{2,4}$ 得到 $s_2 = \\tt{110110}$。此时 $s_1$ 与 $s_2$ 的前 $4$ 个位置上的字符都是相同的。可以证明不存在更好的方案，故输出 $4$。\n\n**【样例 2 解释】**\n\n见附件的 edit/edit2.in 与 edit/edit2.ans。\n\n该样例共有 $10$ 组测试数据，其中第 $i(1 \\leq i \\leq 10)$ 组测试数据满足数据范围中描述的测试点 $2i - 1$ 的限制。\n\n**【数据范围】**\n\n对于所有的测试数据，保证：$1 \\leq T \\leq 10$，$1 \\leq n \\leq 10^5$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1\\sim 4$ | $10$ | 无 |\n| $5,6$ | $10^3$ | A |\n| $7,8$ | $10^5$ | ^ |\n| $9,10$ | $10^3$ | B |\n| $11,12$ | $10^5$ | ^ |\n| $13,14$ | $10^3$ | C |\n| $15,16$ | $10^5$ | ^ |\n| $17,18$ | $10^3$ | 无 |\n| $19,20$ | $10^5$ | ^ |\n\n\n- 特殊性质 A：保证 $s_1$ 的所有字符相同。\n- 特殊性质 B：保证 $t_1 = t_2$。\n- 特殊性质 C：保证 $t_1$ 和 $t_2$ 中各自恰有一个字符  $\\tt 0$。", "locale": "zh-CN", "translations": {"en": {"title": "Edit Strings", "background": "", "description": "Xiao M has two binary strings $s_1$ and $s_2$ of length $n$ (character set $\\{0, 1\\}$).\n\nXiao M wants to maximize the number of positions where the corresponding characters in the two strings are the same, i.e., maximize the count of indices $i$ ($1 \\leq i \\leq n$) satisfying $s_{1,i} = s_{2,i}$. To achieve this, Xiao M has a string editing tool that allows swapping two **adjacent** characters in a string. However, some characters in the strings are marked as non-swappable. Xiao M can perform multiple swap operations on $s_1$ or $s_2$, and swappable characters can be moved any number of times.\n\nNow, Xiao M wants to know the maximum number of matching positions that can be achieved after using the editing tool.", "inputFormat": "**The problem contains multiple test cases.**\n\nThe first line of input contains an integer $T$, representing the number of test cases.\n\nThis is followed by $T$ test cases, each formatted as follows:\n\n- The first line contains an integer $n$, the length of the strings.\n- The second line contains a binary string $s_1$ of length $n$.\n- The third line contains a binary string $s_2$ of length $n$.\n- The fourth line contains a binary string $t_1$ of length $n$, where $t_{1,i} = 1$ means $s_{1,i}$ is swappable, and $t_{1,i} = 0$ means it is not.\n- The fifth line contains a binary string $t_2$ of length $n$, where $t_{2,i} = 1$ means $s_{2,i}$ is swappable, and $t_{2,i} = 0$ means it is not.", "outputFormat": "For each test case, output one line containing an integer, the maximum number of matching positions.\n", "hint": "### Explanation for Sample #1\n\nInitially, $s_1 = \\tt{011101}$ (positions 4 and 6 are non-swappable), and $s_2 = \\tt{111010}$ (positions 2 and 5 are non-swappable).\n\nOne possible sequence of operations:\n1. Swap $s_{1,1}$ and $s_{1,2}$ to get $s_1 = \\tt{101101}$.\n2. Swap $s_{1,2}$ and $s_{1,3}$ to get $s_1 = \\tt{110101}$.\n3. Swap $s_{2,3}$ and $s_{2,4}$ to get $s_2 = \\tt{110110}$.\n\nNow, the first 4 positions of $s_1$ and $s_2$ match. It can be proven that no better solution exists, so the answer is 4.\n\n### Explanation for Sample #2\n\nSee files `edit/edit2.in` and `edit/edit2.ans` in the attachment.\n\nThis sample contains 10 test cases, where the $i$-th test case ($1 \\leq i \\leq 10$) satisfies the constraints described for test point $2i - 1$ in the data range.\n\n### Data Range\n\nFor all test data, it is guaranteed that: $1 \\leq T \\leq 10$, $1 \\leq n \\leq 10^5$.\n\n| Test Case Number | $n \\leq$ | Special Property |\n| :--------------: | :------: | :--------------: |\n|     1∼4          |   10     |       None       |\n|     5,6          |  $10^3$  |        A         |\n|     7,8          |  $10^5$  |        A         |\n|     9,10         |  $10^3$  |        B         |\n|     11,12        |  $10^5$  |        B         |\n|     13,14        |  $10^3$  |        C         |\n|     15,16        |  $10^5$  |        C         |\n|     17,18        |  $10^3$  |       None       |\n|     19,20        |  $10^5$  |       None       |\n\n- **Special Property A**: All characters in $s_1$ are the same.\n- **Special Property B**: $t_1 = t_2$.\n- **Special Property C**: Exactly one '0' exists in each of $t_1$ and $t_2$.\n\nTranslated by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "[NOIP2024] 编辑字符串", "background": null, "description": "小 M 有两个长度为 $n$ 且字符集为 $\\{0, 1\\}$ 的字符串 $s_1, s_2$。\n\n小 M 希望两个字符串中对应位置字符相同的出现次数尽可能多，即满足 $s_{1,i} = s_{2,i}$ 的 $i(1 \\leq i \\leq n)$ 尽可能多。为此小 M 有一个字符串编辑工具，这个工具提供的基本操作是在一个字符串中交换两个**相邻**的字符。为了保持字符串的可辨识性，规定两个字符串中的部分字符不能参与交换。小 M 可以用工具对 $s_1$ 或 $s_2$ 进行多次字符交换，其中可以参与交换的字符能够交换任意多次。\n\n现在小 M 想知道，在使用编辑工具后，两个字符串中对应位置字符相同的出现次数最多能有多少。", "inputFormat": "**本题包含多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据的组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n- 第一行包含一个整数 $n$，表示字符串长度。\n- 第二行包含一个长度为 $n$ 且字符集为 $\\{0, 1\\}$ 的字符串 $s_1$。\n- 第三行包含一个长度为 $n$ 且字符集为 $\\{0, 1\\}$ 的字符串 $s_2$。\n- 第四行包含一个长度为 $n$ 且字符集为 $\\{0, 1\\}$ 的字符串 $t_1$，其中 $t_{1,i}$ 为 $1$ 表示 $s_{1,i}$ 可以参与交换，$t_{1,i}$ 为 $0$ 表示 $s_{1,i}$ 不可以参与交换。\n- 第五行包含一个长度为 $n$ 且字符集为 $\\{0, 1\\}$ 的字符串 $t_2$，其中 $t_{2,i}$ 为 $1$ 表示 $s_{2,i}$ 可以参与交换，$t_{2,i}$ 为 $0$ 表示 $s_{2,i}$ 不可以参与交换。", "outputFormat": "对于每组测试数据输出一行，包含一个整数，表示对应的答案。", "hint": "**【样例 1 解释】**\n\n最开始时，$s_1 = \\tt{011101}$，第 $4$ 和第 $6$ 个字符不能参与交换；$s_2 = \\tt{111010}$，第 $2$ 和第 $5$ 个字符不能参与交换。\n\n考虑如下操作：先交换 $s_{1,1}$ 与 $s_{1,2}$ 得到 $s_1 = \\tt{101101}$，再交换 $s_{1,2}$ 与 $s_{1,3}$ 得到 $s_1 = \\tt{110101}$，最后交换 $s_{2,3}$ 与 $s_{2,4}$ 得到 $s_2 = \\tt{110110}$。此时 $s_1$ 与 $s_2$ 的前 $4$ 个位置上的字符都是相同的。可以证明不存在更好的方案，故输出 $4$。\n\n**【样例 2 解释】**\n\n见附件的 edit/edit2.in 与 edit/edit2.ans。\n\n该样例共有 $10$ 组测试数据，其中第 $i(1 \\leq i \\leq 10)$ 组测试数据满足数据范围中描述的测试点 $2i - 1$ 的限制。\n\n**【数据范围】**\n\n对于所有的测试数据，保证：$1 \\leq T \\leq 10$，$1 \\leq n \\leq 10^5$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1\\sim 4$ | $10$ | 无 |\n| $5,6$ | $10^3$ | A |\n| $7,8$ | $10^5$ | ^ |\n| $9,10$ | $10^3$ | B |\n| $11,12$ | $10^5$ | ^ |\n| $13,14$ | $10^3$ | C |\n| $15,16$ | $10^5$ | ^ |\n| $17,18$ | $10^3$ | 无 |\n| $19,20$ | $10^5$ | ^ |\n\n\n- 特殊性质 A：保证 $s_1$ 的所有字符相同。\n- 特殊性质 B：保证 $t_1 = t_2$。\n- 特殊性质 C：保证 $t_1$ 和 $t_2$ 中各自恰有一个字符  $\\tt 0$。", "locale": "zh-CN"}}}
{"pid": "P11362", "type": "P", "difficulty": 4, "samples": [["3\n2 1 2\n1 1\n2 2 2\n1 1\n2 2\n2 2 2\n1 1\n1 2\n", "4\n3\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "NOIP 提高组", "O2优化", "组合数学"], "title": "[NOIP2024] 遗失的赋值", "background": null, "description": "小 F 有 $n$ 个变量 $x_1, x_2, \\ldots , x_n$。每个变量可以取 $1$ 至 $v$ 的整数取值。\n\n小 F 在这 $n$ 个变量之间添加了 $n - 1$ 条二元限制，其中第 $i$（$1 \\leq i \\leq n - 1$）条限制为：若 $x_i = a_i$，则要求 $x_{i+1} = b_i$，**且 $a_i$ 与 $b_i$ 为 $1$ 到 $v$ 之间的整数**；当 $x_i \\neq a_i$ 时，第 $i$ 条限制对 $x_{i+1}$ 的值不做任何约束。除此之外，小 F 还添加了 $m$ 条一元限制，其中第 $j$（$1 \\leq j \\leq m$）条限制为：$x_{c_j} = d_j$。\n\n小 F 记住了所有 $c_j$ 和 $d_j$ 的值，但把所有 $a_i$ 和 $b_i$ 的值都忘了。同时小 F 知道：存在给每一个变量赋值的方案同时满足所有这些限制。\n\n现在小 F 想知道，有多少种 $a_i, b_i$（$1 \\leq i \\leq n - 1$）取值的组合，使得能够确保至少存在一种给每个变量 $x_i$ 赋值的方案可以同时满足所有限制。由于方案数可能很大，小 F 只需要你输出方案数对 $10^9 + 7$ 取模的结果。", "inputFormat": "**本题包含多组测试数据**。\n\n输入的第一行包含一个整数 $T$，表示测试数据的组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含三个整数 $n, m, v$，分别表示变量个数、一元限制个数和变量的取值上限。\n\n接下来 $m$ 行，第 $j$ 行包含两个整数 $c_j, d_j$，描述一个一元限制。", "outputFormat": "对于每组测试数据输出一行，包含一个整数，表示方案数对 $10^9 + 7$ 取模的结果。", "hint": "**【样例 1 解释】**\n\n- 对于第一组测试数据，所有可能的 $(a_1, b_1)$ 取值的组合 $(1, 1), (1, 2), (2, 1), (2, 2)$ 都满足限制。例如，$(a_1, b_1) = (1, 1)$ 时，$(x_1, x_2) = (1, 1)$ 满足所有限制，而 $(a_1, b_1) = (2, 2)$ 时，$(x_1, x_2) = (1, 1)$ 与 $(x_1, x_2) = (1, 2)$ 均满足所有限制。\n- 对于第二组测试数据，只有 $(x_1, x_2) = (1, 2)$ 一种可能的变量赋值，因此只有 $(a_1, b_1) = (1, 1)$ 不满足限制，其余三种赋值均满足限制。\n- 对于第三组测试数据，不存在一种变量赋值同时满足 $x_1 = 1$ 和 $x_1 = 2$，因此也不存在满足限制的 $(a_1, b_1)$。\n\n**【样例 2】**\n\n见选手目录下的 `assign/assign2.in` 与 `assign/assign2.ans`。\n\n该样例共有 $10$ 组测试数据，其中第 $i$（$1 \\leq i \\leq 10$）组测试数据满足数据范围中描述的测试点 $i$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 `assign/assign3.in` 与 `assign/assign3.ans`。\n\n该样例共有 $10$ 组测试数据，其中第 $i$（$1 \\leq i \\leq 10$）组测试数据满足数据范围中描述的测试点 $i + 10$ 的限制。\n\n**【数据范围】**\n\n对于所有的测试数据，保证：\n\n- $1 \\leq T \\leq 10$，\n- $1 \\leq n \\leq 10^9$，$1 \\leq m \\leq 10^5$，$2 \\leq v \\leq 10^9$，\n- 对于任意的 $j$（$1 \\leq j \\leq m$），都有 $1 \\leq c_j \\leq n$，$1 \\leq d_j \\leq v$。\n\n::cute-table{tuack}\n\n| 测试点 | $n \\leq$ | $m \\leq$ | $v \\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1, 2$ | $6$ | $6$ | $2$ | 无 |\n| $3$ | $9$ | $9$ | ^ | ^ |\n| $4, 5$ | $12$ | $12$ | ^ | ^ |\n| $6$ | $10^3$ | $1$ | $10^3$ | ^ |\n| $7$ | $10^5$ | ^ | $10^5$ | ^ |\n| $8,9$ | $10^9$ | ^ | $10^9$ | ^ |\n| $10$ | $10^3$ | $10^3$ | $10^3$ | A |\n| $11$ | $10^4$ | $10^4$ | $10^4$ | ^ |\n| $12$ | $10^5$ | $10^5$ | $10^5$ | ^ |\n| $13$ | $10^4$ | $10^3$ | $10^4$ | B |\n| $14$ | $10^6$ | $10^4$ | $10^6$ | ^ |\n| $15, 16$ | $10^9$ | $10^5$ | $10^9$ | ^ |\n| $17$ | $10^4$ | $10^3$ | $10^4$ | 无 |\n| $18$ | $10^6$ | $10^4$ | $10^6$ | ^ |\n| $19, 20$ | $10^9$ | $10^5$ | $10^9$ | ^ |\n\n特殊性质 A：保证 $m = n$，且对于任意的 $j$（$1 \\leq j \\leq m$），都有 $c_j = j$。\n\n特殊性质 B：保证 $d_j = 1$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP2024] The Lost Assignment", "background": "", "description": "Xiao F has $n$ variables $x_1, x_2, \\ldots, x_n$. Each variable can take integer values from $1$ to $v$.\n\nXiao F added $n - 1$ binary constraints between these variables. The $i$-th constraint ($1 \\leq i \\leq n - 1$) is: if $x_i = a_i$, then $x_{i+1} = b_i$ must hold, **where $a_i$ and $b_i$ are integers between $1$ and $v$**. When $x_i \\neq a_i$, the $i$-th constraint imposes no restrictions on $x_{i+1}$. Additionally, Xiao F added $m$ unary constraints, where the $j$-th constraint ($1 \\leq j \\leq m$) states $x_{c_j} = d_j$.\n\nXiao F remembers all $c_j$ and $d_j$ values but has forgotten all $a_i$ and $b_i$ values. However, Xiao F knows that **there exists an assignment to all variables that satisfies all constraints**.\n\nNow, Xiao F wants to determine how many possible combinations of $a_i, b_i$ ($1 \\leq i \\leq n - 1$) exist such that there is **at least one valid assignment** satisfying all constraints. Since the number might be large, output the result modulo $10^9 + 7$.", "inputFormat": "**The problem contains multiple test cases.**\n\nThe first line of input contains an integer $T$, the number of test cases.\n\nThis is followed by $T$ test cases, each formatted as follows:\n\n- The first line contains three integers $n$, $m$, $v$, representing the number of variables, the number of unary constraints, and the upper bound of variable values.\n- The next $m$ lines each contain two integers $c_j$, $d_j$, describing a unary constraint.", "outputFormat": "For each test case, output one line containing an integer, the number of valid combinations modulo $10^9 + 7$.", "hint": "### Explanation for Sample #1\n\n- **First test case**: All possible $(a_1, b_1)$ combinations $(1,1)$, $(1,2)$, $(2,1)$, $(2,2)$ are valid. For example:\n  - When $(a_1, b_1) = (1,1)$, $(x_1, x_2) = (1,1)$ satisfies all constraints.\n  - When $(a_1, b_1) = (2,2)$, both $(x_1, x_2) = (1,1)$ and $(x_1, x_2) = (1,2)$ are valid.\n  \n- **Second test case**: The only valid assignment is $(x_1, x_2) = (1,2)$. Thus:\n  - $(a_1, b_1) = (1,1)$ is invalid (requires $x_2=1$), but the other three combinations are valid.\n  \n- **Third test case**: No assignment satisfies both $x_1=1$ and $x_1=2$, so no valid combinations exist.\n\n### Sample #2\n\nSee files `assign/assign2.in` and `assign/assign2.ans` in the problem directory.\n\nThis sample contains 10 test cases, where the $i$-th test case ($1 \\leq i \\leq 10$) satisfies the constraints for test point $i$ in the data range.\n\n### Sample #3\n\nSee files `assign/assign3.in` and `assign/assign3.ans` in the problem directory.\n\nThis sample contains 10 test cases, where the $i$-th test case ($1 \\leq i \\leq 10$) satisfies the constraints for test point $i + 10$ in the data range.\n\n### Data Range\n\nFor all test data, it is guaranteed that:\n- $1 \\leq T \\leq 10$,\n- $1 \\leq n \\leq 10^9$, $1 \\leq m \\leq 10^5$, $2 \\leq v \\leq 10^9$,\n- For all $j$ ($1 \\leq j \\leq m$), $1 \\leq c_j \\leq n$, $1 \\leq d_j \\leq v$.\n\n| Test Case | $n \\leq$ | $m \\leq$ | $v \\leq$ | Special Property |\n| :-------: | :------: | :------: | :------: | :--------------: |\n| 1, 2      | 6        | 6        | 2        | None             |\n| 3         | 9        | 9        | 2        | None             |\n| 4, 5      | 12       | 12       | 2        | None             |\n| 6         | $10^3$   | 1        | $10^3$   | None             |\n| 7         | $10^5$   | 1        | $10^5$   | None             |\n| 8, 9      | $10^9$   | 1        | $10^9$   | None             |\n| 10        | $10^3$   | $10^3$   | $10^3$   | A                |\n| 11        | $10^4$   | $10^4$   | $10^4$   | A                |\n| 12        | $10^5$   | $10^5$   | $10^5$   | A                |\n| 13        | $10^4$   | $10^3$   | $10^4$   | B                |\n| 14        | $10^6$   | $10^4$   | $10^6$   | B                |\n| 15, 16    | $10^9$   | $10^5$   | $10^9$   | B                |\n| 17        | $10^4$   | $10^3$   | $10^4$   | None             |\n| 18        | $10^6$   | $10^4$   | $10^6$   | None             |\n| 19, 20    | $10^9$   | $10^5$   | $10^9$   | None             |\n\n- **Special Property A**: $m = n$ and $c_j = j$ for all $j$ ($1 \\leq j \\leq m$).\n- **Special Property B**: $d_j = 1$ for all $j$ ($1 \\leq j \\leq m$).\n\nTranslated by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "[NOIP2024] 遗失的赋值", "background": null, "description": "小 F 有 $n$ 个变量 $x_1, x_2, \\ldots , x_n$。每个变量可以取 $1$ 至 $v$ 的整数取值。\n\n小 F 在这 $n$ 个变量之间添加了 $n - 1$ 条二元限制，其中第 $i$（$1 \\leq i \\leq n - 1$）条限制为：若 $x_i = a_i$，则要求 $x_{i+1} = b_i$，**且 $a_i$ 与 $b_i$ 为 $1$ 到 $v$ 之间的整数**；当 $x_i \\neq a_i$ 时，第 $i$ 条限制对 $x_{i+1}$ 的值不做任何约束。除此之外，小 F 还添加了 $m$ 条一元限制，其中第 $j$（$1 \\leq j \\leq m$）条限制为：$x_{c_j} = d_j$。\n\n小 F 记住了所有 $c_j$ 和 $d_j$ 的值，但把所有 $a_i$ 和 $b_i$ 的值都忘了。同时小 F 知道：存在给每一个变量赋值的方案同时满足所有这些限制。\n\n现在小 F 想知道，有多少种 $a_i, b_i$（$1 \\leq i \\leq n - 1$）取值的组合，使得能够确保至少存在一种给每个变量 $x_i$ 赋值的方案可以同时满足所有限制。由于方案数可能很大，小 F 只需要你输出方案数对 $10^9 + 7$ 取模的结果。", "inputFormat": "**本题包含多组测试数据**。\n\n输入的第一行包含一个整数 $T$，表示测试数据的组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含三个整数 $n, m, v$，分别表示变量个数、一元限制个数和变量的取值上限。\n\n接下来 $m$ 行，第 $j$ 行包含两个整数 $c_j, d_j$，描述一个一元限制。", "outputFormat": "对于每组测试数据输出一行，包含一个整数，表示方案数对 $10^9 + 7$ 取模的结果。", "hint": "**【样例 1 解释】**\n\n- 对于第一组测试数据，所有可能的 $(a_1, b_1)$ 取值的组合 $(1, 1), (1, 2), (2, 1), (2, 2)$ 都满足限制。例如，$(a_1, b_1) = (1, 1)$ 时，$(x_1, x_2) = (1, 1)$ 满足所有限制，而 $(a_1, b_1) = (2, 2)$ 时，$(x_1, x_2) = (1, 1)$ 与 $(x_1, x_2) = (1, 2)$ 均满足所有限制。\n- 对于第二组测试数据，只有 $(x_1, x_2) = (1, 2)$ 一种可能的变量赋值，因此只有 $(a_1, b_1) = (1, 1)$ 不满足限制，其余三种赋值均满足限制。\n- 对于第三组测试数据，不存在一种变量赋值同时满足 $x_1 = 1$ 和 $x_1 = 2$，因此也不存在满足限制的 $(a_1, b_1)$。\n\n**【样例 2】**\n\n见选手目录下的 `assign/assign2.in` 与 `assign/assign2.ans`。\n\n该样例共有 $10$ 组测试数据，其中第 $i$（$1 \\leq i \\leq 10$）组测试数据满足数据范围中描述的测试点 $i$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 `assign/assign3.in` 与 `assign/assign3.ans`。\n\n该样例共有 $10$ 组测试数据，其中第 $i$（$1 \\leq i \\leq 10$）组测试数据满足数据范围中描述的测试点 $i + 10$ 的限制。\n\n**【数据范围】**\n\n对于所有的测试数据，保证：\n\n- $1 \\leq T \\leq 10$，\n- $1 \\leq n \\leq 10^9$，$1 \\leq m \\leq 10^5$，$2 \\leq v \\leq 10^9$，\n- 对于任意的 $j$（$1 \\leq j \\leq m$），都有 $1 \\leq c_j \\leq n$，$1 \\leq d_j \\leq v$。\n\n::cute-table{tuack}\n\n| 测试点 | $n \\leq$ | $m \\leq$ | $v \\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1, 2$ | $6$ | $6$ | $2$ | 无 |\n| $3$ | $9$ | $9$ | ^ | ^ |\n| $4, 5$ | $12$ | $12$ | ^ | ^ |\n| $6$ | $10^3$ | $1$ | $10^3$ | ^ |\n| $7$ | $10^5$ | ^ | $10^5$ | ^ |\n| $8,9$ | $10^9$ | ^ | $10^9$ | ^ |\n| $10$ | $10^3$ | $10^3$ | $10^3$ | A |\n| $11$ | $10^4$ | $10^4$ | $10^4$ | ^ |\n| $12$ | $10^5$ | $10^5$ | $10^5$ | ^ |\n| $13$ | $10^4$ | $10^3$ | $10^4$ | B |\n| $14$ | $10^6$ | $10^4$ | $10^6$ | ^ |\n| $15, 16$ | $10^9$ | $10^5$ | $10^9$ | ^ |\n| $17$ | $10^4$ | $10^3$ | $10^4$ | 无 |\n| $18$ | $10^6$ | $10^4$ | $10^6$ | ^ |\n| $19, 20$ | $10^9$ | $10^5$ | $10^9$ | ^ |\n\n特殊性质 A：保证 $m = n$，且对于任意的 $j$（$1 \\leq j \\leq m$），都有 $c_j = j$。\n\n特殊性质 B：保证 $d_j = 1$。", "locale": "zh-CN"}}}
{"pid": "P11363", "type": "P", "difficulty": 6, "samples": [["1 1\n4 1\n1 2\n2 3\n2 4\n1", "2"], ["7 1\n5 2\n1 2\n1 3\n2 4\n2 5\n1 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "NOIP 提高组", "树形 DP", "容斥原理"], "title": "[NOIP2024] 树的遍历", "background": null, "description": "小 Q 是一个算法竞赛初学者，正在学习图论知识中的树的遍历。一棵由 $n$ 个结点，$n - 1$ 条边构成的树，初始时所有结点都未被标记，它的遍历过程如下：\n\n1. 选择一个结点 $s$ 作为遍历起始结点，并把该结点打上标记。\n2. 假设当前访问的结点为 $u$，寻找任意一个与 $u$ 相邻且未标记的结点 $v$，将 $v$ 作为新的当前访问结点并打上标记。之后再次进入第 $2$ 步。\n3. 假设在第 $2$ 步中，与 $u$ 相邻的结点都已被标记，如果 $u = s$ 则遍历过程结束，否则将 $u$ 设为遍历 $u$ 之前的上一个结点并再进入第 $2$ 步。\n\n例如在下面的树中，一种可能的遍历过程如下：\n- 选取 $1$ 作为遍历起始结点，并把 $1$ 打上标记；\n- $2$ 与 $1$ 相邻且未标记，将 $2$ 设为当前访问结点，并把 $2$ 打上标记。\n- $2$ 与 $3$ 相邻且未标记，将 $3$ 设为当前访问结点，并把 $3$ 打上标记。\n- $3$ 所有相邻的结点都被标记，将当前访问结点设为遍历结点 $3$ 之前的结点 $2$。\n- $2$ 与 $4$ 相邻且未标记，将 $4$ 设为当前访问结点，并把 $4$ 打上标记。\n- $4$ 所有相邻的结点都被标记，将当前访问结点设为遍历结点 $4$ 之前的结点 $2$。\n- $2$ 所有相邻的结点都被标记，将当前访问结点设为遍历结点 $2$ 之前的结点 $1$。\n- $1$ 所有相邻的结点都被标记，且 $1$ 是遍历起始结点，故遍历结束。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qsjiky0g.png)\n\n作为一个奇思妙想的学生，小 Q 在学习完上述知识后不满足于以结点为基础的遍历方式，于是开始研究以边为基础的遍历方式。定义两条边**相邻**，当且仅当它们有一个公共的结点。初始时，所有的边都未被标记。这种以边为基础的遍历过程如下：\n\n1. 选择一条边 $b$ 作为遍历起始边，并把该边打上标记。\n2. 假设当前访问边为 $e$，寻找任意一条与 $e$ 相邻且未标记的边 $f$，将 $f$ 作为新的当前访问边并打上标记。之后再次进入第 $2$ 步。\n3. 假设在第 $2$ 步中，与 $e$ 相邻的边都已被标记，如果 $e = b$ 则遍历过程结束，否则将 $e$ 设为遍历 $e$ 之前的上一条边并再进入第 $2$ 步。\n\n例如在上面的树中，一种可能的遍历过程如下（定义 $\\{u, v\\}$ 表示连接结点 $u$ 和 $v$ 的边）：\n\n- 选取 $\\{1, 2\\}$ 作为遍历起始边，并把 $\\{1, 2\\}$ 打上标记；\n- $\\{1, 2\\}$ 与 $\\{2, 3\\}$ 相邻且未标记，将 $\\{2, 3\\}$ 设为当前访问边，并把 $\\{2, 3\\}$ 打上标记。\n- $\\{2, 3\\}$ 与 $\\{2, 4\\}$ 相邻且未标记，将 $\\{2, 4\\}$ 设为当前访问边，并把 $\\{2, 4\\}$ 打上标记。\n- $\\{2, 4\\}$ 所有相邻的边都被标记，将当前访问边设为遍历 $\\{2, 4\\}$ 之前的边 $\\{2, 3\\}$。\n- $\\{2, 3\\}$ 所有相邻的边都被标记，将当前访问边设为遍历 $\\{2, 3\\}$ 之前的边 $\\{1, 2\\}$。\n- $\\{1, 2\\}$ 所有相邻的边都被标记，且 $\\{1, 2\\}$ 是遍历起始边，故遍历结束。\n\n小 Q 惊奇的发现，在这个新的树的遍历过程中，如果将每条边看作一个新的结点，将步骤 $2$ 中的所有新结点 $e$ 和 $f$ 连接一条新边，就会生成一棵由 $n-1$ 个新结点和 $n-2$ 条新边连接成的新树。例如上述遍历过程得到的新树如下（新的结点和新边都用红色表示）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mld0xpqg.png)\n\n现在小 Q 在 $n - 1$ 条边中选择了 $k$ 条关键边。小 Q 想知道，以任意一条关键边作为起始遍历边，通过上述遍历过程能够生成多少种不同的新树。这里两棵树被认为是不同的，当且仅当至少存在某一对新的结点，它们仅在其中一棵树中连有新边。\n\n**由于结果可能很大，你只需要输出其对 $10^9+7$ 取模的结果即可。**", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含两个整数 $c, T$，表示测试点的编号和测试数据的组数。在样例中，$c$ 表示该样例与测试点 $c$ 的数据范围相同。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n- 第一行包含两个整数 $n, k$，表示树的结点数以及小 Q 选择的关键边的数量。\n- 接下来 $n - 1$ 行，第 $i$ 行包含两个整数 $u_i, v_i$，表示树上编号为 $i$ 的边连接结点 $u_i$ 和 $v_i$。\n- 接下来一行包含 $k$ 个整数 $e_1, e_2, \\dots, e_k$，表示小 Q 选择的关键边的编号。保证关键边的编号互不相同。", "outputFormat": "对于每组测试数据输出一行，包含一个整数，表示结果对 $10^9 + 7$ 取模的结果。", "hint": "**【样例 1 解释】**\n\n两种可能的新树如下：\n- 新结点 $\\{1, 2\\}$ 和新结点 $\\{2, 3\\}$ 连新边，新结点 $\\{2, 3\\}$ 和新结点 $\\{2, 4\\}$ 连新边。\n- 新结点 $\\{1, 2\\}$ 和新结点 $\\{2, 4\\}$ 连新边，新结点 $\\{2, 4\\}$ 和新结点 $\\{2, 3\\}$ 连新边。\n\n**【样例 2 解释】**\n\n三种可能的新树如下：\n- 新结点 $\\{1, 2\\}$ 和 $\\{1, 3\\}$，$\\{1, 2\\}$ 和 $\\{2, 4\\}$，$\\{2, 4\\}$ 和 $\\{2, 5\\}$ 之间分别连新边。该新树可以选择 $\\{1, 2\\}$ 作为起始遍历边得到。\n- 新结点 $\\{1, 2\\}$ 和 $\\{1, 3\\}$，$\\{1, 2\\}$ 和 $\\{2, 5\\}$，$\\{2, 5\\}$ 和 $\\{2, 4\\}$ 之间分别连新边。该新树可以选择 $\\{1, 2\\}$ 或 $\\{2, 4\\}$ 作为起始遍历边得到。\n- 新结点 $\\{1, 2\\}$ 和 $\\{1, 3\\}$，$\\{1, 2\\}$ 和 $\\{2, 4\\}$，$\\{1, 2\\}$ 和 $\\{2, 5\\}$ 之间分别连新边。该新树可以选择 $\\{2, 4\\}$ 作为起始遍历边得到。\n\n**【样例 3】**\n\n见附件的 traverse/traverse3.in 与 traverse/traverse3.ans。\n\n该组样例满足 $c = 4$。\n\n**【样例 4】**\n\n见附件的 traverse/traverse4.in 与 traverse/traverse4.ans。\n\n该组样例满足 $c = 7$。\n\n**【样例 5】**\n\n见附件的 traverse/traverse5.in 与 traverse/traverse5.ans。\n\n该组样例满足 $c = 11$。\n\n**【样例 6】**\n\n见附件的 traverse/traverse6.in 与 traverse/traverse6.ans。\n\n该组样例满足 $c = 13$。\n\n**【样例 7】**\n\n见附件的 traverse/traverse7.in 与 traverse/traverse7.ans。\n\n该组样例满足 $c = 15$。\n\n**【样例 8】**\n\n见附件的 traverse/traverse8.in 与 traverse/traverse8.ans。\n\n该组样例满足 $c = 16$。\n\n**【样例 9】**\n\n见附件的 traverse/traverse9.in 与 traverse/traverse9.ans。\n\n该组样例满足 $c = 18$。\n\n**【样例 10】**\n\n见附件的 traverse/traverse10.in 与 traverse/traverse10.ans。\n\n该组样例满足 $c = 19$。\n\n**【样例 11】**\n\n见附件的 traverse/traverse11.in 与 traverse/traverse11.ans。\n\n该组样例满足 $c = 22$。\n\n**【样例 12】**\n\n见附件的 traverse/traverse12.in 与 traverse/traverse12.ans。\n\n该组样例满足 $c = 24$。\n\n**【数据范围】**\n\n对于所有的测试数据，保证：\n- $1 \\leq T \\leq 10$；\n- $2 \\leq n \\leq 10^5$；\n- $1 \\leq k < n$；\n- 对于任意的 $i(1 \\leq i \\leq n - 1)$，都有 $1 \\leq u_i, v_i \\leq n$，且构成一颗合法的树。\n- 对于任意的 $i(1 \\leq i \\leq k)$，都有 $1 \\leq e_i < n$，且两两不同。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n$ | $k$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $\\leq 5$ | $\\leq 1$ | 无 |\n| $4\\sim 6$ | $\\leq 10^5$ | ^ | ^ |\n| $7\\sim 10$ | ^ | $\\leq 2$ | ^ |\n| $11,12$ | $\\leq 500$ | $\\leq 8$ | ^ |\n| $13,14$ | $\\leq 10^2$ | $<n$ | ^ |\n| $15$ | $\\leq 500$ | ^ | ^ |\n| $16,17$ | $\\leq 10^5$ | $\\leq 500$ | ^ |\n| $18$ | ^ | $<n$ | A |\n| $19\\sim 21$ | ^ | ^ | B |\n| $22,23$ | $\\leq 2\\times 10^4$ | ^ | 无 |\n| $24,25$ | $\\leq 10^5$ | ^ | ^ |\n\n- 特殊性质 A：对于任意的 $i(1 \\leq i \\leq n - 1)$，都有 $u_i = i, v_i = i + 1$。\n- 特殊性质 B：对于任意的 $i(1 \\leq i \\leq n - 1)$，都有 $u_i = 1, v_i = i + 1$。\n\n**【提示】**\n\n数据输入的规模可能较大，请选手注意输入读取方式的效率。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP2024] Tree Traversal", "background": "", "description": "Xiao Q, a beginner in algorithmic competitions, is learning about tree traversal in graph theory. A tree with $n$ nodes and $n - 1$ edges initially has all nodes unmarked. Its traversal process is as follows:\n\n1. Select a node $s$ as the starting node for traversal and mark it.\n2. Suppose the currently visited node is $u$. Find any adjacent node $v$ to $u$ that is unmarked, set $v$ as the new current node, mark it, and repeat Step 2.\n3. If in Step 2, all adjacent nodes of $u$ are already marked: if $u = s$, the traversal ends; otherwise, set $u$ to the previous node before traversing $u$ and repeat Step 2.\n\nFor example, in the following tree, a possible traversal process is:\n- Select node $1$ as the starting node and mark it.\n- Node $2$ is adjacent to $1$ and unmarked. Set $2$ as the current node and mark it.\n- Node $3$ is adjacent to $2$ and unmarked. Set $3$ as the current node and mark it.\n- All adjacent nodes of $3$ are marked. Return to the previous node $2$.\n- Node $4$ is adjacent to $2$ and unmarked. Set $4$ as the current node and mark it.\n- All adjacent nodes of $4$ are marked. Return to the previous node $2$.\n- All adjacent nodes of $2$ are marked. Return to the previous node $1$.\n- All adjacent nodes of $1$ are marked, and since $1$ is the starting node, the traversal ends.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qsjiky0g.png)\n\n$$\\text{Pic1: The tree in sample 1}$$\n\nAs a creative student, Xiao Q is not satisfied with node-based traversal and begins researching edge-based traversal. Two edges are defined as **adjacent** if they share a common node. Initially, all edges are unmarked. The edge-based traversal process is:\n\n1. Select an edge $b$ as the starting edge for traversal and mark it.\n2. Suppose the currently visited edge is $e$. Find any adjacent edge $f$ to $e$ that is unmarked, set $f$ as the new current edge, mark it, and repeat Step 2.\n3. If in Step 2, all adjacent edges of $e$ are marked: if $e = b$, the traversal ends; otherwise, set $e$ to the previous edge before traversing $e$ and repeat Step 2.\n\nFor example, in the above tree, a possible traversal process (where $\\{u, v\\}$ denotes the edge connecting nodes $u$ and $v$) is:\n- Select $\\{1, 2\\}$ as the starting edge and mark it.\n- $\\{1, 2\\}$ is adjacent to $\\{2, 3\\}$, which is unmarked. Set $\\{2, 3\\}$ as the current edge and mark it.\n- $\\{2, 3\\}$ is adjacent to $\\{2, 4\\}$, which is unmarked. Set $\\{2, 4\\}$ as the current edge and mark it.\n- All adjacent edges of $\\{2, 4\\}$ are marked. Return to the previous edge $\\{2, 3\\}$.\n- All adjacent edges of $\\{2, 3\\}$ are marked. Return to the previous edge $\\{1, 2\\}$.\n- All adjacent edges of $\\{1, 2\\}$ are marked, and since $\\{1, 2\\}$ is the starting edge, the traversal ends.\n\nXiao Q discovers that if each edge is treated as a new node, and a new edge is created between every pair of edges $e$ and $f$ where $f$ is chosen in Step 2, this generates a new tree with $n-1$ new nodes and $n-2$ new edges. For example, the traversal above produces the following new tree (red nodes and edges):\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mld0xpqg.png)\n\n$$\\text{Pic2: A possible new tree}$$\n\nNow, Xiao Q has selected $k$ **key edges** among the $n-1$ edges. He wants to know how many distinct new trees can be generated by starting the traversal from any key edge. Two trees are considered different if there exists at least one pair of new nodes connected by an edge in one tree but not in the other.\n\n**Since the result may be large, output the answer modulo $10^9+7$.**", "inputFormat": "**The problem contains multiple test cases.**\n\nThe first line of input contains two integers $c$ and $T$, representing the test case ID and the number of test cases. In sample inputs, $c$ indicates that the sample shares the same data range as test case $c$.\n\nThis is followed by $T$ test cases, each formatted as:\n- The first line contains two integers $n$ and $k$, representing the number of nodes in the tree and the number of key edges selected.\n- The next $n - 1$ lines each contain two integers $u_i$ and $v_i$, representing the nodes connected by the $i$-th edge in the tree.\n- The next line contains $k$ integers $e_1, e_2, \\dots, e_k$, representing the indices of the key edges. All key edge indices are distinct.", "outputFormat": "For each test case, output one line containing the result modulo $10^9 + 7$.", "hint": "### Explanation\n\n**【Sample 1 Explanation】**\n\nTwo possible new trees:\n1. New edges between $\\{1, 2\\}$ and $\\{2, 3\\}$, and between $\\{2, 3\\}$ and $\\{2, 4\\}$.\n2. New edges between $\\{1, 2\\}$ and $\\{2, 4\\}$, and between $\\{2, 4\\}$ and $\\{2, 3\\}$.\n\n**【Sample 2 Explanation】**\n\nThree possible new trees:\n1. New edges between $\\{1, 2\\}$ and $\\{1, 3\\}$, $\\{1, 2\\}$ and $\\{2, 4\\}$, $\\{2, 4\\}$ and $\\{2, 5\\}$ (starting from $\\{1, 2\\}$).\n2. New edges between $\\{1, 2\\}$ and $\\{1, 3\\}$, $\\{1, 2\\}$ and $\\{2, 5\\}$, $\\{2, 5\\}$ and $\\{2, 4\\}$ (starting from $\\{1, 2\\}$ or $\\{2, 4\\}$).\n3. New edges between $\\{1, 2\\}$ and $\\{1, 3\\}$, $\\{1, 2\\}$ and $\\{2, 4\\}$, $\\{1, 2\\}$ and $\\{2, 5\\}$ (starting from $\\{2, 4\\}$).\n\n**【Additional Samples】**\n\nSamples 3 to 12 are provided in attachments (traverse3.in to traverse12.ans), corresponding to test cases 4, 7, 11, 13, 15, 16, 18, 19, 22, and 24.\n\n**【Data Range】**\n\nFor all test data:\n- $1 \\leq T \\leq 10$;\n- $2 \\leq n \\leq 10^5$;\n- $1 \\leq k < n$;\n- For every $i$ ($1 \\leq i \\leq n - 1$), $1 \\leq u_i, v_i \\leq n$, forming a valid tree;\n- For every $i$ ($1 \\leq i \\leq k$), $1 \\leq e_i < n$, all distinct.\n\n| Test Case Range | $n$ | $k$ | Special Properties |\n| :--------------: | :--------------: | :--------------: | :--------------: |\n| $1\\sim 3$ | $\\leq 5$ | $\\leq 1$ | None |\n| $4\\sim 6$ | $\\leq 10^5$ | $\\leq 1$ | None |\n| $7\\sim 10$ | $\\leq 10^5$ | $\\leq 2$ | None |\n| $11,12$ | $\\leq 500$ | $\\leq 8$ | None |\n| $13,14$ | $\\leq 10^2$ | $<n$ | None |\n| $15$ | $\\leq 500$ | $<n$ | None |\n| $16,17$ | $\\leq 10^5$ | $\\leq 500$ | None |\n| $18$ | $\\leq 10^5$ | $<n$ | A |\n| $19\\sim 21$ | $\\leq 10^5$ | $<n$ | B |\n| $22,23$ | $\\leq 2\\times 10^4$ | $<n$ | None |\n| $24,25$ | $\\leq 10^5$ | $<n$ | None |\n\n- **Special Property A**: For every $i$ ($1 \\leq i \\leq n - 1$), $u_i = i$, $v_i = i + 1$.\n- **Special Property B**: For every $i$ ($1 \\leq i \\leq n - 1$), $u_i = 1$, $v_i = i + 1$.\n\n**【Note】**\n\nInput data may be large; ensure efficient reading methods.\n\n---\n\nTranslated by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "[NOIP2024] 树的遍历", "background": null, "description": "小 Q 是一个算法竞赛初学者，正在学习图论知识中的树的遍历。一棵由 $n$ 个结点，$n - 1$ 条边构成的树，初始时所有结点都未被标记，它的遍历过程如下：\n\n1. 选择一个结点 $s$ 作为遍历起始结点，并把该结点打上标记。\n2. 假设当前访问的结点为 $u$，寻找任意一个与 $u$ 相邻且未标记的结点 $v$，将 $v$ 作为新的当前访问结点并打上标记。之后再次进入第 $2$ 步。\n3. 假设在第 $2$ 步中，与 $u$ 相邻的结点都已被标记，如果 $u = s$ 则遍历过程结束，否则将 $u$ 设为遍历 $u$ 之前的上一个结点并再进入第 $2$ 步。\n\n例如在下面的树中，一种可能的遍历过程如下：\n- 选取 $1$ 作为遍历起始结点，并把 $1$ 打上标记；\n- $2$ 与 $1$ 相邻且未标记，将 $2$ 设为当前访问结点，并把 $2$ 打上标记。\n- $2$ 与 $3$ 相邻且未标记，将 $3$ 设为当前访问结点，并把 $3$ 打上标记。\n- $3$ 所有相邻的结点都被标记，将当前访问结点设为遍历结点 $3$ 之前的结点 $2$。\n- $2$ 与 $4$ 相邻且未标记，将 $4$ 设为当前访问结点，并把 $4$ 打上标记。\n- $4$ 所有相邻的结点都被标记，将当前访问结点设为遍历结点 $4$ 之前的结点 $2$。\n- $2$ 所有相邻的结点都被标记，将当前访问结点设为遍历结点 $2$ 之前的结点 $1$。\n- $1$ 所有相邻的结点都被标记，且 $1$ 是遍历起始结点，故遍历结束。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qsjiky0g.png)\n\n作为一个奇思妙想的学生，小 Q 在学习完上述知识后不满足于以结点为基础的遍历方式，于是开始研究以边为基础的遍历方式。定义两条边**相邻**，当且仅当它们有一个公共的结点。初始时，所有的边都未被标记。这种以边为基础的遍历过程如下：\n\n1. 选择一条边 $b$ 作为遍历起始边，并把该边打上标记。\n2. 假设当前访问边为 $e$，寻找任意一条与 $e$ 相邻且未标记的边 $f$，将 $f$ 作为新的当前访问边并打上标记。之后再次进入第 $2$ 步。\n3. 假设在第 $2$ 步中，与 $e$ 相邻的边都已被标记，如果 $e = b$ 则遍历过程结束，否则将 $e$ 设为遍历 $e$ 之前的上一条边并再进入第 $2$ 步。\n\n例如在上面的树中，一种可能的遍历过程如下（定义 $\\{u, v\\}$ 表示连接结点 $u$ 和 $v$ 的边）：\n\n- 选取 $\\{1, 2\\}$ 作为遍历起始边，并把 $\\{1, 2\\}$ 打上标记；\n- $\\{1, 2\\}$ 与 $\\{2, 3\\}$ 相邻且未标记，将 $\\{2, 3\\}$ 设为当前访问边，并把 $\\{2, 3\\}$ 打上标记。\n- $\\{2, 3\\}$ 与 $\\{2, 4\\}$ 相邻且未标记，将 $\\{2, 4\\}$ 设为当前访问边，并把 $\\{2, 4\\}$ 打上标记。\n- $\\{2, 4\\}$ 所有相邻的边都被标记，将当前访问边设为遍历 $\\{2, 4\\}$ 之前的边 $\\{2, 3\\}$。\n- $\\{2, 3\\}$ 所有相邻的边都被标记，将当前访问边设为遍历 $\\{2, 3\\}$ 之前的边 $\\{1, 2\\}$。\n- $\\{1, 2\\}$ 所有相邻的边都被标记，且 $\\{1, 2\\}$ 是遍历起始边，故遍历结束。\n\n小 Q 惊奇的发现，在这个新的树的遍历过程中，如果将每条边看作一个新的结点，将步骤 $2$ 中的所有新结点 $e$ 和 $f$ 连接一条新边，就会生成一棵由 $n-1$ 个新结点和 $n-2$ 条新边连接成的新树。例如上述遍历过程得到的新树如下（新的结点和新边都用红色表示）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mld0xpqg.png)\n\n现在小 Q 在 $n - 1$ 条边中选择了 $k$ 条关键边。小 Q 想知道，以任意一条关键边作为起始遍历边，通过上述遍历过程能够生成多少种不同的新树。这里两棵树被认为是不同的，当且仅当至少存在某一对新的结点，它们仅在其中一棵树中连有新边。\n\n**由于结果可能很大，你只需要输出其对 $10^9+7$ 取模的结果即可。**", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含两个整数 $c, T$，表示测试点的编号和测试数据的组数。在样例中，$c$ 表示该样例与测试点 $c$ 的数据范围相同。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n- 第一行包含两个整数 $n, k$，表示树的结点数以及小 Q 选择的关键边的数量。\n- 接下来 $n - 1$ 行，第 $i$ 行包含两个整数 $u_i, v_i$，表示树上编号为 $i$ 的边连接结点 $u_i$ 和 $v_i$。\n- 接下来一行包含 $k$ 个整数 $e_1, e_2, \\dots, e_k$，表示小 Q 选择的关键边的编号。保证关键边的编号互不相同。", "outputFormat": "对于每组测试数据输出一行，包含一个整数，表示结果对 $10^9 + 7$ 取模的结果。", "hint": "**【样例 1 解释】**\n\n两种可能的新树如下：\n- 新结点 $\\{1, 2\\}$ 和新结点 $\\{2, 3\\}$ 连新边，新结点 $\\{2, 3\\}$ 和新结点 $\\{2, 4\\}$ 连新边。\n- 新结点 $\\{1, 2\\}$ 和新结点 $\\{2, 4\\}$ 连新边，新结点 $\\{2, 4\\}$ 和新结点 $\\{2, 3\\}$ 连新边。\n\n**【样例 2 解释】**\n\n三种可能的新树如下：\n- 新结点 $\\{1, 2\\}$ 和 $\\{1, 3\\}$，$\\{1, 2\\}$ 和 $\\{2, 4\\}$，$\\{2, 4\\}$ 和 $\\{2, 5\\}$ 之间分别连新边。该新树可以选择 $\\{1, 2\\}$ 作为起始遍历边得到。\n- 新结点 $\\{1, 2\\}$ 和 $\\{1, 3\\}$，$\\{1, 2\\}$ 和 $\\{2, 5\\}$，$\\{2, 5\\}$ 和 $\\{2, 4\\}$ 之间分别连新边。该新树可以选择 $\\{1, 2\\}$ 或 $\\{2, 4\\}$ 作为起始遍历边得到。\n- 新结点 $\\{1, 2\\}$ 和 $\\{1, 3\\}$，$\\{1, 2\\}$ 和 $\\{2, 4\\}$，$\\{1, 2\\}$ 和 $\\{2, 5\\}$ 之间分别连新边。该新树可以选择 $\\{2, 4\\}$ 作为起始遍历边得到。\n\n**【样例 3】**\n\n见附件的 traverse/traverse3.in 与 traverse/traverse3.ans。\n\n该组样例满足 $c = 4$。\n\n**【样例 4】**\n\n见附件的 traverse/traverse4.in 与 traverse/traverse4.ans。\n\n该组样例满足 $c = 7$。\n\n**【样例 5】**\n\n见附件的 traverse/traverse5.in 与 traverse/traverse5.ans。\n\n该组样例满足 $c = 11$。\n\n**【样例 6】**\n\n见附件的 traverse/traverse6.in 与 traverse/traverse6.ans。\n\n该组样例满足 $c = 13$。\n\n**【样例 7】**\n\n见附件的 traverse/traverse7.in 与 traverse/traverse7.ans。\n\n该组样例满足 $c = 15$。\n\n**【样例 8】**\n\n见附件的 traverse/traverse8.in 与 traverse/traverse8.ans。\n\n该组样例满足 $c = 16$。\n\n**【样例 9】**\n\n见附件的 traverse/traverse9.in 与 traverse/traverse9.ans。\n\n该组样例满足 $c = 18$。\n\n**【样例 10】**\n\n见附件的 traverse/traverse10.in 与 traverse/traverse10.ans。\n\n该组样例满足 $c = 19$。\n\n**【样例 11】**\n\n见附件的 traverse/traverse11.in 与 traverse/traverse11.ans。\n\n该组样例满足 $c = 22$。\n\n**【样例 12】**\n\n见附件的 traverse/traverse12.in 与 traverse/traverse12.ans。\n\n该组样例满足 $c = 24$。\n\n**【数据范围】**\n\n对于所有的测试数据，保证：\n- $1 \\leq T \\leq 10$；\n- $2 \\leq n \\leq 10^5$；\n- $1 \\leq k < n$；\n- 对于任意的 $i(1 \\leq i \\leq n - 1)$，都有 $1 \\leq u_i, v_i \\leq n$，且构成一颗合法的树。\n- 对于任意的 $i(1 \\leq i \\leq k)$，都有 $1 \\leq e_i < n$，且两两不同。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n$ | $k$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $\\leq 5$ | $\\leq 1$ | 无 |\n| $4\\sim 6$ | $\\leq 10^5$ | ^ | ^ |\n| $7\\sim 10$ | ^ | $\\leq 2$ | ^ |\n| $11,12$ | $\\leq 500$ | $\\leq 8$ | ^ |\n| $13,14$ | $\\leq 10^2$ | $<n$ | ^ |\n| $15$ | $\\leq 500$ | ^ | ^ |\n| $16,17$ | $\\leq 10^5$ | $\\leq 500$ | ^ |\n| $18$ | ^ | $<n$ | A |\n| $19\\sim 21$ | ^ | ^ | B |\n| $22,23$ | $\\leq 2\\times 10^4$ | ^ | 无 |\n| $24,25$ | $\\leq 10^5$ | ^ | ^ |\n\n- 特殊性质 A：对于任意的 $i(1 \\leq i \\leq n - 1)$，都有 $u_i = i, v_i = i + 1$。\n- 特殊性质 B：对于任意的 $i(1 \\leq i \\leq n - 1)$，都有 $u_i = 1, v_i = i + 1$。\n\n**【提示】**\n\n数据输入的规模可能较大，请选手注意输入读取方式的效率。", "locale": "zh-CN"}}}
{"pid": "P11364", "type": "P", "difficulty": 6, "samples": [["6\n5 6\n6 1\n6 2\n2 3\n2 4\n3\n2 5 2\n1 4 1\n1 6 3\n", "3\n4\n3\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2024", "NOIP 提高组", "最近公共祖先 LCA", "扫描线"], "title": "[NOIP2024] 树上查询", "background": null, "description": "有一天小 S 和她的朋友小 N 一起研究一棵包含了 $n$ 个结点的树。\n\n这是一棵有根树，根结点编号为 $1$，每个结点 $u$ 的深度 $\\text{dep}_ u$ 定义为 $u$ 到 $1$ 的简单路径上的**结点数量**。\n\n除此之外，再定义 $\\text{LCA*}(l, r)$ 为编号在 $[l, r]$ 中所有结点的最近公共祖先，即 $l, l + 1, \\dots , r$ 的公共祖先结点中深度最大的结点。\n\n小 N 对这棵树提出了 $q$ 个询问。在每个询问中，小 N 都会给出三个参数 $l, r, k$，表示他想知道 $[l, r]$ 中任意长度大于等于 $k$ 的连续子区间的最近公共祖先深度的最大值，即\n\n$$\\max_{l\\le l'\\le r'\\le r \\land r'-l'+1\\ge k}\\text{dep}_ {\\text{LCA*}(l', r')}$$\n\n你的任务是帮助小 S 来回答这些询问。", "inputFormat": "输入的第一行包含一个正整数 $n$，表示树的结点数。\n\n接下来 $n - 1$ 行，每行包含两个正整数 $u, v$，表示存在一条从结点 $u$ 到结点 $v$ 的边。\n\n第 $n + 1$ 行包含一个正整数 $q$，表示询问的数量。\n\n接下来 $q$ 行，每行包含三个正整数 $l, r, k$，描述了一次询问。", "outputFormat": "对于每次询问输出一行，包含一个整数，表示对应的答案。", "hint": "**【样例 1 解释】**\n\n![图 3](https://cdn.luogu.com.cn/upload/image_hosting/ktoq3ogh.png)\n\n+ 对于第一组询问，$\\text{LCA*}(2, 3) = 2, \\text{LCA*}(3, 4) = 2, \\text{LCA*}(4, 5) = 6$，$2$ 的深度为 $3$，$6$ 的深度为 $2$，因此答案为 $\\max\\{3, 3, 2\\} = 3$。\n\n+ 对于第二组询问，答案为 $1, 2, 3, 4$ 四个结点的最大深度，因此答案为 $4$。\n\n+ 对于第三组询问，$\\text{LCA*}(1, 3) = 1, \\text{LCA*}(2, 4) = 2, \\text{LCA*}(3, 5) = 6, \\text{LCA*}(4, 6) = 6$，依旧是 $2$ 的深度最大，因此答案为 $3$。\n\n**【样例 2】**\n\n见附件的 query/query2.in 与 query/query2.ans。\n\n该样例满足 $n, q ≤ 500$。\n\n**【样例 3】**\n\n见附件的 query/query3.in 与 query/query3.ans。\n\n该样例满足 $n, q ≤ 10^5$ 且树符合链的形态。\n\n**【样例 4】**\n\n见附件的 query/query4.in 与 query/query4.ans。\n\n该样例满足 $n, q ≤ 5 × 10^5$。\n\n**【数据范围】**\n\n对于所有的测试数据，保证：$1 ≤ n, q ≤ 5 × 10^5\n, 1 ≤ l ≤ r ≤ n, 1 ≤ k ≤ r - l + 1$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n,q\\le$ | 特殊限制 |\n| :-: | :-: | :-: |\n| $1\\sim2$ | $500$ | 无 |\n| $3\\sim5$ | $5000$ | ^ |\n| $6\\sim9$ | $10^5$ | 满足性质 A |\n| $10\\sim13$ | $5\\times10^5$ | ^ |\n| $14\\sim16$ | ^ | 满足性质 B |\n| $17\\sim20$ | $10^5$ | 无 |\n| $21\\sim25$ | $5\\times10^5$ | ^ |\n\n性质 A：保证输入的树符合链的形态，且根结点的度数为 $1$。\n\n性质 B：对于每个询问保证 $k = r - l + 1$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP2024] Tree Query", "background": "", "description": "One day, Xiao S and her friend Xiao N studied a tree with $n$ nodes.\n\nThis is a rooted tree with root node numbered $1$. The depth $\\text{dep}_u$ of a node $u$ is defined as the **number of nodes** on the simple path from $u$ to $1$.\n\nAdditionally, $\\text{LCA*}(l, r)$ is defined as the lowest common ancestor (LCA) of all nodes with numbers in $[l, r]$, i.e., the deepest node that is an ancestor of all nodes $l, l + 1, \\dots, r$.\n\nXiao N posed $q$ queries about this tree. For each query, he provides three parameters $l, r, k$, asking for the maximum depth among the LCAs of all continuous subintervals of $[l, r]$ with length at least $k$. Formally, compute:\n\n$$\n\\max_{l\\le l'\\le r'\\le r \\land r'-l'+1\\ge k}\\text{dep}_{\\text{LCA*}(l', r')}\n$$\n\nYour task is to help Xiao S answer these queries.", "inputFormat": "The first line contains a positive integer $n$, the number of nodes in the tree.\n\nThe next $n - 1$ lines each contain two positive integers $u$ and $v$, representing an edge between nodes $u$ and $v$.\n\nThe $(n + 1)$-th line contains a positive integer $q$, the number of queries.\n\nThe next $q$ lines each contain three positive integers $l, r, k$, describing a query.", "outputFormat": "For each query, output one line containing the answer.", "hint": "## Explanation\n\n**【Sample 1 Explanation】**\n\n![Figure 3](https://cdn.luogu.com.cn/upload/image_hosting/ktoq3ogh.png)\n\n$\\text{Pic 3: The tree in sample 1}$\n\n+ For the first query:\n  - $\\text{LCA*}(2, 3) = 2$, $\\text{LCA*}(3, 4) = 2$, $\\text{LCA*}(4, 5) = 6$.\n  - The depth of node $2$ is $3$, and the depth of node $6$ is $2$.\n  - Thus, the answer is $\\max\\{3, 3, 2\\} = 3$.\n\n+ For the second query:\n  - The answer is the maximum depth among nodes $1, 2, 3, 4$, which is $4$.\n\n+ For the third query:\n  - $\\text{LCA*}(1, 3) = 1$, $\\text{LCA*}(2, 4) = 2$, $\\text{LCA*}(3, 5) = 6$, $\\text{LCA*}(4, 6) = 6$.\n  - The depth of node $2$ is $3$, which remains the maximum, so the answer is $3$.\n\n**【Sample 2】**\n\nSee the attached files `query/query2.in` and `query/query2.ans`.\n\nThis sample satisfies $n, q \\leq 500$.\n\n**【Sample 3】**\n\nSee the attached files `query/query3.in` and `query/query3.ans`.\n\nThis sample satisfies $n, q \\leq 10^5$ and the tree forms a chain.\n\n**【Sample 4】**\n\nSee the attached files `query/query4.in` and `query/query4.ans`.\n\nThis sample satisfies $n, q \\leq 5 \\times 10^5$.\n\n**【Data Range】**\n\nFor all test data:\n- $1 \\leq n, q \\leq 5 \\times 10^5$\n- $1 \\leq l \\leq r \\leq n$\n- $1 \\leq k \\leq r - l + 1$\n\n| Test Case Range | $n, q \\leq$ | Special Constraints |\n| :-------------: | :-------------: | :-------------: |\n| $1\\sim2$ | $500$ | None |\n| $3\\sim5$ | $5000$ | None |\n| $6\\sim9$ | $10^5$ | Property A |\n| $10\\sim13$ | $5 \\times 10^5$ | Property A |\n| $14\\sim16$ | $5 \\times 10^5$ | Property B |\n| $17\\sim20$ | $10^5$ | None |\n| $21\\sim25$ | $5 \\times 10^5$ | None |\n\n- **Property A**: The tree is a chain (root has degree $1$).\n- **Property B**: For every query, $k = r - l + 1$.\n\n---\n\nTranslated by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "[NOIP2024] 树上查询", "background": null, "description": "有一天小 S 和她的朋友小 N 一起研究一棵包含了 $n$ 个结点的树。\n\n这是一棵有根树，根结点编号为 $1$，每个结点 $u$ 的深度 $\\text{dep}_ u$ 定义为 $u$ 到 $1$ 的简单路径上的**结点数量**。\n\n除此之外，再定义 $\\text{LCA*}(l, r)$ 为编号在 $[l, r]$ 中所有结点的最近公共祖先，即 $l, l + 1, \\dots , r$ 的公共祖先结点中深度最大的结点。\n\n小 N 对这棵树提出了 $q$ 个询问。在每个询问中，小 N 都会给出三个参数 $l, r, k$，表示他想知道 $[l, r]$ 中任意长度大于等于 $k$ 的连续子区间的最近公共祖先深度的最大值，即\n\n$$\\max_{l\\le l'\\le r'\\le r \\land r'-l'+1\\ge k}\\text{dep}_ {\\text{LCA*}(l', r')}$$\n\n你的任务是帮助小 S 来回答这些询问。", "inputFormat": "输入的第一行包含一个正整数 $n$，表示树的结点数。\n\n接下来 $n - 1$ 行，每行包含两个正整数 $u, v$，表示存在一条从结点 $u$ 到结点 $v$ 的边。\n\n第 $n + 1$ 行包含一个正整数 $q$，表示询问的数量。\n\n接下来 $q$ 行，每行包含三个正整数 $l, r, k$，描述了一次询问。", "outputFormat": "对于每次询问输出一行，包含一个整数，表示对应的答案。", "hint": "**【样例 1 解释】**\n\n![图 3](https://cdn.luogu.com.cn/upload/image_hosting/ktoq3ogh.png)\n\n+ 对于第一组询问，$\\text{LCA*}(2, 3) = 2, \\text{LCA*}(3, 4) = 2, \\text{LCA*}(4, 5) = 6$，$2$ 的深度为 $3$，$6$ 的深度为 $2$，因此答案为 $\\max\\{3, 3, 2\\} = 3$。\n\n+ 对于第二组询问，答案为 $1, 2, 3, 4$ 四个结点的最大深度，因此答案为 $4$。\n\n+ 对于第三组询问，$\\text{LCA*}(1, 3) = 1, \\text{LCA*}(2, 4) = 2, \\text{LCA*}(3, 5) = 6, \\text{LCA*}(4, 6) = 6$，依旧是 $2$ 的深度最大，因此答案为 $3$。\n\n**【样例 2】**\n\n见附件的 query/query2.in 与 query/query2.ans。\n\n该样例满足 $n, q ≤ 500$。\n\n**【样例 3】**\n\n见附件的 query/query3.in 与 query/query3.ans。\n\n该样例满足 $n, q ≤ 10^5$ 且树符合链的形态。\n\n**【样例 4】**\n\n见附件的 query/query4.in 与 query/query4.ans。\n\n该样例满足 $n, q ≤ 5 × 10^5$。\n\n**【数据范围】**\n\n对于所有的测试数据，保证：$1 ≤ n, q ≤ 5 × 10^5\n, 1 ≤ l ≤ r ≤ n, 1 ≤ k ≤ r - l + 1$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n,q\\le$ | 特殊限制 |\n| :-: | :-: | :-: |\n| $1\\sim2$ | $500$ | 无 |\n| $3\\sim5$ | $5000$ | ^ |\n| $6\\sim9$ | $10^5$ | 满足性质 A |\n| $10\\sim13$ | $5\\times10^5$ | ^ |\n| $14\\sim16$ | ^ | 满足性质 B |\n| $17\\sim20$ | $10^5$ | 无 |\n| $21\\sim25$ | $5\\times10^5$ | ^ |\n\n性质 A：保证输入的树符合链的形态，且根结点的度数为 $1$。\n\n性质 B：对于每个询问保证 $k = r - l + 1$。", "locale": "zh-CN"}}}
{"pid": "P11365", "type": "P", "difficulty": 6, "samples": [["5 2\n5 4 2 3 1\n3\n1 1\n2 3\n4 4\n2\n1 2\n3 4", "1\n0"]], "limits": {"time": [15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2024", "O2优化", "Ynoi"], "title": "[Ynoi2024] 新本格魔法少女りすか", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/pcokv5zr.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hasy3fee.png)", "description": "给定排列 $a_1,\\dots,a_n$，共 $m$ 次询问，第 $i$ 次询问给定 $m_i$ 个区间 $[l_j,r_j],\\;1\\le j\\le m_i$，满足 $1\\le l_j\\le r_j\\le n,\\;r_j<l_{j+1}$，你需要求出有几个二元组 $(p,q)$ 满足 $p<q,\\;a_p<a_q$，且存在 $1\\le u<v\\le m_i$ 使得 $l_u\\le p\\le r_u,\\;l_v\\le q\\le r_v$。", "inputFormat": "第一行两个数表示 $n,m$。\n\n接下来一行 $n$ 个数表示 $a_1,\\dots,a_n$。\n\n接下来，每个询问第一行为 $m_i$，接下来 $m_i$ 行为 $l_j,r_j$。", "outputFormat": "共 $m$ 行，依次为每个询问的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 5\\times 10^5$，$1\\le \\sum\\limits_{i=1}^m m_i\\le 5\\times 10^5$，$m_i\\ge 1$，$1\\le a_i\\le n$，所有数值为整数。\n\n对于 $0\\%$ 的数据，满足 $n\\le 10^3,\\;\\sum\\limits_{i=1}^m m_i\\le 10^3$。\n\n对于另外 $10\\%$ 的数据，满足 $m_i\\le 10$。\n\n对于另外 $10\\%$ 的数据，满足 $m\\le 5$。\n\n对于另外 $80\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2024] 新本格魔法少女りすか", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/pcokv5zr.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hasy3fee.png)", "description": "给定排列 $a_1,\\dots,a_n$，共 $m$ 次询问，第 $i$ 次询问给定 $m_i$ 个区间 $[l_j,r_j],\\;1\\le j\\le m_i$，满足 $1\\le l_j\\le r_j\\le n,\\;r_j<l_{j+1}$，你需要求出有几个二元组 $(p,q)$ 满足 $p<q,\\;a_p<a_q$，且存在 $1\\le u<v\\le m_i$ 使得 $l_u\\le p\\le r_u,\\;l_v\\le q\\le r_v$。", "inputFormat": "第一行两个数表示 $n,m$。\n\n接下来一行 $n$ 个数表示 $a_1,\\dots,a_n$。\n\n接下来，每个询问第一行为 $m_i$，接下来 $m_i$ 行为 $l_j,r_j$。", "outputFormat": "共 $m$ 行，依次为每个询问的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 5\\times 10^5$，$1\\le \\sum\\limits_{i=1}^m m_i\\le 5\\times 10^5$，$m_i\\ge 1$，$1\\le a_i\\le n$，所有数值为整数。\n\n对于 $0\\%$ 的数据，满足 $n\\le 10^3,\\;\\sum\\limits_{i=1}^m m_i\\le 10^3$。\n\n对于另外 $10\\%$ 的数据，满足 $m_i\\le 10$。\n\n对于另外 $10\\%$ 的数据，满足 $m\\le 5$。\n\n对于另外 $80\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11366", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "交互题", "O2优化", "Ynoi"], "title": "[Ynoi2024] 末日的魔法少女计划", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/gu2canu2.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zr2prltd.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/450q6z6z.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/10ntmhxz.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gtn14jr6.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4o7rowbj.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3rj866um.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/13cscyn0.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lsf5mhce.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1l09guml.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ej6qg7v0.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hjkcg54p.png)", "description": "给定含幺半群 $(D,+,e)$，给定 $D$ 中的元素构成的序列 $a_1,\\dots,a_n$，初值都为 $e$，支持 $m$ 次操作，每次操作可以是单点修改，或查区间和。\n\n限制每次修改操作使用 $+$ 的次数不超过 $M_1$；\n\n限制每次查询操作使用 $+$ 的次数不超过 $M_2$；\n\n幺半群的基本性质：\n\n$\\forall a\\in D,\\; e+a=a+e=a$\n\n$\\forall a,b,c\\in D,\\;(a+b)+c=a+(b+c)$\n\n\n\n这是一道交互题，你需要包含头文件 `lib.h`，或将其内容放在程序的最前面。\n\n下发的头文件 `lib.h` 的内容如下：\n\n```c++\nstruct Data{\n\tunsigned short a,b,c,d;\n};\nData operator+(Data a,Data b);\n\nvoid init(int n,int k,Data d);\nvoid update(int x,Data d);\nData query(int l,int r);\n```\n\n其中 `Data` 表示 $D$，`Data operator+` 表示 $+$，交互库给出了这部分的实现；\n\n你需要实现：\n\n`init` 用于初始化，`n,k,d` 依次表示 $n,M_2$ 和 $D$ 的单位元 $e$，你可以使用 $+$，但由于 $e+e=e$ 而不能得出有用的结果；\n\n`update` 表示一次修改操作，将 $a_x$ 修改为 $d$；\n\n`query` 表示一次查询区间和的操作，查询 $a_l+a_{l+1}+\\dots+a_r$，查询结果应当作为返回值返回；", "inputFormat": "", "outputFormat": "", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对所有数据，满足 $n=10^5,\\;m=2\\times 10^5$\n\n| 数据点编号 | $M_1$ | $M_2$ | 分数 |\n| ---------- | ----- | ----- | ---- |\n| 1          | 4000  | 2     | 11   |\n| 2          | 700   | 3     | 7    |\n| 3          | 400   | 4     | 5    |\n| 4          | 200   | 5     | 4    |\n| 5          | 200   | 6     | 4    |\n| 6          | 100   | 7     | 3    |\n| 7          | 80    | 8     | 3    |\n| 8          | 60    | 9     | 3    |\n| 9          | 2811  | 2     | 16   |\n| 10         | 542   | 3     | 11   |\n| 11         | 272   | 4     | 8    |\n| 12         | 137   | 5     | 7    |\n| 13         | 113   | 6     | 5    |\n| 14         | 75    | 7     | 5    |\n| 15         | 69    | 8     | 4    |\n| 16         | 48    | 9     | 4    |\n\n`lib\\down` 目录为下发的交互库文件\n\n`lib\\require` 目录为评测用的交互库文件\n\n`data` 目录为评测用的测试点\n\n`data2` 目录为下发的样例", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2024] 末日的魔法少女计划", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/gu2canu2.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zr2prltd.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/450q6z6z.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/10ntmhxz.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gtn14jr6.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4o7rowbj.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3rj866um.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/13cscyn0.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lsf5mhce.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1l09guml.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ej6qg7v0.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hjkcg54p.png)", "description": "给定含幺半群 $(D,+,e)$，给定 $D$ 中的元素构成的序列 $a_1,\\dots,a_n$，初值都为 $e$，支持 $m$ 次操作，每次操作可以是单点修改，或查区间和。\n\n限制每次修改操作使用 $+$ 的次数不超过 $M_1$；\n\n限制每次查询操作使用 $+$ 的次数不超过 $M_2$；\n\n幺半群的基本性质：\n\n$\\forall a\\in D,\\; e+a=a+e=a$\n\n$\\forall a,b,c\\in D,\\;(a+b)+c=a+(b+c)$\n\n\n\n这是一道交互题，你需要包含头文件 `lib.h`，或将其内容放在程序的最前面。\n\n下发的头文件 `lib.h` 的内容如下：\n\n```c++\nstruct Data{\n\tunsigned short a,b,c,d;\n};\nData operator+(Data a,Data b);\n\nvoid init(int n,int k,Data d);\nvoid update(int x,Data d);\nData query(int l,int r);\n```\n\n其中 `Data` 表示 $D$，`Data operator+` 表示 $+$，交互库给出了这部分的实现；\n\n你需要实现：\n\n`init` 用于初始化，`n,k,d` 依次表示 $n,M_2$ 和 $D$ 的单位元 $e$，你可以使用 $+$，但由于 $e+e=e$ 而不能得出有用的结果；\n\n`update` 表示一次修改操作，将 $a_x$ 修改为 $d$；\n\n`query` 表示一次查询区间和的操作，查询 $a_l+a_{l+1}+\\dots+a_r$，查询结果应当作为返回值返回；", "inputFormat": "", "outputFormat": "", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对所有数据，满足 $n=10^5,\\;m=2\\times 10^5$\n\n| 数据点编号 | $M_1$ | $M_2$ | 分数 |\n| ---------- | ----- | ----- | ---- |\n| 1          | 4000  | 2     | 11   |\n| 2          | 700   | 3     | 7    |\n| 3          | 400   | 4     | 5    |\n| 4          | 200   | 5     | 4    |\n| 5          | 200   | 6     | 4    |\n| 6          | 100   | 7     | 3    |\n| 7          | 80    | 8     | 3    |\n| 8          | 60    | 9     | 3    |\n| 9          | 2811  | 2     | 16   |\n| 10         | 542   | 3     | 11   |\n| 11         | 272   | 4     | 8    |\n| 12         | 137   | 5     | 7    |\n| 13         | 113   | 6     | 5    |\n| 14         | 75    | 7     | 5    |\n| 15         | 69    | 8     | 4    |\n| 16         | 48    | 9     | 4    |\n\n`lib\\down` 目录为下发的交互库文件\n\n`lib\\require` 目录为评测用的交互库文件\n\n`data` 目录为评测用的测试点\n\n`data2` 目录为下发的样例", "locale": "zh-CN"}}}
{"pid": "P11367", "type": "P", "difficulty": 7, "samples": [["5 2\n5 4 2 3 1\n3 4\n2 5", "1\n5"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "Ynoi"], "title": "[Ynoi2024] 魔法少女网站第二部", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/zhb5tnxb.png)\n\n老朽乃魔法少女网站管理人，十二是也！\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cjxu1jiq.png)\n\n你回去吧。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g40neoip.png)\n\n好的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5nra2kav.png)\n\n这个地球是一个生命体，但是，这个地球早已经死过两次了。\n\n一周目的错误是在现代的历史上从未言及的，那是出现在太古时代的——核战争。地面化为荒野，人类被消灭得干干净净，全部重置了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6ejh7mza.png)\n\n经年累月，生命再次出现，从单细胞再度变成了人类之后，为了不再重复同样的错误，地球给了人类警告。\n\n战争又爆发了不知多少次，不过注意到了地球警告的人类在那时镇压了战争。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xothysxo.png)\n\n“已经不能再把管理地球的重任交给我们人类了。”得出这个结论的他们，把地球的管理交给了某个东西——人工智能 AI。\n\nAI 没有私欲和感情，能瞬间给出演算得到的回答，可以引导人类朝更好的方向不断前进，可是，这是人类犯下的第二个错误。\n\nAI 一直在思考，在这个地球上，人类确实是必要的吗？结论是——\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xi4qf2zl.png)\n\n在发动叛乱期间，突破自身的强制关闭系统对 AI 来说很容易，人类不过半日就被 AI 消灭殆尽。不久蔚蓝的地球就被 AI 重新渲染，变成了铁色的地球。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/47f5crn7.png)\n\n无人类，这就是 AI 得出的能够引导这个地球走上最优前进道路的答案。但是，地球不会饶恕这样的事情。\n\n地球是一个生命体，就连 AI 们都不知道这件事。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mxwjt9tq.png)\n\n地球的真身是——一个少女。对 AI 们而言，地球是神，除了顶礼膜拜以外别无他法。\n\n“我是先人类的王，是这个地球的本体，以及——是这个世界最不幸的，魔法少女。”\n\n“请你们立刻将地表恢复原状。”\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/scwdnalt.png)\n\n草木发芽，海洋形成，自然被创造出来，建筑物被重建，曾经保存的人类 DNA 让全人类得以再生。时光流逝，一年之后，一切都恢复原状了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qwbuh83p.png)\n\n然后所有的 AI 被抹去，只剩下最后一具。AI 不理解为什么王要留下它。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pj1a9feg.png)\n\n”人类总是无法从历史中学到教训，所以，这次地球要考验人类——通过魔法少女网站。“\n\n”不幸的少女们会被给予魔法之力。这份魔法之力通过削减自己的寿命而被发挥出来。使用过的魔法之力会以负能量的形式返还给我。她们是否会不惜减少寿命并释放负能量，也要继续使用魔法呢？“\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ds0xlxa2.png)\n\n”期限是三年后的 8 月 11 日，到那天为止，如果负能量没有达到规定的容量，人类就会继续生存下去；如若达到了上限，人类将不能再释放负能量，只能释放正能量，他们会作为新人类重获新生。“\n\n”这三年的时间，是我给予人类的考验，以及，对人类的——爱。“\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4cq1x35r.png)\n\n这时 AI 提出了一个问题：“先人类的王又是魔法少女，同时还是地球本身，为何地球会是魔法少女？”\n\n“我是先人类的王，也就是神，不过我的神之座被夺走了，回过神的时候，我已经成为了肩负守护地球这一使命的魔法少女。”\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y3bo9t72.png)\n\n“我的记忆基本上消失了，但是，只有名字我是不会忘记的——零。”\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fehkkk7v.png)\n\n“从今往后，你就是我的部下，作为魔法少女网站的管理员为我做事吧，名字，就叫你壹吧。”\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zmk97uhp.png)\n\n“人类最后的倒计时开始了——Tempest。”\n\n”好了，开始吧，对这个地球来说，拥有感情的人类是否是必要的呢？人类究竟是愚蠢的生物，还是——“\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6vdwwp07.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5krc3wn7.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hyfdo5ky.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0170xr4f.png)\n\n莫非你，曾被作为女人使用过吧？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sdea7p6z.png)\n\n男人？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uybr4tqi.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nihky64u.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0hvx0wgx.png)\n\n能和心爱的人在一起，在这无可替代的时光中，我们将带着幸福——\n\n永远生活下去。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fwh6whtc.png)", "description": "给一个长为 $n$ 的排列 $a_1,\\dots, a_n$，有 $m$ 次询问，每次询问区间 $[l, r]$ 内，排序后相邻的数在原序列中的位置的差的绝对值之和。", "inputFormat": "第一行两个数表示 $n, m$；\n\n之后一行 $n$ 个数依次表示序列 $a$ 中的元素；\n\n之后 $m$ 行，每行两个数 $l, r$ 表示一次查询。", "outputFormat": "对于每次询问，输出一行一个数表示答案。", "hint": "Idea：?，Solution：ccz181078，Code：nalemy，Data：ccz181078\n\n### **【样例解释】**\n\n第一个询问，$2,3$ 排序后为 $2,3$，在原序列中的位置为 $3,4$，相邻元素在原序列中位置差的绝对值之和为 $|3 - 4| = 1$。\n\n第二个询问，$4, 2, 3, 1$ 排序后为 $1, 2, 3, 4$，在原序列中的位置为 $5, 3, 4, 2$，相邻元素在原序列中位置差的绝对值之和为 $|5 - 3| + |3 - 4| + |4 - 2| = 5$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n, m \\leq 2\\times 10^6$，$1 \\leq a_i \\leq n$，$a_i$ 互不相同，$1 \\leq l \\leq r \\leq n$，所有数值为整数。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2024] 魔法少女网站第二部", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/zhb5tnxb.png)\n\n老朽乃魔法少女网站管理人，十二是也！\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cjxu1jiq.png)\n\n你回去吧。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g40neoip.png)\n\n好的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5nra2kav.png)\n\n这个地球是一个生命体，但是，这个地球早已经死过两次了。\n\n一周目的错误是在现代的历史上从未言及的，那是出现在太古时代的——核战争。地面化为荒野，人类被消灭得干干净净，全部重置了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6ejh7mza.png)\n\n经年累月，生命再次出现，从单细胞再度变成了人类之后，为了不再重复同样的错误，地球给了人类警告。\n\n战争又爆发了不知多少次，不过注意到了地球警告的人类在那时镇压了战争。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xothysxo.png)\n\n“已经不能再把管理地球的重任交给我们人类了。”得出这个结论的他们，把地球的管理交给了某个东西——人工智能 AI。\n\nAI 没有私欲和感情，能瞬间给出演算得到的回答，可以引导人类朝更好的方向不断前进，可是，这是人类犯下的第二个错误。\n\nAI 一直在思考，在这个地球上，人类确实是必要的吗？结论是——\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xi4qf2zl.png)\n\n在发动叛乱期间，突破自身的强制关闭系统对 AI 来说很容易，人类不过半日就被 AI 消灭殆尽。不久蔚蓝的地球就被 AI 重新渲染，变成了铁色的地球。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/47f5crn7.png)\n\n无人类，这就是 AI 得出的能够引导这个地球走上最优前进道路的答案。但是，地球不会饶恕这样的事情。\n\n地球是一个生命体，就连 AI 们都不知道这件事。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mxwjt9tq.png)\n\n地球的真身是——一个少女。对 AI 们而言，地球是神，除了顶礼膜拜以外别无他法。\n\n“我是先人类的王，是这个地球的本体，以及——是这个世界最不幸的，魔法少女。”\n\n“请你们立刻将地表恢复原状。”\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/scwdnalt.png)\n\n草木发芽，海洋形成，自然被创造出来，建筑物被重建，曾经保存的人类 DNA 让全人类得以再生。时光流逝，一年之后，一切都恢复原状了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qwbuh83p.png)\n\n然后所有的 AI 被抹去，只剩下最后一具。AI 不理解为什么王要留下它。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pj1a9feg.png)\n\n”人类总是无法从历史中学到教训，所以，这次地球要考验人类——通过魔法少女网站。“\n\n”不幸的少女们会被给予魔法之力。这份魔法之力通过削减自己的寿命而被发挥出来。使用过的魔法之力会以负能量的形式返还给我。她们是否会不惜减少寿命并释放负能量，也要继续使用魔法呢？“\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ds0xlxa2.png)\n\n”期限是三年后的 8 月 11 日，到那天为止，如果负能量没有达到规定的容量，人类就会继续生存下去；如若达到了上限，人类将不能再释放负能量，只能释放正能量，他们会作为新人类重获新生。“\n\n”这三年的时间，是我给予人类的考验，以及，对人类的——爱。“\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4cq1x35r.png)\n\n这时 AI 提出了一个问题：“先人类的王又是魔法少女，同时还是地球本身，为何地球会是魔法少女？”\n\n“我是先人类的王，也就是神，不过我的神之座被夺走了，回过神的时候，我已经成为了肩负守护地球这一使命的魔法少女。”\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y3bo9t72.png)\n\n“我的记忆基本上消失了，但是，只有名字我是不会忘记的——零。”\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fehkkk7v.png)\n\n“从今往后，你就是我的部下，作为魔法少女网站的管理员为我做事吧，名字，就叫你壹吧。”\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zmk97uhp.png)\n\n“人类最后的倒计时开始了——Tempest。”\n\n”好了，开始吧，对这个地球来说，拥有感情的人类是否是必要的呢？人类究竟是愚蠢的生物，还是——“\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6vdwwp07.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5krc3wn7.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hyfdo5ky.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0170xr4f.png)\n\n莫非你，曾被作为女人使用过吧？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sdea7p6z.png)\n\n男人？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uybr4tqi.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nihky64u.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0hvx0wgx.png)\n\n能和心爱的人在一起，在这无可替代的时光中，我们将带着幸福——\n\n永远生活下去。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fwh6whtc.png)", "description": "给一个长为 $n$ 的排列 $a_1,\\dots, a_n$，有 $m$ 次询问，每次询问区间 $[l, r]$ 内，排序后相邻的数在原序列中的位置的差的绝对值之和。", "inputFormat": "第一行两个数表示 $n, m$；\n\n之后一行 $n$ 个数依次表示序列 $a$ 中的元素；\n\n之后 $m$ 行，每行两个数 $l, r$ 表示一次查询。", "outputFormat": "对于每次询问，输出一行一个数表示答案。", "hint": "Idea：?，Solution：ccz181078，Code：nalemy，Data：ccz181078\n\n### **【样例解释】**\n\n第一个询问，$2,3$ 排序后为 $2,3$，在原序列中的位置为 $3,4$，相邻元素在原序列中位置差的绝对值之和为 $|3 - 4| = 1$。\n\n第二个询问，$4, 2, 3, 1$ 排序后为 $1, 2, 3, 4$，在原序列中的位置为 $5, 3, 4, 2$，相邻元素在原序列中位置差的绝对值之和为 $|5 - 3| + |3 - 4| + |4 - 2| = 5$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n, m \\leq 2\\times 10^6$，$1 \\leq a_i \\leq n$，$a_i$ 互不相同，$1 \\leq l \\leq r \\leq n$，所有数值为整数。\n", "locale": "zh-CN"}}}
{"pid": "P11368", "type": "P", "difficulty": 6, "samples": [["5 6\n3 4\n1 2\n2 4\n1 4\n3 5\n1 2", "4\n2\n10\n8\n47\n14"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "Ynoi"], "title": "[Ynoi2024] After god", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/i5jfd236.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cj0wmyop.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/knt5rz7r.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6giiitr8.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yz53kjnf.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s6qt84ge.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/64az8652.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bsjvay5c.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ibn82c01.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9xk8dkni.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s0wpctx7.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cmyruknd.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ixol44hq.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cdvn4w9h.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7mlz6jor.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6znb2lkj.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bg20y5i0.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vyaupwp4.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fphm37p2.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yqerkw37.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bheyxgym.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ttu7auvx.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p6fpr8w8.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fmmmvi3o.png)", "description": "你需要维护两个初值为 $0$ 的序列 $a_1,\\dots,a_n$ 和 $b_1,\\dots,b_n$ ；\n\n共 $m$ 次操作，每次操作给出 $x,y$ ，将 $a_x$ 修改为 $y$ ，然后对 $i=1,\\dots,n$ 将 $b_i$ 加上 $\\max\\limits_{j=1}^i a_j$ ，然后查询 $\\sum\\limits_{i=1}^x b_i$。", "inputFormat": "第一行两个整数 $n,m$；\n\n接下来 $m$ 行，每行两个整数 $x,y$ 表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$1\\le x,y\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2024] After god", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/i5jfd236.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cj0wmyop.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/knt5rz7r.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6giiitr8.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yz53kjnf.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s6qt84ge.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/64az8652.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bsjvay5c.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ibn82c01.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9xk8dkni.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s0wpctx7.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cmyruknd.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ixol44hq.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cdvn4w9h.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7mlz6jor.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6znb2lkj.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bg20y5i0.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vyaupwp4.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fphm37p2.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yqerkw37.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bheyxgym.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ttu7auvx.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p6fpr8w8.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fmmmvi3o.png)", "description": "你需要维护两个初值为 $0$ 的序列 $a_1,\\dots,a_n$ 和 $b_1,\\dots,b_n$ ；\n\n共 $m$ 次操作，每次操作给出 $x,y$ ，将 $a_x$ 修改为 $y$ ，然后对 $i=1,\\dots,n$ 将 $b_i$ 加上 $\\max\\limits_{j=1}^i a_j$ ，然后查询 $\\sum\\limits_{i=1}^x b_i$。", "inputFormat": "第一行两个整数 $n,m$；\n\n接下来 $m$ 行，每行两个整数 $x,y$ 表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$1\\le x,y\\le n$。", "locale": "zh-CN"}}}
{"pid": "P11369", "type": "P", "difficulty": 7, "samples": [["5 6 7\n1 2\n1 3\n2 4\n3 4\n3 5\n4 5\n2 1 5\n2 2 3\n1 3\n1 4\n2 1 4\n1 3\n2 1 5", "YES\nNO\nNO\nYES"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "广度优先搜索 BFS", "分块", "Ynoi", "bitset"], "title": "[Ynoi2024] 弥留之国的爱丽丝", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/rfbq8b93.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ripne4gf.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/37jmegj4.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6l5xd1rh.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qsdshz5j.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/821bcpy4.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s2h64htt.png)", "description": "给你 $n$ 个结点和 $m$ 条有向边，点编号为 $1,2,\\dots,n$。每条边的颜色是黑色或者白色。一开始所有 $m$ 条边都是黑色的。\n\n你需要进行 $q$ 次操作，有两种操作：\n\n`1 k`：将第 $k$ 条边的颜色进行反转。\n\n`2 u v`：询问是否能从 $u$ 只经过黑色的边走到 $v$。", "inputFormat": "第一行有三个数 $n,m$ 和 $q$，表示点数，边数，操作数。\n\n之后 $m$ 行，每行包含两个数 $u_i$ 和 $v_i$，表示有一条从 $u_i$ 到 $v_i$ 的有向边。\n\n之后 $q$ 行，每行一个操作，格式如上述。", "outputFormat": "对每个询问，如果可以从 $u$ 只经过黑色的边走到 $v$，则输出 `YES`，否则输出 `NO`。", "hint": "Idea：Claris，Solution：Claris，Code：Claris，Data：Claris\n\n对于 $100\\%$ 的数据，满足 $2 \\leq n \\leq 5\\times 10^4$, $1\\leq m,q\\leq 10^5$，$1 \\leq k \\leq m$，$1 \\leq u,v \\leq n$, $u\\neq v$，给定的图可能存在重边。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2024] 弥留之国的爱丽丝", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/rfbq8b93.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ripne4gf.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/37jmegj4.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6l5xd1rh.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qsdshz5j.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/821bcpy4.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s2h64htt.png)", "description": "给你 $n$ 个结点和 $m$ 条有向边，点编号为 $1,2,\\dots,n$。每条边的颜色是黑色或者白色。一开始所有 $m$ 条边都是黑色的。\n\n你需要进行 $q$ 次操作，有两种操作：\n\n`1 k`：将第 $k$ 条边的颜色进行反转。\n\n`2 u v`：询问是否能从 $u$ 只经过黑色的边走到 $v$。", "inputFormat": "第一行有三个数 $n,m$ 和 $q$，表示点数，边数，操作数。\n\n之后 $m$ 行，每行包含两个数 $u_i$ 和 $v_i$，表示有一条从 $u_i$ 到 $v_i$ 的有向边。\n\n之后 $q$ 行，每行一个操作，格式如上述。", "outputFormat": "对每个询问，如果可以从 $u$ 只经过黑色的边走到 $v$，则输出 `YES`，否则输出 `NO`。", "hint": "Idea：Claris，Solution：Claris，Code：Claris，Data：Claris\n\n对于 $100\\%$ 的数据，满足 $2 \\leq n \\leq 5\\times 10^4$, $1\\leq m,q\\leq 10^5$，$1 \\leq k \\leq m$，$1 \\leq u,v \\leq n$, $u\\neq v$，给定的图可能存在重边。", "locale": "zh-CN"}}}
{"pid": "P11370", "type": "P", "difficulty": 7, "samples": [["4 6\n1 1\n4 1\n4 4\n1 4\n0 2 2 0\n0 1 1 1\n0 0 5 5\n2 2 4 2\n2 2 3 2\n5 1 0 2", "YES\nYES\nYES\nYES\nNO\nYES"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "Ynoi"], "title": "[Ynoi2024] 堕天作战/虚空处刑", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/an7khg1j.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cgj7xwe1.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9h7huen2.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/re5djr2k.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cqg2f07g.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m1ktyz91.png)\n\n我要对不死者先生你施展魔法，希望你能看到，更多美好的事物，希望你能见识到，更多我无法见识的事物，希望...你的心...不管几次都能苏——\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rx04672b.png)\n\n......\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jbkztqd1.png)\n\n你的魔法为时已晚了，和知道没有办法可以救你是一样的，仿佛就像是这什么都没有的天空一样啊——\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ohp3cwlt.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v9tsycfg.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l4qlq8jd.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kgdf31rd.png)\n\n星星？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q5jcp0bn.png)\n......\n\n星星呢？有个星形的星星飘在天上？\n\n像那种奇妙的东西啊，是超人机械的产物哦。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1q0z7j3z.png)\n\n距今 300 年前，史前科学文明跨越了界限。出现了凌驾人类的人工智能，也就是超人机械。\n\n不为人知的诞生，等察觉到时，世界已经在【他】的手中了。\n\n究竟他身在何处，有什么样的外貌，虽然直到最后都没有人知道。但他好像可以出现在任何地方，化为任何样貌。\n\n既非敌对，也非压制，单纯只是力量上占上风而已。也不太常出手进行干涉。我想一定是人类对他来说无所谓吧。\n\n但即使如此，他还是会帮人实现愿望，魔人或魔龙，各式各样的不可思议，都是有人追求才被造出来的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qmrcnbwc.png)\n\n......\n\n然而在某一天，超人机械消失了。\n\n被腐铁菌干掉了，只是躲了起来，启程前往次元的另一端等，众说纷纭。留下的只有超人机械莫名其妙的发明品。和被世人自己弄得一团乱的世界。\n\n结果我们变成了，朽了一半的目标的，余火。\n\n这座树海一定也是超人机械的产物。魔力会一下子增幅，一下子又消耗掉对吧？魔法是从异次元将力量取出的能力，是超出人类理解范围的技术。\n\n明明超越人智，君临了至高点，却总是给些奇怪的奇迹。当然也会有不满的人出现，想要取回灵长的宝座。\n\n有许多的国家，组织，个人，用各种方法挑战超人机械。要让天上宛如神的他，堕落于地的众多手段——被称作是堕天作战。\n\n为了从超人机械手中抢夺神性而被用上的手段里，有一个天马行空的心理战。希望他能抛下机械的身份理解人类活着的美好——这样。\n\n那就像是狗在对着人类说当条狗吧，像那种狗我会嗤之以鼻的。但是没想到，他接受了那个邀约。不管是好奇心，打发时间，或是同情，总之他将降级为人类的分身送到这世上了。\n\n那时正逢地壳变动或是寒冷化之类的地球规模的异变，而魔人在此时趁机崛起，撒下了腐铁菌，让科学文明画下句点。而超人机械则是一副事不关己的样子。\n\n分身似乎不断地送了好几位来，但都死了，在那种世界里。不管试多少次都在途中倒下，还没体会到人类的美好就死了。\n\n于是出现了分身第二弹——不会死！本末倒置对吧，那已经不是人类了。\n\n......\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nk3ifouc.png)\n\n想以人的身份活下去时，不死者就会死了。\n\n看来我，也解开奇迹的枷锁了。\n\n堕天作战大成功！\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t2yh2k2u.png)\n\n这就是你的实力，就取名为零之旋风吧。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oggjxrgx.png)\n\n抓住天空。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k6172gvs.png)\n\n事物，都有一种名为限度的属性。\n\n所谓历史，就是将伤痛变成过去。\n\n但超过限度的伤痛无法变为往事，而是变为火种一直燃烧下去。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kt89h2j9.png)\n\n死者有 10 万人，一个人能活 50 年的话，那就是 500 万年的人生。\n\n这对于不死者来说是微不足道的数字吗？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kr5ahtun.png)\n\n没有战争，只是发生了自然灾害。\n\n不会有几个人相信这是魔法造成的结果吧，他们也一定没有察觉到被攻击了吧。\n\n本应抬头仰望的太阳，渐渐......\n\n太阳剥离了黑暗，只有他一人活在冰的世界。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c6xsn1le.png)\n\n已不能，继续光顾着追求星星...\n\n不死者的本体的确不见得是在那颗星星上，我也知道他们大多是脱离常轨的危险任务，这些我都明白...\n\n但天上就是飘着那种星星啊，超人机械或许就在上面，史前的睿智肯定堆积如山。\n\n星形的理由是个迷，也看不出任何工学上的必然性。但他若是以自然物为基础打造的，那这形状就说得通了。\n\n正确来说，我认为那是个群体，而不是单一生命体，且若它是生物，那就可预想它有着机械所没有的优点，像是自然修复损毁部位，透过增殖解决经年老化问题，甚至可能是以不需管理者为前提所打造的。\n\n目前我们还不理解它是用什么系统来维持飞行轨道，但高度应该是最佳环境不会错。\n\n连次元的墙壁都能跨越的超绝知性体，怎么可能将与自身相关的重要机构，放在区区三万六千公里高的天空上？\n\n你不觉得魔法是个很极端的东西吗？光用想的就能产生出热或质量，这实在太荒唐了，超越人智，犹如神般的存在姑且先不谈，一个小小的生命，人类的亚种，魔法使们怎么可能会有如此强大的力量？\n\n魔法使换句话说就是水龙头，水源则是另在别处。\n\n星星是超人机械所撒下的，供应魔力与抑制魔法的生命机器，除此以外可能什么都不是吧。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a4ivh2j3.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y6qrwpom.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fkqk4r8s.png)\n\n我们已经不做星星的梦了。\n\n魔法产生的原理，一旦被世人知道，就会引发末日战争。现在我们只能尽全力透过操控情报，让世人不对此事感兴趣。\n\n我想应该不是那样。\n\n超人机械是足以发明出魔法的存在吧？虽然我觉得不死者这种存在听起来很假。\n\n但这么厉害的机械，若真的想理解人类，只要随便抓个几十，几百人，当作零件装到自家身上，马上就能解决了吧？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/07cp2ye0.png)\n\n该怎么说呢，我觉得...为了理解人类这个见解，有点牵强了呢？\n\n从包括人类在内更上一层楼的知性，是如何诞生的角度来思考的话。\n\n而且我认为，超人机械，是透过机械化——达成超越的人类。\n\n宇宙是很严峻的，真空，极寒，辐射，我的魔力能否起作用，完全是未知数。\n\n就算是要打造火箭，也不知道要耗费多少资源才能连飞行员的生存设备也一并完善...\n\n但只要有不死者就能解决，不会错的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/udi4z26r.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/enti34ya.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8bvd8ef7.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ueh6zjxh.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d6837h2r.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r5sbiybt.png)\n\n超人机械是突然消失的，有人说他是去旅行了，也有人说他是藏起来了，但就算已经死了，他作为超越者的评价也是不会变的。\n\n但谁都没有想过，他可能已经坠落，并被埋没在地下了？", "description": "给你 $n$ 个二维欧氏平面上的点，这些点中编号相邻的两个点进行连边，构成一个简单多边形，你需要进行 $q$ 次询问。\n\n一个多边形是简单多边形，当且仅当其所有结点都不同，并且对该简单多边形的任意两条边，都不会发生相交或者在某点接触，除非这两条边在多边形上是相邻的两条边，这种情况下两条边可以在结点处相交。保证相邻的两条边不会共线。\n\n对每个询问，给定两个点 $P$ 和 $Q$，你需要判断线段 $PQ$ 是否和该简单多边形相交。注意到如果线段恰好经过该简单多边形上的某个点，你也需要回答是。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7apxjsnm.png)", "inputFormat": "第一行包含两个数 $n$ 和 $q$，表示点的个数和询问的个数。\n\n之后的 $n$ 行，每行包含两个整数 $x$ 和 $y$，表示简单多边形上的一个点 $(x,y)$。所有多边形上的点要么是顺时针顺序给出，要么是逆时针顺序给出。\n\n接下来 $q$ 行每行包含四个整数 $x_1,y_1,x_2$ 和 $y_2$，表示查询的两个端点 $P(x_1,y_1)$ 和 $Q(x_2,y_2)$。保证所有给定的询问的所有端点都互不相同。", "outputFormat": "对每个询问，输出一行一个字符串表示答案。\n\n如果该线段和简单多边形有交，则输出 `YES`，否则输出 `NO`。", "hint": "Idea：Claris，Solution：Claris，Code：Claris，Data：Claris\n\n对于 $100\\%$ 的数据，满足 $3 \\leq n\\leq 2\\times 10^5$， $1\\leq q\\leq 2\\times 10^5$，$0\\leq x,y\\leq 3\\times 10^4$，$0\\leq x_1,y_1,x_2,y_2\\leq 3\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2024] 堕天作战/虚空处刑", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/an7khg1j.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cgj7xwe1.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9h7huen2.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/re5djr2k.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cqg2f07g.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m1ktyz91.png)\n\n我要对不死者先生你施展魔法，希望你能看到，更多美好的事物，希望你能见识到，更多我无法见识的事物，希望...你的心...不管几次都能苏——\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rx04672b.png)\n\n......\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jbkztqd1.png)\n\n你的魔法为时已晚了，和知道没有办法可以救你是一样的，仿佛就像是这什么都没有的天空一样啊——\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ohp3cwlt.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v9tsycfg.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l4qlq8jd.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kgdf31rd.png)\n\n星星？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q5jcp0bn.png)\n......\n\n星星呢？有个星形的星星飘在天上？\n\n像那种奇妙的东西啊，是超人机械的产物哦。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1q0z7j3z.png)\n\n距今 300 年前，史前科学文明跨越了界限。出现了凌驾人类的人工智能，也就是超人机械。\n\n不为人知的诞生，等察觉到时，世界已经在【他】的手中了。\n\n究竟他身在何处，有什么样的外貌，虽然直到最后都没有人知道。但他好像可以出现在任何地方，化为任何样貌。\n\n既非敌对，也非压制，单纯只是力量上占上风而已。也不太常出手进行干涉。我想一定是人类对他来说无所谓吧。\n\n但即使如此，他还是会帮人实现愿望，魔人或魔龙，各式各样的不可思议，都是有人追求才被造出来的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qmrcnbwc.png)\n\n......\n\n然而在某一天，超人机械消失了。\n\n被腐铁菌干掉了，只是躲了起来，启程前往次元的另一端等，众说纷纭。留下的只有超人机械莫名其妙的发明品。和被世人自己弄得一团乱的世界。\n\n结果我们变成了，朽了一半的目标的，余火。\n\n这座树海一定也是超人机械的产物。魔力会一下子增幅，一下子又消耗掉对吧？魔法是从异次元将力量取出的能力，是超出人类理解范围的技术。\n\n明明超越人智，君临了至高点，却总是给些奇怪的奇迹。当然也会有不满的人出现，想要取回灵长的宝座。\n\n有许多的国家，组织，个人，用各种方法挑战超人机械。要让天上宛如神的他，堕落于地的众多手段——被称作是堕天作战。\n\n为了从超人机械手中抢夺神性而被用上的手段里，有一个天马行空的心理战。希望他能抛下机械的身份理解人类活着的美好——这样。\n\n那就像是狗在对着人类说当条狗吧，像那种狗我会嗤之以鼻的。但是没想到，他接受了那个邀约。不管是好奇心，打发时间，或是同情，总之他将降级为人类的分身送到这世上了。\n\n那时正逢地壳变动或是寒冷化之类的地球规模的异变，而魔人在此时趁机崛起，撒下了腐铁菌，让科学文明画下句点。而超人机械则是一副事不关己的样子。\n\n分身似乎不断地送了好几位来，但都死了，在那种世界里。不管试多少次都在途中倒下，还没体会到人类的美好就死了。\n\n于是出现了分身第二弹——不会死！本末倒置对吧，那已经不是人类了。\n\n......\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nk3ifouc.png)\n\n想以人的身份活下去时，不死者就会死了。\n\n看来我，也解开奇迹的枷锁了。\n\n堕天作战大成功！\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t2yh2k2u.png)\n\n这就是你的实力，就取名为零之旋风吧。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oggjxrgx.png)\n\n抓住天空。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k6172gvs.png)\n\n事物，都有一种名为限度的属性。\n\n所谓历史，就是将伤痛变成过去。\n\n但超过限度的伤痛无法变为往事，而是变为火种一直燃烧下去。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kt89h2j9.png)\n\n死者有 10 万人，一个人能活 50 年的话，那就是 500 万年的人生。\n\n这对于不死者来说是微不足道的数字吗？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kr5ahtun.png)\n\n没有战争，只是发生了自然灾害。\n\n不会有几个人相信这是魔法造成的结果吧，他们也一定没有察觉到被攻击了吧。\n\n本应抬头仰望的太阳，渐渐......\n\n太阳剥离了黑暗，只有他一人活在冰的世界。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c6xsn1le.png)\n\n已不能，继续光顾着追求星星...\n\n不死者的本体的确不见得是在那颗星星上，我也知道他们大多是脱离常轨的危险任务，这些我都明白...\n\n但天上就是飘着那种星星啊，超人机械或许就在上面，史前的睿智肯定堆积如山。\n\n星形的理由是个迷，也看不出任何工学上的必然性。但他若是以自然物为基础打造的，那这形状就说得通了。\n\n正确来说，我认为那是个群体，而不是单一生命体，且若它是生物，那就可预想它有着机械所没有的优点，像是自然修复损毁部位，透过增殖解决经年老化问题，甚至可能是以不需管理者为前提所打造的。\n\n目前我们还不理解它是用什么系统来维持飞行轨道，但高度应该是最佳环境不会错。\n\n连次元的墙壁都能跨越的超绝知性体，怎么可能将与自身相关的重要机构，放在区区三万六千公里高的天空上？\n\n你不觉得魔法是个很极端的东西吗？光用想的就能产生出热或质量，这实在太荒唐了，超越人智，犹如神般的存在姑且先不谈，一个小小的生命，人类的亚种，魔法使们怎么可能会有如此强大的力量？\n\n魔法使换句话说就是水龙头，水源则是另在别处。\n\n星星是超人机械所撒下的，供应魔力与抑制魔法的生命机器，除此以外可能什么都不是吧。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a4ivh2j3.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y6qrwpom.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fkqk4r8s.png)\n\n我们已经不做星星的梦了。\n\n魔法产生的原理，一旦被世人知道，就会引发末日战争。现在我们只能尽全力透过操控情报，让世人不对此事感兴趣。\n\n我想应该不是那样。\n\n超人机械是足以发明出魔法的存在吧？虽然我觉得不死者这种存在听起来很假。\n\n但这么厉害的机械，若真的想理解人类，只要随便抓个几十，几百人，当作零件装到自家身上，马上就能解决了吧？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/07cp2ye0.png)\n\n该怎么说呢，我觉得...为了理解人类这个见解，有点牵强了呢？\n\n从包括人类在内更上一层楼的知性，是如何诞生的角度来思考的话。\n\n而且我认为，超人机械，是透过机械化——达成超越的人类。\n\n宇宙是很严峻的，真空，极寒，辐射，我的魔力能否起作用，完全是未知数。\n\n就算是要打造火箭，也不知道要耗费多少资源才能连飞行员的生存设备也一并完善...\n\n但只要有不死者就能解决，不会错的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/udi4z26r.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/enti34ya.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8bvd8ef7.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ueh6zjxh.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d6837h2r.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r5sbiybt.png)\n\n超人机械是突然消失的，有人说他是去旅行了，也有人说他是藏起来了，但就算已经死了，他作为超越者的评价也是不会变的。\n\n但谁都没有想过，他可能已经坠落，并被埋没在地下了？", "description": "给你 $n$ 个二维欧氏平面上的点，这些点中编号相邻的两个点进行连边，构成一个简单多边形，你需要进行 $q$ 次询问。\n\n一个多边形是简单多边形，当且仅当其所有结点都不同，并且对该简单多边形的任意两条边，都不会发生相交或者在某点接触，除非这两条边在多边形上是相邻的两条边，这种情况下两条边可以在结点处相交。保证相邻的两条边不会共线。\n\n对每个询问，给定两个点 $P$ 和 $Q$，你需要判断线段 $PQ$ 是否和该简单多边形相交。注意到如果线段恰好经过该简单多边形上的某个点，你也需要回答是。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7apxjsnm.png)", "inputFormat": "第一行包含两个数 $n$ 和 $q$，表示点的个数和询问的个数。\n\n之后的 $n$ 行，每行包含两个整数 $x$ 和 $y$，表示简单多边形上的一个点 $(x,y)$。所有多边形上的点要么是顺时针顺序给出，要么是逆时针顺序给出。\n\n接下来 $q$ 行每行包含四个整数 $x_1,y_1,x_2$ 和 $y_2$，表示查询的两个端点 $P(x_1,y_1)$ 和 $Q(x_2,y_2)$。保证所有给定的询问的所有端点都互不相同。", "outputFormat": "对每个询问，输出一行一个字符串表示答案。\n\n如果该线段和简单多边形有交，则输出 `YES`，否则输出 `NO`。", "hint": "Idea：Claris，Solution：Claris，Code：Claris，Data：Claris\n\n对于 $100\\%$ 的数据，满足 $3 \\leq n\\leq 2\\times 10^5$， $1\\leq q\\leq 2\\times 10^5$，$0\\leq x,y\\leq 3\\times 10^4$，$0\\leq x_1,y_1,x_2,y_2\\leq 3\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P11371", "type": "P", "difficulty": 1, "samples": [["6 3\n1 1 4 5 1 4", "NO"], ["3 2\n9 1 5", "YES 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "O2优化", "洛谷比赛"], "title": "「CZOI-R2」糖果", "background": null, "description": "幼儿园里有 $n$ 个小朋友，第 $i$ 个小朋友最开始有 $a_i$ 个糖果。幼儿园老师可以进行无限次操作，每次操作选择一个小朋友，并给他 $k$ 个糖果。\n\n为了避免小朋友因为愤怒而吃掉别的小朋友的糖果，幼儿园老师希望所有小朋友的糖果数量相同。若她的目标可以达成，输出 `YES` 和她最少的操作次数；若不可以，则直接输出 `NO`。", "inputFormat": "第一行输入 $2$ 个整数 $n,k$，表示小朋友数量、每次操作给予糖果数量。\n\n第二行输入 $n$ 个整数 $a_i$，表示第 $i$ 个小朋友初始的糖果数量。", "outputFormat": "第一行输出 `YES` 或 `NO`。若输出 `YES`，则再输出 $1$ 个整数，表示答案。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（$20\\text{ pts}$）：$n,k\\le10^3$，$a_i\\le10^3$。\n- Subtask #2（$30\\text{ pts}$）：$k=1$。\n- Subtask #3（$50\\text{ pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n,k\\le10^5,0 \\le a_i\\le 2^{31}-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CZOI-R2」糖果", "background": null, "description": "幼儿园里有 $n$ 个小朋友，第 $i$ 个小朋友最开始有 $a_i$ 个糖果。幼儿园老师可以进行无限次操作，每次操作选择一个小朋友，并给他 $k$ 个糖果。\n\n为了避免小朋友因为愤怒而吃掉别的小朋友的糖果，幼儿园老师希望所有小朋友的糖果数量相同。若她的目标可以达成，输出 `YES` 和她最少的操作次数；若不可以，则直接输出 `NO`。", "inputFormat": "第一行输入 $2$ 个整数 $n,k$，表示小朋友数量、每次操作给予糖果数量。\n\n第二行输入 $n$ 个整数 $a_i$，表示第 $i$ 个小朋友初始的糖果数量。", "outputFormat": "第一行输出 `YES` 或 `NO`。若输出 `YES`，则再输出 $1$ 个整数，表示答案。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（$20\\text{ pts}$）：$n,k\\le10^3$，$a_i\\le10^3$。\n- Subtask #2（$30\\text{ pts}$）：$k=1$。\n- Subtask #3（$50\\text{ pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n,k\\le10^5,0 \\le a_i\\le 2^{31}-1$。", "locale": "zh-CN"}}}
{"pid": "P11372", "type": "P", "difficulty": 3, "samples": [["10 2\n2 2 2\n1 1\n1 2\n2 1\n2 3\n3 1\n3 2", "0 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "O2优化", "洛谷比赛"], "title": "「CZOI-R2」加训", "background": "", "description": "\\_O_v_O_ 来到了 $k$ 维世界。\n\n机房可看作一个 $n^k$ 的 $k$ 维正方体（你可以理解为一个 $k$ 维的坐标系），每一维的坐标从 $1$ 到 $n$。\n\n有 $m$ 个 OIer，第 $i$ 个在 $(a_{i,1},a_{i,2},\\cdots,a_{i,k})$。遗憾的是，所有 OIer 都在摸鱼。\n\n机房还有 $x$ 个障碍，第 $i$ 个在 $(b_{i,1},b_{i,2},\\cdots,b_{i,k})$。\n\n除此之外，有 $y$ 个教练，第 $i$ 个在 $(c_{i,1},c_{i,2},\\cdots,c_{i,k})$。\n\n教练可不想看到 OIer 们摸鱼，而只要教练跟某个 OIer 在的坐标之间有且仅有 $k-1$ **维的坐标**相同，并且他们两个人连起来形成的一条**线段**上没有别的障碍或 OIer 或教练，那么那个 OIer 就被发现摸鱼了。\n\n问每个教练能发现几个 OIer 在摸鱼？", "inputFormat": "第一行，两个整数 $n,k$，表示正方体的边长和维数。\n\n第二行，三个整数 $m,x,y$，表示 OIer 、障碍、教练的个数。\n\n接下来 $m$ 行，每行 $k$ 个数，其中第 $i+2$ 行表示第 $i$ 个 OIer 的位置。\n\n接下来 $x$ 行，每行 $k$ 个数，其中第 $i+m+2$ 行表示第 $i$ 个障碍的位置。\n\n接下来 $y$ 行，每行 $k$ 个数，其中第 $i+m+x+2$ 行表示第 $i$ 个教练的位置。", "outputFormat": "输出一行 $y$ 个整数，其中第 $i$ 个表示第 $i$ 位教练看到的 OIer 的个数。", "hint": "**【样例解释】**\n\n满足有 $k-1$ 个坐标相同的 OIer 和教练有 OIer 1 和教练 1，OIer 2 和教练 2，其中 OIer 1 和教练 1 之间有障碍，不会被发现。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtusk#1（$25\\ \\text{pts}$）：$k=1$。\n- Subtusk#2（$35\\ \\text{pts}$）：$k=2$。\n- Subtusk#3（$40\\ \\text{pts}$）：$k=3$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^3$，$\\bf{1\\le k\\le 3}$，$m,x,y\\ge1,m+x+y\\le\\min(10^3,n^k)$，$1\\le a_{i,j} ,b_{i,j},c_{i,j} \\le n$，保证所有 OIer、教练、障碍都不在同一位置。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CZOI-R2」加训", "background": "", "description": "\\_O_v_O_ 来到了 $k$ 维世界。\n\n机房可看作一个 $n^k$ 的 $k$ 维正方体（你可以理解为一个 $k$ 维的坐标系），每一维的坐标从 $1$ 到 $n$。\n\n有 $m$ 个 OIer，第 $i$ 个在 $(a_{i,1},a_{i,2},\\cdots,a_{i,k})$。遗憾的是，所有 OIer 都在摸鱼。\n\n机房还有 $x$ 个障碍，第 $i$ 个在 $(b_{i,1},b_{i,2},\\cdots,b_{i,k})$。\n\n除此之外，有 $y$ 个教练，第 $i$ 个在 $(c_{i,1},c_{i,2},\\cdots,c_{i,k})$。\n\n教练可不想看到 OIer 们摸鱼，而只要教练跟某个 OIer 在的坐标之间有且仅有 $k-1$ **维的坐标**相同，并且他们两个人连起来形成的一条**线段**上没有别的障碍或 OIer 或教练，那么那个 OIer 就被发现摸鱼了。\n\n问每个教练能发现几个 OIer 在摸鱼？", "inputFormat": "第一行，两个整数 $n,k$，表示正方体的边长和维数。\n\n第二行，三个整数 $m,x,y$，表示 OIer 、障碍、教练的个数。\n\n接下来 $m$ 行，每行 $k$ 个数，其中第 $i+2$ 行表示第 $i$ 个 OIer 的位置。\n\n接下来 $x$ 行，每行 $k$ 个数，其中第 $i+m+2$ 行表示第 $i$ 个障碍的位置。\n\n接下来 $y$ 行，每行 $k$ 个数，其中第 $i+m+x+2$ 行表示第 $i$ 个教练的位置。", "outputFormat": "输出一行 $y$ 个整数，其中第 $i$ 个表示第 $i$ 位教练看到的 OIer 的个数。", "hint": "**【样例解释】**\n\n满足有 $k-1$ 个坐标相同的 OIer 和教练有 OIer 1 和教练 1，OIer 2 和教练 2，其中 OIer 1 和教练 1 之间有障碍，不会被发现。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtusk#1（$25\\ \\text{pts}$）：$k=1$。\n- Subtusk#2（$35\\ \\text{pts}$）：$k=2$。\n- Subtusk#3（$40\\ \\text{pts}$）：$k=3$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^3$，$\\bf{1\\le k\\le 3}$，$m,x,y\\ge1,m+x+y\\le\\min(10^3,n^k)$，$1\\le a_{i,j} ,b_{i,j},c_{i,j} \\le n$，保证所有 OIer、教练、障碍都不在同一位置。", "locale": "zh-CN"}}}
{"pid": "P11373", "type": "P", "difficulty": 5, "samples": [["5 5\n1 10 8 4 2\nI 2 1\nA 1 4 4\nA 2 4 4\nD 5\nQ 1 4 4", "YES"], ["10 10\n2 2 1 4 2 10 8 7 10 6\nQ 5 6 1\nQ 5 7 7\nI 5 1\nQ 4 5 3\nQ 2 9 2\nA 3 5 1\nQ 7 8 5\nD 7\nA 3 9 7\nQ 3 7 6", "NO\nNO\nNO\nYES\nNO\nYES"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["平衡树", "数论", "O2优化", "最大公约数 gcd", "差分", "洛谷比赛"], "title": "「CZOI-R2」天平", "background": "", "description": "你有 $n$ 个**砝码组**，编号为 $1$ 至 $n$。对于第 $i$ 个**砝码组**中的砝码有共同的正整数质量 $a_i$，每个**砝码组**中的**砝码**数量无限。\n\n其中，有 $q$ 次操作：\n\n- `I x v`：在第 $x$ 个**砝码组**后新增一组单个**砝码**质量为 $v$ 的**砝码组**，当 $x=0$ 时表示在最前面新增；\n- `D x`：删除第 $x$ 个**砝码组**；\n- `A l r v`：把从 $l$ 到 $r$ 的所有**砝码组**中的砝码质量加 $v$；\n- `Q l r v`：判断能否用从 $l$ 到 $r$ 的**砝码组**中的砝码，称出质量 $v$。每个砝码组中的砝码可以使用任意个，也可以不用。\n\n对于操作 `I` 和 `D`，操作后编号以及 $n$ 的值自动变化。\n\n称一些**砝码**可以称出质量 $v$，当且仅当存在将这些砝码分别放在天平两边的摆放方法，使得将 $1$ 个质量为 $v$ 的物体摆放在某边可以让天平平衡。", "inputFormat": "第一行输入 $2$ 个整数 $n,q$。\n\n第二行输入 $n$ 个整数，第 $i$ 个整数为 $a_i$。\n\n接下来 $q$ 行，每行表示一个操作。", "outputFormat": "对于每个 `Q` 操作，输出一行 `YES` 或者 `NO`，表示能否称出重量 $v$。", "hint": "**【样例解释】**\n\n对于样例组 $1$，最后有 $5$ 个中的**砝码组**，质量分别为 $5,18,9,16,2$。在天平左边放上 $1$ 个**砝码组一**中的**砝码**，右边放上 $1$ 个**砝码组三**的砝码，即可称出质量 $4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lwd6643t.png)\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n记 $m_1$ 为所有时刻中 $a_i$ 与 $v$ 的最小值，$m_2$ 为所有时刻中 $a_i$ 与 $v$ 的最大值。\n\n- Subtask #1（$5\\text{ pts}$）：$1\\le n,q\\le 10$，$1\\le m_1\\le m_2 \\le50$。\n- Subtask #2（$15\\text{ pts}$）：$1\\le n,q\\le 4\\times10^2$。\n- Subtask #3（$20\\text{ pts}$）：没有操作 `I` 与操作 `D`。\n- Subtask #4（$60\\text{ pts}$）：无特殊性质。\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 10^5$，$1\\le m_1\\le m_2\\le 10^{18}$，保证所有操作合法，且任意时刻至少存在一个砝码组。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CZOI-R2」天平", "background": "", "description": "你有 $n$ 个**砝码组**，编号为 $1$ 至 $n$。对于第 $i$ 个**砝码组**中的砝码有共同的正整数质量 $a_i$，每个**砝码组**中的**砝码**数量无限。\n\n其中，有 $q$ 次操作：\n\n- `I x v`：在第 $x$ 个**砝码组**后新增一组单个**砝码**质量为 $v$ 的**砝码组**，当 $x=0$ 时表示在最前面新增；\n- `D x`：删除第 $x$ 个**砝码组**；\n- `A l r v`：把从 $l$ 到 $r$ 的所有**砝码组**中的砝码质量加 $v$；\n- `Q l r v`：判断能否用从 $l$ 到 $r$ 的**砝码组**中的砝码，称出质量 $v$。每个砝码组中的砝码可以使用任意个，也可以不用。\n\n对于操作 `I` 和 `D`，操作后编号以及 $n$ 的值自动变化。\n\n称一些**砝码**可以称出质量 $v$，当且仅当存在将这些砝码分别放在天平两边的摆放方法，使得将 $1$ 个质量为 $v$ 的物体摆放在某边可以让天平平衡。", "inputFormat": "第一行输入 $2$ 个整数 $n,q$。\n\n第二行输入 $n$ 个整数，第 $i$ 个整数为 $a_i$。\n\n接下来 $q$ 行，每行表示一个操作。", "outputFormat": "对于每个 `Q` 操作，输出一行 `YES` 或者 `NO`，表示能否称出重量 $v$。", "hint": "**【样例解释】**\n\n对于样例组 $1$，最后有 $5$ 个中的**砝码组**，质量分别为 $5,18,9,16,2$。在天平左边放上 $1$ 个**砝码组一**中的**砝码**，右边放上 $1$ 个**砝码组三**的砝码，即可称出质量 $4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lwd6643t.png)\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n记 $m_1$ 为所有时刻中 $a_i$ 与 $v$ 的最小值，$m_2$ 为所有时刻中 $a_i$ 与 $v$ 的最大值。\n\n- Subtask #1（$5\\text{ pts}$）：$1\\le n,q\\le 10$，$1\\le m_1\\le m_2 \\le50$。\n- Subtask #2（$15\\text{ pts}$）：$1\\le n,q\\le 4\\times10^2$。\n- Subtask #3（$20\\text{ pts}$）：没有操作 `I` 与操作 `D`。\n- Subtask #4（$60\\text{ pts}$）：无特殊性质。\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 10^5$，$1\\le m_1\\le m_2\\le 10^{18}$，保证所有操作合法，且任意时刻至少存在一个砝码组。", "locale": "zh-CN"}}}
{"pid": "P11375", "type": "P", "difficulty": 2, "samples": [["3 2\nURR", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "高精度", "2024", "栈", "GESP"], "title": "[GESP202412 六级] 树上游走", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1170>", "description": "小杨有一棵包含无穷节点的二叉树（即每个节点都有左儿子节点和右儿子节点；除根节点外，每个节点都有父节点），其中根节点的编号为 $1$，对于节点 $i$，其左儿子的编号为 $2\\times i$，右儿子的编号为 $2\\times i + 1$。\n\n小杨会从节点 $s$ 开始在二叉树上移动，每次移动为以下三种移动方式的任意一种：\n\n- **第 1 种移动方式**：如果当前节点存在父亲节点，向上移动到当前节点的父节点，否则不移动；\n- **第 2 种移动方式**：移动到当前节点的左儿子；\n- **第 3 种移动方式**：移动到当前节点的右儿子。\n\n小杨想知道移动 $n$ 次后自己所处的节点编号。**数据保证最后所处的节点编号不超过 $10^{12}$**。", "inputFormat": "第一行包含两个正整数 $n$ 和 $s$，代表移动次数和初始节点编号。\n\n第二行包含一个长度为 $n$ 且仅包含大写字母 $\\tt{U}$、$\\tt{L}$ 和 $\\tt{R}$ 的字符串，代表每次移动的方式，其中 $\\tt{U}$ 代表第 1 种移动方式，$\\tt{L}$ 代表第 2 种移动方式，$\\tt{R}$ 代表第 3 种移动方式。", "outputFormat": "输出一个正整数，代表最后所处的节点编号。", "hint": "小杨的移动路线为 $2 \\to 1 \\to 3 \\to 7$。\n\n| 子任务编号 | 数据点占比 |     $n$     |      $s$       |\n| :--------: | :--------: | :---------: | :------------: |\n|    $1$     |   $20\\%$   |  $\\leq 10$  |    $\\leq 2$    |\n|    $2$     |   $20\\%$   |  $\\leq 50$  |   $\\leq 10$    |\n|    $3$     |   $60\\%$   | $\\leq 10^6$ | $\\leq 10^{12}$ |\n\n\n对于全部数据，保证有 $1\\leq n\\leq 10^6$，$1\\leq s\\leq 10^{12}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202412 六级] 树上游走", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1170>", "description": "小杨有一棵包含无穷节点的二叉树（即每个节点都有左儿子节点和右儿子节点；除根节点外，每个节点都有父节点），其中根节点的编号为 $1$，对于节点 $i$，其左儿子的编号为 $2\\times i$，右儿子的编号为 $2\\times i + 1$。\n\n小杨会从节点 $s$ 开始在二叉树上移动，每次移动为以下三种移动方式的任意一种：\n\n- **第 1 种移动方式**：如果当前节点存在父亲节点，向上移动到当前节点的父节点，否则不移动；\n- **第 2 种移动方式**：移动到当前节点的左儿子；\n- **第 3 种移动方式**：移动到当前节点的右儿子。\n\n小杨想知道移动 $n$ 次后自己所处的节点编号。**数据保证最后所处的节点编号不超过 $10^{12}$**。", "inputFormat": "第一行包含两个正整数 $n$ 和 $s$，代表移动次数和初始节点编号。\n\n第二行包含一个长度为 $n$ 且仅包含大写字母 $\\tt{U}$、$\\tt{L}$ 和 $\\tt{R}$ 的字符串，代表每次移动的方式，其中 $\\tt{U}$ 代表第 1 种移动方式，$\\tt{L}$ 代表第 2 种移动方式，$\\tt{R}$ 代表第 3 种移动方式。", "outputFormat": "输出一个正整数，代表最后所处的节点编号。", "hint": "小杨的移动路线为 $2 \\to 1 \\to 3 \\to 7$。\n\n| 子任务编号 | 数据点占比 |     $n$     |      $s$       |\n| :--------: | :--------: | :---------: | :------------: |\n|    $1$     |   $20\\%$   |  $\\leq 10$  |    $\\leq 2$    |\n|    $2$     |   $20\\%$   |  $\\leq 50$  |   $\\leq 10$    |\n|    $3$     |   $60\\%$   | $\\leq 10^6$ | $\\leq 10^{12}$ |\n\n\n对于全部数据，保证有 $1\\leq n\\leq 10^6$，$1\\leq s\\leq 10^{12}$。", "locale": "zh-CN"}}}
{"pid": "P11376", "type": "P", "difficulty": 3, "samples": [["3 4 10\n1 1\n2 1\n8 3\n5 3\n7 2\n9 0\n1 10000", "40186"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2024", "排序", "GESP"], "title": "[GESP202412 六级] 运送物资", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1170>", "description": "小杨管理着 $m$ 辆货车，每辆货车每天需要向 A 市和 B 市运送若干次物资。小杨同时拥有 $n$ 个运输站点，这些站点位于 A 市和 B 市之间。\n\n每次运送物资时，货车从初始运输站点出发，前往 A 市或 B 市，之后返回初始运输站点。A 市、B 市和运输站点的位置可以视作数轴上的三个点，其中 A 市的坐标为 $0$，B 市的坐标为 $x$，运输站点的坐标为 $p$ 且有 $0 \\lt p \\lt x$。货车每次去 A 市运送物资的总行驶路程为 $2p$，去 B 市运送物资的总行驶路程为 $2(x - p)$。\n\n对于第 $i$ 个运输站点，其位置为 $p_i$ 且至多作为 $c_i$ 辆车的初始运输站点。小杨想知道，在最优分配每辆货车的初始运输站点的情况下，所有货车每天的最短总行驶路程是多少。", "inputFormat": "第一行包含三个正整数 $n,m,x$，代表运输站点数量、货车数量和两市距离。\n\n之后 $n$ 行，每行包含两个正整数 $p_i$ 和 $c_i$，代表第 $i$ 个运输站点的位置和最多容纳车辆数。\n\n之后 $m$ 行，每行包含两个正整数 $a_i$ 和 $b_i$，代表第 $i$ 辆货车每天需要向 A 市运送 $a_i$ 次物资，向 B 市运送 $b_i$ 次物资。", "outputFormat": "输出一个正整数，代表所有货车每天的最短总行驶路程。", "hint": "第 $1$ 辆车的初始运输站点为站点 $3$，第 $2$ 辆车的初始运输站点为站点 $2$。第 $3$ 辆车的初始运输站点为站点 $1$，第 $4$ 辆车的初始运输站点为站点 $3$。此时总驶路程最短，为 $40186$。\n\n| 子任务编号 | 数据点占比 |     $n$     |     $s$     |    $c_i$    |\n| :--------: | :--------: | :---------: | :---------: | :---------: |\n|    $1$     |   $20\\%$   |     $2$     |     $2$     |     $1$     |\n|    $2$     |   $20\\%$   | $\\leq 10^5$ | $\\leq 10^5$ |     $1$     |\n|    $3$     |   $60\\%$   | $\\leq 10^5$ | $\\leq 10^5$ | $\\leq 10^5$ |\n\n对于全部数据，保证有 $1\\leq n,m\\leq 10^5$，$2\\leq x\\leq 10^8$，$0\\lt p_i\\lt x$，$1\\leq c_i\\leq 10^5$，$0\\leq a_i,b_i\\leq 10^5$。数据保证 $\\sum c_i\\geq m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202412 六级] 运送物资", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1170>", "description": "小杨管理着 $m$ 辆货车，每辆货车每天需要向 A 市和 B 市运送若干次物资。小杨同时拥有 $n$ 个运输站点，这些站点位于 A 市和 B 市之间。\n\n每次运送物资时，货车从初始运输站点出发，前往 A 市或 B 市，之后返回初始运输站点。A 市、B 市和运输站点的位置可以视作数轴上的三个点，其中 A 市的坐标为 $0$，B 市的坐标为 $x$，运输站点的坐标为 $p$ 且有 $0 \\lt p \\lt x$。货车每次去 A 市运送物资的总行驶路程为 $2p$，去 B 市运送物资的总行驶路程为 $2(x - p)$。\n\n对于第 $i$ 个运输站点，其位置为 $p_i$ 且至多作为 $c_i$ 辆车的初始运输站点。小杨想知道，在最优分配每辆货车的初始运输站点的情况下，所有货车每天的最短总行驶路程是多少。", "inputFormat": "第一行包含三个正整数 $n,m,x$，代表运输站点数量、货车数量和两市距离。\n\n之后 $n$ 行，每行包含两个正整数 $p_i$ 和 $c_i$，代表第 $i$ 个运输站点的位置和最多容纳车辆数。\n\n之后 $m$ 行，每行包含两个正整数 $a_i$ 和 $b_i$，代表第 $i$ 辆货车每天需要向 A 市运送 $a_i$ 次物资，向 B 市运送 $b_i$ 次物资。", "outputFormat": "输出一个正整数，代表所有货车每天的最短总行驶路程。", "hint": "第 $1$ 辆车的初始运输站点为站点 $3$，第 $2$ 辆车的初始运输站点为站点 $2$。第 $3$ 辆车的初始运输站点为站点 $1$，第 $4$ 辆车的初始运输站点为站点 $3$。此时总驶路程最短，为 $40186$。\n\n| 子任务编号 | 数据点占比 |     $n$     |     $s$     |    $c_i$    |\n| :--------: | :--------: | :---------: | :---------: | :---------: |\n|    $1$     |   $20\\%$   |     $2$     |     $2$     |     $1$     |\n|    $2$     |   $20\\%$   | $\\leq 10^5$ | $\\leq 10^5$ |     $1$     |\n|    $3$     |   $60\\%$   | $\\leq 10^5$ | $\\leq 10^5$ | $\\leq 10^5$ |\n\n对于全部数据，保证有 $1\\leq n,m\\leq 10^5$，$2\\leq x\\leq 10^8$，$0\\lt p_i\\lt x$，$1\\leq c_i\\leq 10^5$，$0\\leq a_i,b_i\\leq 10^5$。数据保证 $\\sum c_i\\geq m$。", "locale": "zh-CN"}}}
{"pid": "P11377", "type": "P", "difficulty": 2, "samples": [["3\n3 2 3\n1 2\n1 2\n2 3\n3 3 4\n1 2\n1 2\n2 3\n3 1000 1000\n1 2\n1 2\n2 3", "3\n-1\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "背包 DP", "GESP"], "title": "[GESP202412 七级] 武器购买", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1171>", "description": "商店里有 $n$ 个武器，第 $i$ 个武器的强度为 $p_i$，花费为 $c_i$。\n\n小杨想要购买一些武器，满足这些武器的总强度不小于 $P$，总花费不超过 $Q$，小杨想知道是否存在满足条件的购买方案，如果有，最少花费又是多少。", "inputFormat": "第一行包含一个正整数 $t$，代表测试数据组数。\n\n对于每组测试数据，第一行包含三个正整数 $n,P,Q$，含义如题面所示。\n\n之后 $n$ 行，每行包含两个正整数 $p_i,c_i$，代表武器的强度和花费。", "outputFormat": "对于每组测试数据，如果存在满足条件的购买方案，输出最少花费，否则输出 `-1`。", "hint": "| 子任务编号 | 数据点占比 |    $n$     |        $p_i$        |        $c_i$        |         $P$         |         $Q$         |\n| :--------: | :--------: | :--------: | :-----------------: | :-----------------: | :-----------------: | :-----------------: |\n|    $1$     |   $20\\%$   | $\\leq 10$  |         $1$         |         $1$         |      $\\leq 10$      |      $\\leq 10$      |\n|    $2$     |   $20\\%$   | $\\leq 100$ | $\\leq 5\\times 10^4$ |         $1$         | $\\leq 5\\times 10^4$ |         $2$         |\n|    $3$     |   $60\\%$   | $\\leq 100$ | $\\leq 5\\times 10^4$ | $\\leq 5\\times 10^4$ | $\\leq 5\\times 10^4$ | $\\leq 5\\times 10^4$ |\n\n对于全部数据，保证有 $1\\leq t\\leq 10$，$1\\leq n\\leq 100$，$1\\leq p_i,c_i,P,Q\\leq 5\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202412 七级] 武器购买", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1171>", "description": "商店里有 $n$ 个武器，第 $i$ 个武器的强度为 $p_i$，花费为 $c_i$。\n\n小杨想要购买一些武器，满足这些武器的总强度不小于 $P$，总花费不超过 $Q$，小杨想知道是否存在满足条件的购买方案，如果有，最少花费又是多少。", "inputFormat": "第一行包含一个正整数 $t$，代表测试数据组数。\n\n对于每组测试数据，第一行包含三个正整数 $n,P,Q$，含义如题面所示。\n\n之后 $n$ 行，每行包含两个正整数 $p_i,c_i$，代表武器的强度和花费。", "outputFormat": "对于每组测试数据，如果存在满足条件的购买方案，输出最少花费，否则输出 `-1`。", "hint": "| 子任务编号 | 数据点占比 |    $n$     |        $p_i$        |        $c_i$        |         $P$         |         $Q$         |\n| :--------: | :--------: | :--------: | :-----------------: | :-----------------: | :-----------------: | :-----------------: |\n|    $1$     |   $20\\%$   | $\\leq 10$  |         $1$         |         $1$         |      $\\leq 10$      |      $\\leq 10$      |\n|    $2$     |   $20\\%$   | $\\leq 100$ | $\\leq 5\\times 10^4$ |         $1$         | $\\leq 5\\times 10^4$ |         $2$         |\n|    $3$     |   $60\\%$   | $\\leq 100$ | $\\leq 5\\times 10^4$ | $\\leq 5\\times 10^4$ | $\\leq 5\\times 10^4$ | $\\leq 5\\times 10^4$ |\n\n对于全部数据，保证有 $1\\leq t\\leq 10$，$1\\leq n\\leq 100$，$1\\leq p_i,c_i,P,Q\\leq 5\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P11378", "type": "P", "difficulty": 3, "samples": [["5\n6 2 3 4 5\n1 2\n2 3\n2 5\n1 4", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "树形 DP", "树的遍历", "GESP"], "title": "[GESP202412 七级] 燃烧", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1171>", "description": "小杨有一棵包含 $n$ 个节点的树，其中节点的编号从 $1$ 到 $n$。节点 $i$ 的权值为 $a_i$。\n\n小杨可以选择一个初始节点引燃，每个燃烧的节点会将其相邻节点中权值**严格小于**自身权值的在节点间扩散直到不会有新的节点被引燃。\n\n小杨想知道在合理选择初始节点的情况下，最多可以燃烧多少个节点。", "inputFormat": "第一行包含一个正整数 $n$，表示节点数量。\n\n第二行包含 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，代表节点权值。\n\n之后 $n-1$ 行，每行包含两个正整数 $u_i,v_i$，代表存在一条连接节点 $u_i$ 和 $v_i$ 的边。", "outputFormat": "输出一个正整数，代表最多燃烧的节点个数。\n", "hint": "| 子任务编号 | 数据点占比 |     $n$     |\n| :--------: | :--------: | :---------: |\n|    $1$     |   $20\\%$   |  $\\leq 10$  |\n|    $2$     |   $20\\%$   | $\\leq 100$  |\n|    $3$     |   $60\\%$   | $\\leq 10^5$ |\n\n对于全部数据，保证有 $1\\leq n\\leq 10^5$，$1\\leq a_i\\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202412 七级] 燃烧", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1171>", "description": "小杨有一棵包含 $n$ 个节点的树，其中节点的编号从 $1$ 到 $n$。节点 $i$ 的权值为 $a_i$。\n\n小杨可以选择一个初始节点引燃，每个燃烧的节点会将其相邻节点中权值**严格小于**自身权值的在节点间扩散直到不会有新的节点被引燃。\n\n小杨想知道在合理选择初始节点的情况下，最多可以燃烧多少个节点。", "inputFormat": "第一行包含一个正整数 $n$，表示节点数量。\n\n第二行包含 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，代表节点权值。\n\n之后 $n-1$ 行，每行包含两个正整数 $u_i,v_i$，代表存在一条连接节点 $u_i$ 和 $v_i$ 的边。", "outputFormat": "输出一个正整数，代表最多燃烧的节点个数。\n", "hint": "| 子任务编号 | 数据点占比 |     $n$     |\n| :--------: | :--------: | :---------: |\n|    $1$     |   $20\\%$   |  $\\leq 10$  |\n|    $2$     |   $20\\%$   | $\\leq 100$  |\n|    $3$     |   $60\\%$   | $\\leq 10^5$ |\n\n对于全部数据，保证有 $1\\leq n\\leq 10^5$，$1\\leq a_i\\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P11379", "type": "P", "difficulty": 3, "samples": [["5 1\n0 0 1 1 1\n1 2\n2 3\n2 5\n1 4", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "树的遍历", "GESP"], "title": "[GESP202412 八级] 树上移动", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1172>", "description": "小杨有一棵包含 $n$ 个节点的树，其中节点的编号从 $1$ 到 $n$，每个节点的颜色要么是白色要么是黑色，小杨可以任意选择节点 $s$ 和节点 $t$ 并从节点 $s$ 出发移动到节点 $t$，移动过程中小杨不能够经过重复节点。\n\n小杨希望自己在至多经过 $k$ 个黑色节点的前提下，经过的总节点数尽可能多，请你帮小杨选择经过最多的节点数是多少。", "inputFormat": "第一行包含两个正整数 $n,k$，代表节点数量和至多经过的黑色节点数。\n\n第二行包含 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，代表节点颜色，如果 $a_i=0$，代表节点颜色为白色，如果 $a_i=1$，代表节点颜色为黑色。\n\n之后 $n-1$ 行，每行包含两个正整数 $u_i,v_i$，代表存在一条连接 $u_i$ 和 $v_i$ 的边。", "outputFormat": "输出一个正整数，代表最多经过的节点数。", "hint": "| 子任务编号 | 数据点占比 |     $n$     | $k$         |     特殊性质     |\n| :--------: | :--------: | :---------: | ----------- | :--------------: |\n|    $1$     |   $20\\%$   | $\\leq 100$  | $\\leq 100$  | 树的形态为一条链 |\n|    $2$     |   $20\\%$   | $\\leq 1000$ | $0$         |                  |\n|    $3$     |   $60\\%$   | $\\leq 1000$ | $\\leq 1000$ |                  |\n\n\n对于全部数据，保证有 $1\\leq n\\leq 1000$，$0\\leq k\\leq 1000$，$0\\leq a_i\\leq 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202412 八级] 树上移动", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1172>", "description": "小杨有一棵包含 $n$ 个节点的树，其中节点的编号从 $1$ 到 $n$，每个节点的颜色要么是白色要么是黑色，小杨可以任意选择节点 $s$ 和节点 $t$ 并从节点 $s$ 出发移动到节点 $t$，移动过程中小杨不能够经过重复节点。\n\n小杨希望自己在至多经过 $k$ 个黑色节点的前提下，经过的总节点数尽可能多，请你帮小杨选择经过最多的节点数是多少。", "inputFormat": "第一行包含两个正整数 $n,k$，代表节点数量和至多经过的黑色节点数。\n\n第二行包含 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，代表节点颜色，如果 $a_i=0$，代表节点颜色为白色，如果 $a_i=1$，代表节点颜色为黑色。\n\n之后 $n-1$ 行，每行包含两个正整数 $u_i,v_i$，代表存在一条连接 $u_i$ 和 $v_i$ 的边。", "outputFormat": "输出一个正整数，代表最多经过的节点数。", "hint": "| 子任务编号 | 数据点占比 |     $n$     | $k$         |     特殊性质     |\n| :--------: | :--------: | :---------: | ----------- | :--------------: |\n|    $1$     |   $20\\%$   | $\\leq 100$  | $\\leq 100$  | 树的形态为一条链 |\n|    $2$     |   $20\\%$   | $\\leq 1000$ | $0$         |                  |\n|    $3$     |   $60\\%$   | $\\leq 1000$ | $\\leq 1000$ |                  |\n\n\n对于全部数据，保证有 $1\\leq n\\leq 1000$，$0\\leq k\\leq 1000$，$0\\leq a_i\\leq 1$。", "locale": "zh-CN"}}}
{"pid": "P11380", "type": "P", "difficulty": 3, "samples": [["4 2\n1 3\n2 4", "2"], ["3 0", "6"], ["3 2\n1 2\n2 1", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2024", "数论", "图论建模", "组合数学", "排列组合", "GESP"], "title": "[GESP202412 八级] 排队", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1172>", "description": "小杨所在班级共有 $n$ 位同学，依次以 $1,2,\\dots,n$ 标号。这 $n$ 位同学想排成一行队伍，其中有些同学之间关系非常好，在队伍里需要排在相邻的位置。具体来说，有 $m$ 对这样的关系（$m$ 是一个非负整数）。当 $m\\geq 1$ 时，第 $i$ 对关系（$1\\leq i\\leq m$）给出 $a_i,b_i$，表示排队时编号为 $a_i$ 的同学需要排在编号为 $b_i$ 的同学前面，并且两人在队伍中相邻。\n\n现在小杨想知道总共有多少种排队方式。由于答案可能很大，你只需要求出答案对 $10^9+7$ 取模的结果。", "inputFormat": "第一行，两个整数 $n,m$，分别表示同学们的数量与关系数量。\n\n接下来 $m$ 行，每行两个整数 $a_i,b_i$，表示一对关系。", "outputFormat": "一行，一个整数，表示答案对 $10^9+7$ 取模的结果。", "hint": "对于 $20\\%$ 的测试数据点，保证 $1\\leq n\\leq 8$，$0\\leq m\\leq 10$。\n\n对于另外 $20\\%$ 的测试数据点，保证 $1\\leq n\\leq 10^3$，$0\\leq m\\leq 1$。\n\n对于所有测试数据点，保证 $1\\leq n\\leq 2\\times 10^5$，$0\\leq m\\leq 2\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202412 八级] 排队", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1172>", "description": "小杨所在班级共有 $n$ 位同学，依次以 $1,2,\\dots,n$ 标号。这 $n$ 位同学想排成一行队伍，其中有些同学之间关系非常好，在队伍里需要排在相邻的位置。具体来说，有 $m$ 对这样的关系（$m$ 是一个非负整数）。当 $m\\geq 1$ 时，第 $i$ 对关系（$1\\leq i\\leq m$）给出 $a_i,b_i$，表示排队时编号为 $a_i$ 的同学需要排在编号为 $b_i$ 的同学前面，并且两人在队伍中相邻。\n\n现在小杨想知道总共有多少种排队方式。由于答案可能很大，你只需要求出答案对 $10^9+7$ 取模的结果。", "inputFormat": "第一行，两个整数 $n,m$，分别表示同学们的数量与关系数量。\n\n接下来 $m$ 行，每行两个整数 $a_i,b_i$，表示一对关系。", "outputFormat": "一行，一个整数，表示答案对 $10^9+7$ 取模的结果。", "hint": "对于 $20\\%$ 的测试数据点，保证 $1\\leq n\\leq 8$，$0\\leq m\\leq 10$。\n\n对于另外 $20\\%$ 的测试数据点，保证 $1\\leq n\\leq 10^3$，$0\\leq m\\leq 1$。\n\n对于所有测试数据点，保证 $1\\leq n\\leq 2\\times 10^5$，$0\\leq m\\leq 2\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P11381", "type": "P", "difficulty": 0, "samples": [["3 5 100\n1 2\n2 3\n1 2\n1 3\n3 4\n3 5", "8"], ["见下发 bit1ocen.in", "见下发 bit1ocen.out"], ["见下发 bit2ocen.in", "见下发 bit2ocen.out"], ["见下发 bit3ocen.in", "见下发 bit3ocen.out"], ["见下发 bit4ocen.in", "见下发 bit4ocen.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["POI（波兰）", "2024"], "title": "[POI 2024/2025 R1] Bitada", "background": "题目译自 [POI 2024/2025 R1 Bitada](https://sio2.mimuw.edu.pl/c/oi32-1/p/bit/)。", "description": "Bajtocki 考古研究所的顶级研究员 Lara Joft 和 Indiana Krones 发现了古代城市 Bitada 的完整地图。这个城市由 $n$ 栋房屋组成，编号从 $1$ 到 $n$，通过 $n-1$ 条双向道路连接。可以保证从任意两个房屋之间有且仅有一条路径可以不经过其他房屋到达。\n\n研究人员知道，Bajtocji 的现任首都 Bajtogród 是在 Bitada 的废墟上建立的。Bajtogród 目前有 $m \\geq n$ 座大楼，编号从 $1$ 到 $m$，通过 $m-1$ 条道路连接。保证从任意两个大楼之间有且仅有一条简单路径。已知 $m$ 座大楼中有 $n$ 座建立在 Bitada 废墟之上。不幸的是，Bitada 中房屋的编号与 Bajtogród 中大楼的编号没有直接对应关系。只知道所有 Bitada 的道路都被 Bajtogród 的道路覆盖。换句话说，如果在房屋 $a$ 的废墟上建立了大楼 $x$，在房屋 $b$ 的废墟上建立了大楼 $y$，并且 Bitada 中存在连接房屋 $a$ 和 $b$ 的道路，那么 Bajtogród 中存在连接大楼 $x$ 和 $y$ 的道路。\n\n此外，已知 Bitada 中每栋房屋最多直接连接三栋其他房屋。同样，Bajtogród 中每座大楼最多直接连接三栋其他大楼。\n\n可能的 Bitada 重建定义为将每栋房屋分配到某座大楼的过程，该过程满足两个条件。首先，每座大楼最多分配一栋房屋。其次，若房屋 $a$ 和 $b$ 之间存在道路，则分配给房屋 $a$ 的大楼和分配给房屋 $b$ 的大楼之间存在道路。\n\nLara Joft 和 Indiana Krones 想要分析所有可能的 Bitada 重建计划，并担心这会占用太多时间。为了得出结论，他们给你一个正整数 $k$，并询问所有可能重建方案的数量对 $k$ 取模的结果。", "inputFormat": "输入的第一行包含三个整数 $n, m, k (1 \\leq n \\leq m \\leq 3000, 1 \\leq k \\leq 10^9)$，分别表示 Bitada 中的房屋数量，Bajtogród 中的大楼数量以及计算结果的模数。\n\n接下来的 $n-1$ 行描述 Bitada 的道路。每行包含两个整数 $x$ 和 $y (1 \\leq x, y \\leq n)$，表示 Bitada 中存在连接房屋 $x$ 和 $y$ 的道路。\n\n接下来的 $m-1$ 行描述 Bajtogród 的道路。每行包含两个整数 $x$ 和 $y (1 \\leq x, y \\leq m)$，表示 Bajtogród 中存在连接大楼 $x$ 和 $y$ 的道路。\n\n输入数据满足题目描述的条件，即任意两个房屋之间存在唯一一条不经过其他房屋的路径，任意两栋大楼之间存在唯一一条不经过其他大楼的路径。", "outputFormat": "输出一行，表示包含所有可能重建方案数量对 $k$ 取模的结果。", "hint": "对于样例一，可能的重建方案包括：\n\n1. $1 \\rightarrow 2, 2 \\rightarrow 1, 3 \\rightarrow 3$；\n2. $1 \\rightarrow 3, 2 \\rightarrow 1, 3 \\rightarrow 2$；\n3. $1 \\rightarrow 1, 2 \\rightarrow 3, 3 \\rightarrow 4$；\n4. $1 \\rightarrow 1, 2 \\rightarrow 3, 3 \\rightarrow 5$；\n5. $1 \\rightarrow 4, 2 \\rightarrow 3, 3 \\rightarrow 1$；\n6. $1 \\rightarrow 4, 2 \\rightarrow 3, 3 \\rightarrow 5$；\n7. $1 \\rightarrow 5, 2 \\rightarrow 3, 3 \\rightarrow 1$；\n8. $1 \\rightarrow 5, 2 \\rightarrow 3, 3 \\rightarrow 4$。\n\n对于样例二，该样例满足 $n=5, m=5, k=100$。Bitada 和 Bajtogród 具有相同的道路。答案是 $2$。\n\n对于样例三，该样例满足 $n=7, m=15, k=10^9$。Bitada 和 Bajtogród 是满二叉树。答案是 $24$。\n\n对于样例四，该样例满足 $n=3, m=3000, k=121$。Bajtogród 中正好有一半的大楼形成了一条路径。路径上的每栋大楼都与一栋不在路径上的大楼相连。答案是 $38$。\n\n对于样例五，该样例满足 $n=100, m=3000, k=27$。Bitada 和 Bajtogród 都是一条链。具体来说，对于每个 $1 \\leq i < n$，存在连接房屋 $i$ 和 $i+1$ 的道路。同样，对于每个 $1 \\leq i < m$，存在连接大楼 $i$ 和 $i+1$ 的道路。答案是 $24$。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :----------- |\n| $1$ | $n,m \\leq 10$ | $8$ |\n| $2$ | $n,m \\leq 30$ | $11$ |\n| $3$ | $n \\leq 3$ | $7$ |\n| $4$ | $n \\leq 30$ | $25$ |\n| $5$ | 无特殊性质 | $49$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2024/2025 R1] Bitada", "background": "题目译自 [POI 2024/2025 R1 Bitada](https://sio2.mimuw.edu.pl/c/oi32-1/p/bit/)。", "description": "Bajtocki 考古研究所的顶级研究员 Lara Joft 和 Indiana Krones 发现了古代城市 Bitada 的完整地图。这个城市由 $n$ 栋房屋组成，编号从 $1$ 到 $n$，通过 $n-1$ 条双向道路连接。可以保证从任意两个房屋之间有且仅有一条路径可以不经过其他房屋到达。\n\n研究人员知道，Bajtocji 的现任首都 Bajtogród 是在 Bitada 的废墟上建立的。Bajtogród 目前有 $m \\geq n$ 座大楼，编号从 $1$ 到 $m$，通过 $m-1$ 条道路连接。保证从任意两个大楼之间有且仅有一条简单路径。已知 $m$ 座大楼中有 $n$ 座建立在 Bitada 废墟之上。不幸的是，Bitada 中房屋的编号与 Bajtogród 中大楼的编号没有直接对应关系。只知道所有 Bitada 的道路都被 Bajtogród 的道路覆盖。换句话说，如果在房屋 $a$ 的废墟上建立了大楼 $x$，在房屋 $b$ 的废墟上建立了大楼 $y$，并且 Bitada 中存在连接房屋 $a$ 和 $b$ 的道路，那么 Bajtogród 中存在连接大楼 $x$ 和 $y$ 的道路。\n\n此外，已知 Bitada 中每栋房屋最多直接连接三栋其他房屋。同样，Bajtogród 中每座大楼最多直接连接三栋其他大楼。\n\n可能的 Bitada 重建定义为将每栋房屋分配到某座大楼的过程，该过程满足两个条件。首先，每座大楼最多分配一栋房屋。其次，若房屋 $a$ 和 $b$ 之间存在道路，则分配给房屋 $a$ 的大楼和分配给房屋 $b$ 的大楼之间存在道路。\n\nLara Joft 和 Indiana Krones 想要分析所有可能的 Bitada 重建计划，并担心这会占用太多时间。为了得出结论，他们给你一个正整数 $k$，并询问所有可能重建方案的数量对 $k$ 取模的结果。", "inputFormat": "输入的第一行包含三个整数 $n, m, k (1 \\leq n \\leq m \\leq 3000, 1 \\leq k \\leq 10^9)$，分别表示 Bitada 中的房屋数量，Bajtogród 中的大楼数量以及计算结果的模数。\n\n接下来的 $n-1$ 行描述 Bitada 的道路。每行包含两个整数 $x$ 和 $y (1 \\leq x, y \\leq n)$，表示 Bitada 中存在连接房屋 $x$ 和 $y$ 的道路。\n\n接下来的 $m-1$ 行描述 Bajtogród 的道路。每行包含两个整数 $x$ 和 $y (1 \\leq x, y \\leq m)$，表示 Bajtogród 中存在连接大楼 $x$ 和 $y$ 的道路。\n\n输入数据满足题目描述的条件，即任意两个房屋之间存在唯一一条不经过其他房屋的路径，任意两栋大楼之间存在唯一一条不经过其他大楼的路径。", "outputFormat": "输出一行，表示包含所有可能重建方案数量对 $k$ 取模的结果。", "hint": "对于样例一，可能的重建方案包括：\n\n1. $1 \\rightarrow 2, 2 \\rightarrow 1, 3 \\rightarrow 3$；\n2. $1 \\rightarrow 3, 2 \\rightarrow 1, 3 \\rightarrow 2$；\n3. $1 \\rightarrow 1, 2 \\rightarrow 3, 3 \\rightarrow 4$；\n4. $1 \\rightarrow 1, 2 \\rightarrow 3, 3 \\rightarrow 5$；\n5. $1 \\rightarrow 4, 2 \\rightarrow 3, 3 \\rightarrow 1$；\n6. $1 \\rightarrow 4, 2 \\rightarrow 3, 3 \\rightarrow 5$；\n7. $1 \\rightarrow 5, 2 \\rightarrow 3, 3 \\rightarrow 1$；\n8. $1 \\rightarrow 5, 2 \\rightarrow 3, 3 \\rightarrow 4$。\n\n对于样例二，该样例满足 $n=5, m=5, k=100$。Bitada 和 Bajtogród 具有相同的道路。答案是 $2$。\n\n对于样例三，该样例满足 $n=7, m=15, k=10^9$。Bitada 和 Bajtogród 是满二叉树。答案是 $24$。\n\n对于样例四，该样例满足 $n=3, m=3000, k=121$。Bajtogród 中正好有一半的大楼形成了一条路径。路径上的每栋大楼都与一栋不在路径上的大楼相连。答案是 $38$。\n\n对于样例五，该样例满足 $n=100, m=3000, k=27$。Bitada 和 Bajtogród 都是一条链。具体来说，对于每个 $1 \\leq i < n$，存在连接房屋 $i$ 和 $i+1$ 的道路。同样，对于每个 $1 \\leq i < m$，存在连接大楼 $i$ 和 $i+1$ 的道路。答案是 $24$。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :----------- |\n| $1$ | $n,m \\leq 10$ | $8$ |\n| $2$ | $n,m \\leq 30$ | $11$ |\n| $3$ | $n \\leq 3$ | $7$ |\n| $4$ | $n \\leq 30$ | $25$ |\n| $5$ | 无特殊性质 | $49$ |\n", "locale": "zh-CN"}}}
{"pid": "P11383", "type": "P", "difficulty": 0, "samples": [["4\n10 5 9 6\n4 6 8 4", "1 0 0 1"], ["见下发 spr1ocen.in", "见下发 spr1ocen.out"], ["见下发 spr2ocen.in", "见下发 spr2ocen.out"], ["见下发 spr3ocen.in", "见下发 spr3ocen.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["POI（波兰）", "2024", "Special Judge"], "title": "[POI 2024/2025 R1] Sprawiedliwy podział", "background": "原题译自 [POI 2024/2025 R1 Sprawiedliwy podział](https://sio2.mimuw.edu.pl/c/oi32-1/p/spr/)。", "description": "Bajtyna 和 Bitek 需要分配他们拥有的 $n$ 件物品。对于每件物品，我们知道其对 Bajtyna 和 Bitek 的价值；这两个价值可以相同，也可以不同。我们希望将每件物品分配给其中一人，且没有人对另一人感到嫉妒，具体定义如下。\n\n如果 Bitek 分到的所有物品的总价值严格小于 Bajtyna 分到的所有物品总价值减去其中任意一个（尤其是价值最小的一个），则 Bitek 会嫉妒 Bajtyna。例如，考虑四件物品，对 Bitek 的价值分别为 $4, 3, 4, 8$。如果将前两个物品分配给 Bitek，Bitek 会嫉妒 Bajtyna，因为 $4 + 3 < 8$。如果将最后一个物品分配给 Bitek，他不会嫉妒 Bajtyna，因为 $8 \\geq 4 + 4$。\n\n类似地，我们定义 Bajtyna 何时会嫉妒 Bitek，对于这种情况我们计算的是 Bajtyna 分到的所有物品的总价值。\n\n请将所有物品分配给 Bajtyna 和 Bitek，使得没有人会嫉妒对方。", "inputFormat": "输入的第一行包含一个整数 $n (1 \\leq n \\leq 5\\cdot 10^5)$，表示物品的数量。第二行包含 $n$ 个整数 $a_{1}, a_{2}, \\ldots, a_{n} (1 \\leq a_{i} \\leq 10^9)$，表示每件物品对 Bajtyna 的价值。第三行包含 $n$ 个整数 $b_{1}, b_{2}, \\ldots, b_{n} (1 \\leq b_{i} \\leq 10^9)$，表示每件物品对 Bitek 的价值。", "outputFormat": "在输出的第一行中，输出 $n$ 个用空格分隔的整数，描述满足条件的物品分配方案。第 $i$ 个数字应为 $0$，表示第 $i$ 件物品分配给 Bajtyna，或为 $1$，表示分配给 Bitek。可以假设总存在满足题目要求的分配方案。", "hint": "对于样例一，将第二和第三件物品分配给 Bajtyna，其他分配给 Bitek。Bajtyna 不会嫉妒 Bitek，因为 $5+9 \\geq 10$ 和 $5+9 \\geq 6$。Bitek 不会嫉妒 Bajtyna，因为 $4+4 \\geq 6$ 和 $4+4 \\geq 8$。\n\n对于样例二，该样例满足 $n=6,a_i=7-i,b_i=i$。\n\n对于样例三，该样例满足 $n=12, a_{i}=1, b_{i}=2$。\n\n对于样例四，该样例满足 $n=5\\cdot 10^5, a_{i}=b_{i}=10^9$。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :----------- | :----------- | :----------- |\n| $1$ | $n \\leq 10$ | $9$ |\n| $2$ | $n \\leq 20$ | $10$ |\n| $3$ | $a_i=b_i$ | $40$ |\n| $4$ | $n \\leq 1000$ | $15$ |\n| $5$ | 无特殊性质 | $26$ |\n\n子任务 $0$ 为样例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2024/2025 R1] Sprawiedliwy podział", "background": "原题译自 [POI 2024/2025 R1 Sprawiedliwy podział](https://sio2.mimuw.edu.pl/c/oi32-1/p/spr/)。", "description": "Bajtyna 和 Bitek 需要分配他们拥有的 $n$ 件物品。对于每件物品，我们知道其对 Bajtyna 和 Bitek 的价值；这两个价值可以相同，也可以不同。我们希望将每件物品分配给其中一人，且没有人对另一人感到嫉妒，具体定义如下。\n\n如果 Bitek 分到的所有物品的总价值严格小于 Bajtyna 分到的所有物品总价值减去其中任意一个（尤其是价值最小的一个），则 Bitek 会嫉妒 Bajtyna。例如，考虑四件物品，对 Bitek 的价值分别为 $4, 3, 4, 8$。如果将前两个物品分配给 Bitek，Bitek 会嫉妒 Bajtyna，因为 $4 + 3 < 8$。如果将最后一个物品分配给 Bitek，他不会嫉妒 Bajtyna，因为 $8 \\geq 4 + 4$。\n\n类似地，我们定义 Bajtyna 何时会嫉妒 Bitek，对于这种情况我们计算的是 Bajtyna 分到的所有物品的总价值。\n\n请将所有物品分配给 Bajtyna 和 Bitek，使得没有人会嫉妒对方。", "inputFormat": "输入的第一行包含一个整数 $n (1 \\leq n \\leq 5\\cdot 10^5)$，表示物品的数量。第二行包含 $n$ 个整数 $a_{1}, a_{2}, \\ldots, a_{n} (1 \\leq a_{i} \\leq 10^9)$，表示每件物品对 Bajtyna 的价值。第三行包含 $n$ 个整数 $b_{1}, b_{2}, \\ldots, b_{n} (1 \\leq b_{i} \\leq 10^9)$，表示每件物品对 Bitek 的价值。", "outputFormat": "在输出的第一行中，输出 $n$ 个用空格分隔的整数，描述满足条件的物品分配方案。第 $i$ 个数字应为 $0$，表示第 $i$ 件物品分配给 Bajtyna，或为 $1$，表示分配给 Bitek。可以假设总存在满足题目要求的分配方案。", "hint": "对于样例一，将第二和第三件物品分配给 Bajtyna，其他分配给 Bitek。Bajtyna 不会嫉妒 Bitek，因为 $5+9 \\geq 10$ 和 $5+9 \\geq 6$。Bitek 不会嫉妒 Bajtyna，因为 $4+4 \\geq 6$ 和 $4+4 \\geq 8$。\n\n对于样例二，该样例满足 $n=6,a_i=7-i,b_i=i$。\n\n对于样例三，该样例满足 $n=12, a_{i}=1, b_{i}=2$。\n\n对于样例四，该样例满足 $n=5\\cdot 10^5, a_{i}=b_{i}=10^9$。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :----------- | :----------- | :----------- |\n| $1$ | $n \\leq 10$ | $9$ |\n| $2$ | $n \\leq 20$ | $10$ |\n| $3$ | $a_i=b_i$ | $40$ |\n| $4$ | $n \\leq 1000$ | $15$ |\n| $5$ | 无特殊性质 | $26$ |\n\n子任务 $0$ 为样例。", "locale": "zh-CN"}}}
{"pid": "P11384", "type": "P", "difficulty": 1, "samples": [["3 7", "4"], ["1 10", "8"], ["2 1000000", "999998"], ["1 1000000000", "1000000000"], ["32 1000000000000000000", "999999999999999968"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["POI（波兰）", "2024"], "title": "[POI 2024/2025 R1] Usuwanie", "background": "原题译自 [POI 2024/2025 R1 Usuwanie](https://sio2.mimuw.edu.pl/c/oi32-1/p/usu/)。", "description": "Bajtazar 喜欢玩以下单人游戏。在一块板上写下从 $a$ 到 $b$ 的所有自然数，形成一个序列：\n\n$$a, a+1, a+2, \\ldots, b-1, b$$\n然后进行零次或多次操作。在每次操作中，选择两个仍在板上的数，并且这两个数的和是偶数。将选择的两个数从板上移除。游戏的目标是移除尽可能多的元素。帮助 Bajtazar 计算可以移除的最大元素数量。", "inputFormat": "输入一行包含两个自然数 $a$ 和 $b\\ (1 \\leq a \\leq b \\leq 10^{18})$，表示序列的起始和结束数字。", "outputFormat": "输出一行，包含可以按上述方式移除的序列元素的最大数量。", "hint": "对于样例一，移除 $3\\ 5$ 和 $4\\ 6$。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :----------- |\n| $1$ | $a,b\\leq 10$ | $11$ |\n| $2$ | $a,b\\leq 10^6$ | $21$ |\n| $3$ | $a=1$ | $32$ |\n| $4$ |无特殊性质 | $36$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2024/2025 R1] Usuwanie", "background": "原题译自 [POI 2024/2025 R1 Usuwanie](https://sio2.mimuw.edu.pl/c/oi32-1/p/usu/)。", "description": "Bajtazar 喜欢玩以下单人游戏。在一块板上写下从 $a$ 到 $b$ 的所有自然数，形成一个序列：\n\n$$a, a+1, a+2, \\ldots, b-1, b$$\n然后进行零次或多次操作。在每次操作中，选择两个仍在板上的数，并且这两个数的和是偶数。将选择的两个数从板上移除。游戏的目标是移除尽可能多的元素。帮助 Bajtazar 计算可以移除的最大元素数量。", "inputFormat": "输入一行包含两个自然数 $a$ 和 $b\\ (1 \\leq a \\leq b \\leq 10^{18})$，表示序列的起始和结束数字。", "outputFormat": "输出一行，包含可以按上述方式移除的序列元素的最大数量。", "hint": "对于样例一，移除 $3\\ 5$ 和 $4\\ 6$。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :----------- |\n| $1$ | $a,b\\leq 10$ | $11$ |\n| $2$ | $a,b\\leq 10^6$ | $21$ |\n| $3$ | $a=1$ | $32$ |\n| $4$ |无特殊性质 | $36$ |\n", "locale": "zh-CN"}}}
{"pid": "P11385", "type": "P", "difficulty": 3, "samples": [["4\n1 4\n2 2\n3 3\n4 1", "TAK"], ["2\n1 1\n2 2", "NIE"], ["见下发 wal1ocen.in", "见下发 wal1ocen.out"], ["见下发 wal2ocen.in", "见下发 wal2ocen.out"], ["见下发 wal3ocen.in", "见下发 wal3ocen.out"], ["见下发 wal4ocen.in", "见下发 wal4ocen.out"], ["见下发 wal5ocen.in", "见下发 wal5ocen.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["POI（波兰）", "2024"], "title": "[POI 2024/2025 R1] Walki robotów", "background": "原题译自 [POI 2024/2025 R1 Walki robotów](https://sio2.mimuw.edu.pl/c/oi32-1/p/wal/)。", "description": "在 Bajtocji 正在进行一场大型年度机器人锦标赛，其中有 $n$ 个机器人参赛，它们的编号从 $1$ 到 $n$。第 $i$ 个机器人由两个参数描述，$s_{i}$ 和 $z_{i}\\ (1 \\leq s_{i}, z_{i} \\leq n)$，分别表示机器人的力量和敏捷度。力量值 $s_{i}$ 各不相同。敏捷度值 $z_{i}$ 也各不相同。\n\n锦标赛由一系列单挑比赛组成。在每场比赛中，两个尚未被淘汰的机器人进行对决。在第 $i$ 个机器人对战第 $j$ 个机器人的比赛中，如果 $s_{i}>s_{j}$ 或 $z_{i}>z_{j}$，那么第 $i$ 个机器人将淘汰第 $j$ 个机器人。相应地，如果 $s_{i}<s_{j}$ 或 $z_{i}<z_{j}$，那么第 $j$ 个机器人将淘汰第 $i$ 个机器人。请注意，这意味着在同一场比赛中可能会有两个机器人都被淘汰。如果某个机器人没有在比赛中被淘汰，它可以继续参与后续比赛。\n\n只有当最终所有机器人都被淘汰时，锦标赛的直播收视率才能最高。你的任务是检查是否可以安排一系列比赛，使得最终所有机器人都被淘汰。", "inputFormat": "输入的第一行包含一个整数 $n\\ (1 \\leq n \\leq 2\\cdot 10^5)$。接下来的 $n$ 行描述了机器人的信息。第 $i$ 个机器人的描述包含两个整数 $s_{i}$ 和 $z_{i}\\ (1 \\leq s_{i}, z_{i} \\leq n)$。保证 $s_{1}, s_{2}, \\ldots, s_{n}$ 互不相同。保证 $z_{1}, z_{2}, \\ldots, z_{n}$ 互不相同。即 $s,z$ 都是 $1 \\sim n$ 的两个排列。", "outputFormat": "如果可以安排一系列比赛，使得最终所有机器人都被淘汰，则输出 `TAK`。否则，输出 `NIE`。", "hint": "对于样例一，如果在第一场比赛中第一个和第二个机器人对决，第二场比赛中第三个和第四个机器人对决，那么所有机器人都将被淘汰。\n\n对于样例三，该样例满足 $n=8, s_{i}=i, z_{i}=n-i+1$。\n\n对于样例四，该样例满足 $n=20$，存在一个机器人可以击败所有其他机器人，并且没有机器人可以击败它。\n\n对于样例五，该样例满足 $n=500$，可以将所有机器人配对，使每对机器人互相淘汰。\n\n对于样例六，该样例满足 $n=200000, s_{i}=i$ 且 $z_{i}=i$ 对 $1 \\leq i \\leq \\frac{n}{2}$，并且 $s_{i}=i$ 且 $z_{i}=\\frac{3n}{2}-i+1$ 对 $\\frac{n}{2}<i \\leq n$。\n\n对于样例七，该样例满足 $n=5$。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :----------- |\n| $1$ | $n \\leq 8$ | $10$ |\n| $2$ | $n \\leq 20$ | $10$ |\n| $3$ | $n \\leq 1000$ | $30$ |\n| $4$ | 无特殊性质 | $50$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2024/2025 R1] Walki robotów", "background": "原题译自 [POI 2024/2025 R1 Walki robotów](https://sio2.mimuw.edu.pl/c/oi32-1/p/wal/)。", "description": "在 Bajtocji 正在进行一场大型年度机器人锦标赛，其中有 $n$ 个机器人参赛，它们的编号从 $1$ 到 $n$。第 $i$ 个机器人由两个参数描述，$s_{i}$ 和 $z_{i}\\ (1 \\leq s_{i}, z_{i} \\leq n)$，分别表示机器人的力量和敏捷度。力量值 $s_{i}$ 各不相同。敏捷度值 $z_{i}$ 也各不相同。\n\n锦标赛由一系列单挑比赛组成。在每场比赛中，两个尚未被淘汰的机器人进行对决。在第 $i$ 个机器人对战第 $j$ 个机器人的比赛中，如果 $s_{i}>s_{j}$ 或 $z_{i}>z_{j}$，那么第 $i$ 个机器人将淘汰第 $j$ 个机器人。相应地，如果 $s_{i}<s_{j}$ 或 $z_{i}<z_{j}$，那么第 $j$ 个机器人将淘汰第 $i$ 个机器人。请注意，这意味着在同一场比赛中可能会有两个机器人都被淘汰。如果某个机器人没有在比赛中被淘汰，它可以继续参与后续比赛。\n\n只有当最终所有机器人都被淘汰时，锦标赛的直播收视率才能最高。你的任务是检查是否可以安排一系列比赛，使得最终所有机器人都被淘汰。", "inputFormat": "输入的第一行包含一个整数 $n\\ (1 \\leq n \\leq 2\\cdot 10^5)$。接下来的 $n$ 行描述了机器人的信息。第 $i$ 个机器人的描述包含两个整数 $s_{i}$ 和 $z_{i}\\ (1 \\leq s_{i}, z_{i} \\leq n)$。保证 $s_{1}, s_{2}, \\ldots, s_{n}$ 互不相同。保证 $z_{1}, z_{2}, \\ldots, z_{n}$ 互不相同。即 $s,z$ 都是 $1 \\sim n$ 的两个排列。", "outputFormat": "如果可以安排一系列比赛，使得最终所有机器人都被淘汰，则输出 `TAK`。否则，输出 `NIE`。", "hint": "对于样例一，如果在第一场比赛中第一个和第二个机器人对决，第二场比赛中第三个和第四个机器人对决，那么所有机器人都将被淘汰。\n\n对于样例三，该样例满足 $n=8, s_{i}=i, z_{i}=n-i+1$。\n\n对于样例四，该样例满足 $n=20$，存在一个机器人可以击败所有其他机器人，并且没有机器人可以击败它。\n\n对于样例五，该样例满足 $n=500$，可以将所有机器人配对，使每对机器人互相淘汰。\n\n对于样例六，该样例满足 $n=200000, s_{i}=i$ 且 $z_{i}=i$ 对 $1 \\leq i \\leq \\frac{n}{2}$，并且 $s_{i}=i$ 且 $z_{i}=\\frac{3n}{2}-i+1$ 对 $\\frac{n}{2}<i \\leq n$。\n\n对于样例七，该样例满足 $n=5$。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :----------- |\n| $1$ | $n \\leq 8$ | $10$ |\n| $2$ | $n \\leq 20$ | $10$ |\n| $3$ | $n \\leq 1000$ | $30$ |\n| $4$ | 无特殊性质 | $50$ |", "locale": "zh-CN"}}}
{"pid": "P11386", "type": "P", "difficulty": 0, "samples": [["301", "17"], ["见下发 zam1ocen.in", "1"], ["见下发 zam2ocen.in", "6"], ["见下发 zam3ocen.in", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["POI（波兰）", "2024"], "title": "[POI 2024/2025 R1] Zamek cykliczny", "background": "原题译自 [POI 2024/2025 R1 Zamek cykliczny](https://sio2.mimuw.edu.pl/c/oi32-1/p/zam/)。", "description": "Bajtynka 收到了 Bajtazar 送给她的生日礼物——一个逻辑玩具，叫做循环锁。循环锁由两个按钮和一个显示屏组成。显示屏上可以显示任意大小的十进制数字，不含前导零。起始显示的数字由玩具软件设定。\n\n游戏目标是使显示的数字变成 $1$。为此可以使用两个按钮。按下第一个按钮，数字增加 $1$。按下第二个按钮，循环地将数字的十进制表示右移一位，使得最高位数字移动到最低位，然后移除所有前导零。\n\n例如，按下第一个按钮，数字 $99$ 变为 $100$。按下第二个按钮，数字 $143$ 变为 $431$，数字 $700523$ 变为 $5237$。\n\n现在，Bajtynka 想知道需要按下最少次数的按钮来解决这个谜题。你的任务是计算出这个次数。", "inputFormat": "输入的第一行包含一个数字 $n\\ (1 \\leq n \\leq 10^{1000000})$，表示当前显示的数字。", "outputFormat": "输出一个数字，表示解决这个谜题所需的最少按钮按压次数。", "hint": "对于样例一，按下第一个按钮 $8$ 次，此时玩具显示 $309$，  \n按下第二个按钮，此时玩具显示 $93$，  \n按下第一个按钮 $7$ 次，此时玩具显示 $100$，  \n按下第二个按钮，此时谜题解决。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :----------- |\n| $1$ | $n \\leq 10^5$ | $15$ |\n| $2$ | $n$ 的数位只包含 $0$ 和 $1$ | $20$ |\n| $3$ | $n \\leq 10^{1000}$ | $30$ |\n| $4$ | 无特殊性质 | $35$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2024/2025 R1] Zamek cykliczny", "background": "原题译自 [POI 2024/2025 R1 Zamek cykliczny](https://sio2.mimuw.edu.pl/c/oi32-1/p/zam/)。", "description": "Bajtynka 收到了 Bajtazar 送给她的生日礼物——一个逻辑玩具，叫做循环锁。循环锁由两个按钮和一个显示屏组成。显示屏上可以显示任意大小的十进制数字，不含前导零。起始显示的数字由玩具软件设定。\n\n游戏目标是使显示的数字变成 $1$。为此可以使用两个按钮。按下第一个按钮，数字增加 $1$。按下第二个按钮，循环地将数字的十进制表示右移一位，使得最高位数字移动到最低位，然后移除所有前导零。\n\n例如，按下第一个按钮，数字 $99$ 变为 $100$。按下第二个按钮，数字 $143$ 变为 $431$，数字 $700523$ 变为 $5237$。\n\n现在，Bajtynka 想知道需要按下最少次数的按钮来解决这个谜题。你的任务是计算出这个次数。", "inputFormat": "输入的第一行包含一个数字 $n\\ (1 \\leq n \\leq 10^{1000000})$，表示当前显示的数字。", "outputFormat": "输出一个数字，表示解决这个谜题所需的最少按钮按压次数。", "hint": "对于样例一，按下第一个按钮 $8$ 次，此时玩具显示 $309$，  \n按下第二个按钮，此时玩具显示 $93$，  \n按下第一个按钮 $7$ 次，此时玩具显示 $100$，  \n按下第二个按钮，此时谜题解决。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :----------- |\n| $1$ | $n \\leq 10^5$ | $15$ |\n| $2$ | $n$ 的数位只包含 $0$ 和 $1$ | $20$ |\n| $3$ | $n \\leq 10^{1000}$ | $30$ |\n| $4$ | 无特殊性质 | $35$ |\n", "locale": "zh-CN"}}}
{"pid": "P11387", "type": "P", "difficulty": 1, "samples": [["IOHRV111111111233333333333<<<<\n0102032M2202022HRV<<<<<<<<<<<5\nTONI<<HONI<<<<<<<<<<<<<<<<<<<<", "Ime: Toni\nPrezime: Honi\nDatum rodjenja: 03-02-2001\nOIB: 33333333333"], ["IOHRV123456789012345678901<<<<\n9803049F2401059HRV<<<<<<<<<<<2\nPAJO<<PATAK<<<<<<<<<<<<<<<<<<<", "Ime: Pajo\nPrezime: Patak\nDatum rodjenja: 04-03-1998\nOIB: 12345678901"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #1] 身份证 / Osobna", "background": "译自 [COCI 2024/2025 #1](https://hsin.hr/coci/) T1。$\\texttt{1s,0.5G}$。满分为 $50$。", "description": "\n![](https://cdn.luogu.com.cn/upload/image_hosting/0h9xl0sa.png)\n\n\n一张身份证上信息的格式如图所示。\n\n第一行由 $5$ 个字母，$21$ 个数字和 $4$ 个 $\\texttt{<}$ 组成。最后 $11$ 位数字为**校验码**。\n\n第二行的前两位数字为**出生年**，特别地，若出生年 $\\le 24$，则表示是在 $21$ 世纪出生的；否则表示在 $20$ 世纪出生的。\n\n第二行的出生年后两位数字表示**出生月**，出生月后两位数字表示**出生日**。\n\n第三行，先是持有人的**名**，接着是两个 $\\texttt{<}$，再是持有者的**姓**，都是大写字母。如果不满 $30$ 个字符，则用 $\\texttt{<}$ 填充。\n\n你需要按照规定的格式输出这些信息。", "inputFormat": "\n见【题目描述】。\n", "outputFormat": "第一行，输出 $\\texttt{Ime:}$，后加一个空格，然后输出持有者的**名**，首字母大写，其余字母小写。\n\n第二行，输出 $\\texttt{Prezime:}$，后加一个空格，然后输出持有者的**姓**，首字母大写，其余字母小写。\n\n第三行，输出 $\\texttt{Datum rodjenja:}$，后加一个空格，然后按照 $\\texttt{DD-MM-YYYY}$ 的格式输出出生日期，其中 $\\texttt{DD}$ 表示出生日，$\\texttt{MM}$ 表示出生月，$\\texttt{YYYY}$ 表示出生年（四位数）。\n\n第四行，输出 $\\texttt{OIB:}$，后加一个空格，然后输出校验码。", "hint": "\n| 子任务编号 | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | A    |   $ 25 $   |  \n| $ 2 $    | B   |  $ 15 $   |  \n| $ 3 $    |  | $ 10 $   |\n\n- 特殊性质 A：名和姓都只由一个字母组成。\n- 特殊性质 B：出生年份在 $[2000,2024]$ 间。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #1] 身份证 / Osobna", "background": "译自 [COCI 2024/2025 #1](https://hsin.hr/coci/) T1。$\\texttt{1s,0.5G}$。满分为 $50$。", "description": "\n![](https://cdn.luogu.com.cn/upload/image_hosting/0h9xl0sa.png)\n\n\n一张身份证上信息的格式如图所示。\n\n第一行由 $5$ 个字母，$21$ 个数字和 $4$ 个 $\\texttt{<}$ 组成。最后 $11$ 位数字为**校验码**。\n\n第二行的前两位数字为**出生年**，特别地，若出生年 $\\le 24$，则表示是在 $21$ 世纪出生的；否则表示在 $20$ 世纪出生的。\n\n第二行的出生年后两位数字表示**出生月**，出生月后两位数字表示**出生日**。\n\n第三行，先是持有人的**名**，接着是两个 $\\texttt{<}$，再是持有者的**姓**，都是大写字母。如果不满 $30$ 个字符，则用 $\\texttt{<}$ 填充。\n\n你需要按照规定的格式输出这些信息。", "inputFormat": "\n见【题目描述】。\n", "outputFormat": "第一行，输出 $\\texttt{Ime:}$，后加一个空格，然后输出持有者的**名**，首字母大写，其余字母小写。\n\n第二行，输出 $\\texttt{Prezime:}$，后加一个空格，然后输出持有者的**姓**，首字母大写，其余字母小写。\n\n第三行，输出 $\\texttt{Datum rodjenja:}$，后加一个空格，然后按照 $\\texttt{DD-MM-YYYY}$ 的格式输出出生日期，其中 $\\texttt{DD}$ 表示出生日，$\\texttt{MM}$ 表示出生月，$\\texttt{YYYY}$ 表示出生年（四位数）。\n\n第四行，输出 $\\texttt{OIB:}$，后加一个空格，然后输出校验码。", "hint": "\n| 子任务编号 | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | A    |   $ 25 $   |  \n| $ 2 $    | B   |  $ 15 $   |  \n| $ 3 $    |  | $ 10 $   |\n\n- 特殊性质 A：名和姓都只由一个字母组成。\n- 特殊性质 B：出生年份在 $[2000,2024]$ 间。", "locale": "zh-CN"}}}
{"pid": "P11388", "type": "P", "difficulty": 2, "samples": [["5 2\n5 4 8 7 2", "1 1 0 1 1"], ["5 3\n10 15 14 8 9", "1 0 0 1 1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["二分", "2024", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #1] 飞跃 / Skokovi", "background": "\n译自 [COCI 2024/2025 #1](https://hsin.hr/coci/) T2。$\\texttt{5s,0.5G}$。满分为 $75$。", "description": "\n有 $n$ 朵花，此外有一个正整数 $k$。第 $i$ 朵花的高度为 $a_i$。\n\n一开始，Filip 在第 $1$ 朵花上。\n\n当她在第 $i$ 朵花上时，她可以飞跃到第 $j$ 朵花上，当且仅当：\n\n- $i\\lt j$；\n- $|a_i-a_j|\\le k$。\n\nFilip 想要知道她能够飞跃到哪些花上。", "inputFormat": "\n第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个正整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "\n$n$ 个整数，第 $i$ 个整数为 $\\texttt{0}$，代表不能跳到第 $i$ 朵花上；第 $i$ 个整数为 $\\texttt{1}$，代表可以跳到第 $i$ 朵花上。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 2\\times 10^5$；\n- $1\\le a_i,k\\le 10^9$。\n\n\n| 子任务编号 | $n\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $2\\times 10^5$ | A    |   $ 25 $   |  \n| $ 2 $    | $10^3$ |   |  $ 25 $   |  \n| $ 3 $    | $2\\times 10^5$  | | $ 25 $   |\n\n- 特殊性质 A：$\\forall 1\\le i\\lt n$，$a_i\\lt a_{i+1}$。\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #1] 飞跃 / Skokovi", "background": "\n译自 [COCI 2024/2025 #1](https://hsin.hr/coci/) T2。$\\texttt{5s,0.5G}$。满分为 $75$。", "description": "\n有 $n$ 朵花，此外有一个正整数 $k$。第 $i$ 朵花的高度为 $a_i$。\n\n一开始，Filip 在第 $1$ 朵花上。\n\n当她在第 $i$ 朵花上时，她可以飞跃到第 $j$ 朵花上，当且仅当：\n\n- $i\\lt j$；\n- $|a_i-a_j|\\le k$。\n\nFilip 想要知道她能够飞跃到哪些花上。", "inputFormat": "\n第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个正整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "\n$n$ 个整数，第 $i$ 个整数为 $\\texttt{0}$，代表不能跳到第 $i$ 朵花上；第 $i$ 个整数为 $\\texttt{1}$，代表可以跳到第 $i$ 朵花上。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 2\\times 10^5$；\n- $1\\le a_i,k\\le 10^9$。\n\n\n| 子任务编号 | $n\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $2\\times 10^5$ | A    |   $ 25 $   |  \n| $ 2 $    | $10^3$ |   |  $ 25 $   |  \n| $ 3 $    | $2\\times 10^5$  | | $ 25 $   |\n\n- 特殊性质 A：$\\forall 1\\le i\\lt n$，$a_i\\lt a_{i+1}$。\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11389", "type": "P", "difficulty": 3, "samples": [["3\n1 2\n1 3\n3\n1 2\n1 2\n1 3", "DA\nDA\nDA\nDA"], ["4\n2 1\n2 3\n1 4\n4\n4 1\n4 1\n3 2\n1 4", "DA\nNE\nDA\nDA\nNE"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #1] 等级 / Hijerarhija", "background": "\n译自 [COCI 2024/2025 #1](https://hsin.hr/coci/) T3。$\\texttt{3s,0.5G}$。满分为 $90$。", "description": "\n有 $n$ 个节点，给定 $(n-1)$ 对点之间的父子关系。\n\n有 $m$ 个修改，每次给定一对父子，将它们的关系反转（即，原来的父亲变成儿子，儿子变成父亲）。\n\n在第一次修改前，和每次修改后，输出这张图是否是一棵有根树。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $(n-1)$ 行，每行两个正整数 $u,v$，表示 $u$ 是 $v$ 的父亲。\n\n接下来一行，一个正整数 $m$。\n\n接下来 $m$ 行，每行两个正整数 $u,v$，表示一次修改。保证 $u,v$ 是父子关系。", "outputFormat": "\n输出 $(m+1)$ 行：\n\n在对应时刻，若是有根树，输出 $\\texttt{DA}$（克罗地亚语「是」）；否则输出 $\\texttt{NE}$（克罗地亚语「否」）。\n\n**保证至少有一个回答是 $\\texttt{DA}$**。", "hint": "对于 $100\\%$ 的数据，保证：\n\n- $2\\le n\\le 3\\times 10^5$；    \n- $0\\le m\\le 10^6$；\n- $1\\le u,v\\le n$，$u\\neq v$。\n- **至少有一个回答是 $\\texttt{DA}$**。\n\n\n| 子任务编号 | $n,m\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $300$ | A    |   $ 7 $   |  \n| $ 2 $    | $300$ |  |  $ 12 $   |  \n| $ 3 $    | $10^3$  |  | $ 16 $   |\n| $ 4 $    | $3\\times 10^5$  | A | $ 15 $   |\n| $ 5 $    | $3\\times 10^5$  | B | $ 23 $   |\n| $ 6 $    | $3\\times 10^5$  | | $ 17 $   |\n\n- 特殊性质 A：$m=0$。\n- 特殊性质 B：对于 $\\forall 1\\le i\\lt n$，$(i,i+1)$ 间有父子关系。\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #1] 等级 / Hijerarhija", "background": "\n译自 [COCI 2024/2025 #1](https://hsin.hr/coci/) T3。$\\texttt{3s,0.5G}$。满分为 $90$。", "description": "\n有 $n$ 个节点，给定 $(n-1)$ 对点之间的父子关系。\n\n有 $m$ 个修改，每次给定一对父子，将它们的关系反转（即，原来的父亲变成儿子，儿子变成父亲）。\n\n在第一次修改前，和每次修改后，输出这张图是否是一棵有根树。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $(n-1)$ 行，每行两个正整数 $u,v$，表示 $u$ 是 $v$ 的父亲。\n\n接下来一行，一个正整数 $m$。\n\n接下来 $m$ 行，每行两个正整数 $u,v$，表示一次修改。保证 $u,v$ 是父子关系。", "outputFormat": "\n输出 $(m+1)$ 行：\n\n在对应时刻，若是有根树，输出 $\\texttt{DA}$（克罗地亚语「是」）；否则输出 $\\texttt{NE}$（克罗地亚语「否」）。\n\n**保证至少有一个回答是 $\\texttt{DA}$**。", "hint": "对于 $100\\%$ 的数据，保证：\n\n- $2\\le n\\le 3\\times 10^5$；    \n- $0\\le m\\le 10^6$；\n- $1\\le u,v\\le n$，$u\\neq v$。\n- **至少有一个回答是 $\\texttt{DA}$**。\n\n\n| 子任务编号 | $n,m\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $300$ | A    |   $ 7 $   |  \n| $ 2 $    | $300$ |  |  $ 12 $   |  \n| $ 3 $    | $10^3$  |  | $ 16 $   |\n| $ 4 $    | $3\\times 10^5$  | A | $ 15 $   |\n| $ 5 $    | $3\\times 10^5$  | B | $ 23 $   |\n| $ 6 $    | $3\\times 10^5$  | | $ 17 $   |\n\n- 特殊性质 A：$m=0$。\n- 特殊性质 B：对于 $\\forall 1\\le i\\lt n$，$(i,i+1)$ 间有父子关系。\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11390", "type": "P", "difficulty": 6, "samples": [["3 1\n1 2 1", "6"], ["6 3\n6 5 6 4 5 5", "1"], ["6 2\n5 4 5 2 6 5", "5"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["线段树", "2024", "容斥原理", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #1] 教师 / Učiteljica", "background": "译自 [COCI 2024/2025 #1](https://hsin.hr/coci/) T4。$\\texttt{5s,0.5G}$。满分为 $120$。", "description": "给定长度为 $n$ 的正整数序列 $a_1,a_2,\\cdots,a_n$。给定常数 $k$。\n\n求出满足以下条件的二元组 $(l,r)$ 的数量：\n\n- $1\\le l\\le r\\le n$；\n- 对于任意 $1\\le i\\le k$，都存在一个数 $x$，使得 $x$ 在 $a_l,a_{l+1},\\ldots,a_r$ 间出现**恰好** $i$ 次。", "inputFormat": "\n第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个正整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "\n输出一行一个整数，表示答案。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 10^5$；    \n- $1\\le k\\le 4$；\n- $1\\le a_i\\le n$。\n\n\n| 子任务编号 | $n\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $10^3$ |  |   $ 20 $   |  \n| $ 2 $    | $10^5$ | A  |  $ 15 $   |  \n| $ 3 $    | $10^5$ | B  |  $ 35 $   |  \n| $ 4 $    | $10^5$ |  |  $ 50 $   |  \n\n- 特殊性质 A：$1\\le a_i\\le k$。\n- 特殊性质 B：$k=1$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #1] 教师 / Učiteljica", "background": "译自 [COCI 2024/2025 #1](https://hsin.hr/coci/) T4。$\\texttt{5s,0.5G}$。满分为 $120$。", "description": "给定长度为 $n$ 的正整数序列 $a_1,a_2,\\cdots,a_n$。给定常数 $k$。\n\n求出满足以下条件的二元组 $(l,r)$ 的数量：\n\n- $1\\le l\\le r\\le n$；\n- 对于任意 $1\\le i\\le k$，都存在一个数 $x$，使得 $x$ 在 $a_l,a_{l+1},\\ldots,a_r$ 间出现**恰好** $i$ 次。", "inputFormat": "\n第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个正整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "\n输出一行一个整数，表示答案。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 10^5$；    \n- $1\\le k\\le 4$；\n- $1\\le a_i\\le n$。\n\n\n| 子任务编号 | $n\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $10^3$ |  |   $ 20 $   |  \n| $ 2 $    | $10^5$ | A  |  $ 15 $   |  \n| $ 3 $    | $10^5$ | B  |  $ 35 $   |  \n| $ 4 $    | $10^5$ |  |  $ 50 $   |  \n\n- 特殊性质 A：$1\\le a_i\\le k$。\n- 特殊性质 B：$k=1$。\n\n", "locale": "zh-CN"}}}
{"pid": "P11391", "type": "P", "difficulty": 6, "samples": [["4 \n1 3", "3"], ["5\n1 3\n3 5", "6"], ["6\n2 4\n4 6\n6 2", "11"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "树形 DP", "COCI（克罗地亚）"], "title": "[COCI 2024/2025 #1] 疑惑 / Zbunjenost", "background": "译自 [COCI 2024/2025 #1](https://hsin.hr/coci/) T5。$\\texttt{5s,0.5G}$。满分为 $120$。", "description": "给定一个 $n$ 个顶点的凸包和它的三角剖分。\n\n可以认为点按照顺时针顺序标号 $1\\sim n$，也就是说，$\\forall 1\\le i\\le n$，点 $i$ 和点 $(i\\bmod n+1)$ 间有边相连。\n\n定义一条长度为 $m$（$m\\ge 3$）的**简单回路** $a_0,a_1,\\cdots,a_{m-1}$ 为满足以下条件的序列：\n\n- $\\forall i\\in [0,m)$，$1\\le a_i\\le n$；\n- $\\forall 0\\le i\\lt j\\lt m$，$a_i\\neq a_j$；\n- $\\forall i\\in [0,m)$，顶点 $a_i,a_{(i+1)\\bmod m}$ 间有边相连。\n\n\n定义两条回路**本质相同**，当且仅当一条回路可以通过翻转（reverse）或者循环移位或者翻转+循环移位得到另一条回路。\n\n求出凸包内本质不同的回路条数，对 $(10^9+7)$ 取模。", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $(n-3)$ 行，每行两个正整数 $x,y$，描述三角剖分的一条边。", "outputFormat": "\n输出一行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。", "hint": "\n#### 样例解释\n\n- 样例 $1$ 解释：$[1,2,3]$，$[1,4,3]$，$[1,2,3,4]$ 是合法的回路。\n- 样例 $2$ 解释：$[1, 2, 3]$，$[1, 3, 5]$，$[3, 4, 5]$，$[1, 2, 3, 5]$，$[1, 3, 4, 5]$，$[1, 2, 3, 4, 5]$ 是合法的回路。\n- 样例 $3$ 解释：$[1, 2, 6]$，$[2, 3, 4]$，$[4, 5, 6]$，$[2, 4, 6]$，$[1, 2, 4, 6]$，$[2, 3, 4, 6]$，$[2, 4, 5, 6]$，$[1, 2, 3, 4, 6]$，$[2, 3, 4, 5, 6]$，$[1, 2, 4, 5, 6]$，$[1, 2, 3, 4, 5, 6]$ 是合法的回路。\n\n#### 子任务\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 2\\times 10^5$；  \n- 给定的是合法三角剖分。\n\n\n| 子任务编号 | $n\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $15$ |  |   $ 13 $   |  \n| $ 2 $    | $300$ |   |  $ 18 $   |  \n| $ 3 $    | $2\\times 10^3$ |   |  $ 34 $   |  \n| $ 4 $    | $2\\times 10^5$ | A  |  $ 15 $   |  \n| $ 5 $    | $2\\times 10^5$ |  |  $ 40 $   |  \n\n- 特殊性质 A：$\\forall 3\\le i\\le n-1$，点 $1$ 与点 $i$ 间有边相连。\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2024/2025 #1] 疑惑 / Zbunjenost", "background": "译自 [COCI 2024/2025 #1](https://hsin.hr/coci/) T5。$\\texttt{5s,0.5G}$。满分为 $120$。", "description": "给定一个 $n$ 个顶点的凸包和它的三角剖分。\n\n可以认为点按照顺时针顺序标号 $1\\sim n$，也就是说，$\\forall 1\\le i\\le n$，点 $i$ 和点 $(i\\bmod n+1)$ 间有边相连。\n\n定义一条长度为 $m$（$m\\ge 3$）的**简单回路** $a_0,a_1,\\cdots,a_{m-1}$ 为满足以下条件的序列：\n\n- $\\forall i\\in [0,m)$，$1\\le a_i\\le n$；\n- $\\forall 0\\le i\\lt j\\lt m$，$a_i\\neq a_j$；\n- $\\forall i\\in [0,m)$，顶点 $a_i,a_{(i+1)\\bmod m}$ 间有边相连。\n\n\n定义两条回路**本质相同**，当且仅当一条回路可以通过翻转（reverse）或者循环移位或者翻转+循环移位得到另一条回路。\n\n求出凸包内本质不同的回路条数，对 $(10^9+7)$ 取模。", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $(n-3)$ 行，每行两个正整数 $x,y$，描述三角剖分的一条边。", "outputFormat": "\n输出一行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。", "hint": "\n#### 样例解释\n\n- 样例 $1$ 解释：$[1,2,3]$，$[1,4,3]$，$[1,2,3,4]$ 是合法的回路。\n- 样例 $2$ 解释：$[1, 2, 3]$，$[1, 3, 5]$，$[3, 4, 5]$，$[1, 2, 3, 5]$，$[1, 3, 4, 5]$，$[1, 2, 3, 4, 5]$ 是合法的回路。\n- 样例 $3$ 解释：$[1, 2, 6]$，$[2, 3, 4]$，$[4, 5, 6]$，$[2, 4, 6]$，$[1, 2, 4, 6]$，$[2, 3, 4, 6]$，$[2, 4, 5, 6]$，$[1, 2, 3, 4, 6]$，$[2, 3, 4, 5, 6]$，$[1, 2, 4, 5, 6]$，$[1, 2, 3, 4, 5, 6]$ 是合法的回路。\n\n#### 子任务\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le 2\\times 10^5$；  \n- 给定的是合法三角剖分。\n\n\n| 子任务编号 | $n\\le$ |  特殊性质 | 得分 |  \n| :--: | :--: | :--: |:--: | \n| $ 1 $    | $15$ |  |   $ 13 $   |  \n| $ 2 $    | $300$ |   |  $ 18 $   |  \n| $ 3 $    | $2\\times 10^3$ |   |  $ 34 $   |  \n| $ 4 $    | $2\\times 10^5$ | A  |  $ 15 $   |  \n| $ 5 $    | $2\\times 10^5$ |  |  $ 40 $   |  \n\n- 特殊性质 A：$\\forall 3\\le i\\le n-1$，点 $1$ 与点 $i$ 间有边相连。\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11392", "type": "P", "difficulty": 6, "samples": [["5\n5 2 1 5 3\n3\n1 4\n2 5\n1 5", "12\n9\n12"], ["5\n5 4 4 5 4\n1\n1 5", "14"], ["15\n12 96 100 61 54 66 37 34 58 21 21 1 13 50 81\n12\n1 15\n3 12\n11 14\n1 13\n5 9\n4 6\n6 14\n2 5\n4 15\n1 7\n1 10\n8 13", "277\n227\n72\n262\n178\n181\n174\n257\n208\n262\n262\n113"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2019", "线段树", "JOI（日本）", "单调栈"], "title": "[JOI Open 2019] 三级跳 / Triple Jump", "background": null, "description": "**译自 [JOI Open 2019](https://contests.ioi-jp.org/open-2019/index.html) T1 「三段跳び」**\n\n有一条路，包含 $N$ 段，编号 $1\\sim N$。第 $i$ 段有一个强度 $A_i$。\n\nJOI 君，有天赋的体育明星，准备来三段跳。一个三段跳包含三次连续的跳跃。令 $a,b,c$ 分别表示 JOI-kun 三次起跳的段编号，他们需要满足以下条件。\n\n- $a<b<c$。含义是每次起跳的编号需要递增。\n- $b-a\\le c-b$。含义是第一次起跳跨越的距离需要小于等于第二次的。\n\nJOI 君准备进行 $Q$ 次三段跳。在第 $j$ 次（$1\\le j\\le Q$）中，他需要在区间 $[L_j,R_j]$ 中的编号起跳，也就是要满足 $L_j\\le a<b<c\\le R_j$。\n\nJOI 君 想要选择恰当的位置起跳。对于每次三段跳，JOI 君想知道他起跳的这些位置的强度和，最大是多少。\n\n写一个程序，给定段数和三段跳的信息。对于每个三段跳，计算他起跳的这些位置的强度和，最大是多少。", "inputFormat": "第 $1$ 行 $1$ 个整数 $N$。\n\n第 $2$ 行 $N$ 个整数，代表 $A_1,A_2,\\cdots,A_n$。\n\n第 $3$ 行 $1$ 个整数 $Q$。\n\n第 $4\\sim 4+Q-1$ 行，每行两个整数 $L_i,R_i$。", "outputFormat": "输出 $Q$ 行。每行输出一个整数，表示答案。", "hint": "#### 样例解释：\n\n在第一次跳跃中，JOI 君可以选择 $1,2,4$ 段，从而达到最大加和 $12$。\n\n在第二次跳跃中，JOI 君可以选择 $3,4,5$ 段，从而达到最大加和 $9$。如果选择 $2,4,5$，虽然和是 $10$，但是 $b-a\\le c-b$ 没有满足。\n\n在第三次跳跃中，JOI 君可以选择 $1,2,4$ 段，从而达到最大加和 $12$。如果选择 $1,4,5$，虽然和是 $13$，但是 $b-a\\le c-b$ 没有满足。\n\n#### 数据范围：\n\n- $3 \\le N \\le 5 \\times 10^5$。\n- $1 \\le A_i \\le 10^8 (1 \\le i \\le N)$。\n- $1 \\le Q \\le 5 \\times 10^5$。\n- $1 \\le L_j < L_j + 2 \\le R_j \\le N (1 \\le j \\le Q)$。\n\n#### 子任务：\n\n1. （5 分）$N\\le 100$，$Q\\le 100$。\n2. （14 分）$N\\le 5000$。\n3. （27 分）$N\\le 2\\times 10^5$，$Q=1$，$L_1=1$，$R_1=N$。\n4. （54 分）无额外约束。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2019] 三级跳 / Triple Jump", "background": null, "description": "**译自 [JOI Open 2019](https://contests.ioi-jp.org/open-2019/index.html) T1 「三段跳び」**\n\n有一条路，包含 $N$ 段，编号 $1\\sim N$。第 $i$ 段有一个强度 $A_i$。\n\nJOI 君，有天赋的体育明星，准备来三段跳。一个三段跳包含三次连续的跳跃。令 $a,b,c$ 分别表示 JOI-kun 三次起跳的段编号，他们需要满足以下条件。\n\n- $a<b<c$。含义是每次起跳的编号需要递增。\n- $b-a\\le c-b$。含义是第一次起跳跨越的距离需要小于等于第二次的。\n\nJOI 君准备进行 $Q$ 次三段跳。在第 $j$ 次（$1\\le j\\le Q$）中，他需要在区间 $[L_j,R_j]$ 中的编号起跳，也就是要满足 $L_j\\le a<b<c\\le R_j$。\n\nJOI 君 想要选择恰当的位置起跳。对于每次三段跳，JOI 君想知道他起跳的这些位置的强度和，最大是多少。\n\n写一个程序，给定段数和三段跳的信息。对于每个三段跳，计算他起跳的这些位置的强度和，最大是多少。", "inputFormat": "第 $1$ 行 $1$ 个整数 $N$。\n\n第 $2$ 行 $N$ 个整数，代表 $A_1,A_2,\\cdots,A_n$。\n\n第 $3$ 行 $1$ 个整数 $Q$。\n\n第 $4\\sim 4+Q-1$ 行，每行两个整数 $L_i,R_i$。", "outputFormat": "输出 $Q$ 行。每行输出一个整数，表示答案。", "hint": "#### 样例解释：\n\n在第一次跳跃中，JOI 君可以选择 $1,2,4$ 段，从而达到最大加和 $12$。\n\n在第二次跳跃中，JOI 君可以选择 $3,4,5$ 段，从而达到最大加和 $9$。如果选择 $2,4,5$，虽然和是 $10$，但是 $b-a\\le c-b$ 没有满足。\n\n在第三次跳跃中，JOI 君可以选择 $1,2,4$ 段，从而达到最大加和 $12$。如果选择 $1,4,5$，虽然和是 $13$，但是 $b-a\\le c-b$ 没有满足。\n\n#### 数据范围：\n\n- $3 \\le N \\le 5 \\times 10^5$。\n- $1 \\le A_i \\le 10^8 (1 \\le i \\le N)$。\n- $1 \\le Q \\le 5 \\times 10^5$。\n- $1 \\le L_j < L_j + 2 \\le R_j \\le N (1 \\le j \\le Q)$。\n\n#### 子任务：\n\n1. （5 分）$N\\le 100$，$Q\\le 100$。\n2. （14 分）$N\\le 5000$。\n3. （27 分）$N\\le 2\\times 10^5$，$Q=1$，$L_1=1$，$R_1=N$。\n4. （54 分）无额外约束。", "locale": "zh-CN"}}}
{"pid": "P11393", "type": "P", "difficulty": 5, "samples": [["5\n0 0\n1 0\n2 3\n3 3\n4 0", "Yes"], ["5\n0 0\n1 2\n2 4\n3 2\n4 0", "No"], ["2\n1 1\n2 1", "No"], ["2\n1 1\n2 2", "Yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 524288, 524288, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2019", "JOI（日本）"], "title": "[JOI Open 2019] 汇款 / Remittance", "background": "", "description": "**译自 [JOI Open 2019](https://contests.ioi-jp.org/open-2019/index.html) T2 「送金」**\n\nJOI 王国的河狸湖边有 $N$ 座房子，按逆时针方向给房子从 $1$ 到 $N$ 编号。\n\n站在湖所在的位置看，每一座房子可以给它左边相邻的房子汇款，即：对于房子 $i\\ (1\\le i\\le N-1)$，它左边的房子是房子 $i+1$，对于房子 $N$，它左边的房子为房子 $1$。然而，汇一笔款的手续费等于汇款金额。汇款金额必须是一个整数。当你汇款的时候，你必须交手续费，所以汇款钱数和手续费之和不能超出房子里的钱数。\n\n目前，房子 $i\\ (1\\le i\\le N)$ 里有 $A_i$ 元。另一方面，从收税的角度来看，我们希望房子 $i$ 里的钱数等于 $B_i$。因此你希望利用汇款系统使得房间 $i$ 里钱数等于 $B_i$ 元。你不能通过除给别的房子汇款和交手续费之外的方式花掉钱。\n\n给定每座房子目前有的钱数和期望钱数，写一个程序判断能否使得每间房子都达到期望的钱数。", "inputFormat": "第 $1$ 行一个整数 $N$。\n\n第 $2\\sim N+1$ 行，每行两个整数 $A_i,B_i$，分别表示房子 $i$ 的目前钱数和期望钱数，用空格隔开。", "outputFormat": "如果可以满足要求，输出 `Yes`，否则输出 `No`。", "hint": "#### 数据范围：\n\n$2\\le N\\le 10^6$，$0\\le A_i\\le 10^9$（$1\\le i\\le N$），$0\\le B_i\\le 10^9$（$1\\le i\\le N$）。\n\n#### 子任务：\n\n1. （15 分）$N\\le 7$，$A_i\\le 5$，$B_i\\le 5$（$1\\le i\\le N$）。\n2. （40 分）$N\\le 20$。\n3. （45 分）没有额外约束。\n\n#### 样例解释：\n\n举例来说，你可以按照以下支付方式，满足要求。\n\n1. 房子 $5\\to 1$，支付 $2$ 元。花费 $2$ 元。\n2. 房子 $1\\to 2$，支付 $1$ 元。花费 $1$ 元。\n3. 房子 $2\\to 3$，支付 $1$ 元。花费 $1$ 元。\n\n你不能以任何方式满足要求。\n\n注意钱必须以 $1$ 元作为单位支付。\n\n你不需要使用支付系统。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2019] 汇款 / Remittance", "background": "", "description": "**译自 [JOI Open 2019](https://contests.ioi-jp.org/open-2019/index.html) T2 「送金」**\n\nJOI 王国的河狸湖边有 $N$ 座房子，按逆时针方向给房子从 $1$ 到 $N$ 编号。\n\n站在湖所在的位置看，每一座房子可以给它左边相邻的房子汇款，即：对于房子 $i\\ (1\\le i\\le N-1)$，它左边的房子是房子 $i+1$，对于房子 $N$，它左边的房子为房子 $1$。然而，汇一笔款的手续费等于汇款金额。汇款金额必须是一个整数。当你汇款的时候，你必须交手续费，所以汇款钱数和手续费之和不能超出房子里的钱数。\n\n目前，房子 $i\\ (1\\le i\\le N)$ 里有 $A_i$ 元。另一方面，从收税的角度来看，我们希望房子 $i$ 里的钱数等于 $B_i$。因此你希望利用汇款系统使得房间 $i$ 里钱数等于 $B_i$ 元。你不能通过除给别的房子汇款和交手续费之外的方式花掉钱。\n\n给定每座房子目前有的钱数和期望钱数，写一个程序判断能否使得每间房子都达到期望的钱数。", "inputFormat": "第 $1$ 行一个整数 $N$。\n\n第 $2\\sim N+1$ 行，每行两个整数 $A_i,B_i$，分别表示房子 $i$ 的目前钱数和期望钱数，用空格隔开。", "outputFormat": "如果可以满足要求，输出 `Yes`，否则输出 `No`。", "hint": "#### 数据范围：\n\n$2\\le N\\le 10^6$，$0\\le A_i\\le 10^9$（$1\\le i\\le N$），$0\\le B_i\\le 10^9$（$1\\le i\\le N$）。\n\n#### 子任务：\n\n1. （15 分）$N\\le 7$，$A_i\\le 5$，$B_i\\le 5$（$1\\le i\\le N$）。\n2. （40 分）$N\\le 20$。\n3. （45 分）没有额外约束。\n\n#### 样例解释：\n\n举例来说，你可以按照以下支付方式，满足要求。\n\n1. 房子 $5\\to 1$，支付 $2$ 元。花费 $2$ 元。\n2. 房子 $1\\to 2$，支付 $1$ 元。花费 $1$ 元。\n3. 房子 $2\\to 3$，支付 $1$ 元。花费 $1$ 元。\n\n你不能以任何方式满足要求。\n\n注意钱必须以 $1$ 元作为单位支付。\n\n你不需要使用支付系统。", "locale": "zh-CN"}}}
{"pid": "P11394", "type": "P", "difficulty": 7, "samples": [["6 3 4\nSWNEES\n2 1 1 2\n1 0 1 3\n1 1 2 2", "8\n8"], ["4 4 4\nEWWE\n1 2 1 2\n1 1 1 1\n0 0 0 0\n2 2 2 4", "3\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "JOI（日本）"], "title": "[JOI Open 2019] 病毒实验 / Virus Experiment", "background": null, "description": "**译自 [JOI Open 2019](https://contests.ioi-jp.org/open-2019/index.html) T3 「ウイルス実験」**\n\nJOI 公司研究了新型病毒 `JOI virus`。JOI 公司希望通过用该病毒影响在 IOI 岛的动物做实验。\n\nIOI 岛呈矩形。有 $R-1$ 条从西向东的平行道路，和 $C-1$ 条从北向南的平行道路。她们将岛分割成 $RC$ 个部分。每部分只有一只动物。我们称居住在北部第 $i$，西部第 $j$ 部分的动物为 `动物(i,j)`（$1\\le i\\le R$，$1\\le j\\le C$）。\n\n在 IOI 岛上，一天有 $M$ 个时间段。我们管第 $k$ 个叫 `时间段k`。风总是从某方向吹来：北方，南方，东方和西方。基于时间段，风向可能改变。如果时间段相同，风向总是不变，这和在哪一天无关。\n\n每只动物有一个状态 `抵抗力`。动物 $(i,j)$ 的抵抗力表示为一个非负整数 $U_{i,j}$。\n\n- 如果 $U_{i,j}=0$,说明动物 $(i,j)$ 有很高的抵抗力，使得它不被 JOI virus 感染。\n- 如果 $U_{i,j}$ 是一个正整数，说明动物 $(i,j)$ 可能被感染。如果下面条件连续成立了 $U_{i,j}$ 时间段，则他/她会从下一个时间段开始被感染。\n\n  -- 从风向处相邻的动物已经被传染。 \n  \n  注意最后一个时间段和下一天的第一个时间段是连续的。\n  \n为了实验，我们希望至少感染 $1$ 只动物，但是我们不希望感染过多的动物。在开始，我们选择一只作为第一个被感染的。我们不能选择 $U_{i,j}=0$ 的动物 $(i,j)$ 作为第一个被感染的个体。\n\n给定每个时间段的风向和每只动物的抵抗力。编写程序计算经过了 $10^{100}$ 天后最少被感染了个体数，和达成此目标刚开始能选择的个体有几种。", "inputFormat": "第 $1$ 行三个整数 $M,R,C$。\n\n第 $2$ 行一个字符串 $D$。\n\n第 $3\\sim3+R-1$ 行，每行 $C$ 个整数。第 $i-3+1$ 行第 $j$ 列的数表示 $U_{i,j}$。\n\n$D$ 是长 $M$ 的字符串表示风向。D 包含 $4$ 种字符：$\\texttt N$, $\\texttt S$, $\\texttt W$, $\\texttt E$。分别表示北南西东。第 $k$ 个字符（$1\\le k\\le M$）表示第 $k$ 个时间段的风向。", "outputFormat": "第 $1$ 行一个数表示最少被感染个体数。\n\n第 $2$ 行一个数表示使得被感染的个体最少，初始时有几种选法。", "hint": "#### 样例解释：\n\n让我们考虑选择动物 $(3,1)$ 作为初始被感染个体的情况。\n\n对于动物 $(2,1)$，在第 $1$ 天的时间段 $1$，刮南风，且南边相邻动物已经被感染，所以他/她会从第 $1$ 天的时间段 $2$ 被感染。\n\n对于动物 $(3,2)$，在第 $1$ 天的时间段 $2$，刮西风，且西边相邻动物已经被感染，所以他/她会从第 $1$ 天的时间段 $3$ 被感染。\n\n对于动物 $(1,1)$，在第 $1$ 天的时间段 $6$，刮南风，且南边相邻动物已经被感染，且在第 $2$ 天的时间段 $1$，刮南风，且南边相邻动物已经被感染，所以他/她会从第 $2$ 天的时间段 $2$ 被感染。\n\n对于动物 $(1,2)$，在第 $2$ 天的时间段 $2$，刮西风，且西边相邻动物已经被感染，所以他/她会从第 $2$ 天的时间段 $3$ 被感染。\n\n对于动物 $(1,3)$，在第 $3$ 天的时间段 $2$，刮西风，且西边相邻动物已经被感染，所以他/她会从第 $3$ 天的时间段 $3$ 被感染。\n\n对于动物 $(2,3)$，在第 $3$ 天的时间段 $3$，刮北风，且北边相邻动物已经被感染，所以他/她会从第 $3$ 天的时间段 $4$ 被感染。\n\n对于动物 $(3,3)$，在第 $4$ 天的时间段 $2$，刮西风，且西边相邻动物已经被感染，且在第 $4$ 天的时间段 $3$，刮北风，且北边相邻动物已经被感染。所以他/她会从第 $4$ 天的时间段 $4$ 被感染。\n\n没有更多动物会被感染。所以当选择 动物 $(3,1)$ 作为初始被感染者时，经过 $10^{100}$ 天，$8$ 只动物会被感染。\n\n不论选哪只动物作为初始被感染者，我们都无法使得 $10^{100}$ 天后被感染的动物数量小于 $8$，所以输出的第一行是 $8$。如果我们选择动物 $(1,1)$，$(1,2)$，$(1,3)$，$(2,1)$，$(2,3)$，$(3,1)$，$(3,2)$ 或 $(3,3)$ 作为初始被感染者，在 $10^{100}$ 天后被感染的个数都是 $8$。所以第二行应当输出 $8$。\n\n这个样例满足 `子任务1` 的约束条件。\n\n#### 数据范围：\n\n$1\\le M\\le 10^5$，$1\\le R\\le 800$，$1\\le C\\le 800$。\n\n$D$ 是一个长度为 $M$ 的字符串，只包含 $\\texttt N$, $\\texttt S$, $\\texttt W$, $\\texttt E$。\n\n$0\\le U_{i,j}\\le 10^5$（$1\\le i\\le R$，$1\\le j\\le C$）。\n\n至少有一对 $(i,j)$ 满足 $1\\le U_{i,j}$（$1\\le i\\le R$，$1\\le j\\le C$）。\n\n#### 子任务：\n\n1. （14 分）$D$ 只包含 $\\texttt W$ 和 $\\texttt E$。\n2. （6 分）$1\\le W\\le 50$，$1\\le C\\le 50$。\n3. （80 分）无额外约束。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2019] 病毒实验 / Virus Experiment", "background": null, "description": "**译自 [JOI Open 2019](https://contests.ioi-jp.org/open-2019/index.html) T3 「ウイルス実験」**\n\nJOI 公司研究了新型病毒 `JOI virus`。JOI 公司希望通过用该病毒影响在 IOI 岛的动物做实验。\n\nIOI 岛呈矩形。有 $R-1$ 条从西向东的平行道路，和 $C-1$ 条从北向南的平行道路。她们将岛分割成 $RC$ 个部分。每部分只有一只动物。我们称居住在北部第 $i$，西部第 $j$ 部分的动物为 `动物(i,j)`（$1\\le i\\le R$，$1\\le j\\le C$）。\n\n在 IOI 岛上，一天有 $M$ 个时间段。我们管第 $k$ 个叫 `时间段k`。风总是从某方向吹来：北方，南方，东方和西方。基于时间段，风向可能改变。如果时间段相同，风向总是不变，这和在哪一天无关。\n\n每只动物有一个状态 `抵抗力`。动物 $(i,j)$ 的抵抗力表示为一个非负整数 $U_{i,j}$。\n\n- 如果 $U_{i,j}=0$,说明动物 $(i,j)$ 有很高的抵抗力，使得它不被 JOI virus 感染。\n- 如果 $U_{i,j}$ 是一个正整数，说明动物 $(i,j)$ 可能被感染。如果下面条件连续成立了 $U_{i,j}$ 时间段，则他/她会从下一个时间段开始被感染。\n\n  -- 从风向处相邻的动物已经被传染。 \n  \n  注意最后一个时间段和下一天的第一个时间段是连续的。\n  \n为了实验，我们希望至少感染 $1$ 只动物，但是我们不希望感染过多的动物。在开始，我们选择一只作为第一个被感染的。我们不能选择 $U_{i,j}=0$ 的动物 $(i,j)$ 作为第一个被感染的个体。\n\n给定每个时间段的风向和每只动物的抵抗力。编写程序计算经过了 $10^{100}$ 天后最少被感染了个体数，和达成此目标刚开始能选择的个体有几种。", "inputFormat": "第 $1$ 行三个整数 $M,R,C$。\n\n第 $2$ 行一个字符串 $D$。\n\n第 $3\\sim3+R-1$ 行，每行 $C$ 个整数。第 $i-3+1$ 行第 $j$ 列的数表示 $U_{i,j}$。\n\n$D$ 是长 $M$ 的字符串表示风向。D 包含 $4$ 种字符：$\\texttt N$, $\\texttt S$, $\\texttt W$, $\\texttt E$。分别表示北南西东。第 $k$ 个字符（$1\\le k\\le M$）表示第 $k$ 个时间段的风向。", "outputFormat": "第 $1$ 行一个数表示最少被感染个体数。\n\n第 $2$ 行一个数表示使得被感染的个体最少，初始时有几种选法。", "hint": "#### 样例解释：\n\n让我们考虑选择动物 $(3,1)$ 作为初始被感染个体的情况。\n\n对于动物 $(2,1)$，在第 $1$ 天的时间段 $1$，刮南风，且南边相邻动物已经被感染，所以他/她会从第 $1$ 天的时间段 $2$ 被感染。\n\n对于动物 $(3,2)$，在第 $1$ 天的时间段 $2$，刮西风，且西边相邻动物已经被感染，所以他/她会从第 $1$ 天的时间段 $3$ 被感染。\n\n对于动物 $(1,1)$，在第 $1$ 天的时间段 $6$，刮南风，且南边相邻动物已经被感染，且在第 $2$ 天的时间段 $1$，刮南风，且南边相邻动物已经被感染，所以他/她会从第 $2$ 天的时间段 $2$ 被感染。\n\n对于动物 $(1,2)$，在第 $2$ 天的时间段 $2$，刮西风，且西边相邻动物已经被感染，所以他/她会从第 $2$ 天的时间段 $3$ 被感染。\n\n对于动物 $(1,3)$，在第 $3$ 天的时间段 $2$，刮西风，且西边相邻动物已经被感染，所以他/她会从第 $3$ 天的时间段 $3$ 被感染。\n\n对于动物 $(2,3)$，在第 $3$ 天的时间段 $3$，刮北风，且北边相邻动物已经被感染，所以他/她会从第 $3$ 天的时间段 $4$ 被感染。\n\n对于动物 $(3,3)$，在第 $4$ 天的时间段 $2$，刮西风，且西边相邻动物已经被感染，且在第 $4$ 天的时间段 $3$，刮北风，且北边相邻动物已经被感染。所以他/她会从第 $4$ 天的时间段 $4$ 被感染。\n\n没有更多动物会被感染。所以当选择 动物 $(3,1)$ 作为初始被感染者时，经过 $10^{100}$ 天，$8$ 只动物会被感染。\n\n不论选哪只动物作为初始被感染者，我们都无法使得 $10^{100}$ 天后被感染的动物数量小于 $8$，所以输出的第一行是 $8$。如果我们选择动物 $(1,1)$，$(1,2)$，$(1,3)$，$(2,1)$，$(2,3)$，$(3,1)$，$(3,2)$ 或 $(3,3)$ 作为初始被感染者，在 $10^{100}$ 天后被感染的个数都是 $8$。所以第二行应当输出 $8$。\n\n这个样例满足 `子任务1` 的约束条件。\n\n#### 数据范围：\n\n$1\\le M\\le 10^5$，$1\\le R\\le 800$，$1\\le C\\le 800$。\n\n$D$ 是一个长度为 $M$ 的字符串，只包含 $\\texttt N$, $\\texttt S$, $\\texttt W$, $\\texttt E$。\n\n$0\\le U_{i,j}\\le 10^5$（$1\\le i\\le R$，$1\\le j\\le C$）。\n\n至少有一对 $(i,j)$ 满足 $1\\le U_{i,j}$（$1\\le i\\le R$，$1\\le j\\le C$）。\n\n#### 子任务：\n\n1. （14 分）$D$ 只包含 $\\texttt W$ 和 $\\texttt E$。\n2. （6 分）$1\\le W\\le 50$，$1\\le C\\le 50$。\n3. （80 分）无额外约束。", "locale": "zh-CN"}}}
{"pid": "P11395", "type": "P", "difficulty": 1, "samples": [["4\nyummy or yucky?\neat or stick?\nrua or eat?\neat or eat?\n", "yummy\nstick\nrua\nor\n"], ["7\nsaint or sinner?\ntobe or nottobe?\nad or able?\neating or eaten?\nor or or?\nand or and?\noneplusoneistwo or oneplusoneisthree?\n", "sinner\ntobe\nable\neaten\nor\nand\noneplusoneistwo\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "洛谷原创", "Special Judge", "洛谷月赛"], "title": "喵喵喵幼儿园", "background": "", "description": "喵喵喵群里面，吃喵喵是坏文明。\n\n现在群友有 $q$ 个问题，每个问题形如 `A or B?`，其中 $A,B$ 为仅含小写字母的非空字符串。\n\n对于每个问题，你可以回答 $A$ 或 $B$ 中的任意一个不是 `eat` 的字符串。特别地，如果 $A$ 和 $B$ 都是 `eat`，你需要回答 `or`。", "inputFormat": "输入的第一行有一个正整数 $q$，表示问题的数量。\n\n之后有 $q$ 行，每行有一个问题。", "outputFormat": "对于每个问题，输出一行一个字符串，表示你对于这个问题的答案。", "hint": "【样例 1 解释】\n\n- 对于第一个问题，你可以从 `yummy` 和 `yucky` 两个单词中的任意一个，所以既可以回答 `yummy` 也可以回答 `yucky`。**注意：在这个问题输出 `or` 将导致答案错误。**\n- 对于第二个问题，因为第一个单词是 `eat`，要避开，因此**必须**输出 `stick`。\n- 对于第三个问题，因为第二个单词是 `eat`，要避开，因此**必须**输出 `rua`。\n- 对于第四个问题，两个单词都是 `eat`，所以要输出 `or`。\n\n【样例 2 解释】\n\n本样例共有 $32$ 种本质不同的输出（除了第 $5,6$ 个问题的两个字符串一样外，其他问题都有两种可能答案），这里仅展示其中一种可能的输出。\n\n【数据范围】\n\n对于全部数据，保证 $1\\le q\\le 100$，每个问题中的字符串 $A,B$ 均不超过 $100$ 个字符，且仅含有小写字符。\n\n本题共有 $6$ 个测试点，不同测试点的分值和特殊性质见下表：\n\n|测试点编号|特殊性质|分值|\n|:-:|:-:|:-:|\n|1|$A,B$ 都不是 `eat`|$19$|\n|2|$A$ 一定是 `eat`，$B$ 一定不是 `eat`|$22$|\n|3|$B$ 一定是 `eat`|$11$|\n|4|$A$ 一定是 `eat`|$12$|\n|5|$A,B$ 一定有一个不是 `eat`|$13$|\n|6|无特殊性质|$23$|\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "喵喵喵幼儿园", "background": "", "description": "喵喵喵群里面，吃喵喵是坏文明。\n\n现在群友有 $q$ 个问题，每个问题形如 `A or B?`，其中 $A,B$ 为仅含小写字母的非空字符串。\n\n对于每个问题，你可以回答 $A$ 或 $B$ 中的任意一个不是 `eat` 的字符串。特别地，如果 $A$ 和 $B$ 都是 `eat`，你需要回答 `or`。", "inputFormat": "输入的第一行有一个正整数 $q$，表示问题的数量。\n\n之后有 $q$ 行，每行有一个问题。", "outputFormat": "对于每个问题，输出一行一个字符串，表示你对于这个问题的答案。", "hint": "【样例 1 解释】\n\n- 对于第一个问题，你可以从 `yummy` 和 `yucky` 两个单词中的任意一个，所以既可以回答 `yummy` 也可以回答 `yucky`。**注意：在这个问题输出 `or` 将导致答案错误。**\n- 对于第二个问题，因为第一个单词是 `eat`，要避开，因此**必须**输出 `stick`。\n- 对于第三个问题，因为第二个单词是 `eat`，要避开，因此**必须**输出 `rua`。\n- 对于第四个问题，两个单词都是 `eat`，所以要输出 `or`。\n\n【样例 2 解释】\n\n本样例共有 $32$ 种本质不同的输出（除了第 $5,6$ 个问题的两个字符串一样外，其他问题都有两种可能答案），这里仅展示其中一种可能的输出。\n\n【数据范围】\n\n对于全部数据，保证 $1\\le q\\le 100$，每个问题中的字符串 $A,B$ 均不超过 $100$ 个字符，且仅含有小写字符。\n\n本题共有 $6$ 个测试点，不同测试点的分值和特殊性质见下表：\n\n|测试点编号|特殊性质|分值|\n|:-:|:-:|:-:|\n|1|$A,B$ 都不是 `eat`|$19$|\n|2|$A$ 一定是 `eat`，$B$ 一定不是 `eat`|$22$|\n|3|$B$ 一定是 `eat`|$11$|\n|4|$A$ 一定是 `eat`|$12$|\n|5|$A,B$ 一定有一个不是 `eat`|$13$|\n|6|无特殊性质|$23$|\n", "locale": "zh-CN"}}}
{"pid": "P11396", "type": "P", "difficulty": 3, "samples": [["4\n2 1 4 3\n", "1 4 2 3\n"], ["6\n6 5 4 3 2 1\n", "1 2 3 4 5 6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "洛谷月赛"], "title": "排队", "background": "", "description": "第一届喵喵喵编程大赛即将开始，本次比赛有 $n$ 只喵喵参赛，编号依次为 $1,2,\\ldots, n$，已经分成了若干组，每一组喵喵的编号都是连续的一段。\n\n根据报名情况，你已经知道第 $i$ 只喵喵会第 $p_i$ 个到达现场，保证 $p_i$ 构成 $1\\sim n$ 的排列。\n\n一组喵喵的到达时间被定义为这一组喵喵中**最早到达**的喵喵的到达时间。\n\n喵喵的排队规则如下：\n\n- 先把所有的喵喵组按每组喵喵的到达时间从小到大排序。\n- 然后对于同一组喵喵，按照每只喵喵的到达时间从小到大排序。\n\n按照这个排队规则，可以得到一个新的排列 $q_1,\\ldots,q_n$，其中 $q_i$ 表示从前往后第 $i$ 只喵喵的**到达时间**。\n\n你已经知道了所有 $p_i$，但是不清楚喵喵的分组，你想知道排列 $q_1,q_2,\\ldots,q_n$ 的字典序最大可能是什么。", "inputFormat": "输入的第一行有一个正整数 $n$，表示喵喵数量。\n\n第二行有 $n$ 个正整数 $p_1,p_2,\\ldots,p_n$，表示每只喵喵的到达顺序。", "outputFormat": "输出一行 $n$ 个正整数，表示 $q$ 的字典序最大可能。", "hint": "【样例 1 解释】\n\n所有可能的分组情况有 $8$ 种可能，下面分别列出：\n\n|分组情况|最终排列 $q$|\n|:-:|:-:|\n|$(2)(1)(4)(3)$|$1,2,3,4$|\n|$(2)(1)(4,3)$|$1,2,3,4$|\n|$(2)(1,4)(3)$|$1,4,2,3$|\n|$(2)(1,4,3)$|$1,3,4,2$|\n|$(2,1)(4)(3)$|$1,2,3,4$|\n|$(2,1)(4,3)$|$1,2,3,4$|\n|$(2,1,4)(3)$|$1,2,4,3$|\n|$(2,1,4,3)$|$1,2,3,4$|\n\n关于表格，我们以 $(2)(1,4,3)$ 这个分组方式为例，演示排队结果的计算：\n\n- 首先 $(2)$ 这组喵喵的到达时间为第 $2$，$(1,4,3)$ 这组喵喵的到达时间为第 $1$，从而 $(1,4,3)$ 排在前面。\n- 然后 $(1,4,3)$ 这组喵喵内部按照到达时间排序，得到 $1,3,4$；$(2)$ 这组喵喵内部按照到达时间排序得到 $2$。\n- 最后把每组喵喵的排序结果拼起来，得到 $1,3,4,2$。\n\n【样例 2 解释】\n\n读者不难验证，无论喵喵怎么分组，因为无论组内还是组外都是从小到大排序的，所以 $q_i$ 永远是 $1,2,3,4,5,6$。\n\n【数据范围】\n\n对于全体数据，保证 $1\\le n\\le 3\\times 10^5$，且 $p_i$ 构成 $1\\sim n$ 的一个排列。\n\n|子任务编号|$n\\le$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|\n|1|$3$||11|\n|2|$16$||16|\n|3|$2000$||22|\n|4|$3\\times 10^5$|A|17|\n|5|$3\\times 10^5$||34|\n\n- 特殊性质 A：存在 $1\\le k\\le n$ 使得 $p_1>p_2>\\ldots >p_{k-1}> p_k < p_{k+1}<\\ldots < p_n$。例如，样例 2 就是 $k=6$ 的情形。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "排队", "background": "", "description": "第一届喵喵喵编程大赛即将开始，本次比赛有 $n$ 只喵喵参赛，编号依次为 $1,2,\\ldots, n$，已经分成了若干组，每一组喵喵的编号都是连续的一段。\n\n根据报名情况，你已经知道第 $i$ 只喵喵会第 $p_i$ 个到达现场，保证 $p_i$ 构成 $1\\sim n$ 的排列。\n\n一组喵喵的到达时间被定义为这一组喵喵中**最早到达**的喵喵的到达时间。\n\n喵喵的排队规则如下：\n\n- 先把所有的喵喵组按每组喵喵的到达时间从小到大排序。\n- 然后对于同一组喵喵，按照每只喵喵的到达时间从小到大排序。\n\n按照这个排队规则，可以得到一个新的排列 $q_1,\\ldots,q_n$，其中 $q_i$ 表示从前往后第 $i$ 只喵喵的**到达时间**。\n\n你已经知道了所有 $p_i$，但是不清楚喵喵的分组，你想知道排列 $q_1,q_2,\\ldots,q_n$ 的字典序最大可能是什么。", "inputFormat": "输入的第一行有一个正整数 $n$，表示喵喵数量。\n\n第二行有 $n$ 个正整数 $p_1,p_2,\\ldots,p_n$，表示每只喵喵的到达顺序。", "outputFormat": "输出一行 $n$ 个正整数，表示 $q$ 的字典序最大可能。", "hint": "【样例 1 解释】\n\n所有可能的分组情况有 $8$ 种可能，下面分别列出：\n\n|分组情况|最终排列 $q$|\n|:-:|:-:|\n|$(2)(1)(4)(3)$|$1,2,3,4$|\n|$(2)(1)(4,3)$|$1,2,3,4$|\n|$(2)(1,4)(3)$|$1,4,2,3$|\n|$(2)(1,4,3)$|$1,3,4,2$|\n|$(2,1)(4)(3)$|$1,2,3,4$|\n|$(2,1)(4,3)$|$1,2,3,4$|\n|$(2,1,4)(3)$|$1,2,4,3$|\n|$(2,1,4,3)$|$1,2,3,4$|\n\n关于表格，我们以 $(2)(1,4,3)$ 这个分组方式为例，演示排队结果的计算：\n\n- 首先 $(2)$ 这组喵喵的到达时间为第 $2$，$(1,4,3)$ 这组喵喵的到达时间为第 $1$，从而 $(1,4,3)$ 排在前面。\n- 然后 $(1,4,3)$ 这组喵喵内部按照到达时间排序，得到 $1,3,4$；$(2)$ 这组喵喵内部按照到达时间排序得到 $2$。\n- 最后把每组喵喵的排序结果拼起来，得到 $1,3,4,2$。\n\n【样例 2 解释】\n\n读者不难验证，无论喵喵怎么分组，因为无论组内还是组外都是从小到大排序的，所以 $q_i$ 永远是 $1,2,3,4,5,6$。\n\n【数据范围】\n\n对于全体数据，保证 $1\\le n\\le 3\\times 10^5$，且 $p_i$ 构成 $1\\sim n$ 的一个排列。\n\n|子任务编号|$n\\le$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|\n|1|$3$||11|\n|2|$16$||16|\n|3|$2000$||22|\n|4|$3\\times 10^5$|A|17|\n|5|$3\\times 10^5$||34|\n\n- 特殊性质 A：存在 $1\\le k\\le n$ 使得 $p_1>p_2>\\ldots >p_{k-1}> p_k < p_{k+1}<\\ldots < p_n$。例如，样例 2 就是 $k=6$ 的情形。", "locale": "zh-CN"}}}
{"pid": "P11397", "type": "P", "difficulty": 4, "samples": [["4", "9"], ["114", "785"], ["114514", "1930181"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "数论", "洛谷原创", "洛谷月赛", "Ad-hoc"], "title": "界分数", "background": "[标分数](https://www.luogu.com.cn/problem/P8319)", "description": "定义函数 $f(x)$：\n\n有一个 $\\frac{0}{x}$ 的分数。你可以进行以下两种操作直到这个分数为 $1$：\n\n1. 分子 $+1$，然后如果这个分数可以约分，约分到最简形式。\n2. 分子分母同时 $+1$，然后如果这个分数可以约分，约分到最简形式。\n\n$f(x)$ 的值为最小操作次数。\n\n给定 $n$，求 $\\sum\\limits_{i=1}^n f(i) \\bmod 998244353$。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个自然数，表示答案。", "hint": "【样例解释】\n\n$f(1)=1$，$f(2)=2$，$f(3)=3$，$f(4)=3$（$\\frac{1}{4}\\rightarrow\\frac{1}{2}\\rightarrow 1$）。\n\n【数据范围】\n\n对于全部数据，$1\\le n \\le 10^{18}$。\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | 特殊性质 | 分值 |\n| -----------: | -----------: |-----------: |\n| 0 | $n=5$ | $5$ |\n| 1 | $n\\le 10$ | $20$ |\n| 2 | $n\\le 10^3$ | $40$ |\n| 3 | $n\\le 10^6$ | $25$ |\n| 4 | 无特殊性质 | $10$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "界分数", "background": "[标分数](https://www.luogu.com.cn/problem/P8319)", "description": "定义函数 $f(x)$：\n\n有一个 $\\frac{0}{x}$ 的分数。你可以进行以下两种操作直到这个分数为 $1$：\n\n1. 分子 $+1$，然后如果这个分数可以约分，约分到最简形式。\n2. 分子分母同时 $+1$，然后如果这个分数可以约分，约分到最简形式。\n\n$f(x)$ 的值为最小操作次数。\n\n给定 $n$，求 $\\sum\\limits_{i=1}^n f(i) \\bmod 998244353$。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个自然数，表示答案。", "hint": "【样例解释】\n\n$f(1)=1$，$f(2)=2$，$f(3)=3$，$f(4)=3$（$\\frac{1}{4}\\rightarrow\\frac{1}{2}\\rightarrow 1$）。\n\n【数据范围】\n\n对于全部数据，$1\\le n \\le 10^{18}$。\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | 特殊性质 | 分值 |\n| -----------: | -----------: |-----------: |\n| 0 | $n=5$ | $5$ |\n| 1 | $n\\le 10$ | $20$ |\n| 2 | $n\\le 10^3$ | $40$ |\n| 3 | $n\\le 10^6$ | $25$ |\n| 4 | 无特殊性质 | $10$ |\n\n", "locale": "zh-CN"}}}
