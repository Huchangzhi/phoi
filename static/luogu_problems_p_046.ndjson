{"pid": "P1924", "type": "P", "difficulty": 7, "samples": [["6 6\n0 0 0 1 0 0 \n0 1 0 0 0 0\n0 0 0 0 0 1\n0 0 0 0 0 1\n0 0 0 0 0 0\n0 0 0 1 0 0", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "轮廓线 DP"], "title": "贴海报", "background": "", "description": "有一面 $n\\times m$ 的墙，墙上有若干个窟窿。现在要在墙上贴上海报，海报是 $2\\times 3$ 大小的长方形，且每条边与墙面边缘平行或者垂直。海报可以横着贴也可以竖着贴，但是窟窿上不能贴海报。请问这面墙最多可以贴多少个海报？", "inputFormat": "输入文件第一行是 $2$ 个整数 $n,m$，表示墙的大小为 $n\\times m$。\n\n接下来的 $n$ 行，每行有 $m$ 个整数 $0$ 或 $1$，$1$ 表示该位置有窟窿，$0$ 表示没有窟窿。", "outputFormat": "最多能贴多少海报。", "hint": "数据保证，$1\\leq n\\leq 150$，$1\\leq m\\leq 10$。", "locale": "zh-CN", "translations": {"en": {"title": "Pasting Posters", "background": "", "description": "There is a wall of size $n\\times m$ with several holes on it. You need to paste posters on the wall. Each poster is a $2\\times 3$ rectangle, with each side parallel or perpendicular to the wall’s edges. A poster can be placed horizontally or vertically, but no poster may cover any hole. What is the maximum number of posters that can be placed on this wall?", "inputFormat": "The first line contains $2$ integers $n$ and $m$, indicating that the wall size is $n\\times m$.\n\nThe next $n$ lines each contain $m$ integers $0$ or $1$. A $1$ indicates that position has a hole, and a $0$ indicates no hole.", "outputFormat": "Output the maximum number of posters that can be placed.", "hint": "The testdata guarantees that $1\\leq n\\leq 150$, $1\\leq m\\leq 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "贴海报", "background": "", "description": "有一面 $n\\times m$ 的墙，墙上有若干个窟窿。现在要在墙上贴上海报，海报是 $2\\times 3$ 大小的长方形，且每条边与墙面边缘平行或者垂直。海报可以横着贴也可以竖着贴，但是窟窿上不能贴海报。请问这面墙最多可以贴多少个海报？", "inputFormat": "输入文件第一行是 $2$ 个整数 $n,m$，表示墙的大小为 $n\\times m$。\n\n接下来的 $n$ 行，每行有 $m$ 个整数 $0$ 或 $1$，$1$ 表示该位置有窟窿，$0$ 表示没有窟窿。", "outputFormat": "最多能贴多少海报。", "hint": "数据保证，$1\\leq n\\leq 150$，$1\\leq m\\leq 10$。", "locale": "zh-CN"}}}
{"pid": "P1925", "type": "P", "difficulty": 5, "samples": [["10", "-15"], ["100", "2438"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "最大划分乘积", "background": "欧拉工程183题 有改动", "description": "将正整数 $n$ 分为 $k$ 个相等的部分 $r$，有 $r=n/k$。\n\n令 $p=r×r×...×r=r^k$（共有 $k$ 个 $r$）。例如，将 $11$ 分为五等份，则 $p=2.2^5$。\n\n令 $M(n)$ 为满足要求的对应 $n$ 的最大的 $p$。\n\n当 $n=11$ 时，$M(n)=14641/256=57.19140625$，是有限小数；当 $n=8$ 时，$M(n)=512/27$，是无限小数。\n\n若当 $M(n)$ 为无限小数时，$D(n)=n$，否则 $D(n)=-n$，求 $D(5)+D(6)+\\dots +D(a)$ 的值。", "inputFormat": "输入文件仅一行为正整数 $a(5≤a≤32767)$.", "outputFormat": "输出文件仅一行 为 $D(5)+D(6)+...+D(a)$ 的值.", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "最大划分乘积", "background": "", "description": "Let $N$ be a positive integer and let $N$ be split into $k$ equal parts, $r = N/k$, so that $N = r + r + ... + r$.\n\nLet $P$ be the product of these parts, $P = r ×r × ... × r = rk$.\n\nFor example, if $11$ is split into five equal parts, $11 = 2.2 + 2.2 + 2.2 + 2.2 + 2.2$, then $P = 2.2^5 = 51.53632$.\n\nLet $M(N) = P_{\\max}$ for a given value of $N$.\n\nIt turns out that the maximum for $N = 11$ is found by splitting eleven into four equal parts which leads to $P_{max} = (11/4)^4$; that is, $M(11) = 14641/256 = 57.19140625$, which is a terminating decimal.\n\nHowever, for $N = 8$ the maximum is achieved by splitting it into three equal parts, so $M(8) = 512/27$, which is a non-terminating decimal.\n\nLet $D(N) = N$ if $M(N)$ is a non-terminating decimal and $D(N) = -N$ if $M(N)$ is a terminating decimal.", "inputFormat": "Input a positive integer $a(5≤a≤32767)$.", "outputFormat": "Output the value of $D(5)+D(6)+...+D(a)$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "最大划分乘积", "background": "欧拉工程183题 有改动", "description": "将正整数 $n$ 分为 $k$ 个相等的部分 $r$，有 $r=n/k$。\n\n令 $p=r×r×...×r=r^k$（共有 $k$ 个 $r$）。例如，将 $11$ 分为五等份，则 $p=2.2^5$。\n\n令 $M(n)$ 为满足要求的对应 $n$ 的最大的 $p$。\n\n当 $n=11$ 时，$M(n)=14641/256=57.19140625$，是有限小数；当 $n=8$ 时，$M(n)=512/27$，是无限小数。\n\n若当 $M(n)$ 为无限小数时，$D(n)=n$，否则 $D(n)=-n$，求 $D(5)+D(6)+\\dots +D(a)$ 的值。", "inputFormat": "输入文件仅一行为正整数 $a(5≤a≤32767)$.", "outputFormat": "输出文件仅一行 为 $D(5)+D(6)+...+D(a)$ 的值.", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1926", "type": "P", "difficulty": 2, "samples": [["3 4 20 100\n15 20 50\n10 15 40 40\n5 5 10 15", "2"]], "limits": {"time": [1000, 1000, 1000], "memory": [128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "排序", "背包 DP"], "title": "小书童——刷题大军", "background": "数学是火，点亮物理的灯；物理是灯，照亮化学的路；化学是路，通向生物的坑；生物是坑，埋葬学理的人。  \n文言是火，点亮历史宫灯；历史是灯，照亮社会之路；社会是路，通向哲学大坑；哲学是坑，埋葬文科生。——小 A", "description": "小 A “刷题”十分猖狂，明目张胆地“刷题”。他现在在小书童里发现了 $n$ 样他喜欢的“题目”，每“题”都有他的需要时间，而老师布置了 $m$ 项作业，每项作业都有它的需要时间及分值，老师规定 $k$ 分以上算及格。小 A 只剩 $r$ 个单位时间，他想在及格的基础上更多地“刷题”。", "inputFormat": "第一行四个整数 $n,m,k,r$。\n\n第二行有 $n$ 个数，代表每“题”它需要的时间。\n\n第三行有 $m$ 个数，表示每项作业它的需要时间。\n\n第四行有 $m$ 个数，代表每项作业它的分值。", "outputFormat": "一个数，代表小 A 能刷几道题。", "hint": "### 数据范围及约定\n\n\n对于 $100\\%$ 的数据，$n\\le 10$，$m\\le 10$，$k\\le 50$，$r\\le 150$。数据保证没有不能及格的情况。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Shutong — The Problem-Grinding Army", "background": "Math is fire, lighting the lamp of physics; physics is a lamp, illuminating the road of chemistry; chemistry is a road, leading to the pit of biology; biology is a pit, burying those who study science.\nClassical Chinese is fire, lighting the palace lamps of history; history is a lamp, illuminating the road of society; society is a road, leading to the big pit of philosophy; philosophy is a pit, burying liberal arts students. — Xiao A.", "description": "Xiao A is wildly “grinding problems”, blatantly “grinding problems”. He has found $n$ kinds of “problems” he likes in Xiao Shutong, and each “problem” has a required time. The teacher has assigned $m$ homework tasks, each with its required time and score, and the teacher stipulates that $k$ points or more is passing. Xiao A has only $r$ units of time left, and he wants to “grind” as many “problems” as possible on the basis of passing.", "inputFormat": "The first line contains four integers $n,m,k,r$.\n\nThe second line has $n$ numbers, representing the required time for each “problem”.\n\nThe third line has $m$ numbers, representing the required time for each homework task.\n\nThe fourth line has $m$ numbers, representing the score of each homework task.", "outputFormat": "A single number, representing how many “problems” Xiao A can grind.", "hint": "### Constraints and Agreements\n\nFor $100\\%$ of the testdata, $n\\le 10$, $m\\le 10$, $k\\le 50$, $r\\le 150$. It is guaranteed that passing is always possible.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小书童——刷题大军", "background": "数学是火，点亮物理的灯；物理是灯，照亮化学的路；化学是路，通向生物的坑；生物是坑，埋葬学理的人。  \n文言是火，点亮历史宫灯；历史是灯，照亮社会之路；社会是路，通向哲学大坑；哲学是坑，埋葬文科生。——小 A", "description": "小 A “刷题”十分猖狂，明目张胆地“刷题”。他现在在小书童里发现了 $n$ 样他喜欢的“题目”，每“题”都有他的需要时间，而老师布置了 $m$ 项作业，每项作业都有它的需要时间及分值，老师规定 $k$ 分以上算及格。小 A 只剩 $r$ 个单位时间，他想在及格的基础上更多地“刷题”。", "inputFormat": "第一行四个整数 $n,m,k,r$。\n\n第二行有 $n$ 个数，代表每“题”它需要的时间。\n\n第三行有 $m$ 个数，表示每项作业它的需要时间。\n\n第四行有 $m$ 个数，代表每项作业它的分值。", "outputFormat": "一个数，代表小 A 能刷几道题。", "hint": "### 数据范围及约定\n\n\n对于 $100\\%$ 的数据，$n\\le 10$，$m\\le 10$，$k\\le 50$，$r\\le 150$。数据保证没有不能及格的情况。", "locale": "zh-CN"}}}
{"pid": "P1927", "type": "P", "difficulty": 2, "samples": [["3\r\n0  1 \r\n-8  -4 \r\n-1  4 \r\n", "279.6017"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "枚举", "剪枝"], "title": "防护伞", "background": "", "description": "据说 $2012$ 的灾难和太阳黑子的爆发有关。于是地球防卫小队决定制造一个特殊防护伞，挡住太阳黑子爆发的区域，减少其对地球的影响。由于太阳相对于地球来说实在是太大了，我们可以把太阳表面看作一个平面，中心定为 $(0,0)$。根据情报，在 $2012$ 年时，太阳表面上会产生 $N$ 个黑子区域，每个黑子视为一个点。特殊防护伞可以看作一个巨大的圆面，现在地球防卫小队决定将它的中心定位于某个黑子，然后用伞面挡住其他黑子。因为制造防护伞的材料成本特别高，所以我们希望伞面尽可能的小。", "inputFormat": "第一行：一个整数 $N$，表示黑子个数。\n\n第 $2$ 到 $N+1$ 行：每行两个整数，表示黑子的坐标 $(x,y)$。", "outputFormat": "第一行：一个实数，表示伞的面积。\n", "hint": "### 数据范围及约定\n\n- 对于 $50\\%$ 的数据：$2 \\le N \\le 100$。\n- 对于 $100\\%$ 的数据：$2 \\le N \\le 1000$，$-10000\\le x,y\\le 10000$。\n\n### 注意\n\n- 精确到小数点后 $4$ 位。\n- $\\pi$ 取 $3.1415926535$。", "locale": "zh-CN", "translations": {"en": {"title": "Protective Umbrella", "background": "", "description": "It is said that the 2012 disaster is related to sunspot eruptions. Therefore, the Earth Defense Team decides to build a special protective umbrella to block the regions where sunspots erupt and reduce their impact on Earth. Since the Sun is huge compared to Earth, we can treat the Sun’s surface as a plane, with its center at $(0, 0)$. According to intelligence, in the year $2012$, there will be $N$ sunspot regions on the Sun’s surface, and each sunspot is treated as a point. The special protective umbrella can be modeled as a large circular disk. The team decides to place its center at one of the sunspots and then use the umbrella to cover the other sunspots. Because the material cost is extremely high, we want the umbrella to be as small as possible.", "inputFormat": "The first line: an integer $N$, the number of sunspots.\n\nLines $2$ to $N+1$: each line contains two integers, the coordinates $(x, y)$ of a sunspot.", "outputFormat": "The first line: a real number representing the area of the umbrella.", "hint": "### Constraints and Conventions\n\n- For $50\\%$ of the testdata: $2 \\le N \\le 100$.\n- For $100\\%$ of the testdata: $2 \\le N \\le 1000$, $-10000 \\le x, y \\le 10000$.\n\n### Notes\n\n- Round to $4$ decimal places.\n- Take $\\pi$ as $3.1415926535$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "防护伞", "background": "", "description": "据说 $2012$ 的灾难和太阳黑子的爆发有关。于是地球防卫小队决定制造一个特殊防护伞，挡住太阳黑子爆发的区域，减少其对地球的影响。由于太阳相对于地球来说实在是太大了，我们可以把太阳表面看作一个平面，中心定为 $(0,0)$。根据情报，在 $2012$ 年时，太阳表面上会产生 $N$ 个黑子区域，每个黑子视为一个点。特殊防护伞可以看作一个巨大的圆面，现在地球防卫小队决定将它的中心定位于某个黑子，然后用伞面挡住其他黑子。因为制造防护伞的材料成本特别高，所以我们希望伞面尽可能的小。", "inputFormat": "第一行：一个整数 $N$，表示黑子个数。\n\n第 $2$ 到 $N+1$ 行：每行两个整数，表示黑子的坐标 $(x,y)$。", "outputFormat": "第一行：一个实数，表示伞的面积。\n", "hint": "### 数据范围及约定\n\n- 对于 $50\\%$ 的数据：$2 \\le N \\le 100$。\n- 对于 $100\\%$ 的数据：$2 \\le N \\le 1000$，$-10000\\le x,y\\le 10000$。\n\n### 注意\n\n- 精确到小数点后 $4$ 位。\n- $\\pi$ 取 $3.1415926535$。", "locale": "zh-CN"}}}
{"pid": "P1928", "type": "P", "difficulty": 3, "samples": [["AC[3FUN]", "ACFUNFUNFUN"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "递归", "分治"], "title": "外星密码", "background": "", "description": "有了防护伞，并不能完全避免 2012 的灾难。地球防卫小队决定去求助外星种族的帮助。经过很长时间的努力，小队终于收到了外星生命的回信。但是外星人发过来的却是一串密码。只有解开密码，才能知道外星人给的准确回复。解开密码的第一道工序就是解压缩密码，外星人对于连续的若干个相同的子串 $\\texttt{X}$ 会压缩为 $\\texttt{[DX]}$ 的形式（$D$ 是一个整数且 $1\\leq D\\leq99$），比如说字符串 $\\texttt{CBCBCBCB}$ 就压缩为 $\\texttt{[4CB]}$ 或者$\\texttt{[2[2CB]]}$，类似于后面这种压缩之后再压缩的称为二重压缩。如果是 $\\texttt{[2[2[2CB]]]}$ 则是三重的。现在我们给你外星人发送的密码，请你对其进行解压缩。\n", "inputFormat": "输入一行，一个字符串，表示外星人发送的密码。\n", "outputFormat": "输出一行，一个字符串，表示解压缩后的结果。", "hint": "【数据范围】\n\n对于 $50\\%$ 的数据：解压后的字符串长度在 $1000$ 以内，最多只有三重压缩。\n\n对于 $100\\%$ 的数据：解压后的字符串长度在 $20000$ 以内，最多只有十重压缩。保证只包含数字、大写字母、`[` 和 `]`。\n", "locale": "zh-CN", "translations": {"en": {"title": "Alien Cipher", "background": "", "description": "Even with a protective umbrella, the 2012 disaster cannot be completely avoided. The Earth Defense Squad decides to seek help from an alien species. After a long effort, the squad finally receives a reply from extraterrestrial life. However, what the aliens send is a string of cipher. Only by cracking the cipher can we know their exact response. The first step in cracking is to decompress the cipher: for several consecutive identical substrings $\\texttt{X}$, the aliens compress them into the form $\\texttt{[DX]}$ ($D$ is an integer and $1\\leq D\\leq99$). For example, the string $\\texttt{CBCBCBCB}$ is compressed to $\\texttt{[4CB]}$ or $\\texttt{[2[2CB]]}$. The latter, where a compressed result is compressed again, is called double compression. If it is $\\texttt{[2[2[2CB]]]}$, that is triple compression. Now we give you the cipher sent by the aliens; please decompress it.", "inputFormat": "Input one line containing a string that represents the cipher sent by the aliens.", "outputFormat": "Output one line containing the decompressed string.", "hint": "Constraints\n- For 50% of the testdata: the length of the decompressed string is at most 1000, and there are at most three levels of compression.\n- For 100% of the testdata: the length of the decompressed string is at most 20000, and there are at most ten levels of compression. It is guaranteed that the input contains only digits, uppercase letters, `[` and `]`.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "外星密码", "background": "", "description": "有了防护伞，并不能完全避免 2012 的灾难。地球防卫小队决定去求助外星种族的帮助。经过很长时间的努力，小队终于收到了外星生命的回信。但是外星人发过来的却是一串密码。只有解开密码，才能知道外星人给的准确回复。解开密码的第一道工序就是解压缩密码，外星人对于连续的若干个相同的子串 $\\texttt{X}$ 会压缩为 $\\texttt{[DX]}$ 的形式（$D$ 是一个整数且 $1\\leq D\\leq99$），比如说字符串 $\\texttt{CBCBCBCB}$ 就压缩为 $\\texttt{[4CB]}$ 或者$\\texttt{[2[2CB]]}$，类似于后面这种压缩之后再压缩的称为二重压缩。如果是 $\\texttt{[2[2[2CB]]]}$ 则是三重的。现在我们给你外星人发送的密码，请你对其进行解压缩。\n", "inputFormat": "输入一行，一个字符串，表示外星人发送的密码。\n", "outputFormat": "输出一行，一个字符串，表示解压缩后的结果。", "hint": "【数据范围】\n\n对于 $50\\%$ 的数据：解压后的字符串长度在 $1000$ 以内，最多只有三重压缩。\n\n对于 $100\\%$ 的数据：解压后的字符串长度在 $20000$ 以内，最多只有十重压缩。保证只包含数字、大写字母、`[` 和 `]`。\n", "locale": "zh-CN"}}}
{"pid": "P1929", "type": "P", "difficulty": 3, "samples": [["5\n0  1  2  3  6 \n", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "广度优先搜索 BFS"], "title": "迷之阶梯", "background": "在经过地球防卫小队的数学家连续多日的工作后，外星人发的密码终于得以破解。它告诉我们在地球某一处的古老遗迹中，存在有对抗这次灾难的秘密武器。防卫小队立即赶到这处遗迹。", "description": "要进入遗迹，需要通过一段迷之阶梯。登上阶梯必须要按照它要求的方法，否则就无法登上阶梯。它要求的方法有以下三个限制：\n\n1. 如果下一步阶梯的高度只比当前阶梯高 $1$，则可以直接登上。\n\n2. 除了第一步阶梯外，都可以从当前阶梯退到前一步阶梯。\n\n3. 当你连续退下 $k$ 次阶梯后，你可以一次跳上不超过当前阶梯高度 $+2^{k}$ 的阶梯。\n比如说你现在位于第 $j$ 步阶梯，并且是从第 $j+k$ 步阶梯退下来的，那么你可以跳到高度不超过当前阶梯高度 $+2^{k}$ 的任何一步阶梯。  跳跃这一次只算一次移动。\n\n开始时我们在第 $1$ 步阶梯，由于时间紧迫，我们需要用最少的移动次数登上迷之阶梯。 请你计算出最少的移动步数。", "inputFormat": "第一行：一个整数 $N$，表示阶梯步数。\n\n第二行：$N$ 个整数，依次为每层阶梯的高度，保证递增。", "outputFormat": "第一行：一个整数，如果能登上阶梯，输出最小步数，否则输出 $-1$。", "hint": "【样例解释】\n\n连续登 $3$ 步，再后退 $3$ 步，然后直接跳上去。\n\n【数据范围】\n\n对于 $50\\%$ 的数据，$N\\le20$。\n\n对于 $100\\%$ 的数据，$1\\le N\\le200$，每步阶梯高度不超过 $2^{31}-1$。", "locale": "zh-CN", "translations": {"en": {"title": "Mysterious Staircase", "background": "After many days of work by the mathematicians of the Earth Defense Squad, the alien password was finally cracked. It tells us that in an ancient ruin somewhere on Earth lies a secret weapon to counter this disaster. The squad immediately heads to the site.", "description": "To enter the ruin, one must pass a mysterious staircase. You must climb it in the required manner; otherwise, you cannot ascend. The rules are as follows:\n\n1. If the next step’s height exceeds the current step’s height by exactly $1$, you may step onto it directly.\n\n2. Except for the first step, you may retreat from the current step to the previous step.\n\n3. After you have retreated consecutively $k$ times, you may make one jump to any step whose height is at most the current step’s height $+ 2^{k}$. For example, suppose you are now at step $j$, having retreated from step $j + k$. Then you may jump to any step whose height is no more than the current step’s height $+ 2^{k}$. This jump counts as a single move.\n\nYou start at step $1$. Due to time pressure, you need to reach the top step using the fewest moves. Please compute the minimum number of moves.", "inputFormat": "- The first line contains an integer $N$, the number of steps.\n- The second line contains $N$ integers, the heights of the steps in increasing order.", "outputFormat": "Output a single integer: the minimum number of moves if it is possible to reach the top step; otherwise, output $-1$.", "hint": "Sample Explanation: Climb up $3$ steps consecutively, then retreat $3$ steps, and then jump directly to the top.\n\nConstraints:\n- For $50\\%$ of the testdata, $N \\le 20$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 200$, and the height of each step does not exceed $2^{31} - 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "迷之阶梯", "background": "在经过地球防卫小队的数学家连续多日的工作后，外星人发的密码终于得以破解。它告诉我们在地球某一处的古老遗迹中，存在有对抗这次灾难的秘密武器。防卫小队立即赶到这处遗迹。", "description": "要进入遗迹，需要通过一段迷之阶梯。登上阶梯必须要按照它要求的方法，否则就无法登上阶梯。它要求的方法有以下三个限制：\n\n1. 如果下一步阶梯的高度只比当前阶梯高 $1$，则可以直接登上。\n\n2. 除了第一步阶梯外，都可以从当前阶梯退到前一步阶梯。\n\n3. 当你连续退下 $k$ 次阶梯后，你可以一次跳上不超过当前阶梯高度 $+2^{k}$ 的阶梯。\n比如说你现在位于第 $j$ 步阶梯，并且是从第 $j+k$ 步阶梯退下来的，那么你可以跳到高度不超过当前阶梯高度 $+2^{k}$ 的任何一步阶梯。  跳跃这一次只算一次移动。\n\n开始时我们在第 $1$ 步阶梯，由于时间紧迫，我们需要用最少的移动次数登上迷之阶梯。 请你计算出最少的移动步数。", "inputFormat": "第一行：一个整数 $N$，表示阶梯步数。\n\n第二行：$N$ 个整数，依次为每层阶梯的高度，保证递增。", "outputFormat": "第一行：一个整数，如果能登上阶梯，输出最小步数，否则输出 $-1$。", "hint": "【样例解释】\n\n连续登 $3$ 步，再后退 $3$ 步，然后直接跳上去。\n\n【数据范围】\n\n对于 $50\\%$ 的数据，$N\\le20$。\n\n对于 $100\\%$ 的数据，$1\\le N\\le200$，每步阶梯高度不超过 $2^{31}-1$。", "locale": "zh-CN"}}}
{"pid": "P1930", "type": "P", "difficulty": 5, "samples": [["8 8\nD 4 \nA 3 A 8 \nH 1 H 8 \n", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "USACO", "枚举", "广度优先搜索 BFS", "最短路"], "title": "[USACO3.3] 亚瑟王的宫殿", "background": null, "description": "很久以前，亚瑟王和他的骑士习惯每年元旦去庆祝他们的友谊。为了纪念上述事件，我们把这些故事看作是一个棋盘游戏。有一个国王和若干个骑士被放置在一个由许多方格组成的棋盘上，没有两个骑士在同一个方格内。\n\n这个例子是标准的 $8\\times 8$ 棋盘。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bvjh9o2q.png)\n\n国王可以移动到任何一个相邻的方格，从下图中黑子位置到下图中白子位置前提是他不掉出棋盘之外。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/joj1exif.png)\n\n一个骑士可以从下图中黑子位置移动到下图中白子位置（走“日”字形）但前提是他不掉出棋盘之外。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vf9vuque.png)\n\n在游戏中，玩家可在每个方格上放不止一个棋子，假定方格足够大，任何棋子都不会阻碍到其他棋子正常行动。\n\n玩家的任务就是用最小的步数把所有的棋子移动到同一个方格里。为了完成这个任务，他必须按照上面所说的规则去移动棋子。另外，玩家可以选择一个骑士跟国王从他们两个相遇的那个点开始一起行动，这时他们按照骑士的行动规则行动，其他的单独骑士则自己一直走到集中点。骑士和国王一起走的时候，只算一个人走的步数。\n\n请计算他们集中在一起的最小步数，而且玩家必须自己找出这个集中点。当然，这些棋子可以在棋盘的任何地方集合。", "inputFormat": "第一行：两个用空格隔开的整数：$R,C$ 分别为棋盘行数和列数。不超过 $26$ 列，$40$ 行。\n\n第二行到结尾：输入文件包含了一些有空格隔开的字母、数字对，一行有一个或以上。第一对为国王的位置，接下来是骑士的位置。可能没有骑士，也可能整个棋盘都是骑士。行从 $1$ 开始，列从大写字母 $A$ 开始。", "outputFormat": "单独一行表示棋子集中在一个方格的最小步数。", "hint": "### 样例解释\n\n他们集中在 $\\tt B5$。\n\n- 骑士 $1$：$\\tt A3\\to B5$（$1$ 步）。\n- 骑士 $2$：$\\tt A8\\to C7\\to B5$（$2$ 步）。\n- 骑士 $3$：$\\tt H1\\to G3\\to F5\\to D4$，此时国王开始与这个骑士一起走，$\\to \\tt B5$（$4$ 步）\n- 骑士 $4$：$\\tt H8\\to F7\\to D6\\to B5$（$3$ 步）。\n\n$1+2+4+3=10$ 步。\n\n题目翻译来自 NOCOW。\n\nUSACO Training Section 3.3", "locale": "zh-CN", "translations": {"en": {"title": "[USACO3.3] Camelot", "background": "", "description": "Long ago, King Arthur and his knights celebrated their friendship every New Year’s Day. To commemorate this, we treat these stories as a board game. A king and several knights are placed on a board consisting of many squares, with no two knights on the same square.\n\nThis example uses the standard $8\\times 8$ board.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bvjh9o2q.png)\n\nThe king can move to any adjacent square, from the black piece in the figure to any white piece, as long as he does not step off the board.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/joj1exif.png)\n\nA knight can move from the black piece in the figure to any white piece (in an L-shape), as long as it does not step off the board.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vf9vuque.png)\n\nIn this game, more than one piece may occupy the same square. Assume squares are large enough so that no piece blocks another’s movement.\n\nThe task is to move all pieces onto a single square — using the minimum total number of moves. To achieve this, pieces must move according to the rules above. Additionally, the player may choose one knight to meet the king at some square; from that meeting point onward, the king and that knight move together using the knight’s movement rules. The other knights move independently to the gathering square. While the king and the chosen knight move together, only one piece’s move is counted per step.\n\nCompute the minimum number of moves needed to gather on a single square, and note that the player must also determine the gathering square. Of course, the pieces may gather anywhere on the board.", "inputFormat": "- The first line: two integers separated by a space, $R, C$, the number of rows and columns of the board. Columns do not exceed $26$, rows do not exceed $40$.\n- From the second line to the end: the input contains space-separated letter/number pairs, one or more per line. The first pair is the king’s position, followed by the knights’ positions. There may be no knights, or the entire board may be filled with knights. Rows are numbered starting from $1$, and columns are labeled starting from uppercase letter $A$.", "outputFormat": "Output a single line with the minimum number of moves required to gather all pieces on one square.", "hint": "### Sample explanation\n\nThey gather at $\\tt B5$.\n\n- Knight $1$: $\\tt A3\\to B5$ (1 move).\n- Knight $2$: $\\tt A8\\to C7\\to B5$ (2 moves).\n- Knight $3$: $\\tt H1\\to G3\\to F5\\to D4$, the king meets this knight here, $\\to \\tt B5$ (4 moves).\n- Knight $4$: $\\tt H8\\to F7\\to D6\\to B5$ (3 moves).\n\n$1+2+4+3=10$ moves.\n\nProblem translation from NOCOW.\n\nUSACO Training Section 3.3.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO3.3] 亚瑟王的宫殿", "background": null, "description": "很久以前，亚瑟王和他的骑士习惯每年元旦去庆祝他们的友谊。为了纪念上述事件，我们把这些故事看作是一个棋盘游戏。有一个国王和若干个骑士被放置在一个由许多方格组成的棋盘上，没有两个骑士在同一个方格内。\n\n这个例子是标准的 $8\\times 8$ 棋盘。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bvjh9o2q.png)\n\n国王可以移动到任何一个相邻的方格，从下图中黑子位置到下图中白子位置前提是他不掉出棋盘之外。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/joj1exif.png)\n\n一个骑士可以从下图中黑子位置移动到下图中白子位置（走“日”字形）但前提是他不掉出棋盘之外。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vf9vuque.png)\n\n在游戏中，玩家可在每个方格上放不止一个棋子，假定方格足够大，任何棋子都不会阻碍到其他棋子正常行动。\n\n玩家的任务就是用最小的步数把所有的棋子移动到同一个方格里。为了完成这个任务，他必须按照上面所说的规则去移动棋子。另外，玩家可以选择一个骑士跟国王从他们两个相遇的那个点开始一起行动，这时他们按照骑士的行动规则行动，其他的单独骑士则自己一直走到集中点。骑士和国王一起走的时候，只算一个人走的步数。\n\n请计算他们集中在一起的最小步数，而且玩家必须自己找出这个集中点。当然，这些棋子可以在棋盘的任何地方集合。", "inputFormat": "第一行：两个用空格隔开的整数：$R,C$ 分别为棋盘行数和列数。不超过 $26$ 列，$40$ 行。\n\n第二行到结尾：输入文件包含了一些有空格隔开的字母、数字对，一行有一个或以上。第一对为国王的位置，接下来是骑士的位置。可能没有骑士，也可能整个棋盘都是骑士。行从 $1$ 开始，列从大写字母 $A$ 开始。", "outputFormat": "单独一行表示棋子集中在一个方格的最小步数。", "hint": "### 样例解释\n\n他们集中在 $\\tt B5$。\n\n- 骑士 $1$：$\\tt A3\\to B5$（$1$ 步）。\n- 骑士 $2$：$\\tt A8\\to C7\\to B5$（$2$ 步）。\n- 骑士 $3$：$\\tt H1\\to G3\\to F5\\to D4$，此时国王开始与这个骑士一起走，$\\to \\tt B5$（$4$ 步）\n- 骑士 $4$：$\\tt H8\\to F7\\to D6\\to B5$（$3$ 步）。\n\n$1+2+4+3=10$ 步。\n\n题目翻译来自 NOCOW。\n\nUSACO Training Section 3.3", "locale": "zh-CN"}}}
{"pid": "P1931", "type": "P", "difficulty": 4, "samples": [["3\nUSDollar\nBritishPound\nFrenchFranc\n3\nUSDollar 0.5 BritishPound\nBritishPound 10.0 FrenchFranc\nFrenchFranc 0.21 USDollar\n\n3\nUSDollar\nBritishPound\nFrenchFranc\n6\nUSDollar 0.5 BritishPound\nUSDollar 4.9 FrenchFranc\nBritishPound 10.0 FrenchFranc\nBritishPound 1.99 USDollar\nFrenchFranc 0.09 BritishPound\nFrenchFranc 0.19 USDollar\n\n0\n", "Case 1: Yes\nCase 2: No\n"]], "limits": {"time": [1000], "memory": [128000]}, "tags": ["图论"], "title": "套利", "background": "", "description": "套利是利用汇率差异实现货币增值。例如，$1$ 美元可以兑换 $0.5$ 英镑、$1$ 英镑可以兑换 $10$ 法郎、$1$ 法郎可以兑换 $0.21$ 美元。接下来，一个聪明的交易商就可以从1美元开始，$0.5 \\times 10.0 \\times 0.21 =1.05$ 美元，获得了 $5\\%$ 的利润。\n\n你的任务是写一个程序，从输入文件读入汇率清单，然后决定套利是有可能的或没有可能的。", "inputFormat": "输入文件包含多组数据，每组数据的第一行是一个整数 $n$（$1\\le n\\le30$）。代表有多少种货币。\n\n接下来 $n$ 行字符串，每行表示一种货币的名称（名称中不会出现空格）。下一行是一个整数 $m$ ，约定了汇率表的长度。随后的 $m$ 行中，每行为 $c_i,r_{i,j},c_j$。其中：$c_i$ 表示源货币的名称，实数 $r_{i,j}$ 表示货币 $c_i$ 到 $c_j$ 的汇率，以及 $c_j$ 表示目标货币的名称。没有出现在其中的换汇是不可能的。\n\n每组数据之间空一行。当 $n=0$ 时表示输入数据结束。", "outputFormat": "第 $i$ 组数据，输出 Case i: 后，如果可以套利，输出 `Yes`，否则输出 `No`。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Arbitrage", "background": "", "description": "Arbitrage is the practice of profiting from differences in exchange rates. For example, $1$ dollar can be exchanged for $0.5$ pounds, $1$ pound can be exchanged for $10$ francs, and $1$ franc can be exchanged for $0.21$ dollars. Then, a clever trader can start from $1$ dollar and get $0.5 \\times 10.0 \\times 0.21 = 1.05$ dollars, earning a $5\\%$ profit.\n\nYour task is to write a program that reads a list of exchange rates from the input file and then determines whether arbitrage is possible or not.", "inputFormat": "The input file contains multiple datasets. The first line of each dataset is an integer $n$ ($1 \\le n \\le 30$), representing the number of currencies.\n\nThe next $n$ lines each contain a string, which is the name of a currency (there will be no spaces in the names). The next line is an integer $m$, specifying the length of the exchange rate table. The following $m$ lines are each in the form $c_i, r_{i,j}, c_j$. Here, $c_i$ is the name of the source currency, the real number $r_{i,j}$ is the exchange rate from $c_i$ to $c_j$, and $c_j$ is the name of the target currency. Conversions not listed are impossible.\n\nThere is a blank line between datasets. When $n = 0$, the input ends.", "outputFormat": "For the $i$-th dataset, output Case i: followed by `Yes` if arbitrage is possible, otherwise output `No`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "套利", "background": "", "description": "套利是利用汇率差异实现货币增值。例如，$1$ 美元可以兑换 $0.5$ 英镑、$1$ 英镑可以兑换 $10$ 法郎、$1$ 法郎可以兑换 $0.21$ 美元。接下来，一个聪明的交易商就可以从1美元开始，$0.5 \\times 10.0 \\times 0.21 =1.05$ 美元，获得了 $5\\%$ 的利润。\n\n你的任务是写一个程序，从输入文件读入汇率清单，然后决定套利是有可能的或没有可能的。", "inputFormat": "输入文件包含多组数据，每组数据的第一行是一个整数 $n$（$1\\le n\\le30$）。代表有多少种货币。\n\n接下来 $n$ 行字符串，每行表示一种货币的名称（名称中不会出现空格）。下一行是一个整数 $m$ ，约定了汇率表的长度。随后的 $m$ 行中，每行为 $c_i,r_{i,j},c_j$。其中：$c_i$ 表示源货币的名称，实数 $r_{i,j}$ 表示货币 $c_i$ 到 $c_j$ 的汇率，以及 $c_j$ 表示目标货币的名称。没有出现在其中的换汇是不可能的。\n\n每组数据之间空一行。当 $n=0$ 时表示输入数据结束。", "outputFormat": "第 $i$ 组数据，输出 Case i: 后，如果可以套利，输出 `Yes`，否则输出 `No`。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1932", "type": "P", "difficulty": 4, "samples": [["1\n1", "2\n0\n1\n1\n0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "高精度", "洛谷原创"], "title": "A+B  A-B  A*B  A/B A%B Problem", "background": "这个题目很新颖吧！！！", "description": "求 $A$ 与 $B$ 的和、差、积、商、余。\n\n**由于数据有修改，减法运算结果可能带负号**", "inputFormat": "两行，每行一个数，为参与运算的两个数。", "outputFormat": "五行，每行一个数，分别为 $A$ 与 $B$ 的和、差、积、商、余。", "hint": "$|A|,|B| \\leq 2 \\times 10^4$，这里表示数字的位数而不是绝对值\n\n$ A,B > 0 $", "locale": "zh-CN", "translations": {"en": {"title": "A+B  A-B  A*B  A/B A%B Problem", "background": "This problem is quite novel!!!", "description": "Compute the sum, difference, product, quotient, and remainder of $A$ and $B$.\n\n**Due to updates to the testdata, the subtraction result may be negative.**", "inputFormat": "Two lines, each containing one number: the two numbers to be operated on.", "outputFormat": "Five lines, each containing one number: the sum, difference, product, quotient, and remainder of $A$ and $B$.", "hint": "$|A|,|B| \\leq 10^4$ denotes the number of digits rather than the absolute value.\n\n$ A,B > 0 $.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "A+B  A-B  A*B  A/B A%B Problem", "background": "这个题目很新颖吧！！！", "description": "求 $A$ 与 $B$ 的和、差、积、商、余。\n\n**由于数据有修改，减法运算结果可能带负号**", "inputFormat": "两行，每行一个数，为参与运算的两个数。", "outputFormat": "五行，每行一个数，分别为 $A$ 与 $B$ 的和、差、积、商、余。", "hint": "$|A|,|B| \\leq 2 \\times 10^4$，这里表示数字的位数而不是绝对值\n\n$ A,B > 0 $", "locale": "zh-CN"}}}
{"pid": "P1933", "type": "P", "difficulty": 7, "samples": [["2 2\n1 0\n0 1\n1 0 1 0", "4\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 6000, 6000, 6000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "2010", "NOI", "O2优化", "剪枝", "轮廓线 DP"], "title": "[NOI2010] 旅行路线", "background": "", "description": "2010 年，世博会在中国上海举办，吸引了数以千万计的中外游客前来参观。暑假期间小 Z 也来到了上海世博园， 她对世博园的拥挤早有所闻，对有的展馆甚至要排上好几个小时的队才能进入也做好了充分准备，但为了使得自己的世博之旅更加顺利舒畅，小 Z 决定在游玩之前先制定一份详细的旅行路线。\n\n小 Z 搜集到了世博园的地图，她发现从整体上看世博园是一块非常狭长的区域，而每一个展馆占用了其中一个几乎相同大小的方块。因此可以将整个园区看成一个 $n \\times m$ 的矩阵（$n \\leq 3$），其中每一个格子为一个主题展馆。\n\n由于不同展馆受到的关注度会有一些差别，因此排队时间的长短也不尽相同。小 Z 根据统计信息给每一个展馆 $(x, y)$ 标记了 $T_{x,y} = 0$ 或 $1$，如果 $T_{x,y} = 1$，表示这个展馆非常热门，需要排很长时间的队；如果 $T_{x,y} = 0$，表示这个展馆相对比较普通，几乎不需要排队即可进入参观。小 Z 希望能够制定一份合理的路线，使得能交替参观热门馆和普通馆，既不会因为总是参观热门馆而长时间在排队，也不会因为总是参观普通馆而使得游览过于平淡。同时，小 Z 办事很讲究效率，她希望在游遍所有展馆的同时，又不会走冤枉路浪费体力。因此她希望旅行路线满足以下几个限制：\n\n1. 在参观完位于 $(x, y)$ 的展馆后，下一个参观的是一个相邻的且未被参观过的展馆 $(x^\\prime, y^\\prime)$，即 $|x-x^\\prime|+|y-y^\\prime|=1$；\n2. 路线的起点位于整个矩阵的边界上，即 $x = 1$ 或 $x = n$ 或 $y = 1$ 或 $y = m$；\n\n她制定了一个长度为 $n \\times m$ 的 01 序列 $L$，她希望第 $i$ 个参观的展馆 $(x,y)$ 满足 $T_{x,y}=L_i$。\n\n小 Z 想知道有多少条不同的旅行路线能够满足她的要求。由于最终的结果可能很大，小 Z 只想知道可行的旅行路线总数 $\\bmod\\space 11\\,192\\,869$ 的值。\n", "inputFormat": "第一行包含两个正整数 $n, m$。\n\n第 2 行至第 $n+1$ 行，每行有 $m$ 个 01 整数，其中第 $i+1$ 行第 $j$ 个数表示 $T_{i,j}$。\n\n第 $n+2$ 行有 $n \\times m$ 个 01 整数，其中第 $i$ 个数表示 $L_i$ 的值。", "outputFormat": "仅包含一个整数，表示可行的旅行路线总数 $\\bmod \\space 11\\,192\\,869$ 的值。", "hint": "【样例说明】\n\n这四条可行的旅行路线分别为：\n\n$$\n\\begin{aligned}\n(1,1) \\to (1,2) \\to (2,2) \\to (2,1)\\\\\n(1,1) \\to (2,1) \\to (2,2) \\to (1,2)\\\\\n(2,2) \\to (1,2) \\to (1,1) \\to (2,1)\\\\\n(2,2) \\to (2,1) \\to (1,1) \\to (1,2)\n\\end{aligned}\n$$\n\n【数据规模和约定】\n\n- 对于 $10\\%$ 的数据：$n=1$；\n- 对于 $30\\%$ 的数据：$n=2$；\n- 对于 $60\\%$ 的数据：$n=3$，其中 $20\\%$ 的数据 $T_{i,j}$ 全为 $0$；\n- 对于 $100\\%$ 的数据：$m \\leq 50$，$L_i,T_{i,j} = 0$ 或 $1$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2010] Travel Route", "background": "", "description": "In 2010, the World Expo was held in Shanghai, China, attracting tens of millions of visitors from home and abroad. During the summer vacation, Xiao Z also came to the Shanghai Expo Park. She had heard that the Expo Park would be very crowded, and some pavilions might require queuing for several hours. She was fully prepared for that. To make her trip smoother and more enjoyable, Xiao Z decided to plan a detailed travel route before visiting.\n\nXiao Z collected a map of the Expo Park and found that, overall, the park is a very long and narrow area, and each pavilion occupies one square of almost the same size. Therefore, the entire park can be seen as an $n \\times m$ matrix ($n \\leq 3$), where each cell represents a themed pavilion.\n\nSince different pavilions have different levels of popularity, the queueing times also differ. Based on statistics, Xiao Z marked each pavilion $(x, y)$ with $T_{x,y} = 0$ or $1$. If $T_{x,y} = 1$, it means the pavilion is very popular and requires a long queue; if $T_{x,y} = 0$, it means the pavilion is relatively ordinary and can be entered with almost no queue. Xiao Z wants to plan a reasonable route so that she alternates between popular and ordinary pavilions. This way, she will neither spend too long queueing at popular pavilions nor find the trip too dull by only visiting ordinary ones. Also, Xiao Z values efficiency: she hopes to visit all pavilions without taking unnecessary detours. Therefore, she wants the travel route to satisfy the following constraints:\n\n1. After visiting the pavilion at $(x, y)$, the next pavilion to visit is an adjacent and unvisited pavilion $(x^\\prime, y^\\prime)$, i.e., $|x - x^\\prime| + |y - y^\\prime| = 1$.\n2. The starting point of the route lies on the boundary of the matrix, i.e., $x = 1$ or $x = n$ or $y = 1$ or $y = m$.\n\nShe prepares a 0/1 sequence $L$ of length $n \\times m$. She wants the $i$-th visited pavilion $(x, y)$ to satisfy $T_{x,y} = L_i$.\n\nXiao Z wants to know how many different travel routes satisfy her requirements. Since the final answer can be large, she only wants the total number of feasible routes modulo $11\\,192\\,869$.", "inputFormat": "- The first line contains two positive integers $n, m$.\n- Lines $2$ to $n+1$: each line contains $m$ 0/1 integers. In line $i+1$, the $j$-th number represents $T_{i,j}$.\n- Line $n+2$ contains $n \\times m$ 0/1 integers, where the $i$-th number represents $L_i$.", "outputFormat": "Output a single integer: the total number of feasible travel routes modulo $11\\,192\\,869$.", "hint": "Sample explanation:\n\nThe four feasible travel routes are:\n$$\n\\begin{aligned}\n(1,1) \\to (1,2) \\to (2,2) \\to (2,1)\\\\\n(1,1) \\to (2,1) \\to (2,2) \\to (1,2)\\\\\n(2,2) \\to (1,2) \\to (1,1) \\to (2,1)\\\\\n(2,2) \\to (2,1) \\to (1,1) \\to (1,2)\n\\end{aligned}\n$$\n\nConstraints:\n- For $10\\%$ of the testdata: $n = 1$.\n- For $30\\%$ of the testdata: $n = 2$.\n- For $60\\%$ of the testdata: $n = 3$, and for $20\\%$ of the testdata, all $T_{i,j}$ are $0$.\n- For $100\\%$ of the testdata: $m \\leq 50$, $L_i, T_{i,j} = 0$ or $1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2010] 旅行路线", "background": "", "description": "2010 年，世博会在中国上海举办，吸引了数以千万计的中外游客前来参观。暑假期间小 Z 也来到了上海世博园， 她对世博园的拥挤早有所闻，对有的展馆甚至要排上好几个小时的队才能进入也做好了充分准备，但为了使得自己的世博之旅更加顺利舒畅，小 Z 决定在游玩之前先制定一份详细的旅行路线。\n\n小 Z 搜集到了世博园的地图，她发现从整体上看世博园是一块非常狭长的区域，而每一个展馆占用了其中一个几乎相同大小的方块。因此可以将整个园区看成一个 $n \\times m$ 的矩阵（$n \\leq 3$），其中每一个格子为一个主题展馆。\n\n由于不同展馆受到的关注度会有一些差别，因此排队时间的长短也不尽相同。小 Z 根据统计信息给每一个展馆 $(x, y)$ 标记了 $T_{x,y} = 0$ 或 $1$，如果 $T_{x,y} = 1$，表示这个展馆非常热门，需要排很长时间的队；如果 $T_{x,y} = 0$，表示这个展馆相对比较普通，几乎不需要排队即可进入参观。小 Z 希望能够制定一份合理的路线，使得能交替参观热门馆和普通馆，既不会因为总是参观热门馆而长时间在排队，也不会因为总是参观普通馆而使得游览过于平淡。同时，小 Z 办事很讲究效率，她希望在游遍所有展馆的同时，又不会走冤枉路浪费体力。因此她希望旅行路线满足以下几个限制：\n\n1. 在参观完位于 $(x, y)$ 的展馆后，下一个参观的是一个相邻的且未被参观过的展馆 $(x^\\prime, y^\\prime)$，即 $|x-x^\\prime|+|y-y^\\prime|=1$；\n2. 路线的起点位于整个矩阵的边界上，即 $x = 1$ 或 $x = n$ 或 $y = 1$ 或 $y = m$；\n\n她制定了一个长度为 $n \\times m$ 的 01 序列 $L$，她希望第 $i$ 个参观的展馆 $(x,y)$ 满足 $T_{x,y}=L_i$。\n\n小 Z 想知道有多少条不同的旅行路线能够满足她的要求。由于最终的结果可能很大，小 Z 只想知道可行的旅行路线总数 $\\bmod\\space 11\\,192\\,869$ 的值。\n", "inputFormat": "第一行包含两个正整数 $n, m$。\n\n第 2 行至第 $n+1$ 行，每行有 $m$ 个 01 整数，其中第 $i+1$ 行第 $j$ 个数表示 $T_{i,j}$。\n\n第 $n+2$ 行有 $n \\times m$ 个 01 整数，其中第 $i$ 个数表示 $L_i$ 的值。", "outputFormat": "仅包含一个整数，表示可行的旅行路线总数 $\\bmod \\space 11\\,192\\,869$ 的值。", "hint": "【样例说明】\n\n这四条可行的旅行路线分别为：\n\n$$\n\\begin{aligned}\n(1,1) \\to (1,2) \\to (2,2) \\to (2,1)\\\\\n(1,1) \\to (2,1) \\to (2,2) \\to (1,2)\\\\\n(2,2) \\to (1,2) \\to (1,1) \\to (2,1)\\\\\n(2,2) \\to (2,1) \\to (1,1) \\to (1,2)\n\\end{aligned}\n$$\n\n【数据规模和约定】\n\n- 对于 $10\\%$ 的数据：$n=1$；\n- 对于 $30\\%$ 的数据：$n=2$；\n- 对于 $60\\%$ 的数据：$n=3$，其中 $20\\%$ 的数据 $T_{i,j}$ 全为 $0$；\n- 对于 $100\\%$ 的数据：$m \\leq 50$，$L_i,T_{i,j} = 0$ 或 $1$。", "locale": "zh-CN"}}}
{"pid": "P1934", "type": "P", "difficulty": 3, "samples": [["6 10\r\n8 5 7 9 3 5", "578\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "前缀和"], "title": "封印", "background": "很久以前，魔界大旱，水井全部干涸，温度也越来越高。为了拯救居民，夜叉族国王龙溟希望能打破神魔之井，进入人界“窃取”水灵珠，以修复大地水脉。可是六界之间皆有封印，神魔之井的封印由蜀山控制，并施有封印。龙溟作为魔界王族，习有穿行之术，可任意穿行至任何留有空隙的位置。然而封印不留有任何空隙！ 龙溟无奈之下只能强行破除封印。破除封印必然消耗一定的元气。为了寻找水灵珠，龙溟必须减少体力消耗。他可以在破除封印的同时使用越行术。", "description": "神魔之井的封印共有  $n$ 层，每层封印都有一个坚固值。身为魔族的龙溟单独打破一层封印时需要消耗的元气为该层封印的坚固值和封印总层数  $n$ 的平方的乘积； 但他也可以打破第 i 层到第 j 层之间的所有封印( $i<j$)，总元气消耗为第  $i,j$ 层封印的坚固值之和与第  $i,j$ 层之间所有封印层（包括第  $i,j$ 层）的坚固值之和的乘积，但为了不惊动蜀山，第  $i,j$ 层封印的坚固值之和不能大于  $t$ （单独打破可以不遵守）。", "inputFormat": "第一行包含两个正整数  $n$ 和  $t$。  \n第二行有  $n$ 个正整数，第  $i$ 个数为  $a_i$，表示第  $i$ 层封印的坚固值。", "outputFormat": "仅一行，包含一个正整数，表示最小消耗元气。\n", "hint": "#### 样例解释\n先单独打破第一层，再用越行术从第二层直接打破到最后一层。 这样消耗元气  $8 \\times 6^2 + (5 + 5) \\times (5 + 7 + 9 + 3 + 5) = 578$。\n#### 数据范围\n对于  $10\\%$ 的数据， $n\\le10$；  \n对于  $50\\%$ 的数据， $n\\le100$；  \n对于  $70\\%$ 的数据， $n\\le500$；  \n对于  $100\\%$ 的数据， $n\\le1000$， $a_i(1 \\le i \\le n) , t \\le 20000$。", "locale": "zh-CN", "translations": {"en": {"title": "Seal", "background": "Long ago, the Demon Realm suffered a great drought: all wells dried up, and temperatures kept rising. To save the people, Long Ming, the king of the Yasha clan, hoped to break the Well of Gods and Demons and enter the Human Realm to “steal” the Water Spirit Pearl to repair the earth’s water veins. However, there were seals between the Six Realms, and the Well of Gods and Demons was controlled by Shu Mountain and protected by a seal. As a royal of the Demon Realm, Long Ming had the art of traversing and could pass through any position that had a gap. Yet the seal left no gaps. Helpless, Long Ming had to forcibly break the seal, which would inevitably consume vital energy. To find the Water Spirit Pearl, Long Ming had to minimize his energy consumption. He could use the Traverse Technique at the same time as breaking the seal.", "description": "The seal of the Well of Gods and Demons has $n$ layers, and each layer has a sturdiness value. When Long Ming, a demon, breaks a single layer alone, the energy consumed equals the product of that layer’s sturdiness and the square of the total number of layers $n$. He can also break all seals from layer $i$ to layer $j$ (with $i<j$). The total energy consumed equals the product of the sum of the sturdiness of layers $i$ and $j$ and the sum of the sturdiness of all layers from $i$ to $j$ inclusive. However, to avoid alarming Shu Mountain, the sum of the sturdiness of layers $i$ and $j$ must not exceed $t$ (this restriction does not apply when breaking a single layer).", "inputFormat": "The first line contains two positive integers $n$ and $t$.  \nThe second line contains $n$ positive integers, where the $i$‑th number is $a_i$, representing the sturdiness of layer $i$.", "outputFormat": "Output a single line containing one positive integer, the minimum energy consumed.", "hint": "#### Sample Explanation\nFirst break the first layer alone, then use the Traverse Technique to break directly from the second layer to the last layer. The energy consumed is $8 \\times 6^2 + (5 + 5) \\times (5 + 7 + 9 + 3 + 5) = 578$.\n\n#### Constraints\nFor $10\\%$ of the testdata, $n \\le 10$.  \nFor $50\\%$ of the testdata, $n \\le 100$.  \nFor $70\\%$ of the testdata, $n \\le 500$.  \nFor $100\\%$ of the testdata, $n \\le 1000$, $a_i (1 \\le i \\le n),\\ t \\le 20000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "封印", "background": "很久以前，魔界大旱，水井全部干涸，温度也越来越高。为了拯救居民，夜叉族国王龙溟希望能打破神魔之井，进入人界“窃取”水灵珠，以修复大地水脉。可是六界之间皆有封印，神魔之井的封印由蜀山控制，并施有封印。龙溟作为魔界王族，习有穿行之术，可任意穿行至任何留有空隙的位置。然而封印不留有任何空隙！ 龙溟无奈之下只能强行破除封印。破除封印必然消耗一定的元气。为了寻找水灵珠，龙溟必须减少体力消耗。他可以在破除封印的同时使用越行术。", "description": "神魔之井的封印共有  $n$ 层，每层封印都有一个坚固值。身为魔族的龙溟单独打破一层封印时需要消耗的元气为该层封印的坚固值和封印总层数  $n$ 的平方的乘积； 但他也可以打破第 i 层到第 j 层之间的所有封印( $i<j$)，总元气消耗为第  $i,j$ 层封印的坚固值之和与第  $i,j$ 层之间所有封印层（包括第  $i,j$ 层）的坚固值之和的乘积，但为了不惊动蜀山，第  $i,j$ 层封印的坚固值之和不能大于  $t$ （单独打破可以不遵守）。", "inputFormat": "第一行包含两个正整数  $n$ 和  $t$。  \n第二行有  $n$ 个正整数，第  $i$ 个数为  $a_i$，表示第  $i$ 层封印的坚固值。", "outputFormat": "仅一行，包含一个正整数，表示最小消耗元气。\n", "hint": "#### 样例解释\n先单独打破第一层，再用越行术从第二层直接打破到最后一层。 这样消耗元气  $8 \\times 6^2 + (5 + 5) \\times (5 + 7 + 9 + 3 + 5) = 578$。\n#### 数据范围\n对于  $10\\%$ 的数据， $n\\le10$；  \n对于  $50\\%$ 的数据， $n\\le100$；  \n对于  $70\\%$ 的数据， $n\\le500$；  \n对于  $100\\%$ 的数据， $n\\le1000$， $a_i(1 \\le i \\le n) , t \\le 20000$。", "locale": "zh-CN"}}}
{"pid": "P1935", "type": "P", "difficulty": 4, "samples": [["3 3\n1 2 3\n4 5 6\n7 8 9\n9 8 7\n6 5 4\n3 2 1\n1 1 1\n1 3 1\n1 1 1", "81"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["集训队互测", "最小割", "状压 DP"], "title": "[国家集训队] 圈地计划", "background": null, "description": "最近房地产商 GDOI(Group of Dumbbells Or Idiots) 从 NOI(Nuts Old Idiots) 手中得到了一块开发土地。据了解，这块土地是一块矩形的区域，可以纵横划分为 $N\\times M$ 块小区域。GDOI 要求将这些区域分为商业区和工业区来开发。根据不同的地形环境，每块小区域建造商业区和工业区能取得不同的经济价值。更具体点，对于第 $i$ 行第 $j$ 列的区域，建造商业区将得到 $A_{i,j}$ 收益，建造工业区将得到 $B_{i,j}$ 收益。另外不同的区域连在一起可以得到额外的收益，即如果区域 $(i,j)$ 相邻（相邻是指两个格子有公共边）有 $k$ 块（显然 $k$ 不超过 $4$）类型不同于 $(i,j)$ 的区域，则这块区域能增加 $k\\times C_{i,j}$ 收益。经过 Tiger.S 教授的勘察，收益矩阵 $A,B,C$ 都已经知道了。你能帮 GDOI 求出一个收益最大的方案么？", "inputFormat": "输入第一行为两个整数，分别为正整数 $N$ 和 $M$，分别表示区域的行数和列数；\n\n第 $2$ 到 $N+1$ 行，每行 $M$ 个整数，表示商业区收益矩阵 $A$；\n\n第 $N+2$ 到 $2N+1$ 行，每行 $M$ 个整数，表示工业区收益矩阵 $B$；\n\n第 $2N+2$ 到 $3N+1$ 行，每行 $M$ 个整数，表示相邻额外收益矩阵 $C$。", "outputFormat": "输出只有一行，包含一个整数，为最大收益值。", "hint": "$1\\leq N,M\\leq 10$，$0\\leq A_{i,j},B_{i,j},C_{i,j}\\leq 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Land Enclosure Plan", "background": "", "description": "Recently, the real estate developer GDOI (Group of Dumbbells Or Idiots) obtained a piece of land for development from NOI (Nuts Old Idiots). This land is a rectangular area that can be divided into $N \\times M$ small cells. GDOI requires dividing these cells into a commercial zone and an industrial zone for development. Due to different terrain conditions, building a commercial zone or an industrial zone on each cell will yield different economic values. More specifically, for the cell in the $i$-th row and $j$-th column, building a commercial zone yields revenue $A_{i,j}$, and building an industrial zone yields revenue $B_{i,j}$. In addition, adjacent cells can bring extra revenue: if cell $(i,j)$ has $k$ neighboring cells (adjacency means two cells share a common side) whose type is different from that of $(i,j)$, then this cell gains an additional revenue of $k \\times C_{i,j}$. After Professor Tiger.S’s survey, the revenue matrices $A$, $B$, and $C$ are known. Can you help GDOI find a plan that maximizes the total revenue?", "inputFormat": "The first line contains two integers, positive integers $N$ and $M$, representing the number of rows and columns of the area, respectively.\n\nLines $2$ to $N+1$: each line contains $M$ integers, representing the commercial revenue matrix $A$.\n\nLines $N+2$ to $2N+1$: each line contains $M$ integers, representing the industrial revenue matrix $B$.\n\nLines $2N+2$ to $3N+1$: each line contains $M$ integers, representing the extra revenue matrix $C$ for adjacent cells.", "outputFormat": "Output a single line containing one integer, the maximum total revenue.", "hint": "$1 \\leq N, M \\leq 10$, $0 \\leq A_{i,j}, B_{i,j}, C_{i,j} \\leq 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 圈地计划", "background": null, "description": "最近房地产商 GDOI(Group of Dumbbells Or Idiots) 从 NOI(Nuts Old Idiots) 手中得到了一块开发土地。据了解，这块土地是一块矩形的区域，可以纵横划分为 $N\\times M$ 块小区域。GDOI 要求将这些区域分为商业区和工业区来开发。根据不同的地形环境，每块小区域建造商业区和工业区能取得不同的经济价值。更具体点，对于第 $i$ 行第 $j$ 列的区域，建造商业区将得到 $A_{i,j}$ 收益，建造工业区将得到 $B_{i,j}$ 收益。另外不同的区域连在一起可以得到额外的收益，即如果区域 $(i,j)$ 相邻（相邻是指两个格子有公共边）有 $k$ 块（显然 $k$ 不超过 $4$）类型不同于 $(i,j)$ 的区域，则这块区域能增加 $k\\times C_{i,j}$ 收益。经过 Tiger.S 教授的勘察，收益矩阵 $A,B,C$ 都已经知道了。你能帮 GDOI 求出一个收益最大的方案么？", "inputFormat": "输入第一行为两个整数，分别为正整数 $N$ 和 $M$，分别表示区域的行数和列数；\n\n第 $2$ 到 $N+1$ 行，每行 $M$ 个整数，表示商业区收益矩阵 $A$；\n\n第 $N+2$ 到 $2N+1$ 行，每行 $M$ 个整数，表示工业区收益矩阵 $B$；\n\n第 $2N+2$ 到 $3N+1$ 行，每行 $M$ 个整数，表示相邻额外收益矩阵 $C$。", "outputFormat": "输出只有一行，包含一个整数，为最大收益值。", "hint": "$1\\leq N,M\\leq 10$，$0\\leq A_{i,j},B_{i,j},C_{i,j}\\leq 10^3$。", "locale": "zh-CN"}}}
{"pid": "P1936", "type": "P", "difficulty": 2, "samples": [["1995", "m=987\nn=1597"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["递推"], "title": "水晶灯火灵", "background": "《爱与愁的故事第五弹·Halloween》第二章。\n\n题目容易吐血请谨慎阅读！\n", "description": "爱与愁大神兴高采烈地踏出妖精系道馆——他已经获得了妖精系徽章（鼓掌）！可是一出门就遇到一群パンプジン（Because today is Halloween）！仲谋半？没事，爱与愁大神手上还仅存着一只水晶灯火灵（完克パンプジン）。或许是因为这是爱与愁大神存活的最后一只精灵，水晶灯火灵十分振奋，一击打垮了一群パンプジン。水晶灯火灵使用了一招***（被打上了马赛克？！），刚好符合以下③条规则：\n\n1. $m,n \\in \\{1,2,\\cdots ,k\\}$；\n2. $(n^2-m\\times n-m^2)^2=1$；\n3. $m,n$ 为整数。\n\n爱与愁大神非常高兴，他想要知道 $m^2+n^2$ 的最大值，以及在什么情况下可以取得最大值。你能帮助他吗？请输出 $m$ 和 $n$。", "inputFormat": "输入共一个整数 $k$。\n", "outputFormat": "共两行，第一行是 $m$ 的最大值，第二行是 $n$ 的最大值。\n", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 数据，$k \\le 100$；\n- 对于 $100\\%$ 数据，$k \\le 10^8$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Chandelure", "background": "“The Story of Love and Sorrow V · Halloween,” Chapter 2.\n\nThis problem can be frustrating; please read carefully.", "description": "The great “Ai Yu Chou” stepped out of the Fairy-type Gym in high spirits—he had just earned the Fairy-type badge (applause)! But right outside, he ran into a group of パンプジン (Gourgeist) (Because today is Halloween)! What now? No worries—“Ai Yu Chou” still had a single Chandelure left (which perfectly counters Gourgeist). Perhaps because it was the last Pokémon still standing, Chandelure was extremely fired up and took down the whole group in one blow. Chandelure used a move *** (censored?!), which happened to satisfy the following three rules:\n\n1. $m, n \\in \\{1, 2, \\cdots, k\\}$;\n2. $(n^2 - m \\times n - m^2)^2 = 1$;\n3. $m, n$ are integers.\n\n“Ai Yu Chou” is very happy. He wants to know the maximum value of $m^2 + n^2$, and in which case this maximum can be achieved. Can you help him? Please output $m$ and $n$.", "inputFormat": "A single integer $k$.", "outputFormat": "Two lines. The first line is the maximum value of $m$. The second line is the maximum value of $n$.", "hint": "### Constraints\n\n- For $20\\%$ of the testdata, $k \\le 100$.\n- For $100\\%$ of the testdata, $k \\le 10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "水晶灯火灵", "background": "《爱与愁的故事第五弹·Halloween》第二章。\n\n题目容易吐血请谨慎阅读！\n", "description": "爱与愁大神兴高采烈地踏出妖精系道馆——他已经获得了妖精系徽章（鼓掌）！可是一出门就遇到一群パンプジン（Because today is Halloween）！仲谋半？没事，爱与愁大神手上还仅存着一只水晶灯火灵（完克パンプジン）。或许是因为这是爱与愁大神存活的最后一只精灵，水晶灯火灵十分振奋，一击打垮了一群パンプジン。水晶灯火灵使用了一招***（被打上了马赛克？！），刚好符合以下③条规则：\n\n1. $m,n \\in \\{1,2,\\cdots ,k\\}$；\n2. $(n^2-m\\times n-m^2)^2=1$；\n3. $m,n$ 为整数。\n\n爱与愁大神非常高兴，他想要知道 $m^2+n^2$ 的最大值，以及在什么情况下可以取得最大值。你能帮助他吗？请输出 $m$ 和 $n$。", "inputFormat": "输入共一个整数 $k$。\n", "outputFormat": "共两行，第一行是 $m$ 的最大值，第二行是 $n$ 的最大值。\n", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 数据，$k \\le 100$；\n- 对于 $100\\%$ 数据，$k \\le 10^8$。\n", "locale": "zh-CN"}}}
{"pid": "P1937", "type": "P", "difficulty": 5, "samples": [["5 4\n1\n3\n2\n1\n3\n1 3\n2 5\n2 3\n4 5", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2010", "线段树", "USACO", "排序"], "title": "[USACO10MAR] Barn Allocation G", "background": null, "description": "农夫约翰最近开了一个新的牲口棚。因为其中的一些畜栏风景更好，所以奶牛们向约翰发出了希望分配畜栏的申请。\n\n牲口棚有 $N$ 个畜栏 $(1 \\le N \\le 100,000)$，方便起见，我们把它们编号为 $1 \\sim N$，畜栏 $i$ 能容纳 $C_i$ 头牛 $(1 \\le Ci \\le 100,000)$。第 $i$ 头牛申请为它分配 $A_i$ 到 $B_i$ 的编号连续的畜栏来让它散步 $(1  \\le A_i \\le B_i \\le N)$。换言之，这头奶牛希望能自由地访问畜栏 $A_i \\sim B_i$，而为了满足它的要求，你需要在 $A_i \\sim B_i$ 范围内的畜栏中为它预留至少一单位容量。\n\n给出 $M$ 个畜栏分配请求 $(1 \\le M \\le 100,000)$，回答最多能满足多少头牛的要求而不增加额外的畜栏。", "inputFormat": "第一行包括两个以空格隔开的正整数：$N,M$。\n\n第二行到第 $N+1$ 行：第 $i+1$ 行每行包括一个整数：$C_i$。\n\n第 $N+2$ 到第 $N+M+1$ 行：第 $i+N+1$ 行每行包括两个整数 $A_i,B_i$。", "outputFormat": "仅一行：能满足的最大要求数。", "hint": "考虑以下例子：\n\n```plain\n畜栏号:      1   2   3   4   5\n           +---+---+---+---+---+\n容纳空间:   | 1 | 3 | 2 | 1 | 3 |  \n           +---+---+---+---+---+\nCow 1       XXXXXXXXXXX             (1, 3)\nCow 2           XXXXXXXXXXXXXXX     (2, 5)\nCow 3           XXXXXXX             (2, 3)\nCow 4                   XXXXXXX     (4, 5)\n```\n约翰显然不能满足所有的需求，因为畜栏 $3,4$ 请求太多了。\n\n经过试验，我们发现，我们能满足牛 $1,3,4$ 的需求，所以这组数据答案为 $3$。\n\n\nSource: USACO 2010 March Gold\n\nTranslator: @chrome01, @Hootime", "locale": "zh-CN", "translations": {"en": {"title": "[USACO10MAR] Barn Allocation G", "background": "", "description": "Farmer John has recently opened a new barn and is now accepting stall-allocation requests from cows, since some stalls have better views.\n\nThe barn contains $N$ stalls ($1 \\le N \\le 100{,}000$), labeled $1$ to $N$ for convenience. Stall $i$ can hold $C_i$ cows ($1 \\le C_i \\le 100{,}000$). The $i$-th cow wants to stroll in a contiguous range of stalls from $A_i$ to $B_i$ ($1 \\le A_i \\le B_i \\le N$). In other words, this cow wants access to every stall in the interval $[A_i, B_i]$, and to satisfy this request you must reserve one unit of capacity in every stall of that interval for this cow.\n\nGiven $M$ stall-allocation requests ($1 \\le M \\le 100{,}000$), determine the maximum number of cows whose requests can be satisfied (without building additional stalls).", "inputFormat": "- The first line contains two space-separated integers: $N, M$.\n- Lines $2$ to $N+1$: line $i+1$ contains a single integer $C_i$.\n- Lines $N+2$ to $N+M+1$: line $i+N+1$ contains two integers $A_i, B_i$.", "outputFormat": "Output a single line with the maximum number of requests that can be satisfied.", "hint": "Consider the following example:\n\n```plain\n畜栏号:      1   2   3   4   5\n           +---+---+---+---+---+\n容纳空间:   | 1 | 3 | 2 | 1 | 3 |  \n           +---+---+---+---+---+\nCow 1       XXXXXXXXXXX             (1, 3)\nCow 2           XXXXXXXXXXXXXXX     (2, 5)\nCow 3           XXXXXXX             (2, 3)\nCow 4                   XXXXXXX     (4, 5)\n```\nJohn clearly cannot satisfy all requests, since stalls $3$ and $4$ are over-requested.\n\nAfter testing, we find that we can satisfy cows $1, 3, 4$, so the answer for this testdata is $3$.\n\nSource: USACO 2010 March Gold\n\nTranslator: @chrome01\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO10MAR] Barn Allocation G", "background": null, "description": "农夫约翰最近开了一个新的牲口棚。因为其中的一些畜栏风景更好，所以奶牛们向约翰发出了希望分配畜栏的申请。\n\n牲口棚有 $N$ 个畜栏 $(1 \\le N \\le 100,000)$，方便起见，我们把它们编号为 $1 \\sim N$，畜栏 $i$ 能容纳 $C_i$ 头牛 $(1 \\le Ci \\le 100,000)$。第 $i$ 头牛申请为它分配 $A_i$ 到 $B_i$ 的编号连续的畜栏来让它散步 $(1  \\le A_i \\le B_i \\le N)$。换言之，这头奶牛希望能自由地访问畜栏 $A_i \\sim B_i$，而为了满足它的要求，你需要在 $A_i \\sim B_i$ 范围内的畜栏中为它预留至少一单位容量。\n\n给出 $M$ 个畜栏分配请求 $(1 \\le M \\le 100,000)$，回答最多能满足多少头牛的要求而不增加额外的畜栏。", "inputFormat": "第一行包括两个以空格隔开的正整数：$N,M$。\n\n第二行到第 $N+1$ 行：第 $i+1$ 行每行包括一个整数：$C_i$。\n\n第 $N+2$ 到第 $N+M+1$ 行：第 $i+N+1$ 行每行包括两个整数 $A_i,B_i$。", "outputFormat": "仅一行：能满足的最大要求数。", "hint": "考虑以下例子：\n\n```plain\n畜栏号:      1   2   3   4   5\n           +---+---+---+---+---+\n容纳空间:   | 1 | 3 | 2 | 1 | 3 |  \n           +---+---+---+---+---+\nCow 1       XXXXXXXXXXX             (1, 3)\nCow 2           XXXXXXXXXXXXXXX     (2, 5)\nCow 3           XXXXXXX             (2, 3)\nCow 4                   XXXXXXX     (4, 5)\n```\n约翰显然不能满足所有的需求，因为畜栏 $3,4$ 请求太多了。\n\n经过试验，我们发现，我们能满足牛 $1,3,4$ 的需求，所以这组数据答案为 $3$。\n\n\nSource: USACO 2010 March Gold\n\nTranslator: @chrome01, @Hootime", "locale": "zh-CN"}}}
{"pid": "P1938", "type": "P", "difficulty": 3, "samples": [["100 3 5 2 1\n1 5\n2 3\n1 4\n5 2 150\n2 5 120\n", "250"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2009", "USACO", "最短路"], "title": "[USACO09NOV] Job Hunt S", "background": null, "description": "奶牛们正在找工作。农场主约翰知道后，鼓励奶牛们四处碰碰运气。而且他还加了一条要求：一头牛在一个城市最多只能赚 $D\\ (1 \\le D \\le 1000)$ 美元，然后它必须到另一座城市工作。当然，它可以在别处工作一阵子后又回到原来的城市再最多赚 $D$ 美元。而且这样的往返次数没有限制。\n\n城市间有 $P\\ (1 \\le P \\le 150)$ 条单向路径连接，共有 $C\\ (1 \\le C \\le 220)$ 座城市，编号从 $1$ 到 $C$。奶牛贝茜当前处在城市 $S\\ (1 \\le S \\le C)$。路径 $i$ 从城市 $A_i$ 到城市 $B_i$（$1 \\le A_i,B_i \\le C$），在路径上行走不用任何花费。\n\n为了帮助贝茜，约翰让它使用他的私人飞机服务。这项服务有 $F\\ (1 \\le F \\le 350)$ 条单向航线，每条航线是从城市 $J_i$ 飞到另一座城市 $K_i$（$1 \\le J_i,K_i \\le C$），费用是 $T_i\\ (1 \\le T_i \\le 50000)$ 美元。如果贝茜手中没有现钱，可以用以后赚的钱来付机票钱。\n\n贝茜可以选择在任何时候，在任何城市退休。如果在工作时间上不做限制，贝茜总共可以赚多少钱呢？如果赚的钱也不会出现限制，就输出 $-1$。", "inputFormat": "第一行：$5$ 个用空格分开的整数 $D$，$P$，$C$，$F$，$S$。\n\n第 $2$ 到第 $P+1$ 行：第 $i+1$ 行包含 $2$ 个用空格分开的整数，表示一条从城市 $A_i$ 到城市 $B_i$ 的单向路径。\n\n接下来 $F$ 行，每行 $3$ 个用空格分开的整数，表示一条从城市 $J_i$ 到城市 $K_i$ 的单向航线，费用是 $T_i$。", "outputFormat": "一个整数，在上述规则下最多可以赚到的钱数。", "hint": "这个世界上有五个城市，三条单向路径和两条单向航线。贝茜从一号城市开始她的旅行，她在离开一个城市前最多只能在这个城市赚 $100$ 美元。\n\n\n贝茜可以通过从一号城市 $\\to$ 五号城市 $\\to$ 二号城市 $\\to$ 三号城市的旅行赚到 $4\\times 100-150=250$ 美元。\n\n\n(注：在四个城市各赚 $100$ 美元，从五号城市飞到二号城市花掉 $150$ 美元)\n\n\n来源：USACO2009 十一月银组", "locale": "zh-CN", "translations": {"en": {"title": "[USACO09NOV] Job Hunt S", "background": null, "description": "Bessie is running out of money and is searching for jobs. Farmer John knows this and wants the cows to travel around so he has imposed a rule that his cows can only make $D (1 \\le D \\le 1,000)$ dollars in a city before they must work in another city. Bessie can, however, return to a city after working elsewhere for a while and again earn the D dollars maximum in that city. There is no limit on the number of times Bessie can do this.\n\nBessie's world comprises $P (1 \\le P \\le 150)$ one-way paths connecting $C (2 \\le C \\le 220)$ cities conveniently numbered $1 \\sim C$. Bessie is currently in city $S (1 \\le S \\le C)$. Path i runs one-way from city $A_i$ to city $B_i (1 \\le A_i \\le C; 1 \\le B_i \\le C)$ and costs nothing to traverse.\n\nTo help Bessie, Farmer John will give her access to his private jet service. This service features $F (1 \\le F \\le 350)$ routes, each of which is a one way flight from one city $J_i$ to a another $K_i (1 \\le J_i \\le C; 1 \\le K_i \\le C)$ and which costs $T_i (1 \\le T_i \\le 50,000)$ dollars. Bessie can pay for the tickets from future earnings if she doesn't have the cash on hand.\n\nBessie can opt to retire whenever and wherever she wants. Given an unlimited amount of time, what is the most money that Bessie can make presuming she can make the full $D$ dollars in each city she can travel to? Print $-1$ if there is no limit to this amount.", "inputFormat": "The input is given from Standard Input in the following format:\n\n```plain\nD P C F S\nA_1 B_1\nA_2 B_2\n...\nA_n B_n\nJ_1 K_1 T_1\nJ_2 K_2 T_2\n...\nJ_n K_n T_n", "outputFormat": "One integer representing the answer.", "hint": "This world has five cities, three paths and two jet routes. Bessie starts out in city $1$, and she can only make $100$ dollars in each city before moving on.\n\nBessie can travel from city $1$ to city $5$ to city $2$ to city $3$, and make a total of $4 \\times 100 - 150 = 250$ dollars.\n\nSource: USACO 2009 November Silver", "locale": "en"}, "zh-CN": {"title": "[USACO09NOV] Job Hunt S", "background": null, "description": "奶牛们正在找工作。农场主约翰知道后，鼓励奶牛们四处碰碰运气。而且他还加了一条要求：一头牛在一个城市最多只能赚 $D\\ (1 \\le D \\le 1000)$ 美元，然后它必须到另一座城市工作。当然，它可以在别处工作一阵子后又回到原来的城市再最多赚 $D$ 美元。而且这样的往返次数没有限制。\n\n城市间有 $P\\ (1 \\le P \\le 150)$ 条单向路径连接，共有 $C\\ (1 \\le C \\le 220)$ 座城市，编号从 $1$ 到 $C$。奶牛贝茜当前处在城市 $S\\ (1 \\le S \\le C)$。路径 $i$ 从城市 $A_i$ 到城市 $B_i$（$1 \\le A_i,B_i \\le C$），在路径上行走不用任何花费。\n\n为了帮助贝茜，约翰让它使用他的私人飞机服务。这项服务有 $F\\ (1 \\le F \\le 350)$ 条单向航线，每条航线是从城市 $J_i$ 飞到另一座城市 $K_i$（$1 \\le J_i,K_i \\le C$），费用是 $T_i\\ (1 \\le T_i \\le 50000)$ 美元。如果贝茜手中没有现钱，可以用以后赚的钱来付机票钱。\n\n贝茜可以选择在任何时候，在任何城市退休。如果在工作时间上不做限制，贝茜总共可以赚多少钱呢？如果赚的钱也不会出现限制，就输出 $-1$。", "inputFormat": "第一行：$5$ 个用空格分开的整数 $D$，$P$，$C$，$F$，$S$。\n\n第 $2$ 到第 $P+1$ 行：第 $i+1$ 行包含 $2$ 个用空格分开的整数，表示一条从城市 $A_i$ 到城市 $B_i$ 的单向路径。\n\n接下来 $F$ 行，每行 $3$ 个用空格分开的整数，表示一条从城市 $J_i$ 到城市 $K_i$ 的单向航线，费用是 $T_i$。", "outputFormat": "一个整数，在上述规则下最多可以赚到的钱数。", "hint": "这个世界上有五个城市，三条单向路径和两条单向航线。贝茜从一号城市开始她的旅行，她在离开一个城市前最多只能在这个城市赚 $100$ 美元。\n\n\n贝茜可以通过从一号城市 $\\to$ 五号城市 $\\to$ 二号城市 $\\to$ 三号城市的旅行赚到 $4\\times 100-150=250$ 美元。\n\n\n(注：在四个城市各赚 $100$ 美元，从五号城市飞到二号城市花掉 $150$ 美元)\n\n\n来源：USACO2009 十一月银组", "locale": "zh-CN"}}}
{"pid": "P1939", "type": "P", "difficulty": 4, "samples": [["3\n6\n8\n10\n", "4\n9\n19\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "矩阵运算", "矩阵加速"], "title": "矩阵加速（数列）", "background": "", "description": "已知一个数列 $a$，它满足：  \n\n$$\na_x=\n\\begin{cases}\n 1 & x \\in\\{1,2,3\\}\\\\ \n a_{x-1}+a_{x-3} & x \\geq 4\n\\end{cases}\n$$\n\n求 $a$ 数列的第 $n$ 项对 $10^9+7$ 取余的值。\n", "inputFormat": "第一行一个整数 $T$，表示询问个数。\n\n以下 $T$ 行，每行一个正整数 $n$。\n", "outputFormat": "每行输出一个非负整数表示答案。\n", "hint": "- 对于 $30\\%$ 的数据 $n \\leq 100$；\n- 对于 $60\\%$ 的数据 $n \\leq2 \\times 10^7$；\n- 对于 $100\\%$ 的数据 $1 \\leq T \\leq 100$，$1 \\leq n \\leq 2 \\times 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Matrix Exponentiation (Sequence)", "background": "", "description": "Given a sequence $a$, it satisfies:  \n\n$$\na_x=\n\\begin{cases}\n 1 & x \\in\\{1,2,3\\}\\\\ \n a_{x-1}+a_{x-3} & x \\geq 4\n\\end{cases}\n$$\n\nFind the $n$-th term of sequence $a$ modulo $10^9+7$.", "inputFormat": "The first line contains an integer $T$, denoting the number of queries.\nEach of the following $T$ lines contains a positive integer $n$.", "outputFormat": "Output one non-negative integer per line, representing the answer.", "hint": "- For $30\\%$ of the testdata, $n \\leq 100$.\n- For $60\\%$ of the testdata, $n \\leq 2 \\times 10^7$.\n- For $100\\%$ of the testdata, $1 \\leq T \\leq 100$, $1 \\leq n \\leq 2 \\times 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "矩阵加速（数列）", "background": "", "description": "已知一个数列 $a$，它满足：  \n\n$$\na_x=\n\\begin{cases}\n 1 & x \\in\\{1,2,3\\}\\\\ \n a_{x-1}+a_{x-3} & x \\geq 4\n\\end{cases}\n$$\n\n求 $a$ 数列的第 $n$ 项对 $10^9+7$ 取余的值。\n", "inputFormat": "第一行一个整数 $T$，表示询问个数。\n\n以下 $T$ 行，每行一个正整数 $n$。\n", "outputFormat": "每行输出一个非负整数表示答案。\n", "hint": "- 对于 $30\\%$ 的数据 $n \\leq 100$；\n- 对于 $60\\%$ 的数据 $n \\leq2 \\times 10^7$；\n- 对于 $100\\%$ 的数据 $1 \\leq T \\leq 100$，$1 \\leq n \\leq 2 \\times 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1940", "type": "P", "difficulty": 5, "samples": [["4\n", "720\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "高精度"], "title": "Reversible Number", "background": "本题改编自 Project Euler Problem 145：\n\n> Some positive integers n have the property that the sum [ n + reverse(n) ] consists entirely of odd (decimal) digits. For instance, 36 + 63 = 99 and 409 + 904 = 1313. We will call such numbers reversible; so 36, 63, 409, and 904 are reversible. Leading zeroes are not allowed in either n or reverse(n).\n>\n> There are 120 reversible numbers below one-thousand.\n>\n> How many reversible numbers are there below one-billion (10^x)?", "description": "有些正整数 $n$ 可能满足 $n+\\text{rev}(n)$（$\\text{rev}(n)$ 是把 $n$ 倒过来写所得的数）得到的结果的各位都是奇数。\n\n比方说：\n\n- $n=36$ 时，$36+63=99$。\n- $n=409$ 时，$409+904=1313$。\n\n规定满足上述的 $n$ 称为 Reversible 数。所以 $36,63,409,904$ 都是 Reversible 数。\n\n当然，以 $0$ 开头的数统统不算 Reversible 数。\n\n那么，小于等于 $10^x$ 的 Reversible 数有多少个？", "inputFormat": "一个正整数 $x$。", "outputFormat": "一行一个整数，表示答案。", "hint": "对于 $30\\%$ 的数据，保证答案不大于 $2^{32}-1$。\n\n对于 $100\\%$ 的数据，$3 \\le x \\le 400$。", "locale": "zh-CN", "translations": {"en": {"title": "Reversible Number", "background": "This problem is adapted from Project Euler Problem 145:\n\n> Some positive integers n have the property that the sum [ n + reverse(n) ] consists entirely of odd (decimal) digits. For instance, 36 + 63 = 99 and 409 + 904 = 1313. We will call such numbers reversible; so 36, 63, 409, and 904 are reversible. Leading zeroes are not allowed in either n or reverse(n).\n>\n> There are 120 reversible numbers below one-thousand.\n>\n> How many reversible numbers are there below $10^x$?", "description": "Some positive integers $n$ satisfy that in $n + \\text{rev}(n)$ (where $\\text{rev}(n)$ is the number obtained by reversing the decimal digits of $n$), every digit of the sum is odd.\n\nFor example:\n- When $n = 36$, $36 + 63 = 99$.\n- When $n = 409$, $409 + 904 = 1313$.\n\nWe call such $n$ Reversible numbers. Therefore, $36$, $63$, $409$, and $904$ are all Reversible numbers.\n\nNumbers with leading zeros are not considered Reversible numbers.\n\nHow many Reversible numbers are there that are less than or equal to $10^x$?", "inputFormat": "A single positive integer $x$.", "outputFormat": "Output a single line containing one integer, the answer.", "hint": "For $30\\%$ of the testdata, the answer does not exceed $2^{32} - 1$.\n\nFor $100\\%$ of the testdata, $3 \\le x \\le 400$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Reversible Number", "background": "本题改编自 Project Euler Problem 145：\n\n> Some positive integers n have the property that the sum [ n + reverse(n) ] consists entirely of odd (decimal) digits. For instance, 36 + 63 = 99 and 409 + 904 = 1313. We will call such numbers reversible; so 36, 63, 409, and 904 are reversible. Leading zeroes are not allowed in either n or reverse(n).\n>\n> There are 120 reversible numbers below one-thousand.\n>\n> How many reversible numbers are there below one-billion (10^x)?", "description": "有些正整数 $n$ 可能满足 $n+\\text{rev}(n)$（$\\text{rev}(n)$ 是把 $n$ 倒过来写所得的数）得到的结果的各位都是奇数。\n\n比方说：\n\n- $n=36$ 时，$36+63=99$。\n- $n=409$ 时，$409+904=1313$。\n\n规定满足上述的 $n$ 称为 Reversible 数。所以 $36,63,409,904$ 都是 Reversible 数。\n\n当然，以 $0$ 开头的数统统不算 Reversible 数。\n\n那么，小于等于 $10^x$ 的 Reversible 数有多少个？", "inputFormat": "一个正整数 $x$。", "outputFormat": "一行一个整数，表示答案。", "hint": "对于 $30\\%$ 的数据，保证答案不大于 $2^{32}-1$。\n\n对于 $100\\%$ 的数据，$3 \\le x \\le 400$。", "locale": "zh-CN"}}}
{"pid": "P1941", "type": "P", "difficulty": 4, "samples": [["10 10 6 \n3 9  \n9 9  \n1 2  \n1 3  \n1 2  \n1 1  \n2 1  \n2 1  \n1 6  \n2 2  \n1 2 7 \n5 1 5 \n6 3 5 \n7 5 8 \n8 7 9 \n9 1 3 \n", "1\n6\n\n"], ["10 10 4 \n1 2  \n3 1  \n2 2  \n1 8  \n1 8  \n3 2  \n2 1  \n2 1  \n2 2  \n1 2  \n1 0 2 \n6 7 9 \n9 1 4 \n3 8 10  ", "0\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2014", "NOIP 提高组", "枚举", "背包 DP"], "title": "[NOIP 2014 提高组] 飞扬的小鸟", "background": "NOIP2014 提高组 D1T3", "description": "Flappy Bird 是一款风靡一时的休闲手机游戏。玩家需要不断控制点击手机屏幕的频率来调节小鸟的飞行高度，让小鸟顺利通过画面右方的管道缝隙。如果小鸟一不小心撞到了水管或者掉在地上的话，便宣告失败。\n\n为了简化问题，我们对游戏规则进行了简化和改编:\n\n游戏界面是一个长为 $n$，高为 $m$ 的二维平面，其中有 $k$ 个管道（忽略管道的宽度）。 \n\n小鸟始终在游戏界面内移动。小鸟从游戏界面最左边任意整数高度位置出发，到达游戏界面最右边时，游戏完成。\n\n小鸟每个单位时间沿横坐标方向右移的距离为 $1$，竖直移动的距离由玩家控制。如果点击屏幕，小鸟就会上升一定高度 $x$，每个单位时间可以点击多次，效果叠加；如果不点击屏幕，小鸟就会下降一定高度 $y$。小鸟位于横坐标方向不同位置时，上升的高度 $x$ 和下降的高度 $y$ 可能互不相同。\n\n小鸟高度等于 $0$ 或者小鸟碰到管道时，游戏失败。小鸟高度为 $m$ 时，无法再上升。\n\n现在,请你判断是否可以完成游戏。如果可以，输出最少点击屏幕数；否则，输出小鸟最多可以通过多少个管道缝隙。", "inputFormat": "第 $1$ 行有 $3$ 个整数 $n, m, k$，分别表示游戏界面的长度，高度和水管的数量，每两个整数之间用一个空格隔开；\n\n接下来的 $n$ 行，每行 $2$ 个用一个空格隔开的整数 $x$ 和 $y$，依次表示在横坐标位置 $0 \\sim n-1$ 上玩家点击屏幕后，小鸟在下一位置上升的高度 $x$，以及在这个位置上玩家不点击屏幕时，小鸟在下一位置下降的高度 $y$。\n\n接下来 $k$ 行，每行 $3$ 个整数 $p,l,h$，每两个整数之间用一个空格隔开。每行表示一个管道，其中 $p$ 表示管道的横坐标，$l$ 表示此管道缝隙的下边沿高度，$h$ 表示管道缝隙上边沿的高度（输入数据保证 $p$ 各不相同，但不保证按照大小顺序给出）。", "outputFormat": "共两行。\n\n第一行，包含一个整数，如果可以成功完成游戏，则输出 $1$，否则输出 $0$。\n\n第二行，包含一个整数，如果第一行为 $1$，则输出成功完成游戏需要最少点击屏幕数，否则，输出小鸟最多可以通过多少个管道缝隙。", "hint": " \n【输入输出样例说明】\n\n如下图所示，蓝色直线表示小鸟的飞行轨迹，红色直线表示管道。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/59alxbqi.png)\n\n【数据范围】\n\n对于 $30\\%$ 的数据：$5 \\leq n \\leq 10, 5 \\leq m \\leq 10, k=0$，保证存在一组最优解使得同一单位时间最多点击屏幕 $3$ 次；\n\n对于 $50\\%$ 的数据：$5 \\leq n \\leq 20, 5 \\leq m \\leq 10$，保证存在一组最优解使得同一单位时间最多点击屏幕 $3$ 次；\n\n对于 $70\\%$ 的数据：$5 \\leq n \\leq 1000, 5 \\leq m \\leq 100$；\n\n对于 $100\\%$ 的数据：$5 \\leq n \\leq 10000$，$5 \\leq m \\leq 1000$，$0 \\leq k < n$，$0 < x,y < m$，$0 < p < n$，$0 \\leq l < h \\leq m$， $l + 1 < h$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Senior] Flappy Bird", "background": "NOIP 2014 Senior D1T3.", "description": "Flappy Bird is a once-popular casual mobile game. The player needs to continuously control the tapping frequency to adjust the bird’s altitude so that it passes through the gaps between the pipes on the right side of the screen. If the bird accidentally hits a pipe or falls to the ground, the game ends in failure.\n\nTo simplify the problem, we modify the game rules as follows:\n\nThe game interface is a 2D plane with length $n$ and height $m$, containing $k$ pipes (pipe width is ignored).\n\nThe bird always moves within the game interface. It starts from any integer height on the left edge of the interface, and the game is completed when it reaches the right edge.\n\nIn each unit of time, the bird moves a distance of $1$ to the right along the horizontal axis. Its vertical movement is controlled by the player. If the screen is tapped, the bird rises by a certain height $x$, and you may tap multiple times within one unit of time with the effects adding up; if you do not tap, the bird falls by a certain height $y$. The rise $x$ and fall $y$ can vary with the bird’s horizontal position.\n\nIf the bird’s height equals $0$ or it hits a pipe, the game fails. When the bird’s height is $m$, it cannot rise further.\n\nNow, please determine whether the game can be completed. If it can, output the minimum number of taps. Otherwise, output the maximum number of pipe gaps the bird can pass through.", "inputFormat": "The first line contains $3$ integers $n, m, k$, representing the length and height of the game interface and the number of pipes, respectively, separated by a single space.\n\nThe next $n$ lines each contain $2$ integers $x$ and $y$, separated by a single space. For horizontal positions $0 \\sim n - 1$ in order, $x$ denotes how much the bird will rise at the next position if the player taps at this position, and $y$ denotes how much the bird will fall at the next position if the player does not tap at this position.\n\nThen follow $k$ lines, each containing $3$ integers $p, l, h$, separated by single spaces. Each line describes one pipe, where $p$ is the pipe’s horizontal coordinate, $l$ is the lower boundary of the gap, and $h$ is the upper boundary of the gap (the input guarantees that all $p$ are distinct, but they are not guaranteed to be in sorted order).", "outputFormat": "Output two lines.\n\nThe first line contains an integer. Output $1$ if the game can be successfully completed; otherwise, output $0$.\n\nThe second line contains an integer. If the first line is $1$, output the minimum number of taps required to complete the game. Otherwise, output the maximum number of pipe gaps the bird can pass through.", "hint": "[Explanation for the sample input and output]\n\nAs shown in the figure below, the blue line is the bird’s flight path, and the red line represents the pipes.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/59alxbqi.png)\n\nConstraints\n\n- For $30\\%$ of the testdata: $5 \\leq n \\leq 10$, $5 \\leq m \\leq 10$, $k = 0$, and there exists an optimal solution where at most $3$ taps occur within any single unit of time.\n- For $50\\%$ of the testdata: $5 \\leq n \\leq 20$, $5 \\leq m \\leq 10$, and there exists an optimal solution where at most $3$ taps occur within any single unit of time.\n- For $70\\%$ of the testdata: $5 \\leq n \\leq 1000$, $5 \\leq m \\leq 100$.\n- For $100\\%$ of the testdata: $5 \\leq n \\leq 10000$, $5 \\leq m \\leq 1000$, $0 \\leq k < n$, $0 < x, y < m$, $0 < p < n$, $0 \\leq l < h \\leq m$, $l + 1 < h$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 提高组] 飞扬的小鸟", "background": "NOIP2014 提高组 D1T3", "description": "Flappy Bird 是一款风靡一时的休闲手机游戏。玩家需要不断控制点击手机屏幕的频率来调节小鸟的飞行高度，让小鸟顺利通过画面右方的管道缝隙。如果小鸟一不小心撞到了水管或者掉在地上的话，便宣告失败。\n\n为了简化问题，我们对游戏规则进行了简化和改编:\n\n游戏界面是一个长为 $n$，高为 $m$ 的二维平面，其中有 $k$ 个管道（忽略管道的宽度）。 \n\n小鸟始终在游戏界面内移动。小鸟从游戏界面最左边任意整数高度位置出发，到达游戏界面最右边时，游戏完成。\n\n小鸟每个单位时间沿横坐标方向右移的距离为 $1$，竖直移动的距离由玩家控制。如果点击屏幕，小鸟就会上升一定高度 $x$，每个单位时间可以点击多次，效果叠加；如果不点击屏幕，小鸟就会下降一定高度 $y$。小鸟位于横坐标方向不同位置时，上升的高度 $x$ 和下降的高度 $y$ 可能互不相同。\n\n小鸟高度等于 $0$ 或者小鸟碰到管道时，游戏失败。小鸟高度为 $m$ 时，无法再上升。\n\n现在,请你判断是否可以完成游戏。如果可以，输出最少点击屏幕数；否则，输出小鸟最多可以通过多少个管道缝隙。", "inputFormat": "第 $1$ 行有 $3$ 个整数 $n, m, k$，分别表示游戏界面的长度，高度和水管的数量，每两个整数之间用一个空格隔开；\n\n接下来的 $n$ 行，每行 $2$ 个用一个空格隔开的整数 $x$ 和 $y$，依次表示在横坐标位置 $0 \\sim n-1$ 上玩家点击屏幕后，小鸟在下一位置上升的高度 $x$，以及在这个位置上玩家不点击屏幕时，小鸟在下一位置下降的高度 $y$。\n\n接下来 $k$ 行，每行 $3$ 个整数 $p,l,h$，每两个整数之间用一个空格隔开。每行表示一个管道，其中 $p$ 表示管道的横坐标，$l$ 表示此管道缝隙的下边沿高度，$h$ 表示管道缝隙上边沿的高度（输入数据保证 $p$ 各不相同，但不保证按照大小顺序给出）。", "outputFormat": "共两行。\n\n第一行，包含一个整数，如果可以成功完成游戏，则输出 $1$，否则输出 $0$。\n\n第二行，包含一个整数，如果第一行为 $1$，则输出成功完成游戏需要最少点击屏幕数，否则，输出小鸟最多可以通过多少个管道缝隙。", "hint": " \n【输入输出样例说明】\n\n如下图所示，蓝色直线表示小鸟的飞行轨迹，红色直线表示管道。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/59alxbqi.png)\n\n【数据范围】\n\n对于 $30\\%$ 的数据：$5 \\leq n \\leq 10, 5 \\leq m \\leq 10, k=0$，保证存在一组最优解使得同一单位时间最多点击屏幕 $3$ 次；\n\n对于 $50\\%$ 的数据：$5 \\leq n \\leq 20, 5 \\leq m \\leq 10$，保证存在一组最优解使得同一单位时间最多点击屏幕 $3$ 次；\n\n对于 $70\\%$ 的数据：$5 \\leq n \\leq 1000, 5 \\leq m \\leq 100$；\n\n对于 $100\\%$ 的数据：$5 \\leq n \\leq 10000$，$5 \\leq m \\leq 1000$，$0 \\leq k < n$，$0 < x,y < m$，$0 < p < n$，$0 \\leq l < h \\leq m$， $l + 1 < h$。", "locale": "zh-CN"}}}
{"pid": "P1942", "type": "P", "difficulty": 4, "samples": [["4\n0000\n011\n1011\n11011", "0000\n0110\n1001\n1111"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "NOI 导刊"], "title": "词编码", "background": null, "description": "一个发送机可以通过一条信道发送一些以 $0$ 和 $1$ 组成的单词。在其尽头的接收机可以使用特殊技术恢复到最初的单词。每个单词最初都由 $0$ 和 $1$ 组成。所有的单词最初长度都为 $n$。当穿过信道之后单词可能发生以下几种情况之一：\n\n1. 任意（一个）$0$ 被 $1$ 取代\n2. 任意（一个）符号被删除\n3. 一个符号（$0$ 或 $1$）被插入到任何位置\n4. 不改变\n\n我们知道最初的单词都具有以下性质：有 $1$ 的位置号的总和是 $n+1$ 的倍数，或者是 $0$。", "inputFormat": "第一行一个正整数 $n\\ (4\\le n\\le 1000)$。\n\n下面若干行（**不一定是 $\\bm n$ 行！**），每行表示一个穿过信道之后的单词，每个单词占一行。\n\n**请读入到输入文件末尾：**\n\n- 对于 C++ 的 `std::cin`，可以使用 `while (std::cin >> s) {/* ... */}` 来实现这一功能，其中 `s` 是 `std::string` 类型的变量。\n- 对于 C/C++ 的 `scanf`，可以使用 `while (scanf(\"%s\", s) == 1) {/* ... */}` 来实现这一功能，其中 `s` 是 `char*` 类型的变量。\n- 对于其他输入函数实现这一功能的方式，请自行查阅文档。\n\n保证单词数不大于 $2001$。", "outputFormat": "你的程序应该打印输出原始序列的词，注意换行。\n\n若有多解，请按以下顺序确定最优解，并输出最优解：\n\n- 按照操作 $4$ $\\to$ 操作 $1$ $\\to$ 操作 $2$ $\\to$ 操作 $3$ 的顺序确定最优解\n- 同一操作中，按操作位置从左到右的顺序确定最优解\n- 对于插入到同一位置的操作 $3$，按插入 $0$ 比插入 $1$ 更优\n\n如果无解则输出 $-1$。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Word Encoding", "background": "", "description": "A transmitter sends words consisting of $0$ and $1$ through a channel. At the other end, a receiver can use special techniques to recover the original words. Each original word consists only of $0$ and $1$, and every original word has length $n$. After passing through the channel, exactly one of the following may happen to a word:\n\n1. Any single $0$ is replaced by $1$.\n2. Any single symbol is deleted.\n3. A symbol ($0$ or $1$) is inserted at any position.\n4. No change.\n\nWe know that every original word has the following property: the sum of the position numbers of the $1$s is a multiple of $n+1$, or equals $0$.", "inputFormat": "The first line contains a positive integer $n\\ (4\\le n\\le 1000)$.\n\nThen follow several lines (not necessarily $\\bm n$ lines!), each containing one word after passing through the channel, one word per line.\n\nPlease read until the end of file:\n\n- For C++ `std::cin`, you can use `while (std::cin >> s) {/* ... */}`, where `s` is a variable of type `std::string`.\n- For C/C++ `scanf`, you can use `while (scanf(\"%s\", s) == 1) {/* ... */}`, where `s` is a variable of type `char*`.\n- For other input functions, please consult their documentation for how to read until EOF.\n\nIt is guaranteed that the number of words does not exceed $2001$.", "outputFormat": "Your program should print the original words, one per line.\n\nIf there are multiple valid originals, choose the best one in the following order and output that best one:\n\n- Prefer by operation in the order: operation $4$ → operation $1$ → operation $2$ → operation $3$.\n- Within the same operation, prefer the one with the operation position from left to right.\n- For operation $3$ inserting at the same position, inserting $0$ is preferred over inserting $1$.\n\nIf there is no solution, output $-1$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "词编码", "background": null, "description": "一个发送机可以通过一条信道发送一些以 $0$ 和 $1$ 组成的单词。在其尽头的接收机可以使用特殊技术恢复到最初的单词。每个单词最初都由 $0$ 和 $1$ 组成。所有的单词最初长度都为 $n$。当穿过信道之后单词可能发生以下几种情况之一：\n\n1. 任意（一个）$0$ 被 $1$ 取代\n2. 任意（一个）符号被删除\n3. 一个符号（$0$ 或 $1$）被插入到任何位置\n4. 不改变\n\n我们知道最初的单词都具有以下性质：有 $1$ 的位置号的总和是 $n+1$ 的倍数，或者是 $0$。", "inputFormat": "第一行一个正整数 $n\\ (4\\le n\\le 1000)$。\n\n下面若干行（**不一定是 $\\bm n$ 行！**），每行表示一个穿过信道之后的单词，每个单词占一行。\n\n**请读入到输入文件末尾：**\n\n- 对于 C++ 的 `std::cin`，可以使用 `while (std::cin >> s) {/* ... */}` 来实现这一功能，其中 `s` 是 `std::string` 类型的变量。\n- 对于 C/C++ 的 `scanf`，可以使用 `while (scanf(\"%s\", s) == 1) {/* ... */}` 来实现这一功能，其中 `s` 是 `char*` 类型的变量。\n- 对于其他输入函数实现这一功能的方式，请自行查阅文档。\n\n保证单词数不大于 $2001$。", "outputFormat": "你的程序应该打印输出原始序列的词，注意换行。\n\n若有多解，请按以下顺序确定最优解，并输出最优解：\n\n- 按照操作 $4$ $\\to$ 操作 $1$ $\\to$ 操作 $2$ $\\to$ 操作 $3$ 的顺序确定最优解\n- 同一操作中，按操作位置从左到右的顺序确定最优解\n- 对于插入到同一位置的操作 $3$，按插入 $0$ 比插入 $1$ 更优\n\n如果无解则输出 $-1$。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1943", "type": "P", "difficulty": 6, "samples": [["2", "1.50000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "NOI 导刊"], "title": "Local Maxima", "background": "", "description": "给出一个排列。如果其中一个数比它前面的数都大，则称为**局部最大值**（Local Maxima）。\n\n现在问在一个长度为 $n$ 的随机生成的排列中，期望有多少个数为局部最大值。", "inputFormat": "一行一个正整数 $n$。\n", "outputFormat": "输出一行一个实数表示答案，保留八位小数。", "hint": "长度为 $2$ 的排列共 $2$ 种，为 $(1,2)$ 和 $(2,1)$。前者两个数都为局部最大值，后者仅有第一个数 $2$ 为局部最大值。\n\n\n### 数据范围及约定 \n\n- 对于 $30\\%$ 的数据，$n \\leq 10$；\n- 对于 $80\\%$ 的数据，$n \\leq 10^6$；\n- 对于 $100\\%$ 的数据，$1\\leq n < 2^{31}$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Local Maxima", "background": "", "description": "Given a permutation. If an element is larger than all the elements before it, it is called a \"Local Maxima\".\n\nNow, in a randomly generated permutation of length $n$, find the expected number of elements that are \"Local Maxima\".", "inputFormat": "A single line containing a positive integer $n$.", "outputFormat": "Output a single real number representing the answer, rounded to eight decimal places.", "hint": "There are $2$ permutations of length $2$: $(1, 2)$ and $(2, 1)$. In the former, both numbers are \"Local Maxima\"; in the latter, only the first number $2$ is a \"Local Maxima\".\n\nConstraints\n\n- For $30\\%$ of the testdata, $n \\leq 10$.\n- For $80\\%$ of the testdata, $n \\leq 10^6$.\n- For $100\\%$ of the testdata, $1 \\leq n < 2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Local Maxima", "background": "", "description": "给出一个排列。如果其中一个数比它前面的数都大，则称为**局部最大值**（Local Maxima）。\n\n现在问在一个长度为 $n$ 的随机生成的排列中，期望有多少个数为局部最大值。", "inputFormat": "一行一个正整数 $n$。\n", "outputFormat": "输出一行一个实数表示答案，保留八位小数。", "hint": "长度为 $2$ 的排列共 $2$ 种，为 $(1,2)$ 和 $(2,1)$。前者两个数都为局部最大值，后者仅有第一个数 $2$ 为局部最大值。\n\n\n### 数据范围及约定 \n\n- 对于 $30\\%$ 的数据，$n \\leq 10$；\n- 对于 $80\\%$ 的数据，$n \\leq 10^6$；\n- 对于 $100\\%$ 的数据，$1\\leq n < 2^{31}$。\n", "locale": "zh-CN"}}}
