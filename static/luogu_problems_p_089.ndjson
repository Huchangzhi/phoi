{"pid": "P2804", "type": "P", "difficulty": 4, "samples": [["4 3\n1 5 4 2", "5"], ["4 4\n5 2 7 3", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "数学", "线性数据结构", "二分", "树状数组", "递归", "离散化"], "title": "神秘数字", "background": "在公元 XXXX 年，侦探小明收到了组织的神秘信息，在 Y 市的某个地方有一道神秘的门。小明到达了那个门后，发现门上有一行字：“这个门需要密码才能解锁。”小明左找右找，终于找到了一张字条：“现在给你 $n$ 个数，请你求出这 $n$ 个数里面，有多少个连续的数的平均数大于某个给定的数 $M$？注意：这个数可能会很大，请输出这个数对 $92084931$ 取模的结果。最终的结果即是这个门的密码。”小明苦思冥想了半天，但始终找不到答案。于是他来求助于你。请你帮他解决这个问题。由于小明十分着急，他最多只能等 $1$ 秒。", "description": "给定 $n$ 个数，请你帮助小明求出里面有多少个连续的数的平均数大于给定的某个数 $M$。并将这个方案数输出。注意：这个数可能会很大，所以请输出这个数对 $92084931$ 取模的结果。", "inputFormat": "两行。第一行为两个数 $n$ 和 $M$。第二行为 $n$ 个数。", "outputFormat": "一行一个数，即问题的解对 $92084931$ 取模的结果。", "hint": "#### 样例解释\n\n1. 对于这 $4$ 个数，问题的解有 $\\{5\\},\\{4\\},\\{5,4\\},\\{1,5,4\\},\\{5,4,2\\}$ 共 $5$ 组。\n\n1. 对于这4个数，问题的解有 $\\{5\\},\\{7\\},\\{2,7\\},\\{7,3\\},\\{5,2,7\\},\\{5,2,7,3\\}$ 共 $6$ 组。\n\n#### 数据规模\n\n对于 $10\\%$ 的数据，$1<n \\le 10$。\n\n对于 $30\\%$ 的数据，$1<n \\le 1000$。\n\n对于 $50\\%$ 的数据，$1<n \\le 30000$。\n\n对于 $100\\%$ 的数据，$1<n \\le 200000$，$1<M \\le 3000$，每个数均为正整数且不大于 $5000$。", "locale": "zh-CN", "translations": {"en": {"title": "Mysterious Number", "background": "In the year XXXX, detective Xiao Ming received a secret message from the organization: there is a mysterious door somewhere in Y City. After arriving at the door, he found a line of text: “This door requires a password to unlock.” Xiao Ming searched around and finally found a note: “Now you are given $n$ numbers. Please find how many contiguous numbers among these $n$ numbers have an average greater than a given number $M$. Note: this number can be very large, so please output the result modulo $92084931$. The final result is the password to this door.” Xiao Ming pondered for a long time but still couldn’t find the answer, so he turned to you for help. Please solve this problem for him. Since Xiao Ming is in a hurry, he can wait at most $1$ second.", "description": "Given $n$ numbers, help Xiao Ming count how many contiguous subarrays have an average greater than a given number $M$, and output this count. Note: the number can be very large, so please output the result modulo $92084931$.", "inputFormat": "Two lines.  \nThe first line contains two numbers $n$ and $M$.  \nThe second line contains $n$ numbers.", "outputFormat": "One line with a single number, which is the answer modulo $92084931$.", "hint": "Sample explanation:\n1. For these $4$ numbers, the valid solutions are $\\{5\\},\\{4\\},\\{5,4\\},\\{1,5,4\\},\\{5,4,2\\}$, for a total of $5$ groups.\n2. For these $4$ numbers, the valid solutions are $\\{5\\},\\{7\\},\\{2,7\\},\\{7,3\\},\\{5,2,7\\},\\{5,2,7,3\\}$, for a total of $6$ groups.\n\nConstraints:\n- For $10\\%$ of the testdata, $1 < n \\le 10$.\n- For $30\\%$ of the testdata, $1 < n \\le 1000$.\n- For $50\\%$ of the testdata, $1 < n \\le 30000$.\n- For $100\\%$ of the testdata, $1 < n \\le 200000$, $1 < M \\le 3000$, and each number is a positive integer not greater than $5000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "神秘数字", "background": "在公元 XXXX 年，侦探小明收到了组织的神秘信息，在 Y 市的某个地方有一道神秘的门。小明到达了那个门后，发现门上有一行字：“这个门需要密码才能解锁。”小明左找右找，终于找到了一张字条：“现在给你 $n$ 个数，请你求出这 $n$ 个数里面，有多少个连续的数的平均数大于某个给定的数 $M$？注意：这个数可能会很大，请输出这个数对 $92084931$ 取模的结果。最终的结果即是这个门的密码。”小明苦思冥想了半天，但始终找不到答案。于是他来求助于你。请你帮他解决这个问题。由于小明十分着急，他最多只能等 $1$ 秒。", "description": "给定 $n$ 个数，请你帮助小明求出里面有多少个连续的数的平均数大于给定的某个数 $M$。并将这个方案数输出。注意：这个数可能会很大，所以请输出这个数对 $92084931$ 取模的结果。", "inputFormat": "两行。第一行为两个数 $n$ 和 $M$。第二行为 $n$ 个数。", "outputFormat": "一行一个数，即问题的解对 $92084931$ 取模的结果。", "hint": "#### 样例解释\n\n1. 对于这 $4$ 个数，问题的解有 $\\{5\\},\\{4\\},\\{5,4\\},\\{1,5,4\\},\\{5,4,2\\}$ 共 $5$ 组。\n\n1. 对于这4个数，问题的解有 $\\{5\\},\\{7\\},\\{2,7\\},\\{7,3\\},\\{5,2,7\\},\\{5,2,7,3\\}$ 共 $6$ 组。\n\n#### 数据规模\n\n对于 $10\\%$ 的数据，$1<n \\le 10$。\n\n对于 $30\\%$ 的数据，$1<n \\le 1000$。\n\n对于 $50\\%$ 的数据，$1<n \\le 30000$。\n\n对于 $100\\%$ 的数据，$1<n \\le 200000$，$1<M \\le 3000$，每个数均为正整数且不大于 $5000$。", "locale": "zh-CN"}}}
{"pid": "P2805", "type": "P", "difficulty": 6, "samples": [["3 2\n10 0\n20 0\n-10 0\n-5 1 0 0\n100 1 2 1\n100 0", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2009", "NOI", "网络流", "图论建模", "拓扑排序", "最小割"], "title": "[NOI2009] 植物大战僵尸", "background": "Plants vs. Zombies（PVZ）是最近十分风靡的一款小游戏。Plants（植物）和 Zombies（僵尸）是游戏的主角，其中 Plants 防守，而 Zombies 进攻。该款游戏包含多种不同的挑战系列，比如 Protect Your Brain、Bowling 等等。其中最为经典的，莫过于玩家通过控制 Plants 来防守 Zombies 的进攻，或者相反地由玩家通过控制 Zombies 对 Plants 发起进攻。\n\n", "description": "现在，我们将要考虑的问题是游戏中 Zombies 对 Plants 的进攻，请注意，本题中规则与实际游戏**有所不同**。游戏中有两种角色，Plants 和 Zombies，每个 Plant 有一个攻击位置集合，它可以对这些位置进行保护；而 Zombie 进攻植物的方式是走到植物所在的位置上并将其吃掉。\n\n游戏的地图可以抽象为一个 $N$ 行 $M$ 列的矩阵，行从上到下用 $0$ 到 $N–1$ 编号，列从左到右用 $0$ 到 $M–1$ 编号；在地图的每个位置上都放有一个 $Plant$，为简单起见，我们把位于第 $r$ 行第 $c$ 列的植物记为 $P_{r, c}$。\n\nPlants 分很多种，有「攻击类」「防守类」和「经济类」等等。为了简单的描述每个 Plant，定义 $\\operatorname{Score}$ 和 $\\operatorname{Attack}$ 如下：\n\n* $\\operatorname{Score}(P_{r, c})$ — Zombie 击溃植物 $P_{r, c}$ 可获得的能源。   \n若 $\\operatorname{Score}(P_{r, c})$ 为非负整数，则表示击溃植物 $P_{r, c}$ 可获得能源 $\\operatorname{Score}(P_{r, c})$，若为负数表示击溃 $P_{r, c}$ 需要付出能源 $-\\operatorname{Score}(P_{r, c})$。\n\n* $\\operatorname{Attack}(P_{r, c})$ — 植物 $P_{r, c}$ 能够对 Zombie 进行攻击的位置集合。\n\nZombies 必须从地图的右侧进入，且只能沿着水平方向进行移动。Zombies 攻击植物的唯一方式就是走到该植物所在的位置并将植物吃掉。因此 Zombies 的进攻总是从地图的右侧开始。也就是说，对于第 $r$ 行的进攻，Zombies 必须首先攻击 $P_{r, M-1}$；若需要对 $P_{r, c}$（$0 \\le c < m - 1$）攻击，必须将 $P_{r,M-1}, P_{r, M-2} \\cdots P_{r, c+1}$ 先击溃，并移动到位置 $(r, c)$ 才可进行攻击。\n\n在本题的设定中，Plants 的攻击力是无穷大的，一旦 Zombie 进入某个 Plant 的攻击位置，该 Zombie 会被瞬间消灭，而该 Zombie 没有时间进行任何攻击操作。因此，即便 Zombie 进入了一个 Plant 所在的位置，但该位置属于其他植物的攻击位置集合，则 Zombie 会被瞬间消灭而所在位置的植物则安然无恙（在我们的设定中，Plant 的攻击位置不包含自身所在位置，否则你就不可能击溃它了）。\n\nZombies 的目标是对 Plants 的阵地发起进攻并获得最大的能源收入。每一次，你可以选择一个可进攻的植物进行攻击。本题的目标为，制定一套 Zombies 的进攻方案，选择进攻哪些植物以及进攻的顺序，从而获得最大的能源收入。", "inputFormat": "第一行包含两个正整数 $N$ 和 $M$，分别表示地图的行数和列数。\n\n接下来 $N \\times M$ 行描述每个位置上植物的信息。第 $r \\times M + c + 1$ 行按照如下格式给出植物 $P_{r, c}$ 的信息：\n\n第一个整数为 $\\operatorname{Score}(P_{r,c})$，第二个整数为集合 $\\operatorname{Attack}(P_{r,c})$ 中的位置个数 $w$，接下来 $w$ 个位置信息 $(r', c')$，表示 $P_{r, c}$ 可以攻击位置第 $r'$ 行第 $c'$ 列。\n\n", "outputFormat": "仅包含一个整数，表示可以获得的最大能源收入。注意，你也可以选择不进行任何攻击，这样能源收入为 $0$。", "hint": "#### 数据规模与约定\n- 对于 $20\\%$ 的数据，保证 $ N, M \\le 5$。\n- 对于 $40\\%$ 的数据，保证 $ N, M \\le 10$。\n- 对于 $100\\%$ 的数据，保证 $1 \\le N \\le 20$，$1 \\le M \\le 30$，$-10^4 ≤ \\operatorname{Score} \\le 10^4$。\n\n#### 说明\n题面由 @syksykCCC 修改。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2009] Plants vs. Zombies", "background": "Plants vs. Zombies (PVZ) is a very popular casual game. Plants and Zombies are the main characters: Plants defend while Zombies attack. The game features many different challenge series, such as Protect Your Brain and Bowling. The most classic mode is where the player controls Plants to defend against Zombies, or conversely the player controls Zombies to attack the Plants.", "description": "We will consider the scenario where Zombies attack Plants in the game. Note that the rules in this problem differ from the actual game. There are two roles, Plants and Zombies. Each Plant has a set of attack positions, and it can protect those positions. A Zombie attacks a plant by stepping onto the plant’s position and eating it.\n\nThe map is modeled as an $N$-by-$M$ grid. Rows are numbered from top to bottom as $0$ to $N-1$, and columns are numbered from left to right as $0$ to $M-1$. There is a $Plant$ placed at every position on the map. For simplicity, we denote the plant at row $r$ and column $c$ as $P_{r, c}$.\n\nThere are many types of Plants, such as “attack-type,” “defense-type,” and “economy-type.” To describe each Plant, define $\\operatorname{Score}$ and $\\operatorname{Attack}$ as follows:\n\n- $\\operatorname{Score}(P_{r, c})$ — the energy a Zombie gains by destroying plant $P_{r, c}$.  \nIf $\\operatorname{Score}(P_{r, c})$ is a non-negative integer, then destroying $P_{r, c}$ grants energy $\\operatorname{Score}(P_{r, c})$. If it is negative, then destroying $P_{r, c}$ costs energy $-\\operatorname{Score}(P_{r, c})$.\n\n- $\\operatorname{Attack}(P_{r, c})$ — the set of positions that plant $P_{r, c}$ can attack.\n\nZombies must enter from the right side of the map and can only move horizontally. The only way a Zombie attacks a plant is by moving to that plant’s position and eating it. Therefore, a Zombie attack on row $r$ always starts from the right side of the map. That is, for an attack on row $r$, the Zombies must first attack $P_{r, M-1}$. If they want to attack $P_{r, c}$ with $0 \\le c < M - 1$, they must first destroy $P_{r, M-1}, P_{r, M-2}, \\dots, P_{r, c+1}$ and move to position $(r, c)$ to attack.\n\nIn this problem, Plants have infinite attack power. Once a Zombie enters any plant’s attack position, that Zombie is instantly eliminated and has no time to perform any attack action. Therefore, even if a Zombie steps onto a plant’s position, if that position is in another plant’s attack set, the Zombie is instantly eliminated and the plant at that position remains unharmed. (In our setting, a plant’s attack set does not include its own position; otherwise you could never destroy it.)\n\nThe Zombies’ goal is to attack the Plants’ formation to obtain the maximum energy income. Each time, you may choose one attackable plant to attack. The objective is to design an attack plan for the Zombies, choosing which plants to attack and in what order, to maximize the total energy income.", "inputFormat": "The first line contains two positive integers $N$ and $M$, the number of rows and columns of the map.\n\nThe next $N \\times M$ lines describe the plant at each position. For $0 \\le r < N$ and $0 \\le c < M$, the $(r \\times M + c + 1)$-th of these lines gives the information for plant $P_{r, c}$ in the following format:\n\nThe first integer is $\\operatorname{Score}(P_{r, c})$, the second integer is $w$, the number of positions in $\\operatorname{Attack}(P_{r, c})$, followed by $w$ positions $(r', c')$, indicating that $P_{r, c}$ can attack the position at row $r'$ and column $c'$.", "outputFormat": "Output a single integer: the maximum energy income that can be obtained. Note that you may also choose to make no attacks, in which case the income is $0$.", "hint": "#### Constraints\n- For $20\\%$ of the testdata, $N, M \\le 5$.\n- For $40\\%$ of the testdata, $N, M \\le 10$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 20$, $1 \\le M \\le 30$, $-10^4 \\le \\operatorname{Score} \\le 10^4$.\n\n#### Notes\nStatement modified by @syksykCCC.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2009] 植物大战僵尸", "background": "Plants vs. Zombies（PVZ）是最近十分风靡的一款小游戏。Plants（植物）和 Zombies（僵尸）是游戏的主角，其中 Plants 防守，而 Zombies 进攻。该款游戏包含多种不同的挑战系列，比如 Protect Your Brain、Bowling 等等。其中最为经典的，莫过于玩家通过控制 Plants 来防守 Zombies 的进攻，或者相反地由玩家通过控制 Zombies 对 Plants 发起进攻。\n\n", "description": "现在，我们将要考虑的问题是游戏中 Zombies 对 Plants 的进攻，请注意，本题中规则与实际游戏**有所不同**。游戏中有两种角色，Plants 和 Zombies，每个 Plant 有一个攻击位置集合，它可以对这些位置进行保护；而 Zombie 进攻植物的方式是走到植物所在的位置上并将其吃掉。\n\n游戏的地图可以抽象为一个 $N$ 行 $M$ 列的矩阵，行从上到下用 $0$ 到 $N–1$ 编号，列从左到右用 $0$ 到 $M–1$ 编号；在地图的每个位置上都放有一个 $Plant$，为简单起见，我们把位于第 $r$ 行第 $c$ 列的植物记为 $P_{r, c}$。\n\nPlants 分很多种，有「攻击类」「防守类」和「经济类」等等。为了简单的描述每个 Plant，定义 $\\operatorname{Score}$ 和 $\\operatorname{Attack}$ 如下：\n\n* $\\operatorname{Score}(P_{r, c})$ — Zombie 击溃植物 $P_{r, c}$ 可获得的能源。   \n若 $\\operatorname{Score}(P_{r, c})$ 为非负整数，则表示击溃植物 $P_{r, c}$ 可获得能源 $\\operatorname{Score}(P_{r, c})$，若为负数表示击溃 $P_{r, c}$ 需要付出能源 $-\\operatorname{Score}(P_{r, c})$。\n\n* $\\operatorname{Attack}(P_{r, c})$ — 植物 $P_{r, c}$ 能够对 Zombie 进行攻击的位置集合。\n\nZombies 必须从地图的右侧进入，且只能沿着水平方向进行移动。Zombies 攻击植物的唯一方式就是走到该植物所在的位置并将植物吃掉。因此 Zombies 的进攻总是从地图的右侧开始。也就是说，对于第 $r$ 行的进攻，Zombies 必须首先攻击 $P_{r, M-1}$；若需要对 $P_{r, c}$（$0 \\le c < m - 1$）攻击，必须将 $P_{r,M-1}, P_{r, M-2} \\cdots P_{r, c+1}$ 先击溃，并移动到位置 $(r, c)$ 才可进行攻击。\n\n在本题的设定中，Plants 的攻击力是无穷大的，一旦 Zombie 进入某个 Plant 的攻击位置，该 Zombie 会被瞬间消灭，而该 Zombie 没有时间进行任何攻击操作。因此，即便 Zombie 进入了一个 Plant 所在的位置，但该位置属于其他植物的攻击位置集合，则 Zombie 会被瞬间消灭而所在位置的植物则安然无恙（在我们的设定中，Plant 的攻击位置不包含自身所在位置，否则你就不可能击溃它了）。\n\nZombies 的目标是对 Plants 的阵地发起进攻并获得最大的能源收入。每一次，你可以选择一个可进攻的植物进行攻击。本题的目标为，制定一套 Zombies 的进攻方案，选择进攻哪些植物以及进攻的顺序，从而获得最大的能源收入。", "inputFormat": "第一行包含两个正整数 $N$ 和 $M$，分别表示地图的行数和列数。\n\n接下来 $N \\times M$ 行描述每个位置上植物的信息。第 $r \\times M + c + 1$ 行按照如下格式给出植物 $P_{r, c}$ 的信息：\n\n第一个整数为 $\\operatorname{Score}(P_{r,c})$，第二个整数为集合 $\\operatorname{Attack}(P_{r,c})$ 中的位置个数 $w$，接下来 $w$ 个位置信息 $(r', c')$，表示 $P_{r, c}$ 可以攻击位置第 $r'$ 行第 $c'$ 列。\n\n", "outputFormat": "仅包含一个整数，表示可以获得的最大能源收入。注意，你也可以选择不进行任何攻击，这样能源收入为 $0$。", "hint": "#### 数据规模与约定\n- 对于 $20\\%$ 的数据，保证 $ N, M \\le 5$。\n- 对于 $40\\%$ 的数据，保证 $ N, M \\le 10$。\n- 对于 $100\\%$ 的数据，保证 $1 \\le N \\le 20$，$1 \\le M \\le 30$，$-10^4 ≤ \\operatorname{Score} \\le 10^4$。\n\n#### 说明\n题面由 @syksykCCC 修改。", "locale": "zh-CN"}}}
{"pid": "P2807", "type": "P", "difficulty": 2, "samples": [["3\n1\n2\n3", "1\n5\n13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推"], "title": "三角形计数", "background": "三角形计数(triangle) 递推\n", "description": "把大三角形的每条边 $n$ 等分，将对应的等分点连接起来（连接线分别平行于三条边），这样一共会有多少三角形呢？编程来解决这个问题。\n", "inputFormat": "第一行为整数 $t(t≤100)$，表示测试数据组数；接下来 $t$ 行，每行一个正整数 $n(n≤500)$。\n", "outputFormat": "对于每个 $n$，输出一个正整数，表示三角形个数。\n", "hint": "\n", "locale": "zh-CN", "translations": {"en": {"title": "Triangle Counting", "background": "Triangle counting (triangle), recurrence.", "description": "Divide each side of the large triangle into $n$ equal parts. Connect the corresponding division points, with the connecting lines respectively parallel to the three sides. How many triangles are there in total? Write a program to solve this problem.", "inputFormat": "The first line contains an integer $t$ ($t \\le 100$), indicating the number of test cases. The next $t$ lines each contain a positive integer $n$ ($n \\le 500$).", "outputFormat": "For each $n$, output a single positive integer, representing the number of triangles.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "三角形计数", "background": "三角形计数(triangle) 递推\n", "description": "把大三角形的每条边 $n$ 等分，将对应的等分点连接起来（连接线分别平行于三条边），这样一共会有多少三角形呢？编程来解决这个问题。\n", "inputFormat": "第一行为整数 $t(t≤100)$，表示测试数据组数；接下来 $t$ 行，每行一个正整数 $n(n≤500)$。\n", "outputFormat": "对于每个 $n$，输出一个正整数，表示三角形个数。\n", "hint": "\n", "locale": "zh-CN"}}}
{"pid": "P2808", "type": "P", "difficulty": 5, "samples": [["5\n1 0 1 1 2\n0 2 6 3 4", "20"], ["10\n5 2 7 2 6 5 3 5 3 6\n8 7 8 4 0 6 0 10 10 0", "237"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2013", "JOI（日本）"], "title": "[JOI2014 预选赛] 小笼包", "background": "JOI 同学的午饭，是在中华料理店买的小笼包。这是一种用小麦粉制成的皮包着馅和热汤的料理，吃的时候，热汤会飞溅出来。", "description": "JOI 同学点的小笼包套餐，由馅料不同的 $N$ 个小笼包组成。$N$ 个小笼包等间隔排成一列，编号为 $1$ 到 $N$。第 $i$ 个小笼包与第 $j$ 个小笼包之间的距离是绝对值 $\\vert i-j\\vert$。\n\nJOI 同学按照顺序吃小笼包。最初，所有的小笼包的美味度都是 $0$。吃第 $i$ 个小笼包时，汤汁向周围飞散，与第 $i$ 个小笼包距离 $D_i$ 以下的小笼包都淋上了汤汁，而被淋上汤汁的小笼包的美味度会增加 $A_i$。也就是说，吃第 $i$ 个小笼包的时候，第 $j\\ (1\\le j\\le N$ 并且 $i-D_i\\le j\\le i+D_i)$ 个小笼包还没有吃到的话，第 $j$ 个小笼包的美味度就增加 $A_i$。\n\n ![](https://cdn.luogu.com.cn/upload/pic/2340.png) \n\nJOI 同学要在吃小笼包的顺序上下功夫，让吃的小笼包的美味度的合计最大化。", "inputFormat": "输入共三行。\n\n第一行是一个整数 $N\\ (1\\le N\\le 100)$。\n\n第二行是 $N$ 个整数 $D_1,D_2,\\dots,D_N\\ (0\\le D_i\\le 7)$，以空格分隔。\n\n第三行是 $N$ 个整数 $A_1,A_2,\\dots,A_N\\ (0\\le A_i\\le 1000)$，以空格分隔。", "outputFormat": "共一行，输出 JOI 同学吃的小笼包的美味度的合计最大值。", "hint": "样例 $1$ 的说明：以 $5\\rightarrow 3\\rightarrow 1\\rightarrow 2\\rightarrow 4$ 的顺序吃的话，美味度合计为 $20$。可以证明，美味度超过 $20$ 的吃法不存在。\n\n本题是 2014 年日本信息学奥林匹克（JOI）预选第 6 题。", "locale": "zh-CN", "translations": {"en": {"title": "[JOI2014 Preliminary Round] Xiaolongbao", "background": "JOI’s lunch is xiaolongbao bought at a Chinese restaurant. This dish has a wrapper made from wheat flour enclosing filling and hot soup; when eating, the hot soup may splash.", "description": "The xiaolongbao set that JOI ordered consists of $N$ xiaolongbao with different fillings. The $N$ xiaolongbao are arranged in a row at equal intervals, numbered $1$ to $N$. The distance between the $i$-th and $j$-th xiaolongbao is the absolute value $\\vert i-j\\vert$.\n\nJOI eats the xiaolongbao in some order. Initially, the deliciousness of every xiaolongbao is $0$. When eating the $i$-th xiaolongbao, soup splashes outward; all xiaolongbao whose distance from the $i$-th xiaolongbao is at most $D_i$ are splashed, and each splashed xiaolongbao has its deliciousness increased by $A_i$. That is, when eating the $i$-th xiaolongbao, if the $j\\ (1\\le j\\le N$ and $i-D_i\\le j\\le i+D_i)$-th xiaolongbao has not yet been eaten, then the deliciousness of the $j$-th xiaolongbao increases by $A_i$.\n\n ![](https://cdn.luogu.com.cn/upload/pic/2340.png) \n\nJOI will choose the eating order to maximize the total deliciousness of the xiaolongbao eaten.", "inputFormat": "The input consists of three lines.\n\nThe first line contains an integer $N\\ (1\\le N\\le 100)$.\n\nThe second line contains $N$ integers $D_1,D_2,\\dots,D_N\\ (0\\le D_i\\le 7)$, separated by spaces.\n\nThe third line contains $N$ integers $A_1,A_2,\\dots,A_N\\ (0\\le A_i\\le 1000)$, separated by spaces.", "outputFormat": "Output one line: the maximum possible total deliciousness of the xiaolongbao eaten by JOI.", "hint": "Explanation for Sample $1$: If JOI eats in the order $5\\rightarrow 3\\rightarrow 1\\rightarrow 2\\rightarrow 4$, the total deliciousness is $20$. It can be proven that no eating order yields a total exceeding $20$.\n\nThis problem is Problem $6$ of the 2014 Japanese Olympiad in Informatics (JOI) Preliminary Round.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[JOI2014 预选赛] 小笼包", "background": "JOI 同学的午饭，是在中华料理店买的小笼包。这是一种用小麦粉制成的皮包着馅和热汤的料理，吃的时候，热汤会飞溅出来。", "description": "JOI 同学点的小笼包套餐，由馅料不同的 $N$ 个小笼包组成。$N$ 个小笼包等间隔排成一列，编号为 $1$ 到 $N$。第 $i$ 个小笼包与第 $j$ 个小笼包之间的距离是绝对值 $\\vert i-j\\vert$。\n\nJOI 同学按照顺序吃小笼包。最初，所有的小笼包的美味度都是 $0$。吃第 $i$ 个小笼包时，汤汁向周围飞散，与第 $i$ 个小笼包距离 $D_i$ 以下的小笼包都淋上了汤汁，而被淋上汤汁的小笼包的美味度会增加 $A_i$。也就是说，吃第 $i$ 个小笼包的时候，第 $j\\ (1\\le j\\le N$ 并且 $i-D_i\\le j\\le i+D_i)$ 个小笼包还没有吃到的话，第 $j$ 个小笼包的美味度就增加 $A_i$。\n\n ![](https://cdn.luogu.com.cn/upload/pic/2340.png) \n\nJOI 同学要在吃小笼包的顺序上下功夫，让吃的小笼包的美味度的合计最大化。", "inputFormat": "输入共三行。\n\n第一行是一个整数 $N\\ (1\\le N\\le 100)$。\n\n第二行是 $N$ 个整数 $D_1,D_2,\\dots,D_N\\ (0\\le D_i\\le 7)$，以空格分隔。\n\n第三行是 $N$ 个整数 $A_1,A_2,\\dots,A_N\\ (0\\le A_i\\le 1000)$，以空格分隔。", "outputFormat": "共一行，输出 JOI 同学吃的小笼包的美味度的合计最大值。", "hint": "样例 $1$ 的说明：以 $5\\rightarrow 3\\rightarrow 1\\rightarrow 2\\rightarrow 4$ 的顺序吃的话，美味度合计为 $20$。可以证明，美味度超过 $20$ 的吃法不存在。\n\n本题是 2014 年日本信息学奥林匹克（JOI）预选第 6 题。", "locale": "zh-CN"}}}
{"pid": "P2809", "type": "P", "difficulty": 5, "samples": [["7\n5 6 23 8 19 7 10\n4\n5 16 30 27\n7\n1 2 3 4 5 6 7\n5\n7 6 5 5 5\n4\n1 2 3 4\n1\n10\n6\n19 23 3 51 2 0\n2\n34 64", "S\nS\nS\nN"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2016", "福建省历届夏令营", "福建"], "title": "hzwer 爱折纸", "background": null, "description": "hzwer 买到了一张神奇的小纸条，初始时它由 $N$ 个格子组成，每个格子上面有一个整数 $N_i$，显然每两个相邻的格子之间有一条分界线，hzwer 可以选择任意一条分界线，将整张纸条进行向左翻折，如果翻折后有两个格子重叠，那么翻折后的格子上数字为原两个格子数字之和，否则数字保持不变。hzwer 也可以将整张纸条进行向左翻转，翻转之后第 $i$ 个格子的数字变成第 $N - i + 1$ 个格子的数字。\n\n![](https://cdn.luogu.com.cn/upload/pic/2350.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/2351.png)", "inputFormat": "多组数据，最多 $5$ 组，每组数据由四行组成：\n\n第一行包含一个整数 $N$，代表了初始纸条的格子数。\n\n第二行包含 $N$ 个整数，代表了初始时每个格子的值 $N_i$。\n\n第三行包含一个整数 $M$（$M \\le N$），代表了理想纸条的格子数。\n\n第四行包含 $M$ 个整数，代表了理想纸条上每个格子的值 $m_i$。", "outputFormat": "每组数据包含一个字母，`S` 代表可行，`N` 代表不可行。", "hint": "对于 $70 \\%$ 的数据，$N \\le 10$。  \n对于 $100 \\%$ 的数据，$1 \\le N \\le 15$。", "locale": "zh-CN", "translations": {"en": {"title": "hzwer Loves Origami", "background": "", "description": "hzwer bought a magical little paper strip. Initially, it consists of $N$ cells, and each cell has an integer $N_i$ on it. Obviously, there is a dividing line between every two adjacent cells. hzwer can choose any dividing line and fold the entire strip to the left. If two cells overlap after folding, the number on the resulting cell equals the sum of the two original cells; otherwise, the numbers remain unchanged. hzwer can also reverse the entire strip; after reversing, the number of the $i$-th cell becomes the number of the $(N - i + 1)$-th cell.\n\nhzwer wants to obtain an ideal strip with $M$ cells and values $m_i$. Determine whether it is possible to transform the initial strip into the ideal strip by performing the above operations any number of times.\n\n![](https://cdn.luogu.com.cn/upload/pic/2350.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/2351.png)", "inputFormat": "Multiple test cases, at most $5$ groups. Each test case consists of four lines:\n\n- The first line contains an integer $N$, the number of cells in the initial strip.\n- The second line contains $N$ integers, the initial values $N_i$ of each cell.\n- The third line contains an integer $M$ ($M \\le N$), the number of cells in the ideal strip.\n- The fourth line contains $M$ integers, the values $m_i$ on the ideal strip.", "outputFormat": "For each test case, output one letter: `S` means feasible, and `N` means infeasible.", "hint": "For $70\\%$ of the testdata, $N \\le 10$.\nFor $100\\%$ of the testdata, $1 \\le N \\le 15$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "hzwer 爱折纸", "background": null, "description": "hzwer 买到了一张神奇的小纸条，初始时它由 $N$ 个格子组成，每个格子上面有一个整数 $N_i$，显然每两个相邻的格子之间有一条分界线，hzwer 可以选择任意一条分界线，将整张纸条进行向左翻折，如果翻折后有两个格子重叠，那么翻折后的格子上数字为原两个格子数字之和，否则数字保持不变。hzwer 也可以将整张纸条进行向左翻转，翻转之后第 $i$ 个格子的数字变成第 $N - i + 1$ 个格子的数字。\n\n![](https://cdn.luogu.com.cn/upload/pic/2350.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/2351.png)", "inputFormat": "多组数据，最多 $5$ 组，每组数据由四行组成：\n\n第一行包含一个整数 $N$，代表了初始纸条的格子数。\n\n第二行包含 $N$ 个整数，代表了初始时每个格子的值 $N_i$。\n\n第三行包含一个整数 $M$（$M \\le N$），代表了理想纸条的格子数。\n\n第四行包含 $M$ 个整数，代表了理想纸条上每个格子的值 $m_i$。", "outputFormat": "每组数据包含一个字母，`S` 代表可行，`N` 代表不可行。", "hint": "对于 $70 \\%$ 的数据，$N \\le 10$。  \n对于 $100 \\%$ 的数据，$1 \\le N \\le 15$。", "locale": "zh-CN"}}}
{"pid": "P2810", "type": "P", "difficulty": 4, "samples": [["1", "8"], ["8", "54"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["二分"], "title": "Catch the theives", "background": "你们懂的，浙江某高中的保安是非常敬（sui）职（bian）的，但是有一天，一群奶牛（不要问我怎么想的），溜进了校园走进了二食堂，偷吃了可口的饭菜（没尝过）。现在 headmaster 非常生气，让保安严查此事。这时 \\*\\*\\* 走过，勤劳而又严谨的保安求助 \\*\\*\\*，\\*\\*\\* 很忙所以把任务交给了你。要不要来杯咖啡先。", "description": "karlven 听说保安在打游戏值班时看到有 $4$ 只奶牛滚出校门（吃太饱了？），而且这个品种的奶牛非常贪心，而且有秩序。怎么体现？偷吃的时候他们会排队，且后一只偷吃的量是前一只的**整数倍（设为 $k,k>1$）**，按照他的经验估计这些奶牛**最多能吃 $m$ 吨**的食物，一旦**超过就会暴毙**化为灰烬，所以一只奶牛**不会**吃超过 $m$ 吨的食物并且只能**一吨一吨**吃。一旦有一只奶牛无法吃东西，他就会攻击同伴然后自尽。现在 karlven 不告诉你 $m$ 的值，只告诉你奶牛**能够一起偷吃并且一起安全滚出校门**的方案数量 $n$（$n\\le10^{15}$，不要方），请你算出 $m$ 的值，若有多种解，输出**最小的可能值**。如果你怎么算都算不出，就输出 $-1$，然后投诉保安。", "inputFormat": "一个数 $n$。", "outputFormat": "你算出的答案，一个整数。", "hint": "对于 $100\\%$ 的数据，$n\\le10^{15}.$\n\n样例解释：\n\n样例 #1：$(1,2,4,8)$；\n\n样例 #2：$(1,2,4,8),(1,3,9,27),(2,4,8,16),(2,6,18,54),(3,6,12,24),(4,8,16,32),(5,10,20,40),(6,12,24,48).$", "locale": "zh-CN", "translations": {"en": {"title": "Catch the Thieves", "background": "You know this: the security guards at a certain high school in Zhejiang are very diligent (sui) and meticulous (bian). But one day, a herd of cows (don’t ask me why) slipped into the campus and walked into the second cafeteria, stealing tasty dishes (never tried them). Now the headmaster is very angry and ordered the guards to investigate strictly. At this moment, *** walked by, and the hardworking and rigorous guards asked *** for help. *** was busy and handed the task to you. How about a cup of coffee first.", "description": "karlven heard that while the guards were on duty playing games, they saw $4$ cows rolling out of the school gate (ate too much?). This breed of cow is very greedy and also orderly. How is that reflected? When stealing food they line up, and the amount eaten by each later cow is an **integer multiple (denote as $k$, $k>1$)** of the previous cow’s amount. Based on his experience, these cows can **eat at most $m$ tons** of food; once they **exceed it, they die** and turn to ashes. Therefore, a cow **will not** eat more than $m$ tons, and can only eat **one ton at a time**. If any cow cannot eat its required amount, it will attack its companion and then commit suicide.\n\nNow karlven does not tell you the value of $m$, and only tells you the number $n$ ($n \\le 10^{15}$) of schemes in which the cows **can steal together and roll out safely together**. Please compute the value of $m$. If there are multiple answers, output the **smallest possible value**. If you cannot find any such $m$, output $-1$ and then file a complaint against the guards.", "inputFormat": "A single integer $n$.", "outputFormat": "Your computed answer, a single integer.", "hint": "Constraints: For $100\\%$ of the testdata, $n \\le 10^{15}$.\n\nSample explanation:\n\nSample #1: (1, 2, 4, 8).\n\nSample #2: (1, 2, 4, 8), (1, 3, 9, 27), (2, 4, 8, 16), (2, 6, 18, 54), (3, 6, 12, 24), (4, 8, 16, 32), (5, 10, 20, 40), (6, 12, 24, 48).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Catch the theives", "background": "你们懂的，浙江某高中的保安是非常敬（sui）职（bian）的，但是有一天，一群奶牛（不要问我怎么想的），溜进了校园走进了二食堂，偷吃了可口的饭菜（没尝过）。现在 headmaster 非常生气，让保安严查此事。这时 \\*\\*\\* 走过，勤劳而又严谨的保安求助 \\*\\*\\*，\\*\\*\\* 很忙所以把任务交给了你。要不要来杯咖啡先。", "description": "karlven 听说保安在打游戏值班时看到有 $4$ 只奶牛滚出校门（吃太饱了？），而且这个品种的奶牛非常贪心，而且有秩序。怎么体现？偷吃的时候他们会排队，且后一只偷吃的量是前一只的**整数倍（设为 $k,k>1$）**，按照他的经验估计这些奶牛**最多能吃 $m$ 吨**的食物，一旦**超过就会暴毙**化为灰烬，所以一只奶牛**不会**吃超过 $m$ 吨的食物并且只能**一吨一吨**吃。一旦有一只奶牛无法吃东西，他就会攻击同伴然后自尽。现在 karlven 不告诉你 $m$ 的值，只告诉你奶牛**能够一起偷吃并且一起安全滚出校门**的方案数量 $n$（$n\\le10^{15}$，不要方），请你算出 $m$ 的值，若有多种解，输出**最小的可能值**。如果你怎么算都算不出，就输出 $-1$，然后投诉保安。", "inputFormat": "一个数 $n$。", "outputFormat": "你算出的答案，一个整数。", "hint": "对于 $100\\%$ 的数据，$n\\le10^{15}.$\n\n样例解释：\n\n样例 #1：$(1,2,4,8)$；\n\n样例 #2：$(1,2,4,8),(1,3,9,27),(2,4,8,16),(2,6,18,54),(3,6,12,24),(4,8,16,32),(5,10,20,40),(6,12,24,48).$", "locale": "zh-CN"}}}
{"pid": "P2811", "type": "P", "difficulty": 5, "samples": [["5\n31619 26195 18669 1198 178\n4\n2 4\n3 5\n1 2\n4 1", "20045 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论"], "title": "Protect the school", "background": "话说上回保安因为奶牛事件而搞得地位岌岌可危，所以他们决定好好看守这个学校，他们有一个计划。但是由于学校太大了，他们计划不好，所以找到上次帮他的你，请你解决他的苦难。然后他又可以开始了手机游戏之旅。\n", "description": "学校有 $n$ 个检查点，由于保安懒得动脑筋，他们决定在这 $n$ 个检查点之间建立 $m$ 条通道，由于学校的懒政以及军事化管理，这些路是单向的，逆向通过会被处分。保安们人手不够（游戏任务太多），他们决定只挑选一些点来站岗，由于保安身怀绝技，可以瞬间通过任何他站岗点可以走到的路（瞬移到到任何连通的点）。每一个检查点有一个值表示这个点的困难程度。为了保护学校，请你帮他们出个主意，保证一旦有一个检查点发生事件，都能有保安瞬间抵达。但是为了舒服和管理便利，请你告诉他们在使用最少的保安数量的情况下最小的困难总和。\n", "inputFormat": "第一行一个整数 $n$，代表检查点数量。\n\n接下来一行 $n$ 个整数，代表困难程度。\n\n接下来一行一个数 $m$，表示道路的数量。\n\n接下来 $m$ 行每行两个整数 $u,v$ 代表 $u$ 到 $v$ 有一条单向通道。", "outputFormat": "两个整数。\n\n第一个整数表示最小困难和。第二个整数表示在保证最小困难和以及最少保安数量的条件下，可选的方案总数。\n", "hint": "$1 \\le n \\le 10 ^ 4,1 \\le m \\le 5 \\times 10 ^ 4$，保证答案在 `int` 范围内。", "locale": "zh-CN", "translations": {"en": {"title": "Protect the school", "background": "Last time, the security staff’s status was on the line because of the cow incident. They decided to guard the school properly this time, and they have a plan. But since the campus is too large, they cannot plan it well, so they come to you again for help. Please solve their problem so they can resume their mobile gaming journey.", "description": "The school has $n$ checkpoints. Because the guards do not want to think too hard, they decide to build $m$ passages between these $n$ checkpoints. Due to lax administration and militarized management, these roads are one-way; going in the reverse direction will result in punishment.\n\nThe guards are short-handed (too many game quests), so they will select some checkpoints to stand guard. Since the guards have special skills, a guard can instantly traverse along any path reachable from the checkpoint where he is stationed (i.e., teleport to any vertex reachable via directed edges). Each checkpoint has a value representing its difficulty.\n\nTo protect the school, please help them ensure that if an incident occurs at any checkpoint, at least one guard can instantly reach it. For convenience and easier management, tell them the minimum possible total difficulty under the constraint of using the fewest number of guards.", "inputFormat": "The first line contains an integer $n$, the number of checkpoints.\n\nThe second line contains $n$ integers, the difficulties of the checkpoints.\n\nThe third line contains an integer $m$, the number of roads.\n\nEach of the next $m$ lines contains two integers $u, v$, indicating a one-way passage from $u$ to $v$.", "outputFormat": "Output two integers.\n\nThe first integer is the minimum total difficulty. The second integer is the number of valid selections that achieve both the minimum number of guards and that minimum total difficulty.", "hint": "$1 \\le n \\le 10^4$, $1 \\le m \\le 5 \\times 10^4$, and the answer fits in the int range.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Protect the school", "background": "话说上回保安因为奶牛事件而搞得地位岌岌可危，所以他们决定好好看守这个学校，他们有一个计划。但是由于学校太大了，他们计划不好，所以找到上次帮他的你，请你解决他的苦难。然后他又可以开始了手机游戏之旅。\n", "description": "学校有 $n$ 个检查点，由于保安懒得动脑筋，他们决定在这 $n$ 个检查点之间建立 $m$ 条通道，由于学校的懒政以及军事化管理，这些路是单向的，逆向通过会被处分。保安们人手不够（游戏任务太多），他们决定只挑选一些点来站岗，由于保安身怀绝技，可以瞬间通过任何他站岗点可以走到的路（瞬移到到任何连通的点）。每一个检查点有一个值表示这个点的困难程度。为了保护学校，请你帮他们出个主意，保证一旦有一个检查点发生事件，都能有保安瞬间抵达。但是为了舒服和管理便利，请你告诉他们在使用最少的保安数量的情况下最小的困难总和。\n", "inputFormat": "第一行一个整数 $n$，代表检查点数量。\n\n接下来一行 $n$ 个整数，代表困难程度。\n\n接下来一行一个数 $m$，表示道路的数量。\n\n接下来 $m$ 行每行两个整数 $u,v$ 代表 $u$ 到 $v$ 有一条单向通道。", "outputFormat": "两个整数。\n\n第一个整数表示最小困难和。第二个整数表示在保证最小困难和以及最少保安数量的条件下，可选的方案总数。\n", "hint": "$1 \\le n \\le 10 ^ 4,1 \\le m \\le 5 \\times 10 ^ 4$，保证答案在 `int` 范围内。", "locale": "zh-CN"}}}
{"pid": "P2812", "type": "P", "difficulty": 5, "samples": [["5\n2 0\n4 0\n5 0\n1 0\n0\n", "2\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "强连通分量"], "title": "校园网络【[USACO]Network of Schools加强版】", "background": "浙江省的几所 OI 强校的神犇发明了一种人工智能，可以 AC 任何题目，所以他们决定建立一个网络来共享这个软件。但是由于他们脑力劳动过多导致全身无力身体被♂掏♂空，他们来找你帮助他们。\n", "description": "共有 $n$ 所学校 $(1 \\leq n \\leq 10000)$ 已知他们实现设计好的网络共 $m$ 条线路，为了保证高速，网络是单向的。现在请你告诉他们至少选几所学校作为共享软件的母机，能使每所学校都可以用上。再告诉他们至少要添加几条线路能使任意一所学校作为母机都可以使别的学校使用上软件。\n", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行每行有若干个整数，用空格隔开。\n\n第 $i+1$ 行，每行输入若干个非零整数 $x$，表示从 $i$ 到 $x$ 有一条线路。以 $0$ 作为结束标志。\n", "outputFormat": "第一行一个整数，表示至少选几所学校作为共享软件的母机，能使每所学校都可以用上。\n\n第二行一个整数，表示至少要添加几条线路能使任意一所学校作为母机都可以使别的学校使用上软件。", "hint": "~~POJ 原题。数据扩大了 $100$ 倍。~~\n\n~~$1 \\leq $ 边数 $\\leq 5000000$，$1 \\leq n \\leq 10000$ 。~~\n\n实际上，$1 \\leq n \\leq 10000$，$1\\le $ 边数 $\\le 50000$。", "locale": "zh-CN", "translations": {"en": {"title": "Campus Network [USACO] Network of Schools Enhanced Version", "background": "Several OI powerhouse schools in Zhejiang have shen niu (pinyin: shén niú) who invented an artificial intelligence that can AC any problem, so they decided to build a network to share this software. However, due to excessive brainwork, they are completely drained and have come to you for help.", "description": "There are $n$ schools ($1 \\leq n \\leq 10000$). It is known that in their designed network there are $m$ edges. To ensure high speed, the network is directed. Please tell them the minimum number of schools to select as servers (“mother machines”) so that every school can use the software. Then tell them the minimum number of edges to add so that choosing any single school as the server will allow every other school to use the software.", "inputFormat": "The first line contains a positive integer $n$.\n\nThe next $n$ lines each contain several integers separated by spaces.\n\nOn the $(i+1)$-th line, several non-zero integers $x$ are given, indicating that there is a directed edge from $i$ to $x$. The line ends with a terminating $0$.", "outputFormat": "The first line contains an integer, the minimum number of schools to select as servers so that every school can use the software.\n\nThe second line contains an integer, the minimum number of edges to add so that choosing any school as the server will allow every other school to use the software.", "hint": "~~POJ original. The testdata has been enlarged by $100$ times.~~\n\n~~$1 \\leq n \\leq 10000$, $1 \\leq m \\leq 5000000$.~~\n\nIn fact, $1 \\leq n \\leq 10000$, $1 \\leq m \\leq 50000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "校园网络【[USACO]Network of Schools加强版】", "background": "浙江省的几所 OI 强校的神犇发明了一种人工智能，可以 AC 任何题目，所以他们决定建立一个网络来共享这个软件。但是由于他们脑力劳动过多导致全身无力身体被♂掏♂空，他们来找你帮助他们。\n", "description": "共有 $n$ 所学校 $(1 \\leq n \\leq 10000)$ 已知他们实现设计好的网络共 $m$ 条线路，为了保证高速，网络是单向的。现在请你告诉他们至少选几所学校作为共享软件的母机，能使每所学校都可以用上。再告诉他们至少要添加几条线路能使任意一所学校作为母机都可以使别的学校使用上软件。\n", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行每行有若干个整数，用空格隔开。\n\n第 $i+1$ 行，每行输入若干个非零整数 $x$，表示从 $i$ 到 $x$ 有一条线路。以 $0$ 作为结束标志。\n", "outputFormat": "第一行一个整数，表示至少选几所学校作为共享软件的母机，能使每所学校都可以用上。\n\n第二行一个整数，表示至少要添加几条线路能使任意一所学校作为母机都可以使别的学校使用上软件。", "hint": "~~POJ 原题。数据扩大了 $100$ 倍。~~\n\n~~$1 \\leq $ 边数 $\\leq 5000000$，$1 \\leq n \\leq 10000$ 。~~\n\n实际上，$1 \\leq n \\leq 10000$，$1\\le $ 边数 $\\le 50000$。", "locale": "zh-CN"}}}
{"pid": "P2813", "type": "P", "difficulty": 2, "samples": [["3 5 \n1000 \n2000 \n1200 \n2100 \n2000 \n1200 \n1000 \n1000", "2000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心", "广东", "排序"], "title": "母舰", "background": "广东汕头聿怀初中 Train#3 Problem 1\n\n（有没有红警既视感~）\n", "description": "在小 A 的星际大战游戏中，一艘强力的母舰往往决定了一场战争的胜负。一艘母舰的攻击力是普通的 MA（Mobile Armor）无法比较的。\n\n对于一艘母舰而言，它是由若干个攻击系统和若干个防御系统组成的。两艘母舰对决时，一艘母舰会选择用不同的攻击系统去攻击对面母舰的防御系统。当这个攻击系统的攻击力大于防御系统的防御力时，那个防御系统会被破坏掉。当一艘母舰的防御系统全部被破坏掉之后，所有的攻击都会攻击到敌方母舰本身上去造成伤害。\n\n这样说，一艘母舰对对面的伤害在一定程度上是取决于选择的攻击对象的。\n\n在瞬息万变的战场中，选择一个最优的攻击对象是非常重要的。所以需要写出一个战斗系统出来，判断出你的母舰最多能对对手造成多少伤害并加以实现。\n", "inputFormat": "输入第一行两个整数 $M$ 和 $N$，表示对方母舰的防御系统数量和你的母舰的攻击系统数量。\n\n接着 $M$ 行每行一个整数每一个表示对方防御系统的防御力是多少。\n\n接着 $N$ 行每行一个整数每一个表示己方攻击系统的攻击力是多少。", "outputFormat": "输出仅有一行，表示可以造成的最大伤害。\n", "hint": "#### 样例解释 #1\n\n对方防御系统有 $3$ 个，防御值为 $1000(a),2000(b),1200(c)$，己方攻击系统有 $5$ 个，攻击值为 $2100(d)，2000(e),1200(f),1000(g),1000(h)$。第 $1$ 轮攻击的最优方案是 $d$ 攻击 $b$，$e$ 攻击 $c$，$f$ 攻击 $a$，$g$ 和 $h$ 攻击对方母舰本身，造成 $2000$ 点伤害。\n\n#### 数据范围与约定\n\n对于 $80 \\%$ 的数据，$1 \\le N,M \\le 1000$。\n\n对于 $100 \\%$ 的数据，$1 \\le N,M \\le 10 ^ 5$。\n\n\n本题为转载题目。", "locale": "zh-CN", "translations": {"en": {"title": "Mothership", "background": "Guangdong Shantou Yuhuai Junior High School Train#3 Problem 1.\n\n(Does this give a Red Alert vibe?)", "description": "In player A’s space war game, a powerful mothership often decides the outcome of a war. The attack power of a mothership cannot be matched by ordinary MAs (Mobile Armor).\n\nA mothership consists of several attack systems and several defense systems. When two motherships duel, one mothership will choose different attack systems to attack the opponent’s defense systems. If the attack power of an attack system is greater than the defense power of a defense system, that defense system will be destroyed. After all defense systems of a mothership have been destroyed, all remaining attacks will hit the enemy mothership itself and deal damage.\n\nIn other words, the damage a mothership deals to the opponent depends, to some extent, on how you choose targets.\n\nOn a rapidly changing battlefield, choosing optimal targets is crucial. Therefore, you need to implement a battle system to determine the maximum damage your mothership can deal to the opponent.", "inputFormat": "The first line contains two integers $M$ and $N$, the number of the opponent’s defense systems and the number of your mothership’s attack systems.\n\nThen follow $M$ lines, each with one integer, representing the defense power of each opponent defense system.\n\nThen follow $N$ lines, each with one integer, representing the attack power of each of your attack systems.", "outputFormat": "Output a single line with the maximum damage that can be dealt.", "hint": "#### Sample Explanation #1\n\nThe opponent has $3$ defense systems with defense values $1000(a),2000(b),1200(c)$, and you have $5$ attack systems with attack values $2100(d),2000(e),1200(f),1000(g),1000(h)$. An optimal plan for the first round is: $d$ attacks $b$, $e$ attacks $c$, $f$ attacks $a$, and $g$ and $h$ attack the enemy mothership itself, dealing $2000$ damage.\n\n#### Constraints\n\nFor $80 \\%$ of the testdata, $1 \\le N,M \\le 1000$.\n\nFor $100 \\%$ of the testdata, $1 \\le N,M \\le 10 ^ 5$.\n\nThis problem is a reposted problem.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "母舰", "background": "广东汕头聿怀初中 Train#3 Problem 1\n\n（有没有红警既视感~）\n", "description": "在小 A 的星际大战游戏中，一艘强力的母舰往往决定了一场战争的胜负。一艘母舰的攻击力是普通的 MA（Mobile Armor）无法比较的。\n\n对于一艘母舰而言，它是由若干个攻击系统和若干个防御系统组成的。两艘母舰对决时，一艘母舰会选择用不同的攻击系统去攻击对面母舰的防御系统。当这个攻击系统的攻击力大于防御系统的防御力时，那个防御系统会被破坏掉。当一艘母舰的防御系统全部被破坏掉之后，所有的攻击都会攻击到敌方母舰本身上去造成伤害。\n\n这样说，一艘母舰对对面的伤害在一定程度上是取决于选择的攻击对象的。\n\n在瞬息万变的战场中，选择一个最优的攻击对象是非常重要的。所以需要写出一个战斗系统出来，判断出你的母舰最多能对对手造成多少伤害并加以实现。\n", "inputFormat": "输入第一行两个整数 $M$ 和 $N$，表示对方母舰的防御系统数量和你的母舰的攻击系统数量。\n\n接着 $M$ 行每行一个整数每一个表示对方防御系统的防御力是多少。\n\n接着 $N$ 行每行一个整数每一个表示己方攻击系统的攻击力是多少。", "outputFormat": "输出仅有一行，表示可以造成的最大伤害。\n", "hint": "#### 样例解释 #1\n\n对方防御系统有 $3$ 个，防御值为 $1000(a),2000(b),1200(c)$，己方攻击系统有 $5$ 个，攻击值为 $2100(d)，2000(e),1200(f),1000(g),1000(h)$。第 $1$ 轮攻击的最优方案是 $d$ 攻击 $b$，$e$ 攻击 $c$，$f$ 攻击 $a$，$g$ 和 $h$ 攻击对方母舰本身，造成 $2000$ 点伤害。\n\n#### 数据范围与约定\n\n对于 $80 \\%$ 的数据，$1 \\le N,M \\le 1000$。\n\n对于 $100 \\%$ 的数据，$1 \\le N,M \\le 10 ^ 5$。\n\n\n本题为转载题目。", "locale": "zh-CN"}}}
{"pid": "P2814", "type": "P", "difficulty": 3, "samples": [["#George\n+Rodney\n#Arthur\n+Gareth\n+Walter\n#Gareth\n+Edward\n?Edward\n?Walter\n?Rodney\n?Arthur\n$", "Edward Arthur\nWalter Arthur\nRodney George\nArthur Arthur"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "搜索", "图论", "线性数据结构", "并查集", "树的遍历"], "title": "家谱", "background": "现代的人对于本家族血统越来越感兴趣。\n", "description": "给出充足的父子关系，请你编写程序找到某个人的最早的祖先。\n", "inputFormat": "输入由多行组成，首先是一系列有关父子关系的描述，其中每一组父子关系中父亲只有一行，儿子可能有若干行，用 `#name` 的形式描写一组父子关系中的父亲的名字，用 `+name` 的形式描写一组父子关系中的儿子的名字；接下来用 `?name` 的形式表示要求该人的最早的祖先；最后用单独的一个 `$` 表示文件结束。", "outputFormat": "按照输入文件的要求顺序，求出每一个要找祖先的人的祖先，格式为：本人的名字 $+$ 一个空格 $+$ 祖先的名字 $+$ 回车。", "hint": "规定每个人的名字都有且只有 $6$ 个字符，而且首字母大写，且没有任意两个人的名字相同。最多可能有 $10^3$ 组父子关系，总人数最多可能达到 $5 \\times 10^4$ 人，家谱中的记载不超过 $30$ 代。", "locale": "zh-CN", "translations": {"en": {"title": "Genealogy", "background": "People today are increasingly interested in their own family lineage.", "description": "Given sufficient father–son relationships, write a program to find a person’s earliest ancestor.", "inputFormat": "The input consists of multiple lines. First comes a series of descriptions of father–son relationships. In each group, the father appears on exactly one line written as `#name`, and the sons appear on zero or more lines written as `+name`. After that, lines written as `?name` indicate queries asking for that person’s earliest ancestor. Finally, a single `$` on its own line marks the end of file.", "outputFormat": "For each query, in the order they appear in the input, output the person’s earliest ancestor in the format: the person’s name $+$ a space $+$ the ancestor’s name $+$ a newline.", "hint": "Each person’s name has exactly $6$ characters, the first letter is uppercase, and no two people share the same name. There can be at most $10^3$ groups of father–son relationships, the total number of people can be up to $5 \\times 10^4$, and the genealogy records do not exceed $30$ generations.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "家谱", "background": "现代的人对于本家族血统越来越感兴趣。\n", "description": "给出充足的父子关系，请你编写程序找到某个人的最早的祖先。\n", "inputFormat": "输入由多行组成，首先是一系列有关父子关系的描述，其中每一组父子关系中父亲只有一行，儿子可能有若干行，用 `#name` 的形式描写一组父子关系中的父亲的名字，用 `+name` 的形式描写一组父子关系中的儿子的名字；接下来用 `?name` 的形式表示要求该人的最早的祖先；最后用单独的一个 `$` 表示文件结束。", "outputFormat": "按照输入文件的要求顺序，求出每一个要找祖先的人的祖先，格式为：本人的名字 $+$ 一个空格 $+$ 祖先的名字 $+$ 回车。", "hint": "规定每个人的名字都有且只有 $6$ 个字符，而且首字母大写，且没有任意两个人的名字相同。最多可能有 $10^3$ 组父子关系，总人数最多可能达到 $5 \\times 10^4$ 人，家谱中的记载不超过 $30$ 代。", "locale": "zh-CN"}}}
{"pid": "P2815", "type": "P", "difficulty": 3, "samples": [["2406:0840:f990:0000:0000:0000:0000:0001", "2406:840:f990::1"], ["2a13:1801:018a:00cf:0100:0000:0000:0000", "2a13:1801:18a:cf:100::"], ["2001:4860:4860:0000:0000:0000:0000:8888", "2001:4860:4860::8888"], ["2001:0db8:0000:0000:0000:0000:0000:0001", "2001:db8::1"], ["0000:0000:0000:0000:0000:0000:0000:0000", "::"], ["0000:0000:0000:0000:0000:0000:0000:0001", "::1"], ["2001:0db8:ffff:0000:0123:4567:89ab:cdef", "2001:db8:ffff::123:4567:89ab:cdef"], ["1234:5678:9abc:def0:1234:5678:9abc:def0", "1234:5678:9abc:def0:1234:5678:9abc:def0"], ["0001:0000:0000:0000:0000:0000:0000:0001", "1::1"], ["0000:0000:0000:0000:0000:0000:0001:0002", "::1:2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串"], "title": "IPv6地址压缩", "background": "（友情提示：IPv6 基础知识曾多次出现在 NOIP 初赛中）Internet Protocol，互联网协议，即为我们常说的 IP。我们目前常说的 IP 主要指它的第四版，即 IPv4，它由 IETF 于 1981 年发布。它的地址长度是 $32$ 个二进制位，因此也就有 $2^{32}$ 个 IP 地址可供使用，约为 $43$ 亿，在当时，谁也没有料想到 IPv4 如此庞大的地址长度会有用完的一天。\n\n在 21 世纪的今天，互联网的蓬勃发展早就了我们如今便利的生活。当下，世界人口已超过 70 亿，计算机和各种联网设备已经走入千家万户，而不再仅是上个世纪 80 年代科学家们的工具。此时便出现了人们日益增长的联网设备需要同落后 IPv4 地址长度之间的矛盾。尽管可以通过网络地址翻译能技术来共享 IP 地址，临时解决枯竭的问题，但显然不是长久之计。\n\nIETF 也有先见之明，早早地于 1998 年发布了 IPv6 协议，从微软 2006 年发布的 Windows Vista 开始成为默认安装的网络协议。作为 IPv4 的继任者，它的地址长度为 $128$ 个二进制位，也就是 $2^{128}$ 个IP地址可供使用。然而面对这冗长的地址，一位记忆力不好的网络工程师小明在配置路由表时遇到了许许多多多的困难，现在他找到了你，希望你帮忙编写一个程序来按照 IPv6 地址标准的格式压缩规则来压缩 IPv6 地址。", "description": "**【IPv6 格式】**\n\nIPv6 二进位制下为 $128$ 位长度，以 $16$ 位为一组，每组以冒号“`:`”隔开，可以分为 $8$ 组，每组以 $4$ 位十六进制方式表示。\n\n比如 `2001:0db8:0000:0000:0123:4567:89ab:cdef` 是一个合法的 IPv6 地址。\n\n同时 IPv6 地址在某些条件下可以压缩：\n\n1. 每组数字代表的独立十六进制数可以省略前位的 `0`。\n\n比如上面的 IPv6 地址可被压缩为 `2001:db8:0:0:123:4567:89ab:cdef`。\n\n2. 可以用双冒号 `::` 表示一组 `0` 或多组连续的 `0`，但只能出现一次。\n\n比如上面的 IPv6 地址可被压缩为 `2001:db8::123:4567:89ab:cdef`。\n\n请你帮助记忆力不好的网络工程师小明解决他遇到的问题。\n\n**【规则补充】**\n\n1. 输入数据为完全展开的 IPv6 地址，确保输入的 IPv6 地址不含双冒号，每组地址省略的 `0` 都会被补充上去。\n\n2. 双冒号只能使用一次，因此我们压缩最长的全 `0` 组。\n\n比如 `2001:0db8:0000:0000:1:0000:0000:0000`，压缩为 `2001:db8:0:0:1::`，而非 `2001:db8::1:0:0:0`。\n\n3. 双冒号只能使用一次，因此我们在我们遇到地址中多个连续全 `0` 组长度相同时，我们压缩最前面的一个。\n\n比如 `2001:0db8:0000:0000:ffff:0000:0000:1`，压缩为 `2001:db8::ffff:0:0:1`，而非 `2001:db8:0:0:ffff::1`。\n\n4. 输入的 IPv6 地址可能无法被压缩，此时请照原样输出。\n\n提示：本题所示的压缩规则与 macOS (Darwin) 默认的 IPv6 地址显示方式相同，而 Windows 和 Linux 只遇到一组全 `0` 时不会使用 `::` 进行压缩。但用此方法压缩过的 IPv6 地址一样可以被 Windows 和 Linux 正确识别。\n\n比如 `2001:0db8:ffff:0000:0123:4567:89ab:cdef`，Darwin 压缩为 `2001:db8:ffff::123:4567:89ab:cdef`，而 Linux 和 Windows 压缩为 `2001:db8:ffff:0:123:4567:89ab:cdef`。", "inputFormat": "一串 $39$ 个字符的字符串，代表一个完全展开的 IPv6 地址。", "outputFormat": "一串压缩后的 IPv6 地址。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "IPv6 Address Compression", "background": "(Friendly note: IPv6 basics have appeared many times in the NOIP preliminary contest.) Internet Protocol, the protocol of the Internet, is what we usually call IP. What we most often refer to is its fourth version, IPv4, which was released by IETF in 1981. Its address length is $32$ binary bits, so there are $2^{32}$ IP addresses available, about $4.3$ billion. At that time, no one expected that even such a large IPv4 address space would one day run out.\n\nIn the 21st century, the rapid development of the Internet has brought us a convenient life. Today, the world’s population has exceeded $7$ billion. Computers and various networked devices have entered thousands of households, no longer just the tools of scientists in the 1980s. This has created a conflict between the growing number of networked devices and the limited IPv4 address space. Although Network Address Translation (NAT) can be used to share IP addresses and temporarily alleviate the exhaustion problem, it is obviously not a long-term solution.\n\nIETF was forward-looking and released the IPv6 protocol as early as 1998. Starting with Microsoft’s Windows Vista in 2006, it became a default-installed network protocol. As the successor to IPv4, its address length is $128$ binary bits, that is, $2^{128}$ IP addresses are available. However, faced with such lengthy addresses, a network engineer named Xiaoming, who has a poor memory, encountered many difficulties when configuring routing tables. He has come to you, hoping you can write a program to compress IPv6 addresses according to the standard IPv6 formatting rules.", "description": "[IPv6 Format]\n\nIn binary, an IPv6 address is $128$ bits long. It is divided into groups of $16$ bits, separated by colons “:”, making $8$ groups in total. Each group is written as a 4-digit hexadecimal number.\n\nFor example, `2001:0db8:0000:0000:0123:4567:89ab:cdef` is a valid IPv6 address.\n\nIPv6 addresses can be compressed under certain conditions:\n\n1. Leading zeros in each group can be omitted.\n\nFor example, the address above can be compressed to `2001:db8:0:0:123:4567:89ab:cdef`.\n\n2. A double colon `::` can represent one or more consecutive groups of `0`, but it can only appear once.\n\nFor example, the address above can be compressed to `2001:db8::123:4567:89ab:cdef`.\n\nPlease help the forgetful network engineer Xiaoming solve his problem.\n\n[Supplementary Rules]\n\n1. The input is a fully expanded IPv6 address. It is guaranteed that the input IPv6 address contains no double colon, and that any omitted zeros in each group have been filled.\n\n2. Since `::` can be used only once, compress the longest run of all-zero groups.\n\nFor example, `2001:0db8:0000:0000:1:0000:0000:0000` is compressed to `2001:db8:0:0:1::`, not `2001:db8::1:0:0:0`.\n\n3. Since `::` can be used only once, if there are multiple runs of all-zero groups with the same maximum length, compress the earliest one.\n\nFor example, `2001:0db8:0000:0000:ffff:0000:0000:1` is compressed to `2001:db8::ffff:0:0:1`, not `2001:db8:0:0:ffff::1`.\n\n4. The input IPv6 address may not be compressible. In that case, output it as-is.\n\nTip: The compression rules shown in this problem match the default IPv6 display style on macOS (Darwin), whereas Windows and Linux do not use `::` when there is only a single all-zero group. However, IPv6 addresses compressed in this way can still be correctly recognized by Windows and Linux.\n\nFor example, `2001:0db8:ffff:0000:0123:4567:89ab:cdef` is compressed by Darwin as `2001:db8:ffff::123:4567:89ab:cdef`, while Linux and Windows compress it as `2001:db8:ffff:0:123:4567:89ab:cdef`.", "inputFormat": "A string of $39$ characters representing a fully expanded IPv6 address.", "outputFormat": "A string representing the compressed IPv6 address.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "IPv6地址压缩", "background": "（友情提示：IPv6 基础知识曾多次出现在 NOIP 初赛中）Internet Protocol，互联网协议，即为我们常说的 IP。我们目前常说的 IP 主要指它的第四版，即 IPv4，它由 IETF 于 1981 年发布。它的地址长度是 $32$ 个二进制位，因此也就有 $2^{32}$ 个 IP 地址可供使用，约为 $43$ 亿，在当时，谁也没有料想到 IPv4 如此庞大的地址长度会有用完的一天。\n\n在 21 世纪的今天，互联网的蓬勃发展早就了我们如今便利的生活。当下，世界人口已超过 70 亿，计算机和各种联网设备已经走入千家万户，而不再仅是上个世纪 80 年代科学家们的工具。此时便出现了人们日益增长的联网设备需要同落后 IPv4 地址长度之间的矛盾。尽管可以通过网络地址翻译能技术来共享 IP 地址，临时解决枯竭的问题，但显然不是长久之计。\n\nIETF 也有先见之明，早早地于 1998 年发布了 IPv6 协议，从微软 2006 年发布的 Windows Vista 开始成为默认安装的网络协议。作为 IPv4 的继任者，它的地址长度为 $128$ 个二进制位，也就是 $2^{128}$ 个IP地址可供使用。然而面对这冗长的地址，一位记忆力不好的网络工程师小明在配置路由表时遇到了许许多多多的困难，现在他找到了你，希望你帮忙编写一个程序来按照 IPv6 地址标准的格式压缩规则来压缩 IPv6 地址。", "description": "**【IPv6 格式】**\n\nIPv6 二进位制下为 $128$ 位长度，以 $16$ 位为一组，每组以冒号“`:`”隔开，可以分为 $8$ 组，每组以 $4$ 位十六进制方式表示。\n\n比如 `2001:0db8:0000:0000:0123:4567:89ab:cdef` 是一个合法的 IPv6 地址。\n\n同时 IPv6 地址在某些条件下可以压缩：\n\n1. 每组数字代表的独立十六进制数可以省略前位的 `0`。\n\n比如上面的 IPv6 地址可被压缩为 `2001:db8:0:0:123:4567:89ab:cdef`。\n\n2. 可以用双冒号 `::` 表示一组 `0` 或多组连续的 `0`，但只能出现一次。\n\n比如上面的 IPv6 地址可被压缩为 `2001:db8::123:4567:89ab:cdef`。\n\n请你帮助记忆力不好的网络工程师小明解决他遇到的问题。\n\n**【规则补充】**\n\n1. 输入数据为完全展开的 IPv6 地址，确保输入的 IPv6 地址不含双冒号，每组地址省略的 `0` 都会被补充上去。\n\n2. 双冒号只能使用一次，因此我们压缩最长的全 `0` 组。\n\n比如 `2001:0db8:0000:0000:1:0000:0000:0000`，压缩为 `2001:db8:0:0:1::`，而非 `2001:db8::1:0:0:0`。\n\n3. 双冒号只能使用一次，因此我们在我们遇到地址中多个连续全 `0` 组长度相同时，我们压缩最前面的一个。\n\n比如 `2001:0db8:0000:0000:ffff:0000:0000:1`，压缩为 `2001:db8::ffff:0:0:1`，而非 `2001:db8:0:0:ffff::1`。\n\n4. 输入的 IPv6 地址可能无法被压缩，此时请照原样输出。\n\n提示：本题所示的压缩规则与 macOS (Darwin) 默认的 IPv6 地址显示方式相同，而 Windows 和 Linux 只遇到一组全 `0` 时不会使用 `::` 进行压缩。但用此方法压缩过的 IPv6 地址一样可以被 Windows 和 Linux 正确识别。\n\n比如 `2001:0db8:ffff:0000:0123:4567:89ab:cdef`，Darwin 压缩为 `2001:db8:ffff::123:4567:89ab:cdef`，而 Linux 和 Windows 压缩为 `2001:db8:ffff:0:123:4567:89ab:cdef`。", "inputFormat": "一串 $39$ 个字符的字符串，代表一个完全展开的 IPv6 地址。", "outputFormat": "一串压缩后的 IPv6 地址。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2816", "type": "P", "difficulty": 2, "samples": [["3\n0 0 3\n", "2"], ["4\n0 0 0 0\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "山东"], "title": "宋荣子搭积木", "background": "", "description": "saruka 非常喜欢搭积木，他一共有 $n$ 块积木。而且 saruka 的积木很特殊，只能一块块的竖着摞，可以摞很多列。说过 saruka 的是特殊的积木了，这些积木都非常智能，第 $i$ 块积木有一个情绪值 $x_i$ ，当摞在这块积木上的积木总数超过 $x_i$ 时，这块积木就会很不高兴，发誓以后不会再和 saruka 一起玩耍了。saruka 这么爱玩积木，肯定不会让积木不高兴的，但是 saruka 又希望每块积木都被用上，并且摞的积木列数最少。你能来帮帮 saruka 吗?", "inputFormat": "第一行一个整数 $n$，含义如题目描述所示，\n\n第二行有 $n$ 个数 $x_i$，含义如题目描述所示。", "outputFormat": "输出一个数字，代表最小的积木列数。", "hint": "对于 $100 \\%$ 的数据，$1 \\le n \\le 5000$，$0 \\le x_i \\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "Song Rongzi Builds Blocks", "background": "", "description": "saruka loves building with blocks and has $n$ blocks. saruka’s blocks are special: they can only be stacked vertically one by one, and you may build many columns. Since saruka’s blocks are special, they are intelligent. The $i$-th block has a mood value $x_i$. If the total number of blocks stacked on top of this block exceeds $x_i$, this block will be unhappy and vows never to play with saruka again. saruka loves blocks and will not make any block unhappy, but saruka also wants to use every block and minimize the number of columns. Can you help saruka?", "inputFormat": "The first line contains an integer $n$, as described above.  \nThe second line contains $n$ numbers $x_i$, as described above.", "outputFormat": "Output a single integer, the minimum number of columns.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 5000$, $0 \\le x_i \\le n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "宋荣子搭积木", "background": "", "description": "saruka 非常喜欢搭积木，他一共有 $n$ 块积木。而且 saruka 的积木很特殊，只能一块块的竖着摞，可以摞很多列。说过 saruka 的是特殊的积木了，这些积木都非常智能，第 $i$ 块积木有一个情绪值 $x_i$ ，当摞在这块积木上的积木总数超过 $x_i$ 时，这块积木就会很不高兴，发誓以后不会再和 saruka 一起玩耍了。saruka 这么爱玩积木，肯定不会让积木不高兴的，但是 saruka 又希望每块积木都被用上，并且摞的积木列数最少。你能来帮帮 saruka 吗?", "inputFormat": "第一行一个整数 $n$，含义如题目描述所示，\n\n第二行有 $n$ 个数 $x_i$，含义如题目描述所示。", "outputFormat": "输出一个数字，代表最小的积木列数。", "hint": "对于 $100 \\%$ 的数据，$1 \\le n \\le 5000$，$0 \\le x_i \\le n$。", "locale": "zh-CN"}}}
{"pid": "P2817", "type": "P", "difficulty": 3, "samples": [["5 2", "54"], ["7 4", "1728"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "山东"], "title": "宋荣子的城堡", "background": "", "description": "saruka 有一座大大的城堡！城堡里面有 $n$ 个房间，每个房间上面都写着一个数字 $p_i$。有一天，saruka 邀请他的小伙伴 LYL 和 MagHSK 来城堡里玩耍，他们约定，如果某一个人当前站在 $i$ 号房间里，那么下一步他就要去 $p_i$ 号房间，在下一步就要去 $p_{p_i}$ 号房间。\n\n为了增加趣味性，saruka 决定重新书写一下每个房间的 $p_i$，以满足：\n\n- 如果从编号为 $1 \\sim k$ 的某个房间走，按照规则走，必须能走回 $1$ 号房间。特别的，如果从 $1$ 号房间开始走，也要走回 $1$ 号房间。（至少走一步，如果 $p_1 = 1$，从 $1$ 走到 $1$ 也算合法）。\n\n- 如果从编号大于 $k$ 的房间开始，按照规则走，一定不能走到 $1$ 号房间。\n\nsaruka 想知道，一共有多少书写 $p_i$ 的方案可以满足要求，答案对 $10 ^ 9 + 7$ 取模。", "inputFormat": "共一行两个数字 $n,k$，含义如题。", "outputFormat": "一个数字，表示合法的方案数。答案对 $10 ^ 9 + 7$ 取模。", "hint": "对于 $100 \\%$ 的数据，$1 \\le n \\le 10 ^ {18},1 \\le k \\le \\min(n,8)$。", "locale": "zh-CN", "translations": {"en": {"title": "Song Rongzi’s Castle", "background": "", "description": "saruka owns a big castle. There are $n$ rooms in the castle, and each room has a number $p_i$ written on it. One day, saruka invited his friends LYL and MagHSK to play in the castle. They agreed that if someone is currently standing in room $i$, then on the next step they must go to room $p_i$, and on the following step to room $p_{p_i}$.\n\nTo make it more interesting, saruka decides to rewrite each $p_i$ to satisfy the following:\n\n- If you start from any room numbered from $1 \\sim k$ and follow the rule, you must be able to return to room $1$. In particular, if you start from room $1$, you must return to room $1$ as well (you must take at least one step; if $p_1 = 1$, moving from $1$ to $1$ is also considered valid).\n\n- If you start from any room with a number greater than $k$ and follow the rule, you must never reach room $1$.\n\nsaruka wants to know how many assignments of $p_i$ satisfy the requirements. Output the answer modulo $10 ^ 9 + 7$.", "inputFormat": "A single line containing two integers $n, k$, as described.", "outputFormat": "Output a single integer, the number of valid assignments. The answer is taken modulo $10 ^ 9 + 7$.", "hint": "Constraints: For $100 \\%$ of the testdata, $1 \\le n \\le 10 ^ {18}, 1 \\le k \\le \\min(n, 8)$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "宋荣子的城堡", "background": "", "description": "saruka 有一座大大的城堡！城堡里面有 $n$ 个房间，每个房间上面都写着一个数字 $p_i$。有一天，saruka 邀请他的小伙伴 LYL 和 MagHSK 来城堡里玩耍，他们约定，如果某一个人当前站在 $i$ 号房间里，那么下一步他就要去 $p_i$ 号房间，在下一步就要去 $p_{p_i}$ 号房间。\n\n为了增加趣味性，saruka 决定重新书写一下每个房间的 $p_i$，以满足：\n\n- 如果从编号为 $1 \\sim k$ 的某个房间走，按照规则走，必须能走回 $1$ 号房间。特别的，如果从 $1$ 号房间开始走，也要走回 $1$ 号房间。（至少走一步，如果 $p_1 = 1$，从 $1$ 走到 $1$ 也算合法）。\n\n- 如果从编号大于 $k$ 的房间开始，按照规则走，一定不能走到 $1$ 号房间。\n\nsaruka 想知道，一共有多少书写 $p_i$ 的方案可以满足要求，答案对 $10 ^ 9 + 7$ 取模。", "inputFormat": "共一行两个数字 $n,k$，含义如题。", "outputFormat": "一个数字，表示合法的方案数。答案对 $10 ^ 9 + 7$ 取模。", "hint": "对于 $100 \\%$ 的数据，$1 \\le n \\le 10 ^ {18},1 \\le k \\le \\min(n,8)$。", "locale": "zh-CN"}}}
{"pid": "P2818", "type": "P", "difficulty": 2, "samples": [["7\n9\n", "2\n"], ["11\n108\n", "9\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["高精度"], "title": "天使的起誓", "background": "", "description": "Tenshi 非常幸运地被选为掌管智慧之匙的天使。在正式任职之前，她必须和其他新当选的天使一样要宣誓。\n\n宣誓仪式是每位天使各自表述自己的使命，他们的发言稿放在 $n$ 个呈圆形排列的宝盒中。这些宝盒按顺时针方向被编上号码 $1, 2, \\cdots, n - 1, n$。\n\n一开始天使们站在编号为 $n$ 的宝盒旁。她们各自手上都有一个数字，代表她们自己的发言稿所在的盒子是从 $1$ 号盒子开始按顺时针方向的第几个。例如：有  $7$ 个盒子，如果 Tenshi 手上的数字为 $9$，那么她的发言稿所在的盒子就是 $2$ 个。现在天使们开始按照自己手上的数字来找发言稿，先找到的就可以先发言。 \n\nTenshi 一下子就找到了，于是她最先上台宣誓：“我将带领大家开启 NOI 之门……” Tenshi 宣誓结束后，陆续有天使上台宣誓。可是有一位天使找了好久都找不到她的发言稿，原来她手上的数字 $m$ 非常大，她转了好久都找不到她想找的宝盒。\n\n请帮助这位天使找到她想找的宝盒编号。\n", "inputFormat": "第一行为正整数 $n$，第二行为正整数 $m$。", "outputFormat": "只有一行（包括换行符），即天使想找的宝盒的编号。\n", "hint": "对于 $100 \\%$ 的数据，$2\\le n\\le 10^8$，$2\\le m\\le 10^{1000}$。", "locale": "zh-CN", "translations": {"en": {"title": "The Angel's Oath", "background": "", "description": "Tenshi is very lucky to be chosen as the angel who holds the Key of Wisdom. Before officially taking office, she must take an oath like the other newly elected angels.\n\nDuring the oath ceremony, each angel states her mission, and their speech scripts are placed in $n$ treasure boxes arranged in a circle. These boxes are numbered clockwise as $1, 2, \\cdots, n - 1, n$.\n\nAt the beginning, the angels stand next to the box numbered $n$. Each of them holds a number that indicates the box containing her script is the $k$-th one clockwise starting from box $1$. For example: there are $7$ boxes, and if the number in Tenshi’s hand is $9$, then the box containing her script is $2$. Now the angels start to search for their scripts according to the numbers they hold; whoever finds it first will speak first.\n\nTenshi finds hers immediately and goes on stage first: “I will lead everyone to open the gate to NOI ...” After Tenshi finishes her oath, other angels go on stage one after another. However, one angel cannot find her script for a long time. It turns out that the number $m$ in her hand is very large, and after circling for a long time she still cannot find the box she wants.\n\nPlease help this angel find the index of the box she is looking for.", "inputFormat": "The first line contains a positive integer $n$, and the second line contains a positive integer $m$.", "outputFormat": "Output a single line: the index of the box the angel is looking for.", "hint": "For 100% of the testdata, $2 \\le n \\le 10^8$, $2 \\le m \\le 10^{1000}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "天使的起誓", "background": "", "description": "Tenshi 非常幸运地被选为掌管智慧之匙的天使。在正式任职之前，她必须和其他新当选的天使一样要宣誓。\n\n宣誓仪式是每位天使各自表述自己的使命，他们的发言稿放在 $n$ 个呈圆形排列的宝盒中。这些宝盒按顺时针方向被编上号码 $1, 2, \\cdots, n - 1, n$。\n\n一开始天使们站在编号为 $n$ 的宝盒旁。她们各自手上都有一个数字，代表她们自己的发言稿所在的盒子是从 $1$ 号盒子开始按顺时针方向的第几个。例如：有  $7$ 个盒子，如果 Tenshi 手上的数字为 $9$，那么她的发言稿所在的盒子就是 $2$ 个。现在天使们开始按照自己手上的数字来找发言稿，先找到的就可以先发言。 \n\nTenshi 一下子就找到了，于是她最先上台宣誓：“我将带领大家开启 NOI 之门……” Tenshi 宣誓结束后，陆续有天使上台宣誓。可是有一位天使找了好久都找不到她的发言稿，原来她手上的数字 $m$ 非常大，她转了好久都找不到她想找的宝盒。\n\n请帮助这位天使找到她想找的宝盒编号。\n", "inputFormat": "第一行为正整数 $n$，第二行为正整数 $m$。", "outputFormat": "只有一行（包括换行符），即天使想找的宝盒的编号。\n", "hint": "对于 $100 \\%$ 的数据，$2\\le n\\le 10^8$，$2\\le m\\le 10^{1000}$。", "locale": "zh-CN"}}}
{"pid": "P2819", "type": "P", "difficulty": 2, "samples": [["5 8 4\n1 2\n1 3\n1 4\n2 3\n2 4\n2 5\n3 4\n4 5", "48"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "搜索", "递归"], "title": "图的 m 着色问题", "background": "给定无向连通图 $G$ 和 $m$ 种不同的颜色。用这些颜色为图 $G$ 的各顶点着色，每个顶点着一种颜色。如果有一种着色法使 $G$ 中每条边的 $2$ 个顶点着不同颜色，则称这个图是 $m$ 可着色的。图的 $m$ 着色问题是对于给定图 $G$ 和 $m$ 种颜色，找出所有不同的着色法。", "description": "对于给定的无向连通图 $G$ 和 $m$ 种不同的颜色，编程计算图的所有不同的着色法。", "inputFormat": "第 $1$ 行有 $3$ 个正整数 $n,k,m$，表示给定的图 $G$ 有 $n$ 个顶点和 $k$ 条边，$m$ 种颜色。顶点编号为 $1,2,\\dots,n$。接下来的 $k$ 行中，每行有 $2$ 个正整数 $u,v$，表示图 $G$ 的一条边 $(u,v)$。", "outputFormat": "程序运行结束时，将计算出的不同的着色方案数输出。", "hint": "数据保证，$1\\leq n\\leq 100$，$1 \\leq k\\leq 2500$。\n\n在 $n$ 很大时保证 $k$ 足够大。\n\n保证答案不超过 $20000$。\n\n数据为在满足上述条件的合法数据中随机采样得到。", "locale": "zh-CN", "translations": {"en": {"title": "Graph m-Coloring Problem", "background": "Given an undirected connected graph $G$ and $m$ different colors, color each vertex of $G$ using these colors, with each vertex assigned exactly one color. If there exists a coloring such that the two vertices of every edge in $G$ have different colors, then the graph is called $m$-colorable. The graph $m$-coloring problem is: for a given graph $G$ and $m$ colors, find all distinct colorings.", "description": "For a given undirected connected graph $G$ and $m$ different colors, write a program to compute all distinct colorings of the graph.", "inputFormat": "The first line contains $3$ positive integers $n, k, m$, indicating that the given graph $G$ has $n$ vertices and $k$ edges, and there are $m$ colors. The vertices are labeled $1, 2, \\dots, n$. The next $k$ lines each contain $2$ positive integers $u, v$, representing an edge of the graph $(u, v)$.", "outputFormat": "At the end of the program, output the number of computed distinct coloring schemes.", "hint": "The data guarantees $1 \\leq n \\leq 100$, $1 \\leq k \\leq 2500$.\n\nWhen $n$ is large, it is guaranteed that $k$ is sufficiently large.\n\nIt is guaranteed that the answer does not exceed $20000$.\n\nThe testdata is randomly sampled from valid data that meet the above conditions.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "图的 m 着色问题", "background": "给定无向连通图 $G$ 和 $m$ 种不同的颜色。用这些颜色为图 $G$ 的各顶点着色，每个顶点着一种颜色。如果有一种着色法使 $G$ 中每条边的 $2$ 个顶点着不同颜色，则称这个图是 $m$ 可着色的。图的 $m$ 着色问题是对于给定图 $G$ 和 $m$ 种颜色，找出所有不同的着色法。", "description": "对于给定的无向连通图 $G$ 和 $m$ 种不同的颜色，编程计算图的所有不同的着色法。", "inputFormat": "第 $1$ 行有 $3$ 个正整数 $n,k,m$，表示给定的图 $G$ 有 $n$ 个顶点和 $k$ 条边，$m$ 种颜色。顶点编号为 $1,2,\\dots,n$。接下来的 $k$ 行中，每行有 $2$ 个正整数 $u,v$，表示图 $G$ 的一条边 $(u,v)$。", "outputFormat": "程序运行结束时，将计算出的不同的着色方案数输出。", "hint": "数据保证，$1\\leq n\\leq 100$，$1 \\leq k\\leq 2500$。\n\n在 $n$ 很大时保证 $k$ 足够大。\n\n保证答案不超过 $20000$。\n\n数据为在满足上述条件的合法数据中随机采样得到。", "locale": "zh-CN"}}}
{"pid": "P2820", "type": "P", "difficulty": 3, "samples": [["5 5\n1 2 8\n1 3 1\n1 5 3\n2 4 5\n3 4 2\n", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "并查集", "生成树"], "title": "局域网", "background": "某个局域网内有 $n$ 台计算机，由于搭建局域网时工作人员的疏忽，现在局域网内的连接形成了回路，我们知道如果局域网形成回路那么数据将不停的在回路内传输，造成网络卡的现象。因为连接计算机的网线本身不同，所以有一些连线不是很畅通，我们用 $f(i,j)$ 表示 $i,j$ 之间连接的畅通程度，$f(i,j)$ 值越小表示 $i,j$ 之间连接越通畅，$f(i,j)$ 为 $0$ 表示 $i,j$ 之间无网线连接。", "description": "现在需要解决回路问题，我们将除去一些连线，使得网络中没有回路，**不改变原图节点的连通性**，并且被除去网线的 $\\sum f(i,j)$ 最大，请求出这个最大值。", "inputFormat": "第一行两个正整数 $n,k$。\n\n接下来的 $k$ 行每行三个正整数 $i,j,m$ 表示 $i,j$ 两台计算机之间有网线联通，通畅程度为 $m$。", "outputFormat": "一个正整数， $\\sum f(i,j)$ 的最大值。", "hint": "对于全部数据，保证 $1\\le n \\le 100$，$1\\le f(i,j)\\le 1000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Local Area Network", "background": "In a certain local area network, there are $n$ computers. Due to negligence when setting up the LAN, the connections now form cycles. We know that if a LAN contains cycles, data will keep circulating within the cycle, causing network lag. Because the network cables connecting computers are different, some connections are not very smooth. We use $f(i,j)$ to denote the smoothness between $i$ and $j$; a smaller value of $f(i,j)$ means a smoother connection between $i$ and $j$, and $f(i,j) = 0$ means there is no cable between $i$ and $j$.", "description": "Now we need to resolve the cycle problem. We will remove some cables so that the network contains no cycles, **without changing the connectivity of the original graph's nodes**, and the sum of $f(i,j)$ over the removed cables is maximized. Please compute this maximum value.", "inputFormat": "The first line contains two positive integers $n, k$.\nThe next $k$ lines each contain three positive integers $i, j, m$, indicating that there is a cable between computers $i$ and $j$ with smoothness $m$.", "outputFormat": "A single positive integer: the maximum value of $\\sum f(i,j)$.", "hint": "Constraints: For all testdata, it is guaranteed that $1 \\le n \\le 100$, $1 \\le f(i,j) \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "局域网", "background": "某个局域网内有 $n$ 台计算机，由于搭建局域网时工作人员的疏忽，现在局域网内的连接形成了回路，我们知道如果局域网形成回路那么数据将不停的在回路内传输，造成网络卡的现象。因为连接计算机的网线本身不同，所以有一些连线不是很畅通，我们用 $f(i,j)$ 表示 $i,j$ 之间连接的畅通程度，$f(i,j)$ 值越小表示 $i,j$ 之间连接越通畅，$f(i,j)$ 为 $0$ 表示 $i,j$ 之间无网线连接。", "description": "现在需要解决回路问题，我们将除去一些连线，使得网络中没有回路，**不改变原图节点的连通性**，并且被除去网线的 $\\sum f(i,j)$ 最大，请求出这个最大值。", "inputFormat": "第一行两个正整数 $n,k$。\n\n接下来的 $k$ 行每行三个正整数 $i,j,m$ 表示 $i,j$ 两台计算机之间有网线联通，通畅程度为 $m$。", "outputFormat": "一个正整数， $\\sum f(i,j)$ 的最大值。", "hint": "对于全部数据，保证 $1\\le n \\le 100$，$1\\le f(i,j)\\le 1000$。\n", "locale": "zh-CN"}}}
{"pid": "P2821", "type": "P", "difficulty": 4, "samples": [["48", "68"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心"], "title": "变幻数", "background": null, "description": "给定一个十进制正整数 $n$，它的递归变幻数定义如下：\n\n- 如果 $n$ 的位数多于 $1$ 位（忽略前置的 $0$），将 $n$ 的各个位上的数相乘，乘积为 $m$。称 $m$ 为 $n$ 的子变幻数，$n$ 称为 $m$ 的父变幻数。求一个数的变幻数等于求其子变幻数。即求 $n$ 的变幻数等于求 $m$ 的变幻数。\n\n- 如果 $n$ 的位数只有一位，$n$ 的变幻数即为它本身。 如求 $679$ 的变幻数过程为：$679 \\to 378(6 \\times 7 \\times 9) \\to 168(3 \\times 7 \\times 8) \\to 48(1 \\times 6 \\times 8) \\to 32(4 \\times 8) \\to 6(2 \\times 3)$，所以 $679$ 的变幻数为 $6$。\n\n现在的问题是给定一个子变幻数 $k$，问 $k$ 的父变幻数最小是多少？ 如：$k=18$，则 $k$ 的父变幻数可以是 $29$，也可以是 $92$。但最小为 $29$。", "inputFormat": "一个子变幻数 $k$（位数 $\\le 1000$）。", "outputFormat": "$k$ 的最小父变幻数。 当不存在父变幻数时请输出 `There is no such number!`。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Transform Number", "background": "", "description": "Given a positive decimal integer $n$, its recursive \"transform number\" is defined as follows:\n\n- If $n$ has more than 1 digit (ignoring leading zeros), multiply all its digits, and let the product be $m$. Call $m$ a \"sub-transform number\" of $n$, and call $n$ a \"parent transform number\" of $m$. To compute the \"transform number\" of a number means to keep taking its sub-transform number recursively. That is, computing the transform number of $n$ is the same as computing the transform number of $m$.\n\n- If $n$ has exactly one digit, then its transform number is itself. For example, the process for the transform number of $679$ is: $679 \\to 378(6 \\times 7 \\times 9) \\to 168(3 \\times 7 \\times 8) \\to 48(1 \\times 6 \\times 8) \\to 32(4 \\times 8) \\to 6(2 \\times 3)$, so the transform number of $679$ is $6$.\n\nNow, given a sub-transform number $k$, what is the smallest parent transform number of $k$? For example, when $k=18$, the parent transform number can be $29$ or $92$, but the smallest is $29$.", "inputFormat": "A sub-transform number $k$ (number of digits $\\le 1000$).", "outputFormat": "The smallest parent transform number of $k$. If no parent transform number exists, output `There is no such number!`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "变幻数", "background": null, "description": "给定一个十进制正整数 $n$，它的递归变幻数定义如下：\n\n- 如果 $n$ 的位数多于 $1$ 位（忽略前置的 $0$），将 $n$ 的各个位上的数相乘，乘积为 $m$。称 $m$ 为 $n$ 的子变幻数，$n$ 称为 $m$ 的父变幻数。求一个数的变幻数等于求其子变幻数。即求 $n$ 的变幻数等于求 $m$ 的变幻数。\n\n- 如果 $n$ 的位数只有一位，$n$ 的变幻数即为它本身。 如求 $679$ 的变幻数过程为：$679 \\to 378(6 \\times 7 \\times 9) \\to 168(3 \\times 7 \\times 8) \\to 48(1 \\times 6 \\times 8) \\to 32(4 \\times 8) \\to 6(2 \\times 3)$，所以 $679$ 的变幻数为 $6$。\n\n现在的问题是给定一个子变幻数 $k$，问 $k$ 的父变幻数最小是多少？ 如：$k=18$，则 $k$ 的父变幻数可以是 $29$，也可以是 $92$。但最小为 $29$。", "inputFormat": "一个子变幻数 $k$（位数 $\\le 1000$）。", "outputFormat": "$k$ 的最小父变幻数。 当不存在父变幻数时请输出 `There is no such number!`。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2822", "type": "P", "difficulty": 3, "samples": [["1 2\n3 3", "1"], ["2 5\n4 5\n6 7", "0\n7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "2016", "NOIP 提高组", "组合数学", "前缀和"], "title": "[NOIP 2016 提高组] 组合数问题", "background": "NOIP2016 提高组 D2T1", "description": "组合数 $\\binom{n}{m}$ 表示的是从 $n$ 个物品中选出 $m$ 个物品的方案数。举个例子，从 $(1,2,3)$ 三个物品中选择两个物品可以有 $(1,2),(1,3),(2,3)$ 这三种选择方法。根据组合数的定义，我们可以给出计算组合数 $\\binom{n}{m}$ 的一般公式：\n\n$$\\binom{n}{m}=\\frac{n!}{m!(n-m)!}$$\n\n其中 $n!=1\\times2\\times\\cdots\\times n$；特别地，定义 $0!=1$。\n\n小葱想知道如果给定 $n,m$ 和 $k$，对于所有的 $0\\leq i\\leq n,0\\leq j\\leq \\min \\left ( i, m \\right )$ 有多少对 $(i,j)$ 满足 $k\\mid\\binom{i}{j}$。", "inputFormat": "第一行有两个整数 $t,k$，其中 $t$ 代表该测试点总共有多少组测试数据，$k$ 的意义见问题描述。\n\n接下来 $t$ 行每行两个整数 $n,m$，其中 $n,m$ 的意义见问题描述。", "outputFormat": "共 $t$ 行，每行一个整数代表所有的 $0\\leq i\\leq n,0\\leq j\\leq \\min \\left ( i, m \\right )$ 中有多少对 $(i,j)$ 满足 $k\\mid\\binom{i}{j}$。", "hint": "【样例1说明】\n\n在所有可能的情况中，只有 $\\binom{2}{1} = 2$ 一种情况是 $2$ 的倍数。\n\n【子任务】\n\n::cute-table{tuack}\n\n|测试点|$n$|$m$|$k$|$t$|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$\\le3$|$\\le3$|$=2$|$=1$|\n|$2$|^|^|$=3$|$\\le10^4$|\n|$3$|$\\le7$|$\\le7$|$=4$|$=1$|\n|$4$|^|^|$=5$|$\\le10^4$|\n|$5$|$\\le10$|$\\le10$|$=6$|$=1$|\n|$6$|^|^|$=7$|$\\le10^4$|\n|$7$|$\\le20$|$\\le100$|$=8$|$=1$|\n|$8$|^|^|$=9$|$\\le10^4$|\n|$9$|$\\le25$|$\\le2000$|$=10$|$=1$|\n|$10$|^|^|$=11$|$\\le10^4$|\n|$11$|$\\le60$|$\\le20$|$=12$|$=1$|\n|$12$|^|^|$=13$|$\\le10^4$|\n|$13$|$\\le100$|$\\le25$|$=14$|$=1$|\n|$14$|^|^|$=15$|$\\le10^4$|\n|$15$|^|$\\le60$|$=16$|$=1$|\n|$16$|^|^|$=17$|$\\le10^4$|\n|$17$|$\\le2000$|$\\le100$|$=18$|$=1$|\n|$18$|^|^|$=19$|$\\le10^4$|\n|$19$|^|$\\le2000$|$=20$|$=1$|\n|$20$|^|^|$=21$|$\\le10^4$|\n\n- 对于全部的测试点，保证 $0 \\leq n, m \\leq 2 \\times 10^3$，$1 \\leq t \\leq 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2016 Senior] Binomial Coefficient Problem", "background": "NOIP 2016 Senior D2T1.", "description": "The binomial coefficient $\\binom{n}{m}$ represents the number of ways to choose $m$ items from $n$ items. For example, when choosing two items from three items $(1, 2, 3)$, there are three choices: $(1, 2)$, $(1, 3)$, and $(2, 3)$. By definition, the general formula for computing the binomial coefficient $\\binom{n}{m}$ is:\n\n$$\\binom{n}{m}=\\frac{n!}{m!(n-m)!}$$\n\nwhere $n!=1\\times2\\times\\cdots\\times n$. In particular, $0!=1$.\n\nXiaocong wants to know, given $n$, $m$, and $k$, among all $0 \\leq i \\leq n$, $0 \\leq j \\leq \\min \\left ( i, m \\right )$, how many pairs $(i, j)$ satisfy $k \\mid \\binom{i}{j}$.", "inputFormat": "The first line contains two integers $t, k$, where $t$ is the number of test cases in this testdata, and $k$ is as described in the problem.\n\nEach of the next $t$ lines contains two integers $n, m$, where $n$ and $m$ are as described in the problem.", "outputFormat": "Output $t$ lines. Each line contains a single integer representing how many pairs $(i, j)$ among all $0 \\leq i \\leq n$, $0 \\leq j \\leq \\min \\left ( i, m \\right )$ satisfy $k \\mid \\binom{i}{j}$.", "hint": "Sample 1 Explanation.\n\nAmong all possible cases, only $\\binom{2}{1} = 2$ is a multiple of $2$.\n\nSubtasks.\n\n| Testpoint | $n$ | $m$ | $k$ | $t$ |\n|:-:|:-:|:-:|:-:|:-:|\n| $1$ | $\\le 3$ | $\\le 3$ | $=2$ | $=1$ |\n| $2$ | ^ | ^ | $=3$ | $\\le 10^4$ |\n| $3$ | $\\le 7$ | $\\le 7$ | $=4$ | $=1$ |\n| $4$ | ^ | ^ | $=5$ | $\\le 10^4$ |\n| $5$ | $\\le 10$ | $\\le 10$ | $=6$ | $=1$ |\n| $6$ | ^ | ^ | $=7$ | $\\le 10^4$ |\n| $7$ | $\\le 20$ | $\\le 100$ | $=8$ | $=1$ |\n| $8$ | ^ | ^ | $=9$ | $\\le 10^4$ |\n| $9$ | $\\le 25$ | $\\le 2000$ | $=10$ | $=1$ |\n| $10$ | ^ | ^ | $=11$ | $\\le 10^4$ |\n| $11$ | $\\le 60$ | $\\le 20$ | $=12$ | $=1$ |\n| $12$ | ^ | ^ | $=13$ | $\\le 10^4$ |\n| $13$ | $\\le 100$ | $\\le 25$ | $=14$ | $=1$ |\n| $14$ | ^ | ^ | $=15$ | $\\le 10^4$ |\n| $15$ | ^ | $\\le 60$ | $=16$ | $=1$ |\n| $16$ | ^ | ^ | $=17$ | $\\le 10^4$ |\n| $17$ | $\\le 2000$ | $\\le 100$ | $=18$ | $=1$ |\n| $18$ | ^ | ^ | $=19$ | $\\le 10^4$ |\n| $19$ | ^ | $\\le 2000$ | $=20$ | $=1$ |\n| $20$ | ^ | ^ | $=21$ | $\\le 10^4$ |\n\nConstraints.\n\nFor all testdata, it is guaranteed that $0 \\leq n, m \\leq 2 \\times 10^3$, $1 \\leq t \\leq 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2016 提高组] 组合数问题", "background": "NOIP2016 提高组 D2T1", "description": "组合数 $\\binom{n}{m}$ 表示的是从 $n$ 个物品中选出 $m$ 个物品的方案数。举个例子，从 $(1,2,3)$ 三个物品中选择两个物品可以有 $(1,2),(1,3),(2,3)$ 这三种选择方法。根据组合数的定义，我们可以给出计算组合数 $\\binom{n}{m}$ 的一般公式：\n\n$$\\binom{n}{m}=\\frac{n!}{m!(n-m)!}$$\n\n其中 $n!=1\\times2\\times\\cdots\\times n$；特别地，定义 $0!=1$。\n\n小葱想知道如果给定 $n,m$ 和 $k$，对于所有的 $0\\leq i\\leq n,0\\leq j\\leq \\min \\left ( i, m \\right )$ 有多少对 $(i,j)$ 满足 $k\\mid\\binom{i}{j}$。", "inputFormat": "第一行有两个整数 $t,k$，其中 $t$ 代表该测试点总共有多少组测试数据，$k$ 的意义见问题描述。\n\n接下来 $t$ 行每行两个整数 $n,m$，其中 $n,m$ 的意义见问题描述。", "outputFormat": "共 $t$ 行，每行一个整数代表所有的 $0\\leq i\\leq n,0\\leq j\\leq \\min \\left ( i, m \\right )$ 中有多少对 $(i,j)$ 满足 $k\\mid\\binom{i}{j}$。", "hint": "【样例1说明】\n\n在所有可能的情况中，只有 $\\binom{2}{1} = 2$ 一种情况是 $2$ 的倍数。\n\n【子任务】\n\n::cute-table{tuack}\n\n|测试点|$n$|$m$|$k$|$t$|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$\\le3$|$\\le3$|$=2$|$=1$|\n|$2$|^|^|$=3$|$\\le10^4$|\n|$3$|$\\le7$|$\\le7$|$=4$|$=1$|\n|$4$|^|^|$=5$|$\\le10^4$|\n|$5$|$\\le10$|$\\le10$|$=6$|$=1$|\n|$6$|^|^|$=7$|$\\le10^4$|\n|$7$|$\\le20$|$\\le100$|$=8$|$=1$|\n|$8$|^|^|$=9$|$\\le10^4$|\n|$9$|$\\le25$|$\\le2000$|$=10$|$=1$|\n|$10$|^|^|$=11$|$\\le10^4$|\n|$11$|$\\le60$|$\\le20$|$=12$|$=1$|\n|$12$|^|^|$=13$|$\\le10^4$|\n|$13$|$\\le100$|$\\le25$|$=14$|$=1$|\n|$14$|^|^|$=15$|$\\le10^4$|\n|$15$|^|$\\le60$|$=16$|$=1$|\n|$16$|^|^|$=17$|$\\le10^4$|\n|$17$|$\\le2000$|$\\le100$|$=18$|$=1$|\n|$18$|^|^|$=19$|$\\le10^4$|\n|$19$|^|$\\le2000$|$=20$|$=1$|\n|$20$|^|^|$=21$|$\\le10^4$|\n\n- 对于全部的测试点，保证 $0 \\leq n, m \\leq 2 \\times 10^3$，$1 \\leq t \\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2823", "type": "P", "difficulty": 6, "samples": [["2\n2 2 3 2\n4 1\n2 3\n0 1 1\n0 1 0\n1 1 1\n1 1 1\n1 1 1\n1 0 1\n2 2 3 2\n4 1\n2 3\n0 1 2\n0 1 0\n1 1 1\n1 1 1\n1 1 1\n1 0 1", "Yes\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "福建省历届夏令营", "网络流", "福建"], "title": "时间表", "background": "小 A 是一个电话服务中心的主管，他的团队有一大批人。他们团队中的每个人都会花费他们的时间参加会议和通过电话与客户通话，当然还有研究团队的项目也是要花费他们的时间的。\n", "description": "他们中的每个人在每个小时只能在参加会议、和客户通话、研究项目三者中选择一个来进行。为了提高效率，每个小时必须完整地奉献到这一项工作中，不能中途改变。\n\n小 A 所在的地方很奇怪，他们一个星期有 $D$ 天，从 $1$ 到 $D$ 标号。为了照顾员工的嗓子，第 $i$ 个人在每个星期最多能够与客户通话 $L_i$ 小时。\n\n开会是已经计划好的事情，对于每个人他们需要在什么时间参加会议是确定的。这个电话服务中心每天要有 $H$ 个小时的时间是可以回复客户的电话的，为了简便，这 $H$ 个小时被从 $1$ 到 $H$ 标号。\n\n对于每周的每个小时，有多少客户会连接到电话服务中心是已知的。因此，小 A 知道他在第 $i$ 天的第 $j$ 个小时必须安排 $R_{i,j}$ 个员工来和客户通话。如果第 $k$ 个人在第 $i$ 天的第 $j$ 个小时没有会议可以和客户通话，那么 $F_{k,i,j}$ 的值为 $1$，如果有会议则为 $0$。\n\n再次说明，小  A的世界十分奇怪，他们除了每周可能不是 $7$ 天以外，每天也可能不是 $24$ 个小时。\n\n小 A 需要为每个员工创建一个时间表。由于员工也需要吃饭和休息，每天都会有一个午休时间，这段时间是从 $L_{\\text{T}_\\text{begin}}$ 开始到 $L_{\\text{T}_\\text{end}}$ 结束（$L_{\\text{T}_\\text{begin}}$ 和 $L_{\\text{T}_\\text{end}}$ 也包含在内）。小 A 需要确保每个员工在这段时间内至少有一个小时是没有参加会议或与客户通话的，以便他们可以吃饭和休息，或者做自己想做的事情。\n\n如果某个人在某个小时内没有会议也没有和客户通话，那他在这个小时就可以去研究公司项目，研究公司项目也算在工作时间之内。另外，他们有可能会去研究自己的项目，然而这是不算在工作时间内的。\n\n小 A 想要知道，他是否有可能安排出这样一个时间表，并且满足：\n\n- 每个人每天最多花费 $N$ 个小时在参加会议和客户通话上；\n- 每个人每周最多花费 $L_i$ 个小时和客户通话；\n- 每个人在午休时间至少有一个小时没有参加会议或和客户通话；\n- 对于第 $i$ 天第 $j$ 个小时，恰好有 $R_{i,j}$ 个人可以与客户通话。\n", "inputFormat": "第一行包含一个正整数 $T$，表示测试数据的组数。\n\n每组数据第一行包含四个整数 $P, D, H, N$，分别表示团队的人数，每周需要工作的天数，每天电话服务中心可以响应客户电话的小时数，以及每天每个人的工作时长；\n\n接下来一行包含 $P$ 个整数，第 $i$ 个表示 $L_i$；\n\n再接下来一行包含两个整数$L_{\\text{T}_\\text{begin}}$ 和 $L_{\\text{T}_\\text{end}}$，表示午休时间段；\n\n接下来 $D$ 行每行包含 $H$ 个整数，第 $i$ 行第 $j$ 个整数表示 $R_{i,j}$；\n\n再接下来 $P$ 个块，每个块有 $D$ 行，每行包含 $H$ 个整数。第 $k$ 个块的第$i$ 行的第 $j$ 个数表示 $F_{k,i,j}$。\n", "outputFormat": "共 $T$ 行，如果第 $i$ 组数据存在可行方案则输出 `Yes`，否则输出 `No`。\n", "hint": "对于 $100\\%$ 的数据满足有\n\n$1 \\leq T \\leq 5,1 \\leq N \\leq H \\leq 70$\n\n$1 \\leq D, P\\leq 70,1 \\leq L_i \\leq N\\times D, 0 \\leq R_{i, j} \\leq 15$\n\n$0 \\leq F_{k, i, j} \\leq 1,1 \\leq L_{\\text{T}_\\text{begin}} \\leq L_{\\text{T}_\\text{end}} \\leq N$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Timetable", "background": "Xiao A is a supervisor at a call service center, and his team has a large number of people. Everyone on the team spends their time attending meetings and talking to customers over the phone, and of course working on the team's research projects also takes up their time.", "description": "Each person can only choose one of attending meetings, talking to customers, or working on research projects in any given hour. To improve efficiency, each hour must be devoted entirely to one of these tasks, and they cannot switch in the middle.\n\nXiao A lives in a strange place where a week has $D$ days, labeled from $1$ to $D$. To protect the employees' voices, person $i$ can talk to customers for at most $L_i$ hours per week.\n\nMeetings are pre-planned, and the times at which each person needs to attend meetings are fixed. The call service center can respond to customer calls for $H$ hours each day; for convenience, these $H$ hours are labeled from $1$ to $H$.\n\nFor each day and hour of the week, the number of customers connecting to the call service center is known. Therefore, Xiao A knows that on day $i$ at hour $j$, exactly $R_{i,j}$ employees must be scheduled to talk to customers. If person $k$ has no meeting at day $i$, hour $j$ and can take customer calls, then $F_{k,i,j}=1$; otherwise $F_{k,i,j}=0$.\n\nAgain, Xiao A's world is quite strange: not only might a week not have $7$ days, but a day might also not have $24$ hours.\n\nXiao A needs to create a timetable for each employee. Since employees also need to eat and rest, there is a lunch break every day from $L_{\\text{T}_\\text{begin}}$ to $L_{\\text{T}_\\text{end}}$ inclusive. Xiao A must ensure that each employee has at least one hour within this interval during which they are neither in a meeting nor talking to customers, so that they can eat, rest, or do what they want.\n\nIf someone has neither a meeting nor customer calls in an hour, they can work on the company’s research projects during that hour, and this counts as working time. They might also work on their own projects, but that does not count as working time.\n\nXiao A wants to know whether it is possible to arrange such a timetable that satisfies all of the following:\n\n- Each person spends at most $N$ hours per day on meetings and customer calls.\n- Each person spends at most $L_i$ hours per week talking to customers.\n- Each person has at least one hour during the lunch break when they are neither in a meeting nor talking to customers.\n- For day $i$, hour $j$, exactly $R_{i,j}$ people are talking to customers.", "inputFormat": "The first line contains a positive integer $T$, the number of testdata sets.\n\nFor each testdata set, the first line contains four integers $P, D, H, N$, representing the number of people in the team, the number of working days per week, the number of hours per day during which the call service center can respond to customer calls, and the daily per-person limit on time spent on meetings and customer calls, respectively.\n\nThe next line contains $P$ integers, where the $i$-th integer is $L_i$.\n\nThe next line contains two integers $L_{\\text{T}_\\text{begin}}$ and $L_{\\text{T}_\\text{end}}$, representing the lunch break interval.\n\nThen follow $D$ lines, each containing $H$ integers; on the $i$-th line, the $j$-th integer is $R_{i,j}$.\n\nThen follow $P$ blocks; each block has $D$ lines, and each line contains $H$ integers. In the $k$-th block, the number on the $i$-th line and $j$-th position is $F_{k,i,j}$.", "outputFormat": "Output $T$ lines. For the $i$-th testdata set, print `Yes` if a feasible schedule exists; otherwise, print `No`.", "hint": "Constraints:\n\nFor $100\\%$ of the testdata, the following hold:\n\n$1 \\leq T \\leq 5, 1 \\leq N \\leq H \\leq 70$.\n\n$1 \\leq D, P \\leq 70, 1 \\leq L_i \\leq N \\times D, 0 \\leq R_{i,j} \\leq 15$.\n\n$0 \\leq F_{k,i,j} \\leq 1, 1 \\leq L_{\\text{T}_\\text{begin}} \\leq L_{\\text{T}_\\text{end}} \\leq H$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "时间表", "background": "小 A 是一个电话服务中心的主管，他的团队有一大批人。他们团队中的每个人都会花费他们的时间参加会议和通过电话与客户通话，当然还有研究团队的项目也是要花费他们的时间的。\n", "description": "他们中的每个人在每个小时只能在参加会议、和客户通话、研究项目三者中选择一个来进行。为了提高效率，每个小时必须完整地奉献到这一项工作中，不能中途改变。\n\n小 A 所在的地方很奇怪，他们一个星期有 $D$ 天，从 $1$ 到 $D$ 标号。为了照顾员工的嗓子，第 $i$ 个人在每个星期最多能够与客户通话 $L_i$ 小时。\n\n开会是已经计划好的事情，对于每个人他们需要在什么时间参加会议是确定的。这个电话服务中心每天要有 $H$ 个小时的时间是可以回复客户的电话的，为了简便，这 $H$ 个小时被从 $1$ 到 $H$ 标号。\n\n对于每周的每个小时，有多少客户会连接到电话服务中心是已知的。因此，小 A 知道他在第 $i$ 天的第 $j$ 个小时必须安排 $R_{i,j}$ 个员工来和客户通话。如果第 $k$ 个人在第 $i$ 天的第 $j$ 个小时没有会议可以和客户通话，那么 $F_{k,i,j}$ 的值为 $1$，如果有会议则为 $0$。\n\n再次说明，小  A的世界十分奇怪，他们除了每周可能不是 $7$ 天以外，每天也可能不是 $24$ 个小时。\n\n小 A 需要为每个员工创建一个时间表。由于员工也需要吃饭和休息，每天都会有一个午休时间，这段时间是从 $L_{\\text{T}_\\text{begin}}$ 开始到 $L_{\\text{T}_\\text{end}}$ 结束（$L_{\\text{T}_\\text{begin}}$ 和 $L_{\\text{T}_\\text{end}}$ 也包含在内）。小 A 需要确保每个员工在这段时间内至少有一个小时是没有参加会议或与客户通话的，以便他们可以吃饭和休息，或者做自己想做的事情。\n\n如果某个人在某个小时内没有会议也没有和客户通话，那他在这个小时就可以去研究公司项目，研究公司项目也算在工作时间之内。另外，他们有可能会去研究自己的项目，然而这是不算在工作时间内的。\n\n小 A 想要知道，他是否有可能安排出这样一个时间表，并且满足：\n\n- 每个人每天最多花费 $N$ 个小时在参加会议和客户通话上；\n- 每个人每周最多花费 $L_i$ 个小时和客户通话；\n- 每个人在午休时间至少有一个小时没有参加会议或和客户通话；\n- 对于第 $i$ 天第 $j$ 个小时，恰好有 $R_{i,j}$ 个人可以与客户通话。\n", "inputFormat": "第一行包含一个正整数 $T$，表示测试数据的组数。\n\n每组数据第一行包含四个整数 $P, D, H, N$，分别表示团队的人数，每周需要工作的天数，每天电话服务中心可以响应客户电话的小时数，以及每天每个人的工作时长；\n\n接下来一行包含 $P$ 个整数，第 $i$ 个表示 $L_i$；\n\n再接下来一行包含两个整数$L_{\\text{T}_\\text{begin}}$ 和 $L_{\\text{T}_\\text{end}}$，表示午休时间段；\n\n接下来 $D$ 行每行包含 $H$ 个整数，第 $i$ 行第 $j$ 个整数表示 $R_{i,j}$；\n\n再接下来 $P$ 个块，每个块有 $D$ 行，每行包含 $H$ 个整数。第 $k$ 个块的第$i$ 行的第 $j$ 个数表示 $F_{k,i,j}$。\n", "outputFormat": "共 $T$ 行，如果第 $i$ 组数据存在可行方案则输出 `Yes`，否则输出 `No`。\n", "hint": "对于 $100\\%$ 的数据满足有\n\n$1 \\leq T \\leq 5,1 \\leq N \\leq H \\leq 70$\n\n$1 \\leq D, P\\leq 70,1 \\leq L_i \\leq N\\times D, 0 \\leq R_{i, j} \\leq 15$\n\n$0 \\leq F_{k, i, j} \\leq 1,1 \\leq L_{\\text{T}_\\text{begin}} \\leq L_{\\text{T}_\\text{end}} \\leq N$。\n", "locale": "zh-CN"}}}
{"pid": "P2824", "type": "P", "difficulty": 5, "samples": [["6 3\n1 6 2 5 3 4\n0 1 4\n1 3 6\n0 2 4\n3", "5"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "线段树", "二分", "各省省选", "颜色段均摊（珂朵莉树 ODT）", "河北", "排序", "天津"], "title": "[HEOI2016/TJOI2016] 排序", "background": null, "description": "在 2016 年，佳媛姐姐喜欢上了数字序列。因而她经常研究关于序列的一些奇奇怪怪的问题，现在她在研究一个难题，需要你来帮助她。  \n\n这个难题是这样子的：给出一个 $1$ 到 $n$ 的排列，现在对这个排列序列进行 $m$ 次局部排序，排序分为两种：  \n\n- `0 l r` 表示将区间 $[l,r]$ 的数字升序排序；  \n- `1 l r` 表示将区间 $[l,r]$ 的数字降序排序。  \n\n注意，这里是对**下标**在区间 $[l,r]$ 内的数排序。  \n最后询问第 $q$ 位置上的数字。", "inputFormat": "输入数据的第一行为两个整数 $n$ 和 $m$，$n$ 表示序列的长度，$m$ 表示局部排序的次数。  \n\n第二行为 $n$ 个整数，表示 $1$ 到 $n$ 的一个排列。  \n\n接下来输入 $m$ 行，每一行有三个整数 $\\text{op},l,r$，$\\text{op}$ 为 $0$ 代表升序排序，$\\text{op}$ 为 $1$ 代表降序排序, $l,r$ 表示排序的区间。  \n\n最后输入一个整数 $q$，表示排序完之后询问的位置。", "outputFormat": "输出数据仅有一行，一个整数，表示按照顺序将全部的部分排序结束后第 $q$ 位置上的数字。", "hint": "河北省选 2016 第一天第二题。\n\n对于 $30\\%$ 的数据，$n,m\\leq 1000$；\n\n对于 $100\\%$ 的数据，$n,m\\leq 10^5$，$1\\leq q\\leq n$。", "locale": "zh-CN", "translations": {"en": {"title": "[HEOI2016/TJOI2016] Sorting", "background": "", "description": "In 2016, sister Jiayuan became fond of number sequences. She often studies various quirky problems about sequences, and now she is working on a hard one that needs your help.\n\nThe problem is as follows: given a permutation of $1$ to $n$, perform $m$ local sorts on this sequence. There are two types of sorts:\n\n- `0 l r` means sorting the numbers in the interval $[l,r]$ in ascending order.\n- `1 l r` means sorting the numbers in the interval $[l,r]$ in descending order.\n\nNote that this sorts the numbers whose **indices** lie in the interval $[l,r]$.  \nFinally, query the number at position $q$.", "inputFormat": "The first line contains two integers $n$ and $m$, where $n$ is the length of the sequence and $m$ is the number of local sorts.\n\nThe second line contains $n$ integers, representing a permutation of $1$ to $n$.\n\nThe next $m$ lines each contain three integers $\\text{op}, l, r$, where $\\text{op}$ being $0$ means ascending sort, $\\text{op}$ being $1$ means descending sort, and $l, r$ specify the interval to sort.\n\nFinally, an integer $q$ is given, indicating the position to query after all sorts are finished.", "outputFormat": "Output a single line containing one integer, the number at position $q$ after performing all local sorts in order.", "hint": "Hebei NOI Qualifier 2016 Day 1 Problem 2.\n\nFor $30\\%$ of the testdata, $n, m \\leq 1000$.\n\nFor $100\\%$ of the testdata, $n, m \\leq 10^5$, $1 \\leq q \\leq n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HEOI2016/TJOI2016] 排序", "background": null, "description": "在 2016 年，佳媛姐姐喜欢上了数字序列。因而她经常研究关于序列的一些奇奇怪怪的问题，现在她在研究一个难题，需要你来帮助她。  \n\n这个难题是这样子的：给出一个 $1$ 到 $n$ 的排列，现在对这个排列序列进行 $m$ 次局部排序，排序分为两种：  \n\n- `0 l r` 表示将区间 $[l,r]$ 的数字升序排序；  \n- `1 l r` 表示将区间 $[l,r]$ 的数字降序排序。  \n\n注意，这里是对**下标**在区间 $[l,r]$ 内的数排序。  \n最后询问第 $q$ 位置上的数字。", "inputFormat": "输入数据的第一行为两个整数 $n$ 和 $m$，$n$ 表示序列的长度，$m$ 表示局部排序的次数。  \n\n第二行为 $n$ 个整数，表示 $1$ 到 $n$ 的一个排列。  \n\n接下来输入 $m$ 行，每一行有三个整数 $\\text{op},l,r$，$\\text{op}$ 为 $0$ 代表升序排序，$\\text{op}$ 为 $1$ 代表降序排序, $l,r$ 表示排序的区间。  \n\n最后输入一个整数 $q$，表示排序完之后询问的位置。", "outputFormat": "输出数据仅有一行，一个整数，表示按照顺序将全部的部分排序结束后第 $q$ 位置上的数字。", "hint": "河北省选 2016 第一天第二题。\n\n对于 $30\\%$ 的数据，$n,m\\leq 1000$；\n\n对于 $100\\%$ 的数据，$n,m\\leq 10^5$，$1\\leq q\\leq n$。", "locale": "zh-CN"}}}
