{"pid": "P9458", "type": "P", "difficulty": 3, "samples": [["101", "011"], ["0010100", "0000101"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "语言月赛"], "title": "[入门赛 #14] 扶苏和串 (Hard Version)", "background": "众所周知，每个月入门赛的字符串题都是扶苏来枚举 idea 出出来的。", "description": "给定一个 01 字符串 $s$，你可以任选 $s$ 的一个非空子串，把这个子串在 $s$ 中**翻转**一次。\n\n问你能得到字典序最小的字符串是什么？\n\n形式化的，你可以选择一个区间 $[l, r]$ 满足 $1 \\leq l \\leq r \\leq |s|$，构造一个串 $t$ 满足：\n\n$$t_i = \\begin{cases}s_i, &i < l \\text{ 或 } i > r \\\\ s_{r - (i - l)}, & l \\leq i \\leq r\\end{cases}$$\n\n最小化字符串 $t$ 的字典序。", "inputFormat": "输入只有一行一个字符串，表示 $s$。", "outputFormat": "输出一行一个字符串，表示得到的字典序最小的字符串。", "hint": "### 样例 1 解释\n\n$s = \\texttt{\\underline{10}1}$，翻转下划线标出的子串，得到 $t = \\texttt{011}$\n\n### 样例 2 解释\n\n$s = \\texttt{00\\underline{10100}}$，翻转下划线标出的子串，得到 $\\texttt{0000101}$。\n\n### 数据规模与约定\n\n下面用 $|s|$ 表示输入字符串的长度。\n\n- 对 $100\\%$ 的数据，$1 \\leq |s| \\leq 3000$。$s$ 只含字符 $\\texttt{0,1}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #14] 扶苏和串 (Hard Version)", "background": "众所周知，每个月入门赛的字符串题都是扶苏来枚举 idea 出出来的。", "description": "给定一个 01 字符串 $s$，你可以任选 $s$ 的一个非空子串，把这个子串在 $s$ 中**翻转**一次。\n\n问你能得到字典序最小的字符串是什么？\n\n形式化的，你可以选择一个区间 $[l, r]$ 满足 $1 \\leq l \\leq r \\leq |s|$，构造一个串 $t$ 满足：\n\n$$t_i = \\begin{cases}s_i, &i < l \\text{ 或 } i > r \\\\ s_{r - (i - l)}, & l \\leq i \\leq r\\end{cases}$$\n\n最小化字符串 $t$ 的字典序。", "inputFormat": "输入只有一行一个字符串，表示 $s$。", "outputFormat": "输出一行一个字符串，表示得到的字典序最小的字符串。", "hint": "### 样例 1 解释\n\n$s = \\texttt{\\underline{10}1}$，翻转下划线标出的子串，得到 $t = \\texttt{011}$\n\n### 样例 2 解释\n\n$s = \\texttt{00\\underline{10100}}$，翻转下划线标出的子串，得到 $\\texttt{0000101}$。\n\n### 数据规模与约定\n\n下面用 $|s|$ 表示输入字符串的长度。\n\n- 对 $100\\%$ 的数据，$1 \\leq |s| \\leq 3000$。$s$ 只含字符 $\\texttt{0,1}$。", "locale": "zh-CN"}}}
{"pid": "P9459", "type": "P", "difficulty": 1, "samples": [["5\nyi yan ding zhen\nyu yan ding zhen\nzheng tai ding zhen\nyin yang guai qi\nyou xiu su zhi\n", "Yes\nYes\nNo\nNo\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「EZEC-14」浴眼盯真", "background": "验题人提示：本题数据在 windows 下生成，即换行符为 ``\\r\\n``。", "description": "dXqwq 定义一个字符串四元组 $(a,b,c,d)$ 是“浴眼盯真”的，当且仅当：\n\n- $a,b$ 的首字母均为 $\\texttt{y}$。\n- $c$ 恰好等于 $\\texttt{ding}$。\n- $d$ 恰好等于 $\\texttt{zhen}$。\n\n给定四个用空格分隔的字符串 $a,b,c,d$，保证其只包含小写英文字母，你需要判断 $(a,b,c,d)$ 是否是“浴眼盯真”的。", "inputFormat": "本题有多组测试数据。\n\n第一行输入一个整数 $T$，代表测试数据组数。\n\n接下来 $T$ 行，每行输入四个用空格分隔的字符串 $a,b,c,d$。", "outputFormat": "对于每组数据输出一行。\n\n如果 $(a,b,c,d)$ 是“浴眼盯真”的，输出 ``Yes``，否则输出 ``No``。", "hint": "**【样例解释】**\n\n前两组测试数据满足全部要求。\n\n第三，五组测试数据不满足第一条要求。\n\n第四，五组测试数据不满足第二，三条要求。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（50 pts）：保证输入的所有字符串长度均为 $4$。\n- Subtask 2（50 pts）：无特殊限制。 \n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 100$，每个字符串长度不超过 $10$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qvr810ap.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-14」浴眼盯真", "background": "验题人提示：本题数据在 windows 下生成，即换行符为 ``\\r\\n``。", "description": "dXqwq 定义一个字符串四元组 $(a,b,c,d)$ 是“浴眼盯真”的，当且仅当：\n\n- $a,b$ 的首字母均为 $\\texttt{y}$。\n- $c$ 恰好等于 $\\texttt{ding}$。\n- $d$ 恰好等于 $\\texttt{zhen}$。\n\n给定四个用空格分隔的字符串 $a,b,c,d$，保证其只包含小写英文字母，你需要判断 $(a,b,c,d)$ 是否是“浴眼盯真”的。", "inputFormat": "本题有多组测试数据。\n\n第一行输入一个整数 $T$，代表测试数据组数。\n\n接下来 $T$ 行，每行输入四个用空格分隔的字符串 $a,b,c,d$。", "outputFormat": "对于每组数据输出一行。\n\n如果 $(a,b,c,d)$ 是“浴眼盯真”的，输出 ``Yes``，否则输出 ``No``。", "hint": "**【样例解释】**\n\n前两组测试数据满足全部要求。\n\n第三，五组测试数据不满足第一条要求。\n\n第四，五组测试数据不满足第二，三条要求。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（50 pts）：保证输入的所有字符串长度均为 $4$。\n- Subtask 2（50 pts）：无特殊限制。 \n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 100$，每个字符串长度不超过 $10$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qvr810ap.png)", "locale": "zh-CN"}}}
{"pid": "P9460", "type": "P", "difficulty": 3, "samples": [["5 0\n1 2 3 4 5", "5"], ["5 1\n1 2 3 4 5", "pigstd"], ["5 1\n1 1 2 2 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "二分", "洛谷原创", "O2优化", "前缀和", "洛谷月赛"], "title": "「EZEC-14」众数 I", "background": "pigstd 是一个可爱的男孩子。他在 NOI2022 中的众数一题定义了 $10^6$ 个 ``std::deque`` 并没有 MLE。", "description": "给定一个长度为 $n$ 的序列 $a$，我们通过以下方式构造序列 $b$：\n\n- 初始时 $b=a$。\n- 依次对 $b$ 进行 $k$ 次操作，每次操作选择任意一个元素并将其**修改**为任意整数。\n\ndXqwq 定义一个序列的**众数**为所有出现次数最大的数。例如 $[1,1,4,5,1,4]$ 的众数为 $1$，而 $[1,14,5,14,19,19,8,10]$ 的众数为 $14,19$。\n\n你需要求出有多少整数可能成为 $b$ 的**众数**。", "inputFormat": "第一行输入两个整数 $n,k$。\n\n第二行输入 $n$ 个整数 $a_i$。", "outputFormat": "输出一个整数，代表可能成为众数的数的数量。\n\n特别地，如果答案为正无穷，输出 ``pigstd``。", "hint": "**【样例解释】**\n\n对于第一组数据，最终 $1,2,3,4,5$ 可能为区间众数。\n\n对于第二组数据，将第一个数换成 $6,7,8,9,\\cdots$ 后它们均会成为区间众数，因此答案为正无穷。\n\n对于第三组数据，$1,2,3$ 可能成为区间众数。\n\n**【提示】**\n\n开 $10^6$ 个 ``std::deque`` 在空间限制为 1024MB 时不一定会 MLE。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n* Subtask 1（20 pts）：$n\\leq 5$。\n* Subtask 2（20 pts）：$n\\leq 10^3$。\n* Subtask 3（20 pts）：$k=0$。\n* Subtask 4（20 pts）：$k=1$。\n* Subtask 5（20 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$0\\leq k\\leq n $，$1\\leq a_i\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-14」众数 I", "background": "pigstd 是一个可爱的男孩子。他在 NOI2022 中的众数一题定义了 $10^6$ 个 ``std::deque`` 并没有 MLE。", "description": "给定一个长度为 $n$ 的序列 $a$，我们通过以下方式构造序列 $b$：\n\n- 初始时 $b=a$。\n- 依次对 $b$ 进行 $k$ 次操作，每次操作选择任意一个元素并将其**修改**为任意整数。\n\ndXqwq 定义一个序列的**众数**为所有出现次数最大的数。例如 $[1,1,4,5,1,4]$ 的众数为 $1$，而 $[1,14,5,14,19,19,8,10]$ 的众数为 $14,19$。\n\n你需要求出有多少整数可能成为 $b$ 的**众数**。", "inputFormat": "第一行输入两个整数 $n,k$。\n\n第二行输入 $n$ 个整数 $a_i$。", "outputFormat": "输出一个整数，代表可能成为众数的数的数量。\n\n特别地，如果答案为正无穷，输出 ``pigstd``。", "hint": "**【样例解释】**\n\n对于第一组数据，最终 $1,2,3,4,5$ 可能为区间众数。\n\n对于第二组数据，将第一个数换成 $6,7,8,9,\\cdots$ 后它们均会成为区间众数，因此答案为正无穷。\n\n对于第三组数据，$1,2,3$ 可能成为区间众数。\n\n**【提示】**\n\n开 $10^6$ 个 ``std::deque`` 在空间限制为 1024MB 时不一定会 MLE。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n* Subtask 1（20 pts）：$n\\leq 5$。\n* Subtask 2（20 pts）：$n\\leq 10^3$。\n* Subtask 3（20 pts）：$k=0$。\n* Subtask 4（20 pts）：$k=1$。\n* Subtask 5（20 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$0\\leq k\\leq n $，$1\\leq a_i\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P9461", "type": "P", "difficulty": 5, "samples": [["3\n1 2 3", "28"], ["9\n9 9 8 2 4 4 3 5 3", "1912\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛", "链表", "单调栈"], "title": "「EZEC-14」众数 II", "background": "dXqwq 是一个不可爱的男孩子。他在 NOI2022 中的众数一题定义了 $10^6$ 个 ``std::deque`` 并成功 MLE。", "description": "给定一个长度为 $n$ 的序列 $a$，我们通过以下方式构造序列 $b$：\n\n- 初始时 $b$ 为空序列。\n- 对于 $i=1,2,\\cdots,n$，我们依次向 $b$ 的尾部插入 $1,2,\\cdots,a_i$。\n\ndXqwq 定义一个序列的**最小众数**为所有出现次数最大的数的最小值。例如 $[1,1,4,5,1,4]$ 的最小众数为 $1$，而 $[1,14,5,14,19,19,8,10]$ 的最小众数为 $14$。\n\n你需要求出 $b$ 的每个子区间的**最小众数**的和。由于答案可能很大，你只需要输出它对 $998244353$ 取模后的值。", "inputFormat": "第一行输入一个整数 $n$。\n\n第二行输入 $n$ 个整数 $a_i$。", "outputFormat": "输出一个整数，代表 $b$ 的每个子区间的最小众数的和对 $998244353$ 取模的值。", "hint": "**【样例解释】**\n\n在第一个样例中，$b=[1,1,2,1,2,3]$。\n\n有 $15$ 个区间的最小众数为 $1$，$5$ 个区间的最小众数为 $2$，$1$ 个区间的最小众数为 $3$，因此答案为 $15\\times 1+5\\times 2+1\\times 3=28$。\n\n**【提示】**\n\n开 $10^6$ 个 ``std::deque`` 在空间限制为 512MB 时一定会 MLE。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$\\sum a_i\\leq 100$。\n- Subtask 2（20 pts）：$\\sum a_i\\leq 10^3$。 \n- Subtask 3（20 pts）：$\\sum a_i\\leq 10^6$。\n- Subtask 4（10 pts）：$n\\leq 2$。\n- Subtask 5（20 pts）：$n\\leq 10^3$。\n- Subtask 6（10 pts）：$a_i\\leq 2$。\n- Subtask 7（10 pts）：无特殊限制。 \n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$1\\leq a_i\\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-14」众数 II", "background": "dXqwq 是一个不可爱的男孩子。他在 NOI2022 中的众数一题定义了 $10^6$ 个 ``std::deque`` 并成功 MLE。", "description": "给定一个长度为 $n$ 的序列 $a$，我们通过以下方式构造序列 $b$：\n\n- 初始时 $b$ 为空序列。\n- 对于 $i=1,2,\\cdots,n$，我们依次向 $b$ 的尾部插入 $1,2,\\cdots,a_i$。\n\ndXqwq 定义一个序列的**最小众数**为所有出现次数最大的数的最小值。例如 $[1,1,4,5,1,4]$ 的最小众数为 $1$，而 $[1,14,5,14,19,19,8,10]$ 的最小众数为 $14$。\n\n你需要求出 $b$ 的每个子区间的**最小众数**的和。由于答案可能很大，你只需要输出它对 $998244353$ 取模后的值。", "inputFormat": "第一行输入一个整数 $n$。\n\n第二行输入 $n$ 个整数 $a_i$。", "outputFormat": "输出一个整数，代表 $b$ 的每个子区间的最小众数的和对 $998244353$ 取模的值。", "hint": "**【样例解释】**\n\n在第一个样例中，$b=[1,1,2,1,2,3]$。\n\n有 $15$ 个区间的最小众数为 $1$，$5$ 个区间的最小众数为 $2$，$1$ 个区间的最小众数为 $3$，因此答案为 $15\\times 1+5\\times 2+1\\times 3=28$。\n\n**【提示】**\n\n开 $10^6$ 个 ``std::deque`` 在空间限制为 512MB 时一定会 MLE。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$\\sum a_i\\leq 100$。\n- Subtask 2（20 pts）：$\\sum a_i\\leq 10^3$。 \n- Subtask 3（20 pts）：$\\sum a_i\\leq 10^6$。\n- Subtask 4（10 pts）：$n\\leq 2$。\n- Subtask 5（20 pts）：$n\\leq 10^3$。\n- Subtask 6（10 pts）：$a_i\\leq 2$。\n- Subtask 7（10 pts）：无特殊限制。 \n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$1\\leq a_i\\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9462", "type": "P", "difficulty": 6, "samples": [["1 5\n\n1\n\n2\n\n3\n\n4\n\n0", " \n? 1 1\n\n? 1 3\n\n? 2 4\n\n? 3 5\n\n? 4 5\n\n!\n1 2\n2 3\n3 4\n4 5"], ["5 5\n\n1\n\n0\n\n0\n\n2\n\n2", " \n? 1 1\n\n? 1 3\n\n? 2 4\n\n? 3 5\n\n? 4 5\n\n!\n1 3\n2 3\n2 4\n2 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "洛谷原创", "交互题", "Special Judge", "O2优化", "广度优先搜索 BFS", "深度优先搜索 DFS", "洛谷月赛"], "title": "「EZEC-14」终点", "background": "~~出题人怎么还没鸟加这首歌啊。~~\n\n于 2023.8.5 拿下。", "description": "**这是一道交互题。**\n\ndXqwq 有一棵 $n$ 个点的无根树，结点从 $1$ 到 $n$ 编号。您需要通过若干次询问得到这棵树的结构。\n\n您可以选择两个整数 $1\\leq u,v\\leq n$，并输出 `? u v` 进行询问。\n\n对于每次询问，如果 $u,v$ 的路径中点在一个结点上，交互库返回该点的编号，否则返回 ``0``。\n\n请通过不超过 $147154$ 次询问，得到这棵树的结构。\n\n保证树的形态是提前确定的，即**交互库不自适应。**\n\n### 交互方式\n\n输入测试点所在子任务编号 $id$ 和树的大小 $n$ 以开始交互。\n\n交互过程中，您可以进行题目描述中的询问。\n\n对于每次询问，如果你提供的 $u,v$ 不合法或者超出询问次数上限，交互库会返回 ``-1``，否则交互库将会返回一个非负整数，含义见「题目描述」。\n\n当你读取到 ``-1`` 后应立刻退出程序，在此之后交互库的行为未定义。\n\n在您确定答案后，请先输出 `!`，然后接下来 $n-1$ 行依次输出两个整数 ``u[i] v[i]`` 代表树的每条边，最后退出程序。你可以以任意顺序输出这些边。\n\n在您输出一行后，请清空缓冲区：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其它语言请自行查阅文档。", "inputFormat": "见「交互方式」。", "outputFormat": "见「交互方式」。", "hint": "**本题采用捆绑测试。**\n\n-  Subtask 1（10 pts）：$n \\leq 10$，树满足性质 A。\n-  Subtask 2（10 pts）：保证存在一个点度数为 $n-1$。\n-  Subtask 3（10 pts）：保证所有点度数 $\\leq 2$。\n-  Subtask 4（10 pts）：$n \\leq 500$，树满足性质 A。\n-  Subtask 5（20 pts）：$n \\leq 500$。 \n-  Subtask 6（20 pts）：树满足性质 A。\n-  Subtask 7（20 pts）：无特殊限制。\n\n性质 A：对于 $i=2,3,\\cdots,n$ 存在整数 $1\\leq j<i$ 满足有一条边连接 $i,j$。\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 10^4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3u2zy1q5.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-14」终点", "background": "~~出题人怎么还没鸟加这首歌啊。~~\n\n于 2023.8.5 拿下。", "description": "**这是一道交互题。**\n\ndXqwq 有一棵 $n$ 个点的无根树，结点从 $1$ 到 $n$ 编号。您需要通过若干次询问得到这棵树的结构。\n\n您可以选择两个整数 $1\\leq u,v\\leq n$，并输出 `? u v` 进行询问。\n\n对于每次询问，如果 $u,v$ 的路径中点在一个结点上，交互库返回该点的编号，否则返回 ``0``。\n\n请通过不超过 $147154$ 次询问，得到这棵树的结构。\n\n保证树的形态是提前确定的，即**交互库不自适应。**\n\n### 交互方式\n\n输入测试点所在子任务编号 $id$ 和树的大小 $n$ 以开始交互。\n\n交互过程中，您可以进行题目描述中的询问。\n\n对于每次询问，如果你提供的 $u,v$ 不合法或者超出询问次数上限，交互库会返回 ``-1``，否则交互库将会返回一个非负整数，含义见「题目描述」。\n\n当你读取到 ``-1`` 后应立刻退出程序，在此之后交互库的行为未定义。\n\n在您确定答案后，请先输出 `!`，然后接下来 $n-1$ 行依次输出两个整数 ``u[i] v[i]`` 代表树的每条边，最后退出程序。你可以以任意顺序输出这些边。\n\n在您输出一行后，请清空缓冲区：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其它语言请自行查阅文档。", "inputFormat": "见「交互方式」。", "outputFormat": "见「交互方式」。", "hint": "**本题采用捆绑测试。**\n\n-  Subtask 1（10 pts）：$n \\leq 10$，树满足性质 A。\n-  Subtask 2（10 pts）：保证存在一个点度数为 $n-1$。\n-  Subtask 3（10 pts）：保证所有点度数 $\\leq 2$。\n-  Subtask 4（10 pts）：$n \\leq 500$，树满足性质 A。\n-  Subtask 5（20 pts）：$n \\leq 500$。 \n-  Subtask 6（20 pts）：树满足性质 A。\n-  Subtask 7（20 pts）：无特殊限制。\n\n性质 A：对于 $i=2,3,\\cdots,n$ 存在整数 $1\\leq j<i$ 满足有一条边连接 $i,j$。\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 10^4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3u2zy1q5.png)", "locale": "zh-CN"}}}
{"pid": "P9463", "type": "P", "difficulty": 3, "samples": [["5\n2 1 1 2 5\n6\nINFLATION 1\nSET 3 2\nSET 5 2\nINFLATION 4\nSET 6 1\nSET 10 1", "16\n14\n14\n34\n14\n5"], ["3\n1 4 1\n5\nSET 1 1\nSET 3 4\nINFLATION 2\nSET 3 1\nSET 6 4", "6\n6\n12\n8\n6"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Inflation / 通货膨胀", "background": "Day 1 Problem A.\n\n题面译自 [EGOI2023 inflation](https://egoi23.se/assets/tasks/day1/inflation.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "众所周知，瑞典南部的人们经常吃沙拉三明治。沙拉三明治的价格波动很大，分析经济情况的最好方法是每天去同一家沙拉三明治店，把菜单上所有价格都加起来。\n\n一家沙拉三明治店的菜单上有 $N$ 个不同的菜品。第 $i$ 个菜品有价格 $p_i$。\n\n每天，下列事件之一发生：\n\n- `INFLATION x`：所有价格增加 $x$。\n- `SET x y`：每个价格为 $x$ 的菜品的价格更改为 $y$。\n\n你的任务是处理 $Q$ 天，在每天结束后输出所有菜品的总价格。", "inputFormat": "第一行一个整数 $N$，表示菜品数量。\n\n第二行 $N$ 个整数 $p_1,p_2,\\cdots,p_N$。\n\n第三行一个整数 $Q$，表示天数。\n\n接下来 $Q$ 行，每行一个字符串 $s$ 和一至两个整数。\n\n如果 $s$ 是 `INFLATION`，接下来一个整数 $x$。表示当天所有价格增加 $x$。\n\n如果 $s$ 是 `SET`，接下来两个整数 $x,y$。表示每个价格为 $x$ 的菜品的价格更改为 $y$。", "outputFormat": "输出 $Q$ 行，每天结束后所有菜品的总价格。", "hint": "**样例 $1$ 解释**\n\n下图为样例 $1$ 的前两天。注意到第一天结束后价格总和为 $16$，所以输出的第一个整数为 $16$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jnt1pk1u.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 3\\times 10^5$，$1\\le p_i\\le 10^6$，$1\\le Q\\le 10^5$，$1\\le x,y\\le 10^6$。\n\n- 子任务一（$14$ 分）：$N=1$。\n- 子任务二（$28$ 分）：$N,Q,p_i,x,y\\le 100$，依赖于子任务一。\n- 子任务三（$19$ 分）：只有 `INFLATION` 事件。\n- 子任务四（$23$ 分）：只有 `SET` 事件。\n- 子任务五（$16$ 分）：无特殊限制，依赖于子任务二、三、四。\n\n---\n\n**提示**\n\n答案可能不在 $32$ 位整型范围内，如果你使用 C++ 语言，请注意溢出的可能。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Inflation / 通货膨胀", "background": "Day 1 Problem A.\n\n题面译自 [EGOI2023 inflation](https://egoi23.se/assets/tasks/day1/inflation.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "众所周知，瑞典南部的人们经常吃沙拉三明治。沙拉三明治的价格波动很大，分析经济情况的最好方法是每天去同一家沙拉三明治店，把菜单上所有价格都加起来。\n\n一家沙拉三明治店的菜单上有 $N$ 个不同的菜品。第 $i$ 个菜品有价格 $p_i$。\n\n每天，下列事件之一发生：\n\n- `INFLATION x`：所有价格增加 $x$。\n- `SET x y`：每个价格为 $x$ 的菜品的价格更改为 $y$。\n\n你的任务是处理 $Q$ 天，在每天结束后输出所有菜品的总价格。", "inputFormat": "第一行一个整数 $N$，表示菜品数量。\n\n第二行 $N$ 个整数 $p_1,p_2,\\cdots,p_N$。\n\n第三行一个整数 $Q$，表示天数。\n\n接下来 $Q$ 行，每行一个字符串 $s$ 和一至两个整数。\n\n如果 $s$ 是 `INFLATION`，接下来一个整数 $x$。表示当天所有价格增加 $x$。\n\n如果 $s$ 是 `SET`，接下来两个整数 $x,y$。表示每个价格为 $x$ 的菜品的价格更改为 $y$。", "outputFormat": "输出 $Q$ 行，每天结束后所有菜品的总价格。", "hint": "**样例 $1$ 解释**\n\n下图为样例 $1$ 的前两天。注意到第一天结束后价格总和为 $16$，所以输出的第一个整数为 $16$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jnt1pk1u.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 3\\times 10^5$，$1\\le p_i\\le 10^6$，$1\\le Q\\le 10^5$，$1\\le x,y\\le 10^6$。\n\n- 子任务一（$14$ 分）：$N=1$。\n- 子任务二（$28$ 分）：$N,Q,p_i,x,y\\le 100$，依赖于子任务一。\n- 子任务三（$19$ 分）：只有 `INFLATION` 事件。\n- 子任务四（$23$ 分）：只有 `SET` 事件。\n- 子任务五（$16$ 分）：无特殊限制，依赖于子任务二、三、四。\n\n---\n\n**提示**\n\n答案可能不在 $32$ 位整型范围内，如果你使用 C++ 语言，请注意溢出的可能。", "locale": "zh-CN"}}}
{"pid": "P9464", "type": "P", "difficulty": 4, "samples": [["3 4\n0 1\n2 1\n1 0\n2 1", "1 1 2"], ["3 7\n0 1\n0 2\n2 0\n0 1\n1 0\n2 0\n0 2", "2 2 3"], ["6 10\n2 5\n3 0\n4 2\n0 1\n4 3\n2 4\n0 3\n0 2\n5 2\n5 0", "5 0 1 1 1 2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Padel Prize Pursuit / 追梦笼式网球", "background": "Day 1 Problem B.\n\n题面译自 [EGOI2023 ppp](https://egoi23.se/assets/tasks/day1/ppp.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "有 $N$ 个编号为 $0$ 到 $N-1$ 的选手参加一场 $M$ 天的笼式网球锦标赛。每天恰好进行一次比赛。在锦标赛中共颁发 $M$ 块奖牌，每场比赛颁发一块新奖牌。在第 $i$ 天的比赛中（$0\\le i\\le M-1$），两名编号分别为 $x_i$ 和 $y_i$ 的选手参加。比赛中发生如下事件：\n\n- 选手 $x_i$ 打败选手 $y_i$。\n- 一个新的奖牌授予给获胜者 $x_i$。\n- 失败者所有现有的奖牌都授予给获胜者。\n\n在第 $M$ 天（最后一场比赛结束后一天）举行颁奖典礼。在颁奖典礼上，所有奖牌被收集起来，并授予给持有该奖牌时间最长的选手。具体地，在第 $M$ 天，奖牌 $i$ 授予给持有奖牌 $i$ 最多个晚上的选手（不必须连续持有）。如果两个或更多选手持有一个奖牌同样多晚上，奖牌授予给其中编号最小的选手。\n\n你的任务是求出颁奖典礼中，每位选手被授予多少奖牌。", "inputFormat": "第一行两个整数 $N,M$，表示选手数和比赛数。\n\n接下来 $M$ 行，每行两个整数 $x_i,y_i$，表示第 $i$ 天的比赛中，选手 $x_i$ 打败选手 $y_i$。", "outputFormat": "一行 $N$ 个整数，第 $k$ 个整数表示颁奖典礼中，第 $k$ 位选手被授予的奖牌数。", "hint": "**样例 $1$ 解释**\n\n下图展示了样例 $1$ 中锦标赛期间奖牌的归属。当选手 $1$ 在第三天被打败时，她的所有奖牌都被授予给选手 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jex0m4dg.png)\n\n---\n\n**样例 $2$ 解释**\n\n如下图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nyujve0b.png)\n\n在颁奖典礼中，选手 $0$ 被授予奖牌 $5$ 和 $6$，选手 $1$ 被授予奖牌 $3$ 和 $4$，选手 $2$ 被授予奖牌 $0,1,2$。\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 2\\times 10^5$，$1\\le M\\le 2\\times 10^5$，$0\\le x_i,y_i\\le N-1$ 且 $x_i\\ne y_i$。\n\n- 子任务一（$12$ 分）：$N=2$。\n- 子任务二（$16$ 分）：$N,M\\le 2\\times 10^3$。\n- 子任务三（$15$ 分）：第 $i$ 场比赛的获胜者参加了第 $i+1$ 场比赛，依赖子任务一。\n- 子任务四（$20$ 分）：在第 $i$ 场比赛时，$x_i$ 有至少和 $y_i$ 一样多的奖牌。\n- 子任务五（$22$ 分）：一旦一名选手被打败，她永远不会再次参赛。\n- 子任务六（$15$ 分）：无特殊限制，依赖子任务二、三、四、五。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Padel Prize Pursuit / 追梦笼式网球", "background": "Day 1 Problem B.\n\n题面译自 [EGOI2023 ppp](https://egoi23.se/assets/tasks/day1/ppp.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "有 $N$ 个编号为 $0$ 到 $N-1$ 的选手参加一场 $M$ 天的笼式网球锦标赛。每天恰好进行一次比赛。在锦标赛中共颁发 $M$ 块奖牌，每场比赛颁发一块新奖牌。在第 $i$ 天的比赛中（$0\\le i\\le M-1$），两名编号分别为 $x_i$ 和 $y_i$ 的选手参加。比赛中发生如下事件：\n\n- 选手 $x_i$ 打败选手 $y_i$。\n- 一个新的奖牌授予给获胜者 $x_i$。\n- 失败者所有现有的奖牌都授予给获胜者。\n\n在第 $M$ 天（最后一场比赛结束后一天）举行颁奖典礼。在颁奖典礼上，所有奖牌被收集起来，并授予给持有该奖牌时间最长的选手。具体地，在第 $M$ 天，奖牌 $i$ 授予给持有奖牌 $i$ 最多个晚上的选手（不必须连续持有）。如果两个或更多选手持有一个奖牌同样多晚上，奖牌授予给其中编号最小的选手。\n\n你的任务是求出颁奖典礼中，每位选手被授予多少奖牌。", "inputFormat": "第一行两个整数 $N,M$，表示选手数和比赛数。\n\n接下来 $M$ 行，每行两个整数 $x_i,y_i$，表示第 $i$ 天的比赛中，选手 $x_i$ 打败选手 $y_i$。", "outputFormat": "一行 $N$ 个整数，第 $k$ 个整数表示颁奖典礼中，第 $k$ 位选手被授予的奖牌数。", "hint": "**样例 $1$ 解释**\n\n下图展示了样例 $1$ 中锦标赛期间奖牌的归属。当选手 $1$ 在第三天被打败时，她的所有奖牌都被授予给选手 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jex0m4dg.png)\n\n---\n\n**样例 $2$ 解释**\n\n如下图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nyujve0b.png)\n\n在颁奖典礼中，选手 $0$ 被授予奖牌 $5$ 和 $6$，选手 $1$ 被授予奖牌 $3$ 和 $4$，选手 $2$ 被授予奖牌 $0,1,2$。\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 2\\times 10^5$，$1\\le M\\le 2\\times 10^5$，$0\\le x_i,y_i\\le N-1$ 且 $x_i\\ne y_i$。\n\n- 子任务一（$12$ 分）：$N=2$。\n- 子任务二（$16$ 分）：$N,M\\le 2\\times 10^3$。\n- 子任务三（$15$ 分）：第 $i$ 场比赛的获胜者参加了第 $i+1$ 场比赛，依赖子任务一。\n- 子任务四（$20$ 分）：在第 $i$ 场比赛时，$x_i$ 有至少和 $y_i$ 一样多的奖牌。\n- 子任务五（$22$ 分）：一旦一名选手被打败，她永远不会再次参赛。\n- 子任务六（$15$ 分）：无特殊限制，依赖子任务二、三、四、五。", "locale": "zh-CN"}}}
{"pid": "P9465", "type": "P", "difficulty": 6, "samples": [["4 5\n\n0 2\n\n3 4", "\n? vv>>>>>><^^^^^>\n\n? >>>>>>>>vvvvvvvvvv\n\n! 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "交互题", "Special Judge", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Find the Box / 找箱子", "background": "Day 1 Problem C.\n\n题面译自 [EGOI2023 findthebox](https://egoi23.se/assets/tasks/day1/findthebox.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "**本题是一道 I/O 式交互题。**\n\n玛伊是一名机器人研究员，在隆德大学工作。她了解到在大学的地下室里有一个价值连城的宝藏。宝藏就在地下深处一个空房间的箱子里。不幸的是，玛伊不能直接去找那个箱子。地下室里非常黑，且带着灯去会引起怀疑。她找到宝藏的唯一办法就是遥控住在地窖里的吸尘器机器人。\n\n地下室是一个 $H\\times W$ 的网格，其中行从 $0$ 到 $H-1$（从上到下）编号，列从 $0$ 到 $W-1$（从左到右）编号，也就是说左上角格子是 $(0,0)$，右下角格子是 $(H-1,W-1)$。装宝藏的箱子在与 $(0,0)$ 不同的某个未知的格子中。每天晚上，吸尘器机器人从左上角格子开始在地下室中移动。\n\n每天晚上，玛伊给机器人一系列指令以指导机器人移动，指令是一个包含字符 `<`、`>`、`^` 和 `v` 的字符串。形式化地，如果机器人在格子 $(r,c)$ 且四周未被遮挡，`<` 使得机器人向左移动到 $(r,c-1)$，`>` 使得机器人向右移动到 $(r,c+1)$，`^` 使得机器人向上移动到 $(r-1,c)$，`v` 使得机器人向下移动到 $(r+1,c)$。\n\n地下室的墙十分坚硬，因此如果机器人试图移动到格子外，什么都不会发生。箱子也十分坚硬，并且不能被推动。在每晚结束时，机器人会报告它的位置，并回到左上角格子。\n\n时间就是金钱，因此玛伊需要用尽量少的晚上找到箱子。", "inputFormat": "", "outputFormat": "本题是一道 I/O 式交互题。\n\n- 在开始时，你的程序应当输入一行两个整数 $H,W$，表示格子的高度和宽度。\n- 之后，你的程序与交互库交互。在每一轮交互过程中，你应当输出一个问号 `?`，其后是一个非空字符串 $s$ 包含字符 `<`、`>`、`^` 和 `v`。字符串的长度必须至多为 $2\\times10^4$。然后，你的程序输入两个整数 $r,c$（$0\\le r\\le H-1$，$0\\le c\\le W-1$），表示执行完指令后机器人的位置。注意每次询问后，机器人都会回到 $(0,0)$。\n- 当你知道箱子的位置时，输出 `!` 和两个整数 $r_b,c_b$（$0\\le r_b\\le H-1$，$0\\le c_b\\le W-1$），表示箱子的坐标。在这之后，你的程序必须不再进行任何询问并退出。这个最终的输出在计算你的得分时不被计入询问次数。\n\n请确保在每次询问后刷新输出流，否则你的程序可能被判定为 TLE。在 Python 中，`print()` 自动刷新输出流。在 C++ 中，`cout << endl;` 在输出换行后也会刷新输出流；如果使用 `printf`，请使用 `fflush(stdout)`。\n\n交互库不自适应，意味着箱子的位置在交互开始前被确定。", "hint": "**样例解释**\n\n考虑样例。格子有高度 $H=4$ 和宽度 $W=5$，箱子在 $(r,c)=(2,3)$。下图展示了机器人在收到指令 `? vv>>>>>><^^^^^>` 后的路径，机器人最终停在 $(r,c)=(0,2)$。在第二次询问前，机器人回到左上角 $(0,0)$。程序询问 `? >>>>>>>>vvvvvvvvvv`，机器人最终停在右下角 $(r,c)=(3,4)$。此时，程序决定猜答案，输出了 `! 2 3`，惊喜地发现，这恰好是箱子的正确位置！\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f540broe.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le H,W\\le 50$，箱子不会位于 $(0,0)$ 处（这意味着 $H+W\\ge 3$），每次询问最多包含 $2\\times 10^4$ 个指令，你可以询问至多 $2500$ 次（给出最终答案不被计入询问）。\n\n你的程序会被测试于一定数量的测试点。如果你的程序在*任何*一个测试点失败（例如：给出错误的箱子坐标（WA）、程序崩了（RE）、超出时间限制（TLE）等），你会得到 $0$ 分和适当的评测结果。\n\n如果你的程序在*所有*测试点都成功找到了箱子，你会得到 AC（**译者注：在洛谷，非满分即为 WA**），分数由下式决定：\n\n$$\n\\textrm{score}=\\min\\left(\\frac{100\\sqrt{2}}{\\sqrt{Q}},100\\right)\\textrm{ 分}\n$$\n\n其中 $Q$ 是所有测试点中询问次数的最大值。输出最终答案不被计入询问。分数将被四舍五入到最接近的整数。\n\n具体地，要得到 $100$ 分，你的程序必须在 $Q=2$ 次询问内解决所有测试点。下表展示了一些 $Q$ 的值和其得分。\n\n|$Q$|$2$|$3$|$4$|$5$|$\\cdots$|$20$|$\\cdots$|$50$|$\\cdots$|$2500$|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|分数|$100$|$82$|$71$|$63$|$\\cdots$|$32$|$\\cdots$|$20$|$\\cdots$|$3$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Find the Box / 找箱子", "background": "Day 1 Problem C.\n\n题面译自 [EGOI2023 findthebox](https://egoi23.se/assets/tasks/day1/findthebox.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "**本题是一道 I/O 式交互题。**\n\n玛伊是一名机器人研究员，在隆德大学工作。她了解到在大学的地下室里有一个价值连城的宝藏。宝藏就在地下深处一个空房间的箱子里。不幸的是，玛伊不能直接去找那个箱子。地下室里非常黑，且带着灯去会引起怀疑。她找到宝藏的唯一办法就是遥控住在地窖里的吸尘器机器人。\n\n地下室是一个 $H\\times W$ 的网格，其中行从 $0$ 到 $H-1$（从上到下）编号，列从 $0$ 到 $W-1$（从左到右）编号，也就是说左上角格子是 $(0,0)$，右下角格子是 $(H-1,W-1)$。装宝藏的箱子在与 $(0,0)$ 不同的某个未知的格子中。每天晚上，吸尘器机器人从左上角格子开始在地下室中移动。\n\n每天晚上，玛伊给机器人一系列指令以指导机器人移动，指令是一个包含字符 `<`、`>`、`^` 和 `v` 的字符串。形式化地，如果机器人在格子 $(r,c)$ 且四周未被遮挡，`<` 使得机器人向左移动到 $(r,c-1)$，`>` 使得机器人向右移动到 $(r,c+1)$，`^` 使得机器人向上移动到 $(r-1,c)$，`v` 使得机器人向下移动到 $(r+1,c)$。\n\n地下室的墙十分坚硬，因此如果机器人试图移动到格子外，什么都不会发生。箱子也十分坚硬，并且不能被推动。在每晚结束时，机器人会报告它的位置，并回到左上角格子。\n\n时间就是金钱，因此玛伊需要用尽量少的晚上找到箱子。", "inputFormat": "", "outputFormat": "本题是一道 I/O 式交互题。\n\n- 在开始时，你的程序应当输入一行两个整数 $H,W$，表示格子的高度和宽度。\n- 之后，你的程序与交互库交互。在每一轮交互过程中，你应当输出一个问号 `?`，其后是一个非空字符串 $s$ 包含字符 `<`、`>`、`^` 和 `v`。字符串的长度必须至多为 $2\\times10^4$。然后，你的程序输入两个整数 $r,c$（$0\\le r\\le H-1$，$0\\le c\\le W-1$），表示执行完指令后机器人的位置。注意每次询问后，机器人都会回到 $(0,0)$。\n- 当你知道箱子的位置时，输出 `!` 和两个整数 $r_b,c_b$（$0\\le r_b\\le H-1$，$0\\le c_b\\le W-1$），表示箱子的坐标。在这之后，你的程序必须不再进行任何询问并退出。这个最终的输出在计算你的得分时不被计入询问次数。\n\n请确保在每次询问后刷新输出流，否则你的程序可能被判定为 TLE。在 Python 中，`print()` 自动刷新输出流。在 C++ 中，`cout << endl;` 在输出换行后也会刷新输出流；如果使用 `printf`，请使用 `fflush(stdout)`。\n\n交互库不自适应，意味着箱子的位置在交互开始前被确定。", "hint": "**样例解释**\n\n考虑样例。格子有高度 $H=4$ 和宽度 $W=5$，箱子在 $(r,c)=(2,3)$。下图展示了机器人在收到指令 `? vv>>>>>><^^^^^>` 后的路径，机器人最终停在 $(r,c)=(0,2)$。在第二次询问前，机器人回到左上角 $(0,0)$。程序询问 `? >>>>>>>>vvvvvvvvvv`，机器人最终停在右下角 $(r,c)=(3,4)$。此时，程序决定猜答案，输出了 `! 2 3`，惊喜地发现，这恰好是箱子的正确位置！\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f540broe.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le H,W\\le 50$，箱子不会位于 $(0,0)$ 处（这意味着 $H+W\\ge 3$），每次询问最多包含 $2\\times 10^4$ 个指令，你可以询问至多 $2500$ 次（给出最终答案不被计入询问）。\n\n你的程序会被测试于一定数量的测试点。如果你的程序在*任何*一个测试点失败（例如：给出错误的箱子坐标（WA）、程序崩了（RE）、超出时间限制（TLE）等），你会得到 $0$ 分和适当的评测结果。\n\n如果你的程序在*所有*测试点都成功找到了箱子，你会得到 AC（**译者注：在洛谷，非满分即为 WA**），分数由下式决定：\n\n$$\n\\textrm{score}=\\min\\left(\\frac{100\\sqrt{2}}{\\sqrt{Q}},100\\right)\\textrm{ 分}\n$$\n\n其中 $Q$ 是所有测试点中询问次数的最大值。输出最终答案不被计入询问。分数将被四舍五入到最接近的整数。\n\n具体地，要得到 $100$ 分，你的程序必须在 $Q=2$ 次询问内解决所有测试点。下表展示了一些 $Q$ 的值和其得分。\n\n|$Q$|$2$|$3$|$4$|$5$|$\\cdots$|$20$|$\\cdots$|$50$|$\\cdots$|$2500$|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|分数|$100$|$82$|$71$|$63$|$\\cdots$|$32$|$\\cdots$|$20$|$\\cdots$|$3$|", "locale": "zh-CN"}}}
{"pid": "P9466", "type": "P", "difficulty": 6, "samples": [["2 1\n1\n1", "2\n0 1 0\n0 1 1"], ["4 1\n0\n0 1\n0 0 1\n1\n1 1\n1 1 1", "NO"], ["6 6\n5\n4 4\n1 1 1\n1 1 1 3\n1 1 1 5 3\n2\n3 2\n6 2 3\n3 2 5 3\n3 2 4 3 4", "8\n0 1 1\n0 2 3\n1 2 2\n0 3 6\n2 4 5\n3 4 3\n3 5 1\n4 5 4"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "Special Judge", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Bikes vs Cars / 骑车与汽车", "background": "Day 1 Problem D.\n\n题面译自 [EGOI2023 bikesvscars](https://egoi23.se/assets/tasks/day1/bikesvscars.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "在隆德，骑自行车是一种常见的交通方式，但有时狭窄的街道难以容纳汽车和自行车通行。为了改善这一状况，当地政$ $府希望完全重新设计当地的街道网络。\n\n隆德共有 $N$ 个关键位置（编号从 $0$ 到 $N-1$），人们常常在其间通行。人们通过一条路径在两地之间通行，其中路径是一系列的街道，从第一个地点到另一个。一种交通工具（车或自行车）可以在一条路径上通行，当且仅当经过的所有街道都至少与它一样宽。每个新修的街道连接关键位置其中之二，有着宽度 $W$。这个宽度可以被任意分割为自行车道和机动车道。在隆德，一些工程师最近发明了宽度为 $0$ 的车和自行车（它们可以在宽度为 $0$ 的道路通行）。\n\n这些工程师测量了城市中车和自行车的宽度。对于每一对关键位置，他们知道其间通行的最宽的车和最宽的自行车的宽度，但政$ $府还要求更宽的车和自行车不能在其间通行。\n\n形式化地，对于任意 $i,j$（$0\\le i < j\\le N-1$），你都知道两个整数 $C_{i,j}$ 和 $B_{i,j}$。你的任务是构造一个街道网络连接这 $N$ 个位置。街道的宽度均为 $W$，但对于任意街道 $s$，你可以选择它的自行车道宽度 $b_s$ 和机动车道宽度 $W-b_s$。这个网络必须满足以下要求：\n\n- 必须可以在任意两个位置间通行。这可能需要一辆宽度为 $0$ 的自行车或车。\n- 对于每一对位置 $i,j$（其中 $i < j$），可以只借助宽度至少为 $C_{i,j}$ 的机动车道，在 $i,j$ 间通行。同时，$C_{i,j}$ 是最大的有这一性质的数。这意味着，对于所有 $i,j$ 间的路径，必须满足至少一条街道的机动车道宽度不超过 $C_{i,j}$。\n- 对于每一对位置 $i,j$（其中 $i < j$），可以只借助宽度至少为 $B_{i,j}$ 的自行车道，在 $i,j$ 间通行。同时，$B_{i,j}$ 是最大的有这一性质的数。\n\n你能帮隆德政$ $府设计一个这样的街道网络吗？因为预算有限，你可以修建至多 $2023$ 条街道。你可以在同一对关键位置间修建多条街道，但你不能修建一条连接自己和自己的街道。所有街道都是双向的。", "inputFormat": "第一行两个整数 $N,W$，表示关键位置数量和街道宽度。\n\n接下来 $N-1$ 行包含 $C_{i,j}$。其中的第 $j$ 行包含所有满足 $i < j$ 的 $C_{i,j}$。因此第一行只会包含 $C_{0,1}$，第二行包含 $C_{0,2}$ 和 $C_{1,2}$，第三行包含 $C_{0,3},C_{1,3},C_{2,3}$，以此类推。\n\n接下来 $N-1$ 行包含 $B_{i,j}$，格式同 $C_{i,j}$。", "outputFormat": "如果不存在符合要求的街道网络，输出 `NO`。\n\n否则，第一行一个整数 $M$，表示你修建的街道数。\n\n接下来 $M$ 行，每行三个整数 $u,v,b$，表示一条自行车道宽度为 $b$（机动车道宽度为 $W-b$）的连接 $u,v$ 的街道。\n\n你可以使用至多 $2023$ 条街道。你输出的街道必须满足 $0\\le b\\le W$，$0\\le u,v\\le N-1$ 且 $u\\ne v$。你可以在同一对关键位置间使用多条街道（可以有不同的自行车道宽度）。\n\n如果有多解，你可以输出任意一个。", "hint": "**样例 $1$ 解释**\n\n在样例 $1$ 中，街道的宽度为 $1$，我们需要宽度至少为 $1$ 的自行车道和机动车道各一条连接 $0,1$。解决方案是用两条分开的街道连接，一条自行车道宽度为 $1$，另一条机动车道宽度为 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9cbqwrvu.png)\n\n---\n\n**样例 $2$ 解释**\n\n在样例 $2$ 中，街道的宽度依然是 $1$，需要有一条宽度为 $1$ 的自行车道连接任意两个关键位置，且有宽度为 $1$ 的机动车道连接 $1,2$ 和 $2,3$。这与 $C_{1,3}=0$ 矛盾，不应该有宽度为 $1$ 的从 $1$ 到 $3$ 的机动车道，而我们可以合并两条先前提到的路径组成这样一条路径。因此不可能构造出一个符合要求的街道网络。\n\n---\n\n**样例 $3$ 解释**\n\n在样例 $3$ 中，下图的街道网络满足所有要求。例如，应该有一条宽度为 $1=C_{0,5}$ 的机动车道在 $0,5$ 之间（路径 $0\\to 2\\to 4\\to 5$），一条宽度为 $3=B_{0,5}$ 的自行车道在 $0,5$ 之间（路径 $0\\to 3\\to 4\\to 5$）。同时，可以验证，不存在路径有着更大的宽度下限。注意样例 $3$ 可能有很多其他解法。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p8dwhz4s.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 500$，$1\\le W\\le 10^6$，$0\\le C_{i,j},B_{i,j}\\le W$。\n\n- 子任务一（$10$ 分）：所有 $C_{i,j}$ 都相同，所有 $B_{i,j}$ 都相同，$N\\le 40$。\n- 子任务二（$5$ 分）：所有 $C_{i,j}$ 都相同，所有 $B_{i,j}$ 都相同。\n- 子任务三（$17$ 分）：$N\\le 40$。\n- 子任务四（$18$ 分）：$W=1$。\n- 子任务五（$19$ 分）：所有 $B_{i,j}$ 都相同。\n- 子任务六（$31$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Bikes vs Cars / 骑车与汽车", "background": "Day 1 Problem D.\n\n题面译自 [EGOI2023 bikesvscars](https://egoi23.se/assets/tasks/day1/bikesvscars.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "在隆德，骑自行车是一种常见的交通方式，但有时狭窄的街道难以容纳汽车和自行车通行。为了改善这一状况，当地政$ $府希望完全重新设计当地的街道网络。\n\n隆德共有 $N$ 个关键位置（编号从 $0$ 到 $N-1$），人们常常在其间通行。人们通过一条路径在两地之间通行，其中路径是一系列的街道，从第一个地点到另一个。一种交通工具（车或自行车）可以在一条路径上通行，当且仅当经过的所有街道都至少与它一样宽。每个新修的街道连接关键位置其中之二，有着宽度 $W$。这个宽度可以被任意分割为自行车道和机动车道。在隆德，一些工程师最近发明了宽度为 $0$ 的车和自行车（它们可以在宽度为 $0$ 的道路通行）。\n\n这些工程师测量了城市中车和自行车的宽度。对于每一对关键位置，他们知道其间通行的最宽的车和最宽的自行车的宽度，但政$ $府还要求更宽的车和自行车不能在其间通行。\n\n形式化地，对于任意 $i,j$（$0\\le i < j\\le N-1$），你都知道两个整数 $C_{i,j}$ 和 $B_{i,j}$。你的任务是构造一个街道网络连接这 $N$ 个位置。街道的宽度均为 $W$，但对于任意街道 $s$，你可以选择它的自行车道宽度 $b_s$ 和机动车道宽度 $W-b_s$。这个网络必须满足以下要求：\n\n- 必须可以在任意两个位置间通行。这可能需要一辆宽度为 $0$ 的自行车或车。\n- 对于每一对位置 $i,j$（其中 $i < j$），可以只借助宽度至少为 $C_{i,j}$ 的机动车道，在 $i,j$ 间通行。同时，$C_{i,j}$ 是最大的有这一性质的数。这意味着，对于所有 $i,j$ 间的路径，必须满足至少一条街道的机动车道宽度不超过 $C_{i,j}$。\n- 对于每一对位置 $i,j$（其中 $i < j$），可以只借助宽度至少为 $B_{i,j}$ 的自行车道，在 $i,j$ 间通行。同时，$B_{i,j}$ 是最大的有这一性质的数。\n\n你能帮隆德政$ $府设计一个这样的街道网络吗？因为预算有限，你可以修建至多 $2023$ 条街道。你可以在同一对关键位置间修建多条街道，但你不能修建一条连接自己和自己的街道。所有街道都是双向的。", "inputFormat": "第一行两个整数 $N,W$，表示关键位置数量和街道宽度。\n\n接下来 $N-1$ 行包含 $C_{i,j}$。其中的第 $j$ 行包含所有满足 $i < j$ 的 $C_{i,j}$。因此第一行只会包含 $C_{0,1}$，第二行包含 $C_{0,2}$ 和 $C_{1,2}$，第三行包含 $C_{0,3},C_{1,3},C_{2,3}$，以此类推。\n\n接下来 $N-1$ 行包含 $B_{i,j}$，格式同 $C_{i,j}$。", "outputFormat": "如果不存在符合要求的街道网络，输出 `NO`。\n\n否则，第一行一个整数 $M$，表示你修建的街道数。\n\n接下来 $M$ 行，每行三个整数 $u,v,b$，表示一条自行车道宽度为 $b$（机动车道宽度为 $W-b$）的连接 $u,v$ 的街道。\n\n你可以使用至多 $2023$ 条街道。你输出的街道必须满足 $0\\le b\\le W$，$0\\le u,v\\le N-1$ 且 $u\\ne v$。你可以在同一对关键位置间使用多条街道（可以有不同的自行车道宽度）。\n\n如果有多解，你可以输出任意一个。", "hint": "**样例 $1$ 解释**\n\n在样例 $1$ 中，街道的宽度为 $1$，我们需要宽度至少为 $1$ 的自行车道和机动车道各一条连接 $0,1$。解决方案是用两条分开的街道连接，一条自行车道宽度为 $1$，另一条机动车道宽度为 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9cbqwrvu.png)\n\n---\n\n**样例 $2$ 解释**\n\n在样例 $2$ 中，街道的宽度依然是 $1$，需要有一条宽度为 $1$ 的自行车道连接任意两个关键位置，且有宽度为 $1$ 的机动车道连接 $1,2$ 和 $2,3$。这与 $C_{1,3}=0$ 矛盾，不应该有宽度为 $1$ 的从 $1$ 到 $3$ 的机动车道，而我们可以合并两条先前提到的路径组成这样一条路径。因此不可能构造出一个符合要求的街道网络。\n\n---\n\n**样例 $3$ 解释**\n\n在样例 $3$ 中，下图的街道网络满足所有要求。例如，应该有一条宽度为 $1=C_{0,5}$ 的机动车道在 $0,5$ 之间（路径 $0\\to 2\\to 4\\to 5$），一条宽度为 $3=B_{0,5}$ 的自行车道在 $0,5$ 之间（路径 $0\\to 3\\to 4\\to 5$）。同时，可以验证，不存在路径有着更大的宽度下限。注意样例 $3$ 可能有很多其他解法。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p8dwhz4s.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 500$，$1\\le W\\le 10^6$，$0\\le C_{i,j},B_{i,j}\\le W$。\n\n- 子任务一（$10$ 分）：所有 $C_{i,j}$ 都相同，所有 $B_{i,j}$ 都相同，$N\\le 40$。\n- 子任务二（$5$ 分）：所有 $C_{i,j}$ 都相同，所有 $B_{i,j}$ 都相同。\n- 子任务三（$17$ 分）：$N\\le 40$。\n- 子任务四（$18$ 分）：$W=1$。\n- 子任务五（$19$ 分）：所有 $B_{i,j}$ 都相同。\n- 子任务六（$31$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9467", "type": "P", "difficulty": 3, "samples": [["6\n0\n1 0\n2 1 0\n3 2 1 0\n4 3 2 1 0", "4 2 5 3 1 0"], ["5\n0\n0 1\n0 1 2\n0 1 2 3", "2 0 4 1 3"], ["4\n0\n1 0\n0 2 1", "3 0 1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2023", "Special Judge", "O2优化", "构造", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Carnival General / 狂欢节总管", "background": "Day 2 Problem A.\n\n题面译自 [EGOI2023 carnival](https://egoi23.se/assets/tasks/day2/carnival.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "每四年，隆德的学生都会聚到一起并举办隆德狂欢节。几天之内，公园内会挤满帐篷，并举办各种各样的庆祝活动。负责组织这一切的人被称为狂欢节总管。\n\n共有 $N$ 个狂欢节，每个狂欢节都有不同的总管。这些总管按时间顺序被编号为 $0$ 到 $N-1$。每个总管 $i$ 都给出了他们对于前任总管的评价，他们公布了总管 $0,1,\\cdots,i-1$ 从好到坏的排名。\n\n下一届隆德狂欢节将于 2026 年举办。在此期间，所有曾经的狂欢节总管聚在一起拍了张合照。然而，如果总管 $i$ 和 $j$（其中 $i < j$）最终紧挨着对方，且 $i$ 在 $j$ 给出的排名中**严格**位于后一半，那么就会很尴尬。\n\n例如：\n\n- 如果总管 $4$ 给出的排名是 `3 2 1 0`，那么 $4$ 可以紧挨着 $3$ 或者 $2$ 站，但不能紧挨着 $1$ 或者 $0$。\n- 如果总管 $5$ 给出的排名是 `4 3 2 1 0`，那么 $5$ 可以紧挨着 $4,3,2$ 站，但不能紧挨着 $1$ 或者 $0$。\n\n下图为样例 $1$。其中，总管 $5$ 紧挨着总管 $2$ 和 $3$，且总管 $4$ 只紧挨着总管 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/398d2tvl.png)\n\n你已知所有总管给出的排名。你的任务是将所有总管 $0,1,\\cdots,N-1$ 安排到一排，使得如果 $i$ 和 $j$ 紧挨着（其中 $i < j$），那么 $i$ **并非**严格位于 $j$ 给出排名的后一半。", "inputFormat": "第一行一个整数 $N$，表示总管总数。\n\n接下来 $N-1$ 行包含所有排名。其中的第一行是总管 $1$ 给出的排名，第二行是总管 $2$ 给出的排名，以此类推直到总管 $N-1$。总管 $0$ 不在输入中，因为总管 $0$ 没有任何前任总管可供排名。\n\n总管 $i$ 的排名是一个长度为 $i$ 的列表 $p_{i,0},p_{i,1},\\cdots,p_{i,i-1}$，其中每个整数从 $0$ 到 $i-1$ 且恰好出现一次。具体地，根据总管 $i$ 的排名，$p_{i,0}$ 是最好的总管，$p_{i,i-1}$ 是最差的总管。", "outputFormat": "输出一列整数，一个整数 $0,1,\\cdots,N-1$ 的排列，使得对于每对相邻整数，不存在一个在另一个排名的后一半。\n\n可以证明一定有解。如果有多解，你可以输出任意一个。", "hint": "**样例 $1$ 解释**\n\n样例 $1$ 符合子任务一的要求。在样例中，总管 $2$ 和 $3$ 都不能紧挨着总管 $0$ 站，总管 $4$ 和 $5$ 都不能紧挨着总管 $0$ 和 $1$ 站。样例输出见上图。\n\n---\n\n**样例 $2$ 解释**\n\n样例 $2$ 符合子任务二的要求。在样例中，总管 $2$ 不能紧挨着总管 $1$ 站，总管 $3$ 不能紧挨着总管 $2$ 站，总管 $4$ 不能紧挨着总管 $3$ 和 $2$ 站。\n\n---\n\n**样例 $3$ 解释**\n\n样例 $3$ 符合子任务三的要求。在样例中，只有 $(1,3)$ 和 $(0,2)$ 两对总管不能彼此紧挨着站。因此，如果安排为 `3 0 1 2`，并不会有冲突。另一种可能的答案是 `0 1 2 3`。\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 10^3$，$0\\le p_{i,0},p_{i,1},\\cdots,p_{i,i-1}\\le i-1$。\n \n- 子任务一（$11$ 分）：总管 $i$ 给出的排名为 $i-1,i-2,\\cdots,0$。\n- 子任务二（$23$ 分）：总管 $i$ 给出的排名为 $0,1,\\cdots,i-1$。\n- 子任务三（$29$ 分）：$N\\le 8$。\n- 子任务四（$37$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Carnival General / 狂欢节总管", "background": "Day 2 Problem A.\n\n题面译自 [EGOI2023 carnival](https://egoi23.se/assets/tasks/day2/carnival.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "每四年，隆德的学生都会聚到一起并举办隆德狂欢节。几天之内，公园内会挤满帐篷，并举办各种各样的庆祝活动。负责组织这一切的人被称为狂欢节总管。\n\n共有 $N$ 个狂欢节，每个狂欢节都有不同的总管。这些总管按时间顺序被编号为 $0$ 到 $N-1$。每个总管 $i$ 都给出了他们对于前任总管的评价，他们公布了总管 $0,1,\\cdots,i-1$ 从好到坏的排名。\n\n下一届隆德狂欢节将于 2026 年举办。在此期间，所有曾经的狂欢节总管聚在一起拍了张合照。然而，如果总管 $i$ 和 $j$（其中 $i < j$）最终紧挨着对方，且 $i$ 在 $j$ 给出的排名中**严格**位于后一半，那么就会很尴尬。\n\n例如：\n\n- 如果总管 $4$ 给出的排名是 `3 2 1 0`，那么 $4$ 可以紧挨着 $3$ 或者 $2$ 站，但不能紧挨着 $1$ 或者 $0$。\n- 如果总管 $5$ 给出的排名是 `4 3 2 1 0`，那么 $5$ 可以紧挨着 $4,3,2$ 站，但不能紧挨着 $1$ 或者 $0$。\n\n下图为样例 $1$。其中，总管 $5$ 紧挨着总管 $2$ 和 $3$，且总管 $4$ 只紧挨着总管 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/398d2tvl.png)\n\n你已知所有总管给出的排名。你的任务是将所有总管 $0,1,\\cdots,N-1$ 安排到一排，使得如果 $i$ 和 $j$ 紧挨着（其中 $i < j$），那么 $i$ **并非**严格位于 $j$ 给出排名的后一半。", "inputFormat": "第一行一个整数 $N$，表示总管总数。\n\n接下来 $N-1$ 行包含所有排名。其中的第一行是总管 $1$ 给出的排名，第二行是总管 $2$ 给出的排名，以此类推直到总管 $N-1$。总管 $0$ 不在输入中，因为总管 $0$ 没有任何前任总管可供排名。\n\n总管 $i$ 的排名是一个长度为 $i$ 的列表 $p_{i,0},p_{i,1},\\cdots,p_{i,i-1}$，其中每个整数从 $0$ 到 $i-1$ 且恰好出现一次。具体地，根据总管 $i$ 的排名，$p_{i,0}$ 是最好的总管，$p_{i,i-1}$ 是最差的总管。", "outputFormat": "输出一列整数，一个整数 $0,1,\\cdots,N-1$ 的排列，使得对于每对相邻整数，不存在一个在另一个排名的后一半。\n\n可以证明一定有解。如果有多解，你可以输出任意一个。", "hint": "**样例 $1$ 解释**\n\n样例 $1$ 符合子任务一的要求。在样例中，总管 $2$ 和 $3$ 都不能紧挨着总管 $0$ 站，总管 $4$ 和 $5$ 都不能紧挨着总管 $0$ 和 $1$ 站。样例输出见上图。\n\n---\n\n**样例 $2$ 解释**\n\n样例 $2$ 符合子任务二的要求。在样例中，总管 $2$ 不能紧挨着总管 $1$ 站，总管 $3$ 不能紧挨着总管 $2$ 站，总管 $4$ 不能紧挨着总管 $3$ 和 $2$ 站。\n\n---\n\n**样例 $3$ 解释**\n\n样例 $3$ 符合子任务三的要求。在样例中，只有 $(1,3)$ 和 $(0,2)$ 两对总管不能彼此紧挨着站。因此，如果安排为 `3 0 1 2`，并不会有冲突。另一种可能的答案是 `0 1 2 3`。\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 10^3$，$0\\le p_{i,0},p_{i,1},\\cdots,p_{i,i-1}\\le i-1$。\n \n- 子任务一（$11$ 分）：总管 $i$ 给出的排名为 $i-1,i-2,\\cdots,0$。\n- 子任务二（$23$ 分）：总管 $i$ 给出的排名为 $0,1,\\cdots,i-1$。\n- 子任务三（$29$ 分）：$N\\le 8$。\n- 子任务四（$37$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9468", "type": "P", "difficulty": 4, "samples": [["6 2 27\n10 4 20 6 3 3", "1"], ["6 5 5000000000\n1000000000 1000000000 0 1000000000 1000000000 1000000000", "3"], ["3 2 100\n20 30 60", "NO"], ["1 1 100\n100", "0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2023", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Candy / 糖果", "background": "Day 2 Problem B.\n\n题面译自 [EGOI2023 candy](https://egoi23.se/assets/tasks/day2/candy.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "在伊卡古城，据说有一座宫殿，其财富超乎想象。在其中，一个走廊中有 $N$ 盒来自世界各地的糖果。路过的旅行者只要用黄金支付糖果的重量，就可以拿走任意多的糖果。\n\n装糖果的盒子被从左到右编号为 $0$ 到 $N-1$。在盒子 $i$ 中，剩余有 $a_i$ 单位的糖果，其中 $a_i$ 是一个非负整数。\n\n作为宫殿的守护者，你需要移动这些盒子，使得有很多糖果的盒子更靠近入口。\n\n你已知数组 $a_0,a_1,\\cdots,a_{N-1}$，以及整数 $F$ 和 $T$。在一次操作中，你被允许交换 $a_0,a_1,\\cdots,a_{N-1}$ 中的任意两个**相邻**元素。要使得数组前 $F$ 个元素的和至少为 $T$，至少需要多少次操作？", "inputFormat": "第一行三个整数 $N,F,T$。\n\n第二行 $N$ 个整数 $a_0,a_1,\\cdots,a_{N-1}$。", "outputFormat": "如果不可能达成目标，输出 `NO`。\n\n否则，输出一个整数，表示最少操作数。", "hint": "**样例 $1$ 解释**\n\n在样例 $1$ 中，前两个元素的和应当至少为 $27$。一次相邻元素的交换就可以达成目标：交换 $4$ 和 $20$。在这次交换后，数组变成 `10 20 4 6 3 3`，前两个元素的和为 $10+20=30\\ge 27$。\n\n---\n\n**样例 $2$ 解释**\n\n在样例 $2$ 中，这个 $0$ 必须一路移动到数组末尾；这需要 $3$ 次交换。\n\n---\n\n**样例 $3$ 解释**\n\n在样例 $3$ 中，不可能使得前两个元素和至少为 $100$；我们能做到的最好结果是 $60+30=90$。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 100$，$1\\le F\\le N$，$0\\le T\\le 10^{11}$，$0\\le a_i\\le 10^9$。\n\n- 子任务一（$6$ 分）：$N\\le 2$，$a_i\\le 100$，$T\\le 10^9$。\n- 子任务二（$19$ 分）：$a_i\\le 1$。\n- 子任务三（$16$ 分）：$N\\le 20$。\n- 子任务四（$30$ 分）：$a_i\\le 100$。\n- 子任务五（$29$ 分）：无特殊限制。\n\n---\n\n**提示**\n\n答案可能不在 $32$ 位整型范围内，如果你使用 C++ 语言，请注意溢出的可能。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Candy / 糖果", "background": "Day 2 Problem B.\n\n题面译自 [EGOI2023 candy](https://egoi23.se/assets/tasks/day2/candy.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "在伊卡古城，据说有一座宫殿，其财富超乎想象。在其中，一个走廊中有 $N$ 盒来自世界各地的糖果。路过的旅行者只要用黄金支付糖果的重量，就可以拿走任意多的糖果。\n\n装糖果的盒子被从左到右编号为 $0$ 到 $N-1$。在盒子 $i$ 中，剩余有 $a_i$ 单位的糖果，其中 $a_i$ 是一个非负整数。\n\n作为宫殿的守护者，你需要移动这些盒子，使得有很多糖果的盒子更靠近入口。\n\n你已知数组 $a_0,a_1,\\cdots,a_{N-1}$，以及整数 $F$ 和 $T$。在一次操作中，你被允许交换 $a_0,a_1,\\cdots,a_{N-1}$ 中的任意两个**相邻**元素。要使得数组前 $F$ 个元素的和至少为 $T$，至少需要多少次操作？", "inputFormat": "第一行三个整数 $N,F,T$。\n\n第二行 $N$ 个整数 $a_0,a_1,\\cdots,a_{N-1}$。", "outputFormat": "如果不可能达成目标，输出 `NO`。\n\n否则，输出一个整数，表示最少操作数。", "hint": "**样例 $1$ 解释**\n\n在样例 $1$ 中，前两个元素的和应当至少为 $27$。一次相邻元素的交换就可以达成目标：交换 $4$ 和 $20$。在这次交换后，数组变成 `10 20 4 6 3 3`，前两个元素的和为 $10+20=30\\ge 27$。\n\n---\n\n**样例 $2$ 解释**\n\n在样例 $2$ 中，这个 $0$ 必须一路移动到数组末尾；这需要 $3$ 次交换。\n\n---\n\n**样例 $3$ 解释**\n\n在样例 $3$ 中，不可能使得前两个元素和至少为 $100$；我们能做到的最好结果是 $60+30=90$。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 100$，$1\\le F\\le N$，$0\\le T\\le 10^{11}$，$0\\le a_i\\le 10^9$。\n\n- 子任务一（$6$ 分）：$N\\le 2$，$a_i\\le 100$，$T\\le 10^9$。\n- 子任务二（$19$ 分）：$a_i\\le 1$。\n- 子任务三（$16$ 分）：$N\\le 20$。\n- 子任务四（$30$ 分）：$a_i\\le 100$。\n- 子任务五（$29$ 分）：无特殊限制。\n\n---\n\n**提示**\n\n答案可能不在 $32$ 位整型范围内，如果你使用 C++ 语言，请注意溢出的可能。", "locale": "zh-CN"}}}
{"pid": "P9469", "type": "P", "difficulty": 0, "samples": [["5 1 8\n4 1\n3 1\n3 4\n3 2\n0 2\n0 4\n2 4\n1 0\n2 0", "4 1\n3 0\n1 3\n2 3"], ["5 4 0\n1 0\n2 3\n3 4\n4 2\n", "NO"], ["3 0 1\n0 1", "1 0\n2 0"], ["4 0 2\n0 1\n1 0", "2 0\n3 0\n1 3"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "Special Judge", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Sopsug / 垃圾处理", "background": "Day 2 Problem C.\n\n题面译自 [EGOI2023 sopsug](https://egoi23.se/assets/tasks/day2/sopsug.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "砾石堆是隆德郊区的一处未建成的居民区。目前，所有必要的基础设施正在建设中，包括其中最重要的：垃圾处理。与瑞典许多地区一样，将使用一个自动真空收集系统收集垃圾。其原理是使用气压将垃圾通过管道在地下运输。\n\n砾石堆中有 $N$ 座建筑，编号从 $0$ 到 $N-1$。你的任务是用管道连接几对建筑。如果你在建筑 $u$ 和 $v$ 之间连接一条管道，$u$ 将会把所有垃圾运送到 $v$（但不能反向运输）。你的目标是建立一个由 $N-1$ 个管道组成的网络，使得所有垃圾最终都进入一座建筑。换句话说，你希望整个网络构成一棵有根树，所有边都指向树根。\n\n然而，建筑物间已经建设了 $M$ 条管道。这些管道必须被包含在你的网络中。这些管道是有方向的，只能向一个方向运输。\n\n此外，有 $K$ 对建筑物间无法建设管道。这些建筑物对是有序的，因此如果无法从 $u$ 到 $v$ 建设管道，也有可能从 $v$ 到 $u$ 可以建设管道。", "inputFormat": "第一行三个整数 $N,M,K$。\n\n接下来 $M$ 行，每行两个不相等的整数 $a_i,b_i$，表示已经存在一条从 $a_i$ 到 $b_i$ 的管道。\n\n接下来 $K$ 行，每行两个不相等的整数 $c_i,d_i$，表示无法从 $c_i$ 到 $d_i$ 建设管道。\n\n所有 $M+K$ 对有序数对是互不相同的。注意 $(u,v)$ 和 $(v,u)$ 是不同的两对数。", "outputFormat": "如果无解，输出 `NO`。\n\n否则，输出 $N-1$ 行，每行两个整数 $u_i,v_i$，表示有一条从 $u_i$ 到 $v_i$ 的管道。你可以以任意顺序输出这些管道。如果有多解，你可以输出任意一个。请记住所有 $M$ 条已经存在的管道必须包含在答案中。", "hint": "**样例 $1,2$ 解释**\n\n下图展示了前两组样例。蓝色边表示已经存在的管道，红色虚线边表示无法建造的管道。\n\n左图展示了样例 $1$ 和样例输出的方案，黑色边表示新建造的管道。在这个网络中，所有垃圾将被收集在建筑 $0$。这不是唯一解；例如，从 $1$ 到 $3$ 的管道可以被从 $0$ 到 $1$ 的管道代替，此时依然是合法解。\n\n对于样例 $2$，根据右图可以发现，由于环 $(2,3,4)$ 的存在，问题无解。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n0z2x9vy.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 3\\times 10^5$，$0\\le M\\le 3\\times 10^5$，$0\\le K\\le 3\\times 10^5$，$0\\le a_i,b_i\\le N-1$，$0\\le c_i,d_i\\le N-1$。\n\n- 子任务一（$12$ 分）：$M=0$，$K=1$。\n- 子任务二（$10$ 分）：$M=0$，$K=2$。\n- 子任务三（$19$ 分）：$K=0$。\n- 子任务四（$13$ 分）：$N\\le 100$。\n- 子任务五（$17$ 分）：保证存在解法使得 $0$ 为根。\n- 子任务六（$11$ 分）：$M=0$。\n- 子任务七（$18$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Sopsug / 垃圾处理", "background": "Day 2 Problem C.\n\n题面译自 [EGOI2023 sopsug](https://egoi23.se/assets/tasks/day2/sopsug.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "砾石堆是隆德郊区的一处未建成的居民区。目前，所有必要的基础设施正在建设中，包括其中最重要的：垃圾处理。与瑞典许多地区一样，将使用一个自动真空收集系统收集垃圾。其原理是使用气压将垃圾通过管道在地下运输。\n\n砾石堆中有 $N$ 座建筑，编号从 $0$ 到 $N-1$。你的任务是用管道连接几对建筑。如果你在建筑 $u$ 和 $v$ 之间连接一条管道，$u$ 将会把所有垃圾运送到 $v$（但不能反向运输）。你的目标是建立一个由 $N-1$ 个管道组成的网络，使得所有垃圾最终都进入一座建筑。换句话说，你希望整个网络构成一棵有根树，所有边都指向树根。\n\n然而，建筑物间已经建设了 $M$ 条管道。这些管道必须被包含在你的网络中。这些管道是有方向的，只能向一个方向运输。\n\n此外，有 $K$ 对建筑物间无法建设管道。这些建筑物对是有序的，因此如果无法从 $u$ 到 $v$ 建设管道，也有可能从 $v$ 到 $u$ 可以建设管道。", "inputFormat": "第一行三个整数 $N,M,K$。\n\n接下来 $M$ 行，每行两个不相等的整数 $a_i,b_i$，表示已经存在一条从 $a_i$ 到 $b_i$ 的管道。\n\n接下来 $K$ 行，每行两个不相等的整数 $c_i,d_i$，表示无法从 $c_i$ 到 $d_i$ 建设管道。\n\n所有 $M+K$ 对有序数对是互不相同的。注意 $(u,v)$ 和 $(v,u)$ 是不同的两对数。", "outputFormat": "如果无解，输出 `NO`。\n\n否则，输出 $N-1$ 行，每行两个整数 $u_i,v_i$，表示有一条从 $u_i$ 到 $v_i$ 的管道。你可以以任意顺序输出这些管道。如果有多解，你可以输出任意一个。请记住所有 $M$ 条已经存在的管道必须包含在答案中。", "hint": "**样例 $1,2$ 解释**\n\n下图展示了前两组样例。蓝色边表示已经存在的管道，红色虚线边表示无法建造的管道。\n\n左图展示了样例 $1$ 和样例输出的方案，黑色边表示新建造的管道。在这个网络中，所有垃圾将被收集在建筑 $0$。这不是唯一解；例如，从 $1$ 到 $3$ 的管道可以被从 $0$ 到 $1$ 的管道代替，此时依然是合法解。\n\n对于样例 $2$，根据右图可以发现，由于环 $(2,3,4)$ 的存在，问题无解。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n0z2x9vy.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 3\\times 10^5$，$0\\le M\\le 3\\times 10^5$，$0\\le K\\le 3\\times 10^5$，$0\\le a_i,b_i\\le N-1$，$0\\le c_i,d_i\\le N-1$。\n\n- 子任务一（$12$ 分）：$M=0$，$K=1$。\n- 子任务二（$10$ 分）：$M=0$，$K=2$。\n- 子任务三（$19$ 分）：$K=0$。\n- 子任务四（$13$ 分）：$N\\le 100$。\n- 子任务五（$17$ 分）：保证存在解法使得 $0$ 为根。\n- 子任务六（$11$ 分）：$M=0$。\n- 子任务七（$18$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9471", "type": "P", "difficulty": 1, "samples": [["yLOI2022", "4 1 3"], ["IAKIOIOI", "0 0 8"], ["1n2s0e1s", "4 4 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷月赛"], "title": "[yLOI2022] 签到题", "background": "", "description": "给定一个长度为 $8$ 的字符串 $s$，请你分别统计 $s$ 中大小写字母和数字字符的个数。", "inputFormat": "输入只有一行一个长度为 $8$ 的字符串 $s$。", "outputFormat": "输出一行三个整数，依次表示：\n\n- $s$ 中数字字符的个数。\n- $s$ 中小写字母的个数。\n- $s$ 中大写字母的个数。", "hint": "### 数据规模与约定\n\n对 $100\\%$ 的测试点，保证 $s$ 的长度为 $8$，仅含大小写字母和数字。\n\n以下是各个测试点中各字符的存在性，√ 表示存在，× 表示不存在。\n\n| 测试点编号 | 数字 | 小写字母 | 大写字母 |\n| :-: | :-: | :-: | :-: |\n| $1$ | √  | × |× |\n| $2$ | × | √ | × |\n| $3$ | × | × | √ |\n| $4$ | √  | √ |× |\n| $5$ | √  |  × |√ |\n| $6$ |  × | √ | √ |\n| $7$ | √ | √ | √ |\n| $8$ | √ | √ | √ |\n| $9$ | √ | √ | √ |\n| $10$ | √ | √ | √ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2022] 签到题", "background": "", "description": "给定一个长度为 $8$ 的字符串 $s$，请你分别统计 $s$ 中大小写字母和数字字符的个数。", "inputFormat": "输入只有一行一个长度为 $8$ 的字符串 $s$。", "outputFormat": "输出一行三个整数，依次表示：\n\n- $s$ 中数字字符的个数。\n- $s$ 中小写字母的个数。\n- $s$ 中大写字母的个数。", "hint": "### 数据规模与约定\n\n对 $100\\%$ 的测试点，保证 $s$ 的长度为 $8$，仅含大小写字母和数字。\n\n以下是各个测试点中各字符的存在性，√ 表示存在，× 表示不存在。\n\n| 测试点编号 | 数字 | 小写字母 | 大写字母 |\n| :-: | :-: | :-: | :-: |\n| $1$ | √  | × |× |\n| $2$ | × | √ | × |\n| $3$ | × | × | √ |\n| $4$ | √  | √ |× |\n| $5$ | √  |  × |√ |\n| $6$ |  × | √ | √ |\n| $7$ | √ | √ | √ |\n| $8$ | √ | √ | √ |\n| $9$ | √ | √ | √ |\n| $10$ | √ | √ | √ |", "locale": "zh-CN"}}}
{"pid": "P9472", "type": "P", "difficulty": 2, "samples": [["2 2\n1\n2", "1 2"], ["2 3\n1\n-1", "2 1"], ["2 2\n1\n1", "1 2"], ["见附加文件中的 B4.in", "见附加文件中的 B4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷月赛"], "title": "[yLOI2022] 枕万梦", "background": "> 岁月冥冥之中 星移物换 将韶华歌颂  \n> 人潮冥冥之中 一眼望穿 日月去无踪  \n> 你我冥冥之中 心有灵犀 何止几万梦  \n> 忘情在这久违的重逢  \n> 天地冥冥之中 云烟奔涌 摩肩又接踵  \n> 万籁冥冥之中 不肯缄默 盛大到无穷  \n> 你我冥冥之中 对坐天涯 灵犀才一动  \n> 就相遇在咫尺的时空\n\n银临《枕万梦》", "description": "天亮了，扶苏不敌困意，早早地进入了梦乡。在失去引力的梦里，扶苏遇到了好多串漂浮着的数列，它们的长度都相等，而且都是美妙的等比数列！出于本能，扶苏想要把这些数列按照字典序排序，可是在梦里扶苏失去了思考的能力，请你来帮帮她！\n\n具体地，有 $n$ 个编号从 $1$ 到 $n$ 的数列 $a_1, a_2, \\dots a_n$，每个数列的长度均为 $m + 1$。第 $i$ 个数列 $a_i$ 满足递推式 $a_{i,j} = a_{i,j - 1} \\times i$，其中 $1 \\leq j \\leq m$。而扶苏会告诉你每个序列的首项 $a_{i,0}$，你需要帮助她把这些数列按字典序排序。", "inputFormat": "输入的第一行是两个整数，依次表示 $n$ 和 $m$。  \n接下来 $n$ 行，每行一个整数，第 $i$ 行的整数表示数列 $a_i$ 的首项 $a_{i,0}$。", "outputFormat": "输出一行 $n$ 个整数，第 $i$ 个整数表示字典序第 $i$ 小的数列的**编号**。", "hint": "### 样例 1 解释\n\n共有两个数列，每个数列的长度均为 $2+1=3$。\n\n对第一个数列 $a_1$：\n- 已知其首项 $a_{1,0} = 1$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=1,j = 1$ 可以得到 $a_{1,1} = a_{1,0} \\times 1 = 1$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=1,j = 2$ 可以得到 $a_{1,2} = a_{1,1} \\times 1= 1$。\n\n所以数列 $a_1$ 是 $1,1,1$。\n\n对第二个数列 $a_2$：\n- 已知其首项 $a_{2,0} = 2$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=2,j = 1$ 可以得到 $a_{2,1} = a_{2,0} \\times 2 = 2 \\times 2 = 4$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=2,j = 2$ 可以得到 $a_{2,2} = a_{2,1} \\times 2= 4 \\times 2 = 8$。\n\n所以数列 $a_2$ 是 $2,4,8$。\n\n比较字典序可得数列 $a_1$ 是字典序最小的数列。所以输出 $1$。\n\n### 样例 2 解释\n\n数列 $a_1$ 为 $1,1,1,1$，数列 $a_2$ 为 $-1, -2,-4,-8$。\n\n### 数据规模与约定\n本题共 $10$ 个测试点，各测试点信息如下表：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/08wnuome.png)\n\n特殊约定 A：保证 $a_{i,0}$ 均相等。  \n特殊约定 B：保证 $a_{i,0}$ 互不相等。\n\n对全部的测试点，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 10^9$，$1 \\leq |a_{i,0}| \\leq 10^9$。\n\n\n### 提示\n\n对两个数列 $a_i, a_j$，按如下方式比较其字典序：\n\n找到**最小的**满足 $a_{i,p} \\neq a_{j, p}$ 的下标 $p$，比较 $a_{i, p}$ 和 $a_{j, p}$ 的大小：\n\n- 如果 $a_{i,p} < a_{j, p}$，则称 $a_i$ 的字典序比 $a_j$ 的小。\n- 如果 $a_{i,p} > a_{j, p}$，则称 $a_i$ 的字典序比 $a_j$ 的大。\n\n可以证明，在本题的限制下，这样的 $p$ 一定存在。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2022] 枕万梦", "background": "> 岁月冥冥之中 星移物换 将韶华歌颂  \n> 人潮冥冥之中 一眼望穿 日月去无踪  \n> 你我冥冥之中 心有灵犀 何止几万梦  \n> 忘情在这久违的重逢  \n> 天地冥冥之中 云烟奔涌 摩肩又接踵  \n> 万籁冥冥之中 不肯缄默 盛大到无穷  \n> 你我冥冥之中 对坐天涯 灵犀才一动  \n> 就相遇在咫尺的时空\n\n银临《枕万梦》", "description": "天亮了，扶苏不敌困意，早早地进入了梦乡。在失去引力的梦里，扶苏遇到了好多串漂浮着的数列，它们的长度都相等，而且都是美妙的等比数列！出于本能，扶苏想要把这些数列按照字典序排序，可是在梦里扶苏失去了思考的能力，请你来帮帮她！\n\n具体地，有 $n$ 个编号从 $1$ 到 $n$ 的数列 $a_1, a_2, \\dots a_n$，每个数列的长度均为 $m + 1$。第 $i$ 个数列 $a_i$ 满足递推式 $a_{i,j} = a_{i,j - 1} \\times i$，其中 $1 \\leq j \\leq m$。而扶苏会告诉你每个序列的首项 $a_{i,0}$，你需要帮助她把这些数列按字典序排序。", "inputFormat": "输入的第一行是两个整数，依次表示 $n$ 和 $m$。  \n接下来 $n$ 行，每行一个整数，第 $i$ 行的整数表示数列 $a_i$ 的首项 $a_{i,0}$。", "outputFormat": "输出一行 $n$ 个整数，第 $i$ 个整数表示字典序第 $i$ 小的数列的**编号**。", "hint": "### 样例 1 解释\n\n共有两个数列，每个数列的长度均为 $2+1=3$。\n\n对第一个数列 $a_1$：\n- 已知其首项 $a_{1,0} = 1$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=1,j = 1$ 可以得到 $a_{1,1} = a_{1,0} \\times 1 = 1$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=1,j = 2$ 可以得到 $a_{1,2} = a_{1,1} \\times 1= 1$。\n\n所以数列 $a_1$ 是 $1,1,1$。\n\n对第二个数列 $a_2$：\n- 已知其首项 $a_{2,0} = 2$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=2,j = 1$ 可以得到 $a_{2,1} = a_{2,0} \\times 2 = 2 \\times 2 = 4$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=2,j = 2$ 可以得到 $a_{2,2} = a_{2,1} \\times 2= 4 \\times 2 = 8$。\n\n所以数列 $a_2$ 是 $2,4,8$。\n\n比较字典序可得数列 $a_1$ 是字典序最小的数列。所以输出 $1$。\n\n### 样例 2 解释\n\n数列 $a_1$ 为 $1,1,1,1$，数列 $a_2$ 为 $-1, -2,-4,-8$。\n\n### 数据规模与约定\n本题共 $10$ 个测试点，各测试点信息如下表：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/08wnuome.png)\n\n特殊约定 A：保证 $a_{i,0}$ 均相等。  \n特殊约定 B：保证 $a_{i,0}$ 互不相等。\n\n对全部的测试点，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 10^9$，$1 \\leq |a_{i,0}| \\leq 10^9$。\n\n\n### 提示\n\n对两个数列 $a_i, a_j$，按如下方式比较其字典序：\n\n找到**最小的**满足 $a_{i,p} \\neq a_{j, p}$ 的下标 $p$，比较 $a_{i, p}$ 和 $a_{j, p}$ 的大小：\n\n- 如果 $a_{i,p} < a_{j, p}$，则称 $a_i$ 的字典序比 $a_j$ 的小。\n- 如果 $a_{i,p} > a_{j, p}$，则称 $a_i$ 的字典序比 $a_j$ 的大。\n\n可以证明，在本题的限制下，这样的 $p$ 一定存在。", "locale": "zh-CN"}}}
{"pid": "P9473", "type": "P", "difficulty": 3, "samples": [["3\n2\n2 3\n3\n2 3 4\n3\n3 8 35", "Yes\nNo\nYes"], ["见附加文件中的 C2.in", "见附加文件中的 C2.ans"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["O2优化", "洛谷月赛"], "title": "[yLOI2022] 西施江南", "background": "> 我晤江南面 如逢西施颜  \n> 清芬宜送岸 菡萏新雨前  \n> 皓腕分珠帘 珠露扬波珠玉敛  \n> 天然一段聚散 嫣然曾与言  \n> 平芜辙尚浅 无韵化湖田  \n> 林园虽工典 芳姿不可嵌  \n> 何人冠诗篇 重街杳杳重门掩  \n> 似有柔荑遮目 空谷足尖\n\n银临《西施江南》", "description": "给定 $n$ 个正整数 $a_1, a_2, a_3, \\dots a_n$，记 $g$ 是这些数的**最大公约数**，$l$ 是这些数的**最小公倍数**。请你判断 $l \\times g$ 是否等于 $a_1 \\times a_2 \\times \\dots \\times a_n$。", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n输入的第一行是一个整数 $T$，表示测试数据组数。对每组数据按如下格式输入：\n\n每组数据的第一行是一个整数，表示整数个数 $n$。  \n每组数据的第二行有 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "对每组数据依次输出一行一个字符串表示答案。\n\n- 若 $l \\times g = a_1 \\times a_2 \\times \\dots \\times a_n$，请输出 $\\texttt{Yes}$。\n- 否则，请输出 $\\texttt{No}$。", "hint": "### 数据规模与约定\n\n以下用 $N$ 表示单个测试点内 $n$ 的和，即 $N = \\sum n$。\n\n- 对 $12\\%$ 的数据，保证 $n = 2$。\n- 对 $36\\%$ 的数据，保证 $n \\leq 5$。\n- 对 $52\\%$ 的数据，保证 $N \\leq 1000$。\n- 对 $76\\%$ 的数据，保证 $N,a_i \\leq 10^5$。\n- 对 $100\\%$ 的数据，保证 $2 \\leq n,N \\leq 5 \\times 10^5$，$2 \\leq a_i \\leq 10^8$，$1 \\leq T \\leq 20$。\n\n### 提示\n\n**数据千万条，清空第一条**。  \n**多测不清空，爆零两行泪**。  \n**清空不规范，超时总相伴**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2022] 西施江南", "background": "> 我晤江南面 如逢西施颜  \n> 清芬宜送岸 菡萏新雨前  \n> 皓腕分珠帘 珠露扬波珠玉敛  \n> 天然一段聚散 嫣然曾与言  \n> 平芜辙尚浅 无韵化湖田  \n> 林园虽工典 芳姿不可嵌  \n> 何人冠诗篇 重街杳杳重门掩  \n> 似有柔荑遮目 空谷足尖\n\n银临《西施江南》", "description": "给定 $n$ 个正整数 $a_1, a_2, a_3, \\dots a_n$，记 $g$ 是这些数的**最大公约数**，$l$ 是这些数的**最小公倍数**。请你判断 $l \\times g$ 是否等于 $a_1 \\times a_2 \\times \\dots \\times a_n$。", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n输入的第一行是一个整数 $T$，表示测试数据组数。对每组数据按如下格式输入：\n\n每组数据的第一行是一个整数，表示整数个数 $n$。  \n每组数据的第二行有 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "对每组数据依次输出一行一个字符串表示答案。\n\n- 若 $l \\times g = a_1 \\times a_2 \\times \\dots \\times a_n$，请输出 $\\texttt{Yes}$。\n- 否则，请输出 $\\texttt{No}$。", "hint": "### 数据规模与约定\n\n以下用 $N$ 表示单个测试点内 $n$ 的和，即 $N = \\sum n$。\n\n- 对 $12\\%$ 的数据，保证 $n = 2$。\n- 对 $36\\%$ 的数据，保证 $n \\leq 5$。\n- 对 $52\\%$ 的数据，保证 $N \\leq 1000$。\n- 对 $76\\%$ 的数据，保证 $N,a_i \\leq 10^5$。\n- 对 $100\\%$ 的数据，保证 $2 \\leq n,N \\leq 5 \\times 10^5$，$2 \\leq a_i \\leq 10^8$，$1 \\leq T \\leq 20$。\n\n### 提示\n\n**数据千万条，清空第一条**。  \n**多测不清空，爆零两行泪**。  \n**清空不规范，超时总相伴**。", "locale": "zh-CN"}}}
{"pid": "P9474", "type": "P", "difficulty": 5, "samples": [["5 3\n1 2 3 4 5", "4"], ["6 3\n1 7 8 3 4 6", "4"], ["见附加文件中的 D3.in", "见附加文件中的 D3.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "线段树", "O2优化", "排序", "洛谷月赛", "双指针 two-pointer", "动态 DP"], "title": "[yLOI2022] 长安幻世绘", "background": "> 长安广月晴，留身影，琵琶行，酒客半醒。  \n> 问你看不清，朱纱帐，翠丝绦，飞天降临。  \n> 美人腰肢半倾璎珞脆，纤手独举琵琶跪，眸眼还生魅。  \n> 麝香抹唇酒更醉，醉灯彩越乱越美。\n\n——银临《长安幻世绘》", "description": "共有 $n$ 个彩灯从左到右排成一排，从左到右用 $1$  到 $n$ 编号，第 $i$ 个彩灯的亮度是 $a_i$。对 $1 \\leq i < n$，我们说 $i$ 号彩灯和 $i + 1$ 号彩灯是相邻的。\n\n我们保证这 $n$ 盏灯的亮度**互不相同**。\n\n一组彩灯的**和谐度**定义为这组彩灯中亮度最大和最小的两盏彩灯的亮度之差。\n\n扶苏想从这 $n$ 个彩灯中选出 $m$ 个**互不相邻**的彩灯作为一组，她希望这组彩灯的和谐度**尽可能小**。请你帮她求出这个最小值。\n\n形式化地，你需要在元素互不相同的数列 $a$ 中选出一个长度为 $m$ 的元素互不相邻的子列，使得子列的极差最小。\n", "inputFormat": "第一行是两个整数，依次表示彩灯的个数 $n$ 和挑出彩灯的个数 $m$。  \n第二行有 $n$ 个整数，第 $i$ 个整数表示彩灯 $i$ 的亮度 $a_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n只能选择第 $1, 3, 5$ 个彩灯。因为其他的选法都会导致有灯相邻。\n\n### 样例 2 解释\n\n可以选择第 $2, 4, 6$ 个彩灯，彩灯的亮度是 $7, 3, 6$，其极差是 $4$。\n\n### 数据规模与约定\n\n- 对 $12\\%$ 的数据，保证 $n \\leq 6$。\n- 对 $36\\%$ 的数据，保证 $n \\leq 100$。\n- 另有 $4\\%$ 的数据，保证 $m = \\lceil\\frac{n}{2}\\rceil$。\n- 另有 $12\\%$ 的数据，保证 $a_i$ 单调递增。\n- 对 $76\\%$ 的数据，保证 $n \\leq 10^3$。\n- 对 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq \\lceil\\frac{n}{2}\\rceil$，$1 \\leq a_i \\leq 10^9$，$a_i$ 互不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2022] 长安幻世绘", "background": "> 长安广月晴，留身影，琵琶行，酒客半醒。  \n> 问你看不清，朱纱帐，翠丝绦，飞天降临。  \n> 美人腰肢半倾璎珞脆，纤手独举琵琶跪，眸眼还生魅。  \n> 麝香抹唇酒更醉，醉灯彩越乱越美。\n\n——银临《长安幻世绘》", "description": "共有 $n$ 个彩灯从左到右排成一排，从左到右用 $1$  到 $n$ 编号，第 $i$ 个彩灯的亮度是 $a_i$。对 $1 \\leq i < n$，我们说 $i$ 号彩灯和 $i + 1$ 号彩灯是相邻的。\n\n我们保证这 $n$ 盏灯的亮度**互不相同**。\n\n一组彩灯的**和谐度**定义为这组彩灯中亮度最大和最小的两盏彩灯的亮度之差。\n\n扶苏想从这 $n$ 个彩灯中选出 $m$ 个**互不相邻**的彩灯作为一组，她希望这组彩灯的和谐度**尽可能小**。请你帮她求出这个最小值。\n\n形式化地，你需要在元素互不相同的数列 $a$ 中选出一个长度为 $m$ 的元素互不相邻的子列，使得子列的极差最小。\n", "inputFormat": "第一行是两个整数，依次表示彩灯的个数 $n$ 和挑出彩灯的个数 $m$。  \n第二行有 $n$ 个整数，第 $i$ 个整数表示彩灯 $i$ 的亮度 $a_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n只能选择第 $1, 3, 5$ 个彩灯。因为其他的选法都会导致有灯相邻。\n\n### 样例 2 解释\n\n可以选择第 $2, 4, 6$ 个彩灯，彩灯的亮度是 $7, 3, 6$，其极差是 $4$。\n\n### 数据规模与约定\n\n- 对 $12\\%$ 的数据，保证 $n \\leq 6$。\n- 对 $36\\%$ 的数据，保证 $n \\leq 100$。\n- 另有 $4\\%$ 的数据，保证 $m = \\lceil\\frac{n}{2}\\rceil$。\n- 另有 $12\\%$ 的数据，保证 $a_i$ 单调递增。\n- 对 $76\\%$ 的数据，保证 $n \\leq 10^3$。\n- 对 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq \\lceil\\frac{n}{2}\\rceil$，$1 \\leq a_i \\leq 10^9$，$a_i$ 互不相同。", "locale": "zh-CN"}}}
{"pid": "P9475", "type": "P", "difficulty": 6, "samples": [["2 3 3 4", "760000008"], ["314159265 358979323 84626433832795028 841971693", "465094894"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "组合数学", "二项式定理", "概率论", "期望"], "title": "[_-0 A] 考试", "background": "小 $\\mathfrak{g}$ 参加一场考试时，不小心把答题卡填反了。", "description": "答题卡有 $n (1 \\le n \\le 10^9)$ 行，$m (1 \\le m \\le 10^9)$ 列，共 $nm$ 道题，**从左到右，从上到下，横向排列**。\n\n每道题有 $c (4 \\le c \\le 10^9)$ 个选项。其中，前 $k(0 \\le k \\le nm)$ 道题为单选题，**有且仅有一个**正确选项；后 $nm - k$ 道题为多选题，正确选项个数**严格大于** $1$ 且**严格小于** $c$。\n\n小 $\\mathfrak{g}$ 正确地回答了所有题，但是她不小心把答题卡的方向看反了，从而她的答案排列方式为**从上到下，从左到右，纵向排列**。\n\n题目的评分方式为：选项完全正确得 $1$ 分，多选或错选得 $0$ 分，漏选按比例给分。\n\n形式化地说，若 $A$ 为某道题正确答案选项的集合，$B$ 为答题卡上选项的集合（均为 $\\{1,2,3,\\cdots,c\\}$ 的子集），则该题得分为：\n\n$$\\begin{cases}\\frac{\\lvert B \\rvert}{\\lvert A \\rvert}&\\text{if\\quad}\nB\\sube A\\\\0&\\text{otherwise}\\end{cases}$$\n\n小 $\\mathfrak{g}$ 忘记考试的正确答案是什么了，于是她去问小 $\\mathfrak{f}$，如果考试的正确答案在合法范围内等概率随机，那么自己期望得分是多少。由于结果可能很大，她只需要知道结果对 $10^9+7$ 取模的值。\n\n**题目保证 $c$ 和 $2^c-c-2$ 都不是 $10^9+7$ 的倍数。**\n\n\n但是小 $\\mathfrak{f}$ 也不会，所以他来求助万能的你。", "inputFormat": "一行，四个用空格分隔的整数 $n,m,k,c$，分别表示答题卡的行数，列数，单选题的数量和每道题的选项个数。", "outputFormat": "一行，一个整数，表示期望得分，对 $10^9+7$ 取模。", "hint": "**样例 $1$ 解释：**\n\n得分的期望为 $\\frac{67}{25}$，对 $10^9+7$ 取模为 $760000008$。\n\n一种可能的考试的正确答案依次为：\n\n$\\texttt{C,D,B,AD,ABD,BC}$\n\n那么答题卡上应该填写：\n\n| $\\texttt{C}$ | $\\texttt{D}$ | $\\texttt{B}$ |\n| :----------: | :----------: | :----------: |\n| $\\texttt{AD}$ | $\\texttt{ABD}$ | $\\texttt{BC}$ |\n\n实际填写：\n\n| $\\texttt{C}$ | $\\texttt{B}$ | $\\texttt{ABD}$ |\n| :----------: | :----------: | :----------: |\n| $\\texttt{D}$ | $\\texttt{AD}$ | $\\texttt{BC}$ |\n\n答案为 $\\texttt{C}$，填写 $\\texttt{C}$，得 $1$ 分。\n\n答案为 $\\texttt{D}$，填写 $\\texttt{B}$，得 $0$ 分。\n\n答案为 $\\texttt{B}$，填写 $\\texttt{ABD}$，得 $0$ 分。\n\n答案为 $\\texttt{AD}$，填写 $\\texttt{D}$，得 $\\frac{1}{2}$ 分。\n\n答案为 $\\texttt{ABD}$，填写 $\\texttt{AD}$，得 $\\frac{2}{3}$ 分。\n\n答案为 $\\texttt{BC}$，填写 $\\texttt{BC}$，得 $1$ 分。\n\n综上，这种情况下，考试得分为：\n\n$1+0+0+\\frac{1}{2}+\\frac{2}{3}+1=\n\\frac{19}{6}$ 分。\n\n**本题采用捆绑测试且使用子任务依赖。**\n\n| 编号 | 分值 | $n,m\\le$ | $c\\le$ | 性质 | 依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $0$ | N/A| N/A | 样例 | 无 |\n| $1$ | $5$ | $10^9$ | $10^9$ | A | 无 |\n| $2$ | $5$ | $2$ | $4$ | 无 | 无 |\n| $3$ | $20$ | $10^3$ | $10$ | 无 | $2$ |\n| $4$ | $15$ | $10^9$ | $10$ | 无 | $2,3$ |\n| $5$ | $15$ | $10^3$ | $10^3$ | 无 | $2,3$ |\n| $6$ | $15$ | $10^3$ | $10^5$ | 无 | $2,3,5$ |\n| $7$ | $10$ | $10^3$ | $10^9$ | B | 无 |\n| $8$ | $10$ | $10^3$ | $10^9$ | 无 | $2,3,5,6,7$ |\n| $9$ | $5$ | $10^9$ | $10^9$ | 无 | $0,1,2,3,4,5,6,7,8$ |\n\n特殊性质 A：$n=1$ 或 $m=1$\n\n特殊性质 B：$k=nm-2$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[_-0 A] 考试", "background": "小 $\\mathfrak{g}$ 参加一场考试时，不小心把答题卡填反了。", "description": "答题卡有 $n (1 \\le n \\le 10^9)$ 行，$m (1 \\le m \\le 10^9)$ 列，共 $nm$ 道题，**从左到右，从上到下，横向排列**。\n\n每道题有 $c (4 \\le c \\le 10^9)$ 个选项。其中，前 $k(0 \\le k \\le nm)$ 道题为单选题，**有且仅有一个**正确选项；后 $nm - k$ 道题为多选题，正确选项个数**严格大于** $1$ 且**严格小于** $c$。\n\n小 $\\mathfrak{g}$ 正确地回答了所有题，但是她不小心把答题卡的方向看反了，从而她的答案排列方式为**从上到下，从左到右，纵向排列**。\n\n题目的评分方式为：选项完全正确得 $1$ 分，多选或错选得 $0$ 分，漏选按比例给分。\n\n形式化地说，若 $A$ 为某道题正确答案选项的集合，$B$ 为答题卡上选项的集合（均为 $\\{1,2,3,\\cdots,c\\}$ 的子集），则该题得分为：\n\n$$\\begin{cases}\\frac{\\lvert B \\rvert}{\\lvert A \\rvert}&\\text{if\\quad}\nB\\sube A\\\\0&\\text{otherwise}\\end{cases}$$\n\n小 $\\mathfrak{g}$ 忘记考试的正确答案是什么了，于是她去问小 $\\mathfrak{f}$，如果考试的正确答案在合法范围内等概率随机，那么自己期望得分是多少。由于结果可能很大，她只需要知道结果对 $10^9+7$ 取模的值。\n\n**题目保证 $c$ 和 $2^c-c-2$ 都不是 $10^9+7$ 的倍数。**\n\n\n但是小 $\\mathfrak{f}$ 也不会，所以他来求助万能的你。", "inputFormat": "一行，四个用空格分隔的整数 $n,m,k,c$，分别表示答题卡的行数，列数，单选题的数量和每道题的选项个数。", "outputFormat": "一行，一个整数，表示期望得分，对 $10^9+7$ 取模。", "hint": "**样例 $1$ 解释：**\n\n得分的期望为 $\\frac{67}{25}$，对 $10^9+7$ 取模为 $760000008$。\n\n一种可能的考试的正确答案依次为：\n\n$\\texttt{C,D,B,AD,ABD,BC}$\n\n那么答题卡上应该填写：\n\n| $\\texttt{C}$ | $\\texttt{D}$ | $\\texttt{B}$ |\n| :----------: | :----------: | :----------: |\n| $\\texttt{AD}$ | $\\texttt{ABD}$ | $\\texttt{BC}$ |\n\n实际填写：\n\n| $\\texttt{C}$ | $\\texttt{B}$ | $\\texttt{ABD}$ |\n| :----------: | :----------: | :----------: |\n| $\\texttt{D}$ | $\\texttt{AD}$ | $\\texttt{BC}$ |\n\n答案为 $\\texttt{C}$，填写 $\\texttt{C}$，得 $1$ 分。\n\n答案为 $\\texttt{D}$，填写 $\\texttt{B}$，得 $0$ 分。\n\n答案为 $\\texttt{B}$，填写 $\\texttt{ABD}$，得 $0$ 分。\n\n答案为 $\\texttt{AD}$，填写 $\\texttt{D}$，得 $\\frac{1}{2}$ 分。\n\n答案为 $\\texttt{ABD}$，填写 $\\texttt{AD}$，得 $\\frac{2}{3}$ 分。\n\n答案为 $\\texttt{BC}$，填写 $\\texttt{BC}$，得 $1$ 分。\n\n综上，这种情况下，考试得分为：\n\n$1+0+0+\\frac{1}{2}+\\frac{2}{3}+1=\n\\frac{19}{6}$ 分。\n\n**本题采用捆绑测试且使用子任务依赖。**\n\n| 编号 | 分值 | $n,m\\le$ | $c\\le$ | 性质 | 依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $0$ | N/A| N/A | 样例 | 无 |\n| $1$ | $5$ | $10^9$ | $10^9$ | A | 无 |\n| $2$ | $5$ | $2$ | $4$ | 无 | 无 |\n| $3$ | $20$ | $10^3$ | $10$ | 无 | $2$ |\n| $4$ | $15$ | $10^9$ | $10$ | 无 | $2,3$ |\n| $5$ | $15$ | $10^3$ | $10^3$ | 无 | $2,3$ |\n| $6$ | $15$ | $10^3$ | $10^5$ | 无 | $2,3,5$ |\n| $7$ | $10$ | $10^3$ | $10^9$ | B | 无 |\n| $8$ | $10$ | $10^3$ | $10^9$ | 无 | $2,3,5,6,7$ |\n| $9$ | $5$ | $10^9$ | $10^9$ | 无 | $0,1,2,3,4,5,6,7,8$ |\n\n特殊性质 A：$n=1$ 或 $m=1$\n\n特殊性质 B：$k=nm-2$", "locale": "zh-CN"}}}
{"pid": "P9476", "type": "P", "difficulty": 6, "samples": [["0 5 0\n9\n9\n3\n2\n3\n1 2 7 6\n1 3 8 5\n1 4 6 5\n2 5 9 9", "2262"], ["0 10 86\n50\n6\n84\n50\n83\n67\n93\n55\n93\n70\n1 2 94 7\n1 3 97 4\n1 10 98 12\n2 4 89 1\n2 7 98 1\n4 5 99 13\n4 6 96 5\n5 8 95 5\n5 9 97 7", "33600416"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "O2优化", "动态规划优化", "斜率优化", "树形 DP"], "title": "[_-0 B] 地铁", "background": "小 $\\mathfrak{f}$ 的家乡 A 市最近开通了地铁。", "description": "A 市共有 $n (2\\le n \\le 10^5)$ 个居民点，第 $i$ 个居民点的人口为 $s_i (1 \\le s_i \\le 10^7)$，同时有 $n-1$ 条双向道路，构成一棵树，第 $i $ 条双向道路连接居民点 $u_i$ 和 $v_i$，人步行走过这条道路需要 $w_i (1 \\le w_i\\le 10^7)$ 的时间。\n\n现 A 市政府决定开通一条地铁线路。地铁线路是树上的一条简单路径，若路径经过第 $i$ 条道路，那么地铁从这条道路下方经过只需要 $w_i^{\\prime} (1 \\le w_i^{\\prime} \\le 10^7)$ 的时间，同时，地铁的进出站**共**需要花费 $t (0 \\le t \\le 10^7)$ 的时间。\n\n已知，若一个人从一个居民点前往另一个居民点，如果这条路径与地铁经过的路径有至少一条公共**边**，那么就**一定**会选择**尽可能多地**乘坐地铁。如果没有公共边，那么就会选择完全步行。**题目保证对于第 $i$ 条道路有 $w_i^{\\prime} \\le w_i - t$。** 我们认为，如果两个居民点的人口的乘积越大，那么有人想要在它们之间流动的可能性也越大。\n\n现在，小 $\\mathfrak{f}$ 想知道在所有 $\\frac{n(n-1)}{2}$ 种建造地铁线路的方案中，$\\sum_{a=1}^{n-1}\\sum_{b=a+1}^{n}(s_a \\cdot s_b \\cdot d_{a,b})$ 的最小值，其中 $d_{a,b}$ 表示从居民点 $a$ 前往 $b$（或者从 $b$ 前往 $a$，两者是相等的）所需要的时间。\n\n但是他不会，所以他来求助万能的你。", "inputFormat": "第一行，三个用空格分隔的整数 $id,n,t$，表示子任务编号，居民点个数和进出站所需要花费的时间。\n\n接下来 $n$ 行，每行一个整数 $s_i$，表示每个居民点的人口。\n\n接下来 $n - 1$ 行，每行四个用空格分隔的整数 $u_i,v_i,w_i,w_i^{\\prime}$，表示每条道路的两个端点，步行所需时间和地铁所需时间。", "outputFormat": "一行，一个整数，表示所求的最小值。\n\n答案可能超过 $64$ 位整形表示范围，您可以使用 `__int128` 类型，其表示范围为 $[-2^{127},2^{127}-1]$。\n\n以下为 `__int128` 类型的输出模板：\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n__int128 ans;\nint main() {\n    /* Your code here */\n    string str;\n    if (!ans) {\n        str = \"0\";\n    } else {\n        str = \"\";\n        while (ans) {\n            str = ((char)(48 + ans % 10)) + str;\n            ans /= 10;\n        }\n    }\n    cout << str << endl;\n    return 0;\n}\n```", "hint": "**样例 $1$ 解释：**\n\n修建地铁前如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3oh0y5mn.png)\n\n一种最优的修建地铁的方案为从 $2$ 到 $3$ 修建地铁。如下图所示（实线表示修建了地铁）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ian9c6po.png)\n\n从 $1$ 到 $2$ 经过地铁，所需时间为：$6+0=6$，对答案的贡献为：$9\\times9\\times6=486$。\n\n从 $1$ 到 $3$ 经过地铁，所需时间为：$5+0=5$，对答案的贡献为：$9\\times3\\times5=135$。\n\n从 $1$ 到 $4$ 不经过地铁，所需时间为：$6$，对答案的贡献为：$9\\times2\\times6=108$。\n\n从 $1$ 到 $5$ 经过地铁，所需时间为：$6+9+0=15$，对答案的贡献为：$9\\times3\\times15=405$。\n\n从 $2$ 到 $3$ 经过地铁，所需时间为：$6+5+0=11$，对答案的贡献为：$9\\times3\\times11=297$。\n\n从 $2$ 到 $4$ 经过地铁，所需时间为：$6+6+0=12$，对答案的贡献为：$9\\times2\\times12=216$。\n\n从 $2$ 到 $5$ 不经过地铁，所需时间为：$9$，对答案的贡献为：$9\\times3\\times9=243$。\n\n从 $3$ 到 $4$ 经过地铁，所需时间为：$5+6+0=11$，对答案的贡献为：$3\\times2\\times11=66$。\n\n从 $3$ 到 $5$ 经过地铁，所需时间为：$5+6+9+0=20$，对答案的贡献为：$3\\times3\\times20=180$。\n\n从 $4$ 到 $5$ 经过地铁，所需时间为：$6+6+9+0=21$，对答案的贡献为：$2\\times3\\times21=126$。\n\n综上，答案为：$486+135+108+405+297+216+243+66+180+126=2262$。\n\n可以证明不存在更优的修建地铁的方案。\n\n**本题采用捆绑测试且使用子任务依赖。**\n\n| 编号 | 分值 | $n \\le$ | 性质 | 依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $0$ | N/A | 样例 | 无 |\n| $1$ | $5$ | $10$ | 无 | 无 |\n| $2$ | $5$ | $500$ | 无 | $1$ |\n| $3$ | $10$ | $5000$ | 无 | $1,2$ |\n| $4$ | $30$ | $10^5$ | A | 无 |\n| $5$ | $5$ | $10^5$ | B | 无 |\n| $6$ | $20$ | $10^5$ | C | 无 |\n| $7$ | $15$ | $10^5$ | D | 无 |\n| $8$ | $10$ | $10^5$ | 无 | $0,1,2,3,4,5,6,7$ |\n\n特殊性质 A：$t=0$\n\n特殊性质 B：$u_i=i,v_i=i+1$\n\n特殊性质 C：每一个点的度数都不超过 $100$\n\n特殊性质 D：$u_i=1,v_i=i+1$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[_-0 B] 地铁", "background": "小 $\\mathfrak{f}$ 的家乡 A 市最近开通了地铁。", "description": "A 市共有 $n (2\\le n \\le 10^5)$ 个居民点，第 $i$ 个居民点的人口为 $s_i (1 \\le s_i \\le 10^7)$，同时有 $n-1$ 条双向道路，构成一棵树，第 $i $ 条双向道路连接居民点 $u_i$ 和 $v_i$，人步行走过这条道路需要 $w_i (1 \\le w_i\\le 10^7)$ 的时间。\n\n现 A 市政府决定开通一条地铁线路。地铁线路是树上的一条简单路径，若路径经过第 $i$ 条道路，那么地铁从这条道路下方经过只需要 $w_i^{\\prime} (1 \\le w_i^{\\prime} \\le 10^7)$ 的时间，同时，地铁的进出站**共**需要花费 $t (0 \\le t \\le 10^7)$ 的时间。\n\n已知，若一个人从一个居民点前往另一个居民点，如果这条路径与地铁经过的路径有至少一条公共**边**，那么就**一定**会选择**尽可能多地**乘坐地铁。如果没有公共边，那么就会选择完全步行。**题目保证对于第 $i$ 条道路有 $w_i^{\\prime} \\le w_i - t$。** 我们认为，如果两个居民点的人口的乘积越大，那么有人想要在它们之间流动的可能性也越大。\n\n现在，小 $\\mathfrak{f}$ 想知道在所有 $\\frac{n(n-1)}{2}$ 种建造地铁线路的方案中，$\\sum_{a=1}^{n-1}\\sum_{b=a+1}^{n}(s_a \\cdot s_b \\cdot d_{a,b})$ 的最小值，其中 $d_{a,b}$ 表示从居民点 $a$ 前往 $b$（或者从 $b$ 前往 $a$，两者是相等的）所需要的时间。\n\n但是他不会，所以他来求助万能的你。", "inputFormat": "第一行，三个用空格分隔的整数 $id,n,t$，表示子任务编号，居民点个数和进出站所需要花费的时间。\n\n接下来 $n$ 行，每行一个整数 $s_i$，表示每个居民点的人口。\n\n接下来 $n - 1$ 行，每行四个用空格分隔的整数 $u_i,v_i,w_i,w_i^{\\prime}$，表示每条道路的两个端点，步行所需时间和地铁所需时间。", "outputFormat": "一行，一个整数，表示所求的最小值。\n\n答案可能超过 $64$ 位整形表示范围，您可以使用 `__int128` 类型，其表示范围为 $[-2^{127},2^{127}-1]$。\n\n以下为 `__int128` 类型的输出模板：\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n__int128 ans;\nint main() {\n    /* Your code here */\n    string str;\n    if (!ans) {\n        str = \"0\";\n    } else {\n        str = \"\";\n        while (ans) {\n            str = ((char)(48 + ans % 10)) + str;\n            ans /= 10;\n        }\n    }\n    cout << str << endl;\n    return 0;\n}\n```", "hint": "**样例 $1$ 解释：**\n\n修建地铁前如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3oh0y5mn.png)\n\n一种最优的修建地铁的方案为从 $2$ 到 $3$ 修建地铁。如下图所示（实线表示修建了地铁）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ian9c6po.png)\n\n从 $1$ 到 $2$ 经过地铁，所需时间为：$6+0=6$，对答案的贡献为：$9\\times9\\times6=486$。\n\n从 $1$ 到 $3$ 经过地铁，所需时间为：$5+0=5$，对答案的贡献为：$9\\times3\\times5=135$。\n\n从 $1$ 到 $4$ 不经过地铁，所需时间为：$6$，对答案的贡献为：$9\\times2\\times6=108$。\n\n从 $1$ 到 $5$ 经过地铁，所需时间为：$6+9+0=15$，对答案的贡献为：$9\\times3\\times15=405$。\n\n从 $2$ 到 $3$ 经过地铁，所需时间为：$6+5+0=11$，对答案的贡献为：$9\\times3\\times11=297$。\n\n从 $2$ 到 $4$ 经过地铁，所需时间为：$6+6+0=12$，对答案的贡献为：$9\\times2\\times12=216$。\n\n从 $2$ 到 $5$ 不经过地铁，所需时间为：$9$，对答案的贡献为：$9\\times3\\times9=243$。\n\n从 $3$ 到 $4$ 经过地铁，所需时间为：$5+6+0=11$，对答案的贡献为：$3\\times2\\times11=66$。\n\n从 $3$ 到 $5$ 经过地铁，所需时间为：$5+6+9+0=20$，对答案的贡献为：$3\\times3\\times20=180$。\n\n从 $4$ 到 $5$ 经过地铁，所需时间为：$6+6+9+0=21$，对答案的贡献为：$2\\times3\\times21=126$。\n\n综上，答案为：$486+135+108+405+297+216+243+66+180+126=2262$。\n\n可以证明不存在更优的修建地铁的方案。\n\n**本题采用捆绑测试且使用子任务依赖。**\n\n| 编号 | 分值 | $n \\le$ | 性质 | 依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $0$ | N/A | 样例 | 无 |\n| $1$ | $5$ | $10$ | 无 | 无 |\n| $2$ | $5$ | $500$ | 无 | $1$ |\n| $3$ | $10$ | $5000$ | 无 | $1,2$ |\n| $4$ | $30$ | $10^5$ | A | 无 |\n| $5$ | $5$ | $10^5$ | B | 无 |\n| $6$ | $20$ | $10^5$ | C | 无 |\n| $7$ | $15$ | $10^5$ | D | 无 |\n| $8$ | $10$ | $10^5$ | 无 | $0,1,2,3,4,5,6,7$ |\n\n特殊性质 A：$t=0$\n\n特殊性质 B：$u_i=i,v_i=i+1$\n\n特殊性质 C：每一个点的度数都不超过 $100$\n\n特殊性质 D：$u_i=1,v_i=i+1$", "locale": "zh-CN"}}}
{"pid": "P9477", "type": "P", "difficulty": 7, "samples": [["100 0 10\n\n>\n\n<\n\n=", "\n50\n\n25\n\n37"], ["100 10 10\n\n<\n\n<\n\n=", "\n50\n\n25\n\n37"], ["100 0 2\n\n>\n\n!", "\n50\n\n25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 10000, 10000, 10000, 10000, 10000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["交互题", "Special Judge", "O2优化", "信息论", "概率论"], "title": "[_-0 C] 猜数", "background": "小 $\\mathfrak{f}$ 和小 $\\mathfrak{g}$ 在玩猜数游戏，但是因为风声太大，他们听不清楚对方说的话……", "description": "评测机在区间 $[1,n]$ 中等概率随机地选择一个整数 $x$，你的任务是猜测这个数。\n\n你可以每次给出一个 $[1,n]$ 中的整数 $y$，询问 $y$ 和 $x$ 的大小关系。你最多可以询问 $q$ 次。\n\n但是，由于某些原因，评测机有 $p\\%$ 的概率会出错。\n\n具体地说：\n\n- 如果 $y=x$，那么评测机返回 `=`。\n- 如果 $y\\ne x$，且当前已经是第 $q$ 次询问，那么评测机返回 `!`。\n- **得到以上两种结果后，你应当停止询问。**\n- 如果 $y>x$，那么评测机有 $(100-p)\\%$ 的概率返回 `>`，有 $p\\%$ 的概率返回 `<`。\n- 如果 $y<x$，那么评测机有 $(100-p)\\%$ 的概率返回 `<`，有 $p\\%$ 的概率返回 `>`。\n\n每次询问，你需要向**标准输出**输出一个 $[1,n]$ 中的整数，**然后清空缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n然后你需要从**标准输入**中输入一个字符，代表评测机返回的结果。", "inputFormat": "开始询问之前，一行，三个用空格分隔的整数 $n,p,q$。\n\n对于每一次询问，一行，一个字符，一定是 `=`，`!`，`>`，`<` 四者之一。", "outputFormat": "对于每一次询问，一行，一个 $[1,n]$ 中的整数。", "hint": "**样例 $1$ 解释：**\n\n此时该测试点的状态为 `AC`。\n\n**样例 $2$ 解释：**\n\n$x=37,y=50$ 时，$y>x$，有 $10\\%$ 的概率输出 `<`，恰好输出了 `<`。\n\n**样例 $3$ 解释：**\n\n此时该测试点的状态为 `WA`。\n\n**本题采用捆绑测试。**\n\n每个 Subtask 下设有 $5$ 个测试点，你只需通过其中**至少 $3$ 个**测试点即可得到该 Subtask 对应的分数。\n\n本题不使用子任务依赖。\n\n对于所有数据，$n=10^{18}$。\n\n| 编号 | 分值 | $p=$ | $q=$ | 时限 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $5$ | $0$ | $60$ | $\\texttt{1s}$ |\n| $1$ | $10$ | $10$ | $500$ | $\\texttt{1s}$ |\n| $2$ | $10$ | $25$ | $2000$ | $\\texttt{1s}$ |\n| $3$ | $15$ | $25$ | $1000$ | $\\texttt{1s}$ |\n| $4$ | $20$ | $25$ | $700$ | $\\texttt{1s}$ |\n| $5$ | $10$ | $25$ | $400$ | $\\texttt{1s}$ |\n| $6$ | $10$ | $40$ | $2500$ | $\\texttt{1s}$ |\n| $7$ | $10$ | $45$ | $10000$ | $\\texttt{1s}$ |\n| $8$ | $5$ | $48$ | $62500$ | $\\texttt{3s}$ |\n| $9$ | $5$ | $49$ | $250000$ | $\\texttt{10s}$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[_-0 C] 猜数", "background": "小 $\\mathfrak{f}$ 和小 $\\mathfrak{g}$ 在玩猜数游戏，但是因为风声太大，他们听不清楚对方说的话……", "description": "评测机在区间 $[1,n]$ 中等概率随机地选择一个整数 $x$，你的任务是猜测这个数。\n\n你可以每次给出一个 $[1,n]$ 中的整数 $y$，询问 $y$ 和 $x$ 的大小关系。你最多可以询问 $q$ 次。\n\n但是，由于某些原因，评测机有 $p\\%$ 的概率会出错。\n\n具体地说：\n\n- 如果 $y=x$，那么评测机返回 `=`。\n- 如果 $y\\ne x$，且当前已经是第 $q$ 次询问，那么评测机返回 `!`。\n- **得到以上两种结果后，你应当停止询问。**\n- 如果 $y>x$，那么评测机有 $(100-p)\\%$ 的概率返回 `>`，有 $p\\%$ 的概率返回 `<`。\n- 如果 $y<x$，那么评测机有 $(100-p)\\%$ 的概率返回 `<`，有 $p\\%$ 的概率返回 `>`。\n\n每次询问，你需要向**标准输出**输出一个 $[1,n]$ 中的整数，**然后清空缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n然后你需要从**标准输入**中输入一个字符，代表评测机返回的结果。", "inputFormat": "开始询问之前，一行，三个用空格分隔的整数 $n,p,q$。\n\n对于每一次询问，一行，一个字符，一定是 `=`，`!`，`>`，`<` 四者之一。", "outputFormat": "对于每一次询问，一行，一个 $[1,n]$ 中的整数。", "hint": "**样例 $1$ 解释：**\n\n此时该测试点的状态为 `AC`。\n\n**样例 $2$ 解释：**\n\n$x=37,y=50$ 时，$y>x$，有 $10\\%$ 的概率输出 `<`，恰好输出了 `<`。\n\n**样例 $3$ 解释：**\n\n此时该测试点的状态为 `WA`。\n\n**本题采用捆绑测试。**\n\n每个 Subtask 下设有 $5$ 个测试点，你只需通过其中**至少 $3$ 个**测试点即可得到该 Subtask 对应的分数。\n\n本题不使用子任务依赖。\n\n对于所有数据，$n=10^{18}$。\n\n| 编号 | 分值 | $p=$ | $q=$ | 时限 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $5$ | $0$ | $60$ | $\\texttt{1s}$ |\n| $1$ | $10$ | $10$ | $500$ | $\\texttt{1s}$ |\n| $2$ | $10$ | $25$ | $2000$ | $\\texttt{1s}$ |\n| $3$ | $15$ | $25$ | $1000$ | $\\texttt{1s}$ |\n| $4$ | $20$ | $25$ | $700$ | $\\texttt{1s}$ |\n| $5$ | $10$ | $25$ | $400$ | $\\texttt{1s}$ |\n| $6$ | $10$ | $40$ | $2500$ | $\\texttt{1s}$ |\n| $7$ | $10$ | $45$ | $10000$ | $\\texttt{1s}$ |\n| $8$ | $5$ | $48$ | $62500$ | $\\texttt{3s}$ |\n| $9$ | $5$ | $49$ | $250000$ | $\\texttt{10s}$ |", "locale": "zh-CN"}}}
{"pid": "P9478", "type": "P", "difficulty": 5, "samples": [["0\n5 5 3\n1 1 3 5 3\n2 3 1 3 5\n3 1 1 5 5\n", "13\n"], ["见附件中的 color/color2.in。", "见附件中的 color/color2.ans。"], ["见附件中的 color/color3.in。", "见附件中的 color/color3.ans。"], ["见附件中的 color/color4.in。", "见附件中的 color/color4.ans。"], ["见附件中的 color/color5.in。", "见附件中的 color/color5.ans。"], ["见附件中的 color/color6.in。", "见附件中的 color/color6.ans。"], ["见附件中的 color/color7.in。", "见附件中的 color/color7.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "2023", "NOI", "离散化", "O2优化", "扫描线"], "title": "[NOI2023] 方格染色", "background": null, "description": "有一个 $n$ 列 $m$ 行的棋盘，共 $n \\times m$ 个方格，我们约定行、列均从 $1$ 开始标号，且第 $i$ 列、第 $j$ 行的方格坐标记为 $(i, j)$。初始时，所有方格的颜色均为白色。现在，你要对这个棋盘进行 $q$ 次染色操作。\n\n染色操作分为三种，分别为：\n\n1. 将一条横线染为黑色。具体地说，给定两个方格 $(x_1, y_1)$ 和 $(x_2, y_2)$，保证 $x_1 \\le x_2$，$y_1 = y_2$，将这两个方格之间的所有方格（包括这两个方格）染为黑色。\n2. 将一条竖线染为黑色。具体地说，给定两个方格 $(x_1, y_1)$ 和 $(x_2, y_2)$，保证 $x_1 = x_2$，$y_1 \\le y_2$，将这两个方格之间的所有方格（包括这两个方格）染为黑色。\n3. 将一条斜线染为黑色。具体地说，给定两个方格 $(x_1, y_1)$ 和 $(x_2, y_2)$，保证 $x_1 \\le x_2$，$x_2 - x_1 = y_2 - y_1$，将这两个方格之间斜线上所有形如 $(x_1 + i, y_1 + i)$（$0 \\le i \\le x_2 - x_1$）的方格染为黑色。**这种染色操作发生的次数不超过 $5$ 次。**\n\n现在你想知道，在经过 $q$ 次染色后，棋盘上有多少个黑色的方格。", "inputFormat": "输入的第一行包含一个整数 $c$，表示测试点编号。$c = 0$ 表示该测试点为样例。\n\n输入的第二行包含三个正整数 $n, m, q$，分别表示棋盘的列、行和染色操作的次数。\n\n接下来 $q$ 行，每行输入五个正整数 $t, x_1, y_1, x_2, y_2$，其中 $t = 1$ 表示第一种染色操作，$t = 2$ 表示第二种染色操作，$t = 3$ 表示第三种染色操作。$x_1, y_1, x_2, y_2$ 表示染色操作的四个参数。", "outputFormat": "输出一行包含一个整数，表示棋盘上被染为黑色的方格的数量。", "hint": "**【样例解释 #1】**\n\n在这组样例中，我们一共做了三次染色操作，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ojo6cs1.png)\n\n第一次操作时，将 $(1, 3), (2, 3), (3, 3), (4, 3), (5, 3)$ 染为黑色。\n\n第二次操作时，将 $(3, 1), (3, 2), (3, 3), (3, 4), (3, 5)$ 染为黑色。\n\n第三次操作时，将 $(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)$ 染为黑色。\n\n**【样例 #2】**\n\n这个样例满足测试点 $1 \\sim 5$ 的条件限制。\n\n**【样例 #3】**\n\n这个样例满足测试点 $6 \\sim 9$ 的条件限制。\n\n**【样例 #4】**\n\n这个样例满足测试点 $10 \\sim 13$ 的条件限制。\n\n**【样例 #5】**\n\n这个样例满足测试点 $14 \\sim 17$ 的条件限制。\n\n**【样例 #6】**\n\n这个样例满足测试点 $18 \\sim 19$ 的条件限制。\n\n**【样例 #7】**\n\n这个样例满足测试点 $20$ 的条件限制。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1 \\le n, m \\le 10 ^ 9$，$1 \\le q \\le 10 ^ 5$，$1 \\le x_1, x_2 \\le n$，$1 \\le y_1, y_2 \\le m$，**且最多有 $5$ 次第三种染色操作**。\n\n::cute-table{tuack}\n\n|测试点编号|$n, m \\le$|$q \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1 \\sim 5$|$300$|$300$|无|\n|$6 \\sim 9$|$10 ^ 5$|$2,000$|无|\n|$10 \\sim 13$|$10 ^ 5$|$10 ^ 5$|A|\n|$14 \\sim 17$|$10 ^ 5$|$10 ^ 5$|B|\n|$18 \\sim 19$|$10 ^ 5$|$10 ^ 5$|无|\n|$20$|$10 ^ 9$|$10 ^ 5$|无|\n\n特殊性质 A：保证只有第一种染色操作。\n\n特殊性质 B：保证只有第一种和第二种染色操作。\n\nUpdate on 2023-08-04: 更新一组 Hack 数据，该 Hack 数据的 $c = 0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2023] 方格染色", "background": null, "description": "有一个 $n$ 列 $m$ 行的棋盘，共 $n \\times m$ 个方格，我们约定行、列均从 $1$ 开始标号，且第 $i$ 列、第 $j$ 行的方格坐标记为 $(i, j)$。初始时，所有方格的颜色均为白色。现在，你要对这个棋盘进行 $q$ 次染色操作。\n\n染色操作分为三种，分别为：\n\n1. 将一条横线染为黑色。具体地说，给定两个方格 $(x_1, y_1)$ 和 $(x_2, y_2)$，保证 $x_1 \\le x_2$，$y_1 = y_2$，将这两个方格之间的所有方格（包括这两个方格）染为黑色。\n2. 将一条竖线染为黑色。具体地说，给定两个方格 $(x_1, y_1)$ 和 $(x_2, y_2)$，保证 $x_1 = x_2$，$y_1 \\le y_2$，将这两个方格之间的所有方格（包括这两个方格）染为黑色。\n3. 将一条斜线染为黑色。具体地说，给定两个方格 $(x_1, y_1)$ 和 $(x_2, y_2)$，保证 $x_1 \\le x_2$，$x_2 - x_1 = y_2 - y_1$，将这两个方格之间斜线上所有形如 $(x_1 + i, y_1 + i)$（$0 \\le i \\le x_2 - x_1$）的方格染为黑色。**这种染色操作发生的次数不超过 $5$ 次。**\n\n现在你想知道，在经过 $q$ 次染色后，棋盘上有多少个黑色的方格。", "inputFormat": "输入的第一行包含一个整数 $c$，表示测试点编号。$c = 0$ 表示该测试点为样例。\n\n输入的第二行包含三个正整数 $n, m, q$，分别表示棋盘的列、行和染色操作的次数。\n\n接下来 $q$ 行，每行输入五个正整数 $t, x_1, y_1, x_2, y_2$，其中 $t = 1$ 表示第一种染色操作，$t = 2$ 表示第二种染色操作，$t = 3$ 表示第三种染色操作。$x_1, y_1, x_2, y_2$ 表示染色操作的四个参数。", "outputFormat": "输出一行包含一个整数，表示棋盘上被染为黑色的方格的数量。", "hint": "**【样例解释 #1】**\n\n在这组样例中，我们一共做了三次染色操作，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ojo6cs1.png)\n\n第一次操作时，将 $(1, 3), (2, 3), (3, 3), (4, 3), (5, 3)$ 染为黑色。\n\n第二次操作时，将 $(3, 1), (3, 2), (3, 3), (3, 4), (3, 5)$ 染为黑色。\n\n第三次操作时，将 $(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)$ 染为黑色。\n\n**【样例 #2】**\n\n这个样例满足测试点 $1 \\sim 5$ 的条件限制。\n\n**【样例 #3】**\n\n这个样例满足测试点 $6 \\sim 9$ 的条件限制。\n\n**【样例 #4】**\n\n这个样例满足测试点 $10 \\sim 13$ 的条件限制。\n\n**【样例 #5】**\n\n这个样例满足测试点 $14 \\sim 17$ 的条件限制。\n\n**【样例 #6】**\n\n这个样例满足测试点 $18 \\sim 19$ 的条件限制。\n\n**【样例 #7】**\n\n这个样例满足测试点 $20$ 的条件限制。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1 \\le n, m \\le 10 ^ 9$，$1 \\le q \\le 10 ^ 5$，$1 \\le x_1, x_2 \\le n$，$1 \\le y_1, y_2 \\le m$，**且最多有 $5$ 次第三种染色操作**。\n\n::cute-table{tuack}\n\n|测试点编号|$n, m \\le$|$q \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1 \\sim 5$|$300$|$300$|无|\n|$6 \\sim 9$|$10 ^ 5$|$2,000$|无|\n|$10 \\sim 13$|$10 ^ 5$|$10 ^ 5$|A|\n|$14 \\sim 17$|$10 ^ 5$|$10 ^ 5$|B|\n|$18 \\sim 19$|$10 ^ 5$|$10 ^ 5$|无|\n|$20$|$10 ^ 9$|$10 ^ 5$|无|\n\n特殊性质 A：保证只有第一种染色操作。\n\n特殊性质 B：保证只有第一种和第二种染色操作。\n\nUpdate on 2023-08-04: 更新一组 Hack 数据，该 Hack 数据的 $c = 0$。", "locale": "zh-CN"}}}
