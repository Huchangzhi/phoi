{"pid": "P14485", "type": "P", "difficulty": 7, "samples": [["3 3\n5 9 8\n1 2 3\n1 2\n2 3\n3 1", "5"], ["3 2\n5 9 8\n1 2 3\n1 2\n2 3", "2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "集训队互测", "三分", "树形 DP", "决策单调性", "启发式合并"], "title": "[集训队互测 2018] 有向图", "background": "试题来源：<https://loj.ac/p/2470>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "给定一个 $n$ 个点 $m$ 条边的有向弱连通图， 每个点均有点权 $d_i$ 和修改耗时 $w_i$， 每次修改可以花费 $w_i$ 的时间把 $d_i$ 加 $1$ 或者减 $1$，求最少消耗多少时间，使得 $\\forall (u,v)\\in E, d_u\\le d_v$。", "inputFormat": "输入共包括 $m+3$ 行。\n\n第一行包含两个整数 $n,m$，表示点数和边数。\n\n第二行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个点的点权 $d_i$。  \n\n第三行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个点的修改耗时 $w_i$。  \n\n第 $4 ~ m+3$ 行，每行包含两个整数 $u_i,v_i$，表示有向图种的一条由 $u_i$ 到 $v_i$ 的有向边。", "outputFormat": "输出包含一个整数，表示最小总耗时。", "hint": "| 子任务 | 分值 | $n \\leq $ | $m=$ | 特殊限制 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $5000$ | $n-1$ | 无 |\n| $2$ | $20$ | $100000$ | ^ | 将所有有向边看成无向边时，整张图构成一条链 |\n| $3$ | $20 $ | ^ | ^ | 无 |\n| $4$ | $15$ | $300000$ | ^ | ^ |\n| $5$ | $10$ | ^ | $n$ | 存在数列$f_i$,满足有且仅有$i$向$f_i$的有向边，$w_i=1$ |\n| $6$ | $10 $ | ^ | ^ | 将所有有向边看成无向边时，整张图构成一个环 |\n| $7$ | $15$ | ^ | $n-1,n$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2018] 有向图", "background": "试题来源：<https://loj.ac/p/2470>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "给定一个 $n$ 个点 $m$ 条边的有向弱连通图， 每个点均有点权 $d_i$ 和修改耗时 $w_i$， 每次修改可以花费 $w_i$ 的时间把 $d_i$ 加 $1$ 或者减 $1$，求最少消耗多少时间，使得 $\\forall (u,v)\\in E, d_u\\le d_v$。", "inputFormat": "输入共包括 $m+3$ 行。\n\n第一行包含两个整数 $n,m$，表示点数和边数。\n\n第二行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个点的点权 $d_i$。  \n\n第三行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个点的修改耗时 $w_i$。  \n\n第 $4 ~ m+3$ 行，每行包含两个整数 $u_i,v_i$，表示有向图种的一条由 $u_i$ 到 $v_i$ 的有向边。", "outputFormat": "输出包含一个整数，表示最小总耗时。", "hint": "| 子任务 | 分值 | $n \\leq $ | $m=$ | 特殊限制 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $5000$ | $n-1$ | 无 |\n| $2$ | $20$ | $100000$ | ^ | 将所有有向边看成无向边时，整张图构成一条链 |\n| $3$ | $20 $ | ^ | ^ | 无 |\n| $4$ | $15$ | $300000$ | ^ | ^ |\n| $5$ | $10$ | ^ | $n$ | 存在数列$f_i$,满足有且仅有$i$向$f_i$的有向边，$w_i=1$ |\n| $6$ | $10 $ | ^ | ^ | 将所有有向边看成无向边时，整张图构成一个环 |\n| $7$ | $15$ | ^ | $n-1,n$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P14486", "type": "P", "difficulty": 7, "samples": [["7 10\n1 1 2\n1 2 3\n1 3 5\n1 5 6\n2 1 6\n1 1 4\n2 1 6\n1 1 7\n2 1 6\n2 3 6", "4\n3\n2\n2"], ["10 20\n1 1 8\n1 8 5\n1 5 10\n1 8 7\n2 7 1\n1 7 4\n2 7 5\n1 7 6\n2 7 6\n1 6 9\n2 4 1\n1 9 2\n2 8 1\n1 9 3\n2 3 10\n2 6 8\n2 4 8\n2 3 8\n2 3 9\n2 8 1", "2\n2\n1\n3\n1\n2\n2\n2\n2\n1\n1"], ["10 20\n1 1 7\n1 7 6\n1 1 2\n1 6 4\n1 2 3\n1 3 5\n1 5 9\n1 9 8\n1 8 10\n2 7 10\n2 8 3\n2 9 5\n2 1 7\n2 2 1\n2 9 9\n2 2 7\n2 4 3\n2 5 4\n2 9 2\n2 1 1", "2\n3\n1\n1\n1\n0\n1\n3\n3\n2\n0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "集训队互测", "Kruskal 重构树", "动态树 LCT"], "title": "[集训队互测 2018] 北校门外的未来", "background": "> 如果你不想阅读故事，请直接跳到题意部分。\n\n\n转眼间，已是三年流转。\n\n夏日法桐的绿荫，代替了秋季的萧索，衬托着 LCR 和神犇成长的背影。\n\n身后的北校门，也不再是当年学生试图摧毁的，束缚自由的枷锁，而成了青春记忆的符号。\n\n又到了神犇和 LCR 相遇的地方 —— 北校门外的树下。这棵神奇的树早已不是 K 项树的形态。每时每刻，它都以新的独特方式演绎着生命。\n\n谁也没有开口，他和她静静地注视着魔法般生长的自然种子。初始时，这棵树只有一个点，LCR 将其标号为 $1$。此后，每过一段时间，就会有一个新节点从原有的某个点出生长出来，LCR 会给它分配一个尚未使用过的不超过 $n$ 的正整数编号。\n\n树中生活着一些小精灵。它们总停留在节点上，如果一个精灵在编号 $u$ 的节点，那么它可以一步跳到任何编号 $v$ 的满足 $u,v$ 之间的简单路径上不存在异于 $u,v$ 的编号大于 $\\min(u,v)$ 的点处。\n\n在观察这棵树的过程中，LCR 产生了一些疑问。她想知道，对于一对节点编号 $u,v$，从节点 $u$ 跳到节点 $v$ 最少需要几步。\n\n神犇轻松地解决了这些问题。最终，树渐渐停止了生长，但神犇仍然陶醉其中。\n\n一只飘渺的手搭上了神犇的肩膀。他回过头，看到 LCR 正在微笑。\n\n*“亲爱的少年，神犇君。”*\n\n*“你是否想过，为什么精灵会依照我编号的法则而运动呢？”*\n\n神犇一时语塞。瞬间，LCR 的手变得虚幻了起来，如同明灭的火炬。\n\n*“你的成长，是这变化世界的一个切面。感谢你与我度过的时光。不要留恋 …… 我的随风飘散，正是与你们同在。”*\n\n*“再见了，神犇君。”*\n\nLCR 消失了，神犇机械地转过身，却发现背后的树也已消失无踪。\n\n*“神犇，神犇 ……”* 茫然若失的神犇背后传来了渐行渐近的呼叫。神犇转过身，发现机房里的蒟蒻 LCA 正向他跑来。\n\n*“又是一年毕业季了呢。学长你还好吗？”*\n\n*“也许吧。”* 神犇望向校门外的树原先的位置，*“LCR 走了，但她的背影会吸引着我们的人生。”*\n\nLCA 沉默了。他和神犇一同望向树消失的地方，持续片刻。\n\n*“所谓中二的幻想，才是我们相对的有限的主观能动性唯一的立场吧，不要给自己设限啊，LCA。我们去追寻她 …… 追寻自然的精灵。也许这就是我们的初心也说不定。”*\n\n这次是 LCA 目送神犇的背影渐行渐远了。\n\n*“再见了，学长。”*\n\n某少女附中，又迎来了新的一年。\n\n那么，你能够回答 LCR 提出的问题吗？", "description": "对于一棵树 $T=(V,E)$，$V$ 中每个点有一个互不相同的正整数标号。我们用点 $i$ 表示编号为 $i$ 的点。\n\n定义这棵树的**谷图**为 $G(T)=(V,E')$。$G(T)$ 是无向简单图。存在边 $(u,v)\\in E'$ 当且仅当在 $T$ 中，不存在一个异于 $u,v$ 的点 $x$ 满足 $x$ 在从 $u$ 到 $v$ 的简单路径上且其编号大于 $\\min(u,v)$。\n\n有一棵树 $T$，初始时只有一个点，编号为 $1$，接下来有 $q$ 次操作，操作有以下两种：\n\n* $\\texttt{1 u v}$ 表示加入一个编号为 $v$ 的节点并与当前编号为 $u$ 的节点相连（保证任何时刻不会有两个编号相同的节点）；\n* $\\texttt{2 u v}$ 表示查询 $G(T)$ 中点 $u$ 到 $v$ 的最短路（每条边长度均为 $1$）。\n\n请你回答所有查询。", "inputFormat": "第一行两个整数 $n, q$，表示编号的最大可能值及询问个数。\n\n接下来 $q$ 行每行三个整数 $\\texttt{op u v}$，以题目描述中的格式描述一次操作。\n", "outputFormat": "依次对于每一个 $\\texttt{2}$ 类型的操作，输出一行一个整数表示其对应的答案。\n", "hint": "### 样例 1 解释\n\n最终的树 $T$ 和 $G(T)$ 如下：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/3li9zsng.png)\n:::\n\n第一次询问的路径：$1 \\rightarrow 2 \\rightarrow 3 \\rightarrow 5 \\rightarrow 6$；\n\n第二次询问的路径：$1 \\rightarrow 4 \\rightarrow 5 \\rightarrow 6$；\n\n第三次询问的路径：$1 \\rightarrow 7 \\rightarrow 6$；\n\n第四次询问的路径：$3 \\rightarrow 5 \\rightarrow 6$。\n\n### 数据范围与提示\n\n对于所有数据，$1\\le n\\le 10^5,1\\le q\\le 5\\times 10^5$。\n\n每个子任务详细的数据限制及约定如下（留空表示和上述所有数据的约定相同）：\n\n|子任务编号|分数|$n$|$q$|性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$6$|$\\le 100$|$\\le 200$|无|\n|$2$|$10$|$\\le 5000$|$\\le 10000$|^|\n|$3$|$12$|$\\le 5000$| ^ |^|\n|$4$|$15$| ^ | ^ |一、二|\n|$5$|$12$| ^ | ^ |二|\n|$6$|$10$| ^ |$\\le 2 \\times 10^5$|一、三|\n|$7$|$10$| ^ | ^ |一|\n|$8$|$10$| ^ | ^ |无|\n|$9$|$15$| ^ | ^ |^|\n\n性质一：所有 $\\texttt{1}$ 操作（修改）在所有 $\\texttt{2}$ 操作（询问）之前。\n\n性质二：任何时刻保证树是一条链。\n\n性质三：最终形成的树在所有 $n$ 个点的有标号无根树中均匀随机，随机数生成器使用[梅森旋转算法](https://en.wikipedia.org/wiki/Mersenne_Twister)。\n\n注意样例 3 满足性质一、二。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2018] 北校门外的未来", "background": "> 如果你不想阅读故事，请直接跳到题意部分。\n\n\n转眼间，已是三年流转。\n\n夏日法桐的绿荫，代替了秋季的萧索，衬托着 LCR 和神犇成长的背影。\n\n身后的北校门，也不再是当年学生试图摧毁的，束缚自由的枷锁，而成了青春记忆的符号。\n\n又到了神犇和 LCR 相遇的地方 —— 北校门外的树下。这棵神奇的树早已不是 K 项树的形态。每时每刻，它都以新的独特方式演绎着生命。\n\n谁也没有开口，他和她静静地注视着魔法般生长的自然种子。初始时，这棵树只有一个点，LCR 将其标号为 $1$。此后，每过一段时间，就会有一个新节点从原有的某个点出生长出来，LCR 会给它分配一个尚未使用过的不超过 $n$ 的正整数编号。\n\n树中生活着一些小精灵。它们总停留在节点上，如果一个精灵在编号 $u$ 的节点，那么它可以一步跳到任何编号 $v$ 的满足 $u,v$ 之间的简单路径上不存在异于 $u,v$ 的编号大于 $\\min(u,v)$ 的点处。\n\n在观察这棵树的过程中，LCR 产生了一些疑问。她想知道，对于一对节点编号 $u,v$，从节点 $u$ 跳到节点 $v$ 最少需要几步。\n\n神犇轻松地解决了这些问题。最终，树渐渐停止了生长，但神犇仍然陶醉其中。\n\n一只飘渺的手搭上了神犇的肩膀。他回过头，看到 LCR 正在微笑。\n\n*“亲爱的少年，神犇君。”*\n\n*“你是否想过，为什么精灵会依照我编号的法则而运动呢？”*\n\n神犇一时语塞。瞬间，LCR 的手变得虚幻了起来，如同明灭的火炬。\n\n*“你的成长，是这变化世界的一个切面。感谢你与我度过的时光。不要留恋 …… 我的随风飘散，正是与你们同在。”*\n\n*“再见了，神犇君。”*\n\nLCR 消失了，神犇机械地转过身，却发现背后的树也已消失无踪。\n\n*“神犇，神犇 ……”* 茫然若失的神犇背后传来了渐行渐近的呼叫。神犇转过身，发现机房里的蒟蒻 LCA 正向他跑来。\n\n*“又是一年毕业季了呢。学长你还好吗？”*\n\n*“也许吧。”* 神犇望向校门外的树原先的位置，*“LCR 走了，但她的背影会吸引着我们的人生。”*\n\nLCA 沉默了。他和神犇一同望向树消失的地方，持续片刻。\n\n*“所谓中二的幻想，才是我们相对的有限的主观能动性唯一的立场吧，不要给自己设限啊，LCA。我们去追寻她 …… 追寻自然的精灵。也许这就是我们的初心也说不定。”*\n\n这次是 LCA 目送神犇的背影渐行渐远了。\n\n*“再见了，学长。”*\n\n某少女附中，又迎来了新的一年。\n\n那么，你能够回答 LCR 提出的问题吗？", "description": "对于一棵树 $T=(V,E)$，$V$ 中每个点有一个互不相同的正整数标号。我们用点 $i$ 表示编号为 $i$ 的点。\n\n定义这棵树的**谷图**为 $G(T)=(V,E')$。$G(T)$ 是无向简单图。存在边 $(u,v)\\in E'$ 当且仅当在 $T$ 中，不存在一个异于 $u,v$ 的点 $x$ 满足 $x$ 在从 $u$ 到 $v$ 的简单路径上且其编号大于 $\\min(u,v)$。\n\n有一棵树 $T$，初始时只有一个点，编号为 $1$，接下来有 $q$ 次操作，操作有以下两种：\n\n* $\\texttt{1 u v}$ 表示加入一个编号为 $v$ 的节点并与当前编号为 $u$ 的节点相连（保证任何时刻不会有两个编号相同的节点）；\n* $\\texttt{2 u v}$ 表示查询 $G(T)$ 中点 $u$ 到 $v$ 的最短路（每条边长度均为 $1$）。\n\n请你回答所有查询。", "inputFormat": "第一行两个整数 $n, q$，表示编号的最大可能值及询问个数。\n\n接下来 $q$ 行每行三个整数 $\\texttt{op u v}$，以题目描述中的格式描述一次操作。\n", "outputFormat": "依次对于每一个 $\\texttt{2}$ 类型的操作，输出一行一个整数表示其对应的答案。\n", "hint": "### 样例 1 解释\n\n最终的树 $T$ 和 $G(T)$ 如下：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/3li9zsng.png)\n:::\n\n第一次询问的路径：$1 \\rightarrow 2 \\rightarrow 3 \\rightarrow 5 \\rightarrow 6$；\n\n第二次询问的路径：$1 \\rightarrow 4 \\rightarrow 5 \\rightarrow 6$；\n\n第三次询问的路径：$1 \\rightarrow 7 \\rightarrow 6$；\n\n第四次询问的路径：$3 \\rightarrow 5 \\rightarrow 6$。\n\n### 数据范围与提示\n\n对于所有数据，$1\\le n\\le 10^5,1\\le q\\le 5\\times 10^5$。\n\n每个子任务详细的数据限制及约定如下（留空表示和上述所有数据的约定相同）：\n\n|子任务编号|分数|$n$|$q$|性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$6$|$\\le 100$|$\\le 200$|无|\n|$2$|$10$|$\\le 5000$|$\\le 10000$|^|\n|$3$|$12$|$\\le 5000$| ^ |^|\n|$4$|$15$| ^ | ^ |一、二|\n|$5$|$12$| ^ | ^ |二|\n|$6$|$10$| ^ |$\\le 2 \\times 10^5$|一、三|\n|$7$|$10$| ^ | ^ |一|\n|$8$|$10$| ^ | ^ |无|\n|$9$|$15$| ^ | ^ |^|\n\n性质一：所有 $\\texttt{1}$ 操作（修改）在所有 $\\texttt{2}$ 操作（询问）之前。\n\n性质二：任何时刻保证树是一条链。\n\n性质三：最终形成的树在所有 $n$ 个点的有标号无根树中均匀随机，随机数生成器使用[梅森旋转算法](https://en.wikipedia.org/wiki/Mersenne_Twister)。\n\n注意样例 3 满足性质一、二。", "locale": "zh-CN"}}}
{"pid": "P14487", "type": "P", "difficulty": 7, "samples": [["11 11\n1 2 1\n2 3 1\n3 4 1\n4 5 1\n5 6 1\n6 1 1\n2 7 10\n3 8 20\n4 9 30\n5 10 40\n6 11 50", "3\n2\n2\n2\n2\n2\n20\n40\n60\n80\n100"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "集训队互测", "多项式", "仙人掌", "快速数论变换 NTT"], "title": "[集训队互测 2018] 白云的旅行", "background": "试题来源：<https://loj.ac/p/2475>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "白云开始了一段旅程。\n\n旅途中一共有 $n$ 个城市，编号为 $1$ 到 $n$，城市之间有一些道路相连。其道路结构可以抽象为一棵仙人掌。如果一个无向连通图的任意一条边最多属于一个简单环，我们就称之为仙人掌。所谓简单环即不经过重复的结点的环。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/pic/4742.png)\n:::\n\n白云对这些城市间的每条道路都有一个喜爱度。一条路径的喜爱度是其上所有道路的喜爱度的乘积。\n\n现在白云在 $1$ 号城市准备出发。为了制定合理的路线，白云会时不时问白兔：“从 $1$ 号城市出发**不经过重复道路**到达 $k$ 号城市的所有路径喜爱度之和是多少？”\n\n这可难倒了白兔，请你帮忙对于 $k=1,2,\\ldots,n$ 求出相应答案。只需要输出答案对 $998244353( = 7\\times 17\\times 2^{23}+1$ 一个质数$)$取模后的值。\n", "inputFormat": "第 $1$ 行两个正整数 $n,m$ 表示城市的个数和道路的条数。保证 $n \\ge 2$。\n\n接下来 $m$ 行每行两个正整数 $v,u,w(1 \\le v,u \\le n,1 \\le w < 998244353)$ 表示一条连接城市 $v$ 和 $u$ 的喜爱度为 $w$ 的道路。\n\n保证输入的图是一棵仙人掌，没有自环，但可能有重边。\n", "outputFormat": "输出 $n$ 行，第 $i$ 行包含一个整数表示 $k=i$ 时的答案。\n", "hint": "注意，两条路径不同为它们经过的边数不同或存在一个满足 $1 \\le x \\le$ 路径长度 的 $x$ 使得这两条路径经过的第 $x$ 条边不同。\n\n长度为 $0$ 的路径也是合法路径，权值视为 $1$。\n\n对于所有数据，$n \\le 10^5,1 \\le w < 998244353$。\n\n| 子任务编号 | $n \\leq$ | $w \\leq$    | 其它约定               |\n| :---:      | :-----:  | :----:      | :----:                 |\n| $1$          | $10^5$   | $1$         | $m=n-1$                |\n| $2$          | $10^5$   | $998244352$ | ^               |\n| $3$          | $8$      | ^ |                        |\n| $4$          | $10^5$   | $1$                | 一个点最多只在一个环中     |\n| $5$          | $10^5$   | $998244352$ | ^     |\n| $6$          | $500$    | ^ |                        |\n| $7$        | $3000$   | $1$ |                 ^       |\n| $8$        | $3000$   | $998244352$ |         ^               |\n| $9$       | $10^5$   | $1$ |                  ^      |\n| $10$       | $10^5$   | $998244352$ |  ^  |                    |\n\n虽然我没有给 $m$ 的范围，但是熟悉仙人掌的小朋友都知道对于仙人掌肯定满足 $n-1 \\le m \\le 2n-2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2018] 白云的旅行", "background": "试题来源：<https://loj.ac/p/2475>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "白云开始了一段旅程。\n\n旅途中一共有 $n$ 个城市，编号为 $1$ 到 $n$，城市之间有一些道路相连。其道路结构可以抽象为一棵仙人掌。如果一个无向连通图的任意一条边最多属于一个简单环，我们就称之为仙人掌。所谓简单环即不经过重复的结点的环。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/pic/4742.png)\n:::\n\n白云对这些城市间的每条道路都有一个喜爱度。一条路径的喜爱度是其上所有道路的喜爱度的乘积。\n\n现在白云在 $1$ 号城市准备出发。为了制定合理的路线，白云会时不时问白兔：“从 $1$ 号城市出发**不经过重复道路**到达 $k$ 号城市的所有路径喜爱度之和是多少？”\n\n这可难倒了白兔，请你帮忙对于 $k=1,2,\\ldots,n$ 求出相应答案。只需要输出答案对 $998244353( = 7\\times 17\\times 2^{23}+1$ 一个质数$)$取模后的值。\n", "inputFormat": "第 $1$ 行两个正整数 $n,m$ 表示城市的个数和道路的条数。保证 $n \\ge 2$。\n\n接下来 $m$ 行每行两个正整数 $v,u,w(1 \\le v,u \\le n,1 \\le w < 998244353)$ 表示一条连接城市 $v$ 和 $u$ 的喜爱度为 $w$ 的道路。\n\n保证输入的图是一棵仙人掌，没有自环，但可能有重边。\n", "outputFormat": "输出 $n$ 行，第 $i$ 行包含一个整数表示 $k=i$ 时的答案。\n", "hint": "注意，两条路径不同为它们经过的边数不同或存在一个满足 $1 \\le x \\le$ 路径长度 的 $x$ 使得这两条路径经过的第 $x$ 条边不同。\n\n长度为 $0$ 的路径也是合法路径，权值视为 $1$。\n\n对于所有数据，$n \\le 10^5,1 \\le w < 998244353$。\n\n| 子任务编号 | $n \\leq$ | $w \\leq$    | 其它约定               |\n| :---:      | :-----:  | :----:      | :----:                 |\n| $1$          | $10^5$   | $1$         | $m=n-1$                |\n| $2$          | $10^5$   | $998244352$ | ^               |\n| $3$          | $8$      | ^ |                        |\n| $4$          | $10^5$   | $1$                | 一个点最多只在一个环中     |\n| $5$          | $10^5$   | $998244352$ | ^     |\n| $6$          | $500$    | ^ |                        |\n| $7$        | $3000$   | $1$ |                 ^       |\n| $8$        | $3000$   | $998244352$ |         ^               |\n| $9$       | $10^5$   | $1$ |                  ^      |\n| $10$       | $10^5$   | $998244352$ |  ^  |                    |\n\n虽然我没有给 $m$ 的范围，但是熟悉仙人掌的小朋友都知道对于仙人掌肯定满足 $n-1 \\le m \\le 2n-2$。", "locale": "zh-CN"}}}
{"pid": "P14488", "type": "P", "difficulty": 7, "samples": [["3\n1 0 0\n1 0 0\n1 0 0\n1 0 0\n1 0 0\n1 0 0", "1"], ["3\n5 2 6\n2 0 5\n5 9 2\n2 2 9\n8 4 9\n2 6 4", "111472"], ["10\n1361955 7579012 28145516 76140462 83515280 86969585 62888635 26402539 98152102 58176572\n61402892 27860889 9580638 70870044 46139319 78509022 84027666 61263304 41082555 58212774\n40563715 26389629 79113528 96147999 25801172 37151740 70301173 56585275 85845005 2071050\n3573723 27123762 9467290 96231662 31265400 99374333 20690249 98571510 91747709 99313372\n43215695 89204466 14608448 62733264 56517316 55253431 6956091 81457954 28156706 51354013\n58398859 52040410 43974602 58000642 37883250 64556873 82264704 5461189 77444309 67035008", "3310381507991040368"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "2018", "集训队互测", "数论", "莫比乌斯反演"], "title": "[集训队互测 2018] 蒜头的奖杯", "background": "试题来源：<https://loj.ac/p/2476>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "蒜头是一个热爱学习的好孩子。同时，他也是一名国家队选手。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/7bhxppag.png)\n:::\n\n作为优秀青年，每年冬天，蒜头都会和他的小伙伴们一起参加志愿者活动。今年的活动地点在步行街附近，于是蘑菇头提出，志愿者活动结束后去步行街逛一逛。\n\n恰巧这一天步行街举办知识竞赛，冠军奖品是一瓶洗手液和一个金灿灿的奖杯，为了争夺这个奖杯，场上两支队伍的队员都使出浑身解数，直到最后一题，比赛的结局仍充满悬念。但在专业的最后一题面前，两支队伍的选手尽管绞尽脑汁，也没能取得丝毫进展。\n\n蒜头看着屏幕上的问题皱起了眉头：\n\n**给定长度为 $ n $ 的六个序列 $ A,B,C,D,E,F $ ，求：**\n​    \n$$ \\sum_{i = 1}^n \\sum_{j = 1}^n \\sum_{k = 1}^n A_i B_j C_k D_{\\gcd(i,j)} E_{\\gcd(i,k)} F_{\\gcd(j,k)} $$ \n\n你能帮蒜头解决这道难题吗？这样他就可以上台击败两队，赢得 Toms Chen 的金奖杯和一瓶优秀的洗手液了。当然，你为蒜头解决问题也不是无偿的：赢得了这瓶洗手液后蘑菇头会很开心，蒜头也会很开心，获得了金奖杯他会更开心，于是他就会奖励你 $ 100 $ 分了。\n\n由于答案太大，你只要输出其对 $ 2^{64} $ 取模的结果即可。", "inputFormat": "第一行输入一个正整数 $ n $ 。\n\n接下来 $ 6 $ 行，每行 $ n $ 个非负整数，分别表示序列 $ A, B, C, D, E, F $。\n", "outputFormat": "输出一行一个整数，表示上式的值对 $ 2^{64} $ 取模的结果。\n", "hint": "对于所有数据，$ n \\le 10^5 $ ，输入序列中的数字不会超过 $ 10^{18} $ 。\n\n|   测试点编号 $ m $   |       $ n \\le  $        |                   其他约定                   |\n| :-------------: | :---------------------: | :--------------------------------------: |\n|      $ 1 $      |         $ 100 $         |                    -                     |\n|    $ 2,3,4 $    |        $ 2000 $         |                    -                     |\n|      $5,6$      |        $ 10^5 $         |     $ D_i = [i = 1], E_i = F_i = 1 $     |\n|       $7$       |        $ 10^5 $         | $ A_i = B_i = C_i = D_i = 1, E_i = F_i = [i = 1] $ |\n|       $8$       |        $ 10^5 $         |     $ D_i = 1, E_i = F_i = [i = 1] $     |\n|     $9,10$      |        $ 10^5 $         | $ A_i = B_i = C_i = 1, D_i = E_i = F_i = [i = 1] $ |\n|   $11,12,13$    |  $(m - 3) \\times 10^4$  |      $ D_i = E_i = F_i = [i = 1] $       |\n| $14 \\ldots 20$  | $ (m-13) \\times 10^4 $  |  当 $ m $ 为奇数时，有 $ D_i = E_i = F_i = i $  |\n| $ 21\\ldots 25 $ | $ 5(m - 5) \\times 10^3$ |  当 $ m $ 为偶数时，有 $ D_i = E_i = F_i = i $  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2018] 蒜头的奖杯", "background": "试题来源：<https://loj.ac/p/2476>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "蒜头是一个热爱学习的好孩子。同时，他也是一名国家队选手。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/7bhxppag.png)\n:::\n\n作为优秀青年，每年冬天，蒜头都会和他的小伙伴们一起参加志愿者活动。今年的活动地点在步行街附近，于是蘑菇头提出，志愿者活动结束后去步行街逛一逛。\n\n恰巧这一天步行街举办知识竞赛，冠军奖品是一瓶洗手液和一个金灿灿的奖杯，为了争夺这个奖杯，场上两支队伍的队员都使出浑身解数，直到最后一题，比赛的结局仍充满悬念。但在专业的最后一题面前，两支队伍的选手尽管绞尽脑汁，也没能取得丝毫进展。\n\n蒜头看着屏幕上的问题皱起了眉头：\n\n**给定长度为 $ n $ 的六个序列 $ A,B,C,D,E,F $ ，求：**\n​    \n$$ \\sum_{i = 1}^n \\sum_{j = 1}^n \\sum_{k = 1}^n A_i B_j C_k D_{\\gcd(i,j)} E_{\\gcd(i,k)} F_{\\gcd(j,k)} $$ \n\n你能帮蒜头解决这道难题吗？这样他就可以上台击败两队，赢得 Toms Chen 的金奖杯和一瓶优秀的洗手液了。当然，你为蒜头解决问题也不是无偿的：赢得了这瓶洗手液后蘑菇头会很开心，蒜头也会很开心，获得了金奖杯他会更开心，于是他就会奖励你 $ 100 $ 分了。\n\n由于答案太大，你只要输出其对 $ 2^{64} $ 取模的结果即可。", "inputFormat": "第一行输入一个正整数 $ n $ 。\n\n接下来 $ 6 $ 行，每行 $ n $ 个非负整数，分别表示序列 $ A, B, C, D, E, F $。\n", "outputFormat": "输出一行一个整数，表示上式的值对 $ 2^{64} $ 取模的结果。\n", "hint": "对于所有数据，$ n \\le 10^5 $ ，输入序列中的数字不会超过 $ 10^{18} $ 。\n\n|   测试点编号 $ m $   |       $ n \\le  $        |                   其他约定                   |\n| :-------------: | :---------------------: | :--------------------------------------: |\n|      $ 1 $      |         $ 100 $         |                    -                     |\n|    $ 2,3,4 $    |        $ 2000 $         |                    -                     |\n|      $5,6$      |        $ 10^5 $         |     $ D_i = [i = 1], E_i = F_i = 1 $     |\n|       $7$       |        $ 10^5 $         | $ A_i = B_i = C_i = D_i = 1, E_i = F_i = [i = 1] $ |\n|       $8$       |        $ 10^5 $         |     $ D_i = 1, E_i = F_i = [i = 1] $     |\n|     $9,10$      |        $ 10^5 $         | $ A_i = B_i = C_i = 1, D_i = E_i = F_i = [i = 1] $ |\n|   $11,12,13$    |  $(m - 3) \\times 10^4$  |      $ D_i = E_i = F_i = [i = 1] $       |\n| $14 \\ldots 20$  | $ (m-13) \\times 10^4 $  |  当 $ m $ 为奇数时，有 $ D_i = E_i = F_i = i $  |\n| $ 21\\ldots 25 $ | $ 5(m - 5) \\times 10^3$ |  当 $ m $ 为偶数时，有 $ D_i = E_i = F_i = i $  |", "locale": "zh-CN"}}}
{"pid": "P14489", "type": "P", "difficulty": 7, "samples": [["6 5\n1 1\n1 2 1 2 1\n2 3 2 3 1\n3 4 3 4 1\n1 4 5 6 1\n5 6 1 4 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "2018", "集训队互测", "生成树", "拟阵"], "title": "[集训队互测 2018] 小修和小栋生成树", "background": "试题来源：<https://loj.ac/p/2488>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "这**不是**一道提交答案题。\n\n这**不是**一道交互题。\n\n小修正在和小栋一起造生成树。\n\n他们各有一张 $n$ 个点，$m$ 条边的图。他们希望在图中找出一些边，使得只含有这些边的图是森林或者环套树森林。\n\n由于小修和小栋是情侣，所以他们决定作出一样的选择，具体来说，对于第 $i$ 条边，两个人要么同时选择，要么同时不选择。\n\n对于第 $i$ 条边有 $a_i$ 的权值，小修和小栋希望最终选择出来的边的权值和尽量大。\n\n这里环套树森林的定义指的是每个联通块都是树或者环套树。\n", "inputFormat": "第一行包含两个整数 $n$ 和 $m$，表示图的点数和边数。\n\n接下来一行两个整数  $\\text{type}_1,\\text{type}_2$，分别表示小修对最终图的要求和小栋的要求，当 $\\text{type}$ 为 $1$ 的时候，表示希望最后得到的是森林，如果 $\\text{type}$ 为 $2$ 则是环套树森林。\n\n接下来 $m$ 行，每行 $5$ 个整数 $u1_i,v1_i,u2_i,v2_i,a_i$，其中 $u1_i,v1_i$ 表示这条边在小修的图中连接的点，$u2_i,v2_i$ 表示在小栋的图中连接的点。\n\n数据不保证没有重边和自环。\n", "outputFormat": "输出一行一个整数，表示最大的边权和。\n", "hint": "对于所有数据，满足 $1\\le n,m\\le 300,1\\le a_i\\le 10^5$  \n \n以下限制如不做特殊说明均表示不超过。\n\n|子任务编号|$n$|$m$|特殊限制|分数|\n|:----:|:--:|:----:|:--:|:----:|\n|$1$|\t$300$|\t$300$|\t$u1_i=u2_i,v1_i=v2_i$ |\t$3$|\n|$2$|\t$300$|\t$20$\t|无|\t$3$|\n|$3$|\t$7$|\t$300$\t|$\\text{type}_1=\\text{type}_2=1$ |\t$7$|\n|$4$|\t$5$|\t$300$|\t无|\t$11$|\n|$5$|\t$300$|\t$300$\t|$\\text{type}_1=\\text{type}_2=1$|\t$15$|\n|$6$|\t$300$|\t$300$\t|$\\text{type}_1=\\text{type}_2=2$|\t$17$|\n|$7$|\t$70$|\t$70$|\t无\t|$10$|\n|$8$|\t$300$\t|$300$|\t无\t|$34$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2018] 小修和小栋生成树", "background": "试题来源：<https://loj.ac/p/2488>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "这**不是**一道提交答案题。\n\n这**不是**一道交互题。\n\n小修正在和小栋一起造生成树。\n\n他们各有一张 $n$ 个点，$m$ 条边的图。他们希望在图中找出一些边，使得只含有这些边的图是森林或者环套树森林。\n\n由于小修和小栋是情侣，所以他们决定作出一样的选择，具体来说，对于第 $i$ 条边，两个人要么同时选择，要么同时不选择。\n\n对于第 $i$ 条边有 $a_i$ 的权值，小修和小栋希望最终选择出来的边的权值和尽量大。\n\n这里环套树森林的定义指的是每个联通块都是树或者环套树。\n", "inputFormat": "第一行包含两个整数 $n$ 和 $m$，表示图的点数和边数。\n\n接下来一行两个整数  $\\text{type}_1,\\text{type}_2$，分别表示小修对最终图的要求和小栋的要求，当 $\\text{type}$ 为 $1$ 的时候，表示希望最后得到的是森林，如果 $\\text{type}$ 为 $2$ 则是环套树森林。\n\n接下来 $m$ 行，每行 $5$ 个整数 $u1_i,v1_i,u2_i,v2_i,a_i$，其中 $u1_i,v1_i$ 表示这条边在小修的图中连接的点，$u2_i,v2_i$ 表示在小栋的图中连接的点。\n\n数据不保证没有重边和自环。\n", "outputFormat": "输出一行一个整数，表示最大的边权和。\n", "hint": "对于所有数据，满足 $1\\le n,m\\le 300,1\\le a_i\\le 10^5$  \n \n以下限制如不做特殊说明均表示不超过。\n\n|子任务编号|$n$|$m$|特殊限制|分数|\n|:----:|:--:|:----:|:--:|:----:|\n|$1$|\t$300$|\t$300$|\t$u1_i=u2_i,v1_i=v2_i$ |\t$3$|\n|$2$|\t$300$|\t$20$\t|无|\t$3$|\n|$3$|\t$7$|\t$300$\t|$\\text{type}_1=\\text{type}_2=1$ |\t$7$|\n|$4$|\t$5$|\t$300$|\t无|\t$11$|\n|$5$|\t$300$|\t$300$\t|$\\text{type}_1=\\text{type}_2=1$|\t$15$|\n|$6$|\t$300$|\t$300$\t|$\\text{type}_1=\\text{type}_2=2$|\t$17$|\n|$7$|\t$70$|\t$70$|\t无\t|$10$|\n|$8$|\t$300$\t|$300$|\t无\t|$34$|", "locale": "zh-CN"}}}
{"pid": "P14490", "type": "P", "difficulty": 7, "samples": [["", ""]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "集训队互测", "交互题", "Special Judge"], "title": "[集训队互测 2018] 小修和小栋猜数字", "background": "\n评测时，不要引入头文件。在文件头加入\n\n```cpp\nint ask(int,int,int);\nint answer(int,int);\n```\n\n---\n\n试题来源：<https://loj.ac/p/2489>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "这是一道**交互题**。\n\n小修和小栋喜欢玩一个叫做猜数字的游戏。\n小修会先在心中想好一个包含 $n$ 个互不相同的正整数的序列 $a_1,a_2,\\dots,a_n$。\n小栋每次会向小修询问 $a_x,a_y,a_z$ 的中位数，小修会准确地回答。然后小栋则需要利用这些信息来尽可能地还原出序列 $a$。\n然而小修实在是太厉害了，选取的 $n$ 都会特别大，导致小栋根本不知如何处理。\n请你帮助小栋，让他能和小修愉快地玩耍。\n\n### 任务介绍\n你需要实现一个函数 `guess()`，以帮助小栋完成游戏。\n\n* `guess(n)`\n * `n` 为序列的长度。\n\n在每个测试点中，交互库都会调用恰好一次 `guess()` 函数。\n\n你可以调用函数 `ask()` 来向小修进行询问。我们会根据你调用这个函数的**总次数**评分。\n\n* `ask(x,y,z)`\n * `x,y,z` 为三个不同的下标\n * 这个函数会返回 $a_x,a_y,a_z$ 的中位数。\n\n同时，你还可以调用函数 `answer()` 来回答你还原出的信息。\n\n* `answer(x,v)`\n * `x` 为还原出的数的下标\n * `v` 为还原出的 $a_x$ 的值\n\n你不能对于同一个 $x$ 进行两次调用，但可以对于某些 $x$ 不进行调用，表示你不能还原出这个下标上的值。\n\n### 实现方法\n本题只对 C/C++ 提供函数接口。\n\n源代码中需要在开头声明函数：\n\n```cpp\nint ask(int x,int y,int z);\nvoid answer(int x,int v);\n```\n\n你需要实现的函数 `guess()`:\n```cpp\nvoid guess(int n);\n```\n\n函数 `ask()` 的接口信息如下：\n```cpp\nint ask(int x,int y,int z);\n```\n\n函数 `answer()` 的接口信息如下：\n```cpp\nvoid answer(int x,int v);\n```\n\n### 如何测试你的程序\n你需要在本题目录下使用如下命令编译得到可执行程序：\n```plain\ng++ -o guess grader.cpp guess.cpp -O2\n```\n\n### 样例源代码\n\n在本题目录下，有 C++ 语言的样例源代码 `guess.cpp`。按照上文中提到的方式进行编译，即能通过编译得到可执行程序。\n\n样例源代码只是帮助理解题目，结果**不一定正确**。", "inputFormat": "可执行文件将从**标准输入**读取以下格式的数据：\n\n第一行包含一个正整数 $n$，需要保证 $n \\leq 10^5$。\n\n第二行一共 $n$ 个正整数，$a_1,a_2,\\dots,a_n$，需要保证 $a_i$ 互不相同且 $0 < a_i \\leq 10^9$。\n\n读入完成之后，交互库将会调用 `guess()` 函数。", "outputFormat": "接下来交互库将会在**标准输出**中输出以下信息：\n\n第一行一共 $n$ 个正整数，$b_1,b_2,\\ldots,b_n$，表示你还原出的序列，$b_i=-1$ 表示你没有还原出该下标上的值。\n\n第二行形如 `Count: cnt`，`cnt` 为你调用函数 `ask()` 的次数。", "hint": "对于每个测试点，我们将会用你的运行结果与标程的运行结果进行比较，如果还原出来的数列不一致，你将获得 0 分。否则令你和标程调用函数 `ask()` 的次数分布为 $Y$ 和 $S$，若 $Y \\leq S$ 则你的得分比例为 $100\\%$，否则你的得分比例为 $(10*2^{4-\\frac{Y}{S}}+20)\\%$。\n\n对于每个子任务，你的得分将是所有测试点的得分取最小值并乘上该子任务分值的结果。\n\n子任务 1（20分）：$n \\leq 10$；  \n子任务 2（20分）：$n \\leq 100$；  \n子任务 3（20分）：$n \\leq 2000$；  \n子任务 4（40分）：$n \\leq 100000$。\n\n请注意最终测评使用的 `guess.h` 与下发的文件并不一致。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2018] 小修和小栋猜数字", "background": "\n评测时，不要引入头文件。在文件头加入\n\n```cpp\nint ask(int,int,int);\nint answer(int,int);\n```\n\n---\n\n试题来源：<https://loj.ac/p/2489>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "这是一道**交互题**。\n\n小修和小栋喜欢玩一个叫做猜数字的游戏。\n小修会先在心中想好一个包含 $n$ 个互不相同的正整数的序列 $a_1,a_2,\\dots,a_n$。\n小栋每次会向小修询问 $a_x,a_y,a_z$ 的中位数，小修会准确地回答。然后小栋则需要利用这些信息来尽可能地还原出序列 $a$。\n然而小修实在是太厉害了，选取的 $n$ 都会特别大，导致小栋根本不知如何处理。\n请你帮助小栋，让他能和小修愉快地玩耍。\n\n### 任务介绍\n你需要实现一个函数 `guess()`，以帮助小栋完成游戏。\n\n* `guess(n)`\n * `n` 为序列的长度。\n\n在每个测试点中，交互库都会调用恰好一次 `guess()` 函数。\n\n你可以调用函数 `ask()` 来向小修进行询问。我们会根据你调用这个函数的**总次数**评分。\n\n* `ask(x,y,z)`\n * `x,y,z` 为三个不同的下标\n * 这个函数会返回 $a_x,a_y,a_z$ 的中位数。\n\n同时，你还可以调用函数 `answer()` 来回答你还原出的信息。\n\n* `answer(x,v)`\n * `x` 为还原出的数的下标\n * `v` 为还原出的 $a_x$ 的值\n\n你不能对于同一个 $x$ 进行两次调用，但可以对于某些 $x$ 不进行调用，表示你不能还原出这个下标上的值。\n\n### 实现方法\n本题只对 C/C++ 提供函数接口。\n\n源代码中需要在开头声明函数：\n\n```cpp\nint ask(int x,int y,int z);\nvoid answer(int x,int v);\n```\n\n你需要实现的函数 `guess()`:\n```cpp\nvoid guess(int n);\n```\n\n函数 `ask()` 的接口信息如下：\n```cpp\nint ask(int x,int y,int z);\n```\n\n函数 `answer()` 的接口信息如下：\n```cpp\nvoid answer(int x,int v);\n```\n\n### 如何测试你的程序\n你需要在本题目录下使用如下命令编译得到可执行程序：\n```plain\ng++ -o guess grader.cpp guess.cpp -O2\n```\n\n### 样例源代码\n\n在本题目录下，有 C++ 语言的样例源代码 `guess.cpp`。按照上文中提到的方式进行编译，即能通过编译得到可执行程序。\n\n样例源代码只是帮助理解题目，结果**不一定正确**。", "inputFormat": "可执行文件将从**标准输入**读取以下格式的数据：\n\n第一行包含一个正整数 $n$，需要保证 $n \\leq 10^5$。\n\n第二行一共 $n$ 个正整数，$a_1,a_2,\\dots,a_n$，需要保证 $a_i$ 互不相同且 $0 < a_i \\leq 10^9$。\n\n读入完成之后，交互库将会调用 `guess()` 函数。", "outputFormat": "接下来交互库将会在**标准输出**中输出以下信息：\n\n第一行一共 $n$ 个正整数，$b_1,b_2,\\ldots,b_n$，表示你还原出的序列，$b_i=-1$ 表示你没有还原出该下标上的值。\n\n第二行形如 `Count: cnt`，`cnt` 为你调用函数 `ask()` 的次数。", "hint": "对于每个测试点，我们将会用你的运行结果与标程的运行结果进行比较，如果还原出来的数列不一致，你将获得 0 分。否则令你和标程调用函数 `ask()` 的次数分布为 $Y$ 和 $S$，若 $Y \\leq S$ 则你的得分比例为 $100\\%$，否则你的得分比例为 $(10*2^{4-\\frac{Y}{S}}+20)\\%$。\n\n对于每个子任务，你的得分将是所有测试点的得分取最小值并乘上该子任务分值的结果。\n\n子任务 1（20分）：$n \\leq 10$；  \n子任务 2（20分）：$n \\leq 100$；  \n子任务 3（20分）：$n \\leq 2000$；  \n子任务 4（40分）：$n \\leq 100000$。\n\n请注意最终测评使用的 `guess.h` 与下发的文件并不一致。", "locale": "zh-CN"}}}
{"pid": "P14491", "type": "P", "difficulty": 7, "samples": [["3 3 1", "0 0 1 2 2 1 0 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "集训队互测", "提交答案", "Special Judge"], "title": "[集训队互测 2018] 小修和小栋玩游戏", "background": "试题来源：<https://loj.ac/p/2490>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "这是一道**提交答案题**。\n\n小修和小栋在**合作**玩一个游戏。\n\n小修会随机拿到 $[0,m-1]$ 中的一个整数，然后走进一个房间。\n\n房间有 $n$ 盏灯排成一行，小修进入房间之前它们被随机设定着状态，并且小修和小栋预先都不知道灯的状态。\n\n进入房间后，小修可以搬动开关改变其中**至多**一盏灯的状态，也可以不改变，然后她走出房间并且不与小栋交谈。\n\n接下来小栋需要走进房间，观察灯的状态并猜测小修拿到了哪个数，如果猜对那么两人获胜。\n\n游戏开始前小修和小栋需要商量一个计划，该计划是小栋在看到的灯的每种状态下会猜测哪一个字母，而小修的策略是尽可能使得小栋的猜测是正确的。\n\n请你帮他们设计一个获胜局面尽可能多的计划。", "inputFormat": "输入文件包含三个整数 $n,m,p$，$n,m$ 含义见上，$p$ 表示该测试点的分数。", "outputFormat": "输出一行 $2^n$ 个整数，其中第 $i$ 位表示灯的状态用二进制数表示为 $i-1$ 时，小栋会猜测的数。", "hint": "如果你的计划不合法，得 $0$ 分。\n\n当你的计划对于所有 $2^n\\cdot m$ 种局面都可以获胜，得 $p$ 分。\n\n否则记 $c$ 为你的计划中不能获胜的局面总数，得分为 $\\frac{p}{1.05^{c}}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2018] 小修和小栋玩游戏", "background": "试题来源：<https://loj.ac/p/2490>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "这是一道**提交答案题**。\n\n小修和小栋在**合作**玩一个游戏。\n\n小修会随机拿到 $[0,m-1]$ 中的一个整数，然后走进一个房间。\n\n房间有 $n$ 盏灯排成一行，小修进入房间之前它们被随机设定着状态，并且小修和小栋预先都不知道灯的状态。\n\n进入房间后，小修可以搬动开关改变其中**至多**一盏灯的状态，也可以不改变，然后她走出房间并且不与小栋交谈。\n\n接下来小栋需要走进房间，观察灯的状态并猜测小修拿到了哪个数，如果猜对那么两人获胜。\n\n游戏开始前小修和小栋需要商量一个计划，该计划是小栋在看到的灯的每种状态下会猜测哪一个字母，而小修的策略是尽可能使得小栋的猜测是正确的。\n\n请你帮他们设计一个获胜局面尽可能多的计划。", "inputFormat": "输入文件包含三个整数 $n,m,p$，$n,m$ 含义见上，$p$ 表示该测试点的分数。", "outputFormat": "输出一行 $2^n$ 个整数，其中第 $i$ 位表示灯的状态用二进制数表示为 $i-1$ 时，小栋会猜测的数。", "hint": "如果你的计划不合法，得 $0$ 分。\n\n当你的计划对于所有 $2^n\\cdot m$ 种局面都可以获胜，得 $p$ 分。\n\n否则记 $c$ 为你的计划中不能获胜的局面总数，得分为 $\\frac{p}{1.05^{c}}$。", "locale": "zh-CN"}}}
{"pid": "P14492", "type": "P", "difficulty": 7, "samples": [["8 5\n45856608 386378255 106492167 28766400 272276589 93721672", "321347828"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2018", "集训队互测", "组合数学", "快速数论变换 NTT"], "title": "[集训队互测 2018] 小 H 爱染色", "background": "试题来源：<https://loj.ac/p/2504>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "有排成一列的 $n$ 个球，编号依次为 $0$ 到 $n-1$ ，初始都为白色。小 $H$ 会重复以下操作共 $2$ 次：随机选择其中的 $m$ 个球将它们染成黑色（可以重复染黑球）。小 $H$ 对编号最小的黑球情有独钟，她想知道，如果令 $A$ 为它的编号， $F(A)$ 的期望是多少。其中， $F(x)$ 为一个次数不超过 $m$ 的多项式， $F(A)$ 表示 $x=A$ 时多项式的值。", "inputFormat": "第一行两个整数 $n,m$ 。  \n第二行 $m+1$ 个整数，第 $i$ 个整数为 $F(i-1)$ 。", "outputFormat": "一行一个整数，如果令 $E$ 表示 $F(A)$ 的期望，输出 $E\\times {\\binom{n}{m}}^2$ 模 $998244353$ 的值。", "hint": "- 对于 $10\\%$ 的数据，$n \\leq 10$，$m \\leq 5$ \n- 对于 $20\\%$ 的数据，$n \\leq 100$，$m \\leq 100$ \n- 对于 $30\\%$ 的数据，$n \\leq 1000$，$m \\leq 1000$ \n- 对于另外 $5\\%$ 的数据，$m \\leq 1000000$，且保证多项式 $F(x)=1$ \n- 对于另外 $5\\%$ 的数据，$m \\leq 5000$，且保证多项式 $F(x)=x$ \n- 对于另外 $10\\%$ 的数据，$m \\leq 5000$，且保证多项式 $F(x)=x^m$ \n- 对于 $70\\%$ 的数据，$m \\leq 5000$ \n- 对于 $80\\%$ 的数据，$m \\leq 20000$ \n- 对于 $100\\%$ 的数据，$n \\leq 998244353$，$m \\leq 1000000$ ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2018] 小 H 爱染色", "background": "试题来源：<https://loj.ac/p/2504>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "有排成一列的 $n$ 个球，编号依次为 $0$ 到 $n-1$ ，初始都为白色。小 $H$ 会重复以下操作共 $2$ 次：随机选择其中的 $m$ 个球将它们染成黑色（可以重复染黑球）。小 $H$ 对编号最小的黑球情有独钟，她想知道，如果令 $A$ 为它的编号， $F(A)$ 的期望是多少。其中， $F(x)$ 为一个次数不超过 $m$ 的多项式， $F(A)$ 表示 $x=A$ 时多项式的值。", "inputFormat": "第一行两个整数 $n,m$ 。  \n第二行 $m+1$ 个整数，第 $i$ 个整数为 $F(i-1)$ 。", "outputFormat": "一行一个整数，如果令 $E$ 表示 $F(A)$ 的期望，输出 $E\\times {\\binom{n}{m}}^2$ 模 $998244353$ 的值。", "hint": "- 对于 $10\\%$ 的数据，$n \\leq 10$，$m \\leq 5$ \n- 对于 $20\\%$ 的数据，$n \\leq 100$，$m \\leq 100$ \n- 对于 $30\\%$ 的数据，$n \\leq 1000$，$m \\leq 1000$ \n- 对于另外 $5\\%$ 的数据，$m \\leq 1000000$，且保证多项式 $F(x)=1$ \n- 对于另外 $5\\%$ 的数据，$m \\leq 5000$，且保证多项式 $F(x)=x$ \n- 对于另外 $10\\%$ 的数据，$m \\leq 5000$，且保证多项式 $F(x)=x^m$ \n- 对于 $70\\%$ 的数据，$m \\leq 5000$ \n- 对于 $80\\%$ 的数据，$m \\leq 20000$ \n- 对于 $100\\%$ 的数据，$n \\leq 998244353$，$m \\leq 1000000$ ", "locale": "zh-CN"}}}
{"pid": "P14493", "type": "P", "difficulty": 7, "samples": [["10 5 10\nb\naa\nb\nbbb\naaa\nba\nba\nbb\nba\na\n6 5 5 1 5\naba\nbbabbabba\nbb\naabbbaabb\nbbbbbbbbb\nbbbbaab\nbabbbba\naaaaaba\nb\nbaaaaa", "1\n0\n0\n0\n0\n0\n0\n1\n2\n1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["字符串", "2018", "集训队互测"], "title": "[集训队互测 2018] Fim4", "background": "试题来源：<https://loj.ac/p/2505>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "黎瑟最近在机器遗忘平台 IQ-- 上租了一台服务器来训练她的梯度上升算法，服务器上存着很大的数据集。由于这些数据集里大部分数据都有很大的相似性，所以这些数据都以一种压缩比很高的方式压缩了起来。\n\n形式化地说，压缩算法会存储一个包含 $n$ 个字符串的字典 $s$，而数据是用一个序列 $a$ 表示的，数据解压后的内容为 $s_{a_1}+s_{a_2}+\\ldots+s_{a_m}$。\n\n黎瑟本地硬盘的空间并不富裕，网络条件也不好，因此她只能不断向服务器发送请求，每次询问一个字符串 $qs_i$ 在数据中的出现次数。\n\n但数据解压后的长度实在太大，普通的朴素算法无法工作，为了让她顺利的把实验数据给你写论文，帮她实现这个算法吧。\n\n下面形式化地给出题意：给定 $n$ 个字符串 $s_i$ 和 $m$ 个 $1 \\sim n$ 之间的整数 $a_i$，令母串为 $s_{a_1}+s_{a_2}+\\ldots+s_{a_m}$，回答 $q$ 次询问，每次给出一个字符串 $qs_i$，询问这个串在母串中的出现次数。请注意 $s_i$ 和 $qs_i$ **都只由字母 `a,b` 组成。**", "inputFormat": "从标准输入读入数据。\n\n输入第一行包含三个正整数 $n,m,q$，保证 $1\\le n,m,q\\le 5\\times 10^4$。\n\n接下来 $n$ 行，每行一个字符串，表示 $s_i$。\n\n接下来一行 $m$ 个正整数，表示 $a_i$。保证 $\\forall 1\\leq i\\leq m,1\\le a_i\\le n$。\n\n接下来 $q$ 行，每行一个字符串，表示 $qs_i$。\n\n保证读入的所有字符串都只由字符 `a,b` 组成。\n\n保证 $\\sum_{1\\leq i\\leq n} |s_i|,\\sum_{1\\leq i\\leq q} |qs_i| \\le 10^5$。", "outputFormat": "输出到标准输出。\n\n输出 $q$ 行，每行一个整数，表示每个询问的答案。", "hint": "本题使用捆绑测试。每个子任务有若干个测试点，分为 $4$ 个子任务，你只有通过一个子任务的所有测试点才能得到这个子任务的分数。\n\n$1\\le n,m,q\\le 5\\times 10^4$。\n\n$\\sum_{1\\leq i\\leq n} |s_i|,\\sum_{1\\leq i\\leq q} |qs_i| \\le 10^5$。\n\n\n| 子任务 | 分值 | 特殊性质 | \n| :-: | :-: | :-: | \n| $1$ | $20$| $ \\sum_{1\\leq i\\leq m} \\text{len}\\left (s_{a_i}\\right ) \\le 10^6 $ | \n| $2$ | ^ | $ \\max \\{ \\text{len}\\left( qs_{i}\\right ) \\} \\le \\min \\{ \\text{len} \\left (s_i \\right ) \\} $ | \n| $3$ | $30$ | $ \\max \\{ \\text{len} \\left ( qs_{i}\\right ) \\} \\le 200$ |\n| $4$ | ^ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2018] Fim4", "background": "试题来源：<https://loj.ac/p/2505>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "黎瑟最近在机器遗忘平台 IQ-- 上租了一台服务器来训练她的梯度上升算法，服务器上存着很大的数据集。由于这些数据集里大部分数据都有很大的相似性，所以这些数据都以一种压缩比很高的方式压缩了起来。\n\n形式化地说，压缩算法会存储一个包含 $n$ 个字符串的字典 $s$，而数据是用一个序列 $a$ 表示的，数据解压后的内容为 $s_{a_1}+s_{a_2}+\\ldots+s_{a_m}$。\n\n黎瑟本地硬盘的空间并不富裕，网络条件也不好，因此她只能不断向服务器发送请求，每次询问一个字符串 $qs_i$ 在数据中的出现次数。\n\n但数据解压后的长度实在太大，普通的朴素算法无法工作，为了让她顺利的把实验数据给你写论文，帮她实现这个算法吧。\n\n下面形式化地给出题意：给定 $n$ 个字符串 $s_i$ 和 $m$ 个 $1 \\sim n$ 之间的整数 $a_i$，令母串为 $s_{a_1}+s_{a_2}+\\ldots+s_{a_m}$，回答 $q$ 次询问，每次给出一个字符串 $qs_i$，询问这个串在母串中的出现次数。请注意 $s_i$ 和 $qs_i$ **都只由字母 `a,b` 组成。**", "inputFormat": "从标准输入读入数据。\n\n输入第一行包含三个正整数 $n,m,q$，保证 $1\\le n,m,q\\le 5\\times 10^4$。\n\n接下来 $n$ 行，每行一个字符串，表示 $s_i$。\n\n接下来一行 $m$ 个正整数，表示 $a_i$。保证 $\\forall 1\\leq i\\leq m,1\\le a_i\\le n$。\n\n接下来 $q$ 行，每行一个字符串，表示 $qs_i$。\n\n保证读入的所有字符串都只由字符 `a,b` 组成。\n\n保证 $\\sum_{1\\leq i\\leq n} |s_i|,\\sum_{1\\leq i\\leq q} |qs_i| \\le 10^5$。", "outputFormat": "输出到标准输出。\n\n输出 $q$ 行，每行一个整数，表示每个询问的答案。", "hint": "本题使用捆绑测试。每个子任务有若干个测试点，分为 $4$ 个子任务，你只有通过一个子任务的所有测试点才能得到这个子任务的分数。\n\n$1\\le n,m,q\\le 5\\times 10^4$。\n\n$\\sum_{1\\leq i\\leq n} |s_i|,\\sum_{1\\leq i\\leq q} |qs_i| \\le 10^5$。\n\n\n| 子任务 | 分值 | 特殊性质 | \n| :-: | :-: | :-: | \n| $1$ | $20$| $ \\sum_{1\\leq i\\leq m} \\text{len}\\left (s_{a_i}\\right ) \\le 10^6 $ | \n| $2$ | ^ | $ \\max \\{ \\text{len}\\left( qs_{i}\\right ) \\} \\le \\min \\{ \\text{len} \\left (s_i \\right ) \\} $ | \n| $3$ | $30$ | $ \\max \\{ \\text{len} \\left ( qs_{i}\\right ) \\} \\le 200$ |\n| $4$ | ^ | 无 |", "locale": "zh-CN"}}}
{"pid": "P14494", "type": "P", "difficulty": 7, "samples": [["", ""]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "平衡树", "集训队互测", "交互题", "Special Judge", "启发式合并"], "title": "[集训队互测 2018] tree", "background": "请使用 C++ 20 提交。\n\n**不要引入头文件**，并在文件头加入以下的内容：\n\n```cpp\n\nvoid init(int n,int maxdep,int maxcnt);\nvoid join(int x,int y,int &id1,int &id2);\nvoid split(int x,int k,int &p1,int &p2,int &p3,int &p4);\nint visit(int x);\nvoid move(int k,int id,int x,int c,int y);\n\n```\n\n---\n\n试题来源：<https://loj.ac/p/2506>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "这是一道交互题，只为 C++ 提供接口函数。\n\nScape 家的后院种了许多二叉树，树上的每个结点最多只有一个父结点、一个左儿子和一个右儿子。作为他家的园丁，你需要帮他维护这些二叉树。\n\n结点有两种状态：正常状态以及枯萎状态。这些二叉树共有 $n$ 个结点，分别编号为 $1$ 到 $n$。初始时有 $n$ 棵二叉树，分别编号为 $1$ 到 $n$，二叉树 $i$ 上只有结点 $i$ 这一个结点，且所有结点都处于正常状态。\n\n接下来可能发生以下的 3 种事件：\n\n- Scape 要求你把二叉树 $x$ 和二叉树 $y$ 连接成一棵新的二叉树。设二叉树 $x$ 中序遍历得到的序列为 $a_1,a_2,...,a_n$，二叉树 $y$ 中序遍历得到的序列为 $b_1,b_2,...,b_m$，那么新的二叉树中序遍历得到的序列应为 $a_1,a_2,...,a_n,b_1,b_2,...,b_m$。\n- Scape 要求你把二叉树 $x$ 分离成两棵新的二叉树。设二叉树 $x$ 中序遍历得到的序列为 $a_1,a_2,...,a_n$，那么新的两棵二叉树中序遍历得到的序列应分别为 $a_1,a_2,...,a_k$ 和 $a_{k+1},a_{k+2},...,a_n$。\n- Mythological 打算来观赏二叉树 $x$。为了使这棵树变得更美观，Scape 要求你使这棵树的所有结点都变为正常状态，**且所有结点的深度不能超过 $\\mathrm{maxdep}$**。一个结点的深度即为祖先结点的个数加 $1$，根结点深度为 $1$。\n\n为了对这些树进行调整，你给每棵树分配了两个手下，我们称之为某棵树的 $1$ 号手下或者 $2$ 号手下，初始时他们都站在负责的树的唯一一个结点上。每次你可以让某个手下移动到一个相邻的结点，这时你可以命令他把该结点的某个儿子修改为某个结点（原来的儿子的子树会分离出去；新的儿子的父结点也会同时修改为当前结点）。由于某种神秘力量的影响，修改某个结点的儿子后该结点的所有祖先结点（包括自己）都会变为枯萎状态。最后他会给该结点浇上水，如果此时该结点的所有儿子（忽略空儿子）都处于正常状态的话，这个结点就会变为正常状态。\n\n**简要题意：要求用二叉树维护若干个序列。交互库会对每棵树提供两个指针，分别指向树上的某个结点。允许修改某个指针指向结点的儿子、更新某个指针指向结点的子树信息和以及把某个指针移动到相邻结点。需要通过这些指针完成合并、分裂、查询操作。**\n\n### 任务介绍\n你需要实现以下的四个函数：\n\n- `init(n, maxdep, maxcnt)`\n - 该函数只会在初始调用一次，你可以在此时进行初始化的操作。\n- `join(x, y, &id1, &id2)`\n - 表示 Scape 要求你把二叉树 $x$ 和二叉树 $y$ 连接成一棵新的二叉树。设此时存在的二叉树最大的编号为 $\\mathrm{tot}$，那么新的二叉树编号为 $\\mathrm{tot}+1$。事件结束后不存在编号为 $x$ 和 $y$ 的二叉树，并且也不能再指挥给它们分配的手下。\n - 连接两棵二叉树后，需要决定给二叉树 $\\mathrm{tot}+1$ 分配的两个手下的位置，只能从分配给二叉树 $x,y$ 的 $4$ 个手下当前所处的位置中选择。二叉树 $\\mathrm{id}+1$ 的 $1$ 号手下位于手下 $\\mathrm{id}_1$ 的位置，$2$ 号手下位于手下 $\\mathrm{id}_2$ 的位置。请对 $\\mathrm{id}_1, \\mathrm{id}_2$ 分别赋值，值为 $1,2$ 分别表示是二叉树 $x$ 的 $1,2$ 号手下；值为 $3,4$ 分别表示是二叉树 $y$ 的 $1,2$ 号手下。\n- `split(x, k, &p1, &p2, &p3, &p4)`\n - 表示 Scape 要求你把二叉树 $x$ 分离成两棵新的二叉树。设此时存在的二叉树最大的编号为 $\\mathrm{tot}$，那么新的二叉树编号为 $\\mathrm{tot}+1$ 和 $\\mathrm{tot}+2$。二叉树 $x$ 中序遍历的前 $k$ 个结点会构成二叉树 $\\mathrm{tot}+1$，剩余的结点会构成二叉树 $\\mathrm{tot}+2$。事件结束后不存在编号为 $x$ 的二叉树，并且也不能再指挥给它分配的手下。\n - 你需要对 $p_1,p_2,p_3,p_4$ 赋值来指定给两棵新的二叉树分配的手下的位置。$p_1, p_2$ 分别表示二叉树 $\\mathrm{tot}+1$ 上的 $1,2$ 号手下所处的结点编号；$p_3, p_4$ 分别表示二叉树 $\\mathrm{tot}+2$ 上的 $1,2$ 号手下所处的结点编号。\n - 保证 $1\\leq k\\lt size(x)$。\n- `visit(x)`\n - 表示 Mythological 打算观赏二叉树 $x$。你需要按 Scape 的要求调整这棵树的形态，并且返回调整过后这棵树的根结点的编号。\n\n你可以调用 `move()` 来指挥你的手下，**但是该函数的总调用次数不能超过 $2 \\times 10^6$ 次，并且在每次事件中（即交互库调用 `join()/split()/visit()` 函数到该函数结束的这段时间内）`move()` 函数的调用次数不能超过 $\\mathrm{maxcnt}$**。\n\n- `move(k, id, x, c, y)`\n - 把分配给二叉树 $k$ 的 $\\mathrm{id}$ 号手下（$\\mathrm{id}$ 为 $1$ 或 $2$）移动到结点 $x$。结点 $x$ 要么是该手下原来所处位置（即不移动），要么是其相邻结点。\n - 之后手下会把该结点的儿子 $c$（$c=0$ 表示左儿子，$c=1$ 表示右儿子）改为结点 $y$（$y=0$ 表示空结点），然后给该结点浇水。\n - 如果不希望修改 $x$ 的两个儿子，请把 $c$ 和 $y$ 设置为 $-1$，这样不会导致 $x$ 的祖先结点变为枯萎状态。\n\n### 实现细节\n你只能提交一个源文件实现上述的函数，并且遵循下面的命名和接口。\n\n```cpp\nvoid init(int n, int maxdep, int maxcnt);\nvoid join(int x, int y, int &id1, int &id2);\nvoid split(int x, int k, int &p1, int &p2, int &p3, int &p4);\nint visit(int x);\nvoid move(int k, int id, int x, int c, int y);\n```\n\n下发文件中附有样例程序。\n\n### 评测方式\n交互库将读入如下格式的输入数据：\n\n第一行为四个整数 $n,m,\\mathrm{maxdep},\\mathrm{maxcnt}$，$m$ 表示事件的个数。读入此行后交互库会调用一次 `init()` 函数。\n\n接下来 $m$ 行，每行描述一次事件。若为事件 join，输入三个整数 `1 x y`；若为事件 split，输入三个整数 `2 x k`；若为事件 visit，输入两个整数 `3 x`。读入每行后交互库会调用对应的函数。\n\n交互库会在每次调用 `visit()` 函数后进行某些输出，如果输出与数据的输出文件一致且 `move()` 函数的调用次数未超过上限，则视为通过该测试点。如果你在调用 `move()` 函数时传入了非法的参数或者返回值不合法，交互库会马上退出。\n\n通过访问输入输出文件、攻击评测系统或攻击评测库等方式所得分数无效。", "inputFormat": "", "outputFormat": "", "hint": "- 子任务 1（15分）：保证 $1\\leq n,m\\leq 1000$，$\\mathrm{maxdep}=2 \\times 10^5$，$\\mathrm{maxcnt}=2 \\times 10^6$。\n- 子任务 2（25分）：保证 $1\\leq n,m\\leq 30000$，$\\mathrm{maxdep}=2 \\times 10^5$，$\\mathrm{maxcnt}=2 \\times 10^6$。\n- 子任务 3（15分）：保证 $1\\leq n,m\\leq 10^5$，split 和 visit 事件的总个数不超过 $10000$，$\\mathrm{maxdep}=2 \\times 10^5$，$\\mathrm{maxcnt}=2 \\times 10^6$。\n- 子任务 4（15分）：保证 $1\\leq n,m\\leq 2 \\times 10^5$，没有 split 事件，visit 事件的个数不超过 $20000$，$\\mathrm{maxdep}=60$，$\\mathrm{maxcnt}=250$。\n- 子任务 5（30分）：保证 $1\\leq n,m\\leq 2 \\times 10^5$，split 和 visit 事件的总个数不超过 $20000$，$\\mathrm{maxdep}=60$，$\\mathrm{maxcnt}=250$。\n\n请注意最终测评使用的 `tree.h` 与下发的文件并不一致。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2018] tree", "background": "请使用 C++ 20 提交。\n\n**不要引入头文件**，并在文件头加入以下的内容：\n\n```cpp\n\nvoid init(int n,int maxdep,int maxcnt);\nvoid join(int x,int y,int &id1,int &id2);\nvoid split(int x,int k,int &p1,int &p2,int &p3,int &p4);\nint visit(int x);\nvoid move(int k,int id,int x,int c,int y);\n\n```\n\n---\n\n试题来源：<https://loj.ac/p/2506>，向 LOJ 和出题人表示感谢。如果版权方并不希望试题出现在洛谷，可联系洛谷管理组撤下试题。", "description": "这是一道交互题，只为 C++ 提供接口函数。\n\nScape 家的后院种了许多二叉树，树上的每个结点最多只有一个父结点、一个左儿子和一个右儿子。作为他家的园丁，你需要帮他维护这些二叉树。\n\n结点有两种状态：正常状态以及枯萎状态。这些二叉树共有 $n$ 个结点，分别编号为 $1$ 到 $n$。初始时有 $n$ 棵二叉树，分别编号为 $1$ 到 $n$，二叉树 $i$ 上只有结点 $i$ 这一个结点，且所有结点都处于正常状态。\n\n接下来可能发生以下的 3 种事件：\n\n- Scape 要求你把二叉树 $x$ 和二叉树 $y$ 连接成一棵新的二叉树。设二叉树 $x$ 中序遍历得到的序列为 $a_1,a_2,...,a_n$，二叉树 $y$ 中序遍历得到的序列为 $b_1,b_2,...,b_m$，那么新的二叉树中序遍历得到的序列应为 $a_1,a_2,...,a_n,b_1,b_2,...,b_m$。\n- Scape 要求你把二叉树 $x$ 分离成两棵新的二叉树。设二叉树 $x$ 中序遍历得到的序列为 $a_1,a_2,...,a_n$，那么新的两棵二叉树中序遍历得到的序列应分别为 $a_1,a_2,...,a_k$ 和 $a_{k+1},a_{k+2},...,a_n$。\n- Mythological 打算来观赏二叉树 $x$。为了使这棵树变得更美观，Scape 要求你使这棵树的所有结点都变为正常状态，**且所有结点的深度不能超过 $\\mathrm{maxdep}$**。一个结点的深度即为祖先结点的个数加 $1$，根结点深度为 $1$。\n\n为了对这些树进行调整，你给每棵树分配了两个手下，我们称之为某棵树的 $1$ 号手下或者 $2$ 号手下，初始时他们都站在负责的树的唯一一个结点上。每次你可以让某个手下移动到一个相邻的结点，这时你可以命令他把该结点的某个儿子修改为某个结点（原来的儿子的子树会分离出去；新的儿子的父结点也会同时修改为当前结点）。由于某种神秘力量的影响，修改某个结点的儿子后该结点的所有祖先结点（包括自己）都会变为枯萎状态。最后他会给该结点浇上水，如果此时该结点的所有儿子（忽略空儿子）都处于正常状态的话，这个结点就会变为正常状态。\n\n**简要题意：要求用二叉树维护若干个序列。交互库会对每棵树提供两个指针，分别指向树上的某个结点。允许修改某个指针指向结点的儿子、更新某个指针指向结点的子树信息和以及把某个指针移动到相邻结点。需要通过这些指针完成合并、分裂、查询操作。**\n\n### 任务介绍\n你需要实现以下的四个函数：\n\n- `init(n, maxdep, maxcnt)`\n - 该函数只会在初始调用一次，你可以在此时进行初始化的操作。\n- `join(x, y, &id1, &id2)`\n - 表示 Scape 要求你把二叉树 $x$ 和二叉树 $y$ 连接成一棵新的二叉树。设此时存在的二叉树最大的编号为 $\\mathrm{tot}$，那么新的二叉树编号为 $\\mathrm{tot}+1$。事件结束后不存在编号为 $x$ 和 $y$ 的二叉树，并且也不能再指挥给它们分配的手下。\n - 连接两棵二叉树后，需要决定给二叉树 $\\mathrm{tot}+1$ 分配的两个手下的位置，只能从分配给二叉树 $x,y$ 的 $4$ 个手下当前所处的位置中选择。二叉树 $\\mathrm{id}+1$ 的 $1$ 号手下位于手下 $\\mathrm{id}_1$ 的位置，$2$ 号手下位于手下 $\\mathrm{id}_2$ 的位置。请对 $\\mathrm{id}_1, \\mathrm{id}_2$ 分别赋值，值为 $1,2$ 分别表示是二叉树 $x$ 的 $1,2$ 号手下；值为 $3,4$ 分别表示是二叉树 $y$ 的 $1,2$ 号手下。\n- `split(x, k, &p1, &p2, &p3, &p4)`\n - 表示 Scape 要求你把二叉树 $x$ 分离成两棵新的二叉树。设此时存在的二叉树最大的编号为 $\\mathrm{tot}$，那么新的二叉树编号为 $\\mathrm{tot}+1$ 和 $\\mathrm{tot}+2$。二叉树 $x$ 中序遍历的前 $k$ 个结点会构成二叉树 $\\mathrm{tot}+1$，剩余的结点会构成二叉树 $\\mathrm{tot}+2$。事件结束后不存在编号为 $x$ 的二叉树，并且也不能再指挥给它分配的手下。\n - 你需要对 $p_1,p_2,p_3,p_4$ 赋值来指定给两棵新的二叉树分配的手下的位置。$p_1, p_2$ 分别表示二叉树 $\\mathrm{tot}+1$ 上的 $1,2$ 号手下所处的结点编号；$p_3, p_4$ 分别表示二叉树 $\\mathrm{tot}+2$ 上的 $1,2$ 号手下所处的结点编号。\n - 保证 $1\\leq k\\lt size(x)$。\n- `visit(x)`\n - 表示 Mythological 打算观赏二叉树 $x$。你需要按 Scape 的要求调整这棵树的形态，并且返回调整过后这棵树的根结点的编号。\n\n你可以调用 `move()` 来指挥你的手下，**但是该函数的总调用次数不能超过 $2 \\times 10^6$ 次，并且在每次事件中（即交互库调用 `join()/split()/visit()` 函数到该函数结束的这段时间内）`move()` 函数的调用次数不能超过 $\\mathrm{maxcnt}$**。\n\n- `move(k, id, x, c, y)`\n - 把分配给二叉树 $k$ 的 $\\mathrm{id}$ 号手下（$\\mathrm{id}$ 为 $1$ 或 $2$）移动到结点 $x$。结点 $x$ 要么是该手下原来所处位置（即不移动），要么是其相邻结点。\n - 之后手下会把该结点的儿子 $c$（$c=0$ 表示左儿子，$c=1$ 表示右儿子）改为结点 $y$（$y=0$ 表示空结点），然后给该结点浇水。\n - 如果不希望修改 $x$ 的两个儿子，请把 $c$ 和 $y$ 设置为 $-1$，这样不会导致 $x$ 的祖先结点变为枯萎状态。\n\n### 实现细节\n你只能提交一个源文件实现上述的函数，并且遵循下面的命名和接口。\n\n```cpp\nvoid init(int n, int maxdep, int maxcnt);\nvoid join(int x, int y, int &id1, int &id2);\nvoid split(int x, int k, int &p1, int &p2, int &p3, int &p4);\nint visit(int x);\nvoid move(int k, int id, int x, int c, int y);\n```\n\n下发文件中附有样例程序。\n\n### 评测方式\n交互库将读入如下格式的输入数据：\n\n第一行为四个整数 $n,m,\\mathrm{maxdep},\\mathrm{maxcnt}$，$m$ 表示事件的个数。读入此行后交互库会调用一次 `init()` 函数。\n\n接下来 $m$ 行，每行描述一次事件。若为事件 join，输入三个整数 `1 x y`；若为事件 split，输入三个整数 `2 x k`；若为事件 visit，输入两个整数 `3 x`。读入每行后交互库会调用对应的函数。\n\n交互库会在每次调用 `visit()` 函数后进行某些输出，如果输出与数据的输出文件一致且 `move()` 函数的调用次数未超过上限，则视为通过该测试点。如果你在调用 `move()` 函数时传入了非法的参数或者返回值不合法，交互库会马上退出。\n\n通过访问输入输出文件、攻击评测系统或攻击评测库等方式所得分数无效。", "inputFormat": "", "outputFormat": "", "hint": "- 子任务 1（15分）：保证 $1\\leq n,m\\leq 1000$，$\\mathrm{maxdep}=2 \\times 10^5$，$\\mathrm{maxcnt}=2 \\times 10^6$。\n- 子任务 2（25分）：保证 $1\\leq n,m\\leq 30000$，$\\mathrm{maxdep}=2 \\times 10^5$，$\\mathrm{maxcnt}=2 \\times 10^6$。\n- 子任务 3（15分）：保证 $1\\leq n,m\\leq 10^5$，split 和 visit 事件的总个数不超过 $10000$，$\\mathrm{maxdep}=2 \\times 10^5$，$\\mathrm{maxcnt}=2 \\times 10^6$。\n- 子任务 4（15分）：保证 $1\\leq n,m\\leq 2 \\times 10^5$，没有 split 事件，visit 事件的个数不超过 $20000$，$\\mathrm{maxdep}=60$，$\\mathrm{maxcnt}=250$。\n- 子任务 5（30分）：保证 $1\\leq n,m\\leq 2 \\times 10^5$，split 和 visit 事件的总个数不超过 $20000$，$\\mathrm{maxdep}=60$，$\\mathrm{maxcnt}=250$。\n\n请注意最终测评使用的 `tree.h` 与下发的文件并不一致。", "locale": "zh-CN"}}}
{"pid": "P14495", "type": "P", "difficulty": 1, "samples": [["10", "3 7"], ["-1", "-2 1"], ["3", "1 2"], ["0", "-999 999"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "2025", "Special Judge", "枚举", "ICPC"], "title": "[NCPC 2025] Arithmetic Adaptation", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fnzeqd1y.png)\n\nPostcard showing a Norwegian by solving Sample 3.\n  Coloured black and white photo,\n  National Library of Norway.\n:::", "description": "Practice does make perfect! You have finally achieved proficiency at the task of adding two small nonzero integers $a$ and $b$ to compute their sum $a+b$. Before you move on to studying four-digit numbers, you want to achieve mastery by also understanding the inverse problem: given integer $s$, determine nonzero $a$ and $b$ such that $a+b=s$. None of the numbers may use more than $3$ digits.", "inputFormat": "The input consists of:\n\n- One line with an integer $s$ such that $-999\\leq s\\leq 999$.", "outputFormat": "Output two integers\n  $a$ (with $-999\\leq a\\leq 999$ and $a\\neq 0$) \n  and \n  $b$ (with $-999\\leq b\\leq 999$ and $b\\neq 0$) \n  such that $a+b=s$.\n  If there is more than one valid solution, you may output any one of them.", "hint": "### Explanation of Sample Input 1\n\nOn input $\\texttt{10}$, the output $\\texttt{3 7}$ is correct because $3+7=10$. Note that many other outputs would also be correct, such as $\\texttt{2 8}$, $\\texttt{11 -1}$, or even $\\texttt{-849 859}$. On the other hand, the answer $\\texttt{4 7}$ would be $\\emph{wrong}$ (because $4+7\\neq 10$), and so would $\\texttt{10 0}$ (because both $a$ and $b$ must be nonzero) and $\\texttt{1000 -990}$ (because both $a$ and $b$ must have at most three digits.)", "locale": "en", "translations": {"en": {"title": "[NCPC 2025] Arithmetic Adaptation", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fnzeqd1y.png)\n\nPostcard showing a Norwegian by solving Sample 3.\n  Coloured black and white photo,\n  National Library of Norway.\n:::", "description": "Practice does make perfect! You have finally achieved proficiency at the task of adding two small nonzero integers $a$ and $b$ to compute their sum $a+b$. Before you move on to studying four-digit numbers, you want to achieve mastery by also understanding the inverse problem: given integer $s$, determine nonzero $a$ and $b$ such that $a+b=s$. None of the numbers may use more than $3$ digits.", "inputFormat": "The input consists of:\n\n- One line with an integer $s$ such that $-999\\leq s\\leq 999$.", "outputFormat": "Output two integers\n  $a$ (with $-999\\leq a\\leq 999$ and $a\\neq 0$) \n  and \n  $b$ (with $-999\\leq b\\leq 999$ and $b\\neq 0$) \n  such that $a+b=s$.\n  If there is more than one valid solution, you may output any one of them.", "hint": "### Explanation of Sample Input 1\n\nOn input $\\texttt{10}$, the output $\\texttt{3 7}$ is correct because $3+7=10$. Note that many other outputs would also be correct, such as $\\texttt{2 8}$, $\\texttt{11 -1}$, or even $\\texttt{-849 859}$. On the other hand, the answer $\\texttt{4 7}$ would be $\\emph{wrong}$ (because $4+7\\neq 10$), and so would $\\texttt{10 0}$ (because both $a$ and $b$ must be nonzero) and $\\texttt{1000 -990}$ (because both $a$ and $b$ must have at most three digits.)", "locale": "en"}, "zh-CN": {"title": "[NCPC 2025] Arithmetic Adaptation", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fnzeqd1y.png)\n\n明信片：一位挪威人正在解样例 3。  \n黑白彩色照片，挪威国家图书馆藏。\n:::", "description": "熟能生巧！你终于已经熟练掌握了将两个非零小整数 $a$ 与 $b$ 相加、从而得到它们的和 $a+b$ 这一任务。在开始学习四位数之前，你希望更进一步，掌握其逆问题：给定整数 $s$，找出满足 $a+b=s$ 的非零整数 $a$ 和 $b$。所有数字都不得超过 $3$ 位。\n", "inputFormat": "输入包含：\n\n- 一行，一个整数 $s$，满足 $-999 \\le s \\le 999$。", "outputFormat": "输出两个整数  \n$a$（满足 $-999 \\le a \\le 999$ 且 $a \\neq 0$）和  \n$b$（满足 $-999 \\le b \\le 999$ 且 $b \\neq 0$），  \n使得 $a+b=s$。\n\n若存在多个合法答案，你可以输出其中任意一个。", "hint": "### 样例 1 解释\n\n输入 $\\texttt{10}$ 时，输出 $\\texttt{3 7}$ 是正确的，因为 $3+7=10$。  \n当然，其他许多输出也同样正确，例如 $\\texttt{2 8}$、$\\texttt{11 -1}$，甚至 $\\texttt{-849 859}$。  \n\n而 $\\texttt{4 7}$ 则 **错误**（因为 $4+7\\neq 10$），  \n$\\texttt{10 0}$ 也 **错误**（因为 $a$ 与 $b$ 必须都非零），  \n$\\texttt{1000 -990}$ 同样 **错误**（因为 $a$ 与 $b$ 都必须至多为三位数）。\n\n——翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P14496", "type": "P", "difficulty": 0, "samples": [["3 250 350\n178 32\n200 60\n297 50", "upright 1\nstacked 3 2"], ["2 300 300\n290 60\n290 60", "impossible"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "Special Judge", "ICPC"], "title": "[NCPC 2025] Bohemian Bookshelf", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e4xpr0c2.png)\n\n图为 Dr. Philippe Garigue 收藏中的古籍书架。  \n图片来源：Taylor Tryburski，CC BY-SA 4.0。\n:::", "description": "在摆放书籍的问题上，藏书家与室内设计师往往难以达成一致：直立？横放？究竟哪种方式才是“正确”的？  \n\n而你，总是对传统见解保持怀疑，于是选择了——两者都要！\n\n你的书架呈现出一种别具风格的组合：整齐直立的书籍旁，是一摞精心排列的水平堆叠书籍，看上去宛如文学版的阶梯神庙。整体效果既展示了波西米亚式的自由随性，又带着点可爱的学者式心不在焉，同时又有足够的精致暗示：你确实读过其中的一些书。\n\n一本书由其书脊高度与厚度来描述。如果它的高度不超过书架的高度，则可以直立摆放。  \n\n或者，书也可以横放，彼此叠加成一摞；出于美观考虑，这个堆叠中书籍的书脊高度必须按不增顺序排列。堆叠中所有书籍的总厚度不得超过书架高度。  \n\n而直立书籍的总厚度与堆叠的宽度之和不得超过书架的宽度。\n\n样例 1 中的书籍可以按照下图摆放：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/vm62fwym.png)\n:::", "inputFormat": "输入包含：\n\n- 一行，三个整数 $N$, $H$, $W$（$2 \\le N \\le 100$, $130 \\le H \\le 350$, $300 \\le W \\le 900$），分别表示要摆放的书本数量、书架高度（毫米）与书架宽度（毫米），\n- 接下来 $N$ 行，每行两个整数 $h$, $t$（$76 \\le h \\le 483$, $5 \\le t \\le 60$），表示一本书的书脊高度与厚度（毫米）。题目保证每本书单独放置时，既可直立也可横放，因此满足 $h \\le \\max(W, H)$。\n", "outputFormat": "输出两行。\n\n第一行以单词 `upright` 开头，随后输出所有直立书籍的编号。  \n\n第二行以单词 `stacked` 开头，随后输出堆叠中书籍的编号，从底到顶依次排列。\n\n要求至少有一本直立书籍，且至少有一本堆叠书籍。书籍编号为 $1$ 至 $N$。\n\n如果答案不唯一，你可以输出任意一个。若不存在满足条件的摆放方式，则输出 `impossible`。", "hint": "翻译由 ChatGPT-5 完成", "locale": "zh-CN", "translations": {"en": {"title": "[NCPC 2025] Bohemian Bookshelf", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e4xpr0c2.png)\n\nImage of antiquarian books on a shelf from the Dr. Philippe Garigue Collection.\n   Credit: Taylor Tryburski, CC BY-SA 4.0.\n:::", "description": "When it comes to shelving books, bibliophiles and interior decorators rarely agree: vertical or horizontal---what’s the right way? Ever skeptical of orthodoxy, you embrace both!\nYour bookshelf displays a composed mix: upright volumes standing with quiet discipline next to a single, neatly arranged stack, like a literary ziggurat. The effect signals bohemian chic with a touch of endearing academic absent-mindedness and just enough polish to suggest you’ve definitely read some of the books.\n\nA book is characterised by its spine height and thickness. It can fit upright if its height does not exceed the bookshelf's height. Alternatively, books can form a stack by being laid flat on their sides on top of each other;  for aesthetic reasons the books forming such a stack must be arranged in nonincreasing order of spine height. Their total thickness may not exceed the height of the bookshelf.\nThe total thickness of the upright books and the width of the stack may not exceed the width of the bookshelf.\n\nThe books in Sample $1$ can be arranged like this:\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/vm62fwym.png)\n:::\n\n", "inputFormat": "The input consists of:\n\n- One line with integers $N$, $H$, $W$ ($2\\leq N\\leq 100$, $130 \\leq H\\leq 350$, $300\\leq W\\leq 900$), the number of books you want to display, the height of the bookshelf in millimeters, and the width of the bookshelf in millimeters,\n- $N$ lines, one for each book, with two integers $h$, $t$ ($76\\leq h\\leq 483$, $5\\leq t\\leq 60$), the book's spine height and thickness in millimeters. On its own, every book fits on the shelf either standing up or on its side, so we also have $h\\leq \\max(W, H)$.", "outputFormat": "Output two lines.\n\nThe first line starts with the word $\\texttt{upright}$, followed by the indices of the upright books. The second line starts with the word $\\texttt{stacked}$, followed by the indices of the books in the stack, in order from bottom to top. There must be at least one upright book and at least one stacked book. Books are indexed $1$, $\\ldots$, $N$.\n\nIf there is more than one solution, you may output any one of them. If no such arrangement is possible, print $\\texttt{impossible}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[NCPC 2025] Bohemian Bookshelf", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e4xpr0c2.png)\n\n图为 Dr. Philippe Garigue 收藏中的古籍书架。  \n图片来源：Taylor Tryburski，CC BY-SA 4.0。\n:::", "description": "在摆放书籍的问题上，藏书家与室内设计师往往难以达成一致：直立？横放？究竟哪种方式才是“正确”的？  \n\n而你，总是对传统见解保持怀疑，于是选择了——两者都要！\n\n你的书架呈现出一种别具风格的组合：整齐直立的书籍旁，是一摞精心排列的水平堆叠书籍，看上去宛如文学版的阶梯神庙。整体效果既展示了波西米亚式的自由随性，又带着点可爱的学者式心不在焉，同时又有足够的精致暗示：你确实读过其中的一些书。\n\n一本书由其书脊高度与厚度来描述。如果它的高度不超过书架的高度，则可以直立摆放。  \n\n或者，书也可以横放，彼此叠加成一摞；出于美观考虑，这个堆叠中书籍的书脊高度必须按不增顺序排列。堆叠中所有书籍的总厚度不得超过书架高度。  \n\n而直立书籍的总厚度与堆叠的宽度之和不得超过书架的宽度。\n\n样例 1 中的书籍可以按照下图摆放：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/vm62fwym.png)\n:::", "inputFormat": "输入包含：\n\n- 一行，三个整数 $N$, $H$, $W$（$2 \\le N \\le 100$, $130 \\le H \\le 350$, $300 \\le W \\le 900$），分别表示要摆放的书本数量、书架高度（毫米）与书架宽度（毫米），\n- 接下来 $N$ 行，每行两个整数 $h$, $t$（$76 \\le h \\le 483$, $5 \\le t \\le 60$），表示一本书的书脊高度与厚度（毫米）。题目保证每本书单独放置时，既可直立也可横放，因此满足 $h \\le \\max(W, H)$。\n", "outputFormat": "输出两行。\n\n第一行以单词 `upright` 开头，随后输出所有直立书籍的编号。  \n\n第二行以单词 `stacked` 开头，随后输出堆叠中书籍的编号，从底到顶依次排列。\n\n要求至少有一本直立书籍，且至少有一本堆叠书籍。书籍编号为 $1$ 至 $N$。\n\n如果答案不唯一，你可以输出任意一个。若不存在满足条件的摆放方式，则输出 `impossible`。", "hint": "翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P14497", "type": "P", "difficulty": 2, "samples": [["Mon 08:00\nMon 15:00", "7 hours"], ["Mon 10:00\nWed 08:59", "1 day, 22 hours, 59 minutes"], ["Fri 20:00\nMon 08:00", "2 days and 12 hours"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "2025", "ICPC"], "title": "[NCPC 2025] Crochet Competition", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x6xnvftu.png)\n\nCrocheting.\n    License: CC BY-SA 3.0 by floret on Wikimedia Commons.\n:::", "description": "The National Crochet Pattern Competition (NCPC) is an annual team-based event for crocheters of all skill levels, from beginner to expert. Teams design, write, and crochet original patterns within a time limit, which can range from minutes to a full week depending on the complexity---sometimes spanning weekends. Contestants may take breaks to eat, sleep, or go home, but the timer continues running.\n\nNCPC has asked you to develop a system that calculates the total competition duration from the start and end times, provided with weekday, hour, and minute. The reported duration should be precise, correctly expressed in days, hours, and minutes, using as few components as necessary while minimizing the sum of the integer values.", "inputFormat": "Input consists of two lines.\n\n- The first line gives the competition's start time. \n- The second line gives the competition's end time.\n\nTimes are formatted as $\\texttt{Www HH:MM}$, where\n  - $\\texttt{Www}$ is the three-letter weekday abbreviation: $\\texttt{Mon},  \\texttt{Tue}, \\texttt{Wed}, \\texttt{Thu}, \\texttt{Fri}, \\texttt{Sat}$, or $\\texttt{Sun}$. \n    - $\\texttt{HH}$ the two-digit hour, from $00$ to $23$.\n    - $\\texttt{MM}$ is the two-digits minutes, from $00$ to $59$.\n\nIf the start and end times are identical, the competition lasts exactly one week.", "outputFormat": "Output the competition duration in days, hours, and minutes, using the singular or plural form as appropriate (e.g., 1 day, 2 days). \n\nList the components in order -- days, hours, minutes -- separating three components with commas and two with `and`; omit any component with a value of zero.", "hint": "", "locale": "en", "translations": {"en": {"title": "[NCPC 2025] Crochet Competition", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x6xnvftu.png)\n\nCrocheting.\n    License: CC BY-SA 3.0 by floret on Wikimedia Commons.\n:::", "description": "The National Crochet Pattern Competition (NCPC) is an annual team-based event for crocheters of all skill levels, from beginner to expert. Teams design, write, and crochet original patterns within a time limit, which can range from minutes to a full week depending on the complexity---sometimes spanning weekends. Contestants may take breaks to eat, sleep, or go home, but the timer continues running.\n\nNCPC has asked you to develop a system that calculates the total competition duration from the start and end times, provided with weekday, hour, and minute. The reported duration should be precise, correctly expressed in days, hours, and minutes, using as few components as necessary while minimizing the sum of the integer values.", "inputFormat": "Input consists of two lines.\n\n- The first line gives the competition's start time. \n- The second line gives the competition's end time.\n\nTimes are formatted as $\\texttt{Www HH:MM}$, where\n  - $\\texttt{Www}$ is the three-letter weekday abbreviation: $\\texttt{Mon},  \\texttt{Tue}, \\texttt{Wed}, \\texttt{Thu}, \\texttt{Fri}, \\texttt{Sat}$, or $\\texttt{Sun}$. \n    - $\\texttt{HH}$ the two-digit hour, from $00$ to $23$.\n    - $\\texttt{MM}$ is the two-digits minutes, from $00$ to $59$.\n\nIf the start and end times are identical, the competition lasts exactly one week.", "outputFormat": "Output the competition duration in days, hours, and minutes, using the singular or plural form as appropriate (e.g., 1 day, 2 days). \n\nList the components in order -- days, hours, minutes -- separating three components with commas and two with `and`; omit any component with a value of zero.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[NCPC 2025] Crochet Competition", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x6xnvftu.png)\n\n钩针编织。  \n许可协议：Wikimedia Commons 上 floret 提供的 CC BY-SA 3.0。\n:::", "description": "全国钩针图样竞赛（National Crochet Pattern Competition，NCPC）是一项年度团队赛事，面向从初学者到专家的所有钩织爱好者。参赛队伍需在限定时间内设计、撰写并完成原创钩织图样，时间限制视复杂度而定，可能从几分钟到整整一周——有时甚至跨越整个周末。参赛者可以在比赛期间吃饭、睡觉或回家休息，但计时不会因此暂停。\n\nNCPC 现要求你开发一个系统：在给定开始时间和结束时间（包括星期几、小时和分钟）的情况下，计算比赛总时长。输出的总时长必须精确，以天、小时与分钟的形式表示，且应尽可能使用最少的组成部分，同时使整数值的总和最小。\n", "inputFormat": "输入共两行。\n\n- 第一行给出比赛的开始时间。\n- 第二行给出比赛的结束时间。\n\n时间的格式为 $\\texttt{Www HH:MM}$，其中：\n\n- $\\texttt{Www}$ 为三字母的星期缩写：$\\texttt{Mon}$、$\\texttt{Tue}$、$\\texttt{Wed}$、$\\texttt{Thu}$、$\\texttt{Fri}$、$\\texttt{Sat}$ 或 $\\texttt{Sun}$；\n- $\\texttt{HH}$ 为两位数的小时，范围为 $00$ 至 $23$；\n- $\\texttt{MM}$ 为两位数的分钟，范围为 $00$ 至 $59$。\n\n如果开始时间与结束时间完全相同，则比赛时长恰好为一整周。", "outputFormat": "输出比赛时长，使用天、小时与分钟的单位，并根据数值选择单复数形式（例如 `1 day`，`2 days`）。\n\n输出顺序为：天、小时、分钟。 \n\n当存在三个部分时用逗号分隔，当存在两个部分时用 `and` 连接。  \n\n若某个部分的值为零，则省略该部分。\n", "hint": "翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P14498", "type": "P", "difficulty": 0, "samples": [["3\n1 0\n0 0\n1 1", "2.0"], ["10\n-1 -7\n-1 -11\n0 -9\n2 2\n1 -2\n2 -1\n3 1\n-1 -5\n0 -3\n-3 -11", "17.186912597118443"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "Special Judge", "ICPC"], "title": "[NCPC 2025] Dune Dash", "background": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/9gqyhbfq.png)\n\nA runner during a 15-kilometer run through the Grand Bara Desert in Djibouti. Public domain photo by Joshua Bruns.\n:::", "description": "You signed up for the $\\emph{Dune Dash}$, a running race across the desert. Everything went well — except that in the excitement, you forgot to start $\\emph{StrideTrack}$, the app that records how far you've run. All you have now are the official checkpoint locations, but not the order in which you passed through them.\n\nFormally, the race consisted of $N$ checkpoints, each given by its coordinates in the Euclidean plane. The sequence in which they were visited is unknown to you, but the organizers designed the course to prevent anyone from straying off route. In particular, if $q_1, q_2, \\dots, q_N$ is the correctly ordered list of the checkpoints along the race, then for every triple $i < j < k$ it holds that\n \n$$\\text{dist}(q_i, q_k) > \\max(\\text{dist}(q_i, q_j), \\text{dist}(q_j, q_k) )$$\n\nwhere $\\text{dist}(p,q)$ denotes the Euclidean distance between points $p$ and $q$. Your task is to determine the total length of the race.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/bs9taqt8.png)\n\nIllustration of sample 2. The dashed line shows where the race went.\n:::", "inputFormat": "The first line consists of the integer $N$ ($2 \\leq N \\leq 2 \\cdot 10^5$). The following $N$ lines each contain two integers $x_i$ and $y_i$ ($-10^9 \\leq x_i, y_i \\leq 10^9$). These are the coordinates of each checkpoint. \n\nThe checkpoints are not necessarily in the order in which they were visited during the race. It is guaranteed that there is some ordering of the checkpoints such that they satisfy the distance requirements above.\n\nThe $N$ points given in the input are all distinct.", "outputFormat": "Print one floating point number, the length of the race. Your answer will be correct if it has an absolute or relative error of at most $10^{-6}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[NCPC 2025] Dune Dash", "background": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/9gqyhbfq.png)\n\nA runner during a 15-kilometer run through the Grand Bara Desert in Djibouti. Public domain photo by Joshua Bruns.\n:::", "description": "You signed up for the $\\emph{Dune Dash}$, a running race across the desert. Everything went well — except that in the excitement, you forgot to start $\\emph{StrideTrack}$, the app that records how far you've run. All you have now are the official checkpoint locations, but not the order in which you passed through them.\n\nFormally, the race consisted of $N$ checkpoints, each given by its coordinates in the Euclidean plane. The sequence in which they were visited is unknown to you, but the organizers designed the course to prevent anyone from straying off route. In particular, if $q_1, q_2, \\dots, q_N$ is the correctly ordered list of the checkpoints along the race, then for every triple $i < j < k$ it holds that\n \n$$\\text{dist}(q_i, q_k) > \\max(\\text{dist}(q_i, q_j), \\text{dist}(q_j, q_k) )$$\n\nwhere $\\text{dist}(p,q)$ denotes the Euclidean distance between points $p$ and $q$. Your task is to determine the total length of the race.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/bs9taqt8.png)\n\nIllustration of sample 2. The dashed line shows where the race went.\n:::", "inputFormat": "The first line consists of the integer $N$ ($2 \\leq N \\leq 2 \\cdot 10^5$). The following $N$ lines each contain two integers $x_i$ and $y_i$ ($-10^9 \\leq x_i, y_i \\leq 10^9$). These are the coordinates of each checkpoint. \n\nThe checkpoints are not necessarily in the order in which they were visited during the race. It is guaranteed that there is some ordering of the checkpoints such that they satisfy the distance requirements above.\n\nThe $N$ points given in the input are all distinct.", "outputFormat": "Print one floating point number, the length of the race. Your answer will be correct if it has an absolute or relative error of at most $10^{-6}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[NCPC 2025] Dune Dash", "background": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/9gqyhbfq.png)\n\n迪拜蒂大巴拉沙漠中一场 15 公里赛跑的选手。  \n照片由 Joshua Bruns 拍摄，公有领域。\n:::", "description": "你报名参加了 **Dune Dash**（沙丘冲刺），一项横穿沙漠的长跑比赛。一切都很顺利——除了在兴奋之中，你忘记启动 **StrideTrack**，那款记录你已跑距离的应用程序。现在你仅剩下官方检查点的位置，但却不知道你通过它们的先后顺序。\n\n形式化地说，比赛包含 $N$ 个检查点，每个检查点由其在欧几里得平面上的坐标给出。你经过这些点的顺序未知，但赛事组织者设计赛道时保证选手无法偏离路线。具体而言，如果 $q_1, q_2, \\dots, q_N$ 是比赛过程中正确的检查点访问顺序，那么对于所有满足 $i<j<k$ 的三元组，都有：\n\n$$\n\\text{dist}(q_i, q_k) \\;>\\; \\max\\bigl(\\text{dist}(q_i, q_j),\\ \\text{dist}(q_j, q_k)\\bigr)\n$$\n\n其中 $\\text{dist}(p,q)$ 表示点 $p$ 与点 $q$ 的欧几里得距离。你的任务是确定比赛的总长度。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/bs9taqt8.png)\n\n样例 2 的示意图。虚线表示实际赛道。\n:::", "inputFormat": "第一行包含整数 $N$（$2 \\le N \\le 2 \\cdot 10^5$）。  \n接下来的 $N$ 行中，每行包含两个整数 $x_i$ 与 $y_i$（$-10^9 \\le x_i, y_i \\le 10^9$），表示检查点的坐标。\n\n检查点的输入顺序不一定为实际经过顺序。  \n\n保证存在某种排列方式使得检查点满足上述距离条件。\n\n输入中的 $N$ 个点均两两不同。", "outputFormat": "输出一个浮点数，即比赛总长度。  \n\n当你的答案的绝对误差或相对误差不超过 $10^{-6}$ 时，将被视为正确。", "hint": "翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P14499", "type": "P", "difficulty": 0, "samples": [["4\n###.###\n##C..##\n#..CC.#\n.C.....", "###B###\n##BBB##\n#AABAA#\nAAAAAAA"], ["2\n#.#\n.C.", "impossible"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "Special Judge", "ICPC"], "title": "[NCPC 2025] Egyptian Equality", "background": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/zwfirflh.png)\n\nKhafre's pyramid at Giza. At the top of the pyramid you can see many remaining casing stones. Image by Daaaveee, [commons.wikimedia.org](https://commons.wikimedia.org/wiki/File:Chichen\\_Itza\\_3.jpg)\n:::", "description": "Friendly but competing archaeologists Ameena and Bilal are searching for the lost entrance to the $\\emph{Nomarch's Celestial Pyramid of Cauris}$. Over the Millennia, much of the outer layer has been stripped away, so the entrance must lie behind one of the remaining \"casing\" stones -- the smooth limestone blocks that once covered the entire monument -- on the north face of the pyramid.\n\nTo avoid interference between their sensor arrays, Ameena and Bilal will divide the north face into two connected regions and scan one region each. For fairness, each region must contain the same number of casing stones.\n\nThey model the pyramid's north face as a triangular grid. The grid has $N$ rows and $2N - 1$ columns, with the pyramid occupying a subset of these cells: the middle cell of the first row, the middle three cells of the second row, the middle five of the third row, and so on. A nonempty subset of the cells in the pyramid are casing stones.\n\nYour task is to partition the pyramid into two regions $A$ and $B$ such that:\n\n- Every cell in the pyramid belongs to exactly one region.\n- Each region is connected.\n  (A region is connected if it is possible to walk between any two of its cells by moving between adjacent cells. Two cells are adjacent if they share a side.)\n- The two regions contain the same number of casing stones.", "inputFormat": "The first line consists of the integer $N$ ($2 \\leq N \\leq 300$). The following $N$ lines each contain a string of $2N - 1$ characters. These strings describe where the casing stones are. The character $\\verb|#|$ represents a cell that does not belong to the pyramid, $\\verb|.|$ is a cell that is not a casing stone, and $\\verb|C|$ is a casing stone. There will be at least one casing stone in the pyramid.", "outputFormat": "If it is impossible to partition the pyramid in a valid way, print $\\verb|impossible|$. Otherwise, print $N$ lines where each line contains a string of length $2N - 1$. These lines describe the partition of the pyramid. The character $\\verb|#|$ represents a cell that does not belong to the pyramid, $\\verb|A|$ represents a cell that belongs to Ameena, and $\\verb|B|$ represents a cell that belongs to Bilal. If there are multiple valid solutions, you can print any one of them.", "hint": "", "locale": "en", "translations": {"en": {"title": "[NCPC 2025] Egyptian Equality", "background": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/zwfirflh.png)\n\nKhafre's pyramid at Giza. At the top of the pyramid you can see many remaining casing stones. Image by Daaaveee, [commons.wikimedia.org](https://commons.wikimedia.org/wiki/File:Chichen\\_Itza\\_3.jpg)\n:::", "description": "Friendly but competing archaeologists Ameena and Bilal are searching for the lost entrance to the $\\emph{Nomarch's Celestial Pyramid of Cauris}$. Over the Millennia, much of the outer layer has been stripped away, so the entrance must lie behind one of the remaining \"casing\" stones -- the smooth limestone blocks that once covered the entire monument -- on the north face of the pyramid.\n\nTo avoid interference between their sensor arrays, Ameena and Bilal will divide the north face into two connected regions and scan one region each. For fairness, each region must contain the same number of casing stones.\n\nThey model the pyramid's north face as a triangular grid. The grid has $N$ rows and $2N - 1$ columns, with the pyramid occupying a subset of these cells: the middle cell of the first row, the middle three cells of the second row, the middle five of the third row, and so on. A nonempty subset of the cells in the pyramid are casing stones.\n\nYour task is to partition the pyramid into two regions $A$ and $B$ such that:\n\n- Every cell in the pyramid belongs to exactly one region.\n- Each region is connected.\n  (A region is connected if it is possible to walk between any two of its cells by moving between adjacent cells. Two cells are adjacent if they share a side.)\n- The two regions contain the same number of casing stones.", "inputFormat": "The first line consists of the integer $N$ ($2 \\leq N \\leq 300$). The following $N$ lines each contain a string of $2N - 1$ characters. These strings describe where the casing stones are. The character $\\verb|#|$ represents a cell that does not belong to the pyramid, $\\verb|.|$ is a cell that is not a casing stone, and $\\verb|C|$ is a casing stone. There will be at least one casing stone in the pyramid.", "outputFormat": "If it is impossible to partition the pyramid in a valid way, print $\\verb|impossible|$. Otherwise, print $N$ lines where each line contains a string of length $2N - 1$. These lines describe the partition of the pyramid. The character $\\verb|#|$ represents a cell that does not belong to the pyramid, $\\verb|A|$ represents a cell that belongs to Ameena, and $\\verb|B|$ represents a cell that belongs to Bilal. If there are multiple valid solutions, you can print any one of them.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[NCPC 2025] Egyptian Equality", "background": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/zwfirflh.png)\n\n吉萨的卡夫拉金字塔。在金字塔顶端可以看到许多残存的外包石。  \n图片作者 Daaaveee，来源：commons.wikimedia.org。\n:::\n", "description": "友好但彼此竞争的考古学家 Ameena 与 Bilal 正在寻找 **Nomarch’s Celestial Pyramid of Cauris**（州长的天界金字塔）的失落入口。经过数千年，外层的大部分已被剥离，因此入口必然位于北侧剩下的某一块“外包石”之后——这些光滑的石灰岩块曾覆盖整个金字塔。\n\n为了避免彼此的传感器阵列相互干扰，Ameena 和 Bilal 将把金字塔的北面划分成两个相连的区域，各扫描一个。为了公平，每个区域必须包含相同数量的外包石。\n\n他们将金字塔的北面建模为一个三角形的网格。该网格有 $N$ 行、$2N - 1$ 列，金字塔占据其中的一个子集：第一行是中间的一个格子，第二行是中间的三个格子，第三行是中间的五个格子，以此类推。网格中的某些非空格子是外包石。\n\n你的任务是将金字塔划分成两个区域 $A$ 和 $B$，使其满足：\n\n- 金字塔中的每一个格子恰好属于一个区域；\n- 每个区域都是连通的（如果可以通过相邻格子一步步走到区域内任意两个格子之间，则称该区域连通；两个格子若共享一条边则相邻）；\n- 两个区域包含的外包石数量相同。", "inputFormat": "第一行包含整数 $N$（$2 \\le N \\le 300$）。  \n接下来的 $N$ 行中，每行包含 $2N - 1$ 个字符，用于描述哪些格子是外包石。  \n字符含义如下：\n\n- `#` 表示不属于金字塔的格子；\n- `.` 表示属于金字塔但不是外包石的格子；\n- `C` 表示外包石。\n\n金字塔中至少存在一块外包石。", "outputFormat": "如果无法对金字塔进行满足要求的划分，则输出 `impossible`。  \n否则输出 $N$ 行，每行一个长度为 $2N - 1$ 的字符串，用于描述划分方式。其中：\n\n- `#` 表示不属于金字塔的格子；\n- `A` 表示属于 Ameena 的格子；\n- `B` 表示属于 Bilal 的格子。\n\n如果存在多个合法答案，你可以输出任意一个。", "hint": "翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P14500", "type": "P", "difficulty": 6, "samples": [["5\n2 1 2 1 3\n0 2 2 3 2", "5 9\n2 4\n4 5\n3 5\n3 2\n5 2\n1 3\n1 4\n5 3\n5 4"], ["3\n2 2 1\n1 1 2\n", "impossible"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "Special Judge", "ICPC"], "title": "[NCPC 2025] Follower Forensics", "background": "", "description": "Your social media company ConnectHub prides itself on how easily information spreads through its network.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/8a5w3ury.png)\n:::\n\nAccounts can share posts directly with their followers using the share button, or with the accounts they follow by posting in the comments. ConnectHub is famous for the virality of its users: a post from any account was able to reach every other account, possibly through a chain of shares and comments.\n\nBut disaster struck: a database mishap wiped out all records of who follows whom. One piece of data may have survived, though — for each account, you have the number of its followers and the number of accounts it follows. Maybe even those numbers have been corrupted, but it's all you have.\n\nYour task is to rebuild the missing database so that these counts are correct, and ConnectHub once again has full virality.", "inputFormat": "The input consists of:\n\n- One line with an integer $n$, the number of accounts, where $1 \\leq n \\leq 100\\,000$.\n- One line with $n$ integers $a_1,\\ldots, a_n$ satisfying $0 \\leq a_i \\leq n$ for each $i$, where $a_i$ is the number of accounts followed by the $i$th account.\n- One line with $n$ integers $b_1,\\ldots, b_n$ satisfying $0 \\leq b_i \\leq n$ for each  $i$, where $b_i$ is the number of accounts following the $i$th account.\n\nAdditionally, it is guaranteed that \n$$\n    \\sum_{i=1}^n a_i + \\sum_{i=1}^n b_i \\leq 2\\,000\\,000.\n$$\n\nNote that the input is not guaranteed to allow for any reconstruction, fully viral or not.\nFor those familiar with that terminology, full virality is equivalent to weak connectivity.", "outputFormat": "If a reconstruction is possible, output a network\n\n- One line with two integers: the number $n$ of accounts, and the number $m$ of connections. This is the same $n$ as in the input.\n- Then $m$ lines, each consisting of two integers $a$ and $b$, specifying that account $a$ follows account $b$.\n\nOtherwise output $\\texttt{impossible}$.\n\nNote that it is not allowed for an account to follow the same account twice, nor to follow itself.", "hint": "", "locale": "en", "translations": {"en": {"title": "[NCPC 2025] Follower Forensics", "background": "", "description": "Your social media company ConnectHub prides itself on how easily information spreads through its network.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/8a5w3ury.png)\n:::\n\nAccounts can share posts directly with their followers using the share button, or with the accounts they follow by posting in the comments. ConnectHub is famous for the virality of its users: a post from any account was able to reach every other account, possibly through a chain of shares and comments.\n\nBut disaster struck: a database mishap wiped out all records of who follows whom. One piece of data may have survived, though — for each account, you have the number of its followers and the number of accounts it follows. Maybe even those numbers have been corrupted, but it's all you have.\n\nYour task is to rebuild the missing database so that these counts are correct, and ConnectHub once again has full virality.", "inputFormat": "The input consists of:\n\n- One line with an integer $n$, the number of accounts, where $1 \\leq n \\leq 100\\,000$.\n- One line with $n$ integers $a_1,\\ldots, a_n$ satisfying $0 \\leq a_i \\leq n$ for each $i$, where $a_i$ is the number of accounts followed by the $i$th account.\n- One line with $n$ integers $b_1,\\ldots, b_n$ satisfying $0 \\leq b_i \\leq n$ for each  $i$, where $b_i$ is the number of accounts following the $i$th account.\n\nAdditionally, it is guaranteed that \n$$\n    \\sum_{i=1}^n a_i + \\sum_{i=1}^n b_i \\leq 2\\,000\\,000.\n$$\n\nNote that the input is not guaranteed to allow for any reconstruction, fully viral or not.\nFor those familiar with that terminology, full virality is equivalent to weak connectivity.", "outputFormat": "If a reconstruction is possible, output a network\n\n- One line with two integers: the number $n$ of accounts, and the number $m$ of connections. This is the same $n$ as in the input.\n- Then $m$ lines, each consisting of two integers $a$ and $b$, specifying that account $a$ follows account $b$.\n\nOtherwise output $\\texttt{impossible}$.\n\nNote that it is not allowed for an account to follow the same account twice, nor to follow itself.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[NCPC 2025] Follower Forensics", "background": "", "description": "你的社交媒体公司 ConnectHub 以其网络中信息传播的高效便捷而自豪。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/8a5w3ury.png)\n:::\n\n用户可以通过分享按钮直接将帖子分享给自己的关注者，也可以通过在评论区发帖把内容传递给自己所关注的账号。ConnectHub 因其用户的强大传播力而闻名：任意账号发布的帖子，都能够通过一系列分享或评论传播到任何其他账号。\n\n但灾难发生了：一次数据库事故清除了所有 “谁关注了谁” 的记录。不过似乎仍有部分数据幸存——对每个账号来说，你仍然知道它关注了多少账号，以及它有多少关注者。当然，这些数字也有可能已被破坏，但这是你仅剩的全部信息。\n\n你的任务是重建丢失的关注关系数据库，使得每个账号的关注数与被关注数都与给定的数据一致，并且保证 ConnectHub 再次实现完全的可传播性。\n", "inputFormat": "输入包含：\n\n- 一行，一个整数 $n$，表示账号数量，满足 $1 \\le n \\le 100\\,000$；\n- 一行，包含 $n$ 个整数 $a_1, \\ldots, a_n$，满足对每个 $i$ 均有 $0 \\le a_i \\le n$，其中 $a_i$ 表示第 $i$ 个账号关注的账号数；\n- 一行，包含 $n$ 个整数 $b_1, \\ldots, b_n$，满足对每个 $i$ 均有 $0 \\le b_i \\le n$，其中 $b_i$ 表示第 $i$ 个账号的关注者数量。\n\n此外，保证：\n\n$$\n\\sum_{i=1}^n a_i \\;+\\; \\sum_{i=1}^n b_i \\;\\le\\; 2\\,000\\,000.\n$$\n\n需要注意的是，输入数据并不保证一定存在可重建的网络，不管该网络是否满足完全传播性。对熟悉相关术语的人来说，“完全传播性”等价于弱连通性。\n", "outputFormat": "如果存在可行重建方案，则输出一个网络：\n\n- 第一行输出两个整数：账号数量 $n$ 与连接数量 $m$（即关注关系数量），这里的 $n$ 与输入一致；\n- 接下来 $m$ 行，每行包含两个整数 $a$ 和 $b$，表示账号 $a$ 关注账号 $b$。\n\n否则输出 `impossible`。\n\n注意：一个账号不能关注同一个账号两次，也不能关注自己。", "hint": "翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P14501", "type": "P", "difficulty": 3, "samples": [["8 5 2\n1 2\n2 5\n3 4\n5 6\n7 8", "1 2 1 2 1 2 1 2"], ["8 5 3\n1 2\n2 5\n3 4\n5 6\n7 8", "impossible"], ["8 7 8\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8", "1 2 3 4 5 6 7 8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["并查集", "2025", "Special Judge", "连通块", "ICPC"], "title": "[NCPC 2025] Gotta Trade Some of 'Em", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7xiprd94.png)\n\nTwo Game Boy systems connected with a DMG-04 (link cable). Public domain photo by KoS.\n\n:::", "description": "The kids at school are obsessed with a new video game of collectible pocket monsters called $\\emph{Pokémon}$. Their goal is to \"catch 'em all\" by completing the Pokédex, meaning they want to catch a copy of every Pokémon. Typically they do this by playing the game, encountering Pokémon, and catching them with a Pokéball.\n\nPokémon games are released in different variants. Each variant contains a number of Pokémon, some of which are exclusive to that variant. For example, only $\\emph{Pokémon Blue}$ (variant $1$) allows encounters with the Pokémon known as Meowth. Thus, a kid owning $\\emph{Pokémon Red}$ (variant $2$) cannot catch Meowth, and therefore must trade with a friend who has a Meowth to fill the Pokédex. This friend may either own Pokémon Blue or have received Meowth through another trade.\n\nYour task is to distribute Pokémon variants to the kids so that, through trading among friends, every kid can eventually collect at least one of each Pokémon. Each kid receives exactly one Pokémon game variant. Each variant comes with enough copies of its Pokémon, both its exclusives and the non-exclusives, ensuring trades are always possible.", "inputFormat": "The input consists of:\n\n- One line with three integers $n$, $m$, and $k$: the number $n$ of kids, with $1 \\leq n \\leq 100\\,000$, the number $m$ of friendships, with $1 \\leq m \\leq 200\\,000$, and the number $k$ of different game variants, with  $1 \\leq k \\leq 100\\,000$.\n- $m$ lines, each containing two integers $a$ and $b$ with $1\\leq a < b \\leq n$, representing that $a$ and $b$ are friends.", "outputFormat": "Output $n$ integers, one for each kid, representing which game variant that kid should get. Your output will be considered correct if all kids can fill their Pokédex by using any number of trades with their friends.\n\nIf there are multiple valid solutions, you may output any one of them.\n\nIf there is no assignment of game variants to kids that allows all kids to fill their Pokédex,\noutput $\\texttt{impossible}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[NCPC 2025] Gotta Trade Some of 'Em", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7xiprd94.png)\n\nTwo Game Boy systems connected with a DMG-04 (link cable). Public domain photo by KoS.\n\n:::", "description": "The kids at school are obsessed with a new video game of collectible pocket monsters called $\\emph{Pokémon}$. Their goal is to \"catch 'em all\" by completing the Pokédex, meaning they want to catch a copy of every Pokémon. Typically they do this by playing the game, encountering Pokémon, and catching them with a Pokéball.\n\nPokémon games are released in different variants. Each variant contains a number of Pokémon, some of which are exclusive to that variant. For example, only $\\emph{Pokémon Blue}$ (variant $1$) allows encounters with the Pokémon known as Meowth. Thus, a kid owning $\\emph{Pokémon Red}$ (variant $2$) cannot catch Meowth, and therefore must trade with a friend who has a Meowth to fill the Pokédex. This friend may either own Pokémon Blue or have received Meowth through another trade.\n\nYour task is to distribute Pokémon variants to the kids so that, through trading among friends, every kid can eventually collect at least one of each Pokémon. Each kid receives exactly one Pokémon game variant. Each variant comes with enough copies of its Pokémon, both its exclusives and the non-exclusives, ensuring trades are always possible.", "inputFormat": "The input consists of:\n\n- One line with three integers $n$, $m$, and $k$: the number $n$ of kids, with $1 \\leq n \\leq 100\\,000$, the number $m$ of friendships, with $1 \\leq m \\leq 200\\,000$, and the number $k$ of different game variants, with  $1 \\leq k \\leq 100\\,000$.\n- $m$ lines, each containing two integers $a$ and $b$ with $1\\leq a < b \\leq n$, representing that $a$ and $b$ are friends.", "outputFormat": "Output $n$ integers, one for each kid, representing which game variant that kid should get. Your output will be considered correct if all kids can fill their Pokédex by using any number of trades with their friends.\n\nIf there are multiple valid solutions, you may output any one of them.\n\nIf there is no assignment of game variants to kids that allows all kids to fill their Pokédex,\noutput $\\texttt{impossible}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[NCPC 2025] Gotta Trade Some of 'Em", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7xiprd94.png)\n\n两台通过 DMG-04（连接线）连接的 Game Boy 主机。KoS 提供的公有领域照片。\n\n:::", "description": "学校里的孩子们迷上了一款新的口袋妖怪收集类电子游戏 **Pokémon**。他们的目标是通过完成 Pokédex 来 “全部捕获”，也就是说，他们希望能抓到每一种 Pokémon。通常，他们会通过游玩游戏、遇见 Pokémon、并用 Pokéball 将其捕捉来实现这一目标。\n\nPokémon 游戏会发行多种不同版本。每个版本都包含一些 Pokémon，其中部分 Pokémon 是该版本的独占。例如，只有 **Pokémon Blue**（版本 $1$）可以遇到一种名为 Meowth 的 Pokémon。因此，一个拥有 **Pokémon Red**（版本 $2$）的孩子无法捕捉到 Meowth，只能通过与朋友交换来填满 Pokédex。而这个朋友可能自己拥有 Pokémon Blue，或是通过其他交易获得了 Meowth。\n\n你的任务是为孩子们分配 Pokémon 游戏版本，使得他们能够通过与朋友间的交易，最终每个人都能至少收集到每一种 Pokémon。每个孩子恰好获得一个 Pokémon 游戏版本。每个版本都提供足够数量的 Pokémon（包括独占与非独占），确保交易随时可行。\n", "inputFormat": "输入包含：\n\n- 一行三个整数 $n$、$m$ 和 $k$：表示孩子人数 $n$（$1 \\leq n \\leq 100\\,000$），朋友关系数 $m$（$1 \\leq m \\leq 200\\,000$），以及游戏版本数 $k$（$1 \\leq k \\leq 100\\,000$）。\n- 接下来 $m$ 行，每行两个整数 $a$ 和 $b$，满足 $1 \\leq a < b \\leq n$，表示孩子 $a$ 和孩子 $b$ 互为朋友。\n", "outputFormat": "输出 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个孩子应获得哪个游戏版本。只要所有孩子都能通过任意次数的朋友间交易填满 Pokédex，你的输出就会被判定为正确。\n\n如果存在多个合法方案，你可以输出任意一个。\n\n如果不存在任何分配方式可以使所有孩子填满 Pokédex，则输出 `impossible`。", "hint": "翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P14502", "type": "P", "difficulty": 6, "samples": [["7 6\n1 2 3 4 6 12\n4 4 12 24 12 72", "2 3 1 5 6 7 4"], ["91 4\n1 7 13 91\n2 126 8190 2475880078570760549798240131", "impossible"], ["2 1\n1\n4", "1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "Special Judge", "ICPC"], "title": "[NCPC 2025] Hidden Permutation", "background": "", "description": "When a fixed shuffle is applied to a deck of cards repeatedly, the deck will eventually return to its original order. The number of times the shuffle must be applied before this happens is called the $\\textit{period}$ of the deck for that shuffle. In the present task, we consider the inverse question: rather than starting with a shuffle and finding its period, you are told, for each possible period, how many decks of cards have that period. Your task is to construct any \nshuffle consistent with this information.\n\nFormally, there is a hidden permutation $f = (f_1, f_2, \\dots, f_N)$, where $N$ is a given positive integer. A permutation is a list of numbers where each number from $1$ to $N$ occurs exactly once. Let $x = x_1x_2 \\dots x_N$ be a binary string. We say that $f(x)$ ($f$ applied to $x$) is the new binary string $x_{f_1}x_{f_2} \\dots x_{f_N}$, and the $\\textit{period}$ of $x$ is the smallest positive integer $p$ such that \n\n$$\\underbrace{f(f(\\cdots f(x)\\cdots))}_{p\\ \\text{times}} =  x.$$\n\nIt can be proven that for any permutation $f$ and any binary string $x$ of the same length, the period of $x$ exists. In other words, \nif you apply $f$ to $x$ enough times, you eventually get back $x$.\n\nYou are given the number $N$, and for each possible period $p$ you are given the number of binary strings \n (out of all $2^N$ possible binary strings) that have period $p$. Your task is to find any permutation $f$ that corresponds to the given information, \n or conclude that there is no such permutation.", "inputFormat": "The input consists of:\n\n- One line with integers $N$, $K$ ($2 \\leq N \\leq 100$, $1 \\leq K \\leq 1000$), the length of the permutation and the number of possible periods.\n- One line with $K$ integers $p_1, p_2, \\dots, p_K$ ($1 \\leq p_i \\leq 10^9$). These are all the possible periods that binary strings of length $N$ can have, with respect to the hidden permutation. The numbers $p_i$ are all distinct, and are sorted in increasing order.\n- One line with $K$ integers $m_1, m_2, \\dots, m_K$ ($1 \\leq m_i \\leq 2^{100}$). This means that there are $m_i$ binary strings with period $p_i$.\n\nNote that the numbers $m_i$ can be quite large!", "outputFormat": "If there is no permutation $f$ that corresponds to the given information, print $\\verb|impossible|$.\n\nOtherwise, print one line with $N$ integers $f_1, f_2,  \\dots, f_N$, the permutation that you chose. Recall that the permutation should contain every integer from $1$ to $N$ exactly once. If there are multiple solutions, you can print any one of them.", "hint": "In the second sample, the input almost corresponds to the permutation $(2,3,4,\\dots, 91, 1)$. The only error is that the last digit in the last number of the input should be $0$ instead of $1$.\n\nIn the third sample, all $4$ binary strings have period $1$, which means that the identity permutation $(1,2)$ is a valid answer.", "locale": "en", "translations": {"en": {"title": "[NCPC 2025] Hidden Permutation", "background": "", "description": "When a fixed shuffle is applied to a deck of cards repeatedly, the deck will eventually return to its original order. The number of times the shuffle must be applied before this happens is called the $\\textit{period}$ of the deck for that shuffle. In the present task, we consider the inverse question: rather than starting with a shuffle and finding its period, you are told, for each possible period, how many decks of cards have that period. Your task is to construct any \nshuffle consistent with this information.\n\nFormally, there is a hidden permutation $f = (f_1, f_2, \\dots, f_N)$, where $N$ is a given positive integer. A permutation is a list of numbers where each number from $1$ to $N$ occurs exactly once. Let $x = x_1x_2 \\dots x_N$ be a binary string. We say that $f(x)$ ($f$ applied to $x$) is the new binary string $x_{f_1}x_{f_2} \\dots x_{f_N}$, and the $\\textit{period}$ of $x$ is the smallest positive integer $p$ such that \n\n$$\\underbrace{f(f(\\cdots f(x)\\cdots))}_{p\\ \\text{times}} =  x.$$\n\nIt can be proven that for any permutation $f$ and any binary string $x$ of the same length, the period of $x$ exists. In other words, \nif you apply $f$ to $x$ enough times, you eventually get back $x$.\n\nYou are given the number $N$, and for each possible period $p$ you are given the number of binary strings \n (out of all $2^N$ possible binary strings) that have period $p$. Your task is to find any permutation $f$ that corresponds to the given information, \n or conclude that there is no such permutation.", "inputFormat": "The input consists of:\n\n- One line with integers $N$, $K$ ($2 \\leq N \\leq 100$, $1 \\leq K \\leq 1000$), the length of the permutation and the number of possible periods.\n- One line with $K$ integers $p_1, p_2, \\dots, p_K$ ($1 \\leq p_i \\leq 10^9$). These are all the possible periods that binary strings of length $N$ can have, with respect to the hidden permutation. The numbers $p_i$ are all distinct, and are sorted in increasing order.\n- One line with $K$ integers $m_1, m_2, \\dots, m_K$ ($1 \\leq m_i \\leq 2^{100}$). This means that there are $m_i$ binary strings with period $p_i$.\n\nNote that the numbers $m_i$ can be quite large!", "outputFormat": "If there is no permutation $f$ that corresponds to the given information, print $\\verb|impossible|$.\n\nOtherwise, print one line with $N$ integers $f_1, f_2,  \\dots, f_N$, the permutation that you chose. Recall that the permutation should contain every integer from $1$ to $N$ exactly once. If there are multiple solutions, you can print any one of them.", "hint": "In the second sample, the input almost corresponds to the permutation $(2,3,4,\\dots, 91, 1)$. The only error is that the last digit in the last number of the input should be $0$ instead of $1$.\n\nIn the third sample, all $4$ binary strings have period $1$, which means that the identity permutation $(1,2)$ is a valid answer.", "locale": "en"}, "zh-CN": {"title": "[NCPC 2025] Hidden Permutation", "background": "", "description": "当对一副牌反复应用某种固定的洗牌方式时，这副牌最终会回到其原始顺序。将洗牌方式需要应用的次数称为该洗牌方式下这副牌的 **周期（period）**。在本题中，我们考虑的是逆问题：我们并非给定洗牌方式并求其周期，而是给定每一种可能的周期，各有多少副牌具有该周期。你的任务是构造任意一个与这些信息一致的洗牌方式。\n\n形式化地，存在一个隐藏排列 $f = (f_1, f_2, \\dots, f_N)$，其中 $N$ 是给定的正整数。排列是一个包含 $1$ 到 $N$ 的数字且每个数字恰好出现一次的列表。令 $x = x_1x_2\\dots x_N$ 为一个二进制字符串。我们定义 $f(x)$（即对 $x$ 应用 $f$）为新的二进制字符串 $x_{f_1}x_{f_2}\\dots x_{f_N}$；并且定义 $x$ 的 **周期** 为最小的正整数 $p$，使得：\n\n$$\n\\underbrace{f(f(\\cdots f(x)\\cdots))}_{p\\ \\text{次}} = x.\n$$\n\n可以证明，对于任意排列 $f$ 与任意同长度的二进制字符串 $x$，$x$ 的周期一定存在。换句话说，如果你对 $x$ 应用足够多次 $f$，最终总会回到 $x$。\n\n你将得到数字 $N$，以及对每个可能的周期 $p$，有多少个（在全部 $2^N$ 个可能的二进制字符串中）二进制字符串的周期为 $p$。你的任务是找到一个与这些信息一致的排列 $f$，或者得出不存在这样的排列。", "inputFormat": "输入包含：\n\n- 一行两个整数 $N$, $K$（$2 \\le N \\le 100$, $1 \\le K \\le 1000$），表示排列的长度以及可能的周期数量。\n- 一行包含 $K$ 个整数 $p_1, p_2, \\dots, p_K$（$1 \\le p_i \\le 10^9$）。这些是对于隐藏排列而言，长度为 $N$ 的二进制字符串所有可能出现的周期。所有 $p_i$ 互不相同，且已按升序排列。\n- 一行包含 $K$ 个整数 $m_1, m_2, \\dots, m_K$（$1 \\le m_i \\le 2^{100}$）。其中 $m_i$ 表示周期为 $p_i$ 的二进制字符串数量。\n\n注意：数字 $m_i$ 的大小可能非常大！", "outputFormat": "如果不存在任何排列 $f$ 能与给定信息对应，则输出 `impossible`。\n\n否则输出一行，包含 $N$ 个整数 $f_1, f_2, \\dots, f_N$，即你选择的排列。排列必须包含 $1$ 到 $N$ 且每个数字恰好出现一次。若存在多个合法解，你可以输出任意一个。\n", "hint": "在第二个样例中，输入几乎对应于排列 $(2,3,4,\\dots,91,1)$。唯一的错误是输入中最后一个数字的末位应为 $0$ 而不是 $1$。\n\n在第三个样例中，全部 $4$ 个二进制字符串的周期都是 $1$，因此恒等排列 $(1,2)$ 是一个合法答案。\n\n翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P14503", "type": "P", "difficulty": 3, "samples": [["6 8\n1 2\n2 1\n2 3\n3 2\n3 6\n4 5\n5 2\n6 5", "5 2"], ["1 0", "1 0"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["图论", "2025", "ICPC"], "title": "[NCPC 2025] Instagraph", "background": "", "description": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/uadx37ai.png)\n:::\n\nA celebrity in a social network is somebody with many followers, but who doesn't follow them back. More precisely, a person is a $\\emph{celebrity}$ for a group of people, if\n- every member of the group follows the person,\n- the person follows nobody in the group.\n\nThe $\\emph{celebrity centrality}$ of person $v$, written $\\mathrm{CC}(v)$, is the maximum size of such a group.\n\nWe model the social network as a directed graph with $N$ vertices  $1$,  $\\ldots$, $N$. A directed edge from $u$ to $v$ means that person $u$ follows person $v$. For example, in\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/fp7ol7nc.png)\n:::\n\nwe have $\\operatorname{CC}(1) = 0$, $\\operatorname{CC}(2) = 1$, and $\\operatorname{CC}(5) = 2$.\n\nYour task is to find a vertex $v$ with the maximum celebrity centrality $\\mathrm{CC}(v)$. In case of a tie, choose the smallest $v$.", "inputFormat": "The input consists of\n\n- One line with two integers $N$ and $M$ ($1 \\le N \\le 200\\,000$, $0 \\le M \\le 1\\,000\\,000$), the number of vertices and the number of directed edges.\n- $M$ lines with two distinct integers $u$ and $v$ ($1 \\le u,v \\le N$), indicating a directed edge from $u$ to $v$. There are no duplicate edges.", "outputFormat": "Output two integers: the smallest $v$ with the maximum celebrity centrality and the value $\\mathrm{CC}(v)$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[NCPC 2025] Instagraph", "background": "", "description": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/uadx37ai.png)\n:::\n\nA celebrity in a social network is somebody with many followers, but who doesn't follow them back. More precisely, a person is a $\\emph{celebrity}$ for a group of people, if\n- every member of the group follows the person,\n- the person follows nobody in the group.\n\nThe $\\emph{celebrity centrality}$ of person $v$, written $\\mathrm{CC}(v)$, is the maximum size of such a group.\n\nWe model the social network as a directed graph with $N$ vertices  $1$,  $\\ldots$, $N$. A directed edge from $u$ to $v$ means that person $u$ follows person $v$. For example, in\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/fp7ol7nc.png)\n:::\n\nwe have $\\operatorname{CC}(1) = 0$, $\\operatorname{CC}(2) = 1$, and $\\operatorname{CC}(5) = 2$.\n\nYour task is to find a vertex $v$ with the maximum celebrity centrality $\\mathrm{CC}(v)$. In case of a tie, choose the smallest $v$.", "inputFormat": "The input consists of\n\n- One line with two integers $N$ and $M$ ($1 \\le N \\le 200\\,000$, $0 \\le M \\le 1\\,000\\,000$), the number of vertices and the number of directed edges.\n- $M$ lines with two distinct integers $u$ and $v$ ($1 \\le u,v \\le N$), indicating a directed edge from $u$ to $v$. There are no duplicate edges.", "outputFormat": "Output two integers: the smallest $v$ with the maximum celebrity centrality and the value $\\mathrm{CC}(v)$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[NCPC 2025] Instagraph", "background": "", "description": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/uadx37ai.png)\n:::\n\n在社交网络中，衡量“名人”的一个方式是：他们有很多关注者，但并不会回关这些人。更精确地说，对于一组人而言，如果某人满足：\n\n- 组内的每个人都关注 TA；\n- TA 不关注组内的任何人；\n\n那么此人就是该组的 **名人（celebrity）**。\n\n某个人 $v$ 的 **名人中心性（celebrity centrality）**，记作 $\\mathrm{CC}(v)$，是满足上述条件的最大组的大小。\n\n我们将社交网络建模为一个有向图，图中共有 $N$ 个顶点 $1,\\ldots,N$。存在从 $u$ 到 $v$ 的有向边表示：用户 $u$ 关注用户 $v$。例如，在下图中：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/fp7ol7nc.png)\n:::\n\n我们有 $\\operatorname{CC}(1)=0$、$\\operatorname{CC}(2)=1$、$\\operatorname{CC}(5)=2$。\n\n你的任务是找到一个顶点 $v$ 使其名人中心性 $\\mathrm{CC}(v)$ 最大；若有多个答案，则输出其中编号最小的 $v$。\n", "inputFormat": "输入包含：\n\n- 一行两个整数 $N$ 与 $M$（$1 \\le N \\le 200\\,000$，$0 \\le M \\le 1\\,000\\,000$），分别表示顶点数量与有向边数量；\n- 接下来 $M$ 行，每行包含两个不同的整数 $u$ 和 $v$（$1 \\le u,v \\le N$），表示存在一条从 $u$ 指向 $v$ 的有向边。不存在重复边。\n", "outputFormat": "输出两个整数：名人中心性最大的最小编号顶点 $v$，以及对应的值 $\\mathrm{CC}(v)$。\n", "hint": "翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P14504", "type": "P", "difficulty": 0, "samples": [["7 9", "59"], ["7 4", "infinity"], ["100001 123123123", "7581167638793024"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "ICPC"], "title": "[NCPC 2025] Jump", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/czm7wzpz.png)\n\nBallsout at Metal Frenzy Open Air 2022, image by S. Bollmann, [commons.wikimedia.org](https://commons.wikimedia.org/wiki/File:Ballsout\\_Metal\\_Frenzy\\_2022\\_05.jpg)\n\n:::", "description": "The Unsightly Halfwits are putting on a wild concert in their natural habitat of Húsavík. Their lead singer, Sveinn \"Springheel\" Jónsson, is leaping about the stage with vigorous energy, turning every note into a spectacle. But keeping in rhythm while bouncing so chaotically is no easy task, and you can’t help but wonder how long he can keep this up.\n\nSveinn starts with an energy level of $E$. The song plays a beat exactly every $N$ milliseconds. His first jump launches at time $0$, perfectly in sync with the music. As long as his energy $E$ is strictly positive ($E>0$), each jump lasts exactly $E$ milliseconds. When his energy runs out with $E=0$, he collapses and the show is over. If he still has energy after landing, he immediately springs up again for the next jump. When Sveinn lands exactly on a beat, he gains $+1$ energy from sheer enjoyment. But if he's even slightly off-beat, his energy drops by $1$.", "inputFormat": "The input consists of:\n\n- One line with two integers $N, E$, the number of milliseconds between beats and the initial energy level of the lead singer. These will satisfy $1 \\leq N \\leq 3 \\cdot 10^5$ and $1 \\leq E \\leq 10^9$.", "outputFormat": "Output a single integer, the number of milliseconds that will pass before Sveinn stops jumping. If he never stops, instead print $\\texttt{infinity}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[NCPC 2025] Jump", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/czm7wzpz.png)\n\nBallsout at Metal Frenzy Open Air 2022, image by S. Bollmann, [commons.wikimedia.org](https://commons.wikimedia.org/wiki/File:Ballsout\\_Metal\\_Frenzy\\_2022\\_05.jpg)\n\n:::", "description": "The Unsightly Halfwits are putting on a wild concert in their natural habitat of Húsavík. Their lead singer, Sveinn \"Springheel\" Jónsson, is leaping about the stage with vigorous energy, turning every note into a spectacle. But keeping in rhythm while bouncing so chaotically is no easy task, and you can’t help but wonder how long he can keep this up.\n\nSveinn starts with an energy level of $E$. The song plays a beat exactly every $N$ milliseconds. His first jump launches at time $0$, perfectly in sync with the music. As long as his energy $E$ is strictly positive ($E>0$), each jump lasts exactly $E$ milliseconds. When his energy runs out with $E=0$, he collapses and the show is over. If he still has energy after landing, he immediately springs up again for the next jump. When Sveinn lands exactly on a beat, he gains $+1$ energy from sheer enjoyment. But if he's even slightly off-beat, his energy drops by $1$.", "inputFormat": "The input consists of:\n\n- One line with two integers $N, E$, the number of milliseconds between beats and the initial energy level of the lead singer. These will satisfy $1 \\leq N \\leq 3 \\cdot 10^5$ and $1 \\leq E \\leq 10^9$.", "outputFormat": "Output a single integer, the number of milliseconds that will pass before Sveinn stops jumping. If he never stops, instead print $\\texttt{infinity}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[NCPC 2025] Jump", "background": ":::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/czm7wzpz.png)\n\nBallsout 于 Metal Frenzy Open Air 2022 的现场表现，摄影：S. Bollmann，来源：commons.wikimedia.org\n\n:::", "description": "The Unsightly Halfwits 乐队正在他们的自然栖息地——Húsavík——举办一场疯狂的演出。主唱 Sveinn “Springheel” Jónsson 以惊人的活力在舞台上跳跃腾挪，把每一个音符都变成华丽的表演。然而，一边如此混乱地弹跳一边保持音乐节奏并非易事，你不禁好奇：他究竟能坚持多久？\n\nSveinn 的初始能量值为 $E$。歌曲每隔 $N$ 毫秒正好打一次拍子。他的第一次跳跃在时间 $0$ 开始，与节奏完全同步。只要他的能量 $E$ 严格大于 $0$（$E>0$），每次跳跃会持续恰好 $E$ 毫秒。当能量耗尽、达到 $E=0$ 时，他便倒下，演出结束。如果落地后他仍有能量，就会立刻再次跃起进行下一次跳跃。\n\n如果 Sveinn 的落地时刻恰好落在某个拍子上，他会因为纯粹的欣喜而获得 $+1$ 能量；但如果稍有偏差，他的能量便会减少 $1$。\n", "inputFormat": "输入包含：\n\n- 一行两个整数 $N, E$，分别表示两次拍子之间的毫秒数，以及主唱的初始能量。数据满足 $1 \\le N \\le 3 \\cdot 10^5$ 且 $1 \\le E \\le 10^9$。\n", "outputFormat": "输出一个整数，表示 Sveinn 在停止跳跃前将经历多少毫秒。如果他永远不会停止，则输出 `infinity`。\n", "hint": "翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
