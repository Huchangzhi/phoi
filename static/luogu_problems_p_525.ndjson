{"pid": "P11656", "type": "P", "difficulty": 5, "samples": [["10\n1 1 4 5 1 4 1 2 1 2\n1 1 2 0 3 1 2 0 2 1", "3"], ["10\n1 1 9 2 4 9 2 2 1 1\n1 0 3 2 3 0 3 8 2 1", "3"], ["24\n1 4 5 2 3 1 4 2 5 3 1 1 1 3 2 1 1 1 1 2 2 1 1 3 \n1 1 4 0 3 0 0 4 0 5 3 2 0 3 2 1 0 3 2 0 0 2 1 1", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "树状数组", "2025", "洛谷原创", "O2优化", "洛谷比赛"], "title": "「FAOI-R5」喷酒大赛", "background": "> 吐火，是川剧中独一无二的神秘绝技，源于古西蜀，驰名中华梨园。变脸者以魔术般的技法，瞬息间变化脸谱，更与吐火神功的诡异结合，以显示人物内心和剧情的急剧变化及内在张力，是川剧中刻画人物最有力、最浪漫的艺术手法。表演的时候，演员嘴里含着一根管子，管子里有松香末和未完全燃尽的纸灰。（纸灰烧的火候很重要，要燃尽但又不能全燃尽）需要喷火的时候，外面点燃，演员往外吹气，这样就会有火花喷出来。\n\nWC2025 开幕式上表演的绍剧喷火非常精彩，你虽然没有学过喷火，但是你可以喷酒。", "description": "数轴上站着 $n$ 个表演者，第 $i$ 个表演者在正整数 $i$ 的位置。每个人嘴里都含着烈酒，对于第 $i$ 个表演者，你可以给他一个金币让他表演喷酒。\n\n在你给完钱后，没有收到钱的表演者会退场，留下的表演者会在第 $0$ 时刻朝左右中的一个方向从嘴中喷出强度为 $k_i$ 的酒。形式化地，第 $i$ 个表演者喷出的酒具有方向属性 $b_i$，你可以在令 $b_i=1$ 或 $b_i=-1$。对于 $t\\in[0,a_i)$ 的第 $t$ 时刻，酒的位置 $p_{i,t}=i+t\\cdot b_i$。当 $t\\geq a_i$ 时，该酒消失。\n\n表演者背面有特殊防备，正面却没有。如果某个**正整数**时刻 $t$，表演者 $i$ 喷出的酒**仍然存在**且存在留下的表演者  $j$ 使得 $p_{i,t}=j$，那么：\n- 若 $b_i=b_j$：\n    - 若 $k_i=0$，表演者 $i$ 喷出的酒消失。\n\t- 若 $k_i>0$，$k_i\\gets k_i-1$，即酒的强度减一。\n- 若 $b_i\\neq b_j$，表演者 $j$ 被喷到酒，愤怒离场。\n\n你想要让酒铺满数轴上 $[1,n]$ 的位置，即对于任意 $i\\in[1,n]$，至少存在一对非负整数 $(j,t)$ 使得 $t$ 时刻表演者 $j$ 喷出的酒**仍然存在**且 $p_{j,t}=i$。求出在达成该条件、没有表演者愤怒离场的情况下，最小花费的金币数。", "inputFormat": "第一行一个正整数 $n$，表示表演者的个数。\n\n第二行 $n$ 个正整数，第 $i$ 个数为 $a_i$，表示第 $i$ 个表演者喷出的酒的距离。\n\n第三行 $n$ 个正整数，第 $i$ 个数为 $k_i$，表示第 $i$ 个表演者喷出的酒的强度。", "outputFormat": "一行一个正整数，表示覆盖 $[1,n]$ 的最小代价。", "hint": "### 样例解释\n\n- 样例 #1：给 $3,4,10$ 三个表演者金币，令 $b_3=-1,b_4=1,b_{10}=-1$。\n- 样例 #2：给 $1,2,3$ 三个表演者金币，令 $b_1=-1,b_2=-1,b_{3}=1$。\n\n### 数据范围与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$n\\leq 14$。\n- Subtask 2（10 pts）：$n\\leq 50$，$k_i=0$。\n- Subtask 3（15 pts）：$n\\leq 50$。\n- Subtask 4（20 pts）：$n\\leq 10^3$。\n- Subtask 5（15 pts）：$n\\leq 10^5$。\n- Subtask 6（20 pts）：无特殊限制。\n\n对于所有数据，$1\\leq n,a_i\\leq 5\\times 10^5$，$0\\le k_i\\le5\\times10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R5」喷酒大赛", "background": "> 吐火，是川剧中独一无二的神秘绝技，源于古西蜀，驰名中华梨园。变脸者以魔术般的技法，瞬息间变化脸谱，更与吐火神功的诡异结合，以显示人物内心和剧情的急剧变化及内在张力，是川剧中刻画人物最有力、最浪漫的艺术手法。表演的时候，演员嘴里含着一根管子，管子里有松香末和未完全燃尽的纸灰。（纸灰烧的火候很重要，要燃尽但又不能全燃尽）需要喷火的时候，外面点燃，演员往外吹气，这样就会有火花喷出来。\n\nWC2025 开幕式上表演的绍剧喷火非常精彩，你虽然没有学过喷火，但是你可以喷酒。", "description": "数轴上站着 $n$ 个表演者，第 $i$ 个表演者在正整数 $i$ 的位置。每个人嘴里都含着烈酒，对于第 $i$ 个表演者，你可以给他一个金币让他表演喷酒。\n\n在你给完钱后，没有收到钱的表演者会退场，留下的表演者会在第 $0$ 时刻朝左右中的一个方向从嘴中喷出强度为 $k_i$ 的酒。形式化地，第 $i$ 个表演者喷出的酒具有方向属性 $b_i$，你可以在令 $b_i=1$ 或 $b_i=-1$。对于 $t\\in[0,a_i)$ 的第 $t$ 时刻，酒的位置 $p_{i,t}=i+t\\cdot b_i$。当 $t\\geq a_i$ 时，该酒消失。\n\n表演者背面有特殊防备，正面却没有。如果某个**正整数**时刻 $t$，表演者 $i$ 喷出的酒**仍然存在**且存在留下的表演者  $j$ 使得 $p_{i,t}=j$，那么：\n- 若 $b_i=b_j$：\n    - 若 $k_i=0$，表演者 $i$ 喷出的酒消失。\n\t- 若 $k_i>0$，$k_i\\gets k_i-1$，即酒的强度减一。\n- 若 $b_i\\neq b_j$，表演者 $j$ 被喷到酒，愤怒离场。\n\n你想要让酒铺满数轴上 $[1,n]$ 的位置，即对于任意 $i\\in[1,n]$，至少存在一对非负整数 $(j,t)$ 使得 $t$ 时刻表演者 $j$ 喷出的酒**仍然存在**且 $p_{j,t}=i$。求出在达成该条件、没有表演者愤怒离场的情况下，最小花费的金币数。", "inputFormat": "第一行一个正整数 $n$，表示表演者的个数。\n\n第二行 $n$ 个正整数，第 $i$ 个数为 $a_i$，表示第 $i$ 个表演者喷出的酒的距离。\n\n第三行 $n$ 个正整数，第 $i$ 个数为 $k_i$，表示第 $i$ 个表演者喷出的酒的强度。", "outputFormat": "一行一个正整数，表示覆盖 $[1,n]$ 的最小代价。", "hint": "### 样例解释\n\n- 样例 #1：给 $3,4,10$ 三个表演者金币，令 $b_3=-1,b_4=1,b_{10}=-1$。\n- 样例 #2：给 $1,2,3$ 三个表演者金币，令 $b_1=-1,b_2=-1,b_{3}=1$。\n\n### 数据范围与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$n\\leq 14$。\n- Subtask 2（10 pts）：$n\\leq 50$，$k_i=0$。\n- Subtask 3（15 pts）：$n\\leq 50$。\n- Subtask 4（20 pts）：$n\\leq 10^3$。\n- Subtask 5（15 pts）：$n\\leq 10^5$。\n- Subtask 6（20 pts）：无特殊限制。\n\n对于所有数据，$1\\leq n,a_i\\leq 5\\times 10^5$，$0\\le k_i\\le5\\times10^5$。", "locale": "zh-CN"}}}
{"pid": "P11657", "type": "P", "difficulty": 6, "samples": [["10 10\n0 1 1 0 0 1 0 0 1 1 \n2 7 8\n2 10 5\n2 5 1\n2 7 6\n2 7 1\n2 4 5\n2 3 4\n1 5 2\n1 4 1\n1 7 7", "4\n2\n0"], ["20 20\n0 0 0 1 1 1 1 0 0 1 0 0 0 1 0 0 0 0 1 1 \n2 16 7\n2 12 10\n1 4 5\n1 14 7\n1 16 7\n2 15 12\n1 12 2\n1 3 4\n1 1 10\n2 14 3\n2 19 1\n1 20 9\n2 14 16\n1 10 13\n1 6 8\n2 1 2\n1 8 16\n1 9 15\n1 17 12\n2 15 14", "0\n2\n8\n2\n0\n2\n6\n4\n0\n2\n0\n0"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "二分", "2025", "洛谷原创", "O2优化", "分块", "洛谷比赛"], "title": "「FAOI-R5」datealive", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/kidxx2qe.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/is31j7j7.png)", "description": "给定长度为 $n$ 的序列 $c_1,c_2,\\cdots,c_n$，$c_i\\in\\{0,1\\}$。序列中每个元素都对应一个括号，若 $c_i=0$ 则该位置上的括号是左括号，若 $c_i=1$ 则该位置上的括号是右括号。\n\n我们用 $f(l,r)$ 表示区间 $[l,r]$ 内的括号序列是否合法。若 $c_l,c_{l+1},\\cdots,c_r$ 组成的括号序列合法则为 $f(l,r)=1$，否则则为 $f(l,r)=0$。\n\n合法括号序列的定义：\n- 空串是合法括号序列；\n- 若 `A` 是合法括号序列，`(A)` 是合法括号序列；\n- 若 `A` 和 `B` 是合法括号序列，`AB` 是合法括号序列。\n\n你需要**在线地**执行 $q$ 次操作，分为两种：\n- `1 l r`，查询 $\\max\\limits_{[l',r']\\in[l,r]}\\{(r'-l'+1)\\cdot f(l',r')\\}$，即查询 $[l,r]$ 间的最长合法括号子串的长度。\n- `2 l r`，对于 $i\\in[l,r]$，将 $c_i$ 修改为 $(1-c_i)$，即将 $[l,r]$ 间的括号逐个调转方向。", "inputFormat": "第一行两个正整数 $n,q$，分别代表序列长度和操作次数。\n\n接下来 $n$ 个非负整数 $c_1,c_2\\cdots,c_n$，代表初始序列。\n\n接下来 $q$ 行，每行三个正整数 $op,l',r'$，表示操作类型和加密后的 $l,r$。\n\n为了强制在线，数据经过加密，我们通过如下过程解密：记 $p$ 为上次查询操作的答案，没有则为 $0$。$l=((l'+p)\\bmod n)+1,r=((r'+p)\\bmod n)+1$，若 $l>r$ 则交换 $l,r$。\n\n$op,l,r$ 表示操作的三个参数，若 $op=1$ 表示题面中的 `1 l r` 操作；若 $op=2$ 表示题面中的 `2 l r` 操作。", "outputFormat": "对于每次查询，输出一行一个非负整数表示查询的答案。", "hint": "### 样例 1 解释\n\n解密后的结果如下：\n\n```\n10 10\n0 1 1 0 0 1 0 0 1 1 \n2 8 9\n2 1 6\n2 2 6\n2 7 8\n2 2 8\n2 5 6\n2 4 5\n1 3 6\n1 6 9\n1 10 10\n```\n\n$7$ 次修改后的括号串为 $)((())()()$。\n\n- 对于第一组询问，截取子串 $[3,6]$ 得 $(())$。整个子串是合法的括号序列，故答案为 $6-3+1=4$。\n- 对于第二组询问，截取子串 $[6,9]$ 得 $)()($。子串 $[7,8]$ 是其中最长的合法括号子串，故答案为 $8-7+1=2$。\n- 对于第三组询问，截取子串 $[10,10]$ 得 $)$。该子串中合法括号子串为空串，故答案为 $0$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | $n \\le$ | $q \\le$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $100$ | $100$ | $10$ | × |\n| $2$ | $2 \\times 10^4$ | $2 \\times 10^4$ | $10$ | × |\n| $3$ | $4 \\times 10^6$ | $10^5$ | $20$ | $\\checkmark$ |\n| $4$ | $10^5$ | $10^5$ | $30$ | × |\n| $5$ | $4 \\times 10^6$ | $10^5$ | $30$ | × |\n\n特殊性质：保证没有修改操作。\n\n对于所有数据，$1 \\le n\\le 4 \\times 10^6$，$1\\le q \\le 10^{5}$，$1 \\le l',r' \\le n$，$op\\in\\{1,2\\}$，$c_i\\in\\{0,1\\}$。\n\n本题除 Subtask #3 外保证操作类型随机生成，即每次选择一个 $\\{1,2\\}$ 中的随机数（选到 $1$ 和 $2$ 的概率均为 $50\\%$）作为 $op$。\n\n本题题目附件附有大样例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R5」datealive", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/kidxx2qe.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/is31j7j7.png)", "description": "给定长度为 $n$ 的序列 $c_1,c_2,\\cdots,c_n$，$c_i\\in\\{0,1\\}$。序列中每个元素都对应一个括号，若 $c_i=0$ 则该位置上的括号是左括号，若 $c_i=1$ 则该位置上的括号是右括号。\n\n我们用 $f(l,r)$ 表示区间 $[l,r]$ 内的括号序列是否合法。若 $c_l,c_{l+1},\\cdots,c_r$ 组成的括号序列合法则为 $f(l,r)=1$，否则则为 $f(l,r)=0$。\n\n合法括号序列的定义：\n- 空串是合法括号序列；\n- 若 `A` 是合法括号序列，`(A)` 是合法括号序列；\n- 若 `A` 和 `B` 是合法括号序列，`AB` 是合法括号序列。\n\n你需要**在线地**执行 $q$ 次操作，分为两种：\n- `1 l r`，查询 $\\max\\limits_{[l',r']\\in[l,r]}\\{(r'-l'+1)\\cdot f(l',r')\\}$，即查询 $[l,r]$ 间的最长合法括号子串的长度。\n- `2 l r`，对于 $i\\in[l,r]$，将 $c_i$ 修改为 $(1-c_i)$，即将 $[l,r]$ 间的括号逐个调转方向。", "inputFormat": "第一行两个正整数 $n,q$，分别代表序列长度和操作次数。\n\n接下来 $n$ 个非负整数 $c_1,c_2\\cdots,c_n$，代表初始序列。\n\n接下来 $q$ 行，每行三个正整数 $op,l',r'$，表示操作类型和加密后的 $l,r$。\n\n为了强制在线，数据经过加密，我们通过如下过程解密：记 $p$ 为上次查询操作的答案，没有则为 $0$。$l=((l'+p)\\bmod n)+1,r=((r'+p)\\bmod n)+1$，若 $l>r$ 则交换 $l,r$。\n\n$op,l,r$ 表示操作的三个参数，若 $op=1$ 表示题面中的 `1 l r` 操作；若 $op=2$ 表示题面中的 `2 l r` 操作。", "outputFormat": "对于每次查询，输出一行一个非负整数表示查询的答案。", "hint": "### 样例 1 解释\n\n解密后的结果如下：\n\n```\n10 10\n0 1 1 0 0 1 0 0 1 1 \n2 8 9\n2 1 6\n2 2 6\n2 7 8\n2 2 8\n2 5 6\n2 4 5\n1 3 6\n1 6 9\n1 10 10\n```\n\n$7$ 次修改后的括号串为 $)((())()()$。\n\n- 对于第一组询问，截取子串 $[3,6]$ 得 $(())$。整个子串是合法的括号序列，故答案为 $6-3+1=4$。\n- 对于第二组询问，截取子串 $[6,9]$ 得 $)()($。子串 $[7,8]$ 是其中最长的合法括号子串，故答案为 $8-7+1=2$。\n- 对于第三组询问，截取子串 $[10,10]$ 得 $)$。该子串中合法括号子串为空串，故答案为 $0$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | $n \\le$ | $q \\le$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $100$ | $100$ | $10$ | × |\n| $2$ | $2 \\times 10^4$ | $2 \\times 10^4$ | $10$ | × |\n| $3$ | $4 \\times 10^6$ | $10^5$ | $20$ | $\\checkmark$ |\n| $4$ | $10^5$ | $10^5$ | $30$ | × |\n| $5$ | $4 \\times 10^6$ | $10^5$ | $30$ | × |\n\n特殊性质：保证没有修改操作。\n\n对于所有数据，$1 \\le n\\le 4 \\times 10^6$，$1\\le q \\le 10^{5}$，$1 \\le l',r' \\le n$，$op\\in\\{1,2\\}$，$c_i\\in\\{0,1\\}$。\n\n本题除 Subtask #3 外保证操作类型随机生成，即每次选择一个 $\\{1,2\\}$ 中的随机数（选到 $1$ 和 $2$ 的概率均为 $50\\%$）作为 $op$。\n\n本题题目附件附有大样例。", "locale": "zh-CN"}}}
{"pid": "P11658", "type": "P", "difficulty": 6, "samples": [["1 0", "2"], ["2 1", "4"], ["3 1", "499122184"], ["5 2", "655097885"], ["10 3", "972670600"], ["114 514", "802524221"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2025", "洛谷原创", "O2优化", "矩阵加速", "组合数学", "容斥原理", "快速数论变换 NTT", "洛谷比赛"], "title": "「FAOI-R5」波特检测", "background": "正在验证您是否是真人。这可能需要几秒钟时间。", "description": "小 H 是一个 bot，他内置一个序列 $\\{A_n\\}$ 和一个长度为 $n$ 的 01 串 $H$。询问他一个区间 $[l,r]$，他可以给出一个**集合** $g(l,r)$:\n- 设置序列 $\\{B_n\\}$，对于 $i=1,2,\\ldots,n$，执行以下操作：\n  - 如果 $H_i=\\tt{0}$，$B_i=A_i$（即小 H 不能修改 $A_i$ 的值）；\n  - 如果 $H_i=\\tt{1}$，可以任意选择一个非负整数 $v$，令 $B_i=v$（即小 H 可以任意修改 $A_i$ 的值，**修改后的值可以不在 $\\boldsymbol{[0,2^k-1]}$ 范围内**）。\n- $g(l,r)=\\{B_l\\operatorname{xor}B_{l+1},B_{l+1}\\operatorname{xor}B_{l+2},\\cdots,B_{r-1}\\operatorname{xor}B_{r}\\}$。\n\n喵仔牛奶需要对小 H 进行若干次检测，每次选取 $[l,r],[L,R]$ 两个区间，满足 $r\\le L$，并向小 H 询问得出 $g(l,r),g(L,R)$。若 $g(l,r)\\cap g(L,R)\\neq\\varnothing$，则检测失败，小 H 的 bot 身份会被发现。\n\n若小 H 存在一种策略可以回答所有可能的询问并不存在检测失败（也就是对于任意满足 $r\\le L$ 区间 $[l,r],[L,R]$ 都不会检测失败），我们就称这个 01 串 $H$ 是「可用的」。\n\n给定 $n,k$，序列 $\\{A_n\\}$ 的每一项都在 $[0,2^k-1]$ 中均匀随机选取。你需要求出「可用的」01 串 $H$ 的个数的期望值。答案对 $998244353$ 取模。", "inputFormat": "一行两个非负整数 $n,k$，表示序列长度与值域大小。", "outputFormat": "一行一个非负整数，表示「可用的」01 串 $H$ 的个数的期望值对 $998244353$ 取模后的结果。\n\n如果你不知道如何进行有理数取模：\n- 令 $M=998244353$。可以证明，答案可以被表示为最简分数 $\\frac{p}{q}$，其中 $p$ 和 $q$ 是正整数且 $q\\not\\equiv 0\\pmod M$。你只需要输出一个非负整数 $x\\in[0,M)$ 使得 $x\\cdot q\\equiv p\\pmod M$。\n- 如果你不知道如何找出所述的 $x$，可以参考 P2613。", "hint": "### 样例 1 解释\n\n唯一一种可能的情况是 $A=[0]$，此时 $H=\\tt 0$ 和 $H=\\tt 1$ 都是「可用的」，故答案为 $2$。\n\n### 样例 2 解释\n\n有以下 $4$ 种可能的情况：\n\n- $A=[0,0]$。\n- $A=[0,1]$。\n- $A=[1,0]$。\n- $A=[1,1]$。\n\n在不修改的情况下，它们都能通过检测（对应的答案均为 $2^2=4$），故答案为 $2^2=4$。\n\n### 样例 3 解释\n\n有以下 $8$ 种可能的情况：\n- $A=[0,0,0]$，$H$ 的个数为 $7$。\n- $A=[0,0,1]$，$H$ 的个数为 $8$。\n- $A=[0,1,0]$，$H$ 的个数为 $7$。\n- $A=[0,1,1]$，$H$ 的个数为 $8$。\n- $A=[1,0,0]$，$H$ 的个数为 $8$。\n- $A=[1,0,1]$，$H$ 的个数为 $7$。\n- $A=[1,1,0]$，$H$ 的个数为 $8$。\n- $A=[1,1,1]$，$H$ 的个数为 $7$。\n\n当 $A=[0,1,0]$ 时，$H=\\tt{000}$ 不是「可用的」。当询问 $[1,2],[2,3]$ 时：\n- 小 H 每次只能原封不动地保留 $A$。\n- 当询问 $[1,2]$ 时，$g(1,2)=\\{1\\}$。\n- 当询问 $[2,3]$ 时，$g(2,3)=\\{1\\}$。\n- $g(1,2)\\cap g(2,3)=\\{1\\}$，检测失败。\n\n当 $A=[1,1,1]$ 时，$H=\\tt{010}$ 是「可用的」。当询问 $[1,2],[2,3]$ 时：\n- 小 H 可以任意修改 $A$ 的值，**并且每次询问时修改的值可以不一样**。\n- 当询问 $[1,2]$ 时，小 H 令 $B=[1,2,1]$，$g(1,2)=\\{3\\}$。\n- 当询问 $[2,3]$ 时，小 H 令 $B=[1,1,1]$，$g(2,3)=\\{0\\}$。\n- $g(1,2)\\cap g(2,3)=\\varnothing$，检测成功。\n\n故答案为 $(7\\times 4+8\\times 4)\\times\\dfrac{1}{8}=\\dfrac{15}{2}$。\n\n注意到 $2\\times 499122184\\equiv 15\\pmod{998244353}$，答案即为 $499122184$。\n\n### 样例 4 解释\n\n答案为 $\\dfrac{907}{32}\\equiv655097885\\pmod{998244353}$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$n\\leq2$。\n- Subtask 2（10 pts）：$n\\leq 6$，$k\\leq 2$。\n- Subtask 3（10 pts）：$n\\leq 50$，$k\\leq6$。\n- Subtask 4（10 pts）：$n\\leq 500$，$k\\leq 20$。\n- Subtask 5（20 pts）：$n\\leq 2\\times10^3$。\n- Subtask 6（20 pts）：$n\\leq 5\\times10^4$。\n- Subtask 7（20 pts）：无特殊限制。\n\n对于所有数据，$1\\leq n\\leq 10^6$，$0\\leq k\\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R5」波特检测", "background": "正在验证您是否是真人。这可能需要几秒钟时间。", "description": "小 H 是一个 bot，他内置一个序列 $\\{A_n\\}$ 和一个长度为 $n$ 的 01 串 $H$。询问他一个区间 $[l,r]$，他可以给出一个**集合** $g(l,r)$:\n- 设置序列 $\\{B_n\\}$，对于 $i=1,2,\\ldots,n$，执行以下操作：\n  - 如果 $H_i=\\tt{0}$，$B_i=A_i$（即小 H 不能修改 $A_i$ 的值）；\n  - 如果 $H_i=\\tt{1}$，可以任意选择一个非负整数 $v$，令 $B_i=v$（即小 H 可以任意修改 $A_i$ 的值，**修改后的值可以不在 $\\boldsymbol{[0,2^k-1]}$ 范围内**）。\n- $g(l,r)=\\{B_l\\operatorname{xor}B_{l+1},B_{l+1}\\operatorname{xor}B_{l+2},\\cdots,B_{r-1}\\operatorname{xor}B_{r}\\}$。\n\n喵仔牛奶需要对小 H 进行若干次检测，每次选取 $[l,r],[L,R]$ 两个区间，满足 $r\\le L$，并向小 H 询问得出 $g(l,r),g(L,R)$。若 $g(l,r)\\cap g(L,R)\\neq\\varnothing$，则检测失败，小 H 的 bot 身份会被发现。\n\n若小 H 存在一种策略可以回答所有可能的询问并不存在检测失败（也就是对于任意满足 $r\\le L$ 区间 $[l,r],[L,R]$ 都不会检测失败），我们就称这个 01 串 $H$ 是「可用的」。\n\n给定 $n,k$，序列 $\\{A_n\\}$ 的每一项都在 $[0,2^k-1]$ 中均匀随机选取。你需要求出「可用的」01 串 $H$ 的个数的期望值。答案对 $998244353$ 取模。", "inputFormat": "一行两个非负整数 $n,k$，表示序列长度与值域大小。", "outputFormat": "一行一个非负整数，表示「可用的」01 串 $H$ 的个数的期望值对 $998244353$ 取模后的结果。\n\n如果你不知道如何进行有理数取模：\n- 令 $M=998244353$。可以证明，答案可以被表示为最简分数 $\\frac{p}{q}$，其中 $p$ 和 $q$ 是正整数且 $q\\not\\equiv 0\\pmod M$。你只需要输出一个非负整数 $x\\in[0,M)$ 使得 $x\\cdot q\\equiv p\\pmod M$。\n- 如果你不知道如何找出所述的 $x$，可以参考 P2613。", "hint": "### 样例 1 解释\n\n唯一一种可能的情况是 $A=[0]$，此时 $H=\\tt 0$ 和 $H=\\tt 1$ 都是「可用的」，故答案为 $2$。\n\n### 样例 2 解释\n\n有以下 $4$ 种可能的情况：\n\n- $A=[0,0]$。\n- $A=[0,1]$。\n- $A=[1,0]$。\n- $A=[1,1]$。\n\n在不修改的情况下，它们都能通过检测（对应的答案均为 $2^2=4$），故答案为 $2^2=4$。\n\n### 样例 3 解释\n\n有以下 $8$ 种可能的情况：\n- $A=[0,0,0]$，$H$ 的个数为 $7$。\n- $A=[0,0,1]$，$H$ 的个数为 $8$。\n- $A=[0,1,0]$，$H$ 的个数为 $7$。\n- $A=[0,1,1]$，$H$ 的个数为 $8$。\n- $A=[1,0,0]$，$H$ 的个数为 $8$。\n- $A=[1,0,1]$，$H$ 的个数为 $7$。\n- $A=[1,1,0]$，$H$ 的个数为 $8$。\n- $A=[1,1,1]$，$H$ 的个数为 $7$。\n\n当 $A=[0,1,0]$ 时，$H=\\tt{000}$ 不是「可用的」。当询问 $[1,2],[2,3]$ 时：\n- 小 H 每次只能原封不动地保留 $A$。\n- 当询问 $[1,2]$ 时，$g(1,2)=\\{1\\}$。\n- 当询问 $[2,3]$ 时，$g(2,3)=\\{1\\}$。\n- $g(1,2)\\cap g(2,3)=\\{1\\}$，检测失败。\n\n当 $A=[1,1,1]$ 时，$H=\\tt{010}$ 是「可用的」。当询问 $[1,2],[2,3]$ 时：\n- 小 H 可以任意修改 $A$ 的值，**并且每次询问时修改的值可以不一样**。\n- 当询问 $[1,2]$ 时，小 H 令 $B=[1,2,1]$，$g(1,2)=\\{3\\}$。\n- 当询问 $[2,3]$ 时，小 H 令 $B=[1,1,1]$，$g(2,3)=\\{0\\}$。\n- $g(1,2)\\cap g(2,3)=\\varnothing$，检测成功。\n\n故答案为 $(7\\times 4+8\\times 4)\\times\\dfrac{1}{8}=\\dfrac{15}{2}$。\n\n注意到 $2\\times 499122184\\equiv 15\\pmod{998244353}$，答案即为 $499122184$。\n\n### 样例 4 解释\n\n答案为 $\\dfrac{907}{32}\\equiv655097885\\pmod{998244353}$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$n\\leq2$。\n- Subtask 2（10 pts）：$n\\leq 6$，$k\\leq 2$。\n- Subtask 3（10 pts）：$n\\leq 50$，$k\\leq6$。\n- Subtask 4（10 pts）：$n\\leq 500$，$k\\leq 20$。\n- Subtask 5（20 pts）：$n\\leq 2\\times10^3$。\n- Subtask 6（20 pts）：$n\\leq 5\\times10^4$。\n- Subtask 7（20 pts）：无特殊限制。\n\n对于所有数据，$1\\leq n\\leq 10^6$，$0\\leq k\\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11659", "type": "P", "difficulty": 5, "samples": [["10 5\n4 4 2 3 2 3 3 4 2 3\n1 5\n3 7\n1 10\n5 10\n4 8", "2\n0\n17\n1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["莫队", "O2优化"], "title": "小夫", "background": "![](bilibili:BV19w411k7WT)", "description": "给定一个长为 $n$ 的整数序列 $a$，有 $m$ 次询问：\n\n* ```l r```：求 $l\\le x<y<z\\le r,a_x:a_y:a_z=4:2:3$ 的三元组 $(x,y,z)$ 的个数。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行是 $n$ 个整数，表示序列 $a$。\n\n最后是 $m$ 行的整数 $l,r$。", "outputFormat": "一行一个整数。", "hint": "对于所有测试数据，保证：$1\\le n,m,a_i\\le2\\times10^5$，$1\\le l\\le r\\le n$。\n\n| Subtask | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $n,m\\le10^2$ | $5$ |\n| $1$ | $n,m\\le10^4$ | $10$ |\n| $2$ | $2\\le a_i\\le 4$ | $20$ |\n| $3$ | - | $65$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小夫", "background": "![](bilibili:BV19w411k7WT)", "description": "给定一个长为 $n$ 的整数序列 $a$，有 $m$ 次询问：\n\n* ```l r```：求 $l\\le x<y<z\\le r,a_x:a_y:a_z=4:2:3$ 的三元组 $(x,y,z)$ 的个数。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行是 $n$ 个整数，表示序列 $a$。\n\n最后是 $m$ 行的整数 $l,r$。", "outputFormat": "一行一个整数。", "hint": "对于所有测试数据，保证：$1\\le n,m,a_i\\le2\\times10^5$，$1\\le l\\le r\\le n$。\n\n| Subtask | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $n,m\\le10^2$ | $5$ |\n| $1$ | $n,m\\le10^4$ | $10$ |\n| $2$ | $2\\le a_i\\le 4$ | $20$ |\n| $3$ | - | $65$ |", "locale": "zh-CN"}}}
{"pid": "P11660", "type": "P", "difficulty": 6, "samples": [["10 10\n1 3 4 3 4 7 2 9 7 10 \n1 10 3 7\n3 13 3 2\n4 6 2 7\n0 6 7 2\n2 7 10 1\n1 4 0 10\n4 5 2 8\n2 9 2 0\n1 5 0 7\n0 2 6 3", "4\n1\n1\n3\n2\n2\n1\n0\n4\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["O2优化", "分块"], "title": "我终将成为你的倒影", "background": "『 现实并不像回忆那般，充满变化的余地。』", "description": "岛村是不喜欢上课的。但是今天的数学课上，一个函数 $f(x)=\\lfloor \\frac{x+a}{b}\\rfloor$ 吸引住了她。\n\n她现在有一个长度为 $n$ 的序列 $A$ 和 $m$ 个询问。她想知道对于每组 $l,r,a,b$，记 $B_i=f(A_i)$，$\\displaystyle\\sum^r_{i=l+1}[B_i=B_{i-1}]$ 的值为多少（其中若 $[]$ 里面的表达式为真，值为 $1$，否则为 $0$）。\n\n但是她着急于去找安达打乒乓球，所以把问题交给你了。\n\n本题强制在线，每次的 $l,r,a,b$ 均要异或上一次的答案，若这是第一次询问，则不做操作。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $A_i$。\n\n接下来 $m$ 行，每行四个整数 $l,r,a,b$。", "outputFormat": "对于每次询问，输出一个整数表示答案。", "hint": "对于所有测试数据，保证：$1 \\le n,m,A_i \\le 10^5$，$1\\le b\\le 500$，$0 \\le a\\le2\\times10^9$，$l<r$。\n\n| Subtask | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $n,m\\le100$ | $10$ |\n| $1$ | $n\\le100$ | $20$ |\n| $2$ | $b\\le10$ | $20$ |\n| $3$ | - | $50$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "我终将成为你的倒影", "background": "『 现实并不像回忆那般，充满变化的余地。』", "description": "岛村是不喜欢上课的。但是今天的数学课上，一个函数 $f(x)=\\lfloor \\frac{x+a}{b}\\rfloor$ 吸引住了她。\n\n她现在有一个长度为 $n$ 的序列 $A$ 和 $m$ 个询问。她想知道对于每组 $l,r,a,b$，记 $B_i=f(A_i)$，$\\displaystyle\\sum^r_{i=l+1}[B_i=B_{i-1}]$ 的值为多少（其中若 $[]$ 里面的表达式为真，值为 $1$，否则为 $0$）。\n\n但是她着急于去找安达打乒乓球，所以把问题交给你了。\n\n本题强制在线，每次的 $l,r,a,b$ 均要异或上一次的答案，若这是第一次询问，则不做操作。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $A_i$。\n\n接下来 $m$ 行，每行四个整数 $l,r,a,b$。", "outputFormat": "对于每次询问，输出一个整数表示答案。", "hint": "对于所有测试数据，保证：$1 \\le n,m,A_i \\le 10^5$，$1\\le b\\le 500$，$0 \\le a\\le2\\times10^9$，$l<r$。\n\n| Subtask | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $n,m\\le100$ | $10$ |\n| $1$ | $n\\le100$ | $20$ |\n| $2$ | $b\\le10$ | $20$ |\n| $3$ | - | $50$ |", "locale": "zh-CN"}}}
{"pid": "P11661", "type": "P", "difficulty": 6, "samples": [["10\n5 5 7 8 6 7 2 1 7 2 \n4 11 7 19 13 8 10 11 10 7 ", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["莫队", "O2优化", "分治", "ST 表", "笛卡尔树", "根号分治"], "title": "无聊", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/f9kqwg7m.png)", "description": "白很无聊呢，于是她给空出了道题。\n\n给出 $n$ 个数的序列 $a,b$。\n\n求 $b_l\\equiv b_r\\pmod {\\displaystyle\\max_{l\\le i\\le r}a_i}$ 的 $(l,r)$ 个数。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数表示 $a$ 序列。\n\n第三行 $n$ 个整数表示 $b$ 序列。", "outputFormat": "一个整数。", "hint": "对于所有测试数据，保证：$1\\le n,a_i,b_i\\le 5\\times10^5$。\n\n| Subtask | $n\\le$ | 限制 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10^4$ | - | $5$ |\n| $1$ | $10^5$ | $a_i\\ge a_{i+1}$ | $15$ |\n| $2$ | $10^5$ | - | $30$ |\n| $3$ | $5\\times10^5$ | - | $50$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "无聊", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/f9kqwg7m.png)", "description": "白很无聊呢，于是她给空出了道题。\n\n给出 $n$ 个数的序列 $a,b$。\n\n求 $b_l\\equiv b_r\\pmod {\\displaystyle\\max_{l\\le i\\le r}a_i}$ 的 $(l,r)$ 个数。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数表示 $a$ 序列。\n\n第三行 $n$ 个整数表示 $b$ 序列。", "outputFormat": "一个整数。", "hint": "对于所有测试数据，保证：$1\\le n,a_i,b_i\\le 5\\times10^5$。\n\n| Subtask | $n\\le$ | 限制 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10^4$ | - | $5$ |\n| $1$ | $10^5$ | $a_i\\ge a_{i+1}$ | $15$ |\n| $2$ | $10^5$ | - | $30$ |\n| $3$ | $5\\times10^5$ | - | $50$ |", "locale": "zh-CN"}}}
{"pid": "P11662", "type": "P", "difficulty": 3, "samples": [["3\n5 2 5\n5 3 1", "5 4"], ["3\n1 7 8\n1 3 5", "8 3"], ["4\n2 1 2 1\n2 1 1 2", "2 10"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "JOI（日本）"], "title": "[JOI 2025 Final] 方格染色 / Grid Coloring", "background": "译自 [第24回日本情報オリンピック 本選](https://contests.ioi-jp.org/joi-ho-2025/index.html) T1。\n", "description": "\n要把一个 $N\\times N$ 的网格图染色。我们记第 $i$ 行第 $j$ 列的格子为 $(i,j)$。\n\n第一行和第一列的格子已经被染了色。具体地，$\\forall 1\\le i\\le N$，格子 $(i,1)$ 的颜色为 $A_i$，格子 $(1,i)$ 的颜色为 $B_i$。根据定义 $A_1=B_1$。\n\n对于剩下的格子，考虑如下的染色过程：\n\n- 对于 $i=2,3,\\cdots,N$，按如下的方案染色第 $i$ 行：\n    - 对于 $j=2,3,\\cdots,N$，按如下的方案染色格子 $(i,j)$：\n        - 记 $\\operatorname{color}(i,j)$ 为格子 $(i,j)$ 的颜色（对应的数字）。则 $\\operatorname{color}(i,j)=\\max(\\operatorname{color}(i-1,j),\\operatorname{color}(i,j-1))$。\n\n在染色结束后，输出哪种颜色被染在最多的格子上，以及这种颜色被染在多少个格子上。如果有多种颜色，输出数字最大的那种。", "inputFormat": "\n如下所示：\n\n\n> $N$\\\n> $A_1$ $A_2$ $\\cdots$ $A_N$\\\n> $B_1$ $B_2$ $\\cdots$ $B_N$", "outputFormat": "\n输出一行两个整数，以空格分隔：\n\n- 第一个整数，表示被染在最多的格子上的颜色。如果有多种颜色，输出数字最大的那种。\n- 第二个整数，表示这种颜色被染在了多少个格子上。\n", "hint": "\n### 样例解释\n\n#### 样例 $1$ 解释\n\n最后各个格子的颜色如下所示：\n\n| $5$ | $3$ | $1$ |\n| :--: | :--: | :--: |\n| $2$ | $3$ | $3$ |\n| $5$ | $5$ | $5$ |\n\n颜色 $5$ 被染在了 $4$ 个格子上，所以输出 $\\texttt{5 4}$。\n\n\n该样例满足子任务 $1,2,5$ 的限制。\n\n#### 样例 $2$ 解释\n\n最后各个格子的颜色如下所示：\n\n| $1$ | $3$ | $5$ |\n| :--: | :--: | :--: |\n| $7$ | $7$ | $7$ |\n| $8$ | $8$ | $8$ |\n\n颜色 $7,8$ 都被染在了 $3$ 个格子上，所以输出较大的 $\\texttt{8 3}$。\n\n\n该样例满足子任务 $1,2,4,5$ 的限制。\n\n#### 样例 $3$ 解释\n\n该样例满足子任务 $1,2,3,5$ 的限制。\n\n### 数据范围\n\n- $2\\le N\\le 2\\times 10^5$。\n- $1\\le A_i\\le 10^9$（$1\\le i\\le N$）。\n- $1\\le B_i\\le 10^9$（$1\\le i\\le N$）。\n- $A_1=B_1$。\n- 输入的值全部是整数。\n\n### 子任务\n\n1. （15pts）$N\\le 500$，$A_i,B_i\\le 10^5$（$1\\le i\\le N$）。\n2. （10pts）$N\\le 500$。\n3. （20pts）$A_i,B_i\\le 2$（$1\\le i\\le N$）。\n4. （25pts）$A_i\\lt A_{i+1},B_i\\lt B_{i+1}$（$\\forall 1\\le i\\le N-1$）；\n5. （30pts）无额外限制。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2025 Final] 方格染色 / Grid Coloring", "background": "译自 [第24回日本情報オリンピック 本選](https://contests.ioi-jp.org/joi-ho-2025/index.html) T1。\n", "description": "\n要把一个 $N\\times N$ 的网格图染色。我们记第 $i$ 行第 $j$ 列的格子为 $(i,j)$。\n\n第一行和第一列的格子已经被染了色。具体地，$\\forall 1\\le i\\le N$，格子 $(i,1)$ 的颜色为 $A_i$，格子 $(1,i)$ 的颜色为 $B_i$。根据定义 $A_1=B_1$。\n\n对于剩下的格子，考虑如下的染色过程：\n\n- 对于 $i=2,3,\\cdots,N$，按如下的方案染色第 $i$ 行：\n    - 对于 $j=2,3,\\cdots,N$，按如下的方案染色格子 $(i,j)$：\n        - 记 $\\operatorname{color}(i,j)$ 为格子 $(i,j)$ 的颜色（对应的数字）。则 $\\operatorname{color}(i,j)=\\max(\\operatorname{color}(i-1,j),\\operatorname{color}(i,j-1))$。\n\n在染色结束后，输出哪种颜色被染在最多的格子上，以及这种颜色被染在多少个格子上。如果有多种颜色，输出数字最大的那种。", "inputFormat": "\n如下所示：\n\n\n> $N$\\\n> $A_1$ $A_2$ $\\cdots$ $A_N$\\\n> $B_1$ $B_2$ $\\cdots$ $B_N$", "outputFormat": "\n输出一行两个整数，以空格分隔：\n\n- 第一个整数，表示被染在最多的格子上的颜色。如果有多种颜色，输出数字最大的那种。\n- 第二个整数，表示这种颜色被染在了多少个格子上。\n", "hint": "\n### 样例解释\n\n#### 样例 $1$ 解释\n\n最后各个格子的颜色如下所示：\n\n| $5$ | $3$ | $1$ |\n| :--: | :--: | :--: |\n| $2$ | $3$ | $3$ |\n| $5$ | $5$ | $5$ |\n\n颜色 $5$ 被染在了 $4$ 个格子上，所以输出 $\\texttt{5 4}$。\n\n\n该样例满足子任务 $1,2,5$ 的限制。\n\n#### 样例 $2$ 解释\n\n最后各个格子的颜色如下所示：\n\n| $1$ | $3$ | $5$ |\n| :--: | :--: | :--: |\n| $7$ | $7$ | $7$ |\n| $8$ | $8$ | $8$ |\n\n颜色 $7,8$ 都被染在了 $3$ 个格子上，所以输出较大的 $\\texttt{8 3}$。\n\n\n该样例满足子任务 $1,2,4,5$ 的限制。\n\n#### 样例 $3$ 解释\n\n该样例满足子任务 $1,2,3,5$ 的限制。\n\n### 数据范围\n\n- $2\\le N\\le 2\\times 10^5$。\n- $1\\le A_i\\le 10^9$（$1\\le i\\le N$）。\n- $1\\le B_i\\le 10^9$（$1\\le i\\le N$）。\n- $A_1=B_1$。\n- 输入的值全部是整数。\n\n### 子任务\n\n1. （15pts）$N\\le 500$，$A_i,B_i\\le 10^5$（$1\\le i\\le N$）。\n2. （10pts）$N\\le 500$。\n3. （20pts）$A_i,B_i\\le 2$（$1\\le i\\le N$）。\n4. （25pts）$A_i\\lt A_{i+1},B_i\\lt B_{i+1}$（$\\forall 1\\le i\\le N-1$）；\n5. （30pts）无额外限制。\n\n", "locale": "zh-CN"}}}
{"pid": "P11663", "type": "P", "difficulty": 4, "samples": [["5\n1 3 2 8 6\n4 3 1 1 2", "1"], ["5\n1 6 3 3 2\n1 2 1 0 1", "3"], ["10\n11 9 8 12 7 7 8 12 9 10\n1 1 1 1 1 1 1 1 1 1", "9"], ["7\n1125 638 0 37 737 820 1202\n23 984 558 350 52 345 580", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "二分", "单调队列", "2025", "前缀和", "ST 表", "JOI（日本）"], "title": "[JOI 2025 Final] 勇者比太郎 2 / Bitaro the Brave 2", "background": "\n译自 [第24回日本情報オリンピック 本選](https://contests.ioi-jp.org/joi-ho-2025/index.html) T2。", "description": "\n比太郎要打怪。\n\n令比太郎初始时的**力量**为 $x$。有 $N$ 个怪物，编号 $1\\sim N$。欲打败第 $i$（$1\\le i\\le N$）个怪物，需要力量 $\\ge A_i$。打败第 $i$（$1\\le i\\le N$）个怪物，会使比太郎的力量增加 $B_i$。\n\n比太郎会用如下的策略打怪：\n\n- 选择整数 $j$（$1\\le j\\le N$），然后按 $j,j+1,\\cdots,N$ 的顺序打怪。\n- 如果 $j\\ge 2$，回头按顺序打怪物 $1,2,\\cdots,j-1$。\n\n在按照策略打完所有的怪物的前提下，求出比太郎初始力量 $x$ 的最小值。\n", "inputFormat": "\n如下所示：\n\n\n> $N$\\\n> $A_1$ $A_2$ $\\cdots$ $A_N$\\\n> $B_1$ $B_2$ $\\cdots$ $B_N$\n", "outputFormat": "输出一行一个整数，即比太郎初始力量 $x$ 的最小值。\n", "hint": "\n### 样例解释\n\n#### 样例 $1$ 解释\n\n令 $x=1$，然后按照 $1\\to 5$ 的顺序打怪。\n\n该样例满足子任务 $1,2,3,5$ 的限制。\n\n\n#### 样例 $2$ 解释\n\n令 $x=3$，然后先打 $3\\to 5$ 的怪，再打 $1\\to 2$ 的怪。\n\n该样例满足子任务 $1,2,3,5$ 的限制。\n\n\n#### 样例 $3$ 解释\n\n该样例满足所有子任务的限制。\n\n\n#### 样例 $4$ 解释\n\n该样例满足子任务 $1,2,3,5$ 的限制。\n\n\n\n### 数据范围\n\n- $2\\le N\\le 5\\times 10^5$。\n- $0\\le A_i\\le 10^9$（$1\\le i\\le N$）。\n- $0\\le B_i\\le 10^9$（$1\\le i\\le N$）。\n- 输入的值全部是整数。\n\n### 子任务\n\n1. （10pts）$N\\le 2,000$，保证答案不大于 $10$。\n2. （21pts）$N\\le 2,000$。\n3. （19pts）保证答案不大于 $10$。\n4. （22pts）$B_i=1$（$1\\le i\\le N$）；\n5. （28pts）无额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2025 Final] 勇者比太郎 2 / Bitaro the Brave 2", "background": "\n译自 [第24回日本情報オリンピック 本選](https://contests.ioi-jp.org/joi-ho-2025/index.html) T2。", "description": "\n比太郎要打怪。\n\n令比太郎初始时的**力量**为 $x$。有 $N$ 个怪物，编号 $1\\sim N$。欲打败第 $i$（$1\\le i\\le N$）个怪物，需要力量 $\\ge A_i$。打败第 $i$（$1\\le i\\le N$）个怪物，会使比太郎的力量增加 $B_i$。\n\n比太郎会用如下的策略打怪：\n\n- 选择整数 $j$（$1\\le j\\le N$），然后按 $j,j+1,\\cdots,N$ 的顺序打怪。\n- 如果 $j\\ge 2$，回头按顺序打怪物 $1,2,\\cdots,j-1$。\n\n在按照策略打完所有的怪物的前提下，求出比太郎初始力量 $x$ 的最小值。\n", "inputFormat": "\n如下所示：\n\n\n> $N$\\\n> $A_1$ $A_2$ $\\cdots$ $A_N$\\\n> $B_1$ $B_2$ $\\cdots$ $B_N$\n", "outputFormat": "输出一行一个整数，即比太郎初始力量 $x$ 的最小值。\n", "hint": "\n### 样例解释\n\n#### 样例 $1$ 解释\n\n令 $x=1$，然后按照 $1\\to 5$ 的顺序打怪。\n\n该样例满足子任务 $1,2,3,5$ 的限制。\n\n\n#### 样例 $2$ 解释\n\n令 $x=3$，然后先打 $3\\to 5$ 的怪，再打 $1\\to 2$ 的怪。\n\n该样例满足子任务 $1,2,3,5$ 的限制。\n\n\n#### 样例 $3$ 解释\n\n该样例满足所有子任务的限制。\n\n\n#### 样例 $4$ 解释\n\n该样例满足子任务 $1,2,3,5$ 的限制。\n\n\n\n### 数据范围\n\n- $2\\le N\\le 5\\times 10^5$。\n- $0\\le A_i\\le 10^9$（$1\\le i\\le N$）。\n- $0\\le B_i\\le 10^9$（$1\\le i\\le N$）。\n- 输入的值全部是整数。\n\n### 子任务\n\n1. （10pts）$N\\le 2,000$，保证答案不大于 $10$。\n2. （21pts）$N\\le 2,000$。\n3. （19pts）保证答案不大于 $10$。\n4. （22pts）$B_i=1$（$1\\le i\\le N$）；\n5. （28pts）无额外限制。", "locale": "zh-CN"}}}
{"pid": "P11664", "type": "P", "difficulty": 6, "samples": [["4 6 10\n1 2 3\n2 4 7\n1 2 6\n2 3 5\n3 4 2\n3 4 8\n4\n3 7 0\n5 6 0\n3 4 0\n1 9 0", "Yes\nNo\nNo\nYes"], ["4 6 10\n1 2 3\n2 4 7\n1 2 6\n2 3 5\n3 4 2\n3 4 8\n3\n5 6 10\n3 4 1\n7 8 3", "Yes\nNo\nYes"], ["3 1 1000000000\n1 2 6\n1\n1 1000000000 1000000000", "No"], ["5 9 2000\n2 3 1814\n2 3 457\n1 2 1226\n3 4 1354\n1 5 1050\n1 2 1725\n2 3 1383\n1 5 1626\n1 4 1795\n5\n850 1872 128\n82 428 1217\n487 924 573\n1639 1926 202\n202 420 25", "Yes\nYes\nYes\nYes\nNo"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["并查集", "树状数组", "2025", "生成树", "扫描线", "JOI（日本）"], "title": "[JOI 2025 Final] 缆车 / Mi Teleférico", "background": "\n译自 [第24回日本情報オリンピック 本選](https://contests.ioi-jp.org/joi-ho-2025/index.html) T3。\n\nMi Teleférico 指的是连接玻利维亚拉巴斯市（La Paz）及埃尔阿尔托市（El Alto）的缆车系统。\n", "description": "\n给定一张 $N$ 个点 $M$ 条边的有向无环图。这张有向图的边是由 $P$ 个公司（编号 $1\\sim P$）修建的，每条边恰好被一个公司修建。\n\n节点标号 $1\\sim N$，第 $i$（$1\\le i\\le M$）条边由节点 $A_i$ 指向节点 $B_i$，且是公司 $C_i$ 修建的。这里，保证 $A_i\\lt B_i$。\n\n有 $Q$ 个询问，每个询问给定区间 $[L,R]$（$1\\le L\\le R\\le P$）和钱数 $X$。目标是从 $1$ 号点只经过编号 $\\in [L,R]$ 的公司修建的边，可以到达其他任意一个节点。\n\n为此，可以选择一个新的区间 $[l',r']$（$1\\le l'\\le r'\\le P$），将 $[L,R]$ 变为 $[l',r']$。这会花费 $|L'-l'|+|R-r'|$ 的代价，这个操作**至多只能执行一次**。操作的代价必须不大于钱数 $X$。\n\n对于每个询问，判断是否能够达成目标。", "inputFormat": "\n如下所示：\n\n\n> $N$ $M$ $P$\\\n> $A_1$ $B_1$ $C_1$\\\n> $A_2$ $B_2$ $C_2$\\\n> $\\vdots$\\\n> $A_M$ $B_M$ $C_M$\\\n> $Q$\\\n> $L_1$ $R_1$ $X_1$\\\n> $L_2$ $R_2$ $X_2$\\\n> $\\vdots$\\\n> $L_Q$ $R_Q$ $X_Q$", "outputFormat": "\n对于第 $i$ 个询问，如果可以达成，输出一行一个 $\\texttt{Yes}$；否则输出一行一个 $\\texttt{No}$。\n", "hint": "\n### 样例解释\n\n#### 样例 $1$ 解释\n\n第 $1$ 个询问中，$[3,7]$ 已经可以满足条件，无需进行操作。\n\n第 $2$ 个询问中，$[5,6]$ 不满足条件，然后无法进行任何操作，所以无法达成目标。\n\n\n该样例满足所有子任务的限制。\n\n\n#### 样例 $2$ 解释\n\n第 $1$ 个询问中，选择 $l'=1,r'=5$，花费 $5$ 的代价可以达成目标。\n\n该样例满足子任务 $2,3,5\\sim 7$ 的限制。\n\n\n#### 样例 $3$ 解释\n该样例满足子任务 $6,7$ 的限制。\n\n\n\n#### 样例 $4$ 解释\n\n该样例满足子任务 $5\\sim 7$ 的限制。\n\n\n\n### 数据范围\n\n- $2\\le N\\le 3\\times 10^5$。\n- $1\\le M\\le 3\\times 10^5$。\n- $1\\le P\\le 10^9$。\n- $1\\le A_i\\lt B_i\\le N$（$1\\le i\\le M$）。\n- $1\\le C_i\\le P$（$1\\le i\\le M$）。\n- $1\\le Q\\le 4\\times 10^5$。\n- $1\\le L_i\\le R_i\\le P$（$1\\le i\\le Q$）。\n- $0\\le X_i\\le 10^9$（$1\\le i\\le Q$）。\n- 输入的都是整数。\n\n### 子任务\n\n1. （7pts）$N,M,Q\\le 50$，$X_i=0$（$1\\le i\\le Q$）。\n2. （8pts）$P\\le 10$。\n3. （11pts）$P\\le 100$。\n4. （23pts）$P\\le 3\\times 10^5$，$X_i=0$（$1\\le i\\le Q$）。\n5. （9pts）$P\\le 3\\times 10^5$。\n6. （22pts）$N,M\\le 8,000$。\n7. （20pts）无额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2025 Final] 缆车 / Mi Teleférico", "background": "\n译自 [第24回日本情報オリンピック 本選](https://contests.ioi-jp.org/joi-ho-2025/index.html) T3。\n\nMi Teleférico 指的是连接玻利维亚拉巴斯市（La Paz）及埃尔阿尔托市（El Alto）的缆车系统。\n", "description": "\n给定一张 $N$ 个点 $M$ 条边的有向无环图。这张有向图的边是由 $P$ 个公司（编号 $1\\sim P$）修建的，每条边恰好被一个公司修建。\n\n节点标号 $1\\sim N$，第 $i$（$1\\le i\\le M$）条边由节点 $A_i$ 指向节点 $B_i$，且是公司 $C_i$ 修建的。这里，保证 $A_i\\lt B_i$。\n\n有 $Q$ 个询问，每个询问给定区间 $[L,R]$（$1\\le L\\le R\\le P$）和钱数 $X$。目标是从 $1$ 号点只经过编号 $\\in [L,R]$ 的公司修建的边，可以到达其他任意一个节点。\n\n为此，可以选择一个新的区间 $[l',r']$（$1\\le l'\\le r'\\le P$），将 $[L,R]$ 变为 $[l',r']$。这会花费 $|L'-l'|+|R-r'|$ 的代价，这个操作**至多只能执行一次**。操作的代价必须不大于钱数 $X$。\n\n对于每个询问，判断是否能够达成目标。", "inputFormat": "\n如下所示：\n\n\n> $N$ $M$ $P$\\\n> $A_1$ $B_1$ $C_1$\\\n> $A_2$ $B_2$ $C_2$\\\n> $\\vdots$\\\n> $A_M$ $B_M$ $C_M$\\\n> $Q$\\\n> $L_1$ $R_1$ $X_1$\\\n> $L_2$ $R_2$ $X_2$\\\n> $\\vdots$\\\n> $L_Q$ $R_Q$ $X_Q$", "outputFormat": "\n对于第 $i$ 个询问，如果可以达成，输出一行一个 $\\texttt{Yes}$；否则输出一行一个 $\\texttt{No}$。\n", "hint": "\n### 样例解释\n\n#### 样例 $1$ 解释\n\n第 $1$ 个询问中，$[3,7]$ 已经可以满足条件，无需进行操作。\n\n第 $2$ 个询问中，$[5,6]$ 不满足条件，然后无法进行任何操作，所以无法达成目标。\n\n\n该样例满足所有子任务的限制。\n\n\n#### 样例 $2$ 解释\n\n第 $1$ 个询问中，选择 $l'=1,r'=5$，花费 $5$ 的代价可以达成目标。\n\n该样例满足子任务 $2,3,5\\sim 7$ 的限制。\n\n\n#### 样例 $3$ 解释\n该样例满足子任务 $6,7$ 的限制。\n\n\n\n#### 样例 $4$ 解释\n\n该样例满足子任务 $5\\sim 7$ 的限制。\n\n\n\n### 数据范围\n\n- $2\\le N\\le 3\\times 10^5$。\n- $1\\le M\\le 3\\times 10^5$。\n- $1\\le P\\le 10^9$。\n- $1\\le A_i\\lt B_i\\le N$（$1\\le i\\le M$）。\n- $1\\le C_i\\le P$（$1\\le i\\le M$）。\n- $1\\le Q\\le 4\\times 10^5$。\n- $1\\le L_i\\le R_i\\le P$（$1\\le i\\le Q$）。\n- $0\\le X_i\\le 10^9$（$1\\le i\\le Q$）。\n- 输入的都是整数。\n\n### 子任务\n\n1. （7pts）$N,M,Q\\le 50$，$X_i=0$（$1\\le i\\le Q$）。\n2. （8pts）$P\\le 10$。\n3. （11pts）$P\\le 100$。\n4. （23pts）$P\\le 3\\times 10^5$，$X_i=0$（$1\\le i\\le Q$）。\n5. （9pts）$P\\le 3\\times 10^5$。\n6. （22pts）$N,M\\le 8,000$。\n7. （20pts）无额外限制。", "locale": "zh-CN"}}}
{"pid": "P11665", "type": "P", "difficulty": 6, "samples": [["5\n5 3 4 2 1", "2"], ["6\n2 1 1 2 2 1", "1"], ["10\n2 4 6 7 4 5 5 3 4 1", "3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "JOI（日本）", "Dilworth 定理", "状压 DP"], "title": "[JOI 2025 Final] 只不过是长的领带 2 / Just Long Neckties 2", "background": "译自 [第24回日本情報オリンピック 本選](https://contests.ioi-jp.org/joi-ho-2025/index.html) T4。\n", "description": "\n有一个长度为 $k$（$k\\ge 1$）的正整数数列 $B_1,\\cdots,B_k$，初始 $B_i=1$（$1\\le i\\le k$）。这里，$k$ 是一个还未确定的数。\n\n有 $N$ 场演出，第 $i$（$1\\le i\\le N$）场演出中，观众将会报出数字 $A_i$。然后你需要做以下的事情：\n\n- 选择是否回应这个观众。\n    - 如果选择回应，你需要选择 $j$（$1\\le j\\le k$）满足 $B_j\\le A_i$，然后令 $B_j\\gets A_i$。（注意这里是小于等于号。）\n        - 如果无法选择这样的 $j$，则演出失败。\n    - 否则，不需要做任何事。\n\n然而，如果连续两次（或者更多次）选择不回应观众，观众会生气，从而演出失败。\n\n在演出不失败的前提下，确定 $k$ 的最小值。", "inputFormat": "\n如下所示：\n\n\n> $N$ \\\n> $A_1$ $A_2$ $\\cdots$ $A_N$", "outputFormat": "输出一行一个正整数，表示满足条件的 $k$ 的最小值。\n", "hint": "\n### 样例解释\n\n#### 样例 $1$ 解释\n\n$k=2$ 时，在五次演出中分别选择：\n\n- 不回应；\n- 回应，$j=1$（此后 $B_1\\gets 3$）；\n- 回应，$j=1$（此后 $B_1\\gets 4$）；\n- 回应，$j=2$（此后 $B_2\\gets 2$）；\n- 不回应；\n\n可以证明 $k=1$ 时演出必定失败。所以输出 $2$。\n\n该样例满足子任务 $1,3\\sim 7$ 的限制。\n\n\n#### 样例 $2$ 解释\n\n$k=1$ 时，在第 $1,6$ 个演出时选择不回应即可。\n\n该样例满足所有子任务的限制。\n\n\n#### 样例 $3$ 解释\n\n该样例满足子任务 $1,4\\sim 7$ 的限制。\n\n\n\n\n### 数据范围\n\n- $2\\le N\\le 5\\times 10^6$。\n- $1\\le A_i\\le 21$（$1\\le i\\le N$）。\n- 输入的值全部是整数。\n\n### 子任务\n\n1. （10pts）$N\\le 15$。\n2. （6pts）$N\\le 500$，$A_i\\le 2$（$1\\le i\\le N$）。\n3. （12pts）$N\\le 500$，$A_i\\le 5$（$1\\le i\\le N$）。\n4. （18pts）$N\\le 500$，$A_i\\le 15$（$1\\le i\\le N$）。\n5. （26pts）$N\\le 5\\times 10^5$，$A_i\\le 15$（$1\\le i\\le N$）。\n6. （10pts）$N\\le 5\\times 10^5$。\n7. （18pts）无额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2025 Final] 只不过是长的领带 2 / Just Long Neckties 2", "background": "译自 [第24回日本情報オリンピック 本選](https://contests.ioi-jp.org/joi-ho-2025/index.html) T4。\n", "description": "\n有一个长度为 $k$（$k\\ge 1$）的正整数数列 $B_1,\\cdots,B_k$，初始 $B_i=1$（$1\\le i\\le k$）。这里，$k$ 是一个还未确定的数。\n\n有 $N$ 场演出，第 $i$（$1\\le i\\le N$）场演出中，观众将会报出数字 $A_i$。然后你需要做以下的事情：\n\n- 选择是否回应这个观众。\n    - 如果选择回应，你需要选择 $j$（$1\\le j\\le k$）满足 $B_j\\le A_i$，然后令 $B_j\\gets A_i$。（注意这里是小于等于号。）\n        - 如果无法选择这样的 $j$，则演出失败。\n    - 否则，不需要做任何事。\n\n然而，如果连续两次（或者更多次）选择不回应观众，观众会生气，从而演出失败。\n\n在演出不失败的前提下，确定 $k$ 的最小值。", "inputFormat": "\n如下所示：\n\n\n> $N$ \\\n> $A_1$ $A_2$ $\\cdots$ $A_N$", "outputFormat": "输出一行一个正整数，表示满足条件的 $k$ 的最小值。\n", "hint": "\n### 样例解释\n\n#### 样例 $1$ 解释\n\n$k=2$ 时，在五次演出中分别选择：\n\n- 不回应；\n- 回应，$j=1$（此后 $B_1\\gets 3$）；\n- 回应，$j=1$（此后 $B_1\\gets 4$）；\n- 回应，$j=2$（此后 $B_2\\gets 2$）；\n- 不回应；\n\n可以证明 $k=1$ 时演出必定失败。所以输出 $2$。\n\n该样例满足子任务 $1,3\\sim 7$ 的限制。\n\n\n#### 样例 $2$ 解释\n\n$k=1$ 时，在第 $1,6$ 个演出时选择不回应即可。\n\n该样例满足所有子任务的限制。\n\n\n#### 样例 $3$ 解释\n\n该样例满足子任务 $1,4\\sim 7$ 的限制。\n\n\n\n\n### 数据范围\n\n- $2\\le N\\le 5\\times 10^6$。\n- $1\\le A_i\\le 21$（$1\\le i\\le N$）。\n- 输入的值全部是整数。\n\n### 子任务\n\n1. （10pts）$N\\le 15$。\n2. （6pts）$N\\le 500$，$A_i\\le 2$（$1\\le i\\le N$）。\n3. （12pts）$N\\le 500$，$A_i\\le 5$（$1\\le i\\le N$）。\n4. （18pts）$N\\le 500$，$A_i\\le 15$（$1\\le i\\le N$）。\n5. （26pts）$N\\le 5\\times 10^5$，$A_i\\le 15$（$1\\le i\\le N$）。\n6. （10pts）$N\\le 5\\times 10^5$。\n7. （18pts）无额外限制。", "locale": "zh-CN"}}}
{"pid": "P11666", "type": "P", "difficulty": 7, "samples": [["5\n1 1 2 3 4\n3\n3 2\n3 1\n3 1", "3"], ["3\n2 1 3\n1\n1 3", "-1"], ["7\n1 1 2 3 4 5 6\n6\n4 2\n5 1\n5 3\n6 2\n7 3\n7 6", "5"], ["4\n4 1 2 3\n4\n4 1\n4 1\n2 3\n2 3", "4"], ["7\n1 1 1 3 3 4 4\n5\n6 1\n6 3\n7 1\n5 1\n5 1", "5"], ["11\n3 1 2 5 6 7 8 4 4 5 10\n6\n2 1\n9 8\n11 8\n10 4\n5 6\n5 7", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2025", "基环树", "JOI（日本）"], "title": "[JOI 2025 Final] 邮局 / Post Office", "background": "译自 [第24回日本情報オリンピック 本選](https://contests.ioi-jp.org/joi-ho-2025/index.html) T5。\n", "description": "\n有一张 $N$ 个节点 $N$ 条边的有向图，节点标号 $1\\sim N$。\n\n第 $i$ 条边从节点 $i$ 指向节点 $P_i$（注意，可能出现 $i=P_i$ 的情况），需要花 $1$ 单位时间经过它。\n\n有 $M$ 个包裹，第 $j$（$1\\le j\\le M$）个包裹要从节点 $A_j$ 运到节点 $B_j$。这些包裹全部从 $0$ 时刻开始运送。\n\n每条边一次只能运送一个包裹。节点可以存储无限多个包裹。\n\n判断：是否能够将所有包裹都运到目的地。如果可以，还要求出到达时间最晚的包裹的最早到达时刻。", "inputFormat": "\n如下所示：\n\n\n> $N$ \\\n> $P_1$ $P_2$ $\\cdots$ $P_N$\\\n> $M$\\\n> $A_1$ $B_1$\\\n> $A_2$ $B_2$\\\n> $\\vdots$\\\n> $A_M$ $B_M$", "outputFormat": "\n如果无法运到，输出一行一个 $\\texttt{-1}$。\n\n否则输出一行一个整数，表示到达时间最晚的包裹的最早到达时刻。", "hint": "\n### 样例解释\n\n#### 样例 $1$ 解释\n\n该样例满足子任务 $2,3,4,6,7$ 的限制。\n\n\n#### 样例 $2$ 解释\n该样例满足子任务 $1,2,7$ 的限制。\n\n\n\n#### 样例 $3$ 解释\n该样例满足子任务 $2,4,6,7$ 的限制。\n\n#### 样例 $4$ 解释\n该样例满足子任务 $2,5,7$ 的限制。\n\n\n#### 样例 $5$ 解释\n该样例满足子任务 $2,6,7$ 的限制。\n\n\n\n#### 样例 $6$ 解释\n该样例满足子任务 $2,7$ 的限制。\n\n\n\n### 数据范围\n\n- $2\\le N\\le 2\\times 10^5$。\n- $1\\le M\\le 2\\times 10^5$。\n- $1\\le P_i\\le N$（$1\\le i\\le N$）。\n- $1\\le A_i,B_i\\le N$（$1\\le i\\le M$）。\n- $A_i\\neq B_i$（$1\\le i\\le M$）。\n- 输入的值全部是整数。\n\n### 子任务\n\n1. （3pts）$N\\le 3,000$，$M=1$。\n1. （9pts）$N\\le 3,000$，$M\\le 3,000$。\n1. （13pts）$P=(1,1,2,\\cdots,N-1)$，$\\max(B_1,B_2,\\cdots,B_M)\\lt \\min(A_1,A_2,\\cdots,A_M)$。\n1. （25pts）$P=(1,1,2,\\cdots,N-1)$。\n1. （11pts）$P=(N,1,2,\\cdots,N-1)$。\n1. （25pts）$P_1=1$，$P_i\\lt i$（$2\\le i\\le N$）。\n7. （14pts）无额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2025 Final] 邮局 / Post Office", "background": "译自 [第24回日本情報オリンピック 本選](https://contests.ioi-jp.org/joi-ho-2025/index.html) T5。\n", "description": "\n有一张 $N$ 个节点 $N$ 条边的有向图，节点标号 $1\\sim N$。\n\n第 $i$ 条边从节点 $i$ 指向节点 $P_i$（注意，可能出现 $i=P_i$ 的情况），需要花 $1$ 单位时间经过它。\n\n有 $M$ 个包裹，第 $j$（$1\\le j\\le M$）个包裹要从节点 $A_j$ 运到节点 $B_j$。这些包裹全部从 $0$ 时刻开始运送。\n\n每条边一次只能运送一个包裹。节点可以存储无限多个包裹。\n\n判断：是否能够将所有包裹都运到目的地。如果可以，还要求出到达时间最晚的包裹的最早到达时刻。", "inputFormat": "\n如下所示：\n\n\n> $N$ \\\n> $P_1$ $P_2$ $\\cdots$ $P_N$\\\n> $M$\\\n> $A_1$ $B_1$\\\n> $A_2$ $B_2$\\\n> $\\vdots$\\\n> $A_M$ $B_M$", "outputFormat": "\n如果无法运到，输出一行一个 $\\texttt{-1}$。\n\n否则输出一行一个整数，表示到达时间最晚的包裹的最早到达时刻。", "hint": "\n### 样例解释\n\n#### 样例 $1$ 解释\n\n该样例满足子任务 $2,3,4,6,7$ 的限制。\n\n\n#### 样例 $2$ 解释\n该样例满足子任务 $1,2,7$ 的限制。\n\n\n\n#### 样例 $3$ 解释\n该样例满足子任务 $2,4,6,7$ 的限制。\n\n#### 样例 $4$ 解释\n该样例满足子任务 $2,5,7$ 的限制。\n\n\n#### 样例 $5$ 解释\n该样例满足子任务 $2,6,7$ 的限制。\n\n\n\n#### 样例 $6$ 解释\n该样例满足子任务 $2,7$ 的限制。\n\n\n\n### 数据范围\n\n- $2\\le N\\le 2\\times 10^5$。\n- $1\\le M\\le 2\\times 10^5$。\n- $1\\le P_i\\le N$（$1\\le i\\le N$）。\n- $1\\le A_i,B_i\\le N$（$1\\le i\\le M$）。\n- $A_i\\neq B_i$（$1\\le i\\le M$）。\n- 输入的值全部是整数。\n\n### 子任务\n\n1. （3pts）$N\\le 3,000$，$M=1$。\n1. （9pts）$N\\le 3,000$，$M\\le 3,000$。\n1. （13pts）$P=(1,1,2,\\cdots,N-1)$，$\\max(B_1,B_2,\\cdots,B_M)\\lt \\min(A_1,A_2,\\cdots,A_M)$。\n1. （25pts）$P=(1,1,2,\\cdots,N-1)$。\n1. （11pts）$P=(N,1,2,\\cdots,N-1)$。\n1. （25pts）$P_1=1$，$P_i\\lt i$（$2\\le i\\le N$）。\n7. （14pts）无额外限制。", "locale": "zh-CN"}}}
{"pid": "P11667", "type": "P", "difficulty": 4, "samples": [["1\n3 0 0\nWWB\nBBB\nGGG", "7"], ["3\n5 1 2\nGWGWW\nWGWWW\nWBWGW\nWWWWW\nWWGWW\n3 1 1\nWWW\nWBW\nWWW\n3 1 0\nGGB\nGGW\nWWW", "4\n-1\n4"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2025"], "title": "[USACO25JAN] Astral Superposition B", "background": "", "description": "**注意：本题的时间限制为 4 秒，通常限制的 2 倍。**\n\nBessie 正在使用她超酷的望远镜拍摄夜空中所有星星的照片。她的望远镜能够拍摄到一张 $N \\times N$（$1 \\leq N \\leq 1000$）的星星照片，其中每个像素是一颗星星或者空旷的天空。每颗星星可由恰好一个像素表示，并且没有两颗不同的星星位于同一像素内。\n\n一夜之间，一些奇怪的事情发生在了天空中的星星之上。每颗星星要么消失，要么向右移动 $A$ 像素，并且向下移动 $B$ 像素（$0 \\leq A,B \\leq N$）。如果一颗星星消失或移动超出照片边界，它将不再出现在第二张照片中。\n\nBessie 在星星移动位置之前和之后拍了照片，但在 Mootoshop 中进行了一些实验后，她不小心将一张照片叠加到了另一张上。现在，她可以在两张照片都是天空的位置看到白色（white）像素，在星星仅存在于恰好一张照片的位置看到灰色（gray）像素，而在两张照片中都有星星的位置看到黑色（black）像素。Bessie 同时记得没有新的星星移动入第二张照片的范围，从而她的第一张照片包含了夜空中所有的星星。\n\n对于 $T$（$1 \\leq T \\leq 1000$）个独立的测试用例，给定最终的照片，求在移动事件发生之前天空中星星的最小可能数量。如果不存在星星的排列可以产生给定的最终照片，输出 $-1$。", "inputFormat": "输入的第一行包含 $T$，以下为 $T$ 个测试用例。\n\n每个测试用例的第一行包含 $N$，$A$，$B$。\n\n以下 $N$ 行，每行表示叠加后的照片的一行。从上到下第 $i$ 行由一个字符串 $c_{i,1}c_{i,2}\\dots c_{i,N}$ 表示，其中 $c_{i,j} \\in \\{\\texttt{W,G,B}\\}$，分别表示颜色为白色，灰色以及黑色。\n\n输入保证所有测试用例的 $N^2$ 之和不超过 $10^7$。", "outputFormat": "对于每一个测试用例，输出移动之前存在的星星的最小数量，或 $-1$ 表示不可能。", "hint": "### 样例解释\n\n在样例 #1 中，没有移动发生。第一张照片如下（. 表示天空，* 表示星星）：\n```\n..*\n***\n***\n```\n第二张照片中最下方一行的星星都消失了，如下：\n\n```\n..*\n***\n...\n```\n这是产生叠加后照片的唯一方式，所以初始时星星的最小可能数量为 $7$。\n\n对于样例 #2，在第一个测试用例中，初始时至少有 $4$ 颗星星。如果我们令 $(r,c)$ 表示从上到下第 $r$ 行和从左到右第 $c$ 列的交点，一种可能性是它们最初位于 $(1,1)$，$(3,2)$，$(2,2)$ 和 $(1,3)$。除了位于 $(2,2)$ 的星星消失之外，其他所有星星都移动了。\n\n在第二个测试用例中，在给定的移动方式下，没有任何初始照片中的星星排列可以产生中间的黑色像素。\n\n在第三个测试用例中，初始时至少有 $4$ 颗星星。一种可能性是它们最初位于 $(1,1)$，$(1,2)$，$(1,3)$ 和 $(2,1)$。在第二张照片中，原先位于 $(1,1)$ 的星星消失了，原先位于 $(1,3)$ 的星星移出了照片边界。其他两颗星星向右移动了 $1$ 像素。\n\n### 子任务\n\n- 测试点 3：$A=B=0$。\n- 测试点 4-7：$A=1$，$B=0$，$N\\le 10$。\n- 测试点 8-9：$A=1$，$B=0$。\n- 测试点 10-12：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25JAN] Astral Superposition B", "background": null, "description": "****Note: The time limit for this problem is 4s, twice the default.****  \n\nBessie is using her nifty telescope to take photos of all the stars in the night sky. Her telescope can capture an $N \\times N$ ($1 \\leq N \\leq 1000$) photo of the stars where each pixel is either a star or empty sky. Each star will be represented by exactly one pixel, and no two distinct stars share the same pixel.  \n\nOvernight, something strange happens to the stars in the sky. Every star either disappears or moves $A$ pixels to the right, and $B$ pixels downwards ($0 \\leq A,B \\leq N$). If a star disappears or moves beyond the photo boundary, it no longer appears in the second photo.  \n\nBessie took photos before and after the shifting positions, but after experimenting in  Mootoshop, she accidentally superimposed one photo onto the other. Now, she can see white pixels where both photos were empty, gray pixels where stars existed in exactly one photo, and black pixels where there was a star in both photos. Bessie also remembers that no new stars moved into the frame of the second photo, so her first photo contains all of the stars in the night sky.  \n\nGiven the final photo, determine the minimum possible number of stars in the sky before the shifting incident for $T$ ($1 \\leq T \\leq 1000$) independent test cases. If no arrangement of stars can produce the given final photo, output $-1$.", "inputFormat": "The first line of input contains $T$ and $T$ test cases will follow.  \n\nThe first line of each test case will contain $N$ $A$ $B$.  \n\nThen follow $N$ lines each representing one row of the superimposed photo.  The $i$th row from the top is represented by a string $c_{i,1}c_{i,2}\\dots c_{i,N}$, where each $c_{i,j} \\in \\{W,G,B\\}$, representing the colors white, gray, and black respectively.  \n\nIt is guaranteed that the sum of $N^2$ over all test cases will not exceed $10^7$.", "outputFormat": "For each test case, output the minimum number of stars that existed before the shifting, or $-1$ if impossible.", "hint": "##### For Sample 1:\nIn this example, there is no shifting. The first photo is as follows: (. for sky, * for star)  \n\n\n```text\n..*\n***\n***\n```\n  \n\nThe second photo, where the stars on the bottom row disappeared, is as follows:  \n\n\n```text\n..*\n***\n...\n```\n  \n\nThis is the only way to produce the superimposed photo, so the minimum possible number of initial stars is $7$.  \n\n##### For Sample 2:\nIn the first case, there were at least $4$ stars at the start. If we let $(r,c)$ denote the intersection of the $r$th row from the top and $c$th column from the left, one possibility is that they were initially at $(1,1), (3,2), (2,2),$  and $(1,3)$. All the stars shifted, except for the one at $(2,2)$ which disappeared.  \n\nIn the second case, there is no arrangement of stars in the initial photo that can produce the middle black pixel given the shift.  \n\nIn the third case, there were at least $4$ stars at the start. One possibility is that they were initially at $(1,1), (1,2), (1,3),$ and $(2,1)$. In the second photo, the star originally at $(1,1)$ disappeared and the star originally at $(1,3)$ moved off frame. The other two stars shifted to the right by 1.  \n\n\n#### SCORING:\n- Input 3: $A=B=0$\n- Inputs 4-7: $A=1, B=0, N\\le 10$\n- Inputs 8-9: $A=1, B=0$\n- Inputs 10-12: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO25JAN] Astral Superposition B", "background": "", "description": "**注意：本题的时间限制为 4 秒，通常限制的 2 倍。**\n\nBessie 正在使用她超酷的望远镜拍摄夜空中所有星星的照片。她的望远镜能够拍摄到一张 $N \\times N$（$1 \\leq N \\leq 1000$）的星星照片，其中每个像素是一颗星星或者空旷的天空。每颗星星可由恰好一个像素表示，并且没有两颗不同的星星位于同一像素内。\n\n一夜之间，一些奇怪的事情发生在了天空中的星星之上。每颗星星要么消失，要么向右移动 $A$ 像素，并且向下移动 $B$ 像素（$0 \\leq A,B \\leq N$）。如果一颗星星消失或移动超出照片边界，它将不再出现在第二张照片中。\n\nBessie 在星星移动位置之前和之后拍了照片，但在 Mootoshop 中进行了一些实验后，她不小心将一张照片叠加到了另一张上。现在，她可以在两张照片都是天空的位置看到白色（white）像素，在星星仅存在于恰好一张照片的位置看到灰色（gray）像素，而在两张照片中都有星星的位置看到黑色（black）像素。Bessie 同时记得没有新的星星移动入第二张照片的范围，从而她的第一张照片包含了夜空中所有的星星。\n\n对于 $T$（$1 \\leq T \\leq 1000$）个独立的测试用例，给定最终的照片，求在移动事件发生之前天空中星星的最小可能数量。如果不存在星星的排列可以产生给定的最终照片，输出 $-1$。", "inputFormat": "输入的第一行包含 $T$，以下为 $T$ 个测试用例。\n\n每个测试用例的第一行包含 $N$，$A$，$B$。\n\n以下 $N$ 行，每行表示叠加后的照片的一行。从上到下第 $i$ 行由一个字符串 $c_{i,1}c_{i,2}\\dots c_{i,N}$ 表示，其中 $c_{i,j} \\in \\{\\texttt{W,G,B}\\}$，分别表示颜色为白色，灰色以及黑色。\n\n输入保证所有测试用例的 $N^2$ 之和不超过 $10^7$。", "outputFormat": "对于每一个测试用例，输出移动之前存在的星星的最小数量，或 $-1$ 表示不可能。", "hint": "### 样例解释\n\n在样例 #1 中，没有移动发生。第一张照片如下（. 表示天空，* 表示星星）：\n```\n..*\n***\n***\n```\n第二张照片中最下方一行的星星都消失了，如下：\n\n```\n..*\n***\n...\n```\n这是产生叠加后照片的唯一方式，所以初始时星星的最小可能数量为 $7$。\n\n对于样例 #2，在第一个测试用例中，初始时至少有 $4$ 颗星星。如果我们令 $(r,c)$ 表示从上到下第 $r$ 行和从左到右第 $c$ 列的交点，一种可能性是它们最初位于 $(1,1)$，$(3,2)$，$(2,2)$ 和 $(1,3)$。除了位于 $(2,2)$ 的星星消失之外，其他所有星星都移动了。\n\n在第二个测试用例中，在给定的移动方式下，没有任何初始照片中的星星排列可以产生中间的黑色像素。\n\n在第三个测试用例中，初始时至少有 $4$ 颗星星。一种可能性是它们最初位于 $(1,1)$，$(1,2)$，$(1,3)$ 和 $(2,1)$。在第二张照片中，原先位于 $(1,1)$ 的星星消失了，原先位于 $(1,3)$ 的星星移出了照片边界。其他两颗星星向右移动了 $1$ 像素。\n\n### 子任务\n\n- 测试点 3：$A=B=0$。\n- 测试点 4-7：$A=1$，$B=0$，$N\\le 10$。\n- 测试点 8-9：$A=1$，$B=0$。\n- 测试点 10-12：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11668", "type": "P", "difficulty": 3, "samples": [["6\n1 2 3 4 4 4", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "2025"], "title": "[USACO25JAN] It's Mooin' Time II B", "background": "", "description": "Farmer John 正在试图向 Elsie 描述他最喜欢的 USACO 竞赛，但她很难理解为什么他这么喜欢它。他说「竞赛中我最喜欢的部分是 Bessie 说 『现在是哞哞时间』并在整个竞赛中一直哞哞叫」。\n\nElsie 仍然不理解，所以 Farmer John 将竞赛以文本文件形式下载，并试图解释他的意思。竞赛被定义为一个包含 $N$（$1\\le N\\le 10^6$）个整数的数组 $a_1, a_2, \\dots, a_N$（$1\\le a_i\\le N$）。Farmer John 定义哞叫为一个包含三个整数的数组，其中第二个整数等于第三个整数，但不等于第一个整数。一种哞叫被称为在竞赛中发生，如果可以从数组中移除整数，直到只剩下这一哞叫。\n\n由于 Bessie 据称「在整个竞赛中一直哞哞叫」，请帮助 Elsie 计算竞赛中发生的不同哞叫的数量！两种哞叫是不同的，如果它们并非由相同的整数以相同的顺序组成。", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个空格分隔的整数 $a_1,a_2,\\dots,a_N$。", "outputFormat": "输出竞赛中发生的不同哞叫的数量。\n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，Java 中的 \"long\"，C/C++ 中的 \"long long\"）。**", "hint": "### 样例解释\n\n竞赛包含三种不同的哞叫：\"1 4 4\"，\"2 4 4\" 和 \"3 4 4\"。\n\n### 子任务\n\n- 测试点 2-4：$N\\le 10^2$。\n- 测试点 5-7：$N\\le 10^4$。\n- 测试点 8-11：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25JAN] It's Mooin' Time II B", "background": null, "description": "Farmer John is trying to describe his favorite USACO contest to Elsie, but she is having trouble understanding why he likes it so much. He says \"My favorite part of the contest was when Bessie said 'It's Mooin' Time' and mooed all over the contest.\"  \n\nElsie still doesn't understand, so Farmer John downloads the contest as a text file and tries to explain what he means. The contest is defined as an array of $N$ ($1\\le N\\le 10^6$) integers $a_1, a_2, \\dots, a_N$ ($1\\le a_i\\le N$). Farmer John defines a moo as an array of three integers  where the second integer equals the third but not the first. A moo is said to occur in the contest if it is possible to remove integers from the array until only the moo remains.  \n\nAs Bessie allegedly \"mooed all over the contest\", help Elsie count the number of distinct moos that occur in the contest! Two moos are distinct if they do not consist of the same integers in the same order.", "inputFormat": "The first line contains $N$.  \n\nThe second line contains $N$ space-separated integers $a_1,a_2,\\dots,a_N$.", "outputFormat": "Output the number of distinct moos that occur in the contest.  \n\n****Note that the large size of integers involved in this problem may require the use of 64-bit integer data types (e.g., a \"long\" in Java, a \"long long\" in C/C++).****", "hint": "This contest has three distinct moos: \"1 4 4\", \"2 4 4\", and \"3 4 4\".  \n\n\n#### SCORING:\n- Inputs 2-4: $N\\le 10^2$\n- Inputs 5-7: $N\\le 10^4$\n- Inputs 8-11: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO25JAN] It's Mooin' Time II B", "background": "", "description": "Farmer John 正在试图向 Elsie 描述他最喜欢的 USACO 竞赛，但她很难理解为什么他这么喜欢它。他说「竞赛中我最喜欢的部分是 Bessie 说 『现在是哞哞时间』并在整个竞赛中一直哞哞叫」。\n\nElsie 仍然不理解，所以 Farmer John 将竞赛以文本文件形式下载，并试图解释他的意思。竞赛被定义为一个包含 $N$（$1\\le N\\le 10^6$）个整数的数组 $a_1, a_2, \\dots, a_N$（$1\\le a_i\\le N$）。Farmer John 定义哞叫为一个包含三个整数的数组，其中第二个整数等于第三个整数，但不等于第一个整数。一种哞叫被称为在竞赛中发生，如果可以从数组中移除整数，直到只剩下这一哞叫。\n\n由于 Bessie 据称「在整个竞赛中一直哞哞叫」，请帮助 Elsie 计算竞赛中发生的不同哞叫的数量！两种哞叫是不同的，如果它们并非由相同的整数以相同的顺序组成。", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个空格分隔的整数 $a_1,a_2,\\dots,a_N$。", "outputFormat": "输出竞赛中发生的不同哞叫的数量。\n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，Java 中的 \"long\"，C/C++ 中的 \"long long\"）。**", "hint": "### 样例解释\n\n竞赛包含三种不同的哞叫：\"1 4 4\"，\"2 4 4\" 和 \"3 4 4\"。\n\n### 子任务\n\n- 测试点 2-4：$N\\le 10^2$。\n- 测试点 5-7：$N\\le 10^4$。\n- 测试点 8-11：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11669", "type": "P", "difficulty": 3, "samples": [["3\n1 3 2\n3 2 1", "3\n3\n0\n0"], ["3\n1 2 3\n1 2 3", "0\n3\n0\n3"], ["7\n1 3 2 2 1 3 2\n3 2 2 1 2 3 1", "0\n6\n14\n6\n2\n0\n0\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2025"], "title": "[USACO25JAN] Cow Checkups B", "background": null, "description": "**注意：我们建议使用 Python 以外的其他语言以获得本题目的全部分数。**\n\nFarmer John 的 $N$（$1 \\leq N \\leq 7500$）头奶牛站成一行，奶牛 $1$ 在队伍的最前面，奶牛 $N$ 在队伍的最后面。FJ 的奶牛也有许多不同的品种。他用从 $1$ 到 $N$ 的整数来表示每一品种。队伍从前到后第 $i$ 头奶牛的品种是 $a_i$（$1 \\leq a_i \\leq N$）。\n\nFJ 正在带他的奶牛们去当地的奶牛医院进行体检。然而，奶牛兽医非常挑剔，仅愿意当队伍中第 $i$ 头奶牛为品种 $b_i$（$1 \\leq b_i \\leq N$）时对其进行体检。\n\nFJ 很懒惰，不想完全重新排列他的奶牛。他将执行以下操作恰好一次。\n\n选择两个整数 $l$ 和 $r$，使得 $1 \\leq l \\le r \\leq N$。反转队伍中第 $l$ 头奶牛到第 $r$ 头奶牛之间的奶牛的顺序。\nFJ 想要衡量这种方法有多少效果。对于每一个 $c=0 \\ldots N$，请帮助 FJ 求出使得恰好 $c$ 头奶牛被检查的不同操作 $(l,r)$ 的数量。两种操作 $(l_1,r_1)$ 和 $(l_2,r_2)$ 不同，当且仅当 $l_1 \\neq l_2$ 或者 $r_1 \\neq r_2$。", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $a_1, a_2, \\ldots, a_N$。\n\n第三行包含 $b_1, b_2, \\ldots, b_N$。", "outputFormat": "输出 $N+1$ 行，第 $i$ 行包含使得 $i-1$ 头奶牛被检查的不同操作 $(l,r)$ 的数量。", "hint": "### 样例解释\n\n\n#### 样例 #1\n\n如果 FJ 选择 $(l=1,r=1)$，$(l=2,r=2)$ 或 $(l=3,r=3)$，则没有奶牛将会被检查。注意这些操作并没有改变奶牛的位置。\n以下操作会导致一头奶牛被检查。\n\n- $(l=1,r=2)$：FJ 反转第一头和第二头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[3,1,2]$。第一头奶牛将会被检查。\n- $(l=2,r=3)$：FJ 反转第二头和第三头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[1,2,3]$。第二头奶牛将会被检查。\n- $(l=1,r=3)$：FJ 反转第一头，第二头和第三头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[2,3,1]$。第三头奶牛将会被检查。\n\n#### 样例 #2\n\n三种导致 $3$ 头奶牛被检查的可能操作为 $(l=1,r=1)$，$(l=2,r=2)$ 和 $(l=3,r=3)$。\n\n#### 样例 #3\n\n两种导致 $4$ 头奶牛被检查的可能操作为 $(l=4,r=5)$ 和 $(l=5,r=7)$。\n\n### 子任务\n- 测试点 4-6: $N\\le 100$\n- 测试点 7-13: 无特殊限制", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25JAN] Cow Checkups B", "background": null, "description": "Farmer John's $N$ ($1 \\leq N \\leq 7500$) cows are standing in a line, with cow $1$ at the front of the line and cow $N$ at the back of the line. FJ's cows also come in many different species. He denotes each species with an integer from $1$ to $N$. The $i$'th cow from the front of the line is of species $a_i$ ($1 \\leq a_i \\leq N$).   \n\nFJ is taking his cows to a checkup at a local bovine hospital. However, the bovine veterinarian is very picky and wants to perform a checkup on the $i$'th cow in the line, only if it is of species $b_i$ ($1 \\leq b_i \\leq N$).   \n\nFJ is lazy and does not want to completely reorder his cows.  He will perform the following operation **exactly once**.  \n\n\n-  Select two integers $l$ and $r$ such that $1 \\leq l \\le r \\leq N$. Reverse the order of the cows that are between the $l$-th cow and the $r$-th cow in the line, inclusive.   \n\nFJ wants to measure how effective this approach is. For each $c=0 \\ldots N$, help FJ find the number of distinct operations ($l,r$) that result in exactly $c$ cows being checked. Two operations ($l_1,r_1$) and ($l_2,r_2$) are different if $l_1 \\neq l_2$ or $r_1 \\neq r_2$.", "inputFormat": "The first line contains an integer $N$.  \n\nThe second line contains $a_1, a_2, \\ldots, a_N$.  \n\nThe third line contains $b_1, b_2, \\ldots, b_N$.", "outputFormat": "Output $N+1$ lines with the $i$-th line containing the number of distinct operations ($l,r$) that result in $i-1$ cows being checked.", "hint": "##### For Sample 1:\nIf FJ chooses ($l=1,r=1$), ($l=2,r=2$), or ($l=3,r=3$) then no cows will be checked. Note that those operations do not modify any of the cows' locations.  \n\nThe following operations result in one cow being checked. \n- $l=1,r=2$: FJ reverses the order of the first and second cows so the species of each cow in the new lineup will be $[3,1,2]$. The first cow will be checked. \n- $l=2,r=3$: FJ reverses the order of the second and third cows so the species of each cow in the new lineup will be $[1,2,3]$. The second cow will be checked. \n- $l=1,r=3$: FJ reverses the order of the first, second, and third cows so the species of each cow in the new lineup will be $[2,3,1]$. The third cow will be checked.\n##### For Sample 2:\nThe three possible operations that cause $3$ cows to be checked are ($l=1,r=1$), ($l=2,r=2$), and ($l=3,r=3$). \n##### For Sample 3:\nThe two possible operations that cause $4$ cows to be checked are ($l=4,r=5$) and ($l=5,r=7$). \n#### SCORING:\n- Inputs 4-6: $N\\le 100$\n- Inputs 7-13: No additional constraints", "locale": "en"}, "zh-CN": {"title": "[USACO25JAN] Cow Checkups B", "background": null, "description": "**注意：我们建议使用 Python 以外的其他语言以获得本题目的全部分数。**\n\nFarmer John 的 $N$（$1 \\leq N \\leq 7500$）头奶牛站成一行，奶牛 $1$ 在队伍的最前面，奶牛 $N$ 在队伍的最后面。FJ 的奶牛也有许多不同的品种。他用从 $1$ 到 $N$ 的整数来表示每一品种。队伍从前到后第 $i$ 头奶牛的品种是 $a_i$（$1 \\leq a_i \\leq N$）。\n\nFJ 正在带他的奶牛们去当地的奶牛医院进行体检。然而，奶牛兽医非常挑剔，仅愿意当队伍中第 $i$ 头奶牛为品种 $b_i$（$1 \\leq b_i \\leq N$）时对其进行体检。\n\nFJ 很懒惰，不想完全重新排列他的奶牛。他将执行以下操作恰好一次。\n\n选择两个整数 $l$ 和 $r$，使得 $1 \\leq l \\le r \\leq N$。反转队伍中第 $l$ 头奶牛到第 $r$ 头奶牛之间的奶牛的顺序。\nFJ 想要衡量这种方法有多少效果。对于每一个 $c=0 \\ldots N$，请帮助 FJ 求出使得恰好 $c$ 头奶牛被检查的不同操作 $(l,r)$ 的数量。两种操作 $(l_1,r_1)$ 和 $(l_2,r_2)$ 不同，当且仅当 $l_1 \\neq l_2$ 或者 $r_1 \\neq r_2$。", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $a_1, a_2, \\ldots, a_N$。\n\n第三行包含 $b_1, b_2, \\ldots, b_N$。", "outputFormat": "输出 $N+1$ 行，第 $i$ 行包含使得 $i-1$ 头奶牛被检查的不同操作 $(l,r)$ 的数量。", "hint": "### 样例解释\n\n\n#### 样例 #1\n\n如果 FJ 选择 $(l=1,r=1)$，$(l=2,r=2)$ 或 $(l=3,r=3)$，则没有奶牛将会被检查。注意这些操作并没有改变奶牛的位置。\n以下操作会导致一头奶牛被检查。\n\n- $(l=1,r=2)$：FJ 反转第一头和第二头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[3,1,2]$。第一头奶牛将会被检查。\n- $(l=2,r=3)$：FJ 反转第二头和第三头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[1,2,3]$。第二头奶牛将会被检查。\n- $(l=1,r=3)$：FJ 反转第一头，第二头和第三头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[2,3,1]$。第三头奶牛将会被检查。\n\n#### 样例 #2\n\n三种导致 $3$ 头奶牛被检查的可能操作为 $(l=1,r=1)$，$(l=2,r=2)$ 和 $(l=3,r=3)$。\n\n#### 样例 #3\n\n两种导致 $4$ 头奶牛被检查的可能操作为 $(l=4,r=5)$ 和 $(l=5,r=7)$。\n\n### 子任务\n- 测试点 4-6: $N\\le 100$\n- 测试点 7-13: 无特殊限制", "locale": "zh-CN"}}}
{"pid": "P11670", "type": "P", "difficulty": 4, "samples": [["3\n1 3 2\n3 2 1", "3"], ["3\n1 2 3\n1 2 3", "12"], ["7\n1 3 2 2 1 3 2\n3 2 2 1 2 3 1", "60"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2025"], "title": "[USACO25JAN] Cow Checkups S", "background": "", "description": "Farmer John 的 $N$（$1 \\leq N \\leq 5 \\cdot 10^5$）头奶牛站成一行，奶牛 $1$ 在队伍的最前面，奶牛 $N$ 在队伍的最后面。FJ 的奶牛也有许多不同的品种。他用从 $1$ 到 $N$ 的整数来表示每一品种。队伍从前到后第 $i$ 头奶牛的品种是 $a_i$（$1 \\leq a_i \\leq N$）。\n\nFJ 正在带他的奶牛们去当地的奶牛医院进行体检。然而，奶牛兽医非常挑剔，仅愿意当队伍中第 $i$ 头奶牛为品种 $b_i$（$1 \\leq b_i \\leq N$）时对其进行体检。\n\nFJ 很懒惰，不想完全重新排列他的奶牛。他将执行以下操作恰好一次。\n\n- 选择两个整数 $l$ 和 $r$，使得 $1 \\leq l \\le r \\leq N$。反转队伍中第 $l$ 头奶牛到第 $r$ 头奶牛之间的奶牛的顺序。\n\nFJ 想要衡量这种方法有多少效果。求出对于所有 $N(N+1)/2$ 种可能的操作被兽医检查的奶牛数量之和。", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $a_1, a_2, \\ldots, a_N$。\n\n第三行包含 $b_1, b_2, \\ldots, b_N$。", "outputFormat": "输出一行，包含对于所有可能的操作被兽医检查的奶牛数量之和。", "hint": "### 样例解释\n\n#### 样例 #1\n如果 FJ 选择 $(l=1,r=1)$，$(l=2,r=2)$ 或 $(l=3,r=3)$，则没有奶牛将会被检查。注意这些操作并没有改变奶牛的位置。\n\n以下操作会导致一头奶牛被检查。\n\n- $(l=1,r=2)$：FJ 反转第一头和第二头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[3,1,2]$。第一头奶牛将会被检查。\n- $(l=2,r=3)$：FJ 反转第二头和第三头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[1,2,3]$。第二头奶牛将会被检查。\n- $(l=1,r=3)$：FJ 反转第一头，第二头和第三头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[2,3,1]$。第三头奶牛将会被检查。\n\n所有六种操作中被检查的奶牛数量之和为 $0+0+0+1+1+1=3$。\n\n#### 样例 #2\n\n有三种导致 $3$ 头奶牛被检查的可能操作：$(l=1,r=1)$，$(l=2,r=2)$ 和 $(l=3,r=3)$。其余每种操作均导致 $1$ 头奶牛被检查。所有六种操作中被检查的奶牛数量之和为 $3+3+3+1+1+1=12$。\n\n### 子任务\n- 测试点 4：$N\\le 100$。\n- 测试点 5：$N\\le 5000$。\n- 测试点 6-9：$a_i$，$b_i$ 均在范围 $[1,N]$ 内均匀随机生成。\n- 测试点 10-15：$a_i$，$b_i$ 均在范围 $[1,2]$ 内均匀随机生成。\n- 测试点 16-23：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25JAN] Cow Checkups S", "background": null, "description": "Farmer John's $N$ ($1 \\leq N \\leq 5 \\cdot 10^5$) cows are standing in a line, with cow $1$ at the front of the line and cow $N$ at the back of the line. FJ's cows also come in many different species. He denotes each species with an integer from $1$ to $N$. The $i$'th cow from the front of the line is of species $a_i$ ($1 \\leq a_i \\leq N$).   \n\nFJ is taking his cows to a checkup at a local bovine hospital. However, the bovine veterinarian is very picky and wants to perform a checkup on the $i$'th cow in the line, only if it is species $b_i$ ($1 \\leq b_i \\leq N$).   \n\nFJ is lazy and does not want to completely reorder his cows.  He will perform the following operation **exactly once**.  \n\n\n-  Select two integers $l$ and $r$ such that $1 \\leq l \\le r \\leq N$. Reverse the order of the cows that are between the $l$-th cow and the $r$-th cow in the line, inclusive.   \n\nFJ wants to measure how effective this approach is. Find the sum of the number of cows  that are checked by the veterinarian over all $N(N+1)/2$ possible operations.", "inputFormat": "The first line contains an integer $N$.  \n\nThe second line contains $a_1, a_2, \\ldots, a_N$.  \n\nThe third line contains $b_1, b_2, \\ldots, b_N$.", "outputFormat": "Output one line with the sum of the number of cows that are checked by the veterinarian  over all possible operations.", "hint": "##### For Sample 1:\nIf FJ chooses ($l=1,r=1$), ($l=2,r=2$), or ($l=3,r=3$) then no cows will be checked. Note that those operations do not modify the location of the cows.  \n\nThe following operations result in one cow being checked. \n- $l=1,r=2$: FJ reverses the order of the first and second cows so the species of each cow in the new lineup will be $[3,1,2]$. The first cow will be checked. \n- $l=2,r=3$: FJ reverses the order of the second and third cows so the species of each cow in the new lineup will be $[1,2,3]$. The second cow will be checked. \n- $l=1,r=3$: FJ reverses the order of the first, second, and third cows so the species of each cow in the new lineup will be $[2,3,1]$. The third cow will be checked.   \n\nThe total number of cows checked over all six operations is $0+0+0+1+1+1=3$.  \n##### For Sample 2:\nThere are three possible operations that cause $3$ cows to be checked: ($l=1,r=1$), ($l=2,r=2$), and ($l=3,r=3$). The remaining operations each result in $1$ cow being checked. The total number of cows checked over all six operations is $3+3+3+1+1+1=12$.  \n\n#### SCORING:\n- Input 4: $N\\le 100$\n- Input 5: $N\\le 5000$\n- Inputs 6-9: $a_i, b_i$ are all generated uniformly at random in the range $[1,N]$\n- Inputs 10-15: $a_i, b_i$ are all generated uniformly at random in the range $[1,2]$\n- Inputs 16-23: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO25JAN] Cow Checkups S", "background": "", "description": "Farmer John 的 $N$（$1 \\leq N \\leq 5 \\cdot 10^5$）头奶牛站成一行，奶牛 $1$ 在队伍的最前面，奶牛 $N$ 在队伍的最后面。FJ 的奶牛也有许多不同的品种。他用从 $1$ 到 $N$ 的整数来表示每一品种。队伍从前到后第 $i$ 头奶牛的品种是 $a_i$（$1 \\leq a_i \\leq N$）。\n\nFJ 正在带他的奶牛们去当地的奶牛医院进行体检。然而，奶牛兽医非常挑剔，仅愿意当队伍中第 $i$ 头奶牛为品种 $b_i$（$1 \\leq b_i \\leq N$）时对其进行体检。\n\nFJ 很懒惰，不想完全重新排列他的奶牛。他将执行以下操作恰好一次。\n\n- 选择两个整数 $l$ 和 $r$，使得 $1 \\leq l \\le r \\leq N$。反转队伍中第 $l$ 头奶牛到第 $r$ 头奶牛之间的奶牛的顺序。\n\nFJ 想要衡量这种方法有多少效果。求出对于所有 $N(N+1)/2$ 种可能的操作被兽医检查的奶牛数量之和。", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $a_1, a_2, \\ldots, a_N$。\n\n第三行包含 $b_1, b_2, \\ldots, b_N$。", "outputFormat": "输出一行，包含对于所有可能的操作被兽医检查的奶牛数量之和。", "hint": "### 样例解释\n\n#### 样例 #1\n如果 FJ 选择 $(l=1,r=1)$，$(l=2,r=2)$ 或 $(l=3,r=3)$，则没有奶牛将会被检查。注意这些操作并没有改变奶牛的位置。\n\n以下操作会导致一头奶牛被检查。\n\n- $(l=1,r=2)$：FJ 反转第一头和第二头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[3,1,2]$。第一头奶牛将会被检查。\n- $(l=2,r=3)$：FJ 反转第二头和第三头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[1,2,3]$。第二头奶牛将会被检查。\n- $(l=1,r=3)$：FJ 反转第一头，第二头和第三头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[2,3,1]$。第三头奶牛将会被检查。\n\n所有六种操作中被检查的奶牛数量之和为 $0+0+0+1+1+1=3$。\n\n#### 样例 #2\n\n有三种导致 $3$ 头奶牛被检查的可能操作：$(l=1,r=1)$，$(l=2,r=2)$ 和 $(l=3,r=3)$。其余每种操作均导致 $1$ 头奶牛被检查。所有六种操作中被检查的奶牛数量之和为 $3+3+3+1+1+1=12$。\n\n### 子任务\n- 测试点 4：$N\\le 100$。\n- 测试点 5：$N\\le 5000$。\n- 测试点 6-9：$a_i$，$b_i$ 均在范围 $[1,N]$ 内均匀随机生成。\n- 测试点 10-15：$a_i$，$b_i$ 均在范围 $[1,2]$ 内均匀随机生成。\n- 测试点 16-23：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11671", "type": "P", "difficulty": 4, "samples": [["2\n5 9\n15 12 18 3 8\n3 69\n1 988244353 998244853", "10\n21"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2025"], "title": "[USACO25JAN] Farmer John's Favorite Operation S", "background": "", "description": "又是 Farmer John 的农场上寒冷而无聊的一天。为了打发时间，Farmer John 发明了一种关于在整数数组上进行操作的有趣的休闲活动。\n\nFarmer John 有一个包含 $N$（$1 \\leq N \\leq 2 \\cdot 10^5$）个非负整数的数组 $a$ 和一个整数 $M$（$1 \\leq M \\leq 10^9$）。然后，FJ 会请 Bessie 给出一个整数 $x$。在一次操作中，FJ 可以选择一个索引 $i$，并对 $a_i$ 加 $1$ 或减 $1$。FJ 的无聊值是他必须执行的最小操作次数，以使得对于所有的 $1 \\leq i \\leq N$，$a_i-x$ 均可被 $M$ 整除。\n\n对于所有可能的 $x$，输出 FJ 的最小无聊值。", "inputFormat": "输入的第一行包含 $T$（$1 \\leq T \\leq 10$），为需要求解的独立的测试用例数量。\n\n每一个测试用例的第一行包含 $N$ 和 $M$。\n\n第二行包含 $a_1, a_2, ..., a_N$ （$0 \\leq a_i \\leq 10^9$）。\n\n输入保证所有测试用例的 $N$ 之和不超过 $5 \\cdot 10^5$。", "outputFormat": "对于每一个测试用例输出一行，包含对于所有可能的 $x$，FJ 的最小无聊值。", "hint": "### 样例解释\n\n在第一个测试用例中，$x$ 的一个最优选择是 $3$。FJ 可以执行 $10$ 次操作使得 $a = [12, 12, 21, 3, 12]$。\n\n### 子任务\n\n- 测试点 2：$N \\le 1000$ 以及 $M \\le 1000$。\n- 测试点 3：$N\\le 1000$。\n- 测试点 4-5：$M\\le 10^5$。\n- 测试点 6-16：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25JAN] Farmer John's Favorite Operation S", "background": null, "description": "It is another cold and boring day on Farmer John's farm. To pass the time, Farmer John has invented a fun leisure activity involving performing operations on an integer array.  \n\nFarmer John has an array $a$ of $N$ ($1 \\leq N \\leq 2 \\cdot 10^5$) non-negative integers and an integer $M$ ($1 \\leq M \\leq 10^9$). Then, FJ will ask Bessie for an integer $x$. In one operation, FJ can pick an index $i$ and subtract or add $1$ to $a_i$. FJ's boredom value is the minimum number of operations he must perform so that $a_i-x$ is divisible by $M$ for all $1 \\leq i \\leq N$.  \n\nAmong all possible $x$, output FJ's minimum possible boredom value.", "inputFormat": "The first line contains $T$ ($1 \\leq T \\leq 10$), the number of independent test cases to solve.  \n\nThe first line of each test case contains $N$ and $M$.  \n\nThe second line of each test case contains $a_1, a_2, ..., a_N$ ($0 \\leq a_i \\leq 10^9$).  \n\nIt is guaranteed that the sum of $N$ over all test cases does not exceed $5 \\cdot 10^5$.", "outputFormat": "For each test case, output an integer on a new line containing FJ's minimum possible boredom value among all possible values of $x$.", "hint": "In the first test case, one optimal choice of $x$ is $3$. FJ can perform $10$ operations to make $a = [12, 12, 21, 3, 12]$.  \n\n#### SCORING:\n- Input 2: $N \\le 1000$ and $M \\le 1000$.\n- Input 3: $N\\le 1000$.\n- Inputs 4-5: $M\\le 10^5$.\n- Inputs 6-16: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO25JAN] Farmer John's Favorite Operation S", "background": "", "description": "又是 Farmer John 的农场上寒冷而无聊的一天。为了打发时间，Farmer John 发明了一种关于在整数数组上进行操作的有趣的休闲活动。\n\nFarmer John 有一个包含 $N$（$1 \\leq N \\leq 2 \\cdot 10^5$）个非负整数的数组 $a$ 和一个整数 $M$（$1 \\leq M \\leq 10^9$）。然后，FJ 会请 Bessie 给出一个整数 $x$。在一次操作中，FJ 可以选择一个索引 $i$，并对 $a_i$ 加 $1$ 或减 $1$。FJ 的无聊值是他必须执行的最小操作次数，以使得对于所有的 $1 \\leq i \\leq N$，$a_i-x$ 均可被 $M$ 整除。\n\n对于所有可能的 $x$，输出 FJ 的最小无聊值。", "inputFormat": "输入的第一行包含 $T$（$1 \\leq T \\leq 10$），为需要求解的独立的测试用例数量。\n\n每一个测试用例的第一行包含 $N$ 和 $M$。\n\n第二行包含 $a_1, a_2, ..., a_N$ （$0 \\leq a_i \\leq 10^9$）。\n\n输入保证所有测试用例的 $N$ 之和不超过 $5 \\cdot 10^5$。", "outputFormat": "对于每一个测试用例输出一行，包含对于所有可能的 $x$，FJ 的最小无聊值。", "hint": "### 样例解释\n\n在第一个测试用例中，$x$ 的一个最优选择是 $3$。FJ 可以执行 $10$ 次操作使得 $a = [12, 12, 21, 3, 12]$。\n\n### 子任务\n\n- 测试点 2：$N \\le 1000$ 以及 $M \\le 1000$。\n- 测试点 3：$N\\le 1000$。\n- 测试点 4-5：$M\\le 10^5$。\n- 测试点 6-16：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11672", "type": "P", "difficulty": 5, "samples": [["1\n2", "2"], ["3\n3 4 2\n5 2 3\n6 3 5", "4 2 3\n5 3 4\n6 4 5"], ["6\n8 10 5 6 7 4\n12 11 10 4 8 2\n5 4 6 7 9 8\n10 2 4 8 5 12\n6 8 7 9 3 5\n4 12 8 5 6 10", "7 5 8 9 10 6\n4 2 5 6 7 3\n8 6 9 10 11 7\n5 3 6 7 8 4\n9 7 10 11 12 8\n6 4 7 8 9 5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2025"], "title": "[USACO25JAN] Table Recovery S", "background": "", "description": "Bessie 有一个 $N\\times N$（$1\\le N\\le 1000$）的加法表，其中对于所有 $1\\le r,c\\le N$，第 $r$ 行第 $c$ 列的方格中的整数为 $r+c$。例如，对于 $N=3$，表格如下所示：\n\n```\n2 3 4\n3 4 5\n4 5 6\n```\n\n不幸的是，Elsie 得到了这张表格，并通过执行若干次以下三种类型的操作对表格进行了变换。\n\n1. 交换两行；\n2. 交换两列；\n3. 选择两个同时存在于表格中的值 $a$ 和 $b$，然后同时将每一个 $a$ 更改为 $b$，每一个 $b$ 更改为 $a$。\n\nElsie 总是按类型顺序执行操作；也就是说，她首先执行任意数量（可能为零）的类型 $1$ 操作，然后是类型 $2$ 操作，最后是类型 $3$ 操作。\n\n请帮助 Bessie 恢复 Elsie 在执行完所有类型 $1$ 和 $2$ 操作后，但在执行任意类型 $3$ 操作之前，表格的一种可能状态。可能存在多种可能的答案，在这种情况下你应当输出字典序最小的答案。\n\n按字典序比较两个表格时，比较它们在自然顺序（行间从上到下，行内从左到右）下读取时第一个不同的项。", "inputFormat": "输入的第一行包含 $N$。\n\n以下 $N$ 行每行包含 $N$ 个整数，表示 Elsie 变换后的 Bessie 的加法表。", "outputFormat": "输出所有类型 1 和 2 操作后，类型 3 操作前，表格的字典序最小可能状态。输入保证答案存在。", "hint": "### 样例解释\n\n#### 样例 #1\n\n无论 Elsie 执行什么操作表格均不会改变。\n\n#### 样例 #2\n\n以下是 Elsie 可能执行的一种操作序列。\n\n```text\n2 3 4\n3 4 5\n4 5 6\n-> （操作 2：交换列 2 和 3）\n2 4 3\n3 5 4\n4 6 5\n-> （操作 2：交换列 1 和 2）\n4 2 3\n5 3 4\n6 4 5\n-> （操作 3：交换值 2 和 3）\n4 3 2\n5 2 4\n6 4 5\n-> （操作 3：交换值 3 和 4）\n3 4 2\n5 2 3\n6 3 5\n```\n注意：以下也是经过类型 1 和 2 操作后表格的一种可能状态，但它不是字典序最小的，因为第一行的第二项比正确答案中的要大。\n```\n4 6 5\n3 5 4\n2 4 3\n```\n\n### 子任务\n\n- 测试点 4-5：$N\\le 6$。\n- 测试点 6-7：$N\\le 8$。\n- 测试点 8-11：$N\\le 100$。\n- 测试点 12-15：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25JAN] Table Recovery S", "background": null, "description": "Bessie has an $N\\times N$ ($1\\le N\\le 1000$) addition table where the integer in the cell at row $r$ and column $c$ is $r+c$, for all $1\\le r,c\\le N$. For example, for $N=3$, the table would look like this:  \n```text\n2 3 4\n3 4 5\n4 5 6\n```\n\nUnfortunately, Elsie got ahold of the table and permuted it by performing the following three types of operations as many times as she wanted.  \n\n\n1. Swap two rows\n2. Swap two columns\n3. Select two values $a$ and $b$ that are both present in the table, then simultaneously change every occurrence of $a$ to $b$ and every occurrence of $b$ to $a$.  \n\nElsie will always perform operations in increasing order of type; that is, she performs as many operations as she likes (possibly none) first of type $1$, then of type $2$, and finally of type $3$.  \n\nHelp Bessie recover a possible state of the table after Elsie finished applying all of her operations of types $1$ and $2$, but before applying any operations of type $3$. There may be multiple possible answers, in which case you should output the lexicographically smallest one.  \n\nTo compare two tables lexicographically, compare the first entries at which they differ, when reading both tables in the natural order (rows from top to bottom, left to right within a row).", "inputFormat": "The first line contains $N$.  \n\nThe next $N$ lines each contain $N$ integers, representing Bessie's addition table after Elsie has permuted it.", "outputFormat": "The lexicographically minimum possible state of the table after all operations of types 1 and 2, but before any operations of type 3. It is guaranteed that the answer exists.", "hint": "##### For Sample 1:\nRegardless of what operations Elsie performs, the table won't change.  \n\n##### For Sample 2:\nHere is a possible sequence of operations Elsie might have performed.  \n```text\n2 3 4\n3 4 5\n4 5 6\n-> (op 1: swap columns 2 and 3)\n2 4 3\n3 5 4\n4 6 5\n-> (op 1: swap columns 1 and 2)\n4 2 3\n5 3 4\n6 4 5\n-> (op 3: swap values 2 and 3)\n4 3 2\n5 2 4\n6 4 5\n-> (op 3: swap values 3 and 4)\n3 4 2\n5 2 3\n6 3 5\n```\n\nNote: the following is also a possible state of the table after operations of types 1 and 2, but it is not the lexicographically smallest because the second entry of the first row is larger than in the correct answer.  \n```text\n4 6 5\n3 5 4\n2 4 3\n```\n\n\n#### SCORING:\n- Inputs 4-5: $N\\le 6$\n- Inputs 6-7: $N\\le 8$\n- Inputs 8-11: $N\\le 100$\n- Inputs 12-15: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO25JAN] Table Recovery S", "background": "", "description": "Bessie 有一个 $N\\times N$（$1\\le N\\le 1000$）的加法表，其中对于所有 $1\\le r,c\\le N$，第 $r$ 行第 $c$ 列的方格中的整数为 $r+c$。例如，对于 $N=3$，表格如下所示：\n\n```\n2 3 4\n3 4 5\n4 5 6\n```\n\n不幸的是，Elsie 得到了这张表格，并通过执行若干次以下三种类型的操作对表格进行了变换。\n\n1. 交换两行；\n2. 交换两列；\n3. 选择两个同时存在于表格中的值 $a$ 和 $b$，然后同时将每一个 $a$ 更改为 $b$，每一个 $b$ 更改为 $a$。\n\nElsie 总是按类型顺序执行操作；也就是说，她首先执行任意数量（可能为零）的类型 $1$ 操作，然后是类型 $2$ 操作，最后是类型 $3$ 操作。\n\n请帮助 Bessie 恢复 Elsie 在执行完所有类型 $1$ 和 $2$ 操作后，但在执行任意类型 $3$ 操作之前，表格的一种可能状态。可能存在多种可能的答案，在这种情况下你应当输出字典序最小的答案。\n\n按字典序比较两个表格时，比较它们在自然顺序（行间从上到下，行内从左到右）下读取时第一个不同的项。", "inputFormat": "输入的第一行包含 $N$。\n\n以下 $N$ 行每行包含 $N$ 个整数，表示 Elsie 变换后的 Bessie 的加法表。", "outputFormat": "输出所有类型 1 和 2 操作后，类型 3 操作前，表格的字典序最小可能状态。输入保证答案存在。", "hint": "### 样例解释\n\n#### 样例 #1\n\n无论 Elsie 执行什么操作表格均不会改变。\n\n#### 样例 #2\n\n以下是 Elsie 可能执行的一种操作序列。\n\n```text\n2 3 4\n3 4 5\n4 5 6\n-> （操作 2：交换列 2 和 3）\n2 4 3\n3 5 4\n4 6 5\n-> （操作 2：交换列 1 和 2）\n4 2 3\n5 3 4\n6 4 5\n-> （操作 3：交换值 2 和 3）\n4 3 2\n5 2 4\n6 4 5\n-> （操作 3：交换值 3 和 4）\n3 4 2\n5 2 3\n6 3 5\n```\n注意：以下也是经过类型 1 和 2 操作后表格的一种可能状态，但它不是字典序最小的，因为第一行的第二项比正确答案中的要大。\n```\n4 6 5\n3 5 4\n2 4 3\n```\n\n### 子任务\n\n- 测试点 4-5：$N\\le 6$。\n- 测试点 6-7：$N\\le 8$。\n- 测试点 8-11：$N\\le 100$。\n- 测试点 12-15：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11673", "type": "P", "difficulty": 5, "samples": [["5\n10 10000\n30 1000\n20 100\n50 10\n40 1\n11\n55\n50\n45\n40\n35\n30\n25\n20\n15\n10\n5", "111\n101\n101\n100\n100\n100\n100\n0\n11\n11\n111"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["暴力数据结构", "USACO", "2025", "树形 DP", "离线处理"], "title": "[USACO25JAN] Median Heap G", "background": "", "description": "**注意：本题的时间限制为 4 秒，通常限制的 2 倍。**\n\nFarmer John 有一棵包含 $N$ 个结点的二叉树，结点编号从 $1$ 到 $N$（$1 \\leq N < 2\\cdot 10^5$，$N$ 为奇数）。对于 $i>1$，结点 $i$ 的父结点为 $\\lfloor i/2\\rfloor$。每个结点都有一个初始整数值 $a_i$，以及将初始值修改为任意其他整数值的代价 $c_i$（$0\\le a_i,c_i\\le 10^9$）。\n\n他被联邦牛务局（Federal Bovine Intermediary，FBI）委托在这棵树中求出一个近似中位数值，并为此设计了一个聪明的算法。\n\n他从最后一个结点 $N$ 开始向前执行。在算法的每一步，如果一个结点不是它和它的两个结点的中位数，他就交换当前结点和值为中位数的子结点的值。在这个算法结束时，结点 $1$（根结点）上的值即为近似中位数。\n\nFBI 同时给 Farmer John 提供了一份包含 $Q$（$1 \\leq Q \\leq 2\\cdot 10^5$）个独立的询问的清单，每一个询问指定一个目标值 $m$（$0\\le m\\le 10^9$）。对于每一个询问，FJ 首先会修改某些结点的初始值，然后执行近似中位数算法。对于每一个询问，求 FJ 使得算法输出等于 $m$ 所需要的最小总代价。", "inputFormat": "输入的第一行包含 $N$。\n\n以下 $N$ 行每行包含两个整数 $a_i$ 和 $c_i$。\n\n以下一行包含 $Q$。\n\n以下 $Q$ 行每行包含一个目标值 $m$。", "outputFormat": "输出 $Q$ 行，为对于每一个目标值 $m$ 的最小总代价。\n", "hint": "样例 1 解释\n\n为了使近似中位数等于 $40$，FJ 可以将结点 3 的值修改为 $60$。这需要花费 $c_3=100$。\n\n为了使近似中位数等于 $45$，FJ 可以将结点 3 的值修改为 $60$，结点 5 的值修改为 $45$。这需要花费 $c_3+c_5=100+1=101$。\n\n- 测试点 $2\\sim 4$：$N,Q\\le 50$。\n- 测试点 $5\\sim 7$：$N,Q\\le 1000$。\n- 测试点 $8\\sim 16$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25JAN] Median Heap G", "background": null, "description": "****Note: The time limit for this problem is 4s, twice the default.****  \n\nFarmer John has a binary tree with $N$ nodes  where the nodes are numbered from $1$ to $N$ ($1 \\leq N < 2\\cdot 10^5$ and $N$ is odd). For $i>1$, the parent of node $i$  is $\\lfloor i/2\\rfloor$. Each node has an initial integer value $a_i$, and a cost $c_i$ to change the initial value to any other integer value ($0\\le a_i,c_i\\le 10^9$).  \n\nHe has been tasked by the Federal Bovine Intermediary (FBI) with finding an approximate median value within this tree, and has devised a clever algorithm to do so.  \n\nHe starts at the last node $N$ and works his way backward. At every step of the algorithm, if a node would not be the median of it and its two children, he swaps the values of the current node and the child value that would be the median. At the end of this algorithm, the value at node $1$ (the root) is the median approximation.  \n\nThe FBI has also given Farmer John a list of $Q$ $(1 \\leq Q \\leq 2\\cdot 10^5)$ independent queries each specified by a target value $m$ ($0\\le m\\le 10^9$). For each query, FJ will first change some of the node's initial values, and then execute the median approximation algorithm. For each query, determine the minimum possible total cost for FJ to make the output of the algorithm equal to $m$.", "inputFormat": "The first line of input contains $N$.  \n\nThe next $N$ lines each contain two integers $a_i$ and $c_i$.  \n\nThe next line contains $Q$.  \n\nThe next $Q$ lines each contain a target value $m$.", "outputFormat": "Output $Q$ lines, the minimum possible total cost for each target value $m$.", "hint": "To make the median approximation equal $40$, FJ can change the value at node 3 to $60$. This costs $c_3=100$.  \n\nTo make the median approximation equal $45$, FJ can change the value at node 3 to $60$ and the value at node 5 to $45$. This costs $c_3+c_5=100+1=101$.  \n\n\n#### SCORING:\n- Inputs 2-4: $N,Q\\le 50$\n- Inputs 5-7: $N,Q\\le 1000$\n- Inputs 8-16: No additional constraints", "locale": "en"}, "zh-CN": {"title": "[USACO25JAN] Median Heap G", "background": "", "description": "**注意：本题的时间限制为 4 秒，通常限制的 2 倍。**\n\nFarmer John 有一棵包含 $N$ 个结点的二叉树，结点编号从 $1$ 到 $N$（$1 \\leq N < 2\\cdot 10^5$，$N$ 为奇数）。对于 $i>1$，结点 $i$ 的父结点为 $\\lfloor i/2\\rfloor$。每个结点都有一个初始整数值 $a_i$，以及将初始值修改为任意其他整数值的代价 $c_i$（$0\\le a_i,c_i\\le 10^9$）。\n\n他被联邦牛务局（Federal Bovine Intermediary，FBI）委托在这棵树中求出一个近似中位数值，并为此设计了一个聪明的算法。\n\n他从最后一个结点 $N$ 开始向前执行。在算法的每一步，如果一个结点不是它和它的两个结点的中位数，他就交换当前结点和值为中位数的子结点的值。在这个算法结束时，结点 $1$（根结点）上的值即为近似中位数。\n\nFBI 同时给 Farmer John 提供了一份包含 $Q$（$1 \\leq Q \\leq 2\\cdot 10^5$）个独立的询问的清单，每一个询问指定一个目标值 $m$（$0\\le m\\le 10^9$）。对于每一个询问，FJ 首先会修改某些结点的初始值，然后执行近似中位数算法。对于每一个询问，求 FJ 使得算法输出等于 $m$ 所需要的最小总代价。", "inputFormat": "输入的第一行包含 $N$。\n\n以下 $N$ 行每行包含两个整数 $a_i$ 和 $c_i$。\n\n以下一行包含 $Q$。\n\n以下 $Q$ 行每行包含一个目标值 $m$。", "outputFormat": "输出 $Q$ 行，为对于每一个目标值 $m$ 的最小总代价。\n", "hint": "样例 1 解释\n\n为了使近似中位数等于 $40$，FJ 可以将结点 3 的值修改为 $60$。这需要花费 $c_3=100$。\n\n为了使近似中位数等于 $45$，FJ 可以将结点 3 的值修改为 $60$，结点 5 的值修改为 $45$。这需要花费 $c_3+c_5=100+1=101$。\n\n- 测试点 $2\\sim 4$：$N,Q\\le 50$。\n- 测试点 $5\\sim 7$：$N,Q\\le 1000$。\n- 测试点 $8\\sim 16$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11674", "type": "P", "difficulty": 4, "samples": [["3 2\n111\n1 2\n1 3", "3\n1\n0"], ["3 2\n000\n1 2\n1 3", "3\n0\n0"], ["7 8\n1101101\n6 2\n1 2\n2 3\n6 3\n1 3\n1 7\n4 5\n2 7", "11\n7\n4\n2\n1\n1\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "并查集", "2025"], "title": "[USACO25JAN] Reachable Pairs G", "background": "", "description": "考虑一个无向图，包含 $N$ 个结点，编号为 $1\\dots N$，以及 $M$ 条边（$1\\le N\\le 2\\cdot 10^5$，$0\\le M\\le 4\\cdot 10^5$）。给定一个位串 $s_1s_2\\dots s_N$。对于每一个 $t\\in [1,N]$，在时刻 $t$ 时，\n\n- 如果 $s_t=0$，则从图中移除结点 $t$。\n- 如果 $s_t=1$，则从图中移除结点 $t$，并在结点 $t$ 被移除之前的每对邻居之间添加一条边。\n\n注意在这两种情况下，当一个结点从图中被移除时它的所有相邻边也会被移除。\n\n计算在每一个时刻 $1\\ldots N$ 之前，可以通过一组边相互到达的结点对数。", "inputFormat": "输入的第一行包含 $N$ 和 $M$。\n\n第二行包含长为 $N$ 的位串 $s$。\n\n以下 $M$ 行，每行包含两个整数，表示图中的一条边。", "outputFormat": "输出 $N$ 行，为每一个时刻之前所求的对数。\n", "hint": "样例 1 解释：\n\n在移除之前，所有结点对之间都可以相互到达。结点 $1$ 被移除后，结点 $2$ 和 $3$ 之间添加了一条边，因此它们仍然可以相互到达。\n\n样例 2 解释：\n\n在移除之前，所有结点对之间都可以相互到达。结点 $1$ 被移除后，结点 $2$ 和 $3$ 之间不再可以相互到达。\n\n- 测试点 $4\\sim 6$：$N\\le 100$。\n- 测试点 $7\\sim 8$：所有 $s_i$ 均等于 $0$。\n- 测试点 $9\\sim 11$：所有 $s_i$ 均等于 $1$。\n- 测试点 $12\\sim 23$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25JAN] Reachable Pairs G", "background": null, "description": "Consider an undirected graph with $N$ nodes labeled $1\\dots N$ and $M$ edges ($1\\le N\\le 2\\cdot 10^5, 0\\le M\\le 4\\cdot 10^5$). You're given a binary string $s_1s_2\\dots s_N$. At time $t$ for each $t\\in [1,N]$,   \n\n\n- If $s_t=0$, node $t$ is removed from the graph.\n- If $s_t=1$, node $t$ is removed from the graph, and edges are added between every pair of neighbors that node $t$ had just before removal.  \n\nNote that in both cases, when a node is removed from the graph all of its incident edges are removed as well.  \n\nCount the number of pairs of nodes that can reach each other via some sequence of edges just before each of timesteps $1\\ldots N$.", "inputFormat": "The first line contains $N$ and $M$.  \n\nThe second line contains the bit string $s$ of length $N$.  \n\nThe next $M$ lines each contain two integers denoting an edge of the graph.", "outputFormat": "$N$ lines, the number of pairs before each timestep.", "hint": "##### For Sample 1:\nBefore any removals, all pairs of nodes are reachable from each other. After node $1$ is removed, an edge is added between $2$ and $3$, so they can still reach each other.  \n\n\n##### For Sample 2:\nBefore any removals, all pairs of nodes are reachable from each other. After node $1$ is removed, $2$ and $3$ can no longer reach each other.  \n\n#### SCORING:\n- Inputs 4-6: $N\\le 100$\n- Inputs 7-8: All $s_i$ equal zero.\n- Inputs 9-11: All $s_i$ equal one.\n- Inputs 12-23: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO25JAN] Reachable Pairs G", "background": "", "description": "考虑一个无向图，包含 $N$ 个结点，编号为 $1\\dots N$，以及 $M$ 条边（$1\\le N\\le 2\\cdot 10^5$，$0\\le M\\le 4\\cdot 10^5$）。给定一个位串 $s_1s_2\\dots s_N$。对于每一个 $t\\in [1,N]$，在时刻 $t$ 时，\n\n- 如果 $s_t=0$，则从图中移除结点 $t$。\n- 如果 $s_t=1$，则从图中移除结点 $t$，并在结点 $t$ 被移除之前的每对邻居之间添加一条边。\n\n注意在这两种情况下，当一个结点从图中被移除时它的所有相邻边也会被移除。\n\n计算在每一个时刻 $1\\ldots N$ 之前，可以通过一组边相互到达的结点对数。", "inputFormat": "输入的第一行包含 $N$ 和 $M$。\n\n第二行包含长为 $N$ 的位串 $s$。\n\n以下 $M$ 行，每行包含两个整数，表示图中的一条边。", "outputFormat": "输出 $N$ 行，为每一个时刻之前所求的对数。\n", "hint": "样例 1 解释：\n\n在移除之前，所有结点对之间都可以相互到达。结点 $1$ 被移除后，结点 $2$ 和 $3$ 之间添加了一条边，因此它们仍然可以相互到达。\n\n样例 2 解释：\n\n在移除之前，所有结点对之间都可以相互到达。结点 $1$ 被移除后，结点 $2$ 和 $3$ 之间不再可以相互到达。\n\n- 测试点 $4\\sim 6$：$N\\le 100$。\n- 测试点 $7\\sim 8$：所有 $s_i$ 均等于 $0$。\n- 测试点 $9\\sim 11$：所有 $s_i$ 均等于 $1$。\n- 测试点 $12\\sim 23$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11675", "type": "P", "difficulty": 6, "samples": [["4 5\n6 7\n1 7 5\n2 4 4\n3 1 6\n4 2 9", "9\n9\n9\n10\n12"], ["2 3\n10 7\n1 2 10\n1 9 1", "12\n16\n16"], ["5 6\n8 9\n1 3 5\n1 4 1\n3 10 7\n4 9 2\n5 6 6", "12\n12\n12\n12\n14\n14"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2025"], "title": "[USACO25JAN] Photo Op G", "background": null, "description": "Farmer John 的农场充满了茂盛的植被，每头奶牛都想拥有一张这里的自然美景的照片。不幸的是，Bessie 还有其他地方要去，但她不想打扰任何摄影活动。\n\nBessie 目前站在 xy 平面上 $(X,0)$ 处，她想要前往 $(0,Y)$（$1\\le X,Y\\le 10^6$）。不幸的是，$N$（$1 \\leq N \\leq 3 \\cdot 10^5$）头其他奶牛决定在 $x$ 轴上摆姿势。更具体地说，奶牛 $i$ 将位于 $(x_i,0)$，她的摄影师位于 $(0,y_i)$（$1 \\leq x_i,y_i \\leq 10^6$），准备拍摄她的照片。他们将在时刻 $s_i$（$1 \\leq s_i < T$）开始摆姿势，并且他们会保持姿势很长时间（他们必须拍出完美的照片）。这里，$1\\le T\\le N+1$。\n\nBessie 知道每头奶牛的摄影安排，她将选择最短欧几里得距离到达目的地，而不穿越任何摄影师与其对应的奶牛之间的视线（她的路径将由一条或多条线段组成）。\n\n如果 Bessie 在时刻 $t$ 出发，她将**需要**避开所有在时刻 $s_i \\le t$ 开始摆姿势的摄影师-奶牛对的视线，此外令她到达最终目的地的距离为 $d_t$。求从 $0$ 到 $T-1$ 的每一个整数 $t$ 的 $\\lfloor d_t\\rfloor$ 的值。\n\n注 1：Bessie 可以从摄影师或者奶牛的位置经过，这样不算穿越视线。\n\n注 2：如果 Bessie 在时刻 $t$ 出发，她需要避开的是所有满足 $s_i \\le t$ 的摄影师-奶牛对的视线，不需要考虑 $s_i\\gt t$ 的摄影师-奶牛对。", "inputFormat": "输入的第一行包含 $N$ 和 $T$，为在 $x$ 轴上摆姿势的奶牛数量及 Bessie 可以出发的时刻数量。\n\n第二行包含 $X$ 和 $Y$，分别表示 Bessie 起始点的 $x$ 坐标以及目的地的 $y$ 坐标。\n\n以下 $N$ 行包含 $s_i$，$x_i$ 和 $y_i$。输入保证所有的 $x_i$ 各不相同且与 $X$ 不同，所有的 $y_i$ 各不相同且与 $Y$ 不同。所有 $s_i$ 将按升序给出，即 $s_i \\leq s_{i+1}$。", "outputFormat": "输出 $T$ 行，第 $t$ 行（从 0 开始索引）包含 $\\lfloor d_t\\rfloor$。", "hint": "样例 2 解释：\n\n对于 $t=0$ 答案为 $\\lfloor \\sqrt{149} \\rfloor=12$。\n\n对于 $t=1$ 答案为 $\\lfloor 14+\\sqrt 5\\rfloor=16$。\n\n样例 3 解释：\n\n对于 $t=5$ 答案为 $\\lfloor 1+\\sqrt{9^2+7^2}+2\\rfloor=14$。路径：$(8,0)\\to (9,0)\\to (0,7)\\to (0,9)$。\n\n- 测试点 $4\\sim 6$：$N\\le 100$。\n- 测试点 $7\\sim 9$：$N\\le 3000$。\n- 测试点 $10\\sim 12$：$T\\le 10$。\n- 测试点 $13\\sim 18$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25JAN] Photo Op G", "background": null, "description": "Farmer John's farm is full of lush vegetation and every cow wants a photo of its natural beauty. Unfortunately, Bessie still has places to be, but she doesn't want to disrupt any  photo ops.   \n\nBessie is currently standing at $(X,0)$ on the XY-plane and she wants to get to $(0,Y)$ ($1\\le X,Y\\le 10^6$). Unfortunately, $N$ ($1 \\leq N \\leq 3 \\cdot 10^5$) other cows have decided to pose on the $X$ axis. More specifically, cow $i$ will be positioned at $(x_i,0)$ with a photographer at $(0,y_i)$ where $(1 \\leq x_i,y_i \\leq 10^6)$ ready to take their picture. They will begin posing moments before time $s_i$ ($1 \\leq s_i < T$) and they will keep posing for a very long time (they have to get their picture just right). Here, $1\\le T\\le N+1$.  \n\nBessie knows the schedule for every cow's photo op, and she will take the shortest Euclidean distance to get to her destination, without crossing the line of sight from any photographer to their respective cow (her path will consist of one or more line segments).  \n\nIf Bessie leaves at time $t$, she will avoid the line of sights for all  photographer/cow pairs that started posing at time $s_i \\le t$, and let  the distance to her final destination be $d_t$. Determine the values of  $\\lfloor d_t\\rfloor$ for each integer $t$ from $0$ to $T-1$ inclusive.", "inputFormat": "The first line of input contains $N$ and $T$, representing the number of cows posing on the $x$-axis and the timeframe that Bessie could leave at.  \n\nThe second line of input contains $X$ and $Y$, representing Bessie's starting $X$ coordinate and her target $Y$ coordinate respectively.  \n\nThe next $N$ lines contain $s_i$ $x_i$ and $y_i$. It is guaranteed that all $x_i$ are distinct from each other and $X$, and all $y_i$ are distinct from each other and $Y$. All $s_i$ will be given in increasing order, where $s_i \\leq s_{i+1}$.", "outputFormat": "Print $T$ lines, with the $t$th (0-indexed) line containing $\\lfloor d_t\\rfloor$.", "hint": "##### For Sample 2:\nFor $t=0$ the answer is $\\lfloor \\sqrt{149} \\rfloor=12$.  \n\nFor $t=1$ the answer is $\\lfloor 14+\\sqrt 5\\rfloor=16$.  \n\n\n##### For Sample 3:\nFor $t=5$ the answer is $\\lfloor 1+\\sqrt{9^2+7^2}+2\\rfloor=14$. Path: $(8,0)\\to (9,0)\\to (0,7)\\to (0,9)$  \n\n\n#### SCORING:\n\n- Inputs 4-6: $N\\le 100$\n- Inputs 7-9: $N\\le 3000$\n- Inputs 10-12: $T\\le 10$\n- Inputs 13-18: No additional constraints", "locale": "en"}, "zh-CN": {"title": "[USACO25JAN] Photo Op G", "background": null, "description": "Farmer John 的农场充满了茂盛的植被，每头奶牛都想拥有一张这里的自然美景的照片。不幸的是，Bessie 还有其他地方要去，但她不想打扰任何摄影活动。\n\nBessie 目前站在 xy 平面上 $(X,0)$ 处，她想要前往 $(0,Y)$（$1\\le X,Y\\le 10^6$）。不幸的是，$N$（$1 \\leq N \\leq 3 \\cdot 10^5$）头其他奶牛决定在 $x$ 轴上摆姿势。更具体地说，奶牛 $i$ 将位于 $(x_i,0)$，她的摄影师位于 $(0,y_i)$（$1 \\leq x_i,y_i \\leq 10^6$），准备拍摄她的照片。他们将在时刻 $s_i$（$1 \\leq s_i < T$）开始摆姿势，并且他们会保持姿势很长时间（他们必须拍出完美的照片）。这里，$1\\le T\\le N+1$。\n\nBessie 知道每头奶牛的摄影安排，她将选择最短欧几里得距离到达目的地，而不穿越任何摄影师与其对应的奶牛之间的视线（她的路径将由一条或多条线段组成）。\n\n如果 Bessie 在时刻 $t$ 出发，她将**需要**避开所有在时刻 $s_i \\le t$ 开始摆姿势的摄影师-奶牛对的视线，此外令她到达最终目的地的距离为 $d_t$。求从 $0$ 到 $T-1$ 的每一个整数 $t$ 的 $\\lfloor d_t\\rfloor$ 的值。\n\n注 1：Bessie 可以从摄影师或者奶牛的位置经过，这样不算穿越视线。\n\n注 2：如果 Bessie 在时刻 $t$ 出发，她需要避开的是所有满足 $s_i \\le t$ 的摄影师-奶牛对的视线，不需要考虑 $s_i\\gt t$ 的摄影师-奶牛对。", "inputFormat": "输入的第一行包含 $N$ 和 $T$，为在 $x$ 轴上摆姿势的奶牛数量及 Bessie 可以出发的时刻数量。\n\n第二行包含 $X$ 和 $Y$，分别表示 Bessie 起始点的 $x$ 坐标以及目的地的 $y$ 坐标。\n\n以下 $N$ 行包含 $s_i$，$x_i$ 和 $y_i$。输入保证所有的 $x_i$ 各不相同且与 $X$ 不同，所有的 $y_i$ 各不相同且与 $Y$ 不同。所有 $s_i$ 将按升序给出，即 $s_i \\leq s_{i+1}$。", "outputFormat": "输出 $T$ 行，第 $t$ 行（从 0 开始索引）包含 $\\lfloor d_t\\rfloor$。", "hint": "样例 2 解释：\n\n对于 $t=0$ 答案为 $\\lfloor \\sqrt{149} \\rfloor=12$。\n\n对于 $t=1$ 答案为 $\\lfloor 14+\\sqrt 5\\rfloor=16$。\n\n样例 3 解释：\n\n对于 $t=5$ 答案为 $\\lfloor 1+\\sqrt{9^2+7^2}+2\\rfloor=14$。路径：$(8,0)\\to (9,0)\\to (0,7)\\to (0,9)$。\n\n- 测试点 $4\\sim 6$：$N\\le 100$。\n- 测试点 $7\\sim 9$：$N\\le 3000$。\n- 测试点 $10\\sim 12$：$T\\le 10$。\n- 测试点 $13\\sim 18$：没有额外限制。", "locale": "zh-CN"}}}
