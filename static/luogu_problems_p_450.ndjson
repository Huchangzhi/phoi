{"pid": "P10126", "type": "P", "difficulty": 3, "samples": [["5\n1 2 3 4 5", "lovely\n-114514"], ["5\n3 2 1 6 7", "lovely\n3.1416"], ["5\n3 2 1 4 5", "pigeon"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化"], "title": "「Daily OI Round 3」Pigeon", "background": "> 最近，忙吗，也不说打个电话。哦，是吗，嘿嘿原来没给过你号码。但这，不是，你不找我的理由，下次罚你陪我等到太阳出头。——recollect_i 的博客", "description": "recollect_i 给了你长度为 $n$ 的序列 $x$，你需要求出一个实数 $y$ 使得对于所有 $1\\leq i<j\\leq n$，$\\vert x_j-y\\vert>\\vert x_i-y\\vert$，或报告无解。", "inputFormat": "第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数 $x$，表示序列。", "outputFormat": "如果有解，第一行输出字符串 `lovely`，第二行输出一个实数 $y$。\n\n为了避免精度问题，如果您输出的方案满足对于所有 $ 1\\leq i<j\\leq n$，$\\vert x_j-y\\vert-\\vert x_i-y\\vert>10^{-6}$，则认为您的答案正确。\n\n同时您需要保证 $-2\\times 10^9\\leq y\\leq 2\\times 10^9$，且 $y$ 的小数点后不超过 $10$ 位，否则无法保证评测的正确性。\n\n如果无解，一行输出字符串 `pigeon`。", "hint": "#### 【提示】\n\n输出格式中 $>10^{-6}$ 只是为了避免精度问题，您可以当成要求 $\\vert x_j-y\\vert>\\vert x_i-y\\vert$。\n\n可以证明，如果有解，则一定存在 $y$ 满足 $-2\\times 10^{9}\\leq y\\leq2\\times 10^{9}$ 且对于所有 $1\\leq i<j\\leq n$，$\\vert x_j-y\\vert-\\vert x_i-y\\vert>0.2$，且小数点后位数不超过 $3$。\n\n#### 【数据范围】\n\n对于全部数据保证：$5\\leq n\\leq10^5$，$-10^9\\leq x_i\\leq10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 3」Pigeon", "background": "> 最近，忙吗，也不说打个电话。哦，是吗，嘿嘿原来没给过你号码。但这，不是，你不找我的理由，下次罚你陪我等到太阳出头。——recollect_i 的博客", "description": "recollect_i 给了你长度为 $n$ 的序列 $x$，你需要求出一个实数 $y$ 使得对于所有 $1\\leq i<j\\leq n$，$\\vert x_j-y\\vert>\\vert x_i-y\\vert$，或报告无解。", "inputFormat": "第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数 $x$，表示序列。", "outputFormat": "如果有解，第一行输出字符串 `lovely`，第二行输出一个实数 $y$。\n\n为了避免精度问题，如果您输出的方案满足对于所有 $ 1\\leq i<j\\leq n$，$\\vert x_j-y\\vert-\\vert x_i-y\\vert>10^{-6}$，则认为您的答案正确。\n\n同时您需要保证 $-2\\times 10^9\\leq y\\leq 2\\times 10^9$，且 $y$ 的小数点后不超过 $10$ 位，否则无法保证评测的正确性。\n\n如果无解，一行输出字符串 `pigeon`。", "hint": "#### 【提示】\n\n输出格式中 $>10^{-6}$ 只是为了避免精度问题，您可以当成要求 $\\vert x_j-y\\vert>\\vert x_i-y\\vert$。\n\n可以证明，如果有解，则一定存在 $y$ 满足 $-2\\times 10^{9}\\leq y\\leq2\\times 10^{9}$ 且对于所有 $1\\leq i<j\\leq n$，$\\vert x_j-y\\vert-\\vert x_i-y\\vert>0.2$，且小数点后位数不超过 $3$。\n\n#### 【数据范围】\n\n对于全部数据保证：$5\\leq n\\leq10^5$，$-10^9\\leq x_i\\leq10^9$。", "locale": "zh-CN"}}}
{"pid": "P10127", "type": "P", "difficulty": 4, "samples": [["3 4\n....\n...#\n....", "14\n10 10 10 13\n10 10 10 -1\n10 10 10 13"], ["5 6\n...#..\n#.....\n......\n......\n...#..", "39\n38 38 38 -1 38 38\n-1 35 32 29 32 35\n35 32 29 29 32 35\n35 32 29 29 32 35\n35 35 35 -1 38 38"], ["7 7\n....#..\n.#.....\n.......\n.......\n.#...##\n..#####\n.......", "51\n50 50 50 50 -1 50 50\n50 -1 47 44 41 44 47\n50 50 44 41 38 44 47\n50 50 44 41 38 44 47\n50 -1 47 47 47 -1 -1\n50 50 -1 -1 -1 -1 -1\n50 50 50 50 50 50 50"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "差分"], "title": "「Daily OI Round 3」Tower", "background": "定义 $(x_1,y_1),(x_2,y_2)$ 的 `A 距离` 为 $\\max\\{|x_1-x_2|,|y_1-y_2|\\}+1$，下文中的距离都指的是 `A 距离`。\n\n比如说，$(1,1)$ 和 $(3,8)$ 的 `A 距离` 为 $\\max\\{|1-3|,|1-8|\\}+1=8$。\n\n比如说，$(46,1)$ 和 $(35,9)$ 的 `A 距离` 为 $\\max\\{|46-35|,|1-9|\\}+1=12$。", "description": "A 国的国土可以看成是 $n\\times m$ 的矩阵，第 $x$ 行第 $y$ 列坐标为 $(x,y)$。\n\n国土可以是山地，用 `#` 表示，可以是平地，用 `.` 表示。\n\nA 国在每一个平地建了一个能量塔，能量塔搜集能量的范围是正方形的。如果 $e$ 满足到该能量塔 `A 距离` **不超过** $e$ 的地方是 A 国的国土，并且该地方是平地，则称 $e$ 是该能量塔的基准能量。\n\n一个能量塔的综合能量 $E$ 为该能量塔基准能量 $e$ 的最大值。\n\n特殊地，如果这个地方没有能量塔，该处综合能量 $E=0$，否则，该处的综合能量就是能量塔的综合能量。\n\n记第 $i$ 行第 $j$ 列的综合能量为 $E_{i,j}$。\n\n记一个国家的能量总和 $\\xi=\\sum\\limits^n_{i=1}\\sum\\limits_{j=1}^mE_{i,j}^2$。\n\n你需要求一个国家的能量总和 $\\xi$。\n\n当然，由于特殊的原因（比如宇宙射线的影响），某一个地方的平地可能会突然变成山地，当地的能量塔也会被摧毁，而且影响到附近能量塔的综合能量 $E$。\n\n作为 A 国的参谋，国王想让你预备方案，看看每一个非山地的点变成山地之后，该国家的能量总和是多少。", "inputFormat": "第一行两个整数 $n,m$。\n\n下面是一个 $n\\times m$ 的矩阵，第 $i$ 行第 $j$ 列为 `#` 或 `.`，描述 A 国的地形。", "outputFormat": "输出共 $n+1$ 行。\n\n第一行一个整数 $\\xi$，表示 A 国开始的能量总和。\n\n下面是一个 $n\\times m$ 的矩阵，第 $i+1$ 行第 $j$ 个整数表示 $(i,j)$ 变成山地之后该国家的能量总和 $\\xi_{i,j}$，特殊地，如果 $(i,j)$ 原来是山地，输出 $-1$。", "hint": "#### 【样例解释 #1】\n\n下面举 $3$ 个例子：\n\n开始，这个国家的 $E_{i,j}$ 如下：\n\n```\n1 1 1 1 \n1 2 1 0\n1 1 1 1\n```\n\n$(1,1)$ 变成山地后，$E_{i,j}$ 如下：\n\n```\n0 1 1 1\n1 1 1 0\n1 1 1 1\n```\n\n\n\n$(3,4)$ 变成山地后，$E_{i,j}$ 如下：\n\n```\n1 1 1 1\n1 2 1 0\n1 1 1 0\n```\n\n#### 【数据范围】\n\n对于全部数据保证：$1\\le n,m\\le600$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 3」Tower", "background": "定义 $(x_1,y_1),(x_2,y_2)$ 的 `A 距离` 为 $\\max\\{|x_1-x_2|,|y_1-y_2|\\}+1$，下文中的距离都指的是 `A 距离`。\n\n比如说，$(1,1)$ 和 $(3,8)$ 的 `A 距离` 为 $\\max\\{|1-3|,|1-8|\\}+1=8$。\n\n比如说，$(46,1)$ 和 $(35,9)$ 的 `A 距离` 为 $\\max\\{|46-35|,|1-9|\\}+1=12$。", "description": "A 国的国土可以看成是 $n\\times m$ 的矩阵，第 $x$ 行第 $y$ 列坐标为 $(x,y)$。\n\n国土可以是山地，用 `#` 表示，可以是平地，用 `.` 表示。\n\nA 国在每一个平地建了一个能量塔，能量塔搜集能量的范围是正方形的。如果 $e$ 满足到该能量塔 `A 距离` **不超过** $e$ 的地方是 A 国的国土，并且该地方是平地，则称 $e$ 是该能量塔的基准能量。\n\n一个能量塔的综合能量 $E$ 为该能量塔基准能量 $e$ 的最大值。\n\n特殊地，如果这个地方没有能量塔，该处综合能量 $E=0$，否则，该处的综合能量就是能量塔的综合能量。\n\n记第 $i$ 行第 $j$ 列的综合能量为 $E_{i,j}$。\n\n记一个国家的能量总和 $\\xi=\\sum\\limits^n_{i=1}\\sum\\limits_{j=1}^mE_{i,j}^2$。\n\n你需要求一个国家的能量总和 $\\xi$。\n\n当然，由于特殊的原因（比如宇宙射线的影响），某一个地方的平地可能会突然变成山地，当地的能量塔也会被摧毁，而且影响到附近能量塔的综合能量 $E$。\n\n作为 A 国的参谋，国王想让你预备方案，看看每一个非山地的点变成山地之后，该国家的能量总和是多少。", "inputFormat": "第一行两个整数 $n,m$。\n\n下面是一个 $n\\times m$ 的矩阵，第 $i$ 行第 $j$ 列为 `#` 或 `.`，描述 A 国的地形。", "outputFormat": "输出共 $n+1$ 行。\n\n第一行一个整数 $\\xi$，表示 A 国开始的能量总和。\n\n下面是一个 $n\\times m$ 的矩阵，第 $i+1$ 行第 $j$ 个整数表示 $(i,j)$ 变成山地之后该国家的能量总和 $\\xi_{i,j}$，特殊地，如果 $(i,j)$ 原来是山地，输出 $-1$。", "hint": "#### 【样例解释 #1】\n\n下面举 $3$ 个例子：\n\n开始，这个国家的 $E_{i,j}$ 如下：\n\n```\n1 1 1 1 \n1 2 1 0\n1 1 1 1\n```\n\n$(1,1)$ 变成山地后，$E_{i,j}$ 如下：\n\n```\n0 1 1 1\n1 1 1 0\n1 1 1 1\n```\n\n\n\n$(3,4)$ 变成山地后，$E_{i,j}$ 如下：\n\n```\n1 1 1 1\n1 2 1 0\n1 1 1 0\n```\n\n#### 【数据范围】\n\n对于全部数据保证：$1\\le n,m\\le600$。", "locale": "zh-CN"}}}
{"pid": "P10128", "type": "P", "difficulty": 5, "samples": [["4\n2\n3\n50\n999998", "2\n15\n599192517\n81627972"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["递推", "洛谷原创", "O2优化"], "title": "「Daily OI Round 3」Xor Graph", "background": "在黎明来临之前，总要有人照亮黑暗。", "description": "Xs_siqi 给了你 $2^n$ 个点，$x$ 到 $y$ 有**有向**边当且仅当 $x\\operatorname{xor} y=2^k,k \\in [0,n)$，且 $x>y$。其中，$\\operatorname{xor}$ 表示按位异或，$k$ 为整数。令 $f_{x,y}$ 为 $x$ 点到 $y$ 点的不同路径数，求： \n\n$$\\sum_{i=1}^{2^n}\\sum_{j=1}^{2^n}f_{i,j}(i\\neq j)$$\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行，一个整数 $t$。\n\n接下来 $2 \\sim t+1$ 行，一行一个整数表示 $n$。", "outputFormat": "共 $t$ 行，每行一个整数表示题目要求的方案数。", "hint": "#### 【样例解释 #1】\n\n对于样例的第一组，$3$ 向 $1,2$ 连边，这样 $3$ 到 $1$ 是一个方案，$3$ 到 $2$ 是一个方案，一共有 $2$ 个方案。\n\n#### 【数据范围】\n\n对于全部数据保证：$1 \\le t \\le 10^6$，$1 \\le n \\le 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 3」Xor Graph", "background": "在黎明来临之前，总要有人照亮黑暗。", "description": "Xs_siqi 给了你 $2^n$ 个点，$x$ 到 $y$ 有**有向**边当且仅当 $x\\operatorname{xor} y=2^k,k \\in [0,n)$，且 $x>y$。其中，$\\operatorname{xor}$ 表示按位异或，$k$ 为整数。令 $f_{x,y}$ 为 $x$ 点到 $y$ 点的不同路径数，求： \n\n$$\\sum_{i=1}^{2^n}\\sum_{j=1}^{2^n}f_{i,j}(i\\neq j)$$\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行，一个整数 $t$。\n\n接下来 $2 \\sim t+1$ 行，一行一个整数表示 $n$。", "outputFormat": "共 $t$ 行，每行一个整数表示题目要求的方案数。", "hint": "#### 【样例解释 #1】\n\n对于样例的第一组，$3$ 向 $1,2$ 连边，这样 $3$ 到 $1$ 是一个方案，$3$ 到 $2$ 是一个方案，一共有 $2$ 个方案。\n\n#### 【数据范围】\n\n对于全部数据保证：$1 \\le t \\le 10^6$，$1 \\le n \\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P10129", "type": "P", "difficulty": 6, "samples": [["2 2 3\n2 1\n2 1\n1 3\n3\n1 1 2 3\n1 1 1 1\n1 1 3 3\n2 0\n7 6", "9"], ["3 1 3\n1 2\n3 2\n1 2 3\n1 2 1 3\n2 3 2 2\n2 2\n1 100\n1 1 1 3\n1 2 2 1\n5 1\n5 0 5 5 5\n4 5 1 3", "4"], ["5 6 5\n4 3\n3 5\n1 2\n2 1\n3 4\n3 5\n2 0\n37 44\n4 2\n33 2 43 49\n3 1 3 6\n3 4 4 6\n6 4\n4 23 0 9 35 22\n3 4 2 7\n3 4 5 3\n2 1 3 2\n4 4 4 10\n3 2\n14 41 35\n2 2 4 1\n3 3 2 5\n3 5\n27 39 9\n3 3 2 1\n3 2 3 3\n2 1 1 5\n2 1 5 3\n1 2 4 8", "71"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["网络流", "洛谷原创", "O2优化", "最小割", "线性规划"], "title": "「Daily OI Round 3」City Planning", "background": "只要不失去你的崇高，整个世界都会为你敞开。", "description": "Provence-Alpes-Côte d'Azur 的管理者们遇上大麻烦了！他们邀请你来解决城市规划的问题。\n\n这群管理者一共有 $t$ 人，并且这个地区一共有 $n$ 个城镇，第 $i$ 个城镇内部又有 $k_i$ 个村庄，通过 $p_i$ 条道路连接，第 $j$ 条道路双向连接第 $i$ 个城镇中的第 $u_{i,j}$ 和 $v_{i,j}$ 两个村庄，管理道路的人是第 $w_{i,j}$ 个，客流量是 $z_{i,j}$。\n\n为了管理组内部的团结，保证每个人在同一个城镇最多管理 $1$ 条道路。\n\n现在这些城镇中的村庄和村庄之间的道路都遭到了损坏，管理者们急于恢复这些城镇内的交通。这些城镇互相之间有 $m$ 条高铁，每条高铁连接了 $u,v$ 两个城镇，并且当初为了设计的优美，这 $n$ 个城镇和 $m$ 条高铁构成了一个**二分图**。\n\n对于每个城镇 $i$，你都需要帮助管理组选择一个参数 $c_i(1 \\le c_i \\le k_i)$，修复一些村庄，编号在 $1 \\sim c_i$ 之间的村庄都会被修复，如果道路的两端的村庄都修复了，那么这条道路就会自动修复。因此第 $i$ 个城镇中会产生 $b_{i,c_i}$ 的花费。\n\n对于管理者 $i$ 来说，如果存在两条他在不同城镇管理的道路都没有被修复，并且这两条道路所属的城镇有高铁**直接连接**，你需要支付这两条道路的人流量的乘积来弥补损失，这样管理者 $i$ 才会高兴。（对于**任意**两条满足上述条件的道路你都需要弥补损失，而不是对于每个管理者只需要弥补一对道路的损失）\n\n为了让管理组的成员都高兴并且给出的方案符合题目的要求（即 $1 \\le c_i \\le k_i$），你需要提前计算好自己至少需要支付多少钱以应对这一群管理者们的刁难。\n\n", "inputFormat": "第一行三个整数 $n,m,t$ 表示城镇的数量，城镇间的高铁的数量和管理组人员的数量。\n\n接下来 $m$ 行每行两个整数 $x,y$ 表示这条高铁连接的两个城镇的编号。\n\n接下来 $n$ 组输入，对于第 $i$ 组输入，格式如下：\n\n第一行两个整数 $k_i,p_i$ 表示第 $i$ 个城镇有 $k_i$ 个村庄，$p_i$ 条道路。\n\n第二行 $k_i$ 个整数，第 $j$ 个整数表示当 $c=j$ 时的花费 $b_{i,j}$。\n\n接下来 $p_i$ 行，每行四个整数 $u_{i,j},v_{i,j},w_{i,j},z_{i,j}$，表示有一条边连接 $i$ 号城镇的第 $u_{i,j}$ 个村庄和第 $v_{i,j}$ 个村庄，并且管理道路的人是第 $w_{i,j}$ 个，客流量为 $z_{i,j}$。", "outputFormat": "一行一个整数表示让所有管理者都高兴的最小花费是多少。", "hint": "#### 【样例解释 #1】\n\n我们可以选择 $c_1=1,c_2=2$，那么花费就是 $b_{1,c_1}+b_{2,c_2}=3+6=9$，而没有一个管理员你需要讨好。\n\n#### 【样例解释 #2】\n\n我们可以选择 $c_1=1,c_2=1,c_3=2$，那么花费就是 $b_{1,c_1}+b_{2,c_2}+b_{3,c_3}=1+1=2$，但是管理员 $2$ 在城镇 $1$ 中管理的道路 $2 \\to 3$ 不可能被修复，在城镇 $2$ 中管理的道路 $1 \\to 2$ 不可能被修复，你就需要花费 $2 \\times 1 = 2$ 的代价讨好管理员 $2$，总的代价就是 $4$。\n\n你并不需要讨好管理员 $1$，哪怕他在城镇 $1$ 和 $3$ 中分别有一条道路不可能被修复，因为城镇 $1$ 和 $3$ 没有高铁相连，所以你不需要为此支付额外的资金。\n\n#### 【数据范围】\n\n对于全部数据保证：$1 \\le n \\le 50$，$1 \\le k_i \\le 100$，$0 \\le p_i \\le t$，$0 \\le m \\le 500$，$1 \\le t \\le 50$，$1 \\le x,y \\le n$，$x \\ne y$，$0 \\le b_{i,j} \\le 10^9$，$1 \\le u_{i,j},v_{i,j} \\le k_i$，$1 \\le w_{i,j} \\le t$，$1 \\le z_{i,j} \\le 10^4$。\n\n$n$ 个城镇和 $m$ 条高铁构成的图是一个二分图，每个管理员在同一个村庄管理的道路数量不超过 $1$。\n\n**可能有连接同一对城镇的不同的高铁，不会出现自己连向自己的高铁。但城镇中的村庄可能会有自己连向自己的道路，也可能出现连接同一对村庄的不同的道路。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 3」City Planning", "background": "只要不失去你的崇高，整个世界都会为你敞开。", "description": "Provence-Alpes-Côte d'Azur 的管理者们遇上大麻烦了！他们邀请你来解决城市规划的问题。\n\n这群管理者一共有 $t$ 人，并且这个地区一共有 $n$ 个城镇，第 $i$ 个城镇内部又有 $k_i$ 个村庄，通过 $p_i$ 条道路连接，第 $j$ 条道路双向连接第 $i$ 个城镇中的第 $u_{i,j}$ 和 $v_{i,j}$ 两个村庄，管理道路的人是第 $w_{i,j}$ 个，客流量是 $z_{i,j}$。\n\n为了管理组内部的团结，保证每个人在同一个城镇最多管理 $1$ 条道路。\n\n现在这些城镇中的村庄和村庄之间的道路都遭到了损坏，管理者们急于恢复这些城镇内的交通。这些城镇互相之间有 $m$ 条高铁，每条高铁连接了 $u,v$ 两个城镇，并且当初为了设计的优美，这 $n$ 个城镇和 $m$ 条高铁构成了一个**二分图**。\n\n对于每个城镇 $i$，你都需要帮助管理组选择一个参数 $c_i(1 \\le c_i \\le k_i)$，修复一些村庄，编号在 $1 \\sim c_i$ 之间的村庄都会被修复，如果道路的两端的村庄都修复了，那么这条道路就会自动修复。因此第 $i$ 个城镇中会产生 $b_{i,c_i}$ 的花费。\n\n对于管理者 $i$ 来说，如果存在两条他在不同城镇管理的道路都没有被修复，并且这两条道路所属的城镇有高铁**直接连接**，你需要支付这两条道路的人流量的乘积来弥补损失，这样管理者 $i$ 才会高兴。（对于**任意**两条满足上述条件的道路你都需要弥补损失，而不是对于每个管理者只需要弥补一对道路的损失）\n\n为了让管理组的成员都高兴并且给出的方案符合题目的要求（即 $1 \\le c_i \\le k_i$），你需要提前计算好自己至少需要支付多少钱以应对这一群管理者们的刁难。\n\n", "inputFormat": "第一行三个整数 $n,m,t$ 表示城镇的数量，城镇间的高铁的数量和管理组人员的数量。\n\n接下来 $m$ 行每行两个整数 $x,y$ 表示这条高铁连接的两个城镇的编号。\n\n接下来 $n$ 组输入，对于第 $i$ 组输入，格式如下：\n\n第一行两个整数 $k_i,p_i$ 表示第 $i$ 个城镇有 $k_i$ 个村庄，$p_i$ 条道路。\n\n第二行 $k_i$ 个整数，第 $j$ 个整数表示当 $c=j$ 时的花费 $b_{i,j}$。\n\n接下来 $p_i$ 行，每行四个整数 $u_{i,j},v_{i,j},w_{i,j},z_{i,j}$，表示有一条边连接 $i$ 号城镇的第 $u_{i,j}$ 个村庄和第 $v_{i,j}$ 个村庄，并且管理道路的人是第 $w_{i,j}$ 个，客流量为 $z_{i,j}$。", "outputFormat": "一行一个整数表示让所有管理者都高兴的最小花费是多少。", "hint": "#### 【样例解释 #1】\n\n我们可以选择 $c_1=1,c_2=2$，那么花费就是 $b_{1,c_1}+b_{2,c_2}=3+6=9$，而没有一个管理员你需要讨好。\n\n#### 【样例解释 #2】\n\n我们可以选择 $c_1=1,c_2=1,c_3=2$，那么花费就是 $b_{1,c_1}+b_{2,c_2}+b_{3,c_3}=1+1=2$，但是管理员 $2$ 在城镇 $1$ 中管理的道路 $2 \\to 3$ 不可能被修复，在城镇 $2$ 中管理的道路 $1 \\to 2$ 不可能被修复，你就需要花费 $2 \\times 1 = 2$ 的代价讨好管理员 $2$，总的代价就是 $4$。\n\n你并不需要讨好管理员 $1$，哪怕他在城镇 $1$ 和 $3$ 中分别有一条道路不可能被修复，因为城镇 $1$ 和 $3$ 没有高铁相连，所以你不需要为此支付额外的资金。\n\n#### 【数据范围】\n\n对于全部数据保证：$1 \\le n \\le 50$，$1 \\le k_i \\le 100$，$0 \\le p_i \\le t$，$0 \\le m \\le 500$，$1 \\le t \\le 50$，$1 \\le x,y \\le n$，$x \\ne y$，$0 \\le b_{i,j} \\le 10^9$，$1 \\le u_{i,j},v_{i,j} \\le k_i$，$1 \\le w_{i,j} \\le t$，$1 \\le z_{i,j} \\le 10^4$。\n\n$n$ 个城镇和 $m$ 条高铁构成的图是一个二分图，每个管理员在同一个村庄管理的道路数量不超过 $1$。\n\n**可能有连接同一对城镇的不同的高铁，不会出现自己连向自己的高铁。但城镇中的村庄可能会有自己连向自己的道路，也可能出现连接同一对村庄的不同的道路。**", "locale": "zh-CN"}}}
{"pid": "P10130", "type": "P", "difficulty": 6, "samples": [["10 20 2 9\n1 5 2 6\n7 9 8 10\n1 4 1 5\n3 6 2 3\n2 1\n3 6 2 3\n1 10 2 7\n1 9 3 6\n2 6\n1 7 8 13\n3 8 2 12", "Yes\nNo\nYes"], ["10 10 2 10\n1 1 2 2\n1 1 8 8\n1 2 1 8\n1 6 7 8\n1 8 7 8\n1 9 6 7\n3 8 3 3\n2 4\n1 5 7 8\n3 3 3 3\n3 6 3 3\n2 3", "Yes\nNo\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "树状数组", "洛谷原创", "O2优化"], "title": "「Daily OI Round 3」War", "background": "《赤壁之战》是一款开放世界冒险游戏，这意味着从你踏入提瓦特的第一刻起，只要合理规划自己的体力，不论翻山越岭、还是横渡江河，总有办法见到新的风景。", "description": "有 $n$ 条船，船编号为 $1$ 至 $n$。每条船上有 $m$ 个士兵，士兵编号为 $1$ 至 $m$。\n\n开始时，有若干组船由铁索相连。具体的关系给出如下：\n\n给出 $s$ 组关系，形如 $l_1,r_1,l_2,r_2$，表示 $\\forall k \\in [0,r_1-l_1]$，第 $l_1+k$ 条船与第 $l_2+k$ 条船相连，保证 $r_1-l_1+1=r_2-l_2+1$ 且 $l_1 < l_2$。\n\n保证 $\\forall p \\in [1,n]$，最多存在一组关系使得 $l_2 \\le p \\le r_2$。\n\n然后有 $q$ 个操作，操作如下（操作按照时间先后顺序编号为 $1 \\sim q$）：\n\n操作 $1$：向编号为 $p$ 的船的 $[L,R]$ 区间的士兵发射一支火箭。这样操作之后，这个区间的所有士兵都会着火。由于铁锁连环的缘故，所有与 $p$ 直接相连或间接相连的船的 $[L,R]$ 区间的士兵都会着火。注意，士兵可能着火多次。\n\n操作 $2$：撤回编号为 $p$ 的操作，保证这个操作必定是操作 $1$。**保证不会多次撤回同一个操作，并且以后的询问都不考虑已经撤销的操作所带来的影响。**\n\n操作 $3$：询问船 $p$ 上区间为 $[L,R]$ 的士兵是否全部着火。如果全部着火请输出 `Yes`，否则输出 `No`。", "inputFormat": "第一行四个整数分别是 $n,m,s,q$，含义如题所示。\n\n接下来 $s$ 行，每行四个整数，表示一个铁索关系。\n\n接下来 $q$ 行，表示操作。\n\n每行第一个整数 $op$ 表示操作种类。\n\n- 若 $op=1$，你需要输入三个整数 $p,L,R$，并按照题目要求执行操作 $1$。\n\n- 若 $op=2$，你需要输入一个整数 $p$，并按照题目要求执行操作 $2$。\n\n- 若 $op=3$，你需要输入三个整数 $p,L,R$，并按照题目要求执行操作 $3$。", "outputFormat": "若干行，表示每个 $3$ 操作的答案。\n\n**温馨提示：全部输出 `No` 或者 `Yes` 会得到 $0\\text{ pts}$ 的高分。**", "hint": "#### 【样例解释 #1】\n\n首先给出了两条关系式，第一条表示了 $1$ 与 $2$，$2$ 与 $3$，$3$ 与 $4$，$4$ 与 $5$，$5$ 与 $6$ 的船是相连的。第二条表示了 $7$ 与 $8$，$8$ 与 $9$，$9$ 与 $10$ 的船是相连的。\n\n第一个操作向第 $4$ 条船的 $1$ 到 $5$ 号士兵发射火箭，因为 $1$ 到 $6$ 号船是相连的，所以 $1$ 到 $6$ 号船上的 $1$ 到 $5$ 号士兵都着火了。\n\n第二个操作询问第一条船的 $2$ 到 $3$ 号是否着火。显然着火了，所以输出 `Yes`。\n\n第三个操作撤回了第一个操作，所以所有士兵操作后都没有着火。\n\n第四个操作询问第一条船的 $2$ 到 $3$ 号是否着火。显然没有着，所以输出 `No`。\n\n第五个操作将十号船的 $[2,7]$ 士兵着火，第六个操作将九号船的 $[3,6]$ 着火。然后第七个操作撤回了第六个操作。注意：目前，第七到十号船的 $[2,7]$ 的士兵是着火的。\n\n第八号操作将七号船的 $[8,13]$ 着火，第九个操作询问是否 $[2,12]$ 全部着火。显然此时已经全部着火了。\n\n#### 【数据范围】\n\n对于全部数据保证：$1 \\le n\\leq 10^9$，$1 \\le m\\leq 5\\times 10^5$，$0 \\le q\\leq 10^5$，$0 \\le s\\leq 200$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 3」War", "background": "《赤壁之战》是一款开放世界冒险游戏，这意味着从你踏入提瓦特的第一刻起，只要合理规划自己的体力，不论翻山越岭、还是横渡江河，总有办法见到新的风景。", "description": "有 $n$ 条船，船编号为 $1$ 至 $n$。每条船上有 $m$ 个士兵，士兵编号为 $1$ 至 $m$。\n\n开始时，有若干组船由铁索相连。具体的关系给出如下：\n\n给出 $s$ 组关系，形如 $l_1,r_1,l_2,r_2$，表示 $\\forall k \\in [0,r_1-l_1]$，第 $l_1+k$ 条船与第 $l_2+k$ 条船相连，保证 $r_1-l_1+1=r_2-l_2+1$ 且 $l_1 < l_2$。\n\n保证 $\\forall p \\in [1,n]$，最多存在一组关系使得 $l_2 \\le p \\le r_2$。\n\n然后有 $q$ 个操作，操作如下（操作按照时间先后顺序编号为 $1 \\sim q$）：\n\n操作 $1$：向编号为 $p$ 的船的 $[L,R]$ 区间的士兵发射一支火箭。这样操作之后，这个区间的所有士兵都会着火。由于铁锁连环的缘故，所有与 $p$ 直接相连或间接相连的船的 $[L,R]$ 区间的士兵都会着火。注意，士兵可能着火多次。\n\n操作 $2$：撤回编号为 $p$ 的操作，保证这个操作必定是操作 $1$。**保证不会多次撤回同一个操作，并且以后的询问都不考虑已经撤销的操作所带来的影响。**\n\n操作 $3$：询问船 $p$ 上区间为 $[L,R]$ 的士兵是否全部着火。如果全部着火请输出 `Yes`，否则输出 `No`。", "inputFormat": "第一行四个整数分别是 $n,m,s,q$，含义如题所示。\n\n接下来 $s$ 行，每行四个整数，表示一个铁索关系。\n\n接下来 $q$ 行，表示操作。\n\n每行第一个整数 $op$ 表示操作种类。\n\n- 若 $op=1$，你需要输入三个整数 $p,L,R$，并按照题目要求执行操作 $1$。\n\n- 若 $op=2$，你需要输入一个整数 $p$，并按照题目要求执行操作 $2$。\n\n- 若 $op=3$，你需要输入三个整数 $p,L,R$，并按照题目要求执行操作 $3$。", "outputFormat": "若干行，表示每个 $3$ 操作的答案。\n\n**温馨提示：全部输出 `No` 或者 `Yes` 会得到 $0\\text{ pts}$ 的高分。**", "hint": "#### 【样例解释 #1】\n\n首先给出了两条关系式，第一条表示了 $1$ 与 $2$，$2$ 与 $3$，$3$ 与 $4$，$4$ 与 $5$，$5$ 与 $6$ 的船是相连的。第二条表示了 $7$ 与 $8$，$8$ 与 $9$，$9$ 与 $10$ 的船是相连的。\n\n第一个操作向第 $4$ 条船的 $1$ 到 $5$ 号士兵发射火箭，因为 $1$ 到 $6$ 号船是相连的，所以 $1$ 到 $6$ 号船上的 $1$ 到 $5$ 号士兵都着火了。\n\n第二个操作询问第一条船的 $2$ 到 $3$ 号是否着火。显然着火了，所以输出 `Yes`。\n\n第三个操作撤回了第一个操作，所以所有士兵操作后都没有着火。\n\n第四个操作询问第一条船的 $2$ 到 $3$ 号是否着火。显然没有着，所以输出 `No`。\n\n第五个操作将十号船的 $[2,7]$ 士兵着火，第六个操作将九号船的 $[3,6]$ 着火。然后第七个操作撤回了第六个操作。注意：目前，第七到十号船的 $[2,7]$ 的士兵是着火的。\n\n第八号操作将七号船的 $[8,13]$ 着火，第九个操作询问是否 $[2,12]$ 全部着火。显然此时已经全部着火了。\n\n#### 【数据范围】\n\n对于全部数据保证：$1 \\le n\\leq 10^9$，$1 \\le m\\leq 5\\times 10^5$，$0 \\le q\\leq 10^5$，$0 \\le s\\leq 200$。", "locale": "zh-CN"}}}
{"pid": "P10131", "type": "P", "difficulty": 2, "samples": [["5\n5\n1 2 2 2 3\n6\n1 2 3 1 2 3\n6\n1 1 1 2 2 2\n3\n3 2 3\n2\n2 1", "2\n-1\n1 2\n3\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "2024", "O2优化"], "title": "[USACO24JAN] Majority Opinion B", "background": "", "description": "Farmer John 有一项重要的任务——弄清楚要为他的奶牛们购买什么类型的干草。\n\nFarmer John 的 $N$ 头奶牛（$2\\le N\\le 10^5$）编号为 $1$ 到 $N$，每头奶牛喜欢恰好一种类型的干草 $h_i$（$1\\le h_i\\le N$）。他希望他的所有奶牛都喜欢同一种干草。\n\n为了实现这一目标，Farmer John 可以主持焦点小组访谈。一次焦点小组访谈为让编号从 $i$ 到 $j$ 的连续范围内的所有奶牛聚集在一起参加一次访谈。如果有一种干草是小组中超过一半的奶牛喜欢的，则此次焦点小组访谈结束后，所有奶牛最终都会喜欢这种干草。如果不存在这种类型的干草，那么奶牛们不会改变她们喜欢的干草类型。例如，在由 $16$ 头奶牛组成的焦点小组访谈中，需要有其中 $9$ 头或更多的奶牛具有相同的干草喜好，才能使其余奶牛改变其喜好以与之一致。\n\nFarmer John 想知道哪些类型的干草有可能变为同时受到所有奶牛的喜爱。他一次只能主持一个焦点小组访谈，但为了使所有奶牛都喜欢同一类型的干草，他可以根据需要任意多次地主持焦点小组访谈。 ", "inputFormat": "输入的第一行包含一个整数 $T$，为独立的测试用例的数量（$1\\le T\\le 10$）。\n\n每一个测试用例的第一行包含 $N$。\n\n第二行包含 $N$ 个整数，为奶牛们喜爱的干草类型 $h_i$。\n\n输入保证所有测试用例的 $N$ 之和不超过 $2\\cdot 10^5$。 ", "outputFormat": "输出 $T$ 行，对于每个测试用例输出一行。\n\n如果可能使所有奶牛同时喜欢同一种干草，则以升序输出所有可能的此类干草的类型，否则输出 $-1$。在同一行内输出一列整数时，相邻的数用空格分隔，并确保行末没有多余空格。 ", "hint": "### 样例解释\n\n在输入样例中，有 5 个测试用例。\n\n在第一个测试用例中，仅可能使所有奶牛喜欢种类 $2$。FJ 可以通过主持一次所有奶牛的焦点小组访谈达到这一目的。\n\n在第二个测试用例中，可以证明没有奶牛会改变她们喜爱的干草种类。\n\n在第三个测试用例中，有可能使所有奶牛喜欢种类 $1$，可以通过主持三次焦点小组访谈达到这一目的——首先使奶牛 $1$ 到 $4$ 进行一次焦点小组访谈，随后使奶牛 $1$ 到 $5$ 进行一次焦点小组访谈，随后使奶牛 $1$ 到 $6$ 进行一次焦点小组访谈。以类似的逻辑，依次操作奶牛 $3$ 到 $6$，随后是奶牛 $2$ 到 $6$，随后是奶牛 $1$ 到 $6$，我们可以使所有奶牛喜欢种类 $2$。\n\n在第四个测试用例中，有可能使所有奶牛喜欢种类 $3$，可以通过主持一次所有奶牛的焦点小组访谈达到这一目的。\n\n在第五个测试用例中，可以证明没有奶牛会改变她们喜爱的干草种类。\n\n### 测试点性质\n\n- 测试点 $2$：$N=2$。\n- 测试点 $3-4$：$N\\le 50$。\n- 测试点 $5-6$：对于所有的 $1\\le i\\le N−1$，有 $h_i\\le h_{i+1}$。\n- 测试点 $7-15$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Majority Opinion B", "background": "", "description": "Farmer John 有一项重要的任务——弄清楚要为他的奶牛们购买什么类型的干草。\n\nFarmer John 的 $N$ 头奶牛（$2\\le N\\le 10^5$）编号为 $1$ 到 $N$，每头奶牛喜欢恰好一种类型的干草 $h_i$（$1\\le h_i\\le N$）。他希望他的所有奶牛都喜欢同一种干草。\n\n为了实现这一目标，Farmer John 可以主持焦点小组访谈。一次焦点小组访谈为让编号从 $i$ 到 $j$ 的连续范围内的所有奶牛聚集在一起参加一次访谈。如果有一种干草是小组中超过一半的奶牛喜欢的，则此次焦点小组访谈结束后，所有奶牛最终都会喜欢这种干草。如果不存在这种类型的干草，那么奶牛们不会改变她们喜欢的干草类型。例如，在由 $16$ 头奶牛组成的焦点小组访谈中，需要有其中 $9$ 头或更多的奶牛具有相同的干草喜好，才能使其余奶牛改变其喜好以与之一致。\n\nFarmer John 想知道哪些类型的干草有可能变为同时受到所有奶牛的喜爱。他一次只能主持一个焦点小组访谈，但为了使所有奶牛都喜欢同一类型的干草，他可以根据需要任意多次地主持焦点小组访谈。 ", "inputFormat": "输入的第一行包含一个整数 $T$，为独立的测试用例的数量（$1\\le T\\le 10$）。\n\n每一个测试用例的第一行包含 $N$。\n\n第二行包含 $N$ 个整数，为奶牛们喜爱的干草类型 $h_i$。\n\n输入保证所有测试用例的 $N$ 之和不超过 $2\\cdot 10^5$。 ", "outputFormat": "输出 $T$ 行，对于每个测试用例输出一行。\n\n如果可能使所有奶牛同时喜欢同一种干草，则以升序输出所有可能的此类干草的类型，否则输出 $-1$。在同一行内输出一列整数时，相邻的数用空格分隔，并确保行末没有多余空格。 ", "hint": "### 样例解释\n\n在输入样例中，有 5 个测试用例。\n\n在第一个测试用例中，仅可能使所有奶牛喜欢种类 $2$。FJ 可以通过主持一次所有奶牛的焦点小组访谈达到这一目的。\n\n在第二个测试用例中，可以证明没有奶牛会改变她们喜爱的干草种类。\n\n在第三个测试用例中，有可能使所有奶牛喜欢种类 $1$，可以通过主持三次焦点小组访谈达到这一目的——首先使奶牛 $1$ 到 $4$ 进行一次焦点小组访谈，随后使奶牛 $1$ 到 $5$ 进行一次焦点小组访谈，随后使奶牛 $1$ 到 $6$ 进行一次焦点小组访谈。以类似的逻辑，依次操作奶牛 $3$ 到 $6$，随后是奶牛 $2$ 到 $6$，随后是奶牛 $1$ 到 $6$，我们可以使所有奶牛喜欢种类 $2$。\n\n在第四个测试用例中，有可能使所有奶牛喜欢种类 $3$，可以通过主持一次所有奶牛的焦点小组访谈达到这一目的。\n\n在第五个测试用例中，可以证明没有奶牛会改变她们喜爱的干草种类。\n\n### 测试点性质\n\n- 测试点 $2$：$N=2$。\n- 测试点 $3-4$：$N\\le 50$。\n- 测试点 $5-6$：对于所有的 $1\\le i\\le N−1$，有 $h_i\\le h_{i+1}$。\n- 测试点 $7-15$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10132", "type": "P", "difficulty": 2, "samples": [["5 2\n0 1\n1 1\n1 2\n0 1\n1 1", "1"], ["6 4\n0 3\n1 1\n1 2\n1 1\n0 1\n1 1", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2024"], "title": "[USACO24JAN] Cannonball B", "background": "", "description": "Bessie 已经精通了变成炮弹并沿着长度为 $N$（$1\\le N\\le 10^5$）的数轴弹跳的艺术，数轴上的位置从左到右编号为 $1,2,\\cdots,N$。她从某个整数位置 $S$（$1\\le S\\le N$）开始，以 $1$ 的起始能量向右弹跳。 如果 Bessie 的能量为 $k$，则她将弹跳至距当前位置向前距离 $k$ 处进行下一次弹跳。\n\n从 $1$ 到 $N$ 的每个整数位置上均有炮击目标或跳板。每个炮击目标和跳板都有一个在 $0$ 到 $N$ 范围内的整数值。一个数值为 $v$ 的跳板会使 Bessie 的能量增加 $v$ 并反转她的方向。一个数值为 $v$ 的炮击目标会当着陆时能量不小于 $v$ 时被击破。着陆在炮击目标上不会改变 Bessie 的能量和方向。被击破的炮击目标将保持击破状态，Bessie 依然可以该炮击目标上弹跳，同样不会改变能量和方向。\n\n如果 Bessie 弹跳无限长的时间或直到她离开数轴，她会击破多少个炮击目标？\n\n如果 Bessie 开始时位于一个她可以击破的炮击目标，她会立刻这样做。类似地，如果 Bessie 开始时位于一个跳板，跳板的效果将在她第一次跳跃之前生效。 ", "inputFormat": "输入的第一行包含 $N$ 和 $S$，其中 $N$ 为数轴的长度，$S$ 为 Bessie 的起始位置。\n\n以下 $N$ 行描述了每一个位置。其中第 $i$ 行包含整数 $q_i$ 和 $v_i$，如果位置 $i$ 上有一个跳板则 $q_i=0$，位置 $i$ 上有一个炮击目标则 $q_i=1$，$v_i$ 是位置 $i$ 上的跳板或炮击目标的数值。 ", "outputFormat": "输出一个整数，为将被击破的炮击目标数量。 ", "hint": "### 样例解释 1\n\nBessie 从坐标 $2$ 开始，这是一个数值为 $1$ 的炮击目标，所以她立刻击破了它。然后她弹跳至坐标 $3$，这是一个数值为 $2$ 的炮击目标，所以她无法击破它。她继续弹跳至坐标 $4$，这改变了她的方向并将她的能量增加了 $1$，达到 $2$。她跳回至坐标 $2$，这是一个已经被击破的炮击目标，所以她继续弹跳。此时，她弹跳至了坐标 $0$，因此她停了下来。她击破了恰好一个炮击目标，位于坐标 $2$。\n\n### 样例解释 2\n\nBessie 经过的路径为 $4\\to 5\\to 3\\to 1\\to 6$，下一次弹跳将会使她离开数轴（$11$）。她依次击破了炮击目标 $4,3,6$。\n\n### 测试点性质\n\n - 测试点 $3-5$：$N\\le 100$。\n - 测试点 $6-10$：$N\\le 1000$。\n - 测试点 $11-20$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Cannonball B", "background": "", "description": "Bessie 已经精通了变成炮弹并沿着长度为 $N$（$1\\le N\\le 10^5$）的数轴弹跳的艺术，数轴上的位置从左到右编号为 $1,2,\\cdots,N$。她从某个整数位置 $S$（$1\\le S\\le N$）开始，以 $1$ 的起始能量向右弹跳。 如果 Bessie 的能量为 $k$，则她将弹跳至距当前位置向前距离 $k$ 处进行下一次弹跳。\n\n从 $1$ 到 $N$ 的每个整数位置上均有炮击目标或跳板。每个炮击目标和跳板都有一个在 $0$ 到 $N$ 范围内的整数值。一个数值为 $v$ 的跳板会使 Bessie 的能量增加 $v$ 并反转她的方向。一个数值为 $v$ 的炮击目标会当着陆时能量不小于 $v$ 时被击破。着陆在炮击目标上不会改变 Bessie 的能量和方向。被击破的炮击目标将保持击破状态，Bessie 依然可以该炮击目标上弹跳，同样不会改变能量和方向。\n\n如果 Bessie 弹跳无限长的时间或直到她离开数轴，她会击破多少个炮击目标？\n\n如果 Bessie 开始时位于一个她可以击破的炮击目标，她会立刻这样做。类似地，如果 Bessie 开始时位于一个跳板，跳板的效果将在她第一次跳跃之前生效。 ", "inputFormat": "输入的第一行包含 $N$ 和 $S$，其中 $N$ 为数轴的长度，$S$ 为 Bessie 的起始位置。\n\n以下 $N$ 行描述了每一个位置。其中第 $i$ 行包含整数 $q_i$ 和 $v_i$，如果位置 $i$ 上有一个跳板则 $q_i=0$，位置 $i$ 上有一个炮击目标则 $q_i=1$，$v_i$ 是位置 $i$ 上的跳板或炮击目标的数值。 ", "outputFormat": "输出一个整数，为将被击破的炮击目标数量。 ", "hint": "### 样例解释 1\n\nBessie 从坐标 $2$ 开始，这是一个数值为 $1$ 的炮击目标，所以她立刻击破了它。然后她弹跳至坐标 $3$，这是一个数值为 $2$ 的炮击目标，所以她无法击破它。她继续弹跳至坐标 $4$，这改变了她的方向并将她的能量增加了 $1$，达到 $2$。她跳回至坐标 $2$，这是一个已经被击破的炮击目标，所以她继续弹跳。此时，她弹跳至了坐标 $0$，因此她停了下来。她击破了恰好一个炮击目标，位于坐标 $2$。\n\n### 样例解释 2\n\nBessie 经过的路径为 $4\\to 5\\to 3\\to 1\\to 6$，下一次弹跳将会使她离开数轴（$11$）。她依次击破了炮击目标 $4,3,6$。\n\n### 测试点性质\n\n - 测试点 $3-5$：$N\\le 100$。\n - 测试点 $6-10$：$N\\le 1000$。\n - 测试点 $11-20$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10133", "type": "P", "difficulty": 3, "samples": [["2\n-1 3", "6"], ["5\n1 3 -2 -7 5", "26"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2024", "差分"], "title": "[USACO24JAN] Balancing Bacteria B", "background": "", "description": "Farmer John 有 $N$（$1\\le N\\le 2\\cdot 10^5$）块草地排成一行，其中草地 $i$ 的细菌水平与健康草的细菌水平相差 $a_i$（$−10^{15}\\le a_i\\le 10^{15}$）。例如，如果 $a_i=−3$，则草地 $i$ 的细菌水平比正常水平低 $3$，需要额外添加恰好 $3$ 个单位的细菌才能将其提高到被认为是健康的程度。\n\nFarmer John 想要确保每一块草地都被修复至健康的细菌水平。方便的是，他有两种品牌的农药可以喷洒在他的田地里，一种可以添加细菌，另一种可以去除细菌。当 Farmer John 喷洒任一类型的农药时，他站在草地 $N$（最右边的草地）并为他的喷雾器选择功率等级 $L$（$1\\le L\\le N$）。\n\n喷雾器对靠近 Farmer John 的草地效果最大，随着距离增加效果逐渐减弱。如果 Farmer John 选择添加细菌的农药，则 $L$ 单位的细菌将被添加至草地 $N$，$L−1$ 单位添加至草地 $N−1$，$L−2$ 单位添加至草地 $N−2$，以此类推。草地 $1\\ldots N−L$ 不会得到任何细菌，因为喷雾器设置的功率不足以到达它们。类似地，如果 Farmer John 选择去除细菌的农药，则 $L$ 单位的细菌将被从草地 $N$ 去除，$L−1$ 单位被从草地 $N−1$ 去除，以此类推。同样，草地 $1\\ldots N−L$ 将不受影响。\n\n求 Farmer John 使用喷雾器的最少次数，使得每块草地都具有健康草的推荐细菌值。输入保证答案不超过 $10^9$。\n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 \"long long\"）。**", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个整数 $a_1\\ldots a_N$，为每块草地的初始细菌水平。 ", "outputFormat": "输出一个整数，为使每块草地都具有健康草的推荐的细菌值所需使用喷雾器的最少次数。 ", "hint": "### 样例解释 1\n\n使用去除细菌的农药，功率等级为 $1$，使用五次。然后使用添加细菌的农药，功率等级为 $2$，使用一次。\n\n### 测试点性质\n\n- 测试点 $3-5$：$N\\le 10^3$，答案不超过 $10^3$。\n- 测试点 $6-10$：$N\\le 10^3$。\n- 测试点 $11-15$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Balancing Bacteria B", "background": "", "description": "Farmer John 有 $N$（$1\\le N\\le 2\\cdot 10^5$）块草地排成一行，其中草地 $i$ 的细菌水平与健康草的细菌水平相差 $a_i$（$−10^{15}\\le a_i\\le 10^{15}$）。例如，如果 $a_i=−3$，则草地 $i$ 的细菌水平比正常水平低 $3$，需要额外添加恰好 $3$ 个单位的细菌才能将其提高到被认为是健康的程度。\n\nFarmer John 想要确保每一块草地都被修复至健康的细菌水平。方便的是，他有两种品牌的农药可以喷洒在他的田地里，一种可以添加细菌，另一种可以去除细菌。当 Farmer John 喷洒任一类型的农药时，他站在草地 $N$（最右边的草地）并为他的喷雾器选择功率等级 $L$（$1\\le L\\le N$）。\n\n喷雾器对靠近 Farmer John 的草地效果最大，随着距离增加效果逐渐减弱。如果 Farmer John 选择添加细菌的农药，则 $L$ 单位的细菌将被添加至草地 $N$，$L−1$ 单位添加至草地 $N−1$，$L−2$ 单位添加至草地 $N−2$，以此类推。草地 $1\\ldots N−L$ 不会得到任何细菌，因为喷雾器设置的功率不足以到达它们。类似地，如果 Farmer John 选择去除细菌的农药，则 $L$ 单位的细菌将被从草地 $N$ 去除，$L−1$ 单位被从草地 $N−1$ 去除，以此类推。同样，草地 $1\\ldots N−L$ 将不受影响。\n\n求 Farmer John 使用喷雾器的最少次数，使得每块草地都具有健康草的推荐细菌值。输入保证答案不超过 $10^9$。\n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 \"long long\"）。**", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个整数 $a_1\\ldots a_N$，为每块草地的初始细菌水平。 ", "outputFormat": "输出一个整数，为使每块草地都具有健康草的推荐的细菌值所需使用喷雾器的最少次数。 ", "hint": "### 样例解释 1\n\n使用去除细菌的农药，功率等级为 $1$，使用五次。然后使用添加细菌的农药，功率等级为 $2$，使用一次。\n\n### 测试点性质\n\n- 测试点 $3-5$：$N\\le 10^3$，答案不超过 $10^3$。\n- 测试点 $6-10$：$N\\le 10^3$。\n- 测试点 $11-15$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10134", "type": "P", "difficulty": 4, "samples": [["1\n7 3 5\n1 0 2 3 0 4 0\n1 2\n3 4\n4 5", "1 2 2 3 4 4 1"], ["5\n7 6 10\n0 0 0 0 0 0 0\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n8 4 9\n0 0 0 0 1 6 0 6\n1 3\n6 7\n4 7\n2 3\n2 1 1\n0 0\n1 2\n10 4 10\n1 2 0 2 1 5 8 6 0 3\n4 7\n1 2\n5 7\n3 7\n10 2 8\n1 0 0 0 0 5 7 0 0 0\n4 6\n6 9", "1 2 3 4 5 6 7\n1 1 2 6 1 6 7 6\n-1\n1 2 5 2 1 5 8 6 1 3\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "线段树", "USACO", "2024", "排序"], "title": "[USACO24JAN] Cowmpetency S", "background": "", "description": "Farmer John 正在为他的奶牛们雇用一位新的牛群领队。为此，他面试了 $N$（$2\\le N\\le 10^5$）头奶牛来担任该职位。在面试第 $i$ 个候选牛后，他会为候选牛分配一个 $1$ 到 $C$（$1\\le C\\le 10^9$）范围内的整数「牲任力」分数 $c_i$，与她们的领导能力相关。\n\n由于 Farmer John 面试了如此多的奶牛，他没能记得所有奶牛的牲任力分数。然而，他确实记得 $Q$（$1\\le Q<N$）对数字 $(a_j,h_j)$，其中奶牛 $h_j$ 是第一头比奶牛 $1$ 到 $a_j$ 拥有严格更高牲任力分数的奶牛（所以 $1\\le a_j<h_j\\le N$）。\n\nFarmer John 现在告诉你序列 $c_1,\\ldots,c_N$\n（其中 $c_i=0$ 表示他忘记了奶牛 $i$ 的牲任力分数）和 $Q$ 对 $(a_j,h_j)$。帮助他求出与此信息一致的最小字典序的牲任力分数序列，或者判断不存在这样的序列！如果一个分数序列比另一个分数序列于这两个序列不同的第一个位置上的奶牛分配了更小的分数，则这个分数序列的字典序更小。\n\n每个测试点包含 $T$（$1\\le T\\le 20$）个独立的测试用例。输入保证所有测试用例的 $N$ 之和不超过 $3\\cdot 10^5$。 ", "inputFormat": "输入的第一行包含 $T$，独立的测试用例的数量。每个测试用例描述如下：\n\n 1. 第一行包含 $N$，$Q$ 和 $C$。\n 2. 第二行包含序列 $c_1,\\ldots,c_N$（$0\\le c_i\\le C$）。\n 3. 最后 $Q$ 行，每行包含一个数对 $(a_j,h_j)$。输入保证同一测试用例内的所有 $a_j$ 各不相同。", "outputFormat": " 对于每个测试用例，输出一行，包含与 Farmer John 记忆一致的最小字典序牲任力分数序列，或者如果这样的序列不存在时输出 $−1$。", "hint": "### 样例解释 1\n\n我们可以看到给定的输出满足所有 Farmer John 记得的数对。\n\n- $\\max(c_1)=1$，$c_2=2$ 且 $1<2$，故第一个数对是满足的\n- $\\max(c_1,c_2,c_3)=2$，$c_4=3$ 且 $2<3$，故第二个数对是满足的\n- $\\max(c_1,c_2,c_3,c_4)=3$，$c_5=4$ 且 $3<4$，故第三个数对是满足的\n\n存在一些其他的序列与 Farmer John 的记忆相一致，如\n\n$1\\ 2\\ 2\\ 3\\ 5\\ 4\\ 1$  \n$1\\ 2\\ 2\\ 3\\ 4\\ 4\\ 5$\n\n然而，其中没有序列比给定的输出字典序更小。 \n\n### 样例解释 2\n\n在测试用例 $3$ 中，由于 $C=1$，唯一可能的序列是\n\n$1\\ 1$\n\n然而，在这种情况下，奶牛 $2$ 的分数并不比奶牛 $1$ 高，因此我们无法满足条件。\n\n在测试用例 $5$ 中，$a_1$ 和 $h_1$ 告诉我们奶牛 $6$ 是第一头分数严格高于奶牛 $1$ 到 $4$ 的奶牛。因此，奶牛 $1$ 到 $6$ 的最高得分是奶牛 $6$，为 $5$。由于奶牛 $7$ 的分数为 $7$，所以奶牛 $7$ 是第一头比奶牛 $1$ 到 $6$ 得分更高的奶牛。因此，第二个陈述「奶牛 $9$ 是第一头比奶牛 $1$ 到 $6$ 得分更高的奶牛」不能成立。 \n\n### 测试点性质\n\n - 测试点 $3$：$N \\le 10$ 且 $Q,C\\le 4$。\n - 测试点 $4-8$：$N\\le 1000$。\n - 测试点 $9-12$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Cowmpetency S", "background": "", "description": "Farmer John 正在为他的奶牛们雇用一位新的牛群领队。为此，他面试了 $N$（$2\\le N\\le 10^5$）头奶牛来担任该职位。在面试第 $i$ 个候选牛后，他会为候选牛分配一个 $1$ 到 $C$（$1\\le C\\le 10^9$）范围内的整数「牲任力」分数 $c_i$，与她们的领导能力相关。\n\n由于 Farmer John 面试了如此多的奶牛，他没能记得所有奶牛的牲任力分数。然而，他确实记得 $Q$（$1\\le Q<N$）对数字 $(a_j,h_j)$，其中奶牛 $h_j$ 是第一头比奶牛 $1$ 到 $a_j$ 拥有严格更高牲任力分数的奶牛（所以 $1\\le a_j<h_j\\le N$）。\n\nFarmer John 现在告诉你序列 $c_1,\\ldots,c_N$\n（其中 $c_i=0$ 表示他忘记了奶牛 $i$ 的牲任力分数）和 $Q$ 对 $(a_j,h_j)$。帮助他求出与此信息一致的最小字典序的牲任力分数序列，或者判断不存在这样的序列！如果一个分数序列比另一个分数序列于这两个序列不同的第一个位置上的奶牛分配了更小的分数，则这个分数序列的字典序更小。\n\n每个测试点包含 $T$（$1\\le T\\le 20$）个独立的测试用例。输入保证所有测试用例的 $N$ 之和不超过 $3\\cdot 10^5$。 ", "inputFormat": "输入的第一行包含 $T$，独立的测试用例的数量。每个测试用例描述如下：\n\n 1. 第一行包含 $N$，$Q$ 和 $C$。\n 2. 第二行包含序列 $c_1,\\ldots,c_N$（$0\\le c_i\\le C$）。\n 3. 最后 $Q$ 行，每行包含一个数对 $(a_j,h_j)$。输入保证同一测试用例内的所有 $a_j$ 各不相同。", "outputFormat": " 对于每个测试用例，输出一行，包含与 Farmer John 记忆一致的最小字典序牲任力分数序列，或者如果这样的序列不存在时输出 $−1$。", "hint": "### 样例解释 1\n\n我们可以看到给定的输出满足所有 Farmer John 记得的数对。\n\n- $\\max(c_1)=1$，$c_2=2$ 且 $1<2$，故第一个数对是满足的\n- $\\max(c_1,c_2,c_3)=2$，$c_4=3$ 且 $2<3$，故第二个数对是满足的\n- $\\max(c_1,c_2,c_3,c_4)=3$，$c_5=4$ 且 $3<4$，故第三个数对是满足的\n\n存在一些其他的序列与 Farmer John 的记忆相一致，如\n\n$1\\ 2\\ 2\\ 3\\ 5\\ 4\\ 1$  \n$1\\ 2\\ 2\\ 3\\ 4\\ 4\\ 5$\n\n然而，其中没有序列比给定的输出字典序更小。 \n\n### 样例解释 2\n\n在测试用例 $3$ 中，由于 $C=1$，唯一可能的序列是\n\n$1\\ 1$\n\n然而，在这种情况下，奶牛 $2$ 的分数并不比奶牛 $1$ 高，因此我们无法满足条件。\n\n在测试用例 $5$ 中，$a_1$ 和 $h_1$ 告诉我们奶牛 $6$ 是第一头分数严格高于奶牛 $1$ 到 $4$ 的奶牛。因此，奶牛 $1$ 到 $6$ 的最高得分是奶牛 $6$，为 $5$。由于奶牛 $7$ 的分数为 $7$，所以奶牛 $7$ 是第一头比奶牛 $1$ 到 $6$ 得分更高的奶牛。因此，第二个陈述「奶牛 $9$ 是第一头比奶牛 $1$ 到 $6$ 得分更高的奶牛」不能成立。 \n\n### 测试点性质\n\n - 测试点 $3$：$N \\le 10$ 且 $Q,C\\le 4$。\n - 测试点 $4-8$：$N\\le 1000$。\n - 测试点 $9-12$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10135", "type": "P", "difficulty": 3, "samples": [["5\n5 4 3 2 1\n1 2\n1 3\n3 4\n3 5", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2024", "树形 DP"], "title": "[USACO24JAN] Potion Farming S", "background": "", "description": "你正在玩你最喜欢的手机游戏。为了有机会击败传说中的奶牛 Boss，你正在试着刷药水。游戏地图是由 $N$（$2\\le N\\le 10^5$）个编号为 $1\\ldots N$ 的房间组成，由 $N−1$ 条边连接，形成一棵树。\n\n你可以通过一系列的「遍历」来探索地图。一次遍历是从房间 $1$ 到树中任何其他房间的一条简单路径。当你完成一次遍历后，你可以从房间 $1$ 再次开始遍历。一旦地图的每个房间都被至少一次遍历访问过，这个地图就通关了。你的主要目标是以最小的遍历次数通关这一地图。\n\n你的次要目标是刷到尽可能多的药水。在一次遍历开始前，地图上的某个房间内会生成一瓶药水。你可以通过在当次遍历中访问生成药水的房间来拾取药水。如果你没有拾取药水，那么当次遍历结束它就会消失，你无法在未来的遍历中拾取它。\n\n由于你是一位聪明的程序员，在查看游戏文件后，你成功知道了在接下来的 $N$ 次遍历之前药水的出现位置。如果你以最小的遍历次数通关地图，你可以从地图内刷到的最大药水数量是多少？ ", "inputFormat": "输入的第一行包含一个整数 $N$，为地图内的房间数量。\n\n以下一行包含 $N$ 个空格分隔的整数 $p_1p_2\\ldots p_N$，其中 $p_i$ 为第 $i$ 次遍历之前药水出现的房间。\n\n最后 $N−1$ 行每行包含两个空格分隔的整数 $a\\ b$（$1\\le a,b\\le N$），表示房间 $a$ 和 $b$ 之间的一条边。输入保证所有边形成一棵树。", "outputFormat": "输出一行，包含一个整数，为以最小的遍历次数可以从地图内刷到的最大药水数量。 ", "hint": "### 样例解释 1\n\n在这个测试用例中，通关地图所需的最小遍历次数为 $3$。\n\n一个在三次遍历中拾取两瓶药水的最佳方案如下：\n\n- 遍历 $1$：$1\\to 3\\to 5$（于房间 $5$ 拾取药水）\n- 遍历 $2$：$1\\to 3\\to 4$（于房间 $4$ 拾取药水）\n- 遍历 $3$：$1\\to 2$（被迫通关地图，无视房间 $3$ 的药水）\n\n或者，我们也可以计划我们的遍历如下：\n\n- 遍历 $1$：$1\\to 2$（没有药水）\n- 遍历 $2$：$1\\to 3\\to 4$（于房间 $4$ 拾取药水）\n- 遍历 $3$：$1\\to 3\\to 5$（于房间 $3$ 拾取药水）\n\n### 测试点性质\n\n- 测试点 $2-7$：$N\\le 1000$。\n- 测试点 $8-15$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Potion Farming S", "background": "", "description": "你正在玩你最喜欢的手机游戏。为了有机会击败传说中的奶牛 Boss，你正在试着刷药水。游戏地图是由 $N$（$2\\le N\\le 10^5$）个编号为 $1\\ldots N$ 的房间组成，由 $N−1$ 条边连接，形成一棵树。\n\n你可以通过一系列的「遍历」来探索地图。一次遍历是从房间 $1$ 到树中任何其他房间的一条简单路径。当你完成一次遍历后，你可以从房间 $1$ 再次开始遍历。一旦地图的每个房间都被至少一次遍历访问过，这个地图就通关了。你的主要目标是以最小的遍历次数通关这一地图。\n\n你的次要目标是刷到尽可能多的药水。在一次遍历开始前，地图上的某个房间内会生成一瓶药水。你可以通过在当次遍历中访问生成药水的房间来拾取药水。如果你没有拾取药水，那么当次遍历结束它就会消失，你无法在未来的遍历中拾取它。\n\n由于你是一位聪明的程序员，在查看游戏文件后，你成功知道了在接下来的 $N$ 次遍历之前药水的出现位置。如果你以最小的遍历次数通关地图，你可以从地图内刷到的最大药水数量是多少？ ", "inputFormat": "输入的第一行包含一个整数 $N$，为地图内的房间数量。\n\n以下一行包含 $N$ 个空格分隔的整数 $p_1p_2\\ldots p_N$，其中 $p_i$ 为第 $i$ 次遍历之前药水出现的房间。\n\n最后 $N−1$ 行每行包含两个空格分隔的整数 $a\\ b$（$1\\le a,b\\le N$），表示房间 $a$ 和 $b$ 之间的一条边。输入保证所有边形成一棵树。", "outputFormat": "输出一行，包含一个整数，为以最小的遍历次数可以从地图内刷到的最大药水数量。 ", "hint": "### 样例解释 1\n\n在这个测试用例中，通关地图所需的最小遍历次数为 $3$。\n\n一个在三次遍历中拾取两瓶药水的最佳方案如下：\n\n- 遍历 $1$：$1\\to 3\\to 5$（于房间 $5$ 拾取药水）\n- 遍历 $2$：$1\\to 3\\to 4$（于房间 $4$ 拾取药水）\n- 遍历 $3$：$1\\to 2$（被迫通关地图，无视房间 $3$ 的药水）\n\n或者，我们也可以计划我们的遍历如下：\n\n- 遍历 $1$：$1\\to 2$（没有药水）\n- 遍历 $2$：$1\\to 3\\to 4$（于房间 $4$ 拾取药水）\n- 遍历 $3$：$1\\to 3\\to 5$（于房间 $3$ 拾取药水）\n\n### 测试点性质\n\n- 测试点 $2-7$：$N\\le 1000$。\n- 测试点 $8-15$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10136", "type": "P", "difficulty": 5, "samples": [["12\n31 28 31 30 31 30 31 31 30 31 30 31", "28"], ["4\n31 35 28 29", "23"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2024", "数论", "鸽笼原理"], "title": "[USACO24JAN] Cowlendar S", "background": "", "description": "Bessie 在一个陌生的星球上醒来。这个星球上有 $N$（$1\\le N\\le 10^4$）个月，分别有 $a_1,\\ldots,a_N$ 天（$1\\le a_i\\le 4\\cdot 10^9$，所有 $a_i$ 均为整数）。此外，这个星球上还存在周，一周为 $L$ 天，其中 $L$ 是一个正整数。有趣的是，Bessie 知道以下事情：\n\n- 对于正确的 $L$，每个月至少有 $4$ 周。\n- 对于正确的 $L$，$a_i\\bmod L$ 至多有 $3$ 个不同值。\n\n不幸的是，Bessie 忘记了 $L$ 是多少！请通过输出 $L$ 的所有可能值之和来帮助她。\n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 \"long long\"）。**", "inputFormat": "输入的第一行包含一个整数 $N$。第二行包含 $N$ 个空格分隔的整数 $a_1,\\ldots,a_N$。", "outputFormat": "输出一个整数，为 $L$ 的所有可能值之和。", "hint": "### 样例解释 1\n\n$L$ 的可能值为 $1$，$2$，$3$，$4$，$5$，$6$ 和 $7$。例如，$L=7$ 是合法的，因为每个月的至少有 $4\\cdot 7=28$ 天，且每个月的天数模 $7$ 的余数均为 $0$，$2$ 或 $3$。\n\n### 样例解释 2\n\n$L$ 的可能值为 $1$，$2$，$3$，$4$，$6$ 和 $7$。例如，$L=6$ 是合法的，因为每个月的至少有 $4\\cdot 6=24$ 天，且每个月的天数模 $6$ 的余数均为 $1$，$4$ 或 $5$。\n\n### 测试点性质\n\n- 测试点 $3-4$：$1\\le a_i\\le 10^6$。\n- 测试点 $5-14$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Cowlendar S", "background": "", "description": "Bessie 在一个陌生的星球上醒来。这个星球上有 $N$（$1\\le N\\le 10^4$）个月，分别有 $a_1,\\ldots,a_N$ 天（$1\\le a_i\\le 4\\cdot 10^9$，所有 $a_i$ 均为整数）。此外，这个星球上还存在周，一周为 $L$ 天，其中 $L$ 是一个正整数。有趣的是，Bessie 知道以下事情：\n\n- 对于正确的 $L$，每个月至少有 $4$ 周。\n- 对于正确的 $L$，$a_i\\bmod L$ 至多有 $3$ 个不同值。\n\n不幸的是，Bessie 忘记了 $L$ 是多少！请通过输出 $L$ 的所有可能值之和来帮助她。\n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 \"long long\"）。**", "inputFormat": "输入的第一行包含一个整数 $N$。第二行包含 $N$ 个空格分隔的整数 $a_1,\\ldots,a_N$。", "outputFormat": "输出一个整数，为 $L$ 的所有可能值之和。", "hint": "### 样例解释 1\n\n$L$ 的可能值为 $1$，$2$，$3$，$4$，$5$，$6$ 和 $7$。例如，$L=7$ 是合法的，因为每个月的至少有 $4\\cdot 7=28$ 天，且每个月的天数模 $7$ 的余数均为 $0$，$2$ 或 $3$。\n\n### 样例解释 2\n\n$L$ 的可能值为 $1$，$2$，$3$，$4$，$6$ 和 $7$。例如，$L=6$ 是合法的，因为每个月的至少有 $4\\cdot 6=24$ 天，且每个月的天数模 $6$ 的余数均为 $1$，$4$ 或 $5$。\n\n### 测试点性质\n\n- 测试点 $3-4$：$1\\le a_i\\le 10^6$。\n- 测试点 $5-14$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10137", "type": "P", "difficulty": 5, "samples": [["4 5\nV 7\nH 4\nH 5\nV 6\n6 3 10\n6 4 10\n6 5 10\n6 6 10\n100 4 10", "14 5\n7 13\n6 15\n6 16\n110 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["倍增", "USACO", "2024", "Ad-hoc", "分类讨论"], "title": "[USACO24JAN] Walking in Manhattan G", "background": null, "description": "Farmer John 和他的 $Q$（$1\\le Q\\le 2\\cdot 10^5$）头奶牛在曼哈顿度假，但奶牛们逃跑了，现在正在城市里自由走动！曼哈顿很大——大到它的 $N$（$1\\le N\\le 2\\cdot 10^5$）条道路在 $x-y$ 平面上无限延伸，但简单的是，这些道路都完全水平或垂直。每条水平和垂直道路都可以用形式为 $y=c_i$ 或 $x=c_i$ 的方程表示，其中 $c_i$ 是 $0$ 到 $10^9$ 范围内的整数。\n\nFarmer John 准确地知道每头奶牛从哪里开始行走，以及她们多久之前逃跑的。奶牛们很容易被预测，因此每头奶牛都是按照以下模式行走：\n\n- 她们只会以每秒一个单位的速度向北（$+y$）或向东（$+x$）行走。\n- 如果她们当前在一条道路上，她们会继续沿着道路的方向行走。\n- 如果她们在两条道路的交叉口处，如果她们行走了偶数秒，则向北行走，否则向东行走。\n\n给定曼哈顿的布局以及每头奶牛的信息，帮助 Farmer John 求出他的奶牛们现在在哪里！", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n以下 $N$ 行描述道路。每条道路由方向（`H` 代表东西向，`V` 代表南北向）和坐标 $c_i$ 表示。输入保证道路各不相同。\n\n以下 $Q$ 行描述奶牛。每头奶牛由三个整数 $(x_i,y_i,d_i)$ 表示，意味着她们在 $d_i$ 秒前从 $(x_i,y_i)$ 开始行走。输入保证 $(x_i,y_i)$ 位于某条道路上，且 $0\\le x_i,y_i,d_i\\le 10^9$。", "outputFormat": "输出 $Q$ 行，其中第 $i$ 行包含第 $i$ 头奶牛当前的位置。", "hint": "### 样例解释 1\n\n前两头奶牛经过的路径如下：\n\n$(6, 3) \\to (6, 4) \\to (7, 4) \\to (7, 5) \\to (8, 5) \\to \\ldots \\to (14, 5)$  \n$(6, 4) \\to (6, 5) \\to (7, 5) \\to (7, 6) \\to \\ldots \\to (7, 13)$\n\n### 测试点性质\n\n- 测试点 $2-4$：$N,Q,c_i,x_i,y_i,d_i\\le 100$。\n- 测试点 $5-9$：$N,Q\\le 3000$。\n- 测试点 $10-20$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Walking in Manhattan G", "background": null, "description": "Farmer John 和他的 $Q$（$1\\le Q\\le 2\\cdot 10^5$）头奶牛在曼哈顿度假，但奶牛们逃跑了，现在正在城市里自由走动！曼哈顿很大——大到它的 $N$（$1\\le N\\le 2\\cdot 10^5$）条道路在 $x-y$ 平面上无限延伸，但简单的是，这些道路都完全水平或垂直。每条水平和垂直道路都可以用形式为 $y=c_i$ 或 $x=c_i$ 的方程表示，其中 $c_i$ 是 $0$ 到 $10^9$ 范围内的整数。\n\nFarmer John 准确地知道每头奶牛从哪里开始行走，以及她们多久之前逃跑的。奶牛们很容易被预测，因此每头奶牛都是按照以下模式行走：\n\n- 她们只会以每秒一个单位的速度向北（$+y$）或向东（$+x$）行走。\n- 如果她们当前在一条道路上，她们会继续沿着道路的方向行走。\n- 如果她们在两条道路的交叉口处，如果她们行走了偶数秒，则向北行走，否则向东行走。\n\n给定曼哈顿的布局以及每头奶牛的信息，帮助 Farmer John 求出他的奶牛们现在在哪里！", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n以下 $N$ 行描述道路。每条道路由方向（`H` 代表东西向，`V` 代表南北向）和坐标 $c_i$ 表示。输入保证道路各不相同。\n\n以下 $Q$ 行描述奶牛。每头奶牛由三个整数 $(x_i,y_i,d_i)$ 表示，意味着她们在 $d_i$ 秒前从 $(x_i,y_i)$ 开始行走。输入保证 $(x_i,y_i)$ 位于某条道路上，且 $0\\le x_i,y_i,d_i\\le 10^9$。", "outputFormat": "输出 $Q$ 行，其中第 $i$ 行包含第 $i$ 头奶牛当前的位置。", "hint": "### 样例解释 1\n\n前两头奶牛经过的路径如下：\n\n$(6, 3) \\to (6, 4) \\to (7, 4) \\to (7, 5) \\to (8, 5) \\to \\ldots \\to (14, 5)$  \n$(6, 4) \\to (6, 5) \\to (7, 5) \\to (7, 6) \\to \\ldots \\to (7, 13)$\n\n### 测试点性质\n\n- 测试点 $2-4$：$N,Q,c_i,x_i,y_i,d_i\\le 100$。\n- 测试点 $5-9$：$N,Q\\le 3000$。\n- 测试点 $10-20$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10138", "type": "P", "difficulty": 5, "samples": [["6 2 3\n2 3\n4 5", "6"], ["10 1 20\n1 3", "399988086"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2024", "动态规划优化", "前缀和"], "title": "[USACO24JAN] Cowmpetency G", "background": null, "description": "Farmer John 正在为他的奶牛们雇用一位新的牛群领队。为此，他面试了 $N$（$2\\le N\\le 10^9$）头奶牛来担任该职位。在每次面试后，他会为候选牛分配一个 $1$ 到 $C$（$1\\le C\\le 10^4$）范围内的整数「牲任力」分数 $c_i$，与她们的领导能力相关。\n\n由于 Farmer John 面试了如此多的奶牛，他已经忘记了所有奶牛的牲任力分数。然而，他确实记得 $Q$\n（$1\\le Q\\le \\min(N-1,100)$）对数字 $(a_i,h_i)$，其中奶牛 $h_i$ 是第一头比奶牛 $1$ 到 $a_i$ 拥有**严格**更高牲任力分数的奶牛（所以 $1\\le a_i<h_i\\le N$）。\n\nFarmer John 现在告诉你这 $Q$ 个数对 $(a_i,h_i)$。请帮助他数一下有多少个牲任力分数序列与此信息一致！输入保证存在至少一个这样的序列。由于这个数字可能非常大，输出该值模 $10^9+7$ 的余数。", "inputFormat": "输入的第一行包含 $N$，$Q$ 和 $C$。\n\n以下 $Q$ 行，每行包含一个数对 $(a_i,h_i)$。输入保证所有 $a_i$ 各不相同。", "outputFormat": "输出与 Farmer John 记忆一致的牲任力分数序列的数量，对 $10^9+7$ 取模。", "hint": "### 样例解释 1\n\n以下六个序列是仅有的与 Farmer John 记忆一致的序列：\n\n$1\\ 1\\ 2\\ 1\\ 3\\ 1$  \n$1\\ 1\\ 2\\ 1\\ 3\\ 2$  \n$1\\ 1\\ 2\\ 1\\ 3\\ 3$  \n$1\\ 1\\ 2\\ 2\\ 3\\ 1$  \n$1\\ 1\\ 2\\ 2\\ 3\\ 2$  \n$1\\ 1\\ 2\\ 2\\ 3\\ 3$  \n\n### 样例解释 2\n\n确保输出答案对 $10^9+7$ 取模。\n\n### 测试点性质\n\n- 测试点 $3-4$：$N\\le 10$ 且 $Q,C\\le 4$。\n- 测试点 $5-7$：$N,C\\le 100$。\n- 测试点 $8-10$：$N\\le 2000$ 且 $C\\le 200$。\n- 测试点 $11-15$：$N,C\\le 5000$。\n- 测试点 $16-20$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Cowmpetency G", "background": null, "description": "Farmer John 正在为他的奶牛们雇用一位新的牛群领队。为此，他面试了 $N$（$2\\le N\\le 10^9$）头奶牛来担任该职位。在每次面试后，他会为候选牛分配一个 $1$ 到 $C$（$1\\le C\\le 10^4$）范围内的整数「牲任力」分数 $c_i$，与她们的领导能力相关。\n\n由于 Farmer John 面试了如此多的奶牛，他已经忘记了所有奶牛的牲任力分数。然而，他确实记得 $Q$\n（$1\\le Q\\le \\min(N-1,100)$）对数字 $(a_i,h_i)$，其中奶牛 $h_i$ 是第一头比奶牛 $1$ 到 $a_i$ 拥有**严格**更高牲任力分数的奶牛（所以 $1\\le a_i<h_i\\le N$）。\n\nFarmer John 现在告诉你这 $Q$ 个数对 $(a_i,h_i)$。请帮助他数一下有多少个牲任力分数序列与此信息一致！输入保证存在至少一个这样的序列。由于这个数字可能非常大，输出该值模 $10^9+7$ 的余数。", "inputFormat": "输入的第一行包含 $N$，$Q$ 和 $C$。\n\n以下 $Q$ 行，每行包含一个数对 $(a_i,h_i)$。输入保证所有 $a_i$ 各不相同。", "outputFormat": "输出与 Farmer John 记忆一致的牲任力分数序列的数量，对 $10^9+7$ 取模。", "hint": "### 样例解释 1\n\n以下六个序列是仅有的与 Farmer John 记忆一致的序列：\n\n$1\\ 1\\ 2\\ 1\\ 3\\ 1$  \n$1\\ 1\\ 2\\ 1\\ 3\\ 2$  \n$1\\ 1\\ 2\\ 1\\ 3\\ 3$  \n$1\\ 1\\ 2\\ 2\\ 3\\ 1$  \n$1\\ 1\\ 2\\ 2\\ 3\\ 2$  \n$1\\ 1\\ 2\\ 2\\ 3\\ 3$  \n\n### 样例解释 2\n\n确保输出答案对 $10^9+7$ 取模。\n\n### 测试点性质\n\n- 测试点 $3-4$：$N\\le 10$ 且 $Q,C\\le 4$。\n- 测试点 $5-7$：$N,C\\le 100$。\n- 测试点 $8-10$：$N\\le 2000$ 且 $C\\le 200$。\n- 测试点 $11-15$：$N,C\\le 5000$。\n- 测试点 $16-20$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10139", "type": "P", "difficulty": 4, "samples": [["4\n5\n1 2 4 5 100000000000\n5\n17 53 4 33 44\n4\n3 5 5 5\n6\n2 5 100 1 4 5", "6\n15\n5\n6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["二分", "USACO", "2024"], "title": "[USACO24JAN] Nap Sort G", "background": "", "description": "Bessie 正在尝试使用她自己的排序算法对一个整数数组进行排序。她有一堆共 $N$（$1\\le N\\le 2\\cdot 10^5$）个整数 $a_1,a_2,\\ldots,a_N$（$1\\le a_i\\le 10^{11}$），她将会按排序顺序将这些数放入一个单独的数组中。她反复查找这堆数中的最小数，将其删除，同时将其添加到数组的末尾。Bessie 在 $p$ 个数的堆中找到最小数需要花费 $p$ 秒。\n\nFarmer John 命令了农场中其他一些奶牛帮助 Bessie 完成任务，她们很懒，然而 Bessie 利用了这一点。她将整数分成两堆：Bessie 堆和助手堆。对于 Bessie 堆中的每个整数，她会正常执行她的算法。对于助手堆中的每个整数，她将其分配给不同的助手奶牛。Farmer John 有一个很大的农场，所以 Bessie 可以找来任意多的助手奶牛。如果助手收到整数 $a_i$，Bessie 会指示该牛小睡 $a_i$ 秒，并在她们醒来时立即将该整数添加到数组末尾。如果 Bessie 和一个助手同时向数组添加整数，Bessie 的整数将优先被添加，因为她是领导者。如果多个助手被分配了相同的整数，她们会同时将多个该整数添加到数组中。\n\n请帮助 Bessie 划分她的数，使得最终得到的数组是排序的，并使得排序该数组所需的时间最少。 ", "inputFormat": "输入的第一行包含 $T$，为独立的测试用例的数量（$1\\le T\\le 10$）。\n\n每个测试用例的格式如下：\n\n每个测试用例的第一行包含 Bessie 的数组中的数的数量 $N$。\n\n下一行包含 $a_1,a_2,\\ldots,a_N$，为 Bessie 将要排序的整数。相同的数值可能会多次出现。\n\n输入保证所有测试用例的 $N$ 之和不超过 $2\\cdot 10^5$。", "outputFormat": " 对于每个测试用例输出一行，包含当 Bessie 以最优方案划分她的数时，排序该数组所需要的最小时间。", "hint": "### 样例解释 1\n\n在第一个测试用例中，Bessie 可以将 $1,2$ 分配给助手，将 $4,5,10^{11}$ 留给自己。\n\n| 时间 | 事件 |\n| :-----------:| :----------- |\n| $1$ | 助手添加了 $1$ |\n| $2$ | 助手添加了 $2$ |\n| $3$ | Bessie 添加了 $4$ |\n| $5$ | Bessie 添加了 $5$ |\n| $6$ | Bessie 添加了 $10^{11}$ |\n\n在第二个测试用例中，Bessie 的最优方案是自己对所有数进行排序。一个不正确的划分是 Bessie 将 $4$ 分配给助手，其余的分配给她自己，因为助手将 $4$ 添加到数组之前 Bessie 就会将 $17$ 添加到数组中。\n\n在第三个测试用例中，Bessie 可以将所有数都分配给助手。\n\n在第四个测试用例中，Bessie 可以将 $1,4,5$ 分配给助手，将 $2,5,100$ 留给自己。\n\n| 时间 | 事件 |\n| :-----------:| :----------- |\n| $1$ | 助手添加了 $1$ |\n| $3$ | Bessie 添加了 $2$ |\n| $4$ | 助手添加了 $4$ |\n| $5$ | Bessie 添加了 $5$ |\n| $5$ | 助手添加了 $5$ |\n| $6$ | Bessie 添加了 $100$ |\n\n### 测试点性质\n\n- 测试点 $2$：$N\\le 16$。\n- 测试点 $3-5$：$N\\le 150$。\n- 测试点 $6-8$：$\\sum N\\le 5000$。\n- 测试点 $9-11$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Nap Sort G", "background": "", "description": "Bessie 正在尝试使用她自己的排序算法对一个整数数组进行排序。她有一堆共 $N$（$1\\le N\\le 2\\cdot 10^5$）个整数 $a_1,a_2,\\ldots,a_N$（$1\\le a_i\\le 10^{11}$），她将会按排序顺序将这些数放入一个单独的数组中。她反复查找这堆数中的最小数，将其删除，同时将其添加到数组的末尾。Bessie 在 $p$ 个数的堆中找到最小数需要花费 $p$ 秒。\n\nFarmer John 命令了农场中其他一些奶牛帮助 Bessie 完成任务，她们很懒，然而 Bessie 利用了这一点。她将整数分成两堆：Bessie 堆和助手堆。对于 Bessie 堆中的每个整数，她会正常执行她的算法。对于助手堆中的每个整数，她将其分配给不同的助手奶牛。Farmer John 有一个很大的农场，所以 Bessie 可以找来任意多的助手奶牛。如果助手收到整数 $a_i$，Bessie 会指示该牛小睡 $a_i$ 秒，并在她们醒来时立即将该整数添加到数组末尾。如果 Bessie 和一个助手同时向数组添加整数，Bessie 的整数将优先被添加，因为她是领导者。如果多个助手被分配了相同的整数，她们会同时将多个该整数添加到数组中。\n\n请帮助 Bessie 划分她的数，使得最终得到的数组是排序的，并使得排序该数组所需的时间最少。 ", "inputFormat": "输入的第一行包含 $T$，为独立的测试用例的数量（$1\\le T\\le 10$）。\n\n每个测试用例的格式如下：\n\n每个测试用例的第一行包含 Bessie 的数组中的数的数量 $N$。\n\n下一行包含 $a_1,a_2,\\ldots,a_N$，为 Bessie 将要排序的整数。相同的数值可能会多次出现。\n\n输入保证所有测试用例的 $N$ 之和不超过 $2\\cdot 10^5$。", "outputFormat": " 对于每个测试用例输出一行，包含当 Bessie 以最优方案划分她的数时，排序该数组所需要的最小时间。", "hint": "### 样例解释 1\n\n在第一个测试用例中，Bessie 可以将 $1,2$ 分配给助手，将 $4,5,10^{11}$ 留给自己。\n\n| 时间 | 事件 |\n| :-----------:| :----------- |\n| $1$ | 助手添加了 $1$ |\n| $2$ | 助手添加了 $2$ |\n| $3$ | Bessie 添加了 $4$ |\n| $5$ | Bessie 添加了 $5$ |\n| $6$ | Bessie 添加了 $10^{11}$ |\n\n在第二个测试用例中，Bessie 的最优方案是自己对所有数进行排序。一个不正确的划分是 Bessie 将 $4$ 分配给助手，其余的分配给她自己，因为助手将 $4$ 添加到数组之前 Bessie 就会将 $17$ 添加到数组中。\n\n在第三个测试用例中，Bessie 可以将所有数都分配给助手。\n\n在第四个测试用例中，Bessie 可以将 $1,4,5$ 分配给助手，将 $2,5,100$ 留给自己。\n\n| 时间 | 事件 |\n| :-----------:| :----------- |\n| $1$ | 助手添加了 $1$ |\n| $3$ | Bessie 添加了 $2$ |\n| $4$ | 助手添加了 $4$ |\n| $5$ | Bessie 添加了 $5$ |\n| $5$ | 助手添加了 $5$ |\n| $6$ | Bessie 添加了 $100$ |\n\n### 测试点性质\n\n- 测试点 $2$：$N\\le 16$。\n- 测试点 $3-5$：$N\\le 150$。\n- 测试点 $6-8$：$\\sum N\\le 5000$。\n- 测试点 $9-11$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10140", "type": "P", "difficulty": 7, "samples": [["2\n\n3 2\n0 10 111111112\n1 3\n2 3\n\n6 5\n500000004 0 0 0 0 0\n1 5\n1 3\n4 5\n5 6\n1 2", "0 888888896 111111112\n500000004 166666668 166666668 83333334 0 83333334"], ["2\n\n5 5\n333333336 333333336 0 0 0\n1 2\n2 3\n3 4\n4 5\n1 5\n\n5 5\n0 0 0 0 0\n1 2\n2 3\n2 4\n1 4\n1 5", "777777784 222222224 0 0 0\n0 0 333333336 0 666666672"], ["1\n\n11 13\n2 3 4 5 6 7 8 9 10 11 12\n1 2\n1 3\n2 3\n2 4\n4 5\n2 5\n4 8\n5 9\n2 6\n6 7\n2 7\n6 10\n5 11", "133332478 200000394 577778352 999999971 399999938 933333282 355555536 800000020 18 600000029 18"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2024", "树形 DP", "概率论", "圆方树"], "title": "[USACO24JAN] Island Vacation P", "background": "", "description": "Bessie 正在一个 $N$（$2\\le N\\le 10^4$）座岛组成的岛屿网络中度假，编号为 $1\\ldots N$，由 $M$ 座双向通行的桥连接，每座桥连接两座岛（$N−1\\le M\\le \\dfrac{3(N-1)}{2}$）。保证所有桥形成连通的简单图（具体地说，没有两座桥连接同一对岛屿，也没有一座桥连接一座岛到其自身）。\n\n另外保证没有一座桥处在多于一个简单环上。一个简单环是一个不包含重复岛的环。\n\nBessie 从岛 $1$ 开始，按以下过程旅行。假设她目前在岛 $i$ 上，\n\n1. 如果不存在连接岛 $i$ 的她尚未穿过的桥，则她的度假结束。\n2. 否则，以 $p_i \\pmod {10^9+7}$ 的概率，她的度假结束。\n3. 否则，在连接岛 $i$的所有她还没有穿过的桥中，她均匀地随机选择一座并穿过它。\n\n对于每座岛，输出她在该岛上结束度假的概率，对 $10^9+7$ 取模。 ", "inputFormat": "输入的第一行包含独立的测试用例的数量 $T$（$1\\le T\\le 10$）。相邻的测试用例之间以一个空行分隔。\n\n每一个测试用例的第一行包含 $N$ 和 $M$，其中 $N$ 为岛的数量，$M$ 为桥的数量。输入保证所有测试用例的 $N$ 之和不超过 $10^4$。\n\n第二行包含 $p_1,p_2,\\ldots,p_N$（$0\\le p_i<10^9+7$）。\n\n以下 $M$ 行描述所有的桥。第 $i$ 行包含整数 $u_i$ 和 $v_i$（$1\\le u_i<v_i\\le N$），表示第 $i$ 座桥连接岛 $u_i$ 和 $v_i$。输入保证所有桥满足上文中的限制。 ", "outputFormat": "对于每个测试用例输出一行，包含在岛 $1$ 到 $N$ 的每一座岛上结束度假的概率模 $10^9+7$ 的余数，用空格分隔。", "hint": "### 样例解释 1\n\n在第一个测试用例中，$p_3\\equiv \\frac{1}{9}\\pmod {10^9+7}$。Bessie 有 $\\frac{1}{9}$ 的概率在岛 $3$ 结束（经过路径 $1\\to 3$），$\\frac{8}{9}$ 的概率在岛 $2$ 结束（经过路径 $1\\to 3\\to 2$）。\n\n在第二个测试用例中，$p_1\\equiv \\frac{1}{2}\\pmod {10^9+7}$。Bessie 有 $\\frac{1}{2}$ 的概率在岛 $1$ 结束，各 $\\frac{1}{6}$ 的概率在岛 $2$ 和 $3$ 结束，各 $\\frac{1}{12}$ 的概率在岛 $4$ 和岛 $6$ 结束。\n\n### 样例解释 2\n\n在第一个测试用例中，$p_1\\equiv p_2\\equiv \\frac{1}{3}\\pmod {10^9+7}$。Bessie 有 $\\frac{7}{9}$ 的概率在岛 $1$ 结束（经过路径 $1$，$1\\to 2\\to 3\\to 4\\to 5\\to 1$ 与 $1\\to 5\\to 4\\to 3\\to 2\\to 1$ 之一），$\\frac{2}{9}$ 的概率在岛 $2$ 结束。\n\n在第二个测试用例中，Bessie 有 $\\frac{1}{3}$ 的概率在岛 $3$ 结束，$\\frac{2}{3}$ 的概率在岛 $5$ 结束。\n\n### 测试点性质\n\n- 测试点 $4-5$：$N\\le 11$。\n- 测试点 $6-7$：不存在简单环。\n- 测试点 $8-11$：没有一座岛处在多于一个简单环上。\n- 测试点 $12-15$：没有一座岛处在多于 $5$ 个简单环上。\n- 测试点 $16-19$：没有一座岛处在多于 $50$ 个简单环上。\n- 测试点 $20-23$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Island Vacation P", "background": "", "description": "Bessie 正在一个 $N$（$2\\le N\\le 10^4$）座岛组成的岛屿网络中度假，编号为 $1\\ldots N$，由 $M$ 座双向通行的桥连接，每座桥连接两座岛（$N−1\\le M\\le \\dfrac{3(N-1)}{2}$）。保证所有桥形成连通的简单图（具体地说，没有两座桥连接同一对岛屿，也没有一座桥连接一座岛到其自身）。\n\n另外保证没有一座桥处在多于一个简单环上。一个简单环是一个不包含重复岛的环。\n\nBessie 从岛 $1$ 开始，按以下过程旅行。假设她目前在岛 $i$ 上，\n\n1. 如果不存在连接岛 $i$ 的她尚未穿过的桥，则她的度假结束。\n2. 否则，以 $p_i \\pmod {10^9+7}$ 的概率，她的度假结束。\n3. 否则，在连接岛 $i$的所有她还没有穿过的桥中，她均匀地随机选择一座并穿过它。\n\n对于每座岛，输出她在该岛上结束度假的概率，对 $10^9+7$ 取模。 ", "inputFormat": "输入的第一行包含独立的测试用例的数量 $T$（$1\\le T\\le 10$）。相邻的测试用例之间以一个空行分隔。\n\n每一个测试用例的第一行包含 $N$ 和 $M$，其中 $N$ 为岛的数量，$M$ 为桥的数量。输入保证所有测试用例的 $N$ 之和不超过 $10^4$。\n\n第二行包含 $p_1,p_2,\\ldots,p_N$（$0\\le p_i<10^9+7$）。\n\n以下 $M$ 行描述所有的桥。第 $i$ 行包含整数 $u_i$ 和 $v_i$（$1\\le u_i<v_i\\le N$），表示第 $i$ 座桥连接岛 $u_i$ 和 $v_i$。输入保证所有桥满足上文中的限制。 ", "outputFormat": "对于每个测试用例输出一行，包含在岛 $1$ 到 $N$ 的每一座岛上结束度假的概率模 $10^9+7$ 的余数，用空格分隔。", "hint": "### 样例解释 1\n\n在第一个测试用例中，$p_3\\equiv \\frac{1}{9}\\pmod {10^9+7}$。Bessie 有 $\\frac{1}{9}$ 的概率在岛 $3$ 结束（经过路径 $1\\to 3$），$\\frac{8}{9}$ 的概率在岛 $2$ 结束（经过路径 $1\\to 3\\to 2$）。\n\n在第二个测试用例中，$p_1\\equiv \\frac{1}{2}\\pmod {10^9+7}$。Bessie 有 $\\frac{1}{2}$ 的概率在岛 $1$ 结束，各 $\\frac{1}{6}$ 的概率在岛 $2$ 和 $3$ 结束，各 $\\frac{1}{12}$ 的概率在岛 $4$ 和岛 $6$ 结束。\n\n### 样例解释 2\n\n在第一个测试用例中，$p_1\\equiv p_2\\equiv \\frac{1}{3}\\pmod {10^9+7}$。Bessie 有 $\\frac{7}{9}$ 的概率在岛 $1$ 结束（经过路径 $1$，$1\\to 2\\to 3\\to 4\\to 5\\to 1$ 与 $1\\to 5\\to 4\\to 3\\to 2\\to 1$ 之一），$\\frac{2}{9}$ 的概率在岛 $2$ 结束。\n\n在第二个测试用例中，Bessie 有 $\\frac{1}{3}$ 的概率在岛 $3$ 结束，$\\frac{2}{3}$ 的概率在岛 $5$ 结束。\n\n### 测试点性质\n\n- 测试点 $4-5$：$N\\le 11$。\n- 测试点 $6-7$：不存在简单环。\n- 测试点 $8-11$：没有一座岛处在多于一个简单环上。\n- 测试点 $12-15$：没有一座岛处在多于 $5$ 个简单环上。\n- 测试点 $16-19$：没有一座岛处在多于 $50$ 个简单环上。\n- 测试点 $20-23$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10141", "type": "P", "difficulty": 6, "samples": [["3\n1 1 1", "0\n500000004\n500000004"], ["4\n3 1 1 1", "666666672\n0\n166666668\n166666668"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "USACO", "2024", "概率论"], "title": "[USACO24JAN] Merging Cells P", "background": "**注意：本题的内存限制为 512MB，通常限制的两倍。**", "description": "Bessie 正在玩一个著名的在线游戏，游戏中有许多不同编号和大小的细胞。细胞会被其他细胞吞噬，直到只剩下一个胜利者。\n\n有 $N$（$2\\le N\\le 5000$）个细胞从左到右排成一行，编号为 $1\\ldots N$，初始大小为 $s_1,s_2,\\ldots,s_N$（$1\\le s_i\\le 10^5$）。当存在多个细胞时，均匀地随机选择一对相邻细胞，并根据以下规则合并为一个新的细胞：\n\n如果编号为 $a$ 且当前大小为 $c_a$ 的细胞与编号为 $b$ 且当前大小为 $c_b$ 的细胞合并，则合并成的细胞的大小为 $c_a+c_b$，且编号等于较大细胞的编号，并列时则为编号较大的细胞的编号。形式化地说，合并成的细胞的编号为 $\\begin{cases}a & c_a>c_b\\\\b & c_a<c_b\\\\ \\max(a,b) & c_a=c_b \\end{cases}$。\n\n对于 $1\\ldots N$ 范围内的每个编号 $i$，最终的细胞具有编号 $i$ 的概率可以以 $\\frac{a_i}{b_i}$ 的形式表示，其中 $b_i\\not \\equiv 0 \\pmod {10^9+7}$。输出 $a_ib_i^{-1}\\pmod {10^9+7}$。 ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $s_1,s_2,\\ldots,s_N$。 ", "outputFormat": "对于 $1\\ldots N$ 内的每个 $i$ 输出一行，为输出最终的细胞具有编号 $i$ 的概率模 $10^9+7$ 的余数。 ", "hint": "### 样例解释 1\n\n存在两种可能性，其中 $(a,b)\\to c$ 表示编号为 $a$ 和 $b$ 的细胞合并成了一个编号为 $c$ 的新的细胞。\n\n$(1, 2) \\to 2, (2, 3) \\to 2$  \n$(2, 3) \\to 3, (1, 3) \\to 3$\n\n所以有各 $\\frac{1}{2}$ 的概率最终的细胞具有编号 $2$ 或 $3$。\n\n\n### 样例解释 2\n\n六种可能性如下：\n\n$(1, 2) \\to 1, (1, 3) \\to 1, (1, 4) \\to 1$  \n$(1, 2) \\to 1, (3, 4) \\to 4, (1, 4) \\to 1$  \n$(2, 3) \\to 3, (1, 3) \\to 1, (1, 4) \\to 1$  \n$(2, 3) \\to 3, (3, 4) \\to 3, (1, 3) \\to 3$  \n$(3, 4) \\to 4, (2, 4) \\to 4, (1, 4) \\to 4$  \n$(3, 4) \\to 4, (1, 2) \\to 1, (1, 4) \\to 1$\n\n所以有 $\\frac{2}{3}$ 的概率最终的细胞具有编号 $1$，各 $\\frac{1}{6}$ 的概率最终的细胞具有编号 $3$ 或 $4$。\n\n### 测试点性质\n\n- 测试点 3：$N\\le 8$。\n- 测试点 $4-8$：$N\\le 100$。\n- 测试点 $9-14$：$N\\le 500$。\n- 测试点 $15-22$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Merging Cells P", "background": "**注意：本题的内存限制为 512MB，通常限制的两倍。**", "description": "Bessie 正在玩一个著名的在线游戏，游戏中有许多不同编号和大小的细胞。细胞会被其他细胞吞噬，直到只剩下一个胜利者。\n\n有 $N$（$2\\le N\\le 5000$）个细胞从左到右排成一行，编号为 $1\\ldots N$，初始大小为 $s_1,s_2,\\ldots,s_N$（$1\\le s_i\\le 10^5$）。当存在多个细胞时，均匀地随机选择一对相邻细胞，并根据以下规则合并为一个新的细胞：\n\n如果编号为 $a$ 且当前大小为 $c_a$ 的细胞与编号为 $b$ 且当前大小为 $c_b$ 的细胞合并，则合并成的细胞的大小为 $c_a+c_b$，且编号等于较大细胞的编号，并列时则为编号较大的细胞的编号。形式化地说，合并成的细胞的编号为 $\\begin{cases}a & c_a>c_b\\\\b & c_a<c_b\\\\ \\max(a,b) & c_a=c_b \\end{cases}$。\n\n对于 $1\\ldots N$ 范围内的每个编号 $i$，最终的细胞具有编号 $i$ 的概率可以以 $\\frac{a_i}{b_i}$ 的形式表示，其中 $b_i\\not \\equiv 0 \\pmod {10^9+7}$。输出 $a_ib_i^{-1}\\pmod {10^9+7}$。 ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $s_1,s_2,\\ldots,s_N$。 ", "outputFormat": "对于 $1\\ldots N$ 内的每个 $i$ 输出一行，为输出最终的细胞具有编号 $i$ 的概率模 $10^9+7$ 的余数。 ", "hint": "### 样例解释 1\n\n存在两种可能性，其中 $(a,b)\\to c$ 表示编号为 $a$ 和 $b$ 的细胞合并成了一个编号为 $c$ 的新的细胞。\n\n$(1, 2) \\to 2, (2, 3) \\to 2$  \n$(2, 3) \\to 3, (1, 3) \\to 3$\n\n所以有各 $\\frac{1}{2}$ 的概率最终的细胞具有编号 $2$ 或 $3$。\n\n\n### 样例解释 2\n\n六种可能性如下：\n\n$(1, 2) \\to 1, (1, 3) \\to 1, (1, 4) \\to 1$  \n$(1, 2) \\to 1, (3, 4) \\to 4, (1, 4) \\to 1$  \n$(2, 3) \\to 3, (1, 3) \\to 1, (1, 4) \\to 1$  \n$(2, 3) \\to 3, (3, 4) \\to 3, (1, 3) \\to 3$  \n$(3, 4) \\to 4, (2, 4) \\to 4, (1, 4) \\to 4$  \n$(3, 4) \\to 4, (1, 2) \\to 1, (1, 4) \\to 1$\n\n所以有 $\\frac{2}{3}$ 的概率最终的细胞具有编号 $1$，各 $\\frac{1}{6}$ 的概率最终的细胞具有编号 $3$ 或 $4$。\n\n### 测试点性质\n\n- 测试点 3：$N\\le 8$。\n- 测试点 $4-8$：$N\\le 100$。\n- 测试点 $9-14$：$N\\le 500$。\n- 测试点 $15-22$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10142", "type": "P", "difficulty": 6, "samples": [["2\n1 2\n2 1", "2"], ["3\n1 1\n2 2\n3 3", "10"], ["3\n1 1\n2 3\n3 2", "12"], ["40\n1 1\n2 2\n3 3\n4 4\n5 5\n6 6\n7 7\n8 8\n9 9\n10 10\n11 11\n12 12\n13 13\n14 14\n15 15\n16 16\n17 17\n18 18\n19 19\n20 20\n21 21\n22 22\n23 23\n24 24\n25 25\n26 26\n27 27\n28 28\n29 29\n30 30\n31 31\n32 32\n33 33\n34 34\n35 35\n36 36\n37 37\n38 38\n39 39\n40 40", "441563023"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "USACO", "2024", "容斥原理"], "title": "[USACO24JAN] Mooball Teams III P", "background": "", "description": "Farmer John 在他的农场上有 $N$ 头牛（$2\\le N\\le 2\\cdot 10^5$），编号为 $1\\ldots N$。奶牛 $i$ 位于整数坐标 $(x_i,y_i)$（$1\\le x_i,y_i\\le N$）。Farmer John 想要挑选两支队伍来玩哞球游戏！\n\n其中一支队伍将是「红队」；另一队将是「蓝队」。对组队只有很少的要求。两队都不能为空，并且 $N$ 头奶牛中的每一头至多只能在一个队中（可以两队都不在）。唯一的其他要求是基于哞球独特的特点：一个无限长的网，必须将其放置为平面中非整数坐标的水平或垂直直线，例如 $x=0.5$。FJ 挑选队伍必须使得可以用网将两队分开。奶牛们不愿意为此进行移动。\n\n帮帮农夫吧！为 Farmer John 计算选择满足上述要求的红队和蓝队的方法数，对 $10^9+7$ 取模。", "inputFormat": "输入的第一行包含一个整数 $N$。\n\n以下 $N$ 行每行包含两个空格分隔的整数 $x_i$ 和 $y_i$。输入保证 $x_i$ 组成 $1\\ldots N$ 的一个排列，$y_i$ 类似。", "outputFormat": "输出一个整数，为选择满足上述要求的红队和蓝队的方法数，对 $10^9+7$ 取模。", "hint": "### 样例解释 1\n\n我们可以选择红队为牛 1，蓝队为牛 2，或者相反。无论哪种情况，我们都可以用一个网将两支球队分开（例如，$x=1.5$）。\n\n### 样例解释 2\n\n以下是所有的十种可能的将奶牛分队的方法；第 $i$ 个字符表示第 $i$ 头奶牛的队伍，`R` 表示红队，`B` 表示蓝队，或 `.` 表示第 $i$ 头奶牛不在一个队伍中。 \n\n```plain\nRRB\nR.B\nRB.\nRBB\n.RB\n.BR\nBRR\nBR.\nB.R\nBBR\n```\n\n### 样例解释 3\n\n以下是所有的十二种可能的将奶牛分队的方法：\n\n```plain\nRRB\nR.B\nRBR\nRB.\nRBB\n.RB\n.BR\nBRR\nBR.\nBRB\nB.R\nBBR\n```\n\n### 样例解释 4\n\n确保输出答案对 $10^9+7$ 取模。\n\n### 测试点性质\n\n- 测试点 $5$：$N\\le 10$。\n- 测试点 $6-9$：$N\\le 200$。\n- 测试点 $10-13$：$N\\le 3000$。\n- 测试点 $14-24$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Mooball Teams III P", "background": "", "description": "Farmer John 在他的农场上有 $N$ 头牛（$2\\le N\\le 2\\cdot 10^5$），编号为 $1\\ldots N$。奶牛 $i$ 位于整数坐标 $(x_i,y_i)$（$1\\le x_i,y_i\\le N$）。Farmer John 想要挑选两支队伍来玩哞球游戏！\n\n其中一支队伍将是「红队」；另一队将是「蓝队」。对组队只有很少的要求。两队都不能为空，并且 $N$ 头奶牛中的每一头至多只能在一个队中（可以两队都不在）。唯一的其他要求是基于哞球独特的特点：一个无限长的网，必须将其放置为平面中非整数坐标的水平或垂直直线，例如 $x=0.5$。FJ 挑选队伍必须使得可以用网将两队分开。奶牛们不愿意为此进行移动。\n\n帮帮农夫吧！为 Farmer John 计算选择满足上述要求的红队和蓝队的方法数，对 $10^9+7$ 取模。", "inputFormat": "输入的第一行包含一个整数 $N$。\n\n以下 $N$ 行每行包含两个空格分隔的整数 $x_i$ 和 $y_i$。输入保证 $x_i$ 组成 $1\\ldots N$ 的一个排列，$y_i$ 类似。", "outputFormat": "输出一个整数，为选择满足上述要求的红队和蓝队的方法数，对 $10^9+7$ 取模。", "hint": "### 样例解释 1\n\n我们可以选择红队为牛 1，蓝队为牛 2，或者相反。无论哪种情况，我们都可以用一个网将两支球队分开（例如，$x=1.5$）。\n\n### 样例解释 2\n\n以下是所有的十种可能的将奶牛分队的方法；第 $i$ 个字符表示第 $i$ 头奶牛的队伍，`R` 表示红队，`B` 表示蓝队，或 `.` 表示第 $i$ 头奶牛不在一个队伍中。 \n\n```plain\nRRB\nR.B\nRB.\nRBB\n.RB\n.BR\nBRR\nBR.\nB.R\nBBR\n```\n\n### 样例解释 3\n\n以下是所有的十二种可能的将奶牛分队的方法：\n\n```plain\nRRB\nR.B\nRBR\nRB.\nRBB\n.RB\n.BR\nBRR\nBR.\nBRB\nB.R\nBBR\n```\n\n### 样例解释 4\n\n确保输出答案对 $10^9+7$ 取模。\n\n### 测试点性质\n\n- 测试点 $5$：$N\\le 10$。\n- 测试点 $6-9$：$N\\le 200$。\n- 测试点 $10-13$：$N\\le 3000$。\n- 测试点 $14-24$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10143", "type": "P", "difficulty": 4, "samples": [["1 3 3\n2 3 4\n1 2 2", "40"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "背包 DP", "WC"], "title": "[WC2024] 代码堵塞", "background": "", "description": "小 $\\beth$ 为了纪念停办的 codejam，准备了一场“代码堵塞纪念赛”。小 $\\beth$ 的朋友小 $\\mho$ 也来围观，于是小 $\\beth$ 想预测小 $\\mho$ 的成绩。\n\n比赛共 $T$ 秒，有 $n$ 道题。第 $i(1 \\le i \\le n)$ 题分数为 $a_i$，小 $\\beth$ 预测小 $\\mho$ 需要 $t_i$ 秒完成。\n\n题目有两种类型：结果可见和结果不可见。结果不可见的题在比赛结束后才能知道评测结果，而结果可见的题在提交后立即得到评测结果。小 $\\beth$ 还没确定每道题的类型。\n\n小 $\\mho$ 由于从不写对拍，所以会先按编号从小到大完成所有结果可见的题，再按编号从小到大完成所有结果不可见的题。小 $\\mho$ 会花 $t_i$ 秒完成第 $i$ 题，当小 $\\mho$ 花费在第 $i$ 题和在第 $i$ 题之前完成的所有题的时间总和**不超过** $T$，就会在第 $i$ 题**产生提交**。\n\n由于小 $\\mho$ 提交即 AC，所以小 $\\beth$ 想知道对于所有 $2^n$ 种确定 $n$ 道题类型的方案，小 $\\mho$ 所能得到的分数总和的和。由于答案很大，你需要将答案对 $998244353$ 取模。", "inputFormat": "输入的第一行包含三个整数 $c, n, T$，表示测试点编号，题数和比赛时间。样例中的 $c$ 表示其满足的限制条件与第 $c$ 个测试点一致。\n\n输入的第二行包含 $n$ 个整数 $a_1, a_2, \\cdots , a_n$，分别表示每道题的分数。\n\n输入的第三行包含 $n$ 个整数 $t_1, t_2, \\cdots , t_n$，分别表示小 $\\mho$ 做每道题的时间。", "outputFormat": "输出一行包含一个整数，表示对于所有确定 $n$ 道题类型的方案，小 $\\mho$ 所能得到的分数总和的和，对 $998244353$ 取模。", "hint": "**样例 1 解释**\n\n我们用长度为 $3$ 的 $01$ 序列表示题目类型，$1$ 表示结果可见，$0$ 表示结果不可见。\n\n- $(0, 0, 0)(1, 0, 0)(1, 1, 0)(1, 1, 1)$ 四种情况：小 $\\mho$ 按照编号顺序做题，前两题产生提交，分数和为 $5$；\n-  $(0, 1, 0)$：小 $\\mho$ 按照 $213$ 的顺序做题，前两题产生提交，分数和为 $5$；\n-  $(0, 0, 1)$：小 $\\mho$ 按照 $312$ 的顺序做题，第一题和第三题产生提交，分数和为 $6$；\n-  $(1, 0, 1)$：小 $\\mho$ 按照 $132$ 的顺序做题，第一题和第三题产生提交，分数和为 $6$；\n-  $(0, 1, 1)$：小 $\\mho$ 按照 $231$ 的顺序做题，只有第二题产生提交，分数和为 $3$。\n\n因此答案为 $(5 \\times 4 + 5 + 6 + 6 + 3) \\bmod 998244353 = 40$。\n\n### 数据范围\n\n对于所有测试数据：\n\n- $1\\le n\\le 200$，\n- $1\\le T\\le 3\\times 10^5$，\n- $\\forall 1\\le i\\le n , 1\\le a_i\\le 3\\times 10^5$，\n- $\\forall 1\\le i\\le n,  1\\le t_i\\le T$。\n\n| 测试点编号 | $n\\le $ | $T\\le $ | 特殊性质 A | 特殊性质 B |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 4$ | $15$ | $10^2$ | 否 | 否 |\n| $5\\sim 7$ | $200$ | $3\\times 10^5$ | 是 | 是 |\n| $8,9$ | $200$ | $3\\times 10^5$ | 是 | 否 |\n| $10\\sim 13$ | $200$ | $3\\times 10^5$ | 否 | 是 |\n| $14\\sim 16$ | $50$ | $10^3$ | 否 | 否 |\n| $17,18$ | $10^2$ | $10^4$ | 否 | 否 |\n| $19,20$ | $200$ | $3\\times 10^5$ | 否 | 否 |\n\n\n- 特殊性质 A：$\\forall 1 \\le i \\le n, a_i = 1$。\n- 特殊性质 B：$\\forall 1 \\le i \\le n, t_i = 1$。\n\n### 后记\n\n“你们这比赛怎么所有题都结果不可见啊？”", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2024] 代码堵塞", "background": "", "description": "小 $\\beth$ 为了纪念停办的 codejam，准备了一场“代码堵塞纪念赛”。小 $\\beth$ 的朋友小 $\\mho$ 也来围观，于是小 $\\beth$ 想预测小 $\\mho$ 的成绩。\n\n比赛共 $T$ 秒，有 $n$ 道题。第 $i(1 \\le i \\le n)$ 题分数为 $a_i$，小 $\\beth$ 预测小 $\\mho$ 需要 $t_i$ 秒完成。\n\n题目有两种类型：结果可见和结果不可见。结果不可见的题在比赛结束后才能知道评测结果，而结果可见的题在提交后立即得到评测结果。小 $\\beth$ 还没确定每道题的类型。\n\n小 $\\mho$ 由于从不写对拍，所以会先按编号从小到大完成所有结果可见的题，再按编号从小到大完成所有结果不可见的题。小 $\\mho$ 会花 $t_i$ 秒完成第 $i$ 题，当小 $\\mho$ 花费在第 $i$ 题和在第 $i$ 题之前完成的所有题的时间总和**不超过** $T$，就会在第 $i$ 题**产生提交**。\n\n由于小 $\\mho$ 提交即 AC，所以小 $\\beth$ 想知道对于所有 $2^n$ 种确定 $n$ 道题类型的方案，小 $\\mho$ 所能得到的分数总和的和。由于答案很大，你需要将答案对 $998244353$ 取模。", "inputFormat": "输入的第一行包含三个整数 $c, n, T$，表示测试点编号，题数和比赛时间。样例中的 $c$ 表示其满足的限制条件与第 $c$ 个测试点一致。\n\n输入的第二行包含 $n$ 个整数 $a_1, a_2, \\cdots , a_n$，分别表示每道题的分数。\n\n输入的第三行包含 $n$ 个整数 $t_1, t_2, \\cdots , t_n$，分别表示小 $\\mho$ 做每道题的时间。", "outputFormat": "输出一行包含一个整数，表示对于所有确定 $n$ 道题类型的方案，小 $\\mho$ 所能得到的分数总和的和，对 $998244353$ 取模。", "hint": "**样例 1 解释**\n\n我们用长度为 $3$ 的 $01$ 序列表示题目类型，$1$ 表示结果可见，$0$ 表示结果不可见。\n\n- $(0, 0, 0)(1, 0, 0)(1, 1, 0)(1, 1, 1)$ 四种情况：小 $\\mho$ 按照编号顺序做题，前两题产生提交，分数和为 $5$；\n-  $(0, 1, 0)$：小 $\\mho$ 按照 $213$ 的顺序做题，前两题产生提交，分数和为 $5$；\n-  $(0, 0, 1)$：小 $\\mho$ 按照 $312$ 的顺序做题，第一题和第三题产生提交，分数和为 $6$；\n-  $(1, 0, 1)$：小 $\\mho$ 按照 $132$ 的顺序做题，第一题和第三题产生提交，分数和为 $6$；\n-  $(0, 1, 1)$：小 $\\mho$ 按照 $231$ 的顺序做题，只有第二题产生提交，分数和为 $3$。\n\n因此答案为 $(5 \\times 4 + 5 + 6 + 6 + 3) \\bmod 998244353 = 40$。\n\n### 数据范围\n\n对于所有测试数据：\n\n- $1\\le n\\le 200$，\n- $1\\le T\\le 3\\times 10^5$，\n- $\\forall 1\\le i\\le n , 1\\le a_i\\le 3\\times 10^5$，\n- $\\forall 1\\le i\\le n,  1\\le t_i\\le T$。\n\n| 测试点编号 | $n\\le $ | $T\\le $ | 特殊性质 A | 特殊性质 B |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 4$ | $15$ | $10^2$ | 否 | 否 |\n| $5\\sim 7$ | $200$ | $3\\times 10^5$ | 是 | 是 |\n| $8,9$ | $200$ | $3\\times 10^5$ | 是 | 否 |\n| $10\\sim 13$ | $200$ | $3\\times 10^5$ | 否 | 是 |\n| $14\\sim 16$ | $50$ | $10^3$ | 否 | 否 |\n| $17,18$ | $10^2$ | $10^4$ | 否 | 否 |\n| $19,20$ | $200$ | $3\\times 10^5$ | 否 | 否 |\n\n\n- 特殊性质 A：$\\forall 1 \\le i \\le n, a_i = 1$。\n- 特殊性质 B：$\\forall 1 \\le i \\le n, t_i = 1$。\n\n### 后记\n\n“你们这比赛怎么所有题都结果不可见啊？”", "locale": "zh-CN"}}}
{"pid": "P10144", "type": "P", "difficulty": 6, "samples": [["4\n1 3 2 4", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2024", "离线处理", "WC"], "title": "[WC2024] 水镜", "background": "", "description": "**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nA 城是一座多雨的城市，山溪泉水众多。出于对水的喜爱，市民们在城市中央修建了一座大喷泉。\n\n喷泉的水池中有一排 $n$ 个石柱，从左到右编号为 $1, 2, \\cdots , n$，第 $i$ 个石柱的高度为 $h_i$。水池中有储水，水位 $L$ 为一个**正实数**。第 $i$ 个石柱会产生一个高度为 $h'_i = 2L - h_i$ 的像。若石柱在水面上方，像在水面下方；若石柱在水面下方，像在水面上方；若石柱顶端与水面重合，则像也与水面重合。\n\n传说水中栖息着泉水精灵，每到满月之夜，它们就会在石柱上起舞，行动规则如下：\n\n- 泉水精灵只能栖息在石柱顶端，或者石柱的像的顶端。即如果泉水精灵在石柱 $u$ 上，它的高度 $r_u$ 便只有 $h_u, h'_u$ 两种可能取值。\n- 泉水精灵每次只能前往右侧相邻的石柱（或石柱的像）。\n- 在移动过程中，泉水精灵的高度必须**严格单调递增**。\n\n泉水精灵会选择一个石柱（或石柱的像）为起点，进行若干次移动后停止。这样的过程称为一次**舞蹈**。\n\nA 城的雨季漫长，由于不规律的降雨，喷泉的水位可能会多次变化，舞蹈路径的可能性也随之改变。作为远道而来的旅人，你很想知道有多少种舞蹈是可能实现的。具体地，你需要计算有多少对 $(u, v)$（$1 ≤ u < v ≤ n$），满足存在一种水位 $L$，使得泉水精灵在一次舞蹈中，能从第 $u$ 个石柱（或它的像）出发，到达第 $v$ 个石柱（或它的像）。\n\n**形式化的**：给定一个长度为 $n$ 的正整数序列 $h_1, h_2,\\cdots , h_n$，求满足以下所有条件的\n二元组 $(u, v)$ 的数量：\n- $1 \\le u < v \\le n$，且 $u, v$ 为整数；\n- 存在一个**正实数** $L$ 以及一个长度为 $(v - u + 1)$ 的序列 $r_u, r_{u+1},\\cdots , r_v$ 满足以下\n所有条件：\n- $\\forall u \\le i \\le v$，记 $h'_i = 2L - h_i$，则 $r_i \\in \\{h_i,h'_i\\}$，特别地，当 $h_i = h'_i$ 时，$r_i = h_i$；\n- $\\forall u \\le i < v, r_i < r_{i+1}$。\n", "inputFormat": "输入的第一行包含一个正整数 $n$，表示石柱的个数。\n\n输入的第二行包含 $n$ 个正整数 $h_1, h_2, \\cdots , h_n$，表示石柱的高度。\n", "outputFormat": "输出一行一个整数，表示符合题目描述的 $(u, v)$ 对数。", "hint": "**样例 1 解释**\n\n所有 $\\binom{4}{2}=6$ 种 $(u, v)$ 都是可行的。\n对于 $u = 1, v = 4$，可以选择 $L = 2.5$，则序列 $h'$\n 为 $\\{4, 2, 3, 1\\}$，取序列 $r$ 为 $\\{1, 2, 3, 4\\}$\n可以满足所有条件。\n\n### 数据范围\n\n对于所有测试数据：\n\n- $2\\le n\\le 5\\times 10^5$，\n- $\\forall 1\\le i\\le n,1\\le h_i\\le 10^{12}$。\n\n| 测试点编号 | $n\\le$ |\n| :----------: | :----------: |\n| $1\\sim 2$ | $10$ |\n| $3\\sim 4$ | $100$ |\n| $5\\sim 6$ | $400$ |\n| $7\\sim 11$| $4000$ |\n| $12\\sim 13$ | $5\\times 10^4$ |\n| $14\\sim 16$ | $10^5$ |\n| $17\\sim 19$ | $2\\times 10^5$ |\n| $20\\sim 25$ | $5\\times 10^5$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2024] 水镜", "background": "", "description": "**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nA 城是一座多雨的城市，山溪泉水众多。出于对水的喜爱，市民们在城市中央修建了一座大喷泉。\n\n喷泉的水池中有一排 $n$ 个石柱，从左到右编号为 $1, 2, \\cdots , n$，第 $i$ 个石柱的高度为 $h_i$。水池中有储水，水位 $L$ 为一个**正实数**。第 $i$ 个石柱会产生一个高度为 $h'_i = 2L - h_i$ 的像。若石柱在水面上方，像在水面下方；若石柱在水面下方，像在水面上方；若石柱顶端与水面重合，则像也与水面重合。\n\n传说水中栖息着泉水精灵，每到满月之夜，它们就会在石柱上起舞，行动规则如下：\n\n- 泉水精灵只能栖息在石柱顶端，或者石柱的像的顶端。即如果泉水精灵在石柱 $u$ 上，它的高度 $r_u$ 便只有 $h_u, h'_u$ 两种可能取值。\n- 泉水精灵每次只能前往右侧相邻的石柱（或石柱的像）。\n- 在移动过程中，泉水精灵的高度必须**严格单调递增**。\n\n泉水精灵会选择一个石柱（或石柱的像）为起点，进行若干次移动后停止。这样的过程称为一次**舞蹈**。\n\nA 城的雨季漫长，由于不规律的降雨，喷泉的水位可能会多次变化，舞蹈路径的可能性也随之改变。作为远道而来的旅人，你很想知道有多少种舞蹈是可能实现的。具体地，你需要计算有多少对 $(u, v)$（$1 ≤ u < v ≤ n$），满足存在一种水位 $L$，使得泉水精灵在一次舞蹈中，能从第 $u$ 个石柱（或它的像）出发，到达第 $v$ 个石柱（或它的像）。\n\n**形式化的**：给定一个长度为 $n$ 的正整数序列 $h_1, h_2,\\cdots , h_n$，求满足以下所有条件的\n二元组 $(u, v)$ 的数量：\n- $1 \\le u < v \\le n$，且 $u, v$ 为整数；\n- 存在一个**正实数** $L$ 以及一个长度为 $(v - u + 1)$ 的序列 $r_u, r_{u+1},\\cdots , r_v$ 满足以下\n所有条件：\n- $\\forall u \\le i \\le v$，记 $h'_i = 2L - h_i$，则 $r_i \\in \\{h_i,h'_i\\}$，特别地，当 $h_i = h'_i$ 时，$r_i = h_i$；\n- $\\forall u \\le i < v, r_i < r_{i+1}$。\n", "inputFormat": "输入的第一行包含一个正整数 $n$，表示石柱的个数。\n\n输入的第二行包含 $n$ 个正整数 $h_1, h_2, \\cdots , h_n$，表示石柱的高度。\n", "outputFormat": "输出一行一个整数，表示符合题目描述的 $(u, v)$ 对数。", "hint": "**样例 1 解释**\n\n所有 $\\binom{4}{2}=6$ 种 $(u, v)$ 都是可行的。\n对于 $u = 1, v = 4$，可以选择 $L = 2.5$，则序列 $h'$\n 为 $\\{4, 2, 3, 1\\}$，取序列 $r$ 为 $\\{1, 2, 3, 4\\}$\n可以满足所有条件。\n\n### 数据范围\n\n对于所有测试数据：\n\n- $2\\le n\\le 5\\times 10^5$，\n- $\\forall 1\\le i\\le n,1\\le h_i\\le 10^{12}$。\n\n| 测试点编号 | $n\\le$ |\n| :----------: | :----------: |\n| $1\\sim 2$ | $10$ |\n| $3\\sim 4$ | $100$ |\n| $5\\sim 6$ | $400$ |\n| $7\\sim 11$| $4000$ |\n| $12\\sim 13$ | $5\\times 10^4$ |\n| $14\\sim 16$ | $10^5$ |\n| $17\\sim 19$ | $2\\times 10^5$ |\n| $20\\sim 25$ | $5\\times 10^5$ |\n", "locale": "zh-CN"}}}
{"pid": "P10145", "type": "P", "difficulty": 7, "samples": [["2 1\n1\n0 2", "5"], ["2 1\n1 \n1 2", "5"], ["5 2\n2 1 4 3\n1 3\n2 5", "193"], ["10 10\n5 2 1 3 4 7 6 8 9\n0 1\n0 2\n0 3\n0 4\n0 5\n0 6\n0 7\n0 8\n0 9\n0 10", "70848"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "WC"], "title": "[WC2024] 线段树", "background": "", "description": "小 Y 最近学会了如何用线段树维护序列，并支持区间求和的操作。\n\n**以下给出本题中线段树的定义。 该定义可能和你熟知的线段树有区别。**\n\n- 线段树是一种有根的二叉树，其每个节点对应了序列上的一个区间 $[l, r)$，其中根节点对应 $[0, n)$。\n- 对于每个节点，若其代表的序列区间 $[l, r)$ 满足 $r - l = 1$，则其为叶节点；否则存在整数 $m(l < m < r)$，满足其左儿子代表区间 $[l, m)$，右儿子代表区间 $[m, r)$。\n- 线段树的形态取决于每个非叶结点的划分点 $m$ 的选择。\n- 在区间求和的问题上，对于序列 $a_0, a_1, \\dots , a_{n-1}$，线段树的每个结点 $[l, r)$ 维护了\n$(a_l + a_{l+1} + \\cdots + a_{r-1})$ 的值。\n\n小 J 有一个长度为 $N$ 的数组 $A_0, A_1, \\dots , A_{N-1}$，他并不知道 $A$ 中的任何一个数，但是他有一棵线段树维护了 $A$ 的区间和。线段树由 $X_1, X_2, \\dots , X_{N-1}$ 给出，其中 $X_i$ 是线段树先序遍历的第 $i$ 个非叶结点的划分点。\n\n例如，如果 $N = 5, X = [2, 1, 4, 3]$，则线段树包含的结点的先序遍历为 $[0, 5), [0, 2), [0, 1), [1, 2), [2, 5), [2, 4), [2, 3), [3, 4), [4, 5)$。\n\n小 J 有 $M$ 个区间 $[L_1, R_1), [L_2, R_2), \\dots , [L_M, R_M)$，他想知道，在所有 $2^{2N-1}$ 个线段树结点的子集中，有多少个子集 $S$ 满足以下条件：\n\n- 如果已知 $S$ 中所有结点维护的值，则每个 $[L_i\n, R_i)$ 区间的和都能被唯一确定。\n\n例如，如果已知 $[0, 1), [1, 2)$，就能确定 $[0, 2)$ 的和；反过来，如果已知 $[0, 1), [0, 2)$，也能确定 $[1, 2)$ 的和。但如果仅已知 $[0, 2), [2, 4)$ 则不能确定 $[0, 3)$ 或 $[1, 2)$ 的和。\n\n由于答案很大，你需要输出答案对 $998244353$ 取模后的值。\n", "inputFormat": "输入的第一行包含两个整数 $N, M$，分别表示数组长度和区间个数。\n\n输入的第二行包含 $N - 1$ 个整数 $X_1, X_2, \\dots , X_{N-1}$。\n\n接下来 $M$ 行，每行包含两个整数 $L_i, R_i$，表示一个区间。\n", "outputFormat": "输出一行一个整数表示答案对 $998244353$ 取模后的值。\n", "hint": "**样例 1 解释**\n\n只有当直接知道 $[0, 2)$ 的总和或同时知道 $[0, 1)$ 和 $[1, 2)$ 的总和时才能知道 $[0, 2)$ 的总和，因此总的方案数为 $2^2 + 1 = 5$。\n\n### 数据范围\n\n对于所有测试数据：\n- $2 \\le N \\le 2 \\times 10^5$，\n- $1 \\le M \\le \\min \\{\\frac{N(N+1)}{2}, 2 \\times 10^5\\}$，\n- $\\forall 1 \\le i \\le N - 1, 1 \\le X_i \\le N - 1$，\n- 保证 $X_i$ 正确描述了一棵线段树，\n- $\\forall 1 \\le i \\le M, 0 \\le L_i < R_i \\le N$，\n- $\\forall i \\ne j,(L_i, R_i) \\ne (L_j, R_j )$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ncb7tdfe.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2024] 线段树", "background": "", "description": "小 Y 最近学会了如何用线段树维护序列，并支持区间求和的操作。\n\n**以下给出本题中线段树的定义。 该定义可能和你熟知的线段树有区别。**\n\n- 线段树是一种有根的二叉树，其每个节点对应了序列上的一个区间 $[l, r)$，其中根节点对应 $[0, n)$。\n- 对于每个节点，若其代表的序列区间 $[l, r)$ 满足 $r - l = 1$，则其为叶节点；否则存在整数 $m(l < m < r)$，满足其左儿子代表区间 $[l, m)$，右儿子代表区间 $[m, r)$。\n- 线段树的形态取决于每个非叶结点的划分点 $m$ 的选择。\n- 在区间求和的问题上，对于序列 $a_0, a_1, \\dots , a_{n-1}$，线段树的每个结点 $[l, r)$ 维护了\n$(a_l + a_{l+1} + \\cdots + a_{r-1})$ 的值。\n\n小 J 有一个长度为 $N$ 的数组 $A_0, A_1, \\dots , A_{N-1}$，他并不知道 $A$ 中的任何一个数，但是他有一棵线段树维护了 $A$ 的区间和。线段树由 $X_1, X_2, \\dots , X_{N-1}$ 给出，其中 $X_i$ 是线段树先序遍历的第 $i$ 个非叶结点的划分点。\n\n例如，如果 $N = 5, X = [2, 1, 4, 3]$，则线段树包含的结点的先序遍历为 $[0, 5), [0, 2), [0, 1), [1, 2), [2, 5), [2, 4), [2, 3), [3, 4), [4, 5)$。\n\n小 J 有 $M$ 个区间 $[L_1, R_1), [L_2, R_2), \\dots , [L_M, R_M)$，他想知道，在所有 $2^{2N-1}$ 个线段树结点的子集中，有多少个子集 $S$ 满足以下条件：\n\n- 如果已知 $S$ 中所有结点维护的值，则每个 $[L_i\n, R_i)$ 区间的和都能被唯一确定。\n\n例如，如果已知 $[0, 1), [1, 2)$，就能确定 $[0, 2)$ 的和；反过来，如果已知 $[0, 1), [0, 2)$，也能确定 $[1, 2)$ 的和。但如果仅已知 $[0, 2), [2, 4)$ 则不能确定 $[0, 3)$ 或 $[1, 2)$ 的和。\n\n由于答案很大，你需要输出答案对 $998244353$ 取模后的值。\n", "inputFormat": "输入的第一行包含两个整数 $N, M$，分别表示数组长度和区间个数。\n\n输入的第二行包含 $N - 1$ 个整数 $X_1, X_2, \\dots , X_{N-1}$。\n\n接下来 $M$ 行，每行包含两个整数 $L_i, R_i$，表示一个区间。\n", "outputFormat": "输出一行一个整数表示答案对 $998244353$ 取模后的值。\n", "hint": "**样例 1 解释**\n\n只有当直接知道 $[0, 2)$ 的总和或同时知道 $[0, 1)$ 和 $[1, 2)$ 的总和时才能知道 $[0, 2)$ 的总和，因此总的方案数为 $2^2 + 1 = 5$。\n\n### 数据范围\n\n对于所有测试数据：\n- $2 \\le N \\le 2 \\times 10^5$，\n- $1 \\le M \\le \\min \\{\\frac{N(N+1)}{2}, 2 \\times 10^5\\}$，\n- $\\forall 1 \\le i \\le N - 1, 1 \\le X_i \\le N - 1$，\n- 保证 $X_i$ 正确描述了一棵线段树，\n- $\\forall 1 \\le i \\le M, 0 \\le L_i < R_i \\le N$，\n- $\\forall i \\ne j,(L_i, R_i) \\ne (L_j, R_j )$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ncb7tdfe.png)", "locale": "zh-CN"}}}
