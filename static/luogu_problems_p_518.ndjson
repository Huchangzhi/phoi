{"pid": "P11508", "type": "P", "difficulty": 5, "samples": [["5 5\n1 2\n2 3\n3 4\n3 5\n4 5", "2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 数据存放 (Day 1)", "background": "翻译自 [ROIR 2017 D1T3](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day1.pdf)。", "description": "一家公司大型的电信网络包含了 $n$ 台服务器，编号从 $1$ 到 $n$。其中，有一些服务器对之间通过双向通信通道连接，共有 $m$ 个通道。保证该网络中的服务器通过这些通道可以相互通信。\n\n我们称一个服务器集合 $A$ 被称为“容错集合”，当且仅当在任意一条通道失效的情况下，满足以下条件：\n- 对于任何不属于集合 $A$ 的服务器 $X$，总能通过剩下的通道将数据从集合 $A$ 中的某一台服务器传输到服务器 $X$。\n\n下图显示了一个网络和一个容错集合 $A=\\{1,4\\}$。\n\n- 对于服务器 $2$，当服务器 $1$ 和 $2$ 之间的通道失效时，可以从服务器 $4$ 传输数据；当服务器 $2$ 和 $3$ 之间的通道失效时，可以从服务器 $1$ 传输数据。当其它通道失效时，两个服务器都可以向其传输数据。  \n- 对于服务器 $3$ 和 $5$，当任何通道失效时，可以通过其它通道从服务器 $4$ 传输数据。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mif7u71b.png)\n\n公司的开发团队需要将他们的数据存放在这个网络中。为了提高数据的可用性和容错性，开发者希望将数据备份存储在多个服务器上，这些服务器需要形成一个容错集合。为了最小化开销，需要选择包含的服务器数量最少的容错集合。此外，为了了解网络的灵活性，还需要计算选择这个容错集合的不同方式的数量，由于这个数量可能很大，你只需要输出这个数对 $10^9 + 7$ 取模的结果。", "inputFormat": "第一行输入两个整数 $n$ 和 $m$，分别表示服务器的数量和通信通道的数量（$2 \\leq n \\leq 200000$，$1 \\leq m \\leq 200000$）。\n\n接下来 $m$ 行，每行包含两个整数，表示一个通信通道连接的两个服务器。\n\n输入保证：\n- 任意两个服务器之间至多通过一条通信通道直接连接，且没有通道连接服务器到它自己（即：没有重边和自环）；\n- 对于任意一对服务器，都存在路径可以通过一个或多个中间服务器将数据从其中一个服务器传输到另一个服务器（即：这个图连通）。", "outputFormat": "输出两个整数 $k,c$，用空格隔开，分别表示选择的容错集合中服务器的最小数量，以及在服务器数量最小的前提下选择容错集合的方式的数量对 $10^9 + 7$ 取模的结果。", "hint": "### 样例解释\n\n在样例中，容错集合可以为 $\\{1, 3\\},\\{1, 4\\} , \\{1, 5\\}$。\n\n### 数据范围\n\n本题满分为 $101$ 分。\n\n| 子任务 | 分值 | $n$ | $m$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $25$ | $2\\le n\\le10$ | $1\\le m\\le45$ |\n| $2$ | $27$ | $2\\le n\\le200000$ | $m=n-1$ |\n| $3$ | $28$ | $2\\le n\\le1000$ | $1\\le m\\le5000$ |\n| $4$ | $21$ | $2\\le n\\le200000$ | $1\\le m\\le200000$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 数据存放 (Day 1)", "background": "翻译自 [ROIR 2017 D1T3](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day1.pdf)。", "description": "一家公司大型的电信网络包含了 $n$ 台服务器，编号从 $1$ 到 $n$。其中，有一些服务器对之间通过双向通信通道连接，共有 $m$ 个通道。保证该网络中的服务器通过这些通道可以相互通信。\n\n我们称一个服务器集合 $A$ 被称为“容错集合”，当且仅当在任意一条通道失效的情况下，满足以下条件：\n- 对于任何不属于集合 $A$ 的服务器 $X$，总能通过剩下的通道将数据从集合 $A$ 中的某一台服务器传输到服务器 $X$。\n\n下图显示了一个网络和一个容错集合 $A=\\{1,4\\}$。\n\n- 对于服务器 $2$，当服务器 $1$ 和 $2$ 之间的通道失效时，可以从服务器 $4$ 传输数据；当服务器 $2$ 和 $3$ 之间的通道失效时，可以从服务器 $1$ 传输数据。当其它通道失效时，两个服务器都可以向其传输数据。  \n- 对于服务器 $3$ 和 $5$，当任何通道失效时，可以通过其它通道从服务器 $4$ 传输数据。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mif7u71b.png)\n\n公司的开发团队需要将他们的数据存放在这个网络中。为了提高数据的可用性和容错性，开发者希望将数据备份存储在多个服务器上，这些服务器需要形成一个容错集合。为了最小化开销，需要选择包含的服务器数量最少的容错集合。此外，为了了解网络的灵活性，还需要计算选择这个容错集合的不同方式的数量，由于这个数量可能很大，你只需要输出这个数对 $10^9 + 7$ 取模的结果。", "inputFormat": "第一行输入两个整数 $n$ 和 $m$，分别表示服务器的数量和通信通道的数量（$2 \\leq n \\leq 200000$，$1 \\leq m \\leq 200000$）。\n\n接下来 $m$ 行，每行包含两个整数，表示一个通信通道连接的两个服务器。\n\n输入保证：\n- 任意两个服务器之间至多通过一条通信通道直接连接，且没有通道连接服务器到它自己（即：没有重边和自环）；\n- 对于任意一对服务器，都存在路径可以通过一个或多个中间服务器将数据从其中一个服务器传输到另一个服务器（即：这个图连通）。", "outputFormat": "输出两个整数 $k,c$，用空格隔开，分别表示选择的容错集合中服务器的最小数量，以及在服务器数量最小的前提下选择容错集合的方式的数量对 $10^9 + 7$ 取模的结果。", "hint": "### 样例解释\n\n在样例中，容错集合可以为 $\\{1, 3\\},\\{1, 4\\} , \\{1, 5\\}$。\n\n### 数据范围\n\n本题满分为 $101$ 分。\n\n| 子任务 | 分值 | $n$ | $m$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $25$ | $2\\le n\\le10$ | $1\\le m\\le45$ |\n| $2$ | $27$ | $2\\le n\\le200000$ | $m=n-1$ |\n| $3$ | $28$ | $2\\le n\\le1000$ | $1\\le m\\le5000$ |\n| $4$ | $21$ | $2\\le n\\le200000$ | $1\\le m\\le200000$ |", "locale": "zh-CN"}}}
{"pid": "P11509", "type": "P", "difficulty": 6, "samples": [["4 3 2 1\n1 1\n3 2\n3\n1 4 1\n2 9 1\n1 12 2", "1 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 挖矿机器人 (Day 1)", "background": "翻译自 [ROIR 2017 D1T4](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day1.pdf)。", "description": "有一个关于开发邻近星系行星的项目。为了开采矿产资源，计划将几批机器人送往该行星。\n\n该行星的开采区域是一个大小为 $ w \\times h $ 的矩形网格区域，区域内的单元格坐标范围从 $(1, 1)$ 到 $(w, h)$。在某些单元格中设有基地，可以将机器人按批次运送到那里。整个区域共设有 $ s $ 个基地，第 $ i $ 个基地位于坐标 $(x_i, y_i)$ 处。\n\n每批机器人有三个重要参数：第 $ j $ 批机器人将送往基地 $ b_j $，包含 $ n_j $ 个机器人，并且每个机器人具有移动能力 $ m_j $。\n\n当机器人批次送到相应基地后，每个机器人都会从基地出发，沿着行星表面移动到某个单元格。如果一个机器人的移动能力为 $ m $，它最多可以进行 $ m $ 次移动，并且每次可以选择八个相邻的方向进行移动，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/auhkmcwj.png)\n\n当所有送到的机器人都停止移动后，它们会被激活并开始开采其所在单元格的矿产。在机器人的移动过程中，多个机器人可以同时处于同一个单元格，但是在激活之后，每个单元格内最多只能容纳 $ q $ 个机器人。\n\n项目团队得到了 $ t $ 批机器人的信息，这些机器人可以按顺序送往行星。然而，考虑到它们的移动限制，如果将所有机器人全部送上去，可能最终无法满足每个单元格最多只有 $ q $ 个机器人的要求。因此，项目团队需要选择前 $ k $ 批机器人（$ 0 \\leq k \\leq t $），将它们完全送到相应的基地。如果 $ k < t $，则还可以从第 $ k+1 $ 批机器人中额外选择 $ z $ 个机器人（$ 0 \\leq z < n_{k+1} $）。团队需要求出 $ k $ 的最大值，并在这个前提下最大化 $ z $（若 $k=t$，则 $z=0$）。", "inputFormat": "第一行输入四个整数 $ w, h, s, q $（$ 1 \\leq w, h \\leq 10^5, 1 \\leq s \\leq 4, 1 \\leq q \\leq 100 $）。\n\n接下来 $ s $ 行每行包含两个整数 $ x_i, y_i $，表示基地的位置（$ 1 \\leq x_i \\leq w, 1 \\leq y_i \\leq h $）。\n\n接下来一行包含一个整数 $ t $，表示机器人批次的数量（$ 1 \\leq t \\leq 100 $）。\n\n接下来的 $ t $ 行描述每个机器人批次，每行包含三个整数：$ b_j, n_j, m_j $（$ 1 \\leq b_j \\leq s, 1 \\leq n_j \\leq w \\cdot h \\cdot q, 0 \\leq m_j < \\max(w, h) $）。", "outputFormat": "输出两个整数 $ k $ 和 $ z $，意义见题目描述。", "hint": "### 样例解释\n\n在样例中，输入了以下信息：\n\n- 区域的大小是 $ 4 \\times 3 $，有两个基地，且每个单元格最多容纳 $1$ 个机器人。\n- 第一个基地位于坐标 $ (1, 1) $，第二个基地位于坐标 $ (3, 2) $。\n- 总共有 $3$ 批机器人要送往该地区。\n  - 第 $1$ 批机器人送往第 $1$ 个基地，包含 $4$ 个机器人，每个机器人的最大移动能力为 $1$。\n  - 第 $2$ 批机器人送往第 $2$ 个基地，包含 $9$ 个机器人，每个机器人的最大移动能力为 $1$。\n  - 第 $3$ 批机器人送往第 $1$ 个基地，包含 $12$ 个机器人，每个机器人的最大移动能力为 $2$。\n\n经过合理安排，可以让第一批机器人完全送达，并额外选择第二批中的 $7$ 个机器人。最终，第一批和第二批的机器人能够成功安置在网格区域内，使得每个单元格内最多有 $1$ 个机器人：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pkgodnzw.png)\n\n因此，答案是 $ k = 1 , z = 7$。\n\n### 数据范围\n\n| 子任务 | 分值 | $1\\le w,h\\le$ | $1\\le s\\le$ | $1\\le q\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $18$ | $20$ | $1$ | $1$ |\n| $2$ | $12$ | $20$ | $2$ | $1$ |\n| $3$ | $9$ | $20$ | $3$ | $1$ |\n| $4$ | $10$ | $20$ | $3$ | $100$ |\n| $5$ | $15$ | $10^5$ | $1$ | $100$ |\n| $6$ | $36$ | $10^5$ | $4$ | $100$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 挖矿机器人 (Day 1)", "background": "翻译自 [ROIR 2017 D1T4](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day1.pdf)。", "description": "有一个关于开发邻近星系行星的项目。为了开采矿产资源，计划将几批机器人送往该行星。\n\n该行星的开采区域是一个大小为 $ w \\times h $ 的矩形网格区域，区域内的单元格坐标范围从 $(1, 1)$ 到 $(w, h)$。在某些单元格中设有基地，可以将机器人按批次运送到那里。整个区域共设有 $ s $ 个基地，第 $ i $ 个基地位于坐标 $(x_i, y_i)$ 处。\n\n每批机器人有三个重要参数：第 $ j $ 批机器人将送往基地 $ b_j $，包含 $ n_j $ 个机器人，并且每个机器人具有移动能力 $ m_j $。\n\n当机器人批次送到相应基地后，每个机器人都会从基地出发，沿着行星表面移动到某个单元格。如果一个机器人的移动能力为 $ m $，它最多可以进行 $ m $ 次移动，并且每次可以选择八个相邻的方向进行移动，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/auhkmcwj.png)\n\n当所有送到的机器人都停止移动后，它们会被激活并开始开采其所在单元格的矿产。在机器人的移动过程中，多个机器人可以同时处于同一个单元格，但是在激活之后，每个单元格内最多只能容纳 $ q $ 个机器人。\n\n项目团队得到了 $ t $ 批机器人的信息，这些机器人可以按顺序送往行星。然而，考虑到它们的移动限制，如果将所有机器人全部送上去，可能最终无法满足每个单元格最多只有 $ q $ 个机器人的要求。因此，项目团队需要选择前 $ k $ 批机器人（$ 0 \\leq k \\leq t $），将它们完全送到相应的基地。如果 $ k < t $，则还可以从第 $ k+1 $ 批机器人中额外选择 $ z $ 个机器人（$ 0 \\leq z < n_{k+1} $）。团队需要求出 $ k $ 的最大值，并在这个前提下最大化 $ z $（若 $k=t$，则 $z=0$）。", "inputFormat": "第一行输入四个整数 $ w, h, s, q $（$ 1 \\leq w, h \\leq 10^5, 1 \\leq s \\leq 4, 1 \\leq q \\leq 100 $）。\n\n接下来 $ s $ 行每行包含两个整数 $ x_i, y_i $，表示基地的位置（$ 1 \\leq x_i \\leq w, 1 \\leq y_i \\leq h $）。\n\n接下来一行包含一个整数 $ t $，表示机器人批次的数量（$ 1 \\leq t \\leq 100 $）。\n\n接下来的 $ t $ 行描述每个机器人批次，每行包含三个整数：$ b_j, n_j, m_j $（$ 1 \\leq b_j \\leq s, 1 \\leq n_j \\leq w \\cdot h \\cdot q, 0 \\leq m_j < \\max(w, h) $）。", "outputFormat": "输出两个整数 $ k $ 和 $ z $，意义见题目描述。", "hint": "### 样例解释\n\n在样例中，输入了以下信息：\n\n- 区域的大小是 $ 4 \\times 3 $，有两个基地，且每个单元格最多容纳 $1$ 个机器人。\n- 第一个基地位于坐标 $ (1, 1) $，第二个基地位于坐标 $ (3, 2) $。\n- 总共有 $3$ 批机器人要送往该地区。\n  - 第 $1$ 批机器人送往第 $1$ 个基地，包含 $4$ 个机器人，每个机器人的最大移动能力为 $1$。\n  - 第 $2$ 批机器人送往第 $2$ 个基地，包含 $9$ 个机器人，每个机器人的最大移动能力为 $1$。\n  - 第 $3$ 批机器人送往第 $1$ 个基地，包含 $12$ 个机器人，每个机器人的最大移动能力为 $2$。\n\n经过合理安排，可以让第一批机器人完全送达，并额外选择第二批中的 $7$ 个机器人。最终，第一批和第二批的机器人能够成功安置在网格区域内，使得每个单元格内最多有 $1$ 个机器人：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pkgodnzw.png)\n\n因此，答案是 $ k = 1 , z = 7$。\n\n### 数据范围\n\n| 子任务 | 分值 | $1\\le w,h\\le$ | $1\\le s\\le$ | $1\\le q\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $18$ | $20$ | $1$ | $1$ |\n| $2$ | $12$ | $20$ | $2$ | $1$ |\n| $3$ | $9$ | $20$ | $3$ | $1$ |\n| $4$ | $10$ | $20$ | $3$ | $100$ |\n| $5$ | $15$ | $10^5$ | $1$ | $100$ |\n| $6$ | $36$ | $10^5$ | $4$ | $100$ |", "locale": "zh-CN"}}}
{"pid": "P11510", "type": "P", "difficulty": 2, "samples": [["2\n7\n20", "21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 自动管理系统 (Day 2)", "background": "翻译自 [ROIR 2017 D2T1](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "某区级分拣中心的程序员团队正在开发邮件配送的自动管理系统。\n\n包裹从客户的邮政网点接收。每个邮政网点接收的包裹重量为一个整数，单位是千克。包裹的最小重量为 $1$ 千克，最大重量为 $k$ 千克。接收的包裹会被放入一个专用的包裹袋中。\n\n如果在放了某个包裹后，当前包裹袋中的总重量大于等于 $x$ 千克，则该包裹袋会被运送到市级邮政中心，在市级邮政中心，包裹袋会被放入一个专用的集装箱。\n\n如果在放了某个包裹袋后，当前集装箱中的总重量大于等于 $y$ 千克，则该集装箱会被运送到区级分拣中心，在区级分拣中心，包裹最终会被送达收件人。\n\n你需要求出，当一个集装箱被运送到区级分拣中心时，它的最小可能重量是多少。", "inputFormat": "输入三行，每行一个正整数，分别为 $k,x,y$。", "outputFormat": "输出一个整数表示答案。", "hint": "### 样例解释\n\n在样例中，单个包裹的重量可能是 $1$ 千克或 $2$ 千克。当包裹袋的总重量大于等于 $7$ 千克时，包裹袋会被运送到市级邮政中心。当集装箱的总重量大于等于 $20$ 千克时，集装箱会被运送到区级分拣中心。\n\n在这个例子中，最小可能的集装箱重量为 $21$ 千克，具体方式是：\n- 通过送入 $7$ 个 $1$ 千克的包裹，或 $3$ 个 $2$ 千克的包裹和一个 $1$ 千克的包裹，让一个包裹袋达到 $7$ 千克，而被送到市级邮政中心。\n- 送三个这样的包裹袋到市级分拣中心，集装箱的重量就能达到 $21$，而被送往区级分拣中心。 \n\n可以证明，当一个集装箱被运送到区级分拣中心时，它的重量不可能小于 $21$ 千克。\n\n### 数据范围\n\n| 子任务 | 分值 | $k$ | $x,y$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $21$ | $=1$ | $\\le100$ |\n| $2$ | $18$ | $=2$ | $\\le100$ |\n| $3$ | $21$ | $\\le100$ | $\\le100$ |\n| $4$ | $17$ | $\\le40000$ | $\\le40000$ |\n| $5$ | $23$ | $\\le10^9$ | $\\le10^9$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 自动管理系统 (Day 2)", "background": "翻译自 [ROIR 2017 D2T1](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "某区级分拣中心的程序员团队正在开发邮件配送的自动管理系统。\n\n包裹从客户的邮政网点接收。每个邮政网点接收的包裹重量为一个整数，单位是千克。包裹的最小重量为 $1$ 千克，最大重量为 $k$ 千克。接收的包裹会被放入一个专用的包裹袋中。\n\n如果在放了某个包裹后，当前包裹袋中的总重量大于等于 $x$ 千克，则该包裹袋会被运送到市级邮政中心，在市级邮政中心，包裹袋会被放入一个专用的集装箱。\n\n如果在放了某个包裹袋后，当前集装箱中的总重量大于等于 $y$ 千克，则该集装箱会被运送到区级分拣中心，在区级分拣中心，包裹最终会被送达收件人。\n\n你需要求出，当一个集装箱被运送到区级分拣中心时，它的最小可能重量是多少。", "inputFormat": "输入三行，每行一个正整数，分别为 $k,x,y$。", "outputFormat": "输出一个整数表示答案。", "hint": "### 样例解释\n\n在样例中，单个包裹的重量可能是 $1$ 千克或 $2$ 千克。当包裹袋的总重量大于等于 $7$ 千克时，包裹袋会被运送到市级邮政中心。当集装箱的总重量大于等于 $20$ 千克时，集装箱会被运送到区级分拣中心。\n\n在这个例子中，最小可能的集装箱重量为 $21$ 千克，具体方式是：\n- 通过送入 $7$ 个 $1$ 千克的包裹，或 $3$ 个 $2$ 千克的包裹和一个 $1$ 千克的包裹，让一个包裹袋达到 $7$ 千克，而被送到市级邮政中心。\n- 送三个这样的包裹袋到市级分拣中心，集装箱的重量就能达到 $21$，而被送往区级分拣中心。 \n\n可以证明，当一个集装箱被运送到区级分拣中心时，它的重量不可能小于 $21$ 千克。\n\n### 数据范围\n\n| 子任务 | 分值 | $k$ | $x,y$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $21$ | $=1$ | $\\le100$ |\n| $2$ | $18$ | $=2$ | $\\le100$ |\n| $3$ | $21$ | $\\le100$ | $\\le100$ |\n| $4$ | $17$ | $\\le40000$ | $\\le40000$ |\n| $5$ | $23$ | $\\le10^9$ | $\\le10^9$ |", "locale": "zh-CN"}}}
{"pid": "P11511", "type": "P", "difficulty": 3, "samples": [["4\n-1 1\n0 -1\n1 1\n5 -1\n4\n0 1 2 3", "4\n2\n0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 大型直线对撞机 (Day 2)", "background": "翻译自 [ROIR 2017 D2T2](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "科学家在一个国际科学实验室里进行研究，研究的是粒子在大型直线对撞机（简称：BLC）实验装置中的行为。BLC 呈一条直线，粒子被放置在这条直线上的某些点上，粒子可以沿着这条直线移动。\n\n在本次实验中，BLC 上放置了 $n$ 个粒子，每个粒子要么是带一个单位负电荷的电子（$e^-$），要么是带一个单位正电荷的正电子（$e^+$）。第 $i$ 个粒子最初被放置在坐标 $x_i$ 的位置。实验开始后，粒子会沿直线向不同的方向移动：$e^-$ 沿负方向移动，而 $e^+$ 则沿正方向移动。所有粒子的速度绝对值相同，均为 $1$。\n\n如果在移动过程中，$e^-$ 和 $e^+$ 在某一位置碰撞，它们会相互作用并湮灭。它们的湮灭不会影响其他粒子的行为。\n\n科学家们选择了 $m$ 个不同的时间点 $t_1, t_2, \\dots, t_m$ 对 BLC 中的粒子进行观测。对于每个时间点，他们希望知道，在每个时间点之后，BLC 还剩下多少个粒子。时间从 $0$ 开始。恰好在观测的时间点湮灭的粒子不应被计入粒子总数。\n\n你需要编写一个程序，根据粒子的初始位置和类型，以及给定的观测时间点，来计算每个时间点后 BLC 中剩余的粒子数。", "inputFormat": "第一行包含一个整数 $n$，表示粒子的数量（$1 \\leq n \\leq 200000$）。\n\n接下来的 $n$ 行，每行包含两个整数 $x_i$ 和 $v_i$，分别表示第 $i$ 个粒子的坐标和类型（$-10^9 \\leq x_1 < x_2 < \\dots < x_n \\leq 10^9$，其中 $v_i = -1$ 表示电子 $e^-$，$v_i = 1$ 表示正电子 $e^+$）。\n\n接下来一行包含一个整数 $m$，表示观测时间点的数量（$1 \\leq m \\leq 200000$）。\n\n最后一行包含 $m$ 个整数 $t_1, t_2, \\dots, t_m$，表示科学家选择观测的时间点（$0 \\leq t_1 < t_2 < \\dots < t_m \\leq 10^9$）。", "outputFormat": "对于每个观测时间点，输出一个整数，表示该时间点之后 BLC 中剩余的粒子数量。", "hint": "### 样例解释\n\n在样例中，初始时 BLC 中有 4 个粒子：一个 $e^+$ 粒子在坐标 $-1$，一个 $e^-$ 粒子在坐标 $0$，一个 $e^+$ 粒子在坐标 $1$，一个 $e^-$ 粒子在坐标 $5$。\n\n- 在时间 $0.5$ 时，第一个 $e^+$ 粒子和第一个 $e^-$ 粒子碰撞，在坐标 $-0.5$ 处湮灭。\n- 在时间 $1$ 时，剩余的两颗粒子在坐标 $2$ 和 $4$。\n- 在时间 $2$ 时，这两个粒子在坐标 $3$ 处碰撞并湮灭。\n- 在时间 $3$ 时，BLC 中没有剩余粒子。\n\n### 数据范围\n\n| 子任务 | 分值 | $1\\le n\\le$ | $\\vert x_i\\vert\\le$ | $1\\le m\\le$ | $0\\le t_i\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $35$ | $100$ | $100$ | $1$ | $100$ |\n| $2$ | $12$ | $100$ | $10^9$ | $1$ | $10^9$ |\n| $3$ | $12$ | $200000$ | $10^9$ | $1$ | $10^9$ |\n| $4$ | $41$ | $200000$ | $10^9$ | $200000$ | $10^9$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 大型直线对撞机 (Day 2)", "background": "翻译自 [ROIR 2017 D2T2](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "科学家在一个国际科学实验室里进行研究，研究的是粒子在大型直线对撞机（简称：BLC）实验装置中的行为。BLC 呈一条直线，粒子被放置在这条直线上的某些点上，粒子可以沿着这条直线移动。\n\n在本次实验中，BLC 上放置了 $n$ 个粒子，每个粒子要么是带一个单位负电荷的电子（$e^-$），要么是带一个单位正电荷的正电子（$e^+$）。第 $i$ 个粒子最初被放置在坐标 $x_i$ 的位置。实验开始后，粒子会沿直线向不同的方向移动：$e^-$ 沿负方向移动，而 $e^+$ 则沿正方向移动。所有粒子的速度绝对值相同，均为 $1$。\n\n如果在移动过程中，$e^-$ 和 $e^+$ 在某一位置碰撞，它们会相互作用并湮灭。它们的湮灭不会影响其他粒子的行为。\n\n科学家们选择了 $m$ 个不同的时间点 $t_1, t_2, \\dots, t_m$ 对 BLC 中的粒子进行观测。对于每个时间点，他们希望知道，在每个时间点之后，BLC 还剩下多少个粒子。时间从 $0$ 开始。恰好在观测的时间点湮灭的粒子不应被计入粒子总数。\n\n你需要编写一个程序，根据粒子的初始位置和类型，以及给定的观测时间点，来计算每个时间点后 BLC 中剩余的粒子数。", "inputFormat": "第一行包含一个整数 $n$，表示粒子的数量（$1 \\leq n \\leq 200000$）。\n\n接下来的 $n$ 行，每行包含两个整数 $x_i$ 和 $v_i$，分别表示第 $i$ 个粒子的坐标和类型（$-10^9 \\leq x_1 < x_2 < \\dots < x_n \\leq 10^9$，其中 $v_i = -1$ 表示电子 $e^-$，$v_i = 1$ 表示正电子 $e^+$）。\n\n接下来一行包含一个整数 $m$，表示观测时间点的数量（$1 \\leq m \\leq 200000$）。\n\n最后一行包含 $m$ 个整数 $t_1, t_2, \\dots, t_m$，表示科学家选择观测的时间点（$0 \\leq t_1 < t_2 < \\dots < t_m \\leq 10^9$）。", "outputFormat": "对于每个观测时间点，输出一个整数，表示该时间点之后 BLC 中剩余的粒子数量。", "hint": "### 样例解释\n\n在样例中，初始时 BLC 中有 4 个粒子：一个 $e^+$ 粒子在坐标 $-1$，一个 $e^-$ 粒子在坐标 $0$，一个 $e^+$ 粒子在坐标 $1$，一个 $e^-$ 粒子在坐标 $5$。\n\n- 在时间 $0.5$ 时，第一个 $e^+$ 粒子和第一个 $e^-$ 粒子碰撞，在坐标 $-0.5$ 处湮灭。\n- 在时间 $1$ 时，剩余的两颗粒子在坐标 $2$ 和 $4$。\n- 在时间 $2$ 时，这两个粒子在坐标 $3$ 处碰撞并湮灭。\n- 在时间 $3$ 时，BLC 中没有剩余粒子。\n\n### 数据范围\n\n| 子任务 | 分值 | $1\\le n\\le$ | $\\vert x_i\\vert\\le$ | $1\\le m\\le$ | $0\\le t_i\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $35$ | $100$ | $100$ | $1$ | $100$ |\n| $2$ | $12$ | $100$ | $10^9$ | $1$ | $10^9$ |\n| $3$ | $12$ | $200000$ | $10^9$ | $1$ | $10^9$ |\n| $4$ | $41$ | $200000$ | $10^9$ | $200000$ | $10^9$ |", "locale": "zh-CN"}}}
{"pid": "P11512", "type": "P", "difficulty": 4, "samples": [["5 3\n3 5\n2 2\n2 5\n4 4\n5 3", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 力场 (Day 2)", "background": "翻译自 [ROIR 2017 D2T3](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "在一个物理生物学实验室中，研究者们正在研究通过力场对植物的辐射影响。实验装置包含一个大小为 $10^9 \\times 10^9$ 的方形平台，平台上有肥沃的土壤。平台上方放置了一个辐射源。在辐射源与平台之间，可以开启 $n$ 个力场。\n\n力场发生器安装在点 $(0, 0)$ 之上。第 $i$ 个力场是一个矩形，矩形的两条边与平台的边界平行，且矩形的两个对角线顶点坐标分别为 $(0, 0)$ 和 $(x_i, y_i)$。\n\n在实验中，研究者计划通过开启 $k$ 个力场，来研究辐射对植物的影响。研究者需要从给定的 $n$ 个力场中，选择出 $k$ 个力场进行实验。为了最大化实验效果，研究者希望选择的这 $k$ 个力场覆盖平台上的面积尽可能大。\n\n要求编写一个程序，给定 $n,k$ 和 $n$ 个力场的描述，找出选择的 $k$ 个力场，使得它们覆盖的平台区域面积的交最大，并输出该面积。", "inputFormat": "第一行输入包含两个整数 $n$ 和 $k$（$1 \\leq k \\leq n \\leq 200000$），分别表示力场的总数量以及需要选择的力场数量。\n\n接下来 $n$ 行，每行包含两个整数 $x_i$ 和 $y_i$（$1 \\leq x_i, y_i \\leq 10^9$），其中第 $i$ 行输入的数表示第 $i$ 个力场的远离原点的顶点坐标。", "outputFormat": "输出一个整数，表示选择 $k$ 个力场能覆盖的最大公共面积。", "hint": "### 样例解释\n\n下面的图中，上方是输入的 $5$ 个力场，下方是使总面积最大的最佳的选择 $3$ 个力场的方案。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hnxmjucp.png)\n\n### 数据范围\n\n| 子任务 | 分值 | $n$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $18$ | $1\\le n\\le20$ |  |\n| $2$ | $25$ | $1\\le n\\le300$ |  |\n| $3$ | $20$ | $1\\le n\\le3000$ |  |\n| $4$ | $17$ | $2\\le n\\le200000$ | $k=2$ |\n| $5$ | $20$ | $1\\le n\\le200000$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 力场 (Day 2)", "background": "翻译自 [ROIR 2017 D2T3](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "在一个物理生物学实验室中，研究者们正在研究通过力场对植物的辐射影响。实验装置包含一个大小为 $10^9 \\times 10^9$ 的方形平台，平台上有肥沃的土壤。平台上方放置了一个辐射源。在辐射源与平台之间，可以开启 $n$ 个力场。\n\n力场发生器安装在点 $(0, 0)$ 之上。第 $i$ 个力场是一个矩形，矩形的两条边与平台的边界平行，且矩形的两个对角线顶点坐标分别为 $(0, 0)$ 和 $(x_i, y_i)$。\n\n在实验中，研究者计划通过开启 $k$ 个力场，来研究辐射对植物的影响。研究者需要从给定的 $n$ 个力场中，选择出 $k$ 个力场进行实验。为了最大化实验效果，研究者希望选择的这 $k$ 个力场覆盖平台上的面积尽可能大。\n\n要求编写一个程序，给定 $n,k$ 和 $n$ 个力场的描述，找出选择的 $k$ 个力场，使得它们覆盖的平台区域面积的交最大，并输出该面积。", "inputFormat": "第一行输入包含两个整数 $n$ 和 $k$（$1 \\leq k \\leq n \\leq 200000$），分别表示力场的总数量以及需要选择的力场数量。\n\n接下来 $n$ 行，每行包含两个整数 $x_i$ 和 $y_i$（$1 \\leq x_i, y_i \\leq 10^9$），其中第 $i$ 行输入的数表示第 $i$ 个力场的远离原点的顶点坐标。", "outputFormat": "输出一个整数，表示选择 $k$ 个力场能覆盖的最大公共面积。", "hint": "### 样例解释\n\n下面的图中，上方是输入的 $5$ 个力场，下方是使总面积最大的最佳的选择 $3$ 个力场的方案。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hnxmjucp.png)\n\n### 数据范围\n\n| 子任务 | 分值 | $n$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $18$ | $1\\le n\\le20$ |  |\n| $2$ | $25$ | $1\\le n\\le300$ |  |\n| $3$ | $20$ | $1\\le n\\le3000$ |  |\n| $4$ | $17$ | $2\\le n\\le200000$ | $k=2$ |\n| $5$ | $20$ | $1\\le n\\le200000$ |  |", "locale": "zh-CN"}}}
{"pid": "P11513", "type": "P", "difficulty": 6, "samples": [["7\n1 1 2 2 3 3\n3\n1 1\n3 1\n1 2", "3 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2017] 培训 (Day 2)", "background": "翻译自 [ROIR 2017 D2T4](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "某公司共有 $n$ 名员工，每个员工都有一个唯一的编号，编号从 $1$ 到 $n$。编号为 $1$ 的员工是公司总经理，除了总经理之外，每个员工都有一个直接上级，员工 $i$ 的直接上级编号为 $p_i$，且有 $p_i < i$。\n\n若 $p_x = y$，则员工 $x$ 被称为员工 $y$ 的第 $1$ 层下属；若员工 $p_x$ 是员工 $y$ 的第 $k-1$ 层下属，则员工 $x$ 被称为员工 $y$ 的第 $k$ 层下属。\n\n现在，公司总经理可以选择一些员工参加培训。他决定选择两个数字 $L$ 和 $R$，将所有编号满足 $L \\leq i \\leq R$ 的员工送去培训。\n\n在确定 $L$ 和 $R$ 之前，总经理收到了 $m$ 条员工的要求，第 $j$ 条要求用两个数字 $u_j$ 和 $k_j$ 表示，这代表员工 $u_j$ 希望其第 $k_j$ 层下属中**至少有一个**被送去培训。为了节省费用，总经理希望确定 $L$ 和 $R$ 的值使得送去培训的员工人数最少，并且所有员工的要求都能满足。\n\n需要编写程序，根据公司内部的上下级关系和员工的要求，找出一对 $L$ 和 $R$，使得所有要求都能得到满足，并且送去培训的员工人数最少。如果有多个满足条件的 $(L, R)$ 对，选择其中 $L$ 最小的那个。", "inputFormat": "第一行输入一个整数 $n$，表示公司员工的总数（$2 \\leq n \\leq 200000$）。\n\n第二行输入 $n-1$ 个整数 $p_2, p_3, \\dots, p_n$，其中 $p_i$ 表示员工 $i$ 的直接上级编号，且 $1 \\leq p_i < i$。\n\n第三行输入一个整数 $m$，表示员工的要求数量。\n\n接下来 $m$ 行，每行包含两个整数 $u_j$ 和 $k_j$，表示第 $j$ 条要求。", "outputFormat": "输出两个整数 $L$ 和 $R$，表示选择的员工编号区间。如果存在多个符合条件的 $(L, R)$ 对，输出其中 $L$ 最小的那一对。", "hint": "### 样例解释\n\n员工编号为 $3,4,5,6$ 的员工将被送去培训。这满足所有要求，因为员工 $3$ 是员工 $1$ 的第 $1$ 层下属，员工 $4$ 是员工 $1$ 的第 $2$ 层下属，员工 $6$ 是员工 $3$ 的第 $1$ 层下属。\n\n### 数据范围\n\n| 子任务 | 分值 | $2\\le n\\le$ | $1\\le m\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $19$ | $50$ | $50$ |  |\n| $2$ | $25$ | $3000$ | $3000$ |  |\n| $3$ | $21$ | $200000$ | $200000$ | $p_i=i-1$ |\n| $4$ | $35$ | $200000$ | $200000$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2017] 培训 (Day 2)", "background": "翻译自 [ROIR 2017 D2T4](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。", "description": "某公司共有 $n$ 名员工，每个员工都有一个唯一的编号，编号从 $1$ 到 $n$。编号为 $1$ 的员工是公司总经理，除了总经理之外，每个员工都有一个直接上级，员工 $i$ 的直接上级编号为 $p_i$，且有 $p_i < i$。\n\n若 $p_x = y$，则员工 $x$ 被称为员工 $y$ 的第 $1$ 层下属；若员工 $p_x$ 是员工 $y$ 的第 $k-1$ 层下属，则员工 $x$ 被称为员工 $y$ 的第 $k$ 层下属。\n\n现在，公司总经理可以选择一些员工参加培训。他决定选择两个数字 $L$ 和 $R$，将所有编号满足 $L \\leq i \\leq R$ 的员工送去培训。\n\n在确定 $L$ 和 $R$ 之前，总经理收到了 $m$ 条员工的要求，第 $j$ 条要求用两个数字 $u_j$ 和 $k_j$ 表示，这代表员工 $u_j$ 希望其第 $k_j$ 层下属中**至少有一个**被送去培训。为了节省费用，总经理希望确定 $L$ 和 $R$ 的值使得送去培训的员工人数最少，并且所有员工的要求都能满足。\n\n需要编写程序，根据公司内部的上下级关系和员工的要求，找出一对 $L$ 和 $R$，使得所有要求都能得到满足，并且送去培训的员工人数最少。如果有多个满足条件的 $(L, R)$ 对，选择其中 $L$ 最小的那个。", "inputFormat": "第一行输入一个整数 $n$，表示公司员工的总数（$2 \\leq n \\leq 200000$）。\n\n第二行输入 $n-1$ 个整数 $p_2, p_3, \\dots, p_n$，其中 $p_i$ 表示员工 $i$ 的直接上级编号，且 $1 \\leq p_i < i$。\n\n第三行输入一个整数 $m$，表示员工的要求数量。\n\n接下来 $m$ 行，每行包含两个整数 $u_j$ 和 $k_j$，表示第 $j$ 条要求。", "outputFormat": "输出两个整数 $L$ 和 $R$，表示选择的员工编号区间。如果存在多个符合条件的 $(L, R)$ 对，输出其中 $L$ 最小的那一对。", "hint": "### 样例解释\n\n员工编号为 $3,4,5,6$ 的员工将被送去培训。这满足所有要求，因为员工 $3$ 是员工 $1$ 的第 $1$ 层下属，员工 $4$ 是员工 $1$ 的第 $2$ 层下属，员工 $6$ 是员工 $3$ 的第 $1$ 层下属。\n\n### 数据范围\n\n| 子任务 | 分值 | $2\\le n\\le$ | $1\\le m\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $19$ | $50$ | $50$ |  |\n| $2$ | $25$ | $3000$ | $3000$ |  |\n| $3$ | $21$ | $200000$ | $200000$ | $p_i=i-1$ |\n| $4$ | $35$ | $200000$ | $200000$ |  |", "locale": "zh-CN"}}}
{"pid": "P11514", "type": "P", "difficulty": 4, "samples": [["4 5\n6 5 9 2\n1 2 0\n3 2 3\n4 3 6\n1 3 5\n2 4 2", "6\n6\n9\n4"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "CCO（加拿大）"], "title": "[CCO 2024] Treasure Hunt", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P1题](https://dmoj.ca/problem/cco24p1)。", "description": "有 $n$ 个岛屿通过 $m$ 条海路相连，每条路连接了两个岛屿 $a_i$ 和 $b_i$，需要花费 $c_i$ 个硬币。Perry 想要找到一条路径从他当前所在的岛屿出发，在旅途中开启宝箱并收集金币，并保证得到最大可能收益。事实证明，击退海怪的代价是相当昂贵的。为了寻找下一笔大的战利品，Perry 已经勘察了 $n$ 个岛屿，并确定第 $i$ 个岛屿上有一个装有 $v_i$ 枚硬币的宝箱。\n\n他决定从岛屿 $X$ 开始，沿着一些的海上路线航行（可能不航行），最终到达岛屿 $Y$。在他的旅程结束时，他会在岛屿 $Y$ 打开箱子，收集战利品。\n\n然而 Perry 不知道自己目前所在的岛屿！因此，对于每一个可能的起点岛屿 $X$，他都想知道从该岛屿出发的所有旅程中所能获得的最大可能的硬币数。你能帮助他计算这些值吗？你可以假设佩里有足够的硬币来穿越他选择的任何海上路线；他只关心下一次旅程的净收益。", "inputFormat": "第一行两个整数 $n, m$。\n\n第二行 $n$ 个整数 $v_i$。\n\n往后 $m$ 行每行三个整数 $a_i, b_i, c_i$，其描述了一条海路 $i$。\n\n保证无重边无自环。", "outputFormat": "$n$ 行，每行一个整数，第 $i$ 行的整数代表以点 $i$ 为起点岛屿所获得的最大可能的硬币数。", "hint": "### 数据范围\n| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $0$ | $0$ | 样例 |\n| Subtask $1$ | $20$ | $1 \\le n \\le 3000$，$0 \\le m \\le 3000$ |\n| Subtask $2$ | $20$ | $1 \\le n \\le 10^6$，$0 \\le m \\le 10^6$，对于每个岛屿 $i$，$c_i=0$ 或 $c_i=10^9$ |\n| Subtask $3$ | $28$ | $1 \\le n \\le 10^6$，$0 \\le m \\le 10^6$，任意一对岛屿之间恰好有一条路径 |\n| Subtask $4$ | $32$ | 无特殊限制 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$，$0 \\le m \\le 10^6$，$0 \\le v_i,c_i \\le 10^9$，$1 \\le a_i,b_i \\le n$。\n### 样例解释 #1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hj3kdxm6.png)\n\n对于第一个和第三个岛屿，最好待在岛上并打开岛上的箱子。\n\n对于第二个岛屿，Perry 可以前往第一个岛屿并打开那里的箱子。这将带来 $6 - 0 = 6$ 枚硬币的净收益，是最佳的净收益。\n\n对于第四个岛屿，Perry 可以前往第二个和第三个岛屿并打开那里的箱子。这将带来 $9 - 2 - 3 = 4$ 枚硬币的净收益，是最佳的净收益。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2024] Treasure Hunt", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P1题](https://dmoj.ca/problem/cco24p1)。", "description": "有 $n$ 个岛屿通过 $m$ 条海路相连，每条路连接了两个岛屿 $a_i$ 和 $b_i$，需要花费 $c_i$ 个硬币。Perry 想要找到一条路径从他当前所在的岛屿出发，在旅途中开启宝箱并收集金币，并保证得到最大可能收益。事实证明，击退海怪的代价是相当昂贵的。为了寻找下一笔大的战利品，Perry 已经勘察了 $n$ 个岛屿，并确定第 $i$ 个岛屿上有一个装有 $v_i$ 枚硬币的宝箱。\n\n他决定从岛屿 $X$ 开始，沿着一些的海上路线航行（可能不航行），最终到达岛屿 $Y$。在他的旅程结束时，他会在岛屿 $Y$ 打开箱子，收集战利品。\n\n然而 Perry 不知道自己目前所在的岛屿！因此，对于每一个可能的起点岛屿 $X$，他都想知道从该岛屿出发的所有旅程中所能获得的最大可能的硬币数。你能帮助他计算这些值吗？你可以假设佩里有足够的硬币来穿越他选择的任何海上路线；他只关心下一次旅程的净收益。", "inputFormat": "第一行两个整数 $n, m$。\n\n第二行 $n$ 个整数 $v_i$。\n\n往后 $m$ 行每行三个整数 $a_i, b_i, c_i$，其描述了一条海路 $i$。\n\n保证无重边无自环。", "outputFormat": "$n$ 行，每行一个整数，第 $i$ 行的整数代表以点 $i$ 为起点岛屿所获得的最大可能的硬币数。", "hint": "### 数据范围\n| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $0$ | $0$ | 样例 |\n| Subtask $1$ | $20$ | $1 \\le n \\le 3000$，$0 \\le m \\le 3000$ |\n| Subtask $2$ | $20$ | $1 \\le n \\le 10^6$，$0 \\le m \\le 10^6$，对于每个岛屿 $i$，$c_i=0$ 或 $c_i=10^9$ |\n| Subtask $3$ | $28$ | $1 \\le n \\le 10^6$，$0 \\le m \\le 10^6$，任意一对岛屿之间恰好有一条路径 |\n| Subtask $4$ | $32$ | 无特殊限制 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$，$0 \\le m \\le 10^6$，$0 \\le v_i,c_i \\le 10^9$，$1 \\le a_i,b_i \\le n$。\n### 样例解释 #1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hj3kdxm6.png)\n\n对于第一个和第三个岛屿，最好待在岛上并打开岛上的箱子。\n\n对于第二个岛屿，Perry 可以前往第一个岛屿并打开那里的箱子。这将带来 $6 - 0 = 6$ 枚硬币的净收益，是最佳的净收益。\n\n对于第四个岛屿，Perry 可以前往第二个和第三个岛屿并打开那里的箱子。这将带来 $9 - 2 - 3 = 4$ 枚硬币的净收益，是最佳的净收益。", "locale": "zh-CN"}}}
{"pid": "P11515", "type": "P", "difficulty": 5, "samples": [["7\n1 2 3 2 2 1 3\n2 3 1 2 3 2 1", "2\n1 2 1 2 1 2 2\n1 2 2 2 1 2 1"], ["2\n1 2\n1 1\n", "-1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "CCO（加拿大）"], "title": "[CCO 2024] Pizza Party", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P2题](https://dmoj.ca/problem/cco24p2)。\n", "description": "Troy 正在完善他最新的计划——“HackCCO”！大家都知道，黑客马拉松最大的吸引力就是免费的食物。因此，为了确保“HackCCO”取得空前的成功，Troy 订购了一辆装满 $n$ 份披萨的大车，其中从车的顶部往下数第 $i$ 份披萨的风味是 $a_i$。\n\n披萨车到达后，Troy 需要将它们按照一定的数量堆放在一张长桌上。为此，他从车顶部逐个取下披萨，并将它们放在桌上，每次要么将披萨放在另一堆披萨的顶部，要么在桌上形成新的堆叠。\n\n饥饿的 HackCCO 参与者们排成一排，依次从桌上取披萨。特洛伊知道队伍中第 $i$ 个人最喜欢的披萨口味是 $b_i$。当第 $i$ 个人走到餐桌前时，如果他们在任何一堆顶部看到他们喜欢的口味的比萨，他们会随机拿走其中任意一个。否则，他们什么都不会拿，会饿着肚子离开餐桌。\n\nTroy 不想让任何人饿着离开餐桌。因此，他请你帮助他找到一种将比萨放在餐桌上的排列方式，使得没有人会饿着离开。此外，在所有这样的排列方式中，Troy 想让你找到一个在餐桌上创建最小数量的堆放的排列方式（毕竟，餐桌只能这么长）。帮助他找到这样的排列方式，或者确定这是不可能的！", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_1, a _ 2, \\ldots, a _ n$。\n\n第三行 $n$ 个正整数 $b _ 1, b _ 2, \\ldots, b _ n$。", "outputFormat": "如果不可能按期望来排列披萨，则输出 `-1`。\n\n否则，输出应该由三行组成。在第一行输出一个整数 $K$，表示最小堆数。在第二行输出 $N$ 个空格分隔的整数 $c_1 \\sim c_n$（$1\\le c_i \\le k$），表示第 $i$ 个披萨应该放在第 $c_i$ 堆上。\n\n在第三行输出 $N$ 个空格分隔的整数 $d_1\\sim d_N$（$1\\le d_i\\le K$），表示第 $i$ 个排队的人从第 $d_i$ 堆里拿披萨。第 $i$ 个人拿的披萨需要满足他们的口味需求。", "hint": "### 数据范围\n| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $1$ | $12$ | $1 \\le n \\le 10^6$，$1 \\le a_i,b_i \\le 2$ |\n| Subtask $2$ | $16$ | $1\\le n \\le 5000$，保证 $a_i$ 互不相同 |\n| Subtask $3$ | $20$ | $1 \\le n \\le 10^6$，保证 $a_i$ 互不相同 |\n| Subtask $4$ | $24$ | $1\\le n \\le 5000$ |\n| Subtask $5$ | $28$ | $1 \\le n \\le 10^6$ |\n\n### 说明\n出题人表明原题中的 Subtask $4$ 和 Subtask $5$ 可能没有正确解法，故不对 Subtask $4$ 和 Subtask $5$ 进行评测，故该题满分为 $48$ 分。\n\nSubtask $0$ 为样例。\n\n### 样例解释 #1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w57fcsrw.png)\n\n上图是桌子上披萨的排列示意图，红色、黄色、蓝色盒子分别代表口味 $1$、$2$ 和 $3$ 的披萨。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2024] Pizza Party", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P2题](https://dmoj.ca/problem/cco24p2)。\n", "description": "Troy 正在完善他最新的计划——“HackCCO”！大家都知道，黑客马拉松最大的吸引力就是免费的食物。因此，为了确保“HackCCO”取得空前的成功，Troy 订购了一辆装满 $n$ 份披萨的大车，其中从车的顶部往下数第 $i$ 份披萨的风味是 $a_i$。\n\n披萨车到达后，Troy 需要将它们按照一定的数量堆放在一张长桌上。为此，他从车顶部逐个取下披萨，并将它们放在桌上，每次要么将披萨放在另一堆披萨的顶部，要么在桌上形成新的堆叠。\n\n饥饿的 HackCCO 参与者们排成一排，依次从桌上取披萨。特洛伊知道队伍中第 $i$ 个人最喜欢的披萨口味是 $b_i$。当第 $i$ 个人走到餐桌前时，如果他们在任何一堆顶部看到他们喜欢的口味的比萨，他们会随机拿走其中任意一个。否则，他们什么都不会拿，会饿着肚子离开餐桌。\n\nTroy 不想让任何人饿着离开餐桌。因此，他请你帮助他找到一种将比萨放在餐桌上的排列方式，使得没有人会饿着离开。此外，在所有这样的排列方式中，Troy 想让你找到一个在餐桌上创建最小数量的堆放的排列方式（毕竟，餐桌只能这么长）。帮助他找到这样的排列方式，或者确定这是不可能的！", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_1, a _ 2, \\ldots, a _ n$。\n\n第三行 $n$ 个正整数 $b _ 1, b _ 2, \\ldots, b _ n$。", "outputFormat": "如果不可能按期望来排列披萨，则输出 `-1`。\n\n否则，输出应该由三行组成。在第一行输出一个整数 $K$，表示最小堆数。在第二行输出 $N$ 个空格分隔的整数 $c_1 \\sim c_n$（$1\\le c_i \\le k$），表示第 $i$ 个披萨应该放在第 $c_i$ 堆上。\n\n在第三行输出 $N$ 个空格分隔的整数 $d_1\\sim d_N$（$1\\le d_i\\le K$），表示第 $i$ 个排队的人从第 $d_i$ 堆里拿披萨。第 $i$ 个人拿的披萨需要满足他们的口味需求。", "hint": "### 数据范围\n| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $1$ | $12$ | $1 \\le n \\le 10^6$，$1 \\le a_i,b_i \\le 2$ |\n| Subtask $2$ | $16$ | $1\\le n \\le 5000$，保证 $a_i$ 互不相同 |\n| Subtask $3$ | $20$ | $1 \\le n \\le 10^6$，保证 $a_i$ 互不相同 |\n| Subtask $4$ | $24$ | $1\\le n \\le 5000$ |\n| Subtask $5$ | $28$ | $1 \\le n \\le 10^6$ |\n\n### 说明\n出题人表明原题中的 Subtask $4$ 和 Subtask $5$ 可能没有正确解法，故不对 Subtask $4$ 和 Subtask $5$ 进行评测，故该题满分为 $48$ 分。\n\nSubtask $0$ 为样例。\n\n### 样例解释 #1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w57fcsrw.png)\n\n上图是桌子上披萨的排列示意图，红色、黄色、蓝色盒子分别代表口味 $1$、$2$ 和 $3$ 的披萨。\n", "locale": "zh-CN"}}}
{"pid": "P11516", "type": "P", "difficulty": 7, "samples": [["9 6 2 1\n1 3\n1 6\n2 4\n2 5\n2 7\n3 9\n4 6\n4 8", "2"], ["7 2 3 2\n2 7\n7 3\n3 1\n1 4\n4 5\n5 6", "3"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "线段树", "二分", "2024", "CCO（加拿大）", "树形 DP"], "title": "[CCO 2024] Summer Driving", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P3题](https://dmoj.ca/problem/cco24p3)。\n\n时限：$6 \\texttt{s}$", "description": "有 $N$ 个城市，从 $1$ 号到 $N$ 号。有 $N-1$ 条道路将这些城市连成了一棵树，道路从 $1$ 号到 $N-1$ 号编号，第 $i$ 条道路连接城市 $u_i$ 和城市 $v_i$。\n\nAlice 和 Bob 一起旅行，从城市 $R$ 出发。为了使他们的旅行更有趣，他们设计了一个游戏。Alice 和 Bob 轮流驾驶，从 Alice 开始。\n\n在 Alice 的回合，她必须沿着**恰好** $A$ 条**他们**从未走过的道路行驶。\n\n在 Bob 的回合，他必须沿着至多 $B$ 条道路（可能为零）行驶。\n\n在 Alice 无法按她的方式行驶时，Bob 沿着至多 $B$ 条他们以前**从未驾驶过**的道路行驶，然后游戏结束。\n\nAlice 想要最大化游戏结束时所在的城市编号，而 Bob 想要它最小化。那么当两人的操作都最优时，游戏结束时他们所在的城市编号是多少？", "inputFormat": "第一行四个整数，分别是 $N,R,A,B$。\n\n往后 $N-1$ 行每行两个整数 $u_i,v_i$（$1\\le u_i,v_i \\le N,u_i \\neq v_i$），描述一条道路。", "outputFormat": "输出 Alice 和 Bob 旅程结束时所在的城市，假设他们使用最优方式。", "hint": "### 数据范围\n| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $1$ | $4$ | $2 \\le N \\le 300000$，$A \\le B$ |\n| Subtask $2$ | $16$ | $2 \\le N \\le 300000$，任何城市最多有两条路连接，最多有一条路连接到城市 $R$。 |\n| Subtask $3$ | $20$ | $2 \\le N \\le 300$ |\n| Subtask $4$ | $12$ | $2 \\le N \\le 3000$ |\n| Subtask $5$ | $16$ | $2 \\le N \\le 100000$，$B\\le 10$ |\n| Subtask $6$ | $24$ | $2 \\le N \\le 100000$ |\n| Subtask $7$ | $8$ | $2 \\le N \\le 300000$ |\n\nSubtask $0$ 为样例。\n\n### 样例解释 #1\n\n在 Alice 的第一回合中，她有三个选择：前往城市 $2$、$3$ 或 $8$。\n\n如果 Alice 前往城市 $2$，Bob 可以在他的回合中不走任何道路。这样一来，Alice 就无法沿两条从未走过的新道路行驶，因此游戏进入最终阶段。在最终阶段，Bob 可以选择不走任何道路，从而结束在城市 $2$。\n\n如果 Alice 前往城市 $3$，Bob 可以选择从城市 $1$ 走一条道路。这样一来，Alice 就无法沿两条从未走过的新道路行驶，因此游戏进入最终阶段。在最终阶段，Bob 唯一的选择是不走任何道路，从而结束在城市 $1$。\n\n如果 Alice 前往城市 $8$，Bob 可以选择从城市 $4$ 走一条道路。然后，Alice 可以前往城市 $5$ 或 $7$ 中的任意一个。在两种情况下，Bob 都可以从城市 $2$ 走一条道路。Alice 无法再沿两条从未走过的新道路行驶，因此游戏进入最终阶段。在最终阶段，Bob 可以选择不走任何道路，从而结束在城市 $2$。\n\n在所有情况下，Bob 都可以使游戏结束在城市 $1$ 或 $2$。因此在最佳情况下，游戏结束在城市 $2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2024] Summer Driving", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P3题](https://dmoj.ca/problem/cco24p3)。\n\n时限：$6 \\texttt{s}$", "description": "有 $N$ 个城市，从 $1$ 号到 $N$ 号。有 $N-1$ 条道路将这些城市连成了一棵树，道路从 $1$ 号到 $N-1$ 号编号，第 $i$ 条道路连接城市 $u_i$ 和城市 $v_i$。\n\nAlice 和 Bob 一起旅行，从城市 $R$ 出发。为了使他们的旅行更有趣，他们设计了一个游戏。Alice 和 Bob 轮流驾驶，从 Alice 开始。\n\n在 Alice 的回合，她必须沿着**恰好** $A$ 条**他们**从未走过的道路行驶。\n\n在 Bob 的回合，他必须沿着至多 $B$ 条道路（可能为零）行驶。\n\n在 Alice 无法按她的方式行驶时，Bob 沿着至多 $B$ 条他们以前**从未驾驶过**的道路行驶，然后游戏结束。\n\nAlice 想要最大化游戏结束时所在的城市编号，而 Bob 想要它最小化。那么当两人的操作都最优时，游戏结束时他们所在的城市编号是多少？", "inputFormat": "第一行四个整数，分别是 $N,R,A,B$。\n\n往后 $N-1$ 行每行两个整数 $u_i,v_i$（$1\\le u_i,v_i \\le N,u_i \\neq v_i$），描述一条道路。", "outputFormat": "输出 Alice 和 Bob 旅程结束时所在的城市，假设他们使用最优方式。", "hint": "### 数据范围\n| Subtask | 分数 | 约束 |\n| :----------: | :----------: | :----------: |\n| Subtask $1$ | $4$ | $2 \\le N \\le 300000$，$A \\le B$ |\n| Subtask $2$ | $16$ | $2 \\le N \\le 300000$，任何城市最多有两条路连接，最多有一条路连接到城市 $R$。 |\n| Subtask $3$ | $20$ | $2 \\le N \\le 300$ |\n| Subtask $4$ | $12$ | $2 \\le N \\le 3000$ |\n| Subtask $5$ | $16$ | $2 \\le N \\le 100000$，$B\\le 10$ |\n| Subtask $6$ | $24$ | $2 \\le N \\le 100000$ |\n| Subtask $7$ | $8$ | $2 \\le N \\le 300000$ |\n\nSubtask $0$ 为样例。\n\n### 样例解释 #1\n\n在 Alice 的第一回合中，她有三个选择：前往城市 $2$、$3$ 或 $8$。\n\n如果 Alice 前往城市 $2$，Bob 可以在他的回合中不走任何道路。这样一来，Alice 就无法沿两条从未走过的新道路行驶，因此游戏进入最终阶段。在最终阶段，Bob 可以选择不走任何道路，从而结束在城市 $2$。\n\n如果 Alice 前往城市 $3$，Bob 可以选择从城市 $1$ 走一条道路。这样一来，Alice 就无法沿两条从未走过的新道路行驶，因此游戏进入最终阶段。在最终阶段，Bob 唯一的选择是不走任何道路，从而结束在城市 $1$。\n\n如果 Alice 前往城市 $8$，Bob 可以选择从城市 $4$ 走一条道路。然后，Alice 可以前往城市 $5$ 或 $7$ 中的任意一个。在两种情况下，Bob 都可以从城市 $2$ 走一条道路。Alice 无法再沿两条从未走过的新道路行驶，因此游戏进入最终阶段。在最终阶段，Bob 可以选择不走任何道路，从而结束在城市 $2$。\n\n在所有情况下，Bob 都可以使游戏结束在城市 $1$ 或 $2$。因此在最佳情况下，游戏结束在城市 $2$。", "locale": "zh-CN"}}}
{"pid": "P11517", "type": "P", "difficulty": 6, "samples": [["5\n0 2\n3 2\n1 4\n2 4", "8\n2 2 4 4 1 1 1 1\n1 1 1 1 1 1 1 1\n3 3 2 2 3 3 2 2\n3 3 2 2 0 0 2 2\n4 4 4 4 2 2 2 2\n0 2 2 3 3 3 3 2\n1 4 4 2 2 0 0 0\n2 3 3 3 3 3 3 3\n3 3 3 3 3 3 3 3\n4 1 1 1 1 4 4 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "Special Judge", "CCO（加拿大）"], "title": "[CCO 2024] Infiltration", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P4题](https://dmoj.ca/problem/cco24p4)。", "description": "Ondrej 和 Edward 计划潜入邪恶组织 AQT 的基地。AQT 基地可以想象成一个由房间构成的树形结构，总共 $100$ 个房间，编号从 $0$ 到 $99$。为了完成任务，他们需要先让自己被抓进基地，然后在午夜同时逃脱并会合，再里应外合捣毁 AQT。\n\n问题是，他们被关押的房间是不同的，而且彼此不知道对方的位置。为了尽快碰头，他们制定了以下行动计划：\n\n- Ondrej 只能在奇数分钟行动，可以选择待在当前房间或移动到相邻的房间之一。\n- Edward 只能在偶数分钟行动，方式同上。\n\n记 $V(A, R, T)$ 表示某个间谍 $A$ 在特定时间 $T$ 应该待在房间 $R$。例如，$V(\\text{Ondrej}, 10, 3)$ 表示 Ondrej 在午夜后第 $3$ 分钟应该待在编号为 $10$ 的房间。根据这个记法，他们要在某个时刻 $t(o, e)$ 满足 $V(\\text{Ondrej}, o, t(o, e)) = V(\\text{Edward}, e, t(o, e))$，这样他们就算汇合了。\n\nOndrej 和 Edward 希望无论他们被关在哪里，汇合的时间都尽可能短。记距离 $d$ 为他们的初始房间之间最少需要经过的走廊数量。请设计一个策略，使得在所有可能的初始房间组合下，汇合时间 $t$ 与距离 $d$ 的比值 $\\frac{t(o, e)}{d(o, e)}$ 尽可能小。", "inputFormat": "输入的第一行包含 $N$。\n\n接下来的 $N−1$ 行每一行包含两个空格分隔的整数，表示这两个房间之间有双向走廊。", "outputFormat": "第一行应包含一个正整数 $T$，表示每个起始房间的条目数量，注意你需确保 $T \\le 1440$。\n\n接下来 $N \\times 2$，分别输出奥德雷和爱德华的计划。\n\n对于每个人的计划，输出 $N$ 行，每行 $T$ 个整数 $t_i$，表示时间 $i$ 时这个间谍在的房间编号。", "hint": "如果输出不合法，或者存在测试用例和初始房间组合 $(o, e)$ 使得间谍在 $T$ 分钟之前没有汇合，则不得分。\n\n否则，记所有测试用例和初始房间组合 $(o, e)(o \\neq e) $ 中最大的 $\\frac{t(o, e)}{d(o, e)}$ 为 $S$。根据 $S$ 的大小，可以获得的最高分如下：\n\n\n| 分值 | $S$ 的限制 |\n| :----------: | :----------: |\n|$12$ | $200<S \\leq 1440$|\n|$24$ | $100<S \\leq 200$|\n|$32$ | $50<S \\leq 100$|\n|$40$ | $40<S \\leq 50$|\n|$48$ | $30<S \\leq 40$|\n|$60$ | $25<S \\leq 30$|\n|$68$ | $20<S \\leq 25$|\n|$72$ | $19<S \\leq 20$|\n|$76$ | $18<S \\leq 19$|\n|$80$ | $17<S \\leq 18$|\n|$84$ | $16<S \\leq 17$|\n|$88$ | $15<S \\leq 16$|\n|$100$ | $S \\le 15$|\n\n对于所有数据，有 $N=100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2024] Infiltration", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P4题](https://dmoj.ca/problem/cco24p4)。", "description": "Ondrej 和 Edward 计划潜入邪恶组织 AQT 的基地。AQT 基地可以想象成一个由房间构成的树形结构，总共 $100$ 个房间，编号从 $0$ 到 $99$。为了完成任务，他们需要先让自己被抓进基地，然后在午夜同时逃脱并会合，再里应外合捣毁 AQT。\n\n问题是，他们被关押的房间是不同的，而且彼此不知道对方的位置。为了尽快碰头，他们制定了以下行动计划：\n\n- Ondrej 只能在奇数分钟行动，可以选择待在当前房间或移动到相邻的房间之一。\n- Edward 只能在偶数分钟行动，方式同上。\n\n记 $V(A, R, T)$ 表示某个间谍 $A$ 在特定时间 $T$ 应该待在房间 $R$。例如，$V(\\text{Ondrej}, 10, 3)$ 表示 Ondrej 在午夜后第 $3$ 分钟应该待在编号为 $10$ 的房间。根据这个记法，他们要在某个时刻 $t(o, e)$ 满足 $V(\\text{Ondrej}, o, t(o, e)) = V(\\text{Edward}, e, t(o, e))$，这样他们就算汇合了。\n\nOndrej 和 Edward 希望无论他们被关在哪里，汇合的时间都尽可能短。记距离 $d$ 为他们的初始房间之间最少需要经过的走廊数量。请设计一个策略，使得在所有可能的初始房间组合下，汇合时间 $t$ 与距离 $d$ 的比值 $\\frac{t(o, e)}{d(o, e)}$ 尽可能小。", "inputFormat": "输入的第一行包含 $N$。\n\n接下来的 $N−1$ 行每一行包含两个空格分隔的整数，表示这两个房间之间有双向走廊。", "outputFormat": "第一行应包含一个正整数 $T$，表示每个起始房间的条目数量，注意你需确保 $T \\le 1440$。\n\n接下来 $N \\times 2$，分别输出奥德雷和爱德华的计划。\n\n对于每个人的计划，输出 $N$ 行，每行 $T$ 个整数 $t_i$，表示时间 $i$ 时这个间谍在的房间编号。", "hint": "如果输出不合法，或者存在测试用例和初始房间组合 $(o, e)$ 使得间谍在 $T$ 分钟之前没有汇合，则不得分。\n\n否则，记所有测试用例和初始房间组合 $(o, e)(o \\neq e) $ 中最大的 $\\frac{t(o, e)}{d(o, e)}$ 为 $S$。根据 $S$ 的大小，可以获得的最高分如下：\n\n\n| 分值 | $S$ 的限制 |\n| :----------: | :----------: |\n|$12$ | $200<S \\leq 1440$|\n|$24$ | $100<S \\leq 200$|\n|$32$ | $50<S \\leq 100$|\n|$40$ | $40<S \\leq 50$|\n|$48$ | $30<S \\leq 40$|\n|$60$ | $25<S \\leq 30$|\n|$68$ | $20<S \\leq 25$|\n|$72$ | $19<S \\leq 20$|\n|$76$ | $18<S \\leq 19$|\n|$80$ | $17<S \\leq 18$|\n|$84$ | $16<S \\leq 17$|\n|$88$ | $15<S \\leq 16$|\n|$100$ | $S \\le 15$|\n\n对于所有数据，有 $N=100$。", "locale": "zh-CN"}}}
{"pid": "P11518", "type": "P", "difficulty": 5, "samples": [["5\n1 2 3 2 3", "4"], ["5\n1 2 1 3 1", "6"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "线段树", "2024", "CCO（加拿大）"], "title": "[CCO 2024] Heavy Light Decomposition", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P5题](https://dmoj.ca/problem/cco24p5)。", "description": "在一个只包含正整数的数组中，如果一个数字在数组里多次出现，我们就称它为“重的”，否则为“轻的”。定义好的数组是指数组里的数字交替出现“轻的”元素和“重的”元素。给你一个数组 $a_{1}, \\ldots, a_{N}$，请计算把它划分成若干个连续的子数组，使得每个子数组本身都是好数组的方案数。由于答案可能很大，请将最终结果对 $1000003$ 取模输出。", "inputFormat": "第一行包含一个正整数 $N$。\n\n第二行包含 $N$ 个正整数 $a_{1}, \\ldots, a_{N}\\ (1 \\leq a_{i} \\leq N)$，表示数组中的元素。", "outputFormat": "输出一行一个整数，表示方案数对 $1000003$ 取模后的结果。", "hint": "| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $12$ | $2 \\leq N \\leq 50000$，对于所有的 $i$，$a_{i}\\leq 26$ |\n| $2$ | $16$ | $2 \\leq N \\leq 5000$|\n| $3$ | $20$ | $2 \\leq N \\leq 5\\times 10^5$，每个序号为奇数的元素 $a_{i}$ 都必须等于 $1$|\n| $4$ | $24$ | 数组里的每个数字最多出现两次|\n| $5$ | $28$ | $2 \\leq N \\leq 5\\times 10^5$，无额外限制|\n\n对于 $100\\%$ 的数据，$2 \\leq N \\leq 5\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2024] Heavy Light Decomposition", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P5题](https://dmoj.ca/problem/cco24p5)。", "description": "在一个只包含正整数的数组中，如果一个数字在数组里多次出现，我们就称它为“重的”，否则为“轻的”。定义好的数组是指数组里的数字交替出现“轻的”元素和“重的”元素。给你一个数组 $a_{1}, \\ldots, a_{N}$，请计算把它划分成若干个连续的子数组，使得每个子数组本身都是好数组的方案数。由于答案可能很大，请将最终结果对 $1000003$ 取模输出。", "inputFormat": "第一行包含一个正整数 $N$。\n\n第二行包含 $N$ 个正整数 $a_{1}, \\ldots, a_{N}\\ (1 \\leq a_{i} \\leq N)$，表示数组中的元素。", "outputFormat": "输出一行一个整数，表示方案数对 $1000003$ 取模后的结果。", "hint": "| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $12$ | $2 \\leq N \\leq 50000$，对于所有的 $i$，$a_{i}\\leq 26$ |\n| $2$ | $16$ | $2 \\leq N \\leq 5000$|\n| $3$ | $20$ | $2 \\leq N \\leq 5\\times 10^5$，每个序号为奇数的元素 $a_{i}$ 都必须等于 $1$|\n| $4$ | $24$ | 数组里的每个数字最多出现两次|\n| $5$ | $28$ | $2 \\leq N \\leq 5\\times 10^5$，无额外限制|\n\n对于 $100\\%$ 的数据，$2 \\leq N \\leq 5\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P11519", "type": "P", "difficulty": 6, "samples": [["0\n4 12\n3 0\n1 1 2\n3 0\n1 1 3\n3 0\n3 5\n2 2 1\n3 0\n3 8\n1 1 4\n3 0\n3 11", "0\n1\n3\n3\n1\n3\n3\n5"], ["1\n4 12\n3 0\n1 1 2\n3 0\n1 0 2\n3 1\n3 6\n2 1 2\n3 3\n3 9\n1 2 7\n3 3\n3 8", "0\n1\n3\n3\n1\n3\n3\n5"]], "limits": {"time": [4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200, 4200], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "CCO（加拿大）"], "title": "[CCO 2024] Telephone Plans", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P6题](https://dmoj.ca/problem/cco24p6)。", "description": "CCO 国现在由唯一的电话服务商多米通提供服务。CCO 国有 $N$ 个房屋，编号从 $1$ 到 $N$。每条电话线连接两栋不同的房屋，所有曾经存在过的电话线都不会形成回路（就像树一样）。\n\n但是每条电话线只能在一段时间内使用。如果在某个时刻，房屋之间存在着由电话线连接的路径，那么这两个房屋就可以互相通话。\n\n$Q$ 个查询，查询格式如下：\n\n- `1 x y`：在房屋 $x$ 和 $y$ 之间添加一条电话线。保证之前没有在 $x$ 和 $y$ 之间添加过电话线。\n- `2 x y`：移除房屋 $x$ 和 $y$ 之间存在的电话线。\n- `3 t`：计算在最后 $t$ 个查询这一段时间内至少有一个时刻能互相通话的房屋对数。更准确地说，记 $G_q$ 为第 $q$ 个查询之后 CCO 国的状态，$G_0$ 为没有任何查询之前的状态。如果是第 $s$ 个查询，则计算在 $G_{s-t},G_{s-t+1}, \\ldots ,G_s$ 这 $t + 1$ 个状态中的至少一个状态中能够互相通话的房屋对数。\n\n部分测试用例会被加密。对于加密的测试用例，参数 $x$，$y$ 和 $t$ 会和上一个类型为 $3$ 的查询的答案进行异或等于（C++ 中的 `^=`）操作（如果还没有过类型为 $3$ 的查询，则认为上一个答案为 $0$）。", "inputFormat": "第一行输入一个数字 $E\\ (E \\in\\{0,1\\})$。$E=0$ 表示输入没有加密，$E=1$ 表示输入加密。\n\n第二行包含两个空格分隔的整数 $N$ 和 $Q$，分别代表 CCO 国的房屋数量和查询数量。\n\n接下来的 $Q$ 行包含如上所述的查询。\n\n对于第 $q\\ (1 \\leq q \\leq Q)$ 个查询，保证解密后（如果 $E=1$）：对于类型 $1$ 和 $2$ 的查询，$1 \\leq x, y \\leq N$；对于类型 $3$ 的查询，$0 \\leq t \\leq q$。", "outputFormat": "对于每个类型为 $3$ 的查询，单独一行输出查询的答案。", "hint": "| 子任务 | 分值 | 限制 | 是否加密 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $12$ | $1 \\leq N \\leq 30,1 \\leq Q \\leq 150$| 否 |\n|$2$ | $8$ | $1 \\leq N \\leq 30,1 \\leq Q \\leq 150$| 是 |\n|$3$ | $16$ | $1 \\leq N \\leq 2000,1 \\leq Q \\leq 6000$ | 否 |\n|$4$ | $8$|$1 \\leq N \\leq 2000,1 \\leq Q \\leq 6000$ |是|\n|$5$| $16$| $1 \\leq N \\leq 10^5,1 \\leq Q \\leq 3\\times 10^5$|否|\n|$6$| $20$| $1 \\leq N \\leq 10^5,1 \\leq Q \\leq 3\\times 10^5$|是|\n|$7$| $20$| $1 \\leq N \\leq 5 \\times 10^5,1 \\leq Q \\leq 1.5\\times 10^6$|是|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2024] Telephone Plans", "background": "翻译自 [CCO](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=80) 的 [2024P6题](https://dmoj.ca/problem/cco24p6)。", "description": "CCO 国现在由唯一的电话服务商多米通提供服务。CCO 国有 $N$ 个房屋，编号从 $1$ 到 $N$。每条电话线连接两栋不同的房屋，所有曾经存在过的电话线都不会形成回路（就像树一样）。\n\n但是每条电话线只能在一段时间内使用。如果在某个时刻，房屋之间存在着由电话线连接的路径，那么这两个房屋就可以互相通话。\n\n$Q$ 个查询，查询格式如下：\n\n- `1 x y`：在房屋 $x$ 和 $y$ 之间添加一条电话线。保证之前没有在 $x$ 和 $y$ 之间添加过电话线。\n- `2 x y`：移除房屋 $x$ 和 $y$ 之间存在的电话线。\n- `3 t`：计算在最后 $t$ 个查询这一段时间内至少有一个时刻能互相通话的房屋对数。更准确地说，记 $G_q$ 为第 $q$ 个查询之后 CCO 国的状态，$G_0$ 为没有任何查询之前的状态。如果是第 $s$ 个查询，则计算在 $G_{s-t},G_{s-t+1}, \\ldots ,G_s$ 这 $t + 1$ 个状态中的至少一个状态中能够互相通话的房屋对数。\n\n部分测试用例会被加密。对于加密的测试用例，参数 $x$，$y$ 和 $t$ 会和上一个类型为 $3$ 的查询的答案进行异或等于（C++ 中的 `^=`）操作（如果还没有过类型为 $3$ 的查询，则认为上一个答案为 $0$）。", "inputFormat": "第一行输入一个数字 $E\\ (E \\in\\{0,1\\})$。$E=0$ 表示输入没有加密，$E=1$ 表示输入加密。\n\n第二行包含两个空格分隔的整数 $N$ 和 $Q$，分别代表 CCO 国的房屋数量和查询数量。\n\n接下来的 $Q$ 行包含如上所述的查询。\n\n对于第 $q\\ (1 \\leq q \\leq Q)$ 个查询，保证解密后（如果 $E=1$）：对于类型 $1$ 和 $2$ 的查询，$1 \\leq x, y \\leq N$；对于类型 $3$ 的查询，$0 \\leq t \\leq q$。", "outputFormat": "对于每个类型为 $3$ 的查询，单独一行输出查询的答案。", "hint": "| 子任务 | 分值 | 限制 | 是否加密 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $12$ | $1 \\leq N \\leq 30,1 \\leq Q \\leq 150$| 否 |\n|$2$ | $8$ | $1 \\leq N \\leq 30,1 \\leq Q \\leq 150$| 是 |\n|$3$ | $16$ | $1 \\leq N \\leq 2000,1 \\leq Q \\leq 6000$ | 否 |\n|$4$ | $8$|$1 \\leq N \\leq 2000,1 \\leq Q \\leq 6000$ |是|\n|$5$| $16$| $1 \\leq N \\leq 10^5,1 \\leq Q \\leq 3\\times 10^5$|否|\n|$6$| $20$| $1 \\leq N \\leq 10^5,1 \\leq Q \\leq 3\\times 10^5$|是|\n|$7$| $20$| $1 \\leq N \\leq 5 \\times 10^5,1 \\leq Q \\leq 1.5\\times 10^6$|是|", "locale": "zh-CN"}}}
{"pid": "P11520", "type": "P", "difficulty": 6, "samples": [["5 2 2\n30 40 50 20 10\n10 3 20\n15 2 30", "100"], ["8 4 1\n5 10 9 3 9 8 3 1\n11 4 5\n12 7 4\n10 2 9\n5 3 4", "33"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] 骑行计划", "background": "", "description": "随着盛夏的到来，小 Rei 迎来了长达 $n$ 天的假期。为了充分利用这段时间，她计划每天骑共享单车出门，享受户外的清新空气。根据小 Rei 的计划，第 $i$ 天她将会骑行 $s_i$ 分钟，而每分钟的骑行费用为 $c$ 元。\n\n为了节约开支，小 Rei 打算购买 APP 中提供的一些骑行卡。她了解到现在有 $m$ 种骑行卡可以购买，其中第 $i$ 种骑行卡的具体信息如下：\n\n- **售价 $w_i$**：每张卡的价格为 $w_i$ 元；\n- **有效期 $d_i$**：从购买当天算起，连续 $d_i$ 天内有效；\n- **免费时间 $t_i$**：在有效期内，每天的前 $t_i$ 分钟骑行是免费的。\n\n小 Rei 可以多次购买任意一种骑行卡，并且可以在同一时间持有多张有效的骑行卡。如果某天有多张骑行卡同时有效，那么当天可以享受的免费骑行时间为这些卡中 $t_i$ 的**最大值**。超出免费时间的部分，仍然按照每分钟 $c$ 元计算。\n\n小 Rei 希望在假期中尽可能减少骑行的总支出。请你帮助她计算出在假期中骑行的最小总支出是多少。\n", "inputFormat": "第一行包含三个整数 $n, m, c \\; (1\\le n\\le 150, 1\\le m, c\\le 10^4)$，分别表示假期的天数，骑行卡的种类数以及每分钟的骑行费用。\n\n第二行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 天骑行的分钟数 $s_i \\; (1 \\le s_i\\le 150)$。\n\n接下来的 $m$ 行，每行包含三个整数 $w_i, d_i, t_i \\; (1\\le w_i\\le 10^9, 1\\le d_i\\le n, 1\\le t_i\\le 150)$，分别表示第 $i$ 种骑行卡的售价，有效期天数以及免费骑行时间。\n", "outputFormat": "输出一个整数，表示小 Rei 在假期中骑行的最小总支出。\n", "hint": "#### 样例 1 解释\n\n小 Rei 的最优策略为：在第一天和第二天购买第二种骑行卡，在第三天购买第一种骑行卡。此时前三天的免费时间为 $30$ 分钟，后两天的免费时间为 $20$ 分钟，还需要在第二天额外支付 $10$ 分钟的骑行费用，在第三天额外支付 20 分钟的骑行费用。购买骑行卡共花费 $15+15+10=40$ 元，额外骑行费用为 $(10 + 20) \\times 2 = 60$ 元，总支出为 $100$ 元。可以证明不存在总支出更少的方案，故输出 $100$。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 骑行计划", "background": "", "description": "随着盛夏的到来，小 Rei 迎来了长达 $n$ 天的假期。为了充分利用这段时间，她计划每天骑共享单车出门，享受户外的清新空气。根据小 Rei 的计划，第 $i$ 天她将会骑行 $s_i$ 分钟，而每分钟的骑行费用为 $c$ 元。\n\n为了节约开支，小 Rei 打算购买 APP 中提供的一些骑行卡。她了解到现在有 $m$ 种骑行卡可以购买，其中第 $i$ 种骑行卡的具体信息如下：\n\n- **售价 $w_i$**：每张卡的价格为 $w_i$ 元；\n- **有效期 $d_i$**：从购买当天算起，连续 $d_i$ 天内有效；\n- **免费时间 $t_i$**：在有效期内，每天的前 $t_i$ 分钟骑行是免费的。\n\n小 Rei 可以多次购买任意一种骑行卡，并且可以在同一时间持有多张有效的骑行卡。如果某天有多张骑行卡同时有效，那么当天可以享受的免费骑行时间为这些卡中 $t_i$ 的**最大值**。超出免费时间的部分，仍然按照每分钟 $c$ 元计算。\n\n小 Rei 希望在假期中尽可能减少骑行的总支出。请你帮助她计算出在假期中骑行的最小总支出是多少。\n", "inputFormat": "第一行包含三个整数 $n, m, c \\; (1\\le n\\le 150, 1\\le m, c\\le 10^4)$，分别表示假期的天数，骑行卡的种类数以及每分钟的骑行费用。\n\n第二行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 天骑行的分钟数 $s_i \\; (1 \\le s_i\\le 150)$。\n\n接下来的 $m$ 行，每行包含三个整数 $w_i, d_i, t_i \\; (1\\le w_i\\le 10^9, 1\\le d_i\\le n, 1\\le t_i\\le 150)$，分别表示第 $i$ 种骑行卡的售价，有效期天数以及免费骑行时间。\n", "outputFormat": "输出一个整数，表示小 Rei 在假期中骑行的最小总支出。\n", "hint": "#### 样例 1 解释\n\n小 Rei 的最优策略为：在第一天和第二天购买第二种骑行卡，在第三天购买第一种骑行卡。此时前三天的免费时间为 $30$ 分钟，后两天的免费时间为 $20$ 分钟，还需要在第二天额外支付 $10$ 分钟的骑行费用，在第三天额外支付 20 分钟的骑行费用。购买骑行卡共花费 $15+15+10=40$ 元，额外骑行费用为 $(10 + 20) \\times 2 = 60$ 元，总支出为 $100$ 元。可以证明不存在总支出更少的方案，故输出 $100$。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11521", "type": "P", "difficulty": 6, "samples": [["4 4\n0100\n0110\n1001\n1000\n0100\n1100\n0011\n0000", "9 4 -1"], ["11 11\n01010100100\n10111011000\n10001010110\n11011101110\n10110010010\n00100010010\n11011010011\n01001111001\n00111000111\n10010011101\n00101110110\n01010100100\n10111011000\n10001010110\n11110111010\n10001000010\n00001001110\n11101000111\n01111100101\n00111000111\n10010011101\n00101110110", "-1 25 -1 -1 -1 -1 -1 -1 -1 -1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] 挑战大模型", "background": "由于洛谷评测机太慢，$3s\\to 4s$。", "description": "S 是学校里屈指可数的理工天才。两脚分离式的电动平衡车，通过刺激人体上臂、腰部及大腿的运动神经实现控制身体运动的电极装置，以及可以用无人机吊起来的巨幅轻薄柔性屏，只不过是 S 登峰造极的技术水平的冰山一角。这一次，S 又将目光投向了最近很流行的大语言模型（Large Language Model）。\n\n大语言模型是机器学习中的新兴方向，其特点是使用大量的语料来训练语言模型，而正是算法的发展及算力的提升使得训练大语言模型不再捉襟见肘。此外，部分最新的大语言模型不仅支持文本输入输出，更支持音频、图像、视频等格式的多模态输入输出。但是 S 发现，即便是多模态的大语言模型，也不能正确处理一类特殊的图片——随机点立体图（Random Dot Stereogram）。\n\n立体图是使用视错觉造成立体感知的图像，而随机点立体图的原理是通过对随机生成的位图进行平移变换，产生立体视觉。下图是一张简单的随机点立体图。通过将绿色虚线框中的部分向左平移 $2$ 个像素，可以产生虚线框中的部分浮在原图像之上的效果。注意除虚线框及左图中虚线框左侧的红色矩形，右图中虚线框右侧的绿色矩形覆盖的部分之外，图像的外围部分需要保持完全相同，而红色矩形及绿色矩形覆盖的区域则可以分别随机生成。形式化地，如果记左图为 $W$，右图为 $Y$，则将 $W$ 中第 $r_1$ 至 $r_2$ 行，第 $c_1$ 至 $c_2$ 列的矩形子区域平移至 $Y$ 中第 $r_1$ 至 $r_2$ 行，第 $c_1'$ 至 $c_2'$ 列时，需要满足 $r_1\\le r_2$，$c_2 - c_1 = c_2'-c_1'\\ge 0$ （为 $0$ 时恰好只移动一列），$c_1>c_1'$；只有 $W$ 中的第 $r_1$ 至 $r_2$ 行，第 $c_1'$ 至 $(c_1-1)$ 列及 $Y$ 中的第 $r_1$ 至 $r_2$ 行，第 $(c_2'+1)$ 至 $c_2$ 列部分的像素都可以独立随机生成，无论平移前后矩形区域是否重叠。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7vts3y14.png)\n\nS 发现：尽管大语言模型可以识别传统的图像验证码，但是如果使用随机点立体图来生成验证码，那么大语言模型将无法正确识别！为了验证这一发现，S 需要生成不同的随机点立体图来测试大语言模型是否能够识别图像内容。作为计划的第一步，S 想先测试大语言模型能否看出图片中的矩形。具体而言，S 将把两个可以表示为 $01$ 矩阵的 $N$ 行 $M$ 列的位图 $W$ 和 $Y$ 输入到大语言模型中，并询问 $Y$ 是否可以由 $W$ 向左平移某个矩形子区域得到。假设在平移前后，这一矩形子区域都不超出原图片的边界。为了检验大语言模型的输出，S 需要一个程序来计算，对于所有可能的平移距离，右半边的图片 $Y$ 是否可以通过对左半边的图片 $W$ 平移某个矩形子区域得到，并在可行时求出该矩形子区域的最大面积。由于 S 这周末还要陪 M 逛街，所以她想请你帮她实现一下这个程序。\n", "inputFormat": "输入的第一行包含两个正整数 $N, M$，表示两个像素矩阵的行数和列数。保证 $1\\le N, M\\le 500$。\n\n接下来 $N$ 行，每行输入一个包含 $M$ 个字符的字符串，表示 $W$ 的每一行。保证每个字符均为 `0` 或 `1`。\n\n接下来 $N$ 行，每行输入一个包含 $M$ 个字符的字符串，表示 $Y$ 的每一行。保证每个字符均为 `0` 或 `1`。\n", "outputFormat": "输出共一行，包含 $(m-1)$ 个由单个空格分隔开的整数，其中第 $i$（$1\\le i \\le m - 1$）个整数表示当平移距离为 $i$ 个像素时，可能的矩形子区域的最大面积。如果不存在任何满足要求的矩形子区域，则对这个移动距离输出 `-1`。\n", "hint": "#### 样例解释 1\n\n当固定平移距离为 $1$ 时，可能的最大矩形子区域在 $W$ 中对应第 $2$ 行至第 $4$ 行，第 $2$ 列至第 $4$ 列的矩形区域，其平移后在 $Y$ 中为第 $2$ 行至第 $4$ 行，第 $1$ 列至第 $3$ 列。\n\n如果假设平移距离为 $2$，则可能的最大矩形子区域为 $W$ 中第 $3$ 列整列对应的矩形区域。\n\n可以证明，不存在任何平移距离为 $3$ 的平移方法。\n\n#### 样例解释 2\n\n该样例即为题面所附图片。\n\n#### 数据范围\n\n对于所有数据，保证 $1\\le N, M\\le 500$，输入的 $W$ 和 $Y$ 是 $N$ 行 $M$ 列仅含 `0` 和 `1` 的字符矩阵。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 挑战大模型", "background": "由于洛谷评测机太慢，$3s\\to 4s$。", "description": "S 是学校里屈指可数的理工天才。两脚分离式的电动平衡车，通过刺激人体上臂、腰部及大腿的运动神经实现控制身体运动的电极装置，以及可以用无人机吊起来的巨幅轻薄柔性屏，只不过是 S 登峰造极的技术水平的冰山一角。这一次，S 又将目光投向了最近很流行的大语言模型（Large Language Model）。\n\n大语言模型是机器学习中的新兴方向，其特点是使用大量的语料来训练语言模型，而正是算法的发展及算力的提升使得训练大语言模型不再捉襟见肘。此外，部分最新的大语言模型不仅支持文本输入输出，更支持音频、图像、视频等格式的多模态输入输出。但是 S 发现，即便是多模态的大语言模型，也不能正确处理一类特殊的图片——随机点立体图（Random Dot Stereogram）。\n\n立体图是使用视错觉造成立体感知的图像，而随机点立体图的原理是通过对随机生成的位图进行平移变换，产生立体视觉。下图是一张简单的随机点立体图。通过将绿色虚线框中的部分向左平移 $2$ 个像素，可以产生虚线框中的部分浮在原图像之上的效果。注意除虚线框及左图中虚线框左侧的红色矩形，右图中虚线框右侧的绿色矩形覆盖的部分之外，图像的外围部分需要保持完全相同，而红色矩形及绿色矩形覆盖的区域则可以分别随机生成。形式化地，如果记左图为 $W$，右图为 $Y$，则将 $W$ 中第 $r_1$ 至 $r_2$ 行，第 $c_1$ 至 $c_2$ 列的矩形子区域平移至 $Y$ 中第 $r_1$ 至 $r_2$ 行，第 $c_1'$ 至 $c_2'$ 列时，需要满足 $r_1\\le r_2$，$c_2 - c_1 = c_2'-c_1'\\ge 0$ （为 $0$ 时恰好只移动一列），$c_1>c_1'$；只有 $W$ 中的第 $r_1$ 至 $r_2$ 行，第 $c_1'$ 至 $(c_1-1)$ 列及 $Y$ 中的第 $r_1$ 至 $r_2$ 行，第 $(c_2'+1)$ 至 $c_2$ 列部分的像素都可以独立随机生成，无论平移前后矩形区域是否重叠。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7vts3y14.png)\n\nS 发现：尽管大语言模型可以识别传统的图像验证码，但是如果使用随机点立体图来生成验证码，那么大语言模型将无法正确识别！为了验证这一发现，S 需要生成不同的随机点立体图来测试大语言模型是否能够识别图像内容。作为计划的第一步，S 想先测试大语言模型能否看出图片中的矩形。具体而言，S 将把两个可以表示为 $01$ 矩阵的 $N$ 行 $M$ 列的位图 $W$ 和 $Y$ 输入到大语言模型中，并询问 $Y$ 是否可以由 $W$ 向左平移某个矩形子区域得到。假设在平移前后，这一矩形子区域都不超出原图片的边界。为了检验大语言模型的输出，S 需要一个程序来计算，对于所有可能的平移距离，右半边的图片 $Y$ 是否可以通过对左半边的图片 $W$ 平移某个矩形子区域得到，并在可行时求出该矩形子区域的最大面积。由于 S 这周末还要陪 M 逛街，所以她想请你帮她实现一下这个程序。\n", "inputFormat": "输入的第一行包含两个正整数 $N, M$，表示两个像素矩阵的行数和列数。保证 $1\\le N, M\\le 500$。\n\n接下来 $N$ 行，每行输入一个包含 $M$ 个字符的字符串，表示 $W$ 的每一行。保证每个字符均为 `0` 或 `1`。\n\n接下来 $N$ 行，每行输入一个包含 $M$ 个字符的字符串，表示 $Y$ 的每一行。保证每个字符均为 `0` 或 `1`。\n", "outputFormat": "输出共一行，包含 $(m-1)$ 个由单个空格分隔开的整数，其中第 $i$（$1\\le i \\le m - 1$）个整数表示当平移距离为 $i$ 个像素时，可能的矩形子区域的最大面积。如果不存在任何满足要求的矩形子区域，则对这个移动距离输出 `-1`。\n", "hint": "#### 样例解释 1\n\n当固定平移距离为 $1$ 时，可能的最大矩形子区域在 $W$ 中对应第 $2$ 行至第 $4$ 行，第 $2$ 列至第 $4$ 列的矩形区域，其平移后在 $Y$ 中为第 $2$ 行至第 $4$ 行，第 $1$ 列至第 $3$ 列。\n\n如果假设平移距离为 $2$，则可能的最大矩形子区域为 $W$ 中第 $3$ 列整列对应的矩形区域。\n\n可以证明，不存在任何平移距离为 $3$ 的平移方法。\n\n#### 样例解释 2\n\n该样例即为题面所附图片。\n\n#### 数据范围\n\n对于所有数据，保证 $1\\le N, M\\le 500$，输入的 $W$ 和 $Y$ 是 $N$ 行 $M$ 列仅含 `0` 和 `1` 的字符矩阵。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11522", "type": "P", "difficulty": 3, "samples": [["4\n3 2\n1 2 3\n13 4\n1 1 4 5 1 4 1 9 1 9 8 1 0\n4 2\n1 10 100 1000\n1 1\n114514", "3\n4\n100\n114514"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] Harmful Machine Learning", "background": "人工智能领域大神 The NIT 正在训练机器人 The BOT。", "description": "The BOT 在一个 $1\\times n$ 的网格上移动，其中在 $(1,i)$ 上有数字 $a_i$。The BOT 初始在格子 $(1,x)$, The BOT 想要走到一个数字尽量大的格子。每一步 The BOT 可以选择移动到相邻的一个格子或是不动，并且在移动后可以选择是否选择格子上的数字并结束游戏，而为了训练 The BOT 的能力，The NIT 会给出一些阻碍，在 The BOT 选择是否结束之后，The NIT 可以将两个数字交换位置。\n\n具体地说，我们可以把整个游戏看成若干个回合，初始 The BOT 在位置 $(1,x)$，在一个回合中，以下事件会按顺序依次发生：\n\n1. The NIT 选择两个位置 $1\\leq i,j\\leq n$，并交换 $a_i,a_j$ 的值，注意 $i$ 可以等于 $j$，此时交换不会带来任何变化。\n2. The BOT 选择移动到一个相邻的位置或是原地不动，令 The BOT 现在所在的位置为 $y$，即选择 $1\\leq z\\leq n$ 且 $|z-y|\\leq 1$，并移动到 $(1,z)$。\n3. The BOT 选择是否结束游戏，令 The BOT 现在所在的位置为 $y$，如果选择结束则会获得 $a_y$ 的分数并**立刻结束游戏**，否则无事发生。\n\n可以发现，如果 The BOT 一直不选择结束游戏，则游戏永远不会结束，为了防止这个情况的发生，在游戏的第 $10^{114514}$ 个回合，The BOT 必须选择立刻结束游戏。\n\nThe NIT 希望 The BOT 结束游戏时的分数最小，而 The BOT 希望这个分数最大。The NIT 和 The BOT 都是绝顶聪明的，但他们并没有时间玩 $10^{114514}$ 个回合，于是他们请你帮他们计算一下，The BOT 最终的分数是多少？", "inputFormat": "本题含有多组测试数据。\n\n第一行一个整数 $T(1\\leq T\\leq 10^5)$，表示测试数据数量。\n\n对于每一组数据：\n\n第一行两个正整数 $n,x(1\\leq n\\leq 10^5,1\\leq x\\leq n)$，分别表示网格的长度以及初始位置 $(1,x)$。\n\n之后一行 $n$ 个非负整数 $a_i(0\\leq a_i\\leq 10^9)$。\n\n保证所有数据的 $n$ 的总和不超过 $5\\times 10^5$。", "outputFormat": "对于每一组数据，输出一行一个数表示答案。", "hint": "### 题目来源\n\n题目来自 THUPC2025（2025年清华大学学生程序设计竞赛暨高校邀请赛）初赛，信息来源于 [THUSAAC 仓库](https://gitlink.org.cn/thusaa/thupc2025pre)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] Harmful Machine Learning", "background": "人工智能领域大神 The NIT 正在训练机器人 The BOT。", "description": "The BOT 在一个 $1\\times n$ 的网格上移动，其中在 $(1,i)$ 上有数字 $a_i$。The BOT 初始在格子 $(1,x)$, The BOT 想要走到一个数字尽量大的格子。每一步 The BOT 可以选择移动到相邻的一个格子或是不动，并且在移动后可以选择是否选择格子上的数字并结束游戏，而为了训练 The BOT 的能力，The NIT 会给出一些阻碍，在 The BOT 选择是否结束之后，The NIT 可以将两个数字交换位置。\n\n具体地说，我们可以把整个游戏看成若干个回合，初始 The BOT 在位置 $(1,x)$，在一个回合中，以下事件会按顺序依次发生：\n\n1. The NIT 选择两个位置 $1\\leq i,j\\leq n$，并交换 $a_i,a_j$ 的值，注意 $i$ 可以等于 $j$，此时交换不会带来任何变化。\n2. The BOT 选择移动到一个相邻的位置或是原地不动，令 The BOT 现在所在的位置为 $y$，即选择 $1\\leq z\\leq n$ 且 $|z-y|\\leq 1$，并移动到 $(1,z)$。\n3. The BOT 选择是否结束游戏，令 The BOT 现在所在的位置为 $y$，如果选择结束则会获得 $a_y$ 的分数并**立刻结束游戏**，否则无事发生。\n\n可以发现，如果 The BOT 一直不选择结束游戏，则游戏永远不会结束，为了防止这个情况的发生，在游戏的第 $10^{114514}$ 个回合，The BOT 必须选择立刻结束游戏。\n\nThe NIT 希望 The BOT 结束游戏时的分数最小，而 The BOT 希望这个分数最大。The NIT 和 The BOT 都是绝顶聪明的，但他们并没有时间玩 $10^{114514}$ 个回合，于是他们请你帮他们计算一下，The BOT 最终的分数是多少？", "inputFormat": "本题含有多组测试数据。\n\n第一行一个整数 $T(1\\leq T\\leq 10^5)$，表示测试数据数量。\n\n对于每一组数据：\n\n第一行两个正整数 $n,x(1\\leq n\\leq 10^5,1\\leq x\\leq n)$，分别表示网格的长度以及初始位置 $(1,x)$。\n\n之后一行 $n$ 个非负整数 $a_i(0\\leq a_i\\leq 10^9)$。\n\n保证所有数据的 $n$ 的总和不超过 $5\\times 10^5$。", "outputFormat": "对于每一组数据，输出一行一个数表示答案。", "hint": "### 题目来源\n\n题目来自 THUPC2025（2025年清华大学学生程序设计竞赛暨高校邀请赛）初赛，信息来源于 [THUSAAC 仓库](https://gitlink.org.cn/thusaa/thupc2025pre)。", "locale": "zh-CN"}}}
{"pid": "P11523", "type": "P", "difficulty": 4, "samples": [["4 7\n2 1 4 3", "1 1 3 2\n"], ["9 27\n801 919 210 101 417 713 304 613 921", "4 4 2 1 3 4 2 3 4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] 摊位分配", "background": "", "description": "\nT 大学拥有数不胜数的优秀社团，例如核心成员达到 118 人的酸协（Students' Association of Acid），刚成立就饱受关注的篹协（Students' Association of Bamboo Basket），当然还有名扬四海的蒜协（Students' Association of Garlic）。每学期伊始，T 大学都会统一举办全校性的社团招新活动。招新活动因规模庞大，故又被称为“百团大战”。如何把有限的场地像希尔伯特旅馆一般分配给各个社团，总是百团大战的负责人最头疼的问题。今年的负责人看中了蒜协将一整头大蒜干净利落地拆解成瓣的能力，因此找到了蒜协，希望可以用蒜法来解决分配摊位的问题。\n\n具体而言，今年一共有 $T$ 个社团希望参加百团大战，而可供百团使用的场地可以看成沿着学堂路排成一条直线的 $H$ 个格子。为了鼓励社团之间的良性竞争，负责人决定根据每个社团上个学年对学校的贡献进行分配。按照提交参加申请的顺序，第 $i$ 个社团上个学年对 T 大学的贡献为 $u_i$。负责人希望根据以下规则将所有的 $H$ 个格子分配给每个社团：\n\n- 对于每个社团，计算序列 $u_i, u_i/2, u_i/4, \\cdots,u_i/2^{H-1}$；\n\n- 对于计算得到的 $T\\times H$ 个数值，每次从中删去一个最大的，并将一个格子分配给相应社团的摊位，直到所有 $H$ 个格子都分配完毕；如果出现多个最大值，\n  \n  - 若有社团尚未分到格子，则优先分配给这样的社团，否则优先分配给原始的 $u_i$ 最大的社团；\n  \n  - 如果仍有多个社团可以分配，则按提交参加申请的顺序分配。\n\n因为蒜协大部分成员都去播种过冬的大蒜了，所以需要在烹饪和炼丹部打蒜蓉的你协助负责人计算一下每个社团能分到几个格子的摊位。", "inputFormat": "输入的第一行包含一个两个正整数 $T(1\\le T \\le 10^5), H(1\\le H \\le 10^9)$，分别表示社团的数量和场地格子的数量。\n\n输入的第二行包含 $T$ 个正整数 $u_1, u_2, \\cdots,u_T(1\\le u_i\\le 10^9)$，分别表示每个社团的贡献。", "outputFormat": "输出一行 $T$ 个整数，其中第 $i$（$1\\le i\\le T$） 个整数表示第 $i$ 个社团的摊位包括几个格子。\n", "hint": "#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 摊位分配", "background": "", "description": "\nT 大学拥有数不胜数的优秀社团，例如核心成员达到 118 人的酸协（Students' Association of Acid），刚成立就饱受关注的篹协（Students' Association of Bamboo Basket），当然还有名扬四海的蒜协（Students' Association of Garlic）。每学期伊始，T 大学都会统一举办全校性的社团招新活动。招新活动因规模庞大，故又被称为“百团大战”。如何把有限的场地像希尔伯特旅馆一般分配给各个社团，总是百团大战的负责人最头疼的问题。今年的负责人看中了蒜协将一整头大蒜干净利落地拆解成瓣的能力，因此找到了蒜协，希望可以用蒜法来解决分配摊位的问题。\n\n具体而言，今年一共有 $T$ 个社团希望参加百团大战，而可供百团使用的场地可以看成沿着学堂路排成一条直线的 $H$ 个格子。为了鼓励社团之间的良性竞争，负责人决定根据每个社团上个学年对学校的贡献进行分配。按照提交参加申请的顺序，第 $i$ 个社团上个学年对 T 大学的贡献为 $u_i$。负责人希望根据以下规则将所有的 $H$ 个格子分配给每个社团：\n\n- 对于每个社团，计算序列 $u_i, u_i/2, u_i/4, \\cdots,u_i/2^{H-1}$；\n\n- 对于计算得到的 $T\\times H$ 个数值，每次从中删去一个最大的，并将一个格子分配给相应社团的摊位，直到所有 $H$ 个格子都分配完毕；如果出现多个最大值，\n  \n  - 若有社团尚未分到格子，则优先分配给这样的社团，否则优先分配给原始的 $u_i$ 最大的社团；\n  \n  - 如果仍有多个社团可以分配，则按提交参加申请的顺序分配。\n\n因为蒜协大部分成员都去播种过冬的大蒜了，所以需要在烹饪和炼丹部打蒜蓉的你协助负责人计算一下每个社团能分到几个格子的摊位。", "inputFormat": "输入的第一行包含一个两个正整数 $T(1\\le T \\le 10^5), H(1\\le H \\le 10^9)$，分别表示社团的数量和场地格子的数量。\n\n输入的第二行包含 $T$ 个正整数 $u_1, u_2, \\cdots,u_T(1\\le u_i\\le 10^9)$，分别表示每个社团的贡献。", "outputFormat": "输出一行 $T$ 个整数，其中第 $i$（$1\\le i\\le T$） 个整数表示第 $i$ 个社团的摊位包括几个格子。\n", "hint": "#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11524", "type": "P", "difficulty": 6, "samples": [["2\n3 3\n4 2\n2\n2\n4", "2\n5"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] 背向而行", "background": "", "description": "有 $m$ 堆积木，其中第 $i$ 堆积木位于坐标 $x_i$ 的位置，有 $c_i$ 块。\n\n反复执行如下操作，直至无法操作：\n\n- 如果存在两块积木坐标相同，则找到满足条件的积木中坐标最小的两块，将一块坐标减 $1$，另一块坐标加 $1$，\n\n可以证明在有限次操作之后，所有积木的坐标都会不同，此时无法进行操作。\n\n多次询问，每次给定正整数 $k$，问最后左数第 $k$ 块积木的位置。保证询问的 $k$ 严格递增。", "inputFormat": "第一行一个正整数 $m$。保证 $1\\le m \\le 2\\times 10^6$。\n\n接下来 $m$ 行，其中第 $i$ 行两个正整数 $x_i,c_i$。保证 $1\\le x_i \\le 10^9$，$1\\le c_i \\le 10^9$。保证 $x_i$ 按照输入的顺序严格递增，即 $x_i<x_{i+1}$。\n\n接下来一行一个正整数 $q$，表示询问个数。保证 $1\\le q\\le 2\\times 10^6$。\n\n接下来 $q$ 行，每行一个正整数 $k$，表示一次询问。保证 $1\\le k \\le \\sum\\limits_{i=1}^{m} c_i \\le 10^9$。保证询问的 $k$ 严格递增。\n", "outputFormat": "输出 $q$ 行，每行一个整数，其中第 $i$ 行表示第 $i$ 个询问的答案。\n", "hint": "我们用长度为 5 的单调不降数字字符串描述从左往右五块积木的位置，那么操作过程如下所示：\n\n$33344 \\to 23444 \\to 23345 \\to 22445 \\to 13445 \\to 13355 \\to 12455 \\to 12446 \\to 12356$\n\n最终第二块积木坐标为 2，第四块积木坐标为 5。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 背向而行", "background": "", "description": "有 $m$ 堆积木，其中第 $i$ 堆积木位于坐标 $x_i$ 的位置，有 $c_i$ 块。\n\n反复执行如下操作，直至无法操作：\n\n- 如果存在两块积木坐标相同，则找到满足条件的积木中坐标最小的两块，将一块坐标减 $1$，另一块坐标加 $1$，\n\n可以证明在有限次操作之后，所有积木的坐标都会不同，此时无法进行操作。\n\n多次询问，每次给定正整数 $k$，问最后左数第 $k$ 块积木的位置。保证询问的 $k$ 严格递增。", "inputFormat": "第一行一个正整数 $m$。保证 $1\\le m \\le 2\\times 10^6$。\n\n接下来 $m$ 行，其中第 $i$ 行两个正整数 $x_i,c_i$。保证 $1\\le x_i \\le 10^9$，$1\\le c_i \\le 10^9$。保证 $x_i$ 按照输入的顺序严格递增，即 $x_i<x_{i+1}$。\n\n接下来一行一个正整数 $q$，表示询问个数。保证 $1\\le q\\le 2\\times 10^6$。\n\n接下来 $q$ 行，每行一个正整数 $k$，表示一次询问。保证 $1\\le k \\le \\sum\\limits_{i=1}^{m} c_i \\le 10^9$。保证询问的 $k$ 严格递增。\n", "outputFormat": "输出 $q$ 行，每行一个整数，其中第 $i$ 行表示第 $i$ 个询问的答案。\n", "hint": "我们用长度为 5 的单调不降数字字符串描述从左往右五块积木的位置，那么操作过程如下所示：\n\n$33344 \\to 23444 \\to 23345 \\to 22445 \\to 13445 \\to 13355 \\to 12455 \\to 12446 \\to 12356$\n\n最终第二块积木坐标为 2，第四块积木坐标为 5。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11525", "type": "P", "difficulty": 7, "samples": [["2\n4\n2 3 4 1\n2\n2 1", "5\n2 4\n1 4\n1 3\n2 4\n1 4\n-1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "Special Judge", "THUPC"], "title": "[THUPC 2025 初赛] 排序大师 2", "background": "", "description": "由于你是排序大师，你经常被路过的游客刁难，要求用一些奇怪的操作给序列排序。\n\n由于你是远近闻名的排序大师，邻国的排序萌新小 I 慕名前来拜访，留下了一个长度为 $n$ 的排列 $a_1, a_2 \\cdots, a_n$，并要求你用以下操作将排列升序排序：\n\n- 选择 $i,j$，满足 $1 \\le i, j \\le n$ 且 $|j - i| > 1$，交换 $a_i$ 和 $a_j$。\n\n由于你是因精益求精而远近闻名的排序大师，你需要给出一个排序方案**最小化**操作次数，或者报告以上操作无法将序列排序。如有多种操作次数最少的排序方案，输出任意一种即可。", "inputFormat": "**本题有多组测试数据**。第一行一个整数 $T (T \\ge 1)$ 表示测试数据组数。\n\n对于每组测试数据，输入的第一行一个整数 $n(1 \\le n \\le 10^5)$ 表示排列长度，接下来一行 $n$ 个两两不同的整数 $a_1,a_2,\\cdots, a_n (1 \\le a_i \\le n)$ 表示给出的排列。\n\n保证单个测试点中所有测试数据的 $n$ 的和不超过 $10^5$。", "outputFormat": "对于每组测试数据，如果使用题目给出的操作无法将序列排序，输出一行一个整数 `-1`，否则第一行输出一个整数 $s$ 表示最少的操作步数，接下来 $s$ 行每行两个整数 $i,j$，表示一次操作，你需要保证 $1 \\le i, j \\le n$ 且 $|j - i| > 1$。\n\n可以证明对于所有可能输入，若可以使用题设操作将序列排序，则 $s \\le 5n$。", "hint": "对于第一组测试数据，排序过程为 $2341 \\to 2143 \\to 3142 \\to 4132 \\to 4231 \\to 1234$。可以证明不存在步数更少的方案。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] 排序大师 2", "background": "", "description": "由于你是排序大师，你经常被路过的游客刁难，要求用一些奇怪的操作给序列排序。\n\n由于你是远近闻名的排序大师，邻国的排序萌新小 I 慕名前来拜访，留下了一个长度为 $n$ 的排列 $a_1, a_2 \\cdots, a_n$，并要求你用以下操作将排列升序排序：\n\n- 选择 $i,j$，满足 $1 \\le i, j \\le n$ 且 $|j - i| > 1$，交换 $a_i$ 和 $a_j$。\n\n由于你是因精益求精而远近闻名的排序大师，你需要给出一个排序方案**最小化**操作次数，或者报告以上操作无法将序列排序。如有多种操作次数最少的排序方案，输出任意一种即可。", "inputFormat": "**本题有多组测试数据**。第一行一个整数 $T (T \\ge 1)$ 表示测试数据组数。\n\n对于每组测试数据，输入的第一行一个整数 $n(1 \\le n \\le 10^5)$ 表示排列长度，接下来一行 $n$ 个两两不同的整数 $a_1,a_2,\\cdots, a_n (1 \\le a_i \\le n)$ 表示给出的排列。\n\n保证单个测试点中所有测试数据的 $n$ 的和不超过 $10^5$。", "outputFormat": "对于每组测试数据，如果使用题目给出的操作无法将序列排序，输出一行一个整数 `-1`，否则第一行输出一个整数 $s$ 表示最少的操作步数，接下来 $s$ 行每行两个整数 $i,j$，表示一次操作，你需要保证 $1 \\le i, j \\le n$ 且 $|j - i| > 1$。\n\n可以证明对于所有可能输入，若可以使用题设操作将序列排序，则 $s \\le 5n$。", "hint": "对于第一组测试数据，排序过程为 $2341 \\to 2143 \\to 3142 \\to 4132 \\to 4231 \\to 1234$。可以证明不存在步数更少的方案。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11526", "type": "P", "difficulty": 5, "samples": [["6\nWMW\nMWM\nWMWXMWM\nWWWXMMMXWWW\nMMMXWWWXMMM\nWMWMWMWWMWW", "Draw\nWater\nDraw\nMenji\nWater\nDraw"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] Imyourfan", "background": "", "description": "W 老师正在和他的粉丝 Menji 玩一个游戏。\n\n桌上有 $n$ 张卡片，编号为 $1\\sim n$，每张卡片有一个字母 $s_i$，其中 $s_i$ 为 $\\texttt{X},\\texttt{W},\\texttt{M}$ 中的一个，且保证至少存在一个 $\\texttt{W}$ 和至少一个 $\\texttt{M}$。\n\nW 老师和 Menji 轮流操作，W 老师先手，当轮到一名玩家操作时，他会选择一个区间 $[l,r](1\\leq l\\leq r\\leq n)$，满足区间中不存在写有字母 $\\texttt{X}$ 的卡片，然后拿走区间内所有卡片。\n\n若在某次操作过后，所有的 $\\texttt{W},\\texttt{M}$ 卡片都已经被拿走，那么游戏平局，否则若某次操作后所有的 $\\texttt{W}$ 都被拿走，那么 W 老师获胜，如果某次操作后所有的 $\\texttt{M}$ 都被拿走，那么 Menji 获胜。\n\nW 老师和 Menji 都是绝顶聪明的，现在给定所有的 $s_1\\dots s_n$，请判断游戏的结果，若 W 老师获胜则输出 `Water`，如果 Menji 获胜则输出 `Menji`，如果平局则输出 `Draw`。", "inputFormat": "本题含有多组测试数据。\n\n第一行一个整数 $T(1\\leq T\\leq 10^5)$，表示测试数据数量。\n\n对于每一组数据：\n\n输入一行一个字符串 $n(2\\leq |s| \\leq 10^5)$，其中 $n=|s|$，$s_i$ 即为卡片 $i$ 上的字母。\n", "outputFormat": "对于每一组数据，输出一行一个字符串，若 W 老师获胜则输出 `Water`，如果 Menji 获胜则输出 `Menji`，如果平局则输出 `Draw`。\n", "hint": "- 对于第一组数据，若 W 老师直接拿走所有的卡片，那么游戏是平局，否则 W 老师无法同时拿走两张写有 $\\texttt{W}$ 的卡片，Menji 可以此时拿走写有 $\\texttt{M}$ 的卡片并获胜。所以 W 老师一定会拿走所有卡片，游戏结果为平局。\n\n- 对于第二组数据，W 老师直接拿走 $\\texttt{W}$ 即可获胜。\n\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] Imyourfan", "background": "", "description": "W 老师正在和他的粉丝 Menji 玩一个游戏。\n\n桌上有 $n$ 张卡片，编号为 $1\\sim n$，每张卡片有一个字母 $s_i$，其中 $s_i$ 为 $\\texttt{X},\\texttt{W},\\texttt{M}$ 中的一个，且保证至少存在一个 $\\texttt{W}$ 和至少一个 $\\texttt{M}$。\n\nW 老师和 Menji 轮流操作，W 老师先手，当轮到一名玩家操作时，他会选择一个区间 $[l,r](1\\leq l\\leq r\\leq n)$，满足区间中不存在写有字母 $\\texttt{X}$ 的卡片，然后拿走区间内所有卡片。\n\n若在某次操作过后，所有的 $\\texttt{W},\\texttt{M}$ 卡片都已经被拿走，那么游戏平局，否则若某次操作后所有的 $\\texttt{W}$ 都被拿走，那么 W 老师获胜，如果某次操作后所有的 $\\texttt{M}$ 都被拿走，那么 Menji 获胜。\n\nW 老师和 Menji 都是绝顶聪明的，现在给定所有的 $s_1\\dots s_n$，请判断游戏的结果，若 W 老师获胜则输出 `Water`，如果 Menji 获胜则输出 `Menji`，如果平局则输出 `Draw`。", "inputFormat": "本题含有多组测试数据。\n\n第一行一个整数 $T(1\\leq T\\leq 10^5)$，表示测试数据数量。\n\n对于每一组数据：\n\n输入一行一个字符串 $n(2\\leq |s| \\leq 10^5)$，其中 $n=|s|$，$s_i$ 即为卡片 $i$ 上的字母。\n", "outputFormat": "对于每一组数据，输出一行一个字符串，若 W 老师获胜则输出 `Water`，如果 Menji 获胜则输出 `Menji`，如果平局则输出 `Draw`。\n", "hint": "- 对于第一组数据，若 W 老师直接拿走所有的卡片，那么游戏是平局，否则 W 老师无法同时拿走两张写有 $\\texttt{W}$ 的卡片，Menji 可以此时拿走写有 $\\texttt{M}$ 的卡片并获胜。所以 W 老师一定会拿走所有卡片，游戏结果为平局。\n\n- 对于第二组数据，W 老师直接拿走 $\\texttt{W}$ 即可获胜。\n\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
{"pid": "P11527", "type": "P", "difficulty": 6, "samples": [["7 7\n1 1 1 1 1 1 1\n1 2 6 2\n2 1\n1 3 5 5\n2 3\n1 2 7 3\n2 3\n2 2", "7\n22\n36\n42"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "THUPC"], "title": "[THUPC 2025 初赛] waht 先生的法阵", "background": "由于洛谷评测机太慢，$4s\\to 5s$。", "description": "waht 先生是一名法力强大的魔法师。\n\nwaht 先生为了增强自己的法力，设置了一个法阵。这个法阵中共有 $n$ 块魔法石，它们从左到右依次排成一列；并且从左数第 $i$ 块魔法石的编号为 $i$，其法力值初始为 $a_i$。\n\nwaht 先生可以获取一些魔法石的法力。然而由于这个法阵的特殊性质，在获取法力时，waht 先生必须先选择一块魔法石；并且一旦第 $x$ 块魔法石被选，接下来必须再选第 $x+\\gcd(x,a_x)$ 块魔法石（这里 $\\gcd(x,y)$ 表示 $x,y$ 的最大公约数），直到 $x+\\gcd (x,a_x)>n$ 时 waht 先生会立即停止本次法力获取的过程。waht 先生获取的法力将会是过程中所选的所有魔法石的法力值之和。\n\nwaht 先生会对这个法阵进行 $q$ 次操作。具体的，有以下两类操作：\n\n- waht 先生选择两个数 $l,r\\;(1\\leq l\\leq r\\leq n)$，对区间 $[l,r]$ 中的所有魔法石施加法术，使得它们的法力值全部乘以 $c$。具体的，对于所有满足 $l\\leq i\\leq r$ 的 $i$，将 $a_i$ 的值修改为 $c\\cdot a_i$。\n- waht 先生选择第 $x$ 块魔法石，并按照上述的规则获取法力。\n\n每当 waht 先生选择某一块魔法石来获取法力时，你都需要帮他计算出他到底获得了多少法力。由于答案可能很大，你只需要求出答案对 $998244353$ 取模的结果。\n", "inputFormat": "第一行输入两个正整数 $n,q\\;(1\\leq n,q\\leq 2.5\\times 10^5)$，表示法阵中魔法石的数量和操作次数。\n\n接下来一行，输入 $n$ 个正整数，其中第 $i$ 个为 $a_i\\;(1\\leq a_i<998244353)$，表示魔法石初始的法力值。\n\n接下来 $q$ 行，先输入一个 $op$，表示操作种类；\n\n若 $op=1$，则再输入三个正整数 $l,r,c\\;(1\\leq l\\leq r\\leq n,2\\leq c\\leq 2.5\\times 10^5)$，表示将区间 $[l,r]$ 中的所有魔法石的法力值乘以 $c$；\n\n若 $op=2$，则再输入一个正整数 $x\\;(1\\leq x\\leq n)$，表示获取法力的开始位置。\n", "outputFormat": "每当进行一次操作 $2$ 时，输出一行一个正整数，表示所要查询的答案对 $998244353$ 取模的值。\n", "hint": "第一次操作，将区间 $[2,6]$ 中的魔法石的法力值乘以 $2$，法力值序列变为 $1,2,2,2,2,2,1$；\n\n第二次操作，waht 先生选择第 $1$ 块魔法石，则编号为 $1,2,4,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $7$；\n\n第三次操作，将区间 $[3,5]$ 中的魔法石的法力值乘以 $5$，法力值序列变为 $1,2,10,10,10,2,1$；\n\n第四次操作，waht 先生选择第 $3$ 块魔法石，则编号为 $3,4,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $22$；\n\n第五次操作，将区间 $[2,7]$ 中的魔法石的法力值乘以 $3$，法力值序列变为 $1,6,30,30,30,6,3$；\n\n第六次操作，waht 先生选择第 $3$ 块魔法石，则编号为 $3,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $36$；\n\n第七次操作，waht 先生选择第 $2$ 块魔法石，则编号为 $2,4,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $42$。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2025 初赛] waht 先生的法阵", "background": "由于洛谷评测机太慢，$4s\\to 5s$。", "description": "waht 先生是一名法力强大的魔法师。\n\nwaht 先生为了增强自己的法力，设置了一个法阵。这个法阵中共有 $n$ 块魔法石，它们从左到右依次排成一列；并且从左数第 $i$ 块魔法石的编号为 $i$，其法力值初始为 $a_i$。\n\nwaht 先生可以获取一些魔法石的法力。然而由于这个法阵的特殊性质，在获取法力时，waht 先生必须先选择一块魔法石；并且一旦第 $x$ 块魔法石被选，接下来必须再选第 $x+\\gcd(x,a_x)$ 块魔法石（这里 $\\gcd(x,y)$ 表示 $x,y$ 的最大公约数），直到 $x+\\gcd (x,a_x)>n$ 时 waht 先生会立即停止本次法力获取的过程。waht 先生获取的法力将会是过程中所选的所有魔法石的法力值之和。\n\nwaht 先生会对这个法阵进行 $q$ 次操作。具体的，有以下两类操作：\n\n- waht 先生选择两个数 $l,r\\;(1\\leq l\\leq r\\leq n)$，对区间 $[l,r]$ 中的所有魔法石施加法术，使得它们的法力值全部乘以 $c$。具体的，对于所有满足 $l\\leq i\\leq r$ 的 $i$，将 $a_i$ 的值修改为 $c\\cdot a_i$。\n- waht 先生选择第 $x$ 块魔法石，并按照上述的规则获取法力。\n\n每当 waht 先生选择某一块魔法石来获取法力时，你都需要帮他计算出他到底获得了多少法力。由于答案可能很大，你只需要求出答案对 $998244353$ 取模的结果。\n", "inputFormat": "第一行输入两个正整数 $n,q\\;(1\\leq n,q\\leq 2.5\\times 10^5)$，表示法阵中魔法石的数量和操作次数。\n\n接下来一行，输入 $n$ 个正整数，其中第 $i$ 个为 $a_i\\;(1\\leq a_i<998244353)$，表示魔法石初始的法力值。\n\n接下来 $q$ 行，先输入一个 $op$，表示操作种类；\n\n若 $op=1$，则再输入三个正整数 $l,r,c\\;(1\\leq l\\leq r\\leq n,2\\leq c\\leq 2.5\\times 10^5)$，表示将区间 $[l,r]$ 中的所有魔法石的法力值乘以 $c$；\n\n若 $op=2$，则再输入一个正整数 $x\\;(1\\leq x\\leq n)$，表示获取法力的开始位置。\n", "outputFormat": "每当进行一次操作 $2$ 时，输出一行一个正整数，表示所要查询的答案对 $998244353$ 取模的值。\n", "hint": "第一次操作，将区间 $[2,6]$ 中的魔法石的法力值乘以 $2$，法力值序列变为 $1,2,2,2,2,2,1$；\n\n第二次操作，waht 先生选择第 $1$ 块魔法石，则编号为 $1,2,4,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $7$；\n\n第三次操作，将区间 $[3,5]$ 中的魔法石的法力值乘以 $5$，法力值序列变为 $1,2,10,10,10,2,1$；\n\n第四次操作，waht 先生选择第 $3$ 块魔法石，则编号为 $3,4,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $22$；\n\n第五次操作，将区间 $[2,7]$ 中的魔法石的法力值乘以 $3$，法力值序列变为 $1,6,30,30,30,6,3$；\n\n第六次操作，waht 先生选择第 $3$ 块魔法石，则编号为 $3,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $36$；\n\n第七次操作，waht 先生选择第 $2$ 块魔法石，则编号为 $2,4,6$ 的魔法石会依次被选中，这些魔法石的法力值之和为 $42$。\n\n#### 题目来源\n\n来自 2025 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2025）初赛。\n\n题解等资源可在 <https://gitlink.org.cn/thusaa/thupc2025pre/tree/master> 查看。", "locale": "zh-CN"}}}
