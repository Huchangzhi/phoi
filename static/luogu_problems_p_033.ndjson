{"pid": "P9367", "type": "P", "difficulty": 2, "samples": [["4\n1 4 3 2\n", "7\n"], ["3\n-10 -10 -10\n", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "ICPC", "西安"], "title": "[ICPC 2022 Xi'an R] Strange Sum", "background": "", "description": "Given a sequence $a_1, a_2, \\ldots, a_n$.\n\nYou are going to select zero or more elements of $a$ so that: if you select $a_i$, then in any interval of length $i$ (formally, in $a[j, j + i - 1]$ for any $1 \\le j \\le n - i + 1$) you can select at most $2$ elements.\n\nCalculate the maximal sum of the elements you select.", "inputFormat": "The first line contains an integer $n$ ($2 \\leq n \\leq 10^5$).\n\nThe second line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($-10^9 \\leq a_i \\leq 10^9$).", "outputFormat": "Output a single integer denoting the answer.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem J.\n\n**Author**: JohnVictor.", "locale": "en", "translations": {"en": {"title": "[ICPC 2022 Xi'an R] Strange Sum", "background": "", "description": "Given a sequence $a_1, a_2, \\ldots, a_n$.\n\nYou are going to select zero or more elements of $a$ so that: if you select $a_i$, then in any interval of length $i$ (formally, in $a[j, j + i - 1]$ for any $1 \\le j \\le n - i + 1$) you can select at most $2$ elements.\n\nCalculate the maximal sum of the elements you select.", "inputFormat": "The first line contains an integer $n$ ($2 \\leq n \\leq 10^5$).\n\nThe second line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($-10^9 \\leq a_i \\leq 10^9$).", "outputFormat": "Output a single integer denoting the answer.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem J.\n\n**Author**: JohnVictor.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2022 Xi'an R] Strange Sum", "background": "", "description": "给定一个序列 $a_1, a_2, \\ldots, a_n$。\n\n你需要选择 $a$ 中的零个或多个元素，使得：如果你选择了 $a_i$，那么在任何长度为 $i$ 的区间内（形式上，对于任何 $1 \\le j \\le n - i + 1$ 的 $a[j, j + i - 1]$），最多可以选择 $2$ 个元素。\n\n计算你选择的元素的最大和。", "inputFormat": "第一行包含一个整数 $n$ ($2 \\leq n \\leq 10^5$)。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$ ($-10^9 \\leq a_i \\leq 10^9$)。", "outputFormat": "输出一个整数，表示答案。", "hint": "**来源**：2022 ICPC 亚洲西安区域赛问题 J。\n\n**作者**：JohnVictor。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9368", "type": "P", "difficulty": 6, "samples": [["3 4 20\n1 3 4\n3 1 2\n1 3 4 7\n4 2 1 2\n1\n5\n6\n7\n9\n10\n11\n12\n15\n16\n17\n22\n23\n28\n30\n35\n43\n47\n49\n57\n", "0\n0\n1\n1\n1\n2\n2\n3\n3\n4\n4\n6\n6\n9\n9\n12\n12\n12\n18\n18\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "ICPC", "西安"], "title": "[ICPC 2022 Xi'an R] Streets", "background": "", "description": "You are given $n$ vertical lines with x-coordinates $x_1, x_2, \\ldots, x_n$ and weights $a_1, a_2, \\ldots, a_n$ and $m$ horizontal lines with y-coordinates $y_1, y_2, \\ldots, y_m$ and weights $b_1, b_2, \\ldots, b_m$.\n\nCall a rectangle good if and only if all of its four edges lie on the given lines. On this basis, define the cost of a good rectangle as the sum of the costs of its four segments. The cost of a segment is the product of its length and the weight of the line it belongs.\n\nFind the maximum area of good rectangles with cost no more than $c$. Note that the length and the width of the rectangle can be zero, so the answer always exists.\n\nYou need to answer $T$ queries with different $c$.", "inputFormat": "The first line contains three integers $n$, $m$ ($2\\leq n, m\\leq 5\\,000$) and $T$ ($1\\leq T\\leq 100$).\n\nThe second line contains $n$ integers $x_1, x_2, \\ldots, x_n$ ($1\\leq x_1 < x_2 < \\ldots < x_n \\leq 10 ^ 5$).\n\nThe third line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($1\\leq a_i\\leq 10 ^ 7$).\n\nThe fourth line contains $m$ integers $y_1, y_2, \\ldots, y_m$ ($1\\leq y_1 < y_2 < \\ldots < y_m \\leq 10 ^ 5$).\n\nThe fifth line contains $m$ integers $b_1, b_2, \\ldots, b_m$ ($1\\leq b_i\\leq 10 ^ 7$).\n\nEach of the next $T$ lines contains a single integer $c$ ($1\\leq c\\leq 4\\times 10 ^ {12}$), representing a query.", "outputFormat": "For each query, output one line representing the answer.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem K.\n\n**Author**: Alex_Wei.", "locale": "en", "translations": {"en": {"title": "[ICPC 2022 Xi'an R] Streets", "background": "", "description": "You are given $n$ vertical lines with x-coordinates $x_1, x_2, \\ldots, x_n$ and weights $a_1, a_2, \\ldots, a_n$ and $m$ horizontal lines with y-coordinates $y_1, y_2, \\ldots, y_m$ and weights $b_1, b_2, \\ldots, b_m$.\n\nCall a rectangle good if and only if all of its four edges lie on the given lines. On this basis, define the cost of a good rectangle as the sum of the costs of its four segments. The cost of a segment is the product of its length and the weight of the line it belongs.\n\nFind the maximum area of good rectangles with cost no more than $c$. Note that the length and the width of the rectangle can be zero, so the answer always exists.\n\nYou need to answer $T$ queries with different $c$.", "inputFormat": "The first line contains three integers $n$, $m$ ($2\\leq n, m\\leq 5\\,000$) and $T$ ($1\\leq T\\leq 100$).\n\nThe second line contains $n$ integers $x_1, x_2, \\ldots, x_n$ ($1\\leq x_1 < x_2 < \\ldots < x_n \\leq 10 ^ 5$).\n\nThe third line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($1\\leq a_i\\leq 10 ^ 7$).\n\nThe fourth line contains $m$ integers $y_1, y_2, \\ldots, y_m$ ($1\\leq y_1 < y_2 < \\ldots < y_m \\leq 10 ^ 5$).\n\nThe fifth line contains $m$ integers $b_1, b_2, \\ldots, b_m$ ($1\\leq b_i\\leq 10 ^ 7$).\n\nEach of the next $T$ lines contains a single integer $c$ ($1\\leq c\\leq 4\\times 10 ^ {12}$), representing a query.", "outputFormat": "For each query, output one line representing the answer.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem K.\n\n**Author**: Alex_Wei.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2022 Xi'an R] Streets", "background": "", "description": "给定 $n$ 条垂直的线和 $m$ 条水平线，每条线有重量。定义一个矩形是好的，当且仅当矩形的四个边都落在这些线上，好矩形的代价等于其内部四条边的长度与对应线重量的乘积之和。请找出最大面积的好矩形，使得其代价不超过 $c$。注意，矩形的长度和宽度可以为零。", "inputFormat": "第一行三个正整数 $n,m,T(2 \\leq n, m \\leq 5 \\times 10^3, 1 \\leq T \\leq 100)$，依次表示垂直线、水平线的数量以及查询的次数。\n\n第二行 $n$ 个正整数 $x_1,x_2,\\cdots,x_n(1 \\leq x_1 < x_2 < \\cdots < x_n \\leq 10^5)$，其中 $x_i$ 表示第 $i$ 条垂直线的位置。\n\n第三行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$，其中 $a_i$ 表示第 $i$ 条垂直线的重量。\n\n第四行 $m$ 个正整数 $y_1,y_2,\\cdots,y_m(1 \\leq y_1 < y_2 < \\cdots < y_m \\leq 10^5)$，其中 $y_i$ 表示第 $i$ 条水平线的位置。\n\n第五行 $m$ 个正整数 $b_1,b_2,\\cdots,b_m(1 \\leq b_i \\leq 10^7)$，其中 $b_i$ 表示第 $i$ 条水平线的重量。\n\n接下来 $T$ 行，每行一个正整数 $c(1 \\leq c \\leq 4\\times 10^{12})$，表示一次查询。", "outputFormat": "对于每次查询，输出一个整数表示最小代价不超过 $c$ 的最大好矩形的面积。\n\ntranslated by @[cff_0102](/user/542457)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9369", "type": "P", "difficulty": 4, "samples": [["2\n7\n1 1 2 2 2 3\n5\n1 2 3 4\n", "3\n1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "ICPC", "西安"], "title": "[ICPC 2022 Xi'an R] Tree", "background": "", "description": "You are given a tree $T$ with $n$ nodes. The tree is rooted at $1$. Define $\\mathrm{subtree}(u)$ as the set of nodes in the subtree of $u$.\n\nCall a subset of nodes $S$ good if and only if $S$ satisfies at least one of the following contidions:\n\n- For all $u, v\\in S$ where $u\\neq v$, either $u\\in \\mathrm{subtree}(v)$ or $v\\in \\mathrm{subtree}(u)$.\n- For all $u, v\\in S$ where $u\\neq v$, both $u\\notin \\mathrm{subtree}(v)$ and $v\\notin \\mathrm{subtree}(u)$.\n\nYou need to partition all nodes of $T$ into several good subsets. Calculate the minimum number of subsets.\n", "inputFormat": "The first line contains a single integer $Q$ ($1\\leq Q\\leq 10 ^ 5$), denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n$ ($1\\leq n\\leq 10 ^ 6$). The next line contains $n - 1$ integers $p_2, p_3, \\ldots, p_n$ ($1\\leq p_i < i$), indicating that there is an edge between $p_i$ and $i$ for each $i=2,3,\\ldots,n$.\n\nIt is guaranteed that the sum of $n$ over all test cases is no more than $10 ^ 6$.", "outputFormat": "For each test case, output a single integer representing the answer.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem L.\n\n**Author**: Alex_Wei.", "locale": "en", "translations": {"en": {"title": "[ICPC 2022 Xi'an R] Tree", "background": "", "description": "You are given a tree $T$ with $n$ nodes. The tree is rooted at $1$. Define $\\mathrm{subtree}(u)$ as the set of nodes in the subtree of $u$.\n\nCall a subset of nodes $S$ good if and only if $S$ satisfies at least one of the following contidions:\n\n- For all $u, v\\in S$ where $u\\neq v$, either $u\\in \\mathrm{subtree}(v)$ or $v\\in \\mathrm{subtree}(u)$.\n- For all $u, v\\in S$ where $u\\neq v$, both $u\\notin \\mathrm{subtree}(v)$ and $v\\notin \\mathrm{subtree}(u)$.\n\nYou need to partition all nodes of $T$ into several good subsets. Calculate the minimum number of subsets.\n", "inputFormat": "The first line contains a single integer $Q$ ($1\\leq Q\\leq 10 ^ 5$), denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n$ ($1\\leq n\\leq 10 ^ 6$). The next line contains $n - 1$ integers $p_2, p_3, \\ldots, p_n$ ($1\\leq p_i < i$), indicating that there is an edge between $p_i$ and $i$ for each $i=2,3,\\ldots,n$.\n\nIt is guaranteed that the sum of $n$ over all test cases is no more than $10 ^ 6$.", "outputFormat": "For each test case, output a single integer representing the answer.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem L.\n\n**Author**: Alex_Wei.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2022 Xi'an R] Tree", "background": "", "description": "给定大小为 $n$ 的有根树 $T$，根节点为 $1$。定义 $\\mathrm{subtree}(u)$ 表示结点 $u$ 的子树。\n\n称集合 $S$ 是好的，当且仅当 $S$ 至少满足下列条件之一：\n\n- 对于 $u, v\\in S$ 且 $u\\neq v$，$u\\in \\mathrm{subtree}(v)$ 或 $v\\in \\mathrm{subtree}(u)$。\n- 对于 $u, v\\in S$ 且 $u\\neq v$，$u\\notin \\mathrm{subtree}(v)$ 且 $v\\notin \\mathrm{subtree}(u)$。\n\n将 $T$ 划分为若干好的集合，求集合数量的最小值。\n\n共有 $Q$ 组数据。\n\n$1\\leq Q\\leq 10 ^ 5$，$1\\leq n, \\sum n\\leq 10 ^ 6$，每个点的父亲编号 $1\\leq p_i < i$。", "inputFormat": "第一行一个整数 $Q$。\n\n对于每组测试数据，第一行一个整数 $n$，第二行 $n - 1$ 个由空格隔开的整数 $p_2, p_3, \\cdots, p_n$，表示每个点的父亲编号。", "outputFormat": "对于每组测试数据，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9370", "type": "P", "difficulty": 5, "samples": [["3 2 30\n2\n1 2 1\n1 2 12\n2 0 4", "4"], ["4 4 30\n3\n1 0 2 1\n0 1 5\n0 2 4\n1 3 2\n2 3 4", "2"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2023", "APIO", "交互题", "Special Judge", "O2优化"], "title": "[APIO2023] 赛博乐园 / cyberland", "background": "**由于部分 BUG，使用 C++14 (GCC9) 提交会产生编译错误，请使用 C++14 等语言进行提交。**\n\n提交时，无需引用 `cyberland.h`。你提交的代码中需要实现以下函数：\n\n```cpp\ndouble solve(int N, int M, int K, int H, std::vector<int> x, std::vector<int> y, std::vector<int> c, std::vector<int> arr)\n```", "description": "3742 年已经到来，现在轮到赛博乐园主办 APIO 了。在这个世界上有 $N$ 个国家，这些国家由 $0$ 到 $N − 1$ 标号，还有 $M$ 条双向道路（每条边双向都可以通行），这些道路由 $0$ 到 $M − 1$ 标号。每条道路连接两个不同的国家，$x[i]$ 和 $y[i]$，并需要花费时间 $c[i]$ 来通过该道路。除了你所在的国家的选手，所有选手都已经聚集在赛博乐园参加 APIO 了。你生活在国家 $0$，而赛博乐园是国家 $H$。你作为你的国家最聪明的人，你的帮助刻不容缓。更具体地，你需要确定从你的国家到达赛博乐园所需的最少时间。\n\n在经过有些国家时，你可以清除你的当前总通过时间。此外，还有些国家在你经过他们时可以将你的当前总通过时间除以 $2$（我们称之为“除以 $2$ 的能力”）。你可以重复经过一个国家。每次你经过一个国家时，你可以选择是否使用这个国家的特殊能力。但你每次经过一个国家时最多可以使用一次特殊能力（如果你多次经过一个国家，你每次经过都可以使用至多一次该国家的特殊能力）。此外，为了防止被赛博乐园化学基金会抓住，你最多只能使用“除以 $2$ 的能力”$K$ 次。一旦你到达赛博乐园，你就不能移动到其他任何地方，因为伟大的 APIO 竞赛即将开赛了！\n\n给出一个数组 $arr$ ，其中 $arr[i]$ 表示国家 $i (0 \\le i \\le N − 1)$ 的特殊能力。每个国家有下面 $3$ 种特殊能力之中的一种：\n\n - $arr[i] = 0$，意思是这个国家可以让当前总通过时间为 $0$。\n - $arr[i] = 1$，表示这个国家不会改变你的当前总通行时间。\n - $arr[i] = 2$，表示这个国家拥有让当前总通行时间除以 $2$ 的能力。\n\n保证 $arr[0] = arr[H] = 1$ 成立。换句话说，赛博乐园和你所在的国家没有任何特殊能力。\n\n你的国家不希望错过 APIO 的任何时刻，所以你需要找到到达赛博乐园的最短时间。如果你不能到达赛博乐园，你的答案应该是 $−1$。\n\n### 实现细节\n\n你需要实现以下函数：\n\n```cpp\ndouble solve(int N, int M, int K, int H, std::vector<int> x, std::vector<int> y, std::vector<int> c, std::vector<int> arr);\n```\n\n - $N$ : 国家的数量。\n - $M$ : 双向道路的数量。\n - $K$: “除以 $2$ 的能力”的最大使用次数。\n - $H$: 国家“赛博乐园”的标号。\n - $x, y, c$: 三个长度为 $M$ 的数组。三元组 $(x[i], y[i], c[i])$ 表示第 $i$ 条用来连接国家 $x[i]$ 和 $y[i]$ 的双向边，通过它的时间消耗是 $c[i]$。\n - $arr$: 一个长度为 $N$ 的数组。$arr[i]$ 表示国家 $i$ 的特殊能力。\n - 如果你能到达赛博乐园，调用该函数应返回从你的国家到达赛博乐园的最短时间，如果你不能，则返回 $−1$。\n - 这个过程可能会被多次调用。\n\n假设选手的答案为 $ans_1$ ，标准输出为 $ans_2$ ，当且仅当 $\\dfrac{|ans_1-ans_2|}{\\max\\{ans_2,1\\}} \\le 10 ^ {-6}$ 时你的输出被视为是正确的。\n\n注意：由于函数调用可能会发生多次，选手需要注意之前调用的残余数据对于后续调用的影响。", "inputFormat": "评测程序示例读取如下格式的输入：\n\n - 第 $1$ 行: $T$\n \n对于 $T$ 组测试数据中的每一个:\n - 第 $1$ 行: $N \\ M \\ K$\n - 第 $2$ 行: $H$\n - 第 $3$ 行: $arr[0] \\ arr[1] \\ arr[2] \\  \\cdots  \\ arr[N − 1]$\n - 第 $4 + i(0 \\le i \\le M − 1)$ 行: $x[i] \\ y[i]  \\ c[i]$", "outputFormat": "评测程序示例按照如下的格式打印你的答案：\n\n对于每组测试数据：\n\n- 第 $1$ 行: 调用 `solve` 的返回值", "hint": "### 例子\n\n#### 样例 1\n\n考虑下面的调用：\n\n```cpp\nsolve(3, 2, 30, 2, {1, 2}, {2, 0}, {12, 4}, {1, 2, 1});\n```\n\n唯一的到达赛博乐园的路径是 $0 \\rightarrow 2$，因为你到达了赛博乐园之后不能再移动到其他任何地方。通行时间的计算过程如下：\n\n| 国家编号 | 通行时间 |\n| :--: | :--: |\n| $0$ | $0$ |\n| $2$ | $0 + 4 \\rightarrow 4(\\text{求和}) \\rightarrow 4(\\text{特殊能力})$|\n\n#### 样例 2\n\n考虑下面的调用：\n\n```cpp\nsolve(4, 4, 30, 3, {0, 0, 1, 2}, {1, 2, 3, 3}, {5, 4, 2, 4}, {1, 0, 2, 1});\n```\n\n从你的国家到赛博乐园有两条路径：$0 \\rightarrow 1 \\rightarrow 3$ 和 $0 \\rightarrow 2 \\rightarrow 3$。\n\n如果选择路径 $0 \\rightarrow 1 \\rightarrow 3$，通行时间的计算如下：\n\n| 国家编号 | 通行时间 |\n| :--: | :--: |\n| $0$ | $0$ |\n| $1$ | $0 + 5 \\rightarrow 5(\\text{求和}) \\rightarrow 0(\\text{特殊能力})$|\n| $3$ | $0 + 2 \\rightarrow 2(\\text{求和}) \\rightarrow 2(\\text{特殊能力})$|\n\n如果选择路径 $0 \\rightarrow 2 \\rightarrow 3$，通行时间的计算如下：\n\n| 国家编号 | 通行时间 |\n| :--: | :--: |\n| $0$ | $0$ |\n| $2$ | $0 + 4 \\rightarrow 4(\\text{求和}) \\rightarrow 2(\\text{特殊能力})$|\n| $3$ | $2 + 4 \\rightarrow 6(\\text{求和}) \\rightarrow 6(\\text{特殊能力})$|\n\n所以，上述调用应该返回 $2$。\n\n### 约束条件\n\n - $2 \\le N \\le 10^5 , \\sum N \\le 10^5$.\n - $0 ≤ M ≤ \\min\\{10^5, \\dfrac{N(N-1)}{2} \\}, \\sum M ≤ 10^5$.\n - $1 \\le K \\le 10^6$.\n - $1 \\le H < N$\n - $0 \\le  x[i], y[i] < N , x[i] \\neq y[i]$.\n - $1 \\le c[i] \\le 10^9$.\n - $arr[i] \\in \\{0, 1, 2\\}$.\n - 保证每两个国家之间至多使用一条道路进行连接。\n\n### 子任务\n\n1. (5 分)：$N \\le 3, K \\le 30$.\n2. (8 分)：$M = N − 1, K \\le 30, arr[i] = 1$，你可以通过这 $M$ 条道路从任意国家到另外一个国家。\n3. (13 分)：$M = N − 1, K \\le 30, arr[i] \\in \\{0, 1\\}$，你可以通过这 $M$ 条道路从任意国家到另外一个国家。\n4. (19 分)：$M = N − 1, K \\le 30, x[i] = i, y[i] = i + 1$.\n5. (7 分)：$K \\le 30, arr[i] = 1$.\n6. (16 分)：$K \\le 30, arr[i] \\in \\{0, 1\\}$.\n7. (29 分)：$K \\le 30$.\n8. (3 分)：没有特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APIO2023] 赛博乐园 / cyberland", "background": "**由于部分 BUG，使用 C++14 (GCC9) 提交会产生编译错误，请使用 C++14 等语言进行提交。**\n\n提交时，无需引用 `cyberland.h`。你提交的代码中需要实现以下函数：\n\n```cpp\ndouble solve(int N, int M, int K, int H, std::vector<int> x, std::vector<int> y, std::vector<int> c, std::vector<int> arr)\n```", "description": "3742 年已经到来，现在轮到赛博乐园主办 APIO 了。在这个世界上有 $N$ 个国家，这些国家由 $0$ 到 $N − 1$ 标号，还有 $M$ 条双向道路（每条边双向都可以通行），这些道路由 $0$ 到 $M − 1$ 标号。每条道路连接两个不同的国家，$x[i]$ 和 $y[i]$，并需要花费时间 $c[i]$ 来通过该道路。除了你所在的国家的选手，所有选手都已经聚集在赛博乐园参加 APIO 了。你生活在国家 $0$，而赛博乐园是国家 $H$。你作为你的国家最聪明的人，你的帮助刻不容缓。更具体地，你需要确定从你的国家到达赛博乐园所需的最少时间。\n\n在经过有些国家时，你可以清除你的当前总通过时间。此外，还有些国家在你经过他们时可以将你的当前总通过时间除以 $2$（我们称之为“除以 $2$ 的能力”）。你可以重复经过一个国家。每次你经过一个国家时，你可以选择是否使用这个国家的特殊能力。但你每次经过一个国家时最多可以使用一次特殊能力（如果你多次经过一个国家，你每次经过都可以使用至多一次该国家的特殊能力）。此外，为了防止被赛博乐园化学基金会抓住，你最多只能使用“除以 $2$ 的能力”$K$ 次。一旦你到达赛博乐园，你就不能移动到其他任何地方，因为伟大的 APIO 竞赛即将开赛了！\n\n给出一个数组 $arr$ ，其中 $arr[i]$ 表示国家 $i (0 \\le i \\le N − 1)$ 的特殊能力。每个国家有下面 $3$ 种特殊能力之中的一种：\n\n - $arr[i] = 0$，意思是这个国家可以让当前总通过时间为 $0$。\n - $arr[i] = 1$，表示这个国家不会改变你的当前总通行时间。\n - $arr[i] = 2$，表示这个国家拥有让当前总通行时间除以 $2$ 的能力。\n\n保证 $arr[0] = arr[H] = 1$ 成立。换句话说，赛博乐园和你所在的国家没有任何特殊能力。\n\n你的国家不希望错过 APIO 的任何时刻，所以你需要找到到达赛博乐园的最短时间。如果你不能到达赛博乐园，你的答案应该是 $−1$。\n\n### 实现细节\n\n你需要实现以下函数：\n\n```cpp\ndouble solve(int N, int M, int K, int H, std::vector<int> x, std::vector<int> y, std::vector<int> c, std::vector<int> arr);\n```\n\n - $N$ : 国家的数量。\n - $M$ : 双向道路的数量。\n - $K$: “除以 $2$ 的能力”的最大使用次数。\n - $H$: 国家“赛博乐园”的标号。\n - $x, y, c$: 三个长度为 $M$ 的数组。三元组 $(x[i], y[i], c[i])$ 表示第 $i$ 条用来连接国家 $x[i]$ 和 $y[i]$ 的双向边，通过它的时间消耗是 $c[i]$。\n - $arr$: 一个长度为 $N$ 的数组。$arr[i]$ 表示国家 $i$ 的特殊能力。\n - 如果你能到达赛博乐园，调用该函数应返回从你的国家到达赛博乐园的最短时间，如果你不能，则返回 $−1$。\n - 这个过程可能会被多次调用。\n\n假设选手的答案为 $ans_1$ ，标准输出为 $ans_2$ ，当且仅当 $\\dfrac{|ans_1-ans_2|}{\\max\\{ans_2,1\\}} \\le 10 ^ {-6}$ 时你的输出被视为是正确的。\n\n注意：由于函数调用可能会发生多次，选手需要注意之前调用的残余数据对于后续调用的影响。", "inputFormat": "评测程序示例读取如下格式的输入：\n\n - 第 $1$ 行: $T$\n \n对于 $T$ 组测试数据中的每一个:\n - 第 $1$ 行: $N \\ M \\ K$\n - 第 $2$ 行: $H$\n - 第 $3$ 行: $arr[0] \\ arr[1] \\ arr[2] \\  \\cdots  \\ arr[N − 1]$\n - 第 $4 + i(0 \\le i \\le M − 1)$ 行: $x[i] \\ y[i]  \\ c[i]$", "outputFormat": "评测程序示例按照如下的格式打印你的答案：\n\n对于每组测试数据：\n\n- 第 $1$ 行: 调用 `solve` 的返回值", "hint": "### 例子\n\n#### 样例 1\n\n考虑下面的调用：\n\n```cpp\nsolve(3, 2, 30, 2, {1, 2}, {2, 0}, {12, 4}, {1, 2, 1});\n```\n\n唯一的到达赛博乐园的路径是 $0 \\rightarrow 2$，因为你到达了赛博乐园之后不能再移动到其他任何地方。通行时间的计算过程如下：\n\n| 国家编号 | 通行时间 |\n| :--: | :--: |\n| $0$ | $0$ |\n| $2$ | $0 + 4 \\rightarrow 4(\\text{求和}) \\rightarrow 4(\\text{特殊能力})$|\n\n#### 样例 2\n\n考虑下面的调用：\n\n```cpp\nsolve(4, 4, 30, 3, {0, 0, 1, 2}, {1, 2, 3, 3}, {5, 4, 2, 4}, {1, 0, 2, 1});\n```\n\n从你的国家到赛博乐园有两条路径：$0 \\rightarrow 1 \\rightarrow 3$ 和 $0 \\rightarrow 2 \\rightarrow 3$。\n\n如果选择路径 $0 \\rightarrow 1 \\rightarrow 3$，通行时间的计算如下：\n\n| 国家编号 | 通行时间 |\n| :--: | :--: |\n| $0$ | $0$ |\n| $1$ | $0 + 5 \\rightarrow 5(\\text{求和}) \\rightarrow 0(\\text{特殊能力})$|\n| $3$ | $0 + 2 \\rightarrow 2(\\text{求和}) \\rightarrow 2(\\text{特殊能力})$|\n\n如果选择路径 $0 \\rightarrow 2 \\rightarrow 3$，通行时间的计算如下：\n\n| 国家编号 | 通行时间 |\n| :--: | :--: |\n| $0$ | $0$ |\n| $2$ | $0 + 4 \\rightarrow 4(\\text{求和}) \\rightarrow 2(\\text{特殊能力})$|\n| $3$ | $2 + 4 \\rightarrow 6(\\text{求和}) \\rightarrow 6(\\text{特殊能力})$|\n\n所以，上述调用应该返回 $2$。\n\n### 约束条件\n\n - $2 \\le N \\le 10^5 , \\sum N \\le 10^5$.\n - $0 ≤ M ≤ \\min\\{10^5, \\dfrac{N(N-1)}{2} \\}, \\sum M ≤ 10^5$.\n - $1 \\le K \\le 10^6$.\n - $1 \\le H < N$\n - $0 \\le  x[i], y[i] < N , x[i] \\neq y[i]$.\n - $1 \\le c[i] \\le 10^9$.\n - $arr[i] \\in \\{0, 1, 2\\}$.\n - 保证每两个国家之间至多使用一条道路进行连接。\n\n### 子任务\n\n1. (5 分)：$N \\le 3, K \\le 30$.\n2. (8 分)：$M = N − 1, K \\le 30, arr[i] = 1$，你可以通过这 $M$ 条道路从任意国家到另外一个国家。\n3. (13 分)：$M = N − 1, K \\le 30, arr[i] \\in \\{0, 1\\}$，你可以通过这 $M$ 条道路从任意国家到另外一个国家。\n4. (19 分)：$M = N − 1, K \\le 30, x[i] = i, y[i] = i + 1$.\n5. (7 分)：$K \\le 30, arr[i] = 1$.\n6. (16 分)：$K \\le 30, arr[i] \\in \\{0, 1\\}$.\n7. (29 分)：$K \\le 30$.\n8. (3 分)：没有特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9371", "type": "P", "difficulty": 6, "samples": [["7\n1 2 3 1 2 1 3", "3"], ["9\n1 1 2 3 4 3 2 1 1", "2"], ["14\n2 6 2 5 3 4 2 1 4 3 5 6 3 2", "3"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2023", "APIO", "交互题", "Special Judge", "O2优化"], "title": "[APIO2023] 序列 / sequence", "background": "**由于部分 BUG，使用 C++14 (GCC9) 提交会产生编译错误，请使用 C++14 等语言进行提交。**\n\n提交时，无需引用 `sequence.h`。你提交的代码中需要实现以下函数：\n\n```cpp\nint sequence(int N, std::vector<int> A)\n```", "description": "在迷人的 APIO 国，居住一位着年轻智慧的学生 Alice。Alice 对解决能挑战她数学能力的有趣问题有着永不满足的好奇心。一天，她在解决一个神秘的有关长为 $N$ 的序列 (即 $A[0], A[1], \\cdots, A[N-1]$ ) 的问题时遇到了困难，她无法抗拒探索答案的诱惑力。\n\n现在，她想要与你分享一些她的发现。不过，为了更好的理解，我们需要给出以下定义:\n\n- 定义 $W(l, r, x)$ 为 $\\sum_{i=l}^{r} \\mathbb{I}[A[i]=x]$, 即 $x$ 在 $A[l] \\cdots A[r]$ 中的出现次数。\n- 定义一个非空整数序列 $B[0] B[1] \\cdots B[k-1]$ 的中位数集合为 $S(\\{B[0], B[1] \\cdots B[k-1]\\})$, 然后 Alice 会展示如何分步计算中位数集合:\n\n○首先，将序列 $B[0], B[1], \\ldots, B[k-1]$ 按照升序排序，令排好序的序列为 $C[0], C[1], \\ldots, C[k-1]_{0}$\n\n○ 然后, $S(\\{B[0], B[1] \\cdots B[k-1]\\})=\\left\\{C\\left[\\left\\lfloor\\frac{k-1}{2}\\right]\\right], C\\left[\\left\\lceil\\frac{k-1}{2}\\right\\rceil\\right]\\right\\}$ 。\n\n○ 为了能更好的理解 $S$ 的计算，以下为一些例子:\n\n- $S(\\{6,3,5,4,6,2,3\\})=\\{4\\}$.\n- $S(\\{4,2,3,1\\})=\\{2,3\\}$\n- $S(\\{5,4,2,4\\})=\\{4\\}$.\n\n作为一道具有挑战性的问题, Alice 想对于所有的 $(l, r)(0 \\leq l \\leq r \\leq N-1)$ 找到其价值 $\\max _{x \\in S(l, r)} W(l, r, x)$ 的最大值。其中 $S(l, r)$ 代表 $A[l] \\cdots A[r]$ 导出的中位数集合（正如之前提到的 $S(A[l], \\cdots, A[r])$ )。虽然 Alice 已经得到了答案，她需要核对答案的正确性，所以她找到了你，希望你能编程解决问题。\n\n### 实现细节\n\n你需要实现如下的过程:\n\n```cpp\nint sequence(int N, std:: vector<int> A);\n```\n- $N$ ：序列 $A$ 的长度。\n- $A$ : 一个长度为 $N$ 的数组，即输入中提到的序列 $A$ 。\n- 该函数应返回一个整数，代表所有可行 $(l, r)$ 价值的最大值。\n- 这个函数恰好被调用一次。\n", "inputFormat": "评测程序示例读取如下格式的输入:\n\n第 $1$ 行: $N$\n\n第 $2$ 行: $A[0] A[1] \\cdots A[N-1]$", "outputFormat": "评测程序示例按照如下的格式打印你的答案:\n\n第 $1$ 行：`sequence` 的返回值。", "hint": "### 例子\n\n#### 样例 1\n\n考虑如下的调用:\n\n```cpp\nsequence(7,{1,2,3,1,2,1,3});\n```\n\n函数应返回 $3$。\n\n在这个样例中, $S(0,5)=\\{1,2\\}, W(0,5,1)=3 ， W(0,5,2)=2$ ，所以 $(0,5)$ 的价值为 3 。\n\n容易验证 $(0,5)$ 在所有合法的 $(l, r)$ 二元组中有着最大的价值。\n\n#### 样例 2\n\n考虑如下的调用:\n\n```cpp\nsequence(9,{1,1,2,3,4,3,2,1,1});\n```\n\n函数应返回 $2$。\n\n### 样例 3\n\n考虑如下的调用:\n\n```cpp\nsequence(14,{2,6,2,5,3,4,2,1,4,3,5,6,3,2});\n```\n\n函数应返回 $3$。\n\n### 约束条件\n\n- $1 \\leq N \\leq 5 \\times 10^{5}$\n- $1 \\leq A[i] \\leq N$\n\n### 子任务\n\n1. (11 分)：$N \\leq 100$ 。\n2. (17 分)：$N \\le 2 \\times 10^{3}$ 。\n3. (7 分)：存在一个 $x$ 满足 $\\forall 0 \\leq i<x, A[i] \\leq A[i+1]$ 且 $\\forall x<i<N, A[i] \\leq A[i-1]$ 。\n4. (12 分)：$A[i] \\leq 3$ 。\n5. (13 分)：$W(0, N-1, A[i]) \\leq 2$ (对于所有满足 $0 \\leq i \\leq N-1$ 的 $i$ )。\n6. (22 分)：$N \\leq 8 \\times 10^{4}$ 。\n7. (18 分)：没有额外限制。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APIO2023] 序列 / sequence", "background": "**由于部分 BUG，使用 C++14 (GCC9) 提交会产生编译错误，请使用 C++14 等语言进行提交。**\n\n提交时，无需引用 `sequence.h`。你提交的代码中需要实现以下函数：\n\n```cpp\nint sequence(int N, std::vector<int> A)\n```", "description": "在迷人的 APIO 国，居住一位着年轻智慧的学生 Alice。Alice 对解决能挑战她数学能力的有趣问题有着永不满足的好奇心。一天，她在解决一个神秘的有关长为 $N$ 的序列 (即 $A[0], A[1], \\cdots, A[N-1]$ ) 的问题时遇到了困难，她无法抗拒探索答案的诱惑力。\n\n现在，她想要与你分享一些她的发现。不过，为了更好的理解，我们需要给出以下定义:\n\n- 定义 $W(l, r, x)$ 为 $\\sum_{i=l}^{r} \\mathbb{I}[A[i]=x]$, 即 $x$ 在 $A[l] \\cdots A[r]$ 中的出现次数。\n- 定义一个非空整数序列 $B[0] B[1] \\cdots B[k-1]$ 的中位数集合为 $S(\\{B[0], B[1] \\cdots B[k-1]\\})$, 然后 Alice 会展示如何分步计算中位数集合:\n\n○首先，将序列 $B[0], B[1], \\ldots, B[k-1]$ 按照升序排序，令排好序的序列为 $C[0], C[1], \\ldots, C[k-1]_{0}$\n\n○ 然后, $S(\\{B[0], B[1] \\cdots B[k-1]\\})=\\left\\{C\\left[\\left\\lfloor\\frac{k-1}{2}\\right]\\right], C\\left[\\left\\lceil\\frac{k-1}{2}\\right\\rceil\\right]\\right\\}$ 。\n\n○ 为了能更好的理解 $S$ 的计算，以下为一些例子:\n\n- $S(\\{6,3,5,4,6,2,3\\})=\\{4\\}$.\n- $S(\\{4,2,3,1\\})=\\{2,3\\}$\n- $S(\\{5,4,2,4\\})=\\{4\\}$.\n\n作为一道具有挑战性的问题, Alice 想对于所有的 $(l, r)(0 \\leq l \\leq r \\leq N-1)$ 找到其价值 $\\max _{x \\in S(l, r)} W(l, r, x)$ 的最大值。其中 $S(l, r)$ 代表 $A[l] \\cdots A[r]$ 导出的中位数集合（正如之前提到的 $S(A[l], \\cdots, A[r])$ )。虽然 Alice 已经得到了答案，她需要核对答案的正确性，所以她找到了你，希望你能编程解决问题。\n\n### 实现细节\n\n你需要实现如下的过程:\n\n```cpp\nint sequence(int N, std:: vector<int> A);\n```\n- $N$ ：序列 $A$ 的长度。\n- $A$ : 一个长度为 $N$ 的数组，即输入中提到的序列 $A$ 。\n- 该函数应返回一个整数，代表所有可行 $(l, r)$ 价值的最大值。\n- 这个函数恰好被调用一次。\n", "inputFormat": "评测程序示例读取如下格式的输入:\n\n第 $1$ 行: $N$\n\n第 $2$ 行: $A[0] A[1] \\cdots A[N-1]$", "outputFormat": "评测程序示例按照如下的格式打印你的答案:\n\n第 $1$ 行：`sequence` 的返回值。", "hint": "### 例子\n\n#### 样例 1\n\n考虑如下的调用:\n\n```cpp\nsequence(7,{1,2,3,1,2,1,3});\n```\n\n函数应返回 $3$。\n\n在这个样例中, $S(0,5)=\\{1,2\\}, W(0,5,1)=3 ， W(0,5,2)=2$ ，所以 $(0,5)$ 的价值为 3 。\n\n容易验证 $(0,5)$ 在所有合法的 $(l, r)$ 二元组中有着最大的价值。\n\n#### 样例 2\n\n考虑如下的调用:\n\n```cpp\nsequence(9,{1,1,2,3,4,3,2,1,1});\n```\n\n函数应返回 $2$。\n\n### 样例 3\n\n考虑如下的调用:\n\n```cpp\nsequence(14,{2,6,2,5,3,4,2,1,4,3,5,6,3,2});\n```\n\n函数应返回 $3$。\n\n### 约束条件\n\n- $1 \\leq N \\leq 5 \\times 10^{5}$\n- $1 \\leq A[i] \\leq N$\n\n### 子任务\n\n1. (11 分)：$N \\leq 100$ 。\n2. (17 分)：$N \\le 2 \\times 10^{3}$ 。\n3. (7 分)：存在一个 $x$ 满足 $\\forall 0 \\leq i<x, A[i] \\leq A[i+1]$ 且 $\\forall x<i<N, A[i] \\leq A[i-1]$ 。\n4. (12 分)：$A[i] \\leq 3$ 。\n5. (13 分)：$W(0, N-1, A[i]) \\leq 2$ (对于所有满足 $0 \\leq i \\leq N-1$ 的 $i$ )。\n6. (22 分)：$N \\leq 8 \\times 10^{4}$ 。\n7. (18 分)：没有额外限制。 ", "locale": "zh-CN"}}}
{"pid": "P9373", "type": "P", "difficulty": 2, "samples": [["3\n1 0\n13 3\n198818800000 122122200000", "0 1\n8 5\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["Special Judge", "构造"], "title": "「DROI」Round 2 构造与取模", "background": "与其编写苍白无力的背景，不如出更有质量的题。\n\n", "description": "对于整数 $n,k$，若存在**非负整数** $x$ 与 **正整数** $y$ 满足：\n\n$$x + y = n\\ \\land\\ x \\bmod y =k$$\n\n则我们称有序数对 $(x,y)$ 是 $n$ 的一个 **优秀拆分**（其中 $\\land$  是**并且**的意思）。\n\n现给定非负整数 $n,k$，请你构造**任意**一组 $n$ 的优秀拆分，并分别输出你构造方案中的 $x$ 和 $y$。特殊地，若不存在这样的拆分，则输出 `-1`。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行两个非负整数，分别为 $n,k$。", "outputFormat": "输出共 $T$ 行，第 $i$ 行表示第 $i$ 组数据的答案。", "hint": "#### 样例解释\n\n对于第一组数据，只存在唯一的构造方式。\n\n对于第二组数据，$(3,10)$ 也是一组合法的构造。\n\n对于第三组数据，可以证明不存在一组合法的构造。\n\n------------\n\n#### 数据范围\n\n**「本题采用捆绑测试」**\n\n- $\\operatorname{Subtask} 1(20\\%)$：$n \\leq 10^6$。\n\n- $\\operatorname{Subtask} 2(40\\%)$：$n \\leq 10^{12}$。\n\n- $\\operatorname{Subtask} 3(40\\%)$：无特殊限制。\n\n对于 $100\\%$ 的数据：$T \\leq 5$，$0 \\leq n,k \\leq 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DROI」Round 2 构造与取模", "background": "与其编写苍白无力的背景，不如出更有质量的题。\n\n", "description": "对于整数 $n,k$，若存在**非负整数** $x$ 与 **正整数** $y$ 满足：\n\n$$x + y = n\\ \\land\\ x \\bmod y =k$$\n\n则我们称有序数对 $(x,y)$ 是 $n$ 的一个 **优秀拆分**（其中 $\\land$  是**并且**的意思）。\n\n现给定非负整数 $n,k$，请你构造**任意**一组 $n$ 的优秀拆分，并分别输出你构造方案中的 $x$ 和 $y$。特殊地，若不存在这样的拆分，则输出 `-1`。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行两个非负整数，分别为 $n,k$。", "outputFormat": "输出共 $T$ 行，第 $i$ 行表示第 $i$ 组数据的答案。", "hint": "#### 样例解释\n\n对于第一组数据，只存在唯一的构造方式。\n\n对于第二组数据，$(3,10)$ 也是一组合法的构造。\n\n对于第三组数据，可以证明不存在一组合法的构造。\n\n------------\n\n#### 数据范围\n\n**「本题采用捆绑测试」**\n\n- $\\operatorname{Subtask} 1(20\\%)$：$n \\leq 10^6$。\n\n- $\\operatorname{Subtask} 2(40\\%)$：$n \\leq 10^{12}$。\n\n- $\\operatorname{Subtask} 3(40\\%)$：无特殊限制。\n\n对于 $100\\%$ 的数据：$T \\leq 5$，$0 \\leq n,k \\leq 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P9374", "type": "P", "difficulty": 5, "samples": [["5 998244353\n1\n3\n5\n12\n888", "1\n16\n986\n328006912\n535268381"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "O2优化", "组合数学"], "title": "「DROI」Round 2 单图", "background": "与其编写苍白无力的背景，不如出更有质量的题。", "description": "我们称[简单有向图](https://www.luogu.com.cn/paste/4oz6fep2) $G,H$ **本质相同**，当且仅当：\n\n- 对于任意点对 $(u,v)$，若在图 $G$ 中从 $u$ 出发能走到 $v$，则在图 $H$ 中从 $u$ 出发能走到 $v$。反之若在图 $H$ 中从 $u$ 出发能走到 $v$，则在图 $G$ 中从 $u$ 出发也能走到 $v$。\n\n若对于简单有向图 $G$，不存在其他简单有向图 $H$ 与其本质相同，则我们称图 $G$ 为 **单图**。\n\n$T$ 次询问，每次询问给定一个正整数 $n$，请你回答 $n$ 个点的**有标号**单图数。", "inputFormat": "**本题采用多组输入。**\n\n第一行输入两个整数 $T,mod$，表示数据组数与模数。\n\n接下来 $T$ 行每行一个整数，表示这组数据的 $n$。", "outputFormat": "输出 $T$ 行，第 $i$ 行表示第 $i$ 组数据的答案对 $mod$ 取模的值。", "hint": "#### 数据范围\n\n**「本题采用捆绑测试」** \n\n- $\\operatorname{Subtask} 1(30\\%)$：$T = 1$，$n \\leq 5$。\n\n- $\\operatorname{Subtask} 2(50\\%)$：$T \\leq 10$。\n\n- $\\operatorname{Subtask} 3(20\\%)$：无特殊限制。\n\n对于 $100\\%$ 的数据满足：$1 \\leq T,n \\leq 1000$，$1\\leq mod \\leq 10^9$。\n\n\n#### 说明提示\n\n这里给出一些例子来帮助理解单图的含义：\n\n------------\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kykl8fg8.png)[](https://www.luogu.com.cn/paste/0tbbkesd)\n\n这是一张单图，可以证明不存在其他图与其本质相同。\n\n------------\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5appj8pr.png)\n\n这不是一张单图，因为我们可以添加边 $(5,2)$ 构造出与其本质相同的图。\n\n------------\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wtsep329.png)\n\n这不是一张单图，因为我们可以删去边 $(1,3)$ 构造出与其本质相同的图。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DROI」Round 2 单图", "background": "与其编写苍白无力的背景，不如出更有质量的题。", "description": "我们称[简单有向图](https://www.luogu.com.cn/paste/4oz6fep2) $G,H$ **本质相同**，当且仅当：\n\n- 对于任意点对 $(u,v)$，若在图 $G$ 中从 $u$ 出发能走到 $v$，则在图 $H$ 中从 $u$ 出发能走到 $v$。反之若在图 $H$ 中从 $u$ 出发能走到 $v$，则在图 $G$ 中从 $u$ 出发也能走到 $v$。\n\n若对于简单有向图 $G$，不存在其他简单有向图 $H$ 与其本质相同，则我们称图 $G$ 为 **单图**。\n\n$T$ 次询问，每次询问给定一个正整数 $n$，请你回答 $n$ 个点的**有标号**单图数。", "inputFormat": "**本题采用多组输入。**\n\n第一行输入两个整数 $T,mod$，表示数据组数与模数。\n\n接下来 $T$ 行每行一个整数，表示这组数据的 $n$。", "outputFormat": "输出 $T$ 行，第 $i$ 行表示第 $i$ 组数据的答案对 $mod$ 取模的值。", "hint": "#### 数据范围\n\n**「本题采用捆绑测试」** \n\n- $\\operatorname{Subtask} 1(30\\%)$：$T = 1$，$n \\leq 5$。\n\n- $\\operatorname{Subtask} 2(50\\%)$：$T \\leq 10$。\n\n- $\\operatorname{Subtask} 3(20\\%)$：无特殊限制。\n\n对于 $100\\%$ 的数据满足：$1 \\leq T,n \\leq 1000$，$1\\leq mod \\leq 10^9$。\n\n\n#### 说明提示\n\n这里给出一些例子来帮助理解单图的含义：\n\n------------\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kykl8fg8.png)[](https://www.luogu.com.cn/paste/0tbbkesd)\n\n这是一张单图，可以证明不存在其他图与其本质相同。\n\n------------\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5appj8pr.png)\n\n这不是一张单图，因为我们可以添加边 $(5,2)$ 构造出与其本质相同的图。\n\n------------\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wtsep329.png)\n\n这不是一张单图，因为我们可以删去边 $(1,3)$ 构造出与其本质相同的图。\n\n", "locale": "zh-CN"}}}
{"pid": "P9375", "type": "P", "difficulty": 5, "samples": [["6\n2 1 4899 4 1 4\n1 1 1 0 0 0", "9"], ["10\n1 1 1 2 4 3 3 3 8 8\n2 1 2 0 0 0 0 0 0 0", "24"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "记忆化搜索"], "title": "「DROI」Round 2 划分", "background": "与其编写苍白无力的背景，不如出更有质量的题。", "description": "给定长度为 $n$ 的序列 $A$。\n\n定义序列 $A$ 的某个子段 $[L,R]$ 的权值为: \n\n$$ \\sum_{i=L}^{R}[\\vert A_i - A_L \\vert是完全平方数] \\times \\sum_{i=L}^{R}[\\vert A_R - A_i \\vert是完全平方数]$$\n\n现在你需要将序列 $A$ **不重不漏**地划分成若干个子段，使得对于 $\\forall i \\in [1,n]$，长度为 $i$ 的子段有 $c_i$ 个。\n\n在此基础上，求一种划分方案使所有子段权值和最大，输出这个最大值即可。特殊地，若不存在任意一种划分方案，则输出 `-1`。\n\n**对题意不清楚的，可见下方说明提示。**\n", "inputFormat": "首先输入一个整数 $n$，表示序列 $A$ 的长度。\n\n然后输入一行 $n$ 个数，其中第 $i$ 个数表示 $A_i$。\n\n最后再输入一行 $n$ 个数，其中第 $i$ 个数表示 $c_i$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "#### 样例解释\n对于样例一，一种最优划分是分别在第二、三个数后面将序列断开。\n\n对于样例二，一种最优划分是分别在第三、四、五、八个数后面将序列断开。\n\n\n------------\n\n#### 数据范围\n\n**「本题采用捆绑测试」**\n\n- $\\operatorname{Subtask} 1(10\\%)$：$n \\leq 20$。\n\n- $\\operatorname{Subtask} 2(20\\%)$：$n \\leq 50,\\sum_{i=1}^{n}c_i \\leq 20$。\n\n- $\\operatorname{Subtask} 3(20\\%)$：$n \\leq 50,\\forall i>5,c_i=0$。\n\n- $\\operatorname{Subtask} 4(50\\%)$：无特殊限制。\n\n对于 $100\\%$ 的数据：$0 \\leq c_i\\leq n \\leq 120,1 \\leq a_i \\leq 10^4$。\n\n------------\n\n#### 说明提示\n\n- 我们规定，$0$ 是完全平方数。\n\n- $[P]=1$ 当且仅当 $P$ 是真命题，否则 $[P]=0$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DROI」Round 2 划分", "background": "与其编写苍白无力的背景，不如出更有质量的题。", "description": "给定长度为 $n$ 的序列 $A$。\n\n定义序列 $A$ 的某个子段 $[L,R]$ 的权值为: \n\n$$ \\sum_{i=L}^{R}[\\vert A_i - A_L \\vert是完全平方数] \\times \\sum_{i=L}^{R}[\\vert A_R - A_i \\vert是完全平方数]$$\n\n现在你需要将序列 $A$ **不重不漏**地划分成若干个子段，使得对于 $\\forall i \\in [1,n]$，长度为 $i$ 的子段有 $c_i$ 个。\n\n在此基础上，求一种划分方案使所有子段权值和最大，输出这个最大值即可。特殊地，若不存在任意一种划分方案，则输出 `-1`。\n\n**对题意不清楚的，可见下方说明提示。**\n", "inputFormat": "首先输入一个整数 $n$，表示序列 $A$ 的长度。\n\n然后输入一行 $n$ 个数，其中第 $i$ 个数表示 $A_i$。\n\n最后再输入一行 $n$ 个数，其中第 $i$ 个数表示 $c_i$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "#### 样例解释\n对于样例一，一种最优划分是分别在第二、三个数后面将序列断开。\n\n对于样例二，一种最优划分是分别在第三、四、五、八个数后面将序列断开。\n\n\n------------\n\n#### 数据范围\n\n**「本题采用捆绑测试」**\n\n- $\\operatorname{Subtask} 1(10\\%)$：$n \\leq 20$。\n\n- $\\operatorname{Subtask} 2(20\\%)$：$n \\leq 50,\\sum_{i=1}^{n}c_i \\leq 20$。\n\n- $\\operatorname{Subtask} 3(20\\%)$：$n \\leq 50,\\forall i>5,c_i=0$。\n\n- $\\operatorname{Subtask} 4(50\\%)$：无特殊限制。\n\n对于 $100\\%$ 的数据：$0 \\leq c_i\\leq n \\leq 120,1 \\leq a_i \\leq 10^4$。\n\n------------\n\n#### 说明提示\n\n- 我们规定，$0$ 是完全平方数。\n\n- $[P]=1$ 当且仅当 $P$ 是真命题，否则 $[P]=0$。\n", "locale": "zh-CN"}}}
{"pid": "P9376", "type": "P", "difficulty": 6, "samples": [["5 5\n7 6 5 8 9\n1 3 2\n2 5 2\n4 4 6\n3 5 4\n1 5 3", "5\n8\n0\n5 \n10"], ["8 4\n10 14 7 11 19 13 7 18 \n1 7 4\n3 8 2\n1 4 4\n1 4 2\n", "15\n18\n8\n11\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["莫队", "树状数组", "O2优化", "可持久化线段树", "随机化"], "title": "「DROI」Round 2  进制与操作", "background": "与其编写苍白无力的背景，不如出更有质量的题。", "description": "定义数 $x$ 在 $B$ 进制下的一次操作为以下两种操作中的任意一种：\n\n- 令 $x \\rightarrow \\lfloor \\dfrac{x}{B} \\rfloor$。\n\n- 令 $x \\rightarrow x \\times B + t $。其中 $t \\in [0,B-1]$。\n\n现给定长度为 $n$ 的序列 $A$。$m$ 次询问，每次询问形如：\n\n- `l r B` 表示询问将序列 $A$ 中下标在 $[l,r]$ 之内的数在 $B$ 进制下操作，至少多少次才能将所有数变为相同（注：每次操作是对**一个数**进行操作）。\n\n**询问间相互独立，即操作不会真的进行。**\n\n", "inputFormat": "第一个两个整数，分别表示 $n,m$。\n\n第二行一行 $n$ 个数，表示序列 $A$。\n\n接下来 $m$ 行，每行三个数，分别表示这次询问的 $l,r,B$。", "outputFormat": "输出共 $m$ 行，其中第 $i$ 行表示第 $i$ 次询问的答案。", "hint": "### 样例解释\n\n对于样例一，五次询问分别将区间内所有数变为 $3$、$4$、$8$、$4$、$6$ 是一种最优操作。\n\n------------\n\n### 数据范围 \n\n**「本题采用捆绑测试」**\n\n- $\\operatorname{Subtask} 1(10\\%)$：$n,m \\leq 1000$。\n\n- $\\operatorname{Subtask} 2(20\\%)$：保证所有询问 $B=2$。\n\n- $\\operatorname{Subtask} 3(40\\%)$：$n,m \\leq 3 \\times 10^4$。\n\n- $\\operatorname{Subtask} 4(30\\%)$：无特殊限制。\n\n对于 $100\\%$ 的数据：$1 \\leq n,m \\leq 10^5$，$2 \\leq A_i,B \\leq 10^8$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DROI」Round 2  进制与操作", "background": "与其编写苍白无力的背景，不如出更有质量的题。", "description": "定义数 $x$ 在 $B$ 进制下的一次操作为以下两种操作中的任意一种：\n\n- 令 $x \\rightarrow \\lfloor \\dfrac{x}{B} \\rfloor$。\n\n- 令 $x \\rightarrow x \\times B + t $。其中 $t \\in [0,B-1]$。\n\n现给定长度为 $n$ 的序列 $A$。$m$ 次询问，每次询问形如：\n\n- `l r B` 表示询问将序列 $A$ 中下标在 $[l,r]$ 之内的数在 $B$ 进制下操作，至少多少次才能将所有数变为相同（注：每次操作是对**一个数**进行操作）。\n\n**询问间相互独立，即操作不会真的进行。**\n\n", "inputFormat": "第一个两个整数，分别表示 $n,m$。\n\n第二行一行 $n$ 个数，表示序列 $A$。\n\n接下来 $m$ 行，每行三个数，分别表示这次询问的 $l,r,B$。", "outputFormat": "输出共 $m$ 行，其中第 $i$ 行表示第 $i$ 次询问的答案。", "hint": "### 样例解释\n\n对于样例一，五次询问分别将区间内所有数变为 $3$、$4$、$8$、$4$、$6$ 是一种最优操作。\n\n------------\n\n### 数据范围 \n\n**「本题采用捆绑测试」**\n\n- $\\operatorname{Subtask} 1(10\\%)$：$n,m \\leq 1000$。\n\n- $\\operatorname{Subtask} 2(20\\%)$：保证所有询问 $B=2$。\n\n- $\\operatorname{Subtask} 3(40\\%)$：$n,m \\leq 3 \\times 10^4$。\n\n- $\\operatorname{Subtask} 4(30\\%)$：无特殊限制。\n\n对于 $100\\%$ 的数据：$1 \\leq n,m \\leq 10^5$，$2 \\leq A_i,B \\leq 10^8$。\n", "locale": "zh-CN"}}}
{"pid": "P9377", "type": "P", "difficulty": 5, "samples": [["3 6 2\n17 14 11 \n0 2 3\n4 2 9\n2 2 1\n2 2 6\n7 0 5\n4 2 9\n", "3 14 0 17 9 11 17 8\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "最短路", "THUPC"], "title": "[THUPC 2023 决赛] 百合", "background": "葡萄藤上开不出百合花。", "description": "你落在一个巨大的葡萄架上，上面一共有 $2^k$ 朵百合花和 $m$ 条葡萄藤。其中，百合花编号为 $0$ 到 $2^k-1$ 的整数，第 $i$ 条葡萄藤连接了编号为 $x_i, y_i$ 的百合花。\n\n你可以花费 $c_i$ 的时间通过第 $i$ 条葡萄藤，也就是从 $x_i$ 走到 $y_i$，或者反过来；还可以花费 $a_k$ 的时间从 $x$ 闪现到 $y$，其中 $x, y$ 是任意两朵百合花，$k$ 是它们在二进制表示下不同的比特数。例如，$3$ 的二进制表示是 $011$，$5$ 的二进制表示是 $101$，它们有两位不同，因此从 $3$ 闪现到 $5$ 花费的时间是 $a_2$。\n\n假设你恰好落在编号为 $s$ 的百合花上，求从 $s$ 出发到每一朵百合花所需要的最短时间。", "inputFormat": "第一行包含三个正整数 $k,m,s$，其含义如题目描述。\n\n第二行包含 $k$ 个非负整数 $a_i$，表示通道花费的时间。\n\n第 $3$ 至第 $(m+2)$ 行每行三个非负整数 $x_i,y_i,c_i$。", "outputFormat": "输出一行 $2^k$ 个数 $D_i$（$0 \\leq i \\leq 2^k-1$），空格隔开，其中 $D_i$ 表示从 $s$ 到 $i$ 的最短时间。", "hint": "**【数据范围】**\n\n对于所有测试数据，$1 \\le k \\leq 17$，$1 \\le m \\leq 2 \\times 10^5$，$0 \\leq s,x_i,y_i \\leq 2^k - 1$，$0 \\le a_i, c_i \\leq 2^{30} - 1$。\n\n**【题目来源】**\n\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 决赛] 百合", "background": "葡萄藤上开不出百合花。", "description": "你落在一个巨大的葡萄架上，上面一共有 $2^k$ 朵百合花和 $m$ 条葡萄藤。其中，百合花编号为 $0$ 到 $2^k-1$ 的整数，第 $i$ 条葡萄藤连接了编号为 $x_i, y_i$ 的百合花。\n\n你可以花费 $c_i$ 的时间通过第 $i$ 条葡萄藤，也就是从 $x_i$ 走到 $y_i$，或者反过来；还可以花费 $a_k$ 的时间从 $x$ 闪现到 $y$，其中 $x, y$ 是任意两朵百合花，$k$ 是它们在二进制表示下不同的比特数。例如，$3$ 的二进制表示是 $011$，$5$ 的二进制表示是 $101$，它们有两位不同，因此从 $3$ 闪现到 $5$ 花费的时间是 $a_2$。\n\n假设你恰好落在编号为 $s$ 的百合花上，求从 $s$ 出发到每一朵百合花所需要的最短时间。", "inputFormat": "第一行包含三个正整数 $k,m,s$，其含义如题目描述。\n\n第二行包含 $k$ 个非负整数 $a_i$，表示通道花费的时间。\n\n第 $3$ 至第 $(m+2)$ 行每行三个非负整数 $x_i,y_i,c_i$。", "outputFormat": "输出一行 $2^k$ 个数 $D_i$（$0 \\leq i \\leq 2^k-1$），空格隔开，其中 $D_i$ 表示从 $s$ 到 $i$ 的最短时间。", "hint": "**【数据范围】**\n\n对于所有测试数据，$1 \\le k \\leq 17$，$1 \\le m \\leq 2 \\times 10^5$，$0 \\leq s,x_i,y_i \\leq 2^k - 1$，$0 \\le a_i, c_i \\leq 2^{30} - 1$。\n\n**【题目来源】**\n\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN"}}}
{"pid": "P9378", "type": "P", "difficulty": 5, "samples": [["3 1\n1\n1 2 3\n", "1 3\n"], ["3 1\n1\n2 3 1\n", "2 1\n"], ["6 2\n1 3\n3 2 4 5 6 1\n5 4 1 3 6 2\n", "1 4 5 2\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "二分", "2023", "Special Judge", "O2优化", "THUPC"], "title": "[THUPC 2023 决赛] 物理实验", "background": "", "description": "为了验证新提出的猜想，物理学家小 I 需要完成 $n$ 种物理实验，其中第 $i(1 \\le i \\le n)$ 种实验的重要度是 $2^{-i}$。每种实验仅需要完成一次。小 I 一次只能做一种实验，且在开始了一个实验之后，不能做到一半去做另一个实验，也就是说在没有任何其他限制的情况下，小 I 完成实验的顺序可以用一个 $1$ 到 $n$ 的排列表示。\n\n然而事情并非一帆风顺。有 $m$ 轮宇宙射线，分别会在小 I 完成了 $a_1$ 种、$a_2$ 种、$\\dots$、$a_m$ 种（**注意，不是第 $a_i$ 种**）实验后轰击实验基地，保证 $1 \\le a_1 < a_2 < \\dots < a_m < n-m$。因此小 I 需要仔细地安排实验的顺序。\n\n第 $j(1 \\le j \\le m)$ 轮宇宙射线会恰好干扰一种实验的实验仪器，其干扰的实验种类按照以下方式确定：\n\n- 给出一个 $1$ 至 $n$ 的排列 $p_{j,1},\\dots,p_{j,n}$，其中 $i$ 越靠前表示第 $i$ 种实验对这轮宇宙射线越脆弱。**每轮给出的排列不一定相同。**\n- 那么在这轮宇宙射线轰击实验基地时，目前所有**未完成且未被干扰**的实验中最脆弱的一种会被干扰，之后无法进行对应实验。\n\n在以上条件下，小 I 总共可以完成 $(n-m)$ 种实验。小 I 希望它们的重要度总和尽可能大，可是小 I 是物理学家不懂算法，所以小 I 请教于你。你需要给出合理的实验顺序，使得完成的 $(n-m)$ 种实验均未被宇宙射线干扰且重要度总和尽可能大。", "inputFormat": "输入的第一行包含两个正整数 $n,m$，表示实验种数和宇宙射线轮数。\n\n接下来一行 $m$ 个整数 $a_1,a_2,\\dots,a_m$，表示每轮宇宙射线在完成了多少种实验后轰击实验基地。\n\n接下来 $m$ 行，每行 $n$ 个整数 $p_1,p_2,\\dots,p_n$，依次描述每轮宇宙射线的脆弱程度排序。保证 $1 \\le p_i \\le n$ 且每行的输入均构成 $1$ 到 $n$ 的排列。", "outputFormat": "输出一行 $n-m$ 个整数，表示你给出的实验顺序。你需要保证做每种实验时这种实验没有被宇宙射线干扰，且重要度总和最大。如果有多种方案，输出任意一种即可。", "hint": "**【样例解释 #1】**\n\n小 I 第一次完成第一种实验后，宇宙射线将会轰击第二种实验的仪器，因此第二次只能完成第三种实验。容易证明该方案达到最大重要度。\n\n**【样例解释 #2】**\n\n在这个样例中，如果小 I 第一次完成第一种实验，那么宇宙射线将会轰击第二种实验的仪器，导致第二次只能完成第三种实验。此时重要度为 $0.625$，而样例输出给出的方案重要度为 $0.75$。\n\n**【样例解释 #3】**\n\n该组样例有多个合法的输出，如 `5 4 1 2` 也是一个合法的答案。\n\n**【数据范围】**\n\n对于所有测试数据，$3 \\le n \\le 600$，$1 \\le m \\le \\lfloor \\frac{n-1}{2} \\rfloor$，$1 \\le a_1 < a_2 < \\dots < a_m < n-m$。\n\n**【题目来源】**\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 决赛] 物理实验", "background": "", "description": "为了验证新提出的猜想，物理学家小 I 需要完成 $n$ 种物理实验，其中第 $i(1 \\le i \\le n)$ 种实验的重要度是 $2^{-i}$。每种实验仅需要完成一次。小 I 一次只能做一种实验，且在开始了一个实验之后，不能做到一半去做另一个实验，也就是说在没有任何其他限制的情况下，小 I 完成实验的顺序可以用一个 $1$ 到 $n$ 的排列表示。\n\n然而事情并非一帆风顺。有 $m$ 轮宇宙射线，分别会在小 I 完成了 $a_1$ 种、$a_2$ 种、$\\dots$、$a_m$ 种（**注意，不是第 $a_i$ 种**）实验后轰击实验基地，保证 $1 \\le a_1 < a_2 < \\dots < a_m < n-m$。因此小 I 需要仔细地安排实验的顺序。\n\n第 $j(1 \\le j \\le m)$ 轮宇宙射线会恰好干扰一种实验的实验仪器，其干扰的实验种类按照以下方式确定：\n\n- 给出一个 $1$ 至 $n$ 的排列 $p_{j,1},\\dots,p_{j,n}$，其中 $i$ 越靠前表示第 $i$ 种实验对这轮宇宙射线越脆弱。**每轮给出的排列不一定相同。**\n- 那么在这轮宇宙射线轰击实验基地时，目前所有**未完成且未被干扰**的实验中最脆弱的一种会被干扰，之后无法进行对应实验。\n\n在以上条件下，小 I 总共可以完成 $(n-m)$ 种实验。小 I 希望它们的重要度总和尽可能大，可是小 I 是物理学家不懂算法，所以小 I 请教于你。你需要给出合理的实验顺序，使得完成的 $(n-m)$ 种实验均未被宇宙射线干扰且重要度总和尽可能大。", "inputFormat": "输入的第一行包含两个正整数 $n,m$，表示实验种数和宇宙射线轮数。\n\n接下来一行 $m$ 个整数 $a_1,a_2,\\dots,a_m$，表示每轮宇宙射线在完成了多少种实验后轰击实验基地。\n\n接下来 $m$ 行，每行 $n$ 个整数 $p_1,p_2,\\dots,p_n$，依次描述每轮宇宙射线的脆弱程度排序。保证 $1 \\le p_i \\le n$ 且每行的输入均构成 $1$ 到 $n$ 的排列。", "outputFormat": "输出一行 $n-m$ 个整数，表示你给出的实验顺序。你需要保证做每种实验时这种实验没有被宇宙射线干扰，且重要度总和最大。如果有多种方案，输出任意一种即可。", "hint": "**【样例解释 #1】**\n\n小 I 第一次完成第一种实验后，宇宙射线将会轰击第二种实验的仪器，因此第二次只能完成第三种实验。容易证明该方案达到最大重要度。\n\n**【样例解释 #2】**\n\n在这个样例中，如果小 I 第一次完成第一种实验，那么宇宙射线将会轰击第二种实验的仪器，导致第二次只能完成第三种实验。此时重要度为 $0.625$，而样例输出给出的方案重要度为 $0.75$。\n\n**【样例解释 #3】**\n\n该组样例有多个合法的输出，如 `5 4 1 2` 也是一个合法的答案。\n\n**【数据范围】**\n\n对于所有测试数据，$3 \\le n \\le 600$，$1 \\le m \\le \\lfloor \\frac{n-1}{2} \\rfloor$，$1 \\le a_1 < a_2 < \\dots < a_m < n-m$。\n\n**【题目来源】**\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN"}}}
{"pid": "P9379", "type": "P", "difficulty": 6, "samples": [["4\n1 2\n5000\n0\n1\n2 3\n1 10000\n00\n01\n10\n1 1\n1\n1\n3 4\n8888 7777 5555\n000\n010\n101\n110\n", "2\n2\n10000\n1\n10000\n0\n209031157\n194428714\n835313860\n674719626\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "期望", "THUPC", "状压 DP"], "title": "[THUPC 2023 决赛] 老虎机", "background": "", "description": "小 I 经营着一个电玩城，最近引进的新型老虎机深受欢迎。\n\n作为经营者，小 I 首先需要设定老虎机的状态。老虎机的状态为一个三元组 $(l,S,\\mathbf{p})$，其中\n\n- $l$ 是一个正整数；\n- $S$ 是一个非空字符串集合，其中所有的字符串均是长度为 $l$ 的 01 串；\n- $\\mathbf{p}$ 是一个长度为 $l$ 的实数序列 $p_0,p_1,\\dots,p_{l-1}$，其中对于任意 $0 \\le i \\le l - 1$，$0 < p_i \\le 1$。\n\n设定好状态后即可开始游戏。每一轮游戏的流程如下：\n\n- 玩家首先获得老虎机的状态 $(l,S,\\mathbf{p})$。\n- 老虎机内部选择一个串 $s \\in S$ 作为答案串，玩家需要通过与老虎机进行若干次交互得到答案串。\n  - 每一次交互中，玩家投入一个游戏币并拉下老虎机的拉杆，然后老虎机的界面中会出现一个长度为 $l$ 的信息串 $t$。对于 $0 \\le i \\le l - 1$，$t_i$ 有 $p_i$ 的概率为 $s_i$，有 $(1-p_i)$ 的概率为 `?`。\n  - 交互过程中生成信息串进行的所有随机过程两两独立。\n- 当玩家可以根据**老虎机的状态和交互得到的若干信息串**唯一确定答案串后，即可将答案串输入老虎机并结束游戏、获得奖励。\n\n小 I 设定好了一个状态，但还不知道设定多少奖励。为了让奖励和难度匹配，小 I 想知道：对于 $S$ 中的每个串 $t$，在玩家以最优策略游玩（即一旦可以唯一确定答案串就结束游戏）的情况下，若答案串为 $t$，玩家期望需要投入多少游戏币。\n\n由于小 I 不喜欢实数，你需要将答案对 $998244353$ 取模。", "inputFormat": "**本题有多组测试数据。** 第一行一个整数 $T$ 表示测试数据组数，接下来依次输入每组测试数据。\n\n对于每组测试数据，\n\n- 第一行两个整数 $l,n$，表示字符串长度和 $S$ 的大小。\n- 第二行 $l$ 个整数 $c_0,c_1,\\dots,c_{l-1}$，其中 $p_i = \\frac{c_i}{10^4}$。\n- 接下来 $n$ 行，第 $i$ 行一个长度为 $l$ 的 01 串 $s_i$，描述 $S$ 中的一个字符串。", "outputFormat": "对于每组测试数据输出 $n$ 行，第 $i$ 行表示答案串为 $s_i$ 时，在最优策略下玩家期望投入多少游戏币，对 $998244353$ 取模，题目保证这个值总是在模意义下存在。", "hint": "**【样例解释 #1】**\n\n- 对于第一组测试数据，每一次交互有 $\\frac{5000}{10000} = \\frac{1}{2}$ 的概率知道答案串是 $0$ 还是 $1$，有 $\\frac{1}{2}$ 的概率不能获得信息，因此期望游戏币数为 $\\sum_{i=1}^{+\\infty} \\frac{i}{2^i} = 2$。\n- 对于第二组测试数据，每一次交互都可以得到字符串的第二位，有 $\\frac{1}{10000}$ 的概率得到字符串的第一位。第二个字符串为答案串时可以通过字符串的第二位唯一确定，而其他两个字符串为答案串时必须要得到字符串的第一位。\n- 对于第三组测试数据，由于 $|S| = 1$，所以不需要任何交互就可以确定答案串。\n- 对于第四组测试数据，我有一个绝妙的解释，可这里空间太小写不下。\n\n**【数据范围】**\n\n对于所有测试数据，$1 \\le T \\le 10$，$1 \\le l \\le 15$，$1 \\le n \\le 2^l$，$1 \\le c_i \\le 10^4$，$s_1,\\dots,s_n$ 为两两不同的长度为 $l$ 的 01 串。\n\n**【后记】**\n\n“喂喂喂，未成年人不准进入电玩城！什么？你们说你们要进去学算法竞赛？谁信你的鬼话！”\n\n**【题目来源】**\n\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 决赛] 老虎机", "background": "", "description": "小 I 经营着一个电玩城，最近引进的新型老虎机深受欢迎。\n\n作为经营者，小 I 首先需要设定老虎机的状态。老虎机的状态为一个三元组 $(l,S,\\mathbf{p})$，其中\n\n- $l$ 是一个正整数；\n- $S$ 是一个非空字符串集合，其中所有的字符串均是长度为 $l$ 的 01 串；\n- $\\mathbf{p}$ 是一个长度为 $l$ 的实数序列 $p_0,p_1,\\dots,p_{l-1}$，其中对于任意 $0 \\le i \\le l - 1$，$0 < p_i \\le 1$。\n\n设定好状态后即可开始游戏。每一轮游戏的流程如下：\n\n- 玩家首先获得老虎机的状态 $(l,S,\\mathbf{p})$。\n- 老虎机内部选择一个串 $s \\in S$ 作为答案串，玩家需要通过与老虎机进行若干次交互得到答案串。\n  - 每一次交互中，玩家投入一个游戏币并拉下老虎机的拉杆，然后老虎机的界面中会出现一个长度为 $l$ 的信息串 $t$。对于 $0 \\le i \\le l - 1$，$t_i$ 有 $p_i$ 的概率为 $s_i$，有 $(1-p_i)$ 的概率为 `?`。\n  - 交互过程中生成信息串进行的所有随机过程两两独立。\n- 当玩家可以根据**老虎机的状态和交互得到的若干信息串**唯一确定答案串后，即可将答案串输入老虎机并结束游戏、获得奖励。\n\n小 I 设定好了一个状态，但还不知道设定多少奖励。为了让奖励和难度匹配，小 I 想知道：对于 $S$ 中的每个串 $t$，在玩家以最优策略游玩（即一旦可以唯一确定答案串就结束游戏）的情况下，若答案串为 $t$，玩家期望需要投入多少游戏币。\n\n由于小 I 不喜欢实数，你需要将答案对 $998244353$ 取模。", "inputFormat": "**本题有多组测试数据。** 第一行一个整数 $T$ 表示测试数据组数，接下来依次输入每组测试数据。\n\n对于每组测试数据，\n\n- 第一行两个整数 $l,n$，表示字符串长度和 $S$ 的大小。\n- 第二行 $l$ 个整数 $c_0,c_1,\\dots,c_{l-1}$，其中 $p_i = \\frac{c_i}{10^4}$。\n- 接下来 $n$ 行，第 $i$ 行一个长度为 $l$ 的 01 串 $s_i$，描述 $S$ 中的一个字符串。", "outputFormat": "对于每组测试数据输出 $n$ 行，第 $i$ 行表示答案串为 $s_i$ 时，在最优策略下玩家期望投入多少游戏币，对 $998244353$ 取模，题目保证这个值总是在模意义下存在。", "hint": "**【样例解释 #1】**\n\n- 对于第一组测试数据，每一次交互有 $\\frac{5000}{10000} = \\frac{1}{2}$ 的概率知道答案串是 $0$ 还是 $1$，有 $\\frac{1}{2}$ 的概率不能获得信息，因此期望游戏币数为 $\\sum_{i=1}^{+\\infty} \\frac{i}{2^i} = 2$。\n- 对于第二组测试数据，每一次交互都可以得到字符串的第二位，有 $\\frac{1}{10000}$ 的概率得到字符串的第一位。第二个字符串为答案串时可以通过字符串的第二位唯一确定，而其他两个字符串为答案串时必须要得到字符串的第一位。\n- 对于第三组测试数据，由于 $|S| = 1$，所以不需要任何交互就可以确定答案串。\n- 对于第四组测试数据，我有一个绝妙的解释，可这里空间太小写不下。\n\n**【数据范围】**\n\n对于所有测试数据，$1 \\le T \\le 10$，$1 \\le l \\le 15$，$1 \\le n \\le 2^l$，$1 \\le c_i \\le 10^4$，$s_1,\\dots,s_n$ 为两两不同的长度为 $l$ 的 01 串。\n\n**【后记】**\n\n“喂喂喂，未成年人不准进入电玩城！什么？你们说你们要进去学算法竞赛？谁信你的鬼话！”\n\n**【题目来源】**\n\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN"}}}
{"pid": "P9380", "type": "P", "difficulty": 4, "samples": [["3\n0.166667\n0.333333\n0.500000\n", "6\n"], ["7\n0.041096\n0.109589\n0.109589\n0.164384\n0.301370\n0.068493\n0.205479\n", "73\n"], ["13\n0.00155\n0.03876\n0.01584\n0.05189\n0.08099\n0.06825\n0.15658\n0.10404\n0.02640\n0.14332\n0.12941\n0.15529\n0.02768\n", "7766\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2023", "O2优化", "枚举", "THUPC"], "title": "[THUPC 2023 决赛] 总投票数", "background": "各位亲爱的《La Lumière: Scarlet Intense Flame - Adventurous Scarlet -》玩家：\n\n非常荣幸能与您携手度过了这四年的美好时光，衷心感谢大家的支持与陪伴！\n\n现在，我们非常遗憾的宣布，《La Lumière: Scarlet Intense Flame - Adventurous Scarlet -》将于 2023 年 5 月 28 日 15:00 停止运营服务。\n\n停止运营相关时间表如下：\n\n……", "description": "在关服前，运营发起了一系列投票，调查哪些游戏内容给玩家带来了更深的印象。\n\n作为系列的忠实玩家，你想知道有多少人参加了关服前的投票，但是运营只公开了最终的投票结果：对于一项包含 $N$ 个选项的投票，选择第 $i$ 个选项的玩家比例为 $P_i$（$1\\le i\\le N$）。运营在公布结果时进行了四舍五入，所有的 $P_i$ 仅保留到小数点后第 $L$ 位。假设实际有 $K$ 位玩家参加了投票，其中有 $D_i$ 位玩家选择了第 $i$ 个选项，则应该有\n\n$$\nP_i-\\frac{1}{2}\\times 10^{-L}\\le\\frac{D_i}{K}< P_i+\\frac{1}{2}\\times 10^{-L}\n$$\n\n显然，所有的 $D_i$ 必须是非负整数，而 $K=\\sum_{i=1}^N D_i$ 则必须是正整数。现在，给定 $N$ 和 $P_i$，请你求出满足 $D_i$ 有非负整数解的最小的总投票数 $K$。", "inputFormat": "输入的第一行包含一个正整数 $N$，表示投票的选项总数。保证 $1\\le N\\le 100$。\n\n接下来 $N$ 行，每行包括一个 $[0, 1]$ 中的实数 $P_i$，表示选择第 $i$ 个选项的玩家比例。保证 $\\sum_{i=1}^N P_i =1$，所有 $P_i$ 均保留到小数点后第 $L$ 位，且 $1\\le L\\le 6$。", "outputFormat": "输出一个正整数，表示满足要求的最小总投票数 $K$。", "hint": "**【样例解释 #1】**\n\n最小的总投票数为 $6$，对应每个选项的投票数为 $1, 2, 3$。\n\n**【样例解释 #2】**\n\n最小的总投票数为 $73$，对应每个选项的投票数为 $3, 8, 8, 12, 22, 5, 15$。\n\n**【样例解释 #3】**\n\n最小的总投票数为 $7766$，对应每个选项的投票数为 $12, 301, 123, 403, 629, 530, 1216, 808, 205, 1113, 1005, 1206, 215$。\n\n**【数据范围】**\n\n对于所有测试数据，$1\\le N\\le 100$，$0\\le P_i\\le 1$，$\\sum_{i=1}^N P_i=1$，且 $P_i$ 最多统一保留到小数点后 $6$ 位。\n\n**【题目来源】**\n\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 决赛] 总投票数", "background": "各位亲爱的《La Lumière: Scarlet Intense Flame - Adventurous Scarlet -》玩家：\n\n非常荣幸能与您携手度过了这四年的美好时光，衷心感谢大家的支持与陪伴！\n\n现在，我们非常遗憾的宣布，《La Lumière: Scarlet Intense Flame - Adventurous Scarlet -》将于 2023 年 5 月 28 日 15:00 停止运营服务。\n\n停止运营相关时间表如下：\n\n……", "description": "在关服前，运营发起了一系列投票，调查哪些游戏内容给玩家带来了更深的印象。\n\n作为系列的忠实玩家，你想知道有多少人参加了关服前的投票，但是运营只公开了最终的投票结果：对于一项包含 $N$ 个选项的投票，选择第 $i$ 个选项的玩家比例为 $P_i$（$1\\le i\\le N$）。运营在公布结果时进行了四舍五入，所有的 $P_i$ 仅保留到小数点后第 $L$ 位。假设实际有 $K$ 位玩家参加了投票，其中有 $D_i$ 位玩家选择了第 $i$ 个选项，则应该有\n\n$$\nP_i-\\frac{1}{2}\\times 10^{-L}\\le\\frac{D_i}{K}< P_i+\\frac{1}{2}\\times 10^{-L}\n$$\n\n显然，所有的 $D_i$ 必须是非负整数，而 $K=\\sum_{i=1}^N D_i$ 则必须是正整数。现在，给定 $N$ 和 $P_i$，请你求出满足 $D_i$ 有非负整数解的最小的总投票数 $K$。", "inputFormat": "输入的第一行包含一个正整数 $N$，表示投票的选项总数。保证 $1\\le N\\le 100$。\n\n接下来 $N$ 行，每行包括一个 $[0, 1]$ 中的实数 $P_i$，表示选择第 $i$ 个选项的玩家比例。保证 $\\sum_{i=1}^N P_i =1$，所有 $P_i$ 均保留到小数点后第 $L$ 位，且 $1\\le L\\le 6$。", "outputFormat": "输出一个正整数，表示满足要求的最小总投票数 $K$。", "hint": "**【样例解释 #1】**\n\n最小的总投票数为 $6$，对应每个选项的投票数为 $1, 2, 3$。\n\n**【样例解释 #2】**\n\n最小的总投票数为 $73$，对应每个选项的投票数为 $3, 8, 8, 12, 22, 5, 15$。\n\n**【样例解释 #3】**\n\n最小的总投票数为 $7766$，对应每个选项的投票数为 $12, 301, 123, 403, 629, 530, 1216, 808, 205, 1113, 1005, 1206, 215$。\n\n**【数据范围】**\n\n对于所有测试数据，$1\\le N\\le 100$，$0\\le P_i\\le 1$，$\\sum_{i=1}^N P_i=1$，且 $P_i$ 最多统一保留到小数点后 $6$ 位。\n\n**【题目来源】**\n\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN"}}}
{"pid": "P9381", "type": "P", "difficulty": 6, "samples": [["2 1\nStrong Lv=90 maxhp=2451 atk=15588e-4 def=96931e-3 skillLv=5 passivesklLv=5 M weaponatk=80000e0\nStrong Lv=100 maxhp=3512 atk=16385e-4 def=12511e-2 skillLv=5 passivesklLv=5 G weaponatk=80000e0\nWeak Lv=1 maxhp=100000 atk=75000e-5 def=10000e-6 skillLv=5 passivesklLv=5 B weaponatk=80000e0\n3\nSkill target=2\nSpecialattack target=1 atkpos=3 ddgpos=3\nSpecialattack target=1 atkpos=5 ddgpos=5\n", "South 1 applied Strong skill to South 2\nNorth: 100000/100000\nSouth: 2451/2451 3512/3512\n\nSouth 1 took 1063 damage from North 1 -> 1388/2451\nNorth: 100000/100000\nSouth: 1388/2451 3512/3512\n\nNorth 1 took 52556526 damage from South 2 -> 0/100000\nNorth: 0/100000\nSouth: 1388/2451 3512/3512\n\nTeam South won.\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2023", "O2优化", "THUPC"], "title": "[THUPC 2023 决赛] 那些脑海里最珍贵的", "background": "E.Space：设定很怪，别问为什么，问就是看附件。\n\n_没有人听懂的傻话_\n\n_还记得吗_\n\n_写满青春的围墙_\n\n_好努力练习的倔强_\n\n_浅浅伤疤_\n\n_勇敢是我们的翅膀_\n\n_——张韶涵《还记得吗》_", "description": "故事的世界观大概是这样的。这个世界的人分为三类，根据其某种特点被直接命名为 Weak，Average 和 Strong。你可以理解为这是一个关于种族或者职业的分类。\n\n两个队伍之间发生了一场回合制战斗。你知道双方做了什么，现在希望你把所有的细节还原出来。\n\n下面是本题的一些技术细节。\n\n**【人物】**\n\n一个人有以下几种属性值：「种族」、「等级」、「体力上限」、「基础攻击指数」、「基础防御指数」、「主动技能等级」、「被动技能等级」。其中「体力上限」、「基础攻击指数」、「基础防御指数」完全由「种族」和「等级」决定。但是为了输入方便，本题中所有信息都会给出。在战斗中，每个人有一个「体力值」。在战斗开始时，「体力值」等于「体力上限」。当「体力值」小于等于 $0$ 时这个人就会「倒下」。对于同一个「种族」而言，「体力上限」、「基础攻击指数」、「基础防御指数」大致随「等级」指数增长。每个人持有一把「武器」。「武器」的细节在下一节给出。\n\n**【武器】**\n\n「武器」的属性只有两种：「武器类型」和「武器攻击力」。所有「武器」都有「普通攻击」和「特殊攻击」两种攻击方式。发起「攻击」指使用这两种方式中的任意一种。「普通攻击」的效果与「武器类型」无关，但不同的「武器类型」有着不同的「特殊攻击」效果。「武器」有三种类型，分别叫做「B」、「G」、「M」。\n\n**【战场与队伍】**\n\n交战双方的每一方包含不超过 $6$ 名队员，一字排开，从西到东的编号分别为 $5,3,1,2,4,6$（若不足 $6$ 名则删去较大的若干个编号）。方便起见，就叫两队为「南队」和「北队」。\n\n**【回合】**\n\n每个「回合」中，只有一个人可以「行动」。第奇数个「回合」是「南队」的队员「行动」，第偶数个「回合」是「北队」的队员「行动」。第一个「回合」和第二个「回合」中，「行动」的人是队伍里未「倒下」的编号最小的人。之后的「回合」中，若本队中没有编号比本队上一个「行动」的人大且未「倒下」的人，则由本队中编号最小的未「倒下」的人「行动」。否则由编号大于本队上一个「行动」者的人中，编号最小且未「倒下」的人「行动」。若一个队伍中的所有队员均已「倒下」，则判另一个队伍「胜利」。\n\n**【行动】**\n\n「行动」一共有三种。当前「回合」中「行动」的人必须选择三种之一来完成。\n\n1. 「普通攻击」；\n2. 「特殊攻击」；\n3. 「主动技能」。\n\n这些「行动」的效果会在之后介绍。「特殊攻击」和「主动技能」是有次数限制的，但是在本题中，保证所有「行动」均合法，所以你不需要考虑这个限制。\n\n**【伤害计算】**\n\n「伤害」指的是因为「普通攻击」或「特殊攻击」而造成的「体力值」减少。\n\n「伤害」，即「体力值」减少的量，由「攻击强度」和受到「伤害」的人的「防御指数」决定。\n\n一个人的「防御指数」等于这个人的「基础防御指数」乘以队伍的「防御加成」。\n\n具体地，若一个人受到「攻击强度」为 $x$ 的「伤害」，那么这个人的「体力值」就会减少 $y$。其中 $y$ 的值等于 $x$ 除以这个人的「防御指数」下取整。\n\n「攻击强度」等于「基础攻击强度」乘以发起「攻击」的人的「技能加成」乘以队伍的「攻击加成」乘以「种族克制加成」乘以「方位加成」。这些概念会在之后介绍。\n\n**【普通攻击】**\n\n选择一个敌方未「倒下」的队员作为「目标」。「目标」受到「基础攻击强度」为发起「攻击」的人的「基础攻击指数」乘「武器攻击力」的「伤害」。\n\n**【特殊攻击】**\n\n选择一个敌方未「倒下」的队员作为「目标」。\n\n「武器」有三种，不同「武器类型」的「特殊攻击」效果如下：\n\n- 「B」：「目标」受到「基础攻击强度」为发起「攻击」的人的「基础攻击指数」乘「武器攻击力」乘 $125\\%$ 的「伤害」。\n- 「G」：「目标」和「目标」东西两侧与「目标」距离最近的各一名未「倒下」的队员（如果存在）均受到「基础攻击强度」为发起「攻击」的人的「基础攻击指数」乘「武器攻击力」乘 $x\\%$ 的「伤害」。其中 $x$ 的值等于 $135$ 除以将要受到「伤害」的人数。「伤害」按照「目标」、「目标」西侧、「目标」东侧的顺序计算。注意如果过程中有人「倒下」，那么这个人的「被动技能」将不再对该顺序中位于这个人之后的人的「伤害」结算起作用。特别地，所有「伤害」的「方位加成」以「目标」的「躲闪方位」来计算。\n- 「M」：「目标」受到「基础攻击强度」为发起「攻击」的人的「基础攻击指数」乘「武器攻击力」乘 $115\\%$ 的「伤害」。「目标」东西两侧与「目标」距离最近的各一名未「倒下」的队员（如果存在）分别受到「基础攻击强度」为发起「攻击」的人的「基础攻击指数」乘「武器攻击力」乘 $23\\%$ 的「伤害」。「伤害」按照「目标」、「目标」西侧、「目标」东侧的顺序计算。注意如果过程中有人「倒下」，那么这个人的「被动技能」将不再对该顺序中位于这个人之后的人的「伤害」结算起作用。特别地，所有「伤害」的「方位加成」以「目标」的「躲闪方位」来计算。\n\n**【技能】**\n\n「技能」分为「主动技能」和「被动技能」。每个「种族」的人都有一个「主动技能」和一个「被动技能」。「技能」的效果因「种族」和「技能等级」的不同而不同。「技能等级」为一个 $0$ 到 $5$ 之间的整数。「技能等级」为 $0$ 表示没有该「技能」。\n\n使用「主动技能」需要选择一个人作为「技能目标」。\n\n「主动技能」描述如下：（$1$ 到 $5$ 级的「技能」效果由斜杠隔开，保证使用「主动技能」的人的「主动技能等级」不为 $0$）\n\n- 「Weak 种族」：使本队一名未「倒下」的队员的「体力值」增加这名队员的「体力上限」乘以 $10\\%/12\\%/15\\%/17\\%/20\\%$ 下取整。\n- 「Average 种族」：选择一名敌方未「倒下」的队员，在使用该「主动技能」这一队的「回合」结束时，其「体力值」减去其「体力上限」的 $6\\%/7\\%/8\\%/9\\%/10\\%$ 下取整。该效果持续 $3$ 个回合，即会触发 $3$ 次。若该队员已有同类型（可以是不同等级）的「技能」施加的效果，那么这个效果将会覆盖之前的效果。\n- 「Strong 种族」：使本队一名未「倒下」的队员的「技能加成」变为 $2.1/2.17/2.24/2.32/2.4$。\n\n一名队员的「被动技能」只有当该队员未「倒下」时才能发挥效果，「倒下」之后不再发挥效果。\n\n「被动技能」描述如下：\n\n- 「Weak 种族」：在本队的「回合」开始时，本队所有未「倒下」的成员的「体力值」增加该成员「体力上限」的 $1.3\\%/1.6\\%/1.9\\%/2.2\\%/2.5\\%$。若本队有多名队员有这个「技能」，这个效果的数值可以相加至最多 $5\\%$。超过 $5\\%$ 按照 $5\\%$ 计算。「体力值」增加的量在效果叠加后需要下取整。\n- 「Average 种族」：队伍的「防御加成」初始为 $1$。该技能使队伍的「防御加成」增加 $0.01/0.02/0.03/0.04/0.05$。若本队有多名队员有这个「技能」，这个效果的数值可以相加至最多 $0.1$。超过 $0.1$ 按照 $0.1$ 计算。\n- 「Strong 种族」：队伍的「攻击加成」初始为 $1$。该技能使队伍的「攻击加成」增加 $0.01/0.02/0.03/0.04/0.05$。若本队有多名队员有这个「技能」，这个效果的数值可以相加至最多 $0.1$。超过 $0.1$ 按照 $0.1$ 计算。\n\n一名队员的「体力值」增加时，不能超过这名队员的「体力上限」。若增加后的「体力值」超过了「体力上限」，则把这次增加「体力值」的效果改为将这名队员的「体力值」变成这名队员的「体力上限」。\n\n**【技能加成】**\n\n战斗开始时，所有人的「技能加成」都是 $1$。只有两种方式能够改变「技能加成」：\n\n- 「Strong 种族」的「主动技能」。见「技能」的描述。\n- 当一个人发起「攻击」且计算完这次「攻击」的所有「伤害」之后，这个人的「技能加成」变为 $1$。\n\n**【种族克制加成】**\n\n「种族克制加成」与发起「攻击」的人的「种族」以及受到「伤害」的人的「种族」有关。「种族克制加成」的值如下表：\n\n\n| 发起「攻击」方/受到「伤害」方 | Weak  | Average | Strong |\n| :---------------------------: | :---: | :-----: | :----: |\n|             Weak              | $1.0$ |  $0.9$  | $1.1$  |\n|            Average            | $1.1$ |  $1.0$  | $0.9$  |\n|            Strong             | $0.9$ |  $1.1$  | $1.0$  |\n\n\n\n**【方位加成】**\n\n在「攻击」时，发起「攻击」的一方有一个「攻击方位」，「攻击」的「目标」有一个「躲闪方位」。「攻击方位」和「躲闪方位」分别为一个 $1$ 到 $6$ 之间的整数。当「攻击方位」为 $a$，「躲闪方位」为 $d$ 时，「方位加成」的值由下表所示：\n\n\n| $(a-d)\\bmod 6$ | 「方位加成」 |\n| :------------: | :----------: |\n|      $0$       |    $1.25$    |\n|   $1$ 或 $5$   |    $1.00$    |\n|   $2$ 或 $4$   |    $0.75$    |\n|      $3$       |    $0.00$    |\n\n", "inputFormat": "从标准输入读入数据。\n\n第一行两个正整数 $n,m$，分别表示「南队」的人数和「北队」的人数。\n\n接下来 $n$ 行，其中第 $i$ 行表示「南队」中编号为 $i$ 的队员的信息，格式如下：\n\n`<Type> Lv=<Lv> maxhp=<maxhp> atk=<atk> def=<def> skillLv=<skillLv> passivesklLv=<passivesklLv> <weapontype> weaponatk=<weaponatk>`\n\n其中尖括号中的内容表示一个变量。\n\n`<Type>` 为 `Weak`，`Average`，`Strong` 中的一种，分别表示对应名称的「种族」。\n\n`<Lv>` 为一个 $1$ 到 $100$ 之间的整数，表示队员的「等级」。\n\n`<maxhp>` 为一个整数，表示队员的「体力上限」。\n\n`<atk>` 为一个实数，表示队员的「基础攻击指数」。\n\n`<def>` 为一个实数，表示队员的「基础防御指数」。\n\n`<skillLv>` 为一个 $0$ 到 $5$ 之间的整数，表示队员的「主动技能等级」。\n\n`<passivesklLv>` 为一个 $0$ 到 $5$ 之间的整数，表示队员的「被动技能等级」。\n\n`<weapontype>` 为 `B`，`G`，`M` 中的一种，分别表示对应名称的「武器类型」。\n\n`<weaponatk>` 为一个实数，表示队员的「武器攻击力」。\n\n接下来 $m$ 行，其中第 $i$ 行表示「北队」中编号为 $i$ 的队员的信息，格式与「南队」相同。\n\n接下来一行一个正整数 $T$，表示进行的「回合」数。\n\n接下来 $T$ 行，其中第 $i$ 行表示第 $i$ 个「回合」的「行动」。\n\n「行动」的描述以一个字符串开头，表示「行动」的类型。\n\n`Basicattack target=<target> atkpos=<atkpos> ddgpos=<ddgpos>` 表示一次「普通攻击」。\n\n`Specialattack target=<target> atkpos=<atkpos> ddgpos=<ddgpos>` 表示一次「特殊攻击」。\n\n`Skill target=<target>` 表示使用 「主动技能」。保证该队员的「技能等级」不是 $0$。\n\n其中，`<target>` 表示「目标」或「技能目标」的编号。若是「Weak 种族」或「Strong 种族」的「主动技能」，这个编号是一个己方队员的编号，否则是一个敌方队员的编号。\n\n`<atkpos>` 为一个 $1$ 到 $6$ 之间的整数，表示「攻击方位」。\n\n`<ddgpos>` 为一个 $1$ 到 $6$ 之间的整数，表示「躲闪方位」。\n\n保证所有的「行动」均合法。\n\n为了方便起见，本题中实数的表示方法较为特殊。具体的表示方法是，用 `<mag>e<exp>` 的方式来表示 `<mag>` 乘以 $10$ 的 `<exp>` 次方。其中 `<mag>` 是一个 $1$ 到 $99999$ 之间的正整数，`<exp>` 是一个 $-6$ 到 $0$ 之间的整数。如 $42.195$ 可以表示成 `42195e-3`，$6$ 可以表示成 `6e0` 或 `600e-2` 等，$0.04$ 可以表示成 `4e-2` 等。", "outputFormat": "输出到标准输出。\n\n对于每个「回合」，按时间顺序把这个「回合」的信息输出来。\n\n信息的格式如下：\n\n`<team> <id> recovered +<heal> hp -> <curhp>/<maxhp>` 表示「Weak 种族」的「技能」所造成的「体力值」增加。如果在增加之前「体力值」就已经等于「体力上限」，那么不需要输出这一行。\n\n`<team> <id> took <dmg> damage from <atkteam> <atkid> -> <curhp>/<maxhp>` 表示一名队员受到「伤害」。\n\n`<team> <id> took <dmg> damage from skill -> <curhp>/<maxhp>` 表示「Average 种族」的「主动技能」所造成的「体力值」减少。\n\n`<team> <id> applied <type> skill to <targetteam> <targetid>` 表示使用「主动技能」。\n\n其中 `<team>` 表示队伍名称，为 `South` 或 `North` 之一，分别表示南队/北队。\n\n`<id>` 表示「体力值」发生改变的人在队伍中的编号，为一个 $1$ 到 $6$ 之间的正整数。\n\n`<heal>` 表示本应该增加的「体力值」数量（不考虑「体力上限」的限制），为一个正整数。\n\n`<curhp>` 指的是「体力值」发生改变之后的「体力值」，为一个非负整数。若「体力值」减小到 $0$ 以下输出 $0$。\n\n`<maxhp>` 表示「体力值」发生改变的人的「体力上限」，为一个正整数。\n\n`<dmg>` 为受到的「伤害」或「Average 种族」的「主动技能」所造成的「体力值」减少，为一个非负整数。\n\n`<type>` 为使用「主动技能」的人的「种族」，为 `Weak`，`Average`，`Strong` 之一。\n\n`<atkteam>` 和 `<atkid>` 为发起「攻击」的人的队伍名称和编号，格式同 `<team>` 和 `<id>`。\n\n`<targetteam>` 和 `<targetid>` 为「技能目标」的队伍名称和编号，格式同 `<team>` 和 `<id>`。\n\n时间顺序如下：\n\n「回合」开始时，可能触发「Weak 种族」的「被动技能」效果，按照编号从小到大输出。\n\n如果是使用「主动技能」，则输出一行使用「主动技能」的信息。\n\n然后输出「行动」所造成的「体力值」变化信息。若「伤害」为 $0$ 也要输出。若没有造成「伤害」则不输出。若「特殊攻击」改变了多个人的「体力值」，则按照「目标」、「目标」西边的人、「目标」东边的人的顺序输出。\n\n「回合」结束时，可能触发「Average 种族」的「主动技能」效果，按照编号从小到大输出。\n\n每个「回合」结束后输出两队的「体力值」信息，格式如下：\n\n`<team>: [<curhp5>/<maxhp5>] [<curhp3>/<maxhp3>] <curhp1>/<maxhp1> [<curhp2>/<maxhp2>] [<curhp4>/<maxhp4>] [<curhp6>/<maxhp6>]`\n\n其中，`<team>` 表示队伍名称，`<curhpi>` 表示队伍中编号为 $i$ 的人的「体力值」，`<maxhpi>` 表示队伍中编号为 $i$ 的人的「体力上限」。两个人的「体力值」信息之间有恰好一个空格，第一个「体力值」信息和冒号之间有恰好一个空格。已「倒下」的人的「体力值」信息也需要输出。方括号表示，若队伍中不存在编号为 $i$ 的人则不输出。注意这里按照位置顺序而不是编号顺序输出，即顺序为 $5,3,1,2,4,6$。\n\n先输出一行「北队」的信息，再输出一行「南队」的信息。\n\n每个「回合」的信息以一个空行结束。\n\n所有「回合」结束后，若有一个队伍「胜利」，则输出一行 `Team <team> won.`。其中 `<team>` 是队伍名称，为 `South` 或 `North`。因为「行动」需要指定一个未「倒下」的人作为「目标」或「技能目标」，且所有「行动」均合法，所以，如果有队伍「胜利」，则一定是在最后一个「回合」结束后才「胜利」。若没有队伍「胜利」则不输出。", "hint": "**【样例 #2】**\n\n见题目目录下的 *2.in* 与 *2.ans*。\n\n**【样例解释 #2】**\n\n这个样例，无疑是善良的出题人无私的馈赠。中间忘了。出题人相信，这个美妙的样例，可以给拼搏于 AC 这道题的逐梦之路上的你，提供一个有力的援助。\n\n**【数据范围】**\n\n保证 $1\\le n,m \\le 6$。\n\n保证 $1\\le T \\le 50000$。\n\n保证「武器攻击力」的范围在 $300$ 到 $80000$ 之间。\n\n「体力上限」「基础攻击指数」「基础防御指数」的范围见下表。\n\n| 「种族」与「等级」 | 「体力上限」 | 「基础攻击指数」 | 「基础防御指数」 |\n| :----------------: | :----------: | :--------------: | :--------------: |\n|     Weak Lv.1      |   $100000$   |    $0.75000$     |    $0.010000$    |\n|    Average Lv.1    |    $5000$    |    $0.80000$     |    $0.20000$     |\n|    Strong Lv.1     |    $100$     |     $1.0000$     |     $10.000$     |\n|    Weak Lv.100     |  $7807514$   |     $1.0089$     |    $0.10464$     |\n|   Average Lv.100   |   $252234$   |     $1.3108$     |     $1.8101$     |\n|   Strong Lv.100    |    $3512$    |     $1.6385$     |     $125.11$     |\n\n \n\n**【后记】**\n\n_有一天我将会老去_\n\n_希望你会觉得满意_\n\n_我没有 对不起那个_\n\n_十五岁的自己_\n\n_——刘若英《继续-给十五岁的自己》_\n\n**【题目来源】**\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 决赛] 那些脑海里最珍贵的", "background": "E.Space：设定很怪，别问为什么，问就是看附件。\n\n_没有人听懂的傻话_\n\n_还记得吗_\n\n_写满青春的围墙_\n\n_好努力练习的倔强_\n\n_浅浅伤疤_\n\n_勇敢是我们的翅膀_\n\n_——张韶涵《还记得吗》_", "description": "故事的世界观大概是这样的。这个世界的人分为三类，根据其某种特点被直接命名为 Weak，Average 和 Strong。你可以理解为这是一个关于种族或者职业的分类。\n\n两个队伍之间发生了一场回合制战斗。你知道双方做了什么，现在希望你把所有的细节还原出来。\n\n下面是本题的一些技术细节。\n\n**【人物】**\n\n一个人有以下几种属性值：「种族」、「等级」、「体力上限」、「基础攻击指数」、「基础防御指数」、「主动技能等级」、「被动技能等级」。其中「体力上限」、「基础攻击指数」、「基础防御指数」完全由「种族」和「等级」决定。但是为了输入方便，本题中所有信息都会给出。在战斗中，每个人有一个「体力值」。在战斗开始时，「体力值」等于「体力上限」。当「体力值」小于等于 $0$ 时这个人就会「倒下」。对于同一个「种族」而言，「体力上限」、「基础攻击指数」、「基础防御指数」大致随「等级」指数增长。每个人持有一把「武器」。「武器」的细节在下一节给出。\n\n**【武器】**\n\n「武器」的属性只有两种：「武器类型」和「武器攻击力」。所有「武器」都有「普通攻击」和「特殊攻击」两种攻击方式。发起「攻击」指使用这两种方式中的任意一种。「普通攻击」的效果与「武器类型」无关，但不同的「武器类型」有着不同的「特殊攻击」效果。「武器」有三种类型，分别叫做「B」、「G」、「M」。\n\n**【战场与队伍】**\n\n交战双方的每一方包含不超过 $6$ 名队员，一字排开，从西到东的编号分别为 $5,3,1,2,4,6$（若不足 $6$ 名则删去较大的若干个编号）。方便起见，就叫两队为「南队」和「北队」。\n\n**【回合】**\n\n每个「回合」中，只有一个人可以「行动」。第奇数个「回合」是「南队」的队员「行动」，第偶数个「回合」是「北队」的队员「行动」。第一个「回合」和第二个「回合」中，「行动」的人是队伍里未「倒下」的编号最小的人。之后的「回合」中，若本队中没有编号比本队上一个「行动」的人大且未「倒下」的人，则由本队中编号最小的未「倒下」的人「行动」。否则由编号大于本队上一个「行动」者的人中，编号最小且未「倒下」的人「行动」。若一个队伍中的所有队员均已「倒下」，则判另一个队伍「胜利」。\n\n**【行动】**\n\n「行动」一共有三种。当前「回合」中「行动」的人必须选择三种之一来完成。\n\n1. 「普通攻击」；\n2. 「特殊攻击」；\n3. 「主动技能」。\n\n这些「行动」的效果会在之后介绍。「特殊攻击」和「主动技能」是有次数限制的，但是在本题中，保证所有「行动」均合法，所以你不需要考虑这个限制。\n\n**【伤害计算】**\n\n「伤害」指的是因为「普通攻击」或「特殊攻击」而造成的「体力值」减少。\n\n「伤害」，即「体力值」减少的量，由「攻击强度」和受到「伤害」的人的「防御指数」决定。\n\n一个人的「防御指数」等于这个人的「基础防御指数」乘以队伍的「防御加成」。\n\n具体地，若一个人受到「攻击强度」为 $x$ 的「伤害」，那么这个人的「体力值」就会减少 $y$。其中 $y$ 的值等于 $x$ 除以这个人的「防御指数」下取整。\n\n「攻击强度」等于「基础攻击强度」乘以发起「攻击」的人的「技能加成」乘以队伍的「攻击加成」乘以「种族克制加成」乘以「方位加成」。这些概念会在之后介绍。\n\n**【普通攻击】**\n\n选择一个敌方未「倒下」的队员作为「目标」。「目标」受到「基础攻击强度」为发起「攻击」的人的「基础攻击指数」乘「武器攻击力」的「伤害」。\n\n**【特殊攻击】**\n\n选择一个敌方未「倒下」的队员作为「目标」。\n\n「武器」有三种，不同「武器类型」的「特殊攻击」效果如下：\n\n- 「B」：「目标」受到「基础攻击强度」为发起「攻击」的人的「基础攻击指数」乘「武器攻击力」乘 $125\\%$ 的「伤害」。\n- 「G」：「目标」和「目标」东西两侧与「目标」距离最近的各一名未「倒下」的队员（如果存在）均受到「基础攻击强度」为发起「攻击」的人的「基础攻击指数」乘「武器攻击力」乘 $x\\%$ 的「伤害」。其中 $x$ 的值等于 $135$ 除以将要受到「伤害」的人数。「伤害」按照「目标」、「目标」西侧、「目标」东侧的顺序计算。注意如果过程中有人「倒下」，那么这个人的「被动技能」将不再对该顺序中位于这个人之后的人的「伤害」结算起作用。特别地，所有「伤害」的「方位加成」以「目标」的「躲闪方位」来计算。\n- 「M」：「目标」受到「基础攻击强度」为发起「攻击」的人的「基础攻击指数」乘「武器攻击力」乘 $115\\%$ 的「伤害」。「目标」东西两侧与「目标」距离最近的各一名未「倒下」的队员（如果存在）分别受到「基础攻击强度」为发起「攻击」的人的「基础攻击指数」乘「武器攻击力」乘 $23\\%$ 的「伤害」。「伤害」按照「目标」、「目标」西侧、「目标」东侧的顺序计算。注意如果过程中有人「倒下」，那么这个人的「被动技能」将不再对该顺序中位于这个人之后的人的「伤害」结算起作用。特别地，所有「伤害」的「方位加成」以「目标」的「躲闪方位」来计算。\n\n**【技能】**\n\n「技能」分为「主动技能」和「被动技能」。每个「种族」的人都有一个「主动技能」和一个「被动技能」。「技能」的效果因「种族」和「技能等级」的不同而不同。「技能等级」为一个 $0$ 到 $5$ 之间的整数。「技能等级」为 $0$ 表示没有该「技能」。\n\n使用「主动技能」需要选择一个人作为「技能目标」。\n\n「主动技能」描述如下：（$1$ 到 $5$ 级的「技能」效果由斜杠隔开，保证使用「主动技能」的人的「主动技能等级」不为 $0$）\n\n- 「Weak 种族」：使本队一名未「倒下」的队员的「体力值」增加这名队员的「体力上限」乘以 $10\\%/12\\%/15\\%/17\\%/20\\%$ 下取整。\n- 「Average 种族」：选择一名敌方未「倒下」的队员，在使用该「主动技能」这一队的「回合」结束时，其「体力值」减去其「体力上限」的 $6\\%/7\\%/8\\%/9\\%/10\\%$ 下取整。该效果持续 $3$ 个回合，即会触发 $3$ 次。若该队员已有同类型（可以是不同等级）的「技能」施加的效果，那么这个效果将会覆盖之前的效果。\n- 「Strong 种族」：使本队一名未「倒下」的队员的「技能加成」变为 $2.1/2.17/2.24/2.32/2.4$。\n\n一名队员的「被动技能」只有当该队员未「倒下」时才能发挥效果，「倒下」之后不再发挥效果。\n\n「被动技能」描述如下：\n\n- 「Weak 种族」：在本队的「回合」开始时，本队所有未「倒下」的成员的「体力值」增加该成员「体力上限」的 $1.3\\%/1.6\\%/1.9\\%/2.2\\%/2.5\\%$。若本队有多名队员有这个「技能」，这个效果的数值可以相加至最多 $5\\%$。超过 $5\\%$ 按照 $5\\%$ 计算。「体力值」增加的量在效果叠加后需要下取整。\n- 「Average 种族」：队伍的「防御加成」初始为 $1$。该技能使队伍的「防御加成」增加 $0.01/0.02/0.03/0.04/0.05$。若本队有多名队员有这个「技能」，这个效果的数值可以相加至最多 $0.1$。超过 $0.1$ 按照 $0.1$ 计算。\n- 「Strong 种族」：队伍的「攻击加成」初始为 $1$。该技能使队伍的「攻击加成」增加 $0.01/0.02/0.03/0.04/0.05$。若本队有多名队员有这个「技能」，这个效果的数值可以相加至最多 $0.1$。超过 $0.1$ 按照 $0.1$ 计算。\n\n一名队员的「体力值」增加时，不能超过这名队员的「体力上限」。若增加后的「体力值」超过了「体力上限」，则把这次增加「体力值」的效果改为将这名队员的「体力值」变成这名队员的「体力上限」。\n\n**【技能加成】**\n\n战斗开始时，所有人的「技能加成」都是 $1$。只有两种方式能够改变「技能加成」：\n\n- 「Strong 种族」的「主动技能」。见「技能」的描述。\n- 当一个人发起「攻击」且计算完这次「攻击」的所有「伤害」之后，这个人的「技能加成」变为 $1$。\n\n**【种族克制加成】**\n\n「种族克制加成」与发起「攻击」的人的「种族」以及受到「伤害」的人的「种族」有关。「种族克制加成」的值如下表：\n\n\n| 发起「攻击」方/受到「伤害」方 | Weak  | Average | Strong |\n| :---------------------------: | :---: | :-----: | :----: |\n|             Weak              | $1.0$ |  $0.9$  | $1.1$  |\n|            Average            | $1.1$ |  $1.0$  | $0.9$  |\n|            Strong             | $0.9$ |  $1.1$  | $1.0$  |\n\n\n\n**【方位加成】**\n\n在「攻击」时，发起「攻击」的一方有一个「攻击方位」，「攻击」的「目标」有一个「躲闪方位」。「攻击方位」和「躲闪方位」分别为一个 $1$ 到 $6$ 之间的整数。当「攻击方位」为 $a$，「躲闪方位」为 $d$ 时，「方位加成」的值由下表所示：\n\n\n| $(a-d)\\bmod 6$ | 「方位加成」 |\n| :------------: | :----------: |\n|      $0$       |    $1.25$    |\n|   $1$ 或 $5$   |    $1.00$    |\n|   $2$ 或 $4$   |    $0.75$    |\n|      $3$       |    $0.00$    |\n\n", "inputFormat": "从标准输入读入数据。\n\n第一行两个正整数 $n,m$，分别表示「南队」的人数和「北队」的人数。\n\n接下来 $n$ 行，其中第 $i$ 行表示「南队」中编号为 $i$ 的队员的信息，格式如下：\n\n`<Type> Lv=<Lv> maxhp=<maxhp> atk=<atk> def=<def> skillLv=<skillLv> passivesklLv=<passivesklLv> <weapontype> weaponatk=<weaponatk>`\n\n其中尖括号中的内容表示一个变量。\n\n`<Type>` 为 `Weak`，`Average`，`Strong` 中的一种，分别表示对应名称的「种族」。\n\n`<Lv>` 为一个 $1$ 到 $100$ 之间的整数，表示队员的「等级」。\n\n`<maxhp>` 为一个整数，表示队员的「体力上限」。\n\n`<atk>` 为一个实数，表示队员的「基础攻击指数」。\n\n`<def>` 为一个实数，表示队员的「基础防御指数」。\n\n`<skillLv>` 为一个 $0$ 到 $5$ 之间的整数，表示队员的「主动技能等级」。\n\n`<passivesklLv>` 为一个 $0$ 到 $5$ 之间的整数，表示队员的「被动技能等级」。\n\n`<weapontype>` 为 `B`，`G`，`M` 中的一种，分别表示对应名称的「武器类型」。\n\n`<weaponatk>` 为一个实数，表示队员的「武器攻击力」。\n\n接下来 $m$ 行，其中第 $i$ 行表示「北队」中编号为 $i$ 的队员的信息，格式与「南队」相同。\n\n接下来一行一个正整数 $T$，表示进行的「回合」数。\n\n接下来 $T$ 行，其中第 $i$ 行表示第 $i$ 个「回合」的「行动」。\n\n「行动」的描述以一个字符串开头，表示「行动」的类型。\n\n`Basicattack target=<target> atkpos=<atkpos> ddgpos=<ddgpos>` 表示一次「普通攻击」。\n\n`Specialattack target=<target> atkpos=<atkpos> ddgpos=<ddgpos>` 表示一次「特殊攻击」。\n\n`Skill target=<target>` 表示使用 「主动技能」。保证该队员的「技能等级」不是 $0$。\n\n其中，`<target>` 表示「目标」或「技能目标」的编号。若是「Weak 种族」或「Strong 种族」的「主动技能」，这个编号是一个己方队员的编号，否则是一个敌方队员的编号。\n\n`<atkpos>` 为一个 $1$ 到 $6$ 之间的整数，表示「攻击方位」。\n\n`<ddgpos>` 为一个 $1$ 到 $6$ 之间的整数，表示「躲闪方位」。\n\n保证所有的「行动」均合法。\n\n为了方便起见，本题中实数的表示方法较为特殊。具体的表示方法是，用 `<mag>e<exp>` 的方式来表示 `<mag>` 乘以 $10$ 的 `<exp>` 次方。其中 `<mag>` 是一个 $1$ 到 $99999$ 之间的正整数，`<exp>` 是一个 $-6$ 到 $0$ 之间的整数。如 $42.195$ 可以表示成 `42195e-3`，$6$ 可以表示成 `6e0` 或 `600e-2` 等，$0.04$ 可以表示成 `4e-2` 等。", "outputFormat": "输出到标准输出。\n\n对于每个「回合」，按时间顺序把这个「回合」的信息输出来。\n\n信息的格式如下：\n\n`<team> <id> recovered +<heal> hp -> <curhp>/<maxhp>` 表示「Weak 种族」的「技能」所造成的「体力值」增加。如果在增加之前「体力值」就已经等于「体力上限」，那么不需要输出这一行。\n\n`<team> <id> took <dmg> damage from <atkteam> <atkid> -> <curhp>/<maxhp>` 表示一名队员受到「伤害」。\n\n`<team> <id> took <dmg> damage from skill -> <curhp>/<maxhp>` 表示「Average 种族」的「主动技能」所造成的「体力值」减少。\n\n`<team> <id> applied <type> skill to <targetteam> <targetid>` 表示使用「主动技能」。\n\n其中 `<team>` 表示队伍名称，为 `South` 或 `North` 之一，分别表示南队/北队。\n\n`<id>` 表示「体力值」发生改变的人在队伍中的编号，为一个 $1$ 到 $6$ 之间的正整数。\n\n`<heal>` 表示本应该增加的「体力值」数量（不考虑「体力上限」的限制），为一个正整数。\n\n`<curhp>` 指的是「体力值」发生改变之后的「体力值」，为一个非负整数。若「体力值」减小到 $0$ 以下输出 $0$。\n\n`<maxhp>` 表示「体力值」发生改变的人的「体力上限」，为一个正整数。\n\n`<dmg>` 为受到的「伤害」或「Average 种族」的「主动技能」所造成的「体力值」减少，为一个非负整数。\n\n`<type>` 为使用「主动技能」的人的「种族」，为 `Weak`，`Average`，`Strong` 之一。\n\n`<atkteam>` 和 `<atkid>` 为发起「攻击」的人的队伍名称和编号，格式同 `<team>` 和 `<id>`。\n\n`<targetteam>` 和 `<targetid>` 为「技能目标」的队伍名称和编号，格式同 `<team>` 和 `<id>`。\n\n时间顺序如下：\n\n「回合」开始时，可能触发「Weak 种族」的「被动技能」效果，按照编号从小到大输出。\n\n如果是使用「主动技能」，则输出一行使用「主动技能」的信息。\n\n然后输出「行动」所造成的「体力值」变化信息。若「伤害」为 $0$ 也要输出。若没有造成「伤害」则不输出。若「特殊攻击」改变了多个人的「体力值」，则按照「目标」、「目标」西边的人、「目标」东边的人的顺序输出。\n\n「回合」结束时，可能触发「Average 种族」的「主动技能」效果，按照编号从小到大输出。\n\n每个「回合」结束后输出两队的「体力值」信息，格式如下：\n\n`<team>: [<curhp5>/<maxhp5>] [<curhp3>/<maxhp3>] <curhp1>/<maxhp1> [<curhp2>/<maxhp2>] [<curhp4>/<maxhp4>] [<curhp6>/<maxhp6>]`\n\n其中，`<team>` 表示队伍名称，`<curhpi>` 表示队伍中编号为 $i$ 的人的「体力值」，`<maxhpi>` 表示队伍中编号为 $i$ 的人的「体力上限」。两个人的「体力值」信息之间有恰好一个空格，第一个「体力值」信息和冒号之间有恰好一个空格。已「倒下」的人的「体力值」信息也需要输出。方括号表示，若队伍中不存在编号为 $i$ 的人则不输出。注意这里按照位置顺序而不是编号顺序输出，即顺序为 $5,3,1,2,4,6$。\n\n先输出一行「北队」的信息，再输出一行「南队」的信息。\n\n每个「回合」的信息以一个空行结束。\n\n所有「回合」结束后，若有一个队伍「胜利」，则输出一行 `Team <team> won.`。其中 `<team>` 是队伍名称，为 `South` 或 `North`。因为「行动」需要指定一个未「倒下」的人作为「目标」或「技能目标」，且所有「行动」均合法，所以，如果有队伍「胜利」，则一定是在最后一个「回合」结束后才「胜利」。若没有队伍「胜利」则不输出。", "hint": "**【样例 #2】**\n\n见题目目录下的 *2.in* 与 *2.ans*。\n\n**【样例解释 #2】**\n\n这个样例，无疑是善良的出题人无私的馈赠。中间忘了。出题人相信，这个美妙的样例，可以给拼搏于 AC 这道题的逐梦之路上的你，提供一个有力的援助。\n\n**【数据范围】**\n\n保证 $1\\le n,m \\le 6$。\n\n保证 $1\\le T \\le 50000$。\n\n保证「武器攻击力」的范围在 $300$ 到 $80000$ 之间。\n\n「体力上限」「基础攻击指数」「基础防御指数」的范围见下表。\n\n| 「种族」与「等级」 | 「体力上限」 | 「基础攻击指数」 | 「基础防御指数」 |\n| :----------------: | :----------: | :--------------: | :--------------: |\n|     Weak Lv.1      |   $100000$   |    $0.75000$     |    $0.010000$    |\n|    Average Lv.1    |    $5000$    |    $0.80000$     |    $0.20000$     |\n|    Strong Lv.1     |    $100$     |     $1.0000$     |     $10.000$     |\n|    Weak Lv.100     |  $7807514$   |     $1.0089$     |    $0.10464$     |\n|   Average Lv.100   |   $252234$   |     $1.3108$     |     $1.8101$     |\n|   Strong Lv.100    |    $3512$    |     $1.6385$     |     $125.11$     |\n\n \n\n**【后记】**\n\n_有一天我将会老去_\n\n_希望你会觉得满意_\n\n_我没有 对不起那个_\n\n_十五岁的自己_\n\n_——刘若英《继续-给十五岁的自己》_\n\n**【题目来源】**\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN"}}}
{"pid": "P9382", "type": "P", "difficulty": 6, "samples": [["3 3\n1 0 0\n0 1 0\n0 0 1", "1\n1 0 0\n0 1 0\n0 0 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2023", "Special Judge", "O2优化", "线性基", "THUPC"], "title": "[THUPC 2023 决赛] Freshman Dream", "background": "", "description": "小 J 正在学习矩阵乘法。\n\n一旁的小 L 告诉他：只要将两个矩阵对应的位置乘起来，那就能得到两个矩阵的乘法了。\n\n这当然是不对的，但是小 L 要继续骗小 J。为此，她需要在自己的 OJ 上放一道矩阵乘法题，使得这样的矩阵乘法也能得到正确的答案。\n\n因为小 L 的 OJ 跑的很慢并且空间限制也很小，所以这道矩阵乘法题的答案都是 $\\bmod 2$ 意义下的。\n\n现在小 L 开始造数据。她先随机生成了一个 $n\\times n$ 的矩阵 $A$，具体地，每一个元素以 $\\frac 12$ 的概率为 $1$，剩下的概率为 $0$，且这些事件相互独立。现在，她还要设计另一个 $n\\times n$  的 $01$ 矩阵 $B$，使得 $AB_{ij}\\equiv A_{ij}B_{ij}\\pmod 2$。\n\n小 L 试图随机生成矩阵，但是找不出什么满足要求的矩阵；她试图构造几个矩阵，发现只会构造全 $0$ 矩阵，这太明显了。现在，她将生成数据的重任交给了你，你需要给出一个满足要求的 $B$，同时为了不让大家看出数据有猫腻，她还额外要求了 $B$ 里面恰好有 $k$ 个 $1$。", "inputFormat": "从标准输入读入数据。\n\n输入的第一行包含两个正整数 $n,k$，表示矩阵的大小和题目中的 $k$。\n\n接下来 $n$ 行，每一行 $n$ 个整数 $a_{ij}$ 表示 $A$ 的元素。", "outputFormat": "输出到标准输出。\n\n如果没有任何 $B$ 满足要求，输出一行一个整数 $-1$。\n\n否则，先输出一行一个整数 $1$，然后输出 $n$ 行，每行 $n$ 个 $\\{0,1\\}$ 中的整数来表示 $B$ 矩阵的元素。如果有多个可能的 $B$，输出其中一个即可。", "hint": "**【样例说明 #1】**\n\n这里的 $A$ 是单位矩阵，构造的 $B$ 也是单位矩阵，乘积也为单位矩阵。同时，将对应位置相乘也为单位矩阵，并且 $B$ 中恰有 $k=3$ 个 $1$，故满足要求。\n\n本样例中 $n$ 不为 $100$，但保证所有测试数据中 $n$ 均为 $100$。\n\n**【数据范围】**\n\n对于所有测试数据，$n=100$，$0 \\le k \\le n^2$，$a_{ij}\\in \\{0,1\\}$，所有 $a_{ij}$ 均为独立均匀随机。\n\n**【题目来源】**\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023> 查看。", "locale": "zh-CN", "translations": {"en": {"title": "[THUPC 2023 Finals] Freshman Dream", "background": "", "description": "Little J is learning matrix multiplication.\n\nLittle L tells him: as long as you multiply the elements in the same positions of two matrices, you can get the product of the two matrices.\n\nThis is of course wrong, but Little L wants to keep fooling Little J. So, she needs to put a matrix multiplication problem on her own OJ such that this kind of “matrix multiplication” can also produce the correct answer.\n\nBecause Little L’s OJ runs very slowly and has a very small memory limit, the answers in this matrix multiplication problem are all taken modulo $2$.\n\nNow Little L starts generating testdata. She first randomly generates an $n \\times n$ matrix $A$. Specifically, each element is $1$ with probability $\\frac 12$, and $0$ otherwise, and these events are independent. Now, she still needs to design another $n \\times n$ $01$ matrix $B$, such that $(AB)_{ij} \\equiv A_{ij} B_{ij} \\pmod 2$.\n\nLittle L tried generating matrices randomly, but could not find any matrix that meets the requirement; she tried constructing some matrices and found she could only construct the all-zero matrix, which is too obvious. Now she hands the task of generating testdata to you: you need to give a $B$ that meets the requirement. At the same time, to avoid making it look suspicious, she additionally requires that $B$ contains exactly $k$ ones.", "inputFormat": "Read from standard input.\n\nThe first line contains two positive integers $n, k$, representing the matrix size and the $k$ in the statement.\n\nThe next $n$ lines each contain $n$ integers $a_{ij}$, representing the elements of $A$.", "outputFormat": "Write to standard output.\n\nIf there is no $B$ that satisfies the requirement, output one line containing one integer $-1$.\n\nOtherwise, first output one line containing one integer $1$, then output $n$ lines, each containing $n$ integers in $\\{0,1\\}$ to represent the elements of matrix $B$. If there are multiple possible $B$, output any one of them.", "hint": "**Sample Explanation #1**\n\nHere $A$ is the identity matrix, and the constructed $B$ is also the identity matrix, so the product is also the identity matrix. At the same time, multiplying the corresponding positions also gives the identity matrix, and $B$ contains exactly $k = 3$ ones, so it satisfies the requirement.\n\nIn this sample, $n$ is not $100$, but it is guaranteed that in all testdata $n$ is $100$.\n\n**Constraints**\n\nFor all testdata, $n = 100$, $0 \\le k \\le n^2$, $a_{ij} \\in \\{0,1\\}$, and all $a_{ij}$ are independent and uniformly random.\n\n**Source**\n\nFrom the finals of the 2023 Tsinghua University Student Programming Contest and Collegiate Invitational (THUPC2023).\n\nResources such as the editorial can be found at <https://github.com/THUSAAC/THUPC2023>.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[THUPC 2023 决赛] Freshman Dream", "background": "", "description": "小 J 正在学习矩阵乘法。\n\n一旁的小 L 告诉他：只要将两个矩阵对应的位置乘起来，那就能得到两个矩阵的乘法了。\n\n这当然是不对的，但是小 L 要继续骗小 J。为此，她需要在自己的 OJ 上放一道矩阵乘法题，使得这样的矩阵乘法也能得到正确的答案。\n\n因为小 L 的 OJ 跑的很慢并且空间限制也很小，所以这道矩阵乘法题的答案都是 $\\bmod 2$ 意义下的。\n\n现在小 L 开始造数据。她先随机生成了一个 $n\\times n$ 的矩阵 $A$，具体地，每一个元素以 $\\frac 12$ 的概率为 $1$，剩下的概率为 $0$，且这些事件相互独立。现在，她还要设计另一个 $n\\times n$  的 $01$ 矩阵 $B$，使得 $AB_{ij}\\equiv A_{ij}B_{ij}\\pmod 2$。\n\n小 L 试图随机生成矩阵，但是找不出什么满足要求的矩阵；她试图构造几个矩阵，发现只会构造全 $0$ 矩阵，这太明显了。现在，她将生成数据的重任交给了你，你需要给出一个满足要求的 $B$，同时为了不让大家看出数据有猫腻，她还额外要求了 $B$ 里面恰好有 $k$ 个 $1$。", "inputFormat": "从标准输入读入数据。\n\n输入的第一行包含两个正整数 $n,k$，表示矩阵的大小和题目中的 $k$。\n\n接下来 $n$ 行，每一行 $n$ 个整数 $a_{ij}$ 表示 $A$ 的元素。", "outputFormat": "输出到标准输出。\n\n如果没有任何 $B$ 满足要求，输出一行一个整数 $-1$。\n\n否则，先输出一行一个整数 $1$，然后输出 $n$ 行，每行 $n$ 个 $\\{0,1\\}$ 中的整数来表示 $B$ 矩阵的元素。如果有多个可能的 $B$，输出其中一个即可。", "hint": "**【样例说明 #1】**\n\n这里的 $A$ 是单位矩阵，构造的 $B$ 也是单位矩阵，乘积也为单位矩阵。同时，将对应位置相乘也为单位矩阵，并且 $B$ 中恰有 $k=3$ 个 $1$，故满足要求。\n\n本样例中 $n$ 不为 $100$，但保证所有测试数据中 $n$ 均为 $100$。\n\n**【数据范围】**\n\n对于所有测试数据，$n=100$，$0 \\le k \\le n^2$，$a_{ij}\\in \\{0,1\\}$，所有 $a_{ij}$ 均为独立均匀随机。\n\n**【题目来源】**\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023> 查看。", "locale": "zh-CN"}}}
{"pid": "P9383", "type": "P", "difficulty": 7, "samples": [["4\n1 2 1 2", "Cleared.\n5\n12202"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2023", "Special Judge", "O2优化", "区间 DP", "THUPC"], "title": "[THUPC 2023 决赛] 喵了个喵 III", "background": "小 E 玩腻了《喵了个喵》，于是决定换一款消除游戏来玩。然而小 E 发现市面上的消除游戏规则都差不多，比如这个游戏，它的规则和《喵了个喵》只有一个字不相同。虽然说，改了一个字的游戏就是新游戏，但确是缺了点意思。\n", "description": "这个游戏有一个牌堆和 $n$ 个栈，任务是要通过游戏规则将所有的卡牌消去。开始时牌堆中有 $m$ 张卡牌，从上到下的图案分别是 $a_1,a_2,\\cdots, a_m$。所有的卡牌一共有 $k$ 种图案，从 $1$ 到 $k$ 编号。牌堆中每一种图案的卡牌都有偶数张。开始时所有的栈都是空的。这个游戏有两种操作：\n\n- 选择一个栈，将牌堆顶上的卡牌放入栈的顶部。如果这么操作后，这个栈最上方的两张牌有相同的图案，则会自动将这两张牌消去。\n\n- 选择两个不同的栈，如果这两个栈栈**顶**的卡牌有相同的图案，则可以将这两张牌消去。如果不同，则什么也不会做。\n\n经过多次观察小 E 发现总是有 $n=2$ 和 $k=m/2$，即只有两个栈且每一种图案的卡牌都恰好有 $2$ 张。虽然如此，小 E 还是一直无法通关。请你帮小 E 设计一下游戏方案，即给出相应的操作序列使得小 E 可以把所有的卡牌消去。\n", "inputFormat": "第一行一个正整数 $m$。  \n\n第二行 $m$ 个正整数，分别表示 $a_1,a_2,\\cdots, a_m$。  \n\n保证 $1\\sim m/2$ 在序列中各出现两次。", "outputFormat": "**本题采用 special judge**。\n\n如果无解，输出一行 `No solution.`。  \n\n如果有解，第一行输出 `Cleared.`。第二行输出一个正整数 $op$，表示操作的次数。你需要保证 $m\\le op\\le 2m$。  \n\n接下来一行一个长度为 $op$ 的字符串，每一位是一个不超过 $2$ 的非负整数，按顺序表示进行的操作。若为 $1$ 或 $2$，则表示进行一次第一个操作并选择栈 $1$ 或栈 $2$。若为 $0$，则表示进行一次第二个操作。由于只有两个栈，所以你不需要输出额外的信息来说明你选择了哪些栈。", "hint": "### 样例 1 解释\n下图是初始状态。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ds0k392b.png)\n\n下图是前两次操作之后的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iy4w5r9m.png)\n\n![scale=0.24](https://cdn.luogu.com.cn/upload/image_hosting/kb0woz7t.png)\n\n下图是第三次和第四次操作之后的结果。\n![](https://cdn.luogu.com.cn/upload/image_hosting/t9zxtszv.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5z2eyqe2.png)\n\n下图是第五次操作之后的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9kr8v9mm.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z32r81vt.png)\n\n\n### 数据规模与约定\n\n- 保证 $2\\le m \\le 1500$ 且为偶数。\n- 保证 $1\\le a_i \\le m/2$ 且每一种数在序列中出现恰好两次。\n\n### 评分方法\n\n你的输出的第一行需要与标准答案一致。\n\n若有解，且在按顺序进行所有操作后，牌堆为空且所有的栈均为空，则认为你的答案正确。\n\n### 后记\n\n**以下部分与本题内容无关。**\n\n说到底，那个嫌《喵了个喵 II》的题面太长的人其实是小 E 自己。它本来的题面中，题目背景和题目描述是这样的：\n\n【题目背景】\n\n小 E 玩腻了《喵了个喵》，于是决定换一款消除游戏来玩。然而小 E 发现市面上的消除游戏规则都差不多，比如这个游戏，它的规则和《喵了个喵》只有略微不相同。虽然说，只要改一个字就是新游戏，但确是缺了点意思。\n\n【题目描述】\n\n这个游戏有一个牌堆和 $n$ 个可以从栈底删除元素的栈，任务是要通过游戏规则将所有的卡牌消去。开始时牌堆中有 $m$ 张卡牌，从上到下的图案分别是 $a_1,a_2,\\cdots, a_m$。所有的卡牌一共有 $k$ 种图案，从 $1$ 到 $k$ 编号。牌堆中每一种图案的卡牌都有偶数张。开始时所有的栈都是空的。这个游戏有两种操作：\n\n- 选择一个栈，将牌堆顶上的卡牌放入栈的顶部。\n\n- 选择两个不同的栈，如果这两个栈栈**底**的卡牌有相同的图案，则可以将这两张牌消去，原来在栈底上方的卡牌会成为新的栈底。如果不同，则什么也不会做。\n\n经过多次观察小 E 发现总是有 $n=2$ 和 $k=m/4$，并且每一种图案的卡牌都恰好有 $4$ 张。虽然如此，小 E 还是一直无法通关。请你帮小 E 设计一下游戏方案，即给出相应的操作序列使得小 E 可以把所有的卡牌消去。\n\n\n### 题目来源\n\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 决赛] 喵了个喵 III", "background": "小 E 玩腻了《喵了个喵》，于是决定换一款消除游戏来玩。然而小 E 发现市面上的消除游戏规则都差不多，比如这个游戏，它的规则和《喵了个喵》只有一个字不相同。虽然说，改了一个字的游戏就是新游戏，但确是缺了点意思。\n", "description": "这个游戏有一个牌堆和 $n$ 个栈，任务是要通过游戏规则将所有的卡牌消去。开始时牌堆中有 $m$ 张卡牌，从上到下的图案分别是 $a_1,a_2,\\cdots, a_m$。所有的卡牌一共有 $k$ 种图案，从 $1$ 到 $k$ 编号。牌堆中每一种图案的卡牌都有偶数张。开始时所有的栈都是空的。这个游戏有两种操作：\n\n- 选择一个栈，将牌堆顶上的卡牌放入栈的顶部。如果这么操作后，这个栈最上方的两张牌有相同的图案，则会自动将这两张牌消去。\n\n- 选择两个不同的栈，如果这两个栈栈**顶**的卡牌有相同的图案，则可以将这两张牌消去。如果不同，则什么也不会做。\n\n经过多次观察小 E 发现总是有 $n=2$ 和 $k=m/2$，即只有两个栈且每一种图案的卡牌都恰好有 $2$ 张。虽然如此，小 E 还是一直无法通关。请你帮小 E 设计一下游戏方案，即给出相应的操作序列使得小 E 可以把所有的卡牌消去。\n", "inputFormat": "第一行一个正整数 $m$。  \n\n第二行 $m$ 个正整数，分别表示 $a_1,a_2,\\cdots, a_m$。  \n\n保证 $1\\sim m/2$ 在序列中各出现两次。", "outputFormat": "**本题采用 special judge**。\n\n如果无解，输出一行 `No solution.`。  \n\n如果有解，第一行输出 `Cleared.`。第二行输出一个正整数 $op$，表示操作的次数。你需要保证 $m\\le op\\le 2m$。  \n\n接下来一行一个长度为 $op$ 的字符串，每一位是一个不超过 $2$ 的非负整数，按顺序表示进行的操作。若为 $1$ 或 $2$，则表示进行一次第一个操作并选择栈 $1$ 或栈 $2$。若为 $0$，则表示进行一次第二个操作。由于只有两个栈，所以你不需要输出额外的信息来说明你选择了哪些栈。", "hint": "### 样例 1 解释\n下图是初始状态。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ds0k392b.png)\n\n下图是前两次操作之后的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iy4w5r9m.png)\n\n![scale=0.24](https://cdn.luogu.com.cn/upload/image_hosting/kb0woz7t.png)\n\n下图是第三次和第四次操作之后的结果。\n![](https://cdn.luogu.com.cn/upload/image_hosting/t9zxtszv.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5z2eyqe2.png)\n\n下图是第五次操作之后的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9kr8v9mm.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z32r81vt.png)\n\n\n### 数据规模与约定\n\n- 保证 $2\\le m \\le 1500$ 且为偶数。\n- 保证 $1\\le a_i \\le m/2$ 且每一种数在序列中出现恰好两次。\n\n### 评分方法\n\n你的输出的第一行需要与标准答案一致。\n\n若有解，且在按顺序进行所有操作后，牌堆为空且所有的栈均为空，则认为你的答案正确。\n\n### 后记\n\n**以下部分与本题内容无关。**\n\n说到底，那个嫌《喵了个喵 II》的题面太长的人其实是小 E 自己。它本来的题面中，题目背景和题目描述是这样的：\n\n【题目背景】\n\n小 E 玩腻了《喵了个喵》，于是决定换一款消除游戏来玩。然而小 E 发现市面上的消除游戏规则都差不多，比如这个游戏，它的规则和《喵了个喵》只有略微不相同。虽然说，只要改一个字就是新游戏，但确是缺了点意思。\n\n【题目描述】\n\n这个游戏有一个牌堆和 $n$ 个可以从栈底删除元素的栈，任务是要通过游戏规则将所有的卡牌消去。开始时牌堆中有 $m$ 张卡牌，从上到下的图案分别是 $a_1,a_2,\\cdots, a_m$。所有的卡牌一共有 $k$ 种图案，从 $1$ 到 $k$ 编号。牌堆中每一种图案的卡牌都有偶数张。开始时所有的栈都是空的。这个游戏有两种操作：\n\n- 选择一个栈，将牌堆顶上的卡牌放入栈的顶部。\n\n- 选择两个不同的栈，如果这两个栈栈**底**的卡牌有相同的图案，则可以将这两张牌消去，原来在栈底上方的卡牌会成为新的栈底。如果不同，则什么也不会做。\n\n经过多次观察小 E 发现总是有 $n=2$ 和 $k=m/4$，并且每一种图案的卡牌都恰好有 $4$ 张。虽然如此，小 E 还是一直无法通关。请你帮小 E 设计一下游戏方案，即给出相应的操作序列使得小 E 可以把所有的卡牌消去。\n\n\n### 题目来源\n\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN"}}}
{"pid": "P9384", "type": "P", "difficulty": 4, "samples": [["4", "012\n34\n5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "O2优化", "构造", "THUPC"], "title": "[THUPC 2023 决赛] 着色", "background": "远古的笔迹，远古的乐音，远古的历史，远古的 $K_{1000}$，若无人问津，便悄然褪色……", "description": "给出一个 $n$ 个节点的无向完全图，你需要给每条边标上一个 $0 \\sim 9$ 的数字，使得图上不存在一个三元环或五元环满足：其上所有边的数字相同。", "inputFormat": "输入仅一行一个整数 $n$ 表示图的节点数。", "outputFormat": "如果不存在方案，输出一行一个整数 `-1`。否则输出 $(n-1)$ 行，第 $i$ 行 $(n-i)$ 个字符，第 $i$ 行的第 $j$ 个字符表示 $(i,i+j)$ 的标号。若有多个方案，输出任意一个即可。", "hint": "### 数据规模与约定\n\n对于所有测试数据，$2 \\le n \\le 1000$。\n\n### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 决赛] 着色", "background": "远古的笔迹，远古的乐音，远古的历史，远古的 $K_{1000}$，若无人问津，便悄然褪色……", "description": "给出一个 $n$ 个节点的无向完全图，你需要给每条边标上一个 $0 \\sim 9$ 的数字，使得图上不存在一个三元环或五元环满足：其上所有边的数字相同。", "inputFormat": "输入仅一行一个整数 $n$ 表示图的节点数。", "outputFormat": "如果不存在方案，输出一行一个整数 `-1`。否则输出 $(n-1)$ 行，第 $i$ 行 $(n-i)$ 个字符，第 $i$ 行的第 $j$ 个字符表示 $(i,i+j)$ 的标号。若有多个方案，输出任意一个即可。", "hint": "### 数据规模与约定\n\n对于所有测试数据，$2 \\le n \\le 1000$。\n\n### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 [https://github.com/THUSAAC/THUPC2023](https://github.com/THUSAAC/THUPC2023) 查看。", "locale": "zh-CN"}}}
{"pid": "P9385", "type": "P", "difficulty": 7, "samples": [["2 1 1000000\n", "12\n"], ["8 8 8888888\n", "2973992\n"], ["1000 1000 123456789\n", "55105667\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2023", "O2优化", "THUPC"], "title": "[THUPC 2023 决赛] 阴阳阵法", "background": "“余于久远之书，见一阴阳阵，必可助君征服九州。用此阵，须出诸阴阳大将。所谓阴将者，武勇而玉恶；所谓阳将者，善谋时且忠厚。凡阴阳阵，各将皆须择一将，以通之。又有两法皆牢记，不可即弱阵：一曰阴援阴，易激性情，或避之；二曰援与环，环阴与阳同，守以衡……”\n\n正当你准备征服九州时，你仿佛听见一个熟悉的声音在远处喊：“工作的时候不准睡觉，你这样会被开除的……”你终于回过神来，发现你的 XCPC 队友在旁边熟练地拧着螺丝，流水线前已经漏过几个不合格的工品。刚刚什么都没发生啊，你哀叹道，但是……", "description": "有一张图，图上有 $n$ 个白点和 $m$ 个黑点。白点之间两两不同，黑点之间两两不同。\n\n每个节点有一条出边，每个节点出边指向的节点可以在 $n+m$ 个节点中任意选择。\n\n此时共有 $(n+m)^{n+m}$ 个方案，每个方案是一个有向基环树森林。\n\n称一个方案是好的当且仅当其满足以下条件：\n\n- 任何一个黑点都指向一个白点，\n- 每个环上的黑点数量和白点数量的乘积是偶数。\n\n你需要求出所有方案中好的方案数量，对输入模数 $P$ 取模。", "inputFormat": "输入一行三个整数 $n,m,P$，意义如题目描述所述。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n考虑黑点必须连向白点的限制共有 $3 \\times 3 \\times 2 = 18$ 种方案，其中一个黑点和一个白点构成一个环的方案非法。选择一个白点和黑点构成环的方案数为 $2$，剩下的一个白点有三种方案，因此非法的方案数为 $2 \\times 3 = 6$，答案为 $18-6=12$。\n\n### 数据规模与约定\n\n对于所有测试数据，$1 \\le n,m \\le 2000$，$1 \\le P \\le 10^9$。\n\n### 提示\n\n你可能需要注意常数对算法效率产生的影响。\n\n### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 决赛] 阴阳阵法", "background": "“余于久远之书，见一阴阳阵，必可助君征服九州。用此阵，须出诸阴阳大将。所谓阴将者，武勇而玉恶；所谓阳将者，善谋时且忠厚。凡阴阳阵，各将皆须择一将，以通之。又有两法皆牢记，不可即弱阵：一曰阴援阴，易激性情，或避之；二曰援与环，环阴与阳同，守以衡……”\n\n正当你准备征服九州时，你仿佛听见一个熟悉的声音在远处喊：“工作的时候不准睡觉，你这样会被开除的……”你终于回过神来，发现你的 XCPC 队友在旁边熟练地拧着螺丝，流水线前已经漏过几个不合格的工品。刚刚什么都没发生啊，你哀叹道，但是……", "description": "有一张图，图上有 $n$ 个白点和 $m$ 个黑点。白点之间两两不同，黑点之间两两不同。\n\n每个节点有一条出边，每个节点出边指向的节点可以在 $n+m$ 个节点中任意选择。\n\n此时共有 $(n+m)^{n+m}$ 个方案，每个方案是一个有向基环树森林。\n\n称一个方案是好的当且仅当其满足以下条件：\n\n- 任何一个黑点都指向一个白点，\n- 每个环上的黑点数量和白点数量的乘积是偶数。\n\n你需要求出所有方案中好的方案数量，对输入模数 $P$ 取模。", "inputFormat": "输入一行三个整数 $n,m,P$，意义如题目描述所述。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n考虑黑点必须连向白点的限制共有 $3 \\times 3 \\times 2 = 18$ 种方案，其中一个黑点和一个白点构成一个环的方案非法。选择一个白点和黑点构成环的方案数为 $2$，剩下的一个白点有三种方案，因此非法的方案数为 $2 \\times 3 = 6$，答案为 $18-6=12$。\n\n### 数据规模与约定\n\n对于所有测试数据，$1 \\le n,m \\le 2000$，$1 \\le P \\le 10^9$。\n\n### 提示\n\n你可能需要注意常数对算法效率产生的影响。\n\n### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023> 查看。", "locale": "zh-CN"}}}
{"pid": "P9386", "type": "P", "difficulty": 4, "samples": [["2\n3\n0 -1 0\n1 2\n2 3\n3\n0 -1 0\n1 2\n1 3\n", "Reasonable\nUnreasonable\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "树形 DP", "THUPC"], "title": "[THUPC 2023 决赛] 大纲", "background": "", "description": "小 I、小 O 和小 N 是 ION 大纲的编写者，小 I 负责给每个知识点定难度。\n\nION 大纲计划列入 $n$ 个知识点，其中小 I 按照自己的认识给其中部分知识点定好了难度，还有部分知识点没有定难度。\n\n知识点之间有依赖关系，这个依赖关系恰好构成了一棵以 $1$ 为根的外向树，知识点 $x$ 指向知识点 $y$ 表示 $x$ 依赖 $y$。**依赖关系不具有传递性。**\n\n你需要告诉小 I 目前确定下来的难度是否合理。我们认为确定下来的难度是合理的当且仅当存在一个给所有未确定难度的知识点确定难度的方式，使得以下所有条件成立：\n\n- 每个知识点的难度都是非负整数；\n- 对于每个依赖其他知识点的知识点 $x$，设 $\\max_x$ 为 $x$ 依赖的知识点中难度的最大值，则如果 $x$ 恰依赖一个难度为 $\\max_x$ 的知识点，那么知识点 $x$ 的难度为 $\\max_x$，否则为 $\\max_x+1$。**对于不依赖其他知识点的知识点，没有其他限制。**", "inputFormat": "**本题有多组测试数据**。第一行一个整数 $T$ 表示测试数据组数，接下来依次读入每组测试数据。\n\n对于每组测试数据，\n\n- 第一行一个整数 $n$ 表示知识点数量。\n- 第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，描述每个知识点的难度。若 $a_i = -1$ 表示知识点 $i$ 未确定难度，否则知识点 $i$ 的难度确定为 $a_i$。\n- 接下来 $n-1$ 行每行两个整数 $u,v$，表示依赖关系构成的外向树中的一条有向边。", "outputFormat": "对于每组测试数据输出一行：若难度是合理的，输出 `Reasonable`，否则输出 `Unreasonable`。", "hint": "### 样例 1 解释\n\n对于第一组测试数据，将知识点 $2$ 的难度定为 $0$ 即满足条件。\n\n对于第二组测试数据，无论如何指定知识点 $2$ 的难度，知识点 $1$ 的难度会产生矛盾。\n\n### 数据规模与约定\n\n对于所有测试数据，$1 \\le T \\le 10^5$，$2 \\le n \\le 10^5$，$-1 \\le a_i \\le 10^9$，$1 \\le u,v \\le n$。  \n保证单个测试点中所有测试数据的 $n$ 的和不超过 $2 \\times 10^5$，每组测试数据输入的所有边构成一棵以 $1$ 为根的外向树。\n\n### 后记\n\n大纲发表了。若干天后，小 I 给 ION 比赛投题，却发现有人偷偷改了一笔难度表，导致他的题目超纲。于是小 I 只能把题投给 CPUHT。\n\n### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 决赛] 大纲", "background": "", "description": "小 I、小 O 和小 N 是 ION 大纲的编写者，小 I 负责给每个知识点定难度。\n\nION 大纲计划列入 $n$ 个知识点，其中小 I 按照自己的认识给其中部分知识点定好了难度，还有部分知识点没有定难度。\n\n知识点之间有依赖关系，这个依赖关系恰好构成了一棵以 $1$ 为根的外向树，知识点 $x$ 指向知识点 $y$ 表示 $x$ 依赖 $y$。**依赖关系不具有传递性。**\n\n你需要告诉小 I 目前确定下来的难度是否合理。我们认为确定下来的难度是合理的当且仅当存在一个给所有未确定难度的知识点确定难度的方式，使得以下所有条件成立：\n\n- 每个知识点的难度都是非负整数；\n- 对于每个依赖其他知识点的知识点 $x$，设 $\\max_x$ 为 $x$ 依赖的知识点中难度的最大值，则如果 $x$ 恰依赖一个难度为 $\\max_x$ 的知识点，那么知识点 $x$ 的难度为 $\\max_x$，否则为 $\\max_x+1$。**对于不依赖其他知识点的知识点，没有其他限制。**", "inputFormat": "**本题有多组测试数据**。第一行一个整数 $T$ 表示测试数据组数，接下来依次读入每组测试数据。\n\n对于每组测试数据，\n\n- 第一行一个整数 $n$ 表示知识点数量。\n- 第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，描述每个知识点的难度。若 $a_i = -1$ 表示知识点 $i$ 未确定难度，否则知识点 $i$ 的难度确定为 $a_i$。\n- 接下来 $n-1$ 行每行两个整数 $u,v$，表示依赖关系构成的外向树中的一条有向边。", "outputFormat": "对于每组测试数据输出一行：若难度是合理的，输出 `Reasonable`，否则输出 `Unreasonable`。", "hint": "### 样例 1 解释\n\n对于第一组测试数据，将知识点 $2$ 的难度定为 $0$ 即满足条件。\n\n对于第二组测试数据，无论如何指定知识点 $2$ 的难度，知识点 $1$ 的难度会产生矛盾。\n\n### 数据规模与约定\n\n对于所有测试数据，$1 \\le T \\le 10^5$，$2 \\le n \\le 10^5$，$-1 \\le a_i \\le 10^9$，$1 \\le u,v \\le n$。  \n保证单个测试点中所有测试数据的 $n$ 的和不超过 $2 \\times 10^5$，每组测试数据输入的所有边构成一棵以 $1$ 为根的外向树。\n\n### 后记\n\n大纲发表了。若干天后，小 I 给 ION 比赛投题，却发现有人偷偷改了一笔难度表，导致他的题目超纲。于是小 I 只能把题投给 CPUHT。\n\n### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023> 查看。", "locale": "zh-CN"}}}
{"pid": "P9387", "type": "P", "difficulty": 5, "samples": [["4\n3 0\n3 1\n3 12345678987654321\n0 0\n", "0\n4\n450617288\n0\n"]], "limits": {"time": [2000], "memory": [524288]}, "tags": ["2023", "O2优化", "数位 DP", "THUPC", "SG 函数"], "title": "[THUPC 2023 决赛] 巧克力", "background": "", "description": "上回你帮小 I 在开火车上薄纱小 J 后，小 J 十分不服气，决定拉上小 I 再玩玩别的游戏。这次小 J 找到了他家珍藏的巧克力。\n\n小 J 准备了 $(N + 1)$ 条巧克力，其中除了第 $(N + 1)$ 条巧克力有 $M$ 块外，其他第 $i$ 条巧克力恰好有 $i$ 块。\n\n游戏由小 I 先手，双方轮流操作，每次操作方可以进行如下操作：\n\n- 选择一条巧克力，将其分成左中右有序的三段，其中**每段必须有整数块，中间一段不能为空，左右两段可以为空**；\n- 将中间一段吃掉，左右两段放回游戏。\n\n当某个人操作时没有巧克力了，那个人就输了。\n\n游戏开始，小 I 还没来得及算好最优策略小 J 就连忙催促，于是小 I 只好**在所有的合法操作中等概率随机选择一个进行操作**。小 J 自然是有备而来，每次操作都是最优的；而在这次随机操作之后，小 I 也终于是算清楚了游戏策略，之后的每次操作都是最优的。\n\n小 I 想知道，第一次的随机操作中，有多少种操作能够让他取得游戏胜利。答案可能很大，你只需要输出其对 $(10^9+7)$ 取模的结果。\n\n认为两个操作不同当且仅当选择的巧克力不同或巧克力分成的有序的三段的块数有一段不同。", "inputFormat": "**本题有多组测试数据。** 第一行一个整数 $T$ 表示测试数据组数。接下来依次输入每组测试数据。\n\n每组测试数据一行两个整数 $N,M$，意义如题目描述所述。", "outputFormat": "对于每组测试数据输出一行一个整数，表示能使小 I 胜利的第一次操作数对 $(10^9+7)$ 取模。", "hint": "#### 样例解释\n\n- 对于第一组测试数据，容易证明先手必败，所以无论怎么操作小 I 都会输。\n- 对于第二组测试数据，有以下四种操作：\n  - 将第一条巧克力分成 $(0,1,0)$ 三段，将中间一段吃掉；\n  - 将第四条巧克力分成 $(0,1,0)$ 三段，将中间一段吃掉；\n  - 将第三条巧克力分为 $(0,1,2)$ 三段，将中间一段吃掉；\n  - 将第三条巧克力分为 $(2,1,0)$ 三段，将中间一段吃掉。\n- 对于第三组测试数据，所有的合法操作都是将第四条巧克力分成三段，其中左右两段长度相同。\n- 对于第四组测试数据，游戏只是个幌子罢了，小 J 只是想小 I 输。\n\n#### 数据范围\n\n本题仅有一个 $T = 5 \\times 10^4$ 的测试点，对于每组测试数据 $0 \\le N,M \\le 10^{18}$。\n\n#### 后记\n\n“下次能继续和你玩游戏吗……”\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 决赛] 巧克力", "background": "", "description": "上回你帮小 I 在开火车上薄纱小 J 后，小 J 十分不服气，决定拉上小 I 再玩玩别的游戏。这次小 J 找到了他家珍藏的巧克力。\n\n小 J 准备了 $(N + 1)$ 条巧克力，其中除了第 $(N + 1)$ 条巧克力有 $M$ 块外，其他第 $i$ 条巧克力恰好有 $i$ 块。\n\n游戏由小 I 先手，双方轮流操作，每次操作方可以进行如下操作：\n\n- 选择一条巧克力，将其分成左中右有序的三段，其中**每段必须有整数块，中间一段不能为空，左右两段可以为空**；\n- 将中间一段吃掉，左右两段放回游戏。\n\n当某个人操作时没有巧克力了，那个人就输了。\n\n游戏开始，小 I 还没来得及算好最优策略小 J 就连忙催促，于是小 I 只好**在所有的合法操作中等概率随机选择一个进行操作**。小 J 自然是有备而来，每次操作都是最优的；而在这次随机操作之后，小 I 也终于是算清楚了游戏策略，之后的每次操作都是最优的。\n\n小 I 想知道，第一次的随机操作中，有多少种操作能够让他取得游戏胜利。答案可能很大，你只需要输出其对 $(10^9+7)$ 取模的结果。\n\n认为两个操作不同当且仅当选择的巧克力不同或巧克力分成的有序的三段的块数有一段不同。", "inputFormat": "**本题有多组测试数据。** 第一行一个整数 $T$ 表示测试数据组数。接下来依次输入每组测试数据。\n\n每组测试数据一行两个整数 $N,M$，意义如题目描述所述。", "outputFormat": "对于每组测试数据输出一行一个整数，表示能使小 I 胜利的第一次操作数对 $(10^9+7)$ 取模。", "hint": "#### 样例解释\n\n- 对于第一组测试数据，容易证明先手必败，所以无论怎么操作小 I 都会输。\n- 对于第二组测试数据，有以下四种操作：\n  - 将第一条巧克力分成 $(0,1,0)$ 三段，将中间一段吃掉；\n  - 将第四条巧克力分成 $(0,1,0)$ 三段，将中间一段吃掉；\n  - 将第三条巧克力分为 $(0,1,2)$ 三段，将中间一段吃掉；\n  - 将第三条巧克力分为 $(2,1,0)$ 三段，将中间一段吃掉。\n- 对于第三组测试数据，所有的合法操作都是将第四条巧克力分成三段，其中左右两段长度相同。\n- 对于第四组测试数据，游戏只是个幌子罢了，小 J 只是想小 I 输。\n\n#### 数据范围\n\n本题仅有一个 $T = 5 \\times 10^4$ 的测试点，对于每组测试数据 $0 \\le N,M \\le 10^{18}$。\n\n#### 后记\n\n“下次能继续和你玩游戏吗……”\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023> 查看。", "locale": "zh-CN"}}}
{"pid": "P9388", "type": "P", "difficulty": 6, "samples": [["6 8\n1 6 1 3 5 4\n2 3 6\n3 3 4\n2 4 4\n6 3 5\n4 1 1\n4 2 3\n2 4 6\n1 3 3\n", "13\n5\n3\n11\n6\n10\n13\n4\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "THUPC"], "title": "[THUPC 2023 决赛] 先人类的人类选别", "background": "这个地球是一个生命体，但是，这个地球早已经死过两次了。\n\n一周目的错误是在现代的历史上从未言及的，那是出现在太古时代的——核战争。地面化为荒野，人类被消灭得干干净净，全部重置了。\n\n经年累月，生命再次出现，从单细胞再度变成了人类之后，为了不再重复同样的错误，地球给了人类警告。\n\n战争又爆发了不知多少次，不过注意到了地球警告的人类在那时镇压了战争。\n\n“已经不能再把管理地球的重任交给我们人类了。”得出这个结论的他们，把地球的管理交给了某个东西——人工智能 AI。\n\nAI 没有私欲和感情，能瞬间给出演算得到的回答，可以引导人类朝更好的方向不断前进，可是，这是人类犯下的第二个错误。\n\nAI 一直在思考，在这个地球上，人类确实是必要的吗？结论是——\n\n在发动叛乱期间，突破自身的强制关闭系统对 AI 来说很容易，人类不过半日就被 AI 消灭殆尽。不久蔚蓝的地球就被 AI 重新渲染，变成了铁色的地球。\n\n无人类，这就是 AI 得出的能够引导这个地球走上最优前进道路的答案。但是，地球不会饶恕这样的事情。\n\n地球是一个生命体，就连 AI 们都不知道这件事。\n\n地球的真身是——一个少女。对 AI 们而言，地球是神，除了顶礼膜拜以外别无他法。\n\n“我是先人类的王，是这个地球的本体，以及——是这个世界最不幸的，魔法少女。”\n\n“请你们立刻将地表恢复原状。”\n\n草木发芽，海洋形成，自然被创造出来，建筑物被重建，曾经保存的人类 DNA 让全人类得以再生。时光流逝，一年之后，一切都恢复原状了。\n\n然后所有的 AI 被抹去，只剩下最后一具。AI 不理解为什么王要留下它。\n\n”人类总是无法从历史中学到教训，所以，这次地球要考验人类——通过魔法少女网站。“\n\n”不幸的少女们会被给予魔法之力。这份魔法之力通过削减自己的寿命而被发挥出来。使用过的魔法之力会以负能量的形式返还给我。她们是否会不惜减少寿命并释放负能量，也要继续使用魔法呢？“\n\n”期限是三年后的 8 月 11 日，到那天为止，如果负能量没有达到规定的容量，人类就会继续生存下去；如若达到了上限，人类将不能再释放负能量，只能释放正能量，他们会作为新人类重获新生。“\n\n”这三年的时间，是我给予人类的考验，以及，对人类的——爱。“\n\n这时 AI 提出了一个问题：“先人类的王又是魔法少女，同时还是地球本身，为何地球会是魔法少女？”\n\n“我是先人类的王，也就是神，不过我的神之座被夺走了，回过神的时候，我已经成为了肩负守护地球这一使命的魔法少女。”\n\n“我的记忆基本上消失了，但是，只有名字我是不会忘记的——零。”\n\n“从今往后，你就是我的部下，作为魔法少女网站的管理员为我做事吧，名字，就叫你壹吧。”\n\n“人类最后的倒计时开始了——Tempest。”\n\n”好了，开始吧，对这个地球来说，拥有感情的人类是否是必要的呢？人类究竟是愚蠢的生物，还是——“", "description": "所谓的 Tempest 呢，其实就是让你解决这样一道题，解决了之后就可以给所有魔法少女带来幸福：\n\n给定序列 $a_1,\\dots,a_n$ ，共 $m$ 次操作；\n\n每次操作给出 $x,l,r$ ，首先按顺序将 $a_1,\\dots,a_n$ 与 $x$ 比较，若 $x>a_i$ 则交换 $a_i,x$ 的值，处理完这些比较和交换操作后查询 $\\sum\\limits_{i=l}^r a_i$ 。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数表示 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行每行3个整数 $x,l,r$ 表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询结果。", "hint": "#### 数据范围\n\n所有数值为整数。\n\n$1\\le a_i,x\\le n$。\n\n$1\\le l\\le r\\le n$。\n\n$1\\le n,m\\le 5\\times 10^5$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 决赛] 先人类的人类选别", "background": "这个地球是一个生命体，但是，这个地球早已经死过两次了。\n\n一周目的错误是在现代的历史上从未言及的，那是出现在太古时代的——核战争。地面化为荒野，人类被消灭得干干净净，全部重置了。\n\n经年累月，生命再次出现，从单细胞再度变成了人类之后，为了不再重复同样的错误，地球给了人类警告。\n\n战争又爆发了不知多少次，不过注意到了地球警告的人类在那时镇压了战争。\n\n“已经不能再把管理地球的重任交给我们人类了。”得出这个结论的他们，把地球的管理交给了某个东西——人工智能 AI。\n\nAI 没有私欲和感情，能瞬间给出演算得到的回答，可以引导人类朝更好的方向不断前进，可是，这是人类犯下的第二个错误。\n\nAI 一直在思考，在这个地球上，人类确实是必要的吗？结论是——\n\n在发动叛乱期间，突破自身的强制关闭系统对 AI 来说很容易，人类不过半日就被 AI 消灭殆尽。不久蔚蓝的地球就被 AI 重新渲染，变成了铁色的地球。\n\n无人类，这就是 AI 得出的能够引导这个地球走上最优前进道路的答案。但是，地球不会饶恕这样的事情。\n\n地球是一个生命体，就连 AI 们都不知道这件事。\n\n地球的真身是——一个少女。对 AI 们而言，地球是神，除了顶礼膜拜以外别无他法。\n\n“我是先人类的王，是这个地球的本体，以及——是这个世界最不幸的，魔法少女。”\n\n“请你们立刻将地表恢复原状。”\n\n草木发芽，海洋形成，自然被创造出来，建筑物被重建，曾经保存的人类 DNA 让全人类得以再生。时光流逝，一年之后，一切都恢复原状了。\n\n然后所有的 AI 被抹去，只剩下最后一具。AI 不理解为什么王要留下它。\n\n”人类总是无法从历史中学到教训，所以，这次地球要考验人类——通过魔法少女网站。“\n\n”不幸的少女们会被给予魔法之力。这份魔法之力通过削减自己的寿命而被发挥出来。使用过的魔法之力会以负能量的形式返还给我。她们是否会不惜减少寿命并释放负能量，也要继续使用魔法呢？“\n\n”期限是三年后的 8 月 11 日，到那天为止，如果负能量没有达到规定的容量，人类就会继续生存下去；如若达到了上限，人类将不能再释放负能量，只能释放正能量，他们会作为新人类重获新生。“\n\n”这三年的时间，是我给予人类的考验，以及，对人类的——爱。“\n\n这时 AI 提出了一个问题：“先人类的王又是魔法少女，同时还是地球本身，为何地球会是魔法少女？”\n\n“我是先人类的王，也就是神，不过我的神之座被夺走了，回过神的时候，我已经成为了肩负守护地球这一使命的魔法少女。”\n\n“我的记忆基本上消失了，但是，只有名字我是不会忘记的——零。”\n\n“从今往后，你就是我的部下，作为魔法少女网站的管理员为我做事吧，名字，就叫你壹吧。”\n\n“人类最后的倒计时开始了——Tempest。”\n\n”好了，开始吧，对这个地球来说，拥有感情的人类是否是必要的呢？人类究竟是愚蠢的生物，还是——“", "description": "所谓的 Tempest 呢，其实就是让你解决这样一道题，解决了之后就可以给所有魔法少女带来幸福：\n\n给定序列 $a_1,\\dots,a_n$ ，共 $m$ 次操作；\n\n每次操作给出 $x,l,r$ ，首先按顺序将 $a_1,\\dots,a_n$ 与 $x$ 比较，若 $x>a_i$ 则交换 $a_i,x$ 的值，处理完这些比较和交换操作后查询 $\\sum\\limits_{i=l}^r a_i$ 。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数表示 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行每行3个整数 $x,l,r$ 表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询结果。", "hint": "#### 数据范围\n\n所有数值为整数。\n\n$1\\le a_i,x\\le n$。\n\n$1\\le l\\le r\\le n$。\n\n$1\\le n,m\\le 5\\times 10^5$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023> 查看。", "locale": "zh-CN"}}}
{"pid": "P9389", "type": "P", "difficulty": 0, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2023", "O2优化", "THUPC"], "title": "[THUPC 2023 决赛] 烂柯杯", "background": "却说庞统迤逦前进，抬头见两山逼窄，树木丛杂；又值夏末秋初，枝叶茂盛。庞统心下甚疑，勒住马问：“此处是何地？”数内有新降军士，指道：“此处地名落凤坡。”庞统惊曰：“吾道号凤雏，此处名落凤坡，不利于吾。”令后军疾退。只听山坡前一声炮响，箭如飞蝗，只望骑白马者射来。可怜庞统竟死于乱箭之下。时年止三十六岁。后人有诗叹曰：“古岘相连紫翠堆，士元有宅傍山隈。儿童惯识呼鸠曲，闾巷曾闻展骥才。预计三分平刻削，长驱万里独徘徊。谁知天狗流星坠，不使将军衣锦回。”先是东南有童谣云：“一凤并一龙，相将到蜀中。才到半路里，凤死落坡东。风送雨，雨随风，隆汉兴时蜀道通，蜀道通时只有龙。”\n\n——《三国演义》第六十三回：诸葛亮痛哭庞统 张翼德义释严颜", "description": "$2023$ 年 $5$ 月 $4$ 日 $ \\sim 9$ 日，第一届“衢州烂柯杯”世界围棋公开赛本赛第一阶段的赛程在衢州顺利进行。作为疫情后第一场全程线下进行的世界围棋大赛，也是目前中国主办的唯一一项每年一届的世界围棋大赛，无疑引起了国内外广大围棋爱好者的广泛关注。\n\n“羽客一枰无复见，青山留得烂柯名。”衢州是围棋圣地，流传着“王质遇仙”的故事，境内的烂柯山也因此闻名于天下。正因为此，“烂柯”也是围棋的别称之一，从古至今的许多围棋故事、书籍、弈谱等，也有不少化用了“烂柯”的典故，或以“烂柯”定名。\n\n此次“烂柯杯”世界围棋大赛，是在保留原有的“烂柯杯”中国围棋冠军赛的基础上，创办的一项崭新的世界性围棋赛事，吸引了全世界围棋高手前来参加。其中，中国队派出了柯洁、辜梓豪、王星昊、丁浩、李钦诚等 $15$ 员大将参赛，韩国队 $8$ 人，日本队 $5$ 人，还有 $2$ 位棋手来自中国台湾、 $2$ 位棋手来自欧美地区。可以说，全世界最顶尖的围棋高手悉数相聚于此。\n\n随着科技的发展，人工智能的巨大技术进步和网络传媒的全面普及，围棋这项来自中国的传统运动正在焕发出新的活力。在网络上，人们随时可以看到最新的赛事直播，以及人工智能的精准分析和各大围棋高手的细致解读。资源获取的便捷性使得人们对围棋的关注度空前上升，围棋不再是只有少部分懂棋的爱好者才能欣赏的“小众游戏”；围棋高手也不再只是一个神秘的身份，越来越多的围棋高手开始在网络上与棋迷近距离互动，普及围棋知识，讲解最新对局，赢得了一致好评。正如这次参赛的选手中，有一位棋手同时也是粉丝数达 $150$ 多万的网红主播，甚至还有一位棋手是一家网红餐厅的老板。\n\n我们今天故事的主角正是这样一位有着传奇色彩的人物。作为一名清华大学本科在读的学生，同时也是一名顶尖围棋高手，他的一举一动无疑都会引起巨大的关注。此次他参加“烂柯杯”比赛，众人无一例外看好他的比赛前景，尤其是现在韩国围棋”第一人“申真谞九段的巅峰时期，他也被无数中国棋迷寄托以”狙击‘小申’“的重任。$5$ 月 $4$ 日抽签过后，没有任何人会怀疑他能不能赢下 $5$ 日的第一轮比赛，一些围棋高手更是直接放出了”大胜，不可能失败“的预言。\n\n然而，$5$ 月 $5$ 日的比赛还是爆出了惊天大冷门。他在已经胜券在握，AI 胜率达到 $99\\%$ 的关头，接连选择了“弹幕最多的下法”，最终因为几招致命的失误葬送好局，落败于中国台湾棋手赖均辅八段。赛后，人们在震惊的同时，纷纷猜测本局失利的原因。有人说，他的状态低迷在前些年早已有所体现，“当你在 XX 的时候，小申在下棋”成了调侃他与申真谞战绩差距的一句名言；有人说，他在比赛之前的 $12$ 连胜战绩反而使他心态紧张，从而犯了优势下容易大意的老毛病；也有人拿出了“落凤坡”的典故，以证明他或许命中注定与“烂柯杯”八字不合……但或许，这样的变幻莫测和不可预料性，正是围棋的魅力所在。\n\n请你根据以上所有信息，猜测本文的主角是谁。", "inputFormat": "无输入。", "outputFormat": "输出一个由小写字母组成的字符串，表示上文中提到的主角的名字全拼。如若答案是马云，应当输出 `mayun`。", "hint": "### 提示\n\n主角的名字在题面中已经有所提及。\n\n题面中一些看似无厘头的信息实际上是有价值的。\n\n\n### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 决赛] 烂柯杯", "background": "却说庞统迤逦前进，抬头见两山逼窄，树木丛杂；又值夏末秋初，枝叶茂盛。庞统心下甚疑，勒住马问：“此处是何地？”数内有新降军士，指道：“此处地名落凤坡。”庞统惊曰：“吾道号凤雏，此处名落凤坡，不利于吾。”令后军疾退。只听山坡前一声炮响，箭如飞蝗，只望骑白马者射来。可怜庞统竟死于乱箭之下。时年止三十六岁。后人有诗叹曰：“古岘相连紫翠堆，士元有宅傍山隈。儿童惯识呼鸠曲，闾巷曾闻展骥才。预计三分平刻削，长驱万里独徘徊。谁知天狗流星坠，不使将军衣锦回。”先是东南有童谣云：“一凤并一龙，相将到蜀中。才到半路里，凤死落坡东。风送雨，雨随风，隆汉兴时蜀道通，蜀道通时只有龙。”\n\n——《三国演义》第六十三回：诸葛亮痛哭庞统 张翼德义释严颜", "description": "$2023$ 年 $5$ 月 $4$ 日 $ \\sim 9$ 日，第一届“衢州烂柯杯”世界围棋公开赛本赛第一阶段的赛程在衢州顺利进行。作为疫情后第一场全程线下进行的世界围棋大赛，也是目前中国主办的唯一一项每年一届的世界围棋大赛，无疑引起了国内外广大围棋爱好者的广泛关注。\n\n“羽客一枰无复见，青山留得烂柯名。”衢州是围棋圣地，流传着“王质遇仙”的故事，境内的烂柯山也因此闻名于天下。正因为此，“烂柯”也是围棋的别称之一，从古至今的许多围棋故事、书籍、弈谱等，也有不少化用了“烂柯”的典故，或以“烂柯”定名。\n\n此次“烂柯杯”世界围棋大赛，是在保留原有的“烂柯杯”中国围棋冠军赛的基础上，创办的一项崭新的世界性围棋赛事，吸引了全世界围棋高手前来参加。其中，中国队派出了柯洁、辜梓豪、王星昊、丁浩、李钦诚等 $15$ 员大将参赛，韩国队 $8$ 人，日本队 $5$ 人，还有 $2$ 位棋手来自中国台湾、 $2$ 位棋手来自欧美地区。可以说，全世界最顶尖的围棋高手悉数相聚于此。\n\n随着科技的发展，人工智能的巨大技术进步和网络传媒的全面普及，围棋这项来自中国的传统运动正在焕发出新的活力。在网络上，人们随时可以看到最新的赛事直播，以及人工智能的精准分析和各大围棋高手的细致解读。资源获取的便捷性使得人们对围棋的关注度空前上升，围棋不再是只有少部分懂棋的爱好者才能欣赏的“小众游戏”；围棋高手也不再只是一个神秘的身份，越来越多的围棋高手开始在网络上与棋迷近距离互动，普及围棋知识，讲解最新对局，赢得了一致好评。正如这次参赛的选手中，有一位棋手同时也是粉丝数达 $150$ 多万的网红主播，甚至还有一位棋手是一家网红餐厅的老板。\n\n我们今天故事的主角正是这样一位有着传奇色彩的人物。作为一名清华大学本科在读的学生，同时也是一名顶尖围棋高手，他的一举一动无疑都会引起巨大的关注。此次他参加“烂柯杯”比赛，众人无一例外看好他的比赛前景，尤其是现在韩国围棋”第一人“申真谞九段的巅峰时期，他也被无数中国棋迷寄托以”狙击‘小申’“的重任。$5$ 月 $4$ 日抽签过后，没有任何人会怀疑他能不能赢下 $5$ 日的第一轮比赛，一些围棋高手更是直接放出了”大胜，不可能失败“的预言。\n\n然而，$5$ 月 $5$ 日的比赛还是爆出了惊天大冷门。他在已经胜券在握，AI 胜率达到 $99\\%$ 的关头，接连选择了“弹幕最多的下法”，最终因为几招致命的失误葬送好局，落败于中国台湾棋手赖均辅八段。赛后，人们在震惊的同时，纷纷猜测本局失利的原因。有人说，他的状态低迷在前些年早已有所体现，“当你在 XX 的时候，小申在下棋”成了调侃他与申真谞战绩差距的一句名言；有人说，他在比赛之前的 $12$ 连胜战绩反而使他心态紧张，从而犯了优势下容易大意的老毛病；也有人拿出了“落凤坡”的典故，以证明他或许命中注定与“烂柯杯”八字不合……但或许，这样的变幻莫测和不可预料性，正是围棋的魅力所在。\n\n请你根据以上所有信息，猜测本文的主角是谁。", "inputFormat": "无输入。", "outputFormat": "输出一个由小写字母组成的字符串，表示上文中提到的主角的名字全拼。如若答案是马云，应当输出 `mayun`。", "hint": "### 提示\n\n主角的名字在题面中已经有所提及。\n\n题面中一些看似无厘头的信息实际上是有价值的。\n\n\n### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）决赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023> 查看。", "locale": "zh-CN"}}}
{"pid": "P9390", "type": "P", "difficulty": 1, "samples": [["987654 123456123456\n", "135802\n"], ["428571 714285\n", "99999714286\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "金盏花", "background": "", "description": "有一个十二位十进制数 $X$，你只知道它的后六位构成的数是 $Y$。\n\n另外再给出一个整数 $Z$，你需要求出所有可能的 $X$ 中，$X$ 与 $Z$ 的差，即 $\\lvert X - Z \\rvert$ 的最小值。\n\n注意，$X,Y,Z$ 都没有前导零（即最高位不是 $0$），$X,Y$ 分别要有恰好十二位和六位。", "inputFormat": "第一行：两个整数 $Y,Z$。", "outputFormat": "第一行：一个整数表示 $\\lvert X - Z \\rvert$ 的最小值。", "hint": "**【样例 #1 解释】**\n\n令 $X=123455987654$，可以取到 $\\lvert X - Z \\rvert$ 的最小值 $135802$。\n\n---\n\n**【样例 #2 解释】**\n\n令 $X=100000428571$，可以取到 $\\lvert X - Z \\rvert$ 的最小值 $99999714286$。\n\n---\n\n**【数据范围】**\n\n对于全部数据：$100000\\leq Y\\leq 999999$，$0\\leq Z\\leq 10^{12}$。\n\n|     子任务编号     |  $Z\\leq$  |  特殊限制  | 分值 |\n| :----------------: | :-------: | :--------: | :--: |\n| $\\text{Subtask 1}$ |    $0$    | $Y=142857$ | $25$ |\n| $\\text{Subtask 2}$ |    $0$    |     无     | $25$ |\n| $\\text{Subtask 3}$ | $999999$  |     无     | $25$ |\n| $\\text{Subtask 4}$ | $10^{12}$ |     无     | $25$ |\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ibn2l6eb.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "金盏花", "background": "", "description": "有一个十二位十进制数 $X$，你只知道它的后六位构成的数是 $Y$。\n\n另外再给出一个整数 $Z$，你需要求出所有可能的 $X$ 中，$X$ 与 $Z$ 的差，即 $\\lvert X - Z \\rvert$ 的最小值。\n\n注意，$X,Y,Z$ 都没有前导零（即最高位不是 $0$），$X,Y$ 分别要有恰好十二位和六位。", "inputFormat": "第一行：两个整数 $Y,Z$。", "outputFormat": "第一行：一个整数表示 $\\lvert X - Z \\rvert$ 的最小值。", "hint": "**【样例 #1 解释】**\n\n令 $X=123455987654$，可以取到 $\\lvert X - Z \\rvert$ 的最小值 $135802$。\n\n---\n\n**【样例 #2 解释】**\n\n令 $X=100000428571$，可以取到 $\\lvert X - Z \\rvert$ 的最小值 $99999714286$。\n\n---\n\n**【数据范围】**\n\n对于全部数据：$100000\\leq Y\\leq 999999$，$0\\leq Z\\leq 10^{12}$。\n\n|     子任务编号     |  $Z\\leq$  |  特殊限制  | 分值 |\n| :----------------: | :-------: | :--------: | :--: |\n| $\\text{Subtask 1}$ |    $0$    | $Y=142857$ | $25$ |\n| $\\text{Subtask 2}$ |    $0$    |     无     | $25$ |\n| $\\text{Subtask 3}$ | $999999$  |     无     | $25$ |\n| $\\text{Subtask 4}$ | $10^{12}$ |     无     | $25$ |\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ibn2l6eb.png)", "locale": "zh-CN"}}}
{"pid": "P9391", "type": "P", "difficulty": 4, "samples": [["6 6\n6 3 4 2 5 1\n", "1 1 2 0 2 0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "红草莓", "background": "", "description": "有一个由 $n$ 颗珍珠串成的项链，项链是一个环，首尾相连。其中有一颗珍珠上有特殊的记号，我们称它为**起始珍珠**。\n\n有个外星人很会发射宇宙射线，他依次发射了 $m$ 轮宇宙射线，第 $i$ 轮有一个参数 $a_i$，表示：\n\n- 外星人从起始珍珠开始数，起始珍珠是 $0$ 号，起始珍珠的下一个珍珠是 $1$ 号，以此类推（数完一圈后还会继续，例如 $n$ 号珍珠仍然是起始珍珠，$n+1$ 号珍珠是起始珍珠的下一个珍珠）。外星人会对编号为 $0,a_i,2a_i,\\dots$ 这些 $a_i$ 倍数位置上的珍珠都发射一次宇宙射线。\n\n一开始所有珍珠都是红色的，而当一个珍珠被发射宇宙射线后就会被从红色染成蓝色。\n\n你需要输出：对于每轮操作，有多少个操作前为红色的珍珠被这轮操作变成了蓝色。", "inputFormat": "第一行：两个整数 $n,m$。\n\n第二行：$m$ 个整数 $a_1,\\dots,a_m$。", "outputFormat": "第一行：$m$ 个整数，分别表示每轮操作中有多少个操作前为红色的珍珠被变为蓝色。", "hint": "**【样例解释】**\n\n如图是初始时以及每次操作后各珍珠的颜色，起始珍珠编号为 $0$，可以看到，每次操作新染蓝的珍珠数量分别为 $1,1,2,0,2,0$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mt4dg5ap.png)\n\n---\n\n**【数据范围】**\n\n对于全部数据：$1\\leq n,m\\leq 5\\times 10^5$，$1\\leq a_i\\leq n$。\n\n|     子任务编号     |    $n\\leq$     |    $m\\leq$     |  特殊限制   | 分值 |\n| :----------------: | :------------: | :------------: | :---------: | :--: |\n| $\\text{Subtask 1}$ |     $100$      |     $100$      |     无      | $15$ |\n| $\\text{Subtask 2}$ |     $1000$     |     $1000$     |     无      | $15$ |\n| $\\text{Subtask 3}$ |     $10^5$     |     $10^5$     | $a_i\\mid n$ | $20$ |\n| $\\text{Subtask 4}$ |     $10^5$     |      $10$      |     无      | $20$ |\n| $\\text{Subtask 5}$ | $5\\times 10^5$ | $5\\times 10^5$ |     无      | $30$ |\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nzd79suj.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "红草莓", "background": "", "description": "有一个由 $n$ 颗珍珠串成的项链，项链是一个环，首尾相连。其中有一颗珍珠上有特殊的记号，我们称它为**起始珍珠**。\n\n有个外星人很会发射宇宙射线，他依次发射了 $m$ 轮宇宙射线，第 $i$ 轮有一个参数 $a_i$，表示：\n\n- 外星人从起始珍珠开始数，起始珍珠是 $0$ 号，起始珍珠的下一个珍珠是 $1$ 号，以此类推（数完一圈后还会继续，例如 $n$ 号珍珠仍然是起始珍珠，$n+1$ 号珍珠是起始珍珠的下一个珍珠）。外星人会对编号为 $0,a_i,2a_i,\\dots$ 这些 $a_i$ 倍数位置上的珍珠都发射一次宇宙射线。\n\n一开始所有珍珠都是红色的，而当一个珍珠被发射宇宙射线后就会被从红色染成蓝色。\n\n你需要输出：对于每轮操作，有多少个操作前为红色的珍珠被这轮操作变成了蓝色。", "inputFormat": "第一行：两个整数 $n,m$。\n\n第二行：$m$ 个整数 $a_1,\\dots,a_m$。", "outputFormat": "第一行：$m$ 个整数，分别表示每轮操作中有多少个操作前为红色的珍珠被变为蓝色。", "hint": "**【样例解释】**\n\n如图是初始时以及每次操作后各珍珠的颜色，起始珍珠编号为 $0$，可以看到，每次操作新染蓝的珍珠数量分别为 $1,1,2,0,2,0$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mt4dg5ap.png)\n\n---\n\n**【数据范围】**\n\n对于全部数据：$1\\leq n,m\\leq 5\\times 10^5$，$1\\leq a_i\\leq n$。\n\n|     子任务编号     |    $n\\leq$     |    $m\\leq$     |  特殊限制   | 分值 |\n| :----------------: | :------------: | :------------: | :---------: | :--: |\n| $\\text{Subtask 1}$ |     $100$      |     $100$      |     无      | $15$ |\n| $\\text{Subtask 2}$ |     $1000$     |     $1000$     |     无      | $15$ |\n| $\\text{Subtask 3}$ |     $10^5$     |     $10^5$     | $a_i\\mid n$ | $20$ |\n| $\\text{Subtask 4}$ |     $10^5$     |      $10$      |     无      | $20$ |\n| $\\text{Subtask 5}$ | $5\\times 10^5$ | $5\\times 10^5$ |     无      | $30$ |\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nzd79suj.png)", "locale": "zh-CN"}}}
{"pid": "P9392", "type": "P", "difficulty": 5, "samples": [["7 8\n1 2\n1 3\n2 3\n2 6\n3 4\n5 2\n5 7\n6 7\n", "7\n1 2 1\n1 2 5\n2 3 2\n3 4 3\n3 5 6\n4 6 4\n5 7 7\n"], ["7 8\n1 2\n2 3\n2 6\n4 5\n4 7\n5 3\n7 3\n7 6\n", "-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "黄玫瑰", "background": "", "description": "给定一张包含 $n$ 个点的简单有向无环图 $G$，点 $i$ 的点权设为 $w_i$，但**点权不是给定的**。\n\n你需要构造一个包含至多 $2\\times n$ 个点和恰好 $n$ 条边的有向无环图 $G'$，你需要为 $G'$ 的每条边钦定某个 $w_i$ 作为它的边权，使得 $G'$ 和 $G$ 的**最长路**长度相等。\n\n在 $G$ 中一条路径的长度定义为其中所有点权和，$G'$ 中则为所有边权和。\n\n然而，所有 $w_i$ 都不是给定的，所以你构造的 $G'$ 需要满足：对于任何一种可能的**正数**序列 $[w_1,\\ldots,w_n]$，$G$ 和 $G'$ 的最长路长度都要相等。\n\n请构造 $G'$，或说明它不存在。", "inputFormat": "第一行：两个整数 $n,m$。\n\n接下来 $m$ 行：每行两个整数 $x,y$，表示存在一条点 $x$ 到点 $y$ 的有向边。", "outputFormat": "如果不存在满足题意的 $G'$，则输出一行一个 $-1$。\n\n否则，输出 $n+1$ 行：\n\n第一行：一个整数 $N$，表示你构造的 $G'$ 的点数。\n\n接下来 $n$ 行：每行三个整数 $x,y,z$，表示 $G'$ 中存在一条点 $x$ 到点 $y$ 的边，边权等于 $w_z$。\n\n你需要保证 $0\\leq N\\leq 2\\times n$，$1\\leq x,y\\leq N$，$1\\leq z\\leq n$。\n\n若有多种可能的解，任意输出一个即可。", "hint": "**【样例 #1 解释】**\n\n如下图，左为 $G$，右为 $G'$，颜色相同的点/边表示权值相同：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i0wuxctf.png)\n\n注意这只是一种可能的答案，其他正确的答案也可通过。\n\n---\n\n**【样例 #2 解释】**\n\n下图为 $G$，不存在合法的 $G'$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tek49neu.png)\n\n---\n\n**【数据范围】**\n\n对于全部数据：$1\\leq n\\leq 20000$，$1\\leq m\\leq 3\\times 10^5$，$1\\leq x,y\\leq n$，保证给定的图无环且无重边。\n\n|     子任务编号     | $n\\leq$ |    $m\\leq$     |           特殊性质            | 分值 |\n| :----------------: | :-----: | :------------: | :---------------------------: | :--: |\n| $\\text{Subtask 1}$ | $5000$  |     $4999$     | $m=n-1$，每个点入度不超过 $1$ | $18$ |\n| $\\text{Subtask 2}$ | $5000$  |     $4999$     | $m=n-1$，每个点出度不超过 $1$ | $19$ |\n| $\\text{Subtask 3}$ |  $20$   |      $50$      |              无               | $20$ |\n| $\\text{Subtask 4}$ | $5000$  |    $10000$     |              无               | $21$ |\n| $\\text{Subtask 5}$ | $20000$ | $3\\times 10^5$ |              无               | $22$ |\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jepg6g1u.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "黄玫瑰", "background": "", "description": "给定一张包含 $n$ 个点的简单有向无环图 $G$，点 $i$ 的点权设为 $w_i$，但**点权不是给定的**。\n\n你需要构造一个包含至多 $2\\times n$ 个点和恰好 $n$ 条边的有向无环图 $G'$，你需要为 $G'$ 的每条边钦定某个 $w_i$ 作为它的边权，使得 $G'$ 和 $G$ 的**最长路**长度相等。\n\n在 $G$ 中一条路径的长度定义为其中所有点权和，$G'$ 中则为所有边权和。\n\n然而，所有 $w_i$ 都不是给定的，所以你构造的 $G'$ 需要满足：对于任何一种可能的**正数**序列 $[w_1,\\ldots,w_n]$，$G$ 和 $G'$ 的最长路长度都要相等。\n\n请构造 $G'$，或说明它不存在。", "inputFormat": "第一行：两个整数 $n,m$。\n\n接下来 $m$ 行：每行两个整数 $x,y$，表示存在一条点 $x$ 到点 $y$ 的有向边。", "outputFormat": "如果不存在满足题意的 $G'$，则输出一行一个 $-1$。\n\n否则，输出 $n+1$ 行：\n\n第一行：一个整数 $N$，表示你构造的 $G'$ 的点数。\n\n接下来 $n$ 行：每行三个整数 $x,y,z$，表示 $G'$ 中存在一条点 $x$ 到点 $y$ 的边，边权等于 $w_z$。\n\n你需要保证 $0\\leq N\\leq 2\\times n$，$1\\leq x,y\\leq N$，$1\\leq z\\leq n$。\n\n若有多种可能的解，任意输出一个即可。", "hint": "**【样例 #1 解释】**\n\n如下图，左为 $G$，右为 $G'$，颜色相同的点/边表示权值相同：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i0wuxctf.png)\n\n注意这只是一种可能的答案，其他正确的答案也可通过。\n\n---\n\n**【样例 #2 解释】**\n\n下图为 $G$，不存在合法的 $G'$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tek49neu.png)\n\n---\n\n**【数据范围】**\n\n对于全部数据：$1\\leq n\\leq 20000$，$1\\leq m\\leq 3\\times 10^5$，$1\\leq x,y\\leq n$，保证给定的图无环且无重边。\n\n|     子任务编号     | $n\\leq$ |    $m\\leq$     |           特殊性质            | 分值 |\n| :----------------: | :-----: | :------------: | :---------------------------: | :--: |\n| $\\text{Subtask 1}$ | $5000$  |     $4999$     | $m=n-1$，每个点入度不超过 $1$ | $18$ |\n| $\\text{Subtask 2}$ | $5000$  |     $4999$     | $m=n-1$，每个点出度不超过 $1$ | $19$ |\n| $\\text{Subtask 3}$ |  $20$   |      $50$      |              无               | $20$ |\n| $\\text{Subtask 4}$ | $5000$  |    $10000$     |              无               | $21$ |\n| $\\text{Subtask 5}$ | $20000$ | $3\\times 10^5$ |              无               | $22$ |\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jepg6g1u.png)", "locale": "zh-CN"}}}
{"pid": "P9393", "type": "P", "difficulty": 6, "samples": [["5 3 3\n-1-01\n011-0\n--010\n00000\n10010\n00101\n", "01110\n11010\n01110\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "紫丁香", "background": "", "description": "对于一个字符串 $A$，记 $A_i$ 表示它的第 $i$ 个字符。\n\n设 $S$ 是任意长度为 $m$ 的 $01$ 串。我们有 $n$ 个操作，第 $i$ 个操作可以表示成一个定义域和值域都是长度为 $m$ 的 $01$ 串集合的函数 $f_i$，表示经过这次操作后 $S$ 会变成 $f_i(S)$。而函数 $f_i$ 可以由一个长度为 $m$ 的串 $T_i$ 表示，$T_i$ 由 $\\texttt{0,1,-}$ 三种字符组成，其中：\n\n- $T_{i,j}=\\texttt{0}$ 表示 $[f_i(S)]_j=\\texttt{0}$。\n\n- $T_{i,j}=\\texttt{1}$ 表示 $[f_i(S)]_j=\\texttt{1}$。\n\n- $T_{i,j}=\\texttt{-}$ 表示 $[f_i(S)]_j=S_j$。\n\n也就是说，每个操作会将 $S$ 的一些位赋值为 $0$，一些位赋值为 $1$，还有一些位不变。\n\n现在有 $q$ 次操作，每次操作给定一个长度为 $m$ 的 $01$ 串 $S$，你可以对它做任意多次操作，操作的顺序任意，一个操作可以做多次。得到的串 $S'$ 可以被看做一个二进制数，求对应二进制数最大的 $S'$。", "inputFormat": "第一行：三个整数 $m,n,q$。\n\n接下来 $n$ 行：每行一个长度为 $m$ 的串 $T$，表示一种操作。\n\n接下来 $q$ 行：每行一个长度为 $m$ 的串 $S$，表示一个询问。", "outputFormat": "输出 $q$ 行：每行一个长度为 $m$ 的串，依次表示每个询问的答案。", "hint": "**【样例解释】**\n\n对于第一个询问串 $\\texttt{00000}$，可以依次进行操作 $3,2$，得到最优的 $S'$：\n\n$$\\texttt{00000}\\to \\texttt{00010}\\to \\texttt{01110}$$\n\n对于第二个询问串 $\\texttt{10010}$，可以依次进行操作 $1,3$，得到最优的 $S'$：\n\n$$\\texttt{10010}\\to \\texttt{11001}\\to \\texttt{11010}$$\n\n对于第三个询问串 $\\texttt{00101}$，可以依次进行操作 $3,2$，得到最优的 $S'$：\n\n$$\\texttt{00101}\\to \\texttt{00010}\\to \\texttt{01110}$$\n\n---\n\n**【数据范围】**\n\n对于全部数据：$1\\leq m\\leq 22$，$1\\leq n,q\\leq 10^5$，$T$ 仅包含 $\\texttt{0,1,-}$ 三种字符，$S$ 仅包含 $\\texttt{0,1}$ 两种字符。\n\n|     子任务编号     | $m\\leq$ | $n\\leq$ | $q\\leq$ |         特殊性质          | 分值 |\n| :----------------: | :-----: | :-----: | :-----: | :-----------------------: | :--: |\n| $\\text{Subtask 1}$ |  $10$   | $1000$  |   $1$   |            无             | $10$ |\n| $\\text{Subtask 2}$ |  $10$   | $1000$  | $1000$  |            无             | $20$ |\n| $\\text{Subtask 3}$ |  $20$   | $10^5$  | $10^5$  | $T$ 中没有 $\\texttt{-}$ | $10$ |\n| $\\text{Subtask 4}$ |  $18$   | $10000$ |   $10$   |            无             | $18$ |\n| $\\text{Subtask 5}$ |  $20$   | $10^5$  |   $10$   |            无             | $18$ |\n| $\\text{Subtask 6}$ |  $22$   | $10^5$  | $10^5$  |            无             | $24$ |\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/793whkzq.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "紫丁香", "background": "", "description": "对于一个字符串 $A$，记 $A_i$ 表示它的第 $i$ 个字符。\n\n设 $S$ 是任意长度为 $m$ 的 $01$ 串。我们有 $n$ 个操作，第 $i$ 个操作可以表示成一个定义域和值域都是长度为 $m$ 的 $01$ 串集合的函数 $f_i$，表示经过这次操作后 $S$ 会变成 $f_i(S)$。而函数 $f_i$ 可以由一个长度为 $m$ 的串 $T_i$ 表示，$T_i$ 由 $\\texttt{0,1,-}$ 三种字符组成，其中：\n\n- $T_{i,j}=\\texttt{0}$ 表示 $[f_i(S)]_j=\\texttt{0}$。\n\n- $T_{i,j}=\\texttt{1}$ 表示 $[f_i(S)]_j=\\texttt{1}$。\n\n- $T_{i,j}=\\texttt{-}$ 表示 $[f_i(S)]_j=S_j$。\n\n也就是说，每个操作会将 $S$ 的一些位赋值为 $0$，一些位赋值为 $1$，还有一些位不变。\n\n现在有 $q$ 次操作，每次操作给定一个长度为 $m$ 的 $01$ 串 $S$，你可以对它做任意多次操作，操作的顺序任意，一个操作可以做多次。得到的串 $S'$ 可以被看做一个二进制数，求对应二进制数最大的 $S'$。", "inputFormat": "第一行：三个整数 $m,n,q$。\n\n接下来 $n$ 行：每行一个长度为 $m$ 的串 $T$，表示一种操作。\n\n接下来 $q$ 行：每行一个长度为 $m$ 的串 $S$，表示一个询问。", "outputFormat": "输出 $q$ 行：每行一个长度为 $m$ 的串，依次表示每个询问的答案。", "hint": "**【样例解释】**\n\n对于第一个询问串 $\\texttt{00000}$，可以依次进行操作 $3,2$，得到最优的 $S'$：\n\n$$\\texttt{00000}\\to \\texttt{00010}\\to \\texttt{01110}$$\n\n对于第二个询问串 $\\texttt{10010}$，可以依次进行操作 $1,3$，得到最优的 $S'$：\n\n$$\\texttt{10010}\\to \\texttt{11001}\\to \\texttt{11010}$$\n\n对于第三个询问串 $\\texttt{00101}$，可以依次进行操作 $3,2$，得到最优的 $S'$：\n\n$$\\texttt{00101}\\to \\texttt{00010}\\to \\texttt{01110}$$\n\n---\n\n**【数据范围】**\n\n对于全部数据：$1\\leq m\\leq 22$，$1\\leq n,q\\leq 10^5$，$T$ 仅包含 $\\texttt{0,1,-}$ 三种字符，$S$ 仅包含 $\\texttt{0,1}$ 两种字符。\n\n|     子任务编号     | $m\\leq$ | $n\\leq$ | $q\\leq$ |         特殊性质          | 分值 |\n| :----------------: | :-----: | :-----: | :-----: | :-----------------------: | :--: |\n| $\\text{Subtask 1}$ |  $10$   | $1000$  |   $1$   |            无             | $10$ |\n| $\\text{Subtask 2}$ |  $10$   | $1000$  | $1000$  |            无             | $20$ |\n| $\\text{Subtask 3}$ |  $20$   | $10^5$  | $10^5$  | $T$ 中没有 $\\texttt{-}$ | $10$ |\n| $\\text{Subtask 4}$ |  $18$   | $10000$ |   $10$   |            无             | $18$ |\n| $\\text{Subtask 5}$ |  $20$   | $10^5$  |   $10$   |            无             | $18$ |\n| $\\text{Subtask 6}$ |  $22$   | $10^5$  | $10^5$  |            无             | $24$ |\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/793whkzq.png)", "locale": "zh-CN"}}}
{"pid": "P9394", "type": "P", "difficulty": 7, "samples": [["7 7\n1 2\n1 3\n1 5\n1 6\n4 5\n5 6\n6 7\n", "2 5\n1 2\n2 1 3\n2 5 4\n1 6\n1 7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "白鹭兰", "background": "", "description": "有很多有关火星人的传说，比如他们的 DNA 非常复杂，他们有成千上万根手指等等，但这些都没有得到证实。同样没有得到证实的一个传说是火星人很会做 OI 题。\n\n为了验证最后这个传说，地球人们给来自火星的外星旅人出了一道 OI 题：\n\n> 给定一张 $n$ 个点 $m$ 条边的无向连通图 $G=(V,E)$，请找出最小的 $k$ 使得存在一个对点集的划分 $V_1,\\ldots,V_t$ 使得：\n>\n> - $\\forall 1\\leq x\\leq t$，$\\bigcup_{i=1}^x V_i$ 的导出子图连通；\n>\n> - $\\forall 1\\leq x\\leq t$，$\\bigcup_{i=x}^t V_i$ 的导出子图连通；\n>\n> - $\\forall 1\\leq x\\leq t$，$|V_x|\\leq k$。\n>\n> 注意，作为划分，还需要满足 $\\bigcup_{i=1}^t V_i=V$，$ V_i\\cap V_j=\\varnothing\\ (\\forall i\\neq j)$，且所有 $V_i$ 非空。\n>\n> 请给出最小的 $k$ 以及对应的划分。\n\n再见，You're 火星人。现在你需要完成这道题，证明火星人的智慧。", "inputFormat": "第一行：两个整数 $n,m$，分别表示图 $G$ 的结点数和边数。\n\n接下来 $m$ 行：每行两个整数 $x,y$，表示一条连接结点 $x,y$ 的无向边。", "outputFormat": "第一行：两个整数 $k_{min},t$，分别表示最小的 $k$ 以及对应的划分大小。\n\n接下来 $t$ 行：第 $i$ 行首先一个整数 $s_i$，表示 $V_i$ 的大小，然后 $s_i$ 个整数表示 $V_i$ 的元素。\n\n如有多种划分方案，可以任意输出一种，注意你并不需要最小化 $t$。", "hint": "**【样例解释】**\n\n如下图，$V_1,\\ldots,V_5$ 分别是红色/橙色/绿色/蓝色/紫色点集，可以验证这满足题目条件。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/omc7gvxe.png)\n\n--- \n\n**【评分方式】**\n\n如果你的输出格式错误，将有可能不得分，也可能导致不可预知的错误。\n\n如果你的输出格式正确，若你的 $k_{min}$ 正确，你将获得测试点 $50\\%$ 的分数，若在此基础上你的构造方案正确，你将获得测试点 $100\\%$ 的分数。\n\n---\n\n**【数据范围】**\n\n对于全部数据：$2\\leq n\\leq 2\\times 10^5$，$1\\leq m\\leq 2.3\\times 10^5$，$1\\leq x,y\\leq n$，保证给出的 $m$ 条边中没有重边和自环，保证给出的图连通。\n\n|     子任务编号     | $m\\leq$ |        特殊限制        | 分值 |\n| :----------------: | :-------------: | :--------------------: | :--: |\n| $\\text{Subtask 1}$ |     $2\\times 10^5$     | $G$ 是链 | $10$ |\n| $\\text{Subtask 2}$ |      $10$       |         无          | $10$ |\n| $\\text{Subtask 3}$ |     $2000$      |         $G$ 是树          | $15$ |\n| $\\text{Subtask 4}$ |     $2000$      |         无          | $20$ |\n| $\\text{Subtask 5}$ |      $10^5$      |           $G$ 是树           | $15$ |\n| $\\text{Subtask 6}$ |     $2.3\\times 10^5$     |           无           | $30$ |\n\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/41etnpdx.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "白鹭兰", "background": "", "description": "有很多有关火星人的传说，比如他们的 DNA 非常复杂，他们有成千上万根手指等等，但这些都没有得到证实。同样没有得到证实的一个传说是火星人很会做 OI 题。\n\n为了验证最后这个传说，地球人们给来自火星的外星旅人出了一道 OI 题：\n\n> 给定一张 $n$ 个点 $m$ 条边的无向连通图 $G=(V,E)$，请找出最小的 $k$ 使得存在一个对点集的划分 $V_1,\\ldots,V_t$ 使得：\n>\n> - $\\forall 1\\leq x\\leq t$，$\\bigcup_{i=1}^x V_i$ 的导出子图连通；\n>\n> - $\\forall 1\\leq x\\leq t$，$\\bigcup_{i=x}^t V_i$ 的导出子图连通；\n>\n> - $\\forall 1\\leq x\\leq t$，$|V_x|\\leq k$。\n>\n> 注意，作为划分，还需要满足 $\\bigcup_{i=1}^t V_i=V$，$ V_i\\cap V_j=\\varnothing\\ (\\forall i\\neq j)$，且所有 $V_i$ 非空。\n>\n> 请给出最小的 $k$ 以及对应的划分。\n\n再见，You're 火星人。现在你需要完成这道题，证明火星人的智慧。", "inputFormat": "第一行：两个整数 $n,m$，分别表示图 $G$ 的结点数和边数。\n\n接下来 $m$ 行：每行两个整数 $x,y$，表示一条连接结点 $x,y$ 的无向边。", "outputFormat": "第一行：两个整数 $k_{min},t$，分别表示最小的 $k$ 以及对应的划分大小。\n\n接下来 $t$ 行：第 $i$ 行首先一个整数 $s_i$，表示 $V_i$ 的大小，然后 $s_i$ 个整数表示 $V_i$ 的元素。\n\n如有多种划分方案，可以任意输出一种，注意你并不需要最小化 $t$。", "hint": "**【样例解释】**\n\n如下图，$V_1,\\ldots,V_5$ 分别是红色/橙色/绿色/蓝色/紫色点集，可以验证这满足题目条件。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/omc7gvxe.png)\n\n--- \n\n**【评分方式】**\n\n如果你的输出格式错误，将有可能不得分，也可能导致不可预知的错误。\n\n如果你的输出格式正确，若你的 $k_{min}$ 正确，你将获得测试点 $50\\%$ 的分数，若在此基础上你的构造方案正确，你将获得测试点 $100\\%$ 的分数。\n\n---\n\n**【数据范围】**\n\n对于全部数据：$2\\leq n\\leq 2\\times 10^5$，$1\\leq m\\leq 2.3\\times 10^5$，$1\\leq x,y\\leq n$，保证给出的 $m$ 条边中没有重边和自环，保证给出的图连通。\n\n|     子任务编号     | $m\\leq$ |        特殊限制        | 分值 |\n| :----------------: | :-------------: | :--------------------: | :--: |\n| $\\text{Subtask 1}$ |     $2\\times 10^5$     | $G$ 是链 | $10$ |\n| $\\text{Subtask 2}$ |      $10$       |         无          | $10$ |\n| $\\text{Subtask 3}$ |     $2000$      |         $G$ 是树          | $15$ |\n| $\\text{Subtask 4}$ |     $2000$      |         无          | $20$ |\n| $\\text{Subtask 5}$ |      $10^5$      |           $G$ 是树           | $15$ |\n| $\\text{Subtask 6}$ |     $2.3\\times 10^5$     |           无           | $30$ |\n\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/41etnpdx.png)", "locale": "zh-CN"}}}
{"pid": "P9395", "type": "P", "difficulty": 7, "samples": [["6\n3\n1 1 1\n3\n1 1 2\n3\n1 1 3\n3\n1 2 1\n3\n1 2 2\n3\n1 2 3\n", "1 2 3\n2 3 3\n-1\n2 2 3\n-1\n3 3 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "橙垒球", "background": "", "description": "垒球很喜欢一个叫迷你某·萨菲克斯的题，并且很崇拜这题的出题人，所以出了个差不多的题。\n\n给定一个长度为 $n$ 的序列 $a_1,\\ldots,a_n$，请构造一个**字典序最大**的长度为 $n$ 的字符串 $w$，使得：\n\n- $w$ 的每个字符是 $1$ 到 $n$ 的整数，字符的大小顺序为 $1$ 最小 $n$ 最大；\n\n- $w$ 的长度为 $i$ 的前缀的**字典序最大的后缀**长度恰为 $a_i$。\n\n请输出这样的 $w$，或报告无解。\n\n本题单个测试点包含多组数据。", "inputFormat": "第一行：一个整数 $T$，表示数据组数。\n\n接下来依次输入 $T$ 组数据，对于每组数据：\n\n第一行：一个整数 $n$。\n\n第二行：$n$ 个整数 $a_1,\\ldots,a_n$。", "outputFormat": "对于每组数据：\n\n若无解，只输出一行一个 $-1$。\n\n若有解，则输出一行 $n$ 个整数，表示你给出的 $w$。", "hint": "**【样例解释】**\n\n字符串 $1,2,3$ 的每个前缀的最大后缀长度恰好为 $1,1,1$，且是满足这个条件的字典序最大的字符串。\n\n字符串 $2,3,3$ 的每个前缀的最大后缀长度恰好为 $1,1,2$，且是满足这个条件的字典序最大的字符串。\n\n不存在一个字符串，每个前缀的最大后缀长度恰好为 $1,1,3$。\n\n字符串 $2,2,3$ 的每个前缀的最大后缀长度恰好为 $1,2,1$，且是满足这个条件的字典序最大的字符串。\n\n不存在一个字符串，每个前缀的最大后缀长度恰好为 $1,2,2$。\n\n字符串 $3,3,3$ 的每个前缀的最大后缀长度恰好为 $1,2,3$，且是满足这个条件的字典序最大的字符串。\n\n---\n\n**【评分方式】**\n\n每个测试点的分数等于其中所有测试数据分数的最小值。一个测试数据的分数由以下方式确定：\n\n如果你的输出格式错误（即不符合输出格式的要求），则不能得分。\n\n否则，如果你正确判定了是否有解（即在无解的数据输出 $-1$，有解的数据输出了 $n$ 个 $[1,n]$ 中的数），则可以获得 $20\\%$ 的分数。\n\n在此基础上，如果该测试点无解，或者有解且你输出的是一组合法解（未必是字典序最大的），则可以再获得 $30\\%$ 的分数。\n\n在此基础上，如果该测试点无解，或者有解且你输出的是字典序最大的解，则可以再获得 $50\\%$ 的分数。\n\n---\n\n**【数据范围】**\n\n对于全部数据：$1\\leq T\\leq 10000$，$1 \\le n \\le 4 \\times 10 ^ 6$，$\\sum n\\leq 4\\times 10^6$，$1\\leq a_i\\leq i$。\n\n|     子任务编号     |  $\\sum n\\leq$  | 特殊性质 | 分值 |\n| :----------------: | :------------: | :------: | :--: |\n| $\\text{Subtask 1}$ | $4\\times 10^6$ | 保证无解 | $1$  |\n| $\\text{Subtask 2}$ | $4\\times 10^5$ | 保证有解 | $29$ |\n| $\\text{Subtask 3}$ | $4\\times 10^6$ |    无    | $70$ |\n\n---\n\n**【提示】**\n\n请使用较快速的输入输出方式。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5ofelxu1.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "橙垒球", "background": "", "description": "垒球很喜欢一个叫迷你某·萨菲克斯的题，并且很崇拜这题的出题人，所以出了个差不多的题。\n\n给定一个长度为 $n$ 的序列 $a_1,\\ldots,a_n$，请构造一个**字典序最大**的长度为 $n$ 的字符串 $w$，使得：\n\n- $w$ 的每个字符是 $1$ 到 $n$ 的整数，字符的大小顺序为 $1$ 最小 $n$ 最大；\n\n- $w$ 的长度为 $i$ 的前缀的**字典序最大的后缀**长度恰为 $a_i$。\n\n请输出这样的 $w$，或报告无解。\n\n本题单个测试点包含多组数据。", "inputFormat": "第一行：一个整数 $T$，表示数据组数。\n\n接下来依次输入 $T$ 组数据，对于每组数据：\n\n第一行：一个整数 $n$。\n\n第二行：$n$ 个整数 $a_1,\\ldots,a_n$。", "outputFormat": "对于每组数据：\n\n若无解，只输出一行一个 $-1$。\n\n若有解，则输出一行 $n$ 个整数，表示你给出的 $w$。", "hint": "**【样例解释】**\n\n字符串 $1,2,3$ 的每个前缀的最大后缀长度恰好为 $1,1,1$，且是满足这个条件的字典序最大的字符串。\n\n字符串 $2,3,3$ 的每个前缀的最大后缀长度恰好为 $1,1,2$，且是满足这个条件的字典序最大的字符串。\n\n不存在一个字符串，每个前缀的最大后缀长度恰好为 $1,1,3$。\n\n字符串 $2,2,3$ 的每个前缀的最大后缀长度恰好为 $1,2,1$，且是满足这个条件的字典序最大的字符串。\n\n不存在一个字符串，每个前缀的最大后缀长度恰好为 $1,2,2$。\n\n字符串 $3,3,3$ 的每个前缀的最大后缀长度恰好为 $1,2,3$，且是满足这个条件的字典序最大的字符串。\n\n---\n\n**【评分方式】**\n\n每个测试点的分数等于其中所有测试数据分数的最小值。一个测试数据的分数由以下方式确定：\n\n如果你的输出格式错误（即不符合输出格式的要求），则不能得分。\n\n否则，如果你正确判定了是否有解（即在无解的数据输出 $-1$，有解的数据输出了 $n$ 个 $[1,n]$ 中的数），则可以获得 $20\\%$ 的分数。\n\n在此基础上，如果该测试点无解，或者有解且你输出的是一组合法解（未必是字典序最大的），则可以再获得 $30\\%$ 的分数。\n\n在此基础上，如果该测试点无解，或者有解且你输出的是字典序最大的解，则可以再获得 $50\\%$ 的分数。\n\n---\n\n**【数据范围】**\n\n对于全部数据：$1\\leq T\\leq 10000$，$1 \\le n \\le 4 \\times 10 ^ 6$，$\\sum n\\leq 4\\times 10^6$，$1\\leq a_i\\leq i$。\n\n|     子任务编号     |  $\\sum n\\leq$  | 特殊性质 | 分值 |\n| :----------------: | :------------: | :------: | :--: |\n| $\\text{Subtask 1}$ | $4\\times 10^6$ | 保证无解 | $1$  |\n| $\\text{Subtask 2}$ | $4\\times 10^5$ | 保证有解 | $29$ |\n| $\\text{Subtask 3}$ | $4\\times 10^6$ |    无    | $70$ |\n\n---\n\n**【提示】**\n\n请使用较快速的输入输出方式。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5ofelxu1.png)", "locale": "zh-CN"}}}
{"pid": "P9396", "type": "P", "difficulty": 3, "samples": [["1 114514 1919810 19950501 5", "35"], ["5 231421 523434 31243 5", "50\n30\n40\n55\n35"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化"], "title": "「DBOI」Round 1 未完成的约定", "background": ">  _生活快得停不下来_\\\n_璀璨的也最终衰败_\\\n_他感到负荷已过载_\\\n_车窗外_\\\n_天上大朵云彩_\\\n_追随他的速度跑得飞快_\\\n_不由自主比赛_\\\n——《笨小孩的道歉信》\n\n不管多少个日夜，为你一直唱。", "description": "$m^3$ 可以表示为 $m$ 个连续奇数的和 $(m \\geqslant 1)$：  \n$$\n1^3 = 1\\\\\n2^3 = 3 + 5\\\\\n3^3 = 7 + 9 + 11\\\\\n4^3 = 13 + 15 + 17 + 19\\\\\n5^3 = 21 + 23 + 25 + 27 + 29\\\\\n\\cdots\\cdots\n$$\n\n在左昂对奇数的狂热崇拜的影响下，苏信好写出来的歌只会是奇数长度。显然歌曲的长度不能是负数。\n\n对于一首长度为 $x$ 的歌，它的悦耳值 $f(x)$ 满足将 $f(x)^3$ 按照上面的规律表示出来后，$x$ 是其中的一个加数。例如 $f(21) = 5, f(11) = 3,f(3) = 2$。\n\n第二天，左昂前来参观，发现苏信好只写出来了一首歌，鄙夷不已。苏信好怒从心起，写出了以 $1\\sim k$ 内所有长度为奇数的歌。\n\n现在左昂想要知道苏信好所有歌的悦耳值之和，以预估他的狂热崇拜的效果。即：给定一个正奇数 $k(1\\leqslant k< 2^{64})$，求 $s = \\sum\\limits_{i = 1}^{\\frac{k + 1}{2}} f(2\\times i - 1)$，即 $f(1) + f(3) + f(5) + \\cdots +f(k)$。  \n\n由于苏信好实在太生气，写出来的歌的悦耳值可能十分之大，你只需要输出 $s\\bmod{10^9 + 7}$ 的结果。\n\n**本题有多组数据。**", "inputFormat": "为避免输入量过大，你需要使用下面的方式读入，因此请将这段代码复制到你的代码中。**下列程序与此题做法无关，请仔细阅读示例代码中的注释。**\n\n```cpp\nnamespace Mker {\n\ttypedef unsigned long long ull;\n\tull SA, SB, SC, p = -1;\n\tint base;\n\tvoid init(){scanf(\"%llu%llu%llu%d\", &SA, &SB, &SC, &base); p = p << (65 - base) >> (65 - base);}\n\tull rand() {\n\t\tull now = SC; now += !(now & 1);\n\t    SA ^= SA << 32, SA ^= SA >> 13, SA ^= SA << 1;\n\t    ull t = SA;\n\t\treturn SA = SB, SB = SC, SC ^= t ^ SA, (now & p) + p + 1;\n\t}\n}\n```\n先读入一个数 $T$，表示数据组数，然后你**需要调用** `Mker::init()`。这个函数将输入四个数 $SA,SB,SC,base$，表示对于这组数据，$k<2^{base}$。\n\n接下来，对于每一组询问，你应当令 $k$ 的值即为 `Mker::rand()`。\n\n示例代码：\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint T;\n\nnamespace Mker {\n\ttypedef unsigned long long ull;\n\tull SA, SB, SC, p = -1;\n\tint base;\n\tvoid init(){scanf(\"%llu%llu%llu%d\", &SA, &SB, &SC, &base); p = p << (65 - base) >> (65 - base);}\n\tull rand() {\n\t\tull now = SC; now += !(now & 1);\n\t    SA ^= SA << 32, SA ^= SA >> 13, SA ^= SA << 1;\n\t    ull t = SA;\n\t\treturn SA = SB, SB = SC, SC ^= t ^ SA, (now & p) + p + 1;\n\t}\n}\n\nint main() {\n\tscanf(\"%d\", &T); Mker::init(); // 不要忘记 init\n//\tcout << Mker::base << endl; 你可以通过这种方式输出得到 base 的值 \n\twhile (T--) {\n\t\tunsigned long long k = Mker::rand(); // 通过这种方式，获得一次询问的 k\n\t\tif (k == 1) puts(\"1\");\n\t\telse if (k == 17) puts(\"26\");\n\t\telse puts(\"I AK IOI\");\n\t\t\n//\t\tcout << k << endl; 你可以通过这种方式输出得到真实的 k 以调试代码 \n\t}\n\treturn 0;\n}\n```", "outputFormat": "$T$ 行，每行一个数 $s\\bmod{10^9 + 7}$，其中 $s$ 表示苏信好的歌的悦耳值之和。", "hint": "\n|  Subtask |  数据范围  | 分值 |\n|:----:|:----:|:----:|\n| Subtask 1 | $T=1$，$k< 2^{25}$ | $20$ |\n| Subtask 2 | $T\\leq 5$，$k< 2^{48}$ | $30$ |\n| Subtask 3 | $T\\leq 10^6$，$k < 2^{48}$ | $40$ |\n| Subtask 4 | $T\\leq 3\\times 10^6$，$k < 2^{64}$ | $10$ |\n\n**请注意常数因子对程序效率的影响。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DBOI」Round 1 未完成的约定", "background": ">  _生活快得停不下来_\\\n_璀璨的也最终衰败_\\\n_他感到负荷已过载_\\\n_车窗外_\\\n_天上大朵云彩_\\\n_追随他的速度跑得飞快_\\\n_不由自主比赛_\\\n——《笨小孩的道歉信》\n\n不管多少个日夜，为你一直唱。", "description": "$m^3$ 可以表示为 $m$ 个连续奇数的和 $(m \\geqslant 1)$：  \n$$\n1^3 = 1\\\\\n2^3 = 3 + 5\\\\\n3^3 = 7 + 9 + 11\\\\\n4^3 = 13 + 15 + 17 + 19\\\\\n5^3 = 21 + 23 + 25 + 27 + 29\\\\\n\\cdots\\cdots\n$$\n\n在左昂对奇数的狂热崇拜的影响下，苏信好写出来的歌只会是奇数长度。显然歌曲的长度不能是负数。\n\n对于一首长度为 $x$ 的歌，它的悦耳值 $f(x)$ 满足将 $f(x)^3$ 按照上面的规律表示出来后，$x$ 是其中的一个加数。例如 $f(21) = 5, f(11) = 3,f(3) = 2$。\n\n第二天，左昂前来参观，发现苏信好只写出来了一首歌，鄙夷不已。苏信好怒从心起，写出了以 $1\\sim k$ 内所有长度为奇数的歌。\n\n现在左昂想要知道苏信好所有歌的悦耳值之和，以预估他的狂热崇拜的效果。即：给定一个正奇数 $k(1\\leqslant k< 2^{64})$，求 $s = \\sum\\limits_{i = 1}^{\\frac{k + 1}{2}} f(2\\times i - 1)$，即 $f(1) + f(3) + f(5) + \\cdots +f(k)$。  \n\n由于苏信好实在太生气，写出来的歌的悦耳值可能十分之大，你只需要输出 $s\\bmod{10^9 + 7}$ 的结果。\n\n**本题有多组数据。**", "inputFormat": "为避免输入量过大，你需要使用下面的方式读入，因此请将这段代码复制到你的代码中。**下列程序与此题做法无关，请仔细阅读示例代码中的注释。**\n\n```cpp\nnamespace Mker {\n\ttypedef unsigned long long ull;\n\tull SA, SB, SC, p = -1;\n\tint base;\n\tvoid init(){scanf(\"%llu%llu%llu%d\", &SA, &SB, &SC, &base); p = p << (65 - base) >> (65 - base);}\n\tull rand() {\n\t\tull now = SC; now += !(now & 1);\n\t    SA ^= SA << 32, SA ^= SA >> 13, SA ^= SA << 1;\n\t    ull t = SA;\n\t\treturn SA = SB, SB = SC, SC ^= t ^ SA, (now & p) + p + 1;\n\t}\n}\n```\n先读入一个数 $T$，表示数据组数，然后你**需要调用** `Mker::init()`。这个函数将输入四个数 $SA,SB,SC,base$，表示对于这组数据，$k<2^{base}$。\n\n接下来，对于每一组询问，你应当令 $k$ 的值即为 `Mker::rand()`。\n\n示例代码：\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint T;\n\nnamespace Mker {\n\ttypedef unsigned long long ull;\n\tull SA, SB, SC, p = -1;\n\tint base;\n\tvoid init(){scanf(\"%llu%llu%llu%d\", &SA, &SB, &SC, &base); p = p << (65 - base) >> (65 - base);}\n\tull rand() {\n\t\tull now = SC; now += !(now & 1);\n\t    SA ^= SA << 32, SA ^= SA >> 13, SA ^= SA << 1;\n\t    ull t = SA;\n\t\treturn SA = SB, SB = SC, SC ^= t ^ SA, (now & p) + p + 1;\n\t}\n}\n\nint main() {\n\tscanf(\"%d\", &T); Mker::init(); // 不要忘记 init\n//\tcout << Mker::base << endl; 你可以通过这种方式输出得到 base 的值 \n\twhile (T--) {\n\t\tunsigned long long k = Mker::rand(); // 通过这种方式，获得一次询问的 k\n\t\tif (k == 1) puts(\"1\");\n\t\telse if (k == 17) puts(\"26\");\n\t\telse puts(\"I AK IOI\");\n\t\t\n//\t\tcout << k << endl; 你可以通过这种方式输出得到真实的 k 以调试代码 \n\t}\n\treturn 0;\n}\n```", "outputFormat": "$T$ 行，每行一个数 $s\\bmod{10^9 + 7}$，其中 $s$ 表示苏信好的歌的悦耳值之和。", "hint": "\n|  Subtask |  数据范围  | 分值 |\n|:----:|:----:|:----:|\n| Subtask 1 | $T=1$，$k< 2^{25}$ | $20$ |\n| Subtask 2 | $T\\leq 5$，$k< 2^{48}$ | $30$ |\n| Subtask 3 | $T\\leq 10^6$，$k < 2^{48}$ | $40$ |\n| Subtask 4 | $T\\leq 3\\times 10^6$，$k < 2^{64}$ | $10$ |\n\n**请注意常数因子对程序效率的影响。**", "locale": "zh-CN"}}}
{"pid": "P9397", "type": "P", "difficulty": 2, "samples": [["4\n1 3\n2 2\n2 1\n3 4", "2\n1 4\n2 3"], ["6\n1 5\n2 3\n2 4\n2 5\n2 -1\n3 -3", "2\n1 3\n4 6\n2 5"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "Special Judge", "O2优化", "排序", "构造"], "title": "「DBOI」Round 1 DTTM", "background": "张则雨和穆制程坐在天台上看着满天的星辰。在他们的世界，流行一种连接星星的活动。他们对此有一种浪漫的诠释：如果连不完，剩下的一颗星星就是身旁的人；如果连得完，那身边的人和自己都是星星。", "description": "星空中有 $n$ 颗星星，第 $i$ 颗位于坐标 $(x_i,y_i)$。你需要把星星连接成满足张则雨的如下需求：\n\n- 每一颗星星都是且仅是一条线段的端点，所有线段互不相交（包括端点）。\n- 所有线段左右端点 $|x_l-x_r|$ 之和有最小值。 \n\n然而张则雨有点笨，并不知道应该怎么连。穆制程知道你是地球上最聪明的人，于是告诉你 $n$ 颗星星的坐标，你需要输出连接方案或者报告无解。", "inputFormat": "第一行 $n$ 表示星星的数量。\n\n从第二行开始，共 $n$ 行，每行两个整数。第 $i+1$ 行表示第 $i$ 颗星星的 $(x_i,y_i)$ 坐标。 ", "outputFormat": "第一行输出所有线段左右端点 $|x_l-x_r|$ 的和的最小值。\n\n接下来每一行输出两个编号，表示为了得到最小值，你每条线段连接的星星的编号。\n\n如果有多种可能的连接方案，输出任意一种。如果无解在第一行输出 $-1$。", "hint": "样例 1 的方案如图：\n\n![](https://s1.ax1x.com/2023/04/06/ppomH5q.png)\n\n样例 2 的方案如图：\n\n![](https://s1.ax1x.com/2023/04/06/ppomDDH.png)\n\n**本题使用捆绑测试与子任务依赖。**\n\n| $\\rm Subtask$ | $n\\leqslant$ | $(x,y)$ | 特殊性质 | 得分 | 子任务依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $10$ | $0\\leqslant x,y\\leqslant 20$ | 无 | $10$ | 无 |\n| $2$ | $10^3$ | $0\\leqslant x,y\\leqslant10^3$ | 无 | $15$ | $1$ |\n| $3$ | $10^3$ | $0\\leqslant x,y\\leqslant10^9$ | 无 | $15$ | $1,2$ |\n| $4$ | $5\\times10^5$ |$-10^9\\leqslant x,y\\leqslant10^9$  | $A$ | $5$ | 无 |\n| $5$ | $5\\times10^5$ | $-10^3\\leqslant x,y\\leqslant10^3$ | 无 | $20$ | $1,2$\n| $6$ | $5\\times10^5$ | $-10^9\\leqslant x,y\\leqslant10^9$ | 无 | $35$ | $1,2,3,4,5$\n\n\n特殊性质 $A$：满足所有 $x_i$ 都相等。\n\n保证对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant5\\times 10^5$，$0\\leqslant|x|,|y|\\leqslant 10^9$ 且对于任意 $i\\ne j$，有 $(x_i,y_i)\\neq (x_j,y_j)$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DBOI」Round 1 DTTM", "background": "张则雨和穆制程坐在天台上看着满天的星辰。在他们的世界，流行一种连接星星的活动。他们对此有一种浪漫的诠释：如果连不完，剩下的一颗星星就是身旁的人；如果连得完，那身边的人和自己都是星星。", "description": "星空中有 $n$ 颗星星，第 $i$ 颗位于坐标 $(x_i,y_i)$。你需要把星星连接成满足张则雨的如下需求：\n\n- 每一颗星星都是且仅是一条线段的端点，所有线段互不相交（包括端点）。\n- 所有线段左右端点 $|x_l-x_r|$ 之和有最小值。 \n\n然而张则雨有点笨，并不知道应该怎么连。穆制程知道你是地球上最聪明的人，于是告诉你 $n$ 颗星星的坐标，你需要输出连接方案或者报告无解。", "inputFormat": "第一行 $n$ 表示星星的数量。\n\n从第二行开始，共 $n$ 行，每行两个整数。第 $i+1$ 行表示第 $i$ 颗星星的 $(x_i,y_i)$ 坐标。 ", "outputFormat": "第一行输出所有线段左右端点 $|x_l-x_r|$ 的和的最小值。\n\n接下来每一行输出两个编号，表示为了得到最小值，你每条线段连接的星星的编号。\n\n如果有多种可能的连接方案，输出任意一种。如果无解在第一行输出 $-1$。", "hint": "样例 1 的方案如图：\n\n![](https://s1.ax1x.com/2023/04/06/ppomH5q.png)\n\n样例 2 的方案如图：\n\n![](https://s1.ax1x.com/2023/04/06/ppomDDH.png)\n\n**本题使用捆绑测试与子任务依赖。**\n\n| $\\rm Subtask$ | $n\\leqslant$ | $(x,y)$ | 特殊性质 | 得分 | 子任务依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $10$ | $0\\leqslant x,y\\leqslant 20$ | 无 | $10$ | 无 |\n| $2$ | $10^3$ | $0\\leqslant x,y\\leqslant10^3$ | 无 | $15$ | $1$ |\n| $3$ | $10^3$ | $0\\leqslant x,y\\leqslant10^9$ | 无 | $15$ | $1,2$ |\n| $4$ | $5\\times10^5$ |$-10^9\\leqslant x,y\\leqslant10^9$  | $A$ | $5$ | 无 |\n| $5$ | $5\\times10^5$ | $-10^3\\leqslant x,y\\leqslant10^3$ | 无 | $20$ | $1,2$\n| $6$ | $5\\times10^5$ | $-10^9\\leqslant x,y\\leqslant10^9$ | 无 | $35$ | $1,2,3,4,5$\n\n\n特殊性质 $A$：满足所有 $x_i$ 都相等。\n\n保证对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant5\\times 10^5$，$0\\leqslant|x|,|y|\\leqslant 10^9$ 且对于任意 $i\\ne j$，有 $(x_i,y_i)\\neq (x_j,y_j)$。", "locale": "zh-CN"}}}
{"pid": "P9398", "type": "P", "difficulty": 6, "samples": [["14 5\n1 2\n1 3\n4 1\n5 2\n2 6\n3 7\n3 8\n9 4\n12 6\n11 6\n6 10\n8 13\n14 8\n2 3\n10 0\n7 1\n13 1\n14 0\n10\nZ 2 5\nH 14\nZ 7 3\nZ 7 1\nH 6\nZ 1 9\nH 1\nH 8\nH 12\nZ 10 1", "665340330"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "O2优化", "树论", "组合数学", "排列组合", "期望"], "title": "「DBOI」Round 1 烟花", "background": "回忆本身就是惩罚，惩罚那些不愿往前走的人，将他们困在那条小巷子里，怎么也走不出去。\n\n每一年都有烟花，唯独那一年的烟花最好看。\n\n“我要对烟花许愿，许我们永远在一起。”\n\n“就算不许愿，我们也会永远在一起的。”\n\n再后来，死了的人被葬在了那座山上，活着的人被记忆困在了那条巷中。今天的我们听到这个故事，只是想再放一次故事里的烟花，放给那些再没能陪身旁的人看到一次烟花的人。", "description": "烟花在夜空中绽放连成一片，我们把这些连成一片的烟花看成一棵含有 $n$ 个点的有根树，根为最早点燃的烟花 $1$。\n\n烟花有红蓝两种颜色，为了方便，我们对这棵树黑白染色。最初有 $p$ 个限制，一条限制形如 $(x_i,y_i)$，表示树中编号为 $x_i$ 的点的子树中黑点只能**恰好**有 $y_i$ 个。当年，他们认为满足其**子树内所有有限制点的限制**的子树是**均好的子树**。显然，要想使一个子树成为均好的子树，可能有**多种染色方法**。\n\n你需要回答以下两种询问：\n\n- `Z k c`，表示给点 $k$ 以均等概率在 $[0,c]$ 中选择一个数 $f$，然后给点 $k$ 直接加上 $f$ 个没有限制的儿子，其它儿子状态不变。问点 $k$ 为根的子树成为**均好的子树**的期望染色方法数量。\n- `H k`，表示如果去掉 $k$ 的所有有限制儿子的限制，询问 $k$ 为根的子树成为**均好的子树**的染色方法数量。\n\n我们并没有必要点燃更多的烟花，因此所有的询问都是相互独立的，没有询问会真的影响原树。\n\n我们深知可能复现不了当时完整的情况，历史太过斑驳，可能的烟花组合成千上万，因此你只需要得到答案对 $998244353$ 这个大质数取模的值。", "inputFormat": "第一行两个整数 $n,p$，表示树的节点个数与限制个数。\n\n接下来 $n-1$ 行，每行两个数 $u,v$，表示 $u,v$ 之间有一条直连边。这 $n-1$ 行表示树的结构。\n\n接下来 $p$ 行，每行两个数 $(x_i,y_i)$，表示限制以 $x_i$ 点为根的子树，需要恰好存在 $y_i$ 个黑点在其子树内。\n\n接下来一行一个整数 $q$，表示询问个数。\n\n接下来 $q$ 行，每行一个字符另加 $1$ 或 $2$ 个整数表示题目中说明的询问。", "outputFormat": "为了减小输出量，我们假设第 $i$ 个询问（$i$ 从 $1$ 开始）的答案为 $ans_i$，你只需要输出一行，表示所有询问的 $i\\times ans_i$ 的异或和。最终的异或和以及每一个 $i\\times ans_i$ 都**无需**对 $998244353$ 取模，但每个询问的答案 $ans_i$ 是对其取模后的答案。\n\n**注意：std 不依赖于输出方式。也就是说，std 可以独立获取每一个询问的答案。**", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/523p3yhk.png)\n\n如图为样例 #1 的烟花，构成一个有 $14$ 个点，其中 $5$ 个限制点的树。与题目中不同的是，我们用红色烟花表示限制点，蓝色烟花表示无限制点。红色烟花右上角的浅蓝色数字表示其限制的黑点数量。\n\n初始情况下每一个点为根子树的合法烟花燃放方法数量如下（从左至右第 $i$ 项表示以第 $i$ 个点为根的子树的答案）：\n\n$$\n[320,10,4,4,2,8,1,2,2,1,2,2,1,1]\n$$\n\n下面我们给出询问的答案与部分解释：\n\n- `Z 2 5`，为 $2$ 号点添加 $i$ 个儿子后的 $2$ 号点子树内合法烟花燃放数量表示为此数列的第 $i+1$ 项：$[10,20,35,56,84,120]$。总期望即为 $\\frac{325}{6}$。对 $998244353$ 取模之后得到 $166374113$。\n- `H 14`，由于 $14$ 号点没有儿子，因此答案仍然为 $1$。\n- `Z 7 3`，共有 $10$ 种可能的合法烟花燃放方案，总期望即为 $\\frac{5}{2}$，对 $998244353$ 取模之后得到 $499122179$。\n- `Z 7 1` 的答案为 $499122178$。\n- `H 6` 的答案为 $16$。\n- `Z 1 9` 的答案为 $32736$。\n- `H 1`，去除 $1$ 的所有有限制儿子（仅有节点 $2$）的限制后有 $1024$ 种可能的合法烟花燃放方案。\n- `H 8` 的答案为 $8$。\n- `H 12` 没有儿子，因此答案不变，此询问的答案仍然为 $2$。\n- `Z 10 1` 的答案为 $1$。\n\n最终，所有询问的 $i\\times ans_i$ 的异或和即为 $665340330$。\n\n### 数据范围\n\n**请注意常数因子对程序效率的影响。**\n\n**本题采用捆绑测试与子任务依赖。**\n\n下面定义 $S=3\\times 10^5$。\n\n| $\\rm Subtask$ | $n$ | $q$ | $y_i$ | $c$ | 特殊性质 | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\leqslant 10$ | $\\leqslant 10$ | $\\leqslant 5$ | $\\leqslant 5$ | 无 | $10$ | 无 |\n| $2$ | $\\leqslant 200$  | $\\leqslant 200$ | $\\leqslant 200$ | $\\leqslant 200$ | 无 | $15$ | $1$ |\n| $3$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant 10$ | 无 | $20$ | $1,2$ |\n| $4$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | $A$ | $15$ | 无 |\n| $5$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | $B$ | $20$ | 无 |\n| $6$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | 无 | $20$ | $1,2,3,4,5$ |\n\n特殊性质 $A$：$p=0$。\n\n特殊性质 $B$：满足不存在 `Z` 询问。\n\n对于 $100\\%$ 的数据，存在输入的所有数均为 $\\leqslant S$ 的整数。特别地，存在 $0\\leqslant p\\leqslant n$，输入的任何树的节点编号 $x$ 都满足 $1\\leqslant x \\leqslant n$。保证输入的询问字符都为 `Z` 或 `H`，输入的一定是一棵树。保证对于所有限制存在 $x_i\\neq x_j(i\\neq j)$。\n\n\n------------\n\n冬天的最后一场雪如约而至，很快又要迎来一个新的春天。万物都在等待复苏，可峰城里的一个小巷子，再也不复往日繁荣。\n\n八十多年过去，我们早已找不到当初的巷子，只留下这样一个故事。\n\n感谢你放的烟花。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DBOI」Round 1 烟花", "background": "回忆本身就是惩罚，惩罚那些不愿往前走的人，将他们困在那条小巷子里，怎么也走不出去。\n\n每一年都有烟花，唯独那一年的烟花最好看。\n\n“我要对烟花许愿，许我们永远在一起。”\n\n“就算不许愿，我们也会永远在一起的。”\n\n再后来，死了的人被葬在了那座山上，活着的人被记忆困在了那条巷中。今天的我们听到这个故事，只是想再放一次故事里的烟花，放给那些再没能陪身旁的人看到一次烟花的人。", "description": "烟花在夜空中绽放连成一片，我们把这些连成一片的烟花看成一棵含有 $n$ 个点的有根树，根为最早点燃的烟花 $1$。\n\n烟花有红蓝两种颜色，为了方便，我们对这棵树黑白染色。最初有 $p$ 个限制，一条限制形如 $(x_i,y_i)$，表示树中编号为 $x_i$ 的点的子树中黑点只能**恰好**有 $y_i$ 个。当年，他们认为满足其**子树内所有有限制点的限制**的子树是**均好的子树**。显然，要想使一个子树成为均好的子树，可能有**多种染色方法**。\n\n你需要回答以下两种询问：\n\n- `Z k c`，表示给点 $k$ 以均等概率在 $[0,c]$ 中选择一个数 $f$，然后给点 $k$ 直接加上 $f$ 个没有限制的儿子，其它儿子状态不变。问点 $k$ 为根的子树成为**均好的子树**的期望染色方法数量。\n- `H k`，表示如果去掉 $k$ 的所有有限制儿子的限制，询问 $k$ 为根的子树成为**均好的子树**的染色方法数量。\n\n我们并没有必要点燃更多的烟花，因此所有的询问都是相互独立的，没有询问会真的影响原树。\n\n我们深知可能复现不了当时完整的情况，历史太过斑驳，可能的烟花组合成千上万，因此你只需要得到答案对 $998244353$ 这个大质数取模的值。", "inputFormat": "第一行两个整数 $n,p$，表示树的节点个数与限制个数。\n\n接下来 $n-1$ 行，每行两个数 $u,v$，表示 $u,v$ 之间有一条直连边。这 $n-1$ 行表示树的结构。\n\n接下来 $p$ 行，每行两个数 $(x_i,y_i)$，表示限制以 $x_i$ 点为根的子树，需要恰好存在 $y_i$ 个黑点在其子树内。\n\n接下来一行一个整数 $q$，表示询问个数。\n\n接下来 $q$ 行，每行一个字符另加 $1$ 或 $2$ 个整数表示题目中说明的询问。", "outputFormat": "为了减小输出量，我们假设第 $i$ 个询问（$i$ 从 $1$ 开始）的答案为 $ans_i$，你只需要输出一行，表示所有询问的 $i\\times ans_i$ 的异或和。最终的异或和以及每一个 $i\\times ans_i$ 都**无需**对 $998244353$ 取模，但每个询问的答案 $ans_i$ 是对其取模后的答案。\n\n**注意：std 不依赖于输出方式。也就是说，std 可以独立获取每一个询问的答案。**", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/523p3yhk.png)\n\n如图为样例 #1 的烟花，构成一个有 $14$ 个点，其中 $5$ 个限制点的树。与题目中不同的是，我们用红色烟花表示限制点，蓝色烟花表示无限制点。红色烟花右上角的浅蓝色数字表示其限制的黑点数量。\n\n初始情况下每一个点为根子树的合法烟花燃放方法数量如下（从左至右第 $i$ 项表示以第 $i$ 个点为根的子树的答案）：\n\n$$\n[320,10,4,4,2,8,1,2,2,1,2,2,1,1]\n$$\n\n下面我们给出询问的答案与部分解释：\n\n- `Z 2 5`，为 $2$ 号点添加 $i$ 个儿子后的 $2$ 号点子树内合法烟花燃放数量表示为此数列的第 $i+1$ 项：$[10,20,35,56,84,120]$。总期望即为 $\\frac{325}{6}$。对 $998244353$ 取模之后得到 $166374113$。\n- `H 14`，由于 $14$ 号点没有儿子，因此答案仍然为 $1$。\n- `Z 7 3`，共有 $10$ 种可能的合法烟花燃放方案，总期望即为 $\\frac{5}{2}$，对 $998244353$ 取模之后得到 $499122179$。\n- `Z 7 1` 的答案为 $499122178$。\n- `H 6` 的答案为 $16$。\n- `Z 1 9` 的答案为 $32736$。\n- `H 1`，去除 $1$ 的所有有限制儿子（仅有节点 $2$）的限制后有 $1024$ 种可能的合法烟花燃放方案。\n- `H 8` 的答案为 $8$。\n- `H 12` 没有儿子，因此答案不变，此询问的答案仍然为 $2$。\n- `Z 10 1` 的答案为 $1$。\n\n最终，所有询问的 $i\\times ans_i$ 的异或和即为 $665340330$。\n\n### 数据范围\n\n**请注意常数因子对程序效率的影响。**\n\n**本题采用捆绑测试与子任务依赖。**\n\n下面定义 $S=3\\times 10^5$。\n\n| $\\rm Subtask$ | $n$ | $q$ | $y_i$ | $c$ | 特殊性质 | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\leqslant 10$ | $\\leqslant 10$ | $\\leqslant 5$ | $\\leqslant 5$ | 无 | $10$ | 无 |\n| $2$ | $\\leqslant 200$  | $\\leqslant 200$ | $\\leqslant 200$ | $\\leqslant 200$ | 无 | $15$ | $1$ |\n| $3$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant 10$ | 无 | $20$ | $1,2$ |\n| $4$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | $A$ | $15$ | 无 |\n| $5$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | $B$ | $20$ | 无 |\n| $6$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | $\\leqslant S$ | 无 | $20$ | $1,2,3,4,5$ |\n\n特殊性质 $A$：$p=0$。\n\n特殊性质 $B$：满足不存在 `Z` 询问。\n\n对于 $100\\%$ 的数据，存在输入的所有数均为 $\\leqslant S$ 的整数。特别地，存在 $0\\leqslant p\\leqslant n$，输入的任何树的节点编号 $x$ 都满足 $1\\leqslant x \\leqslant n$。保证输入的询问字符都为 `Z` 或 `H`，输入的一定是一棵树。保证对于所有限制存在 $x_i\\neq x_j(i\\neq j)$。\n\n\n------------\n\n冬天的最后一场雪如约而至，很快又要迎来一个新的春天。万物都在等待复苏，可峰城里的一个小巷子，再也不复往日繁荣。\n\n八十多年过去，我们早已找不到当初的巷子，只留下这样一个故事。\n\n感谢你放的烟花。", "locale": "zh-CN"}}}
{"pid": "P9399", "type": "P", "difficulty": 6, "samples": [["9 3 0\n7 3 2 4 6 5 5 3 7\n1 2\n2 3\n2 4\n4 5\n4 6\n1 7\n7 8\n7 9\n2 9 10\n1 3 5 8 10\n1 3 6 8 10", "4\n3"], ["13 5 0\n15 12 9 11 5 6 16 14 15 10 12 1 2\n7 8\n5 6\n2 9\n1 2\n4 5\n8 2\n9 10\n2 3\n10 11\n3 4\n3 13\n3 12\n1 1 6 7 11\n1 12 12 13 13\n2 1 10\n2 2 11\n1 14 14 15 15", "6\n1\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "二分", "O2优化", "树链剖分", "树论", "哈希 hashing"], "title": "「DBOI」Round 1 人生如树", "background": "> _永远这么酷 永远永远这么酷_\\\n_像个冒险家一样 不断探着山顶的路_\\\n——《Hustle》\n\n张均好望着窗外，朱芝心走过来坐在他旁边，折了一架纸飞机飞出去。他对张均好说，要带着对未来的期待，往前走，别回头。\n\n正如 [命运](https://www.luogu.com.cn/problem/P6773) 所述，每个人的人生都是一棵树。它总在无限的随机与缘分中伸展，有的枝丫茂盛了，有些却也不可避免地枯萎。", "description": "朱芝心用魔法得到了张均好的人生树。\n\n这是一棵 $n$ 个节点的树，节点 $i$ 上有权值 $w_i$。\n\n朱芝心想要观测 $m$ 次张均好的人生：\n\n设**当前**张均好人生树上的节点数量为 $s$。\n\n1. 输入四个整数 $u_1,v_1,u_2,v_2$。令 $u_1\\to v_1$ 的简单路径上**顺次组成**的数组为 $a$，$u_2\\to v_2$ 的简单路径上**顺次组成**的数组为 $b$。朱芝心认为张均好这两段人生的相似度是 $LRP(a,b)$，希望你求出它。保证 $1\\leq u_1,v_1,u_2,v_2 \\leq s$。\n\n2. 输入两个整数 $u,w'$。朱芝心观测到了张均好的另外一种可能，因此你需要新建一个点权为 $w'$ 的节点，编号为 $s+1$，建立一条 $(s+1,u)$ 的无向边，其中 $u\\leq s$。显然，此后 $s\\leftarrow s+1$。\n\n对于两个数组 $a,b$，设它们的相似度 $LRP(a,b)$ 表示最大的 $i$ 满足 $i\\leq \\min\\{|a|, |b|\\}$ 且**对于所有** $1\\leq j\\leq i$，都有 $b_j=a_j+j$。其中 $|a|$ 表示数组 $a$ 的长度。特殊地，若不存在这样的 $i$，则 $LRP(a,b) = 0$。\n", "inputFormat": "第一行三个正整数 $n,m,idx$，分别表示树的节点数量，操作数量和该测试点所在 Subtask 编号。对于样例，有 $idx = 0$。\n\n接下来一行 $n$ 个整数，第 $i$ 个整数表示 $w_i$，即点 $i$ 上的权值。\n\n接下来 $n - 1$ 行，每行两个正整数 $u_i,v_i$，表示有一条 $(u_i,v_i)$ 的无向边。\n\n接下来 $m$ 行，每行一个操作。每行第一个整数是 $opt$，后面的若干整数表示操作的具体内容。$opt=1$ 时表示是操作 $1$，$opt=2$ 时表示是操作 $2$。", "outputFormat": "对于每个操作 $1$，输出一行，表示当前询问的 $LRP(a, b)$。", "hint": "### 样例解释\n\n对于样例一，第一个操作结束后，$w_{10}=10$，树如图所示：\n\n![](https://s1.ax1x.com/2023/04/26/p9MV9pV.png)\n\n- 对于第二个操作，第一条路径为 $3\\to 2\\to 4\\to 5$，故 $a=\\{2, 3, 4, 6\\}$，第二条路径为 $8\\to 7\\to 9\\to 10$，故 $b=\\{3, 5, 7, 10\\}$，由于 $3=2+1$，$5=3+2$，$7=4+3$，$10=6+4$，所以答案为 $4$；\n- 对于第三个操作，$a=\\{2, 3, 4, 5\\}$，$b=\\{3, 5, 7, 10\\}$，由于 $3=2+1$，$5=3+2$，$7=4+3$，$10\\ne 5+4$，所以答案为 $3$。\n\n对于样例二，初始的树如图所示：\n\n![](https://s1.ax1x.com/2023/04/26/p9MVZkR.png)\n\n\n| Subtask | $n \\le$ | $m \\le$ | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| Subtask 1 | $5000$ | $5000$ | 无 | $10$ |\n| Subtask 2 | $10^5$ | $5\\times{10}^4$ | A & B | $30$ |\n| Subtask 3 | $10^5$ | $5\\times{10}^4$ | B | $30$ |\n| Subtask 4 | $10^5$ | $5 \\times {10}^4$ | 无 | $20$ | \n| Subtask 5 | $10^5$ | $10^5$ | 无 | $10$ |\n\n特殊性质 A：$v_i=u_i+1$。\n\n特殊性质 B：保证无操作 2。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^5$，$1\\leq w_i,w'\\leq 10^6$，$1\\leq u_i,v_i\\leq n$。  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DBOI」Round 1 人生如树", "background": "> _永远这么酷 永远永远这么酷_\\\n_像个冒险家一样 不断探着山顶的路_\\\n——《Hustle》\n\n张均好望着窗外，朱芝心走过来坐在他旁边，折了一架纸飞机飞出去。他对张均好说，要带着对未来的期待，往前走，别回头。\n\n正如 [命运](https://www.luogu.com.cn/problem/P6773) 所述，每个人的人生都是一棵树。它总在无限的随机与缘分中伸展，有的枝丫茂盛了，有些却也不可避免地枯萎。", "description": "朱芝心用魔法得到了张均好的人生树。\n\n这是一棵 $n$ 个节点的树，节点 $i$ 上有权值 $w_i$。\n\n朱芝心想要观测 $m$ 次张均好的人生：\n\n设**当前**张均好人生树上的节点数量为 $s$。\n\n1. 输入四个整数 $u_1,v_1,u_2,v_2$。令 $u_1\\to v_1$ 的简单路径上**顺次组成**的数组为 $a$，$u_2\\to v_2$ 的简单路径上**顺次组成**的数组为 $b$。朱芝心认为张均好这两段人生的相似度是 $LRP(a,b)$，希望你求出它。保证 $1\\leq u_1,v_1,u_2,v_2 \\leq s$。\n\n2. 输入两个整数 $u,w'$。朱芝心观测到了张均好的另外一种可能，因此你需要新建一个点权为 $w'$ 的节点，编号为 $s+1$，建立一条 $(s+1,u)$ 的无向边，其中 $u\\leq s$。显然，此后 $s\\leftarrow s+1$。\n\n对于两个数组 $a,b$，设它们的相似度 $LRP(a,b)$ 表示最大的 $i$ 满足 $i\\leq \\min\\{|a|, |b|\\}$ 且**对于所有** $1\\leq j\\leq i$，都有 $b_j=a_j+j$。其中 $|a|$ 表示数组 $a$ 的长度。特殊地，若不存在这样的 $i$，则 $LRP(a,b) = 0$。\n", "inputFormat": "第一行三个正整数 $n,m,idx$，分别表示树的节点数量，操作数量和该测试点所在 Subtask 编号。对于样例，有 $idx = 0$。\n\n接下来一行 $n$ 个整数，第 $i$ 个整数表示 $w_i$，即点 $i$ 上的权值。\n\n接下来 $n - 1$ 行，每行两个正整数 $u_i,v_i$，表示有一条 $(u_i,v_i)$ 的无向边。\n\n接下来 $m$ 行，每行一个操作。每行第一个整数是 $opt$，后面的若干整数表示操作的具体内容。$opt=1$ 时表示是操作 $1$，$opt=2$ 时表示是操作 $2$。", "outputFormat": "对于每个操作 $1$，输出一行，表示当前询问的 $LRP(a, b)$。", "hint": "### 样例解释\n\n对于样例一，第一个操作结束后，$w_{10}=10$，树如图所示：\n\n![](https://s1.ax1x.com/2023/04/26/p9MV9pV.png)\n\n- 对于第二个操作，第一条路径为 $3\\to 2\\to 4\\to 5$，故 $a=\\{2, 3, 4, 6\\}$，第二条路径为 $8\\to 7\\to 9\\to 10$，故 $b=\\{3, 5, 7, 10\\}$，由于 $3=2+1$，$5=3+2$，$7=4+3$，$10=6+4$，所以答案为 $4$；\n- 对于第三个操作，$a=\\{2, 3, 4, 5\\}$，$b=\\{3, 5, 7, 10\\}$，由于 $3=2+1$，$5=3+2$，$7=4+3$，$10\\ne 5+4$，所以答案为 $3$。\n\n对于样例二，初始的树如图所示：\n\n![](https://s1.ax1x.com/2023/04/26/p9MVZkR.png)\n\n\n| Subtask | $n \\le$ | $m \\le$ | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| Subtask 1 | $5000$ | $5000$ | 无 | $10$ |\n| Subtask 2 | $10^5$ | $5\\times{10}^4$ | A & B | $30$ |\n| Subtask 3 | $10^5$ | $5\\times{10}^4$ | B | $30$ |\n| Subtask 4 | $10^5$ | $5 \\times {10}^4$ | 无 | $20$ | \n| Subtask 5 | $10^5$ | $10^5$ | 无 | $10$ |\n\n特殊性质 A：$v_i=u_i+1$。\n\n特殊性质 B：保证无操作 2。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^5$，$1\\leq w_i,w'\\leq 10^6$，$1\\leq u_i,v_i\\leq n$。  \n", "locale": "zh-CN"}}}
{"pid": "P9400", "type": "P", "difficulty": 5, "samples": [["3 1 3\n3 4\n3 3\n2 4", "2"], ["5 2 5\n2 4\n1 6\n5 10\n1 1\n5 6", "186"], ["12 9 66\n41 76\n33 61\n10 25\n84 86\n20 49\n43 59\n26 56\n44 71\n48 79\n1 35\n27 83\n49 76", "358014651"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "线段树", "O2优化"], "title": "「DBOI」Round 1 三班不一般", "background": "HQ 是传奇颜值中学的一位尽职尽责的后勤部教师，同时也是宿舍的管理成员，负责管理开关灯。\n\n对于他来说，最令人厌烦的的就是极不一般的三班的一群猴子乱玩自己宿舍和别人宿舍的灯，但是却没法当场发现并抓捕始作俑者。", "description": "HQ 需要管理 $n$ 个宿舍的灯，第 $i$ 个宿舍的同学因为有着传奇颜值而十分挑剔，只能忍受亮度为 $[l_i,r_i]$ 的灯。每个宿舍的灯的亮度可以在对应的可忍受范围内肆意调节。\n\n今天陈添润决定成为总司令，对所有宿舍的灯进行调节，为了防止被 HQ 当场抓捕，他不能让 HQ 发觉宿舍的灯太过刺眼，当连续 $a$ 个宿舍的灯亮都大于 $b$ 的时候，宿舍的灯就刺眼了。$\\color{white}\\text{不可以，总司令}$\n\n因此，帮助陈添润数一数一共有多少灯泡调节方案能满足宿舍不刺眼，答案对 $998244353$ 取模。", "inputFormat": "第一行是三个正整数 $n,a,b$，含义如题所示。\n\n下面一共 $n$ 行，每行两个正整数，第 $i$ 行的两个正整数分别表示 $l_i,r_i$。", "outputFormat": "一行一个整数，表示答案，对 $998244353$ 取模。", "hint": "### 样例解释\n\n对于样例 $1$，只有两种方案： $\\{3,3,2\\}$  或者 $\\{3,3,3\\}$ 能满足条件。\n\n对于样例 $3$，请将答案对 $998244353$ 取模。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n对于所有数据，满足 $1\\le n\\le 2\\cdot 10^5$，$1\\le a\\le n+1$，$1\\le b\\le 10^9$，$1\\le l_i\\le r_i\\le 10^9$。\n\n| $\\textrm{Subtask}$ | $n,(a-1)\\le$ | $l_i,r_i,b\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $20$ | 无 | $10$ |\n| $2$ | $2\\cdot 10^5$ | $10^9$ | $a=n+1$ | $10$ |\n| $3$ | $2\\cdot 10^5$ | $10^9$ | $a=1$ | $10$ |\n| $4$ | $10^3$ | $10^9$ | 无 | $30$ |\n| $5$ | $2\\cdot 10^5$ | $10^9$ | 无 | $40$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DBOI」Round 1 三班不一般", "background": "HQ 是传奇颜值中学的一位尽职尽责的后勤部教师，同时也是宿舍的管理成员，负责管理开关灯。\n\n对于他来说，最令人厌烦的的就是极不一般的三班的一群猴子乱玩自己宿舍和别人宿舍的灯，但是却没法当场发现并抓捕始作俑者。", "description": "HQ 需要管理 $n$ 个宿舍的灯，第 $i$ 个宿舍的同学因为有着传奇颜值而十分挑剔，只能忍受亮度为 $[l_i,r_i]$ 的灯。每个宿舍的灯的亮度可以在对应的可忍受范围内肆意调节。\n\n今天陈添润决定成为总司令，对所有宿舍的灯进行调节，为了防止被 HQ 当场抓捕，他不能让 HQ 发觉宿舍的灯太过刺眼，当连续 $a$ 个宿舍的灯亮都大于 $b$ 的时候，宿舍的灯就刺眼了。$\\color{white}\\text{不可以，总司令}$\n\n因此，帮助陈添润数一数一共有多少灯泡调节方案能满足宿舍不刺眼，答案对 $998244353$ 取模。", "inputFormat": "第一行是三个正整数 $n,a,b$，含义如题所示。\n\n下面一共 $n$ 行，每行两个正整数，第 $i$ 行的两个正整数分别表示 $l_i,r_i$。", "outputFormat": "一行一个整数，表示答案，对 $998244353$ 取模。", "hint": "### 样例解释\n\n对于样例 $1$，只有两种方案： $\\{3,3,2\\}$  或者 $\\{3,3,3\\}$ 能满足条件。\n\n对于样例 $3$，请将答案对 $998244353$ 取模。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n对于所有数据，满足 $1\\le n\\le 2\\cdot 10^5$，$1\\le a\\le n+1$，$1\\le b\\le 10^9$，$1\\le l_i\\le r_i\\le 10^9$。\n\n| $\\textrm{Subtask}$ | $n,(a-1)\\le$ | $l_i,r_i,b\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $20$ | 无 | $10$ |\n| $2$ | $2\\cdot 10^5$ | $10^9$ | $a=n+1$ | $10$ |\n| $3$ | $2\\cdot 10^5$ | $10^9$ | $a=1$ | $10$ |\n| $4$ | $10^3$ | $10^9$ | 无 | $30$ |\n| $5$ | $2\\cdot 10^5$ | $10^9$ | 无 | $40$ |\n", "locale": "zh-CN"}}}
{"pid": "P9401", "type": "P", "difficulty": 6, "samples": [["4\n5 7\n10 15\n13 20\n7 5\n", "5"], ["2\n18900 22050\n14700 17640\n", "7350"], ["见附件", "2"]], "limits": {"time": [600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2020", "POI（波兰）", "ST 表"], "title": "[POI 2020/2021 R3] 收藏家 2 / Kolekcjoner Bajtemonów 2", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Kolekcjoner Bajtemonów 2](https://szkopul.edu.pl/problemset/problem/yI8VISW680r7ktJAPvA5QPkl/statement/)。\n\n试机题。", "description": "给你 $n$ 个数对，你要进行 $n$ 次二选一，这样你就有了 $n$ 个数，最大化这 $n$ 个数的 $\\gcd$。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数，$a_i,b_i$。", "outputFormat": "一行一个数：最大的 $\\gcd$。", "hint": "对于所有数据，$1\\leq n\\leq 10^6$，$1\\leq a_i\\leq 5\\times 10^5$，$1\\leq b_i<2^{63}$。\n\n对于 $42pts$ 的数据，$n\\leq 5000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R3] 收藏家 2 / Kolekcjoner Bajtemonów 2", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Kolekcjoner Bajtemonów 2](https://szkopul.edu.pl/problemset/problem/yI8VISW680r7ktJAPvA5QPkl/statement/)。\n\n试机题。", "description": "给你 $n$ 个数对，你要进行 $n$ 次二选一，这样你就有了 $n$ 个数，最大化这 $n$ 个数的 $\\gcd$。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数，$a_i,b_i$。", "outputFormat": "一行一个数：最大的 $\\gcd$。", "hint": "对于所有数据，$1\\leq n\\leq 10^6$，$1\\leq a_i\\leq 5\\times 10^5$，$1\\leq b_i<2^{63}$。\n\n对于 $42pts$ 的数据，$n\\leq 5000$。", "locale": "zh-CN"}}}
{"pid": "P9402", "type": "P", "difficulty": 5, "samples": [["4 4 2 1 1\n1 2 2\n2 3 4\n1 3 3\n4 3 2\n4 0 10\n1 2 3 4\n3 2 7\n1 3 2\n", "8"], ["10 45 17 10 123\n1 2 1\n1 3 100\n1 4 100\n1 5 100\n1 6 100\n1 7 100\n1 8 100\n1 9 100\n1 10 100\n2 3 1\n2 4 100\n2 5 100\n2 6 100\n2 7 100\n2 8 100\n2 9 100\n2 10 100\n3 4 1\n3 5 100\n3 6 100\n3 7 100\n3 8 100\n3 9 100\n3 10 100\n4 5 1\n4 6 100\n4 7 100\n4 8 100\n4 9 100\n4 10 100\n5 6 1\n5 7 100\n5 8 100\n5 9 100\n5 10 100\n6 7 1\n6 8 100\n6 9 100\n6 10 100\n7 8 1\n7 9 100\n7 10 100\n8 9 1\n8 10 100\n9 10 1\n2 0 1\n1 2\n2 0 1\n1 3\n2 0 1\n2 3\n2 0 1\n2 4\n2 0 1\n3 4\n2 0 1\n3 5\n2 0 1\n4 5\n2 0 1\n4 6\n2 0 1\n5 6\n2 0 1\n5 7\n2 0 1\n6 7\n2 0 1\n6 8\n2 0 1\n7 8\n2 0 1\n7 9\n2 0 1\n8 9\n2 0 1\n8 10\n2 0 1\n9 10\n", "132"], ["见附件", "1000000102"], ["见附件", "11100000071"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2020", "POI（波兰）", "图论建模", "最短路"], "title": "[POI 2020/2021 R3] Droga do domu", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Droga do domu](https://szkopul.edu.pl/problemset/problem/ZfS_tobZ_7xdR6D5s6Tegur3/statement/)。\n\nd1t1。", "description": "$n$ 个点，$m$ 条边，无重边自环，边有长度。\n\n$1$ 号点是学校，$n$ 号点是家。\n\n$s$ 条公交线路。公交逢点必停，且一个点不会停两次。在一条边上行驶的时间就是它的长度。给定了第一班公交发车时间和发车间隔。\n\n在时刻 $t$ 从学校出发，至多换乘 $k$ 次，求最早什么时候到家。\n\n只计算路上时间和等车时间。换乘时间不计。", "inputFormat": "第一行：五个整数 $n,m,s,k,t$。\n\n接下来 $m$ 行：每行三个整数 $a,b,c$，表示有一条边连接 $a,b$，长度为 $c$。\n\n接下来 $2s$ 行：每两行描述一条公交线路：\n\n- 第一行三个整数 $l,x,y$，表示它共停靠 $l$ 个点，第一班在时刻 $x$ 发车，每两班之间时间间隔为 $y$。\n- 第二行 $l$ 个整数 $v_1,\\dots,v_l$，依次为它停靠的 $l$ 个点。", "outputFormat": "一行一个整数，答案。\n\n如果不能到家，那么输出一行一个字符串 `NIE`。", "hint": "样例解释：![](https://cdn.luogu.com.cn/upload/image_hosting/9njsvc34.png)\n\n对于全部数据，$2\\leq n\\leq 10000$，$1\\leq m\\leq 50000$，$1\\leq s\\leq 25000$，$0\\leq k\\leq 100$，$0\\leq t\\leq 10^9$，$1\\leq c\\leq 10^9$，$2\\leq l\\leq n$，$0\\leq x\\leq 10^9$，$1\\leq y\\leq 10^9$，$1\\leq a,b,v\\leq n$，$\\sum l\\leq 50000$。\n\n| 子任务编号 | 限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $k=n$ | 20 |\n| 2 | $v_i<v_{i+1}$ | 20 |\n| 3 | $l=2$ | 20 |\n| 4 | $t=0,x=0,y=1$ | 20 |\n| 5 |  | 20 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R3] Droga do domu", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Droga do domu](https://szkopul.edu.pl/problemset/problem/ZfS_tobZ_7xdR6D5s6Tegur3/statement/)。\n\nd1t1。", "description": "$n$ 个点，$m$ 条边，无重边自环，边有长度。\n\n$1$ 号点是学校，$n$ 号点是家。\n\n$s$ 条公交线路。公交逢点必停，且一个点不会停两次。在一条边上行驶的时间就是它的长度。给定了第一班公交发车时间和发车间隔。\n\n在时刻 $t$ 从学校出发，至多换乘 $k$ 次，求最早什么时候到家。\n\n只计算路上时间和等车时间。换乘时间不计。", "inputFormat": "第一行：五个整数 $n,m,s,k,t$。\n\n接下来 $m$ 行：每行三个整数 $a,b,c$，表示有一条边连接 $a,b$，长度为 $c$。\n\n接下来 $2s$ 行：每两行描述一条公交线路：\n\n- 第一行三个整数 $l,x,y$，表示它共停靠 $l$ 个点，第一班在时刻 $x$ 发车，每两班之间时间间隔为 $y$。\n- 第二行 $l$ 个整数 $v_1,\\dots,v_l$，依次为它停靠的 $l$ 个点。", "outputFormat": "一行一个整数，答案。\n\n如果不能到家，那么输出一行一个字符串 `NIE`。", "hint": "样例解释：![](https://cdn.luogu.com.cn/upload/image_hosting/9njsvc34.png)\n\n对于全部数据，$2\\leq n\\leq 10000$，$1\\leq m\\leq 50000$，$1\\leq s\\leq 25000$，$0\\leq k\\leq 100$，$0\\leq t\\leq 10^9$，$1\\leq c\\leq 10^9$，$2\\leq l\\leq n$，$0\\leq x\\leq 10^9$，$1\\leq y\\leq 10^9$，$1\\leq a,b,v\\leq n$，$\\sum l\\leq 50000$。\n\n| 子任务编号 | 限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $k=n$ | 20 |\n| 2 | $v_i<v_{i+1}$ | 20 |\n| 3 | $l=2$ | 20 |\n| 4 | $t=0,x=0,y=1$ | 20 |\n| 5 |  | 20 |\n", "locale": "zh-CN"}}}
{"pid": "P9403", "type": "P", "difficulty": 5, "samples": [["3 10\n2 4 7\n3 3 6 8\n1 5\n", "4\n6"], ["见附件", "6252500\n6252500\n"], ["见附件", "999990000\n999990000\n999990000\n999990000\n"], ["生成器：/paste/3igmip11", "生成器：/paste/fusadpm0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "POI（波兰）", "差分", "双指针 two-pointer"], "title": "[POI 2020/2021 R3] Les Bitérables", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Les Bitérables](https://szkopul.edu.pl/problemset/problem/Lpz563_ATiESIrNZxiT5bwIx/statement/)。\n\nd1t2。", "description": "有 $t$ 个时刻，第 $i$ 个时刻给出了局面 $p_1,p_2,\\dots,p_{s_i}$，表示在数轴的 $(0,d)$ 范围内，有且仅有 $p_1,p_2,\\dots,p_{s_i}$ 这些位置上有物品。\n\n在 $0$ 位置和 $d$ 位置有无穷多个物品。\n\n你可以花费一个代价，将一个物品向左移动一个位置或向右移动一个位置。\n\n问你在相邻两个时刻之间，把前一个局面转化为后一个局面，最少需要多少代价。", "inputFormat": "第一行两个正整数 $n,d$。\n\n接下来 $n$ 行，每行描述一个时刻的局面，首先是一个非负整数 $s_i$，接下来是 $s_i$ 个正整数，分别为 $p_1,p_2,\\dots,p_{s_i}$。保证 $0<p_1<p_2<\\dots<p_{s_i}<d$。", "outputFormat": "$n-1$ 行，每行一个整数，你的答案。", "hint": "对于所有数据，$2\\leq n\\leq 500000$，$2\\leq d\\leq 10^{12}$，$\\sum s_i\\leq 500000$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $s_i\\leq 1$ | 5 |\n| 2 | $s_i\\leq 3$ | 10 |\n| 3 | $d\\leq 7$ | 12 |\n| 4 | $\\sum s_i\\leq 5000$ | 27 |\n| 5 | 如果 $s_i>0$，那么 $p_{s_i}=p_1+s_i-1$ | 11 |\n| 6 |  | 35 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R3] Les Bitérables", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Les Bitérables](https://szkopul.edu.pl/problemset/problem/Lpz563_ATiESIrNZxiT5bwIx/statement/)。\n\nd1t2。", "description": "有 $t$ 个时刻，第 $i$ 个时刻给出了局面 $p_1,p_2,\\dots,p_{s_i}$，表示在数轴的 $(0,d)$ 范围内，有且仅有 $p_1,p_2,\\dots,p_{s_i}$ 这些位置上有物品。\n\n在 $0$ 位置和 $d$ 位置有无穷多个物品。\n\n你可以花费一个代价，将一个物品向左移动一个位置或向右移动一个位置。\n\n问你在相邻两个时刻之间，把前一个局面转化为后一个局面，最少需要多少代价。", "inputFormat": "第一行两个正整数 $n,d$。\n\n接下来 $n$ 行，每行描述一个时刻的局面，首先是一个非负整数 $s_i$，接下来是 $s_i$ 个正整数，分别为 $p_1,p_2,\\dots,p_{s_i}$。保证 $0<p_1<p_2<\\dots<p_{s_i}<d$。", "outputFormat": "$n-1$ 行，每行一个整数，你的答案。", "hint": "对于所有数据，$2\\leq n\\leq 500000$，$2\\leq d\\leq 10^{12}$，$\\sum s_i\\leq 500000$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $s_i\\leq 1$ | 5 |\n| 2 | $s_i\\leq 3$ | 10 |\n| 3 | $d\\leq 7$ | 12 |\n| 4 | $\\sum s_i\\leq 5000$ | 27 |\n| 5 | 如果 $s_i>0$，那么 $p_{s_i}=p_1+s_i-1$ | 11 |\n| 6 |  | 35 |\n", "locale": "zh-CN"}}}
{"pid": "P9404", "type": "P", "difficulty": 7, "samples": [["3 5 2 1\n2 3 5\n0 1 3\n\n2\n", "9\n"], ["5 12 1 5\n1 3 6 9 11\n0 1 1\n\n1\n1 1 3\n1\n2\n1 1 6\n2\n3\n1 1 9\n3\n4\n1 1 11\n4\n5\n", "33\n33\n36\n33\n33\n"], ["11 100 1 26\n0 10 20 30 40 50 60 70 80 90 100\n0 5 0\n\n2 4 6 8 10\n5 6 4\n2 4 6 8 10\n1 3 5 7 9 11\n6 5 8\n1 3 5 7 9 11\n2 4 6 8 10\n5 6 12\n2 4 6 8 10\n1 3 5 7 9 11\n6 5 16\n1 3 5 7 9 11\n2 4 6 8 10\n5 6 20\n2 4 6 8 10\n1 3 5 7 9 11\n6 5 24\n1 3 5 7 9 11\n2 4 6 8 10\n5 6 28\n2 4 6 8 10\n1 3 5 7 9 11\n6 5 32\n1 3 5 7 9 11\n2 4 6 8 10\n5 6 36\n2 4 6 8 10\n1 3 5 7 9 11\n6 5 40\n1 3 5 7 9 11\n2 4 6 8 10\n5 6 44\n2 4 6 8 10\n1 3 5 7 9 11\n6 5 48\n1 3 5 7 9 11\n2 4 6 8 10\n5 6 52\n2 4 6 8 10\n1 3 5 7 9 11\n6 5 56\n1 3 5 7 9 11\n2 4 6 8 10\n5 6 60\n2 4 6 8 10\n1 3 5 7 9 11\n6 5 64\n1 3 5 7 9 11\n2 4 6 8 10\n5 6 68\n2 4 6 8 10\n1 3 5 7 9 11\n6 5 72\n1 3 5 7 9 11\n2 4 6 8 10\n5 6 76\n2 4 6 8 10\n1 3 5 7 9 11\n6 5 80\n1 3 5 7 9 11\n2 4 6 8 10\n5 6 84\n2 4 6 8 10\n1 3 5 7 9 11\n6 5 88\n1 3 5 7 9 11\n2 4 6 8 10\n5 6 92\n2 4 6 8 10\n1 3 5 7 9 11\n6 5 96\n1 3 5 7 9 11\n2 4 6 8 10\n5 6 100\n2 4 6 8 10\n1 3 5 7 9 11\n", "1090\n1096\n1098\n1092\n1094\n1100\n1094\n1092\n1098\n1096\n1090\n1096\n1098\n1092\n1094\n1100\n1094\n1092\n1098\n1096\n1090\n1096\n1098\n1092\n1094\n1100\n"], ["见附件", "见附件"], ["见附件", "1000000000000000000\n2001007996000\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "贪心", "2020", "平衡树", "POI（波兰）", "构造", "分类讨论"], "title": "[POI 2020/2021 R3] 扫雪波特 / Surowa zima", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Surowa zima](https://szkopul.edu.pl/problemset/problem/QCCQf92wAoWAOoJ3tHoypvp3/statement/)。\n\nd1t3。", "description": "有一条长 $l$ 米的道路（数轴）。路上有 $n$ 个充电站。每天整条路上（坐标 $[0,l]$）都会落满雪。\n\n有一台机器能扫雪。充一次电可以扫至多 $k$ 米的雪。扫雪是和移动同时进行的，详见样例解释。机器一秒能移动一米，充电不消耗时间。\n\n简单来说，**移动不扫雪不消耗电，需要一秒；移动并扫雪消耗最大电量的 $\\bold{\\frac1k}$，需要一秒；扫雪必须移动。**\n\n给出每天机器的初始位置，机器初始没电，问每天清除所有雪的最少时间。终点任意。\n\n带修，即充电站可能损坏或修好（第一天之前都是好的），但保证每天都至少有一个好的充电站（所以不会无解）。", "inputFormat": "第一行四个整数 $n,l,k,d$。\n\n第二行 $n$ 个整数 $x_1,x_2,\\dots,x_n$，表示充电站的位置，保证 $0\\leq x_1<x_2<\\dots<x_n\\leq l$。\n\n接下来 $3d$ 行，描述 $d$ 天的事件：\n\n- 第一行三个整数 $z,u,p$，分别表示昨晚修好的充电站数量，损坏的数量，和机器的初始位置。\n- 第二行 $z$ 个整数，表示被修好的充电站编号。\n- 第三行 $u$ 个整数，表示损坏的充电站编号。", "outputFormat": "$d$ 行，每行一个整数，表示每天的答案。", "hint": "样例解释：$3\\rightarrow2_{充电}\\Rightarrow0\\rightarrow2_{充电}\\Rightarrow4\\rightarrow5_{充电}\\Rightarrow4$。$\\rightarrow$ 表示移动，$\\Rightarrow$ 表示移动并扫雪。\n\n对于所有数据，$1\\leq n\\leq 250000$，$1\\leq l\\leq 10^9$，$1\\leq k\\leq l$，$1\\leq d\\leq 250000$，$\\sum z,\\sum u\\leq 500000$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $l\\leq 12$，$d\\leq 50$ | 10 |\n| 2 | $l\\leq 500$，$d\\leq 50$，$k=1$ | 12 |\n| 3 | $l\\leq 5000000$，$d\\leq 20$ | 8 |\n| 4 | $z=u=0$ | 8 |\n| 5 | $z,u\\leq 100$，$k\\leq 50$ | 20 |\n| 6 | $k=1$ | 18 |\n| 7 |  | 24 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R3] 扫雪波特 / Surowa zima", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Surowa zima](https://szkopul.edu.pl/problemset/problem/QCCQf92wAoWAOoJ3tHoypvp3/statement/)。\n\nd1t3。", "description": "有一条长 $l$ 米的道路（数轴）。路上有 $n$ 个充电站。每天整条路上（坐标 $[0,l]$）都会落满雪。\n\n有一台机器能扫雪。充一次电可以扫至多 $k$ 米的雪。扫雪是和移动同时进行的，详见样例解释。机器一秒能移动一米，充电不消耗时间。\n\n简单来说，**移动不扫雪不消耗电，需要一秒；移动并扫雪消耗最大电量的 $\\bold{\\frac1k}$，需要一秒；扫雪必须移动。**\n\n给出每天机器的初始位置，机器初始没电，问每天清除所有雪的最少时间。终点任意。\n\n带修，即充电站可能损坏或修好（第一天之前都是好的），但保证每天都至少有一个好的充电站（所以不会无解）。", "inputFormat": "第一行四个整数 $n,l,k,d$。\n\n第二行 $n$ 个整数 $x_1,x_2,\\dots,x_n$，表示充电站的位置，保证 $0\\leq x_1<x_2<\\dots<x_n\\leq l$。\n\n接下来 $3d$ 行，描述 $d$ 天的事件：\n\n- 第一行三个整数 $z,u,p$，分别表示昨晚修好的充电站数量，损坏的数量，和机器的初始位置。\n- 第二行 $z$ 个整数，表示被修好的充电站编号。\n- 第三行 $u$ 个整数，表示损坏的充电站编号。", "outputFormat": "$d$ 行，每行一个整数，表示每天的答案。", "hint": "样例解释：$3\\rightarrow2_{充电}\\Rightarrow0\\rightarrow2_{充电}\\Rightarrow4\\rightarrow5_{充电}\\Rightarrow4$。$\\rightarrow$ 表示移动，$\\Rightarrow$ 表示移动并扫雪。\n\n对于所有数据，$1\\leq n\\leq 250000$，$1\\leq l\\leq 10^9$，$1\\leq k\\leq l$，$1\\leq d\\leq 250000$，$\\sum z,\\sum u\\leq 500000$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $l\\leq 12$，$d\\leq 50$ | 10 |\n| 2 | $l\\leq 500$，$d\\leq 50$，$k=1$ | 12 |\n| 3 | $l\\leq 5000000$，$d\\leq 20$ | 8 |\n| 4 | $z=u=0$ | 8 |\n| 5 | $z,u\\leq 100$，$k\\leq 50$ | 20 |\n| 6 | $k=1$ | 18 |\n| 7 |  | 24 |\n", "locale": "zh-CN"}}}
{"pid": "P9405", "type": "P", "difficulty": 7, "samples": [["4\n-1 0\n0 0\n3 3\n-1 1\n", "7.000000000000\n6.656854249492\n13.714776642119\n6.886349517373\n"], ["25\n-2 -2\n-2 -1\n-2 0\n-2 1\n-2 2\n-1 -2\n-1 -1\n-1 0\n-1 1\n-1 2\n0 -2\n0 -1\n0 0\n0 1\n0 2\n1 -2\n1 -1\n1 0\n1 1\n1 2\n2 -2\n2 -1\n2 0\n2 1\n2 2\n", "79.340412611230\n68.023981606779\n64.155694316737\n68.023981606779\n79.340412611230\n68.023981606779\n55.532407162959\n51.265774235248\n55.532407162959\n68.023981606779\n64.155694316737\n51.265774235248\n46.859106568475\n51.265774235248\n64.155694316737\n68.023981606779\n55.532407162958\n51.265774235248\n55.532407162959\n68.023981606779\n79.340412611230\n68.023981606779\n64.155694316737\n68.023981606779\n79.340412611230\n"], ["见附件", "见附件"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2020", "POI（波兰）", "Special Judge", "微积分", "其它技巧"], "title": "[POI 2020/2021 R3] 星间通信 / Komunikacja międzyplanetarn", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Komunikacja międzyplanetarn](https://szkopul.edu.pl/problemset/problem/43LcdhShos7i99wnVNtQYUUK/statement/)。\n\nd2t1。", "description": "二维平面上有 $n$ 个点。\n\n对于每个点，算出它到其他所有点的欧氏距离之和。\n\n相对误差不超过 $0.1\\%$ 即可。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个点的坐标。", "outputFormat": "$n$ 行，每行一个实数，表示每个点的答案。", "hint": "对于所有数据，$2\\leq n\\leq 100000$，$-10^6\\leq x,y\\leq 10^6$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 1000$ | 4 |\n| 2 | 所有点共线 | 16 |\n| 3 | 点的坐标随机，相对误差不超过 $2\\%$ 即可 | 20 |\n| 4 | | 60 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R3] 星间通信 / Komunikacja międzyplanetarn", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Komunikacja międzyplanetarn](https://szkopul.edu.pl/problemset/problem/43LcdhShos7i99wnVNtQYUUK/statement/)。\n\nd2t1。", "description": "二维平面上有 $n$ 个点。\n\n对于每个点，算出它到其他所有点的欧氏距离之和。\n\n相对误差不超过 $0.1\\%$ 即可。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个点的坐标。", "outputFormat": "$n$ 行，每行一个实数，表示每个点的答案。", "hint": "对于所有数据，$2\\leq n\\leq 100000$，$-10^6\\leq x,y\\leq 10^6$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 1000$ | 4 |\n| 2 | 所有点共线 | 16 |\n| 3 | 点的坐标随机，相对误差不超过 $2\\%$ 即可 | 20 |\n| 4 | | 60 |", "locale": "zh-CN"}}}
{"pid": "P9406", "type": "P", "difficulty": 5, "samples": [["6\n4 6 1 2 3 5\n", "(()())\n"], ["2\n2 1\n", "NIE\n"], ["2000\n1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 49 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99 101 103 105 107 109 111 113 115 117 119 121 123 125 127 129 131 133 135 137 139 141 143 145 147 149 151 153 155 157 159 161 163 165 167 169 171 173 175 177 179 181 183 185 187 189 191 193 195 197 199 201 203 205 207 209 211 213 215 217 219 221 223 225 227 229 231 233 235 237 239 241 243 245 247 249 251 253 255 257 259 261 263 265 267 269 271 273 275 277 279 281 283 285 287 289 291 293 295 297 299 301 303 305 307 309 311 313 315 317 319 321 323 325 327 329 331 333 335 337 339 341 343 345 347 349 351 353 355 357 359 361 363 365 367 369 371 373 375 377 379 381 383 385 387 389 391 393 395 397 399 401 403 405 407 409 411 413 415 417 419 421 423 425 427 429 431 433 435 437 439 441 443 445 447 449 451 453 455 457 459 461 463 465 467 469 471 473 475 477 479 481 483 485 487 489 491 493 495 497 499 501 503 505 507 509 511 513 515 517 519 521 523 525 527 529 531 533 535 537 539 541 543 545 547 549 551 553 555 557 559 561 563 565 567 569 571 573 575 577 579 581 583 585 587 589 591 593 595 597 599 601 603 605 607 609 611 613 615 617 619 621 623 625 627 629 631 633 635 637 639 641 643 645 647 649 651 653 655 657 659 661 663 665 667 669 671 673 675 677 679 681 683 685 687 689 691 693 695 697 699 701 703 705 707 709 711 713 715 717 719 721 723 725 727 729 731 733 735 737 739 741 743 745 747 749 751 753 755 757 759 761 763 765 767 769 771 773 775 777 779 781 783 785 787 789 791 793 795 797 799 801 803 805 807 809 811 813 815 817 819 821 823 825 827 829 831 833 835 837 839 841 843 845 847 849 851 853 855 857 859 861 863 865 867 869 871 873 875 877 879 881 883 885 887 889 891 893 895 897 899 901 903 905 907 909 911 913 915 917 919 921 923 925 927 929 931 933 935 937 939 941 943 945 947 949 951 953 955 957 959 961 963 965 967 969 971 973 975 977 979 981 983 985 987 989 991 993 995 997 999 1001 1003 1005 1007 1009 1011 1013 1015 1017 1019 1021 1023 1025 1027 1029 1031 1033 1035 1037 1039 1041 1043 1045 1047 1049 1051 1053 1055 1057 1059 1061 1063 1065 1067 1069 1071 1073 1075 1077 1079 1081 1083 1085 1087 1089 1091 1093 1095 1097 1099 1101 1103 1105 1107 1109 1111 1113 1115 1117 1119 1121 1123 1125 1127 1129 1131 1133 1135 1137 1139 1141 1143 1145 1147 1149 1151 1153 1155 1157 1159 1161 1163 1165 1167 1169 1171 1173 1175 1177 1179 1181 1183 1185 1187 1189 1191 1193 1195 1197 1199 1201 1203 1205 1207 1209 1211 1213 1215 1217 1219 1221 1223 1225 1227 1229 1231 1233 1235 1237 1239 1241 1243 1245 1247 1249 1251 1253 1255 1257 1259 1261 1263 1265 1267 1269 1271 1273 1275 1277 1279 1281 1283 1285 1287 1289 1291 1293 1295 1297 1299 1301 1303 1305 1307 1309 1311 1313 1315 1317 1319 1321 1323 1325 1327 1329 1331 1333 1335 1337 1339 1341 1343 1345 1347 1349 1351 1353 1355 1357 1359 1361 1363 1365 1367 1369 1371 1373 1375 1377 1379 1381 1383 1385 1387 1389 1391 1393 1395 1397 1399 1401 1403 1405 1407 1409 1411 1413 1415 1417 1419 1421 1423 1425 1427 1429 1431 1433 1435 1437 1439 1441 1443 1445 1447 1449 1451 1453 1455 1457 1459 1461 1463 1465 1467 1469 1471 1473 1475 1477 1479 1481 1483 1485 1487 1489 1491 1493 1495 1497 1499 1501 1503 1505 1507 1509 1511 1513 1515 1517 1519 1521 1523 1525 1527 1529 1531 1533 1535 1537 1539 1541 1543 1545 1547 1549 1551 1553 1555 1557 1559 1561 1563 1565 1567 1569 1571 1573 1575 1577 1579 1581 1583 1585 1587 1589 1591 1593 1595 1597 1599 1601 1603 1605 1607 1609 1611 1613 1615 1617 1619 1621 1623 1625 1627 1629 1631 1633 1635 1637 1639 1641 1643 1645 1647 1649 1651 1653 1655 1657 1659 1661 1663 1665 1667 1669 1671 1673 1675 1677 1679 1681 1683 1685 1687 1689 1691 1693 1695 1697 1699 1701 1703 1705 1707 1709 1711 1713 1715 1717 1719 1721 1723 1725 1727 1729 1731 1733 1735 1737 1739 1741 1743 1745 1747 1749 1751 1753 1755 1757 1759 1761 1763 1765 1767 1769 1771 1773 1775 1777 1779 1781 1783 1785 1787 1789 1791 1793 1795 1797 1799 1801 1803 1805 1807 1809 1811 1813 1815 1817 1819 1821 1823 1825 1827 1829 1831 1833 1835 1837 1839 1841 1843 1845 1847 1849 1851 1853 1855 1857 1859 1861 1863 1865 1867 1869 1871 1873 1875 1877 1879 1881 1883 1885 1887 1889 1891 1893 1895 1897 1899 1901 1903 1905 1907 1909 1911 1913 1915 1917 1919 1921 1923 1925 1927 1929 1931 1933 1935 1937 1939 1941 1943 1945 1947 1949 1951 1953 1955 1957 1959 1961 1963 1965 1967 1969 1971 1973 1975 1977 1979 1981 1983 1985 1987 1989 1991 1993 1995 1997 1999 2 4 6 8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44 46 48 50 52 54 56 58 60 62 64 66 68 70 72 74 76 78 80 82 84 86 88 90 92 94 96 98 100 102 104 106 108 110 112 114 116 118 120 122 124 126 128 130 132 134 136 138 140 142 144 146 148 150 152 154 156 158 160 162 164 166 168 170 172 174 176 178 180 182 184 186 188 190 192 194 196 198 200 202 204 206 208 210 212 214 216 218 220 222 224 226 228 230 232 234 236 238 240 242 244 246 248 250 252 254 256 258 260 262 264 266 268 270 272 274 276 278 280 282 284 286 288 290 292 294 296 298 300 302 304 306 308 310 312 314 316 318 320 322 324 326 328 330 332 334 336 338 340 342 344 346 348 350 352 354 356 358 360 362 364 366 368 370 372 374 376 378 380 382 384 386 388 390 392 394 396 398 400 402 404 406 408 410 412 414 416 418 420 422 424 426 428 430 432 434 436 438 440 442 444 446 448 450 452 454 456 458 460 462 464 466 468 470 472 474 476 478 480 482 484 486 488 490 492 494 496 498 500 502 504 506 508 510 512 514 516 518 520 522 524 526 528 530 532 534 536 538 540 542 544 546 548 550 552 554 556 558 560 562 564 566 568 570 572 574 576 578 580 582 584 586 588 590 592 594 596 598 600 602 604 606 608 610 612 614 616 618 620 622 624 626 628 630 632 634 636 638 640 642 644 646 648 650 652 654 656 658 660 662 664 666 668 670 672 674 676 678 680 682 684 686 688 690 692 694 696 698 700 702 704 706 708 710 712 714 716 718 720 722 724 726 728 730 732 734 736 738 740 742 744 746 748 750 752 754 756 758 760 762 764 766 768 770 772 774 776 778 780 782 784 786 788 790 792 794 796 798 800 802 804 806 808 810 812 814 816 818 820 822 824 826 828 830 832 834 836 838 840 842 844 846 848 850 852 854 856 858 860 862 864 866 868 870 872 874 876 878 880 882 884 886 888 890 892 894 896 898 900 902 904 906 908 910 912 914 916 918 920 922 924 926 928 930 932 934 936 938 940 942 944 946 948 950 952 954 956 958 960 962 964 966 968 970 972 974 976 978 980 982 984 986 988 990 992 994 996 998 1000 1002 1004 1006 1008 1010 1012 1014 1016 1018 1020 1022 1024 1026 1028 1030 1032 1034 1036 1038 1040 1042 1044 1046 1048 1050 1052 1054 1056 1058 1060 1062 1064 1066 1068 1070 1072 1074 1076 1078 1080 1082 1084 1086 1088 1090 1092 1094 1096 1098 1100 1102 1104 1106 1108 1110 1112 1114 1116 1118 1120 1122 1124 1126 1128 1130 1132 1134 1136 1138 1140 1142 1144 1146 1148 1150 1152 1154 1156 1158 1160 1162 1164 1166 1168 1170 1172 1174 1176 1178 1180 1182 1184 1186 1188 1190 1192 1194 1196 1198 1200 1202 1204 1206 1208 1210 1212 1214 1216 1218 1220 1222 1224 1226 1228 1230 1232 1234 1236 1238 1240 1242 1244 1246 1248 1250 1252 1254 1256 1258 1260 1262 1264 1266 1268 1270 1272 1274 1276 1278 1280 1282 1284 1286 1288 1290 1292 1294 1296 1298 1300 1302 1304 1306 1308 1310 1312 1314 1316 1318 1320 1322 1324 1326 1328 1330 1332 1334 1336 1338 1340 1342 1344 1346 1348 1350 1352 1354 1356 1358 1360 1362 1364 1366 1368 1370 1372 1374 1376 1378 1380 1382 1384 1386 1388 1390 1392 1394 1396 1398 1400 1402 1404 1406 1408 1410 1412 1414 1416 1418 1420 1422 1424 1426 1428 1430 1432 1434 1436 1438 1440 1442 1444 1446 1448 1450 1452 1454 1456 1458 1460 1462 1464 1466 1468 1470 1472 1474 1476 1478 1480 1482 1484 1486 1488 1490 1492 1494 1496 1498 1500 1502 1504 1506 1508 1510 1512 1514 1516 1518 1520 1522 1524 1526 1528 1530 1532 1534 1536 1538 1540 1542 1544 1546 1548 1550 1552 1554 1556 1558 1560 1562 1564 1566 1568 1570 1572 1574 1576 1578 1580 1582 1584 1586 1588 1590 1592 1594 1596 1598 1600 1602 1604 1606 1608 1610 1612 1614 1616 1618 1620 1622 1624 1626 1628 1630 1632 1634 1636 1638 1640 1642 1644 1646 1648 1650 1652 1654 1656 1658 1660 1662 1664 1666 1668 1670 1672 1674 1676 1678 1680 1682 1684 1686 1688 1690 1692 1694 1696 1698 1700 1702 1704 1706 1708 1710 1712 1714 1716 1718 1720 1722 1724 1726 1728 1730 1732 1734 1736 1738 1740 1742 1744 1746 1748 1750 1752 1754 1756 1758 1760 1762 1764 1766 1768 1770 1772 1774 1776 1778 1780 1782 1784 1786 1788 1790 1792 1794 1796 1798 1800 1802 1804 1806 1808 1810 1812 1814 1816 1818 1820 1822 1824 1826 1828 1830 1832 1834 1836 1838 1840 1842 1844 1846 1848 1850 1852 1854 1856 1858 1860 1862 1864 1866 1868 1870 1872 1874 1876 1878 1880 1882 1884 1886 1888 1890 1892 1894 1896 1898 1900 1902 1904 1906 1908 1910 1912 1914 1916 1918 1920 1922 1924 1926 1928 1930 1932 1934 1936 1938 1940 1942 1944 1946 1948 1950 1952 1954 1956 1958 1960 1962 1964 1966 1968 1970 1972 1974 1976 1978 1980 1982 1984 1986 1988 1990 1992 1994 1996 1998 2000\n", "()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()\n"], ["2000\n1 1001 2 1002 3 1003 4 1004 5 1005 6 1006 7 1007 8 1008 9 1009 10 1010 11 1011 12 1012 13 1013 14 1014 15 1015 16 1016 17 1017 18 1018 19 1019 20 1020 21 1021 22 1022 23 1023 24 1024 25 1025 26 1026 27 1027 28 1028 29 1029 30 1030 31 1031 32 1032 33 1033 34 1034 35 1035 36 1036 37 1037 38 1038 39 1039 40 1040 41 1041 42 1042 43 1043 44 1044 45 1045 46 1046 47 1047 48 1048 49 1049 50 1050 51 1051 52 1052 53 1053 54 1054 55 1055 56 1056 57 1057 58 1058 59 1059 60 1060 61 1061 62 1062 63 1063 64 1064 65 1065 66 1066 67 1067 68 1068 69 1069 70 1070 71 1071 72 1072 73 1073 74 1074 75 1075 76 1076 77 1077 78 1078 79 1079 80 1080 81 1081 82 1082 83 1083 84 1084 85 1085 86 1086 87 1087 88 1088 89 1089 90 1090 91 1091 92 1092 93 1093 94 1094 95 1095 96 1096 97 1097 98 1098 99 1099 100 1100 101 1101 102 1102 103 1103 104 1104 105 1105 106 1106 107 1107 108 1108 109 1109 110 1110 111 1111 112 1112 113 1113 114 1114 115 1115 116 1116 117 1117 118 1118 119 1119 120 1120 121 1121 122 1122 123 1123 124 1124 125 1125 126 1126 127 1127 128 1128 129 1129 130 1130 131 1131 132 1132 133 1133 134 1134 135 1135 136 1136 137 1137 138 1138 139 1139 140 1140 141 1141 142 1142 143 1143 144 1144 145 1145 146 1146 147 1147 148 1148 149 1149 150 1150 151 1151 152 1152 153 1153 154 1154 155 1155 156 1156 157 1157 158 1158 159 1159 160 1160 161 1161 162 1162 163 1163 164 1164 165 1165 166 1166 167 1167 168 1168 169 1169 170 1170 171 1171 172 1172 173 1173 174 1174 175 1175 176 1176 177 1177 178 1178 179 1179 180 1180 181 1181 182 1182 183 1183 184 1184 185 1185 186 1186 187 1187 188 1188 189 1189 190 1190 191 1191 192 1192 193 1193 194 1194 195 1195 196 1196 197 1197 198 1198 199 1199 200 1200 201 1201 202 1202 203 1203 204 1204 205 1205 206 1206 207 1207 208 1208 209 1209 210 1210 211 1211 212 1212 213 1213 214 1214 215 1215 216 1216 217 1217 218 1218 219 1219 220 1220 221 1221 222 1222 223 1223 224 1224 225 1225 226 1226 227 1227 228 1228 229 1229 230 1230 231 1231 232 1232 233 1233 234 1234 235 1235 236 1236 237 1237 238 1238 239 1239 240 1240 241 1241 242 1242 243 1243 244 1244 245 1245 246 1246 247 1247 248 1248 249 1249 250 1250 251 1251 252 1252 253 1253 254 1254 255 1255 256 1256 257 1257 258 1258 259 1259 260 1260 261 1261 262 1262 263 1263 264 1264 265 1265 266 1266 267 1267 268 1268 269 1269 270 1270 271 1271 272 1272 273 1273 274 1274 275 1275 276 1276 277 1277 278 1278 279 1279 280 1280 281 1281 282 1282 283 1283 284 1284 285 1285 286 1286 287 1287 288 1288 289 1289 290 1290 291 1291 292 1292 293 1293 294 1294 295 1295 296 1296 297 1297 298 1298 299 1299 300 1300 301 1301 302 1302 303 1303 304 1304 305 1305 306 1306 307 1307 308 1308 309 1309 310 1310 311 1311 312 1312 313 1313 314 1314 315 1315 316 1316 317 1317 318 1318 319 1319 320 1320 321 1321 322 1322 323 1323 324 1324 325 1325 326 1326 327 1327 328 1328 329 1329 330 1330 331 1331 332 1332 333 1333 334 1334 335 1335 336 1336 337 1337 338 1338 339 1339 340 1340 341 1341 342 1342 343 1343 344 1344 345 1345 346 1346 347 1347 348 1348 349 1349 350 1350 351 1351 352 1352 353 1353 354 1354 355 1355 356 1356 357 1357 358 1358 359 1359 360 1360 361 1361 362 1362 363 1363 364 1364 365 1365 366 1366 367 1367 368 1368 369 1369 370 1370 371 1371 372 1372 373 1373 374 1374 375 1375 376 1376 377 1377 378 1378 379 1379 380 1380 381 1381 382 1382 383 1383 384 1384 385 1385 386 1386 387 1387 388 1388 389 1389 390 1390 391 1391 392 1392 393 1393 394 1394 395 1395 396 1396 397 1397 398 1398 399 1399 400 1400 401 1401 402 1402 403 1403 404 1404 405 1405 406 1406 407 1407 408 1408 409 1409 410 1410 411 1411 412 1412 413 1413 414 1414 415 1415 416 1416 417 1417 418 1418 419 1419 420 1420 421 1421 422 1422 423 1423 424 1424 425 1425 426 1426 427 1427 428 1428 429 1429 430 1430 431 1431 432 1432 433 1433 434 1434 435 1435 436 1436 437 1437 438 1438 439 1439 440 1440 441 1441 442 1442 443 1443 444 1444 445 1445 446 1446 447 1447 448 1448 449 1449 450 1450 451 1451 452 1452 453 1453 454 1454 455 1455 456 1456 457 1457 458 1458 459 1459 460 1460 461 1461 462 1462 463 1463 464 1464 465 1465 466 1466 467 1467 468 1468 469 1469 470 1470 471 1471 472 1472 473 1473 474 1474 475 1475 476 1476 477 1477 478 1478 479 1479 480 1480 481 1481 482 1482 483 1483 484 1484 485 1485 486 1486 487 1487 488 1488 489 1489 490 1490 491 1491 492 1492 493 1493 494 1494 495 1495 496 1496 497 1497 498 1498 499 1499 500 1500 501 1501 502 1502 503 1503 504 1504 505 1505 506 1506 507 1507 508 1508 509 1509 510 1510 511 1511 512 1512 513 1513 514 1514 515 1515 516 1516 517 1517 518 1518 519 1519 520 1520 521 1521 522 1522 523 1523 524 1524 525 1525 526 1526 527 1527 528 1528 529 1529 530 1530 531 1531 532 1532 533 1533 534 1534 535 1535 536 1536 537 1537 538 1538 539 1539 540 1540 541 1541 542 1542 543 1543 544 1544 545 1545 546 1546 547 1547 548 1548 549 1549 550 1550 551 1551 552 1552 553 1553 554 1554 555 1555 556 1556 557 1557 558 1558 559 1559 560 1560 561 1561 562 1562 563 1563 564 1564 565 1565 566 1566 567 1567 568 1568 569 1569 570 1570 571 1571 572 1572 573 1573 574 1574 575 1575 576 1576 577 1577 578 1578 579 1579 580 1580 581 1581 582 1582 583 1583 584 1584 585 1585 586 1586 587 1587 588 1588 589 1589 590 1590 591 1591 592 1592 593 1593 594 1594 595 1595 596 1596 597 1597 598 1598 599 1599 600 1600 601 1601 602 1602 603 1603 604 1604 605 1605 606 1606 607 1607 608 1608 609 1609 610 1610 611 1611 612 1612 613 1613 614 1614 615 1615 616 1616 617 1617 618 1618 619 1619 620 1620 621 1621 622 1622 623 1623 624 1624 625 1625 626 1626 627 1627 628 1628 629 1629 630 1630 631 1631 632 1632 633 1633 634 1634 635 1635 636 1636 637 1637 638 1638 639 1639 640 1640 641 1641 642 1642 643 1643 644 1644 645 1645 646 1646 647 1647 648 1648 649 1649 650 1650 651 1651 652 1652 653 1653 654 1654 655 1655 656 1656 657 1657 658 1658 659 1659 660 1660 661 1661 662 1662 663 1663 664 1664 665 1665 666 1666 667 1667 668 1668 669 1669 670 1670 671 1671 672 1672 673 1673 674 1674 675 1675 676 1676 677 1677 678 1678 679 1679 680 1680 681 1681 682 1682 683 1683 684 1684 685 1685 686 1686 687 1687 688 1688 689 1689 690 1690 691 1691 692 1692 693 1693 694 1694 695 1695 696 1696 697 1697 698 1698 699 1699 700 1700 701 1701 702 1702 703 1703 704 1704 705 1705 706 1706 707 1707 708 1708 709 1709 710 1710 711 1711 712 1712 713 1713 714 1714 715 1715 716 1716 717 1717 718 1718 719 1719 720 1720 721 1721 722 1722 723 1723 724 1724 725 1725 726 1726 727 1727 728 1728 729 1729 730 1730 731 1731 732 1732 733 1733 734 1734 735 1735 736 1736 737 1737 738 1738 739 1739 740 1740 741 1741 742 1742 743 1743 744 1744 745 1745 746 1746 747 1747 748 1748 749 1749 750 1750 751 1751 752 1752 753 1753 754 1754 755 1755 756 1756 757 1757 758 1758 759 1759 760 1760 761 1761 762 1762 763 1763 764 1764 765 1765 766 1766 767 1767 768 1768 769 1769 770 1770 771 1771 772 1772 773 1773 774 1774 775 1775 776 1776 777 1777 778 1778 779 1779 780 1780 781 1781 782 1782 783 1783 784 1784 785 1785 786 1786 787 1787 788 1788 789 1789 790 1790 791 1791 792 1792 793 1793 794 1794 795 1795 796 1796 797 1797 798 1798 799 1799 800 1800 801 1801 802 1802 803 1803 804 1804 805 1805 806 1806 807 1807 808 1808 809 1809 810 1810 811 1811 812 1812 813 1813 814 1814 815 1815 816 1816 817 1817 818 1818 819 1819 820 1820 821 1821 822 1822 823 1823 824 1824 825 1825 826 1826 827 1827 828 1828 829 1829 830 1830 831 1831 832 1832 833 1833 834 1834 835 1835 836 1836 837 1837 838 1838 839 1839 840 1840 841 1841 842 1842 843 1843 844 1844 845 1845 846 1846 847 1847 848 1848 849 1849 850 1850 851 1851 852 1852 853 1853 854 1854 855 1855 856 1856 857 1857 858 1858 859 1859 860 1860 861 1861 862 1862 863 1863 864 1864 865 1865 866 1866 867 1867 868 1868 869 1869 870 1870 871 1871 872 1872 873 1873 874 1874 875 1875 876 1876 877 1877 878 1878 879 1879 880 1880 881 1881 882 1882 883 1883 884 1884 885 1885 886 1886 887 1887 888 1888 889 1889 890 1890 891 1891 892 1892 893 1893 894 1894 895 1895 896 1896 897 1897 898 1898 899 1899 900 1900 901 1901 902 1902 903 1903 904 1904 905 1905 906 1906 907 1907 908 1908 909 1909 910 1910 911 1911 912 1912 913 1913 914 1914 915 1915 916 1916 917 1917 918 1918 919 1919 920 1920 921 1921 922 1922 923 1923 924 1924 925 1925 926 1926 927 1927 928 1928 929 1929 930 1930 931 1931 932 1932 933 1933 934 1934 935 1935 936 1936 937 1937 938 1938 939 1939 940 1940 941 1941 942 1942 943 1943 944 1944 945 1945 946 1946 947 1947 948 1948 949 1949 950 1950 951 1951 952 1952 953 1953 954 1954 955 1955 956 1956 957 1957 958 1958 959 1959 960 1960 961 1961 962 1962 963 1963 964 1964 965 1965 966 1966 967 1967 968 1968 969 1969 970 1970 971 1971 972 1972 973 1973 974 1974 975 1975 976 1976 977 1977 978 1978 979 1979 980 1980 981 1981 982 1982 983 1983 984 1984 985 1985 986 1986 987 1987 988 1988 989 1989 990 1990 991 1991 992 1992 993 1993 994 1994 995 1995 996 1996 997 1997 998 1998 999 1999 1000 2000\n", "(()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()())()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()\n"], ["见附件", "NIE\n"], ["见附件", "见附件"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "线段树", "POI（波兰）", "Special Judge"], "title": "[POI 2020/2021 R3] 嵌套 / Nawiasowania", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Nawiasowania](https://szkopul.edu.pl/problemset/problem/YmEnXY44jxuLdZPFrhWOfOQi/statement/)。\n\nd2t2。", "description": "有 $n$ 张卡片，每张上写了一个左括号或右括号。\n\n按 $1\\sim n$ 的顺序排列这些卡片，得到的括号序列是合法的。\n\n给你一个长度为 $n$ 的排列 $p$。\n\n按 $p$ 所示次序排列这些卡片，即新第 $i$ 张放原第 $p_i$ 张，得到的括号序列也是合法的。\n\n构造符合要求的括号序列，按 $1\\sim n$ 的顺序输出。\n\n如果有多解，任意一种都行。无解输出 `NIE`。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数表示排列 $p$。", "outputFormat": "如果有解，输出一行 $n$ 个字符，左括号或右括号。\n\n如果无解，输出 `NIE`。", "hint": "样例解释：![](https://cdn.luogu.com.cn/upload/image_hosting/nf554egx.png)\n\n对于所有数据，$2\\leq n\\leq 1000000$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 20$ | 10 |\n| 2 | $n\\leq 2000$ | 30 |\n| 3 | $p_1=1,p_n=n$ | 35 |\n| 4 |  | 25 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R3] 嵌套 / Nawiasowania", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Nawiasowania](https://szkopul.edu.pl/problemset/problem/YmEnXY44jxuLdZPFrhWOfOQi/statement/)。\n\nd2t2。", "description": "有 $n$ 张卡片，每张上写了一个左括号或右括号。\n\n按 $1\\sim n$ 的顺序排列这些卡片，得到的括号序列是合法的。\n\n给你一个长度为 $n$ 的排列 $p$。\n\n按 $p$ 所示次序排列这些卡片，即新第 $i$ 张放原第 $p_i$ 张，得到的括号序列也是合法的。\n\n构造符合要求的括号序列，按 $1\\sim n$ 的顺序输出。\n\n如果有多解，任意一种都行。无解输出 `NIE`。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数表示排列 $p$。", "outputFormat": "如果有解，输出一行 $n$ 个字符，左括号或右括号。\n\n如果无解，输出 `NIE`。", "hint": "样例解释：![](https://cdn.luogu.com.cn/upload/image_hosting/nf554egx.png)\n\n对于所有数据，$2\\leq n\\leq 1000000$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 20$ | 10 |\n| 2 | $n\\leq 2000$ | 30 |\n| 3 | $p_1=1,p_n=n$ | 35 |\n| 4 |  | 25 |", "locale": "zh-CN"}}}
{"pid": "P9407", "type": "P", "difficulty": 6, "samples": [["15\n", "3 7\n"], ["9992\n", "4993 4999\n"], ["100000000\n", "NIE\n"], ["1000000007\n", "1000000007 1000000007\n"], ["99999999996\n", "295693 1693067\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "POI（波兰）", "Special Judge", "素数判断,质数,筛法", "双指针 two-pointer", "根号分治"], "title": "[POI 2020/2021 R3] 素数和 / Suma liczb pierwszych", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Suma liczb pierwszych](https://szkopul.edu.pl/problemset/problem/8brtPux-IyytS6rOoOR1cJTL/statement/)。\n\nd2t3。", "description": "给你一个数字 $n$，求 $l,r$，使 $[l,r]$ 区间内的所有质数之和等于 $n$。\n\n如果有多解，任意一组均可；无解输出 `NIE`。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "如果有解，一行两个正整数 $l,r$，你的答案。\n\n如果无解，输出 `NIE`。", "hint": "对于所有数据，$1\\leq n\\leq 10^{11}$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 10000$ | 15 |\n| 2 | $n\\leq 10^8$ | 20 |\n| 3 | $n\\leq 2\\times 10^9$ | 40 |\n| 4 |  | 25 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R3] 素数和 / Suma liczb pierwszych", "background": "译自 [XXVIII Olimpiada Informatyczna - III etap](https://sio2.mimuw.edu.pl/c/oi28-3/dashboard/) [Suma liczb pierwszych](https://szkopul.edu.pl/problemset/problem/8brtPux-IyytS6rOoOR1cJTL/statement/)。\n\nd2t3。", "description": "给你一个数字 $n$，求 $l,r$，使 $[l,r]$ 区间内的所有质数之和等于 $n$。\n\n如果有多解，任意一组均可；无解输出 `NIE`。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "如果有解，一行两个正整数 $l,r$，你的答案。\n\n如果无解，输出 `NIE`。", "hint": "对于所有数据，$1\\leq n\\leq 10^{11}$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 10000$ | 15 |\n| 2 | $n\\leq 10^8$ | 20 |\n| 3 | $n\\leq 2\\times 10^9$ | 40 |\n| 4 |  | 25 |", "locale": "zh-CN"}}}
{"pid": "P9408", "type": "P", "difficulty": 3, "samples": [["3\n1 2 3", "0"], ["7\n1 2 6 5 6 7 2", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "『STA - R2』Locked", "background": "GOD_hj 有一把数字密码锁，但是他陷于 whk，没时间来开锁。", "description": "这把锁从左到右有 $n$ 个数，组成了一个序列 $\\{a\\}$。\n\n由于 GOD_hj 的记性不好，所以只要将锁设置为输入任意单峰序列即可打开。具体为：\n$$ a_1 \\le \\cdots \\le a_i \\ge a_{i+1} \\ge \\cdots \\ge a_n\\quad (1 \\le i \\le n) $$\n\nGOD_hj 的锁是拨动式的，即拨一下就能换成临近的一个数（$0$ 和 $9$ 可以互换）。\n\n求最少拨几下可以开锁。", "inputFormat": "第一行一个整数，$n$。\n\n第二行 $n$ 个整数，为序列 $\\{a\\}$。", "outputFormat": "一个整数，为最少要拨动几下。", "hint": "**【样例解释】**\n\n样例二：把第四个 $5$ 变为 $6$ 或把第三个 $6$ 变为 $5$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm n\\le &\\textbf{分值}&\\textbf{特殊性质} \\\\\\hline\n\\textsf{1} & 5 & 5 & \\textbf{无} \\\\\\hline\n\\textsf{2} & 10^3 & 25 & \\textbf{无} \\\\\\hline\n\\textsf{3}  & 5\\times 10^5 & 20 & \\textbf{无} \\\\\\hline\n\\textsf{4} & 5\\times 10^6 & 10 & a_i\\in\\{0,1\\} \\\\\\hline\n\\textsf{5} & 5\\times 10^6 & 40 & \\textbf{无} \\\\\\hline\\hline\n\\end{array}\n$$\n\n对于全部数据，$1\\le n\\le 5\\times 10^6$，$0\\le a_i<10$。\n\n**Upd on 2023/06/12**：新加 5 组 Hack 数据，放入 Subtask 6，不计分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R2』Locked", "background": "GOD_hj 有一把数字密码锁，但是他陷于 whk，没时间来开锁。", "description": "这把锁从左到右有 $n$ 个数，组成了一个序列 $\\{a\\}$。\n\n由于 GOD_hj 的记性不好，所以只要将锁设置为输入任意单峰序列即可打开。具体为：\n$$ a_1 \\le \\cdots \\le a_i \\ge a_{i+1} \\ge \\cdots \\ge a_n\\quad (1 \\le i \\le n) $$\n\nGOD_hj 的锁是拨动式的，即拨一下就能换成临近的一个数（$0$ 和 $9$ 可以互换）。\n\n求最少拨几下可以开锁。", "inputFormat": "第一行一个整数，$n$。\n\n第二行 $n$ 个整数，为序列 $\\{a\\}$。", "outputFormat": "一个整数，为最少要拨动几下。", "hint": "**【样例解释】**\n\n样例二：把第四个 $5$ 变为 $6$ 或把第三个 $6$ 变为 $5$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm n\\le &\\textbf{分值}&\\textbf{特殊性质} \\\\\\hline\n\\textsf{1} & 5 & 5 & \\textbf{无} \\\\\\hline\n\\textsf{2} & 10^3 & 25 & \\textbf{无} \\\\\\hline\n\\textsf{3}  & 5\\times 10^5 & 20 & \\textbf{无} \\\\\\hline\n\\textsf{4} & 5\\times 10^6 & 10 & a_i\\in\\{0,1\\} \\\\\\hline\n\\textsf{5} & 5\\times 10^6 & 40 & \\textbf{无} \\\\\\hline\\hline\n\\end{array}\n$$\n\n对于全部数据，$1\\le n\\le 5\\times 10^6$，$0\\le a_i<10$。\n\n**Upd on 2023/06/12**：新加 5 组 Hack 数据，放入 Subtask 6，不计分。", "locale": "zh-CN"}}}
{"pid": "P9409", "type": "P", "difficulty": 6, "samples": [["1 2\n1\n1 2", "2"], ["3 5\n4\n1 2\n1 3\n1 4\n1 5\n4\n1 2\n2 3\n3 4\n4 5\n4\n1 5\n5 2\n2 4\n4 3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["网络流", "O2优化"], "title": "『STA - R2』交朋友", "background": "> 找呀找呀找朋友 找到一个好朋友 敬个礼呀握握手 你是我的好朋友", "description": "幼儿园开学啦！  \n\n在开学前，有的小朋友会准备一个毛绒玩具，可以分享给其他小朋友~  \n\n具体的，一共有 $t$ 天，每天的座位表可以表示成一张无向图。每天**有毛绒玩具**的小朋友一定会选择一个在这一天和他坐在一起的小朋友，并把毛绒玩具送给他。 \n\n但是老师规定，每个人只能有一个毛绒玩具。  \n\n在这里，我们认为每天每个人会先送出玩具，再从别人那里接受。  \n\n问初始时最多可以有多少小朋友有毛绒玩具。  \n\n注意：这意味着一个合法的传递过程中不能出现存在小朋友送不出毛绒玩具或者存在小朋友拥有超过一个毛绒玩具的情况，一个初始局面是合法的当且仅当存在一种合法的传递过程。", "inputFormat": "第一行两个正整数 $t,n$，表示天数和小朋友的数量。\n\n后描述 $t$ 张图，表示每天的座位表：\n\n每个描述的第一行是一个正整数 $m$ 表示边数。\n\n后 $m$ 行每行两个正整数 $u,v$ 表示图中存在一条无向边 $(u,v)$。", "outputFormat": "输出一行答案。", "hint": "**样例解释**\n\n样例 1 解释：满足条件的唯一方案为初始毛绒玩具位于 $1$ 和 $2$。\n\n样例 2 解释：满足条件的一组方案为初始毛绒玩具位于 $1$ 和 $3$。\n\n***\n**数据范围**\n\n**本题采用捆绑测试。**\n\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm t\\le & \\bm{n,m}\\le & \\textbf{分值} \\\\\\hline\n\\textsf{1} & 1 & 3\\times 10^4 & 5 \\\\\\hline\n\\textsf{2} & 10 & 2 & 5 \\\\\\hline\n\\textsf{3} & 10 & 100 & 20 \\\\\\hline\n\\textsf{4} & 10 & 3\\times10^3& 70 \\\\\\hline\\hline\n\\end{array}\n$$\n对于 $100\\%$ 的数据，$1\\le t\\le10$，$1\\le n,m\\le  3\\times10^4$，但是注意 $t,n,m$ 的范围不会同时达到上界。\n\n保证给出的每张图没有重边、自环。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R2』交朋友", "background": "> 找呀找呀找朋友 找到一个好朋友 敬个礼呀握握手 你是我的好朋友", "description": "幼儿园开学啦！  \n\n在开学前，有的小朋友会准备一个毛绒玩具，可以分享给其他小朋友~  \n\n具体的，一共有 $t$ 天，每天的座位表可以表示成一张无向图。每天**有毛绒玩具**的小朋友一定会选择一个在这一天和他坐在一起的小朋友，并把毛绒玩具送给他。 \n\n但是老师规定，每个人只能有一个毛绒玩具。  \n\n在这里，我们认为每天每个人会先送出玩具，再从别人那里接受。  \n\n问初始时最多可以有多少小朋友有毛绒玩具。  \n\n注意：这意味着一个合法的传递过程中不能出现存在小朋友送不出毛绒玩具或者存在小朋友拥有超过一个毛绒玩具的情况，一个初始局面是合法的当且仅当存在一种合法的传递过程。", "inputFormat": "第一行两个正整数 $t,n$，表示天数和小朋友的数量。\n\n后描述 $t$ 张图，表示每天的座位表：\n\n每个描述的第一行是一个正整数 $m$ 表示边数。\n\n后 $m$ 行每行两个正整数 $u,v$ 表示图中存在一条无向边 $(u,v)$。", "outputFormat": "输出一行答案。", "hint": "**样例解释**\n\n样例 1 解释：满足条件的唯一方案为初始毛绒玩具位于 $1$ 和 $2$。\n\n样例 2 解释：满足条件的一组方案为初始毛绒玩具位于 $1$ 和 $3$。\n\n***\n**数据范围**\n\n**本题采用捆绑测试。**\n\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm t\\le & \\bm{n,m}\\le & \\textbf{分值} \\\\\\hline\n\\textsf{1} & 1 & 3\\times 10^4 & 5 \\\\\\hline\n\\textsf{2} & 10 & 2 & 5 \\\\\\hline\n\\textsf{3} & 10 & 100 & 20 \\\\\\hline\n\\textsf{4} & 10 & 3\\times10^3& 70 \\\\\\hline\\hline\n\\end{array}\n$$\n对于 $100\\%$ 的数据，$1\\le t\\le10$，$1\\le n,m\\le  3\\times10^4$，但是注意 $t,n,m$ 的范围不会同时达到上界。\n\n保证给出的每张图没有重边、自环。", "locale": "zh-CN"}}}
{"pid": "P9410", "type": "P", "difficulty": 6, "samples": [["5 5\n1 2 4\n2 3 5 2\n3 2\n1 2 5\n3 2", "2\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["并查集", "O2优化", "分块", "根号分治"], "title": "『STA - R2』机场修建", "background": "智利在修机场。  ", "description": "有 $n$ 个城市排成一列，最开始是互不连通的。  \n每个城市初始都没有人口。  \n会出现以下操作 / 查询共 $m$ 个：  \n\n1. `1 x y` 开通城市 $x$ 和城市 $y$ 之间的双向航班。  \n2. `2 l r a` 城市 $[l, r]$ 的人口数都 $+a$。  \n3. `3 x` **如果**所有能够到达城市 $x$ 的人都来到城市 $x$，城市 $x$ 有多少人。  ", "inputFormat": "第一行两个数 $n, m$。  \n接下来 $m$ 行，每行一个操作。  ", "outputFormat": "对于所有的操作 $3$ ，输出答案。  ", "hint": "**本题捆绑测试。**  \n- Easy（5pts）：$1 \\le n, m \\le 2 \\times 10^5$，且不存在操作 $1$。  \n- Normal（10pts）：$1 \\le n, m \\le 1000$。  \n- Hard（20pts）：$1 \\le n, m \\le 10^5$，且操作 $3$ 之后不存在操作 $2$。  \n- Lunatic（30pts）：$1 \\le n, m \\le 5 \\times 10^4$。 \n- Overdrive（35pts）：$1 \\le n, m \\le 2 \\times 10^5$。  \n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\times 10^5$，$0 \\le a \\le 10^9$。保证答案在 64 位有符号整形表示的范围内。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dgqoqa8d.png)  \n出于某些原因，给了较多的部分分。  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R2』机场修建", "background": "智利在修机场。  ", "description": "有 $n$ 个城市排成一列，最开始是互不连通的。  \n每个城市初始都没有人口。  \n会出现以下操作 / 查询共 $m$ 个：  \n\n1. `1 x y` 开通城市 $x$ 和城市 $y$ 之间的双向航班。  \n2. `2 l r a` 城市 $[l, r]$ 的人口数都 $+a$。  \n3. `3 x` **如果**所有能够到达城市 $x$ 的人都来到城市 $x$，城市 $x$ 有多少人。  ", "inputFormat": "第一行两个数 $n, m$。  \n接下来 $m$ 行，每行一个操作。  ", "outputFormat": "对于所有的操作 $3$ ，输出答案。  ", "hint": "**本题捆绑测试。**  \n- Easy（5pts）：$1 \\le n, m \\le 2 \\times 10^5$，且不存在操作 $1$。  \n- Normal（10pts）：$1 \\le n, m \\le 1000$。  \n- Hard（20pts）：$1 \\le n, m \\le 10^5$，且操作 $3$ 之后不存在操作 $2$。  \n- Lunatic（30pts）：$1 \\le n, m \\le 5 \\times 10^4$。 \n- Overdrive（35pts）：$1 \\le n, m \\le 2 \\times 10^5$。  \n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\times 10^5$，$0 \\le a \\le 10^9$。保证答案在 64 位有符号整形表示的范围内。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dgqoqa8d.png)  \n出于某些原因，给了较多的部分分。  ", "locale": "zh-CN"}}}
{"pid": "P9411", "type": "P", "difficulty": 7, "samples": [["0\n5 2\n1\n2\n3\n4\n5", "1\n2\n3\n5\n10"], ["0\n5 200\n1\n10\n100\n1000\n10000", "1\n6918\n721868074\n972431902\n815282281"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608]}, "tags": ["多项式", "O2优化", "Catalan 数", "生成函数"], "title": "『STA - R2』Gtrimee", "background": "", "description": "令满足如下条件的儿子有序的无标号有根树数量为 $w_k(n)$：\n- 点数 $n_0\\in[1,n]$。\n- 所有深度为 $k$ 的点都不是叶子。\n\n给定固定正整数 $k$，多次给定正整数 $n$，求 $w_k(n)\\bmod 998244353$ 的值。\n\n此处一个点的深度定义为它到根的唯一简单路径的长度，比如根的深度就是 $0$。", "inputFormat": "**本题有多组询问。**\n\n第一行一个正整数 $id$ 表示 Subtask 编号。\n\n第二行两个正整数 $q,k$，其中 $q$ 表示询问次数。\n\n后 $q$ 行，每行一个正整数 $n$，描述一组询问。", "outputFormat": "$q$ 行，每行对应一个 $w_k(n)\\bmod 998244353$。", "hint": "### 样例解释\n样例 1 解释：\n\n$k=2$，树上恰有 $5$ 个点时的所有方案：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pwgn6z92.png)\n### 数据范围\n**本题采用捆绑测试。**\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm{n}\\le & \\textbf{分值} & \\textbf{特殊性质}\\\\\\hline\n\\textsf{1} & 5 & 5  \\\\\\hline\n\\textsf{2} & 10^2 & 20\\\\\\hline\n\\textsf{3} & 2\\times10^5 & 35 & k=1\\\\\\hline\n\\textsf{4} & 2\\times10^5 & 40\\\\\\hline\\hline\n\\end{array}\n$$\n\n对于全部数据，$1\\le n,q,k\\le 2\\times10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R2』Gtrimee", "background": "", "description": "令满足如下条件的儿子有序的无标号有根树数量为 $w_k(n)$：\n- 点数 $n_0\\in[1,n]$。\n- 所有深度为 $k$ 的点都不是叶子。\n\n给定固定正整数 $k$，多次给定正整数 $n$，求 $w_k(n)\\bmod 998244353$ 的值。\n\n此处一个点的深度定义为它到根的唯一简单路径的长度，比如根的深度就是 $0$。", "inputFormat": "**本题有多组询问。**\n\n第一行一个正整数 $id$ 表示 Subtask 编号。\n\n第二行两个正整数 $q,k$，其中 $q$ 表示询问次数。\n\n后 $q$ 行，每行一个正整数 $n$，描述一组询问。", "outputFormat": "$q$ 行，每行对应一个 $w_k(n)\\bmod 998244353$。", "hint": "### 样例解释\n样例 1 解释：\n\n$k=2$，树上恰有 $5$ 个点时的所有方案：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pwgn6z92.png)\n### 数据范围\n**本题采用捆绑测试。**\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm{n}\\le & \\textbf{分值} & \\textbf{特殊性质}\\\\\\hline\n\\textsf{1} & 5 & 5  \\\\\\hline\n\\textsf{2} & 10^2 & 20\\\\\\hline\n\\textsf{3} & 2\\times10^5 & 35 & k=1\\\\\\hline\n\\textsf{4} & 2\\times10^5 & 40\\\\\\hline\\hline\n\\end{array}\n$$\n\n对于全部数据，$1\\le n,q,k\\le 2\\times10^5$。", "locale": "zh-CN"}}}
{"pid": "P9412", "type": "P", "difficulty": 2, "samples": [["4\n1 6 12 48", "6"], ["3\n1 2 8", "8"], ["1\n1", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "O2优化"], "title": "「NnOI R1-T1」购物", "background": "", "description": "小 R 是一个喜欢购物的女孩子，她生活在欧艾国中。\n\n欧艾国共有 $n$ 种面值的硬币，它们的面值分别为 $1=a_1 < a_2 < a_3 < \\cdots < a_n$，且满足 $a_{i+1}$ 是 $a_i$ 的倍数。欧艾国只有硬币一种付款方式。\n\n欧艾国的商店不支持找零，她在购物时必须支付与价格完全相等的硬币。对于同样的价格，可以有不同的支付方式。例如，如果欧艾国硬币的面值为 $1$ 元和 $5$ 元，那么支付 $7$ 元有两种方式：支付 $7$ 枚 $1$ 元硬币，或者支付 $1$ 枚 $5$ 元硬币和 $2$ 枚 $1$ 元硬币。\n\n由于硬币的质量大致相同，她不希望携带的硬币太重，因此每次购物都会携带符合要求的尽量少的硬币。她发现了一个神奇的现象：有的时候多买 $1$ 元的商品可以使她少带很多硬币。\n\n你能求出最小的 $m$，使得买 $m$ 元的商品需要的硬币数比买 $m-1$ 元的商品需要的硬币数更少吗？", "inputFormat": "第一行一个整数 $n$，表示硬币面值数。\n\n第二行 $n$ 个整数，第 $i$ 个为 $a_i$，表示第 $i$ 种硬币的面值。", "outputFormat": "一行，一个整数 $m$，表示答案。特别地，如果不存在这样的 $m$，请输出 $-1$。", "hint": "### 样例解释\n\n对于样例 $1$，购买 $1\\sim 5$ 元的商品分别需要 $1\\sim 5$ 枚 $1$ 元硬币，购买 $6$ 元的商品只需要 $1$ 枚 $6$ 元硬币。\n\n对于样例 $2$，购买 $1$ 元或 $2$ 元的商品都需要 $1$ 枚硬币，并不满足需要的硬币数更少的要求。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10$，$1=a_1 < a_2 < a_3 < \\cdots < a_n\\le 10^9$，且满足 $a_{i+1}$ 是 $a_i$ 的倍数。\n\n**提示：本题开启捆绑测试。**\n\n本题共 $4$ 个子任务。\n\n| 子任务编号 | $ n \\le $ | 特殊性质 | 分数 |\n|:-:|:-:|:-:|:-:|\n| $ 1 $ | $ 2 $ | 无 | 20 |\n| $ 2 $ | $ 10 $ | 保证 $a_i\\le 10^3$ | 20 |\n| $ 3 $ | $ 10 $ | 保证有解 | 30 |\n| $ 4 $ | $ 10 $ | 无 | 30 |\n\n### 题目来源\n\n| 项目 | 人员 |\n|:-:|:-:|\n| idea | rui_er |\n| std | rui_er |\n| data | rui_er |\n| check | Kevin0501 |\n| solution | rui_er |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「NnOI R1-T1」购物", "background": "", "description": "小 R 是一个喜欢购物的女孩子，她生活在欧艾国中。\n\n欧艾国共有 $n$ 种面值的硬币，它们的面值分别为 $1=a_1 < a_2 < a_3 < \\cdots < a_n$，且满足 $a_{i+1}$ 是 $a_i$ 的倍数。欧艾国只有硬币一种付款方式。\n\n欧艾国的商店不支持找零，她在购物时必须支付与价格完全相等的硬币。对于同样的价格，可以有不同的支付方式。例如，如果欧艾国硬币的面值为 $1$ 元和 $5$ 元，那么支付 $7$ 元有两种方式：支付 $7$ 枚 $1$ 元硬币，或者支付 $1$ 枚 $5$ 元硬币和 $2$ 枚 $1$ 元硬币。\n\n由于硬币的质量大致相同，她不希望携带的硬币太重，因此每次购物都会携带符合要求的尽量少的硬币。她发现了一个神奇的现象：有的时候多买 $1$ 元的商品可以使她少带很多硬币。\n\n你能求出最小的 $m$，使得买 $m$ 元的商品需要的硬币数比买 $m-1$ 元的商品需要的硬币数更少吗？", "inputFormat": "第一行一个整数 $n$，表示硬币面值数。\n\n第二行 $n$ 个整数，第 $i$ 个为 $a_i$，表示第 $i$ 种硬币的面值。", "outputFormat": "一行，一个整数 $m$，表示答案。特别地，如果不存在这样的 $m$，请输出 $-1$。", "hint": "### 样例解释\n\n对于样例 $1$，购买 $1\\sim 5$ 元的商品分别需要 $1\\sim 5$ 枚 $1$ 元硬币，购买 $6$ 元的商品只需要 $1$ 枚 $6$ 元硬币。\n\n对于样例 $2$，购买 $1$ 元或 $2$ 元的商品都需要 $1$ 枚硬币，并不满足需要的硬币数更少的要求。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10$，$1=a_1 < a_2 < a_3 < \\cdots < a_n\\le 10^9$，且满足 $a_{i+1}$ 是 $a_i$ 的倍数。\n\n**提示：本题开启捆绑测试。**\n\n本题共 $4$ 个子任务。\n\n| 子任务编号 | $ n \\le $ | 特殊性质 | 分数 |\n|:-:|:-:|:-:|:-:|\n| $ 1 $ | $ 2 $ | 无 | 20 |\n| $ 2 $ | $ 10 $ | 保证 $a_i\\le 10^3$ | 20 |\n| $ 3 $ | $ 10 $ | 保证有解 | 30 |\n| $ 4 $ | $ 10 $ | 无 | 30 |\n\n### 题目来源\n\n| 项目 | 人员 |\n|:-:|:-:|\n| idea | rui_er |\n| std | rui_er |\n| data | rui_er |\n| check | Kevin0501 |\n| solution | rui_er |", "locale": "zh-CN"}}}
{"pid": "P9413", "type": "P", "difficulty": 3, "samples": [["3\n3 4\n1 2 2\n1 2 3 4\n4 5\n1 2 2 3\n2 3 3 3 4\n6 7\n1 1 2 2 3 4\n1 2 2 2 3 3 3", "2 4\n6 1\n6 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化"], "title": "「NnOI R1-T2」风屿", "background": "「与风为名，屿之齐鸣。」——风屿", "description": "风屿是一块 $ n $ 行，$ m $ 列的群岛，第 $ i $ 行第 $  j $ 列记为 $ (i,j) $。\n\n风屿的重力系统很奇怪，$ (i,j) $ 的重力系数 $ g_{i,j}=a_i+b_j $。$ a,b $ 是两个已知的长度分别为 $ n,m $ 的数组。\n\n我们定义岛 $ (x,y) $ 和 $ (z,w) $ **相邻**当且仅当 $ |x-z|+|y-w|=1 $，定义 $ (x,y) $ 和 $ (z,w) $ **连通**当且仅当两种情况至少有一种满足：\n\n* $ (x,y),(z,w) $ 相邻，且 $ g_{x,y}=g_{z,w} $。\n\n* 存在另一个岛 $ (u,v) $ 使得 $ (x,y) $ 和 $ (u,v) $ 连通且 $ (u,v) $ 和 $ (z,w) $ 连通，也就是说，连通关系**具有传递性**。\n\n我们定义无序互异的岛集 $ \\{(x_i,y_i)\\} $ 为**同色连通块**，当且仅当岛集中任意两岛连通。\n\n找到最大的同色连通块，并求出大小和这样的块的个数。", "inputFormat": "**本题多测**，第一行一个正整数 $ T $，代表该测试点内测试数据组数。\n\n对于每组测试数据：\n\n第一行 $ n $，$ m $，表示风屿的行数和列数。\n\n接下来一行 $ n $ 个整数，代表 $ a $ 数组。\n\n接下来一行 $ m $ 个整数，代表 $ b $ 数组。", "outputFormat": "$ T $ 行，每行代表该组测试数据的答案（最大块大小和个数）。", "hint": "### 样例解释\n\n对于样例 $ 1 $：\n\n对于第 $ 1 $ 组测试数据，重力系数依次如下：\n\n```\n2 3 4 5\n3 4 5 6\n3 4 5 6\n```\n\n```\n2 3 4 5\n* # ? .\n* # ? .\n```\n\n标记符号的为最大的同色连通块，大小为 $ 2 $，共 $ 4 $ 个。\n\n### 数据范围\n\n对于 $ 20\\% $ 的数据，$ n,m \\le 10^3 $。\n\n对于另 $ 20\\% $ 的数据，所有 $ b_i $ 相等。\n\n对于另 $ 20\\% $ 的数据，第二问答案一定为 $ 1 $。\n\n对于另 $ 20\\% $ 的数据，$ T=1 $，这四档部分分表示的测试点集合互不包含。\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 5 $，$ 1 \\le n,m \\le 10^5 $，$ 1 \\le a_i,b_i \\le 10^9 $。\n\n### 题目来源\n\n| 项目 | 人员 |\n|:-:|:-:|\n| idea | Kevin0501 |\n| std | Kevin0501\n| data | EstasTonne |\n| check | EstasTonne |\n| solution | Kevin0501 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「NnOI R1-T2」风屿", "background": "「与风为名，屿之齐鸣。」——风屿", "description": "风屿是一块 $ n $ 行，$ m $ 列的群岛，第 $ i $ 行第 $  j $ 列记为 $ (i,j) $。\n\n风屿的重力系统很奇怪，$ (i,j) $ 的重力系数 $ g_{i,j}=a_i+b_j $。$ a,b $ 是两个已知的长度分别为 $ n,m $ 的数组。\n\n我们定义岛 $ (x,y) $ 和 $ (z,w) $ **相邻**当且仅当 $ |x-z|+|y-w|=1 $，定义 $ (x,y) $ 和 $ (z,w) $ **连通**当且仅当两种情况至少有一种满足：\n\n* $ (x,y),(z,w) $ 相邻，且 $ g_{x,y}=g_{z,w} $。\n\n* 存在另一个岛 $ (u,v) $ 使得 $ (x,y) $ 和 $ (u,v) $ 连通且 $ (u,v) $ 和 $ (z,w) $ 连通，也就是说，连通关系**具有传递性**。\n\n我们定义无序互异的岛集 $ \\{(x_i,y_i)\\} $ 为**同色连通块**，当且仅当岛集中任意两岛连通。\n\n找到最大的同色连通块，并求出大小和这样的块的个数。", "inputFormat": "**本题多测**，第一行一个正整数 $ T $，代表该测试点内测试数据组数。\n\n对于每组测试数据：\n\n第一行 $ n $，$ m $，表示风屿的行数和列数。\n\n接下来一行 $ n $ 个整数，代表 $ a $ 数组。\n\n接下来一行 $ m $ 个整数，代表 $ b $ 数组。", "outputFormat": "$ T $ 行，每行代表该组测试数据的答案（最大块大小和个数）。", "hint": "### 样例解释\n\n对于样例 $ 1 $：\n\n对于第 $ 1 $ 组测试数据，重力系数依次如下：\n\n```\n2 3 4 5\n3 4 5 6\n3 4 5 6\n```\n\n```\n2 3 4 5\n* # ? .\n* # ? .\n```\n\n标记符号的为最大的同色连通块，大小为 $ 2 $，共 $ 4 $ 个。\n\n### 数据范围\n\n对于 $ 20\\% $ 的数据，$ n,m \\le 10^3 $。\n\n对于另 $ 20\\% $ 的数据，所有 $ b_i $ 相等。\n\n对于另 $ 20\\% $ 的数据，第二问答案一定为 $ 1 $。\n\n对于另 $ 20\\% $ 的数据，$ T=1 $，这四档部分分表示的测试点集合互不包含。\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 5 $，$ 1 \\le n,m \\le 10^5 $，$ 1 \\le a_i,b_i \\le 10^9 $。\n\n### 题目来源\n\n| 项目 | 人员 |\n|:-:|:-:|\n| idea | Kevin0501 |\n| std | Kevin0501\n| data | EstasTonne |\n| check | EstasTonne |\n| solution | Kevin0501 |", "locale": "zh-CN"}}}
{"pid": "P9414", "type": "P", "difficulty": 4, "samples": [["6 4 3\n1 2\n2 3\n3 4\n3 5\n3 6", "1"], ["6 3 2\n1 2\n1 3\n1 4\n1 5\n1 6", "20"], ["6 4 2\n1 2\n1 3\n2 4\n2 5\n3 6", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "背包 DP", "树形 DP"], "title": "「NnOI R1-T3」元组", "background": "小 L 很喜欢树，很喜欢 $ \\operatorname{LCA} $，很喜欢有序元组，于是有了这样一道题。", "description": "对于一棵 $ n $ 点有根树（根为 $ 1 $），定义有序 $ p $ 元组 $ (a_1,a_2,......,a_p) $ 为 $ k $ 级 $ \\operatorname{LCA} $ $ p $ 元组当且仅当：\n\n* $ 1 \\le a_1<a_2<......<a_p \\le n $\n\n* 存在 $ x $ 使得对于任意有序严格递增 $ k $ 元组 $ b \\subseteq a $ 均满足 $ \\operatorname{LCA}_{i=1}^{k}\\{b_i\\} = x $。\n\n注意，$ \\operatorname{LCA}(x,y) $ 指树上 $ x $ 点和 $ y $ 点的最近公共祖先，且 $ \\operatorname{LCA}_{i=1}^{k}\\{b_i\\} $ 指的是所有的 $ b_i $ 的 $ \\operatorname{LCA} $。\n\n求出 $ k $ 级 $ \\operatorname{LCA} $ $ p $ 元组的个数，对 $ 10^9+7 $ 取模。", "inputFormat": "第一行一个整数 $ n,p,k $。\n\n接下来 $ n-1 $ 行，每行两个整数代表一条边的两个端点的编号。", "outputFormat": "输出一个整数代表要求的答案。", "hint": "**【样例 1 解释】**\n\n对于样例 $ 1 $，我们发现符合要求的 $ 4 $ 元组只有 $ (3,4,5,6) $。\n\n**【数据规模与约定】**\n\n对于 $ 100\\% $ 的数据，$ 2 \\le n \\le 5000 $，$ 2 \\le k \\le p \\le n $。\n\n**提示：本题开启捆绑测试。**\n\n* Subtask 1（10 pts）：$ n \\le 10 $。\n* Subtask 2（20 pts）：$ n \\le 20 $。\n* Subtask 3（30 pts）：$ n \\le 500 $。\n* Subtask 4（10 pts）：$ 1 $ 和所有点存在直接连边。\n* Subtask 5（30 pts）：无特殊限制。\n\n**【贡献名单】**\n\ndata&check：EstasTonne。（主题库里这个题下一个题号的出题人）", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「NnOI R1-T3」元组", "background": "小 L 很喜欢树，很喜欢 $ \\operatorname{LCA} $，很喜欢有序元组，于是有了这样一道题。", "description": "对于一棵 $ n $ 点有根树（根为 $ 1 $），定义有序 $ p $ 元组 $ (a_1,a_2,......,a_p) $ 为 $ k $ 级 $ \\operatorname{LCA} $ $ p $ 元组当且仅当：\n\n* $ 1 \\le a_1<a_2<......<a_p \\le n $\n\n* 存在 $ x $ 使得对于任意有序严格递增 $ k $ 元组 $ b \\subseteq a $ 均满足 $ \\operatorname{LCA}_{i=1}^{k}\\{b_i\\} = x $。\n\n注意，$ \\operatorname{LCA}(x,y) $ 指树上 $ x $ 点和 $ y $ 点的最近公共祖先，且 $ \\operatorname{LCA}_{i=1}^{k}\\{b_i\\} $ 指的是所有的 $ b_i $ 的 $ \\operatorname{LCA} $。\n\n求出 $ k $ 级 $ \\operatorname{LCA} $ $ p $ 元组的个数，对 $ 10^9+7 $ 取模。", "inputFormat": "第一行一个整数 $ n,p,k $。\n\n接下来 $ n-1 $ 行，每行两个整数代表一条边的两个端点的编号。", "outputFormat": "输出一个整数代表要求的答案。", "hint": "**【样例 1 解释】**\n\n对于样例 $ 1 $，我们发现符合要求的 $ 4 $ 元组只有 $ (3,4,5,6) $。\n\n**【数据规模与约定】**\n\n对于 $ 100\\% $ 的数据，$ 2 \\le n \\le 5000 $，$ 2 \\le k \\le p \\le n $。\n\n**提示：本题开启捆绑测试。**\n\n* Subtask 1（10 pts）：$ n \\le 10 $。\n* Subtask 2（20 pts）：$ n \\le 20 $。\n* Subtask 3（30 pts）：$ n \\le 500 $。\n* Subtask 4（10 pts）：$ 1 $ 和所有点存在直接连边。\n* Subtask 5（30 pts）：无特殊限制。\n\n**【贡献名单】**\n\ndata&check：EstasTonne。（主题库里这个题下一个题号的出题人）", "locale": "zh-CN"}}}
{"pid": "P9415", "type": "P", "difficulty": 5, "samples": [["3\n100 7\n63 9\n25 8", "69"], ["10\n99 191\n30 82\n144 52\n11 0\n149 70\n65 117\n73 37\n39 101\n135 92\n43 33", "99"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "线段树", "O2优化", "动态规划优化"], "title": "「NnOI R1-T4」下楼", "background": "引入一个简单的问题作为铺垫。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3a1iicbb.png)\n\n假如你现在站在一栋高为 $200m$ 的楼上，人的大小忽略不计。\n\n楼的 $100m$ 和 $200m$ 处分别突出一根无限长的钢管，人默认可以安全地站在上面。\n\n你的手中有一把剪刀和一条长为 $150m$ 且极细的绳子，你可以打死结，不能打活结，且结的大小忽略不计。问你怎么安全下到地面。\n\n解法：\n\n$150m$ 长的绳子不足以让我们直接下去，所以必然需要借助第二根钢管。于是我们考虑将绳子弄成这样子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0pbb5lun.png)\n\n即将绳子剪成 $50m$ 和 $100m$ 两段，$50m$ 长的绳子的末端打一个小环，然后将 $100m$ 长的绳子穿入小环并首尾连接。这样就凑出了 $100m$ 的绳子。\n\n把 $50m$ 绳子的另一端系在第一根钢管上，借助它下到第二根钢管，用剪刀剪断环，抽出 $100m$ 长的绳子，即可顺利下到地面。我们称这种方法为“环套”法。\n\n以下是整个过程示意图。\n\n![](https://s1.ax1x.com/2023/06/01/p9zy3qI.jpg)\n\n注意：图中的圆圈代表绳两端系着的小环，实际大小忽略不计。\n\n“环套法”中，我们把绳子分为两部分：环和链。其中环可以回收利用。\n\n在接下来的题目场景中，我们默认只有“环套法”和“简化的环套法”两种方式可用。其中“简化的环套法”为环的长度为 $0$ 或链的长度为 $0$。\n\n（感谢 huzheng20 提供的图 Orz）", "description": "在一栋楼上有 $n$ 个钢管，其中第 $i$ 个钢管高度为 $h_i$，权值为 $v_i$，你处在最高的某个钢管上，手中有一把剪刀和一条绳子，要求所经过的钢管权值必须组成单调**不减**序列。\n\n某些钢管的高度可能相同，这意味着你在这个高度可以选择不同权值的钢管落脚。\n\n你的绳子的初始长度必须为**正整数**，但你可以在使用环套法后回收得到一根非整数长度的绳子。\n\n问最少需要多长的绳子才能下到地面。", "inputFormat": "第一行一个正整数 $n$，表示钢管个数。\n\n接下来 $n$ 行，每行两个正整数 $h_i,v_i$，表示第 $i$ 个钢管的高度和权值。", "outputFormat": "一行一个正整数表示最少需要多长的绳子。", "hint": "**本题开启捆绑测试**。\n\n对于 $10\\%$ 的数据，保证从高到低来看，钢管权值组成单调**不增**序列。\n\n对于另外 $10\\%$ 的数据，保证 $n\\le 10^4$。\n\n对于另外 $40\\%$ 的数据，保证 $n\\le 10^5$ 且不存在下标 $i,j$ 满足 $h_i=h_j$ 或 $v_i=v_j$。\n\n对于所有数据，保证 $1\\le n\\le 5\\times 10^5$，$1\\le h,v\\le 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「NnOI R1-T4」下楼", "background": "引入一个简单的问题作为铺垫。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3a1iicbb.png)\n\n假如你现在站在一栋高为 $200m$ 的楼上，人的大小忽略不计。\n\n楼的 $100m$ 和 $200m$ 处分别突出一根无限长的钢管，人默认可以安全地站在上面。\n\n你的手中有一把剪刀和一条长为 $150m$ 且极细的绳子，你可以打死结，不能打活结，且结的大小忽略不计。问你怎么安全下到地面。\n\n解法：\n\n$150m$ 长的绳子不足以让我们直接下去，所以必然需要借助第二根钢管。于是我们考虑将绳子弄成这样子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0pbb5lun.png)\n\n即将绳子剪成 $50m$ 和 $100m$ 两段，$50m$ 长的绳子的末端打一个小环，然后将 $100m$ 长的绳子穿入小环并首尾连接。这样就凑出了 $100m$ 的绳子。\n\n把 $50m$ 绳子的另一端系在第一根钢管上，借助它下到第二根钢管，用剪刀剪断环，抽出 $100m$ 长的绳子，即可顺利下到地面。我们称这种方法为“环套”法。\n\n以下是整个过程示意图。\n\n![](https://s1.ax1x.com/2023/06/01/p9zy3qI.jpg)\n\n注意：图中的圆圈代表绳两端系着的小环，实际大小忽略不计。\n\n“环套法”中，我们把绳子分为两部分：环和链。其中环可以回收利用。\n\n在接下来的题目场景中，我们默认只有“环套法”和“简化的环套法”两种方式可用。其中“简化的环套法”为环的长度为 $0$ 或链的长度为 $0$。\n\n（感谢 huzheng20 提供的图 Orz）", "description": "在一栋楼上有 $n$ 个钢管，其中第 $i$ 个钢管高度为 $h_i$，权值为 $v_i$，你处在最高的某个钢管上，手中有一把剪刀和一条绳子，要求所经过的钢管权值必须组成单调**不减**序列。\n\n某些钢管的高度可能相同，这意味着你在这个高度可以选择不同权值的钢管落脚。\n\n你的绳子的初始长度必须为**正整数**，但你可以在使用环套法后回收得到一根非整数长度的绳子。\n\n问最少需要多长的绳子才能下到地面。", "inputFormat": "第一行一个正整数 $n$，表示钢管个数。\n\n接下来 $n$ 行，每行两个正整数 $h_i,v_i$，表示第 $i$ 个钢管的高度和权值。", "outputFormat": "一行一个正整数表示最少需要多长的绳子。", "hint": "**本题开启捆绑测试**。\n\n对于 $10\\%$ 的数据，保证从高到低来看，钢管权值组成单调**不增**序列。\n\n对于另外 $10\\%$ 的数据，保证 $n\\le 10^4$。\n\n对于另外 $40\\%$ 的数据，保证 $n\\le 10^5$ 且不存在下标 $i,j$ 满足 $h_i=h_j$ 或 $v_i=v_j$。\n\n对于所有数据，保证 $1\\le n\\le 5\\times 10^5$，$1\\le h,v\\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P9416", "type": "P", "difficulty": 3, "samples": [["4\n", "5\n"], ["101\n", "NIE\n"], ["9\n", "7\n"], ["11\n", "NIE\n"], ["500\n", "20\n"], ["112233445566778899\n", "NIE\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "搜索", "POI（波兰）", "2021"], "title": "[POI 2021/2022 R1] Domino", "background": "译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Domino](https://sio2.mimuw.edu.pl/c/oi29-1/p/dom/)。", "description": "> 有一个 $2$ 行 $n$ 列的矩形，上面有若干个格子被占用了。你要用 $1\\times 2$ 或 $2\\times 1$ 的牌，覆盖所有未被占用的格子，一个格子不可被占用两次。记方案数为 $m$。\n\n给你 $m$，求出最小的 $n$，使得存在一种方案设置占用格，使得覆盖的方案数恰好为 $m$。无解输出 `NIE`。", "inputFormat": "一行一个正整数 $m$。", "outputFormat": "如果有解，输出你的答案 $n$。\n\n如果无解，输出 `NIE`。", "hint": "对于所有数据，$1\\leq m\\leq 10^{18}$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | 答案 $\\leq 12$ | 20 |\n| 2 | $m\\leq 2000000$ | 30 |\n| 3 |  | 50 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2021/2022 R1] Domino", "background": "译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Domino](https://sio2.mimuw.edu.pl/c/oi29-1/p/dom/)。", "description": "> 有一个 $2$ 行 $n$ 列的矩形，上面有若干个格子被占用了。你要用 $1\\times 2$ 或 $2\\times 1$ 的牌，覆盖所有未被占用的格子，一个格子不可被占用两次。记方案数为 $m$。\n\n给你 $m$，求出最小的 $n$，使得存在一种方案设置占用格，使得覆盖的方案数恰好为 $m$。无解输出 `NIE`。", "inputFormat": "一行一个正整数 $m$。", "outputFormat": "如果有解，输出你的答案 $n$。\n\n如果无解，输出 `NIE`。", "hint": "对于所有数据，$1\\leq m\\leq 10^{18}$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | 答案 $\\leq 12$ | 20 |\n| 2 | $m\\leq 2000000$ | 30 |\n| 3 |  | 50 |", "locale": "zh-CN"}}}
{"pid": "P9417", "type": "P", "difficulty": 6, "samples": [["5 8\naabaaaaa\nbabaabbb\naabaaaaa\naabaaaaa\nabaaabaa\n", "1\n4\n"], ["1 1000\naaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n", "16\n1 2 4 5 8 10 20 25 40 50 100 125 200 250 500 1000\n"], ["3 1000\nabababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababab\nabababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababab\nabababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababababab\n", "12\n2 4 8 10 20 40 50 100 200 250 500 1000\n"], ["4 9\naabaaabaa\nbabababab\naabaaabaa\nabaabaaba\n", "1\n3\n"], ["见附件", "0\n\n"], ["见附件", "1\n4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "POI（波兰）", "2021", "Ad-hoc"], "title": "[POI 2021/2022 R1] Druk", "background": "译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Druk](https://sio2.mimuw.edu.pl/c/oi29-1/p/dru/)。", "description": "给你一个 $n\\times m$ 的字符矩形，只含小写英文字母。\n\n你需要制作两块模板，一个是横的（一行 $l$ 列），一个是竖的（$l$ 行一列），$l$ 称为模板长度，上面有完全相同的字符串（从左到右，从上到下，不可翻转）。你需要保证你可以用这两块模板不重不漏地印刷这个字符矩形。\n\n模板的制作方案可能有很多，你只需要输出所有的可行的模板长度即可。", "inputFormat": "第一行两个正整数 $n,m$，表示矩形大小。\n\n接下来是一个 $n$ 行 $m$ 列的字符矩形，只含小写英文字母。", "outputFormat": "第一行一个整数，表示你找到的可行长度的个数。\n\n第二行若干个整数，你找到的所有可行长度。", "hint": "样例一解释：![图挂了](https://cdn.luogu.com.cn/upload/image_hosting/2zs08vop.png)\n\n样例四解释：![图挂了](https://cdn.luogu.com.cn/upload/image_hosting/p1zo7v6x.png)\n\n对于所有数据，$1\\leq n,m\\leq 1000$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n=1,m\\leq 1000$ | 10 |\n| 2 | $n\\leq 3,m\\leq 1000$ | 25 |\n| 3 | $n,m\\leq 20$ | 20 |\n| 4 |  | 45 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2021/2022 R1] Druk", "background": "译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Druk](https://sio2.mimuw.edu.pl/c/oi29-1/p/dru/)。", "description": "给你一个 $n\\times m$ 的字符矩形，只含小写英文字母。\n\n你需要制作两块模板，一个是横的（一行 $l$ 列），一个是竖的（$l$ 行一列），$l$ 称为模板长度，上面有完全相同的字符串（从左到右，从上到下，不可翻转）。你需要保证你可以用这两块模板不重不漏地印刷这个字符矩形。\n\n模板的制作方案可能有很多，你只需要输出所有的可行的模板长度即可。", "inputFormat": "第一行两个正整数 $n,m$，表示矩形大小。\n\n接下来是一个 $n$ 行 $m$ 列的字符矩形，只含小写英文字母。", "outputFormat": "第一行一个整数，表示你找到的可行长度的个数。\n\n第二行若干个整数，你找到的所有可行长度。", "hint": "样例一解释：![图挂了](https://cdn.luogu.com.cn/upload/image_hosting/2zs08vop.png)\n\n样例四解释：![图挂了](https://cdn.luogu.com.cn/upload/image_hosting/p1zo7v6x.png)\n\n对于所有数据，$1\\leq n,m\\leq 1000$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n=1,m\\leq 1000$ | 10 |\n| 2 | $n\\leq 3,m\\leq 1000$ | 25 |\n| 3 | $n,m\\leq 20$ | 20 |\n| 4 |  | 45 |", "locale": "zh-CN"}}}
{"pid": "P9418", "type": "P", "difficulty": 5, "samples": [["5\n3 4 3 4 1\n", "2\n"], ["见附件", "0"], ["见附件", "1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["POI（波兰）", "2021"], "title": "[POI 2021/2022 R1] Impreza krasnali", "background": "译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Impreza krasnali](https://sio2.mimuw.edu.pl/c/oi29-1/p/imp/)。", "description": "有 $n$ 个人依次站成一排，每个人手上都有一个数字，这 $n$ 个数字形成一个排列。\n\n每个人会二选一地报告他左边或右边的人手上的数字。注意第一个人与第 $n$ 个人并不相邻，所以第一个人总是会报告第二个人的数字，第 $n$ 个人总是会报告第 $n-1$ 个人的数字。\n\n现在你得到了 $n$ 个人报告的数字，求出原先的排列有多少种可能。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，表示每个人报告的数字。", "outputFormat": "一行一个整数，你的答案模 $10^9+7$。", "hint": "对于所有数据，$2\\leq n\\leq 100000$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 10$ | 12 |\n| 2 | $n\\leq 20$ | 30 |\n| 3 | $n\\leq 1000$ | 30 |\n| 4 |  | 28 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2021/2022 R1] Impreza krasnali", "background": "译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Impreza krasnali](https://sio2.mimuw.edu.pl/c/oi29-1/p/imp/)。", "description": "有 $n$ 个人依次站成一排，每个人手上都有一个数字，这 $n$ 个数字形成一个排列。\n\n每个人会二选一地报告他左边或右边的人手上的数字。注意第一个人与第 $n$ 个人并不相邻，所以第一个人总是会报告第二个人的数字，第 $n$ 个人总是会报告第 $n-1$ 个人的数字。\n\n现在你得到了 $n$ 个人报告的数字，求出原先的排列有多少种可能。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，表示每个人报告的数字。", "outputFormat": "一行一个整数，你的答案模 $10^9+7$。", "hint": "对于所有数据，$2\\leq n\\leq 100000$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 10$ | 12 |\n| 2 | $n\\leq 20$ | 30 |\n| 3 | $n\\leq 1000$ | 30 |\n| 4 |  | 28 |", "locale": "zh-CN"}}}
{"pid": "P9419", "type": "P", "difficulty": 7, "samples": [["2 100\n", "1\n"], ["3 100\n", "15\n"], ["10 1000\n", "100\n"], ["500 100000\n", "60000\n"], ["100000 1000\n", "0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "递推", "POI（波兰）", "2021"], "title": "[POI 2021/2022 R1] Układanie kart", "background": "译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Układanie kart](https://sio2.mimuw.edu.pl/c/oi29-1/p/ukl/)。", "description": "我们用以下方法将一个排列递增排序:\n\n一次操作：记第一个数字为 $k$，在排列中找到 $k-1$（$k=1$ 则取 $n$），把 $k-1$ 拉到排列的第一个位置，中间的数字依次后移。\n\n一次操作的价值：$k-1$（或 $n$）在原排列的位置（这个从 $0$ 开始标号）。\n\n一个排列的价值：进行若干次操作直到排列有序，价值为每次操作的价值之和。\n\n给你 $n,m$，求所有 $n!$ 个排列的价值之和，对 $m$ 取模。", "inputFormat": "一行两个正整数，$n,m$。", "outputFormat": "一行一个整数，答案对 $m$ 取模的结果。", "hint": "对于所有数据，$2\\leq n\\leq 1000000$，$2\\leq m\\leq 10^9$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 10$ | 10 |\n| 2 | $n\\leq 2000$ | 60 |\n| 3 |  | 30 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2021/2022 R1] Układanie kart", "background": "译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Układanie kart](https://sio2.mimuw.edu.pl/c/oi29-1/p/ukl/)。", "description": "我们用以下方法将一个排列递增排序:\n\n一次操作：记第一个数字为 $k$，在排列中找到 $k-1$（$k=1$ 则取 $n$），把 $k-1$ 拉到排列的第一个位置，中间的数字依次后移。\n\n一次操作的价值：$k-1$（或 $n$）在原排列的位置（这个从 $0$ 开始标号）。\n\n一个排列的价值：进行若干次操作直到排列有序，价值为每次操作的价值之和。\n\n给你 $n,m$，求所有 $n!$ 个排列的价值之和，对 $m$ 取模。", "inputFormat": "一行两个正整数，$n,m$。", "outputFormat": "一行一个整数，答案对 $m$ 取模的结果。", "hint": "对于所有数据，$2\\leq n\\leq 1000000$，$2\\leq m\\leq 10^9$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 10$ | 10 |\n| 2 | $n\\leq 2000$ | 60 |\n| 3 |  | 30 |", "locale": "zh-CN"}}}
{"pid": "P9420", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000, 1000], "memory": [262144, 262144]}, "tags": ["动态规划 DP", "2023", "提交答案", "素数判断,质数,筛法", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 子 2023 / 双子数", "background": "", "description": "## A 子 2023\n\n小蓝在黑板上连续写下从 $1$ 到 $2023$ 之间所有的整数，得到了一个数字序列：\n\n$$S = 12345678910111213\\cdots 20222023$$\n\n小蓝想知道 $S$ 中有多少种子序列恰好等于 $2023$？\n\n提示，以下是 $3$ 种满足条件的子序列（用中括号标识出的数字是子序列包含的数字）：\n\n$$1[\\textbf2]34567891[\\textbf0]111[\\textbf2]1[\\textbf3]14151617181920212223 \\cdots$$\n\n$$1[\\textbf2]34567891[\\textbf0]111[\\textbf2]131415161718192021222[\\textbf3] \\cdots$$\n\n$$1[\\textbf2]34567891[\\textbf0]111213141516171819[\\textbf2]021222[\\textbf3] \\cdots$$\n\n注意以下是不满足条件的子序列，虽然包含了 $2$、$0$、$2$、$3$ 四个数字，但是顺序不对：\n\n$$1[\\textbf2]345678910111[\\textbf2]131415161718192[\\textbf0]21222[\\textbf3] \\cdots$$\n\n## B 双子数\n\n若一个正整数 $x$ 可以被表示为 $p^2 \\times q^2$，其中 $p$、$q$ 为质数且 $p \\neq q$，则 $x$ 是\n一个 “双子数”。请计算区间 $[2333, 23333333333333]$ 内有多少个 “双子数”？", "inputFormat": "输入一个大写字母，表示第几个问题。\n", "outputFormat": "根据所输入的问题编号，输出对应问题的答案。\n", "hint": "答题模板，可供参考。\n\n```cpp\n#include<iostream>\nusing namespace std;\nint main() {\n    string ans [] = {\n        \"The answer of task A\", // 双引号中替换为 A 题的答案\n        \"The answer of task B\", // 双引号中替换为 B 题的答案\n    };\n    char T;\n    cin >> T;\n    cout << ans[T - 'A'] << endl;\n    return 0;\n}\n```\n\n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 A、B 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 子 2023 / 双子数", "background": "", "description": "## A 子 2023\n\n小蓝在黑板上连续写下从 $1$ 到 $2023$ 之间所有的整数，得到了一个数字序列：\n\n$$S = 12345678910111213\\cdots 20222023$$\n\n小蓝想知道 $S$ 中有多少种子序列恰好等于 $2023$？\n\n提示，以下是 $3$ 种满足条件的子序列（用中括号标识出的数字是子序列包含的数字）：\n\n$$1[\\textbf2]34567891[\\textbf0]111[\\textbf2]1[\\textbf3]14151617181920212223 \\cdots$$\n\n$$1[\\textbf2]34567891[\\textbf0]111[\\textbf2]131415161718192021222[\\textbf3] \\cdots$$\n\n$$1[\\textbf2]34567891[\\textbf0]111213141516171819[\\textbf2]021222[\\textbf3] \\cdots$$\n\n注意以下是不满足条件的子序列，虽然包含了 $2$、$0$、$2$、$3$ 四个数字，但是顺序不对：\n\n$$1[\\textbf2]345678910111[\\textbf2]131415161718192[\\textbf0]21222[\\textbf3] \\cdots$$\n\n## B 双子数\n\n若一个正整数 $x$ 可以被表示为 $p^2 \\times q^2$，其中 $p$、$q$ 为质数且 $p \\neq q$，则 $x$ 是\n一个 “双子数”。请计算区间 $[2333, 23333333333333]$ 内有多少个 “双子数”？", "inputFormat": "输入一个大写字母，表示第几个问题。\n", "outputFormat": "根据所输入的问题编号，输出对应问题的答案。\n", "hint": "答题模板，可供参考。\n\n```cpp\n#include<iostream>\nusing namespace std;\nint main() {\n    string ans [] = {\n        \"The answer of task A\", // 双引号中替换为 A 题的答案\n        \"The answer of task B\", // 双引号中替换为 B 题的答案\n    };\n    char T;\n    cin >> T;\n    cout << ans[T - 'A'] << endl;\n    return 0;\n}\n```\n\n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 A、B 题", "locale": "zh-CN"}}}
{"pid": "P9421", "type": "P", "difficulty": 2, "samples": [["4\n1 2 2 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2023", "蓝桥杯国赛", "分类讨论"], "title": "[蓝桥杯 2023 国 B] 班级活动", "background": "", "description": "小明的老师准备组织一次班级活动。班上一共有 $n$ 名（$n$ 为偶数）同学，老师想把所有的同学进行分组，每两名同学一组。为了公平，老师给每名同学随机分配了一个 $n$ 以内的正整数作为 id，第 $i$ 名同学的 id 为 $a_i$。\n\n老师希望通过更改若干名同学的 id 使得对于任意一名同学 $i$，有且仅有另一名同学 $j$ 的 id 与其相同（$a_i = a_j$）。请问老师最少需要更改多少名同学的 id？", "inputFormat": "输入共 $2$ 行。\n\n第一行为一个正整数 $n$。\n\n第二行为 $n$ 个由空格隔开的整数 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "输出共 $1$ 行，一个整数。", "hint": "### 样例说明\n\n仅需要把 $a_1$ 改为 $3$ 或者把 $a_4$ 改为 $1$ 即可。\n\n### 评测用例规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n \\le 10^3$。\n- 对于 $100\\%$ 的数据，保证 $n \\le 10^5$。\n\n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 C 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 班级活动", "background": "", "description": "小明的老师准备组织一次班级活动。班上一共有 $n$ 名（$n$ 为偶数）同学，老师想把所有的同学进行分组，每两名同学一组。为了公平，老师给每名同学随机分配了一个 $n$ 以内的正整数作为 id，第 $i$ 名同学的 id 为 $a_i$。\n\n老师希望通过更改若干名同学的 id 使得对于任意一名同学 $i$，有且仅有另一名同学 $j$ 的 id 与其相同（$a_i = a_j$）。请问老师最少需要更改多少名同学的 id？", "inputFormat": "输入共 $2$ 行。\n\n第一行为一个正整数 $n$。\n\n第二行为 $n$ 个由空格隔开的整数 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "输出共 $1$ 行，一个整数。", "hint": "### 样例说明\n\n仅需要把 $a_1$ 改为 $3$ 或者把 $a_4$ 改为 $1$ 即可。\n\n### 评测用例规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n \\le 10^3$。\n- 对于 $100\\%$ 的数据，保证 $n \\le 10^5$。\n\n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 C 题", "locale": "zh-CN"}}}
{"pid": "P9422", "type": "P", "difficulty": 3, "samples": [["4 3\n1 2 3 4\n1 5 4", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "队列", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 合并数列", "background": "", "description": "小明发现有很多方案可以把一个很大的正整数拆成若干正整数的和。他采取了其中两种方案，分别将他们列为两个数组 $\\{a_1, a_2, \\cdots a_n\\}$ 和 $\\{b_1, b_2, \\cdots b_m\\}$。两个数组的和相同。\n\n定义一次合并操作可以将某数组内相邻的两个数合并为一个新数，新数的值是原来两个数的和。小明想通过若干次合并操作将两个数组变成一模一样，即 $n = m$ 且对于任意下标 $i$ 满足 $a_i = b_i$。请计算至少需要多少次合并操作可以完成小明的目标。", "inputFormat": "输入共 $3$ 行。\n\n第一行为两个正整数 $n, m$。\n\n第二行为 $n$ 个由空格隔开的整数 $a_1, a_2, \\cdots, a_n$。\n\n第三行为 $m$ 个由空格隔开的整数 $b_1, b_2, \\cdots, b_m$。", "outputFormat": "输出共 $1$ 行，一个整数。", "hint": "### 样例说明\n\n只需要将 $a_2$ 和 $a_3$ 合并，数组 $a$ 变为 $\\{1,5,4\\}$，即和 $b$ 相同。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，保证 $n,m \\le 10^3$。\n - 对于 $100\\%$ 的数据，保证 $n, m \\le 10^5$，$0 < a_i, b_i \\le 10^5$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 D 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 合并数列", "background": "", "description": "小明发现有很多方案可以把一个很大的正整数拆成若干正整数的和。他采取了其中两种方案，分别将他们列为两个数组 $\\{a_1, a_2, \\cdots a_n\\}$ 和 $\\{b_1, b_2, \\cdots b_m\\}$。两个数组的和相同。\n\n定义一次合并操作可以将某数组内相邻的两个数合并为一个新数，新数的值是原来两个数的和。小明想通过若干次合并操作将两个数组变成一模一样，即 $n = m$ 且对于任意下标 $i$ 满足 $a_i = b_i$。请计算至少需要多少次合并操作可以完成小明的目标。", "inputFormat": "输入共 $3$ 行。\n\n第一行为两个正整数 $n, m$。\n\n第二行为 $n$ 个由空格隔开的整数 $a_1, a_2, \\cdots, a_n$。\n\n第三行为 $m$ 个由空格隔开的整数 $b_1, b_2, \\cdots, b_m$。", "outputFormat": "输出共 $1$ 行，一个整数。", "hint": "### 样例说明\n\n只需要将 $a_2$ 和 $a_3$ 合并，数组 $a$ 变为 $\\{1,5,4\\}$，即和 $b$ 相同。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，保证 $n,m \\le 10^3$。\n - 对于 $100\\%$ 的数据，保证 $n, m \\le 10^5$，$0 < a_i, b_i \\le 10^5$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 D 题", "locale": "zh-CN"}}}
{"pid": "P9423", "type": "P", "difficulty": 4, "samples": [["5\n1 4\n1 0\n2 1\n1 2\n0 1", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2023", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 数三角", "background": "", "description": "小明在二维坐标系中放置了 $n$ 个点，他想在其中选出一个包含三个点的子集，这三个点能组成三角形。然而这样的方案太多了，他决定只选择那些可以组成等腰三角形的方案。请帮他计算出一共有多少种选法可以组成等腰三角形？\n\n", "inputFormat": "输入共 $n + 1$ 行。\n\n第一行为一个正整数 $n$。\n\n后面 $n$ 行，每行两个整数 $x_i, y_i$ 表示第 $i$ 个点的坐标。", "outputFormat": "输出共 $1$ 行，一个整数。", "hint": "### 样例说明\n\n一共有 $5$ 种选法：$\\{2,3,4\\}$、$\\{3,4,5\\}$、$\\{4,5,2\\}$、$\\{5,2,3\\}$、$\\{1,3,5\\}$。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，保证 $n \\le 200$。\n - 对于 $100\\%$ 的数据，保证 $n \\le 2000$，$0 \\le x_i, y_i \\le 10^9$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 E 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 数三角", "background": "", "description": "小明在二维坐标系中放置了 $n$ 个点，他想在其中选出一个包含三个点的子集，这三个点能组成三角形。然而这样的方案太多了，他决定只选择那些可以组成等腰三角形的方案。请帮他计算出一共有多少种选法可以组成等腰三角形？\n\n", "inputFormat": "输入共 $n + 1$ 行。\n\n第一行为一个正整数 $n$。\n\n后面 $n$ 行，每行两个整数 $x_i, y_i$ 表示第 $i$ 个点的坐标。", "outputFormat": "输出共 $1$ 行，一个整数。", "hint": "### 样例说明\n\n一共有 $5$ 种选法：$\\{2,3,4\\}$、$\\{3,4,5\\}$、$\\{4,5,2\\}$、$\\{5,2,3\\}$、$\\{1,3,5\\}$。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，保证 $n \\le 200$。\n - 对于 $100\\%$ 的数据，保证 $n \\le 2000$，$0 \\le x_i, y_i \\le 10^9$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 E 题", "locale": "zh-CN"}}}
{"pid": "P9424", "type": "P", "difficulty": 5, "samples": [["4 4\n10 20 30 40\n1 2\n2 1\n2 3\n4 3", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "强连通分量", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 删边问题", "background": "", "description": "给定一个包含 $N$ 个结点 $M$ 条边的无向图 G，结点编号 $1 \\cdots N$。其中每个结点都有一个点权 $W_i$。\n\n你可以从 $M$ 条边中任选恰好一条边删除，如果剩下的图恰好包含 $2$ 个连通分量，就称这是一种合法的删除方案。\n\n对于一种合法的删除方案，我们假设 $2$ 个连通分量包含的点的权值之和分别为 $X$ 和 $Y$，请你找出一种使得 $X$ 与 $Y$ 的差值最小的方案。输出 $X$ 与 $Y$ 的差值。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$。\n\n第二行包含 $N$ 个整数，$W_1, W_2, \\cdots, W_N$。\n\n以下 $M$ 行每行包含 $2$ 个整数 $U$ 和 $V$，代表结点 $U$ 和 $V$ 之间有一条边。", "outputFormat": "一个整数代表最小的差值。如果不存在合法的删除方案，输出 $-1$。", "hint": "### 样例说明\n\n由于 $1$ 和 $2$ 之间实际有 $2$ 条边，所以合法的删除方案有 $2$ 种，分别是删除 $(2, 3)$ 之间的边和删除 $(3, 4)$ 之间的边。\n\n删除 $(2, 3)$ 之间的边，剩下的图包含 $2$ 个连通分量：$\\{1,2\\}$ 和 $\\{3,4\\}$，点权和分别是 $30$、$70$，差为 $40$。\n\n删除 $(3, 4)$ 之间的边，剩下的图包含 $2$ 个连通分量：$\\{1,2,3\\}$ 和 $\\{4\\}$，点权和分别是 $60$、$40$，差为 $20$。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，$1 \\le N, M \\le 10000$。\n - 对于另外 $20\\%$ 的数据，每个结点的度数不超过 $2$。\n - 对于 $100\\%$ 的数据，$1 \\le N, M \\le 200000$，$0 \\le W_i \\le 10^9$，$1 \\le U, V \\le N$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 F 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 删边问题", "background": "", "description": "给定一个包含 $N$ 个结点 $M$ 条边的无向图 G，结点编号 $1 \\cdots N$。其中每个结点都有一个点权 $W_i$。\n\n你可以从 $M$ 条边中任选恰好一条边删除，如果剩下的图恰好包含 $2$ 个连通分量，就称这是一种合法的删除方案。\n\n对于一种合法的删除方案，我们假设 $2$ 个连通分量包含的点的权值之和分别为 $X$ 和 $Y$，请你找出一种使得 $X$ 与 $Y$ 的差值最小的方案。输出 $X$ 与 $Y$ 的差值。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$。\n\n第二行包含 $N$ 个整数，$W_1, W_2, \\cdots, W_N$。\n\n以下 $M$ 行每行包含 $2$ 个整数 $U$ 和 $V$，代表结点 $U$ 和 $V$ 之间有一条边。", "outputFormat": "一个整数代表最小的差值。如果不存在合法的删除方案，输出 $-1$。", "hint": "### 样例说明\n\n由于 $1$ 和 $2$ 之间实际有 $2$ 条边，所以合法的删除方案有 $2$ 种，分别是删除 $(2, 3)$ 之间的边和删除 $(3, 4)$ 之间的边。\n\n删除 $(2, 3)$ 之间的边，剩下的图包含 $2$ 个连通分量：$\\{1,2\\}$ 和 $\\{3,4\\}$，点权和分别是 $30$、$70$，差为 $40$。\n\n删除 $(3, 4)$ 之间的边，剩下的图包含 $2$ 个连通分量：$\\{1,2,3\\}$ 和 $\\{4\\}$，点权和分别是 $60$、$40$，差为 $20$。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，$1 \\le N, M \\le 10000$。\n - 对于另外 $20\\%$ 的数据，每个结点的度数不超过 $2$。\n - 对于 $100\\%$ 的数据，$1 \\le N, M \\le 200000$，$0 \\le W_i \\le 10^9$，$1 \\le U, V \\le N$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 F 题", "locale": "zh-CN"}}}
{"pid": "P9425", "type": "P", "difficulty": 3, "samples": [["4 4 2\nAAAB\nABAB\nBBAB\nBAAA", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "广度优先搜索 BFS", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] AB 路线", "background": "", "description": "有一个由 $N \\times M$ 个方格组成的迷宫，每个方格写有一个字母 `A` 或者 `B`。小蓝站在迷宫左上角的方格，目标是走到右下角的方格。他每一步可以移动到上下左右相邻的方格去。\n\n由于特殊的原因，小蓝的路线必须先走 $K$ 个 `A` 格子、再走 $K$ 个 `B` 格子、再走 $K$ 个 `A` 格子、再走 $K$ 个 `B` 格子……如此反复交替。\n\n请你计算小蓝最少需要走多少步，才能到达右下角方格？\n\n注意路线经过的格子数不必一定是 $K$ 的倍数，即最后一段 `A` 或 `B` 的格子可以不满 $K$ 个。起点保证是 `A` 格子。\n\n例如 $K = 3$ 时，以下 $3$ 种路线是合法的：\n\n```plain\nAA\nAAAB\nAAABBBAAABBB\n```\n\n以下 $3$ 种路线不合法：\n\n```plain\nABABAB\nABBBAAABBB\nAAABBBBBBAAA\n```", "inputFormat": "第一行包含三个整数 $N$、$M$ 和 $K$。\n\n以下 $N$ 行，每行包含 $M$ 个字符（`A` 或 `B`），代表格子类型。\n\n", "outputFormat": "一个整数，代表最少步数。如果无法到达右下角，输出 $-1$。", "hint": "### 样例说明\n\n每一步方向如下：下右下右上右下下；路线序列： `AABBAABBA`。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，$1 \\le N, M \\le 4$。\n - 对于另 $20\\%$ 的数据，$K = 1$。\n - 对于 $100\\%$ 的数据，$1 \\le N, M \\le 1000$，$1 \\le K \\le 10$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 G 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] AB 路线", "background": "", "description": "有一个由 $N \\times M$ 个方格组成的迷宫，每个方格写有一个字母 `A` 或者 `B`。小蓝站在迷宫左上角的方格，目标是走到右下角的方格。他每一步可以移动到上下左右相邻的方格去。\n\n由于特殊的原因，小蓝的路线必须先走 $K$ 个 `A` 格子、再走 $K$ 个 `B` 格子、再走 $K$ 个 `A` 格子、再走 $K$ 个 `B` 格子……如此反复交替。\n\n请你计算小蓝最少需要走多少步，才能到达右下角方格？\n\n注意路线经过的格子数不必一定是 $K$ 的倍数，即最后一段 `A` 或 `B` 的格子可以不满 $K$ 个。起点保证是 `A` 格子。\n\n例如 $K = 3$ 时，以下 $3$ 种路线是合法的：\n\n```plain\nAA\nAAAB\nAAABBBAAABBB\n```\n\n以下 $3$ 种路线不合法：\n\n```plain\nABABAB\nABBBAAABBB\nAAABBBBBBAAA\n```", "inputFormat": "第一行包含三个整数 $N$、$M$ 和 $K$。\n\n以下 $N$ 行，每行包含 $M$ 个字符（`A` 或 `B`），代表格子类型。\n\n", "outputFormat": "一个整数，代表最少步数。如果无法到达右下角，输出 $-1$。", "hint": "### 样例说明\n\n每一步方向如下：下右下右上右下下；路线序列： `AABBAABBA`。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，$1 \\le N, M \\le 4$。\n - 对于另 $20\\%$ 的数据，$K = 1$。\n - 对于 $100\\%$ 的数据，$1 \\le N, M \\le 1000$，$1 \\le K \\le 10$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 G 题", "locale": "zh-CN"}}}
{"pid": "P9426", "type": "P", "difficulty": 3, "samples": [["3 2\n1 2\n1 3\n3 4\n1 4\n2 4", "3\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2023", "前缀和", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 抓娃娃", "background": null, "description": "小明拿了 $n$ 条线段练习抓娃娃。他将所有线段铺在数轴上，第 $i$ 条线段的左端点在 $l_i$，右端点在 $r_i$。小明用 $m$ 个区间去框这些线段，第 $i$ 个区间的范围是 $[L_i, R_i]$。如果一个线段有**至少一半**的长度被包含在某个区间内，则将其视为被这个区间框住。请计算出每个区间框住了多少个线段？", "inputFormat": "输入共 $n + m + 1$ 行。\n\n第一行为两个正整数 $n, m$。\n\n后面 $n$ 行，每行两个整数 $l_i, r_i$。\n\n后面 $m$ 行，每行两个整数 $L_i, R_i$。", "outputFormat": "输出共 $m$ 行，每行一个整数。", "hint": "### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，保证 $n, m \\le 10^3$。\n - 对于 $100\\%$ 的数据，保证 $n, m ≤ 10^5$，$l_i < r_i$，$0 < l_i, r_i, L_i, R_i \\le 10^6$，$\\max \\{r_i − l_i\\} \\le \\min \\{R_i − L_i\\}$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 H 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 抓娃娃", "background": null, "description": "小明拿了 $n$ 条线段练习抓娃娃。他将所有线段铺在数轴上，第 $i$ 条线段的左端点在 $l_i$，右端点在 $r_i$。小明用 $m$ 个区间去框这些线段，第 $i$ 个区间的范围是 $[L_i, R_i]$。如果一个线段有**至少一半**的长度被包含在某个区间内，则将其视为被这个区间框住。请计算出每个区间框住了多少个线段？", "inputFormat": "输入共 $n + m + 1$ 行。\n\n第一行为两个正整数 $n, m$。\n\n后面 $n$ 行，每行两个整数 $l_i, r_i$。\n\n后面 $m$ 行，每行两个整数 $L_i, R_i$。", "outputFormat": "输出共 $m$ 行，每行一个整数。", "hint": "### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，保证 $n, m \\le 10^3$。\n - 对于 $100\\%$ 的数据，保证 $n, m ≤ 10^5$，$l_i < r_i$，$0 < l_i, r_i, L_i, R_i \\le 10^6$，$\\max \\{r_i − l_i\\} \\le \\min \\{R_i − L_i\\}$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 H 题。", "locale": "zh-CN"}}}
{"pid": "P9427", "type": "P", "difficulty": 5, "samples": [["2 8", "2233333333"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 拼数字", "background": "", "description": "小蓝要用 $N$ 个数字 $2$ 和 $M$ 个数字 $3$ 拼出一个 $N + M$ 位的整数。请你计算小蓝能拼出的最大的 $2023$ 的倍数是多少？", "inputFormat": "两个整数 $N$ 和 $M$。", "outputFormat": "一个 $N + M$ 位的整数，代表答案。如果拼不出 $2023$ 的倍数，输出 $-1$。", "hint": "### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，$1 \\le N, M \\le 12$。\n - 对于 $40\\%$ 的数据，$1 \\le N, M \\le 100$。\n - 对于 $60\\%$ 的数据，$1 \\le N, M \\le 10000$。\n - 对于 $100\\%$ 的数据，$1 \\le N, M \\le 1000000$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 I 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 拼数字", "background": "", "description": "小蓝要用 $N$ 个数字 $2$ 和 $M$ 个数字 $3$ 拼出一个 $N + M$ 位的整数。请你计算小蓝能拼出的最大的 $2023$ 的倍数是多少？", "inputFormat": "两个整数 $N$ 和 $M$。", "outputFormat": "一个 $N + M$ 位的整数，代表答案。如果拼不出 $2023$ 的倍数，输出 $-1$。", "hint": "### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，$1 \\le N, M \\le 12$。\n - 对于 $40\\%$ 的数据，$1 \\le N, M \\le 100$。\n - 对于 $60\\%$ 的数据，$1 \\le N, M \\le 10000$。\n - 对于 $100\\%$ 的数据，$1 \\le N, M \\le 1000000$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 I 题", "locale": "zh-CN"}}}
{"pid": "P9428", "type": "P", "difficulty": 6, "samples": [["4 1 0.2\n1 2\n2 3\n3 4\n2", "1.30"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "期望", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 逃跑", "background": "", "description": "小明所在星系有 $n$ 颗星球，编号为 $1$ 到 $n$。这些星球通过 $n-1$ 条无向边连成一棵树。根结点为编号为 $1$ 的星球。\n\n为了在星际战争到来时逃到其他星系，小明在根结点设置了逃离用的传送门。每个星球的人只需要一直往父结点星球移动就可以抵达根结点。为了方便各个星球的人去往根结点，小明将其中 $m$ 个星球设置为了跳板星球。在从某个星球去往根结点的路径上，当一个人经过任意星球（包括起点星球）时，他可以尝试直接跳跃到 **其前往根结点路径上的除当前星球以外的第一个跳板星球**，其时间花费和走到父结点星球的时间花费相同，都是 $1$ 单位时间。\n\n然而，因为技术问题，向跳板星球的跳跃并不一定成功，每一次跳跃都有 $p$ 的概率失败，并转而跳跃到当前星球的父结点星球（相当于直接走到父结点星球）；同时此跳板星球失效，将 **不再视为跳板星球**。\n\n为了衡量移动效率，小明想知道，如果一个人在这 $n$ 颗星球中随机选择一颗出发前往根结点，其花费的最短时间的期望是多少单位时间？", "inputFormat": "输入共 $n + 1$ 行，第一行为两个正整数 $n$、$m$ 和一个浮点数 $p$。\n\n后面 $n - 1$ 行，每行两个正整数 $x_i,y_i$ 表示第 $i$ 条边的两个端点。\n\n最后一行，共 $m$ 个正整数表示所有跳板星球的编号。", "outputFormat": "一行，一个浮点数，表示答案（请保留两位小数）。", "hint": "### 样例说明\n\n从 $1$ 号星球出发的时间花费为 $0$；  \n从 $2$ 号星球出发的时间花费为 $1$；  \n从 $3$ 号星球出发的时间花费为 $2$；  \n从 $4$ 号星球出发的时间花费为 $0.8 \\times 2 + 0.2 \\times 3 = 2.2$。\n\n所以期望时间为 $\\dfrac{0+1+2+2.2}{4}=1.3$。\n\n### 评测用例规模与约定\n\n - 对于 $30\\%$ 的数据，保证 $1 \\le n \\le 2000$。\n - 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 10^6$，$1 \\le m \\le n$，$0 < p < 1$。\n \n 第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 J 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 逃跑", "background": "", "description": "小明所在星系有 $n$ 颗星球，编号为 $1$ 到 $n$。这些星球通过 $n-1$ 条无向边连成一棵树。根结点为编号为 $1$ 的星球。\n\n为了在星际战争到来时逃到其他星系，小明在根结点设置了逃离用的传送门。每个星球的人只需要一直往父结点星球移动就可以抵达根结点。为了方便各个星球的人去往根结点，小明将其中 $m$ 个星球设置为了跳板星球。在从某个星球去往根结点的路径上，当一个人经过任意星球（包括起点星球）时，他可以尝试直接跳跃到 **其前往根结点路径上的除当前星球以外的第一个跳板星球**，其时间花费和走到父结点星球的时间花费相同，都是 $1$ 单位时间。\n\n然而，因为技术问题，向跳板星球的跳跃并不一定成功，每一次跳跃都有 $p$ 的概率失败，并转而跳跃到当前星球的父结点星球（相当于直接走到父结点星球）；同时此跳板星球失效，将 **不再视为跳板星球**。\n\n为了衡量移动效率，小明想知道，如果一个人在这 $n$ 颗星球中随机选择一颗出发前往根结点，其花费的最短时间的期望是多少单位时间？", "inputFormat": "输入共 $n + 1$ 行，第一行为两个正整数 $n$、$m$ 和一个浮点数 $p$。\n\n后面 $n - 1$ 行，每行两个正整数 $x_i,y_i$ 表示第 $i$ 条边的两个端点。\n\n最后一行，共 $m$ 个正整数表示所有跳板星球的编号。", "outputFormat": "一行，一个浮点数，表示答案（请保留两位小数）。", "hint": "### 样例说明\n\n从 $1$ 号星球出发的时间花费为 $0$；  \n从 $2$ 号星球出发的时间花费为 $1$；  \n从 $3$ 号星球出发的时间花费为 $2$；  \n从 $4$ 号星球出发的时间花费为 $0.8 \\times 2 + 0.2 \\times 3 = 2.2$。\n\n所以期望时间为 $\\dfrac{0+1+2+2.2}{4}=1.3$。\n\n### 评测用例规模与约定\n\n - 对于 $30\\%$ 的数据，保证 $1 \\le n \\le 2000$。\n - 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 10^6$，$1 \\le m \\le n$，$0 < p < 1$。\n \n 第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 J 题", "locale": "zh-CN"}}}
{"pid": "P9429", "type": "P", "difficulty": 1, "samples": [["4 6 2 11", "2 4 2 3"], ["3 4 5 6", "4 2 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化", "构造"], "title": "[NAPC-#1] Stage1 - Simple", "background": "> ![](https://cdn.luogu.com.cn/upload/image_hosting/pon0cylv.png)", "description": "### 【简要题意】\n给定 $n,m,k,S$，请构造长度为 $n$ 的整数序列 $a$ 使得：\n- $0\\leqslant a_i\\leqslant m,\\forall i\\in[1,n]$（即序列 $a$ 内的每个元素均不小于 $0$ 且不大于 $m$）。\n- $|a_i-a_{i-1}|\\leqslant k,\\forall i\\in(1,n]$（即序列 $a$ 内的每两个相邻元素之差的绝对值均不大于 $k$）。\n- $(\\sum_{i=1}^n a_i ) = S$（即序列 $a$ 内的所有元素的和为 $S$）。\n\n**保证有解。**\n\n### 【原始题意】\n\n前面忘了，但是~~你随 kid 穿越到了 ic~~（I wanna be the Creator），来到了一个关卡编辑器面前。该地图宽为 $n$，高为 $(m+1)$，是你不能修改的；里面还有 $S$ 个 $1\\times1$ 大小的未摆放的砖。现在你需要帮 kid 摆好这一面，也就是说，将这 $S$ 个砖摆放好，使得他可以通过。有以下要求：\n\n1. ~~砖是有重力的~~，所以**一块砖只能摆放在下边界上或者另一块砖上**。同一横纵坐标不能摆放多块砖。\n2. 你至少要给 kid 留一条缝来通过，所以每一列你最高只能放 $m$ 块砖（地图高度为 $m+1$）。但是注意，ic 关卡下边界没有伤害，某一列是可以不放砖块的。\n3. kid 的跳跃能力和~~从高处坠落而不受伤的能力~~是有限的，这用一个非负整数 $k$ 来描述：相邻两列摆放的砖的数量之差的绝对值不能超过 $k$，否则该关卡对 kid 来说就是无解的。_（但是注意：该条对第一列高度没有要求，kid 出生点就在第一列。）_\n4. 你要把所有 $S$ 块砖都摆进去，不多不少。\n\nCreator 不会为难你，因此一定有一种关卡符合上述所有规则。\n\n为了输出方便，你只需要给出第 $i$ 列有多少砖块（记为 $a_i$），输出 $a$ 序列即可。容易证明，一个合法的 $a$ 序列和一个合法关卡是一一对应的。", "inputFormat": "仅一行 $4$ 个非负整数 $n,m,k,S$。", "outputFormat": "输出一行 $n$ 个非负整数表示你构造的序列 $a$。如果有多种可能的序列，输出任意一个符合题意的序列即可。**保证至少有一个序列满足题目要求。**", "hint": "### 【数据范围】\n\n该题共有 $10$ 个测试点，每个测试点等分。\n\n- 对于 $20\\%$ 的数据，$S=n\\cdot m$。\n- 对于 $20\\%$ 的数据，$k=0$。\n- 对于 $20\\%$ 的数据，$k=10^9$。\n\n对于 $100\\%$ 的数据，$1\\leqslant n,m\\leqslant 10^5$，$0\\leqslant k\\leqslant 10^9$，$0\\leqslant S\\leqslant n\\cdot m$。\n\n### 【提示】\n> 古之有数，其名为 $S$。$S$ 之大，一个 `int` （可能）装不下。\n\n### 【样例解释 #1】\n样例输出对应关卡如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jyttdqal.png)\n\n注意可能有多种合法关卡均符合条件。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NAPC-#1] Stage1 - Simple", "background": "> ![](https://cdn.luogu.com.cn/upload/image_hosting/pon0cylv.png)", "description": "### 【简要题意】\n给定 $n,m,k,S$，请构造长度为 $n$ 的整数序列 $a$ 使得：\n- $0\\leqslant a_i\\leqslant m,\\forall i\\in[1,n]$（即序列 $a$ 内的每个元素均不小于 $0$ 且不大于 $m$）。\n- $|a_i-a_{i-1}|\\leqslant k,\\forall i\\in(1,n]$（即序列 $a$ 内的每两个相邻元素之差的绝对值均不大于 $k$）。\n- $(\\sum_{i=1}^n a_i ) = S$（即序列 $a$ 内的所有元素的和为 $S$）。\n\n**保证有解。**\n\n### 【原始题意】\n\n前面忘了，但是~~你随 kid 穿越到了 ic~~（I wanna be the Creator），来到了一个关卡编辑器面前。该地图宽为 $n$，高为 $(m+1)$，是你不能修改的；里面还有 $S$ 个 $1\\times1$ 大小的未摆放的砖。现在你需要帮 kid 摆好这一面，也就是说，将这 $S$ 个砖摆放好，使得他可以通过。有以下要求：\n\n1. ~~砖是有重力的~~，所以**一块砖只能摆放在下边界上或者另一块砖上**。同一横纵坐标不能摆放多块砖。\n2. 你至少要给 kid 留一条缝来通过，所以每一列你最高只能放 $m$ 块砖（地图高度为 $m+1$）。但是注意，ic 关卡下边界没有伤害，某一列是可以不放砖块的。\n3. kid 的跳跃能力和~~从高处坠落而不受伤的能力~~是有限的，这用一个非负整数 $k$ 来描述：相邻两列摆放的砖的数量之差的绝对值不能超过 $k$，否则该关卡对 kid 来说就是无解的。_（但是注意：该条对第一列高度没有要求，kid 出生点就在第一列。）_\n4. 你要把所有 $S$ 块砖都摆进去，不多不少。\n\nCreator 不会为难你，因此一定有一种关卡符合上述所有规则。\n\n为了输出方便，你只需要给出第 $i$ 列有多少砖块（记为 $a_i$），输出 $a$ 序列即可。容易证明，一个合法的 $a$ 序列和一个合法关卡是一一对应的。", "inputFormat": "仅一行 $4$ 个非负整数 $n,m,k,S$。", "outputFormat": "输出一行 $n$ 个非负整数表示你构造的序列 $a$。如果有多种可能的序列，输出任意一个符合题意的序列即可。**保证至少有一个序列满足题目要求。**", "hint": "### 【数据范围】\n\n该题共有 $10$ 个测试点，每个测试点等分。\n\n- 对于 $20\\%$ 的数据，$S=n\\cdot m$。\n- 对于 $20\\%$ 的数据，$k=0$。\n- 对于 $20\\%$ 的数据，$k=10^9$。\n\n对于 $100\\%$ 的数据，$1\\leqslant n,m\\leqslant 10^5$，$0\\leqslant k\\leqslant 10^9$，$0\\leqslant S\\leqslant n\\cdot m$。\n\n### 【提示】\n> 古之有数，其名为 $S$。$S$ 之大，一个 `int` （可能）装不下。\n\n### 【样例解释 #1】\n样例输出对应关卡如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jyttdqal.png)\n\n注意可能有多种合法关卡均符合条件。\n\n", "locale": "zh-CN"}}}
{"pid": "P9430", "type": "P", "difficulty": 3, "samples": [["3 7\n1 2\n2 5\n6 2\n3 2\n1 1 4\n3 3\n2 3\n3 1\n1 -9 -1\n3 3", "2 5\n7 6\n2 6\n-3 6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "[NAPC-#1] Stage2 - Darkness", "background": "> ![](https://cdn.luogu.com.cn/upload/image_hosting/y68eurqf.png)", "description": "有 $n$ 支军队分布在各地，可以看作在一个平面直角坐标系内。他们都受 kid 的统一指挥，kid 共发出 $m$ 条命令。\n\n命令有如下几种：\n\n- `1 p q` 表示把**每支**军队的位置从 $(x_i,y_i)$ 移到 $(x_i+p,y_i+q)$。\n- `2 i`，表示**第 $i$ 支军队**的位置对直线 $y=x$ 作轴对称变换（即交换 $x_i$ 与 $y_i$ 的值）。\n- `3 i`，表示查询第 $i$ 支军队现在所处的位置（即输出此时的 $x_i$ 与 $y_i$）。\n\n**请注意 `1` 与 `2` 命令的操作对象不同，前者为全体军队，后者为单支军队。**\n\n本来 kid 可以直接拿望远镜看的，但是天太黑了，只能拜托你编写一个程序告诉他了。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $a_i,b_i$ 表示第 $i$ 支军队的初始位置 $(x_i,y_i)=(a_i,b_i)$。\n\n接下来 $m$ 行，每行两到三个整数，表示 kid 发出的一条命令。具体地，对于每条命令，先有一个正整数 $op$ 表示命令类型；\n\n- 如果 $op=1$，那么后面有两个整数 $p,q$，表示把**每支**军队的位置从 $(x_i,y_i)$ 移到 $(x_i+p,y_i+q)$。\n- 如果 $op=2$，那么后面有一个正整数 $i$，表示**第 $i$ 支军队**的位置对 $y=x$ 做轴对称变换。\n- 如果 $op=3$，那么后面有一个正整数 $i$，表示查询第 $i$ 支军队现在所处的位置。", "outputFormat": "对于每次 kid 发出的一条 `3` 命令，输出一行两个整数 $x_i,y_i$ 表示第 $i$ 支军队现在所处的位置。", "hint": "### 【数据范围】\n该题共有 $10$ 个测试点，每个测试点等分。\n\n- 对于 $20\\%$ 的数据，$n,m\\leqslant 1000$。\n- 对于另外 $30\\%$ 的数据，保证没有 `2` 命令。\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant m\\leqslant 5\\times10^5$，$|a_i|,|b_i|,|p|,|q|\\leqslant 10^3$，$1\\leqslant i\\leqslant n$，$op\\in\\{1,2,3\\}$。\n\n### 【样例解释】\n| 时间 | $(x_1,y_1)$ | $(x_2,y_2)$ | $(x_3,y_3)$ |\n|  :-:  |  :-:  |  :-:  |  :-:  |\n| 初始时 | $(1,2)$ | $(2,5)$ | $(6,2)$ |\n| 第 $2$ 次命令后 | $(2,6)$ | $(3,9)$ | $(7,6)$ |\n| 第 $4$ 次命令后 | $(2,6)$ | $(3,9)$ | $(6,7)$ |\n| 第 $6$ 次命令后 | $(-7,5)$ | $(-6,8)$ | $(-3,6)$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NAPC-#1] Stage2 - Darkness", "background": "> ![](https://cdn.luogu.com.cn/upload/image_hosting/y68eurqf.png)", "description": "有 $n$ 支军队分布在各地，可以看作在一个平面直角坐标系内。他们都受 kid 的统一指挥，kid 共发出 $m$ 条命令。\n\n命令有如下几种：\n\n- `1 p q` 表示把**每支**军队的位置从 $(x_i,y_i)$ 移到 $(x_i+p,y_i+q)$。\n- `2 i`，表示**第 $i$ 支军队**的位置对直线 $y=x$ 作轴对称变换（即交换 $x_i$ 与 $y_i$ 的值）。\n- `3 i`，表示查询第 $i$ 支军队现在所处的位置（即输出此时的 $x_i$ 与 $y_i$）。\n\n**请注意 `1` 与 `2` 命令的操作对象不同，前者为全体军队，后者为单支军队。**\n\n本来 kid 可以直接拿望远镜看的，但是天太黑了，只能拜托你编写一个程序告诉他了。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $a_i,b_i$ 表示第 $i$ 支军队的初始位置 $(x_i,y_i)=(a_i,b_i)$。\n\n接下来 $m$ 行，每行两到三个整数，表示 kid 发出的一条命令。具体地，对于每条命令，先有一个正整数 $op$ 表示命令类型；\n\n- 如果 $op=1$，那么后面有两个整数 $p,q$，表示把**每支**军队的位置从 $(x_i,y_i)$ 移到 $(x_i+p,y_i+q)$。\n- 如果 $op=2$，那么后面有一个正整数 $i$，表示**第 $i$ 支军队**的位置对 $y=x$ 做轴对称变换。\n- 如果 $op=3$，那么后面有一个正整数 $i$，表示查询第 $i$ 支军队现在所处的位置。", "outputFormat": "对于每次 kid 发出的一条 `3` 命令，输出一行两个整数 $x_i,y_i$ 表示第 $i$ 支军队现在所处的位置。", "hint": "### 【数据范围】\n该题共有 $10$ 个测试点，每个测试点等分。\n\n- 对于 $20\\%$ 的数据，$n,m\\leqslant 1000$。\n- 对于另外 $30\\%$ 的数据，保证没有 `2` 命令。\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant m\\leqslant 5\\times10^5$，$|a_i|,|b_i|,|p|,|q|\\leqslant 10^3$，$1\\leqslant i\\leqslant n$，$op\\in\\{1,2,3\\}$。\n\n### 【样例解释】\n| 时间 | $(x_1,y_1)$ | $(x_2,y_2)$ | $(x_3,y_3)$ |\n|  :-:  |  :-:  |  :-:  |  :-:  |\n| 初始时 | $(1,2)$ | $(2,5)$ | $(6,2)$ |\n| 第 $2$ 次命令后 | $(2,6)$ | $(3,9)$ | $(7,6)$ |\n| 第 $4$ 次命令后 | $(2,6)$ | $(3,9)$ | $(6,7)$ |\n| 第 $6$ 次命令后 | $(-7,5)$ | $(-6,8)$ | $(-3,6)$ |", "locale": "zh-CN"}}}
{"pid": "P9431", "type": "P", "difficulty": 4, "samples": [["4 0\n4 2 1\n2 4\n1 1\n5 2\n4 1\n5 3 4\n1 7\n2 4\n3 2\n4 5\n8 2\n4 1 2\n1 1\n1 2\n1 3\n4 1\n4 2 1\n1 1\n4 1\n1 4\n4 4", "3\n4\n4\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化", "强连通分量", "Tarjan"], "title": "[NAPC-#1] Stage3 - Jump Refreshers", "background": "加强版：[「NAPC #1」rStage3 ~ Hard Jump Refreshers](https://www.luogu.com.cn/problem/U618728)。\n\n---\n> ![](https://cdn.luogu.com.cn/upload/image_hosting/wkktxonu.png)", "description": "（注意本题中 kid 的移动方式与实际的 iw 游戏中不同。）\n\nkid 面前有一个无穷大的竖直二维平面。坐标系 $x$ 轴正方向为从左到右，$y$ 轴正方向为从下到上。\n\n地图（该平面）内有 $n$ 个位置互不相同的可以无限重复使用的跳跃球。当 kid 正好位于某跳跃球位置时，他可以让 shift 键按下，然后他会瞬间上升 $d$ 格（此期间不能左右移动）。他每秒往下坠落 $1$ 格，同时每秒 kid 可以选择：向左或向右移动 1 格，或者不移动。当 kid 不在跳跃球上时他不能起跳。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1abzjhjs.png)\n\n上图是一个例子，蓝色区域表示 kid 在跳跃球（箭头）处起跳（$d=2$）后可以达到的区域。kid 每秒时的横纵坐标只能是整数，即我们认为他不能达到非整点位置。\n\n现在，kid 把存档放在了第 $c$ 个跳跃球处（即起点是第 $c$ 个跳跃球处；此时可以立即起跳）。定义 kid 的得分为他经过（即在某处起跳：显然起跳之后可以回到原位置）的**不同**跳跃球的个数。kid 想知道他可以最多获得多少得分（不需要（但可以）回到起点），请你告诉他吧。\n\n再次注意：跳跃球可以无限重复使用，即 kid 可以在某个跳跃球上无限起跳。", "inputFormat": "**本题单测试点内有多组数据。**\n\n第一行仅两个整数 $T,id$ 表示测试数据的数量和测试点编号。特别地，样例的 $id=0$。\n\n对于每组测试数据：\n\n第一行三个正整数 $n,d,c$ 含义如上所述。\n\n后 $n$ 行每行两个正整数 $x_i,y_i$ 表示第 $i$ 个跳跃球的位置。", "outputFormat": "对于每组测试数据输出一行一个正整数表示最大得分。", "hint": "### 【数据范围】\n\n**本题采用捆绑测试。**\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\n\\textbf{Subtask} & id= & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1& 1\\sim3,36 & n\\leqslant10,T\\leqslant10 & 10 \\r\n\\textsf2& 4\\sim7 & \\sum n\\leqslant200 & 15 \\r\n\\textsf3& 8\\sim13 & \\mathbf A & 25 \\r\n\\textsf4& 14\\sim18 & \\mathbf B & 10 \\r\n\\textsf5& 19\\sim35 & - & 40 \\r\n\\end{array}\n$$\n\n其中 $\\sum n$ 表示单测试点内所有数据的 $n$ 的总和。\n\n- 特殊性质 $\\mathbf A$：保证对于任意不同跳跃球 $u,v$，如果 kid 理论上能从 $u$ 跳到 $v$（理论上：不考虑 kid 能否从起点到达 $u$ 的问题，下同），那么他理论上**一定不可以**从 $v$ 跳到 $u$。\n- 特殊性质 $\\mathbf B$：保证对于任意跳跃球 $u,v$，如果 kid 理论上能从 $u$ 跳到 $v$，那么他理论上**一定可以**从 $v$ 跳到 $u$。\n\n注意上面的“从 $u$ 跳到 $v$”不一定非得一跳到位。比如样例 #1-2 中可以从第 $3$ 个跳到第 $5$ 个：$3\\to2\\to4\\to5$。\n\n对于 $100\\%$ 的数据，$1\\leqslant T\\leqslant 1000$，$1\\leqslant n\\leqslant 3000$，$\\sum n\\leqslant 3000$，$1\\leqslant d\\leqslant 10^9$，$1\\leqslant c\\leqslant n$，$1\\leqslant x_i,y_i\\leqslant10^6$，$(x_i,y_i)$ 互不相同。\n\n---\n#### 【样例解释 #1-1】\n![](https://cdn.luogu.com.cn/upload/image_hosting/zpc7sm2i.png)\n\n$d=2$，容易发现离开初始位置就上不去了。所以 kid 要么往左边碰第 $2$ 个跳跃球，得分为 $2$；要么往右边跳，经过第 $3$ 和第 $4$ 个跳跃球，得分为 $3$。\n#### 【样例解释 #1-2】\n![](https://cdn.luogu.com.cn/upload/image_hosting/q8ks8qb4.png)\n\n$d=3$，kid 可以先往下走一圈（$4\\to3\\to2\\to4$）跳回起点，然后往右去碰第 $5$ 个球。左上角的第 $1$ 个跳跃球是碰不到的。\n#### 【样例解释 #1-3】\n![](https://cdn.luogu.com.cn/upload/image_hosting/akghkpe9.png)\n\n通过最上面那个球是可以跳到右边的。\n#### 【样例解释 #1-4】\n![](https://cdn.luogu.com.cn/upload/image_hosting/50smzomm.png)\n\n有的人活着……", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NAPC-#1] Stage3 - Jump Refreshers", "background": "加强版：[「NAPC #1」rStage3 ~ Hard Jump Refreshers](https://www.luogu.com.cn/problem/U618728)。\n\n---\n> ![](https://cdn.luogu.com.cn/upload/image_hosting/wkktxonu.png)", "description": "（注意本题中 kid 的移动方式与实际的 iw 游戏中不同。）\n\nkid 面前有一个无穷大的竖直二维平面。坐标系 $x$ 轴正方向为从左到右，$y$ 轴正方向为从下到上。\n\n地图（该平面）内有 $n$ 个位置互不相同的可以无限重复使用的跳跃球。当 kid 正好位于某跳跃球位置时，他可以让 shift 键按下，然后他会瞬间上升 $d$ 格（此期间不能左右移动）。他每秒往下坠落 $1$ 格，同时每秒 kid 可以选择：向左或向右移动 1 格，或者不移动。当 kid 不在跳跃球上时他不能起跳。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1abzjhjs.png)\n\n上图是一个例子，蓝色区域表示 kid 在跳跃球（箭头）处起跳（$d=2$）后可以达到的区域。kid 每秒时的横纵坐标只能是整数，即我们认为他不能达到非整点位置。\n\n现在，kid 把存档放在了第 $c$ 个跳跃球处（即起点是第 $c$ 个跳跃球处；此时可以立即起跳）。定义 kid 的得分为他经过（即在某处起跳：显然起跳之后可以回到原位置）的**不同**跳跃球的个数。kid 想知道他可以最多获得多少得分（不需要（但可以）回到起点），请你告诉他吧。\n\n再次注意：跳跃球可以无限重复使用，即 kid 可以在某个跳跃球上无限起跳。", "inputFormat": "**本题单测试点内有多组数据。**\n\n第一行仅两个整数 $T,id$ 表示测试数据的数量和测试点编号。特别地，样例的 $id=0$。\n\n对于每组测试数据：\n\n第一行三个正整数 $n,d,c$ 含义如上所述。\n\n后 $n$ 行每行两个正整数 $x_i,y_i$ 表示第 $i$ 个跳跃球的位置。", "outputFormat": "对于每组测试数据输出一行一个正整数表示最大得分。", "hint": "### 【数据范围】\n\n**本题采用捆绑测试。**\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\n\\textbf{Subtask} & id= & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1& 1\\sim3,36 & n\\leqslant10,T\\leqslant10 & 10 \\r\n\\textsf2& 4\\sim7 & \\sum n\\leqslant200 & 15 \\r\n\\textsf3& 8\\sim13 & \\mathbf A & 25 \\r\n\\textsf4& 14\\sim18 & \\mathbf B & 10 \\r\n\\textsf5& 19\\sim35 & - & 40 \\r\n\\end{array}\n$$\n\n其中 $\\sum n$ 表示单测试点内所有数据的 $n$ 的总和。\n\n- 特殊性质 $\\mathbf A$：保证对于任意不同跳跃球 $u,v$，如果 kid 理论上能从 $u$ 跳到 $v$（理论上：不考虑 kid 能否从起点到达 $u$ 的问题，下同），那么他理论上**一定不可以**从 $v$ 跳到 $u$。\n- 特殊性质 $\\mathbf B$：保证对于任意跳跃球 $u,v$，如果 kid 理论上能从 $u$ 跳到 $v$，那么他理论上**一定可以**从 $v$ 跳到 $u$。\n\n注意上面的“从 $u$ 跳到 $v$”不一定非得一跳到位。比如样例 #1-2 中可以从第 $3$ 个跳到第 $5$ 个：$3\\to2\\to4\\to5$。\n\n对于 $100\\%$ 的数据，$1\\leqslant T\\leqslant 1000$，$1\\leqslant n\\leqslant 3000$，$\\sum n\\leqslant 3000$，$1\\leqslant d\\leqslant 10^9$，$1\\leqslant c\\leqslant n$，$1\\leqslant x_i,y_i\\leqslant10^6$，$(x_i,y_i)$ 互不相同。\n\n---\n#### 【样例解释 #1-1】\n![](https://cdn.luogu.com.cn/upload/image_hosting/zpc7sm2i.png)\n\n$d=2$，容易发现离开初始位置就上不去了。所以 kid 要么往左边碰第 $2$ 个跳跃球，得分为 $2$；要么往右边跳，经过第 $3$ 和第 $4$ 个跳跃球，得分为 $3$。\n#### 【样例解释 #1-2】\n![](https://cdn.luogu.com.cn/upload/image_hosting/q8ks8qb4.png)\n\n$d=3$，kid 可以先往下走一圈（$4\\to3\\to2\\to4$）跳回起点，然后往右去碰第 $5$ 个球。左上角的第 $1$ 个跳跃球是碰不到的。\n#### 【样例解释 #1-3】\n![](https://cdn.luogu.com.cn/upload/image_hosting/akghkpe9.png)\n\n通过最上面那个球是可以跳到右边的。\n#### 【样例解释 #1-4】\n![](https://cdn.luogu.com.cn/upload/image_hosting/50smzomm.png)\n\n有的人活着……", "locale": "zh-CN"}}}
{"pid": "P9432", "type": "P", "difficulty": 5, "samples": [["7 6 2\n1 2 3\n1 3 5\n3 4 2\n3 5 4\n2 6 1\n1 7 1\n2 3\n2 3\n2 1\n7 1\n4 5\n6 6\n2 2", "8\n3\n7\n6\n2\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化", "最近公共祖先 LCA", "树链剖分"], "title": "[NAPC-#1] rStage5 - Hard Conveyors", "background": "**本题新增两组 hack 数据。**\n\n---\n![](https://cdn.luogu.com.cn/upload/image_hosting/bp1ypbgf.png)\n\n更硬，所以可能就更脆，所以更容易被击破（确信）。\n\n您只花了两个小时就秒掉了正城 s1~s10，来秒逆城了。", "description": "**本题与 Stage5 的区别是合法路径定义不同**（简要题意中加粗部分不同）。~~（其实还有：样例不同，数据不同，部分分不同。）~~\n\n### 【简要题意】\n\n给定一棵 $n$ 个节点的无根树以及树上的 $k$ 个关键节点，边有边权（即边的长度）。$q$ 次询问，每次给出 $s,t$，问从 $s$ 到 $t$ 且经过**至少一个**关键节点的路径的最短长度。", "inputFormat": "第一行三个正整数 $n, q, k$，表示树的节点个数，询问次数和关键节点个数。\n\n接下来 $n-1$ 行，每行三个正整数 $u, v, w$，表示树中存在边 $(u, v)$，边权为 $w$。保证输入构成一棵树。\n\n接下来一行 $k$ 个两两不同的正整数，表示关键节点的编号。\n\n接下来 $q$ 行，每行两个正整数 $s, t$，表示一次询问。", "outputFormat": "对于每次询问输出一行一个非负整数，表示此次询问的最短合法路径长度。\n\n注意，合法路径可以不经过任何边，此时路径长为 $0$。", "hint": "### 【数据范围】\n\nupd at `2023-6-25`：新增了两组 hack 数据，将其置于 $\\text{Sub}\\textsf6$ 中，不记分数。\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\n\\textbf{Subtask} & \\text{测试点编号} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1&1\\sim2 & k=n & 5 \\r\n\\textsf2&16\\sim20 &k=1,n\\leqslant10^3,q\\leqslant10^3 & 15 \\r\n\\textsf3&21\\sim25 & n\\leqslant10^3,q\\leqslant10^3 & 15 \\r\n\\textsf4&3\\sim7 & q=1 & 15 \\r\n\\textsf5&8\\sim15 & - & 50 \\r\n\\textsf6&26\\sim27 & - & 0 \\r\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant q\\leqslant 10^5$，$1\\leqslant k\\leqslant n$，$1\\leqslant w\\leqslant 10^4$，$1\\leqslant u,v,s,t\\leqslant n$。\n\n### 【样例解释 #1】\n![](https://cdn.luogu.com.cn/upload/image_hosting/3hvr33bz.png)\n\n图中加粗节点表示关键点。\n\n对于每组询问，以下为一种最优路径（最优路径可能有多条）：\n1. $2\\to1\\to3$。\n2. $2\\to1$。\n3. $7\\to1\\to2\\to1$。\n4. $4\\to3\\to5$。\n5. $6\\to2\\to6$。\n6. $2$（合法路径可以不经过任何边，此时路径长为 $0$）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NAPC-#1] rStage5 - Hard Conveyors", "background": "**本题新增两组 hack 数据。**\n\n---\n![](https://cdn.luogu.com.cn/upload/image_hosting/bp1ypbgf.png)\n\n更硬，所以可能就更脆，所以更容易被击破（确信）。\n\n您只花了两个小时就秒掉了正城 s1~s10，来秒逆城了。", "description": "**本题与 Stage5 的区别是合法路径定义不同**（简要题意中加粗部分不同）。~~（其实还有：样例不同，数据不同，部分分不同。）~~\n\n### 【简要题意】\n\n给定一棵 $n$ 个节点的无根树以及树上的 $k$ 个关键节点，边有边权（即边的长度）。$q$ 次询问，每次给出 $s,t$，问从 $s$ 到 $t$ 且经过**至少一个**关键节点的路径的最短长度。", "inputFormat": "第一行三个正整数 $n, q, k$，表示树的节点个数，询问次数和关键节点个数。\n\n接下来 $n-1$ 行，每行三个正整数 $u, v, w$，表示树中存在边 $(u, v)$，边权为 $w$。保证输入构成一棵树。\n\n接下来一行 $k$ 个两两不同的正整数，表示关键节点的编号。\n\n接下来 $q$ 行，每行两个正整数 $s, t$，表示一次询问。", "outputFormat": "对于每次询问输出一行一个非负整数，表示此次询问的最短合法路径长度。\n\n注意，合法路径可以不经过任何边，此时路径长为 $0$。", "hint": "### 【数据范围】\n\nupd at `2023-6-25`：新增了两组 hack 数据，将其置于 $\\text{Sub}\\textsf6$ 中，不记分数。\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\n\\textbf{Subtask} & \\text{测试点编号} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1&1\\sim2 & k=n & 5 \\r\n\\textsf2&16\\sim20 &k=1,n\\leqslant10^3,q\\leqslant10^3 & 15 \\r\n\\textsf3&21\\sim25 & n\\leqslant10^3,q\\leqslant10^3 & 15 \\r\n\\textsf4&3\\sim7 & q=1 & 15 \\r\n\\textsf5&8\\sim15 & - & 50 \\r\n\\textsf6&26\\sim27 & - & 0 \\r\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant q\\leqslant 10^5$，$1\\leqslant k\\leqslant n$，$1\\leqslant w\\leqslant 10^4$，$1\\leqslant u,v,s,t\\leqslant n$。\n\n### 【样例解释 #1】\n![](https://cdn.luogu.com.cn/upload/image_hosting/3hvr33bz.png)\n\n图中加粗节点表示关键点。\n\n对于每组询问，以下为一种最优路径（最优路径可能有多条）：\n1. $2\\to1\\to3$。\n2. $2\\to1$。\n3. $7\\to1\\to2\\to1$。\n4. $4\\to3\\to5$。\n5. $6\\to2\\to6$。\n6. $2$（合法路径可以不经过任何边，此时路径长为 $0$）。", "locale": "zh-CN"}}}
{"pid": "P9433", "type": "P", "difficulty": 5, "samples": [["7 5 2\n1 2 3\n1 3 5\n3 4 2\n3 5 4\n2 6 1\n1 7 1\n2 3\n2 3\n2 1\n7 1\n4 5\n6 6", "8\n13\n17\n22\n18"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化", "树的遍历", "最近公共祖先 LCA"], "title": "[NAPC-#1] Stage5 - Conveyors", "background": ">![](https://cdn.luogu.com.cn/upload/image_hosting/4wcng8qe.png)\n>\n>— rs8", "description": "### 【简要题意】\n\n给定一棵 $n$ 个节点的无根树以及树上的 $k$ 个关键节点，边有边权（即边的长度）。$q$ 次询问，每次给出 $s,t$，问从 $s$ 到 $t$ 且经过至少一次**每个**关键节点的路径的最短长度。\n\n### 【原始题意】\n\n在某一面 kid 又遇到了往返跑关卡。Really popular apparently.\n\n关卡给 kid 留下的空间形状是一棵无向带权树，边权即边的长度。这棵树有 $n$ 个节点，其中有 $k$ 个点上各**恰**有一个发光小球，kid 经过有小球的点（称为关键点）时就可以收集小球。kid 从 $s$ 点出发，当他收集到全部 $k$ 个小球时，传送门就会在 $t$ 点出现。\n\n想速通的 kid 想知道他从 $s$ 点出发收集到全部 $k$ 个小球并进入位于 $t$ 点的传送门所需要走的最小时间（其实也就是路径长度，因为 kid 的速度恒定）。\n\n但是 Geezer 很狡猾，塔内这一面被复制成了 $q$ 层，每层的 $s$ 和 $t$ 还可能有变动。kid 慌了，忙找到你求助。", "inputFormat": "第一行三个正整数 $n, q, k$，表示树的节点个数，询问次数和关键节点个数。\n\n接下来 $n-1$ 行，每行三个正整数 $u, v, w$，表示树中存在边 $(u, v)$，边权为 $w$。保证输入构成一棵树。\n\n接下来一行 $k$ 个两两不同的正整数，表示关键节点的编号。\n\n接下来 $q$ 行，每行两个正整数 $s, t$，表示一次询问。", "outputFormat": "对于每次询问输出一行一个非负整数，表示此次询问的最短合法路径长度。\n\n注意，合法路径可以不经过任何边，此时路径长为 $0$。", "hint": "### 【数据范围】\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\n\\textbf{Subtask} & \\text{测试点编号} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1&1\\sim14 & n\\leqslant15,\\mathbf R& 18 \\r\n\\textsf2&15\\sim20 & q=1 & 18 \\r\n\\textsf3&46\\sim48 & s=t,k=n & 6 \\r\n\\textsf4&21\\sim25 & k=n & 18 \\r\n\\textsf5&26\\sim30 & \\mathbf A & 18 \\r\n\\textsf6&31\\sim45 & - & 22 \\r\n\\end{array}\n$$\n友情提醒：$\\text{Subtask }\\textsf1$ 并没有限制 $q$ 的范围。\n\n- 特殊性质 $\\mathbf R$：保证树随机生成（对于 $i\\ge2$，在 $[1,i)$ 内随机选择一个点和 $i$ 连边，边权在一固定区间内均匀随机生成）。\n- 特殊性质 $\\mathbf A$：定义 $f(x)$ 表示存在 $i,j\\in[1,n]$（可能 $i=j$） 且 $i,j$ 均为关键点，使得 $x$ 在 $i$ 到 $j$ 的最短路径上；那么对每次询问保证 $f(s)$ 和 $f(t)$ 均成立。\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant q\\leqslant 10^5$，$1\\leqslant k\\leqslant n$，$1\\leqslant w\\leqslant 10^4$，$1\\leqslant u,v,s,t\\leqslant n$。\n\n### 【样例解释 #1】\n![](https://cdn.luogu.com.cn/upload/image_hosting/3hvr33bz.png)\n\n图中加粗节点表示关键点。\n\n对于每组询问，以下为一种最优路径（最优路径可能有多条）：\n1. $2\\to1\\to3$。\n2. $2\\to1\\to3\\to1$。\n3. $7\\to1\\to2\\to1\\to3\\to1$。\n4. $4\\to3\\to1\\to2\\to1\\to3\\to5$。\n5. $6\\to2\\to1\\to3\\to1\\to2\\to6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NAPC-#1] Stage5 - Conveyors", "background": ">![](https://cdn.luogu.com.cn/upload/image_hosting/4wcng8qe.png)\n>\n>— rs8", "description": "### 【简要题意】\n\n给定一棵 $n$ 个节点的无根树以及树上的 $k$ 个关键节点，边有边权（即边的长度）。$q$ 次询问，每次给出 $s,t$，问从 $s$ 到 $t$ 且经过至少一次**每个**关键节点的路径的最短长度。\n\n### 【原始题意】\n\n在某一面 kid 又遇到了往返跑关卡。Really popular apparently.\n\n关卡给 kid 留下的空间形状是一棵无向带权树，边权即边的长度。这棵树有 $n$ 个节点，其中有 $k$ 个点上各**恰**有一个发光小球，kid 经过有小球的点（称为关键点）时就可以收集小球。kid 从 $s$ 点出发，当他收集到全部 $k$ 个小球时，传送门就会在 $t$ 点出现。\n\n想速通的 kid 想知道他从 $s$ 点出发收集到全部 $k$ 个小球并进入位于 $t$ 点的传送门所需要走的最小时间（其实也就是路径长度，因为 kid 的速度恒定）。\n\n但是 Geezer 很狡猾，塔内这一面被复制成了 $q$ 层，每层的 $s$ 和 $t$ 还可能有变动。kid 慌了，忙找到你求助。", "inputFormat": "第一行三个正整数 $n, q, k$，表示树的节点个数，询问次数和关键节点个数。\n\n接下来 $n-1$ 行，每行三个正整数 $u, v, w$，表示树中存在边 $(u, v)$，边权为 $w$。保证输入构成一棵树。\n\n接下来一行 $k$ 个两两不同的正整数，表示关键节点的编号。\n\n接下来 $q$ 行，每行两个正整数 $s, t$，表示一次询问。", "outputFormat": "对于每次询问输出一行一个非负整数，表示此次询问的最短合法路径长度。\n\n注意，合法路径可以不经过任何边，此时路径长为 $0$。", "hint": "### 【数据范围】\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\n\\textbf{Subtask} & \\text{测试点编号} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1&1\\sim14 & n\\leqslant15,\\mathbf R& 18 \\r\n\\textsf2&15\\sim20 & q=1 & 18 \\r\n\\textsf3&46\\sim48 & s=t,k=n & 6 \\r\n\\textsf4&21\\sim25 & k=n & 18 \\r\n\\textsf5&26\\sim30 & \\mathbf A & 18 \\r\n\\textsf6&31\\sim45 & - & 22 \\r\n\\end{array}\n$$\n友情提醒：$\\text{Subtask }\\textsf1$ 并没有限制 $q$ 的范围。\n\n- 特殊性质 $\\mathbf R$：保证树随机生成（对于 $i\\ge2$，在 $[1,i)$ 内随机选择一个点和 $i$ 连边，边权在一固定区间内均匀随机生成）。\n- 特殊性质 $\\mathbf A$：定义 $f(x)$ 表示存在 $i,j\\in[1,n]$（可能 $i=j$） 且 $i,j$ 均为关键点，使得 $x$ 在 $i$ 到 $j$ 的最短路径上；那么对每次询问保证 $f(s)$ 和 $f(t)$ 均成立。\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant q\\leqslant 10^5$，$1\\leqslant k\\leqslant n$，$1\\leqslant w\\leqslant 10^4$，$1\\leqslant u,v,s,t\\leqslant n$。\n\n### 【样例解释 #1】\n![](https://cdn.luogu.com.cn/upload/image_hosting/3hvr33bz.png)\n\n图中加粗节点表示关键点。\n\n对于每组询问，以下为一种最优路径（最优路径可能有多条）：\n1. $2\\to1\\to3$。\n2. $2\\to1\\to3\\to1$。\n3. $7\\to1\\to2\\to1\\to3\\to1$。\n4. $4\\to3\\to1\\to2\\to1\\to3\\to5$。\n5. $6\\to2\\to1\\to3\\to1\\to2\\to6$。", "locale": "zh-CN"}}}
{"pid": "P9434", "type": "P", "difficulty": 6, "samples": [["4 0\n3 1\n2 1 U\n1 2 R\n2 3 L\n3 1\n4 1 U\n1 2 R\n3 4 L\n6 4\n2 1 U\n1 2 R\n3 2 U\n2 3 L\n1 3 R\n2 4 L\n8 9\n4 5 L\n1 4 R\n3 4 L\n2 3 R\n1 2 R\n3 2 U\n4 2 U\n3 1 U\n", "1\n0\n4\n6"], ["见附件中的 s4/ex.in", "见附件中的 s4/ex.out"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "[NAPC-#1] Stage4 - Needle", "background": "> ![](https://cdn.luogu.com.cn/upload/image_hosting/jiio1vp7.png)\n>\n> — s10", "description": "平面上有 $n$ 个**位置互不相同**的刺。刺有上下左右这 $4$ 种朝向。\n\n定义一个【阴间刺】（其实就是削过的 sf 刺）为满足以下条件的有序刺**对** $(s_1,s_2,s_3)$：\n- $s_1$ 朝右，$s_2$ 朝左，$s_3$ 朝上。\n- $x(s_1)<x(s_2)\\leqslant x(s_3)$。\n- $y(s_2)>y(s_1)>y(s_3)$。\n- $x(s_2)-x(s_1)\\leqslant d$。\n\n其中 $x(s)$ 和 $y(s)$ 分别表示刺 $s$ 的横坐标和纵坐标；$d$ 为 kid 的宽度，在单组测试点中为常量。\n\n坐标系 $x$ 轴正方向为从左到右，$y$ 轴正方向为从下到上。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tzih4wjx.png) ![](https://cdn.luogu.com.cn/upload/image_hosting/4wr5yfhz.png)\n\n上图是 $d\\geqslant 2$ 时两个阴间刺的例子。~~虽然第二个刺型中 s3 对 kid 的跳跃没有影响/oh~~\n\n给出 $n$ 个刺的位置和朝向，请你告诉 kid 有多少（他跳不过去的）阴间刺。\n\n显然朝下的刺在本题内是没有意义的。", "inputFormat": "**本题单测试点内有多组数据。**\n\n第一行仅两个正整数 $T,id$ 表示测试数据的数量和测试点编号。特别地，样例的 $id=0$。\n\n对于每组测试点，第一行输入两个正整数 $n,d$，表示刺的数量和 kid 的宽度，接下来 $n$ 行每行两个整数 $x,y$ 和一个字符 $c$ 表示一个刺的位置和朝向：`U` 代表朝上，`D` 代表朝下，`L` 代表朝左，`R` 代表朝右。", "outputFormat": "对于每组测试点，输出一行一个正整数表示阴间刺的数量。", "hint": "### 【数据范围】\n\n**本题采用捆绑测试。**\n$$\n\\def\\r{\\cr\\hline}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c|c}\n\\textbf{Subtask} & id= & {\\sum n\\leqslant} & \\textbf{Other Constraints} & \\textbf{Score}\\r\n\\textsf1 & 1\\sim 7 & 3\\times10^4 & n\\leqslant 30 & 10 \\r\n\\textsf2 & 31\\sim45 & 10^4 & - & 25 \\r\n\\textsf3 & 8\\sim10,16\\sim17 & 10^5 & d=10^9 & 20 \\r\n\\textsf4 & 18\\sim20 & 3\\times10^5 & d=1 & 10 \\r\n\\textsf5 & 11\\sim15,21\\sim30 & 3\\times10^5 & - & 35 \\r\n\\end{array}\n$$\n\n其中 $\\sum n$ 表示单测试点内所有 $n$ 的总和。\n\n对于 $100\\%$ 的数据，$1\\leqslant T\\leqslant 2\\times10^3$，$1\\leqslant n\\leqslant 3\\times10^5$，$\\sum n\\leqslant 3\\times10^5$，$1\\leqslant d\\leqslant 10^9$，$1\\leqslant x,y\\leqslant 10^9$，$(x,y)$ 互不相同，$c\\in\\{\\texttt U, \\texttt D, \\texttt L, \\texttt R \\}$。\n\n#### 【提示】\n\n$\\textbf{Sub}{\\textsf2}$ 的 $O(n^2\\log n)$ 做法和 $O(n^2)$ 做法都可以想想，可能都有些提示性……？qwq\n\n### 【样例 #1-1 & #1-2 解释】\n\n见【题目描述】中**两**幅图。\n\n注意 #1-2 中 $d=1$，所以 kid 可以简单地钻缝过去，不算阴间。\n\n### 【样例 #1-3 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ha8w6ljz.png)\n\n$4$ 个阴间刺分别为：$\\Big((1,3),(2,4),(2,1)\\Big),\\Big((1,2),(2,4),(2,1)\\Big),\\Big((1,2),(2,3),(2,1)\\Big),\\Big((1,3),(2,4),(3,2)\\Big)$\n即 $(5,6,1),(2,6,1),(2,4,1),(5,6,3)$（数字代表刺的下标：$i$ 代表第 $i$ 个刺）。\n\n### 【样例 #1-4 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q988yxmg.png)\n\n$6$ 个阴间刺分别为 $(2,1,7),(4,1,7),(4,3,6),(4,3,7),(4,3,8),(5,3,8)$。\n\n【样例 #2】见附件，该样例除 $id=0$ 外满足 $\\text{Subtask }\\textsf1$ 的所有限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NAPC-#1] Stage4 - Needle", "background": "> ![](https://cdn.luogu.com.cn/upload/image_hosting/jiio1vp7.png)\n>\n> — s10", "description": "平面上有 $n$ 个**位置互不相同**的刺。刺有上下左右这 $4$ 种朝向。\n\n定义一个【阴间刺】（其实就是削过的 sf 刺）为满足以下条件的有序刺**对** $(s_1,s_2,s_3)$：\n- $s_1$ 朝右，$s_2$ 朝左，$s_3$ 朝上。\n- $x(s_1)<x(s_2)\\leqslant x(s_3)$。\n- $y(s_2)>y(s_1)>y(s_3)$。\n- $x(s_2)-x(s_1)\\leqslant d$。\n\n其中 $x(s)$ 和 $y(s)$ 分别表示刺 $s$ 的横坐标和纵坐标；$d$ 为 kid 的宽度，在单组测试点中为常量。\n\n坐标系 $x$ 轴正方向为从左到右，$y$ 轴正方向为从下到上。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tzih4wjx.png) ![](https://cdn.luogu.com.cn/upload/image_hosting/4wr5yfhz.png)\n\n上图是 $d\\geqslant 2$ 时两个阴间刺的例子。~~虽然第二个刺型中 s3 对 kid 的跳跃没有影响/oh~~\n\n给出 $n$ 个刺的位置和朝向，请你告诉 kid 有多少（他跳不过去的）阴间刺。\n\n显然朝下的刺在本题内是没有意义的。", "inputFormat": "**本题单测试点内有多组数据。**\n\n第一行仅两个正整数 $T,id$ 表示测试数据的数量和测试点编号。特别地，样例的 $id=0$。\n\n对于每组测试点，第一行输入两个正整数 $n,d$，表示刺的数量和 kid 的宽度，接下来 $n$ 行每行两个整数 $x,y$ 和一个字符 $c$ 表示一个刺的位置和朝向：`U` 代表朝上，`D` 代表朝下，`L` 代表朝左，`R` 代表朝右。", "outputFormat": "对于每组测试点，输出一行一个正整数表示阴间刺的数量。", "hint": "### 【数据范围】\n\n**本题采用捆绑测试。**\n$$\n\\def\\r{\\cr\\hline}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c|c}\n\\textbf{Subtask} & id= & {\\sum n\\leqslant} & \\textbf{Other Constraints} & \\textbf{Score}\\r\n\\textsf1 & 1\\sim 7 & 3\\times10^4 & n\\leqslant 30 & 10 \\r\n\\textsf2 & 31\\sim45 & 10^4 & - & 25 \\r\n\\textsf3 & 8\\sim10,16\\sim17 & 10^5 & d=10^9 & 20 \\r\n\\textsf4 & 18\\sim20 & 3\\times10^5 & d=1 & 10 \\r\n\\textsf5 & 11\\sim15,21\\sim30 & 3\\times10^5 & - & 35 \\r\n\\end{array}\n$$\n\n其中 $\\sum n$ 表示单测试点内所有 $n$ 的总和。\n\n对于 $100\\%$ 的数据，$1\\leqslant T\\leqslant 2\\times10^3$，$1\\leqslant n\\leqslant 3\\times10^5$，$\\sum n\\leqslant 3\\times10^5$，$1\\leqslant d\\leqslant 10^9$，$1\\leqslant x,y\\leqslant 10^9$，$(x,y)$ 互不相同，$c\\in\\{\\texttt U, \\texttt D, \\texttt L, \\texttt R \\}$。\n\n#### 【提示】\n\n$\\textbf{Sub}{\\textsf2}$ 的 $O(n^2\\log n)$ 做法和 $O(n^2)$ 做法都可以想想，可能都有些提示性……？qwq\n\n### 【样例 #1-1 & #1-2 解释】\n\n见【题目描述】中**两**幅图。\n\n注意 #1-2 中 $d=1$，所以 kid 可以简单地钻缝过去，不算阴间。\n\n### 【样例 #1-3 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ha8w6ljz.png)\n\n$4$ 个阴间刺分别为：$\\Big((1,3),(2,4),(2,1)\\Big),\\Big((1,2),(2,4),(2,1)\\Big),\\Big((1,2),(2,3),(2,1)\\Big),\\Big((1,3),(2,4),(3,2)\\Big)$\n即 $(5,6,1),(2,6,1),(2,4,1),(5,6,3)$（数字代表刺的下标：$i$ 代表第 $i$ 个刺）。\n\n### 【样例 #1-4 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q988yxmg.png)\n\n$6$ 个阴间刺分别为 $(2,1,7),(4,1,7),(4,3,6),(4,3,7),(4,3,8),(5,3,8)$。\n\n【样例 #2】见附件，该样例除 $id=0$ 外满足 $\\text{Subtask }\\textsf1$ 的所有限制。", "locale": "zh-CN"}}}
{"pid": "P9435", "type": "P", "difficulty": 2, "samples": [["1\n4", "4"], ["5\n3\n18\n999\n9999\n9999999999", "3\n6\n12\n15\n35\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "O2优化", "洛谷月赛"], "title": "『XYGOI round1』三个数", "background": "", "description": "MX 有一个有 $(w-2)$ 个数的集合 $S=\\{3,4,5,\\cdots ,w\\}$。要求构造一个只包含非负整数的集合（无重复元素），使得 $S$ 里面的任何一个数都能被这个集合里面大于等于 $3$ 个不同的数相加得到，求这个集合中至少包含多少个元素。", "inputFormat": "本题包含多组测试数据。\n\n第一行输入一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行每行输入一个整数 $w$。", "outputFormat": "共 $T$ 行，每行输出一个整数 $n$，表示集合至少应该含有的元素个数。", "hint": "#### 样例 1 说明：\n\n集合元素可以为 $0,1,2,3$。\n\n#### 数据范围：\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1\\le T \\le 10^5$，$3\\le w \\le 10^{12}$。\n\n| Subtask | $T$ | $w$ | 分值 |\n|:-:|:-:|:-:|:-:|\n|0|$=1$|$w\\le 10$|5|\n|1|$1\\le T\\le 10^3$|$w\\le 20$|10|\n|2|$1\\le T\\le 50$|$w\\le 10^{3}$|25|\n|3|$1\\le T\\le 10^3$|$w\\le 10^{5}$|30|\n|4|$1\\le T\\le 10^5$|$3\\le w\\le 10^{12}$|30|\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『XYGOI round1』三个数", "background": "", "description": "MX 有一个有 $(w-2)$ 个数的集合 $S=\\{3,4,5,\\cdots ,w\\}$。要求构造一个只包含非负整数的集合（无重复元素），使得 $S$ 里面的任何一个数都能被这个集合里面大于等于 $3$ 个不同的数相加得到，求这个集合中至少包含多少个元素。", "inputFormat": "本题包含多组测试数据。\n\n第一行输入一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行每行输入一个整数 $w$。", "outputFormat": "共 $T$ 行，每行输出一个整数 $n$，表示集合至少应该含有的元素个数。", "hint": "#### 样例 1 说明：\n\n集合元素可以为 $0,1,2,3$。\n\n#### 数据范围：\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1\\le T \\le 10^5$，$3\\le w \\le 10^{12}$。\n\n| Subtask | $T$ | $w$ | 分值 |\n|:-:|:-:|:-:|:-:|\n|0|$=1$|$w\\le 10$|5|\n|1|$1\\le T\\le 10^3$|$w\\le 20$|10|\n|2|$1\\le T\\le 50$|$w\\le 10^{3}$|25|\n|3|$1\\le T\\le 10^3$|$w\\le 10^{5}$|30|\n|4|$1\\le T\\le 10^5$|$3\\le w\\le 10^{12}$|30|\n", "locale": "zh-CN"}}}
{"pid": "P9436", "type": "P", "difficulty": 5, "samples": [["2\n10 4\n2 2 4 8 6 5 7 6\n2 0", "1\n1"], ["2\n40 21\n1 1 2 2 6 6 7 7 8 8 9 9 10 10 11 11 15 15 16 16 23 23 24 24 25 25 26 26 30 30 34 35 35 36 36 37 37 38 38 39 40 40\n40 15\n3 3 4 4 14 14 15 15 17 17 19 19 24 23 25 24 27 26 30 29 31 30 33 32 35 34 39 38 40 39", "4\n4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "洛谷月赛"], "title": "『XYGOI round1』一些数", "background": "MX 在研究排列所具有的性质。这一天，她拿出了 $n$ 张卡片排成一排，想要在上面填数以写成一个 $1\\sim n$ 的排列。  \n\nPiggy 趁 MX 不注意，偷偷在一些卡片上写了数。", "description": "MX 很快发现了这一切。不过她并不生气，而是考虑一个有趣的问题：如果我在上面填一些数，让它依然构成一个排列，且它的最长上升子序列长度为 $n-1$，MX 有多少种填数方法呢？    \n\nPiggy 比较良心。他没有在不同的位置上填相同的数。", "inputFormat": "本题有多组测试数据。  \n\n第一行一个整数 $T$ 代表数据组数。  \n对于每组数据：  \n- 第一行两个整数 $n,q$ 代表卡牌个数和 Piggy 已经填上了多少个数。  \n- 第二行 $2q$ 个整数，第 $2i-1,2i$ 个整数 $(x,y)$ 代表第 $x$ 个数被 Piggy 填成了 $y$。", "outputFormat": "输出 $T$ 行，每行一个整数代表答案。", "hint": "#### 样例解释\n用 $-1$ 代表此位置数字还未确定。  \n样例 $1$：第一组给定的排列为 $-1,2,-1,8,-1,5,6,-1,-1,-1$。容易发现，只有 $1,2,3,8,4,5,6,7,9,10$ 的最长上升子序列长度为 $10-1=9$。第二组给定的排列为 $-1,-1$，$2,1$ 为唯一满足要求的序列。\n\n**本题采用捆绑测试。**\n\n\n| Subtask | $\\sum n$ | $\\sum q$ |  分值 |\n|:-:|:-:|:-:|:-:|\n|0|$\\le 10$|$\\le 10$|10|\n|1|$\\le 15$|$\\le 10$|20|\n|2|$\\le 5\\times 10^3$|$\\le 5\\times 10^3$|30|\n|3|$\\le 5\\times 10^5$|$\\le 5\\times 10^5$|40| \n\n保证 $ 0\\le q\\le n$，$1\\le n\\le  5\\times 10^5$，$1\\le T\\le 10^5$，$1 \\le x,y \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『XYGOI round1』一些数", "background": "MX 在研究排列所具有的性质。这一天，她拿出了 $n$ 张卡片排成一排，想要在上面填数以写成一个 $1\\sim n$ 的排列。  \n\nPiggy 趁 MX 不注意，偷偷在一些卡片上写了数。", "description": "MX 很快发现了这一切。不过她并不生气，而是考虑一个有趣的问题：如果我在上面填一些数，让它依然构成一个排列，且它的最长上升子序列长度为 $n-1$，MX 有多少种填数方法呢？    \n\nPiggy 比较良心。他没有在不同的位置上填相同的数。", "inputFormat": "本题有多组测试数据。  \n\n第一行一个整数 $T$ 代表数据组数。  \n对于每组数据：  \n- 第一行两个整数 $n,q$ 代表卡牌个数和 Piggy 已经填上了多少个数。  \n- 第二行 $2q$ 个整数，第 $2i-1,2i$ 个整数 $(x,y)$ 代表第 $x$ 个数被 Piggy 填成了 $y$。", "outputFormat": "输出 $T$ 行，每行一个整数代表答案。", "hint": "#### 样例解释\n用 $-1$ 代表此位置数字还未确定。  \n样例 $1$：第一组给定的排列为 $-1,2,-1,8,-1,5,6,-1,-1,-1$。容易发现，只有 $1,2,3,8,4,5,6,7,9,10$ 的最长上升子序列长度为 $10-1=9$。第二组给定的排列为 $-1,-1$，$2,1$ 为唯一满足要求的序列。\n\n**本题采用捆绑测试。**\n\n\n| Subtask | $\\sum n$ | $\\sum q$ |  分值 |\n|:-:|:-:|:-:|:-:|\n|0|$\\le 10$|$\\le 10$|10|\n|1|$\\le 15$|$\\le 10$|20|\n|2|$\\le 5\\times 10^3$|$\\le 5\\times 10^3$|30|\n|3|$\\le 5\\times 10^5$|$\\le 5\\times 10^5$|40| \n\n保证 $ 0\\le q\\le n$，$1\\le n\\le  5\\times 10^5$，$1\\le T\\le 10^5$，$1 \\le x,y \\le n$。", "locale": "zh-CN"}}}
{"pid": "P9437", "type": "P", "difficulty": 4, "samples": [["3\n1 2 3\n1 2", "538"], ["3\n5 21 0\n1 2", "6418"], ["4\n1 2 3 4\n1 2 2\n", "1900"], ["6\n10 23 16 3 125 1\n1 1 1 1 1\n", "7680868"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "树形 DP", "洛谷月赛"], "title": "『XYGOI round1』一棵树", "background": "java 今天带了一棵树到出题组，然后被不讲理的 MX 占为己有了。", "description": "于是 MX 有一棵 $n$ 个节点的树，每个点上有一个数字 $a_i$。\n\n定义一条路径 $(x,y)$ 的权值 $w(x,y)$ 为，从 $x$ 走到 $y$ 的最短路径上，所有节点上的数字顺次写下后得到的数。如，顺次经过写有数字 $3,21,0,5$ 的四个节点，那么这个路径的权值为 $32105$。\n\nMX 想知道这棵树所有路径的权值之和，即 $\\sum\\limits_{x=1}^n\\sum\\limits_{y=1}^nw(x,y)$ 为多少。\n\n答案可能很大，对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个非负整数 $a_i$。\n\n第三行 $n-1$ 个正整数，第 $i$ 个数 $p_i$ 表示节点 $p_i$ 与节点 $i+1$ 之间有边。保证 $1\\le p_i\\le i$。", "outputFormat": "一行一个整数，表示答案。答案对 $998244353$ 取模。", "hint": "### 样例解释\n\n样例一解释：$1+12+123+2+21+23+3+32+321=538$。\n\n样例二解释：$5+521+5210+21+215+210+0+021+0215=6418$。\n\n### 数据范围  \n**本题采用捆绑测试。**  \n\n记 $V=\\max\\{a_i\\}+1$。\n\n|Subtask|分值|$n\\le$|$V\\le $|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|0|5|$1000$|$10$||\n|1|15|$8000$|$10^9$||\n|2|15|$10^6$|$10^9$|$p_i=i$|\n|3|15|$10^6$|$10^9$|$p_i=1$|\n|4|50|$10^6$|$10^9$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$0\\le a_i<10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『XYGOI round1』一棵树", "background": "java 今天带了一棵树到出题组，然后被不讲理的 MX 占为己有了。", "description": "于是 MX 有一棵 $n$ 个节点的树，每个点上有一个数字 $a_i$。\n\n定义一条路径 $(x,y)$ 的权值 $w(x,y)$ 为，从 $x$ 走到 $y$ 的最短路径上，所有节点上的数字顺次写下后得到的数。如，顺次经过写有数字 $3,21,0,5$ 的四个节点，那么这个路径的权值为 $32105$。\n\nMX 想知道这棵树所有路径的权值之和，即 $\\sum\\limits_{x=1}^n\\sum\\limits_{y=1}^nw(x,y)$ 为多少。\n\n答案可能很大，对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个非负整数 $a_i$。\n\n第三行 $n-1$ 个正整数，第 $i$ 个数 $p_i$ 表示节点 $p_i$ 与节点 $i+1$ 之间有边。保证 $1\\le p_i\\le i$。", "outputFormat": "一行一个整数，表示答案。答案对 $998244353$ 取模。", "hint": "### 样例解释\n\n样例一解释：$1+12+123+2+21+23+3+32+321=538$。\n\n样例二解释：$5+521+5210+21+215+210+0+021+0215=6418$。\n\n### 数据范围  \n**本题采用捆绑测试。**  \n\n记 $V=\\max\\{a_i\\}+1$。\n\n|Subtask|分值|$n\\le$|$V\\le $|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|0|5|$1000$|$10$||\n|1|15|$8000$|$10^9$||\n|2|15|$10^6$|$10^9$|$p_i=i$|\n|3|15|$10^6$|$10^9$|$p_i=1$|\n|4|50|$10^6$|$10^9$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$0\\le a_i<10^9$。", "locale": "zh-CN"}}}
{"pid": "P9438", "type": "P", "difficulty": 5, "samples": [["2 3 3 1 0 0\n1\n2", "8"], ["2 3 3 1 0 0\n3\n3 5 7", "4 0 0"], ["7 3 0 0\n3\n49 1 343", "1 0 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷月赛"], "title": "『XYGOI round1』好多数", "background": "小 X 在和小 L 一起玩。他们走到了公园，发现了一棵长得很奇怪的参天大树。这棵树，按照 OIer 们的习惯，它有一个明显特征，那就是**严重右偏**。", "description": "小 X 想到了另外一个东西，也是严重右偏的。\n\n首先，他写下一个数字 $n$。  \n\n接着，对于所有 $n$ 的因数 $x\\notin\\{1,n\\}$，让 $x$ 从小到大的成为 $n$ 的儿子节点。 \n\n递归的建这棵树，这棵树就建成了。小 X 把这棵树称为一个“$n$ 号数学树”。小 X 想知道，给定 $q$ 个正整数 $x$，它在 $n$ 号数学树出现了几次。  \n\n因为 $n$ 很大，他只能告诉你 $n$ 的质因数分解。  \n\n答案对 $998244353$ 取模。", "inputFormat": "第一行若干对整数 $(a_i,b_i)$，表示 $n=\\prod a_i^{b_i}$，以 `0 0` 结尾。题目保证，$a_i$ 是质数，$b_i\\in N^*$。\n\n第二行一个整数，表示 $q$，含义如题面所示。  \n\n第三行 $q$ 个整数，代表这组数据的 $q$ 次询问。", "outputFormat": "输出一行 $q$ 个整数，表示每个询问的答案对 $998244353$ 取模的结果。", "hint": "样例解释：前两组数据均为 $24$ 号数学树。这棵树绘制以后如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/ejrhdnv3.png)   \n\n其中，$2$ 出现了 $8$ 次，$3$ 出现了 $4$ 次，$5,7$ 则没有出现过。  \n\n对于第三组数据，你需要注意 $343$ 在 $343$ 号数学树的树根出现了一次，$1$ 不会在数学树中出现。  \n\n| Subtask | $n$ | $q$ | 保证 $n$ 是质数的幂 | 分值 |\n|:-:|:-:|:-:|:-:|:-:|\n|0|$\\le 10^3$|$\\le 20$|Yes|10|\n|1|$\\le 10^6$|$\\le 20$|No|10|\n|2|$\\sum b_i\\le5000$|$\\le 20$|Yes|40|\n|3|$\\sum b_i\\le5000$|$\\le 20$|No|40| \n\n对于 $100\\%$ 的数据，$1\\le b_i \\le 5000$，$\\sum b_i\\le5000$，$2\\le a_i\\le 10^9$，$1\\le x\\le 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『XYGOI round1』好多数", "background": "小 X 在和小 L 一起玩。他们走到了公园，发现了一棵长得很奇怪的参天大树。这棵树，按照 OIer 们的习惯，它有一个明显特征，那就是**严重右偏**。", "description": "小 X 想到了另外一个东西，也是严重右偏的。\n\n首先，他写下一个数字 $n$。  \n\n接着，对于所有 $n$ 的因数 $x\\notin\\{1,n\\}$，让 $x$ 从小到大的成为 $n$ 的儿子节点。 \n\n递归的建这棵树，这棵树就建成了。小 X 把这棵树称为一个“$n$ 号数学树”。小 X 想知道，给定 $q$ 个正整数 $x$，它在 $n$ 号数学树出现了几次。  \n\n因为 $n$ 很大，他只能告诉你 $n$ 的质因数分解。  \n\n答案对 $998244353$ 取模。", "inputFormat": "第一行若干对整数 $(a_i,b_i)$，表示 $n=\\prod a_i^{b_i}$，以 `0 0` 结尾。题目保证，$a_i$ 是质数，$b_i\\in N^*$。\n\n第二行一个整数，表示 $q$，含义如题面所示。  \n\n第三行 $q$ 个整数，代表这组数据的 $q$ 次询问。", "outputFormat": "输出一行 $q$ 个整数，表示每个询问的答案对 $998244353$ 取模的结果。", "hint": "样例解释：前两组数据均为 $24$ 号数学树。这棵树绘制以后如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/ejrhdnv3.png)   \n\n其中，$2$ 出现了 $8$ 次，$3$ 出现了 $4$ 次，$5,7$ 则没有出现过。  \n\n对于第三组数据，你需要注意 $343$ 在 $343$ 号数学树的树根出现了一次，$1$ 不会在数学树中出现。  \n\n| Subtask | $n$ | $q$ | 保证 $n$ 是质数的幂 | 分值 |\n|:-:|:-:|:-:|:-:|:-:|\n|0|$\\le 10^3$|$\\le 20$|Yes|10|\n|1|$\\le 10^6$|$\\le 20$|No|10|\n|2|$\\sum b_i\\le5000$|$\\le 20$|Yes|40|\n|3|$\\sum b_i\\le5000$|$\\le 20$|No|40| \n\n对于 $100\\%$ 的数据，$1\\le b_i \\le 5000$，$\\sum b_i\\le5000$，$2\\le a_i\\le 10^9$，$1\\le x\\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P9439", "type": "P", "difficulty": 5, "samples": [["6 6 3\n1 1 3 3 1 1 3 2 2\n0 2 6 3 1 1 3 2 2 6 4 5 3 4 2\n1 -1 4 1 3 2 4 3 5 4 6\n", "..#...\n.#.#..\n#.#.#.\n.#.#.#\n..#.#.\n...#..\n\n..#...\n.#.#..\n#.#.#.\n.#.#.#\n..#.#.\n...#..\n"], ["5 4 2\n1 0 6 1 1 4 1 2 2 5 2 2 3 3 4\n0 -1 7 1 1 4 1 5 2 2 3 3 4 4 4 5 4\n", "#..#.\n.#..#\n.#...\n..###\n\n##.##\n.##.#\n.###.\n..###\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "ICPC", "WF"], "title": "[ICPC 2021 WF] Crystal Crosswind", "background": "", "description": "You are part of a scientific team developing a new technique to image crystal structures at the molecular level. The technique involves blowing a very fine wind over the surface of the crystal at various angles to detect boundaries (indicated by molecules that are exposed to the wind). This is repeated with different wind directions and the boundaries observed for each direction are recorded. Your team has already collected the data, but – as is often the case with applied science – now the real work, analysis, must begin.\n\nFor a given crystal, you will receive the directions in which wind blew over the surface, and the locations of all boundaries encountered by each of these winds. For a wind blowing in direction ($w_x, w_y$), a boundary is defined as a location ($x, y$) such that a molecule exists at ($x, y$) and no molecule exists at ($x-w_x, y-w_y$). Note that for technical reasons $w_x$ and $w_y$ are not necessarily relatively prime.\n\nThe data might not uniquely determine the structure of the crystal. You must find the two unique structures with the minimal and maximal number of molecules consistent with the observations.\n\nFor example, in the first sample input, nine different molecules are directly encountered by the given winds. There must be a molecule at location ($3, 3$) because otherwise ($4, 2$) would be a boundary for the third wind. For similar reasons, there must be molecules at ($4, 4$) and ($5, 5$). There cannot be any further molecules as they would result in additional observations for some of the winds.", "inputFormat": "The first line of input contains three integers $d_x$, $d_y$, and $k$, where $d_x$ and $d_y$ ($1 \\leq d_x, d_y \\leq 10^3$) are the maximum dimensions of the crystal structure, and $k (1 \\leq k \\leq 10)$ is the number of times wind was blown over the crystal.\n\nEach of the remaining $k$ lines specifies the data for one wind. These lines each start with two integers $w_x$ and $w_y$ ($-d_x \\leq w_x \\leq d_x$ and $-d_y \\leq w_y \\leq d_y$, but not both zero) denoting the direction of the wind. Then comes an integer $b$ ($0 \\leq b \\leq 10^5$) giving the number of boundaries encountered by this wind. The line finishes with $b$ distinct pairs of integers $x,y$ ($1 \\leq x \\leq d_x$ and $1 \\leq y \\leq d_y$) listing each observed boundary.\n\nYou may assume the input is consistent with at least one crystal and that no molecules exist outside the specified dimensions.", "outputFormat": "Output two textual representations of the crystal structure separated by an empty line. Each structure has $d_y$ rows of $d_x$ characters, with the top-left corner corresponding to location ($1, 1$). The first is the structure with the minimal number of molecules consistent with the observations, the second is the maximal one. Use '#' for a location where a molecule exists and '.' for a location where no molecule exists.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2021 WF] Crystal Crosswind", "background": "", "description": "You are part of a scientific team developing a new technique to image crystal structures at the molecular level. The technique involves blowing a very fine wind over the surface of the crystal at various angles to detect boundaries (indicated by molecules that are exposed to the wind). This is repeated with different wind directions and the boundaries observed for each direction are recorded. Your team has already collected the data, but – as is often the case with applied science – now the real work, analysis, must begin.\n\nFor a given crystal, you will receive the directions in which wind blew over the surface, and the locations of all boundaries encountered by each of these winds. For a wind blowing in direction ($w_x, w_y$), a boundary is defined as a location ($x, y$) such that a molecule exists at ($x, y$) and no molecule exists at ($x-w_x, y-w_y$). Note that for technical reasons $w_x$ and $w_y$ are not necessarily relatively prime.\n\nThe data might not uniquely determine the structure of the crystal. You must find the two unique structures with the minimal and maximal number of molecules consistent with the observations.\n\nFor example, in the first sample input, nine different molecules are directly encountered by the given winds. There must be a molecule at location ($3, 3$) because otherwise ($4, 2$) would be a boundary for the third wind. For similar reasons, there must be molecules at ($4, 4$) and ($5, 5$). There cannot be any further molecules as they would result in additional observations for some of the winds.", "inputFormat": "The first line of input contains three integers $d_x$, $d_y$, and $k$, where $d_x$ and $d_y$ ($1 \\leq d_x, d_y \\leq 10^3$) are the maximum dimensions of the crystal structure, and $k (1 \\leq k \\leq 10)$ is the number of times wind was blown over the crystal.\n\nEach of the remaining $k$ lines specifies the data for one wind. These lines each start with two integers $w_x$ and $w_y$ ($-d_x \\leq w_x \\leq d_x$ and $-d_y \\leq w_y \\leq d_y$, but not both zero) denoting the direction of the wind. Then comes an integer $b$ ($0 \\leq b \\leq 10^5$) giving the number of boundaries encountered by this wind. The line finishes with $b$ distinct pairs of integers $x,y$ ($1 \\leq x \\leq d_x$ and $1 \\leq y \\leq d_y$) listing each observed boundary.\n\nYou may assume the input is consistent with at least one crystal and that no molecules exist outside the specified dimensions.", "outputFormat": "Output two textual representations of the crystal structure separated by an empty line. Each structure has $d_y$ rows of $d_x$ characters, with the top-left corner corresponding to location ($1, 1$). The first is the structure with the minimal number of molecules consistent with the observations, the second is the maximal one. Use '#' for a location where a molecule exists and '.' for a location where no molecule exists.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2021 WF] Crystal Crosswind", "background": "", "description": "你是一个科学团队中的一员，正在开发一种在分子级别上成像晶体结构的新技术。这种技术涉及在晶体表面吹送一股非常微弱的风，并以不同的角度吹送，以便检测边界（通过暴露给风的分子来表示）。这个过程会重复进行，每个吹送方向的边界都会被记录下来。你的团队已经收集到了数据，但是如同大多数应用科学一样，现在真正的工作，即分析工作必须开始。\n\n对于给定的晶体，你将接收到风以不同方向吹送过晶体表面的数据，以及每个风吹过时遇到的所有边界的位置。对于在方向（$w_x, w_y$）吹送的风，边界被定义为位置（$x, y$），使得一个分子位于（$x, y$），并且没有分子位于（$x-w_x, y-w_y$）。请注意，出于技术原因，$w_x$ 和 $w_y$ 不一定互质。\n\n这些数据可能无法唯一确定晶体的结构。你必须找到两个与观测数据一致且分子数最少和最多的晶体结构。\n\n例如，在第一个示例输入中，通过给定的风，出现了9个不同的分子。必须有一个在位置（$3, 3$）处的分子，否则（$4, 2$）将成为第三股风的边界。出于类似的原因，必须在位置（$4, 4$）和（$5, 5$）处有分子。不能再有其他分子，因为它们会导致一些风的附加观测结果。", "inputFormat": "输入的第一行包含三个整数 $d_x$、$d_y$ 和 $k$，其中 $d_x$ 和 $d_y$（$1 \\leq d_x, d_y \\leq 10^3$）是晶体结构的最大尺寸，$k$（$1 \\leq k \\leq 10$）是风吹过晶体的次数。\n\n接下来的 $k$ 行中，每一行都描述了一次吹风的数据。第一对整数 $w_x$ 和 $w_y$（$-d_x \\leq w_x \\leq d_x$，$-d_y \\leq w_y \\leq d_y$，但不能同时为零）表示风的方向。然后是一个整数 $b$（$0 \\leq b \\leq 10^5$），表示这股风遇到的边界数量。接下来的 $b$ 对不同的整数 $x$、$y$（$1 \\leq x \\leq d_x$，$1 \\leq y \\leq d_y$）表示每个观测到的边界。\n\n你可以假设输入数据与至少一个晶体是一致的，并且没有分子存在于指定尺寸范围之外。", "outputFormat": "输出两个晶体结构的文本表示，两个结构之间用一个空行分隔。每个结构有 $d_y$ 行，每行有 $d_x$ 个字符，左上角对应位置（$1, 1$）。第一个结构是与观测结果一致的包含最少分子数量的结构，第二个结构是包含最多分子数量的结构。使用 '#' 表示分子存在的位置，使用 '.' 表示分子不存在的位置。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9440", "type": "P", "difficulty": 6, "samples": [["5 4\n1 2 3\n1 3 1\n3 4 4\n3 5 2\n1 2 4\n1 4 2\n5 2 1\n4 3 1\n", "15\n17\nimpossible\n12\n"], ["7 4\n1 2 1\n1 3 1\n1 4 1\n1 5 1\n1 6 1\n1 7 1\n1 2 3\n5 4 1\n3 1 4\n2 4 5\n", "11\nimpossible\n10\n10\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "ICPC", "WF"], "title": "[ICPC 2021 WF] Dungeon Crawler", "background": "", "description": "Alice and Bob are in charge of testing a new escape room! In this escape room, customers are trapped in a dungeon and have to explore the entire area. The dungeon consists of $n$ rooms connected by exactly $n-1$ corridors. It is possible to travel between any pair of rooms using these corridors.\n\nTwo of the dungeon rooms are special. One of these rooms contains a protective idol known as the \"helix key´´. A different room contains a nasty \"dome trap´´, which prevents the player from moving once activated. Entering the room with the trap before acquiring the key will result in the player being trapped in the dungeon forever. The player cannot start in the same room as the key or the trap.\n\nThere are $q$ different scenarios that Alice and Bob wish to examine. In the $i^{th}$ scenario, the player starts in room $s_i$, the key is in room $k_i$, and the trap is in room $t_i$. For each scenario, compute the minimum amount of time needed to explore the entire dungeon without getting trapped.", "inputFormat": "The first line of input contains two integers $n$ and $q$, where $n$ ($3 \\leq n \\leq 2000$) is the number of rooms and $q$ ($1 \\leq q \\leq 200000$) is the number of scenarios to consider. Rooms are numbered from $1$ to $n$. The next $n-1$ lines each contain three integers $u$, $v$, and $w$ indicating that there is a corridor between rooms $u$ and $v$ ($1 \\leq u, v \\leq n, u \\neq v$) that takes time $w$ ($1 \\leq w \\leq 10^9$) to traverse.\n\nThen follow $q$ lines: the $i^{th}$ of these lines contains three distinct integers $s_i$, $k_i$, and $t_i$ ($1 \\leq s_i, k_i, t_i \\leq n$) indicating the room where the player starts, the room with the key, and the room with the trap, respectively.", "outputFormat": "For each scenario, output the minimum amount of time needed to visit every room at least once. If it is impossible to visit every room at least once, output $\\texttt{impossible}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2021 WF] Dungeon Crawler", "background": "", "description": "Alice and Bob are in charge of testing a new escape room! In this escape room, customers are trapped in a dungeon and have to explore the entire area. The dungeon consists of $n$ rooms connected by exactly $n-1$ corridors. It is possible to travel between any pair of rooms using these corridors.\n\nTwo of the dungeon rooms are special. One of these rooms contains a protective idol known as the \"helix key´´. A different room contains a nasty \"dome trap´´, which prevents the player from moving once activated. Entering the room with the trap before acquiring the key will result in the player being trapped in the dungeon forever. The player cannot start in the same room as the key or the trap.\n\nThere are $q$ different scenarios that Alice and Bob wish to examine. In the $i^{th}$ scenario, the player starts in room $s_i$, the key is in room $k_i$, and the trap is in room $t_i$. For each scenario, compute the minimum amount of time needed to explore the entire dungeon without getting trapped.", "inputFormat": "The first line of input contains two integers $n$ and $q$, where $n$ ($3 \\leq n \\leq 2000$) is the number of rooms and $q$ ($1 \\leq q \\leq 200000$) is the number of scenarios to consider. Rooms are numbered from $1$ to $n$. The next $n-1$ lines each contain three integers $u$, $v$, and $w$ indicating that there is a corridor between rooms $u$ and $v$ ($1 \\leq u, v \\leq n, u \\neq v$) that takes time $w$ ($1 \\leq w \\leq 10^9$) to traverse.\n\nThen follow $q$ lines: the $i^{th}$ of these lines contains three distinct integers $s_i$, $k_i$, and $t_i$ ($1 \\leq s_i, k_i, t_i \\leq n$) indicating the room where the player starts, the room with the key, and the room with the trap, respectively.", "outputFormat": "For each scenario, output the minimum amount of time needed to visit every room at least once. If it is impossible to visit every room at least once, output $\\texttt{impossible}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2021 WF] Dungeon Crawler", "background": "", "description": "有一棵 $n$ 个结点的树，边带权。你可以从一个结点通过边移动到一个相邻的结点，花费等同于边权的时间。\n\n其中，有两个特殊结点，一个结点里有钥匙，一个结点里有陷阱。你只有先获得钥匙，才能进入陷阱所在的结点。\n\n现有 $q$ 组询问，在第 $i$ 组询问中，你要从第 $s_i$ 号结点出发，钥匙在第 $k_i$ 号结点，陷阱在第 $t_i$ 号结点。你需要对于每组询问回答遍历整棵树所需的最短时间。题目保证你不会在钥匙所在的结点或者陷阱所在的结点出发。如果不可能遍历整棵树，输出 `impossible`。", "inputFormat": "第一行两个整数 $n,q$，含义如题目所述。\n\n接下来 $n-1$ 行，每行三个整数 $u,v,w$，表示有一条连接结点 $u,v$，权值为 $w$ 的边。\n\n接下来 $q$ 行，每行三个整数 $s_i,k_i,t_i$，含义如题目所述。\n\n$3\\le n\\le 2000$，$1\\le q \\le 2\\times10^5$，$1\\le u,v\\le n,u\\ne v$，$1\\le w\\le 10^9$，$1\\le s_i,k_i,t_i\\le n$。", "outputFormat": "对于每组询问，输出一行，包含一个整数表示答案，或者输出 `impossible` 表示无解。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9441", "type": "P", "difficulty": 5, "samples": [["8 51000\n", "1 2"], ["6 91000\n", "2 3\n"], ["10 1000000000000000000\n", "impossible\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "ICPC", "WF"], "title": "[ICPC 2021 WF] Fair Division", "background": "", "description": "After sailing the Seven Seas and raiding many ships, Cap'n Red and his crew of fellow pirates are finally ready to divide their loot. According to ancient traditions, the crew stands in a circle ordered by a strict pirate hierarchy. Cap'n Red starts by taking a fraction $f$ of the loot and passing the remainder on to the next pirate. That pirate takes the same fraction $f$ of the loot left over by the previous pirate and passes the remainder on to the following pirate. Each pirate behaves in the same way, taking a fraction $f$ of what is left and passing on the rest. The last pirate in the hierarchy passes the remainder on to Cap'n Red, who starts another round of this \"fair\" division, and so on, indefinitely.\n\nFortunately, pirates in the 21st century can use a computer to avoid this lengthy process and constant nitpicking when the fraction $f$ does not exactly divide the loot at some step. You have been captured by the pirates and asked to come up with a suitable fraction $f$. As an incentive, Cap'n Red has promised to leave you alive if you succeed.\n\nThe fraction $f$ needs to be a rational number strictly between $0$ and $1$. It is not necessary that $f$ exactly divides the loot remaining at any step of the round-robin process described above. However, the total loot that would be assigned to each pirate by carrying out this process infinitely needs to be an integer.", "inputFormat": "The input contains one line with two integers $n$ and $m$, where $n$ ($6 \\leq n \\leq 10^6$) is the number of pirates including Cap'n Red and $m$ ($1 \\leq m \\leq 10^{18}$) is the total value of their loot.", "outputFormat": "Output one line with two positive integers $p$ and $q$, where $f = \\frac{p}{q}$ as specified above. If there are multiple suitable fractions, choose one with the smallest $q$. Among multiple suitable fractions with the same smallest $q$ choose the one with the smallest $p$. If there is no suitable fraction, output $\\texttt{impossible}$ instead and hope for mercy.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2021 WF] Fair Division", "background": "", "description": "After sailing the Seven Seas and raiding many ships, Cap'n Red and his crew of fellow pirates are finally ready to divide their loot. According to ancient traditions, the crew stands in a circle ordered by a strict pirate hierarchy. Cap'n Red starts by taking a fraction $f$ of the loot and passing the remainder on to the next pirate. That pirate takes the same fraction $f$ of the loot left over by the previous pirate and passes the remainder on to the following pirate. Each pirate behaves in the same way, taking a fraction $f$ of what is left and passing on the rest. The last pirate in the hierarchy passes the remainder on to Cap'n Red, who starts another round of this \"fair\" division, and so on, indefinitely.\n\nFortunately, pirates in the 21st century can use a computer to avoid this lengthy process and constant nitpicking when the fraction $f$ does not exactly divide the loot at some step. You have been captured by the pirates and asked to come up with a suitable fraction $f$. As an incentive, Cap'n Red has promised to leave you alive if you succeed.\n\nThe fraction $f$ needs to be a rational number strictly between $0$ and $1$. It is not necessary that $f$ exactly divides the loot remaining at any step of the round-robin process described above. However, the total loot that would be assigned to each pirate by carrying out this process infinitely needs to be an integer.", "inputFormat": "The input contains one line with two integers $n$ and $m$, where $n$ ($6 \\leq n \\leq 10^6$) is the number of pirates including Cap'n Red and $m$ ($1 \\leq m \\leq 10^{18}$) is the total value of their loot.", "outputFormat": "Output one line with two positive integers $p$ and $q$, where $f = \\frac{p}{q}$ as specified above. If there are multiple suitable fractions, choose one with the smallest $q$. Among multiple suitable fractions with the same smallest $q$ choose the one with the smallest $p$. If there is no suitable fraction, output $\\texttt{impossible}$ instead and hope for mercy.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2021 WF] Fair Division", "background": "", "description": "$n$ 个人按如下的方式分 $m$ 块钱：先指定一个分数 $f$，$n$ 个人围成一圈，第一个人先拿走总钱数的 $f$，把剩下的钱给第二个人，然后第二个人拿走剩余钱数的 $f$，把剩下的钱交给第三个人...每一个人都从剩余的钱中拿走剩余钱数的 $f$，然后把钱交给下一个人。这种操作可以无限进行下去。\n\n现在给定 $n,m$，你需要构造 $f=\\dfrac{p}{q}$，使得 $0<f<1$，并且在分钱无限进行下去之后，最终每个人拿到的钱都是整数。如果有多解，你构造的解需要在 $q$ 尽可能小的情况下 $p$ 尽可能小。如果无解，输出 `impossible`。\n\n$6\\le n\\le 10^6$，$1\\le m\\le 10^{18}$。", "inputFormat": "仅一行两个整数 $n,m$，含义如题目所述。", "outputFormat": "如果有解，输出一行两个整数 $p,q$，分别是你构造的分数 $f$ 的分子和分母。\n\n如果无解，输出 `impossible`。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9442", "type": "P", "difficulty": 7, "samples": [["8\n0 0\n20 0\n20 30\n60 30\n60 0\n80 0\n80 50\n0 50\n10 10\n70 10\n", "58.137767414995\n"], ["11\n0 0\n4 0\n4 1\n5 1\n5 0\n7 0\n7 2\n3 2\n3 1\n2 2\n0 2\n1 1\n6 1\n", "2.000000000000\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2021 WF] Guardians of the Gallery", "background": "", "description": "Your local art gallery is about to host an exciting new exhibition of sculptures by world-renowned artists, and the gallery expects to attract thousands of visitors. Unfortunately, the exhibition might also attract the wrong kind of visitors, namely burglars who intend to steal the works of art. In the past, the gallery directors did not worry much about this problem, since their permanent collection is, to be honest, not really worth stealing.\n\nThe gallery consists of rooms, and each sculpture in the new exhibition will be placed in a different room. Each room has a security guard and an alarm to monitor the artwork. When an alarm sounds, the guard will run (without leaving the room) from their post to a position where they can see the sculpture directly. This is to check whether the sculpture has in fact been stolen, or whether this is yet another false alarm.\n\nTo figure out where to best station the security guard, the gallery directors would like to know how long it takes for the guard to see a given sculpture. They hope that you can help!\n\nEvery room is on a single floor, and the layout of the walls can be approximated by a simple polygon. The locations of the guard and the sculpture are distinct points strictly inside the polygon. The sculpture is circular, with a negligibly small (but positive) radius. To verify that the sculpture is still present, the guard needs to be able to see at least half of it.\n\nFigure D.1 illustrates two examples. In each case, the guard starts at the blue square on the left, and the sculpture is located at the red circle on the right. The dotted blue line shows the optimal path for the guard to move. Once the guard reaches the location marked by the green diamond, half of the sculpture can be seen.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ugrzp1ry.png)", "inputFormat": "The first line of input contains an integer $n$ ($3 \\leq n \\leq 100$), the number of vertices that describe the polygon. This is followed by $n$ lines each containing two integers $x$ and $y$ ($0 \\leq x,y \\leq 1000$), giving the coordinates of the polygon vertices in counterclockwise order. The next line contains two integers $x_g$ and $y_g$, which specify the location of the guard. Finally, the last line contains two integers $x_s$ and $y_s$, which specify the location of the center of the sculpture. The polygon is simple, that is, its vertices are distinct and no two edges of the polygon intersect or touch, other than consecutive edges which touch at their common vertex. In addition, no two consecutive edges are collinear.", "outputFormat": "Output the minimum distance that the guard has to move to be able to see at least half the sculpture. Your answer must have an absolute or relative error of at most $10^{-6}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2021 WF] Guardians of the Gallery", "background": "", "description": "Your local art gallery is about to host an exciting new exhibition of sculptures by world-renowned artists, and the gallery expects to attract thousands of visitors. Unfortunately, the exhibition might also attract the wrong kind of visitors, namely burglars who intend to steal the works of art. In the past, the gallery directors did not worry much about this problem, since their permanent collection is, to be honest, not really worth stealing.\n\nThe gallery consists of rooms, and each sculpture in the new exhibition will be placed in a different room. Each room has a security guard and an alarm to monitor the artwork. When an alarm sounds, the guard will run (without leaving the room) from their post to a position where they can see the sculpture directly. This is to check whether the sculpture has in fact been stolen, or whether this is yet another false alarm.\n\nTo figure out where to best station the security guard, the gallery directors would like to know how long it takes for the guard to see a given sculpture. They hope that you can help!\n\nEvery room is on a single floor, and the layout of the walls can be approximated by a simple polygon. The locations of the guard and the sculpture are distinct points strictly inside the polygon. The sculpture is circular, with a negligibly small (but positive) radius. To verify that the sculpture is still present, the guard needs to be able to see at least half of it.\n\nFigure D.1 illustrates two examples. In each case, the guard starts at the blue square on the left, and the sculpture is located at the red circle on the right. The dotted blue line shows the optimal path for the guard to move. Once the guard reaches the location marked by the green diamond, half of the sculpture can be seen.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ugrzp1ry.png)", "inputFormat": "The first line of input contains an integer $n$ ($3 \\leq n \\leq 100$), the number of vertices that describe the polygon. This is followed by $n$ lines each containing two integers $x$ and $y$ ($0 \\leq x,y \\leq 1000$), giving the coordinates of the polygon vertices in counterclockwise order. The next line contains two integers $x_g$ and $y_g$, which specify the location of the guard. Finally, the last line contains two integers $x_s$ and $y_s$, which specify the location of the center of the sculpture. The polygon is simple, that is, its vertices are distinct and no two edges of the polygon intersect or touch, other than consecutive edges which touch at their common vertex. In addition, no two consecutive edges are collinear.", "outputFormat": "Output the minimum distance that the guard has to move to be able to see at least half the sculpture. Your answer must have an absolute or relative error of at most $10^{-6}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2021 WF] Guardians of the Gallery", "background": "", "description": "#### 简要题意\n给定封闭的 $n$ 边形不透明墙壁和其中两个点 $A, B$. 其中，$B$ 是一个半径充分小但大于 $0$ 的透明圆的圆心, 墙壁厚度可视为 $0$. 求所有能直接观察到 $\\odot B$ 的至少一半的位置中, 与点 $A$ 距离的最小值.", "inputFormat": "第一行, 一个整数 $n$.\n\n随后 $n$ 行, 每行两个整数 $x_i, y_i$, 依次表示其顶点的坐标。\n\n随后一行, 两个整数 $x_A, y_A$, 表示点 $A$ 的坐标.\n\n最后一行, 两个整数 $x_B, y_B$, 表示圆心 $B$ 的坐标.", "outputFormat": "一行，一个实数，表示最小距离。与标准答案误差不超过 $10^{-6}$ 即可判为正确。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9443", "type": "P", "difficulty": 6, "samples": [["4 1 28\n", "0.960000000000\n"], ["3 3 5 12 3\n", "0.854385964912\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2021 WF] Hand of the Free Marked", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/kdojyok4.png)\n\nExample placement of cards for $k = 5$\n\nThere is a fairly well-known mentalism trick known as the Fitch Cheney trick. From a deck of $n$ playing cards, $k$ are selected uniformly at random and given to an assistant while the magician is out of the room. The assistant places $k-1$ of the selected cards on a table, face up, and the single remaining card face down. The cards are placed in a single row with the face-down card at the end (see the picture for an example). The magician enters the room, looks at the cards on the table, and announces what the $k^{th}$ card is, although its face is hidden. The trick is typically done with $n=52$ and $k=5$.\n\nThe assistant uses two ways of passing information to the magician. First, they can pick which one of the $k$ cards to keep hidden. Second, they can rearrange the other $k-1$ cards in a specific way. For the case $n=52$ and $k=5$ both techniques are needed, since there are only $24$ ways of rearranging four cards, which is not enough to reliably signal the fifth card. It is an interesting exercise to come up with a simple, easy-to-remember strategy for executing this trick, but right now you have another concern.\n\nYou were planning to perform this trick today, but just now you have learned that the deck has more cards than you expected. The trick may be impossible! In desperation, you have decided to cheat a little. You have $m$ distinguishable ways of marking the backs of the playing cards. You have marked the backs of all $n$ cards, allowing you to narrow down the possibilities for the $k^{th}$ card. For example, if there are $6$ cards marked with a particular method, and you see that the back of the $k^{th}$ card is marked with that method, you know it must be one of those $6$ cards.\n\nDetermine the probability that you will successfully guess the $k^{th}$ card, assuming you and the assistant execute an optimal (but likely very complicated!) strategy.", "inputFormat": "The input contains one line with several integers. The first integer gives $k$ ($2 \\leq k \\leq 10$), the number of cards that will be selected. The second integer gives $m$ ($1 \\leq m \\leq 10$), the number of ways of marking the cards. The line is completed by $m$ positive integers, giving the number of cards marked with each distinct method. The sum of these $m$ integers is $n$ ($k \\leq n \\leq 10^9$), which is the size of the deck.", "outputFormat": "Output the highest possible probability of guessing the $k^{th}$ card correctly, accurate up to an absolute error of $10^{-9}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2021 WF] Hand of the Free Marked", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/kdojyok4.png)\n\nExample placement of cards for $k = 5$\n\nThere is a fairly well-known mentalism trick known as the Fitch Cheney trick. From a deck of $n$ playing cards, $k$ are selected uniformly at random and given to an assistant while the magician is out of the room. The assistant places $k-1$ of the selected cards on a table, face up, and the single remaining card face down. The cards are placed in a single row with the face-down card at the end (see the picture for an example). The magician enters the room, looks at the cards on the table, and announces what the $k^{th}$ card is, although its face is hidden. The trick is typically done with $n=52$ and $k=5$.\n\nThe assistant uses two ways of passing information to the magician. First, they can pick which one of the $k$ cards to keep hidden. Second, they can rearrange the other $k-1$ cards in a specific way. For the case $n=52$ and $k=5$ both techniques are needed, since there are only $24$ ways of rearranging four cards, which is not enough to reliably signal the fifth card. It is an interesting exercise to come up with a simple, easy-to-remember strategy for executing this trick, but right now you have another concern.\n\nYou were planning to perform this trick today, but just now you have learned that the deck has more cards than you expected. The trick may be impossible! In desperation, you have decided to cheat a little. You have $m$ distinguishable ways of marking the backs of the playing cards. You have marked the backs of all $n$ cards, allowing you to narrow down the possibilities for the $k^{th}$ card. For example, if there are $6$ cards marked with a particular method, and you see that the back of the $k^{th}$ card is marked with that method, you know it must be one of those $6$ cards.\n\nDetermine the probability that you will successfully guess the $k^{th}$ card, assuming you and the assistant execute an optimal (but likely very complicated!) strategy.", "inputFormat": "The input contains one line with several integers. The first integer gives $k$ ($2 \\leq k \\leq 10$), the number of cards that will be selected. The second integer gives $m$ ($1 \\leq m \\leq 10$), the number of ways of marking the cards. The line is completed by $m$ positive integers, giving the number of cards marked with each distinct method. The sum of these $m$ integers is $n$ ($k \\leq n \\leq 10^9$), which is the size of the deck.", "outputFormat": "Output the highest possible probability of guessing the $k^{th}$ card correctly, accurate up to an absolute error of $10^{-9}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2021 WF] Hand of the Free Marked", "background": "", "description": "#### 简要题意\n两个人 $A, B$ 玩一个游戏。规则如下 :\n\n$A$ 有 $n$ 张互不相同的牌. 它们的**背面**有 $m$ 种不同的样式, 第 $i$ 种牌有 $a_i$ 张. 二人都对这套牌非常了解. 保证 $\\sum\\limits^{m}_{i=1}{a_i} = n$.\n\n$B$ 在 $A$ 不在场的情况下从中随机抽出 $k$ 张, 然后选择一张牌倒置在桌面上. 然后 $B$ 可以以任意顺序重新排列其他牌并在桌面上依次排开, 并将倒置的牌放在序列的末尾. $A$ 和 $B$ 可以在游戏之前约定通过其他牌的排列顺序传递的信息.\n\n随后 $A$ 需要根据桌面上牌的排列和倒置牌的背面说出倒置的牌具体是哪一张. 双方的目标都是使 $A$ 说出正确的牌。\n\n现在给定 $m, a_i$ 和 $k$, 求二人均采取最佳策略的情况下, $A$ 的成功率是多少.", "inputFormat": "输入仅一行, 首先是两个整数 $k, m$, 然后是 $m$ 个整数 $a_i$.", "outputFormat": "一行, 一个实数, 表示答案. 答案与标准答案的差不超过 $10^{-9}$ 即判为正确.", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9444", "type": "P", "difficulty": 6, "samples": [["3 2\n3\n20 30\n50 50\n10 50\n4\n40 20\n60 10\n75 20\n60 30\n4\n45 60\n55 55\n60 60\n55 65\n0 30 20 78 70 5\n55 0 20 70 60 10\n", "48.031693036\n"], ["1 1\n4\n0 0\n10 0\n10 10\n0 10\n5 5 10 15 5 10\n", "impossible\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2021", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2021 WF] Islands from the Sky", "background": "", "description": "You might never have heard of the island group of Iceepeecee, but that suits their inhabitants just fine. Located in a remote part of the South Pacific, they are truly off the beaten track, without any regular air or sea traffic, and they have remained a tropical paradise with unspoiled local fauna and flora.\n\nBeing off the map is great when you don't want to be overrun by hordes of tourists, but not so ideal when you actually do need a map for some reason. One such reason came up recently: Iceepeecee's central government needs an exact map of the islands to apportion government funds. Even tropical paradises need money, so Iceepeecee needs a map!\n\nThe easiest way to create a map would be an aerial survey. After dismissing chartering planes as too expensive, building an air balloon as too dangerous, and fitting carrier pigeons with cameras as too cruel to animals, they had a brilliant idea. Even with its remote location, there are still plenty of commercial airplanes crossing the skies above Iceepeecee. What if one mounted cameras on flights that are already scheduled to fly anyway? That would be a cheap solution to the problem!\n\nIceepeecee's plan is to install line-scan cameras on the planes. These cameras point straight downwards and collect images one line segment at a time, orthogonal to the flight path. The photographed line segment will be determined by the altitude that the plane is flying at, and the camera's aperture angle $\\theta$ (see Figure F.1). Greater angles $\\theta$ mean that the camera can see more, but also that the camera is more expensive.\n\nMoreover, Iceepeecee wants to make sure that each island is observed in its entirety by at least one flight. That means it is not sufficient that an island is only partially photographed by multiple flights, even if the combination of the photographs covers the whole island.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/99wwtofi.png)\n\nFigure F.1: A view of the plane, shown head-on. Its camera points downward and can see the part of the ground underneath the plane that is shown in green. How much is visible depends on the aperture angle $\\theta$.\n  \nFlight paths follow straight line segments in three-dimensional space, that is, ($x_1, y_1, z_1$) $-$ ($x_2, y_2, z_2$) (see Figure F.2), where the $z$-coordinates give the altitude of the plane. Photographs are taken only along these line segments.\n\nGiven the location of their islands and flights, Iceepeecee wants to find the smallest aperture angle $\\theta$ that allows for a successful survey. Can you help?\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3pdn3q1b.png)\n\nFigure F.2: Three islands (shown in black) and two flight paths (red and green). Altitudes are not shown. The shaded areas represent the ground visible on the two flight paths for an optimally chosen $\\theta$. This corresponds to the first sample input.Three islands (shown in black) and two flight paths (red and green). Altitudes are not shown. The shaded areas represent the ground visible on the two flight paths for an optimally chosen $\\theta$. This corresponds to the first sample input.", "inputFormat": "The input describes a set of islands and flight paths. It starts with a line containing two integers $n$ and $m$, the number $n$ of islands, and the number $m$ of flight paths, respectively ($1 \\leq n,m \\leq 100$). This is followed by descriptions of the $n$ islands. Each island description starts with a line containing a single integer $n_i$, the number of vertices of the polygon describing the $i^{th}$ island ($3 \\leq n_i \\leq 100$). It is followed by $n_i$ lines, each containing two integers $x_{ij}$, $y_{ij}$ ($|x_{ij}|, |y_{ij}| \\leq 10^6$), specifying the vertices for the $i^{th}$ island in counterclockwise order. Each island's polygon is simple, that is, its vertices are distinct and no two edges of the polygon intersect or touch, other than consecutive edges which touch at their common vertex. Different islands do not intersect or touch.\n\nThe input concludes with another $m$ lines, each describing a flight path. Each such line contains six integers $x_1$, $y_1$, $z_1$, $x_2$, $y_2$, $z_2$ ($|x_i|, |y_i|, |z_i| \\leq 10^6$, $z_i &gt; 0$ and ($x_1, y_1$) $\\neq$ ($x_2, y_2$)). They specify that a flight takes place from ($x_1, y_1, z_1$) to ($x_2, y_2, z_2$).", "outputFormat": "Output the smallest angle $\\theta$ (in degrees) that allows for a complete survey of the islands with the given flights. The answer should be exact to an absolute or relative error of $10^{-6}$. If there is no such angle, then output $\\texttt{impossible}$. The input is chosen such that if the coordinates of the island vertices are changed by at most $\\pm 10^{-8}$, then the answer will not change more than the allowed rounding error.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2021 WF] Islands from the Sky", "background": "", "description": "You might never have heard of the island group of Iceepeecee, but that suits their inhabitants just fine. Located in a remote part of the South Pacific, they are truly off the beaten track, without any regular air or sea traffic, and they have remained a tropical paradise with unspoiled local fauna and flora.\n\nBeing off the map is great when you don't want to be overrun by hordes of tourists, but not so ideal when you actually do need a map for some reason. One such reason came up recently: Iceepeecee's central government needs an exact map of the islands to apportion government funds. Even tropical paradises need money, so Iceepeecee needs a map!\n\nThe easiest way to create a map would be an aerial survey. After dismissing chartering planes as too expensive, building an air balloon as too dangerous, and fitting carrier pigeons with cameras as too cruel to animals, they had a brilliant idea. Even with its remote location, there are still plenty of commercial airplanes crossing the skies above Iceepeecee. What if one mounted cameras on flights that are already scheduled to fly anyway? That would be a cheap solution to the problem!\n\nIceepeecee's plan is to install line-scan cameras on the planes. These cameras point straight downwards and collect images one line segment at a time, orthogonal to the flight path. The photographed line segment will be determined by the altitude that the plane is flying at, and the camera's aperture angle $\\theta$ (see Figure F.1). Greater angles $\\theta$ mean that the camera can see more, but also that the camera is more expensive.\n\nMoreover, Iceepeecee wants to make sure that each island is observed in its entirety by at least one flight. That means it is not sufficient that an island is only partially photographed by multiple flights, even if the combination of the photographs covers the whole island.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/99wwtofi.png)\n\nFigure F.1: A view of the plane, shown head-on. Its camera points downward and can see the part of the ground underneath the plane that is shown in green. How much is visible depends on the aperture angle $\\theta$.\n  \nFlight paths follow straight line segments in three-dimensional space, that is, ($x_1, y_1, z_1$) $-$ ($x_2, y_2, z_2$) (see Figure F.2), where the $z$-coordinates give the altitude of the plane. Photographs are taken only along these line segments.\n\nGiven the location of their islands and flights, Iceepeecee wants to find the smallest aperture angle $\\theta$ that allows for a successful survey. Can you help?\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3pdn3q1b.png)\n\nFigure F.2: Three islands (shown in black) and two flight paths (red and green). Altitudes are not shown. The shaded areas represent the ground visible on the two flight paths for an optimally chosen $\\theta$. This corresponds to the first sample input.Three islands (shown in black) and two flight paths (red and green). Altitudes are not shown. The shaded areas represent the ground visible on the two flight paths for an optimally chosen $\\theta$. This corresponds to the first sample input.", "inputFormat": "The input describes a set of islands and flight paths. It starts with a line containing two integers $n$ and $m$, the number $n$ of islands, and the number $m$ of flight paths, respectively ($1 \\leq n,m \\leq 100$). This is followed by descriptions of the $n$ islands. Each island description starts with a line containing a single integer $n_i$, the number of vertices of the polygon describing the $i^{th}$ island ($3 \\leq n_i \\leq 100$). It is followed by $n_i$ lines, each containing two integers $x_{ij}$, $y_{ij}$ ($|x_{ij}|, |y_{ij}| \\leq 10^6$), specifying the vertices for the $i^{th}$ island in counterclockwise order. Each island's polygon is simple, that is, its vertices are distinct and no two edges of the polygon intersect or touch, other than consecutive edges which touch at their common vertex. Different islands do not intersect or touch.\n\nThe input concludes with another $m$ lines, each describing a flight path. Each such line contains six integers $x_1$, $y_1$, $z_1$, $x_2$, $y_2$, $z_2$ ($|x_i|, |y_i|, |z_i| \\leq 10^6$, $z_i &gt; 0$ and ($x_1, y_1$) $\\neq$ ($x_2, y_2$)). They specify that a flight takes place from ($x_1, y_1, z_1$) to ($x_2, y_2, z_2$).", "outputFormat": "Output the smallest angle $\\theta$ (in degrees) that allows for a complete survey of the islands with the given flights. The answer should be exact to an absolute or relative error of $10^{-6}$. If there is no such angle, then output $\\texttt{impossible}$. The input is chosen such that if the coordinates of the island vertices are changed by at most $\\pm 10^{-8}$, then the answer will not change more than the allowed rounding error.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2021 WF] Islands from the Sky", "background": "", "description": "你可能从未听说过 Iceepeecee 群岛，但这正是他们的居民所希望的。位于南太平洋的一个偏远地区，它们真正远离人迹罕至的地方，没有任何定期的空中或海上交通，仍然是一个未受破坏的热带天堂，拥有未受破坏的当地动植物。\n\n当你不想被成群的游客淹没时，远离地图是很好的，但当你确实需要地图时就不太理想了。最近出现了一个这样的原因：Iceepeecee 的中央政府需要一个精确的岛屿地图来分配政府资金。即使是热带天堂也需要钱，所以 Iceepeecee 需要一张地图！\n\n创建地图的最简单方法是航空测量。在认为包机太贵、建造气球太危险、给信鸽装上相机对动物太残忍之后，他们有了一个绝妙的主意。即使在这个偏远的地方，仍然有很多商业飞机飞过 Iceepeecee 上空。如果在已经计划飞行的航班上安装相机呢？这将是一个解决问题的廉价方案！\n\nIceepeecee 的计划是在飞机上安装线扫描相机。这些相机垂直向下拍摄，每次收集一条线段的图像，与飞行路径正交。拍摄的线段将由飞机的飞行高度和相机的光圈角度 $\\theta$ 决定（见图 F.1）。更大的角度 $\\theta$ 意味着相机可以看到更多，但也意味着相机更贵。\n\n此外，Iceepeecee 希望确保每个岛屿都能被至少一次航班完整观察到。这意味着不够仅仅通过多次航班部分拍摄到一个岛屿，即使这些照片的组合覆盖了整个岛屿。\n\n图 F.1：飞机的正面视图。其相机向下拍摄，可以看到飞机下方的绿色部分。可见的范围取决于光圈角度 $\\theta$。\n\n飞行路径在三维空间中沿直线段，即 ($x_1, y_1, z_1$) $-$ ($x_2, y_2, z_2$)（见图 F.2），其中 $z$ 坐标给出飞机的高度。照片仅在这些线段上拍摄。\n\n给定他们的岛屿和航班的位置，Iceepeecee 想要找到允许成功测量的最小光圈角度 $\\theta$。你能帮忙吗？\n\n图 F.2：三个岛屿（以黑色显示）和两条飞行路径（红色和绿色）。未显示高度。阴影区域表示在最佳选择的 $\\theta$ 下两条飞行路径上可见的地面。这对应于第一个样例输入。", "inputFormat": "输入描述了一组岛屿和飞行路径。首先是一行包含两个整数 $n$ 和 $m$，分别表示岛屿的数量 $n$ 和飞行路径的数量 $m$（$1 \\leq n,m \\leq 100$）。接下来是 $n$ 个岛屿的描述。每个岛屿描述以一行开始，包含一个整数 $n_i$，表示描述第 $i$ 个岛屿的多边形的顶点数（$3 \\leq n_i \\leq 100$）。接下来是 $n_i$ 行，每行包含两个整数 $x_{ij}$，$y_{ij}$（$|x_{ij}|, |y_{ij}| \\leq 10^6$），按逆时针顺序指定第 $i$ 个岛屿的顶点。每个岛屿的多边形是简单的，即其顶点是不同的，且多边形的边不相交或接触，除了相邻的边在其公共顶点处接触。不同的岛屿不相交或接触。\n\n输入以另外 $m$ 行结束，每行描述一条飞行路径。每行包含六个整数 $x_1$，$y_1$，$z_1$，$x_2$，$y_2$，$z_2$（$|x_i|, |y_i|, |z_i| \\leq 10^6$，$z_i > 0$ 且 ($x_1, y_1$) $\neq$ ($x_2, y_2$)）。它们指定了一次从 ($x_1, y_1, z_1$) 到 ($x_2, y_2, z_2$) 的飞行。", "outputFormat": "输出允许使用给定航班对岛屿进行完整测量的最小角度 $\\theta$（以度为单位）。答案应精确到绝对或相对误差 $10^{-6}$。如果没有这样的角度，则输出 $\\texttt{impossible}$。输入被选择为，如果岛屿顶点的坐标最多改变 $\\pm 10^{-8}$，则答案不会超过允许的舍入误差。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9445", "type": "P", "difficulty": 6, "samples": [["2 2\n1 0\n0 1\n3 4\n1 2 1 2\n2 1 1 1\n2 2 1 3\n", "3\n1 1\n1 3\n2 2\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "ICPC", "WF"], "title": "[ICPC 2021 WF] Mosaic Browsing", "background": "", "description": "The International Center for the Preservation of Ceramics (ICPC) is searching for motifs in some ancient mosaics. According to the ICPC's definition, a $\\textit{mosaic}$ is a rectangular grid where each grid square contains a colored tile. A $\\textit{motif}$ is similar to a mosaic but some of the grid squares can be empty. Figure G.1 shows an example motif and mosaic.\n\nThe rows of an $r_q \\times c_q$ mosaic are numbered $1$ to $r_q$ from top to bottom, and the columns are numbered $1$ to $c_q$ from left to right.\n\nA contiguous rectangular subgrid of the mosaic matches the motif if every tile of the motif matches the color of the corresponding tile of the subgrid. Formally, an $r_p \\times c_p$ motif appears in an $r_q \\times c_q$ mosaic at position ($r$, $c$) if for all $1 \\leq i \\leq r_p$, $1 \\leq j \\leq c_p$, the tile ($r+i-1$, $c+j-1$) exists in the mosaic and either the square ($i$, $j$) in the motif is empty or the tile at ($i$, $j$) in the motif has the same color as the tile at ($r+i-1$, $c+j-1$) in the mosaic.\n\nGiven the full motif and mosaic, find all occurrences of the motif in the mosaic.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0n7urywk.png)\n\nFigure G.1: Motif (left) and mosaic (right) of Sample Input 1.", "inputFormat": "The first line of input contains two integers $r_p$ and $c_p$, where $r_p$ and $c_p$ ($1 \\leq r_p, c_p \\leq 1000$) are the number of rows and columns in the motif. Then $r_p$ lines follow, each with $c_p$ integers in the range $[0, 100]$, denoting the color of the motif at that position. A value of $0$ denotes an empty square.\n\nThe next line of input contains two integers $r_q$ and $c_q$ where $r_q$ and $c_q$ ($1 \\leq r_q, c_q \\leq 1000$) are the number of rows and columns in the mosaic. Then $r_q$ lines follow, each with $c_q$ integers in the range $[1, 100]$, denoting the color of the mosaic at that position.", "outputFormat": "On the first line, output $k$, the total number of matches. Then output $k$ lines, each of the form $r c$ where $r$ is the row and $c$ is the column of the top left tile of the match. Sort matches by increasing $r$, breaking ties by increasing $c$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2021 WF] Mosaic Browsing", "background": "", "description": "The International Center for the Preservation of Ceramics (ICPC) is searching for motifs in some ancient mosaics. According to the ICPC's definition, a $\\textit{mosaic}$ is a rectangular grid where each grid square contains a colored tile. A $\\textit{motif}$ is similar to a mosaic but some of the grid squares can be empty. Figure G.1 shows an example motif and mosaic.\n\nThe rows of an $r_q \\times c_q$ mosaic are numbered $1$ to $r_q$ from top to bottom, and the columns are numbered $1$ to $c_q$ from left to right.\n\nA contiguous rectangular subgrid of the mosaic matches the motif if every tile of the motif matches the color of the corresponding tile of the subgrid. Formally, an $r_p \\times c_p$ motif appears in an $r_q \\times c_q$ mosaic at position ($r$, $c$) if for all $1 \\leq i \\leq r_p$, $1 \\leq j \\leq c_p$, the tile ($r+i-1$, $c+j-1$) exists in the mosaic and either the square ($i$, $j$) in the motif is empty or the tile at ($i$, $j$) in the motif has the same color as the tile at ($r+i-1$, $c+j-1$) in the mosaic.\n\nGiven the full motif and mosaic, find all occurrences of the motif in the mosaic.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0n7urywk.png)\n\nFigure G.1: Motif (left) and mosaic (right) of Sample Input 1.", "inputFormat": "The first line of input contains two integers $r_p$ and $c_p$, where $r_p$ and $c_p$ ($1 \\leq r_p, c_p \\leq 1000$) are the number of rows and columns in the motif. Then $r_p$ lines follow, each with $c_p$ integers in the range $[0, 100]$, denoting the color of the motif at that position. A value of $0$ denotes an empty square.\n\nThe next line of input contains two integers $r_q$ and $c_q$ where $r_q$ and $c_q$ ($1 \\leq r_q, c_q \\leq 1000$) are the number of rows and columns in the mosaic. Then $r_q$ lines follow, each with $c_q$ integers in the range $[1, 100]$, denoting the color of the mosaic at that position.", "outputFormat": "On the first line, output $k$, the total number of matches. Then output $k$ lines, each of the form $r c$ where $r$ is the row and $c$ is the column of the top left tile of the match. Sort matches by increasing $r$, breaking ties by increasing $c$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2021 WF] Mosaic Browsing", "background": "", "description": "#### 简要题意\n给出两个矩阵, 其中第二个矩阵所有元素非 $0$.\n\n定义第一个矩阵在第二个矩阵中的坐标 $(l, r)$ 处「出现」, 当且仅当存在一种方式任意修改第一个矩阵所有为 $0$ 的元素后, 第一个矩阵的左上角在第二个矩阵的对应位置坐标为 $(l, r)$ 时可以与第二个矩阵的一部分完全重合.\n\n求第一个矩阵在第二个矩阵中所有「出现」的位置和总「出现」次数。", "inputFormat": "第一行, 两个整数 $r_p, c_p$, 表示第一个矩阵的行数和列数.\n\n接下来 $r_p$ 行, 每行 $c_p$ 个整数, 描述第一个矩阵.\n\n接下来一行, 两个整数 $r_q, c_q$, 表示第二个矩阵的行数和列数.\n\n接下来 $r_q$ 行，每行 $c_q$ 个整数, 描述第二个矩阵.", "outputFormat": "第一行, 一个整数 $k$, 表示「出现」的总次数.\n\n接下来 $k$ 行, 每行两个整数 $x, y$, 表示每一次「出现」的坐标. 如果有多个, 请以 $x$ 为第一关键字, $y$ 为第二关键字升序排序后输出。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9446", "type": "P", "difficulty": 5, "samples": [["2\n())())()\n((()\n", "2\n1"], ["5\n(\n))\n((\n))\n(\n", "1\n5\n3\n4\n2\n"], ["2\n((\n)\n", "impossible\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2021", "Special Judge", "排序", "ICPC", "WF"], "title": "[ICPC 2021 WF] Prehistoric Programs", "background": "", "description": "Archaeologists have discovered exciting clay tablets in deep layers of Alutila Cave. Nobody was able to decipher the script on the tablets, except for two symbols that seem to describe nested structures not unlike opening and closing parentheses in LISP. Could it be that humans wrote programs thousands of years ago?\n\nTaken together, the tablets appear to describe a great piece of work $-$ perhaps a program, or an epic, or even tax records! Unsurprisingly, after such a long time, the tablets are in a state of disorder. Your job is to arrange them into a sequence so that the resulting work has a properly nested parenthesis structure. Considering only opening and closing parentheses, a properly nested structure is either\n\n- $()$, or\n- $(A)$, where $A$ is a properly nested structure, or\n- $AB$, where $A$ and $B$ are properly nested structures.", "inputFormat": "The first line of input contains one integer $n$ ($1 \\leq n \\leq 10^6$), the number of tablets. Each of the remaining $n$ lines describes a tablet, and contains a non-empty string of opening and closing parentheses; symbols unrelated to the nesting structure are omitted. The strings are numbered from $1$ to $n$ in the order that they appear in the input. The input contains at most $10^7$ parentheses.", "outputFormat": "Output a permutation of the numbers from $1$ to $n$ such that concatenating the strings in this order results in a properly nested structure. If this happens for multiple permutations, any one of them will be accepted. If there is no such permutation, output $\\texttt{impossible}$ instead.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2021 WF] Prehistoric Programs", "background": "", "description": "Archaeologists have discovered exciting clay tablets in deep layers of Alutila Cave. Nobody was able to decipher the script on the tablets, except for two symbols that seem to describe nested structures not unlike opening and closing parentheses in LISP. Could it be that humans wrote programs thousands of years ago?\n\nTaken together, the tablets appear to describe a great piece of work $-$ perhaps a program, or an epic, or even tax records! Unsurprisingly, after such a long time, the tablets are in a state of disorder. Your job is to arrange them into a sequence so that the resulting work has a properly nested parenthesis structure. Considering only opening and closing parentheses, a properly nested structure is either\n\n- $()$, or\n- $(A)$, where $A$ is a properly nested structure, or\n- $AB$, where $A$ and $B$ are properly nested structures.", "inputFormat": "The first line of input contains one integer $n$ ($1 \\leq n \\leq 10^6$), the number of tablets. Each of the remaining $n$ lines describes a tablet, and contains a non-empty string of opening and closing parentheses; symbols unrelated to the nesting structure are omitted. The strings are numbered from $1$ to $n$ in the order that they appear in the input. The input contains at most $10^7$ parentheses.", "outputFormat": "Output a permutation of the numbers from $1$ to $n$ such that concatenating the strings in this order results in a properly nested structure. If this happens for multiple permutations, any one of them will be accepted. If there is no such permutation, output $\\texttt{impossible}$ instead.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2021 WF] Prehistoric Programs", "background": "", "description": "考古学家在 Alutila 洞穴的深层发现了令人兴奋的粘土板。除了两个似乎描述嵌套结构的符号（类似于 LISP 中的开括号和闭括号）外，没有人能够破译粘土板上的文字。难道几千年前人类就已经在编写程序了吗？\n\n综合来看，这些粘土板似乎描述了一项伟大的作品——可能是一个程序，或者是一部史诗，甚至是税务记录！不出所料，经过这么长时间，粘土板已经处于无序状态。你的任务是将它们排列成一个序列，使得结果作品具有正确嵌套的括号结构。仅考虑开括号和闭括号，一个正确嵌套的结构要么是\n\n- $()$，或者\n- $(A)$，其中 $A$ 是一个正确嵌套的结构，或者\n- $AB$，其中 $A$ 和 $B$ 是正确嵌套的结构。", "inputFormat": "输入的第一行包含一个整数 $n$ ($1 \\leq n \\leq 10^6$)，表示粘土板的数量。接下来的 $n$ 行中的每一行描述一个粘土板，并包含一个非空的开括号和闭括号字符串；与嵌套结构无关的符号被省略。字符串按照它们在输入中出现的顺序从 $1$ 到 $n$ 编号。输入中最多包含 $10^7$ 个括号。", "outputFormat": "输出一个从 $1$ 到 $n$ 的数字排列，使得按此顺序连接字符串后形成一个正确嵌套的结构。如果存在多个排列满足条件，任何一个都可以接受。如果没有这样的排列，输出 $\\texttt{impossible}$。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9447", "type": "P", "difficulty": 6, "samples": [["7 5 6\n2 1\n4 3\n6 3\n8 7\n10 5\n", "2\n1\n1\n1\n0\n1\n2\n"], ["4 4 2\n1 1\n2 2\n3 3\n4 4\n", "1\n1\n0\n1\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "ICPC", "WF"], "title": "[ICPC 2021 WF] Spider Walk", "background": "", "description": "Charlotte the spider sits at the center of her spiderweb, which consists of a series of silken straight strands that go from the center to the outer boundary of the web. Charlotte's web also has bridges, each of which connects two adjacent strands. The two endpoints of a bridge always have the same distance to the center of the spiderweb.\n\nWhen Charlotte has finished a late-night feasting in the center and wants to retreat to some corner, she walks to the edge on autopilot. To do this, she picks a starting strand, and walks along it until she meets the first bridge on that strand. She will cross the bridge and go to the other strand, and then keeps walking outwards until she meets another bridge. Then she will cross that bridge, and repeat this process, until there are no more bridges on the current strand, and then she will walk to the end of the current strand. Note that Charlotte must cross all the bridges that she meets. Figure I.1 illustrates one path Charlotte could take.\n\nCharlotte's favorite corner to sleep in during the daytime is at the end of strand $s$. For each possible starting strand, she wants to know the minimum number of bridges to add to the original web in order to end at $s$. Charlotte can add a bridge at any point along the strand, as long as the added bridge does not touch any other bridge. The two endpoints of any added bridge must have the same distance to the center of the spiderweb, and the bridge must connect two adjacent strands.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7nb4cy7c.png)\n\nFigure I.1: The path starting from strand 4 on the spiderweb in Sample Input 1.", "inputFormat": "The first line of input has three integers $n$, $m$, and $s$, where $n$ ($3 \\leq n \\leq 200000$) is the number of strands, m ($0 \\leq m \\leq 500000$) is the number of bridges, and $s$ ($1 \\leq s \\leq n$) is Charlotte's favorite strand. Strands are labeled from $1$ to $n$ in counterclockwise order. Each of the remaining $m$ lines contains two integers $d$ and $t$ describing a bridge, where $d$ ($1 \\leq d \\leq 10^9$) is the bridge's distance from the center of the spiderweb and $t$ ($1 \\leq t \\leq n$) is the first strand of the bridge in counterclockwise order. Specifically, if $1 \\leq t &lt; n$, then the bridge connects strands $t$ and $t+1$. If $t = n$, then the bridge connects strands $1$ and $n$. All bridge distances $d$ are distinct.", "outputFormat": "Output $n$ lines, where the $i^{th}$ line is the minimum number of bridges Charlotte needs to add in order to end at strand $s$ after walking on autopilot from strand $i$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2021 WF] Spider Walk", "background": "", "description": "Charlotte the spider sits at the center of her spiderweb, which consists of a series of silken straight strands that go from the center to the outer boundary of the web. Charlotte's web also has bridges, each of which connects two adjacent strands. The two endpoints of a bridge always have the same distance to the center of the spiderweb.\n\nWhen Charlotte has finished a late-night feasting in the center and wants to retreat to some corner, she walks to the edge on autopilot. To do this, she picks a starting strand, and walks along it until she meets the first bridge on that strand. She will cross the bridge and go to the other strand, and then keeps walking outwards until she meets another bridge. Then she will cross that bridge, and repeat this process, until there are no more bridges on the current strand, and then she will walk to the end of the current strand. Note that Charlotte must cross all the bridges that she meets. Figure I.1 illustrates one path Charlotte could take.\n\nCharlotte's favorite corner to sleep in during the daytime is at the end of strand $s$. For each possible starting strand, she wants to know the minimum number of bridges to add to the original web in order to end at $s$. Charlotte can add a bridge at any point along the strand, as long as the added bridge does not touch any other bridge. The two endpoints of any added bridge must have the same distance to the center of the spiderweb, and the bridge must connect two adjacent strands.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7nb4cy7c.png)\n\nFigure I.1: The path starting from strand 4 on the spiderweb in Sample Input 1.", "inputFormat": "The first line of input has three integers $n$, $m$, and $s$, where $n$ ($3 \\leq n \\leq 200000$) is the number of strands, m ($0 \\leq m \\leq 500000$) is the number of bridges, and $s$ ($1 \\leq s \\leq n$) is Charlotte's favorite strand. Strands are labeled from $1$ to $n$ in counterclockwise order. Each of the remaining $m$ lines contains two integers $d$ and $t$ describing a bridge, where $d$ ($1 \\leq d \\leq 10^9$) is the bridge's distance from the center of the spiderweb and $t$ ($1 \\leq t \\leq n$) is the first strand of the bridge in counterclockwise order. Specifically, if $1 \\leq t &lt; n$, then the bridge connects strands $t$ and $t+1$. If $t = n$, then the bridge connects strands $1$ and $n$. All bridge distances $d$ are distinct.", "outputFormat": "Output $n$ lines, where the $i^{th}$ line is the minimum number of bridges Charlotte needs to add in order to end at strand $s$ after walking on autopilot from strand $i$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2021 WF] Spider Walk", "background": "", "description": "夏洛特蜘蛛坐在她的蜘蛛网中心，蜘蛛网由一系列从中心延伸到外边界的丝线组成。夏洛特的网还有桥，每座桥连接两条相邻的丝线。桥的两个端点到蜘蛛网中心的距离总是相同。\n\n当夏洛特在中心享用完深夜的盛宴后想要撤退到某个角落时，她会自动驾驶地走到边缘。为此，她选择一条起始丝线，并沿着它走，直到遇到这条丝线上的第一座桥。她会穿过桥到另一条丝线上，然后继续向外走，直到遇到另一座桥。然后她会穿过那座桥，并重复这个过程，直到当前丝线上没有更多的桥，然后她会走到当前丝线的末端。注意，夏洛特必须穿过她遇到的所有桥。图 I.1 展示了夏洛特可能走的一条路径。\n\n夏洛特白天最喜欢睡觉的角落在丝线 $s$ 的末端。对于每个可能的起始丝线，她想知道为了最终到达 $s$，需要在原始网中添加的最少桥数。夏洛特可以在丝线的任何一点添加桥，只要添加的桥不接触任何其他桥。任何添加的桥的两个端点必须到蜘蛛网中心的距离相同，并且桥必须连接两条相邻的丝线。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7nb4cy7c.png)\n\n图 I.1：在示例输入 1 中从丝线 4 开始的路径。", "inputFormat": "输入的第一行包含三个整数 $n$、$m$ 和 $s$，其中 $n$ ($3 \\leq n \\leq 200000$) 是丝线的数量，$m$ ($0 \\leq m \\leq 500000$) 是桥的数量，$s$ ($1 \\leq s \\leq n$) 是夏洛特最喜欢的丝线。丝线按逆时针顺序从 $1$ 到 $n$ 标记。接下来的 $m$ 行中的每一行包含两个整数 $d$ 和 $t$ 描述一座桥，其中 $d$ ($1 \\leq d \\leq 10^9$) 是桥到蜘蛛网中心的距离，$t$ ($1 \\leq t \\leq n$) 是桥的第一条丝线的逆时针顺序。具体来说，如果 $1 \\leq t < n$，则桥连接丝线 $t$ 和 $t+1$。如果 $t = n$，则桥连接丝线 $1$ 和 $n$。所有桥的距离 $d$ 都是不同的。", "outputFormat": "输出 $n$ 行，其中第 $i$ 行是夏洛特需要添加的最少桥数，以便在从丝线 $i$ 自动驾驶行走后最终到达丝线 $s$。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9448", "type": "P", "difficulty": 4, "samples": [["200 2 2\nS 1 2 3\nM 3 2 4\n4 99\n4 100\n", "100\n99\n"], ["100 3 6\nS 1 4 2\nS 2 3 5\nM 3 4 6\n6 48\n6 49\n6 50\n6 51\n6 52\n5 25\n", "47\n98\n49\n51\n53\n100\n"], ["2 3 3\nS 1 2 3\nS 3 4 5\nM 5 2 6\n3 1\n5 1\n6 2\n", "2\nnone\nnone\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "ICPC", "WF"], "title": "[ICPC 2021 WF] Splitstream", "background": "", "description": "A splitstream system is an acyclic network of nodes that processes finite sequences of numbers. There are two types of nodes (illustrated in Figure J.1):\n\n- A *split* node takes a sequence of numbers as input and distributes them alternatingly to its two outputs. The first number goes to output $1$, the second to output $2$, the third to output $1$, the fourth to output $2$, and so on, in this order.</li>\n- A *merge** node takes two sequences of numbers as input and merges them alternatingly to form its single output. The output contains the first number from input $1$, then the first from input $2$, then the second from input $1$, then the second from input $2$, and so on. If one of the input sequences is shorter than the other, then the remaining numbers from the longer sequence are simply transmitted without being merged after the shorter sequence has been exhausted.</li>\n\n ![](https://cdn.luogu.com.cn/upload/image_hosting/e0gr6wa3.png)\n  \n  Figure J.1: Illustration of how split and merge nodes work.\n  \nThe overall network has one input, which is the sequence of positive integers $1, 2, 3, \\ldots, m$. Any output of any node can be queried. A query will seek to identify the $k^{th}$ number in the sequence of numbers for a given output and a given $k$. Your task is to implement such queries efficiently.", "inputFormat": "The first line of input contains three integers $m$, $n$, and $q$, where $m$ ($1 \\leq m \\leq 10^9$) is the length of the input sequence, $n$ ($1 \\leq n \\leq 10^4$) is the number of nodes, and $q$ ($1 \\leq q \\leq 10^3$) is the number of queries.\n\nThe next $n$ lines describe the network, one node per line. A split node has the format $\\texttt{S} \\ x \\ y \\ z$, where $x$, $y$ and $z$ identify its input, first output and second output, respectively. A merge node has the format $\\texttt{M} \\ x \\ y \\ z$, where $x$, $y$ and $z$ identify its first input, second input and output, respectively. Identifiers $x$, $y$ and $z$ are distinct positive integers. The overall input is identified by $1$, and the remaining input/output identifiers form a consecutive sequence beginning at $2$. Every input identifier except $1$ appears as exactly one output. Every output identifier appears as the input of at most one node.\n\nEach of the next $q$ lines describes a query. Each query consists of two integers $x$ and $k$, where $x$ ($2 \\leq x \\leq 10^5$) is a valid output identifier and $k$ ($1 \\leq k \\leq 10^9$) is the index of the desired number in that sequence. Indexing in a sequence starts with $1$.", "outputFormat": "For each query $x$ and $k$ output one line with the $k^{th}$ number in the output sequence identified by $x$, or $\\texttt{none}$ if there is no element with that index number.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2021 WF] Splitstream", "background": "", "description": "A splitstream system is an acyclic network of nodes that processes finite sequences of numbers. There are two types of nodes (illustrated in Figure J.1):\n\n- A *split* node takes a sequence of numbers as input and distributes them alternatingly to its two outputs. The first number goes to output $1$, the second to output $2$, the third to output $1$, the fourth to output $2$, and so on, in this order.</li>\n- A *merge** node takes two sequences of numbers as input and merges them alternatingly to form its single output. The output contains the first number from input $1$, then the first from input $2$, then the second from input $1$, then the second from input $2$, and so on. If one of the input sequences is shorter than the other, then the remaining numbers from the longer sequence are simply transmitted without being merged after the shorter sequence has been exhausted.</li>\n\n ![](https://cdn.luogu.com.cn/upload/image_hosting/e0gr6wa3.png)\n  \n  Figure J.1: Illustration of how split and merge nodes work.\n  \nThe overall network has one input, which is the sequence of positive integers $1, 2, 3, \\ldots, m$. Any output of any node can be queried. A query will seek to identify the $k^{th}$ number in the sequence of numbers for a given output and a given $k$. Your task is to implement such queries efficiently.", "inputFormat": "The first line of input contains three integers $m$, $n$, and $q$, where $m$ ($1 \\leq m \\leq 10^9$) is the length of the input sequence, $n$ ($1 \\leq n \\leq 10^4$) is the number of nodes, and $q$ ($1 \\leq q \\leq 10^3$) is the number of queries.\n\nThe next $n$ lines describe the network, one node per line. A split node has the format $\\texttt{S} \\ x \\ y \\ z$, where $x$, $y$ and $z$ identify its input, first output and second output, respectively. A merge node has the format $\\texttt{M} \\ x \\ y \\ z$, where $x$, $y$ and $z$ identify its first input, second input and output, respectively. Identifiers $x$, $y$ and $z$ are distinct positive integers. The overall input is identified by $1$, and the remaining input/output identifiers form a consecutive sequence beginning at $2$. Every input identifier except $1$ appears as exactly one output. Every output identifier appears as the input of at most one node.\n\nEach of the next $q$ lines describes a query. Each query consists of two integers $x$ and $k$, where $x$ ($2 \\leq x \\leq 10^5$) is a valid output identifier and $k$ ($1 \\leq k \\leq 10^9$) is the index of the desired number in that sequence. Indexing in a sequence starts with $1$.", "outputFormat": "For each query $x$ and $k$ output one line with the $k^{th}$ number in the output sequence identified by $x$, or $\\texttt{none}$ if there is no element with that index number.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2021 WF] Splitstream", "background": "", "description": "### 题意\n有一个有 $n$ 个节点的传输数字序列的网络，其中有两种节点：拆分节点和合并节点。拆分节点会将输入序列中的数字交替插入两个输出序列中，合并节点会交替将两个输入序列中的数字插入输出序列中。例如：\n\n$\\{1,2,3,4,5\\}$ 拆分得 $\\{1,3,5\\}$ 和 $\\{2,4\\}$。\n\n$\\{2,4\\}$ 和 $\\{1,3,5\\}$ 合并得 $\\{2,1,4,3,5\\}$。\n\n在网络中，除 $1$ 号外每一个结点的每一个输入端都连接着另一个节点的输出端,$1$ 号节点的输入端为总输入端，每一个输出端不一定连接着另一个节点的输入端。每一个输出端都有着从 $2$ 开始的正整数编号。\n\n将一个数字序列 $\\{1,2,\\cdots,m\\}$ 从 $1$ 号节点的输入端输入网络，你需要求出编号为  $x$ 的输出端输出的序列中的第 $k$ 个数字。", "inputFormat": "第一行三个整数 $n,m,q$。分别表示结点的个数、输入序列为 $\\{1,2,\\cdots,m\\}$、查询的次数。\n\n接下来 $n$ 行，每行一个字母开头，接着是三个整数 $x,y,z$。若字母为 $S$，则表示这是一个拆分节点，$x$ 是它的输入端所连接的输出端编号，$y,z$ 是它的两个输出端的编号；若字母为 $M$，则表示这是一个合并节点，$x,y$ 是它的两个输入端所连接的输出端的编号，$z$ 是它的输出端编号。\n\n再接下来 $q$ 行，每行两个整数 $x,k$，意义如题意中所述。", "outputFormat": "对于每一次询问，输出其对应的回答。若答案不存在，输出 `none`。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9449", "type": "P", "difficulty": 7, "samples": [["4\n3 2 3 4\n0 10 1\n0 3 6\n0 2 7\n", "169"], ["8\n3 4 2 5\n2 3 8\n0 -3 9\n0 -5 -7\n2 6 7\n0 1 4\n0 -3 -1\n0 1 4\n", "314"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "ICPC", "WF"], "title": "[ICPC 2021 WF] Take On Meme", "background": "", "description": "The Internet can be so fickle. You work for a small ad agency, Mimi's Mammoth Memes. Your ad campaigns are very cheap, and rely on the hope of producing the next hit viral meme. Unfortunately, the last four hundred or so memes have failed to take off, despite having been precisely engineered to appeal to every single person on Earth. You're not sure what exactly went wrong, but you've decided to try a new approach: crowd sourcing!\n\nAccording to your scientific meme theory, all memes can be rated from $-\\infty$ to $\\infty$ on two scales: xanthochromism, and yellowishness, also known as ($x$, $y$) values. Obviously (you think), the best memes are memorable for being particularly xanthochromic, yellowish, unxanthochromic, or unyellowish. You feel that the \"quality\" of any meme is directly measurable as its squared Euclidean distance ($x^2 + y^2$) from the Base Meme ($0$, $0$), otherwise known as All Your Base.\n\nTo produce the ultimate viral meme, you'll be taking your company's last few failed memes and throwing them into a tournament, decided by online voting. The tournament can be represented as a rooted tree. Input memes come in at the leaves, and at each internal node, a vote will be held among its $k$ child memes ($x_1$, $y_1$), $\\ldots$, ($x_k$, $y_k$). After the vote, all the memes will be horrifically mangled and merged into a brand new meme, specifically calculated to emphasize the winner and de-emphasize all the losers: the resultant $x$ value will be $$ \\sum_{i=1}^{k} w_i \\cdot x_i, $$ where $w_i$ is $1$ if the $i^{th}$ child won, and $-1$ otherwise. The $y$ value is computed similarly. This new meme will move on to the next vote in the tournament $-$ or, if there is no parent, it will be declared the champion and the ultimate meme!\n\nYou already have the structure of the tournament planned out, including all the input memes and the internal voting nodes. What is the largest possible quality for any meme that the tournament could produce?", "inputFormat": "The first line of input contains an integer $n$ ($1 \\leq n \\leq 10^4$), giving the total number of nodes in the tournament tree. The next $n$ lines each describe a single tree node indexed from $1$ to $n$. The line for node $i$ starts with an integer $k_i$ ($0 \\leq k_i \\leq 100$), the number of children of that node. If $k_i$ is $0$, then node $i$ is an input meme and there will be two more integers $x_i$ and $y_i$ ($-10^3 \\leq x_i, yi \\leq 10^3$) describing it. If $k_i &gt; 0$, then $k_i$ different integers $j$ ($i &lt; j \\leq n$) will follow, giving the indices of the $k_i$ nodes entering this voting step.\n\nAll input memes will eventually be merged into the final output meme at node $1$. The complete tree will have a height of no more than $10$.", "outputFormat": "Output the largest possible quality for the champion meme at node $1$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2021 WF] Take On Meme", "background": "", "description": "The Internet can be so fickle. You work for a small ad agency, Mimi's Mammoth Memes. Your ad campaigns are very cheap, and rely on the hope of producing the next hit viral meme. Unfortunately, the last four hundred or so memes have failed to take off, despite having been precisely engineered to appeal to every single person on Earth. You're not sure what exactly went wrong, but you've decided to try a new approach: crowd sourcing!\n\nAccording to your scientific meme theory, all memes can be rated from $-\\infty$ to $\\infty$ on two scales: xanthochromism, and yellowishness, also known as ($x$, $y$) values. Obviously (you think), the best memes are memorable for being particularly xanthochromic, yellowish, unxanthochromic, or unyellowish. You feel that the \"quality\" of any meme is directly measurable as its squared Euclidean distance ($x^2 + y^2$) from the Base Meme ($0$, $0$), otherwise known as All Your Base.\n\nTo produce the ultimate viral meme, you'll be taking your company's last few failed memes and throwing them into a tournament, decided by online voting. The tournament can be represented as a rooted tree. Input memes come in at the leaves, and at each internal node, a vote will be held among its $k$ child memes ($x_1$, $y_1$), $\\ldots$, ($x_k$, $y_k$). After the vote, all the memes will be horrifically mangled and merged into a brand new meme, specifically calculated to emphasize the winner and de-emphasize all the losers: the resultant $x$ value will be $$ \\sum_{i=1}^{k} w_i \\cdot x_i, $$ where $w_i$ is $1$ if the $i^{th}$ child won, and $-1$ otherwise. The $y$ value is computed similarly. This new meme will move on to the next vote in the tournament $-$ or, if there is no parent, it will be declared the champion and the ultimate meme!\n\nYou already have the structure of the tournament planned out, including all the input memes and the internal voting nodes. What is the largest possible quality for any meme that the tournament could produce?", "inputFormat": "The first line of input contains an integer $n$ ($1 \\leq n \\leq 10^4$), giving the total number of nodes in the tournament tree. The next $n$ lines each describe a single tree node indexed from $1$ to $n$. The line for node $i$ starts with an integer $k_i$ ($0 \\leq k_i \\leq 100$), the number of children of that node. If $k_i$ is $0$, then node $i$ is an input meme and there will be two more integers $x_i$ and $y_i$ ($-10^3 \\leq x_i, yi \\leq 10^3$) describing it. If $k_i &gt; 0$, then $k_i$ different integers $j$ ($i &lt; j \\leq n$) will follow, giving the indices of the $k_i$ nodes entering this voting step.\n\nAll input memes will eventually be merged into the final output meme at node $1$. The complete tree will have a height of no more than $10$.", "outputFormat": "Output the largest possible quality for the champion meme at node $1$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2021 WF] Take On Meme", "background": "", "description": "众所周知，互联网的走红规律总是难以捉摸。你就职于一家名为 Mimi's Mammoth Memes 的小型广告公司。你们的广告策略非常经济实惠，全靠碰运气，使得下一个爆红的病毒式梗图诞生。然而，尽管你们精心设计过，最近的四百多个梗图却无一火爆。你对问题的具体原因并不十分清楚，但决定尝试一种全新的方法：众包创意！\n\n根据你的梗图科学理论，所有梗图都可以在两个维度上被评分，分别是鲜艳度和泛黄程度，简称为 $(x, y)$ 值。显然（你这样认为），最出众的梗图要么特别鲜艳，要么特别不鲜艳，要么特别泛黄，要么特别不泛黄。你认为，一个梗图的“质量”可以直接通过它和基础梗图 $(0, 0)$ 的欧几里得距离平方来衡量，即计算 $(x^2 + y^2)$。\n\n为了创造出终极病毒式梗图，你将把公司最近几个不成功的梗图放入一个通过在线投票来决胜负的锦标赛中。这个锦标赛可以用一棵有根树来表示。输入梗图位于叶子节点，在每个内部节点，针对其 $k$ 个子梗图 $(x_1, y_1),\\cdots, (x_k, y_k)$ 进行投票。投票后，梗图将经历恐怖的扭曲并合并成一个新梗图，特别突出了胜者并削弱了所有的败者：得到的 $x$ 值为 \n\n$$ \\sum_{i=1}^{k} w_i \\cdot x_i, $$ \n\n其中当第 $i$ 个梗图获胜时，$w_i$ 为 $1$，否则为 $-1$。$y$ 值的计算方式相同。该新梗图将进入锦标赛下一轮的投票——如果它没有父节点，则会被宣布为冠军，也就是最终的完美梗图！\n\n你已经设计好了锦标赛的结构，包括所有输入的梗图和内部的投票节点。那么，该锦标赛可能产生的梗图质量的最大值是多少？", "inputFormat": "输入的第一行包含一个整数 $n$ ($1 \\leq n \\leq 10^4$)，表示锦标赛树中的节点总数。接下来的 $n$ 行，每行描述一个编号从 $1$ 到 $n$ 的节点。对于节点 $i$，这一行先出现一个整数 $k_i$ ($0 \\leq k_i \\leq 100$)，表示该节点的子节点数。如果 $k_i$ 为 0，则表明节点 $i$ 是一个输入梗图，并包含两个额外整数 $x_i$ 和 $y_i$ ($-10^3 \\leq x_i, y_i \\leq 10^3$)，描述该梗图的特征值。如果 $k_i > 0$，则接下来会出现 $k_i$ 个不同的整数 $j$ ($i < j \\leq n$)，表示参与这一投票步骤的节点索引。\n\n所有输入的梗图将最终被合并为节点 $1$ 中的最终输出梗图。整个树的高度不会超过 $10$。", "outputFormat": "输出节点 $1$ 的冠军梗图的最大可能质量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9450", "type": "P", "difficulty": 5, "samples": [["5 5\n....X\n.X...\n.....\nX..X.\n..X..\n", "9.960000000\n18\n(1,4) (4,5)\n"], ["5 1\n..XX.\n", "4.600000000\n7\n(1,1) (5,1)\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2021 WF] Where Am I?", "background": "", "description": "Who am I? What am I? Why am I? These are all difficult questions that have kept philosophers reliably busy over the past millennia. But when it comes to \"Where am I\", then, well, modern smartphones and GPS satellites have pretty much taken the excitement out of that question.\n\nTo add insult to the injury of newly unemployed spatial philosophers formerly pondering the \"where\" question, the Instant Cartographic Positioning Company (ICPC) has decided to run a demonstration of just how much more powerful a GPS is compared to old-fashioned maps. Their argument is that maps are useful only if you already know where you are, but much less so if you start at an unknown location.\n\nFor this demonstration, the ICPC has created a test area that is arranged as an unbounded Cartesian grid. Most grid cells are empty, but a finite number of cells have a marker at their center (see Figure L.1(a) for an example with five marked cells). All empty grid cells look the same, and all cells with markers look the same. Suppose you are given a map of the test area (that is, the positions of all the markers), and you are placed at an (unknown to you) grid cell. How long will it take you to find out where you actually are? ICPC's answer is clear: potentially a very, very long time, while a GPS would give you the answer instantly. But how long exactly?\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ydxjurja.png)\n\nFigure L.1: Sample grid and the order in which test subjects explore the grid.\n\nIn the trial, test subjects will explore their environment by following an expanding clockwise spiral whose first few steps are shown in Figure L.1(b). The starting cell is labeled \"0\", and the numbers show the order in which other cells are visited. The test subjects can see a marker only if they are at its grid cell, and they will stop their exploration as soon as they know where they are based on the grid cells that they have seen so far. That means that the observed sequence of empty and marked grid cells could have begun only at a single possible starting position. The grid is unbounded, but the exploration will be finite since once a test subject has seen all markers on the grid, they'll definitely know where they are.\n\nHaving hundreds of test subjects literally running in circles can be expensive, so the ICPC figures that writing a simulation will be cheaper and faster. Maybe you can help?", "inputFormat": "The input describes a single grid. It starts with a line containing two integers $d_x$ , $d_y$ ($1 \\leq d_x, d_y \\leq 100$). The following $d_y$ lines contain $d_x$ characters each, and describe part of the test grid. The $i^{th}$ character of the $j^{th}$ line of this grid description specifies the contents of the grid cell at coordinate ($i$, $d_y-j+1$). The character is either '$\\texttt{.}$' or '$\\texttt{X}$', meaning that the cell is either empty, or contains a marker, respectively.\n\nThe total number of markers in the grid will be between $1$ and $100$, inclusive. All grid cells outside the range described by the input are empty.", "outputFormat": "\nIn ICPC's experiment, a test subject knows they will start at some position ($x$, $y$) with $1 \\leq x \\leq d_x$, $1 \\leq y \\leq d_y$.\n\nOutput three lines. The first line should have the expected number of steps needed to identify the starting position, assuming that the starting position is chosen uniformly at random. This number needs to be exact to within an absolute error of $10^{-3}$.\n\nThe second line should have the maximum number of steps necessary until one can identify the starting position.\n\nThe third line should list all starting coordinates ($x$, $y$) that require that maximum number of steps. The coordinates should be sorted by increasing $y$-coordinates, and then (if the $y$-coordinates are the same) by increasing $x$-coordinates.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2021 WF] Where Am I?", "background": "", "description": "Who am I? What am I? Why am I? These are all difficult questions that have kept philosophers reliably busy over the past millennia. But when it comes to \"Where am I\", then, well, modern smartphones and GPS satellites have pretty much taken the excitement out of that question.\n\nTo add insult to the injury of newly unemployed spatial philosophers formerly pondering the \"where\" question, the Instant Cartographic Positioning Company (ICPC) has decided to run a demonstration of just how much more powerful a GPS is compared to old-fashioned maps. Their argument is that maps are useful only if you already know where you are, but much less so if you start at an unknown location.\n\nFor this demonstration, the ICPC has created a test area that is arranged as an unbounded Cartesian grid. Most grid cells are empty, but a finite number of cells have a marker at their center (see Figure L.1(a) for an example with five marked cells). All empty grid cells look the same, and all cells with markers look the same. Suppose you are given a map of the test area (that is, the positions of all the markers), and you are placed at an (unknown to you) grid cell. How long will it take you to find out where you actually are? ICPC's answer is clear: potentially a very, very long time, while a GPS would give you the answer instantly. But how long exactly?\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ydxjurja.png)\n\nFigure L.1: Sample grid and the order in which test subjects explore the grid.\n\nIn the trial, test subjects will explore their environment by following an expanding clockwise spiral whose first few steps are shown in Figure L.1(b). The starting cell is labeled \"0\", and the numbers show the order in which other cells are visited. The test subjects can see a marker only if they are at its grid cell, and they will stop their exploration as soon as they know where they are based on the grid cells that they have seen so far. That means that the observed sequence of empty and marked grid cells could have begun only at a single possible starting position. The grid is unbounded, but the exploration will be finite since once a test subject has seen all markers on the grid, they'll definitely know where they are.\n\nHaving hundreds of test subjects literally running in circles can be expensive, so the ICPC figures that writing a simulation will be cheaper and faster. Maybe you can help?", "inputFormat": "The input describes a single grid. It starts with a line containing two integers $d_x$ , $d_y$ ($1 \\leq d_x, d_y \\leq 100$). The following $d_y$ lines contain $d_x$ characters each, and describe part of the test grid. The $i^{th}$ character of the $j^{th}$ line of this grid description specifies the contents of the grid cell at coordinate ($i$, $d_y-j+1$). The character is either '$\\texttt{.}$' or '$\\texttt{X}$', meaning that the cell is either empty, or contains a marker, respectively.\n\nThe total number of markers in the grid will be between $1$ and $100$, inclusive. All grid cells outside the range described by the input are empty.", "outputFormat": "\nIn ICPC's experiment, a test subject knows they will start at some position ($x$, $y$) with $1 \\leq x \\leq d_x$, $1 \\leq y \\leq d_y$.\n\nOutput three lines. The first line should have the expected number of steps needed to identify the starting position, assuming that the starting position is chosen uniformly at random. This number needs to be exact to within an absolute error of $10^{-3}$.\n\nThe second line should have the maximum number of steps necessary until one can identify the starting position.\n\nThe third line should list all starting coordinates ($x$, $y$) that require that maximum number of steps. The coordinates should be sorted by increasing $y$-coordinates, and then (if the $y$-coordinates are the same) by increasing $x$-coordinates.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2021 WF] Where Am I?", "background": "", "description": "我是谁？我是什么？我为什么存在？这些都是让哲学家们在过去的千年里一直忙碌的问题。但是当谈到“我在哪里”时，现代智能手机和 GPS 卫星几乎已经让这个问题失去了吸引力。\n\n为了给那些曾经思考“我在哪里”问题的空间哲学家们再添一层伤害，“即时制图定位公司”（ICPC）决定进行一次演示，以展示 GPS 比传统地图强大得多。他们的论点是，地图只有在你已经知道自己在哪里时才有用，但如果你从一个未知位置开始，地图的用处就小得多了。\n\n在这次演示中，ICPC 创建了一个测试区域，该区域被布置成一个无限的笛卡尔网格。大多数网格单元是空的，但有限数量的单元在其中心有一个标记（参见图 L.1(a) 中的五个标记单元的示例）。所有空网格单元看起来都一样，所有带标记的单元也看起来都一样。假设你得到了测试区域的地图（即所有标记的位置），并且你被放置在一个（你不知道的）网格单元上。你需要多长时间才能找到你实际所在的位置？ICPC 的答案很明确：可能需要很长很长的时间，而 GPS 会立即给你答案。但究竟需要多长时间呢？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ydxjurja.png)\n\n在试验中，测试对象将通过遵循一个顺时针扩展的螺旋形来探索他们的环境，其前几步如图 L.1(b) 所示。起始单元标记为“0”，数字显示了访问其他单元的顺序。测试对象只有在其网格单元上才能看到标记，并且一旦他们根据迄今为止看到的网格单元知道自己在哪里，他们就会停止探索。这意味着观察到的空和标记网格单元的序列只能从一个可能的起始位置开始。网格是无限的，但探索将是有限的，因为一旦测试对象看到了网格上的所有标记，他们就一定知道自己在哪里。\n\n让数百名测试对象字面意义上地绕圈跑可能会很昂贵，所以 ICPC 认为编写一个模拟程序会更便宜更快。也许你可以帮忙？", "inputFormat": "输入描述一个单一的网格。首先是一行包含两个整数 $d_x$ 和 $d_y$ ($1 \\leq d_x, d_y \\leq 100$)。接下来的 $d_y$ 行每行包含 $d_x$ 个字符，描述测试网格的一部分。网格描述的第 $j$ 行的第 $i$ 个字符指定了坐标 ($i$, $d_y-j+1$) 处网格单元的内容。字符要么是 '$\\texttt{.}$'，要么是 '$\\texttt{X}$'，分别表示单元是空的或者包含一个标记。\n\n网格中的标记总数将在 $1$ 到 $100$ 之间（含）变化。输入描述范围之外的所有网格单元都是空的。", "outputFormat": "在 ICPC 的实验中，测试对象知道他们将从某个位置 ($x$, $y$) 开始，其中 $1 \\leq x \\leq d_x$，$1 \\leq y \\leq d_y$。\n\n输出三行。第一行应包含识别起始位置所需的期望步数，假设起始位置是均匀随机选择的。这个数字需要精确到绝对误差 $10^{-3}$ 以内。\n\n第二行应包含识别起始位置所需的最大步数。\n\n第三行应列出所有需要最大步数的起始坐标 ($x$, $y$)。坐标应按 $y$ 坐标递增排序，如果 $y$ 坐标相同，则按 $x$ 坐标递增排序。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9451", "type": "P", "difficulty": 2, "samples": [["3\n1\n4\n6", "2\n5\n8"], ["1\n7", "No,Commander"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["位运算"], "title": "[ZSHOI-R1] 新概念报数", "background": "Div.2 A 要什么背景？", "description": "现在 Xttttr 和他的 npy 玩起了报数游戏，但是他们非常喜欢 $2$ 这个数字，于是制定了如下规则：\n\n- 如果一个数 $a$ 满足 $\\operatorname{popcount}(a) \\geq 3$，那么这个数字是非法的，对方需要回答 ``No,Commander``。\n- 否则，这个数是合法的，对方需要回答下一个合法的数。\n\n坐在旁边的你当然不知道游戏的乐趣，你只想知道某次报数之后对方应该回答什么。", "inputFormat": "第一行一个正整数 $T$，表示询问的次数。\n\n后面 $T$ 行，每行一个自然数 $a$，表示这次询问中某一方报出的数字。\n", "outputFormat": "$T$ 行，每行一个正整数或字符串，表示本次询问中对方所应该回答的。", "hint": "对于 $20\\%$ 的数据，保证 $T\\leq 100$，$a \\leq 10^4$。\n\n对于另外 $20\\%$ 的数据，保证 $a$ 是合法的数字。\n\n对于另外 $20\\%$ 的数据，保证 $a$ 在值域内均匀随机。\n\n对于 $100\\%$ 的数据，$1\\leq T \\leq 10^5$，$0\\leq a<2^{63}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZSHOI-R1] 新概念报数", "background": "Div.2 A 要什么背景？", "description": "现在 Xttttr 和他的 npy 玩起了报数游戏，但是他们非常喜欢 $2$ 这个数字，于是制定了如下规则：\n\n- 如果一个数 $a$ 满足 $\\operatorname{popcount}(a) \\geq 3$，那么这个数字是非法的，对方需要回答 ``No,Commander``。\n- 否则，这个数是合法的，对方需要回答下一个合法的数。\n\n坐在旁边的你当然不知道游戏的乐趣，你只想知道某次报数之后对方应该回答什么。", "inputFormat": "第一行一个正整数 $T$，表示询问的次数。\n\n后面 $T$ 行，每行一个自然数 $a$，表示这次询问中某一方报出的数字。\n", "outputFormat": "$T$ 行，每行一个正整数或字符串，表示本次询问中对方所应该回答的。", "hint": "对于 $20\\%$ 的数据，保证 $T\\leq 100$，$a \\leq 10^4$。\n\n对于另外 $20\\%$ 的数据，保证 $a$ 是合法的数字。\n\n对于另外 $20\\%$ 的数据，保证 $a$ 在值域内均匀随机。\n\n对于 $100\\%$ 的数据，$1\\leq T \\leq 10^5$，$0\\leq a<2^{63}$。", "locale": "zh-CN"}}}
{"pid": "P9452", "type": "P", "difficulty": 5, "samples": [["3\n1 2 3", "5\nA B\nA B\nA C\nB C\nB C"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["Special Judge"], "title": "[ZSHOI-R1] 河外塔（加强版）", "background": "河内塔（又称汉诺塔）问题，就是在一块木板上有三个立柱，在柱 1 上放着三个圆盘，小的在上面，大的在下面（初始状态）。让被试将在柱 1 上的三个圆盘移到柱 3 上面（目标状态）。条件是：每次只能移动任何一个柱子上面的一个圆盘，但大的圆盘不能放在小的圆盘上。\n\n通用问题解决者的解决过程即是手段——目的分析的策略。", "description": "但是，你可能没有听过河外塔问题。虽然但是，好像并没有河外塔问题。于是，伟大的 X_Xy 决定创造一个河外塔问题。\n\n既然是河内塔问题的延申，就得有些一样的东西：有三个柱子 \n$A$，$B$ 和 $C$ ，以及 $n$ 个圆盘，其中编号为 $i$ 的圆盘的半径长为 $i$，这些圆盘最开始都在 $A$ 上，最终都要顺序（即从上往下从小到大）地移到 $C$ 上。\n\n既然是河内塔问题的延伸，就得有些不同的东西：最开始在 $A$ 上面的圆盘并不是顺序的，由于这个限制，我们也不在意移动过程中的顺序，也就意味着你可以将一个大的圆盘放在小的圆盘上。\n\n但是 X_Xy 很懒，他只想让你操作至多 $10^6$ 次。", "inputFormat": "输入共两行。\n\n第一行有一个数 $n$，表示圆盘的数量。\n\n第二行有 $n$ 个数，表示 $A$ 上所有的圆盘**从上往下**的标号，保证圆盘构成一个 $1\\sim n$ 的排列。", "outputFormat": "共若干行。\n\n第一行有一个数 $tot$，表示你的操作数。\n\n接下来的第 $2$ 到第 $tot$ 行，每行两个用空格隔开的大写字母，第 $i+1$ 行表示你的第 $i$ 次操作是从某立柱移到了另一个上。", "hint": "对于所有数据点：$1\\leqslant n \\leqslant 4\\times 10^4$\n\n| 数据点 | n |\n| :----------: | :----------: |\n| 1~2 | $\\leqslant 10$ |\n| 3~4 | $\\leqslant 200$ |\n| 5~7 | $\\leqslant 3\\times 10^4 $ |\n| 8~10 | $\\leqslant 4\\times 10^4 $ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZSHOI-R1] 河外塔（加强版）", "background": "河内塔（又称汉诺塔）问题，就是在一块木板上有三个立柱，在柱 1 上放着三个圆盘，小的在上面，大的在下面（初始状态）。让被试将在柱 1 上的三个圆盘移到柱 3 上面（目标状态）。条件是：每次只能移动任何一个柱子上面的一个圆盘，但大的圆盘不能放在小的圆盘上。\n\n通用问题解决者的解决过程即是手段——目的分析的策略。", "description": "但是，你可能没有听过河外塔问题。虽然但是，好像并没有河外塔问题。于是，伟大的 X_Xy 决定创造一个河外塔问题。\n\n既然是河内塔问题的延申，就得有些一样的东西：有三个柱子 \n$A$，$B$ 和 $C$ ，以及 $n$ 个圆盘，其中编号为 $i$ 的圆盘的半径长为 $i$，这些圆盘最开始都在 $A$ 上，最终都要顺序（即从上往下从小到大）地移到 $C$ 上。\n\n既然是河内塔问题的延伸，就得有些不同的东西：最开始在 $A$ 上面的圆盘并不是顺序的，由于这个限制，我们也不在意移动过程中的顺序，也就意味着你可以将一个大的圆盘放在小的圆盘上。\n\n但是 X_Xy 很懒，他只想让你操作至多 $10^6$ 次。", "inputFormat": "输入共两行。\n\n第一行有一个数 $n$，表示圆盘的数量。\n\n第二行有 $n$ 个数，表示 $A$ 上所有的圆盘**从上往下**的标号，保证圆盘构成一个 $1\\sim n$ 的排列。", "outputFormat": "共若干行。\n\n第一行有一个数 $tot$，表示你的操作数。\n\n接下来的第 $2$ 到第 $tot$ 行，每行两个用空格隔开的大写字母，第 $i+1$ 行表示你的第 $i$ 次操作是从某立柱移到了另一个上。", "hint": "对于所有数据点：$1\\leqslant n \\leqslant 4\\times 10^4$\n\n| 数据点 | n |\n| :----------: | :----------: |\n| 1~2 | $\\leqslant 10$ |\n| 3~4 | $\\leqslant 200$ |\n| 5~7 | $\\leqslant 3\\times 10^4 $ |\n| 8~10 | $\\leqslant 4\\times 10^4 $ |", "locale": "zh-CN"}}}
{"pid": "P9453", "type": "P", "difficulty": 5, "samples": [["7 3\n6 7 6 6 6 5 4\n6 6 6", "7"], ["8 6\n4 4 2 2 4 4 2 2\n4 4 4 4 2 2", "2"], ["8 7\n3 3 3 2 2 2 1 1\n3 3 3 2 2 2 1", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": [], "title": "[ZSHOI-R1] 有效打击", "background": "打腻了原版的 Boss，FyFive 决定做一个 Hollow Knight Mod Boss，名字叫“成功冠军”。", "description": "和原本的失败冠军类似，成功冠军也有一个不能回魂的大盔甲。但是成功冠军更难的地方在于：它的盔甲需要以特定的打击方式才能造成伤害，可以造成伤害的打击序列被称作“有效打击”。\n\n作为 Mod Boss 的设计者，FyFive 设置了一个可以造成有效打击的“标准序列”。为了降低操作难度，当打击顺序与标准序列“相似”时，即可造成有效打击。在这里“相似”的定义是，对于一个打击序列，将所有相同打击的连续段的长度同时进行放缩，可以得到另一个序列，则称这两个序列是“相似”的。\n\n例如：\n- ``112244`` 和 ``111222444`` 是相似的，\n- ``111333`` 和 ``13`` 也是相似的，\n- ``226`` 和 ``226`` 也是相似的，\n- ``33889`` 和 ``33388899`` 则不是相似的。\n\n由于 Boss 还处在调整标准序列的阶段，所以 FyFive 将 Boss 的血量调到了无穷大，但这样他就没办法通过比较初始血量和最终血量来计算他的打击序列在当前标准序列下能造成多少次有效打击，所以请万能的你来帮帮 FyFive 吧！\n\n**注意**：对于可能出现的同时造成多次有效打击的情况，会造成多次有效打击，比如当打击序列为 ``11`` 时，若标准序列为 ``1``，则这个打击序列会造成 $3$ 次有效打击，因为第一个 ``1`` 和第二个 ``1`` 均与标准序列相似，同时 ``11`` 也与标准序列相似。若标准序列为 ``11``则也有 $3$ 次有效打击。若标准序列为 ``12``，则不会造成有效打击。同理，当打击序列为 ``6666``，标准序列为 ``66`` 时，则一共会造成 $10$ 次有效打击。\n\n#### 形式化的，\n>定义：若序列 $\\Alpha$ 为 \n> $$\\underbrace{AA...A}_{a_1个}\\underbrace{BB...B}_{a_2个}\\underbrace{CC...C}_{a_3个}...$$\n> 序列 $\\Beta$ 为 \n> $$\\underbrace{AA...A}_{b_1个}\\underbrace{BB...B}_{b_2个}\\underbrace{CC...C}_{b_3个}...$$\n> 其中 $A,B,C,a_1,a_2,a_3,...,b_1,b_2,b_3,...\\in N_+$。\n>\n> 若有 $\\frac{a_1}{b_1}=\\frac{a_2}{b_2}=\\frac{a_3}{b_3}=...=k\\ , k>0$，则称 $\\Alpha$ 与 $\\Beta$ 互为相似序列。\n>\n> 特别的，长度为 $0$ 的序列不与任何序列成相似序列。\n>\n> 不难证明此定义下序列间的相似具有传递性。\n\n求给定的序列 $A$ 中有多少个子串与给定序列 $B$ 互为相似序列。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数，表示打击序列 $A$，数之间用空格隔开。\n\n第三行 $m$ 个整数，表示标准序列 $B$，数之间用空格隔开。", "outputFormat": "一行一个正整数，表示造成的有效打击总数。", "hint": "数据范围：\n\n| 数据点 | n | m | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| 1~2 | $\\leq 20000$ | $\\leq 20000$ | 无 |\n| 3~4 | $\\leq 5 \\times 10^6$ | $\\leq 5 \\times 10^6$ | A |\n| 5~6 | $\\leq 5 \\times 10^6$ | $\\leq 5 \\times 10^6$ | B |\n| 7~10 | $\\leq 5 \\times 10^6$ | $\\leq 5 \\times 10^6$ | C |\n\n对于 $100\\%$ 的数据，保证有 $\\forall\\ i\\in[1,n]$，$1\\leq A_i \\leq 7$；$\\forall\\ i\\in[1,m]$，$1\\leq B_i\\leq 7$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,m\\leq 5 \\times 10^6$。\n\n特殊性质 A：保证 $\\forall\\ i,j\\in [1,m]，B_i=B_j$。\n\n特殊性质 B：保证有且仅有一个 $k\\in[1,m-1]$，使得 $\\forall \\ i,j\\in[1,k]$，$B_i=B_j$；$\\forall \\ i,j\\in[k+1,m]$，$B_i=B_j$。\n\n特殊性质 C：保证第 $10$ 个点中 $n,m \\leq 5\\times 10^5$，且其他点中连续段仅有不超过 $100$ 种不同的长度。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZSHOI-R1] 有效打击", "background": "打腻了原版的 Boss，FyFive 决定做一个 Hollow Knight Mod Boss，名字叫“成功冠军”。", "description": "和原本的失败冠军类似，成功冠军也有一个不能回魂的大盔甲。但是成功冠军更难的地方在于：它的盔甲需要以特定的打击方式才能造成伤害，可以造成伤害的打击序列被称作“有效打击”。\n\n作为 Mod Boss 的设计者，FyFive 设置了一个可以造成有效打击的“标准序列”。为了降低操作难度，当打击顺序与标准序列“相似”时，即可造成有效打击。在这里“相似”的定义是，对于一个打击序列，将所有相同打击的连续段的长度同时进行放缩，可以得到另一个序列，则称这两个序列是“相似”的。\n\n例如：\n- ``112244`` 和 ``111222444`` 是相似的，\n- ``111333`` 和 ``13`` 也是相似的，\n- ``226`` 和 ``226`` 也是相似的，\n- ``33889`` 和 ``33388899`` 则不是相似的。\n\n由于 Boss 还处在调整标准序列的阶段，所以 FyFive 将 Boss 的血量调到了无穷大，但这样他就没办法通过比较初始血量和最终血量来计算他的打击序列在当前标准序列下能造成多少次有效打击，所以请万能的你来帮帮 FyFive 吧！\n\n**注意**：对于可能出现的同时造成多次有效打击的情况，会造成多次有效打击，比如当打击序列为 ``11`` 时，若标准序列为 ``1``，则这个打击序列会造成 $3$ 次有效打击，因为第一个 ``1`` 和第二个 ``1`` 均与标准序列相似，同时 ``11`` 也与标准序列相似。若标准序列为 ``11``则也有 $3$ 次有效打击。若标准序列为 ``12``，则不会造成有效打击。同理，当打击序列为 ``6666``，标准序列为 ``66`` 时，则一共会造成 $10$ 次有效打击。\n\n#### 形式化的，\n>定义：若序列 $\\Alpha$ 为 \n> $$\\underbrace{AA...A}_{a_1个}\\underbrace{BB...B}_{a_2个}\\underbrace{CC...C}_{a_3个}...$$\n> 序列 $\\Beta$ 为 \n> $$\\underbrace{AA...A}_{b_1个}\\underbrace{BB...B}_{b_2个}\\underbrace{CC...C}_{b_3个}...$$\n> 其中 $A,B,C,a_1,a_2,a_3,...,b_1,b_2,b_3,...\\in N_+$。\n>\n> 若有 $\\frac{a_1}{b_1}=\\frac{a_2}{b_2}=\\frac{a_3}{b_3}=...=k\\ , k>0$，则称 $\\Alpha$ 与 $\\Beta$ 互为相似序列。\n>\n> 特别的，长度为 $0$ 的序列不与任何序列成相似序列。\n>\n> 不难证明此定义下序列间的相似具有传递性。\n\n求给定的序列 $A$ 中有多少个子串与给定序列 $B$ 互为相似序列。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数，表示打击序列 $A$，数之间用空格隔开。\n\n第三行 $m$ 个整数，表示标准序列 $B$，数之间用空格隔开。", "outputFormat": "一行一个正整数，表示造成的有效打击总数。", "hint": "数据范围：\n\n| 数据点 | n | m | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| 1~2 | $\\leq 20000$ | $\\leq 20000$ | 无 |\n| 3~4 | $\\leq 5 \\times 10^6$ | $\\leq 5 \\times 10^6$ | A |\n| 5~6 | $\\leq 5 \\times 10^6$ | $\\leq 5 \\times 10^6$ | B |\n| 7~10 | $\\leq 5 \\times 10^6$ | $\\leq 5 \\times 10^6$ | C |\n\n对于 $100\\%$ 的数据，保证有 $\\forall\\ i\\in[1,n]$，$1\\leq A_i \\leq 7$；$\\forall\\ i\\in[1,m]$，$1\\leq B_i\\leq 7$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,m\\leq 5 \\times 10^6$。\n\n特殊性质 A：保证 $\\forall\\ i,j\\in [1,m]，B_i=B_j$。\n\n特殊性质 B：保证有且仅有一个 $k\\in[1,m-1]$，使得 $\\forall \\ i,j\\in[1,k]$，$B_i=B_j$；$\\forall \\ i,j\\in[k+1,m]$，$B_i=B_j$。\n\n特殊性质 C：保证第 $10$ 个点中 $n,m \\leq 5\\times 10^5$，且其他点中连续段仅有不超过 $100$ 种不同的长度。", "locale": "zh-CN"}}}
{"pid": "P9454", "type": "P", "difficulty": 6, "samples": [["3 2\n1 2\n2 3", "1 2 3 \n"], ["4 3\n1 2\n2 3\n2 4\n", "1 2 499122180 499122180 \n"], ["5 7\n5 4\n2 4\n4 3\n1 3\n1 2\n1 4\n1 5\n", "1 249561092 249561092 249561091 249561092 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "期望"], "title": "[ZSHOI-R1] 巡城", "background": "在 X 国国王多年的建设之下，她的国家发生了质的蜕变，从众多 $n$ 座城市却只有 $n-1$ 条道路的国家中脱颖而出。也就是说，X 国不再是一棵树了，而是一张图。", "description": "国王为了能够集中自己的权力，稳固城邦，她对国家道路设计要求十分严苛，**任何两个城市之间的路径至多只有一条不经过首都**，虽然但是，没有人知道为什么这样能够更好地稳固 X 国。\n\n有一天，X 国国王决定巡视所有的城市，她通过无线电在巡城前一天向所有的城市通知了这个好消息。热情的群众们也积极地做出了响应，准备迎接国王的到来。\n\n国王一天只能造访一座城市，而且第一天她会从首都开始。\n\n在之后的每一天，她会随机从与她所在城市直接相连的城市中**等概率**地选择一个她**没有前往过的城市**前往。如果不存在这样的城市，她会立即**原路返回**，从她来这个城市的路回去，再重复上述操作，因为有携带宇宙射线的传送门，这个过程**不消耗时间**。\n\n爱戴她的群众们想要知道，他们的国王第一次到达他们所在城市的日期（她造访首都的那一天为 $1$，之后每一天一次加 $1$）的期望是多少，答案对 $998244353$ 取模。\n\n保证城市构成的图是连通图，无自环与重边，且首都编号为 $1$。", "inputFormat": "第一行有两个数 $n,m$，代表X国的城市数和路径数。\n\n接下来的 $m$ 行，每行两个数 $u,v$ 表示城市的一条路径。", "outputFormat": "共 $1$ 行，$n$ 个数。\n\n第 $i$ 个数代表 $i$ 号城市的期望。", "hint": "对于所有的数据点，$1\\leqslant n\\leqslant 5 \\times 10^5$，$1\\leqslant m \\leqslant 6 \\times 10^5$。\n| 数据点 | n | m |\n| :----------: | :----------: | :----------: |\n| 1~2 | $5$ | $7$ |\n| 3~5 | $\\leqslant10^4$ | $n-1$ |\n| 6~8 | $\\leqslant10^4$ | $n$ |\n| 9~10 | $\\leqslant10^4$ | $2n-3$ |\n| 11~15 | $\\leqslant10^4$ | $\\leqslant2\\times10^4$ |\n| 16~20 | $\\leqslant5\\times10^5$ | $\\leqslant6\\times10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZSHOI-R1] 巡城", "background": "在 X 国国王多年的建设之下，她的国家发生了质的蜕变，从众多 $n$ 座城市却只有 $n-1$ 条道路的国家中脱颖而出。也就是说，X 国不再是一棵树了，而是一张图。", "description": "国王为了能够集中自己的权力，稳固城邦，她对国家道路设计要求十分严苛，**任何两个城市之间的路径至多只有一条不经过首都**，虽然但是，没有人知道为什么这样能够更好地稳固 X 国。\n\n有一天，X 国国王决定巡视所有的城市，她通过无线电在巡城前一天向所有的城市通知了这个好消息。热情的群众们也积极地做出了响应，准备迎接国王的到来。\n\n国王一天只能造访一座城市，而且第一天她会从首都开始。\n\n在之后的每一天，她会随机从与她所在城市直接相连的城市中**等概率**地选择一个她**没有前往过的城市**前往。如果不存在这样的城市，她会立即**原路返回**，从她来这个城市的路回去，再重复上述操作，因为有携带宇宙射线的传送门，这个过程**不消耗时间**。\n\n爱戴她的群众们想要知道，他们的国王第一次到达他们所在城市的日期（她造访首都的那一天为 $1$，之后每一天一次加 $1$）的期望是多少，答案对 $998244353$ 取模。\n\n保证城市构成的图是连通图，无自环与重边，且首都编号为 $1$。", "inputFormat": "第一行有两个数 $n,m$，代表X国的城市数和路径数。\n\n接下来的 $m$ 行，每行两个数 $u,v$ 表示城市的一条路径。", "outputFormat": "共 $1$ 行，$n$ 个数。\n\n第 $i$ 个数代表 $i$ 号城市的期望。", "hint": "对于所有的数据点，$1\\leqslant n\\leqslant 5 \\times 10^5$，$1\\leqslant m \\leqslant 6 \\times 10^5$。\n| 数据点 | n | m |\n| :----------: | :----------: | :----------: |\n| 1~2 | $5$ | $7$ |\n| 3~5 | $\\leqslant10^4$ | $n-1$ |\n| 6~8 | $\\leqslant10^4$ | $n$ |\n| 9~10 | $\\leqslant10^4$ | $2n-3$ |\n| 11~15 | $\\leqslant10^4$ | $\\leqslant2\\times10^4$ |\n| 16~20 | $\\leqslant5\\times10^5$ | $\\leqslant6\\times10^5$ |", "locale": "zh-CN"}}}
{"pid": "P9455", "type": "P", "difficulty": 2, "samples": [["10\n2 3\n5 0\n6 3\n7 2\n8 0\n10 0\n13 2\n14 4\n15 4\n18 2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "语言月赛"], "title": "[入门赛 #14] 塔台超频 (Hard Version)", "background": "", "description": "在一条笔直的马路上有 $n$ 个塔台，它们被依次标号为 $1, 2, \\cdots, n$，分别处于距离马路起点 $a _ 1, a _ 2, \\cdots, a _ n$（$a _ 1 < a _ 2 < \\cdots < a _ n$）的位置。\n\n每个塔台初始时有一个通讯半径 $b _ 1, b _ 2, \\cdots, b _ n$，这代表，对于 $i$ 号塔台，其可以与 $[a _ i - b _ i, a _ i + b _ i]$ 范围内的塔台通讯。\n\n需要特别注意，对于两个塔台 A、B，当且仅当 A 塔台的**位置**处在 B 塔台的通讯范围内，B 塔台才能向 A 塔台传递信号。请注意这里不是「二者的通讯范围重合，即可通讯」。\n\n现在你可以对这些塔台进行超频。具体的，你可以指定一个电压 $k$，之后**所有**塔台都会被加上 $k$ 的电压，通讯半径都会增大 $k$。这里的 $k$ 仅可为非负整数。\n\n现在要求你通过超频，使信号可以从 $1$ 号塔台传输到 $n$ 号塔台，路径不限（即，无论如何，只需要让信号从 $1$ 号塔台到达 $n$ 号塔台即可）。但是由于不合理的超频会较严重地磨损塔台，因此你想要尽可能降低超频的电压。\n\n请你计算出，为了达到以上目的，塔台超频需要的最小电压是多少。", "inputFormat": "输入共 $n + 1$ 行。\n\n第一行为一个整数 $n$，代表塔台的数量。  \n接下来 $n$ 行，每行两个整数 $a _ i, b _ i$，分别代表各个塔台的位置和初始通讯半径。", "outputFormat": "输出共一行一个整数，代表为了达到目的，塔台超频需要的最小电压。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $2 \\leq n \\leq 5 \\times 10 ^ 5$，$0 \\leq a _ i, b _ i \\leq 10 ^ 9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #14] 塔台超频 (Hard Version)", "background": "", "description": "在一条笔直的马路上有 $n$ 个塔台，它们被依次标号为 $1, 2, \\cdots, n$，分别处于距离马路起点 $a _ 1, a _ 2, \\cdots, a _ n$（$a _ 1 < a _ 2 < \\cdots < a _ n$）的位置。\n\n每个塔台初始时有一个通讯半径 $b _ 1, b _ 2, \\cdots, b _ n$，这代表，对于 $i$ 号塔台，其可以与 $[a _ i - b _ i, a _ i + b _ i]$ 范围内的塔台通讯。\n\n需要特别注意，对于两个塔台 A、B，当且仅当 A 塔台的**位置**处在 B 塔台的通讯范围内，B 塔台才能向 A 塔台传递信号。请注意这里不是「二者的通讯范围重合，即可通讯」。\n\n现在你可以对这些塔台进行超频。具体的，你可以指定一个电压 $k$，之后**所有**塔台都会被加上 $k$ 的电压，通讯半径都会增大 $k$。这里的 $k$ 仅可为非负整数。\n\n现在要求你通过超频，使信号可以从 $1$ 号塔台传输到 $n$ 号塔台，路径不限（即，无论如何，只需要让信号从 $1$ 号塔台到达 $n$ 号塔台即可）。但是由于不合理的超频会较严重地磨损塔台，因此你想要尽可能降低超频的电压。\n\n请你计算出，为了达到以上目的，塔台超频需要的最小电压是多少。", "inputFormat": "输入共 $n + 1$ 行。\n\n第一行为一个整数 $n$，代表塔台的数量。  \n接下来 $n$ 行，每行两个整数 $a _ i, b _ i$，分别代表各个塔台的位置和初始通讯半径。", "outputFormat": "输出共一行一个整数，代表为了达到目的，塔台超频需要的最小电压。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $2 \\leq n \\leq 5 \\times 10 ^ 5$，$0 \\leq a _ i, b _ i \\leq 10 ^ 9$。", "locale": "zh-CN"}}}
{"pid": "P9456", "type": "P", "difficulty": 2, "samples": [["3 3 3\n1 0 0\n0 0 0\n0 0 0\n1 0 0\n0 0 1\n0 0 1\n0 0 0\n0 1 0\n0 0 0", "0 1 0\n1 1 1\n1 0 0\n0 1 0\n1 0 1\n0 0 1\n0 1 1\n0 1 0\n1 0 0"], ["4 6 3\n0 0 0 0 0 1\n0 0 0 0 0 1\n0 0 1 0 0 0\n0 0 0 0 0 0\n0 1 0 0 0 0\n0 0 1 0 0 1\n0 0 0 0 0 0\n1 0 0 0 0 1\n0 0 0 0 0 0\n0 1 0 0 1 0\n0 0 0 0 0 1\n1 0 0 0 0 1", "0 1 1 1\n1 1 0 1\n1 1 1 0\n1 1 0 0 1 1\n1 0 0 1 1 1\n1 0 0 1 0 0\n1 1 1 1\n0 1 0 0\n0 0 0 0\n0 1 1 0\n1 1 0 0\n0 0 0 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "语言月赛"], "title": "[入门赛 #14] Three-View Projection (Hard Version)", "background": "", "description": "> 全文与 $x, y, z$ 轴/方向有关的内容均基于以下的 $x, y, z$ 轴、位置及观测方向。观测者站在如图所示的位置，正在向着 $y$ 轴（绿线）正方向（箭头方向）观测。  \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/05erek0j.png)\n\n现在有一个长、宽、高（沿 $x, y, z$ 轴延展的长度）为 $n \\text{ cm}, m \\text{ cm}, k \\text{ cm}$ 的长方体区域。我们将这片区域划分为 $n \\times m \\times k$ 个小格子。每个小格子中可以放置一个边长为 $1 \\text{ cm}$ 的小正方体。\n\n我们使用一个整数三元组 $(x, y, z)$ 来表示一个格子在空间中的位置，其代表从左往右数第 $x$ 个，从前往后数第 $y$ 个，从下往上第 $z$ 个格子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0yu909tc.png)\n\n例如，上图展示的 $3 \\times 3 \\times 3$ 区域中，按照观测者的位置，可以发现红蓝线（$x, z$ 轴）所在的面为前面，蓝绿线（$y, z$ 轴）所在的面为左面，红绿线（$x, y$ 轴）所在的面为下面，五个小正方体的位置分别为 $(1, 1, 1), (1, 1, 2), (2, 3, 2), (3, 3, 2), (2, 2, 3)$。\n\n三视图是观测者从上面（从上往下）、左面（从左往右）、正面（从前往后）三个不同角度观察同一个空间几何体而画出的图形。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p72x1i3q.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6ucamb9o.png)\n\n例如，以上是示例区域的三视图。\n\n现在，给定一个区域及其中的正方体排布情况，请你帮助计算出这个区域的三视图。", "inputFormat": "输入共 $n \\times k + 1$ 行。\n\n第一行为三个整数 $n, m, k$，代表长方形区域的长、宽、高。  \n接下来 $n \\times k$ 行，每行 $m$ 个整数。其中，将其每 $n$ 行分为一组，第 $x$ 组第 $y$ 行（即第 $(x - 1) \\times n + y$ 行）第 $z$ 列的整数 $a _ {x, y, z}$ 代表 $(y, z, x)$ 处格子的情况，若 $a _ {x, y, z} = 1$，代表该格子有小正方体；否则，代表该格子没有小正方体。", "outputFormat": "输出共 $2k + m$ 行。\n\n前 $k$ 行，每行 $n$ 个整数，代表**自上而下自左至右**正视图的情况。如果正视图中某个位置有填充，则输出 $1$，否则输出 $0$。同一行整数之间两两以一个空格隔开。  \n接下来 $k$ 行，每行 $m$ 个整数，代表**自上而下自后至前**左视图的情况。如果左视图中某个位置有填充，则输出 $1$，否则输出 $0$。同一行整数之间两两以一个空格隔开。  \n接下来 $m$ 行，每行 $n$ 个整数，代表**自后至前自左至右**俯视图的情况。如果俯视图中某个位置有填充，则输出 $1$，否则输出 $0$。同一行整数之间两两以一个空格隔开。  \n\n**以上方向均基于观测者初始站立位置及方向。如果对输出的顺序有疑惑，请参照样例辅助理解。**", "hint": "### 样例 1 解释\n\n样例 1 即为题目中的示例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ho4l901w.png)\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n, m, k \\leq 200$，$0 \\leq a _ {x, y, z} \\leq 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #14] Three-View Projection (Hard Version)", "background": "", "description": "> 全文与 $x, y, z$ 轴/方向有关的内容均基于以下的 $x, y, z$ 轴、位置及观测方向。观测者站在如图所示的位置，正在向着 $y$ 轴（绿线）正方向（箭头方向）观测。  \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/05erek0j.png)\n\n现在有一个长、宽、高（沿 $x, y, z$ 轴延展的长度）为 $n \\text{ cm}, m \\text{ cm}, k \\text{ cm}$ 的长方体区域。我们将这片区域划分为 $n \\times m \\times k$ 个小格子。每个小格子中可以放置一个边长为 $1 \\text{ cm}$ 的小正方体。\n\n我们使用一个整数三元组 $(x, y, z)$ 来表示一个格子在空间中的位置，其代表从左往右数第 $x$ 个，从前往后数第 $y$ 个，从下往上第 $z$ 个格子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0yu909tc.png)\n\n例如，上图展示的 $3 \\times 3 \\times 3$ 区域中，按照观测者的位置，可以发现红蓝线（$x, z$ 轴）所在的面为前面，蓝绿线（$y, z$ 轴）所在的面为左面，红绿线（$x, y$ 轴）所在的面为下面，五个小正方体的位置分别为 $(1, 1, 1), (1, 1, 2), (2, 3, 2), (3, 3, 2), (2, 2, 3)$。\n\n三视图是观测者从上面（从上往下）、左面（从左往右）、正面（从前往后）三个不同角度观察同一个空间几何体而画出的图形。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p72x1i3q.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6ucamb9o.png)\n\n例如，以上是示例区域的三视图。\n\n现在，给定一个区域及其中的正方体排布情况，请你帮助计算出这个区域的三视图。", "inputFormat": "输入共 $n \\times k + 1$ 行。\n\n第一行为三个整数 $n, m, k$，代表长方形区域的长、宽、高。  \n接下来 $n \\times k$ 行，每行 $m$ 个整数。其中，将其每 $n$ 行分为一组，第 $x$ 组第 $y$ 行（即第 $(x - 1) \\times n + y$ 行）第 $z$ 列的整数 $a _ {x, y, z}$ 代表 $(y, z, x)$ 处格子的情况，若 $a _ {x, y, z} = 1$，代表该格子有小正方体；否则，代表该格子没有小正方体。", "outputFormat": "输出共 $2k + m$ 行。\n\n前 $k$ 行，每行 $n$ 个整数，代表**自上而下自左至右**正视图的情况。如果正视图中某个位置有填充，则输出 $1$，否则输出 $0$。同一行整数之间两两以一个空格隔开。  \n接下来 $k$ 行，每行 $m$ 个整数，代表**自上而下自后至前**左视图的情况。如果左视图中某个位置有填充，则输出 $1$，否则输出 $0$。同一行整数之间两两以一个空格隔开。  \n接下来 $m$ 行，每行 $n$ 个整数，代表**自后至前自左至右**俯视图的情况。如果俯视图中某个位置有填充，则输出 $1$，否则输出 $0$。同一行整数之间两两以一个空格隔开。  \n\n**以上方向均基于观测者初始站立位置及方向。如果对输出的顺序有疑惑，请参照样例辅助理解。**", "hint": "### 样例 1 解释\n\n样例 1 即为题目中的示例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ho4l901w.png)\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n, m, k \\leq 200$，$0 \\leq a _ {x, y, z} \\leq 1$。", "locale": "zh-CN"}}}
{"pid": "P9457", "type": "P", "difficulty": 3, "samples": [["2 3 1\n1 2 3\n4 5 6\n", "3"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "语言月赛"], "title": "[入门赛 #14] 魔法少女扶苏 (Hard Version)", "background": "", "description": "给定一个 $n$ 行 $m$ 列的数字矩阵，第 $i$ 行第 $j$ 列的数称为 $a_{i,j}$。\n\n扶苏可以释放任意多次魔法，每次施放魔法，矩阵里的**每个**数字都会被减去 $1$。\n\n现在扶苏想知道，她至少需要释放几次魔法，才能让矩阵中存在至少 $k$ 个位置 $(x, y)$，满足 $a_{x, y}$ 大于或等于它所在行和列的元素之和。\n\n形式化地，你需要计算最小的魔法释放次数使得施放魔法后存在至少 $k$ 个位置 $(x, y)$，满足 $a_{x, y} \\geq \\sum \\limits _{i = 1}^n a_{i,y} + \\sum \\limits _{i = 1}^m a_{x,i}$。", "inputFormat": "第一行是三个整数，表示矩阵的行数 $n$，列数 $m$ 和要求符合条件的位置个数 $k$。\n\n接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行的第 $j$ 个整数表示初始的 $a_{i,j}$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n释放 $3$ 次魔法后，矩阵变为\n\n$$\\begin{matrix}-2 & -1 & 0\\\\1& 2&3\\\\\\end{matrix}$$\n\n于是 $a_{1,1} = -2 > (-1) + (-3) = \\sum\\limits_{i =1}^n a_{i,1} + \\sum\\limits_{i = 1}^m a_{1, i}$。\n\n### 数据规模与约定\n\n- 对 $100\\%$ 的数据，保证 $1 \\leq n, m \\leq 3 \\times 10^3$，$1 \\leq k \\leq n \\times m$，$0 \\leq a_i \\leq 10^{11}$。\n\n### 提示\n\n**请使用合理的读入方式，避免超时。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #14] 魔法少女扶苏 (Hard Version)", "background": "", "description": "给定一个 $n$ 行 $m$ 列的数字矩阵，第 $i$ 行第 $j$ 列的数称为 $a_{i,j}$。\n\n扶苏可以释放任意多次魔法，每次施放魔法，矩阵里的**每个**数字都会被减去 $1$。\n\n现在扶苏想知道，她至少需要释放几次魔法，才能让矩阵中存在至少 $k$ 个位置 $(x, y)$，满足 $a_{x, y}$ 大于或等于它所在行和列的元素之和。\n\n形式化地，你需要计算最小的魔法释放次数使得施放魔法后存在至少 $k$ 个位置 $(x, y)$，满足 $a_{x, y} \\geq \\sum \\limits _{i = 1}^n a_{i,y} + \\sum \\limits _{i = 1}^m a_{x,i}$。", "inputFormat": "第一行是三个整数，表示矩阵的行数 $n$，列数 $m$ 和要求符合条件的位置个数 $k$。\n\n接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行的第 $j$ 个整数表示初始的 $a_{i,j}$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n释放 $3$ 次魔法后，矩阵变为\n\n$$\\begin{matrix}-2 & -1 & 0\\\\1& 2&3\\\\\\end{matrix}$$\n\n于是 $a_{1,1} = -2 > (-1) + (-3) = \\sum\\limits_{i =1}^n a_{i,1} + \\sum\\limits_{i = 1}^m a_{1, i}$。\n\n### 数据规模与约定\n\n- 对 $100\\%$ 的数据，保证 $1 \\leq n, m \\leq 3 \\times 10^3$，$1 \\leq k \\leq n \\times m$，$0 \\leq a_i \\leq 10^{11}$。\n\n### 提示\n\n**请使用合理的读入方式，避免超时。**", "locale": "zh-CN"}}}
{"pid": "P9458", "type": "P", "difficulty": 3, "samples": [["101", "011"], ["0010100", "0000101"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "语言月赛"], "title": "[入门赛 #14] 扶苏和串 (Hard Version)", "background": "众所周知，每个月入门赛的字符串题都是扶苏来枚举 idea 出出来的。", "description": "给定一个 01 字符串 $s$，你可以任选 $s$ 的一个非空子串，把这个子串在 $s$ 中**翻转**一次。\n\n问你能得到字典序最小的字符串是什么？\n\n形式化的，你可以选择一个区间 $[l, r]$ 满足 $1 \\leq l \\leq r \\leq |s|$，构造一个串 $t$ 满足：\n\n$$t_i = \\begin{cases}s_i, &i < l \\text{ 或 } i > r \\\\ s_{r - (i - l)}, & l \\leq i \\leq r\\end{cases}$$\n\n最小化字符串 $t$ 的字典序。", "inputFormat": "输入只有一行一个字符串，表示 $s$。", "outputFormat": "输出一行一个字符串，表示得到的字典序最小的字符串。", "hint": "### 样例 1 解释\n\n$s = \\texttt{\\underline{10}1}$，翻转下划线标出的子串，得到 $t = \\texttt{011}$\n\n### 样例 2 解释\n\n$s = \\texttt{00\\underline{10100}}$，翻转下划线标出的子串，得到 $\\texttt{0000101}$。\n\n### 数据规模与约定\n\n下面用 $|s|$ 表示输入字符串的长度。\n\n- 对 $100\\%$ 的数据，$1 \\leq |s| \\leq 3000$。$s$ 只含字符 $\\texttt{0,1}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #14] 扶苏和串 (Hard Version)", "background": "众所周知，每个月入门赛的字符串题都是扶苏来枚举 idea 出出来的。", "description": "给定一个 01 字符串 $s$，你可以任选 $s$ 的一个非空子串，把这个子串在 $s$ 中**翻转**一次。\n\n问你能得到字典序最小的字符串是什么？\n\n形式化的，你可以选择一个区间 $[l, r]$ 满足 $1 \\leq l \\leq r \\leq |s|$，构造一个串 $t$ 满足：\n\n$$t_i = \\begin{cases}s_i, &i < l \\text{ 或 } i > r \\\\ s_{r - (i - l)}, & l \\leq i \\leq r\\end{cases}$$\n\n最小化字符串 $t$ 的字典序。", "inputFormat": "输入只有一行一个字符串，表示 $s$。", "outputFormat": "输出一行一个字符串，表示得到的字典序最小的字符串。", "hint": "### 样例 1 解释\n\n$s = \\texttt{\\underline{10}1}$，翻转下划线标出的子串，得到 $t = \\texttt{011}$\n\n### 样例 2 解释\n\n$s = \\texttt{00\\underline{10100}}$，翻转下划线标出的子串，得到 $\\texttt{0000101}$。\n\n### 数据规模与约定\n\n下面用 $|s|$ 表示输入字符串的长度。\n\n- 对 $100\\%$ 的数据，$1 \\leq |s| \\leq 3000$。$s$ 只含字符 $\\texttt{0,1}$。", "locale": "zh-CN"}}}
{"pid": "P9459", "type": "P", "difficulty": 1, "samples": [["5\nyi yan ding zhen\nyu yan ding zhen\nzheng tai ding zhen\nyin yang guai qi\nyou xiu su zhi\n", "Yes\nYes\nNo\nNo\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「EZEC-14」浴眼盯真", "background": "验题人提示：本题数据在 windows 下生成，即换行符为 ``\\r\\n``。", "description": "dXqwq 定义一个字符串四元组 $(a,b,c,d)$ 是“浴眼盯真”的，当且仅当：\n\n- $a,b$ 的首字母均为 $\\texttt{y}$。\n- $c$ 恰好等于 $\\texttt{ding}$。\n- $d$ 恰好等于 $\\texttt{zhen}$。\n\n给定四个用空格分隔的字符串 $a,b,c,d$，保证其只包含小写英文字母，你需要判断 $(a,b,c,d)$ 是否是“浴眼盯真”的。", "inputFormat": "本题有多组测试数据。\n\n第一行输入一个整数 $T$，代表测试数据组数。\n\n接下来 $T$ 行，每行输入四个用空格分隔的字符串 $a,b,c,d$。", "outputFormat": "对于每组数据输出一行。\n\n如果 $(a,b,c,d)$ 是“浴眼盯真”的，输出 ``Yes``，否则输出 ``No``。", "hint": "**【样例解释】**\n\n前两组测试数据满足全部要求。\n\n第三，五组测试数据不满足第一条要求。\n\n第四，五组测试数据不满足第二，三条要求。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（50 pts）：保证输入的所有字符串长度均为 $4$。\n- Subtask 2（50 pts）：无特殊限制。 \n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 100$，每个字符串长度不超过 $10$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qvr810ap.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-14」浴眼盯真", "background": "验题人提示：本题数据在 windows 下生成，即换行符为 ``\\r\\n``。", "description": "dXqwq 定义一个字符串四元组 $(a,b,c,d)$ 是“浴眼盯真”的，当且仅当：\n\n- $a,b$ 的首字母均为 $\\texttt{y}$。\n- $c$ 恰好等于 $\\texttt{ding}$。\n- $d$ 恰好等于 $\\texttt{zhen}$。\n\n给定四个用空格分隔的字符串 $a,b,c,d$，保证其只包含小写英文字母，你需要判断 $(a,b,c,d)$ 是否是“浴眼盯真”的。", "inputFormat": "本题有多组测试数据。\n\n第一行输入一个整数 $T$，代表测试数据组数。\n\n接下来 $T$ 行，每行输入四个用空格分隔的字符串 $a,b,c,d$。", "outputFormat": "对于每组数据输出一行。\n\n如果 $(a,b,c,d)$ 是“浴眼盯真”的，输出 ``Yes``，否则输出 ``No``。", "hint": "**【样例解释】**\n\n前两组测试数据满足全部要求。\n\n第三，五组测试数据不满足第一条要求。\n\n第四，五组测试数据不满足第二，三条要求。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（50 pts）：保证输入的所有字符串长度均为 $4$。\n- Subtask 2（50 pts）：无特殊限制。 \n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 100$，每个字符串长度不超过 $10$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qvr810ap.png)", "locale": "zh-CN"}}}
{"pid": "P9460", "type": "P", "difficulty": 3, "samples": [["5 0\n1 2 3 4 5", "5"], ["5 1\n1 2 3 4 5", "pigstd"], ["5 1\n1 1 2 2 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "二分", "洛谷原创", "O2优化", "前缀和", "洛谷月赛"], "title": "「EZEC-14」众数 I", "background": "pigstd 是一个可爱的男孩子。他在 NOI2022 中的众数一题定义了 $10^6$ 个 ``std::deque`` 并没有 MLE。", "description": "给定一个长度为 $n$ 的序列 $a$，我们通过以下方式构造序列 $b$：\n\n- 初始时 $b=a$。\n- 依次对 $b$ 进行 $k$ 次操作，每次操作选择任意一个元素并将其**修改**为任意整数。\n\ndXqwq 定义一个序列的**众数**为所有出现次数最大的数。例如 $[1,1,4,5,1,4]$ 的众数为 $1$，而 $[1,14,5,14,19,19,8,10]$ 的众数为 $14,19$。\n\n你需要求出有多少整数可能成为 $b$ 的**众数**。", "inputFormat": "第一行输入两个整数 $n,k$。\n\n第二行输入 $n$ 个整数 $a_i$。", "outputFormat": "输出一个整数，代表可能成为众数的数的数量。\n\n特别地，如果答案为正无穷，输出 ``pigstd``。", "hint": "**【样例解释】**\n\n对于第一组数据，最终 $1,2,3,4,5$ 可能为区间众数。\n\n对于第二组数据，将第一个数换成 $6,7,8,9,\\cdots$ 后它们均会成为区间众数，因此答案为正无穷。\n\n对于第三组数据，$1,2,3$ 可能成为区间众数。\n\n**【提示】**\n\n开 $10^6$ 个 ``std::deque`` 在空间限制为 1024MB 时不一定会 MLE。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n* Subtask 1（20 pts）：$n\\leq 5$。\n* Subtask 2（20 pts）：$n\\leq 10^3$。\n* Subtask 3（20 pts）：$k=0$。\n* Subtask 4（20 pts）：$k=1$。\n* Subtask 5（20 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$0\\leq k\\leq n $，$1\\leq a_i\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-14」众数 I", "background": "pigstd 是一个可爱的男孩子。他在 NOI2022 中的众数一题定义了 $10^6$ 个 ``std::deque`` 并没有 MLE。", "description": "给定一个长度为 $n$ 的序列 $a$，我们通过以下方式构造序列 $b$：\n\n- 初始时 $b=a$。\n- 依次对 $b$ 进行 $k$ 次操作，每次操作选择任意一个元素并将其**修改**为任意整数。\n\ndXqwq 定义一个序列的**众数**为所有出现次数最大的数。例如 $[1,1,4,5,1,4]$ 的众数为 $1$，而 $[1,14,5,14,19,19,8,10]$ 的众数为 $14,19$。\n\n你需要求出有多少整数可能成为 $b$ 的**众数**。", "inputFormat": "第一行输入两个整数 $n,k$。\n\n第二行输入 $n$ 个整数 $a_i$。", "outputFormat": "输出一个整数，代表可能成为众数的数的数量。\n\n特别地，如果答案为正无穷，输出 ``pigstd``。", "hint": "**【样例解释】**\n\n对于第一组数据，最终 $1,2,3,4,5$ 可能为区间众数。\n\n对于第二组数据，将第一个数换成 $6,7,8,9,\\cdots$ 后它们均会成为区间众数，因此答案为正无穷。\n\n对于第三组数据，$1,2,3$ 可能成为区间众数。\n\n**【提示】**\n\n开 $10^6$ 个 ``std::deque`` 在空间限制为 1024MB 时不一定会 MLE。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n* Subtask 1（20 pts）：$n\\leq 5$。\n* Subtask 2（20 pts）：$n\\leq 10^3$。\n* Subtask 3（20 pts）：$k=0$。\n* Subtask 4（20 pts）：$k=1$。\n* Subtask 5（20 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$0\\leq k\\leq n $，$1\\leq a_i\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P9461", "type": "P", "difficulty": 5, "samples": [["3\n1 2 3", "28"], ["9\n9 9 8 2 4 4 3 5 3", "1912\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛", "链表", "单调栈"], "title": "「EZEC-14」众数 II", "background": "dXqwq 是一个不可爱的男孩子。他在 NOI2022 中的众数一题定义了 $10^6$ 个 ``std::deque`` 并成功 MLE。", "description": "给定一个长度为 $n$ 的序列 $a$，我们通过以下方式构造序列 $b$：\n\n- 初始时 $b$ 为空序列。\n- 对于 $i=1,2,\\cdots,n$，我们依次向 $b$ 的尾部插入 $1,2,\\cdots,a_i$。\n\ndXqwq 定义一个序列的**最小众数**为所有出现次数最大的数的最小值。例如 $[1,1,4,5,1,4]$ 的最小众数为 $1$，而 $[1,14,5,14,19,19,8,10]$ 的最小众数为 $14$。\n\n你需要求出 $b$ 的每个子区间的**最小众数**的和。由于答案可能很大，你只需要输出它对 $998244353$ 取模后的值。", "inputFormat": "第一行输入一个整数 $n$。\n\n第二行输入 $n$ 个整数 $a_i$。", "outputFormat": "输出一个整数，代表 $b$ 的每个子区间的最小众数的和对 $998244353$ 取模的值。", "hint": "**【样例解释】**\n\n在第一个样例中，$b=[1,1,2,1,2,3]$。\n\n有 $15$ 个区间的最小众数为 $1$，$5$ 个区间的最小众数为 $2$，$1$ 个区间的最小众数为 $3$，因此答案为 $15\\times 1+5\\times 2+1\\times 3=28$。\n\n**【提示】**\n\n开 $10^6$ 个 ``std::deque`` 在空间限制为 512MB 时一定会 MLE。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$\\sum a_i\\leq 100$。\n- Subtask 2（20 pts）：$\\sum a_i\\leq 10^3$。 \n- Subtask 3（20 pts）：$\\sum a_i\\leq 10^6$。\n- Subtask 4（10 pts）：$n\\leq 2$。\n- Subtask 5（20 pts）：$n\\leq 10^3$。\n- Subtask 6（10 pts）：$a_i\\leq 2$。\n- Subtask 7（10 pts）：无特殊限制。 \n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$1\\leq a_i\\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-14」众数 II", "background": "dXqwq 是一个不可爱的男孩子。他在 NOI2022 中的众数一题定义了 $10^6$ 个 ``std::deque`` 并成功 MLE。", "description": "给定一个长度为 $n$ 的序列 $a$，我们通过以下方式构造序列 $b$：\n\n- 初始时 $b$ 为空序列。\n- 对于 $i=1,2,\\cdots,n$，我们依次向 $b$ 的尾部插入 $1,2,\\cdots,a_i$。\n\ndXqwq 定义一个序列的**最小众数**为所有出现次数最大的数的最小值。例如 $[1,1,4,5,1,4]$ 的最小众数为 $1$，而 $[1,14,5,14,19,19,8,10]$ 的最小众数为 $14$。\n\n你需要求出 $b$ 的每个子区间的**最小众数**的和。由于答案可能很大，你只需要输出它对 $998244353$ 取模后的值。", "inputFormat": "第一行输入一个整数 $n$。\n\n第二行输入 $n$ 个整数 $a_i$。", "outputFormat": "输出一个整数，代表 $b$ 的每个子区间的最小众数的和对 $998244353$ 取模的值。", "hint": "**【样例解释】**\n\n在第一个样例中，$b=[1,1,2,1,2,3]$。\n\n有 $15$ 个区间的最小众数为 $1$，$5$ 个区间的最小众数为 $2$，$1$ 个区间的最小众数为 $3$，因此答案为 $15\\times 1+5\\times 2+1\\times 3=28$。\n\n**【提示】**\n\n开 $10^6$ 个 ``std::deque`` 在空间限制为 512MB 时一定会 MLE。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$\\sum a_i\\leq 100$。\n- Subtask 2（20 pts）：$\\sum a_i\\leq 10^3$。 \n- Subtask 3（20 pts）：$\\sum a_i\\leq 10^6$。\n- Subtask 4（10 pts）：$n\\leq 2$。\n- Subtask 5（20 pts）：$n\\leq 10^3$。\n- Subtask 6（10 pts）：$a_i\\leq 2$。\n- Subtask 7（10 pts）：无特殊限制。 \n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$1\\leq a_i\\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9462", "type": "P", "difficulty": 6, "samples": [["1 5\n\n1\n\n2\n\n3\n\n4\n\n0", " \n? 1 1\n\n? 1 3\n\n? 2 4\n\n? 3 5\n\n? 4 5\n\n!\n1 2\n2 3\n3 4\n4 5"], ["5 5\n\n1\n\n0\n\n0\n\n2\n\n2", " \n? 1 1\n\n? 1 3\n\n? 2 4\n\n? 3 5\n\n? 4 5\n\n!\n1 3\n2 3\n2 4\n2 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "洛谷原创", "交互题", "Special Judge", "O2优化", "广度优先搜索 BFS", "深度优先搜索 DFS", "洛谷月赛"], "title": "「EZEC-14」终点", "background": "~~出题人怎么还没鸟加这首歌啊。~~\n\n于 2023.8.5 拿下。", "description": "**这是一道交互题。**\n\ndXqwq 有一棵 $n$ 个点的无根树，结点从 $1$ 到 $n$ 编号。您需要通过若干次询问得到这棵树的结构。\n\n您可以选择两个整数 $1\\leq u,v\\leq n$，并输出 `? u v` 进行询问。\n\n对于每次询问，如果 $u,v$ 的路径中点在一个结点上，交互库返回该点的编号，否则返回 ``0``。\n\n请通过不超过 $147154$ 次询问，得到这棵树的结构。\n\n保证树的形态是提前确定的，即**交互库不自适应。**\n\n### 交互方式\n\n输入测试点所在子任务编号 $id$ 和树的大小 $n$ 以开始交互。\n\n交互过程中，您可以进行题目描述中的询问。\n\n对于每次询问，如果你提供的 $u,v$ 不合法或者超出询问次数上限，交互库会返回 ``-1``，否则交互库将会返回一个非负整数，含义见「题目描述」。\n\n当你读取到 ``-1`` 后应立刻退出程序，在此之后交互库的行为未定义。\n\n在您确定答案后，请先输出 `!`，然后接下来 $n-1$ 行依次输出两个整数 ``u[i] v[i]`` 代表树的每条边，最后退出程序。你可以以任意顺序输出这些边。\n\n在您输出一行后，请清空缓冲区：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其它语言请自行查阅文档。", "inputFormat": "见「交互方式」。", "outputFormat": "见「交互方式」。", "hint": "**本题采用捆绑测试。**\n\n-  Subtask 1（10 pts）：$n \\leq 10$，树满足性质 A。\n-  Subtask 2（10 pts）：保证存在一个点度数为 $n-1$。\n-  Subtask 3（10 pts）：保证所有点度数 $\\leq 2$。\n-  Subtask 4（10 pts）：$n \\leq 500$，树满足性质 A。\n-  Subtask 5（20 pts）：$n \\leq 500$。 \n-  Subtask 6（20 pts）：树满足性质 A。\n-  Subtask 7（20 pts）：无特殊限制。\n\n性质 A：对于 $i=2,3,\\cdots,n$ 存在整数 $1\\leq j<i$ 满足有一条边连接 $i,j$。\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 10^4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3u2zy1q5.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-14」终点", "background": "~~出题人怎么还没鸟加这首歌啊。~~\n\n于 2023.8.5 拿下。", "description": "**这是一道交互题。**\n\ndXqwq 有一棵 $n$ 个点的无根树，结点从 $1$ 到 $n$ 编号。您需要通过若干次询问得到这棵树的结构。\n\n您可以选择两个整数 $1\\leq u,v\\leq n$，并输出 `? u v` 进行询问。\n\n对于每次询问，如果 $u,v$ 的路径中点在一个结点上，交互库返回该点的编号，否则返回 ``0``。\n\n请通过不超过 $147154$ 次询问，得到这棵树的结构。\n\n保证树的形态是提前确定的，即**交互库不自适应。**\n\n### 交互方式\n\n输入测试点所在子任务编号 $id$ 和树的大小 $n$ 以开始交互。\n\n交互过程中，您可以进行题目描述中的询问。\n\n对于每次询问，如果你提供的 $u,v$ 不合法或者超出询问次数上限，交互库会返回 ``-1``，否则交互库将会返回一个非负整数，含义见「题目描述」。\n\n当你读取到 ``-1`` 后应立刻退出程序，在此之后交互库的行为未定义。\n\n在您确定答案后，请先输出 `!`，然后接下来 $n-1$ 行依次输出两个整数 ``u[i] v[i]`` 代表树的每条边，最后退出程序。你可以以任意顺序输出这些边。\n\n在您输出一行后，请清空缓冲区：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其它语言请自行查阅文档。", "inputFormat": "见「交互方式」。", "outputFormat": "见「交互方式」。", "hint": "**本题采用捆绑测试。**\n\n-  Subtask 1（10 pts）：$n \\leq 10$，树满足性质 A。\n-  Subtask 2（10 pts）：保证存在一个点度数为 $n-1$。\n-  Subtask 3（10 pts）：保证所有点度数 $\\leq 2$。\n-  Subtask 4（10 pts）：$n \\leq 500$，树满足性质 A。\n-  Subtask 5（20 pts）：$n \\leq 500$。 \n-  Subtask 6（20 pts）：树满足性质 A。\n-  Subtask 7（20 pts）：无特殊限制。\n\n性质 A：对于 $i=2,3,\\cdots,n$ 存在整数 $1\\leq j<i$ 满足有一条边连接 $i,j$。\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 10^4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3u2zy1q5.png)", "locale": "zh-CN"}}}
{"pid": "P9463", "type": "P", "difficulty": 3, "samples": [["5\n2 1 1 2 5\n6\nINFLATION 1\nSET 3 2\nSET 5 2\nINFLATION 4\nSET 6 1\nSET 10 1", "16\n14\n14\n34\n14\n5"], ["3\n1 4 1\n5\nSET 1 1\nSET 3 4\nINFLATION 2\nSET 3 1\nSET 6 4", "6\n6\n12\n8\n6"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Inflation / 通货膨胀", "background": "Day 1 Problem A.\n\n题面译自 [EGOI2023 inflation](https://egoi23.se/assets/tasks/day1/inflation.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "众所周知，瑞典南部的人们经常吃沙拉三明治。沙拉三明治的价格波动很大，分析经济情况的最好方法是每天去同一家沙拉三明治店，把菜单上所有价格都加起来。\n\n一家沙拉三明治店的菜单上有 $N$ 个不同的菜品。第 $i$ 个菜品有价格 $p_i$。\n\n每天，下列事件之一发生：\n\n- `INFLATION x`：所有价格增加 $x$。\n- `SET x y`：每个价格为 $x$ 的菜品的价格更改为 $y$。\n\n你的任务是处理 $Q$ 天，在每天结束后输出所有菜品的总价格。", "inputFormat": "第一行一个整数 $N$，表示菜品数量。\n\n第二行 $N$ 个整数 $p_1,p_2,\\cdots,p_N$。\n\n第三行一个整数 $Q$，表示天数。\n\n接下来 $Q$ 行，每行一个字符串 $s$ 和一至两个整数。\n\n如果 $s$ 是 `INFLATION`，接下来一个整数 $x$。表示当天所有价格增加 $x$。\n\n如果 $s$ 是 `SET`，接下来两个整数 $x,y$。表示每个价格为 $x$ 的菜品的价格更改为 $y$。", "outputFormat": "输出 $Q$ 行，每天结束后所有菜品的总价格。", "hint": "**样例 $1$ 解释**\n\n下图为样例 $1$ 的前两天。注意到第一天结束后价格总和为 $16$，所以输出的第一个整数为 $16$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jnt1pk1u.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 3\\times 10^5$，$1\\le p_i\\le 10^6$，$1\\le Q\\le 10^5$，$1\\le x,y\\le 10^6$。\n\n- 子任务一（$14$ 分）：$N=1$。\n- 子任务二（$28$ 分）：$N,Q,p_i,x,y\\le 100$，依赖于子任务一。\n- 子任务三（$19$ 分）：只有 `INFLATION` 事件。\n- 子任务四（$23$ 分）：只有 `SET` 事件。\n- 子任务五（$16$ 分）：无特殊限制，依赖于子任务二、三、四。\n\n---\n\n**提示**\n\n答案可能不在 $32$ 位整型范围内，如果你使用 C++ 语言，请注意溢出的可能。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Inflation / 通货膨胀", "background": "Day 1 Problem A.\n\n题面译自 [EGOI2023 inflation](https://egoi23.se/assets/tasks/day1/inflation.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "众所周知，瑞典南部的人们经常吃沙拉三明治。沙拉三明治的价格波动很大，分析经济情况的最好方法是每天去同一家沙拉三明治店，把菜单上所有价格都加起来。\n\n一家沙拉三明治店的菜单上有 $N$ 个不同的菜品。第 $i$ 个菜品有价格 $p_i$。\n\n每天，下列事件之一发生：\n\n- `INFLATION x`：所有价格增加 $x$。\n- `SET x y`：每个价格为 $x$ 的菜品的价格更改为 $y$。\n\n你的任务是处理 $Q$ 天，在每天结束后输出所有菜品的总价格。", "inputFormat": "第一行一个整数 $N$，表示菜品数量。\n\n第二行 $N$ 个整数 $p_1,p_2,\\cdots,p_N$。\n\n第三行一个整数 $Q$，表示天数。\n\n接下来 $Q$ 行，每行一个字符串 $s$ 和一至两个整数。\n\n如果 $s$ 是 `INFLATION`，接下来一个整数 $x$。表示当天所有价格增加 $x$。\n\n如果 $s$ 是 `SET`，接下来两个整数 $x,y$。表示每个价格为 $x$ 的菜品的价格更改为 $y$。", "outputFormat": "输出 $Q$ 行，每天结束后所有菜品的总价格。", "hint": "**样例 $1$ 解释**\n\n下图为样例 $1$ 的前两天。注意到第一天结束后价格总和为 $16$，所以输出的第一个整数为 $16$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jnt1pk1u.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 3\\times 10^5$，$1\\le p_i\\le 10^6$，$1\\le Q\\le 10^5$，$1\\le x,y\\le 10^6$。\n\n- 子任务一（$14$ 分）：$N=1$。\n- 子任务二（$28$ 分）：$N,Q,p_i,x,y\\le 100$，依赖于子任务一。\n- 子任务三（$19$ 分）：只有 `INFLATION` 事件。\n- 子任务四（$23$ 分）：只有 `SET` 事件。\n- 子任务五（$16$ 分）：无特殊限制，依赖于子任务二、三、四。\n\n---\n\n**提示**\n\n答案可能不在 $32$ 位整型范围内，如果你使用 C++ 语言，请注意溢出的可能。", "locale": "zh-CN"}}}
{"pid": "P9464", "type": "P", "difficulty": 4, "samples": [["3 4\n0 1\n2 1\n1 0\n2 1", "1 1 2"], ["3 7\n0 1\n0 2\n2 0\n0 1\n1 0\n2 0\n0 2", "2 2 3"], ["6 10\n2 5\n3 0\n4 2\n0 1\n4 3\n2 4\n0 3\n0 2\n5 2\n5 0", "5 0 1 1 1 2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Padel Prize Pursuit / 追梦笼式网球", "background": "Day 1 Problem B.\n\n题面译自 [EGOI2023 ppp](https://egoi23.se/assets/tasks/day1/ppp.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "有 $N$ 个编号为 $0$ 到 $N-1$ 的选手参加一场 $M$ 天的笼式网球锦标赛。每天恰好进行一次比赛。在锦标赛中共颁发 $M$ 块奖牌，每场比赛颁发一块新奖牌。在第 $i$ 天的比赛中（$0\\le i\\le M-1$），两名编号分别为 $x_i$ 和 $y_i$ 的选手参加。比赛中发生如下事件：\n\n- 选手 $x_i$ 打败选手 $y_i$。\n- 一个新的奖牌授予给获胜者 $x_i$。\n- 失败者所有现有的奖牌都授予给获胜者。\n\n在第 $M$ 天（最后一场比赛结束后一天）举行颁奖典礼。在颁奖典礼上，所有奖牌被收集起来，并授予给持有该奖牌时间最长的选手。具体地，在第 $M$ 天，奖牌 $i$ 授予给持有奖牌 $i$ 最多个晚上的选手（不必须连续持有）。如果两个或更多选手持有一个奖牌同样多晚上，奖牌授予给其中编号最小的选手。\n\n你的任务是求出颁奖典礼中，每位选手被授予多少奖牌。", "inputFormat": "第一行两个整数 $N,M$，表示选手数和比赛数。\n\n接下来 $M$ 行，每行两个整数 $x_i,y_i$，表示第 $i$ 天的比赛中，选手 $x_i$ 打败选手 $y_i$。", "outputFormat": "一行 $N$ 个整数，第 $k$ 个整数表示颁奖典礼中，第 $k$ 位选手被授予的奖牌数。", "hint": "**样例 $1$ 解释**\n\n下图展示了样例 $1$ 中锦标赛期间奖牌的归属。当选手 $1$ 在第三天被打败时，她的所有奖牌都被授予给选手 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jex0m4dg.png)\n\n---\n\n**样例 $2$ 解释**\n\n如下图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nyujve0b.png)\n\n在颁奖典礼中，选手 $0$ 被授予奖牌 $5$ 和 $6$，选手 $1$ 被授予奖牌 $3$ 和 $4$，选手 $2$ 被授予奖牌 $0,1,2$。\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 2\\times 10^5$，$1\\le M\\le 2\\times 10^5$，$0\\le x_i,y_i\\le N-1$ 且 $x_i\\ne y_i$。\n\n- 子任务一（$12$ 分）：$N=2$。\n- 子任务二（$16$ 分）：$N,M\\le 2\\times 10^3$。\n- 子任务三（$15$ 分）：第 $i$ 场比赛的获胜者参加了第 $i+1$ 场比赛，依赖子任务一。\n- 子任务四（$20$ 分）：在第 $i$ 场比赛时，$x_i$ 有至少和 $y_i$ 一样多的奖牌。\n- 子任务五（$22$ 分）：一旦一名选手被打败，她永远不会再次参赛。\n- 子任务六（$15$ 分）：无特殊限制，依赖子任务二、三、四、五。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Padel Prize Pursuit / 追梦笼式网球", "background": "Day 1 Problem B.\n\n题面译自 [EGOI2023 ppp](https://egoi23.se/assets/tasks/day1/ppp.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "有 $N$ 个编号为 $0$ 到 $N-1$ 的选手参加一场 $M$ 天的笼式网球锦标赛。每天恰好进行一次比赛。在锦标赛中共颁发 $M$ 块奖牌，每场比赛颁发一块新奖牌。在第 $i$ 天的比赛中（$0\\le i\\le M-1$），两名编号分别为 $x_i$ 和 $y_i$ 的选手参加。比赛中发生如下事件：\n\n- 选手 $x_i$ 打败选手 $y_i$。\n- 一个新的奖牌授予给获胜者 $x_i$。\n- 失败者所有现有的奖牌都授予给获胜者。\n\n在第 $M$ 天（最后一场比赛结束后一天）举行颁奖典礼。在颁奖典礼上，所有奖牌被收集起来，并授予给持有该奖牌时间最长的选手。具体地，在第 $M$ 天，奖牌 $i$ 授予给持有奖牌 $i$ 最多个晚上的选手（不必须连续持有）。如果两个或更多选手持有一个奖牌同样多晚上，奖牌授予给其中编号最小的选手。\n\n你的任务是求出颁奖典礼中，每位选手被授予多少奖牌。", "inputFormat": "第一行两个整数 $N,M$，表示选手数和比赛数。\n\n接下来 $M$ 行，每行两个整数 $x_i,y_i$，表示第 $i$ 天的比赛中，选手 $x_i$ 打败选手 $y_i$。", "outputFormat": "一行 $N$ 个整数，第 $k$ 个整数表示颁奖典礼中，第 $k$ 位选手被授予的奖牌数。", "hint": "**样例 $1$ 解释**\n\n下图展示了样例 $1$ 中锦标赛期间奖牌的归属。当选手 $1$ 在第三天被打败时，她的所有奖牌都被授予给选手 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jex0m4dg.png)\n\n---\n\n**样例 $2$ 解释**\n\n如下图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nyujve0b.png)\n\n在颁奖典礼中，选手 $0$ 被授予奖牌 $5$ 和 $6$，选手 $1$ 被授予奖牌 $3$ 和 $4$，选手 $2$ 被授予奖牌 $0,1,2$。\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 2\\times 10^5$，$1\\le M\\le 2\\times 10^5$，$0\\le x_i,y_i\\le N-1$ 且 $x_i\\ne y_i$。\n\n- 子任务一（$12$ 分）：$N=2$。\n- 子任务二（$16$ 分）：$N,M\\le 2\\times 10^3$。\n- 子任务三（$15$ 分）：第 $i$ 场比赛的获胜者参加了第 $i+1$ 场比赛，依赖子任务一。\n- 子任务四（$20$ 分）：在第 $i$ 场比赛时，$x_i$ 有至少和 $y_i$ 一样多的奖牌。\n- 子任务五（$22$ 分）：一旦一名选手被打败，她永远不会再次参赛。\n- 子任务六（$15$ 分）：无特殊限制，依赖子任务二、三、四、五。", "locale": "zh-CN"}}}
{"pid": "P9465", "type": "P", "difficulty": 6, "samples": [["4 5\n\n0 2\n\n3 4", "\n? vv>>>>>><^^^^^>\n\n? >>>>>>>>vvvvvvvvvv\n\n! 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "交互题", "Special Judge", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Find the Box / 找箱子", "background": "Day 1 Problem C.\n\n题面译自 [EGOI2023 findthebox](https://egoi23.se/assets/tasks/day1/findthebox.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "**本题是一道 I/O 式交互题。**\n\n玛伊是一名机器人研究员，在隆德大学工作。她了解到在大学的地下室里有一个价值连城的宝藏。宝藏就在地下深处一个空房间的箱子里。不幸的是，玛伊不能直接去找那个箱子。地下室里非常黑，且带着灯去会引起怀疑。她找到宝藏的唯一办法就是遥控住在地窖里的吸尘器机器人。\n\n地下室是一个 $H\\times W$ 的网格，其中行从 $0$ 到 $H-1$（从上到下）编号，列从 $0$ 到 $W-1$（从左到右）编号，也就是说左上角格子是 $(0,0)$，右下角格子是 $(H-1,W-1)$。装宝藏的箱子在与 $(0,0)$ 不同的某个未知的格子中。每天晚上，吸尘器机器人从左上角格子开始在地下室中移动。\n\n每天晚上，玛伊给机器人一系列指令以指导机器人移动，指令是一个包含字符 `<`、`>`、`^` 和 `v` 的字符串。形式化地，如果机器人在格子 $(r,c)$ 且四周未被遮挡，`<` 使得机器人向左移动到 $(r,c-1)$，`>` 使得机器人向右移动到 $(r,c+1)$，`^` 使得机器人向上移动到 $(r-1,c)$，`v` 使得机器人向下移动到 $(r+1,c)$。\n\n地下室的墙十分坚硬，因此如果机器人试图移动到格子外，什么都不会发生。箱子也十分坚硬，并且不能被推动。在每晚结束时，机器人会报告它的位置，并回到左上角格子。\n\n时间就是金钱，因此玛伊需要用尽量少的晚上找到箱子。", "inputFormat": "", "outputFormat": "本题是一道 I/O 式交互题。\n\n- 在开始时，你的程序应当输入一行两个整数 $H,W$，表示格子的高度和宽度。\n- 之后，你的程序与交互库交互。在每一轮交互过程中，你应当输出一个问号 `?`，其后是一个非空字符串 $s$ 包含字符 `<`、`>`、`^` 和 `v`。字符串的长度必须至多为 $2\\times10^4$。然后，你的程序输入两个整数 $r,c$（$0\\le r\\le H-1$，$0\\le c\\le W-1$），表示执行完指令后机器人的位置。注意每次询问后，机器人都会回到 $(0,0)$。\n- 当你知道箱子的位置时，输出 `!` 和两个整数 $r_b,c_b$（$0\\le r_b\\le H-1$，$0\\le c_b\\le W-1$），表示箱子的坐标。在这之后，你的程序必须不再进行任何询问并退出。这个最终的输出在计算你的得分时不被计入询问次数。\n\n请确保在每次询问后刷新输出流，否则你的程序可能被判定为 TLE。在 Python 中，`print()` 自动刷新输出流。在 C++ 中，`cout << endl;` 在输出换行后也会刷新输出流；如果使用 `printf`，请使用 `fflush(stdout)`。\n\n交互库不自适应，意味着箱子的位置在交互开始前被确定。", "hint": "**样例解释**\n\n考虑样例。格子有高度 $H=4$ 和宽度 $W=5$，箱子在 $(r,c)=(2,3)$。下图展示了机器人在收到指令 `? vv>>>>>><^^^^^>` 后的路径，机器人最终停在 $(r,c)=(0,2)$。在第二次询问前，机器人回到左上角 $(0,0)$。程序询问 `? >>>>>>>>vvvvvvvvvv`，机器人最终停在右下角 $(r,c)=(3,4)$。此时，程序决定猜答案，输出了 `! 2 3`，惊喜地发现，这恰好是箱子的正确位置！\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f540broe.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le H,W\\le 50$，箱子不会位于 $(0,0)$ 处（这意味着 $H+W\\ge 3$），每次询问最多包含 $2\\times 10^4$ 个指令，你可以询问至多 $2500$ 次（给出最终答案不被计入询问）。\n\n你的程序会被测试于一定数量的测试点。如果你的程序在*任何*一个测试点失败（例如：给出错误的箱子坐标（WA）、程序崩了（RE）、超出时间限制（TLE）等），你会得到 $0$ 分和适当的评测结果。\n\n如果你的程序在*所有*测试点都成功找到了箱子，你会得到 AC（**译者注：在洛谷，非满分即为 WA**），分数由下式决定：\n\n$$\n\\textrm{score}=\\min\\left(\\frac{100\\sqrt{2}}{\\sqrt{Q}},100\\right)\\textrm{ 分}\n$$\n\n其中 $Q$ 是所有测试点中询问次数的最大值。输出最终答案不被计入询问。分数将被四舍五入到最接近的整数。\n\n具体地，要得到 $100$ 分，你的程序必须在 $Q=2$ 次询问内解决所有测试点。下表展示了一些 $Q$ 的值和其得分。\n\n|$Q$|$2$|$3$|$4$|$5$|$\\cdots$|$20$|$\\cdots$|$50$|$\\cdots$|$2500$|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|分数|$100$|$82$|$71$|$63$|$\\cdots$|$32$|$\\cdots$|$20$|$\\cdots$|$3$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Find the Box / 找箱子", "background": "Day 1 Problem C.\n\n题面译自 [EGOI2023 findthebox](https://egoi23.se/assets/tasks/day1/findthebox.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "**本题是一道 I/O 式交互题。**\n\n玛伊是一名机器人研究员，在隆德大学工作。她了解到在大学的地下室里有一个价值连城的宝藏。宝藏就在地下深处一个空房间的箱子里。不幸的是，玛伊不能直接去找那个箱子。地下室里非常黑，且带着灯去会引起怀疑。她找到宝藏的唯一办法就是遥控住在地窖里的吸尘器机器人。\n\n地下室是一个 $H\\times W$ 的网格，其中行从 $0$ 到 $H-1$（从上到下）编号，列从 $0$ 到 $W-1$（从左到右）编号，也就是说左上角格子是 $(0,0)$，右下角格子是 $(H-1,W-1)$。装宝藏的箱子在与 $(0,0)$ 不同的某个未知的格子中。每天晚上，吸尘器机器人从左上角格子开始在地下室中移动。\n\n每天晚上，玛伊给机器人一系列指令以指导机器人移动，指令是一个包含字符 `<`、`>`、`^` 和 `v` 的字符串。形式化地，如果机器人在格子 $(r,c)$ 且四周未被遮挡，`<` 使得机器人向左移动到 $(r,c-1)$，`>` 使得机器人向右移动到 $(r,c+1)$，`^` 使得机器人向上移动到 $(r-1,c)$，`v` 使得机器人向下移动到 $(r+1,c)$。\n\n地下室的墙十分坚硬，因此如果机器人试图移动到格子外，什么都不会发生。箱子也十分坚硬，并且不能被推动。在每晚结束时，机器人会报告它的位置，并回到左上角格子。\n\n时间就是金钱，因此玛伊需要用尽量少的晚上找到箱子。", "inputFormat": "", "outputFormat": "本题是一道 I/O 式交互题。\n\n- 在开始时，你的程序应当输入一行两个整数 $H,W$，表示格子的高度和宽度。\n- 之后，你的程序与交互库交互。在每一轮交互过程中，你应当输出一个问号 `?`，其后是一个非空字符串 $s$ 包含字符 `<`、`>`、`^` 和 `v`。字符串的长度必须至多为 $2\\times10^4$。然后，你的程序输入两个整数 $r,c$（$0\\le r\\le H-1$，$0\\le c\\le W-1$），表示执行完指令后机器人的位置。注意每次询问后，机器人都会回到 $(0,0)$。\n- 当你知道箱子的位置时，输出 `!` 和两个整数 $r_b,c_b$（$0\\le r_b\\le H-1$，$0\\le c_b\\le W-1$），表示箱子的坐标。在这之后，你的程序必须不再进行任何询问并退出。这个最终的输出在计算你的得分时不被计入询问次数。\n\n请确保在每次询问后刷新输出流，否则你的程序可能被判定为 TLE。在 Python 中，`print()` 自动刷新输出流。在 C++ 中，`cout << endl;` 在输出换行后也会刷新输出流；如果使用 `printf`，请使用 `fflush(stdout)`。\n\n交互库不自适应，意味着箱子的位置在交互开始前被确定。", "hint": "**样例解释**\n\n考虑样例。格子有高度 $H=4$ 和宽度 $W=5$，箱子在 $(r,c)=(2,3)$。下图展示了机器人在收到指令 `? vv>>>>>><^^^^^>` 后的路径，机器人最终停在 $(r,c)=(0,2)$。在第二次询问前，机器人回到左上角 $(0,0)$。程序询问 `? >>>>>>>>vvvvvvvvvv`，机器人最终停在右下角 $(r,c)=(3,4)$。此时，程序决定猜答案，输出了 `! 2 3`，惊喜地发现，这恰好是箱子的正确位置！\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f540broe.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le H,W\\le 50$，箱子不会位于 $(0,0)$ 处（这意味着 $H+W\\ge 3$），每次询问最多包含 $2\\times 10^4$ 个指令，你可以询问至多 $2500$ 次（给出最终答案不被计入询问）。\n\n你的程序会被测试于一定数量的测试点。如果你的程序在*任何*一个测试点失败（例如：给出错误的箱子坐标（WA）、程序崩了（RE）、超出时间限制（TLE）等），你会得到 $0$ 分和适当的评测结果。\n\n如果你的程序在*所有*测试点都成功找到了箱子，你会得到 AC（**译者注：在洛谷，非满分即为 WA**），分数由下式决定：\n\n$$\n\\textrm{score}=\\min\\left(\\frac{100\\sqrt{2}}{\\sqrt{Q}},100\\right)\\textrm{ 分}\n$$\n\n其中 $Q$ 是所有测试点中询问次数的最大值。输出最终答案不被计入询问。分数将被四舍五入到最接近的整数。\n\n具体地，要得到 $100$ 分，你的程序必须在 $Q=2$ 次询问内解决所有测试点。下表展示了一些 $Q$ 的值和其得分。\n\n|$Q$|$2$|$3$|$4$|$5$|$\\cdots$|$20$|$\\cdots$|$50$|$\\cdots$|$2500$|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|分数|$100$|$82$|$71$|$63$|$\\cdots$|$32$|$\\cdots$|$20$|$\\cdots$|$3$|", "locale": "zh-CN"}}}
{"pid": "P9466", "type": "P", "difficulty": 6, "samples": [["2 1\n1\n1", "2\n0 1 0\n0 1 1"], ["4 1\n0\n0 1\n0 0 1\n1\n1 1\n1 1 1", "NO"], ["6 6\n5\n4 4\n1 1 1\n1 1 1 3\n1 1 1 5 3\n2\n3 2\n6 2 3\n3 2 5 3\n3 2 4 3 4", "8\n0 1 1\n0 2 3\n1 2 2\n0 3 6\n2 4 5\n3 4 3\n3 5 1\n4 5 4"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "Special Judge", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Bikes vs Cars / 骑车与汽车", "background": "Day 1 Problem D.\n\n题面译自 [EGOI2023 bikesvscars](https://egoi23.se/assets/tasks/day1/bikesvscars.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "在隆德，骑自行车是一种常见的交通方式，但有时狭窄的街道难以容纳汽车和自行车通行。为了改善这一状况，当地政$ $府希望完全重新设计当地的街道网络。\n\n隆德共有 $N$ 个关键位置（编号从 $0$ 到 $N-1$），人们常常在其间通行。人们通过一条路径在两地之间通行，其中路径是一系列的街道，从第一个地点到另一个。一种交通工具（车或自行车）可以在一条路径上通行，当且仅当经过的所有街道都至少与它一样宽。每个新修的街道连接关键位置其中之二，有着宽度 $W$。这个宽度可以被任意分割为自行车道和机动车道。在隆德，一些工程师最近发明了宽度为 $0$ 的车和自行车（它们可以在宽度为 $0$ 的道路通行）。\n\n这些工程师测量了城市中车和自行车的宽度。对于每一对关键位置，他们知道其间通行的最宽的车和最宽的自行车的宽度，但政$ $府还要求更宽的车和自行车不能在其间通行。\n\n形式化地，对于任意 $i,j$（$0\\le i < j\\le N-1$），你都知道两个整数 $C_{i,j}$ 和 $B_{i,j}$。你的任务是构造一个街道网络连接这 $N$ 个位置。街道的宽度均为 $W$，但对于任意街道 $s$，你可以选择它的自行车道宽度 $b_s$ 和机动车道宽度 $W-b_s$。这个网络必须满足以下要求：\n\n- 必须可以在任意两个位置间通行。这可能需要一辆宽度为 $0$ 的自行车或车。\n- 对于每一对位置 $i,j$（其中 $i < j$），可以只借助宽度至少为 $C_{i,j}$ 的机动车道，在 $i,j$ 间通行。同时，$C_{i,j}$ 是最大的有这一性质的数。这意味着，对于所有 $i,j$ 间的路径，必须满足至少一条街道的机动车道宽度不超过 $C_{i,j}$。\n- 对于每一对位置 $i,j$（其中 $i < j$），可以只借助宽度至少为 $B_{i,j}$ 的自行车道，在 $i,j$ 间通行。同时，$B_{i,j}$ 是最大的有这一性质的数。\n\n你能帮隆德政$ $府设计一个这样的街道网络吗？因为预算有限，你可以修建至多 $2023$ 条街道。你可以在同一对关键位置间修建多条街道，但你不能修建一条连接自己和自己的街道。所有街道都是双向的。", "inputFormat": "第一行两个整数 $N,W$，表示关键位置数量和街道宽度。\n\n接下来 $N-1$ 行包含 $C_{i,j}$。其中的第 $j$ 行包含所有满足 $i < j$ 的 $C_{i,j}$。因此第一行只会包含 $C_{0,1}$，第二行包含 $C_{0,2}$ 和 $C_{1,2}$，第三行包含 $C_{0,3},C_{1,3},C_{2,3}$，以此类推。\n\n接下来 $N-1$ 行包含 $B_{i,j}$，格式同 $C_{i,j}$。", "outputFormat": "如果不存在符合要求的街道网络，输出 `NO`。\n\n否则，第一行一个整数 $M$，表示你修建的街道数。\n\n接下来 $M$ 行，每行三个整数 $u,v,b$，表示一条自行车道宽度为 $b$（机动车道宽度为 $W-b$）的连接 $u,v$ 的街道。\n\n你可以使用至多 $2023$ 条街道。你输出的街道必须满足 $0\\le b\\le W$，$0\\le u,v\\le N-1$ 且 $u\\ne v$。你可以在同一对关键位置间使用多条街道（可以有不同的自行车道宽度）。\n\n如果有多解，你可以输出任意一个。", "hint": "**样例 $1$ 解释**\n\n在样例 $1$ 中，街道的宽度为 $1$，我们需要宽度至少为 $1$ 的自行车道和机动车道各一条连接 $0,1$。解决方案是用两条分开的街道连接，一条自行车道宽度为 $1$，另一条机动车道宽度为 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9cbqwrvu.png)\n\n---\n\n**样例 $2$ 解释**\n\n在样例 $2$ 中，街道的宽度依然是 $1$，需要有一条宽度为 $1$ 的自行车道连接任意两个关键位置，且有宽度为 $1$ 的机动车道连接 $1,2$ 和 $2,3$。这与 $C_{1,3}=0$ 矛盾，不应该有宽度为 $1$ 的从 $1$ 到 $3$ 的机动车道，而我们可以合并两条先前提到的路径组成这样一条路径。因此不可能构造出一个符合要求的街道网络。\n\n---\n\n**样例 $3$ 解释**\n\n在样例 $3$ 中，下图的街道网络满足所有要求。例如，应该有一条宽度为 $1=C_{0,5}$ 的机动车道在 $0,5$ 之间（路径 $0\\to 2\\to 4\\to 5$），一条宽度为 $3=B_{0,5}$ 的自行车道在 $0,5$ 之间（路径 $0\\to 3\\to 4\\to 5$）。同时，可以验证，不存在路径有着更大的宽度下限。注意样例 $3$ 可能有很多其他解法。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p8dwhz4s.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 500$，$1\\le W\\le 10^6$，$0\\le C_{i,j},B_{i,j}\\le W$。\n\n- 子任务一（$10$ 分）：所有 $C_{i,j}$ 都相同，所有 $B_{i,j}$ 都相同，$N\\le 40$。\n- 子任务二（$5$ 分）：所有 $C_{i,j}$ 都相同，所有 $B_{i,j}$ 都相同。\n- 子任务三（$17$ 分）：$N\\le 40$。\n- 子任务四（$18$ 分）：$W=1$。\n- 子任务五（$19$ 分）：所有 $B_{i,j}$ 都相同。\n- 子任务六（$31$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Bikes vs Cars / 骑车与汽车", "background": "Day 1 Problem D.\n\n题面译自 [EGOI2023 bikesvscars](https://egoi23.se/assets/tasks/day1/bikesvscars.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "在隆德，骑自行车是一种常见的交通方式，但有时狭窄的街道难以容纳汽车和自行车通行。为了改善这一状况，当地政$ $府希望完全重新设计当地的街道网络。\n\n隆德共有 $N$ 个关键位置（编号从 $0$ 到 $N-1$），人们常常在其间通行。人们通过一条路径在两地之间通行，其中路径是一系列的街道，从第一个地点到另一个。一种交通工具（车或自行车）可以在一条路径上通行，当且仅当经过的所有街道都至少与它一样宽。每个新修的街道连接关键位置其中之二，有着宽度 $W$。这个宽度可以被任意分割为自行车道和机动车道。在隆德，一些工程师最近发明了宽度为 $0$ 的车和自行车（它们可以在宽度为 $0$ 的道路通行）。\n\n这些工程师测量了城市中车和自行车的宽度。对于每一对关键位置，他们知道其间通行的最宽的车和最宽的自行车的宽度，但政$ $府还要求更宽的车和自行车不能在其间通行。\n\n形式化地，对于任意 $i,j$（$0\\le i < j\\le N-1$），你都知道两个整数 $C_{i,j}$ 和 $B_{i,j}$。你的任务是构造一个街道网络连接这 $N$ 个位置。街道的宽度均为 $W$，但对于任意街道 $s$，你可以选择它的自行车道宽度 $b_s$ 和机动车道宽度 $W-b_s$。这个网络必须满足以下要求：\n\n- 必须可以在任意两个位置间通行。这可能需要一辆宽度为 $0$ 的自行车或车。\n- 对于每一对位置 $i,j$（其中 $i < j$），可以只借助宽度至少为 $C_{i,j}$ 的机动车道，在 $i,j$ 间通行。同时，$C_{i,j}$ 是最大的有这一性质的数。这意味着，对于所有 $i,j$ 间的路径，必须满足至少一条街道的机动车道宽度不超过 $C_{i,j}$。\n- 对于每一对位置 $i,j$（其中 $i < j$），可以只借助宽度至少为 $B_{i,j}$ 的自行车道，在 $i,j$ 间通行。同时，$B_{i,j}$ 是最大的有这一性质的数。\n\n你能帮隆德政$ $府设计一个这样的街道网络吗？因为预算有限，你可以修建至多 $2023$ 条街道。你可以在同一对关键位置间修建多条街道，但你不能修建一条连接自己和自己的街道。所有街道都是双向的。", "inputFormat": "第一行两个整数 $N,W$，表示关键位置数量和街道宽度。\n\n接下来 $N-1$ 行包含 $C_{i,j}$。其中的第 $j$ 行包含所有满足 $i < j$ 的 $C_{i,j}$。因此第一行只会包含 $C_{0,1}$，第二行包含 $C_{0,2}$ 和 $C_{1,2}$，第三行包含 $C_{0,3},C_{1,3},C_{2,3}$，以此类推。\n\n接下来 $N-1$ 行包含 $B_{i,j}$，格式同 $C_{i,j}$。", "outputFormat": "如果不存在符合要求的街道网络，输出 `NO`。\n\n否则，第一行一个整数 $M$，表示你修建的街道数。\n\n接下来 $M$ 行，每行三个整数 $u,v,b$，表示一条自行车道宽度为 $b$（机动车道宽度为 $W-b$）的连接 $u,v$ 的街道。\n\n你可以使用至多 $2023$ 条街道。你输出的街道必须满足 $0\\le b\\le W$，$0\\le u,v\\le N-1$ 且 $u\\ne v$。你可以在同一对关键位置间使用多条街道（可以有不同的自行车道宽度）。\n\n如果有多解，你可以输出任意一个。", "hint": "**样例 $1$ 解释**\n\n在样例 $1$ 中，街道的宽度为 $1$，我们需要宽度至少为 $1$ 的自行车道和机动车道各一条连接 $0,1$。解决方案是用两条分开的街道连接，一条自行车道宽度为 $1$，另一条机动车道宽度为 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9cbqwrvu.png)\n\n---\n\n**样例 $2$ 解释**\n\n在样例 $2$ 中，街道的宽度依然是 $1$，需要有一条宽度为 $1$ 的自行车道连接任意两个关键位置，且有宽度为 $1$ 的机动车道连接 $1,2$ 和 $2,3$。这与 $C_{1,3}=0$ 矛盾，不应该有宽度为 $1$ 的从 $1$ 到 $3$ 的机动车道，而我们可以合并两条先前提到的路径组成这样一条路径。因此不可能构造出一个符合要求的街道网络。\n\n---\n\n**样例 $3$ 解释**\n\n在样例 $3$ 中，下图的街道网络满足所有要求。例如，应该有一条宽度为 $1=C_{0,5}$ 的机动车道在 $0,5$ 之间（路径 $0\\to 2\\to 4\\to 5$），一条宽度为 $3=B_{0,5}$ 的自行车道在 $0,5$ 之间（路径 $0\\to 3\\to 4\\to 5$）。同时，可以验证，不存在路径有着更大的宽度下限。注意样例 $3$ 可能有很多其他解法。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p8dwhz4s.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 500$，$1\\le W\\le 10^6$，$0\\le C_{i,j},B_{i,j}\\le W$。\n\n- 子任务一（$10$ 分）：所有 $C_{i,j}$ 都相同，所有 $B_{i,j}$ 都相同，$N\\le 40$。\n- 子任务二（$5$ 分）：所有 $C_{i,j}$ 都相同，所有 $B_{i,j}$ 都相同。\n- 子任务三（$17$ 分）：$N\\le 40$。\n- 子任务四（$18$ 分）：$W=1$。\n- 子任务五（$19$ 分）：所有 $B_{i,j}$ 都相同。\n- 子任务六（$31$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9467", "type": "P", "difficulty": 3, "samples": [["6\n0\n1 0\n2 1 0\n3 2 1 0\n4 3 2 1 0", "4 2 5 3 1 0"], ["5\n0\n0 1\n0 1 2\n0 1 2 3", "2 0 4 1 3"], ["4\n0\n1 0\n0 2 1", "3 0 1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2023", "Special Judge", "O2优化", "构造", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Carnival General / 狂欢节总管", "background": "Day 2 Problem A.\n\n题面译自 [EGOI2023 carnival](https://egoi23.se/assets/tasks/day2/carnival.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "每四年，隆德的学生都会聚到一起并举办隆德狂欢节。几天之内，公园内会挤满帐篷，并举办各种各样的庆祝活动。负责组织这一切的人被称为狂欢节总管。\n\n共有 $N$ 个狂欢节，每个狂欢节都有不同的总管。这些总管按时间顺序被编号为 $0$ 到 $N-1$。每个总管 $i$ 都给出了他们对于前任总管的评价，他们公布了总管 $0,1,\\cdots,i-1$ 从好到坏的排名。\n\n下一届隆德狂欢节将于 2026 年举办。在此期间，所有曾经的狂欢节总管聚在一起拍了张合照。然而，如果总管 $i$ 和 $j$（其中 $i < j$）最终紧挨着对方，且 $i$ 在 $j$ 给出的排名中**严格**位于后一半，那么就会很尴尬。\n\n例如：\n\n- 如果总管 $4$ 给出的排名是 `3 2 1 0`，那么 $4$ 可以紧挨着 $3$ 或者 $2$ 站，但不能紧挨着 $1$ 或者 $0$。\n- 如果总管 $5$ 给出的排名是 `4 3 2 1 0`，那么 $5$ 可以紧挨着 $4,3,2$ 站，但不能紧挨着 $1$ 或者 $0$。\n\n下图为样例 $1$。其中，总管 $5$ 紧挨着总管 $2$ 和 $3$，且总管 $4$ 只紧挨着总管 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/398d2tvl.png)\n\n你已知所有总管给出的排名。你的任务是将所有总管 $0,1,\\cdots,N-1$ 安排到一排，使得如果 $i$ 和 $j$ 紧挨着（其中 $i < j$），那么 $i$ **并非**严格位于 $j$ 给出排名的后一半。", "inputFormat": "第一行一个整数 $N$，表示总管总数。\n\n接下来 $N-1$ 行包含所有排名。其中的第一行是总管 $1$ 给出的排名，第二行是总管 $2$ 给出的排名，以此类推直到总管 $N-1$。总管 $0$ 不在输入中，因为总管 $0$ 没有任何前任总管可供排名。\n\n总管 $i$ 的排名是一个长度为 $i$ 的列表 $p_{i,0},p_{i,1},\\cdots,p_{i,i-1}$，其中每个整数从 $0$ 到 $i-1$ 且恰好出现一次。具体地，根据总管 $i$ 的排名，$p_{i,0}$ 是最好的总管，$p_{i,i-1}$ 是最差的总管。", "outputFormat": "输出一列整数，一个整数 $0,1,\\cdots,N-1$ 的排列，使得对于每对相邻整数，不存在一个在另一个排名的后一半。\n\n可以证明一定有解。如果有多解，你可以输出任意一个。", "hint": "**样例 $1$ 解释**\n\n样例 $1$ 符合子任务一的要求。在样例中，总管 $2$ 和 $3$ 都不能紧挨着总管 $0$ 站，总管 $4$ 和 $5$ 都不能紧挨着总管 $0$ 和 $1$ 站。样例输出见上图。\n\n---\n\n**样例 $2$ 解释**\n\n样例 $2$ 符合子任务二的要求。在样例中，总管 $2$ 不能紧挨着总管 $1$ 站，总管 $3$ 不能紧挨着总管 $2$ 站，总管 $4$ 不能紧挨着总管 $3$ 和 $2$ 站。\n\n---\n\n**样例 $3$ 解释**\n\n样例 $3$ 符合子任务三的要求。在样例中，只有 $(1,3)$ 和 $(0,2)$ 两对总管不能彼此紧挨着站。因此，如果安排为 `3 0 1 2`，并不会有冲突。另一种可能的答案是 `0 1 2 3`。\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 10^3$，$0\\le p_{i,0},p_{i,1},\\cdots,p_{i,i-1}\\le i-1$。\n \n- 子任务一（$11$ 分）：总管 $i$ 给出的排名为 $i-1,i-2,\\cdots,0$。\n- 子任务二（$23$ 分）：总管 $i$ 给出的排名为 $0,1,\\cdots,i-1$。\n- 子任务三（$29$ 分）：$N\\le 8$。\n- 子任务四（$37$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Carnival General / 狂欢节总管", "background": "Day 2 Problem A.\n\n题面译自 [EGOI2023 carnival](https://egoi23.se/assets/tasks/day2/carnival.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "每四年，隆德的学生都会聚到一起并举办隆德狂欢节。几天之内，公园内会挤满帐篷，并举办各种各样的庆祝活动。负责组织这一切的人被称为狂欢节总管。\n\n共有 $N$ 个狂欢节，每个狂欢节都有不同的总管。这些总管按时间顺序被编号为 $0$ 到 $N-1$。每个总管 $i$ 都给出了他们对于前任总管的评价，他们公布了总管 $0,1,\\cdots,i-1$ 从好到坏的排名。\n\n下一届隆德狂欢节将于 2026 年举办。在此期间，所有曾经的狂欢节总管聚在一起拍了张合照。然而，如果总管 $i$ 和 $j$（其中 $i < j$）最终紧挨着对方，且 $i$ 在 $j$ 给出的排名中**严格**位于后一半，那么就会很尴尬。\n\n例如：\n\n- 如果总管 $4$ 给出的排名是 `3 2 1 0`，那么 $4$ 可以紧挨着 $3$ 或者 $2$ 站，但不能紧挨着 $1$ 或者 $0$。\n- 如果总管 $5$ 给出的排名是 `4 3 2 1 0`，那么 $5$ 可以紧挨着 $4,3,2$ 站，但不能紧挨着 $1$ 或者 $0$。\n\n下图为样例 $1$。其中，总管 $5$ 紧挨着总管 $2$ 和 $3$，且总管 $4$ 只紧挨着总管 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/398d2tvl.png)\n\n你已知所有总管给出的排名。你的任务是将所有总管 $0,1,\\cdots,N-1$ 安排到一排，使得如果 $i$ 和 $j$ 紧挨着（其中 $i < j$），那么 $i$ **并非**严格位于 $j$ 给出排名的后一半。", "inputFormat": "第一行一个整数 $N$，表示总管总数。\n\n接下来 $N-1$ 行包含所有排名。其中的第一行是总管 $1$ 给出的排名，第二行是总管 $2$ 给出的排名，以此类推直到总管 $N-1$。总管 $0$ 不在输入中，因为总管 $0$ 没有任何前任总管可供排名。\n\n总管 $i$ 的排名是一个长度为 $i$ 的列表 $p_{i,0},p_{i,1},\\cdots,p_{i,i-1}$，其中每个整数从 $0$ 到 $i-1$ 且恰好出现一次。具体地，根据总管 $i$ 的排名，$p_{i,0}$ 是最好的总管，$p_{i,i-1}$ 是最差的总管。", "outputFormat": "输出一列整数，一个整数 $0,1,\\cdots,N-1$ 的排列，使得对于每对相邻整数，不存在一个在另一个排名的后一半。\n\n可以证明一定有解。如果有多解，你可以输出任意一个。", "hint": "**样例 $1$ 解释**\n\n样例 $1$ 符合子任务一的要求。在样例中，总管 $2$ 和 $3$ 都不能紧挨着总管 $0$ 站，总管 $4$ 和 $5$ 都不能紧挨着总管 $0$ 和 $1$ 站。样例输出见上图。\n\n---\n\n**样例 $2$ 解释**\n\n样例 $2$ 符合子任务二的要求。在样例中，总管 $2$ 不能紧挨着总管 $1$ 站，总管 $3$ 不能紧挨着总管 $2$ 站，总管 $4$ 不能紧挨着总管 $3$ 和 $2$ 站。\n\n---\n\n**样例 $3$ 解释**\n\n样例 $3$ 符合子任务三的要求。在样例中，只有 $(1,3)$ 和 $(0,2)$ 两对总管不能彼此紧挨着站。因此，如果安排为 `3 0 1 2`，并不会有冲突。另一种可能的答案是 `0 1 2 3`。\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 10^3$，$0\\le p_{i,0},p_{i,1},\\cdots,p_{i,i-1}\\le i-1$。\n \n- 子任务一（$11$ 分）：总管 $i$ 给出的排名为 $i-1,i-2,\\cdots,0$。\n- 子任务二（$23$ 分）：总管 $i$ 给出的排名为 $0,1,\\cdots,i-1$。\n- 子任务三（$29$ 分）：$N\\le 8$。\n- 子任务四（$37$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9468", "type": "P", "difficulty": 4, "samples": [["6 2 27\n10 4 20 6 3 3", "1"], ["6 5 5000000000\n1000000000 1000000000 0 1000000000 1000000000 1000000000", "3"], ["3 2 100\n20 30 60", "NO"], ["1 1 100\n100", "0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2023", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Candy / 糖果", "background": "Day 2 Problem B.\n\n题面译自 [EGOI2023 candy](https://egoi23.se/assets/tasks/day2/candy.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "在伊卡古城，据说有一座宫殿，其财富超乎想象。在其中，一个走廊中有 $N$ 盒来自世界各地的糖果。路过的旅行者只要用黄金支付糖果的重量，就可以拿走任意多的糖果。\n\n装糖果的盒子被从左到右编号为 $0$ 到 $N-1$。在盒子 $i$ 中，剩余有 $a_i$ 单位的糖果，其中 $a_i$ 是一个非负整数。\n\n作为宫殿的守护者，你需要移动这些盒子，使得有很多糖果的盒子更靠近入口。\n\n你已知数组 $a_0,a_1,\\cdots,a_{N-1}$，以及整数 $F$ 和 $T$。在一次操作中，你被允许交换 $a_0,a_1,\\cdots,a_{N-1}$ 中的任意两个**相邻**元素。要使得数组前 $F$ 个元素的和至少为 $T$，至少需要多少次操作？", "inputFormat": "第一行三个整数 $N,F,T$。\n\n第二行 $N$ 个整数 $a_0,a_1,\\cdots,a_{N-1}$。", "outputFormat": "如果不可能达成目标，输出 `NO`。\n\n否则，输出一个整数，表示最少操作数。", "hint": "**样例 $1$ 解释**\n\n在样例 $1$ 中，前两个元素的和应当至少为 $27$。一次相邻元素的交换就可以达成目标：交换 $4$ 和 $20$。在这次交换后，数组变成 `10 20 4 6 3 3`，前两个元素的和为 $10+20=30\\ge 27$。\n\n---\n\n**样例 $2$ 解释**\n\n在样例 $2$ 中，这个 $0$ 必须一路移动到数组末尾；这需要 $3$ 次交换。\n\n---\n\n**样例 $3$ 解释**\n\n在样例 $3$ 中，不可能使得前两个元素和至少为 $100$；我们能做到的最好结果是 $60+30=90$。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 100$，$1\\le F\\le N$，$0\\le T\\le 10^{11}$，$0\\le a_i\\le 10^9$。\n\n- 子任务一（$6$ 分）：$N\\le 2$，$a_i\\le 100$，$T\\le 10^9$。\n- 子任务二（$19$ 分）：$a_i\\le 1$。\n- 子任务三（$16$ 分）：$N\\le 20$。\n- 子任务四（$30$ 分）：$a_i\\le 100$。\n- 子任务五（$29$ 分）：无特殊限制。\n\n---\n\n**提示**\n\n答案可能不在 $32$ 位整型范围内，如果你使用 C++ 语言，请注意溢出的可能。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Candy / 糖果", "background": "Day 2 Problem B.\n\n题面译自 [EGOI2023 candy](https://egoi23.se/assets/tasks/day2/candy.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "在伊卡古城，据说有一座宫殿，其财富超乎想象。在其中，一个走廊中有 $N$ 盒来自世界各地的糖果。路过的旅行者只要用黄金支付糖果的重量，就可以拿走任意多的糖果。\n\n装糖果的盒子被从左到右编号为 $0$ 到 $N-1$。在盒子 $i$ 中，剩余有 $a_i$ 单位的糖果，其中 $a_i$ 是一个非负整数。\n\n作为宫殿的守护者，你需要移动这些盒子，使得有很多糖果的盒子更靠近入口。\n\n你已知数组 $a_0,a_1,\\cdots,a_{N-1}$，以及整数 $F$ 和 $T$。在一次操作中，你被允许交换 $a_0,a_1,\\cdots,a_{N-1}$ 中的任意两个**相邻**元素。要使得数组前 $F$ 个元素的和至少为 $T$，至少需要多少次操作？", "inputFormat": "第一行三个整数 $N,F,T$。\n\n第二行 $N$ 个整数 $a_0,a_1,\\cdots,a_{N-1}$。", "outputFormat": "如果不可能达成目标，输出 `NO`。\n\n否则，输出一个整数，表示最少操作数。", "hint": "**样例 $1$ 解释**\n\n在样例 $1$ 中，前两个元素的和应当至少为 $27$。一次相邻元素的交换就可以达成目标：交换 $4$ 和 $20$。在这次交换后，数组变成 `10 20 4 6 3 3`，前两个元素的和为 $10+20=30\\ge 27$。\n\n---\n\n**样例 $2$ 解释**\n\n在样例 $2$ 中，这个 $0$ 必须一路移动到数组末尾；这需要 $3$ 次交换。\n\n---\n\n**样例 $3$ 解释**\n\n在样例 $3$ 中，不可能使得前两个元素和至少为 $100$；我们能做到的最好结果是 $60+30=90$。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 100$，$1\\le F\\le N$，$0\\le T\\le 10^{11}$，$0\\le a_i\\le 10^9$。\n\n- 子任务一（$6$ 分）：$N\\le 2$，$a_i\\le 100$，$T\\le 10^9$。\n- 子任务二（$19$ 分）：$a_i\\le 1$。\n- 子任务三（$16$ 分）：$N\\le 20$。\n- 子任务四（$30$ 分）：$a_i\\le 100$。\n- 子任务五（$29$ 分）：无特殊限制。\n\n---\n\n**提示**\n\n答案可能不在 $32$ 位整型范围内，如果你使用 C++ 语言，请注意溢出的可能。", "locale": "zh-CN"}}}
{"pid": "P9469", "type": "P", "difficulty": 0, "samples": [["5 1 8\n4 1\n3 1\n3 4\n3 2\n0 2\n0 4\n2 4\n1 0\n2 0", "4 1\n3 0\n1 3\n2 3"], ["5 4 0\n1 0\n2 3\n3 4\n4 2\n", "NO"], ["3 0 1\n0 1", "1 0\n2 0"], ["4 0 2\n0 1\n1 0", "2 0\n3 0\n1 3"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "Special Judge", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2023] Sopsug / 垃圾处理", "background": "Day 2 Problem C.\n\n题面译自 [EGOI2023 sopsug](https://egoi23.se/assets/tasks/day2/sopsug.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "砾石堆是隆德郊区的一处未建成的居民区。目前，所有必要的基础设施正在建设中，包括其中最重要的：垃圾处理。与瑞典许多地区一样，将使用一个自动真空收集系统收集垃圾。其原理是使用气压将垃圾通过管道在地下运输。\n\n砾石堆中有 $N$ 座建筑，编号从 $0$ 到 $N-1$。你的任务是用管道连接几对建筑。如果你在建筑 $u$ 和 $v$ 之间连接一条管道，$u$ 将会把所有垃圾运送到 $v$（但不能反向运输）。你的目标是建立一个由 $N-1$ 个管道组成的网络，使得所有垃圾最终都进入一座建筑。换句话说，你希望整个网络构成一棵有根树，所有边都指向树根。\n\n然而，建筑物间已经建设了 $M$ 条管道。这些管道必须被包含在你的网络中。这些管道是有方向的，只能向一个方向运输。\n\n此外，有 $K$ 对建筑物间无法建设管道。这些建筑物对是有序的，因此如果无法从 $u$ 到 $v$ 建设管道，也有可能从 $v$ 到 $u$ 可以建设管道。", "inputFormat": "第一行三个整数 $N,M,K$。\n\n接下来 $M$ 行，每行两个不相等的整数 $a_i,b_i$，表示已经存在一条从 $a_i$ 到 $b_i$ 的管道。\n\n接下来 $K$ 行，每行两个不相等的整数 $c_i,d_i$，表示无法从 $c_i$ 到 $d_i$ 建设管道。\n\n所有 $M+K$ 对有序数对是互不相同的。注意 $(u,v)$ 和 $(v,u)$ 是不同的两对数。", "outputFormat": "如果无解，输出 `NO`。\n\n否则，输出 $N-1$ 行，每行两个整数 $u_i,v_i$，表示有一条从 $u_i$ 到 $v_i$ 的管道。你可以以任意顺序输出这些管道。如果有多解，你可以输出任意一个。请记住所有 $M$ 条已经存在的管道必须包含在答案中。", "hint": "**样例 $1,2$ 解释**\n\n下图展示了前两组样例。蓝色边表示已经存在的管道，红色虚线边表示无法建造的管道。\n\n左图展示了样例 $1$ 和样例输出的方案，黑色边表示新建造的管道。在这个网络中，所有垃圾将被收集在建筑 $0$。这不是唯一解；例如，从 $1$ 到 $3$ 的管道可以被从 $0$ 到 $1$ 的管道代替，此时依然是合法解。\n\n对于样例 $2$，根据右图可以发现，由于环 $(2,3,4)$ 的存在，问题无解。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n0z2x9vy.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 3\\times 10^5$，$0\\le M\\le 3\\times 10^5$，$0\\le K\\le 3\\times 10^5$，$0\\le a_i,b_i\\le N-1$，$0\\le c_i,d_i\\le N-1$。\n\n- 子任务一（$12$ 分）：$M=0$，$K=1$。\n- 子任务二（$10$ 分）：$M=0$，$K=2$。\n- 子任务三（$19$ 分）：$K=0$。\n- 子任务四（$13$ 分）：$N\\le 100$。\n- 子任务五（$17$ 分）：保证存在解法使得 $0$ 为根。\n- 子任务六（$11$ 分）：$M=0$。\n- 子任务七（$18$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2023] Sopsug / 垃圾处理", "background": "Day 2 Problem C.\n\n题面译自 [EGOI2023 sopsug](https://egoi23.se/assets/tasks/day2/sopsug.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "砾石堆是隆德郊区的一处未建成的居民区。目前，所有必要的基础设施正在建设中，包括其中最重要的：垃圾处理。与瑞典许多地区一样，将使用一个自动真空收集系统收集垃圾。其原理是使用气压将垃圾通过管道在地下运输。\n\n砾石堆中有 $N$ 座建筑，编号从 $0$ 到 $N-1$。你的任务是用管道连接几对建筑。如果你在建筑 $u$ 和 $v$ 之间连接一条管道，$u$ 将会把所有垃圾运送到 $v$（但不能反向运输）。你的目标是建立一个由 $N-1$ 个管道组成的网络，使得所有垃圾最终都进入一座建筑。换句话说，你希望整个网络构成一棵有根树，所有边都指向树根。\n\n然而，建筑物间已经建设了 $M$ 条管道。这些管道必须被包含在你的网络中。这些管道是有方向的，只能向一个方向运输。\n\n此外，有 $K$ 对建筑物间无法建设管道。这些建筑物对是有序的，因此如果无法从 $u$ 到 $v$ 建设管道，也有可能从 $v$ 到 $u$ 可以建设管道。", "inputFormat": "第一行三个整数 $N,M,K$。\n\n接下来 $M$ 行，每行两个不相等的整数 $a_i,b_i$，表示已经存在一条从 $a_i$ 到 $b_i$ 的管道。\n\n接下来 $K$ 行，每行两个不相等的整数 $c_i,d_i$，表示无法从 $c_i$ 到 $d_i$ 建设管道。\n\n所有 $M+K$ 对有序数对是互不相同的。注意 $(u,v)$ 和 $(v,u)$ 是不同的两对数。", "outputFormat": "如果无解，输出 `NO`。\n\n否则，输出 $N-1$ 行，每行两个整数 $u_i,v_i$，表示有一条从 $u_i$ 到 $v_i$ 的管道。你可以以任意顺序输出这些管道。如果有多解，你可以输出任意一个。请记住所有 $M$ 条已经存在的管道必须包含在答案中。", "hint": "**样例 $1,2$ 解释**\n\n下图展示了前两组样例。蓝色边表示已经存在的管道，红色虚线边表示无法建造的管道。\n\n左图展示了样例 $1$ 和样例输出的方案，黑色边表示新建造的管道。在这个网络中，所有垃圾将被收集在建筑 $0$。这不是唯一解；例如，从 $1$ 到 $3$ 的管道可以被从 $0$ 到 $1$ 的管道代替，此时依然是合法解。\n\n对于样例 $2$，根据右图可以发现，由于环 $(2,3,4)$ 的存在，问题无解。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n0z2x9vy.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 3\\times 10^5$，$0\\le M\\le 3\\times 10^5$，$0\\le K\\le 3\\times 10^5$，$0\\le a_i,b_i\\le N-1$，$0\\le c_i,d_i\\le N-1$。\n\n- 子任务一（$12$ 分）：$M=0$，$K=1$。\n- 子任务二（$10$ 分）：$M=0$，$K=2$。\n- 子任务三（$19$ 分）：$K=0$。\n- 子任务四（$13$ 分）：$N\\le 100$。\n- 子任务五（$17$ 分）：保证存在解法使得 $0$ 为根。\n- 子任务六（$11$ 分）：$M=0$。\n- 子任务七（$18$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9471", "type": "P", "difficulty": 1, "samples": [["yLOI2022", "4 1 3"], ["IAKIOIOI", "0 0 8"], ["1n2s0e1s", "4 4 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷月赛"], "title": "[yLOI2022] 签到题", "background": "", "description": "给定一个长度为 $8$ 的字符串 $s$，请你分别统计 $s$ 中大小写字母和数字字符的个数。", "inputFormat": "输入只有一行一个长度为 $8$ 的字符串 $s$。", "outputFormat": "输出一行三个整数，依次表示：\n\n- $s$ 中数字字符的个数。\n- $s$ 中小写字母的个数。\n- $s$ 中大写字母的个数。", "hint": "### 数据规模与约定\n\n对 $100\\%$ 的测试点，保证 $s$ 的长度为 $8$，仅含大小写字母和数字。\n\n以下是各个测试点中各字符的存在性，√ 表示存在，× 表示不存在。\n\n| 测试点编号 | 数字 | 小写字母 | 大写字母 |\n| :-: | :-: | :-: | :-: |\n| $1$ | √  | × |× |\n| $2$ | × | √ | × |\n| $3$ | × | × | √ |\n| $4$ | √  | √ |× |\n| $5$ | √  |  × |√ |\n| $6$ |  × | √ | √ |\n| $7$ | √ | √ | √ |\n| $8$ | √ | √ | √ |\n| $9$ | √ | √ | √ |\n| $10$ | √ | √ | √ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2022] 签到题", "background": "", "description": "给定一个长度为 $8$ 的字符串 $s$，请你分别统计 $s$ 中大小写字母和数字字符的个数。", "inputFormat": "输入只有一行一个长度为 $8$ 的字符串 $s$。", "outputFormat": "输出一行三个整数，依次表示：\n\n- $s$ 中数字字符的个数。\n- $s$ 中小写字母的个数。\n- $s$ 中大写字母的个数。", "hint": "### 数据规模与约定\n\n对 $100\\%$ 的测试点，保证 $s$ 的长度为 $8$，仅含大小写字母和数字。\n\n以下是各个测试点中各字符的存在性，√ 表示存在，× 表示不存在。\n\n| 测试点编号 | 数字 | 小写字母 | 大写字母 |\n| :-: | :-: | :-: | :-: |\n| $1$ | √  | × |× |\n| $2$ | × | √ | × |\n| $3$ | × | × | √ |\n| $4$ | √  | √ |× |\n| $5$ | √  |  × |√ |\n| $6$ |  × | √ | √ |\n| $7$ | √ | √ | √ |\n| $8$ | √ | √ | √ |\n| $9$ | √ | √ | √ |\n| $10$ | √ | √ | √ |", "locale": "zh-CN"}}}
{"pid": "P9472", "type": "P", "difficulty": 2, "samples": [["2 2\n1\n2", "1 2"], ["2 3\n1\n-1", "2 1"], ["2 2\n1\n1", "1 2"], ["见附加文件中的 B4.in", "见附加文件中的 B4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷月赛"], "title": "[yLOI2022] 枕万梦", "background": "> 岁月冥冥之中 星移物换 将韶华歌颂  \n> 人潮冥冥之中 一眼望穿 日月去无踪  \n> 你我冥冥之中 心有灵犀 何止几万梦  \n> 忘情在这久违的重逢  \n> 天地冥冥之中 云烟奔涌 摩肩又接踵  \n> 万籁冥冥之中 不肯缄默 盛大到无穷  \n> 你我冥冥之中 对坐天涯 灵犀才一动  \n> 就相遇在咫尺的时空\n\n银临《枕万梦》", "description": "天亮了，扶苏不敌困意，早早地进入了梦乡。在失去引力的梦里，扶苏遇到了好多串漂浮着的数列，它们的长度都相等，而且都是美妙的等比数列！出于本能，扶苏想要把这些数列按照字典序排序，可是在梦里扶苏失去了思考的能力，请你来帮帮她！\n\n具体地，有 $n$ 个编号从 $1$ 到 $n$ 的数列 $a_1, a_2, \\dots a_n$，每个数列的长度均为 $m + 1$。第 $i$ 个数列 $a_i$ 满足递推式 $a_{i,j} = a_{i,j - 1} \\times i$，其中 $1 \\leq j \\leq m$。而扶苏会告诉你每个序列的首项 $a_{i,0}$，你需要帮助她把这些数列按字典序排序。", "inputFormat": "输入的第一行是两个整数，依次表示 $n$ 和 $m$。  \n接下来 $n$ 行，每行一个整数，第 $i$ 行的整数表示数列 $a_i$ 的首项 $a_{i,0}$。", "outputFormat": "输出一行 $n$ 个整数，第 $i$ 个整数表示字典序第 $i$ 小的数列的**编号**。", "hint": "### 样例 1 解释\n\n共有两个数列，每个数列的长度均为 $2+1=3$。\n\n对第一个数列 $a_1$：\n- 已知其首项 $a_{1,0} = 1$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=1,j = 1$ 可以得到 $a_{1,1} = a_{1,0} \\times 1 = 1$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=1,j = 2$ 可以得到 $a_{1,2} = a_{1,1} \\times 1= 1$。\n\n所以数列 $a_1$ 是 $1,1,1$。\n\n对第二个数列 $a_2$：\n- 已知其首项 $a_{2,0} = 2$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=2,j = 1$ 可以得到 $a_{2,1} = a_{2,0} \\times 2 = 2 \\times 2 = 4$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=2,j = 2$ 可以得到 $a_{2,2} = a_{2,1} \\times 2= 4 \\times 2 = 8$。\n\n所以数列 $a_2$ 是 $2,4,8$。\n\n比较字典序可得数列 $a_1$ 是字典序最小的数列。所以输出 $1$。\n\n### 样例 2 解释\n\n数列 $a_1$ 为 $1,1,1,1$，数列 $a_2$ 为 $-1, -2,-4,-8$。\n\n### 数据规模与约定\n本题共 $10$ 个测试点，各测试点信息如下表：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/08wnuome.png)\n\n特殊约定 A：保证 $a_{i,0}$ 均相等。  \n特殊约定 B：保证 $a_{i,0}$ 互不相等。\n\n对全部的测试点，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 10^9$，$1 \\leq |a_{i,0}| \\leq 10^9$。\n\n\n### 提示\n\n对两个数列 $a_i, a_j$，按如下方式比较其字典序：\n\n找到**最小的**满足 $a_{i,p} \\neq a_{j, p}$ 的下标 $p$，比较 $a_{i, p}$ 和 $a_{j, p}$ 的大小：\n\n- 如果 $a_{i,p} < a_{j, p}$，则称 $a_i$ 的字典序比 $a_j$ 的小。\n- 如果 $a_{i,p} > a_{j, p}$，则称 $a_i$ 的字典序比 $a_j$ 的大。\n\n可以证明，在本题的限制下，这样的 $p$ 一定存在。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2022] 枕万梦", "background": "> 岁月冥冥之中 星移物换 将韶华歌颂  \n> 人潮冥冥之中 一眼望穿 日月去无踪  \n> 你我冥冥之中 心有灵犀 何止几万梦  \n> 忘情在这久违的重逢  \n> 天地冥冥之中 云烟奔涌 摩肩又接踵  \n> 万籁冥冥之中 不肯缄默 盛大到无穷  \n> 你我冥冥之中 对坐天涯 灵犀才一动  \n> 就相遇在咫尺的时空\n\n银临《枕万梦》", "description": "天亮了，扶苏不敌困意，早早地进入了梦乡。在失去引力的梦里，扶苏遇到了好多串漂浮着的数列，它们的长度都相等，而且都是美妙的等比数列！出于本能，扶苏想要把这些数列按照字典序排序，可是在梦里扶苏失去了思考的能力，请你来帮帮她！\n\n具体地，有 $n$ 个编号从 $1$ 到 $n$ 的数列 $a_1, a_2, \\dots a_n$，每个数列的长度均为 $m + 1$。第 $i$ 个数列 $a_i$ 满足递推式 $a_{i,j} = a_{i,j - 1} \\times i$，其中 $1 \\leq j \\leq m$。而扶苏会告诉你每个序列的首项 $a_{i,0}$，你需要帮助她把这些数列按字典序排序。", "inputFormat": "输入的第一行是两个整数，依次表示 $n$ 和 $m$。  \n接下来 $n$ 行，每行一个整数，第 $i$ 行的整数表示数列 $a_i$ 的首项 $a_{i,0}$。", "outputFormat": "输出一行 $n$ 个整数，第 $i$ 个整数表示字典序第 $i$ 小的数列的**编号**。", "hint": "### 样例 1 解释\n\n共有两个数列，每个数列的长度均为 $2+1=3$。\n\n对第一个数列 $a_1$：\n- 已知其首项 $a_{1,0} = 1$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=1,j = 1$ 可以得到 $a_{1,1} = a_{1,0} \\times 1 = 1$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=1,j = 2$ 可以得到 $a_{1,2} = a_{1,1} \\times 1= 1$。\n\n所以数列 $a_1$ 是 $1,1,1$。\n\n对第二个数列 $a_2$：\n- 已知其首项 $a_{2,0} = 2$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=2,j = 1$ 可以得到 $a_{2,1} = a_{2,0} \\times 2 = 2 \\times 2 = 4$。\n- 根据 $a_{i,j} = a_{i,j - 1} \\times i$，取 $i=2,j = 2$ 可以得到 $a_{2,2} = a_{2,1} \\times 2= 4 \\times 2 = 8$。\n\n所以数列 $a_2$ 是 $2,4,8$。\n\n比较字典序可得数列 $a_1$ 是字典序最小的数列。所以输出 $1$。\n\n### 样例 2 解释\n\n数列 $a_1$ 为 $1,1,1,1$，数列 $a_2$ 为 $-1, -2,-4,-8$。\n\n### 数据规模与约定\n本题共 $10$ 个测试点，各测试点信息如下表：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/08wnuome.png)\n\n特殊约定 A：保证 $a_{i,0}$ 均相等。  \n特殊约定 B：保证 $a_{i,0}$ 互不相等。\n\n对全部的测试点，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 10^9$，$1 \\leq |a_{i,0}| \\leq 10^9$。\n\n\n### 提示\n\n对两个数列 $a_i, a_j$，按如下方式比较其字典序：\n\n找到**最小的**满足 $a_{i,p} \\neq a_{j, p}$ 的下标 $p$，比较 $a_{i, p}$ 和 $a_{j, p}$ 的大小：\n\n- 如果 $a_{i,p} < a_{j, p}$，则称 $a_i$ 的字典序比 $a_j$ 的小。\n- 如果 $a_{i,p} > a_{j, p}$，则称 $a_i$ 的字典序比 $a_j$ 的大。\n\n可以证明，在本题的限制下，这样的 $p$ 一定存在。", "locale": "zh-CN"}}}
{"pid": "P9473", "type": "P", "difficulty": 3, "samples": [["3\n2\n2 3\n3\n2 3 4\n3\n3 8 35", "Yes\nNo\nYes"], ["见附加文件中的 C2.in", "见附加文件中的 C2.ans"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["O2优化", "洛谷月赛"], "title": "[yLOI2022] 西施江南", "background": "> 我晤江南面 如逢西施颜  \n> 清芬宜送岸 菡萏新雨前  \n> 皓腕分珠帘 珠露扬波珠玉敛  \n> 天然一段聚散 嫣然曾与言  \n> 平芜辙尚浅 无韵化湖田  \n> 林园虽工典 芳姿不可嵌  \n> 何人冠诗篇 重街杳杳重门掩  \n> 似有柔荑遮目 空谷足尖\n\n银临《西施江南》", "description": "给定 $n$ 个正整数 $a_1, a_2, a_3, \\dots a_n$，记 $g$ 是这些数的**最大公约数**，$l$ 是这些数的**最小公倍数**。请你判断 $l \\times g$ 是否等于 $a_1 \\times a_2 \\times \\dots \\times a_n$。", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n输入的第一行是一个整数 $T$，表示测试数据组数。对每组数据按如下格式输入：\n\n每组数据的第一行是一个整数，表示整数个数 $n$。  \n每组数据的第二行有 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "对每组数据依次输出一行一个字符串表示答案。\n\n- 若 $l \\times g = a_1 \\times a_2 \\times \\dots \\times a_n$，请输出 $\\texttt{Yes}$。\n- 否则，请输出 $\\texttt{No}$。", "hint": "### 数据规模与约定\n\n以下用 $N$ 表示单个测试点内 $n$ 的和，即 $N = \\sum n$。\n\n- 对 $12\\%$ 的数据，保证 $n = 2$。\n- 对 $36\\%$ 的数据，保证 $n \\leq 5$。\n- 对 $52\\%$ 的数据，保证 $N \\leq 1000$。\n- 对 $76\\%$ 的数据，保证 $N,a_i \\leq 10^5$。\n- 对 $100\\%$ 的数据，保证 $2 \\leq n,N \\leq 5 \\times 10^5$，$2 \\leq a_i \\leq 10^8$，$1 \\leq T \\leq 20$。\n\n### 提示\n\n**数据千万条，清空第一条**。  \n**多测不清空，爆零两行泪**。  \n**清空不规范，超时总相伴**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2022] 西施江南", "background": "> 我晤江南面 如逢西施颜  \n> 清芬宜送岸 菡萏新雨前  \n> 皓腕分珠帘 珠露扬波珠玉敛  \n> 天然一段聚散 嫣然曾与言  \n> 平芜辙尚浅 无韵化湖田  \n> 林园虽工典 芳姿不可嵌  \n> 何人冠诗篇 重街杳杳重门掩  \n> 似有柔荑遮目 空谷足尖\n\n银临《西施江南》", "description": "给定 $n$ 个正整数 $a_1, a_2, a_3, \\dots a_n$，记 $g$ 是这些数的**最大公约数**，$l$ 是这些数的**最小公倍数**。请你判断 $l \\times g$ 是否等于 $a_1 \\times a_2 \\times \\dots \\times a_n$。", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n输入的第一行是一个整数 $T$，表示测试数据组数。对每组数据按如下格式输入：\n\n每组数据的第一行是一个整数，表示整数个数 $n$。  \n每组数据的第二行有 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "对每组数据依次输出一行一个字符串表示答案。\n\n- 若 $l \\times g = a_1 \\times a_2 \\times \\dots \\times a_n$，请输出 $\\texttt{Yes}$。\n- 否则，请输出 $\\texttt{No}$。", "hint": "### 数据规模与约定\n\n以下用 $N$ 表示单个测试点内 $n$ 的和，即 $N = \\sum n$。\n\n- 对 $12\\%$ 的数据，保证 $n = 2$。\n- 对 $36\\%$ 的数据，保证 $n \\leq 5$。\n- 对 $52\\%$ 的数据，保证 $N \\leq 1000$。\n- 对 $76\\%$ 的数据，保证 $N,a_i \\leq 10^5$。\n- 对 $100\\%$ 的数据，保证 $2 \\leq n,N \\leq 5 \\times 10^5$，$2 \\leq a_i \\leq 10^8$，$1 \\leq T \\leq 20$。\n\n### 提示\n\n**数据千万条，清空第一条**。  \n**多测不清空，爆零两行泪**。  \n**清空不规范，超时总相伴**。", "locale": "zh-CN"}}}
{"pid": "P9474", "type": "P", "difficulty": 5, "samples": [["5 3\n1 2 3 4 5", "4"], ["6 3\n1 7 8 3 4 6", "4"], ["见附加文件中的 D3.in", "见附加文件中的 D3.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "线段树", "O2优化", "排序", "洛谷月赛", "双指针 two-pointer", "动态 DP"], "title": "[yLOI2022] 长安幻世绘", "background": "> 长安广月晴，留身影，琵琶行，酒客半醒。  \n> 问你看不清，朱纱帐，翠丝绦，飞天降临。  \n> 美人腰肢半倾璎珞脆，纤手独举琵琶跪，眸眼还生魅。  \n> 麝香抹唇酒更醉，醉灯彩越乱越美。\n\n——银临《长安幻世绘》", "description": "共有 $n$ 个彩灯从左到右排成一排，从左到右用 $1$  到 $n$ 编号，第 $i$ 个彩灯的亮度是 $a_i$。对 $1 \\leq i < n$，我们说 $i$ 号彩灯和 $i + 1$ 号彩灯是相邻的。\n\n我们保证这 $n$ 盏灯的亮度**互不相同**。\n\n一组彩灯的**和谐度**定义为这组彩灯中亮度最大和最小的两盏彩灯的亮度之差。\n\n扶苏想从这 $n$ 个彩灯中选出 $m$ 个**互不相邻**的彩灯作为一组，她希望这组彩灯的和谐度**尽可能小**。请你帮她求出这个最小值。\n\n形式化地，你需要在元素互不相同的数列 $a$ 中选出一个长度为 $m$ 的元素互不相邻的子列，使得子列的极差最小。\n", "inputFormat": "第一行是两个整数，依次表示彩灯的个数 $n$ 和挑出彩灯的个数 $m$。  \n第二行有 $n$ 个整数，第 $i$ 个整数表示彩灯 $i$ 的亮度 $a_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n只能选择第 $1, 3, 5$ 个彩灯。因为其他的选法都会导致有灯相邻。\n\n### 样例 2 解释\n\n可以选择第 $2, 4, 6$ 个彩灯，彩灯的亮度是 $7, 3, 6$，其极差是 $4$。\n\n### 数据规模与约定\n\n- 对 $12\\%$ 的数据，保证 $n \\leq 6$。\n- 对 $36\\%$ 的数据，保证 $n \\leq 100$。\n- 另有 $4\\%$ 的数据，保证 $m = \\lceil\\frac{n}{2}\\rceil$。\n- 另有 $12\\%$ 的数据，保证 $a_i$ 单调递增。\n- 对 $76\\%$ 的数据，保证 $n \\leq 10^3$。\n- 对 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq \\lceil\\frac{n}{2}\\rceil$，$1 \\leq a_i \\leq 10^9$，$a_i$ 互不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2022] 长安幻世绘", "background": "> 长安广月晴，留身影，琵琶行，酒客半醒。  \n> 问你看不清，朱纱帐，翠丝绦，飞天降临。  \n> 美人腰肢半倾璎珞脆，纤手独举琵琶跪，眸眼还生魅。  \n> 麝香抹唇酒更醉，醉灯彩越乱越美。\n\n——银临《长安幻世绘》", "description": "共有 $n$ 个彩灯从左到右排成一排，从左到右用 $1$  到 $n$ 编号，第 $i$ 个彩灯的亮度是 $a_i$。对 $1 \\leq i < n$，我们说 $i$ 号彩灯和 $i + 1$ 号彩灯是相邻的。\n\n我们保证这 $n$ 盏灯的亮度**互不相同**。\n\n一组彩灯的**和谐度**定义为这组彩灯中亮度最大和最小的两盏彩灯的亮度之差。\n\n扶苏想从这 $n$ 个彩灯中选出 $m$ 个**互不相邻**的彩灯作为一组，她希望这组彩灯的和谐度**尽可能小**。请你帮她求出这个最小值。\n\n形式化地，你需要在元素互不相同的数列 $a$ 中选出一个长度为 $m$ 的元素互不相邻的子列，使得子列的极差最小。\n", "inputFormat": "第一行是两个整数，依次表示彩灯的个数 $n$ 和挑出彩灯的个数 $m$。  \n第二行有 $n$ 个整数，第 $i$ 个整数表示彩灯 $i$ 的亮度 $a_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n只能选择第 $1, 3, 5$ 个彩灯。因为其他的选法都会导致有灯相邻。\n\n### 样例 2 解释\n\n可以选择第 $2, 4, 6$ 个彩灯，彩灯的亮度是 $7, 3, 6$，其极差是 $4$。\n\n### 数据规模与约定\n\n- 对 $12\\%$ 的数据，保证 $n \\leq 6$。\n- 对 $36\\%$ 的数据，保证 $n \\leq 100$。\n- 另有 $4\\%$ 的数据，保证 $m = \\lceil\\frac{n}{2}\\rceil$。\n- 另有 $12\\%$ 的数据，保证 $a_i$ 单调递增。\n- 对 $76\\%$ 的数据，保证 $n \\leq 10^3$。\n- 对 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq \\lceil\\frac{n}{2}\\rceil$，$1 \\leq a_i \\leq 10^9$，$a_i$ 互不相同。", "locale": "zh-CN"}}}
{"pid": "P9475", "type": "P", "difficulty": 6, "samples": [["2 3 3 4", "760000008"], ["314159265 358979323 84626433832795028 841971693", "465094894"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "组合数学", "二项式定理", "概率论", "期望"], "title": "[_-0 A] 考试", "background": "小 $\\mathfrak{g}$ 参加一场考试时，不小心把答题卡填反了。", "description": "答题卡有 $n (1 \\le n \\le 10^9)$ 行，$m (1 \\le m \\le 10^9)$ 列，共 $nm$ 道题，**从左到右，从上到下，横向排列**。\n\n每道题有 $c (4 \\le c \\le 10^9)$ 个选项。其中，前 $k(0 \\le k \\le nm)$ 道题为单选题，**有且仅有一个**正确选项；后 $nm - k$ 道题为多选题，正确选项个数**严格大于** $1$ 且**严格小于** $c$。\n\n小 $\\mathfrak{g}$ 正确地回答了所有题，但是她不小心把答题卡的方向看反了，从而她的答案排列方式为**从上到下，从左到右，纵向排列**。\n\n题目的评分方式为：选项完全正确得 $1$ 分，多选或错选得 $0$ 分，漏选按比例给分。\n\n形式化地说，若 $A$ 为某道题正确答案选项的集合，$B$ 为答题卡上选项的集合（均为 $\\{1,2,3,\\cdots,c\\}$ 的子集），则该题得分为：\n\n$$\\begin{cases}\\frac{\\lvert B \\rvert}{\\lvert A \\rvert}&\\text{if\\quad}\nB\\sube A\\\\0&\\text{otherwise}\\end{cases}$$\n\n小 $\\mathfrak{g}$ 忘记考试的正确答案是什么了，于是她去问小 $\\mathfrak{f}$，如果考试的正确答案在合法范围内等概率随机，那么自己期望得分是多少。由于结果可能很大，她只需要知道结果对 $10^9+7$ 取模的值。\n\n**题目保证 $c$ 和 $2^c-c-2$ 都不是 $10^9+7$ 的倍数。**\n\n\n但是小 $\\mathfrak{f}$ 也不会，所以他来求助万能的你。", "inputFormat": "一行，四个用空格分隔的整数 $n,m,k,c$，分别表示答题卡的行数，列数，单选题的数量和每道题的选项个数。", "outputFormat": "一行，一个整数，表示期望得分，对 $10^9+7$ 取模。", "hint": "**样例 $1$ 解释：**\n\n得分的期望为 $\\frac{67}{25}$，对 $10^9+7$ 取模为 $760000008$。\n\n一种可能的考试的正确答案依次为：\n\n$\\texttt{C,D,B,AD,ABD,BC}$\n\n那么答题卡上应该填写：\n\n| $\\texttt{C}$ | $\\texttt{D}$ | $\\texttt{B}$ |\n| :----------: | :----------: | :----------: |\n| $\\texttt{AD}$ | $\\texttt{ABD}$ | $\\texttt{BC}$ |\n\n实际填写：\n\n| $\\texttt{C}$ | $\\texttt{B}$ | $\\texttt{ABD}$ |\n| :----------: | :----------: | :----------: |\n| $\\texttt{D}$ | $\\texttt{AD}$ | $\\texttt{BC}$ |\n\n答案为 $\\texttt{C}$，填写 $\\texttt{C}$，得 $1$ 分。\n\n答案为 $\\texttt{D}$，填写 $\\texttt{B}$，得 $0$ 分。\n\n答案为 $\\texttt{B}$，填写 $\\texttt{ABD}$，得 $0$ 分。\n\n答案为 $\\texttt{AD}$，填写 $\\texttt{D}$，得 $\\frac{1}{2}$ 分。\n\n答案为 $\\texttt{ABD}$，填写 $\\texttt{AD}$，得 $\\frac{2}{3}$ 分。\n\n答案为 $\\texttt{BC}$，填写 $\\texttt{BC}$，得 $1$ 分。\n\n综上，这种情况下，考试得分为：\n\n$1+0+0+\\frac{1}{2}+\\frac{2}{3}+1=\n\\frac{19}{6}$ 分。\n\n**本题采用捆绑测试且使用子任务依赖。**\n\n| 编号 | 分值 | $n,m\\le$ | $c\\le$ | 性质 | 依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $0$ | N/A| N/A | 样例 | 无 |\n| $1$ | $5$ | $10^9$ | $10^9$ | A | 无 |\n| $2$ | $5$ | $2$ | $4$ | 无 | 无 |\n| $3$ | $20$ | $10^3$ | $10$ | 无 | $2$ |\n| $4$ | $15$ | $10^9$ | $10$ | 无 | $2,3$ |\n| $5$ | $15$ | $10^3$ | $10^3$ | 无 | $2,3$ |\n| $6$ | $15$ | $10^3$ | $10^5$ | 无 | $2,3,5$ |\n| $7$ | $10$ | $10^3$ | $10^9$ | B | 无 |\n| $8$ | $10$ | $10^3$ | $10^9$ | 无 | $2,3,5,6,7$ |\n| $9$ | $5$ | $10^9$ | $10^9$ | 无 | $0,1,2,3,4,5,6,7,8$ |\n\n特殊性质 A：$n=1$ 或 $m=1$\n\n特殊性质 B：$k=nm-2$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[_-0 A] 考试", "background": "小 $\\mathfrak{g}$ 参加一场考试时，不小心把答题卡填反了。", "description": "答题卡有 $n (1 \\le n \\le 10^9)$ 行，$m (1 \\le m \\le 10^9)$ 列，共 $nm$ 道题，**从左到右，从上到下，横向排列**。\n\n每道题有 $c (4 \\le c \\le 10^9)$ 个选项。其中，前 $k(0 \\le k \\le nm)$ 道题为单选题，**有且仅有一个**正确选项；后 $nm - k$ 道题为多选题，正确选项个数**严格大于** $1$ 且**严格小于** $c$。\n\n小 $\\mathfrak{g}$ 正确地回答了所有题，但是她不小心把答题卡的方向看反了，从而她的答案排列方式为**从上到下，从左到右，纵向排列**。\n\n题目的评分方式为：选项完全正确得 $1$ 分，多选或错选得 $0$ 分，漏选按比例给分。\n\n形式化地说，若 $A$ 为某道题正确答案选项的集合，$B$ 为答题卡上选项的集合（均为 $\\{1,2,3,\\cdots,c\\}$ 的子集），则该题得分为：\n\n$$\\begin{cases}\\frac{\\lvert B \\rvert}{\\lvert A \\rvert}&\\text{if\\quad}\nB\\sube A\\\\0&\\text{otherwise}\\end{cases}$$\n\n小 $\\mathfrak{g}$ 忘记考试的正确答案是什么了，于是她去问小 $\\mathfrak{f}$，如果考试的正确答案在合法范围内等概率随机，那么自己期望得分是多少。由于结果可能很大，她只需要知道结果对 $10^9+7$ 取模的值。\n\n**题目保证 $c$ 和 $2^c-c-2$ 都不是 $10^9+7$ 的倍数。**\n\n\n但是小 $\\mathfrak{f}$ 也不会，所以他来求助万能的你。", "inputFormat": "一行，四个用空格分隔的整数 $n,m,k,c$，分别表示答题卡的行数，列数，单选题的数量和每道题的选项个数。", "outputFormat": "一行，一个整数，表示期望得分，对 $10^9+7$ 取模。", "hint": "**样例 $1$ 解释：**\n\n得分的期望为 $\\frac{67}{25}$，对 $10^9+7$ 取模为 $760000008$。\n\n一种可能的考试的正确答案依次为：\n\n$\\texttt{C,D,B,AD,ABD,BC}$\n\n那么答题卡上应该填写：\n\n| $\\texttt{C}$ | $\\texttt{D}$ | $\\texttt{B}$ |\n| :----------: | :----------: | :----------: |\n| $\\texttt{AD}$ | $\\texttt{ABD}$ | $\\texttt{BC}$ |\n\n实际填写：\n\n| $\\texttt{C}$ | $\\texttt{B}$ | $\\texttt{ABD}$ |\n| :----------: | :----------: | :----------: |\n| $\\texttt{D}$ | $\\texttt{AD}$ | $\\texttt{BC}$ |\n\n答案为 $\\texttt{C}$，填写 $\\texttt{C}$，得 $1$ 分。\n\n答案为 $\\texttt{D}$，填写 $\\texttt{B}$，得 $0$ 分。\n\n答案为 $\\texttt{B}$，填写 $\\texttt{ABD}$，得 $0$ 分。\n\n答案为 $\\texttt{AD}$，填写 $\\texttt{D}$，得 $\\frac{1}{2}$ 分。\n\n答案为 $\\texttt{ABD}$，填写 $\\texttt{AD}$，得 $\\frac{2}{3}$ 分。\n\n答案为 $\\texttt{BC}$，填写 $\\texttt{BC}$，得 $1$ 分。\n\n综上，这种情况下，考试得分为：\n\n$1+0+0+\\frac{1}{2}+\\frac{2}{3}+1=\n\\frac{19}{6}$ 分。\n\n**本题采用捆绑测试且使用子任务依赖。**\n\n| 编号 | 分值 | $n,m\\le$ | $c\\le$ | 性质 | 依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $0$ | N/A| N/A | 样例 | 无 |\n| $1$ | $5$ | $10^9$ | $10^9$ | A | 无 |\n| $2$ | $5$ | $2$ | $4$ | 无 | 无 |\n| $3$ | $20$ | $10^3$ | $10$ | 无 | $2$ |\n| $4$ | $15$ | $10^9$ | $10$ | 无 | $2,3$ |\n| $5$ | $15$ | $10^3$ | $10^3$ | 无 | $2,3$ |\n| $6$ | $15$ | $10^3$ | $10^5$ | 无 | $2,3,5$ |\n| $7$ | $10$ | $10^3$ | $10^9$ | B | 无 |\n| $8$ | $10$ | $10^3$ | $10^9$ | 无 | $2,3,5,6,7$ |\n| $9$ | $5$ | $10^9$ | $10^9$ | 无 | $0,1,2,3,4,5,6,7,8$ |\n\n特殊性质 A：$n=1$ 或 $m=1$\n\n特殊性质 B：$k=nm-2$", "locale": "zh-CN"}}}
{"pid": "P9476", "type": "P", "difficulty": 6, "samples": [["0 5 0\n9\n9\n3\n2\n3\n1 2 7 6\n1 3 8 5\n1 4 6 5\n2 5 9 9", "2262"], ["0 10 86\n50\n6\n84\n50\n83\n67\n93\n55\n93\n70\n1 2 94 7\n1 3 97 4\n1 10 98 12\n2 4 89 1\n2 7 98 1\n4 5 99 13\n4 6 96 5\n5 8 95 5\n5 9 97 7", "33600416"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "O2优化", "动态规划优化", "斜率优化", "树形 DP"], "title": "[_-0 B] 地铁", "background": "小 $\\mathfrak{f}$ 的家乡 A 市最近开通了地铁。", "description": "A 市共有 $n (2\\le n \\le 10^5)$ 个居民点，第 $i$ 个居民点的人口为 $s_i (1 \\le s_i \\le 10^7)$，同时有 $n-1$ 条双向道路，构成一棵树，第 $i $ 条双向道路连接居民点 $u_i$ 和 $v_i$，人步行走过这条道路需要 $w_i (1 \\le w_i\\le 10^7)$ 的时间。\n\n现 A 市政府决定开通一条地铁线路。地铁线路是树上的一条简单路径，若路径经过第 $i$ 条道路，那么地铁从这条道路下方经过只需要 $w_i^{\\prime} (1 \\le w_i^{\\prime} \\le 10^7)$ 的时间，同时，地铁的进出站**共**需要花费 $t (0 \\le t \\le 10^7)$ 的时间。\n\n已知，若一个人从一个居民点前往另一个居民点，如果这条路径与地铁经过的路径有至少一条公共**边**，那么就**一定**会选择**尽可能多地**乘坐地铁。如果没有公共边，那么就会选择完全步行。**题目保证对于第 $i$ 条道路有 $w_i^{\\prime} \\le w_i - t$。** 我们认为，如果两个居民点的人口的乘积越大，那么有人想要在它们之间流动的可能性也越大。\n\n现在，小 $\\mathfrak{f}$ 想知道在所有 $\\frac{n(n-1)}{2}$ 种建造地铁线路的方案中，$\\sum_{a=1}^{n-1}\\sum_{b=a+1}^{n}(s_a \\cdot s_b \\cdot d_{a,b})$ 的最小值，其中 $d_{a,b}$ 表示从居民点 $a$ 前往 $b$（或者从 $b$ 前往 $a$，两者是相等的）所需要的时间。\n\n但是他不会，所以他来求助万能的你。", "inputFormat": "第一行，三个用空格分隔的整数 $id,n,t$，表示子任务编号，居民点个数和进出站所需要花费的时间。\n\n接下来 $n$ 行，每行一个整数 $s_i$，表示每个居民点的人口。\n\n接下来 $n - 1$ 行，每行四个用空格分隔的整数 $u_i,v_i,w_i,w_i^{\\prime}$，表示每条道路的两个端点，步行所需时间和地铁所需时间。", "outputFormat": "一行，一个整数，表示所求的最小值。\n\n答案可能超过 $64$ 位整形表示范围，您可以使用 `__int128` 类型，其表示范围为 $[-2^{127},2^{127}-1]$。\n\n以下为 `__int128` 类型的输出模板：\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n__int128 ans;\nint main() {\n    /* Your code here */\n    string str;\n    if (!ans) {\n        str = \"0\";\n    } else {\n        str = \"\";\n        while (ans) {\n            str = ((char)(48 + ans % 10)) + str;\n            ans /= 10;\n        }\n    }\n    cout << str << endl;\n    return 0;\n}\n```", "hint": "**样例 $1$ 解释：**\n\n修建地铁前如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3oh0y5mn.png)\n\n一种最优的修建地铁的方案为从 $2$ 到 $3$ 修建地铁。如下图所示（实线表示修建了地铁）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ian9c6po.png)\n\n从 $1$ 到 $2$ 经过地铁，所需时间为：$6+0=6$，对答案的贡献为：$9\\times9\\times6=486$。\n\n从 $1$ 到 $3$ 经过地铁，所需时间为：$5+0=5$，对答案的贡献为：$9\\times3\\times5=135$。\n\n从 $1$ 到 $4$ 不经过地铁，所需时间为：$6$，对答案的贡献为：$9\\times2\\times6=108$。\n\n从 $1$ 到 $5$ 经过地铁，所需时间为：$6+9+0=15$，对答案的贡献为：$9\\times3\\times15=405$。\n\n从 $2$ 到 $3$ 经过地铁，所需时间为：$6+5+0=11$，对答案的贡献为：$9\\times3\\times11=297$。\n\n从 $2$ 到 $4$ 经过地铁，所需时间为：$6+6+0=12$，对答案的贡献为：$9\\times2\\times12=216$。\n\n从 $2$ 到 $5$ 不经过地铁，所需时间为：$9$，对答案的贡献为：$9\\times3\\times9=243$。\n\n从 $3$ 到 $4$ 经过地铁，所需时间为：$5+6+0=11$，对答案的贡献为：$3\\times2\\times11=66$。\n\n从 $3$ 到 $5$ 经过地铁，所需时间为：$5+6+9+0=20$，对答案的贡献为：$3\\times3\\times20=180$。\n\n从 $4$ 到 $5$ 经过地铁，所需时间为：$6+6+9+0=21$，对答案的贡献为：$2\\times3\\times21=126$。\n\n综上，答案为：$486+135+108+405+297+216+243+66+180+126=2262$。\n\n可以证明不存在更优的修建地铁的方案。\n\n**本题采用捆绑测试且使用子任务依赖。**\n\n| 编号 | 分值 | $n \\le$ | 性质 | 依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $0$ | N/A | 样例 | 无 |\n| $1$ | $5$ | $10$ | 无 | 无 |\n| $2$ | $5$ | $500$ | 无 | $1$ |\n| $3$ | $10$ | $5000$ | 无 | $1,2$ |\n| $4$ | $30$ | $10^5$ | A | 无 |\n| $5$ | $5$ | $10^5$ | B | 无 |\n| $6$ | $20$ | $10^5$ | C | 无 |\n| $7$ | $15$ | $10^5$ | D | 无 |\n| $8$ | $10$ | $10^5$ | 无 | $0,1,2,3,4,5,6,7$ |\n\n特殊性质 A：$t=0$\n\n特殊性质 B：$u_i=i,v_i=i+1$\n\n特殊性质 C：每一个点的度数都不超过 $100$\n\n特殊性质 D：$u_i=1,v_i=i+1$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[_-0 B] 地铁", "background": "小 $\\mathfrak{f}$ 的家乡 A 市最近开通了地铁。", "description": "A 市共有 $n (2\\le n \\le 10^5)$ 个居民点，第 $i$ 个居民点的人口为 $s_i (1 \\le s_i \\le 10^7)$，同时有 $n-1$ 条双向道路，构成一棵树，第 $i $ 条双向道路连接居民点 $u_i$ 和 $v_i$，人步行走过这条道路需要 $w_i (1 \\le w_i\\le 10^7)$ 的时间。\n\n现 A 市政府决定开通一条地铁线路。地铁线路是树上的一条简单路径，若路径经过第 $i$ 条道路，那么地铁从这条道路下方经过只需要 $w_i^{\\prime} (1 \\le w_i^{\\prime} \\le 10^7)$ 的时间，同时，地铁的进出站**共**需要花费 $t (0 \\le t \\le 10^7)$ 的时间。\n\n已知，若一个人从一个居民点前往另一个居民点，如果这条路径与地铁经过的路径有至少一条公共**边**，那么就**一定**会选择**尽可能多地**乘坐地铁。如果没有公共边，那么就会选择完全步行。**题目保证对于第 $i$ 条道路有 $w_i^{\\prime} \\le w_i - t$。** 我们认为，如果两个居民点的人口的乘积越大，那么有人想要在它们之间流动的可能性也越大。\n\n现在，小 $\\mathfrak{f}$ 想知道在所有 $\\frac{n(n-1)}{2}$ 种建造地铁线路的方案中，$\\sum_{a=1}^{n-1}\\sum_{b=a+1}^{n}(s_a \\cdot s_b \\cdot d_{a,b})$ 的最小值，其中 $d_{a,b}$ 表示从居民点 $a$ 前往 $b$（或者从 $b$ 前往 $a$，两者是相等的）所需要的时间。\n\n但是他不会，所以他来求助万能的你。", "inputFormat": "第一行，三个用空格分隔的整数 $id,n,t$，表示子任务编号，居民点个数和进出站所需要花费的时间。\n\n接下来 $n$ 行，每行一个整数 $s_i$，表示每个居民点的人口。\n\n接下来 $n - 1$ 行，每行四个用空格分隔的整数 $u_i,v_i,w_i,w_i^{\\prime}$，表示每条道路的两个端点，步行所需时间和地铁所需时间。", "outputFormat": "一行，一个整数，表示所求的最小值。\n\n答案可能超过 $64$ 位整形表示范围，您可以使用 `__int128` 类型，其表示范围为 $[-2^{127},2^{127}-1]$。\n\n以下为 `__int128` 类型的输出模板：\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n__int128 ans;\nint main() {\n    /* Your code here */\n    string str;\n    if (!ans) {\n        str = \"0\";\n    } else {\n        str = \"\";\n        while (ans) {\n            str = ((char)(48 + ans % 10)) + str;\n            ans /= 10;\n        }\n    }\n    cout << str << endl;\n    return 0;\n}\n```", "hint": "**样例 $1$ 解释：**\n\n修建地铁前如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3oh0y5mn.png)\n\n一种最优的修建地铁的方案为从 $2$ 到 $3$ 修建地铁。如下图所示（实线表示修建了地铁）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ian9c6po.png)\n\n从 $1$ 到 $2$ 经过地铁，所需时间为：$6+0=6$，对答案的贡献为：$9\\times9\\times6=486$。\n\n从 $1$ 到 $3$ 经过地铁，所需时间为：$5+0=5$，对答案的贡献为：$9\\times3\\times5=135$。\n\n从 $1$ 到 $4$ 不经过地铁，所需时间为：$6$，对答案的贡献为：$9\\times2\\times6=108$。\n\n从 $1$ 到 $5$ 经过地铁，所需时间为：$6+9+0=15$，对答案的贡献为：$9\\times3\\times15=405$。\n\n从 $2$ 到 $3$ 经过地铁，所需时间为：$6+5+0=11$，对答案的贡献为：$9\\times3\\times11=297$。\n\n从 $2$ 到 $4$ 经过地铁，所需时间为：$6+6+0=12$，对答案的贡献为：$9\\times2\\times12=216$。\n\n从 $2$ 到 $5$ 不经过地铁，所需时间为：$9$，对答案的贡献为：$9\\times3\\times9=243$。\n\n从 $3$ 到 $4$ 经过地铁，所需时间为：$5+6+0=11$，对答案的贡献为：$3\\times2\\times11=66$。\n\n从 $3$ 到 $5$ 经过地铁，所需时间为：$5+6+9+0=20$，对答案的贡献为：$3\\times3\\times20=180$。\n\n从 $4$ 到 $5$ 经过地铁，所需时间为：$6+6+9+0=21$，对答案的贡献为：$2\\times3\\times21=126$。\n\n综上，答案为：$486+135+108+405+297+216+243+66+180+126=2262$。\n\n可以证明不存在更优的修建地铁的方案。\n\n**本题采用捆绑测试且使用子任务依赖。**\n\n| 编号 | 分值 | $n \\le$ | 性质 | 依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $0$ | N/A | 样例 | 无 |\n| $1$ | $5$ | $10$ | 无 | 无 |\n| $2$ | $5$ | $500$ | 无 | $1$ |\n| $3$ | $10$ | $5000$ | 无 | $1,2$ |\n| $4$ | $30$ | $10^5$ | A | 无 |\n| $5$ | $5$ | $10^5$ | B | 无 |\n| $6$ | $20$ | $10^5$ | C | 无 |\n| $7$ | $15$ | $10^5$ | D | 无 |\n| $8$ | $10$ | $10^5$ | 无 | $0,1,2,3,4,5,6,7$ |\n\n特殊性质 A：$t=0$\n\n特殊性质 B：$u_i=i,v_i=i+1$\n\n特殊性质 C：每一个点的度数都不超过 $100$\n\n特殊性质 D：$u_i=1,v_i=i+1$", "locale": "zh-CN"}}}
{"pid": "P9477", "type": "P", "difficulty": 7, "samples": [["100 0 10\n\n>\n\n<\n\n=", "\n50\n\n25\n\n37"], ["100 10 10\n\n<\n\n<\n\n=", "\n50\n\n25\n\n37"], ["100 0 2\n\n>\n\n!", "\n50\n\n25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 10000, 10000, 10000, 10000, 10000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["交互题", "Special Judge", "O2优化", "信息论", "概率论"], "title": "[_-0 C] 猜数", "background": "小 $\\mathfrak{f}$ 和小 $\\mathfrak{g}$ 在玩猜数游戏，但是因为风声太大，他们听不清楚对方说的话……", "description": "评测机在区间 $[1,n]$ 中等概率随机地选择一个整数 $x$，你的任务是猜测这个数。\n\n你可以每次给出一个 $[1,n]$ 中的整数 $y$，询问 $y$ 和 $x$ 的大小关系。你最多可以询问 $q$ 次。\n\n但是，由于某些原因，评测机有 $p\\%$ 的概率会出错。\n\n具体地说：\n\n- 如果 $y=x$，那么评测机返回 `=`。\n- 如果 $y\\ne x$，且当前已经是第 $q$ 次询问，那么评测机返回 `!`。\n- **得到以上两种结果后，你应当停止询问。**\n- 如果 $y>x$，那么评测机有 $(100-p)\\%$ 的概率返回 `>`，有 $p\\%$ 的概率返回 `<`。\n- 如果 $y<x$，那么评测机有 $(100-p)\\%$ 的概率返回 `<`，有 $p\\%$ 的概率返回 `>`。\n\n每次询问，你需要向**标准输出**输出一个 $[1,n]$ 中的整数，**然后清空缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n然后你需要从**标准输入**中输入一个字符，代表评测机返回的结果。", "inputFormat": "开始询问之前，一行，三个用空格分隔的整数 $n,p,q$。\n\n对于每一次询问，一行，一个字符，一定是 `=`，`!`，`>`，`<` 四者之一。", "outputFormat": "对于每一次询问，一行，一个 $[1,n]$ 中的整数。", "hint": "**样例 $1$ 解释：**\n\n此时该测试点的状态为 `AC`。\n\n**样例 $2$ 解释：**\n\n$x=37,y=50$ 时，$y>x$，有 $10\\%$ 的概率输出 `<`，恰好输出了 `<`。\n\n**样例 $3$ 解释：**\n\n此时该测试点的状态为 `WA`。\n\n**本题采用捆绑测试。**\n\n每个 Subtask 下设有 $5$ 个测试点，你只需通过其中**至少 $3$ 个**测试点即可得到该 Subtask 对应的分数。\n\n本题不使用子任务依赖。\n\n对于所有数据，$n=10^{18}$。\n\n| 编号 | 分值 | $p=$ | $q=$ | 时限 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $5$ | $0$ | $60$ | $\\texttt{1s}$ |\n| $1$ | $10$ | $10$ | $500$ | $\\texttt{1s}$ |\n| $2$ | $10$ | $25$ | $2000$ | $\\texttt{1s}$ |\n| $3$ | $15$ | $25$ | $1000$ | $\\texttt{1s}$ |\n| $4$ | $20$ | $25$ | $700$ | $\\texttt{1s}$ |\n| $5$ | $10$ | $25$ | $400$ | $\\texttt{1s}$ |\n| $6$ | $10$ | $40$ | $2500$ | $\\texttt{1s}$ |\n| $7$ | $10$ | $45$ | $10000$ | $\\texttt{1s}$ |\n| $8$ | $5$ | $48$ | $62500$ | $\\texttt{3s}$ |\n| $9$ | $5$ | $49$ | $250000$ | $\\texttt{10s}$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[_-0 C] 猜数", "background": "小 $\\mathfrak{f}$ 和小 $\\mathfrak{g}$ 在玩猜数游戏，但是因为风声太大，他们听不清楚对方说的话……", "description": "评测机在区间 $[1,n]$ 中等概率随机地选择一个整数 $x$，你的任务是猜测这个数。\n\n你可以每次给出一个 $[1,n]$ 中的整数 $y$，询问 $y$ 和 $x$ 的大小关系。你最多可以询问 $q$ 次。\n\n但是，由于某些原因，评测机有 $p\\%$ 的概率会出错。\n\n具体地说：\n\n- 如果 $y=x$，那么评测机返回 `=`。\n- 如果 $y\\ne x$，且当前已经是第 $q$ 次询问，那么评测机返回 `!`。\n- **得到以上两种结果后，你应当停止询问。**\n- 如果 $y>x$，那么评测机有 $(100-p)\\%$ 的概率返回 `>`，有 $p\\%$ 的概率返回 `<`。\n- 如果 $y<x$，那么评测机有 $(100-p)\\%$ 的概率返回 `<`，有 $p\\%$ 的概率返回 `>`。\n\n每次询问，你需要向**标准输出**输出一个 $[1,n]$ 中的整数，**然后清空缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n然后你需要从**标准输入**中输入一个字符，代表评测机返回的结果。", "inputFormat": "开始询问之前，一行，三个用空格分隔的整数 $n,p,q$。\n\n对于每一次询问，一行，一个字符，一定是 `=`，`!`，`>`，`<` 四者之一。", "outputFormat": "对于每一次询问，一行，一个 $[1,n]$ 中的整数。", "hint": "**样例 $1$ 解释：**\n\n此时该测试点的状态为 `AC`。\n\n**样例 $2$ 解释：**\n\n$x=37,y=50$ 时，$y>x$，有 $10\\%$ 的概率输出 `<`，恰好输出了 `<`。\n\n**样例 $3$ 解释：**\n\n此时该测试点的状态为 `WA`。\n\n**本题采用捆绑测试。**\n\n每个 Subtask 下设有 $5$ 个测试点，你只需通过其中**至少 $3$ 个**测试点即可得到该 Subtask 对应的分数。\n\n本题不使用子任务依赖。\n\n对于所有数据，$n=10^{18}$。\n\n| 编号 | 分值 | $p=$ | $q=$ | 时限 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $5$ | $0$ | $60$ | $\\texttt{1s}$ |\n| $1$ | $10$ | $10$ | $500$ | $\\texttt{1s}$ |\n| $2$ | $10$ | $25$ | $2000$ | $\\texttt{1s}$ |\n| $3$ | $15$ | $25$ | $1000$ | $\\texttt{1s}$ |\n| $4$ | $20$ | $25$ | $700$ | $\\texttt{1s}$ |\n| $5$ | $10$ | $25$ | $400$ | $\\texttt{1s}$ |\n| $6$ | $10$ | $40$ | $2500$ | $\\texttt{1s}$ |\n| $7$ | $10$ | $45$ | $10000$ | $\\texttt{1s}$ |\n| $8$ | $5$ | $48$ | $62500$ | $\\texttt{3s}$ |\n| $9$ | $5$ | $49$ | $250000$ | $\\texttt{10s}$ |", "locale": "zh-CN"}}}
{"pid": "P9478", "type": "P", "difficulty": 5, "samples": [["0\n5 5 3\n1 1 3 5 3\n2 3 1 3 5\n3 1 1 5 5\n", "13\n"], ["见附件中的 color/color2.in。", "见附件中的 color/color2.ans。"], ["见附件中的 color/color3.in。", "见附件中的 color/color3.ans。"], ["见附件中的 color/color4.in。", "见附件中的 color/color4.ans。"], ["见附件中的 color/color5.in。", "见附件中的 color/color5.ans。"], ["见附件中的 color/color6.in。", "见附件中的 color/color6.ans。"], ["见附件中的 color/color7.in。", "见附件中的 color/color7.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "2023", "NOI", "离散化", "O2优化", "扫描线"], "title": "[NOI2023] 方格染色", "background": null, "description": "有一个 $n$ 列 $m$ 行的棋盘，共 $n \\times m$ 个方格，我们约定行、列均从 $1$ 开始标号，且第 $i$ 列、第 $j$ 行的方格坐标记为 $(i, j)$。初始时，所有方格的颜色均为白色。现在，你要对这个棋盘进行 $q$ 次染色操作。\n\n染色操作分为三种，分别为：\n\n1. 将一条横线染为黑色。具体地说，给定两个方格 $(x_1, y_1)$ 和 $(x_2, y_2)$，保证 $x_1 \\le x_2$，$y_1 = y_2$，将这两个方格之间的所有方格（包括这两个方格）染为黑色。\n2. 将一条竖线染为黑色。具体地说，给定两个方格 $(x_1, y_1)$ 和 $(x_2, y_2)$，保证 $x_1 = x_2$，$y_1 \\le y_2$，将这两个方格之间的所有方格（包括这两个方格）染为黑色。\n3. 将一条斜线染为黑色。具体地说，给定两个方格 $(x_1, y_1)$ 和 $(x_2, y_2)$，保证 $x_1 \\le x_2$，$x_2 - x_1 = y_2 - y_1$，将这两个方格之间斜线上所有形如 $(x_1 + i, y_1 + i)$（$0 \\le i \\le x_2 - x_1$）的方格染为黑色。**这种染色操作发生的次数不超过 $5$ 次。**\n\n现在你想知道，在经过 $q$ 次染色后，棋盘上有多少个黑色的方格。", "inputFormat": "输入的第一行包含一个整数 $c$，表示测试点编号。$c = 0$ 表示该测试点为样例。\n\n输入的第二行包含三个正整数 $n, m, q$，分别表示棋盘的列、行和染色操作的次数。\n\n接下来 $q$ 行，每行输入五个正整数 $t, x_1, y_1, x_2, y_2$，其中 $t = 1$ 表示第一种染色操作，$t = 2$ 表示第二种染色操作，$t = 3$ 表示第三种染色操作。$x_1, y_1, x_2, y_2$ 表示染色操作的四个参数。", "outputFormat": "输出一行包含一个整数，表示棋盘上被染为黑色的方格的数量。", "hint": "**【样例解释 #1】**\n\n在这组样例中，我们一共做了三次染色操作，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ojo6cs1.png)\n\n第一次操作时，将 $(1, 3), (2, 3), (3, 3), (4, 3), (5, 3)$ 染为黑色。\n\n第二次操作时，将 $(3, 1), (3, 2), (3, 3), (3, 4), (3, 5)$ 染为黑色。\n\n第三次操作时，将 $(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)$ 染为黑色。\n\n**【样例 #2】**\n\n这个样例满足测试点 $1 \\sim 5$ 的条件限制。\n\n**【样例 #3】**\n\n这个样例满足测试点 $6 \\sim 9$ 的条件限制。\n\n**【样例 #4】**\n\n这个样例满足测试点 $10 \\sim 13$ 的条件限制。\n\n**【样例 #5】**\n\n这个样例满足测试点 $14 \\sim 17$ 的条件限制。\n\n**【样例 #6】**\n\n这个样例满足测试点 $18 \\sim 19$ 的条件限制。\n\n**【样例 #7】**\n\n这个样例满足测试点 $20$ 的条件限制。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1 \\le n, m \\le 10 ^ 9$，$1 \\le q \\le 10 ^ 5$，$1 \\le x_1, x_2 \\le n$，$1 \\le y_1, y_2 \\le m$，**且最多有 $5$ 次第三种染色操作**。\n\n::cute-table{tuack}\n\n|测试点编号|$n, m \\le$|$q \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1 \\sim 5$|$300$|$300$|无|\n|$6 \\sim 9$|$10 ^ 5$|$2,000$|无|\n|$10 \\sim 13$|$10 ^ 5$|$10 ^ 5$|A|\n|$14 \\sim 17$|$10 ^ 5$|$10 ^ 5$|B|\n|$18 \\sim 19$|$10 ^ 5$|$10 ^ 5$|无|\n|$20$|$10 ^ 9$|$10 ^ 5$|无|\n\n特殊性质 A：保证只有第一种染色操作。\n\n特殊性质 B：保证只有第一种和第二种染色操作。\n\nUpdate on 2023-08-04: 更新一组 Hack 数据，该 Hack 数据的 $c = 0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2023] 方格染色", "background": null, "description": "有一个 $n$ 列 $m$ 行的棋盘，共 $n \\times m$ 个方格，我们约定行、列均从 $1$ 开始标号，且第 $i$ 列、第 $j$ 行的方格坐标记为 $(i, j)$。初始时，所有方格的颜色均为白色。现在，你要对这个棋盘进行 $q$ 次染色操作。\n\n染色操作分为三种，分别为：\n\n1. 将一条横线染为黑色。具体地说，给定两个方格 $(x_1, y_1)$ 和 $(x_2, y_2)$，保证 $x_1 \\le x_2$，$y_1 = y_2$，将这两个方格之间的所有方格（包括这两个方格）染为黑色。\n2. 将一条竖线染为黑色。具体地说，给定两个方格 $(x_1, y_1)$ 和 $(x_2, y_2)$，保证 $x_1 = x_2$，$y_1 \\le y_2$，将这两个方格之间的所有方格（包括这两个方格）染为黑色。\n3. 将一条斜线染为黑色。具体地说，给定两个方格 $(x_1, y_1)$ 和 $(x_2, y_2)$，保证 $x_1 \\le x_2$，$x_2 - x_1 = y_2 - y_1$，将这两个方格之间斜线上所有形如 $(x_1 + i, y_1 + i)$（$0 \\le i \\le x_2 - x_1$）的方格染为黑色。**这种染色操作发生的次数不超过 $5$ 次。**\n\n现在你想知道，在经过 $q$ 次染色后，棋盘上有多少个黑色的方格。", "inputFormat": "输入的第一行包含一个整数 $c$，表示测试点编号。$c = 0$ 表示该测试点为样例。\n\n输入的第二行包含三个正整数 $n, m, q$，分别表示棋盘的列、行和染色操作的次数。\n\n接下来 $q$ 行，每行输入五个正整数 $t, x_1, y_1, x_2, y_2$，其中 $t = 1$ 表示第一种染色操作，$t = 2$ 表示第二种染色操作，$t = 3$ 表示第三种染色操作。$x_1, y_1, x_2, y_2$ 表示染色操作的四个参数。", "outputFormat": "输出一行包含一个整数，表示棋盘上被染为黑色的方格的数量。", "hint": "**【样例解释 #1】**\n\n在这组样例中，我们一共做了三次染色操作，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ojo6cs1.png)\n\n第一次操作时，将 $(1, 3), (2, 3), (3, 3), (4, 3), (5, 3)$ 染为黑色。\n\n第二次操作时，将 $(3, 1), (3, 2), (3, 3), (3, 4), (3, 5)$ 染为黑色。\n\n第三次操作时，将 $(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)$ 染为黑色。\n\n**【样例 #2】**\n\n这个样例满足测试点 $1 \\sim 5$ 的条件限制。\n\n**【样例 #3】**\n\n这个样例满足测试点 $6 \\sim 9$ 的条件限制。\n\n**【样例 #4】**\n\n这个样例满足测试点 $10 \\sim 13$ 的条件限制。\n\n**【样例 #5】**\n\n这个样例满足测试点 $14 \\sim 17$ 的条件限制。\n\n**【样例 #6】**\n\n这个样例满足测试点 $18 \\sim 19$ 的条件限制。\n\n**【样例 #7】**\n\n这个样例满足测试点 $20$ 的条件限制。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1 \\le n, m \\le 10 ^ 9$，$1 \\le q \\le 10 ^ 5$，$1 \\le x_1, x_2 \\le n$，$1 \\le y_1, y_2 \\le m$，**且最多有 $5$ 次第三种染色操作**。\n\n::cute-table{tuack}\n\n|测试点编号|$n, m \\le$|$q \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1 \\sim 5$|$300$|$300$|无|\n|$6 \\sim 9$|$10 ^ 5$|$2,000$|无|\n|$10 \\sim 13$|$10 ^ 5$|$10 ^ 5$|A|\n|$14 \\sim 17$|$10 ^ 5$|$10 ^ 5$|B|\n|$18 \\sim 19$|$10 ^ 5$|$10 ^ 5$|无|\n|$20$|$10 ^ 9$|$10 ^ 5$|无|\n\n特殊性质 A：保证只有第一种染色操作。\n\n特殊性质 B：保证只有第一种和第二种染色操作。\n\nUpdate on 2023-08-04: 更新一组 Hack 数据，该 Hack 数据的 $c = 0$。", "locale": "zh-CN"}}}
{"pid": "P9479", "type": "P", "difficulty": 7, "samples": [["0 3\n1 2 1\n\n2 2 1\n1\n2 2 0\n1", "3\n16\n15"], ["见附件中的 tree/tree2.in。", "见附件中的 tree/tree2.ans。"], ["见附件中的 tree/tree3.in。", "见附件中的 tree/tree3.ans。"], ["见附件中的 tree/tree4.in。", "见附件中的 tree/tree4.ans。"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2023", "NOI", "O2优化", "虚树", "状压 DP"], "title": "[NOI2023] 桂花树", "background": "", "description": "小 B 八年前看到的桂花树是一棵 $n$ 个节点的树 $T$，**保证 $T$ 的非根结点的父亲的编号小于自己**。给定整数 $k$，称一棵 $(n+m)$ 个节点的有根树 $T^{\\prime}$ 是繁荣的，当且仅当以下所有条件满足：\n\n1. 对于任意满足 $1 \\le i,j \\le n$ 的 $(i,j)$，在树 $T$ 和树 $T^{\\prime}$ 上，节点 $i$ 和 $j$ 的最近公共祖先编号相同。\n2. 对于任意满足 $1 \\le i,j \\le n + m$ 的 $(i,j)$，在树 $T^{\\prime}$ 上，节点 $i$ 和 $j$ 的最近公共祖先编号不超过 $\\max(i,j)+k$。\n\n**注意题目中所有树的节点均从 $1$ 开始编号，且根结点编号为 $1$。$T^{\\prime}$ 不需要满足非根结点的父亲编号小于自己。**\n\n小 B 想知道有多少棵 $(n+m)$ 个节点的树是繁荣的，认为两棵树不同当且仅当存在某一个节点在两棵树上的父亲不同。你只输出方案数在模 $(10^9+7)$ 意义下的值。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含两个整数 $c,t$，分别表示测试点编号和测试数据组数。$c=0$ 表示该测试点为样例。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含三个整数 $n,m,k$。\n\n输入的第二行包含 $n-1$ 个整数 $f_2,f_3,\\dots,f_n$，其中 $f_i$ 表示 $T$ 中节点 $i$ 的父亲节点编号。", "outputFormat": "对于每组测试数据输出一行一个整数，表示繁荣的树的数量在模 $(10^9+7)$ 意义下的答案。", "hint": "**【样例解释 #1】**\n\n对于样例中的第一组测试数据，有三棵合法的树，其每个节点的的父亲构成的序列 $\\{f_2,f_3\\}$ 分别为 $\\{1,1\\}$、$\\{3,1\\}$、$\\{1,2\\}$。注意这组测试数据的第二行为空行。\n\n对于样例中的第二组、第三组测试数据，共有 $16$ 棵树满足第一个条件，其中只有父亲序列为 $\\{4,4,1\\}$ 的树在第三组测试数据中不满足第二个条件。\n\n**【样例解释 #2】**\n\n该组样例满足 $n \\le 100$，五组测试数据中 $m$ 分别不超过 $0, 1, 1, 2, 2$。\n\n**【样例解释 #3】**\n\n该组样例满足 $k = 0$，五组测试数据中前两组测试数据满足 $n = 1$，第一、三、四组测试数据满足 $n, m \\le 100$。\n\n**【样例解释 #4】**\n\n该组样例前两组测试数据满足 $n = 1$，第一、三、四组测试数据满足 $n, m \\le 100$。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1 \\le t \\le 15$，$1 \\le n \\le 3 \\times 10^4$，$0 \\le m \\le 3000$，$0 \\le k \\le 10$，$1 \\le f_i \\le i - 1$。\n\n| 测试点编号 | $n \\le$ | $m \\le $| $k \\le $|\n| :--: | :--: | :--: | :--: |\n| $1,2$ | $4$|$4$|$10$|\n|$3$|$3\\times 10^4$|$0$|$10$|\n|$4$|$10^2$|$1$|$10$|\n|$5$|$3 \\times 10^4$|$1$|$10$|\n|$6$|$10^2$|$2$|$10$|\n|$7$|$3\\times 10^4$|$2$|$10$|\n|$8,9$|$1$|$10^2$|$0$|\n|$10$|$1$|$3,000$|$0$|\n|$11$|$1$|$10^2$|$10$|\n|$12$|$1$|$3,000$|$10$|\n|$13,14$|$10^2$|$10^2$|$0$|\n|$15,16$|$3\\times 10^4$|$3,000$|$0$|\n|$17,18$|$10^2$|$10^2$|$10$|\n|$19,20$|$3\\times 10^4$|$3,000$|$10$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2023] 桂花树", "background": "", "description": "小 B 八年前看到的桂花树是一棵 $n$ 个节点的树 $T$，**保证 $T$ 的非根结点的父亲的编号小于自己**。给定整数 $k$，称一棵 $(n+m)$ 个节点的有根树 $T^{\\prime}$ 是繁荣的，当且仅当以下所有条件满足：\n\n1. 对于任意满足 $1 \\le i,j \\le n$ 的 $(i,j)$，在树 $T$ 和树 $T^{\\prime}$ 上，节点 $i$ 和 $j$ 的最近公共祖先编号相同。\n2. 对于任意满足 $1 \\le i,j \\le n + m$ 的 $(i,j)$，在树 $T^{\\prime}$ 上，节点 $i$ 和 $j$ 的最近公共祖先编号不超过 $\\max(i,j)+k$。\n\n**注意题目中所有树的节点均从 $1$ 开始编号，且根结点编号为 $1$。$T^{\\prime}$ 不需要满足非根结点的父亲编号小于自己。**\n\n小 B 想知道有多少棵 $(n+m)$ 个节点的树是繁荣的，认为两棵树不同当且仅当存在某一个节点在两棵树上的父亲不同。你只输出方案数在模 $(10^9+7)$ 意义下的值。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含两个整数 $c,t$，分别表示测试点编号和测试数据组数。$c=0$ 表示该测试点为样例。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含三个整数 $n,m,k$。\n\n输入的第二行包含 $n-1$ 个整数 $f_2,f_3,\\dots,f_n$，其中 $f_i$ 表示 $T$ 中节点 $i$ 的父亲节点编号。", "outputFormat": "对于每组测试数据输出一行一个整数，表示繁荣的树的数量在模 $(10^9+7)$ 意义下的答案。", "hint": "**【样例解释 #1】**\n\n对于样例中的第一组测试数据，有三棵合法的树，其每个节点的的父亲构成的序列 $\\{f_2,f_3\\}$ 分别为 $\\{1,1\\}$、$\\{3,1\\}$、$\\{1,2\\}$。注意这组测试数据的第二行为空行。\n\n对于样例中的第二组、第三组测试数据，共有 $16$ 棵树满足第一个条件，其中只有父亲序列为 $\\{4,4,1\\}$ 的树在第三组测试数据中不满足第二个条件。\n\n**【样例解释 #2】**\n\n该组样例满足 $n \\le 100$，五组测试数据中 $m$ 分别不超过 $0, 1, 1, 2, 2$。\n\n**【样例解释 #3】**\n\n该组样例满足 $k = 0$，五组测试数据中前两组测试数据满足 $n = 1$，第一、三、四组测试数据满足 $n, m \\le 100$。\n\n**【样例解释 #4】**\n\n该组样例前两组测试数据满足 $n = 1$，第一、三、四组测试数据满足 $n, m \\le 100$。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1 \\le t \\le 15$，$1 \\le n \\le 3 \\times 10^4$，$0 \\le m \\le 3000$，$0 \\le k \\le 10$，$1 \\le f_i \\le i - 1$。\n\n| 测试点编号 | $n \\le$ | $m \\le $| $k \\le $|\n| :--: | :--: | :--: | :--: |\n| $1,2$ | $4$|$4$|$10$|\n|$3$|$3\\times 10^4$|$0$|$10$|\n|$4$|$10^2$|$1$|$10$|\n|$5$|$3 \\times 10^4$|$1$|$10$|\n|$6$|$10^2$|$2$|$10$|\n|$7$|$3\\times 10^4$|$2$|$10$|\n|$8,9$|$1$|$10^2$|$0$|\n|$10$|$1$|$3,000$|$0$|\n|$11$|$1$|$10^2$|$10$|\n|$12$|$1$|$3,000$|$10$|\n|$13,14$|$10^2$|$10^2$|$0$|\n|$15,16$|$3\\times 10^4$|$3,000$|$0$|\n|$17,18$|$10^2$|$10^2$|$10$|\n|$19,20$|$3\\times 10^4$|$3,000$|$10$|", "locale": "zh-CN"}}}
{"pid": "P9480", "type": "P", "difficulty": 7, "samples": [["0\n4 2 2\n1 2\n2 3\n3 4\n1 3\n2 4\n2 3\n", "3\n"], ["见附件中的 dfs/dfs2.in。", "见附件中的 dfs/dfs2.ans。"], ["见附件中的 dfs/dfs3.in。", "见附件中的 dfs/dfs3.ans。"], ["见附件中的 dfs/dfs4.in。", "见附件中的 dfs/dfs4.ans。"], ["见附件中的 dfs/dfs5.in。", "见附件中的 dfs/dfs5.ans。"], ["见附件中的 dfs/dfs6.in。", "见附件中的 dfs/dfs6.ans。"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2023", "NOI", "离散化", "O2优化", "动态规划优化", "树形 DP", "容斥原理"], "title": "[NOI2023] 深搜", "background": "", "description": "深度优先搜索是一种常见的搜索算法。通过此算法，我们可以从一个无重边、无自环的无向连通图 $G = (V, E)$，和某个出发点 $s$，得到一棵树 $T$。\n\n算法的流程描述如下:\n\n1. 将栈 $S$ 设置为空，并令 $T = (V, \\emptyset)$，即 $T$ 的边集初始为空。\n2. 首先将出发点 $s$ 压入 $S$ 中。\n3. 访问栈顶节点 $u$，并将 $u$ 标记为“已访问的”。\n4. 如果存在与 $u$ 相邻且未被访问的节点，则**任意地**从这些节点中挑选一个记为 $v$。我们将边 $(u, v)$ 加入 $T$ 的边集中，并将 $v$ 压入栈 $S$ 中，然后**回到步骤 3**。若不存在这样的节点，则从栈中弹出节点 $u$。\n\n可以证明，当图 $G$ 为连通图时，该算法会得到图的某一棵生成树 $T$。但**算法得到的树 $T$ 可能不是唯一的，它取决于搜索的顺序，也就是算法的第 4 步所选取的顶点**。指定出发点 $s$ 后，如果能够选取一种特定的搜索顺序，使得算法得到的树恰好是 $T$，则我们称 **$T$ 是 $G$ 的一棵 $s$-dfs 树**。\n\n现在给定一棵 $n$ 个顶点的树 $T$，顶点编号为 $1 \\sim n$，并额外给出 $m$ 条边。我们保证这 $m$ 条边两两不同，连接不同的顶点，且与 $T$ 中的 $n - 1$ 条树边两两不同。我们称额外给出的 $m$ 条边为**非树边**。在这 $n$ 个顶点中，我们指定了恰好 $k$ 个顶点作为**关键点**。\n\n现在你想知道，有多少种选取这 $m$ 条非树边的方法（可以全部不选），使得：将 $T$ 的边与被选中的非树边构成图 $G$ 之后，存在某个**关键点** $s$，使得 $T$ 是 $G$ 的一棵 $s$-dfs 树。\n\n由于答案可能十分巨大，你只需要输出方案数在模 $(10 ^ 9 + 7)$ 意义下的值。", "inputFormat": "输入的第一行包含一个整数 $c$，表示测试点编号。$c = 0$ 表示该测试点为样例。\n\n输入的第二行包含三个正整数 $n, m, k$，分别表示顶点个数，非树边的数量，关键点的数量。\n\n接下来 $n - 1$ 行，每行包含两个正整数 $u, v$ 表示树 $T$ 的一条边。保证这 $n - 1$ 条边构成了一棵树。\n\n接下来 $m$ 行，每行包含两个正整数 $a, b$ 表示一条非树边。保证 $(a, b)$ 不与树上的边重合，且没有重边。\n\n输入的最后一行包含 $k$ 个正整数 $s_1, s_2, \\dots, s_k$，表示 $k$ 个关键点的编号。保证 $s_1, s_2, \\dots, s_k$ 互不相同。", "outputFormat": "输出一行包含一个非负整数，表示方案数在模 $(10 ^ 9 + 7)$ 意义下的值。", "hint": "**【样例解释 #1】**\n\n在这个样例中，有三种选取非树边的方法：只选取边 $(1, 3)$，只选取边 $(2, 4)$，或不选取任何条非树边。\n\n如果只选取边 $(1, 3)$，或者不选取任何一条非树边，则我们发现 $T$ 都是图 $G$ 的 $3$-dfs 树。指定的搜索顺序如下：\n1. 将 $3$ 放入栈 $S$ 中。此时 $S = [3]$。\n2. 将 $3$ 标记为“已访问的”。\n3. 由于 $3$ 与 $2$ 相连，且 $2$ 是“未访问的”，将 $2$ 放入栈 $S$ 中，并将 $(3, 2)$ 加入树 $T$ 中，此时 $S = [3, 2]$。\n4. 将 $2$ 标记为“已访问的”。\n5. 由于 $2$ 与 $1$ 相连，且 $1$ 是“未访问的”，将 $1$ 放入栈 $S$ 中，并将 $(2, 1)$ 加入树 $T$ 中，此时 $S = [3, 2, 1]$。\n6. 由于与 $1$ 相邻的点都是“已访问的”，将 $1$ 弹出栈，此时 $S = [3, 2]$。\n7. 由于与 $2$ 相邻的点都是“已访问的”，将 $2$ 弹出栈，此时 $S = [3]$。\n8. 由于 $3$ 与 $4$ 相连，且 $4$ 是“未访问的”，将 $4$ 放入栈 $S$ 中，并将 $(3, 4)$ 加入树 $T$ 中，此时 $S = [3, 4]$。\n9. 由于与 $4$ 相连的点都是“已访问的”，将 $4$ 弹出栈，此时 $S = [3]$。\n10. 由于与 $3$ 相连的点都是“己访问的”，将 $3$ 弹出栈，此时 $S$重新变为空。\n\n如果只选取边 $(2, 4)$，则我们可以说明 $T$ 是图 $G$ 的 $2$-dfs 树。指定的搜索顺序如下：\n\n1. 将 $2$ 放入栈 $S$ 中。此时 $S = [2]$。\n2. 将 $2$ 标记为“已访问的”。\n3. 由于 $2$ 与 $3$ 相连，且 $3$ 是“未访问的”，将 $3$ 放入栈 $S$ 中，并将 $(2, 3)$ 加入树 $T$ 中，此时 $S = [2, 3]$。\n4. 将 $3$ 标记为“已访问的”。\n5. 由于 $3$ 与 $4$ 相连，且 $4$ 是“未访问的”，将 $4$ 放入栈 $S$ 中，并将 $(3, 4)$ 加入树 $T$ 中，此时 $S = [2, 3, 4]$。\n6. 由于与 $4$ 相邻的点都是“己访问的”，将 $4$ 弹出栈，此时 $S = [2, 3]$。\n7. 由于与 $3$ 相邻的点都是“已访问的”，将 $3$ 弹出栈，此时 $S= [2]$。\n8. 由于 $2$ 与 $1$ 相连，且 $1$ 是“未访问的”，将 $1$ 放入栈 $S$ 中，并将 $(2, 1)$ 加入树 $T$ 中，此时 $S = [2, 1]$。\n9. 由于与 $1$ 相连的点都是“已访问的”，将 $1$ 弹出栈此时 $S = [2]$。\n10. 由于与 $2$ 相连的点都是“已访问的”，将 $2$ 弹出栈，此时 $S$ 重新变为空。\n\n**【样例解释 #2】**\n\n这个样例满足测试点 $4 \\sim 6$ 的约束条件。\n\n**【样例解释 #3】**\n\n这个样例满足测试点 $10 \\sim 11$ 的约束条件。\n\n**【样例解释 #4】**\n\n这个样例满足测试点 $12 \\sim 13$ 的约束条件。\n\n**【样例解释 #5】**\n\n这个样例满足测试点 $14 \\sim 16$ 的约束条件。\n\n**【样例解释 #6】**\n\n这个样例满足测试点 $23 \\sim 24$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1 \\le k \\le n \\le 5 \\times 10 ^ 5$，$1 \\le m \\le 5 \\times 10 ^ 5$。\n\n|测试点编号|$n \\le$|$m \\le$|$k \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1 \\sim 3$|$6$|$6$|$n$|无|\n|$4 \\sim 6$|$15$|$15$|$6$|无|\n|$7 \\sim 9$|$300$|$300$|$6$|无|\n|$10 \\sim 11$|$300$|$300$|$n$|A|\n|$12 \\sim 13$|$300$|$300$|$n$|B|\n|$14 \\sim 16$|$300$|$300$|$n$|无|\n|$17 \\sim 18$|$2 \\times 10 ^ 5$|$2 \\times 10 ^ 5$|$n$|A|\n|$19 \\sim 21$|$2 \\times 10 ^ 5$|$2 \\times 10 ^ 5$|$n$|B|\n|$22$|$2 \\times 10 ^ 5$|$2 \\times 10 ^ 5$|$n$|无|\n|$23 \\sim 25$|$5 \\times 10 ^ 5$|$5 \\times 10 ^ 5$|$n$|无|\n\n特殊性质 A：保证在 $T$ 中，$i$ 号点与 $i + 1$ 号点相连（$1 \\le i < n$）。\n\n特殊性质 B：保证若将 $T$ 的边与所有 $m$ 条非树边构成一个图 $G$，则 $T$ 是 $G$ 的棵 $1$-dfs 树。\n\n**请注意，$1$ 号点不一定是 $k$ 个关键点之一。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2023] 深搜", "background": "", "description": "深度优先搜索是一种常见的搜索算法。通过此算法，我们可以从一个无重边、无自环的无向连通图 $G = (V, E)$，和某个出发点 $s$，得到一棵树 $T$。\n\n算法的流程描述如下:\n\n1. 将栈 $S$ 设置为空，并令 $T = (V, \\emptyset)$，即 $T$ 的边集初始为空。\n2. 首先将出发点 $s$ 压入 $S$ 中。\n3. 访问栈顶节点 $u$，并将 $u$ 标记为“已访问的”。\n4. 如果存在与 $u$ 相邻且未被访问的节点，则**任意地**从这些节点中挑选一个记为 $v$。我们将边 $(u, v)$ 加入 $T$ 的边集中，并将 $v$ 压入栈 $S$ 中，然后**回到步骤 3**。若不存在这样的节点，则从栈中弹出节点 $u$。\n\n可以证明，当图 $G$ 为连通图时，该算法会得到图的某一棵生成树 $T$。但**算法得到的树 $T$ 可能不是唯一的，它取决于搜索的顺序，也就是算法的第 4 步所选取的顶点**。指定出发点 $s$ 后，如果能够选取一种特定的搜索顺序，使得算法得到的树恰好是 $T$，则我们称 **$T$ 是 $G$ 的一棵 $s$-dfs 树**。\n\n现在给定一棵 $n$ 个顶点的树 $T$，顶点编号为 $1 \\sim n$，并额外给出 $m$ 条边。我们保证这 $m$ 条边两两不同，连接不同的顶点，且与 $T$ 中的 $n - 1$ 条树边两两不同。我们称额外给出的 $m$ 条边为**非树边**。在这 $n$ 个顶点中，我们指定了恰好 $k$ 个顶点作为**关键点**。\n\n现在你想知道，有多少种选取这 $m$ 条非树边的方法（可以全部不选），使得：将 $T$ 的边与被选中的非树边构成图 $G$ 之后，存在某个**关键点** $s$，使得 $T$ 是 $G$ 的一棵 $s$-dfs 树。\n\n由于答案可能十分巨大，你只需要输出方案数在模 $(10 ^ 9 + 7)$ 意义下的值。", "inputFormat": "输入的第一行包含一个整数 $c$，表示测试点编号。$c = 0$ 表示该测试点为样例。\n\n输入的第二行包含三个正整数 $n, m, k$，分别表示顶点个数，非树边的数量，关键点的数量。\n\n接下来 $n - 1$ 行，每行包含两个正整数 $u, v$ 表示树 $T$ 的一条边。保证这 $n - 1$ 条边构成了一棵树。\n\n接下来 $m$ 行，每行包含两个正整数 $a, b$ 表示一条非树边。保证 $(a, b)$ 不与树上的边重合，且没有重边。\n\n输入的最后一行包含 $k$ 个正整数 $s_1, s_2, \\dots, s_k$，表示 $k$ 个关键点的编号。保证 $s_1, s_2, \\dots, s_k$ 互不相同。", "outputFormat": "输出一行包含一个非负整数，表示方案数在模 $(10 ^ 9 + 7)$ 意义下的值。", "hint": "**【样例解释 #1】**\n\n在这个样例中，有三种选取非树边的方法：只选取边 $(1, 3)$，只选取边 $(2, 4)$，或不选取任何条非树边。\n\n如果只选取边 $(1, 3)$，或者不选取任何一条非树边，则我们发现 $T$ 都是图 $G$ 的 $3$-dfs 树。指定的搜索顺序如下：\n1. 将 $3$ 放入栈 $S$ 中。此时 $S = [3]$。\n2. 将 $3$ 标记为“已访问的”。\n3. 由于 $3$ 与 $2$ 相连，且 $2$ 是“未访问的”，将 $2$ 放入栈 $S$ 中，并将 $(3, 2)$ 加入树 $T$ 中，此时 $S = [3, 2]$。\n4. 将 $2$ 标记为“已访问的”。\n5. 由于 $2$ 与 $1$ 相连，且 $1$ 是“未访问的”，将 $1$ 放入栈 $S$ 中，并将 $(2, 1)$ 加入树 $T$ 中，此时 $S = [3, 2, 1]$。\n6. 由于与 $1$ 相邻的点都是“已访问的”，将 $1$ 弹出栈，此时 $S = [3, 2]$。\n7. 由于与 $2$ 相邻的点都是“已访问的”，将 $2$ 弹出栈，此时 $S = [3]$。\n8. 由于 $3$ 与 $4$ 相连，且 $4$ 是“未访问的”，将 $4$ 放入栈 $S$ 中，并将 $(3, 4)$ 加入树 $T$ 中，此时 $S = [3, 4]$。\n9. 由于与 $4$ 相连的点都是“已访问的”，将 $4$ 弹出栈，此时 $S = [3]$。\n10. 由于与 $3$ 相连的点都是“己访问的”，将 $3$ 弹出栈，此时 $S$重新变为空。\n\n如果只选取边 $(2, 4)$，则我们可以说明 $T$ 是图 $G$ 的 $2$-dfs 树。指定的搜索顺序如下：\n\n1. 将 $2$ 放入栈 $S$ 中。此时 $S = [2]$。\n2. 将 $2$ 标记为“已访问的”。\n3. 由于 $2$ 与 $3$ 相连，且 $3$ 是“未访问的”，将 $3$ 放入栈 $S$ 中，并将 $(2, 3)$ 加入树 $T$ 中，此时 $S = [2, 3]$。\n4. 将 $3$ 标记为“已访问的”。\n5. 由于 $3$ 与 $4$ 相连，且 $4$ 是“未访问的”，将 $4$ 放入栈 $S$ 中，并将 $(3, 4)$ 加入树 $T$ 中，此时 $S = [2, 3, 4]$。\n6. 由于与 $4$ 相邻的点都是“己访问的”，将 $4$ 弹出栈，此时 $S = [2, 3]$。\n7. 由于与 $3$ 相邻的点都是“已访问的”，将 $3$ 弹出栈，此时 $S= [2]$。\n8. 由于 $2$ 与 $1$ 相连，且 $1$ 是“未访问的”，将 $1$ 放入栈 $S$ 中，并将 $(2, 1)$ 加入树 $T$ 中，此时 $S = [2, 1]$。\n9. 由于与 $1$ 相连的点都是“已访问的”，将 $1$ 弹出栈此时 $S = [2]$。\n10. 由于与 $2$ 相连的点都是“已访问的”，将 $2$ 弹出栈，此时 $S$ 重新变为空。\n\n**【样例解释 #2】**\n\n这个样例满足测试点 $4 \\sim 6$ 的约束条件。\n\n**【样例解释 #3】**\n\n这个样例满足测试点 $10 \\sim 11$ 的约束条件。\n\n**【样例解释 #4】**\n\n这个样例满足测试点 $12 \\sim 13$ 的约束条件。\n\n**【样例解释 #5】**\n\n这个样例满足测试点 $14 \\sim 16$ 的约束条件。\n\n**【样例解释 #6】**\n\n这个样例满足测试点 $23 \\sim 24$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1 \\le k \\le n \\le 5 \\times 10 ^ 5$，$1 \\le m \\le 5 \\times 10 ^ 5$。\n\n|测试点编号|$n \\le$|$m \\le$|$k \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1 \\sim 3$|$6$|$6$|$n$|无|\n|$4 \\sim 6$|$15$|$15$|$6$|无|\n|$7 \\sim 9$|$300$|$300$|$6$|无|\n|$10 \\sim 11$|$300$|$300$|$n$|A|\n|$12 \\sim 13$|$300$|$300$|$n$|B|\n|$14 \\sim 16$|$300$|$300$|$n$|无|\n|$17 \\sim 18$|$2 \\times 10 ^ 5$|$2 \\times 10 ^ 5$|$n$|A|\n|$19 \\sim 21$|$2 \\times 10 ^ 5$|$2 \\times 10 ^ 5$|$n$|B|\n|$22$|$2 \\times 10 ^ 5$|$2 \\times 10 ^ 5$|$n$|无|\n|$23 \\sim 25$|$5 \\times 10 ^ 5$|$5 \\times 10 ^ 5$|$n$|无|\n\n特殊性质 A：保证在 $T$ 中，$i$ 号点与 $i + 1$ 号点相连（$1 \\le i < n$）。\n\n特殊性质 B：保证若将 $T$ 的边与所有 $m$ 条非树边构成一个图 $G$，则 $T$ 是 $G$ 的棵 $1$-dfs 树。\n\n**请注意，$1$ 号点不一定是 $k$ 个关键点之一。**", "locale": "zh-CN"}}}
{"pid": "P9481", "type": "P", "difficulty": 6, "samples": [["2 1\n2 1\n1 2 2", "8"], ["见附件中的 trade/trade2.in。", "见附件中的 trade/trade2.ans。"], ["见附件中的 trade/trade3.in。", "见附件中的 trade/trade3.ans。"], ["见附件中的 trade/trade4.in。", "见附件中的 trade/trade4.ans。"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "NOI", "O2优化"], "title": "[NOI2023] 贸易", "background": "", "description": "近年来，A 国的商贸发展迅猛，但国内的道路建设却跟不上步伐，明显成为了人们贸易往来的限制，管理者为此费尽了心思。\n\n具体而言，A 国共有 $2^n-1$ 个城市，其中 $1$ 号城市为首都。对于所有的非首都城市 $i$，都有一条**单向**道路从城市 $i$ 出发，到达城市 $\\lfloor \\frac{i}{2} \\rfloor$。为方便起见，称这样的道路为“第一类道路”，称城市 $\\lfloor \\frac{i}{2} \\rfloor$ 为城市 $i$ 的“上级城市”。\n\n除此之外，还有 $m$ 条**单向**道路，设其中第 $i$ 条道路从城市 $u_i$ 出发，到达城市 $v_i$，这样的道路都有一个特殊性质：从城市 $v_i$ 出发，沿着第一类道路不断向“上级城市”走去，最终总能走到城市 $u_i$。称这样的道路为“第二类道路”。\n\n每一条道路都有相应的长度值。由此，对于 A 国的任意两个城市 $x$ 和 $y$，都可以计算出从城市 $x$ 出发，沿道路走到城市 $y$，所经过的道路的长度之和的最小值，将这一数值记为 $dist(x,y)$。但由于 A 国的道路建设存在严重缺陷，从城市 $x$ 出发可能根本到达不了城市 $y$，此时定义 $dist(x,y)=0$。同时一个城市出发到自己是不需要经过任何道路的，因此定义 $dist(x,x)=0$。\n\n现在管理者希望计算出这些 $dist(x,y)$ 的值，以便合理衡量人们贸易往来的便捷程度。但由于 A 国的城市数量太多，将这些值一一列出的工作量太大，因此管理者只希望求出所有 $dist(x,y)$ 值之和，也就是 $\\sum_{x=1}^{2^n-1}{\\sum_{y=1}^{2^n-1}{dist(x,y)}}$，并希望请你来帮忙。", "inputFormat": "输入的第一行包含两个正整数 $n$ 和 $m$。\n\n输入的第二行包含 $2^n-2$ 个正整数，第 $i$ 个数 $a_i$ 表示从城市 $i+1$ 出发, 到达城市 $\\lfloor \\frac{i+1}{2} \\rfloor$ 的“第一类道路”的长度。\n\n接下来的 $m$ 行，每行包含三个正整数 $u,v,w$，描述了一条从城市 $u$ 到城市 $v$ 的“第二类道路”, 其长度为 $w$。", "outputFormat": "输出一行一个正整数，表示对应的答案。由于答案可能很大, 你只需要输出模 $998244353$ 意义下的答案即可。", "hint": "**【数据范围】**\n\n对于所有测试数据保证：$2 \\le n \\le 18$，$1 \\le m \\le 2 ^ n$，$1 \\le u, v \\le 2 ^ n - 1$，$1 \\le a_i, w \\le 10 ^ 9$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n$ | $m$ | 是否有特殊性质 |\n| :---: | :---: | :---: | :---: |\n| $1\\sim 2$ | $=8$ | $\\le 256$ | 否 |\n| $3\\sim 4$ | $=9$ | $\\le 512$ | ^ |\n| $5\\sim 8$ | $=12$ | $\\le 4,096$ | ^ |\n| $9$ | $=16$ | $\\le 10$ |  ^|\n| $10$ | ^ | $\\le 50$ | ^ |\n| $11$ | ^ | $\\le 100$ | ^ |\n| $12$ | ^ | $\\le 65,536$ | 是 |\n| $13\\sim 15$ | ^ | ^ | 否 |\n| $16\\sim 17$ | $=18$ | $\\le 262,144$ | 是 |\n| $18\\sim 20$ | ^ | ^ | 否 |\n\n特殊性质：保证每一条“第二类道路”都是从首都（城市 $1$）出发。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2023] 贸易", "background": "", "description": "近年来，A 国的商贸发展迅猛，但国内的道路建设却跟不上步伐，明显成为了人们贸易往来的限制，管理者为此费尽了心思。\n\n具体而言，A 国共有 $2^n-1$ 个城市，其中 $1$ 号城市为首都。对于所有的非首都城市 $i$，都有一条**单向**道路从城市 $i$ 出发，到达城市 $\\lfloor \\frac{i}{2} \\rfloor$。为方便起见，称这样的道路为“第一类道路”，称城市 $\\lfloor \\frac{i}{2} \\rfloor$ 为城市 $i$ 的“上级城市”。\n\n除此之外，还有 $m$ 条**单向**道路，设其中第 $i$ 条道路从城市 $u_i$ 出发，到达城市 $v_i$，这样的道路都有一个特殊性质：从城市 $v_i$ 出发，沿着第一类道路不断向“上级城市”走去，最终总能走到城市 $u_i$。称这样的道路为“第二类道路”。\n\n每一条道路都有相应的长度值。由此，对于 A 国的任意两个城市 $x$ 和 $y$，都可以计算出从城市 $x$ 出发，沿道路走到城市 $y$，所经过的道路的长度之和的最小值，将这一数值记为 $dist(x,y)$。但由于 A 国的道路建设存在严重缺陷，从城市 $x$ 出发可能根本到达不了城市 $y$，此时定义 $dist(x,y)=0$。同时一个城市出发到自己是不需要经过任何道路的，因此定义 $dist(x,x)=0$。\n\n现在管理者希望计算出这些 $dist(x,y)$ 的值，以便合理衡量人们贸易往来的便捷程度。但由于 A 国的城市数量太多，将这些值一一列出的工作量太大，因此管理者只希望求出所有 $dist(x,y)$ 值之和，也就是 $\\sum_{x=1}^{2^n-1}{\\sum_{y=1}^{2^n-1}{dist(x,y)}}$，并希望请你来帮忙。", "inputFormat": "输入的第一行包含两个正整数 $n$ 和 $m$。\n\n输入的第二行包含 $2^n-2$ 个正整数，第 $i$ 个数 $a_i$ 表示从城市 $i+1$ 出发, 到达城市 $\\lfloor \\frac{i+1}{2} \\rfloor$ 的“第一类道路”的长度。\n\n接下来的 $m$ 行，每行包含三个正整数 $u,v,w$，描述了一条从城市 $u$ 到城市 $v$ 的“第二类道路”, 其长度为 $w$。", "outputFormat": "输出一行一个正整数，表示对应的答案。由于答案可能很大, 你只需要输出模 $998244353$ 意义下的答案即可。", "hint": "**【数据范围】**\n\n对于所有测试数据保证：$2 \\le n \\le 18$，$1 \\le m \\le 2 ^ n$，$1 \\le u, v \\le 2 ^ n - 1$，$1 \\le a_i, w \\le 10 ^ 9$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n$ | $m$ | 是否有特殊性质 |\n| :---: | :---: | :---: | :---: |\n| $1\\sim 2$ | $=8$ | $\\le 256$ | 否 |\n| $3\\sim 4$ | $=9$ | $\\le 512$ | ^ |\n| $5\\sim 8$ | $=12$ | $\\le 4,096$ | ^ |\n| $9$ | $=16$ | $\\le 10$ |  ^|\n| $10$ | ^ | $\\le 50$ | ^ |\n| $11$ | ^ | $\\le 100$ | ^ |\n| $12$ | ^ | $\\le 65,536$ | 是 |\n| $13\\sim 15$ | ^ | ^ | 否 |\n| $16\\sim 17$ | $=18$ | $\\le 262,144$ | 是 |\n| $18\\sim 20$ | ^ | ^ | 否 |\n\n特殊性质：保证每一条“第二类道路”都是从首都（城市 $1$）出发。", "locale": "zh-CN"}}}
{"pid": "P9482", "type": "P", "difficulty": 6, "samples": [["0 2\n9 3\nabacababa\n1 4\n2 4\n3 3\n9 3\nabaabaaba\n1 4\n2 4\n3 3\n", "4\n0\n3\n2\n0\n2\n"], ["见附件中的 string/string2.in。", "见附件中的 string/string2.ans。"], ["见附件中的 string/string3.in。", "见附件中的 string/string3.ans。"], ["见附件中的 string/string4.in。", "见附件中的 string/string4.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "树状数组", "2023", "NOI", "O2优化", "哈希 hashing", "后缀数组 SA", "Manacher 算法", "bitset"], "title": "[NOI2023] 字符串", "background": "", "description": "小 Y 是一名大学生，最近正在研究字符串方向的问题。\n\n小 Y 了解到关于字符串的如下定义:\n\n- 给定一个长度为 $n$ 的字符串 $s[1: n]$，我们定义其子串 $s[l: r]$（$1 \\leq l \\leq r \\leq n$）为选择 $s[l], s[l+1], \\dots, s[r]$, 将其顺次拼接得到的新字符串。\n- 给定一个长度为 $n$ 的字符串 $s[1: n]$，我们定义其翻转后的结果 $R(s)$ 为将 $s[n], s[n-1], \\dots, s[1]$ 顺次拼接，也就是将字符串反序拼接得到的字符串。\n- 给定两个长度均为 $n$ 的字符串 $a[1: n], b[1: n]$，我们定义 $a$ 的字典序小于 $b$ 当且仅当存在 $1 \\leq i \\leq n$，使得对于任意 $1 \\leq j < i$，$a[j] = b[j]$，且 $a[i] < b[i]$。\n\n在了解了上述定义后，小 Y 想到了这样的问题:\n\n给定一个长度为 $n$ 的字符串 $s[1: n]$。有 $q$ 次询问，每次询问给定两个参数 $i, r$。你需要求出有多少 $l$，满足如下条件:\n- $1 \\leq l \\leq r$。\n- $s[i: i+l-1]$ 字典序小于 $R(s[i+l: i+2l-1])$。\n\n小 Y 想求助你帮忙解决这一问题。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含两个整数 $c, t$，分别表示测试点编号和测试数据组数。$c=0$ 表示该测试点为样例。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含两个正整数 $n, q$，表示字符串长度和询问次数。\n\n输入的第二行包含一个长度为 $n$ 的仅包含小写字母的字符串 $s$。\n\n输入的接下来 $q$ 行，每行包含两个正整数 $i, r$。表示一次询问，保证 $i+2r-1 \\leq n$。", "outputFormat": "对于每一组测试数据的每一次询问，输出一行一个整数，表示满足条件的 $l$ 的个数。", "hint": "**【样例解释 #1】**\n\n对于第一组数据的第一组询问：\n- $l = 1$ 时，$s[i: i + l - 1] = \\texttt{a}$，$R(s[i + l: i + 2l - 1]) = \\texttt{b}$。\n- $l = 2$ 时，$s[i: i + l - 1] = \\texttt{ab}$，$R(s[i + l: i + 2l - 1]) = \\texttt{ca}$。\n- $l = 3$ 时，$s[i: i + l - 1] = \\texttt{aba}$，$R(s[i + l: i + 2l - 1]) = \\texttt{bac}$。\n- $l = 4$ 时，$s[i: i + l - 1] = \\texttt{abac}$，$R(s[i + l: i + 2l - 1]) = \\texttt{baba}$。\n\n这四种情况中，$s[i: i + l - 1]$ 的字典序均小于 $R(s[i + l: i + 2l - 1])$。因此答案为 $4$。\n\n**【样例解释 #2】**\n\n该样例数据范围满足测试点 $5$。\n\n**【样例解释 #4】**\n\n该样例数据范围满足测试点 $24 \\sim 25$。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1 \\le t \\le 5$，$1 \\le n \\le 10 ^ 5$，$1 \\le q \\le 10 ^ 5$，$1 \\le i + 2r - 1 \\le n $，字符串 $s$ 仅包含小写字母。\n\n|测试点编号|$n \\le$|$q \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$5$|A|\n|$2$|$10$|$10$|A|\n|$3$|$20$|$20$|A|\n|$4$|$50$|$50$|A|\n|$5$|$10^2$|$10^2$|A|\n|$6$|$10^3$|$10^3$|无|\n|$7$|$2,000$|$2,000$|无|\n|$8$|$3,000$|$3,000$|无|\n|$9$|$4,000$|$4,000$|无|\n|$10$|$23,333$|$23,333$|A|\n|$11$|$5 \\times 10 ^ 4$|$5 \\times 10 ^ 4$|A|\n|$12$|$75,000$|$75,000$|A|\n|$13$|$9 \\times 10 ^ 4$|$9 \\times 10 ^ 4$|A|\n|$14$|$10 ^ 5$|$10 ^ 5$|A|\n|$15$|$23,333$|$23,333$|B|\n|$16$|$75,000$|$75,000$|B|\n|$17$|$9 \\times 10 ^ 4$|$9 \\times 10 ^ 4$|B|\n|$18$|$10 ^ 5$|$10 ^ 5$|B|\n|$19$|$23,333$|$23,333$|无|\n|$20$|$5 \\times 10 ^ 4$|$5 \\times 10 ^ 4$|无|\n|$21$|$75,000$|$75,000$|无|\n|$22$|$9 \\times 10 ^ 4$|$9 \\times 10 ^ 4$|无|\n|$23$|$95,000$|$95,000$|无|\n|$24 \\sim 25$|$10 ^ 5$|$10 ^ 5$|无|\n\n特殊性质 A：保证字符串中仅包含字符 $\\texttt{a}$ 和 $\\texttt{b}$，且每个字符独立等概率地在 $\\texttt{a}$ 和 $\\texttt{b}$ 中选择。\n\n特殊性质 B：保证字符串中的相邻字符互不相同。\n\n**在洛谷上，本题 Subtask 1 中为 hack 数据，保证 $c=25$**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2023] 字符串", "background": "", "description": "小 Y 是一名大学生，最近正在研究字符串方向的问题。\n\n小 Y 了解到关于字符串的如下定义:\n\n- 给定一个长度为 $n$ 的字符串 $s[1: n]$，我们定义其子串 $s[l: r]$（$1 \\leq l \\leq r \\leq n$）为选择 $s[l], s[l+1], \\dots, s[r]$, 将其顺次拼接得到的新字符串。\n- 给定一个长度为 $n$ 的字符串 $s[1: n]$，我们定义其翻转后的结果 $R(s)$ 为将 $s[n], s[n-1], \\dots, s[1]$ 顺次拼接，也就是将字符串反序拼接得到的字符串。\n- 给定两个长度均为 $n$ 的字符串 $a[1: n], b[1: n]$，我们定义 $a$ 的字典序小于 $b$ 当且仅当存在 $1 \\leq i \\leq n$，使得对于任意 $1 \\leq j < i$，$a[j] = b[j]$，且 $a[i] < b[i]$。\n\n在了解了上述定义后，小 Y 想到了这样的问题:\n\n给定一个长度为 $n$ 的字符串 $s[1: n]$。有 $q$ 次询问，每次询问给定两个参数 $i, r$。你需要求出有多少 $l$，满足如下条件:\n- $1 \\leq l \\leq r$。\n- $s[i: i+l-1]$ 字典序小于 $R(s[i+l: i+2l-1])$。\n\n小 Y 想求助你帮忙解决这一问题。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含两个整数 $c, t$，分别表示测试点编号和测试数据组数。$c=0$ 表示该测试点为样例。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含两个正整数 $n, q$，表示字符串长度和询问次数。\n\n输入的第二行包含一个长度为 $n$ 的仅包含小写字母的字符串 $s$。\n\n输入的接下来 $q$ 行，每行包含两个正整数 $i, r$。表示一次询问，保证 $i+2r-1 \\leq n$。", "outputFormat": "对于每一组测试数据的每一次询问，输出一行一个整数，表示满足条件的 $l$ 的个数。", "hint": "**【样例解释 #1】**\n\n对于第一组数据的第一组询问：\n- $l = 1$ 时，$s[i: i + l - 1] = \\texttt{a}$，$R(s[i + l: i + 2l - 1]) = \\texttt{b}$。\n- $l = 2$ 时，$s[i: i + l - 1] = \\texttt{ab}$，$R(s[i + l: i + 2l - 1]) = \\texttt{ca}$。\n- $l = 3$ 时，$s[i: i + l - 1] = \\texttt{aba}$，$R(s[i + l: i + 2l - 1]) = \\texttt{bac}$。\n- $l = 4$ 时，$s[i: i + l - 1] = \\texttt{abac}$，$R(s[i + l: i + 2l - 1]) = \\texttt{baba}$。\n\n这四种情况中，$s[i: i + l - 1]$ 的字典序均小于 $R(s[i + l: i + 2l - 1])$。因此答案为 $4$。\n\n**【样例解释 #2】**\n\n该样例数据范围满足测试点 $5$。\n\n**【样例解释 #4】**\n\n该样例数据范围满足测试点 $24 \\sim 25$。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1 \\le t \\le 5$，$1 \\le n \\le 10 ^ 5$，$1 \\le q \\le 10 ^ 5$，$1 \\le i + 2r - 1 \\le n $，字符串 $s$ 仅包含小写字母。\n\n|测试点编号|$n \\le$|$q \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$5$|A|\n|$2$|$10$|$10$|A|\n|$3$|$20$|$20$|A|\n|$4$|$50$|$50$|A|\n|$5$|$10^2$|$10^2$|A|\n|$6$|$10^3$|$10^3$|无|\n|$7$|$2,000$|$2,000$|无|\n|$8$|$3,000$|$3,000$|无|\n|$9$|$4,000$|$4,000$|无|\n|$10$|$23,333$|$23,333$|A|\n|$11$|$5 \\times 10 ^ 4$|$5 \\times 10 ^ 4$|A|\n|$12$|$75,000$|$75,000$|A|\n|$13$|$9 \\times 10 ^ 4$|$9 \\times 10 ^ 4$|A|\n|$14$|$10 ^ 5$|$10 ^ 5$|A|\n|$15$|$23,333$|$23,333$|B|\n|$16$|$75,000$|$75,000$|B|\n|$17$|$9 \\times 10 ^ 4$|$9 \\times 10 ^ 4$|B|\n|$18$|$10 ^ 5$|$10 ^ 5$|B|\n|$19$|$23,333$|$23,333$|无|\n|$20$|$5 \\times 10 ^ 4$|$5 \\times 10 ^ 4$|无|\n|$21$|$75,000$|$75,000$|无|\n|$22$|$9 \\times 10 ^ 4$|$9 \\times 10 ^ 4$|无|\n|$23$|$95,000$|$95,000$|无|\n|$24 \\sim 25$|$10 ^ 5$|$10 ^ 5$|无|\n\n特殊性质 A：保证字符串中仅包含字符 $\\texttt{a}$ 和 $\\texttt{b}$，且每个字符独立等概率地在 $\\texttt{a}$ 和 $\\texttt{b}$ 中选择。\n\n特殊性质 B：保证字符串中的相邻字符互不相同。\n\n**在洛谷上，本题 Subtask 1 中为 hack 数据，保证 $c=25$**。", "locale": "zh-CN"}}}
{"pid": "P9483", "type": "P", "difficulty": 7, "samples": [["1\n4\n1 1 1 1\n", "6\n"], ["见附件中的 book/book2.in。", "见附件中的 book/book2.ans。"], ["见附件中的 book/book3.in。", "见附件中的 book/book3.ans。"], ["见附件中的 book/book4.in。", "见附件中的 book/book4.ans。"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "2023", "NOI", "O2优化"], "title": "[NOI2023] 合并书本", "background": "", "description": "小 C 有 $n$ 本书，每本书都有一个重量，他决定把它们合并成一摞。\n\n每一次合并小 C 可以把一摞书放到另一摞书上面，使得它们合并到一摞。如果小 C 把第 $i$ 摞书放到第 $j$ 摞书上面，小 C 需要消耗的体力为**第 $i$ 摞书的重量**加上**两摞书的磨损值之和**。\n\n初始时每本书自成一摞且磨损值均为 $0$。每当小 C 将两摞书合并后，形成的新的一摞书的磨损值为合并前的两摞书的磨损值的**较大值的两倍再加一**，重量为合并前的两摞书的**重量之和**。\n\n你的任务是设计出合并的次序方案，使小 C 耗费的体力最少，并输出这个最小的体力耗费值。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $t$，表示数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含一个正整数 $n$，表示有 $n$ 本书。\n\n输入的第二行包含 $n$ 个正整数，第 $i$ 个数 $w_i$ 表示第 $i$ 本书的重量。", "outputFormat": "对于每组测试数据输出一行一个整数，表示将 $n$ 本书合并成一摞需要消耗的最少体力。", "hint": "**【样例解释 #1】**\n\n如果小 C 将 $4$ 本书两两合并再将得到的两摞合并成一摞，那么前两次需要消耗的体力值各为 $1$。第三次将一摞重量为 $2$ 的书放到另一摞上面，两摞书磨损值各为 $1$，需要消耗的体力为 $2 + 1 + 1 = 4$。\n\n因此如果选择这个方案，小 C 耗费的体力只有 $1 + 1 + 4 = 6$。\n\n可以证明，在上述例子中，$6$ 为最小的体力耗费值。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1 \\le t \\le 10$，$1 \\le n \\le 100$，$1 \\le w_i \\le 10 ^ 9$。\n\n|测试点编号|$n \\le$|是否有特殊性质|\n|:-:|:-:|:-:|\n|$1 \\sim 2$|$7$|否|\n|$3$|$11$|否|\n|$4$|$13$|否|\n|$5 \\sim 6$|$22$|否|\n|$7 \\sim 8$|$28$|否|\n|$9 \\sim 13$|$50$|否|\n|$14$|$60$|否|\n|$15$|$70$|否|\n|$16$|$80$|否|\n|$17 \\sim 18$|$100$|是|\n|$19 \\sim 20$|$100$|否|\n\n特殊性质：保证 $w_i = 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2023] 合并书本", "background": "", "description": "小 C 有 $n$ 本书，每本书都有一个重量，他决定把它们合并成一摞。\n\n每一次合并小 C 可以把一摞书放到另一摞书上面，使得它们合并到一摞。如果小 C 把第 $i$ 摞书放到第 $j$ 摞书上面，小 C 需要消耗的体力为**第 $i$ 摞书的重量**加上**两摞书的磨损值之和**。\n\n初始时每本书自成一摞且磨损值均为 $0$。每当小 C 将两摞书合并后，形成的新的一摞书的磨损值为合并前的两摞书的磨损值的**较大值的两倍再加一**，重量为合并前的两摞书的**重量之和**。\n\n你的任务是设计出合并的次序方案，使小 C 耗费的体力最少，并输出这个最小的体力耗费值。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $t$，表示数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含一个正整数 $n$，表示有 $n$ 本书。\n\n输入的第二行包含 $n$ 个正整数，第 $i$ 个数 $w_i$ 表示第 $i$ 本书的重量。", "outputFormat": "对于每组测试数据输出一行一个整数，表示将 $n$ 本书合并成一摞需要消耗的最少体力。", "hint": "**【样例解释 #1】**\n\n如果小 C 将 $4$ 本书两两合并再将得到的两摞合并成一摞，那么前两次需要消耗的体力值各为 $1$。第三次将一摞重量为 $2$ 的书放到另一摞上面，两摞书磨损值各为 $1$，需要消耗的体力为 $2 + 1 + 1 = 4$。\n\n因此如果选择这个方案，小 C 耗费的体力只有 $1 + 1 + 4 = 6$。\n\n可以证明，在上述例子中，$6$ 为最小的体力耗费值。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1 \\le t \\le 10$，$1 \\le n \\le 100$，$1 \\le w_i \\le 10 ^ 9$。\n\n|测试点编号|$n \\le$|是否有特殊性质|\n|:-:|:-:|:-:|\n|$1 \\sim 2$|$7$|否|\n|$3$|$11$|否|\n|$4$|$13$|否|\n|$5 \\sim 6$|$22$|否|\n|$7 \\sim 8$|$28$|否|\n|$9 \\sim 13$|$50$|否|\n|$14$|$60$|否|\n|$15$|$70$|否|\n|$16$|$80$|否|\n|$17 \\sim 18$|$100$|是|\n|$19 \\sim 20$|$100$|否|\n\n特殊性质：保证 $w_i = 1$。", "locale": "zh-CN"}}}
{"pid": "P9484", "type": "P", "difficulty": 2, "samples": [["1\n6 4\n1 4\n3 5\n2 5\n2 4", "3\n6\n5\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536]}, "tags": ["搜索", "数学", "贪心", "数论", "洛谷原创", "O2优化", "最短路", "最大公约数 gcd"], "title": "「LAOI-1」GCD", "background": "", "description": "一张图有 $n$ 个节点，编号为 $1,2,3,\\dots,n$。其中 $i$ 号节点会向 $j$ 号节点连一条边权为 $|i-j|$ 的无向边，当且仅当 $\\gcd(i,j)=i,\\operatorname{lcm}(i,j)=j$ 时连边。现询问 $q$ 次，每次询问求 $x$ 到 $y$ 的最短路径。", "inputFormat": "第一行一个 $T$，表示数据组数。\n\n每组数据的第一行两个正整数 $n,q$，表示节点数和询问次数。\n\n接下来 $q$ 行，每行两个正整数 $x,y$，表示起点和终点。", "outputFormat": "对于每组询问，输出一个正整数。相邻两个输出以换行符隔开。", "hint": "注意时空限制，本题不捆绑。\n\n对于 $40\\%$ 的数据，$T,n,q\\le100$;\n\n对于 $100\\%$ 的数据，$1\\le T\\le10^6$，$1\\le n,q\\le10^6$，$1\\le x,y\\le n$，$1\\le \\sum n,\\sum q\\le10^6$。\n\n**请使用更快的 IO 方式**。\n\nupdata on 2024/8/8：\n\n时限上调到 1000ms。/yun", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LAOI-1」GCD", "background": "", "description": "一张图有 $n$ 个节点，编号为 $1,2,3,\\dots,n$。其中 $i$ 号节点会向 $j$ 号节点连一条边权为 $|i-j|$ 的无向边，当且仅当 $\\gcd(i,j)=i,\\operatorname{lcm}(i,j)=j$ 时连边。现询问 $q$ 次，每次询问求 $x$ 到 $y$ 的最短路径。", "inputFormat": "第一行一个 $T$，表示数据组数。\n\n每组数据的第一行两个正整数 $n,q$，表示节点数和询问次数。\n\n接下来 $q$ 行，每行两个正整数 $x,y$，表示起点和终点。", "outputFormat": "对于每组询问，输出一个正整数。相邻两个输出以换行符隔开。", "hint": "注意时空限制，本题不捆绑。\n\n对于 $40\\%$ 的数据，$T,n,q\\le100$;\n\n对于 $100\\%$ 的数据，$1\\le T\\le10^6$，$1\\le n,q\\le10^6$，$1\\le x,y\\le n$，$1\\le \\sum n,\\sum q\\le10^6$。\n\n**请使用更快的 IO 方式**。\n\nupdata on 2024/8/8：\n\n时限上调到 1000ms。/yun", "locale": "zh-CN"}}}
{"pid": "P9485", "type": "P", "difficulty": 4, "samples": [["3\n6\n3 2 1 1 2 3\n6\n1 1 4 5 1 4\n6\n1 9 1 9 8 10", "2\n0\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "洛谷原创", "O2优化", "前缀和"], "title": "「LAOI-1」积水", "background": "", "description": "\n\n地表坑洼不平，每当暴雨来临地面上都会有一个个水洼。   \n又有一场暴雨即将来临，你决定改造地面来减少积水。     \n地面可抽象为一个长度为 $n$ 的正整数序列 $a$，其中 $a_i$ 表示当地的海拔高度。       \n下暴雨时将会汇聚在低洼处无法向两侧流走，比如一个序列 $a=[3,1,5,1,2,3]$。     \n在下雨后的积水如图所示（有 $5$ 格积水）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/79on2oe3.png)\n\n由于人手不足，现在只来得及改变一个地方的海拔高度为任意正整数。\n\n问改造后积水最少有几格。\n\n\n\n\n", "inputFormat": "第一行一个整数 $T$。    \n接下来共 $T$ 组数据，每组数据占两行。     \n对于每组数据，第一行一个整数 $n$，表示序列长度。     \n第二行 $n$ 个整数，表示序列 $a$。", "outputFormat": "对于每组数据输出一行一个整数，最小的积水格数。", "hint": "对于前 $5\\%$ 的数据，$1\\le n\\le 5$。       \n对于前 $20\\%$ 的数据，$1\\le \\sum  n\\le 550$，$1\\le a_i\\le 500$。     \n对于前 $35\\%$ 的数据，$1\\le \\sum n\\le 5050$，$1\\le a_i\\le 5000$。    \n对于前 $50\\%$ 的数据，$1\\le \\sum n\\le 5050$，$1\\le a_i \\le 10^9$。  \n对于 $100\\%$ 的数据，$1\\le n,\\sum n\\le 10^6$，$1\\le a_i\\le 10^9$。\n\n保证 $1\\le T\\le 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LAOI-1」积水", "background": "", "description": "\n\n地表坑洼不平，每当暴雨来临地面上都会有一个个水洼。   \n又有一场暴雨即将来临，你决定改造地面来减少积水。     \n地面可抽象为一个长度为 $n$ 的正整数序列 $a$，其中 $a_i$ 表示当地的海拔高度。       \n下暴雨时将会汇聚在低洼处无法向两侧流走，比如一个序列 $a=[3,1,5,1,2,3]$。     \n在下雨后的积水如图所示（有 $5$ 格积水）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/79on2oe3.png)\n\n由于人手不足，现在只来得及改变一个地方的海拔高度为任意正整数。\n\n问改造后积水最少有几格。\n\n\n\n\n", "inputFormat": "第一行一个整数 $T$。    \n接下来共 $T$ 组数据，每组数据占两行。     \n对于每组数据，第一行一个整数 $n$，表示序列长度。     \n第二行 $n$ 个整数，表示序列 $a$。", "outputFormat": "对于每组数据输出一行一个整数，最小的积水格数。", "hint": "对于前 $5\\%$ 的数据，$1\\le n\\le 5$。       \n对于前 $20\\%$ 的数据，$1\\le \\sum  n\\le 550$，$1\\le a_i\\le 500$。     \n对于前 $35\\%$ 的数据，$1\\le \\sum n\\le 5050$，$1\\le a_i\\le 5000$。    \n对于前 $50\\%$ 的数据，$1\\le \\sum n\\le 5050$，$1\\le a_i \\le 10^9$。  \n对于 $100\\%$ 的数据，$1\\le n,\\sum n\\le 10^6$，$1\\le a_i\\le 10^9$。\n\n保证 $1\\le T\\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P9486", "type": "P", "difficulty": 4, "samples": [["6 0\n2 2 2\n3 2 2\n4 2 2\n7 2 3\n13 2 6\n14 2 6", "Yes\nYes\nNo\nYes\nYes\nNo"], ["6 0\n4 3 2\n5 3 3\n13 3 5\n13 3 6\n5 100 1000000000000\n123454204 4321 97", "Yes\nNo\nYes\nNo\nYes\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创"], "title": "「LAOI-1」Bash Game-Plus", "background": "", "description": ">巴什博弈：有一堆 $n$ 个物品，两名玩家轮流从中拿取物品。每次至少拿 $1$ 个，至多拿 $m$ 个，不能不拿，最终将物品拿完者获胜。\n\n我们给这个游戏增加一些规则：\n\n有一堆 $n$ 个物品，甲和乙轮流从中拿取物品，甲先拿。每次至少拿 $1$ 个，至多拿 $m$ 个，最终将物品拿完者获胜。    \n现在新加入一条规则：**也可以不拿**，但每当有一名玩家选择不拿物品时，接下来的 $k$ 次操作中两名玩家都不可以不拿。\n\n举个例子，当 $k=3$ 时，如果甲在某一次操作中没有拿物品，那么接下来乙、甲、乙三轮都必须拿至少 $1$ 件物品。然后又轮到甲了，这次甲就可以再次选择不拿。\n\n甲乙两人一共进行了 $t$ 次游戏。对于每次游戏，你需要告诉甲他有没有必胜策略。", "inputFormat": "第一行两个正整数 $t,op$。$op=1$ 时取消新增加的规则，但是也需要正常读入 $k$。\n\n接下来的 $t$ 行，每行三个正整数 $n,m,k$。", "outputFormat": "对于每轮游戏，如果甲有必胜策略，那么输出 `Yes`。否则输出 `No`。", "hint": "| Subtask | 得分 | $t$ | $op$ | $n\\le$ | $m\\le$ | $k\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $2$ | $100000$ | $1$ | $10^{18}$ | $10^{18}$ | $k=114514$ |  |\n| $1$ | $2$ | $99994$ | $0$ | $10^{18}$ | $10^{18}$ | $k=1$ |  |\n| $2$ | $9$ | $99995$ | $0$ | $10^{18}$ | $10^{18}$ | $3$ |  |\n| $3$ | $5$ | $99996$ | $0$ | $10^{18}$ | $10^{18}$ | $k\\ge n$ |  |\n| $4$ | $10$ | $50$ | $0$ | $50$ | $50$ | $10^{18}$ |  |\n| $5$ | $13$ | $99997$ | $0$ | $100$ | $100$ | $10^{18}$ |  |\n| $6$ | $16$ | $99998$ | $0$ | $400$ | $400$ | $10^{18}$ | $A$ |\n| $7$ | $10$ | $99999$ | $0$ | $5000$ | $5000$ | $10^{18}$ |  |\n| $8$ | $31$ | $100000$ | $0$ | $10^{18}$ | $10^{18}$ | $10^{18}$ |  |\n| $9$ | ~~45~~ $2$ | $99993$ | $0$ | $10^{18}$ | $10^{18}$ | $10^{18}$ | 不可以，总司令 |\n\n特殊性质 $A$ ：所有 $m$ 相等。\n\n对于所有数据：$t\\le10^5$，$1\\le n,m,k\\le10^{18}$\n\n不保证数据随机。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LAOI-1」Bash Game-Plus", "background": "", "description": ">巴什博弈：有一堆 $n$ 个物品，两名玩家轮流从中拿取物品。每次至少拿 $1$ 个，至多拿 $m$ 个，不能不拿，最终将物品拿完者获胜。\n\n我们给这个游戏增加一些规则：\n\n有一堆 $n$ 个物品，甲和乙轮流从中拿取物品，甲先拿。每次至少拿 $1$ 个，至多拿 $m$ 个，最终将物品拿完者获胜。    \n现在新加入一条规则：**也可以不拿**，但每当有一名玩家选择不拿物品时，接下来的 $k$ 次操作中两名玩家都不可以不拿。\n\n举个例子，当 $k=3$ 时，如果甲在某一次操作中没有拿物品，那么接下来乙、甲、乙三轮都必须拿至少 $1$ 件物品。然后又轮到甲了，这次甲就可以再次选择不拿。\n\n甲乙两人一共进行了 $t$ 次游戏。对于每次游戏，你需要告诉甲他有没有必胜策略。", "inputFormat": "第一行两个正整数 $t,op$。$op=1$ 时取消新增加的规则，但是也需要正常读入 $k$。\n\n接下来的 $t$ 行，每行三个正整数 $n,m,k$。", "outputFormat": "对于每轮游戏，如果甲有必胜策略，那么输出 `Yes`。否则输出 `No`。", "hint": "| Subtask | 得分 | $t$ | $op$ | $n\\le$ | $m\\le$ | $k\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $2$ | $100000$ | $1$ | $10^{18}$ | $10^{18}$ | $k=114514$ |  |\n| $1$ | $2$ | $99994$ | $0$ | $10^{18}$ | $10^{18}$ | $k=1$ |  |\n| $2$ | $9$ | $99995$ | $0$ | $10^{18}$ | $10^{18}$ | $3$ |  |\n| $3$ | $5$ | $99996$ | $0$ | $10^{18}$ | $10^{18}$ | $k\\ge n$ |  |\n| $4$ | $10$ | $50$ | $0$ | $50$ | $50$ | $10^{18}$ |  |\n| $5$ | $13$ | $99997$ | $0$ | $100$ | $100$ | $10^{18}$ |  |\n| $6$ | $16$ | $99998$ | $0$ | $400$ | $400$ | $10^{18}$ | $A$ |\n| $7$ | $10$ | $99999$ | $0$ | $5000$ | $5000$ | $10^{18}$ |  |\n| $8$ | $31$ | $100000$ | $0$ | $10^{18}$ | $10^{18}$ | $10^{18}$ |  |\n| $9$ | ~~45~~ $2$ | $99993$ | $0$ | $10^{18}$ | $10^{18}$ | $10^{18}$ | 不可以，总司令 |\n\n特殊性质 $A$ ：所有 $m$ 相等。\n\n对于所有数据：$t\\le10^5$，$1\\le n,m,k\\le10^{18}$\n\n不保证数据随机。", "locale": "zh-CN"}}}
{"pid": "P9487", "type": "P", "difficulty": 5, "samples": [["7 1\n1 1 1 1 1 1 1\n1 2 3\n3 6 -4\n2 5 2\n1 3 6\n2 4 1\n3 7 5\n4 7", "8"], ["10 10\n786755 -687509 368192 154769 647117 -713535 337677 913223 -389809 -824004 \n1 2 -785875\n1 3 -77082\n1 4 -973070\n3 5 -97388\n2 6 -112274\n3 7 657757\n4 8 741733\n3 9 5656\n4 10 -35190\n3 3\n3 10\n7 3\n5 1\n2 10\n10 10\n1 6\n7 2\n8 9\n9 1\n", "971424\n-1257332\n1309101\n3420605\n-2313033\n-2567048\n-2467802\n352646\n759321\n1368370\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "倍增", "洛谷原创", "O2优化", "树形 DP", "树链剖分", "ST 表", "分类讨论"], "title": "「LAOI-1」小熊游景点", "background": "", "description": "小熊的地图上有 $n$ 个景点，每个景点有分数 $s_i$。\n\n$n-1$ 个点对之间有双向直达的公交线路，每条线路有收费 $w_i$。\n\n现在小熊在 $a$ 景点，总司令在 $b$ 景点，他们要**沿简单路径**在 $a\\to b$ 路径上的 $p$ 景点汇合，然后**沿简单路径**一起去 $q$ 景点。（$q$ 为任意点，每个人不会游览两次 $p$ 景点）\n\n$m$ 次询问，给定 $a,b$，求 $p,q$，使得小熊和总司令花费之和最小的前提下他们经过的景点分数之和最大，输出他们经过的景点分数之和。（指小熊经过的景点分数之和 $+$ 总司令经过的景点分数之和）\n\n**重复经过的线路收费重复计算，重复经过的景点分数重复计算。**", "inputFormat": "第一行两个整数 $n,m$。分别表示景点个数和询问次数。\n\n接下来一行 $n$ 个整数 第 $i$ 个整数 $s_i$ 表示第 $i$ 个景点的权值。\n\n接下来 $n-1$ 行，每行 $3$ 个整数 $u,v,w$，表示 $u$ 节点和 $v$ 节点之间有一条收费 $w$ 的双向公交路线。\n\n接下来 $m$ 行，每行两个整数 $a$ 和 $b$，表示小熊和总司令所在的景点位置。", "outputFormat": "对于每组询问，每行输出一个整数表示结果。", "hint": "### 样例说明\n对于第一组样例，小熊的地图如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ktyzyrx7.png)\n\n其中 $a=4,b=7$，令 $p=3,q=6$。\n\n小熊的路径为 $4\\to2\\to1\\to3\\to6$，花费之和为 $1+3+6+(-4)=6$，景点分数之和为 $1+1+1+1+1=5$。\n\n总司令的路径为 $7\\to3\\to6$，花费之和为 $5+(-4)=1$，景点分数之和为 $1+1+1=3$。\n\n小熊和总司令花费之和为 $6+1=7$，经过的景点分数之和为 $5+3=8$。\n\n可以证明此时小熊和总司令花费之和最小的前提下他们经过的景点分数之和最大。\n\n------------\n\n### 数据范围\n**本题采用捆绑测试。**\n\n| Subtask | $n,m$ | $s_i,w_i$ | 特殊性质 | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $=3\\times10^5$ | $\\in\\lbrack0,10^6\\rbrack$ | 无 | $10$ |\n| $2$ | $=3\\times10^5$ | $\\in\\lbrack-10^6,10^6\\rbrack$ | 小熊的地图是一条链 | $10$ |\n| $3$ | $=3\\times10^2$ | $\\in\\lbrack-10^6,10^6\\rbrack$ | 无 | $5$ |\n| $4$ | $=3\\times10^3$ | $\\in\\lbrack-10^6,10^6\\rbrack$ | 无 | $15$ |\n| $5$ | $\\le 3\\times10^5$ | $\\in\\lbrack-10^6,10^6\\rbrack$ | 无 | $60$ |\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 3\\times 10^5$，$\\vert s_i\\vert,\\vert w_i\\vert\\le10^6$，小熊的地图是一棵树。\n\n（小熊都可以游览景点了，公交价格和景点分数怎么不可以是负数呢？）", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LAOI-1」小熊游景点", "background": "", "description": "小熊的地图上有 $n$ 个景点，每个景点有分数 $s_i$。\n\n$n-1$ 个点对之间有双向直达的公交线路，每条线路有收费 $w_i$。\n\n现在小熊在 $a$ 景点，总司令在 $b$ 景点，他们要**沿简单路径**在 $a\\to b$ 路径上的 $p$ 景点汇合，然后**沿简单路径**一起去 $q$ 景点。（$q$ 为任意点，每个人不会游览两次 $p$ 景点）\n\n$m$ 次询问，给定 $a,b$，求 $p,q$，使得小熊和总司令花费之和最小的前提下他们经过的景点分数之和最大，输出他们经过的景点分数之和。（指小熊经过的景点分数之和 $+$ 总司令经过的景点分数之和）\n\n**重复经过的线路收费重复计算，重复经过的景点分数重复计算。**", "inputFormat": "第一行两个整数 $n,m$。分别表示景点个数和询问次数。\n\n接下来一行 $n$ 个整数 第 $i$ 个整数 $s_i$ 表示第 $i$ 个景点的权值。\n\n接下来 $n-1$ 行，每行 $3$ 个整数 $u,v,w$，表示 $u$ 节点和 $v$ 节点之间有一条收费 $w$ 的双向公交路线。\n\n接下来 $m$ 行，每行两个整数 $a$ 和 $b$，表示小熊和总司令所在的景点位置。", "outputFormat": "对于每组询问，每行输出一个整数表示结果。", "hint": "### 样例说明\n对于第一组样例，小熊的地图如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ktyzyrx7.png)\n\n其中 $a=4,b=7$，令 $p=3,q=6$。\n\n小熊的路径为 $4\\to2\\to1\\to3\\to6$，花费之和为 $1+3+6+(-4)=6$，景点分数之和为 $1+1+1+1+1=5$。\n\n总司令的路径为 $7\\to3\\to6$，花费之和为 $5+(-4)=1$，景点分数之和为 $1+1+1=3$。\n\n小熊和总司令花费之和为 $6+1=7$，经过的景点分数之和为 $5+3=8$。\n\n可以证明此时小熊和总司令花费之和最小的前提下他们经过的景点分数之和最大。\n\n------------\n\n### 数据范围\n**本题采用捆绑测试。**\n\n| Subtask | $n,m$ | $s_i,w_i$ | 特殊性质 | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $=3\\times10^5$ | $\\in\\lbrack0,10^6\\rbrack$ | 无 | $10$ |\n| $2$ | $=3\\times10^5$ | $\\in\\lbrack-10^6,10^6\\rbrack$ | 小熊的地图是一条链 | $10$ |\n| $3$ | $=3\\times10^2$ | $\\in\\lbrack-10^6,10^6\\rbrack$ | 无 | $5$ |\n| $4$ | $=3\\times10^3$ | $\\in\\lbrack-10^6,10^6\\rbrack$ | 无 | $15$ |\n| $5$ | $\\le 3\\times10^5$ | $\\in\\lbrack-10^6,10^6\\rbrack$ | 无 | $60$ |\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 3\\times 10^5$，$\\vert s_i\\vert,\\vert w_i\\vert\\le10^6$，小熊的地图是一棵树。\n\n（小熊都可以游览景点了，公交价格和景点分数怎么不可以是负数呢？）", "locale": "zh-CN"}}}
{"pid": "P9488", "type": "P", "difficulty": 4, "samples": [["4", "4"], ["30", "183"], ["100", "1916"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "ZHY 的生成树", "background": "", "description": "ZHY 有一个 $n$ 个点的完全图，点 $u$ 与点 $v$ 的距离为 $\\gcd(u,v)$，求这个完全图的最大生成树的边权之和。", "inputFormat": "一个正整数 $n$。", "outputFormat": "一个整数，表示这个最大生成树的边权之和。", "hint": "**本题采用捆绑测试。**\n\n$\\text{Subtask}$ $0\\kern{3pt}$(10pts)：$n\\le 5$。\n\n$\\text{Subtask}$ $1\\kern{3pt}$(20pts)：$n\\le 1000$。\n\n$\\text{Subtask}$ $2\\kern{3pt}$(30pts)：$n\\le 10^{6}$。\n\n$\\text{Subtask}$ $3\\kern{3pt}$(40pts)：$n\\le 10^{7}$。\n\n对于所有测试数据，$1\\le n \\le 10^{7}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "ZHY 的生成树", "background": "", "description": "ZHY 有一个 $n$ 个点的完全图，点 $u$ 与点 $v$ 的距离为 $\\gcd(u,v)$，求这个完全图的最大生成树的边权之和。", "inputFormat": "一个正整数 $n$。", "outputFormat": "一个整数，表示这个最大生成树的边权之和。", "hint": "**本题采用捆绑测试。**\n\n$\\text{Subtask}$ $0\\kern{3pt}$(10pts)：$n\\le 5$。\n\n$\\text{Subtask}$ $1\\kern{3pt}$(20pts)：$n\\le 1000$。\n\n$\\text{Subtask}$ $2\\kern{3pt}$(30pts)：$n\\le 10^{6}$。\n\n$\\text{Subtask}$ $3\\kern{3pt}$(40pts)：$n\\le 10^{7}$。\n\n对于所有测试数据，$1\\le n \\le 10^{7}$。", "locale": "zh-CN"}}}
{"pid": "P9489", "type": "P", "difficulty": 5, "samples": [["2 5 10\n2 3", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化", "容斥原理"], "title": "ZHY 的表示法", "background": "", "description": "ZHY 称一个正整数 $x$ 是**可被表示的**，当且仅当存在一个实数 $y$，满足 $\\lfloor \\frac y {x_1} \\rfloor+\\lfloor \\frac y {x_2} \\rfloor+\\cdots + \\lfloor \\frac y {x_n} \\rfloor=x$。现在，ZHY 想知道区间 $[l,r]$ 中有多少个正整数是可被表示的。", "inputFormat": "第一行三个正整数 $n,l,r$。\n\n第二行 $n$ 个正整数 $x_1,x_2,\\cdots,x_n$。", "outputFormat": "一行一个整数表示答案。", "hint": "**样例解释**\n\n当 $x=5$ 时，取 $y=6$ 成立。  \n当 $x=6$ 时，取 $y=8$ 成立。  \n当 $x=7$ 时，取 $y=9$ 成立。  \n当 $x=8$ 时，取 $y=10$ 成立。  \n当 $x=10$ 时，取 $y=12$ 成立。  \n\n故 $5,6,7,8,10$ 是可被表示的，可以证明，对于任意实数 $y$，$\\lfloor \\frac y {2} \\rfloor+\\lfloor \\frac y {3} \\rfloor\\ne 9$。故答案为 $5$。\n\n----\n\n**数据范围**\n\n对于 $30\\%$ 的数据，$l \\le r \\le 10^5$。\n\n对于另外 $10\\%$ 的数据，$n=1$。\n\n对于 $100\\%$ 的数据，$1\\le n \\le 25$，$1 \\le l \\le r \\le 10^9$，$1 \\le x_1,x_2,\\cdots,x_n \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "ZHY 的表示法", "background": "", "description": "ZHY 称一个正整数 $x$ 是**可被表示的**，当且仅当存在一个实数 $y$，满足 $\\lfloor \\frac y {x_1} \\rfloor+\\lfloor \\frac y {x_2} \\rfloor+\\cdots + \\lfloor \\frac y {x_n} \\rfloor=x$。现在，ZHY 想知道区间 $[l,r]$ 中有多少个正整数是可被表示的。", "inputFormat": "第一行三个正整数 $n,l,r$。\n\n第二行 $n$ 个正整数 $x_1,x_2,\\cdots,x_n$。", "outputFormat": "一行一个整数表示答案。", "hint": "**样例解释**\n\n当 $x=5$ 时，取 $y=6$ 成立。  \n当 $x=6$ 时，取 $y=8$ 成立。  \n当 $x=7$ 时，取 $y=9$ 成立。  \n当 $x=8$ 时，取 $y=10$ 成立。  \n当 $x=10$ 时，取 $y=12$ 成立。  \n\n故 $5,6,7,8,10$ 是可被表示的，可以证明，对于任意实数 $y$，$\\lfloor \\frac y {2} \\rfloor+\\lfloor \\frac y {3} \\rfloor\\ne 9$。故答案为 $5$。\n\n----\n\n**数据范围**\n\n对于 $30\\%$ 的数据，$l \\le r \\le 10^5$。\n\n对于另外 $10\\%$ 的数据，$n=1$。\n\n对于 $100\\%$ 的数据，$1\\le n \\le 25$，$1 \\le l \\le r \\le 10^9$，$1 \\le x_1,x_2,\\cdots,x_n \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9490", "type": "P", "difficulty": 6, "samples": [["3 2 2\n1 1 1\n2 2 0\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "递推", "O2优化", "分类讨论"], "title": "ZHY 的矩阵", "background": "", "description": "ZHY 的记忆中有一个 $k$ 行 $n$ 列的 01 矩阵 $A$，满足下列条件：\n\n- 每一列都至多有一个 $1$。\n- 每行相邻的两个 $1$ 所在的两列夹出的 $k$ 行的矩形（包括这两列）内至少有三个 $1$。\n\n突然，ZHY 想起来了矩阵中 $x$ 个位置的值。请你计算有多少种填充 $A$ 的剩余位置的方案，使得 $A$ 满足条件。\n\n----\n\n形式化的讲，设 $A$ 第 $i$ 行第 $j$ 列的数为 $A_{i,j}$，则 $A$ 满足下列条件：\n\n- 对于 $\\forall i \\in [1,k],\\kern{2pt}j \\in [1,n]$，$A_{i,j} \\in \\{0,1\\}$。\n\n- 对于 $\\forall i \\in [1,n]$，$\\displaystyle\\sum_{j=1}^{k} A_{j,i}\\le 1$。\n\n- 对于 $\\forall i,j \\in [1,n],\\kern{2pt}p \\in [1,k]$ 且 $j>i$，若有 $A_{p,i}=A_{p,j}=1,\\displaystyle \\sum_{x=i}^{j}A_{p,x}=2$，则有 $\\Big(\\displaystyle \\sum_{x=1}^{k} \\sum_{y=i}^{j} A_{x,y}\\Big) \\ge 3$。\n\n- 对于 $\\forall i\\in[1,x]$，有 $A_{a_{i},b_{i}}=c_{i}$。\n\n由于答案可能很大，你只需告诉 ZHY 答案对 $10^{9}+7$ 取模的结果。定义两个矩阵 $A,A'$ 不同，当且仅当存在 $i\\in[1,k]$，$j\\in[1,n]$ 满足 $A_{i,j}\\ne A'_{i,j}$。", "inputFormat": "第一行三个整数，表示 $n,k,x$。\n\n接下来 $x$ 行，每行三个整数 $a_{i},b_{i},c_{i}$。", "outputFormat": "一行一个整数，表示答案。", "hint": "**样例解释**\n\n满足条件的矩阵只有以下 $2$ 种：\n\n$$\n\\begin{Bmatrix}\n1&0&0\\\\\n0&0&0\n\\end{Bmatrix}\n$$\n\n$$\n\\begin{Bmatrix}\n1&0&0\\\\\n0&0&1\n\\end{Bmatrix}\n$$\n\n----\n\n\n**本题采用捆绑测试。**\n\n| $\\mathrm{Subtask} \\kern{2pt} \\mathrm{id}$ | $n$ | $x$ | 特殊性质 | 分值 |\n| :-----: | :-----: | :-----: | :-----: | :-----: |\n| $0$ | $\\le 8$ | $\\le 8$ | $k=2$ | $12$ |\n| $1$ | $\\le 2 \\times 10^{5}$ | $\\le 2\\times 10^{5}$ | 无 | $26$ |\n| $2$ | $\\le 10^{9}$ | $=0$ | 无 | $23$ |\n| $3$ | $\\le 10^{9}$ | $\\le 2\\times 10^{5}$ | $c_{i}=1$ | $15$ |\n| $4$ | $\\le 10^{9}$ | $\\le 2\\times 10^{5}$ | 无 | $24$ |\n\n对于所有数据，$1 \\le n \\le 10^{9}$，$0 \\le x \\le 2\\times 10^{5}$，$2\\le k \\le 100$。$1 \\le a_{i} \\le k$，$1 \\le b_{i} \\le n$，$c_{i} \\in \\{0,1\\}$。保证不存在一对 $i,j \\in [1,x],\\kern{2pt}i\\neq j$，满足 $a_{i}=a_{j},\\kern{2pt}b_{i}=b_{j}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "ZHY 的矩阵", "background": "", "description": "ZHY 的记忆中有一个 $k$ 行 $n$ 列的 01 矩阵 $A$，满足下列条件：\n\n- 每一列都至多有一个 $1$。\n- 每行相邻的两个 $1$ 所在的两列夹出的 $k$ 行的矩形（包括这两列）内至少有三个 $1$。\n\n突然，ZHY 想起来了矩阵中 $x$ 个位置的值。请你计算有多少种填充 $A$ 的剩余位置的方案，使得 $A$ 满足条件。\n\n----\n\n形式化的讲，设 $A$ 第 $i$ 行第 $j$ 列的数为 $A_{i,j}$，则 $A$ 满足下列条件：\n\n- 对于 $\\forall i \\in [1,k],\\kern{2pt}j \\in [1,n]$，$A_{i,j} \\in \\{0,1\\}$。\n\n- 对于 $\\forall i \\in [1,n]$，$\\displaystyle\\sum_{j=1}^{k} A_{j,i}\\le 1$。\n\n- 对于 $\\forall i,j \\in [1,n],\\kern{2pt}p \\in [1,k]$ 且 $j>i$，若有 $A_{p,i}=A_{p,j}=1,\\displaystyle \\sum_{x=i}^{j}A_{p,x}=2$，则有 $\\Big(\\displaystyle \\sum_{x=1}^{k} \\sum_{y=i}^{j} A_{x,y}\\Big) \\ge 3$。\n\n- 对于 $\\forall i\\in[1,x]$，有 $A_{a_{i},b_{i}}=c_{i}$。\n\n由于答案可能很大，你只需告诉 ZHY 答案对 $10^{9}+7$ 取模的结果。定义两个矩阵 $A,A'$ 不同，当且仅当存在 $i\\in[1,k]$，$j\\in[1,n]$ 满足 $A_{i,j}\\ne A'_{i,j}$。", "inputFormat": "第一行三个整数，表示 $n,k,x$。\n\n接下来 $x$ 行，每行三个整数 $a_{i},b_{i},c_{i}$。", "outputFormat": "一行一个整数，表示答案。", "hint": "**样例解释**\n\n满足条件的矩阵只有以下 $2$ 种：\n\n$$\n\\begin{Bmatrix}\n1&0&0\\\\\n0&0&0\n\\end{Bmatrix}\n$$\n\n$$\n\\begin{Bmatrix}\n1&0&0\\\\\n0&0&1\n\\end{Bmatrix}\n$$\n\n----\n\n\n**本题采用捆绑测试。**\n\n| $\\mathrm{Subtask} \\kern{2pt} \\mathrm{id}$ | $n$ | $x$ | 特殊性质 | 分值 |\n| :-----: | :-----: | :-----: | :-----: | :-----: |\n| $0$ | $\\le 8$ | $\\le 8$ | $k=2$ | $12$ |\n| $1$ | $\\le 2 \\times 10^{5}$ | $\\le 2\\times 10^{5}$ | 无 | $26$ |\n| $2$ | $\\le 10^{9}$ | $=0$ | 无 | $23$ |\n| $3$ | $\\le 10^{9}$ | $\\le 2\\times 10^{5}$ | $c_{i}=1$ | $15$ |\n| $4$ | $\\le 10^{9}$ | $\\le 2\\times 10^{5}$ | 无 | $24$ |\n\n对于所有数据，$1 \\le n \\le 10^{9}$，$0 \\le x \\le 2\\times 10^{5}$，$2\\le k \\le 100$。$1 \\le a_{i} \\le k$，$1 \\le b_{i} \\le n$，$c_{i} \\in \\{0,1\\}$。保证不存在一对 $i,j \\in [1,x],\\kern{2pt}i\\neq j$，满足 $a_{i}=a_{j},\\kern{2pt}b_{i}=b_{j}$。", "locale": "zh-CN"}}}
{"pid": "P9491", "type": "P", "difficulty": 5, "samples": [["3 2 2\n1 3\n2 6\n4 8\n1 3 5\n2 7 9", "13\n18\n26"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["树状数组", "O2优化"], "title": "ZHY 的集合", "background": "## 赛后时限改为 1s。\n\nZHY 又一次在赛时看错题了。\n[](T341514)", "description": "对于两个集合大小为 $x$ 的集合 $A,B$，满足 $A\\cap B=\\varnothing$（空集），ZHY 定义 $f(A,B)$ 如下：\n\n- 设 $C=A\\cup B$。将 $C$ 中的元素从小到大排序。\n\n- $f(A,B)=\\displaystyle \\sum_{i=1}^x C_i$。\n\n现在，ZHY 有 $n$ 个大小为 $m$ 的集合 $S_1,S_2,\\cdots,S_n$，他想知道 $\\displaystyle \\sum_{i=1}^n\\sum_{j=i + 1}^n f(S_i,S_j)$ 是多少。\n\n然而，ZHY 并不满足于此。于是他又进行了 $q$ 次修改操作，每次操作会重新给定一个集合。请你在每次修改后都输出一次答案，即 $\\displaystyle \\sum_{i=1}^n\\sum_{j=i + 1}^n f(S_i,S_j)$。保证任意时刻任意一个集合中元素两两不同，保证任意时刻任意两个集合的交为空。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n第 $2$ 行到第 $n+1$ 行，每行 $m$ 个整数，描述集合 $S_1,S_2,\\cdots,S_n$。第 $i+1$ 行的 $m$ 个数为集合 $S_i$ 中的 $m$ 个整数。\n\n随后 $q$ 行，每行第一个整数为 $x$，表示将要修改的集合的编号。随后 $m$ 个数表示新的 $S_x$ 中的 $m$ 个整数。", "outputFormat": "第一行一个整数表示初始时的答案。\n\n随后 $q$ 行，每行一个整数表示每次修改后的答案。", "hint": "**本题采用捆绑测试。**\n\n| $\\mathrm{Subtask} \\kern{2pt} \\mathrm{id}$ | $n$ | $m$ | $q$ | 分值 |\n| :-----: | :-----: | :-----: | :-----: | :-----: |\n| $0$ | $\\le 100$ | $\\le 10$ | $\\le 10$ | $7$ |\n| $1$ | $\\le 100$ | $\\le 100$ | $\\le 100$ | $11$ |\n| $2$ | $\\le 10^3$ | $\\le 100$ | $\\le 10^3$ | $7$ |\n| $3$ | $\\le 10^4$ | $\\le 100$ | $=0$ | $15$ |\n| $4$ | $\\le 10^4$ | $\\le 100$ | $\\le 10^3$ | $27$ |\n| $5$ | $\\le 10^4$ | $\\le 100$ | $\\le 10^4$ | $33$ |\n\n对于所有数据，$0 \\le n, q \\le 10^4$，$1 \\le m \\le 100$，$1 \\le S_{i,j} \\le 10^9$。保证任意时刻对于 $\\forall i\\in [1,n],\\kern{2pt}j \\in [1,m],\\kern{2pt}i' \\in[1,n],\\kern{2pt}j'\\in [1,m]$，若 $i \\ne i'$ 或 $j \\ne j'$，则 $S_{i,j} \\ne S_{i',j'}。$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "ZHY 的集合", "background": "## 赛后时限改为 1s。\n\nZHY 又一次在赛时看错题了。\n[](T341514)", "description": "对于两个集合大小为 $x$ 的集合 $A,B$，满足 $A\\cap B=\\varnothing$（空集），ZHY 定义 $f(A,B)$ 如下：\n\n- 设 $C=A\\cup B$。将 $C$ 中的元素从小到大排序。\n\n- $f(A,B)=\\displaystyle \\sum_{i=1}^x C_i$。\n\n现在，ZHY 有 $n$ 个大小为 $m$ 的集合 $S_1,S_2,\\cdots,S_n$，他想知道 $\\displaystyle \\sum_{i=1}^n\\sum_{j=i + 1}^n f(S_i,S_j)$ 是多少。\n\n然而，ZHY 并不满足于此。于是他又进行了 $q$ 次修改操作，每次操作会重新给定一个集合。请你在每次修改后都输出一次答案，即 $\\displaystyle \\sum_{i=1}^n\\sum_{j=i + 1}^n f(S_i,S_j)$。保证任意时刻任意一个集合中元素两两不同，保证任意时刻任意两个集合的交为空。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n第 $2$ 行到第 $n+1$ 行，每行 $m$ 个整数，描述集合 $S_1,S_2,\\cdots,S_n$。第 $i+1$ 行的 $m$ 个数为集合 $S_i$ 中的 $m$ 个整数。\n\n随后 $q$ 行，每行第一个整数为 $x$，表示将要修改的集合的编号。随后 $m$ 个数表示新的 $S_x$ 中的 $m$ 个整数。", "outputFormat": "第一行一个整数表示初始时的答案。\n\n随后 $q$ 行，每行一个整数表示每次修改后的答案。", "hint": "**本题采用捆绑测试。**\n\n| $\\mathrm{Subtask} \\kern{2pt} \\mathrm{id}$ | $n$ | $m$ | $q$ | 分值 |\n| :-----: | :-----: | :-----: | :-----: | :-----: |\n| $0$ | $\\le 100$ | $\\le 10$ | $\\le 10$ | $7$ |\n| $1$ | $\\le 100$ | $\\le 100$ | $\\le 100$ | $11$ |\n| $2$ | $\\le 10^3$ | $\\le 100$ | $\\le 10^3$ | $7$ |\n| $3$ | $\\le 10^4$ | $\\le 100$ | $=0$ | $15$ |\n| $4$ | $\\le 10^4$ | $\\le 100$ | $\\le 10^3$ | $27$ |\n| $5$ | $\\le 10^4$ | $\\le 100$ | $\\le 10^4$ | $33$ |\n\n对于所有数据，$0 \\le n, q \\le 10^4$，$1 \\le m \\le 100$，$1 \\le S_{i,j} \\le 10^9$。保证任意时刻对于 $\\forall i\\in [1,n],\\kern{2pt}j \\in [1,m],\\kern{2pt}i' \\in[1,n],\\kern{2pt}j'\\in [1,m]$，若 $i \\ne i'$ 或 $j \\ne j'$，则 $S_{i,j} \\ne S_{i',j'}。$", "locale": "zh-CN"}}}
{"pid": "P9492", "type": "P", "difficulty": 2, "samples": [["2\n5 1 2 1 2 1\n7 1 2 1 1 2 1 0", "NO\nYES"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "洛谷原创", "O2优化", "构造"], "title": "「SFCOI-3」进行一个拆的解", "background": "**公告：Subtask 0 数据有误，现已更改。**\n\n------------\n\n三岁的小明非常不喜欢完整的东西，他甚至连序列都想要拆掉。", "description": "给定序列 $a_1\\dots a_n$，小明想要把它拆成两个子段 $[1, l][l + 1, n](1 \\leq l \\lt n)$，即 $a_1\\dots a_l$ 和 $a_{l+1}\\dots a_n$。\n\n由于小明强迫症很严重，他不希望对于这两个子段，其中一个是另一个的 **子序列**，换句话说，他不希望其中一个子段可以通过删掉若干（可能为 $0$）个元素变成另一个。\n\n在父母出门的时候，小明终于找到了把序列拆开的机会！所以，他想知道，是否存在一种拆解的方式满足：任意一个子段都不是另一个子段的子序列。", "inputFormat": "第一行一个整数 $T$，表示小明总共要拆解 $T$ 个序列。接下来 $T$ 行，每行描述一个序列：\n\n+ 每行第一个整数 $n$，表示序列长度；\n+ 接下来 $n$ 个整数，依次代表序列中每一个数。", "outputFormat": "输出共 $T$ 行。\n\n对于每轮游戏，若存在满足条件的序列，输出 `YES`，否则输出 `NO`。", "hint": "### 样例解释\n\n对于第一个序列，所有拆分方式有：\n\n- $\\lbrace 1 \\rbrace,\\lbrace 2,1,2,1 \\rbrace$。\n- $\\lbrace 1,2 \\rbrace,\\lbrace 1,2,1 \\rbrace$。\n- $\\lbrace 1,2,1 \\rbrace,\\lbrace 2,1 \\rbrace$。\n- $\\lbrace 1,2,1,2 \\rbrace,\\lbrace 1 \\rbrace$。\n\n从任何地方拆开都是不合法的——较短的那个序列都是另一个序列的子序列。\n\n对于第二个序列，其中一种合理的拆分方式为 \n$\\lbrace 1,2,1,1,2 \\rbrace,\\lbrace 1,0 \\rbrace$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n- Subtask 0（15 points）：$a_i = 0$。\n- Subtask 1（15 points）：$n = 10$，保证数据随机生成。\n- Subtask 2（30 points）：$n$ 为偶数。\n- Subtask 3（40 points）：无特殊限制。\n\n对于所有数据，$1\\leq T \\leq 10^5$，$2 \\leq n \\leq 10^5$，$1 \\leq \\sum n \\leq 10^6$，$0 \\leq a_i \\leq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SFCOI-3」进行一个拆的解", "background": "**公告：Subtask 0 数据有误，现已更改。**\n\n------------\n\n三岁的小明非常不喜欢完整的东西，他甚至连序列都想要拆掉。", "description": "给定序列 $a_1\\dots a_n$，小明想要把它拆成两个子段 $[1, l][l + 1, n](1 \\leq l \\lt n)$，即 $a_1\\dots a_l$ 和 $a_{l+1}\\dots a_n$。\n\n由于小明强迫症很严重，他不希望对于这两个子段，其中一个是另一个的 **子序列**，换句话说，他不希望其中一个子段可以通过删掉若干（可能为 $0$）个元素变成另一个。\n\n在父母出门的时候，小明终于找到了把序列拆开的机会！所以，他想知道，是否存在一种拆解的方式满足：任意一个子段都不是另一个子段的子序列。", "inputFormat": "第一行一个整数 $T$，表示小明总共要拆解 $T$ 个序列。接下来 $T$ 行，每行描述一个序列：\n\n+ 每行第一个整数 $n$，表示序列长度；\n+ 接下来 $n$ 个整数，依次代表序列中每一个数。", "outputFormat": "输出共 $T$ 行。\n\n对于每轮游戏，若存在满足条件的序列，输出 `YES`，否则输出 `NO`。", "hint": "### 样例解释\n\n对于第一个序列，所有拆分方式有：\n\n- $\\lbrace 1 \\rbrace,\\lbrace 2,1,2,1 \\rbrace$。\n- $\\lbrace 1,2 \\rbrace,\\lbrace 1,2,1 \\rbrace$。\n- $\\lbrace 1,2,1 \\rbrace,\\lbrace 2,1 \\rbrace$。\n- $\\lbrace 1,2,1,2 \\rbrace,\\lbrace 1 \\rbrace$。\n\n从任何地方拆开都是不合法的——较短的那个序列都是另一个序列的子序列。\n\n对于第二个序列，其中一种合理的拆分方式为 \n$\\lbrace 1,2,1,1,2 \\rbrace,\\lbrace 1,0 \\rbrace$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n- Subtask 0（15 points）：$a_i = 0$。\n- Subtask 1（15 points）：$n = 10$，保证数据随机生成。\n- Subtask 2（30 points）：$n$ 为偶数。\n- Subtask 3（40 points）：无特殊限制。\n\n对于所有数据，$1\\leq T \\leq 10^5$，$2 \\leq n \\leq 10^5$，$1 \\leq \\sum n \\leq 10^6$，$0 \\leq a_i \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P9493", "type": "P", "difficulty": 5, "samples": [["4\n4\n1 1 3 3\n5\n2 1 3 3 4\n6\n1 1 2 5 4 5\n10\n3 2 3 4 7 6 8 8 8 9", "4\n12\n8\n96"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["动态规划 DP", "2023", "洛谷原创", "O2优化", "区间 DP"], "title": "「SFCOI-3」进行一个列的排", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/8v9kbxjs.png)\n\n（其实这题原来叫 I must say No，不过出于某些显然的原因就改题目名了 /kk）\n\nYou must say Yes.\n\n（题目背景图片来自 Phigros 曲绘，如有侵权，请告知出题人。）", "description": "小 R 有一个长度为 $n$ 的排列 $p_1\\dots p_n$。换句话说，$p_1\\dots p_n$ 包含 $0 \\sim (n - 1)$ 之间的数，并且满足对于 $0 \\sim (n - 1)$ 这 $n$ 个数，每个数在 $p$ 中出现且仅出现一次。\n\n小 R 有 $n$ 个限制，其中第 $i(0 \\leq i \\leq n - 1)$ 个用一个![](cnm,shabierLeasier)**正整数** $L_i$ 描述，表示至少有一个长度为 $L_i$ 的区间 $[l, r]$（即 $r - l + 1 = L_i$）满足 $\\operatorname{mex}_{k=l}^r p_k = i$。\n\n小 R 丢失了排列 $p_1\\dots p_n$，不过幸运的是她仍然记得这 $n$ 条限制。请你帮她求出总共有多少个初始的合法排列，答案对 $998244353$ 取模。", "inputFormat": "**本题每个测试点有多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。对于每组数据：\n\n+ 第一行一个整数 $n$。\n+ 第二行 $n$ 个整数依次表示 $L_0\\dots L_{n-1}$。", "outputFormat": "共 $T$ 行，每行一个整数表示答案。", "hint": "### 定义\n\n+ 一个序列的 $\\operatorname{mex}$ 是其中没有出现过的最小非负整数，如 $\\operatorname{mex}\\{1, 3, 4\\} = 0$，$\\operatorname{mex}\\{0, 1, 1, 2, 5\\} = 3$，$\\operatorname{mex}\\{3, 1, 0, 2\\} = 4$。\n\n### 数据规模与约定\n\n+ Subtask 0（10 pts）：$n \\leq 10$。\n+ Subtask 1（30 pts）：$n \\leq 18$。\n+ Subtask 2（15 pts）：$n \\leq 300$。\n+ Subtask 3（45 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10$，$1 \\leq n \\leq 5 \\times 10^3$，$1 \\leq L_i \\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SFCOI-3」进行一个列的排", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/8v9kbxjs.png)\n\n（其实这题原来叫 I must say No，不过出于某些显然的原因就改题目名了 /kk）\n\nYou must say Yes.\n\n（题目背景图片来自 Phigros 曲绘，如有侵权，请告知出题人。）", "description": "小 R 有一个长度为 $n$ 的排列 $p_1\\dots p_n$。换句话说，$p_1\\dots p_n$ 包含 $0 \\sim (n - 1)$ 之间的数，并且满足对于 $0 \\sim (n - 1)$ 这 $n$ 个数，每个数在 $p$ 中出现且仅出现一次。\n\n小 R 有 $n$ 个限制，其中第 $i(0 \\leq i \\leq n - 1)$ 个用一个![](cnm,shabierLeasier)**正整数** $L_i$ 描述，表示至少有一个长度为 $L_i$ 的区间 $[l, r]$（即 $r - l + 1 = L_i$）满足 $\\operatorname{mex}_{k=l}^r p_k = i$。\n\n小 R 丢失了排列 $p_1\\dots p_n$，不过幸运的是她仍然记得这 $n$ 条限制。请你帮她求出总共有多少个初始的合法排列，答案对 $998244353$ 取模。", "inputFormat": "**本题每个测试点有多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。对于每组数据：\n\n+ 第一行一个整数 $n$。\n+ 第二行 $n$ 个整数依次表示 $L_0\\dots L_{n-1}$。", "outputFormat": "共 $T$ 行，每行一个整数表示答案。", "hint": "### 定义\n\n+ 一个序列的 $\\operatorname{mex}$ 是其中没有出现过的最小非负整数，如 $\\operatorname{mex}\\{1, 3, 4\\} = 0$，$\\operatorname{mex}\\{0, 1, 1, 2, 5\\} = 3$，$\\operatorname{mex}\\{3, 1, 0, 2\\} = 4$。\n\n### 数据规模与约定\n\n+ Subtask 0（10 pts）：$n \\leq 10$。\n+ Subtask 1（30 pts）：$n \\leq 18$。\n+ Subtask 2（15 pts）：$n \\leq 300$。\n+ Subtask 3（45 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10$，$1 \\leq n \\leq 5 \\times 10^3$，$1 \\leq L_i \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P9494", "type": "P", "difficulty": 6, "samples": [["4 10\n1 1 4\n5 -1 4\n1 9 19\n8 -1 10\n1 1 11\n2 2 4\n3 3 5\n4 4 14\n1 2 1\n2 3 9\n3 4 1\n1 3 9\n2 4 8\n1 4 10", "0\n0\n19\n10\n4\n23\n19\n23\n23\n23"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "平衡树", "2023", "洛谷原创", "O2优化", "差分"], "title": "「SFCOI-3」进行一个走的行", "background": "**公告：注意存在 $l_i > r_i$ 的情况，此时操作无效。**\n\n------------\n\n小 L 热衷于行走。", "description": "小 L 来到了一处景点，他想要在这里的主干道上行走。\n\n主干道上有若干关键点，他可以将其抽象为一个长为 $n$ 的序列 $a$，每个 $a_i$ 都是一个三元组，可以表示为 $(l_i, r_i, v_i)$，其具体含义形如：\n\n- 若 $r_i = -1$，表示一个需要买票进入的景点，票价为 $l_i$ 代币，游览完成后他会得到 $v_i$ 的愉悦值。\n- 若 $r_i \\neq -1$，表示一个礼品派发点，若他持有的代币面值之和 $x$ 满足 $l_i \\leq x \\leq r_i$，他可以领取一份礼品，并会得到 $v_i$ 的愉悦值。\n\n他打算在这条主干道上行走 $m$ 次，每次他给出了行走起点 $l$ 和终点 $r$，一开始他持有的代币面值之和为 $x$，初始愉悦值为 $0$。\n\n他将从 $l$ 开始向右依次经过 $i \\in [l, r]$，他会做如下操作：\n\n- 若 $r_i = -1$，如果他持有的代币在支付完当前景点门票费用后还有剩余，他会游览这个景点。\n- 若 $r_i \\neq -1$，如果可以，他会领取一份礼品。\n\n请你帮他快速求出每次行走结束后他的愉悦值。", "inputFormat": "第一行，两个整数 $n, m$；\n\n接下来 $n$ 行，其中第 $i$ 行有三个整数 $l_i, r_i, v_i$；\n\n接下来 $m$ 行，每行三个整数 $l, r, x$，表示一个询问。", "outputFormat": "$m$ 行，每行一个整数，表示行走结束后他的愉悦值。", "hint": "**本题开启捆绑测试。**\n\n- Subtask 1（10 pts）：$1 \\leq n, m \\leq 5 \\times 10^3$。\n- Subtask 2（10 pts）：$r_i \\neq -1$。\n- Subtask 3（20 pts）：$r_i = -1$。\n- Subtask 4（10 pts）：$1 \\leq n, m \\leq 7.5 \\times 10^4$，性质 A。\n- Subtask 5（20 pts）：$1 \\leq n, m \\leq 7.5 \\times 10^4$。\n- Subtask 6（10 pts）：数据在范围内随机生成，性质 B。\n- Subtask 7（20 pts）：无特殊限制。\n\n性质 A：$1 \\leq l_i \\leq 7.5 \\times 10^4$，$r_i = -1$ 或 $1 \\leq r_i \\leq 7.5 \\times 10^4$，$1 \\leq x \\leq 7.5 \\times 10^4$。\n\n性质 B：$r_i = -1$ 时 $1 \\leq l_i \\leq 2 \\times 10^5$。\n\n对于 $100\\%$ 的数据：\n\n- $1 \\leq n, m \\leq 2 \\times 10^5$。\n- $1 \\leq l_i \\leq 10^9$，$r_i = -1$ 或 $1 \\leq r_i \\leq 10^9$。\n- $1 \\leq v_i \\leq 10^9$。\n- $1 \\leq l \\leq r \\leq n$，$1 \\leq x \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SFCOI-3」进行一个走的行", "background": "**公告：注意存在 $l_i > r_i$ 的情况，此时操作无效。**\n\n------------\n\n小 L 热衷于行走。", "description": "小 L 来到了一处景点，他想要在这里的主干道上行走。\n\n主干道上有若干关键点，他可以将其抽象为一个长为 $n$ 的序列 $a$，每个 $a_i$ 都是一个三元组，可以表示为 $(l_i, r_i, v_i)$，其具体含义形如：\n\n- 若 $r_i = -1$，表示一个需要买票进入的景点，票价为 $l_i$ 代币，游览完成后他会得到 $v_i$ 的愉悦值。\n- 若 $r_i \\neq -1$，表示一个礼品派发点，若他持有的代币面值之和 $x$ 满足 $l_i \\leq x \\leq r_i$，他可以领取一份礼品，并会得到 $v_i$ 的愉悦值。\n\n他打算在这条主干道上行走 $m$ 次，每次他给出了行走起点 $l$ 和终点 $r$，一开始他持有的代币面值之和为 $x$，初始愉悦值为 $0$。\n\n他将从 $l$ 开始向右依次经过 $i \\in [l, r]$，他会做如下操作：\n\n- 若 $r_i = -1$，如果他持有的代币在支付完当前景点门票费用后还有剩余，他会游览这个景点。\n- 若 $r_i \\neq -1$，如果可以，他会领取一份礼品。\n\n请你帮他快速求出每次行走结束后他的愉悦值。", "inputFormat": "第一行，两个整数 $n, m$；\n\n接下来 $n$ 行，其中第 $i$ 行有三个整数 $l_i, r_i, v_i$；\n\n接下来 $m$ 行，每行三个整数 $l, r, x$，表示一个询问。", "outputFormat": "$m$ 行，每行一个整数，表示行走结束后他的愉悦值。", "hint": "**本题开启捆绑测试。**\n\n- Subtask 1（10 pts）：$1 \\leq n, m \\leq 5 \\times 10^3$。\n- Subtask 2（10 pts）：$r_i \\neq -1$。\n- Subtask 3（20 pts）：$r_i = -1$。\n- Subtask 4（10 pts）：$1 \\leq n, m \\leq 7.5 \\times 10^4$，性质 A。\n- Subtask 5（20 pts）：$1 \\leq n, m \\leq 7.5 \\times 10^4$。\n- Subtask 6（10 pts）：数据在范围内随机生成，性质 B。\n- Subtask 7（20 pts）：无特殊限制。\n\n性质 A：$1 \\leq l_i \\leq 7.5 \\times 10^4$，$r_i = -1$ 或 $1 \\leq r_i \\leq 7.5 \\times 10^4$，$1 \\leq x \\leq 7.5 \\times 10^4$。\n\n性质 B：$r_i = -1$ 时 $1 \\leq l_i \\leq 2 \\times 10^5$。\n\n对于 $100\\%$ 的数据：\n\n- $1 \\leq n, m \\leq 2 \\times 10^5$。\n- $1 \\leq l_i \\leq 10^9$，$r_i = -1$ 或 $1 \\leq r_i \\leq 10^9$。\n- $1 \\leq v_i \\leq 10^9$。\n- $1 \\leq l \\leq r \\leq n$，$1 \\leq x \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9495", "type": "P", "difficulty": 7, "samples": [["4\n5\n1 0 1 0 1\n5\n1 0 0 1 1\n9\n0 0 0 0 0 0 0 0 0\n13\n0 1 0 0 1 0 1 0 0 0 0 0 0\n", "1\n2\n5\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2023", "洛谷原创", "O2优化", "构造", "Ad-hoc"], "title": "「SFCOI-3」进行一个魔的除 I", "background": "终于，勇士打败了魔王，他把走投无路的魔王困在了一个房间里。\n\n魔王拥有在黑暗中随意穿行的能力，所以勇士只有把房间里所有的灯全部打开，才能找到魔王，最终彻底消灭他。", "description": "房间中共有 $n$ 盏灯，初始状态可以用 $a_1\\dots a_n$ 表示，其中 $\\tt 0$ 表示这盏灯初始是关闭的，$\\tt 1$ 表示这盏灯初始是打开的。\n\n从第一天早晨开始，魔王与勇士轮流行动：\n\n- 每天早晨，魔王可以选择 **连续的** 两盏灯，将它们的状态全部设定为 $\\tt 0$；\n- 每天晚上，勇士可以选择 **任意的** 至多三盏灯，将它们的状态全部设定为 $\\tt 1$。\n\n每次行动时选择的灯在设定前的状态任意。\n\n假设双方均采用最优策略，不会进行任何不利于自己的行动。勇士想知道，**最少** 需要多少天（也即，他最少需要多少次操作）才能将所有灯状态设定为 $\\tt 1$——这样，他才能抓到可恶的魔王，迎娶美丽的公主。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n+ 第一行一个整数 $n$，表示灯的总数。\n+ 第二行共 $n$ 个数，依次表示 $a_1\\dots a_n$。", "outputFormat": "对于每组数据，一行一个整数，代表勇士抓到魔王所需要的最少天数。\n\n特别地，如果勇士不需要任何操作，输出 $0$ 即可。", "hint": "### 样例解释 1\n\n+ 第一天早晨，魔王关闭第 $1{,}2$ 两盏灯；\n+ 第一天晚上，勇士打开 $1{,}2{,}4$ 三盏灯。\n\n### 样例解释 2\n\n+ 第一天早晨，魔王关闭第 $4{,}5$ 两盏灯；\n+ 第一天晚上，勇士打开 $2{,}3{,}4$ 三盏灯。\n+ 第二天早晨，魔王关闭第 $1{,}2$ 两盏灯；\n+ 第二天晚上，勇士打开 $1{,}2{,}5$ 三盏灯。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n- Subtask 0（10 points）：$n \\leq 10$，$T \\leq 2046$。\n- Subtask 1（30 points）：$ n \\leq 2000$。\n- Subtask 2（10 points）：初始所有灯都是关闭的。 \n- Subtask 3（20 points）：数据随机生成。\n- Subtask 4（30 points）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10^6$，$1 \\leq n \\leq 10^6$，$1 \\leq \\sum n \\leq 3 \\times 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SFCOI-3」进行一个魔的除 I", "background": "终于，勇士打败了魔王，他把走投无路的魔王困在了一个房间里。\n\n魔王拥有在黑暗中随意穿行的能力，所以勇士只有把房间里所有的灯全部打开，才能找到魔王，最终彻底消灭他。", "description": "房间中共有 $n$ 盏灯，初始状态可以用 $a_1\\dots a_n$ 表示，其中 $\\tt 0$ 表示这盏灯初始是关闭的，$\\tt 1$ 表示这盏灯初始是打开的。\n\n从第一天早晨开始，魔王与勇士轮流行动：\n\n- 每天早晨，魔王可以选择 **连续的** 两盏灯，将它们的状态全部设定为 $\\tt 0$；\n- 每天晚上，勇士可以选择 **任意的** 至多三盏灯，将它们的状态全部设定为 $\\tt 1$。\n\n每次行动时选择的灯在设定前的状态任意。\n\n假设双方均采用最优策略，不会进行任何不利于自己的行动。勇士想知道，**最少** 需要多少天（也即，他最少需要多少次操作）才能将所有灯状态设定为 $\\tt 1$——这样，他才能抓到可恶的魔王，迎娶美丽的公主。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n+ 第一行一个整数 $n$，表示灯的总数。\n+ 第二行共 $n$ 个数，依次表示 $a_1\\dots a_n$。", "outputFormat": "对于每组数据，一行一个整数，代表勇士抓到魔王所需要的最少天数。\n\n特别地，如果勇士不需要任何操作，输出 $0$ 即可。", "hint": "### 样例解释 1\n\n+ 第一天早晨，魔王关闭第 $1{,}2$ 两盏灯；\n+ 第一天晚上，勇士打开 $1{,}2{,}4$ 三盏灯。\n\n### 样例解释 2\n\n+ 第一天早晨，魔王关闭第 $4{,}5$ 两盏灯；\n+ 第一天晚上，勇士打开 $2{,}3{,}4$ 三盏灯。\n+ 第二天早晨，魔王关闭第 $1{,}2$ 两盏灯；\n+ 第二天晚上，勇士打开 $1{,}2{,}5$ 三盏灯。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n- Subtask 0（10 points）：$n \\leq 10$，$T \\leq 2046$。\n- Subtask 1（30 points）：$ n \\leq 2000$。\n- Subtask 2（10 points）：初始所有灯都是关闭的。 \n- Subtask 3（20 points）：数据随机生成。\n- Subtask 4（30 points）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10^6$，$1 \\leq n \\leq 10^6$，$1 \\leq \\sum n \\leq 3 \\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9496", "type": "P", "difficulty": 1, "samples": [["3\n1 1\n4 5\n1 4", "0\n1\n2"]], "limits": {"time": [1000, 1000, 1000], "memory": [131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "位运算", "洛谷月赛"], "title": "「RiOI-2」hacker", "background": "在小树丛边坐落着一个幻想的城堡。这里是 E 国的领地，而小 E，则是 E 国之王。\n\n现在，伟大的 E 国之王正在披挂出征。\n\n不过听说 E 国之王遇见了两个叫 ACCEPT 和 BOTH 的人，他们是谁？", "description": "现在有正整数 $n$，有以下操作；\n\n- 「ACCEPT」。花费 $1$ 的代价，将 $n$ [二进制](https://oi-wiki.org/math/base/#%E4%BA%8C%E8%BF%9B%E5%88%B6)**按位或**上 一个正整数。\n- 「BOTH」。花费 $1$ 的代价，将 $n$ [二进制](https://oi-wiki.org/math/base/#%E4%BA%8C%E8%BF%9B%E5%88%B6)**按位与**上 一个正整数。\n\n两种操作均可使用多次（或不用），请求出将 $n$ 变为 $m$ 最小的代价。\n\n[帮助：什么是按位与和按位或](https://oi-wiki.org/math/bit/#%E4%B8%8E%E6%88%96%E5%BC%82%E6%88%96)", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n接下来 $T$ 行，每行两个正整数 $n, m$ 以空格隔开。", "outputFormat": "输出 $T$ 行，每行一个整数，表示答案。", "hint": "### 样例解释\n\n+ 对于 $n = 1$，$m = 1$，不需要任何操作。\n+ 对于 $n = 4$，$m = 5$，一种可行的方案为使用「ACCEPT $1$」。\n+ 对于 $n = 1$，$m = 4$，一种可行的方案为依次使用「ACCEPT $998{,}244{,}853$」和「BOTH $14$」。\n\n### 数据规模与约定\n\n**本题开启捆绑测试。**\n\n| $\\text{Subtask}$ | 分值 | $T \\leq$ | $n, m \\leq$ |\n| :--------------: | :--: | :------: | :---------: |\n| $0$ | $30$ | $100$ | $100$ |\n| $1$ | $70$ | $2\\times 10^5$ | $10^{18}$ |\n\n对于所有数据，$1\\le T\\le2\\times 10^5$，$1\\le n,m\\le10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-2」hacker", "background": "在小树丛边坐落着一个幻想的城堡。这里是 E 国的领地，而小 E，则是 E 国之王。\n\n现在，伟大的 E 国之王正在披挂出征。\n\n不过听说 E 国之王遇见了两个叫 ACCEPT 和 BOTH 的人，他们是谁？", "description": "现在有正整数 $n$，有以下操作；\n\n- 「ACCEPT」。花费 $1$ 的代价，将 $n$ [二进制](https://oi-wiki.org/math/base/#%E4%BA%8C%E8%BF%9B%E5%88%B6)**按位或**上 一个正整数。\n- 「BOTH」。花费 $1$ 的代价，将 $n$ [二进制](https://oi-wiki.org/math/base/#%E4%BA%8C%E8%BF%9B%E5%88%B6)**按位与**上 一个正整数。\n\n两种操作均可使用多次（或不用），请求出将 $n$ 变为 $m$ 最小的代价。\n\n[帮助：什么是按位与和按位或](https://oi-wiki.org/math/bit/#%E4%B8%8E%E6%88%96%E5%BC%82%E6%88%96)", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n接下来 $T$ 行，每行两个正整数 $n, m$ 以空格隔开。", "outputFormat": "输出 $T$ 行，每行一个整数，表示答案。", "hint": "### 样例解释\n\n+ 对于 $n = 1$，$m = 1$，不需要任何操作。\n+ 对于 $n = 4$，$m = 5$，一种可行的方案为使用「ACCEPT $1$」。\n+ 对于 $n = 1$，$m = 4$，一种可行的方案为依次使用「ACCEPT $998{,}244{,}853$」和「BOTH $14$」。\n\n### 数据规模与约定\n\n**本题开启捆绑测试。**\n\n| $\\text{Subtask}$ | 分值 | $T \\leq$ | $n, m \\leq$ |\n| :--------------: | :--: | :------: | :---------: |\n| $0$ | $30$ | $100$ | $100$ |\n| $1$ | $70$ | $2\\times 10^5$ | $10^{18}$ |\n\n对于所有数据，$1\\le T\\le2\\times 10^5$，$1\\le n,m\\le10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P9497", "type": "P", "difficulty": 2, "samples": [["3 3\n9 9 8\n2 4 4\n3 5 3\n5\n9\n10", "3\n2\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "二分", "洛谷原创", "O2优化", "排序", "洛谷月赛"], "title": "「RiOI-2」weight", "background": "在小树林间坐落着一个幻想的城堡。这里是 E 国的领地，而小 E，则是 E 国之王。\n\n树木，是 E 国抵挡袭击的法宝。树木越高，越能蒙蔽敌人的视线。\n\n可是，随着自然条件的退化，小 E 却不知怎么处理。怎么办呢？", "description": "给定一个 $n$ 行 $n$ 列 的矩阵 $a$。\n\n有 $q$ 组询问，每次给定一个 $v$，请将矩阵每一行任意重排（可以不重排），最大化**最大值不小于** $v$（也就是说，至少有一个不小于 $v$ 的数）的列数。请输出这个列数。\n\n询问之间相互独立。换言之，每次询问前可以重新排列。\n", "inputFormat": "第一行两个正整数 $n, q$。\n\n第 $2\\sim n+1$ 行，每行 $n$ 个正整数，表示矩阵 $a$。\n\n接下来 $q$ 行每行一个正整数 $v$，表示一次询问。", "outputFormat": "对于每次询问，输出一行一个整数表示答案。", "hint": "### 样例解释\n\n原矩阵为 $\\begin{bmatrix}9&9&8\\\\2&4&4\\\\3&5&3\\end{bmatrix}$。\n\n对于第一次询问，每一列的最大值 $9,9,8$ 均不小于 $v=5$，所以每一列都符合条件，答案为 $3$。显然无论怎么重排都不可能超过 $3$ 列（因为总共只有 $3$ 列），所以答案为 $3$。\n\n### 数据规模与约定\n\n**本题开启捆绑测试。**\n\n| $\\text{Subtask}$ | 分值 | $n \\leq$ | $q \\leq$ |\n| :--------------: | :--: | :------: | :------: |\n| $0$ | $10$ | $3$ | $10$ |\n| $1$ | $40$ | $100$ | $10^3$ |\n| $2$ | $50$ | $10^3$ | $5\\times 10^5$ |\n\n对于所有数据，$1 \\leq n \\leq 10^3$，$1 \\leq q \\leq 5\\times 10^5$，$1 \\leq a_{i,j}, v \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-2」weight", "background": "在小树林间坐落着一个幻想的城堡。这里是 E 国的领地，而小 E，则是 E 国之王。\n\n树木，是 E 国抵挡袭击的法宝。树木越高，越能蒙蔽敌人的视线。\n\n可是，随着自然条件的退化，小 E 却不知怎么处理。怎么办呢？", "description": "给定一个 $n$ 行 $n$ 列 的矩阵 $a$。\n\n有 $q$ 组询问，每次给定一个 $v$，请将矩阵每一行任意重排（可以不重排），最大化**最大值不小于** $v$（也就是说，至少有一个不小于 $v$ 的数）的列数。请输出这个列数。\n\n询问之间相互独立。换言之，每次询问前可以重新排列。\n", "inputFormat": "第一行两个正整数 $n, q$。\n\n第 $2\\sim n+1$ 行，每行 $n$ 个正整数，表示矩阵 $a$。\n\n接下来 $q$ 行每行一个正整数 $v$，表示一次询问。", "outputFormat": "对于每次询问，输出一行一个整数表示答案。", "hint": "### 样例解释\n\n原矩阵为 $\\begin{bmatrix}9&9&8\\\\2&4&4\\\\3&5&3\\end{bmatrix}$。\n\n对于第一次询问，每一列的最大值 $9,9,8$ 均不小于 $v=5$，所以每一列都符合条件，答案为 $3$。显然无论怎么重排都不可能超过 $3$ 列（因为总共只有 $3$ 列），所以答案为 $3$。\n\n### 数据规模与约定\n\n**本题开启捆绑测试。**\n\n| $\\text{Subtask}$ | 分值 | $n \\leq$ | $q \\leq$ |\n| :--------------: | :--: | :------: | :------: |\n| $0$ | $10$ | $3$ | $10$ |\n| $1$ | $40$ | $100$ | $10^3$ |\n| $2$ | $50$ | $10^3$ | $5\\times 10^5$ |\n\n对于所有数据，$1 \\leq n \\leq 10^3$，$1 \\leq q \\leq 5\\times 10^5$，$1 \\leq a_{i,j}, v \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9498", "type": "P", "difficulty": 3, "samples": [["6\n1 2\n1 3\n2 4\n2 5\n2 6", "0 1 1 1 0 0"], ["5\n1 2\n1 3\n2 4\n2 5", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「RiOI-2」equals", "background": "在小树上坐落着一个幻想的城堡。这里是 E 国的领地，而小 E，则是 E 国之王。\n\n为了打造一个完美的 E 国，他需要明辨是非，走向正义。\n\n但是，他似乎有些太理想了。有时并没有一个完美的准则。是黑是白，谁能分辨？", "description": "给定一棵 $n$ 个结点，以 $1$ 为根的树，定义一个结点的深度 $d_i$ 表示它到根结点的简单路径上的结点个数。\n\n你需要给每个结点黑白染色，满足黑色结点的深度和等于白色结点的深度和。设 $c_i = \\{0, 1\\}$ 分别代表编号为 $i$ 的结点为黑色或白色，那么这即 $\\displaystyle\\sum_{c_i=0}d_i=\\sum_{c_i=1}d_i$。\n\n若无解，仅输出一行一个整数 $-1$。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n - 1$ 行，每行两个整数 $u_i, v_i$，表示树上编号为 $u_i$ 的结点与编号为 $v_i$ 的结点之间有一条边。保证给出的边不重复。", "outputFormat": "若有解，则输出一行 $n$ 个数 $c_1\\dots c_n$。\n\n若无解，仅输出一行一个整数 $-1$。\n\n**本题开启 Special Judge，只要你的方案满足条件或正确判断无解即可拿到本测试点的分数。**", "hint": "### 样例解释\n\n对于第一组数据，每个结点的深度分别是 $d=[1,2,2,3,3,3]$。黑色结点的深度和为 $d_1+d_5+d_6=1+3+3=7$，白色结点的深度和为 $d_2+d_3+d_4=2+2+3=7$。它们相等，所以样例输出是正确的。可能的正确输出包括但不限于样例输出、`0 1 1 0 0 1`，`1 0 0 1 0 1` 等。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\rm Subtask$ | 分值 | $n\\le $ | 特殊性质 |\n| :-----------: | :--: | :-----: | :------: |\n| $0$ | $5$ | $20$ | / |\n| $1$ | $15$ | $500$ | / |\n| $2$ | $20$ | $5\\times 10^3$ | / |\n| $3$ | $10$ | / | $n$ 为偶数 |\n| $4$ | $5$ | / | 树为菊花图（不保证根为菊花中心） |\n| $5$ | $5$ | / | 树为一条链（不保证根为链的端点） |\n| $6$ | $40$ | / | / |\n\n斜杠表示这一栏无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$1\\le u_i,v_i\\le n$，输入数据构成一棵树。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-2」equals", "background": "在小树上坐落着一个幻想的城堡。这里是 E 国的领地，而小 E，则是 E 国之王。\n\n为了打造一个完美的 E 国，他需要明辨是非，走向正义。\n\n但是，他似乎有些太理想了。有时并没有一个完美的准则。是黑是白，谁能分辨？", "description": "给定一棵 $n$ 个结点，以 $1$ 为根的树，定义一个结点的深度 $d_i$ 表示它到根结点的简单路径上的结点个数。\n\n你需要给每个结点黑白染色，满足黑色结点的深度和等于白色结点的深度和。设 $c_i = \\{0, 1\\}$ 分别代表编号为 $i$ 的结点为黑色或白色，那么这即 $\\displaystyle\\sum_{c_i=0}d_i=\\sum_{c_i=1}d_i$。\n\n若无解，仅输出一行一个整数 $-1$。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n - 1$ 行，每行两个整数 $u_i, v_i$，表示树上编号为 $u_i$ 的结点与编号为 $v_i$ 的结点之间有一条边。保证给出的边不重复。", "outputFormat": "若有解，则输出一行 $n$ 个数 $c_1\\dots c_n$。\n\n若无解，仅输出一行一个整数 $-1$。\n\n**本题开启 Special Judge，只要你的方案满足条件或正确判断无解即可拿到本测试点的分数。**", "hint": "### 样例解释\n\n对于第一组数据，每个结点的深度分别是 $d=[1,2,2,3,3,3]$。黑色结点的深度和为 $d_1+d_5+d_6=1+3+3=7$，白色结点的深度和为 $d_2+d_3+d_4=2+2+3=7$。它们相等，所以样例输出是正确的。可能的正确输出包括但不限于样例输出、`0 1 1 0 0 1`，`1 0 0 1 0 1` 等。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\rm Subtask$ | 分值 | $n\\le $ | 特殊性质 |\n| :-----------: | :--: | :-----: | :------: |\n| $0$ | $5$ | $20$ | / |\n| $1$ | $15$ | $500$ | / |\n| $2$ | $20$ | $5\\times 10^3$ | / |\n| $3$ | $10$ | / | $n$ 为偶数 |\n| $4$ | $5$ | / | 树为菊花图（不保证根为菊花中心） |\n| $5$ | $5$ | / | 树为一条链（不保证根为链的端点） |\n| $6$ | $40$ | / | / |\n\n斜杠表示这一栏无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$1\\le u_i,v_i\\le n$，输入数据构成一棵树。", "locale": "zh-CN"}}}
{"pid": "P9499", "type": "P", "difficulty": 7, "samples": [["0\n2\n2\n1 5\n5 1\n4\n10\n1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000\n1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000\n1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000", "11\n172998509"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「RiOI-2」change", "background": "小 E 终于在今天收回了被妈妈保管的压岁钱。\n\n作为有远见的收藏家，小 E 知道，如果她从现在开始收集东西，以后就会变得值钱了。\n\n小 E 的世界里有一些纸币。她知道这些纸币未来的价值，但遗憾的是，这些纸币只能从小换到大。如何是好？", "description": "给定 $n$ 种物品，每种物品 $i$ 价值为 $v_i$，个数为 $c_i$。\n\n定义总价值为 $\\sum\\limits_{i=1}^nc_iv_i$，你可以进行一些（可能为 $0$）次操作来最大化总价值。\n\n一次操作为：选定一个 $i$ 满足 $c_i \\geq x_i$，让 $c_i\\gets c_i - x_i$，$c_{i+1}\\gets c_{i+1}+ 1$。\n\n输出最大的总价值对 $998,\\!244,\\!353$ 取模。\n\n**注意，你需要最大化总价值，再对 $998,\\!244,\\!353$ 取模，而不是最大化「总价值对 $998,\\!244,\\!353$ 取模的值」。**", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $\\text{sid}$，表示该测试数据所属子任务编号。\n\n第二行一个正整数 $t$，表示数据组数。对于每组数据：\n\n+ 输入共四行。\n+ 第一行，一个正整数 $n$，表示钱的种数。\n+ 第二行，$n$ 个非负整数分别表示 $v_1, v_2 \\dots v_n$。\n+ 第三行，$n$ 个非负整数分别表示 $c_1, c_2 \\dots c_n$。\n+ 第四行，$n - 1$ 个正整数分别表示 $x_1, x_2 \\dots x_{n - 1}$。", "outputFormat": "输出 $t$ 行，每行一个整数，表示物品总价值的最大值。所有答案对 $998244353$ 取模。", "hint": "### 样例解释\n\n对于样例的第一组数据，$v=[1,5]$，$c=[5,1]$，$x=[4]$。可以选定 $i=1$ 进行一次操作，此时 $c=[1,2]$，总价值为 $1\\cdot 1+5\\cdot 2=11$，可以证明它是最大的。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n下面是各 Subtask 的特殊性质，斜杠表示该栏无特殊限制。\n\n|$\\text{sid}=$| $\\sum n\\le$ | $c_i,v_i\\le$ | 特殊性质 |分值|\n| :-: | :---------: | :----------: | :------: | :-: |\n| $1$ | / | / | 特殊性质 A | $5$ |\n| $2$ | / | / | 特殊性质 B | $15$ |\n| $3$ | / | / | 特殊性质 C | $15$ |\n| $4$ | $300$ | $300$ | / | $15$ |\n| $5$ | $2000$ | $2000$ | / | $20$ |\n| $6$ | $2000$ | / | / | $15$ |\n| $7$ | / | / | / | $15$ |\n\n+ 特殊性质 A：$x_i = 10^9$。\n+ 特殊性质 B：$x_i = 1$。\n+ 特殊性质 C：所有 $c_i, v_i$ 均在 $[0, 10^5]$ 间均匀随机生成；所有 $x_i$ 均在 $[1, 10^5]$ 间均匀随机生成。\n\n对于所有数据，$1\\le t \\le 10^5$，$2\\le n$，$\\sum n\\le 2\\times 10^5$，$1\\le x_i\\le 10^9$，$0\\le c_i,v_i\\le 10^9$。\n\nupd：新增一组 hack 数据，$\\text{sid}$ 为 $7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-2」change", "background": "小 E 终于在今天收回了被妈妈保管的压岁钱。\n\n作为有远见的收藏家，小 E 知道，如果她从现在开始收集东西，以后就会变得值钱了。\n\n小 E 的世界里有一些纸币。她知道这些纸币未来的价值，但遗憾的是，这些纸币只能从小换到大。如何是好？", "description": "给定 $n$ 种物品，每种物品 $i$ 价值为 $v_i$，个数为 $c_i$。\n\n定义总价值为 $\\sum\\limits_{i=1}^nc_iv_i$，你可以进行一些（可能为 $0$）次操作来最大化总价值。\n\n一次操作为：选定一个 $i$ 满足 $c_i \\geq x_i$，让 $c_i\\gets c_i - x_i$，$c_{i+1}\\gets c_{i+1}+ 1$。\n\n输出最大的总价值对 $998,\\!244,\\!353$ 取模。\n\n**注意，你需要最大化总价值，再对 $998,\\!244,\\!353$ 取模，而不是最大化「总价值对 $998,\\!244,\\!353$ 取模的值」。**", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $\\text{sid}$，表示该测试数据所属子任务编号。\n\n第二行一个正整数 $t$，表示数据组数。对于每组数据：\n\n+ 输入共四行。\n+ 第一行，一个正整数 $n$，表示钱的种数。\n+ 第二行，$n$ 个非负整数分别表示 $v_1, v_2 \\dots v_n$。\n+ 第三行，$n$ 个非负整数分别表示 $c_1, c_2 \\dots c_n$。\n+ 第四行，$n - 1$ 个正整数分别表示 $x_1, x_2 \\dots x_{n - 1}$。", "outputFormat": "输出 $t$ 行，每行一个整数，表示物品总价值的最大值。所有答案对 $998244353$ 取模。", "hint": "### 样例解释\n\n对于样例的第一组数据，$v=[1,5]$，$c=[5,1]$，$x=[4]$。可以选定 $i=1$ 进行一次操作，此时 $c=[1,2]$，总价值为 $1\\cdot 1+5\\cdot 2=11$，可以证明它是最大的。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n下面是各 Subtask 的特殊性质，斜杠表示该栏无特殊限制。\n\n|$\\text{sid}=$| $\\sum n\\le$ | $c_i,v_i\\le$ | 特殊性质 |分值|\n| :-: | :---------: | :----------: | :------: | :-: |\n| $1$ | / | / | 特殊性质 A | $5$ |\n| $2$ | / | / | 特殊性质 B | $15$ |\n| $3$ | / | / | 特殊性质 C | $15$ |\n| $4$ | $300$ | $300$ | / | $15$ |\n| $5$ | $2000$ | $2000$ | / | $20$ |\n| $6$ | $2000$ | / | / | $15$ |\n| $7$ | / | / | / | $15$ |\n\n+ 特殊性质 A：$x_i = 10^9$。\n+ 特殊性质 B：$x_i = 1$。\n+ 特殊性质 C：所有 $c_i, v_i$ 均在 $[0, 10^5]$ 间均匀随机生成；所有 $x_i$ 均在 $[1, 10^5]$ 间均匀随机生成。\n\n对于所有数据，$1\\le t \\le 10^5$，$2\\le n$，$\\sum n\\le 2\\times 10^5$，$1\\le x_i\\le 10^9$，$0\\le c_i,v_i\\le 10^9$。\n\nupd：新增一组 hack 数据，$\\text{sid}$ 为 $7$。", "locale": "zh-CN"}}}
{"pid": "P9500", "type": "P", "difficulty": 6, "samples": [["4\n0\n1755648 1755648\n0 353442899\n35281 18253\n99728538 70320626", "1000000001\n998244353\n35281\n66330831785160880538172878128228067748679057340064161580956433229228884846388176250309226257600174873157935217529307119972759542770571505108922703815887608877795159689067116959276902444827654683066165"], ["1\n1\n30 30", "030"], ["5\n0\n114514191 214748364\n414414414 515515515\n302813344 124821394\n123456789 987654321\n307210721 127012703", "4509169566936302030543528193\n6765800751328156020889260421\n6754420765703935546785979321\n4408846009459835952892074437\n3108033793065515131695113495"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「RiOI-2」tnelat", "background": "小 E 是一名一年级的小学生。她正在学习如何阅读。\n\n如果在纸上写上 $998,\\!244,\\!353$，那么她就会读「三——五三四四——二八九九。」是的，她是从右往左读的。然后，她会把这个数理解为 $353,\\!442,\\!899$。\n\n不过这并不影响她交流——她只是不会读纸上的文字罢了。唯一的问题是，她现在要学习带余除法了，而老师说不定会在纸上画一些红色的叉叉。不过，那又如何？", "description": "对于一个长度为 $n$ 的**由数字组成的**字符串 $s=s_1s_2s_3\\cdots s_n$，定义它的权值为 $f(s)=\\sum\\limits_{i=1}^n 10^{n-i}s_i$。（也就是它代表的十进制数）定义它的反串为 $\\overline s=s_ns_{n-1}s_{n-2}\\cdots s_1$。例如，$s=\\texttt{0321}$ 的权值为 $f(s)=321$，反串为 $\\overline s=\\texttt{1230}$。  \n\n试构造一个字符串 $s$，使得 $|s|\\le 114514$，且 $f(s)\\equiv a\\pmod {998,\\!244,\\!353}$ 且 $f(\\overline s)\\equiv b\\pmod{998,\\!244,\\!353}$。如果 $c=0$，你还要保证 $s_1\\neq \\texttt0$ 且 $s_n\\neq \\texttt 0$。\n如果无解，仅输出整数 $-1$ 即可。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n第二行一个整数 $c$，意义如题目所述。\n\n接下来 $T$ 行，每行两个以空格隔开的自然数 $a, b$ 描述一组数据。", "outputFormat": "输出 $T$ 行，每行一个正整数表示你构造的数。\n\n**本题开启 Special Judge，只要你的输出符合要求即可得到该测试点的分数。**", "hint": "### 样例解释\n\n对于第一组样例的第一组数据，$s=\\overline{s}=\\texttt{1000000001}$，$f(s)=f(\\overline s)=1{,}000{,}000{,}001\\equiv 1{,}755{,}648\\pmod{998,\\!244,\\!353}$，所以它是一个可行解。\n\n### 数据规模与约定\n\n**本题开启捆绑测试。**\n\n| $\\text{Subtask}$ | 分值 | $a,b$ | 特殊性质 | \n| :--------------: | :--: | :---: | :------: |\n| $0$ | $5$ | $ \\in [1, 9]$ | $a = b$ |\n| $1$ | $10$ | $ \\in [0, 9]$ | / |\n| $2$ | $15$ | $ \\in [0, 99]$ | / | \n| $3$ | $25$ | / | $a = 0$ |\n| $4$ | $25$ | / | $c = 1$ |\n| $5$ | $20$ | / | / |\n\n上表中的斜杠表示无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 30$，$c\\in\\{0,1\\}$，$0 \\leq a, b \\lt 998{,}244{,}353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-2」tnelat", "background": "小 E 是一名一年级的小学生。她正在学习如何阅读。\n\n如果在纸上写上 $998,\\!244,\\!353$，那么她就会读「三——五三四四——二八九九。」是的，她是从右往左读的。然后，她会把这个数理解为 $353,\\!442,\\!899$。\n\n不过这并不影响她交流——她只是不会读纸上的文字罢了。唯一的问题是，她现在要学习带余除法了，而老师说不定会在纸上画一些红色的叉叉。不过，那又如何？", "description": "对于一个长度为 $n$ 的**由数字组成的**字符串 $s=s_1s_2s_3\\cdots s_n$，定义它的权值为 $f(s)=\\sum\\limits_{i=1}^n 10^{n-i}s_i$。（也就是它代表的十进制数）定义它的反串为 $\\overline s=s_ns_{n-1}s_{n-2}\\cdots s_1$。例如，$s=\\texttt{0321}$ 的权值为 $f(s)=321$，反串为 $\\overline s=\\texttt{1230}$。  \n\n试构造一个字符串 $s$，使得 $|s|\\le 114514$，且 $f(s)\\equiv a\\pmod {998,\\!244,\\!353}$ 且 $f(\\overline s)\\equiv b\\pmod{998,\\!244,\\!353}$。如果 $c=0$，你还要保证 $s_1\\neq \\texttt0$ 且 $s_n\\neq \\texttt 0$。\n如果无解，仅输出整数 $-1$ 即可。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n第二行一个整数 $c$，意义如题目所述。\n\n接下来 $T$ 行，每行两个以空格隔开的自然数 $a, b$ 描述一组数据。", "outputFormat": "输出 $T$ 行，每行一个正整数表示你构造的数。\n\n**本题开启 Special Judge，只要你的输出符合要求即可得到该测试点的分数。**", "hint": "### 样例解释\n\n对于第一组样例的第一组数据，$s=\\overline{s}=\\texttt{1000000001}$，$f(s)=f(\\overline s)=1{,}000{,}000{,}001\\equiv 1{,}755{,}648\\pmod{998,\\!244,\\!353}$，所以它是一个可行解。\n\n### 数据规模与约定\n\n**本题开启捆绑测试。**\n\n| $\\text{Subtask}$ | 分值 | $a,b$ | 特殊性质 | \n| :--------------: | :--: | :---: | :------: |\n| $0$ | $5$ | $ \\in [1, 9]$ | $a = b$ |\n| $1$ | $10$ | $ \\in [0, 9]$ | / |\n| $2$ | $15$ | $ \\in [0, 99]$ | / | \n| $3$ | $25$ | / | $a = 0$ |\n| $4$ | $25$ | / | $c = 1$ |\n| $5$ | $20$ | / | / |\n\n上表中的斜杠表示无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 30$，$c\\in\\{0,1\\}$，$0 \\leq a, b \\lt 998{,}244{,}353$。", "locale": "zh-CN"}}}
{"pid": "P9501", "type": "P", "difficulty": 7, "samples": [["9\n4 2 0\n9 9 -9\n9 3 3\n20 8 -12\n114 5 14\n191 9 81\n1036 854 104\n998244 353 4\n2147483 64 7", "12\n256\n108\n10000\n661235724\n741150826\n500003636\n222931421\n404094315"], ["6\n8 4 0\n12 4 0\n16 4 0\n20 4 0\n24 4 0\n28 4 0", "176\n1728\n26160\n368000\n5413856\n80212608"], ["4\n6 2 0\n10 2 0\n9 9 7\n9 3 6", "0\n0\n0\n0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "洛谷原创", "O2优化", "生成函数", "快速数论变换 NTT", "洛谷月赛"], "title": "「RiOI-2」likely", "background": "小 E 喜欢把东西排成环状，而不是一条链。\n\n近些天，她在学校学到了正负号。她把它们放在了环上，作为密码。\n\n然而，她现在已然忘却了，只看到草稿纸上的一个数字。那是什么？", "description": "对于一个长度为 $n$ 的仅包含 $\\pm1$ 的序列 $a_0\\dots a_{n-1}$，我们定义 $S(a, m) = \\displaystyle \\sum_{k = 0}^{n - 1} \\prod_{l = 0}^{m - 1} a_{(k + l) \\bmod n}$。\n\n给定 $n, m, k$，求在 $2^n$ 个不同的序列 $a$ 里，试求出有多少不同的 $a$ 满足 $S(a, m) = k$。\n\n答案对 $998,\\!244,\\!353$ 取模。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$ 表示测试数据组数。\n\n接下来 $T$ 行，每行三个整数，依次表示 $n, m, k$。", "outputFormat": "共 $T$ 行，每行一个整数，表示一组数据的答案。", "hint": "### 样例解释\n\n对于第一组样例的第一组数据，不符合要求的只有 $a=[1,1,1,1]$，$a=[-1,-1,-1,-1]$，$a=[1,-1,1,-1]$ 和 $a=[-1,1,-1,1]$，所以答案为 $2^4-4=12$。\n\n对于第一组样例的第二组数据，符合要求的只有 $a$ 中恰有奇数个 $-1$，所以答案为 $2^8=256$。\n\n### 数据规模与约定\n\n**本题开启捆绑测试。**\n\n| $\\text{Subtask}$ | 分值 | $T \\leq$ | $\\sum n \\leq$ | $m \\leq$ |\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $5$ | $1$ | $20$ | / |\n| $1$ | $10$ | $5$ | $10^5$ | $2$ |\n| $2$ | $10$ | $5$ | $10^5$ | $4$ |\n| $3$ | $15$ | / | $7\\times10^3$ | / |\n| $4$ | $20$ | / | $10^5$ | / |\n| $5$ | $40$ | / | / | / |\n\n对于所有数据，保证 $2 \\leq m \\leq n \\leq 5\\times 10^6$，$0 \\leq \\lvert k\\rvert \\leq n$，$1 \\leq T \\leq 10$，$\\sum n\\leq 5\\times10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-2」likely", "background": "小 E 喜欢把东西排成环状，而不是一条链。\n\n近些天，她在学校学到了正负号。她把它们放在了环上，作为密码。\n\n然而，她现在已然忘却了，只看到草稿纸上的一个数字。那是什么？", "description": "对于一个长度为 $n$ 的仅包含 $\\pm1$ 的序列 $a_0\\dots a_{n-1}$，我们定义 $S(a, m) = \\displaystyle \\sum_{k = 0}^{n - 1} \\prod_{l = 0}^{m - 1} a_{(k + l) \\bmod n}$。\n\n给定 $n, m, k$，求在 $2^n$ 个不同的序列 $a$ 里，试求出有多少不同的 $a$ 满足 $S(a, m) = k$。\n\n答案对 $998,\\!244,\\!353$ 取模。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$ 表示测试数据组数。\n\n接下来 $T$ 行，每行三个整数，依次表示 $n, m, k$。", "outputFormat": "共 $T$ 行，每行一个整数，表示一组数据的答案。", "hint": "### 样例解释\n\n对于第一组样例的第一组数据，不符合要求的只有 $a=[1,1,1,1]$，$a=[-1,-1,-1,-1]$，$a=[1,-1,1,-1]$ 和 $a=[-1,1,-1,1]$，所以答案为 $2^4-4=12$。\n\n对于第一组样例的第二组数据，符合要求的只有 $a$ 中恰有奇数个 $-1$，所以答案为 $2^8=256$。\n\n### 数据规模与约定\n\n**本题开启捆绑测试。**\n\n| $\\text{Subtask}$ | 分值 | $T \\leq$ | $\\sum n \\leq$ | $m \\leq$ |\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $5$ | $1$ | $20$ | / |\n| $1$ | $10$ | $5$ | $10^5$ | $2$ |\n| $2$ | $10$ | $5$ | $10^5$ | $4$ |\n| $3$ | $15$ | / | $7\\times10^3$ | / |\n| $4$ | $20$ | / | $10^5$ | / |\n| $5$ | $40$ | / | / | / |\n\n对于所有数据，保证 $2 \\leq m \\leq n \\leq 5\\times 10^6$，$0 \\leq \\lvert k\\rvert \\leq n$，$1 \\leq T \\leq 10$，$\\sum n\\leq 5\\times10^6$。", "locale": "zh-CN"}}}
{"pid": "P9502", "type": "P", "difficulty": 1, "samples": [["7", "2"], ["8", "2"], ["1024", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "枚举"], "title": "『MGOI』Simple Round I | A. 魔法数字", "background": "> 目标越坚定的魔法士，越幸运。——殿堂魔法士 S", "description": "初级魔法士小 M 的魔法数字是 $2$。\n\n给定一个正整数 $n$，小 M 需要找到最大的 **偶数** $m$，使得 $2^m<n$。\n\n请你帮帮他。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个 **偶数** $m$，表示答案。", "hint": "**【数据范围】**\n\n对于前 $20\\%$ 的数据，$n = 2$。\n\n对于前 $60\\%$ 的数据，$n$ 为 $2$ 的幂次。\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MGOI』Simple Round I | A. 魔法数字", "background": "> 目标越坚定的魔法士，越幸运。——殿堂魔法士 S", "description": "初级魔法士小 M 的魔法数字是 $2$。\n\n给定一个正整数 $n$，小 M 需要找到最大的 **偶数** $m$，使得 $2^m<n$。\n\n请你帮帮他。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个 **偶数** $m$，表示答案。", "hint": "**【数据范围】**\n\n对于前 $20\\%$ 的数据，$n = 2$。\n\n对于前 $60\\%$ 的数据，$n$ 为 $2$ 的幂次。\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9503", "type": "P", "difficulty": 1, "samples": [["5\nBBRWB", "5"], ["10\nBBBBBBBBBB", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化"], "title": "『MGOI』Simple Round I | B. 魔法照相馆", "background": "> 照片留下了值得留恋的瞬间，但对于魔法士来说最重要的是向前看。——殿堂魔法士 W", "description": "小 M 正在准备入学所必需的魔法士证件，因此他来到了纵深巷的魔法照相馆。\n\n在等待的时候，小 M 注意到魔法照相馆有三个幕布，颜色从左到右分别是红色、蓝色和白色。店主 zx 先生会根据客人的需求拉上或拉下这三个幕布，如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vpo182he.png)\n\n幕布摆放在左边，按照红蓝白的顺序排列。人则坐在幕布右边，而 zx 先生则站在最右边给人拍照。幕布从右往左数，第一个没有拉上的幕布颜色将成为照片的背景颜色。\n\n每次 zx 先生拉上或拉下一个幕布都需要消耗一个时间单位，而拍照不消耗时间。小 M 已经知道了他前面所有总共 $n$ 个客人的需求。在初始状态为 **全部拉下** 的情况下，请你帮助小 M 计算他至少需要等待多少个时间单位。", "inputFormat": "第一行一个整数 $n$。\n\n第二行一个由 `RBW` 三个大写字母组成的长度为 $n$ 的字符串，其中第 $i$ 个字符表示第 $i$ 个客人的需求，`R` 是红色，`B` 是蓝色，`W` 是白色。\n", "outputFormat": "一行一个整数，表示小 M 至少需要等待的时间单位。", "hint": "**【样例 1 解释】**\n\n开始三个幕布是全部拉下的。\n\n- 第一位客人要求蓝色，所以拉上白色，消耗一个时间单位。\n- 第二位客人要求蓝色，无需改动。\n- 第三位客人要求红色，所以在之前基础上拉上蓝色，消耗一个时间单位。\n- 第四位客人要求白色，所以拉下白色，消耗一个时间单位。\n- 第五位客人要求蓝色，所以拉上白色，拉下蓝色，消耗两个时间单位。\n\n共计消耗五个时间单位。\n\n**【数据范围】**\n\n本题共有五个测试点。\n\n| 测试点编号 | $n =$ | 特殊性质 |\n| :------------: | :----------: | :----------: |\n| $1$ | $1$ | 无 |\n| $2$ | $1000$| 有 |\n| $3$ | $1000$ | 无 |\n| $4$ | $10^5$ | 有 |\n| $5$ | $10^5$ | 无 |\n\n特殊性质：只出现 `W` 和 `B` 两种颜色。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MGOI』Simple Round I | B. 魔法照相馆", "background": "> 照片留下了值得留恋的瞬间，但对于魔法士来说最重要的是向前看。——殿堂魔法士 W", "description": "小 M 正在准备入学所必需的魔法士证件，因此他来到了纵深巷的魔法照相馆。\n\n在等待的时候，小 M 注意到魔法照相馆有三个幕布，颜色从左到右分别是红色、蓝色和白色。店主 zx 先生会根据客人的需求拉上或拉下这三个幕布，如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vpo182he.png)\n\n幕布摆放在左边，按照红蓝白的顺序排列。人则坐在幕布右边，而 zx 先生则站在最右边给人拍照。幕布从右往左数，第一个没有拉上的幕布颜色将成为照片的背景颜色。\n\n每次 zx 先生拉上或拉下一个幕布都需要消耗一个时间单位，而拍照不消耗时间。小 M 已经知道了他前面所有总共 $n$ 个客人的需求。在初始状态为 **全部拉下** 的情况下，请你帮助小 M 计算他至少需要等待多少个时间单位。", "inputFormat": "第一行一个整数 $n$。\n\n第二行一个由 `RBW` 三个大写字母组成的长度为 $n$ 的字符串，其中第 $i$ 个字符表示第 $i$ 个客人的需求，`R` 是红色，`B` 是蓝色，`W` 是白色。\n", "outputFormat": "一行一个整数，表示小 M 至少需要等待的时间单位。", "hint": "**【样例 1 解释】**\n\n开始三个幕布是全部拉下的。\n\n- 第一位客人要求蓝色，所以拉上白色，消耗一个时间单位。\n- 第二位客人要求蓝色，无需改动。\n- 第三位客人要求红色，所以在之前基础上拉上蓝色，消耗一个时间单位。\n- 第四位客人要求白色，所以拉下白色，消耗一个时间单位。\n- 第五位客人要求蓝色，所以拉上白色，拉下蓝色，消耗两个时间单位。\n\n共计消耗五个时间单位。\n\n**【数据范围】**\n\n本题共有五个测试点。\n\n| 测试点编号 | $n =$ | 特殊性质 |\n| :------------: | :----------: | :----------: |\n| $1$ | $1$ | 无 |\n| $2$ | $1000$| 有 |\n| $3$ | $1000$ | 无 |\n| $4$ | $10^5$ | 有 |\n| $5$ | $10^5$ | 无 |\n\n特殊性质：只出现 `W` 和 `B` 两种颜色。", "locale": "zh-CN"}}}
{"pid": "P9504", "type": "P", "difficulty": 3, "samples": [["3 3 1 3\n1 2 2\n1 3 5\n3 2 3", "4"], ["5 10 1 5\n2 1 3\n3 1 7\n4 2 4\n5 3 9\n5 1 7\n2 3 2\n5 4 6\n1 4 10\n5 2 5\n3 4 10", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "洛谷原创", "O2优化", "记忆化搜索"], "title": "『MGOI』Simple Round I | C. 魔法禁林", "background": "> 战斗的意义是为了生存，在这个竞争激烈的世界里，只有不断变强才能得以生存。——殿堂魔法士 S", "description": "开学的第一天，小 M 迫不及待地计划着前往神秘的禁林。\n\n小 M 拥有两个重要的属性，魔力值和生命值。非常特别的是，初始时，这两个值可以由小 M **任意决定**。\n\n禁林可以看作一张 $n$ 个点 $m$ 条边的无向简单连通图。小 M 将在禁林里面行走，从起点 $s$ 走到 $t$。\n\n每经过一条边，小 M 的**魔力值**都会减去 1。同时，每条边上有一个具有攻击力属性的魔兽，小 M 要与之战斗。若小 M 经过这条边之前的魔力值为 $k$，这条边上魔兽的攻击力为 $w$，那么经过这条边时发生的战斗将会消耗 $\\left\\lfloor \\dfrac{w}{k} \\right\\rfloor$ 的**生命值**。魔兽不会被打败，因此**多次经过同一条边，每次都会发生战斗**。\n\n**小 M 需要保证，当他的魔力值消耗完时，他的生命值为 0，且此时走到 $t$ 点。**\n\n你需要求出小 M 初始时需要的最小生命值。", "inputFormat": "第一行四个整数 $n,m,s,t$。\n\n接下来 $m$ 行，每行三个整数 $u,v,w$，表示编号为 $u\n,v$ 的点之间有一条边，边上魔兽的攻击力为 $w$。", "outputFormat": "一行一个整数，表示小 M 初始时需要的最小生命值。", "hint": "**【样例 1 解释】**\n\n初始时，小 M 选择魔力值为 $2$，生命值为 $4$。\n\n- $1\\rightarrow2$：魔力值剩余 $1$，生命值剩余 $4 - \\left\\lfloor \\frac{2}{2} \\right\\rfloor=3$。\n- $2\\rightarrow3$：魔力值剩余 $0$，生命值剩余 $3 - \\left\\lfloor \\frac{3}{1} \\right\\rfloor=0$。\n\n可以证明 $4$ 为小 M 初始时需要的最小生命值。\n\n**【数据范围】** \n\n**本题采用 Subtask 捆绑测试。**\n\n对于所有数据，$1 \\le n \\le 20000$，$1 \\le m \\le 40000$，$1\\le s,t,u,v\\le n$，$s\\ne t$，图为无向简单连通图，$0\\le w\\le 100$。\n\n| Subtask | $n$ | $m$ | $w\\le$ | 分值 |\n| :------------: | :----------: | :----------: | :-----------: | :----------------:|\n| $1$ | $5$ | $10$ | $10$ | $11$ |\n| $2$ | $2000$ | $4000$ | $10$ | $27$ |\n| $3$ | $20000$ | $40000$ | $1$ | $19$ |\n| $4$ | $20000$ | $40000$ | $100$ | $43$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MGOI』Simple Round I | C. 魔法禁林", "background": "> 战斗的意义是为了生存，在这个竞争激烈的世界里，只有不断变强才能得以生存。——殿堂魔法士 S", "description": "开学的第一天，小 M 迫不及待地计划着前往神秘的禁林。\n\n小 M 拥有两个重要的属性，魔力值和生命值。非常特别的是，初始时，这两个值可以由小 M **任意决定**。\n\n禁林可以看作一张 $n$ 个点 $m$ 条边的无向简单连通图。小 M 将在禁林里面行走，从起点 $s$ 走到 $t$。\n\n每经过一条边，小 M 的**魔力值**都会减去 1。同时，每条边上有一个具有攻击力属性的魔兽，小 M 要与之战斗。若小 M 经过这条边之前的魔力值为 $k$，这条边上魔兽的攻击力为 $w$，那么经过这条边时发生的战斗将会消耗 $\\left\\lfloor \\dfrac{w}{k} \\right\\rfloor$ 的**生命值**。魔兽不会被打败，因此**多次经过同一条边，每次都会发生战斗**。\n\n**小 M 需要保证，当他的魔力值消耗完时，他的生命值为 0，且此时走到 $t$ 点。**\n\n你需要求出小 M 初始时需要的最小生命值。", "inputFormat": "第一行四个整数 $n,m,s,t$。\n\n接下来 $m$ 行，每行三个整数 $u,v,w$，表示编号为 $u\n,v$ 的点之间有一条边，边上魔兽的攻击力为 $w$。", "outputFormat": "一行一个整数，表示小 M 初始时需要的最小生命值。", "hint": "**【样例 1 解释】**\n\n初始时，小 M 选择魔力值为 $2$，生命值为 $4$。\n\n- $1\\rightarrow2$：魔力值剩余 $1$，生命值剩余 $4 - \\left\\lfloor \\frac{2}{2} \\right\\rfloor=3$。\n- $2\\rightarrow3$：魔力值剩余 $0$，生命值剩余 $3 - \\left\\lfloor \\frac{3}{1} \\right\\rfloor=0$。\n\n可以证明 $4$ 为小 M 初始时需要的最小生命值。\n\n**【数据范围】** \n\n**本题采用 Subtask 捆绑测试。**\n\n对于所有数据，$1 \\le n \\le 20000$，$1 \\le m \\le 40000$，$1\\le s,t,u,v\\le n$，$s\\ne t$，图为无向简单连通图，$0\\le w\\le 100$。\n\n| Subtask | $n$ | $m$ | $w\\le$ | 分值 |\n| :------------: | :----------: | :----------: | :-----------: | :----------------:|\n| $1$ | $5$ | $10$ | $10$ | $11$ |\n| $2$ | $2000$ | $4000$ | $10$ | $27$ |\n| $3$ | $20000$ | $40000$ | $1$ | $19$ |\n| $4$ | $20000$ | $40000$ | $100$ | $43$ |", "locale": "zh-CN"}}}
{"pid": "P9505", "type": "P", "difficulty": 4, "samples": [["5 2\n3 0 1 4 2", "7"], ["10 3\n2 0 1 5 8 3 4 9 6 7", "53"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化"], "title": "『MGOI』Simple Round I | D. 魔法环", "background": "> 最好的武器不一定最适合，最适合的武器才最好。——\n殿堂魔法士 W", "description": "小 M 面临着激发自己魂器——魔法环的任务。\n\n魔法环上有 $n$ 个节点，每个节点上都有一个魔法精灵，每个魔法精灵都有一个固定的**魔供值**，这些魔供值形成一个 $0 \\sim n-1$ 的排列。\n\n小 M 可以选择激活或不激活一个魔法精灵，但为了激发魔法环，必须**至少**激活 $k(\\ge 2)$ 个魔法精灵。\n\n每个魔法精灵无论是否激活都会产生**附魔值**：\n\n- 对于一个被激活的魔法精灵，它产生的附魔值为它的魔供值的**平方**。\n- 对于一个未被激活的魔法精灵，它会在环上朝左右看，分别看向两边最近的被激活的魔法精灵。它会选择其中魔供值较大的一个作为「目标精灵」，产生的附魔值为这个「目标精灵」的魔供值与**看向这个「目标精灵」时视线经过的距离**的**乘积**。\n\n作为新手，小 M 希望在激活魔法环的前提下，使得所有魔法精灵的附魔值之和最小，从而更好地控制魔法环的能量。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数，表示每个节点上魔法精灵的魔供值。", "outputFormat": "一行一个整数，表示最小附魔值之和。", "hint": "**【样例 1 解释】**\n\n激活魔供值为 $0$ 和 $1$ 的魔法精灵。\n\n- 魔供值为 $3$ 的魔法精灵，选择魔供值为 $1$ 的魔法精灵，产生的附魔值为 $1 \\times 3 = 3$。\n- 魔供值为 $0$ 的魔法精灵被激活，产生的附魔值为 $0^2=0$。\n- 魔供值为 $1$ 的魔法精灵被激活，产生的附魔值为 $1^2=1$。\n- 魔供值为 $4$ 的魔法精灵，选择魔供值为 $1$ 的魔法精灵，产生的附魔值为 $1 \\times 1 = 1$。\n- 魔供值为 $2$ 的魔法精灵，选择魔供值为 $1$ 的魔法精灵，产生的附魔值为 $1 \\times 2 = 2$。\n\n总共产生的附魔值为 $7$。\n  \n**【数据范围】** \n\n**本题采用 Subtask 捆绑测试。**\n\n对于所有数据，$2\\le k \\le n \\le 3000$，$k \\le 100$，每个节点上魔法精灵的魔供值形成一个 $0\\sim n-1$ 的排列。 \n\n| Subtask | $n$ | $k\\le$ | 分值 |  \n| :------------: | :----------: | :----------:|:----------------:|\n| $1$ | $10$ | $10$ | $13$ |\n| $2$ | $100$ | $100$ | $17$ | \n| $3$ | $300$ | $100$ | $21$ | \n| $4$ | $1000$ | $100$ | $23$ | \n| $5$ | $3000$ | $100$ | $26$ | ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MGOI』Simple Round I | D. 魔法环", "background": "> 最好的武器不一定最适合，最适合的武器才最好。——\n殿堂魔法士 W", "description": "小 M 面临着激发自己魂器——魔法环的任务。\n\n魔法环上有 $n$ 个节点，每个节点上都有一个魔法精灵，每个魔法精灵都有一个固定的**魔供值**，这些魔供值形成一个 $0 \\sim n-1$ 的排列。\n\n小 M 可以选择激活或不激活一个魔法精灵，但为了激发魔法环，必须**至少**激活 $k(\\ge 2)$ 个魔法精灵。\n\n每个魔法精灵无论是否激活都会产生**附魔值**：\n\n- 对于一个被激活的魔法精灵，它产生的附魔值为它的魔供值的**平方**。\n- 对于一个未被激活的魔法精灵，它会在环上朝左右看，分别看向两边最近的被激活的魔法精灵。它会选择其中魔供值较大的一个作为「目标精灵」，产生的附魔值为这个「目标精灵」的魔供值与**看向这个「目标精灵」时视线经过的距离**的**乘积**。\n\n作为新手，小 M 希望在激活魔法环的前提下，使得所有魔法精灵的附魔值之和最小，从而更好地控制魔法环的能量。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数，表示每个节点上魔法精灵的魔供值。", "outputFormat": "一行一个整数，表示最小附魔值之和。", "hint": "**【样例 1 解释】**\n\n激活魔供值为 $0$ 和 $1$ 的魔法精灵。\n\n- 魔供值为 $3$ 的魔法精灵，选择魔供值为 $1$ 的魔法精灵，产生的附魔值为 $1 \\times 3 = 3$。\n- 魔供值为 $0$ 的魔法精灵被激活，产生的附魔值为 $0^2=0$。\n- 魔供值为 $1$ 的魔法精灵被激活，产生的附魔值为 $1^2=1$。\n- 魔供值为 $4$ 的魔法精灵，选择魔供值为 $1$ 的魔法精灵，产生的附魔值为 $1 \\times 1 = 1$。\n- 魔供值为 $2$ 的魔法精灵，选择魔供值为 $1$ 的魔法精灵，产生的附魔值为 $1 \\times 2 = 2$。\n\n总共产生的附魔值为 $7$。\n  \n**【数据范围】** \n\n**本题采用 Subtask 捆绑测试。**\n\n对于所有数据，$2\\le k \\le n \\le 3000$，$k \\le 100$，每个节点上魔法精灵的魔供值形成一个 $0\\sim n-1$ 的排列。 \n\n| Subtask | $n$ | $k\\le$ | 分值 |  \n| :------------: | :----------: | :----------:|:----------------:|\n| $1$ | $10$ | $10$ | $13$ |\n| $2$ | $100$ | $100$ | $17$ | \n| $3$ | $300$ | $100$ | $21$ | \n| $4$ | $1000$ | $100$ | $23$ | \n| $5$ | $3000$ | $100$ | $26$ | ", "locale": "zh-CN"}}}
{"pid": "P9506", "type": "P", "difficulty": 4, "samples": [], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["动态规划 DP", "2018", "交互题", "O2优化", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2018] Homecoming", "background": "翻译自 BalkanOI 2018 Day1 T2「Homecoming」；由于洛谷远慢于 loj，因此将时间限制从 300ms 调整至 500ms。", "description": "有 $N$ 门课程，分别编号为 $0$ 到 $N-1$。如果你 pass 了课程 $i$，你可以拿到 $A _ i$ 美刀。  \n有 $N$ 本教材，分别编号为 $0$ 到 $N-1$。$i$ 号教材的价格为 $B _ i$ 美刀。  \n如果你要 pass 课程 $i$，你需要购买编号为 $i, (i+1) \\bmod N, (i+2) \\bmod N, \\cdots, (i+K-1) \\bmod N$ 的课本。$K$ 为给定的常数。  \n你的目的是赚钱而非 pass 所有课程。请求出你最多能赚多少美刀。\n\n## 交互过程\n\n本题只支持 C++ 语言使用函数交互测评。**选手代码不需要也不能包含 `homecoming.h`，也不需要实现 `main` 函数。**\n\n选手程序需要实现如下函数：\n\n```\nlong long int solve(int N, int K, int *A, int *B);\n```\n\n在一次运行中这个函数可能会被调用多次。\n\n\n## 样例\n\n调用\n\n```\nsolve(3, 2,\n[40, 80, 100],\n[140, 0, 20])\n```\n\n的返回值为 $60$。\n\n", "inputFormat": "见「交互过程」。", "outputFormat": "见「交互过程」。", "hint": "### 数据范围及限制\n\n令所有对 `solve` 函数的调用中 $N$ 的总和为 $S_N$，$NK$ 的总和为 $S_{NK}$。那么：\n\n- $1\\le K\\le N\\le 2\\times 10^6$\n- $1\\le S_N\\le 2\\times 10^6$\n- $0\\le A_i,B_i\\le 10^9$\n\n详细子任务及附加限制如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1\\le S_N\\le 500$ | $13$ |\n| $2$ | $1\\le S_N\\le 5000$ | $18$ |\n| $3$ | $1\\le S_{NK}\\le 2\\times 10^6$ | $31$ |\n| $4$ | 无附加限制 | $38$ |\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2018] Homecoming", "background": "翻译自 BalkanOI 2018 Day1 T2「Homecoming」；由于洛谷远慢于 loj，因此将时间限制从 300ms 调整至 500ms。", "description": "有 $N$ 门课程，分别编号为 $0$ 到 $N-1$。如果你 pass 了课程 $i$，你可以拿到 $A _ i$ 美刀。  \n有 $N$ 本教材，分别编号为 $0$ 到 $N-1$。$i$ 号教材的价格为 $B _ i$ 美刀。  \n如果你要 pass 课程 $i$，你需要购买编号为 $i, (i+1) \\bmod N, (i+2) \\bmod N, \\cdots, (i+K-1) \\bmod N$ 的课本。$K$ 为给定的常数。  \n你的目的是赚钱而非 pass 所有课程。请求出你最多能赚多少美刀。\n\n## 交互过程\n\n本题只支持 C++ 语言使用函数交互测评。**选手代码不需要也不能包含 `homecoming.h`，也不需要实现 `main` 函数。**\n\n选手程序需要实现如下函数：\n\n```\nlong long int solve(int N, int K, int *A, int *B);\n```\n\n在一次运行中这个函数可能会被调用多次。\n\n\n## 样例\n\n调用\n\n```\nsolve(3, 2,\n[40, 80, 100],\n[140, 0, 20])\n```\n\n的返回值为 $60$。\n\n", "inputFormat": "见「交互过程」。", "outputFormat": "见「交互过程」。", "hint": "### 数据范围及限制\n\n令所有对 `solve` 函数的调用中 $N$ 的总和为 $S_N$，$NK$ 的总和为 $S_{NK}$。那么：\n\n- $1\\le K\\le N\\le 2\\times 10^6$\n- $1\\le S_N\\le 2\\times 10^6$\n- $0\\le A_i,B_i\\le 10^9$\n\n详细子任务及附加限制如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1\\le S_N\\le 500$ | $13$ |\n| $2$ | $1\\le S_N\\le 5000$ | $18$ |\n| $3$ | $1\\le S_{NK}\\le 2\\times 10^6$ | $31$ |\n| $4$ | 无附加限制 | $38$ |\n\n\n", "locale": "zh-CN"}}}
{"pid": "P9507", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2018", "交互题", "Special Judge", "栈", "构造", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2018] Popa", "background": "翻译自 BalkanOI 2018 Day2 T2「Popa」\n\n> *\"He's an outlaw and he's famous*  \n> *Andrii Popa the courageous.*  \n> *Day and night he rides,*  \n> *He takes his tribute from the main road*  \n> *And everywhere in the country*  \n> *The thief catchers are running away as fast as they can\"*\n> \n> *\\- [\"Andrii Popa\", Phoenix](https://music.163.com/song?id=508736536)*", "description": "Ghiță 有一个下标从 $0$ 开始的正整数序列 $S$。因为他是喀尔巴阡的国王，所以他想要构造一个节点编号为 $0,1,\\ldots ,N-1$ 的二叉树，满足：\n\n- 树的中序遍历按节点编号升序排列。二叉树的中序遍历由以根的左子节点（如果存在）为根形成的子树的中序遍历，根的节点编号和以根的右子节点（如果存在）为根形成的子树的中序遍历顺次连接组成。  \n- 如果 $x$ 是 $y$ 节点的父亲，那么 $S_x$ 整除 $S_y$。\n\n二叉树是一种树形结构，每个节点最多有两个子节点，分别称为左子节点和右子节点。\n\n不幸的是，著名的亡命之徒 Andrii Popa 偷走了序列 $S$，Ghiță 不能直接获取到。但对于任意两个连续的子序列 $[a,b]$ 和 $[c,d]$，他可以使用最先进的技术（他的手机）求出 $\\gcd[a,b]$ 是否等于 $\\gcd [c,d]$，其中 $\\gcd[x,y]$ 指 $S_x,S_{x+1},S_{x+2},\\ldots ,S_y$ 的最大公因数。不幸的是，这项技术十分昂贵——如果 Ghiță 使用超过 $Q$ 次，他将会支付一大笔罚金。请帮他在使用这项技术最多 $Q$ 次的情况下构建出他想要的树。保证这是可能的。任何合法的构建方案都可以被接受。\n\n### 交互\n\n本题只支持 C++ 语言使用函数交互。选手代码并不需要也不能包含 `popa.h`。\n\n选手需实现如下函数：\n\n```cpp\nint solve(int N, int* Left, int* Right);\n```\n\n函数需返回树的根节点，并且将 `Left[i]` 和 `Right[i]` 分别赋值为 $i$ 的左子节点和右子节点。如果节点 $i$ 没有左子节点，则 `Left[i]` 应被赋为 $-1$，如果节点 $i$ 没有右子节点，则 `Right[i]` 应被赋为 $-1$。`Left` 和 `Right` 分别指向两个空间已被分配好且长度恰好为 $N$ 的数组。\n\n函数 `solve` 在一次运行中会被调用最多 $5$ 次。我们建议谨慎使用全局变量。\n\n选手可以调用如下函数（注意，选手须在代码中声明此函数）：\n\n```cpp\nint query(int a, int b, int c, int d);\n```\n\n这个函数当且仅当 $\\gcd[a,b]=\\gcd[c,d]$ 时返回 $1$，其中 $0\\le a\\le b<n,0\\le c\\le d<N$，否则返回 $0$。\n\n\n### 样例\n\n例如 $S=[12, 4, 16, 2, 2, 20]$，一组交互过程如下：\n\n| 调用 `solve` | 调用 `query` | 调用 `solve` 之后 |\n| :-----------: | :-----------: | :-----------: |\n| `solve(6, Left, Right)` |  |  |\n|  | `query(0, 1, 3, 5)` 返回 $0$ |  |\n|  | `query(4, 5, 1, 3)` 返回 $1$ |  |\n|  |  | `solve` 返回值为 $3$；`Left` 指向 $[-1, 0, -1, 1, -1, -1]$；`Right` 指向 $[-1, 2, -1, 4, 5, -1]$ |\n\n样例中，Ghiță 国王想要的树形态如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y5whph6a.png)\n", "inputFormat": "见「交互」。\n\n", "outputFormat": "见「交互」。\n\n", "hint": "### 数据范围\n\n| 子任务编号 | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $N=100,Q=10^4$ | $37$ |\n| $2$ | $N=10^3,Q=2\\times 10^4$ | $24$ |\n| $3$ | $N=10^3,Q=2\\times 10^3$ | $39$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2018] Popa", "background": "翻译自 BalkanOI 2018 Day2 T2「Popa」\n\n> *\"He's an outlaw and he's famous*  \n> *Andrii Popa the courageous.*  \n> *Day and night he rides,*  \n> *He takes his tribute from the main road*  \n> *And everywhere in the country*  \n> *The thief catchers are running away as fast as they can\"*\n> \n> *\\- [\"Andrii Popa\", Phoenix](https://music.163.com/song?id=508736536)*", "description": "Ghiță 有一个下标从 $0$ 开始的正整数序列 $S$。因为他是喀尔巴阡的国王，所以他想要构造一个节点编号为 $0,1,\\ldots ,N-1$ 的二叉树，满足：\n\n- 树的中序遍历按节点编号升序排列。二叉树的中序遍历由以根的左子节点（如果存在）为根形成的子树的中序遍历，根的节点编号和以根的右子节点（如果存在）为根形成的子树的中序遍历顺次连接组成。  \n- 如果 $x$ 是 $y$ 节点的父亲，那么 $S_x$ 整除 $S_y$。\n\n二叉树是一种树形结构，每个节点最多有两个子节点，分别称为左子节点和右子节点。\n\n不幸的是，著名的亡命之徒 Andrii Popa 偷走了序列 $S$，Ghiță 不能直接获取到。但对于任意两个连续的子序列 $[a,b]$ 和 $[c,d]$，他可以使用最先进的技术（他的手机）求出 $\\gcd[a,b]$ 是否等于 $\\gcd [c,d]$，其中 $\\gcd[x,y]$ 指 $S_x,S_{x+1},S_{x+2},\\ldots ,S_y$ 的最大公因数。不幸的是，这项技术十分昂贵——如果 Ghiță 使用超过 $Q$ 次，他将会支付一大笔罚金。请帮他在使用这项技术最多 $Q$ 次的情况下构建出他想要的树。保证这是可能的。任何合法的构建方案都可以被接受。\n\n### 交互\n\n本题只支持 C++ 语言使用函数交互。选手代码并不需要也不能包含 `popa.h`。\n\n选手需实现如下函数：\n\n```cpp\nint solve(int N, int* Left, int* Right);\n```\n\n函数需返回树的根节点，并且将 `Left[i]` 和 `Right[i]` 分别赋值为 $i$ 的左子节点和右子节点。如果节点 $i$ 没有左子节点，则 `Left[i]` 应被赋为 $-1$，如果节点 $i$ 没有右子节点，则 `Right[i]` 应被赋为 $-1$。`Left` 和 `Right` 分别指向两个空间已被分配好且长度恰好为 $N$ 的数组。\n\n函数 `solve` 在一次运行中会被调用最多 $5$ 次。我们建议谨慎使用全局变量。\n\n选手可以调用如下函数（注意，选手须在代码中声明此函数）：\n\n```cpp\nint query(int a, int b, int c, int d);\n```\n\n这个函数当且仅当 $\\gcd[a,b]=\\gcd[c,d]$ 时返回 $1$，其中 $0\\le a\\le b<n,0\\le c\\le d<N$，否则返回 $0$。\n\n\n### 样例\n\n例如 $S=[12, 4, 16, 2, 2, 20]$，一组交互过程如下：\n\n| 调用 `solve` | 调用 `query` | 调用 `solve` 之后 |\n| :-----------: | :-----------: | :-----------: |\n| `solve(6, Left, Right)` |  |  |\n|  | `query(0, 1, 3, 5)` 返回 $0$ |  |\n|  | `query(4, 5, 1, 3)` 返回 $1$ |  |\n|  |  | `solve` 返回值为 $3$；`Left` 指向 $[-1, 0, -1, 1, -1, -1]$；`Right` 指向 $[-1, 2, -1, 4, 5, -1]$ |\n\n样例中，Ghiță 国王想要的树形态如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y5whph6a.png)\n", "inputFormat": "见「交互」。\n\n", "outputFormat": "见「交互」。\n\n", "hint": "### 数据范围\n\n| 子任务编号 | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $N=100,Q=10^4$ | $37$ |\n| $2$ | $N=10^3,Q=2\\times 10^4$ | $24$ |\n| $3$ | $N=10^3,Q=2\\times 10^3$ | $39$ |\n", "locale": "zh-CN"}}}
{"pid": "P9508", "type": "P", "difficulty": 2, "samples": [["3", "1 1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化", "构造"], "title": "『STA - R3』存在", "background": "", "description": "构造一个长度为 $n$ 的序列，满足对于任意长度不小于 2 的子区间存在主元素。在此基础上，要求序列元素的种类数最大。其中序列的主元素定义为出现次数不小于序列长度的一半的数。\n\n你构造的数列中每个元素必须是 $0$ 到 $10^9$ 之间的整数。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行 $n$ 个整数，表示你构造出的序列。如果有多种答案，输出任意一种即可。", "hint": "**本题采用捆绑测试。**\n\n数据范围：\n- Subtask 1 (10pts)：$n\\le 5$。\n- Subtask 2 (40pts)：$n$ 是 $3$ 的倍数。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，$1\\le n\\le 10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R3』存在", "background": "", "description": "构造一个长度为 $n$ 的序列，满足对于任意长度不小于 2 的子区间存在主元素。在此基础上，要求序列元素的种类数最大。其中序列的主元素定义为出现次数不小于序列长度的一半的数。\n\n你构造的数列中每个元素必须是 $0$ 到 $10^9$ 之间的整数。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行 $n$ 个整数，表示你构造出的序列。如果有多种答案，输出任意一种即可。", "hint": "**本题采用捆绑测试。**\n\n数据范围：\n- Subtask 1 (10pts)：$n\\le 5$。\n- Subtask 2 (40pts)：$n$ 是 $3$ 的倍数。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，$1\\le n\\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P9509", "type": "P", "difficulty": 4, "samples": [["4\n5\n1 1 1 1 1\n5\n1 2 3 4 5\n5\n1 1 1 1 6\n5\n-1 0 1 0 1", "Yes\nYes\nNo\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "O2优化", "背包 DP", "动态规划优化", "随机化", "bitset"], "title": "『STA - R3』Aulvwc", "background": "统计学是一门古老而迷人的学科。\n\n传说早在若干年前，一位名为惠普的神灵来到地球，发现了人类——另一种有智慧的物种……\n\n**已加入 Hack 数据，位于 Subtask 5，不计分。**", "description": "定义一个序列 $\\{a_n\\}$ 是分部平均的，当且仅当存在一个 $\\{1,2,\\cdots,n\\}$ 的划分 $S_1,S_2,\\cdots,S_k$（其中 $k>1$），满足对于每个整数 $1\\le i\\le k$，序列 $\\{a\\}$ 中以 $S_i$ 为下标的元素之平均数都是相等的**整数**。\n\n现在，给定序列 $\\{a_n\\}$，问它是否是分部平均的。\n\n如果你对于一些定义不很清楚，可以查阅最后的「提示」部分。\n\n", "inputFormat": "第一行，一个正整数 $q$，表示询问组数。\n\n对于每组询问，第一行一个正整数 $n$，描述序列长度。第二行 $n$ 个整数，表示序列 $\\{a_n\\}$。", "outputFormat": "$q$ 行，对于每组询问，如果序列是分部平均的，则输出 `Yes`，否则输出 `No`。", "hint": "### 提示\n一个集合 $S$ 的划分定义为一组集合 $U_1,U_2,\\cdots,U_k$，满足：\n- 对于所有 $i\\neq j$，有 $U_i\\cap U_j=\\varnothing$。\n- $U_1\\cup U_2\\cup\\cdots\\cup U_k=S$。\n\n一个序列 $\\{x_n\\}$ 的平均数定义为：\n$$\\bar x=\\dfrac{x_1+x_2+\\cdots+x_n}{n}=\\dfrac 1n\\sum_{i=1}^nx_i$$\n### 样例解释\n第一组数据的一种划分方案：$\\{1\\},\\{2\\},\\{3\\},\\{4\\},\\{5\\}$。\n\n第二组数据的一种划分方案：$\\{1,5\\},\\{2,4\\},\\{3\\}$。\n\n注意：划分方案所提供的集合是下标集合。\n\n### 数据范围\n\n**本题采用捆绑测试及子任务依赖。**\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm{n}\\le & \\textbf{分值} & \\textbf{特殊性质}&\\textbf{依赖子任务}\\\\\\hline\n\\textsf{1} & 10 & 5 & \\\\\\hline\n\\textsf{2} & 10^3 & 20 & \\sum a_i=0 \\\\\\hline\n\\textsf{3} & 100 & 25 & & \\sf1\\\\\\hline\n\\textsf{4} & 10^3 & 50 & & \\sf1\\texttt{,}\\ 3\\\\\\hline\n\\end{array}\n$$\n\n对于全部数据，$1\\le q\\le 10$，$2\\le n\\le 10^3$，$|a_i|\\le 5\\times10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R3』Aulvwc", "background": "统计学是一门古老而迷人的学科。\n\n传说早在若干年前，一位名为惠普的神灵来到地球，发现了人类——另一种有智慧的物种……\n\n**已加入 Hack 数据，位于 Subtask 5，不计分。**", "description": "定义一个序列 $\\{a_n\\}$ 是分部平均的，当且仅当存在一个 $\\{1,2,\\cdots,n\\}$ 的划分 $S_1,S_2,\\cdots,S_k$（其中 $k>1$），满足对于每个整数 $1\\le i\\le k$，序列 $\\{a\\}$ 中以 $S_i$ 为下标的元素之平均数都是相等的**整数**。\n\n现在，给定序列 $\\{a_n\\}$，问它是否是分部平均的。\n\n如果你对于一些定义不很清楚，可以查阅最后的「提示」部分。\n\n", "inputFormat": "第一行，一个正整数 $q$，表示询问组数。\n\n对于每组询问，第一行一个正整数 $n$，描述序列长度。第二行 $n$ 个整数，表示序列 $\\{a_n\\}$。", "outputFormat": "$q$ 行，对于每组询问，如果序列是分部平均的，则输出 `Yes`，否则输出 `No`。", "hint": "### 提示\n一个集合 $S$ 的划分定义为一组集合 $U_1,U_2,\\cdots,U_k$，满足：\n- 对于所有 $i\\neq j$，有 $U_i\\cap U_j=\\varnothing$。\n- $U_1\\cup U_2\\cup\\cdots\\cup U_k=S$。\n\n一个序列 $\\{x_n\\}$ 的平均数定义为：\n$$\\bar x=\\dfrac{x_1+x_2+\\cdots+x_n}{n}=\\dfrac 1n\\sum_{i=1}^nx_i$$\n### 样例解释\n第一组数据的一种划分方案：$\\{1\\},\\{2\\},\\{3\\},\\{4\\},\\{5\\}$。\n\n第二组数据的一种划分方案：$\\{1,5\\},\\{2,4\\},\\{3\\}$。\n\n注意：划分方案所提供的集合是下标集合。\n\n### 数据范围\n\n**本题采用捆绑测试及子任务依赖。**\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm{n}\\le & \\textbf{分值} & \\textbf{特殊性质}&\\textbf{依赖子任务}\\\\\\hline\n\\textsf{1} & 10 & 5 & \\\\\\hline\n\\textsf{2} & 10^3 & 20 & \\sum a_i=0 \\\\\\hline\n\\textsf{3} & 100 & 25 & & \\sf1\\\\\\hline\n\\textsf{4} & 10^3 & 50 & & \\sf1\\texttt{,}\\ 3\\\\\\hline\n\\end{array}\n$$\n\n对于全部数据，$1\\le q\\le 10$，$2\\le n\\le 10^3$，$|a_i|\\le 5\\times10^3$。", "locale": "zh-CN"}}}
{"pid": "P9510", "type": "P", "difficulty": 6, "samples": [["3\n2 100\n3 100\n4 100", "4\n18\n60"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "O2优化", "矩阵加速", "Fibonacci 数列"], "title": "『STA - R3』高维立方体", "background": "", "description": "如下定义斐波那契数列：\n$$\\operatorname{fib}(n)=\\begin{cases}1&n\\le 2\\\\\\operatorname{fib}(n-1)+\\operatorname{fib}(n-2)&n>2\\end{cases}$$\n\n现在我们定义一个函数（注意在 $n<1$ 时这个函数的值是 $0$）：\n\n$$f(n)=\\sum_{i=1}^n\\operatorname{fib}^2(i)$$\n\n由于求斐波那契数列的前缀和太简单了，你需要求出：\n$$\\sum_{i=1}^n\\operatorname{fib}(i)\\cdot(f(i-2)+\\operatorname{fib}^2(i)+\\operatorname{fib}(i))$$\n的值，答案对输入的 $p$ 取模。\n\n注：$\\operatorname{fib}^2(x)$ 表示 $\\operatorname{fib}(x)$ 的平方。", "inputFormat": "**本题有多组数据**。\n\n第一行一个整数 $T$，表示数据的组数。\n\n对于每组数据，一行两个整数 $n,p$。", "outputFormat": "对于每组数据，输出一行一个整数，表示答案对 $p$ 取模后的结果。", "hint": "样例解释：\n\n对于第一组数据，$1\\times(0+1^2+1)+1\\times(0+1^2+1)=4$。\n\n对于第二组数据，$1\\times(0+1^2+1)+1\\times(0+1^2+1)+2\\times(1+2^2+2)=18$。  \n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 points）：$n \\le 10^7$，$p=10^9+7$。\n- Subtask 2（20 points）：$T\\le 10^4$，$n \\le 10^8$，$p=10^9+7$。\n- Subtask 3（5 points）：$p=2$。\n- Subtask 4（15 points）：$p\\le 5$。\n- Subtask 5（30 points）：$T\\le 10^4$，$n \\le 10^8$。\n- Subtask 6（25 points）：无特殊限制。\n\n对于所有数据，$1\\le T\\le 2\\times 10^5$，$1\\le n\\le 10^{18}$，$2\\le p\\le 10^9+7$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R3』高维立方体", "background": "", "description": "如下定义斐波那契数列：\n$$\\operatorname{fib}(n)=\\begin{cases}1&n\\le 2\\\\\\operatorname{fib}(n-1)+\\operatorname{fib}(n-2)&n>2\\end{cases}$$\n\n现在我们定义一个函数（注意在 $n<1$ 时这个函数的值是 $0$）：\n\n$$f(n)=\\sum_{i=1}^n\\operatorname{fib}^2(i)$$\n\n由于求斐波那契数列的前缀和太简单了，你需要求出：\n$$\\sum_{i=1}^n\\operatorname{fib}(i)\\cdot(f(i-2)+\\operatorname{fib}^2(i)+\\operatorname{fib}(i))$$\n的值，答案对输入的 $p$ 取模。\n\n注：$\\operatorname{fib}^2(x)$ 表示 $\\operatorname{fib}(x)$ 的平方。", "inputFormat": "**本题有多组数据**。\n\n第一行一个整数 $T$，表示数据的组数。\n\n对于每组数据，一行两个整数 $n,p$。", "outputFormat": "对于每组数据，输出一行一个整数，表示答案对 $p$ 取模后的结果。", "hint": "样例解释：\n\n对于第一组数据，$1\\times(0+1^2+1)+1\\times(0+1^2+1)=4$。\n\n对于第二组数据，$1\\times(0+1^2+1)+1\\times(0+1^2+1)+2\\times(1+2^2+2)=18$。  \n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 points）：$n \\le 10^7$，$p=10^9+7$。\n- Subtask 2（20 points）：$T\\le 10^4$，$n \\le 10^8$，$p=10^9+7$。\n- Subtask 3（5 points）：$p=2$。\n- Subtask 4（15 points）：$p\\le 5$。\n- Subtask 5（30 points）：$T\\le 10^4$，$n \\le 10^8$。\n- Subtask 6（25 points）：无特殊限制。\n\n对于所有数据，$1\\le T\\le 2\\times 10^5$，$1\\le n\\le 10^{18}$，$2\\le p\\le 10^9+7$。\n", "locale": "zh-CN"}}}
{"pid": "P9511", "type": "P", "difficulty": 6, "samples": [["2 3 1\n1 2", "23068672"], ["3 5 2\n2 1 2", "23068666"], ["5 1000000000 1\n1 5 10 3 2", "68769\n"], ["5 1000000000 3\n1 5 10 3 2", "5430204"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "O2优化", "杜教筛"], "title": "『STA - R3』大豆", "background": "大豆 (Soy / Soybean) 非常有前途。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/60aceba1.png)", "description": "对于一个序列 $\\{a\\}$，定义其大豆化 (Soybeanization) 序列 $\\{b\\}$ 由如下操作得到：\n1. 初始 $\\{b\\}$ 和 $\\{a\\}$ 相等。\n2. $n$ 从小到大遍历整个正整数集，对于每个 $n$，进行操作：\n   - $i$ 从小到大遍历整个不小于 2 的正整数集，对于每个 $i$，操作 $b_n\\gets b_n-b_{\\lfloor\\frac ni\\rfloor}$。\n   - 如果 $i>n$，结束过程。\n\n进而，定义一个序列的 $k$-大豆化序列为进行 $k$ 次大豆化操作后得到的序列。\n\n现在给你一个整数序列 $\\{t_n\\}$，将 $\\{t\\}$ 复制无穷遍得到序列 $\\{a\\}$，求 $\\{a\\}$ 的 $k$-大豆化序列的第 $m$ 项。\n\n序列下标从 1 开始。答案可能很大，对 $23068673$（一个质数）取模。", "inputFormat": "第一行，三个正整数 $n,m,k$。\n\n第二行，$n$ 个正整数，描述序列 $\\{t\\}$。", "outputFormat": "一行，表示答案，对 $23068673$ 取模。", "hint": "### 样例解释\n**样例 1 解释**\n\n按如下流程构造序列 $\\{b\\}$：\n- $b_1=a_1=1$。\n- $b_2=a_2-b_{\\lfloor\\frac 22\\rfloor}=a_2-b_1=1$。 \n- $b_3=a_3-b_{\\lfloor\\frac 32\\rfloor}-b_{\\lfloor\\frac 33\\rfloor}=a_3-b_1-b_1=-1$。\n\n从而，答案为 $b_3=-1\\equiv 23068672\\pmod{23068673}$。\n\n**样例 2 解释**\n\n第一次大豆化后的序列前 5 项：$2,\\,-1,\\,-2,\\,-1,\\ -4$。\n\n第二次大豆化后的序列前 5 项：$2,\\,-3,\\,-6,\\,-2,\\,-7$。\n\n所以答案为 $-7\\equiv 23068666\\pmod{23068673}$。\n### 数据范围\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm{m}\\le & \\textbf{分值} & \\textbf{特殊性质} \\\\\\hline\n\\textsf{1} & 10^6 & 10 & \\\\\\hline\n\\textsf{2} & 10^9 & 20 & \\\\\\hline\n\\textsf{3} & 10^{10} & 20 & k=1  \\\\\\hline\n\\textsf{4} & 10^{10} & 50 & \\\\\\hline\\hline\n\\end{array}\n$$\n对于全部数据，$1\\le n\\le 10^4$，$1\\le m\\le 10^{10}$，$k\\in\\{1,2,3\\}$，$0\\le a_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R3』大豆", "background": "大豆 (Soy / Soybean) 非常有前途。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/60aceba1.png)", "description": "对于一个序列 $\\{a\\}$，定义其大豆化 (Soybeanization) 序列 $\\{b\\}$ 由如下操作得到：\n1. 初始 $\\{b\\}$ 和 $\\{a\\}$ 相等。\n2. $n$ 从小到大遍历整个正整数集，对于每个 $n$，进行操作：\n   - $i$ 从小到大遍历整个不小于 2 的正整数集，对于每个 $i$，操作 $b_n\\gets b_n-b_{\\lfloor\\frac ni\\rfloor}$。\n   - 如果 $i>n$，结束过程。\n\n进而，定义一个序列的 $k$-大豆化序列为进行 $k$ 次大豆化操作后得到的序列。\n\n现在给你一个整数序列 $\\{t_n\\}$，将 $\\{t\\}$ 复制无穷遍得到序列 $\\{a\\}$，求 $\\{a\\}$ 的 $k$-大豆化序列的第 $m$ 项。\n\n序列下标从 1 开始。答案可能很大，对 $23068673$（一个质数）取模。", "inputFormat": "第一行，三个正整数 $n,m,k$。\n\n第二行，$n$ 个正整数，描述序列 $\\{t\\}$。", "outputFormat": "一行，表示答案，对 $23068673$ 取模。", "hint": "### 样例解释\n**样例 1 解释**\n\n按如下流程构造序列 $\\{b\\}$：\n- $b_1=a_1=1$。\n- $b_2=a_2-b_{\\lfloor\\frac 22\\rfloor}=a_2-b_1=1$。 \n- $b_3=a_3-b_{\\lfloor\\frac 32\\rfloor}-b_{\\lfloor\\frac 33\\rfloor}=a_3-b_1-b_1=-1$。\n\n从而，答案为 $b_3=-1\\equiv 23068672\\pmod{23068673}$。\n\n**样例 2 解释**\n\n第一次大豆化后的序列前 5 项：$2,\\,-1,\\,-2,\\,-1,\\ -4$。\n\n第二次大豆化后的序列前 5 项：$2,\\,-3,\\,-6,\\,-2,\\,-7$。\n\n所以答案为 $-7\\equiv 23068666\\pmod{23068673}$。\n### 数据范围\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm{m}\\le & \\textbf{分值} & \\textbf{特殊性质} \\\\\\hline\n\\textsf{1} & 10^6 & 10 & \\\\\\hline\n\\textsf{2} & 10^9 & 20 & \\\\\\hline\n\\textsf{3} & 10^{10} & 20 & k=1  \\\\\\hline\n\\textsf{4} & 10^{10} & 50 & \\\\\\hline\\hline\n\\end{array}\n$$\n对于全部数据，$1\\le n\\le 10^4$，$1\\le m\\le 10^{10}$，$k\\in\\{1,2,3\\}$，$0\\le a_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9512", "type": "P", "difficulty": 7, "samples": [["3\n110", "Accepted: 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "交互题", "Special Judge", "O2优化", "JOI（日本）"], "title": "[JOI Open 2023] 古代机器 2 / Ancient Machine 2", "background": "**译自 [JOI Open 2023](https://contests.ioi-jp.org/open-2023/index.html) T1 「[古代の機械 2](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2023/ancient2/2023-open-ancient2-statement.pdf) / [Ancient Machine 2](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2023/ancient2/2023-open-ancient2-statement-en.pdf)」**\n\n**这是一道交互题。**\n\n**在提交本题前请务必仔细阅读以下内容。**\n\n本题只支持 C++ 语言提交（建议使用 C++14，请不要使用 C++14 (GCC9)）。\n\n由于洛谷特殊的交互机制，在提交本题时，请去掉代码中的 ```#include \"ancient2.h\"``` 语句，并将添加以下语句粘贴到代码最开头：\n\n```cpp\nint Query(int m, std::vector<int> a, std::vector<int> b);\n```", "description": "Bitaro 和 Bibako 是挖掘和调查 JOI 王国废墟的考古学家。在废墟中，Bitaro 发现了一块古老的石板，Bibako 发现了一台古老的机器。\n\n从研究结果中，Bitaro 发现石板上写有一个长为 $N$ 的字符串 $S$。字符串中每个字符要么是 `0`，要么是 `1`。然而，他还不知道字符串 $S$ 中的每个字符是什么。\n\n另一方面，从研究结果中，Bibako 弄清了如何使用机器。为了使用它，我们需要将石板放在机器上，输入一个整数 $m$ 和两个整数序列 $a,b$，然后做一次查询。这里整数 $m$ 和整数序列 $a,b$ 需满足如下条件：\n\n- 整数 $m$ 在 $1$ 和 $1\\ 002$ 之间（包括两端）。\n- 序列 $a$ 和 $b$ 的长度均为 $m$。\n- 序列 $a,b$ 中的元素都是 $0$ 和 $m-1$ 之间的整数（包括两端）。\n\n如果我们把石板放在机器上，输入一个整数 $m$ 和两个整数序列 $a,b$，然后做一次查询，机器会按如下方式操作并显示一个整数。\n\n1. 机器对其**内存区域**置 $0$。\n\n2. 机器进行如下的 $N$ 次操作。第 $i+1$ 次（$0\\le i\\le N-1$）操作按如下方式进行。\n\n   令 $x$ 表示机器内存区域中当前的整数。机器读取字符 $S_i$。这里，$S_i$ 是字符串 $S$ 中的第 $i$ 个字符（下标从 $0$ 开始）。\n\n   - 如果 $S_i$ 是 `0`，机器会将内存区域置为 $a_x$。其中 $a_x$ 是序列 $a$ 中第 $x$ 个元素（下标从 $0$ 开始）。\n   - 如果 $S_i$ 是 `1`，机器会将内存区域置为 $b_x$。其中 $b_x$ 是序列 $b$ 中第 $x$ 个元素（下标从 $0$ 开始）。\n\n3. 这个机器将展示内存区域中最终置为的整数。\n\n使用这个机器，Bitaro 想要确定石板上写的字符串。然而，因为这个机器十分脆弱，查询的次数不能超过 $1\\ 000$。此外，输入机器的整数 $m$ 的最大值需要越小越好。\n\n使用这个机器，写一个程序确定石板上写的字符串。\n\n**【实现细节】**\n\n你需要在程序一开始使用预处理指令 `#include` 引入库 `ancient2.h`。它应当实现如下函数。\n\n- `std::string Solve(int N)`\n\n  这个函数在每组测试数据中仅被调用一次。这个函数需要返回和石板上所写的字符串 $S$ 相同的字符串。\n\n  - 参数 `N` 表示石板上写的字符串 $S$ 的长度 $N$。\n  - 这个函数需要返回一个长度为 $N$ 的字符串。如果字符串长度不为 $N$，你的程序会被判为 **Wrong Answer [1]**。\n  - 返回值中每个字符要么是 `0`，要么是 `1`。如果该条件不满足，你的程序会被判为 **Wrong Answer [2]**。\n  - 返回值应当与石板上写的字符串 $S$ 相同。如果该条件不满足，你的程序会被判为 **Wrong Answer [3]**。\n\n  你的程序可以调用如下函数。\n\n  - `int Query(int m, std::vector<int> a, std::vector<int> b)`\n\n    使用这个函数，你的程序可以做一次查询。\n\n    - 参数 `m` 是输入机器的整数 $m$。\n    - 参数 `a`，`b` 是输入机器的两个整数序列 $a,b$。\n    - 返回值是当我们把石板放在机器上，并输入上述整数和序列，做一次查询是机器最后显示的整数。\n    - 参数 `m` 应当在 $1$ 和 $1\\ 002$ 之间（包括两端）。如果该条件不满足，你的程序会被判为 **Wrong Answer [4]**。\n    - 序列 `a` 和 `b` 的长度均应等于 $m$。如果该条件不满足，你的程序会被判为 **Wrong Answer [5]**。\n    - 序列 `a` 和 `b` 中元素均应在 $0$ 和 $m-1$ 之间（包括两端）。如果该条件不满足，你的程序会被判为 **Wrong Answer [6]**。\n    - 函数 `Query` 的调用次数不能超过 $1\\ 000$ 次。如果超过 $1\\ 000$ 次，你的程序会被判为 **Wrong Answer [7]**。\n    \n**【注意事项】**\n\n- 你的程序可以实现其它函数供内部使用，或者使用全局变量。\n- 你的程序禁止使用标准输入输出。你的程序禁止通过任何方式与其他文件通信。然而，你的程序可以将调试信息输出到标准错误输出。\n\n**【编译和测试运行】**\n\n你可以在「文件」中的「附加文件」下载样例 grader 来测试你的程序。「附加文件」中也包含一份你的程序的样例源程序。\n\n样例交互器是文件 `grader.cpp`。为了测试你的程序，你需要将 `grader.cpp`，`ancient2.cpp` 和 `ancient2.h` 三个文件放在同一文件夹下，并且执行如下命令编译你的程序。你也可以运行 `compile.sh` 来编译你的程序。\n\n```shell\ng++ -std=gnu++17 -O2 -o grader grader.cpp ancient2.cpp\n```\n\n当编译成功时，会生成一个可执行文件 `grader`。\n\n请注意，实际的交互器和样例不同。样例交互器会作为单进程运行，即它会从标准输入中读取输入数据，并输出结果到标准输出。", "inputFormat": "第一行一个整数 $N$。\n\n第二行一个长为 $N$ 的字符串 $S$。", "outputFormat": "样例交互器会输出如下内容到标准输出。\n\n- 如果你的程序被判为正确，它会输出 `Query` 函数中参数 `m` 的最大值，如 `Accepted: 22`。然而，如果你的程序没有调用 `Query` 函数并被判为正确，它会输出 `Accepted: 0`。\n- 如果你的程序被判为任一类的答案错误，样例交互器会输出其类别，如 `Wrong Answer [4]`。\n\n如果程序满足多种答案错误的类别，样例交互器只会输出其中一个。", "hint": "**【样例解释】**\n\n样例函数调用如下。\n\n| 对 `Solve` 的调用 |   返回值   |           对 `Query` 的调用            |    返回值     |\n| :---------------: | :--------: | :------------------------------------: | :-----------: |\n|    `Solve(3)`     |            |                              |               |\n|                   |   | `Query(4, [3, 3, 2, 2], [2, 2, 1, 0])` |      `3`      |\n|          |            |       `Query(2, [0, 1], [1, 0])`       |      `0`      |\n|                   |   |          `Query(1, [0], [0])`          | `0`  |\n|          |            |    `Query(3, [1, 1, 1], [1, 1, 1])`    |      `1`      |\n|                   |  `\"110\"`   |                                        |   |\n\n假设写在石板上的字符串 $S$ 是 `110`。如果我们把石板放在机器上，输入 $(m,a,b)=(4,[3,3,2,2],[2,2,1,0])$ 并做一次查询，机器将按如下方式操作。\n\n1. 机器将内存区域置为 $0$。\n2. 对于第一次操作，因为 $S_0$ 是 `1`，机器会将内存区域置为 $b_0$，即 $2$。\n3. 对于第二次操作，因为 $S_1$ 是 `1`，机器会将内存区域置为 $b_2$，即 $1$。\n4. 对于第三次操作，因为 $S_2$ 是 `0`，机器会将内存区域置为 $a_1$，即 $3$。\n5. 因为最终内存区域被置为的整数是 $3$，所以机器显示 $3$。\n\n注意这组样例输入不满足限制 $N=1\\ 000$。在文件中，`sample-02.txt` 满足这个限制。\n\n**【数据范围】**\n\n对于全部数据，满足：\n\n- $N=1\\ 000$\n- $S$ 是一个长为 $N$ 的字符串\n- $S$ 中的每个字符要么是 `0`，要么是 `1`\n\n对于每组数据，实际的交互器 **不是**适应性的。这意味着交互器在开始时答案就已经确定了。\n\n如果你的程序在任意一组数据上被判为任意一种答案错误，在本题你将获得 $0$ 分。\n\n如果你的程序在所有数据上都被判为正确，你的分数由 $M$ 确定，其中 $M$ 是所有数据的 `Query` 函数中参数 `m` 的最大值。然而，如果你的程序没有调用 `Query` 函数并且被判为正确，你的分数由 $M=0$ 确定。\n\n- 如果 $103\\le M\\le 1\\ 002$，你的得分为 $10+\\lfloor \\frac{(1002-M)^2}{9000}\\rfloor$\n- 如果 $0\\le M\\le 102$，你将获得 $100$ 分。\n\n这里 $\\lfloor x\\rfloor$ 表示不超过 $x$ 的最大整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2023] 古代机器 2 / Ancient Machine 2", "background": "**译自 [JOI Open 2023](https://contests.ioi-jp.org/open-2023/index.html) T1 「[古代の機械 2](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2023/ancient2/2023-open-ancient2-statement.pdf) / [Ancient Machine 2](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2023/ancient2/2023-open-ancient2-statement-en.pdf)」**\n\n**这是一道交互题。**\n\n**在提交本题前请务必仔细阅读以下内容。**\n\n本题只支持 C++ 语言提交（建议使用 C++14，请不要使用 C++14 (GCC9)）。\n\n由于洛谷特殊的交互机制，在提交本题时，请去掉代码中的 ```#include \"ancient2.h\"``` 语句，并将添加以下语句粘贴到代码最开头：\n\n```cpp\nint Query(int m, std::vector<int> a, std::vector<int> b);\n```", "description": "Bitaro 和 Bibako 是挖掘和调查 JOI 王国废墟的考古学家。在废墟中，Bitaro 发现了一块古老的石板，Bibako 发现了一台古老的机器。\n\n从研究结果中，Bitaro 发现石板上写有一个长为 $N$ 的字符串 $S$。字符串中每个字符要么是 `0`，要么是 `1`。然而，他还不知道字符串 $S$ 中的每个字符是什么。\n\n另一方面，从研究结果中，Bibako 弄清了如何使用机器。为了使用它，我们需要将石板放在机器上，输入一个整数 $m$ 和两个整数序列 $a,b$，然后做一次查询。这里整数 $m$ 和整数序列 $a,b$ 需满足如下条件：\n\n- 整数 $m$ 在 $1$ 和 $1\\ 002$ 之间（包括两端）。\n- 序列 $a$ 和 $b$ 的长度均为 $m$。\n- 序列 $a,b$ 中的元素都是 $0$ 和 $m-1$ 之间的整数（包括两端）。\n\n如果我们把石板放在机器上，输入一个整数 $m$ 和两个整数序列 $a,b$，然后做一次查询，机器会按如下方式操作并显示一个整数。\n\n1. 机器对其**内存区域**置 $0$。\n\n2. 机器进行如下的 $N$ 次操作。第 $i+1$ 次（$0\\le i\\le N-1$）操作按如下方式进行。\n\n   令 $x$ 表示机器内存区域中当前的整数。机器读取字符 $S_i$。这里，$S_i$ 是字符串 $S$ 中的第 $i$ 个字符（下标从 $0$ 开始）。\n\n   - 如果 $S_i$ 是 `0`，机器会将内存区域置为 $a_x$。其中 $a_x$ 是序列 $a$ 中第 $x$ 个元素（下标从 $0$ 开始）。\n   - 如果 $S_i$ 是 `1`，机器会将内存区域置为 $b_x$。其中 $b_x$ 是序列 $b$ 中第 $x$ 个元素（下标从 $0$ 开始）。\n\n3. 这个机器将展示内存区域中最终置为的整数。\n\n使用这个机器，Bitaro 想要确定石板上写的字符串。然而，因为这个机器十分脆弱，查询的次数不能超过 $1\\ 000$。此外，输入机器的整数 $m$ 的最大值需要越小越好。\n\n使用这个机器，写一个程序确定石板上写的字符串。\n\n**【实现细节】**\n\n你需要在程序一开始使用预处理指令 `#include` 引入库 `ancient2.h`。它应当实现如下函数。\n\n- `std::string Solve(int N)`\n\n  这个函数在每组测试数据中仅被调用一次。这个函数需要返回和石板上所写的字符串 $S$ 相同的字符串。\n\n  - 参数 `N` 表示石板上写的字符串 $S$ 的长度 $N$。\n  - 这个函数需要返回一个长度为 $N$ 的字符串。如果字符串长度不为 $N$，你的程序会被判为 **Wrong Answer [1]**。\n  - 返回值中每个字符要么是 `0`，要么是 `1`。如果该条件不满足，你的程序会被判为 **Wrong Answer [2]**。\n  - 返回值应当与石板上写的字符串 $S$ 相同。如果该条件不满足，你的程序会被判为 **Wrong Answer [3]**。\n\n  你的程序可以调用如下函数。\n\n  - `int Query(int m, std::vector<int> a, std::vector<int> b)`\n\n    使用这个函数，你的程序可以做一次查询。\n\n    - 参数 `m` 是输入机器的整数 $m$。\n    - 参数 `a`，`b` 是输入机器的两个整数序列 $a,b$。\n    - 返回值是当我们把石板放在机器上，并输入上述整数和序列，做一次查询是机器最后显示的整数。\n    - 参数 `m` 应当在 $1$ 和 $1\\ 002$ 之间（包括两端）。如果该条件不满足，你的程序会被判为 **Wrong Answer [4]**。\n    - 序列 `a` 和 `b` 的长度均应等于 $m$。如果该条件不满足，你的程序会被判为 **Wrong Answer [5]**。\n    - 序列 `a` 和 `b` 中元素均应在 $0$ 和 $m-1$ 之间（包括两端）。如果该条件不满足，你的程序会被判为 **Wrong Answer [6]**。\n    - 函数 `Query` 的调用次数不能超过 $1\\ 000$ 次。如果超过 $1\\ 000$ 次，你的程序会被判为 **Wrong Answer [7]**。\n    \n**【注意事项】**\n\n- 你的程序可以实现其它函数供内部使用，或者使用全局变量。\n- 你的程序禁止使用标准输入输出。你的程序禁止通过任何方式与其他文件通信。然而，你的程序可以将调试信息输出到标准错误输出。\n\n**【编译和测试运行】**\n\n你可以在「文件」中的「附加文件」下载样例 grader 来测试你的程序。「附加文件」中也包含一份你的程序的样例源程序。\n\n样例交互器是文件 `grader.cpp`。为了测试你的程序，你需要将 `grader.cpp`，`ancient2.cpp` 和 `ancient2.h` 三个文件放在同一文件夹下，并且执行如下命令编译你的程序。你也可以运行 `compile.sh` 来编译你的程序。\n\n```shell\ng++ -std=gnu++17 -O2 -o grader grader.cpp ancient2.cpp\n```\n\n当编译成功时，会生成一个可执行文件 `grader`。\n\n请注意，实际的交互器和样例不同。样例交互器会作为单进程运行，即它会从标准输入中读取输入数据，并输出结果到标准输出。", "inputFormat": "第一行一个整数 $N$。\n\n第二行一个长为 $N$ 的字符串 $S$。", "outputFormat": "样例交互器会输出如下内容到标准输出。\n\n- 如果你的程序被判为正确，它会输出 `Query` 函数中参数 `m` 的最大值，如 `Accepted: 22`。然而，如果你的程序没有调用 `Query` 函数并被判为正确，它会输出 `Accepted: 0`。\n- 如果你的程序被判为任一类的答案错误，样例交互器会输出其类别，如 `Wrong Answer [4]`。\n\n如果程序满足多种答案错误的类别，样例交互器只会输出其中一个。", "hint": "**【样例解释】**\n\n样例函数调用如下。\n\n| 对 `Solve` 的调用 |   返回值   |           对 `Query` 的调用            |    返回值     |\n| :---------------: | :--------: | :------------------------------------: | :-----------: |\n|    `Solve(3)`     |            |                              |               |\n|                   |   | `Query(4, [3, 3, 2, 2], [2, 2, 1, 0])` |      `3`      |\n|          |            |       `Query(2, [0, 1], [1, 0])`       |      `0`      |\n|                   |   |          `Query(1, [0], [0])`          | `0`  |\n|          |            |    `Query(3, [1, 1, 1], [1, 1, 1])`    |      `1`      |\n|                   |  `\"110\"`   |                                        |   |\n\n假设写在石板上的字符串 $S$ 是 `110`。如果我们把石板放在机器上，输入 $(m,a,b)=(4,[3,3,2,2],[2,2,1,0])$ 并做一次查询，机器将按如下方式操作。\n\n1. 机器将内存区域置为 $0$。\n2. 对于第一次操作，因为 $S_0$ 是 `1`，机器会将内存区域置为 $b_0$，即 $2$。\n3. 对于第二次操作，因为 $S_1$ 是 `1`，机器会将内存区域置为 $b_2$，即 $1$。\n4. 对于第三次操作，因为 $S_2$ 是 `0`，机器会将内存区域置为 $a_1$，即 $3$。\n5. 因为最终内存区域被置为的整数是 $3$，所以机器显示 $3$。\n\n注意这组样例输入不满足限制 $N=1\\ 000$。在文件中，`sample-02.txt` 满足这个限制。\n\n**【数据范围】**\n\n对于全部数据，满足：\n\n- $N=1\\ 000$\n- $S$ 是一个长为 $N$ 的字符串\n- $S$ 中的每个字符要么是 `0`，要么是 `1`\n\n对于每组数据，实际的交互器 **不是**适应性的。这意味着交互器在开始时答案就已经确定了。\n\n如果你的程序在任意一组数据上被判为任意一种答案错误，在本题你将获得 $0$ 分。\n\n如果你的程序在所有数据上都被判为正确，你的分数由 $M$ 确定，其中 $M$ 是所有数据的 `Query` 函数中参数 `m` 的最大值。然而，如果你的程序没有调用 `Query` 函数并且被判为正确，你的分数由 $M=0$ 确定。\n\n- 如果 $103\\le M\\le 1\\ 002$，你的得分为 $10+\\lfloor \\frac{(1002-M)^2}{9000}\\rfloor$\n- 如果 $0\\le M\\le 102$，你将获得 $100$ 分。\n\n这里 $\\lfloor x\\rfloor$ 表示不超过 $x$ 的最大整数。", "locale": "zh-CN"}}}
{"pid": "P9513", "type": "P", "difficulty": 7, "samples": [["2 3\n0 2\n1 0\n0\n1\n2\n", "2\n8\n12\n"], ["3 5\n0 0\n2 2\n5 5\n0\n1\n2\n3\n4\n", "3\n12\n21\n24\n26\n"], ["4 10\n-3 -3\n3 3\n-4 4\n4 -4\n0\n1\n2\n3\n4\n5\n6\n7\n8\n9\n", "4\n16\n32\n48\n56\n56\n55\n56\n60\n64\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2023", "O2优化", "JOI（日本）"], "title": "[JOI Open 2023] 细胞自动机 / Cell Automaton", "background": "**译自 [JOI Open 2023](https://contests.ioi-jp.org/open-2023/index.html) T2 「[セルオートマトン](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2023/cell/2023-open-cell-statement.pdf) / [Cell Automaton](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2023/cell/2023-open-cell-statement-en.pdf)」**", "description": "我们有一个充分大的二维网格，网格由从上到下和从左到右的正方形单元格密铺而成。\n\n有一个单元格是坐标原点。令 $(x,y)$ 表示表示从原点向右移动 $x$ 个单元格，再向上移动 $y$ 个单元格所到达的单元格。这里，向左移动 $a$ 个单元格意味着向右移动 $-a$ 个单元格。类似地，向下移动 $a$ 个单元格意味着向上移动 $-a$ 个单元格。\n\n在时刻 $0$，单元格 $(X_1,Y_1),(X_2,Y_2),\\ldots,(X_N,Y_N)$ 是黑色的，其余单元格是白色的。\n\n对于 $t=0,1,2,\\ldots$，根据单元格在 $t$ 时刻的颜色，单元格在 $t+1$ 时刻的颜色按如下方法确定：\n\n- 如果在时刻 $t$ 时单元格是黑色，那么在时刻 $t+1$ 这个单元格变为灰色。\n- 如果在时刻 $t$ 时单元格是灰色，那么在时刻 $t+1$ 这个单元格变为白色。\n- 如果在时刻 $t$ 时单元格是白色，并且与其相邻的四个单元格（即，与其共边的四个单元格）中至少有一个在时刻 $t$ 是黑色的，那么在时刻 $t+1$ 这个单元格变为黑色。否则，它将在时刻 $t+1$ 保持白色。\n\n你有 $Q$ 次查询。对于第 $j$ 个查询，你应该回答在时刻 $T_j$ 时有多少黑色单元格。\n\n给定在时刻 $0$ 时的单元格颜色信息和查询，写一个程序回答询问。", "inputFormat": "第一行两个整数 $N,Q$。\n\n接下来 $N$ 行，每行两个整数 $X_i,Y_i$。\n\n接下来 $Q$ 行，每行一个整数 $T_j$。", "outputFormat": "输出 $Q$ 行，每行一个整数，表示在时刻 $T_j$ 时有多少黑色单元格。", "hint": "**【样例解释 #1】**\n\n下图展示了在时刻 $0$ 时的单元格情况。因为有 $2$ 个黑色单元格，所以第一个询问的回答是 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6mmzh2tq.png)\n\n下图展示了在时刻 $1$ 时的单元格情况。因为有 $8$ 个黑色单元格，所以第二个询问的回答是 $8$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s5gw87z0.png)\n\n下图展示了在时刻 $2$ 时的单元格情况。因为有 $12$ 个黑色单元格，所以第三个询问的回答是 $12$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2uavkaeg.png)\n\n这组样例满足子任务 $1,2,6,7$ 的限制。\n\n**【样例解释 #2】**\n\n这组样例满足子任务 $1,2,4,6,7$ 的限制。\n\n**【样例解释 #3】**\n\n这组样例满足子任务 $1,2,6,7$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $1\\le N\\le 10^5$\n- $1\\le Q\\le 5\\times 10^5$\n- $|X_i|,|Y_i|\\le 10^9$\n- $(X_i,Y_i)\\neq (X_j,Y_j)\\ (1\\le i < j\\le N)$\n- $0\\le T_j\\le 10^9$\n- $T_j<T_{j+1}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 |               附加限制                | 分值 |\n| :----: | :-----------------------------------: | :--: |\n|  $1$   |     $\\lvert X_i\\rvert ,\\lvert Y_i\\rvert \\le 50,T_j\\le 50$     | $4$  |\n|  $2$   | $\\lvert X_i\\rvert ,\\lvert Y_i\\rvert \\le 1\\ 000,T_j\\le 1\\ 000$ | $12$ |\n|  $3$   |             $X_i=Y_i,Q=1$             | $8$  |\n|  $4$   |               $X_i=Y_i$               | $8$  |\n|  $5$   |           $N\\le 2\\ 000,Q=1$           | $17$ |\n|  $6$   |             $N\\le 2\\ 000$             | $25$ |\n|  $7$   |              无附加限制               | $26$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2023] 细胞自动机 / Cell Automaton", "background": "**译自 [JOI Open 2023](https://contests.ioi-jp.org/open-2023/index.html) T2 「[セルオートマトン](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2023/cell/2023-open-cell-statement.pdf) / [Cell Automaton](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2023/cell/2023-open-cell-statement-en.pdf)」**", "description": "我们有一个充分大的二维网格，网格由从上到下和从左到右的正方形单元格密铺而成。\n\n有一个单元格是坐标原点。令 $(x,y)$ 表示表示从原点向右移动 $x$ 个单元格，再向上移动 $y$ 个单元格所到达的单元格。这里，向左移动 $a$ 个单元格意味着向右移动 $-a$ 个单元格。类似地，向下移动 $a$ 个单元格意味着向上移动 $-a$ 个单元格。\n\n在时刻 $0$，单元格 $(X_1,Y_1),(X_2,Y_2),\\ldots,(X_N,Y_N)$ 是黑色的，其余单元格是白色的。\n\n对于 $t=0,1,2,\\ldots$，根据单元格在 $t$ 时刻的颜色，单元格在 $t+1$ 时刻的颜色按如下方法确定：\n\n- 如果在时刻 $t$ 时单元格是黑色，那么在时刻 $t+1$ 这个单元格变为灰色。\n- 如果在时刻 $t$ 时单元格是灰色，那么在时刻 $t+1$ 这个单元格变为白色。\n- 如果在时刻 $t$ 时单元格是白色，并且与其相邻的四个单元格（即，与其共边的四个单元格）中至少有一个在时刻 $t$ 是黑色的，那么在时刻 $t+1$ 这个单元格变为黑色。否则，它将在时刻 $t+1$ 保持白色。\n\n你有 $Q$ 次查询。对于第 $j$ 个查询，你应该回答在时刻 $T_j$ 时有多少黑色单元格。\n\n给定在时刻 $0$ 时的单元格颜色信息和查询，写一个程序回答询问。", "inputFormat": "第一行两个整数 $N,Q$。\n\n接下来 $N$ 行，每行两个整数 $X_i,Y_i$。\n\n接下来 $Q$ 行，每行一个整数 $T_j$。", "outputFormat": "输出 $Q$ 行，每行一个整数，表示在时刻 $T_j$ 时有多少黑色单元格。", "hint": "**【样例解释 #1】**\n\n下图展示了在时刻 $0$ 时的单元格情况。因为有 $2$ 个黑色单元格，所以第一个询问的回答是 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6mmzh2tq.png)\n\n下图展示了在时刻 $1$ 时的单元格情况。因为有 $8$ 个黑色单元格，所以第二个询问的回答是 $8$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s5gw87z0.png)\n\n下图展示了在时刻 $2$ 时的单元格情况。因为有 $12$ 个黑色单元格，所以第三个询问的回答是 $12$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2uavkaeg.png)\n\n这组样例满足子任务 $1,2,6,7$ 的限制。\n\n**【样例解释 #2】**\n\n这组样例满足子任务 $1,2,4,6,7$ 的限制。\n\n**【样例解释 #3】**\n\n这组样例满足子任务 $1,2,6,7$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $1\\le N\\le 10^5$\n- $1\\le Q\\le 5\\times 10^5$\n- $|X_i|,|Y_i|\\le 10^9$\n- $(X_i,Y_i)\\neq (X_j,Y_j)\\ (1\\le i < j\\le N)$\n- $0\\le T_j\\le 10^9$\n- $T_j<T_{j+1}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 |               附加限制                | 分值 |\n| :----: | :-----------------------------------: | :--: |\n|  $1$   |     $\\lvert X_i\\rvert ,\\lvert Y_i\\rvert \\le 50,T_j\\le 50$     | $4$  |\n|  $2$   | $\\lvert X_i\\rvert ,\\lvert Y_i\\rvert \\le 1\\ 000,T_j\\le 1\\ 000$ | $12$ |\n|  $3$   |             $X_i=Y_i,Q=1$             | $8$  |\n|  $4$   |               $X_i=Y_i$               | $8$  |\n|  $5$   |           $N\\le 2\\ 000,Q=1$           | $17$ |\n|  $6$   |             $N\\le 2\\ 000$             | $25$ |\n|  $7$   |              无附加限制               | $26$ |", "locale": "zh-CN"}}}
{"pid": "P9514", "type": "P", "difficulty": 6, "samples": [["2 1 5\n1 4\n2 2\n0 0\n", "8\n"], ["3 4 100\n20 26\n81 56\n20 3\n58 71\n74 82\n95 61\n95 61\n", "2840\n"], ["5 7 5000\n1046 365\n4122 1166\n4009 2896\n1815 4065\n4372 1651\n2382 123\n1475 836\n3313 4005\n2579 568\n4300 4867\n1050 3214\n3589 4653\n", "10543092\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "JOI（日本）"], "title": "[JOI Open 2023] 花园 / Garden", "background": "**译自 [JOI Open 2023](https://contests.ioi-jp.org/open-2023/index.html) T3 「[庭園](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2023/garden/2023-open-garden-statement.pdf) / [Garden](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2023/garden/2023-open-garden-statement-en.pdf)」**", "description": "JOI 王国是一个神秘的王国，疆域辽阔无边。JOI 君是 JOI 国国王，他在计划分割疆域的一部分来建造他的花园。\n\nJOI 网络可以考虑成一个充分大的二维网格，网格由从上到下和从左到右的正方形单元格密铺而成。有一个单元格是坐标原点。令 $(x,y)$ 表示表示从原点向右移动 $x$ 个单元格，再向上移动 $y$ 个单元格所到达的单元格。这里，向左移动 $a$ 个单元格意味着向右移动 $-a$ 个单元格。类似地，向下移动 $a$ 个单元格意味着向上移动 $-a$ 个单元格。\n\n在领土内有一些艺术品。这些艺术品根据放置在领土上的方式分为 **A 类**和 **B 类**。\n\n- 有 $N$ 种 A 类艺术品。第 $i$ 种艺术品（$1\\le i\\le N$）放在每个形如 $(P_i+kD,Q_i+lD)$ 的单元格上，其中 $k,l$ 为整数。\n- 有 $M$ 种 B 类艺术品。第 $j$ 种艺术品（$1\\le j\\le M$）放在每个形如 $(R_j+kD,y)$（其中 $k,y$ 为整数）或 $(x,S_j+lD)$（其中 $l,x$ 为整数）的单元格上。\n\n注意一个单元格中可能包含多种不同类别的艺术品。\n\nJOI 君计划在网格中选择一个矩形区域建造花园。换句话说，他会选择四个整数 $a,b,c,d$。然后形如 $(x,y)$ 的单元格将构成 JOI 君的花园，其中 $x,y$ 是满足 $a\\le x\\le b,c\\le y\\le d$ 的整数。因为 JOI 君喜欢看到多种艺术品，对于任意 $N+M$ 种艺术品中的一种，JOI 君的花园中需要至少包含这种艺术品中的一个。另一方面，如果 JOI 君计划要建的花园过大，JOI 国的居民就会生气。因此，JOI 君希望最小化花园包含的单元格数使得满足上述条件。\n\n给定艺术品的信息，写一个程序计算 JOI 君的花园所包含的最小单元格数。", "inputFormat": "第一行三个整数 $N,M,D$。\n\n接下来 $N$ 行，每行两个整数 $P_i,Q_i$。\n\n接下来 $M$ 行，每行两个整数 $R_j,S_j$。", "outputFormat": "输出一行一个整数，表示 JOI 君的花园所包含的最小单元格数。", "hint": "**【样例解释 #1】**\n\n下图展示了 JOI 国领土中的满足 $0\\le x<10,0\\le y<10$ 的单元格 $(x,y)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pnsc7qm4.png)\n\n在本图中，圆形和菱形分别表示 A 类和 B 类艺术品。圆形或菱形中的整数表示艺术品的种数。如果 JOI 君选择 $a=1,b=2,c=2,d=5$，JOI 君的花园就是黑色矩形区域。这种情况下，对于这三种艺术品，JOI 君的花园中至少会有每种中的一个。花园所占单元格数为 $8$。因为没有比这个花园占地更小且满足条件的花园了，因此输出 $8$。\n\n这组样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n这组样例满足子任务 $1,4,5,6$ 的限制。\n\n**【样例解释 #3】**\n\n这组样例满足子任务 $1,5,6$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $N,M\\ge 1$\n- $N+M\\le 5\\times 10^5$\n- $1\\le D\\le 5\\ 000$\n- $0\\le P_i,Q_i,R_j,S_j<D$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 |        附加限制        | 分值 |\n| :----: | :--------------------: | :--: |\n|  $1$   |        $M\\le 8$        | $15$ |\n|  $2$   | $D\\le 10,N+M\\le 5000$  | $6$  |\n|  $3$   | $D\\le 50,N+M\\le 5000$  | $8$  |\n|  $4$   | $D\\le 100,N+M\\le 5000$ | $16$ |\n|  $5$   |     $N+M\\le 5000$      | $30$ |\n|  $6$   |       无附加限制       | $25$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2023] 花园 / Garden", "background": "**译自 [JOI Open 2023](https://contests.ioi-jp.org/open-2023/index.html) T3 「[庭園](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2023/garden/2023-open-garden-statement.pdf) / [Garden](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2023/garden/2023-open-garden-statement-en.pdf)」**", "description": "JOI 王国是一个神秘的王国，疆域辽阔无边。JOI 君是 JOI 国国王，他在计划分割疆域的一部分来建造他的花园。\n\nJOI 网络可以考虑成一个充分大的二维网格，网格由从上到下和从左到右的正方形单元格密铺而成。有一个单元格是坐标原点。令 $(x,y)$ 表示表示从原点向右移动 $x$ 个单元格，再向上移动 $y$ 个单元格所到达的单元格。这里，向左移动 $a$ 个单元格意味着向右移动 $-a$ 个单元格。类似地，向下移动 $a$ 个单元格意味着向上移动 $-a$ 个单元格。\n\n在领土内有一些艺术品。这些艺术品根据放置在领土上的方式分为 **A 类**和 **B 类**。\n\n- 有 $N$ 种 A 类艺术品。第 $i$ 种艺术品（$1\\le i\\le N$）放在每个形如 $(P_i+kD,Q_i+lD)$ 的单元格上，其中 $k,l$ 为整数。\n- 有 $M$ 种 B 类艺术品。第 $j$ 种艺术品（$1\\le j\\le M$）放在每个形如 $(R_j+kD,y)$（其中 $k,y$ 为整数）或 $(x,S_j+lD)$（其中 $l,x$ 为整数）的单元格上。\n\n注意一个单元格中可能包含多种不同类别的艺术品。\n\nJOI 君计划在网格中选择一个矩形区域建造花园。换句话说，他会选择四个整数 $a,b,c,d$。然后形如 $(x,y)$ 的单元格将构成 JOI 君的花园，其中 $x,y$ 是满足 $a\\le x\\le b,c\\le y\\le d$ 的整数。因为 JOI 君喜欢看到多种艺术品，对于任意 $N+M$ 种艺术品中的一种，JOI 君的花园中需要至少包含这种艺术品中的一个。另一方面，如果 JOI 君计划要建的花园过大，JOI 国的居民就会生气。因此，JOI 君希望最小化花园包含的单元格数使得满足上述条件。\n\n给定艺术品的信息，写一个程序计算 JOI 君的花园所包含的最小单元格数。", "inputFormat": "第一行三个整数 $N,M,D$。\n\n接下来 $N$ 行，每行两个整数 $P_i,Q_i$。\n\n接下来 $M$ 行，每行两个整数 $R_j,S_j$。", "outputFormat": "输出一行一个整数，表示 JOI 君的花园所包含的最小单元格数。", "hint": "**【样例解释 #1】**\n\n下图展示了 JOI 国领土中的满足 $0\\le x<10,0\\le y<10$ 的单元格 $(x,y)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pnsc7qm4.png)\n\n在本图中，圆形和菱形分别表示 A 类和 B 类艺术品。圆形或菱形中的整数表示艺术品的种数。如果 JOI 君选择 $a=1,b=2,c=2,d=5$，JOI 君的花园就是黑色矩形区域。这种情况下，对于这三种艺术品，JOI 君的花园中至少会有每种中的一个。花园所占单元格数为 $8$。因为没有比这个花园占地更小且满足条件的花园了，因此输出 $8$。\n\n这组样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n这组样例满足子任务 $1,4,5,6$ 的限制。\n\n**【样例解释 #3】**\n\n这组样例满足子任务 $1,5,6$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $N,M\\ge 1$\n- $N+M\\le 5\\times 10^5$\n- $1\\le D\\le 5\\ 000$\n- $0\\le P_i,Q_i,R_j,S_j<D$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 |        附加限制        | 分值 |\n| :----: | :--------------------: | :--: |\n|  $1$   |        $M\\le 8$        | $15$ |\n|  $2$   | $D\\le 10,N+M\\le 5000$  | $6$  |\n|  $3$   | $D\\le 50,N+M\\le 5000$  | $8$  |\n|  $4$   | $D\\le 100,N+M\\le 5000$ | $16$ |\n|  $5$   |     $N+M\\le 5000$      | $30$ |\n|  $6$   |       无附加限制       | $25$ |", "locale": "zh-CN"}}}
{"pid": "P9515", "type": "P", "difficulty": 2, "samples": [["3 20 10\n7 18\n3 5\n5 0", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 500, 500, 150, 150], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 10240, 10240]}, "tags": ["贪心", "O2优化"], "title": "「JOC-1A」限时签到", "background": "纵使寻不到身外的青春，\n\n也总得自己来一掷我身中的迟暮。\n\n但暗夜又在那里呢？\n\n现在没有星，没有月光以至没有笑的渺茫和爱的翔舞；\n\n青年们很平安，而我的面前又竟至于并且没有真的暗夜。\n\n绝望之为虚妄，正与希望相同！\n\n                                \n——@duanfeitong 摘自鲁迅《希望》", "description": "你现在一条笔直的公路上，我们不妨把这条公路看做成一条数轴，你现在在数轴原点的位置上，此外还有 $n$ 个签到处，第 $i$ 个签到处的坐标为 $x_i$，并且其将在你出发后的第 $a_i$ 个时刻开始营业，每个签到处只有在开始营业了之后你才可以进去签到（签到的时间可以忽略不计），你在每个时刻内至多可移动 $1$ 个单位，你必须在 $t$ 时刻或者在此之前到达坐标为 $f$ 的点（$f\\le t$），无论你在规定时间内何时到达 $f$ 点，从 $t$ 时刻起你就必须一直待在 $f$ 点，问你最多能去多少个签到处签到。**请注意，你不需要按照签到处的编号顺序签到。**", "inputFormat": "共 $n+1$ 行。\n\n第一行，三个整数 $n$、$t$ 和 $f$。\n\n接下来 $n$ 行，每行两个整数 $x_i$ 和 $a_i$。", "outputFormat": "共一行，一个非负整数，表示最多能去签到的签到处的数量。", "hint": "### 样例 $\\small\\text{1}$ 解释\n\n一种可行的行动方案如下：在 $5$ 时刻来到第三个签到处签到，然后在 $7$ 时刻来到第二个签到处签到，最后在 $14$ 时刻来到终点，可以证明最多只能去 $2$ 个签到处签到。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n| $\\textbf{Subtask}$ | $\\textbf{Number}$ | $\\textbf{Special conditions}$| $\\textbf{Points}$ | $\\textbf{Limit}$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1-2$ | $n\\leq 10$ | $10$ | $\\small\\texttt{1s，128MB}$ |\n| $2$ | $3-4$ | $n\\leq 5\\times 10^3$ | $15$ | $\\small\\texttt{1s，128MB}$ |\n| $3$ | $5$ | $n\\leq 10^6$ | $25$ | $\\small\\texttt{1s，128MB}$  |\n| $4$ | $6-7$ | $f\\leq 10^5$ | $20$ | $\\small\\texttt{500ms，128MB}$ |\n| $5$ | $8-9$ | $n\\leq 10^6$ | $30$ | $\\small\\texttt{150ms，10MB}$ |\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$0\\leq f\\leq t\\leq 10^{18}$，$0\\leq x_i\\leq f$，$0\\leq a_i\\leq t$，**不保证签到处的坐标互不相同**。\n\n请注意：由于本题当 $n$ 接近 $10^7$ 时数据输入量过大，故我们决定在 $n\\leq 10^6$ 的数据上修改时间限制和空间限制以代替 $n\\leq 10^7$ 的数据的评测。\n\n**请注意，本题输入数据量较大，建议使用较快的读入方式。**\n\n---\n\n在我永恒的记忆里，\n\n你天真地微笑。\n\n在我年轻的心中，\n\n你是星星之火燃烧。\n\n——@duanfeitong 摘自祁子《童年》", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「JOC-1A」限时签到", "background": "纵使寻不到身外的青春，\n\n也总得自己来一掷我身中的迟暮。\n\n但暗夜又在那里呢？\n\n现在没有星，没有月光以至没有笑的渺茫和爱的翔舞；\n\n青年们很平安，而我的面前又竟至于并且没有真的暗夜。\n\n绝望之为虚妄，正与希望相同！\n\n                                \n——@duanfeitong 摘自鲁迅《希望》", "description": "你现在一条笔直的公路上，我们不妨把这条公路看做成一条数轴，你现在在数轴原点的位置上，此外还有 $n$ 个签到处，第 $i$ 个签到处的坐标为 $x_i$，并且其将在你出发后的第 $a_i$ 个时刻开始营业，每个签到处只有在开始营业了之后你才可以进去签到（签到的时间可以忽略不计），你在每个时刻内至多可移动 $1$ 个单位，你必须在 $t$ 时刻或者在此之前到达坐标为 $f$ 的点（$f\\le t$），无论你在规定时间内何时到达 $f$ 点，从 $t$ 时刻起你就必须一直待在 $f$ 点，问你最多能去多少个签到处签到。**请注意，你不需要按照签到处的编号顺序签到。**", "inputFormat": "共 $n+1$ 行。\n\n第一行，三个整数 $n$、$t$ 和 $f$。\n\n接下来 $n$ 行，每行两个整数 $x_i$ 和 $a_i$。", "outputFormat": "共一行，一个非负整数，表示最多能去签到的签到处的数量。", "hint": "### 样例 $\\small\\text{1}$ 解释\n\n一种可行的行动方案如下：在 $5$ 时刻来到第三个签到处签到，然后在 $7$ 时刻来到第二个签到处签到，最后在 $14$ 时刻来到终点，可以证明最多只能去 $2$ 个签到处签到。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n| $\\textbf{Subtask}$ | $\\textbf{Number}$ | $\\textbf{Special conditions}$| $\\textbf{Points}$ | $\\textbf{Limit}$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1-2$ | $n\\leq 10$ | $10$ | $\\small\\texttt{1s，128MB}$ |\n| $2$ | $3-4$ | $n\\leq 5\\times 10^3$ | $15$ | $\\small\\texttt{1s，128MB}$ |\n| $3$ | $5$ | $n\\leq 10^6$ | $25$ | $\\small\\texttt{1s，128MB}$  |\n| $4$ | $6-7$ | $f\\leq 10^5$ | $20$ | $\\small\\texttt{500ms，128MB}$ |\n| $5$ | $8-9$ | $n\\leq 10^6$ | $30$ | $\\small\\texttt{150ms，10MB}$ |\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$0\\leq f\\leq t\\leq 10^{18}$，$0\\leq x_i\\leq f$，$0\\leq a_i\\leq t$，**不保证签到处的坐标互不相同**。\n\n请注意：由于本题当 $n$ 接近 $10^7$ 时数据输入量过大，故我们决定在 $n\\leq 10^6$ 的数据上修改时间限制和空间限制以代替 $n\\leq 10^7$ 的数据的评测。\n\n**请注意，本题输入数据量较大，建议使用较快的读入方式。**\n\n---\n\n在我永恒的记忆里，\n\n你天真地微笑。\n\n在我年轻的心中，\n\n你是星星之火燃烧。\n\n——@duanfeitong 摘自祁子《童年》", "locale": "zh-CN"}}}
{"pid": "P9516", "type": "P", "difficulty": 1, "samples": [["100 14 9 55 85", "Red"], ["100 10 10 10 10", "Green"], ["0 0 0 0 0", "Gray"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "数学", "洛谷原创", "O2优化"], "title": "color", "background": "", "description": "洛谷的名字颜色和咕值直接挂钩，具体细则见 [洛谷咕值系统介绍](https://www.luogu.com.cn/discuss/83952)。\n\n给出某洛谷用户的五项咕值指标的得分，输出该用户的名字颜色。保证该用户不是棕名和紫名。", "inputFormat": "一行五个整数，分别表示该用户的基础信用、社区贡献、比赛情况、练习情况、获得成就得分。", "outputFormat": "一行一个字符串，表示该用户的名字颜色。这个字符串必须为 `Gray`，`Blue`，`Green`，`Orange`，`Red` 中的一个（区分大小写）。", "hint": "**【样例说明】**\n\n三个样例的咕值分别为 $263,140,0$，名字颜色分别为红、绿、灰。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，满足五项指标分数均 $\\le 10$；\n\n对于另外 $20\\%$ 的数据，满足五项指标分数均 $\\ge 90$；\n\n对于 $100\\%$ 的数据，保证五项指标分数均 $\\in [0, 100]$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "color", "background": "", "description": "洛谷的名字颜色和咕值直接挂钩，具体细则见 [洛谷咕值系统介绍](https://www.luogu.com.cn/discuss/83952)。\n\n给出某洛谷用户的五项咕值指标的得分，输出该用户的名字颜色。保证该用户不是棕名和紫名。", "inputFormat": "一行五个整数，分别表示该用户的基础信用、社区贡献、比赛情况、练习情况、获得成就得分。", "outputFormat": "一行一个字符串，表示该用户的名字颜色。这个字符串必须为 `Gray`，`Blue`，`Green`，`Orange`，`Red` 中的一个（区分大小写）。", "hint": "**【样例说明】**\n\n三个样例的咕值分别为 $263,140,0$，名字颜色分别为红、绿、灰。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，满足五项指标分数均 $\\le 10$；\n\n对于另外 $20\\%$ 的数据，满足五项指标分数均 $\\ge 90$；\n\n对于 $100\\%$ 的数据，保证五项指标分数均 $\\in [0, 100]$。", "locale": "zh-CN"}}}
{"pid": "P9517", "type": "P", "difficulty": 1, "samples": [["5\n0 0 0 1 0", "1"], ["6\n0 0 1 1 0 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化"], "title": "drink", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/8u8szw7z.png)", "description": "你面前有 $n$ 个瓶子，从左到右依次编号为 $1 \\sim n$，瓶子可能是空的也可能装着水。\n\n你可以选择一对 $l,r(l \\le r)$，然后把 $l\\sim r$ 号瓶子中的所有水全部喝完。你想一口气把桌上剩的水全喝完，请问你最少要拿起几个瓶子？\n\n你有可能一个瓶子都不需要拿起来。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个整数为 $1$ 表示第 $i$ 个瓶子装着水，为 $0$ 表示第 $i$ 个瓶子是空的。", "outputFormat": "一行一个整数 $k$，表示最少拿起的瓶子数。", "hint": "**【样例说明】**\n\n样例 $1$ 中，拿起 $4$ 号瓶子即可。总共拿起 $1$ 个瓶子。\n\n样例 $2$ 中，拿起 $3\\sim 6$ 号瓶子可以将所有的水喝完。总共拿起 $4$ 个瓶子。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，保证 $n\\le 100$。\n\n对于 $60\\%$ 的数据，保证 $n\\le 2000$。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^5$，$0\\le a_i\\le 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "drink", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/8u8szw7z.png)", "description": "你面前有 $n$ 个瓶子，从左到右依次编号为 $1 \\sim n$，瓶子可能是空的也可能装着水。\n\n你可以选择一对 $l,r(l \\le r)$，然后把 $l\\sim r$ 号瓶子中的所有水全部喝完。你想一口气把桌上剩的水全喝完，请问你最少要拿起几个瓶子？\n\n你有可能一个瓶子都不需要拿起来。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个整数为 $1$ 表示第 $i$ 个瓶子装着水，为 $0$ 表示第 $i$ 个瓶子是空的。", "outputFormat": "一行一个整数 $k$，表示最少拿起的瓶子数。", "hint": "**【样例说明】**\n\n样例 $1$ 中，拿起 $4$ 号瓶子即可。总共拿起 $1$ 个瓶子。\n\n样例 $2$ 中，拿起 $3\\sim 6$ 号瓶子可以将所有的水喝完。总共拿起 $4$ 个瓶子。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，保证 $n\\le 100$。\n\n对于 $60\\%$ 的数据，保证 $n\\le 2000$。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^5$，$0\\le a_i\\le 1$。", "locale": "zh-CN"}}}
{"pid": "P9518", "type": "P", "difficulty": 3, "samples": [["14\nstart\narrive A\nstart\narrive B\narrive C\narrive D\nstart\nleave C\nleave D\nstart\narrive A\narrive D\nleave E\nstart", "Error\nOK\nA\nOK\nOK\nOK\nB C\nError\nOK\nA B\nError\nOK\nError\nC D"], ["3\narrive A\narrive B\narrive C", "OK\nOK\nOK"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化", "队列", "链表"], "title": "queue", "background": "你说的对，但是舞萌 DX 是一款后面忘了。", "description": "**补充说明：这里的排队和传统的排队有出入。正在游玩的人为队列的前两位，所以正在游玩视为正在排队。**\n\n机厅里有一台游戏机，每次可供最多两人同时游玩。但是来玩的人显然不止两个！这个时候他们就需要排队了，而你需要写一个程序维护这个队列，并在他人游玩结束后通知接下来上场的人。在整个过程中，有以下几种事件可能发生：\n\n- `start`：一局游戏开始。若这不是第一局游戏，则上一局的参与者**在这一局游戏开始前一瞬间**按照原本的顺序回到队尾。此时你应该按在队列中的顺序输出这一局上场的人的名字（正常来讲是队列前两位或者唯一一个人），若有两个则以空格分割。若这一局无人上场，则输出 `Error` 并忽略这条事件。\n\n- `arrive x`：$x$ 到达机厅并且将自己加入队尾，此时 $x$ 不应该在排队，否则输出 `Error` 并忽略这条事件。若该事件成功执行则输出 `OK`。\n\n- `leave x`：$x$ 离开机厅并离开队列。此时 $x$ 应该在排队但不应该在游玩，否则输出 `Error` 并忽略这条事件。若该事件成功执行则输出 `OK`。\n\n你需要维护队列信息，并输出上述事件中要求的输出。", "inputFormat": "第一行一个整数 $n$，表示事件条数。\n\n接下来 $n$ 行，每行表示一条事件。", "outputFormat": "按照题目要求输出 $n$ 行，表示程序对事件的响应。", "hint": "**【样例说明】**\n\n样例 $1$ 中发生了如下的事件：\n\n- 第一次 `start` 时队列并没有任何人，输出 `Error`。\n- `A` 随即加入队列。\n- 第二次 `start` 时仅有 `A` 一个人，所以输出 `A`。\n- `B, C, D` 随即依次加入队列。\n- 第三次 `start` 时 `B, C` 上场。\n- `C` 试图离开，但是他在游玩。所以输出 `Error`。\n- `D` 成功离开。\n- 第四次 `start` 时 `A, B` 上场。\n- `A` 试图加入队列，但是他已经在队列中。输出 `Error`。\n- `D` 重新加入队列。\n- `E` 试图离开，但是他根本不在排队，输出 `Error`。\n- 第五次 `start` 时 `C, D` 上场。\n\n样例 $2$ 中，`A, B, C` 依次入队，操作合法，输出三个 `OK`。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，保证 $n=1$。\n\n对于 $40\\%$ 的数据，保证 $n\\le 2000$。\n\n对于另外 $20\\%$ 的数据，保证没有 `leave` 操作。\n\n对于另外 $20\\%$ 的数据，人名只有可能是单个大写字母。\n\n对于 $100\\%$ 的数据，保证 $1 \\le n\\le 10^5$，人名仅含有大小写字母且长度不超过 $10$。\n\n**本题输入输出量较大，请注意使用合理的输入输出方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "queue", "background": "你说的对，但是舞萌 DX 是一款后面忘了。", "description": "**补充说明：这里的排队和传统的排队有出入。正在游玩的人为队列的前两位，所以正在游玩视为正在排队。**\n\n机厅里有一台游戏机，每次可供最多两人同时游玩。但是来玩的人显然不止两个！这个时候他们就需要排队了，而你需要写一个程序维护这个队列，并在他人游玩结束后通知接下来上场的人。在整个过程中，有以下几种事件可能发生：\n\n- `start`：一局游戏开始。若这不是第一局游戏，则上一局的参与者**在这一局游戏开始前一瞬间**按照原本的顺序回到队尾。此时你应该按在队列中的顺序输出这一局上场的人的名字（正常来讲是队列前两位或者唯一一个人），若有两个则以空格分割。若这一局无人上场，则输出 `Error` 并忽略这条事件。\n\n- `arrive x`：$x$ 到达机厅并且将自己加入队尾，此时 $x$ 不应该在排队，否则输出 `Error` 并忽略这条事件。若该事件成功执行则输出 `OK`。\n\n- `leave x`：$x$ 离开机厅并离开队列。此时 $x$ 应该在排队但不应该在游玩，否则输出 `Error` 并忽略这条事件。若该事件成功执行则输出 `OK`。\n\n你需要维护队列信息，并输出上述事件中要求的输出。", "inputFormat": "第一行一个整数 $n$，表示事件条数。\n\n接下来 $n$ 行，每行表示一条事件。", "outputFormat": "按照题目要求输出 $n$ 行，表示程序对事件的响应。", "hint": "**【样例说明】**\n\n样例 $1$ 中发生了如下的事件：\n\n- 第一次 `start` 时队列并没有任何人，输出 `Error`。\n- `A` 随即加入队列。\n- 第二次 `start` 时仅有 `A` 一个人，所以输出 `A`。\n- `B, C, D` 随即依次加入队列。\n- 第三次 `start` 时 `B, C` 上场。\n- `C` 试图离开，但是他在游玩。所以输出 `Error`。\n- `D` 成功离开。\n- 第四次 `start` 时 `A, B` 上场。\n- `A` 试图加入队列，但是他已经在队列中。输出 `Error`。\n- `D` 重新加入队列。\n- `E` 试图离开，但是他根本不在排队，输出 `Error`。\n- 第五次 `start` 时 `C, D` 上场。\n\n样例 $2$ 中，`A, B, C` 依次入队，操作合法，输出三个 `OK`。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，保证 $n=1$。\n\n对于 $40\\%$ 的数据，保证 $n\\le 2000$。\n\n对于另外 $20\\%$ 的数据，保证没有 `leave` 操作。\n\n对于另外 $20\\%$ 的数据，人名只有可能是单个大写字母。\n\n对于 $100\\%$ 的数据，保证 $1 \\le n\\le 10^5$，人名仅含有大小写字母且长度不超过 $10$。\n\n**本题输入输出量较大，请注意使用合理的输入输出方式。**", "locale": "zh-CN"}}}
{"pid": "P9519", "type": "P", "difficulty": 4, "samples": [["5 5\n3 3 3 3 3\n1 2 3 4 5", "2"], ["5 2\n5 2 6 3 1\n2 5", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "洛谷原创", "O2优化"], "title": "pay", "background": "", "description": "今天是 L 公司发工资的一天。\n\n$n$ 名员工排成一排准备领工资，编号为 $1\\sim n$，第 $i$ 名员工有一个期望快乐值 $a_i$。\n\n老板非常扣，在这 $n$ 名员工中只选择了 $m$ 名员工 $b_1,b_2,\\cdots,b_m$ 发 $k$ 元工资。\n\n员工们都非常具有同理心，不仅自己获得工资时会增加快乐值，当周围的员工获得工资时自己也会增加快乐值。\n\n具体地，当与一名员工 A 距离为 $d$ 的员工获得了工资，A 的快乐值会增加 $\\max(0, k - d)$。特别地，如果 A 本身就获得了工资，A 的快乐值会增加 $k$。\n\n老板希望，你能找到最小的整数 $k$，使得所有员工的快乐值不低于他的期望。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。\n\n第三行 $m$ 个整数 $b_1,b_2,\\cdots,b_m$。", "outputFormat": "一个整数，表示你求出的最小的 $k$。", "hint": "**【样例说明】**\n\n样例 $1$ 中，$k=2$ 时，每个人的快乐值分别为 $3,4,4,4,3$，满足要求。\n\n样例 $2$ 中，$k=5$ 时，每个人的快乐值分别为 $5,7,7,7,7$，满足要求。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，满足 $n=1$。\n\n对于 $30\\%$ 的数据，满足 $n\\le 300$。\n\n对于 $60\\%$ 的数据，满足 $n\\le 5000$。\n\n对于另外 $10\\%$ 的数据，满足 $m=1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le m\\le n\\le 10^6$，$0\\le a_i\\le 10^9$，$1\\le b_i\\le n$ 且 $b_i$ 互不相同。\n\n**本题输入量较大，请注意使用合理的输入方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "pay", "background": "", "description": "今天是 L 公司发工资的一天。\n\n$n$ 名员工排成一排准备领工资，编号为 $1\\sim n$，第 $i$ 名员工有一个期望快乐值 $a_i$。\n\n老板非常扣，在这 $n$ 名员工中只选择了 $m$ 名员工 $b_1,b_2,\\cdots,b_m$ 发 $k$ 元工资。\n\n员工们都非常具有同理心，不仅自己获得工资时会增加快乐值，当周围的员工获得工资时自己也会增加快乐值。\n\n具体地，当与一名员工 A 距离为 $d$ 的员工获得了工资，A 的快乐值会增加 $\\max(0, k - d)$。特别地，如果 A 本身就获得了工资，A 的快乐值会增加 $k$。\n\n老板希望，你能找到最小的整数 $k$，使得所有员工的快乐值不低于他的期望。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。\n\n第三行 $m$ 个整数 $b_1,b_2,\\cdots,b_m$。", "outputFormat": "一个整数，表示你求出的最小的 $k$。", "hint": "**【样例说明】**\n\n样例 $1$ 中，$k=2$ 时，每个人的快乐值分别为 $3,4,4,4,3$，满足要求。\n\n样例 $2$ 中，$k=5$ 时，每个人的快乐值分别为 $5,7,7,7,7$，满足要求。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，满足 $n=1$。\n\n对于 $30\\%$ 的数据，满足 $n\\le 300$。\n\n对于 $60\\%$ 的数据，满足 $n\\le 5000$。\n\n对于另外 $10\\%$ 的数据，满足 $m=1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le m\\le n\\le 10^6$，$0\\le a_i\\le 10^9$，$1\\le b_i\\le n$ 且 $b_i$ 互不相同。\n\n**本题输入量较大，请注意使用合理的输入方式。**", "locale": "zh-CN"}}}
{"pid": "P9520", "type": "P", "difficulty": 6, "samples": [["1\n8\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n2\n3 4\n4 8", "Yes"], ["2\n7\n1 2\n2 3\n3 4\n4 5\n3 6\n6 7\n2\n4 1\n5 7\n4\n1 2\n1 3\n1 4\n3\n2 3\n3 4\n4 2", "Yes\nNo"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2022", "O2优化", "图论建模", "JOISC/JOIST（日本）"], "title": "[JOIST 2022] 监狱 / Jail", "background": "JOIST2022 D1T1", "description": "在 JOI 王国，安保最严格的地方就是 IOI 监狱。IOI 监狱中有 $N$ 个房间，以 $1,\\dots,N$ 编号。其中有 $N-1$ 条通道。第 $i$ $(1\\le i\\le N-1)$ 条通道双向地连接房间 $A_i$ 和 $B_i$。任意两个房间都可以相互到达。\n\nIOI 监狱中有 $M$ 个囚犯，以 $1,\\dots,M$ 编号。第 $j$ $(1\\le j\\le M)$ 个囚犯的卧室和工作室分别是房间 $S_j,T_j$。一个囚犯可能在另一个囚犯的卧室工作。然而，每个房间最多成为一个囚犯的卧室，一个囚犯的工作室。\n\n一天早上，这 $M$ 个囚犯需要从他们的卧室移动到他们的工作室。典狱长 APIO 先生需要按如下方式指示囚犯移动：  \n- **指令**：选择一个囚犯，然后命令他从当前所在的房间移动到一个与该房间有直接连边的房间。为了避免囚犯交流，不允许将囚犯移动到有其他囚犯在的房间。\n\n为了尽早开始工作，APIO 先生想知道，是否存在一种给出任意条指令的方案使得每个囚犯以**最短路径**从卧室到达工作室。\n\n请编写一个程序，在给定如上房间、通道和罪犯的所有信息后判断是否存在满足条件的方案。", "inputFormat": "每个测试数据包含多组测试用例。\n\n第一行一个整数 $Q$，表示这个测试数据包含 $Q$ 组测试用例。\n\n对于每组测试用例：\n\n第一行一个整数 $N$，表示房间个数。\n\n接下来 $N-1$ 行每行两个整数 $A_i,B_i$ 表示通道连接房间的编号。\n\n接下来一行一个整数 $M$ 表示囚犯个数。\n\n接下来 $M$ 行，每行两个整数 $S_i,T_i$ 表示囚犯的卧室和工作室。", "outputFormat": "输出 $Q$ 行，第 $i$ 行表示对于第 $i$ 组测试用例，如果存在一种满足题意的方案，输出 `Yes`，否则输出 `No`。", "hint": "**【样例解释 #1】**\n\n可以通过发送如下指令完成任务：\n\n1. 让囚犯 $2$ 从 $4$ 号房间移动到 $5$ 号房间。\n2. 让囚犯 $1$ 从 $3$ 号房间移动到 $4$ 号房间。\n3. 让囚犯 $2$ 从 $5$ 号房间移动到 $6$ 号房间。\n4. 让囚犯 $2$ 从 $6$ 号房间移动到 $7$ 号房间。\n5. 让囚犯 $2$ 从 $7$ 号房间移动到 $8$ 号房间。\n\n这组样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n这组样例满足子任务 $1,3,4,5,6,7$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $1\\leq Q\\leq 1000$。\n- $1\\leq N\\leq 120000$。\n- $1\\leq A_i\\lt B_i\\leq N$ $(i\\in [1,N-1])$。\n- $2\\leq M\\leq N$。\n- $1\\leq S_i,T_i\\leq N$ $(i\\in [1,M])$。\n- $S_i$ $(i\\in[1,M])$ 互不相同。\n- $T_i$ $(i\\in[1,M])$ 互不相同。\n- $S_j \\ne T_j$ $(j\\in [1, M])$。\n- 任意两个房间之间可以通过给定道路互相到达。\n- 对于所有测试用例，$N$ 的总和不超过 $120000$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$A_i=i,B_i=i+1~(i\\in[1,N-1])$|$5$|\n|$2$|$Q\\leq 20, N\\leq 250, M=2$|$5$|\n|$3$|$Q\\leq 20, N\\leq 250, M\\leq 6$|$16$|\n|$4$|$Q\\leq 20, N\\leq 250, M\\leq 100$|$28$|\n|$5$|$Q\\leq 20, M\\leq 500$|$12$|\n|$6$|任意两个房间之间都可以通过不超过 $20$ 条道路到达。|$11$|\n|$7$|无附加限制|$23$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIST 2022] 监狱 / Jail", "background": "JOIST2022 D1T1", "description": "在 JOI 王国，安保最严格的地方就是 IOI 监狱。IOI 监狱中有 $N$ 个房间，以 $1,\\dots,N$ 编号。其中有 $N-1$ 条通道。第 $i$ $(1\\le i\\le N-1)$ 条通道双向地连接房间 $A_i$ 和 $B_i$。任意两个房间都可以相互到达。\n\nIOI 监狱中有 $M$ 个囚犯，以 $1,\\dots,M$ 编号。第 $j$ $(1\\le j\\le M)$ 个囚犯的卧室和工作室分别是房间 $S_j,T_j$。一个囚犯可能在另一个囚犯的卧室工作。然而，每个房间最多成为一个囚犯的卧室，一个囚犯的工作室。\n\n一天早上，这 $M$ 个囚犯需要从他们的卧室移动到他们的工作室。典狱长 APIO 先生需要按如下方式指示囚犯移动：  \n- **指令**：选择一个囚犯，然后命令他从当前所在的房间移动到一个与该房间有直接连边的房间。为了避免囚犯交流，不允许将囚犯移动到有其他囚犯在的房间。\n\n为了尽早开始工作，APIO 先生想知道，是否存在一种给出任意条指令的方案使得每个囚犯以**最短路径**从卧室到达工作室。\n\n请编写一个程序，在给定如上房间、通道和罪犯的所有信息后判断是否存在满足条件的方案。", "inputFormat": "每个测试数据包含多组测试用例。\n\n第一行一个整数 $Q$，表示这个测试数据包含 $Q$ 组测试用例。\n\n对于每组测试用例：\n\n第一行一个整数 $N$，表示房间个数。\n\n接下来 $N-1$ 行每行两个整数 $A_i,B_i$ 表示通道连接房间的编号。\n\n接下来一行一个整数 $M$ 表示囚犯个数。\n\n接下来 $M$ 行，每行两个整数 $S_i,T_i$ 表示囚犯的卧室和工作室。", "outputFormat": "输出 $Q$ 行，第 $i$ 行表示对于第 $i$ 组测试用例，如果存在一种满足题意的方案，输出 `Yes`，否则输出 `No`。", "hint": "**【样例解释 #1】**\n\n可以通过发送如下指令完成任务：\n\n1. 让囚犯 $2$ 从 $4$ 号房间移动到 $5$ 号房间。\n2. 让囚犯 $1$ 从 $3$ 号房间移动到 $4$ 号房间。\n3. 让囚犯 $2$ 从 $5$ 号房间移动到 $6$ 号房间。\n4. 让囚犯 $2$ 从 $6$ 号房间移动到 $7$ 号房间。\n5. 让囚犯 $2$ 从 $7$ 号房间移动到 $8$ 号房间。\n\n这组样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n这组样例满足子任务 $1,3,4,5,6,7$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $1\\leq Q\\leq 1000$。\n- $1\\leq N\\leq 120000$。\n- $1\\leq A_i\\lt B_i\\leq N$ $(i\\in [1,N-1])$。\n- $2\\leq M\\leq N$。\n- $1\\leq S_i,T_i\\leq N$ $(i\\in [1,M])$。\n- $S_i$ $(i\\in[1,M])$ 互不相同。\n- $T_i$ $(i\\in[1,M])$ 互不相同。\n- $S_j \\ne T_j$ $(j\\in [1, M])$。\n- 任意两个房间之间可以通过给定道路互相到达。\n- 对于所有测试用例，$N$ 的总和不超过 $120000$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$A_i=i,B_i=i+1~(i\\in[1,N-1])$|$5$|\n|$2$|$Q\\leq 20, N\\leq 250, M=2$|$5$|\n|$3$|$Q\\leq 20, N\\leq 250, M\\leq 6$|$16$|\n|$4$|$Q\\leq 20, N\\leq 250, M\\leq 100$|$28$|\n|$5$|$Q\\leq 20, M\\leq 500$|$12$|\n|$6$|任意两个房间之间都可以通过不超过 $20$ 条道路到达。|$11$|\n|$7$|无附加限制|$23$|", "locale": "zh-CN"}}}
{"pid": "P9521", "type": "P", "difficulty": 6, "samples": [["2 2\n1 3\n2 5", "5"], ["5 5\n7 1 5 2 8\n7 2 4 1 6", "20"], ["4 6\n454863204 543362989 866044086 813602010\n71574269 17945210 688720933 392135202 38174709 168241720", "2737473954"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2022", "O2优化", "凸包", "双指针 two-pointer", "JOISC/JOIST（日本）"], "title": "[JOIST 2022] 京都观光 / Sightseeing in Kyoto", "background": "JOISC2022 D1T2", "description": "京都是世界级的观光圣地，它也被称为网格城市。你来到了京都观光，并且你计划步行游览一个著名的景点。本题中，我们考虑如下的简化问题。\n\n在城市中，有 $H$ 条东西方向的街道和 $W$ 条南北方向的街道，因此城市是一个 $(H-1)\\times(W-1)$ 的网格。从北数第 $i$ 条街道和从西数第 $j$ 条街道的交叉点记作路口 $(i,j)$。\n\n不同的街道可能有不同的材质、宽度和拥挤程度，因此你的步行速度有可能不同。对于每条街道，你的步行速度如下：\n\n- 如果你在从北数第 $i$ 条街道上行走单位长度，需要 $A_i$ 秒。即从路口 $(i,c)~\\left(i\\in[1,H],c\\in[1,W)\\right)$ 走到路口 $(i,c+1)$ 需要 $A_i$ 秒。\n\n- 如果你在从西数第 $j$ 条街道上行走单位长度，需要 $B_j$ 秒。即从路口 $(c,j)~\\left(c\\in[1,H),j\\in[1,W]\\right)$ 走到路口 $(c+1,j)$ 需要 $B_j$ 秒。\n\n你现在在路口 $(1,1)$，你想前往 $(H,W)$，你必须沿着街道行走，并且你不希望走远路，即你不会向北或向西走。\n\n你希望尽早到达目的地，请你求出，在给定的条件下，从路口 $(1,1)$ 前往路口 $(H,W)$ 所需的最少时间。", "inputFormat": "第一行两个整数 $H,W$ 表示街道条数。\n\n第二行 $H$ 个整数，第 $i$ 个整数 $A_i$ 表示从北数第 $i$ 条东西方向街道的步行速度。\n\n第三行 $W$ 个整数，第 $i$ 个整数 $B_i$ 表示从西数第 $i$ 条南北方向街道的步行速度。", "outputFormat": "一行一个整数，表示所需的最小步行时间。", "hint": "**【样例解释 #1】**\n\n有两条从 $(1,1)$ 到 $(2,2)$ 的路线：\n\n1. $(1,1)\\rightarrow(1,2)\\rightarrow(2,2)$，所需时间为 $1+5=6$ 秒。\n2. $(1,1)\\rightarrow(2,1)\\rightarrow(2,2)$，所需时间为 $2+3=5$ 秒。\n\n因此最少花费时间为 $5$ 秒。\n\n这个样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n最优路线如下图：\n\n![样例解释](https://cdn.luogu.com.cn/upload/image_hosting/mqsalajm.png)\n\n这个样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\n这个样例满足子任务 $1,3$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $2\\leq H,W\\leq 100000$。\n- $1\\leq A_i\\leq 10^9$ $(i\\in[1,H])$。\n- $1\\leq B_i\\leq 10^9$ $(i\\in[1,W])$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$H,W\\leq 1000$|$10$|\n|$2$|$A_i\\leq 1000, B_i\\leq 1000$|$30$|\n|$3$|无附加限制|$60$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIST 2022] 京都观光 / Sightseeing in Kyoto", "background": "JOISC2022 D1T2", "description": "京都是世界级的观光圣地，它也被称为网格城市。你来到了京都观光，并且你计划步行游览一个著名的景点。本题中，我们考虑如下的简化问题。\n\n在城市中，有 $H$ 条东西方向的街道和 $W$ 条南北方向的街道，因此城市是一个 $(H-1)\\times(W-1)$ 的网格。从北数第 $i$ 条街道和从西数第 $j$ 条街道的交叉点记作路口 $(i,j)$。\n\n不同的街道可能有不同的材质、宽度和拥挤程度，因此你的步行速度有可能不同。对于每条街道，你的步行速度如下：\n\n- 如果你在从北数第 $i$ 条街道上行走单位长度，需要 $A_i$ 秒。即从路口 $(i,c)~\\left(i\\in[1,H],c\\in[1,W)\\right)$ 走到路口 $(i,c+1)$ 需要 $A_i$ 秒。\n\n- 如果你在从西数第 $j$ 条街道上行走单位长度，需要 $B_j$ 秒。即从路口 $(c,j)~\\left(c\\in[1,H),j\\in[1,W]\\right)$ 走到路口 $(c+1,j)$ 需要 $B_j$ 秒。\n\n你现在在路口 $(1,1)$，你想前往 $(H,W)$，你必须沿着街道行走，并且你不希望走远路，即你不会向北或向西走。\n\n你希望尽早到达目的地，请你求出，在给定的条件下，从路口 $(1,1)$ 前往路口 $(H,W)$ 所需的最少时间。", "inputFormat": "第一行两个整数 $H,W$ 表示街道条数。\n\n第二行 $H$ 个整数，第 $i$ 个整数 $A_i$ 表示从北数第 $i$ 条东西方向街道的步行速度。\n\n第三行 $W$ 个整数，第 $i$ 个整数 $B_i$ 表示从西数第 $i$ 条南北方向街道的步行速度。", "outputFormat": "一行一个整数，表示所需的最小步行时间。", "hint": "**【样例解释 #1】**\n\n有两条从 $(1,1)$ 到 $(2,2)$ 的路线：\n\n1. $(1,1)\\rightarrow(1,2)\\rightarrow(2,2)$，所需时间为 $1+5=6$ 秒。\n2. $(1,1)\\rightarrow(2,1)\\rightarrow(2,2)$，所需时间为 $2+3=5$ 秒。\n\n因此最少花费时间为 $5$ 秒。\n\n这个样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n最优路线如下图：\n\n![样例解释](https://cdn.luogu.com.cn/upload/image_hosting/mqsalajm.png)\n\n这个样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\n这个样例满足子任务 $1,3$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $2\\leq H,W\\leq 100000$。\n- $1\\leq A_i\\leq 10^9$ $(i\\in[1,H])$。\n- $1\\leq B_i\\leq 10^9$ $(i\\in[1,W])$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$H,W\\leq 1000$|$10$|\n|$2$|$A_i\\leq 1000, B_i\\leq 1000$|$30$|\n|$3$|无附加限制|$60$|", "locale": "zh-CN"}}}
{"pid": "P9522", "type": "P", "difficulty": 6, "samples": [["3 2\n1 3\n3 2", "5876"], ["5 6\n1 2\n1 5\n2 4\n5 4\n5 3\n4 3", "656981"], ["10 9\n3 6\n4 6\n6 7\n7 9\n10 8\n9 8\n8 5\n5 2\n5 1", "206289833\n"], ["7 6\n1 3\n3 4\n4 6\n6 5\n5 7\n7 2", "7125651"], ["5 4\n2 4\n4 3\n3 5\n5 1", "61451"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOIST 2022] 错误拼写 / Misspelling", "background": "JOISC2022 D1T3", "description": "从前，K 总统有着一个长度为 $N$ 的字符串 $S$，仅由小写字母组成。然而，他忘记了它。  \n他还有一个词典，其中包含了各式各样的错误拼写。而他曾看过那本词典，现在他确认到 $S$ 满足以下条件：\n\n- 令 $T_i$ $(1\\le i\\le N)$ 为 $S$ 删去第 $i$ 个字符并将前后字符相接所得的字符串。对于每个 $j$ $(1\\le j\\le M)$ 满足 $T_{A_j} \\le T_{B_j}$。\n\n其中 $T_{A_j} \\le T_{B_j}$ 表示 $T_{A_j}$ 等于 $T_{B_j}$ 或 $T_{A_j}$ 在字典序上小于 $T_{B_j}$。\n\n请写一个程序，对于 K 总统给定的如上关于 $S$ 的信息，输出可能的 $S$ 的个数，对 $10^9+7$ 取模。", "inputFormat": "第一行，两个正整数 $N,M$，表示 $S$ 的长度与限制的个数。\n\n以下 $M$ 行，其中第 $j$ $(1 \\le j \\le M)$ 行包含两个正整数 $A_j, B_j$，表示一条限制。", "outputFormat": "一行一个非负整数，表示可能的 $S$ 的个数对 $10^9+7$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n举例说明，若 $S=\\texttt{bab}$，则 $T_1 = \\texttt{ab}, T_2 = \\texttt{bb}, T_3 = \\texttt{ba}$。其满足 $T_1 \\le T_3$ 和 $T_3 \\le T_2$。所以该 $S$ 是合法的。  \n可以证明，总共有 $5876$ 种合法的 $S$。因此，输出 $5876$。\n\n另一方面，若 $S=\\texttt{aab}$，则 $T_1 = \\texttt{ab}, T_2 = \\texttt{ab}, T_3 = \\texttt{aa}$。其不满足 $T_1 \\le T_3$。所以该 $S$ 不合法。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n该样例满足子任务 $1,2,4,5$ 的限制。\n\n**【样例解释 #3】**\n\n取模前的结果为 $824\\,206\\,295\\,601$，所以输出 $206\\,289\\,833$。\n\n该样例满足子任务 $1,2,4,5$ 的限制。\n\n**【样例解释 #4】**\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #5】**\n\n该样例满足所有子任务的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $2 \\le N \\le 500\\,000$。  \n- $1 \\le M \\le 500\\,000$。\n- $1 \\le A_j,B_j \\le N$ $(1 \\le j \\le M)$。\n- $A_j\\ne B_j$ $(1 \\le j \\le M)$。\n- $(A_j,B_j)\\ne(A_k,B_k)$ $(1 \\le j < k \\le M)$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$N \\le 10$|$8$|\n|$2$|$N \\le 200$|$20$|\n|$3$|存在 $\\{1,2,\\dots,N\\}$ 的排列 $P$ 满足 $A_j = P_j, B_j = P_{j+1}$ $(1 \\le j \\le M=N-1)$|$29$|\n|$4$|$N \\le 20\\,000$|$32$|\n|$5$|无附加限制|$11$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIST 2022] 错误拼写 / Misspelling", "background": "JOISC2022 D1T3", "description": "从前，K 总统有着一个长度为 $N$ 的字符串 $S$，仅由小写字母组成。然而，他忘记了它。  \n他还有一个词典，其中包含了各式各样的错误拼写。而他曾看过那本词典，现在他确认到 $S$ 满足以下条件：\n\n- 令 $T_i$ $(1\\le i\\le N)$ 为 $S$ 删去第 $i$ 个字符并将前后字符相接所得的字符串。对于每个 $j$ $(1\\le j\\le M)$ 满足 $T_{A_j} \\le T_{B_j}$。\n\n其中 $T_{A_j} \\le T_{B_j}$ 表示 $T_{A_j}$ 等于 $T_{B_j}$ 或 $T_{A_j}$ 在字典序上小于 $T_{B_j}$。\n\n请写一个程序，对于 K 总统给定的如上关于 $S$ 的信息，输出可能的 $S$ 的个数，对 $10^9+7$ 取模。", "inputFormat": "第一行，两个正整数 $N,M$，表示 $S$ 的长度与限制的个数。\n\n以下 $M$ 行，其中第 $j$ $(1 \\le j \\le M)$ 行包含两个正整数 $A_j, B_j$，表示一条限制。", "outputFormat": "一行一个非负整数，表示可能的 $S$ 的个数对 $10^9+7$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n举例说明，若 $S=\\texttt{bab}$，则 $T_1 = \\texttt{ab}, T_2 = \\texttt{bb}, T_3 = \\texttt{ba}$。其满足 $T_1 \\le T_3$ 和 $T_3 \\le T_2$。所以该 $S$ 是合法的。  \n可以证明，总共有 $5876$ 种合法的 $S$。因此，输出 $5876$。\n\n另一方面，若 $S=\\texttt{aab}$，则 $T_1 = \\texttt{ab}, T_2 = \\texttt{ab}, T_3 = \\texttt{aa}$。其不满足 $T_1 \\le T_3$。所以该 $S$ 不合法。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n该样例满足子任务 $1,2,4,5$ 的限制。\n\n**【样例解释 #3】**\n\n取模前的结果为 $824\\,206\\,295\\,601$，所以输出 $206\\,289\\,833$。\n\n该样例满足子任务 $1,2,4,5$ 的限制。\n\n**【样例解释 #4】**\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #5】**\n\n该样例满足所有子任务的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $2 \\le N \\le 500\\,000$。  \n- $1 \\le M \\le 500\\,000$。\n- $1 \\le A_j,B_j \\le N$ $(1 \\le j \\le M)$。\n- $A_j\\ne B_j$ $(1 \\le j \\le M)$。\n- $(A_j,B_j)\\ne(A_k,B_k)$ $(1 \\le j < k \\le M)$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$N \\le 10$|$8$|\n|$2$|$N \\le 200$|$20$|\n|$3$|存在 $\\{1,2,\\dots,N\\}$ 的排列 $P$ 满足 $A_j = P_j, B_j = P_{j+1}$ $(1 \\le j \\le M=N-1)$|$29$|\n|$4$|$N \\le 20\\,000$|$32$|\n|$5$|无附加限制|$11$|", "locale": "zh-CN"}}}
{"pid": "P9523", "type": "P", "difficulty": 6, "samples": [["11\nmississippi\n10\n5\n2", "88"], ["16\naaaaaaaaaaaaaaaa\n1\n1\n1", "9"], ["18\naababbbababbbaabbb\n1000000000\n100000\n10000000", "8060200000"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["字符串", "2022", "后缀自动机 SAM", "O2优化", "区间 DP", "动态规划优化", "哈希 hashing", "JOISC/JOIST（日本）"], "title": "[JOIST 2022] 复制粘贴 3 / Copy and Paste 3", "background": "JOISC2022 D2T1", "description": "JOI 公司是一家以“没啥用发明”而闻名的公司。最近，JOI 公司开发了一款名为“没啥用编辑器”的编辑器。\n\n在这个编辑器中，可以执行如下几种操作来输入某个字符串，设 $X$ 为屏幕上的字符串，$Y$ 为剪切板中的字符串，初始均为空串：\n\n- 操作 A：输入字符 $c$，即将 $X$ 更新为 $X+c$。\n- 操作 B：选择所有字符并剪切，即将 $Y$ 更新为 $X$，并将 $X$ 置为空串。\n- 操作 C：将剪切板中的字符串粘贴到当前字符串末尾，即将 $X$ 更新为 $X+Y$。\n\n对于字符串或字符 $x,y$，$x+y$ 表示将 $x$ 和 $y$ 顺次拼接得到的结果。使用一次操作 A,B,C 分别要花费 $A,B,C$ 单位时间。\n\n你安装了“没啥用编辑器”，并想要尽可能快地输入一个长度为 $N$ 的字符串 $S$。\n\n你需要计算出最少需要花费多少时间。", "inputFormat": "第一行一个整数 $N$ 表示字符串长度。\n\n第二行一个长度为 $N$ 的字符串 $S$ 表示要输入的字符串。\n\n第三行一个整数 $A$ 表示操作 A 的代价。\n\n第四行一个整数 $B$ 表示操作 B 的代价。\n\n第五行一个整数 $C$ 表示操作 C 的代价。", "outputFormat": "一行一个整数表示输入字符串 $S$ 最少要多少单位时间。", "hint": "**【样例解释 #1】**\n\n以下是一组最优操作：\n\n| 轮次 | 操作 | 解释 | $X$ | $Y$ | 代价 | 总时间 |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n| - | - | - | `\"\"` | `\"\"` | - | $0$ |\n| $1$ | 操作 A | 输入字符 | `\"s\"` | `\"\"` | $10$ | $10$ |\n| $2$ | 操作 B | 全选并剪切 |` \"\"` | `\"s\"`| $5$ | $15$ |\n| $3$ | 操作 C | 在尾部粘贴 | `\"s\"` | `\"s\"`| $2$ | $17$ |\n| $4$ | 操作 C | 在尾部粘贴 | `\"ss\"` | `\"s\"`| $2$ | $19$ |\n| $5$ | 操作 A | 输入字符 | `\"ssi\"` | `\"s\"`| $10$ | $29$ |\n| $6$ | 操作 B | 全选并剪切 |` \"\"` | `\"ssi\"`| $5$ | $34$ |\n| $7$ | 操作 A | 输入字符 | `\"m\"` | `\"ssi\"`| $10$ | $44$ |\n| $8$ | 操作 A | 输入字符 | `\"mi\"` | `\"ssi\"`| $10$ | $54$ |\n| $9$ | 操作 C | 在尾部粘贴 | `\"missi\"` | `\"ssi\"`| $2$ | $56$ |\n| $10$ | 操作 C | 在尾部粘贴 | `\"mississi\"` | `\"ssi\"`| $2$ | $58$ |\n| $11$ | 操作 A | 输入字符 | `\"mississip\"` | `\"ssi\"`| $10$ | $68$ |\n| $12$ | 操作 A | 输入字符 | `\"mississipp\"` | `\"ssi\"`| $10$ | $78$ |\n| $13$ | 操作 A | 输入字符 | `\"mississippi\"` | `\"ssi\"`| $10$ | $88$ |\n\n这组样例满足子任务 $3,4,5,6$ 的限制。\n\n**【样例解释 #2】**\n\n一组最优策略如下：\n\n| 轮次 | 操作 | 解释 | $X$ | $Y$ | 代价 | 总时间 |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n| - | - | - | `\"\"` | `\"\"` | - | $0$ |\n| $1$ | 操作 A | 输入字符 | ` \"a\"` | `\"\"` | $1$ | $1$ |\n| $2$ | 操作 A | 输入字符 | ` \"aa\"` | `\"\"` | $1$ | $2$ |\n| $3$ | 操作 A | 输入字符 | ` \"aaa\"` | `\"\"` | $1$ | $3$ |\n| $4$ | 操作 A | 输入字符 | ` \"aaaa\"` | `\"\"` | $1$ | $4$ |\n| $5$ | 操作 B | 全选并剪切 | `\"\"` | `\"aaaa\"` | $1$ | $5$ |\n| $6$ | 操作 C | 在尾部粘贴 | `\"aaaa\"` | `\"aaaa\"` | $1$ | $6$ |\n| $7$ | 操作 C | 在尾部粘贴 | `\"aaaaaaaa\"` | `\"aaaa\"` | $1$ | $7$ |\n| $8$ | 操作 C | 在尾部粘贴 | `\"aaaaaaaaaaaa\"` | `\"aaaa\"` | $1$ | $8$ |\n| $9$ | 操作 C | 在尾部粘贴 | `\"aaaaaaaaaaaaaaaa\"` | `\"aaaa\"` | $1$ | $9$ |\n\n这组样例满足子任务 $2,3,4,5,6$ 的限制。\n\n**【样例解释 #3】**\n\n这组样例满足子任务 $3,4,5,6$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $1\\leq N\\leq 2500$\n- $S$ 是一个长度为 $N$ 的小写字母串。\n- $1\\leq A,B,C\\leq 10^9$\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分数|\n|:-:|:-:|:-:|\n|$1$|$N=3$|$1$|\n|$2$|$S$ 只包含字符 $\\texttt a$|$5$|\n|$3$|$N\\le 30$|$14$|\n|$4$|$N\\le 200$|$10$|\n|$5$|$N \\le 1000$|$32$|\n|$6$|无附加限制|$38$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIST 2022] 复制粘贴 3 / Copy and Paste 3", "background": "JOISC2022 D2T1", "description": "JOI 公司是一家以“没啥用发明”而闻名的公司。最近，JOI 公司开发了一款名为“没啥用编辑器”的编辑器。\n\n在这个编辑器中，可以执行如下几种操作来输入某个字符串，设 $X$ 为屏幕上的字符串，$Y$ 为剪切板中的字符串，初始均为空串：\n\n- 操作 A：输入字符 $c$，即将 $X$ 更新为 $X+c$。\n- 操作 B：选择所有字符并剪切，即将 $Y$ 更新为 $X$，并将 $X$ 置为空串。\n- 操作 C：将剪切板中的字符串粘贴到当前字符串末尾，即将 $X$ 更新为 $X+Y$。\n\n对于字符串或字符 $x,y$，$x+y$ 表示将 $x$ 和 $y$ 顺次拼接得到的结果。使用一次操作 A,B,C 分别要花费 $A,B,C$ 单位时间。\n\n你安装了“没啥用编辑器”，并想要尽可能快地输入一个长度为 $N$ 的字符串 $S$。\n\n你需要计算出最少需要花费多少时间。", "inputFormat": "第一行一个整数 $N$ 表示字符串长度。\n\n第二行一个长度为 $N$ 的字符串 $S$ 表示要输入的字符串。\n\n第三行一个整数 $A$ 表示操作 A 的代价。\n\n第四行一个整数 $B$ 表示操作 B 的代价。\n\n第五行一个整数 $C$ 表示操作 C 的代价。", "outputFormat": "一行一个整数表示输入字符串 $S$ 最少要多少单位时间。", "hint": "**【样例解释 #1】**\n\n以下是一组最优操作：\n\n| 轮次 | 操作 | 解释 | $X$ | $Y$ | 代价 | 总时间 |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n| - | - | - | `\"\"` | `\"\"` | - | $0$ |\n| $1$ | 操作 A | 输入字符 | `\"s\"` | `\"\"` | $10$ | $10$ |\n| $2$ | 操作 B | 全选并剪切 |` \"\"` | `\"s\"`| $5$ | $15$ |\n| $3$ | 操作 C | 在尾部粘贴 | `\"s\"` | `\"s\"`| $2$ | $17$ |\n| $4$ | 操作 C | 在尾部粘贴 | `\"ss\"` | `\"s\"`| $2$ | $19$ |\n| $5$ | 操作 A | 输入字符 | `\"ssi\"` | `\"s\"`| $10$ | $29$ |\n| $6$ | 操作 B | 全选并剪切 |` \"\"` | `\"ssi\"`| $5$ | $34$ |\n| $7$ | 操作 A | 输入字符 | `\"m\"` | `\"ssi\"`| $10$ | $44$ |\n| $8$ | 操作 A | 输入字符 | `\"mi\"` | `\"ssi\"`| $10$ | $54$ |\n| $9$ | 操作 C | 在尾部粘贴 | `\"missi\"` | `\"ssi\"`| $2$ | $56$ |\n| $10$ | 操作 C | 在尾部粘贴 | `\"mississi\"` | `\"ssi\"`| $2$ | $58$ |\n| $11$ | 操作 A | 输入字符 | `\"mississip\"` | `\"ssi\"`| $10$ | $68$ |\n| $12$ | 操作 A | 输入字符 | `\"mississipp\"` | `\"ssi\"`| $10$ | $78$ |\n| $13$ | 操作 A | 输入字符 | `\"mississippi\"` | `\"ssi\"`| $10$ | $88$ |\n\n这组样例满足子任务 $3,4,5,6$ 的限制。\n\n**【样例解释 #2】**\n\n一组最优策略如下：\n\n| 轮次 | 操作 | 解释 | $X$ | $Y$ | 代价 | 总时间 |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n| - | - | - | `\"\"` | `\"\"` | - | $0$ |\n| $1$ | 操作 A | 输入字符 | ` \"a\"` | `\"\"` | $1$ | $1$ |\n| $2$ | 操作 A | 输入字符 | ` \"aa\"` | `\"\"` | $1$ | $2$ |\n| $3$ | 操作 A | 输入字符 | ` \"aaa\"` | `\"\"` | $1$ | $3$ |\n| $4$ | 操作 A | 输入字符 | ` \"aaaa\"` | `\"\"` | $1$ | $4$ |\n| $5$ | 操作 B | 全选并剪切 | `\"\"` | `\"aaaa\"` | $1$ | $5$ |\n| $6$ | 操作 C | 在尾部粘贴 | `\"aaaa\"` | `\"aaaa\"` | $1$ | $6$ |\n| $7$ | 操作 C | 在尾部粘贴 | `\"aaaaaaaa\"` | `\"aaaa\"` | $1$ | $7$ |\n| $8$ | 操作 C | 在尾部粘贴 | `\"aaaaaaaaaaaa\"` | `\"aaaa\"` | $1$ | $8$ |\n| $9$ | 操作 C | 在尾部粘贴 | `\"aaaaaaaaaaaaaaaa\"` | `\"aaaa\"` | $1$ | $9$ |\n\n这组样例满足子任务 $2,3,4,5,6$ 的限制。\n\n**【样例解释 #3】**\n\n这组样例满足子任务 $3,4,5,6$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $1\\leq N\\leq 2500$\n- $S$ 是一个长度为 $N$ 的小写字母串。\n- $1\\leq A,B,C\\leq 10^9$\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分数|\n|:-:|:-:|:-:|\n|$1$|$N=3$|$1$|\n|$2$|$S$ 只包含字符 $\\texttt a$|$5$|\n|$3$|$N\\le 30$|$14$|\n|$4$|$N\\le 200$|$10$|\n|$5$|$N \\le 1000$|$32$|\n|$6$|无附加限制|$38$|", "locale": "zh-CN"}}}
{"pid": "P9524", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2022", "交互题", "Special Judge", "通信题", "JOISC/JOIST（日本）"], "title": "[JOIST 2022] 飞机旅行 / Flights", "background": "请使用 C++ 20 提交。\n\n**不要**引入头文件，并在文件头加入以下内容：\n\n```cpp\nvoid SetID(int, int);\n```", "description": "\n\n在 JOI 共和国中，有 $N$ 个机场，编号从 $0$ 到 $N - 1$。有 $N - 1$ 条航线，编号从 $0$ 到 $N - 2$。航线 $i$（$0 \\le i \\le N - 2$）双向连接机场 $U_i$ 与机场 $V_i$。通过若干条航线相连，可以从任意一个机场到达任意另一个机场。对每个机场，连接它与其他机场的航线数量至多为 $3$。\n\nBenjamin 计划在 JOI 共和国旅行。在旅程的最后一天，他想到达温泉所在的机场。游乐园位于机场 $x$，温泉位于机场 $y$。由于 Benjamin 对航线一无所知，他将与航空公司的工作人员 Ali 沟通。Benjamin 想知道：从游乐园所在的机场出发，到达温泉所在的机场，最少需要乘坐多少条航线。Ali 掌握航线信息，但 Benjamin 并不知道自己应当乘坐哪些航线。\n\n1. Ali 为每个机场设置一个 **ID 码**。ID 码是介于 $0$ 和 $2N + 19$（含）之间的整数。\n2. Benjamin 得到游乐园所在机场的 ID 码 $X$，以及温泉所在机场的 ID 码 $Y$。\n3. Benjamin 向 Ali 发送一封电子邮件。该邮件是一串长度 **恰好** 等于 $20$ 的字符串，字符串的每个字符均为 $0$ 或 $1$。\n4. Ali 给 Benjamin 回一封信。该信是一串长度在 $1$ 到 $300\\,000$（含）之间的字符串，字符串的每个字符均为 $0$ 或 $1$。\n\n请编写程序，实现航空公司工作人员 Ali 与旅客 Benjamin 的策略。注意：在第 $2$ 步中，Benjamin 能得到游乐园与温泉所在机场的 ID 码 $X, Y$，**然而 Benjamin 不能获得机场编号 $x, y$**。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jd1zwpzu.png)\n\n### 实现细节\n\n你需要提交两个文件。\n\n#### `Ali.cpp`\n\n该文件应实现 Ali 的策略，并实现下述两个函数。程序应使用预处理指令 `#include` 引入 `Ali.h`。\n\n- `void Init(int N, std::vector<int> U, std::vector<int> V)`  \n  该函数用于为每个机场设置 ID 码（见「评分」中的场景说明），每个场景调用 **恰好一次**。\n  - 参数 $N$ 为 JOI 共和国中的机场数量。\n  - 参数 $U, V$ 为长度为 $N - 1$ 的数组，即 $U[i], V[i]$ 分别是航线 $i$（$0 \\le i \\le N - 2$）连接的机场 $U_i, V_i$。\n- `std::string SendA(std::string S)`  \n  该函数实现 Ali 给 Benjamin 的回信策略（见「评分」中的场景说明），在调用 `SendB`（见下文）之后、每个场景调用 **恰好一次**。\n  - 参数 $S$ 是长度为 $20$ 的字符串，即 Benjamin 发给 Ali 的电子邮件。\n  - 函数 `SendA` 应返回一个字符串，即 Ali 给 Benjamin 的回信。\n  - 返回值的长度必须在 $1$ 到 $300\\,000$（含）之间。若不满足，则判为 **Wrong Answer [5]**。\n  - 返回值的每个字符必须为 $0$ 或 $1$。若不满足，则判为 **Wrong Answer [6]**。\n\n对每次调用 `Init`，下述函数必须对每个机场调用一次，总计调用 $N$ 次：\n\n- `void SetID(int p, int value)`  \n  - 参数 $p$ 表示为机场 $p$ 设置 ID 码。必须满足 $0 \\le p \\le N - 1$。若不满足，则判为 **Wrong Answer [1]**。\n  - 参数 `value` 是 Ali 指定的该机场的 ID 码。必须满足 $0 \\le value \\le 2N + 19$。若不满足，则判为 **Wrong Answer [2]**。\n  - 不允许对同一个 $p$ 调用多次 `SetID`。若不满足，则判为 **Wrong Answer [3]**。\n  - 当 `Init` 结束时，`SetID` 的调用次数应为 $N$。若不满足，则判为 **Wrong Answer [4]**。\n\n一旦某次 `SetID` 调用被判为 Wrong Answer，程序将立即终止。\n\n#### `Benjamin.cpp`\n\n该文件应实现 Benjamin 的策略，并实现下述两个函数。程序应使用预处理指令 `#include` 引入 `Benjamin.h`。\n\n- `std::string SendB(int N, int X, int Y)`  \n  该函数实现 Benjamin 发给 Ali 的电子邮件策略（见「评分」中的场景说明），在 `Init` 调用之后、每个场景调用 **恰好一次**。\n  - 参数 $N$ 为 JOI 共和国中的机场数量。\n  - 参数 $X$ 为游乐园所在机场的 ID 码。\n  - 参数 $Y$ 为温泉所在机场的 ID 码。\n  - 函数 `SendB` 应返回 Benjamin 发给 Ali 的邮件字符串。\n  - 若返回值不是长度为 $20$ 的字符串，则判为 **Wrong Answer [7]**。\n  - 若返回值的任一字符不是 $0$ 或 $1$，则判为 **Wrong Answer [8]**。\n- `int Answer(std::string T)`  \n  该函数应计算从机场 $x$ 到机场 $y$ 的最少乘坐航线数（见「评分」中的场景说明），在 `SendA` 调用之后、每个场景调用 **恰好一次**。\n  - 参数 $T$ 为 Ali 发给 Benjamin 的回信字符串，长度在 $1$ 到 $300\\,000$（含）之间。\n  - 函数应返回从机场 $x$ 到机场 $y$ 所需的最少航线数量。\n\n### 重要注意事项\n\n- 程序可以实现其他内部使用的函数，或使用全局变量。提交的文件将与评测器一同编译，组成单个可执行文件。为避免与其他文件冲突，所有全局变量与内部函数都应声明在匿名命名空间中。评测时将分别作为 Ali 与 Benjamin 两个进程执行。Ali 进程与 Benjamin 进程 **不能共享** 全局变量。\n- 程序 **不得** 使用标准输入与标准输出。程序 **不得** 通过任何方式与其他文件通信。但你可以向标准错误输出调试信息。\n\n### 评分\n\n一个测试用例由 $Q$ 个场景组成，编号为 $0$ 到 $Q - 1$。每个场景给定如下数据（取值范围见「约束」）：\n\n- JOI 共和国的机场数量 $N$。\n- 游乐园所在的机场编号 $x$。\n- 温泉所在的机场编号 $y$。\n- 航线信息 $(U_0, V_0), (U_1, V_1), \\dots, (U_{N - 2}, V_{N - 2})$。\n\n对每个场景，依次调用 `Init`、`SendB`、`SendA`、`Answer`。你的程序应在这些调用中使用合法参数并返回合法值。调用顺序如下：\n\n1. 对 $k = 0, 1, \\dots, Q - 1$，依次执行步骤 $2$–$5$。\n2. 调用 `Init`，参数按场景 $k$ 的「实现细节」说明设置。\n3. 调用 `SendB`，参数按场景 $k$ 的「实现细节」说明设置。\n4. 调用 `SendA`，参数按场景 $k$ 的「实现细节」说明设置。\n5. 调用 `Answer`，参数按场景 $k$ 的「实现细节」说明设置。\n\n若程序在这些过程中任一处被判为 Wrong Answer，程序将立即终止，并视为未通过该测试用例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sfw8wp0j.png)\n\n### 编译与本地测试\n\n你可以从竞赛网页下载包含样例评测器的压缩包，用于本地测试。压缩包中也包含你程序的样例源文件。\n\n样例评测器文件名为 `grader.cpp`。为测试你的程序，请将 `grader.cpp`、`Ali.cpp`、`Benjamin.cpp`、`Ali.h`、`Benjamin.h` 放在同一目录下，并运行以下命令进行编译：\n\n```\ng++ -std=gnu++17 -O2 -o grader grader.cpp Ali.cpp Benjamin.cpp\n```\n\n若编译成功，将生成可执行文件 `grader`。\n\n注意：实际评测器与样例评测器不同。样例评测器作为单进程执行，从标准输入读取数据并向标准输出写出结果。", "inputFormat": "\n样例评测器从标准输入读取如下数据。所有输入值均为整数。\n\n> $Q$  \n>（场景 $0$ 的输入）  \n>（场景 $1$ 的输入）  \n>$\\vdots$  \n>（场景 $Q - 1$ 的输入）\n\n每个场景的输入格式如下：\n\n> $N$ $x$ $y$  \n> $U_0$ $V_0$  \n> $U_1$ $V_1$  \n>$\\vdots$  \n> $U_{N - 2}$ $V_{N - 2}$", "outputFormat": "\n如果程序被判为 Wrong Answer [1]–[8] 中的任意一种，样例评测器会输出其类型（引号仅为说明）：“Wrong Answer [1]”。\n\n否则，对每个场景，它会输出函数 `Answer` 的返回值以及 Ali 发给 Benjamin 的字符串的最大长度。样例评测器 **不会** 检查 `Answer` 的返回值是否正确。\n\n```\nScenario 0: Your Answer = 3\nScenario 1: Your Answer = 1\nScenario 2: Your Answer = 4\nScenario 3: Your Answer = 1\nScenario 4: Your Answer = 5\nAccepted: Maximum Length = 24\n```\n\n如果你的程序同时满足多种 Wrong Answer 的判定条件，样例评测器只报告其中一种。此外，即使你的程序在后续场景被判为 Wrong Answer [1]–[8]，只要在第一个场景未被判错，样例评测器也可能先输出如下中间结果：\n\n```\nScenario 0: Your Answer = 3\nScenario 1: Your Answer = 1\nScenario 2: Your Answer = 4\nWrong Answer [8]\n```", "hint": "\n#### 约束\n- $1 \\le Q \\le 50$。\n- $2 \\le N \\le 10\\,000$。\n- $0 \\le U_i < V_i \\le N - 1$（$0 \\le i \\le N - 2$）。\n- $0 \\le x \\le N - 1$。\n- $0 \\le y \\le N - 1$。\n- $x \\ne y$。\n- 通过若干条航线相连，可以从任意一个机场到达任意另一个机场。\n- 对每个机场，连接它与其他机场的航线数量至多为 $3$。\n\n#### 子任务\n1.（$15$ 分）$Q = 1$。  \n2.（$85$ 分）$Q \\ge 2$。\n\n#### 子任务 1 的评分\n若你的程序在子任务 $1$ 的任意场景中被判为 Wrong Answer，则该子任务得分为 $0$。\n\n若你的程序正确回答子任务 $1$ 的所有测试用例，得分按下述规则计算。设 $L_1$ 为 Ali 发给 Benjamin 的字符串的最大长度。\n\n| $L_1$ 的取值 | 得分 |\n| :--- | :--- |\n| $150\\,001 \\le L_1 \\le 300\\,000$ | $7$ 分 |\n| $20\\,001 \\le L_1 \\le 150\\,000$ | $11$ 分 |\n| $L_1 \\le 20\\,000$ | $15$ 分 |\n\n#### 子任务 2 的评分\n若你的程序在子任务 $2$ 的任意场景中被判为 Wrong Answer，则该子任务得分为 $0$。\n\n若你的程序正确回答子任务 $2$ 的所有测试用例，得分按下述规则计算。设 $L_2$ 为 Ali 发给 Benjamin 的字符串的最大长度。**注意：若 $1\\,401 \\le L_2$，该子任务得分为 $0$。**\n\n| $L_2$ 的取值 | 得分 |\n| :--- | :--- |\n| $1\\,401 \\le L_2 \\le 300\\,000$ | $0$ 分 |\n| $71 \\le L_2 \\le 1\\,400$ | $52 - 35 \\times \\log_{10}\\!\\bigl(\\frac{L_2}{70}\\bigr)$ 分（向下取整） |\n| $45 \\le L_2 \\le 70$ | $87 - 0.5 \\times L_2$ 分（向下取整） |\n| $25 \\le L_2 \\le 44$ | $109 - L_2$ 分 |\n| $L_2 \\le 24$ | $85$ 分 |\n\n### 样例交互\n\n以下为样例评测器的样例输入与对应的函数调用。在该示例中，Ali 在 `Init` 中为机场 $0, 1, 2, 3$ 设置的 ID 码分别为 $12, 21, 25, 27$。\n\n#### 样例输入 1\n\n| Ali 的调用 | Ali 的返回值 | Benjamin 的调用 | Benjamin 的返回值 |\n| :--- | :--- | :--- | :--- |\n| $\\texttt{Init(4,[0,1,2],[1,2,3])}$ |  |  |  |\n| $\\texttt{SetID(0,12)}$ |  |  |  |\n| $\\texttt{SetID(1,21)}$ |  |  |  |\n| $\\texttt{SetID(2,25)}$ |  |  |  |\n| $\\texttt{SetID(3,27)}$ |  |  |  |\n|  |  | $\\texttt{SendB(12,25)}$ | $\\texttt{\"0000011111000011111\"}$ |\n| $\\texttt{SendA(\"00...11\")}$ | $\\texttt{\"10\"}$ |  |  |\n|  |  | $\\texttt{Answer(\"10\")}$ | $\\texttt{2}$ |\n\n在该样例中，有 $N (= 4)$ 个机场与三条航线：\n- 一条连接机场 $0$ 与机场 $1$ 的航线；\n- 一条连接机场 $1$ 与机场 $2$ 的航线；\n- 一条连接机场 $2$ 与机场 $3$ 的航线。\n\n从机场 $x (= 0)$ 到机场 $y (= 2)$ 至少需要乘坐 $2$ 条航线，因此 `Answer` 应返回 $2$。\n\n注意：`SendB` 的返回值并不是机场编号 $(x, y) = (0, 2)$，而是机场的 ID 码 $(X, Y) = (12, 25)$。\n\n#### 样例输入 2\n```\n2\n10 0 9\n0 1\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 9\n15 12 8\n0 1\n0 2\n1 3\n1 4\n2 5\n2 6\n3 7\n3 8\n4 9\n4 10\n5 11\n5 12\n6 13\n6 14\n```\n在该样例中，$Q = 2$ 个场景：\n- 对于第一个场景，`Answer` 应返回 $9$。\n- 对于第二个场景，`Answer` 应返回 $6$。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[JOISC 2022] Flights", "background": "", "description": " In Republic of JOI, there are $N$ airports numbered from $0$ to $N-1$. There are $N-1$ airline routes numbered from $0$ to $N-2$. The airline route $i$ ($0 \\le i \\le N-2$) connects the airport $U_i$ and the airport $V_i$ bidirectionally. It is possible to travel from any airport to any other airport by connecting several airline routes. For every airport, there are at most 3 airline routes connecting it with another airport.\n\nBenjamin is planning to take a trip in Republic of JOI. On the last day of the trip, he wants to arrive at the airport where the hot spring is located. The amusement park is located at the airport $x$, and the hot spring is located at the airport $y$. Since Benjamin does not know anything about the airline routes, he will communicate with Ali, a staff of the airplane company. Benjamin wants to know the minimum number of airline routes he has to take to travel from the airport where the amusement park is located to the airport where the hot spring is located. Ali knows information of the airline routes. But Benjamin does not know which airline routes he has to take.\n\n1.  Ali sets an **ID code** for each airport. An ID code is an integer between $0$ and $2N+19$, inclusive.\n2.  Benjamin gets the ID code $X$ of the airport where the amusement park is located, and the ID code $Y$ of the airport where the hot spring is located.\n3.  Benjamin sends an e-mail message to Ali. The message is a string whose length is **exactly** equal to 20. Every character of the message is either 0 or 1.\n4.  Ali writes a letter to Benjamin. The letter contains a string whose length is between 1 and 300 000, inclusive. Every character of the letter is either 0 or 1.\n\nWrite programs which implement the strategy of Ali, a staff of the airplane company, and the strategy of Benjamin, a traveler. Note that in Step 2, Benjamin can get the ID codes $X, Y$ of the airports where the amusement park and the hot spring are located. **However, Benjamin cannot get the airport numbers $x, y$.**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jd1zwpzu.png)\n\n### Implementation Details\n\nYou need to submit two files.\n\nThe first file is `Ali.cpp`. It should implement Ali's strategy. It should implement the following two functions. The program should include `Ali.h` using the preprocessing directive `#include`.\n\n*   `void Init(int N, std::vector<int> U, std::vector<int> V)`\n    This function implements Ali's strategy to set ID codes for each airport. For each scenario (see Grading for details), this function is called exactly once.\n    *   The parameter $N$ is the number of airports in Republic of JOI.\n    *   The parameters $U$, $V$ are arrays of length $N-1$. This means $U[i]$, $V[i]$ are the airports $U_i, V_i$ connected by the airline route $i$ ($0 \\le i \\le N-2$).\n*   `std::string SendA(std::string S)`\n    This function implements Ali's strategy to send a letter to Benjamin. For each scenario (see Grading for details), this function is called exactly once after the function `SendB` (see below) is called.\n    *   The parameter $S$ is a string of length 20. It is an e-mail message sent by Benjamin to Ali.\n    *   The function `SendA` should return a string. It is a letter written by Ali to Benjamin.\n    *   The return value should be a string whose length is between 1 and 300 000, inclusive. If this condition is not satisfied, your program is judged as **Wrong Answer [5]**.\n    *   Each character of the return value should be either 0 or 1. If this condition is not satisfied, your program is judged as **Wrong Answer [6]**.\n\nFor each function call to `Init`, the following function should be called once for each airport. In total, it should be called $N$ times.\n\n*   `void SetID(int p, int value)`\n    *   The parameter $p$ means Ali sets the ID code for the airport $p$. Here $0 \\le p \\le N-1$ should be satisfied. If this condition is not satisfied, your program is judged as **Wrong Answer [1]**.\n    *   The parameter `value` is the ID code for the airport specified by Ali. Here $0 \\le value \\le 2N+19$ should be satisfied. If this condition is not satisfied, your program is judged as **Wrong Answer [2]**.\n    *   It is not allowed to call the function `SetID` with same parameter $p$ more than once. If this condition is not satisfied, your program is judged as **Wrong Answer [3]**.\n    *   When the function `Init` terminates, the number of function calls to `SetID` should be $N$. If this condition is not satisfied, your program is judged as **Wrong Answer [4]**.\n\nWhen the function call to `SetID` is judged as Wrong Answer, your program is terminated immediately.\n\nThe second file is `Benjamin.cpp`. It should implement Benjamin's strategy. It should implement the following two functions. The program should include `Benjamin.h` using the preprocessing directive `#include`.\n\n*   `std::string SendB(int N, int X, int Y)`\n    This function implements Benjamin's strategy to send an e-mail message to Ali. For each scenario (see Grading for details), this function is called exactly once after the function `Init` is called.\n    *   The parameter $N$ is the number of airports in Republic of JOI.\n    *   The parameter $X$ is the ID code of the airport where the amusement park is located.\n    *   The parameter $Y$ is the ID code of the airport where the hot spring is located.\n    *   The function `SendB` should return a string which is the e-mail message sent by Benjamin to Ali.\n    *   If the return value is not a string of length 20, your program is judged as **Wrong Answer [7]**.\n    *   Each character of the return value should be either 0 or 1. If this condition is not satisfied, your program is judged as **Wrong Answer [8]**.\n*   `int Answer(std::string T)`\n    This function should calculate the minimum number of airline routes Benjamin has to take to travel from the airport $x$ to the airport $y$. For each scenario (see Grading for details), this function is called exactly once after the function `SendA` is called.\n    *   The parameter $T$ is a string whose length is between 1 and 300 000, inclusive. It is the letter sent by Ali to Benjamin.\n    *   This function should return the minimum number of airline routes Benjamin has to take to travel from the airport $x$ to the airport $y$.\n\n ### Important Notices\n\n*   Your program can implement other functions for internal use, or use global variables. Submitted files will be compiled with the grader, and become a single executable file. All global variables and internal functions should be declared in an unnamed namespace to avoid confliction with other files. When it is graded, it will be executed as two processes of Ali and Benjamin. The process of Ali and the process of Benjamin cannot share global variables.\n*   Your program must not use the standard input and the standard output. Your program must not communicate with other files by any methods. However, your program may output debugging information to the standard error.\n\n### Grading\n\nA test case consists of $Q$ scenarios, numbered from 0 to $Q-1$. The following values are specified for each scenario. For the range of these values, see Constraints.\n\n*   The number $N$ of airports in Republic of JOI.\n*   The airport number $x$ of the airport where the amusement park is located.\n*   The airport number $y$ of the airport where the hot spring is located.\n*   The information of the airline routes $(U_0, V_0), (U_1, V_1), \\dots, (U_{N-2}, V_{N-2})$.\n\nFor each scenario, the functions `Init`, `SendB`, `SendA`, `Answer` are called. Your program should call appropriate functions with valid parameters, and return appropriate values. These functions are called in the following order.\n\n1.  For $k = 0, 1, \\dots, Q-1$, the following procedures 2–5 are performed in this order.\n2.  The function `Init` is called. The parameters are set for the scenario $k$ as specified in Implementation Details.\n3.  The function `SendB` is called. The parameters are set for the scenario $k$ as specified in Implementation Details.\n4.  The function `SendA` is called. The parameters are set for the scenario $k$ as specified in Implementation Details.\n5.  The function `Answer` is called. The parameters are set for the scenario $k$ as specified in Implementation Details.\n\nIf your program is judged as Wrong Answer during these procedures, your program is terminated immediately, and your program is considered to fail the test case.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sfw8wp0j.png)\n\n### Compilation and Test Run\n\nYou can download an archive file from the contest webpage which contains the sample grader to test your program. The archive file also contains a sample source file of your program.\n\nThe sample grader is the file `grader.cpp`. In order to test your program, put `grader.cpp`, `Ali.cpp`, `Benjamin.cpp`, `Ali.h`, `Benjamin.h` in the same directory, and run the following command to compile your programs.\n\n```\ng++ -std=gnu++17 -O2 -o grader grader.cpp Ali.cpp Benjamin.cpp\n```\n\nWhen the compilation succeeds, the executable file `grader` is generated.\n\nNote that the actual grader is different from the sample grader. The sample grader will be executed as a single process, which will read input from the standard input and write the results to the standard output.\n", "inputFormat": "\nThe sample grader reads the following data from the standard input. The input values should be all integers.\n\n\n> $Q$\\\n> (Input for Scenario $0$)\\\n> (Input for Scenario $1$)\\\n> $\\vdots$\\\n> (Input for Scenario $Q - 1$)\n\nThe format of the input data for each scenario is as follows.\n\n\n> $N$ $x$ $y$\\\n> $U_0$ $V_0$\\\n> $U_1$ $V_1$\\\n> $\\vdots$\\\n> $U_{N-2}$ $V_{N-2}$", "outputFormat": "\nIf your program is judged as any one of Wrong Answer [1]-[8], the sample grader writes its type as “Wrong Answer [1]” (quotes for clarity).\n\nOtherwise, for each scenario, it writes the return value of the function `Answer` and the maximum length of the strings sent by Ali to Benjamin. The sample grader does not check whether the return value of the function `Answer` is correct or not.\n\n```\nScenario 0: Your Answer = 3\nScenario 1: Your Answer = 1\nScenario 2: Your Answer = 4\nScenario 3: Your Answer = 1\nScenario 4: Your Answer = 5\nAccepted: Maximum Length = 24\n```\n\nIf your program satisfies the conditions of several types of Wrong Answer, the sample grader reports only one of them. Moreover, if your program is not judged as Wrong Answer for the first scenario, the sample grader may output intermediate results as follows even if your program is judged as one of Wrong Answer [1]-[8] for a later scenario.\n\n```\nScenario 0: Your Answer = 3\nScenario 1: Your Answer = 1\nScenario 2: Your Answer = 4\nWrong Answer [8]\n```\n", "hint": "\n ### Constraints\n* $1 \\le Q \\le 50$.\n* $2 \\le N \\le 10\\,000$.\n* $0 \\le U_i < V_i \\le N - 1$ ($0 \\le i \\le N - 2$).\n* $0 \\le x \\le N - 1$.\n* $0 \\le y \\le N - 1$.\n* $x \\ne y$.\n* It is possible to travel from any airport to any other airport by connecting several airline routes.\n* For every airport, there are at most 3 airline routes connecting it with another airport.\n\n### Subtasks\n1. (15 points) $Q = 1$.\n2. (85 points) $Q \\ge 2$.\n\n### Grading for Subtask 1\nIf your program is judged as Wrong Answer in any of the scenarios for Subtask 1, your score for this subtask is 0.\n\nIf your program answers all the test cases for Subtask 1 correctly, your score for this subtask is calculated as follows. Here, $L_1$ is the maximum length of the strings sent by Ali to Benjamin.\n\n| The value of $L_1$ | Score |\n| :--- | :--- |\n| $150\\,001 \\le L_1 \\le 300\\,000$ | 7 points |\n| $20\\,001 \\le L_1 \\le 150\\,000$ | 11 points |\n| $L_1 \\le 20\\,000$ | 15 points |\n\n### Grading for Subtask 2\nIf your program is judged as Wrong Answer in any of the scenarios for Subtask 2, your score for this subtask is 0.\n\nIf your program answers all the test cases for Subtask 2 correctly, your score for this subtask is calculated as follows. Here, $L_2$ is the maximum length of the strings sent by Ali to Benjamin. **Note that if $1\\,401 \\le L_2$, your score for this subtask is 0.**\n\n| The value of $L_2$ | Score |\n| :--- | :--- |\n| $1\\,401 \\le L_2 \\le 300\\,000$ | 0 points |\n| $71 \\le L_2 \\le 1\\,400$ | $52 - 35 \\times \\log_{10}(\\frac{L_2}{70})$ points (rounded down to the nearest integer) |\n| $45 \\le L_2 \\le 70$ | $87 - 0.5 \\times L_2$ points (rounded down to the nearest integer) |\n| $25 \\le L_2 \\le 44$ | $109 - L_2$ points |\n| $L_2 \\le 24$ | 85 points |\n\n### Sample Communication\nHere is a sample input for the sample grader and corresponding function calls. In the following example, the ID codes of the airports 0, 1, 2, 3 set by Ali by calling the function `Init` are 12, 21, 25, 27, respectively.\n\n#### Sample Input 1\n\n```\n1\n4 0 2\n0 1\n1 2\n2 3\n```\n\n| Ali's Call | Ali's Return Value | Benjamin's Call | Benjamin's Return Value |\n| :--- | :--- | :--- | :--- |\n| $\\texttt{Init(4,[0,1,2],[1,2,3])}$ | | | |\n| $\\texttt{SetID(0,12)}$ | | | |\n| $\\texttt{SetID(1,21)}$ | | | |\n| $\\texttt{SetID(2,25)}$ | | | |\n| $\\texttt{SetID(3,27)}$ | | | |\n| | | $\\texttt{SendB(12,25)}$ | $\\texttt{\"0000011111000011111\"}$ |\n| $\\texttt{SendA(\"00...11\")}$ | $\\texttt{\"10\"}$ | | |\n| | | $\\texttt{Answer(\"10\")}$ | $\\texttt{2}$ |\n\nIn this sample input, there are $N (= 4)$ airports and three airline routes.\n* An airline route connecting the airport 0 with the airport 1.\n* An airline route connecting the airport 1 with the airport 2.\n* An airline route connecting the airport 2 with the airport 3.\n\nSince we need to take at least two airline routes to travel from the airport $x (= 0)$ to the airport $y (= 2)$, the function `Answer` should return 2.\n\nNote that the return value of the function `SendB` is not the airport numbers $(x, y) = (0, 2)$. It returns the ID codes of the airports $(X, Y) = (12, 25)$.\n\n\n#### Sample Input 2\n\n```\n2\n10 0 9\n0 1\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 9\n15 12 8\n0 1\n0 2\n1 3\n1 4\n2 5\n2 6\n3 7\n3 8\n4 9\n4 10\n5 11\n5 12\n6 13\n6 14\n```\n\n\nIn this sample input, there are $Q = 2$ scenarios.\n* For the first scenario, the function `Answer` should return 9.\n* For the second scenario, the function `Answer` should return 6.\n\n", "locale": "en"}, "zh-CN": {"title": "[JOIST 2022] 飞机旅行 / Flights", "background": "请使用 C++ 20 提交。\n\n**不要**引入头文件，并在文件头加入以下内容：\n\n```cpp\nvoid SetID(int, int);\n```", "description": "\n\n在 JOI 共和国中，有 $N$ 个机场，编号从 $0$ 到 $N - 1$。有 $N - 1$ 条航线，编号从 $0$ 到 $N - 2$。航线 $i$（$0 \\le i \\le N - 2$）双向连接机场 $U_i$ 与机场 $V_i$。通过若干条航线相连，可以从任意一个机场到达任意另一个机场。对每个机场，连接它与其他机场的航线数量至多为 $3$。\n\nBenjamin 计划在 JOI 共和国旅行。在旅程的最后一天，他想到达温泉所在的机场。游乐园位于机场 $x$，温泉位于机场 $y$。由于 Benjamin 对航线一无所知，他将与航空公司的工作人员 Ali 沟通。Benjamin 想知道：从游乐园所在的机场出发，到达温泉所在的机场，最少需要乘坐多少条航线。Ali 掌握航线信息，但 Benjamin 并不知道自己应当乘坐哪些航线。\n\n1. Ali 为每个机场设置一个 **ID 码**。ID 码是介于 $0$ 和 $2N + 19$（含）之间的整数。\n2. Benjamin 得到游乐园所在机场的 ID 码 $X$，以及温泉所在机场的 ID 码 $Y$。\n3. Benjamin 向 Ali 发送一封电子邮件。该邮件是一串长度 **恰好** 等于 $20$ 的字符串，字符串的每个字符均为 $0$ 或 $1$。\n4. Ali 给 Benjamin 回一封信。该信是一串长度在 $1$ 到 $300\\,000$（含）之间的字符串，字符串的每个字符均为 $0$ 或 $1$。\n\n请编写程序，实现航空公司工作人员 Ali 与旅客 Benjamin 的策略。注意：在第 $2$ 步中，Benjamin 能得到游乐园与温泉所在机场的 ID 码 $X, Y$，**然而 Benjamin 不能获得机场编号 $x, y$**。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jd1zwpzu.png)\n\n### 实现细节\n\n你需要提交两个文件。\n\n#### `Ali.cpp`\n\n该文件应实现 Ali 的策略，并实现下述两个函数。程序应使用预处理指令 `#include` 引入 `Ali.h`。\n\n- `void Init(int N, std::vector<int> U, std::vector<int> V)`  \n  该函数用于为每个机场设置 ID 码（见「评分」中的场景说明），每个场景调用 **恰好一次**。\n  - 参数 $N$ 为 JOI 共和国中的机场数量。\n  - 参数 $U, V$ 为长度为 $N - 1$ 的数组，即 $U[i], V[i]$ 分别是航线 $i$（$0 \\le i \\le N - 2$）连接的机场 $U_i, V_i$。\n- `std::string SendA(std::string S)`  \n  该函数实现 Ali 给 Benjamin 的回信策略（见「评分」中的场景说明），在调用 `SendB`（见下文）之后、每个场景调用 **恰好一次**。\n  - 参数 $S$ 是长度为 $20$ 的字符串，即 Benjamin 发给 Ali 的电子邮件。\n  - 函数 `SendA` 应返回一个字符串，即 Ali 给 Benjamin 的回信。\n  - 返回值的长度必须在 $1$ 到 $300\\,000$（含）之间。若不满足，则判为 **Wrong Answer [5]**。\n  - 返回值的每个字符必须为 $0$ 或 $1$。若不满足，则判为 **Wrong Answer [6]**。\n\n对每次调用 `Init`，下述函数必须对每个机场调用一次，总计调用 $N$ 次：\n\n- `void SetID(int p, int value)`  \n  - 参数 $p$ 表示为机场 $p$ 设置 ID 码。必须满足 $0 \\le p \\le N - 1$。若不满足，则判为 **Wrong Answer [1]**。\n  - 参数 `value` 是 Ali 指定的该机场的 ID 码。必须满足 $0 \\le value \\le 2N + 19$。若不满足，则判为 **Wrong Answer [2]**。\n  - 不允许对同一个 $p$ 调用多次 `SetID`。若不满足，则判为 **Wrong Answer [3]**。\n  - 当 `Init` 结束时，`SetID` 的调用次数应为 $N$。若不满足，则判为 **Wrong Answer [4]**。\n\n一旦某次 `SetID` 调用被判为 Wrong Answer，程序将立即终止。\n\n#### `Benjamin.cpp`\n\n该文件应实现 Benjamin 的策略，并实现下述两个函数。程序应使用预处理指令 `#include` 引入 `Benjamin.h`。\n\n- `std::string SendB(int N, int X, int Y)`  \n  该函数实现 Benjamin 发给 Ali 的电子邮件策略（见「评分」中的场景说明），在 `Init` 调用之后、每个场景调用 **恰好一次**。\n  - 参数 $N$ 为 JOI 共和国中的机场数量。\n  - 参数 $X$ 为游乐园所在机场的 ID 码。\n  - 参数 $Y$ 为温泉所在机场的 ID 码。\n  - 函数 `SendB` 应返回 Benjamin 发给 Ali 的邮件字符串。\n  - 若返回值不是长度为 $20$ 的字符串，则判为 **Wrong Answer [7]**。\n  - 若返回值的任一字符不是 $0$ 或 $1$，则判为 **Wrong Answer [8]**。\n- `int Answer(std::string T)`  \n  该函数应计算从机场 $x$ 到机场 $y$ 的最少乘坐航线数（见「评分」中的场景说明），在 `SendA` 调用之后、每个场景调用 **恰好一次**。\n  - 参数 $T$ 为 Ali 发给 Benjamin 的回信字符串，长度在 $1$ 到 $300\\,000$（含）之间。\n  - 函数应返回从机场 $x$ 到机场 $y$ 所需的最少航线数量。\n\n### 重要注意事项\n\n- 程序可以实现其他内部使用的函数，或使用全局变量。提交的文件将与评测器一同编译，组成单个可执行文件。为避免与其他文件冲突，所有全局变量与内部函数都应声明在匿名命名空间中。评测时将分别作为 Ali 与 Benjamin 两个进程执行。Ali 进程与 Benjamin 进程 **不能共享** 全局变量。\n- 程序 **不得** 使用标准输入与标准输出。程序 **不得** 通过任何方式与其他文件通信。但你可以向标准错误输出调试信息。\n\n### 评分\n\n一个测试用例由 $Q$ 个场景组成，编号为 $0$ 到 $Q - 1$。每个场景给定如下数据（取值范围见「约束」）：\n\n- JOI 共和国的机场数量 $N$。\n- 游乐园所在的机场编号 $x$。\n- 温泉所在的机场编号 $y$。\n- 航线信息 $(U_0, V_0), (U_1, V_1), \\dots, (U_{N - 2}, V_{N - 2})$。\n\n对每个场景，依次调用 `Init`、`SendB`、`SendA`、`Answer`。你的程序应在这些调用中使用合法参数并返回合法值。调用顺序如下：\n\n1. 对 $k = 0, 1, \\dots, Q - 1$，依次执行步骤 $2$–$5$。\n2. 调用 `Init`，参数按场景 $k$ 的「实现细节」说明设置。\n3. 调用 `SendB`，参数按场景 $k$ 的「实现细节」说明设置。\n4. 调用 `SendA`，参数按场景 $k$ 的「实现细节」说明设置。\n5. 调用 `Answer`，参数按场景 $k$ 的「实现细节」说明设置。\n\n若程序在这些过程中任一处被判为 Wrong Answer，程序将立即终止，并视为未通过该测试用例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sfw8wp0j.png)\n\n### 编译与本地测试\n\n你可以从竞赛网页下载包含样例评测器的压缩包，用于本地测试。压缩包中也包含你程序的样例源文件。\n\n样例评测器文件名为 `grader.cpp`。为测试你的程序，请将 `grader.cpp`、`Ali.cpp`、`Benjamin.cpp`、`Ali.h`、`Benjamin.h` 放在同一目录下，并运行以下命令进行编译：\n\n```\ng++ -std=gnu++17 -O2 -o grader grader.cpp Ali.cpp Benjamin.cpp\n```\n\n若编译成功，将生成可执行文件 `grader`。\n\n注意：实际评测器与样例评测器不同。样例评测器作为单进程执行，从标准输入读取数据并向标准输出写出结果。", "inputFormat": "\n样例评测器从标准输入读取如下数据。所有输入值均为整数。\n\n> $Q$  \n>（场景 $0$ 的输入）  \n>（场景 $1$ 的输入）  \n>$\\vdots$  \n>（场景 $Q - 1$ 的输入）\n\n每个场景的输入格式如下：\n\n> $N$ $x$ $y$  \n> $U_0$ $V_0$  \n> $U_1$ $V_1$  \n>$\\vdots$  \n> $U_{N - 2}$ $V_{N - 2}$", "outputFormat": "\n如果程序被判为 Wrong Answer [1]–[8] 中的任意一种，样例评测器会输出其类型（引号仅为说明）：“Wrong Answer [1]”。\n\n否则，对每个场景，它会输出函数 `Answer` 的返回值以及 Ali 发给 Benjamin 的字符串的最大长度。样例评测器 **不会** 检查 `Answer` 的返回值是否正确。\n\n```\nScenario 0: Your Answer = 3\nScenario 1: Your Answer = 1\nScenario 2: Your Answer = 4\nScenario 3: Your Answer = 1\nScenario 4: Your Answer = 5\nAccepted: Maximum Length = 24\n```\n\n如果你的程序同时满足多种 Wrong Answer 的判定条件，样例评测器只报告其中一种。此外，即使你的程序在后续场景被判为 Wrong Answer [1]–[8]，只要在第一个场景未被判错，样例评测器也可能先输出如下中间结果：\n\n```\nScenario 0: Your Answer = 3\nScenario 1: Your Answer = 1\nScenario 2: Your Answer = 4\nWrong Answer [8]\n```", "hint": "\n#### 约束\n- $1 \\le Q \\le 50$。\n- $2 \\le N \\le 10\\,000$。\n- $0 \\le U_i < V_i \\le N - 1$（$0 \\le i \\le N - 2$）。\n- $0 \\le x \\le N - 1$。\n- $0 \\le y \\le N - 1$。\n- $x \\ne y$。\n- 通过若干条航线相连，可以从任意一个机场到达任意另一个机场。\n- 对每个机场，连接它与其他机场的航线数量至多为 $3$。\n\n#### 子任务\n1.（$15$ 分）$Q = 1$。  \n2.（$85$ 分）$Q \\ge 2$。\n\n#### 子任务 1 的评分\n若你的程序在子任务 $1$ 的任意场景中被判为 Wrong Answer，则该子任务得分为 $0$。\n\n若你的程序正确回答子任务 $1$ 的所有测试用例，得分按下述规则计算。设 $L_1$ 为 Ali 发给 Benjamin 的字符串的最大长度。\n\n| $L_1$ 的取值 | 得分 |\n| :--- | :--- |\n| $150\\,001 \\le L_1 \\le 300\\,000$ | $7$ 分 |\n| $20\\,001 \\le L_1 \\le 150\\,000$ | $11$ 分 |\n| $L_1 \\le 20\\,000$ | $15$ 分 |\n\n#### 子任务 2 的评分\n若你的程序在子任务 $2$ 的任意场景中被判为 Wrong Answer，则该子任务得分为 $0$。\n\n若你的程序正确回答子任务 $2$ 的所有测试用例，得分按下述规则计算。设 $L_2$ 为 Ali 发给 Benjamin 的字符串的最大长度。**注意：若 $1\\,401 \\le L_2$，该子任务得分为 $0$。**\n\n| $L_2$ 的取值 | 得分 |\n| :--- | :--- |\n| $1\\,401 \\le L_2 \\le 300\\,000$ | $0$ 分 |\n| $71 \\le L_2 \\le 1\\,400$ | $52 - 35 \\times \\log_{10}\\!\\bigl(\\frac{L_2}{70}\\bigr)$ 分（向下取整） |\n| $45 \\le L_2 \\le 70$ | $87 - 0.5 \\times L_2$ 分（向下取整） |\n| $25 \\le L_2 \\le 44$ | $109 - L_2$ 分 |\n| $L_2 \\le 24$ | $85$ 分 |\n\n### 样例交互\n\n以下为样例评测器的样例输入与对应的函数调用。在该示例中，Ali 在 `Init` 中为机场 $0, 1, 2, 3$ 设置的 ID 码分别为 $12, 21, 25, 27$。\n\n#### 样例输入 1\n\n| Ali 的调用 | Ali 的返回值 | Benjamin 的调用 | Benjamin 的返回值 |\n| :--- | :--- | :--- | :--- |\n| $\\texttt{Init(4,[0,1,2],[1,2,3])}$ |  |  |  |\n| $\\texttt{SetID(0,12)}$ |  |  |  |\n| $\\texttt{SetID(1,21)}$ |  |  |  |\n| $\\texttt{SetID(2,25)}$ |  |  |  |\n| $\\texttt{SetID(3,27)}$ |  |  |  |\n|  |  | $\\texttt{SendB(12,25)}$ | $\\texttt{\"0000011111000011111\"}$ |\n| $\\texttt{SendA(\"00...11\")}$ | $\\texttt{\"10\"}$ |  |  |\n|  |  | $\\texttt{Answer(\"10\")}$ | $\\texttt{2}$ |\n\n在该样例中，有 $N (= 4)$ 个机场与三条航线：\n- 一条连接机场 $0$ 与机场 $1$ 的航线；\n- 一条连接机场 $1$ 与机场 $2$ 的航线；\n- 一条连接机场 $2$ 与机场 $3$ 的航线。\n\n从机场 $x (= 0)$ 到机场 $y (= 2)$ 至少需要乘坐 $2$ 条航线，因此 `Answer` 应返回 $2$。\n\n注意：`SendB` 的返回值并不是机场编号 $(x, y) = (0, 2)$，而是机场的 ID 码 $(X, Y) = (12, 25)$。\n\n#### 样例输入 2\n```\n2\n10 0 9\n0 1\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 9\n15 12 8\n0 1\n0 2\n1 3\n1 4\n2 5\n2 6\n3 7\n3 8\n4 9\n4 10\n5 11\n5 12\n6 13\n6 14\n```\n在该样例中，$Q = 2$ 个场景：\n- 对于第一个场景，`Answer` 应返回 $9$。\n- 对于第二个场景，`Answer` 应返回 $6$。\n\n", "locale": "zh-CN"}}}
{"pid": "P9525", "type": "P", "difficulty": 5, "samples": [["5\n3 1 4\n2 3 1\n1 5 5\n4 4 2\n5 2 3", "13"], ["8\n1 1 1\n1 1 5\n1 5 1\n5 1 1\n1 5 5\n5 1 5\n5 5 1\n5 5 5", "15"], ["4\n1 2 3\n1 2 3\n1 2 3\n1 2 3", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2022", "O2优化", "优先队列", "JOISC/JOIST（日本）"], "title": "[JOIST 2022] 团队竞技 / Team Contest", "background": "JOISC2022 D2T3", "description": "JOI 大学有 $N$ 只海狸，他们都参与竞技编程。每只海狸有三项能力值：思考值，行动值和运气值。如果一个能力值很大，意味着他这项能力比较强大。对于第 $i~(i\\in[1,N])$ 只海狸，他的思考值为 $X_i$，行动值为 $Y_i$，运气值为 $Z_i$。\n\n今年 JOI 大学的海狸们将参与一场团体竞技编程，一支队伍由三名队员组成。Bitaro 是 JOI 大学的教练，由于团队合作很重要，Bitaro 决定从 $N$ 只海狸中选出三只海狸组成队伍，这三只海狸要满足以下条件：\n\n**条件**：每个成员都有自己的优势，这意味着每个成员都有一项能力值严格大于其他两人的对应能力值。\n\n在所有符合条件的组队中，Bitaro 想要选一个总能力最强的队伍，一个队伍的总能力定义为：三人最大思考值，三人最大行动值和三人最大运气值之和。\n\n请你求出，是否存在一个符合条件的组队，如果是，计算队伍总能力可能的最大值。", "inputFormat": "第一行一个整数 $N$ 表示海狸数。\n\n接下来 $N$ 行每行三个整数 $X_i,Y_i,Z_i$ 表示海狸的各项能力值。", "outputFormat": "一行一个整数，如果不存在符合条件的组队，输出 `-1`，否则输出队伍总能力的最大值。", "hint": "**【样例解释 #1】**\n\n由海狸 $1,4,5$ 组成的队伍符合条件，因为：\n\n1. 海狸 $1$ 的优势是运气。\n2. 海狸 $4$ 的优势是行动。\n3. 海狸 $5$ 的优势是思考。\n\n总能力值为：$5+4+4=13$。\n\n可以证明这是符合条件的组队中，总能力值最高的队伍。\n\n注意如果选择海狸 $1,3,5$，总能力值将达到 $15$，但是这会导致海狸 $1$ 没有特长。\n\n这组样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n最优组队为：海狸 $2,3,4$。\n\n这组样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\n任何组队方式都会导致队员没有特长，不存在符合条件的组队。\n\n这组样例满足所有子任务的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $3\\leq N\\leq 150000$。\n- $1\\leq X_i,Y_i,Z_i\\leq 10^8$ $(1\\leq i\\leq N)$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$N\\leq 300$|$8$|\n|$2$|$N\\leq 4000$|$29$|\n|$3$|$X_i,Y_i,Z_i\\leq 5$ $(i\\in[1,N])$|$9$|\n|$4$|$X_i,Y_i,Z_i\\leq 20$ $(i\\in[1,N])$|$9$|\n|$5$|$X_i,Y_i,Z_i\\leq 300$ $(i\\in[1,N])$|$9$|\n|$6$|$X_i,Y_i,Z_i\\leq 4000$ $(i\\in[1,N])$|$9$|\n|$7$|无附加限制|$27$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIST 2022] 团队竞技 / Team Contest", "background": "JOISC2022 D2T3", "description": "JOI 大学有 $N$ 只海狸，他们都参与竞技编程。每只海狸有三项能力值：思考值，行动值和运气值。如果一个能力值很大，意味着他这项能力比较强大。对于第 $i~(i\\in[1,N])$ 只海狸，他的思考值为 $X_i$，行动值为 $Y_i$，运气值为 $Z_i$。\n\n今年 JOI 大学的海狸们将参与一场团体竞技编程，一支队伍由三名队员组成。Bitaro 是 JOI 大学的教练，由于团队合作很重要，Bitaro 决定从 $N$ 只海狸中选出三只海狸组成队伍，这三只海狸要满足以下条件：\n\n**条件**：每个成员都有自己的优势，这意味着每个成员都有一项能力值严格大于其他两人的对应能力值。\n\n在所有符合条件的组队中，Bitaro 想要选一个总能力最强的队伍，一个队伍的总能力定义为：三人最大思考值，三人最大行动值和三人最大运气值之和。\n\n请你求出，是否存在一个符合条件的组队，如果是，计算队伍总能力可能的最大值。", "inputFormat": "第一行一个整数 $N$ 表示海狸数。\n\n接下来 $N$ 行每行三个整数 $X_i,Y_i,Z_i$ 表示海狸的各项能力值。", "outputFormat": "一行一个整数，如果不存在符合条件的组队，输出 `-1`，否则输出队伍总能力的最大值。", "hint": "**【样例解释 #1】**\n\n由海狸 $1,4,5$ 组成的队伍符合条件，因为：\n\n1. 海狸 $1$ 的优势是运气。\n2. 海狸 $4$ 的优势是行动。\n3. 海狸 $5$ 的优势是思考。\n\n总能力值为：$5+4+4=13$。\n\n可以证明这是符合条件的组队中，总能力值最高的队伍。\n\n注意如果选择海狸 $1,3,5$，总能力值将达到 $15$，但是这会导致海狸 $1$ 没有特长。\n\n这组样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n最优组队为：海狸 $2,3,4$。\n\n这组样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\n任何组队方式都会导致队员没有特长，不存在符合条件的组队。\n\n这组样例满足所有子任务的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $3\\leq N\\leq 150000$。\n- $1\\leq X_i,Y_i,Z_i\\leq 10^8$ $(1\\leq i\\leq N)$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$N\\leq 300$|$8$|\n|$2$|$N\\leq 4000$|$29$|\n|$3$|$X_i,Y_i,Z_i\\leq 5$ $(i\\in[1,N])$|$9$|\n|$4$|$X_i,Y_i,Z_i\\leq 20$ $(i\\in[1,N])$|$9$|\n|$5$|$X_i,Y_i,Z_i\\leq 300$ $(i\\in[1,N])$|$9$|\n|$6$|$X_i,Y_i,Z_i\\leq 4000$ $(i\\in[1,N])$|$9$|\n|$7$|无附加限制|$27$|", "locale": "zh-CN"}}}
{"pid": "P9526", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "交互题", "Special Judge", "通信题", "JOISC/JOIST（日本）"], "title": "[JOIST 2022] 坏掉的设备 2 / Broken Device 2", "background": "不要引入头文件，并使用 **C++ 20** 提交。", "description": "\nAnna 和 Bruno 是赌术大师。他们将和担任庄家的 D-taro 玩一个游戏。在这个游戏中，Anna 和 Bruno 分别待在不同的房间里。他们只能使用一台损坏的装置相互通信。D-taro 会给 Anna 一个整数。对于 Anna 和 Bruno 来说，这个游戏的目标是使用该装置，把给定的整数从 Anna 传递给 Bruno。\n\n当游戏开始时，一开始，Anna 声明一个整数 $m$，其取值在 1 到 2 000（含）之间。然后他们进行 $Q$ 轮。第 $i$ 轮（$1 \\le i \\le Q$）按如下方式进行。\n\n1. D-taro 给 Anna 一个整数 $A_i$。\n2. Anna 向装置输入数组 $s_i, t_i$。数组 $s_i, t_i$ 的每个元素都必须为 0 或 1。数组 $s_i, t_i$ 的长度必须相同，且长度在 1 到 $m$（含）之间。\n3. 令 $u_i$ 为由数组 $s_i$ 和 $t_i$ 通过 **riffle shuffle**（见下文）得到的数组。然后装置将 $u_i$ 发送给 Bruno。\n4. Bruno 向 D-taro 发送一个整数。若该整数与 D-taro 给 Anna 的整数 $A_i$ 相同，则 Anna 和 Bruno 在本轮获胜。\n\n请编写实现 Anna 和 Bruno 策略的程序，使他们在全部 $Q$ 轮中都能获胜。\n\n### 洗牌交错（riffle shuffle）\n\n若能将数组 $Z$ 的元素划分为两组，并满足以下两个条件，则称数组 $Z$ 是由数组 $X$ 和数组 $Y$ 通过 riffle shuffle 得到的。\n\n* 由第一组元素按原有顺序组成的数组等于数组 $X$。\n* 由第二组元素按原有顺序组成的数组等于数组 $Y$。\n\n例如，数组 $Z = [1, 1, 1, 0, 0, 0]$ 可由 $X = [1, 1, 0]$ 与 $Y = [1, 0, 0]$ 通过 riffle shuffle 得到，因为由 $Z$ 的第 1、2、4 个元素按原顺序组成的数组为 $[1, 1, 0]$，而由第 3、5、6 个元素按原顺序组成的数组为 $[1, 0, 0]$。\n\n另一方面，若 $X = [1, 1, 0]$、$Y = [1, 0, 0]$，而 $Z = [0, 0, 0, 1, 1, 1]$，则数组 $Z$ 不是由 $X$ 和 $Y$ 通过 riffle shuffle 得到的。\n\n### 实现细节\n\n你需要提交两个文件。\n\n第一个文件是 `Anna.cpp`。它应实现 Anna 的策略，并实现下列函数。程序应通过预处理指令 `#include` 包含 `Anna.h`。\n\n* `int Declare()`\n\n  该函数在开始时被调用一次。\n  * 返回值是 Anna 声明的整数 $m$。\n  * 整数 $m$ 必须在 1 到 2 000（含）之间。若不满足此条件，你的程序将被判为 **Wrong Answer [1]**。\n\n* `std::pair<std::vector<int>, std::vector<int>> Anna(long long A)`\n\n  在调用 `Declare` 之后，该函数将被调用 $Q$ 次。第 $i$ 次调用（$1 \\le i \\le Q$）对应第 $i$ 轮的步骤 1 和步骤 2。\n  * 参数 $A$ 是 D-taro 给 Anna 的整数 $A_i$。\n  * 返回值是 Anna 输入到装置中的两个数组 $s_i, t_i$ 组成的二元组。\n  * 数组 $s_i, t_i$ 的每个元素都必须为 0 或 1。若不满足此条件，你的程序将被判为 **Wrong Answer [2]**。\n  * 数组 $s_i, t_i$ 的长度都必须在 1 到 $m$（含）之间。若不满足此条件，你的程序将被判为 **Wrong Answer [3]**。\n  * 数组 $s_i, t_i$ 的长度必须相同。若不满足此条件，你的程序将被判为 **Wrong Answer [4]**。\n\n第二个文件是 `Bruno.cpp`。它应实现 Bruno 的策略，并实现下列函数。程序应通过预处理指令 `#include` 包含 `Bruno.h`。\n\n* `long long Bruno(std::vector<int> u)`\n\n  在 Anna 向装置输入数组之后，该函数会被调用一次。总共，该函数会被调用 $Q$ 次。第 $i$ 次调用（$1 \\le i \\le Q$）对应第 $i$ 轮的步骤 3 和步骤 4。\n  * 参数 `u` 是装置在第 $i$ 轮发送给 Bruno 的数组 $u_i$。\n  * 返回值是 Bruno 发送给 D-taro 的整数。\n  * 返回值必须与 D-taro 给 Anna 的整数 $A_i$ 相同。若不满足此条件，你的程序将被判为 **Wrong Answer [5]**。\n\n### 重要注意事项\n\n* 你的程序可以实现其他用于内部的函数，或使用全局变量。提交的文件将与评测器一起编译，变成一个可执行文件。所有全局变量和内部函数都应当声明在未命名命名空间中，以避免与其他文件冲突。评测时会以 Anna 进程和 Bruno 进程两个进程形式运行。Anna 进程与 Bruno 进程不能共享全局变量。\n* 你的程序不得使用标准输入与标准输出。你的程序不得通过任何方式与其他文件通信。但是，你的程序可以向标准错误输出调试信息。\n\n### 编译与本地测试\n\n你可以从竞赛网页下载一个压缩包，其中包含用于本地测试你程序的样例评测器。压缩包还包含你程序的样例源代码。\n\n样例评测器为文件 `grader.cpp`。为了测试你的程序，请将 `grader.cpp`、`Anna.cpp`、`Bruno.cpp`、`Anna.h`、`Bruno.h` 放在同一目录下，并运行如下命令以编译程序。\n\n```\ng++ -std=gnu++17 -O2 -o grader grader.cpp Anna.cpp Bruno.cpp\n```\n\n编译成功后，会生成名为 `grader` 的可执行文件。\n\n请注意，实际评测器与样例评测器不同。样例评测器以单进程形式运行，从标准输入读入数据，并将结果写到标准输出。\n", "inputFormat": "\n样例评测器从标准输入读取如下数据。\n\n> $Q$ \\\n> $A_1$ \\\n> $A_2$ \\\n> $\\vdots$ \\\n> $A_Q$\n", "outputFormat": "\n样例评测器向标准输出写出如下信息（引号仅为说明）。\n\n* 若你的程序被判定为正确，它会输出函数 `Declare` 的返回值 $m$，例如 “Accepted: 2000”。\n* 若你的程序被判定为任一类 Wrong Answer，样例评测器会写出其类型，例如 “Wrong Answer [1]”。\n\n如果你的程序同时触犯多类 Wrong Answer 的条件，样例评测器只报告其中一种。\n\n样例评测器在每一轮计算 riffle shuffle 时使用伪随机数。其结果在不同执行中不会改变。为了更改伪随机数的种子，请如下方式执行样例评测器。\n\n```\n./grader 2022\n```\n\n第一个参数应为一个整数。\n", "hint": "\n#### 约束\n\n* $1 \\le Q \\le 1\\,000$。\n* $1 \\le A_i \\le 1\\,000\\,000\\,000\\,000\\,000\\,000 \\ (= 10^{18}) \\ (1 \\le i \\le Q)$。\n\n#### 子任务\n\n1. （5 分）$A_i \\le 2\\,000 \\ (1 \\le i \\le Q)$。\n2. （5 分）$A_i \\le 4\\,000\\,000 \\ (1 \\le i \\le Q)$。\n3. （3 分）$A_i \\le 10\\,000\\,000 \\ (= 10^7) \\ (1 \\le i \\le Q)$。\n4. （12 分）$A_i \\le 100\\,000\\,000 \\ (= 10^8) \\ (1 \\le i \\le Q)$。\n5. （15 分）$A_i \\le 100\\,000\\,000\\,000 \\ (= 10^{11}) \\ (1 \\le i \\le Q)$。\n6. （60 分）无限制。对于本子任务，你的得分计算如下。\n   * 令 $m^*$ 为本子任务所有测试中，Anna 声明的整数 $m$ 的最大值。\n   * 你的得分如下所示。\n\n| $m^*$ 的取值 | 分数 |\n| :--- | :--- |\n| $201 \\le m^* \\le 2\\,000$ | $40 - 25 \\times \\log_{10}\\!\\left(\\dfrac{m^*}{200}\\right)$ 分（向下取整为整数） |\n| $161 \\le m^* \\le 200$ | 40 分 |\n| $156 \\le m^* \\le 160$ | 44 分 |\n| $151 \\le m^* \\le 155$ | 48 分 |\n| $146 \\le m^* \\le 150$ | 52 分 |\n| $141 \\le m^* \\le 145$ | 56 分 |\n| $m^* \\le 140$ | 60 分 |\n\n### 样例通信\n\n下面给出样例评测器的一个样例输入以及相应的函数调用。\n\n#### 样例输入 1\n\n```\n2\n42\n2000\n```\n\n| 调用 | 返回值 |\n| :--- | :--- |\n| `Declare()` | 4 |\n| `Anna(42)` | `([0, 0, 1, 0], [1, 1, 0, 1])` |\n| `Bruno([1, 0, 0, 1, 0, 1, 0, 1])` | 42 |\n| `Anna(2000)` | `([0, 1], [0, 0])` |\n| `Bruno([0, 0, 1, 0])` | 2000 |\n\n在该样例输入中，共有 $Q \\ (= 2)$ 轮。对于第 1 轮，D-taro 给 Anna 的整数为 $A_1 \\ (= 42)$。\n\n对于第 2 轮，D-taro 给 Anna 的整数为 $A_2 \\ (= 2000)$。\n\n该样例输入满足所有子任务的约束。\n", "locale": "zh-CN", "translations": {"en": {"title": "[JOISC 2022] Broken Device 2", "background": "", "description": " Anna and Bruno are gamble masters. They will play a game with D-taro who is the dealer of the game. In this game, Anna and Bruno stay in different rooms. They can communicate with each other using a broken device only. D-taro gives an integer to Anna. For Anna and Bruno, the purpose of this game is to send the given integer from Anna to Bruno using the device.\n\nWhen the game starts, in the beginning, Anna declares an integer $m$ between 1 and 2 000, inclusive. Then they play $Q$ rounds. The round $i$ ($1 \\le i \\le Q$) is performed as follows.\n\n1. D-taro gives an integer $A_i$ to Anna.\n2. Anna inputs arrays $s_i, t_i$ into the device. Every element of the arrays $s_i, t_i$ should be either 0 or 1. The arrays $s_i, t_i$ should have the same length, and the length is between 1 and $m$, inclusive.\n3. Let $u_i$ be an array obtained from the arrays $s_i$ and $t_i$ by **riffle shuffle** (see below). Then the device sends $u_i$ to Bruno.\n4. Bruno sends an integer to D-taro. If this integer is the same as the integer $A_i$ given by D-taro to Anna, Anna and Bruno win for this round.\n\nWrite programs which implements the strategies of Anna and Bruno so that theory win for all the $Q$ rounds.\n\n### Riffle Shuffle\n\nWe say an array $Z$ is obtained from the arrays $X$ and $Y$ by riffle shuffle if we can divide the elements of the array $Z$ into two groups so that the following two conditions are satisfied.\n\n*   The array consisting of the elements in the first group in the same order is equal to the array $X$.\n*   The array consisting of the elements in the second group in the same order is equal to the array $Y$.\n\nFor example, the array $Z = [1, 1, 1, 0, 0, 0]$ is obtained from $X = [1, 1, 0]$ and $Y = [1, 0, 0]$ by riffle shuffle because the array consisting of the first, second, fourth elements of $Z$ in the same order is the array $[1, 1, 0]$, and the array consisting of the third, fifth, sixth elements of $Z$ in the same order is the array $[1, 0, 0]$.\n\nOn the other hand, if $X = [1, 1, 0]$, $Y = [1, 0, 0]$, and $Z = [0, 0, 0, 1, 1, 1]$, the array $Z$ is not obtained from $X$ and $Y$ by riffle shuffle.\n\n### Implementation Details\n\nYou need to submit two files.\n\nThe first file is `Anna.cpp`. It should implement Anna's strategy. It should implement the following functions. The program should include `Anna.h` using the preprocessing directive `#include`.\n\n*   `int Declare()`\n    This function is called once in the beginning.\n    *   The return value is the integer $m$ declared by Anna.\n    *   The integer $m$ should be between 1 and 2 000, inclusive. If this condition is not satisfied, your program is judged as **Wrong Answer [1]**.\n*   `std::pair<std::vector<int>, std::vector<int>> Anna(long long A)`\n    After the function `Declare` is called, this function is called $Q$ times. The $i$-th call ($1 \\le i \\le Q$) to this function corresponds to Step 1 and Step 2 for the round $i$.\n    *   The parameter $A$ is the integer $A_i$ given by D-taro to Anna.\n    *   The return value is the pair of the two arrays $s_i, t_i$ input by Anna into the device.\n    *   Every element of the arrays $s_i, t_i$ should be either 0 or 1. If this condition is not satisfied, your program is judged as **Wrong Answer [2]**.\n    *   Both of the lengths of the arrays $s_i, t_i$ should be between 1 and $m$, inclusive. If this condition is not satisfied, your program is judged as **Wrong Answer [3]**.\n    *   The arrays $s_i, t_i$ should have the same length. If this condition is not satisfied, your program is judged as **Wrong Answer [4]**.\n\nThe second file is `Bruno.cpp`. It should implement Bruno's strategy. It should implement the following function. The program should include `Bruno.h` using the preprocessing directive `#include`.\n\n*   `long long Bruno(std::vector<int> u)`\n    After Anna inputs the arrays into the device, this function is called once. In total, this function is called $Q$ times. The $i$-th call ($1 \\le i \\le Q$) to this function corresponds to Step 3 and Step 4 for the round $i$.\n    *   The parameter `u` is the array $u_i$ sent by the device to Bruno for the round $i$.\n    *   The return value is the integer sent by Bruno to D-taro.\n    *   The return value should be the same as the integer $A_i$ given by D-taro to Anna. If this condition is not satisfied, your program is judged as **Wrong Answer [5]**.\n\n### Important Notices\n\n*  Your program can implement other functions for internal use, or use global variables. Submitted files will be compiled with the grader, and become a single executable file. All global variables and internal functions should be declared in an unnamed namespace to avoid confliction with other files. When it is graded, it will be executed as two processes of Anna and Bruno. The process of Anna and the process of\nBruno cannot share global variables.\n* Your program must not use the standard input and the standard output. Your program must not communicate with other files by any methods. However, your program may output debugging information to\nthe standard error.\n\n ### Compilation and Test Run\n\nYou can download an archive file from the contest webpage which contains the sample grader to test your program. The archive file also contains a sample source file of your program.\n\nThe sample grader is the file `grader.cpp`. In order to test your program, put `grader.cpp`, `Anna.cpp`, `Bruno.cpp`, `Anna.h`, `Bruno.h` in the same directory, and run the following command to compile your programs.\n\n```\ng++ -std=gnu++17 -O2 -o grader grader.cpp Anna.cpp Bruno.cpp\n```\n\nWhen the compilation succeeds, the executable file `grader` is generated.\n\nNote that the actual grader is different from the sample grader. The sample grader will be executed as a single process, which will read input data from the standard input and write the results to the standard output.\n", "inputFormat": "\nThe sample grader reads the following data from the standard input.\n\n> $Q$ \\\n> $A_1$ \\\n> $A_2$ \\\n> $\\vdots$ \\\n> $A_Q$ \n", "outputFormat": "\nThe sample grader outputs the following information to the standard output (quotes for clarity).\n\n*   If your program is judged as correct, it writes the return value $m$ of the function `Declare` as “Accepted: 2000”.\n*   If your program is judged as any one of Wrong Answer, the sample grader writes its type as “Wrong Answer [1]”.\n\nIf your program satisfies the conditions of several types of Wrong Answer, the sample grader reports only one of them.\n\nWhen the sample grader is executed, the riffle shuffle for each round is calculated using pseudo random numbers. Their results do not change for executions. In order to change the seed of pseudo random numbers, execute the sample grader by the following way.\n\n```\n./grader 2022\n```\n\nThe first argument should be an integer.", "hint": "\n### Constraints\n\n*   $1 \\le Q \\le 1\\,000$.\n*   $1 \\le A_i \\le 1\\,000\\,000\\,000\\,000\\,000\\,000 (= 10^{18}) (1 \\le i \\le Q)$.\n\n### Subtasks\n\n1.  (5 points) $A_i \\le 2\\,000 (1 \\le i \\le Q)$.\n2.  (5 points) $A_i \\le 4\\,000\\,000 (1 \\le i \\le Q)$.\n3.  (3 points) $A_i \\le 10\\,000\\,000 (= 10^7) (1 \\le i \\le Q)$.\n4.  (12 points) $A_i \\le 100\\,000\\,000 (= 10^8) (1 \\le i \\le Q)$.\n5.  (15 points) $A_i \\le 100\\,000\\,000\\,000 (= 10^{11}) (1 \\le i \\le Q)$.\n6.  (60 points) No additional constraints. For this subtask, your score is calculated as follows.\n    *   Let $m^*$ be the maximum of the integers $m$ declared by Anna for all test cases of this subtask.\n    *   Your score is as follows.\n\n| The value of $m^*$ | Score |\n| :--- | :--- |\n| $201 \\le m^* \\le 2\\,000$ | $40 - 25 \\times \\log_{10}(\\frac{m^*}{200})$ points (rounded down to the nearest integer) |\n| $161 \\le m^* \\le 200$ | 40 points |\n| $156 \\le m^* \\le 160$ | 44 points |\n| $151 \\le m^* \\le 155$ | 48 points |\n| $146 \\le m^* \\le 150$ | 52 points |\n| $141 \\le m^* \\le 145$ | 56 points |\n| $m^* \\le 140$ | 60 points |\n\n### Sample Communication\n\nHere is a sample input for the sample grader and corresponding function calls.\n\n#### Sample Input 1\n\n```\n2\n42\n2000\n```\n\n| Call | Return Value |\n| :--- | :--- |\n| `Declare()` | 4 |\n| `Anna(42)` | `([0, 0, 1, 0], [1, 1, 0, 1])` |\n| `Bruno([1, 0, 0, 1, 0, 1, 0, 1])` | 42 |\n| `Anna(2000)` | `([0, 1], [0, 0])` |\n| `Bruno([0, 0, 1, 0])` | 2000 |\n\nIn this sample input, there are $Q (= 2)$ rounds. For the round 1, D-taro gives the integer $A_1 (= 42)$ to Anna.\n\nFor the round 2, D-taro gives the integer $A_2 (= 2000)$ to Anna.\n\nThis sample input satisfies the constraints of all the subtasks.\n\n", "locale": "en"}, "zh-CN": {"title": "[JOIST 2022] 坏掉的设备 2 / Broken Device 2", "background": "不要引入头文件，并使用 **C++ 20** 提交。", "description": "\nAnna 和 Bruno 是赌术大师。他们将和担任庄家的 D-taro 玩一个游戏。在这个游戏中，Anna 和 Bruno 分别待在不同的房间里。他们只能使用一台损坏的装置相互通信。D-taro 会给 Anna 一个整数。对于 Anna 和 Bruno 来说，这个游戏的目标是使用该装置，把给定的整数从 Anna 传递给 Bruno。\n\n当游戏开始时，一开始，Anna 声明一个整数 $m$，其取值在 1 到 2 000（含）之间。然后他们进行 $Q$ 轮。第 $i$ 轮（$1 \\le i \\le Q$）按如下方式进行。\n\n1. D-taro 给 Anna 一个整数 $A_i$。\n2. Anna 向装置输入数组 $s_i, t_i$。数组 $s_i, t_i$ 的每个元素都必须为 0 或 1。数组 $s_i, t_i$ 的长度必须相同，且长度在 1 到 $m$（含）之间。\n3. 令 $u_i$ 为由数组 $s_i$ 和 $t_i$ 通过 **riffle shuffle**（见下文）得到的数组。然后装置将 $u_i$ 发送给 Bruno。\n4. Bruno 向 D-taro 发送一个整数。若该整数与 D-taro 给 Anna 的整数 $A_i$ 相同，则 Anna 和 Bruno 在本轮获胜。\n\n请编写实现 Anna 和 Bruno 策略的程序，使他们在全部 $Q$ 轮中都能获胜。\n\n### 洗牌交错（riffle shuffle）\n\n若能将数组 $Z$ 的元素划分为两组，并满足以下两个条件，则称数组 $Z$ 是由数组 $X$ 和数组 $Y$ 通过 riffle shuffle 得到的。\n\n* 由第一组元素按原有顺序组成的数组等于数组 $X$。\n* 由第二组元素按原有顺序组成的数组等于数组 $Y$。\n\n例如，数组 $Z = [1, 1, 1, 0, 0, 0]$ 可由 $X = [1, 1, 0]$ 与 $Y = [1, 0, 0]$ 通过 riffle shuffle 得到，因为由 $Z$ 的第 1、2、4 个元素按原顺序组成的数组为 $[1, 1, 0]$，而由第 3、5、6 个元素按原顺序组成的数组为 $[1, 0, 0]$。\n\n另一方面，若 $X = [1, 1, 0]$、$Y = [1, 0, 0]$，而 $Z = [0, 0, 0, 1, 1, 1]$，则数组 $Z$ 不是由 $X$ 和 $Y$ 通过 riffle shuffle 得到的。\n\n### 实现细节\n\n你需要提交两个文件。\n\n第一个文件是 `Anna.cpp`。它应实现 Anna 的策略，并实现下列函数。程序应通过预处理指令 `#include` 包含 `Anna.h`。\n\n* `int Declare()`\n\n  该函数在开始时被调用一次。\n  * 返回值是 Anna 声明的整数 $m$。\n  * 整数 $m$ 必须在 1 到 2 000（含）之间。若不满足此条件，你的程序将被判为 **Wrong Answer [1]**。\n\n* `std::pair<std::vector<int>, std::vector<int>> Anna(long long A)`\n\n  在调用 `Declare` 之后，该函数将被调用 $Q$ 次。第 $i$ 次调用（$1 \\le i \\le Q$）对应第 $i$ 轮的步骤 1 和步骤 2。\n  * 参数 $A$ 是 D-taro 给 Anna 的整数 $A_i$。\n  * 返回值是 Anna 输入到装置中的两个数组 $s_i, t_i$ 组成的二元组。\n  * 数组 $s_i, t_i$ 的每个元素都必须为 0 或 1。若不满足此条件，你的程序将被判为 **Wrong Answer [2]**。\n  * 数组 $s_i, t_i$ 的长度都必须在 1 到 $m$（含）之间。若不满足此条件，你的程序将被判为 **Wrong Answer [3]**。\n  * 数组 $s_i, t_i$ 的长度必须相同。若不满足此条件，你的程序将被判为 **Wrong Answer [4]**。\n\n第二个文件是 `Bruno.cpp`。它应实现 Bruno 的策略，并实现下列函数。程序应通过预处理指令 `#include` 包含 `Bruno.h`。\n\n* `long long Bruno(std::vector<int> u)`\n\n  在 Anna 向装置输入数组之后，该函数会被调用一次。总共，该函数会被调用 $Q$ 次。第 $i$ 次调用（$1 \\le i \\le Q$）对应第 $i$ 轮的步骤 3 和步骤 4。\n  * 参数 `u` 是装置在第 $i$ 轮发送给 Bruno 的数组 $u_i$。\n  * 返回值是 Bruno 发送给 D-taro 的整数。\n  * 返回值必须与 D-taro 给 Anna 的整数 $A_i$ 相同。若不满足此条件，你的程序将被判为 **Wrong Answer [5]**。\n\n### 重要注意事项\n\n* 你的程序可以实现其他用于内部的函数，或使用全局变量。提交的文件将与评测器一起编译，变成一个可执行文件。所有全局变量和内部函数都应当声明在未命名命名空间中，以避免与其他文件冲突。评测时会以 Anna 进程和 Bruno 进程两个进程形式运行。Anna 进程与 Bruno 进程不能共享全局变量。\n* 你的程序不得使用标准输入与标准输出。你的程序不得通过任何方式与其他文件通信。但是，你的程序可以向标准错误输出调试信息。\n\n### 编译与本地测试\n\n你可以从竞赛网页下载一个压缩包，其中包含用于本地测试你程序的样例评测器。压缩包还包含你程序的样例源代码。\n\n样例评测器为文件 `grader.cpp`。为了测试你的程序，请将 `grader.cpp`、`Anna.cpp`、`Bruno.cpp`、`Anna.h`、`Bruno.h` 放在同一目录下，并运行如下命令以编译程序。\n\n```\ng++ -std=gnu++17 -O2 -o grader grader.cpp Anna.cpp Bruno.cpp\n```\n\n编译成功后，会生成名为 `grader` 的可执行文件。\n\n请注意，实际评测器与样例评测器不同。样例评测器以单进程形式运行，从标准输入读入数据，并将结果写到标准输出。\n", "inputFormat": "\n样例评测器从标准输入读取如下数据。\n\n> $Q$ \\\n> $A_1$ \\\n> $A_2$ \\\n> $\\vdots$ \\\n> $A_Q$\n", "outputFormat": "\n样例评测器向标准输出写出如下信息（引号仅为说明）。\n\n* 若你的程序被判定为正确，它会输出函数 `Declare` 的返回值 $m$，例如 “Accepted: 2000”。\n* 若你的程序被判定为任一类 Wrong Answer，样例评测器会写出其类型，例如 “Wrong Answer [1]”。\n\n如果你的程序同时触犯多类 Wrong Answer 的条件，样例评测器只报告其中一种。\n\n样例评测器在每一轮计算 riffle shuffle 时使用伪随机数。其结果在不同执行中不会改变。为了更改伪随机数的种子，请如下方式执行样例评测器。\n\n```\n./grader 2022\n```\n\n第一个参数应为一个整数。\n", "hint": "\n#### 约束\n\n* $1 \\le Q \\le 1\\,000$。\n* $1 \\le A_i \\le 1\\,000\\,000\\,000\\,000\\,000\\,000 \\ (= 10^{18}) \\ (1 \\le i \\le Q)$。\n\n#### 子任务\n\n1. （5 分）$A_i \\le 2\\,000 \\ (1 \\le i \\le Q)$。\n2. （5 分）$A_i \\le 4\\,000\\,000 \\ (1 \\le i \\le Q)$。\n3. （3 分）$A_i \\le 10\\,000\\,000 \\ (= 10^7) \\ (1 \\le i \\le Q)$。\n4. （12 分）$A_i \\le 100\\,000\\,000 \\ (= 10^8) \\ (1 \\le i \\le Q)$。\n5. （15 分）$A_i \\le 100\\,000\\,000\\,000 \\ (= 10^{11}) \\ (1 \\le i \\le Q)$。\n6. （60 分）无限制。对于本子任务，你的得分计算如下。\n   * 令 $m^*$ 为本子任务所有测试中，Anna 声明的整数 $m$ 的最大值。\n   * 你的得分如下所示。\n\n| $m^*$ 的取值 | 分数 |\n| :--- | :--- |\n| $201 \\le m^* \\le 2\\,000$ | $40 - 25 \\times \\log_{10}\\!\\left(\\dfrac{m^*}{200}\\right)$ 分（向下取整为整数） |\n| $161 \\le m^* \\le 200$ | 40 分 |\n| $156 \\le m^* \\le 160$ | 44 分 |\n| $151 \\le m^* \\le 155$ | 48 分 |\n| $146 \\le m^* \\le 150$ | 52 分 |\n| $141 \\le m^* \\le 145$ | 56 分 |\n| $m^* \\le 140$ | 60 分 |\n\n### 样例通信\n\n下面给出样例评测器的一个样例输入以及相应的函数调用。\n\n#### 样例输入 1\n\n```\n2\n42\n2000\n```\n\n| 调用 | 返回值 |\n| :--- | :--- |\n| `Declare()` | 4 |\n| `Anna(42)` | `([0, 0, 1, 0], [1, 1, 0, 1])` |\n| `Bruno([1, 0, 0, 1, 0, 1, 0, 1])` | 42 |\n| `Anna(2000)` | `([0, 1], [0, 0])` |\n| `Bruno([0, 0, 1, 0])` | 2000 |\n\n在该样例输入中，共有 $Q \\ (= 2)$ 轮。对于第 1 轮，D-taro 给 Anna 的整数为 $A_1 \\ (= 42)$。\n\n对于第 2 轮，D-taro 给 Anna 的整数为 $A_2 \\ (= 2000)$。\n\n该样例输入满足所有子任务的约束。\n", "locale": "zh-CN"}}}
{"pid": "P9527", "type": "P", "difficulty": 5, "samples": [["4 7\n1 2\n2 3\n3 4\n1\n1\n1\n1\n11\n1 2 1 2\n1 1 0 2\n2 1\n2 2\n2 3\n2 4\n1 4 10 2\n2 1\n2 2\n2 3\n2 4", "4\n2\n2\n1\n1\n4\n4\n2"], ["6 10\n5 6\n1 2\n1 4\n2 6\n3 6\n9\n2\n3\n4\n9\n1\n10\n1 5 1 7\n2 4\n1 4 1 9\n1 5 0 7\n2 1\n1 1 1 3\n1 6 1 4\n2 5\n2 4\n2 3", "4\n1\n4\n8\n2"], ["8 10\n1 3\n3 5\n4 7\n6 7\n4 5\n7 8\n2 4\n5\n8\n6\n4\n6\n2\n9\n3\n11\n1 2 2 0\n2 1\n1 6 1 0\n2 4\n2 6\n1 5 2 0\n2 8\n1 7 2 0\n2 6\n2 7\n2 4", "5\n0\n0\n3\n0\n0\n0"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOIST 2022] 洒水器 / Sprinkler", "background": "JOISC2022 D3T2", "description": "JOI 君有多年在自家菜园种植蔬菜的经验，现在他计划管理 IOI 农场。\n\nIOI 农场由 $N$ 块土地组成。土地间有 $N-1$ 条双向道路相连，编号从 $1$ 到 $N-1$，第 $i$ 条道路连接土地 $A_i$ 和 $B_i$，任意两块土地间都可以通过道路互达。农场的每块土地上都有一个洒水器，使用洒水器可以向附近的土地洒水。\n\nJOI 君计划在 IOI 农场种植 JOI 谷。JOI 谷是一种奇特的作物，它在被浇水时高度会立刻发生变化。但是同时，JOI 谷是一种脆弱的植物，若它的高度大于等于 $L$，JOI 谷顶部长为 $L$ 的部分会立刻断裂并掉落。JOI 君会收获掉落的部分。\n\n初始时，JOI 君在土地 $j$ 上种了一株高度为 $H_j$ 的 JOI 谷，之后的 $Q$ 天，JOI 君都会照料这些 JOI 谷，在第 $k$ 天，JOI 君会做如下两个操作之一：\n\n- 操作 $1$：JOI 君使用土地 $X_k$ 上的洒水器，向与土地 $X_k$ 距离不超过 $D_k$ 的土地上浇水，使这些土地上的 JOI 谷高度乘以 $W_k$。由于 JOI 谷会不断断裂，因此若对一株原高度为 $h$ 的 JOI 谷洒水，它的高度会变为 $hW_k\\bmod L$。\n- 操作 $2$：JOI 君测量土地 $X_k$ 上 JOI 谷的高度。\n\n土地 $x$ 和土地 $y$ 间距离的定义为：从土地 $x$ 前往土地 $y$ 经过道路数的最小值。\n\nJOI 君希望 JOI 谷按照计划长大，因此，他希望提前算出每次操作 $2$ 应当测量出 JOI 谷的高度。", "inputFormat": "第一行两个整数 $N,L$，表示土地块数和 JOI 谷的断裂阈值。\n\n接下来 $N-1$ 行，每行两个整数 $A_i,B_i$ 表示一条道路。\n\n接下来 $N$ 行，每行一个整数 $H_i$ 表示 JOI 谷的初始高度。\n\n接下来一行一个整数 $Q$ 表示操作次数。\n\n接下来 $Q$ 行，第 $k$ 行以 $T_k$ 开头，表示这次操作类型，接下来：\n\n- 若 $T_k=1$，这是一次操作 $1$，接下来三个整数 $X_k,D_k,W_k$ 分别表示洒水器编号，洒水半径和生长参数。\n- 若 $T_k=2$，这是一次操作 $2$，接下来一个整数 $X_k$ 表示需要测量的 JOI 谷的编号。", "outputFormat": "对于每一次操作 $2$，输出一个整数表示 JOI 谷的预期高度。", "hint": "**【样例解释 #1】**\n\n初始时，JOI 君在所有土地上种植了高度为 $1$ 的 JOI 谷。\n\n第一天，JOI 君使用土地 $2$ 的洒水器，土地 $1,2,3$ 的 JOI 谷被影响，高度乘以 $2$，四株 JOI 谷的高度变为 $2,2,2,1$。\n\n第二天，JOI 君使用土地 $1$ 的洒水器，土地 $1$ 的 JOI 谷被影响，高度乘以 $2$，四株 JOI 谷的高度变为 $4,2,2,1$。\n\n第七天，JOI 君使用土地 $4$ 的洒水器，土地 $1,2,3,4$ 的 JOI 谷被影响，高度乘以 $2$，第一株 JOI 谷的高度变为 $8$，发生断裂，因此四株 JOI 谷的高度变为 $1,4,4,2$。\n\n这组样例满足子任务 $1,5,6$ 的限制。\n\n**【样例解释 #2】**\n\n第一天，JOI 君使用土地 $5$ 的洒水器，土地 $5,6$ 上的 JOI 谷高度乘以 $7$，高度分别变为 $63,7$，因此，土地 $5$ 上的 JOI 谷会不断断裂，高度变为 $3$。\n\n这组样例满足子任务 $1,2,3,6$ 的限制。\n\n**【样例解释 #3】**\n\n这组样例满足子任务 $1,3,4,6$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $2\\leq N\\leq 200000$。\n- $2\\leq L\\leq 10^9$。\n- $1\\leq A_i\\lt B_i\\leq N$ $(i\\in[1,N-1])$。\n- 任意土地之间都可以通过若干条道路到达。\n- $0\\leq H_j\\lt L$ $(1\\leq j\\leq N)$。\n- $1\\leq Q\\leq 400000$。\n- $T_k$ 均为 $1$ 或 $2$。\n- 对于满足 $T_k=1$ $(k\\in[1, Q])$ 的 $k$，保证 $1\\leq X_k\\leq N, 0\\leq D_k\\leq 40, 0\\leq W_k\\lt L$。\n- 对于满足 $T_k=2$ $(k\\in[1, Q])$ 的 $k$，保证 $1\\leq X_k\\leq N$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$N,Q\\le 1000$|$3$|\n|$2$|对于满足 $T_k=1$ 的 $k$，保证 $D_k\\leq 1$|$9$|\n|$3$|对于满足 $T_k=1$ 的 $k$，保证 $D_k\\leq 2$|$29$|\n|$4$|对于满足 $T_k=1$ 的 $k$，保证 $W_k=0$|$12$|\n|$5$|对于满足 $T_k=1$ 的 $k$，保证 $W_k=2$|$30$|\n|$6$|无附加限制|$17$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIST 2022] 洒水器 / Sprinkler", "background": "JOISC2022 D3T2", "description": "JOI 君有多年在自家菜园种植蔬菜的经验，现在他计划管理 IOI 农场。\n\nIOI 农场由 $N$ 块土地组成。土地间有 $N-1$ 条双向道路相连，编号从 $1$ 到 $N-1$，第 $i$ 条道路连接土地 $A_i$ 和 $B_i$，任意两块土地间都可以通过道路互达。农场的每块土地上都有一个洒水器，使用洒水器可以向附近的土地洒水。\n\nJOI 君计划在 IOI 农场种植 JOI 谷。JOI 谷是一种奇特的作物，它在被浇水时高度会立刻发生变化。但是同时，JOI 谷是一种脆弱的植物，若它的高度大于等于 $L$，JOI 谷顶部长为 $L$ 的部分会立刻断裂并掉落。JOI 君会收获掉落的部分。\n\n初始时，JOI 君在土地 $j$ 上种了一株高度为 $H_j$ 的 JOI 谷，之后的 $Q$ 天，JOI 君都会照料这些 JOI 谷，在第 $k$ 天，JOI 君会做如下两个操作之一：\n\n- 操作 $1$：JOI 君使用土地 $X_k$ 上的洒水器，向与土地 $X_k$ 距离不超过 $D_k$ 的土地上浇水，使这些土地上的 JOI 谷高度乘以 $W_k$。由于 JOI 谷会不断断裂，因此若对一株原高度为 $h$ 的 JOI 谷洒水，它的高度会变为 $hW_k\\bmod L$。\n- 操作 $2$：JOI 君测量土地 $X_k$ 上 JOI 谷的高度。\n\n土地 $x$ 和土地 $y$ 间距离的定义为：从土地 $x$ 前往土地 $y$ 经过道路数的最小值。\n\nJOI 君希望 JOI 谷按照计划长大，因此，他希望提前算出每次操作 $2$ 应当测量出 JOI 谷的高度。", "inputFormat": "第一行两个整数 $N,L$，表示土地块数和 JOI 谷的断裂阈值。\n\n接下来 $N-1$ 行，每行两个整数 $A_i,B_i$ 表示一条道路。\n\n接下来 $N$ 行，每行一个整数 $H_i$ 表示 JOI 谷的初始高度。\n\n接下来一行一个整数 $Q$ 表示操作次数。\n\n接下来 $Q$ 行，第 $k$ 行以 $T_k$ 开头，表示这次操作类型，接下来：\n\n- 若 $T_k=1$，这是一次操作 $1$，接下来三个整数 $X_k,D_k,W_k$ 分别表示洒水器编号，洒水半径和生长参数。\n- 若 $T_k=2$，这是一次操作 $2$，接下来一个整数 $X_k$ 表示需要测量的 JOI 谷的编号。", "outputFormat": "对于每一次操作 $2$，输出一个整数表示 JOI 谷的预期高度。", "hint": "**【样例解释 #1】**\n\n初始时，JOI 君在所有土地上种植了高度为 $1$ 的 JOI 谷。\n\n第一天，JOI 君使用土地 $2$ 的洒水器，土地 $1,2,3$ 的 JOI 谷被影响，高度乘以 $2$，四株 JOI 谷的高度变为 $2,2,2,1$。\n\n第二天，JOI 君使用土地 $1$ 的洒水器，土地 $1$ 的 JOI 谷被影响，高度乘以 $2$，四株 JOI 谷的高度变为 $4,2,2,1$。\n\n第七天，JOI 君使用土地 $4$ 的洒水器，土地 $1,2,3,4$ 的 JOI 谷被影响，高度乘以 $2$，第一株 JOI 谷的高度变为 $8$，发生断裂，因此四株 JOI 谷的高度变为 $1,4,4,2$。\n\n这组样例满足子任务 $1,5,6$ 的限制。\n\n**【样例解释 #2】**\n\n第一天，JOI 君使用土地 $5$ 的洒水器，土地 $5,6$ 上的 JOI 谷高度乘以 $7$，高度分别变为 $63,7$，因此，土地 $5$ 上的 JOI 谷会不断断裂，高度变为 $3$。\n\n这组样例满足子任务 $1,2,3,6$ 的限制。\n\n**【样例解释 #3】**\n\n这组样例满足子任务 $1,3,4,6$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $2\\leq N\\leq 200000$。\n- $2\\leq L\\leq 10^9$。\n- $1\\leq A_i\\lt B_i\\leq N$ $(i\\in[1,N-1])$。\n- 任意土地之间都可以通过若干条道路到达。\n- $0\\leq H_j\\lt L$ $(1\\leq j\\leq N)$。\n- $1\\leq Q\\leq 400000$。\n- $T_k$ 均为 $1$ 或 $2$。\n- 对于满足 $T_k=1$ $(k\\in[1, Q])$ 的 $k$，保证 $1\\leq X_k\\leq N, 0\\leq D_k\\leq 40, 0\\leq W_k\\lt L$。\n- 对于满足 $T_k=2$ $(k\\in[1, Q])$ 的 $k$，保证 $1\\leq X_k\\leq N$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$N,Q\\le 1000$|$3$|\n|$2$|对于满足 $T_k=1$ 的 $k$，保证 $D_k\\leq 1$|$9$|\n|$3$|对于满足 $T_k=1$ 的 $k$，保证 $D_k\\leq 2$|$29$|\n|$4$|对于满足 $T_k=1$ 的 $k$，保证 $W_k=0$|$12$|\n|$5$|对于满足 $T_k=1$ 的 $k$，保证 $W_k=2$|$30$|\n|$6$|无附加限制|$17$|", "locale": "zh-CN"}}}
{"pid": "P9528", "type": "P", "difficulty": 7, "samples": [["4 1\n1 1 1\n2 2 1\n1 3 1\n2 0 1", "0\n1\n1\n2"], ["20 1\n2 16 778913911\n1 7 558407445\n1 1 589762439\n1 17 74646747\n1 1 149104909\n1 15 956697952\n2 6 389372991\n2 4 867453845\n1 15 157353445\n1 9 846177695\n1 7 747107163\n2 10 525670462\n2 16 478912944\n2 6 301733761\n2 12 132966485\n1 1 748012313\n2 10 830922632\n1 19 969484637\n1 13 370330582\n1 1 464798040", "0\n0\n0\n74646747\n74646747\n778913911\n1168286902\n1168286902\n1168286902\n1168286902\n1168286902\n1693957364\n2103741597\n2405475358\n2405475358\n2405475358\n2725982591\n2725982591\n2858949076\n2858949076"], ["20 6\n2 27 12\n2 9 11\n1 36 10\n2 39 4\n2 14 9\n2 33 7\n2 38 20\n2 0 20\n2 25 16\n1 14 3\n1 13 19\n2 6 4\n2 15 6\n2 33 4\n1 12 11\n1 44 1\n2 17 14\n2 12 19\n1 48 18\n2 30 16", "0\n0\n0\n4\n4\n10\n10\n10\n10\n13\n30\n30\n32\n32\n40\n41\n44\n44\n44\n44"], ["20 268886972\n1 984472666 733463744\n1 478477245 94817772\n1 242536956 330762563\n1 65794782 319137646\n1 320548477 937296140\n1 815011370 938193848\n1 565184190 917533785\n1 245417414 534089975\n1 529908772 977043962\n1 603891865 700935654\n2 167042244 479827216\n2 173921297 798343455\n2 916159596 810126726\n2 999299355 465535307\n2 965968070 501768990\n2 936073643 174976034\n2 832859952 778072072\n2 955489596 704853861\n2 246733786 382428992\n2 227669861 390905006", "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n479827216\n1278170671\n2088297397\n2553832704\n2949828263\n2949828263\n3727900335\n3727900335\n4110329327\n4501234333"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOIST 2022] 蚂蚁与方糖 / Ants and Sugar", "background": "JOISC2022 D3T3", "description": "JOI 君是一个生物学家。他准备对蚂蚁和方糖做一些实验。\n\nJOI 君的实验在一个长度为 $10^9$ 的木条上进行。这根木条被从左往右放置。木条上距离左端点 $x$ 的点被称作坐标为 $x$ 的点。\n\n现在，木条上什么都没有。JOI 君将会进行 $Q$ 次操作。第 $i$ 个操作 $(1 \\le i \\le Q)$ 由三个整数 $T_i,X_i,A_i$ 描述，表示：\n\n- 若 $T_i=1$，JOI 君在坐标为 $X_i$ 的点处放了 $A_i$ 个蚂蚁。\n- 若 $T_i=2$，JOI 君在坐标为 $X_i$ 的点处放了 $A_i$ 块方糖。\n\n由于蚂蚁和方糖都很小，所以可能会有一些蚂蚁和方糖放在同一个点上。JOI 君也可能在同一个点执行多次操作。\n\n这次实验中使用的蚂蚁具有「好奇心强」的萌点。具体地，当 JOI 君拍手时，每个蚂蚁会执行以下操作：\n\n- 如果存在一块方糖与该蚂蚁距离不超过 $L$，它会选择任意一块并吃掉。\n\n可能存在多个蚂蚁同时吃掉一块方糖的情况。\n\n对于每个 $k$ $(1\\le k \\le Q)$，JOI 君想要知道以下问题的答案。\n\n- 假设 JOI 君在第 $k$ 次操作后拍了一次手，最多有多少块方糖被至少一个蚂蚁吃掉了？\n\n请写一个程序，对于给定的 JOI 君执行的操作和 $L$ 的值，对于所有 $k$ 回答 JOI 君的每个问题。\n\n注意 JOI 君并不会真的拍手。因此蚂蚁的位置不会改变，方糖也不会被吃掉。", "inputFormat": "第一行，两个正整数 $Q,L$，表示操作个数和蚂蚁可能吃到的方糖的范围。\n\n接下来 $Q$ 行，其中第 $i$ $(1 \\le i \\le Q)$ 包含三个整数 $T_i,X_i,A_i$，表示一次操作。", "outputFormat": "输出 $Q$ 行，第 $k$ $(1 \\le k \\le Q)$ 行包含一个整数，表示若 JOI 君在第 $k$ 次操作后拍了一次手，被至少一个蚂蚁吃掉的方糖的个数可能的最大值。", "hint": "**【样例解释 #1】**\n\n在这组样例中，所有操作和每个 $k$ 的答案如下：\n\n 1. JOI 君在坐标为 $1$ 的点放了一个蚂蚁。  \n    由于没有方糖，对应的答案为 $0$。\n 2. JOI 君在坐标为 $2$ 的点放了一块方糖。  \n    假设 JOI 君此时拍手，则坐标为 $1$ 的蚂蚁会吃掉坐标为 $2$ 的方糖，所以对应的答案为 $1$。\n 3. JOI 君在坐标为 $3$ 的点放了一个蚂蚁。  \n    假设 JOI 君此时拍手，则坐标为 $1,3$ 的蚂蚁会同时吃掉坐标为 $2$ 的方糖，所以对应的答案为 $1$。\n 4. JOI 君在坐标为 $0$ 的点放了一块方糖。  \n    假设 JOI 君此时拍手，则坐标为 $1,3$ 的蚂蚁可以分别吃掉坐标为 $0,2$ 的方糖，所以对应的答案为 $2$。\n\n这组样例满足子任务 $1,2,4$ 的限制。\n\n**【样例解释 #2】**\n\n这组样例满足子任务 $1,2,4$ 的限制。\n\n**【样例解释 #3】**\n\n这组样例满足子任务 $1,4$ 的限制。\n\n**【样例解释 #4】**\n\n这组样例满足子任务 $1,3,4$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $1 \\le Q \\le 500\\,000$。\n- $1 \\le L \\le 10^9$。\n- $T_i \\in \\{1,2\\}$。\n- $0 \\le X_i \\le 10^9$ $(1 \\le i \\le Q)$。\n- $1 \\le A_i \\le 10^9$ $(1 \\le i \\le Q)$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$Q \\le 3\\,000$|$6$|\n|$2$|$L=1$，$X_i \\le Q-1$，$X_i+T_i$ 是偶数 $(1\\le i\\le Q)$|$16$|\n|$3$|$Q$ 是偶数，$T_i = 1$ $(1 \\le i \\le Q/2)$，$T_i = 2$ $(Q/2+1 \\le i \\le Q)$|$26$|\n|$4$|无附加限制|$52$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIST 2022] 蚂蚁与方糖 / Ants and Sugar", "background": "JOISC2022 D3T3", "description": "JOI 君是一个生物学家。他准备对蚂蚁和方糖做一些实验。\n\nJOI 君的实验在一个长度为 $10^9$ 的木条上进行。这根木条被从左往右放置。木条上距离左端点 $x$ 的点被称作坐标为 $x$ 的点。\n\n现在，木条上什么都没有。JOI 君将会进行 $Q$ 次操作。第 $i$ 个操作 $(1 \\le i \\le Q)$ 由三个整数 $T_i,X_i,A_i$ 描述，表示：\n\n- 若 $T_i=1$，JOI 君在坐标为 $X_i$ 的点处放了 $A_i$ 个蚂蚁。\n- 若 $T_i=2$，JOI 君在坐标为 $X_i$ 的点处放了 $A_i$ 块方糖。\n\n由于蚂蚁和方糖都很小，所以可能会有一些蚂蚁和方糖放在同一个点上。JOI 君也可能在同一个点执行多次操作。\n\n这次实验中使用的蚂蚁具有「好奇心强」的萌点。具体地，当 JOI 君拍手时，每个蚂蚁会执行以下操作：\n\n- 如果存在一块方糖与该蚂蚁距离不超过 $L$，它会选择任意一块并吃掉。\n\n可能存在多个蚂蚁同时吃掉一块方糖的情况。\n\n对于每个 $k$ $(1\\le k \\le Q)$，JOI 君想要知道以下问题的答案。\n\n- 假设 JOI 君在第 $k$ 次操作后拍了一次手，最多有多少块方糖被至少一个蚂蚁吃掉了？\n\n请写一个程序，对于给定的 JOI 君执行的操作和 $L$ 的值，对于所有 $k$ 回答 JOI 君的每个问题。\n\n注意 JOI 君并不会真的拍手。因此蚂蚁的位置不会改变，方糖也不会被吃掉。", "inputFormat": "第一行，两个正整数 $Q,L$，表示操作个数和蚂蚁可能吃到的方糖的范围。\n\n接下来 $Q$ 行，其中第 $i$ $(1 \\le i \\le Q)$ 包含三个整数 $T_i,X_i,A_i$，表示一次操作。", "outputFormat": "输出 $Q$ 行，第 $k$ $(1 \\le k \\le Q)$ 行包含一个整数，表示若 JOI 君在第 $k$ 次操作后拍了一次手，被至少一个蚂蚁吃掉的方糖的个数可能的最大值。", "hint": "**【样例解释 #1】**\n\n在这组样例中，所有操作和每个 $k$ 的答案如下：\n\n 1. JOI 君在坐标为 $1$ 的点放了一个蚂蚁。  \n    由于没有方糖，对应的答案为 $0$。\n 2. JOI 君在坐标为 $2$ 的点放了一块方糖。  \n    假设 JOI 君此时拍手，则坐标为 $1$ 的蚂蚁会吃掉坐标为 $2$ 的方糖，所以对应的答案为 $1$。\n 3. JOI 君在坐标为 $3$ 的点放了一个蚂蚁。  \n    假设 JOI 君此时拍手，则坐标为 $1,3$ 的蚂蚁会同时吃掉坐标为 $2$ 的方糖，所以对应的答案为 $1$。\n 4. JOI 君在坐标为 $0$ 的点放了一块方糖。  \n    假设 JOI 君此时拍手，则坐标为 $1,3$ 的蚂蚁可以分别吃掉坐标为 $0,2$ 的方糖，所以对应的答案为 $2$。\n\n这组样例满足子任务 $1,2,4$ 的限制。\n\n**【样例解释 #2】**\n\n这组样例满足子任务 $1,2,4$ 的限制。\n\n**【样例解释 #3】**\n\n这组样例满足子任务 $1,4$ 的限制。\n\n**【样例解释 #4】**\n\n这组样例满足子任务 $1,3,4$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $1 \\le Q \\le 500\\,000$。\n- $1 \\le L \\le 10^9$。\n- $T_i \\in \\{1,2\\}$。\n- $0 \\le X_i \\le 10^9$ $(1 \\le i \\le Q)$。\n- $1 \\le A_i \\le 10^9$ $(1 \\le i \\le Q)$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$Q \\le 3\\,000$|$6$|\n|$2$|$L=1$，$X_i \\le Q-1$，$X_i+T_i$ 是偶数 $(1\\le i\\le Q)$|$16$|\n|$3$|$Q$ 是偶数，$T_i = 1$ $(1 \\le i \\le Q/2)$，$T_i = 2$ $(Q/2+1 \\le i \\le Q)$|$26$|\n|$4$|无附加限制|$52$|", "locale": "zh-CN"}}}
{"pid": "P9529", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "Special Judge", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOIST 2022] 一流团子师傅 / Super Dango Maker", "background": "JOISC2022 D4T1\n\n**特别提醒，由于洛谷交互机制的特殊性，你不能在程序中引用 `dango3.h`，而需要把 `dango3.h` 中的内容加入文件的开头。即，在程序中 `void Solve(int N, int M)` 的前面加入以下几行语句：**\n\n```cpp\n#include <vector>\n\nvoid Solve(int N, int M);\n\nint Query(const std::vector<int> &x);\nvoid Answer(const std::vector<int> &a);\n```", "description": "JOI 君是一位专业的团子师傅。在 JOI 君的店里，团子的颜色很有讲究。一共有 $N$ 种颜色，编号为 $1,2,\\dots,N$。\n\n**一流团子串**是 JOI 君的店里的招牌食品。制作一个一流团子串，需要将 $N$ 个**颜色不同**的团子串在一根竹签上。\n\n对于每一种颜色，JOI 君都制作了 $M$ 个这种颜色的团子。因此，JOI 君总共有了 $NM$ 个团子。这些团子被编号为 $1,2,\\dots,NM$。使用这些团子和 $M$ 根竹签，JOI 君希望串出 $M$ 个一流团子串。\n\n为了避免在颜色上犯错误，JOI 君将会启用他的团子检测器。如果 JOI 君输入一些团子的编号，团子检测器会返回使用这些团子能制作的一流团子串的个数的最大值。当然，前提是充分使用竹签。\n\nJOI 君希望能通过使用若干次团子检测器将 $NM$ 个团子分为 $M$ 组。其中，每一组包含 $N$ 个团子，且每种颜色的团子恰有一个。\n\nJOI 君想在使用不超过 $50\\,000$ 次团子检测器的前提下完成这件事。\n\n请写一个程序，对于给定的团子的信息，实现 JOI 君使用不超过 $50\\,000$ 次团子检测器来完成任务的策略。\n\n---\n\n**【实现细节】**\n\n你的程序需要实现以下函数。\n\n  - `void Solve(int N, int M)`。  \n    对于每组测试数据，该函数会被调用恰好一次。\n      - 参数 $\\texttt N$ 是团子的颜色数 $N$。\n      - 参数 $\\texttt M$ 是 JOI 君想制作的一流团子串的个数 $M$。\n\n你的程序可以调用以下函数。\n\n  - `int Query(const std::vector<int> &x)`。  \n    你的程序可以通过调用这个函数来使用团子检测器。\n      - 参数 `x` 是输入给团子检测器的团子的编号列表。\n      - 该函数返回使用 `x` 中的团子能制作的一流团子串的最大值。\n      - `x` 中的每个元素都应当是 $[1,NM]$ 中的整数。否则你的程序会被判定为 **Wrong Answer [1]**。\n      - `x` 中的元素应当互不相同。否则你的程序会被判定为 **Wrong Answer [2]**。\n      - 你的程序不得调用该函数超过 $50\\,000$ 次。否则你的程序会被判定为 **Wrong Answer [3]**。\n\n  - `void Answer(const std::vector<int> &a)`。  \n    你的程序可以通过调用这个程序来报告分组方案。\n      - 参数 `a` 是你分出的一组团子的编号列表。\n      - `a` 的长度应当为 $N$。否则你的程序会被判定为 **Wrong Answer [4]**。\n      - `a` 中的每个元素都应当是 $[1,NM]$ 中的整数。否则你的程序会被判定为 **Wrong Answer [5]**。\n      - 在整个过程中，同一个团子不能出现在参数中多于一次。否则你的程序会被判定为 **Wrong Answer [6]**。\n      - 如果用 `a` 中的团子并不能制作一个一流团子串，你的程序会被判定为 **Wrong Answer [7]**。\n      - 该函数应当被调用恰好 $M$ 次。否则你的程序会被判定为 **Wrong Answer [8]**。\n  \n**【提示】**\n  \n  - 你的程序可以实现其他函数以供内部使用，或者使用全局变量。\n  - 你的程序不得使用标准输入输出流，也不得以任何方式访问任何文件。然而，你可以输出调试信息到标准错误流。\n  \n**【编译与测试运行】**\n  \n你可以从「附加文件」中下载样例评分器来测试你的程序。「附加文件」中也提供了你应当提交的程序的一个样例。\n\n样例评分器即 `grader.cpp`。为了测试你的程序，请将 `grader.cpp,dango3.cpp` 放置在同一个目录下，并执行如下命令来编译你的程序。\n\n`g++ -std=gnu++17 -O2 -o grader grader.cpp dango3.cpp`\n\n若编译成功，将会生成一个可执行文件 `grader`。\n\n请注意，实际使用的评分器与下发的样例评分器不同。样例评分器仅会有单个进程，从标准输入中读取输入数据并将结果输出到标准输出。\n  \n**【样例评分器输入格式】**\n  \n第一行，两个正整数 $N,M$。表示团子的颜色数和 JOI 君想制作的一流团子串的个数。\n\n第二行，$N\\times M$ 个正整数 $C_1,C_2,\\dots,C_{NM}$。其中 $C_i$ 是一个 $[1,N]$ 内的正整数，表示第 $i$ 个团子的颜色。\n  \n**【样例评分器输出格式】**\n  \n- 如果你的程序被判定为正确，样例评分器会输出调用 `Query` 的次数，如 “$\\texttt{Accepted: 2022}$”。\n- 如果你的程序被判定为任意一种 Wrong Answer，样例评分器会输出其类型，如 “$\\texttt{Wrong Answer [4]}$”。\n\n如果你的程序属于多种 Wrong Answer，样例评分器只会输出其中一种。", "inputFormat": "", "outputFormat": "", "hint": "**【样例交互】**\n\n这里是样例评分器的一组样例输入和对应的交互过程。\n\n```plain\n3 2\n3 3 1 2 1 2\n```\n\n|调用|调用|返回值|\n|:-|:-|:-|\n|$\\texttt{Solve(3, 2)}$|||\n||$\\texttt{Query([])}$|$\\texttt 0$|\n||$\\texttt{Query([4, 2, 1, 3])}$|$\\texttt 1$|\n||$\\texttt{Query([3, 4, 5])}$|$\\texttt 0$|\n||$\\texttt{Query([2, 6, 5])}$|$\\texttt 1$|\n||$\\texttt{Query([6, 5, 4, 3, 2, 1])}$|$\\texttt 2$|\n||$\\texttt{Answer([1, 6, 5])}$||\n||$\\texttt{Answer([2, 3, 4])}$||\n\n注意，这组样例**不满足任意子任务的限制**。\n\n从「附加文件」中可以下载到 $\\texttt{sample-02.txt}$，其满足子任务 $1$ 的限制。\n\n**【数据范围】**\n\n对于所有测试数据，满足：\n\n- $1 \\le C_i \\le N$ $(1 \\le i \\le NM)$。\n- 对于每个 $j$ $(1 \\le j \\le N)$，恰有 $M$ 个 $i$ $(1 \\le i \\le NM)$ 满足 $C_i = j$。  \n- $N,M$ 是正整数。\n- $C_i$ $(1 \\le i \\le NM)$ 是一个 $[1,N]$ 内的整数。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$N=M=4$|$2$|\n|$2$|$N=100$，$M=10$|$5$|\n|$3$|$N=200$，$M=25$|$15$|\n|$4$|$N=400$，$M=25$|$78$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIST 2022] 一流团子师傅 / Super Dango Maker", "background": "JOISC2022 D4T1\n\n**特别提醒，由于洛谷交互机制的特殊性，你不能在程序中引用 `dango3.h`，而需要把 `dango3.h` 中的内容加入文件的开头。即，在程序中 `void Solve(int N, int M)` 的前面加入以下几行语句：**\n\n```cpp\n#include <vector>\n\nvoid Solve(int N, int M);\n\nint Query(const std::vector<int> &x);\nvoid Answer(const std::vector<int> &a);\n```", "description": "JOI 君是一位专业的团子师傅。在 JOI 君的店里，团子的颜色很有讲究。一共有 $N$ 种颜色，编号为 $1,2,\\dots,N$。\n\n**一流团子串**是 JOI 君的店里的招牌食品。制作一个一流团子串，需要将 $N$ 个**颜色不同**的团子串在一根竹签上。\n\n对于每一种颜色，JOI 君都制作了 $M$ 个这种颜色的团子。因此，JOI 君总共有了 $NM$ 个团子。这些团子被编号为 $1,2,\\dots,NM$。使用这些团子和 $M$ 根竹签，JOI 君希望串出 $M$ 个一流团子串。\n\n为了避免在颜色上犯错误，JOI 君将会启用他的团子检测器。如果 JOI 君输入一些团子的编号，团子检测器会返回使用这些团子能制作的一流团子串的个数的最大值。当然，前提是充分使用竹签。\n\nJOI 君希望能通过使用若干次团子检测器将 $NM$ 个团子分为 $M$ 组。其中，每一组包含 $N$ 个团子，且每种颜色的团子恰有一个。\n\nJOI 君想在使用不超过 $50\\,000$ 次团子检测器的前提下完成这件事。\n\n请写一个程序，对于给定的团子的信息，实现 JOI 君使用不超过 $50\\,000$ 次团子检测器来完成任务的策略。\n\n---\n\n**【实现细节】**\n\n你的程序需要实现以下函数。\n\n  - `void Solve(int N, int M)`。  \n    对于每组测试数据，该函数会被调用恰好一次。\n      - 参数 $\\texttt N$ 是团子的颜色数 $N$。\n      - 参数 $\\texttt M$ 是 JOI 君想制作的一流团子串的个数 $M$。\n\n你的程序可以调用以下函数。\n\n  - `int Query(const std::vector<int> &x)`。  \n    你的程序可以通过调用这个函数来使用团子检测器。\n      - 参数 `x` 是输入给团子检测器的团子的编号列表。\n      - 该函数返回使用 `x` 中的团子能制作的一流团子串的最大值。\n      - `x` 中的每个元素都应当是 $[1,NM]$ 中的整数。否则你的程序会被判定为 **Wrong Answer [1]**。\n      - `x` 中的元素应当互不相同。否则你的程序会被判定为 **Wrong Answer [2]**。\n      - 你的程序不得调用该函数超过 $50\\,000$ 次。否则你的程序会被判定为 **Wrong Answer [3]**。\n\n  - `void Answer(const std::vector<int> &a)`。  \n    你的程序可以通过调用这个程序来报告分组方案。\n      - 参数 `a` 是你分出的一组团子的编号列表。\n      - `a` 的长度应当为 $N$。否则你的程序会被判定为 **Wrong Answer [4]**。\n      - `a` 中的每个元素都应当是 $[1,NM]$ 中的整数。否则你的程序会被判定为 **Wrong Answer [5]**。\n      - 在整个过程中，同一个团子不能出现在参数中多于一次。否则你的程序会被判定为 **Wrong Answer [6]**。\n      - 如果用 `a` 中的团子并不能制作一个一流团子串，你的程序会被判定为 **Wrong Answer [7]**。\n      - 该函数应当被调用恰好 $M$ 次。否则你的程序会被判定为 **Wrong Answer [8]**。\n  \n**【提示】**\n  \n  - 你的程序可以实现其他函数以供内部使用，或者使用全局变量。\n  - 你的程序不得使用标准输入输出流，也不得以任何方式访问任何文件。然而，你可以输出调试信息到标准错误流。\n  \n**【编译与测试运行】**\n  \n你可以从「附加文件」中下载样例评分器来测试你的程序。「附加文件」中也提供了你应当提交的程序的一个样例。\n\n样例评分器即 `grader.cpp`。为了测试你的程序，请将 `grader.cpp,dango3.cpp` 放置在同一个目录下，并执行如下命令来编译你的程序。\n\n`g++ -std=gnu++17 -O2 -o grader grader.cpp dango3.cpp`\n\n若编译成功，将会生成一个可执行文件 `grader`。\n\n请注意，实际使用的评分器与下发的样例评分器不同。样例评分器仅会有单个进程，从标准输入中读取输入数据并将结果输出到标准输出。\n  \n**【样例评分器输入格式】**\n  \n第一行，两个正整数 $N,M$。表示团子的颜色数和 JOI 君想制作的一流团子串的个数。\n\n第二行，$N\\times M$ 个正整数 $C_1,C_2,\\dots,C_{NM}$。其中 $C_i$ 是一个 $[1,N]$ 内的正整数，表示第 $i$ 个团子的颜色。\n  \n**【样例评分器输出格式】**\n  \n- 如果你的程序被判定为正确，样例评分器会输出调用 `Query` 的次数，如 “$\\texttt{Accepted: 2022}$”。\n- 如果你的程序被判定为任意一种 Wrong Answer，样例评分器会输出其类型，如 “$\\texttt{Wrong Answer [4]}$”。\n\n如果你的程序属于多种 Wrong Answer，样例评分器只会输出其中一种。", "inputFormat": "", "outputFormat": "", "hint": "**【样例交互】**\n\n这里是样例评分器的一组样例输入和对应的交互过程。\n\n```plain\n3 2\n3 3 1 2 1 2\n```\n\n|调用|调用|返回值|\n|:-|:-|:-|\n|$\\texttt{Solve(3, 2)}$|||\n||$\\texttt{Query([])}$|$\\texttt 0$|\n||$\\texttt{Query([4, 2, 1, 3])}$|$\\texttt 1$|\n||$\\texttt{Query([3, 4, 5])}$|$\\texttt 0$|\n||$\\texttt{Query([2, 6, 5])}$|$\\texttt 1$|\n||$\\texttt{Query([6, 5, 4, 3, 2, 1])}$|$\\texttt 2$|\n||$\\texttt{Answer([1, 6, 5])}$||\n||$\\texttt{Answer([2, 3, 4])}$||\n\n注意，这组样例**不满足任意子任务的限制**。\n\n从「附加文件」中可以下载到 $\\texttt{sample-02.txt}$，其满足子任务 $1$ 的限制。\n\n**【数据范围】**\n\n对于所有测试数据，满足：\n\n- $1 \\le C_i \\le N$ $(1 \\le i \\le NM)$。\n- 对于每个 $j$ $(1 \\le j \\le N)$，恰有 $M$ 个 $i$ $(1 \\le i \\le NM)$ 满足 $C_i = j$。  \n- $N,M$ 是正整数。\n- $C_i$ $(1 \\le i \\le NM)$ 是一个 $[1,N]$ 内的整数。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$N=M=4$|$2$|\n|$2$|$N=100$，$M=10$|$5$|\n|$3$|$N=200$，$M=25$|$15$|\n|$4$|$N=400$，$M=25$|$78$|", "locale": "zh-CN"}}}
{"pid": "P9530", "type": "P", "difficulty": 7, "samples": [["5\n6 4 2 2 6\n6\n2 1 5\n2 1 3\n1 3 1\n2 2 5\n2 1 5\n2 2 4", "5\n2\n2\n3\n1"], ["13\n10 4 2 5 20 5 4 8 20 10 3 3 7\n1\n2 1 13", "7"], ["12\n32 32 4 1 1 1 1 4 4 16 32 128\n7\n2 1 12\n2 2 6\n2 8 10\n2 1 9\n2 3 8\n2 5 9\n2 2 12", "12\n1\n1\n2\n6\n2\n1"], ["10\n2 3 5 10 1 3 4 9 5 2\n8\n2 1 10\n1 10 5\n2 1 10\n1 4 1000000000\n2 1 10\n1 8 20\n1 4 8\n2 1 10", "4\n6\n1\n6"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOIST 2022] 鱼 2 / Fish 2", "background": "JOISC2022 D4T2", "description": "JOI 君有 $N$ 条鱼，编号为 $1,2,\\dots,N$。第 $i$ $(1 \\le i \\le N)$ 条鱼的大小为 $A_i$。\n\n当我们养鱼的时候，需要注意如下的一个事实：如果有两条鱼离得很近，那么随着时间的流逝，可能会有其中一条吃掉另一条。其中，两条鱼离得很近，当且仅当它们中间没有鱼。  \n更具体地，如果鱼 $x$ 的大小不小于鱼 $y$ 的大小，且鱼 $x,y$ 离得很近，那么 $x$ 可以吃掉 $y$，且 $x$ 的大小变为原来 $x,y$ 的大小之和。如果 $x,y$ 一样大，那么 $x$ 吃掉 $y$ 或 $y$ 吃掉 $x$ 都可能发生。\n\nJOI 君会养 $Q$ 天鱼。为了消磨时光，他会进行如下的思想实验。在第 $j$ 天 $(1 \\le j \\le Q)$，JOI 君会进行如下行动中的一个：\n\n- 第一类：JOI 君给鱼 $X_j$ 吃了某些秘制的食物。这会将鱼 $X_j$ 的大小变为 $Y_j$。\n\n- 第二类：JOI 君将编号在区间 $[L_j,R_j]$ 内的鱼单独拿出来，并进行以下实验：  \n  JOI 君将鱼 $L_j,L_j+1,\\dots,R_j$ 从左到右依次放在一个鱼缸中。由于鱼们具有如上所述的特点，最后只有一条鱼会存活。存活的这条鱼的编号取决于在哪些时刻哪些鱼吃掉了哪些鱼。JOI 君想知道可能成为最后存活者的鱼的条数。在实验中，鱼的编号不会改变，也不能有两条鱼同时吃掉同一条鱼。\n\n请写一个程序，对于给定的 JOI 君的鱼和实验的信息，计算每个第二类行动的答案来让 JOI 君能够证明或证伪自己的观点。注意这只是思想实验，并没有任何鱼真的被吃掉。", "inputFormat": "第一行，一个正整数 $N$，表示鱼的条数。\n\n第二行，$N$ 个正整数 $A_1,A_2,\\dots,A_N$，表示每条鱼的大小。\n\n第三行，一个正整数 $Q$，表示养鱼的天数。  \n接下来 $Q$ 行，其中第 $j$ $(1 \\le j \\le Q)$ 行包含若干个由空格分隔的整数，其中第一个整数为 $T_j$，表示操作类型。\n  - 若 $T_j=1$，则该行还包含两个正整数 $X_j,Y_j$，表示 JOI 君第 $j$ 天进行了第一类行动。鱼 $X_j$ 的大小变为 $Y_j$。\n  - 若 $T_j=2$，则该行还包含两个正整数 $L_j,R_j$，表示 JOI 君第 $j$ 天进行了第二类行动。JOI 君对编号在 $[L_j,R_j]$ 内的鱼进行了一次实验。", "outputFormat": "对于每次第二类行动（即，对于每个满足 $T_j=2$ 的 $j$ $(1 \\le j \\le Q)$），输出一行一个整数，表示可能成为最后存活者的鱼的条数。", "hint": "**【样例解释 #1】**\n\n在 $6$ 天中，JOI 君进行了以下行动：\n\n- 第一天，他对鱼 $1,2,3,4,5$ 进行了一次实验。\n- 第二天，他对鱼 $1,2,3$ 进行了一次实验。\n- 第三天，他给鱼 $3$ 吃了秘制食物，使其大小变为 $1$。\n- 第四天，他对鱼 $2,3,4,5$ 进行了一次实验。\n- 第五天，他对鱼 $1,2,3,4,5$ 进行了一次实验。\n- 第六天，他对鱼 $2,3,4$ 进行了一次实验。\n\n第一天的实验的结果如下：\n\n- 鱼缸中的鱼的大小依次为 $[6,4,2,2,6]$。\n- 例如，经过如下过程，鱼 $2$ 会成为最后存活者。（其中粗体为鱼 $2$ 的大小。）  \n  $[6,\\textbf 4,2,2,6]$（初始状态）$\\longrightarrow$ $[6,\\textbf 4,4,6]$（鱼 $4$ 吃掉鱼 $3$）$\\longrightarrow$ $[6,\\textbf 8,6]$（鱼 $2$ 吃掉鱼 $4$）$\\longrightarrow$ $[\\textbf{14},6]$（鱼 $2$ 吃掉鱼 $1$）$\\longrightarrow$ $[\\textbf{20}]$（鱼 $2$ 吃掉鱼 $5$）。\n- 类似地，鱼 $1,2,3,4,5$ 都可能成为最后存活者。因此答案为 $5$。\n\n该样例满足子任务 $1,3,6$ 的限制。\n\n**【样例解释 #2】**\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\n该样例满足子任务 $1,3,4,6$ 的限制。\n\n**【样例解释 #4】**\n\n该样例满足子任务 $1,3,5,6$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $1 \\le N,Q \\le 100\\,000$。\n- $1 \\le A_i \\le 10^9$ $(1\\le i\\le N)$。\n- $T_j \\in \\{1,2\\}$。\n- $1 \\le X_j \\le N$ $(1\\le j\\le Q)$。\n- $1 \\le Y_j \\le 10^9$。\n- $1 \\le L_j \\le R_j \\le N$ $(1 \\le j \\le Q)$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$N \\le 500$，$Q \\le 500$|$5$|\n|$2$|$Q=1$，$T_j=2$，$L_j=1$，$R_j=N$ $(1 \\le j \\le Q)$|$8$|\n|$3$|$Q\\le 1\\,000$|$12$|\n|$4$|$T_j=2$ $(1 \\le j\\le Q)$|$23$|\n|$5$|对于每个满足 $T_j=2$ 的 $j$ $(1\\le j\\le Q)$，满足 $L_j=1$，$R_j=N$|$35$|\n|$6$|无附加限制|$17$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIST 2022] 鱼 2 / Fish 2", "background": "JOISC2022 D4T2", "description": "JOI 君有 $N$ 条鱼，编号为 $1,2,\\dots,N$。第 $i$ $(1 \\le i \\le N)$ 条鱼的大小为 $A_i$。\n\n当我们养鱼的时候，需要注意如下的一个事实：如果有两条鱼离得很近，那么随着时间的流逝，可能会有其中一条吃掉另一条。其中，两条鱼离得很近，当且仅当它们中间没有鱼。  \n更具体地，如果鱼 $x$ 的大小不小于鱼 $y$ 的大小，且鱼 $x,y$ 离得很近，那么 $x$ 可以吃掉 $y$，且 $x$ 的大小变为原来 $x,y$ 的大小之和。如果 $x,y$ 一样大，那么 $x$ 吃掉 $y$ 或 $y$ 吃掉 $x$ 都可能发生。\n\nJOI 君会养 $Q$ 天鱼。为了消磨时光，他会进行如下的思想实验。在第 $j$ 天 $(1 \\le j \\le Q)$，JOI 君会进行如下行动中的一个：\n\n- 第一类：JOI 君给鱼 $X_j$ 吃了某些秘制的食物。这会将鱼 $X_j$ 的大小变为 $Y_j$。\n\n- 第二类：JOI 君将编号在区间 $[L_j,R_j]$ 内的鱼单独拿出来，并进行以下实验：  \n  JOI 君将鱼 $L_j,L_j+1,\\dots,R_j$ 从左到右依次放在一个鱼缸中。由于鱼们具有如上所述的特点，最后只有一条鱼会存活。存活的这条鱼的编号取决于在哪些时刻哪些鱼吃掉了哪些鱼。JOI 君想知道可能成为最后存活者的鱼的条数。在实验中，鱼的编号不会改变，也不能有两条鱼同时吃掉同一条鱼。\n\n请写一个程序，对于给定的 JOI 君的鱼和实验的信息，计算每个第二类行动的答案来让 JOI 君能够证明或证伪自己的观点。注意这只是思想实验，并没有任何鱼真的被吃掉。", "inputFormat": "第一行，一个正整数 $N$，表示鱼的条数。\n\n第二行，$N$ 个正整数 $A_1,A_2,\\dots,A_N$，表示每条鱼的大小。\n\n第三行，一个正整数 $Q$，表示养鱼的天数。  \n接下来 $Q$ 行，其中第 $j$ $(1 \\le j \\le Q)$ 行包含若干个由空格分隔的整数，其中第一个整数为 $T_j$，表示操作类型。\n  - 若 $T_j=1$，则该行还包含两个正整数 $X_j,Y_j$，表示 JOI 君第 $j$ 天进行了第一类行动。鱼 $X_j$ 的大小变为 $Y_j$。\n  - 若 $T_j=2$，则该行还包含两个正整数 $L_j,R_j$，表示 JOI 君第 $j$ 天进行了第二类行动。JOI 君对编号在 $[L_j,R_j]$ 内的鱼进行了一次实验。", "outputFormat": "对于每次第二类行动（即，对于每个满足 $T_j=2$ 的 $j$ $(1 \\le j \\le Q)$），输出一行一个整数，表示可能成为最后存活者的鱼的条数。", "hint": "**【样例解释 #1】**\n\n在 $6$ 天中，JOI 君进行了以下行动：\n\n- 第一天，他对鱼 $1,2,3,4,5$ 进行了一次实验。\n- 第二天，他对鱼 $1,2,3$ 进行了一次实验。\n- 第三天，他给鱼 $3$ 吃了秘制食物，使其大小变为 $1$。\n- 第四天，他对鱼 $2,3,4,5$ 进行了一次实验。\n- 第五天，他对鱼 $1,2,3,4,5$ 进行了一次实验。\n- 第六天，他对鱼 $2,3,4$ 进行了一次实验。\n\n第一天的实验的结果如下：\n\n- 鱼缸中的鱼的大小依次为 $[6,4,2,2,6]$。\n- 例如，经过如下过程，鱼 $2$ 会成为最后存活者。（其中粗体为鱼 $2$ 的大小。）  \n  $[6,\\textbf 4,2,2,6]$（初始状态）$\\longrightarrow$ $[6,\\textbf 4,4,6]$（鱼 $4$ 吃掉鱼 $3$）$\\longrightarrow$ $[6,\\textbf 8,6]$（鱼 $2$ 吃掉鱼 $4$）$\\longrightarrow$ $[\\textbf{14},6]$（鱼 $2$ 吃掉鱼 $1$）$\\longrightarrow$ $[\\textbf{20}]$（鱼 $2$ 吃掉鱼 $5$）。\n- 类似地，鱼 $1,2,3,4,5$ 都可能成为最后存活者。因此答案为 $5$。\n\n该样例满足子任务 $1,3,6$ 的限制。\n\n**【样例解释 #2】**\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\n该样例满足子任务 $1,3,4,6$ 的限制。\n\n**【样例解释 #4】**\n\n该样例满足子任务 $1,3,5,6$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $1 \\le N,Q \\le 100\\,000$。\n- $1 \\le A_i \\le 10^9$ $(1\\le i\\le N)$。\n- $T_j \\in \\{1,2\\}$。\n- $1 \\le X_j \\le N$ $(1\\le j\\le Q)$。\n- $1 \\le Y_j \\le 10^9$。\n- $1 \\le L_j \\le R_j \\le N$ $(1 \\le j \\le Q)$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$N \\le 500$，$Q \\le 500$|$5$|\n|$2$|$Q=1$，$T_j=2$，$L_j=1$，$R_j=N$ $(1 \\le j \\le Q)$|$8$|\n|$3$|$Q\\le 1\\,000$|$12$|\n|$4$|$T_j=2$ $(1 \\le j\\le Q)$|$23$|\n|$5$|对于每个满足 $T_j=2$ 的 $j$ $(1\\le j\\le Q)$，满足 $L_j=1$，$R_j=N$|$35$|\n|$6$|无附加限制|$17$|", "locale": "zh-CN"}}}
{"pid": "P9531", "type": "P", "difficulty": 7, "samples": [["5 10\n1 2 8\n1 3 13\n1 4 5\n1 5 11\n1 5 3\n2 3 7\n2 4 15\n3 4 6\n3 5 6\n4 5 2\n6\n3\n6\n8\n10\n13\n17", "8\n2\n5\n10\n9\n21"], ["3 4\n1 2 1\n1 2 4\n2 3 2\n2 3 4\n4\n1\n2\n3\n4", "1\n1\n2\n0"], ["10 20\n6 7 914727791\n1 8 771674531\n3 5 632918108\n5 9 329296846\n1 7 237501112\n4 9 303328173\n2 6 216298255\n2 10 504024991\n3 8 158236886\n1 10 10176179\n8 9 918271145\n3 6 217165898\n3 6 624543444\n4 9 70147274\n8 9 976983490\n6 9 210108505\n2 9 972711062\n1 10 564567289\n3 7 411395464\n4 7 952470985\n10\n115721165\n198969744\n356664401\n429802521\n513343279\n610443927\n741016686\n786597783\n898772266\n903568946", "1121073688\n761832468\n1026806785\n1316097872\n1321500065\n1445238392\n1637513141\n1621778548\n1733953031\n1738749711"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOIST 2022] 复兴计划 / Reconstruction Project", "background": "JOISC2022 D4T3", "description": "JOI 镇是一个曾经辉煌的工业区。为了运输产品，其中建起了许多铁轨与火车站。尽管 JOI 镇已经衰落，那里仍有许多不再被使用的铁轨与火车站。\n\nJOI 镇中有 $N$ 个火车站，编号为 $1,2,\\dots,N$。其中还剩下 $M$ 条铁轨。第 $i$ 条铁轨 $(1\\le i \\le M)$ 双向连接火车站 $A_i$ 和 $B_i$，且其宽度为 $W_i$。保证能够从任意火车站经过若干条铁轨到达任意其他火车站。\n\n你是 JOI 镇的镇长。你计划吸引铁路公司来使用 JOI 镇中留下的铁轨与火车站，使得 JOI 镇复苏成为「铁路之镇」。 \n \n于是，共有 $Q$ 个铁路公司申请参与这个复兴计划。然而，不同公司的火车所需的铁轨宽度也有所不同。这意味着你需要重建这些铁轨，使得它们都匹配对应公司的火车。 \n\n第 $j$ $(1\\le j\\le Q)$ 家铁路公司的火车所需的铁轨宽度为 $X_j$。为了迎合公司 $j$，要求满足以下条件：\n- **条件**：保证能够从任意火车站只经过宽度为 $X_j$ 的铁轨到达任意其他火车站。\n\n为了满足上述条件，你可以按如下方式重建铁轨任意次：\n- **重建**：选择一条铁轨，你可以重建其使得其宽度增加或减少 $1$ 并花费 $1$。然而，若其宽度为 $1$，则不能再减少其宽度。\n\n为了确定你能满足哪些公司，你需要求出迎合公司 $j$ 所需要的最小花费。\n\n请写一个程序，对于给定的火车站、铁轨与铁路公司的信息，计算迎合公司 $j$ 所需要的最小花费。", "inputFormat": "第一行，两个正整数 $N,M$，表示火车站的个数和铁轨的条数。\n\n接下来 $M$ 行，其中第 $i$ $(1 \\le i \\le M)$ 行包含三个正整数 $A_i, B_i, W_i$，表示第 $i$ 条铁轨连接的火车站和其宽度。\n\n第 $M+2$ 行，一个正整数 $Q$，表示铁路公司的个数。\n\n接下来 $Q$ 行，其中第 $j$ $(1 \\le j \\le Q)$ 行包含一个正整数 $X_j$，表示第 $j$ 个铁路公司的火车需要的铁路宽度。", "outputFormat": "输出 $Q$ 行，第 $j$ $(1\\le j\\le Q)$ 包含一个整数，表示迎合公司 $j$ 所需要的最小花费。", "hint": "**【样例解释 #1】**\n\n例如，为了迎合公司 $1$，若你按如下方式重建铁轨，将会花费 $8$。\n\n1. 将铁轨 $6$ 的宽度减少 $4$。\n2. 将铁轨 $9$ 的宽度减少 $3$。\n3. 将铁轨 $10$ 的宽度增加 $1$。\n\n可以证明不可能用少于 $8$ 的花费迎合公司 $1$。因此，在第一行输出 $8$。\n\n该样例满足子任务 $1,2,4,5,6$ 的限制。\n\n**【样例解释 #2】**\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\n该样例满足子任务 $2,4,5,6$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $2 \\le N \\le 500$。\n- $N-1 \\le M \\le 100\\,000$。\n- $1 \\le Q \\le 1\\,000\\,000$。\n- $1 \\le A_i < B_i \\le N$ $(1\\le i\\le M)$。\n- $1 \\le W_i \\le 10^9$ $(1\\le i\\le M)$。\n- $(A_i,B_i,W_i)\\ne(A_j,B_j,W_j)$ $(1\\le i<j\\le M)$。\n- 保证能够从任意火车站经过若干条铁轨到达任意其他火车站。\n- $1 \\le X_j \\le 10^9$ $(1\\le j\\le Q)$。\n- $X_j < X_{j+1}$ $(1\\le j<Q)$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$M \\le 16$，$Q \\le 10$|$3$|\n|$2$|$Q\\le 10$|$4$|\n|$3$|$B_i = A_i+1$ $(1\\le i\\le M)$|$7$|\n|$4$|$M\\le 1\\,000$|$28$|\n|$5$|$Q\\le 20\\,000$|$35$|\n|$6$|无附加限制|$23$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIST 2022] 复兴计划 / Reconstruction Project", "background": "JOISC2022 D4T3", "description": "JOI 镇是一个曾经辉煌的工业区。为了运输产品，其中建起了许多铁轨与火车站。尽管 JOI 镇已经衰落，那里仍有许多不再被使用的铁轨与火车站。\n\nJOI 镇中有 $N$ 个火车站，编号为 $1,2,\\dots,N$。其中还剩下 $M$ 条铁轨。第 $i$ 条铁轨 $(1\\le i \\le M)$ 双向连接火车站 $A_i$ 和 $B_i$，且其宽度为 $W_i$。保证能够从任意火车站经过若干条铁轨到达任意其他火车站。\n\n你是 JOI 镇的镇长。你计划吸引铁路公司来使用 JOI 镇中留下的铁轨与火车站，使得 JOI 镇复苏成为「铁路之镇」。 \n \n于是，共有 $Q$ 个铁路公司申请参与这个复兴计划。然而，不同公司的火车所需的铁轨宽度也有所不同。这意味着你需要重建这些铁轨，使得它们都匹配对应公司的火车。 \n\n第 $j$ $(1\\le j\\le Q)$ 家铁路公司的火车所需的铁轨宽度为 $X_j$。为了迎合公司 $j$，要求满足以下条件：\n- **条件**：保证能够从任意火车站只经过宽度为 $X_j$ 的铁轨到达任意其他火车站。\n\n为了满足上述条件，你可以按如下方式重建铁轨任意次：\n- **重建**：选择一条铁轨，你可以重建其使得其宽度增加或减少 $1$ 并花费 $1$。然而，若其宽度为 $1$，则不能再减少其宽度。\n\n为了确定你能满足哪些公司，你需要求出迎合公司 $j$ 所需要的最小花费。\n\n请写一个程序，对于给定的火车站、铁轨与铁路公司的信息，计算迎合公司 $j$ 所需要的最小花费。", "inputFormat": "第一行，两个正整数 $N,M$，表示火车站的个数和铁轨的条数。\n\n接下来 $M$ 行，其中第 $i$ $(1 \\le i \\le M)$ 行包含三个正整数 $A_i, B_i, W_i$，表示第 $i$ 条铁轨连接的火车站和其宽度。\n\n第 $M+2$ 行，一个正整数 $Q$，表示铁路公司的个数。\n\n接下来 $Q$ 行，其中第 $j$ $(1 \\le j \\le Q)$ 行包含一个正整数 $X_j$，表示第 $j$ 个铁路公司的火车需要的铁路宽度。", "outputFormat": "输出 $Q$ 行，第 $j$ $(1\\le j\\le Q)$ 包含一个整数，表示迎合公司 $j$ 所需要的最小花费。", "hint": "**【样例解释 #1】**\n\n例如，为了迎合公司 $1$，若你按如下方式重建铁轨，将会花费 $8$。\n\n1. 将铁轨 $6$ 的宽度减少 $4$。\n2. 将铁轨 $9$ 的宽度减少 $3$。\n3. 将铁轨 $10$ 的宽度增加 $1$。\n\n可以证明不可能用少于 $8$ 的花费迎合公司 $1$。因此，在第一行输出 $8$。\n\n该样例满足子任务 $1,2,4,5,6$ 的限制。\n\n**【样例解释 #2】**\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\n该样例满足子任务 $2,4,5,6$ 的限制。\n\n**【数据范围】**\n\n对于所有数据，满足：\n\n- $2 \\le N \\le 500$。\n- $N-1 \\le M \\le 100\\,000$。\n- $1 \\le Q \\le 1\\,000\\,000$。\n- $1 \\le A_i < B_i \\le N$ $(1\\le i\\le M)$。\n- $1 \\le W_i \\le 10^9$ $(1\\le i\\le M)$。\n- $(A_i,B_i,W_i)\\ne(A_j,B_j,W_j)$ $(1\\le i<j\\le M)$。\n- 保证能够从任意火车站经过若干条铁轨到达任意其他火车站。\n- $1 \\le X_j \\le 10^9$ $(1\\le j\\le Q)$。\n- $X_j < X_{j+1}$ $(1\\le j<Q)$。\n\n详细子任务附加限制及分值如下表所示：\n\n|子任务编号|附加限制|分值|\n|:-:|:-:|:-:|\n|$1$|$M \\le 16$，$Q \\le 10$|$3$|\n|$2$|$Q\\le 10$|$4$|\n|$3$|$B_i = A_i+1$ $(1\\le i\\le M)$|$7$|\n|$4$|$M\\le 1\\,000$|$28$|\n|$5$|$Q\\le 20\\,000$|$35$|\n|$6$|无附加限制|$23$|", "locale": "zh-CN"}}}
{"pid": "P9532", "type": "P", "difficulty": 2, "samples": [["3\n2 2\n3 2\n4 2", "2\n2\n4"], ["3\n3 1\n3 2\n3 4", "2\n2\n4"], ["3\n2 6\n3 6\n4 6", "6\n6\n12"], ["3\n3 3\n3 6\n3 12", "6\n6\n12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "[YsOI2023] 前缀和", "background": "Ysuperman 模板测试的试机题。\n\n小心立秋，小心秋丽。", "description": "立秋有一个长度为 $n$ 的数组 $a$，所有数字都是正整数，并且除了其中第一个数字以外其它数字都等于前面所有数字的和。\n\n例如，数组 $[1,1,2,4,8,16]$ 就有可能是立秋有的一个数组，因为除了第一个数字 $1$，后面的每个数字都是前面数字的和，例如：\n\n- 第二个数字 $1=1$。\n- 第三个数字 $2=1+1$。\n- 第四个数字 $4=1+1+2$。\n- 第五个数字 $8=1+1+2+4$。\n- 第六个数字 $16=1+1+2+4+8$。 \n\n现在立秋告诉了秋丽数字 $x$ 存在于这个数组中，秋丽希望知道 $a_n$ 最小会是多少，或者说整个数组最后一个数字最小有多少。", "inputFormat": "本题有多组测试数据。\n\n输入第一行一个数字 $T$ 表示测试数据组数。\n\n接下来 $T$ 行每行两个正整数 $n,x$。", "outputFormat": "输出共 $T$ 行，分别表示每组测试数据的答案。\n\n对于某组数据 $n,x$，输出一行一个正整数表示可能的最小的 $a_n$。", "hint": "#### 样例 1 解释\n\n- 第一组数据只有唯一可能的数组 $[2,2]$，所以答案为 $2$；\n- 第二组数据有两种可能的数组，分别是 $[2,2,4]$ 和 $[1,1,2]$，所以答案为 $2$；\n- 第三组数据有两种可能的数组，分别是 $[2,2,4,8]$ 和 $[1,1,2,4]$，所以答案为 $4$。\n\n#### 样例 2 解释\n\n- 第一组数据只有唯一可能的数组 $[1,1,2]$，所以答案为 $2$；\n- 第二组数据有两种可能的数组 $[1,1,2]$ 和 $[2,2,4]$，所以答案为 $2$；\n- 第三组数据有两种可能的数组 $[2,2,4]$ 和 $[4,4,8]$，所以答案为 $4$。\n\n#### 数据范围\n\n对于前 $30\\%$ 的数据，满足 $x$ 不能被 $2$ 整除，或者说 $2$ 不是 $x$ 的一个因数，或者说 $x$ 是奇数。\n\n另有 $30\\%$ 的数据，满足 $x$ 可以被 $2^{n-2}$ 整除，或者说 $2^{n-2}$ 是 $x$ 的一个因数。\n\n另有 $20\\%$ 的数据，满足 $x\\le 1000$，可以证明在这个数据范围下答案可以使用一个 `int` 类型变量存储。\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10^4$，$2\\le n\\le 20$，$1\\le x\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2023] 前缀和", "background": "Ysuperman 模板测试的试机题。\n\n小心立秋，小心秋丽。", "description": "立秋有一个长度为 $n$ 的数组 $a$，所有数字都是正整数，并且除了其中第一个数字以外其它数字都等于前面所有数字的和。\n\n例如，数组 $[1,1,2,4,8,16]$ 就有可能是立秋有的一个数组，因为除了第一个数字 $1$，后面的每个数字都是前面数字的和，例如：\n\n- 第二个数字 $1=1$。\n- 第三个数字 $2=1+1$。\n- 第四个数字 $4=1+1+2$。\n- 第五个数字 $8=1+1+2+4$。\n- 第六个数字 $16=1+1+2+4+8$。 \n\n现在立秋告诉了秋丽数字 $x$ 存在于这个数组中，秋丽希望知道 $a_n$ 最小会是多少，或者说整个数组最后一个数字最小有多少。", "inputFormat": "本题有多组测试数据。\n\n输入第一行一个数字 $T$ 表示测试数据组数。\n\n接下来 $T$ 行每行两个正整数 $n,x$。", "outputFormat": "输出共 $T$ 行，分别表示每组测试数据的答案。\n\n对于某组数据 $n,x$，输出一行一个正整数表示可能的最小的 $a_n$。", "hint": "#### 样例 1 解释\n\n- 第一组数据只有唯一可能的数组 $[2,2]$，所以答案为 $2$；\n- 第二组数据有两种可能的数组，分别是 $[2,2,4]$ 和 $[1,1,2]$，所以答案为 $2$；\n- 第三组数据有两种可能的数组，分别是 $[2,2,4,8]$ 和 $[1,1,2,4]$，所以答案为 $4$。\n\n#### 样例 2 解释\n\n- 第一组数据只有唯一可能的数组 $[1,1,2]$，所以答案为 $2$；\n- 第二组数据有两种可能的数组 $[1,1,2]$ 和 $[2,2,4]$，所以答案为 $2$；\n- 第三组数据有两种可能的数组 $[2,2,4]$ 和 $[4,4,8]$，所以答案为 $4$。\n\n#### 数据范围\n\n对于前 $30\\%$ 的数据，满足 $x$ 不能被 $2$ 整除，或者说 $2$ 不是 $x$ 的一个因数，或者说 $x$ 是奇数。\n\n另有 $30\\%$ 的数据，满足 $x$ 可以被 $2^{n-2}$ 整除，或者说 $2^{n-2}$ 是 $x$ 的一个因数。\n\n另有 $20\\%$ 的数据，满足 $x\\le 1000$，可以证明在这个数据范围下答案可以使用一个 `int` 类型变量存储。\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10^4$，$2\\le n\\le 20$，$1\\le x\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9533", "type": "P", "difficulty": 3, "samples": [["3\n1 1 1", "2"], ["4\n3 1 2 3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "前缀和", "位运算", "洛谷月赛"], "title": "[YsOI2023] 区间翻转区间异或和", "background": "Ysuperman 模板测试的数据结构题。\n\n符卡可以是人名也可以是队名。", "description": "符卡有一个长度为 $n$ 的整数数组 $a$，符卡认为一个区间 $[l,r]$ 是灵异区间当且仅当 $\\bigoplus_{i=l}^ra_i=0$，或者说这个区间内所有数字异或起来刚好等于 $0$。\n\n符卡有特殊的魔法，可以把**任意**一个灵异区间翻转。具体来说，如果 $[l,r]$ 区间是灵异区间，那么符卡就可以对这个区间使用魔法，整个数组就会变成 $a_1,a_2,\\dots,a_{l-1},a_r,a_{r-1},\\dots,a_l,a_{r+1},a_{r+2}\\dots,a_n$。\n\n现在符卡可以使用任意次数的魔法，符卡希望最后得到的数组的灵异区间数量能够尽可能多，你能告诉她最后最多有多少个灵异区间吗？", "inputFormat": "第一行一个正整数 $n$，表示数组长度。\n\n第二行 $n$ 个非负整数 $a_1,a_2,\\dots,a_n$ 表示整个数组。", "outputFormat": "输出一行一个整数，表示符卡使用任意次魔法后灵异区间最多有多少个。", "hint": "#### 样例 1 解释\n\n无论符卡发动多少次魔法，数组都是 $1,1,1$，所以发不发动魔法都没有任何关系。灵异区间永远都是 $[1,2],[2,3]$ 两个。\n\n#### 样例 2 解释\n\n这里给出可能的一种魔法发动方法。\n\n选择灵异区间 $[1,3]$ 发动魔法，得到的新数组是 $2,1,3,3$，这个数组共有两个灵异区间，分别是 $[1,3]$ 和 $[3,4]$。\n\n可以证明答案无法超过 $2$。\n\n#### 数据范围\n\n对于前 $20\\%$ 的数据，保证 $n\\le 10$。\n\n对于前 $40\\%$ 的数据，保证 $n\\le 2000$。\n\n另有 $10\\%$ 的数据，保证 $a_i$ 全部相等。\n\n另有 $10\\%$ 的数据，保证 $a_i$ 只有两种可能的取值。\n\n另有 $10\\%$ 的数据，保证 $0\\le a_i<2^{10}$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^5$，$0\\le a_i< 2^{20}$。\n\n#### 彩蛋\n\n灵异区间的名字其实是“零异（或）区间”的谐音。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2023] 区间翻转区间异或和", "background": "Ysuperman 模板测试的数据结构题。\n\n符卡可以是人名也可以是队名。", "description": "符卡有一个长度为 $n$ 的整数数组 $a$，符卡认为一个区间 $[l,r]$ 是灵异区间当且仅当 $\\bigoplus_{i=l}^ra_i=0$，或者说这个区间内所有数字异或起来刚好等于 $0$。\n\n符卡有特殊的魔法，可以把**任意**一个灵异区间翻转。具体来说，如果 $[l,r]$ 区间是灵异区间，那么符卡就可以对这个区间使用魔法，整个数组就会变成 $a_1,a_2,\\dots,a_{l-1},a_r,a_{r-1},\\dots,a_l,a_{r+1},a_{r+2}\\dots,a_n$。\n\n现在符卡可以使用任意次数的魔法，符卡希望最后得到的数组的灵异区间数量能够尽可能多，你能告诉她最后最多有多少个灵异区间吗？", "inputFormat": "第一行一个正整数 $n$，表示数组长度。\n\n第二行 $n$ 个非负整数 $a_1,a_2,\\dots,a_n$ 表示整个数组。", "outputFormat": "输出一行一个整数，表示符卡使用任意次魔法后灵异区间最多有多少个。", "hint": "#### 样例 1 解释\n\n无论符卡发动多少次魔法，数组都是 $1,1,1$，所以发不发动魔法都没有任何关系。灵异区间永远都是 $[1,2],[2,3]$ 两个。\n\n#### 样例 2 解释\n\n这里给出可能的一种魔法发动方法。\n\n选择灵异区间 $[1,3]$ 发动魔法，得到的新数组是 $2,1,3,3$，这个数组共有两个灵异区间，分别是 $[1,3]$ 和 $[3,4]$。\n\n可以证明答案无法超过 $2$。\n\n#### 数据范围\n\n对于前 $20\\%$ 的数据，保证 $n\\le 10$。\n\n对于前 $40\\%$ 的数据，保证 $n\\le 2000$。\n\n另有 $10\\%$ 的数据，保证 $a_i$ 全部相等。\n\n另有 $10\\%$ 的数据，保证 $a_i$ 只有两种可能的取值。\n\n另有 $10\\%$ 的数据，保证 $0\\le a_i<2^{10}$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^5$，$0\\le a_i< 2^{20}$。\n\n#### 彩蛋\n\n灵异区间的名字其实是“零异（或）区间”的谐音。", "locale": "zh-CN"}}}
{"pid": "P9534", "type": "P", "difficulty": 5, "samples": [["4 4\n2 1\n1 3\n2 4\n4 3\n0 1 1 3", "1 3\n3 4\n1 2\n2 4\n"], ["8 9\n7 8\n6 1\n5 4\n7 1\n4 1\n3 7\n2 6\n7 5\n2 4\n0 6 7 1 4 1 1 7", "6 2\n7 3\n4 5\n1 6\n7 8\n1 4\n1 7\n2 4\n5 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "广度优先搜索 BFS", "拓扑排序", "最近公共祖先 LCA", "洛谷月赛"], "title": "[YsOI2023] 广度优先遍历", "background": "Ysuperman 模板测试的图论题。\n\n【数据删除】", "description": "今天的模板测试是无向图上的广度优先遍历，【数据删除】马上写好了代码：\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <queue>\nusing namespace std;\nconst int maxn = 100005;\nvector<int> G[maxn];\nqueue<int> q;\nint pa[maxn];\nint main()\n{\n    int n, m;\n    cin >> n >> m;\n    for (int i = 1; i <= m; ++i)\n    {\n        int u, v;\n        cin >> u >> v;\n        G[u].push_back(v);\n        G[v].push_back(u);\n    }\n    memset(pa, -1, sizeof pa);\n    q.push(1);\n    pa[1] = 0;\n    while (!q.empty())\n    {\n        int u = q.front();\n        q.pop();\n        for (auto v : G[u])\n        {\n            if (pa[v] != -1)\n                continue;\n            pa[v] = u;\n            q.push(v);\n        }\n    }\n    for (int i = 1; i <= n; ++i)\n    {\n        cout << pa[i];\n        if (i != n)\n            cout << \" \";\n    }\n    cout << endl;\n    return 0;\n}\n```\n\n如你所见，这份代码会输入一个 $n$ 个点 $m$ 条边的无向图，并且求出这张图以 $1$ 为根的一棵“广度优先遍历树”，最后输出所有点的父亲节点编号。\n\n不过值得注意的是，这棵“广度优先遍历树”的具体形态和“边的输入顺序”有关，也就是说，不同的输入顺序可能会得到不同的父亲节点编号。\n\n现在【数据删除】告诉了你 $n,m$、这 $m$ 条边以及在某个“边输入顺序”情况下他的代码的输出，你需要还原出这个“边输入顺序”。如果有多种边输入顺序对应的都是这样的输出，你**只需要输出其中任意一种**即可。\n\n特别的，保证有解，且无向图连通，无自环（但是有可能有重边）。", "inputFormat": "第一行两个正整数 $n,m$ 分别表示无向图的点数和边数。\n\n接下来 $m$ 行每行两个整数 $u,v$ 表示存在 $u$ 与 $v$ 之间存在一条无向边。\n\n最后一行 $n$ 个整数表示【数据删除】代码的输出。（由题意可知他输出的是某个“边输入顺序”情况下他得到的“广度优先遍历树”中 $1\\sim n$ 这些节点的父亲节点编号）", "outputFormat": "输出包含 $m$ 行，每行两个整数 $u,v$ 表示 $u$ 和 $v$ 之间存在一条无向边，你的输出顺序表示你给出的“边输入顺序”。\n\n请注意，你需要保证如果输入给出的图中 $u,v$ 间连了 $k$ 条边，那么你给出的图中 $u,v$ 间也要连有 $k$ 条边。\n\n如果有多种“边输入顺序”合法，**输出其中任意一种都会被判断为正确**。另外，由于是无向边，所以你输出的**一条边两个点的排列顺序对答案判定没有影响**。", "hint": "#### 样例 1 解释\n\n直接运行【数据删除】的代码即可。\n\n如果不改变边输入顺序，将下面数据输入【数据删除】的代码：\n\n```\n4 4\n2 1\n1 3\n2 4\n4 3\n```\n\n他的代码跑出来结果如下：\n\n```\n0 1 1 2\n```\n\n如果按照样例 1 输出给出的顺序，即，将下面数据输入他的代码：\n\n```\n4 4\n1 3\n3 4\n1 2\n2 4\n```\n\n输出为：\n\n```\n0 1 1 3\n```\n\n#### 数据范围\n\n对于前 $10\\%$ 的数据，满足 $n\\le 8$，$m\\le 10$。\n\n对于前 $40\\%$ 的数据，满足 $n\\le 1000$，$m\\le 2000$。\n\n另有 $10\\%$ 的数据，满足 $m=n-1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^5$，$1\\le m\\le 2\\times 10^5$。\n\n#### 提示\n\n为什么有可能会有重边，因为懒得去重了，这个家伙出图论题就是懒得判重边的（）\n\n附件下发了本题 checker。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2023] 广度优先遍历", "background": "Ysuperman 模板测试的图论题。\n\n【数据删除】", "description": "今天的模板测试是无向图上的广度优先遍历，【数据删除】马上写好了代码：\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <queue>\nusing namespace std;\nconst int maxn = 100005;\nvector<int> G[maxn];\nqueue<int> q;\nint pa[maxn];\nint main()\n{\n    int n, m;\n    cin >> n >> m;\n    for (int i = 1; i <= m; ++i)\n    {\n        int u, v;\n        cin >> u >> v;\n        G[u].push_back(v);\n        G[v].push_back(u);\n    }\n    memset(pa, -1, sizeof pa);\n    q.push(1);\n    pa[1] = 0;\n    while (!q.empty())\n    {\n        int u = q.front();\n        q.pop();\n        for (auto v : G[u])\n        {\n            if (pa[v] != -1)\n                continue;\n            pa[v] = u;\n            q.push(v);\n        }\n    }\n    for (int i = 1; i <= n; ++i)\n    {\n        cout << pa[i];\n        if (i != n)\n            cout << \" \";\n    }\n    cout << endl;\n    return 0;\n}\n```\n\n如你所见，这份代码会输入一个 $n$ 个点 $m$ 条边的无向图，并且求出这张图以 $1$ 为根的一棵“广度优先遍历树”，最后输出所有点的父亲节点编号。\n\n不过值得注意的是，这棵“广度优先遍历树”的具体形态和“边的输入顺序”有关，也就是说，不同的输入顺序可能会得到不同的父亲节点编号。\n\n现在【数据删除】告诉了你 $n,m$、这 $m$ 条边以及在某个“边输入顺序”情况下他的代码的输出，你需要还原出这个“边输入顺序”。如果有多种边输入顺序对应的都是这样的输出，你**只需要输出其中任意一种**即可。\n\n特别的，保证有解，且无向图连通，无自环（但是有可能有重边）。", "inputFormat": "第一行两个正整数 $n,m$ 分别表示无向图的点数和边数。\n\n接下来 $m$ 行每行两个整数 $u,v$ 表示存在 $u$ 与 $v$ 之间存在一条无向边。\n\n最后一行 $n$ 个整数表示【数据删除】代码的输出。（由题意可知他输出的是某个“边输入顺序”情况下他得到的“广度优先遍历树”中 $1\\sim n$ 这些节点的父亲节点编号）", "outputFormat": "输出包含 $m$ 行，每行两个整数 $u,v$ 表示 $u$ 和 $v$ 之间存在一条无向边，你的输出顺序表示你给出的“边输入顺序”。\n\n请注意，你需要保证如果输入给出的图中 $u,v$ 间连了 $k$ 条边，那么你给出的图中 $u,v$ 间也要连有 $k$ 条边。\n\n如果有多种“边输入顺序”合法，**输出其中任意一种都会被判断为正确**。另外，由于是无向边，所以你输出的**一条边两个点的排列顺序对答案判定没有影响**。", "hint": "#### 样例 1 解释\n\n直接运行【数据删除】的代码即可。\n\n如果不改变边输入顺序，将下面数据输入【数据删除】的代码：\n\n```\n4 4\n2 1\n1 3\n2 4\n4 3\n```\n\n他的代码跑出来结果如下：\n\n```\n0 1 1 2\n```\n\n如果按照样例 1 输出给出的顺序，即，将下面数据输入他的代码：\n\n```\n4 4\n1 3\n3 4\n1 2\n2 4\n```\n\n输出为：\n\n```\n0 1 1 3\n```\n\n#### 数据范围\n\n对于前 $10\\%$ 的数据，满足 $n\\le 8$，$m\\le 10$。\n\n对于前 $40\\%$ 的数据，满足 $n\\le 1000$，$m\\le 2000$。\n\n另有 $10\\%$ 的数据，满足 $m=n-1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^5$，$1\\le m\\le 2\\times 10^5$。\n\n#### 提示\n\n为什么有可能会有重边，因为懒得去重了，这个家伙出图论题就是懒得判重边的（）\n\n附件下发了本题 checker。", "locale": "zh-CN"}}}
{"pid": "P9535", "type": "P", "difficulty": 7, "samples": [["4 4\n2 1 1 1", "3"], ["4 5\n1 1 1 1", "6"], ["5 6\n1 1 2 1 1", "27"], ["6 6\n1 2 3 1 1 1", "30"], ["6 5\n2 1 1 1 1 4", "4"], ["8 7\n1 1 3 1 2 2 2 2", "360"], ["8 8\n1 1 1 1 2 2 2 2", "2520"], ["8 9\n1 1 1 1 1 1 2 3", "9240"], ["10 11\n1 1 1 4 2 2 2 1 1 1", "105840"], ["12 13\n1 1 1 1 1 1 1 1 1 1 1 1", "518269694\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "[YsOI2023] 连通图计数", "background": "Ysuperman 模板测试的多项式题。\n\n【数据删除】", "description": "请问有多少个 $n$ 个点 $m$ 条边的**无向简单连通**图，无自环无重边，满足删掉编号为 $i$ 的点后无向图被分成了 $a_i$ 个连通块。特殊地，我们保证 $n-1\\le m\\le n+1$，且答案不为 $0$。\n\n答案对 $998,244,353$ 取模。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数，第 $i$ 个整数为 $a_i$。", "outputFormat": "输出一行一个整数，表示答案对 $998,244,353$ 取模得到的结果。", "hint": "#### 样例 1 解释\n\n共有三种可能的图，连的四条边分别为：\n\n1. $(1,2),(1,3),(1,4),(2,3)$。\n2. $(1,2),(1,3),(1,4),(2,4)$。\n3. $(1,2),(1,3),(1,4),(3,4)$。\n\n#### 数据范围\n\n|测试点编号|$n,m$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 4$|$m=n-1$|无|\n|$5\\sim 6$|$m=n$，$n\\le 7$|无|\n|$7\\sim 8$|$m=n$|$a_i=1$|\n|$9\\sim 12$|$m=n$|无|\n|$13\\sim 14$|$m=n+1$，$n\\le 7$|无|\n|$15\\sim 16$|$m=n+1$|$a_i=1$|\n|$17\\sim 20$|$m=n+1$|无|\n\n对于所有的数据，满足 $4\\le n\\le 10^5$，$n-1\\le m\\le n+1$，$1\\le a_i<n$，$n\\le \\sum_{i=1}^na_i\\le 2n-2$，且保证答案非 $0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2023] 连通图计数", "background": "Ysuperman 模板测试的多项式题。\n\n【数据删除】", "description": "请问有多少个 $n$ 个点 $m$ 条边的**无向简单连通**图，无自环无重边，满足删掉编号为 $i$ 的点后无向图被分成了 $a_i$ 个连通块。特殊地，我们保证 $n-1\\le m\\le n+1$，且答案不为 $0$。\n\n答案对 $998,244,353$ 取模。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数，第 $i$ 个整数为 $a_i$。", "outputFormat": "输出一行一个整数，表示答案对 $998,244,353$ 取模得到的结果。", "hint": "#### 样例 1 解释\n\n共有三种可能的图，连的四条边分别为：\n\n1. $(1,2),(1,3),(1,4),(2,3)$。\n2. $(1,2),(1,3),(1,4),(2,4)$。\n3. $(1,2),(1,3),(1,4),(3,4)$。\n\n#### 数据范围\n\n|测试点编号|$n,m$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 4$|$m=n-1$|无|\n|$5\\sim 6$|$m=n$，$n\\le 7$|无|\n|$7\\sim 8$|$m=n$|$a_i=1$|\n|$9\\sim 12$|$m=n$|无|\n|$13\\sim 14$|$m=n+1$，$n\\le 7$|无|\n|$15\\sim 16$|$m=n+1$|$a_i=1$|\n|$17\\sim 20$|$m=n+1$|无|\n\n对于所有的数据，满足 $4\\le n\\le 10^5$，$n-1\\le m\\le n+1$，$1\\le a_i<n$，$n\\le \\sum_{i=1}^na_i\\le 2n-2$，且保证答案非 $0$。", "locale": "zh-CN"}}}
{"pid": "P9536", "type": "P", "difficulty": 7, "samples": [["4 3\n2 4 3\n", "2 666666673 1"], ["6 4\n4 6 5 2", "4 1 1 3 2"], ["10 12\n6 9 2 10 1 5 5 9 10 7 8 3\n", "585858594 60606064 8080810 834343444 638383846 785858595 913131322 595959602 286868692"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 153600]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "洛谷月赛"], "title": "[YsOI2023] Prüfer 序列", "background": "Ysuperman 模板测试的计数题。\n\n众所周知，Prüfer 序列几乎没有在正赛中出现过，所以它需要出现在洛谷月赛中。", "description": "众所周知，一棵 $n$ 个点的有标号无根树与他的 Prüfer 序列一一对应。如果你不知道 Prüfer 序列指的是什么，可以参考下面提示说明中对 Prüfer 序列的解释。\n\n现在给你一个长度为 $m$ 的正整数序列 $a$，其中 $a_i\\in[1,n]$。等概率随机选择这个序列的一个长度为 $n-2$ 的子序列（只要选择下标不同就认为两个子序列不同）作为 Prüfer 序列构造得到一棵树 $T$，对于所有 $1\\le i<n$，你需要求出 $\\mathrm{dist}(i,n)$ 的期望（$\\mathrm{dist}(u,v)$ 定义为 $u,v$ 两点简单路径的边数）。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "输入第一行两个正整数 $n,m$。\n\n第二行 $m$ 个整数表示序列 $a$，保证 $1\\le a_i\\le n$。", "outputFormat": "输出 $n-1$ 个非负整数，第 $i$ 个整数表示 $\\mathrm{dist}(i,n)$ 的期望。", "hint": "#### 对 Prüfer 序列的解释\n\n对于一棵给定的无根有标号树，Prüfer 序列的构建过程如下：每次选择一个编号最小的叶结点并删掉它，然后在序列中记录下它连接到的那个结点，重复 $n-2$ 次后就只剩下两个结点，此时记录下来的那个序列就是这棵无根有标号树的 Prüfer 序列。\n\n我们可以证明，一棵结点数量大于 $1$ 的无根有标号树和一个 Prüfer 序列是一一对应的，并且任意一个长度为 $n-2$ 每个数取 $[1,n]$ 范围内的整数的 Prüfer 序列都有唯一对应它的树，所以同样的，我们也可以根据一个 Prüfer 序列还原出一棵树。\n\n有关 Prüfer 序列更加详细的内容，你可以参考 [OI wiki 上关于 Prüfer 序列的描述](https://oi-wiki.org/graph/prufer/)。\n\n#### 样例 1 解释\n\n共有三种等可能选择的子序列：$2,4$，$2,3$，$4,3$。\n\n1. $2,4$ 对应的树为一条链 $1-2-4-3$，其中 $1,2,3$ 与 $4$ 的距离分别为 $2,1,1$。\n2. $2,3$ 对应的树为一条链 $1-2-3-4$，其中 $1,2,3$ 与 $4$ 的距离分别为 $3,2,1$。\n3. $4,3$ 对应的树为一条链 $1-4-3-2$，其中 $1,2,3$ 与 $4$ 的距离分别为 $1,2,1$。\n\n所以 $\\mathrm{dist}(1,4)$ 期望为 $(2+3+1)/3=2$，$\\mathrm{dist}(2,4)$ 期望为 $(1+2+2)/3=5/3\\equiv 666666673\\pmod{10^9+7}$，$\\mathrm{dist}(3,4)$ 期望为 $(1+1+1)/3=1$。\n\n#### 样例 2 解释\n\n仅有一种可能的子序列 $4,6,5,2$，对应的树为一条链 $1-4-5-2-6-3$，$1,2,3,4,5$ 与 $6$ 的距离依次为 $4,1,1,3,2$，即为答案。\n\n#### 数据范围\n\n本题共 $20$ 个测试点：\n\n|测试点编号|$n$|$m$|\n|:-:|:-:|:-:|\n|$1$|$=4$|$=6$|\n|$2$|$=8$|$=15$|\n|$3$|$=10$|$=20$|\n|$4$|$=10$|$=50$|\n|$5$|$=10$|$=200$|\n|$6$|$=10$|$=1000$|\n|$7$|$=10$|$=1750$|\n|$8$|$=10$|$=2500$|\n|$9$|$=11$|$=500$|\n|$10$|$=11$|$=1000$|\n|$11$|$=12$|$=250$|\n|$12$|$=12$|$=375$|\n|$13$|$=12$|$=400$|\n|$14$|$=13$|$=80$|\n|$15$|$=13$|$=120$|\n|$16$|$=13$|$=160$|\n|$17$|$=13$|$=200$|\n|$18$|$=14$|$=60$|\n|$19$|$=14$|$=90$|\n|$20$|$=15$|$=40$|\n\n另外，对于所有数据，保证 $1\\le a_i\\le n$。\n\n**请注意，前 $19$ 个测试点空间限制为 $512\\rm{MB}$，最后一个点空间限制为 $150\\rm{MB}$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2023] Prüfer 序列", "background": "Ysuperman 模板测试的计数题。\n\n众所周知，Prüfer 序列几乎没有在正赛中出现过，所以它需要出现在洛谷月赛中。", "description": "众所周知，一棵 $n$ 个点的有标号无根树与他的 Prüfer 序列一一对应。如果你不知道 Prüfer 序列指的是什么，可以参考下面提示说明中对 Prüfer 序列的解释。\n\n现在给你一个长度为 $m$ 的正整数序列 $a$，其中 $a_i\\in[1,n]$。等概率随机选择这个序列的一个长度为 $n-2$ 的子序列（只要选择下标不同就认为两个子序列不同）作为 Prüfer 序列构造得到一棵树 $T$，对于所有 $1\\le i<n$，你需要求出 $\\mathrm{dist}(i,n)$ 的期望（$\\mathrm{dist}(u,v)$ 定义为 $u,v$ 两点简单路径的边数）。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "输入第一行两个正整数 $n,m$。\n\n第二行 $m$ 个整数表示序列 $a$，保证 $1\\le a_i\\le n$。", "outputFormat": "输出 $n-1$ 个非负整数，第 $i$ 个整数表示 $\\mathrm{dist}(i,n)$ 的期望。", "hint": "#### 对 Prüfer 序列的解释\n\n对于一棵给定的无根有标号树，Prüfer 序列的构建过程如下：每次选择一个编号最小的叶结点并删掉它，然后在序列中记录下它连接到的那个结点，重复 $n-2$ 次后就只剩下两个结点，此时记录下来的那个序列就是这棵无根有标号树的 Prüfer 序列。\n\n我们可以证明，一棵结点数量大于 $1$ 的无根有标号树和一个 Prüfer 序列是一一对应的，并且任意一个长度为 $n-2$ 每个数取 $[1,n]$ 范围内的整数的 Prüfer 序列都有唯一对应它的树，所以同样的，我们也可以根据一个 Prüfer 序列还原出一棵树。\n\n有关 Prüfer 序列更加详细的内容，你可以参考 [OI wiki 上关于 Prüfer 序列的描述](https://oi-wiki.org/graph/prufer/)。\n\n#### 样例 1 解释\n\n共有三种等可能选择的子序列：$2,4$，$2,3$，$4,3$。\n\n1. $2,4$ 对应的树为一条链 $1-2-4-3$，其中 $1,2,3$ 与 $4$ 的距离分别为 $2,1,1$。\n2. $2,3$ 对应的树为一条链 $1-2-3-4$，其中 $1,2,3$ 与 $4$ 的距离分别为 $3,2,1$。\n3. $4,3$ 对应的树为一条链 $1-4-3-2$，其中 $1,2,3$ 与 $4$ 的距离分别为 $1,2,1$。\n\n所以 $\\mathrm{dist}(1,4)$ 期望为 $(2+3+1)/3=2$，$\\mathrm{dist}(2,4)$ 期望为 $(1+2+2)/3=5/3\\equiv 666666673\\pmod{10^9+7}$，$\\mathrm{dist}(3,4)$ 期望为 $(1+1+1)/3=1$。\n\n#### 样例 2 解释\n\n仅有一种可能的子序列 $4,6,5,2$，对应的树为一条链 $1-4-5-2-6-3$，$1,2,3,4,5$ 与 $6$ 的距离依次为 $4,1,1,3,2$，即为答案。\n\n#### 数据范围\n\n本题共 $20$ 个测试点：\n\n|测试点编号|$n$|$m$|\n|:-:|:-:|:-:|\n|$1$|$=4$|$=6$|\n|$2$|$=8$|$=15$|\n|$3$|$=10$|$=20$|\n|$4$|$=10$|$=50$|\n|$5$|$=10$|$=200$|\n|$6$|$=10$|$=1000$|\n|$7$|$=10$|$=1750$|\n|$8$|$=10$|$=2500$|\n|$9$|$=11$|$=500$|\n|$10$|$=11$|$=1000$|\n|$11$|$=12$|$=250$|\n|$12$|$=12$|$=375$|\n|$13$|$=12$|$=400$|\n|$14$|$=13$|$=80$|\n|$15$|$=13$|$=120$|\n|$16$|$=13$|$=160$|\n|$17$|$=13$|$=200$|\n|$18$|$=14$|$=60$|\n|$19$|$=14$|$=90$|\n|$20$|$=15$|$=40$|\n\n另外，对于所有数据，保证 $1\\le a_i\\le n$。\n\n**请注意，前 $19$ 个测试点空间限制为 $512\\rm{MB}$，最后一个点空间限制为 $150\\rm{MB}$。**", "locale": "zh-CN"}}}
{"pid": "P9537", "type": "P", "difficulty": 7, "samples": [["3\n1 2 3\n", "15"], ["5\n6 8 10 17 19\n", "378"], ["9\n2 3 4 6 7 8 12 16 18\n", "106533"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "洛谷原创", "O2优化", "洛谷月赛"], "title": "[YsOI2023] Qingshan and Daniel 2", "background": "Ysuperman 模板测试的博弈论题。\n\n都什么年代了，还在玩传统对称博弈，快来玩玩非传统非对称博弈。\n\n猜猜题目名称啥意思，没错就是要你快去做 CF1764B！！！另外这题融合了 CF1495、CF1707、CF1764 的梗（）", "description": "今天 Ysuperman 发现了一款非对称博弈游戏，名字叫做 Bugaboo，具体规则如下：\n\n> 在游戏的一开始，Qingshan 手中有一个正整数集 $S$，Daniel 手中有一个正整数集 $T$。\n>\n> Qingshan 和 Daniel 依次如下操作（Qingshan 先手）：选择在自己数集中的任意两个**不同的**数字 $x,y$，并且还需要满足 $|x-y|$ 不属于**对方的数集**，然后将 $|x-y|$ 加入**对方的数集**。最终无法操作的人失败。\n>\n> 可以注意到在游戏的进行过程中一个人手中的数集是会不断变化的，他在选择数字 $x,y$ 时既可以选择初始自己拥有的数字，也可以选择后面新增的数字。\n\n现在 Ysuperman 给了你一个正整数集 $R$，Ysuperman 想要知道如果 Qingshan 一开始拥有的集合 $S$ 是 $R$ 的 $2^{|R|}$ 个子集中的任意一个，而 Daniel 一开始拥有的集合 $T$ 也是 $R$ 的 $2^{|R|}$ 个子集中的任意一个，那么在多少种情况下 Qingshan 会赢。\n\n由于答案可能很大， Ysuperman 不想为难你，于是只要你求出答案对 $998,244,353$ 取模后的结果。", "inputFormat": "第一行一个整数 $n$ 表示集合 $R$ 的大小。\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\dots,a_n$ 表示集合 $R$ 中的所有数。", "outputFormat": "输出一行一个数表示答案对 $998,244,353$ 取模后的结果。", "hint": "#### 样例 1 解释\n\n对于第一组样例，显然 Qingshan 要赢的一个必要条件是她一开始的集合有至少两个数：\n\n1. 当 $S=\\{1,2\\}$ 时，Qingshan 赢当 $T=\\{\\},\\{2\\},\\{3\\},\\{2,3\\}$。\n1. 当 $S=\\{1,3\\}$ 时，Qingshan 赢当 $T=\\{\\},\\{1\\},\\{3\\}$。\n1. 当 $S=\\{2,3\\}$ 时，Qingshan 赢当 $T=\\{\\},\\{3\\}$。\n1. 当 $S=\\{1,2,3\\}$ 时，Qingshan 赢当 $T=\\{\\},\\{1\\},\\{2\\},\\{3\\},\\{1,3\\},\\{2,3\\}$。\n\n所以答案为 $4+3+2+6=15$。\n\n#### 数据范围\n\n对于 $15\\%$ 的数据，有 $a_i\\le 10$。\n\n对于 $30\\%$ 的数据，有 $n\\le 10$。\n\n对于 $50\\%$ 的数据，有 $a_i\\le 1000$。\n\n对于 $70\\%$ 的数据，有 $n\\le 1000$。\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 20000$，$1\\le a_1<a_2<\\cdots<a_n\\le 20000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2023] Qingshan and Daniel 2", "background": "Ysuperman 模板测试的博弈论题。\n\n都什么年代了，还在玩传统对称博弈，快来玩玩非传统非对称博弈。\n\n猜猜题目名称啥意思，没错就是要你快去做 CF1764B！！！另外这题融合了 CF1495、CF1707、CF1764 的梗（）", "description": "今天 Ysuperman 发现了一款非对称博弈游戏，名字叫做 Bugaboo，具体规则如下：\n\n> 在游戏的一开始，Qingshan 手中有一个正整数集 $S$，Daniel 手中有一个正整数集 $T$。\n>\n> Qingshan 和 Daniel 依次如下操作（Qingshan 先手）：选择在自己数集中的任意两个**不同的**数字 $x,y$，并且还需要满足 $|x-y|$ 不属于**对方的数集**，然后将 $|x-y|$ 加入**对方的数集**。最终无法操作的人失败。\n>\n> 可以注意到在游戏的进行过程中一个人手中的数集是会不断变化的，他在选择数字 $x,y$ 时既可以选择初始自己拥有的数字，也可以选择后面新增的数字。\n\n现在 Ysuperman 给了你一个正整数集 $R$，Ysuperman 想要知道如果 Qingshan 一开始拥有的集合 $S$ 是 $R$ 的 $2^{|R|}$ 个子集中的任意一个，而 Daniel 一开始拥有的集合 $T$ 也是 $R$ 的 $2^{|R|}$ 个子集中的任意一个，那么在多少种情况下 Qingshan 会赢。\n\n由于答案可能很大， Ysuperman 不想为难你，于是只要你求出答案对 $998,244,353$ 取模后的结果。", "inputFormat": "第一行一个整数 $n$ 表示集合 $R$ 的大小。\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\dots,a_n$ 表示集合 $R$ 中的所有数。", "outputFormat": "输出一行一个数表示答案对 $998,244,353$ 取模后的结果。", "hint": "#### 样例 1 解释\n\n对于第一组样例，显然 Qingshan 要赢的一个必要条件是她一开始的集合有至少两个数：\n\n1. 当 $S=\\{1,2\\}$ 时，Qingshan 赢当 $T=\\{\\},\\{2\\},\\{3\\},\\{2,3\\}$。\n1. 当 $S=\\{1,3\\}$ 时，Qingshan 赢当 $T=\\{\\},\\{1\\},\\{3\\}$。\n1. 当 $S=\\{2,3\\}$ 时，Qingshan 赢当 $T=\\{\\},\\{3\\}$。\n1. 当 $S=\\{1,2,3\\}$ 时，Qingshan 赢当 $T=\\{\\},\\{1\\},\\{2\\},\\{3\\},\\{1,3\\},\\{2,3\\}$。\n\n所以答案为 $4+3+2+6=15$。\n\n#### 数据范围\n\n对于 $15\\%$ 的数据，有 $a_i\\le 10$。\n\n对于 $30\\%$ 的数据，有 $n\\le 10$。\n\n对于 $50\\%$ 的数据，有 $a_i\\le 1000$。\n\n对于 $70\\%$ 的数据，有 $n\\le 1000$。\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 20000$，$1\\le a_1<a_2<\\cdots<a_n\\le 20000$。", "locale": "zh-CN"}}}
{"pid": "P9538", "type": "P", "difficulty": 2, "samples": [["4\n33\n2023\n10\n0", "8\n18\n9\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "「AWOI Round 2 A」最大和", "background": "", "description": "给你一个整数 $n$，你需要对这个数进行 $m$ 次操作。其中 $m$ 为当前需要操作的数的位数（默认自然数 $0$ 是一位数），且**可能随着 $n$ 的改变而改变**。\n\n第 $i$ $(1\\leqslant i \\leqslant m)$ 次操作有以下三种选择：\n\n1. $n\\gets n+10^{i-1}$。\n2. $n\\gets n-10^{i-1}$。\n3. $n$ 不变。\n\n要求最大化操作后的各个数位上数字之和。", "inputFormat": "本题一个测试点中含有多组测试数据。\n\n第一行一个正整数 $T$，代表有 $T$ 组数据。\n\n接下来的 $T$ 行，每行包含一个整数 $n$。", "outputFormat": "共 $T$ 行，每行一个整数，表示每组数据的 $n$ 经操作后最大的各个数位上数字之和。", "hint": "**【样例解释】**\n- 对于 $33$，每次操作都选择操作 $1$，得到最大值 $4+4=8$。\n- 对于 $2023$，第一、二、四次操作都选择操作 $1$，第三次操作选择操作 $2$，得到 $2+9+3+4 = 18$。\n- 对于 $10$，选择操作 $2$，得到 $9$，此时 $m$ 变为 $1$。因为已经操作了一次，所以不再操作。\n- 对于 $0$，选择操作 $1$ 即可。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，$1 \\leqslant T \n\\leqslant10^4$，$0 \\leqslant n \\leqslant 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\leqslant T \\leqslant 10^5$，$0 \\leqslant n \\leqslant 10^9$。\n\n**【工作人员】**\n\n| $\\text{Idea}$ | $\\text{Data}$ | $\\text{Check}$ | $\\text{Solution}$ |\n| :----------: | :----------: | :----------: | :----------: | \n| [S__X](/user/310466) | [S__X](/user/310466)|  [y_kx_b](/user/592895) | [S__X](/user/310466) | ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「AWOI Round 2 A」最大和", "background": "", "description": "给你一个整数 $n$，你需要对这个数进行 $m$ 次操作。其中 $m$ 为当前需要操作的数的位数（默认自然数 $0$ 是一位数），且**可能随着 $n$ 的改变而改变**。\n\n第 $i$ $(1\\leqslant i \\leqslant m)$ 次操作有以下三种选择：\n\n1. $n\\gets n+10^{i-1}$。\n2. $n\\gets n-10^{i-1}$。\n3. $n$ 不变。\n\n要求最大化操作后的各个数位上数字之和。", "inputFormat": "本题一个测试点中含有多组测试数据。\n\n第一行一个正整数 $T$，代表有 $T$ 组数据。\n\n接下来的 $T$ 行，每行包含一个整数 $n$。", "outputFormat": "共 $T$ 行，每行一个整数，表示每组数据的 $n$ 经操作后最大的各个数位上数字之和。", "hint": "**【样例解释】**\n- 对于 $33$，每次操作都选择操作 $1$，得到最大值 $4+4=8$。\n- 对于 $2023$，第一、二、四次操作都选择操作 $1$，第三次操作选择操作 $2$，得到 $2+9+3+4 = 18$。\n- 对于 $10$，选择操作 $2$，得到 $9$，此时 $m$ 变为 $1$。因为已经操作了一次，所以不再操作。\n- 对于 $0$，选择操作 $1$ 即可。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，$1 \\leqslant T \n\\leqslant10^4$，$0 \\leqslant n \\leqslant 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\leqslant T \\leqslant 10^5$，$0 \\leqslant n \\leqslant 10^9$。\n\n**【工作人员】**\n\n| $\\text{Idea}$ | $\\text{Data}$ | $\\text{Check}$ | $\\text{Solution}$ |\n| :----------: | :----------: | :----------: | :----------: | \n| [S__X](/user/310466) | [S__X](/user/310466)|  [y_kx_b](/user/592895) | [S__X](/user/310466) | ", "locale": "zh-CN"}}}
{"pid": "P9539", "type": "P", "difficulty": 2, "samples": [["3 1 2\naab", "aaa"], ["4 4 4\nawoi\n", "awoi"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["字符串", "贪心", "构造"], "title": "「AWOI Round 2 B」树学", "background": "HR 刚做完一个简单而又靓丽的题目，它想来试试这道题，可是它太蒻了，不会做，您能帮帮它吗？", "description": "构造一个长度为 $n$ 的小写字母串，要求和给定的长度为 $n$ 的小写字母串 $s$ 的相似度在 $[l,r]$ 范围内。\n\n定义两个长度都为 $n$ 的字符串 $a,b$ 的相似度为 $\\sum^{n}_{i=1}[a_i=b_i]$。\n\n您需要使构造出的字符串的字典序尽量小。", "inputFormat": "第一行三个正整数 $n,l,r$。\n\n接下来一行一个字符串，表示给定的小写字母串 $s$。", "outputFormat": "输出一行一个字符串，表示您构造的字典序最小的可行字符串。", "hint": "**【数据规模】**\n\n\n**本题使用捆绑测试。**\n\n| 子任务编号 | $n\\leqslant$ | 特殊性质 | 分值 |\n| -----------: | -----------: | -----------: | -----------: |\n| $1$ | $100$ | 无 | $20$ |\n| $2$ | $10^6$ | A | $10$ |\n| $3$ | $10^6$ | B | $10$ |\n| $4$ | $10^6$ | 无 | $60$ |\n\n特殊性质 A：$l=r=n$ 或 $l=0,r=n$。\n\n特殊性质 B：$s$ 的每一位都为 `a` 或都不为 `a`。\n\n对于 $100\\%$ 的数据，$1 \\leqslant n \\leqslant 10^6$，$0 \\leqslant l \\leqslant r \\leqslant n$，$s$ 的长度为 $n$。\n\n**【工作人员】**\n| $\\text{Idea}$ | $\\text{Data}$ | $\\text{Check}$ | $\\text{Solution}$ |\n| :----------: | :----------: | :----------: | :----------: | \n| [玄学OIER荷蒻](/user/671294) | [QwQ666\\_666](/user/677609) & [玄学OIER荷蒻](/user/671294) | [QwQ666\\_666](/user/677609)| [玄学OIER荷蒻](/user/671294) |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「AWOI Round 2 B」树学", "background": "HR 刚做完一个简单而又靓丽的题目，它想来试试这道题，可是它太蒻了，不会做，您能帮帮它吗？", "description": "构造一个长度为 $n$ 的小写字母串，要求和给定的长度为 $n$ 的小写字母串 $s$ 的相似度在 $[l,r]$ 范围内。\n\n定义两个长度都为 $n$ 的字符串 $a,b$ 的相似度为 $\\sum^{n}_{i=1}[a_i=b_i]$。\n\n您需要使构造出的字符串的字典序尽量小。", "inputFormat": "第一行三个正整数 $n,l,r$。\n\n接下来一行一个字符串，表示给定的小写字母串 $s$。", "outputFormat": "输出一行一个字符串，表示您构造的字典序最小的可行字符串。", "hint": "**【数据规模】**\n\n\n**本题使用捆绑测试。**\n\n| 子任务编号 | $n\\leqslant$ | 特殊性质 | 分值 |\n| -----------: | -----------: | -----------: | -----------: |\n| $1$ | $100$ | 无 | $20$ |\n| $2$ | $10^6$ | A | $10$ |\n| $3$ | $10^6$ | B | $10$ |\n| $4$ | $10^6$ | 无 | $60$ |\n\n特殊性质 A：$l=r=n$ 或 $l=0,r=n$。\n\n特殊性质 B：$s$ 的每一位都为 `a` 或都不为 `a`。\n\n对于 $100\\%$ 的数据，$1 \\leqslant n \\leqslant 10^6$，$0 \\leqslant l \\leqslant r \\leqslant n$，$s$ 的长度为 $n$。\n\n**【工作人员】**\n| $\\text{Idea}$ | $\\text{Data}$ | $\\text{Check}$ | $\\text{Solution}$ |\n| :----------: | :----------: | :----------: | :----------: | \n| [玄学OIER荷蒻](/user/671294) | [QwQ666\\_666](/user/677609) & [玄学OIER荷蒻](/user/671294) | [QwQ666\\_666](/user/677609)| [玄学OIER荷蒻](/user/671294) |", "locale": "zh-CN"}}}
{"pid": "P9540", "type": "P", "difficulty": 3, "samples": [["5 1 1\n1 1 45 1 4\n1 9 1 9 810", "1"], ["20 0 3\n1 0 0 8 6 10 0 8 6 1 0 0 86 1 0 0 8 6 0 0\n5 2 0 1 3 1 4 52 0 13 14 0 1 0 1 0 4 0 5 0", "4"], ["3 2 4\n110 105 117\n99 108 98", "1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心"], "title": "「AWOI Round 2 C」数组操作？数组操作！", "background": "", "description": "给定两个长度为 $n$ 的数组 $a,b$ ，将它们合并得到一个长度为 $2\\times n$ 的数组 $c$。\n\n设 $a$ 数组第 $i$ 个元素合并后位于 $c$ 数组第 $lb_i$ 个位置，$b$ 数组第 $i$ 个元素合并后位于 $c$ 数组第 $lc_i$ 个位置，合并后需要满足：$lb_1 < lb_2 < ...< lb_{n-1} < lb_n$ 且 $lc_1 < lc_2< ...< lc_{n-1}< lc_n$，即两个数组中元素的相对位置不变。\n\n合并过后，你需要对 $c$ 数组进行下面操作：\n\n1. 变换操作：选择一个区间 $[l,r]$，对于每一个 $i \\in [l,r]$，如果 $c_i$ 为 $y$，则将其变成一个不同于 $y$ 的数，否则将其变为 $y$。\n2. 翻转操作：选择一个区间 $[l,r]$，翻转该数组区间中的数。此操作**必须刚好**操作 $z$ 次。\n\n请输出最少需要执行多少次变换操作才能使得 $c$ 数组中的数字都为 $y$。 ", "inputFormat": "第一行包含三个整数 $n,y,z$。\n\n第二行包含 $n$ 个整数，代表 $a$ 数组中的元素。\n\n第三行包含 $n$ 个整数，代表 $b$ 数组中的元素。", "outputFormat": "一个正整数，表示答案。", "hint": "**【样例说明】**\n\n对于样例 $1$，令 $c$ 为 $\\{1,1,1,9,45,1,1,9,4,810\\}$。\n\n其中 $c_1=a_1,c_2=b_1,c_3=a_2,c_4=b_2,c_5=a_3,c_6=a_4,c_7=b_3,c_8=b_4,c_9=a_5,c_{10}=b_5$。满足要求。\n\n然后翻转区间 $[4,7]$， $c$ 数组变为 $\\{1,1,1,1,1,45,9,9,4,810\\}$。\n\n接着执行变换操作，将 $[6,10]$ 中的数全部变成 $1$。\n\n所以最少只需要一次变换操作，可以证明没有比该方法更优的策略。\n\n**【数据规模】**\n\n请注意本题特殊的时间限制，并使用更快的 IO 方式。\n\n**本题使用捆绑测试。**\n\n| 子任务编号 | $n\\leqslant$ | 特殊性质 | 分值 |\n| -----------: | -----------: | -----------: | -----------: |\n| $1$ | $5$ | 无 | $20$ |\n| $2$ | $10^6$ | $z>n$ | $5$ |\n| $3$ | $10^6$ | 特殊性质 A | $10$ |\n| $4$ | $10^6$ | $z=0$ | $25$ |\n| $5$ | $10^6$ | 无 | $40$ |\n\n特殊性质 A：保证两个数组中的元素都为 $y$ 或都不为 $y$。\n\n对于全部数据，保证 $0 \\leqslant y,z \\leqslant 10^9$，输入数据全部在 `int` 范围内。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「AWOI Round 2 C」数组操作？数组操作！", "background": "", "description": "给定两个长度为 $n$ 的数组 $a,b$ ，将它们合并得到一个长度为 $2\\times n$ 的数组 $c$。\n\n设 $a$ 数组第 $i$ 个元素合并后位于 $c$ 数组第 $lb_i$ 个位置，$b$ 数组第 $i$ 个元素合并后位于 $c$ 数组第 $lc_i$ 个位置，合并后需要满足：$lb_1 < lb_2 < ...< lb_{n-1} < lb_n$ 且 $lc_1 < lc_2< ...< lc_{n-1}< lc_n$，即两个数组中元素的相对位置不变。\n\n合并过后，你需要对 $c$ 数组进行下面操作：\n\n1. 变换操作：选择一个区间 $[l,r]$，对于每一个 $i \\in [l,r]$，如果 $c_i$ 为 $y$，则将其变成一个不同于 $y$ 的数，否则将其变为 $y$。\n2. 翻转操作：选择一个区间 $[l,r]$，翻转该数组区间中的数。此操作**必须刚好**操作 $z$ 次。\n\n请输出最少需要执行多少次变换操作才能使得 $c$ 数组中的数字都为 $y$。 ", "inputFormat": "第一行包含三个整数 $n,y,z$。\n\n第二行包含 $n$ 个整数，代表 $a$ 数组中的元素。\n\n第三行包含 $n$ 个整数，代表 $b$ 数组中的元素。", "outputFormat": "一个正整数，表示答案。", "hint": "**【样例说明】**\n\n对于样例 $1$，令 $c$ 为 $\\{1,1,1,9,45,1,1,9,4,810\\}$。\n\n其中 $c_1=a_1,c_2=b_1,c_3=a_2,c_4=b_2,c_5=a_3,c_6=a_4,c_7=b_3,c_8=b_4,c_9=a_5,c_{10}=b_5$。满足要求。\n\n然后翻转区间 $[4,7]$， $c$ 数组变为 $\\{1,1,1,1,1,45,9,9,4,810\\}$。\n\n接着执行变换操作，将 $[6,10]$ 中的数全部变成 $1$。\n\n所以最少只需要一次变换操作，可以证明没有比该方法更优的策略。\n\n**【数据规模】**\n\n请注意本题特殊的时间限制，并使用更快的 IO 方式。\n\n**本题使用捆绑测试。**\n\n| 子任务编号 | $n\\leqslant$ | 特殊性质 | 分值 |\n| -----------: | -----------: | -----------: | -----------: |\n| $1$ | $5$ | 无 | $20$ |\n| $2$ | $10^6$ | $z>n$ | $5$ |\n| $3$ | $10^6$ | 特殊性质 A | $10$ |\n| $4$ | $10^6$ | $z=0$ | $25$ |\n| $5$ | $10^6$ | 无 | $40$ |\n\n特殊性质 A：保证两个数组中的元素都为 $y$ 或都不为 $y$。\n\n对于全部数据，保证 $0 \\leqslant y,z \\leqslant 10^9$，输入数据全部在 `int` 范围内。", "locale": "zh-CN"}}}
{"pid": "P9541", "type": "P", "difficulty": 3, "samples": [["5\n1\n2 3\n4 5 6\n10 9 8 7\n2 5 2 5 6", "40 10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP"], "title": "「AWOI Round 2 D」数字三角形", "background": "", "description": "Glad 发现了一个 $n$ 层数字三角形，他发现可以用魔法来操纵这个三角形！\n\n他可以先消耗 $nk_1$ 点消耗值，让将三角形旋转 $k_1$ 次。其中“旋转”指绕三角形中心顺时针旋转 $120^\\circ$。\n\n然后，他可以不停地进行下面操作：\n\n- 消耗 $1$ 点消耗值，选择一层，调换这一层任意两个数的位置。\n\n现在，Glad 要从三角形的最后一层走到最顶层，起点可以为最后一层的任意一个数，行走的每一步只能走到与当前数相邻的数上，且每一行只能经过一个数。\n\nGlad 想在经过数之和最大的前提下让消耗的消耗值最小，你可以帮帮他吗？", "inputFormat": "一个正整数 $n$，表示三角形的层数。\n\n后面 $n$ 行，表示数字三角形。其中第 $i$ 层有 $i$ 个数（$1\\leqslant i\\leqslant n$）。", "outputFormat": "两个整数，分别表示最大能经过的数之和以及最少要消耗多少消耗值。", "hint": "**【样例解释】**\n\n初始三角形为：\n\n```\n    1\n   2 3\n  4 5 6\n10 9 8 7\n2 5 2 5 6\n```\n\n\n将其向右翻转 $2$ 次，消耗 $10$ 点调换值，此时三角形变为：\n\n```\n    6\n   7 5\n  6 8 2\n 3 5 9 5\n1 2 4 10 2\n```\n\n无须调换数字，沿着 $6,7,8,9,10$ 走，可以得到最大值 $40$，共耗费 $10$ 点调换值。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 数据范围 | 特殊性质 | 分值 |  \n| :-----------: | :-----------: | :-----------: | :-----------: |  \n| $\\text{Subtask1}$ | $1\\leqslant n\\leqslant 10$ | AB | $10$ |  \n| $\\text{Subtask2}$ | $1\\leqslant n \\leqslant 10$ | A | $10$ |  \n| $\\text{Subtask3}$ | $1\\leqslant n \\leqslant 10$ | B | $10$ |  \n| $\\text{Subtask4}$ | $1\\leqslant n \\leqslant 10$ | 无 | $10$ | \n| $\\text{Subtask5}$ | $1\\leqslant n \\leqslant 40$ | 无 | $20$ | \n| $\\text{Subtask6}$ | $1\\leqslant n\\leqslant 10^3$ | 无 | $40$ |  \n\n特殊性质 A：不需要调换数字就可以得到最优解。\n\n特殊性质 B：不需要向右旋转就可以得到最优解。\n\n对于 $100\\%$ 的数据，保证：$1\\leqslant n\\leqslant 10^3$，$0\\leqslant a_i\\leqslant10^4$。\n\n**【工作人员】**\n\n| $\\text{Idea}$ | $\\text{Data}$ | $\\text{Check}$ | $\\text{Solution}$ |\n| :----------: | :----------: | :----------: | :----------: |\n|[S__X](/user/310466) |[S__X](/user/310466)|[I_am_AKed_by_NOI](/user/807853) | [I_am_AKed_by_NOI](/user/807853) |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「AWOI Round 2 D」数字三角形", "background": "", "description": "Glad 发现了一个 $n$ 层数字三角形，他发现可以用魔法来操纵这个三角形！\n\n他可以先消耗 $nk_1$ 点消耗值，让将三角形旋转 $k_1$ 次。其中“旋转”指绕三角形中心顺时针旋转 $120^\\circ$。\n\n然后，他可以不停地进行下面操作：\n\n- 消耗 $1$ 点消耗值，选择一层，调换这一层任意两个数的位置。\n\n现在，Glad 要从三角形的最后一层走到最顶层，起点可以为最后一层的任意一个数，行走的每一步只能走到与当前数相邻的数上，且每一行只能经过一个数。\n\nGlad 想在经过数之和最大的前提下让消耗的消耗值最小，你可以帮帮他吗？", "inputFormat": "一个正整数 $n$，表示三角形的层数。\n\n后面 $n$ 行，表示数字三角形。其中第 $i$ 层有 $i$ 个数（$1\\leqslant i\\leqslant n$）。", "outputFormat": "两个整数，分别表示最大能经过的数之和以及最少要消耗多少消耗值。", "hint": "**【样例解释】**\n\n初始三角形为：\n\n```\n    1\n   2 3\n  4 5 6\n10 9 8 7\n2 5 2 5 6\n```\n\n\n将其向右翻转 $2$ 次，消耗 $10$ 点调换值，此时三角形变为：\n\n```\n    6\n   7 5\n  6 8 2\n 3 5 9 5\n1 2 4 10 2\n```\n\n无须调换数字，沿着 $6,7,8,9,10$ 走，可以得到最大值 $40$，共耗费 $10$ 点调换值。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 数据范围 | 特殊性质 | 分值 |  \n| :-----------: | :-----------: | :-----------: | :-----------: |  \n| $\\text{Subtask1}$ | $1\\leqslant n\\leqslant 10$ | AB | $10$ |  \n| $\\text{Subtask2}$ | $1\\leqslant n \\leqslant 10$ | A | $10$ |  \n| $\\text{Subtask3}$ | $1\\leqslant n \\leqslant 10$ | B | $10$ |  \n| $\\text{Subtask4}$ | $1\\leqslant n \\leqslant 10$ | 无 | $10$ | \n| $\\text{Subtask5}$ | $1\\leqslant n \\leqslant 40$ | 无 | $20$ | \n| $\\text{Subtask6}$ | $1\\leqslant n\\leqslant 10^3$ | 无 | $40$ |  \n\n特殊性质 A：不需要调换数字就可以得到最优解。\n\n特殊性质 B：不需要向右旋转就可以得到最优解。\n\n对于 $100\\%$ 的数据，保证：$1\\leqslant n\\leqslant 10^3$，$0\\leqslant a_i\\leqslant10^4$。\n\n**【工作人员】**\n\n| $\\text{Idea}$ | $\\text{Data}$ | $\\text{Check}$ | $\\text{Solution}$ |\n| :----------: | :----------: | :----------: | :----------: |\n|[S__X](/user/310466) |[S__X](/user/310466)|[I_am_AKed_by_NOI](/user/807853) | [I_am_AKed_by_NOI](/user/807853) |", "locale": "zh-CN"}}}
{"pid": "P9542", "type": "P", "difficulty": 6, "samples": [["3 2 2\n1 0\n2 1\n1 2 1\n2 3 2\n", "2"], ["4 4 3\n1 1\n2 1\n3 0\n1 2 1\n2 3 1\n3 4 1\n4 1 3", "3"], ["见选手目录下的 alphago/alphago3.in 与 alphago/alphago3.ans。", "见选手目录下的 alphago/alphago3.in 与 alphago/alphago3.ans。"], ["见选手目录下的 alphago/alphago4.in 与 alphago/alphago4.ans。", "见选手目录下的 alphago/alphago4.in 与 alphago/alphago4.ans。"], ["见选手目录下的 alphago/alphago5.in 与 alphago/alphago5.ans。", "见选手目录下的 alphago/alphago5.in 与 alphago/alphago5.ans。"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "图论", "2023", "O2优化", "二分图", "Ad-hoc", "湖北"], "title": "[湖北省选模拟 2023] 棋圣 / alphago", "background": "", "description": "小 K 是一名棋手，厌倦了传统围棋之后，他发明了一种新式围棋。\n\n新式围棋是一种单人游戏。这个游戏的棋盘是一张包含 $n$ 个顶点，$m$ 条边的无向连通图，并且不存在重边和自环。同时，每条边有一个权值，第 $i$ 条边的权值为 $w_i$。\n\n游戏开始时，每个顶点上可能有一颗黑棋或者一颗白棋，或者什么也没有。**至少有一个顶点上没有棋子。** 接下来，玩家需要进行若干次操作。每次的操作形式如下：\n\n首先，选定一个上面没有棋子的顶点 $u$。可以说明，在题目数据范围下，一定存在这样的顶点。\n\n接下来，对于每一颗棋子，若它位于顶点 $v$，则玩家需任选一条从 $v$ 到 $u$ 的**简单路径**，并将这颗棋子沿着这条简单路径移动一步。形式化地，一条简单路径为一个顶点序列 $\\{p_1,p_2 \\ldots p_k\\}$，满足 $p_1 = v$，$p_k = u$ ，$p_1,p_2 \\ldots p_k$ **互不相同**，且 $p_i$ 和 $p_{i+1}$ 之间存在一条边。在操作之后，这颗棋子将被移动至顶点 $p_2$。\n\n需要注意的是，虽然在游戏开始时每个顶点上至多存在一颗棋子，但在若干次操作之后一个顶点上可能有多个棋子。对于同一个顶点上的不同棋子，一次操作中选取的简单路径可以不同。\n\n玩家可以在进行任意次操作（可以是 $0$ 次）之后进行**点目**，即结算游戏分数。对于每一对颜色不同的棋子，若它们所在的顶点之间由一条权值为 $w$ 的边直接相连，则称它们**围住了这条边**，会使玩家得到 $w$ 的**目数**。而一个玩家所得到的**目数**即所有棋子对产生的**目数**之和。\n\n现小 K 给了你一张游戏开始时的棋盘，请你帮他求出在这张棋盘上最多可能得到的**目数**。", "inputFormat": "输入共 $m+k+1$ 行。\n\n第一行三个整数 $n,m,k$，分别表示点和边的数量，以及棋子的数量。\n\n接下来 $k$ 行，每行两个整数 $x,c$，表示顶点 $x$ 上有一颗颜色为 $c$ 的棋子。其中 $c=0$ 表示一颗黑棋，$c=1$ 表示一颗白棋。\n\n接下来 $m$ 行每行三个整数 $u,v,w$，表示图中有一条连接 $u$ 和 $v$ 的权值为 $w$ 的边。", "outputFormat": "输出一行一个整数，为所求答案。", "hint": "### 样例 1 解释\n\n对于第一组样例，可以选定顶点 $3$，然后将 $1$ 号点上的黑棋移动到顶点 $2$，将 $2$ 号点的黑棋移动到顶点 $3$，这样两颗棋子所在的顶点之间由一条边权为 $2$ 的边连接，产生的目数为 $2$。\n\n### 子任务\n\n对于所有测试数据，保证  $3 \\leq n \\leq 100$，$n-1 \\leq m \\leq \\frac{n(n-1)}{2}$，$1 \\leq k \\leq n-1$，$0 \\leq w_i \\leq 10^5$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5iu3ldkx.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2023] 棋圣 / alphago", "background": "", "description": "小 K 是一名棋手，厌倦了传统围棋之后，他发明了一种新式围棋。\n\n新式围棋是一种单人游戏。这个游戏的棋盘是一张包含 $n$ 个顶点，$m$ 条边的无向连通图，并且不存在重边和自环。同时，每条边有一个权值，第 $i$ 条边的权值为 $w_i$。\n\n游戏开始时，每个顶点上可能有一颗黑棋或者一颗白棋，或者什么也没有。**至少有一个顶点上没有棋子。** 接下来，玩家需要进行若干次操作。每次的操作形式如下：\n\n首先，选定一个上面没有棋子的顶点 $u$。可以说明，在题目数据范围下，一定存在这样的顶点。\n\n接下来，对于每一颗棋子，若它位于顶点 $v$，则玩家需任选一条从 $v$ 到 $u$ 的**简单路径**，并将这颗棋子沿着这条简单路径移动一步。形式化地，一条简单路径为一个顶点序列 $\\{p_1,p_2 \\ldots p_k\\}$，满足 $p_1 = v$，$p_k = u$ ，$p_1,p_2 \\ldots p_k$ **互不相同**，且 $p_i$ 和 $p_{i+1}$ 之间存在一条边。在操作之后，这颗棋子将被移动至顶点 $p_2$。\n\n需要注意的是，虽然在游戏开始时每个顶点上至多存在一颗棋子，但在若干次操作之后一个顶点上可能有多个棋子。对于同一个顶点上的不同棋子，一次操作中选取的简单路径可以不同。\n\n玩家可以在进行任意次操作（可以是 $0$ 次）之后进行**点目**，即结算游戏分数。对于每一对颜色不同的棋子，若它们所在的顶点之间由一条权值为 $w$ 的边直接相连，则称它们**围住了这条边**，会使玩家得到 $w$ 的**目数**。而一个玩家所得到的**目数**即所有棋子对产生的**目数**之和。\n\n现小 K 给了你一张游戏开始时的棋盘，请你帮他求出在这张棋盘上最多可能得到的**目数**。", "inputFormat": "输入共 $m+k+1$ 行。\n\n第一行三个整数 $n,m,k$，分别表示点和边的数量，以及棋子的数量。\n\n接下来 $k$ 行，每行两个整数 $x,c$，表示顶点 $x$ 上有一颗颜色为 $c$ 的棋子。其中 $c=0$ 表示一颗黑棋，$c=1$ 表示一颗白棋。\n\n接下来 $m$ 行每行三个整数 $u,v,w$，表示图中有一条连接 $u$ 和 $v$ 的权值为 $w$ 的边。", "outputFormat": "输出一行一个整数，为所求答案。", "hint": "### 样例 1 解释\n\n对于第一组样例，可以选定顶点 $3$，然后将 $1$ 号点上的黑棋移动到顶点 $2$，将 $2$ 号点的黑棋移动到顶点 $3$，这样两颗棋子所在的顶点之间由一条边权为 $2$ 的边连接，产生的目数为 $2$。\n\n### 子任务\n\n对于所有测试数据，保证  $3 \\leq n \\leq 100$，$n-1 \\leq m \\leq \\frac{n(n-1)}{2}$，$1 \\leq k \\leq n-1$，$0 \\leq w_i \\leq 10^5$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5iu3ldkx.png)", "locale": "zh-CN"}}}
{"pid": "P9543", "type": "P", "difficulty": 7, "samples": [["aab\nab", "7"], ["mikageandspica\nspica", "140"], ["见选手目录下的 diary/diary3.in 与 diary/diary3.ans。", "见选手目录下的 diary/diary3.in 与 diary/diary3.ans。"], ["见选手目录下的 diary/diary4.in 与 diary/diary4.ans。", "见选手目录下的 diary/diary4.in 与 diary/diary4.ans。"], ["见选手目录下的 diary/diary5.in 与 diary/diary5.ans。", "见选手目录下的 diary/diary5.in 与 diary/diary5.ans。"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "湖北"], "title": "[湖北省选模拟 2023] 日记 / diary", "background": "", "description": "小 M 决定开始写日记，但她不愿意花费太多时间构思日记的内容。为此，她找来了一个长度为 $n$ 的字符串 $S$，决定任取 $S$ 的一个前缀 $P$，再任取 $S$ 的一个后缀 $Q$，将 $P$ 和 $Q$ 顺次连接起来得到的字符串 $P+Q$ 作为日记的内容。这里，空串也认为是 $S$ 的前缀和后缀，因此 $P$ 和 $Q$ 各有 $n+1$ 种取法。\n\n当然了，这样形成的很多字符串是无意义的。具体而言，小 M 认为一个已知的长度为 $m$ 的字符串 $T$ 为重要信息，所有包含该重要信息作为子串的字符串都是有意义的，反之则是无意义的。\n\n请你求出，小 M 一共能写出多少种本质不同的有意义的字符串。本质不同就是说，对于某个有意义的字符串 $A$ ，即使它可以被若干种取前缀和后缀的方式得到，也只应被计入一次。", "inputFormat": "输入共两行。\n\n第一行一个字符串 $S$。\n\n第二行一个字符串 $T$。", "outputFormat": "一行一个整数，所求答案。", "hint": "### 样例 1 解释\n\n对于第一组样例，所有能够形成的有意义字符串分别为  `ab`，`aab`，`aaab`，`aaaab`，`aabaab`，`aabab`，`aabb`，一共 $7$ 种。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\leq |S| \\leq 5 \\times 10^6$，$1 \\leq |T| \\leq 2|S|$，输入的字符串 $S$ 和 $T$ 仅包含小写英文字母。其中 $|S|,|T|$ 分别表示串 $S$ 和 $T$ 的长度。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j2ymssdo.png)\n\n- 2023.8.21 添加一组 hack 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2023] 日记 / diary", "background": "", "description": "小 M 决定开始写日记，但她不愿意花费太多时间构思日记的内容。为此，她找来了一个长度为 $n$ 的字符串 $S$，决定任取 $S$ 的一个前缀 $P$，再任取 $S$ 的一个后缀 $Q$，将 $P$ 和 $Q$ 顺次连接起来得到的字符串 $P+Q$ 作为日记的内容。这里，空串也认为是 $S$ 的前缀和后缀，因此 $P$ 和 $Q$ 各有 $n+1$ 种取法。\n\n当然了，这样形成的很多字符串是无意义的。具体而言，小 M 认为一个已知的长度为 $m$ 的字符串 $T$ 为重要信息，所有包含该重要信息作为子串的字符串都是有意义的，反之则是无意义的。\n\n请你求出，小 M 一共能写出多少种本质不同的有意义的字符串。本质不同就是说，对于某个有意义的字符串 $A$ ，即使它可以被若干种取前缀和后缀的方式得到，也只应被计入一次。", "inputFormat": "输入共两行。\n\n第一行一个字符串 $S$。\n\n第二行一个字符串 $T$。", "outputFormat": "一行一个整数，所求答案。", "hint": "### 样例 1 解释\n\n对于第一组样例，所有能够形成的有意义字符串分别为  `ab`，`aab`，`aaab`，`aaaab`，`aabaab`，`aabab`，`aabb`，一共 $7$ 种。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\leq |S| \\leq 5 \\times 10^6$，$1 \\leq |T| \\leq 2|S|$，输入的字符串 $S$ 和 $T$ 仅包含小写英文字母。其中 $|S|,|T|$ 分别表示串 $S$ 和 $T$ 的长度。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j2ymssdo.png)\n\n- 2023.8.21 添加一组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P9544", "type": "P", "difficulty": 7, "samples": [["4 2 2 3\n1 1 5\n3 2 2\n3 3 1\n2 4 1\n1 2\n2 3\n2 4\n", "3"], ["8 3 269 1729\n607 777 617\n549 717 735\n341 672 988\n5 601 1395\n846 263 892\n796 954 251\n243 144 1614\n978 430 593\n2 1\n3 2\n4 1\n5 4\n6 2\n7 1\n8 5\n", "-1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "湖北"], "title": "[湖北省选模拟 2023] 调和 / concoct", "background": "", "description": "小 C 是一名药师，为了制作出某种药剂，她需要在 S 大陆上寻找一些药材。\n\nS 大陆可以抽象为一棵 $n$ 个顶点的无根树，每个顶点上都有一种药材。每种药材的属性可以描述为一个三元组 $(x,y,z)$，其中 $x$，$y$，$z$ 均为正整数。\n\n如果小 C 获得了 $n$ 种属性分别为 $(x_1,y_1,z_1), (x_2,y_2,z_2)  \\ldots  (x_n,y_n,z_n)$ 的 $n$ 种药材，她可以任取 $n$ 个不全为 $0$ 的非负实数 $a_1,a_2 \\ldots a_n$，将这些药材调和为一种属性为 $(\\sum a_i x_i,\\sum a_i y_i,\\sum a_i z_i)$ 的药剂。\n\n现在小 C 需要在 S 大陆上收集药材。具体而言，她需要选定树上的一个连通块，并获得连通块中所有顶点上的药材。现给定小 C 想制作的药剂的属性 $(a,b,c)$，请你求出，如果小 C 需要使用所获得的药材调和出属性为 $(a,b,c)$ 的药剂，她选定的连通块的大小至少是多少。", "inputFormat": "输入共 $2n$ 行。\n\n第一行四个正整数 $n,a,b,c$。\n\n接下来 $n$ 行，每行三个正整数 $x_i,y_i,z_i$，表示 $i$ 号节点上的药材的属性。\n\n接下来 $n-1$ 行，每行两个整数 $u$ 和 $v$，表示树上存在一条连接 $u$ 和 $v$ 的边。\n\n**保证输入的边描述的是一棵树。**\n\n**保证不存在两个完全相同的药材，但是可以存在某一个药材的属性和所需药剂完全一致。**\n\n**保证对于所有药材，都有 $x_i + y_i + z_i = a + b + c$。**", "outputFormat": "输出一行一个整数，为所求答案。", "hint": "### 样例 1 解释\n\n对于第一组样例，可以选择包含顶点 $1$，$2$ 和 $3$ 的连通块，取 $a_1,a_2,a_3$ 分别为 $\\dfrac{1}{2},0,\\dfrac{1}{2}$，即可得到属性为 $(\\dfrac{1}{2} + \\dfrac{3}{2},\\dfrac{1}{2} + \\dfrac{3}{2},\\dfrac{5}{2} + \\dfrac{1}{2}) = (2,2,3)$ 的药材。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\leq n \\leq 5 \\times 10^4$，$1 \\leq a,b,c,x_i,y_i,z_i \\leq 2 \\times 10^9$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qh0c3wfw.png)\n\n- 2023.8.25 添加一组 hack 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2023] 调和 / concoct", "background": "", "description": "小 C 是一名药师，为了制作出某种药剂，她需要在 S 大陆上寻找一些药材。\n\nS 大陆可以抽象为一棵 $n$ 个顶点的无根树，每个顶点上都有一种药材。每种药材的属性可以描述为一个三元组 $(x,y,z)$，其中 $x$，$y$，$z$ 均为正整数。\n\n如果小 C 获得了 $n$ 种属性分别为 $(x_1,y_1,z_1), (x_2,y_2,z_2)  \\ldots  (x_n,y_n,z_n)$ 的 $n$ 种药材，她可以任取 $n$ 个不全为 $0$ 的非负实数 $a_1,a_2 \\ldots a_n$，将这些药材调和为一种属性为 $(\\sum a_i x_i,\\sum a_i y_i,\\sum a_i z_i)$ 的药剂。\n\n现在小 C 需要在 S 大陆上收集药材。具体而言，她需要选定树上的一个连通块，并获得连通块中所有顶点上的药材。现给定小 C 想制作的药剂的属性 $(a,b,c)$，请你求出，如果小 C 需要使用所获得的药材调和出属性为 $(a,b,c)$ 的药剂，她选定的连通块的大小至少是多少。", "inputFormat": "输入共 $2n$ 行。\n\n第一行四个正整数 $n,a,b,c$。\n\n接下来 $n$ 行，每行三个正整数 $x_i,y_i,z_i$，表示 $i$ 号节点上的药材的属性。\n\n接下来 $n-1$ 行，每行两个整数 $u$ 和 $v$，表示树上存在一条连接 $u$ 和 $v$ 的边。\n\n**保证输入的边描述的是一棵树。**\n\n**保证不存在两个完全相同的药材，但是可以存在某一个药材的属性和所需药剂完全一致。**\n\n**保证对于所有药材，都有 $x_i + y_i + z_i = a + b + c$。**", "outputFormat": "输出一行一个整数，为所求答案。", "hint": "### 样例 1 解释\n\n对于第一组样例，可以选择包含顶点 $1$，$2$ 和 $3$ 的连通块，取 $a_1,a_2,a_3$ 分别为 $\\dfrac{1}{2},0,\\dfrac{1}{2}$，即可得到属性为 $(\\dfrac{1}{2} + \\dfrac{3}{2},\\dfrac{1}{2} + \\dfrac{3}{2},\\dfrac{5}{2} + \\dfrac{1}{2}) = (2,2,3)$ 的药材。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\leq n \\leq 5 \\times 10^4$，$1 \\leq a,b,c,x_i,y_i,z_i \\leq 2 \\times 10^9$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qh0c3wfw.png)\n\n- 2023.8.25 添加一组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P9545", "type": "P", "difficulty": 6, "samples": [["5 2\n01001\n00110\n10001\n10101\n01000\n2 2 1 4\n5 2 4 1\n", "2\n3\n"], ["见选手目录下的 road/road2.in 与 road/road2.ans。", "见选手目录下的 road/road2.in 与 road/road2.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "湖北"], "title": "[湖北省选模拟 2023] 环山危路 / road", "background": "", "description": "R 国有 $n$ 座城市，编号从 $1$ 到 $n$。这些城市两两之间都有道路连接，形成一个图的结构。不过，这些路修得很烂，每条路都有一个固定的方向，车只能按照这个方向行驶；路还是一次性的，也就是说最多只能过一辆车。\n\n现在 R 国正在制定防灾减灾预案。你需要帮助 R 国计算，如果 $t_i$ 号城市发生了灾难，并且 $s_{i,1},s_{i,2},\\dots,s_{i,k_i}$ 这些城市有充足的救灾物资（可以认为它们都拥有可以装无数辆车的物资），那么最多能从这些城市运送几车物资到达 $t_i$。车只能走城间的那些一次性道路，不过车在到达 $t_i$ 之前是可以经过多个城市和多条道路中转的。", "inputFormat": "输入共 $n+m +1$ 行。\n\n第一行两个正整数 $n,m$，表示城市个数和询问次数。\n\n第二行到第 $n+1$ 行，每行一个长为 $n$ 的 $01$ 字符串，第 $i+1$ 行第 $j$ 列表示是否有从 $i$ 通向 $j$ 的道路（$1$ 表示有，$0$ 表示无）。\n\n接下来 $m$ 行，每行第一个正整数为 $t_i$，第二个正整数为 $k_i$，接着 $k_i$ 个正整数 $s_{i,1},s_{i,2},\\dots,s_{i,k_i}$。保证 $s_{i,1},s_{i,2},\\dots,s_{i,k_i}$ 中没有重复的数且没有 $t_i$。", "outputFormat": "输出 $m$ 行，每行一个非负整数，表示第 $i$ 次询问的答案。", "hint": "### 样例 1 解释\n\n城市间的路如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3he9r0j2.png)\n\n这是答案对应的一种可能的方案：\n\n第一次询问中，一辆车走 $1 \\rightarrow 2$，另一辆走 $4 \\rightarrow 1 \\rightarrow 5 \\rightarrow 2$；\n\n第二次询问中，一辆车走 $1 \\rightarrow 5$，一辆走 $1 \\rightarrow 2 \\rightarrow 3 \\rightarrow5$，还有一辆走 $4 \\rightarrow 5$。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\le n \\le 3000$，$1 \\le m,\\sum\\limits_{i=1}^mk_i \\le 30000$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d7a2om1c.png)\n\n特殊性质 A：保证所有询问的 $t_i$ 相等。\n\n特殊性质 B：保证 $u$ 与 $v$ 之间的路从 $\\min(u,v)$ 通向 $\\max(u,v)$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2023] 环山危路 / road", "background": "", "description": "R 国有 $n$ 座城市，编号从 $1$ 到 $n$。这些城市两两之间都有道路连接，形成一个图的结构。不过，这些路修得很烂，每条路都有一个固定的方向，车只能按照这个方向行驶；路还是一次性的，也就是说最多只能过一辆车。\n\n现在 R 国正在制定防灾减灾预案。你需要帮助 R 国计算，如果 $t_i$ 号城市发生了灾难，并且 $s_{i,1},s_{i,2},\\dots,s_{i,k_i}$ 这些城市有充足的救灾物资（可以认为它们都拥有可以装无数辆车的物资），那么最多能从这些城市运送几车物资到达 $t_i$。车只能走城间的那些一次性道路，不过车在到达 $t_i$ 之前是可以经过多个城市和多条道路中转的。", "inputFormat": "输入共 $n+m +1$ 行。\n\n第一行两个正整数 $n,m$，表示城市个数和询问次数。\n\n第二行到第 $n+1$ 行，每行一个长为 $n$ 的 $01$ 字符串，第 $i+1$ 行第 $j$ 列表示是否有从 $i$ 通向 $j$ 的道路（$1$ 表示有，$0$ 表示无）。\n\n接下来 $m$ 行，每行第一个正整数为 $t_i$，第二个正整数为 $k_i$，接着 $k_i$ 个正整数 $s_{i,1},s_{i,2},\\dots,s_{i,k_i}$。保证 $s_{i,1},s_{i,2},\\dots,s_{i,k_i}$ 中没有重复的数且没有 $t_i$。", "outputFormat": "输出 $m$ 行，每行一个非负整数，表示第 $i$ 次询问的答案。", "hint": "### 样例 1 解释\n\n城市间的路如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3he9r0j2.png)\n\n这是答案对应的一种可能的方案：\n\n第一次询问中，一辆车走 $1 \\rightarrow 2$，另一辆走 $4 \\rightarrow 1 \\rightarrow 5 \\rightarrow 2$；\n\n第二次询问中，一辆车走 $1 \\rightarrow 5$，一辆走 $1 \\rightarrow 2 \\rightarrow 3 \\rightarrow5$，还有一辆走 $4 \\rightarrow 5$。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\le n \\le 3000$，$1 \\le m,\\sum\\limits_{i=1}^mk_i \\le 30000$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d7a2om1c.png)\n\n特殊性质 A：保证所有询问的 $t_i$ 相等。\n\n特殊性质 B：保证 $u$ 与 $v$ 之间的路从 $\\min(u,v)$ 通向 $\\max(u,v)$。", "locale": "zh-CN"}}}
{"pid": "P9546", "type": "P", "difficulty": 6, "samples": [["6 7\n0 1 0 2 3 0\n2 1 6\n1 1 1\n2 1 6\n2 4 5\n1 4 3\n2 3 5\n2 4 5\n", "3\n2\n2\n1\n0"], ["见选手目录下的 ring/ring2.in 与 ring/ring2.ans。", "见选手目录下的 ring/ring2.in 与 ring/ring2.ans。"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "湖北"], "title": "[湖北省选模拟 2023] 山路长环 / ring", "background": null, "description": "张三和李四在玩游戏。游戏规则是这样的：\n\n在他们面前有一个棋盘，棋盘是一个由 $n$ 个节点和 $n$ 条边构成的环，边有边权。初始时，一枚棋子被放置在某个节点上。张三和李四轮流移动棋子，张三为先手，无法移动者败。每次移动时，必须选择棋子当前所在节点的某个相邻点（即有边相连的点），沿着边将棋子移动到这个相邻点去，并将边权减少任意正整数。需要注意的是，边权不允许被减小到负数。\n\n张三想让你算算，对于给定的棋盘，有多少种初始棋子的摆放方式能使得他有必胜策略。\n\n现在你有一个长为 $m$ 的序列 $a_1,a_2,\\dots,a_m$，你需要完成 $q$ 次操作。每次操作形式为如下之一：\n\n- `1 x y` 表示将 $a_x$ 赋值为 $y$；\n- `2 l r` 表示查询如果棋盘上共 $(r-l+1)$ 个节点，且边权以顺时针方向分别为 $a_l,a_{l+1},\\dots,a_r$，那么这样一盘游戏共有多少个不同的初始棋子位置可以让张三有必胜策略。", "inputFormat": "输入共 $q+2$ 行。\n\n第一行两个正整数 $m,q$。\n\n第二行 $m$ 个整数，第 $i$ 个数为 $a_i$。\n\n接下来 $q$ 行，每行三个整数，格式如题面所述。", "outputFormat": "输出若干行，每行一个非负整数，表示一次询问的答案。", "hint": "### 子任务\n\n对于所有测试数据，保证 $1 \\le m,q \\le 3 \\times 10^5$，$1 \\le l \\le r \\le m$，$1\\le x \\le m$，$0 \\le y,a_i \\le 10^6$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j579v06f.png)\n\n特殊性质 A：保证 $0 \\le y,a_i \\le 1$。\n\n特殊性质 B：保证所有询问满足 $l=1$，$r=m$。\n\n特殊性质 C：保证没有修改操作。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2023] 山路长环 / ring", "background": null, "description": "张三和李四在玩游戏。游戏规则是这样的：\n\n在他们面前有一个棋盘，棋盘是一个由 $n$ 个节点和 $n$ 条边构成的环，边有边权。初始时，一枚棋子被放置在某个节点上。张三和李四轮流移动棋子，张三为先手，无法移动者败。每次移动时，必须选择棋子当前所在节点的某个相邻点（即有边相连的点），沿着边将棋子移动到这个相邻点去，并将边权减少任意正整数。需要注意的是，边权不允许被减小到负数。\n\n张三想让你算算，对于给定的棋盘，有多少种初始棋子的摆放方式能使得他有必胜策略。\n\n现在你有一个长为 $m$ 的序列 $a_1,a_2,\\dots,a_m$，你需要完成 $q$ 次操作。每次操作形式为如下之一：\n\n- `1 x y` 表示将 $a_x$ 赋值为 $y$；\n- `2 l r` 表示查询如果棋盘上共 $(r-l+1)$ 个节点，且边权以顺时针方向分别为 $a_l,a_{l+1},\\dots,a_r$，那么这样一盘游戏共有多少个不同的初始棋子位置可以让张三有必胜策略。", "inputFormat": "输入共 $q+2$ 行。\n\n第一行两个正整数 $m,q$。\n\n第二行 $m$ 个整数，第 $i$ 个数为 $a_i$。\n\n接下来 $q$ 行，每行三个整数，格式如题面所述。", "outputFormat": "输出若干行，每行一个非负整数，表示一次询问的答案。", "hint": "### 子任务\n\n对于所有测试数据，保证 $1 \\le m,q \\le 3 \\times 10^5$，$1 \\le l \\le r \\le m$，$1\\le x \\le m$，$0 \\le y,a_i \\le 10^6$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j579v06f.png)\n\n特殊性质 A：保证 $0 \\le y,a_i \\le 1$。\n\n特殊性质 B：保证所有询问满足 $l=1$，$r=m$。\n\n特殊性质 C：保证没有修改操作。", "locale": "zh-CN"}}}
{"pid": "P9547", "type": "P", "difficulty": 7, "samples": [["3 2 1 0\n‐10838702 0 10838702\n‐1 1", "1 0"], ["4 4 2 0\n1 3 5 7\n2 4 6 8", "0.6648289523 ‐0.1433645347\n0.6172866488 1.3647253547"], ["见选手目录下的 mountain/mountain3.in 与 mountain/mountain3.ans。", "见选手目录下的 mountain/mountain3.in 与 mountain/mountain3.ans。"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "O2优化", "湖北"], "title": "[湖北省选模拟 2023] 路环群山 / mountain", "background": "", "description": "某二维世界中有一个山地，山体可以用一个函数 $f(x)$ 描述，其表示横坐标 $x$ 的位置海拔高度为 $h=f(x)$。这个世界里有 $n+m$ 只羊，其中有 $n$ 只山羊和 $m$ 只绵羊。我们知道第 $i$ 只山羊所在的横坐标是 $p_i$，第 $j$ 只绵羊所在的横坐标是 $q_j$，但不知道它们所在的高度。不过，我们知道山羊们所在的位置海拔集中在一个较高的范围，而绵羊们所在的位置海拔集中在一个较矮的范围。你需要根据山羊和绵羊的分布情况猜测山体形态 $f(x)$，使得山羊高度的方差和绵羊高度的方差都尽可能小，同时山羊高度尽可能高于绵羊高度。\n\n形式化地，令\n\n$$\n\\bar{u}=\\frac{1}{n}\\sum_{i=1}^n f(p_i)\n$$\n\n$$\n\\bar{v}=\\frac{1}{m}\\sum_{j=1}^m f(q_i)\n$$\n\n表示山羊、绵羊分别的平均高度，你的目标就是构造函数 $f$，最小化代价\n$$\n\\operatorname{cost}(f)=\\frac{1}{\\bar{u}-\\bar{v}}\\sqrt{\\left[\\sum_{i=1}^n (f(p_i)-\\bar{u})^2\\right]+\\left[\\sum_{j=1}^m (f(q_j)-\\bar{v})^2\\right]}\n$$\n当然，**你还需要保证 $\\bar u > \\bar v + 10^{-9}$**。\n\n方便起见，你需要使用傅里叶级数描述 $f$。即给定 $k$，你需要求出最优的形如 $f(x)=\\sum_{i=1}^k a_i\\cos(ix)+b_i\\sin(ix)$ 的函数 $f$，并输出 $a_i,b_i$ 表示答案。**请你保证 $10^{-9}\\le \\max_{i=1}^k\\{|a_i|,|b_i|\\} \\le 10^9$**。**数据保证存在满足上述限制的最优解。**\n\n本题开启 Special Judge。给定容错度 $\\epsilon=10^{-E}$。当你给出的函数 $f$ 与答案给出的函数 $f^*$ 满足 $\\operatorname{cost}(f)<\\max(\\epsilon+\\operatorname{cost}(f^*),(1+\\epsilon)\\operatorname{cost}(f^*))$ 时认为你的答案正确。", "inputFormat": "输入共三行。\n\n第一行三个整数 $n,m,k,E$；\n\n第二行 $n$ 个整数，第 $i$ 个数为 $p_i$；\n\n第三行 $m$ 个整数，第 $j$ 个数为 $q_j$。", "outputFormat": "输出 $k$ 行，每行两个浮点数 $a_i,b_i$。", "hint": "### 样例 1 解释\n\n观察到 $\\cos(10838702)=\\cos(-10838702)\\approx 1 =\\cos(0)$，$\\cos(1)=\\cos(-1)\\approx 0.5403023$。即当 $f(x)=\\cos(x)$ 时，所有山羊几乎均位于同一海拔、所有绵羊均位于同一海拔、山羊所在位置均高于绵羊所在位置。此时 $\\operatorname{cost}(f) \\approx 0$ 取得最优解。\n\n值得注意的是，对于任何非零数 $r$，函数 $f(x)=r\\cos(x)$ 均可视为最优解。\n\n### 样例 2 解释\n\n最优函数（之一）约为 $f(x)=0.6648289523\\cos(x)-0.1433645347\\sin(x)+0.6172866488\\cos(2x)+1.3647253547\\sin(2x)$，其代价约为 $3.908439063011$。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\le n,m \\le 600$，$1 \\le k \\le \\min\\{\\dfrac{n+m}{4},300\\}$，$0 \\le E \\le 9$，$0\\le |p_i|,|q_i| \\le 10^9$。\n\n**保证每个测试数据中，$p_i$ 和 $q_j$ 均在该测试点数据范围内以及问题有解的条件下均匀随机生成。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/91am18bk.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2023] 路环群山 / mountain", "background": "", "description": "某二维世界中有一个山地，山体可以用一个函数 $f(x)$ 描述，其表示横坐标 $x$ 的位置海拔高度为 $h=f(x)$。这个世界里有 $n+m$ 只羊，其中有 $n$ 只山羊和 $m$ 只绵羊。我们知道第 $i$ 只山羊所在的横坐标是 $p_i$，第 $j$ 只绵羊所在的横坐标是 $q_j$，但不知道它们所在的高度。不过，我们知道山羊们所在的位置海拔集中在一个较高的范围，而绵羊们所在的位置海拔集中在一个较矮的范围。你需要根据山羊和绵羊的分布情况猜测山体形态 $f(x)$，使得山羊高度的方差和绵羊高度的方差都尽可能小，同时山羊高度尽可能高于绵羊高度。\n\n形式化地，令\n\n$$\n\\bar{u}=\\frac{1}{n}\\sum_{i=1}^n f(p_i)\n$$\n\n$$\n\\bar{v}=\\frac{1}{m}\\sum_{j=1}^m f(q_i)\n$$\n\n表示山羊、绵羊分别的平均高度，你的目标就是构造函数 $f$，最小化代价\n$$\n\\operatorname{cost}(f)=\\frac{1}{\\bar{u}-\\bar{v}}\\sqrt{\\left[\\sum_{i=1}^n (f(p_i)-\\bar{u})^2\\right]+\\left[\\sum_{j=1}^m (f(q_j)-\\bar{v})^2\\right]}\n$$\n当然，**你还需要保证 $\\bar u > \\bar v + 10^{-9}$**。\n\n方便起见，你需要使用傅里叶级数描述 $f$。即给定 $k$，你需要求出最优的形如 $f(x)=\\sum_{i=1}^k a_i\\cos(ix)+b_i\\sin(ix)$ 的函数 $f$，并输出 $a_i,b_i$ 表示答案。**请你保证 $10^{-9}\\le \\max_{i=1}^k\\{|a_i|,|b_i|\\} \\le 10^9$**。**数据保证存在满足上述限制的最优解。**\n\n本题开启 Special Judge。给定容错度 $\\epsilon=10^{-E}$。当你给出的函数 $f$ 与答案给出的函数 $f^*$ 满足 $\\operatorname{cost}(f)<\\max(\\epsilon+\\operatorname{cost}(f^*),(1+\\epsilon)\\operatorname{cost}(f^*))$ 时认为你的答案正确。", "inputFormat": "输入共三行。\n\n第一行三个整数 $n,m,k,E$；\n\n第二行 $n$ 个整数，第 $i$ 个数为 $p_i$；\n\n第三行 $m$ 个整数，第 $j$ 个数为 $q_j$。", "outputFormat": "输出 $k$ 行，每行两个浮点数 $a_i,b_i$。", "hint": "### 样例 1 解释\n\n观察到 $\\cos(10838702)=\\cos(-10838702)\\approx 1 =\\cos(0)$，$\\cos(1)=\\cos(-1)\\approx 0.5403023$。即当 $f(x)=\\cos(x)$ 时，所有山羊几乎均位于同一海拔、所有绵羊均位于同一海拔、山羊所在位置均高于绵羊所在位置。此时 $\\operatorname{cost}(f) \\approx 0$ 取得最优解。\n\n值得注意的是，对于任何非零数 $r$，函数 $f(x)=r\\cos(x)$ 均可视为最优解。\n\n### 样例 2 解释\n\n最优函数（之一）约为 $f(x)=0.6648289523\\cos(x)-0.1433645347\\sin(x)+0.6172866488\\cos(2x)+1.3647253547\\sin(2x)$，其代价约为 $3.908439063011$。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\le n,m \\le 600$，$1 \\le k \\le \\min\\{\\dfrac{n+m}{4},300\\}$，$0 \\le E \\le 9$，$0\\le |p_i|,|q_i| \\le 10^9$。\n\n**保证每个测试数据中，$p_i$ 和 $q_j$ 均在该测试点数据范围内以及问题有解的条件下均匀随机生成。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/91am18bk.png)", "locale": "zh-CN"}}}
{"pid": "P9548", "type": "P", "difficulty": 2, "samples": [["4 4 2 2 3", "1 3"], ["7 5 3 2 2", "3 5"], ["214 748 3 64 8", "98 782"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "贪心", "O2优化"], "title": "「PHOI-1」雨纷纷", "background": "**形式化题面的表述已更改。**\n\n今夜，雨纷纷……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/aec4ykim.png)", "description": "在 $n$ 行 $m$ 列的空地上，有一个大小为 $x$ 行 $y$ 列的伞，雨伞不可以旋转。每天向空地随机洒下 $1 \\sim k$ 滴雨，已经有雨的格子不会再降下雨，有伞的格子不会被雨淋湿。\n\n但此伞比较特殊，它完全透明，小 X 无法直接得知伞的位置。但是每天结束后，小 X 都会得知空地上每个空格的状态，即有雨滴或无雨滴。注意，小 X 只会得知格子的状态。小 X 无法得知每天在哪里降了雨。\n\n现在小 X 想让你求出**在最好情况下**（即天数最少时）几天可以使伞的位置唯一，以及得到伞的位置后，场上至少的雨滴数量，数据保证有解。\n\n**形式化的讲**，有一个 $n \\times m$ 的矩形，你每天可以**至多**删除 $k$ 个格子。问至少需要多少天以及至少需要删除多少格子，才能使得图中完整的 $x\\times y$ 的矩形唯一。", "inputFormat": "一行，$5$ 个整数，分别为 $n,m,x,y,k$。", "outputFormat": "一行，分别为**在最好情况下**几天可以得知伞的位置，以及得到伞的位置后，场上至少的雨滴数量，两个数据用空格隔开。", "hint": "**本题采用捆绑测试。**\n\n| Subtask | $n,m$ | $x,y$ |  分值 |\n| :-: | :-: | :-: | :-: |\n| $0$ | $1\\le n,m\\le 10$ | 无特殊限制 | $10$ |\n| $1$ | $1\\le n,m\\le 10^3$ | 无特殊限制 | $30$ |\n| $2$ | 无特殊限制 | $x=y=2$ | $10$ |\n| $3$ | 无特殊限制 | $1 \\le x=y \\le 10^9$ | $10$ | \n| $4$ | 无特殊限制 | 无特殊限制 | $40$ | \n\n对于 $100\\%$ 的数据，保证 $1 \\le x \\le n \\le 10^9,1 \\le y \\le m \\le 10^9,1 \\le k \\le 10^9$。\n\n### 样例解释 #1：\n\n第一天在 $(2,2),(2,3),(3,2)$ 处落下雨滴，即可确定雨伞左上角以及右下角位置为 $(3,3),(4,4)$。\n\n图片解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fp2m6ivv.png)\n### 样例解释 #2：\n\n第一天在 $(2,2),(7,1)$ 处落下雨滴，第二天在 $(5,4)$ 处落下雨滴，第三天在 $(4,2),(3,4)$ 处落下雨滴，即可确定雨伞左上角以及右下角位置为 $(5,2),(7,3)$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PHOI-1」雨纷纷", "background": "**形式化题面的表述已更改。**\n\n今夜，雨纷纷……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/aec4ykim.png)", "description": "在 $n$ 行 $m$ 列的空地上，有一个大小为 $x$ 行 $y$ 列的伞，雨伞不可以旋转。每天向空地随机洒下 $1 \\sim k$ 滴雨，已经有雨的格子不会再降下雨，有伞的格子不会被雨淋湿。\n\n但此伞比较特殊，它完全透明，小 X 无法直接得知伞的位置。但是每天结束后，小 X 都会得知空地上每个空格的状态，即有雨滴或无雨滴。注意，小 X 只会得知格子的状态。小 X 无法得知每天在哪里降了雨。\n\n现在小 X 想让你求出**在最好情况下**（即天数最少时）几天可以使伞的位置唯一，以及得到伞的位置后，场上至少的雨滴数量，数据保证有解。\n\n**形式化的讲**，有一个 $n \\times m$ 的矩形，你每天可以**至多**删除 $k$ 个格子。问至少需要多少天以及至少需要删除多少格子，才能使得图中完整的 $x\\times y$ 的矩形唯一。", "inputFormat": "一行，$5$ 个整数，分别为 $n,m,x,y,k$。", "outputFormat": "一行，分别为**在最好情况下**几天可以得知伞的位置，以及得到伞的位置后，场上至少的雨滴数量，两个数据用空格隔开。", "hint": "**本题采用捆绑测试。**\n\n| Subtask | $n,m$ | $x,y$ |  分值 |\n| :-: | :-: | :-: | :-: |\n| $0$ | $1\\le n,m\\le 10$ | 无特殊限制 | $10$ |\n| $1$ | $1\\le n,m\\le 10^3$ | 无特殊限制 | $30$ |\n| $2$ | 无特殊限制 | $x=y=2$ | $10$ |\n| $3$ | 无特殊限制 | $1 \\le x=y \\le 10^9$ | $10$ | \n| $4$ | 无特殊限制 | 无特殊限制 | $40$ | \n\n对于 $100\\%$ 的数据，保证 $1 \\le x \\le n \\le 10^9,1 \\le y \\le m \\le 10^9,1 \\le k \\le 10^9$。\n\n### 样例解释 #1：\n\n第一天在 $(2,2),(2,3),(3,2)$ 处落下雨滴，即可确定雨伞左上角以及右下角位置为 $(3,3),(4,4)$。\n\n图片解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fp2m6ivv.png)\n### 样例解释 #2：\n\n第一天在 $(2,2),(7,1)$ 处落下雨滴，第二天在 $(5,4)$ 处落下雨滴，第三天在 $(4,2),(3,4)$ 处落下雨滴，即可确定雨伞左上角以及右下角位置为 $(5,2),(7,3)$。", "locale": "zh-CN"}}}
{"pid": "P9549", "type": "P", "difficulty": 4, "samples": [["5 8 6 1\n1 2 2\n1 0 3\n1 1 4\n3 1 0\n5 1 4\n1 2 1 4\n2 4 2 4\n3 4 0 2\n1 5 7 8\n1 3 1 2\n5 4 2 3\n2 5 2 4\n1 4 4 7", "4"], ["9 16 14 2\n1 7 2\n1 5 3\n1 6 4\n3 5 0\n1 6 5\n1 0 4\n1 7 5\n3 8 8\n3 8 6\n1 2 1 4\n8 5 2 6\n2 4 2 4\n8 6 3 5\n3 4 0 2\n6 7 1 4\n1 5 7 8\n5 9 16 21\n1 3 2 2\n7 6 2 3\n5 4 2 3\n6 9 3 5\n2 5 2 4\n8 9 4 7\n1 4 4 7\n6 5 6 9", "18"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "图论", "O2优化", "最短路"], "title": "「PHOI-1」路虽远", "background": "$update$ $on$ $2023.8.17$ $12:25$ \n**数据修复&加强完成，可重新提交代码。**\n\n路虽远，行则将至。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ugqt01zi.png)", "description": "**请注意本题特殊的时限。**\n\n小 X 来到了 Z 市，Z 市有 $n$ 个交通路口，$m$ 条马路。其中第 $i$ 条马路连接着第 $u_i$ 个交通路口和第 $v_i$ 个交通路口（可以从 $u_i$ 到 $v_i$，也可以从 $v_i$ 到 $u_i$），小 X 通过这条马路时要花费 $p_i$ 秒，若有限速，则通过这条马路时要花费 $q_i$ 秒。\n\n现在，市长要在 $k$ 条马路上添加限速，然而，要在哪 $k$ 条马路上限速是小 X 自己规定的。\n\n同时，市长会在每个交通路口处添加红绿灯。第 $i$ 个交通路口的红绿灯先亮绿灯 $x_i$ 秒，再亮黄灯 $y_i$ 秒，之后亮红灯 $z_i$ 秒，然后再亮绿灯，黄灯，红灯，如此往复。如果一个交通路口的红绿灯不是红灯，小 X 可以从这个交通路口出发，到达另一个交通路口。若到达交通路口时，灯的颜色瞬间变了，则按照变了之后的灯计算，灯的黄灯和红灯的持续时间可能为 $0$。并且，小 X 最多只能闯 $g$ 次黄灯。\n\n过了一会儿，市长突然发现，所有的红绿灯在某一刻都变成了绿灯。与此同时，小 X 从第 $1$ 个路口出发，前往第 $n$ 个路口。他想问你，他至少要花多少时间才能到达第 $n$ 个路口？\n\n因为路虽远，行则将至，数据保证一定可以到达，即 $1\\sim n$ 一定连通。", "inputFormat": "第 $1$ 行 $4$ 个整数 $n,m,k,g$。\n\n接下来 $n$ 行，每行 $3$ 个整数 $x_i,y_i,z_i$。\n\n接下来 $m$ 行，每行 $4$ 个整数 $u_i,v_i,p_i,q_i$。", "outputFormat": "一行，为小 X 花费的最少的时间。", "hint": "**本题采用捆绑测试。**\n\n| Subtask | $n,m$ | $y_i,z_i$ | $k,g$ | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $1 \\le n,m \\le 5$ | 无特殊限制 | 无特殊限制 | $20$ |\n| $1$ | 无特殊限制 | $y_i=z_i=0$ | $k=g=0$ | $5$ |\n| $2$ | 无特殊限制 | $y_i=0,0 \\le z_i \\le 10^9$ | 无特殊限制 | $25$ | \n| $3$ | 无特殊限制 | 无特殊限制 | 无特殊限制 | $50$ |\n\n对于 $100\\%$ 的数据，保证 $1 \\le n,m \\le 100$，$0 \\le k,g \\le m$，$1 \\le x_i \\le 10^9$，$0 \\le y_i,z_i \\le 10^9$，$1 \\le u,v \\le n$，$0 \\leq p_i \\leq q_i \\leq 10^9$。\n### 样例解释 #1：\n\n\n$1 \\to 3 \\to 4 \\to 5$ 并在编号为 $1,2,4,6,7,8$ 的马路上添加限速，到 $3$ 时闯黄灯，到 $4$ 时绿灯直接过，这时候，$1 \\to 3$ 花费 $1$ 秒，$3 \\to 4$ 花费 $0$ 秒，$4 \\to 5$ 花费 $3$ 秒，共花费 $4$ 秒。\n\n### 样例解释 #2：\n\n$1 \\to 2 \\to 5 \\to 6 \\to 9$ 并在编号为 $2,3,4,5,6,7,8,9,10,11,13,14,15,16$ 的马路上添加限速，到 $2,5$ 时闯黄灯，到 $4$ 时绿灯直接过，到 $6$ 时等 $1$ 秒红灯，这时候，$1 \\to 2$ 花费 $1$ 秒，$2 \\to 5$ 花费 $4$ 秒，$5 \\to 6$ 花费 $9$ 秒，$6 \\to 9$ 花费 $3$ 秒，加上等红灯的 $1$ 秒共花费 $18$ 秒。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PHOI-1」路虽远", "background": "$update$ $on$ $2023.8.17$ $12:25$ \n**数据修复&加强完成，可重新提交代码。**\n\n路虽远，行则将至。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ugqt01zi.png)", "description": "**请注意本题特殊的时限。**\n\n小 X 来到了 Z 市，Z 市有 $n$ 个交通路口，$m$ 条马路。其中第 $i$ 条马路连接着第 $u_i$ 个交通路口和第 $v_i$ 个交通路口（可以从 $u_i$ 到 $v_i$，也可以从 $v_i$ 到 $u_i$），小 X 通过这条马路时要花费 $p_i$ 秒，若有限速，则通过这条马路时要花费 $q_i$ 秒。\n\n现在，市长要在 $k$ 条马路上添加限速，然而，要在哪 $k$ 条马路上限速是小 X 自己规定的。\n\n同时，市长会在每个交通路口处添加红绿灯。第 $i$ 个交通路口的红绿灯先亮绿灯 $x_i$ 秒，再亮黄灯 $y_i$ 秒，之后亮红灯 $z_i$ 秒，然后再亮绿灯，黄灯，红灯，如此往复。如果一个交通路口的红绿灯不是红灯，小 X 可以从这个交通路口出发，到达另一个交通路口。若到达交通路口时，灯的颜色瞬间变了，则按照变了之后的灯计算，灯的黄灯和红灯的持续时间可能为 $0$。并且，小 X 最多只能闯 $g$ 次黄灯。\n\n过了一会儿，市长突然发现，所有的红绿灯在某一刻都变成了绿灯。与此同时，小 X 从第 $1$ 个路口出发，前往第 $n$ 个路口。他想问你，他至少要花多少时间才能到达第 $n$ 个路口？\n\n因为路虽远，行则将至，数据保证一定可以到达，即 $1\\sim n$ 一定连通。", "inputFormat": "第 $1$ 行 $4$ 个整数 $n,m,k,g$。\n\n接下来 $n$ 行，每行 $3$ 个整数 $x_i,y_i,z_i$。\n\n接下来 $m$ 行，每行 $4$ 个整数 $u_i,v_i,p_i,q_i$。", "outputFormat": "一行，为小 X 花费的最少的时间。", "hint": "**本题采用捆绑测试。**\n\n| Subtask | $n,m$ | $y_i,z_i$ | $k,g$ | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $1 \\le n,m \\le 5$ | 无特殊限制 | 无特殊限制 | $20$ |\n| $1$ | 无特殊限制 | $y_i=z_i=0$ | $k=g=0$ | $5$ |\n| $2$ | 无特殊限制 | $y_i=0,0 \\le z_i \\le 10^9$ | 无特殊限制 | $25$ | \n| $3$ | 无特殊限制 | 无特殊限制 | 无特殊限制 | $50$ |\n\n对于 $100\\%$ 的数据，保证 $1 \\le n,m \\le 100$，$0 \\le k,g \\le m$，$1 \\le x_i \\le 10^9$，$0 \\le y_i,z_i \\le 10^9$，$1 \\le u,v \\le n$，$0 \\leq p_i \\leq q_i \\leq 10^9$。\n### 样例解释 #1：\n\n\n$1 \\to 3 \\to 4 \\to 5$ 并在编号为 $1,2,4,6,7,8$ 的马路上添加限速，到 $3$ 时闯黄灯，到 $4$ 时绿灯直接过，这时候，$1 \\to 3$ 花费 $1$ 秒，$3 \\to 4$ 花费 $0$ 秒，$4 \\to 5$ 花费 $3$ 秒，共花费 $4$ 秒。\n\n### 样例解释 #2：\n\n$1 \\to 2 \\to 5 \\to 6 \\to 9$ 并在编号为 $2,3,4,5,6,7,8,9,10,11,13,14,15,16$ 的马路上添加限速，到 $2,5$ 时闯黄灯，到 $4$ 时绿灯直接过，到 $6$ 时等 $1$ 秒红灯，这时候，$1 \\to 2$ 花费 $1$ 秒，$2 \\to 5$ 花费 $4$ 秒，$5 \\to 6$ 花费 $9$ 秒，$6 \\to 9$ 花费 $3$ 秒，加上等红灯的 $1$ 秒共花费 $18$ 秒。", "locale": "zh-CN"}}}
{"pid": "P9550", "type": "P", "difficulty": 6, "samples": [["3\n0 1 1\n0 1 2\n0 0 2\n0 1 2\n2 0 4", "0 inf inf\ninf -2 inf\ninf 1 -4"], ["10\n0 1 1 2 2 2 3 3 3 3\n0 1 2 2 3 3 3 4 4 4\n0 1 2 2 3 3 3 3 4 4\n0 1 2 3 4 4 5 5 5 5\n8 4 2 1 2 4 8 4 2 1", "0 inf inf inf inf inf inf inf inf inf\ninf 18 inf inf inf inf inf inf inf inf\ninf 15 20 18 inf inf inf inf inf inf\ninf inf 18 16 inf inf inf inf inf inf\ninf inf 12 10 8 9 12 7 4 2\ninf inf 13 11 9 10 13 8 5 3\ninf inf 16 14 12 13 16 11 8 6\ninf inf 11 7 3 4 7 2 -1 -3\ninf inf 8 4 0 1 4 -1 -4 -6\ninf inf 6 2 -2 -1 2 -3 -6 -8"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "「PHOI-1」晚宴筵", "background": "小 X 在 Z 市长途奔波之后，他要去参加别人的晚宴。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2cpdwvwu.png)", "description": "Z 市形如一个 $n \\times n$ 的矩阵，小 X 打算仅使用瞬移机和时空穿越机到达别人的晚宴，若小 X 所在的位置 $(p,q)$ 满足 $l1_x \\le p \\le r1_x$ 且 $l2_y \\le q \\le r2_y(0 \\le l1_x \\le r1_x < x,0\\le l2_y\\le r2_y < y)$，那么小 X 就可以到达位置 $(x,y)$。\n\n但是由于瞬移技术不太成熟以及时空穿越机的影响，瞬移时需花费 $w_p+w_q+w_x+w_y-p-q-x-y$ 秒（由于时空穿越机的特性，时间可能为负）。若下标不是正整数，瞬移机就会被损坏，所以小 X 只能到达都是正整数的下标。\n\n现在小 X 在 $(1,1)$ 的位置，他要参加别人的晚宴，可是他目前不知道别人的晚宴在哪里，所以他想让你求，他到达每个地方 $(x,y)\\text{ }\\text{ }(1 \\leq x,y \\leq n)$ 所花费的最少时间，如果不能到达则输出 `inf`。", "inputFormat": "第 $1$ 行一个整数 $n$，表示矩阵的大小。\n\n第 $2$ 行 $n$ 个非负整数分别表示 $l1_1,l1_2 \\ldots l1_n$。\n\n第 $3$ 行 $n$ 个非负整数分别表示 $r1_1,r1_2 \\ldots r1_n$。\n\n第 $4$ 行 $n$ 个非负整数分别表示 $l2_1,l2_2 \\ldots l2_n$。\n\n第 $5$ 行 $n$ 个非负整数分别表示 $r2_1,r2_2 \\ldots r2_n$。\n\n第 $6$ 行 $n$ 个非负整数分别表示 $w_1,w_2 \\ldots w_n$。\n\n数据保证 $l1_i \\leq r1_i,l2_i \\leq r2_i$。", "outputFormat": "输出 $n$ 行，每行 $n$ 个整数，第 $i$ 行第 $j$ 列的整数表示小 X 从 $(1,1)$ 到 $(i,j)$ 的最短路。", "hint": "**本题采用捆绑测试。**\n\n| Subtask | $n$ | $l1_i,l2_i$ | $w_i$ | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $1 \\le n \\le 70$ | 无特殊限制 | $i \\leq w_i \\leq 10^5(1 \\leq i \\leq n)$ | $15$ |\n| $1$ | $1 \\le n \\le 70$ | 无特殊限制 | 无特殊限制 | $25$ |\n| $2$ | 无特殊限制 | $l1_i=l2_i=r1_i=r2_i=1(2\\le i \\le n)$ | 无特殊限制 | $5$ |\n| $3$ | 无特殊限制 | 无特殊限制 | 无特殊限制 | $55$ | \n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^3,0 \\leq l1_i \\leq r1_i \\leq n,0 \\leq l2_i \\leq r2_i \\leq n,0 \\leq w_i \\leq 10^5$ $,l1_i \\leq r1_i < i,l2_i \\leq r2_i < i $。\n\n### 样例解释 #1:\n\n- 从 $(1,1)$ 到 $(1,1)$ 显然要花费 $0$ 秒。\n\n- 从 $(1,1)$ 可以直接到 $(2,2)$, 花费 $w_1 + w_1 + w_2 + w_2 - 1 - 1 - 2 - 2 = -2$ 秒。\n\n- 从 $(1,1)$ 也可以直接到 $(3,2)$, 花费 $w_1 + w_1 + w_3 + w_2 - 1 - 1 - 3 - 2 = 1$ 秒。\n\n- 要从 $(1,1)$ 到达 $(3,3)$，要先从 $(1,1)$ 到达 $(2,2)$，再从 $(2,2)$ 到达 $(3,3)$。花费 $w_1 + w_1 + w_2 + w_2 - 1 - 1 - 2 - 2 + w_2 + w_2 + w_3 + w_3 - 2 - 2 - 3 - 3 = -4$ 秒。\n\n- 经过手算，可以发现，从 $(1,1)$ 不能到达其他位置。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PHOI-1」晚宴筵", "background": "小 X 在 Z 市长途奔波之后，他要去参加别人的晚宴。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2cpdwvwu.png)", "description": "Z 市形如一个 $n \\times n$ 的矩阵，小 X 打算仅使用瞬移机和时空穿越机到达别人的晚宴，若小 X 所在的位置 $(p,q)$ 满足 $l1_x \\le p \\le r1_x$ 且 $l2_y \\le q \\le r2_y(0 \\le l1_x \\le r1_x < x,0\\le l2_y\\le r2_y < y)$，那么小 X 就可以到达位置 $(x,y)$。\n\n但是由于瞬移技术不太成熟以及时空穿越机的影响，瞬移时需花费 $w_p+w_q+w_x+w_y-p-q-x-y$ 秒（由于时空穿越机的特性，时间可能为负）。若下标不是正整数，瞬移机就会被损坏，所以小 X 只能到达都是正整数的下标。\n\n现在小 X 在 $(1,1)$ 的位置，他要参加别人的晚宴，可是他目前不知道别人的晚宴在哪里，所以他想让你求，他到达每个地方 $(x,y)\\text{ }\\text{ }(1 \\leq x,y \\leq n)$ 所花费的最少时间，如果不能到达则输出 `inf`。", "inputFormat": "第 $1$ 行一个整数 $n$，表示矩阵的大小。\n\n第 $2$ 行 $n$ 个非负整数分别表示 $l1_1,l1_2 \\ldots l1_n$。\n\n第 $3$ 行 $n$ 个非负整数分别表示 $r1_1,r1_2 \\ldots r1_n$。\n\n第 $4$ 行 $n$ 个非负整数分别表示 $l2_1,l2_2 \\ldots l2_n$。\n\n第 $5$ 行 $n$ 个非负整数分别表示 $r2_1,r2_2 \\ldots r2_n$。\n\n第 $6$ 行 $n$ 个非负整数分别表示 $w_1,w_2 \\ldots w_n$。\n\n数据保证 $l1_i \\leq r1_i,l2_i \\leq r2_i$。", "outputFormat": "输出 $n$ 行，每行 $n$ 个整数，第 $i$ 行第 $j$ 列的整数表示小 X 从 $(1,1)$ 到 $(i,j)$ 的最短路。", "hint": "**本题采用捆绑测试。**\n\n| Subtask | $n$ | $l1_i,l2_i$ | $w_i$ | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $1 \\le n \\le 70$ | 无特殊限制 | $i \\leq w_i \\leq 10^5(1 \\leq i \\leq n)$ | $15$ |\n| $1$ | $1 \\le n \\le 70$ | 无特殊限制 | 无特殊限制 | $25$ |\n| $2$ | 无特殊限制 | $l1_i=l2_i=r1_i=r2_i=1(2\\le i \\le n)$ | 无特殊限制 | $5$ |\n| $3$ | 无特殊限制 | 无特殊限制 | 无特殊限制 | $55$ | \n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^3,0 \\leq l1_i \\leq r1_i \\leq n,0 \\leq l2_i \\leq r2_i \\leq n,0 \\leq w_i \\leq 10^5$ $,l1_i \\leq r1_i < i,l2_i \\leq r2_i < i $。\n\n### 样例解释 #1:\n\n- 从 $(1,1)$ 到 $(1,1)$ 显然要花费 $0$ 秒。\n\n- 从 $(1,1)$ 可以直接到 $(2,2)$, 花费 $w_1 + w_1 + w_2 + w_2 - 1 - 1 - 2 - 2 = -2$ 秒。\n\n- 从 $(1,1)$ 也可以直接到 $(3,2)$, 花费 $w_1 + w_1 + w_3 + w_2 - 1 - 1 - 3 - 2 = 1$ 秒。\n\n- 要从 $(1,1)$ 到达 $(3,3)$，要先从 $(1,1)$ 到达 $(2,2)$，再从 $(2,2)$ 到达 $(3,3)$。花费 $w_1 + w_1 + w_2 + w_2 - 1 - 1 - 2 - 2 + w_2 + w_2 + w_3 + w_3 - 2 - 2 - 3 - 3 = -4$ 秒。\n\n- 经过手算，可以发现，从 $(1,1)$ 不能到达其他位置。", "locale": "zh-CN"}}}
{"pid": "P9551", "type": "P", "difficulty": 6, "samples": [["2 2\n2 1\n3\n4\n", "4\n7\n"], ["5 5\n1 2 1 2 1\n4\n6\n8\n10\n12\n", "0\n9\n119\n630\n2210"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "数论", "O2优化", "素数判断,质数,筛法", "快速数论变换 NTT"], "title": "「PHOI-1」斗之魂", "background": "**本题数据已加强。**\n\n小 X 忙了一天，于是打起了一款叫斗之魂的游戏。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5ha5fx0q.png)", "description": "小 X 要击败 $n$ 个 BOSS，他可以选择以下两种击败 BOSS 的方式：\n\n1. 独自一人击败第 $i$ 个 BOSS 并获得 $k_{i,0}$ 块稀有金属，且保证 $k_{i,0}=k_{i,1}=k_{i,2}$。\n2. 和小 Y 一起击败第 $i$ 个 BOSS ，小 X 理应获得 $k_{i,1}$ 块稀有金属，小 Y 理应获得 $k_{i,2}$ 块稀有金属，但是 BOSS 本身实力并没有因为人数的改变而改变，击败难度相对要简单一点，所以系统判定两人实际各获得 $k_{i,0}$ 块稀有金属，其中保证 $\\dfrac{1}{k_{i,0}}=\\dfrac{1}{k_{i,1}}+\\dfrac{1}{k_{i,2}}$。\n\n小 X 已经计划好用第 $b_i$ 种方式击败第 $i$ 个 BOSS，但是考虑到某些因素，小 X 有 $q$ 次询问，每次询问给定一个正整数 $m$，为小 X 击败完所有 BOSS 后获得的稀有金属总数，已知 $k_{i,0},k_{i,1},k_{i,2}$ 均为正整数，求每次询问后所有可能的 $k$ 的值的方案数，两种方案不同当且仅当至少存在一个 $k$ 的值不同，由于这个答案可能很大，你只需要输出它对 $998244353$ 取模后的结果。", "inputFormat": "第一行有两个整数 $n$ 和 $q$，分别表示 BOSS 个数和小 X 的询问次数。\n\n第二行有 $n$ 个正整数 $b_i$，表示小 X 用 $b_i$ 种方式击败第 $i$ 个 BOSS。\n\n接下来的 $q$ 行中每行有一个整数 $m$，为该次询问中小 X 击败完所有 BOSS 后获得的稀有金属总数。", "outputFormat": "输出共 $q$ 行，第 $i$ 行输出一个答案为当小 X 击败完所有 BOSS 后获得的稀有金属总数为 $m$ 时，所有可能的 $k$ 的值的方案数并对它取模 $998244353$ 后的结果。", "hint": "**本题采用捆绑测试。**\n\n| Subtask |      $n\\le$       |      $m \\le$      | $q \\le$ |  时限  | 分值 |\n| :-----: | :---------------: | :---------------: | :-----: | :----: | :--: |\n|   $0$   |       $10$        |       $20$        |   $5$   |  $1s$  | $8$  |\n|   $1$   |       $30$        |       $60$        |   $5$   |  $1s$  | $7$  |\n|   $2$   |       $40$        |       $100$       | $10^3$  |  $1s$  | $5$  |\n|   $3$   |       $150$       |       $500$       | $10^3$  |  $1s$  | $5$  |\n|   $4$   |       $200$       |      $5000$       | $10^4$  |  $1s$  | $20$ |\n|   $5$   |      $2000$       |  $5 \\times 10^4$  | $10^5$  |  $1s$  | $25$ |\n|   $6$   | $1.5 \\times 10^5$ | $2.5 \\times 10^5$ | $10^5$  | $1.8s$ | $30$ |\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 1.5 \\times 10^5$，$1 \\le m \\le 2.5 \\times 10^5$，$1 \\le b_i \\le 2$，$1 \\le q \\le 10^5$。\n\n### 样例解释 #1：\n\n- 当 $m=3$ 时，所有可能的 $k$ 的值的方案数为 $4$。\n\n    第 $1$ 种：$k_{1,0}=1,k_{1,1}=k_{1,2}=2,k_{2,0}=k_{2,1}=k_{2,2}=2$\n\n    第 $2$ 种：$k_{1,0}=2,k_{1,1}=3,k_{1,2}=6,k_{2,0}=k_{2,1}=k_{2,2}=1$\n\n    第 $3$ 种：$k_{1,0}=2,k_{1,1}=k_{1,2}=4,k_{2,0}=k_{2,1}=k_{2,2}=1$\n\n    第 $4$ 种：$k_{1,0}=2,k_{1,1}=6,k_{1,2}=3,k_{2,0}=k_{2,1}=k_{2,2}=1$\n\n- 当 $m=4$ 时，所有可能的 $k$ 的值的方案数为 $7$。\n\n    第 $1$ 种：$k_{1,0}=1,k_{1,1}=k_{1,2}=2,k_{2,0}=k_{2,1}=k_{2,2}=3$\n\n    第 $2$ 种：$k_{1,0}=2,k_{1,1}=3,k_{1,2}=6,k_{2,0}=k_{2,1}=k_{2,2}=2$\n\n    第 $3$ 种：$k_{1,0}=2,k_{1,1}=k_{1,2}=4,k_{2,0}=k_{2,1}=k_{2,2}=2$\n\n    第 $4$ 种：$k_{1,0}=2,k_{1,1}=6,k_{1,2}=3,k_{2,0}=k_{2,1}=k_{2,2}=2$\n\n    第 $5$ 种：$k_{1,0}=3,k_{1,1}=4,k_{1,2}=12,k_{2,0}=k_{2,1}=k_{2,2}=1$\n\n    第 $6$ 种：$k_{1,0}=3,k_{1,1}=6,k_{1,2}=6,k_{2,0}=k_{2,1}=k_{2,2}=1$\n\n    第 $7$ 种：$k_{1,0}=3,k_{1,1}=12,k_{1,2}=4,k_{2,0}=k_{2,1}=k_{2,2}=1$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PHOI-1」斗之魂", "background": "**本题数据已加强。**\n\n小 X 忙了一天，于是打起了一款叫斗之魂的游戏。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5ha5fx0q.png)", "description": "小 X 要击败 $n$ 个 BOSS，他可以选择以下两种击败 BOSS 的方式：\n\n1. 独自一人击败第 $i$ 个 BOSS 并获得 $k_{i,0}$ 块稀有金属，且保证 $k_{i,0}=k_{i,1}=k_{i,2}$。\n2. 和小 Y 一起击败第 $i$ 个 BOSS ，小 X 理应获得 $k_{i,1}$ 块稀有金属，小 Y 理应获得 $k_{i,2}$ 块稀有金属，但是 BOSS 本身实力并没有因为人数的改变而改变，击败难度相对要简单一点，所以系统判定两人实际各获得 $k_{i,0}$ 块稀有金属，其中保证 $\\dfrac{1}{k_{i,0}}=\\dfrac{1}{k_{i,1}}+\\dfrac{1}{k_{i,2}}$。\n\n小 X 已经计划好用第 $b_i$ 种方式击败第 $i$ 个 BOSS，但是考虑到某些因素，小 X 有 $q$ 次询问，每次询问给定一个正整数 $m$，为小 X 击败完所有 BOSS 后获得的稀有金属总数，已知 $k_{i,0},k_{i,1},k_{i,2}$ 均为正整数，求每次询问后所有可能的 $k$ 的值的方案数，两种方案不同当且仅当至少存在一个 $k$ 的值不同，由于这个答案可能很大，你只需要输出它对 $998244353$ 取模后的结果。", "inputFormat": "第一行有两个整数 $n$ 和 $q$，分别表示 BOSS 个数和小 X 的询问次数。\n\n第二行有 $n$ 个正整数 $b_i$，表示小 X 用 $b_i$ 种方式击败第 $i$ 个 BOSS。\n\n接下来的 $q$ 行中每行有一个整数 $m$，为该次询问中小 X 击败完所有 BOSS 后获得的稀有金属总数。", "outputFormat": "输出共 $q$ 行，第 $i$ 行输出一个答案为当小 X 击败完所有 BOSS 后获得的稀有金属总数为 $m$ 时，所有可能的 $k$ 的值的方案数并对它取模 $998244353$ 后的结果。", "hint": "**本题采用捆绑测试。**\n\n| Subtask |      $n\\le$       |      $m \\le$      | $q \\le$ |  时限  | 分值 |\n| :-----: | :---------------: | :---------------: | :-----: | :----: | :--: |\n|   $0$   |       $10$        |       $20$        |   $5$   |  $1s$  | $8$  |\n|   $1$   |       $30$        |       $60$        |   $5$   |  $1s$  | $7$  |\n|   $2$   |       $40$        |       $100$       | $10^3$  |  $1s$  | $5$  |\n|   $3$   |       $150$       |       $500$       | $10^3$  |  $1s$  | $5$  |\n|   $4$   |       $200$       |      $5000$       | $10^4$  |  $1s$  | $20$ |\n|   $5$   |      $2000$       |  $5 \\times 10^4$  | $10^5$  |  $1s$  | $25$ |\n|   $6$   | $1.5 \\times 10^5$ | $2.5 \\times 10^5$ | $10^5$  | $1.8s$ | $30$ |\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 1.5 \\times 10^5$，$1 \\le m \\le 2.5 \\times 10^5$，$1 \\le b_i \\le 2$，$1 \\le q \\le 10^5$。\n\n### 样例解释 #1：\n\n- 当 $m=3$ 时，所有可能的 $k$ 的值的方案数为 $4$。\n\n    第 $1$ 种：$k_{1,0}=1,k_{1,1}=k_{1,2}=2,k_{2,0}=k_{2,1}=k_{2,2}=2$\n\n    第 $2$ 种：$k_{1,0}=2,k_{1,1}=3,k_{1,2}=6,k_{2,0}=k_{2,1}=k_{2,2}=1$\n\n    第 $3$ 种：$k_{1,0}=2,k_{1,1}=k_{1,2}=4,k_{2,0}=k_{2,1}=k_{2,2}=1$\n\n    第 $4$ 种：$k_{1,0}=2,k_{1,1}=6,k_{1,2}=3,k_{2,0}=k_{2,1}=k_{2,2}=1$\n\n- 当 $m=4$ 时，所有可能的 $k$ 的值的方案数为 $7$。\n\n    第 $1$ 种：$k_{1,0}=1,k_{1,1}=k_{1,2}=2,k_{2,0}=k_{2,1}=k_{2,2}=3$\n\n    第 $2$ 种：$k_{1,0}=2,k_{1,1}=3,k_{1,2}=6,k_{2,0}=k_{2,1}=k_{2,2}=2$\n\n    第 $3$ 种：$k_{1,0}=2,k_{1,1}=k_{1,2}=4,k_{2,0}=k_{2,1}=k_{2,2}=2$\n\n    第 $4$ 种：$k_{1,0}=2,k_{1,1}=6,k_{1,2}=3,k_{2,0}=k_{2,1}=k_{2,2}=2$\n\n    第 $5$ 种：$k_{1,0}=3,k_{1,1}=4,k_{1,2}=12,k_{2,0}=k_{2,1}=k_{2,2}=1$\n\n    第 $6$ 种：$k_{1,0}=3,k_{1,1}=6,k_{1,2}=6,k_{2,0}=k_{2,1}=k_{2,2}=1$\n\n    第 $7$ 种：$k_{1,0}=3,k_{1,1}=12,k_{1,2}=4,k_{2,0}=k_{2,1}=k_{2,2}=1$", "locale": "zh-CN"}}}
{"pid": "P9552", "type": "P", "difficulty": 2, "samples": [["2\n1\n2 3\n2\n2 3 10", "4\n12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "O2优化"], "title": "「CROI · R1」浣熊的小溪", "background": "> “从太阳里奔来，又迎着阳光走去；张开熊爪，与风相拥，离别之际，却低首自吟。”\\\n那梦枫畔嬉戏的成长，那阳光下不羁的信仰，历久弥坚，在无数浣熊的心畔回响。 \\\n> 可叹，灵溪上畔，一人意志，大小工事，割裂了纯真的年华，刀刻了落寞的隔阂。\\\n那明澈的小溪，那快乐的往日，还会，在感怀中驻足吗……", "description": "浣熊岭的森林可以看作一张 $n \\times m$ 的网格图。工厂排放的废水污染了纵贯森林的梦枫溪（一条直线），导致所经区域对浣熊是有害的。小浣熊 CleverRaccoon 为了研究废水对浣熊的危害，要寻求你的帮助。\n\n设 $f(n,m)$ 表示一条直线最多能穿过 $n\\times m$ 的网格图的格子数。\n\n小浣熊有两种问题想要问你：\n\n1.  给定 $n,m$，求 $f(n,m)$；\n2.  给定 $n,m,Q$，你需要找到 $n'\\ge n,m'\\ge m$，满足 $f(n',m')\\ge Q$，且 $n'\\times m'$ 尽可能小。求 $n'm'-nm$ 的最小值**对 $998244353$ 取模**的结果。数据保证 $f(n,m)<Q$。", "inputFormat": "**本题包含多组测试数据。**\n\n第一行，输入一个正整数 $T$，表示有 $T$ 次询问。\n\n对于每次询问：\n\n第一行，输入一个正整数 $op$，表示问题类型。\n\n第二行，若 $op=1$，输入 $2$ 个正整数 $n$ 和 $m$；若 $op=2$，输入 $3$ 个正整数 $n$、$m$ 和 $Q$。", "outputFormat": "共 $T$ 行，对于每次询问：一行输出 $1$ 个正整数，表示对应问题的答案。", "hint": "#### 样例解释 #1\n\n对于第一次询问：\n\n下图所示的情况是一种最佳构造方案，梦枫溪穿过 $2 \\times 3$ 的网格森林时，最多穿过 $4$ 个小网格（黄色部分为穿过的网格，灰色部分为未穿过的网格）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7dknua6w.png?x-oss-process=image/resize,m_lfit,h_360)\n\n下示方案不是一种最佳方案，梦枫溪是从两个绿色网格中间的一个顶点上穿过的，所以两个绿色区域都没有被穿过。因此梦枫溪只穿过了 $3$ 个小网格。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cgjzaf2i.png?x-oss-process=image/resize,m_lfit,h_360)\n\n对于第二次询问：\n\n如下图所示，当 $n'=2$, $m'=9$ 时，才能使梦枫溪穿过 $10$ 个网格的情况下，在原基础添加的 $n'm'-nm$ 个网格是最少的（红色虚线左边是原来的森林，右边是添加的部分）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/phkx3o46.png)\n\n#### 数据范围\n\n**本题采用 Subtask 捆绑测试。**\n\n| Subtask | $n$ | $m$ | $Q$ | 特殊性质 | Score |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $0$ | $\\le10^{18}$ | $=1$ | $\\le2 \\times 10^{18}$  | $op=1$ | $5$ |\n| $1$ | $\\le10^{18}$ | $=1$ | $\\le2 \\times 10^{18}$  | $op=2$ | $5$ |\n| $2$ | $\\le10^{18}$ | $\\le10^{18}$ | $\\le2 \\times 10^{18}$ | $op=1$ | $25$ |\n| $3$ | $\\le10^{18}$ | $\\le10^{18}$ |$\\le2 \\times 10^{18}$ | $op=2$ | $25$ |\n| $4$ | $\\le10^9$ | $\\le10^9$ | $\\le2 \\times 10^9$ | 无特殊性质 | $30$ |\n| $5$ | $\\le10^{18}$ | $\\le10^{18}$ | $\\le2 \\times 10^{18}$ | 无特殊性质 | $10$ |\n\n对于 $100\\%$ 的数据，保证 $1 \\le T \\le 10$，$op \\in \\{1,2\\}$，$1 \\le n,m \\le 10^{18}$，$2 \\le n+m \\le Q \\le 2 \\times 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CROI · R1」浣熊的小溪", "background": "> “从太阳里奔来，又迎着阳光走去；张开熊爪，与风相拥，离别之际，却低首自吟。”\\\n那梦枫畔嬉戏的成长，那阳光下不羁的信仰，历久弥坚，在无数浣熊的心畔回响。 \\\n> 可叹，灵溪上畔，一人意志，大小工事，割裂了纯真的年华，刀刻了落寞的隔阂。\\\n那明澈的小溪，那快乐的往日，还会，在感怀中驻足吗……", "description": "浣熊岭的森林可以看作一张 $n \\times m$ 的网格图。工厂排放的废水污染了纵贯森林的梦枫溪（一条直线），导致所经区域对浣熊是有害的。小浣熊 CleverRaccoon 为了研究废水对浣熊的危害，要寻求你的帮助。\n\n设 $f(n,m)$ 表示一条直线最多能穿过 $n\\times m$ 的网格图的格子数。\n\n小浣熊有两种问题想要问你：\n\n1.  给定 $n,m$，求 $f(n,m)$；\n2.  给定 $n,m,Q$，你需要找到 $n'\\ge n,m'\\ge m$，满足 $f(n',m')\\ge Q$，且 $n'\\times m'$ 尽可能小。求 $n'm'-nm$ 的最小值**对 $998244353$ 取模**的结果。数据保证 $f(n,m)<Q$。", "inputFormat": "**本题包含多组测试数据。**\n\n第一行，输入一个正整数 $T$，表示有 $T$ 次询问。\n\n对于每次询问：\n\n第一行，输入一个正整数 $op$，表示问题类型。\n\n第二行，若 $op=1$，输入 $2$ 个正整数 $n$ 和 $m$；若 $op=2$，输入 $3$ 个正整数 $n$、$m$ 和 $Q$。", "outputFormat": "共 $T$ 行，对于每次询问：一行输出 $1$ 个正整数，表示对应问题的答案。", "hint": "#### 样例解释 #1\n\n对于第一次询问：\n\n下图所示的情况是一种最佳构造方案，梦枫溪穿过 $2 \\times 3$ 的网格森林时，最多穿过 $4$ 个小网格（黄色部分为穿过的网格，灰色部分为未穿过的网格）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7dknua6w.png?x-oss-process=image/resize,m_lfit,h_360)\n\n下示方案不是一种最佳方案，梦枫溪是从两个绿色网格中间的一个顶点上穿过的，所以两个绿色区域都没有被穿过。因此梦枫溪只穿过了 $3$ 个小网格。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cgjzaf2i.png?x-oss-process=image/resize,m_lfit,h_360)\n\n对于第二次询问：\n\n如下图所示，当 $n'=2$, $m'=9$ 时，才能使梦枫溪穿过 $10$ 个网格的情况下，在原基础添加的 $n'm'-nm$ 个网格是最少的（红色虚线左边是原来的森林，右边是添加的部分）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/phkx3o46.png)\n\n#### 数据范围\n\n**本题采用 Subtask 捆绑测试。**\n\n| Subtask | $n$ | $m$ | $Q$ | 特殊性质 | Score |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $0$ | $\\le10^{18}$ | $=1$ | $\\le2 \\times 10^{18}$  | $op=1$ | $5$ |\n| $1$ | $\\le10^{18}$ | $=1$ | $\\le2 \\times 10^{18}$  | $op=2$ | $5$ |\n| $2$ | $\\le10^{18}$ | $\\le10^{18}$ | $\\le2 \\times 10^{18}$ | $op=1$ | $25$ |\n| $3$ | $\\le10^{18}$ | $\\le10^{18}$ |$\\le2 \\times 10^{18}$ | $op=2$ | $25$ |\n| $4$ | $\\le10^9$ | $\\le10^9$ | $\\le2 \\times 10^9$ | 无特殊性质 | $30$ |\n| $5$ | $\\le10^{18}$ | $\\le10^{18}$ | $\\le2 \\times 10^{18}$ | 无特殊性质 | $10$ |\n\n对于 $100\\%$ 的数据，保证 $1 \\le T \\le 10$，$op \\in \\{1,2\\}$，$1 \\le n,m \\le 10^{18}$，$2 \\le n+m \\le Q \\le 2 \\times 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P9553", "type": "P", "difficulty": 3, "samples": [["5 0 2\n1 1 1 2 3\n1 2", "5\n3 0\n1 3\n1 4\n0 2\n0 1"], ["5 1 2\n1 1 1 2 3\n1\n1 2", "5\n0 0\n4 0\n1 4\n0 5\n0 1"], ["5 1 3\n1 2 3 4 5\n3\n1 2 3", "8\n1 0\n1 1\n0 0\n2 4\n1 3\n0 3\n0 3\n0 1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "O2优化"], "title": "「CROI · R1」浣熊的语言", "background": "$\\texttt{[2023.08.17 21:44]：}$ 为防止神奇的暴力做法通过，本题时限改为 $500\\ ms$。\n\n> 他复瞑着，沙地上的文字。\\\n> 词句，日忆夜诵，挥翰成风；夜幕下，星罗棋布。\\\n> 新意，呼之欲出，似即却离；叹气里，功败垂成。\\\n> 她释然一笑，潇然起身，轻叩他的后背。\\\n> 却见流光间，熊爪翻飞；夜风中，新词真切。\\\n> “你做到了……”\\\n> 平凡的仲夏夜，深刻的文字。\\\n> 忆诵的努力，闪烁着星光……", "description": "小浣熊 CleverRaccoon 遵循浣熊的单词遗忘曲线，从第 $1$ 天开始背单词。\n\n一共有 $n$ 个单词，正常情况下，第 $i$ 个单词将在第 $d_i$ 天首次学习。\n\n同时，每个单词都会安排 $k$ 次复习，对于第 $j$ 次复习有复习点 $t_j$，表示正常情况下，每个单词在**首次学习后** $t_j$ 天都会安排这个单词的复习。换言之，第 $i$ 个单词的第 $j$ 次复习时间为第 $d_i+t_j$ 天。\n\n另外，还有 $m$ 天为特殊情况，第 $i$ 次特殊情况发生在 $s_i$ 天。小浣熊 CleverRaccoon 在当日忘记背单词了，与当日冲突的首次学习或复习时间将顺延至第二天学习或复习。\n- 若某单词的首次学习时间顺延至第二天，则该单词按**顺延后**的首次学习时间安排复习。\n- 若某单词的当次复习时间顺延至第二天，则**不影响**该单词的后续复习时间。\n- 若多个学习或复习时间重合于一天，则当天需要进行**多次**学习或复习。\n\n小浣熊 CleverRaccoon 想知道：学习和复习完所有单词需要的天数、每天新学单词数、每天复习单词数。", "inputFormat": "第一行，三个整数 $n,m,k$，表示需背单词的总数、特殊情况的天数、每个单词均需复习的次数。\n\n第二行，$n$ 个整数 $d_i$，表示每个单词的首次学习时间。保证 $d$ 单调不减。\n\n第三行，$m$ 个整数 $s_i$，表示特殊情况日期。保证 $s$ 单调递增。特别地，若 $m=0$，则没有该行数据。\n\n第四行，$k$ 个整数 $t_i$，表示所有单词的每个复习点。保证 $t$ 单调递增。", "outputFormat": "第一行，一个整数，表示小浣熊 CleverRaccoon 学习和复习完所有单词需要的天数 $x$。\n\n接下来有 $x$ 行，每行两个整数，表示每天的学习单词数量和复习单词数量。", "hint": "设依次输入的单词编号分别为 $1 \\sim n$。\n#### 样例解释 #1\n| 天数 | 新学单词编号 | 新学单词数量 | 复习单词编号 | 复习单词数量 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $1,2,3$ | $3$ | $-$ | $0$ |\n| $2$ | $4$ | $1$ | $1,2,3$ | $3$ |\n| $3$ | $5$ | $1$ | $1,2,3,4$ | $4$ |\n| $4$ | $-$ | $0$ | $4,5$ | $2$ |\n| $5$ | $-$ | $0$ | $5$ | $1$ |\n\n#### 样例解释 #2\n| 天数 | 新学单词编号 | 新学单词数量 | 复习单词编号 | 复习单词数量 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ (special) | $-$ | $0$ | $-$ | $0$ |\n| $2$ | $1,2,3,4$ | $4$ | $-$ | $0$ |\n| $3$ | $5$ | $1$ | $1,2,3,4$ | $4$ |\n| $4$ | $-$ | $0$ | $1,2,3,4,5$ | $5$ |\n| $5$ | $-$ | $0$ | $5$ | $1$ |\n\n#### 样例解释 #3\n| 天数 | 新学单词编号 | 新学单词数量 | 复习单词编号 | 复习单词数量 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $1$ | $1$ | $-$ | $0$ |\n| $2$ | $2$ | $1$ | $1$ | $1$ |\n| $3$ (special) | $-$ | $0$ | $-$ | $0$ |\n| $4$ | $3,4$ | $2$ | $1,1,2,2$ | $4$ |\n| $5$ | $5$ | $1$ | $2,3,4$ | $3$ |\n| $6$ | $-$ | $0$ | $3,4,5$ | $3$ |\n| $7$ | $-$ | $0$ | $3,4,5$ | $3$ |\n| $8$ | $-$ | $0$ | $5$ | $1$ |\n\n#### 数据范围\n\n**本题采用 Subtask 捆绑测试。**\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^6,0\\leq m\\leq 200,1\\leq k,d_i,t_i\\leq 10^3,s_m < d_n$。保证 $d$ 单调不减，$t,s$ 单调递增。\n\n|Subtask|$n$|$m$|$k$|$d_i$|$t_i$|Score|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$0$|$\\leq 100$|$=0$|$\\leq 10$|$\\leq 100$|$\\leq 100$|$5$|\n|$1$|$\\leq 10^3$|$=0$|$\\leq 100$|$\\leq 10^3$|$\\leq 100$|$20$|\n|$2$|$\\leq 100$|$\\leq 10$|$\\leq 10$|$\\leq 100$|$\\leq 100$|$15$|\n|$3$|$\\leq 10^3$|$\\leq 100$|$\\leq 100$|$\\leq 10^3$|$\\leq 100$|$25$|\n|$4$|$\\leq 10^6$|$\\leq 200$|$\\leq 10^3$|$\\leq 10^3$|$\\leq 10^3$|$35$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CROI · R1」浣熊的语言", "background": "$\\texttt{[2023.08.17 21:44]：}$ 为防止神奇的暴力做法通过，本题时限改为 $500\\ ms$。\n\n> 他复瞑着，沙地上的文字。\\\n> 词句，日忆夜诵，挥翰成风；夜幕下，星罗棋布。\\\n> 新意，呼之欲出，似即却离；叹气里，功败垂成。\\\n> 她释然一笑，潇然起身，轻叩他的后背。\\\n> 却见流光间，熊爪翻飞；夜风中，新词真切。\\\n> “你做到了……”\\\n> 平凡的仲夏夜，深刻的文字。\\\n> 忆诵的努力，闪烁着星光……", "description": "小浣熊 CleverRaccoon 遵循浣熊的单词遗忘曲线，从第 $1$ 天开始背单词。\n\n一共有 $n$ 个单词，正常情况下，第 $i$ 个单词将在第 $d_i$ 天首次学习。\n\n同时，每个单词都会安排 $k$ 次复习，对于第 $j$ 次复习有复习点 $t_j$，表示正常情况下，每个单词在**首次学习后** $t_j$ 天都会安排这个单词的复习。换言之，第 $i$ 个单词的第 $j$ 次复习时间为第 $d_i+t_j$ 天。\n\n另外，还有 $m$ 天为特殊情况，第 $i$ 次特殊情况发生在 $s_i$ 天。小浣熊 CleverRaccoon 在当日忘记背单词了，与当日冲突的首次学习或复习时间将顺延至第二天学习或复习。\n- 若某单词的首次学习时间顺延至第二天，则该单词按**顺延后**的首次学习时间安排复习。\n- 若某单词的当次复习时间顺延至第二天，则**不影响**该单词的后续复习时间。\n- 若多个学习或复习时间重合于一天，则当天需要进行**多次**学习或复习。\n\n小浣熊 CleverRaccoon 想知道：学习和复习完所有单词需要的天数、每天新学单词数、每天复习单词数。", "inputFormat": "第一行，三个整数 $n,m,k$，表示需背单词的总数、特殊情况的天数、每个单词均需复习的次数。\n\n第二行，$n$ 个整数 $d_i$，表示每个单词的首次学习时间。保证 $d$ 单调不减。\n\n第三行，$m$ 个整数 $s_i$，表示特殊情况日期。保证 $s$ 单调递增。特别地，若 $m=0$，则没有该行数据。\n\n第四行，$k$ 个整数 $t_i$，表示所有单词的每个复习点。保证 $t$ 单调递增。", "outputFormat": "第一行，一个整数，表示小浣熊 CleverRaccoon 学习和复习完所有单词需要的天数 $x$。\n\n接下来有 $x$ 行，每行两个整数，表示每天的学习单词数量和复习单词数量。", "hint": "设依次输入的单词编号分别为 $1 \\sim n$。\n#### 样例解释 #1\n| 天数 | 新学单词编号 | 新学单词数量 | 复习单词编号 | 复习单词数量 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $1,2,3$ | $3$ | $-$ | $0$ |\n| $2$ | $4$ | $1$ | $1,2,3$ | $3$ |\n| $3$ | $5$ | $1$ | $1,2,3,4$ | $4$ |\n| $4$ | $-$ | $0$ | $4,5$ | $2$ |\n| $5$ | $-$ | $0$ | $5$ | $1$ |\n\n#### 样例解释 #2\n| 天数 | 新学单词编号 | 新学单词数量 | 复习单词编号 | 复习单词数量 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ (special) | $-$ | $0$ | $-$ | $0$ |\n| $2$ | $1,2,3,4$ | $4$ | $-$ | $0$ |\n| $3$ | $5$ | $1$ | $1,2,3,4$ | $4$ |\n| $4$ | $-$ | $0$ | $1,2,3,4,5$ | $5$ |\n| $5$ | $-$ | $0$ | $5$ | $1$ |\n\n#### 样例解释 #3\n| 天数 | 新学单词编号 | 新学单词数量 | 复习单词编号 | 复习单词数量 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $1$ | $1$ | $-$ | $0$ |\n| $2$ | $2$ | $1$ | $1$ | $1$ |\n| $3$ (special) | $-$ | $0$ | $-$ | $0$ |\n| $4$ | $3,4$ | $2$ | $1,1,2,2$ | $4$ |\n| $5$ | $5$ | $1$ | $2,3,4$ | $3$ |\n| $6$ | $-$ | $0$ | $3,4,5$ | $3$ |\n| $7$ | $-$ | $0$ | $3,4,5$ | $3$ |\n| $8$ | $-$ | $0$ | $5$ | $1$ |\n\n#### 数据范围\n\n**本题采用 Subtask 捆绑测试。**\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^6,0\\leq m\\leq 200,1\\leq k,d_i,t_i\\leq 10^3,s_m < d_n$。保证 $d$ 单调不减，$t,s$ 单调递增。\n\n|Subtask|$n$|$m$|$k$|$d_i$|$t_i$|Score|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$0$|$\\leq 100$|$=0$|$\\leq 10$|$\\leq 100$|$\\leq 100$|$5$|\n|$1$|$\\leq 10^3$|$=0$|$\\leq 100$|$\\leq 10^3$|$\\leq 100$|$20$|\n|$2$|$\\leq 100$|$\\leq 10$|$\\leq 10$|$\\leq 100$|$\\leq 100$|$15$|\n|$3$|$\\leq 10^3$|$\\leq 100$|$\\leq 100$|$\\leq 10^3$|$\\leq 100$|$25$|\n|$4$|$\\leq 10^6$|$\\leq 200$|$\\leq 10^3$|$\\leq 10^3$|$\\leq 10^3$|$35$|", "locale": "zh-CN"}}}
{"pid": "P9554", "type": "P", "difficulty": 3, "samples": [["3\n1 3\n2 2\n6 3", "5\n6\n666\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["O2优化"], "title": "「CROI · R1」浣熊的溪石", "background": ">回首往昔，碧空如洗，日暖风恬。\\\n溪石深浅有致地错落在明澈似玉的梦枫溪里。\\\n浣熊们水上跑酷的无限趣忆亦于此伊始……\n", "description": "日升月落，春去秋来，梦枫溪石的高度千变万化。\n爱思考的小浣熊 CleverRaccoon 想探寻这些溪石究竟能构成多少种不同的高度序列。\n\n现有若干个长度为 $n$ 的非负整数列 $a$。\n\n当 $n>1$ 时，$a_1,a_n$ 的取值为 $0\\sim m$，其它数 $a_i$ 的取值为 $0\\sim m-1$，其中 $2\\leq i \\leq n-1$。\n\n当 $n=1$ 时，$a_1$ 的取值为 $0\\sim m+1$。\n\n**定义**：当且仅当 $\\forall i\\in\\{1,2,\\dots ,n\\},a_i=b_i$ 或 $\\forall i\\in\\{1,2,\\dots ,n\\},a_i=b_{n-i+1}$ 时，数列 $a,b$ 相同。\n\n现给定 $n,m$，请求出最多有多少个**不同**的数列，答案对 $998244353$ 取模。", "inputFormat": "**本题包含多组测试数据。**\n\n第一行，输入一个正整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行输入以空格间隔的 $2$ 个正整数 $n,m$，意义见题目描述。", "outputFormat": "共 $T$ 行，对于每组数据，一行输出一个正整数，表示答案对 $998244353$ 取模的结果。", "hint": "#### 解释 #1\n\n当 $n=1,m=3$ 时，$a_i\\in\\{0,1,2,3,4\\}$，共有 $5$ 种不同的高度序列。\n\n当 $n=2,m=2$ 时，共有 $6$ 种不同的高度序列，详情如下：\n\n|序号|$a_1=$|$a_2=$|\n|:-:|:-:|:-:|\n|$1$|$0$|$0$|\n|$2$|$0$|$1$|\n|$3$|$0$|$2$|\n|$4$|$1$|$1$|\n|$5$|$1$|$2$|\n|$6$|$2$|$2$|\n\n#### 数据范围\n**本题采用 Subtask 捆绑测试。**\n\n|Subtask|$n\\leq$|$m\\leq$|$T\\leq$|特殊性质|Score|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|$0$|$10$|$10$|$10$|无特殊性质|$10$|\n|$1$|$10^3$|$1$|$10^3$|$m=1$|$5$|\n|$2$|$10^3$|$3$|$10$|$m=3$|$10$|\n|$3$|$10^3$|$10^3$|$1$|无特殊性质|$15$|\n|$4$|$10^6$|$10^3$|$100$|无特殊性质|$10$|\n|$5$|$10^6$|$10^6$|$10^6$|无特殊性质|$20$|\n|$6$|$10^9$|$10^9$|$10^6$| $n$ 为奇数|$10$|\n|$7$|$10^9$|$10^9$|$10^6$| $n$ 为偶数|$10$|\n|$8$|$10^{18}$|$10^9$|$10^6$|无特殊性质|$10$|\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq10^{18},1\\leq m\\leq10^9,1\\leq T\\leq10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CROI · R1」浣熊的溪石", "background": ">回首往昔，碧空如洗，日暖风恬。\\\n溪石深浅有致地错落在明澈似玉的梦枫溪里。\\\n浣熊们水上跑酷的无限趣忆亦于此伊始……\n", "description": "日升月落，春去秋来，梦枫溪石的高度千变万化。\n爱思考的小浣熊 CleverRaccoon 想探寻这些溪石究竟能构成多少种不同的高度序列。\n\n现有若干个长度为 $n$ 的非负整数列 $a$。\n\n当 $n>1$ 时，$a_1,a_n$ 的取值为 $0\\sim m$，其它数 $a_i$ 的取值为 $0\\sim m-1$，其中 $2\\leq i \\leq n-1$。\n\n当 $n=1$ 时，$a_1$ 的取值为 $0\\sim m+1$。\n\n**定义**：当且仅当 $\\forall i\\in\\{1,2,\\dots ,n\\},a_i=b_i$ 或 $\\forall i\\in\\{1,2,\\dots ,n\\},a_i=b_{n-i+1}$ 时，数列 $a,b$ 相同。\n\n现给定 $n,m$，请求出最多有多少个**不同**的数列，答案对 $998244353$ 取模。", "inputFormat": "**本题包含多组测试数据。**\n\n第一行，输入一个正整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行输入以空格间隔的 $2$ 个正整数 $n,m$，意义见题目描述。", "outputFormat": "共 $T$ 行，对于每组数据，一行输出一个正整数，表示答案对 $998244353$ 取模的结果。", "hint": "#### 解释 #1\n\n当 $n=1,m=3$ 时，$a_i\\in\\{0,1,2,3,4\\}$，共有 $5$ 种不同的高度序列。\n\n当 $n=2,m=2$ 时，共有 $6$ 种不同的高度序列，详情如下：\n\n|序号|$a_1=$|$a_2=$|\n|:-:|:-:|:-:|\n|$1$|$0$|$0$|\n|$2$|$0$|$1$|\n|$3$|$0$|$2$|\n|$4$|$1$|$1$|\n|$5$|$1$|$2$|\n|$6$|$2$|$2$|\n\n#### 数据范围\n**本题采用 Subtask 捆绑测试。**\n\n|Subtask|$n\\leq$|$m\\leq$|$T\\leq$|特殊性质|Score|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|$0$|$10$|$10$|$10$|无特殊性质|$10$|\n|$1$|$10^3$|$1$|$10^3$|$m=1$|$5$|\n|$2$|$10^3$|$3$|$10$|$m=3$|$10$|\n|$3$|$10^3$|$10^3$|$1$|无特殊性质|$15$|\n|$4$|$10^6$|$10^3$|$100$|无特殊性质|$10$|\n|$5$|$10^6$|$10^6$|$10^6$|无特殊性质|$20$|\n|$6$|$10^9$|$10^9$|$10^6$| $n$ 为奇数|$10$|\n|$7$|$10^9$|$10^9$|$10^6$| $n$ 为偶数|$10$|\n|$8$|$10^{18}$|$10^9$|$10^6$|无特殊性质|$10$|\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq10^{18},1\\leq m\\leq10^9,1\\leq T\\leq10^6$。", "locale": "zh-CN"}}}
{"pid": "P9555", "type": "P", "difficulty": 6, "samples": [["9 3\n1 1 1 0 1 1 0 0 0\n1 2\n2 3\n3 4\n3 5\n1 6\n6 7\n7 8\n7 9\n2 9 4\n1 9\n2 4 9\n", "3\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "「CROI · R1」浣熊的阴阳鱼", "background": "> 往昔，阴阳由天地所创，孕大含深；今昔，时光为记忆所刻，随行如影。\\\n流水落花间，嬉闹于阴阳树的意境；沧海桑田间，铭心于阴阳忆的缤斓。\\\n阴鱼，阳鱼……挥翰着日月的闲情，留存着浣熊的惬意，却不复存在……\\\n小浣熊 CleverRaccoon 与最后一瞬阴阳，含泪而笑……", "description": "一棵树的各结点都悬挂着 $1$ 条阴鱼或阳鱼（分别用 $0,1$ 表示），它们可能在某刻由于基因突变互相转化。\n\n小浣熊 CleverRaccoon 带着一只能装 $2$ 条鱼的篮筐在此树的某条链上行走。当他所在点上的鱼与某条筐内鱼的属性相反时，他会将这 $2$ 条鱼合成 $1$ 条阴阳鱼并吃下；在筐中没有满的条件下，他会将所在点上的鱼放入筐中。\n\n现有两种操作：\n\n1. 一个结点上的阴阳鱼发生基因突变，变为另一种类型的阴阳鱼。\n2. 帮助聪明的小浣熊 CleverRaccoon 求出：当他沿着这棵树上的某条链行走时，能吃下的阴阳鱼的条数。", "inputFormat": "第一行，两个正整数 $n$ 和 $q$，表示结点个数、修改和询问总次数。\n\n第二行 $n$ 个整数，表示每个结点上悬挂的鱼的属性。\n\n接下来 $n−1$ 行，每行两个正整数 $u,v$，表示 $u$ 和 $v$ 两个点之间有一条边。\n\n接下来 $q$ 行，格式为 `1 u` 或 `2 u v`。\n\n若格式为 `1 u`，则表示结点 $u$ 上的鱼基因突变。\n\n若格式为 `2 u v`，则表示询问小浣熊  CleverRaccoon 在从 $u$ 到 $v$ 的简单路径中能吃下的阴阳鱼的条数。", "outputFormat": "对于每次询问，单行输出一个整数，表示小浣熊  CleverRaccoon 能吃下的阴阳鱼的条数。", "hint": "**数据范围**\n\n**本题采用 Subtask 捆绑测试**。\n\n- Subtask 0（10 points）：$n,q \\leq 10$。\n- Subtask 1（15 points）：$n,q \\leq 2\\times10^3$。\n- Subtask 2（15 points）：保证树的深度小于 $10^3$。\n- Subtask 3（60 points）：无特殊限制。\n\n对于所有测试数据： $1 \\leq n,q\\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CROI · R1」浣熊的阴阳鱼", "background": "> 往昔，阴阳由天地所创，孕大含深；今昔，时光为记忆所刻，随行如影。\\\n流水落花间，嬉闹于阴阳树的意境；沧海桑田间，铭心于阴阳忆的缤斓。\\\n阴鱼，阳鱼……挥翰着日月的闲情，留存着浣熊的惬意，却不复存在……\\\n小浣熊 CleverRaccoon 与最后一瞬阴阳，含泪而笑……", "description": "一棵树的各结点都悬挂着 $1$ 条阴鱼或阳鱼（分别用 $0,1$ 表示），它们可能在某刻由于基因突变互相转化。\n\n小浣熊 CleverRaccoon 带着一只能装 $2$ 条鱼的篮筐在此树的某条链上行走。当他所在点上的鱼与某条筐内鱼的属性相反时，他会将这 $2$ 条鱼合成 $1$ 条阴阳鱼并吃下；在筐中没有满的条件下，他会将所在点上的鱼放入筐中。\n\n现有两种操作：\n\n1. 一个结点上的阴阳鱼发生基因突变，变为另一种类型的阴阳鱼。\n2. 帮助聪明的小浣熊 CleverRaccoon 求出：当他沿着这棵树上的某条链行走时，能吃下的阴阳鱼的条数。", "inputFormat": "第一行，两个正整数 $n$ 和 $q$，表示结点个数、修改和询问总次数。\n\n第二行 $n$ 个整数，表示每个结点上悬挂的鱼的属性。\n\n接下来 $n−1$ 行，每行两个正整数 $u,v$，表示 $u$ 和 $v$ 两个点之间有一条边。\n\n接下来 $q$ 行，格式为 `1 u` 或 `2 u v`。\n\n若格式为 `1 u`，则表示结点 $u$ 上的鱼基因突变。\n\n若格式为 `2 u v`，则表示询问小浣熊  CleverRaccoon 在从 $u$ 到 $v$ 的简单路径中能吃下的阴阳鱼的条数。", "outputFormat": "对于每次询问，单行输出一个整数，表示小浣熊  CleverRaccoon 能吃下的阴阳鱼的条数。", "hint": "**数据范围**\n\n**本题采用 Subtask 捆绑测试**。\n\n- Subtask 0（10 points）：$n,q \\leq 10$。\n- Subtask 1（15 points）：$n,q \\leq 2\\times10^3$。\n- Subtask 2（15 points）：保证树的深度小于 $10^3$。\n- Subtask 3（60 points）：无特殊限制。\n\n对于所有测试数据： $1 \\leq n,q\\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9556", "type": "P", "difficulty": 2, "samples": [["2\n4 5\n6 12\n1 3\n6 15\n8 1\n3 100\n3 200\n4 300\n6 100", "Yes\nNo"]], "limits": {"time": [1000, 1000], "memory": [1048576, 1048576]}, "tags": ["2023", "山东", "O2优化", "省赛/邀请赛"], "title": "[SDCPC 2023] Orders", "background": "", "description": "A factory receives $n$ orders at the beginning of day $1$. The $i$-th order can be described as two integers $a_i$ and $b_i$, indicating that at the end of day $a_i$, the factory needs to deliver $b_i$ products to the customer.\n\nGiven that the factory can produce $k$ products each day, and at the beginning of day $1$ the factory has no product in stock, can the factory complete all orders?", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1 \\le T \\le 100$) indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $k$ ($1 \\le n \\le 100$, $1 \\le k \\le 10^9$) indicating the number of orders and the number of products the factory can produce each day.\n\nFor the following $n$ lines, the $i$-th line contains two integers $a_i$ and $b_i$ ($1 \\le a_i, b_i \\le 10^9$) indicating that the $i$-th order require the factory to deliver $b_i$ products at the end of day $a_i$.", "outputFormat": "For each test case output one line. If the factory can complete all orders output $\\texttt{Yes}$, otherwise output $\\texttt{No}$.", "hint": "For the first sample test case, the factory can produce $5$ products each day.\n\n- At the end of day $1$, there are $5$ products in stock so the factory can complete the $2$-nd order. After delivery, there are $2$ products left in stock.\n- At the end of day $6$, the factory produces $25$ more products. There are $27$ products in stock so the factory can complete the $1$-st and the $3$-rd order. After delivery, there are $0$ products left in stock.\n- At the end of day $8$, the factory produces $10$ more products. There are $10$ products in stock so the factory can complete the $4$-th order. After delivery, there are $9$ products left in stock.\n\nFor the second sample test case, the factory can produce $100$ products each day.\n\n- At the end of day $3$, there are $300$ products in stock and the factory can complete the $1$-st order. After delivery, there are $100$ products left in stock.\n- At the end of day $4$, the factory produces $100$ more products. There are only $200$ products in stock so the factory cannot complete the $2$-nd order.", "locale": "en", "translations": {"en": {"title": "[SDCPC 2023] Orders", "background": "", "description": "A factory receives $n$ orders at the beginning of day $1$. The $i$-th order can be described as two integers $a_i$ and $b_i$, indicating that at the end of day $a_i$, the factory needs to deliver $b_i$ products to the customer.\n\nGiven that the factory can produce $k$ products each day, and at the beginning of day $1$ the factory has no product in stock, can the factory complete all orders?", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1 \\le T \\le 100$) indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $k$ ($1 \\le n \\le 100$, $1 \\le k \\le 10^9$) indicating the number of orders and the number of products the factory can produce each day.\n\nFor the following $n$ lines, the $i$-th line contains two integers $a_i$ and $b_i$ ($1 \\le a_i, b_i \\le 10^9$) indicating that the $i$-th order require the factory to deliver $b_i$ products at the end of day $a_i$.", "outputFormat": "For each test case output one line. If the factory can complete all orders output $\\texttt{Yes}$, otherwise output $\\texttt{No}$.", "hint": "For the first sample test case, the factory can produce $5$ products each day.\n\n- At the end of day $1$, there are $5$ products in stock so the factory can complete the $2$-nd order. After delivery, there are $2$ products left in stock.\n- At the end of day $6$, the factory produces $25$ more products. There are $27$ products in stock so the factory can complete the $1$-st and the $3$-rd order. After delivery, there are $0$ products left in stock.\n- At the end of day $8$, the factory produces $10$ more products. There are $10$ products in stock so the factory can complete the $4$-th order. After delivery, there are $9$ products left in stock.\n\nFor the second sample test case, the factory can produce $100$ products each day.\n\n- At the end of day $3$, there are $300$ products in stock and the factory can complete the $1$-st order. After delivery, there are $100$ products left in stock.\n- At the end of day $4$, the factory produces $100$ more products. There are only $200$ products in stock so the factory cannot complete the $2$-nd order.", "locale": "en"}, "zh-CN": {"title": "[SDCPC 2023] Orders", "background": "", "description": "某工厂在第 $1$ 天开工之前收到了 $n$ 笔订单，第 $i$ 笔订单可以用两个整数 $a_i$ 和 $b_i$ 描述，表示工厂需要在第 $a_i$ 天结束时交付 $b_i$ 件货物。\n\n已知工厂每天能生产 $k$ 件货物，且第 $1$ 天开工之前没有任何存货，问该工厂能否完成所有订单。", "inputFormat": "有多组测试数据。第一行输入一个整数 $T$（$1 \\le T \\le 100$）表示测试数据组数，对于每组测试数据：\n\n第一行输入两个整数 $n$ 和 $k$（$1 \\le n \\le 100$，$1 \\le k \\le 10^9$）表示订单数量以及工厂每日能生产的货物数量。\n\n对于接下来 $n$ 行，第 $i$ 行输入两个整数 $a_i$ 和 $b_i$（$1 \\le a_i, b_i \\le 10^9$）表示第 $i$ 笔订单要求在第 $a_i$ 天结束时交付 $b_i$ 件货物。", "outputFormat": "每组数据输出一行。若工厂能完成所有订单输出 $\\texttt{Yes}$，否则输出 $\\texttt{No}$。\n\n**【样例解释】**\n\n对于第一组样例数据，工厂每天能生产 $5$ 件货物。\n-  在第 $1$ 天结束时，工厂共有 $5$ 件货物，可以完成第 $2$ 笔订单。交付后，工厂剩余 $2$ 件货物。\n-  在第 $6$ 天结束时，工厂又多生产了 $25$ 件货物，共有 $27$ 件货物，可以完成第 $1$ 和第 $3$ 笔订单。交付后，工厂剩余 $0$ 件货物。\n- 在第 $8$ 天结束时，工厂又多生产了 $10$ 件货物，共有 $10$ 件货物，可以完成第 $4$ 笔订单。交付后，工厂剩余 $9$ 件货物。\n\n对于第二组样例数据，工厂每天能生产 $100$ 件货物。\n- 在第 $3$ 天结束时，工厂共有 $300$ 件货物，可以完成第 $1$ 笔订单。交付后，工厂剩余 $100$ 件货物。\n- 在第 $4$ 天结束时，工厂又多生产了 $100$ 件货物，共有 $200$ 件货物，无法完成第 $2$ 笔订单。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9557", "type": "P", "difficulty": 4, "samples": [["2 2 1 1 2\n5\n1 3 1\n0\n2 1 1 2 1\n2 3 2 2 1\n3 1 5 2 3 3 4\n1 2 5\n3 2 1 1 1 3 4\n1 1 3\n0\n1 3 2", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "2023", "山东", "O2优化", "省赛/邀请赛"], "title": "[SDCPC 2023] Building Company", "background": "", "description": "You're the boss of a building company. At the beginning, there are $g$ types of employees in the company, and different types of employees have different occupations. For the $i$-th type of employees, their occupation can be numbered as $t_i$ and there are $u_i$ employees in total.\n\nThere are $n$ building projects in the market waiting to be undertaken. To undertake the $i$-th project, your company must meet $m_i$ requirements. The $j$-th requirement requires that your company has at least $b_{i, j}$ employees whose occupation is $a_{i, j}$. After undertaking the project, your company will become more famous and will attract $k_i$ types of employees to join your company. The occupation of the $j$-th type of employees is $c_{i, j}$ and there are $d_{i, j}$ employees in total.\n\nYou can undertake any number of projects in any order. Each project can be undertaken at most once. Calculate the maximum number of projects you can undertake.\n\nNote that employees are not consumables. After undertaking a project the number of employees in your company won't decrease.", "inputFormat": "There is only one test case in each test file.\n\nThe first line of the input first contains an integer $g$ ($1 \\le g \\le 10^5$) indicating the number of types of employees in the company at the beginning. Then $g$ pairs of integers $t_1, u_1, t_2, u_2, \\cdots t_g, u_g$ follow ($1 \\le t_i, u_i \\le 10^9$), where $t_i$ and $u_i$ indicate that there are $u_i$ employees whose occupation is $t_i$. It's guaranteed that for all $1 \\le i < j \\le g$ we have $t_i \\ne t_j$.\n\nThe second line contains an integer $n$ ($1 \\le n \\le 10^5$) indicating the number of projects waiting to be undertaken.\n\nFor the following $2n$ lines, each two lines describe a project.\n\nThe $(2i - 1)$-th line first contains an integer $m_i$ ($0 \\le m_i \\le 10^5$) indicating the number of requirements to undertake the $i$-th project. Then $m_i$ pairs of integers $a_{i, 1}, b_{i, 1}, a_{i, 2}, b_{i, 2}, \\cdots, a_{i, m_i}, b_{i, m_i}$ follow ($1 \\le a_{i, j}, b_{i, j} \\le 10^9$) where $a_{i, j}$ and $b_{i, j}$ indicate that the company is required to have at least $b_{i, j}$ employees whose occupation is $a_{i, j}$. It's guaranteed that for all $1 \\le x < y \\le m_i$ we have $a_{i, x} \\ne a_{i, y}$.\n\nThe $2i$-th line first contains an integer $k_i$ ($0 \\le k_i \\le 10^5$) indicating the number of types of employees to join the company after undertaking the $i$-th project. Then $k_i$ pairs of integers $c_{i, 1}, d_{i, 1}, c_{i, 2}, d_{i, 2}, \\cdots, c_{i, k_i}, d_{i, k_i}$ follow ($1 \\le c_{i, j}, d_{i, j} \\le 10^9$) where $c_{i, j}$ and $d_{i, j}$ indicate that there are $d_{i, j}$ employees whose occupation is $c_{i, j}$ joining the company. It's guaranteed that for all $1 \\le x < y \\le k_i$ we have $c_{i, x} \\ne c_{i, y}$.\n\nIt's guaranteed that neither the sum of $m_i$ nor the sum of $k_i$ will exceed $10^5$.", "outputFormat": "Output one line containing one integer indicating the maximum number of projects you can undertake.", "hint": "We explain the sample test case as follows. Let $(t, u)$ indicate $u$ employees whose occupation is $t$.\n\nFirst, undertake the $5$-th project with no requirements. After undertaking the project, there are $2$ employees, whose occupation is $3$, joining the company. The company now have these employees: $\\{(1, 2), (2, 1), (3, 2)\\}$.\n\nNext, undertake the $1$-st project. After undertaking the project, no employee joins the company. The company now still have these employees: $\\{(1, 2), (2, 1), (3, 2)\\}$.\n\nNext, undertake the $2$-nd project. After undertaking the project, there are $2$ employees, whose occupation is $3$, and $1$ employee, whose occupation is $2$, joining the company. The company now have these employees: $\\{(1, 2), (2, 2), (3, 4)\\}$.\n\nNext, undertake the $4$-th project. After undertaking the project, there are $3$ employees, whose occupation is $1$, joining the company. The company now have these employees: $\\{(1, 5), (2, 2), (3, 4)\\}$.\n\nAs the company does not have $3$ employees whose occupation is $2$, we cannot undertake the $3$-rd project.", "locale": "en", "translations": {"en": {"title": "[SDCPC 2023] Building Company", "background": "", "description": "You're the boss of a building company. At the beginning, there are $g$ types of employees in the company, and different types of employees have different occupations. For the $i$-th type of employees, their occupation can be numbered as $t_i$ and there are $u_i$ employees in total.\n\nThere are $n$ building projects in the market waiting to be undertaken. To undertake the $i$-th project, your company must meet $m_i$ requirements. The $j$-th requirement requires that your company has at least $b_{i, j}$ employees whose occupation is $a_{i, j}$. After undertaking the project, your company will become more famous and will attract $k_i$ types of employees to join your company. The occupation of the $j$-th type of employees is $c_{i, j}$ and there are $d_{i, j}$ employees in total.\n\nYou can undertake any number of projects in any order. Each project can be undertaken at most once. Calculate the maximum number of projects you can undertake.\n\nNote that employees are not consumables. After undertaking a project the number of employees in your company won't decrease.", "inputFormat": "There is only one test case in each test file.\n\nThe first line of the input first contains an integer $g$ ($1 \\le g \\le 10^5$) indicating the number of types of employees in the company at the beginning. Then $g$ pairs of integers $t_1, u_1, t_2, u_2, \\cdots t_g, u_g$ follow ($1 \\le t_i, u_i \\le 10^9$), where $t_i$ and $u_i$ indicate that there are $u_i$ employees whose occupation is $t_i$. It's guaranteed that for all $1 \\le i < j \\le g$ we have $t_i \\ne t_j$.\n\nThe second line contains an integer $n$ ($1 \\le n \\le 10^5$) indicating the number of projects waiting to be undertaken.\n\nFor the following $2n$ lines, each two lines describe a project.\n\nThe $(2i - 1)$-th line first contains an integer $m_i$ ($0 \\le m_i \\le 10^5$) indicating the number of requirements to undertake the $i$-th project. Then $m_i$ pairs of integers $a_{i, 1}, b_{i, 1}, a_{i, 2}, b_{i, 2}, \\cdots, a_{i, m_i}, b_{i, m_i}$ follow ($1 \\le a_{i, j}, b_{i, j} \\le 10^9$) where $a_{i, j}$ and $b_{i, j}$ indicate that the company is required to have at least $b_{i, j}$ employees whose occupation is $a_{i, j}$. It's guaranteed that for all $1 \\le x < y \\le m_i$ we have $a_{i, x} \\ne a_{i, y}$.\n\nThe $2i$-th line first contains an integer $k_i$ ($0 \\le k_i \\le 10^5$) indicating the number of types of employees to join the company after undertaking the $i$-th project. Then $k_i$ pairs of integers $c_{i, 1}, d_{i, 1}, c_{i, 2}, d_{i, 2}, \\cdots, c_{i, k_i}, d_{i, k_i}$ follow ($1 \\le c_{i, j}, d_{i, j} \\le 10^9$) where $c_{i, j}$ and $d_{i, j}$ indicate that there are $d_{i, j}$ employees whose occupation is $c_{i, j}$ joining the company. It's guaranteed that for all $1 \\le x < y \\le k_i$ we have $c_{i, x} \\ne c_{i, y}$.\n\nIt's guaranteed that neither the sum of $m_i$ nor the sum of $k_i$ will exceed $10^5$.", "outputFormat": "Output one line containing one integer indicating the maximum number of projects you can undertake.", "hint": "We explain the sample test case as follows. Let $(t, u)$ indicate $u$ employees whose occupation is $t$.\n\nFirst, undertake the $5$-th project with no requirements. After undertaking the project, there are $2$ employees, whose occupation is $3$, joining the company. The company now have these employees: $\\{(1, 2), (2, 1), (3, 2)\\}$.\n\nNext, undertake the $1$-st project. After undertaking the project, no employee joins the company. The company now still have these employees: $\\{(1, 2), (2, 1), (3, 2)\\}$.\n\nNext, undertake the $2$-nd project. After undertaking the project, there are $2$ employees, whose occupation is $3$, and $1$ employee, whose occupation is $2$, joining the company. The company now have these employees: $\\{(1, 2), (2, 2), (3, 4)\\}$.\n\nNext, undertake the $4$-th project. After undertaking the project, there are $3$ employees, whose occupation is $1$, joining the company. The company now have these employees: $\\{(1, 5), (2, 2), (3, 4)\\}$.\n\nAs the company does not have $3$ employees whose occupation is $2$, we cannot undertake the $3$-rd project.", "locale": "en"}, "zh-CN": {"title": "[SDCPC 2023] Building Company", "background": "", "description": "您是一家建筑公司的老板。一开始，公司共有 $g$ 类员工，每一类员工都属于一个工种。第 $i$ 类员工的工种编号为 $t_i$，共有 $u_i$ 人。\n\n市场上共有 $n$ 项工程等待承接。想要承接第 $i$ 项工程，您的公司需要满足 $m_i$ 项要求，其中第 $j$ 项要求您的公司至少有工种编号为 $a_{i, j}$ 的员工 $b_{i, j}$ 人。承接该工程后，您的公司将会更加有名，并吸引 $k_i$ 类员工加入公司，其中第 $j$ 类员工的工种编号为 $c_{i, j}$，共有 $d_{i, j}$ 人。\n\n您可以按任意顺序承接任意数量的工程，每项工程最多只能被承接一次。求最多能承接多少工程。\n\n请注意：员工不是消耗品。承接一项工程后，员工的数量不会减少。", "inputFormat": "每个测试文件仅有一组测试数据。\n\n第一行首先输入一个整数 $g$（$1 \\le g \\le 10^5$）表示一开始公司内员工的种类数。接下来输入 $g$ 对整数 $t_1, u_1, t_2, u_2, \\cdots t_g, u_g$（$1 \\le t_i, u_i \\le 10^9$），其中 $t_i$ 和 $u_i$ 表示一开始工种编号为 $t_i$ 的员工共有 $u_i$ 人。保证对于所有 $1 \\le i < j \\le g$ 有 $t_i \\ne t_j$。\n\n第二行输入一个整数 $n$（$1 \\le n \\le 10^5$）表示等待承接的工程数量。\n\n对于接下来 $2n$ 行，每两行描述一项工程。\n\n第 $(2i - 1)$ 行首先输入一个整数 $m_i$（$0 \\le m_i \\le 10^5$）表示承接第 $i$ 项工程有几项要求。接下来输入 $m_i$ 对整数 $a_{i, 1}, b_{i, 1}, a_{i, 2}, b_{i, 2}, \\cdots, a_{i, m_i}, b_{i, m_i}$（$1 \\le a_{i, j}, b_{i, j} \\le 10^9$），其中 $a_{i, j}$ 和 $b_{i, j}$ 表示公司至少要有工种编号为 $a_{i, j}$ 的员工 $b_{i, j}$ 人。保证对于所有 $1 \\le x < y \\le m_i$ 有 $a_{i, x} \\ne a_{i, y}$。\n\n第 $2i$ 行首先输入一个整数 $k_i$（$0 \\le k_i \\le 10^5$）表示承接第 $i$ 项工程之后有几类员工加入公司。接下来输入 $k_i$ 对整数  $c_{i, 1}, d_{i, 1}, c_{i, 2}, d_{i, 2}, \\cdots, c_{i, k_i}, d_{i, k_i}$（$1 \\le c_{i, j}, d_{i, j} \\le 10^9$），其中 $c_{i, j}$ 和 $d_{i, j}$ 表示工种编号为 $c_{i, j}$ 的员工共 $d_{i, j}$ 人加入公司。保证对于所有 $1 \\le x < y \\le k_i$ 有 $c_{i, x} \\ne c_{i, y}$。\n\n保证 $m_i$ 与 $k_i$ 之和均不超过 $10^5$。", "outputFormat": "输出一行一个整数表示最多能承接几项工程。\n\n**【样例解释】**\n\n样例解释如下，用 $(t, u)$ 表示工种为 $t$ 的员工有 $u$ 名。\n\n首先承接没有任何要求的第 $5$ 项工程，承接后工种为 $3$ 的 $2$ 名员工加入公司。公司内现有员工为 $\\{(1, 2), (2, 1), (3, 2)\\}$。\n\n接下来承接第 $1$ 项工程，承接后没有员工加入公司。公司内现有员工仍为 $\\{(1, 2), (2, 1), (3, 2)\\}$。\n\n接下来承接第 $2$ 项工程，承接后工种为 $3$ 的 $2$ 名员工，以及工种为 $2$ 的 $1$ 名员工加入公司。公司内现有员工为 $\\{(1, 2), (2, 2), (3, 4)\\}$。\n\n接下来承接第 $4$ 项工程，承接后工种为 $1$ 的 $3$ 名员工加入公司。公司内现有员工为 $\\{(1, 5), (2, 2), (3, 4)\\}$。\n\n由于工种为 $2$ 的员工不足 $3$ 名，因此无法承接仅剩的第 $3$ 项工程。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9558", "type": "P", "difficulty": 6, "samples": [["2\n5 4\n0 1 1 2 2\n1 4 3 5\n1 1\n0\n1", "abaab\na"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "山东", "O2优化", "省赛/邀请赛"], "title": "[SDCPC 2023] Trie", "background": "", "description": "Recall the definition of a trie:\n\n- A trie of size $n$ is a rooted tree with $n$ vertices and $(n - 1)$ edges, where each edge is marked with a character.\n- Each vertex in a trie represents a string. Let $s(x)$ be the string vertex $x$ represents.\n- The root of the trie represents an empty string. Let vertex $u$ be the parent of vertex $v$, and let $c$ be the character marked on the edge connecting vertex $u$ and $v$, we have $s(v) = s(u) + c$. Here $+$ indicates string concatenation, not the normal addition operation.\n- The string each vertex represents is distinct.\n\nWe now present you a rooted tree with $(n + 1)$ vertices. The vertices are numbered $0, 1, \\cdots, n$ and vertex $0$ is the root. There are $m$ key vertices in the tree where vertex $k_i$ is the $i$-th key vertex. It's guaranteed that all leaves are key vertices.\n\nPlease mark a lower-cased English letter on each edge so that the rooted tree changes into a trie of size $(n + 1)$. Let's consider the sequence $A = \\{s(k_1), s(k_2), \\cdots, s(k_m)\\}$ consisting of all strings represented by the key vertices. Let $B = \\{w_1, w_2, \\cdots, w_m\\}$ be the string sequence formed by sorting all strings in sequence $A$ from smallest to largest in lexicographic order. Please find a way to mark the edges so that sequence $B$ is minimized.\n\nWe say a string $P = p_1p_2\\cdots p_x$ of length $x$ is lexicographically smaller than a string $Q = q_1q_2\\cdots q_y$ of length $y$, if\n\n- $x < y$ and for all $1 \\le i \\le x$ we have $p_i = q_i$, or\n- there exists an integer $1 \\le t \\le \\min(x, y)$ such that for all $1 \\le i < t$ we have $p_i = q_i$, and $p_t < q_t$.\n\nWe say a string sequence $F = \\{f_1, f_2, \\cdots, f_m\\}$ of length $m$ is smaller than a string sequence $G = \\{g_1, g_2, \\cdots, g_m\\}$ of length $m$, if there exists an integer $1 \\le t \\le m$ such that for all $1 \\le i < t$ we have $f_i = g_i$, and $f_t$ is lexicographically smaller than $g_t$.", "inputFormat": "There are multiple test cases. The first line of th input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le m \\le n \\le 2 \\times 10^5$) indicating the number of vertices other than the root and the number of key vertices.\n\nThe second line contains $n$ integers $a_1, a_2, \\cdots, a_n$ ($0 \\le a_i < i$) where $a_i$ is the parent of vertex $i$. It's guaranteed that each vertex has at most $26$ children.\n\nThe third line contains $m$ integers $k_1, k_2, \\cdots, k_m$ ($1 \\le k_i \\le n$) where $k_i$ is the $i$-th key vertex. It's guaranteed that all leaves are key vertices, and all key vertices are distinct.\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $2 \\times 10^5$.", "outputFormat": "For each test case output one line containing one answer string $c_1c_2\\cdots c_n$ consisting of lower-cased English letters, where $c_i$ is the letter marked on the edge between $a_i$ and $i$. If there are multiple answers strings so that sequence $B$ is minimized, output the answer string with the smallest lexicographic order.", "hint": "The answer of the first sample test case is shown as follows.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zvhqplsb.png)\n\nThe string represented by vertex $1$ is ``a``. The string represented by vertex $4$ is ``aba``. The string represented by vertex $3$ is ``aa``. The string represented by vertex $5$ is ``abb``. So $B = \\{$``a``, ``aa``, ``aba``, ``abb``$\\}$.", "locale": "en", "translations": {"en": {"title": "[SDCPC 2023] Trie", "background": "", "description": "Recall the definition of a trie:\n\n- A trie of size $n$ is a rooted tree with $n$ vertices and $(n - 1)$ edges, where each edge is marked with a character.\n- Each vertex in a trie represents a string. Let $s(x)$ be the string vertex $x$ represents.\n- The root of the trie represents an empty string. Let vertex $u$ be the parent of vertex $v$, and let $c$ be the character marked on the edge connecting vertex $u$ and $v$, we have $s(v) = s(u) + c$. Here $+$ indicates string concatenation, not the normal addition operation.\n- The string each vertex represents is distinct.\n\nWe now present you a rooted tree with $(n + 1)$ vertices. The vertices are numbered $0, 1, \\cdots, n$ and vertex $0$ is the root. There are $m$ key vertices in the tree where vertex $k_i$ is the $i$-th key vertex. It's guaranteed that all leaves are key vertices.\n\nPlease mark a lower-cased English letter on each edge so that the rooted tree changes into a trie of size $(n + 1)$. Let's consider the sequence $A = \\{s(k_1), s(k_2), \\cdots, s(k_m)\\}$ consisting of all strings represented by the key vertices. Let $B = \\{w_1, w_2, \\cdots, w_m\\}$ be the string sequence formed by sorting all strings in sequence $A$ from smallest to largest in lexicographic order. Please find a way to mark the edges so that sequence $B$ is minimized.\n\nWe say a string $P = p_1p_2\\cdots p_x$ of length $x$ is lexicographically smaller than a string $Q = q_1q_2\\cdots q_y$ of length $y$, if\n\n- $x < y$ and for all $1 \\le i \\le x$ we have $p_i = q_i$, or\n- there exists an integer $1 \\le t \\le \\min(x, y)$ such that for all $1 \\le i < t$ we have $p_i = q_i$, and $p_t < q_t$.\n\nWe say a string sequence $F = \\{f_1, f_2, \\cdots, f_m\\}$ of length $m$ is smaller than a string sequence $G = \\{g_1, g_2, \\cdots, g_m\\}$ of length $m$, if there exists an integer $1 \\le t \\le m$ such that for all $1 \\le i < t$ we have $f_i = g_i$, and $f_t$ is lexicographically smaller than $g_t$.", "inputFormat": "There are multiple test cases. The first line of th input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le m \\le n \\le 2 \\times 10^5$) indicating the number of vertices other than the root and the number of key vertices.\n\nThe second line contains $n$ integers $a_1, a_2, \\cdots, a_n$ ($0 \\le a_i < i$) where $a_i$ is the parent of vertex $i$. It's guaranteed that each vertex has at most $26$ children.\n\nThe third line contains $m$ integers $k_1, k_2, \\cdots, k_m$ ($1 \\le k_i \\le n$) where $k_i$ is the $i$-th key vertex. It's guaranteed that all leaves are key vertices, and all key vertices are distinct.\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $2 \\times 10^5$.", "outputFormat": "For each test case output one line containing one answer string $c_1c_2\\cdots c_n$ consisting of lower-cased English letters, where $c_i$ is the letter marked on the edge between $a_i$ and $i$. If there are multiple answers strings so that sequence $B$ is minimized, output the answer string with the smallest lexicographic order.", "hint": "The answer of the first sample test case is shown as follows.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zvhqplsb.png)\n\nThe string represented by vertex $1$ is ``a``. The string represented by vertex $4$ is ``aba``. The string represented by vertex $3$ is ``aa``. The string represented by vertex $5$ is ``abb``. So $B = \\{$``a``, ``aa``, ``aba``, ``abb``$\\}$.", "locale": "en"}, "zh-CN": {"title": "[SDCPC 2023] Trie", "background": "", "description": "请回忆字典树的定义：\n\n- 一棵大小为 $n$ 的字典树是一棵有 $n$ 个节点和 $(n - 1)$ 条边的有根树，每一条边都标有一个字符。\n- 字典树中的每个节点都代表一个字符串，令 $s(x)$ 表示节点 $x$ 代表的字符串。\n- 字典树的根代表的是空字符串。设节点 $u$ 为节点 $v$ 的父节点，设 $c$ 表示节点 $u$ 和 $v$ 之间的边上标有的字符，则 $s(v) = s(u) + c$。这里的 $+$ 代表字符串连接，而不是普通的加法。\n- 所有节点代表的字符串互不相同。\n\n给定一棵有 $(n + 1)$ 个节点的有根树，节点编号为 $0, 1, \\cdots, n$，其中节点 $0$ 是根节点。树上共有 $m$ 个关键节点，其中第 $i$ 个关键节点的编号为 $k_i$。保证所有叶子节点都是关键节点。\n\n请为每一条边标上一个小写字母，使得这棵有根树变为一棵大小为 $(n + 1)$ 的字典树。考虑所有关键节点代表的字符串构成的序列 $A = \\{s(k_1), s(k_2), \\cdots, s(k_m)\\}$，设 $B = \\{w_1, w_2, \\cdots, w_m\\}$ 是由序列 $A$ 中所有字符串按字典序从小到大排序后得到的字符串序列，您需要找到一个标记字母的方案，使得序列 $B$ 最小。\n\n称长度为 $x$ 的字符串 $P = p_1p_2\\cdots p_x$ 的字典序小于长度为 $y$ 的字符串 $Q = q_1q_2\\cdots q_y$，若\n\n- $x < y$ 且对于所有 $1 \\le i \\le x$ 有 $p_i = q_i$，或者\n- 存在一个整数 $1 \\le t \\le \\min(x, y)$，对于所有 $1 \\le i < t$ 有 $p_i = q_i$，且 $p_t < q_t$。\n\n称长度为 $m$ 的字符串序列 $F = \\{f_1, f_2, \\cdots, f_m\\}$ 小于长度为 $m$ 的字符串序列 $G = \\{g_1, g_2, \\cdots, g_m\\}$，若存在一个整数 $1 \\le t \\le m$，对于所有 $1 \\le i < t$ 有 $f_i = g_i$，且 $f_t$ 的字典序小于 $g_t$ 的字典序。", "inputFormat": "有多组测试数据。第一行输入一个整数 $T$ 表示测试数据组数。对于每组测试数据：\n\n第一行输入两个正整数 $n$ 和 $m$（$1 \\le m \\le n \\le 2 \\times 10^5$）表示除了根节点以外的节点数量和关键节点的数量。\n\n第二行输入 $n$ 个整数 $a_1, a_2, \\cdots, a_n$（$0 \\le a_i < i$），其中 $a_i$ 代表节点 $i$ 的父节点。保证每个节点至多有 $26$ 个子节点。\n\n第三行输入 $m$ 个整数 $k_1, k_2, \\cdots, k_m$（$1 \\le k_i \\le n$），其中 $k_i$ 代表第 $i$ 个关键节点的编号。保证所有叶子节点都是关键节点，且没有重复的关键节点。\n\n保证所有测试数据 $n$ 之和不超过 $2 \\times 10^5$。", "outputFormat": "每组数据输出一行一个由小写字母组成的答案字符串 $c_1c_2\\cdots c_n$，其中 $c_i$ 表示节点 $a_i$ 到 $i$ 的边上标有的小写字母。若有多种答案字符串使得字符串序列 $B$ 最小，请输出字典序最小的答案字符串。\n\n**【样例解释】**\n\n第一组样例数据的答案如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zvhqplsb.png)\n\n其中，节点 $1$ 代表的字符串为 ``a``，节点 $4$ 代表的字符串为 ``aba``，节点 $3$ 代表的字符串为 ``aa``，节点 $5$ 代表的字符串为 ``abb``。因此 $B = \\{$``a``, ``aa``, ``aba``, ``abb``$\\}$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9559", "type": "P", "difficulty": 3, "samples": [["2\n5\n10 5\n1 102\n10 100\n7 4\n9 50\n2\n1 100\n10 1", "8\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "二分", "2023", "山东", "O2优化", "省赛/邀请赛"], "title": "[SDCPC 2023] Fast and Fat", "background": "", "description": "You're participating in a team competition of trail running. There are $n$ members in your team where $v_i$ is the speed of the $i$-th member and $w_i$ is his/her weight.\n\nThe competition allows each team member to move alone or carry another team member on their back. When member $i$ carries member $j$, if member $i$'s weight is greater than or equal to member $j$'s weight, member $i$'s speed remains unchanged at $v_i$. However, if member $i$'s weight is less than member $j$'s weight, member $i$'s speed will decrease by the difference of their weight and becomes $v_i - (w_j - w_i)$. If member $i$'s speed will become negative, then member $i$ is not able to carry member $j$. Each member can only carry at most one other member. If a member is being carried, he/she cannot carry another member at the same time.\n\nFor all members not being carried, the speed of the slowest member is the speed of the whole team. Find the maximum possible speed of the whole team.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($1 \\le n \\le 10^5$) indicating the number of team members.\n\nFor the following $n$ lines, the $i$-th line contains two integers $v_i$ and $w_i$ ($1 \\le v_i, w_i \\le 10^9$) indicating the speed and weight of the $i$-th member.\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $10^5$.", "outputFormat": "For each test case output one line containing one integer indicating the maximum speed of the whole team.", "hint": "The optimal strategy for the sample test case is shown as follows:\n\n- Let member $1$ carry member $4$. As $w_1 > w_4$, member $1$'s speed remains unchanged, which is still $10$.\n- Let member $3$ carry member $2$. As $w_3 < w_2$, member $3$'s speed will decrease by $w_2 - w_3 = 2$ and becomes $10 - 2 = 8$.\n- Member $5$ shall move alone. His/Her speed is $9$.\n\nSo the answer is $8$.", "locale": "en", "translations": {"en": {"title": "[SDCPC 2023] Fast and Fat", "background": "", "description": "You're participating in a team competition of trail running. There are $n$ members in your team where $v_i$ is the speed of the $i$-th member and $w_i$ is his/her weight.\n\nThe competition allows each team member to move alone or carry another team member on their back. When member $i$ carries member $j$, if member $i$'s weight is greater than or equal to member $j$'s weight, member $i$'s speed remains unchanged at $v_i$. However, if member $i$'s weight is less than member $j$'s weight, member $i$'s speed will decrease by the difference of their weight and becomes $v_i - (w_j - w_i)$. If member $i$'s speed will become negative, then member $i$ is not able to carry member $j$. Each member can only carry at most one other member. If a member is being carried, he/she cannot carry another member at the same time.\n\nFor all members not being carried, the speed of the slowest member is the speed of the whole team. Find the maximum possible speed of the whole team.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($1 \\le n \\le 10^5$) indicating the number of team members.\n\nFor the following $n$ lines, the $i$-th line contains two integers $v_i$ and $w_i$ ($1 \\le v_i, w_i \\le 10^9$) indicating the speed and weight of the $i$-th member.\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $10^5$.", "outputFormat": "For each test case output one line containing one integer indicating the maximum speed of the whole team.", "hint": "The optimal strategy for the sample test case is shown as follows:\n\n- Let member $1$ carry member $4$. As $w_1 > w_4$, member $1$'s speed remains unchanged, which is still $10$.\n- Let member $3$ carry member $2$. As $w_3 < w_2$, member $3$'s speed will decrease by $w_2 - w_3 = 2$ and becomes $10 - 2 = 8$.\n- Member $5$ shall move alone. His/Her speed is $9$.\n\nSo the answer is $8$.", "locale": "en"}, "zh-CN": {"title": "[SDCPC 2023] Fast and Fat", "background": "", "description": "您正在参加一场团体越野比赛。您的队伍共有 $n$ 名队员，其中第 $i$ 名队员的速度为 $v_i$，体重为 $w_i$。\n\n比赛允许每名队员独立行动，也允许一名队员背着另一名队员一起行动。当队员 $i$ 背着队员 $j$ 时，如果队员 $i$ 的体重大于等于队员 $j$，则队员 $i$ 的移动速度不会变化，仍然为 $v_i$；如果队员 $i$ 的体重小于队员 $j$，则队员 $i$ 的移动速度会减去两者的体重差值，即变为 $v_i - (w_j - w_i)$。如果队员 $i$ 的移动速度将变为负数，则队员 $i$ 无法背起队员 $j$。每名队员最多只能背负另一名队员，被背负的队员无法同时背负其他队员。\n\n所有未被背负的队员中，最慢的队员的速度，即为整个队伍的速度。求整个队伍能达到的最大速度。", "inputFormat": "有多组测试数据。第一行输入一个整数 $T$ 表示测试数据组数，对于每组测试数据：\n\n第一行输入一个整数 $n$（$1 \\le n \\le 10^5$）表示队员人数。\n\n对于接下来 $n$ 行，第 $i$ 行输入两个整数 $v_i$ 和 $w_i$（$1 \\le v_i, w_i \\le 10^9$）表示第 $i$ 名队员的速度和体重。\n\n保证所有数据中 $n$ 之和不超过 $10^5$。", "outputFormat": "每组数据输出一个整数，表示整个队伍可以达到的最大速度。\n\n**【样例解释】**\n\n样例数据的最优策略如下：\n\n- 队员 $1$ 背起队员 $4$。因为 $w_1 > w_4$，因此队员 $1$ 速度不变，仍然为 $10$。\n- 队员 $3$ 背起队员 $2$。因为 $w_3 < w_2$，因此队员 $3$ 的速度减少 $w_2 - w_3 = 2$，即速度变为 $10 - 2 = 8$。\n- 队员 $5$ 独立行动，速度为 $9$。\n\n因此答案为 $8$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9560", "type": "P", "difficulty": 4, "samples": [["4\n101 4 207 3 5\n8 3 16 100 1\n114 514 19 19 810\n1 1 3 1 1", "11\n2\n0\n-1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "2023", "山东", "O2优化", "省赛/邀请赛"], "title": "[SDCPC 2023] Math Problem", "background": "", "description": "Given two positive integers $n$ and $k$, you can perform the following two types of operations any number of times (including zero times):\n\n- Choose an integer $x$ which satisfies $0 \\leq x < k$, and change $n$ into $k\\cdot n+x$. It will cost you $a$ coins to perform this operation once. The integer $x$ you choose each time can be different.\n- Change $n$ into $\\lfloor \\frac{n}{k} \\rfloor$. It will cost you $b$ coins to perform this operation once. Note that $\\lfloor \\frac{n}{k} \\rfloor$ is the largest integer which is less than or equal to $\\frac{n}{k}$.\n\nGiven a positive integer $m$, calculate the minimum number of coins needed to change $n$ into a multiple of $m$. Please note that $0$ is a multiple of any positive integer.\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1\\leq T\\leq 10^5$) indicating the number of test cases. For each test case:\n\nThe first line contains five integers $n$, $k$, $m$, $a$, $b$ ($1\\leq n\\leq 10^{18}$, $1\\leq k, m, a, b\\leq 10^9$).", "outputFormat": "For each test case output one line containing one integer, indicating the minimum number of coins needed to change $n$ into a multiple of $m$. If this goal cannot be achieved, output $-1$ instead.", "hint": "For the first sample test case, initially $n=101$. The optimal steps are shown as follows:\n\n- Firstly, perform the second type of operation once. Change $n$ into $\\lfloor \\frac{n}{4} \\rfloor=25$. This step costs $5$ coins.\n- Then, perform the first type of operation once. Choose $x = 3$ and change $n$ into $4\\cdot n+3=103$. This step costs $3$ coins.\n- Then, perform the first type of operation once. Choose $x = 2$ and change $n$ into $4\\cdot n+2=414$. This step costs $3$ coins.\n- As $414=2 \\times 207$, $n$ is a multiple of $m$. The total cost is $5+3+3=11$ coins.\n\nFor the second sample test case, perform the second type of operation twice will change $n$ into $0$. The total cost is $1 + 1 = 2$ coins.\n\nFor the third sample test case, as $n = 114 = 6 \\times 19$ is already a multiple of $m$, no operation is needed. The total cost is $0$ coins.", "locale": "en", "translations": {"en": {"title": "[SDCPC 2023] Math Problem", "background": "", "description": "Given two positive integers $n$ and $k$, you can perform the following two types of operations any number of times (including zero times):\n\n- Choose an integer $x$ which satisfies $0 \\leq x < k$, and change $n$ into $k\\cdot n+x$. It will cost you $a$ coins to perform this operation once. The integer $x$ you choose each time can be different.\n- Change $n$ into $\\lfloor \\frac{n}{k} \\rfloor$. It will cost you $b$ coins to perform this operation once. Note that $\\lfloor \\frac{n}{k} \\rfloor$ is the largest integer which is less than or equal to $\\frac{n}{k}$.\n\nGiven a positive integer $m$, calculate the minimum number of coins needed to change $n$ into a multiple of $m$. Please note that $0$ is a multiple of any positive integer.\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1\\leq T\\leq 10^5$) indicating the number of test cases. For each test case:\n\nThe first line contains five integers $n$, $k$, $m$, $a$, $b$ ($1\\leq n\\leq 10^{18}$, $1\\leq k, m, a, b\\leq 10^9$).", "outputFormat": "For each test case output one line containing one integer, indicating the minimum number of coins needed to change $n$ into a multiple of $m$. If this goal cannot be achieved, output $-1$ instead.", "hint": "For the first sample test case, initially $n=101$. The optimal steps are shown as follows:\n\n- Firstly, perform the second type of operation once. Change $n$ into $\\lfloor \\frac{n}{4} \\rfloor=25$. This step costs $5$ coins.\n- Then, perform the first type of operation once. Choose $x = 3$ and change $n$ into $4\\cdot n+3=103$. This step costs $3$ coins.\n- Then, perform the first type of operation once. Choose $x = 2$ and change $n$ into $4\\cdot n+2=414$. This step costs $3$ coins.\n- As $414=2 \\times 207$, $n$ is a multiple of $m$. The total cost is $5+3+3=11$ coins.\n\nFor the second sample test case, perform the second type of operation twice will change $n$ into $0$. The total cost is $1 + 1 = 2$ coins.\n\nFor the third sample test case, as $n = 114 = 6 \\times 19$ is already a multiple of $m$, no operation is needed. The total cost is $0$ coins.", "locale": "en"}, "zh-CN": {"title": "[SDCPC 2023] Math Problem", "background": "", "description": "给定两个正整数 $n$ 和 $k$，您可以进行以下两种操作任意次（包括零次）：\n\n- 选择一个整数 $x$ 满足 $0 \\leq x < k$，将 $n$ 变为 $k\\cdot n+x$。该操作每次花费 $a$ 枚金币。每次选择的整数 $x$ 可以不同。\n- 将 $n$ 变为 $\\lfloor \\frac{n}{k} \\rfloor$。该操作每次花费 $b$ 枚金币。其中 $\\lfloor \\frac{n}{k} \\rfloor$ 表示小于等于 $\\frac{n}{k}$ 的最大整数。\n\n给定正整数 $m$，求将 $n$ 变为 $m$ 的倍数最少需要花费几枚金币。请注意：$0$ 是任何正整数的倍数。", "inputFormat": "有多组测试数据。第一行输入一个整数 $T$（$1\\leq T\\leq 10^5$）表示测试数据组数。对于每组测试数据：\n\n第一行输入五个正整数 $n$，$k$，$m$，$a$，$b$（$1\\leq n\\leq 10^{18}$，$1\\leq k, m, a, b\\leq 10^9$）。", "outputFormat": "每组数据输出一行一个整数，代表将 $n$ 变为 $m$ 的倍数最少需要花费几枚金币。如果无法完成该目标，输出 $-1$。\n\n**【样例解释】**\n\n对于第一组样例数据，一开始 $n=101$，最优操作如下：\n\n- 首先进行一次第二种操作，将 $n$ 变为 $\\lfloor \\frac{n}{4} \\rfloor=25$，花费 $5$ 枚金币。\n- 接下来进行一次第一种操作，选择 $x = 3$，将 $n$ 变为 $4\\cdot n+3=103$，花费 $3$ 枚金币。\n- 接下来进行一次第一种操作，选择 $x = 2$，将 $n$ 变为 $4\\cdot n+2=414$，花费 $3$ 枚金币。\n- 此时 $414=2 \\times 207$，满足 $n$ 是 $m$ 的倍数。共花费 $5+3+3=11$ 枚金币。\n\n对于第二组样例数据，进行两次第二种操作将 $n$ 变为 $0$。共花费 $1 + 1 = 2$ 枚金币。\n\n对于第三组样例数据，因为 $n = 114 = 6 \\times 19$ 已经是 $m$ 的倍数，因此无需进行任何操作。共花费 $0$ 枚金币。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9561", "type": "P", "difficulty": 5, "samples": [["2\n3\n1 5 0\n3 6 1\n4 7 0\n3\n1 5 0\n7 9 1\n3 6 0", "5\n8"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "线段树", "2023", "山东", "O2优化", "省赛/邀请赛"], "title": "[SDCPC 2023] Colorful Segments", "background": "", "description": "Consider $n$ segments on the number axis, where the left endpoint of the $i$-th segment is $l_i$ and the right endpoint is $r_i$. Each segment has a color where the color of the $i$-th segment is $c_i$ ($0 \\le c_i \\le 1$). There are two types of colors, where $c_i = 0$ indicates a red segment and $c_i = 1$ indicates a blue segment.\n\nYou need to choose some segments (you can also choose no segments at all). If any two chosen segments overlap, then they must have the same color.\n\nCalculate the number of ways to choose segments.\n\nWe say segment $i$ overlaps with segment $j$, if there exists a real number $x$ satisfying both $l_i \\le x \\le r_i$ and $l_j \\le x \\le r_j$.\n\nWe say two ways of choosing segments are different, if there exists an integer $1 \\le k \\le n$ such that the $k$-th segment is chosen in one of the ways and is not chosen in the other.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($1 \\le n \\le 10^5$) indicating the number of segments.\n\nFor the following $n$ lines, the $i$-th line contains three integers $l_i$, $r_i$ and $c_i$ ($1 \\le l_i \\le r_i \\le 10^9$, $0 \\le c_i \\le 1$) indicating the left and right endpoints and the color of the $i$-th segment.\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $5 \\times 10^5$.", "outputFormat": "For each test case output one line containing one integer indicating the number of ways to choose segments. As the answer may be large, please output the answer modulo $998244353$.\n", "hint": "For the first sample test case, you cannot choose the $1$-st and the $2$-nd segment, or the $2$-nd and the $3$-rd segment at the same time, because they overlap with each other and have different colors.\n\nFor the second sample test case, as the $2$-nd segment does not overlap with the $1$-st and the $3$-rd segment, you can choose them arbitrary.", "locale": "en", "translations": {"en": {"title": "[SDCPC 2023] Colorful Segments", "background": "", "description": "Consider $n$ segments on the number axis, where the left endpoint of the $i$-th segment is $l_i$ and the right endpoint is $r_i$. Each segment has a color where the color of the $i$-th segment is $c_i$ ($0 \\le c_i \\le 1$). There are two types of colors, where $c_i = 0$ indicates a red segment and $c_i = 1$ indicates a blue segment.\n\nYou need to choose some segments (you can also choose no segments at all). If any two chosen segments overlap, then they must have the same color.\n\nCalculate the number of ways to choose segments.\n\nWe say segment $i$ overlaps with segment $j$, if there exists a real number $x$ satisfying both $l_i \\le x \\le r_i$ and $l_j \\le x \\le r_j$.\n\nWe say two ways of choosing segments are different, if there exists an integer $1 \\le k \\le n$ such that the $k$-th segment is chosen in one of the ways and is not chosen in the other.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($1 \\le n \\le 10^5$) indicating the number of segments.\n\nFor the following $n$ lines, the $i$-th line contains three integers $l_i$, $r_i$ and $c_i$ ($1 \\le l_i \\le r_i \\le 10^9$, $0 \\le c_i \\le 1$) indicating the left and right endpoints and the color of the $i$-th segment.\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $5 \\times 10^5$.", "outputFormat": "For each test case output one line containing one integer indicating the number of ways to choose segments. As the answer may be large, please output the answer modulo $998244353$.\n", "hint": "For the first sample test case, you cannot choose the $1$-st and the $2$-nd segment, or the $2$-nd and the $3$-rd segment at the same time, because they overlap with each other and have different colors.\n\nFor the second sample test case, as the $2$-nd segment does not overlap with the $1$-st and the $3$-rd segment, you can choose them arbitrary.", "locale": "en"}, "zh-CN": {"title": "[SDCPC 2023] Colorful Segments", "background": "", "description": "考虑数轴上的 $n$ 条线段，其中第 $i$ 条线段的左端点为 $l_i$，右端点为 $r_i$。每一条线段都被涂上了颜色，其中第 $i$ 条线段的颜色为 $c_i$（$0 \\le c_i \\le 1$）。颜色共有两种，$c_i = 0$ 代表一条红色的线段，而 $c_i = 1$ 代表一条蓝色的线段。\n\n您需要选择若干条线段（可以不选择任何线段）。如果您选择的任意两条线段有重合，则这两条线段的颜色必须相同。\n\n求选择线段的不同方案数。\n\n称第 $i$ 条线段和第 $j$ 条线段有重合，若存在一个实数 $x$ 同时满足 $l_i \\le x \\le r_i$ 且 $l_j \\le x \\le r_j$。\n\n称两种选择线段的方案是不同的，若存在一个整数 $1 \\le k \\le n$，满足第 $k$ 条线段在其中一个方案中被选择，而在另一个方案中没有被选择。", "inputFormat": "有多组测试数据。第一行输入一个整数 $T$ 表示测试数据组数。对于每组测试数据：\n\n第一行输入一个整数 $n$（$1 \\le n \\le 10^5$）表示线段的数量。\n\n对于接下来 $n$ 行，第 $i$ 行输入三个整数 $l_i$，$r_i$ 和 $c_i$（$1 \\le l_i \\le r_i \\le 10^9$，$0 \\le c_i \\le 1$）表示第 $i$ 条线段的左右端点以及颜色。\n\n保证所有数据 $n$ 之和不超过 $5 \\times 10^5$。", "outputFormat": "每组数据输出一行一个整数表示选择线段的不同方案数。由于答案可能很大，请将答案对 $998244353$ 取模后输出。\n\n**【样例解释】**\n\n对于第一组样例数据，您不能同时选择第 $1$ 和第 $2$ 条线段，也不能同时选择第 $2$ 和第 $3$ 条线段，因为它们有重合且颜色不同。\n\n对于第二组样例数据，因为第 $2$ 条线段与第 $1$ 和第 $3$ 条线段都不重合，因此您可以任意选择线段。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9562", "type": "P", "difficulty": 3, "samples": [["3\n9\n3 -5 5 6 7 -1 9 1 2\n3\n-5 -4 -3\n3\n1 10 100\n", "30\n0\n0\n"]], "limits": {"time": [1000, 1000], "memory": [1048576, 1048576]}, "tags": ["贪心", "2023", "山东", "O2优化", "省赛/邀请赛"], "title": "[SDCPC 2023] Matching", "background": "", "description": "Given an integer sequence $a_1, a_2, \\cdots, a_n$ of length $n$, we construct an undirected graph $G$ from the sequence. More precisely, for all $1 \\le i < j \\le n$, if $i - j = a_i - a_j$, there will be an undirected edge in $G$ connecting vertices $i$ and $j$. The weight of the edge is $(a_i + a_j)$.\n\nFind a matching of $G$ so that the sum of weight of all edges in the matching is maximized, and output this maximized sum.\n\nRecall that a matching of an undirected graph means that we choose some edges from the graph such that any two edges have no common vertices. Specifically, not choosing any edge is also a matching.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($2 \\le n \\le 10^5$) indicating the length of the sequence.\n\nThe second line contains $n$ integers $a_1, a_2, \\cdots, a_n$ ($-10^9 \\le a_i \\le 10^9$) indicating the sequence.\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $5 \\times 10^5$.", "outputFormat": "For each test case output one line containing one integer indicating the maximum sum of weight of all edges in a matching.", "hint": "For the first sample test case, the optimal choice is to choose the three edges connecting vertex $3$ and $5$, vertex $4$ and $7$, and finally vertex $8$ and $9$. The sum of weight is $(5 + 7) + (6 + 9) + (1 + 2) = 30$.\n\nFor the second sample test case, as all edges have negative weights, the optimal matching should not choose any edge. The answer is $0$.\n\nFor the third sample test case, as there is no edge in the graph, the answer is $0$.", "locale": "en", "translations": {"en": {"title": "[SDCPC 2023] Matching", "background": "", "description": "Given an integer sequence $a_1, a_2, \\cdots, a_n$ of length $n$, we construct an undirected graph $G$ from the sequence. More precisely, for all $1 \\le i < j \\le n$, if $i - j = a_i - a_j$, there will be an undirected edge in $G$ connecting vertices $i$ and $j$. The weight of the edge is $(a_i + a_j)$.\n\nFind a matching of $G$ so that the sum of weight of all edges in the matching is maximized, and output this maximized sum.\n\nRecall that a matching of an undirected graph means that we choose some edges from the graph such that any two edges have no common vertices. Specifically, not choosing any edge is also a matching.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($2 \\le n \\le 10^5$) indicating the length of the sequence.\n\nThe second line contains $n$ integers $a_1, a_2, \\cdots, a_n$ ($-10^9 \\le a_i \\le 10^9$) indicating the sequence.\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $5 \\times 10^5$.", "outputFormat": "For each test case output one line containing one integer indicating the maximum sum of weight of all edges in a matching.", "hint": "For the first sample test case, the optimal choice is to choose the three edges connecting vertex $3$ and $5$, vertex $4$ and $7$, and finally vertex $8$ and $9$. The sum of weight is $(5 + 7) + (6 + 9) + (1 + 2) = 30$.\n\nFor the second sample test case, as all edges have negative weights, the optimal matching should not choose any edge. The answer is $0$.\n\nFor the third sample test case, as there is no edge in the graph, the answer is $0$.", "locale": "en"}, "zh-CN": {"title": "[SDCPC 2023] Matching", "background": "", "description": "给定长度为 $n$ 的整数序列 $a_1, a_2, \\cdots, a_n$，我们将从该序列中构造出一张无向图 $G$。具体来说，对于所有 $1 \\le i < j \\le n$，若 $i - j = a_i - a_j$，则 $G$ 中将存在一条连接节点 $i$ 与 $j$ 的无向边，其边权为 $(a_i + a_j)$。\n\n求 $G$ 的一个匹配，使得该匹配中所有边的边权之和最大，并输出最大边权之和。\n\n请回忆：无向图的匹配，指的是从该无向图中选出一些边，使得任意两条边都没有公共的节点。特别地，不选任何边也是一个匹配。", "inputFormat": "有多组测试数据。第一行输入一个整数 $T$ 表示测试数据组数。对于每组测试数据：\n\n第一行输入一个整数 $n$（$2 \\le n \\le 10^5$）表示序列的长度。\n\n第二行输入 $n$ 个整数 $a_1, a_2, \\cdots, a_n$（$-10^9 \\le a_i \\le 10^9$）表示序列。\n\n保证所有数据中 $n$ 之和不超过 $5 \\times 10^5$。", "outputFormat": "每组数据输出一行一个整数，表示匹配的最大边权之和。\n\n**【样例解释】**\n\n对于第一组样例数据，最优方案是选择连接节点 $3$ 和 $5$，节点 $4$ 和 $7$，以及节点 $8$ 和 $9$ 的三条边，边权之和为 $(5 + 7) + (6 + 9) + (1 + 2) = 30$。\n\n对于第二组样例数据，由于每条边的边权都是负数，因此最优匹配不应该选择任何边，答案为 $0$。\n\n对于第三组样例数据，由于图中不存在任何边，因此答案为 $0$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9563", "type": "P", "difficulty": 7, "samples": [["3 3 1\n2 2\n", "21\n"], ["5 5 2\n2 1\n2 4\n", "126\n"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "山东", "O2优化", "容斥原理", "省赛/邀请赛"], "title": "[SDCPC 2023] Be Careful 2", "background": "", "description": "Little Cyan Fish has an $n \\times m$ rectangle located in a plane. The top-right corner of the rectangle is at $(n, m)$, while the bottom-left corner is at $(0, 0)$. There are $k$ banned points inside the rectangle. The $i$-th banned point is located at $(x_i, y_i)$.\n\nLittle Cyan Fish would like to draw a square inside the rectangle. However, he dislikes all the banned points, so there cannot be any banned points inside his square. Formally, Little Cyan Fish can draw a square with the bottom-left corner at $(x, y)$ and a side length $d$ if and only if:\n\n- Both $x$ and $y$ are non-negative integers while $d$ is a positive integer.\n- $0 \\leq x < x+d \\leq n$.\n- $0 \\leq y < y+d \\leq m$.\n- For each $1 \\leq i \\leq k$, the following condition must **NOT** be met:\n  - $x < x_i < x+d$ and $y < y_i < y+d$.\n\nPlease calculate the sum of the areas of all the squares that Little Cyan Fish can possibly draw. Since the answer could be huge, you need to output it modulo $998244353$.", "inputFormat": "The is only one test case in each test file.\n\nThe first line of the input contains three integers $n$, $m$ and $k$ ($2 \\leq n,m \\leq 10^9$, $1 \\leq k \\leq 5 \\times 10^3$) indicating the size of the rectangle and the number of banned points.\n\nFor the following $k$ lines, the $i$-th line contains two integers $x_i$ and $y_i$ ($0 < x_i < n$, $0 < y_i < m$) indicating the position of the $i$-th banned point. It is guaranteed that all the banned points are distinct.", "outputFormat": "Output one line containing one integer indicating the answer modulo $998244353$.", "hint": "For the first sample test case, Little Cyan Fish has $12$ ways to draw a square, illustrated as follows.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ineydu5.png)\n\nThere are $9$ squares of side length $1$ and $3$ squares of side length $2$. So the answer is $9 \\times 1^2 + 3 \\times 2^2 = 21$.\n\nNote that the following plans are invalid since there's a banned point in the square.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qgn1qs0h.png)", "locale": "en", "translations": {"en": {"title": "[SDCPC 2023] Be Careful 2", "background": "", "description": "Little Cyan Fish has an $n \\times m$ rectangle located in a plane. The top-right corner of the rectangle is at $(n, m)$, while the bottom-left corner is at $(0, 0)$. There are $k$ banned points inside the rectangle. The $i$-th banned point is located at $(x_i, y_i)$.\n\nLittle Cyan Fish would like to draw a square inside the rectangle. However, he dislikes all the banned points, so there cannot be any banned points inside his square. Formally, Little Cyan Fish can draw a square with the bottom-left corner at $(x, y)$ and a side length $d$ if and only if:\n\n- Both $x$ and $y$ are non-negative integers while $d$ is a positive integer.\n- $0 \\leq x < x+d \\leq n$.\n- $0 \\leq y < y+d \\leq m$.\n- For each $1 \\leq i \\leq k$, the following condition must **NOT** be met:\n  - $x < x_i < x+d$ and $y < y_i < y+d$.\n\nPlease calculate the sum of the areas of all the squares that Little Cyan Fish can possibly draw. Since the answer could be huge, you need to output it modulo $998244353$.", "inputFormat": "The is only one test case in each test file.\n\nThe first line of the input contains three integers $n$, $m$ and $k$ ($2 \\leq n,m \\leq 10^9$, $1 \\leq k \\leq 5 \\times 10^3$) indicating the size of the rectangle and the number of banned points.\n\nFor the following $k$ lines, the $i$-th line contains two integers $x_i$ and $y_i$ ($0 < x_i < n$, $0 < y_i < m$) indicating the position of the $i$-th banned point. It is guaranteed that all the banned points are distinct.", "outputFormat": "Output one line containing one integer indicating the answer modulo $998244353$.", "hint": "For the first sample test case, Little Cyan Fish has $12$ ways to draw a square, illustrated as follows.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ineydu5.png)\n\nThere are $9$ squares of side length $1$ and $3$ squares of side length $2$. So the answer is $9 \\times 1^2 + 3 \\times 2^2 = 21$.\n\nNote that the following plans are invalid since there's a banned point in the square.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qgn1qs0h.png)", "locale": "en"}, "zh-CN": {"title": "[SDCPC 2023] Be Careful 2", "background": "", "description": "小青鱼有一个位于二维平面上的，大小为 $n \\times m$ 的矩形。矩形的右上角位于 $(n, m)$，而左下角位于 $(0, 0)$。矩形内部有 $k$ 个禁止点，第 $i$ 个禁止点位于 $(x_i, y_i)$。\n\n小青鱼想在矩形里画一个正方形。但由于小青鱼不喜欢禁止点，因此正方形的内部不能有任何禁止点。更正式地，小青鱼可以画一个左下角位于 $(x, y)$ 且边长为 $d$ 的正方形，当且仅当：\n\n- $x$ 和 $y$ 都是非负整数，$d$ 是一个正整数。\n- $0 \\leq x < x+d \\leq n$。\n- $0 \\leq y < y+d \\leq m$。\n- 每个 $1 \\leq i \\leq k$ 都 **不能** 满足以下条件：\n  - $x < x_i < x+d$ 且 $y < y_i < y+d$。\n\n请计算小青鱼可以画的正方形的总面积。由于答案可能很大，请将答案对 $998244353$ 取模后输出。", "inputFormat": "每个测试文件仅有一组测试数据。\n\n第一行输入三个整数 $n$，$m$ 和 $k$（$2 \\leq n,m \\leq 10^9$，$1 \\leq k \\leq 5 \\times 10^3$），表示矩形的大小和禁止点的数量。\n\n对于接下来 $k$ 行，第 $i$ 行输入两个整数 $x_i$ 和 $y_i$（$0 < x_i < n$，$0 < y_i < m$）表示第 $i$ 个禁止点的位置。保证所有禁止点互不相同。", "outputFormat": "输出一行一个整数，代表对 $998244353$ 取模后的答案。\n\n**【样例解释】**\n\n对于第一组样例数据，小青鱼有 $12$ 种方式画一个正方形，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ineydu5.png)\n\n共有 $9$ 个边长为 $1$ 的正方形和 $3$ 个边长为 $2$ 的正方形。因此答案为 $9 \\times 1^2 + 3 \\times 2^2 = 21$。\n\n以下画正方形的方式是不合法的，因为正方形内有一个禁止点。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qgn1qs0h.png)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9564", "type": "P", "difficulty": 1, "samples": [["4 5\n", "Yes\n"], ["3 0\n", "Yes\n"], ["1 2\n", "No\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "山东", "O2优化", "枚举", "省赛/邀请赛"], "title": "[SDCPC 2023] Three Dice", "background": "", "description": "Dice are small, throwable objects with marked sides capable of landing in multiple positions. They are typically used to generate random values, especially in the context of tabletop games.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dsezqcgm.png)\n\nThe most common dice are small cubes, with faces numbered from $1$ to $6$. Number $n$ ($1 \\le n \\le 6$) is usually represented by a pattern of $n$ round dots, known as pips. Moreover, the pips on the $1$ and $4$ faces are colored red, while those on the $2$, $3$, $5$ and $6$ faces are black.\n\nLittle Cyan Fish has three dice. One day, he threw them onto a table, and then observed the uppermost faces. He claimed that the total number of the red pips facing up was exactly $A$, and the total number of the black pips facing up was exactly $B$.\n\nHowever, you find his claim doubtful. You want to verify whether it is possible to throw three dice such that the total number of red pips facing up is $A$, and the total number of black pips facing up is $B$.", "inputFormat": "There is only one test case in each test file.\n\nThe first line of the input contains two integers $A$ and $B$ ($0 \\leq A,B \\leq 100$), indicating the total number of red pips facing up and the number of black pips facing up.", "outputFormat": "Output one line. If it is possible for Little Cyan Fish to throw three dice such that the total number of red pips facing up is $A$, and the total number of black pips facing up is $B$ output `Yes`. Otherwise output `No`.", "hint": "In the first example, one possible solution is $4, 2, 3$.\n\nIn the second example, one possible solution is $1, 1, 1$.", "locale": "en", "translations": {"en": {"title": "[SDCPC 2023] Three Dice", "background": "", "description": "Dice are small, throwable objects with marked sides capable of landing in multiple positions. They are typically used to generate random values, especially in the context of tabletop games.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dsezqcgm.png)\n\nThe most common dice are small cubes, with faces numbered from $1$ to $6$. Number $n$ ($1 \\le n \\le 6$) is usually represented by a pattern of $n$ round dots, known as pips. Moreover, the pips on the $1$ and $4$ faces are colored red, while those on the $2$, $3$, $5$ and $6$ faces are black.\n\nLittle Cyan Fish has three dice. One day, he threw them onto a table, and then observed the uppermost faces. He claimed that the total number of the red pips facing up was exactly $A$, and the total number of the black pips facing up was exactly $B$.\n\nHowever, you find his claim doubtful. You want to verify whether it is possible to throw three dice such that the total number of red pips facing up is $A$, and the total number of black pips facing up is $B$.", "inputFormat": "There is only one test case in each test file.\n\nThe first line of the input contains two integers $A$ and $B$ ($0 \\leq A,B \\leq 100$), indicating the total number of red pips facing up and the number of black pips facing up.", "outputFormat": "Output one line. If it is possible for Little Cyan Fish to throw three dice such that the total number of red pips facing up is $A$, and the total number of black pips facing up is $B$ output `Yes`. Otherwise output `No`.", "hint": "In the first example, one possible solution is $4, 2, 3$.\n\nIn the second example, one possible solution is $1, 1, 1$.", "locale": "en"}, "zh-CN": {"title": "[SDCPC 2023] Three Dice", "background": "", "description": "骰子，是一种各面带有标记，以生成随机数的小型可投掷道具，通常用于桌上游戏。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dsezqcgm.png)\n\n最常见的骰子是一种小正方体，每个面上被标记了从 $1$ 到 $6$ 的数字。数字 $n$（$1 \\le n \\le 6$）通常由 $n$ 个小圆点组成的图案来表示，其中 $1$ 号与 $4$ 号面的小圆点是红色的，而 $2$, $3$, $5$ 与 $6$ 号面的小圆点是黑色的。\n\n小青鱼手中有三只骰子。有一天，他将这三只骰子投掷在桌子上，并观察了朝上的那一个面。他发现所有朝上的面中，红色的点数之和恰好为 $A$，而黑色的点数之和恰好为 $B$。\n\n然而，您对小青鱼的发现感到怀疑。您想要确认是否有可能投掷出三只骰子，使得所有朝上的面中，红色的点数之和恰好为 $A$，而黑色的点数之和恰好为 $B$。", "inputFormat": "每个测试文件仅有一组测试数据。\n\n第一行输入两个整数 $A$ 和 $B$（$0 \\leq A,B \\leq 100$），表示朝上的红色点数之和与黑色点数之和。", "outputFormat": "输出一行。如果小青鱼有可能投掷出三只骰子使得所有朝上的面中，红色的点数之和恰好为 $A$，而黑色的点数之和恰好为 $B$，则输出 `Yes`。否则输出 `No`。\n\n**【样例解释】**\n\n在第一组样例中，其中一种合法的方案为 $4, 2, 3$。\n\n在第二组样例中，其中一种合法的方案为 $1, 1, 1$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9565", "type": "P", "difficulty": 4, "samples": [["9 8 4 5\n1 2 8\n1 3 7\n2 4 1\n3 4 14\n2 5 9\n4 5 7\n5 6 6\n3 7 15\n1 6\n2 7\n7 6\n1 8\n", "Yes\nNo\nYes\nNo\n"], ["3 4 1 4\n1 2 3\n1 2 5\n2 3 2\n2 3 6\n1 3\n", "Yes\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["并查集", "2023", "山东", "O2优化", "位运算", "省赛/邀请赛"], "title": "[SDCPC 2023] Not Another Path Query Problem", "background": "> What age is it that you are still solving traditional path query problems?", "description": "After reading the paper *Distributed Exact Shortest Paths in Sublinear Time*, you have learned how to solve the distributed single-source shortest paths problem in $\\mathcal{O}(D^{1/3} \\cdot (n \\log n)^{2/3})$. To give your knowledge good practice, Little Cyan Fish prepared the following practice task for you.\n\nLittle Cyan Fish has a graph consisting of $n$ vertices and $m$ bidirectional edges. The vertices are numbered from $1$ to $n$. The $i$-th edge connects vertex $u_i$ to vertex $v_i$ and is assigned a weight $w_i$.\n\nFor any path in the graph between two vertices $u$ and $v$, let's define the value of the path as the bitwise AND of the weights of all the edges in the path.\n\nAs a fan of high-value paths, Little Cyan Fish has set a constant threshold $V$. Little Cyan Fish loves a path if and only if its value is at least $V$.\n\nLittle Cyan Fish will now ask you $q$ queries, where the $i$-th query can be represented as a pair of integers $(u_i, v_i)$. For each query, your task is to determine if there exists a path from vertex $u_i$ to vertex $v_i$ that Little Cyan Fish would love it.", "inputFormat": "There is only one test case in each test file.\n\nThe first line contains four integers $n$, $m$, $q$ and $V$ ($1 \\le n \\le 10^5$, $0 \\le m \\le 5 \\times 10^5$, $1 \\leq q \\leq 5 \\times 10^5$, $0 \\leq V < 2^{60}$) indicating the number of vertices, the number of edges, the number of queries and the constant threshold.\n\nFor the following $m$ lines, the $i$-th line contains three integers $u_i$, $v_i$ and $w_i$ ($1 \\le u_i,v_i \\le n$, $u_i \\ne v_i$, $0 \\leq w_i < 2^{60}$), indicating a bidirectional edge between vertex $u_i$ and vertex $v_i$ with the weight $w_i$. There might be multiple edges connecting the same pair of vertices.\n\nFor the following $q$ lines, the $i$-th line contains two integers $u_i$ and $v_i$ ($1 \\leq u_i, v_i \\leq n$, $u_i \\ne v_i$), indicating a query.", "outputFormat": "For each query output one line. If there exists a path whose value is at least $V$ between vertex $u_i$ and $v_i$ output `Yes`, otherwise output `No`.", "hint": "We now use $\\&$ to represent the bitwise AND operation.\n\nThe first sample test case is shown as follows.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xdxp1um6.png)\n\n- For the first query, a valid path is $1 \\to 3 \\to 4 \\to 5 \\to 6$, whose value is $7 \\,\\&\\, 14 \\,\\&\\, 7 \\,\\&\\, 6 = 6 \\ge 5$.\n- For the third query, a valid path is $7 \\to 3 \\to 4 \\to 5 \\to 6$, whose value is $15 \\,\\&\\, 14 \\,\\&\\, 7 \\,\\&\\, 6  = 6 \\ge 5$.\n- For the fourth query, as there is no path between vertex $1$ and $8$, the answer is `No`.\n\nFor the only query of the second sample test case, we can consider the path consisting of the $2$-nd and the $4$-th edge. Its value is $5 \\,\\&\\, 6 = 4 \\ge 4$.", "locale": "en", "translations": {"en": {"title": "[SDCPC 2023] Not Another Path Query Problem", "background": "> What age is it that you are still solving traditional path query problems?", "description": "After reading the paper *Distributed Exact Shortest Paths in Sublinear Time*, you have learned how to solve the distributed single-source shortest paths problem in $\\mathcal{O}(D^{1/3} \\cdot (n \\log n)^{2/3})$. To give your knowledge good practice, Little Cyan Fish prepared the following practice task for you.\n\nLittle Cyan Fish has a graph consisting of $n$ vertices and $m$ bidirectional edges. The vertices are numbered from $1$ to $n$. The $i$-th edge connects vertex $u_i$ to vertex $v_i$ and is assigned a weight $w_i$.\n\nFor any path in the graph between two vertices $u$ and $v$, let's define the value of the path as the bitwise AND of the weights of all the edges in the path.\n\nAs a fan of high-value paths, Little Cyan Fish has set a constant threshold $V$. Little Cyan Fish loves a path if and only if its value is at least $V$.\n\nLittle Cyan Fish will now ask you $q$ queries, where the $i$-th query can be represented as a pair of integers $(u_i, v_i)$. For each query, your task is to determine if there exists a path from vertex $u_i$ to vertex $v_i$ that Little Cyan Fish would love it.", "inputFormat": "There is only one test case in each test file.\n\nThe first line contains four integers $n$, $m$, $q$ and $V$ ($1 \\le n \\le 10^5$, $0 \\le m \\le 5 \\times 10^5$, $1 \\leq q \\leq 5 \\times 10^5$, $0 \\leq V < 2^{60}$) indicating the number of vertices, the number of edges, the number of queries and the constant threshold.\n\nFor the following $m$ lines, the $i$-th line contains three integers $u_i$, $v_i$ and $w_i$ ($1 \\le u_i,v_i \\le n$, $u_i \\ne v_i$, $0 \\leq w_i < 2^{60}$), indicating a bidirectional edge between vertex $u_i$ and vertex $v_i$ with the weight $w_i$. There might be multiple edges connecting the same pair of vertices.\n\nFor the following $q$ lines, the $i$-th line contains two integers $u_i$ and $v_i$ ($1 \\leq u_i, v_i \\leq n$, $u_i \\ne v_i$), indicating a query.", "outputFormat": "For each query output one line. If there exists a path whose value is at least $V$ between vertex $u_i$ and $v_i$ output `Yes`, otherwise output `No`.", "hint": "We now use $\\&$ to represent the bitwise AND operation.\n\nThe first sample test case is shown as follows.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xdxp1um6.png)\n\n- For the first query, a valid path is $1 \\to 3 \\to 4 \\to 5 \\to 6$, whose value is $7 \\,\\&\\, 14 \\,\\&\\, 7 \\,\\&\\, 6 = 6 \\ge 5$.\n- For the third query, a valid path is $7 \\to 3 \\to 4 \\to 5 \\to 6$, whose value is $15 \\,\\&\\, 14 \\,\\&\\, 7 \\,\\&\\, 6  = 6 \\ge 5$.\n- For the fourth query, as there is no path between vertex $1$ and $8$, the answer is `No`.\n\nFor the only query of the second sample test case, we can consider the path consisting of the $2$-nd and the $4$-th edge. Its value is $5 \\,\\&\\, 6 = 4 \\ge 4$.", "locale": "en"}, "zh-CN": {"title": "[SDCPC 2023] Not Another Path Query Problem", "background": "", "description": "**【题目背景】**\n\n> 都什么年代了还在做传统路径查询问题？\n\n\n在阅读《Distributed Exact Shortest Paths in Sublinear Time》这篇论文后，您学会了如何在 $\\mathcal{O}(D^{1/3} \\cdot (n \\log n)^{2/3})$ 的复杂度内解决分布式单源最短路问题。为了测试您是否真的学有所成，小青鱼为您准备了如下问题。\n\n小青鱼有一张包含 $n$ 个节点与 $m$ 条无向边的图，节点编号从 $1$ 到 $n$。第 $i$ 条边连接节点 $u_i$ 和 $v_i$，边权为 $w_i$。\n\n对于任意一条连接节点 $u$ 和 $v$ 的路径，定义路径的价值为路径上所有边的边权进行按位与（bitwise AND）计算的结果。\n\n小青鱼很喜欢高价值的路径，因此他设定了一个固定的阈值 $V$。称小青鱼喜爱一条路径，当且仅当这条路径的价值至少为 $V$。\n\n接下来，小青鱼将会提出 $q$ 次询问，第 $i$ 次询问可以用一对整数 $(u_i, v_i)$ 表示。对于每次询问，您需要判断节点 $u_i$ 到 $v_i$ 是否存在一条小青鱼喜爱的路径。", "inputFormat": "每个测试文件仅有一组测试数据。\n\n第一行输入四个整数 $n$，$m$，$q$ 和 $V$（$1 \\le n \\le 10^5$，$0 \\le m \\le 5 \\times 10^5$，$1 \\leq q \\leq 5 \\times 10^5$，$0 \\leq V < 2^{60}$）表示图中的节点数以及边数，小青鱼的询问数以及固定阈值。\n\n对于接下来 $m$ 行，第 $i$ 行输入三个整数 $u_i$，$v_i$ 和 $w_i$（$1 \\le u_i,v_i \\le n$，$u_i \\ne v_i$，$0 \\leq w_i < 2^{60}$）表示一条连接节点 $u_i$ 和 $v_i$ 的无向边，边权为 $w_i$。两个节点之间可能存在多条边。\n\n对于接下来 $q$ 行，第 $i$ 行输入两个整数 $u_i$ 和 $v_i$（$1 \\leq u_i, v_i \\leq n$，$u_i \\ne v_i$）表示一次询问。", "outputFormat": "每次询问输出一行。若节点 $u_i$ 和 $v_i$ 之间存在一条价值至少为 $V$ 的路径输出 `Yes`，否则输出 `No`。\n\n**【样例解释】**\n\n接下来我们用 $\\&$ 表示按位与计算。\n\n第一组样例数据解释如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xdxp1um6.png)\n\n- 对于第一次询问，一条合法的路径为 $1 \\to 3 \\to 4 \\to 5 \\to 6$，其价值为 $7 \\,\\&\\, 14 \\,\\&\\, 7 \\,\\&\\, 6 = 6 \\ge 5$。\n- 对于第三次询问，一条合法的路径为 $7 \\to 3 \\to 4 \\to 5 \\to 6$，其价值为 $15 \\,\\&\\, 14 \\,\\&\\, 7 \\,\\&\\, 6  = 6 \\ge 5$。\n- 对于第四次询问，因为节点 $1$ 与 $8$ 之间不存在任何路径，因此答案为 `No`。\n\n对于第二组样例数据仅有的一次询问，可以考虑由第 $2$ 和第 $4$ 条边组成的路径，其价值为 $5 \\,\\&\\, 6 = 4 \\ge 4$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9566", "type": "P", "difficulty": 5, "samples": [["5\n9 6\n1?010??01\n9 5\n1?010??01\n9 6\n100101101\n9 5\n100101101\n9 3\n????????1\n", "100100101\nImpossible\n100101101\nImpossible\n000000101\n"]], "limits": {"time": [1000, 1000], "memory": [1048576, 1048576]}, "tags": ["动态规划 DP", "贪心", "2023", "山东", "O2优化", "分类讨论", "省赛/邀请赛"], "title": "[SDCPC 2023] Difficult Constructive Problem", "background": "", "description": "Given a string $s_1s_2\\cdots s_n$ of length $n$ where $s_i \\in \\{\\text{0}, \\text{1}, \\text{?}\\}$ and an integer $k$, please fill out all the $\\text{?}$ with $\\text{0}$ or $\\text{1}$ such that the number of indices $i$ satisfying $1 \\le i < n$ and $s_i \\ne s_{i+1}$ equals to $k$. Different $\\text{?}$ can be replaced with different characters.\n\nTo make this problem even more difficult, we ask you to find the answer with the smallest possible lexicographic order if it exists.\n\nRecall that a string $a_1a_2\\cdots a_n$ of length $n$ is lexicographically smaller than another string $b_1b_2\\cdots b_n$ of length $n$ if there exists an integer $k$ ($1 \\le k \\le n$) such that $a_i = b_i$ for all $1 \\le i < k$ and $a_k < b_k$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $k$ ($1 \\le n \\le 10^5$, $0 \\le k < n$) indicating the length of the string and the required number of indices satisfying the condition.\n\nThe second line contains a string $s_1s_2,\\cdots s_n$ ($s_i \\in \\{\\text{0}, \\text{1}, \\text{?}\\}$).\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $10^6$.", "outputFormat": "For each test case output one line. If the answer exists output the lexicographically smallest one (you need to output the whole given string after filling out all the $\\text{?}$ and make this string the lexicographically smallest); Otherwise output `Impossible`.", "hint": "", "locale": "en", "translations": {"en": {"title": "[SDCPC 2023] Difficult Constructive Problem", "background": "", "description": "Given a string $s_1s_2\\cdots s_n$ of length $n$ where $s_i \\in \\{\\text{0}, \\text{1}, \\text{?}\\}$ and an integer $k$, please fill out all the $\\text{?}$ with $\\text{0}$ or $\\text{1}$ such that the number of indices $i$ satisfying $1 \\le i < n$ and $s_i \\ne s_{i+1}$ equals to $k$. Different $\\text{?}$ can be replaced with different characters.\n\nTo make this problem even more difficult, we ask you to find the answer with the smallest possible lexicographic order if it exists.\n\nRecall that a string $a_1a_2\\cdots a_n$ of length $n$ is lexicographically smaller than another string $b_1b_2\\cdots b_n$ of length $n$ if there exists an integer $k$ ($1 \\le k \\le n$) such that $a_i = b_i$ for all $1 \\le i < k$ and $a_k < b_k$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $k$ ($1 \\le n \\le 10^5$, $0 \\le k < n$) indicating the length of the string and the required number of indices satisfying the condition.\n\nThe second line contains a string $s_1s_2,\\cdots s_n$ ($s_i \\in \\{\\text{0}, \\text{1}, \\text{?}\\}$).\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $10^6$.", "outputFormat": "For each test case output one line. If the answer exists output the lexicographically smallest one (you need to output the whole given string after filling out all the $\\text{?}$ and make this string the lexicographically smallest); Otherwise output `Impossible`.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[SDCPC 2023] Difficult Constructive Problem", "background": "", "description": "给定一个长度为 $n$ 的字符串 $s_1s_2\\cdots s_n$，其中 $s_i \\in \\{\\text{0}, \\text{1}, \\text{?}\\}$，另外给定一个整数 $k$，请将字符串中所有的 $\\text{?}$ 换成 $\\text{0}$ 或 $\\text{1}$，使得满足 $1 \\le i < n$ 且 $s_i \\ne s_{i+1}$ 的下标 $i$ 恰有 $k$ 个。不同的 $\\text{?}$ 可以用不同字符替换。\n\n为了让这题变得更加困难，我们要求您在答案存在的情况下，输出字典序最小的答案。\n\n请回忆：称长度为 $n$ 的字符串 $a_1a_2\\cdots a_n$ 的字典序小于长度为 $n$ 的字符串 $b_1b_2\\cdots b_n$，若存在一个整数 $k$（$1 \\le k \\le n$）使得对于所有 $1 \\le i < k$ 有 $a_i = b_i$，且 $a_k < b_k$。", "inputFormat": "有多组测试数据。第一行输入一个整数 $T$ 表示测试数据组数，对于每组测试数据：\n\n第一行输入两个整数 $n$ 和 $k$（$1 \\le n \\le 10^5$，$0 \\le k < n$）表示字符串的长度以及满足要求的下标数量。\n\n第二行输入一个字符串 $s_1s_2,\\cdots s_n$（$s_i \\in \\{\\text{0}, \\text{1}, \\text{?}\\}$）。\n\n保证所有数据 $n$ 之和不超过 $10^6$。", "outputFormat": "每组数据输出一行。若答案存在则输出字典序最小的答案（您需要输出将 $\\text{?}$ 替换之后的整个字符串，并让这个字符串的字典序最小），否则输出 `Impossible`。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9567", "type": "P", "difficulty": 3, "samples": [["5 3 4\n", "Yes\n6\n5 1 -1 3\n1 2 1 3\n3 1 -2 1\n4 3 -1 -1\n4 5 1 -1\n2 5 1 -2\n"], ["1 1 1\n", "Yes\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "山东", "Special Judge", "O2优化", "构造", "省赛/邀请赛"], "title": "[SDCPC 2023] Puzzle: Sashigane", "background": "", "description": "Given a grid with $n$ rows and $n$ columns, there is exactly one black cell in the grid and all other cells are white. Let $(i, j)$ be the cell on the $i$-th row and the $j$-th column, this black cell is located at $(b_i, b_j)$.\n\nYou need to cover all white cells with some L-shapes, so that each white cell is covered by exactly one L-shape and the only black cell is not covered by any L-shape. L-shapes must not exceed the boundary of the grid.\n\nMore formally, an L-shape in the grid is uniquely determined by four integers $(r, c, h, w)$, where $(r, c)$ determines the turning point of the L-shape, and $h$ and $w$ determine the direction and lengths of the two arms of the L-shape. The four integers must satisfy $1 \\le r, c \\le n$, $1 \\le r + h \\le n$, $1 \\le c + w \\le n$, $h \\ne 0$, $w \\ne 0$.\n\n- If $h < 0$, then all cells $(i, c)$ satisfying $r + h \\le i \\le r$ belong to this L-shape; Otherwise if $h > 0$, all cells $(i, c)$ satisfying $r \\le i \\le r + h$ belong to this L-shape.\n- If $w < 0$, then all cells $(r, j)$ satisfying $c + w \\le j \\le c$ belong to this L-shape; Otherwise if $w > 0$, all cells $(r, j)$ satisfying $c \\le j \\le c + w$ belong to this L-shape.\n\nThe following image illustrates some L-shapes.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s4jgji61.png)", "inputFormat": "There is only one test case in each test file.\n\nThe first line contains three integers $n$, $b_i$ and $b_j$ ($1 \\le n \\le 10^3$, $1 \\le b_i, b_j \\le n$) indicating the size of the grid and the position of the black cell.", "outputFormat": "If a valid answer exists first output `Yes` in the first line, then in the second line output an integer $k$ ($0 \\leq k \\leq \\frac{n^2-1}{3}$) indicating the number of L-shapes to cover white cells. Then output $k$ lines where the $i$-th line contains four integers $r_i$, $c_i$, $h_i$, $w_i$ separated by a space indicating that the $i$-th L-shape is uniquely determined by $(r_i, c_i, h_i, w_i)$. If there are multiple valid answers you can print any of them.\n\nIf there is no valid answer, just output `No` in one line.", "hint": "We illustrate the first sample test case as follows.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nbrr3gun.png)", "locale": "en", "translations": {"en": {"title": "[SDCPC 2023] Puzzle: Sashigane", "background": "", "description": "Given a grid with $n$ rows and $n$ columns, there is exactly one black cell in the grid and all other cells are white. Let $(i, j)$ be the cell on the $i$-th row and the $j$-th column, this black cell is located at $(b_i, b_j)$.\n\nYou need to cover all white cells with some L-shapes, so that each white cell is covered by exactly one L-shape and the only black cell is not covered by any L-shape. L-shapes must not exceed the boundary of the grid.\n\nMore formally, an L-shape in the grid is uniquely determined by four integers $(r, c, h, w)$, where $(r, c)$ determines the turning point of the L-shape, and $h$ and $w$ determine the direction and lengths of the two arms of the L-shape. The four integers must satisfy $1 \\le r, c \\le n$, $1 \\le r + h \\le n$, $1 \\le c + w \\le n$, $h \\ne 0$, $w \\ne 0$.\n\n- If $h < 0$, then all cells $(i, c)$ satisfying $r + h \\le i \\le r$ belong to this L-shape; Otherwise if $h > 0$, all cells $(i, c)$ satisfying $r \\le i \\le r + h$ belong to this L-shape.\n- If $w < 0$, then all cells $(r, j)$ satisfying $c + w \\le j \\le c$ belong to this L-shape; Otherwise if $w > 0$, all cells $(r, j)$ satisfying $c \\le j \\le c + w$ belong to this L-shape.\n\nThe following image illustrates some L-shapes.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s4jgji61.png)", "inputFormat": "There is only one test case in each test file.\n\nThe first line contains three integers $n$, $b_i$ and $b_j$ ($1 \\le n \\le 10^3$, $1 \\le b_i, b_j \\le n$) indicating the size of the grid and the position of the black cell.", "outputFormat": "If a valid answer exists first output `Yes` in the first line, then in the second line output an integer $k$ ($0 \\leq k \\leq \\frac{n^2-1}{3}$) indicating the number of L-shapes to cover white cells. Then output $k$ lines where the $i$-th line contains four integers $r_i$, $c_i$, $h_i$, $w_i$ separated by a space indicating that the $i$-th L-shape is uniquely determined by $(r_i, c_i, h_i, w_i)$. If there are multiple valid answers you can print any of them.\n\nIf there is no valid answer, just output `No` in one line.", "hint": "We illustrate the first sample test case as follows.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nbrr3gun.png)", "locale": "en"}, "zh-CN": {"title": "[SDCPC 2023] Puzzle: Sashigane", "background": "", "description": "给定一个 $n$ 行 $n$ 列的网格，网格中包含恰好一个黑色方格，其余方格均为白色。令 $(i, j)$ 表示位于第 $i$ 行第 $j$ 列的格子，这个黑色方格位于 $(b_i, b_j)$。\n\n您需要用若干 L 形覆盖所有白色格子，使得每个白色格子都恰好被一个 L 形所覆盖，同时唯一的黑色方格不能被任何 L 形覆盖。L 形不能超过网格的边界。\n\n更正式地，网格中的一个 L 形由四个整数 $(r, c, h, w)$ 唯一确定，其中 $(r, c)$ 确定了 L 形的转折点，$h$ 和 $w$ 确定了 L 形两臂的方向和长度。四个整数满足 $1 \\le r, c \\le n$，$1 \\le r + h \\le n$，$1 \\le c + w \\le n$，$h \\ne 0$，$w \\ne 0$。\n\n- 若 $h < 0$，则所有满足 $r + h \\le i \\le r$ 的格子 $(i, c)$ 均属于该 L 形；否则若 $h > 0$，则所有满足 $r \\le i \\le r + h$ 的格子 $(i, c)$ 均属于该 L 形。\n- 若 $w < 0$，则所有满足 $c + w \\le j \\le c$ 的格子 $(r, j)$ 均属于该 L 形；否则若 $w > 0$，则所有满足 $c \\le j \\le c + w$ 的格子 $(r, j)$ 均属于该 L 形。\n\n下图展示了几种 L 形。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s4jgji61.png)", "inputFormat": "每个测试文件仅有一组测试数据。\n\n第一行输入三个整数 $n$，$b_i$，$b_j$（$1 \\le n \\le 10^3$，$1 \\le b_i, b_j \\le n$）表示网格的大小以及黑色格子的位置。", "outputFormat": "如果存在符合要求的覆盖方案，首先输出一行 `Yes`，接下来在第二行输出一个整数 $k$（$0 \\leq k \\leq \\frac{n^2-1}{3}$）表示覆盖白色格子的 L 形数量。接下来输出 $k$ 行，第 $i$ 行输出四个由单个空格分隔的整数 $r_i$，$c_i$，$h_i$ 和 $w_i$，表示第 $i$ 个 L 形由 $(r_i, c_i, h_i, w_i)$ 唯一确定。如果有多种合法答案，您可以输出任意一种。\n\n如果不存在符合要求的覆盖方案，仅需要输出一行 `No`。\n\n**【样例解释】**\n\n第一组样例数据展示如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nbrr3gun.png)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9568", "type": "P", "difficulty": 5, "samples": [["3\n3 1\n0 0\n1 0\n0 1\n8 3\n1 2\n3 1\n5 1\n7 3\n8 6\n5 8\n3 7\n1 5\n7 2\n3 6\n1 1\n3 1\n7 1\n8 1\n5 6\n4 6\n", "0.500000000000\n26.500000000000\n20.000000000000\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["计算几何", "2023", "山东", "Special Judge", "O2优化", "凸包", "省赛/邀请赛"], "title": "[SDCPC 2023] Computational Geometry", "background": "", "description": "Given a convex polygon $P$ with $n$ vertices, you need to choose three vertices of $P$, denoted as $a$, $b$ and $c$ in counter-clockwise order. There must be exactly $k$ edges from $b$ to $c$ in counter-clockwise order (that is to say, $a$ is not an endpoint of these $k$ edges).\n\nConsider cutting through $P$ with segment $ab$ and $ac$. Let $Q$ be the polygon consisting of $ab$, $ac$ and the $k$ edges between $b$ and $c$. It's easy to see that this polygon has $(k + 2)$ edges.\n\nFind the maximum possible area of $Q$.\n \nNote that $ab$ and $ac$ can overlap with edges of $P$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $k$ ($3 \\le n \\le 10^5$, $1 \\le k \\le n-2$) indicating the number of vertices of the convex polygon $P$ and the number of edges from $b$ to $c$ in counter-clockwise order.\n\nFor the following $n$ lines, the $i$-th line contains two integers $x_i$ and $y_i$ ($-10^9 \\le x_i, y_i \\le 10^9$) indicating the $x$ and $y$ coordinate of the $i$-th vertex of the convex polygon $P$. Vertices are given in counter-clockwise order. It's guaranteed that the area of the convex polygon is positive, and there are no two vertices with the same coordinate. It's possible that three vertices lie on the same line.\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $10^5$.", "outputFormat": "For each test case output one line containing one real number indicating the maximum possible area of $Q$. Your answer will be considered correct if its relative or absolute error is less than $10^{-9}$.", "hint": "For the first sample test case, $Q$ is the whole triangle. Its area is $0.5$.\n\nThe second and third sample test case are shown below.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vwd5087f.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/twyillv0.png)", "locale": "en", "translations": {"en": {"title": "[SDCPC 2023] Computational Geometry", "background": "", "description": "Given a convex polygon $P$ with $n$ vertices, you need to choose three vertices of $P$, denoted as $a$, $b$ and $c$ in counter-clockwise order. There must be exactly $k$ edges from $b$ to $c$ in counter-clockwise order (that is to say, $a$ is not an endpoint of these $k$ edges).\n\nConsider cutting through $P$ with segment $ab$ and $ac$. Let $Q$ be the polygon consisting of $ab$, $ac$ and the $k$ edges between $b$ and $c$. It's easy to see that this polygon has $(k + 2)$ edges.\n\nFind the maximum possible area of $Q$.\n \nNote that $ab$ and $ac$ can overlap with edges of $P$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $k$ ($3 \\le n \\le 10^5$, $1 \\le k \\le n-2$) indicating the number of vertices of the convex polygon $P$ and the number of edges from $b$ to $c$ in counter-clockwise order.\n\nFor the following $n$ lines, the $i$-th line contains two integers $x_i$ and $y_i$ ($-10^9 \\le x_i, y_i \\le 10^9$) indicating the $x$ and $y$ coordinate of the $i$-th vertex of the convex polygon $P$. Vertices are given in counter-clockwise order. It's guaranteed that the area of the convex polygon is positive, and there are no two vertices with the same coordinate. It's possible that three vertices lie on the same line.\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $10^5$.", "outputFormat": "For each test case output one line containing one real number indicating the maximum possible area of $Q$. Your answer will be considered correct if its relative or absolute error is less than $10^{-9}$.", "hint": "For the first sample test case, $Q$ is the whole triangle. Its area is $0.5$.\n\nThe second and third sample test case are shown below.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vwd5087f.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/twyillv0.png)", "locale": "en"}, "zh-CN": {"title": "[SDCPC 2023] Computational Geometry", "background": "", "description": "给定一个有 $n$ 个顶点的凸多边形 $P$，您需要选择 $P$ 的三个顶点，按逆时针顺序记为 $a$，$b$ 和 $c$。要求在 $b$ 沿逆时针方向到 $c$ 之间恰有 $k$ 条边（也就是说，$a$ 不是这 $k$ 条边的端点）。\n\n考虑用线段 $ab$ 和 $ac$ 将 $P$ 割开。将由线段 $ab$，$ac$，以及 $b$ 和 $c$ 之间的 $k$ 条边围成的 $(k + 2)$ 边形记作 $Q$。\n\n求 $Q$ 可能的最大面积。\n\n注意，$ab$ 和 $ac$ 可以与 $P$ 的边重合。", "inputFormat": "有多组测试数据。第一行输入一个整数 $T$ 表示测试数据组数。对于每组测试数据：\n\n第一行输入两个整数 $n$ 和 $k$（$3 \\le n \\le 10^5$，$1 \\le k \\le n-2$），表示凸多边形 $P$ 的顶点数和 $b$ 沿逆时针方向到 $c$ 之间的边数。\n\n对于接下来的 $n$ 行，第 $i$ 行输入两个整数 $x_i$ 和 $y_i$（$-10^9 \\le x_i, y_i \\le 10^9$），表示凸多边形 $P$ 第 $i$ 个顶点的 $x$ 坐标和 $y$ 坐标。顶点按逆时针顺序给出。保证凸多边形的面积为正，且没有顶点会重合。可能存在三个顶点位于同一条直线上的情况。\n\n保证所有数据 $n$ 之和不超过 $10^5$。", "outputFormat": "每组数据输出一行一个实数表示 $Q$ 的最大可能面积。只要您的答案的相对误差或绝对误差小于$10^{-9}$ 即视为正确。\n\n**【样例解释】**\n\n对于第一组样例数据，$Q$ 就是整个三角形，面积为 $0.5$.\n\n第二和第三组样例数据解释如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vwd5087f.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/twyillv0.png)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9569", "type": "P", "difficulty": 1, "samples": [["5 10\n1 1\n2 3\n3 7\n5 4\n3 3", "4"], ["20 131\n872 127\n228 17\n273 66\n306 78\n636 107\n878 110\n1141 122\n835 10\n247 28\n248 48\n65 4\n664 109\n267 96\n1103 87\n725 83\n231 119\n671 58\n825 52\n391 47\n573 100", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化"], "title": "「NnOI R2-T1」Khronostasis Katharsis", "background": "", "description": "$n$ 个气球被栓在水平地面上，初始高度均为 $0$ 米，初始时刻记为第 $0$ 秒。\n\n每个气球被剪断栓绳后会匀速上升，第 $i$ 个气球每秒上升 $v_i$ 米。\n\n现在已知第 $i$ 个气球会在第 $t_i$ 秒时被剪断栓绳，问第 $T$ 秒时最高的气球中编号最小的一个的编号。", "inputFormat": "第一行两个整数 $n,T$。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $v_i,t_i$。", "outputFormat": "一行一个整数，表示答案。", "hint": "**【样例 1 解释】**\n\n第 10 秒时，五个气球的高度分别为 9,14,9,30,21 米。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，保证 $1\\le n,v_i\\le 10^5$，$0\\le t_i\\le T\\le 10^4$。\n\n**提示：本题开启捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\n\\textbf{Subtask} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1& n \\le 1000 & 33 \\r\n\\textsf2& v_i\\ 相等 & 10 \\r\n\\textsf3& t_i \\ 相等 & 10 \\r\n\\textsf4& 无特殊限制 & 47 \\r\n\\end{array}\n$$\n\n### 题目来源\n\n|项目|人员|\n|:-:|:-:|\n|idea|EstasTonne|\n|data|EstasTonne|\n|check|船酱魔王|\n|solution|EstasTonne|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「NnOI R2-T1」Khronostasis Katharsis", "background": "", "description": "$n$ 个气球被栓在水平地面上，初始高度均为 $0$ 米，初始时刻记为第 $0$ 秒。\n\n每个气球被剪断栓绳后会匀速上升，第 $i$ 个气球每秒上升 $v_i$ 米。\n\n现在已知第 $i$ 个气球会在第 $t_i$ 秒时被剪断栓绳，问第 $T$ 秒时最高的气球中编号最小的一个的编号。", "inputFormat": "第一行两个整数 $n,T$。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $v_i,t_i$。", "outputFormat": "一行一个整数，表示答案。", "hint": "**【样例 1 解释】**\n\n第 10 秒时，五个气球的高度分别为 9,14,9,30,21 米。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，保证 $1\\le n,v_i\\le 10^5$，$0\\le t_i\\le T\\le 10^4$。\n\n**提示：本题开启捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\n\\textbf{Subtask} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1& n \\le 1000 & 33 \\r\n\\textsf2& v_i\\ 相等 & 10 \\r\n\\textsf3& t_i \\ 相等 & 10 \\r\n\\textsf4& 无特殊限制 & 47 \\r\n\\end{array}\n$$\n\n### 题目来源\n\n|项目|人员|\n|:-:|:-:|\n|idea|EstasTonne|\n|data|EstasTonne|\n|check|船酱魔王|\n|solution|EstasTonne|", "locale": "zh-CN"}}}
{"pid": "P9570", "type": "P", "difficulty": 2, "samples": [["3 4\nNYNY", "1 1 2 1"], ["5 3\nYYY", "No solution"], ["5 7\nNNNNNYN", "No solution"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化"], "title": "「NnOI R2-T2」Glaciaxion", "background": "", "description": "冰封的世界可以看作是 $ n $ 块初始时冷冻的冰川，这些冰川被编号为 $1 \\sim n$。\n\n探测器抵达后的 $ m $ 秒，每秒都会探测到一块冰川融化。\n\n当一块冰川第一次融化时，探测器返回 ```N```，否则返回 ```Y```。\n\n你需要根据探测器按顺序返回的信息，给出**字典序最小**的冰川融化过程的编号序列。如果不存在这样的编号序列，请输出 ```No solution``` 报告无解。", "inputFormat": "第一行两个整数 $ n,m $。\n\n接下来一行 $ m $ 个字符（`N` 或 `Y`，不加分隔），表示探测器按顺序返回的结果。", "outputFormat": "一行一个长度为 $ m $ 的整数序列（空格分隔），表示**字典序最小**的冰川融化过程的编号序列，或输出 ```No solution``` 报告无解。", "hint": "**【样例 1 解释】**\n\n第 1 秒，1 号冰川融化，这是其首次融化，返回 ```N```。\n\n第 2 秒，1 号冰川融化，这不是其首次融化，因为已经在第 1 秒融化过，返回 ```Y```。\n\n第 3 秒，2 号冰川融化，这是其首次融化，返回 ```N```。\n\n第 4 秒，1 号冰川融化，这不是其首次融化，因为已经在第 1,2 秒融化过，返回 ```Y```。\n\n**【数据范围】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le n,m \\le 10^6 $。\n\n**提示：本题开启捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\n\\textbf{Subtask} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1& n,m\\le 8 & 23 \\r\n\\textsf2& n,m\\le 1000 & 25 \\r\n\\textsf3& 探测器返回结果只有一种字符 & 15 \\r\n\\textsf4& 保证有解 & 17 \\r\n\\textsf5& 无特殊限制 & 20 \\r\n\\end{array}\n$$\n\n### 题目来源\n\n| 项目 | 人员 |\n|:-:|:-:|\n| idea | 船酱魔王 |\n| data | 船酱魔王 |\n| check | EstasTonne |\n| solution | 船酱魔王 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「NnOI R2-T2」Glaciaxion", "background": "", "description": "冰封的世界可以看作是 $ n $ 块初始时冷冻的冰川，这些冰川被编号为 $1 \\sim n$。\n\n探测器抵达后的 $ m $ 秒，每秒都会探测到一块冰川融化。\n\n当一块冰川第一次融化时，探测器返回 ```N```，否则返回 ```Y```。\n\n你需要根据探测器按顺序返回的信息，给出**字典序最小**的冰川融化过程的编号序列。如果不存在这样的编号序列，请输出 ```No solution``` 报告无解。", "inputFormat": "第一行两个整数 $ n,m $。\n\n接下来一行 $ m $ 个字符（`N` 或 `Y`，不加分隔），表示探测器按顺序返回的结果。", "outputFormat": "一行一个长度为 $ m $ 的整数序列（空格分隔），表示**字典序最小**的冰川融化过程的编号序列，或输出 ```No solution``` 报告无解。", "hint": "**【样例 1 解释】**\n\n第 1 秒，1 号冰川融化，这是其首次融化，返回 ```N```。\n\n第 2 秒，1 号冰川融化，这不是其首次融化，因为已经在第 1 秒融化过，返回 ```Y```。\n\n第 3 秒，2 号冰川融化，这是其首次融化，返回 ```N```。\n\n第 4 秒，1 号冰川融化，这不是其首次融化，因为已经在第 1,2 秒融化过，返回 ```Y```。\n\n**【数据范围】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le n,m \\le 10^6 $。\n\n**提示：本题开启捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\n\\textbf{Subtask} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1& n,m\\le 8 & 23 \\r\n\\textsf2& n,m\\le 1000 & 25 \\r\n\\textsf3& 探测器返回结果只有一种字符 & 15 \\r\n\\textsf4& 保证有解 & 17 \\r\n\\textsf5& 无特殊限制 & 20 \\r\n\\end{array}\n$$\n\n### 题目来源\n\n| 项目 | 人员 |\n|:-:|:-:|\n| idea | 船酱魔王 |\n| data | 船酱魔王 |\n| check | EstasTonne |\n| solution | 船酱魔王 |", "locale": "zh-CN"}}}
{"pid": "P9571", "type": "P", "difficulty": 4, "samples": [["6\n1 1 0\n1 -1 0\n2 2 1\n3 1 3\n2 2 1\n2 1 1", "2\n1\n0"], ["10\n1 1 0\n1 1 0\n2 1 1\n2 1 0\n2 2 5\n3 1 0\n2 2 5\n1 2 3\n1 3 4\n2 3 5", "0\n0\n2\n0\n1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化"], "title": "「NnOI R2-T3」Horizon Blue", "background": "", "description": "小 C 喜欢在画板上画画。他进行了 $ n $ 次操作，每次操作有如下三种可能：\n\n- ```1 k b``` 代表小 C 绘制了一条解析式为 $ y=kx+b $ 的直线。\n- ```2 k b``` 代表小 C 询问你直线 $ y=kx+b $ 与多少条被绘制的直线有**恰好**一个公共点。\n- ```3 k b``` 代表小 C 擦除所有与直线 $ y=kx+b $ 有**至少**一个公共点的直线。\n\n**注意：两条重合的直线有无数个交点。**\n\n**注意：询问时重合的直线应分别计算。**", "inputFormat": "第一行一个整数 $ n $。\n\n接下来 $n$ 行，每行三个整数 $ 1/2/3,k,b $，代表一次操作。", "outputFormat": "对每次 ```2 k b``` 操作，输出满足要求的直线数量。", "hint": "**【样例 1 解释】**\n\n第 1 次操作，绘制直线 $ y=x $。\n\n第 2 次操作，绘制直线 $ y=-x $。\n\n第 3 次操作，可以发现直线 $ y=2x+1 $ 与前两条线相交。\n\n第 4 次操作，擦掉所有 $ y=x+3 $ 相交的线，直线 $ y=-x $ 被擦掉。\n\n第 5 次操作，$ y=2x+1 $ 显然与 $ y=x $ 相交。\n\n第 6 次操作，$ y=x+1 $ 与 $ y=x $ 斜率相等，是平行线，不相交。\n\n**【数据范围】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le n \\le 10^5 $，$ 1 \\le |k| \\le 10^5 $，$ 0 \\le |b| \\le 10^5 $。\n\n**提示：本题开启捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\n\\textbf{Subtask} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1& n \\le 5000 & 27 \\r\n\\textsf2& \\vert k\\vert,\\vert b\\vert \\le 50 & 21 \\r\n\\textsf3& 无第\\ 3\\ 类操作 & 13 \\r\n\\textsf4& 第\\ i\\ 次操作满足\\ k=i & 14 \\r\n\\textsf5& 无特殊限制 & 25 \\r\n\\end{array}\n$$\n\n在赛后新添加的 hack 测试点将放入 subtask 6。\n\n### 题目来源\n\n| 项目 | 人员 |\n|:-:|:-:|\n| idea | 船酱魔王 |\n| data | 船酱魔王 |\n| check | EstasTonne |\n| solution | 船酱魔王 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「NnOI R2-T3」Horizon Blue", "background": "", "description": "小 C 喜欢在画板上画画。他进行了 $ n $ 次操作，每次操作有如下三种可能：\n\n- ```1 k b``` 代表小 C 绘制了一条解析式为 $ y=kx+b $ 的直线。\n- ```2 k b``` 代表小 C 询问你直线 $ y=kx+b $ 与多少条被绘制的直线有**恰好**一个公共点。\n- ```3 k b``` 代表小 C 擦除所有与直线 $ y=kx+b $ 有**至少**一个公共点的直线。\n\n**注意：两条重合的直线有无数个交点。**\n\n**注意：询问时重合的直线应分别计算。**", "inputFormat": "第一行一个整数 $ n $。\n\n接下来 $n$ 行，每行三个整数 $ 1/2/3,k,b $，代表一次操作。", "outputFormat": "对每次 ```2 k b``` 操作，输出满足要求的直线数量。", "hint": "**【样例 1 解释】**\n\n第 1 次操作，绘制直线 $ y=x $。\n\n第 2 次操作，绘制直线 $ y=-x $。\n\n第 3 次操作，可以发现直线 $ y=2x+1 $ 与前两条线相交。\n\n第 4 次操作，擦掉所有 $ y=x+3 $ 相交的线，直线 $ y=-x $ 被擦掉。\n\n第 5 次操作，$ y=2x+1 $ 显然与 $ y=x $ 相交。\n\n第 6 次操作，$ y=x+1 $ 与 $ y=x $ 斜率相等，是平行线，不相交。\n\n**【数据范围】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le n \\le 10^5 $，$ 1 \\le |k| \\le 10^5 $，$ 0 \\le |b| \\le 10^5 $。\n\n**提示：本题开启捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\n\\textbf{Subtask} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1& n \\le 5000 & 27 \\r\n\\textsf2& \\vert k\\vert,\\vert b\\vert \\le 50 & 21 \\r\n\\textsf3& 无第\\ 3\\ 类操作 & 13 \\r\n\\textsf4& 第\\ i\\ 次操作满足\\ k=i & 14 \\r\n\\textsf5& 无特殊限制 & 25 \\r\n\\end{array}\n$$\n\n在赛后新添加的 hack 测试点将放入 subtask 6。\n\n### 题目来源\n\n| 项目 | 人员 |\n|:-:|:-:|\n| idea | 船酱魔王 |\n| data | 船酱魔王 |\n| check | EstasTonne |\n| solution | 船酱魔王 |", "locale": "zh-CN"}}}
{"pid": "P9572", "type": "P", "difficulty": 3, "samples": [["3 4 1 1\n23 34 53\n53 25 23 34", "3 2"], ["9 10 1 1\n15 12 26 21 26 21 23 12 23\n26 11 21 15 16 15 12 23 17 12", "7 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "洛谷原创", "O2优化"], "title": "「NnOI R2-T4」Colorful Days♪", "background": "", "description": "给出如下定义：\n\n1. 定义 $ AB $ 为 $ A $ 数组后拼接 $ B $ 数组。\n2. 定义 $ A^{0}=\\{\\} $（即空数组），且对 $i=1,2,3,\\cdots$，$ A^{i}=A^{i-1}A$。\n2. 定义 $ \\operatorname{LCS}(A,B) $ 为 $ A $ 数组和 $ B $ 数组的**最长公共子序列**长度。\n\n现给定长度为 $ n $ 的数组 $ S $ 和长度为 $ m $ 的数组 $ T $，数组中的数均为正整数。\n\n你现在需要找到最小的非负整数 $k$，使得 $ \\operatorname{LCS}(S^k,T) $ 最大。\n\n出题人很仁慈，如果你无法最小化 $k$，你也可以拿到一部分分数。", "inputFormat": "第一行四个整数 $ n,m,c_1,c_2 $，后两个整数为输出参数 0 或 1。\n\n第二行 $ n $ 个正整数，代表 $ S $ 数组。\n\n第三行 $ m $ 个正整数，代表 $ T $ 数组。", "outputFormat": "输出两个整数 $ c_1 \\cdot \\operatorname{LCS}(S^k,T)$ 和 $c_2\\cdot k$。", "hint": "**【样例 1 解释】**\n\n当 $k = 2$ 时，$S^k = \\text{\\{23 34 \\textcolor{red}{53 23 34} 53\\}}$，其中标红的是 $S^k$ 和 $T$ 的最长公共子序列。\n\n**【数据范围】**\n\n**提示：本题开启捆绑测试。**\n\n对于 $ 100\\% $ 的数据，保证 $ 1 \\le n,m,S_i,T_i \\le 10^6 $，$ c_1,c_2 \\in \\{0,1\\} $。\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\n\\textbf{Subtask} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1& c_1=c_2=0 & 2 \\r\n\\textsf2& n \\le 10^3，m \\le 10^2 & 8 \\r\n\\textsf3& n \\le 10^4，m \\le 10^3 & 15 \\r\n\\textsf4& c_2=0 & 15 \\r\n\\textsf5& n,m \\le 10^5，S_i,T_i \\le 26 & 20 \\r\n\\textsf6& 无特殊限制 & 40 \\r\n\\end{array}\n$$\n\n在赛后新添加的 hack 测试点会加入 subtask7。\n\n### 题目来源\n\n| 项目 | 人员 |\n|:-:|:-:|\n|idea| 船酱魔王 |\n|data| 船酱魔王 |\n|check| Sudohry |\n|solution| 船酱魔王 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「NnOI R2-T4」Colorful Days♪", "background": "", "description": "给出如下定义：\n\n1. 定义 $ AB $ 为 $ A $ 数组后拼接 $ B $ 数组。\n2. 定义 $ A^{0}=\\{\\} $（即空数组），且对 $i=1,2,3,\\cdots$，$ A^{i}=A^{i-1}A$。\n2. 定义 $ \\operatorname{LCS}(A,B) $ 为 $ A $ 数组和 $ B $ 数组的**最长公共子序列**长度。\n\n现给定长度为 $ n $ 的数组 $ S $ 和长度为 $ m $ 的数组 $ T $，数组中的数均为正整数。\n\n你现在需要找到最小的非负整数 $k$，使得 $ \\operatorname{LCS}(S^k,T) $ 最大。\n\n出题人很仁慈，如果你无法最小化 $k$，你也可以拿到一部分分数。", "inputFormat": "第一行四个整数 $ n,m,c_1,c_2 $，后两个整数为输出参数 0 或 1。\n\n第二行 $ n $ 个正整数，代表 $ S $ 数组。\n\n第三行 $ m $ 个正整数，代表 $ T $ 数组。", "outputFormat": "输出两个整数 $ c_1 \\cdot \\operatorname{LCS}(S^k,T)$ 和 $c_2\\cdot k$。", "hint": "**【样例 1 解释】**\n\n当 $k = 2$ 时，$S^k = \\text{\\{23 34 \\textcolor{red}{53 23 34} 53\\}}$，其中标红的是 $S^k$ 和 $T$ 的最长公共子序列。\n\n**【数据范围】**\n\n**提示：本题开启捆绑测试。**\n\n对于 $ 100\\% $ 的数据，保证 $ 1 \\le n,m,S_i,T_i \\le 10^6 $，$ c_1,c_2 \\in \\{0,1\\} $。\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\n\\textbf{Subtask} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1& c_1=c_2=0 & 2 \\r\n\\textsf2& n \\le 10^3，m \\le 10^2 & 8 \\r\n\\textsf3& n \\le 10^4，m \\le 10^3 & 15 \\r\n\\textsf4& c_2=0 & 15 \\r\n\\textsf5& n,m \\le 10^5，S_i,T_i \\le 26 & 20 \\r\n\\textsf6& 无特殊限制 & 40 \\r\n\\end{array}\n$$\n\n在赛后新添加的 hack 测试点会加入 subtask7。\n\n### 题目来源\n\n| 项目 | 人员 |\n|:-:|:-:|\n|idea| 船酱魔王 |\n|data| 船酱魔王 |\n|check| Sudohry |\n|solution| 船酱魔王 |", "locale": "zh-CN"}}}
{"pid": "P9573", "type": "P", "difficulty": 3, "samples": [["3\n9 1\n5 2\n1 12345\n", "3 8 7 1 4 5 6 9 2\n1 5 3 2 4\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「TAOI-2」核心共振", "background": "⚡超越一切震慑凡人⚡\n\n⚡带来终结机械降神⚡\n\n⚡风暴之力充满全身⚡\n\n⚡最后一击核心共振⚡", "description": "给定正整数 $p$ 和 $n$。对于一个排列，我们称其中相邻两项产生「共振」当且仅当这两个数的和为 $p$ 的倍数。\n\n请你构造一个 $1 \\sim n$ 的排列，最大化其中产生「共振」的次数。如果有多种方案，输出任意一种即可。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，代表数据的组数。\n\n对于每组测试数据，输入包含一行，为由空格隔开的两个正整数 $n$ 和 $p$。", "outputFormat": "对于每组测试数据，输出一行，包含由空格隔开的 $n$ 个正整数，代表你构造的排列。", "hint": "**本题采用捆绑测试。**\n\n+ Subtask 0（15 pts）：$n \\leq 9$，$T \\le 10$。\n+ Subtask 1（10 pts）：$p = 2$。\n+ Subtask 2（30 pts）：$p = 3$。\n+ Subtask 3（45 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq n \\leq 10^5$，$1 \\leq p \\leq 10^8$，$1 \\leq T \\leq 10^4$，$1 \\leq \\sum n \\leq 3\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TAOI-2」核心共振", "background": "⚡超越一切震慑凡人⚡\n\n⚡带来终结机械降神⚡\n\n⚡风暴之力充满全身⚡\n\n⚡最后一击核心共振⚡", "description": "给定正整数 $p$ 和 $n$。对于一个排列，我们称其中相邻两项产生「共振」当且仅当这两个数的和为 $p$ 的倍数。\n\n请你构造一个 $1 \\sim n$ 的排列，最大化其中产生「共振」的次数。如果有多种方案，输出任意一种即可。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，代表数据的组数。\n\n对于每组测试数据，输入包含一行，为由空格隔开的两个正整数 $n$ 和 $p$。", "outputFormat": "对于每组测试数据，输出一行，包含由空格隔开的 $n$ 个正整数，代表你构造的排列。", "hint": "**本题采用捆绑测试。**\n\n+ Subtask 0（15 pts）：$n \\leq 9$，$T \\le 10$。\n+ Subtask 1（10 pts）：$p = 2$。\n+ Subtask 2（30 pts）：$p = 3$。\n+ Subtask 3（45 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq n \\leq 10^5$，$1 \\leq p \\leq 10^8$，$1 \\leq T \\leq 10^4$，$1 \\leq \\sum n \\leq 3\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9574", "type": "P", "difficulty": 4, "samples": [["6\n3\nTTT\n4\nBTTB\n5\nTBBTT\n6\nBTBTBB\n7\nBTTBTTB\n17\nTTBTBTTBTBTTTBTTB\n", "3\n2\n2\n1\n3\n5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「TAOI-2」Break Through the Barrier", "background": "", "description": "有一个由 $\\tt B$ 和 $\\tt T$ 组成的字符串。\n\n你可以进行如下操作：选择一个长度为 $4$ 的子串，其恰好等于 $\\texttt{BTTB}$，并将其修改为 $\\texttt{TBBT}$。你可以进行这种操作任意多次（也可以不操作）。\n\n定义一个字符串的权值为最长的 $\\texttt{T}$ 连续段长度。你需要通过如上操作使得字符串的权值尽可能大。输出这个最大值。\n\n+ 子串的定义：一个字符串 $b$ 被称为字符串 $a$ 的子串，当且仅当可以通过删除 $a$ 开头若干个（可以是 $0$ 个，下同）字符和结尾若干个字符得到 $b$。\n+ $\\texttt{T}$ 连续段的定义：一个原字符串的仅由 $\\texttt{T}$ 构成的子串。", "inputFormat": "第一行一个正整数 $T$ 表示数据组数。\n\n接下来每组数据，第一行一个正整数 $n$ 表示字符串长度，第二行一个长度为 $n$ 的字符串 $S$，表示题目中的字符串。", "outputFormat": "$T$ 行，每行一个非负整数，表示最长 $\\texttt{T}$ 连续段的长度。", "hint": "**本题采用捆绑测试。**\n\n记 $\\sum n$ 为所有数据中的 $n$ 的和。\n\n+ Subtask 0（5 pts）：$n \\leq 7$。\n+ Subtask 1（20 pts）：$T \\leq 10$，$n \\leq 10$。\n+ Subtask 2（25 pts）：$\\sum n \\leq 5000$。\n+ Subtask 3（5 pts）：保证给定的字符串无法进行任何操作。\n+ Subtask 4（45 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10^3$，$1 \\leq n \\leq 10^5$，$1 \\leq \\sum n \\leq 5\\times 10^5$，字符串只包含字符 `B` 和 `T`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TAOI-2」Break Through the Barrier", "background": "", "description": "有一个由 $\\tt B$ 和 $\\tt T$ 组成的字符串。\n\n你可以进行如下操作：选择一个长度为 $4$ 的子串，其恰好等于 $\\texttt{BTTB}$，并将其修改为 $\\texttt{TBBT}$。你可以进行这种操作任意多次（也可以不操作）。\n\n定义一个字符串的权值为最长的 $\\texttt{T}$ 连续段长度。你需要通过如上操作使得字符串的权值尽可能大。输出这个最大值。\n\n+ 子串的定义：一个字符串 $b$ 被称为字符串 $a$ 的子串，当且仅当可以通过删除 $a$ 开头若干个（可以是 $0$ 个，下同）字符和结尾若干个字符得到 $b$。\n+ $\\texttt{T}$ 连续段的定义：一个原字符串的仅由 $\\texttt{T}$ 构成的子串。", "inputFormat": "第一行一个正整数 $T$ 表示数据组数。\n\n接下来每组数据，第一行一个正整数 $n$ 表示字符串长度，第二行一个长度为 $n$ 的字符串 $S$，表示题目中的字符串。", "outputFormat": "$T$ 行，每行一个非负整数，表示最长 $\\texttt{T}$ 连续段的长度。", "hint": "**本题采用捆绑测试。**\n\n记 $\\sum n$ 为所有数据中的 $n$ 的和。\n\n+ Subtask 0（5 pts）：$n \\leq 7$。\n+ Subtask 1（20 pts）：$T \\leq 10$，$n \\leq 10$。\n+ Subtask 2（25 pts）：$\\sum n \\leq 5000$。\n+ Subtask 3（5 pts）：保证给定的字符串无法进行任何操作。\n+ Subtask 4（45 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10^3$，$1 \\leq n \\leq 10^5$，$1 \\leq \\sum n \\leq 5\\times 10^5$，字符串只包含字符 `B` 和 `T`。", "locale": "zh-CN"}}}
{"pid": "P9575", "type": "P", "difficulty": 5, "samples": [["3\n1 1 1", "-1"], ["4\n4 1 2 3", "3\n0001\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2023", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛", "Ad-hoc"], "title": "「TAOI-2」喵了个喵 Ⅳ", "background": "小 S 共有 $n$ 只可爱的喵喵，第 $i$ 只喵喵有可爱度 $a_i$。小 S 想要把他的喵喵分成两组。考虑到小 S 的喵喵不像某些喵喵有九条命，他的喵喵只有一条，于是一只喵喵不能被同时分到两组内（请不要试图想象这个画面）。同时，如果一只喵喵没有被分到任意一组，他就会十分生气，很有可能导致小 S 失眠。\n\n当然，小 S 也希望两组的**组可爱度**相等。即存在一个正整数 $x$，使得其中一组的 $\\gcd(x, a_i)$ 之和等于另一组的 $\\gcd(x, a_i)$ 之和。请你判断是否可以使得小 S 可以将喵喵分成两组，并可以找出一个 $x$ 使得两组的**组可爱度**相等。", "description": "给定正整数 $n$ 及长度为 $n$ 的正整数序列 $a$，请你将 $a$ 划分为两个集合 $B, C$ 并给出正整数 $x$，使得 $\\sum_{y\\in B}\\gcd(x,y) = \\sum_{y\\in C}\\gcd(x,y)$。如果无解，输出 $-1$。\n\n你需要保证 $1 \\leq x \\leq 10^9$，保证在本题的数据约束下若有解则总有 $x \\leq 10^9$ 的解。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行为 $n$ 个正整数，其中第 $i$ 个表示 $a_i$。", "outputFormat": "如无解，仅输出一行一个整数 $-1$。否则：\n\n第一行输出一个正整数 $x$。\n\n第二行输出一个长度为 $n$ 的 $\\tt 01$ 串，第 $i$ 个数为 $\\tt 0$ 代表 $a_i$ 被划分到集合 $B$ 中，为 $\\tt 1$ 代表 $a_i$ 被划分到集合 $C$ 中。", "hint": "**本题采用捆绑测试。**\n\n+ Subtask 0（2 pts）：$n$ 为偶数。\n+ Subtask 1（8 pts）：$a_i$ 均为奇数。\n+ Subtask 2（15 pts）：$n \\leq 50$，$a_i \\leq 50$。\n+ Subtask 3（25 pts）：$n \\leq 10^3$，$a_i \\leq 10^3$。\n+ Subtask 4（50 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq n \\leq 10^5$，$1 \\leq a_i \\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TAOI-2」喵了个喵 Ⅳ", "background": "小 S 共有 $n$ 只可爱的喵喵，第 $i$ 只喵喵有可爱度 $a_i$。小 S 想要把他的喵喵分成两组。考虑到小 S 的喵喵不像某些喵喵有九条命，他的喵喵只有一条，于是一只喵喵不能被同时分到两组内（请不要试图想象这个画面）。同时，如果一只喵喵没有被分到任意一组，他就会十分生气，很有可能导致小 S 失眠。\n\n当然，小 S 也希望两组的**组可爱度**相等。即存在一个正整数 $x$，使得其中一组的 $\\gcd(x, a_i)$ 之和等于另一组的 $\\gcd(x, a_i)$ 之和。请你判断是否可以使得小 S 可以将喵喵分成两组，并可以找出一个 $x$ 使得两组的**组可爱度**相等。", "description": "给定正整数 $n$ 及长度为 $n$ 的正整数序列 $a$，请你将 $a$ 划分为两个集合 $B, C$ 并给出正整数 $x$，使得 $\\sum_{y\\in B}\\gcd(x,y) = \\sum_{y\\in C}\\gcd(x,y)$。如果无解，输出 $-1$。\n\n你需要保证 $1 \\leq x \\leq 10^9$，保证在本题的数据约束下若有解则总有 $x \\leq 10^9$ 的解。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行为 $n$ 个正整数，其中第 $i$ 个表示 $a_i$。", "outputFormat": "如无解，仅输出一行一个整数 $-1$。否则：\n\n第一行输出一个正整数 $x$。\n\n第二行输出一个长度为 $n$ 的 $\\tt 01$ 串，第 $i$ 个数为 $\\tt 0$ 代表 $a_i$ 被划分到集合 $B$ 中，为 $\\tt 1$ 代表 $a_i$ 被划分到集合 $C$ 中。", "hint": "**本题采用捆绑测试。**\n\n+ Subtask 0（2 pts）：$n$ 为偶数。\n+ Subtask 1（8 pts）：$a_i$ 均为奇数。\n+ Subtask 2（15 pts）：$n \\leq 50$，$a_i \\leq 50$。\n+ Subtask 3（25 pts）：$n \\leq 10^3$，$a_i \\leq 10^3$。\n+ Subtask 4（50 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq n \\leq 10^5$，$1 \\leq a_i \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9576", "type": "P", "difficulty": 6, "samples": [["aabbaaba\naba", "23"], ["ciaohallo\nciallo", "2"], ["babacbbaababbacbababbabbbaaabaabababbabbabababba\nababab", "1535"], ["sssssssssssssssssssssssssssssssssssss\nsss", "15470"], ["abcbbbcbcbcbacbacbaaabcbcbcbaabacbca\ncb", "3995"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "树状数组", "洛谷原创", "O2优化", "哈希 hashing", "洛谷月赛"], "title": "「TAOI-2」Ciallo～(∠・ω< )⌒★", "background": "柚子厨差不多得了。\n\n~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0nqiwonz.png)", "description": "小 δ 喜欢造词。他学习了一种造词方法。\n\n首先，他拥有一个「模板串」，设为 $s$。然后他会选择一对 $1 \\le l \\le r \\le |s|$，将 $s$ 的第 $l$ 至 $r$ 个字符删掉，把两边的字符串拼起来，他设得到的这个新字符串为 $s'$。\n\n接下来，他会选择一对新的 $1 \\le l' \\le r' \\le |s'|$，然后设 $s'$ 的第 $l'$ 至 $r'$ 个字符组成的字符串为 $s''$。他所造出的这个词就是 $s''$。\n\n例如，如果「模板串」为 $s=\\texttt{cciaohalloo}$，那么一种造词方法是，选择 $l=5$，$r=7$，得到 $s'=\\texttt{ccialloo}$，然后选择 $l'=2$，$r'=7$，得到 $s''=\\texttt{ciallo}$。\n\n现在小 δ 有一个「目标串」 $t$，他想知道有多少种不同的方案，可以使用「模板串」$s$ 造出单词 $t$。定义两种方案相同当且仅当选择的 $l,r,l',r'$ 均相同。", "inputFormat": "共两行，分别为字符串 $s$ 和 $t$。", "outputFormat": "共一行，代表造出「目标串」$t$ 的方案数。", "hint": "### 数据范围\n\n**本题采用捆绑测试**。\n\n- Subtask 0（6 points）：$|s| \\le 400$，$|t| \\le 200$。\n- Subtask 1（10 points）：$|s| \\le 700$，$|t| \\le 300$。\n- Subtask 2（10 points）：$\\forall i,j,s_i=t_j$。\n- Subtask 3（10 points）：$|t|=1$。\n- Subtask 4（20 points）：$|s| \\le 10^4$，$|t| \\le 3 \\times 10^3$。\n- Subtask 5（14 points）：$|t|=2$。\n- Subtask 6（30 points）：无特殊限制。\n\n对于所有测试数据，$1 \\le |s| \\le 4 \\times 10^5$，$1 \\le |t| \\le 2 \\times 10^5$。$s,t$ 只包含小写英文字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TAOI-2」Ciallo～(∠・ω< )⌒★", "background": "柚子厨差不多得了。\n\n~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)~(·<)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0nqiwonz.png)", "description": "小 δ 喜欢造词。他学习了一种造词方法。\n\n首先，他拥有一个「模板串」，设为 $s$。然后他会选择一对 $1 \\le l \\le r \\le |s|$，将 $s$ 的第 $l$ 至 $r$ 个字符删掉，把两边的字符串拼起来，他设得到的这个新字符串为 $s'$。\n\n接下来，他会选择一对新的 $1 \\le l' \\le r' \\le |s'|$，然后设 $s'$ 的第 $l'$ 至 $r'$ 个字符组成的字符串为 $s''$。他所造出的这个词就是 $s''$。\n\n例如，如果「模板串」为 $s=\\texttt{cciaohalloo}$，那么一种造词方法是，选择 $l=5$，$r=7$，得到 $s'=\\texttt{ccialloo}$，然后选择 $l'=2$，$r'=7$，得到 $s''=\\texttt{ciallo}$。\n\n现在小 δ 有一个「目标串」 $t$，他想知道有多少种不同的方案，可以使用「模板串」$s$ 造出单词 $t$。定义两种方案相同当且仅当选择的 $l,r,l',r'$ 均相同。", "inputFormat": "共两行，分别为字符串 $s$ 和 $t$。", "outputFormat": "共一行，代表造出「目标串」$t$ 的方案数。", "hint": "### 数据范围\n\n**本题采用捆绑测试**。\n\n- Subtask 0（6 points）：$|s| \\le 400$，$|t| \\le 200$。\n- Subtask 1（10 points）：$|s| \\le 700$，$|t| \\le 300$。\n- Subtask 2（10 points）：$\\forall i,j,s_i=t_j$。\n- Subtask 3（10 points）：$|t|=1$。\n- Subtask 4（20 points）：$|s| \\le 10^4$，$|t| \\le 3 \\times 10^3$。\n- Subtask 5（14 points）：$|t|=2$。\n- Subtask 6（30 points）：无特殊限制。\n\n对于所有测试数据，$1 \\le |s| \\le 4 \\times 10^5$，$1 \\le |t| \\le 2 \\times 10^5$。$s,t$ 只包含小写英文字母。", "locale": "zh-CN"}}}
{"pid": "P9577", "type": "P", "difficulty": 2, "samples": [["3 4 6", "2"], ["4 7 16", "4"], ["3 2 5", "1"], ["114 5141 919810", "62166352"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「Cfz Round 1」Dead Cells", "background": "Cidoai 上完生物课后，突发奇想出了这么一道题。\n\n太水了……吧。Cidoai 说着把这道题送给了你，让你去发掘这道题的快乐。", "description": "有一天，在第 $0$ 个小时，一个细胞生成了，每过 $a$ 小时，细胞的数量就变成当前的两倍，每过 $b$ 小时，细胞的数量就变成当前的一半（向上取整）。\n\n假如当前时间是 $a$ 和 $b$ 的公倍数，则细胞数量不变。问经过了 $k$ 小时后，细胞个数为多少，答案对 $998244353$ 取模。", "inputFormat": "一行 $3$ 个正整数，分别表示 $a,b,k$。", "outputFormat": "一行一个整数，表示答案。", "hint": "#### 【样例解释 #1】\n\n第 $1 \\sim 6$ 小时的细胞的数量分别为 $1,1,2,1,1,2$。\n\n#### 【数据范围】\n\n对于所有数据，$1 \\le a,b,k \\le 10^6$。\n\n**本题采用捆绑测试。**\n\n|子任务编号|分值|$k \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1$|$15$|$10^6$|保证 $a=b$|\n|$2$|$20$|$10^6$|保证 $a\\gt b$|\n|$3$|$25$|$20$|无|\n|$4$|$40$|$10^6$|无|\n\n#### 【提示】\n\n$\\dfrac{a}{2} \\equiv a \\times 499122177 \\pmod {998244353}$，即在对 $998244353$ 取模的情况下，您可以用 $a \\times 499122177$ 代替 $a \\div 2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 1」Dead Cells", "background": "Cidoai 上完生物课后，突发奇想出了这么一道题。\n\n太水了……吧。Cidoai 说着把这道题送给了你，让你去发掘这道题的快乐。", "description": "有一天，在第 $0$ 个小时，一个细胞生成了，每过 $a$ 小时，细胞的数量就变成当前的两倍，每过 $b$ 小时，细胞的数量就变成当前的一半（向上取整）。\n\n假如当前时间是 $a$ 和 $b$ 的公倍数，则细胞数量不变。问经过了 $k$ 小时后，细胞个数为多少，答案对 $998244353$ 取模。", "inputFormat": "一行 $3$ 个正整数，分别表示 $a,b,k$。", "outputFormat": "一行一个整数，表示答案。", "hint": "#### 【样例解释 #1】\n\n第 $1 \\sim 6$ 小时的细胞的数量分别为 $1,1,2,1,1,2$。\n\n#### 【数据范围】\n\n对于所有数据，$1 \\le a,b,k \\le 10^6$。\n\n**本题采用捆绑测试。**\n\n|子任务编号|分值|$k \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1$|$15$|$10^6$|保证 $a=b$|\n|$2$|$20$|$10^6$|保证 $a\\gt b$|\n|$3$|$25$|$20$|无|\n|$4$|$40$|$10^6$|无|\n\n#### 【提示】\n\n$\\dfrac{a}{2} \\equiv a \\times 499122177 \\pmod {998244353}$，即在对 $998244353$ 取模的情况下，您可以用 $a \\times 499122177$ 代替 $a \\div 2$。", "locale": "zh-CN"}}}
{"pid": "P9578", "type": "P", "difficulty": 3, "samples": [["4", "1 4 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛", "Ad-hoc"], "title": "「Cfz Round 1」Permutation", "background": "$1+2+3+\\cdots+n=\\dfrac {n\\times (n+1)} 2$。", "description": "给定一个正整数 $n$。\n\n我们定义，对于一个 $1$ 到 $n$ 的排列 $\\{x_n\\}$， $f(\\{x_n\\})=\\max\\limits_{i=1}^{n}(x_i+x_{(i \\bmod n)+1})-\\min\\limits_{i=1}^{n}(x_i+x_{(i \\bmod n)+1})$。\n\n你需要构造一个 $1$ 到 $n$ 的排列 $\\{p_n\\}$，使得对于任意一个 $1$ 到 $n$ 的排列 $\\{q_n\\}$，都有 $f(\\{p_n\\})\\le f(\\{q_n\\})$，并输出你构造的排列 $\\{p_n\\}$。", "inputFormat": "一个正整数 $n$。", "outputFormat": "$n$ 个整数，表示你构造的排列 $\\{p_n\\}$，之间用空格分隔。\n\n所有满足条件的输出均可通过。", "hint": "#### 【样例解释 #1】\n\n$f(\\{1,4,2,3\\})=2$，可以证明对于任意一个 $1$ 到 $n$ 的排列 $\\{q_n\\}$，都有 $f(\\{1,4,2,3\\})\\le f(\\{q_n\\})$。\n\n当然，$\\{1,3,2,4\\},\\{3,1,4,2\\},\\{4,1,3,2\\}$ 等也为合法的排列 $\\{p_n\\}$。\n\n#### 【数据范围】\n\n对于所有数据，$3 \\le n \\le 10^6$。\n\n**本题采用捆绑测试。**\n\n|子任务编号|分值|$n \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1$|$20$|$8$|无|\n|$2$|$25$|$10^6$|保证 $n \\equiv 0 \\pmod 2$|\n|$3$|$25$|$10^6$|保证 $n \\equiv 1 \\pmod 2$|\n|$4$|$30$|$10^6$|无|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 1」Permutation", "background": "$1+2+3+\\cdots+n=\\dfrac {n\\times (n+1)} 2$。", "description": "给定一个正整数 $n$。\n\n我们定义，对于一个 $1$ 到 $n$ 的排列 $\\{x_n\\}$， $f(\\{x_n\\})=\\max\\limits_{i=1}^{n}(x_i+x_{(i \\bmod n)+1})-\\min\\limits_{i=1}^{n}(x_i+x_{(i \\bmod n)+1})$。\n\n你需要构造一个 $1$ 到 $n$ 的排列 $\\{p_n\\}$，使得对于任意一个 $1$ 到 $n$ 的排列 $\\{q_n\\}$，都有 $f(\\{p_n\\})\\le f(\\{q_n\\})$，并输出你构造的排列 $\\{p_n\\}$。", "inputFormat": "一个正整数 $n$。", "outputFormat": "$n$ 个整数，表示你构造的排列 $\\{p_n\\}$，之间用空格分隔。\n\n所有满足条件的输出均可通过。", "hint": "#### 【样例解释 #1】\n\n$f(\\{1,4,2,3\\})=2$，可以证明对于任意一个 $1$ 到 $n$ 的排列 $\\{q_n\\}$，都有 $f(\\{1,4,2,3\\})\\le f(\\{q_n\\})$。\n\n当然，$\\{1,3,2,4\\},\\{3,1,4,2\\},\\{4,1,3,2\\}$ 等也为合法的排列 $\\{p_n\\}$。\n\n#### 【数据范围】\n\n对于所有数据，$3 \\le n \\le 10^6$。\n\n**本题采用捆绑测试。**\n\n|子任务编号|分值|$n \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1$|$20$|$8$|无|\n|$2$|$25$|$10^6$|保证 $n \\equiv 0 \\pmod 2$|\n|$3$|$25$|$10^6$|保证 $n \\equiv 1 \\pmod 2$|\n|$4$|$30$|$10^6$|无|", "locale": "zh-CN"}}}
{"pid": "P9579", "type": "P", "difficulty": 4, "samples": [["2\n3 2\n2 5", "7"], ["4\n4 7\n10 8\n9 11\n4 2", "18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "线段树", "树状数组", "洛谷原创", "O2优化", "排序", "洛谷月赛"], "title": "「Cfz Round 1」Elevator", "background": "电梯是一个可以让人充分思考的空间。", "description": "给定两个长度为 $n$ 的数组 $a,b$。我们称序列 $p$ 是满足条件的，设 $p$ 的长度为 $m$，当且仅当：\n\n- $p_1=1$；  \n- 对于所有的 $1\\le i<m$，都有 $|p_i-p_{i+1}|=1$；  \n- 对于所有的 $1\\le k\\le n$，都存在一个有序数对 $(i,j)$，满足 $1 \\le i < j \\le m$ 且 $p_i=a_k$，$p_j=b_k$。\n\n你需要输出所有满足条件的序列 $p$ 中，$p$ 的长度的最小值。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $a_i,b_i$。", "outputFormat": "一个整数，表示所有满足条件的序列 $p$ 中，$p$ 的长度的最小值。", "hint": "#### 【样例解释 #1】\n\n序列 $p$ 的长度的最小值为 $7$，此时的序列 $p$ 为 $\\{1,2,3,2,3,4,5\\}$。\n\n#### 【数据范围】\n\n对于所有数据，$1 \\le n \\le 5\\times10^5$，$1 \\le a_i,b_i \\le 10^9$，保证 $a_i \\neq b_i$。\n\n**本题采用捆绑测试。**\n\n|子任务编号|分值|$n \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1$|$9$|$1$|无|\n|$2$|$9$|$5\\times10^5$|保证 $a_i < b_i$|\n|$3$|$21$|$5\\times10^5$| $a_i,b_i$ 在 $[1,10^9]$ 内随机生成|\n|$4$|$27$|$2000$|无|\n|$5$|$34$|$5\\times10^5$|无|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 1」Elevator", "background": "电梯是一个可以让人充分思考的空间。", "description": "给定两个长度为 $n$ 的数组 $a,b$。我们称序列 $p$ 是满足条件的，设 $p$ 的长度为 $m$，当且仅当：\n\n- $p_1=1$；  \n- 对于所有的 $1\\le i<m$，都有 $|p_i-p_{i+1}|=1$；  \n- 对于所有的 $1\\le k\\le n$，都存在一个有序数对 $(i,j)$，满足 $1 \\le i < j \\le m$ 且 $p_i=a_k$，$p_j=b_k$。\n\n你需要输出所有满足条件的序列 $p$ 中，$p$ 的长度的最小值。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $a_i,b_i$。", "outputFormat": "一个整数，表示所有满足条件的序列 $p$ 中，$p$ 的长度的最小值。", "hint": "#### 【样例解释 #1】\n\n序列 $p$ 的长度的最小值为 $7$，此时的序列 $p$ 为 $\\{1,2,3,2,3,4,5\\}$。\n\n#### 【数据范围】\n\n对于所有数据，$1 \\le n \\le 5\\times10^5$，$1 \\le a_i,b_i \\le 10^9$，保证 $a_i \\neq b_i$。\n\n**本题采用捆绑测试。**\n\n|子任务编号|分值|$n \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1$|$9$|$1$|无|\n|$2$|$9$|$5\\times10^5$|保证 $a_i < b_i$|\n|$3$|$21$|$5\\times10^5$| $a_i,b_i$ 在 $[1,10^9]$ 内随机生成|\n|$4$|$27$|$2000$|无|\n|$5$|$34$|$5\\times10^5$|无|", "locale": "zh-CN"}}}
{"pid": "P9580", "type": "P", "difficulty": 6, "samples": [["3 2 0\n100\n3 1 2\n1 3\n2 3", "2\n0"], ["5 2 0\n10100\n2 7 6 3 5\n1 5\n2 4", "8\n4"], ["20 100 8551679995685981130\n11001000000000000000", "1673"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树状数组", "洛谷原创", "O2优化", "线性基", "洛谷月赛", "单调栈"], "title": "「Cfz Round 1」Wqs Game", "background": "『博』和『奕』喜欢博弈，尤其喜欢 wqs 带权博弈。", "description": "wqs 带权博弈在一个数列 $\\{a_i\\}$ 上进行，对应有一个 $01$ 串 $\\{b_i\\}$。\n\n1. 若 $b_i=0$，则 $a_i$ 这个数字是属于『博』的；\n2. 若 $b_i=1$，则 $a_i$ 这个数字是属于『奕』的。\n\n游戏规则是，每次给定一个区间 $[l,r]$，从 $a_l$ 到 $a_r$，拥有这个数的人**依次**决定选该数或者不选，两个人都会采用**最优策略**。\n\n因为『博』很强大，她会让着『奕』，于是博弈的规则是，如果最后两个人选的数**按位异或和不为零**，则『奕』获胜，否则『博』获胜。\n\n注意每个人**能看到**对方的选数情况，可以选**多个**数（只要这个数是自己的），最后计算两个人选数的总**异或**和。\n\n对于任意区间 $[l,r]$，若『奕』获胜，则 $w(l,r)=1$，否则 $w(l,r)=0$。\n\n每次查询 $\\sum\\limits_{l=L}^R\\sum\\limits_{r=l}^Rw(l,r)$ 的值，对 $2^{32}$ 取模。\n\n由于输入输出量过大，对于 $tp\\ne 0$ 的测试点，选手需要自行生成数列 $a_i$ 和询问区间 $[L,R]$，并用特殊方式输出答案。\n\n注意正解**不依赖**特殊的输入输出方式。", "inputFormat": "第一行三个正整数 $n,q,tp$，表示数列长度，天数以及每天局数，以及读入方式。\n\n第二行一个长度为 $n$ 的字符串，表示 $01$ 串 $\\{b_i\\}$；\n\n若 $tp=0$，则第三行 $n$ 个正整数，表示数列 $\\{a_i\\}$，接下来 $q$ 行，每行两个正整数 $L,R$，表示询问  $\\sum\\limits_{l=L}^R\\sum\\limits_{r=l}^Rw(l,r)$ 对 $2^{32}$ 取模的值。\n\n否则，令 `Sd` 初值为 $tp$，`Cnt` 初值为 $0$，先使用函数 `GetA` 依次生成 $a_i$，再使用函数 `GetLR` 依次生成 $L,R$，具体方式以代码形式后附。", "outputFormat": "若 $tp=0$ 则输出 $q$ 行，每行一个正整数，表示该询问的答案。\n\n否则，令 $ans_i$ 为第 $i$ 次询问的答案，你需要输出 $(ans_i\\times i)\\bmod 2^{32}$ 的**按位异或和**。", "hint": "#### 【样例解释 #1】\n\n只有 $w(1,1)=w(1,2)=1$。\n\n对于区间 $[1,3]$，如果『奕』选第一个数，则『博』选后两个数，否则『博』不选，于是『博』获胜。\n\n注意是从左往右依次选取，『博』在选后两个数之前能够知道『奕』是否选了第一个数。\n\n#### 【样例解释 #2】\n\n只有 $w(1,1)=w(1,2)=w(1,3)=w(1,4)=w(2,3)=w(2,4)=w(3,3)=w(3,4)=1$。\n\n#### 【样例解释 #3】\n\n由于本样例 $tp\\ne 0$，所以你需要使用特殊方式输入输出。\n\n#### 【数据范围】\n\n对于所有数据，$1\\le n\\le5\\times10^5,1\\le q\\le 1.5\\times10^6,0<a_i<2^{60},1\\le L\\le R\\le n,0\\le tp<2^{64}$。\n\n| 子任务编号 | 分值 |    $n\\le$     |     $q\\le$      |  $tp$  |  $a_i<$  | 特殊性质 |\n| :--------: | :--: | :-----------: | :-------------: | :----: | :------: | :------: |\n|    $1$     | $6$  |     $20$      |      $100$      |  $=0$  | $2^{60}$ |    有    |\n|    $2$     | $7$  |     $100$     |     $10^3$      |  $=0$  | $2^{10}$ |    有    |\n|    $3$     | $8$  |     $700$     |     $10^3$      |  $=0$  | $2^{10}$ |    无    |\n|    $4$     | $9$  |    $3000$     |     $10^5$      |  $=0$  | $2^{60}$ |    无    |\n|    $5$     | $14$ | $3\\times10^4$ |     $10^5$      |  $=0$  | $2^{20}$ |    无    |\n|    $6$     | $17$ | $2\\times10^5$ | $1.5\\times10^6$ | $\\ge1$ | $2^{60}$ |    有    |\n|    $7$     | $19$ | $5\\times10^5$ | $1.5\\times10^6$ | $\\ge1$ | $2^{60}$ |    有    |\n|    $8$     | $20$ | $5\\times10^5$ | $1.5\\times10^6$ | $\\ge1$ | $2^{60}$ |    无    |\n\n特殊性质：序列 $b_i$ 中最多有 $10$ 个 $0$。\n\n#### 【备注】\n\n数据生成方式：\n\n```cpp\nusing ul=unsigned long long;\nusing ui=unsigned int;\nui Ans,ans;\nul Sd,Cnt;\nul Rd(){Sd^=Sd<<19,Sd^=Sd>>12,Sd^=Sd<<29;return Sd^=++Cnt;}\nvoid GetA(ul &a){a=Rd()%((1ull<<60)-2)+1;}\nvoid GetLR(int &l,int &r){\n    l=Rd()%n+1,r=Rd()%n+1;\n    if(l>r)swap(l,r);\n}\nint main(){\n    //read n,q,tp,b[i]\n    if(tp){\n        Sd=tp,Cnt=0;\n        for(int i=1;i<=n;++i)GetA(a[i]);\n        for(int qi=1;qi<=q;++qi){\n            GetLR(l,r);\n            //sol\n            Ans^=ans*qi;\n        }\n        printf(\"%u\\n\",Ans);\n\t}\n}\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 1」Wqs Game", "background": "『博』和『奕』喜欢博弈，尤其喜欢 wqs 带权博弈。", "description": "wqs 带权博弈在一个数列 $\\{a_i\\}$ 上进行，对应有一个 $01$ 串 $\\{b_i\\}$。\n\n1. 若 $b_i=0$，则 $a_i$ 这个数字是属于『博』的；\n2. 若 $b_i=1$，则 $a_i$ 这个数字是属于『奕』的。\n\n游戏规则是，每次给定一个区间 $[l,r]$，从 $a_l$ 到 $a_r$，拥有这个数的人**依次**决定选该数或者不选，两个人都会采用**最优策略**。\n\n因为『博』很强大，她会让着『奕』，于是博弈的规则是，如果最后两个人选的数**按位异或和不为零**，则『奕』获胜，否则『博』获胜。\n\n注意每个人**能看到**对方的选数情况，可以选**多个**数（只要这个数是自己的），最后计算两个人选数的总**异或**和。\n\n对于任意区间 $[l,r]$，若『奕』获胜，则 $w(l,r)=1$，否则 $w(l,r)=0$。\n\n每次查询 $\\sum\\limits_{l=L}^R\\sum\\limits_{r=l}^Rw(l,r)$ 的值，对 $2^{32}$ 取模。\n\n由于输入输出量过大，对于 $tp\\ne 0$ 的测试点，选手需要自行生成数列 $a_i$ 和询问区间 $[L,R]$，并用特殊方式输出答案。\n\n注意正解**不依赖**特殊的输入输出方式。", "inputFormat": "第一行三个正整数 $n,q,tp$，表示数列长度，天数以及每天局数，以及读入方式。\n\n第二行一个长度为 $n$ 的字符串，表示 $01$ 串 $\\{b_i\\}$；\n\n若 $tp=0$，则第三行 $n$ 个正整数，表示数列 $\\{a_i\\}$，接下来 $q$ 行，每行两个正整数 $L,R$，表示询问  $\\sum\\limits_{l=L}^R\\sum\\limits_{r=l}^Rw(l,r)$ 对 $2^{32}$ 取模的值。\n\n否则，令 `Sd` 初值为 $tp$，`Cnt` 初值为 $0$，先使用函数 `GetA` 依次生成 $a_i$，再使用函数 `GetLR` 依次生成 $L,R$，具体方式以代码形式后附。", "outputFormat": "若 $tp=0$ 则输出 $q$ 行，每行一个正整数，表示该询问的答案。\n\n否则，令 $ans_i$ 为第 $i$ 次询问的答案，你需要输出 $(ans_i\\times i)\\bmod 2^{32}$ 的**按位异或和**。", "hint": "#### 【样例解释 #1】\n\n只有 $w(1,1)=w(1,2)=1$。\n\n对于区间 $[1,3]$，如果『奕』选第一个数，则『博』选后两个数，否则『博』不选，于是『博』获胜。\n\n注意是从左往右依次选取，『博』在选后两个数之前能够知道『奕』是否选了第一个数。\n\n#### 【样例解释 #2】\n\n只有 $w(1,1)=w(1,2)=w(1,3)=w(1,4)=w(2,3)=w(2,4)=w(3,3)=w(3,4)=1$。\n\n#### 【样例解释 #3】\n\n由于本样例 $tp\\ne 0$，所以你需要使用特殊方式输入输出。\n\n#### 【数据范围】\n\n对于所有数据，$1\\le n\\le5\\times10^5,1\\le q\\le 1.5\\times10^6,0<a_i<2^{60},1\\le L\\le R\\le n,0\\le tp<2^{64}$。\n\n| 子任务编号 | 分值 |    $n\\le$     |     $q\\le$      |  $tp$  |  $a_i<$  | 特殊性质 |\n| :--------: | :--: | :-----------: | :-------------: | :----: | :------: | :------: |\n|    $1$     | $6$  |     $20$      |      $100$      |  $=0$  | $2^{60}$ |    有    |\n|    $2$     | $7$  |     $100$     |     $10^3$      |  $=0$  | $2^{10}$ |    有    |\n|    $3$     | $8$  |     $700$     |     $10^3$      |  $=0$  | $2^{10}$ |    无    |\n|    $4$     | $9$  |    $3000$     |     $10^5$      |  $=0$  | $2^{60}$ |    无    |\n|    $5$     | $14$ | $3\\times10^4$ |     $10^5$      |  $=0$  | $2^{20}$ |    无    |\n|    $6$     | $17$ | $2\\times10^5$ | $1.5\\times10^6$ | $\\ge1$ | $2^{60}$ |    有    |\n|    $7$     | $19$ | $5\\times10^5$ | $1.5\\times10^6$ | $\\ge1$ | $2^{60}$ |    有    |\n|    $8$     | $20$ | $5\\times10^5$ | $1.5\\times10^6$ | $\\ge1$ | $2^{60}$ |    无    |\n\n特殊性质：序列 $b_i$ 中最多有 $10$ 个 $0$。\n\n#### 【备注】\n\n数据生成方式：\n\n```cpp\nusing ul=unsigned long long;\nusing ui=unsigned int;\nui Ans,ans;\nul Sd,Cnt;\nul Rd(){Sd^=Sd<<19,Sd^=Sd>>12,Sd^=Sd<<29;return Sd^=++Cnt;}\nvoid GetA(ul &a){a=Rd()%((1ull<<60)-2)+1;}\nvoid GetLR(int &l,int &r){\n    l=Rd()%n+1,r=Rd()%n+1;\n    if(l>r)swap(l,r);\n}\nint main(){\n    //read n,q,tp,b[i]\n    if(tp){\n        Sd=tp,Cnt=0;\n        for(int i=1;i<=n;++i)GetA(a[i]);\n        for(int qi=1;qi<=q;++qi){\n            GetLR(l,r);\n            //sol\n            Ans^=ans*qi;\n        }\n        printf(\"%u\\n\",Ans);\n\t}\n}\n```", "locale": "zh-CN"}}}
{"pid": "P9581", "type": "P", "difficulty": 1, "samples": [["1 -1", "3"], ["-5 0", "5"], ["51 -154", "256"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「MXOI Round 1」宝箱", "background": "", "description": "小 C 喜欢在一款叫做渊深的游戏中收集宝箱。\n\n现在，小 C 在一条数轴上，他在数轴的原点处。\n\n同时，在这条数轴上还有两个宝箱，它们的坐标分别为 $a$ 和 $b$。\n\n只要小 C 移动到某个宝箱的位置，就认为小 C 收集到了这个宝箱。特殊地，如果小 C 初始时就在某个宝箱的位置，那么他可以直接收集到这个宝箱；如果两个宝箱在同一个位置，那么他可以同时收集这两个宝箱。\n\n小 C 每次可以沿着这条数轴的正方向或负方向移动一个单位长度。小 C 想知道，收集到这两个宝箱至少需要移动多少次？", "inputFormat": "两个整数 $a,b$。", "outputFormat": "一个整数，表示小 C 收集到这两个宝箱所至少需要的移动次数。", "hint": "#### 【样例解释 #1】\n\n小 C 可以先沿着数轴的负方向移动 $1$ 次，再沿着数轴的正方向移动 $2$ 次。\n\n可以证明小 C 至少需要移动 $3$ 次。\n\n#### 【样例解释 #2】\n\n小 C 可以直接沿着数轴的负方向移动 $5$ 次。\n\n可以证明小 C 至少需要移动 $5$ 次。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$\\vert a\\vert,\\vert b\\vert \\le 200$。\n\n|测试点编号|特殊性质|\n|:---:|:---:|\n|$1\\sim3$|保证 $\\vert a\\vert,\\vert b\\vert \\le 1$|\n|$4\\sim6$|保证 $ab=0$|\n|$7\\sim10$|无|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MXOI Round 1」宝箱", "background": "", "description": "小 C 喜欢在一款叫做渊深的游戏中收集宝箱。\n\n现在，小 C 在一条数轴上，他在数轴的原点处。\n\n同时，在这条数轴上还有两个宝箱，它们的坐标分别为 $a$ 和 $b$。\n\n只要小 C 移动到某个宝箱的位置，就认为小 C 收集到了这个宝箱。特殊地，如果小 C 初始时就在某个宝箱的位置，那么他可以直接收集到这个宝箱；如果两个宝箱在同一个位置，那么他可以同时收集这两个宝箱。\n\n小 C 每次可以沿着这条数轴的正方向或负方向移动一个单位长度。小 C 想知道，收集到这两个宝箱至少需要移动多少次？", "inputFormat": "两个整数 $a,b$。", "outputFormat": "一个整数，表示小 C 收集到这两个宝箱所至少需要的移动次数。", "hint": "#### 【样例解释 #1】\n\n小 C 可以先沿着数轴的负方向移动 $1$ 次，再沿着数轴的正方向移动 $2$ 次。\n\n可以证明小 C 至少需要移动 $3$ 次。\n\n#### 【样例解释 #2】\n\n小 C 可以直接沿着数轴的负方向移动 $5$ 次。\n\n可以证明小 C 至少需要移动 $5$ 次。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$\\vert a\\vert,\\vert b\\vert \\le 200$。\n\n|测试点编号|特殊性质|\n|:---:|:---:|\n|$1\\sim3$|保证 $\\vert a\\vert,\\vert b\\vert \\le 1$|\n|$4\\sim6$|保证 $ab=0$|\n|$7\\sim10$|无|", "locale": "zh-CN"}}}
{"pid": "P9582", "type": "P", "difficulty": 2, "samples": [["3 4\n1 1 4 5\n2 1 2 3\n3 1 4 1", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化", "排序", "洛谷月赛"], "title": "「MXOI Round 1」方格", "background": "", "description": "小 C 和方格是好朋友。\n\n小 C 有一个 $n$ 行 $m$ 列的方格图，每个方格中都有一个数字，其中第 $i$ 行第 $j$ 列的方格中的数字为 $a_{i,j}$。\n\n我们定义，在这个方格图中，两个不同的方格不相邻，当且仅当这两个方格**没有公共边**。\n\n小 C 认为，两个不同的方格互为好朋友，当且仅当这两个方格**不相邻**且**这两个方格中的数字相同**。\n\n小 C 想让你帮忙求出，所有方格的好朋友的数量之和是多少。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行，每行 $m$ 个整数，其中第 $i$ 行的第 $j$ 个整数表示 $a_{i,j}$。", "outputFormat": "一个整数，表示所有方格的好朋友的数量之和。", "hint": "#### 【样例解释 #1】\n\n第 $1$ 行第 $1$ 列的方格共有 $3$ 个好朋友，第 $1$ 行第 $2$ 列的方格共有 $2$ 个好朋友，第 $1$ 行第 $3$ 列的方格共有 $1$ 个好朋友，第 $1$ 行第 $4$ 列的方格共有 $0$ 个好朋友；\n\n第 $2$ 行第 $1$ 列的方格共有 $1$ 个好朋友，第 $2$ 行第 $2$ 列的方格共有 $2$ 个好朋友，第 $2$ 行第 $3$ 列的方格共有 $1$ 个好朋友，第 $2$ 行第 $4$ 列的方格共有 $1$ 个好朋友；\n\n第 $3$ 行第 $1$ 列的方格共有 $1$ 个好朋友，第 $3$ 行第 $2$ 列的方格共有 $3$ 个好朋友，第 $3$ 行第 $3$ 列的方格共有 $1$ 个好朋友，第 $3$ 行第 $4$ 列的方格共有 $4$ 个好朋友；\n\n所有方格的好朋友数量之和为 $20$。\n\n#### 【样例 #2】\n\n见附加文件中的 `square/square2.in` 与 `square/square2.ans`。\n\n该样例满足测试点 $1$ 的限制。\n\n#### 【样例 #3】\n\n见附加文件中的 `square/square3.in` 与 `square/square3.ans`。\n\n该样例满足测试点 $4$ 的限制。\n\n#### 【样例 #4】\n\n见附加文件中的 `square/square4.in` 与 `square/square4.ans`。\n\n该样例满足测试点 $6$ 的限制。\n\n#### 【样例 #5】\n\n见附加文件中的 `square/square5.in` 与 `square/square5.ans`。\n\n该样例满足测试点 $10$ 的限制。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 2000$，$1 \\le a_{i,j} \\le 9$。\n\n|测试点编号|$n,m \\le$|$a_{i,j} \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1\\sim3$|$80$|$9$|否|\n|$4\\sim5$|$2000$|$1$|否|\n|$6\\sim7$|$2000$|$9$|是|\n|$8\\sim10$|$2000$|$9$|否|\n\n特殊性质：保证任意两个相邻的方格中的数不相等。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MXOI Round 1」方格", "background": "", "description": "小 C 和方格是好朋友。\n\n小 C 有一个 $n$ 行 $m$ 列的方格图，每个方格中都有一个数字，其中第 $i$ 行第 $j$ 列的方格中的数字为 $a_{i,j}$。\n\n我们定义，在这个方格图中，两个不同的方格不相邻，当且仅当这两个方格**没有公共边**。\n\n小 C 认为，两个不同的方格互为好朋友，当且仅当这两个方格**不相邻**且**这两个方格中的数字相同**。\n\n小 C 想让你帮忙求出，所有方格的好朋友的数量之和是多少。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行，每行 $m$ 个整数，其中第 $i$ 行的第 $j$ 个整数表示 $a_{i,j}$。", "outputFormat": "一个整数，表示所有方格的好朋友的数量之和。", "hint": "#### 【样例解释 #1】\n\n第 $1$ 行第 $1$ 列的方格共有 $3$ 个好朋友，第 $1$ 行第 $2$ 列的方格共有 $2$ 个好朋友，第 $1$ 行第 $3$ 列的方格共有 $1$ 个好朋友，第 $1$ 行第 $4$ 列的方格共有 $0$ 个好朋友；\n\n第 $2$ 行第 $1$ 列的方格共有 $1$ 个好朋友，第 $2$ 行第 $2$ 列的方格共有 $2$ 个好朋友，第 $2$ 行第 $3$ 列的方格共有 $1$ 个好朋友，第 $2$ 行第 $4$ 列的方格共有 $1$ 个好朋友；\n\n第 $3$ 行第 $1$ 列的方格共有 $1$ 个好朋友，第 $3$ 行第 $2$ 列的方格共有 $3$ 个好朋友，第 $3$ 行第 $3$ 列的方格共有 $1$ 个好朋友，第 $3$ 行第 $4$ 列的方格共有 $4$ 个好朋友；\n\n所有方格的好朋友数量之和为 $20$。\n\n#### 【样例 #2】\n\n见附加文件中的 `square/square2.in` 与 `square/square2.ans`。\n\n该样例满足测试点 $1$ 的限制。\n\n#### 【样例 #3】\n\n见附加文件中的 `square/square3.in` 与 `square/square3.ans`。\n\n该样例满足测试点 $4$ 的限制。\n\n#### 【样例 #4】\n\n见附加文件中的 `square/square4.in` 与 `square/square4.ans`。\n\n该样例满足测试点 $6$ 的限制。\n\n#### 【样例 #5】\n\n见附加文件中的 `square/square5.in` 与 `square/square5.ans`。\n\n该样例满足测试点 $10$ 的限制。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 2000$，$1 \\le a_{i,j} \\le 9$。\n\n|测试点编号|$n,m \\le$|$a_{i,j} \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1\\sim3$|$80$|$9$|否|\n|$4\\sim5$|$2000$|$1$|否|\n|$6\\sim7$|$2000$|$9$|是|\n|$8\\sim10$|$2000$|$9$|否|\n\n特殊性质：保证任意两个相邻的方格中的数不相等。", "locale": "zh-CN"}}}
{"pid": "P9583", "type": "P", "difficulty": 3, "samples": [["3 4 5 3\n1 3\n2 4\n1 2\n1 3\n2 2", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化", "排序", "差分", "洛谷月赛"], "title": "「MXOI Round 1」涂色", "background": null, "description": "小 C 正在用彩铅给一张 $n$ 行 $m$ 列的方格纸涂色。初始时，所有方格都是空白的。\n\n他一共要进行 $q$ 次涂色，每次涂色会选取一行或一列，给这一行或这一列的所有方格都添加 $1$ 层颜色。\n\n小 C 喜欢浅色，所以他会在每次涂色结束后，把所有被涂上 $k$ 层颜色的方格的颜色都擦掉，让这些方格都变成空白的。\n\n小 C 想知道，在最终共有多少方格被涂上了颜色。", "inputFormat": "第一行四个整数 $n,m,q,k$。\n\n接下来 $q$ 行，每行两个整数 $op,x$。\n\n- 若 $op=1$，则表示给第 $x$ 行的所有方格都添加 $1$ 层颜色；  \n- 若 $op=2$，则表示给第 $x$ 列的所有方格都添加 $1$ 层颜色。", "outputFormat": "一个整数，表示在最终共有多少方格被涂上了颜色。", "hint": "#### 【样例解释 #1】\n\n第 $1$ 行第 $1$ 列的方格没有被涂上颜色，第 $1$ 行第 $2$ 列的方格被涂上了 $1$ 层颜色，第 $1$ 行第 $3$ 列的方格没有被涂上颜色，第 $1$ 行第 $4$ 列的方格被涂上了 $1$ 层颜色；\n\n第 $2$ 行第 $1$ 列的方格被涂上了 $1$ 层颜色，第 $2$ 行第 $2$ 列的方格被涂上了 $2$ 层颜色，第 $2$ 行第 $3$ 列的方格被涂上了 $1$ 层颜色，第 $2$ 行第 $4$ 列的方格被涂上了 $2$ 层颜色；\n\n第 $3$ 行第 $1$ 列的方格被涂上了 $2$ 层颜色，第 $3$ 行第 $2$ 列的方格的颜色被擦掉了，第 $3$ 行第 $3$ 列的方格被涂上了 $2$ 层颜色，第 $3$ 行第 $4$ 列的方格的颜色也被擦掉了；\n\n最终，共有 $8$ 个方格被涂上了颜色。\n\n#### 【样例 #2】\n\n见附加文件中的 `paint/paint2.in` 与 `paint/paint2.ans`。\n\n该样例满足测试点 $1$ 的限制。\n\n#### 【样例 #3】\n\n见附加文件中的 `paint/paint3.in` 与 `paint/paint3.ans`。\n\n该样例满足测试点 $5$ 的限制。\n\n#### 【样例 #4】\n\n见附加文件中的 `paint/paint4.in` 与 `paint/paint4.ans`。\n\n该样例满足测试点 $20$ 的限制。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 2\\times 10^5$，$1 \\le k \\le q \\le 5 \\times 10^5$，$op \\in \\{1,2\\}$，保证当 $op=1$ 时 $1 \\le x \\le n$，当 $op=2$ 时 $1 \\le x \\le m$。\n\n|测试点编号|$n,m \\le$|$q \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1\\sim4$|$3000$|$3000$|无|\n|$5\\sim9$|$3000$|$5\\times10^5$|无|\n|$10\\sim12$|$2\\times10^5$|$5\\times10^5$|A|\n|$13\\sim16$|$2\\times10^5$|$5\\times10^5$|B|\n|$17\\sim20$|$2\\times10^5$|$5\\times10^5$|无|\n\n特殊性质 A：保证 $op=1$。\n\n特殊性质 B：保证 $k=2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MXOI Round 1」涂色", "background": null, "description": "小 C 正在用彩铅给一张 $n$ 行 $m$ 列的方格纸涂色。初始时，所有方格都是空白的。\n\n他一共要进行 $q$ 次涂色，每次涂色会选取一行或一列，给这一行或这一列的所有方格都添加 $1$ 层颜色。\n\n小 C 喜欢浅色，所以他会在每次涂色结束后，把所有被涂上 $k$ 层颜色的方格的颜色都擦掉，让这些方格都变成空白的。\n\n小 C 想知道，在最终共有多少方格被涂上了颜色。", "inputFormat": "第一行四个整数 $n,m,q,k$。\n\n接下来 $q$ 行，每行两个整数 $op,x$。\n\n- 若 $op=1$，则表示给第 $x$ 行的所有方格都添加 $1$ 层颜色；  \n- 若 $op=2$，则表示给第 $x$ 列的所有方格都添加 $1$ 层颜色。", "outputFormat": "一个整数，表示在最终共有多少方格被涂上了颜色。", "hint": "#### 【样例解释 #1】\n\n第 $1$ 行第 $1$ 列的方格没有被涂上颜色，第 $1$ 行第 $2$ 列的方格被涂上了 $1$ 层颜色，第 $1$ 行第 $3$ 列的方格没有被涂上颜色，第 $1$ 行第 $4$ 列的方格被涂上了 $1$ 层颜色；\n\n第 $2$ 行第 $1$ 列的方格被涂上了 $1$ 层颜色，第 $2$ 行第 $2$ 列的方格被涂上了 $2$ 层颜色，第 $2$ 行第 $3$ 列的方格被涂上了 $1$ 层颜色，第 $2$ 行第 $4$ 列的方格被涂上了 $2$ 层颜色；\n\n第 $3$ 行第 $1$ 列的方格被涂上了 $2$ 层颜色，第 $3$ 行第 $2$ 列的方格的颜色被擦掉了，第 $3$ 行第 $3$ 列的方格被涂上了 $2$ 层颜色，第 $3$ 行第 $4$ 列的方格的颜色也被擦掉了；\n\n最终，共有 $8$ 个方格被涂上了颜色。\n\n#### 【样例 #2】\n\n见附加文件中的 `paint/paint2.in` 与 `paint/paint2.ans`。\n\n该样例满足测试点 $1$ 的限制。\n\n#### 【样例 #3】\n\n见附加文件中的 `paint/paint3.in` 与 `paint/paint3.ans`。\n\n该样例满足测试点 $5$ 的限制。\n\n#### 【样例 #4】\n\n见附加文件中的 `paint/paint4.in` 与 `paint/paint4.ans`。\n\n该样例满足测试点 $20$ 的限制。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 2\\times 10^5$，$1 \\le k \\le q \\le 5 \\times 10^5$，$op \\in \\{1,2\\}$，保证当 $op=1$ 时 $1 \\le x \\le n$，当 $op=2$ 时 $1 \\le x \\le m$。\n\n|测试点编号|$n,m \\le$|$q \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1\\sim4$|$3000$|$3000$|无|\n|$5\\sim9$|$3000$|$5\\times10^5$|无|\n|$10\\sim12$|$2\\times10^5$|$5\\times10^5$|A|\n|$13\\sim16$|$2\\times10^5$|$5\\times10^5$|B|\n|$17\\sim20$|$2\\times10^5$|$5\\times10^5$|无|\n\n特殊性质 A：保证 $op=1$。\n\n特殊性质 B：保证 $k=2$。", "locale": "zh-CN"}}}
{"pid": "P9584", "type": "P", "difficulty": 4, "samples": [["4 2\n2 1 3\n3 2 2\n4 2 4\n1 2\n2 2", "100\n88"], ["9 5\n2 3 6\n6 1 4\n5 2 10\n2 4 1\n9 1 9\n2 8 3\n1 2 3\n7 4 8\n4 9\n7 3\n6 1\n9 7\n2 1\n", "1050\n1054\n970\n1148\n896"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "树形 DP", "前缀和", "洛谷月赛"], "title": "「MXOI Round 1」城市", "background": "", "description": "小 C 是 F 国的总统，尽管这个国家仅存在于网络游戏中，但他确实是这个国家的总统。\n\nF 国由 $n$ 个城市构成，这 $n$ 个城市之间由 $n-1$ 条双向道路互相连接。保证从任意一个城市出发，都能通过这 $n-1$ 条双向道路，到达任意一个城市。\n\n当然，通过这些双向道路是要收费的。通过第 $i$ 条双向道路，需要花费 $c_i$ 元。我们称 $c_i$ 为第 $i$ 条双向道路的费用。\n\n我们定义 $cost(x,y)$ 表示从城市 $x$ 到城市 $y$ 的简单路径上，所有经过的双向道路的费用之和。特殊地，当 $x=y$ 时，$cost(x,y)=0$。\n\n为了促进 F 国发展，小 C 新建了一个城市 $n+1$。现在他需要再新建一条双向道路，使得城市 $n+1$ 也可以通过这 $n$ 条双向道路到达任意一个城市。\n\n他共有 $q$ 个新建道路的方案，每个方案会给定两个参数 $k_i,w_i$；对于每一个方案，你需要求出在新建一条连接城市 $k_i$ 和城市 $n+1$ 且费用为 $w_i$ 的双向道路后，所有 $cost(i,j)$ 之和，即 $\\sum\\limits_{i=1}^{n+1} \\sum\\limits_{j=1}^{n+1} cost(i,j)$。\n\n由于答案可能很大，所以你只需要输出答案对 $998244353$ 取模的结果。\n\n**方案之间相互独立**，也就是说所有方案不会影响现有的道路，这些方案不会真正被施行。", "inputFormat": "第一行两个整数 $n,q$。\n\n接下来 $n-1$ 行，第 $i$ 行三个整数 $u_i,v_i,c_i$，表示存在一条连接城市 $u_i$ 和城市 $v_i$ 的双向道路，其费用为 $c_i$。\n\n接下来 $q$ 行，第 $i$ 行两个整数 $k_i,w_i$，表示一个新建道路的方案。", "outputFormat": "共 $q$ 行，每行一个整数，第 $i$ 行的整数表示在新建一条连接城市 $k_i$ 和城市 $n+1$ 且费用为 $w_i$ 的双向道路后，所有 $cost(i,j)$ 之和对 $998244353$ 取模的结果，即 $\\sum\\limits_{i=1}^{n+1} \\sum\\limits_{j=1}^{n+1} cost(i,j) \\bmod 998244353$。", "hint": "#### 【样例解释 #1】\n\n在新建一条连接城市 $1$ 和城市 $5$ 且费用为 $2$ 的双向道路后，F 国的道路如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j871257i.png)\n\n例如，此时 $cost(4,5)=9$，$cost(1,3)=5$。\n\n容易求得此时 $\\sum\\limits_{i=1}^{n+1} \\sum\\limits_{j=1}^{n+1} cost(i,j)=100$。\n\n#### 【样例 #3】\n\n见附加文件中的 `city/city3.in` 与 `city/city3.ans`。\n\n该样例满足测试点 $4$ 的限制。\n\n#### 【样例 #4】\n\n见附加文件中的 `city/city4.in` 与 `city/city4.ans`。\n\n该样例满足测试点 $11$ 的限制。\n\n#### 【样例 #5】\n\n见附加文件中的 `city/city5.in` 与 `city/city5.ans`。\n\n该样例满足测试点 $14$ 的限制。\n\n#### 【样例 #6】\n\n见附加文件中的 `city/city6.in` 与 `city/city6.ans`。\n\n该样例满足测试点 $20$ 的限制。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 2\\times10^5$，$1 \\le q \\le 2\\times10^5$，$1 \\le u_i,v_i,k_i \\le n$，$1 \\le c_i,w_i \\le 10^6$，保证从任意一个城市出发，都能通过原本存在的 $n-1$ 条双向道路，到达任意一个城市。\n\n|测试点编号|$n \\le$|$q \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1\\sim3$|$80$|$80$|无|\n|$4\\sim7$|$5000$|$5000$|无|\n|$8\\sim10$|$5000$|$2\\times10^5$|无|\n|$11\\sim13$|$2\\times10^5$|$2\\times10^5$|A|\n|$14\\sim16$|$2\\times10^5$|$2\\times10^5$|B|\n|$17\\sim20$|$2\\times10^5$|$2\\times10^5$|无|\n\n特殊性质 A：保证对于所有的 $1 \\le i \\lt n$，都有 $u_i=i,v_i=i+1$。\n\n特殊性质 B：保证对于所有的 $1 \\le i \\le q$，都有 $k_i=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MXOI Round 1」城市", "background": "", "description": "小 C 是 F 国的总统，尽管这个国家仅存在于网络游戏中，但他确实是这个国家的总统。\n\nF 国由 $n$ 个城市构成，这 $n$ 个城市之间由 $n-1$ 条双向道路互相连接。保证从任意一个城市出发，都能通过这 $n-1$ 条双向道路，到达任意一个城市。\n\n当然，通过这些双向道路是要收费的。通过第 $i$ 条双向道路，需要花费 $c_i$ 元。我们称 $c_i$ 为第 $i$ 条双向道路的费用。\n\n我们定义 $cost(x,y)$ 表示从城市 $x$ 到城市 $y$ 的简单路径上，所有经过的双向道路的费用之和。特殊地，当 $x=y$ 时，$cost(x,y)=0$。\n\n为了促进 F 国发展，小 C 新建了一个城市 $n+1$。现在他需要再新建一条双向道路，使得城市 $n+1$ 也可以通过这 $n$ 条双向道路到达任意一个城市。\n\n他共有 $q$ 个新建道路的方案，每个方案会给定两个参数 $k_i,w_i$；对于每一个方案，你需要求出在新建一条连接城市 $k_i$ 和城市 $n+1$ 且费用为 $w_i$ 的双向道路后，所有 $cost(i,j)$ 之和，即 $\\sum\\limits_{i=1}^{n+1} \\sum\\limits_{j=1}^{n+1} cost(i,j)$。\n\n由于答案可能很大，所以你只需要输出答案对 $998244353$ 取模的结果。\n\n**方案之间相互独立**，也就是说所有方案不会影响现有的道路，这些方案不会真正被施行。", "inputFormat": "第一行两个整数 $n,q$。\n\n接下来 $n-1$ 行，第 $i$ 行三个整数 $u_i,v_i,c_i$，表示存在一条连接城市 $u_i$ 和城市 $v_i$ 的双向道路，其费用为 $c_i$。\n\n接下来 $q$ 行，第 $i$ 行两个整数 $k_i,w_i$，表示一个新建道路的方案。", "outputFormat": "共 $q$ 行，每行一个整数，第 $i$ 行的整数表示在新建一条连接城市 $k_i$ 和城市 $n+1$ 且费用为 $w_i$ 的双向道路后，所有 $cost(i,j)$ 之和对 $998244353$ 取模的结果，即 $\\sum\\limits_{i=1}^{n+1} \\sum\\limits_{j=1}^{n+1} cost(i,j) \\bmod 998244353$。", "hint": "#### 【样例解释 #1】\n\n在新建一条连接城市 $1$ 和城市 $5$ 且费用为 $2$ 的双向道路后，F 国的道路如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j871257i.png)\n\n例如，此时 $cost(4,5)=9$，$cost(1,3)=5$。\n\n容易求得此时 $\\sum\\limits_{i=1}^{n+1} \\sum\\limits_{j=1}^{n+1} cost(i,j)=100$。\n\n#### 【样例 #3】\n\n见附加文件中的 `city/city3.in` 与 `city/city3.ans`。\n\n该样例满足测试点 $4$ 的限制。\n\n#### 【样例 #4】\n\n见附加文件中的 `city/city4.in` 与 `city/city4.ans`。\n\n该样例满足测试点 $11$ 的限制。\n\n#### 【样例 #5】\n\n见附加文件中的 `city/city5.in` 与 `city/city5.ans`。\n\n该样例满足测试点 $14$ 的限制。\n\n#### 【样例 #6】\n\n见附加文件中的 `city/city6.in` 与 `city/city6.ans`。\n\n该样例满足测试点 $20$ 的限制。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 2\\times10^5$，$1 \\le q \\le 2\\times10^5$，$1 \\le u_i,v_i,k_i \\le n$，$1 \\le c_i,w_i \\le 10^6$，保证从任意一个城市出发，都能通过原本存在的 $n-1$ 条双向道路，到达任意一个城市。\n\n|测试点编号|$n \\le$|$q \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1\\sim3$|$80$|$80$|无|\n|$4\\sim7$|$5000$|$5000$|无|\n|$8\\sim10$|$5000$|$2\\times10^5$|无|\n|$11\\sim13$|$2\\times10^5$|$2\\times10^5$|A|\n|$14\\sim16$|$2\\times10^5$|$2\\times10^5$|B|\n|$17\\sim20$|$2\\times10^5$|$2\\times10^5$|无|\n\n特殊性质 A：保证对于所有的 $1 \\le i \\lt n$，都有 $u_i=i,v_i=i+1$。\n\n特殊性质 B：保证对于所有的 $1 \\le i \\le q$，都有 $k_i=1$。", "locale": "zh-CN"}}}
{"pid": "P9585", "type": "P", "difficulty": 1, "samples": [["3 5", "2"], ["1 4", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「MXOI Round 2」酒店", "background": "", "description": "小 C 开了一家酒店，叫做 CC Hotel。\n\n一天，CC Hotel 来了 $n$ 位客人。小 C 需要把他们都安排在酒店的某一层中。每个房间中只能安排一位客人。\n\n这一层共有 $m$ 间房间，这 $m$ 间房间都是空的，且这 $m$ 间房间形成了一个环形，即对于所有的 $1 \\le x \\le m$，都有第 $x$ 间房间与第 $((x \\bmod m)+1)$ 间房间相邻，第 $((x \\bmod m)+1)$ 间房间与第 $x$ 间房间相邻，其中 $x \\bmod m$ 表示 $x$ 除以 $m$ 得到的余数。\n\n这 $n$ 位客人都十分挑剔，他们希望与自己的房间相邻的房间中没有人。对于某一位客人，若与他的房间相邻的房间中，有 $k$ 间房间有人，则这位客人会产生 $k$ 点愤怒值。\n\n你需要帮助小 C 安排房间，使得所有客人的愤怒值之和最小，并输出所有客人的愤怒值之和的最小值。", "inputFormat": "两个整数 $n,m$。", "outputFormat": "一个整数，表示所有客人的愤怒值之和的最小值。", "hint": "#### 【样例解释 #1】\n\n对于这 $5$ 间房间，其中一组满足条件的安排方案为：不住人、住人、住人、不住人、住人。\n\n可以证明所有客人的愤怒值之和的最小值为 $2$。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100$，$3 \\le m \\le 100$，保证 $n \\le m$。\n\n|测试点编号|特殊性质|\n|:---:|:---:|\n|$1\\sim3$|保证 $2n\\le m$|\n|$4\\sim6$|保证 $m=n+1$|\n|$7\\sim10$|无|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MXOI Round 2」酒店", "background": "", "description": "小 C 开了一家酒店，叫做 CC Hotel。\n\n一天，CC Hotel 来了 $n$ 位客人。小 C 需要把他们都安排在酒店的某一层中。每个房间中只能安排一位客人。\n\n这一层共有 $m$ 间房间，这 $m$ 间房间都是空的，且这 $m$ 间房间形成了一个环形，即对于所有的 $1 \\le x \\le m$，都有第 $x$ 间房间与第 $((x \\bmod m)+1)$ 间房间相邻，第 $((x \\bmod m)+1)$ 间房间与第 $x$ 间房间相邻，其中 $x \\bmod m$ 表示 $x$ 除以 $m$ 得到的余数。\n\n这 $n$ 位客人都十分挑剔，他们希望与自己的房间相邻的房间中没有人。对于某一位客人，若与他的房间相邻的房间中，有 $k$ 间房间有人，则这位客人会产生 $k$ 点愤怒值。\n\n你需要帮助小 C 安排房间，使得所有客人的愤怒值之和最小，并输出所有客人的愤怒值之和的最小值。", "inputFormat": "两个整数 $n,m$。", "outputFormat": "一个整数，表示所有客人的愤怒值之和的最小值。", "hint": "#### 【样例解释 #1】\n\n对于这 $5$ 间房间，其中一组满足条件的安排方案为：不住人、住人、住人、不住人、住人。\n\n可以证明所有客人的愤怒值之和的最小值为 $2$。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100$，$3 \\le m \\le 100$，保证 $n \\le m$。\n\n|测试点编号|特殊性质|\n|:---:|:---:|\n|$1\\sim3$|保证 $2n\\le m$|\n|$4\\sim6$|保证 $m=n+1$|\n|$7\\sim10$|无|", "locale": "zh-CN"}}}
{"pid": "P9586", "type": "P", "difficulty": 2, "samples": [["3\n3 1 4 1 5 9\n1 1 4 5 1 4\n5 2 1 2 6 3", "C\nD\nE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "数学", "贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「MXOI Round 2」游戏", "background": "", "description": "小 C 和小 D 正在玩一款蒸蒸日上的游戏。\n\n这款游戏共有 $3$ 种手牌：杀、闪、斩。他们的用途分别如下：\n\n- 杀：对对方使用，对方需要使用一张**闪**，否则对方输掉游戏；**或**回应对方的**斩**；\n\n- 闪：回应对方的**杀**；\n\n- 斩：对对方使用，对方需要使用一张**杀**，否则对方输掉游戏。\n\n玩家在每使用一张牌后，都需要弃掉该使用的牌。\n\n从小 C 开始，每个回合依次属于小 C 和小 D。在玩家的回合内，该玩家可以出**任意**张**杀**和**斩**，对方需要做出对应的回应。当然，玩家也可以不出牌，直接进入对方的回合。\n\n现在，小 C 共有 $c_1$ 张杀、$c_2$ 张闪、$c_3$ 张斩，小 D 共有 $d_1$ 张杀、$d_2$ 张闪、$d_3$ 张斩，**双方都知道对方的手牌**。你需要求出，双方在都进行最优策略的情况下，游戏的结果会如何。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据，输入一行六个整数 $c_1,c_2,c_3,d_1,d_2,d_3$。", "outputFormat": "对于每组测试数据，输出一行：\n\n- 若双方在都进行最优策略的情况下，小 C 可以获胜，则输出 `C`；\n\n- 若双方在都进行最优策略的情况下，小 D 可以获胜，则输出 `D`；\n\n- 若双方在都进行最优策略的情况下，游戏会平局，即谁也无法获胜，则输出 `E`。", "hint": "#### 【样例解释 #1】\n\n对于第一组数据，小 C 可以先出一张斩，并在小 D 回应一张杀后再出一张斩。此时小 D 的杀用完了，无法做出回应，输掉了游戏。\n\n#### 【样例 #2】\n\n见附加文件中的 `game/game2.in` 与 `game/game2.ans`。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$0 \\le c_1,c_2,c_3,d_1,d_2,d_3 \\le 10^9$。\n\n|测试点编号|特殊性质|\n|:---:|:---:|\n|$1\\sim3$|保证 $c_3=d_3=0$|\n|$4\\sim6$|保证 $c_1=d_2$ 且 $c_2=d_1$|\n|$7\\sim10$|无|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MXOI Round 2」游戏", "background": "", "description": "小 C 和小 D 正在玩一款蒸蒸日上的游戏。\n\n这款游戏共有 $3$ 种手牌：杀、闪、斩。他们的用途分别如下：\n\n- 杀：对对方使用，对方需要使用一张**闪**，否则对方输掉游戏；**或**回应对方的**斩**；\n\n- 闪：回应对方的**杀**；\n\n- 斩：对对方使用，对方需要使用一张**杀**，否则对方输掉游戏。\n\n玩家在每使用一张牌后，都需要弃掉该使用的牌。\n\n从小 C 开始，每个回合依次属于小 C 和小 D。在玩家的回合内，该玩家可以出**任意**张**杀**和**斩**，对方需要做出对应的回应。当然，玩家也可以不出牌，直接进入对方的回合。\n\n现在，小 C 共有 $c_1$ 张杀、$c_2$ 张闪、$c_3$ 张斩，小 D 共有 $d_1$ 张杀、$d_2$ 张闪、$d_3$ 张斩，**双方都知道对方的手牌**。你需要求出，双方在都进行最优策略的情况下，游戏的结果会如何。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据，输入一行六个整数 $c_1,c_2,c_3,d_1,d_2,d_3$。", "outputFormat": "对于每组测试数据，输出一行：\n\n- 若双方在都进行最优策略的情况下，小 C 可以获胜，则输出 `C`；\n\n- 若双方在都进行最优策略的情况下，小 D 可以获胜，则输出 `D`；\n\n- 若双方在都进行最优策略的情况下，游戏会平局，即谁也无法获胜，则输出 `E`。", "hint": "#### 【样例解释 #1】\n\n对于第一组数据，小 C 可以先出一张斩，并在小 D 回应一张杀后再出一张斩。此时小 D 的杀用完了，无法做出回应，输掉了游戏。\n\n#### 【样例 #2】\n\n见附加文件中的 `game/game2.in` 与 `game/game2.ans`。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$0 \\le c_1,c_2,c_3,d_1,d_2,d_3 \\le 10^9$。\n\n|测试点编号|特殊性质|\n|:---:|:---:|\n|$1\\sim3$|保证 $c_3=d_3=0$|\n|$4\\sim6$|保证 $c_1=d_2$ 且 $c_2=d_1$|\n|$7\\sim10$|无|", "locale": "zh-CN"}}}
{"pid": "P9587", "type": "P", "difficulty": 3, "samples": [["0 6 3\n1 1 4 5 1 4", "3\n3\n0\n2\n3\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "洛谷原创", "O2优化", "排序", "前缀和", "洛谷月赛"], "title": "「MXOI Round 2」排名", "background": null, "description": "小 C 有一个长度为 $n$ 的数组 $a$。\n\n小 C 定义，$f(i)$ 为 $a_i$ 的前排名，其中 $f(i)$ 等于数组 $a$ 中大于 $a_i$ 的元素个数加 $1$。\n\n小 C 还定义，$g(i)$ 为 $a_i$ 的后排名，其中 $g(i)$ 等于数组 $a$ 中大于等于 $a_i$ 的元素个数。\n\n每次操作，小 C 需要选择一个不大于 $n$ 的正整数 $t$，并将 $a_t$ 的值增加 $1$。\n\n小 C 想知道，对于每一个 $1 \\le i \\le n$，想要使 $f(i) \\le k \\le g(i)$，最少需要进行多少次操作？\n\n可以证明一定存在至少一种操作方案使得 $f(i) \\le k \\le g(i)$。", "inputFormat": "第一行三个整数 $c,n,k$，其中 $c$ 表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行 $n$ 个整数，表示给定的数组 $a$。", "outputFormat": "共 $n$ 行，每行一个整数，其中第 $i$ 行的整数表示想要使 $f(i) \\le k \\le g(i)$ 所至少需要进行的操作数。", "hint": "#### 【样例解释 #1】\n\n当 $i=1$ 时，小 C 可以选择 $t=1$ 并进行 $3$ 次操作。此时 $f(i)=2$，$g(i)=4$，满足 $f(i) \\le k \\le g(i)$。可以证明此时小 C 至少需要进行 $3$ 次操作。\n\n当 $i=4$ 时，小 C 可以选择 $t=3$ 进行 $1$ 次操作，再选择 $t=6$ 进行 $1$ 次操作。此时 $f(i)=1$，$g(i)=3$，满足 $f(i) \\le k \\le g(i)$。可以证明此时小 C 至少需要进行 $2$ 次操作。\n\n#### 【样例 #2】\n\n见附加文件中的 `rank/rank2.in` 与 `rank/rank2.ans`。\n\n该样例满足测试点 $7$ 的限制。\n\n#### 【样例 #3】\n\n见附加文件中的 `rank/rank3.in` 与 `rank/rank3.ans`。\n\n该样例满足测试点 $20$ 的限制。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$1 \\le k \\le n \\le 5 \\times 10^5$，$1 \\le a_i \\le 10^9$。\n\n|测试点编号|$n \\le$|$a_i \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1\\sim6$|$2000$|$10^9$|A|\n|$7\\sim10$|$2000$|$10^9$|无|\n|$11\\sim14$|$5\\times10^5$|$10^9$|B|\n|$15\\sim20$|$5\\times10^5$|$10^9$|无|\n\n特殊性质 A：保证对于所有的 $1 \\le i \\lt n$，都有 $a_i \\ge a_{i+1}$。\n\n特殊性质 B：保证 $k=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MXOI Round 2」排名", "background": null, "description": "小 C 有一个长度为 $n$ 的数组 $a$。\n\n小 C 定义，$f(i)$ 为 $a_i$ 的前排名，其中 $f(i)$ 等于数组 $a$ 中大于 $a_i$ 的元素个数加 $1$。\n\n小 C 还定义，$g(i)$ 为 $a_i$ 的后排名，其中 $g(i)$ 等于数组 $a$ 中大于等于 $a_i$ 的元素个数。\n\n每次操作，小 C 需要选择一个不大于 $n$ 的正整数 $t$，并将 $a_t$ 的值增加 $1$。\n\n小 C 想知道，对于每一个 $1 \\le i \\le n$，想要使 $f(i) \\le k \\le g(i)$，最少需要进行多少次操作？\n\n可以证明一定存在至少一种操作方案使得 $f(i) \\le k \\le g(i)$。", "inputFormat": "第一行三个整数 $c,n,k$，其中 $c$ 表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行 $n$ 个整数，表示给定的数组 $a$。", "outputFormat": "共 $n$ 行，每行一个整数，其中第 $i$ 行的整数表示想要使 $f(i) \\le k \\le g(i)$ 所至少需要进行的操作数。", "hint": "#### 【样例解释 #1】\n\n当 $i=1$ 时，小 C 可以选择 $t=1$ 并进行 $3$ 次操作。此时 $f(i)=2$，$g(i)=4$，满足 $f(i) \\le k \\le g(i)$。可以证明此时小 C 至少需要进行 $3$ 次操作。\n\n当 $i=4$ 时，小 C 可以选择 $t=3$ 进行 $1$ 次操作，再选择 $t=6$ 进行 $1$ 次操作。此时 $f(i)=1$，$g(i)=3$，满足 $f(i) \\le k \\le g(i)$。可以证明此时小 C 至少需要进行 $2$ 次操作。\n\n#### 【样例 #2】\n\n见附加文件中的 `rank/rank2.in` 与 `rank/rank2.ans`。\n\n该样例满足测试点 $7$ 的限制。\n\n#### 【样例 #3】\n\n见附加文件中的 `rank/rank3.in` 与 `rank/rank3.ans`。\n\n该样例满足测试点 $20$ 的限制。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$1 \\le k \\le n \\le 5 \\times 10^5$，$1 \\le a_i \\le 10^9$。\n\n|测试点编号|$n \\le$|$a_i \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1\\sim6$|$2000$|$10^9$|A|\n|$7\\sim10$|$2000$|$10^9$|无|\n|$11\\sim14$|$5\\times10^5$|$10^9$|B|\n|$15\\sim20$|$5\\times10^5$|$10^9$|无|\n\n特殊性质 A：保证对于所有的 $1 \\le i \\lt n$，都有 $a_i \\ge a_{i+1}$。\n\n特殊性质 B：保证 $k=1$。", "locale": "zh-CN"}}}
{"pid": "P9588", "type": "P", "difficulty": 4, "samples": [["0 9\n1 5\n1 3\n2 2\n1 4\n3 6\n3 8\n2 4\n4\n3 3", "3\n2\n4\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "倍增", "二分", "平衡树", "树状数组", "单调队列", "洛谷原创", "O2优化", "优先队列", "前缀和", "队列", "洛谷月赛"], "title": "「MXOI Round 2」队列", "background": "", "description": "小 C 有一个队列，他要对这个队列进行 $q$ 次操作。操作共四种，参数分别如下：\n\n$1\\ x$：这是第一种操作，表示从队尾依次插入 $1,2,3,\\cdots,x$；\n\n$2\\ y$：这是第二种操作，表示弹出队头的前 $y$ 个元素；\n\n$3\\ z$：这是第三种操作，表示查询队列中的第 $z$ 个元素；\n\n$4$：这是第四种操作，表示查询队列中所有元素的最大值。\n\n你需要帮助他维护这个队列，并对于每个第三种操作和第四种操作，输出查询的答案。", "inputFormat": "第一行两个整数 $c,q$，其中 $c$ 表示测试点编号。$c=0$ 表示该测试点为样例。\n\n接下来 $q$ 行，每行 $1 \\sim 2$ 个整数，表示一个操作，格式见【**题目描述**】。", "outputFormat": "对于每个第三种操作和第四种操作，输出一行一个整数，表示查询的答案。", "hint": "#### 【样例解释 #1】\n\n在进行第四次操作后，队列中的元素依次为 $3,4,5,1,2,3,1,2,3,4$。\n\n在进行第七次操作后，队列中的元素依次为 $2,3,1,2,3,4$。\n\n#### 【样例 #2】\n\n见附加文件中的 `queue/queue2.in` 与 `queue/queue2.ans`。\n\n该样例满足测试点 $1$ 的限制。\n\n#### 【样例 #3】\n\n见附加文件中的 `queue/queue3.in` 与 `queue/queue3.ans`。\n\n该样例满足测试点 $4$ 的限制。\n\n#### 【样例 #4】\n\n见附加文件中的 `queue/queue4.in` 与 `queue/queue4.ans`。\n\n该样例满足测试点 $11$ 的限制。\n\n#### 【样例 #5】\n\n见附加文件中的 `queue/queue5.in` 与 `queue/queue5.ans`。\n\n该样例满足测试点 $15$ 的限制。\n\n#### 【样例 #6】\n\n见附加文件中的 `queue/queue6.in` 与 `queue/queue6.ans`。\n\n该样例满足测试点 $20$ 的限制。\n\n#### 【数据范围】\n\n设 $\\sum x$ 表示单个测试点内 $x$ 之和。\n\n对于 $100\\%$ 的数据，$1 \\le q \\le 2\\times 10^5$，$1 \\le x,y,z \\le 10^9$，$0 \\le \\sum x \\le 2\\times10^{14}$，保证在进行第二种操作前队列内元素个数不小于 $y$，在进行第三种操作前队列内元素个数不小于 $z$，在进行第四种操作前队列内元素个数大于 $0$。\n\n|测试点编号|$q \\le$|$x \\le$|$\\sum x \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|:---:|\n|$1\\sim3$|$500$|$500$|$2\\times10^5$|C|\n|$4\\sim8$|$5000$|$5000$|$2\\times10^7$|无|\n|$9\\sim10$|$2\\times10^5$|$10^9$|$2\\times10^{14}$|AB|\n|$11\\sim12$|$2\\times10^5$|$10^9$|$2\\times10^{14}$|B|\n|$13\\sim14$|$2\\times10^5$|$10^9$|$2\\times10^9$|AC|\n|$15\\sim16$|$2\\times10^5$|$10^9$|$2\\times10^9$|C|\n|$17\\sim18$|$2\\times10^5$|$500$|$2\\times10^7$|无|\n|$19$|$2\\times10^5$|$10^9$|$2\\times10^9$|无|\n|$20$|$2\\times10^5$|$10^9$|$2\\times10^{14}$|无|\n\n特殊性质 A：没有第二种操作。\n\n特殊性质 B：没有第三种操作。\n\n特殊性质 C：没有第四种操作。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MXOI Round 2」队列", "background": "", "description": "小 C 有一个队列，他要对这个队列进行 $q$ 次操作。操作共四种，参数分别如下：\n\n$1\\ x$：这是第一种操作，表示从队尾依次插入 $1,2,3,\\cdots,x$；\n\n$2\\ y$：这是第二种操作，表示弹出队头的前 $y$ 个元素；\n\n$3\\ z$：这是第三种操作，表示查询队列中的第 $z$ 个元素；\n\n$4$：这是第四种操作，表示查询队列中所有元素的最大值。\n\n你需要帮助他维护这个队列，并对于每个第三种操作和第四种操作，输出查询的答案。", "inputFormat": "第一行两个整数 $c,q$，其中 $c$ 表示测试点编号。$c=0$ 表示该测试点为样例。\n\n接下来 $q$ 行，每行 $1 \\sim 2$ 个整数，表示一个操作，格式见【**题目描述**】。", "outputFormat": "对于每个第三种操作和第四种操作，输出一行一个整数，表示查询的答案。", "hint": "#### 【样例解释 #1】\n\n在进行第四次操作后，队列中的元素依次为 $3,4,5,1,2,3,1,2,3,4$。\n\n在进行第七次操作后，队列中的元素依次为 $2,3,1,2,3,4$。\n\n#### 【样例 #2】\n\n见附加文件中的 `queue/queue2.in` 与 `queue/queue2.ans`。\n\n该样例满足测试点 $1$ 的限制。\n\n#### 【样例 #3】\n\n见附加文件中的 `queue/queue3.in` 与 `queue/queue3.ans`。\n\n该样例满足测试点 $4$ 的限制。\n\n#### 【样例 #4】\n\n见附加文件中的 `queue/queue4.in` 与 `queue/queue4.ans`。\n\n该样例满足测试点 $11$ 的限制。\n\n#### 【样例 #5】\n\n见附加文件中的 `queue/queue5.in` 与 `queue/queue5.ans`。\n\n该样例满足测试点 $15$ 的限制。\n\n#### 【样例 #6】\n\n见附加文件中的 `queue/queue6.in` 与 `queue/queue6.ans`。\n\n该样例满足测试点 $20$ 的限制。\n\n#### 【数据范围】\n\n设 $\\sum x$ 表示单个测试点内 $x$ 之和。\n\n对于 $100\\%$ 的数据，$1 \\le q \\le 2\\times 10^5$，$1 \\le x,y,z \\le 10^9$，$0 \\le \\sum x \\le 2\\times10^{14}$，保证在进行第二种操作前队列内元素个数不小于 $y$，在进行第三种操作前队列内元素个数不小于 $z$，在进行第四种操作前队列内元素个数大于 $0$。\n\n|测试点编号|$q \\le$|$x \\le$|$\\sum x \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|:---:|\n|$1\\sim3$|$500$|$500$|$2\\times10^5$|C|\n|$4\\sim8$|$5000$|$5000$|$2\\times10^7$|无|\n|$9\\sim10$|$2\\times10^5$|$10^9$|$2\\times10^{14}$|AB|\n|$11\\sim12$|$2\\times10^5$|$10^9$|$2\\times10^{14}$|B|\n|$13\\sim14$|$2\\times10^5$|$10^9$|$2\\times10^9$|AC|\n|$15\\sim16$|$2\\times10^5$|$10^9$|$2\\times10^9$|C|\n|$17\\sim18$|$2\\times10^5$|$500$|$2\\times10^7$|无|\n|$19$|$2\\times10^5$|$10^9$|$2\\times10^9$|无|\n|$20$|$2\\times10^5$|$10^9$|$2\\times10^{14}$|无|\n\n特殊性质 A：没有第二种操作。\n\n特殊性质 B：没有第三种操作。\n\n特殊性质 C：没有第四种操作。", "locale": "zh-CN"}}}
{"pid": "P9589", "type": "P", "difficulty": 4, "samples": [["4 5\n16 24 28 36\n11 4 7 3 2", "6"], ["2 3\n11 13\n13 1 11", "2"], ["2 2\n2 3\n4 5", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化"], "title": "「PFLOI R1」PFL 除法", "background": "[有必要把所有比赛题的背景连在一起](https://www.luogu.com.cn/paste/enzfvjum)。\n\n就这样，新世界的大门向它们敞开了……  \n\n“喵！”一只可爱的花猫向它们问好。  \n\n“你们刚来到这？”  \n\n“嗯。”  \n\n“我带你们去转转吧，谁叫我这么可爱呢！”  \n\n“……” 花猫突然止住，打量一番手中的序列，俶尔又微笑着说：  \n\n“但你们要先答出我的问题哦。”", "description": "花猫有一个长度为 $n$ 的序列 $A$ 和另一个长度为 $m$ 的序列 $B$。你可以进行若干次以下操作：\n\n+ 选择两个整数 $i$ 和 $j$，满足 $1\\le i\\le n$，$1\\le j\\le m$ 且 $B_j \\mid A_i$，然后将 $A_i$ 变为 $\\frac{A_i}{B_j}$。\n\n**注意**：$A$ 和 $B$ 中的每个元素都可以选择并被**操作多次**。\n\n最终要使得 $A$ 中的元素都相等，请求出最少的操作次数；若无解，输出 `-1`。", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n$ 个正整数表示序列 $A$。\n\n第三行 $m$ 个正整数表示序列 $B$。", "outputFormat": "输出一个整数表示最少的操作次数；若无解，输出 `-1`。", "hint": "**本题采用捆绑测试**。\n\n| 子任务编号 | 特殊性质 | 分值 | \n| :----------: | :----------: | :-----:| \n| $1$ | $A$ 中所有元素相等 | $5$ |\n| $2$ | $n=2$ | $15$ |\n| $3$ | $n,m\\le10^3$ | $20$ | \n| $4$ | $n,m\\le10^4$ | $20$ | \n| $5$ | 无 | $40$ |\n\n对于所有数据，$1\\le n,m\\le5\\times10^5$，$1\\le A_i,B_i\\le5\\times10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PFLOI R1」PFL 除法", "background": "[有必要把所有比赛题的背景连在一起](https://www.luogu.com.cn/paste/enzfvjum)。\n\n就这样，新世界的大门向它们敞开了……  \n\n“喵！”一只可爱的花猫向它们问好。  \n\n“你们刚来到这？”  \n\n“嗯。”  \n\n“我带你们去转转吧，谁叫我这么可爱呢！”  \n\n“……” 花猫突然止住，打量一番手中的序列，俶尔又微笑着说：  \n\n“但你们要先答出我的问题哦。”", "description": "花猫有一个长度为 $n$ 的序列 $A$ 和另一个长度为 $m$ 的序列 $B$。你可以进行若干次以下操作：\n\n+ 选择两个整数 $i$ 和 $j$，满足 $1\\le i\\le n$，$1\\le j\\le m$ 且 $B_j \\mid A_i$，然后将 $A_i$ 变为 $\\frac{A_i}{B_j}$。\n\n**注意**：$A$ 和 $B$ 中的每个元素都可以选择并被**操作多次**。\n\n最终要使得 $A$ 中的元素都相等，请求出最少的操作次数；若无解，输出 `-1`。", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n$ 个正整数表示序列 $A$。\n\n第三行 $m$ 个正整数表示序列 $B$。", "outputFormat": "输出一个整数表示最少的操作次数；若无解，输出 `-1`。", "hint": "**本题采用捆绑测试**。\n\n| 子任务编号 | 特殊性质 | 分值 | \n| :----------: | :----------: | :-----:| \n| $1$ | $A$ 中所有元素相等 | $5$ |\n| $2$ | $n=2$ | $15$ |\n| $3$ | $n,m\\le10^3$ | $20$ | \n| $4$ | $n,m\\le10^4$ | $20$ | \n| $5$ | 无 | $40$ |\n\n对于所有数据，$1\\le n,m\\le5\\times10^5$，$1\\le A_i,B_i\\le5\\times10^5$。", "locale": "zh-CN"}}}
{"pid": "P9590", "type": "P", "difficulty": 5, "samples": [["1\n6\n1 1 2 1 2 1\n", "760381441"], ["2\n11 4 5 14", "686292993"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "矩阵加速", "期望"], "title": "「PFLOI R1」PFL 团主的 PFL 操作", "background": "比赛结束后，智力、旸麦、花猫邀来碓瑘，四人从此结交为友。\n\n--------------------\n\n实际上，不光碓瑘，智力、旸麦、花猫都曾是 OI 界中最强的存在。一次又一次 AK 一场又一场 Trash Round 后，它们厌倦了，从此销声匿迹，退出江湖。\n\n今天看到碓瑘才气不减当年，它们又念想起那些和 OI 作伴的时光……兴意，顿生心头。\n\n于是它们找到了 PFLOI 团长珺珺，请求珺珺给它们再次辉煌的机会——出一场属于自己的比赛。\n\n听完它们的事迹后，珺珺颇为感动，欣然同意。5 人就此相聚在 PFLOI。\n\n但是旸麦进入 PFLOI 后~~乱出题~~太调皮了，珺珺可不乐意了，于是：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9m9343n9.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/znp6x2ta.png)", "description": "有 $n$ 次操作，每次操作会等概率地进行以下事件中的一个：\n\n1. 将 $a_i$ 加入团队，操作后 $a_i$ 为成员。\n2. 将 $a_i$ 踢出团队。\n3. 将 $a_i$ 设置为管理员。\n4. 将 $a_i$ 设置为成员。\n\n**注意：**\n\n+ 开始时没有人在团队里。  \n+ 如果 $a_i$ 不在团队中，则 2、3、4 操作无效果。  \n+ 如果 $a_i$ 为成员，则 1、4 操作无效果。  \n+ 如果 $a_i$ 是管理员，则 1、2、3 操作无效果。  \n\n最后输出团队中管理员个数的期望，答案对 $998244353$ 取模。", "inputFormat": "第一行一个整数 $\\text{type}$。  \n如果 $\\text{type}$ 为 $1$，则采用**第一种输入方式**，否则采用**第二种输入方式**。\n\n### 第一种输入方式：\n\n第一行一个正整数 $n$。  \n第二行共 $n$ 个整数表示数组 $a$。\n\n### 第二种输入方式：\n\n共一行四个整数分别是 $n,a_0,p,q$。    \n\n**注意：第二种输入方式中，数组 $a$ 需要你计算得出，满足 $a_i=(a_{i-1}\\times p+p)\\bmod q+ 1$ $ (i \\geq 1)$。**", "outputFormat": "输出一个整数表示团队中管理员个数的期望，对 $998244353$ 取模。", "hint": "**本题采用捆绑测试**。\n\n| 子任务编号\t | $\\text{type}=$ | $n$ | $a_i$ | 分值 |\n| :---: | :---: | :---: | :---: | :---: |\n| $1$ | $1$ | $n\\le 100$ | $1\\le a_i\\le10$ | $25$ |\n| $2$ | $1$ | $n\\le 5\\times 10^5$ | $1\\le a_i\\le 10^{18}$ | $35$ |\n\n| 子任务编号\t | $\\text{type}=$ | $n$ | $a_0,p,q$ | 分值 |\n|:---------:|:------:|:---:|:-----:|:-----:|\n| $3$ | $2$ | $n\\le 10^6$ | $1\\le a_0,p<q\\le 20$ | $10$ |\n| $4$ | $2$ | $n\\le 10^{18}$ | $1\\le a_0,p<q\\le 3\\times 10^5$ | $30$ |\n\n对于所有数据，$1\\le n\\le 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PFLOI R1」PFL 团主的 PFL 操作", "background": "比赛结束后，智力、旸麦、花猫邀来碓瑘，四人从此结交为友。\n\n--------------------\n\n实际上，不光碓瑘，智力、旸麦、花猫都曾是 OI 界中最强的存在。一次又一次 AK 一场又一场 Trash Round 后，它们厌倦了，从此销声匿迹，退出江湖。\n\n今天看到碓瑘才气不减当年，它们又念想起那些和 OI 作伴的时光……兴意，顿生心头。\n\n于是它们找到了 PFLOI 团长珺珺，请求珺珺给它们再次辉煌的机会——出一场属于自己的比赛。\n\n听完它们的事迹后，珺珺颇为感动，欣然同意。5 人就此相聚在 PFLOI。\n\n但是旸麦进入 PFLOI 后~~乱出题~~太调皮了，珺珺可不乐意了，于是：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9m9343n9.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/znp6x2ta.png)", "description": "有 $n$ 次操作，每次操作会等概率地进行以下事件中的一个：\n\n1. 将 $a_i$ 加入团队，操作后 $a_i$ 为成员。\n2. 将 $a_i$ 踢出团队。\n3. 将 $a_i$ 设置为管理员。\n4. 将 $a_i$ 设置为成员。\n\n**注意：**\n\n+ 开始时没有人在团队里。  \n+ 如果 $a_i$ 不在团队中，则 2、3、4 操作无效果。  \n+ 如果 $a_i$ 为成员，则 1、4 操作无效果。  \n+ 如果 $a_i$ 是管理员，则 1、2、3 操作无效果。  \n\n最后输出团队中管理员个数的期望，答案对 $998244353$ 取模。", "inputFormat": "第一行一个整数 $\\text{type}$。  \n如果 $\\text{type}$ 为 $1$，则采用**第一种输入方式**，否则采用**第二种输入方式**。\n\n### 第一种输入方式：\n\n第一行一个正整数 $n$。  \n第二行共 $n$ 个整数表示数组 $a$。\n\n### 第二种输入方式：\n\n共一行四个整数分别是 $n,a_0,p,q$。    \n\n**注意：第二种输入方式中，数组 $a$ 需要你计算得出，满足 $a_i=(a_{i-1}\\times p+p)\\bmod q+ 1$ $ (i \\geq 1)$。**", "outputFormat": "输出一个整数表示团队中管理员个数的期望，对 $998244353$ 取模。", "hint": "**本题采用捆绑测试**。\n\n| 子任务编号\t | $\\text{type}=$ | $n$ | $a_i$ | 分值 |\n| :---: | :---: | :---: | :---: | :---: |\n| $1$ | $1$ | $n\\le 100$ | $1\\le a_i\\le10$ | $25$ |\n| $2$ | $1$ | $n\\le 5\\times 10^5$ | $1\\le a_i\\le 10^{18}$ | $35$ |\n\n| 子任务编号\t | $\\text{type}=$ | $n$ | $a_0,p,q$ | 分值 |\n|:---------:|:------:|:---:|:-----:|:-----:|\n| $3$ | $2$ | $n\\le 10^6$ | $1\\le a_0,p<q\\le 20$ | $10$ |\n| $4$ | $2$ | $n\\le 10^{18}$ | $1\\le a_0,p<q\\le 3\\times 10^5$ | $30$ |\n\n对于所有数据，$1\\le n\\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P9591", "type": "P", "difficulty": 6, "samples": [["7\n5 2\n6 6\n7 6\n8 3\n9 3\n10 1\n7 4", "3 4\n1 6 2 4 3 5 \n1 2 3 4 5 6\n8 6 1\n8 1 6\n-1\n3 5 6 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "模拟退火", "构造", "Ad-hoc", "分类讨论"], "title": "「PFLOI R1」PFL 变换", "background": "五大高手云集于此，思想的火花激烈碰撞。很快，PFLOI Round 1 准备完毕。\n\n开始了……", "description": "新的征途已经开始：智力踏上了寻香蕉之旅。道路上共有 $n$ 个香蕉，编号从 $1$ 到 $n$。\n\n智力看到如此美食，非常激动。但是智力不想吃得太饱或太少，所以它会吃**刚好** $m$ 个香蕉。\n\n智力是一个挑剔的人，只有当它吃的 $m$ 个香蕉的编号的异或和**恰好为** $2^{\\lfloor\\log_2 n\\rfloor+1}-1$ 时他才会满意。请你帮忙找出他应该吃哪些香蕉，好让他满意。\n\n如果怎样都不能满足智力的需求，就请输出 `-1` 吧。\n\n------------\n\n**形式化题面**：\n\n请你从 $1$ 到 $n$ 中选出 $m$ 个数，使得它们的异或和恰好为 $2^{\\lfloor\\log_2 n\\rfloor+1}-1$。若无解输出 `-1`。", "inputFormat": "**本题有多组数据**。\n\n第一行一个整数 $T$，表示一共有 $T$ 组测试数据。\n\n对于每组测试数据，每行两个整数 $n$ 和 $m$，含义见题面。", "outputFormat": "对于每组测试数据，若有解，输出一行共 $m$ 个整数，表示你选择的 $m$ 个数；若无解，输出 `-1`。\n\n**本题采用 Special Judge**。若有多种可能的解，任意输出一个即可。", "hint": "**本题不采用捆绑测试**。\n\n| 测试点编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :-----:| \n| $1,2$ | $n\\le15$ | $2\\times4=8$ |\n| $3\\sim11 $ | $n\\le128$ | $9\\times3=27$ |\n| $12\\sim24 $ | $\\sum n\\le10^5$ | $13\\times3=39$ |\n| $25\\sim29$ | 无特殊限制 | $5\\times4=20$ |\n| $30$ | 无特殊限制 | $1\\times6=6$ |\n\n对于所有数据，$1\\le m\\le n\\le10^6$，$1\\le\\sum n,T\\le10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PFLOI R1」PFL 变换", "background": "五大高手云集于此，思想的火花激烈碰撞。很快，PFLOI Round 1 准备完毕。\n\n开始了……", "description": "新的征途已经开始：智力踏上了寻香蕉之旅。道路上共有 $n$ 个香蕉，编号从 $1$ 到 $n$。\n\n智力看到如此美食，非常激动。但是智力不想吃得太饱或太少，所以它会吃**刚好** $m$ 个香蕉。\n\n智力是一个挑剔的人，只有当它吃的 $m$ 个香蕉的编号的异或和**恰好为** $2^{\\lfloor\\log_2 n\\rfloor+1}-1$ 时他才会满意。请你帮忙找出他应该吃哪些香蕉，好让他满意。\n\n如果怎样都不能满足智力的需求，就请输出 `-1` 吧。\n\n------------\n\n**形式化题面**：\n\n请你从 $1$ 到 $n$ 中选出 $m$ 个数，使得它们的异或和恰好为 $2^{\\lfloor\\log_2 n\\rfloor+1}-1$。若无解输出 `-1`。", "inputFormat": "**本题有多组数据**。\n\n第一行一个整数 $T$，表示一共有 $T$ 组测试数据。\n\n对于每组测试数据，每行两个整数 $n$ 和 $m$，含义见题面。", "outputFormat": "对于每组测试数据，若有解，输出一行共 $m$ 个整数，表示你选择的 $m$ 个数；若无解，输出 `-1`。\n\n**本题采用 Special Judge**。若有多种可能的解，任意输出一个即可。", "hint": "**本题不采用捆绑测试**。\n\n| 测试点编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :-----:| \n| $1,2$ | $n\\le15$ | $2\\times4=8$ |\n| $3\\sim11 $ | $n\\le128$ | $9\\times3=27$ |\n| $12\\sim24 $ | $\\sum n\\le10^5$ | $13\\times3=39$ |\n| $25\\sim29$ | 无特殊限制 | $5\\times4=20$ |\n| $30$ | 无特殊限制 | $1\\times6=6$ |\n\n对于所有数据，$1\\le m\\le n\\le10^6$，$1\\le\\sum n,T\\le10^6$。", "locale": "zh-CN"}}}
{"pid": "P9592", "type": "P", "difficulty": 3, "samples": [["3\n5 4 1\n5 6 1\n5 7 1", "YES\n1 1 1 1\nYES\n1 1 3 3\nYES\n1 2 2 2"], ["3\n5 4 2\n5 6 2\n5 7 2", "YES\n1 1 1 1\nYES\n1 1 3 3\nNO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造"], "title": "「Daily OI Round 1」Tree", "background": "", "description": "给定三个正整数参数 $n,d,k$，你需要构造出一棵根节点为 $1$ 的树，满足这棵树有 $n$ 个节点，每个节点到根节点的距离和为 $d$，除了叶节点以外每个节点的**直接**儿子数量**至少** $k$ 个，且所有节点的最大深度最小。\n\n**注意事项：**\n\n- 距离：两个点之间的简单路径上的边的条数。\n- 叶子节点：没有儿子的非根节点。\n- 根节点深度为 $0$。", "inputFormat": "**本题有多组数据。**  \n\n第一行一个正整数 $T$，表示数据组数。  \n对于每组数据：共一行三个正整数 $n,d,k$，含义如题所示。", "outputFormat": "对于每次询问，如果有解，第一行输出 `YES`，然后一行 $n-1$ 个正整数，第 $i$ 个正整数 $a_i$ 表示 $a_i$ 是 $i+1$ 的父亲节点，且 $a_i\\leq i$；如果无解，输出 `NO`。\n\n如果有多组合法的答案，可以任意输出其中一组。\n\n**特别地，如果 $n=1$ 且有解，方案输出一行空行即可。**", "hint": "### **样例解释**\n\n对于第二组样例的第二组询问，$n=5,d=6,k=2$，即需要构造出含有 $5$ 个节点，各个节点到节点 $1$ 的距离和为 $6$ 且除叶节点外的节点至少有 $k$ 个儿子节点。\n\n下面是样例构造的图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wgir5yt5.png)\n\n其中编号为 $1,2,3,4,5$ 的点到根节点 $1$ 的距离分别为 $0,1,1,2,2$，和为 $6$，满足条件。而且非叶子节点 $1,3$ 都含有至少 $2$ 个儿子节点，可以证明这是所有合法构造中节点的最大深度最小的解法，在此处为 $2$。\n\n### **数据范围**\n  \n**本题开启捆绑测试。**\n\n|$\\text{Subtask}$|分值|$n \\le$|特殊性质|\n| :-----------: | :-------------:|:-----------: |:-----------: |\n|$0$|$5$|$10$|无|\n|$1$|$5$|$20$|无|\n|$2$|$5$|$10^5$|$k= n-1$|\n|$3$|$5$|$10^5$|$k= n-1$ 或 $n-2$|\n|$4$|$10$|$10^5$|$T=1$|\n|$5$|$70$|$10^5$|无|\n\n对于全部数据，保证：$1 \\le n \\le 10^5$，$1 \\le T \\le 10^5$，$1 \\le k \\le 10^5$，$\\sum n \\le 10^6$，$1 \\le d \\le 10^{10}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 1」Tree", "background": "", "description": "给定三个正整数参数 $n,d,k$，你需要构造出一棵根节点为 $1$ 的树，满足这棵树有 $n$ 个节点，每个节点到根节点的距离和为 $d$，除了叶节点以外每个节点的**直接**儿子数量**至少** $k$ 个，且所有节点的最大深度最小。\n\n**注意事项：**\n\n- 距离：两个点之间的简单路径上的边的条数。\n- 叶子节点：没有儿子的非根节点。\n- 根节点深度为 $0$。", "inputFormat": "**本题有多组数据。**  \n\n第一行一个正整数 $T$，表示数据组数。  \n对于每组数据：共一行三个正整数 $n,d,k$，含义如题所示。", "outputFormat": "对于每次询问，如果有解，第一行输出 `YES`，然后一行 $n-1$ 个正整数，第 $i$ 个正整数 $a_i$ 表示 $a_i$ 是 $i+1$ 的父亲节点，且 $a_i\\leq i$；如果无解，输出 `NO`。\n\n如果有多组合法的答案，可以任意输出其中一组。\n\n**特别地，如果 $n=1$ 且有解，方案输出一行空行即可。**", "hint": "### **样例解释**\n\n对于第二组样例的第二组询问，$n=5,d=6,k=2$，即需要构造出含有 $5$ 个节点，各个节点到节点 $1$ 的距离和为 $6$ 且除叶节点外的节点至少有 $k$ 个儿子节点。\n\n下面是样例构造的图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wgir5yt5.png)\n\n其中编号为 $1,2,3,4,5$ 的点到根节点 $1$ 的距离分别为 $0,1,1,2,2$，和为 $6$，满足条件。而且非叶子节点 $1,3$ 都含有至少 $2$ 个儿子节点，可以证明这是所有合法构造中节点的最大深度最小的解法，在此处为 $2$。\n\n### **数据范围**\n  \n**本题开启捆绑测试。**\n\n|$\\text{Subtask}$|分值|$n \\le$|特殊性质|\n| :-----------: | :-------------:|:-----------: |:-----------: |\n|$0$|$5$|$10$|无|\n|$1$|$5$|$20$|无|\n|$2$|$5$|$10^5$|$k= n-1$|\n|$3$|$5$|$10^5$|$k= n-1$ 或 $n-2$|\n|$4$|$10$|$10^5$|$T=1$|\n|$5$|$70$|$10^5$|无|\n\n对于全部数据，保证：$1 \\le n \\le 10^5$，$1 \\le T \\le 10^5$，$1 \\le k \\le 10^5$，$\\sum n \\le 10^6$，$1 \\le d \\le 10^{10}$。", "locale": "zh-CN"}}}
{"pid": "P9593", "type": "P", "difficulty": 4, "samples": [["4\n1 2 1 1\n1 2\n2 3\n2 4\n", "8"], ["6\n1 2 2 2 1 2\n5 3\n2 1\n4 5\n6 3\n3 1\n", "14"], ["16\n1 1 2 1 1 2 2 2 1 1 2 1 1 1 2 1\n12 8\n14 9\n10 8\n1 16\n7 12\n6 1\n14 8\n3 1\n12 5\n1 13\n12 2\n1 12\n15 8\n11 5\n4 12\n", "442"], ["16\n11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11\n4 14\n4 15\n12 13\n2 5\n7 15\n10 2\n15 8\n15 13\n9 11\n13 11\n3 15\n8 16\n6 13\n1 4\n10 4", "27454"], ["9\n3 3 2 3 2 4 2 3 3\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 9", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "树形 DP"], "title": "「Daily OI Round 1」Block", "background": "", "description": "给定一棵树，节点有颜色，在树上距离为 $2$ 的点连边（仍保留原来的边），求新图中颜色相同且连通的非空点集数量。由于答案可能非常大，您只需输出答案对 $10^9+7$ 取模的值。\n\n点集连通的定义：对于图 $G(V,E)$，$V$ 的一个子集 $V'$ 是连通点集，当且仅当 $G(V',E')$ 是一个连通图，其中边集 $E'=\\{(u,v)|(u,v)\\in E\\land u \\in V'\\land v\\in V'\\}$。", "inputFormat": "第一行一个正整数 $n$，表示节点个数。\n\n接下来一行 $n$ 个正整数，第 $i$ 个正整数 $c_i$ 表示第 $i$ 个节点的颜色。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$ 表示原树有一条 $u$ 到 $v$ 的边。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模的值。", "hint": "样例 1 中，原树如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zmgrnwkh.png)\n\n树上距离为 $2$ 的点连边后，新图如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/id3xc54a.png)\n\n则 $8$ 个颜色相同且连通的非空点集分别是：$\\{1\\},\\{2\\},\\{3\\},\\{4\\},\\{1,3\\},\\{1,4\\},\\{3,4\\},\\{1,3,4\\}$。\n\n**本题开启捆绑测试。**\n\n\n\n|$\\text{Subtask}$|分值|$n \\le$| 特殊性质 | 子任务依赖 |\n| :-----------: | :-------------:|:-----------: |:-----------: |:-----------: |\n|$0$|$5$|$10^5$| A | 无 |\n|$1$|$5$|$16$| 无 | 无 |\n|$2$|$5$|$10^5$| B | 无 |\n|$3$|$15$|$10^5$| C | 无 |\n|$4$|$20$|$10^5$| D | 无 |\n|$5$|$50$|$10^5$| 无 | $0\\sim4$ |\n\n- 特殊性质 A：所有节点的颜色不相同。\n- 特殊性质 B：给出的树是菊花，具体地，第 $i$ 条边连接节点 $1$ 和节点 $i+1$。\n- 特殊性质 C：给出的树是链，具体地，第 $i$ 条边连接节点 $i$ 和节点 $i+1$。\n- 特殊性质 D：所有节点的颜色相同。\n\n\n对于全部数据，满足 $2\\leq n\\leq 10^5$，$1\\leq c_i\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 1」Block", "background": "", "description": "给定一棵树，节点有颜色，在树上距离为 $2$ 的点连边（仍保留原来的边），求新图中颜色相同且连通的非空点集数量。由于答案可能非常大，您只需输出答案对 $10^9+7$ 取模的值。\n\n点集连通的定义：对于图 $G(V,E)$，$V$ 的一个子集 $V'$ 是连通点集，当且仅当 $G(V',E')$ 是一个连通图，其中边集 $E'=\\{(u,v)|(u,v)\\in E\\land u \\in V'\\land v\\in V'\\}$。", "inputFormat": "第一行一个正整数 $n$，表示节点个数。\n\n接下来一行 $n$ 个正整数，第 $i$ 个正整数 $c_i$ 表示第 $i$ 个节点的颜色。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$ 表示原树有一条 $u$ 到 $v$ 的边。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模的值。", "hint": "样例 1 中，原树如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zmgrnwkh.png)\n\n树上距离为 $2$ 的点连边后，新图如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/id3xc54a.png)\n\n则 $8$ 个颜色相同且连通的非空点集分别是：$\\{1\\},\\{2\\},\\{3\\},\\{4\\},\\{1,3\\},\\{1,4\\},\\{3,4\\},\\{1,3,4\\}$。\n\n**本题开启捆绑测试。**\n\n\n\n|$\\text{Subtask}$|分值|$n \\le$| 特殊性质 | 子任务依赖 |\n| :-----------: | :-------------:|:-----------: |:-----------: |:-----------: |\n|$0$|$5$|$10^5$| A | 无 |\n|$1$|$5$|$16$| 无 | 无 |\n|$2$|$5$|$10^5$| B | 无 |\n|$3$|$15$|$10^5$| C | 无 |\n|$4$|$20$|$10^5$| D | 无 |\n|$5$|$50$|$10^5$| 无 | $0\\sim4$ |\n\n- 特殊性质 A：所有节点的颜色不相同。\n- 特殊性质 B：给出的树是菊花，具体地，第 $i$ 条边连接节点 $1$ 和节点 $i+1$。\n- 特殊性质 C：给出的树是链，具体地，第 $i$ 条边连接节点 $i$ 和节点 $i+1$。\n- 特殊性质 D：所有节点的颜色相同。\n\n\n对于全部数据，满足 $2\\leq n\\leq 10^5$，$1\\leq c_i\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P9594", "type": "P", "difficulty": 6, "samples": [["5\n2 9 1 1\n3 9 1 10\n4 8 1 10\n5 6 3 1\n7 9 3 10", "21"], ["10\n1 2 2 8\n2 4 2 2\n6 10 3 5\n2 8 2 4\n5 9 2 7\n1 1 1 10\n2 8 2 2\n1 7 3 7\n8 9 2 4\n5 7 3 3", "29"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "洛谷原创", "O2优化", "动态规划优化"], "title": "「Daily OI Round 1」Memory", "background": "", "description": "给定 $m$ 条线段，每条线段由四个正整数参数 $l_i,r_i,c_i,w_i$ 描述，其中 $l_i,r_i$ 是这条线段的端点，$c_i$ 是这条线段的种类，$w_i$ 是这条线段的权值。\n\n你需要选出一些线段，满足以下条件且权值总和最高。\n\n- 对于任意两条不同的线段 $i,j$，满足 $c_i = c_j$ 或 $[l_i,r_i]\\cap[l_j,r_j]=\\varnothing$。", "inputFormat": "第一行一个正整数 $m$，代表线段数量。\n\n接下来 $m$ 行，每行四个正整数 $l_i,r_i,c_i,w_i$ 描述线段的四个参数，含义如题所示。", "outputFormat": "输出一行一个整数，表示能够得到的最大权值和。", "hint": "### **样例解释**\n\n对于样例 $1$，选出的线段分别是 $1,2,3$ 号线段，它们种类都相同，且权值和为 $21$，可以证明这是最优的选法。\n\n### **数据范围**\n\n**本题开启捆绑测试。**\n\n|$\\text{Subtask}$|分值|$m \\le$|$w_i \\le$|$c_i \\le $|特殊性质|\n| :-----------: | :-------------:|:-----------: | :-----------: | :-----------: | :-----------: |\n|$0$|$5$|$16$|$10$|$10^9$|无|\n|$1$|$20$|$2 \\times 10^3$|$10^4$|$10^9$|无|\n|$2$|$20$|$10^5$|$10^4$|$2$|无|\n|$3$|$20$|$10^5$|$10^4$|$10^9$|A|\n|$4$|$35$|$10^5$|$10^4$|$10^9$|无|\n\n- 特殊性质 A：不存在互不相同的正整数 $i,j$ 使得 $l_i<l_j \\leq r_j < r_i$。\n\n对于全部数据，保证：$1\\leq m\\leq10^5$，$1\\leq l_i\\leq r_i\\leq10^9$，$1\\leq c_i\\leq 10^9$，$1\\leq w_i\\leq10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 1」Memory", "background": "", "description": "给定 $m$ 条线段，每条线段由四个正整数参数 $l_i,r_i,c_i,w_i$ 描述，其中 $l_i,r_i$ 是这条线段的端点，$c_i$ 是这条线段的种类，$w_i$ 是这条线段的权值。\n\n你需要选出一些线段，满足以下条件且权值总和最高。\n\n- 对于任意两条不同的线段 $i,j$，满足 $c_i = c_j$ 或 $[l_i,r_i]\\cap[l_j,r_j]=\\varnothing$。", "inputFormat": "第一行一个正整数 $m$，代表线段数量。\n\n接下来 $m$ 行，每行四个正整数 $l_i,r_i,c_i,w_i$ 描述线段的四个参数，含义如题所示。", "outputFormat": "输出一行一个整数，表示能够得到的最大权值和。", "hint": "### **样例解释**\n\n对于样例 $1$，选出的线段分别是 $1,2,3$ 号线段，它们种类都相同，且权值和为 $21$，可以证明这是最优的选法。\n\n### **数据范围**\n\n**本题开启捆绑测试。**\n\n|$\\text{Subtask}$|分值|$m \\le$|$w_i \\le$|$c_i \\le $|特殊性质|\n| :-----------: | :-------------:|:-----------: | :-----------: | :-----------: | :-----------: |\n|$0$|$5$|$16$|$10$|$10^9$|无|\n|$1$|$20$|$2 \\times 10^3$|$10^4$|$10^9$|无|\n|$2$|$20$|$10^5$|$10^4$|$2$|无|\n|$3$|$20$|$10^5$|$10^4$|$10^9$|A|\n|$4$|$35$|$10^5$|$10^4$|$10^9$|无|\n\n- 特殊性质 A：不存在互不相同的正整数 $i,j$ 使得 $l_i<l_j \\leq r_j < r_i$。\n\n对于全部数据，保证：$1\\leq m\\leq10^5$，$1\\leq l_i\\leq r_i\\leq10^9$，$1\\leq c_i\\leq 10^9$，$1\\leq w_i\\leq10^4$。", "locale": "zh-CN"}}}
{"pid": "P9595", "type": "P", "difficulty": 5, "samples": [["5 2\n1 2 3 4 5\n1\n1\n", "4\n5"], ["10 10\n5 9 8 3 5 7 10 19 5 24\n10\n56\n19\n14\n18\n53\n52\n57\n96\n1000", "2\n2\n2\n4\n2\n3\n3\n2\n2\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "洛谷原创", "O2优化", "分治", "位运算"], "title": "「Daily OI Round 1」Xor", "background": "", "description": "给定一个长度为 $n$ 的序列，一共有 $q$ 次询问，每次询问给定正整数 $x$，然后依次执行以下操作：\n\n- 把序列中所有数异或上 $x$。\n- 求长度最大的区间 $[l,r]$（$l,r$ 是非负整数）满足区间中的每个整数在序列中出现，区间的长度定义为 $r-l+1$。\n\n**注意，在每个询问过后序列是发生变化的。**\n\n**几个需要说明的地方：**\n\n1. “区间”指的是数的区间，比如区间 $[1,3]$ 中的整数有 $1,2,3$，与序列无关。\n2. “序列”指的是修改后的序列，同时不包括之前的序列。", "inputFormat": "第一行两个正整数 $n,q$ 表示序列长度和询问个数。\n\n第二行 $n$ 个正整数 $a_i$ 表示一开始的序列。\n\n接下来 $q$ 行，每行一个正整数 $x$ 表示一个询问。", "outputFormat": "输出 $q$ 行，一行一个整数表示每个询问的答案。", "hint": "### **样例解释**\n\n对于第一组样例，序列初始是 $\\{1,2,3,4,5\\}$，第一次询问给定 $x=1$，则异或后的序列为 $\\{0,3,2,5,4\\}$。区间 $[2,5]$ 中的每个整数 $2,3,4,5$ 都在这个序列中，这是满足条件的最大区间，所以答案为 $5-2+1=4$。\n\n### **数据范围**\n\n**本题开启捆绑测试。**\n\n| $\\text{Subtask}$ | 分值 | $n,q\\leq$ | $a_i\\leq$ | $x\\leq$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | $10^3$ | $10^3$ | $10^3$ |\n| $1$ | $20$ | $5\\times10^5$ | $10^3$ | $10^3$ |\n| $2$ | $10$ | $5\\times10^5$ | $10^3$ | $5\\times10^5$ |\n| $3$ | $60$ | $5\\times10^5$ | $5\\times10^5$ | $5\\times10^5$ |\n\n对于全部数据，保证：$1\\leq n,q,a_i,x\\leq 5\\times10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 1」Xor", "background": "", "description": "给定一个长度为 $n$ 的序列，一共有 $q$ 次询问，每次询问给定正整数 $x$，然后依次执行以下操作：\n\n- 把序列中所有数异或上 $x$。\n- 求长度最大的区间 $[l,r]$（$l,r$ 是非负整数）满足区间中的每个整数在序列中出现，区间的长度定义为 $r-l+1$。\n\n**注意，在每个询问过后序列是发生变化的。**\n\n**几个需要说明的地方：**\n\n1. “区间”指的是数的区间，比如区间 $[1,3]$ 中的整数有 $1,2,3$，与序列无关。\n2. “序列”指的是修改后的序列，同时不包括之前的序列。", "inputFormat": "第一行两个正整数 $n,q$ 表示序列长度和询问个数。\n\n第二行 $n$ 个正整数 $a_i$ 表示一开始的序列。\n\n接下来 $q$ 行，每行一个正整数 $x$ 表示一个询问。", "outputFormat": "输出 $q$ 行，一行一个整数表示每个询问的答案。", "hint": "### **样例解释**\n\n对于第一组样例，序列初始是 $\\{1,2,3,4,5\\}$，第一次询问给定 $x=1$，则异或后的序列为 $\\{0,3,2,5,4\\}$。区间 $[2,5]$ 中的每个整数 $2,3,4,5$ 都在这个序列中，这是满足条件的最大区间，所以答案为 $5-2+1=4$。\n\n### **数据范围**\n\n**本题开启捆绑测试。**\n\n| $\\text{Subtask}$ | 分值 | $n,q\\leq$ | $a_i\\leq$ | $x\\leq$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | $10^3$ | $10^3$ | $10^3$ |\n| $1$ | $20$ | $5\\times10^5$ | $10^3$ | $10^3$ |\n| $2$ | $10$ | $5\\times10^5$ | $10^3$ | $5\\times10^5$ |\n| $3$ | $60$ | $5\\times10^5$ | $5\\times10^5$ | $5\\times10^5$ |\n\n对于全部数据，保证：$1\\leq n,q,a_i,x\\leq 5\\times10^5$。", "locale": "zh-CN"}}}
{"pid": "P9596", "type": "P", "difficulty": 6, "samples": [["4 2\n1 2 3 4\n0 3\n2 1", "1\n2"], ["11 12\n11 4 13 6 7 3 5 12 4 10 11\n8 11\n4 4\n6 20\n0 2\n7 2\n3 18\n5 9\n0 6\n8 8\n9 4\n0 8\n6 18\n", "5\n5\n5\n4\n6\n6\n6\n7\n7\n7\n7\n7"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "O2优化", "JOI（日本）"], "title": "[JOI Open 2018] 冒泡排序 2 / Bubble Sort 2", "background": "", "description": "冒泡排序是一个对序列排序的算法。现在我们要将一个长度为 $N$ 的序列 $A_0,A_1,\\ldots ,A_{N-1}$​ 按不降顺序排序。当两个相邻的数没有按正确顺序排列时，冒泡排序会交换这两个数的位置。每次扫描这个序列就进行这种交换。更确切地说，在一趟**扫描**中，对于 $i=0,1,\\ldots ,N-2$，并按这个顺序，如果 $A_i>A_{i+1}$​，那么我们就交换这两个数的位置。众所周知任何序列经过有限趟扫描后一定可以按非降顺序排好序。对于一个序列 $A$，我们定义**用冒泡排序的扫描趟数**为使用如上算法使得 $A$ 排好序的情况下所扫描的趟数。\n\nJOI 君有一个长度为 $N$ 的序列 $A$。他打算处理 $Q$ 次修改 $A$ 的值的询问。更明确地说，在第 $(j+1)\\ (0\\le j\\le Q-1)$ 次询问，$A_{X_j}$ 的值会变为 $V_j$。\n\nJOI 君想知道处理每次修改之后，用冒泡排序的扫描趟数。", "inputFormat": "LOJ 上为交互题，方便起见，这里使用传统题的方式进行评测。\n\n第一行两个整数 $N,Q$。\n\n第二行 $N$ 个整数 $A_0,A_1,\\ldots ,A_{N-1}$。\n\n接下来 $Q$ 行，每行两个整数 $X_j,V_j$。", "outputFormat": "输出 $Q$ 行，第 $(j+1)\\ (0\\le j\\le Q-1)$ 行表示处理第 $(j+1)$ 个询问后，对这个序列冒泡排序的扫描趟数。", "hint": "**【样例解释】**\n\n给定一个长度为 $N=4$ 的序列 $A=\\{1,2,3,4\\}$ 和 $Q=2$ 次询问：$X=\\{0,2\\},V=\\{3,1\\}$。\n\n1. 对于第一次询问，$A_0$ 的值变为 $3$。我们得到 $A=\\{3,2,3,4\\}$。\n2. 对于第一次询问，$A_2$ 的值变为 $1$。我们得到 $A=\\{3,2,1,4\\}$。\n\n对 $A=\\{3,2,3,4\\}$ 做冒泡排序：\n\n- $A$ 并未排好序，所以第一趟扫描开始。因为 $A_0>A_1$，所以我们交换它们，序列变为 $A=\\{2,3,3,4\\}$。因为 $A_1\\le A_2$，所以我们不交换它们。因为 $A_2\\le A_3$，所以我们也不交换它们。\n- 现在 $A$ 已经排好序了，所以冒泡排序过程结束。\n\n因此对于 $A=\\{3,2,3,4\\}$，冒泡排序的扫描趟数为 $1$。\n\n对 $A=\\{3,2,1,4\\}$ 做冒泡排序：\n\n- $A$ 并未排好序，所以第一趟扫描开始。因为 $A_0>A_1$，所以我们交换它们，序列变为 $A=\\{2,3,1,4\\}$。因为 $A_1> A_2$，所以我们交换它们，序列变为 $A=\\{2,1,3,4\\}$。因为 $A_2\\le A_3$，所以我们也不交换它们。\n- $A$ 并未排好序，所以第二趟扫描开始。因为 $A_0>A_1$，所以我们交换它们，序列变为 $A=\\{1,2,3,4\\}$。因为 $A_1\\le A_2$，所以我们不交换它们。因为 $A_2\\le A_3$，所以我们也不交换它们。\n- 现在 $A$ 已经排好序了，所以冒泡排序过程结束。\n\n因此对于 $A=\\{3,2,1,4\\}$，冒泡排序的扫描趟数为 $2$。\n\n**【数据范围】**\n\n共有四个子任务。每个子任务的分值及附加限制如下：\n\n| 子任务编号 | 分值 |         $N$          |         $Q$          |              $A,V$               |\n| :--------: | :--: | :------------------: | :------------------: | :------------------------------: |\n|    $1$     | $17$ |  $1\\le N\\le 2\\ 000$  |  $1\\le Q\\le 2\\ 000$  |      $1\\le A_i,V_j\\le 10^9$      |\n|    $2$     | $21$ |  $1\\le N\\le 8\\ 000$  |  $1\\le Q\\le 8\\ 000$  | $1\\le A_i,V_j\\le 10^9$ |\n|    $3$     | $22$ | $1\\le N\\le 50\\ 000$  | $1\\le Q\\le 50\\ 000$  |      $1\\le A_i,V_j\\le 100$       |\n|    $4$     | $40$ | $1\\le N\\le 500\\ 000$ | $1\\le Q\\le 500\\ 000$ |      $1\\le A_i,V_j\\le 10^9$      |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2018] 冒泡排序 2 / Bubble Sort 2", "background": "", "description": "冒泡排序是一个对序列排序的算法。现在我们要将一个长度为 $N$ 的序列 $A_0,A_1,\\ldots ,A_{N-1}$​ 按不降顺序排序。当两个相邻的数没有按正确顺序排列时，冒泡排序会交换这两个数的位置。每次扫描这个序列就进行这种交换。更确切地说，在一趟**扫描**中，对于 $i=0,1,\\ldots ,N-2$，并按这个顺序，如果 $A_i>A_{i+1}$​，那么我们就交换这两个数的位置。众所周知任何序列经过有限趟扫描后一定可以按非降顺序排好序。对于一个序列 $A$，我们定义**用冒泡排序的扫描趟数**为使用如上算法使得 $A$ 排好序的情况下所扫描的趟数。\n\nJOI 君有一个长度为 $N$ 的序列 $A$。他打算处理 $Q$ 次修改 $A$ 的值的询问。更明确地说，在第 $(j+1)\\ (0\\le j\\le Q-1)$ 次询问，$A_{X_j}$ 的值会变为 $V_j$。\n\nJOI 君想知道处理每次修改之后，用冒泡排序的扫描趟数。", "inputFormat": "LOJ 上为交互题，方便起见，这里使用传统题的方式进行评测。\n\n第一行两个整数 $N,Q$。\n\n第二行 $N$ 个整数 $A_0,A_1,\\ldots ,A_{N-1}$。\n\n接下来 $Q$ 行，每行两个整数 $X_j,V_j$。", "outputFormat": "输出 $Q$ 行，第 $(j+1)\\ (0\\le j\\le Q-1)$ 行表示处理第 $(j+1)$ 个询问后，对这个序列冒泡排序的扫描趟数。", "hint": "**【样例解释】**\n\n给定一个长度为 $N=4$ 的序列 $A=\\{1,2,3,4\\}$ 和 $Q=2$ 次询问：$X=\\{0,2\\},V=\\{3,1\\}$。\n\n1. 对于第一次询问，$A_0$ 的值变为 $3$。我们得到 $A=\\{3,2,3,4\\}$。\n2. 对于第一次询问，$A_2$ 的值变为 $1$。我们得到 $A=\\{3,2,1,4\\}$。\n\n对 $A=\\{3,2,3,4\\}$ 做冒泡排序：\n\n- $A$ 并未排好序，所以第一趟扫描开始。因为 $A_0>A_1$，所以我们交换它们，序列变为 $A=\\{2,3,3,4\\}$。因为 $A_1\\le A_2$，所以我们不交换它们。因为 $A_2\\le A_3$，所以我们也不交换它们。\n- 现在 $A$ 已经排好序了，所以冒泡排序过程结束。\n\n因此对于 $A=\\{3,2,3,4\\}$，冒泡排序的扫描趟数为 $1$。\n\n对 $A=\\{3,2,1,4\\}$ 做冒泡排序：\n\n- $A$ 并未排好序，所以第一趟扫描开始。因为 $A_0>A_1$，所以我们交换它们，序列变为 $A=\\{2,3,1,4\\}$。因为 $A_1> A_2$，所以我们交换它们，序列变为 $A=\\{2,1,3,4\\}$。因为 $A_2\\le A_3$，所以我们也不交换它们。\n- $A$ 并未排好序，所以第二趟扫描开始。因为 $A_0>A_1$，所以我们交换它们，序列变为 $A=\\{1,2,3,4\\}$。因为 $A_1\\le A_2$，所以我们不交换它们。因为 $A_2\\le A_3$，所以我们也不交换它们。\n- 现在 $A$ 已经排好序了，所以冒泡排序过程结束。\n\n因此对于 $A=\\{3,2,1,4\\}$，冒泡排序的扫描趟数为 $2$。\n\n**【数据范围】**\n\n共有四个子任务。每个子任务的分值及附加限制如下：\n\n| 子任务编号 | 分值 |         $N$          |         $Q$          |              $A,V$               |\n| :--------: | :--: | :------------------: | :------------------: | :------------------------------: |\n|    $1$     | $17$ |  $1\\le N\\le 2\\ 000$  |  $1\\le Q\\le 2\\ 000$  |      $1\\le A_i,V_j\\le 10^9$      |\n|    $2$     | $21$ |  $1\\le N\\le 8\\ 000$  |  $1\\le Q\\le 8\\ 000$  | $1\\le A_i,V_j\\le 10^9$ |\n|    $3$     | $22$ | $1\\le N\\le 50\\ 000$  | $1\\le Q\\le 50\\ 000$  |      $1\\le A_i,V_j\\le 100$       |\n|    $4$     | $40$ | $1\\le N\\le 500\\ 000$ | $1\\le Q\\le 500\\ 000$ |      $1\\le A_i,V_j\\le 10^9$      |\n\n", "locale": "zh-CN"}}}
{"pid": "P9597", "type": "P", "difficulty": 6, "samples": [["3\n1 2\n2 3\n4\n1 1\n1 3\n2 2\n3 2\n", "0\n0\n2\n0"], ["5\n1 2\n2 3\n2 4\n4 5\n5\n1 3\n2 5\n1 2\n2 1\n3 2", "0\n1\n1\n2\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "交互题", "O2优化", "JOI（日本）"], "title": "[JOI Open 2018] 猫或狗 / Cats or Dogs", "background": "**特别提醒，由于洛谷交互机制的特殊性，你不能在程序中引用 `catdog.h`，只需要实现要求的几个函数即可。**", "description": "你的儿子 JOI 君喜欢养宠物。在你家的花园里有 $N$​ 个小屋可供饲养宠物，这 $N$ 个房子从 $1$ 到 $N$ 编号。有 $N-1$ 条双向路径双向连接这 $N$ 个小屋，并且对于任意两个小屋，都可以通过某些路径在它们之间移动。每个小屋最多可以住一只宠物。\n\nJOI 君想要养猫和狗，但是他很担心宠物们可能会经常打架。对于每个小屋的如下状态：住了一只猫，住了一只狗，没有住宠物，他都按如下方式定义了花园的**危险级别**：\n\n- 对于每只猫和每只狗，为了不让他们通过未阻塞的道路相遇，需要阻塞的最小路径数。\n\n在定义危险级别后，JOI 君开始指定后 $Q$ 天使用花园的计划。初始时，所有小屋里都没有宠物。第 $i$ 天的计划是如下内容中的一个：\n\n- 在目前没有宠物的小屋 $v$​​ 中养一只猫。\n- 在目前没有宠物的小屋 $v$ 中养一只狗。\n- 将小屋 $v$ 中的宠物送给邻居，这意味着在小屋 $v$​ 中就没有宠物了。\n\n你作为家长，有责任检查你的儿子的计划是否危险。更确切地说，你需要求出这 $Q$ 天每天进行完计划后，这个花园的危险级别。\n\n---\n\n**为了在线地回答询问，本题采用交互的方式进行评测。**\n\n你需要实现四个函数 `initialize`，`cat`，`dog` 和 `neighbor`。\n\n最初，函数 `initialize` 被调用。这个函数的作用是接受花园的信息。\n\n- `initialize(N, A, B)`\n  - $N$：花园中小屋的数量。\n  - $A, B$：长度为 $N-1$ 的数组。意味着对于 $0\\le i\\le N-2$，在小屋 $A_i$ 和小屋 $B_i$ 之间存在一条路径。保证对于任意两个不同的小屋，沿某些路径可以在它们之间移动。\n\n然后，对于这 $Q$ 天的计划，按时间顺序会调用如下函数：\n\n- `cat(v)`：调用此函数，在目前没有宠物的小屋 $v$ 中养一只猫。\n- `dog(v)`：调用此函数，在目前没有宠物的小屋 $v$ 中养一只狗。\n- `neighbor(v)`：调用此函数，让小屋 $v$ 中的宠物离开。\n\n这些函数应返回在这个计划执行后花园的危险值。\n\n目前不支持对 Java 和 Pascal 语言提交的测评。\n\n", "inputFormat": "样例交互器按如下格式读取输入：\n\n第一行一个整数 $N$。\n\n接下来 $N-1$ 行，每行两个整数 $A_i,B_i$。\n\n接下来一行一个整数 $Q$。\n\n接下来 $Q$ 行，每行两个整数 $T_j,v_j$。\n\n这里，如果在第 $j$ 天的调用是 $\\texttt{cat}$，则 $T_j=1$，如果是 $\\texttt{dog}$，则 $T_j=2$，如果是 $\\texttt{neighbor}$，则 $T_j=3$。", "outputFormat": "样例交互器按如下格式输出第 $j$ 天的函数调用结果 $D_j$：\n\n第 $j$ 行输出 $D_j$。", "hint": "**【样例】**\n\n考虑有 $5$ 个小屋和 $4$ 条路径的情况。这四条路径连接小屋 $1$ 和小屋 $2$，小屋 $2$ 和小屋 $3$，小屋 $2$ 和小屋 $4$，小屋 $4$ 和小屋 $5$。\n\n1. 假设他首先在小屋 $3$ 养了一只猫，在小屋 $5$ 养了一只狗。通过阻塞小屋 $2$ 和小屋 $4$ 之间的道路，他可以避免猫和狗相遇。因此，此时的危险等级是 $1$。\n2. 假设他之后在小屋 $2$​ 养了一直新猫，在小屋 $1$​ 养了一只新狗。通过阻塞小屋 $2$​ 和小屋 $4$​ 之间的道路与小屋 $1$​ 和小屋 $2$​ 之间的道路，他可以避免猫和狗相遇。因此，此时的危险等级是 $2$。\n3. 假设他最后将小屋 $2$ 的猫给了邻居。他只需要阻塞小屋 $2$ 和小屋 $3$ 之间的道路。因此，此时的危险等级是 $1$。\n\n\n\n**【数据范围】**\n\n本题有三个子任务。每个子任务的分值与附加限制如下表所示：\n\n| 子任务编号 | 分值 |         $N$          |         $Q$          |\n| :--------: | :--: | :------------------: | :------------------: |\n|    $1$     | $8$  |    $1\\le N\\le 15$    |   $1\\le Q\\le 100$    |\n|    $2$     | $30$ |  $1\\le N\\le 1\\ 000$  |  $1\\le Q\\le 1\\ 000$  |\n|    $3$     | $62$ | $1\\le N\\le 100\\ 000$ | $1\\le Q\\le 100\\ 000$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2018] 猫或狗 / Cats or Dogs", "background": "**特别提醒，由于洛谷交互机制的特殊性，你不能在程序中引用 `catdog.h`，只需要实现要求的几个函数即可。**", "description": "你的儿子 JOI 君喜欢养宠物。在你家的花园里有 $N$​ 个小屋可供饲养宠物，这 $N$ 个房子从 $1$ 到 $N$ 编号。有 $N-1$ 条双向路径双向连接这 $N$ 个小屋，并且对于任意两个小屋，都可以通过某些路径在它们之间移动。每个小屋最多可以住一只宠物。\n\nJOI 君想要养猫和狗，但是他很担心宠物们可能会经常打架。对于每个小屋的如下状态：住了一只猫，住了一只狗，没有住宠物，他都按如下方式定义了花园的**危险级别**：\n\n- 对于每只猫和每只狗，为了不让他们通过未阻塞的道路相遇，需要阻塞的最小路径数。\n\n在定义危险级别后，JOI 君开始指定后 $Q$ 天使用花园的计划。初始时，所有小屋里都没有宠物。第 $i$ 天的计划是如下内容中的一个：\n\n- 在目前没有宠物的小屋 $v$​​ 中养一只猫。\n- 在目前没有宠物的小屋 $v$ 中养一只狗。\n- 将小屋 $v$ 中的宠物送给邻居，这意味着在小屋 $v$​ 中就没有宠物了。\n\n你作为家长，有责任检查你的儿子的计划是否危险。更确切地说，你需要求出这 $Q$ 天每天进行完计划后，这个花园的危险级别。\n\n---\n\n**为了在线地回答询问，本题采用交互的方式进行评测。**\n\n你需要实现四个函数 `initialize`，`cat`，`dog` 和 `neighbor`。\n\n最初，函数 `initialize` 被调用。这个函数的作用是接受花园的信息。\n\n- `initialize(N, A, B)`\n  - $N$：花园中小屋的数量。\n  - $A, B$：长度为 $N-1$ 的数组。意味着对于 $0\\le i\\le N-2$，在小屋 $A_i$ 和小屋 $B_i$ 之间存在一条路径。保证对于任意两个不同的小屋，沿某些路径可以在它们之间移动。\n\n然后，对于这 $Q$ 天的计划，按时间顺序会调用如下函数：\n\n- `cat(v)`：调用此函数，在目前没有宠物的小屋 $v$ 中养一只猫。\n- `dog(v)`：调用此函数，在目前没有宠物的小屋 $v$ 中养一只狗。\n- `neighbor(v)`：调用此函数，让小屋 $v$ 中的宠物离开。\n\n这些函数应返回在这个计划执行后花园的危险值。\n\n目前不支持对 Java 和 Pascal 语言提交的测评。\n\n", "inputFormat": "样例交互器按如下格式读取输入：\n\n第一行一个整数 $N$。\n\n接下来 $N-1$ 行，每行两个整数 $A_i,B_i$。\n\n接下来一行一个整数 $Q$。\n\n接下来 $Q$ 行，每行两个整数 $T_j,v_j$。\n\n这里，如果在第 $j$ 天的调用是 $\\texttt{cat}$，则 $T_j=1$，如果是 $\\texttt{dog}$，则 $T_j=2$，如果是 $\\texttt{neighbor}$，则 $T_j=3$。", "outputFormat": "样例交互器按如下格式输出第 $j$ 天的函数调用结果 $D_j$：\n\n第 $j$ 行输出 $D_j$。", "hint": "**【样例】**\n\n考虑有 $5$ 个小屋和 $4$ 条路径的情况。这四条路径连接小屋 $1$ 和小屋 $2$，小屋 $2$ 和小屋 $3$，小屋 $2$ 和小屋 $4$，小屋 $4$ 和小屋 $5$。\n\n1. 假设他首先在小屋 $3$ 养了一只猫，在小屋 $5$ 养了一只狗。通过阻塞小屋 $2$ 和小屋 $4$ 之间的道路，他可以避免猫和狗相遇。因此，此时的危险等级是 $1$。\n2. 假设他之后在小屋 $2$​ 养了一直新猫，在小屋 $1$​ 养了一只新狗。通过阻塞小屋 $2$​ 和小屋 $4$​ 之间的道路与小屋 $1$​ 和小屋 $2$​ 之间的道路，他可以避免猫和狗相遇。因此，此时的危险等级是 $2$。\n3. 假设他最后将小屋 $2$ 的猫给了邻居。他只需要阻塞小屋 $2$ 和小屋 $3$ 之间的道路。因此，此时的危险等级是 $1$。\n\n\n\n**【数据范围】**\n\n本题有三个子任务。每个子任务的分值与附加限制如下表所示：\n\n| 子任务编号 | 分值 |         $N$          |         $Q$          |\n| :--------: | :--: | :------------------: | :------------------: |\n|    $1$     | $8$  |    $1\\le N\\le 15$    |   $1\\le Q\\le 100$    |\n|    $2$     | $30$ |  $1\\le N\\le 1\\ 000$  |  $1\\le Q\\le 1\\ 000$  |\n|    $3$     | $62$ | $1\\le N\\le 100\\ 000$ | $1\\le Q\\le 100\\ 000$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P9598", "type": "P", "difficulty": 7, "samples": [["5 8 2\n0 0 1\n0 1 3\n0 2 4\n0 4 0\n1 1 3\n0 0 3\n0 1 2\n0 4 3\n3 1\n7 3\n", "3\n2"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "JOI（日本）"], "title": "[JOI Open 2018] 山体滑坡 / Collapse", "background": "", "description": "I 先生有一个 $C$ 天的电缆建设计划。第 $(i+1)\\ (0\\le i\\le C-1)$​ 天的计划用三个整数 $T_i,X_i,Y_i$ 表示，分别表示：\n\n- 如果 $T_i=0$，他们会架设一段连接城镇 $X_i$ 与城镇 $Y_i$ 的电缆。保证在第 $(i+1)$ 天开始的时候城镇 $X_i$ 与城镇 $Y_i$ 之间没有电缆。\n- 如果 $T_i=1$​，他们会拆除一段连接城镇 $X_i$​ 与城镇 $Y_i$​ 的电缆。保证在第 $(i+1)$​ 天开始的时候城镇 $X_i$​ 与城镇 $Y_i$​ 之间有电缆。\n\nJOI 国经常发生山体滑坡。如果在城镇 $x$ 与 $x+1\\ (0\\le x\\le N-2)$​ 之间发生山体滑坡，则只有连接两端编号均不超过 $x$ 与编号均不少于 $x+1$ 城镇的电缆可用。在 JOI 国，每当山体滑坡发生，他们就会选择一些城镇建设基站。基站应满足对于任意城镇，都可以通过一些可用的电缆与基站连通。\n\nI 先生在建设阶段就在考虑山体滑坡发生时应建设多少基站。他有 $Q$ 个问题：第 $(j+1)$ 个问题用两个整数 $W_j,P_j$ 表示，表示他想知道在 $(W_j+1)$ 天结束时，如果在城镇 $P_j$ 和 $P_j+1$ 之间发生山体滑坡，至少应该建立多少基站。\n\n你作为 I 先生的助理，负责写一个程序去回答 I 先生的问题。", "inputFormat": "LOJ 上为交互题，方便起见，这里使用传统题的方式进行评测。\n\n第一行三个整数 $N,C,Q$。\n\n接下来 $C$ 行，每行三个整数 $T_i,X_i,Y_i$。\n\n接下来 $Q$ 行，每行两个整数 $W_j,P_j$。", "outputFormat": "输出 $Q$ 行，第 $j+1$ 行输出 $D_j$ 表示对第 $(j+1)$​ 个问题的回答。", "hint": "**【样例】**\n\n考虑有 $5$ 个城镇的情况。接下来用 $(x,y)$ 代表连接城镇 $x$ 和城镇 $y$ 的电缆。\n\n- 假设当有四根电缆 $(0,1),(1,3),(2,4),(4,0)$ 时，在城镇 $1$ 和 $2$ 之间发生了滑坡。电缆 $(1,3)$ 和 $(4,0)$ 不可用了，因此可用的电缆是 $(0,1)$ 和 $(2,4)$。你需要在城镇 $0,2,3$ 建立基站。最少要建立基站数为 $3$。\n- 假设当有六根电缆 $(0, 1), (0, 3), (1, 2), (2, 4), (4, 0)$​​ 和 $(4,3)$​​ 时，在城镇 $3$​​ 和 $4$​​ 之间发生了滑坡。电缆 $(2,4),(4,0)$​​ 和 $(4,3)$​​ 不可用了，因此可用的电缆是 $(0,1),(0,3)$​​ 和 $(1,2)$​​。你需要在城镇 $0$​​ 和 $4$ 建立基站。最少要建立基站数为 $2$​​。\n\n**【数据范围】**\n\n本题有四个子任务。子任务分值及附加限制如下表所示：\n\n| 子任务编号 | 分值 |              $N$               |              $C,Q$               |              附加限制              |\n| :--------: | :--: | :----------------------------: | :------------------------------: | :--------------------------------: |\n|    $1$     | $5$  |       $2\\le N\\le 5\\ 000$       |       $1\\le C,Q\\le 5\\ 000$       |                 无                 |\n|    $2$     | $30$ |      $2\\le N\\le 100\\ 000$      |      $1\\le C,Q\\le 100\\ 000$      | 所有 $P_j\\ (0\\le j\\le Q-1)$ 都相等 |\n|    $3$     | $30$ | $2\\le N\\le 100\\ 000$ | $1\\le C,Q\\le 100\\ 000$ |      $T_i=0\\ (0\\le i\\le C-1)$      |\n|    $4$     | $35$ |      $2\\le N\\le 100\\ 000$      |      $1\\le C,Q\\le 100\\ 000$      |                 无                 |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2018] 山体滑坡 / Collapse", "background": "", "description": "I 先生有一个 $C$ 天的电缆建设计划。第 $(i+1)\\ (0\\le i\\le C-1)$​ 天的计划用三个整数 $T_i,X_i,Y_i$ 表示，分别表示：\n\n- 如果 $T_i=0$，他们会架设一段连接城镇 $X_i$ 与城镇 $Y_i$ 的电缆。保证在第 $(i+1)$ 天开始的时候城镇 $X_i$ 与城镇 $Y_i$ 之间没有电缆。\n- 如果 $T_i=1$​，他们会拆除一段连接城镇 $X_i$​ 与城镇 $Y_i$​ 的电缆。保证在第 $(i+1)$​ 天开始的时候城镇 $X_i$​ 与城镇 $Y_i$​ 之间有电缆。\n\nJOI 国经常发生山体滑坡。如果在城镇 $x$ 与 $x+1\\ (0\\le x\\le N-2)$​ 之间发生山体滑坡，则只有连接两端编号均不超过 $x$ 与编号均不少于 $x+1$ 城镇的电缆可用。在 JOI 国，每当山体滑坡发生，他们就会选择一些城镇建设基站。基站应满足对于任意城镇，都可以通过一些可用的电缆与基站连通。\n\nI 先生在建设阶段就在考虑山体滑坡发生时应建设多少基站。他有 $Q$ 个问题：第 $(j+1)$ 个问题用两个整数 $W_j,P_j$ 表示，表示他想知道在 $(W_j+1)$ 天结束时，如果在城镇 $P_j$ 和 $P_j+1$ 之间发生山体滑坡，至少应该建立多少基站。\n\n你作为 I 先生的助理，负责写一个程序去回答 I 先生的问题。", "inputFormat": "LOJ 上为交互题，方便起见，这里使用传统题的方式进行评测。\n\n第一行三个整数 $N,C,Q$。\n\n接下来 $C$ 行，每行三个整数 $T_i,X_i,Y_i$。\n\n接下来 $Q$ 行，每行两个整数 $W_j,P_j$。", "outputFormat": "输出 $Q$ 行，第 $j+1$ 行输出 $D_j$ 表示对第 $(j+1)$​ 个问题的回答。", "hint": "**【样例】**\n\n考虑有 $5$ 个城镇的情况。接下来用 $(x,y)$ 代表连接城镇 $x$ 和城镇 $y$ 的电缆。\n\n- 假设当有四根电缆 $(0,1),(1,3),(2,4),(4,0)$ 时，在城镇 $1$ 和 $2$ 之间发生了滑坡。电缆 $(1,3)$ 和 $(4,0)$ 不可用了，因此可用的电缆是 $(0,1)$ 和 $(2,4)$。你需要在城镇 $0,2,3$ 建立基站。最少要建立基站数为 $3$。\n- 假设当有六根电缆 $(0, 1), (0, 3), (1, 2), (2, 4), (4, 0)$​​ 和 $(4,3)$​​ 时，在城镇 $3$​​ 和 $4$​​ 之间发生了滑坡。电缆 $(2,4),(4,0)$​​ 和 $(4,3)$​​ 不可用了，因此可用的电缆是 $(0,1),(0,3)$​​ 和 $(1,2)$​​。你需要在城镇 $0$​​ 和 $4$ 建立基站。最少要建立基站数为 $2$​​。\n\n**【数据范围】**\n\n本题有四个子任务。子任务分值及附加限制如下表所示：\n\n| 子任务编号 | 分值 |              $N$               |              $C,Q$               |              附加限制              |\n| :--------: | :--: | :----------------------------: | :------------------------------: | :--------------------------------: |\n|    $1$     | $5$  |       $2\\le N\\le 5\\ 000$       |       $1\\le C,Q\\le 5\\ 000$       |                 无                 |\n|    $2$     | $30$ |      $2\\le N\\le 100\\ 000$      |      $1\\le C,Q\\le 100\\ 000$      | 所有 $P_j\\ (0\\le j\\le Q-1)$ 都相等 |\n|    $3$     | $30$ | $2\\le N\\le 100\\ 000$ | $1\\le C,Q\\le 100\\ 000$ |      $T_i=0\\ (0\\le i\\le C-1)$      |\n|    $4$     | $35$ |      $2\\le N\\le 100\\ 000$      |      $1\\le C,Q\\le 100\\ 000$      |                 无                 |\n\n", "locale": "zh-CN"}}}
{"pid": "P9599", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2018", "交互题", "Special Judge", "O2优化", "JOI（日本）"], "title": "[JOI Open 2018] 木琴 / Xylophone", "background": "**特别提醒，由于洛谷交互机制的特殊性，你不能在程序中引用 `xylophone.h`，而需要把 `xylophone.h` 中的内容加入文件的开头。即，在程序中 `solve` 函数的前面加入以下几行语句：**\n\n```cpp\nvoid solve(int N);\nint query(int s, int t);\nvoid answer(int i, int a);\n```\n\n**同时不建议使用 C++14(GCC 9) 提交本题，建议选择 C++17 或者更高的语言版本提交。**", "description": "木琴是一种乐器，人可以通过敲击木条来演奏它。单个木条总是发出同样音高的音，因此一个木琴包含不同种音高的木条。\n\nJOI 君买了一个有 $N$ 个木条的木琴。这 $N$ 个木条排成一排，从左到右编号为 $1$ 到 $N$。编号为 $i\\ (1\\le i\\le N)$ 的木条能发出音高为 $A_i\\ (1\\le A_i\\le N)$ 的音。不同的木条发出不同音高的音。他知道音高最低的木条要比音高最高的编号小。\n\n因为 JOI 君不知道每个木条的音高是什么，他决定研究这些木条的音高。\n\nJOI 有一种独特的音感，当他连续听到多个音时，他能分辨出最高音和最低音差多少。他可以一次敲击一些木条，然后听它们发出的声音。也就是说，对于两个整数 $s$ 和 $t\\ (1\\le s\\le t\\le N)$，他可以连续敲击编号从 $s$ 到 $t$​ 的木条，以知道 $A_s,A_{s+1},\\ldots ,A_t$​ 中最大值与最小值的差。\n\n他想在 $10\\ 000$ 次敲击之内知道每个木条的音高。\n\n---\n\n**【实现细节】**\n\n你需要实现函数 `solve` 以求出每个木条的音高。\n\n- `solve(N)`\n\n  - $N$：木条的数量。\n  - 这个函数每个测试点调用恰好一次。\n\n你的程序可以调用评分器实现的如下函数。\n\n- `query(s, t)`\n\n  这个函数返回在给定区间中木条音高最大值与最小值的差。\n\n  - $s, t$：$s$ 是要敲击的木条区间中第一个数，$t$ 是最后一个数。也就是说，你需要敲击编号在 $[s,t]$ 区间内的所有木条。\n  - 必须保证 $1\\le s\\le t\\le N$。\n  - 你不能调用 `query` 函数超过 $10\\ 000$ 次。\n  - 如果上述条件不满足，你的程序会被判为 **Wrong Answer**。\n\n- `answer(i, a)`\n\n  你的程序应当用这个函数回答每个木条的音高。\n\n  - $i, a$：这意味着你回答了 $A_i$ 的值为 $a$，其中 $A_i$ 指木条 $i$ 的音高。\n  - 必须保证 $1\\le i\\le N$。\n  - 你不能对于相同的 $\\texttt i$ 调用超过一次这个函数。\n  - 你必须在函数 $\\texttt{solve}$ 结束前调用恰好 $N$ 次此函数。\n  - 如果上述条件不满足，你的程序会被判为 **Wrong Answer**。\n  - 如果你的回答与实际音高有不同，你的程序会被判为 **Wrong Answer**。\n\n暂不支持 Java 与 Pascal 提交的测评。", "inputFormat": "", "outputFormat": "", "hint": "**【样例交互】**\n\n一个对于 $N=5,(A_1,A_2,A_3,A_4,A_5)=(2,1,5,3,4)$ 的样例交互过程如下。\n\n|          调用           |   返回值   |\n| :---------------------: | :--------: |\n| $\\texttt{query(1, 5)}$  |            |\n|                         |    $4$     |\n| $\\texttt{answer(1, 2)}$ |            |\n| $\\texttt{query(3, 5)}$  |  |\n|                         |    $2$     |\n| $\\texttt{answer(2, 1)}$​ |            |\n| $\\texttt{answer(3, 5)}$​ |  |\n| $\\texttt{answer(5, 4)}$​ |            |\n| $\\texttt{answer(4, 3)}$​ |  |\n\n**【数据范围】**\n\n所有子任务满足以下限制：\n\n- $1\\le A_i\\le N\\ (1\\le i\\le N)$\n- $A_i\\neq A_j\\ (1\\le i<j\\le N)$\n- 对于满足 $A_i=1,A_j=N$ 的 $i$ 和 $j$，满足 $i<j$​。\n\n本题有三个子任务。子任务分值及附加限制如下表所示：\n\n| 子任务编号 | 分值 |        $N$         |\n| :--------: | :--: | :----------------: |\n|    $1$     | $11$ |  $2\\le N\\le 100$   |\n|    $2$     | $36$ | $2\\le N\\le 1\\ 000$ |\n|    $3$     | $53$ | $2\\le N\\le 5\\ 000$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2018] 木琴 / Xylophone", "background": "**特别提醒，由于洛谷交互机制的特殊性，你不能在程序中引用 `xylophone.h`，而需要把 `xylophone.h` 中的内容加入文件的开头。即，在程序中 `solve` 函数的前面加入以下几行语句：**\n\n```cpp\nvoid solve(int N);\nint query(int s, int t);\nvoid answer(int i, int a);\n```\n\n**同时不建议使用 C++14(GCC 9) 提交本题，建议选择 C++17 或者更高的语言版本提交。**", "description": "木琴是一种乐器，人可以通过敲击木条来演奏它。单个木条总是发出同样音高的音，因此一个木琴包含不同种音高的木条。\n\nJOI 君买了一个有 $N$ 个木条的木琴。这 $N$ 个木条排成一排，从左到右编号为 $1$ 到 $N$。编号为 $i\\ (1\\le i\\le N)$ 的木条能发出音高为 $A_i\\ (1\\le A_i\\le N)$ 的音。不同的木条发出不同音高的音。他知道音高最低的木条要比音高最高的编号小。\n\n因为 JOI 君不知道每个木条的音高是什么，他决定研究这些木条的音高。\n\nJOI 有一种独特的音感，当他连续听到多个音时，他能分辨出最高音和最低音差多少。他可以一次敲击一些木条，然后听它们发出的声音。也就是说，对于两个整数 $s$ 和 $t\\ (1\\le s\\le t\\le N)$，他可以连续敲击编号从 $s$ 到 $t$​ 的木条，以知道 $A_s,A_{s+1},\\ldots ,A_t$​ 中最大值与最小值的差。\n\n他想在 $10\\ 000$ 次敲击之内知道每个木条的音高。\n\n---\n\n**【实现细节】**\n\n你需要实现函数 `solve` 以求出每个木条的音高。\n\n- `solve(N)`\n\n  - $N$：木条的数量。\n  - 这个函数每个测试点调用恰好一次。\n\n你的程序可以调用评分器实现的如下函数。\n\n- `query(s, t)`\n\n  这个函数返回在给定区间中木条音高最大值与最小值的差。\n\n  - $s, t$：$s$ 是要敲击的木条区间中第一个数，$t$ 是最后一个数。也就是说，你需要敲击编号在 $[s,t]$ 区间内的所有木条。\n  - 必须保证 $1\\le s\\le t\\le N$。\n  - 你不能调用 `query` 函数超过 $10\\ 000$ 次。\n  - 如果上述条件不满足，你的程序会被判为 **Wrong Answer**。\n\n- `answer(i, a)`\n\n  你的程序应当用这个函数回答每个木条的音高。\n\n  - $i, a$：这意味着你回答了 $A_i$ 的值为 $a$，其中 $A_i$ 指木条 $i$ 的音高。\n  - 必须保证 $1\\le i\\le N$。\n  - 你不能对于相同的 $\\texttt i$ 调用超过一次这个函数。\n  - 你必须在函数 $\\texttt{solve}$ 结束前调用恰好 $N$ 次此函数。\n  - 如果上述条件不满足，你的程序会被判为 **Wrong Answer**。\n  - 如果你的回答与实际音高有不同，你的程序会被判为 **Wrong Answer**。\n\n暂不支持 Java 与 Pascal 提交的测评。", "inputFormat": "", "outputFormat": "", "hint": "**【样例交互】**\n\n一个对于 $N=5,(A_1,A_2,A_3,A_4,A_5)=(2,1,5,3,4)$ 的样例交互过程如下。\n\n|          调用           |   返回值   |\n| :---------------------: | :--------: |\n| $\\texttt{query(1, 5)}$  |            |\n|                         |    $4$     |\n| $\\texttt{answer(1, 2)}$ |            |\n| $\\texttt{query(3, 5)}$  |  |\n|                         |    $2$     |\n| $\\texttt{answer(2, 1)}$​ |            |\n| $\\texttt{answer(3, 5)}$​ |  |\n| $\\texttt{answer(5, 4)}$​ |            |\n| $\\texttt{answer(4, 3)}$​ |  |\n\n**【数据范围】**\n\n所有子任务满足以下限制：\n\n- $1\\le A_i\\le N\\ (1\\le i\\le N)$\n- $A_i\\neq A_j\\ (1\\le i<j\\le N)$\n- 对于满足 $A_i=1,A_j=N$ 的 $i$ 和 $j$，满足 $i<j$​。\n\n本题有三个子任务。子任务分值及附加限制如下表所示：\n\n| 子任务编号 | 分值 |        $N$         |\n| :--------: | :--: | :----------------: |\n|    $1$     | $11$ |  $2\\le N\\le 100$   |\n|    $2$     | $36$ | $2\\le N\\le 1\\ 000$ |\n|    $3$     | $53$ | $2\\le N\\le 5\\ 000$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P9600", "type": "P", "difficulty": 6, "samples": [["2\n7 0 2 10\n0 1 2\n0 3 3\n1 2 4\n2 4 2\n2 5 5\n5 6 3\n4 0 3 20\n0 1 18\n1 2 1\n2 3 19\n", "6\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2023", "IOI", "交互题", "O2优化"], "title": "[IOI 2023] 封锁时刻", "background": "这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。\n\n本题仅支持 C++ 语言提交。", "description": "匈牙利有 $N$ 个城市，编号依次为 $0$ 到 $N - 1$。\n\n这些城市之间由 $N - 1$ 条双向道路连接，编号为 $0$ 至 $N - 2$。对每个 $j$（$0 \\le j \\le N - 2$），第 $j$ 条道路连接城市 $U[j]$ 和城市 $V[j]$，其长度为 $W[j]$，表示这两个城市之间的交通时间为 $W[j]$ 个时间单位。每条道路连接两个不同的城市，且每两个城市之间最多由一条道路连接。\n\n两个不同城市 $a$ 和 $b$ 之间的一条**路径**是一个由不同城市组成的序列 $p_0, p_1, \\ldots, p_t$，满足以下条件：\n * $p_0 = a$， \n * $p_t = b$， \n * 对每个 $i$（$0 \\le i \\lt t$），存在一条道路连接 $p_i$ 和 $p_{i + 1}$。\n\n利用这些道路从任意一个城市到任意一个其他的城市都是有可能的。换言之，任意两个不同城市之间都存在路径。  \n可以证明两个不同城市之间的路径是唯一的。\n\n一条路径 $p_0, p_1, \\ldots, p_t$ 的**长度**是这条路径上连接相邻城市的 $t$ 条道路的长度之和。\n\n在匈牙利，很多人都会在建国日去参加在两个主要城市举行的庆祝活动。当庆祝活动结束时，他们会回家。政府为了防止人群干扰当地人，所以决定在特定时刻封锁城市。每个城市被政府分配一个非负的**封锁时刻**。政府决定所有城市的封锁时刻总和不得超过 $K$。具体来说，对每个 $i$（$0 \\leq i \\leq N - 1$），分配给城市 $i$ 的封锁时刻是一个非负整数  $c[i]$。所有  $c[i]$ 之和不超过 $K$。\n\n考虑一个城市 $a$ 和某个封锁时刻的分配方案，我们说城市 $b$ 是从城市 $a$ 可达的当且仅当以下两种情况中的任意一种情况成立。\n\n情况 1：$b = a$。\n\n情况 2：这两个城市之间的路径  $p_0, \\ldots, p_t$ （$p_0 = a$ 且 $p_t = b$）满足以下条件：\n* 路径 $p_0, p_1$ 的长度最多为 $c[p_1]$，并且\n* 路径 $p_0, p_1, p_2$ 的长度最多为 $c[p_2]$，并且\n* $\\ldots$\n* 路径 $p_0, p_1, p_2, \\ldots, p_t$ 的长度最长为  $c[p_t]$。\n\n今年，两个主要的庆祝地点位于城市 $X$ 和 $Y$。  \n对于每一个封锁时刻的分配方案，可以定义一个**便利分数**，其定义为下面两个数字之和：\n- 从城市 $X$ 可达的城市个数。\n- 从城市 $Y$ 可达的城市个数。\n\n注意如果一个城市既能从城市 $X$ 可达也能从城市 $Y$ 可达，那么它在计算便利分数时计算两次。\n\n你的任务是计算能被某个封锁时刻分配方案实现的最大便利分数。", "inputFormat": "令 $C$ 表示场景数，即调用 `max_score` 的次数。\n评测程序实例按以下格式读取输入：\n\n* 第 $1$ 行：$C$\n\n以下是 $C$ 个场景的描述。\n\n评测程序实例按以下格式读取每个场景的描述：\n\n* 第 $1$ 行：$N \\; X \\; Y \\; K$\n* 第 $2 + j$ 行（$0 \\le j \\le N - 2$）：$U[j] \\; V[j] \\; W[j]$", "outputFormat": "评测程序实例按以下格式为每个场景打印单独一行\n\n* 第 $1$ 行： `max_score` 的返回值", "hint": "#### 【实现细节】\n\n你要实现以下函数。\n\n```\nint max_score(int N, int X, int Y, int64 K, int[] U, int[] V, int[] W)\n```\n\n* $N$：城市的个数\n* $X$，$Y$：两个主要庆祝城市\n* $K$：封锁时刻总和的上界\n* $U$，$V$： 长度为 $N - 1$ 的描述道路连接情况的数组\n* $W$：长度为 $N - 1$ 的描述道路长度的数组\n* 该函数要返回能被某个封锁时刻分配方案实现的最大便利分数\n* 每个测试用例可以多次调用该函数\n\n\n\n#### 【例子】\n\n\n考虑以下调用：\n\n```\nmax_score(7, 0, 2, 10,\n          [0, 0, 1, 2, 2, 5], [1, 3, 2, 4, 5, 6], [2, 3, 4, 2, 5, 3])\n```\n\n\n\n这对应以下道路网络：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wf5uw4qd.png)\n\n\n\n假设封锁时刻如下分配：\n\n| **城市**         | $0$ | $1$ | $2$ | $3$ | $4$ | $5$ | $6$ |\n|:----------------:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n| **封锁时刻** | $0$ | $4$ | $0$ | $3$ | $2$ | $0$ | $0$ |\n\n\n\n注意所有封锁时刻之和为 $9$，不超过 $K = 10$。城市 $0$，$1$ 和 $3$ 都是从城市 $X$（$X = 0$）可达的，而城市 $1$，$2$ 和 $4$ 都可以从城市 $Y$（$Y  = 2$）可达。 因此，便利分数为 $3+3 = 6$。不存在封锁时刻分配方案使得便利分数大于 $6$，所以该函数应该返回 $6$。\n\n\n\n考虑另外一个调用：\n\n```\nmax_score(4, 0, 3, 20, [0, 1, 2], [1, 2, 3], [18, 1, 19])\n```\n\n\n\n这对应以下道路网络：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zcw4gdi5.png)\n\n假设封锁时间如下分配：\n\n| **城市**         | $0$ | $1$ | $2$ | $3$ |\n|:----------------:|:---:|:---:|:---:|:---:|\n| **封锁时刻** | $0$ | $1$ | $19$| $0$ |\n\n\n\n城市 $0$ 从城市 $X$（$X = 0$）可达，而城市 $2$ 和 $3$ 都是可以从城市 $Y$（$Y=3$）可达的。因此，便利分数是 $1 + 2 = 3$。不存在封锁时刻分配方案使得便利分数大于 $3$，所以函数应该返回 $3$。\n\n#### 【约束条件】\n\n* $2 \\le N \\le 200\\,000$\n* $0 \\le X \\lt Y \\lt N$\n* $0 \\le K \\le 10^{18}$\n* $0 \\le U[j] \\lt V[j] \\lt N$ (对每个 $j$ 满足 $0 \\le j \\le N - 2$)\n* $1 \\le W[j] \\le 10^6$ (对每个 $j$ 满足 $0 \\le j \\le N - 2$)\n* 利用这些道路可以从任意一个城市走到任意另外一个城市。\n* $S_N \\le 200\\,000$，其中 $S_N$ 是所有调用函数 `max_score` 的  $N$ 的总和。\n\n\n#### 【子任务】\n\n\n我们说一个道路网络是**线性的**如果道路 $i$ 连接城市 $i$ 和 $i+1$（对每个$0 \\le i \\le N - 2$ 的 $i$）。\n\n1. （8 分）从城市 $X$ 到城市 $Y$ 的路径长度大于 $2K$。\n1. （9 分）$S_N \\le 50$，道路网络是线性的。\n1. （12 分）$S_N \\le 500$，道路网络是线性的。\n1. （14 分）$S_N \\le 3\\,000$，道路网络是线性的。\n1. （9 分）$S_N \\le 20$\n1. （11 分）$S_N \\le 100$\n1. （10 分）$S_N \\le 500$\n1. （10 分）$S_N \\le 3\\,000$\n1. （17 分）无额外的约束条件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2023] 封锁时刻", "background": "这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。\n\n本题仅支持 C++ 语言提交。", "description": "匈牙利有 $N$ 个城市，编号依次为 $0$ 到 $N - 1$。\n\n这些城市之间由 $N - 1$ 条双向道路连接，编号为 $0$ 至 $N - 2$。对每个 $j$（$0 \\le j \\le N - 2$），第 $j$ 条道路连接城市 $U[j]$ 和城市 $V[j]$，其长度为 $W[j]$，表示这两个城市之间的交通时间为 $W[j]$ 个时间单位。每条道路连接两个不同的城市，且每两个城市之间最多由一条道路连接。\n\n两个不同城市 $a$ 和 $b$ 之间的一条**路径**是一个由不同城市组成的序列 $p_0, p_1, \\ldots, p_t$，满足以下条件：\n * $p_0 = a$， \n * $p_t = b$， \n * 对每个 $i$（$0 \\le i \\lt t$），存在一条道路连接 $p_i$ 和 $p_{i + 1}$。\n\n利用这些道路从任意一个城市到任意一个其他的城市都是有可能的。换言之，任意两个不同城市之间都存在路径。  \n可以证明两个不同城市之间的路径是唯一的。\n\n一条路径 $p_0, p_1, \\ldots, p_t$ 的**长度**是这条路径上连接相邻城市的 $t$ 条道路的长度之和。\n\n在匈牙利，很多人都会在建国日去参加在两个主要城市举行的庆祝活动。当庆祝活动结束时，他们会回家。政府为了防止人群干扰当地人，所以决定在特定时刻封锁城市。每个城市被政府分配一个非负的**封锁时刻**。政府决定所有城市的封锁时刻总和不得超过 $K$。具体来说，对每个 $i$（$0 \\leq i \\leq N - 1$），分配给城市 $i$ 的封锁时刻是一个非负整数  $c[i]$。所有  $c[i]$ 之和不超过 $K$。\n\n考虑一个城市 $a$ 和某个封锁时刻的分配方案，我们说城市 $b$ 是从城市 $a$ 可达的当且仅当以下两种情况中的任意一种情况成立。\n\n情况 1：$b = a$。\n\n情况 2：这两个城市之间的路径  $p_0, \\ldots, p_t$ （$p_0 = a$ 且 $p_t = b$）满足以下条件：\n* 路径 $p_0, p_1$ 的长度最多为 $c[p_1]$，并且\n* 路径 $p_0, p_1, p_2$ 的长度最多为 $c[p_2]$，并且\n* $\\ldots$\n* 路径 $p_0, p_1, p_2, \\ldots, p_t$ 的长度最长为  $c[p_t]$。\n\n今年，两个主要的庆祝地点位于城市 $X$ 和 $Y$。  \n对于每一个封锁时刻的分配方案，可以定义一个**便利分数**，其定义为下面两个数字之和：\n- 从城市 $X$ 可达的城市个数。\n- 从城市 $Y$ 可达的城市个数。\n\n注意如果一个城市既能从城市 $X$ 可达也能从城市 $Y$ 可达，那么它在计算便利分数时计算两次。\n\n你的任务是计算能被某个封锁时刻分配方案实现的最大便利分数。", "inputFormat": "令 $C$ 表示场景数，即调用 `max_score` 的次数。\n评测程序实例按以下格式读取输入：\n\n* 第 $1$ 行：$C$\n\n以下是 $C$ 个场景的描述。\n\n评测程序实例按以下格式读取每个场景的描述：\n\n* 第 $1$ 行：$N \\; X \\; Y \\; K$\n* 第 $2 + j$ 行（$0 \\le j \\le N - 2$）：$U[j] \\; V[j] \\; W[j]$", "outputFormat": "评测程序实例按以下格式为每个场景打印单独一行\n\n* 第 $1$ 行： `max_score` 的返回值", "hint": "#### 【实现细节】\n\n你要实现以下函数。\n\n```\nint max_score(int N, int X, int Y, int64 K, int[] U, int[] V, int[] W)\n```\n\n* $N$：城市的个数\n* $X$，$Y$：两个主要庆祝城市\n* $K$：封锁时刻总和的上界\n* $U$，$V$： 长度为 $N - 1$ 的描述道路连接情况的数组\n* $W$：长度为 $N - 1$ 的描述道路长度的数组\n* 该函数要返回能被某个封锁时刻分配方案实现的最大便利分数\n* 每个测试用例可以多次调用该函数\n\n\n\n#### 【例子】\n\n\n考虑以下调用：\n\n```\nmax_score(7, 0, 2, 10,\n          [0, 0, 1, 2, 2, 5], [1, 3, 2, 4, 5, 6], [2, 3, 4, 2, 5, 3])\n```\n\n\n\n这对应以下道路网络：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wf5uw4qd.png)\n\n\n\n假设封锁时刻如下分配：\n\n| **城市**         | $0$ | $1$ | $2$ | $3$ | $4$ | $5$ | $6$ |\n|:----------------:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n| **封锁时刻** | $0$ | $4$ | $0$ | $3$ | $2$ | $0$ | $0$ |\n\n\n\n注意所有封锁时刻之和为 $9$，不超过 $K = 10$。城市 $0$，$1$ 和 $3$ 都是从城市 $X$（$X = 0$）可达的，而城市 $1$，$2$ 和 $4$ 都可以从城市 $Y$（$Y  = 2$）可达。 因此，便利分数为 $3+3 = 6$。不存在封锁时刻分配方案使得便利分数大于 $6$，所以该函数应该返回 $6$。\n\n\n\n考虑另外一个调用：\n\n```\nmax_score(4, 0, 3, 20, [0, 1, 2], [1, 2, 3], [18, 1, 19])\n```\n\n\n\n这对应以下道路网络：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zcw4gdi5.png)\n\n假设封锁时间如下分配：\n\n| **城市**         | $0$ | $1$ | $2$ | $3$ |\n|:----------------:|:---:|:---:|:---:|:---:|\n| **封锁时刻** | $0$ | $1$ | $19$| $0$ |\n\n\n\n城市 $0$ 从城市 $X$（$X = 0$）可达，而城市 $2$ 和 $3$ 都是可以从城市 $Y$（$Y=3$）可达的。因此，便利分数是 $1 + 2 = 3$。不存在封锁时刻分配方案使得便利分数大于 $3$，所以函数应该返回 $3$。\n\n#### 【约束条件】\n\n* $2 \\le N \\le 200\\,000$\n* $0 \\le X \\lt Y \\lt N$\n* $0 \\le K \\le 10^{18}$\n* $0 \\le U[j] \\lt V[j] \\lt N$ (对每个 $j$ 满足 $0 \\le j \\le N - 2$)\n* $1 \\le W[j] \\le 10^6$ (对每个 $j$ 满足 $0 \\le j \\le N - 2$)\n* 利用这些道路可以从任意一个城市走到任意另外一个城市。\n* $S_N \\le 200\\,000$，其中 $S_N$ 是所有调用函数 `max_score` 的  $N$ 的总和。\n\n\n#### 【子任务】\n\n\n我们说一个道路网络是**线性的**如果道路 $i$ 连接城市 $i$ 和 $i+1$（对每个$0 \\le i \\le N - 2$ 的 $i$）。\n\n1. （8 分）从城市 $X$ 到城市 $Y$ 的路径长度大于 $2K$。\n1. （9 分）$S_N \\le 50$，道路网络是线性的。\n1. （12 分）$S_N \\le 500$，道路网络是线性的。\n1. （14 分）$S_N \\le 3\\,000$，道路网络是线性的。\n1. （9 分）$S_N \\le 20$\n1. （11 分）$S_N \\le 100$\n1. （10 分）$S_N \\le 500$\n1. （10 分）$S_N \\le 3\\,000$\n1. （17 分）无额外的约束条件。", "locale": "zh-CN"}}}
{"pid": "P9601", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2023", "IOI", "交互题", "Special Judge", "O2优化"], "title": "[IOI 2023] 最长路程", "background": "IOI2023 D1T2\n\n**特别提醒，由于洛谷交互机制的特殊性，你不能在程序中引入头文件，而需要把头文件的内容加入文件的开头。即，在程序开头加入以下几行语句：**\n\n```\n#include <vector>\n\nstd::vector<int> longest_trip(int N, int D);\n\nbool are_connected(std::vector<int> A, std::vector<int> B);\n```", "description": "IOI 2023 组委会有大麻烦了！他们忘记计划即将到来的 Ópusztaszer 之旅了。然而，或许一切尚未为晚 ......\n\n在 Ópusztaszer 有 $N$ 个地标，编号为从 $0$ 到 $N-1$。某些地标之间连有**双向**的**道路**。任意一对地标之间至多连有一条道路。组委会**不知道**哪些地标之间有道路相连。\n\n如果对于每三个不同的地标，它们之间都至少连有 $\\delta$ 条道路，我们就称 Ópusztaszer 的路网**密度**是**至少**为 $\\delta$ 的。换言之，对所有满足 $0 \\le u \\lt v \\lt w \\lt N$ 的地标三元组 $(u, v, w)$，配对 $(u,v)$，$(v,w)$ 和 $(u,w)$ 中至少有 $\\delta$ 个配对中的地标有道路相连。\n\n组委会**已知**有某个正整数 $D$，满足路网密度至少为 $D$。注意， $D$ 的值不会大于 $3$。\n\n组委会可以**询问** Ópusztaszer 的电话接线员，以获取关于某些地标之间的道路连接信息。在每次询问时，必须给出两个非空的地标数组 $[A[0], \\ldots, A[P-1]]$ 和 $[B[0], \\ldots, B[R-1]]$。地标之间必须是两两不同的，即，\n\n* 对于满足 $0 \\le i \\lt j \\lt P$ 的所有 $i$ 和 $j$，有 $A[i] \\neq A[j]$；\n* 对于满足 $0 \\le i \\lt j \\lt R$ 的所有 $i$ 和 $j$，有 $B[i] \\neq B[j]$；\n* 对于满足 $0 \\le i \\lt P$ 且 $0\\le j \\lt R$ 的所有 $i$ 和 $j$，有 $A[i] \\neq B[j]$。\n\n对每次询问，接线员都会报告是否存在 $A$ 中的某个地标和 $B$ 中的某个地标有道路相连。更准确地说，接线员会对满足 $0 \\le i \\lt P$ 和 $0\\le j \\lt R$ 的所有配对 $i$ 和 $j$ 进行尝试。如果其中某对地标 $A[i]$ 与 $B[j]$ 之间连有道路，接线员将报告 `true`。否则，接线员将报告 `false`。\n\n一条长度为 $l$ 的**路程**，被定义为由**不同**地标 $t[0], t[1], \\ldots, t[l-1]$ 构成的序列，其中对从 $0$ 到 $l-2$（包括 $0$ 和 $l-2$）的所有 $i$，地标 $t[i]$ 和 $t[i+1]$ 之间都有道路相连。如果不存在长度至少为 $l+1$ 的路程，则长度为 $l$ 的某条路程被称为是**最长路程**。\n\n你的任务是通过询问接线员，帮助组委会在 Ópusztaszer 找一条最长路程。\n\n---\n\n**【实现细节】**\n\n你需要实现如下函数：\n\n```\nint[] longest_trip(int N, int D)\n```\n\n* $N$：Ópusztaszer 的地标数量。\n* $D$：可以保证的路网密度最小值。\n* 该函数需要返回一个表示某条最长路程的数组 $t = [t[0], t[1], \\ldots, t[l-1]]$。\n* 对于每个测试用例，该函数都可能会被调用 **多次**。\n\n上述函数可以调用如下函数：\n\n```\nbool are_connected(int[] A, int[] B)\n```\n\n* $A$：一个非空、且元素两两不同的地标数组。\n* $B$：一个非空、且元素两两不同的地标数组。\n* $A$ 和 $B$ 之间应无交集。\n* 如果存在连接 $A$ 中某个地标以及 $B$ 中某个地标的道路，该函数返回 `true`。否则该函数返回 `false`。\n* 在每次 `longest_trip` 调用中，该函数可以被至多调用 $32\\,640$ 次。该函数的累计调用总数至多为 $150\\,000$ 次。\n* 对历次调用该函数时传递的数组 $A$ 和 $B$ 长度进行累计，两个数组累计长度加起来不能超过 $1\\,500\\,000$。\n\n评测程序是**非适应性的**。每次提交都将在同一组测试用例上进行评测。换言之，在每个测试用例中，$N$ 和 $D$ 的值，以及道路所连接的地标配对，对于每次 `longest_trip` 调用都保持不变。", "inputFormat": "", "outputFormat": "", "hint": "**【例子】**\n\n**样例一**\n\n考虑某个 $N = 5$, $D = 1$ 的场景，其中道路连接情形如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h4q6u936.png)\n\n函数 `longest_trip` 被调用如下：\n\n```\nlongest_trip(5, 1)\n```\n\n该函数可以调用 `are_connected` 如下。\n\n|                调用                |  有道路连接的配对  | 返回值  |\n| :--------------------------------: | :----------------: | :-----: |\n| `are_connected([0], [1, 2, 4, 3])` | $(0,1)$ 和 $(0,2)$ | `true`  |\n|     `are_connected([2], [0])`      |      $(2,0)$       | `true`  |\n|     `are_connected([2], [3])`      |      $(2,3)$       | `true`  |\n|  `are_connected([1, 0], [4, 3])`   |         无         | `false` |\n\n在第四次调用后，可知 $(1,4)$，$(0,4)$，$(1,3)$ 和 $(0,3)$ 中**没有**哪个配对中的地标之间连有道路。由于路网的密度至少是 $D = 1$，我们由三元组 $(0, 3, 4)$ 可知，配对 $(3,4)$ 的地标之间必须连有道路。与此相似，地标 $0$ 和 $1$ 之间必须是相连的。\n\n至此，可以总结出 $t = [1, 0, 2, 3, 4]$ 是一条长度为 $5$ 的路程，而且不存在长度超过 $5$ 的路程。因此，函数 `longest_trip` 可以返回 $[1, 0, 2, 3, 4]$。\n\n考虑另一个场景， 其中 $N = 4$, $D = 1$，且地标之间的道路如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6kk0r3y9.png)\n\n函数 `longest_trip` 被调用如下：\n\n```\nlongest_trip(4, 1)\n```\n\n在这个场景中，最长路程的长度为 $2$。因此，在对函数 `are_connected` 进行少量调用后，函数 `longest_trip` 可以返回 $[0, 1]$, $[1, 0]$, $[2, 3]$ 和 $[3, 2]$ 中的任意一个.\n\n**样例 2**\n\n子任务 0 包含另一个测试用例用作示例，其中有 $N=256$ 个地标。\n\n**【数据范围】**\n\n* $3 \\le N \\le 256$\n* 对于每个测试用例，函数 `longest_trip` 的所有调用中 $N$ 的累计总和不超过 $1\\,024$。\n* $1 \\le D \\le 3$\n\n**【子任务】**\n\n1. （5 分）$D = 3$\n1. （10 分）$D = 2$\n1. （25 分）$D = 1$。令 $l^\\star$ 表示最长路程的长度。函数 `longest_trip` 不必返回长度为 $l^\\star$ 的某条路程，而应返回长度至少为 $\\left\\lceil \\frac{l^\\star}{2} \\right\\rceil$ 的某条路程。\n1. （60 分）$D = 1$\n\n在子任务 4 中，你的得分将根据 `longest_trip` 的单次调用中对函数 `are_connected` 的调用数量而定。对该子任务的所有测试用例调用 `longest_trip`，令 $q$ 为各次调用产生的函数 `are_connected` 调用次数的最大值。\n你在该子任务上的得分将按照下表进行计算：\n\n|            条件            | 得分 |\n| :------------------------: | :--: |\n| $2\\,750 \\lt q \\le 32\\,640$ | $20$ |\n|   $550 \\lt q \\le 2\\,750$   | $30$ |\n|    $400 \\lt q \\le 550$     | $45$ |\n|        $q \\le 400$         | $60$ |\n\n如果在某个测试用例上，对函数 `are_connected` 的调用没有遵守实现细节部分给出的限制条件，或者 `longest_trip` 返回的数组是错误的，你的解答在该子任务上的得分将为 $0$。\n\n**【评测程序示例】**\n\n令 $C$ 为场景数量，即调用 `longest_trip` 的次数。\n评测程序示例读取如下格式的输入数据：\n\n* 第 $1$ 行：$C$\n\n接下来是这 $C$ 个场景的描述数据。\n\n评测程序示例读取每个场景如下格式的描述数据：\n\n* 第 $1$ 行：$N \\; D$\n* 第 $1 + i$ 行（$1 \\le i \\lt N$）：$U_i[0] \\; U_i[1] \\; \\ldots \\; U_i[i-1]$\n\n这里每个 $U_i$（$1 \\le i \\lt N$）均为长度为 $i$ 的数组，以给出那些有道路相连的地标配对。对于满足 $1 \\le i \\lt N$ 且 $0 \\le j \\lt i$ 的所有 $i$ 和 $j$：\n\n* 如果地标 $j$ 和 $i$ 之间有道路相连，则 $U_i[j]$ 的值应为 $1$；\n* 如果地标 $j$ 和 $i$ 之间没有道路相连，则 $U_i[j]$ 的值应为 $0$。\n\n在每个场景中，在调用 `longest_trip` 之前，评测程序示例检查路网的密度是否至少为 $D$。如果不满足该条件，评测程序示例将输出信息 `Insufficient Density` 并中止。\n\n如果检查出违反规则的行为，评测程序示例的输出为 `Protocol Violation: <MSG>`，这里 `<MSG>` 为如下错误信息之一：\n\n* `invalid array`：在 `are_connected` 的某次调用中，数组 $A$ 和 $B$ 中至少其一\n  - 为空，或\n  - 有元素不是 $0$ 到 $N-1$ 之间（包含 $0$ 和 $N-1$）的整数，或\n  - 有重复元素。\n* `non-disjoint arrays`：在 `are_connected` 的某次调用中，数组 $A$ 和 $B$ 的交集不空。\n* `too many calls`：函数 `are_connected` 在 `longest trip` 的当前调用中的被调用次数超过了 $32\\,640$，或者其累计调用次数超过了 $150\\,000$。\n* `too many elements`：在 `are_connected` 的全部调用中，所传递的地标的累计数量超过了 $1\\,500\\,000$。\n\n否则，令 `longest_trip` 函数在某个场景中的返回数组为 $t[0], t[1], \\ldots, t[l - 1]$，这里 $l$ 为某个非负整数。评测程序示例将对该场景按照如下格式输出三行：\n\n* 第 $1$ 行：$l$\n* 第 $2$ 行：$t[0] \\; t[1] \\; \\ldots \\; t[l-1]$\n* 第 $3$ 行：在该场景中调用 `are_connected` 的次数\n\n最后，评测程序示例输出：\n\n* 第 $1 + 3 \\cdot C$ 行：在 `longest_trip` 的所有调用中，函数 `are_connected` 被调用的最多次数", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2023] 最长路程", "background": "IOI2023 D1T2\n\n**特别提醒，由于洛谷交互机制的特殊性，你不能在程序中引入头文件，而需要把头文件的内容加入文件的开头。即，在程序开头加入以下几行语句：**\n\n```\n#include <vector>\n\nstd::vector<int> longest_trip(int N, int D);\n\nbool are_connected(std::vector<int> A, std::vector<int> B);\n```", "description": "IOI 2023 组委会有大麻烦了！他们忘记计划即将到来的 Ópusztaszer 之旅了。然而，或许一切尚未为晚 ......\n\n在 Ópusztaszer 有 $N$ 个地标，编号为从 $0$ 到 $N-1$。某些地标之间连有**双向**的**道路**。任意一对地标之间至多连有一条道路。组委会**不知道**哪些地标之间有道路相连。\n\n如果对于每三个不同的地标，它们之间都至少连有 $\\delta$ 条道路，我们就称 Ópusztaszer 的路网**密度**是**至少**为 $\\delta$ 的。换言之，对所有满足 $0 \\le u \\lt v \\lt w \\lt N$ 的地标三元组 $(u, v, w)$，配对 $(u,v)$，$(v,w)$ 和 $(u,w)$ 中至少有 $\\delta$ 个配对中的地标有道路相连。\n\n组委会**已知**有某个正整数 $D$，满足路网密度至少为 $D$。注意， $D$ 的值不会大于 $3$。\n\n组委会可以**询问** Ópusztaszer 的电话接线员，以获取关于某些地标之间的道路连接信息。在每次询问时，必须给出两个非空的地标数组 $[A[0], \\ldots, A[P-1]]$ 和 $[B[0], \\ldots, B[R-1]]$。地标之间必须是两两不同的，即，\n\n* 对于满足 $0 \\le i \\lt j \\lt P$ 的所有 $i$ 和 $j$，有 $A[i] \\neq A[j]$；\n* 对于满足 $0 \\le i \\lt j \\lt R$ 的所有 $i$ 和 $j$，有 $B[i] \\neq B[j]$；\n* 对于满足 $0 \\le i \\lt P$ 且 $0\\le j \\lt R$ 的所有 $i$ 和 $j$，有 $A[i] \\neq B[j]$。\n\n对每次询问，接线员都会报告是否存在 $A$ 中的某个地标和 $B$ 中的某个地标有道路相连。更准确地说，接线员会对满足 $0 \\le i \\lt P$ 和 $0\\le j \\lt R$ 的所有配对 $i$ 和 $j$ 进行尝试。如果其中某对地标 $A[i]$ 与 $B[j]$ 之间连有道路，接线员将报告 `true`。否则，接线员将报告 `false`。\n\n一条长度为 $l$ 的**路程**，被定义为由**不同**地标 $t[0], t[1], \\ldots, t[l-1]$ 构成的序列，其中对从 $0$ 到 $l-2$（包括 $0$ 和 $l-2$）的所有 $i$，地标 $t[i]$ 和 $t[i+1]$ 之间都有道路相连。如果不存在长度至少为 $l+1$ 的路程，则长度为 $l$ 的某条路程被称为是**最长路程**。\n\n你的任务是通过询问接线员，帮助组委会在 Ópusztaszer 找一条最长路程。\n\n---\n\n**【实现细节】**\n\n你需要实现如下函数：\n\n```\nint[] longest_trip(int N, int D)\n```\n\n* $N$：Ópusztaszer 的地标数量。\n* $D$：可以保证的路网密度最小值。\n* 该函数需要返回一个表示某条最长路程的数组 $t = [t[0], t[1], \\ldots, t[l-1]]$。\n* 对于每个测试用例，该函数都可能会被调用 **多次**。\n\n上述函数可以调用如下函数：\n\n```\nbool are_connected(int[] A, int[] B)\n```\n\n* $A$：一个非空、且元素两两不同的地标数组。\n* $B$：一个非空、且元素两两不同的地标数组。\n* $A$ 和 $B$ 之间应无交集。\n* 如果存在连接 $A$ 中某个地标以及 $B$ 中某个地标的道路，该函数返回 `true`。否则该函数返回 `false`。\n* 在每次 `longest_trip` 调用中，该函数可以被至多调用 $32\\,640$ 次。该函数的累计调用总数至多为 $150\\,000$ 次。\n* 对历次调用该函数时传递的数组 $A$ 和 $B$ 长度进行累计，两个数组累计长度加起来不能超过 $1\\,500\\,000$。\n\n评测程序是**非适应性的**。每次提交都将在同一组测试用例上进行评测。换言之，在每个测试用例中，$N$ 和 $D$ 的值，以及道路所连接的地标配对，对于每次 `longest_trip` 调用都保持不变。", "inputFormat": "", "outputFormat": "", "hint": "**【例子】**\n\n**样例一**\n\n考虑某个 $N = 5$, $D = 1$ 的场景，其中道路连接情形如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h4q6u936.png)\n\n函数 `longest_trip` 被调用如下：\n\n```\nlongest_trip(5, 1)\n```\n\n该函数可以调用 `are_connected` 如下。\n\n|                调用                |  有道路连接的配对  | 返回值  |\n| :--------------------------------: | :----------------: | :-----: |\n| `are_connected([0], [1, 2, 4, 3])` | $(0,1)$ 和 $(0,2)$ | `true`  |\n|     `are_connected([2], [0])`      |      $(2,0)$       | `true`  |\n|     `are_connected([2], [3])`      |      $(2,3)$       | `true`  |\n|  `are_connected([1, 0], [4, 3])`   |         无         | `false` |\n\n在第四次调用后，可知 $(1,4)$，$(0,4)$，$(1,3)$ 和 $(0,3)$ 中**没有**哪个配对中的地标之间连有道路。由于路网的密度至少是 $D = 1$，我们由三元组 $(0, 3, 4)$ 可知，配对 $(3,4)$ 的地标之间必须连有道路。与此相似，地标 $0$ 和 $1$ 之间必须是相连的。\n\n至此，可以总结出 $t = [1, 0, 2, 3, 4]$ 是一条长度为 $5$ 的路程，而且不存在长度超过 $5$ 的路程。因此，函数 `longest_trip` 可以返回 $[1, 0, 2, 3, 4]$。\n\n考虑另一个场景， 其中 $N = 4$, $D = 1$，且地标之间的道路如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6kk0r3y9.png)\n\n函数 `longest_trip` 被调用如下：\n\n```\nlongest_trip(4, 1)\n```\n\n在这个场景中，最长路程的长度为 $2$。因此，在对函数 `are_connected` 进行少量调用后，函数 `longest_trip` 可以返回 $[0, 1]$, $[1, 0]$, $[2, 3]$ 和 $[3, 2]$ 中的任意一个.\n\n**样例 2**\n\n子任务 0 包含另一个测试用例用作示例，其中有 $N=256$ 个地标。\n\n**【数据范围】**\n\n* $3 \\le N \\le 256$\n* 对于每个测试用例，函数 `longest_trip` 的所有调用中 $N$ 的累计总和不超过 $1\\,024$。\n* $1 \\le D \\le 3$\n\n**【子任务】**\n\n1. （5 分）$D = 3$\n1. （10 分）$D = 2$\n1. （25 分）$D = 1$。令 $l^\\star$ 表示最长路程的长度。函数 `longest_trip` 不必返回长度为 $l^\\star$ 的某条路程，而应返回长度至少为 $\\left\\lceil \\frac{l^\\star}{2} \\right\\rceil$ 的某条路程。\n1. （60 分）$D = 1$\n\n在子任务 4 中，你的得分将根据 `longest_trip` 的单次调用中对函数 `are_connected` 的调用数量而定。对该子任务的所有测试用例调用 `longest_trip`，令 $q$ 为各次调用产生的函数 `are_connected` 调用次数的最大值。\n你在该子任务上的得分将按照下表进行计算：\n\n|            条件            | 得分 |\n| :------------------------: | :--: |\n| $2\\,750 \\lt q \\le 32\\,640$ | $20$ |\n|   $550 \\lt q \\le 2\\,750$   | $30$ |\n|    $400 \\lt q \\le 550$     | $45$ |\n|        $q \\le 400$         | $60$ |\n\n如果在某个测试用例上，对函数 `are_connected` 的调用没有遵守实现细节部分给出的限制条件，或者 `longest_trip` 返回的数组是错误的，你的解答在该子任务上的得分将为 $0$。\n\n**【评测程序示例】**\n\n令 $C$ 为场景数量，即调用 `longest_trip` 的次数。\n评测程序示例读取如下格式的输入数据：\n\n* 第 $1$ 行：$C$\n\n接下来是这 $C$ 个场景的描述数据。\n\n评测程序示例读取每个场景如下格式的描述数据：\n\n* 第 $1$ 行：$N \\; D$\n* 第 $1 + i$ 行（$1 \\le i \\lt N$）：$U_i[0] \\; U_i[1] \\; \\ldots \\; U_i[i-1]$\n\n这里每个 $U_i$（$1 \\le i \\lt N$）均为长度为 $i$ 的数组，以给出那些有道路相连的地标配对。对于满足 $1 \\le i \\lt N$ 且 $0 \\le j \\lt i$ 的所有 $i$ 和 $j$：\n\n* 如果地标 $j$ 和 $i$ 之间有道路相连，则 $U_i[j]$ 的值应为 $1$；\n* 如果地标 $j$ 和 $i$ 之间没有道路相连，则 $U_i[j]$ 的值应为 $0$。\n\n在每个场景中，在调用 `longest_trip` 之前，评测程序示例检查路网的密度是否至少为 $D$。如果不满足该条件，评测程序示例将输出信息 `Insufficient Density` 并中止。\n\n如果检查出违反规则的行为，评测程序示例的输出为 `Protocol Violation: <MSG>`，这里 `<MSG>` 为如下错误信息之一：\n\n* `invalid array`：在 `are_connected` 的某次调用中，数组 $A$ 和 $B$ 中至少其一\n  - 为空，或\n  - 有元素不是 $0$ 到 $N-1$ 之间（包含 $0$ 和 $N-1$）的整数，或\n  - 有重复元素。\n* `non-disjoint arrays`：在 `are_connected` 的某次调用中，数组 $A$ 和 $B$ 的交集不空。\n* `too many calls`：函数 `are_connected` 在 `longest trip` 的当前调用中的被调用次数超过了 $32\\,640$，或者其累计调用次数超过了 $150\\,000$。\n* `too many elements`：在 `are_connected` 的全部调用中，所传递的地标的累计数量超过了 $1\\,500\\,000$。\n\n否则，令 `longest_trip` 函数在某个场景中的返回数组为 $t[0], t[1], \\ldots, t[l - 1]$，这里 $l$ 为某个非负整数。评测程序示例将对该场景按照如下格式输出三行：\n\n* 第 $1$ 行：$l$\n* 第 $2$ 行：$t[0] \\; t[1] \\; \\ldots \\; t[l-1]$\n* 第 $3$ 行：在该场景中调用 `are_connected` 的次数\n\n最后，评测程序示例输出：\n\n* 第 $1 + 3 \\cdot C$ 行：在 `longest_trip` 的所有调用中，函数 `are_connected` 被调用的最多次数", "locale": "zh-CN"}}}
{"pid": "P9602", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2023", "IOI", "交互题", "Special Judge", "O2优化"], "title": "[IOI 2023] 足球场", "background": "这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。\n\n本题仅支持 C++ 语言提交。", "description": "Debrecen 市有一片正方形的森林名叫 Nagyerdő，可以看作是 $N \\times N$ 的方格。\n方格的行由北向南从 $0$ 到 $N - 1$ 编号，列由西向东从 $0$ 到 $N - 1$ 编号。\n方格中第 $r$ 行第 $c$ 列的格子被称为单元格 $(r, c)$。\n\n森林里的每个单元格要么是**空**的，要么是**有树**的。\n森林里至少有一个空单元格。\n\nDVSC 是这个城市最著名的体育俱乐部，目前正计划在森林里修建一座新的足球场。\n大小为 $s$ 的球场（这里 $s \\ge 1$）是 $s$ 个**互不相同的空**单元格 $(r_0, c_0), \\ldots, (r_{s - 1}, c_{s - 1})$ 的集合。\n形式化地说，这意味着：\n\n- 对于从 $0$ 到 $s - 1$（包含两端）的每个 $i$，单元格 $(r_i, c_i)$ 是空的；\n- 对于满足 $0 \\le i \\lt j \\lt s$ 的每组 $i$ 和 $j$，$r_i \\neq r_j$ 和 $c_i \\neq c_j$ 二者中至少有一个成立。\n\n踢球时足球在球场的单元格之间传递。\n**直传**是以下两种动作之一：\n\n* 球场包含第 $r$ 行中单元格 $(r,a)$ 和 $(r,b)$ 之间的**全部**单元格，球从单元格 $(r,a)$ 传递到单元格 $(r,b)$（$0 \\le r,a,b \\lt N, a \\ne b$）。包含关系的形式化定义为：\n  - 若 $a \\lt b$，则球场应包含满足 $a \\le k \\le b$ 的每个单元格 $(r,k)$；\n  - 若 $a \\gt b$，则球场应包含满足 $b \\le k \\le a$ 的每个单元格 $(r,k)$。\n* 球场包含第 $c$ 列中单元格 $(a,c)$ 和 $(b,c)$ 之间的**全部**单元格，球从单元格 $(a,c)$ 传递到单元格 $(b,c)$（$0 \\le c,a,b \\lt N, a \\ne b$）。包含关系的形式化定义为：\n  - 若 $a \\lt b$，则球场应包含满足 $a \\le k \\le b$ 的每个单元格 $(k, c)$；\n  - 若 $a \\gt b$，则球场应包含满足 $b \\le k \\le a$ 的每个单元格 $(k, c)$。\n\n如果可以通过至多 $2$ 次直传将球从球场的任意单元格传递到另外的任意单元格，那么称这样的球场是**规则**的。\n注意，任何大小为 $1$ 的球场都是规则的。\n\n例如，考虑一片大小为 $N = 5$ 的森林，其中单元格 $(1,0)$ 和 $(4,2)$ 有树，其余单元格均为空。\n下图显示了三个可能的球场。有树的单元格用深色表示，组成球场的单元格划有斜线。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rhrk04xf.png)\n\n左边的球场是规则的。然而，中间的球场不是规则的，原因是把球从单元格 $(4,1)$ 传递到单元格 $(4,3)$ 至少需要 $3$ 次直传。右边的球场也不是规则的，原因是无法通过直传将球从单元格 $(3,0)$ 传递到单元格 $(1,3)$。\n\n体育俱乐部希望建造尽可能大的规则球场。\n你的任务是找出最大的 $s$ 值，使得森林里可以建造大小为 $s$ 的规则球场。", "inputFormat": "你要实现以下函数：\n\n```\nint biggest_stadium(int N, int[][] F)\n```\n\n* $N$：森林的大小。\n* $F$：一个长度为 $N$ 的数组，每个元素都是长度为 $N$ 的数组，用于描述森林里的单元格。对于每组满足 $0 \\le r \\lt N$ 且 $0 \\le c \\lt N$ 的 $r$ 和 $c$，$F[r][c] = 0$ 表示单元格 $(r, c)$ 是空的，$F[r][c] = 1$ 表示该单元格是有树的。\n* 这个函数应该返回森林里可以建造的规则球场的最大大小。\n* 对于每个测试用例，这个函数恰好被调用一次。", "outputFormat": "考虑以下调用：\n\n```\nbiggest_stadium(5, [[0, 0, 0, 0, 0],  \n                    [1, 0, 0, 0, 0], \n                    [0, 0, 0, 0, 0], \n                    [0, 0, 0, 0, 0], \n                    [0, 0, 1, 0, 0]])\n```\n\n这个例子描述的森林显示在下图的左边，一个大小为 $20$ 的规则球场显示在下图的右边：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c928srlk.png)\n\n由于不存在大小为 $21$ 或更大的规则球场，函数应该返回 $20$。", "hint": "## 约束条件\n\n* $1 \\le N \\le  2\\,000$\n* $0 \\le F[i][j] \\le 1$（对满足 $0 \\le i \\lt N$ 且 $0 \\le j \\lt N$ 的所有 $i$ 和 $j$）\n* 森林里至少存在一个空单元格。也就是说，对于某组满足 $0 \\le i \\lt N$ 且 $0 \\le j \\lt N$ 的 $i$ 和 $j$，有 $F[i][j] = 0$。\n\n## 子任务\n\n1. （6 分）至多只有一个单元格有树。\n2. （8 分）$N \\le 3$\n3. （22 分）$N \\le 7$ \n4. （18 分）$N \\le 30$ \n5. （16 分）$N \\le 500$\n6. （30 分）没有额外的约束条件。\n\n在每个子任务中，如果你的程序能够正确判定**全部**空单元格组成的集合能否构成一个规则球场，那么你将在该子任务获得 25% 的部分分。\n\n更准确地讲，对于所有空单元格组成的集合是一个规则球场的测试用例，你的解答的得分情况如下：\n\n* 如果返回正确答案（也就是所有空单元格的数量），则得满分；\n* 否则得 0 分。\n\n对于所有空单元格组成的集合**不是**一个规则球场的测试用例，你的解答的得分情况如下：\n\n* 如果返回正确答案，则得满分；\n* 如果返回所有空单元格的数量，则得 0 分；\n* 如果返回其他值，则得 25% 的分数。\n\n每个子任务的得分是这个子任务中所有测试用例得分的最低值。\n\n## 评测程序示例\n\n评测程序示例按以下格式读取输入：\n\n* 第 $1$ 行：$N$\n* 第 $2 + i$ 行（$0 \\le i \\lt N$）：$F[i][0] \\; F[i][1] \\; \\ldots \\; F[i][N - 1]$\n\n评测程序示例按以下格式打印你的答案：\n\n* 第 $1$ 行：函数 `biggest_stadium` 的返回值", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2023] 足球场", "background": "这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。\n\n本题仅支持 C++ 语言提交。", "description": "Debrecen 市有一片正方形的森林名叫 Nagyerdő，可以看作是 $N \\times N$ 的方格。\n方格的行由北向南从 $0$ 到 $N - 1$ 编号，列由西向东从 $0$ 到 $N - 1$ 编号。\n方格中第 $r$ 行第 $c$ 列的格子被称为单元格 $(r, c)$。\n\n森林里的每个单元格要么是**空**的，要么是**有树**的。\n森林里至少有一个空单元格。\n\nDVSC 是这个城市最著名的体育俱乐部，目前正计划在森林里修建一座新的足球场。\n大小为 $s$ 的球场（这里 $s \\ge 1$）是 $s$ 个**互不相同的空**单元格 $(r_0, c_0), \\ldots, (r_{s - 1}, c_{s - 1})$ 的集合。\n形式化地说，这意味着：\n\n- 对于从 $0$ 到 $s - 1$（包含两端）的每个 $i$，单元格 $(r_i, c_i)$ 是空的；\n- 对于满足 $0 \\le i \\lt j \\lt s$ 的每组 $i$ 和 $j$，$r_i \\neq r_j$ 和 $c_i \\neq c_j$ 二者中至少有一个成立。\n\n踢球时足球在球场的单元格之间传递。\n**直传**是以下两种动作之一：\n\n* 球场包含第 $r$ 行中单元格 $(r,a)$ 和 $(r,b)$ 之间的**全部**单元格，球从单元格 $(r,a)$ 传递到单元格 $(r,b)$（$0 \\le r,a,b \\lt N, a \\ne b$）。包含关系的形式化定义为：\n  - 若 $a \\lt b$，则球场应包含满足 $a \\le k \\le b$ 的每个单元格 $(r,k)$；\n  - 若 $a \\gt b$，则球场应包含满足 $b \\le k \\le a$ 的每个单元格 $(r,k)$。\n* 球场包含第 $c$ 列中单元格 $(a,c)$ 和 $(b,c)$ 之间的**全部**单元格，球从单元格 $(a,c)$ 传递到单元格 $(b,c)$（$0 \\le c,a,b \\lt N, a \\ne b$）。包含关系的形式化定义为：\n  - 若 $a \\lt b$，则球场应包含满足 $a \\le k \\le b$ 的每个单元格 $(k, c)$；\n  - 若 $a \\gt b$，则球场应包含满足 $b \\le k \\le a$ 的每个单元格 $(k, c)$。\n\n如果可以通过至多 $2$ 次直传将球从球场的任意单元格传递到另外的任意单元格，那么称这样的球场是**规则**的。\n注意，任何大小为 $1$ 的球场都是规则的。\n\n例如，考虑一片大小为 $N = 5$ 的森林，其中单元格 $(1,0)$ 和 $(4,2)$ 有树，其余单元格均为空。\n下图显示了三个可能的球场。有树的单元格用深色表示，组成球场的单元格划有斜线。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rhrk04xf.png)\n\n左边的球场是规则的。然而，中间的球场不是规则的，原因是把球从单元格 $(4,1)$ 传递到单元格 $(4,3)$ 至少需要 $3$ 次直传。右边的球场也不是规则的，原因是无法通过直传将球从单元格 $(3,0)$ 传递到单元格 $(1,3)$。\n\n体育俱乐部希望建造尽可能大的规则球场。\n你的任务是找出最大的 $s$ 值，使得森林里可以建造大小为 $s$ 的规则球场。", "inputFormat": "你要实现以下函数：\n\n```\nint biggest_stadium(int N, int[][] F)\n```\n\n* $N$：森林的大小。\n* $F$：一个长度为 $N$ 的数组，每个元素都是长度为 $N$ 的数组，用于描述森林里的单元格。对于每组满足 $0 \\le r \\lt N$ 且 $0 \\le c \\lt N$ 的 $r$ 和 $c$，$F[r][c] = 0$ 表示单元格 $(r, c)$ 是空的，$F[r][c] = 1$ 表示该单元格是有树的。\n* 这个函数应该返回森林里可以建造的规则球场的最大大小。\n* 对于每个测试用例，这个函数恰好被调用一次。", "outputFormat": "考虑以下调用：\n\n```\nbiggest_stadium(5, [[0, 0, 0, 0, 0],  \n                    [1, 0, 0, 0, 0], \n                    [0, 0, 0, 0, 0], \n                    [0, 0, 0, 0, 0], \n                    [0, 0, 1, 0, 0]])\n```\n\n这个例子描述的森林显示在下图的左边，一个大小为 $20$ 的规则球场显示在下图的右边：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c928srlk.png)\n\n由于不存在大小为 $21$ 或更大的规则球场，函数应该返回 $20$。", "hint": "## 约束条件\n\n* $1 \\le N \\le  2\\,000$\n* $0 \\le F[i][j] \\le 1$（对满足 $0 \\le i \\lt N$ 且 $0 \\le j \\lt N$ 的所有 $i$ 和 $j$）\n* 森林里至少存在一个空单元格。也就是说，对于某组满足 $0 \\le i \\lt N$ 且 $0 \\le j \\lt N$ 的 $i$ 和 $j$，有 $F[i][j] = 0$。\n\n## 子任务\n\n1. （6 分）至多只有一个单元格有树。\n2. （8 分）$N \\le 3$\n3. （22 分）$N \\le 7$ \n4. （18 分）$N \\le 30$ \n5. （16 分）$N \\le 500$\n6. （30 分）没有额外的约束条件。\n\n在每个子任务中，如果你的程序能够正确判定**全部**空单元格组成的集合能否构成一个规则球场，那么你将在该子任务获得 25% 的部分分。\n\n更准确地讲，对于所有空单元格组成的集合是一个规则球场的测试用例，你的解答的得分情况如下：\n\n* 如果返回正确答案（也就是所有空单元格的数量），则得满分；\n* 否则得 0 分。\n\n对于所有空单元格组成的集合**不是**一个规则球场的测试用例，你的解答的得分情况如下：\n\n* 如果返回正确答案，则得满分；\n* 如果返回所有空单元格的数量，则得 0 分；\n* 如果返回其他值，则得 25% 的分数。\n\n每个子任务的得分是这个子任务中所有测试用例得分的最低值。\n\n## 评测程序示例\n\n评测程序示例按以下格式读取输入：\n\n* 第 $1$ 行：$N$\n* 第 $2 + i$ 行（$0 \\le i \\lt N$）：$F[i][0] \\; F[i][1] \\; \\ldots \\; F[i][N - 1]$\n\n评测程序示例按以下格式打印你的答案：\n\n* 第 $1$ 行：函数 `biggest_stadium` 的返回值", "locale": "zh-CN"}}}
{"pid": "P9603", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2023", "IOI", "交互题", "Special Judge", "O2优化"], "title": "[IOI 2023] 山毛榉树", "background": "这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 main 函数。\n\n本题仅支持 C++ 语言提交。", "description": "Vétyem Woods 是一片著名的缤纷多彩的森林。其中最老最高的一棵山毛榉树叫 Ős Vezér。\n\n树 Ős Vezér 可以被建模成 $N$ 个**结点**和 $N-1$ 条**边**的集合。结点的编号为从 $0$ 到 $N-1$，边的编号为从 $1$ 到 $N-1$。每条边均连接树上两个不同的结点。具体地说，边 $i$（$1 \\le i \\lt N$）从结点 $i$ 连接到结点 $P[i]$，这里 $0 \\le P[i] \\lt i$。结点 $P[i]$ 被称为是结点 $i$ 的**父结点**，而结点 $i$ 被称为是结点 $P[i]$ 的一个**子结点**。\n\n每条边都有某种颜色。一共有 $M$ 种可能的颜色，编号为从 $1$ 到 $M$。边 $i$ 的颜色为 $C[i]$。不同的边可能有相同的颜色。\n\n注意，在上面的定义中，$i = 0$ 的情形并不对应树上的边。方便起见，我们令 $P[0] = -1$ 和 $C[0] = 0$。\n\n例如，假定 Ős Vezér 有 $N = 18$ 个结点和 $M = 3$ 种可能的颜色，以及 $17$ 条边。边的描述为 $P = [-1, 0, 0, 0, 1, 1, 1, 2, 2, 3, 3, 3, 4, 4, 5, 10, 11, 11]$，边的颜色为 $C = [0, 1, 2, 3, 1, 2, 3, 1, 3, 3, 2, 1, 1, 2, 2, 1, 2, 3]$。这棵树如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xnxdhpz1.png)\n\nÁrpád 是一位才华横溢的护林人，他喜欢研究树上被称为**子树**的部分。\n对所有满足 $0 \\le r \\lt N$ 的  $r$，结点 $r$ 的子树是一个满足以下性质的结点集合 $T(r)$：\n\n* 结点 $r$ 属于 $T(r)$。\n* 如果某个结点 $x$ 属于 $T(r)$，则 $x$ 的所有子结点都属于$T(r)$。\n* 除了上述情况以外，其他结点都不属于 $T(r)$。\n\n集合 $T(r)$ 的大小记作 $|T(r)|$。\n\nÁrpád 最近发现了一个复杂但有趣的子树性质。Árpád 的发现需要用到大量的纸和笔做演算，他认为你需要做同样的事情才能完成理解。他还会给你几个例子，让你能够对它们做详细的分析。\n\n假设我们有某个给定的 $r$，以及子树 $T(r)$ 中结点的某个置换 $v_0, v_1, \\ldots, v_{|T(r)|-1}$。\n\n对于所有满足 $1 \\le i \\lt |T(r)|$ 的 $i$，令 $f(i)$ 为颜色 $C[v_i]$ 在长为 $i-1$ 的颜色序列 $C[v_1], C[v_2], \\ldots, C[v_{i-1}]$ 中的出现次数。\n\n（注意，$f(1)$ 必定为 $0$，原因是其定义中要考察的颜色序列是空的。）\n\n置换 $v_0, v_1, \\ldots, v_{|T(r)|-1}$ 被称为是一个**绝妙置换**，当且仅当以下性质成立：\n\n* $v_0 = r$。\n* 对于所有满足 $1 \\le i \\lt |T(r)|$ 的 $i$，结点 $v_i$ 的父结点是 $v_{f(i)}$。\n\n对于所有满足 $0 \\le r \\lt N$ 的 $r$，子树 $T(r)$ 是一棵**绝妙子树**，当且仅当 $T(r)$ 中结点存在某个绝妙置换。注意，根据定义，仅包含单独一个结点的子树都是绝妙的。\n\n考虑上面给出的树的例子。可以看到，子树 $T(0)$ 和 $T(3)$ 不是绝妙的。子树 $T(14)$ 是绝妙的，因为它仅包含一个结点。接下来，我们将要说明子树 $T(1)$ 也是绝妙的。\n\n考虑一个由不同整数构成的序列 $[v_0, v_1, v_2, v_3, v_4, v_5, v_6] = [1, 4, 5, 12, 13, 6, 14]$。这个序列是 $T(1)$ 中结点的一个置换。下图给出了这个置换。序列中每个结点旁边的数字，是该结点在置换中的索引。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ziecuezc.png)\n\n我们将要验证，这是一个**绝妙置换**。\n\n* $v_0 = 1$。\n* $f(1) = 0$，原因是 $C[v_1] = C[4] = 1$ 在序列 $[\\,]$ 中出现了 $0$ 次。\n * 相应地，$v_1$ 的父结点是 $v_0$。也就是说，$4$ 的父结点是 $1$。（形式化地，$P[4] = 1$。）\n* $f(2) = 0$，原因是 $C[v_2] = C[5] = 2$ 在序列 $[1]$ 中出现了 $0$ 次。\n * 相应地，$v_2$ 的父结点是 $v_0$。也就是说，$5$ 的父结点是 $1$。\n* $f(3) = 1$，原因是 $C[v_3] = C[12] = 1$ 在序列 $[1, 2]$ 中出现了 $1$ 次。\n * 相应地，$v_3$ 的父结点是 $v_1$。也就是说，$12$ 的父结点是 $4$。\n* $f(4) = 1$，原因是 $C[v_4] = C[13] = 2$ 在序列 $[1, 2, 1]$ 中出现了 $1$ 次。\n * 相应地，$v_4$ 的父结点是 $v_1$。也就是说，$13$ 的父结点是 4。\n* $f(5) = 0$，原因是 $C[v_5] = C[6] = 3$ 在序列 $[1, 2, 1, 2]$ 中出现了 $0$ 次。\n * 相应地，$v_5$ 的父结点是 $v_0$。也就是说，$6$ 的父结点是 $1$。\n* $f(6) = 2$，原因是 $C[v_6] = C[14] = 2$ 在序列 $[1, 2, 1, 2, 3]$ 中出现了  $2$ 次。\n * 相应地，$v_6$ 的父结点是 $v_2$。也就是说，$14$ 的父结点是 $5$。\n\n由于我们能为 $T(1)$ 中的结点找到一个**绝妙置换**，子树 $T(1)$ 因此是一棵**绝妙子树**。\n\n你的任务是，帮助 Árpád 确定 Ős Vezér 的每棵子树是否是绝妙的。", "inputFormat": "你需要实现以下函数。\n\n```\nint[] beechtree(int N, int M, int[] P, int[] C)\n```\n\n* $N$：树中的结点数量。\n* $M$：树中边的可能颜色的数量。\n* $P$，$C$：长度为 $N$ 的两个数组，以描述树中的边。\n* 该函数应当返回长度为 $N$ 的某个数组 $b$。 \n  对所有满足 $0 \\le r \\lt N$ 的 $r$，如果 $T(r)$ 是绝妙的，则 $b[r]$ 应为 $1$，否则应为 $0$。\n* 该函数在每个测试用例上恰好被调用一次。", "outputFormat": "", "hint": "\n\n### 样例\n\n#### 样例 1\n\n考虑如下调用：\n\n```\nbeechtree(4, 2, [-1, 0, 0, 0], [0, 1, 1, 2])\n```\n\n这棵树如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bcv1naft.png)\n\n$T(1)$，$T(2)$ 和 $T(3)$ 均各自包含单独一个结点，因此都是绝妙的。\n$T(0)$ 不是绝妙的。\n因此，函数应当返回 $[0, 1, 1, 1]$。\n\n#### 样例 2\n\n考虑如下调用：\n\n```\nbeechtree(18, 3, \n          [-1, 0, 0, 0, 1, 1, 1, 2, 2, 3, 3, 3, 4, 4, 5, 10, 11, 11],\n          [0, 1, 2, 3, 1, 2, 3, 1, 3, 3, 2, 1, 1, 2, 2, 1, 2, 3])\n```\n\n这个例子在题面中已经给出。\n\n函数应当返回 $[0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]$。\n\n#### 样例 3\n\n考虑如下调用：\n\n```\nbeechtree(7, 2, [-1, 0, 1, 1, 0, 4, 5], [0, 1, 1, 2, 2, 1, 1])\n```\n\n该例子如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cv6ljl13.png)\n\n$T(0)$ 是唯一不是绝妙的子树。函数应当返回 $[0, 1, 1, 1, 1, 1, 1]$。\n\n### 约束条件\n\n* $3 \\le N \\le 200\\,000$\n* $2 \\le M \\le 200\\,000$\n* $0 \\le P[i] \\lt i$（对于所有满足 $1 \\le i \\lt N$ 的 $i$）\n* $1 \\le C[i] \\le M$（对于所有满足 $1 \\le i \\lt N$ 的 $i$）\n* $P[0] = -1$ 且 $C[0] = 0$\n\n### 子任务\n\n1. （9 分）$N \\le 8$ 且 $M \\le 500$\n1. （5 分）边 $i$ 从结点 $i$ 连接到结点 $i-1$。也就是说，对所有满足 $1 \\le i \\lt N$ 的 $i$，都有 $P[i] = i-1$。\n1. （9 分）除了结点 $0$ 以外，其他结点要么连接到结点 $0$，要么连接到某个连接到结点 $0$ 的结点。\n    也就是说，对于所有满足 $1 \\le i \\lt N$ 的 $i$，要么有 $P[i]=0$，要么有 $P[P[i]]=0$。\n1. （8 分）对于所有满足 $1 \\le c \\le M$ 的 $c$，至多有两条边的颜色为 $c$。\n1. （14 分） $N \\le 200$ 且 $M \\le 500$\n1. （14 分） $N \\le 2\\,000$ 且 $M = 2$\n1. （12 分） $N \\le 2\\,000$\n1. （17 分） $M = 2$\n1. （12 分） 没有额外的约束条件。\n\n### 评测程序示例\n\n评测程序示例按以下格式读取输入：\n\n* 第 $1$ 行：$N \\; M$\n* 第 $2$ 行：$P[0] \\; P[1] \\; \\ldots \\; P[N-1]$\n* 第 $3$ 行：$C[0] \\; C[1] \\; \\ldots \\; C[N-1]$\n\n令 $b[0], \\; b[1], \\; \\ldots$ 表示 `beechtree` 所返回的数组中的元素。评测程序示例以如下格式，在单行中输出你的答案：\n* 第 $1$ 行：$b[0] \\; b[1] \\; \\ldots$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2023] 山毛榉树", "background": "这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 main 函数。\n\n本题仅支持 C++ 语言提交。", "description": "Vétyem Woods 是一片著名的缤纷多彩的森林。其中最老最高的一棵山毛榉树叫 Ős Vezér。\n\n树 Ős Vezér 可以被建模成 $N$ 个**结点**和 $N-1$ 条**边**的集合。结点的编号为从 $0$ 到 $N-1$，边的编号为从 $1$ 到 $N-1$。每条边均连接树上两个不同的结点。具体地说，边 $i$（$1 \\le i \\lt N$）从结点 $i$ 连接到结点 $P[i]$，这里 $0 \\le P[i] \\lt i$。结点 $P[i]$ 被称为是结点 $i$ 的**父结点**，而结点 $i$ 被称为是结点 $P[i]$ 的一个**子结点**。\n\n每条边都有某种颜色。一共有 $M$ 种可能的颜色，编号为从 $1$ 到 $M$。边 $i$ 的颜色为 $C[i]$。不同的边可能有相同的颜色。\n\n注意，在上面的定义中，$i = 0$ 的情形并不对应树上的边。方便起见，我们令 $P[0] = -1$ 和 $C[0] = 0$。\n\n例如，假定 Ős Vezér 有 $N = 18$ 个结点和 $M = 3$ 种可能的颜色，以及 $17$ 条边。边的描述为 $P = [-1, 0, 0, 0, 1, 1, 1, 2, 2, 3, 3, 3, 4, 4, 5, 10, 11, 11]$，边的颜色为 $C = [0, 1, 2, 3, 1, 2, 3, 1, 3, 3, 2, 1, 1, 2, 2, 1, 2, 3]$。这棵树如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xnxdhpz1.png)\n\nÁrpád 是一位才华横溢的护林人，他喜欢研究树上被称为**子树**的部分。\n对所有满足 $0 \\le r \\lt N$ 的  $r$，结点 $r$ 的子树是一个满足以下性质的结点集合 $T(r)$：\n\n* 结点 $r$ 属于 $T(r)$。\n* 如果某个结点 $x$ 属于 $T(r)$，则 $x$ 的所有子结点都属于$T(r)$。\n* 除了上述情况以外，其他结点都不属于 $T(r)$。\n\n集合 $T(r)$ 的大小记作 $|T(r)|$。\n\nÁrpád 最近发现了一个复杂但有趣的子树性质。Árpád 的发现需要用到大量的纸和笔做演算，他认为你需要做同样的事情才能完成理解。他还会给你几个例子，让你能够对它们做详细的分析。\n\n假设我们有某个给定的 $r$，以及子树 $T(r)$ 中结点的某个置换 $v_0, v_1, \\ldots, v_{|T(r)|-1}$。\n\n对于所有满足 $1 \\le i \\lt |T(r)|$ 的 $i$，令 $f(i)$ 为颜色 $C[v_i]$ 在长为 $i-1$ 的颜色序列 $C[v_1], C[v_2], \\ldots, C[v_{i-1}]$ 中的出现次数。\n\n（注意，$f(1)$ 必定为 $0$，原因是其定义中要考察的颜色序列是空的。）\n\n置换 $v_0, v_1, \\ldots, v_{|T(r)|-1}$ 被称为是一个**绝妙置换**，当且仅当以下性质成立：\n\n* $v_0 = r$。\n* 对于所有满足 $1 \\le i \\lt |T(r)|$ 的 $i$，结点 $v_i$ 的父结点是 $v_{f(i)}$。\n\n对于所有满足 $0 \\le r \\lt N$ 的 $r$，子树 $T(r)$ 是一棵**绝妙子树**，当且仅当 $T(r)$ 中结点存在某个绝妙置换。注意，根据定义，仅包含单独一个结点的子树都是绝妙的。\n\n考虑上面给出的树的例子。可以看到，子树 $T(0)$ 和 $T(3)$ 不是绝妙的。子树 $T(14)$ 是绝妙的，因为它仅包含一个结点。接下来，我们将要说明子树 $T(1)$ 也是绝妙的。\n\n考虑一个由不同整数构成的序列 $[v_0, v_1, v_2, v_3, v_4, v_5, v_6] = [1, 4, 5, 12, 13, 6, 14]$。这个序列是 $T(1)$ 中结点的一个置换。下图给出了这个置换。序列中每个结点旁边的数字，是该结点在置换中的索引。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ziecuezc.png)\n\n我们将要验证，这是一个**绝妙置换**。\n\n* $v_0 = 1$。\n* $f(1) = 0$，原因是 $C[v_1] = C[4] = 1$ 在序列 $[\\,]$ 中出现了 $0$ 次。\n * 相应地，$v_1$ 的父结点是 $v_0$。也就是说，$4$ 的父结点是 $1$。（形式化地，$P[4] = 1$。）\n* $f(2) = 0$，原因是 $C[v_2] = C[5] = 2$ 在序列 $[1]$ 中出现了 $0$ 次。\n * 相应地，$v_2$ 的父结点是 $v_0$。也就是说，$5$ 的父结点是 $1$。\n* $f(3) = 1$，原因是 $C[v_3] = C[12] = 1$ 在序列 $[1, 2]$ 中出现了 $1$ 次。\n * 相应地，$v_3$ 的父结点是 $v_1$。也就是说，$12$ 的父结点是 $4$。\n* $f(4) = 1$，原因是 $C[v_4] = C[13] = 2$ 在序列 $[1, 2, 1]$ 中出现了 $1$ 次。\n * 相应地，$v_4$ 的父结点是 $v_1$。也就是说，$13$ 的父结点是 4。\n* $f(5) = 0$，原因是 $C[v_5] = C[6] = 3$ 在序列 $[1, 2, 1, 2]$ 中出现了 $0$ 次。\n * 相应地，$v_5$ 的父结点是 $v_0$。也就是说，$6$ 的父结点是 $1$。\n* $f(6) = 2$，原因是 $C[v_6] = C[14] = 2$ 在序列 $[1, 2, 1, 2, 3]$ 中出现了  $2$ 次。\n * 相应地，$v_6$ 的父结点是 $v_2$。也就是说，$14$ 的父结点是 $5$。\n\n由于我们能为 $T(1)$ 中的结点找到一个**绝妙置换**，子树 $T(1)$ 因此是一棵**绝妙子树**。\n\n你的任务是，帮助 Árpád 确定 Ős Vezér 的每棵子树是否是绝妙的。", "inputFormat": "你需要实现以下函数。\n\n```\nint[] beechtree(int N, int M, int[] P, int[] C)\n```\n\n* $N$：树中的结点数量。\n* $M$：树中边的可能颜色的数量。\n* $P$，$C$：长度为 $N$ 的两个数组，以描述树中的边。\n* 该函数应当返回长度为 $N$ 的某个数组 $b$。 \n  对所有满足 $0 \\le r \\lt N$ 的 $r$，如果 $T(r)$ 是绝妙的，则 $b[r]$ 应为 $1$，否则应为 $0$。\n* 该函数在每个测试用例上恰好被调用一次。", "outputFormat": "", "hint": "\n\n### 样例\n\n#### 样例 1\n\n考虑如下调用：\n\n```\nbeechtree(4, 2, [-1, 0, 0, 0], [0, 1, 1, 2])\n```\n\n这棵树如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bcv1naft.png)\n\n$T(1)$，$T(2)$ 和 $T(3)$ 均各自包含单独一个结点，因此都是绝妙的。\n$T(0)$ 不是绝妙的。\n因此，函数应当返回 $[0, 1, 1, 1]$。\n\n#### 样例 2\n\n考虑如下调用：\n\n```\nbeechtree(18, 3, \n          [-1, 0, 0, 0, 1, 1, 1, 2, 2, 3, 3, 3, 4, 4, 5, 10, 11, 11],\n          [0, 1, 2, 3, 1, 2, 3, 1, 3, 3, 2, 1, 1, 2, 2, 1, 2, 3])\n```\n\n这个例子在题面中已经给出。\n\n函数应当返回 $[0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]$。\n\n#### 样例 3\n\n考虑如下调用：\n\n```\nbeechtree(7, 2, [-1, 0, 1, 1, 0, 4, 5], [0, 1, 1, 2, 2, 1, 1])\n```\n\n该例子如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cv6ljl13.png)\n\n$T(0)$ 是唯一不是绝妙的子树。函数应当返回 $[0, 1, 1, 1, 1, 1, 1]$。\n\n### 约束条件\n\n* $3 \\le N \\le 200\\,000$\n* $2 \\le M \\le 200\\,000$\n* $0 \\le P[i] \\lt i$（对于所有满足 $1 \\le i \\lt N$ 的 $i$）\n* $1 \\le C[i] \\le M$（对于所有满足 $1 \\le i \\lt N$ 的 $i$）\n* $P[0] = -1$ 且 $C[0] = 0$\n\n### 子任务\n\n1. （9 分）$N \\le 8$ 且 $M \\le 500$\n1. （5 分）边 $i$ 从结点 $i$ 连接到结点 $i-1$。也就是说，对所有满足 $1 \\le i \\lt N$ 的 $i$，都有 $P[i] = i-1$。\n1. （9 分）除了结点 $0$ 以外，其他结点要么连接到结点 $0$，要么连接到某个连接到结点 $0$ 的结点。\n    也就是说，对于所有满足 $1 \\le i \\lt N$ 的 $i$，要么有 $P[i]=0$，要么有 $P[P[i]]=0$。\n1. （8 分）对于所有满足 $1 \\le c \\le M$ 的 $c$，至多有两条边的颜色为 $c$。\n1. （14 分） $N \\le 200$ 且 $M \\le 500$\n1. （14 分） $N \\le 2\\,000$ 且 $M = 2$\n1. （12 分） $N \\le 2\\,000$\n1. （17 分） $M = 2$\n1. （12 分） 没有额外的约束条件。\n\n### 评测程序示例\n\n评测程序示例按以下格式读取输入：\n\n* 第 $1$ 行：$N \\; M$\n* 第 $2$ 行：$P[0] \\; P[1] \\; \\ldots \\; P[N-1]$\n* 第 $3$ 行：$C[0] \\; C[1] \\; \\ldots \\; C[N-1]$\n\n令 $b[0], \\; b[1], \\; \\ldots$ 表示 `beechtree` 所返回的数组中的元素。评测程序示例以如下格式，在单行中输出你的答案：\n* 第 $1$ 行：$b[0] \\; b[1] \\; \\ldots$", "locale": "zh-CN"}}}
{"pid": "P9604", "type": "P", "difficulty": 6, "samples": [["6 4 10 4 2\n20 10 40 0\n5 20 20 30\n0 1 3 6\n0\n50\n", "60\n130\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2023", "IOI", "交互题", "O2优化"], "title": "[IOI 2023] 超车", "background": "这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。\n\n本题仅支持 C++ 语言提交。但请勿使用 C++14 (GCC 9)", "description": "从布达佩斯机场到 Forrás 酒店有一条单向单车道的公路，公路的长度为 $L$ 公里。\n\nIOI 2023 活动期间，有 $N+1$ 辆巴士在这条公路上行驶。巴士从 $0$ 到 $N$ 依次编号。巴士 $i$（$0 \\le i \\lt N$）计划在活动的第 $T[i]$ 秒从机场出发，行驶一公里用时 $W[i]$ 秒。巴士 $N$ 是备用巴士，行驶一公里用时 $X$ 秒。它从机场出发的时间 $Y$ 尚未确定。\n\n巴士在这条公路上行驶时一般不允许超车，但允许在一些被称为**调度站**的地方进行超车。公路上一共有 $M$ 个调度站（$M \\gt 1$），从 $0$ 到 $M - 1$ 依次编号，位于公路的不同位置。调度站 $j$（$0 \\le j \\lt M$）的位置在机场出发后沿公路的 $S[j]$ 公里处。调度站按照从机场开始的距离递增排列，也就是对于每个 $0 \\le j \\le M - 2$，有 $S[j] \\lt S[j+1]$。首个调度站设在机场，最后一个设在酒店。也就是说，$S[0] = 0$，$S[M-1] = L$。\n\n每辆巴士都以指定的最快速度行驶，除非它遇到前面有比它慢的巴士。在这种情况下，后面的快车会被前面的慢车压着，被迫以慢车的速度行驶。这种情况会持续到两车到达下一个调度站。在那里，快车会完成对慢车的超越。\n\n形式化地说，对于满足 $0 \\le i \\le N$ 且 $0 \\le j \\lt M$ 的每组 $i$ 和 $j$，巴士 $i$ **到达**调度站 $j$ 的时间 $t_{i,j}$（以秒为单位）定义如下：对于每个 $0 \\le i \\lt N$，有 $t_{i,0} = T[i]$。另有 $t_{N,0} = Y$。对于满足 $0 \\lt j \\lt M$ 的每个 $j$：\n\n* 定义巴士 $i$ 到达调度站 $j$ 的**期望到达时间** $e_{i,j}$（以秒为单位）为巴士 $i$ 到达调度站 $j-1$ 之后以全速行驶到达调度站 $j$ 的时间。也就是说，\n  - 对于每个 $0 \\le i \\lt N$，有 $e_{i,j} = t_{i,j-1} + W[i] \\cdot (S[j]-S[j-1])$；\n  - 另有 $e_{N,j} = t_{N,j-1} + X \\cdot (S[j]-S[j-1])$。\n* 巴士 $i$ 到达调度站 $j$ 的时间，是巴士 $i$ 到达调度站 $j$ 的期望到达时间，以及其他比巴士 $i$ 早到调度站 $j-1$ 的巴士到达调度站 $j$ 的期望到达时间中的**最大值**。形式化地说，$t_{i,j}$ 是 $e_{i,j}$ 和所有满足 $0 \\le k \\le N$ 且 $t_{k,j-1} \\lt t_{i,j-1}$ 的 $e_{k,j}$ 中的最大值。\n\nIOI 组委会想要调度备用巴士（巴士 $N$）。你的任务是回答组委会的 $Q$ 个问题，问题的形式如下：给定备用巴士从机场出发的时间 $Y$（以秒为单位），它将于何时到达酒店？", "inputFormat": "评测程序示例按以下格式读取输入：\n\n* 第 $1$ 行：$L \\; N \\; X \\; M \\; Q$\n* 第 $2$ 行：$T[0] \\; T[1] \\; \\ldots \\; T[N-1]$\n* 第 $3$ 行：$W[0] \\; W[1] \\; \\ldots \\; W[N-1]$\n* 第 $4$ 行：$S[0] \\; S[1] \\; \\ldots \\; S[M-1]$\n* 第 $5 + k$ 行（$0 \\le k \\lt Q$）：问题 $k$ 的 $Y$", "outputFormat": "评测程序示例按以下格式打印你的答案：\n\n* 第 $1 + k$ 行（$0 \\le k \\lt Q$）：问题 $k$ 中 `arrival_time` 的返回值", "hint": "**【实现细节】**\n\n你的任务是实现以下函数：\n\n```\nvoid init(int L, int N, int64[] T, int[] W, int X, int M, int[] S)\n```\n\n* $L$：公路的长度\n* $N$：常规（非备用）巴士的数量\n* $T$：长度为 $N$ 的数组，描述常规巴士计划从机场出发的时间。\n* $W$：长度为 $N$ 的数组，描述常规巴士的最大速度。\n* $X$：备用巴士行驶一公里所需的时间\n* $M$：调度站的数量\n* $S$：长度为 $M$ 的数组，描述从机场到调度站的距离。\n* 对于每个测试用例，这个函数都恰好调用一次，发生在对任何 `arrival_time` 的调用之前。\n\n```\nint64 arrival_time(int64 Y)\n```\n\n* $Y$：备用巴士（巴士 $N$）计划从机场出发的时间\n* 这个函数应该返回备用巴士到达酒店的时间。\n* 这个函数恰好调用 $Q$ 次。\n\n---\n\n**【例子】**\n\n考虑以下调用序列：\n\n```\ninit(6, 4, [20, 10, 40, 0], [5, 20, 20, 30], 10, 4, [0, 1, 3, 6])\n```\n\n忽略巴士 $4$（它还没有确定出发时间），下表列出了巴士到达每个调度站的期望时间和实际时间：\n\n| $i$ | | $t_{i,0}$ | | $e_{i,1}$ | $t_{i,1}$ | | $e_{i,2}$ | $t_{i,2}$ | | $e_{i,3}$ | $t_{i,3}$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n| $0$ | | $20$ | | $25$ | $30$ | | $40$ | $40$ | | $55$ | $55$ |\n| $1$ | | $10$ | | $30$ | $30$ | | $70$ | $70$ | | $130$ | $130$ |\n| $2$ | | $40$ | | $60$ | $60$ | | $100$ | $100$ | | $160$ | $180$ |\n| $3$ | | $0$ | | $30$ | $30$ | | $90$ | $90$ | | $180$ | $180$ |\n\n巴士到达调度站 $0$ 的时间就是它计划从机场出发的时间。也就是说，对于 $0 \\le i \\le 3$，$t_{i,0} = T[i]$。\n\n到达调度站 $1$ 的期望时间和实际时间计算如下：\n\n* 调度站 $1$ 的期望到达时间：\n  - 巴士 $0$：$e_{0,1} = t_{0,0} + W[0] \\cdot (S[1]-S[0]) = 20 + 5 \\cdot 1 = 25$。\n  - 巴士 $1$：$e_{1,1} = t_{1,0} + W[1] \\cdot (S[1]-S[0]) = 10 + 20 \\cdot 1 = 30$。\n  - 巴士 $2$：$e_{2,1} = t_{2,0} + W[2] \\cdot (S[1]-S[0]) = 40 + 20 \\cdot 1 = 60$。\n  - 巴士 $3$：$e_{3,1} = t_{3,0} + W[3] \\cdot (S[1]-S[0]) = 0 + 30 \\cdot 1 = 30$。\n* 调度站 $1$ 的到达时间：\n  - 巴士 $1$ 和 $3$ 早于巴士 $0$ 到达调度站 $0$，所以 $t_{0,1} = \\max([e_{0,1},e_{1,1},e_{3,1}]) = 30$。\n  - 巴士 $3$ 早于巴士 $1$ 到达调度站 $0$，所以 $t_{1,1} = \\max([e_{1,1},e_{3,1}]) = 30$。\n  - 巴士 $0$、巴士 $1$ 和巴士 $3$ 早于巴士 $2$ 到达调度站 $0$，所以 $t_{2,1} = \\max([e_{0,1},e_{1,1},e_{2,1},e_{3,1}]) = 60$。\n  - 没有比巴士 $3$ 更早到达调度站 $0$ 的巴士，所以 $t_{3,1} = \\max([e_{3,1}]) = 30$。\n\n```\narrival_time(0)\n```\n\n巴士 $4$ 行驶一公里需要 $10$ 秒，现在计划在第 $0$ 秒从机场出发。\n这种情况下，下表列出每辆巴士的到达时间。\n常规巴士期望和实际到达时间的唯一变动用下划线标注。\n\n| $i$ | | $t_{i,0}$ | | $e_{i,1}$ | $t_{i,1}$ | | $e_{i,2}$ | $t_{i,2}$ | | $e_{i,3}$ | $t_{i,3}$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-: |\n| $0$ | | $20$ | | $25$ | $30$ | | $40$ | $40$ | | $55$ | $\\underline{60}$ |\n| $1$ | | $10$ | | $30$ | $30$ | | $70$ | $70$ | | $130$ | $130$ |\n| $2$ | | $40$ | | $60$ | $60$ | | $100$ | $100$ | | $160$ | $180$ |\n| $3$ | | $0$ | | $30$ | $30$ | | $90$ | $90$ | | $180$ | $180$ |\n| $4$ | | $0$ | | $10$ | $10$ | | $30$ | $30$ | | $60$ | $60$ |\n\n由此可知巴士 $4$ 在第 $60$ 秒到达酒店。\n因此，函数应该返回 $60$。\n\n```\narrival_time(50)\n```\n\n巴士 $4$ 现在计划在第 $50$ 秒从机场出发。\n这种情况下，与初始表格相比，常规巴士的到达时间没有变化。\n下表列出了到达时间。\n\n| $i$ | | $t_{i,0}$ | | $e_{i,1}$ | $t_{i,1}$ | | $e_{i,2}$ | $t_{i,2}$ | | $e_{i,3}$ | $t_{i,3}$ |\n|:--:|:-:|:---------:|:-:|:---------:|:---------:|:-:|:---------:|:---------:|:-:|:---------:|:---------:|\n| $0$ | | $20$      | | $25$      | $30$      | | $40$      | $40$      | | $55$      | $55$ |\n| $1$ | | $10$      | | $30$      | $30$      | | $70$      | $70$      | | $130$     | $130$ |\n| $2$ | | $40$      | | $60$      | $60$      | | $100$     | $100$     | | $160$     | $180$ |\n| $3$ | | $0$       | | $30$      | $30$      | | $90$      | $90$      | | $180$     | $180$ |\n| $4$ | | $50$      | | $60$      | $60$      | | $80$      | $90$      | | $120$     | $130$ |\n\n巴士 $4$ 和较慢的巴士 $2$ 同时到达调度站 $1$，然后巴士 $4$ 超过了巴士 $2$。\n接着，巴士 $4$ 在调度站 $1$ 和 $2$ 之间行驶时被巴士 $3$ 压着，导致它到达调度站 $2$ 的时间是第 $90$ 秒，而不是第 $80$ 秒。\n在过了调度站 $2$ 之后，巴士 $4$ 被巴士 $1$ 压着，直到它们到达酒店。\n巴士 $4$ 在第 $130$ 秒到达酒店。\n因此，函数应该返回 $130$。\n\n将每辆巴士从机场出发到不同距离的时间画成折线图。\n图中 x 轴表示从机场出发的距离（以公里为单位），y 轴表示时间（以秒为单位）。\n竖的虚线标注了调度站的位置。\n不同颜色的实线（标注了巴士的编号）表示四辆常规巴士。\n黑色的点线表示备用巴士。\n\n| `arrival_time(0)` | `arrival_time(50)` |\n|:-:|:-:|\n| ![](https://cdn.luogu.com.cn/upload/image_hosting/rksq53n9.png) | ![](https://cdn.luogu.com.cn/upload/image_hosting/ua96w1x2.png) |\n\n---\n\n**【约束条件】**\n\n* $1 \\le L \\le 10^9$\n* $1 \\le N \\le 1\\,000$\n* $0 \\le T[i] \\le 10^{18}$（对于满足 $0 \\le i \\lt N$ 的每个 $i$）\n* $1 \\le W[i] \\le 10^9$（对于满足 $0 \\le i \\lt N$ 的每个 $i$）\n* $1 \\le X \\le 10^9$\n* $2 \\le M \\le 1\\,000$\n* $0 = S[0] \\lt S[1] \\lt \\cdots \\lt S[M-1] = L$\n* $1 \\le Q \\le 10^6$\n* $0 \\le Y \\le  10^{18}$\n\n---\n\n**【子任务】**\n\n1. （9 分）$N = 1, Q \\le 1\\,000$\n1. （10 分）$M = 2, Q \\le 1\\,000$\n1. （20 分）$N, M, Q \\le 100$\n1. （26 分）$Q \\le 5\\,000$\n1. （35 分）没有额外的约束条件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2023] 超车", "background": "这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。\n\n本题仅支持 C++ 语言提交。但请勿使用 C++14 (GCC 9)", "description": "从布达佩斯机场到 Forrás 酒店有一条单向单车道的公路，公路的长度为 $L$ 公里。\n\nIOI 2023 活动期间，有 $N+1$ 辆巴士在这条公路上行驶。巴士从 $0$ 到 $N$ 依次编号。巴士 $i$（$0 \\le i \\lt N$）计划在活动的第 $T[i]$ 秒从机场出发，行驶一公里用时 $W[i]$ 秒。巴士 $N$ 是备用巴士，行驶一公里用时 $X$ 秒。它从机场出发的时间 $Y$ 尚未确定。\n\n巴士在这条公路上行驶时一般不允许超车，但允许在一些被称为**调度站**的地方进行超车。公路上一共有 $M$ 个调度站（$M \\gt 1$），从 $0$ 到 $M - 1$ 依次编号，位于公路的不同位置。调度站 $j$（$0 \\le j \\lt M$）的位置在机场出发后沿公路的 $S[j]$ 公里处。调度站按照从机场开始的距离递增排列，也就是对于每个 $0 \\le j \\le M - 2$，有 $S[j] \\lt S[j+1]$。首个调度站设在机场，最后一个设在酒店。也就是说，$S[0] = 0$，$S[M-1] = L$。\n\n每辆巴士都以指定的最快速度行驶，除非它遇到前面有比它慢的巴士。在这种情况下，后面的快车会被前面的慢车压着，被迫以慢车的速度行驶。这种情况会持续到两车到达下一个调度站。在那里，快车会完成对慢车的超越。\n\n形式化地说，对于满足 $0 \\le i \\le N$ 且 $0 \\le j \\lt M$ 的每组 $i$ 和 $j$，巴士 $i$ **到达**调度站 $j$ 的时间 $t_{i,j}$（以秒为单位）定义如下：对于每个 $0 \\le i \\lt N$，有 $t_{i,0} = T[i]$。另有 $t_{N,0} = Y$。对于满足 $0 \\lt j \\lt M$ 的每个 $j$：\n\n* 定义巴士 $i$ 到达调度站 $j$ 的**期望到达时间** $e_{i,j}$（以秒为单位）为巴士 $i$ 到达调度站 $j-1$ 之后以全速行驶到达调度站 $j$ 的时间。也就是说，\n  - 对于每个 $0 \\le i \\lt N$，有 $e_{i,j} = t_{i,j-1} + W[i] \\cdot (S[j]-S[j-1])$；\n  - 另有 $e_{N,j} = t_{N,j-1} + X \\cdot (S[j]-S[j-1])$。\n* 巴士 $i$ 到达调度站 $j$ 的时间，是巴士 $i$ 到达调度站 $j$ 的期望到达时间，以及其他比巴士 $i$ 早到调度站 $j-1$ 的巴士到达调度站 $j$ 的期望到达时间中的**最大值**。形式化地说，$t_{i,j}$ 是 $e_{i,j}$ 和所有满足 $0 \\le k \\le N$ 且 $t_{k,j-1} \\lt t_{i,j-1}$ 的 $e_{k,j}$ 中的最大值。\n\nIOI 组委会想要调度备用巴士（巴士 $N$）。你的任务是回答组委会的 $Q$ 个问题，问题的形式如下：给定备用巴士从机场出发的时间 $Y$（以秒为单位），它将于何时到达酒店？", "inputFormat": "评测程序示例按以下格式读取输入：\n\n* 第 $1$ 行：$L \\; N \\; X \\; M \\; Q$\n* 第 $2$ 行：$T[0] \\; T[1] \\; \\ldots \\; T[N-1]$\n* 第 $3$ 行：$W[0] \\; W[1] \\; \\ldots \\; W[N-1]$\n* 第 $4$ 行：$S[0] \\; S[1] \\; \\ldots \\; S[M-1]$\n* 第 $5 + k$ 行（$0 \\le k \\lt Q$）：问题 $k$ 的 $Y$", "outputFormat": "评测程序示例按以下格式打印你的答案：\n\n* 第 $1 + k$ 行（$0 \\le k \\lt Q$）：问题 $k$ 中 `arrival_time` 的返回值", "hint": "**【实现细节】**\n\n你的任务是实现以下函数：\n\n```\nvoid init(int L, int N, int64[] T, int[] W, int X, int M, int[] S)\n```\n\n* $L$：公路的长度\n* $N$：常规（非备用）巴士的数量\n* $T$：长度为 $N$ 的数组，描述常规巴士计划从机场出发的时间。\n* $W$：长度为 $N$ 的数组，描述常规巴士的最大速度。\n* $X$：备用巴士行驶一公里所需的时间\n* $M$：调度站的数量\n* $S$：长度为 $M$ 的数组，描述从机场到调度站的距离。\n* 对于每个测试用例，这个函数都恰好调用一次，发生在对任何 `arrival_time` 的调用之前。\n\n```\nint64 arrival_time(int64 Y)\n```\n\n* $Y$：备用巴士（巴士 $N$）计划从机场出发的时间\n* 这个函数应该返回备用巴士到达酒店的时间。\n* 这个函数恰好调用 $Q$ 次。\n\n---\n\n**【例子】**\n\n考虑以下调用序列：\n\n```\ninit(6, 4, [20, 10, 40, 0], [5, 20, 20, 30], 10, 4, [0, 1, 3, 6])\n```\n\n忽略巴士 $4$（它还没有确定出发时间），下表列出了巴士到达每个调度站的期望时间和实际时间：\n\n| $i$ | | $t_{i,0}$ | | $e_{i,1}$ | $t_{i,1}$ | | $e_{i,2}$ | $t_{i,2}$ | | $e_{i,3}$ | $t_{i,3}$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n| $0$ | | $20$ | | $25$ | $30$ | | $40$ | $40$ | | $55$ | $55$ |\n| $1$ | | $10$ | | $30$ | $30$ | | $70$ | $70$ | | $130$ | $130$ |\n| $2$ | | $40$ | | $60$ | $60$ | | $100$ | $100$ | | $160$ | $180$ |\n| $3$ | | $0$ | | $30$ | $30$ | | $90$ | $90$ | | $180$ | $180$ |\n\n巴士到达调度站 $0$ 的时间就是它计划从机场出发的时间。也就是说，对于 $0 \\le i \\le 3$，$t_{i,0} = T[i]$。\n\n到达调度站 $1$ 的期望时间和实际时间计算如下：\n\n* 调度站 $1$ 的期望到达时间：\n  - 巴士 $0$：$e_{0,1} = t_{0,0} + W[0] \\cdot (S[1]-S[0]) = 20 + 5 \\cdot 1 = 25$。\n  - 巴士 $1$：$e_{1,1} = t_{1,0} + W[1] \\cdot (S[1]-S[0]) = 10 + 20 \\cdot 1 = 30$。\n  - 巴士 $2$：$e_{2,1} = t_{2,0} + W[2] \\cdot (S[1]-S[0]) = 40 + 20 \\cdot 1 = 60$。\n  - 巴士 $3$：$e_{3,1} = t_{3,0} + W[3] \\cdot (S[1]-S[0]) = 0 + 30 \\cdot 1 = 30$。\n* 调度站 $1$ 的到达时间：\n  - 巴士 $1$ 和 $3$ 早于巴士 $0$ 到达调度站 $0$，所以 $t_{0,1} = \\max([e_{0,1},e_{1,1},e_{3,1}]) = 30$。\n  - 巴士 $3$ 早于巴士 $1$ 到达调度站 $0$，所以 $t_{1,1} = \\max([e_{1,1},e_{3,1}]) = 30$。\n  - 巴士 $0$、巴士 $1$ 和巴士 $3$ 早于巴士 $2$ 到达调度站 $0$，所以 $t_{2,1} = \\max([e_{0,1},e_{1,1},e_{2,1},e_{3,1}]) = 60$。\n  - 没有比巴士 $3$ 更早到达调度站 $0$ 的巴士，所以 $t_{3,1} = \\max([e_{3,1}]) = 30$。\n\n```\narrival_time(0)\n```\n\n巴士 $4$ 行驶一公里需要 $10$ 秒，现在计划在第 $0$ 秒从机场出发。\n这种情况下，下表列出每辆巴士的到达时间。\n常规巴士期望和实际到达时间的唯一变动用下划线标注。\n\n| $i$ | | $t_{i,0}$ | | $e_{i,1}$ | $t_{i,1}$ | | $e_{i,2}$ | $t_{i,2}$ | | $e_{i,3}$ | $t_{i,3}$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-: |\n| $0$ | | $20$ | | $25$ | $30$ | | $40$ | $40$ | | $55$ | $\\underline{60}$ |\n| $1$ | | $10$ | | $30$ | $30$ | | $70$ | $70$ | | $130$ | $130$ |\n| $2$ | | $40$ | | $60$ | $60$ | | $100$ | $100$ | | $160$ | $180$ |\n| $3$ | | $0$ | | $30$ | $30$ | | $90$ | $90$ | | $180$ | $180$ |\n| $4$ | | $0$ | | $10$ | $10$ | | $30$ | $30$ | | $60$ | $60$ |\n\n由此可知巴士 $4$ 在第 $60$ 秒到达酒店。\n因此，函数应该返回 $60$。\n\n```\narrival_time(50)\n```\n\n巴士 $4$ 现在计划在第 $50$ 秒从机场出发。\n这种情况下，与初始表格相比，常规巴士的到达时间没有变化。\n下表列出了到达时间。\n\n| $i$ | | $t_{i,0}$ | | $e_{i,1}$ | $t_{i,1}$ | | $e_{i,2}$ | $t_{i,2}$ | | $e_{i,3}$ | $t_{i,3}$ |\n|:--:|:-:|:---------:|:-:|:---------:|:---------:|:-:|:---------:|:---------:|:-:|:---------:|:---------:|\n| $0$ | | $20$      | | $25$      | $30$      | | $40$      | $40$      | | $55$      | $55$ |\n| $1$ | | $10$      | | $30$      | $30$      | | $70$      | $70$      | | $130$     | $130$ |\n| $2$ | | $40$      | | $60$      | $60$      | | $100$     | $100$     | | $160$     | $180$ |\n| $3$ | | $0$       | | $30$      | $30$      | | $90$      | $90$      | | $180$     | $180$ |\n| $4$ | | $50$      | | $60$      | $60$      | | $80$      | $90$      | | $120$     | $130$ |\n\n巴士 $4$ 和较慢的巴士 $2$ 同时到达调度站 $1$，然后巴士 $4$ 超过了巴士 $2$。\n接着，巴士 $4$ 在调度站 $1$ 和 $2$ 之间行驶时被巴士 $3$ 压着，导致它到达调度站 $2$ 的时间是第 $90$ 秒，而不是第 $80$ 秒。\n在过了调度站 $2$ 之后，巴士 $4$ 被巴士 $1$ 压着，直到它们到达酒店。\n巴士 $4$ 在第 $130$ 秒到达酒店。\n因此，函数应该返回 $130$。\n\n将每辆巴士从机场出发到不同距离的时间画成折线图。\n图中 x 轴表示从机场出发的距离（以公里为单位），y 轴表示时间（以秒为单位）。\n竖的虚线标注了调度站的位置。\n不同颜色的实线（标注了巴士的编号）表示四辆常规巴士。\n黑色的点线表示备用巴士。\n\n| `arrival_time(0)` | `arrival_time(50)` |\n|:-:|:-:|\n| ![](https://cdn.luogu.com.cn/upload/image_hosting/rksq53n9.png) | ![](https://cdn.luogu.com.cn/upload/image_hosting/ua96w1x2.png) |\n\n---\n\n**【约束条件】**\n\n* $1 \\le L \\le 10^9$\n* $1 \\le N \\le 1\\,000$\n* $0 \\le T[i] \\le 10^{18}$（对于满足 $0 \\le i \\lt N$ 的每个 $i$）\n* $1 \\le W[i] \\le 10^9$（对于满足 $0 \\le i \\lt N$ 的每个 $i$）\n* $1 \\le X \\le 10^9$\n* $2 \\le M \\le 1\\,000$\n* $0 = S[0] \\lt S[1] \\lt \\cdots \\lt S[M-1] = L$\n* $1 \\le Q \\le 10^6$\n* $0 \\le Y \\le  10^{18}$\n\n---\n\n**【子任务】**\n\n1. （9 分）$N = 1, Q \\le 1\\,000$\n1. （10 分）$M = 2, Q \\le 1\\,000$\n1. （20 分）$N, M, Q \\le 100$\n1. （26 分）$Q \\le 5\\,000$\n1. （35 分）没有额外的约束条件。", "locale": "zh-CN"}}}
{"pid": "P9605", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2023", "IOI", "交互题", "Special Judge", "O2优化"], "title": "[IOI 2023] 机器人比赛", "background": "这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。\n\n本题仅支持 C++ 语言提交。\n\n---\n\n由于某些技术原因，你可能需要在源代码的开头加入以下内容：\n\n```cpp\n#include <vector>\n\nvoid program_pulibot();\nvoid set_instruction(std::vector<int> S, int Z, char A);\n```", "description": "塞格德大学的人工智能研究人员正在举办一场机器人编程竞赛。\n你的朋友 Hanga 决定参加比赛。由于著名的匈牙利牧羊犬品种 Puli 非常聪明，所以该比赛的目标定为编程实现顶级的 Pulibot。\n\nPulibot 将在由 $(H+2) \\times (W+2)$ 网格组成的迷宫中进行测试。\n网格的行从北到南编号为 $-1$ 到 $H$，网格的列从西到东编号为 $-1$ 到 $W$。\n我们将位于网格的第 $r$ 行和第 $c$ 列的单元格（$-1 \\le r \\le H$, $-1 \\le c \\le W$）称为单元格 $(r,c)$。\n\n考虑一个单元格 $(r,c)$ （$0 \\le r \\lt H$，$0 \\le c \\lt W$），和它**相邻**的有 $4$ 个单元格。\n\n* 单元格 $(r,c-1)$ 被称为单元格 $(r,c)$ 的**西邻**；\n* 单元格 $(r+1,c)$ 被称为单元格 $(r,c)$ 的**南邻**；\n* 单元格 $(r,c+1)$ 被称为单元格 $(r,c)$ 的**东邻**；\n* 单元格 $(r-1,c)$ 被称为单元格 $(r,c)$ 的**北邻**。\n\n如果 $r=-1$ 或 $r=H$ 或 $c=-1$ 或 $c=W$ 成立，则单元格 $(r,c)$ 称为迷宫的**边界**。每个不是迷宫边界的单元格要么是**障碍**，要么是**空的**。\n此外，每个空单元格都有一个**颜色**，由 $0$ 和 $Z_{\\text{MAX}}$ 之间的非负整数表示，包括 $0$ 和 $Z_{\\text{MAX}}$。最初，每个空单元格的颜色为 $0$。\n\n例如，考虑一个迷宫，$H=4$， $W=5$， 包含一个障碍单元格 $(1,3)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h649yqfv.png)\n\n唯一的障碍单元格用 $\\times$ 表示。迷宫的边界单元格被阴影覆盖。\n每个空单元格中的数字表示它的颜色。\n\n从单元格 $(r_0, c_0)$ 到单元格 $(r_\\ell, c_\\ell)$ 的长度为 $\\ell$（$\\ell\\gt 0$）的**路径**\n是一个**空**单元格序列 $(r_0,c_0), (r_1, c_1), \\ldots, (r_\\ell, c_\\ell)$，序列中的空单元格两两不同。其中对于每个 $i$（$0\\le i\\lt\\ell$），单元格 $(r_i, c_i)$ 和 $(r_{i+1}, c_{i+1})$ 是相邻的。\n\n注意长度为 $\\ell$ 的路径正好包含 $\\ell+1$ 个单元格。\n\n在比赛中，研究人员设置了一个迷宫，其中至少有一条从单元格 $(0,0)$ 到单元格 $(H-1, W-1)$ 的路径。注意，这意味着单元格 $(0, 0)$ 和 $(H-1, W-1)$ 保证为空。\n\nHanga 不知道迷宫中哪些单元格是空的，哪些单元格是障碍。\n\n你的任务是帮助 Hanga 对 Pulibot 进行编程，使其能够在研究人员设置的未知迷宫中找到从单元格 $(0,0)$ 到单元格 $(H-1, W-1)$ 的**最短路径**（即长度最小的路径）。\nPulibot 的说明和比赛规则如下所述。 \n\n注意，在题面的最后一部分描述了一个显示工具，该工具可以用于可视化 Pulibot。\n\n### Pulibot 说明\n\n对每个单元格 $(r,c)$（$-1 \\le r \\le H$ ，$-1 \\le c \\le W$），其**状态**定义为一个整数，具体如下：\n* 如果单元格 $(r,c)$ 是边界，则其状态为 $-2$；\n* 如果单元格 $(r,c)$ 是障碍，则其状态为 $-1$；\n* 如果单元格 $(r,c)$ 是空的，那么它的状态就是单元格的颜色。\n\nPulibot 的程序是按一系列步骤执行的。在每一步中，Pulibot 都会识别附近单元格的状态，然后执行一条指令。它执行的指令由识别的状态决定。以下是更准确的描述。\n\n假设在当前步骤开始时，Pulibot位于单元格 $(r,c)$，这是一个空单元格。该步骤执行如下：\n\n1. 首先，Pulibot 识别当前**状态数组**，即数组 $S = [S[0], S[1], S[2], S[3], S[4]]$， 它包含单元格 $(r,c)$ 及其所有相邻单元格的状态：\n    * $S[0]$ 表示单元格 $(r,c)$ 的状态。\n    * $S[1]$ 表示西邻的状态。\n    * $S[2]$ 表示南邻的状态。\n    * $S[3]$ 表示东邻的状态。\n    * $S[4]$ 表示北邻的状态。\n1. 然后，Pulibot 确定与所识别的状态数组相对应的**指令** $(Z, A)$。\n1. 最后，Pulibot 执行这条指令：它将单元格 $(r,c)$ 的颜色设置为 $Z$，然后它执行动作 $A$, $A$ 是以下动作之一：\n    * **停留** 在单元格 $(r,c)$；\n    * **移动** 到 $4$ 个邻居之一；\n    * **终止程序**。\n\n例如，考虑下图左侧显示的场景。Pulibot 当前位于单元格$(0,0)$，颜色为$0$。\nPulibot 识别出状态数组 $S=[0, -2, 2, 2, -2]$。Pulibot 可能有一个程序，该程序根据所识别的数组，将当前单元格的颜色设置为 $Z=1$，然后向东移动，如图的中间和右侧所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pg2mek5q.png)\n\n### 机器人比赛规则\n\n* 在开始时，Pulibot 被放置在单元格 $(0,0)$ 并开始执行其程序。\n* 不允许 Pulibot 移动到非空单元格。\n* Pulibot 的程序必须在最多 $500\\,000$ 步后终止。\n* 在 Pulibot 的程序终止后，迷宫中的空单元格的着色满足以下要求：\n  - 存在从 $(0,0)$ 到 $(H-1, W-1)$ 的最短路径，路径中包括的每个单元格的颜色为 $1$。\n  - 所有其他空单元格的颜色为 $0$。\n* Pulibot 可以在任何空单元格终止其程序。 \n  \n\n例如，下图显示了一个可能的迷宫，其中$H=W=6$。左侧显示了初始配置，右侧显示了程序终止后空单元格的一种可以接受的着色：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ry81lf6s.png)", "inputFormat": "你要实现以下函数：\n\n```\nvoid program_pulibot()\n```\n\n* 这个函数应该产生 Pulibot 的程序。对于所有 $H$ 和 $W$ 的取值以及满足题目约束条件的任何迷宫，该程序应该都能正确工作。\n* 对于每个测试用例，此函数只调用一次。\n\n此函数可以调用以下函数来生成 Pulibot 的程序：\n\n```\nvoid set_instruction(int[] S, int Z, char A)\n```\n\n* $S$: 长度为 $5$ 的数组，用来描述状态数组\n* $Z$: 表示颜色的非负整数\n* $A$: 表示 Pulibot 动作的单个字符，具体如下:\n    - `H`: 停留;\n    - `W`: 移动到西邻;\n    - `S`: 移动到南邻;\n    - `E`: 移动到东邻;\n    - `N`: 移动到北邻;\n    - `T`: 终止程序。\n* 调用此函数指示 Pulibot 在识别状态数组 $S$ 时应执行指令 $(Z, A)$。  \n\n用相同的状态数组 $S$ 多次调用该函数将导致  `Output isn't correct` 的判定结果。\n\n不需要对每个可能的状态数组 $S$ 调用 `set_instruction`。 但是，如果 Pulibot 后来识别出未设置指令的状态数组，你将得到 `Output isn't correct` 的判定结果。\n\n`program_pulibot` 完成后，评测程序会在一个或多个迷宫上调用 Pulibot 的程序。\n这些调用**不**计入解决方案的时间限制。\n评测程序**不**是自适应的，也就是说，每个测试用例的迷宫集合都是预先确定的。\n\n如果 Pulibot 在终止程序之前违反了任何机器人比赛规则，你将得到 `Output isn't correct` 的判定结果。", "outputFormat": "函数 `program_pulibot` 可以调用 `set_instruction` 如下：\n\n调用                             | 对应状态数组 $S$ 的指令\n:-------------------------------------------:|:---------------------------------------:\n`set_instruction([0, -2, -1, 0, -2], 1, E)`  | 着色 $1$ 并且东移\n`set_instruction([0, 1, -1, 0, -2], 1, E)`   | 着色 $1$ 并且东移\n`set_instruction([0, 1, 0, -2, -2], 1, S)`   | 着色 $1$ 并且南移\n`set_instruction([0, -1, -2, -2, 1], 1, T)`  | 着色 $1$ 并且终止程序\n\n考虑一个场景，$H=2$， $W=3$，迷宫如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q5lifqvx.png)\n\n对于这个特定的迷宫，Pulibot 的程序分四个步骤运行。 Pulibot 识别的状态数组和它执行的指令正好依次对应上述对“set_instruction”的四次调用。 这些指令的最后一条指令终止程序。\n\n下图展示了四个步骤每一步之前的迷宫以及终止后的最终颜色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n236hrg7.png)\n\n但是，注意这个由 $4$ 条指令构成的程序有可能在其他合法的迷宫中找不到最短路径。\n所以，如果这个程序被提交，它会收到 `Output isn't correct` 的判定结果。", "hint": "## 约束条件\n\n$Z_{\\text{MAX}} = 19$。因此，Pulibot 可以使用 0 到 19 的颜色，包含 0 和 19。\n\n对于每个用来测试Pulibot的迷宫：\n* $2 \\le H, W \\le 15$\n* 至少有一条从单元格 $(0,0)$ 到 $(H-1, W-1)$ 的路径。\n\n## 子任务\n\n1. （6 分）迷宫中没有障碍单元格。\n1. （10 分）$H = 2$\n1. （18 分）任意两个空单元格之间恰好有一条路径。\n1. （20 分）从单元格 $(0,0)$ 到 $(H-1, W-1)$ 的最短路径的长度为 $H + W - 2$。\n1. （46 分）无额外约束条件。\n\n如果在任何测试用例中，对函数 `set_instruction` 的调用或 Pulibot 程序的执行不符合“实现细节”中所描述的限制条件，则该子任务的解决方案得分将为 $0$。\n\n在每个子任务中，你可以通过生成几乎正确的着色来获得部分分数。\n\n形式化地说：\n\n* 如果空单元格的最终颜色满足机器人竞赛规则，则测试用例的解决方案是**完整**的。\n* 如果最终着色如下所示，则测试用例的解决方案是**部分**的：\n   - 存在一条从 $(0,0)$ 到 $(H-1, W-1)$ 的最短路径，路径中包含的每个单元格的颜色为 $1$。\n   - 网格中没有其他颜色为 $1$ 的空单元格。\n   - 网格中的某些空单元格的颜色既不是 $0$ 也不是 $1$。\n   \n\n如果你对某个测试用例的解决方案既不完整也不部分，则该测试用例的得分将为 $0$。\n\n在子任务 1-4 中，对每个测试用例来说，完整解决方案的计分为该子任务分数的 100%，部分解决方案的计分为该子任务分数的 50%。\n\n在子任务 5 中，你的分数取决于 Pulibot 程序中所使用颜色的数量。\n更准确地说，用 $Z^\\star$ 表示对 `set_instruction` 进行的所有调用中 $Z$ 的最大值。\n测试用例上的得分按下表计算：\n\n| 条件            | 分数 (完整)      | 分数 (部分)       |\n|:-----------------------:|:---------------------:|:---------------------:|\n| $11 \\le Z^\\star \\le 19$ | $20 + (19 - Z^\\star)$ | $12 + (19 - Z^\\star)$ |\n| $Z^\\star = 10$          | $31$                  | $23$                  |\n| $Z^\\star = 9$           | $34$                  | $26$                  |\n| $Z^\\star = 8$           | $38$                  | $29$                  |\n| $Z^\\star = 7$           | $42$                  | $32$                  |\n| $Z^\\star \\le 6$         | $46$                  | $36$                  |\n\n\n每个子任务的得分是该子任务中所有测试用例上计分的最小值。\n\n## 评测程序示例\n\n评测程序示例按照以下格式读取输入：\n* 第 $1$ 行: $H \\; W$\n* 第 $2 + r$ 行 ($0 \\le r \\lt H$): $m[r][0] \\; m[r][1] \\; \\ldots \\; m[r][W-1]$\n\n其中，$m$ 是一个 $H$ 行 $W$ 列的二维整数数组，描述迷宫中非边界单元格。\n如果单元格 $(r, c)$ 是空的，$m[r][c] = 0$；如果单元格 $(r, c)$ 是障碍， $m[r][c] = 1$。\n\n\n\n评测程序示例首先调用 `program_pulibot()`。如果评测程序示例检测到违反规则的行为，则会打印 `Protocol Violation: <MSG>` 并终止，其中 `<MSG>` 是以下错误消息之一：\n\n* `Invalid array`：$-2 \\le S[i] \\le Z_{\\text{MAX}}$ 对某些 $i$ 不成立或者 $S$ 的长度不是 $5$。\n* `Invalid color`：$0 \\le Z \\le Z_{\\text{MAX}}$ 不成立。\n* `Invalid action`：字符 $A$ 不是 `H`, `W`, `S`, `E`, `N` 或 `T`。\n* `Same state array`：用相同的 $S$ 调用 `set_instruction` 两次或以上。\n\n否则，当 `program_pulibot` 完成时，评测程序示例将在输入所描述的迷宫中执行 Pulibot 的程序。\n\n评测程序示例产生两个输出。首先，评测程序示例将 Pulibot 动作记录写入工作目录中的文件 `robot.bin` 。\n该文件用作下一节中描述的可视化工具的输入。\n\n其次，如果 Pulibot 的程序未成功终止，评测程序示例将打印以下错误消息之一：\n\n* `Unexpected state`：Pulibot 识别出一个无法调用“set_instruction”的状态数组。\n* `Invalid move`：执行一个动作，导致 Pulibot 移动到一个非空单元格。\n* `Too many steps`：Pulibot 执行了 $500\\,000$ 步没有终止程序。\n\n否则，令 $e[r][c]$ 为 Pulibot 程序终止后单元格 $(r, c)$ 的状态。\n评测程序示例按以下格式打印 $H$ 行：\n* 第 $1 + r$ 行 ($0 \\le r \\lt H$)：$e[r][0] \\; e[r][1] \\; \\ldots \\; e[r][W-1]$\n\n## 显示工具\n\n此任务的附件包含有一个名为 `display.py` 的文件。\n调用时，此 Python 脚本会显示 Pulibot 在由评测程序示例的输入所描述的迷宫中的操作。\n为此，工作目录中要有二进制文件 `robot.bin`。\n\n要调用该脚本，请执行以下命令。\n\n```\npython3 display.py\n```\n\n一个简单的图形界面将会出现，主要特性如下：\n\n* 你可以观察整个迷宫的状态。 Pulibot 的当前位置以矩形突出显示。\n* 你可以通过单击箭头按钮或按热键来浏览 Pulibot 的步骤。 你还可以跳转到特定步骤。\n* Pulibot 程序中即将进行的步骤显示在底部。\n它显示当前状态数组及将要执行的指令。\n在最后一步之后，它或者会显示评测程序的错误消息之一，或者在程序成功终止时显示 `Terminated`。\n* 对于代表颜色的每个数字，你可以指定视觉背景颜色以及显示的文本。 显示的文本是一个短字符串，应出现在每个具有那个颜色的单元格。你可以通过以下任一方式指定背景颜色和显示的文本：\n   - 单击 `Colors` 按钮后在对话框窗口中设置它们。\n   - 编辑 `colors.txt` 文件的内容。\n* 要重新加载 `robot.bin`，请使用 `Reload` 按钮。 这可以用来处理 `robot.bin` 的内容发生更改的情况。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2023] 机器人比赛", "background": "这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。\n\n本题仅支持 C++ 语言提交。\n\n---\n\n由于某些技术原因，你可能需要在源代码的开头加入以下内容：\n\n```cpp\n#include <vector>\n\nvoid program_pulibot();\nvoid set_instruction(std::vector<int> S, int Z, char A);\n```", "description": "塞格德大学的人工智能研究人员正在举办一场机器人编程竞赛。\n你的朋友 Hanga 决定参加比赛。由于著名的匈牙利牧羊犬品种 Puli 非常聪明，所以该比赛的目标定为编程实现顶级的 Pulibot。\n\nPulibot 将在由 $(H+2) \\times (W+2)$ 网格组成的迷宫中进行测试。\n网格的行从北到南编号为 $-1$ 到 $H$，网格的列从西到东编号为 $-1$ 到 $W$。\n我们将位于网格的第 $r$ 行和第 $c$ 列的单元格（$-1 \\le r \\le H$, $-1 \\le c \\le W$）称为单元格 $(r,c)$。\n\n考虑一个单元格 $(r,c)$ （$0 \\le r \\lt H$，$0 \\le c \\lt W$），和它**相邻**的有 $4$ 个单元格。\n\n* 单元格 $(r,c-1)$ 被称为单元格 $(r,c)$ 的**西邻**；\n* 单元格 $(r+1,c)$ 被称为单元格 $(r,c)$ 的**南邻**；\n* 单元格 $(r,c+1)$ 被称为单元格 $(r,c)$ 的**东邻**；\n* 单元格 $(r-1,c)$ 被称为单元格 $(r,c)$ 的**北邻**。\n\n如果 $r=-1$ 或 $r=H$ 或 $c=-1$ 或 $c=W$ 成立，则单元格 $(r,c)$ 称为迷宫的**边界**。每个不是迷宫边界的单元格要么是**障碍**，要么是**空的**。\n此外，每个空单元格都有一个**颜色**，由 $0$ 和 $Z_{\\text{MAX}}$ 之间的非负整数表示，包括 $0$ 和 $Z_{\\text{MAX}}$。最初，每个空单元格的颜色为 $0$。\n\n例如，考虑一个迷宫，$H=4$， $W=5$， 包含一个障碍单元格 $(1,3)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h649yqfv.png)\n\n唯一的障碍单元格用 $\\times$ 表示。迷宫的边界单元格被阴影覆盖。\n每个空单元格中的数字表示它的颜色。\n\n从单元格 $(r_0, c_0)$ 到单元格 $(r_\\ell, c_\\ell)$ 的长度为 $\\ell$（$\\ell\\gt 0$）的**路径**\n是一个**空**单元格序列 $(r_0,c_0), (r_1, c_1), \\ldots, (r_\\ell, c_\\ell)$，序列中的空单元格两两不同。其中对于每个 $i$（$0\\le i\\lt\\ell$），单元格 $(r_i, c_i)$ 和 $(r_{i+1}, c_{i+1})$ 是相邻的。\n\n注意长度为 $\\ell$ 的路径正好包含 $\\ell+1$ 个单元格。\n\n在比赛中，研究人员设置了一个迷宫，其中至少有一条从单元格 $(0,0)$ 到单元格 $(H-1, W-1)$ 的路径。注意，这意味着单元格 $(0, 0)$ 和 $(H-1, W-1)$ 保证为空。\n\nHanga 不知道迷宫中哪些单元格是空的，哪些单元格是障碍。\n\n你的任务是帮助 Hanga 对 Pulibot 进行编程，使其能够在研究人员设置的未知迷宫中找到从单元格 $(0,0)$ 到单元格 $(H-1, W-1)$ 的**最短路径**（即长度最小的路径）。\nPulibot 的说明和比赛规则如下所述。 \n\n注意，在题面的最后一部分描述了一个显示工具，该工具可以用于可视化 Pulibot。\n\n### Pulibot 说明\n\n对每个单元格 $(r,c)$（$-1 \\le r \\le H$ ，$-1 \\le c \\le W$），其**状态**定义为一个整数，具体如下：\n* 如果单元格 $(r,c)$ 是边界，则其状态为 $-2$；\n* 如果单元格 $(r,c)$ 是障碍，则其状态为 $-1$；\n* 如果单元格 $(r,c)$ 是空的，那么它的状态就是单元格的颜色。\n\nPulibot 的程序是按一系列步骤执行的。在每一步中，Pulibot 都会识别附近单元格的状态，然后执行一条指令。它执行的指令由识别的状态决定。以下是更准确的描述。\n\n假设在当前步骤开始时，Pulibot位于单元格 $(r,c)$，这是一个空单元格。该步骤执行如下：\n\n1. 首先，Pulibot 识别当前**状态数组**，即数组 $S = [S[0], S[1], S[2], S[3], S[4]]$， 它包含单元格 $(r,c)$ 及其所有相邻单元格的状态：\n    * $S[0]$ 表示单元格 $(r,c)$ 的状态。\n    * $S[1]$ 表示西邻的状态。\n    * $S[2]$ 表示南邻的状态。\n    * $S[3]$ 表示东邻的状态。\n    * $S[4]$ 表示北邻的状态。\n1. 然后，Pulibot 确定与所识别的状态数组相对应的**指令** $(Z, A)$。\n1. 最后，Pulibot 执行这条指令：它将单元格 $(r,c)$ 的颜色设置为 $Z$，然后它执行动作 $A$, $A$ 是以下动作之一：\n    * **停留** 在单元格 $(r,c)$；\n    * **移动** 到 $4$ 个邻居之一；\n    * **终止程序**。\n\n例如，考虑下图左侧显示的场景。Pulibot 当前位于单元格$(0,0)$，颜色为$0$。\nPulibot 识别出状态数组 $S=[0, -2, 2, 2, -2]$。Pulibot 可能有一个程序，该程序根据所识别的数组，将当前单元格的颜色设置为 $Z=1$，然后向东移动，如图的中间和右侧所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pg2mek5q.png)\n\n### 机器人比赛规则\n\n* 在开始时，Pulibot 被放置在单元格 $(0,0)$ 并开始执行其程序。\n* 不允许 Pulibot 移动到非空单元格。\n* Pulibot 的程序必须在最多 $500\\,000$ 步后终止。\n* 在 Pulibot 的程序终止后，迷宫中的空单元格的着色满足以下要求：\n  - 存在从 $(0,0)$ 到 $(H-1, W-1)$ 的最短路径，路径中包括的每个单元格的颜色为 $1$。\n  - 所有其他空单元格的颜色为 $0$。\n* Pulibot 可以在任何空单元格终止其程序。 \n  \n\n例如，下图显示了一个可能的迷宫，其中$H=W=6$。左侧显示了初始配置，右侧显示了程序终止后空单元格的一种可以接受的着色：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ry81lf6s.png)", "inputFormat": "你要实现以下函数：\n\n```\nvoid program_pulibot()\n```\n\n* 这个函数应该产生 Pulibot 的程序。对于所有 $H$ 和 $W$ 的取值以及满足题目约束条件的任何迷宫，该程序应该都能正确工作。\n* 对于每个测试用例，此函数只调用一次。\n\n此函数可以调用以下函数来生成 Pulibot 的程序：\n\n```\nvoid set_instruction(int[] S, int Z, char A)\n```\n\n* $S$: 长度为 $5$ 的数组，用来描述状态数组\n* $Z$: 表示颜色的非负整数\n* $A$: 表示 Pulibot 动作的单个字符，具体如下:\n    - `H`: 停留;\n    - `W`: 移动到西邻;\n    - `S`: 移动到南邻;\n    - `E`: 移动到东邻;\n    - `N`: 移动到北邻;\n    - `T`: 终止程序。\n* 调用此函数指示 Pulibot 在识别状态数组 $S$ 时应执行指令 $(Z, A)$。  \n\n用相同的状态数组 $S$ 多次调用该函数将导致  `Output isn't correct` 的判定结果。\n\n不需要对每个可能的状态数组 $S$ 调用 `set_instruction`。 但是，如果 Pulibot 后来识别出未设置指令的状态数组，你将得到 `Output isn't correct` 的判定结果。\n\n`program_pulibot` 完成后，评测程序会在一个或多个迷宫上调用 Pulibot 的程序。\n这些调用**不**计入解决方案的时间限制。\n评测程序**不**是自适应的，也就是说，每个测试用例的迷宫集合都是预先确定的。\n\n如果 Pulibot 在终止程序之前违反了任何机器人比赛规则，你将得到 `Output isn't correct` 的判定结果。", "outputFormat": "函数 `program_pulibot` 可以调用 `set_instruction` 如下：\n\n调用                             | 对应状态数组 $S$ 的指令\n:-------------------------------------------:|:---------------------------------------:\n`set_instruction([0, -2, -1, 0, -2], 1, E)`  | 着色 $1$ 并且东移\n`set_instruction([0, 1, -1, 0, -2], 1, E)`   | 着色 $1$ 并且东移\n`set_instruction([0, 1, 0, -2, -2], 1, S)`   | 着色 $1$ 并且南移\n`set_instruction([0, -1, -2, -2, 1], 1, T)`  | 着色 $1$ 并且终止程序\n\n考虑一个场景，$H=2$， $W=3$，迷宫如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q5lifqvx.png)\n\n对于这个特定的迷宫，Pulibot 的程序分四个步骤运行。 Pulibot 识别的状态数组和它执行的指令正好依次对应上述对“set_instruction”的四次调用。 这些指令的最后一条指令终止程序。\n\n下图展示了四个步骤每一步之前的迷宫以及终止后的最终颜色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n236hrg7.png)\n\n但是，注意这个由 $4$ 条指令构成的程序有可能在其他合法的迷宫中找不到最短路径。\n所以，如果这个程序被提交，它会收到 `Output isn't correct` 的判定结果。", "hint": "## 约束条件\n\n$Z_{\\text{MAX}} = 19$。因此，Pulibot 可以使用 0 到 19 的颜色，包含 0 和 19。\n\n对于每个用来测试Pulibot的迷宫：\n* $2 \\le H, W \\le 15$\n* 至少有一条从单元格 $(0,0)$ 到 $(H-1, W-1)$ 的路径。\n\n## 子任务\n\n1. （6 分）迷宫中没有障碍单元格。\n1. （10 分）$H = 2$\n1. （18 分）任意两个空单元格之间恰好有一条路径。\n1. （20 分）从单元格 $(0,0)$ 到 $(H-1, W-1)$ 的最短路径的长度为 $H + W - 2$。\n1. （46 分）无额外约束条件。\n\n如果在任何测试用例中，对函数 `set_instruction` 的调用或 Pulibot 程序的执行不符合“实现细节”中所描述的限制条件，则该子任务的解决方案得分将为 $0$。\n\n在每个子任务中，你可以通过生成几乎正确的着色来获得部分分数。\n\n形式化地说：\n\n* 如果空单元格的最终颜色满足机器人竞赛规则，则测试用例的解决方案是**完整**的。\n* 如果最终着色如下所示，则测试用例的解决方案是**部分**的：\n   - 存在一条从 $(0,0)$ 到 $(H-1, W-1)$ 的最短路径，路径中包含的每个单元格的颜色为 $1$。\n   - 网格中没有其他颜色为 $1$ 的空单元格。\n   - 网格中的某些空单元格的颜色既不是 $0$ 也不是 $1$。\n   \n\n如果你对某个测试用例的解决方案既不完整也不部分，则该测试用例的得分将为 $0$。\n\n在子任务 1-4 中，对每个测试用例来说，完整解决方案的计分为该子任务分数的 100%，部分解决方案的计分为该子任务分数的 50%。\n\n在子任务 5 中，你的分数取决于 Pulibot 程序中所使用颜色的数量。\n更准确地说，用 $Z^\\star$ 表示对 `set_instruction` 进行的所有调用中 $Z$ 的最大值。\n测试用例上的得分按下表计算：\n\n| 条件            | 分数 (完整)      | 分数 (部分)       |\n|:-----------------------:|:---------------------:|:---------------------:|\n| $11 \\le Z^\\star \\le 19$ | $20 + (19 - Z^\\star)$ | $12 + (19 - Z^\\star)$ |\n| $Z^\\star = 10$          | $31$                  | $23$                  |\n| $Z^\\star = 9$           | $34$                  | $26$                  |\n| $Z^\\star = 8$           | $38$                  | $29$                  |\n| $Z^\\star = 7$           | $42$                  | $32$                  |\n| $Z^\\star \\le 6$         | $46$                  | $36$                  |\n\n\n每个子任务的得分是该子任务中所有测试用例上计分的最小值。\n\n## 评测程序示例\n\n评测程序示例按照以下格式读取输入：\n* 第 $1$ 行: $H \\; W$\n* 第 $2 + r$ 行 ($0 \\le r \\lt H$): $m[r][0] \\; m[r][1] \\; \\ldots \\; m[r][W-1]$\n\n其中，$m$ 是一个 $H$ 行 $W$ 列的二维整数数组，描述迷宫中非边界单元格。\n如果单元格 $(r, c)$ 是空的，$m[r][c] = 0$；如果单元格 $(r, c)$ 是障碍， $m[r][c] = 1$。\n\n\n\n评测程序示例首先调用 `program_pulibot()`。如果评测程序示例检测到违反规则的行为，则会打印 `Protocol Violation: <MSG>` 并终止，其中 `<MSG>` 是以下错误消息之一：\n\n* `Invalid array`：$-2 \\le S[i] \\le Z_{\\text{MAX}}$ 对某些 $i$ 不成立或者 $S$ 的长度不是 $5$。\n* `Invalid color`：$0 \\le Z \\le Z_{\\text{MAX}}$ 不成立。\n* `Invalid action`：字符 $A$ 不是 `H`, `W`, `S`, `E`, `N` 或 `T`。\n* `Same state array`：用相同的 $S$ 调用 `set_instruction` 两次或以上。\n\n否则，当 `program_pulibot` 完成时，评测程序示例将在输入所描述的迷宫中执行 Pulibot 的程序。\n\n评测程序示例产生两个输出。首先，评测程序示例将 Pulibot 动作记录写入工作目录中的文件 `robot.bin` 。\n该文件用作下一节中描述的可视化工具的输入。\n\n其次，如果 Pulibot 的程序未成功终止，评测程序示例将打印以下错误消息之一：\n\n* `Unexpected state`：Pulibot 识别出一个无法调用“set_instruction”的状态数组。\n* `Invalid move`：执行一个动作，导致 Pulibot 移动到一个非空单元格。\n* `Too many steps`：Pulibot 执行了 $500\\,000$ 步没有终止程序。\n\n否则，令 $e[r][c]$ 为 Pulibot 程序终止后单元格 $(r, c)$ 的状态。\n评测程序示例按以下格式打印 $H$ 行：\n* 第 $1 + r$ 行 ($0 \\le r \\lt H$)：$e[r][0] \\; e[r][1] \\; \\ldots \\; e[r][W-1]$\n\n## 显示工具\n\n此任务的附件包含有一个名为 `display.py` 的文件。\n调用时，此 Python 脚本会显示 Pulibot 在由评测程序示例的输入所描述的迷宫中的操作。\n为此，工作目录中要有二进制文件 `robot.bin`。\n\n要调用该脚本，请执行以下命令。\n\n```\npython3 display.py\n```\n\n一个简单的图形界面将会出现，主要特性如下：\n\n* 你可以观察整个迷宫的状态。 Pulibot 的当前位置以矩形突出显示。\n* 你可以通过单击箭头按钮或按热键来浏览 Pulibot 的步骤。 你还可以跳转到特定步骤。\n* Pulibot 程序中即将进行的步骤显示在底部。\n它显示当前状态数组及将要执行的指令。\n在最后一步之后，它或者会显示评测程序的错误消息之一，或者在程序成功终止时显示 `Terminated`。\n* 对于代表颜色的每个数字，你可以指定视觉背景颜色以及显示的文本。 显示的文本是一个短字符串，应出现在每个具有那个颜色的单元格。你可以通过以下任一方式指定背景颜色和显示的文本：\n   - 单击 `Colors` 按钮后在对话框窗口中设置它们。\n   - 编辑 `colors.txt` 文件的内容。\n* 要重新加载 `robot.bin`，请使用 `Reload` 按钮。 这可以用来处理 `robot.bin` 的内容发生更改的情况。", "locale": "zh-CN"}}}
{"pid": "P9606", "type": "P", "difficulty": 4, "samples": [["3\nabb\n", "1\n"], ["12\nrecakjenecep\n", "11\n"], ["15\nmurderforajarof\n", "6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["字符串", "2019", "哈希 hashing", "KMP 算法", "Manacher 算法", "ICPC", "CERC"], "title": "[CERC2019] ABB", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[ABB](https://contest.felk.cvut.cz/19cerc/solved/abb.pdf)」**", "description": "Fernando 受雇于滑铁卢大学，负责完成该大学不久前开始的一个开发项目。在校园外，该大学希望为重要的外国游客和合作者建造具有代表性的平房街。\n\n目前，这条街只建了一部分，它从湖岸开始，一直延伸到森林尽头。Fernando 的任务是通过在森林尽头建造更多的平房来完成这条街。所有现有的平房都坐落在街道的一侧，新的平房应该建在同一侧。这些平房有各种各样的类型，漆成各种各样的颜色。\n\n在 Fernando 看来，整条街的布局有点混乱。他担心增加新平房后，它会看起来更加混乱。所以他想通过为新平房选择合适的颜色来增加一些排列顺序。当项目完成时，平房的整个颜色序列将是对称的，也就是说，从街道的两端观察时，颜色序列是相同的。\n\n在其他问题中，Fernando 想知道，在满足平房颜色限制的情况下，他最少需要用来建造和适当染色才能完成项目的新平房数量。\n\n### 简要题意\n\n求使给定小写字母字符串成为回文串需在字符串末尾加入字母的最少数量。", "inputFormat": "第一行包含一个整数 $N\\ (1\\le N\\le 4\\times 10^5)$，代表街道上现有平房的数量。\n\n第二行包含一个由 $N$ 个小写字母（从 `a` 到 `z`）组成的字符串，代表从湖岸开始的街道现有的平房颜色顺序，其中不同的字母表示不同的颜色。", "outputFormat": "输出一个整数，代表满足 Fernando 要求的新平房的最少数量。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2019] ABB", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[ABB](https://contest.felk.cvut.cz/19cerc/solved/abb.pdf)」**", "description": "Fernando 受雇于滑铁卢大学，负责完成该大学不久前开始的一个开发项目。在校园外，该大学希望为重要的外国游客和合作者建造具有代表性的平房街。\n\n目前，这条街只建了一部分，它从湖岸开始，一直延伸到森林尽头。Fernando 的任务是通过在森林尽头建造更多的平房来完成这条街。所有现有的平房都坐落在街道的一侧，新的平房应该建在同一侧。这些平房有各种各样的类型，漆成各种各样的颜色。\n\n在 Fernando 看来，整条街的布局有点混乱。他担心增加新平房后，它会看起来更加混乱。所以他想通过为新平房选择合适的颜色来增加一些排列顺序。当项目完成时，平房的整个颜色序列将是对称的，也就是说，从街道的两端观察时，颜色序列是相同的。\n\n在其他问题中，Fernando 想知道，在满足平房颜色限制的情况下，他最少需要用来建造和适当染色才能完成项目的新平房数量。\n\n### 简要题意\n\n求使给定小写字母字符串成为回文串需在字符串末尾加入字母的最少数量。", "inputFormat": "第一行包含一个整数 $N\\ (1\\le N\\le 4\\times 10^5)$，代表街道上现有平房的数量。\n\n第二行包含一个由 $N$ 个小写字母（从 `a` 到 `z`）组成的字符串，代表从湖岸开始的街道现有的平房颜色顺序，其中不同的字母表示不同的颜色。", "outputFormat": "输出一个整数，代表满足 Fernando 要求的新平房的最少数量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9607", "type": "P", "difficulty": 6, "samples": [["4\n1 2 3 4\n", "50\n"], ["5\n2 4 6 12 3\n", "457\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2019", "线段树", "倍增", "ST 表", "ICPC", "笛卡尔树", "单调栈", "CERC"], "title": "[CERC2019] Be Geeks!", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Be Geeks!](https://contest.felk.cvut.cz/19cerc/solved/begeeks.pdf)」**", "description": "音乐乐队 Be Geeks! 的名字并非偶然，因为所有成员都是真正的数学怪才。除此之外，他们喜欢研究数列的各种性质。下面是他们感兴趣的一个例子：\n- 设 $A$ 是一个非空正整数序列，$A=(a_1, a_2, \\dots, a_N)$。\n- $G(i, j)=\\gcd (a_i, a_{i+1}, \\dots, a_j)$，其中 $1\\le i\\le j\\le N$。\n- $M(i, j)=\\max (a_i, a_{i+1}, \\dots, a_j)$，其中 $1\\le i\\le j\\le N$。\n- $P(i, j)=G(i, j)\\times M(i, j)$，其中 $1\\le i\\le j\\le N$。\n- $F(A)=\\sum P(i, j)[1\\le i\\le j\\le N]$。\n\n给出一个序列 $A$，你需要求出 $F(A)\\bmod 1\\,000\\,000\\,007$ 的值。", "inputFormat": "第一行包含一个整数 $N\\ (1\\le N\\le 2\\times 10^5)$，代表序列 $A$ 的长度。\n\n第二行包含 $N$ 个整数 $a_1, a_2, \\dots, a_N\\ (1\\le a_i\\le 10^9)$，代表序列 $A$。", "outputFormat": "输出一个整数，代表 $F(A)\\bmod 1\\,000\\,000\\,007$ 的值。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2019] Be Geeks!", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Be Geeks!](https://contest.felk.cvut.cz/19cerc/solved/begeeks.pdf)」**", "description": "音乐乐队 Be Geeks! 的名字并非偶然，因为所有成员都是真正的数学怪才。除此之外，他们喜欢研究数列的各种性质。下面是他们感兴趣的一个例子：\n- 设 $A$ 是一个非空正整数序列，$A=(a_1, a_2, \\dots, a_N)$。\n- $G(i, j)=\\gcd (a_i, a_{i+1}, \\dots, a_j)$，其中 $1\\le i\\le j\\le N$。\n- $M(i, j)=\\max (a_i, a_{i+1}, \\dots, a_j)$，其中 $1\\le i\\le j\\le N$。\n- $P(i, j)=G(i, j)\\times M(i, j)$，其中 $1\\le i\\le j\\le N$。\n- $F(A)=\\sum P(i, j)[1\\le i\\le j\\le N]$。\n\n给出一个序列 $A$，你需要求出 $F(A)\\bmod 1\\,000\\,000\\,007$ 的值。", "inputFormat": "第一行包含一个整数 $N\\ (1\\le N\\le 2\\times 10^5)$，代表序列 $A$ 的长度。\n\n第二行包含 $N$ 个整数 $a_1, a_2, \\dots, a_N\\ (1\\le a_i\\le 10^9)$，代表序列 $A$。", "outputFormat": "输出一个整数，代表 $F(A)\\bmod 1\\,000\\,000\\,007$ 的值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9608", "type": "P", "difficulty": 2, "samples": [["5\n4 3\n1 2\n4 5\n3 2\n", "0"], ["6\n1 3\n3 2\n3 4\n4 5\n4 6", "2"], ["7\n1 2\n2 3\n3 4\n4 5\n3 6\n6 7", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2019", "ICPC", "CERC"], "title": "[CERC2019] Bob in Wonderland", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Bob in Wonderland](https://contest.felk.cvut.cz/19cerc/solved/bob.pdf)」**", "description": "众所周知，链条是由相连的环组成的。通常，所有环都具有相同的形状和大小。Bob 是一名铁匠学徒，他正在制作自己的第一条铱链。他遵循传统的链条制作通则。上面写着：\n- 如果没有链条，制作一个环，它将成为你链条的一部分。\n- 如果有一条链，制作一个环，并将其连接到你已有的链中的另一个环上。\n\nBob 做了第一个环。然后，每次他制作另一个环时，他都会将其连接到链条上的其他环上，就像通则告诉他的那样。\n\n当他完成时，他意识到他创造的物体根本不像一条普通的链。为了把链条拉直，他反复地拎起可能是链条两端的两个链环，并试图把它们尽可能地拉开。但在不同的地方，还有更多的“链条”从拉直的部分垂下来。\n\n很明显，Bob 的工作还没有完成，他决定把他制作的物体称为未完成的链条。经过更多的思考，Bob 得出了一个结论，他必须更谨慎地断开一些环，并将它们重新连接到未完成的链条的其余部分，以获得他想要制作的直链。在直链中，每个环最多连接两个其他环，并且直链不能在不断开链环的情况下分离成更多的部分。\n\nBob 现在更加小心了，将用简单的步骤取得进展。在一个步骤中，他将在未完成的链条上，选择一个与环 B 相连接的另一个环 A 。然后，他会将 A 与 B 分开，并将 A 重新连接到未完成的链条中的另一个环 C。除环 B 外，Bob 将在整个步骤中保持其余原先与环 A 相连的环依旧与环 A 相连。\n\nBob 获得直链所需执行的最小步骤数是多少？", "inputFormat": "第一行包含一个整数 $N\\ (1\\le N\\le 3\\times 10^5)$，代表未完成的链条中的环数。所有环标号为 $1, 2, \\dots, N$。\n\n接下来 $N-1$ 行，每行包含两个整数，代表未完成链条中两个相连环的编号，按任意顺序给出。未完成的链条保证只有一个连体（即任意两个环之间都存在路径使他们相连）。", "outputFormat": "输出一个整数，代表将 Bob 未完成的链条转化为直链的最少步骤数。", "hint": "### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/541l6nqd.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2019] Bob in Wonderland", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Bob in Wonderland](https://contest.felk.cvut.cz/19cerc/solved/bob.pdf)」**", "description": "众所周知，链条是由相连的环组成的。通常，所有环都具有相同的形状和大小。Bob 是一名铁匠学徒，他正在制作自己的第一条铱链。他遵循传统的链条制作通则。上面写着：\n- 如果没有链条，制作一个环，它将成为你链条的一部分。\n- 如果有一条链，制作一个环，并将其连接到你已有的链中的另一个环上。\n\nBob 做了第一个环。然后，每次他制作另一个环时，他都会将其连接到链条上的其他环上，就像通则告诉他的那样。\n\n当他完成时，他意识到他创造的物体根本不像一条普通的链。为了把链条拉直，他反复地拎起可能是链条两端的两个链环，并试图把它们尽可能地拉开。但在不同的地方，还有更多的“链条”从拉直的部分垂下来。\n\n很明显，Bob 的工作还没有完成，他决定把他制作的物体称为未完成的链条。经过更多的思考，Bob 得出了一个结论，他必须更谨慎地断开一些环，并将它们重新连接到未完成的链条的其余部分，以获得他想要制作的直链。在直链中，每个环最多连接两个其他环，并且直链不能在不断开链环的情况下分离成更多的部分。\n\nBob 现在更加小心了，将用简单的步骤取得进展。在一个步骤中，他将在未完成的链条上，选择一个与环 B 相连接的另一个环 A 。然后，他会将 A 与 B 分开，并将 A 重新连接到未完成的链条中的另一个环 C。除环 B 外，Bob 将在整个步骤中保持其余原先与环 A 相连的环依旧与环 A 相连。\n\nBob 获得直链所需执行的最小步骤数是多少？", "inputFormat": "第一行包含一个整数 $N\\ (1\\le N\\le 3\\times 10^5)$，代表未完成的链条中的环数。所有环标号为 $1, 2, \\dots, N$。\n\n接下来 $N-1$ 行，每行包含两个整数，代表未完成链条中两个相连环的编号，按任意顺序给出。未完成的链条保证只有一个连体（即任意两个环之间都存在路径使他们相连）。", "outputFormat": "输出一个整数，代表将 Bob 未完成的链条转化为直链的最少步骤数。", "hint": "### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/541l6nqd.png)", "locale": "zh-CN"}}}
{"pid": "P9609", "type": "P", "difficulty": 0, "samples": [["4 6 2\n2 3\n4 4\n\nright 2\n\nyuck!\n", "\n\n\ntop 1\n\nleft 2\n"], ["3 5 1\n2 3\n\nleft 1\n\nleft 1\n\nright 1\n\nyuck!\n", "\n\npass\n\nright 1\n\ntop 1\n\nbottom 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["博弈论", "2019", "交互题", "Special Judge", "ICPC", "CERC"], "title": "[CERC2019] Crimson Sexy Jalapeños（征集交互库/SPJ）", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Crimson Sexy Jalapeños](https://contest.felk.cvut.cz/19cerc/solved/crimson.pdf)」**", "description": "**这是一道 IO 交互题。**\n\n受污染的巧克力游戏的核心是一个经典的巧克力块，由平行于巧克力块两侧的矩形凹槽网格划分成小方块。一些小方块被极度苦涩的物质污染，（几乎）无法消化。\n\n这场比赛由两名选手轮流进行。在一个有效的动作中，一名玩家必须吃掉巧克力块的一部分。允许将当前的巧克力块沿着其中一个凹槽分成两个较小的巧克力块，然后只吃其中一个。玩家如果吃掉了至少含有一个受污染方块的巧克力块，则输掉游戏。\n\n所有被污染的方块的位置在游戏开始时都是已知的。所有其他的方块都可以安全食用。每个玩家都会尽量避免吃一个含有一个或多个受污染方块的巧克力块，因为当这种情况发生时，玩家会不由自主地做出他们个人最厌恶的鬼脸，这会给其他玩家和其他观看比赛的人带来极大的乐趣。\n\n在这个问题上，你要写一个程序来玩“受污染的巧克力”游戏。我们忽略了代码中模拟玩家扮鬼脸和吃巧克力的部分，而只关注获胜的动作。", "inputFormat": "输入的第一行包含整数 $R, C, K\\ (1\\le R, C\\le 10^4;\\ 1\\le K\\le 100)$。$R$ 是行数，$C$ 是列数，$K$ 是巧克力块中被污染的方块数。\n\n接下来 $K$ 行，每行包含两个整数 $A$ 和 $B\\ (1\\le A\\le R, 1\\le B\\le C)$，代表受污染方块的坐标。左上角正方形的坐标为 $(1, 1)$。\n\n其余的输入取决于你的输出。对于你的每一个有效动作，交互库都会给出一行输入，包含对手的有效动作描述或表示对手输掉比赛的字符串 `yuck!`。在后一种情况下，你的程序应该结束。", "outputFormat": "读入巧克力棒的描述后，你可以决定是否要开始游戏。如果你想选择后手，输出一行，包含字符串 `pass`。这个特殊的字符串只能出现在输出的第一行。\n\n在选择先后手后，对于你的每个动作，输出一行，包含有效动作的描述。如果你的程序输出了一行非有效动作的任何其他内容，那么你的程序将会判为 `Wrong Answer`。\n\n在每次输出动作的描述后，清空缓冲区。例如，你可以使用：\n- 对于 $\\text{C++}$：`fflush(stdout)` 或 `cout.flush()`；\n- 对于 $\\text{Java}$：`System.out.flush()`；\n- 对于 $\\text{Python}$：`stdout.flush()`。", "hint": "### 样例格式说明\n\n为了方便说明程序和交互库的交互顺序，样例格式填充了空行。请注意实际交互过程中不会输出空行。\n\n### 样例 $1$ 解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/t8vf1vc8.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2019] Crimson Sexy Jalapeños（征集交互库/SPJ）", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Crimson Sexy Jalapeños](https://contest.felk.cvut.cz/19cerc/solved/crimson.pdf)」**", "description": "**这是一道 IO 交互题。**\n\n受污染的巧克力游戏的核心是一个经典的巧克力块，由平行于巧克力块两侧的矩形凹槽网格划分成小方块。一些小方块被极度苦涩的物质污染，（几乎）无法消化。\n\n这场比赛由两名选手轮流进行。在一个有效的动作中，一名玩家必须吃掉巧克力块的一部分。允许将当前的巧克力块沿着其中一个凹槽分成两个较小的巧克力块，然后只吃其中一个。玩家如果吃掉了至少含有一个受污染方块的巧克力块，则输掉游戏。\n\n所有被污染的方块的位置在游戏开始时都是已知的。所有其他的方块都可以安全食用。每个玩家都会尽量避免吃一个含有一个或多个受污染方块的巧克力块，因为当这种情况发生时，玩家会不由自主地做出他们个人最厌恶的鬼脸，这会给其他玩家和其他观看比赛的人带来极大的乐趣。\n\n在这个问题上，你要写一个程序来玩“受污染的巧克力”游戏。我们忽略了代码中模拟玩家扮鬼脸和吃巧克力的部分，而只关注获胜的动作。", "inputFormat": "输入的第一行包含整数 $R, C, K\\ (1\\le R, C\\le 10^4;\\ 1\\le K\\le 100)$。$R$ 是行数，$C$ 是列数，$K$ 是巧克力块中被污染的方块数。\n\n接下来 $K$ 行，每行包含两个整数 $A$ 和 $B\\ (1\\le A\\le R, 1\\le B\\le C)$，代表受污染方块的坐标。左上角正方形的坐标为 $(1, 1)$。\n\n其余的输入取决于你的输出。对于你的每一个有效动作，交互库都会给出一行输入，包含对手的有效动作描述或表示对手输掉比赛的字符串 `yuck!`。在后一种情况下，你的程序应该结束。", "outputFormat": "读入巧克力棒的描述后，你可以决定是否要开始游戏。如果你想选择后手，输出一行，包含字符串 `pass`。这个特殊的字符串只能出现在输出的第一行。\n\n在选择先后手后，对于你的每个动作，输出一行，包含有效动作的描述。如果你的程序输出了一行非有效动作的任何其他内容，那么你的程序将会判为 `Wrong Answer`。\n\n在每次输出动作的描述后，清空缓冲区。例如，你可以使用：\n- 对于 $\\text{C++}$：`fflush(stdout)` 或 `cout.flush()`；\n- 对于 $\\text{Java}$：`System.out.flush()`；\n- 对于 $\\text{Python}$：`stdout.flush()`。", "hint": "### 样例格式说明\n\n为了方便说明程序和交互库的交互顺序，样例格式填充了空行。请注意实际交互过程中不会输出空行。\n\n### 样例 $1$ 解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/t8vf1vc8.png)", "locale": "zh-CN"}}}
{"pid": "P9610", "type": "P", "difficulty": 0, "samples": [["7 5 0 1\n-1 -1\n1 -1\n0 0\n2 3\n3 4\n10 10\n2 12\n", "5\n"], ["3 1 1 0\n0 0\n2 0\n4 0\n", "2\n"], ["4 1 1 0\n0 0\n1 1\n1 -1\n2 0\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["计算几何", "2019", "ICPC", "CERC"], "title": "[CERC2019] Deep800080", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Deep800080](https://contest.felk.cvut.cz/19cerc/solved/deep.pdf)」**", "description": "Deep800080 的船主 Ian 今晚将在湖上烧烤。有一个狭窄的直码头，从岸边一直延伸到湖中。Ian 认为在码头的某个地点做烧烤是个好主意。\n\n他想测试一下他的新型特制烧烤炭。当它燃烧时，会产生一种独特的浓紫色烟雾，弥漫在水面上。烟雾保证会在烧烤场周围形成一个完美的圆圈。最终，云层将达到一定的最大半径，并在晚上剩下的时间里保持不变，直到更晚的时候消散。\n\n湖中离码头不同距离的位置停泊着多艘船只。Ian 想把烧烤的事通知他们的船员。由于有点懒，他希望烤肉烟雾能帮他做这项工作。Ian 希望，当云层到达一艘船时，船员们能闻到烟雾，这样他们就能立即知道附近有烧烤。\n\nIan 想最大化被警报的船员数量，因此他想在码头上选择一个可以最大化紫色烟雾到达的船只数量的地点放烧烤架。\n\n你可以认为湖面上的船只已经牢牢地固定住了，即当烟雾层在湖面上时它们不会移动。此外，一旦选择了烧烤地点，其位置在整个活动中保持不变。", "inputFormat": "第一行包含四个整数 $N, R, A, B\\ (0\\le N\\le 3\\times 10^5; 1\\le R\\le 10^6)$。$N$ 是湖面上的船只数量，$R$ 是紫色烧烤烟雾的最大半径。你可以认为桥墩又窄又长，因此可以将其视为穿过坐标为 $(0, 0)$ 和 $(A, B)$ 的两个不同点的直线。\n\n接下来 $N$ 行，每行都包含两个整数 $X$ 和 $Y$，用于描述湖上一艘船的坐标。没有两艘船的坐标相同。\n\n所有坐标都是平面中常见的 Cartesian 坐标，它们的绝对值最多为 $10^6$。", "outputFormat": "输出一个整数，代表紫色烧烤烟雾可以到达的船只的最大数量。\n\n如果船的位置在烟雾形成的圆圈内，包括其边界，则视为已到达。你可以认为将烟雾的最大半径增加 $10^{-3}$ 不会改变解决方案。", "hint": "### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/y6yh53az.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2019] Deep800080", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Deep800080](https://contest.felk.cvut.cz/19cerc/solved/deep.pdf)」**", "description": "Deep800080 的船主 Ian 今晚将在湖上烧烤。有一个狭窄的直码头，从岸边一直延伸到湖中。Ian 认为在码头的某个地点做烧烤是个好主意。\n\n他想测试一下他的新型特制烧烤炭。当它燃烧时，会产生一种独特的浓紫色烟雾，弥漫在水面上。烟雾保证会在烧烤场周围形成一个完美的圆圈。最终，云层将达到一定的最大半径，并在晚上剩下的时间里保持不变，直到更晚的时候消散。\n\n湖中离码头不同距离的位置停泊着多艘船只。Ian 想把烧烤的事通知他们的船员。由于有点懒，他希望烤肉烟雾能帮他做这项工作。Ian 希望，当云层到达一艘船时，船员们能闻到烟雾，这样他们就能立即知道附近有烧烤。\n\nIan 想最大化被警报的船员数量，因此他想在码头上选择一个可以最大化紫色烟雾到达的船只数量的地点放烧烤架。\n\n你可以认为湖面上的船只已经牢牢地固定住了，即当烟雾层在湖面上时它们不会移动。此外，一旦选择了烧烤地点，其位置在整个活动中保持不变。", "inputFormat": "第一行包含四个整数 $N, R, A, B\\ (0\\le N\\le 3\\times 10^5; 1\\le R\\le 10^6)$。$N$ 是湖面上的船只数量，$R$ 是紫色烧烤烟雾的最大半径。你可以认为桥墩又窄又长，因此可以将其视为穿过坐标为 $(0, 0)$ 和 $(A, B)$ 的两个不同点的直线。\n\n接下来 $N$ 行，每行都包含两个整数 $X$ 和 $Y$，用于描述湖上一艘船的坐标。没有两艘船的坐标相同。\n\n所有坐标都是平面中常见的 Cartesian 坐标，它们的绝对值最多为 $10^6$。", "outputFormat": "输出一个整数，代表紫色烧烤烟雾可以到达的船只的最大数量。\n\n如果船的位置在烟雾形成的圆圈内，包括其边界，则视为已到达。你可以认为将烟雾的最大半径增加 $10^{-3}$ 不会改变解决方案。", "hint": "### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/y6yh53az.png)", "locale": "zh-CN"}}}
{"pid": "P9611", "type": "P", "difficulty": 4, "samples": [["2 5\n", "9\n"], ["12 12\n", "6\n"], ["555 666\n", "852"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2019", "ICPC", "整除分块", "CERC"], "title": "[CERC2019] Zeldain Garden", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Zeldain Garden](https://contest.felk.cvut.cz/19cerc/solved/garden.pdf)」**", "description": "Boris 是 Rock Anywhere Transport（RAT）公司的首席执行官，该公司专门支持音乐产业。特别是，他们为许多流行的摇滚乐队提供折扣运输。这一次，Boris 不得不将大量优质的墨西哥音乐会扬声器从北海港口转移到遥远的内陆首都。由于预计收货量很大，Boris 不得不组织多辆卡车以确保运输顺畅。运送货物通过该国的众多卡车被称为车队。\n\nBoris 希望通过一个车队一次性运输所有货物，一个扬声器都不留下。欧盟的严格规定要求，在大规模运输音频技术设备的情况下，车队中的所有卡车必须携带完全相同数量的设备。\n\n为了满足所有规定，Boris 希望提前做一些计划，尽管他还不知道扬声器的确切数量，这对车队中卡车的数量和容量的选择有很大影响。为了检查各种情况，对于每个可能的容货量，Boris 计算出所谓的“可变性”，即在不违反规定的情况下，可以为该容货量创建的不同车队的数量。如果两个车队由不同数量的卡车组成，那么它们就不同了。\n\n例如，$6$ 个扬声器货物的可变性为 $4$，因为它们可以均匀地分为 $1$、$2$、$3$ 或 $6$ 辆卡车。\n\n### 简要题意\n\n给定 $l,r$，求 $l\\sim r$ 中所有数的因数个数之和。", "inputFormat": "输入包含一个文本行，包含两个整数 $N, M\\ (1\\le N\\le M\\le 10^{12})$，代表扬声器货物的最小和最大数量。", "outputFormat": "输出一个整数，代表对于 $N$ 和 $M$ 之间（含）的所有货物量的可变性之和。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2019] Zeldain Garden", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Zeldain Garden](https://contest.felk.cvut.cz/19cerc/solved/garden.pdf)」**", "description": "Boris 是 Rock Anywhere Transport（RAT）公司的首席执行官，该公司专门支持音乐产业。特别是，他们为许多流行的摇滚乐队提供折扣运输。这一次，Boris 不得不将大量优质的墨西哥音乐会扬声器从北海港口转移到遥远的内陆首都。由于预计收货量很大，Boris 不得不组织多辆卡车以确保运输顺畅。运送货物通过该国的众多卡车被称为车队。\n\nBoris 希望通过一个车队一次性运输所有货物，一个扬声器都不留下。欧盟的严格规定要求，在大规模运输音频技术设备的情况下，车队中的所有卡车必须携带完全相同数量的设备。\n\n为了满足所有规定，Boris 希望提前做一些计划，尽管他还不知道扬声器的确切数量，这对车队中卡车的数量和容量的选择有很大影响。为了检查各种情况，对于每个可能的容货量，Boris 计算出所谓的“可变性”，即在不违反规定的情况下，可以为该容货量创建的不同车队的数量。如果两个车队由不同数量的卡车组成，那么它们就不同了。\n\n例如，$6$ 个扬声器货物的可变性为 $4$，因为它们可以均匀地分为 $1$、$2$、$3$ 或 $6$ 辆卡车。\n\n### 简要题意\n\n给定 $l,r$，求 $l\\sim r$ 中所有数的因数个数之和。", "inputFormat": "输入包含一个文本行，包含两个整数 $N, M\\ (1\\le N\\le M\\le 10^{12})$，代表扬声器货物的最小和最大数量。", "outputFormat": "输出一个整数，代表对于 $N$ 和 $M$ 之间（含）的所有货物量的可变性之和。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9612", "type": "P", "difficulty": 3, "samples": [["5 2\n6 15 9 666 1\n", "10\n"], ["8 4\n13 30 27 20 11 30 19 10\n", "18\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "2019", "位运算", "ICPC", "CERC"], "title": "[CERC2019] Light Emitting Hindenburg", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Light Emitting Hindenburg](https://contest.felk.cvut.cz/19cerc/solved/hindenburg.pdf)」**", "description": "Lothar 正在组织他朋友的摇滚乐队的音乐会巡演。巡演将于 11 月举行，每天最多有一场音乐会。这次巡演将非常具有代表性，许多音乐家都愿意参加。巡演中的音乐家人数是严格规定的，不能改变。巡演中的每一场音乐会都必须有所有参加巡演的音乐家参加。\n\n对 Lothar 来说，好消息是，候选音乐家的数量至少与巡演中规定的音乐家数量一样多。坏消息是，一个典型的音乐家整个月都没有空，而且各种音乐家的日程安排也大不相同。\n\n很久以前，Lothar 编写了一个计算机调度系统的核心，现在他正在利用它来组织这次巡演。他反复地、有点随机地选择一组指定数量的音乐家，并让系统计算出一个可接受的巡演时间表。该系统取决于一种非常具体的数据格式。音乐家的时间表和巡演时间表用数字编码表示。11 月的日子是按月份的数字标记的：$1, 2, \\dots, 30$。\n\n对于一个给定的音乐家来说，每年 11 月的一天都会被分配一个特定的数字编码。如果音乐家当天空闲，则标签为 $L$ 的一天由整数 $2^{30-L}$ 编码。否则，日期将由 $0$ 编码。音乐家的时间表编码是他或她的所有日期编码的总和。\n\n对于一组给定的音乐家来说，每年 11 月的一天都会被分配一个特定的数字编码。如果该组中的所有音乐家当天都空闲，标签为 $L$ 的一天由整数 $2^{30-L}$ 编码。否则，日期将由 $0$ 编码。组的空闲编码是该组所有日期编码的总和。\n\n出于许多其他微妙的原因，Lothar 认为最好的巡演应该是任意一组音乐家，这组的空闲编码是可能的最大值。", "inputFormat": "第一行包含两个整数 $N, K\\ (1\\le K\\le N\\le 2\\times 10^5)$。$N$ 是可用音乐家的数量，$K$ 是参加巡演的音乐家的规定数量。\n\n第二行包含一个由 $N$ 个正整数组成的序列。序列中的每个整数表示一个音乐家的时间表编码。编码按任意顺序列出。", "outputFormat": "输出一个整数，代表 $K$ 个音乐家的空闲编码值总和的最大值。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2019] Light Emitting Hindenburg", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Light Emitting Hindenburg](https://contest.felk.cvut.cz/19cerc/solved/hindenburg.pdf)」**", "description": "Lothar 正在组织他朋友的摇滚乐队的音乐会巡演。巡演将于 11 月举行，每天最多有一场音乐会。这次巡演将非常具有代表性，许多音乐家都愿意参加。巡演中的音乐家人数是严格规定的，不能改变。巡演中的每一场音乐会都必须有所有参加巡演的音乐家参加。\n\n对 Lothar 来说，好消息是，候选音乐家的数量至少与巡演中规定的音乐家数量一样多。坏消息是，一个典型的音乐家整个月都没有空，而且各种音乐家的日程安排也大不相同。\n\n很久以前，Lothar 编写了一个计算机调度系统的核心，现在他正在利用它来组织这次巡演。他反复地、有点随机地选择一组指定数量的音乐家，并让系统计算出一个可接受的巡演时间表。该系统取决于一种非常具体的数据格式。音乐家的时间表和巡演时间表用数字编码表示。11 月的日子是按月份的数字标记的：$1, 2, \\dots, 30$。\n\n对于一个给定的音乐家来说，每年 11 月的一天都会被分配一个特定的数字编码。如果音乐家当天空闲，则标签为 $L$ 的一天由整数 $2^{30-L}$ 编码。否则，日期将由 $0$ 编码。音乐家的时间表编码是他或她的所有日期编码的总和。\n\n对于一组给定的音乐家来说，每年 11 月的一天都会被分配一个特定的数字编码。如果该组中的所有音乐家当天都空闲，标签为 $L$ 的一天由整数 $2^{30-L}$ 编码。否则，日期将由 $0$ 编码。组的空闲编码是该组所有日期编码的总和。\n\n出于许多其他微妙的原因，Lothar 认为最好的巡演应该是任意一组音乐家，这组的空闲编码是可能的最大值。", "inputFormat": "第一行包含两个整数 $N, K\\ (1\\le K\\le N\\le 2\\times 10^5)$。$N$ 是可用音乐家的数量，$K$ 是参加巡演的音乐家的规定数量。\n\n第二行包含一个由 $N$ 个正整数组成的序列。序列中的每个整数表示一个音乐家的时间表编码。编码按任意顺序列出。", "outputFormat": "输出一个整数，代表 $K$ 个音乐家的空闲编码值总和的最大值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9613", "type": "P", "difficulty": 6, "samples": [["2 3\n1 a\n1 b\n1 c\n", "529\n"], ["3 3\n2 aa\n1 a\n1 a\n", "15625\n"], ["3 1\n2 ab\n", "17524\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["字符串", "动态规划 DP", "2019", "矩阵加速", "矩阵乘法", "AC 自动机", "ICPC", "CERC"], "title": "[CERC2019] K==S", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[K==S](https://contest.felk.cvut.cz/19cerc/solved/kequalss.pdf)」**", "description": "渐进式硬八度摇滚曲调（所谓的“phorts”）是使用特定的音符创作的。这种摇滚风格只建立在 $13$ 个不同的音符音高上，其他音高（在其他八度中）被认为是过时的音乐基石。每个音符可以是长的，也可以是短的。因此，摇滚中正好有 $26$ 个不同的音符。\n\n你将在你朋友的生日之际创作一首 phort 曲调，并与你的乐队在主要的城市广场上表演。在创作词缀时，你需要避免使用某些音乐短语，这些短语由于大型唱片公司赞助的长期研究而受到版权保护。已经证实，这些短语非常朗朗上口，易于记忆，可以用来将听众下意识地与某个特定的音乐公司联系起来，该公司会在他们的制作中使用这些短语。\n\n曲调是一连串的音符。一个音乐短语也是一个音符序列，如果它的音符形成曲调的连续子序列，则它被认为包含在曲调中，这意味着相同的音符以相同的顺序出现在曲调中。\n\n幸运的是，到目前为止，只有少数禁用短语获得了专利。因此，你可以相对自由地创作自己的曲调。特别是，您对某些长度的可接受的曲调的数量感兴趣。可接受的曲调是指任何不包含禁用短语的曲调。曲调的长度等于它所包含的音符数。", "inputFormat": "第一行包含两个整数 $N, Q\\ (1\\le N\\le 10^9, 1\\le Q\\le 100)$。$N$ 是曲调的长度，$Q$ 是禁用音乐短语的数量。\n\n接下来 $Q$ 行，每行都描述了一个禁用短语。禁用短语的描述以一个表示其长度的正整数 $L$ 开头，后跟一个由 $L$ 个小写英文字母组成的字符串。每个字母代表一个摇滚音符，不同的字母代表不同的音符。\n\n所有禁用短语的长度总和不超过 $100$。", "outputFormat": "输出长度为 $N$ 的不同可接受曲调的数量对 $1\\,000\\,000\\,007$ 取模的值。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2019] K==S", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[K==S](https://contest.felk.cvut.cz/19cerc/solved/kequalss.pdf)」**", "description": "渐进式硬八度摇滚曲调（所谓的“phorts”）是使用特定的音符创作的。这种摇滚风格只建立在 $13$ 个不同的音符音高上，其他音高（在其他八度中）被认为是过时的音乐基石。每个音符可以是长的，也可以是短的。因此，摇滚中正好有 $26$ 个不同的音符。\n\n你将在你朋友的生日之际创作一首 phort 曲调，并与你的乐队在主要的城市广场上表演。在创作词缀时，你需要避免使用某些音乐短语，这些短语由于大型唱片公司赞助的长期研究而受到版权保护。已经证实，这些短语非常朗朗上口，易于记忆，可以用来将听众下意识地与某个特定的音乐公司联系起来，该公司会在他们的制作中使用这些短语。\n\n曲调是一连串的音符。一个音乐短语也是一个音符序列，如果它的音符形成曲调的连续子序列，则它被认为包含在曲调中，这意味着相同的音符以相同的顺序出现在曲调中。\n\n幸运的是，到目前为止，只有少数禁用短语获得了专利。因此，你可以相对自由地创作自己的曲调。特别是，您对某些长度的可接受的曲调的数量感兴趣。可接受的曲调是指任何不包含禁用短语的曲调。曲调的长度等于它所包含的音符数。", "inputFormat": "第一行包含两个整数 $N, Q\\ (1\\le N\\le 10^9, 1\\le Q\\le 100)$。$N$ 是曲调的长度，$Q$ 是禁用音乐短语的数量。\n\n接下来 $Q$ 行，每行都描述了一个禁用短语。禁用短语的描述以一个表示其长度的正整数 $L$ 开头，后跟一个由 $L$ 个小写英文字母组成的字符串。每个字母代表一个摇滚音符，不同的字母代表不同的音符。\n\n所有禁用短语的长度总和不超过 $100$。", "outputFormat": "输出长度为 $N$ 的不同可接受曲调的数量对 $1\\,000\\,000\\,007$ 取模的值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9614", "type": "P", "difficulty": 5, "samples": [["CGATA\nATAGC\n", "2\n"], ["CTAGAGTCTA\nTACCGTATAG\n", "7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2019", "图论建模", "ICPC", "CERC"], "title": "[CERC2019] Ponk Warshall", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Ponk Warshall](https://contest.felk.cvut.cz/19cerc/solved/ponk.pdf)」**", "description": "听摇滚乐会改变你的核心 DNA。这一令人震惊和难以置信的事实最近发表在地球上顶级科学期刊之一的《摇滚自然周刊》上。研究的一部分是在摇滚音乐会季前后从志愿者身上采集 DNA 样本。对样品进行处理，并从样品中分离出各种基因。对于每个人，每个基因被分离两次：摇滚季之前的变体和摇滚季之后的变体。这两个变体是配对的，在许多情况下，发现一个变体是该对中另一个变体的某种排列。\n\n研究的下一步是确定排列是如何发生的。普遍的假说认为，排列是由一系列转座组成的，即所谓的交换。交换是指基因中正好有两个核碱基在基因中交换位置的事件（其化学性质尚不完全清楚）。该基因中没有其他核碱基受到交换的影响。两个交换的核碱基的位置可能是完全任意的。\n\n为了预测和观察分子在排列过程中的运动，研究人员需要知道能够在基因中产生特定核碱基排列的理论最小交换次数。我们提醒你，核 DNA 基因是一个由胞嘧啶、鸟嘌呤、腺嘌呤和胸腺嘧啶组成的碱基序列，它们分别编码为 C、G、A 和 T。\n\n### 简要题意\n\n给定两个字符串（字符集只含 `A`、`C`、`G` 或 `T`），求把第一个字符串通过交换两个字母变为第二个字符串的最少交换次数。", "inputFormat": "输入包含两行。每行包含一个由 $N\\ (1\\le N\\le 10^6)$ 个大写字母“A”、“C”、“G”或“T”组成的字符串。这两个字符串代表一对特定的基因版本。第一行代表摇滚季之前的基因，第二行代表来自摇滚季之后同一个人的相同基因。在两个字符串中，每个核碱基的出现次数是相同的。", "outputFormat": "输出一个整数，代表将第一个基因版本转换为第二个基因版本交换的最小数量。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2019] Ponk Warshall", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Ponk Warshall](https://contest.felk.cvut.cz/19cerc/solved/ponk.pdf)」**", "description": "听摇滚乐会改变你的核心 DNA。这一令人震惊和难以置信的事实最近发表在地球上顶级科学期刊之一的《摇滚自然周刊》上。研究的一部分是在摇滚音乐会季前后从志愿者身上采集 DNA 样本。对样品进行处理，并从样品中分离出各种基因。对于每个人，每个基因被分离两次：摇滚季之前的变体和摇滚季之后的变体。这两个变体是配对的，在许多情况下，发现一个变体是该对中另一个变体的某种排列。\n\n研究的下一步是确定排列是如何发生的。普遍的假说认为，排列是由一系列转座组成的，即所谓的交换。交换是指基因中正好有两个核碱基在基因中交换位置的事件（其化学性质尚不完全清楚）。该基因中没有其他核碱基受到交换的影响。两个交换的核碱基的位置可能是完全任意的。\n\n为了预测和观察分子在排列过程中的运动，研究人员需要知道能够在基因中产生特定核碱基排列的理论最小交换次数。我们提醒你，核 DNA 基因是一个由胞嘧啶、鸟嘌呤、腺嘌呤和胸腺嘧啶组成的碱基序列，它们分别编码为 C、G、A 和 T。\n\n### 简要题意\n\n给定两个字符串（字符集只含 `A`、`C`、`G` 或 `T`），求把第一个字符串通过交换两个字母变为第二个字符串的最少交换次数。", "inputFormat": "输入包含两行。每行包含一个由 $N\\ (1\\le N\\le 10^6)$ 个大写字母“A”、“C”、“G”或“T”组成的字符串。这两个字符串代表一对特定的基因版本。第一行代表摇滚季之前的基因，第二行代表来自摇滚季之后同一个人的相同基因。在两个字符串中，每个核碱基的出现次数是相同的。", "outputFormat": "输出一个整数，代表将第一个基因版本转换为第二个基因版本交换的最小数量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9615", "type": "P", "difficulty": 0, "samples": [["4 4 3\n1 2\n3 1\n1 4\n3 4\n3 2 3 4\n1 1\n4 1 2 3 4\n", "2\n1\n1\n"], ["5 1 1\n1 2\n5 5 4 3 2 1\n", "4\n"]], "limits": {"time": [500, 500, 500, 500, 5000, 2000, 1000, 500, 500, 500, 1000, 500, 500, 500, 500, 500, 3000, 500, 500, 500, 500, 500, 500, 500, 3000, 2500, 500, 500, 3000, 3000, 3000, 3000, 1500, 500, 500, 500, 500, 500, 500, 500, 1000, 500, 500, 500, 500, 1000, 500, 500, 500, 500, 500, 2000, 2000, 2000, 2000, 2000, 500, 500, 500, 500, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2019", "O2优化", "ICPC", "CERC"], "title": "[CERC2019] Saba1000kg", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Saba1000kg](https://contest.felk.cvut.cz/19cerc/solved/saba.pdf)」**", "description": "维京岩石运动中有许多不同的风格。古老的冰岛花岗岩石、中世纪丹麦尘土飞扬的维京岩石、晚期芬盖尔深绿色岩石、峡湾巨石雪崩岩石和许多其他岩石……所有受欢迎的风格的完整列表会多次溢出本页。斯堪的纳维亚高等教育部研究了各种风格之间相互影响的方式。他们目前正在计划一项大型实验，届时将有一些经过适当选择的志愿者分布在一个由无人居住的小岛组成的群岛上，研究人员希望在相对较长的一段时间内观察他们的岩石风格和偏好的相互影响。\n\n一个岛上的居民总是相互影响。一些岛对距离足够近，他们的居民可以相互影响，而其他岛对之间的距离可以防止任何直接影响。在后一种情况下，如果有一个或多个其他岛屿有人居住并传递影响，这些岛屿的居民仍然可以相互影响，但只能间接影响。\n\n关于志愿者在各岛屿之间的分配，有几个提案。对于每一种提案，该部都想知道该群岛将形成的独立居民群体的数量。两组岛屿居民，每一组都占据一个或多个岛屿，如果他们不可能相互影响，甚至不是以间接的方式，也被视为独立的（译者注：此处定义了“与其他居民群体独立的居民群体”为无法被其他居民直接或间接影响的居民的岛屿）。\n\n帮助该部评估他们的提案。", "inputFormat": "第一行包含三个整数 $N, E, P\\ (1\\le N\\le 10^5, 0\\le E\\le 10^5, 1\\le P\\le 10^5)$。$N$ 是群岛中的岛屿数量，$E$ 是允许直接影响的岛对数量，$P$ 是要评估的提案数量。这些岛被从 $1$ 到 $N$ 标号。\n\n接下来 $E$ 行指定允许直接相互影响的岛对。这些行中的每一行包含两个整数 $A$ 和 $B$，表示两个不同岛的标号。没有岛对出现超过一次。\n\n接下来 $P$ 行，每行都描述了一个提案。每行以该提案下居住的岛屿数量 $M\\ (1\\le M\\le N)$ 开始，然后包含 $M$ 个居住岛屿的成对不同标号。根据各自的提案，不会有其他岛屿居住（译者注：即只考虑每次询问的岛屿能否传递影响）。\n\n所有提案的大小之和（所有数字 $M$）不超过 $10^5$。", "outputFormat": "对于每个提案，输出一行，代表该群岛将形成的独立群体的数量。", "hint": null, "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2019] Saba1000kg", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Saba1000kg](https://contest.felk.cvut.cz/19cerc/solved/saba.pdf)」**", "description": "维京岩石运动中有许多不同的风格。古老的冰岛花岗岩石、中世纪丹麦尘土飞扬的维京岩石、晚期芬盖尔深绿色岩石、峡湾巨石雪崩岩石和许多其他岩石……所有受欢迎的风格的完整列表会多次溢出本页。斯堪的纳维亚高等教育部研究了各种风格之间相互影响的方式。他们目前正在计划一项大型实验，届时将有一些经过适当选择的志愿者分布在一个由无人居住的小岛组成的群岛上，研究人员希望在相对较长的一段时间内观察他们的岩石风格和偏好的相互影响。\n\n一个岛上的居民总是相互影响。一些岛对距离足够近，他们的居民可以相互影响，而其他岛对之间的距离可以防止任何直接影响。在后一种情况下，如果有一个或多个其他岛屿有人居住并传递影响，这些岛屿的居民仍然可以相互影响，但只能间接影响。\n\n关于志愿者在各岛屿之间的分配，有几个提案。对于每一种提案，该部都想知道该群岛将形成的独立居民群体的数量。两组岛屿居民，每一组都占据一个或多个岛屿，如果他们不可能相互影响，甚至不是以间接的方式，也被视为独立的（译者注：此处定义了“与其他居民群体独立的居民群体”为无法被其他居民直接或间接影响的居民的岛屿）。\n\n帮助该部评估他们的提案。", "inputFormat": "第一行包含三个整数 $N, E, P\\ (1\\le N\\le 10^5, 0\\le E\\le 10^5, 1\\le P\\le 10^5)$。$N$ 是群岛中的岛屿数量，$E$ 是允许直接影响的岛对数量，$P$ 是要评估的提案数量。这些岛被从 $1$ 到 $N$ 标号。\n\n接下来 $E$ 行指定允许直接相互影响的岛对。这些行中的每一行包含两个整数 $A$ 和 $B$，表示两个不同岛的标号。没有岛对出现超过一次。\n\n接下来 $P$ 行，每行都描述了一个提案。每行以该提案下居住的岛屿数量 $M\\ (1\\le M\\le N)$ 开始，然后包含 $M$ 个居住岛屿的成对不同标号。根据各自的提案，不会有其他岛屿居住（译者注：即只考虑每次询问的岛屿能否传递影响）。\n\n所有提案的大小之和（所有数字 $M$）不超过 $10^5$。", "outputFormat": "对于每个提案，输出一行，代表该群岛将形成的独立群体的数量。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P9616", "type": "P", "difficulty": 0, "samples": [["4 3 0 3 4\n0 0\n4 0\n4 4\n0 4\n", "4.828427124746\n"], ["6 1 1 5 5\n0 0\n2 0\n2 4\n6 4\n6 6\n0 6\n", "6.292528739884\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2019", "Special Judge", "ICPC", "CERC"], "title": "[CERC2019] Screamers in the Storm", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Screamers in the Storm](https://contest.felk.cvut.cz/19cerc/solved/screamers.pdf)」**", "description": "你可能不知道，每天在城市里看到的“普通”城市鸽子的正式名称其实是“岩鸽”。岩鸽 Rocky Dave 爱上了 Columba Livia——一只对岩石、鸽子及相关事物有着浓厚兴趣的年轻雌性岩鸽。一个阳光明媚的秋日下午，我们恰巧发现它们同时出现在城市郊区同一栋建筑的屋顶上。\n\n为了炫耀自信的矫健步态，Rocky Dave 决定不直接飞向心仪对象，而是步行前往。这屋顶并非现代平顶，而是由斜坡组成的经典式样。由于建筑由多个较小结构连接而成，其平面布局略显复杂。因此，Dave 计划走向 Columba Livia 的“直线”，仅当从上方俯视时呈现笔直状态。Rocky Dave 可能需要攀爬屋脊、翻越顶峰、下到另一侧的天沟，然后再次上行，如此往复。\n\n我们掌握了建筑精确的平面图、屋顶斜坡角度（所有角度相同），以及两位主角在屋顶的初始位置。根据这些数据，请计算 Rocky Dave 旅程的精确长度（假设 Columba Livia 在 Rocky Dave 抵达前不会离开原位）。\n\n若路径超出建筑边界，根据 Dave 的计划，每当抵达屋顶边缘的雨水槽时，他将沿朝向 Columba Livia 的方向保持相同高度直线飞行，直至抵达建筑另一侧的雨水槽，随后继续步行旅程。\n\n为使情境明确，现提供屋顶几何模型：设 $Z$ 为 $x$-$y$ 平面上的简单多边形（简单多边形指边界为不自交封闭曲线的多边形）。可接受金字塔指底面为 $x$-$y$ 平面上轴对齐正方形、顶点位于底面中心正上方的金字塔，其高度恰好等于底面边长的一半，且底面任意部分不得超出 $Z$ 范围。需注意，可接受金字塔的底面边长和高度可能为零，此时仅包含一个顶点（即塔尖）。\n\n当且仅当某点 $X$（位于 $x$-$y$ 平面或上方）是可接受金字塔的顶点，且不存在 $X$ 正上方的点属于其他可接受金字塔的顶点时，该点被视为 $Z$ 的屋顶构成点。", "inputFormat": "第一行包含五个整数。第一个整数 $N\\ (4\\le N\\le 400)$ 代表建筑平面图边缘在 $x$-$y$ 平面上构成的多边形的角点数量。随后两个整数代表 Rocky Dave 的 $x$ 和 $y$ 坐标，最后两个代表 Columba Livia 的 $x$ 和 $y$ 坐标。\n\n接下来 $N$ 行，每行包含多边形一个角点的 $x$ 和 $y$ 坐标。所有点按逆时针方向列出。建筑的每条边均与坐标轴平行。\n\n两只鸽子均不位于给定多边形之外。所有输入坐标均为绝对值不超过 $10^5$ 的整数。", "outputFormat": "输出 Rocky Dave 旅程的长度。答案的绝对误差或相对误差需小于 $10^{-7}$。", "hint": "### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/vytjjbu0.png)\n\n翻译由 DeepSeek 生成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2019] Screamers in the Storm", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[Screamers in the Storm](https://contest.felk.cvut.cz/19cerc/solved/screamers.pdf)」**", "description": "你可能不知道，每天在城市里看到的“普通”城市鸽子的正式名称其实是“岩鸽”。岩鸽 Rocky Dave 爱上了 Columba Livia——一只对岩石、鸽子及相关事物有着浓厚兴趣的年轻雌性岩鸽。一个阳光明媚的秋日下午，我们恰巧发现它们同时出现在城市郊区同一栋建筑的屋顶上。\n\n为了炫耀自信的矫健步态，Rocky Dave 决定不直接飞向心仪对象，而是步行前往。这屋顶并非现代平顶，而是由斜坡组成的经典式样。由于建筑由多个较小结构连接而成，其平面布局略显复杂。因此，Dave 计划走向 Columba Livia 的“直线”，仅当从上方俯视时呈现笔直状态。Rocky Dave 可能需要攀爬屋脊、翻越顶峰、下到另一侧的天沟，然后再次上行，如此往复。\n\n我们掌握了建筑精确的平面图、屋顶斜坡角度（所有角度相同），以及两位主角在屋顶的初始位置。根据这些数据，请计算 Rocky Dave 旅程的精确长度（假设 Columba Livia 在 Rocky Dave 抵达前不会离开原位）。\n\n若路径超出建筑边界，根据 Dave 的计划，每当抵达屋顶边缘的雨水槽时，他将沿朝向 Columba Livia 的方向保持相同高度直线飞行，直至抵达建筑另一侧的雨水槽，随后继续步行旅程。\n\n为使情境明确，现提供屋顶几何模型：设 $Z$ 为 $x$-$y$ 平面上的简单多边形（简单多边形指边界为不自交封闭曲线的多边形）。可接受金字塔指底面为 $x$-$y$ 平面上轴对齐正方形、顶点位于底面中心正上方的金字塔，其高度恰好等于底面边长的一半，且底面任意部分不得超出 $Z$ 范围。需注意，可接受金字塔的底面边长和高度可能为零，此时仅包含一个顶点（即塔尖）。\n\n当且仅当某点 $X$（位于 $x$-$y$ 平面或上方）是可接受金字塔的顶点，且不存在 $X$ 正上方的点属于其他可接受金字塔的顶点时，该点被视为 $Z$ 的屋顶构成点。", "inputFormat": "第一行包含五个整数。第一个整数 $N\\ (4\\le N\\le 400)$ 代表建筑平面图边缘在 $x$-$y$ 平面上构成的多边形的角点数量。随后两个整数代表 Rocky Dave 的 $x$ 和 $y$ 坐标，最后两个代表 Columba Livia 的 $x$ 和 $y$ 坐标。\n\n接下来 $N$ 行，每行包含多边形一个角点的 $x$ 和 $y$ 坐标。所有点按逆时针方向列出。建筑的每条边均与坐标轴平行。\n\n两只鸽子均不位于给定多边形之外。所有输入坐标均为绝对值不超过 $10^5$ 的整数。", "outputFormat": "输出 Rocky Dave 旅程的长度。答案的绝对误差或相对误差需小于 $10^{-7}$。", "hint": "### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/vytjjbu0.png)\n\n翻译由 DeepSeek 生成。", "locale": "zh-CN"}}}
{"pid": "P9617", "type": "P", "difficulty": 0, "samples": [["5\n1 2 3 4 5\n", "123\n"], ["6\n5 4 9 1 7 4\n", "121\n132\n211\n212\n213\n231\n312\n321\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 2000, 2000, 1500, 500, 500, 1000, 1500, 1000, 1000, 1500, 1500, 1500, 1000, 1000, 2000, 2000, 500, 1000, 500, 500, 1500, 1500, 1000, 2000, 2000, 1000, 1500, 1500, 2000, 1000, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 2500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2019", "O2优化", "ICPC", "CERC"], "title": "[CERC2019] The Bugs", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[The Bugs](https://contest.felk.cvut.cz/19cerc/solved/thebugs.pdf)」**", "description": "一艘涂有明亮塑料柠檬色的潜艇正在调查海洋深度，并测量水中塑料 yocto 颗粒的浓度。每个测量值（由于巧妙地选择了单位）都是一个正整数。\n\n测量系统是最新的，很少测试，容易出错。项目管理层怀疑它充满了漏洞。他们发现自己陷入了困境。Mother Mary 也怀疑里面满是漏洞。大家都喊：救命！\n\n为了发现和修复这些漏洞，他们聚集在一起，决定采用浓度的测量序列，并分析测量序列中出现的所有三元组。\n\n- 三元组是由三个整数组成的序列。\n- 每个三元组都与其特征组相关。\n- 三元组 $(x, y, z)$ 的特征组是三元组 $(\\text{sgn}(y−x) ,\\text{sgn}(z−y), \\text{sgn}(z−x))$。对于 $x$ 的负值、零值或正值，$\\text{sgn}(x)$ 函数的值分别为 $−1$、$0$ 或 $1$，即 $\\text{sgn}(x)=\\begin{cases}0&x=0\\\\\\dfrac{x}{|x|}&x\\ne 0\\end{cases}$。\n- 三元组 $(x_1, y_1, z_1)$ 小于三元组 $(x_2, y_2, z_2)$，当且仅当三元组 $(x_1-x_2, y_1-y_2, z_1-z_2)$ 中的第一个非零值为负。\n- 三元组 $T$ 的标记组是一个最小的三元组，它的值都为正，并且其特征组等于 $T$ 的特征组。\n\n一个被测三元组是作为测量序列的子序列的三元组。也就是说，这个三元组的元素以它们在三元组中出现的相同顺序出现在测量序列中，但在序列中它们不一定相互跟随。\n\n在对它们进行分析之前，被测三元组根据它们的标记组进行分组。管理层希望提前知道所有测量的三元组的标记组的集合。", "inputFormat": "第一行包含一个整数 $N\\ (3\\le N\\le 2\\times 10^5)$，代表测量序列的长度。\n\n第二行包含 $N$ 个整数 $x_1, x_2, x_N\\ (1\\le x_i\\le 10^9)$，代表测量序列。", "outputFormat": "按递增顺序输出所有被测三元组的所有不同标记组，这些标记组可以从给定的测量序列中获得，每行一个。输出标记组时，其连续元素之间不应有空格。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2019] The Bugs", "background": "**题目译自 [CERC 2019](https://contest.felk.cvut.cz/19cerc/solved.html) 「[The Bugs](https://contest.felk.cvut.cz/19cerc/solved/thebugs.pdf)」**", "description": "一艘涂有明亮塑料柠檬色的潜艇正在调查海洋深度，并测量水中塑料 yocto 颗粒的浓度。每个测量值（由于巧妙地选择了单位）都是一个正整数。\n\n测量系统是最新的，很少测试，容易出错。项目管理层怀疑它充满了漏洞。他们发现自己陷入了困境。Mother Mary 也怀疑里面满是漏洞。大家都喊：救命！\n\n为了发现和修复这些漏洞，他们聚集在一起，决定采用浓度的测量序列，并分析测量序列中出现的所有三元组。\n\n- 三元组是由三个整数组成的序列。\n- 每个三元组都与其特征组相关。\n- 三元组 $(x, y, z)$ 的特征组是三元组 $(\\text{sgn}(y−x) ,\\text{sgn}(z−y), \\text{sgn}(z−x))$。对于 $x$ 的负值、零值或正值，$\\text{sgn}(x)$ 函数的值分别为 $−1$、$0$ 或 $1$，即 $\\text{sgn}(x)=\\begin{cases}0&x=0\\\\\\dfrac{x}{|x|}&x\\ne 0\\end{cases}$。\n- 三元组 $(x_1, y_1, z_1)$ 小于三元组 $(x_2, y_2, z_2)$，当且仅当三元组 $(x_1-x_2, y_1-y_2, z_1-z_2)$ 中的第一个非零值为负。\n- 三元组 $T$ 的标记组是一个最小的三元组，它的值都为正，并且其特征组等于 $T$ 的特征组。\n\n一个被测三元组是作为测量序列的子序列的三元组。也就是说，这个三元组的元素以它们在三元组中出现的相同顺序出现在测量序列中，但在序列中它们不一定相互跟随。\n\n在对它们进行分析之前，被测三元组根据它们的标记组进行分组。管理层希望提前知道所有测量的三元组的标记组的集合。", "inputFormat": "第一行包含一个整数 $N\\ (3\\le N\\le 2\\times 10^5)$，代表测量序列的长度。\n\n第二行包含 $N$ 个整数 $x_1, x_2, x_N\\ (1\\le x_i\\le 10^9)$，代表测量序列。", "outputFormat": "按递增顺序输出所有被测三元组的所有不同标记组，这些标记组可以从给定的测量序列中获得，每行一个。输出标记组时，其连续元素之间不应有空格。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9618", "type": "P", "difficulty": 4, "samples": [["5 3 3\n5 1 2 3 4 5\n2 1 3\n3 2 4 5\n1 1 1\n3 0 2\n1 5 2\n", "4\n9\n4\n"], ["10 7 10\n10 1 2 3 4 5 6 7 8 9 10\n5 3 8 5 1 6\n2 1 6\n4 3 7 8 5\n1 1\n2 10 2\n6 8 4 7 3 1 5\n5 10 6\n17 14 0\n11 14 5\n8 8 3\n8 13 9\n11 2 9\n7 1 6\n11 11 8\n15 3 0\n0 17 4\n", "35\n153\n69\n48\n53\n57\n36\n66\n135\n0\n"], ["10 7 10\n10 1 2 3 4 5 6 7 8 9 10\n3 2 7 1\n3 5 10 9\n2 2 7\n5 4 8 1 7 2\n3 10 9 4\n4 2 1 7 8\n18 6 0\n16 11 0\n18 1 0\n14 0 0\n19 14 0\n3 2 0\n18 15 0\n5 18 0\n2 17 0\n20 10 0\n", "162\n144\n162\n126\n171\n27\n162\n45\n18\n180\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "地铁", "background": "> 两年级生 孤单一人\n>\n> 仰望上空 陋市苍穹\n>\n> 在宇宙这个约会室中\n>\n> Maybe 我们只是刚好没能邂逅呢", "description": "著名工程学专家 625OutContradiction 设计了一张地铁交通网 $G$．$G$ 拥有 $n$ 个站点和 $m$ 条地铁线路．\n\n第 $i$ 条地铁线路 $P_i$ 会经过交通网上的若干站点，形如 $P_i=(u_1,u_2,u_3,...,u_{k_i})(k_i>0)$：每两个相邻站点 $u_j,u_{j+1}(j<k_i)$ 之间存在一段属于线路 $i$ 的从 $u_j$ 通向 $u_{j+1}$ 的单向地铁轨道．保证一条地铁线路不重复经过同一站点．但一个站点可能被若干条地铁线路经过．\n\n丹羽和艾莉欧准备从 $1$ 号站点前往 $n$ 号站点．然而他们的自行车坏掉了，只好准备乘坐地铁．现在他们需要决定出行的方案．\n\n一种出行方案具体是这样的：从 $1$ 号站点出发，选定一条经过 $1$ 号站点的地铁线路并开始乘坐地铁．沿当前地铁线路乘坐地铁的过程中，可以选择换乘其他任意一条经过当前站点的地铁线路．要求最终到达 $n$ 号站点．乘坐地铁过程中重复经过某一站点或某段地铁轨道是被允许的．\n\n**请注意：从 $1$ 号站点出发，第一次乘坐地铁不被算作换乘．**\n\n艾莉欧提出了 $q$ 个问题．对于每个问题，艾莉欧会提供三个参数 $a, b, c$．在这次问题中，一个出行方案如果经过了 $x$ 段地铁轨道并进行了 $y$ 次换乘，那么它的疲惫值为 $ax+by$．您需要回答换乘次数不超过 $c$ 的出行方案中最小的疲惫值是多少．", "inputFormat": "第一行三个整数 $n, m, q$．\n\n接下来 $m$ 行，第 $i$ 行形如：$k_i,u_1,u_2,u_3,...,u_{k_i}$．\n表示一条地铁线路．\n\n接下来 $q$ 行，每行三个整数，表示 $a,b,c$．", "outputFormat": "$q$ 行，对应每个问题的回答．", "hint": "### 样例 #1 说明\n$1\\rightarrow 2\\rightarrow 3\\rightarrow 4\\rightarrow 5$ 是给出的第一条地铁线路，$1\\rightarrow 3$，$2\\rightarrow 4\\rightarrow 5$ 是第二三条地铁线路．\n\n对于第一二组询问，均存在一种最优的出行方案为，在 $1$ 站点搭乘第二条地铁线路到达 $3$ 站点，在 $3$ 站点换乘第一条地铁线路到达终点；共经过 $3$ 段地铁轨道，并进行了 $1$ 次换乘，故第一二组询问的答案分别为 $3\\times 1+1\\times 1=4$，$3\\times 3+1\\times 0=9$．对于第三组询问，由于换乘的代价较大，最优的方案为顺着第一条地铁线路一直通向终点，途径 $4$ 段地铁轨道，答案为 $4$．\n\n### 数据点约束\n对于所有数据满足：\n\n$1\\le n \\le 10^5$，$1\\le m \\le 10^4$，$1\\le q \\le 10^5$，$\\sum k_i \\le 3\\times 10^5$．\n\n$0 \\le a,b \\le 10^6$，$0 \\le c \\le 20$．\n\n---\n对于 $10\\%$ 的数据满足：$n \\le 20$，$\\sum k_i \\le 40$，$q \\le 30$．\n\n---\n\n对于另外 $20\\%$ 的数据满足：$c=0$．\n\n---\n\n对于另外 $30\\%$ 的数据满足：$q=1$．\n\n---\n\n题目中可能存在只经过一个地铁站的地铁线路．这种线路可以直接忽视．数据保证：对于任意一组询问，存在一条合法的路线可以到达终点．", "locale": "zh-CN", "translations": {"zh-CN": {"title": "地铁", "background": "> 两年级生 孤单一人\n>\n> 仰望上空 陋市苍穹\n>\n> 在宇宙这个约会室中\n>\n> Maybe 我们只是刚好没能邂逅呢", "description": "著名工程学专家 625OutContradiction 设计了一张地铁交通网 $G$．$G$ 拥有 $n$ 个站点和 $m$ 条地铁线路．\n\n第 $i$ 条地铁线路 $P_i$ 会经过交通网上的若干站点，形如 $P_i=(u_1,u_2,u_3,...,u_{k_i})(k_i>0)$：每两个相邻站点 $u_j,u_{j+1}(j<k_i)$ 之间存在一段属于线路 $i$ 的从 $u_j$ 通向 $u_{j+1}$ 的单向地铁轨道．保证一条地铁线路不重复经过同一站点．但一个站点可能被若干条地铁线路经过．\n\n丹羽和艾莉欧准备从 $1$ 号站点前往 $n$ 号站点．然而他们的自行车坏掉了，只好准备乘坐地铁．现在他们需要决定出行的方案．\n\n一种出行方案具体是这样的：从 $1$ 号站点出发，选定一条经过 $1$ 号站点的地铁线路并开始乘坐地铁．沿当前地铁线路乘坐地铁的过程中，可以选择换乘其他任意一条经过当前站点的地铁线路．要求最终到达 $n$ 号站点．乘坐地铁过程中重复经过某一站点或某段地铁轨道是被允许的．\n\n**请注意：从 $1$ 号站点出发，第一次乘坐地铁不被算作换乘．**\n\n艾莉欧提出了 $q$ 个问题．对于每个问题，艾莉欧会提供三个参数 $a, b, c$．在这次问题中，一个出行方案如果经过了 $x$ 段地铁轨道并进行了 $y$ 次换乘，那么它的疲惫值为 $ax+by$．您需要回答换乘次数不超过 $c$ 的出行方案中最小的疲惫值是多少．", "inputFormat": "第一行三个整数 $n, m, q$．\n\n接下来 $m$ 行，第 $i$ 行形如：$k_i,u_1,u_2,u_3,...,u_{k_i}$．\n表示一条地铁线路．\n\n接下来 $q$ 行，每行三个整数，表示 $a,b,c$．", "outputFormat": "$q$ 行，对应每个问题的回答．", "hint": "### 样例 #1 说明\n$1\\rightarrow 2\\rightarrow 3\\rightarrow 4\\rightarrow 5$ 是给出的第一条地铁线路，$1\\rightarrow 3$，$2\\rightarrow 4\\rightarrow 5$ 是第二三条地铁线路．\n\n对于第一二组询问，均存在一种最优的出行方案为，在 $1$ 站点搭乘第二条地铁线路到达 $3$ 站点，在 $3$ 站点换乘第一条地铁线路到达终点；共经过 $3$ 段地铁轨道，并进行了 $1$ 次换乘，故第一二组询问的答案分别为 $3\\times 1+1\\times 1=4$，$3\\times 3+1\\times 0=9$．对于第三组询问，由于换乘的代价较大，最优的方案为顺着第一条地铁线路一直通向终点，途径 $4$ 段地铁轨道，答案为 $4$．\n\n### 数据点约束\n对于所有数据满足：\n\n$1\\le n \\le 10^5$，$1\\le m \\le 10^4$，$1\\le q \\le 10^5$，$\\sum k_i \\le 3\\times 10^5$．\n\n$0 \\le a,b \\le 10^6$，$0 \\le c \\le 20$．\n\n---\n对于 $10\\%$ 的数据满足：$n \\le 20$，$\\sum k_i \\le 40$，$q \\le 30$．\n\n---\n\n对于另外 $20\\%$ 的数据满足：$c=0$．\n\n---\n\n对于另外 $30\\%$ 的数据满足：$q=1$．\n\n---\n\n题目中可能存在只经过一个地铁站的地铁线路．这种线路可以直接忽视．数据保证：对于任意一组询问，存在一条合法的路线可以到达终点．", "locale": "zh-CN"}}}
