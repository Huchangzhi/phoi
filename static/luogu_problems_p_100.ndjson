{"pid": "P3028", "type": "P", "difficulty": 2, "samples": [["4 \n3 5 \n4 8 \n1 2 \n5 10 \n", "3 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2010", "USACO"], "title": "[USACO10OCT] Soda Machine G", "background": "", "description": "To meet the ever-growing demands of his N (1 &amp;lt;= N &amp;lt;= 50,000) cows, Farmer John has bought them a new soda machine. He wants to figure out the perfect place to install the machine.\n\nThe field in which the cows graze can be represented as a one-dimensional number line. Cow i grazes in the range A\\_i..B\\_i (1 &amp;lt;= A\\_i &amp;lt;= B\\_i; A\\_i &amp;lt;= B\\_i &amp;lt;= 1,000,000,000) (a range that includes its endpoints), and FJ can place the soda machine at any integer point in the range 1..1,000,000,000.  Since cows are extremely lazy and try to move as little as possible, each cow would like to have the soda machine installed within her grazing range.\n\nSadly, it is not always possible to satisfy every cow's desires. Thus FJ would like to know the largest number of cows that can be satisfied.\n\nTo demonstrate the issue, consider four cows with grazing ranges 3..5, 4..8, 1..2, and 5..10; below is a schematic of their grazing ranges:\n\n```cpp\n\n         1   2   3   4   5   6   7   8   9  10  11  12  13\n         |---|---|---|---|---|---|---|---|---|---|---|---|-...\n                 aaaaaaaaa\n                     bbbbbbbbbbbbbbbbb\n         ccccc           ddddddddddddddddddddd\n```\nAs can be seen, the first, second and fourth cows share the point 5, but the third cow's grazing range is disjoint.  Thus, a maximum of 3 cows can have the soda machine within their grazing range.\n\n\n有N个人要去膜拜JZ，他们不知道JZ会出现在哪里，因此每个人有一个活动范围，只要JZ出现在这个范围内就能被膜拜，\n\n伟大的JZ当然希望膜拜他的人越多越好，但是JZ不能分身，因此只能选择一个位置出现，他最多可以被多少人膜拜呢，\n\n这个简单的问题JZ当然交给你了\n", "inputFormat": "\\* Line 1: A single integer: N\n\n\\* Lines 2..N+1: Line i+1 contains two space-separated integers: A\\_i and B\\_i\n", "outputFormat": "\\* Line 1: A single integer representing the largest number of cows whose grazing intervals can all contain the soda machine.\n", "hint": "If the soda machine is placed at location 5, cows 1, 2, and 4 can be satisfied. It is impossible to satisfy all four cows.\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO10OCT] Soda Machine G", "background": "", "description": "To meet the ever-growing demands of his $N$ ($1 \\le N \\le 50{,}000$) cows, Farmer John has bought them a new soda machine. He wants to figure out the perfect place to install the machine.\n\nThe field in which the cows graze can be represented as a one-dimensional number line. Cow $i$ grazes in the range $A_i..B_i$ ($1 \\le A_i \\le B_i$; $A_i \\le B_i \\le 1{,}000{,}000{,}000$), where the range includes its endpoints, and FJ can place the soda machine at any integer point in the range $1..1{,}000{,}000{,}000$. Since cows are extremely lazy and try to move as little as possible, each cow would like to have the soda machine installed within her grazing range.\n\nSadly, it is not always possible to satisfy every cow's desires. Thus FJ would like to know the largest number of cows that can be satisfied.\n\nTo demonstrate the issue, consider four cows with grazing ranges $3..5$, $4..8$, $1..2$, and $5..10$; below is a schematic of their grazing ranges:\n\n```cpp\n\n         1   2   3   4   5   6   7   8   9  10  11  12  13\n         |---|---|---|---|---|---|---|---|---|---|---|---|-...\n                 aaaaaaaaa\n                     bbbbbbbbbbbbbbbbb\n         ccccc           ddddddddddddddddddddd\n```\n\nAs can be seen, the first, second, and fourth cows share the point $5$, but the third cow's grazing range is disjoint. Thus, a maximum of $3$ cows can have the soda machine within their grazing range.\n\nThere are $N$ people who want to worship JZ. They do not know where JZ will appear, so each person has an activity range. As long as JZ appears within this range, that person can worship him. The great JZ certainly hopes that as many people as possible will worship him. However, JZ cannot be in multiple places at once and can choose only one position to appear. What is the maximum number of people who can worship him?", "inputFormat": "- Line 1: A single integer $N$.\n- Lines $2..N+1$: Line $i+1$ contains two space-separated integers $A_i$ and $B_i$.", "outputFormat": "- Line 1: A single integer representing the largest number of cows whose grazing intervals can all contain the soda machine.", "hint": "If the soda machine is placed at location $5$, cows $1$, $2$, and $4$ can be satisfied. It is impossible to satisfy all four cows.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO10OCT] Soda Machine G", "background": "", "description": "To meet the ever-growing demands of his N (1 &amp;lt;= N &amp;lt;= 50,000) cows, Farmer John has bought them a new soda machine. He wants to figure out the perfect place to install the machine.\n\nThe field in which the cows graze can be represented as a one-dimensional number line. Cow i grazes in the range A\\_i..B\\_i (1 &amp;lt;= A\\_i &amp;lt;= B\\_i; A\\_i &amp;lt;= B\\_i &amp;lt;= 1,000,000,000) (a range that includes its endpoints), and FJ can place the soda machine at any integer point in the range 1..1,000,000,000.  Since cows are extremely lazy and try to move as little as possible, each cow would like to have the soda machine installed within her grazing range.\n\nSadly, it is not always possible to satisfy every cow's desires. Thus FJ would like to know the largest number of cows that can be satisfied.\n\nTo demonstrate the issue, consider four cows with grazing ranges 3..5, 4..8, 1..2, and 5..10; below is a schematic of their grazing ranges:\n\n```cpp\n\n         1   2   3   4   5   6   7   8   9  10  11  12  13\n         |---|---|---|---|---|---|---|---|---|---|---|---|-...\n                 aaaaaaaaa\n                     bbbbbbbbbbbbbbbbb\n         ccccc           ddddddddddddddddddddd\n```\nAs can be seen, the first, second and fourth cows share the point 5, but the third cow's grazing range is disjoint.  Thus, a maximum of 3 cows can have the soda machine within their grazing range.\n\n\n有N个人要去膜拜JZ，他们不知道JZ会出现在哪里，因此每个人有一个活动范围，只要JZ出现在这个范围内就能被膜拜，\n\n伟大的JZ当然希望膜拜他的人越多越好，但是JZ不能分身，因此只能选择一个位置出现，他最多可以被多少人膜拜呢，\n\n这个简单的问题JZ当然交给你了\n", "inputFormat": "\\* Line 1: A single integer: N\n\n\\* Lines 2..N+1: Line i+1 contains two space-separated integers: A\\_i and B\\_i\n", "outputFormat": "\\* Line 1: A single integer representing the largest number of cows whose grazing intervals can all contain the soda machine.\n", "hint": "If the soda machine is placed at location 5, cows 1, 2, and 4 can be satisfied. It is impossible to satisfy all four cows.\n", "locale": "zh-CN"}}}
{"pid": "P3029", "type": "P", "difficulty": 3, "samples": [["6 \n25 7 \n26 1 \n15 1 \n22 3 \n20 1 \n30 1 \n", "4 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "USACO", "离散化", "队列", "双指针 two-pointer"], "title": "[USACO11NOV] Cow Lineup S", "background": "", "description": "Farmer John has hired a professional photographer to take a picture of some of his cows.  Since FJ's cows represent a variety of different breeds, he would like the photo to contain at least one cow from each distinct breed present in his herd.\n\nFJ's N cows are all standing at various positions along a line, each described by an integer position (i.e., its x coordinate) as well as an integer breed ID.  FJ plans to take a photograph of a contiguous range of cows along the line.  The cost of this photograph is equal its size -- that is, the difference between the maximum and minimum x coordinates of the cows in the range of the photograph.\n\nPlease help FJ by computing the minimum cost of a photograph in which there is at least one cow of each distinct breed appearing in FJ's herd.\n", "inputFormat": "\\* Line 1: The number of cows, N (1 <= N <= 50,000). \n\n\\* Lines 2..1+N: Each line contains two space-separated positive integers specifying the x coordinate and breed ID of a single cow.  Both numbers are at most 1 billion.\n", "outputFormat": "\\* Line 1: The smallest cost of a photograph containing each distinct breed ID.\n", "hint": "There are 6 cows, at positions 25,26,15,22,20,30, with respective breed IDs 7,1,1,3,1,1.\n\n\nThe range from x=22 up through x=26 (of total size 4) contains each of the distinct breed IDs 1, 3, and 7 represented in FJ's herd.\n", "locale": "en", "translations": {"en": {"title": "[USACO11NOV] Cow Lineup S", "background": "", "description": "Farmer John has hired a professional photographer to take a picture of some of his cows.  Since FJ's cows represent a variety of different breeds, he would like the photo to contain at least one cow from each distinct breed present in his herd.\n\nFJ's N cows are all standing at various positions along a line, each described by an integer position (i.e., its x coordinate) as well as an integer breed ID.  FJ plans to take a photograph of a contiguous range of cows along the line.  The cost of this photograph is equal its size -- that is, the difference between the maximum and minimum x coordinates of the cows in the range of the photograph.\n\nPlease help FJ by computing the minimum cost of a photograph in which there is at least one cow of each distinct breed appearing in FJ's herd.\n", "inputFormat": "\\* Line 1: The number of cows, N (1 <= N <= 50,000). \n\n\\* Lines 2..1+N: Each line contains two space-separated positive integers specifying the x coordinate and breed ID of a single cow.  Both numbers are at most 1 billion.\n", "outputFormat": "\\* Line 1: The smallest cost of a photograph containing each distinct breed ID.\n", "hint": "There are 6 cows, at positions 25,26,15,22,20,30, with respective breed IDs 7,1,1,3,1,1.\n\n\nThe range from x=22 up through x=26 (of total size 4) contains each of the distinct breed IDs 1, 3, and 7 represented in FJ's herd.\n", "locale": "en"}, "zh-CN": {"title": "[USACO11NOV] Cow Lineup S", "background": null, "description": "农民约翰雇佣了一位专业摄影师来拍摄他的一些奶牛。由于约翰的奶牛代表了多种不同的品种，他希望照片中至少包含他牛群中每种不同品种的一头奶牛。\n\n约翰的 $N$ 头奶牛都站在一条线上的不同位置，每头奶牛的位置由一个整数（即其 $x$ 坐标）和一个整数品种 ID 描述。约翰计划拍摄一段连续的奶牛范围。该照片的成本等于其大小——即照片中奶牛的最大和最小 $x$ 坐标之间的差。\n\n请帮助约翰计算出一张照片的最小成本，其中至少包含约翰牛群中每种不同品种的一头奶牛。", "inputFormat": "* 第 $1$ 行：奶牛的数量 $N$（$1 \\leq N \\leq 50,000$）。\n* 第 $2$ 行到第 $1+N$ 行：每行包含两个用空格分隔的正整数，分别指定一头奶牛的 $x$ 坐标和品种 ID。这两个数字的最大值为 $10^9$。", "outputFormat": "* 第 $1$ 行：包含每种不同品种 ID 的照片的最小成本。", "hint": "有 $6$ 头奶牛，位置分别为 $25$、$26$、$15$、$22$、$20$、$30$，品种 ID 分别为 $7$、$1$、$1$、$3$、$1$、$1$。\n\n从 $x=22$ 到 $x=26$ 的范围（总大小为 $4$）包含了约翰的牛群中每种不同的品种 ID：$1$、$3$ 和 $7$。", "locale": "zh-CN"}}}
{"pid": "P3030", "type": "P", "difficulty": 3, "samples": [["3 6 \n3 \n3 \n1 \n", "5 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2011", "USACO", "深度优先搜索 DFS", "记忆化搜索"], "title": "[USACO11NOV] Tile Exchanging S", "background": "", "description": "Farmer John wants to remodel the floor of his barn using a collection of square tiles he recently purchased from the local square mart store (which of course, only sells square objects).  Unfortunately, he didn't measure the size of the barn properly before making his purchase, so now he needs to exchange some of his tiles for new square tiles of different sizes.\n\nThe N square tiles previously purchased by FJ have side lengths A\\_1...A\\_N. He would like to exchange some of these with new square tiles so that the total sum of the areas of the his tiles is exactly M.  Square mart is currently offering a special deal: a tile of side length A\\_i can be exchanged for a new tile of side length B\\_i for a cost of\n\n|A\\_i-B\\_i|\\*|A\\_i-B\\_i| units. However, this deal only applies to \npreviously-purchased tiles -- FJ is not allowed to exchange a tile that he has already obtained via exchanging some other tile (i.e., a size-3 tile cannot be exchanged for a size-2 tile, which is then exchanged for a size-1 tile).\n\nPlease determine the minimum amount of money required to exchange tiles so that the sum of the areas of the tiles becomes M.  Output -1 if it is impossible to obtain an area of M.\n\n", "inputFormat": "\\* Line 1: Two space-separated integers, N (1<=N<=10) and M \n\n(1<=M<=10,000). \n\n\\* Lines 2..1+N: Each line contains one of the integers A\\_1 through A\\_N, describing the side length of an input square\n\n(1<=A\\_i<=100). \n\n", "outputFormat": "\\* Line 1: The minimum cost of exchanging tiles to obtain M units of total area, or -1 if this is impossible.\n", "hint": "There are 3 tiles.  Two are squares of side length 3, and one is a square with side length 1.  We would like to exchange these to make a total area of 6.\n\n\nExchange one of the side-3 squares for a side-2 square, and another side-3 square for a side-1 square.  This gives the desired area of 4+1+1=6 and costs 4+1=5 units.\n\n感谢 wjcwinmt 提供翻译\n", "locale": "en", "translations": {"en": {"title": "[USACO11NOV] Tile Exchanging S", "background": "", "description": "Farmer John wants to remodel the floor of his barn using a collection of square tiles he recently purchased from the local square mart store (which of course, only sells square objects).  Unfortunately, he didn't measure the size of the barn properly before making his purchase, so now he needs to exchange some of his tiles for new square tiles of different sizes.\n\nThe N square tiles previously purchased by FJ have side lengths A\\_1...A\\_N. He would like to exchange some of these with new square tiles so that the total sum of the areas of the his tiles is exactly M.  Square mart is currently offering a special deal: a tile of side length A\\_i can be exchanged for a new tile of side length B\\_i for a cost of\n\n|A\\_i-B\\_i|\\*|A\\_i-B\\_i| units. However, this deal only applies to \npreviously-purchased tiles -- FJ is not allowed to exchange a tile that he has already obtained via exchanging some other tile (i.e., a size-3 tile cannot be exchanged for a size-2 tile, which is then exchanged for a size-1 tile).\n\nPlease determine the minimum amount of money required to exchange tiles so that the sum of the areas of the tiles becomes M.  Output -1 if it is impossible to obtain an area of M.\n\n", "inputFormat": "\\* Line 1: Two space-separated integers, N (1<=N<=10) and M \n\n(1<=M<=10,000). \n\n\\* Lines 2..1+N: Each line contains one of the integers A\\_1 through A\\_N, describing the side length of an input square\n\n(1<=A\\_i<=100). \n\n", "outputFormat": "\\* Line 1: The minimum cost of exchanging tiles to obtain M units of total area, or -1 if this is impossible.\n", "hint": "There are 3 tiles.  Two are squares of side length 3, and one is a square with side length 1.  We would like to exchange these to make a total area of 6.\n\n\nExchange one of the side-3 squares for a side-2 square, and another side-3 square for a side-1 square.  This gives the desired area of 4+1+1=6 and costs 4+1=5 units.\n\n感谢 wjcwinmt 提供翻译\n", "locale": "en"}, "zh-CN": {"title": "[USACO11NOV] Tile Exchanging S", "background": "", "description": "农夫 John 想用他最近从当地的方形商店购买的一批方形瓷砖来重新装修他的谷仓地板（当然，该商店只出售方形物品）。不幸的是，他在购买之前没有正确测量谷仓的大小，所以现在他需要将一些瓷砖换成不同尺寸的新方形瓷砖。\n\nFJ 之前购买的 N 块方形瓷砖的边长为 $A_1...A_N$。他希望用新方形瓷砖替换其中的一些，以便他的瓷砖总面积正好为 $M$。方形商店目前提供一个特别优惠：边长为 $A_i$ 的瓷砖可以以 $|A_i-B_i| \\times |A_i-B_i|$ 单位的成本换成边长为 $B_i$ 的新瓷砖。然而，这个优惠仅适用于之前购买的瓷砖——FJ 不允许将已经通过交换获得的瓷砖再次交换（即，不能将一块边长为 3 的瓷砖换成边长为 2 的瓷砖，然后再换成边长为 1 的瓷砖）。\n\n请确定需要多少最少的钱来交换瓷砖，使瓷砖的总面积变为 $M$。如果无法获得面积为 $M$，则输出 -1。", "inputFormat": "* 第 1 行：两个以空格分隔的整数，$N$（$1 \\leq N \\leq 10$）和 $M$（$1 \\leq M \\leq 10,000$）。\n\n* 第 2 行到第 $1+N$ 行：每行包含一个整数 $A_1$ 到 $A_N$，描述输入方形的边长（$1 \\leq A_i \\leq 100$）。", "outputFormat": "* 第 1 行：交换瓷砖以获得 $M$ 单位总面积的最低成本，如果不可能则输出 -1。", "hint": "有 3 块瓷砖。两块是边长为 3 的正方形，一块是边长为 1 的正方形。我们希望通过交换这些瓷砖使总面积为 6。\n\n将一块边长为 3 的正方形换成边长为 2 的正方形，另一块边长为 3 的正方形换成边长为 1 的正方形。这将得到期望的面积 $4+1+1=6$，成本为 $4+1=5$ 单位。\n\n感谢 wjcwinmt 提供翻译。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P3031", "type": "P", "difficulty": 4, "samples": [["4 6 \n10 \n5 \n6 \n2 \n", "7 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "USACO", "树状数组", "前缀和"], "title": "[USACO11NOV] Above the Median G", "background": "", "description": "Farmer John has lined up his N (1 <= N <= 100,000) cows in a row to measure their heights; cow i has height H\\_i (1 <= H\\_i <= 1,000,000,000) nanometers--FJ believes in precise measurements! He wants to take a picture of some contiguous subsequence of the cows to submit to a bovine photography contest at the county fair.\n\nThe fair has a very strange rule about all submitted photos: a photograph is only valid to submit if it depicts a group of cows whose median height is at least a certain threshold X (1 <= X <= 1,000,000,000).\n\nFor purposes of this problem, we define the median of an array A[0...K] to be A[ceiling(K/2)] after A is sorted, where ceiling(K/2) gives K/2 rounded up to the nearest integer (or K/2 itself, it K/2 is an integer to begin with). For example the median of {7, 3, 2, 6} is 6, and the median of {5, 4, 8} is 5.\n\nPlease help FJ count the number of different contiguous subsequences of his cows that he could potentially submit to the photography contest.\n\n给出一串数字，问中位数大于等于X的连续子串有几个。（这里如果有偶数个数，定义为偏大的那一个而非中间取平均）\n", "inputFormat": "\\* Line 1: Two space-separated integers: N and X.\n\n\\* Lines 2..N+1: Line i+1 contains the single integer H\\_i.\n", "outputFormat": "\\* Line 1: The number of subsequences of FJ's cows that have median at least X. Note this may not fit into a 32-bit integer.\n", "hint": "FJ's four cows have heights 10, 5, 6, 2. We want to know how many contiguous subsequences have median at least 6.\n\n\nThere are 10 possible contiguous subsequences to consider. Of these, only 7 have median at least 6. They are {10}, {6}, {10, 5}, {5, 6}, {6, 2}, {10, 5, 6}, {10, 5, 6, 2}.\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO11NOV] Above the Median G", "background": "", "description": "Farmer John has lined up his N (1 <= N <= 100,000) cows in a row to measure their heights; cow i has height H\\_i (1 <= H\\_i <= 1,000,000,000) nanometers—FJ believes in precise measurements. He wants to take a picture of some contiguous subsequence of the cows to submit to a bovine photography contest at the county fair.\n\nThe fair has a very strange rule about all submitted photos: a photograph is only valid to submit if it depicts a group of cows whose median height is at least a certain threshold X (1 <= X <= 1,000,000,000).\n\nFor the purposes of this problem, we define the median of an array A[0...K] to be A[ceiling(K/2)] after A is sorted, where ceiling(K/2) gives K/2 rounded up to the nearest integer (or K/2 itself, if K/2 is an integer to begin with). For example, the median of {7, 3, 2, 6} is 6, and the median of {5, 4, 8} is 5.\n\nPlease help FJ count the number of different contiguous subsequences of his cows that he could potentially submit to the photography contest.\n\nGiven a sequence of numbers, count how many contiguous subsequences have a median greater than or equal to X. For an even count, the median is defined as the higher middle value rather than the average.", "inputFormat": "- Line 1: Two space-separated integers: N and X.\n- Lines 2..N+1: Line i+1 contains the single integer H\\_i.", "outputFormat": "- Line 1: The number of subsequences of FJ's cows that have median at least X. Note this may not fit into a 32-bit integer.", "hint": "FJ's four cows have heights 10, 5, 6, 2. We want to know how many contiguous subsequences have median at least 6.\n\nThere are 10 possible contiguous subsequences to consider. Of these, only 7 have median at least 6. They are {10}, {6}, {10, 5}, {5, 6}, {6, 2}, {10, 5, 6}, {10, 5, 6, 2}.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO11NOV] Above the Median G", "background": "", "description": "Farmer John has lined up his N (1 <= N <= 100,000) cows in a row to measure their heights; cow i has height H\\_i (1 <= H\\_i <= 1,000,000,000) nanometers--FJ believes in precise measurements! He wants to take a picture of some contiguous subsequence of the cows to submit to a bovine photography contest at the county fair.\n\nThe fair has a very strange rule about all submitted photos: a photograph is only valid to submit if it depicts a group of cows whose median height is at least a certain threshold X (1 <= X <= 1,000,000,000).\n\nFor purposes of this problem, we define the median of an array A[0...K] to be A[ceiling(K/2)] after A is sorted, where ceiling(K/2) gives K/2 rounded up to the nearest integer (or K/2 itself, it K/2 is an integer to begin with). For example the median of {7, 3, 2, 6} is 6, and the median of {5, 4, 8} is 5.\n\nPlease help FJ count the number of different contiguous subsequences of his cows that he could potentially submit to the photography contest.\n\n给出一串数字，问中位数大于等于X的连续子串有几个。（这里如果有偶数个数，定义为偏大的那一个而非中间取平均）\n", "inputFormat": "\\* Line 1: Two space-separated integers: N and X.\n\n\\* Lines 2..N+1: Line i+1 contains the single integer H\\_i.\n", "outputFormat": "\\* Line 1: The number of subsequences of FJ's cows that have median at least X. Note this may not fit into a 32-bit integer.\n", "hint": "FJ's four cows have heights 10, 5, 6, 2. We want to know how many contiguous subsequences have median at least 6.\n\n\nThere are 10 possible contiguous subsequences to consider. Of these, only 7 have median at least 6. They are {10}, {6}, {10, 5}, {5, 6}, {6, 2}, {10, 5, 6}, {10, 5, 6, 2}.\n", "locale": "zh-CN"}}}
{"pid": "P3032", "type": "P", "difficulty": 5, "samples": [["000000000 \n001000100 \n000000000 \n000110000 \n000111000 \n000000000 \n000000000 \n000000000 \n000000000 \n", "3 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2011", "USACO", "启发式迭代加深搜索 IDA*", "A*  算法", "状压 DP"], "title": "[USACO11NOV] Binary Sudoku G", "background": null, "description": "农夫约翰的奶牛们喜欢玩一款有趣的“数独”变体游戏。这款游戏和标准数独一样，包含一个 $9 \\times 9$ 的网格，且网格被划分为 $3 \\times 3$ 的子网格。不过，奶牛们的版本只使用二进制数字（$0$ 和 $1$）：\n\n```\n000 000 000\n001 000 100\n000 000 000\n000 110 000\n000 111 000\n000 000 000\n000 000 000\n000 000 000\n000 000 000\n```\n\n二进制数独的目标是尽可能少地翻转比特位，使得九行中的每一行、九列中的每一列，以及九个 $3 \\times 3$ 子网格中的每一个都具有偶校验（即包含偶数个 $1$）。对于上面的示例，只需 $3$ 次翻转就能得到一个有效的解：\n\n```\n000 000 000\n001 000 100\n001 000 100\n000 110 000\n000 110 000\n000 000 000\n000 000 000\n000 000 000\n000 000 000\n```\n\n给定二进制数独棋盘的初始状态，请帮助奶牛们确定解决该问题所需的最少翻转次数。\n\n**【简化题意】**\n\n给出一个 $9 \\times 9$ 的 01 矩阵，问最少修改几个数能使每行、每列以及每个九宫格中 $1$ 的个数均为偶数。", "inputFormat": "第 $1$ 至 $9$ 行：每行包含一个 $9$ 位的二进制字符串，对应初始棋盘的一行。", "outputFormat": "第 $1$ 行：一个整数，表示使每一行、每一列和每一个子网格都具有偶校验所需的最少翻转次数。", "hint": "样例输入中的数独棋盘与题目描述中的示例一致。\n\n三次翻转即可解决该谜题。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO11NOV] Binary Sudoku G", "background": "", "description": "Farmer John's cows like to play an interesting variant of the popular game of \"Sudoku\". Their version involves a 9 x 9 grid of 3 x 3 subgrids, just like regular Sudoku. The cows' version, however, uses only binary digits:\n\n000 000 000\n001 000 100\n000 000 000\n000 110 000\n000 111 000\n000 000 000\n000 000 000\n000 000 000\n000 000 000\n\nThe goal of binary Sudoku is to toggle as few bits as possible so that each of the nine rows, each of the nine columns, and each of the nine 3 x 3 subgrids has even parity (i.e., contains an even number of 1s). For the example above, a set of 3 toggles gives a valid solution:\n\n000 000 000\n001 000 100\n001 000 100\n000 110 000\n000 110 000\n000 000 000\n000 000 000\n000 000 000\n000 000 000\n\nGiven the initial state of a binary Sudoku board, please help the cows determine the minimum number of toggles required to solve it. In other words, given a 9 x 9 binary matrix, find the minimum number of entries to flip so that each row, each column, and each 3 x 3 subgrid contains an even number of 1s.", "inputFormat": "* Lines 1..9: Each line contains a 9-digit binary string corresponding to one row of the initial game board.", "outputFormat": "* Line 1: The minimum number of toggles required to make every row, column, and subgrid have even parity.", "hint": "The Sudoku board in the sample input is the same as in the problem text above.\n\nThree toggles suffice to solve the puzzle.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO11NOV] Binary Sudoku G", "background": null, "description": "农夫约翰的奶牛们喜欢玩一款有趣的“数独”变体游戏。这款游戏和标准数独一样，包含一个 $9 \\times 9$ 的网格，且网格被划分为 $3 \\times 3$ 的子网格。不过，奶牛们的版本只使用二进制数字（$0$ 和 $1$）：\n\n```\n000 000 000\n001 000 100\n000 000 000\n000 110 000\n000 111 000\n000 000 000\n000 000 000\n000 000 000\n000 000 000\n```\n\n二进制数独的目标是尽可能少地翻转比特位，使得九行中的每一行、九列中的每一列，以及九个 $3 \\times 3$ 子网格中的每一个都具有偶校验（即包含偶数个 $1$）。对于上面的示例，只需 $3$ 次翻转就能得到一个有效的解：\n\n```\n000 000 000\n001 000 100\n001 000 100\n000 110 000\n000 110 000\n000 000 000\n000 000 000\n000 000 000\n000 000 000\n```\n\n给定二进制数独棋盘的初始状态，请帮助奶牛们确定解决该问题所需的最少翻转次数。\n\n**【简化题意】**\n\n给出一个 $9 \\times 9$ 的 01 矩阵，问最少修改几个数能使每行、每列以及每个九宫格中 $1$ 的个数均为偶数。", "inputFormat": "第 $1$ 至 $9$ 行：每行包含一个 $9$ 位的二进制字符串，对应初始棋盘的一行。", "outputFormat": "第 $1$ 行：一个整数，表示使每一行、每一列和每一个子网格都具有偶校验所需的最少翻转次数。", "hint": "样例输入中的数独棋盘与题目描述中的示例一致。\n\n三次翻转即可解决该谜题。", "locale": "zh-CN"}}}
{"pid": "P3033", "type": "P", "difficulty": 5, "samples": [["3 \n4 5 10 5 \n6 2 6 12 \n8 3 8 5 \n", "2 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "USACO", "二分图"], "title": "[USACO11NOV] Cow Steeplechase G", "background": "", "description": "Farmer John has a brilliant idea for the next great spectator sport: Cow Steeplechase! As everyone knows, regular steeplechase involves a group of horses that race around a course filled with obstacles they must jump over. FJ figures the same contest should work with highly-trained cows, as long as the obstacles are made short enough.\n\nIn order to design his course, FJ makes a diagram of all the $N$ possible obstacles he could potentially build. Each one is represented by a line segment in the 2D plane that is parallel to the horizontal or vertical axis. Obstacle i has distinct endpoints $(X1_i, Y1_i)$ and $(X2_i, Y2_i)$. An example is as follows:\n```none\n   --+-------   \n-----+-----\n  ---+---     |\n     |     |  |\n   --+-----+--+-   |\n     |     |  |  | |\n     |   --+--+--+-+-\n           |  |  | |\n              |\n```\nFJ would like to build as many of these obstacles as possible, subject to the constraint that no two of them intersect. Starting with the diagram above, FJ can build $7$ obstacles:\n```none\n   ----------   \n-----------\n  -------     |\n           |  |\n           |  |    |\n           |  |  | |\n           |  |  | |\n           |  |  | |\n              |\n```\n\nTwo segments are said to intersect if they share any point in common, even an endpoint of one or both of the segments. FJ is certain that no two horizontal segments in the original input diagram will intersect, and that similarly no two vertical segments in the input diagram will intersect.\n\nPlease help FJ determine the maximum number of obstacles he can build.", "inputFormat": "The first line contains $N$.\n\nThe following $N$ lines contain four space-separated integers representing an obstacle: $X1_i$, $Y1_i$, $X2_i$, and $Y2_i$.", "outputFormat": "Output the maximum number of non-crossing segments FJ can choose.", "hint": "**[Sample Explanation]**\n\nThere are three potential obstacles. The first is a horizontal segment connecting $(4, 5)$ to $(10, 5)$; the second and third are vertical segments connecting $(6, 2)$ to $(6, 12)$ and $(8, 3)$ to $(8, 5)$.\n\nThe optimal solution is to choose both vertical segments.\n\n**[Data Range]**\n\nFor $100\\%$ of the data, $1\\le N\\le250,1\\le X1_i,Y1_i,X2_i,Y2_i\\le10^9$.", "locale": "en", "translations": {"en": {"title": "[USACO11NOV] Cow Steeplechase G", "background": "", "description": "Farmer John has a brilliant idea for the next great spectator sport: Cow Steeplechase! As everyone knows, regular steeplechase involves a group of horses that race around a course filled with obstacles they must jump over. FJ figures the same contest should work with highly-trained cows, as long as the obstacles are made short enough.\n\nIn order to design his course, FJ makes a diagram of all the $N$ possible obstacles he could potentially build. Each one is represented by a line segment in the 2D plane that is parallel to the horizontal or vertical axis. Obstacle i has distinct endpoints $(X1_i, Y1_i)$ and $(X2_i, Y2_i)$. An example is as follows:\n```none\n   --+-------   \n-----+-----\n  ---+---     |\n     |     |  |\n   --+-----+--+-   |\n     |     |  |  | |\n     |   --+--+--+-+-\n           |  |  | |\n              |\n```\nFJ would like to build as many of these obstacles as possible, subject to the constraint that no two of them intersect. Starting with the diagram above, FJ can build $7$ obstacles:\n```none\n   ----------   \n-----------\n  -------     |\n           |  |\n           |  |    |\n           |  |  | |\n           |  |  | |\n           |  |  | |\n              |\n```\n\nTwo segments are said to intersect if they share any point in common, even an endpoint of one or both of the segments. FJ is certain that no two horizontal segments in the original input diagram will intersect, and that similarly no two vertical segments in the input diagram will intersect.\n\nPlease help FJ determine the maximum number of obstacles he can build.", "inputFormat": "The first line contains $N$.\n\nThe following $N$ lines contain four space-separated integers representing an obstacle: $X1_i$, $Y1_i$, $X2_i$, and $Y2_i$.", "outputFormat": "Output the maximum number of non-crossing segments FJ can choose.", "hint": "**[Sample Explanation]**\n\nThere are three potential obstacles. The first is a horizontal segment connecting $(4, 5)$ to $(10, 5)$; the second and third are vertical segments connecting $(6, 2)$ to $(6, 12)$ and $(8, 3)$ to $(8, 5)$.\n\nThe optimal solution is to choose both vertical segments.\n\n**[Data Range]**\n\nFor $100\\%$ of the data, $1\\le N\\le250,1\\le X1_i,Y1_i,X2_i,Y2_i\\le10^9$.", "locale": "en"}, "zh-CN": {"title": "[USACO11NOV] Cow Steeplechase G", "background": null, "description": "Farmer John 有个绝妙的主意——举办一场盛大的奶牛跨栏大赛！众所周知，一般的跨栏比赛是让马匹在充满障碍物的赛道上比赛。而 FJ 认为，只要把障碍物做得足够矮，这个比赛同样适用于训练有素的奶牛。\n\n为了设计赛道，FJ 绘制了所有 $N$ 个可能的障碍物摆放的示意图。每个障碍物在二维平面上用一条平行于横轴或纵轴的线段表示。障碍物 $i$ 的端点为 $(X1_i, Y1_i)$ 和 $(X2_i, Y2_i)$。以下是一个示例：\n```none\n   --+-------   \n-----+-----\n  ---+---     |\n     |     |  |\n   --+-----+--+-   |\n     |     |  |  | |\n     |   --+--+--+-+-\n           |  |  | |\n              |\n```\n约翰希望在满足**任意两个障碍物不相交**的条件下尽可能多地建造障碍物。以上图为例，最多可以建造 $7$ 个障碍物：\n```none\n   ----------   \n-----------\n  -------     |\n           |  |\n           |  |    |\n           |  |  | |\n           |  |  | |\n           |  |  | |\n              |\n```\n当两条线段存在任何公共点（包括端点重合）时即视为相交。题目保证初始示意图中任意两条水平线段不会相交，任意两条垂直线段也不会相交。\n\n请帮助 FJ 计算一下他最多能建造多少个障碍物。", "inputFormat": "第 $1$ 行输入一个整数：N。\n\n第 $2\\sim N+1$ 行：第 $i+1$ 行包含四个用空格分隔的整数，表示一个障碍物：$X1_i, Y1_i, X2_i$, 和 $Y2_i$。", "outputFormat": "输出一个数，约翰农夫可以选择的最大不相交线段数量。", "hint": "**【样例解释】**\n\n共有三个潜在的障碍物：第一个是连接 $(4,5)$ 到 $(10,5)$ 的水平线段；第二、三个分别是连接 $(6,2)$ 到 $(6,12)$ 和 $(8,3)$ 到 $(8,5)$ 的垂直线段。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le N\\le250,1\\le X1_i,Y1_i,X2_i,Y2_i\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P3034", "type": "P", "difficulty": 5, "samples": [["5 \n10 \n20 \n30 \n40 \n50 \n20 \n10 \n30 \n40 \n50 \n30 \n10 \n20 \n40 \n50 \n40 \n10 \n20 \n30 \n50 \n50 \n10 \n20 \n30 \n40 \n", "10 \n20 \n30 \n40 \n50 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "USACO", "排序"], "title": "[USACO11DEC] Cow Photography G/S", "background": "", "description": "The cows are in a particularly mischievous mood today!  All Farmer John wants to do is take a photograph of the cows standing in a line, but they keep moving right before he has a chance to snap the picture.\n\nSpecifically, each of FJ's N (1 <= N <= 20,000) cows has a unique integer ID number.  FJ wants to take a picture of the cows standing in a line in a very specific ordering, represented by the contents of an array A[1...N], where A[j] gives the ID number of the jth cow in the ordering.  He arranges the cows in this order, but just before he can press the button on his camera to snap the picture, a group of zero or more cows (not necessarily a contiguous group) moves to a set of new positions in the lineup.  More precisely, a group of zero or more cows steps away from the line, with the remaining cows shifting over to close the resulting gaps in the lineup.  The cows who stepped away then re-insert themselves at different positions in the lineup (not necessarily at the locations they originally occupied).  Frustrated but not deterred, FJ again arranges his cows according to the ordering in A, but again, right before he can snap a picture, a different group of zero or more cows moves to a set of new positions in the lineup.\n\nThe process above repeats for a total of five photographs before FJ gives up.  Given the contents of each photograph, see if you can reconstruct the original intended ordering A.  Each photograph shows an ordering of the cows that differs from A in that some group of zero or more cows has moved. However, a cow only moves in at most one photograph: if a cow is part of the group that moves in one photograph, she will not actively move in any of the other four photographs (although she could end up at a different index as a consequence of other cows around her moving, of course).\n\nFarmer John居然拍了五张照片，每张表示初始化牛位置的移动后的状态。然后求出FJ这五头牛初始化的样子。\n", "inputFormat": "\\* Line 1: The number of cows, N (1 <= N <= 20,000). \n\n\\* Lines 2..5N+1: The next 5N lines describe five orderings, each one a block of N contiguous lines.  Each line contains the ID of a cow, an integer in the range 0...1,000,000,000.\n", "outputFormat": "\\* Lines 1..N: The intended ordering A, one ID per line. \n\n", "hint": "There are 5 cows, with IDs 10, 20, 30, 40, and 50.  In each of the 5 photos, a different cow moves to the front of the line (at most one cow moves in each photo here, but it is possible in other inputs that multiple cows could move in a particular photo).\n\n\nThe correct original ordering A[1..5] is 10, 20, 30, 40, 50.\n\n", "locale": "en", "translations": {"en": {"title": "[USACO11DEC] Cow Photography G/S", "background": "", "description": "The cows are in a particularly mischievous mood today!  All Farmer John wants to do is take a photograph of the cows standing in a line, but they keep moving right before he has a chance to snap the picture.\n\nSpecifically, each of FJ's N (1 <= N <= 20,000) cows has a unique integer ID number.  FJ wants to take a picture of the cows standing in a line in a very specific ordering, represented by the contents of an array A[1...N], where A[j] gives the ID number of the jth cow in the ordering.  He arranges the cows in this order, but just before he can press the button on his camera to snap the picture, a group of zero or more cows (not necessarily a contiguous group) moves to a set of new positions in the lineup.  More precisely, a group of zero or more cows steps away from the line, with the remaining cows shifting over to close the resulting gaps in the lineup.  The cows who stepped away then re-insert themselves at different positions in the lineup (not necessarily at the locations they originally occupied).  Frustrated but not deterred, FJ again arranges his cows according to the ordering in A, but again, right before he can snap a picture, a different group of zero or more cows moves to a set of new positions in the lineup.\n\nThe process above repeats for a total of five photographs before FJ gives up.  Given the contents of each photograph, see if you can reconstruct the original intended ordering A.  Each photograph shows an ordering of the cows that differs from A in that some group of zero or more cows has moved. However, a cow only moves in at most one photograph: if a cow is part of the group that moves in one photograph, she will not actively move in any of the other four photographs (although she could end up at a different index as a consequence of other cows around her moving, of course).\n\nFarmer John居然拍了五张照片，每张表示初始化牛位置的移动后的状态。然后求出FJ这五头牛初始化的样子。\n", "inputFormat": "\\* Line 1: The number of cows, N (1 <= N <= 20,000). \n\n\\* Lines 2..5N+1: The next 5N lines describe five orderings, each one a block of N contiguous lines.  Each line contains the ID of a cow, an integer in the range 0...1,000,000,000.\n", "outputFormat": "\\* Lines 1..N: The intended ordering A, one ID per line. \n\n", "hint": "There are 5 cows, with IDs 10, 20, 30, 40, and 50.  In each of the 5 photos, a different cow moves to the front of the line (at most one cow moves in each photo here, but it is possible in other inputs that multiple cows could move in a particular photo).\n\n\nThe correct original ordering A[1..5] is 10, 20, 30, 40, 50.\n\n", "locale": "en"}, "zh-CN": {"title": "[USACO11DEC] Cow Photography G/S", "background": "", "description": "今天的奶牛们特别调皮！Farmer John 想做的只是给排成一排的奶牛拍照，但是在他拍下照片之前，奶牛们一直在移动。\n\n具体地说，FJ 有 $N$ 头奶牛（$1 \\leq N \\leq 20\\,000$），每头奶牛都有一个唯一确定的编号。FJ 想要以一个特定的顺序拍下一张奶牛排成一排的照片，这个顺序用数组 $A[1 \\ldots N]$ 表示，其中 $A[i]$ 代表排在 $i$ 位置的奶牛的编号。\n\n他按照这样的顺序将奶牛们排列好，但在他按下快门之前，有些奶牛（可能是零头或任意多头奶牛，位置也不一定连续）将移到一个新的位置。更准确地说，一些奶牛离开队列，剩下的奶牛靠拢，这些离开的奶牛再将自己重新插入到队列中的任意位置（不一定是他们之前的位置）。FJ 感到非常沮丧，他再次按照 $A$ 数组的顺序重新安排了队列。但在他再次按下快门之前，又有一些奶牛移动到了新的位置。\n\n就这样，FJ 拍了五张照片。给出每张照片拍摄的内容（即 FJ 按下快门时奶牛的顺序），请你尝试推算出 FJ 最初为奶牛们排的顺序（即 $A$ 数组）。由于可能有奶牛移动，照片显示的顺序与原来的顺序可能有所不同。但是，一头奶牛最多只会移动一次：即如果一头奶牛在拍其中一张照片时移动了，它在拍其他四张照片的时候都不会移动。当然，由于其他奶牛也在移动，它在不同照片中的顺序并不一定相同。", "inputFormat": "第一行包含一个整数 $N$。\n\n接下来 $5N$ 行，每 $N$ 行描述了一张照片中各奶牛的顺序。每行包含一个奶牛的编号，保证所有编号都是不超过 $1\\,000\\,000\\,000$ 的非负整数。", "outputFormat": "输出 $N$ 行，每行一个整数 $A[i]$，即 FJ 最初为奶牛排好的顺序。\n\n## 样例解释\n\nFJ 拍的五张照片分别为：\n\n- `10 20 30 40 50`\n- `20 10 30 40 50`\n- `30 10 20 40 50`\n- `40 10 20 30 50`\n- `50 10 20 30 40`", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3035", "type": "P", "difficulty": 3, "samples": [["6 12 \n1 \n2 \n11 \n8 \n4 \n12 \n2 \n3 \n4 \n4 \n8 \n9 \n15 \n16 \n17 \n18 \n19 \n19 \n", "9 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2011", "USACO"], "title": "[USACO11DEC] Umbrellas for Cows S", "background": null, "description": "今天是一个雨天！农夫约翰有 $N (1 \\le N \\le 5,000) $ 头奶牛，编号为 $1,2,\\cdots ,N$，它们并不特别喜欢淋湿。奶牛们站在一排没有屋顶的牛棚里，这些牛棚沿着一条数轴排列。牛棚的 $X$ 坐标从 $1$ 到 $M (1 \\le M \\le 10^5)$。牛 $i$ 站在坐标为 $X_i (1 \\le X_i \\le M)$ 的牛棚里。没有两头奶牛挤在同一个牛棚。\n\n为了保护奶牛免受雨淋，农夫约翰想为它们购买雨伞。一把雨伞覆盖的范围从 $X_i$ 到 $X_j (X_i \\le X_j)$ ，其宽度为 $X_j - X_i + 1$。购买宽度为 $W$ 的雨伞需要花费 $C_W (1 <= C_W <= 10^6)$ 元。大雨伞并不一定比小雨伞贵。\n\n请你帮农夫约翰找到购买一组雨伞以保护每头奶牛免受雨淋的最低成本。注意，最优方案中的雨伞集合可能会有一定程度的重叠。", "inputFormat": "第 $1$ 行，是两个用空间分隔的整数：$N$ 和 $M$。\n\n接下来 $N$ 行，每行包含一个整数，第 $i+1$ 行的数表示 $X_i$，为第 $i$ 头奶牛所在的点的坐标值。\n\n接下来 $M$ 行，第 $N+j+1$ 行包含一个整数：$C_j$。", "outputFormat": "仅一行，一个整数，表示最低的成本。", "hint": "样例解释：\n\n共有 $12$ 个牛棚，其中第 $1,2,4,8,11$ 和 $12$ 号牛棚有牛。覆盖一个摊位的伞要花费 $2$，覆盖两个摊位的伞要花费 $3$，以此类推。通过购买一个宽度 $4$ 的伞、一个宽度为 $1$ 的伞和一个宽度为 $2$ 的伞，可以以 $4 + 2 + 3 = 9$ 的成本覆盖所有牛：\n\n| 牛棚  |<  |<  |<  |<  |<  |<  |<  |<  |<  |<  |<  |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|U |< |< |< |  |  |  |U |  |  |U |< |\n|C |C |  |C |  |  |  |C |  |  |C |C |\n|1 |2 |3 |4 |5 |6 |7 |8 |9 |10|11|12|\n\n\n\n其中 $C$ 代表一头牛，$U$ 代表伞。", "locale": "zh-CN", "translations": {"en": {"title": null, "background": null, "description": "Today is a rainy day!Farmer John's $N (1 \\le N \\le 5,000)$ cows, numbered $1,2,\\cdots ,N$, are not particularly fond of getting wet. The cows are standing in roofless stalls arranged on a number line. The stalls span X-coordinates from $1$ to $M (1 <= M <= 100,000)$. Cow $i$ stands at a stall on coordinate $X_i (1 \\le X_i \\le M)$. No two cows share stalls.\n\nIn order to protect the cows from the rain, Farmer John wants to buy them umbrellas. An umbrella that spans coordinates $X_i$ to $X_j$ $(X_i \\le X_j)$ has a width of $X_j - X_i + 1$. It costs $C_W (1 \\le C_W \\le 1,000,000)$ to buy an umbrella of width $W$.  Larger umbrellas do not necessarily cost more than smaller umbrellas.\n\nHelp Farmer John find the minimum cost it takes to purchase a set of umbrellas that will protect every cow from the rain.  Note that the set of umbrellas in an optimal solution might overlap to some extent.", "inputFormat": "- Line $1$: Two space-separated integers: $N$ and $M$.\n\n- Lines $2$ to $N+1$: Line $i+1$ contains a single integer: $X_i$.\n\n- Lines $N+2$ to $N+M+1$: Line $N+j+1$ contains a single integer: $C_j$.", "outputFormat": "- Line 1: A single integer that is the minimum cost needed to purchase umbrellas for all the cows.", "hint": "There are $12$ stalls, and stalls $1, 2, 4, 8, 11$ and $12$ contain cows. An umbrella covering one stall costs $2$, an umbrella covering two stalls costs $3$, and so on.\n\n\nBy purchasing a size $4$ umbrella, a size $1$ umbrella, and a size $2$ umbrella, it is possible to cover all the cows at a cost of $4+2+3=9$:\n\n```plain\nUUUUUUUUUU           U        UUUU\n\nC  C     C           C        C  C\n\n|--|--|--|--|--|--|--|--|--|--|--| \n1  2  3  4  5  6  7  8  9  10 11 12\n```\n\nC represents a cow and U represents a part of an umbrella.", "locale": "en"}, "zh-CN": {"title": "[USACO11DEC] Umbrellas for Cows S", "background": null, "description": "今天是一个雨天！农夫约翰有 $N (1 \\le N \\le 5,000) $ 头奶牛，编号为 $1,2,\\cdots ,N$，它们并不特别喜欢淋湿。奶牛们站在一排没有屋顶的牛棚里，这些牛棚沿着一条数轴排列。牛棚的 $X$ 坐标从 $1$ 到 $M (1 \\le M \\le 10^5)$。牛 $i$ 站在坐标为 $X_i (1 \\le X_i \\le M)$ 的牛棚里。没有两头奶牛挤在同一个牛棚。\n\n为了保护奶牛免受雨淋，农夫约翰想为它们购买雨伞。一把雨伞覆盖的范围从 $X_i$ 到 $X_j (X_i \\le X_j)$ ，其宽度为 $X_j - X_i + 1$。购买宽度为 $W$ 的雨伞需要花费 $C_W (1 <= C_W <= 10^6)$ 元。大雨伞并不一定比小雨伞贵。\n\n请你帮农夫约翰找到购买一组雨伞以保护每头奶牛免受雨淋的最低成本。注意，最优方案中的雨伞集合可能会有一定程度的重叠。", "inputFormat": "第 $1$ 行，是两个用空间分隔的整数：$N$ 和 $M$。\n\n接下来 $N$ 行，每行包含一个整数，第 $i+1$ 行的数表示 $X_i$，为第 $i$ 头奶牛所在的点的坐标值。\n\n接下来 $M$ 行，第 $N+j+1$ 行包含一个整数：$C_j$。", "outputFormat": "仅一行，一个整数，表示最低的成本。", "hint": "样例解释：\n\n共有 $12$ 个牛棚，其中第 $1,2,4,8,11$ 和 $12$ 号牛棚有牛。覆盖一个摊位的伞要花费 $2$，覆盖两个摊位的伞要花费 $3$，以此类推。通过购买一个宽度 $4$ 的伞、一个宽度为 $1$ 的伞和一个宽度为 $2$ 的伞，可以以 $4 + 2 + 3 = 9$ 的成本覆盖所有牛：\n\n| 牛棚  |<  |<  |<  |<  |<  |<  |<  |<  |<  |<  |<  |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|U |< |< |< |  |  |  |U |  |  |U |< |\n|C |C |  |C |  |  |  |C |  |  |C |C |\n|1 |2 |3 |4 |5 |6 |7 |8 |9 |10|11|12|\n\n\n\n其中 $C$ 代表一头牛，$U$ 代表伞。", "locale": "zh-CN"}}}
{"pid": "P3036", "type": "P", "difficulty": 5, "samples": [["4 0 0 7 2\n3 2\n0 2\n1 6\n3 0", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2016", "USACO", "图论建模", "最短路"], "title": "[USACO16DEC] Lasers and Mirrors G", "background": "", "description": "For some reason, Farmer John's cows always seem to be running laser light shows.\n\nFor their latest show, the cows have procured a large powerful laser -- so large,in fact, that they cannot seem to move it easily from the location where it was delivered. They would like to somehow send the light from the laser to the barn on the other side of FJ's property.  Both the laser and the barn can be considered to be located at points in the 2D plane on a map of FJ's farm.  The cows plan to point the laser so that it sends a beam of light out either horizontally or vertically (i.e.,  aligned with the x or y axes).  They will then bounce this beam off a number of mirrors to direct it to the barn.\n\nOn the farm there are $N$ fence posts ($1 \\leq N \\leq 100,000$) located at distinct 2D points (also distinct from the laser and the barn) at which the cows can mount mirrors.  The cows can choose not to mount a mirror on a fence post, in which case the laser would simply pass straight over the top of the post without changing direction.  If the cows do mount a mirror on a fence post, they align it diagonally like / or \\ so that it will re-direct a horizontal beam of light in a vertical direction or vice versa.\n\nPlease compute the minimum possible number of mirrors the cows need to use in order to re-direct the laser to the barn.\n", "inputFormat": "The first line of input contains 5 space-separated integers: $N, x_L, y_L, x_B, y_B$, where $(x_L, y_L)$ is the location of the laser and $(x_B, y_B)$ is the location of the barn.  All coordinates are between $0$ and $1,000,000,000$.\n\nThe next $N$ lines each contain the $x$ and $y$ locations of a fence post, both integers in the range $0 \\ldots 1,000,000,000$.", "outputFormat": "Please output the minimum number of mirrors needed to direct the laser to the barn, or -1 if this is impossible to do.", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO16DEC] Lasers and Mirrors G", "background": "", "description": "For some reason, Farmer John's cows always seem to be running laser light shows.\n\nFor their latest show, the cows have procured a large powerful laser -- so large,in fact, that they cannot seem to move it easily from the location where it was delivered. They would like to somehow send the light from the laser to the barn on the other side of FJ's property.  Both the laser and the barn can be considered to be located at points in the 2D plane on a map of FJ's farm.  The cows plan to point the laser so that it sends a beam of light out either horizontally or vertically (i.e.,  aligned with the x or y axes).  They will then bounce this beam off a number of mirrors to direct it to the barn.\n\nOn the farm there are $N$ fence posts ($1 \\leq N \\leq 100,000$) located at distinct 2D points (also distinct from the laser and the barn) at which the cows can mount mirrors.  The cows can choose not to mount a mirror on a fence post, in which case the laser would simply pass straight over the top of the post without changing direction.  If the cows do mount a mirror on a fence post, they align it diagonally like / or \\ so that it will re-direct a horizontal beam of light in a vertical direction or vice versa.\n\nPlease compute the minimum possible number of mirrors the cows need to use in order to re-direct the laser to the barn.\n", "inputFormat": "The first line of input contains 5 space-separated integers: $N, x_L, y_L, x_B, y_B$, where $(x_L, y_L)$ is the location of the laser and $(x_B, y_B)$ is the location of the barn.  All coordinates are between $0$ and $1,000,000,000$.\n\nThe next $N$ lines each contain the $x$ and $y$ locations of a fence post, both integers in the range $0 \\ldots 1,000,000,000$.", "outputFormat": "Please output the minimum number of mirrors needed to direct the laser to the barn, or -1 if this is impossible to do.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO16DEC] Lasers and Mirrors G", "background": "", "description": "出于某种原因，Farmer John 的奶牛似乎总是在举办激光表演。\n\n在它们的最新表演中，奶牛们获得了一台大型强力激光器——事实上，这台激光器太大，以至于它们无法轻易从交付地点移动它。它们希望以某种方式将激光器的光束发送到 Farmer John 的农场另一边的谷仓。激光器和谷仓都可以被视为位于 Farmer John 农场地图的二维平面中的点。奶牛们计划将激光器指向水平或垂直方向（即与 $x$ 轴或 $y$ 轴对齐），然后通过多次反射镜将光束引导到谷仓。\n\n农场上有 $N$ 个栅栏柱（$1 \\leq N \\leq 100,000$），位于与激光器和谷仓不同的二维点上，奶牛们可以在这些栅栏柱上安装反射镜。奶牛们可以选择不在栅栏柱上安装反射镜，在这种情况下，激光器会直接穿过栅栏柱而不改变方向。如果奶牛们在栅栏柱上安装反射镜，它们会将其对角线对齐，例如 / 或 \\，以便将水平光束重新定向为垂直方向，反之亦然。\n\n请计算奶牛们将激光器引导到谷仓所需的最少反射镜数量。", "inputFormat": "输入的第一行包含 $5$ 个用空格分隔的整数：$N, x_L, y_L, x_B, y_B$，其中 $(x_L, y_L)$ 是激光器的位置，$(x_B, y_B)$ 是谷仓的位置。所有坐标都在 $0$ 到 $1,000,000,000$ 之间。\n\n接下来的 $N$ 行每行包含一个栅栏柱的 $x$ 和 $y$ 位置，这两个整数都在 $0 \\ldots 1,000,000,000$ 范围内。", "outputFormat": "请输出将激光器引导到谷仓所需的最少反射镜数量，如果无法实现，则输出 -1。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3037", "type": "P", "difficulty": 6, "samples": [["4 5 \n1 2 1 \n3 4 1 \n1 3 2 \n1 4 2 \n2 3 2 \n", "4 3 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2011", "USACO", "生成树"], "title": "[USACO11DEC] Simplifying the Farm G", "background": null, "description": "农夫约翰在一所夜校学习算法课程，他刚刚学会了最小生成树。现在约翰意识到他的农场设计得不够高效，他想简化农场的布局。\n约翰的农场可以看做一个图，农田代表图中顶点，田间小路代表图中的边，每条边有一定的长度。约翰注意到，农场中最多有三条小路有着相同的长度。约翰想删除一些小路使得农场成为一棵树，使得两块农田间只有一条路径。但是约翰想把农场设计成最小生成树，也就是农场道路的总长度最短。\n请帮助约翰找出最小生成树的总长度，同时请计算出总共有多少种最小生成树？", "inputFormat": "第 $1$ 行：两个整数 $N$ 和 $M(1 \\le N \\le 4\\times 10^4; 1 \\le M \\le 10^5)$，分别表示农场图中顶点和边的数量。顶点编号为 $1 \\sim N$。\n第 $2$ 行到第 $M+1$ 行：每行三个整数 $a_i, b_i$ 和 $n_i(1 \\le a_i, b_i \\le N; 1 \\le n_i \\le 10^6)$，表示一条从顶点 $a_i$ 到顶点 $b_i$、长度为 $n_i$ 的边。任何边长度值 $n_i$ 最多出现三次。", "outputFormat": "第 $1$ 行：输出两个整数，分别表示最小生成树的总边长度和不同最小生成树的数量（结果对 $10^9+7$ 取模）。", "hint": "样例解释：\n\n选择两条长度为 $1$ 的边和任意一条长度为 $2$ 的边，就能得到总长度为 $4$ 的最小生成树。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO11DEC] Simplifying the Farm G", "background": null, "description": "Farmer John has been taking an evening algorithms course at his local university, and he has just learned about minimum spanning trees.  However, Farmer John now realizes that the design of his farm is not as efficient as it could be, and he wants to simplify the layout of his farm.\n\nThe farm is currently arranged like a graph, with vertices representing fields and edges representing pathways between these fields, each having an associated length.  Farmer John notes that for each distinct length, at most three pathways on his farm share this length.  FJ would like to remove some of the pathways on his farm so that it becomes a tree -- that is, so that there is one unique route between any pair of fields.  Moreover, Farmer John would like this to be a minimum spanning tree -- a tree having the smallest possible sum of edge lengths.\n\nHelp Farmer John compute not only the sum of edge lengths in a minimum spanning tree derived from his farm graph, but also the number of different possible minimum spanning trees he can create.", "inputFormat": "Line $1$: Two integers $N$ and $M (1 \\le N \\le 4\\times 10^4; 1 \\le M \\le 10^5)$, representing  the number of vertices and edges in the farm graph, respectively.  Vertices are numbered as $1 \\ldots N$.\n\nLines $2 \\ldots M+1$: Three integers $a_i$, $b_i$ and $n\\_i$ $(1 \\le a_i, b_i \\le N; 1 \\le n_i \\le 10^6)$  representing an edge from vertex $a_i$ to $b_i$ with length $n_i$.  No edge length $n_i$ will occur more than three times.", "outputFormat": "Line $1$: Two integers representing the length of the minimal spanning tree and the number of minimal spanning trees (mod $10^9+7$).", "hint": "Picking both edges with length $1$ and any edge with length $2$ yields a minimum spanning tree of length $4$.", "locale": "en"}, "zh-CN": {"title": "[USACO11DEC] Simplifying the Farm G", "background": null, "description": "农夫约翰在一所夜校学习算法课程，他刚刚学会了最小生成树。现在约翰意识到他的农场设计得不够高效，他想简化农场的布局。\n约翰的农场可以看做一个图，农田代表图中顶点，田间小路代表图中的边，每条边有一定的长度。约翰注意到，农场中最多有三条小路有着相同的长度。约翰想删除一些小路使得农场成为一棵树，使得两块农田间只有一条路径。但是约翰想把农场设计成最小生成树，也就是农场道路的总长度最短。\n请帮助约翰找出最小生成树的总长度，同时请计算出总共有多少种最小生成树？", "inputFormat": "第 $1$ 行：两个整数 $N$ 和 $M(1 \\le N \\le 4\\times 10^4; 1 \\le M \\le 10^5)$，分别表示农场图中顶点和边的数量。顶点编号为 $1 \\sim N$。\n第 $2$ 行到第 $M+1$ 行：每行三个整数 $a_i, b_i$ 和 $n_i(1 \\le a_i, b_i \\le N; 1 \\le n_i \\le 10^6)$，表示一条从顶点 $a_i$ 到顶点 $b_i$、长度为 $n_i$ 的边。任何边长度值 $n_i$ 最多出现三次。", "outputFormat": "第 $1$ 行：输出两个整数，分别表示最小生成树的总边长度和不同最小生成树的数量（结果对 $10^9+7$ 取模）。", "hint": "样例解释：\n\n选择两条长度为 $1$ 的边和任意一条长度为 $2$ 的边，就能得到总长度为 $4$ 的最小生成树。", "locale": "zh-CN"}}}
{"pid": "P3038", "type": "P", "difficulty": 5, "samples": [["4 6 \n1 4 \n2 4 \n3 4 \nP 2 3 \nP 1 3 \nQ 3 4 \nP 1 4 \nQ 2 4 \nQ 1 4 \n", "2 \n1 \n2 \n\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "线段树", "USACO", "树链剖分"], "title": "[USACO11DEC] Grass Planting G", "background": "", "description": "Farmer John has N barren pastures (2 <= N <= 100,000) connected by N-1 bidirectional roads, such that there is exactly one path between any two pastures.  Bessie, a cow who loves her grazing time, often complains about how there is no grass on the roads between pastures.  Farmer John loves Bessie very much, and today he is finally going to plant grass on the roads.  He will do so using a procedure consisting of M steps (1 <= M <= 100,000).\n\nAt each step one of two things will happen:\n\n- FJ will choose two pastures, and plant a patch of grass along each road in between the two pastures, or,\n\n- Bessie will ask about how many patches of grass on a particular road, and Farmer John must answer her question.\n\nFarmer John is a very poor counter -- help him answer Bessie's questions!\n", "inputFormat": "\\* Line 1: Two space-separated integers N and M\n\n\\* Lines 2..N: Two space-separated integers describing the endpoints of a road.\n\n\\* Lines N+1..N+M: Line i+1 describes step i. The first character of the line is either P or Q, which describes whether or not FJ is planting grass or simply querying. This is followed by two space-separated integers A\\_i and B\\_i (1 <= A\\_i, B\\_i <= N) which describe FJ's action or query.\n", "outputFormat": "\\* Lines 1..???: Each line has the answer to a query, appearing in the same order as the queries appear in the input.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO11DEC] Grass Planting G", "background": "", "description": "Farmer John has N barren pastures (2 <= N <= 100,000) connected by N-1 bidirectional roads, such that there is exactly one path between any two pastures.  Bessie, a cow who loves her grazing time, often complains about how there is no grass on the roads between pastures.  Farmer John loves Bessie very much, and today he is finally going to plant grass on the roads.  He will do so using a procedure consisting of M steps (1 <= M <= 100,000).\n\nAt each step one of two things will happen:\n\n- FJ will choose two pastures, and plant a patch of grass along each road in between the two pastures, or,\n\n- Bessie will ask about how many patches of grass on a particular road, and Farmer John must answer her question.\n\nFarmer John is a very poor counter -- help him answer Bessie's questions!\n", "inputFormat": "\\* Line 1: Two space-separated integers N and M\n\n\\* Lines 2..N: Two space-separated integers describing the endpoints of a road.\n\n\\* Lines N+1..N+M: Line i+1 describes step i. The first character of the line is either P or Q, which describes whether or not FJ is planting grass or simply querying. This is followed by two space-separated integers A\\_i and B\\_i (1 <= A\\_i, B\\_i <= N) which describe FJ's action or query.\n", "outputFormat": "\\* Lines 1..???: Each line has the answer to a query, appearing in the same order as the queries appear in the input.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO11DEC] Grass Planting G", "background": null, "description": "给出一棵有 $n$ 个节点的树，有 $m$ 个如下所示的操作：\n\n- 将两个节点之间的**路径上的边**的权值均加一。\n\n- 查询两个节点之间的**那一条边**的权值，保证两个节点直接相连。\n\n初始边权均为 $0$。", "inputFormat": "第一行两个整数 $n,m$，含义如上。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$，表示 $u,v$ 之间有一条边。\n\n接下来 $m$ 行，每行格式为 `op u v`，$op=\\texttt{P}$ 代表第一个操作，$op=\\texttt{Q}$ 代表第二个操作。", "outputFormat": "若干行。对于每个查询操作，输出一行整数，代表查询的答案。", "hint": "对于 $100\\%$ 的数据，$2\\le n\\le 10^5$，$1\\le m\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P3039", "type": "P", "difficulty": 6, "samples": [["4 \n2 2 \n2 4 \n2 1 \n1 3 \n", "12 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "USACO"], "title": "[USACO12JAN] Delivery Route S", "background": null, "description": "FJ 有 $N\\ (1 \\le N \\le 100)$ 个农场，每个农场具有独立的整数坐标 $(x_i, y_i)\\ (1 \\le x_i,y_i \\le 10^6)$。他需要一个物资配送路线，从第 $1$ 个农场出发，依次经过农场 $1$，农场 $2$，农场 $3$……，最后从农场 $N$ 回到农场 $1$。\n\nFJ 每次只能朝东南西北四个方向行走，每行走一个单位长度需要 $1$ 分钟，除了农场 $1$，其他农场能且仅能到达一次。\n\n请计算 FJ 的最小时间花费。", "inputFormat": "第一行一个正整数 $N$。\n\n下面 $N$ 行，每行两个正整数 $x_i,y_i$。", "outputFormat": "一行一个整数表示答案。", "hint": "样例中的最优方案是 $1 \\to 2 \\to 3 \\to 4 \\to 1$，需要 $12$ 分钟。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO12JAN] Delivery Route S", "background": null, "description": "After several years of record milk production, Farmer John now operates an entire network of N farms (1 <= N <= 100). Farm i is located at position (x_i, y_i) in the 2D plane, distinct from all other farms, with both x_i and y_i being integers.\n\nFJ needs your help planning his daily delivery route to bring supplies to the N farms. Starting from farm 1, he plans to visit the farms sequentially (farm 1, then farm 2, then farm 3, etc.), finally returning to farm 1 after visiting farm N. It tames FJ one minute to make a single step either north, south, east, or west. Furthermore, FJ wants to visit each farm exactly once during his entire journey (except farm 1, which he visits twice of course).\n\nPlease help FJ determine the minimum amount of time it will take him to complete his entire delivery route.", "inputFormat": "* Line 1: The number of farms, N.\n\n* Lines 2..1+N: Line i+1 contains two space-separated integers, x_i and y_i (1 <= x_i, y_i <= 1,000,000).", "outputFormat": "* Line 1: The minimum number of minutes FJ needs to complete his delivery route, or -1 if it is impossible to find a feasible delivery route that visits every farm exactly once (except farm 1).", "hint": "FJ can complete his delivery route in 12 minutes: 2 minutes to go from farm 1 to farm 2, 5 minutes to go from farm 2 to farm 3 (circumventing farm 1), 3 minutes to go from farm 3 to farm 4, and then 2 minutes to return to farm 1.", "locale": "en"}, "zh-CN": {"title": "[USACO12JAN] Delivery Route S", "background": null, "description": "FJ 有 $N\\ (1 \\le N \\le 100)$ 个农场，每个农场具有独立的整数坐标 $(x_i, y_i)\\ (1 \\le x_i,y_i \\le 10^6)$。他需要一个物资配送路线，从第 $1$ 个农场出发，依次经过农场 $1$，农场 $2$，农场 $3$……，最后从农场 $N$ 回到农场 $1$。\n\nFJ 每次只能朝东南西北四个方向行走，每行走一个单位长度需要 $1$ 分钟，除了农场 $1$，其他农场能且仅能到达一次。\n\n请计算 FJ 的最小时间花费。", "inputFormat": "第一行一个正整数 $N$。\n\n下面 $N$ 行，每行两个正整数 $x_i,y_i$。", "outputFormat": "一行一个整数表示答案。", "hint": "样例中的最优方案是 $1 \\to 2 \\to 3 \\to 4 \\to 1$，需要 $12$ 分钟。", "locale": "zh-CN"}}}
{"pid": "P3040", "type": "P", "difficulty": 3, "samples": [["8 \n14 \n2 \n5 \n15 \n8 \n9 \n20 \n4 \n", "26 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "USACO"], "title": "[USACO12JAN] Bale Share S", "background": "", "description": "FJ 有 $n$ 包干草，第 $i$ 干草的重量是 $s_i$，他想尽可能平均地将干草分给三个农场。\n\n他希望分配后的干草重量最大值尽可能地小，比如，$b_1,b_2,b_3$ 是分配后的三个值，假设 $b_1 \\ge b_2 \\ge b_3$，则他希望 $b_1$ 的值尽可能地小。\n\n请计算 $b_1$ 的最小值。\n", "inputFormat": "第一行一个正整数 $n$。  \n接下来 $n$ 行，每行一个正整数表示重量。", "outputFormat": "输出一行一个整数表示答案。", "hint": "【样例解释】  \n一种满足要求的分配方案是：  \n农场 1: $2,9,15$，$b_1 = 26$   \n农场 2: $4,8,14$，$b_2 = 26$   \n农场 3: $5,20$，$b_3 = 25$   \n\n【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 20$，$1 \\le s_i \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO12JAN] Bale Share S", "background": "", "description": "FJ has $n$ hay bales, and the weight of the $i$-th bale is $s_i$. He wants to distribute the hay as evenly as possible among three farms.\n\nHe wants the maximum total weight after distribution to be as small as possible. For example, let $b_1, b_2, b_3$ be the total weights assigned to the three farms after distribution. Assume $b_1 \\ge b_2 \\ge b_3$. He wants the value of $b_1$ to be as small as possible.\n\nPlease compute the minimal possible value of $b_1$.", "inputFormat": "The first line contains a positive integer $n$.  \nEach of the next $n$ lines contains a positive integer representing a weight.", "outputFormat": "Output a single line containing one integer, the answer.", "hint": "[Sample Explanation]  \nOne valid distribution is:  \nFarm 1: $2,9,15$, $b_1 = 26$.  \nFarm 2: $4,8,14$, $b_2 = 26$.  \nFarm 3: $5,20$, $b_3 = 25$.\n\nConstraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 20$, $1 \\le s_i \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO12JAN] Bale Share S", "background": "", "description": "FJ 有 $n$ 包干草，第 $i$ 干草的重量是 $s_i$，他想尽可能平均地将干草分给三个农场。\n\n他希望分配后的干草重量最大值尽可能地小，比如，$b_1,b_2,b_3$ 是分配后的三个值，假设 $b_1 \\ge b_2 \\ge b_3$，则他希望 $b_1$ 的值尽可能地小。\n\n请计算 $b_1$ 的最小值。\n", "inputFormat": "第一行一个正整数 $n$。  \n接下来 $n$ 行，每行一个正整数表示重量。", "outputFormat": "输出一行一个整数表示答案。", "hint": "【样例解释】  \n一种满足要求的分配方案是：  \n农场 1: $2,9,15$，$b_1 = 26$   \n农场 2: $4,8,14$，$b_2 = 26$   \n农场 3: $5,20$，$b_3 = 25$   \n\n【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 20$，$1 \\le s_i \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P3041", "type": "P", "difficulty": 6, "samples": [["3 7 \nABA \nCB \nABACB \n", "4 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2012", "USACO", "O2优化", "AC 自动机"], "title": "[USACO12JAN] Video Game G", "background": "", "description": "Bessie 在玩一款游戏，该游戏只有三个技能键 `A`，`B`，`C` 可用，但这些键可用形成 $n$ 种特定的组合技。第 $i$ 个组合技用一个字符串 $s_i$ 表示。\n\nBessie 会输入一个长度为 $k$ 的字符串 $t$，而一个组合技每在 $t$ 中出现一次，Bessie 就会获得一分。$s_i$ 在 $t$ 中出现一次指的是 $s_i$ 是 $t$ 从某个位置起的连续子串。如果 $s_i$ 从 $t$ 的多个位置起都是连续子串，那么算作 $s_i$ 出现了多次。\n\n若 Bessie 输入了恰好 $k$ 个字符，则她最多能获得多少分？", "inputFormat": "输入的第一行是两个整数，分别表示组合技个数 $n$ 和 Bessie 输入的字符数 $k$。\n\n接下来 $n$ 行，每行一个字符串 $s_i$，表示一种组合技。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 样例 1 解释\n\nBessie 如果输入 `ABACBCB`，则 `ABA` 出现了一次，`ABACB` 出现了一次，`CB` 出现了两次，共得到 $4$ 分。可以证明这是最优的输入。\n\n#### 数据规模与约定\n\n对于全部的测试点，保证：\n\n- $1 \\leq n \\leq 20$，$1 \\leq k \\leq 10^3$。\n- $1 \\leq |s_i| \\leq 15$。其中 $|s_i|$ 表示字符串 $s_i$ 的长度。\n- $s$ 中只含大写字母 `A`，`B`，`C`。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO12JAN] Video Game G", "background": "", "description": "Bessie is playing a game with only three skill keys `A`, `B`, `C` available, and these keys can form $n$ specific combos. The $i$-th combo is represented by a string $s_i$.\n\nBessie will input a string $t$ of length $k$, and each time a combo appears in $t$, Bessie scores one point. An occurrence of $s_i$ in $t$ means that $s_i$ is a contiguous substring of $t$ starting at some position. If $s_i$ is a contiguous substring starting at multiple positions in $t$, it is counted multiple times.\n\nIf Bessie inputs exactly $k$ characters, what is the maximum score she can get?", "inputFormat": "The first line contains two integers, the number of combos $n$ and the number of characters Bessie inputs $k$.\n\nThen $n$ lines follow, each containing a string $s_i$ representing a combo.", "outputFormat": "Output a single integer representing the answer.", "hint": "Sample 1 Explanation.\n\nIf Bessie inputs `ABACBCB`, then `ABA` appears once, `ABACB` appears once, and `CB` appears twice, for a total of $4$ points. This can be proven optimal.\n\nConstraints\n\nFor all testdata, it is guaranteed that:\n- $1 \\le n \\le 20$, $1 \\le k \\le 10^3$.\n- $1 \\le |s_i| \\le 15$. Here $|s_i|$ denotes the length of string $s_i$.\n- All strings contain only the uppercase letters `A`, `B`, `C`.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO12JAN] Video Game G", "background": "", "description": "Bessie 在玩一款游戏，该游戏只有三个技能键 `A`，`B`，`C` 可用，但这些键可用形成 $n$ 种特定的组合技。第 $i$ 个组合技用一个字符串 $s_i$ 表示。\n\nBessie 会输入一个长度为 $k$ 的字符串 $t$，而一个组合技每在 $t$ 中出现一次，Bessie 就会获得一分。$s_i$ 在 $t$ 中出现一次指的是 $s_i$ 是 $t$ 从某个位置起的连续子串。如果 $s_i$ 从 $t$ 的多个位置起都是连续子串，那么算作 $s_i$ 出现了多次。\n\n若 Bessie 输入了恰好 $k$ 个字符，则她最多能获得多少分？", "inputFormat": "输入的第一行是两个整数，分别表示组合技个数 $n$ 和 Bessie 输入的字符数 $k$。\n\n接下来 $n$ 行，每行一个字符串 $s_i$，表示一种组合技。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 样例 1 解释\n\nBessie 如果输入 `ABACBCB`，则 `ABA` 出现了一次，`ABACB` 出现了一次，`CB` 出现了两次，共得到 $4$ 分。可以证明这是最优的输入。\n\n#### 数据规模与约定\n\n对于全部的测试点，保证：\n\n- $1 \\leq n \\leq 20$，$1 \\leq k \\leq 10^3$。\n- $1 \\leq |s_i| \\leq 15$。其中 $|s_i|$ 表示字符串 $s_i$ 的长度。\n- $s$ 中只含大写字母 `A`，`B`，`C`。", "locale": "zh-CN"}}}
{"pid": "P3042", "type": "P", "difficulty": 6, "samples": [["2 2 0 \nTT \n1 0 0 0 0 0 0 1 \n0 1 1 1 0 0 1 0 \n", "TB \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2012", "USACO", "连通块", "队列"], "title": "[USACO12JAN] Cow Run G", "background": "", "description": "Farmer John and Bessie have devised a new exercise game for the cows.  The cows are running on a circular track of length M (2 <= M <= 1,000,000,000) starting from the same position.  The game proceeds in N (1 <= N <= 14) rounds using a deck of 8N cards each with a number X\\_i (0 <= X\\_i < M) written on it.\n\nEach round FJ moves the top 8 cards into a separate pile and selects either the top 4 or bottom 4 cards for Bessie to play with.  Bessie then chooses either the top 2 cards or bottom 2 cards of the 4 cards FJ selected.  After this FJ calls out the number on the top card, X\\_top, and the cows run a distance of R \\* X\\_top, where R is the total distance the cows have run so far.  Bessie then calls out the number on the bottom card, X\\_bottom, and the cows run a distance of X\\_bottom.\n\nFJ is concerned that after the exercise the cows will be too tired to get back to the beginning of the track if they end up too far away.  He believes if the cows end up more than a distance of K (0 <= K <= floor(M/2)) from their starting position they won't be able to get back home.\n\nIt is guaranteed that if FJ plays correctly, he will always be able to ensure the cows can come home, irrespective of the moves made by Bessie! For each round, your task is to determine which half of the cards FJ should choose such that no matter what Bessie does from that point on, FJ can always get the cows home.  Bessie will then make the move provided in the input and you can then continue onto the next round.  Note that even though Bessie's moves are provided to you in the input, you are to specify moves for FJ that would have worked no matter what Bessie chooses (so it is effectively as if FJ does not really know what Bessie will do during her moves).\n", "inputFormat": "\\* Line 1: Three space-separated integers N, M, K\n\n\\* Line 2: A string N characters.  If the ith character is 'T' it means Bessie will select the top 2 cards in the ith round.  Otherwise the ith character will be 'B' to indicate Bessie will select the bottom 2 cards in the ith round.\n\n\\* Lines 3..2+N: Each line contains eight integers representing the 8 cards to be used that round from top to bottom.\n", "outputFormat": "\\* Line 1: A string of N characters where the ith character is 'T' if FJ should choose the top 4 cards or 'B' if FJ should choose the bottom 4 cards in the ith round.  If there are multiple ways to get the cows home, choose the lexicographically first (that is, the string that is alphabetically smallest).\n", "hint": "The cows must end up exactly where they started to be able to come home. Note that FJ is not aware of what choices Bessie is going to make beforehand.  If FJ did know, he could have chosen the bottom half each time.\n", "locale": "en", "translations": {"en": {"title": "[USACO12JAN] Cow Run G", "background": "", "description": "Farmer John and Bessie have devised a new exercise game for the cows.  The cows are running on a circular track of length M (2 <= M <= 1,000,000,000) starting from the same position.  The game proceeds in N (1 <= N <= 14) rounds using a deck of 8N cards each with a number X\\_i (0 <= X\\_i < M) written on it.\n\nEach round FJ moves the top 8 cards into a separate pile and selects either the top 4 or bottom 4 cards for Bessie to play with.  Bessie then chooses either the top 2 cards or bottom 2 cards of the 4 cards FJ selected.  After this FJ calls out the number on the top card, X\\_top, and the cows run a distance of R \\* X\\_top, where R is the total distance the cows have run so far.  Bessie then calls out the number on the bottom card, X\\_bottom, and the cows run a distance of X\\_bottom.\n\nFJ is concerned that after the exercise the cows will be too tired to get back to the beginning of the track if they end up too far away.  He believes if the cows end up more than a distance of K (0 <= K <= floor(M/2)) from their starting position they won't be able to get back home.\n\nIt is guaranteed that if FJ plays correctly, he will always be able to ensure the cows can come home, irrespective of the moves made by Bessie! For each round, your task is to determine which half of the cards FJ should choose such that no matter what Bessie does from that point on, FJ can always get the cows home.  Bessie will then make the move provided in the input and you can then continue onto the next round.  Note that even though Bessie's moves are provided to you in the input, you are to specify moves for FJ that would have worked no matter what Bessie chooses (so it is effectively as if FJ does not really know what Bessie will do during her moves).\n", "inputFormat": "\\* Line 1: Three space-separated integers N, M, K\n\n\\* Line 2: A string N characters.  If the ith character is 'T' it means Bessie will select the top 2 cards in the ith round.  Otherwise the ith character will be 'B' to indicate Bessie will select the bottom 2 cards in the ith round.\n\n\\* Lines 3..2+N: Each line contains eight integers representing the 8 cards to be used that round from top to bottom.\n", "outputFormat": "\\* Line 1: A string of N characters where the ith character is 'T' if FJ should choose the top 4 cards or 'B' if FJ should choose the bottom 4 cards in the ith round.  If there are multiple ways to get the cows home, choose the lexicographically first (that is, the string that is alphabetically smallest).\n", "hint": "The cows must end up exactly where they started to be able to come home. Note that FJ is not aware of what choices Bessie is going to make beforehand.  If FJ did know, he could have chosen the bottom half each time.\n", "locale": "en"}, "zh-CN": {"title": "[USACO12JAN] Cow Run G", "background": "", "description": "农夫 John 和 Bessie 为奶牛们设计了一种新的运动游戏。奶牛们从同一位置开始，在一个长度为 $M$ 的圆形跑道上奔跑，其中 $2 \\leq M \\leq 1,000,000,000$。游戏进行 $N$ 轮（$1 \\leq N \\leq 14$），使用一副 $8N$ 张的牌，每张牌上写有一个数字 $X_i$，其中 $0 \\leq X_i < M$。\n\n每一轮，FJ 将顶部的 8 张牌移到一个单独的牌堆中，并选择顶部 4 张或底部 4 张牌供 Bessie 使用。然后 Bessie 从 FJ 选择的 4 张牌中选择顶部 2 张或底部 2 张牌。之后，FJ 报出顶部牌上的数字 $X_{\\text{top}}$，奶牛们跑 $R \\times X_{\\text{top}}$ 的距离，其中 $R$ 是奶牛们到目前为止跑过的总距离。接着 Bessie 报出底部牌上的数字 $X_{\\text{bottom}}$，奶牛们再跑 $X_{\\text{bottom}}$ 的距离。\n\nFJ 担心在运动后，奶牛们会太累而无法回到跑道的起点，如果它们离起点的距离超过 $K$，它们就无法回家，其中 $0 \\leq K \\leq \\lfloor \\frac{M}{2} \\rfloor$。\n\n可以保证，如果 FJ 正确地进行游戏，他总能确保奶牛们能够回家，无论 Bessie 做出什么选择！对于每一轮，你的任务是确定 FJ 应该选择哪一半的牌，以便无论 Bessie **从那时起**做出什么选择，FJ 总能让奶牛们回家。Bessie 将根据输入提供的选择进行移动，然后你可以继续进行下一轮。注意，尽管 Bessie 的选择在输入中提供给你，但你需要为 FJ 指定无论 Bessie 选择什么都能奏效的策略（因此实际上 FJ 并不知道 Bessie 在她的回合中会做什么）。\n", "inputFormat": "\\* 第 1 行：三个用空格分隔的整数 $N$、$M$、$K$。\n\n\\* 第 2 行：一个长度为 $N$ 的字符串。如果第 $i$ 个字符是 'T'，表示 Bessie 在第 $i$ 轮中选择顶部 2 张牌。否则，第 $i$ 个字符将是 'B'，表示 Bessie 选择底部 2 张牌。\n\n\\* 第 3 行到第 $2+N$ 行：每行包含 8 个整数，表示该轮从顶部到底部使用的 8 张牌。\n", "outputFormat": "\\* 第 1 行：一个长度为 $N$ 的字符串，其中第 $i$ 个字符是 'T'，如果 FJ 应该在第 $i$ 轮中选择顶部 4 张牌；如果 FJ 应该选择底部 4 张牌，则为 'B'。如果有多种方法可以让奶牛们回家，选择字典序最小的（即字母顺序最小的字符串）。\n", "hint": "奶牛们必须准确地回到起点才能回家。注意，FJ 事先不知道 Bessie 会做出什么选择。如果 FJ 知道，他每次都可以选择底部一半。\n（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P3043", "type": "P", "difficulty": 5, "samples": [["5 4 \n1 2 \n3 2 \n4 5 \n4 5 \n", "6 \n"], ["6 5\n1 2\n2 3\n3 4\n1 4\n2 4", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2012", "USACO", "连通块"], "title": "[USACO12JAN] Bovine Alliance G", "background": null, "description": "给出 $N$ 个点 $M$ 条边的（没有自环但可能有重边的）无向图，要求给每个点分配 $0$ 条或 $1$ 条与它相邻的边，使得每条边被分配恰好一次，求方案数。答案对 $10^9+7$ 取模。", "inputFormat": "第一行两个正整数 $N,M$，其中 $1 \\le M < N \\le 10^5$。\n\n下面 $M$ 行，每行两个正整数 $u,v$ 表示一条无向边 $(u,v)$，其中 $1 \\le u,v \\le N$。", "outputFormat": "一行一个整数表示答案。", "hint": "样例 $1$ 的 $6$ 种方案如下。\n\n$4$ 个数分别代表第 $1\\sim 4$ 条边被分配给了哪个点：\n\n```plain\n{2, 3, 4, 5} \n{2, 3, 5, 4} \n{1, 3, 4, 5} \n{1, 3, 5, 4} \n{1, 2, 4, 5} \n{1, 2, 5, 4} \n```", "locale": "zh-CN", "translations": {"en": {"title": "[USACO12JAN] Bovine Alliance G", "background": null, "description": "Bessie and her bovine pals from nearby farms have finally decided that they are going to start connecting their farms together by trails in an effort to form an alliance against the farmers. The cows in each of the N (1 <= N <= 100,000) farms were initially instructed to build a trail to exactly one other farm, for a total of N trails. However months into the project only M (1 <= M < N) of these trails had actually been built.\n\nArguments between the farms over which farms already built a trail now threaten to split apart the cow alliance. To ease tension, Bessie wishes to calculate how many ways the M trails that exist so far could have been built. For example, if there is a trail connecting farms 3 and 4, then one possibility is that farm 3 built the trail, and the other possibility is that farm 4 built the trail. Help Bessie by calculating the number of different assignments of trails to the farms that built them, modulo 1,000,000,007. Two assignments are considered different if there is at least one trail built by a different farm in each assignment.", "inputFormat": "* Line 1: Two space-separated integers N and M\n\n* Lines 2..1+M: Line i+1 describes the ith trail. Each line contains two space-separated integers u_i and v_i (1 <= u_i, v_i <= N, u_i != v_i) describing the pair of farms connected by the trail.", "outputFormat": "* Line 1: A single line containing the number of assignments of trails to farms, taken modulo 1,000,000,007. If no assignment satisfies the above conditions output 0.", "hint": "Note that there can be two trails between the same pair of farms.\n\nThere are 6 possible assignments. Letting {a,b,c,d} mean that farm 1 builds trail a, farm 2 builds trail b, farm 3 builds trail c, and farm 4 builds trail d, the assignments are:\n\n```plain\n{2, 3, 4, 5} \n{2, 3, 5, 4} \n{1, 3, 4, 5} \n{1, 3, 5, 4} \n{1, 2, 4, 5} \n{1, 2, 5, 4} \n```", "locale": "en"}, "zh-CN": {"title": "[USACO12JAN] Bovine Alliance G", "background": null, "description": "给出 $N$ 个点 $M$ 条边的（没有自环但可能有重边的）无向图，要求给每个点分配 $0$ 条或 $1$ 条与它相邻的边，使得每条边被分配恰好一次，求方案数。答案对 $10^9+7$ 取模。", "inputFormat": "第一行两个正整数 $N,M$，其中 $1 \\le M < N \\le 10^5$。\n\n下面 $M$ 行，每行两个正整数 $u,v$ 表示一条无向边 $(u,v)$，其中 $1 \\le u,v \\le N$。", "outputFormat": "一行一个整数表示答案。", "hint": "样例 $1$ 的 $6$ 种方案如下。\n\n$4$ 个数分别代表第 $1\\sim 4$ 条边被分配给了哪个点：\n\n```plain\n{2, 3, 4, 5} \n{2, 3, 5, 4} \n{1, 3, 4, 5} \n{1, 3, 5, 4} \n{1, 2, 4, 5} \n{1, 2, 5, 4} \n```", "locale": "zh-CN"}}}
{"pid": "P3044", "type": "P", "difficulty": 5, "samples": [["5 6 3 \n1 \n2 \n3 \n1 2 1 \n1 5 2 \n3 2 3 \n3 4 5 \n4 2 7 \n4 5 10 \n", "12 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "USACO"], "title": "[USACO12FEB] Relocation S", "background": "", "description": "Farmer John is moving!  He is trying to find the best place to build a new farm so as to minimize the amount of travel he needs to do each day.\n\nThe region to which FJ plans to move has N towns (1 <= N <= 10,000).  There are M bi-directional roads (1 <= M <= 50,000) connecting certain pairs of towns.  All towns are reachable from each-other via some combination of roads.  FJ needs your help selecting the best town as the home for his new farm.\n\nThere are markets in K of the towns (1 <= K <= 5) that FJ wants to visit every day.  In particular, every day he plans to leave his new farm, visit the K towns with markets, and then return to his farm.  FJ can visit the markets in any order he wishes.  When selecting a town in which to build his new farm, FJ wants to choose only from the N-K towns that do not have markets, since housing prices are lower in those towns.\n\nPlease help FJ compute the minimum distance he will need to travel during his daily schedule, if he builds his farm in an optimal location and chooses his travel schedule to the markets as smartly as possible.\n\nFJ决定搬家，重新建设农场，以便最小化他每天的行程。\n\n\nFJ搬往的区域有N(1 <= N <= 10,000)个城镇，共有M (1 <= M <= 50,000)条双向道路连接某些城镇，所有城镇都能找到互通路线。\n\n\n有K (1 <= K <= 5)个城镇建有市场，FJ每天离开新农场后，都要光顾这K个城镇，并返回农场。FJ希望建设农场的城镇不包含市场。\n\n\n请帮助FJ选择最佳城镇建设农场，使得他每天的行程最小。\n", "inputFormat": "\\* Line 1: Three space-separated integers, N, M, and K.\n\n\\* Lines 2..1+K: Line i+1 contains an integer in the range 1...N identifying the town containing the ith market.  Each market is in a different town.\n\n\\* Lines 2+K..1+K+M: Each line contains 3 space-separated integers, i, j (1 <= i,j <= N), and L (1 <= L <= 1000), indicating the presence of a road of length L from town i to town j.\n", "outputFormat": "\\* Line 1: The minimum distance FJ needs to travel during his daily routine, if he builds his farm in an optimal location.\n", "hint": "There are 5 towns, with towns 1, 2, and 3 having markets.  There are 6 roads.\n\n\nFJ builds his farm in town 5.  His daily schedule takes him through towns 5-1-2-3-2-1-5, for a total distance of 12.\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO12FEB] Relocation S", "background": "", "description": "Farmer John is moving and wants to build a new farm so that his daily travel distance is minimized.\n\nThe region has $N$ towns ($1 \\le N \\le 10{,}000$). There are $M$ bidirectional roads ($1 \\le M \\le 50{,}000$) connecting certain pairs of towns, and every town is reachable from every other town by some combination of roads. There are markets in $K$ towns ($1 \\le K \\le 5$) that FJ wants to visit every day. Each day, he will leave his new farm, visit all $K$ market towns in any order he chooses, and then return to his farm.\n\nWhen choosing a town for his new farm, FJ will only consider the $N - K$ towns that do not have markets, since housing prices are lower in those towns.\n\nPlease compute the minimum total distance FJ needs to travel in his daily routine if he builds his farm in an optimal town and plans his route to the markets optimally.", "inputFormat": "- Line 1: Three space-separated integers $N$, $M$, and $K$.\n- Lines $2 \\ldots 1+K$: Line $i+1$ contains an integer in the range $1 \\ldots N$ identifying the town containing the $i$-th market. Each market is in a different town.\n- Lines $2+K \\ldots 1+K+M$: Each line contains three space-separated integers $i$, $j$ ($1 \\le i, j \\le N$), and $L$ ($1 \\le L \\le 1000$), indicating a bidirectional road of length $L$ between towns $i$ and $j$.", "outputFormat": "- Line 1: The minimum distance FJ needs to travel during his daily routine, if he builds his farm in an optimal location.", "hint": "There are $5$ towns, with towns $1$, $2$, and $3$ having markets. There are $6$ roads. FJ builds his farm in town $5$. His daily route is $5$-$1$-$2$-$3$-$2$-$1$-$5$, for a total distance of $12$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO12FEB] Relocation S", "background": "", "description": "Farmer John is moving!  He is trying to find the best place to build a new farm so as to minimize the amount of travel he needs to do each day.\n\nThe region to which FJ plans to move has N towns (1 <= N <= 10,000).  There are M bi-directional roads (1 <= M <= 50,000) connecting certain pairs of towns.  All towns are reachable from each-other via some combination of roads.  FJ needs your help selecting the best town as the home for his new farm.\n\nThere are markets in K of the towns (1 <= K <= 5) that FJ wants to visit every day.  In particular, every day he plans to leave his new farm, visit the K towns with markets, and then return to his farm.  FJ can visit the markets in any order he wishes.  When selecting a town in which to build his new farm, FJ wants to choose only from the N-K towns that do not have markets, since housing prices are lower in those towns.\n\nPlease help FJ compute the minimum distance he will need to travel during his daily schedule, if he builds his farm in an optimal location and chooses his travel schedule to the markets as smartly as possible.\n\nFJ决定搬家，重新建设农场，以便最小化他每天的行程。\n\n\nFJ搬往的区域有N(1 <= N <= 10,000)个城镇，共有M (1 <= M <= 50,000)条双向道路连接某些城镇，所有城镇都能找到互通路线。\n\n\n有K (1 <= K <= 5)个城镇建有市场，FJ每天离开新农场后，都要光顾这K个城镇，并返回农场。FJ希望建设农场的城镇不包含市场。\n\n\n请帮助FJ选择最佳城镇建设农场，使得他每天的行程最小。\n", "inputFormat": "\\* Line 1: Three space-separated integers, N, M, and K.\n\n\\* Lines 2..1+K: Line i+1 contains an integer in the range 1...N identifying the town containing the ith market.  Each market is in a different town.\n\n\\* Lines 2+K..1+K+M: Each line contains 3 space-separated integers, i, j (1 <= i,j <= N), and L (1 <= L <= 1000), indicating the presence of a road of length L from town i to town j.\n", "outputFormat": "\\* Line 1: The minimum distance FJ needs to travel during his daily routine, if he builds his farm in an optimal location.\n", "hint": "There are 5 towns, with towns 1, 2, and 3 having markets.  There are 6 roads.\n\n\nFJ builds his farm in town 5.  His daily schedule takes him through towns 5-1-2-3-2-1-5, for a total distance of 12.\n", "locale": "zh-CN"}}}
{"pid": "P3045", "type": "P", "difficulty": 6, "samples": [["4 1 7 \n3 2 \n2 2 \n8 1 \n4 3 \n", "3 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2012", "USACO", "堆", "凸完全单调性（wqs 二分）", "反悔贪心"], "title": "[USACO12FEB] Cow Coupons G", "background": "Subtask 0 为原数据，Subtask 1,2 为 hack 数据。", "description": "FJ 准备买一些新奶牛。市场上有 $N$ 头奶牛，第 $i$ 头奶牛价格为 $P_i$。FJ 有 $K$ 张优惠券，使用优惠券购买第 $i$ 头奶牛时价格会降为 $C_i$，当然每头奶牛只能使用一次优惠券。FJ 想知道花不超过 $M$ 的钱最多可以买多少奶牛？", "inputFormat": "第一行包含三个整数 $N$，$K$ 和 $M$（含义见题目描述），以空格分隔。\n\n接下来 $N$ 行，第 $i+1$ 行包含两个整数 $P_i$ 和 $C_i$，以空格分隔。", "outputFormat": "输出仅一行，包含一个整数，为 FJ 花不超过 $M$ 的钱可以买的奶牛的最大数量。", "hint": "### 样例描述\n\n市场上有 $4$ 头奶牛，FJ 有 $1$ 张优惠券，可以花不超过 $7$ 元钱来买牛。\n\nFJ 使用唯一的 $1$ 张优惠券来买第三头牛，然后原价买入了第一、二头牛，总花费 $3+2+1=6$。\n\n### 数据范围\n\n- $1 \\le K \\le N \\le 5 \\times 10^4$\n- $1 \\le C_i \\le P_i \\le 10^9$\n- $1 \\le M \\le 10^{14}$", "locale": "zh-CN", "translations": {"en": {"title": "", "background": "", "description": "Farmer John needs new cows! There are N cows for sale (1 <= N <= 50,000), and FJ has to spend no more than his budget of M units of money (1 <= M <= 10^14).  Cow i costs P\\_i money (1 <= P\\_i <= 10^9), but FJ has K coupons (1 <= K <= N), and when he uses a coupon on cow i, the cow costs C\\_i instead (1 <= C\\_i <= P\\_i). FJ can only use one coupon per cow, of course.\n\nWhat is the maximum number of cows FJ can afford? ", "inputFormat": "\\* Line 1: Three space-separated integers: N, K, and M.\n\n\\* Lines 2..N+1: Line i+1 contains two integers: P\\_i and C\\_i.\n", "outputFormat": "\\* Line 1: A single integer, the maximum number of cows FJ can afford.\n", "hint": "FJ has 4 cows, 1 coupon, and a budget of 7.\n\n\nFJ uses the coupon on cow 3 and buys cows 1, 2, and 3, for a total cost of 3 + 2 + 1 = 6.\n", "locale": "en"}, "zh-CN": {"title": "[USACO12FEB] Cow Coupons G", "background": "Subtask 0 为原数据，Subtask 1,2 为 hack 数据。", "description": "FJ 准备买一些新奶牛。市场上有 $N$ 头奶牛，第 $i$ 头奶牛价格为 $P_i$。FJ 有 $K$ 张优惠券，使用优惠券购买第 $i$ 头奶牛时价格会降为 $C_i$，当然每头奶牛只能使用一次优惠券。FJ 想知道花不超过 $M$ 的钱最多可以买多少奶牛？", "inputFormat": "第一行包含三个整数 $N$，$K$ 和 $M$（含义见题目描述），以空格分隔。\n\n接下来 $N$ 行，第 $i+1$ 行包含两个整数 $P_i$ 和 $C_i$，以空格分隔。", "outputFormat": "输出仅一行，包含一个整数，为 FJ 花不超过 $M$ 的钱可以买的奶牛的最大数量。", "hint": "### 样例描述\n\n市场上有 $4$ 头奶牛，FJ 有 $1$ 张优惠券，可以花不超过 $7$ 元钱来买牛。\n\nFJ 使用唯一的 $1$ 张优惠券来买第三头牛，然后原价买入了第一、二头牛，总花费 $3+2+1=6$。\n\n### 数据范围\n\n- $1 \\le K \\le N \\le 5 \\times 10^4$\n- $1 \\le C_i \\le P_i \\le 10^9$\n- $1 \\le M \\le 10^{14}$", "locale": "zh-CN"}}}
{"pid": "P3046", "type": "P", "difficulty": 5, "samples": [["4 \n0 0 \n0 1 \n1 0 \n1 1 \n", "4 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "USACO", "离散化", "枚举"], "title": "[USACO12FEB] Symmetry G", "background": "", "description": "After taking a modern art class, Farmer John has become interested in finding geometric patterns in everything around his farm.  He carefully plots the locations of his N cows (2 <= N <= 1000), each one occupying a distinct point in the 2D plane, and he wonders how many different lines of symmetry exist for this set of points.  A line of symmetry, of course, is a line across which the points on both sides are mirror images of each-other.\n\nPlease help FJ answer this most pressing geometric question.\n\n\n", "inputFormat": "\\* Line 1: The single integer N.\n\n\\* Lines 2..1+N: Line i+1 contains two space-separated integers representing the x and y coordinates of the ith cow (-10,000 <= x,y <= 10,000).\n", "outputFormat": "\\* Line 1: The number of different lines of symmetry of the point set.\n", "hint": "The 4 cows form the corners of a square. \n\nThere are 4 lines of symmetry -- one vertical, one horizontal, and two diagonal.\n", "locale": "en", "translations": {"en": {"title": "[USACO12FEB] Symmetry G", "background": "", "description": "After taking a modern art class, Farmer John has become interested in finding geometric patterns in everything around his farm.  He carefully plots the locations of his N cows (2 <= N <= 1000), each one occupying a distinct point in the 2D plane, and he wonders how many different lines of symmetry exist for this set of points.  A line of symmetry, of course, is a line across which the points on both sides are mirror images of each-other.\n\nPlease help FJ answer this most pressing geometric question.\n\n\n", "inputFormat": "\\* Line 1: The single integer N.\n\n\\* Lines 2..1+N: Line i+1 contains two space-separated integers representing the x and y coordinates of the ith cow (-10,000 <= x,y <= 10,000).\n", "outputFormat": "\\* Line 1: The number of different lines of symmetry of the point set.\n", "hint": "The 4 cows form the corners of a square. \n\nThere are 4 lines of symmetry -- one vertical, one horizontal, and two diagonal.\n", "locale": "en"}, "zh-CN": {"title": "[USACO12FEB] Symmetry G", "background": "", "description": "在上了一门现代艺术课后，Farmer John 对在农场周围寻找几何图案产生了兴趣。他仔细地绘制了他的 N 头奶牛的位置（2 <= N <= 1000），每头奶牛占据二维平面中的一个不同的点，他想知道这些点集有多少条不同的对称轴。当然，对称轴是指在这条线上，两侧的点是彼此的镜像。\n\n请帮助 FJ 解答这个最紧迫的几何问题。\n\n\n", "inputFormat": "\\* 第 1 行：一个整数 N。\n\n\\* 第 2 行到第 1+N 行：第 i+1 行包含两个用空格分隔的整数，表示第 i 头奶牛的 x 和 y 坐标 (-10,000 <= x,y <= 10,000)。\n", "outputFormat": "\\* 第 1 行：点集的不同对称轴的数量。\n", "hint": "这 4 头奶牛形成一个正方形的四个角。\n\n有 4 条对称轴——一条垂直的，一条水平的，以及两条对角线。\n（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P3047", "type": "P", "difficulty": 4, "samples": [["6 2 \n5 1 \n3 6 \n2 4 \n2 1 \n3 2 \n1 \n2 \n3 \n4 \n5 \n6 \n", "15 \n21 \n16 \n10 \n8 \n11 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2012", "USACO", "树形 DP"], "title": "[USACO12FEB] Nearby Cows G", "background": null, "description": "FJ 注意到了他的奶牛经常在附近的田地移动。考虑到这个事情，他想要在每个田地里种足够的草，不仅是为了最初在那块地里的奶牛，也是为了从附近田地来的奶牛。\n\n特别地，FJ 的农场由 $N(1 \\leq N \\leq 100000)$ 个田地组成，某些田地之间由双向道路连接（一共有 $N-1$ 条）。对于田地 $i$，它是 $C_i$ 头奶牛的家，尽管奶牛有时能经过最多 $K$ 条边去到其它田地。\n\nFJ 想在任意一个田地 $i$ 中种足够的草去喂养最大数量的奶牛 $M_i$（最终可能到这块地的奶牛），即仅经过最多 $K(1 \\leq K \\leq 20)$ 条边到达这里的奶牛。给定农场的结构和每一个田地的奶牛数量 $C_i$，请求出对于任意一个 $i$ 求出对应的 $M_i$。", "inputFormat": "第一行两个正整数 $n,k$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示 $u,v$ 之间有一条边。\n\n最后 $n$ 行，每行一个非负整数 $C_i$。", "outputFormat": "输出 $n$ 行，第 $i$ 行一个整数表示 $m_i$。", "hint": "【样例解释】  \n有 $6$ 个田地，道路连接了 $(5,1),(3,6),(2,4),(2,1),(3,2)$。第 $i$ 个田地有 $C_i=i$ 头奶牛。有 $M_1=15$ 头奶牛与田地 $1$ 的距离不超过 $2$，等等。\n\n【数据范围】  \n对于 $100\\%$ 的数据：$1 \\le N \\le 10^5$，$1 \\le K \\le 20$，$0 \\le C_i \\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "P3047 - [USACO12FEB] Nearby Cows G", "background": null, "description": "Farmer John has noticed that his cows often move between nearby fields. Taking this into account, he wants to plant enough grass in each of his fields not only for the cows situated initially in that field, but also for cows visiting from nearby fields.\n\nSpecifically, FJ's farm consists of $N$ fields $(1 \\leq N \\leq 100,000)$, where some pairs of fields are connected with bi-directional trails ($N-1$ of them in total). FJ has designed the farm so that between any two fields $i$ and $j$, there is a unique path made up of trails connecting between $i$ and $j$. Field $i$ is home to $C_i$ cows, although cows sometimes move to a different field by crossing up to $K$ trails $(1 \\leq K \\leq 20)$.\n\nFJ wants to plant enough grass in each field $i$ to feed the maximum number of cows $M_i$ that could possibly end up in that field -- that is, the number of cows that can potentially reach field $i$ by following at most $K$ trails. Given the structure of FJ's farm and the value of $C_i$ for each field $i$, please help FJ compute $M_i$ for every field $i$.", "inputFormat": "* Line $1$: Two space-separated integers, $N$ and $K$.\n\n* Lines $2$ to $N$: Each line contains two space-separated integers, $i$ and $j$ $(1 \\leq i,j \\leq N)$ indicating that fields $i$ and $j$ are directly connected by a trail.\n\n* Lines $N+1$ to $2N$: Line $N+i$ contains the integer $C_i$. $(0 \\leq C_i \\leq 1000)$", "outputFormat": "* Lines $1$ to $N$: Line $i$ should contain the value of $M_i$.", "hint": "There are $6$ fields, with trails connecting $(5,1)$, $(3,6)$, $(2,4)$, $(2,1)$, and $(3,2)$. Field $i$ has $C_i = i$ cows.\n\nField $1$ has $M_1 = 15$ cows within a distance of $2$ trails, etc.", "locale": "en"}, "zh-CN": {"title": "[USACO12FEB] Nearby Cows G", "background": null, "description": "FJ 注意到了他的奶牛经常在附近的田地移动。考虑到这个事情，他想要在每个田地里种足够的草，不仅是为了最初在那块地里的奶牛，也是为了从附近田地来的奶牛。\n\n特别地，FJ 的农场由 $N(1 \\leq N \\leq 100000)$ 个田地组成，某些田地之间由双向道路连接（一共有 $N-1$ 条）。对于田地 $i$，它是 $C_i$ 头奶牛的家，尽管奶牛有时能经过最多 $K$ 条边去到其它田地。\n\nFJ 想在任意一个田地 $i$ 中种足够的草去喂养最大数量的奶牛 $M_i$（最终可能到这块地的奶牛），即仅经过最多 $K(1 \\leq K \\leq 20)$ 条边到达这里的奶牛。给定农场的结构和每一个田地的奶牛数量 $C_i$，请求出对于任意一个 $i$ 求出对应的 $M_i$。", "inputFormat": "第一行两个正整数 $n,k$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示 $u,v$ 之间有一条边。\n\n最后 $n$ 行，每行一个非负整数 $C_i$。", "outputFormat": "输出 $n$ 行，第 $i$ 行一个整数表示 $m_i$。", "hint": "【样例解释】  \n有 $6$ 个田地，道路连接了 $(5,1),(3,6),(2,4),(2,1),(3,2)$。第 $i$ 个田地有 $C_i=i$ 头奶牛。有 $M_1=15$ 头奶牛与田地 $1$ 的距离不超过 $2$，等等。\n\n【数据范围】  \n对于 $100\\%$ 的数据：$1 \\le N \\le 10^5$，$1 \\le K \\le 20$，$0 \\le C_i \\le 1000$。", "locale": "zh-CN"}}}
