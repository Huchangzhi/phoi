{"pid": "P2249", "type": "P", "difficulty": 2, "samples": [["11 3\n1 3 3 3 5 7 9 11 13 15 15\n1 3 6", "1 2 -1 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["二分"], "title": "【深基13.例1】查找", "background": "", "description": "输入 $n$ 个不超过 $10^9$ 的单调不减的（就是后面的数字不小于前面的数字）非负整数 $a_1,a_2,\\dots,a_{n}$，然后进行 $m$ 次询问。对于每次询问，给出一个整数 $q$，要求输出这个数字在序列中第一次出现的编号，如果没有找到的话输出 $-1$ 。", "inputFormat": "第一行 $2$ 个整数 $n$ 和 $m$，表示数字个数和询问次数。\n\n第二行 $n$ 个整数，表示这些待查询的数字。\n\n第三行 $m$ 个整数，表示询问这些数字的编号，从 $1$ 开始编号。", "outputFormat": "输出一行，$m$ 个整数，以空格隔开，表示答案。", "hint": "数据保证，$1 \\leq n \\leq 10^6$，$0 \\leq a_i,q \\leq 10^9$，$1 \\leq m \\leq 10^5$\n\n本题输入输出量较大，请使用较快的 IO 方式。", "locale": "zh-CN", "translations": {"en": {"title": "[Shenji 13. Example 1] Search", "background": "", "description": "Input $n$ non-negative integers $a_1, a_2, \\dots, a_n$ that are non-decreasing (meaning each later number is not smaller than the previous one), and each does not exceed $10^9$. Then perform $m$ queries. For each query, an integer $q$ is given. You need to output the index of the first occurrence of this number in the sequence. If it is not found, output $-1$.", "inputFormat": "The first line contains two integers $n$ and $m$, representing the number of integers and the number of queries.\n\nThe second line contains $n$ integers, representing the numbers to be queried.\n\nThe third line contains $m$ integers, representing the query numbers. The indices start from $1$.", "outputFormat": "Output one line containing $m$ integers separated by spaces, representing the answers.", "hint": "Constraints: $1 \\leq n \\leq 10^6$, $0 \\leq a_i, q \\leq 10^9$, $1 \\leq m \\leq 10^5$.\n\nThe input and output size of this problem is large. Please use fast I/O methods.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基13.例1】查找", "background": "", "description": "输入 $n$ 个不超过 $10^9$ 的单调不减的（就是后面的数字不小于前面的数字）非负整数 $a_1,a_2,\\dots,a_{n}$，然后进行 $m$ 次询问。对于每次询问，给出一个整数 $q$，要求输出这个数字在序列中第一次出现的编号，如果没有找到的话输出 $-1$ 。", "inputFormat": "第一行 $2$ 个整数 $n$ 和 $m$，表示数字个数和询问次数。\n\n第二行 $n$ 个整数，表示这些待查询的数字。\n\n第三行 $m$ 个整数，表示询问这些数字的编号，从 $1$ 开始编号。", "outputFormat": "输出一行，$m$ 个整数，以空格隔开，表示答案。", "hint": "数据保证，$1 \\leq n \\leq 10^6$，$0 \\leq a_i,q \\leq 10^9$，$1 \\leq m \\leq 10^5$\n\n本题输入输出量较大，请使用较快的 IO 方式。", "locale": "zh-CN"}}}
{"pid": "P2250", "type": "P", "difficulty": 4, "samples": [["54\nr218 m3 r1\n", "r1 m1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心"], "title": "二面体群", "background": null, "description": "考虑在一个单位圆周上的 $n$ 个点，$n$ 个点的标号为 $K=0,1,\\ldots,n-1$。初始的时候 $K$ 相对于 X 轴的角度为 $\\dfrac{360 \\times K}{n}$ 度，这里的角度是相对于 X 轴的逆时针角度。我们将在这组点上运行 2 种不同类型的操作：\n\n1. 顺时针旋转 $\\dfrac{360}{n}$度\n2. 相对于 X 轴的映射\n\n对于给定的操作序列，如果结果相同，我们只对最短的操作序列感兴趣。结果相同是指对于不同的操作序列，最后的操作结果中每一个单一点的位置都是一样的。\n\n操作序列以字符串的形式给出，该字符串中只含有字母 `r` 和 `m`。`r` 代表顺时针旋转，`m` 代表单独映射（到右边并且对称）。字符串中如果有多个字母连续出现要简写成 `<字母><数字>` 的形式，为了方便起见，字母如果单独出现也写成这种形式。如 `rrmrrrrrrrrrrrr` 可以写成 `r2 m1 r12`，每个操作序列一行。", "inputFormat": "输入共两行。\n\n第一行一个数 $N$，表示圆周上点的个数。\n\n第二行为按上面的方式缩写的操作序列，所有的数字都是正整数，并且小于$10^8$ 。在输入文件中没有空行，并且每一行的字符个数都小于 $10^5$。", "outputFormat": "输出最短操作序列。若无需操作则什么都不输出。", "hint": "$100\\%$ 的数据满足 $3 \\leq N \\leq 10^8$。", "locale": "zh-CN", "translations": {"en": {"title": "Dihedral Group", "background": "", "description": "Consider $n$ points on a unit circle, labeled $K=0,1,\\ldots,n-1$. Initially, the angle of $K$ relative to the X-axis is $\\dfrac{360 \\times k}{n}$ degrees, measured counterclockwise from the X-axis. We will perform two types of operations on this set of points:\n\n1. Rotate clockwise by $\\dfrac{360}{n}$ degrees.\n2. Reflect with respect to the X-axis.\n\nFor a given operation sequence, if the results are the same, we are only interested in the shortest operation sequence. “Results are the same” means that, for different operation sequences, the final position of each individual point is identical.\n\nOperation sequences are given as strings consisting only of the letters `r` and `m`. `r` denotes a clockwise rotation, and `m` denotes a reflection about the X-axis. If a letter appears consecutively, it must be abbreviated as <letter><number>. For convenience, a single letter is also written in this form. For example, `rrmrrrrrrrrrrrr` can be written as `r2 m1 r12`, one operation sequence per line.", "inputFormat": "The input consists of two lines.\n\nThe first line contains an integer $N$, the number of points on the circle.\n\nThe second line contains the operation sequence abbreviated as described above. All numbers are positive integers and less than $10^8$. There are no blank lines in the input file, and the number of characters on each line is less than $10^5$.", "outputFormat": "Output the shortest operation sequence. If no operation is needed, output nothing.", "hint": "$100\\%$ of the testdata satisfies $3 \\leq N \\leq 10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "二面体群", "background": null, "description": "考虑在一个单位圆周上的 $n$ 个点，$n$ 个点的标号为 $K=0,1,\\ldots,n-1$。初始的时候 $K$ 相对于 X 轴的角度为 $\\dfrac{360 \\times K}{n}$ 度，这里的角度是相对于 X 轴的逆时针角度。我们将在这组点上运行 2 种不同类型的操作：\n\n1. 顺时针旋转 $\\dfrac{360}{n}$度\n2. 相对于 X 轴的映射\n\n对于给定的操作序列，如果结果相同，我们只对最短的操作序列感兴趣。结果相同是指对于不同的操作序列，最后的操作结果中每一个单一点的位置都是一样的。\n\n操作序列以字符串的形式给出，该字符串中只含有字母 `r` 和 `m`。`r` 代表顺时针旋转，`m` 代表单独映射（到右边并且对称）。字符串中如果有多个字母连续出现要简写成 `<字母><数字>` 的形式，为了方便起见，字母如果单独出现也写成这种形式。如 `rrmrrrrrrrrrrrr` 可以写成 `r2 m1 r12`，每个操作序列一行。", "inputFormat": "输入共两行。\n\n第一行一个数 $N$，表示圆周上点的个数。\n\n第二行为按上面的方式缩写的操作序列，所有的数字都是正整数，并且小于$10^8$ 。在输入文件中没有空行，并且每一行的字符个数都小于 $10^5$。", "outputFormat": "输出最短操作序列。若无需操作则什么都不输出。", "hint": "$100\\%$ 的数据满足 $3 \\leq N \\leq 10^8$。", "locale": "zh-CN"}}}
{"pid": "P2251", "type": "P", "difficulty": 3, "samples": [["10 4\n16 5 6 9 5 13 14 20 8 12\n", "5\n5\n5\n5\n5\n8\n8\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["单调队列", "ST 表"], "title": "质量检测", "background": null, "description": "为了检测生产流水线上总共 $N$ 件产品的质量，我们首先给每一件产品打一个分数 $A$ 表示其品质，然后统计前 $M$ 件产品中质量最差的产品的分值 $Q_m = \\min\\{A_1, A_2, \\cdots, A_m\\}$，以及第 $2$ 至第 $M + 1$ 件的 $Q_{m + 1}$，$Q_{m + 2} $…… 最后统计第 $N - M + 1$ 至第 $N$ 件的 $Q_n$。根据 $Q$ 再做进一步评估。\n\n请你尽快求出 $Q$ 序列。", "inputFormat": "输入共两行。\n\n第一行共两个数 $N$、$M$，由空格隔开。含义如前述。\n\n第二行共 $N$ 个数，表示 $N$ 件产品的质量。", "outputFormat": "输出共 $N - M + 1$ 行。\n\n第 $1$ 至 $N - M + 1$ 行每行一个数，第 $i$ 行的数 $Q_{i + M - 1}$。含义如前述。", "hint": "[数据范围]\n\n对于 $30\\%$ 的数据，$N \\le 1 000$。\n\n对于 $100\\%$ 的数据，$M \\le N \\le 10^5, A_i \\le 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Quality Inspection", "background": "", "description": "To check the quality of a total of $N$ products on a production line, we first assign each product a score $A$ indicating its quality. Then we compute $Q_m = \\min\\{A_1, A_2, \\cdots, A_m\\}$, the score of the worst-quality product among the first $M$ products, and similarly compute the $Q_{m + 1}$ for products $2$ through $M + 1$, $Q_{m + 2}$ for products $3$ through $M + 2$, ... Finally, compute $Q_n$ for products $N - M + 1$ through $N$. We will further evaluate based on $Q$.\n\nPlease compute the sequence $Q$ as quickly as possible.", "inputFormat": "The input contains two lines.\n\nThe first line contains two numbers $N$ and $M$, separated by a space, as described above.\n\nThe second line contains $N$ numbers, representing the quality scores of the $N$ products.", "outputFormat": "Output $N - M + 1$ lines.\n\nLines $1$ through $N - M + 1$ each contain one number. On line $i$, output $Q_{i + M - 1}$, as described above.", "hint": "[Constraints]\n\nFor $30\\%$ of the testdata, $N \\le 1 000$.\n\nFor $100\\%$ of the testdata, $M \\le N \\le 10^5, A_i \\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "质量检测", "background": null, "description": "为了检测生产流水线上总共 $N$ 件产品的质量，我们首先给每一件产品打一个分数 $A$ 表示其品质，然后统计前 $M$ 件产品中质量最差的产品的分值 $Q_m = \\min\\{A_1, A_2, \\cdots, A_m\\}$，以及第 $2$ 至第 $M + 1$ 件的 $Q_{m + 1}$，$Q_{m + 2} $…… 最后统计第 $N - M + 1$ 至第 $N$ 件的 $Q_n$。根据 $Q$ 再做进一步评估。\n\n请你尽快求出 $Q$ 序列。", "inputFormat": "输入共两行。\n\n第一行共两个数 $N$、$M$，由空格隔开。含义如前述。\n\n第二行共 $N$ 个数，表示 $N$ 件产品的质量。", "outputFormat": "输出共 $N - M + 1$ 行。\n\n第 $1$ 至 $N - M + 1$ 行每行一个数，第 $i$ 行的数 $Q_{i + M - 1}$。含义如前述。", "hint": "[数据范围]\n\n对于 $30\\%$ 的数据，$N \\le 1 000$。\n\n对于 $100\\%$ 的数据，$M \\le N \\le 10^5, A_i \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P2252", "type": "P", "difficulty": 6, "samples": [["8 4\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "博弈论", "2002", "各省省选", "上海", "模板题"], "title": "【模板】威佐夫博弈 / [SHOI2002] 取石子游戏", "background": "", "description": "有两堆石子，数量任意，可以不同。游戏开始由两个人轮流取石子。游戏规定，每次有两种不同的取法：一是可以在任意的一堆中取走任意多的石子；二是可以在两堆中同时取走相同数量的石子。最后把石子全部取完者为胜者。现在给出初始的两堆石子的数目，你先取，假设双方都采取最好的策略，问最后你是胜者还是败者。\n", "inputFormat": "输入共一行。\n\n第一行共两个数 $a, b$，表示石子的初始情况。\n", "outputFormat": "输出共一行。\n\n第一行为一个数字 $1,0$ 或 $-1$，如果最后你是胜利者则为 $1$；若失败则为 $0$；若结果无法确定则为 $-1$。\n", "hint": "**数据范围**\n\n$50\\%$ 的数据满足 $a, b \\le 1000$；\n\n$100\\%$ 的数据满足 $a, b \\le 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Wythoff Game / [SHOI2002] Take Stones Game", "background": "", "description": "There are two piles of stones, with arbitrary (possibly different) counts. Two players take turns. Each move is one of the following:\n- Remove any number of stones from exactly one pile.\n- Remove the same number of stones from both piles simultaneously.\n\nThe player who takes the last stones wins. Given the initial numbers of stones in the two piles, you move first. Assuming both players play optimally, determine whether you will win or lose.", "inputFormat": "The input consists of a single line.\n\nThe only line contains two integers $a, b$, representing the initial numbers of stones.", "outputFormat": "The output consists of a single line.\n\nOutput a single integer $1$, $0$, or $-1$: output $1$ if you will win; output $0$ if you will lose; output $-1$ if the result cannot be determined.", "hint": "Constraints\n\n$50\\%$ of the testdata satisfy $a, b \\le 1000$.\n\n$100\\%$ of the testdata satisfy $a, b \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】威佐夫博弈 / [SHOI2002] 取石子游戏", "background": "", "description": "有两堆石子，数量任意，可以不同。游戏开始由两个人轮流取石子。游戏规定，每次有两种不同的取法：一是可以在任意的一堆中取走任意多的石子；二是可以在两堆中同时取走相同数量的石子。最后把石子全部取完者为胜者。现在给出初始的两堆石子的数目，你先取，假设双方都采取最好的策略，问最后你是胜者还是败者。\n", "inputFormat": "输入共一行。\n\n第一行共两个数 $a, b$，表示石子的初始情况。\n", "outputFormat": "输出共一行。\n\n第一行为一个数字 $1,0$ 或 $-1$，如果最后你是胜利者则为 $1$；若失败则为 $0$；若结果无法确定则为 $-1$。\n", "hint": "**数据范围**\n\n$50\\%$ 的数据满足 $a, b \\le 1000$；\n\n$100\\%$ 的数据满足 $a, b \\le 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2254", "type": "P", "difficulty": 5, "samples": [["4 5 4 1 3\n..xx.\n.....\n...x.\n.....\n1 3 4\n4 5 1\n6 7 3", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2005", "单调队列", "NOI", "队列"], "title": "[NOI2005] 瑰丽华尔兹", "background": "你跳过华尔兹吗？当音乐响起，当你随着旋律滑动舞步，是不是有一种漫步仙境的惬意？\n\n众所周知，跳华尔兹时，最重要的是有好的音乐。但是很少有几个人知道，世界上最伟大的钢琴家一生都漂泊在大海上，他的名字叫丹尼・布德曼・T.D.・柠檬・1900，朋友们都叫他 1900。\n\n1900 在 20 世纪的第一年出生在往返于欧美的邮轮弗吉尼亚号上。很不幸，他刚出生就被抛弃，成了孤儿。1900 孤独的成长在弗吉尼亚号上，从未离开过这个摇晃的世界。也许是对他命运的补偿，上帝派可爱的小天使艾米丽照顾他。可能是天使的点化，1900 拥有不可思议的钢琴天赋：从未有人教，从没看过乐谱，但他却能凭着自己的感觉弹出最沁人心脾的旋律。当 1900 的音乐获得邮轮上所有人的欢迎时，他才 8 岁，而此时，他已经乘着海轮往返欧美大陆 50 余次了。\n\n虽说是钢琴奇才，但 1900 还是个孩子，他有着和一般男孩一样的好奇和调皮，只不过更多一层浪漫的色彩罢了：这是一个风雨交加的夜晚，海风卷起层层巨浪拍打着弗吉尼亚号，邮轮随着巨浪剧烈的摇摆。船上的新萨克斯手迈克斯・托尼晕船了，1900 招呼托尼和他一起坐到舞厅里的钢琴上，然后松开了固定钢琴的闸，于是，钢琴随着海轮的倾斜滑动起来。准确的说，我们的主角 1900…\n", "description": "不妨认为舞厅是一个 $N$ 行 $M$ 列的矩阵，矩阵中的某些方格上堆放了一些家具，其他的则是空地。钢琴可以在空地上滑动，但不能撞上家具或滑出舞厅，否则会损坏钢琴和家具，引来难缠的船长。每个时刻，钢琴都会随着船体倾斜的方向向相邻的方格滑动一格，相邻的方格可以是向东、向西、向南或向北的。而艾米丽可以选择施魔法或不施魔法：如果不施魔法，则钢琴会滑动；如果施魔法，则钢琴会原地不动。\n\n艾米丽是个天使，她知道每段时间的船体的倾斜情况。她想使钢琴在舞厅里滑行的路程尽量长，这样 1900 会非常高兴，同时也有利于治疗托尼的晕船。但艾米丽还太小，不会算，所以希望你能帮助她。\n", "inputFormat": "输入文件的第一行包含 $5$ 个数 $N$, $M$, $x$, $y$ 和 $K$。$N$ 和 $M$ 描述舞厅的大小，$x$ 和 $y$ 为钢琴的初始位置；我们对船体倾斜情况是按时间的区间来描述的，且从 $1$ 开始计算时间，比如 “在 $[1, 3]$ 时间里向东倾斜，$[4, 5]$ 时间里向北倾斜”，因此这里的 $K$ 表示区间的数目。\n\n以下 $N$ 行，每行 $M$ 个字符，描述舞厅里的家具。第 $i$ 行第 $j$ 列的字符若为 `.`，则表示该位置是空地；若为 `x`，则表示有家具。\n\n以下 $K$ 行，顺序描述 $K$ 个时间区间，格式为：$s_i\\ t_i\\ d_i (1 \\leq i \\leq K)$。表示在时间区间 $[s_i, t_i]$ 内，船体都是向 $d_i$ 方向倾斜的。$d_i$ 为 $1$, $2$, $3$, $4$ 中的一个，依次表示北、南、西、东（分别对应矩阵中的上、下、左、右）。输入保证区间是连续的，即\n\n$s_1 = 1$，$s_i = t_{i-1} + 1 (1 < i \\leq K)$，$t_K = T$。", "outputFormat": "输出文件仅有 $1$ 行，包含一个整数，表示钢琴滑行的最长距离 (即格子数)。\n", "hint": "钢琴的滑行路线：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1307.png) \n\n钢琴在“×”位置上时天使使用一次魔法，因此滑动总长度为 $6$。\n\n【数据范围】\n\n$50\\%$ 的数据中，$1\\leq N, M\\leq 200，T\\leq 200$；\n\n$100\\%$ 的数据中，$1\\leq N$, $M \\leq 200$，$K \\leq 200$，$T\\leq 40000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2005] Gorgeous Waltz", "background": "Do you dance the waltz? When the music starts and you glide with the melody, do you feel the ease of strolling in a fairyland?\n\nAs everyone knows, for a waltz, the most important thing is good music. But few people know that the greatest pianist in the world drifted on the sea all his life. His name was Danny Boodman T.D. Lemon 1900, and his friends called him 1900.\n\n1900 was born in the first year of the 20th century on the transatlantic liner Virginia. Unfortunately, he was abandoned at birth and became an orphan. He grew up alone on the Virginia and never left this swaying world. Perhaps as compensation for his fate, God sent a lovely little angel, Emily, to watch over him. Maybe it was the angel’s enlightenment that gave 1900 an incredible gift for the piano: no one taught him, and he had never seen sheet music, yet he could play the most touching melodies purely by feeling. When the music of 1900 won the hearts of everyone on the ship, he was only 8 years old, and by then he had already crossed the Atlantic more than 50 times.\n\nAlthough a piano prodigy, 1900 was still a child, with the same curiosity and playfulness as any boy, but with an extra touch of romance: it was a stormy night, the sea wind whipped up waves that pounded the Virginia, and the liner swayed violently with the swell. The new saxophonist on board, Max Tooney, was seasick. 1900 invited Tooney to sit with him on the piano in the ballroom, then released the brake that fixed the piano. The piano began to slide with the ship’s tilt. To be precise, our protagonist 1900…", "description": "Assume the ballroom is an $N$-by-$M$ grid. Some cells have furniture piled on them, and the rest are empty. The piano can slide on empty cells, but it cannot hit furniture or slide out of the ballroom; otherwise, both the piano and the furniture would be damaged, and the captain would be upset. At each moment, the piano slides one cell to an adjacent cell in the direction of the ship’s tilt. The adjacent cell can be east, west, south, or north. Emily can choose to cast magic or not: if she does not cast magic, the piano slides; if she does, the piano stays where it is.\n\nEmily is an angel, and she knows the ship’s tilt over each time interval. She wants to make the piano travel as long a distance as possible in the ballroom, which will make 1900 very happy and also help Tooney’s seasickness. But Emily is still too young to calculate it, so she hopes you can help her.", "inputFormat": "The first line contains 5 numbers $N$, $M$, $x$, $y$ and $K$. $N$ and $M$ describe the size of the ballroom, and $x$ and $y$ are the initial position of the piano. We describe the ship’s tilt by time intervals, and time starts from $1$. For example: “tilting east during $[1, 3]$, and tilting north during $[4, 5]$”. Therefore, $K$ is the number of intervals.\n\nThe next $N$ lines, each with $M$ characters, describe the furniture in the ballroom. In row $i$, column $j$, if the character is `.` then that cell is empty; if it is `x` then there is furniture.\n\nThe next $K$ lines describe the $K$ time intervals in order, in the format: $s_i\\ t_i\\ d_i$ ($1 \\leq i \\leq K$). It means that during the time interval $[s_i, t_i]$, the ship tilts toward direction $d_i$. $d_i$ is one of $1$, $2$, $3$, $4$, which denote north, south, west, and east respectively (corresponding to up, down, left, and right in the grid). The input guarantees that the intervals are continuous, that is,\n$s_1 = 1$, $s_i = t_{i-1} + 1$ ($1 < i \\leq K$), $t_K = T$.", "outputFormat": "Output a single line containing one integer, the maximum sliding distance of the piano (i.e., the number of cells).", "hint": "The piano’s sliding path:\n\n![](https://cdn.luogu.com.cn/upload/pic/1307.png)\n\nWhen the piano is at the \"×\" position, the angel uses magic once, so the total sliding length is $6$.\n\nConstraints:\n- For $50\\%$ of the testdata, $1 \\leq N, M \\leq 200$, $T \\leq 200$.\n- For $100\\%$ of the testdata, $1 \\leq N, M \\leq 200$, $K \\leq 200$, $T \\leq 40000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2005] 瑰丽华尔兹", "background": "你跳过华尔兹吗？当音乐响起，当你随着旋律滑动舞步，是不是有一种漫步仙境的惬意？\n\n众所周知，跳华尔兹时，最重要的是有好的音乐。但是很少有几个人知道，世界上最伟大的钢琴家一生都漂泊在大海上，他的名字叫丹尼・布德曼・T.D.・柠檬・1900，朋友们都叫他 1900。\n\n1900 在 20 世纪的第一年出生在往返于欧美的邮轮弗吉尼亚号上。很不幸，他刚出生就被抛弃，成了孤儿。1900 孤独的成长在弗吉尼亚号上，从未离开过这个摇晃的世界。也许是对他命运的补偿，上帝派可爱的小天使艾米丽照顾他。可能是天使的点化，1900 拥有不可思议的钢琴天赋：从未有人教，从没看过乐谱，但他却能凭着自己的感觉弹出最沁人心脾的旋律。当 1900 的音乐获得邮轮上所有人的欢迎时，他才 8 岁，而此时，他已经乘着海轮往返欧美大陆 50 余次了。\n\n虽说是钢琴奇才，但 1900 还是个孩子，他有着和一般男孩一样的好奇和调皮，只不过更多一层浪漫的色彩罢了：这是一个风雨交加的夜晚，海风卷起层层巨浪拍打着弗吉尼亚号，邮轮随着巨浪剧烈的摇摆。船上的新萨克斯手迈克斯・托尼晕船了，1900 招呼托尼和他一起坐到舞厅里的钢琴上，然后松开了固定钢琴的闸，于是，钢琴随着海轮的倾斜滑动起来。准确的说，我们的主角 1900…\n", "description": "不妨认为舞厅是一个 $N$ 行 $M$ 列的矩阵，矩阵中的某些方格上堆放了一些家具，其他的则是空地。钢琴可以在空地上滑动，但不能撞上家具或滑出舞厅，否则会损坏钢琴和家具，引来难缠的船长。每个时刻，钢琴都会随着船体倾斜的方向向相邻的方格滑动一格，相邻的方格可以是向东、向西、向南或向北的。而艾米丽可以选择施魔法或不施魔法：如果不施魔法，则钢琴会滑动；如果施魔法，则钢琴会原地不动。\n\n艾米丽是个天使，她知道每段时间的船体的倾斜情况。她想使钢琴在舞厅里滑行的路程尽量长，这样 1900 会非常高兴，同时也有利于治疗托尼的晕船。但艾米丽还太小，不会算，所以希望你能帮助她。\n", "inputFormat": "输入文件的第一行包含 $5$ 个数 $N$, $M$, $x$, $y$ 和 $K$。$N$ 和 $M$ 描述舞厅的大小，$x$ 和 $y$ 为钢琴的初始位置；我们对船体倾斜情况是按时间的区间来描述的，且从 $1$ 开始计算时间，比如 “在 $[1, 3]$ 时间里向东倾斜，$[4, 5]$ 时间里向北倾斜”，因此这里的 $K$ 表示区间的数目。\n\n以下 $N$ 行，每行 $M$ 个字符，描述舞厅里的家具。第 $i$ 行第 $j$ 列的字符若为 `.`，则表示该位置是空地；若为 `x`，则表示有家具。\n\n以下 $K$ 行，顺序描述 $K$ 个时间区间，格式为：$s_i\\ t_i\\ d_i (1 \\leq i \\leq K)$。表示在时间区间 $[s_i, t_i]$ 内，船体都是向 $d_i$ 方向倾斜的。$d_i$ 为 $1$, $2$, $3$, $4$ 中的一个，依次表示北、南、西、东（分别对应矩阵中的上、下、左、右）。输入保证区间是连续的，即\n\n$s_1 = 1$，$s_i = t_{i-1} + 1 (1 < i \\leq K)$，$t_K = T$。", "outputFormat": "输出文件仅有 $1$ 行，包含一个整数，表示钢琴滑行的最长距离 (即格子数)。\n", "hint": "钢琴的滑行路线：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1307.png) \n\n钢琴在“×”位置上时天使使用一次魔法，因此滑动总长度为 $6$。\n\n【数据范围】\n\n$50\\%$ 的数据中，$1\\leq N, M\\leq 200，T\\leq 200$；\n\n$100\\%$ 的数据中，$1\\leq N$, $M \\leq 200$，$K \\leq 200$，$T\\leq 40000$。\n", "locale": "zh-CN"}}}
{"pid": "P2255", "type": "P", "difficulty": 3, "samples": [["6\n0 3\n6 7\n3 10\n1 5\n2 8\n1 9", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2014", "USACO", "排序"], "title": "[USACO14JAN] Recording the Moolympics S", "background": null, "description": "农民约翰热衷于所有寒冷天气的运动（尤其是涉及到牛的运动），农民约翰想录下尽可能多的电视节目。Moolympics 的节目时间表有 $N$ 个不同的节目（$1\\le N\\le 150$），每个节目 $i$ 给定开始时间 $S_i$ 和结束时间 $t_i$，表示该节目的举行时间为 $[s_i,t_i)$。FJ 有一个双调谐器录音机，可以同时录制两个节目。请帮助他确定他能录制的节目的最大数量。", "inputFormat": "- 第 $1$ 行：正整数 $N$。\n- 第 $2$ 到第 $N+1$ 行：每行包含单个节目的开始和结束时间（范围为 $[0, 10^9]$ 内的整数）。", "outputFormat": "仅一行，FJ 可以记录的最大节目数量。", "hint": "样例解释：\n\n一种最优方案是，第一个调谐器记录节目 $1,3$，第二个调谐器记录节目 $2,4$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14JAN] Recording the Moolympics S", "background": null, "description": "Being a fan of all cold-weather sports (especially those involving cows),Farmer John wants to record as much of the upcoming winter Moolympics as possible.\n\nThe television schedule for the Moolympics consists of N different programs(1 <= N <= 150), each with a designated starting time and ending time. FJ has a dual-tuner recorder that can record two programs simultaneously.\n\nPlease help him determine the maximum number of programs he can record in total.", "inputFormat": "* Line 1: The integer N.\n\n* Lines 2..1+N: Each line contains the start and end time of a single program (integers in the range 0..1,000,000,000).", "outputFormat": "* Line 1: The maximum number of programs FJ can record.", "hint": "INPUT DETAILS:\n\nThe Moolympics broadcast consists of 6 programs. The first runs from time 0 to time 3, and so on.\n\nOUTPUT DETAILS:\n\nFJ can record at most 4 programs. For example, he can record programs 1 and 3 back-to-back on the first tuner, and programs 2 and 4 on the second tuner.\n\nSource: USACO 2014 January Contest, Silver", "locale": "en"}, "zh-CN": {"title": "[USACO14JAN] Recording the Moolympics S", "background": null, "description": "农民约翰热衷于所有寒冷天气的运动（尤其是涉及到牛的运动），农民约翰想录下尽可能多的电视节目。Moolympics 的节目时间表有 $N$ 个不同的节目（$1\\le N\\le 150$），每个节目 $i$ 给定开始时间 $S_i$ 和结束时间 $t_i$，表示该节目的举行时间为 $[s_i,t_i)$。FJ 有一个双调谐器录音机，可以同时录制两个节目。请帮助他确定他能录制的节目的最大数量。", "inputFormat": "- 第 $1$ 行：正整数 $N$。\n- 第 $2$ 到第 $N+1$ 行：每行包含单个节目的开始和结束时间（范围为 $[0, 10^9]$ 内的整数）。", "outputFormat": "仅一行，FJ 可以记录的最大节目数量。", "hint": "样例解释：\n\n一种最优方案是，第一个调谐器记录节目 $1,3$，第二个调谐器记录节目 $2,4$。", "locale": "zh-CN"}}}
{"pid": "P2256", "type": "P", "difficulty": 3, "samples": [["10 6\nJack\nMike\nASDA\nMichel\nbrabrabra\nHeHe\nHeHE\npapapa\nHeY\nObama\nJack Obama\nHeHe HeHE\nbrabrabra HeHe\nObama ASDA\npapapa Obama\nObama HeHE\n3\nMike Obama\nHeHE Jack\npapapa brabrabra\n", "No.\nYes.\nYes.\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "并查集"], "title": "一中校运会之百米跑", "background": "在一大堆秀恩爱的 ** 之中，来不及秀恩爱的苏大学神踏着坚定（？）的步伐走向了 $100$ 米跑的起点。这时苏大学神发现，百米赛跑的参赛同学实在是太多了，连体育老师也忙不过来。这时体育老师发现了身为体育委员的苏大学神，便来找他帮忙。\n\n可是苏大学神需要热身，不然跑到一半就会抽（筋）、于是他就找到了你。如果你帮助体育老师解决了问题，老师就会给你 $5$ 个积分。", "description": "假设一共有 $N$（$2\\leq N\\leq 2\\times 10^4$）个参赛选手。\n\n老师会告诉你这 $N$ 个选手的名字。\n\n接着会告诉你 $M$（$1\\leq M\\leq 10^6$）句话，即告诉你学生 A 与学生 B 在同一个组里。\n\n如果学生 A 与学生 B 在同一组里，学生 B 与学生 C 也在同一组里，就说明学生 A 与学生 C 在同一组。\n\n然后老师会问你 $K$（$1\\leq K\\leq 10^6$）句话，即学生 X 和学生 Y 是否在同一组里。\n\n若是则输出 `Yes.`，否则输出 `No.`。", "inputFormat": "第一行输入 $N$ 和 $M$。\n\n接下来 $N$ 行输入每一个同学的名字。\n\n再往下 $M$ 行每行输入两个名字，且保证这两个名字都在上面的 $N$ 行中出现过，表示这两个参赛选手在同一个组里。\n\n再来输入 $K$。\n\n接下来输入体育老师的 $K$ 个询问。", "outputFormat": "对于体育老师的每一个询问，输出 `Yes.` 或 `No.`。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "No. 1 High School Sports Meet: 100 m Sprint", "background": "Amid a crowd of couples showing PDA, Su the \"xue shen\" strides with firm (?) steps toward the $100$ m starting line. He notices that there are too many participants, and even the PE teacher is overwhelmed. The PE teacher spots Su, who is the class sports rep, and asks him for help.\n\nHowever, Su needs to warm up, or he might cramp halfway through the run. So he turns to you. If you help the teacher solve the problem, the teacher will give you $5$ points.", "description": "Suppose there are $N$ ($2\\leq N\\leq 2\\times 10^4$) competitors.\n\nThe teacher will tell you the names of these $N$ competitors.\n\nThen the teacher will say $M$ ($1\\leq M\\leq 10^6$) sentences, each stating that student A and student B are in the same group.\n\nIf student A and student B are in the same group, and student B and student C are also in the same group, then student A and student C are in the same group.\n\nAfter that, the teacher will ask you $K$ ($1\\leq K\\leq 10^6$) questions, each asking whether student X and student Y are in the same group.\n\nIf they are, output `Yes.`; otherwise, output `No.`.", "inputFormat": "The first line contains $N$ and $M$.\n\nThe next $N$ lines each contain the name of one student.\n\nThe next $M$ lines each contain two names, both guaranteed to have appeared in the above $N$ lines, indicating that these two competitors are in the same group.\n\nThen an integer $K$ is given.\n\nThen follow $K$ queries. Each query consists of two names, asking whether the two students are in the same group.", "outputFormat": "For each of the teacher’s $K$ queries, output `Yes.` or `No.`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "一中校运会之百米跑", "background": "在一大堆秀恩爱的 ** 之中，来不及秀恩爱的苏大学神踏着坚定（？）的步伐走向了 $100$ 米跑的起点。这时苏大学神发现，百米赛跑的参赛同学实在是太多了，连体育老师也忙不过来。这时体育老师发现了身为体育委员的苏大学神，便来找他帮忙。\n\n可是苏大学神需要热身，不然跑到一半就会抽（筋）、于是他就找到了你。如果你帮助体育老师解决了问题，老师就会给你 $5$ 个积分。", "description": "假设一共有 $N$（$2\\leq N\\leq 2\\times 10^4$）个参赛选手。\n\n老师会告诉你这 $N$ 个选手的名字。\n\n接着会告诉你 $M$（$1\\leq M\\leq 10^6$）句话，即告诉你学生 A 与学生 B 在同一个组里。\n\n如果学生 A 与学生 B 在同一组里，学生 B 与学生 C 也在同一组里，就说明学生 A 与学生 C 在同一组。\n\n然后老师会问你 $K$（$1\\leq K\\leq 10^6$）句话，即学生 X 和学生 Y 是否在同一组里。\n\n若是则输出 `Yes.`，否则输出 `No.`。", "inputFormat": "第一行输入 $N$ 和 $M$。\n\n接下来 $N$ 行输入每一个同学的名字。\n\n再往下 $M$ 行每行输入两个名字，且保证这两个名字都在上面的 $N$ 行中出现过，表示这两个参赛选手在同一个组里。\n\n再来输入 $K$。\n\n接下来输入体育老师的 $K$ 个询问。", "outputFormat": "对于体育老师的每一个询问，输出 `Yes.` 或 `No.`。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2257", "type": "P", "difficulty": 6, "samples": [["2\n10 10\n100 100", "30\n2791"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["莫比乌斯反演"], "title": "YY的GCD", "background": "", "description": "神犇 YY 虐完数论后给傻× kAc 出了一题\n\n给定 $N, M$，求 $1 \\leq x \\leq N$，$1 \\leq y \\leq M$ 且 $\\gcd(x, y)$ 为质数的 $(x, y)$ 有多少对。\n", "inputFormat": "第一行一个整数 $T$ 表述数据组数。\n\n接下来 $T$ 行，每行两个正整数，$N, M$。\n", "outputFormat": "$T$ 行，每行一个整数表示第 $i$ 组数据的结果。\n", "hint": "$T = 10^4$，$N, M \\leq 10^7$。\n", "locale": "zh-CN", "translations": {"en": {"title": "YY's GCD", "background": "", "description": "After studying number theory, YY gave kAc a problem.\n\nGiven $N, M$, find the number of pairs $(x, y)$ such that $1 \\leq x \\leq N$, $1 \\leq y \\leq M$, and $\\gcd(x, y)$ is a prime.", "inputFormat": "The first line contains an integer $T$ denoting the number of test cases.\n\nThen follow $T$ lines, each containing two positive integers $N, M$.", "outputFormat": "Output $T$ lines, each containing one integer, the answer for the $i$-th test case.", "hint": "$T = 10^4$, $N, M \\leq 10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "YY的GCD", "background": "", "description": "神犇 YY 虐完数论后给傻× kAc 出了一题\n\n给定 $N, M$，求 $1 \\leq x \\leq N$，$1 \\leq y \\leq M$ 且 $\\gcd(x, y)$ 为质数的 $(x, y)$ 有多少对。\n", "inputFormat": "第一行一个整数 $T$ 表述数据组数。\n\n接下来 $T$ 行，每行两个正整数，$N, M$。\n", "outputFormat": "$T$ 行，每行一个整数表示第 $i$ 组数据的结果。\n", "hint": "$T = 10^4$，$N, M \\leq 10^7$。\n", "locale": "zh-CN"}}}
{"pid": "P2258", "type": "P", "difficulty": 5, "samples": [["5 5 2 3\n9 3 3 3 9\n9 4 8 7 4\n1 7 4 6 6\n6 8 5 6 9\n7 4 5 6 1", "6"], ["7 7 3 3  \n7 7 7 6 2 10 5\n5 8 8 2 1 6 2 \n2 9 5 5 6 1 7 \n7 9 3 6 1 7 8 \n1 9 1 4 7 8 8 \n10 5 9 1 1 8 10\n1 3 1 5 4 8 6", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "2014", "NOIP 普及组", "枚举", "剪枝"], "title": "[NOIP 2014 普及组] 子矩阵", "background": "NOIP2014 普及组 T4", "description": "给出如下定义：\n\n1. 子矩阵：从一个矩阵当中选取某些行和某些列交叉位置所组成的新矩阵（保持行与列的相对顺序）被称为原矩阵的一个子矩阵。\n\n    例如，下面图中选取第 $2,4$ 行和第 $2,4,5$ 列交叉位置的元素得到一个 $2 \\times 3$ 的子矩阵如下所示。\n\n|$9$|$\\color{#6a5acd}3$|$3$|$\\color{#6a5acd}3$|$\\color{#6a5acd}9$|\n|:-|:-|:-|:-|:-|\n|$\\color{#6a5acd}9$|$\\color{blue}4$|$\\color{#6a5acd}8$|$\\color{blue}7$|$\\color{blue}4$|\n|$1$|$\\color{#6a5acd}7$|$4$|$\\color{#6a5acd}6$|$\\color{#6a5acd}6$|\n|$\\color{#6a5acd}6$|$\\color{blue}8$|$\\color{#6a5acd}5$|$\\color{blue}6$|$\\color{blue}9$|\n|$7$|$\\color{#6a5acd}4$|$5$|$\\color{#6a5acd}6$|$\\color{#6a5acd}1$|\n\n此矩阵的其中一个 $2\\times3$ 的子矩阵是：\n\n|$4$|$7$|$4$|\n|:-|:-|:-|\n|$8$|$6$|$9$|\n\n2. 相邻的元素：矩阵中的某个元素与其上下左右四个元素（如果存在的话）是相邻的。\n\n3. 矩阵的分值：矩阵中每一对相邻元素之差的绝对值之和。\n\n本题任务：给定一个 $n$ 行 $m$ 列的正整数矩阵，请你从这个矩阵中选出一个 $r$ 行 $c$ 列的子矩阵，使得这个子矩阵的分值最小，并输出这个分值。", "inputFormat": "第一行包含用空格隔开的四个整数 $n,m,r,c$，意义如问题描述中所述，每两个整数之间用一个空格隔开。\n\n接下来的 $n$ 行，每行包含 $m$ 个用空格隔开的整数，用来表示问题描述中那个 $n$ 行 $m$ 列的矩阵。", "outputFormat": "一个整数，表示满足题目描述的子矩阵的最小分值。\n", "hint": "#### 样例 1 说明\n\n该矩阵中分值最小的 $2$ 行 $3$ 列的子矩阵由原矩阵的第 $4$ 行、第 $5$ 行与第 $1$ 列、第 $3$ 列、第 $4$ 列交叉位置的元素组成，为：\n\n|$6$|$5$|$6$|\n|:-|:-|:-|\n|$7$|$5$|$6$|\n\n其分值为 $|6-5|+|5-6|+|7-5|+|5-6|+|6-7|+|5-5|+|6-6|=6$。\n\n#### 样例 2 说明\n\n该矩阵中分值最小的 $3$ 行 $3$ 列的子矩阵由原矩阵的第 $4$ 行、第 $5$ 行、第 $6$ 行与第 $2$ 列、第 $6$ 列、第 $7$ 列交叉位置的元素组成，选取的分值最小的子矩阵为：\n\n|$9$|$7$|$8$|\n|:-|:-|:-|\n|$9$|$8$|$8$|\n|$5$|$8$|$10$|\n\n#### 数据范围\n\n- 对于 $50\\%$ 的数据，$1\\leq n\\leq 12$，$1\\leq m\\leq 12$，矩阵中的每个元素 $1\\leq a_{i,j}\\leq20$；\n\n- 对于 $100\\%$ 的数据，$1\\leq n\\leq 16$，$1\\leq m\\leq 16$，矩阵中的每个元素 $1\\leq a_{i,j}\\leq 1000$，$1\\leq r\\leq n$，$1\\leq c\\leq m$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Junior] Submatrix", "background": "NOIP 2014 Junior T4.", "description": "Definitions:\n\n1. Submatrix: A new matrix formed by selecting some rows and some columns from a matrix and taking the elements at their intersections (preserving the relative order of rows and columns) is called a submatrix of the original matrix.\n\n    For example, in the table below, selecting rows $2,4$ and columns $2,4,5$ yields a $2 \\times 3$ submatrix as follows.\n\n|$9$|$\\color{#6a5acd}3$|$3$|$\\color{#6a5acd}3$|$\\color{#6a5acd}9$|\n|:-|:-|:-|:-|:-|\n|$\\color{#6a5acd}9$|$\\color{blue}4$|$\\color{#6a5acd}8$|$\\color{blue}7$|$\\color{blue}4$|\n|$1$|$\\color{#6a5acd}7$|$4$|$\\color{#6a5acd}6$|$\\color{#6a5acd}6$|\n|$\\color{#6a5acd}6$|$\\color{blue}8$|$\\color{#6a5acd}5$|$\\color{blue}6$|$\\color{blue}9$|\n|$7$|$\\color{#6a5acd}4$|$5$|$\\color{#6a5acd}6$|$\\color{#6a5acd}1$|\n\nOne of its $2\\times3$ submatrices is:\n\n|$4$|$7$|$4$|\n|:-|:-|:-|\n|$8$|$6$|$9$|\n\n2. Adjacent elements: An element in the matrix is adjacent to its four neighbors above, below, left, and right (if they exist).\n\n3. Score of a matrix: The sum of the absolute differences of every pair of adjacent elements in the matrix.\n\nTask: Given a positive-integer matrix with $n$ rows and $m$ columns, choose an $r$-row $c$-column submatrix from it so that the score of this submatrix is minimized, and output that score.", "inputFormat": "The first line contains four integers $n, m, r, c$ separated by single spaces, as described above.\n\nThe next $n$ lines each contain $m$ integers, representing the $n$-row $m$-column matrix described in the problem statement.", "outputFormat": "Output a single integer, the minimum possible score among all submatrices that satisfy the description.", "hint": "Sample 1 explanation\n\nIn this matrix, the $2$-row $3$-column submatrix with the minimum score is formed by the intersection of rows $4, 5$ and columns $1, 3, 4$ of the original matrix, namely:\n\n|$6$|$5$|$6$|\n|:-|:-|:-|\n|$7$|$5$|$6$|\n\nIts score is $|6-5|+|5-6|+|7-5|+|5-6|+|6-7|+|5-5|+|6-6|=6$.\n\nSample 2 explanation\n\nIn this matrix, the $3$-row $3$-column submatrix with the minimum score is formed by the intersection of rows $4, 5, 6$ and columns $2, 6, 7$ of the original matrix. The chosen submatrix with the minimum score is:\n\n|$9$|$7$|$8$|\n|:-|:-|:-|\n|$9$|$8$|$8$|\n|$5$|$8$|$10$|\n\nConstraints\n\n- For $50\\%$ of the testdata, $1 \\leq n \\leq 12$, $1 \\leq m \\leq 12$, and for every element $1 \\leq a_{i,j} \\leq 20$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 16$, $1 \\leq m \\leq 16$, every element satisfies $1 \\leq a_{i,j} \\leq 1000$, $1 \\leq r \\leq n$, and $1 \\leq c \\leq m$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 普及组] 子矩阵", "background": "NOIP2014 普及组 T4", "description": "给出如下定义：\n\n1. 子矩阵：从一个矩阵当中选取某些行和某些列交叉位置所组成的新矩阵（保持行与列的相对顺序）被称为原矩阵的一个子矩阵。\n\n    例如，下面图中选取第 $2,4$ 行和第 $2,4,5$ 列交叉位置的元素得到一个 $2 \\times 3$ 的子矩阵如下所示。\n\n|$9$|$\\color{#6a5acd}3$|$3$|$\\color{#6a5acd}3$|$\\color{#6a5acd}9$|\n|:-|:-|:-|:-|:-|\n|$\\color{#6a5acd}9$|$\\color{blue}4$|$\\color{#6a5acd}8$|$\\color{blue}7$|$\\color{blue}4$|\n|$1$|$\\color{#6a5acd}7$|$4$|$\\color{#6a5acd}6$|$\\color{#6a5acd}6$|\n|$\\color{#6a5acd}6$|$\\color{blue}8$|$\\color{#6a5acd}5$|$\\color{blue}6$|$\\color{blue}9$|\n|$7$|$\\color{#6a5acd}4$|$5$|$\\color{#6a5acd}6$|$\\color{#6a5acd}1$|\n\n此矩阵的其中一个 $2\\times3$ 的子矩阵是：\n\n|$4$|$7$|$4$|\n|:-|:-|:-|\n|$8$|$6$|$9$|\n\n2. 相邻的元素：矩阵中的某个元素与其上下左右四个元素（如果存在的话）是相邻的。\n\n3. 矩阵的分值：矩阵中每一对相邻元素之差的绝对值之和。\n\n本题任务：给定一个 $n$ 行 $m$ 列的正整数矩阵，请你从这个矩阵中选出一个 $r$ 行 $c$ 列的子矩阵，使得这个子矩阵的分值最小，并输出这个分值。", "inputFormat": "第一行包含用空格隔开的四个整数 $n,m,r,c$，意义如问题描述中所述，每两个整数之间用一个空格隔开。\n\n接下来的 $n$ 行，每行包含 $m$ 个用空格隔开的整数，用来表示问题描述中那个 $n$ 行 $m$ 列的矩阵。", "outputFormat": "一个整数，表示满足题目描述的子矩阵的最小分值。\n", "hint": "#### 样例 1 说明\n\n该矩阵中分值最小的 $2$ 行 $3$ 列的子矩阵由原矩阵的第 $4$ 行、第 $5$ 行与第 $1$ 列、第 $3$ 列、第 $4$ 列交叉位置的元素组成，为：\n\n|$6$|$5$|$6$|\n|:-|:-|:-|\n|$7$|$5$|$6$|\n\n其分值为 $|6-5|+|5-6|+|7-5|+|5-6|+|6-7|+|5-5|+|6-6|=6$。\n\n#### 样例 2 说明\n\n该矩阵中分值最小的 $3$ 行 $3$ 列的子矩阵由原矩阵的第 $4$ 行、第 $5$ 行、第 $6$ 行与第 $2$ 列、第 $6$ 列、第 $7$ 列交叉位置的元素组成，选取的分值最小的子矩阵为：\n\n|$9$|$7$|$8$|\n|:-|:-|:-|\n|$9$|$8$|$8$|\n|$5$|$8$|$10$|\n\n#### 数据范围\n\n- 对于 $50\\%$ 的数据，$1\\leq n\\leq 12$，$1\\leq m\\leq 12$，矩阵中的每个元素 $1\\leq a_{i,j}\\leq20$；\n\n- 对于 $100\\%$ 的数据，$1\\leq n\\leq 16$，$1\\leq m\\leq 16$，矩阵中的每个元素 $1\\leq a_{i,j}\\leq 1000$，$1\\leq r\\leq n$，$1\\leq c\\leq m$。", "locale": "zh-CN"}}}
{"pid": "P2260", "type": "P", "difficulty": 6, "samples": [["3 4", "1"], ["123456 654321", "116430"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2012", "CTT（清华集训/北大集训）", "整除分块"], "title": "[清华集训 2012] 模积和", "background": "数学题，无背景。\n", "description": "求\n\n$$\\sum_{i=1}^{n} \\sum_{j=1}^{m} (n \\bmod i) \\times (m \\bmod j), i \\neq j$$\n\nmod 19940417 的值", "inputFormat": "输入只有一行两个整数 $n$，$m$。", "outputFormat": "答案 mod 19940417\n", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，保证 $n,m \\leq 10^3$。\n- 对于 $30\\%$ 的数据，保证 $n,m \\leq 10^6$。\n- 另有 $30\\%$ 的数据，保证 $n \\leq 100$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n,m \\leq 10^9$。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "{{[Tsinghua Training 2012] Sum of Modular Products}}", "background": "{{A mathematics problem, no background.}}", "description": "{{Compute\n\n$$\\sum_{i=1}^{n} \\sum_{j=1}^{m} (n \\bmod i) \\times (m \\bmod j), i \\neq j$$\n\nthe value modulo 19940417.}}", "inputFormat": "{{The input contains a single line with two integers $n$, $m$.}}", "outputFormat": "{{The answer modulo 19940417.}}", "hint": "{{Constraints\n\n- For 10% of the testdata, it is guaranteed that $n, m \\le 10^3$.\n- For 30% of the testdata, it is guaranteed that $n, m \\le 10^6$.\n- For another 30% of the testdata, it is guaranteed that $n \\le 100$.\n- For 100% of the testdata, it is guaranteed that $1 \\le n, m \\le 10^9$.}}\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[清华集训 2012] 模积和", "background": "数学题，无背景。\n", "description": "求\n\n$$\\sum_{i=1}^{n} \\sum_{j=1}^{m} (n \\bmod i) \\times (m \\bmod j), i \\neq j$$\n\nmod 19940417 的值", "inputFormat": "输入只有一行两个整数 $n$，$m$。", "outputFormat": "答案 mod 19940417\n", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，保证 $n,m \\leq 10^3$。\n- 对于 $30\\%$ 的数据，保证 $n,m \\leq 10^6$。\n- 另有 $30\\%$ 的数据，保证 $n \\leq 100$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n,m \\leq 10^9$。\n\n", "locale": "zh-CN"}}}
{"pid": "P2261", "type": "P", "difficulty": 4, "samples": [["10 5\n", "29"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2007", "重庆", "各省省选", "整除分块"], "title": "[CQOI2007] 余数求和", "background": "", "description": "给出正整数 $n$ 和 $k$，请计算\n\n$$G(n, k) = \\sum_{i = 1}^n k \\bmod i$$\n\n其中 $k\\bmod i$ 表示 $k$ 除以 $i$ 的余数。\n\n", "inputFormat": "输入只有一行两个整数，分别表示 $n$ 和 $k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 样例 1 解释\n\n$G(10, 5)=0+1+2+1+0+5+5+5+5+5=29$。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n , k \\leq 10^3$。\n- 对于 $60\\%$ 的数据，保证 $n, k \\leq 10^6$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n, k \\leq 10^9$。\n\n\n------------\n2024/2/13 添加一组 hack 数据", "locale": "zh-CN", "translations": {"en": {"title": "[CQOI2007] Remainder Sum", "background": "", "description": "Given positive integers $n$ and $k$, please compute\n$$G(n, k) = \\sum_{i = 1}^n k \\bmod i$$\nwhere $k \\bmod i$ denotes the remainder when $k$ is divided by $i$.", "inputFormat": "The input contains a single line with two integers, $n$ and $k$.", "outputFormat": "Output one line with one integer representing the answer.", "hint": "#### Sample 1 Explanation\n\n$G(10, 5) = 0 + 1 + 2 + 1 + 0 + 5 + 5 + 5 + 5 + 5 = 29$.\n\n#### Constraints\n\n- For 30% of the testdata, it is guaranteed that $n, k \\leq 10^3$.\n- For 60% of the testdata, it is guaranteed that $n, k \\leq 10^6$.\n- For 100% of the testdata, it is guaranteed that $1 \\leq n, k \\leq 10^9$.\n\n------------\nAdded a set of hack testdata on 2024/2/13.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CQOI2007] 余数求和", "background": "", "description": "给出正整数 $n$ 和 $k$，请计算\n\n$$G(n, k) = \\sum_{i = 1}^n k \\bmod i$$\n\n其中 $k\\bmod i$ 表示 $k$ 除以 $i$ 的余数。\n\n", "inputFormat": "输入只有一行两个整数，分别表示 $n$ 和 $k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 样例 1 解释\n\n$G(10, 5)=0+1+2+1+0+5+5+5+5+5=29$。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n , k \\leq 10^3$。\n- 对于 $60\\%$ 的数据，保证 $n, k \\leq 10^6$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n, k \\leq 10^9$。\n\n\n------------\n2024/2/13 添加一组 hack 数据", "locale": "zh-CN"}}}
{"pid": "P2262", "type": "P", "difficulty": 6, "samples": [["5 200 200\nunzip.exe 100\nxxxx 50\nbin 0\ntpx.exe 200\nturbo.exe 300\ntpx.tp 400\ntemp 0\n-\n-\nreadme.txt 100\n-\n0 ares connect 2\n0 ares download zip.exe\n1 ares download bin\n5 ares download xxxx\n6 ares cd bin\n6 ares connect 1\n6 ares quit\n7 ares connect 1\n7 rosen connect 2\n7 ares cd bin\n8 ares upload A 300\n9 rosen download bin\n10 rosen download bin\ndown\n", "success\nunsuccess\nsuccess\nunsuccess\nsuccess\nunsuccess\nsuccess\nsuccess\nsuccess\nsuccess\nsuccess\nunsuccess\nsuccess\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2004", "各省省选", "湖南"], "title": "[HNOI2004] FTP服务器", "background": "File Transfer Protocol，文件传输协议，简称 FTP。人们可以通过 FTP 实现资源共享。一般的情况下用户访问一个 FTP 服务器是通过类似资源管理器的形式对该服务器上的资源进行浏览，并且不同权限的用户可以实现下载文件/文件夹，上传文件/文件夹。", "description": "一个FTP服务器的所有资源都以文件的形式按树形结构存储在不同的文件夹里，最低一级的是根目录（即根文件夹），根目录里有若干个文件和文件夹，每一个文件夹里都可以拥有 $0$ 个或多个文件及文件夹，同一文件夹里不存在名称相同的文件和文件夹。\n\n一个用户包含三个属性：\n\n- $\\text{userType}$：用户类型；\n- $\\text{userState}$：用户状态（用户正在执行的操作）；\n- $\\text{userPosition}$：用户当前所处的位置（即用户正在浏览的文件夹）。\n\n用户分 $3$ 种类型：上传用户 $\\text{uploadUser}$，下载用户 $\\text{downloadUser}$，匿名用户 $\\text{guest}$。\n\n操作分 $3$ 种类型：浏览 $\\text{scan}$，下载 $\\text{download}$，上传 $\\text{upload}$。\n\n用户的权限是指用户允许进行的操作。不同类型的用户的权限是不同的。\n\n每种用户的权限如下：\n\n- 上传用户 $\\text{uploadUser}$：浏览 $\\text{scan}$，上传 $\\text{upload}$。\n- 下载用户 $\\text{downloadUser}$：浏览 $\\text{scan}$，下载 $\\text{download}$。\n- 匿名用户 $\\text{guest}$：浏览 $\\text{scan}$。\n\n任何一个用户是不能进行其没有权限的操作的，例如：一个匿名用户想要下载一个文件或者文件夹是不允许的。\n\n一个文件/文件夹包含三个属性：\n\n- $\\text{fileName/folderName}$：文件名（不包含空格和回车）；\n- $\\text{fileSize/folderSize}$：文件大小\n（单位 $\\text{byte}$，$0 <\\mathrm{filesize}< 10^5$，$0<\\mathrm{folderSize}< 10^8$，文件夹的大小是它里面所包含的所有文件大小的总和）；\n- $\\text{fileState/folderState}$：当前状态，当前状态有两种：\n  - 一种为正常 $\\text{normal}$（文件/文件夹为正常状态时，允许用户对其进行操作）；\n  - 另一种为上传未完成 $\\text{uploading}$（处在此种状态时，用户只能够对其进行浏览操作，如果一个文件夹中有一个或多个文件处于 $\\text{uploading}$ 状态，那么这个文件夹也处于 $\\text{uploading}$ 状态）。\n\n一个 FTP 服务器除了它所拥有的文件资源外，还有如下属性：\n\n1. 访问用户的最大数量（包括所有不同类型的用户） $\\text{maxUserNumber}<100$。如果当前访问用户数量已经达到最大值的话，其他新的用户对服务器的访问将是失败的。\n2. 服务器的最大流量 $\\text{maxServerFlux}<10^7$。\n3. 单个用户允许的最大下载/上传流量 $\\text{maxUserFlux}$。\n\nFTP 服务器运行的最小时间单位为秒。\n\n每一个用户在同一时刻只能进行一种操作。用户下载和上传文件/文件夹是需要一定时间的，而这个时间决定于用户流量 $\\text{userFlux}$，单位为 $\\text{byte/second}$，注意如果某一时刻文件/文件夹仍须上传/下载的大小（$>0$）小于 $\\text{userFlux}$ 的话，上传/下载时间仍将按照一秒钟看待。\n\n而 $\\text{userFlux}$ 的值是如何确定的呢？\n\n $$\\mathrm{userFlux} = \\min(\\mathrm{presentMaxUserFlux},\\mathrm{maxUserFlux})$$\n\n其中，$\\text{presentMaxUserFlux}$ 为当前服务器的单个用户最大流量：\n\n$$\\mathrm{presentMaxUserFlux} = \\lfloor \\mathrm{maxServerFlux} / \\mathrm{userTotal}\\rfloor$$\n\n（$\\text{userTotal}$ 表示该时刻的正在进行上传和下载操作的用户数量）\n\n一个用户通过一系列命令实现其在 FTP 服务器上的相关操作。下面介绍这些命令：\n\n### $\\verb!connect!$ 命令\n\n- 格式：$\\verb![name] + 空格 + connect + 空格 + 参数A!$。\n- 例：$\\verb!tsinghua connect 1!$。\n- 表示在名叫 $\\verb!name!$ 的用户请求以 $\\verb!A!$ 身份连接到服务器上。如果当前的最大使用用户还没达到 $\\text{maxUserNumber}$，并且该用户未连接到服务器，则连接成功，服务器反馈回一个相关信息 $\\verb!success!$。否则反馈信息为 $\\verb!unsuccess!$。一旦连接成功，用户其所处的位置 $\\text{userPosition}$ 为服务器的根目录。$A=1$ 表示上传用户，$A=2$ 表示下载用户，$A=3$ 表示匿名用户。\n\n### $\\verb!quit!$ 命令\n\n- 格式：$\\verb![name] + 空格 + quit!$。\n- 例：$\\verb!tsinghua quit!$。\n- 表示名叫 $\\verb!name!$ 的用户断开与服务器的连接。如果用户未连接反馈 $\\verb!unsuccess!$，否则反馈 $\\verb!success!$。（注意用户在任何状态下都可以断开与服务器的连接）。\n\n### $\\verb!cd!$ 命令\n\n- 格式：$\\verb![name] + 空格 + cd + 空格 + [folderName/文件夹名称]!$。\n- 例：$\\verb!THU cd FD!$。\n- 表示名叫 $\\verb!name!$ 的用户希望从当前所处的文件夹进入该文件夹中的一个名叫 $\\text{folderName}$ 的文件夹。如果名叫 $\\text{folderName}$ 的文件夹存在并且处于 $\\text{normal}$ 状态，则改变用户当前所处位置 $\\text{userPosition}$，反馈相关信息 $\\verb!success!$，如果该文件夹不存在或该用户没有成功连接，则反馈信息为 $\\verb!unsuccess!$。\n\n### $\\verb!cd..!$ 命令\n\n- 格式：$\\verb![name] + 空格 + cd..!$。\n- 例：$\\verb!9# cd..!$。\n- 表示名叫 $\\verb!name!$ 的用户希望从当前所处的文件夹返回到他的上一级文件夹。如果用户处于根目录或者用户未连接，则命令执行失败返回 $\\verb!unsuccess!$，否则返回 $\\verb!success!$，并且改变用户所处位置 $\\text{userPosition}$。\n\n### $\\verb!download!$ 命令\n\n- 格式：$\\verb![name] + 空格 + download + 空格 + [name1]!$。\n- 例：$\\verb!A download 1.txt!$。\n- 表示名叫 $\\verb!name!$ 的用户希望从当前所处文件夹下载名为 $\\verb!name1!$ 的文件或者文件夹。如果用户未连接，用户没有下载权限，名为 $\\verb!name1!$ 的文件/文件夹不存在，或者该文件/文件夹处于 $\\text{uploading}$ 状态时，反馈信息 $\\verb!unsuccess!$，否则返回 $\\verb!success!$ 并且开始下载该文件/文件夹。（一旦一个下载命令开始执行，那么执行该命令的用户所下载的是下载命令执行的那一时刻的那一个文件/文件夹，也就是说如果一个用户正在下载某个文件夹，在下载过程中，有另外一用户在这个文件夹里面上传文件，那么原下载用户是不可能下载到这个新上传的文件的）。\n\n### $\\verb!upload!$ 命令\n\n- 格式：$\\verb![name] + 空格 + upload + 空格 + [name1] + 空格 + [size]!$。\n- 例：$\\verb!A upload B 1!$。\n- 表示名叫 $\\verb!name!$ 的用户希望在当前所处的文件夹上传一个名叫 $\\verb!name1!$ 的大小为 $\\text{size}$ 的文件/文件夹。注意：\n  - 用户通过 $\\verb!upload!$ 命令上传文件夹只能为空文件夹，当 $\\text{size}=0$ 表示上传文件夹，$\\text{size}>0$ 表示上传文件。\n  - 如果当前目录已经存在了同名的文件/文件夹，用户未成功连接或者用户没有上传权限，反馈信息 $\\verb!unsuccess!$，否则反馈 $\\verb!success!$，并且开始上传文件/文件夹。（如果一个用户想要上传一个非空文件夹，是很容易通过一系列 $\\verb!upload!$ 以及 $\\verb!cd!$ 命令实现的）。\n\n---\n\n除上传文件和下载文件/文件夹命令需要耗时外，其他的命令都不需要执行时间。\n\n你的任务是模拟一个 FTP 服务器在某一时间段内的运行过程。", "inputFormat": "一开始你将从文件中获得 FTP 的服务器的初始信息。第一行为 $3$ 个正整数，分别表示 $\\text{maxUserNumber},\\text{maxServerFlux},\\text{maxUserFlux}$。接下来的若干行描述 $\\text{server}$ 里已有文件资源的存储情况。\n\n第一行总是描述的根目录中的一个文件或者文件夹。\n\n如果某一行描述的是一个文件或者文件夹那么该行的数据为 $\\verb!name + 空格 + size!$，如果 $\\text{size}=0$ 表示这是一个文件夹，否则表示一个大小为 $\\text{size}$ 的文件。\n\n如果某一行描述的是一个文件夹，那么接下来的若干行描述的都是这个文件夹里的内容，直到一个与之对应的减号为止。这些数据都是递归描述的。因为一开始就是描述整个根目录里的文件和文件夹，所以文件信息的最后一行也为减号。（参看输入示例）。\n\n下面的每一行为 $\\verb!time + 空格 + order!$ 的形式给出，例如 $\\verb!4 ares connect 1!$ 表示：在服务器开启后 $4$ 秒钟，名叫 $\\verb!ares!$ 的用户请求以 $\\text{uploadUser}$ 的身份连接到服务器上来。\n\n输入的最后一行为一个字符串 $\\verb!down!$。\n\n所有输入命令的时刻 $\\text{time}$ 都以命令出现的先后递增，同一时刻的命令以输入中出现的先后顺序确定其执行顺序。", "outputFormat": "输出若干行，每行一个字符串 $\\verb!success!$ 或 $\\verb!unsuccess!$，表示每个操作成功与否。", "hint": "来源：HNOI2004（经过修改）。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2004] FTP Server", "background": "File Transfer Protocol, abbreviated as FTP, enables resource sharing. Typically, users browse resources on an FTP server through a file-explorer-like interface, and users with different permissions can download files/folders and upload files/folders.", "description": "All resources on an FTP server are stored as files in a tree structure across different folders. The lowest level is the root directory (i.e., the root folder). The root directory contains several files and folders. Each folder may contain $0$ or more files and folders. No two files/folders in the same folder share the same name.\n\nA user has three attributes:\n\n- $\\text{userType}$: user type.\n- $\\text{userState}$: user state (the operation the user is currently performing).\n- $\\text{userPosition}$: the user’s current position (i.e., the folder the user is currently browsing).\n\nThere are $3$ types of users: upload user $\\text{uploadUser}$, download user $\\text{downloadUser}$, and anonymous user $\\text{guest}$.\n\nThere are $3$ types of operations: browse $\\text{scan}$, download $\\text{download}$, and upload $\\text{upload}$.\n\nA user’s permissions are the operations that the user is allowed to perform. Different types of users have different permissions.\n\nPermissions for each user type are as follows:\n\n- Upload user $\\text{uploadUser}$: browse $\\text{scan}$, upload $\\text{upload}$.\n- Download user $\\text{downloadUser}$: browse $\\text{scan}$, download $\\text{download}$.\n- Anonymous user $\\text{guest}$: browse $\\text{scan}$.\n\nNo user may perform an operation outside their permissions. For example, an anonymous user is not allowed to download a file or folder.\n\nA file/folder has three attributes:\n\n- $\\text{fileName/folderName}$: the name (without spaces or line breaks).\n- $\\text{fileSize/folderSize}$: the size\n  (unit: $\\text{byte}$, $0 < \\mathrm{fileSize} < 10^5$, $0 < \\mathrm{folderSize} < 10^8$, and a folder’s size is the sum of the sizes of all files it contains).\n- $\\text{fileState/folderState}$: the current state, which has two possible values:\n  - $\\text{normal}$: when a file/folder is in the normal state, users are allowed to operate on it.\n  - $\\text{uploading}$: in this state, users may only browse it. If one or more files in a folder are in the $\\text{uploading}$ state, then the folder is also in the $\\text{uploading}$ state.\n\nIn addition to its file resources, an FTP server has the following properties:\n\n1. The maximum number of accessing users (including all user types), $\\text{maxUserNumber} < 100$. If the current number of accessing users has already reached the maximum, any new connection attempts will fail.\n2. The server’s maximum throughput $\\text{maxServerFlux} < 10^7$.\n3. The maximum download/upload throughput allowed per user $\\text{maxUserFlux}$.\n\nThe minimal time unit for running the FTP server is one second.\n\nEach user can perform only one operation at any given moment. Downloading and uploading files/folders take time, which depends on the user’s throughput $\\text{userFlux}$, in units of $\\text{byte/second}$. Note that if, at some moment, the remaining size to upload/download ($> 0$) is less than $\\text{userFlux}$, the upload/download still takes one full second.\n\nHow is $\\text{userFlux}$ determined?\n\n $$\\mathrm{userFlux} = \\min(\\mathrm{presentMaxUserFlux}, \\mathrm{maxUserFlux})$$\n\nHere, $\\text{presentMaxUserFlux}$ is the server’s current per-user maximum throughput:\n\n$$\\mathrm{presentMaxUserFlux} = \\lfloor \\mathrm{maxServerFlux} / \\mathrm{userTotal} \\rfloor$$\n\n($\\text{userTotal}$ denotes the number of users currently performing upload and download operations at that moment.)\n\nA user interacts with the FTP server through a sequence of commands. The commands are introduced below:\n\n### $\\verb!connect!$ command\n\n- Format: $\\verb![name] + 空格 + connect + 空格 + 参数A!$。\n- Example: $\\verb!tsinghua connect 1!$。\n- A user named $\\verb!name!$ requests to connect to the server with identity $\\verb!A!$. If the current number of users has not reached $\\text{maxUserNumber}$ and the user is not already connected, the connection succeeds and the server returns $\\verb!success!$. Otherwise, it returns $\\verb!unsuccess!$. Once connected successfully, the user’s position $\\text{userPosition}$ is set to the server’s root directory. $A = 1$ denotes an upload user, $A = 2$ denotes a download user, and $A = 3$ denotes an anonymous user.\n\n### $\\verb!quit!$ command\n\n- Format: $\\verb![name] + 空格 + quit!$。\n- Example: $\\verb!tsinghua quit!$。\n- The user named $\\verb!name!$ disconnects from the server. If the user is not connected, return $\\verb!unsuccess!$; otherwise, return $\\verb!success!$. (Note that the user may disconnect in any state.)\n\n### $\\verb!cd!$ command\n\n- Format: $\\verb![name] + 空格 + cd + 空格 + [folderName/文件夹名称]!$。\n- Example: $\\verb!THU cd FD!$。\n- The user named $\\verb!name!$ attempts to enter a folder named $\\text{folderName}$ within the current folder. If a folder named $\\text{folderName}$ exists and is in the $\\text{normal}$ state, change the user’s current position $\\text{userPosition}$ and return $\\verb!success!$. If the folder does not exist or the user is not successfully connected, return $\\verb!unsuccess!$.\n\n### $\\verb!cd..!$ command\n\n- Format: $\\verb![name] + 空格 + cd..!$。\n- Example: $\\verb!9# cd..!$。\n- The user named $\\verb!name!$ attempts to move from the current folder to its parent folder. If the user is at the root directory or is not connected, the command fails and returns $\\verb!unsuccess!$; otherwise, it returns $\\verb!success!$ and updates $\\text{userPosition}$.\n\n### $\\verb!download!$ command\n\n- Format: $\\verb![name] + 空格 + download + 空格 + [name1]!$。\n- Example: $\\verb!A download 1.txt!$。\n- The user named $\\verb!name!$ attempts to download a file or folder named $\\verb!name1!$ in the current folder. If the user is not connected, the user lacks download permission, the file/folder named $\\verb!name1!$ does not exist, or the file/folder is in the $\\text{uploading}$ state, return $\\verb!unsuccess!$; otherwise, return $\\verb!success!$ and start downloading the file/folder. (Once a download command starts, the user downloads the snapshot of that file/folder at the moment the command begins. That is, if another user uploads a new file into that folder during the download, the original downloading user cannot obtain that newly uploaded file.)\n\n### $\\verb!upload!$ command\n\n- Format: $\\verb![name] + 空格 + upload + 空格 + [name1] + 空格 + [size]!$。\n- Example: $\\verb!A upload B 1!$。\n- The user named $\\verb!name!$ attempts to upload, into the current folder, a file or folder named $\\verb!name1!$ with size $\\text{size}$. Note:\n  - Uploading a folder via the $\\verb!upload!$ command can only create an empty folder. When $\\text{size} = 0$, it indicates uploading a folder; when $\\text{size} > 0$, it indicates uploading a file.\n  - If a file/folder with the same name already exists in the current directory, or the user is not successfully connected, or the user lacks upload permission, return $\\verb!unsuccess!$; otherwise, return $\\verb!success!$ and start uploading the file/folder. (If a user wishes to upload a non-empty folder, it can be achieved through a sequence of $\\verb!upload!$ and $\\verb!cd!$ commands.)\n\n---\n\nExcept for upload and download commands, all other commands take no execution time.\n\nYour task is to simulate the operation of an FTP server over a period of time.", "inputFormat": "First, you will read the initial information of the FTP server. The first line contains $3$ positive integers, representing $\\text{maxUserNumber}, \\text{maxServerFlux}, \\text{maxUserFlux}$. The following lines describe the storage of the existing file resources on the $\\text{server}$.\n\nThe first line always describes one file or folder in the root directory.\n\nIf a line describes a file or a folder, it has the form $\\verb!name + 空格 + size!$. If $\\text{size} = 0$, it indicates a folder; otherwise, it indicates a file of size $\\text{size}$.\n\nIf a line describes a folder, then the subsequent lines describe the contents of that folder until a matching minus sign appears. This description is recursive. Since the description starts from all files and folders in the root directory, the last line of the file information is also a minus sign. (See the sample input.)\n\nEach of the following lines is given in the form $\\verb!time + 空格 + order!$. For example, $\\verb!4 ares connect 1!$ means: at $4$ seconds after the server starts, a user named $\\verb!ares!$ requests to connect to the server as an $\\text{uploadUser}$.\n\nThe last line of input is the string $\\verb!down!$.\n\nAll command times $\\text{time}$ are non-decreasing according to their appearance order. Commands issued at the same time are executed in the order they appear in the input.", "outputFormat": "Output several lines, each containing $\\verb!success!$ or $\\verb!unsuccess!$, indicating whether each operation succeeds.", "hint": "Source: HNOI2004 (modified).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2004] FTP服务器", "background": "File Transfer Protocol，文件传输协议，简称 FTP。人们可以通过 FTP 实现资源共享。一般的情况下用户访问一个 FTP 服务器是通过类似资源管理器的形式对该服务器上的资源进行浏览，并且不同权限的用户可以实现下载文件/文件夹，上传文件/文件夹。", "description": "一个FTP服务器的所有资源都以文件的形式按树形结构存储在不同的文件夹里，最低一级的是根目录（即根文件夹），根目录里有若干个文件和文件夹，每一个文件夹里都可以拥有 $0$ 个或多个文件及文件夹，同一文件夹里不存在名称相同的文件和文件夹。\n\n一个用户包含三个属性：\n\n- $\\text{userType}$：用户类型；\n- $\\text{userState}$：用户状态（用户正在执行的操作）；\n- $\\text{userPosition}$：用户当前所处的位置（即用户正在浏览的文件夹）。\n\n用户分 $3$ 种类型：上传用户 $\\text{uploadUser}$，下载用户 $\\text{downloadUser}$，匿名用户 $\\text{guest}$。\n\n操作分 $3$ 种类型：浏览 $\\text{scan}$，下载 $\\text{download}$，上传 $\\text{upload}$。\n\n用户的权限是指用户允许进行的操作。不同类型的用户的权限是不同的。\n\n每种用户的权限如下：\n\n- 上传用户 $\\text{uploadUser}$：浏览 $\\text{scan}$，上传 $\\text{upload}$。\n- 下载用户 $\\text{downloadUser}$：浏览 $\\text{scan}$，下载 $\\text{download}$。\n- 匿名用户 $\\text{guest}$：浏览 $\\text{scan}$。\n\n任何一个用户是不能进行其没有权限的操作的，例如：一个匿名用户想要下载一个文件或者文件夹是不允许的。\n\n一个文件/文件夹包含三个属性：\n\n- $\\text{fileName/folderName}$：文件名（不包含空格和回车）；\n- $\\text{fileSize/folderSize}$：文件大小\n（单位 $\\text{byte}$，$0 <\\mathrm{filesize}< 10^5$，$0<\\mathrm{folderSize}< 10^8$，文件夹的大小是它里面所包含的所有文件大小的总和）；\n- $\\text{fileState/folderState}$：当前状态，当前状态有两种：\n  - 一种为正常 $\\text{normal}$（文件/文件夹为正常状态时，允许用户对其进行操作）；\n  - 另一种为上传未完成 $\\text{uploading}$（处在此种状态时，用户只能够对其进行浏览操作，如果一个文件夹中有一个或多个文件处于 $\\text{uploading}$ 状态，那么这个文件夹也处于 $\\text{uploading}$ 状态）。\n\n一个 FTP 服务器除了它所拥有的文件资源外，还有如下属性：\n\n1. 访问用户的最大数量（包括所有不同类型的用户） $\\text{maxUserNumber}<100$。如果当前访问用户数量已经达到最大值的话，其他新的用户对服务器的访问将是失败的。\n2. 服务器的最大流量 $\\text{maxServerFlux}<10^7$。\n3. 单个用户允许的最大下载/上传流量 $\\text{maxUserFlux}$。\n\nFTP 服务器运行的最小时间单位为秒。\n\n每一个用户在同一时刻只能进行一种操作。用户下载和上传文件/文件夹是需要一定时间的，而这个时间决定于用户流量 $\\text{userFlux}$，单位为 $\\text{byte/second}$，注意如果某一时刻文件/文件夹仍须上传/下载的大小（$>0$）小于 $\\text{userFlux}$ 的话，上传/下载时间仍将按照一秒钟看待。\n\n而 $\\text{userFlux}$ 的值是如何确定的呢？\n\n $$\\mathrm{userFlux} = \\min(\\mathrm{presentMaxUserFlux},\\mathrm{maxUserFlux})$$\n\n其中，$\\text{presentMaxUserFlux}$ 为当前服务器的单个用户最大流量：\n\n$$\\mathrm{presentMaxUserFlux} = \\lfloor \\mathrm{maxServerFlux} / \\mathrm{userTotal}\\rfloor$$\n\n（$\\text{userTotal}$ 表示该时刻的正在进行上传和下载操作的用户数量）\n\n一个用户通过一系列命令实现其在 FTP 服务器上的相关操作。下面介绍这些命令：\n\n### $\\verb!connect!$ 命令\n\n- 格式：$\\verb![name] + 空格 + connect + 空格 + 参数A!$。\n- 例：$\\verb!tsinghua connect 1!$。\n- 表示在名叫 $\\verb!name!$ 的用户请求以 $\\verb!A!$ 身份连接到服务器上。如果当前的最大使用用户还没达到 $\\text{maxUserNumber}$，并且该用户未连接到服务器，则连接成功，服务器反馈回一个相关信息 $\\verb!success!$。否则反馈信息为 $\\verb!unsuccess!$。一旦连接成功，用户其所处的位置 $\\text{userPosition}$ 为服务器的根目录。$A=1$ 表示上传用户，$A=2$ 表示下载用户，$A=3$ 表示匿名用户。\n\n### $\\verb!quit!$ 命令\n\n- 格式：$\\verb![name] + 空格 + quit!$。\n- 例：$\\verb!tsinghua quit!$。\n- 表示名叫 $\\verb!name!$ 的用户断开与服务器的连接。如果用户未连接反馈 $\\verb!unsuccess!$，否则反馈 $\\verb!success!$。（注意用户在任何状态下都可以断开与服务器的连接）。\n\n### $\\verb!cd!$ 命令\n\n- 格式：$\\verb![name] + 空格 + cd + 空格 + [folderName/文件夹名称]!$。\n- 例：$\\verb!THU cd FD!$。\n- 表示名叫 $\\verb!name!$ 的用户希望从当前所处的文件夹进入该文件夹中的一个名叫 $\\text{folderName}$ 的文件夹。如果名叫 $\\text{folderName}$ 的文件夹存在并且处于 $\\text{normal}$ 状态，则改变用户当前所处位置 $\\text{userPosition}$，反馈相关信息 $\\verb!success!$，如果该文件夹不存在或该用户没有成功连接，则反馈信息为 $\\verb!unsuccess!$。\n\n### $\\verb!cd..!$ 命令\n\n- 格式：$\\verb![name] + 空格 + cd..!$。\n- 例：$\\verb!9# cd..!$。\n- 表示名叫 $\\verb!name!$ 的用户希望从当前所处的文件夹返回到他的上一级文件夹。如果用户处于根目录或者用户未连接，则命令执行失败返回 $\\verb!unsuccess!$，否则返回 $\\verb!success!$，并且改变用户所处位置 $\\text{userPosition}$。\n\n### $\\verb!download!$ 命令\n\n- 格式：$\\verb![name] + 空格 + download + 空格 + [name1]!$。\n- 例：$\\verb!A download 1.txt!$。\n- 表示名叫 $\\verb!name!$ 的用户希望从当前所处文件夹下载名为 $\\verb!name1!$ 的文件或者文件夹。如果用户未连接，用户没有下载权限，名为 $\\verb!name1!$ 的文件/文件夹不存在，或者该文件/文件夹处于 $\\text{uploading}$ 状态时，反馈信息 $\\verb!unsuccess!$，否则返回 $\\verb!success!$ 并且开始下载该文件/文件夹。（一旦一个下载命令开始执行，那么执行该命令的用户所下载的是下载命令执行的那一时刻的那一个文件/文件夹，也就是说如果一个用户正在下载某个文件夹，在下载过程中，有另外一用户在这个文件夹里面上传文件，那么原下载用户是不可能下载到这个新上传的文件的）。\n\n### $\\verb!upload!$ 命令\n\n- 格式：$\\verb![name] + 空格 + upload + 空格 + [name1] + 空格 + [size]!$。\n- 例：$\\verb!A upload B 1!$。\n- 表示名叫 $\\verb!name!$ 的用户希望在当前所处的文件夹上传一个名叫 $\\verb!name1!$ 的大小为 $\\text{size}$ 的文件/文件夹。注意：\n  - 用户通过 $\\verb!upload!$ 命令上传文件夹只能为空文件夹，当 $\\text{size}=0$ 表示上传文件夹，$\\text{size}>0$ 表示上传文件。\n  - 如果当前目录已经存在了同名的文件/文件夹，用户未成功连接或者用户没有上传权限，反馈信息 $\\verb!unsuccess!$，否则反馈 $\\verb!success!$，并且开始上传文件/文件夹。（如果一个用户想要上传一个非空文件夹，是很容易通过一系列 $\\verb!upload!$ 以及 $\\verb!cd!$ 命令实现的）。\n\n---\n\n除上传文件和下载文件/文件夹命令需要耗时外，其他的命令都不需要执行时间。\n\n你的任务是模拟一个 FTP 服务器在某一时间段内的运行过程。", "inputFormat": "一开始你将从文件中获得 FTP 的服务器的初始信息。第一行为 $3$ 个正整数，分别表示 $\\text{maxUserNumber},\\text{maxServerFlux},\\text{maxUserFlux}$。接下来的若干行描述 $\\text{server}$ 里已有文件资源的存储情况。\n\n第一行总是描述的根目录中的一个文件或者文件夹。\n\n如果某一行描述的是一个文件或者文件夹那么该行的数据为 $\\verb!name + 空格 + size!$，如果 $\\text{size}=0$ 表示这是一个文件夹，否则表示一个大小为 $\\text{size}$ 的文件。\n\n如果某一行描述的是一个文件夹，那么接下来的若干行描述的都是这个文件夹里的内容，直到一个与之对应的减号为止。这些数据都是递归描述的。因为一开始就是描述整个根目录里的文件和文件夹，所以文件信息的最后一行也为减号。（参看输入示例）。\n\n下面的每一行为 $\\verb!time + 空格 + order!$ 的形式给出，例如 $\\verb!4 ares connect 1!$ 表示：在服务器开启后 $4$ 秒钟，名叫 $\\verb!ares!$ 的用户请求以 $\\text{uploadUser}$ 的身份连接到服务器上来。\n\n输入的最后一行为一个字符串 $\\verb!down!$。\n\n所有输入命令的时刻 $\\text{time}$ 都以命令出现的先后递增，同一时刻的命令以输入中出现的先后顺序确定其执行顺序。", "outputFormat": "输出若干行，每行一个字符串 $\\verb!success!$ 或 $\\verb!unsuccess!$，表示每个操作成功与否。", "hint": "来源：HNOI2004（经过修改）。", "locale": "zh-CN"}}}
{"pid": "P2263", "type": "P", "difficulty": 5, "samples": [["5 2\n5\n4\n1\n2\n3\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "命运的彼方", "background": "kkksc03 与 lzn 踏上了一次寻宝之旅，经过 kkksc03 与 lzn 的不懈努力，终于解开了所有的谜题，依靠御风飞翔之术越过了大河。终点距离他们只有一步之遥了……\n", "description": "他们现在位于的地方，是连接古代和现代两个世界的结界法阵。一般来说，即使是神也是不能跨越时空的，但是， lin\\_toto 给了他们一点提示，告诉了他们这个法阵的玄机。并告诉 kkksc03 与 lzn，只要同心协力，就可以改变命运，突破结界的枷锁。\n\nlin\\_toto 带他们走到了法阵的前方。展示在他们面前的是一堵巨大却残缺的墙，由若干组连续魔力砖组成（每个魔力砖均为正方体，大小均为 $1\\times1\\times1$），且各组魔力砖的高度各不相同。根据经验，只有让最少连续 $K$ 组成这堵墙的魔力砖的高度相同，才能突破法阵的入口，召唤来自神界的帮助，跨越时空。\n\n两人可完成的操作如下：从墙上搬走一块砖，或是从旁边的魔力砖堆（假设可用的魔力砖无限）中拿一块砖放置在墙上。每搬运一块砖都会耗费 kkksc03 与 lzn 一点能量值。lzn 希望让两人所耗费的能量值最少。\n\n现在kkksc03带着这个问题找到了聪明的你，你能帮他计算出他所需付出的最少能量值吗？\n", "inputFormat": "一行两个正整数 $N, K$。下面 $N$ 行，每行代表这组魔力砖的高度 $H _ i$。\n", "outputFormat": "一个整数，表示所需付出的最少能量值。\n", "hint": "对于 $10\\%$ 的数据, 有 $1≤ N ≤ 10, 2 ≤ K ≤ N, 0 ≤ H _ i ≤ N$。\n\n对于 $20\\%$ 的数据，有 $K = 2$。\n\n对于 $40\\%$ 的数据，有 $1≤ N ≤ 500, 2 ≤ K ≤ N, 0 ≤ H _ i ≤ N$。\n\n对于 $80\\%$ 的数据，有 $1≤ N ≤ 10 ^ 5 , 2 ≤ K ≤ N, 0 ≤ H _ i ≤ 10 ^ 6$。\n\n对于 $100\\%$ 的数据，有 $1≤ N ≤ 5\\times 10 ^ 5 , 2 ≤ K ≤ N, 0 ≤ H _ i ≤ 10 ^ {12}$，并且所有 $H _ i$ 互不相同。\n", "locale": "zh-CN", "translations": {"en": {"title": "Beyond Destiny", "background": "kkksc03 and lzn embarked on a treasure hunt. After their tireless efforts, they finally solved all the puzzles and crossed the great river using the art of riding the wind. The destination is now just one step away from them...", "description": "They are now at a barrier formation that connects the ancient and modern worlds. Generally, even gods cannot traverse time and space. However, lin_toto gave them a hint and revealed the secret of this formation. He told kkksc03 and lzn that as long as they work together, they can change their destiny and break the shackles of the barrier.\n\nlin_toto led them to the front of the formation. What lay before them was a huge yet damaged wall, composed of several consecutive groups of magical bricks (each magical brick is a cube of size $1\\times1\\times1$), and the heights of these groups are all different. From experience, only by making the heights of at least $K$ consecutive groups that form this wall equal can they break through the entrance of the formation, summon help from the divine realm, and traverse time and space.\n\nThey can perform the following operations: remove one brick from the wall, or take one brick from a nearby pile of magical bricks (assume an unlimited supply) and place it on the wall. Each brick moved consumes one unit of energy from kkksc03 and lzn. lzn wants to minimize the total energy consumed.\n\nNow kkksc03 has come to you with this problem. Can you help him compute the minimum energy required?", "inputFormat": "One line with two positive integers $N, K$. Then $N$ lines follow, each representing the height $H_i$ of a group of magical bricks.", "outputFormat": "A single integer, the minimum energy required.", "hint": "For $10\\%$ of the testdata, $1 \\le N \\le 10$, $2 \\le K \\le N$, $0 \\le H_i \\le N$.\n\nFor $20\\%$ of the testdata, $K = 2$.\n\nFor $40\\%$ of the testdata, $1 \\le N \\le 500$, $2 \\le K \\le N$, $0 \\le H_i \\le N$.\n\nFor $80\\%$ of the testdata, $1 \\le N \\le 10^5$, $2 \\le K \\le N$, $0 \\le H_i \\le 10^6$.\n\nFor $100\\%$ of the testdata, $1 \\le N \\le 5 \\times 10^5$, $2 \\le K \\le N$, $0 \\le H_i \\le 10^{12}$, and all $H_i$ are distinct.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "命运的彼方", "background": "kkksc03 与 lzn 踏上了一次寻宝之旅，经过 kkksc03 与 lzn 的不懈努力，终于解开了所有的谜题，依靠御风飞翔之术越过了大河。终点距离他们只有一步之遥了……\n", "description": "他们现在位于的地方，是连接古代和现代两个世界的结界法阵。一般来说，即使是神也是不能跨越时空的，但是， lin\\_toto 给了他们一点提示，告诉了他们这个法阵的玄机。并告诉 kkksc03 与 lzn，只要同心协力，就可以改变命运，突破结界的枷锁。\n\nlin\\_toto 带他们走到了法阵的前方。展示在他们面前的是一堵巨大却残缺的墙，由若干组连续魔力砖组成（每个魔力砖均为正方体，大小均为 $1\\times1\\times1$），且各组魔力砖的高度各不相同。根据经验，只有让最少连续 $K$ 组成这堵墙的魔力砖的高度相同，才能突破法阵的入口，召唤来自神界的帮助，跨越时空。\n\n两人可完成的操作如下：从墙上搬走一块砖，或是从旁边的魔力砖堆（假设可用的魔力砖无限）中拿一块砖放置在墙上。每搬运一块砖都会耗费 kkksc03 与 lzn 一点能量值。lzn 希望让两人所耗费的能量值最少。\n\n现在kkksc03带着这个问题找到了聪明的你，你能帮他计算出他所需付出的最少能量值吗？\n", "inputFormat": "一行两个正整数 $N, K$。下面 $N$ 行，每行代表这组魔力砖的高度 $H _ i$。\n", "outputFormat": "一个整数，表示所需付出的最少能量值。\n", "hint": "对于 $10\\%$ 的数据, 有 $1≤ N ≤ 10, 2 ≤ K ≤ N, 0 ≤ H _ i ≤ N$。\n\n对于 $20\\%$ 的数据，有 $K = 2$。\n\n对于 $40\\%$ 的数据，有 $1≤ N ≤ 500, 2 ≤ K ≤ N, 0 ≤ H _ i ≤ N$。\n\n对于 $80\\%$ 的数据，有 $1≤ N ≤ 10 ^ 5 , 2 ≤ K ≤ N, 0 ≤ H _ i ≤ 10 ^ 6$。\n\n对于 $100\\%$ 的数据，有 $1≤ N ≤ 5\\times 10 ^ 5 , 2 ≤ K ≤ N, 0 ≤ H _ i ≤ 10 ^ {12}$，并且所有 $H _ i$ 互不相同。\n", "locale": "zh-CN"}}}
{"pid": "P2264", "type": "P", "difficulty": 3, "samples": [["3\nlove\nso\nmuch\nI love you so much.\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "洛谷原创", "洛谷月赛"], "title": "情书", "background": "一封好的情书需要撰写人全身心的投入。CYY 同学看上了可爱的 c** 想对她表白，但却不知道自己写的情书是否能感动她，现在他带着情书请你来帮助他。", "description": "为了帮助 CYY，我们定义一个量化情书好坏的标准感动值。判断感动值的方法如下：\n1. 在情书的一句话中若含有给定词汇列表中的特定单词，则感动值加 $1$，但每一单词在同一句话中出现多次感动值不叠加，不同单词不受影响。保证输入的单词不重复。\n2. 每句话以英文句号定界。\n3. 全文不区分大小写。\n4. 一句话中可能包含英文引号，比如```you're```。", "inputFormat": "第一行包含一个数字 $n$，表示导致感动值提升的词汇列表中单词的数量，随后 $n$ 行是给定单词，每行一个。保证单词只包含英文字母。\n\n最后一行为情书正文，保证只包含以下几种字符：英文字母、数字、空格、英文逗号、英文句号、英文引号。", "outputFormat": "一个数字 $g$，表示情书带来的感动值。", "hint": "对于所有的数据，保证 $1 \\le n \\le 100$，每个单词不超过 $50$ 字符，全文不超过 $1000$ 字符。", "locale": "zh-CN", "translations": {"en": {"title": "Love Letter", "background": "A good love letter requires the writer’s wholehearted devotion. Student CYY has a crush on the cute c** and wants to confess to her, but he doesn’t know whether his love letter can move her. Now he brings the letter to you for help.", "description": "To help CYY, we define a quantitative standard called the touching value to evaluate the quality of a love letter. The rules for determining the touching value are as follows:\n1. In a sentence of the love letter, if it contains a specific word from the given vocabulary list, the touching value increases by 1. However, multiple occurrences of the same word in the same sentence do not stack. Different words are not affected by each other. It is guaranteed that the input words are not duplicated.\n2. Each sentence is delimited by an English period.\n3. Matching is case-insensitive throughout the text.\n4. A sentence may contain English quotation marks or apostrophes, for example ```you're```.", "inputFormat": "The first line contains a number $n$, the number of words in the vocabulary list that increase the touching value. The next $n$ lines contain the given words, one per line. It is guaranteed that each word contains only English letters.\n\nThe last line is the full text of the love letter. It is guaranteed to contain only the following characters: English letters, digits, spaces, English commas, English periods, and English quotation marks.", "outputFormat": "A single number $g$, representing the touching value contributed by the love letter.", "hint": "Constraints: For all testdata, it is guaranteed that $1 \\le n \\le 100$, each word is at most $50$ characters long, and the full text is at most $1000$ characters long.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "情书", "background": "一封好的情书需要撰写人全身心的投入。CYY 同学看上了可爱的 c** 想对她表白，但却不知道自己写的情书是否能感动她，现在他带着情书请你来帮助他。", "description": "为了帮助 CYY，我们定义一个量化情书好坏的标准感动值。判断感动值的方法如下：\n1. 在情书的一句话中若含有给定词汇列表中的特定单词，则感动值加 $1$，但每一单词在同一句话中出现多次感动值不叠加，不同单词不受影响。保证输入的单词不重复。\n2. 每句话以英文句号定界。\n3. 全文不区分大小写。\n4. 一句话中可能包含英文引号，比如```you're```。", "inputFormat": "第一行包含一个数字 $n$，表示导致感动值提升的词汇列表中单词的数量，随后 $n$ 行是给定单词，每行一个。保证单词只包含英文字母。\n\n最后一行为情书正文，保证只包含以下几种字符：英文字母、数字、空格、英文逗号、英文句号、英文引号。", "outputFormat": "一个数字 $g$，表示情书带来的感动值。", "hint": "对于所有的数据，保证 $1 \\le n \\le 100$，每个单词不超过 $50$ 字符，全文不超过 $1000$ 字符。", "locale": "zh-CN"}}}
{"pid": "P2265", "type": "P", "difficulty": 4, "samples": [["3 5", "56"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "组合数学", "逆元", "洛谷月赛"], "title": "路边的水沟", "background": "某市有一个巨大的水沟网络，可以近似看成一个 $n \\times m$ 的矩形网格，网格的每个格点都安装了闸门，我们将从水沟网络右下角的闸门到左上角的闸门的一条路径称为水流。\n", "description": "现给定水沟网的长和宽，求该水沟网中所有只包含向左和向上移动的水流数量。\n", "inputFormat": "输入共 $1$ 行，包含两个整数 $n$ 和 $m$。", "outputFormat": "输出一个数字 $ans$，即水流的数量。由于答案可能很大，请输出答案对 $1000000007$ 取模的结果。\n", "hint": "对于 $30\\%$ 的数据，$1 \\leq m,n \\leq 10$。\n\n对于 $50\\%$ 的数据，$1 \\leq m,n \\leq 1,000$。\n\n对于 $80\\%$ 的数据，$1 \\leq m,n \\leq 50,000$。\n\n对于 $100\\%$ 的数据，$1 \\leq m,n \\leq 1,000,000$。", "locale": "zh-CN", "translations": {"en": {"title": "Roadside Ditch", "background": "There is a huge ditch network in a certain city, which can be approximated as an $n \\times m$ rectangular grid. A sluice gate is installed at every grid point. We call any path from the sluice gate at the bottom-right corner of the network to the sluice gate at the top-left corner a “water flow.”", "description": "Given the length and width of the ditch network, find the number of water flows that only move left and up.", "inputFormat": "The input consists of $1$ line containing two integers $n$ and $m$.", "outputFormat": "Output a single integer $ans$, the number of water flows. Since the answer can be large, output the result modulo $1000000007$.", "hint": "For $30\\%$ of the testdata, $1 \\leq m, n \\leq 10$.\n\nFor $50\\%$ of the testdata, $1 \\leq m, n \\leq 1{,}000$.\n\nFor $80\\%$ of the testdata, $1 \\leq m, n \\leq 50{,}000$.\n\nFor $100\\%$ of the testdata, $1 \\leq m, n \\leq 1{,}000{,}000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "路边的水沟", "background": "某市有一个巨大的水沟网络，可以近似看成一个 $n \\times m$ 的矩形网格，网格的每个格点都安装了闸门，我们将从水沟网络右下角的闸门到左上角的闸门的一条路径称为水流。\n", "description": "现给定水沟网的长和宽，求该水沟网中所有只包含向左和向上移动的水流数量。\n", "inputFormat": "输入共 $1$ 行，包含两个整数 $n$ 和 $m$。", "outputFormat": "输出一个数字 $ans$，即水流的数量。由于答案可能很大，请输出答案对 $1000000007$ 取模的结果。\n", "hint": "对于 $30\\%$ 的数据，$1 \\leq m,n \\leq 10$。\n\n对于 $50\\%$ 的数据，$1 \\leq m,n \\leq 1,000$。\n\n对于 $80\\%$ 的数据，$1 \\leq m,n \\leq 50,000$。\n\n对于 $100\\%$ 的数据，$1 \\leq m,n \\leq 1,000,000$。", "locale": "zh-CN"}}}
{"pid": "P2266", "type": "P", "difficulty": 5, "samples": [["3 5 5\n20 21 20 20 21\n19 22 20 60 80\n80 90 80 70 90\n1 0 0 0 0\n0 0 0 0 0\n1 0 0 0 1\n", "31"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "爱的供养", "background": "在很久很久以前，有一只野心勃勃的骑士 Mori，带领自己的军队，征战世界，所向披靡……\n\n有一天，他跨过千山万水，越过重重山岭，来到了一个美丽的（程序）国度。在这里，他与 Soha 公主一见钟情，并最终坠入爱河。\n\n从此，他们幸福快乐地生活在了一起……\n", "description": "但好日子却不长久。Mori 的手下大将恶魔猎手在此时背叛了他，自立为王，率领深藏在世界之轴的龙族叛变，并掳走了 Soha 公主。Mori 在与恶魔猎手的战斗中，遭遇围杀，被困在一个荒芜人烟的大岛上。但在经过勘探后，他惊喜地发现，Soha 也同时被恶魔猎手关押在这座岛上！\n\n经过精心研究，Mori 发现关押 Soha 的地牢需要若干把钥匙才能打开，而钥匙则被埋藏在一系列的法阵中。凭借着自己的身手与魔力，Mori 是能够破解法阵、获得钥匙的。法阵是一个 $M\\times N$ 大小的矩阵，法阵中的每一格都具有自己的高度。其中，有一部分格中埋藏着钥匙，但 Mori 法力不足，无法直接挖取。而他发现，只需从埋藏着钥匙的格子出发向四周的格子走，并在不少于 $T$ 个的独立法阵格子中施法（包括埋藏钥匙的格子本身也要施法），便可挖出钥匙。换句话说，在他每次挖掘钥匙之前，都必须先从埋藏钥匙的格子开始，走过周围的 $T-1$ 个不重复的格子。\n\n虽然 Mori 施法不需要耗费体力，但他在移动的过程中，需要耗费一定量的体力（体育不及格 233）。从一个格子移动到另一个格子中所耗费的体力值为两个格子的高度值之差的绝对值。\n\n对于每个埋藏钥匙的格子来说，定义其难度值 $P$ 为在施法过程中，每次在各个格子间移动的所需耗费的体力的最大值。\n\n而 Mori 则希望让这个难度值越小越好。因为，只有保留足够多的体力，他才能营救 Soha，并两人合力打败恶魔猎手的背叛。\n\n所以，他想知道所有埋藏钥匙的点的难度值的和最小值可以是多少？\n", "inputFormat": "第 $1$ 行，三个整数 $M$、$N$、$T$。\n\n接下来 $M$ 行，每行 $N$ 个整数，为各格的高度。\n\n接下来 $M$ 行，每行 $N$ 个 $0$ 或 $1$， $1$ 代表该格点埋藏有钥匙。\n", "outputFormat": "一个整数，代表难度值的和的最小值。\n", "hint": "$1 ≤ M, N ≤ 600$\n\n$1 ≤ T ≤ M\\times N$\n", "locale": "zh-CN", "translations": {"en": {"title": "The Offering of Love", "background": "A long, long time ago, there was an ambitious knight named Mori, who led his army to conquer the world, invincible wherever he went.\n\nOne day, after crossing thousands of mountains and rivers and scaling ridge after ridge, he arrived at a beautiful (programming) kingdom. There, he fell in love at first sight with Princess Soha, and they eventually fell in love.\n\nFrom then on, they lived happily together...", "description": "But good days did not last. Mori’s great general, the Demon Hunter, betrayed him at this moment, proclaimed himself king, rallied the dragons hidden in the Axis of the World to rebel, and abducted Princess Soha. In the battle against the Demon Hunter, Mori was besieged and trapped on a deserted, uninhabited island. However, after scouting, he was pleasantly surprised to discover that Soha had also been imprisoned by the Demon Hunter on this very island.\n\nAfter careful study, Mori found that the dungeon holding Soha required several keys to open, and the keys were buried within a series of magic arrays. By virtue of his skills and magic, Mori can break the arrays and obtain the keys. The magic array is a matrix of size $M\\times N$, and each cell of the array has its own height. Some cells have keys buried in them, but Mori’s magic is insufficient to dig them out directly. He discovered that if he starts from a cell that has a buried key and walks to adjacent cells (up, down, left, right), and casts spells on at least $T$ distinct cells (including the key cell itself), he can dig out the key. In other words, before digging each key, he must start from the cell with the key and then visit $T-1$ other distinct cells.\n\nAlthough casting spells costs no stamina, moving costs a certain amount of stamina (failed PE, 233). The stamina cost to move from one cell to another is the absolute difference between the height values of the two cells.\n\nFor each cell that contains a key, define its difficulty value $P$ as the maximum stamina cost among all moves between cells during the casting process.\n\nMori wants this difficulty value to be as small as possible. Only by conserving enough stamina can he rescue Soha, and together they can defeat the treacherous Demon Hunter.\n\nSo, he wants to know the minimum possible sum of the difficulty values over all cells that contain keys.", "inputFormat": "The first line contains three integers $M$, $N$, and $T$.\n\nThe next $M$ lines each contain $N$ integers, giving the height of each cell.\n\nThe next $M$ lines each contain $N$ integers $0$ or $1$, where $1$ means the cell contains a buried key.", "outputFormat": "Output a single integer, the minimum possible sum of difficulty values.", "hint": "$1 ≤ M, N ≤ 600$\n\n$1 ≤ T ≤ M\\times N$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "爱的供养", "background": "在很久很久以前，有一只野心勃勃的骑士 Mori，带领自己的军队，征战世界，所向披靡……\n\n有一天，他跨过千山万水，越过重重山岭，来到了一个美丽的（程序）国度。在这里，他与 Soha 公主一见钟情，并最终坠入爱河。\n\n从此，他们幸福快乐地生活在了一起……\n", "description": "但好日子却不长久。Mori 的手下大将恶魔猎手在此时背叛了他，自立为王，率领深藏在世界之轴的龙族叛变，并掳走了 Soha 公主。Mori 在与恶魔猎手的战斗中，遭遇围杀，被困在一个荒芜人烟的大岛上。但在经过勘探后，他惊喜地发现，Soha 也同时被恶魔猎手关押在这座岛上！\n\n经过精心研究，Mori 发现关押 Soha 的地牢需要若干把钥匙才能打开，而钥匙则被埋藏在一系列的法阵中。凭借着自己的身手与魔力，Mori 是能够破解法阵、获得钥匙的。法阵是一个 $M\\times N$ 大小的矩阵，法阵中的每一格都具有自己的高度。其中，有一部分格中埋藏着钥匙，但 Mori 法力不足，无法直接挖取。而他发现，只需从埋藏着钥匙的格子出发向四周的格子走，并在不少于 $T$ 个的独立法阵格子中施法（包括埋藏钥匙的格子本身也要施法），便可挖出钥匙。换句话说，在他每次挖掘钥匙之前，都必须先从埋藏钥匙的格子开始，走过周围的 $T-1$ 个不重复的格子。\n\n虽然 Mori 施法不需要耗费体力，但他在移动的过程中，需要耗费一定量的体力（体育不及格 233）。从一个格子移动到另一个格子中所耗费的体力值为两个格子的高度值之差的绝对值。\n\n对于每个埋藏钥匙的格子来说，定义其难度值 $P$ 为在施法过程中，每次在各个格子间移动的所需耗费的体力的最大值。\n\n而 Mori 则希望让这个难度值越小越好。因为，只有保留足够多的体力，他才能营救 Soha，并两人合力打败恶魔猎手的背叛。\n\n所以，他想知道所有埋藏钥匙的点的难度值的和最小值可以是多少？\n", "inputFormat": "第 $1$ 行，三个整数 $M$、$N$、$T$。\n\n接下来 $M$ 行，每行 $N$ 个整数，为各格的高度。\n\n接下来 $M$ 行，每行 $N$ 个 $0$ 或 $1$， $1$ 代表该格点埋藏有钥匙。\n", "outputFormat": "一个整数，代表难度值的和的最小值。\n", "hint": "$1 ≤ M, N ≤ 600$\n\n$1 ≤ T ≤ M\\times N$\n", "locale": "zh-CN"}}}
{"pid": "P2267", "type": "P", "difficulty": 5, "samples": [["3 100\r\n1 888 1\r\n", "6"], ["4 100\r\n1 2 3 4\r\n", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "琪琪的项链", "background": "Piet 项目的一对开发者 laosb（吕世博）与 scjyholy（叶嘉琪）最近一直为中国学生站长联盟的童鞋们所津津乐道，不仅仅因为他们天天在某群中秀恩爱，而且他们还经常被用作题目背景。现在我们以他们为背景来引出一道问题。", "description": "话说 laosb 在与 scjyholy 配对成功 $1$ 周年后， laosb 花光了其所有的积蓄，为 scjyholy 买了一条项链。但是，他发现店中项链的样式实在太少，于是他想买回一条项链，组成自己的独特样式，以使 scjyholy 感动。\n\n首先 laosb 把项链中所有珠子取下，然后从左到右，选出若干珠子（至少 $1$ 颗），组成新的项链。因为项链珠子有很多颜色，laosb 希望知道他一共能组合出多少种不同的样式。\n\n如图所示，假设原始的项链有 $3$ 颗珠子：蓝、黄、蓝，这样他一共有如下的选择方法：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1.png) \n\n由于答案可能很大，请输出答案 $\\bmod\\ M$ 的结果。", "inputFormat": "第 $1$ 行两个整数 $N,M\\ (1 \\le N \\le 5 \\times 10^5,1 \\le M \\le 10^9)$，其中 $N$ 为原始珠子数目。\n\n第 $2$ 行 $N$ 个非负整数 $A_i\\ (0 \\le A_i \\le 10^9)$，每个整数代表一颗珠子颜色，相同整数表示相同颜色，不同整数表示不同颜色。", "outputFormat": "一个整数，表示样式总数 $\\bmod\\ M$ 的值。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Qiqi's Necklace", "background": "A pair of developers of the Piet project, laosb (Lv Shibo) and scjyholy (Ye Jiaqi), have recently become a hot topic among the members of the Chinese Student Webmasters Union, not only because they show their affection every day in a certain chat group, but also because they are often used as problem backgrounds. Now we use them as the background to introduce a problem.", "description": "After the $1$-year anniversary of pairing up with scjyholy, laosb spent all his savings to buy a necklace for scjyholy. However, he found that the store had too few styles, so he wanted to buy one and assemble his own unique style to move scjyholy.\n\nFirst, laosb removes all the beads from the necklace. Then, from left to right, he selects some beads (at least $1$ bead) to form a new necklace. Because there are many bead colors, laosb wants to know how many different styles he can form in total.\n\nAs shown in the figure, suppose the original necklace has $3$ beads: blue, yellow, blue. Then he has the following choices:\n\n![](https://cdn.luogu.com.cn/upload/pic/1.png)\n\nSince the answer can be large, please output the result $\\bmod\\ M$.", "inputFormat": "The first line contains two integers $N,M\\ (1 \\le N \\le 5 \\times 10^5,1 \\le M \\le 10^9)$, where $N$ is the number of original beads.\n\nThe second line contains $N$ non-negative integers $A_i\\ (0 \\le A_i \\le 10^9)$, each representing the color of a bead. Equal integers indicate the same color, and different integers indicate different colors.", "outputFormat": "Output a single integer: the total number of styles $\\bmod\\ M$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "琪琪的项链", "background": "Piet 项目的一对开发者 laosb（吕世博）与 scjyholy（叶嘉琪）最近一直为中国学生站长联盟的童鞋们所津津乐道，不仅仅因为他们天天在某群中秀恩爱，而且他们还经常被用作题目背景。现在我们以他们为背景来引出一道问题。", "description": "话说 laosb 在与 scjyholy 配对成功 $1$ 周年后， laosb 花光了其所有的积蓄，为 scjyholy 买了一条项链。但是，他发现店中项链的样式实在太少，于是他想买回一条项链，组成自己的独特样式，以使 scjyholy 感动。\n\n首先 laosb 把项链中所有珠子取下，然后从左到右，选出若干珠子（至少 $1$ 颗），组成新的项链。因为项链珠子有很多颜色，laosb 希望知道他一共能组合出多少种不同的样式。\n\n如图所示，假设原始的项链有 $3$ 颗珠子：蓝、黄、蓝，这样他一共有如下的选择方法：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1.png) \n\n由于答案可能很大，请输出答案 $\\bmod\\ M$ 的结果。", "inputFormat": "第 $1$ 行两个整数 $N,M\\ (1 \\le N \\le 5 \\times 10^5,1 \\le M \\le 10^9)$，其中 $N$ 为原始珠子数目。\n\n第 $2$ 行 $N$ 个非负整数 $A_i\\ (0 \\le A_i \\le 10^9)$，每个整数代表一颗珠子颜色，相同整数表示相同颜色，不同整数表示不同颜色。", "outputFormat": "一个整数，表示样式总数 $\\bmod\\ M$ 的值。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2268", "type": "P", "difficulty": 3, "samples": [["Atcag\nActag\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2002", "各省省选", "湖南"], "title": "[HNOI2002] DNA 分子的最佳比对", "background": null, "description": "$\\operatorname{DNA}$ 分子是人类遗传信息的载体，它间接地指导蛋白质的合成。$\\operatorname{DNA}$ 分子是由四种核苷酸组成的长链，这四种核苷酸分别是腺嘌呤核苷酸（用 $\\operatorname{A}$ 代表）、鸟嘌呤核苷酸（用 $\\operatorname{G}$ 代表）、胞嘧啶核苷酸（用 $\\operatorname{C}$ 代表）和胸腺嘧啶核苷酸（用 $\\operatorname{T}$ 代表）。习惯上用一个字符集为 $\\{\\operatorname{A,T,C,G}\\}$ 的字符串来表示一个 $\\operatorname{DNA}$ 分子序列，如 $\\operatorname{CGTTAGA}$。\n\n在生物进化过程中，$\\operatorname{DNA}$ 分子可能发生各种各样的突变。这种突变形成了生物遗传信息的改变，从而使生物得以分化，构成了生物的多样性。\n\n主要的突变有三种：\n\n1. 在一个 $\\operatorname{DNA}$ 序列中插入一个新的核苷酸，\n2. $\\operatorname{DNA}$ 序列中丢失了一个核苷酸，\n3. $\\operatorname{DNA}$ 序列中的某个核苷酸被另一个核苷酸所取代。\n\n所谓两个 $\\operatorname{DNA}$ 序列的一个比对是寻找一种排列方式，使得两个 $\\operatorname{DNA}$ 序列在同样的位置上有相同的核苷酸，而若在同样的位置上两个 $\\operatorname{DNA}$ 序列的核苷酸不同，则是由三种突变之一得到。例如，对两个 $\\operatorname{DNA}$ 序列 $T_1 =\\operatorname{ATCAG}$，$T_2 =\\operatorname{ACTAG}$，可以按如下方式比对：（$-$ 表示空白）\n\n比对一：\n\n| $T_1$ | $T_2$ |\n| :----------- | :----------- |\n| $\\text A$ | $\\text A$ |\n| $\\text T$ | $-$ |\n| $\\text C$ | $\\text C$ |\n| $-$ | $\\text T$ |\n| $\\text A$ | $\\text A$ |\n| $\\text G$ | $\\text G$ |\n\n也可以按如下方式比对：\n\n比对二：\n\n| $T_1$ | $T_2$ |\n| :----------- | :----------- |\n| $\\text A$ | $\\text A$ |\n| $\\text T$ | $\\text C$ |\n| $\\text C$ | $\\text T$ |\n| $\\text A$ | $\\text A$ |\n| $\\text G$ | $\\text G$ |\n\n如果两个 $\\operatorname{DNA}$ 序列在相同的位置上有越多相同的核苷酸对，则表明它们之间越相似，即它们存在功能上的相似性和进化史上的亲缘关系。\n\n对于两个 $\\operatorname{DNA}$ 序列的一个比对，规定如下得分方式：\n\n1. 一个同样的位置上有相同的核苷酸对，则可得 $1$ 分；\n2. 一个同样的位置上有不同的核苷酸对，则得 $0$ 分；\n3. 如果在某个位置上一个序列有核苷酸，而另一个序列在该位置上为 $-$，则得 $-2$ 分。\n\n例如，比对一的得分是 $0$ 分，比对二的得分是 $3$ 分。\n\n问题是：对于两个 $\\operatorname{DNA}$ 序列，寻找一种比对方式，使得它们的得分最高。", "inputFormat": "输入数据共有两行。\n\n第一行为 $\\text{DNA}$ 序列 $T _ 1$，第二行为 $\\text{DNA}$ 序列 $T _ 2$。序列的长度不大于 $1000$。序列中的字母是英文小写或者大写字母。", "outputFormat": "程序运行结束时，在屏幕上输出所找出的最大的得分。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Optimal Alignment of DNA Molecules", "background": "", "description": "$\\operatorname{DNA}$ molecules are carriers of human genetic information, indirectly guiding protein synthesis. A $\\operatorname{DNA}$ molecule is a long chain composed of four nucleotides: adenine nucleotide (denoted by $\\operatorname{A}$), guanine nucleotide (denoted by $\\operatorname{G}$), cytosine nucleotide (denoted by $\\operatorname{C}$), and thymine nucleotide (denoted by $\\operatorname{T}$). By convention, a $\\{\\operatorname{A,T,C,G}\\}$-alphabet string is used to represent a $\\operatorname{DNA}$ sequence, such as $\\operatorname{CGTTAGA}$.\n\nDuring biological evolution, $\\operatorname{DNA}$ molecules may undergo various mutations. These mutations change genetic information, enabling species differentiation and forming biological diversity.\n\nThere are three main types of mutations:\n1. Inserting a new nucleotide into a $\\operatorname{DNA}$ sequence,\n2. Deleting a nucleotide from a $\\operatorname{DNA}$ sequence,\n3. Substituting one nucleotide in the $\\operatorname{DNA}$ sequence with another.\n\nAn alignment of two $\\operatorname{DNA}$ sequences is an arrangement that places the two sequences so that identical nucleotides appear at the same positions. If the nucleotides at the same position differ, that difference is attributed to one of the three types of mutations. For example, for two $\\operatorname{DNA}$ sequences $T_1 =\\operatorname{ATCAG}$, $T_2 =\\operatorname{ACTAG}$, one possible alignment is as follows (where $-$ denotes a gap):\n\nAlignment 1:\n\n| $T_1$ | $T_2$ |\n| :----------- | :----------- |\n| $\\text A$ | $\\text A$ |\n| $\\text T$ | $-$ |\n| $\\text C$ | $\\text C$ |\n| $-$ | $\\text T$ |\n| $\\text A$ | $\\text A$ |\n| $\\text G$ | $\\text G$ |\n\nAnother possible alignment is:\n\nAlignment 2:\n\n| $T_1$ | $T_2$ |\n| :----------- | :----------- |\n| $\\text A$ | $\\text A$ |\n| $\\text T$ | $\\text C$ |\n| $\\text C$ | $\\text T$ |\n| $\\text A$ | $\\text A$ |\n| $\\text G$ | $\\text G$ |\n\nThe more identical nucleotide pairs the two $\\operatorname{DNA}$ sequences have at the same positions, the more similar they are, indicating functional similarity and phylogenetic relatedness.\n\nThe scoring rules for an alignment of two $\\operatorname{DNA}$ sequences are as follows:\n1. If the nucleotides at the same position are identical, score $1$ point.\n2. If the nucleotides at the same position are different, score $0$ points.\n3. If one sequence has a nucleotide at some position while the other has $-$ at that position, score $-2$ points.\n\nFor example, the score of Alignment 1 is $0$ points, and the score of Alignment 2 is $3$ points.\n\nThe task is: Given two $\\operatorname{DNA}$ sequences, find an alignment that maximizes the score.", "inputFormat": "The input consists of two lines.\n\nThe first line is the $\\text{DNA}$ sequence $T _ 1$, and the second line is the $\\text{DNA}$ sequence $T _ 2$. The length of each sequence does not exceed $1000$. The letters in the sequences are lowercase or uppercase English letters.", "outputFormat": "Output the maximum score found.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] DNA 分子的最佳比对", "background": null, "description": "$\\operatorname{DNA}$ 分子是人类遗传信息的载体，它间接地指导蛋白质的合成。$\\operatorname{DNA}$ 分子是由四种核苷酸组成的长链，这四种核苷酸分别是腺嘌呤核苷酸（用 $\\operatorname{A}$ 代表）、鸟嘌呤核苷酸（用 $\\operatorname{G}$ 代表）、胞嘧啶核苷酸（用 $\\operatorname{C}$ 代表）和胸腺嘧啶核苷酸（用 $\\operatorname{T}$ 代表）。习惯上用一个字符集为 $\\{\\operatorname{A,T,C,G}\\}$ 的字符串来表示一个 $\\operatorname{DNA}$ 分子序列，如 $\\operatorname{CGTTAGA}$。\n\n在生物进化过程中，$\\operatorname{DNA}$ 分子可能发生各种各样的突变。这种突变形成了生物遗传信息的改变，从而使生物得以分化，构成了生物的多样性。\n\n主要的突变有三种：\n\n1. 在一个 $\\operatorname{DNA}$ 序列中插入一个新的核苷酸，\n2. $\\operatorname{DNA}$ 序列中丢失了一个核苷酸，\n3. $\\operatorname{DNA}$ 序列中的某个核苷酸被另一个核苷酸所取代。\n\n所谓两个 $\\operatorname{DNA}$ 序列的一个比对是寻找一种排列方式，使得两个 $\\operatorname{DNA}$ 序列在同样的位置上有相同的核苷酸，而若在同样的位置上两个 $\\operatorname{DNA}$ 序列的核苷酸不同，则是由三种突变之一得到。例如，对两个 $\\operatorname{DNA}$ 序列 $T_1 =\\operatorname{ATCAG}$，$T_2 =\\operatorname{ACTAG}$，可以按如下方式比对：（$-$ 表示空白）\n\n比对一：\n\n| $T_1$ | $T_2$ |\n| :----------- | :----------- |\n| $\\text A$ | $\\text A$ |\n| $\\text T$ | $-$ |\n| $\\text C$ | $\\text C$ |\n| $-$ | $\\text T$ |\n| $\\text A$ | $\\text A$ |\n| $\\text G$ | $\\text G$ |\n\n也可以按如下方式比对：\n\n比对二：\n\n| $T_1$ | $T_2$ |\n| :----------- | :----------- |\n| $\\text A$ | $\\text A$ |\n| $\\text T$ | $\\text C$ |\n| $\\text C$ | $\\text T$ |\n| $\\text A$ | $\\text A$ |\n| $\\text G$ | $\\text G$ |\n\n如果两个 $\\operatorname{DNA}$ 序列在相同的位置上有越多相同的核苷酸对，则表明它们之间越相似，即它们存在功能上的相似性和进化史上的亲缘关系。\n\n对于两个 $\\operatorname{DNA}$ 序列的一个比对，规定如下得分方式：\n\n1. 一个同样的位置上有相同的核苷酸对，则可得 $1$ 分；\n2. 一个同样的位置上有不同的核苷酸对，则得 $0$ 分；\n3. 如果在某个位置上一个序列有核苷酸，而另一个序列在该位置上为 $-$，则得 $-2$ 分。\n\n例如，比对一的得分是 $0$ 分，比对二的得分是 $3$ 分。\n\n问题是：对于两个 $\\operatorname{DNA}$ 序列，寻找一种比对方式，使得它们的得分最高。", "inputFormat": "输入数据共有两行。\n\n第一行为 $\\text{DNA}$ 序列 $T _ 1$，第二行为 $\\text{DNA}$ 序列 $T _ 2$。序列的长度不大于 $1000$。序列中的字母是英文小写或者大写字母。", "outputFormat": "程序运行结束时，在屏幕上输出所找出的最大的得分。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2269", "type": "P", "difficulty": 4, "samples": [["3 1 3                       \n0 1 5\n1 0 2\n5 2 0\n0 0.1 0.05\n0.1 0 0.05\n0.05 0.05 0", "5 0.0500"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2002", "各省省选", "湖南"], "title": "[HNOI2002] 高质量的数据传输", "background": "", "description": "$%原题面是：![](https://cdn.luogu.com.cn/upload/pic/1325.png)$\n\n目前的网络为了支持各种 QoS 需求，在进行路由选择时所考虑的路由参数主要有网络路径中的参数如时延、网络带宽、时延抖动及丢失率等参数，在某种高质量的数据传输工程中仅考虑网络的时延和丢失率两个参数。\n\n网络可以用一个简单无向图 $G = (V, E)$ 来表示，$V$ 是网络中结点的集合，$E$ 是两个结点之间的链路，即边。依据工程的要求，每条边上有两个参数：时延和丢失率。\n\n* 边上的时延 $t$ 是数据从该边的一个端点传输到另一个端点所需要的时间，取为整数，单位是毫秒，$0 \\le t \\le 100$。\n* 一条边的丢失率 $p$ 是数据从该边的一个端点传输到另一个端点后丢失数据的百分比，$0 \\le p \\le 0.1$。\n\n所谓网络 $G$ 上的路由选择是：给定 $G$ 中的两个结点 $u$ 和 $v$，找出这两个结点之间的一条路径。\n\n---\n\n对于网络 $G$ 的一条路径 $P = v_1, v_2, v_3, \\dots, v_n$，假设该路径上各边的时延和丢失率分别是：\n\n$$\nt_1, t_2, t_3, \\dots, t_{n-1}, \\quad p_1, p_2, p_3, \\dots, p_{n-1}\n$$\n\n则数据从 $v_1$ 传输到 $v_n$ 的时延是：\n\n$$\n\\sum_{i=1}^{n-1} t_i\n$$\n\n丢失率是：\n\n$$\n1 - \\prod_{i=1}^{n-1} (1 - p_i)\n$$\n\n---\n\n本题的高质量数据传输要求：如果数据要从一个结点 $u$ 传输到另一个结点 $v$，则所传输路径的丢失率是从 $u$ 到 $v$ 的所有路径中最小的，而且在该前提下时延最小。\n\n请为网络图给定的两个结点，找出满足高质量数据传输要求的路径。", "inputFormat": "共有 $2n+1$ 行。\n\n第 $1$ 行是网络的节点数 $n\\ (1 \\le n \\le 200)$ 和数据要传输的两个结点的序号 $i,j\\ (1 \\le i,j \\le n, i \\ne j)$。\n\n第 $2$ 行到第 $n+1$ 行是时延 $t$ 的邻接矩阵，其元素 $t_{u,v}\\ (-1 \\le t_{u,v} \\le 100,t_{i,j}=t_{j,i},t_{i,i}=0)$ 的值是第 $u$ 个结点到第 $v$ 个结点的边的时延，当其值为 $-1$ 时表示第 $u$ 个结点到第 $v$ 个结点无边。\n\n第 $n+2$ 行到第 $2n+1$ 行是丢失率 $p$ 的邻接矩阵，其元素 $p_{u,v}$ 的值是第 $u$ 个结点到第 $v$ 个结点的边的丢失率（最多精确到小数点后 $4$ 位），当其值为 $-1$ 时表示第 $u$ 个结点到第 $v$ 个结点无边。\n\n保证 $t_{u,v}=-1$ 当且仅当 $p_{u,v}=-1$。\n\n保证 $p_{u,v} \\in \\{-1\\} \\cup [0,0.1],p_{u,v}=p_{u,v},p_{u,u}=0$。", "outputFormat": "共 $1$ 行，输出所找出的路径的时延和丢失率。（时延是整数，直接输出即可；丢失率是实数，精确到小数点后 $4$ 位）", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] High-Quality Data Transmission", "background": "", "description": "Original statement (image): ![](https://cdn.luogu.com.cn/upload/pic/1325.png)\n\nTo support various QoS requirements, modern networks consider parameters such as path delay, bandwidth, delay jitter, and loss rate when selecting routes. In a certain high-quality data transmission project, only two parameters are considered: network delay and loss rate.\n\nThe network can be represented by a simple undirected graph $G = (V, E)$, where $V$ is the set of nodes in the network and $E$ is the set of links (edges) between pairs of nodes. According to the project requirements, each edge has two parameters: latency and loss rate.\n\n- The latency $t$ on an edge is the time required for data to travel from one endpoint to the other. It is an integer measured in milliseconds, with $0 \\le t \\le 100$.\n- The loss rate $p$ of an edge is the percentage of data lost after transmission from one endpoint to the other, with $0 \\le p \\le 0.1$.\n\nRoute selection on network $G$ is defined as follows: given two nodes $u$ and $v$ in $G$, find a path between them.\n\nFor a path $P = v_1, v_2, v_3, \\dots, v_n$ in $G$, suppose the latencies and loss rates of the edges on the path are\n$$\nt_1, t_2, t_3, \\dots, t_{n-1}, \\quad p_1, p_2, p_3, \\dots, p_{n-1}.\n$$\nThen the total latency from $v_1$ to $v_n$ is\n$$\n\\sum_{i=1}^{n-1} t_i,\n$$\nand the total loss rate is\n$$\n1 - \\prod_{i=1}^{n-1} (1 - p_i).\n$$\n\nHigh-quality data transmission requirement: if data is to be transmitted from a node $u$ to another node $v$, then among all paths from $u$ to $v$, the chosen path must have the minimal loss rate; subject to this, the latency must be minimal.\n\nGiven two nodes in the network graph, find a path that satisfies the high-quality data transmission requirement.", "inputFormat": "There are $2n+1$ lines.\n\n- Line $1$: the number of nodes $n$ ($1 \\le n \\le 200$) and the indices of the two nodes $i, j$ to transmit data between ($1 \\le i, j \\le n$, $i \\ne j$).\n\n- Lines $2$ to $n+1$: the adjacency matrix of latencies $t$. Each element $t_{u,v}$ ($-1 \\le t_{u,v} \\le 100$, $t_{u,v} = t_{v,u}$, $t_{u,u} = 0$) gives the latency of the edge from node $u$ to node $v$. A value of $-1$ indicates that there is no edge between $u$ and $v$.\n\n- Lines $n+2$ to $2n+1$: the adjacency matrix of loss rates $p$. Each element $p_{u,v}$ gives the loss rate of the edge from node $u$ to node $v$ (up to $4$ decimal places). A value of $-1$ indicates that there is no edge between $u$ and $v$.\n\nIt is guaranteed that $t_{u,v} = -1$ if and only if $p_{u,v} = -1$.\n\nIt is guaranteed that $p_{u,v} \\in \\{-1\\} \\cup [0, 0.1]$, $p_{u,v} = p_{v,u}$, and $p_{u,u} = 0$.", "outputFormat": "Output $1$ line containing the latency and the loss rate of the chosen path. The latency is an integer and should be printed directly; the loss rate is a real number printed to $4$ decimal places.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 高质量的数据传输", "background": "", "description": "$%原题面是：![](https://cdn.luogu.com.cn/upload/pic/1325.png)$\n\n目前的网络为了支持各种 QoS 需求，在进行路由选择时所考虑的路由参数主要有网络路径中的参数如时延、网络带宽、时延抖动及丢失率等参数，在某种高质量的数据传输工程中仅考虑网络的时延和丢失率两个参数。\n\n网络可以用一个简单无向图 $G = (V, E)$ 来表示，$V$ 是网络中结点的集合，$E$ 是两个结点之间的链路，即边。依据工程的要求，每条边上有两个参数：时延和丢失率。\n\n* 边上的时延 $t$ 是数据从该边的一个端点传输到另一个端点所需要的时间，取为整数，单位是毫秒，$0 \\le t \\le 100$。\n* 一条边的丢失率 $p$ 是数据从该边的一个端点传输到另一个端点后丢失数据的百分比，$0 \\le p \\le 0.1$。\n\n所谓网络 $G$ 上的路由选择是：给定 $G$ 中的两个结点 $u$ 和 $v$，找出这两个结点之间的一条路径。\n\n---\n\n对于网络 $G$ 的一条路径 $P = v_1, v_2, v_3, \\dots, v_n$，假设该路径上各边的时延和丢失率分别是：\n\n$$\nt_1, t_2, t_3, \\dots, t_{n-1}, \\quad p_1, p_2, p_3, \\dots, p_{n-1}\n$$\n\n则数据从 $v_1$ 传输到 $v_n$ 的时延是：\n\n$$\n\\sum_{i=1}^{n-1} t_i\n$$\n\n丢失率是：\n\n$$\n1 - \\prod_{i=1}^{n-1} (1 - p_i)\n$$\n\n---\n\n本题的高质量数据传输要求：如果数据要从一个结点 $u$ 传输到另一个结点 $v$，则所传输路径的丢失率是从 $u$ 到 $v$ 的所有路径中最小的，而且在该前提下时延最小。\n\n请为网络图给定的两个结点，找出满足高质量数据传输要求的路径。", "inputFormat": "共有 $2n+1$ 行。\n\n第 $1$ 行是网络的节点数 $n\\ (1 \\le n \\le 200)$ 和数据要传输的两个结点的序号 $i,j\\ (1 \\le i,j \\le n, i \\ne j)$。\n\n第 $2$ 行到第 $n+1$ 行是时延 $t$ 的邻接矩阵，其元素 $t_{u,v}\\ (-1 \\le t_{u,v} \\le 100,t_{i,j}=t_{j,i},t_{i,i}=0)$ 的值是第 $u$ 个结点到第 $v$ 个结点的边的时延，当其值为 $-1$ 时表示第 $u$ 个结点到第 $v$ 个结点无边。\n\n第 $n+2$ 行到第 $2n+1$ 行是丢失率 $p$ 的邻接矩阵，其元素 $p_{u,v}$ 的值是第 $u$ 个结点到第 $v$ 个结点的边的丢失率（最多精确到小数点后 $4$ 位），当其值为 $-1$ 时表示第 $u$ 个结点到第 $v$ 个结点无边。\n\n保证 $t_{u,v}=-1$ 当且仅当 $p_{u,v}=-1$。\n\n保证 $p_{u,v} \\in \\{-1\\} \\cup [0,0.1],p_{u,v}=p_{u,v},p_{u,u}=0$。", "outputFormat": "共 $1$ 行，输出所找出的路径的时延和丢失率。（时延是整数，直接输出即可；丢失率是实数，精确到小数点后 $4$ 位）", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2270", "type": "P", "difficulty": 5, "samples": [["4 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2002", "各省省选", "湖南"], "title": "[HNOI2002] 奶牛的运算", "background": "", "description": "最近，Farmer John 农场里的奶牛正在学习数学基础课。这天，奶牛 Besty 学会了加减法运算和括号的使用。\n\nFarmer John 为了考察 Besty 的学习情况，写了如下一个算式：\n\n$S =A_1-A_2-\\ldots-A_n$\n\n接着，Farmer John 告诉 Besty，这个算式中省略了 $K$ 个括号。将这 $K$ 个括号加入该算式中，就会得到一种算式方案。\n\n例如：$S=A_1-A_2-A_3-A_4$，$K = 2$，则 $S = (A_1)-A_2 - (A_3- A_4)$ 就是一种算式方案。\n\n而对任意两个算式方案，$S'$ 和 $S''$ 本质不同是指：存在某数列 $A_1,\\ldots,A_n$ 满足 $S'\\ne S''$。否则就是本质相同。\n\n例如：$S'=(A_1)-A_2-(A_3-A_4)$ 与 $S''=(A_1-A_2)-(A_3-A_4)$ 就是本质相同的算式方案。\n\n现在，Farmer John 告诉奶牛 Besty 算式中项的个数 $N$ 和括号的个数 $K$（数列 $A$ 是变量，我们不需要关心它），他想考考 Besty 究竟有多少本质不同的算式方案。\n", "inputFormat": "输入文件仅一行，依次为两个整数 $N$ 和 $K$。（$1<N,K<100$）。\n", "outputFormat": "输出文件仅一行，为本质不同的算式方案数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Cow's Arithmetic", "background": "", "description": "Recently, the cows on Farmer John's farm have been taking a basic math class. One day, the cow Besty learned addition, subtraction, and how to use parentheses.\n\nTo test Besty's learning, Farmer John wrote the following expression:\n\n$S =A_1-A_2-\\ldots-A_n$\n\nThen Farmer John told Besty that $K$ pairs of parentheses were omitted in this expression. Adding these $K$ pairs of parentheses to the expression produces one expression scheme.\n\nFor example: $S=A_1-A_2-A_3-A_4$, $K = 2$, then $S = (A_1)-A_2 - (A_3- A_4)$ is one such scheme.\n\nFor any two expression schemes, $S'$ and $S''$, they are essentially different if there exists a sequence $A_1, \\ldots, A_n$ such that $S' \\ne S''$. Otherwise, they are essentially the same.\n\nFor example, $S'=(A_1)-A_2-(A_3-A_4)$ and $S''=(A_1-A_2)-(A_3-A_4)$ are essentially the same schemes.\n\nNow, Farmer John tells Besty the number of terms $N$ and the number of pairs of parentheses $K$ in the expression (the sequence $A$ is variable; we do not need to care about it). He wants to test how many essentially different expression schemes there are.", "inputFormat": "The input contains a single line with two integers $N$ and $K$。($1<N,K<100$)。", "outputFormat": "Output a single line containing the number of essentially different expression schemes.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 奶牛的运算", "background": "", "description": "最近，Farmer John 农场里的奶牛正在学习数学基础课。这天，奶牛 Besty 学会了加减法运算和括号的使用。\n\nFarmer John 为了考察 Besty 的学习情况，写了如下一个算式：\n\n$S =A_1-A_2-\\ldots-A_n$\n\n接着，Farmer John 告诉 Besty，这个算式中省略了 $K$ 个括号。将这 $K$ 个括号加入该算式中，就会得到一种算式方案。\n\n例如：$S=A_1-A_2-A_3-A_4$，$K = 2$，则 $S = (A_1)-A_2 - (A_3- A_4)$ 就是一种算式方案。\n\n而对任意两个算式方案，$S'$ 和 $S''$ 本质不同是指：存在某数列 $A_1,\\ldots,A_n$ 满足 $S'\\ne S''$。否则就是本质相同。\n\n例如：$S'=(A_1)-A_2-(A_3-A_4)$ 与 $S''=(A_1-A_2)-(A_3-A_4)$ 就是本质相同的算式方案。\n\n现在，Farmer John 告诉奶牛 Besty 算式中项的个数 $N$ 和括号的个数 $K$（数列 $A$ 是变量，我们不需要关心它），他想考考 Besty 究竟有多少本质不同的算式方案。\n", "inputFormat": "输入文件仅一行，依次为两个整数 $N$ 和 $K$。（$1<N,K<100$）。\n", "outputFormat": "输出文件仅一行，为本质不同的算式方案数。\n", "hint": "", "locale": "zh-CN"}}}
