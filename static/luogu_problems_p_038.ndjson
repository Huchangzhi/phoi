{"pid": "P10634", "type": "P", "difficulty": 5, "samples": [["9 6 10\n5\n6\n2\n10\n10\n7\n3\n2\n9\n1\n4\n4\n3\n2\n1", "1\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "O2优化", "哈希 hashing", "KMP 算法"], "title": "BZOJ2372 music", "background": "", "description": "最近 A、B 两国发生了一场战争。dick 作为 A 国的军事总指挥，最近非常头痛于己方的情报问题。因为 B 国最近雇佣了 Easy 这一位密码专家来给他们的所有通讯加密。\n\nEasy 非常喜欢唱歌，于是他决定将所有的信号都变成旋律储存起来，比如说 $11556654433221$ 就可能是一段加过密的音符，我们用一个等长度的序列来表示它，就变成了 $1,1,5,5,6,6,\\dots$。为了增加密码的保密性，他把加密的乐谱又调整了一下，把某些音调改变了，将原序列 $A$ 变成 $B$，有 $|A|=|B|$，且对于 $a_i=a_j$ 有 $b_i=b_j$，对于 $a_i<a_j$ 有 $b_i<b_j$，对于 $a_i>a_j$ 有 $b_i>b_j$。例如：`11221` 和 `55775` 就可能代表了同一段音符。\n\n最近，dick 截获了一段信号，这段信号中可能包含了某些重要信息。根据以往的经验，dick 已经知道了某些旋律所代表的意义。于是 dick 想知道，对于一段已知的旋律，能不能判断它是否在这段截获的旋律中出现？如果出现了，能否找出它出现的次数及位置呢？\n\n「任务」判断给定旋律在截获旋律中出现的次数及位置。", "inputFormat": "第一行三个正整数 $n,m,s$，$n$ 是截获旋律的长度，$m$ 是已知旋律的长度，所有的旋律都是 $1\\sim s(s\\leq 25)$ 的正整数。\n\n接下来 $n$ 行，每行一个整数描述截获的旋律 $A$；\n\n接下来 $m$ 行，每行一个整数描述已知的旋律 $B$；", "outputFormat": "第一行一个整数 $t$ 表示出现的次数。\n\n然后 $t$ 行，按照从小到大给出出现时的起始位置 $p$，即：$A[p\\dots p+m-1]$ 等价于 $B$。", "hint": "对于所有数据，保证 $1\\leq n \\leq 10^5$，$1\\leq m \\leq 25000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ2372 music", "background": "", "description": "最近 A、B 两国发生了一场战争。dick 作为 A 国的军事总指挥，最近非常头痛于己方的情报问题。因为 B 国最近雇佣了 Easy 这一位密码专家来给他们的所有通讯加密。\n\nEasy 非常喜欢唱歌，于是他决定将所有的信号都变成旋律储存起来，比如说 $11556654433221$ 就可能是一段加过密的音符，我们用一个等长度的序列来表示它，就变成了 $1,1,5,5,6,6,\\dots$。为了增加密码的保密性，他把加密的乐谱又调整了一下，把某些音调改变了，将原序列 $A$ 变成 $B$，有 $|A|=|B|$，且对于 $a_i=a_j$ 有 $b_i=b_j$，对于 $a_i<a_j$ 有 $b_i<b_j$，对于 $a_i>a_j$ 有 $b_i>b_j$。例如：`11221` 和 `55775` 就可能代表了同一段音符。\n\n最近，dick 截获了一段信号，这段信号中可能包含了某些重要信息。根据以往的经验，dick 已经知道了某些旋律所代表的意义。于是 dick 想知道，对于一段已知的旋律，能不能判断它是否在这段截获的旋律中出现？如果出现了，能否找出它出现的次数及位置呢？\n\n「任务」判断给定旋律在截获旋律中出现的次数及位置。", "inputFormat": "第一行三个正整数 $n,m,s$，$n$ 是截获旋律的长度，$m$ 是已知旋律的长度，所有的旋律都是 $1\\sim s(s\\leq 25)$ 的正整数。\n\n接下来 $n$ 行，每行一个整数描述截获的旋律 $A$；\n\n接下来 $m$ 行，每行一个整数描述已知的旋律 $B$；", "outputFormat": "第一行一个整数 $t$ 表示出现的次数。\n\n然后 $t$ 行，按照从小到大给出出现时的起始位置 $p$，即：$A[p\\dots p+m-1]$ 等价于 $B$。", "hint": "对于所有数据，保证 $1\\leq n \\leq 10^5$，$1\\leq m \\leq 25000$。", "locale": "zh-CN"}}}
{"pid": "P10635", "type": "P", "difficulty": 6, "samples": [["4\n0101\n1000\n0010\n0101", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "Ad-hoc"], "title": "BZOJ3517 翻硬币", "background": "", "description": "有一个 $n$ 行 $n$ 列的棋盘，每个格子上都有一个硬币，且 $n$ 为偶数。每个硬币要么是正面朝上，要么是反面朝上。每次操作你可以选定一个格子 $(x,y)$，然后将第 $x$ 行和第 $y$ 列的所有硬币都翻面。求将所有硬币都变成同一个面最少需要的操作数。", "inputFormat": "第一行包含一个正整数 $n$。接下来 $n$ 行，每行包含一个长度为 $n$ 的 $01$ 字符串，表示棋盘上硬币的状态。", "outputFormat": "仅包含一行，为最少需要的操作数。", "hint": "**【样例解释】**\n\n对 $(2,3)$ 和 $(3,1)$ 进行操作，最后全变成 $1$。\n\n**【数据范围】**\n\n对于所有数据，$1\\leq n \\leq 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3517 翻硬币", "background": "", "description": "有一个 $n$ 行 $n$ 列的棋盘，每个格子上都有一个硬币，且 $n$ 为偶数。每个硬币要么是正面朝上，要么是反面朝上。每次操作你可以选定一个格子 $(x,y)$，然后将第 $x$ 行和第 $y$ 列的所有硬币都翻面。求将所有硬币都变成同一个面最少需要的操作数。", "inputFormat": "第一行包含一个正整数 $n$。接下来 $n$ 行，每行包含一个长度为 $n$ 的 $01$ 字符串，表示棋盘上硬币的状态。", "outputFormat": "仅包含一行，为最少需要的操作数。", "hint": "**【样例解释】**\n\n对 $(2,3)$ 和 $(3,1)$ 进行操作，最后全变成 $1$。\n\n**【数据范围】**\n\n对于所有数据，$1\\leq n \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P10636", "type": "P", "difficulty": 6, "samples": [["3 4", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "O2优化", "莫比乌斯反演"], "title": "BZOJ3518 点组计数", "background": "", "description": "平面上摆放着一个 $n\\times m$ 的点阵，如下图是一个 $3\\times 4$ 的点阵图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6tq3jene.png)\n\n现问，有多少个三元点对组 $(a,b,c)$ 满足 $a,b,c$ 三点共线，顺序无关紧要，例如 $(a,b,c)$ 与 $(b,c,a)$ 算一组。答案对 $10^9+7$ 取模。", "inputFormat": "一行，两个正整数 $n,m$。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "数据保证，$1\\leq n,m\\leq 5\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3518 点组计数", "background": "", "description": "平面上摆放着一个 $n\\times m$ 的点阵，如下图是一个 $3\\times 4$ 的点阵图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6tq3jene.png)\n\n现问，有多少个三元点对组 $(a,b,c)$ 满足 $a,b,c$ 三点共线，顺序无关紧要，例如 $(a,b,c)$ 与 $(b,c,a)$ 算一组。答案对 $10^9+7$ 取模。", "inputFormat": "一行，两个正整数 $n,m$。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "数据保证，$1\\leq n,m\\leq 5\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P10637", "type": "P", "difficulty": 6, "samples": [["4\n1 3 5 7\n2 4 6 8\n1 1 9 9\n9 9 1 1", "9322587654\n9025304064\n1065645568\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化", "吉司机线段树 segment tree beats"], "title": "BZOJ4262 Sum", "background": null, "description": "给定一个长度为 $10^5$ 的整数序列 $a_i$，现进行 $t$ 次询问，每次询问给出 $l_1,l_2,r_1,r_2$ 四个值，要求出：\n\n$$\\sum_{l \\in [l_1,r_1]} \\sum_{r \\in [l_2,r_2]} (\\max_{i \\in [l,r]} a_i-\\min_{i\\in [l,r]} a_i)$$\n\n的值。不要求强制在线。\n\n本题中的序列 $a_i$ 由如下代码给定生成：\n\n```cpp\nconst int mod = 1e9;\nlong long fst = 1023, sec = 1025;\nfor (int i = 1; i <= 100000; i++) {\n\ta[i] = fst ^ sec;\n\tfst = fst * 1023 % mod;\n\tsec = sec * 1025 % mod;\n}\n```", "inputFormat": "第一行一个数 $t$，表示询问组数。\n\n接下来 $t$ 行，每行四个整数 $l_1, r_1, l_2, r_2$。", "outputFormat": "一共 $t$ 行，每行一个数 $\\text{Sum}$，表示答案。", "hint": "数据保证，$1\\leq t\\leq 40000$，$1\\leq l_1 \\leq r_1\\leq 10^5$，$1\\leq l_2 \\leq r_2\\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4262 Sum", "background": null, "description": "给定一个长度为 $10^5$ 的整数序列 $a_i$，现进行 $t$ 次询问，每次询问给出 $l_1,l_2,r_1,r_2$ 四个值，要求出：\n\n$$\\sum_{l \\in [l_1,r_1]} \\sum_{r \\in [l_2,r_2]} (\\max_{i \\in [l,r]} a_i-\\min_{i\\in [l,r]} a_i)$$\n\n的值。不要求强制在线。\n\n本题中的序列 $a_i$ 由如下代码给定生成：\n\n```cpp\nconst int mod = 1e9;\nlong long fst = 1023, sec = 1025;\nfor (int i = 1; i <= 100000; i++) {\n\ta[i] = fst ^ sec;\n\tfst = fst * 1023 % mod;\n\tsec = sec * 1025 % mod;\n}\n```", "inputFormat": "第一行一个数 $t$，表示询问组数。\n\n接下来 $t$ 行，每行四个整数 $l_1, r_1, l_2, r_2$。", "outputFormat": "一共 $t$ 行，每行一个数 $\\text{Sum}$，表示答案。", "hint": "数据保证，$1\\leq t\\leq 40000$，$1\\leq l_1 \\leq r_1\\leq 10^5$，$1\\leq l_2 \\leq r_2\\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10638", "type": "P", "difficulty": 6, "samples": [["5 3\n6 4 6 6 4 \n2 1 5 -5\n1 3 4 4\n3 1 5", "2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化", "吉司机线段树 segment tree beats"], "title": "BZOJ4355 Play with sequence", "background": "", "description": "维护一个长度为 $n$ 的整数序列 $a$，支持三种操作：\n\n- `1 u v c`，对于 $\\forall i \\in [u,v]$，将 $a_i$ 更改为 $c$；\n- `2 u v c`，对于 $\\forall i \\in [u,v]$，将 $a_i$ 更改为 $\\max(a_i+c,0)$；\n- `3 u v`，输出 $\\sum \\limits_{i=u}^v [a_i=0]$ 的值。", "inputFormat": "第一行输入两个正整数 $n,m$，表示序列长度和操作个数。\n\n第二行输入 $n$ 个整数 $a_i$，表示序列的初始状态。\n\n第三行开始，往下 $m$ 行，每行表示一个操作。", "outputFormat": "输出若干行，每行一个整数，依次回答每个操作 $3$ 的问题。", "hint": "对于 $100\\%$ 的数据，$1\\leq n,m\\leq 3\\times 10^5$，$0\\leq a_i\\leq 10^9$。\n\n- 对于操作 $1$，保证 $0\\leq c\\leq 10^9$。\n- 对于操作 $2$，保证 $|c| \\leq 10^9$。\n\n且对于所有操作，保证 $1\\leq u\\leq v\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4355 Play with sequence", "background": "", "description": "维护一个长度为 $n$ 的整数序列 $a$，支持三种操作：\n\n- `1 u v c`，对于 $\\forall i \\in [u,v]$，将 $a_i$ 更改为 $c$；\n- `2 u v c`，对于 $\\forall i \\in [u,v]$，将 $a_i$ 更改为 $\\max(a_i+c,0)$；\n- `3 u v`，输出 $\\sum \\limits_{i=u}^v [a_i=0]$ 的值。", "inputFormat": "第一行输入两个正整数 $n,m$，表示序列长度和操作个数。\n\n第二行输入 $n$ 个整数 $a_i$，表示序列的初始状态。\n\n第三行开始，往下 $m$ 行，每行表示一个操作。", "outputFormat": "输出若干行，每行一个整数，依次回答每个操作 $3$ 的问题。", "hint": "对于 $100\\%$ 的数据，$1\\leq n,m\\leq 3\\times 10^5$，$0\\leq a_i\\leq 10^9$。\n\n- 对于操作 $1$，保证 $0\\leq c\\leq 10^9$。\n- 对于操作 $2$，保证 $|c| \\leq 10^9$。\n\n且对于所有操作，保证 $1\\leq u\\leq v\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P10639", "type": "P", "difficulty": 6, "samples": [["2\n1 2\n2\n2 1 2 2\n4 1 2", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "吉司机线段树 segment tree beats"], "title": "BZOJ4695 最假女选手", "background": null, "description": "给定一个长度为 $n$ 的序列，要求支持以下 $6$ 种操作：\n- 给一个区间 $[l,r]$ 加上一个整数 $x$；\n- 把一个区间 $[l,r]$ 内小于 $x$ 的数都变成 $x$；\n- 把一个区间 $[l,r]$ 内大于 $x$ 的数都变成 $x$；\n- 求区间 $[l,r]$ 的和；\n- 求区间 $[l,r]$ 的最大值；\n- 求区间 $[l,r]$ 的最小值；", "inputFormat": "第一行一个整数 $n$ 表示序列长度。\n\n第二行 $n$ 个整数 $a_i$ 表示初始序列。\n\n第三行一个整数 $m$ 表示操作个数。\n\n接下来 $m$ 行，每行三或四个整数，表示一个题目中所描述的操作。", "outputFormat": "对于每个 $4,5,6$ 类型的操作输出一行一个整数表示答案。", "hint": "数据保证，$1\\leq n,m\\leq 5\\times 10^5$，$|a_i|\\leq 10^8$。\n\n当进行 $1$ 操作时，$|x| \\leq 1000$；\n\n当进行 $2$ 操作时，$|x| \\leq 10^8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4695 最假女选手", "background": null, "description": "给定一个长度为 $n$ 的序列，要求支持以下 $6$ 种操作：\n- 给一个区间 $[l,r]$ 加上一个整数 $x$；\n- 把一个区间 $[l,r]$ 内小于 $x$ 的数都变成 $x$；\n- 把一个区间 $[l,r]$ 内大于 $x$ 的数都变成 $x$；\n- 求区间 $[l,r]$ 的和；\n- 求区间 $[l,r]$ 的最大值；\n- 求区间 $[l,r]$ 的最小值；", "inputFormat": "第一行一个整数 $n$ 表示序列长度。\n\n第二行 $n$ 个整数 $a_i$ 表示初始序列。\n\n第三行一个整数 $m$ 表示操作个数。\n\n接下来 $m$ 行，每行三或四个整数，表示一个题目中所描述的操作。", "outputFormat": "对于每个 $4,5,6$ 类型的操作输出一行一个整数表示答案。", "hint": "数据保证，$1\\leq n,m\\leq 5\\times 10^5$，$|a_i|\\leq 10^8$。\n\n当进行 $1$ 操作时，$|x| \\leq 1000$；\n\n当进行 $2$ 操作时，$|x| \\leq 10^8$。", "locale": "zh-CN"}}}
{"pid": "P10640", "type": "P", "difficulty": 6, "samples": [["1 1 1\n2 0 1 0\n\n2 1 1 1\n3 1 0 0 1\n\n5 1 0 0 1 0 0\n5 0 0 1 0 0 1", "YES\nYES\nNO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "微积分"], "title": "BZOJ2356 不等式", "background": "", "description": "数学中有很多不等式，比如，当 $x,y>0$ 时：\n\n$$x^2+y^2 \\geq 2xy$$\n\n$$x^3+y^3 \\geq x^2y+xy^2$$\n\n输入两个分别齐次且系数非负的二元多项式 $f(x,y)$ 和 $g(x,y)$，判断是否存在 $A,r>0$，满足对于任意 $x,y>0$，都有 $f(x,y)\\geq Ag(x,y)^r$。", "inputFormat": "包含多组数据，相邻两组数据之间用一个空行隔开。\n\n每组数据包含两行。\n\n第一行包括 $n+2$ 个非负整数 $n,a_0,a_1,\\dots,a_n$，其中 $a_i$ 不全为 $0$，表示 $f(x,y)=a_0x^n+a_1x^{n-1}y+\\dots+a_ny^n$。\n\n第二行包括 $m+2$ 个非负整数 $m,b_0,b_1,\\dots,b_m$，其中 $b_i$ 不全为 $0$，表示 $g(x,y)=b_0x^m+b_1x^{m-1}y+\\dots+b_my^m$。", "outputFormat": "对于每组数据，输出一行，若存在则输出 `YES`，否则输出 `NO`。", "hint": "**【样例解释】**\n\n- 对于第一组样例，$x+y \\geq \\sqrt{2xy}$。\n- 对于第二组样例，$x^2+xy+y^2\\geq \\sqrt[3]{(x^3+y^3)^2}$，展开易证。\n- 对于第三组样例，反设 $x^5+x^2y^3 \\geq A(x^3y^2+y^5)^r$，对于所有正数 $x,y$ 都成立。取 $x=y$，得 $2x^5\\geq A(2x^5)^r$，若 $r>1$，则 $x$ 取充分大时不等式不成立，若 $r<1$，则 $x$ 取足够小时不等式不成立，所以 $r=1$。再取 $x=1$，得 $1+y^3 \\geq A(y^2+y^5)$，即 $1\\geq Ay^2$，不可能对所有正数 $y$ 成立，故不存在 $A,r$。\n\n**【数据范围】**\n\n最多包含 $100$ 组数据，且 $1\\leq n,m\\leq 100$，系数大小不超过 $10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ2356 不等式", "background": "", "description": "数学中有很多不等式，比如，当 $x,y>0$ 时：\n\n$$x^2+y^2 \\geq 2xy$$\n\n$$x^3+y^3 \\geq x^2y+xy^2$$\n\n输入两个分别齐次且系数非负的二元多项式 $f(x,y)$ 和 $g(x,y)$，判断是否存在 $A,r>0$，满足对于任意 $x,y>0$，都有 $f(x,y)\\geq Ag(x,y)^r$。", "inputFormat": "包含多组数据，相邻两组数据之间用一个空行隔开。\n\n每组数据包含两行。\n\n第一行包括 $n+2$ 个非负整数 $n,a_0,a_1,\\dots,a_n$，其中 $a_i$ 不全为 $0$，表示 $f(x,y)=a_0x^n+a_1x^{n-1}y+\\dots+a_ny^n$。\n\n第二行包括 $m+2$ 个非负整数 $m,b_0,b_1,\\dots,b_m$，其中 $b_i$ 不全为 $0$，表示 $g(x,y)=b_0x^m+b_1x^{m-1}y+\\dots+b_my^m$。", "outputFormat": "对于每组数据，输出一行，若存在则输出 `YES`，否则输出 `NO`。", "hint": "**【样例解释】**\n\n- 对于第一组样例，$x+y \\geq \\sqrt{2xy}$。\n- 对于第二组样例，$x^2+xy+y^2\\geq \\sqrt[3]{(x^3+y^3)^2}$，展开易证。\n- 对于第三组样例，反设 $x^5+x^2y^3 \\geq A(x^3y^2+y^5)^r$，对于所有正数 $x,y$ 都成立。取 $x=y$，得 $2x^5\\geq A(2x^5)^r$，若 $r>1$，则 $x$ 取充分大时不等式不成立，若 $r<1$，则 $x$ 取足够小时不等式不成立，所以 $r=1$。再取 $x=1$，得 $1+y^3 \\geq A(y^2+y^5)$，即 $1\\geq Ay^2$，不可能对所有正数 $y$ 成立，故不存在 $A,r$。\n\n**【数据范围】**\n\n最多包含 $100$ 组数据，且 $1\\leq n,m\\leq 100$，系数大小不超过 $10^4$。", "locale": "zh-CN"}}}
{"pid": "P10641", "type": "P", "difficulty": 5, "samples": [["5 2\n4 3 2 1 1\n1 2\n1 5\n2 3\n2 4", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "线段树", "O2优化", "可并堆", "树链剖分"], "title": "BZOJ3252 攻略", "background": "众所周知，桂木桂马是攻略之神，开启攻略之神模式后，他可以同时攻略 $k$ 部游戏。\n\n今天他得到了一款新游戏《XX 半岛》，这款游戏有 $n$ 个场景，某些场景可以通过不同的选择支到达其他场景。所有场景和选择支构成树状结构：开始游戏时在根节点（共通线），叶子节点为结局。每个场景有一个价值，现在桂马开启攻略之神模式，同时攻略 $k$ 次该游戏，问他观赏到的场景的价值和最大是多少？（同一场景观看多次是不能重复得到价值的）\n\n>“为什么你还没玩就知道每个场景的价值呢？”  \n>“我已经看到结局了。”", "description": "给定一个有 $n$ 个结点的树，树有点权且点权为正整数。现选取 $k$ 条从根结点出发到叶子结点的简单路径，求这些路径的并集上所有结点的点权之和的最大值。", "inputFormat": "第一行两个正整数 $n,k$。\n\n第二行输入 $n$ 个正整数 $w_i$，表示每个结点的点权。\n\n接下来输入 $n-1$ 行，每行 $2$ 个正整数 $u,v$，表示结点 $u$ 是结点 $v$ 的父亲。", "outputFormat": "输出一个正整数，表示答案。", "hint": "对于所有数据，保证 $1\\leq n\\leq 2\\times 10^5$，$1\\leq w_i\\leq 2^{31}-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3252 攻略", "background": "众所周知，桂木桂马是攻略之神，开启攻略之神模式后，他可以同时攻略 $k$ 部游戏。\n\n今天他得到了一款新游戏《XX 半岛》，这款游戏有 $n$ 个场景，某些场景可以通过不同的选择支到达其他场景。所有场景和选择支构成树状结构：开始游戏时在根节点（共通线），叶子节点为结局。每个场景有一个价值，现在桂马开启攻略之神模式，同时攻略 $k$ 次该游戏，问他观赏到的场景的价值和最大是多少？（同一场景观看多次是不能重复得到价值的）\n\n>“为什么你还没玩就知道每个场景的价值呢？”  \n>“我已经看到结局了。”", "description": "给定一个有 $n$ 个结点的树，树有点权且点权为正整数。现选取 $k$ 条从根结点出发到叶子结点的简单路径，求这些路径的并集上所有结点的点权之和的最大值。", "inputFormat": "第一行两个正整数 $n,k$。\n\n第二行输入 $n$ 个正整数 $w_i$，表示每个结点的点权。\n\n接下来输入 $n-1$ 行，每行 $2$ 个正整数 $u,v$，表示结点 $u$ 是结点 $v$ 的父亲。", "outputFormat": "输出一个正整数，表示答案。", "hint": "对于所有数据，保证 $1\\leq n\\leq 2\\times 10^5$，$1\\leq w_i\\leq 2^{31}-1$。", "locale": "zh-CN"}}}
{"pid": "P10642", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2022", "交互题", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2022] Art Collection (Day1)", "background": "", "description": "有一个值域 $[1,n]$ 的未知排列 $P$。你每次可以询问一个排列 $R$。交互库会返回满足在排列 $P$ 中 $i$ 出现在 $j$ 前面，在排列 $R$ 中 $i$ 出现在 $j$ 后面的有序对 $(i,j)$ 的数量。你需要猜出排列 $P$。\n\n### 实现细节\n\n你无需在程序开头引用头文件 `art.h`，你只需要在代码开头加入以下代码。\n\n```cpp\n#include <vector>\nvoid answer(std::vector<int>);\nint publish(std::vector<int>);\n```\n\n你需要实现一个函数 `void solve(int N)`，这个函数可以调用如下函数：\n\n- `int publish(std::vector<int> R)`\n    - 该函数可以向交互库询问排列 $R$，$R$ 应当是一个值域 $[1,n]$ 的排列。\n    - 该函数至多能被调用 $4000$ 次。\n- `void answer(std::vector<int> R)`\n    - 该函数向交互库提交答案，表示你猜测的排列。\n    - 你必须恰好调用该函数一次。", "inputFormat": "样例交互库从标准输入流读入以下数据：\n\n第一行，一个整数 $n$。\n\n第二行，$n$ 个整数，第 $i$ 个数表示 $P_i$。\n\n如果输入不符格式，则直接判为 `Invalid input!`。", "outputFormat": "样例交互库向标准输入流输出以下数据：\n\n在你每一次调用 `public` 函数后，交互库都会输出一行，表示你的交互内容。\n\n在你调用 `answer` 函数，交互库会输出两行。\n\n第一行，$n$ 个整数，表示你回答的排列。\n\n第二行会输出交互库的判决。若回答正确会返回 `Correct: x published ranking(s).`，其中 $x$ 是你的交互次数。否则返回 `Wrong answer!`。", "hint": "### 样例交互\n\n考虑排列 $P$ 是 $\\{1,3,2\\}$。\n\n样例中进行的交互如下：\n\n|         调用         | 返回值 |               解释               |\n| :------------------: | :----: | :------------------------------: |\n| `publish({1, 2, 3})` |   1    |       合法有序对为 $(3,2)$       |\n| `publish({2, 3, 1})` |   3    | 合法有序对为 $(1,3),(1,2),(3,2)$ |\n| `answer({1, 3, 2})`  |        |        回答与正确答案相符        |\n\n### 数据范围与提示\n\n- 子任务 $1$ ($5$ 分)：$N \\leq 6$\n- 子任务 $2$ ($15$ 分)：$N \\leq 40$\n- 子任务 $3$ ($15$ 分)：$N \\leq 250$\n- 子任务 $4$ ($15$ 分)：$N \\leq 444$\n- 子任务 $5$ ($20$ 分)：$N \\leq 2000$\n- 子任务 $6$ ($30$ 分)：没有特殊限制\n\n对于所有数据，满足 $2\\leq N \\leq 4000$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2022] Art Collection (Day1)", "background": "", "description": "有一个值域 $[1,n]$ 的未知排列 $P$。你每次可以询问一个排列 $R$。交互库会返回满足在排列 $P$ 中 $i$ 出现在 $j$ 前面，在排列 $R$ 中 $i$ 出现在 $j$ 后面的有序对 $(i,j)$ 的数量。你需要猜出排列 $P$。\n\n### 实现细节\n\n你无需在程序开头引用头文件 `art.h`，你只需要在代码开头加入以下代码。\n\n```cpp\n#include <vector>\nvoid answer(std::vector<int>);\nint publish(std::vector<int>);\n```\n\n你需要实现一个函数 `void solve(int N)`，这个函数可以调用如下函数：\n\n- `int publish(std::vector<int> R)`\n    - 该函数可以向交互库询问排列 $R$，$R$ 应当是一个值域 $[1,n]$ 的排列。\n    - 该函数至多能被调用 $4000$ 次。\n- `void answer(std::vector<int> R)`\n    - 该函数向交互库提交答案，表示你猜测的排列。\n    - 你必须恰好调用该函数一次。", "inputFormat": "样例交互库从标准输入流读入以下数据：\n\n第一行，一个整数 $n$。\n\n第二行，$n$ 个整数，第 $i$ 个数表示 $P_i$。\n\n如果输入不符格式，则直接判为 `Invalid input!`。", "outputFormat": "样例交互库向标准输入流输出以下数据：\n\n在你每一次调用 `public` 函数后，交互库都会输出一行，表示你的交互内容。\n\n在你调用 `answer` 函数，交互库会输出两行。\n\n第一行，$n$ 个整数，表示你回答的排列。\n\n第二行会输出交互库的判决。若回答正确会返回 `Correct: x published ranking(s).`，其中 $x$ 是你的交互次数。否则返回 `Wrong answer!`。", "hint": "### 样例交互\n\n考虑排列 $P$ 是 $\\{1,3,2\\}$。\n\n样例中进行的交互如下：\n\n|         调用         | 返回值 |               解释               |\n| :------------------: | :----: | :------------------------------: |\n| `publish({1, 2, 3})` |   1    |       合法有序对为 $(3,2)$       |\n| `publish({2, 3, 1})` |   3    | 合法有序对为 $(1,3),(1,2),(3,2)$ |\n| `answer({1, 3, 2})`  |        |        回答与正确答案相符        |\n\n### 数据范围与提示\n\n- 子任务 $1$ ($5$ 分)：$N \\leq 6$\n- 子任务 $2$ ($15$ 分)：$N \\leq 40$\n- 子任务 $3$ ($15$ 分)：$N \\leq 250$\n- 子任务 $4$ ($15$ 分)：$N \\leq 444$\n- 子任务 $5$ ($20$ 分)：$N \\leq 2000$\n- 子任务 $6$ ($30$ 分)：没有特殊限制\n\n对于所有数据，满足 $2\\leq N \\leq 4000$", "locale": "zh-CN"}}}
{"pid": "P10643", "type": "P", "difficulty": 5, "samples": [["3 3\n1 2\n1 3\n2 3\n", "PSP\n"], ["5 6\n1 2\n1 3\n1 5\n2 4\n3 5\n4 5\n", "SPPSP\n"], ["6 9\n1 4\n1 5\n1 6\n2 4\n2 5\n2 6\n3 4\n3 5\n3 6\n", "PPPSSS\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "Special Judge", "随机调整", "构造", "NordicOI（北欧）"], "title": "[NordicOI 2022] 嬉皮爵士 Hipster Jazz", "background": "译自 Nordic Olympiad in Informatics 2022  [Hipster Jazz](https://noi22.kattis.com/contests/noi22/problems/hipsterjazz)。如果发现 SPJ 锅了请联系搬题人 qvq。\n\n$\\texttt{1s,1G}$。\n", "description": "爵士学校里，新班级诞生了。这个班级里有 $N$ 名学生，其中有 $M$ 对朋友关系。每个学生要选择一种主修乐器：钢琴，或者萨克斯。当然，所有的学生都希望成为有创意的爵士音乐家，所以他们想要保证，至少有一半朋友主修的乐器和自己主修的乐器不一样。\n\n学生们发现，选择乐器是一件很困难的事情。于是他们找来了你，希望你能够为每个同学选择一个主修乐器，满足上述条件。\n\n数据保证至少存在一种方案。", "inputFormat": "第一行，两个正整数 $N,M$，含义见题面。\n\n接下来 $M$ 行，每行两个数 $a,b$，表示 $a,b$ 是朋友。\n\n保证同一对朋友不会被列出两次。保证至少存在一种方案。", "outputFormat": "输出一行含 $N$ 个字符的字符串。第 $i$ 个字符为 `P`，代表第 $i$ 名学生选择钢琴；第 $i$ 个字符为 `S`，代表第 $i$ 名学生选择萨克斯。", "hint": "#### 数据范围\n\n- $1\\le N\\le 200$；\n- $0\\le M\\le \\dfrac{N(N-1)}{2}$；\n- 同一对朋友不会被列出两次；\n- 至少存在一种方案。\n\n#### 子任务\n\n| 子任务编号 | 得分 | 限制 |\n| :--: | :--: | :--: |\n| $1$ | $10$ |  每对学生都是朋友 |\n| $2$ | $15$ | $N\\le 15$ |\n| $3$ | $25$ | 存在一种方案，其中任意一对朋友主修的乐器都不同 |\n| $4$ | $50$ | 无额外限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2022] 嬉皮爵士 Hipster Jazz", "background": "译自 Nordic Olympiad in Informatics 2022  [Hipster Jazz](https://noi22.kattis.com/contests/noi22/problems/hipsterjazz)。如果发现 SPJ 锅了请联系搬题人 qvq。\n\n$\\texttt{1s,1G}$。\n", "description": "爵士学校里，新班级诞生了。这个班级里有 $N$ 名学生，其中有 $M$ 对朋友关系。每个学生要选择一种主修乐器：钢琴，或者萨克斯。当然，所有的学生都希望成为有创意的爵士音乐家，所以他们想要保证，至少有一半朋友主修的乐器和自己主修的乐器不一样。\n\n学生们发现，选择乐器是一件很困难的事情。于是他们找来了你，希望你能够为每个同学选择一个主修乐器，满足上述条件。\n\n数据保证至少存在一种方案。", "inputFormat": "第一行，两个正整数 $N,M$，含义见题面。\n\n接下来 $M$ 行，每行两个数 $a,b$，表示 $a,b$ 是朋友。\n\n保证同一对朋友不会被列出两次。保证至少存在一种方案。", "outputFormat": "输出一行含 $N$ 个字符的字符串。第 $i$ 个字符为 `P`，代表第 $i$ 名学生选择钢琴；第 $i$ 个字符为 `S`，代表第 $i$ 名学生选择萨克斯。", "hint": "#### 数据范围\n\n- $1\\le N\\le 200$；\n- $0\\le M\\le \\dfrac{N(N-1)}{2}$；\n- 同一对朋友不会被列出两次；\n- 至少存在一种方案。\n\n#### 子任务\n\n| 子任务编号 | 得分 | 限制 |\n| :--: | :--: | :--: |\n| $1$ | $10$ |  每对学生都是朋友 |\n| $2$ | $15$ | $N\\le 15$ |\n| $3$ | $25$ | 存在一种方案，其中任意一对朋友主修的乐器都不同 |\n| $4$ | $50$ | 无额外限制 |", "locale": "zh-CN"}}}
{"pid": "P10644", "type": "P", "difficulty": 7, "samples": [["2 3\n3 4 1\n6 7 2\n", "1 2 6\n5 3 4\n"], ["3 4\n0 0 0 0\n0 0 0 0\n0 0 0 0\n", "0 0 0 0\n0 0 0 0\n0 0 0 0\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "Special Judge", "NordicOI（北欧）"], "title": "[NordicOI 2022] 能源网格 Power Grid", "background": "译自 Nordic Olympiad in Informatics 2022  [Power Grid](https://noi22.kattis.com/contests/noi22/problems/powergrid)。如果发现 SPJ 锅了请联系搬题人 qvq。\n\n$\\texttt{5s,1G}$。**请不要滥用本题评测。**\n", "description": "有一座城市，由 $N$ 行 $M$ 列共 $N\\times M$ 个方格组成。方格 $(i,j)$ 的电力消耗记为 $A_{i,j}$。这里，$A_{i,j}$ 可以为正数，负数或者 $0$。\n\n对于方格 $(i,j)$，定义\n\n$$C_{i, j} = \\left|\n    \\sum _{k=1}^ N A_{k, j} - \\sum _{k=1}^ M A_{i, k} \\right| $$\n\n即，一行的总用电量与一列的总用电量的差值的绝对值。\n\n给定所有的 $C_{i,j}$，你能否构造出一组合法的 $A_{i,j}$？\n\n数据保证至少存在一组解。", "inputFormat": "第一行，两个正整数 $N,M$，含义见题面。\n\n接下来 $N$ 行，第 $i$ 行第 $j$ 个数为 $C_{i,j}$，含义见题面。\n\n保证至少存在一组解。", "outputFormat": "输出 $N$ 行 $M$ 列，第 $i$ 行第 $j$ 个数为 $A_{i,j}$。\n\n多解时，任意输出一组解均可。\n\n你需要保证 $-2^{31}\\le A_{i,j}\\lt 2^{31}$。", "hint": "#### 数据范围\n\n- $1\\le N,M\\le 1\\, 000$；\n- $0\\le C_{i,j}\\le 1\\, 000$；\n- 保证至少存在一组解。\n\n#### 子任务\n\n| 子任务编号 | 得分 | 限制 |\n| :--: | :--: | :--: |\n| $1$ | $8$ |  $N,M,C_{i,j}\\le 3$ |\n| $2$ | $5$ | $N,M,C_{i,j}\\le 6$ |\n| $3$ | $11$ | $N=1$ |\n| $4$ | $6$ | $N,M\\ge 2$，$C_{i,j}$ 全相同 |\n| $5$ | $15$ | $N,M\\ge 2$，$C_{i,j}$ 两两不同 |\n| $6$ | $5$ | $C_{i,j}\\le 1$ |\n| $7$ | $15$ | $N=M$ |\n| $8$ | $25$ | $N,M,C_{i,j}\\le 100$ |\n| $9$ | $10$ | 无额外限制 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2022] 能源网格 Power Grid", "background": "译自 Nordic Olympiad in Informatics 2022  [Power Grid](https://noi22.kattis.com/contests/noi22/problems/powergrid)。如果发现 SPJ 锅了请联系搬题人 qvq。\n\n$\\texttt{5s,1G}$。**请不要滥用本题评测。**\n", "description": "有一座城市，由 $N$ 行 $M$ 列共 $N\\times M$ 个方格组成。方格 $(i,j)$ 的电力消耗记为 $A_{i,j}$。这里，$A_{i,j}$ 可以为正数，负数或者 $0$。\n\n对于方格 $(i,j)$，定义\n\n$$C_{i, j} = \\left|\n    \\sum _{k=1}^ N A_{k, j} - \\sum _{k=1}^ M A_{i, k} \\right| $$\n\n即，一行的总用电量与一列的总用电量的差值的绝对值。\n\n给定所有的 $C_{i,j}$，你能否构造出一组合法的 $A_{i,j}$？\n\n数据保证至少存在一组解。", "inputFormat": "第一行，两个正整数 $N,M$，含义见题面。\n\n接下来 $N$ 行，第 $i$ 行第 $j$ 个数为 $C_{i,j}$，含义见题面。\n\n保证至少存在一组解。", "outputFormat": "输出 $N$ 行 $M$ 列，第 $i$ 行第 $j$ 个数为 $A_{i,j}$。\n\n多解时，任意输出一组解均可。\n\n你需要保证 $-2^{31}\\le A_{i,j}\\lt 2^{31}$。", "hint": "#### 数据范围\n\n- $1\\le N,M\\le 1\\, 000$；\n- $0\\le C_{i,j}\\le 1\\, 000$；\n- 保证至少存在一组解。\n\n#### 子任务\n\n| 子任务编号 | 得分 | 限制 |\n| :--: | :--: | :--: |\n| $1$ | $8$ |  $N,M,C_{i,j}\\le 3$ |\n| $2$ | $5$ | $N,M,C_{i,j}\\le 6$ |\n| $3$ | $11$ | $N=1$ |\n| $4$ | $6$ | $N,M\\ge 2$，$C_{i,j}$ 全相同 |\n| $5$ | $15$ | $N,M\\ge 2$，$C_{i,j}$ 两两不同 |\n| $6$ | $5$ | $C_{i,j}\\le 1$ |\n| $7$ | $15$ | $N=M$ |\n| $8$ | $25$ | $N,M,C_{i,j}\\le 100$ |\n| $9$ | $10$ | 无额外限制 |\n", "locale": "zh-CN"}}}
{"pid": "P10645", "type": "P", "difficulty": 7, "samples": [["3 3\n\n6 1\n\n4 1\n\n1 2", "\n? 5\n\n? 15\n\n? 11\n\n! 11 10 12"], ["3 1\n\n2 1\n\n1 2\n\n2 1\n\n45 1", "\n? 1\n\n? 2\n\n? 3\n\n? 47\n\n! 1 3 92"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "Special Judge", "NordicOI（北欧）"], "title": "[NordicOI 2022] 夸克显微镜 Quark Microscopy", "background": "译自 Nordic Olympiad in Informatics 2022  [Quark Microscopy](https://noi22.kattis.com/contests/noi22/problems/quarkmicroscopy)。如果发现交互库锅了请联系搬题人 qvq。\n\n$\\texttt{1s,1G}$。\n", "description": "这下可惨了！Niels 珍爱的原子被宇宙射线击中，分裂成了许多夸克。Niels 迫切地想要找到这些夸克，然后将它们拼起来。所以，他找来了你来帮忙。\n\n这 $N$ 个夸克分布在一条 $1$ 米（$10^{18}$ 阿米）长的线段上。幸运的是，你有一个很精确，但有点奇怪的夸克显微镜，它能够检测并测量邻近的夸克。然而由于量子效应，它无法直接告诉你离测量位置最近的夸克的位置，而是会告诉你离测量位置第二近的夸克的位置，以及离测量位置第二近的夸克的数量。\n\n更为准确地说，你可以在线段上的位置 $x$ 处进行测量。对于每次测量，每个夸克距 $x$ 的距离将会被测出并升序排序，记为 $d_1,d_2,\\cdots,d_N$。你会得到 $d_2$，和满足 $d_i=d_2$ 的 $i$ 的数量（只会是 $1$ 或 $2$）。在进行足够多次测量后，你需要回答每个夸克所在的位置。\n\n每个夸克的位置都是介于 $[1,10^{18}]$ 间的正整数（单位：阿米），从线段的起始位置开始计算。由于 Pauli 不相容原理，夸克的位置不会重合。", "inputFormat": "\n你的程序与交互库通过标准输入输出流交互。\n\n第一行，两个正整数 $N,T$，表示夸克的数量和子任务编号。\n\n接下来，你的程序开始与交互库交互：\n\n- `? x`：询问离 $x$ 第二远的夸克。交互库会返回两个整数 $r,m$，其中 $r$ 是第二远夸克的距离，$m$ 是距离 $x$ 为 $r$ 的夸克的数量（只会是 $1$ 或 $2$）。你需要保证 $-10^{18}\\le x\\le 2\\times 10^{18}$。\n\n- `!` $a_1$ $a_2$ $\\cdots$ $a_N$：回答夸克的位置。你可以以任意顺序给出这些夸克的位置。回答后，不应有多余的询问。你需要保证 $1\\le a_i\\le 10^{18}$。\n\n**注意：在交互过程中，你需要在输出后刷新缓存区。**\n下面是一些常见语言的刷新缓存区方式：\n\n- C++：`fflush(stdout)` 或 `cout.flush()`。特别地，利用 `std::endl` 换行也会刷新缓冲区。\n- C：`fflush(stdout)`。\n", "outputFormat": "见【输出格式】。", "hint": "#### 数据范围\n\n- $3\\le N\\le 100$；\n- $1\\le T\\le 3$。\n\n\n#### 评分方式\n\n| 子任务编号 | 得分 | 限制 |\n| :--: | :--: | :--: |\n| $1$ | $40\\cdot r$ |  存在一个在位置 $1$ 上的夸克 |\n| $2$ | $40\\cdot r$ | 夸克的位置均为偶数 |\n| $3$ | $20\\cdot r$ | 无额外限制 |\n\n其中 $r$ 为一个常数。记某个子任务中你查询的最大次数为 $Q$，则 $r$ 的值见以下表格：\n\n| $Q$ 的限制 | $r=$ |\n| :--: | :--: |\n| $Q\\gt 15\\, 000$ | $0$ |\n| $15\\, 000\\ge Q\\gt 5\\, 600$ | $0.4$ |\n| $5\\, 600\\ge Q\\gt 3\\, 500$ | $0.6$ |\n| $3\\, 500\\ge Q\\gt 2\\, 400$ | $0.8$ |\n| $Q\\le 2\\, 400$ | $1.0$ |\n\n为了方便选手测试，我们提供了 `testing_tools.py`，可在附件下载，使用说明见文件头。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2022] 夸克显微镜 Quark Microscopy", "background": "译自 Nordic Olympiad in Informatics 2022  [Quark Microscopy](https://noi22.kattis.com/contests/noi22/problems/quarkmicroscopy)。如果发现交互库锅了请联系搬题人 qvq。\n\n$\\texttt{1s,1G}$。\n", "description": "这下可惨了！Niels 珍爱的原子被宇宙射线击中，分裂成了许多夸克。Niels 迫切地想要找到这些夸克，然后将它们拼起来。所以，他找来了你来帮忙。\n\n这 $N$ 个夸克分布在一条 $1$ 米（$10^{18}$ 阿米）长的线段上。幸运的是，你有一个很精确，但有点奇怪的夸克显微镜，它能够检测并测量邻近的夸克。然而由于量子效应，它无法直接告诉你离测量位置最近的夸克的位置，而是会告诉你离测量位置第二近的夸克的位置，以及离测量位置第二近的夸克的数量。\n\n更为准确地说，你可以在线段上的位置 $x$ 处进行测量。对于每次测量，每个夸克距 $x$ 的距离将会被测出并升序排序，记为 $d_1,d_2,\\cdots,d_N$。你会得到 $d_2$，和满足 $d_i=d_2$ 的 $i$ 的数量（只会是 $1$ 或 $2$）。在进行足够多次测量后，你需要回答每个夸克所在的位置。\n\n每个夸克的位置都是介于 $[1,10^{18}]$ 间的正整数（单位：阿米），从线段的起始位置开始计算。由于 Pauli 不相容原理，夸克的位置不会重合。", "inputFormat": "\n你的程序与交互库通过标准输入输出流交互。\n\n第一行，两个正整数 $N,T$，表示夸克的数量和子任务编号。\n\n接下来，你的程序开始与交互库交互：\n\n- `? x`：询问离 $x$ 第二远的夸克。交互库会返回两个整数 $r,m$，其中 $r$ 是第二远夸克的距离，$m$ 是距离 $x$ 为 $r$ 的夸克的数量（只会是 $1$ 或 $2$）。你需要保证 $-10^{18}\\le x\\le 2\\times 10^{18}$。\n\n- `!` $a_1$ $a_2$ $\\cdots$ $a_N$：回答夸克的位置。你可以以任意顺序给出这些夸克的位置。回答后，不应有多余的询问。你需要保证 $1\\le a_i\\le 10^{18}$。\n\n**注意：在交互过程中，你需要在输出后刷新缓存区。**\n下面是一些常见语言的刷新缓存区方式：\n\n- C++：`fflush(stdout)` 或 `cout.flush()`。特别地，利用 `std::endl` 换行也会刷新缓冲区。\n- C：`fflush(stdout)`。\n", "outputFormat": "见【输出格式】。", "hint": "#### 数据范围\n\n- $3\\le N\\le 100$；\n- $1\\le T\\le 3$。\n\n\n#### 评分方式\n\n| 子任务编号 | 得分 | 限制 |\n| :--: | :--: | :--: |\n| $1$ | $40\\cdot r$ |  存在一个在位置 $1$ 上的夸克 |\n| $2$ | $40\\cdot r$ | 夸克的位置均为偶数 |\n| $3$ | $20\\cdot r$ | 无额外限制 |\n\n其中 $r$ 为一个常数。记某个子任务中你查询的最大次数为 $Q$，则 $r$ 的值见以下表格：\n\n| $Q$ 的限制 | $r=$ |\n| :--: | :--: |\n| $Q\\gt 15\\, 000$ | $0$ |\n| $15\\, 000\\ge Q\\gt 5\\, 600$ | $0.4$ |\n| $5\\, 600\\ge Q\\gt 3\\, 500$ | $0.6$ |\n| $3\\, 500\\ge Q\\gt 2\\, 400$ | $0.8$ |\n| $Q\\le 2\\, 400$ | $1.0$ |\n\n为了方便选手测试，我们提供了 `testing_tools.py`，可在附件下载，使用说明见文件头。\n", "locale": "zh-CN"}}}
{"pid": "P10646", "type": "P", "difficulty": 6, "samples": [["13 2\nullen dullen doff kikke lane koff koffe lane bikke bane ullen dullen doff\n3\n1 ullen dullen\n2 ullen dullen\n3 ullen dullen", "doff \ndoff kikke \ndoff kikke lane "], ["8 1\nbuffalo buffalo buffalo buffalo buffalo buffalo buffalo buffalo\n1\n7 buffalo", "buffalo buffalo buffalo buffalo buffalo buffalo buffalo "], ["16 1\nhave you not heard about the bird the bird bird bird the bird is the word\n8\n1 have\n1 you\n1 not\n1 heard\n1 about\n1 the\n1 bird\n1 is", "you \nnot \nheard \nabout \nthe \nbird \nbird \nthe "]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "Special Judge", "NordicOI（北欧）"], "title": "[NordicOI 2023] ChatNOI", "background": "翻译自 [NordicOI 2023 A 题](https://noi23.kattis.com/contests/noi23/problems/chatnoi) ChatNOI。", "description": "你正在和你的机器人玩一个对话游戏，规则是这样的：\n\n首先给定一个包含了 $n$ 个字符串的仅含小写字符串组 $w$ 和一个数字 $k$。\n\n定义一个字符串组的质量为其每个长度为 $k+1$ 的连续段的在 $w$ 中出现的次数的最小值。\n\n有 $q$ 次询问，每次给定 $m_i$ 与 $k$ 个字符串。\n\n你需要构造 $m_i$ 个字符串，使得在给出的 $k$ 个字符串后依次加入构造的 $m_i$ 个字符串形成的字符串组质量最大。\n\n若有多解，只需输出任意一个。", "inputFormat": "第一行一个整数 $n(1 \\leq n \\leq 5 \\times 10^5)$ 和 $k (1 \\leq k < n)$。\n\n第二行一句包含 $n$ 个单词的句子 $w_i( 1\\leq|w_i|\n\\leq10)$。\n\n第三行一个整数 $q(1 \\leq q \\leq 5 \\times 10^5)$，表示一共有 $q$ 次询问。\n\n然后 $q$ 行，每行一个数 $m_i$ 和长度为 $k$ 的 $s$ 的子字符串。", "outputFormat": "你需要对于每个询问，输出 $k$ 之后的 $m_i$ 个单词。", "hint": "**本题采用捆绑测试**。\n\n令 $M = \\sum m_i$。\n\n- Subtask 1（5 points）：$k < n \\leq 100$，$k = 1$，$1 \\leq q \\leq 100$，$m_i = 1$。\n- Subtask 2（7 points）：$k < n \\leq 5 \\times 10^5$，$1 \\leq k \\leq 10$，$1 \\leq q \\leq 10^5$，$m_i = 1$。\n- Subtask 3（17 points）：$k < n \\leq 6$，$1 \\leq k \\leq 10$，$1 \\leq q \\leq 10$，$1 \\leq m_i \\leq 6$。\n- Subtask 4（18 points）：$k < n \\leq 5000$，$1 \\leq k \\leq10$，$1 \\leq q \\leq 5000$，$q \\leq M \\leq 5000$。\n- Subtask 5（24 points）：$k < n \\leq 5 \\times 10^5$，$1 \\leq k \\leq 10$，$1 \\leq q \\leq 10$，$q \\leq M \\leq 5 \\times 10^5$。\n- Subtask 6（16 points）：$k < n \\leq 10^5$，$1 \\leq k \\leq10$，$1 \\leq q \\leq 10^5$，$q \\leq M \\leq 5 \\times 10^5$。\n- Subtask 7（13 points）：无特殊限制。\n\n对于所有测试数据，$k < n \\leq 5 \\times 10^5$，$1 \\leq k \\leq 10$，$1 \\leq q \\leq 10^5$，$q \\leq M \\leq 5 \\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2023] ChatNOI", "background": "翻译自 [NordicOI 2023 A 题](https://noi23.kattis.com/contests/noi23/problems/chatnoi) ChatNOI。", "description": "你正在和你的机器人玩一个对话游戏，规则是这样的：\n\n首先给定一个包含了 $n$ 个字符串的仅含小写字符串组 $w$ 和一个数字 $k$。\n\n定义一个字符串组的质量为其每个长度为 $k+1$ 的连续段的在 $w$ 中出现的次数的最小值。\n\n有 $q$ 次询问，每次给定 $m_i$ 与 $k$ 个字符串。\n\n你需要构造 $m_i$ 个字符串，使得在给出的 $k$ 个字符串后依次加入构造的 $m_i$ 个字符串形成的字符串组质量最大。\n\n若有多解，只需输出任意一个。", "inputFormat": "第一行一个整数 $n(1 \\leq n \\leq 5 \\times 10^5)$ 和 $k (1 \\leq k < n)$。\n\n第二行一句包含 $n$ 个单词的句子 $w_i( 1\\leq|w_i|\n\\leq10)$。\n\n第三行一个整数 $q(1 \\leq q \\leq 5 \\times 10^5)$，表示一共有 $q$ 次询问。\n\n然后 $q$ 行，每行一个数 $m_i$ 和长度为 $k$ 的 $s$ 的子字符串。", "outputFormat": "你需要对于每个询问，输出 $k$ 之后的 $m_i$ 个单词。", "hint": "**本题采用捆绑测试**。\n\n令 $M = \\sum m_i$。\n\n- Subtask 1（5 points）：$k < n \\leq 100$，$k = 1$，$1 \\leq q \\leq 100$，$m_i = 1$。\n- Subtask 2（7 points）：$k < n \\leq 5 \\times 10^5$，$1 \\leq k \\leq 10$，$1 \\leq q \\leq 10^5$，$m_i = 1$。\n- Subtask 3（17 points）：$k < n \\leq 6$，$1 \\leq k \\leq 10$，$1 \\leq q \\leq 10$，$1 \\leq m_i \\leq 6$。\n- Subtask 4（18 points）：$k < n \\leq 5000$，$1 \\leq k \\leq10$，$1 \\leq q \\leq 5000$，$q \\leq M \\leq 5000$。\n- Subtask 5（24 points）：$k < n \\leq 5 \\times 10^5$，$1 \\leq k \\leq 10$，$1 \\leq q \\leq 10$，$q \\leq M \\leq 5 \\times 10^5$。\n- Subtask 6（16 points）：$k < n \\leq 10^5$，$1 \\leq k \\leq10$，$1 \\leq q \\leq 10^5$，$q \\leq M \\leq 5 \\times 10^5$。\n- Subtask 7（13 points）：无特殊限制。\n\n对于所有测试数据，$k < n \\leq 5 \\times 10^5$，$1 \\leq k \\leq 10$，$1 \\leq q \\leq 10^5$，$q \\leq M \\leq 5 \\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10647", "type": "P", "difficulty": 5, "samples": [["8 3 1\n2\n3\n3\n1\n2\n1\n1\n3", "6"], ["8 3 2\n2\n3\n3\n1\n2\n1\n1\n3", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "堆", "2023", "NordicOI（北欧）"], "title": "[NordicOI 2023] Ice Cream Machines", "background": "翻译自 [NordicOI 2023 B 题](https://noi23.kattis.com/contests/noi23/problems/icecreammachines) Ice Cream Machines。", "description": "在你的冰淇淋店里有 $n$ 个顾客在排队，店里一共有 $m$ 种口味，每个人都有想买的口味，但是很不幸，店内只有 $k$ 台机子，无法完全供应所有的口味，所以，如果下一个人要的和这台机子内原有的口味不同时，他需要清洗这台机子并更换成他喜欢的口味。\n\n现在这 $n$ 个人按照从 $1 \\sim n$ 的顺序买冰淇淋，你作为一个聪明绝顶的店主需要合理安排他们使用哪台机子，使得清洗机子的次数最少，输出这个最少次数。\n\n注意一台机子如果之前没人用的时候默认需要被清洗（自始至终没人用则不需要）。", "inputFormat": "第一行三个整数 $n (1 \\leq n \\leq 2 \\times 10^5)$，$m (1 \\leq m \\leq 2 \\times 10^5)$ 和 $k (1 \\leq k \\leq 2 \\times 10^5)$，分别表示一共有 $n$ 个人，店里有 $m$ 种口味的冰淇淋和 $k$ 台机子。\n\n然后 $n$ 行，每行一个整数 $c_i (1 \\leq c_i \\leq m)$，表示第 $i$ 个人喜欢吃的口味编号。", "outputFormat": "输出清洗次数最少时所需的次数。", "hint": "**本题采用捆绑测试**。\n\n- Subtask 1（7 points）：$n \\le 1000$，$m \\leq 10$，$k = 1$。\n- Subtask 2（12 points）：$n \\le 1000$，$m \\leq 10$，$k \\leq 2$。\n- Subtask 3（22 points）：$n \\leq 1000$，$m \\leq 10$，$k \\leq 5$。\n- Subtask 4（11 points）：$n \\leq 1000$，$m \\leq 200$，$k \\leq 100$。\n- Subtask 5（14 points）：$n \\leq 2 \\times 10^5$，$m \\leq 500$，$k \\leq 100$。\n- Subtask 6（13 points）：$n \\leq 2 \\times 10^5$，$m \\leq 2 \\times 10^5$，$k \\leq 100$。\n- Subtask 7（21 points）：无特殊限制。\n\n对于所有测试数据，$1 \\le n \\le 2\\times 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$1 \\leq k \\leq 2 \\times 10^5$，$1 \\leq c_i \\leq m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2023] Ice Cream Machines", "background": "翻译自 [NordicOI 2023 B 题](https://noi23.kattis.com/contests/noi23/problems/icecreammachines) Ice Cream Machines。", "description": "在你的冰淇淋店里有 $n$ 个顾客在排队，店里一共有 $m$ 种口味，每个人都有想买的口味，但是很不幸，店内只有 $k$ 台机子，无法完全供应所有的口味，所以，如果下一个人要的和这台机子内原有的口味不同时，他需要清洗这台机子并更换成他喜欢的口味。\n\n现在这 $n$ 个人按照从 $1 \\sim n$ 的顺序买冰淇淋，你作为一个聪明绝顶的店主需要合理安排他们使用哪台机子，使得清洗机子的次数最少，输出这个最少次数。\n\n注意一台机子如果之前没人用的时候默认需要被清洗（自始至终没人用则不需要）。", "inputFormat": "第一行三个整数 $n (1 \\leq n \\leq 2 \\times 10^5)$，$m (1 \\leq m \\leq 2 \\times 10^5)$ 和 $k (1 \\leq k \\leq 2 \\times 10^5)$，分别表示一共有 $n$ 个人，店里有 $m$ 种口味的冰淇淋和 $k$ 台机子。\n\n然后 $n$ 行，每行一个整数 $c_i (1 \\leq c_i \\leq m)$，表示第 $i$ 个人喜欢吃的口味编号。", "outputFormat": "输出清洗次数最少时所需的次数。", "hint": "**本题采用捆绑测试**。\n\n- Subtask 1（7 points）：$n \\le 1000$，$m \\leq 10$，$k = 1$。\n- Subtask 2（12 points）：$n \\le 1000$，$m \\leq 10$，$k \\leq 2$。\n- Subtask 3（22 points）：$n \\leq 1000$，$m \\leq 10$，$k \\leq 5$。\n- Subtask 4（11 points）：$n \\leq 1000$，$m \\leq 200$，$k \\leq 100$。\n- Subtask 5（14 points）：$n \\leq 2 \\times 10^5$，$m \\leq 500$，$k \\leq 100$。\n- Subtask 6（13 points）：$n \\leq 2 \\times 10^5$，$m \\leq 2 \\times 10^5$，$k \\leq 100$。\n- Subtask 7（21 points）：无特殊限制。\n\n对于所有测试数据，$1 \\le n \\le 2\\times 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$1 \\leq k \\leq 2 \\times 10^5$，$1 \\leq c_i \\leq m$。", "locale": "zh-CN"}}}
{"pid": "P10648", "type": "P", "difficulty": 4, "samples": [["3 1 2\n1 2\n2 1\n1 3", "REFUSE\nAPPROVE"], ["8 3 7\n1 2\n2 3\n3 4\n1 2\n4 5\n5 6\n7 8\n3 4\n1 3\n2 4", "REFUSE\nAPPROVE\nAPPROVE\nAPPROVE\nREFUSE\nAPPROVE\nAPPROVE"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["并查集", "2023", "NordicOI（北欧）", "启发式合并", "STL"], "title": "[NordicOI 2023] Island Alliances", "background": "翻译自 [NordicOI 2023 C 题](https://noi23.kattis.com/contests/noi23/problems/islandalliances) Island Alliances。", "description": "海面上有 $n$ 个岛屿，其中有 $m$ 对岛屿关系恶劣，但是由于天气恶劣，岛屿肯定不能单独生存，所以有些岛屿提议“联盟”。\n\n现有 $q$ 次联盟请求，每次包含了一对 $(a_i,b_i)$，表示 $a_i$ 想要与 $b_i$ 联盟，但是，考虑到某些岛屿恶劣的关系，所以这个提议不一定成立，如果 $a_i$ 原本所在联盟的岛屿都**不和** $b_i$ 所在的联盟的所有岛屿存在恶劣的关系，则两者可以同意联盟，否则将不同意。\n\n注意此处一但同意了联盟，则两个岛屿所在联盟立即并成一个联盟。", "inputFormat": "第一行三个整数 $n$，$m$ 和 $q$，依次表示有 $n$ 个岛屿，$m$ 对关系恶劣的岛屿和 $q$ 次提议。\n\n接下来 $m$ 行，每行一对整数 $(u_i,v_i)$，表示 $u_i$ 座岛屿和 $v_i$ 座岛屿关系恶劣。\n\n然后 $q$ 行，每行两个整数 $a_i$ 和 $b_i\\ (a_i \\neq b_i)$，表示 $a_i$ 座岛屿想与 $b_i$ 座岛屿联盟。", "outputFormat": "对于每个提议，如果同意则输出 `APPROVE`，否则输出 `REFUSE`。", "hint": "**本题采用捆绑测试**。\n\n- Subtask 1（15 points）：$2 \\leq n \\leq 500$，$1 \\leq m \\leq 10^5$，$1 \\leq q \\leq 10^5$。\n- Subtask 2（17 points）：$2 \\leq n \\leq 10^5$，$1 \\leq m \\leq 250$，$1 \\leq q \\leq 10^5$。\n- Subtask 3（20 points）：$2 \\leq n \\leq 5000$，$1 \\leq m \\leq 5000$，$1 \\leq q \\leq 10^5$。\n- Subtask 4（23 points）：保证不同意提议的情况最多只有一次。\n- Subtask 5（25 points）：无特殊限制。\n\n对于所有测试数据，$2 \\le n \\le 10^5$，$1 \\le m,q \\le 10^5$，$1 \\le a_i,b_i \\le n$，且每对 $(a_i,b_i)$ 互不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NordicOI 2023] Island Alliances", "background": "翻译自 [NordicOI 2023 C 题](https://noi23.kattis.com/contests/noi23/problems/islandalliances) Island Alliances。", "description": "海面上有 $n$ 个岛屿，其中有 $m$ 对岛屿关系恶劣，但是由于天气恶劣，岛屿肯定不能单独生存，所以有些岛屿提议“联盟”。\n\n现有 $q$ 次联盟请求，每次包含了一对 $(a_i,b_i)$，表示 $a_i$ 想要与 $b_i$ 联盟，但是，考虑到某些岛屿恶劣的关系，所以这个提议不一定成立，如果 $a_i$ 原本所在联盟的岛屿都**不和** $b_i$ 所在的联盟的所有岛屿存在恶劣的关系，则两者可以同意联盟，否则将不同意。\n\n注意此处一但同意了联盟，则两个岛屿所在联盟立即并成一个联盟。", "inputFormat": "第一行三个整数 $n$，$m$ 和 $q$，依次表示有 $n$ 个岛屿，$m$ 对关系恶劣的岛屿和 $q$ 次提议。\n\n接下来 $m$ 行，每行一对整数 $(u_i,v_i)$，表示 $u_i$ 座岛屿和 $v_i$ 座岛屿关系恶劣。\n\n然后 $q$ 行，每行两个整数 $a_i$ 和 $b_i\\ (a_i \\neq b_i)$，表示 $a_i$ 座岛屿想与 $b_i$ 座岛屿联盟。", "outputFormat": "对于每个提议，如果同意则输出 `APPROVE`，否则输出 `REFUSE`。", "hint": "**本题采用捆绑测试**。\n\n- Subtask 1（15 points）：$2 \\leq n \\leq 500$，$1 \\leq m \\leq 10^5$，$1 \\leq q \\leq 10^5$。\n- Subtask 2（17 points）：$2 \\leq n \\leq 10^5$，$1 \\leq m \\leq 250$，$1 \\leq q \\leq 10^5$。\n- Subtask 3（20 points）：$2 \\leq n \\leq 5000$，$1 \\leq m \\leq 5000$，$1 \\leq q \\leq 10^5$。\n- Subtask 4（23 points）：保证不同意提议的情况最多只有一次。\n- Subtask 5（25 points）：无特殊限制。\n\n对于所有测试数据，$2 \\le n \\le 10^5$，$1 \\le m,q \\le 10^5$，$1 \\le a_i,b_i \\le n$，且每对 $(a_i,b_i)$ 互不相同。", "locale": "zh-CN"}}}
{"pid": "P10649", "type": "P", "difficulty": 4, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "交互题", "Special Judge", "O2优化", "ROI（俄罗斯）"], "title": "[ROI 2017] 四轴飞行器编程 (Day 1)", "background": "### 题面\n\n系统中隐藏了一个只含 `(` 和 `)` 的**合法括号字符串** $S$。\n\n你每次可以向系统询问一个 $S$ 的子区间 $S[l,r]$，系统会返回这个子区间是否是一个合法括号字符串。\n\n请编写一个程序，与系统进行交互，并最终输出 $S$ 的具体信息。\n\n关于合法括号字符串的定义：\n\n- 空串是合法括号字符串。\n\n- 设 $\\text{A}$ 是合法括号字符串，那么 $\\text{(A)}$ 也是合法括号字符串。\n\n- 设 $\\text{A}$ 和 $\\text{B}$ 是合法括号字符串，那么 $\\text{AB}$ 也是合法括号字符串。\n\n### 交互过程\n\n~~你可以编写一个函数 `getProgram()` 并在程序开始包含 `grader.h` 来完成交互过程。该函数无返回值，也没有参数。~~  \n请直接编写一个完整程序来完成交互。\n\n你需要先从标准输出流中获得一个整数 $n$，表示系统字符串的长度。\n\n你可以向标准输出中输出询问和回答，形式如下：\n\n- 对于询问一段子串是否合法，你需要先输出一个字符 `?`，后跟两个整数 $l,r$，表示选择 $S[l,r]$，字符，整数之间用一个空格隔开。如果 $S[l,r]$ 为合法括号字符串，交互库会向标准输出中输出 $\\texttt{Yes}$，否则会输出 $\\texttt{No}$；\n\n- 对于回答整个程序，你需要先输出一个字符 `!`，后跟一个长度为 $n$ 的合法括号字符串。`!` 与序列之间用一个空格隔开。\n\n在回答之后，你应该结束程序。保证四轴飞行器程序在交互过程中不会改变。\n\n交互过程中，你的询问数不能超过一个值 $k$。", "description": "", "inputFormat": "", "outputFormat": "", "hint": "#### 【数据范围】\n\n| 子任务编号 | 分值 | $2 \\le n \\le $ | $k=$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $21$ | $16$ | $150$ |\n| $2$ | $28$ | $100$ | $10^4$ |\n| $3$ | $26$ | $10^3$ | $10^4$ |\n| $4$ | $25$ | $5 \\times 10^4$ | $10^5$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2017] 四轴飞行器编程 (Day 1)", "background": "### 题面\n\n系统中隐藏了一个只含 `(` 和 `)` 的**合法括号字符串** $S$。\n\n你每次可以向系统询问一个 $S$ 的子区间 $S[l,r]$，系统会返回这个子区间是否是一个合法括号字符串。\n\n请编写一个程序，与系统进行交互，并最终输出 $S$ 的具体信息。\n\n关于合法括号字符串的定义：\n\n- 空串是合法括号字符串。\n\n- 设 $\\text{A}$ 是合法括号字符串，那么 $\\text{(A)}$ 也是合法括号字符串。\n\n- 设 $\\text{A}$ 和 $\\text{B}$ 是合法括号字符串，那么 $\\text{AB}$ 也是合法括号字符串。\n\n### 交互过程\n\n~~你可以编写一个函数 `getProgram()` 并在程序开始包含 `grader.h` 来完成交互过程。该函数无返回值，也没有参数。~~  \n请直接编写一个完整程序来完成交互。\n\n你需要先从标准输出流中获得一个整数 $n$，表示系统字符串的长度。\n\n你可以向标准输出中输出询问和回答，形式如下：\n\n- 对于询问一段子串是否合法，你需要先输出一个字符 `?`，后跟两个整数 $l,r$，表示选择 $S[l,r]$，字符，整数之间用一个空格隔开。如果 $S[l,r]$ 为合法括号字符串，交互库会向标准输出中输出 $\\texttt{Yes}$，否则会输出 $\\texttt{No}$；\n\n- 对于回答整个程序，你需要先输出一个字符 `!`，后跟一个长度为 $n$ 的合法括号字符串。`!` 与序列之间用一个空格隔开。\n\n在回答之后，你应该结束程序。保证四轴飞行器程序在交互过程中不会改变。\n\n交互过程中，你的询问数不能超过一个值 $k$。", "description": "", "inputFormat": "", "outputFormat": "", "hint": "#### 【数据范围】\n\n| 子任务编号 | 分值 | $2 \\le n \\le $ | $k=$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $21$ | $16$ | $150$ |\n| $2$ | $28$ | $100$ | $10^4$ |\n| $3$ | $26$ | $10^3$ | $10^4$ |\n| $4$ | $25$ | $5 \\times 10^4$ | $10^5$ |\n", "locale": "zh-CN"}}}
{"pid": "P10650", "type": "P", "difficulty": 4, "samples": [["3\n0 1 4\n3\n2 7\n3 3\n1 4", "0\n2\n-1\n4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2017", "O2优化", "位运算", "ROI（俄罗斯）"], "title": "[ROI 2017] 排序幻觉 (Day 1)", "background": "", "description": "给定长度为 $n$ 的整数数列 $a$，如果一个整数 $b$ 满足：\n\n$$\n(a_1 \\operatorname{xor} b) \\le (a_2 \\operatorname{xor} b) \\le \\dots \\le (a_n \\operatorname{xor} b)\n$$\n\n则称 $b$ 是 $a$ 数列的**幻数**。\n\n接下来有 $q$ 次修改，每次修改一个数 $a_{u_i}$ 为整数 $k_i$，每次修改都会对后面的询问产生影响。你需要求出第一次修改前以及每次修改后这个数列的最小的幻数是多少，特别的，如果不存在幻数请输出 $-1$。", "inputFormat": "第一行一个整数 $n$ 表示数列长度。\n\n第二行 $n$ 个整数表示整数数列 $a$。\n\n第三行一个整数 $q$ 表示询问次数。\n\n接下来 $q$ 行每行两个整数 $u_i,k_i$，表示将 $a_{u_i}$ 修改为 $k_i$。", "outputFormat": "共 $(q+1)$ 行，每行一个整数表示当前数列最小的幻数，如果没有幻数请输出 $-1$。", "hint": "#### 【数据范围】\n\n| 子任务编号 | 分值 | $1 \\le n \\le$ | $1 \\le q \\le $ | $0 \\le a_i,k_i \\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $30$ | $500$ | $500$ | $2^9$ |\n| $2$ | $29$ | $10^3$ | $10^3$ | $2^{30}$ |\n| $3$ | $21$ | $10^5$ | $10^5$ | $2^{30}$ |\n| $4$ | $30$ | $10^6$ | $10^6$ | $2^{30}$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2017] 排序幻觉 (Day 1)", "background": "", "description": "给定长度为 $n$ 的整数数列 $a$，如果一个整数 $b$ 满足：\n\n$$\n(a_1 \\operatorname{xor} b) \\le (a_2 \\operatorname{xor} b) \\le \\dots \\le (a_n \\operatorname{xor} b)\n$$\n\n则称 $b$ 是 $a$ 数列的**幻数**。\n\n接下来有 $q$ 次修改，每次修改一个数 $a_{u_i}$ 为整数 $k_i$，每次修改都会对后面的询问产生影响。你需要求出第一次修改前以及每次修改后这个数列的最小的幻数是多少，特别的，如果不存在幻数请输出 $-1$。", "inputFormat": "第一行一个整数 $n$ 表示数列长度。\n\n第二行 $n$ 个整数表示整数数列 $a$。\n\n第三行一个整数 $q$ 表示询问次数。\n\n接下来 $q$ 行每行两个整数 $u_i,k_i$，表示将 $a_{u_i}$ 修改为 $k_i$。", "outputFormat": "共 $(q+1)$ 行，每行一个整数表示当前数列最小的幻数，如果没有幻数请输出 $-1$。", "hint": "#### 【数据范围】\n\n| 子任务编号 | 分值 | $1 \\le n \\le$ | $1 \\le q \\le $ | $0 \\le a_i,k_i \\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $30$ | $500$ | $500$ | $2^9$ |\n| $2$ | $29$ | $10^3$ | $10^3$ | $2^{30}$ |\n| $3$ | $21$ | $10^5$ | $10^5$ | $2^{30}$ |\n| $4$ | $30$ | $10^6$ | $10^6$ | $2^{30}$ |\n", "locale": "zh-CN"}}}
{"pid": "P10652", "type": "P", "difficulty": 6, "samples": [["2 1\n1 1 3 2", "3 9"], ["5 2\n4 1 3 2 3 3 5 5 10 4\n3 4 2 2 1 3 4 1", "9 35"], ["5 2\n3 1 1 2 2 3 3 4\n3 2 2 3 3 4 4 5", "10 82"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2017", "O2优化", "斜率优化", "最短路", "ROI（俄罗斯）"], "title": "[ROI 2017] 前往大都会 (Day 1)", "background": null, "description": "ROI 国有 $n$ 个城市，以及 $m$ 条铁路，每条铁路都是**单向**运行的，第 $i$ 条铁路依次经过 $v_{i,1},v_{i,2},\\dots,v_{i,l_i+1}$ 号城市并停靠，其中 $v_{i,j} \\to v_{i,j+1}$ 的铁路长度是 $t_{i,j}$。\n\n如果多条铁路经过 $u$ 号城市，那么你可以在 $u$ 号城市换乘其他铁路。（每条铁路都可以在停靠点任意上车/下车）\n\n你需要找到一条从 $1$ 号城市到 $n$ 号城市的路径，这条路径需要满足其总长度最小，并且在此条件上路径上相邻两个**换乘点**间**火车上**距离的平方和最大。\n\n注：起点和终点都是换乘点，题目保证有解。", "inputFormat": "第一行两个整数 $n,m$ 表示有 $n$ 个城市，$m$ 条铁路。\n\n接下来 $m$ 行，每行先是一个整数 $l_i$ 表示铁路长度，接下来 $2l_i+1$ 个整数形如 $v_{i,1},t_{i,1},v_{i,2},\\dots,v_{i,l_i},t_{i,l_i},v_{i,l_i+1}$，含义如题所示。保证其中不包含重复的城市。", "outputFormat": "一行两个整数，第一个数表示最短路径长度，第二个数表示平方和最大值。", "hint": "#### 【样例解释】\n\n对于样例组 #2：\n\n从 $1$ 号城市乘坐 $1$ 号线直达 $5$ 号城市并非最佳方案（无法达到最短时间）。最佳方案：\n\n>从 $1$ 号城市乘坐 $1$ 号线到 $2$ 号城市；\n>\n> 换乘 $2$ 号线，坐到 $3$ 号城市；\n>\n> 再换乘 $1$ 号线，坐到 $5$ 号城市。\n\n此时，平方和为 $3^2 + 1^2 + 5^2 = 35$。\n\n对于样例组 #3：\n\n无论是在中途哪一站转 $2$ 号线，结果都一样。平方和为 $1^2+9^2=82$。\n\n#### 【数据范围】\n\n注：本题只放部分数据，完整数据请左转 [LOJ P2769](https://loj.ac/p/2769) 评测。\n\n对于所有数据：$1 \\le m \\le 10^6$，$1 \\le v_{i,j} \\le n$，$1 \\le t_{i,j} \\le 1000$，设 $sum=\\sum l_i$。\n\n| 子任务编号 | 分值 | $1 \\le n \\le $ | $1 \\le sum \\le $ |特殊性质|\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $10$ | $20$ |$l_i=1$|\n| $2$ | $10$ | $10^3$ | $10^3$ |$l_i=1$|\n| $3$ | $17$ | $10^3$ | $10^3$ |无|\n| $4$ | $17$ | $10^3$ | $10^5$ |无|\n| $5$ | $19$ | $10^4$ | $2 \\times 10^5$ |无|\n| $6$ | $19$ | $2 \\times 10^5$ | $2 \\times 10^5$ |无|\n| $7$ | $8$ | $10^6$ | $10^6$ |无|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2017] 前往大都会 (Day 1)", "background": null, "description": "ROI 国有 $n$ 个城市，以及 $m$ 条铁路，每条铁路都是**单向**运行的，第 $i$ 条铁路依次经过 $v_{i,1},v_{i,2},\\dots,v_{i,l_i+1}$ 号城市并停靠，其中 $v_{i,j} \\to v_{i,j+1}$ 的铁路长度是 $t_{i,j}$。\n\n如果多条铁路经过 $u$ 号城市，那么你可以在 $u$ 号城市换乘其他铁路。（每条铁路都可以在停靠点任意上车/下车）\n\n你需要找到一条从 $1$ 号城市到 $n$ 号城市的路径，这条路径需要满足其总长度最小，并且在此条件上路径上相邻两个**换乘点**间**火车上**距离的平方和最大。\n\n注：起点和终点都是换乘点，题目保证有解。", "inputFormat": "第一行两个整数 $n,m$ 表示有 $n$ 个城市，$m$ 条铁路。\n\n接下来 $m$ 行，每行先是一个整数 $l_i$ 表示铁路长度，接下来 $2l_i+1$ 个整数形如 $v_{i,1},t_{i,1},v_{i,2},\\dots,v_{i,l_i},t_{i,l_i},v_{i,l_i+1}$，含义如题所示。保证其中不包含重复的城市。", "outputFormat": "一行两个整数，第一个数表示最短路径长度，第二个数表示平方和最大值。", "hint": "#### 【样例解释】\n\n对于样例组 #2：\n\n从 $1$ 号城市乘坐 $1$ 号线直达 $5$ 号城市并非最佳方案（无法达到最短时间）。最佳方案：\n\n>从 $1$ 号城市乘坐 $1$ 号线到 $2$ 号城市；\n>\n> 换乘 $2$ 号线，坐到 $3$ 号城市；\n>\n> 再换乘 $1$ 号线，坐到 $5$ 号城市。\n\n此时，平方和为 $3^2 + 1^2 + 5^2 = 35$。\n\n对于样例组 #3：\n\n无论是在中途哪一站转 $2$ 号线，结果都一样。平方和为 $1^2+9^2=82$。\n\n#### 【数据范围】\n\n注：本题只放部分数据，完整数据请左转 [LOJ P2769](https://loj.ac/p/2769) 评测。\n\n对于所有数据：$1 \\le m \\le 10^6$，$1 \\le v_{i,j} \\le n$，$1 \\le t_{i,j} \\le 1000$，设 $sum=\\sum l_i$。\n\n| 子任务编号 | 分值 | $1 \\le n \\le $ | $1 \\le sum \\le $ |特殊性质|\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $10$ | $20$ |$l_i=1$|\n| $2$ | $10$ | $10^3$ | $10^3$ |$l_i=1$|\n| $3$ | $17$ | $10^3$ | $10^3$ |无|\n| $4$ | $17$ | $10^3$ | $10^5$ |无|\n| $5$ | $19$ | $10^4$ | $2 \\times 10^5$ |无|\n| $6$ | $19$ | $2 \\times 10^5$ | $2 \\times 10^5$ |无|\n| $7$ | $8$ | $10^6$ | $10^6$ |无|", "locale": "zh-CN"}}}
{"pid": "P10653", "type": "P", "difficulty": 5, "samples": [["3\n++- +++\n++-- ++++\n++-+--+- ++++++++", "Yes\nNo\nYes"], ["3\n++-+-- ++----\n++-+-- +++---\n-++- -++-", "Yes\nNo\nYes"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "O2优化", "ROI（俄罗斯）"], "title": "[ROI 2017] 存储器 (Day 2)", "background": "", "description": "给定一个字符串 $S$，设其长度为 $n$，每个字符要么是 `+` 要么是 `-`。\n\n定义一个**片段**为 $S$ 的一个子串 $S[l,r]$ 满足下面三个条件：\n\n- $l=1$ 或者 $S_{l-1} \\ne S_l$。\n- $r=n$ 或者 $S_{r+1} \\ne S_r$。\n- $S_l=S_{l+1}=\\dots=S_{r-1}=S_r$。\n\n定义一次**变换**为：\n\n- 选择 $S$ 的两个**相邻**且**长度不同**的片段，改变长度较小的那个片段的所有字符为其相反字符。（`+` 变为 `-`，`-` 变为 `+`）\n\n现在有 $q$ 次询问，每次询问给出只包含 `+` 和 `-` 并且长度相同的字符串 $S_i,T_i$，请你判断 $S_i$ 是否能够通过若干次变换得到 $T_i$。", "inputFormat": "第一行一个整数 $q$ 表示询问次数。\n\n接下来 $q$ 行每行两个字符串 $S_i,T_i$，含义如题所示。", "outputFormat": "对于每次询问输出一行一个字符串 `Yes` 或 `No` 表示是否可以完成题目所给要求。", "hint": "#### 【数据范围】\n\n注：本题只放部分数据，完整数据请左转 [LOJ P2770](https://loj.ac/p/2770) 评测。\n\n设 $len=\\sum |S_i|$。\n\n| 子任务编号 | 分值 | $1 \\le len \\le $ | 特殊性质 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $20$ | $16$ | $T_i$ 中没有 `-` |\n| $2$ | $30$ | $10^3$ | $T_i$ 中没有 `-` |\n| $3$ | $20$ | $10^6$ | $T_i$ 中没有 `-` |\n| $4$ | $20$ | $10^3$ | 无 |\n| $5$ | $10$ | $10^6$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2017] 存储器 (Day 2)", "background": "", "description": "给定一个字符串 $S$，设其长度为 $n$，每个字符要么是 `+` 要么是 `-`。\n\n定义一个**片段**为 $S$ 的一个子串 $S[l,r]$ 满足下面三个条件：\n\n- $l=1$ 或者 $S_{l-1} \\ne S_l$。\n- $r=n$ 或者 $S_{r+1} \\ne S_r$。\n- $S_l=S_{l+1}=\\dots=S_{r-1}=S_r$。\n\n定义一次**变换**为：\n\n- 选择 $S$ 的两个**相邻**且**长度不同**的片段，改变长度较小的那个片段的所有字符为其相反字符。（`+` 变为 `-`，`-` 变为 `+`）\n\n现在有 $q$ 次询问，每次询问给出只包含 `+` 和 `-` 并且长度相同的字符串 $S_i,T_i$，请你判断 $S_i$ 是否能够通过若干次变换得到 $T_i$。", "inputFormat": "第一行一个整数 $q$ 表示询问次数。\n\n接下来 $q$ 行每行两个字符串 $S_i,T_i$，含义如题所示。", "outputFormat": "对于每次询问输出一行一个字符串 `Yes` 或 `No` 表示是否可以完成题目所给要求。", "hint": "#### 【数据范围】\n\n注：本题只放部分数据，完整数据请左转 [LOJ P2770](https://loj.ac/p/2770) 评测。\n\n设 $len=\\sum |S_i|$。\n\n| 子任务编号 | 分值 | $1 \\le len \\le $ | 特殊性质 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $20$ | $16$ | $T_i$ 中没有 `-` |\n| $2$ | $30$ | $10^3$ | $T_i$ 中没有 `-` |\n| $3$ | $20$ | $10^6$ | $T_i$ 中没有 `-` |\n| $4$ | $20$ | $10^3$ | 无 |\n| $5$ | $10$ | $10^6$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P10654", "type": "P", "difficulty": 4, "samples": [["1\n10", "0"], ["2\n3 5\n6 8", "3\n1"], ["3\n1 2 4\n7 10\n3 5", "-1\n5\n5"], ["4\n1 0 3 2\n4 6\n5 5\n7 10", "5\n5\n4\n-1"]], "limits": {"time": [700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "O2优化", "ROI（俄罗斯）"], "title": "[ROI 2017] 水星上的服务器 (Day 2)", "background": "", "description": "水星上有 $n$ 个服务器，有 $n-1$ 根数据线，第 $i$ 根双向连接 $i$ 号服务器和 $i+1$ 号服务器。\n\n假设 $j$ 号服务器收到了地球发来的信息。你需要尽快将信息传输到其他服务器。\n\n一台服务器 $i$ 收到地球发来的信息后可以直接存储一份到它的数据库中，然后在缓冲区滞留 $t_i$ 秒后删除。\n\n由于一些外界因素，第 $i$ 根数据线只能在 $[l_i,r_i]$ 时间段内传输信息。当某根数据线接通后，若这根数据线两边的服务器有一台的缓冲区还存有信息，那么另一台也可以得到这个信息。（每个服务器会在其接收到信息后能传递的**第一时间**把信息传递出去）\n\n你可以任意选择地球发给服务器 $j$ 信息的时刻，要求最后所有服务器都收到这个信息，问最早可以在多久发送信息，如果不存在可行解，请输出 $-1$。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $t_1,t_2,\\dots,t_n$。\n\n在接下来的 $n-1$ 行中，每行两个整数 $l_i,r_i$。", "outputFormat": "输入 $n$ 行，每行一个整数，第 $i$ 行的数表示当 $j=i$ 时的答案，如果不可能输出 $-1$。", "hint": "#### 【样例解释】\n\n对于样例组 #3：\n\n如果 $1$ 号服务器首先收到补丁，$3$ 号服务器就无法得到补丁，因为 $2$ 号信道在 $1$ 号信道开启前就关闭了。如果 $2$ 号服务器在第 $5$ 秒收到补丁，则 $3$ 号服务器可以立即收到补丁，之后，等到第 $7$ 秒时 $1$ 号信道开启时，$1$ 号服务器就会收到补丁。如果 $3$ 号服务器在第 $5$ 秒收到补丁，则 $2$ 号服务器可以立即收到补丁，之后，等到第 $7$ 秒时 $1$ 号信道开启时，$1$ 号服务器就会收到补丁。\n\n对于样例组 #4：\n\n若 $2$ 号服务器首先收到补丁，由于 $2$ 号服务器从不缓存，且 $2$ 号信道只在第 $5$ 秒开启，为了让 $3$ 号服务器拿到补丁，你只能选择在第 $5$ 秒把补丁发给 $2$ 号服务器。若 $3$ 号服务器首先收到补丁，不妨选择第 $4$ 秒，$3$ 号服务器会将其缓存至第 $7$ 秒，这样 $2$ 号和 $4$ 号服务器都能拿到补丁。\n\n#### 【数据范围】\n\n注：本题只放部分数据，完整数据请左转 [LOJ P2771](https://loj.ac/p/2771) 评测。\n\n对于所有数据，$0 \\le l_i \\le r_i \\le 10^9$。\n\n| 子任务编号 | 分值 | $1 \\le n \\le $ | $0 \\le t_i \\le$ | $0 \\le r_i \\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $500$ | $500$ | $500$ | 无 |\n| $2$ | $10$ | $5000$ | / | $5000$ | $t_i=5000$ |\n| $3$ | $10$ | $5000$ | $5000$ | / | $r_i=5000$ |\n| $4$ | $10$ | $5000$ | $5000$ | $5000$ | 无 |\n| $5$ | $15$ | $2 \\times 10^5$ | / | $10^9$ | $t_i=10^9$ |\n| $6$ | $15$ | $2 \\times 10^5$ | $10^9$ | / | $r_i=10^9$ |\n| $7$ | $20$ | $2 \\times 10^5$ | $10^9$ | $10^9$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2017] 水星上的服务器 (Day 2)", "background": "", "description": "水星上有 $n$ 个服务器，有 $n-1$ 根数据线，第 $i$ 根双向连接 $i$ 号服务器和 $i+1$ 号服务器。\n\n假设 $j$ 号服务器收到了地球发来的信息。你需要尽快将信息传输到其他服务器。\n\n一台服务器 $i$ 收到地球发来的信息后可以直接存储一份到它的数据库中，然后在缓冲区滞留 $t_i$ 秒后删除。\n\n由于一些外界因素，第 $i$ 根数据线只能在 $[l_i,r_i]$ 时间段内传输信息。当某根数据线接通后，若这根数据线两边的服务器有一台的缓冲区还存有信息，那么另一台也可以得到这个信息。（每个服务器会在其接收到信息后能传递的**第一时间**把信息传递出去）\n\n你可以任意选择地球发给服务器 $j$ 信息的时刻，要求最后所有服务器都收到这个信息，问最早可以在多久发送信息，如果不存在可行解，请输出 $-1$。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $t_1,t_2,\\dots,t_n$。\n\n在接下来的 $n-1$ 行中，每行两个整数 $l_i,r_i$。", "outputFormat": "输入 $n$ 行，每行一个整数，第 $i$ 行的数表示当 $j=i$ 时的答案，如果不可能输出 $-1$。", "hint": "#### 【样例解释】\n\n对于样例组 #3：\n\n如果 $1$ 号服务器首先收到补丁，$3$ 号服务器就无法得到补丁，因为 $2$ 号信道在 $1$ 号信道开启前就关闭了。如果 $2$ 号服务器在第 $5$ 秒收到补丁，则 $3$ 号服务器可以立即收到补丁，之后，等到第 $7$ 秒时 $1$ 号信道开启时，$1$ 号服务器就会收到补丁。如果 $3$ 号服务器在第 $5$ 秒收到补丁，则 $2$ 号服务器可以立即收到补丁，之后，等到第 $7$ 秒时 $1$ 号信道开启时，$1$ 号服务器就会收到补丁。\n\n对于样例组 #4：\n\n若 $2$ 号服务器首先收到补丁，由于 $2$ 号服务器从不缓存，且 $2$ 号信道只在第 $5$ 秒开启，为了让 $3$ 号服务器拿到补丁，你只能选择在第 $5$ 秒把补丁发给 $2$ 号服务器。若 $3$ 号服务器首先收到补丁，不妨选择第 $4$ 秒，$3$ 号服务器会将其缓存至第 $7$ 秒，这样 $2$ 号和 $4$ 号服务器都能拿到补丁。\n\n#### 【数据范围】\n\n注：本题只放部分数据，完整数据请左转 [LOJ P2771](https://loj.ac/p/2771) 评测。\n\n对于所有数据，$0 \\le l_i \\le r_i \\le 10^9$。\n\n| 子任务编号 | 分值 | $1 \\le n \\le $ | $0 \\le t_i \\le$ | $0 \\le r_i \\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $500$ | $500$ | $500$ | 无 |\n| $2$ | $10$ | $5000$ | / | $5000$ | $t_i=5000$ |\n| $3$ | $10$ | $5000$ | $5000$ | / | $r_i=5000$ |\n| $4$ | $10$ | $5000$ | $5000$ | $5000$ | 无 |\n| $5$ | $15$ | $2 \\times 10^5$ | / | $10^9$ | $t_i=10^9$ |\n| $6$ | $15$ | $2 \\times 10^5$ | $10^9$ | / | $r_i=10^9$ |\n| $7$ | $20$ | $2 \\times 10^5$ | $10^9$ | $10^9$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P10655", "type": "P", "difficulty": 4, "samples": [["1 17\n4 6 10", "11999999970"], ["2 11\n2 2 100\n3 5 5", "9999999890"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2017", "O2优化", "ROI（俄罗斯）"], "title": "[ROI 2017] 反物质 (Day 2)", "background": "", "description": "你研发出了 $n$ 种获得反物质的实验，你无法控制生成的数量，但是可以保证第 $i$ 种获得的反物质在区间 $[l_i,r_i]$ 内，并且成本为 $c_i$，每种实验可以使用多次。\n\n生成的反物质均会放在一个容器中，每次实验结束后，你可以得知容器中反物质的质量。容器中的反物质不能超过 $a$ 克（超过了就会爆炸）。\n\n如果第 $i$ **次**实验一共获得了 $t_i$ 单位的反物质，你可以将其卖给军方获得 $(10^9t_i-c)$ 卢布的利润，其中 $c$ 是该实验的成本。\n\n在保证安全的前提下，你想要知道你最坏情况下利润至少是多少。", "inputFormat": "第一行有两个整数 $n,a$。\n\n接下来的 $n$ 行中，每行三个整数 $l_i,r_i,c_i$。", "outputFormat": "输出一行，一个整数，表示你最多可以保证获得多少利润。", "hint": "#### 【样例解释】\n\n对于样例组 #1：\n\n我们只能使用实验 $1$，如果实验一次，得到的反物质区间在 $[4,6]$ 内；实验两次，区间在 $[8,12]$，如果此时得到了 $12$ 单位的反物质就不能继续做实验了，因为如果下一次得到 $6$ 单位的话，容器就会爆炸；其他情况我们可以继续做第三次实验，可能的区间是 $[12,17]$。\n\n这个时候无论如何都不能继续做实验了，原因同上，所以最坏情况下我们只能得到 $12$ 单位的反物质并且需要做三次实验，此时收益为 $3 \\times (10^9 \\times 4-10)=11999999970$。\n\n#### 【数据范围】\n\n本题仅放了部分数据，如需评测完整数据请左转 [LOJ P2772](https://loj.ac/p/2772)。\n\n对于所有数据，$1 \\le c_i \\le 100$，$1 \\le l_i \\le r_i \\le a$。\n\n| 子任务编号 | 分值 | $1 \\le n \\le$ | $1 \\le a \\le$ | 特殊限制 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $1$ | $10^3$ | 无 |\n| $2$ | $10$ | $10$ | $10^3$ | $l_i=r_i$ |\n| $3$ | $20$ | $10$ | $10^3$ | 无 |\n| $4$ | $20$ | $100$ | $5 \\times 10^4$ | 无 |\n| $5$ | $40$ | $100$ | $2 \\times 10^6$ | 无 |\n\n注：原题有 $15$ 个子任务，方便起见，最后若干组除 $a$ 数据范围外相同的子任务合并为 $1$ 组子任务。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2017] 反物质 (Day 2)", "background": "", "description": "你研发出了 $n$ 种获得反物质的实验，你无法控制生成的数量，但是可以保证第 $i$ 种获得的反物质在区间 $[l_i,r_i]$ 内，并且成本为 $c_i$，每种实验可以使用多次。\n\n生成的反物质均会放在一个容器中，每次实验结束后，你可以得知容器中反物质的质量。容器中的反物质不能超过 $a$ 克（超过了就会爆炸）。\n\n如果第 $i$ **次**实验一共获得了 $t_i$ 单位的反物质，你可以将其卖给军方获得 $(10^9t_i-c)$ 卢布的利润，其中 $c$ 是该实验的成本。\n\n在保证安全的前提下，你想要知道你最坏情况下利润至少是多少。", "inputFormat": "第一行有两个整数 $n,a$。\n\n接下来的 $n$ 行中，每行三个整数 $l_i,r_i,c_i$。", "outputFormat": "输出一行，一个整数，表示你最多可以保证获得多少利润。", "hint": "#### 【样例解释】\n\n对于样例组 #1：\n\n我们只能使用实验 $1$，如果实验一次，得到的反物质区间在 $[4,6]$ 内；实验两次，区间在 $[8,12]$，如果此时得到了 $12$ 单位的反物质就不能继续做实验了，因为如果下一次得到 $6$ 单位的话，容器就会爆炸；其他情况我们可以继续做第三次实验，可能的区间是 $[12,17]$。\n\n这个时候无论如何都不能继续做实验了，原因同上，所以最坏情况下我们只能得到 $12$ 单位的反物质并且需要做三次实验，此时收益为 $3 \\times (10^9 \\times 4-10)=11999999970$。\n\n#### 【数据范围】\n\n本题仅放了部分数据，如需评测完整数据请左转 [LOJ P2772](https://loj.ac/p/2772)。\n\n对于所有数据，$1 \\le c_i \\le 100$，$1 \\le l_i \\le r_i \\le a$。\n\n| 子任务编号 | 分值 | $1 \\le n \\le$ | $1 \\le a \\le$ | 特殊限制 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $1$ | $10^3$ | 无 |\n| $2$ | $10$ | $10$ | $10^3$ | $l_i=r_i$ |\n| $3$ | $20$ | $10$ | $10^3$ | 无 |\n| $4$ | $20$ | $100$ | $5 \\times 10^4$ | 无 |\n| $5$ | $40$ | $100$ | $2 \\times 10^6$ | 无 |\n\n注：原题有 $15$ 个子任务，方便起见，最后若干组除 $a$ 数据范围外相同的子任务合并为 $1$ 组子任务。", "locale": "zh-CN"}}}
{"pid": "P10656", "type": "P", "difficulty": 7, "samples": [["7 5\n3 1 4 8 6 9 2\n2 7 4 10 1 5 3\n9 2 11 3 8\n3 5 3 4 12", "39\n2 6\n2 4"], ["2 3\n1 2\n1 4\n2 3 1\n17 2 15", "34\n0 0\n1 3"], ["3 3\n4 2 1\n10 1 2\n5 4 2\n1 2 9", "19\n1 1\n3 3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "2017", "线段树", "Special Judge", "O2优化", "ROI（俄罗斯）"], "title": "[ROI 2017] 学习轨迹 (Day 2)", "background": "", "description": "THU 和 PKU 同时开设了一批课程，THU 有 $n$ 节课，PKU 有 $m$ 节课。\n\n其中 THU 第 $i$ 节课类别是 $a_i$，乐趣度是 $x_i$；PKU 第 $i$ 节课类别是 $b_i$，乐趣度是 $y_i$。保证 $a$ 中元素互不相同，$b$ 中元素互不相同，但是 $a$ 和 $b$ 之间可能有相同元素。\n\n你可以选择听 THU 的 $l_1 \\sim r_1$ 节课，收获到的乐趣度为所有你听的课的乐趣度的和；同时可以在 PKU 听 $l_2 \\sim r_2$ 节课，收获到的乐趣度也是所有你听的课的乐趣度的和。（当然你也可以选择只听一所大学的课甚至不听）\n\n同一类别的课你不能听两次，也就是如果 $a_{l_1 \\sim r_1}$ 中有元素与 $b_{l_2 \\sim r_2}$ 相同，那么这个听课方案就不能满足你的胃口。\n\n你需要求出可能的听课方案中乐趣度最大的是多少以及具体的安排。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来四行，每行一个整数序列，分别表示题目中的 $a,x,b,y$，这四个序列长度分别为 $n,n,m,m$。", "outputFormat": "第一行一个整数表示最大乐趣度。\n\n第二行两个整数 $l_1,r_1$，如果你不打算在 THU 听课，输出 `0 0`。\n\n第三行两个整数 $l_2,r_2$，如果你不打算在 PKU 听课，输出 `0 0`。", "hint": "#### 【样例解释】\n\n对于样例组 #1：\n\n最优解如样例所示，课程质量之和为 $(7 + 4 + 10 + 1 + 5) + (5 + 3 + 4) = 27 + 12 = 39$。\n\n对于样例组 #2：\n\n由于 PKU 的 $1$ 号、$2$ 号课程相比 THU 的相同课程的质量要高得多，因此最优解是不去 THU 听课，转而在 PKU 读 $1\\sim 3$ 号课程。\n\n#### 【数据范围】\n\n注：本题只放部分数据，完整数据请左转 [LOJ P2773](https://loj.ac/p/2773) 评测。\n\n对于所有数据满足：$1 \\le a_i,b_i \\le n+m$，$1 \\le x_i,y_i \\le 10^9$，$a_i \\ne a_j(i \\ne j)$，$b_i \\ne b_j(i \\ne j)$。\n\n| 子任务编号 | 分值 | $1 \\le n,m \\le $ |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $50$ |\n| $2$ | $10$ | $100$ |\n| $3$ | $10$ | $300$ |\n| $4$ | $10$ | $500$ |\n| $5$ | $10$ | $2000$ |\n| $6$ | $5$ | $5000$ |\n| $7$ | $5$ | $10^4$ |\n| $8$ | $10$ | $3 \\times 10^4$ |\n| $9$ | $10$ | $10^5$ |\n| $10$ | $10$ | $2.5 \\times 10^5$ |\n| $11$ | $10$ | $5 \\times 10^5$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2017] 学习轨迹 (Day 2)", "background": "", "description": "THU 和 PKU 同时开设了一批课程，THU 有 $n$ 节课，PKU 有 $m$ 节课。\n\n其中 THU 第 $i$ 节课类别是 $a_i$，乐趣度是 $x_i$；PKU 第 $i$ 节课类别是 $b_i$，乐趣度是 $y_i$。保证 $a$ 中元素互不相同，$b$ 中元素互不相同，但是 $a$ 和 $b$ 之间可能有相同元素。\n\n你可以选择听 THU 的 $l_1 \\sim r_1$ 节课，收获到的乐趣度为所有你听的课的乐趣度的和；同时可以在 PKU 听 $l_2 \\sim r_2$ 节课，收获到的乐趣度也是所有你听的课的乐趣度的和。（当然你也可以选择只听一所大学的课甚至不听）\n\n同一类别的课你不能听两次，也就是如果 $a_{l_1 \\sim r_1}$ 中有元素与 $b_{l_2 \\sim r_2}$ 相同，那么这个听课方案就不能满足你的胃口。\n\n你需要求出可能的听课方案中乐趣度最大的是多少以及具体的安排。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来四行，每行一个整数序列，分别表示题目中的 $a,x,b,y$，这四个序列长度分别为 $n,n,m,m$。", "outputFormat": "第一行一个整数表示最大乐趣度。\n\n第二行两个整数 $l_1,r_1$，如果你不打算在 THU 听课，输出 `0 0`。\n\n第三行两个整数 $l_2,r_2$，如果你不打算在 PKU 听课，输出 `0 0`。", "hint": "#### 【样例解释】\n\n对于样例组 #1：\n\n最优解如样例所示，课程质量之和为 $(7 + 4 + 10 + 1 + 5) + (5 + 3 + 4) = 27 + 12 = 39$。\n\n对于样例组 #2：\n\n由于 PKU 的 $1$ 号、$2$ 号课程相比 THU 的相同课程的质量要高得多，因此最优解是不去 THU 听课，转而在 PKU 读 $1\\sim 3$ 号课程。\n\n#### 【数据范围】\n\n注：本题只放部分数据，完整数据请左转 [LOJ P2773](https://loj.ac/p/2773) 评测。\n\n对于所有数据满足：$1 \\le a_i,b_i \\le n+m$，$1 \\le x_i,y_i \\le 10^9$，$a_i \\ne a_j(i \\ne j)$，$b_i \\ne b_j(i \\ne j)$。\n\n| 子任务编号 | 分值 | $1 \\le n,m \\le $ |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $50$ |\n| $2$ | $10$ | $100$ |\n| $3$ | $10$ | $300$ |\n| $4$ | $10$ | $500$ |\n| $5$ | $10$ | $2000$ |\n| $6$ | $5$ | $5000$ |\n| $7$ | $5$ | $10^4$ |\n| $8$ | $10$ | $3 \\times 10^4$ |\n| $9$ | $10$ | $10^5$ |\n| $10$ | $10$ | $2.5 \\times 10^5$ |\n| $11$ | $10$ | $5 \\times 10^5$ |\n", "locale": "zh-CN"}}}
{"pid": "P10657", "type": "P", "difficulty": 6, "samples": [["5 3 4\n1 2\n4 3\n4 5\n2 3\n1 3\n4 5\n2 4", "No\n3\n2\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["并查集", "O2优化", "动态树 LCT"], "title": "BZOJ4998 星球联盟", "background": "", "description": "在遥远的 S 星系中一共有 $n$ 个星球，编号为 $1\\sim n$。其中的一些星球决定组成联盟，以方便相互间的交流。但是，组成联盟的首要条件就是交通条件。\n\n初始时，在这 $n$ 个星球间有 $m$ 条太空隧道。每条太空隧道连接两个星球，使得它们能够相互到达。若两个星球属于同一个联盟，则必须存在一条环形线路经过这两个星球，即两个星球间存在两条没有公共隧道的路径。为了壮大联盟的队伍，这些星球将建设 $p$ 条新的太空隧道。这 $p$ 条新隧道将按顺序依次建成。一条新轨道建成后，可能会使一些星球属于同一个联盟。\n\n你的任务是计算出，在一条新隧道建设完毕后，判断这条新轨道连接的两个星球是否属于同一个联盟，如果属于同一个联盟就计算出这个联盟中有多少个星球。", "inputFormat": "第一行三个整数 $n,m,p$，分别表示总星球数，初始时太空隧道的数目和即将建设的轨道数目。\n\n第 $2\\sim m+1$ 行，每行两个整数，表示初始时的每条太空隧道连接的两个星球编号。\n\n第 $m+2$ 行到第 $m+p+1$ 行，每行两个整数，表示新建的太空隧道连接的两个星球编号。\n\n这些太空隧道按照输入的顺序依次建成。", "outputFormat": "输出共 $p$ 行：\n\n- 如果这条新的太空隧道连接的两个星球属于同一个联盟，就输出一个整数，表示这两个星球所在联盟的星球数。\n- 如果这条新的太空隧道连接的两个星球不属于同一个联盟，就输出 No。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/qo7hp42y.png)\n\n数据保证，$1\\leq n,m,p \\leq 2\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4998 星球联盟", "background": "", "description": "在遥远的 S 星系中一共有 $n$ 个星球，编号为 $1\\sim n$。其中的一些星球决定组成联盟，以方便相互间的交流。但是，组成联盟的首要条件就是交通条件。\n\n初始时，在这 $n$ 个星球间有 $m$ 条太空隧道。每条太空隧道连接两个星球，使得它们能够相互到达。若两个星球属于同一个联盟，则必须存在一条环形线路经过这两个星球，即两个星球间存在两条没有公共隧道的路径。为了壮大联盟的队伍，这些星球将建设 $p$ 条新的太空隧道。这 $p$ 条新隧道将按顺序依次建成。一条新轨道建成后，可能会使一些星球属于同一个联盟。\n\n你的任务是计算出，在一条新隧道建设完毕后，判断这条新轨道连接的两个星球是否属于同一个联盟，如果属于同一个联盟就计算出这个联盟中有多少个星球。", "inputFormat": "第一行三个整数 $n,m,p$，分别表示总星球数，初始时太空隧道的数目和即将建设的轨道数目。\n\n第 $2\\sim m+1$ 行，每行两个整数，表示初始时的每条太空隧道连接的两个星球编号。\n\n第 $m+2$ 行到第 $m+p+1$ 行，每行两个整数，表示新建的太空隧道连接的两个星球编号。\n\n这些太空隧道按照输入的顺序依次建成。", "outputFormat": "输出共 $p$ 行：\n\n- 如果这条新的太空隧道连接的两个星球属于同一个联盟，就输出一个整数，表示这两个星球所在联盟的星球数。\n- 如果这条新的太空隧道连接的两个星球不属于同一个联盟，就输出 No。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/qo7hp42y.png)\n\n数据保证，$1\\leq n,m,p \\leq 2\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10658", "type": "P", "difficulty": 6, "samples": [["9 31\n10 20 30 40 50 60 70 80 90\n3 1 2\n1 1 3\n1 1 2\n1 8 9\n1 2 4\n1 2 5\n1 4 6\n1 4 7\n3 1 8\n3 8 8\n1 8 9\n3 8 8\n3 7 5\n3 7 3\n1 4 1\n3 7 5\n3 7 3\n1 5 7\n3 6 5\n3 3 6\n1 2 4\n1 5 5\n3 3 6\n2 8 180\n3 8 8\n2 9 190\n3 9 9\n2 5 150\n3 3 6\n2 1 210\n3 3 6", "-1\n-1\n80\n170\n180\n170\n190\n170\n250\n280\n280\n270\n370\n380\n580"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "动态树 LCT"], "title": "BZOJ2959 长跑", "background": "某校开展了同学们喜闻乐见的阳光长跑活动。为了能“为祖国健康工作五十年”，同学们纷纷离开寝室，离开教室，离开实验室，到操场参加 $3000$ 米长跑运动。一时间操场上熙熙攘攘，摩肩接踵，盛况空前。", "description": "为了让同学们更好地监督自己，学校推行了刷卡机制。学校中有 $n$ 个地点，用 $1\\sim n$ 的整数表示，每个地点设有若干个刷卡机。\n\n有以下三类事件：\n1. 修建了一条连接 $A$ 地点和 $B$ 地点的跑道；\n2. $A$ 地点的刷卡机台数变为了 $B$；\n3. 进行了一次长跑。问一个同学从 $A$ 地点出发，最后到达 $B$ 地点最多可以刷卡多少次。具体的要求如下：\n   - 当同学到达一个地点时，他可以在这里的每一台刷卡机上都刷卡。但每台刷卡机只能刷卡一次，即使多次到达同一地点也不能多次刷卡。为了安全起见，每条跑道都需要设定一个方向，这条跑道只能按照这个方向单向通行。最多的刷卡次数即为在任意设定跑道方向，按照任意路径从 $A$ 地点到 $B$ 地点能刷卡的最多次数。", "inputFormat": "第一行输入两个正整数 $n,m$；\n\n第二行输入 $n$ 个正整数，第 $i$ 个正整数为第 $i$ 个地点的刷卡机个数。\n\n接下来 $m$ 行，每行包含三个非负整数 $P,A,B$ 代表一个事件，$P$ 为事件类型，$A,B$ 为事件的两个参数。", "outputFormat": "对于每个 $P=3$ 的事件输出一行，包含一个整数，为按照任意路径从 $A$ 地点到 $B$ 地点能刷卡的最多次数。如果不能到达，输出 $-1$。", "hint": "对于所有数据，$1\\leq m\\leq 5n$，$1\\leq n\\leq 1.5\\times 10^5$。\n\n保证最初所有地点之间都没有跑道。\n\n每行相邻的两个数之间均用一个空格隔开。\n\n表示地点编号的数均在 $1$ 到 $n$ 之间，每个地点的刷卡机台数始终不超过 $10^4$，$P \\in \\{1,2,3\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ2959 长跑", "background": "某校开展了同学们喜闻乐见的阳光长跑活动。为了能“为祖国健康工作五十年”，同学们纷纷离开寝室，离开教室，离开实验室，到操场参加 $3000$ 米长跑运动。一时间操场上熙熙攘攘，摩肩接踵，盛况空前。", "description": "为了让同学们更好地监督自己，学校推行了刷卡机制。学校中有 $n$ 个地点，用 $1\\sim n$ 的整数表示，每个地点设有若干个刷卡机。\n\n有以下三类事件：\n1. 修建了一条连接 $A$ 地点和 $B$ 地点的跑道；\n2. $A$ 地点的刷卡机台数变为了 $B$；\n3. 进行了一次长跑。问一个同学从 $A$ 地点出发，最后到达 $B$ 地点最多可以刷卡多少次。具体的要求如下：\n   - 当同学到达一个地点时，他可以在这里的每一台刷卡机上都刷卡。但每台刷卡机只能刷卡一次，即使多次到达同一地点也不能多次刷卡。为了安全起见，每条跑道都需要设定一个方向，这条跑道只能按照这个方向单向通行。最多的刷卡次数即为在任意设定跑道方向，按照任意路径从 $A$ 地点到 $B$ 地点能刷卡的最多次数。", "inputFormat": "第一行输入两个正整数 $n,m$；\n\n第二行输入 $n$ 个正整数，第 $i$ 个正整数为第 $i$ 个地点的刷卡机个数。\n\n接下来 $m$ 行，每行包含三个非负整数 $P,A,B$ 代表一个事件，$P$ 为事件类型，$A,B$ 为事件的两个参数。", "outputFormat": "对于每个 $P=3$ 的事件输出一行，包含一个整数，为按照任意路径从 $A$ 地点到 $B$ 地点能刷卡的最多次数。如果不能到达，输出 $-1$。", "hint": "对于所有数据，$1\\leq m\\leq 5n$，$1\\leq n\\leq 1.5\\times 10^5$。\n\n保证最初所有地点之间都没有跑道。\n\n每行相邻的两个数之间均用一个空格隔开。\n\n表示地点编号的数均在 $1$ 到 $n$ 之间，每个地点的刷卡机台数始终不超过 $10^4$，$P \\in \\{1,2,3\\}$。", "locale": "zh-CN"}}}
{"pid": "P10659", "type": "P", "difficulty": 6, "samples": [["5 8 1\n1 2\n2 3\n3 4\n4 5\nSum 2 4\nIncrease 3 5 3\nMinor 1 4\nSum 4 5\nInvert 1 3\nMajor 1 2\nIncrease 1 5 2\nSum 1 5", "0\n0\n6\n3\n19"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["平衡树", "O2优化", "树链剖分", "动态树 LCT"], "title": "BZOJ3159 决战", "background": "", "description": "Katharon 国有 $n$ 个城市，编号为 $1\\sim n$。出于勤俭节约，不铺张浪费的考虑，城市间只连有 $n-1$ 条道路，使得可以从一个城市出发沿着道路走到另一座城市。\n\n现在 X 国的飞船降落在了某个城市，并把它改造成了自己的据点。X 国占领其他国家的一贯做法是，在据点里造一堆工厂生产战斗机器人，然后沿着被侵略国的道路运送到其他城市。X 国的司令向来不走回头路，而且崇尚团结与绝对的公平，因此运送战斗机器人时，会先选择一个终点，再在从据点到终点的路径上选择一个起点，然后把机器人均匀分配到起点到终点路径上的每个城市。同时，为了重新分配机器人，X 国的司令还会下令，按照与运送机器人相同的方法选择起点和终点，然后翻转这条路径上城市的机器人的数量。比如，选定的路径上的城市的机器人数依次为 $1,2,3,4,5$，翻转之后就变成了 $5,4,3,2,1$。\n\nKanari 国王手中的圆盘上浮现出了 Katharon 国的地图。不仅如此,上面还标出了 X 国据点在 $r$ 号城市，并显示出了 X 国司令刚刚下达的指令。“太好了！”国王欢呼，“我们能第一时间掌握敌人的布局，就一定能击退 X 国的侵略者！”\n\n但是还有一个问题没有解决。圆盘上只显示了指令，却没有标出每个城市的机器人数量，这让国王很是头疼。于是他找到了你，想让你帮忙设计一个程序来回答国王的询问。国王只关心某两个点之间路径上的城市的机器人和、最大值以及最小值，以便确定兵力部署、攻击要点和敌方的薄弱点。\n\nX 国司令的指令和 Kanari 国王的询问如下：\n\n1. `Increase x y w` 运送一批机器人到从 $x$ 到 $y$ 的路径上的城市，并分配给每个城市 $w$ 个机器人；\n2. `Sum x y` 询问从 $x$ 到 $y$ 的路径上的城市的机器人数量之和。\n3. `Major x y` 询问从 $x$ 到 $y$ 的路径上的城市的机器人数量的最大值。\n4. `Minor x y` 询问从 $x$ 到 $y$ 的路径上的城市的机器人数量的最小值。\n5. `Invert x y` 翻转从 $x$ 到 $y$ 的路径上的城市的机器人数量。\n\n对于 X 国司令的指令，保证给定的 $x,y$ 满足上文所述的要求。对于 Kanari 国王的询问，**不**保证给定的 $x,y$ 满足上述要求。", "inputFormat": "第一行有三个整数 $n,m,r$，分别表示树的节点数、指令和询问总数，以及 X 国的据点。\n\n接下来 $n-1$ 行，每行两个整数 $x$ 和 $y$，表示 Katharon 国的一条道路。\n\n接下来 $m$ 行，每行描述一个指令或询问，格式见题目描述。", "outputFormat": "对于每个询问操作，输出所求的值。", "hint": "数据保证，$1\\leq n,m\\leq 5\\times 10^4$，且对于运送操作 $1\\leq w\\leq 10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3159 决战", "background": "", "description": "Katharon 国有 $n$ 个城市，编号为 $1\\sim n$。出于勤俭节约，不铺张浪费的考虑，城市间只连有 $n-1$ 条道路，使得可以从一个城市出发沿着道路走到另一座城市。\n\n现在 X 国的飞船降落在了某个城市，并把它改造成了自己的据点。X 国占领其他国家的一贯做法是，在据点里造一堆工厂生产战斗机器人，然后沿着被侵略国的道路运送到其他城市。X 国的司令向来不走回头路，而且崇尚团结与绝对的公平，因此运送战斗机器人时，会先选择一个终点，再在从据点到终点的路径上选择一个起点，然后把机器人均匀分配到起点到终点路径上的每个城市。同时，为了重新分配机器人，X 国的司令还会下令，按照与运送机器人相同的方法选择起点和终点，然后翻转这条路径上城市的机器人的数量。比如，选定的路径上的城市的机器人数依次为 $1,2,3,4,5$，翻转之后就变成了 $5,4,3,2,1$。\n\nKanari 国王手中的圆盘上浮现出了 Katharon 国的地图。不仅如此,上面还标出了 X 国据点在 $r$ 号城市，并显示出了 X 国司令刚刚下达的指令。“太好了！”国王欢呼，“我们能第一时间掌握敌人的布局，就一定能击退 X 国的侵略者！”\n\n但是还有一个问题没有解决。圆盘上只显示了指令，却没有标出每个城市的机器人数量，这让国王很是头疼。于是他找到了你，想让你帮忙设计一个程序来回答国王的询问。国王只关心某两个点之间路径上的城市的机器人和、最大值以及最小值，以便确定兵力部署、攻击要点和敌方的薄弱点。\n\nX 国司令的指令和 Kanari 国王的询问如下：\n\n1. `Increase x y w` 运送一批机器人到从 $x$ 到 $y$ 的路径上的城市，并分配给每个城市 $w$ 个机器人；\n2. `Sum x y` 询问从 $x$ 到 $y$ 的路径上的城市的机器人数量之和。\n3. `Major x y` 询问从 $x$ 到 $y$ 的路径上的城市的机器人数量的最大值。\n4. `Minor x y` 询问从 $x$ 到 $y$ 的路径上的城市的机器人数量的最小值。\n5. `Invert x y` 翻转从 $x$ 到 $y$ 的路径上的城市的机器人数量。\n\n对于 X 国司令的指令，保证给定的 $x,y$ 满足上文所述的要求。对于 Kanari 国王的询问，**不**保证给定的 $x,y$ 满足上述要求。", "inputFormat": "第一行有三个整数 $n,m,r$，分别表示树的节点数、指令和询问总数，以及 X 国的据点。\n\n接下来 $n-1$ 行，每行两个整数 $x$ 和 $y$，表示 Katharon 国的一条道路。\n\n接下来 $m$ 行，每行描述一个指令或询问，格式见题目描述。", "outputFormat": "对于每个询问操作，输出所求的值。", "hint": "数据保证，$1\\leq n,m\\leq 5\\times 10^4$，且对于运送操作 $1\\leq w\\leq 10^3$。", "locale": "zh-CN"}}}
{"pid": "P10660", "type": "P", "difficulty": 6, "samples": [["5\n2 2 1\n2 3 2\n2 4 3\n2 5 4\n2 3 5\n5\nA 1\nA 2\nC 5 3 1 1\nA 4\nA 5", "4276\n7141\n4256\n2126"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "动态树 LCT", "扩展欧几里德算法"], "title": "BZOJ2759 一个动态树好题", "background": "", "description": "有 $n$ 个未知数 $x_1,x_2,\\dots,x_n$ 和 $n$ 个等式组成的同余方程组：$x_i\\equiv k_i\\times x_{p_i} + b_i \\pmod {10007}$。\n\n你需要进行 $q$ 次操作，每次操作为下列两种情况之一：\n- `A a`，询问当前 $x_a$ 的解，无解输出 `-1`，多解输出 `-2` 否则输出 $x_a$。\n- `C a x y z`，修改一个等式 $k_a \\gets x,p_a \\gets y,b_a \\gets z$。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行三个整数 $k_i,p_i,b_i$。\n\n接下来一行一个整数 $q$。\n\n再接下来 $q$ 行，每行一个操作，见题意所述。", "outputFormat": "对每个询问，输出一行一个整数。", "hint": "对于所有数据，$k_i,b_i,x_i \\in [0,10007) \\cap \\Z$。$1\\leq n\\leq 3\\times 10^4$，$0\\leq q\\leq 10^5$，其中询问操作占总操作数的约 $80\\%$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ2759 一个动态树好题", "background": "", "description": "有 $n$ 个未知数 $x_1,x_2,\\dots,x_n$ 和 $n$ 个等式组成的同余方程组：$x_i\\equiv k_i\\times x_{p_i} + b_i \\pmod {10007}$。\n\n你需要进行 $q$ 次操作，每次操作为下列两种情况之一：\n- `A a`，询问当前 $x_a$ 的解，无解输出 `-1`，多解输出 `-2` 否则输出 $x_a$。\n- `C a x y z`，修改一个等式 $k_a \\gets x,p_a \\gets y,b_a \\gets z$。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行三个整数 $k_i,p_i,b_i$。\n\n接下来一行一个整数 $q$。\n\n再接下来 $q$ 行，每行一个操作，见题意所述。", "outputFormat": "对每个询问，输出一行一个整数。", "hint": "对于所有数据，$k_i,b_i,x_i \\in [0,10007) \\cap \\Z$。$1\\leq n\\leq 3\\times 10^4$，$0\\leq q\\leq 10^5$，其中询问操作占总操作数的约 $80\\%$。", "locale": "zh-CN"}}}
{"pid": "P10661", "type": "P", "difficulty": 6, "samples": [["8 6\n1 2\n1 3\n2 8\n3 4\n3 5\n3 6\n4 7\nREQUEST 7\nRELEASE 3\nREQUEST 3\nRECENTER 5\nRELEASE 2\nREQUEST 1", "4.0000000000\n2.0000000000\n1.3333333333"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "动态树 LCT"], "title": "BZOJ3779 重组病毒", "background": "黑客们通过对已有的病毒反编译，将许多不同的病毒重组，并重新编译出了新型的重组病毒。这种病毒的繁殖和变异能力极强。为了阻止这种病毒传播，某安全机构策划了一次实验，来研究这种病毒。", "description": "实验在一个封闭的局域网内进行。局域网内有 $n$ 台计算机，编号为 $1\\sim n$。一些计算机之间通过网线直接相连，形成树形的结构。局域网中有一台特殊的计算机，称之为核心计算机。根据一些初步的研究，研究员们拟定了一个一共 $m$ 步的实验。实验开始之前，核心计算机的编号为 $1$，每台计算机中都有病毒的一个变种，而且每台计算机中的变种都不相同。实验中的每一步会是下面中的一种操作：\n\n- `RELEASE x`。在编号为 $x$ 的计算机中植入病毒的一个新变种。这个变种在植入之前不存在于局域网中。\n- `RECENTER x`。将核心计算机改为编号为 $x$ 的计算机。但是这个操作会导致原来核心计算机中的病毒产生新变种，并感染过来。换言之，假设操作前的核心计算机编号为 $y$，相当于在操作后附加了一次 `RELEASE y` 的操作。\n\n根据研究的结论，在植入一个新变种时，病毒会在局域网中搜索核心计算机的位置，并沿着网络中最短的路径感染过去。\n\n而第一轮实验揭露了一个惊人的真相：病毒的不同变种是互斥的。新变种在感染一台已经被旧变种感染的电脑时，会把旧变种完全销毁之后再感染。但研究员发现了实现过程中的漏洞。如果新变种在感染过程中尚未销毁过这类旧变种，需要先花费 $1$ 单位时间分析旧变种，才能销毁。如果之前销毁过这类旧变种，就可以认为销毁不花费时间。病毒在两台计算机之间的传播亦可认为不花费时间。\n\n研究员对整个感染过程的耗时特别感兴趣，因为这是消灭病毒的最好时机。于是在 $m$ 步步实验之中，研究员有时还会做出如下的询问：\n\n- `REQUEST x`。询问如果在编号为 $x$ 的计算机的关键集合中的计算机中植入一个新变种，平均感染时间为多长。编号为 $y$ 的计算机在编号为 $x$ 的计算机的关键集合中，当且仅当从 $y$ 沿网络中的最短路径感染到核心计算机必须经过 $x$。由于有 `RECENTER` 操作的存在，这个集合并不一定是始终不变的。\n\n至此，安全机构认为已经不需要实际的实验了，于是他们拜托你编写一个程序，模拟实验的结果，并回答所有的询问。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$，分别代表局域网中计算机的数量，以及操作和询问的总数。\n\n接下来 $n-1$ 行，每行包含两个整数 $x$ 和 $y$，表示局域网中编号为 $x$ 和 $y$ 的计算机之间有网线直接相连。\n\n接下来 $m$ 行，每行包含一个操作或者询问，格式如问题描述中所述。", "outputFormat": "对于每个询问，输出一个实数，代表平均感染时间。输出与答案的绝对误差不超过 $10^{-6}$ 时才会被视为正确。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$，$1\\leq m\\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3779 重组病毒", "background": "黑客们通过对已有的病毒反编译，将许多不同的病毒重组，并重新编译出了新型的重组病毒。这种病毒的繁殖和变异能力极强。为了阻止这种病毒传播，某安全机构策划了一次实验，来研究这种病毒。", "description": "实验在一个封闭的局域网内进行。局域网内有 $n$ 台计算机，编号为 $1\\sim n$。一些计算机之间通过网线直接相连，形成树形的结构。局域网中有一台特殊的计算机，称之为核心计算机。根据一些初步的研究，研究员们拟定了一个一共 $m$ 步的实验。实验开始之前，核心计算机的编号为 $1$，每台计算机中都有病毒的一个变种，而且每台计算机中的变种都不相同。实验中的每一步会是下面中的一种操作：\n\n- `RELEASE x`。在编号为 $x$ 的计算机中植入病毒的一个新变种。这个变种在植入之前不存在于局域网中。\n- `RECENTER x`。将核心计算机改为编号为 $x$ 的计算机。但是这个操作会导致原来核心计算机中的病毒产生新变种，并感染过来。换言之，假设操作前的核心计算机编号为 $y$，相当于在操作后附加了一次 `RELEASE y` 的操作。\n\n根据研究的结论，在植入一个新变种时，病毒会在局域网中搜索核心计算机的位置，并沿着网络中最短的路径感染过去。\n\n而第一轮实验揭露了一个惊人的真相：病毒的不同变种是互斥的。新变种在感染一台已经被旧变种感染的电脑时，会把旧变种完全销毁之后再感染。但研究员发现了实现过程中的漏洞。如果新变种在感染过程中尚未销毁过这类旧变种，需要先花费 $1$ 单位时间分析旧变种，才能销毁。如果之前销毁过这类旧变种，就可以认为销毁不花费时间。病毒在两台计算机之间的传播亦可认为不花费时间。\n\n研究员对整个感染过程的耗时特别感兴趣，因为这是消灭病毒的最好时机。于是在 $m$ 步步实验之中，研究员有时还会做出如下的询问：\n\n- `REQUEST x`。询问如果在编号为 $x$ 的计算机的关键集合中的计算机中植入一个新变种，平均感染时间为多长。编号为 $y$ 的计算机在编号为 $x$ 的计算机的关键集合中，当且仅当从 $y$ 沿网络中的最短路径感染到核心计算机必须经过 $x$。由于有 `RECENTER` 操作的存在，这个集合并不一定是始终不变的。\n\n至此，安全机构认为已经不需要实际的实验了，于是他们拜托你编写一个程序，模拟实验的结果，并回答所有的询问。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$，分别代表局域网中计算机的数量，以及操作和询问的总数。\n\n接下来 $n-1$ 行，每行包含两个整数 $x$ 和 $y$，表示局域网中编号为 $x$ 和 $y$ 的计算机之间有网线直接相连。\n\n接下来 $m$ 行，每行包含一个操作或者询问，格式如问题描述中所述。", "outputFormat": "对于每个询问，输出一个实数，代表平均感染时间。输出与答案的绝对误差不超过 $10^{-6}$ 时才会被视为正确。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$，$1\\leq m\\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10662", "type": "P", "difficulty": 6, "samples": [["2 1000\n0 0\n1 2\n1\n1 1", "No"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "动态树 LCT", "分块"], "title": "BZOJ4202 石子游戏", "background": "", "description": "石子游戏是大家都很喜欢玩的一类游戏，这类游戏通常与石子的移动和取舍有关，往往可以让人在游戏中获得不少的乐趣。\n\n有一类树上石子游戏的规则是这样的：在一棵有根树上，每个结点都有着一定数目的石子，两个玩家轮流进行游戏。每次，每个玩家可以把不超过 $m$ 个的石子移动到它的父亲上，一次只能移动一个结点上的石子。显然，根结点没有父亲，故每个石子一旦移动到根结点便无法再次移动。问题是以某个结点为根的子树进行这样的游戏，是否存在先手必胜策略。\n\n为了增加这个游戏的难度，我们对这个游戏进行一些小小的修改。现在，我们的这棵树可能会长出新的结点。同时，每个结点上的石子数目可能会变化。请问，以某个节点为根的子树进行这样的石子游戏，是否存在先手必胜策略。本题要求强制在线。", "inputFormat": "第一行包含两个整数 $n,m$，表示初始时有 $n$ 个结点，每次移动不能超过 $m$ 个石子。\n\n第二行 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，表示初始时候的石子数量，其中 $1$ 号结点为根结点。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$，表示有一条从 $u$ 到 $v$ 的边。\n\n接下来一行一个正整数 $t$，表示操作的数目。\n\n接下来 $t$ 行，每行代表一个操作，每行的第一个数字代表操作类型，其中：\n\n- 若为 $1$，后跟一个整数 $v$，表示询问在 $v$ 的子树中做游戏先手是否必胜。\n- 若为 $2$，后跟两个整数 $x,y$，表示将结点 $x$ 的石子数修改为 $y$。\n- 若为 $3$，后跟三个整数 $u,v,x$，表示为 $u$ 结点添加一个儿子 $v$，其初始石子数为 $x$。", "outputFormat": "对于每一个询问，若先手必胜输出 `Yes`，否则输出 `No`。\n\n注：数据进行了强制在线处理，对于每一个操作，除类型名外，都需要异或之前回答为 `Yes` 的数目。", "hint": "对于 $100\\%$ 的数据，$1\\leq n,t\\leq 5\\times 10^4$，同时，保证任何时刻树中节点数目和编号都不会超过 $10^5$。其余数据的范围皆在 int 范围内。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4202 石子游戏", "background": "", "description": "石子游戏是大家都很喜欢玩的一类游戏，这类游戏通常与石子的移动和取舍有关，往往可以让人在游戏中获得不少的乐趣。\n\n有一类树上石子游戏的规则是这样的：在一棵有根树上，每个结点都有着一定数目的石子，两个玩家轮流进行游戏。每次，每个玩家可以把不超过 $m$ 个的石子移动到它的父亲上，一次只能移动一个结点上的石子。显然，根结点没有父亲，故每个石子一旦移动到根结点便无法再次移动。问题是以某个结点为根的子树进行这样的游戏，是否存在先手必胜策略。\n\n为了增加这个游戏的难度，我们对这个游戏进行一些小小的修改。现在，我们的这棵树可能会长出新的结点。同时，每个结点上的石子数目可能会变化。请问，以某个节点为根的子树进行这样的石子游戏，是否存在先手必胜策略。本题要求强制在线。", "inputFormat": "第一行包含两个整数 $n,m$，表示初始时有 $n$ 个结点，每次移动不能超过 $m$ 个石子。\n\n第二行 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，表示初始时候的石子数量，其中 $1$ 号结点为根结点。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$，表示有一条从 $u$ 到 $v$ 的边。\n\n接下来一行一个正整数 $t$，表示操作的数目。\n\n接下来 $t$ 行，每行代表一个操作，每行的第一个数字代表操作类型，其中：\n\n- 若为 $1$，后跟一个整数 $v$，表示询问在 $v$ 的子树中做游戏先手是否必胜。\n- 若为 $2$，后跟两个整数 $x,y$，表示将结点 $x$ 的石子数修改为 $y$。\n- 若为 $3$，后跟三个整数 $u,v,x$，表示为 $u$ 结点添加一个儿子 $v$，其初始石子数为 $x$。", "outputFormat": "对于每一个询问，若先手必胜输出 `Yes`，否则输出 `No`。\n\n注：数据进行了强制在线处理，对于每一个操作，除类型名外，都需要异或之前回答为 `Yes` 的数目。", "hint": "对于 $100\\%$ 的数据，$1\\leq n,t\\leq 5\\times 10^4$，同时，保证任何时刻树中节点数目和编号都不会超过 $10^5$。其余数据的范围皆在 int 范围内。", "locale": "zh-CN"}}}
{"pid": "P10663", "type": "P", "difficulty": 6, "samples": [["5\n1 233\n2 233\n3 233\n4 233\n5 233", "1\n5\n35\n42\n121"]], "limits": {"time": [4000], "memory": [524288]}, "tags": ["数论", "O2优化", "莫比乌斯反演", "容斥原理"], "title": "BZOJ4833 最小公倍佩尔数", "background": "题目来自 BZOJ 2017 年 4 月月赛。", "description": "令 $(1+\\sqrt{2})^n=e(n)+\\sqrt{2}f(n)$，其中 $e(n),f(n)$ 都是整数，显然有 $(1-\\sqrt{2})^n=e(n)-\\sqrt{2}f(n)$。令 $g(n)=\\operatorname{lcm}(f(1),f(2),\\dots,f(n))$。\n\n给定两个正整数 $n,p$，其中 $p$ 是质数，并且保证 $f(1),f(2),\\dots,f(n)$ 在模 $p$ 意义下均不为 $0$，请计算 $\\sum \\limits_{i=1}^n i\\times g(i)$ 模 $p$ 的值。", "inputFormat": "第一行包含一个正整数 $T$，表示有 $T$ 组数据。\n\n接下来是测试数据。每组测试数据只占一行，包含两个正整数 $n$ 和 $p$。", "outputFormat": "对于每组测试数据，输出一行一个非负整数，表示这组数据的答案。", "hint": "对于 $100\\%$ 的数据，$1\\leq T\\leq 210$，$1\\leq n\\leq 10^6$，$2\\leq p\\leq 10^9+7$，$\\sum n\\leq 3\\times 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4833 最小公倍佩尔数", "background": "题目来自 BZOJ 2017 年 4 月月赛。", "description": "令 $(1+\\sqrt{2})^n=e(n)+\\sqrt{2}f(n)$，其中 $e(n),f(n)$ 都是整数，显然有 $(1-\\sqrt{2})^n=e(n)-\\sqrt{2}f(n)$。令 $g(n)=\\operatorname{lcm}(f(1),f(2),\\dots,f(n))$。\n\n给定两个正整数 $n,p$，其中 $p$ 是质数，并且保证 $f(1),f(2),\\dots,f(n)$ 在模 $p$ 意义下均不为 $0$，请计算 $\\sum \\limits_{i=1}^n i\\times g(i)$ 模 $p$ 的值。", "inputFormat": "第一行包含一个正整数 $T$，表示有 $T$ 组数据。\n\n接下来是测试数据。每组测试数据只占一行，包含两个正整数 $n$ 和 $p$。", "outputFormat": "对于每组测试数据，输出一行一个非负整数，表示这组数据的答案。", "hint": "对于 $100\\%$ 的数据，$1\\leq T\\leq 210$，$1\\leq n\\leq 10^6$，$2\\leq p\\leq 10^9+7$，$\\sum n\\leq 3\\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10664", "type": "P", "difficulty": 6, "samples": [["1\n1 2 3", "1"]], "limits": {"time": [2000, 2000], "memory": [524288, 524288]}, "tags": ["原根", "数论", "O2优化", "矩阵乘法", "单位根反演"], "title": "BZOJ3328 PYXFIB", "background": null, "description": "给定整数 $n,k,p$，要求计算下列式子对 $p$ 取模的值：\n\n$$\\sum_{i=0}^{\\lfloor \\frac{n}{k} \\rfloor} C_n^{i\\times k}\\times F_{i\\times k}$$\n\n其中：\n- $p$ 为质数，且 $p$ 除以 $k$ 的余数为 $1$。\n- $C$ 为组合数，即 $C_n^m=\\frac{n!}{m!(n-m)!}$。\n- $F_n$ 为斐波那契数列，即 $F_0=1$，$F_1=1$，$F_n=F_{n-1}+F_{n-2}(n\\geq 2)$。", "inputFormat": "第一行输入一个正整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行三个正整数 $n,k,p$。", "outputFormat": "输出 $T$ 行，每行一个整数，表示结果。", "hint": "对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^{18}$，$1\\leq k \\leq 20000$，$1\\leq T\\leq 20$，$1\\leq p\\leq 10^9$，$p$ 为质数，且 $p$ 除以 $k$ 的余数为 $1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3328 PYXFIB", "background": null, "description": "给定整数 $n,k,p$，要求计算下列式子对 $p$ 取模的值：\n\n$$\\sum_{i=0}^{\\lfloor \\frac{n}{k} \\rfloor} C_n^{i\\times k}\\times F_{i\\times k}$$\n\n其中：\n- $p$ 为质数，且 $p$ 除以 $k$ 的余数为 $1$。\n- $C$ 为组合数，即 $C_n^m=\\frac{n!}{m!(n-m)!}$。\n- $F_n$ 为斐波那契数列，即 $F_0=1$，$F_1=1$，$F_n=F_{n-1}+F_{n-2}(n\\geq 2)$。", "inputFormat": "第一行输入一个正整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行三个正整数 $n,k,p$。", "outputFormat": "输出 $T$ 行，每行一个整数，表示结果。", "hint": "对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^{18}$，$1\\leq k \\leq 20000$，$1\\leq T\\leq 20$，$1\\leq p\\leq 10^9$，$p$ 为质数，且 $p$ 除以 $k$ 的余数为 $1$。", "locale": "zh-CN"}}}
{"pid": "P10665", "type": "P", "difficulty": 6, "samples": [["3 4\n2 1 E 1 2 N\n2 1 N 1 1 N\n3 1 N 2 1 N\n2 2 N 1 1 N", "TAK\nTAK\nNIE\nNIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2013", "并查集", "O2优化", "ICPC"], "title": "[AMPPZ2013] Bytehattan", "background": "", "description": "比特哈顿镇有 $n\\times n$ 个格点，形成了一个网格图。一开始整张图是完整的。\n\n有 $k$ 次操作，每次会删掉图中的一条边 $(u,v)$，你需要回答在删除这条边之后 $u$ 和 $v$ 是否仍然连通。", "inputFormat": "第一行包含两个正整数 $n,k(2\\leq n\\leq 1500,1\\leq k\\leq 2n(n-1))$，表示网格图的大小以及操作的个数。\n\n接下来 $k$ 行，每行包含两条信息，每条信息包含两个正整数 $a,b(1\\leq a,b\\leq n)$ 以及一个字符 $c$（$c$ 为 `N` 或者 `E`）。\n\n如果 $c$ 为 `N`，表示删除 $(a,b)$ 到 $(a,b+1)$ 这条边；如果 $c$ 为 `E`，表示删除 $(a,b)$ 到 $(a+1,b)$ 这条边。\n\n数据进行了加密，对于每个操作，如果上一个询问回答为 TAK 或者这是第一个操作，那么只考虑第一条信息，否则只考虑第二条信息。数据保证每条边最多被删除一次。", "outputFormat": "输出 $k$ 行，对于每个询问，如果仍然连通，输出 TAK，否则输出 NIE。", "hint": "数据保证，$2\\leq n\\leq 1500$，$1\\leq k\\leq 2n(n-1)$，$1\\leq a,b\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AMPPZ2013] Bytehattan", "background": "", "description": "比特哈顿镇有 $n\\times n$ 个格点，形成了一个网格图。一开始整张图是完整的。\n\n有 $k$ 次操作，每次会删掉图中的一条边 $(u,v)$，你需要回答在删除这条边之后 $u$ 和 $v$ 是否仍然连通。", "inputFormat": "第一行包含两个正整数 $n,k(2\\leq n\\leq 1500,1\\leq k\\leq 2n(n-1))$，表示网格图的大小以及操作的个数。\n\n接下来 $k$ 行，每行包含两条信息，每条信息包含两个正整数 $a,b(1\\leq a,b\\leq n)$ 以及一个字符 $c$（$c$ 为 `N` 或者 `E`）。\n\n如果 $c$ 为 `N`，表示删除 $(a,b)$ 到 $(a,b+1)$ 这条边；如果 $c$ 为 `E`，表示删除 $(a,b)$ 到 $(a+1,b)$ 这条边。\n\n数据进行了加密，对于每个操作，如果上一个询问回答为 TAK 或者这是第一个操作，那么只考虑第一条信息，否则只考虑第二条信息。数据保证每条边最多被删除一次。", "outputFormat": "输出 $k$ 行，对于每个询问，如果仍然连通，输出 TAK，否则输出 NIE。", "hint": "数据保证，$2\\leq n\\leq 1500$，$1\\leq k\\leq 2n(n-1)$，$1\\leq a,b\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P10666", "type": "P", "difficulty": 6, "samples": [["10\n3 5 3 6 3 4 10 4 5 2", "9"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "分块", "快速傅里叶变换 FFT"], "title": "COUNTARI", "background": "", "description": "给定一个长度为 $n$ 的数组 $a$，求有多少对 $i,j,k(1\\leq i<j<k\\leq n)$，满足 $a_k-a_j=a_j-a_i$。", "inputFormat": "第一行一个整数 $n$，第二行 $n$ 个正整数 $a_i$。", "outputFormat": "一行一个整数表示所求的结果。", "hint": "数据保证，$1\\leq n\\leq 10^5$，$1\\leq a_i\\leq 3\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "COUNTARI", "background": "", "description": "给定一个长度为 $n$ 的数组 $a$，求有多少对 $i,j,k(1\\leq i<j<k\\leq n)$，满足 $a_k-a_j=a_j-a_i$。", "inputFormat": "第一行一个整数 $n$，第二行 $n$ 个正整数 $a_i$。", "outputFormat": "一行一个整数表示所求的结果。", "hint": "数据保证，$1\\leq n\\leq 10^5$，$1\\leq a_i\\leq 3\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P10667", "type": "P", "difficulty": 6, "samples": [["2 0.33\n3 0.316", "3\n19"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "类欧几里得算法"], "title": "BZOJ2712 [Violet 2] 棒球", "background": "", "description": "棒球中一项最原始简单的技术参数就是「安打率」。所谓「安打」，就是指打击手把投手投出来的球，击出到界内，使打者本身能至少安全上到一垒的情形。由于只有队员跑回本垒才能得分，安打是得分的最重要的途径。因此，安打率对于打击手来说也是非常重要的数据。顾名思义，安打率为安打数与打数的比值。如果一名打击手在 $5$ 次打击中出现了 $1$ 次安打，那么他的安打率就是 $0.2$。\n\nUruto 是一位业余棒球爱好者。有一次，他在训练中看到了自己的安打率数据。他发现这个数据是一个被四舍五入到了 $n$ 位小数的一个值。Uruto 想知道，他至少打击了多少次才有可能得到这样的安打率。", "inputFormat": "输入文件包含多个测试点。\n- 每个测试点占一行，包含一个整数 $n$ 和浮点数 $r$。其中 $r$ 是一个 $n$ 位小数，表示 Uruto 安打率的近似值。", "outputFormat": "对于每个测试点，在单独的一行内输出一个整数，表示 Uruto 最小可能的打击次数。", "hint": "对于 $20\\%$ 的数据，保证答案在 $1000$ 以内；\n\n对于所有数据，保证 $0<n\\leq 15$，测试点的数目在 $500$ 以内。\n\n如果一个棒球运动员的安打率在 $30\\%$ 以上，那么他就绝对是球队的栋梁了。出于这方面的考虑，保证所有的数据中 $0\\leq r<1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ2712 [Violet 2] 棒球", "background": "", "description": "棒球中一项最原始简单的技术参数就是「安打率」。所谓「安打」，就是指打击手把投手投出来的球，击出到界内，使打者本身能至少安全上到一垒的情形。由于只有队员跑回本垒才能得分，安打是得分的最重要的途径。因此，安打率对于打击手来说也是非常重要的数据。顾名思义，安打率为安打数与打数的比值。如果一名打击手在 $5$ 次打击中出现了 $1$ 次安打，那么他的安打率就是 $0.2$。\n\nUruto 是一位业余棒球爱好者。有一次，他在训练中看到了自己的安打率数据。他发现这个数据是一个被四舍五入到了 $n$ 位小数的一个值。Uruto 想知道，他至少打击了多少次才有可能得到这样的安打率。", "inputFormat": "输入文件包含多个测试点。\n- 每个测试点占一行，包含一个整数 $n$ 和浮点数 $r$。其中 $r$ 是一个 $n$ 位小数，表示 Uruto 安打率的近似值。", "outputFormat": "对于每个测试点，在单独的一行内输出一个整数，表示 Uruto 最小可能的打击次数。", "hint": "对于 $20\\%$ 的数据，保证答案在 $1000$ 以内；\n\n对于所有数据，保证 $0<n\\leq 15$，测试点的数目在 $500$ 以内。\n\n如果一个棒球运动员的安打率在 $30\\%$ 以上，那么他就绝对是球队的栋梁了。出于这方面的考虑，保证所有的数据中 $0\\leq r<1$。", "locale": "zh-CN"}}}
{"pid": "P10668", "type": "P", "difficulty": 4, "samples": [["3\n3 2 1", "4.33"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "期望"], "title": "BZOJ2720 [Violet 5] 列队春游", "background": "", "description": "给定正整数数列 $h_1,h_2,\\cdots,h_n$。设 $p$ 为 $1\\sim n$ 的随机排列。\n\n定义 $h'_i=h_{p_i}$。定义 $\\mathrm{pre}_i$ 为最大的 $j\\lt i$ 满足 $h'_j\\ge h'_i$（如果不存在，规定为 $0$）。\n\n求出 $\\displaystyle \\sum_{i=1}^n (i-\\mathrm{pre}_i)$ 的期望值，保留两位小数输出。", "inputFormat": "第一行一个正整数 $n$，表示数列长度。\n\n第二行 $n$ 个正整数 $h_i$。", "outputFormat": "输出一行一个实数，表示答案，保留两位小数。", "hint": "对于 $20\\%$ 的数据，$1\\leq n\\leq 10$；\n\n对于 $50\\%$ 的数据，$1\\leq n\\leq 70$，且 $h_i$ 互不相同；\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 300$，$1\\leq h_i\\leq 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ2720 [Violet 5] 列队春游", "background": "", "description": "给定正整数数列 $h_1,h_2,\\cdots,h_n$。设 $p$ 为 $1\\sim n$ 的随机排列。\n\n定义 $h'_i=h_{p_i}$。定义 $\\mathrm{pre}_i$ 为最大的 $j\\lt i$ 满足 $h'_j\\ge h'_i$（如果不存在，规定为 $0$）。\n\n求出 $\\displaystyle \\sum_{i=1}^n (i-\\mathrm{pre}_i)$ 的期望值，保留两位小数输出。", "inputFormat": "第一行一个正整数 $n$，表示数列长度。\n\n第二行 $n$ 个正整数 $h_i$。", "outputFormat": "输出一行一个实数，表示答案，保留两位小数。", "hint": "对于 $20\\%$ 的数据，$1\\leq n\\leq 10$；\n\n对于 $50\\%$ 的数据，$1\\leq n\\leq 70$，且 $h_i$ 互不相同；\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 300$，$1\\leq h_i\\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P10669", "type": "P", "difficulty": 6, "samples": [["6 8\n1 2 3 1 4 2\n1 4 2 0 3 4\n2 3 5 1 2 1\n2 4 4 1 3 5\n3 5 2 0 1 3\n3 6 1 0 2 4\n4 5 7 1 3 2\n5 6 5 1 5 4", "21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "线性规划"], "title": "BZOJ3118 Orz the MST", "background": "", "description": "给出一个带权的连通无向图，对于其中的每条边 $i$，在原来边权的基础上，其边权每增加 $1$ 需要付出的代价为 $a_i$，边权每减少 $1$ 需要付出的代价为 $b_i$。\n\n现在指定该图的一棵生成树，求通过修改边权，使得该生成树成为图的一棵最小生成树，需要付出的最少总代价。", "inputFormat": "第一行两个正整数 $n,m$，表示图的点数和边数，结点以 $1\\sim n$ 编号。\n\n接下来 $m$ 行，每行 $6$ 个正整数，$u_i,v_i,w_i,\\textit{ff}_i,a_i,b_i$，表示一条边 $(u_i,v_i)$ 的权值为 $w_i$，在原边权基础上增加 $1$ 的代价为 $a_i$，减少 $1$ 的边权代价为 $b_i$，$\\textit{ff}_i$ 若为 $1$ 则表示该边在指定的生成树中，若为 $0$ 则表示不在。数据保证 $\\textit{ff}_i$ 值为 $1$ 的边刚好组成原图的一棵生成树。两点之间可能有多条不同的边，但没有连接同一点的边。", "outputFormat": "输出一个正整数，表示所需付出的最少总代价。", "hint": "**【样例解释】**\n\n最优方案为：\n- $(1,4)$ 边权加 $2$，代价 $6$；\n- $(3,5)$ 边权加 $3$，代价 $3$；\n- $(3,6)$ 边权加 $4$，代价 $8$；\n- $(4,5)$ 边权减 $2$，代价 $4$；\n\n总代价为 $21$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 300$，$1\\leq m,w_i,a_i,b_i\\leq 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3118 Orz the MST", "background": "", "description": "给出一个带权的连通无向图，对于其中的每条边 $i$，在原来边权的基础上，其边权每增加 $1$ 需要付出的代价为 $a_i$，边权每减少 $1$ 需要付出的代价为 $b_i$。\n\n现在指定该图的一棵生成树，求通过修改边权，使得该生成树成为图的一棵最小生成树，需要付出的最少总代价。", "inputFormat": "第一行两个正整数 $n,m$，表示图的点数和边数，结点以 $1\\sim n$ 编号。\n\n接下来 $m$ 行，每行 $6$ 个正整数，$u_i,v_i,w_i,\\textit{ff}_i,a_i,b_i$，表示一条边 $(u_i,v_i)$ 的权值为 $w_i$，在原边权基础上增加 $1$ 的代价为 $a_i$，减少 $1$ 的边权代价为 $b_i$，$\\textit{ff}_i$ 若为 $1$ 则表示该边在指定的生成树中，若为 $0$ 则表示不在。数据保证 $\\textit{ff}_i$ 值为 $1$ 的边刚好组成原图的一棵生成树。两点之间可能有多条不同的边，但没有连接同一点的边。", "outputFormat": "输出一个正整数，表示所需付出的最少总代价。", "hint": "**【样例解释】**\n\n最优方案为：\n- $(1,4)$ 边权加 $2$，代价 $6$；\n- $(3,5)$ 边权加 $3$，代价 $3$；\n- $(3,6)$ 边权加 $4$，代价 $8$；\n- $(4,5)$ 边权减 $2$，代价 $4$；\n\n总代价为 $21$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 300$，$1\\leq m,w_i,a_i,b_i\\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P10670", "type": "P", "difficulty": 6, "samples": [["2 3 1 ", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "莫比乌斯反演"], "title": "BZOJ4174 tty 的求助", "background": "", "description": "计算下式对 $998244353$ 取模的值，其中 $x$ 为实数，其余参与运算的变量均为整数：\n\n$$\\sum_{n=1}^N \\sum_{m=1}^M \\sum_{k=0}^{m-1} \\lfloor \\dfrac{nk+x}{m}\\rfloor$$", "inputFormat": "输入一行，两个正整数 $N,M$ 和一个实数 $x$。", "outputFormat": "输出一行一个整数，表示答案对 $998244353$ 取模的值。", "hint": "数据保证，$1\\leq N,M\\leq 500000$，$0<x\\leq 100000$，$x$ 精确到小数点后 $8$ 位小数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4174 tty 的求助", "background": "", "description": "计算下式对 $998244353$ 取模的值，其中 $x$ 为实数，其余参与运算的变量均为整数：\n\n$$\\sum_{n=1}^N \\sum_{m=1}^M \\sum_{k=0}^{m-1} \\lfloor \\dfrac{nk+x}{m}\\rfloor$$", "inputFormat": "输入一行，两个正整数 $N,M$ 和一个实数 $x$。", "outputFormat": "输出一行一个整数，表示答案对 $998244353$ 取模的值。", "hint": "数据保证，$1\\leq N,M\\leq 500000$，$0<x\\leq 100000$，$x$ 精确到小数点后 $8$ 位小数。", "locale": "zh-CN"}}}
{"pid": "P10671", "type": "P", "difficulty": 6, "samples": [["3\n1 1\n1 0\n0 -1", "5.000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["计算几何", "O2优化", "随机化"], "title": "BZOJ1278 向量 vector", "background": "", "description": "一个二维向量 $(x,y)$ 的权定义为 $x^2+y^2$。已知一个由 $n$ 个二维向量组成的集合，求该集合的一个子集，使该子集中的向量和的权尽可能大。", "inputFormat": "第 $1$ 行一个正整数 $n$，表示 $n$ 个向量。\n\n下面 $n$ 行，每行 $2$ 个实数，表示 $n$ 个向量 $(x_i,y_i)$。", "outputFormat": "输出 $1$ 个实数，即向量和最大的权，精确到小数点后 $3$ 位。", "hint": "数据保证，$1\\leq n\\leq 100000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ1278 向量 vector", "background": "", "description": "一个二维向量 $(x,y)$ 的权定义为 $x^2+y^2$。已知一个由 $n$ 个二维向量组成的集合，求该集合的一个子集，使该子集中的向量和的权尽可能大。", "inputFormat": "第 $1$ 行一个正整数 $n$，表示 $n$ 个向量。\n\n下面 $n$ 行，每行 $2$ 个实数，表示 $n$ 个向量 $(x_i,y_i)$。", "outputFormat": "输出 $1$ 个实数，即向量和最大的权，精确到小数点后 $3$ 位。", "hint": "数据保证，$1\\leq n\\leq 100000$。", "locale": "zh-CN"}}}
{"pid": "P10672", "type": "P", "difficulty": 2, "samples": [["6\n2 3 3 4 1 1", "1 3 3 1 2 4"], ["2\n1 1", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "Special Judge", "O2优化", "排列组合", "构造", "梦熊比赛"], "title": "【MX-S1-T1】 壁垒", "background": "原题链接：<https://oier.team/problems/S1A>。", "description": "给定一个长度为 $n$ 的仅包含正整数的数列 $a$，保证 $n$ 是偶数。你需要重排 $a$，满足对于 $a$ 的每个长度为偶数的前缀，出现的数字种类数是偶数，或断定这样的重排方式不存在。\n\n如果有多种重排方式满足条件，输出任意一种即可。", "inputFormat": "第一行一个正整数 $n$，保证 $n$ 是偶数。\n\n第二行一个 $n$ 个正整数，描述数列 $a$。", "outputFormat": "无解时输出 $-1$，否则输出一行 $n$ 个整数，描述重排后的数列 $a$。\n\n本题使用**自定义校验器**检验你的答案是否正确，如果有多种重排方式满足条件，输出任意一种即可。", "hint": "__【样例解释 1】__\n\n$\\{1,3\\},\\{1,3,3,1\\},\\{1,3,3,1,2,4\\}$ 这些集合的数字种类数都是偶数。\n\n__【数据范围】__\n\n__本题使用子任务捆绑测试。__\n\n对于 $100\\%$ 的数据，$2\\le n\\le 10^5$，$1\\le a_i\\le n$，保证 $n$ 是偶数。\n\n| 子任务编号 | $n\\le $ | $a_i\\le $ | 分值 |\n| ---------- | ------- | --------- | ---- |\n| $1$        | $10$    | $n$       | $20$ |\n| $2$        | $20$    | $n$       | $20$ |\n| $3$        | $10^5$  | $2$       | $20$ |\n| $4$        | $10^5$  | $10$      | $20$ |\n| $5$        | $10^5$  | $n$       | $20$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S1-T1】 壁垒", "background": "原题链接：<https://oier.team/problems/S1A>。", "description": "给定一个长度为 $n$ 的仅包含正整数的数列 $a$，保证 $n$ 是偶数。你需要重排 $a$，满足对于 $a$ 的每个长度为偶数的前缀，出现的数字种类数是偶数，或断定这样的重排方式不存在。\n\n如果有多种重排方式满足条件，输出任意一种即可。", "inputFormat": "第一行一个正整数 $n$，保证 $n$ 是偶数。\n\n第二行一个 $n$ 个正整数，描述数列 $a$。", "outputFormat": "无解时输出 $-1$，否则输出一行 $n$ 个整数，描述重排后的数列 $a$。\n\n本题使用**自定义校验器**检验你的答案是否正确，如果有多种重排方式满足条件，输出任意一种即可。", "hint": "__【样例解释 1】__\n\n$\\{1,3\\},\\{1,3,3,1\\},\\{1,3,3,1,2,4\\}$ 这些集合的数字种类数都是偶数。\n\n__【数据范围】__\n\n__本题使用子任务捆绑测试。__\n\n对于 $100\\%$ 的数据，$2\\le n\\le 10^5$，$1\\le a_i\\le n$，保证 $n$ 是偶数。\n\n| 子任务编号 | $n\\le $ | $a_i\\le $ | 分值 |\n| ---------- | ------- | --------- | ---- |\n| $1$        | $10$    | $n$       | $20$ |\n| $2$        | $20$    | $n$       | $20$ |\n| $3$        | $10^5$  | $2$       | $20$ |\n| $4$        | $10^5$  | $10$      | $20$ |\n| $5$        | $10^5$  | $n$       | $20$ |", "locale": "zh-CN"}}}
{"pid": "P10673", "type": "P", "difficulty": 4, "samples": [["5 4\n3 5 2 5 5\n3 2\n2 5\n1 5\n3 1", "1\n2"], ["5 15\n2 5 2 5 1\n2 1\n1 1\n1 2\n1 4\n1 1\n3 2\n1 1\n3 1\n1 5\n3 1\n1 2\n3 1\n2 1\n3 3\n2 2\n", "1\n5\n6\n7\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "线段树", "树状数组", "O2优化", "梦熊比赛"], "title": "【MX-S1-T2】催化剂", "background": "原题链接：<https://oier.team/problems/S1B>。", "description": "小朋友们很喜欢糖果。\n\n现在，小 K 有一些糖果，每个糖果上有一个数字代表它的种类。\n\n有 $q$ 次事件，每次事件会加入一个糖果、或删除一个糖果、或提出一次询问。\n\n每次询问会给出一个 $k$，表示小 K 现在需要将所有糖果分给 $k$ 个小朋友，并且每个小朋友都需要得到至少一个糖果。同时，小朋友们不喜欢得到相同的糖果。具体的，在一个小朋友得到了糖果 $i$ 时，如果 Ta 在这个糖果之前就已经获得过糖果 $i$，那么 Ta 就会感到非常生气，Ta 的愤怒值就会增加 $1$。\n\n小 K 不喜欢看到小朋友们生气，但小 K 无法解决这么困难的问题，所以你需要帮小 K 求出一种分糖果的方式，最小化所有小朋友的愤怒值之和。\n\n保证存在一种分糖果的方案，使得每个小朋友都分到至少一个糖果。\n\n每次询问并没有真正的分糖果，即每次询问后小 K 拥有的糖果不会改变。\n\n注意，分糖果的过程可以理解为将小 K 拥有的所有糖果划分到 $k$ 个非空序列，可以重排。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，描述初始时小 K 拥有的糖果。\n\n接下来 $q$ 行，每行两个正整数，描述一次操作，共有三种可能的输入：\n\n`1 x`：表示小 K 又拥有了一个种类为 $x$ 的糖果。\n\n`2 x`：表示小 K 丢失了一个种类为 $x$ 的糖果，保证此时小 K 拥有至少一个种类为 $x$ 的糖果。\n\n`3 k`：表示此时小 K 需要把糖果分给 $k$ 个小朋友，你需要求出最小的所有小朋友的愤怒值之和。令 $S$ 表示此时小 K 拥有的糖果数量，保证 $1\\le k\\le S$。", "outputFormat": "对于每次询问，输出一行一个整数，表示你求出的答案。", "hint": "__【样例解释 1】__\n\n第一次询问时，小 K 手上的糖果为 $\\{3,5,2,5,5\\}$，分给 $2$ 个小朋友的糖果为 $\\{2,3,5\\},\\{5,5\\}$，小朋友的愤怒值为 $0,1$。可以证明没有愤怒值之和更小的方案。\n\n__【数据范围】__\n\n__本题使用子任务捆绑测试。__\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 10^6$，$1\\le a_i,x\\le n$。每次询问时，令 $S$ 表示此时小 K 拥有的糖果数量，保证 $1\\le k\\le S$。\n\n| 子任务编号 | $n\\le $ | $q\\le $ | 特殊性质      | 分值 |\n| ---------- | ------- | ------- | ------------- | ---- |\n| $1$        | $5$     | $15$    | 无            | $20$ |\n| $2$        | $2000$  | $2000$  | 无            | $20$ |\n| $3$        | $10^5$  | $10^5$  | 无            | $20$ |\n| $4$        | $10^6$  | $10^6$  | $a_i,x\\le 50$ | $10$ |\n| $5$        | $10^6$  | $10^6$  | $k\\le 50$     | $10$ |\n| $6$        | $10^6$  | $10^6$  | 无            | $20$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S1-T2】催化剂", "background": "原题链接：<https://oier.team/problems/S1B>。", "description": "小朋友们很喜欢糖果。\n\n现在，小 K 有一些糖果，每个糖果上有一个数字代表它的种类。\n\n有 $q$ 次事件，每次事件会加入一个糖果、或删除一个糖果、或提出一次询问。\n\n每次询问会给出一个 $k$，表示小 K 现在需要将所有糖果分给 $k$ 个小朋友，并且每个小朋友都需要得到至少一个糖果。同时，小朋友们不喜欢得到相同的糖果。具体的，在一个小朋友得到了糖果 $i$ 时，如果 Ta 在这个糖果之前就已经获得过糖果 $i$，那么 Ta 就会感到非常生气，Ta 的愤怒值就会增加 $1$。\n\n小 K 不喜欢看到小朋友们生气，但小 K 无法解决这么困难的问题，所以你需要帮小 K 求出一种分糖果的方式，最小化所有小朋友的愤怒值之和。\n\n保证存在一种分糖果的方案，使得每个小朋友都分到至少一个糖果。\n\n每次询问并没有真正的分糖果，即每次询问后小 K 拥有的糖果不会改变。\n\n注意，分糖果的过程可以理解为将小 K 拥有的所有糖果划分到 $k$ 个非空序列，可以重排。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，描述初始时小 K 拥有的糖果。\n\n接下来 $q$ 行，每行两个正整数，描述一次操作，共有三种可能的输入：\n\n`1 x`：表示小 K 又拥有了一个种类为 $x$ 的糖果。\n\n`2 x`：表示小 K 丢失了一个种类为 $x$ 的糖果，保证此时小 K 拥有至少一个种类为 $x$ 的糖果。\n\n`3 k`：表示此时小 K 需要把糖果分给 $k$ 个小朋友，你需要求出最小的所有小朋友的愤怒值之和。令 $S$ 表示此时小 K 拥有的糖果数量，保证 $1\\le k\\le S$。", "outputFormat": "对于每次询问，输出一行一个整数，表示你求出的答案。", "hint": "__【样例解释 1】__\n\n第一次询问时，小 K 手上的糖果为 $\\{3,5,2,5,5\\}$，分给 $2$ 个小朋友的糖果为 $\\{2,3,5\\},\\{5,5\\}$，小朋友的愤怒值为 $0,1$。可以证明没有愤怒值之和更小的方案。\n\n__【数据范围】__\n\n__本题使用子任务捆绑测试。__\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 10^6$，$1\\le a_i,x\\le n$。每次询问时，令 $S$ 表示此时小 K 拥有的糖果数量，保证 $1\\le k\\le S$。\n\n| 子任务编号 | $n\\le $ | $q\\le $ | 特殊性质      | 分值 |\n| ---------- | ------- | ------- | ------------- | ---- |\n| $1$        | $5$     | $15$    | 无            | $20$ |\n| $2$        | $2000$  | $2000$  | 无            | $20$ |\n| $3$        | $10^5$  | $10^5$  | 无            | $20$ |\n| $4$        | $10^6$  | $10^6$  | $a_i,x\\le 50$ | $10$ |\n| $5$        | $10^6$  | $10^6$  | $k\\le 50$     | $10$ |\n| $6$        | $10^6$  | $10^6$  | 无            | $20$ |\n", "locale": "zh-CN"}}}
{"pid": "P10674", "type": "P", "difficulty": 6, "samples": [["2 1\n1 2", "9"], ["9 10\n8 3\n6 8\n8 5\n1 6\n6 2\n4 6\n8 2\n1 7\n9 6\n5 3", "80995"], ["20 36\n4 7\n2 13\n18 11\n6 14\n4 20\n5 4\n1 9\n19 4\n6 8\n11 15\n4 11\n4 18\n16 9\n16 4\n18 15\n3 18\n4 6\n5 7\n20 6\n20 8\n8 14\n19 13\n12 9\n4 8\n4 15\n20 14\n3 10\n12 1\n17 16\n13 4\n4 14\n10 18\n4 2\n16 12\n19 2\n1 16", "211240350"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "数学", "O2优化", "树形 DP", "双连通分量", "组合数学", "圆方树", "梦熊比赛"], "title": "【MX-S1-T3】电动力学", "background": "原题链接：<https://oier.team/problems/S1C>。", "description": "给定一张包含 $n$ 个点 $m$ 条边的简单无向连通图，点的编号为 $1\\sim n$。\n\n你需要求出有多少集合对 $S,T\\sube \\{1,2,\\dots,n\\}$，满足对于任意的 $i\\in S$，要么 $i$ 也 $\\in T$，要么存在 $x,y\\in T$（$x\\neq y$），满足存在一条从 $x$ 到 $y$ 的简单路径经过 $i$。\n\n注意，集合对 $S,T$ 可以为空集。\n\n输出答案对 $998244353$ 取模后的结果。\n", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$，描述图上的一条边。保证图连通，无自环、重边。", "outputFormat": "共一行一个整数，表示满足题目条件的集合对 $S,T$ 的数量对 $998244353$ 取模后的结果。", "hint": "__【样例解释 1】__\n\n所有合法的集合 $S,T$ 为：\n\n1. $S=\\{\\},T=\\{\\}$。\n2. $S=\\{\\},T=\\{1\\}$。\n3. $S=\\{\\},T=\\{2\\}$。\n4. $S=\\{\\},T=\\{1,2\\}$。\n5. $S=\\{1\\},T=\\{1\\}$。\n6. $S=\\{1\\},T=\\{1,2\\}$。\n7. $S=\\{2\\},T=\\{2\\}$。\n8. $S=\\{2\\},T=\\{1,2\\}$。\n9. $S=\\{1,2\\},T=\\{1,2\\}$。 \n\n__【数据范围】__\n\n__本题使用子任务捆绑测试。__\n\n对于 $100\\%$ 的数据，$2\\le n\\le 5\\times 10^5$，$n-1\\le m\\le 10^6$，$1\\le u_i,v_i\\le n$。保证图连通，无自环、重边。\n\n| 子任务编号 | $n\\le $        | $m\\le $            | 特殊性质        | 分值 |\n| ---------- | -------------- | ------------------ | --------------- | ---- |\n| $1$        | $10$           | $\\frac{n(n-1)}{2}$ | 无              | $10$ |\n| $2$        | $20$           | $\\frac{n(n-1)}{2}$ | 无              | $10$ |\n| $3$        | $5\\times 10^5$ | $n-1$              | $u_i=i,v_i=i+1$ | $10$ |\n| $4$        | $5\\times 10^5$ | $n-1$              | 无              | $20$ |\n| $5$        | $5\\times 10^5$ | $n$                | 无              | $20$ |\n| $6$        | $5\\times 10^5$ | $10^6$             | 无              | $30$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S1-T3】电动力学", "background": "原题链接：<https://oier.team/problems/S1C>。", "description": "给定一张包含 $n$ 个点 $m$ 条边的简单无向连通图，点的编号为 $1\\sim n$。\n\n你需要求出有多少集合对 $S,T\\sube \\{1,2,\\dots,n\\}$，满足对于任意的 $i\\in S$，要么 $i$ 也 $\\in T$，要么存在 $x,y\\in T$（$x\\neq y$），满足存在一条从 $x$ 到 $y$ 的简单路径经过 $i$。\n\n注意，集合对 $S,T$ 可以为空集。\n\n输出答案对 $998244353$ 取模后的结果。\n", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$，描述图上的一条边。保证图连通，无自环、重边。", "outputFormat": "共一行一个整数，表示满足题目条件的集合对 $S,T$ 的数量对 $998244353$ 取模后的结果。", "hint": "__【样例解释 1】__\n\n所有合法的集合 $S,T$ 为：\n\n1. $S=\\{\\},T=\\{\\}$。\n2. $S=\\{\\},T=\\{1\\}$。\n3. $S=\\{\\},T=\\{2\\}$。\n4. $S=\\{\\},T=\\{1,2\\}$。\n5. $S=\\{1\\},T=\\{1\\}$。\n6. $S=\\{1\\},T=\\{1,2\\}$。\n7. $S=\\{2\\},T=\\{2\\}$。\n8. $S=\\{2\\},T=\\{1,2\\}$。\n9. $S=\\{1,2\\},T=\\{1,2\\}$。 \n\n__【数据范围】__\n\n__本题使用子任务捆绑测试。__\n\n对于 $100\\%$ 的数据，$2\\le n\\le 5\\times 10^5$，$n-1\\le m\\le 10^6$，$1\\le u_i,v_i\\le n$。保证图连通，无自环、重边。\n\n| 子任务编号 | $n\\le $        | $m\\le $            | 特殊性质        | 分值 |\n| ---------- | -------------- | ------------------ | --------------- | ---- |\n| $1$        | $10$           | $\\frac{n(n-1)}{2}$ | 无              | $10$ |\n| $2$        | $20$           | $\\frac{n(n-1)}{2}$ | 无              | $10$ |\n| $3$        | $5\\times 10^5$ | $n-1$              | $u_i=i,v_i=i+1$ | $10$ |\n| $4$        | $5\\times 10^5$ | $n-1$              | 无              | $20$ |\n| $5$        | $5\\times 10^5$ | $n$                | 无              | $20$ |\n| $6$        | $5\\times 10^5$ | $10^6$             | 无              | $30$ |\n", "locale": "zh-CN"}}}
{"pid": "P10675", "type": "P", "difficulty": 6, "samples": [["3 3\n0 0 1\n0\n2 1 0\n1 3\n", "0\n3\n-1\n"], ["见下发文件。", "见下发文件。"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "线段树", "O2优化", "进制", "梦熊比赛"], "title": "【MX-S1-T4】先见之明", "background": "原题链接：<https://oier.team/problems/S1D>。", "description": "给定 $n$ 个非负整数 $a_1, a_2, \\ldots, a_n$。有 $q$ 次询问，每次询问：\n\n- 给定一个非负整数 $k$，你需要从 $2^{a_1}, \\ldots, 2^{a_n}$ 中取出一部分（即一个子集，可以为空），使得它们的和 $\\ge k$。\n- 在保证和 $\\ge k$ 的前提下，你需要最小化它们的和。你只需求出这个最小化的和。\n- $k$ 以二进制的形式给出，具体地，以 $k = \\sum_{i = 1}^{m} 2^{p_i}$ 的形式给出，保证 $p_i$ 均为非负整数且严格单调递减，即 $p_i > p_{i + 1}$。\n\n由于答案可能很大，你只需要输出对 $998244353$ 取模后的结果。\n\n若无法从 $2^{a_1}, \\ldots, 2^{a_n}$ 中取出一部分使得它们的和 $\\ge k$，该询问输出 $-1$。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $n$ 个非负整数 $a_1,a_2,\\dots,a_n$。\n\n接下来 $q$ 行，每行第一个非负整数为 $m$，接下来 $m$ 个非负整数为 $p_1,p_2,\\dots,p_m$，表示询问的 $k=\\sum_{i=1}^m 2^{p_i}$。保证 $p_i$ 严格单调递减，即 $p_i>p_{i+1}$。", "outputFormat": "共 $q$ 行，每行一个整数，表示答案对 $998244353$ 取模后的结果，或输出 $-1$ 表示无解。", "hint": "__【样例解释 1】__\n\n每个 $2^{a_i}$ 分别为 $1, 1, 2$。三次询问的 $k$ 为：$0,3,8$。具体如下：\n- $k = 0$：取空。\n- $k = 3$：取 $1, 2$ 即可。\n- $k = 8$：无解。\n\n__【样例解释 2】__\n\n此样例满足子任务 $1$ 的限制。\n\n__【数据范围】__\n\n__本题使用子任务捆绑测试。__\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 10^6$，$0\\le m\\le 10^6$，$\\sum m\\le 5\\times 10^6$，$0\\le a_i,p_i\\le 10^6$，$p_i>p_{i+1}$。\n\n表格留空表示无额外限制。\n\n| 子任务编号 | $n\\le $        | $q\\le $        | $\\sum m\\le $     | $a_i,p_i \\le $ | 特殊性质       | 分值 |\n| ---------- | -------------- | -------------- | ---------------- | -------------- | -------------- | ---- |\n| $1$        | $20$           |                |                  | $60$           |                | $10$ |\n| $2$        | $120$          |                |                  | $60$           |                | $10$ |\n| $3$        | $5\\times 10^3$ | $5\\times 10^3$ | $2.5\\times 10^4$ | $5\\times 10^3$ |                | $20$ |\n| $4$        | $10^5$         | $10^5$         | $5\\times 10^5$   | $10^5$         |                | $20$ |\n| $5$        |                |                |                  |                | $m\\le 2$       | $10$ |\n| $6$        |                |                |                  |                | $a_i$ 互不相同 | $10$ |\n| $7$        | $10^6$         | $10^6$         | $5\\times 10^6$   | $10^6$         |                | $20$ |\n\n由于本题输入量较大，我们在下发文件中提供了 `fast_read.cpp` 可以选择使用（注意在 C++98 标准下可能无法编译通过）。\n\n保证时间限制达到了没有使用特殊的读入优化的 std 的两倍。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S1-T4】先见之明", "background": "原题链接：<https://oier.team/problems/S1D>。", "description": "给定 $n$ 个非负整数 $a_1, a_2, \\ldots, a_n$。有 $q$ 次询问，每次询问：\n\n- 给定一个非负整数 $k$，你需要从 $2^{a_1}, \\ldots, 2^{a_n}$ 中取出一部分（即一个子集，可以为空），使得它们的和 $\\ge k$。\n- 在保证和 $\\ge k$ 的前提下，你需要最小化它们的和。你只需求出这个最小化的和。\n- $k$ 以二进制的形式给出，具体地，以 $k = \\sum_{i = 1}^{m} 2^{p_i}$ 的形式给出，保证 $p_i$ 均为非负整数且严格单调递减，即 $p_i > p_{i + 1}$。\n\n由于答案可能很大，你只需要输出对 $998244353$ 取模后的结果。\n\n若无法从 $2^{a_1}, \\ldots, 2^{a_n}$ 中取出一部分使得它们的和 $\\ge k$，该询问输出 $-1$。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $n$ 个非负整数 $a_1,a_2,\\dots,a_n$。\n\n接下来 $q$ 行，每行第一个非负整数为 $m$，接下来 $m$ 个非负整数为 $p_1,p_2,\\dots,p_m$，表示询问的 $k=\\sum_{i=1}^m 2^{p_i}$。保证 $p_i$ 严格单调递减，即 $p_i>p_{i+1}$。", "outputFormat": "共 $q$ 行，每行一个整数，表示答案对 $998244353$ 取模后的结果，或输出 $-1$ 表示无解。", "hint": "__【样例解释 1】__\n\n每个 $2^{a_i}$ 分别为 $1, 1, 2$。三次询问的 $k$ 为：$0,3,8$。具体如下：\n- $k = 0$：取空。\n- $k = 3$：取 $1, 2$ 即可。\n- $k = 8$：无解。\n\n__【样例解释 2】__\n\n此样例满足子任务 $1$ 的限制。\n\n__【数据范围】__\n\n__本题使用子任务捆绑测试。__\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 10^6$，$0\\le m\\le 10^6$，$\\sum m\\le 5\\times 10^6$，$0\\le a_i,p_i\\le 10^6$，$p_i>p_{i+1}$。\n\n表格留空表示无额外限制。\n\n| 子任务编号 | $n\\le $        | $q\\le $        | $\\sum m\\le $     | $a_i,p_i \\le $ | 特殊性质       | 分值 |\n| ---------- | -------------- | -------------- | ---------------- | -------------- | -------------- | ---- |\n| $1$        | $20$           |                |                  | $60$           |                | $10$ |\n| $2$        | $120$          |                |                  | $60$           |                | $10$ |\n| $3$        | $5\\times 10^3$ | $5\\times 10^3$ | $2.5\\times 10^4$ | $5\\times 10^3$ |                | $20$ |\n| $4$        | $10^5$         | $10^5$         | $5\\times 10^5$   | $10^5$         |                | $20$ |\n| $5$        |                |                |                  |                | $m\\le 2$       | $10$ |\n| $6$        |                |                |                  |                | $a_i$ 互不相同 | $10$ |\n| $7$        | $10^6$         | $10^6$         | $5\\times 10^6$   | $10^6$         |                | $20$ |\n\n由于本题输入量较大，我们在下发文件中提供了 `fast_read.cpp` 可以选择使用（注意在 C++98 标准下可能无法编译通过）。\n\n保证时间限制达到了没有使用特殊的读入优化的 std 的两倍。", "locale": "zh-CN"}}}
{"pid": "P10676", "type": "P", "difficulty": 1, "samples": [["bilibili\n20", "b20"], ["Luogu\n463", "L463"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "洛谷月赛"], "title": "『STA - R6』b20", "background": "我的 B 站 20 粉丝啦！", "description": "小 A 在各种平台都很活跃，大家经常通过祂在各种平台的粉丝数来称呼祂。\n\n具体地，取出网站名字的第一个字母并拼接上粉丝数量，即得到对应称呼。例如，小 A 在 Bilibili 有 $20$ 粉丝，就称其为 `B20`，小 A 在 wikidot 有 $0$ 粉丝，就称其为 `w0`。\n\n现在，给定小 A 在活跃的网站名字和粉丝数量，输出其对应称呼。", "inputFormat": "第一行一个字符串表示网站名称。\n\n第二行一个非负整数表示粉丝数。", "outputFormat": "一行，表示对应称呼。", "hint": "对于 $30\\%$ 的数据，保证网站名为 `bilibili`。\n\n对于全部数据，网站名称长度不超过 $20$ 且仅含英文字母，粉丝数是不超过 $10^7$ 的非负整数。", "locale": "zh-CN", "translations": {"en": {"title": "『STA - R6』b20", "background": "I've reached 20 followers on Bilibili!", "description": "Xiao A is active on various platforms, and people often refer to him by his follower count on each platform. \n\nSpecifically, take the first letter of the website name (preserving its case) and concatenate it with the follower count to form the corresponding alias. For example, if Xiao A has $20$ followers on Bilibili, the alias is `B20`; if he has $0$ followers on wikidot, the alias is `w0`.\n\nGiven the website name and follower count, output the corresponding alias.", "inputFormat": "The first line contains a string representing the website name.\n\nThe second line contains a non-negative integer representing the follower count.", "outputFormat": "Output the corresponding alias in one line.", "hint": "For $30\\%$ of the data, the website name is guaranteed to be bilibili.\n\nFor all data, the website name is a string of length at most $20$ containing only English letters, and the follower count is a non-negative integer not exceeding $10^7$.\n\nTranslated by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "『STA - R6』b20", "background": "我的 B 站 20 粉丝啦！", "description": "小 A 在各种平台都很活跃，大家经常通过祂在各种平台的粉丝数来称呼祂。\n\n具体地，取出网站名字的第一个字母并拼接上粉丝数量，即得到对应称呼。例如，小 A 在 Bilibili 有 $20$ 粉丝，就称其为 `B20`，小 A 在 wikidot 有 $0$ 粉丝，就称其为 `w0`。\n\n现在，给定小 A 在活跃的网站名字和粉丝数量，输出其对应称呼。", "inputFormat": "第一行一个字符串表示网站名称。\n\n第二行一个非负整数表示粉丝数。", "outputFormat": "一行，表示对应称呼。", "hint": "对于 $30\\%$ 的数据，保证网站名为 `bilibili`。\n\n对于全部数据，网站名称长度不超过 $20$ 且仅含英文字母，粉丝数是不超过 $10^7$ 的非负整数。", "locale": "zh-CN"}}}
{"pid": "P10677", "type": "P", "difficulty": 2, "samples": [["3 3\n###\n#A#\n###", "A"], ["3 4\n####\n#AB#\n####", "BA"], ["3 4\n####\n#AA#\n####", "A"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "『STA - R6』inkar-usi", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/n6w1yuda.png)\n\n（题目背景图片来自 Arcaea 曲绘，如有侵权，请告知出题人。）", "description": "给一个 $n\\times m$ 的字符矩阵，有些位置有障碍（记为字符 `#`），需要在矩阵上找出一条起始点任意的路径（可以重复经过某个格子），使得字典序最大。\n\n可以证明答案一定是有限的或者是由某个长度有限的字符串 $S$ 不断重复得到的。如果答案是有限的，直接输出之；如果答案是无限的，只需输出它的最短循环节。", "inputFormat": "第一行两个正整数 $n,m$。\n\n后 $n$ 行，每行一个长度为 $m$ 的字符串，描述矩阵的第 $n$ 行。", "outputFormat": "一行一个字符串，表示答案。", "hint": "**本题采用捆绑测试。**\n\n数据范围：\n- Subtask 1 (20pts)：字符矩阵中除了障碍就是字母 `A`。\n- Subtask 2 (30pts)：$n,m\\le 3$。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，$1\\le n,m\\le 10^3$，所有非障碍字符都是大写字母，矩阵至少有一个非障碍格。", "locale": "zh-CN", "translations": {"en": {"title": "『STA - R6』inkar-usi", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/n6w1yuda.png)\n\n(The background image is from the Arcaea song artwork. If there are any copyright issues, please contact the problem author.)", "description": "Given an $n \\times m$ character matrix where some positions are obstacles (denoted as `#`), find a path starting from any cell (revisiting cells is allowed) such that its lexicographical order is maximized.\n\nIt can be proven that the answer is either finite or formed by infinite repetitions of a finite string $S$. If the answer is finite, output it directly. If the answer is infinite, output its shortest repeating cycle.", "inputFormat": "The first line contains two positive integers $n$ and $m$.\n\nThe next $n$ lines each contain a string of length $m$, describing the corresponding row of the matrix.", "outputFormat": "Output a single string representing the answer.", "hint": "**This problem uses subtask scoring.**\n\nData Constraints:\n- Subtask 1 (20 points): All non-obstacle characters in the matrix are `A`.\n- Subtask 2 (30 points): $n, m \\le 3$.\n- Subtask 3 (50 points): No additional constraints.\n\nFor all test cases, $1 \\le n, m \\le 10^3$, all non-obstacle characters are uppercase letters, and the matrix contains at least one non-obstacle cell.\n\nTranslation by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "『STA - R6』inkar-usi", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/n6w1yuda.png)\n\n（题目背景图片来自 Arcaea 曲绘，如有侵权，请告知出题人。）", "description": "给一个 $n\\times m$ 的字符矩阵，有些位置有障碍（记为字符 `#`），需要在矩阵上找出一条起始点任意的路径（可以重复经过某个格子），使得字典序最大。\n\n可以证明答案一定是有限的或者是由某个长度有限的字符串 $S$ 不断重复得到的。如果答案是有限的，直接输出之；如果答案是无限的，只需输出它的最短循环节。", "inputFormat": "第一行两个正整数 $n,m$。\n\n后 $n$ 行，每行一个长度为 $m$ 的字符串，描述矩阵的第 $n$ 行。", "outputFormat": "一行一个字符串，表示答案。", "hint": "**本题采用捆绑测试。**\n\n数据范围：\n- Subtask 1 (20pts)：字符矩阵中除了障碍就是字母 `A`。\n- Subtask 2 (30pts)：$n,m\\le 3$。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，$1\\le n,m\\le 10^3$，所有非障碍字符都是大写字母，矩阵至少有一个非障碍格。", "locale": "zh-CN"}}}
{"pid": "P10678", "type": "P", "difficulty": 5, "samples": [["4\n2\n1 1\n3\n1 1 2\n5\n1 1 2 2 2\n7\n1 3 2 3 1 1 1", "2 1\n1 3\n3 2\n5 4\n4 2\n3 1\n3 5\n4 2\n3 2\n1 2\n5 4\n6 4\n7 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "Special Judge", "O2优化", "树的直径", "树论", "构造", "洛谷月赛"], "title": "『STA - R6』月", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/azq4hrv9.png)", "description": "对于一棵有 $n$ 个节点的树 $T$，定义其直径 $\\operatorname{diam}(T)$ 为任意两个节点之间距离的最大值。\n\n给定正整数 $n$ 和每个点 $i$ 的度数 $d_i$，你需要构造一棵树 $T^\\prime$，同时最小化 $\\operatorname{diam}(T^\\prime)$。\n\n保证至少存在一棵符合要求的树，若存在多个符合要求的答案，输出任意一个即可。", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n第一行一个正整数 $T$，代表测试数据组数。\n\n对于每组测试数据，\n\n- 第一行一个正整数 $n$。\n\n- 第二行 $n$ 个正整数，第 $i$ 个正整数表示点 $i$ 的度数 $d_i$。", "outputFormat": "对于每组测试数据，输出 $n - 1$ 行，每行两个正整数 $u_i, v_i$，表示构造出的树的边集。", "hint": "**【样例解释】**\n\n对于最后一组数据，所构造出的树如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3mjz6jmf.png)\n\n其直径等于点 $5,7$ 之间或点 $6,7$ 之间的距离，为 $4$。可以证明，不存在满足条件的直径小于 $4$ 的树。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据：\n\n- $2 \\le n \\le 2 \\times 10^5$；\n- $1 \\le T \\le 10^5$；\n- $\\sum n \\le 2 \\times 10^5$；\n- $1 \\le d_i < n$；\n- 保证至少存在一个合法的解。\n\n具体部分分分配如下：\n\n|Subtask 编号|数据范围|分值|\n|:--------:|:--------:|:--------:|\n|1|$n \\le 5$|$17$|\n|2|$d_i \\le 2$|$23$|\n|3|$d$ 中只含有两种本质不同的元素|$26$|\n|4|无特殊限制|$34$|", "locale": "zh-CN", "translations": {"en": {"title": "『STA - R6』Moon", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/azq4hrv9.png)\n", "description": "For a tree $T$ with $n$ nodes, its diameter $\\operatorname{diam}(T)$ is defined as the maximum distance between any two nodes.\n\nGiven a positive integer $n$ and the degree $d_i$ of each node $i$, construct a tree $T^\\prime$ that minimizes $\\operatorname{diam}(T^\\prime)$. It is guaranteed that at least one valid tree exists. If multiple valid answers exist, output any one of them.", "inputFormat": "**This problem contains multiple test cases within a single test point.**\n\nThe first line contains a positive integer $T$, representing the number of test cases.\n\nFor each test case:\n- The first line contains a positive integer $n$.\n- The second line contains $n$ positive integers, where the $i$-th integer denotes the degree $d_i$ of node $i$.", "outputFormat": "For each test case, output $n - 1$ lines. Each line contains two positive integers $u_i$ and $v_i$, representing the edges of the constructed tree.", "hint": "**Sample Explanation**\n\nFor the last test case in the sample input, the constructed tree is shown below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3mjz6jmf.png)\n\nIts diameter equals the distance between nodes $5$ and $7$ or nodes $6$ and $7$, which is $4$. It can be proven that no tree satisfying the conditions has a diameter smaller than $4$.\n\n**Data Constraints**\n\n**This problem uses subtask scoring.**\n\nFor $100\\%$ of the data:\n- $2 \\le n \\le 2 \\times 10^5$;\n- $1 \\le T \\le 10^5$;\n- $\\sum n \\le 2 \\times 10^5$;\n- $1 \\le d_i < n$;\n- It is guaranteed that at least one valid solution exists.\n\nDetailed subtask allocations are as follows:\n\n| Subtask ID | Data Range | Points |\n|:----------:|:----------:|:------:|\n| 1          | $n \\le 5$  | 17     |\n| 2          | $d_i \\le 2$| 23     |\n| 3          | $d$ contains only two distinct values | 26 |\n| 4          | No additional constraints | 34 |\n\nTranslation by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "『STA - R6』月", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/azq4hrv9.png)", "description": "对于一棵有 $n$ 个节点的树 $T$，定义其直径 $\\operatorname{diam}(T)$ 为任意两个节点之间距离的最大值。\n\n给定正整数 $n$ 和每个点 $i$ 的度数 $d_i$，你需要构造一棵树 $T^\\prime$，同时最小化 $\\operatorname{diam}(T^\\prime)$。\n\n保证至少存在一棵符合要求的树，若存在多个符合要求的答案，输出任意一个即可。", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n第一行一个正整数 $T$，代表测试数据组数。\n\n对于每组测试数据，\n\n- 第一行一个正整数 $n$。\n\n- 第二行 $n$ 个正整数，第 $i$ 个正整数表示点 $i$ 的度数 $d_i$。", "outputFormat": "对于每组测试数据，输出 $n - 1$ 行，每行两个正整数 $u_i, v_i$，表示构造出的树的边集。", "hint": "**【样例解释】**\n\n对于最后一组数据，所构造出的树如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3mjz6jmf.png)\n\n其直径等于点 $5,7$ 之间或点 $6,7$ 之间的距离，为 $4$。可以证明，不存在满足条件的直径小于 $4$ 的树。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据：\n\n- $2 \\le n \\le 2 \\times 10^5$；\n- $1 \\le T \\le 10^5$；\n- $\\sum n \\le 2 \\times 10^5$；\n- $1 \\le d_i < n$；\n- 保证至少存在一个合法的解。\n\n具体部分分分配如下：\n\n|Subtask 编号|数据范围|分值|\n|:--------:|:--------:|:--------:|\n|1|$n \\le 5$|$17$|\n|2|$d_i \\le 2$|$23$|\n|3|$d$ 中只含有两种本质不同的元素|$26$|\n|4|无特殊限制|$34$|", "locale": "zh-CN"}}}
{"pid": "P10679", "type": "P", "difficulty": 4, "samples": [["3\n1 2 3", "1.3333333"], ["3\n2 4 7", "2.5000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "O2优化", "枚举", "洛谷月赛"], "title": "『STA - R6』spec", "background": "", "description": "  定义一个实数 $\\alpha$ 的谱 $\\operatorname{Spec}(\\alpha)$ 是整数组成的一个无限长的序列 $\\lceil\\alpha\\rceil-1,\\lceil2\\alpha\\rceil-1,\\lceil3\\alpha\\rceil-1,\\cdots$。例如，$\\frac35$ 的谱的开头部分是 $0,1,1,2,2,3,4,\\cdots$。\n\n现在给定 $n$ 个整数 $x_1,\\cdots,x_n$，你要找到最大的实数 $\\alpha$，使得对于每个元素 $x_i$ 都有 $x_i$ 在 $\\operatorname{Spec}(\\alpha)$ 中出现过。\n", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $x_1,x_2,\\cdots,x_n$。", "outputFormat": "一行，表示最大的 $\\alpha$。你的答案与标准答案的绝对误差低于 $10^{-5}$ 即判为正确。", "hint": "**本题采用捆绑测试。**\n\n数据范围：\n- Subtask 0 (10pts)：$n,x_i\\le 100$。\n- Subtask 1 (15pts)：合法答案构成一段连续区间。\n- Subtask 2 (25pts)：每个 $x_i$ 都是 2 的非负整数次幂。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，$1\\le n,x_i\\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "『STA - R6』spec", "background": "", "description": "The **spectrum** $\\operatorname{Spec}(\\alpha)$ of a real number $\\alpha$ is an infinite sequence of integers defined as $\\lceil \\alpha \\rceil - 1, \\lceil 2\\alpha \\rceil - 1, \\lceil 3\\alpha \\rceil - 1, \\cdots$. For example, the beginning of the spectrum of $\\frac{3}{5}$ is $0, 1, 1, 2, 2, 3, 4, \\cdots$.\n\nGiven $n$ integers $x_1, x_2, \\ldots, x_n$, find the largest real number $\\alpha$ such that every $x_i$ appears in $\\operatorname{Spec}(\\alpha)$.", "inputFormat": "The first line contains a positive integer $n$.\n\nThe second line contains $n$ positive integers $x_1, x_2, \\ldots, x_n$.", "outputFormat": "Output the largest $\\alpha$. Your answer will be considered correct if its absolute error is less than $10^{-5}$.", "hint": "**This problem uses subtask scoring.**\n\nData Constraints:\n- Subtask 0 (10 points): $n, x_i \\le 100$.\n- Subtask 1 (15 points): Valid answers form a continuous interval.\n- Subtask 2 (25 points): Every $x_i$ is a non-negative integer power of 2.\n- Subtask 3 (50 points): No additional constraints.\n\nFor all test cases, $1 \\le n, x_i \\le 1000$.\n\nTranslation by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "『STA - R6』spec", "background": "", "description": "  定义一个实数 $\\alpha$ 的谱 $\\operatorname{Spec}(\\alpha)$ 是整数组成的一个无限长的序列 $\\lceil\\alpha\\rceil-1,\\lceil2\\alpha\\rceil-1,\\lceil3\\alpha\\rceil-1,\\cdots$。例如，$\\frac35$ 的谱的开头部分是 $0,1,1,2,2,3,4,\\cdots$。\n\n现在给定 $n$ 个整数 $x_1,\\cdots,x_n$，你要找到最大的实数 $\\alpha$，使得对于每个元素 $x_i$ 都有 $x_i$ 在 $\\operatorname{Spec}(\\alpha)$ 中出现过。\n", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $x_1,x_2,\\cdots,x_n$。", "outputFormat": "一行，表示最大的 $\\alpha$。你的答案与标准答案的绝对误差低于 $10^{-5}$ 即判为正确。", "hint": "**本题采用捆绑测试。**\n\n数据范围：\n- Subtask 0 (10pts)：$n,x_i\\le 100$。\n- Subtask 1 (15pts)：合法答案构成一段连续区间。\n- Subtask 2 (25pts)：每个 $x_i$ 都是 2 的非负整数次幂。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，$1\\le n,x_i\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P10680", "type": "P", "difficulty": 5, "samples": [["5 3\n4 8 2 0 7\n2 1 2\n1 1 9\n2 2 1", "2\n6"], ["8 6\n1 2 3 4 5 6 7 8\n2 1 3\n1 4 1\n1 7 3\n2 1 3\n1 2 100\n2 2 2", "0\n3\n93"], ["9 5\n1 0 2 0 4 1 3 2 8\n2 2 3\n2 1 3\n1 5 1\n1 6 4\n2 4 2", "2\n1\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "ST 表", "根号分治", "COTS（克罗地亚）"], "title": "[COTS 2024] 双双决斗 Dvoboj", "background": "译自 [Izborne Pripreme 2024 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2024/) D1T1。$\\texttt{2s,1G}$。\n\n> Two pharaonic yellow lines turned into an eye...", "description": "Jusuf 手里有 $N$ 张卡牌，从左到右编号为 $1$ 到 $N$。每张卡牌的力量为 $p_i$。由于 Jusuf 即将参加比赛，他想要在脑中想象战斗。有时候，他也会更改卡牌的力量值。Jusuf 总共会做 $Q$ 次操作，每个操作属于以下两种类型之一：\n\n1. `1 i r`：Jusuf 将位于位置 $i$ 的卡牌的力量设为 $r$，即 $p_i\\gets r$。\n\n2. `2 l k`：Jusuf 在脑中想象一场战斗。这场战斗使用从第 $l,l+1,\\cdots,l + 2^k − 1$ 张，共 $2^k$ 张卡牌。\n\n    战斗将会进行 $k$ 轮。每轮中，Jusuf 将第 $(2i-1)$ 和第 $2i$ 张卡牌分成一组（例如第 $1$ 张和第 $2$ 张卡牌为一组）。\n    \n    对于每组卡牌，Jusuf 比较它们的力量。不妨设两张卡牌的力量分别为 $A$ 和 $B$，力量更大的卡牌将获胜，且获胜卡牌的力量变为 $|A − B|$，另一张卡牌被移除。特别地，如果 $A=B$，则这场战斗的结果无法确定，将会随机一张卡牌获胜，力量变为 $0$。\n    \n    注意到，在 $k$ 轮后，只会剩下一张卡牌，Jusuf 想要知道此时它的力量大小。\n\n由于 Jusuf 只是在脑中想象战斗，所以实际上牌的数量不会改变，$p_i$ 也不会改变。\n", "inputFormat": "第一行，两个正整数 $N,Q$，含义见题面。\n\n第二行，$n$ 个整数，第 $i$ 个整数表示 $p_i$。\n\n接下来 $Q$ 行，每行 $3$ 个正整数，描述一个操作。", "outputFormat": "对于每个操作 $2$，输出一行一个整数，表示所求的力量大小。", "hint": "\n#### 样例解释\n\n对于样例 $1$ 的第一个询问，有：\n\n$$(\\bold{\\textcolor{red}{4}},8,\\bold{\\textcolor{red}{2}},0)\\to (\\bold{\\textcolor{red}{4}},2)\\to(2)$$\n\n对于样例 $1$ 的第二个询问，有：\n\n$$ (\\bold{\\textcolor{red}{8}},2)\\to(6)$$\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $2\\le N\\le 200\\, 000$，$1\\le Q\\le 200\\, 000$；\n- $0\\le p_i\\le 10^9$；\n- $1\\le i\\le N$，$0\\le r\\le 10^9$；\n- $1\\le l\\le N$，$1\\le l+{2^k}-1\\le N$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$   | $11$    | $N, Q \\leq 1000$ |\n| $2$    | $13$    | $N=2^k$ |\n| $3$    | $16$    | $0\\le p_i,r\\le 1$ |\n| $4$    | $17$    | 不含修改操作 |\n| $5$    | $43$    | 无额外约束 |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2024] 双双决斗 Dvoboj", "background": "译自 [Izborne Pripreme 2024 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2024/) D1T1。$\\texttt{2s,1G}$。\n\n> Two pharaonic yellow lines turned into an eye...", "description": "Jusuf 手里有 $N$ 张卡牌，从左到右编号为 $1$ 到 $N$。每张卡牌的力量为 $p_i$。由于 Jusuf 即将参加比赛，他想要在脑中想象战斗。有时候，他也会更改卡牌的力量值。Jusuf 总共会做 $Q$ 次操作，每个操作属于以下两种类型之一：\n\n1. `1 i r`：Jusuf 将位于位置 $i$ 的卡牌的力量设为 $r$，即 $p_i\\gets r$。\n\n2. `2 l k`：Jusuf 在脑中想象一场战斗。这场战斗使用从第 $l,l+1,\\cdots,l + 2^k − 1$ 张，共 $2^k$ 张卡牌。\n\n    战斗将会进行 $k$ 轮。每轮中，Jusuf 将第 $(2i-1)$ 和第 $2i$ 张卡牌分成一组（例如第 $1$ 张和第 $2$ 张卡牌为一组）。\n    \n    对于每组卡牌，Jusuf 比较它们的力量。不妨设两张卡牌的力量分别为 $A$ 和 $B$，力量更大的卡牌将获胜，且获胜卡牌的力量变为 $|A − B|$，另一张卡牌被移除。特别地，如果 $A=B$，则这场战斗的结果无法确定，将会随机一张卡牌获胜，力量变为 $0$。\n    \n    注意到，在 $k$ 轮后，只会剩下一张卡牌，Jusuf 想要知道此时它的力量大小。\n\n由于 Jusuf 只是在脑中想象战斗，所以实际上牌的数量不会改变，$p_i$ 也不会改变。\n", "inputFormat": "第一行，两个正整数 $N,Q$，含义见题面。\n\n第二行，$n$ 个整数，第 $i$ 个整数表示 $p_i$。\n\n接下来 $Q$ 行，每行 $3$ 个正整数，描述一个操作。", "outputFormat": "对于每个操作 $2$，输出一行一个整数，表示所求的力量大小。", "hint": "\n#### 样例解释\n\n对于样例 $1$ 的第一个询问，有：\n\n$$(\\bold{\\textcolor{red}{4}},8,\\bold{\\textcolor{red}{2}},0)\\to (\\bold{\\textcolor{red}{4}},2)\\to(2)$$\n\n对于样例 $1$ 的第二个询问，有：\n\n$$ (\\bold{\\textcolor{red}{8}},2)\\to(6)$$\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $2\\le N\\le 200\\, 000$，$1\\le Q\\le 200\\, 000$；\n- $0\\le p_i\\le 10^9$；\n- $1\\le i\\le N$，$0\\le r\\le 10^9$；\n- $1\\le l\\le N$，$1\\le l+{2^k}-1\\le N$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$   | $11$    | $N, Q \\leq 1000$ |\n| $2$    | $13$    | $N=2^k$ |\n| $3$    | $16$    | $0\\le p_i,r\\le 1$ |\n| $4$    | $17$    | 不含修改操作 |\n| $5$    | $43$    | 无额外约束 |\n\n", "locale": "zh-CN"}}}
{"pid": "P10681", "type": "P", "difficulty": 6, "samples": [["2 2", "7"], ["3 3", "102"], ["15 20", "415131258"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "递推", "2024", "O2优化", "生成函数", "线性递推", "COTS（克罗地亚）"], "title": "[COTS 2024] 奇偶矩阵 Tablica", "background": "译自 [Izborne Pripreme 2024 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2024/) D1T2。$\\texttt{1s,1G}。$", "description": "考虑只包含 $0$ 和 $1$ 的 $N\\times M$ 矩阵 $A$。\n\n我们称满足以下条件的矩阵是好的：\n\n- $\\forall 1\\le i\\le N$，$\\displaystyle \\sum_{j=1}^M A_{i,j}\\in \\{1,2\\}$；\n- $\\forall 1\\le j\\le M$，$\\displaystyle \\sum_{i=1}^N A_{i,j}\\in \\{1,2\\}$。\n\n求出 $N$ 行 $M$ 列的好的矩阵的数量，对 $(10^9+7)$ 取模。\n\n", "inputFormat": "输入共一行两个正整数，即 $N,M$。", "outputFormat": "输出一行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xufx7ad6.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，$1\\le N,M\\le 3\\, 000$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $10$  | $N, M \\leq 6$   |\n| $2$  | $18$  | $N, M \\leq 50$  |\n| $3$  | $31$  | $N, M \\leq 200$ |\n| $4$  | $41$  | 无额外约束 |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2024] 奇偶矩阵 Tablica", "background": "译自 [Izborne Pripreme 2024 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2024/) D1T2。$\\texttt{1s,1G}。$", "description": "考虑只包含 $0$ 和 $1$ 的 $N\\times M$ 矩阵 $A$。\n\n我们称满足以下条件的矩阵是好的：\n\n- $\\forall 1\\le i\\le N$，$\\displaystyle \\sum_{j=1}^M A_{i,j}\\in \\{1,2\\}$；\n- $\\forall 1\\le j\\le M$，$\\displaystyle \\sum_{i=1}^N A_{i,j}\\in \\{1,2\\}$。\n\n求出 $N$ 行 $M$ 列的好的矩阵的数量，对 $(10^9+7)$ 取模。\n\n", "inputFormat": "输入共一行两个正整数，即 $N,M$。", "outputFormat": "输出一行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xufx7ad6.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，$1\\le N,M\\le 3\\, 000$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $10$  | $N, M \\leq 6$   |\n| $2$  | $18$  | $N, M \\leq 50$  |\n| $3$  | $31$  | $N, M \\leq 200$ |\n| $4$  | $41$  | 无额外约束 |\n\n", "locale": "zh-CN"}}}
{"pid": "P10682", "type": "P", "difficulty": 6, "samples": [["4 4\n1 2\n2 3\n3 4\n1 4", "8"], ["4 4\n1 3\n1 4\n2 3\n2 4", "16"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "线性代数", "线性基", "COTS（克罗地亚）"], "title": "[COTS 2024] 奇偶南瓜 Tikvani", "background": "译自 [Izborne Pripreme 2024 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2024/) D1T3。$\\texttt{0.5s,1G}$。", "description": "给定有向图 $G=(V,E)$，其中 $|V|=N,|E|=M$，满足 $\\forall (u,v)\\in E$，都有 $u\\lt v$。\n\n定义边的一种**着色方案**为一种给每条边分配 $0/1$ 权值的方式。记 $(u,v)$ 边权为 $w(u,v)$。\n\n定义节点 $(u,v)$ 的路径为一个序列 $(a_1,a_2,\\cdots,a_k)$，满足 $a_1=u,a_k=v$，且 $\\forall 1\\le i\\lt k$，都有 $(a_i,a_{i+1})\\in E$。定义路径的权值为其上所有边的权值之和，即 $\\displaystyle \\sum_{i=1}^{k-1} w(a_{i},a_{i+1})$。\n\n定义一种着色方案是好的，当且仅当对于每一对 $(u,v)$，都有 $(u,v)$ 间的所有路径的权值模 $2$ 后的余数相等。\n\n求出好的着色方案数，对 $(10^9+7)$ 取模。", "inputFormat": "第一行，两个正整数，$N,M$，含义见题面。\n\n接下来 $M$ 行，每行两个正整数 $u,v$，表示 $(u,v)\\in E$。", "outputFormat": "输出一行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：显然只有 $1,4$ 间有两条路径 $(1,2,3,4),(1,4)$。\n\n当 $w(1,4)=0$ 时，$(1,2,3,4)$ 路径上只能取 $0$ 或 $2$ 条边边权为 $1$，方案数为 $4$；\n\n当 $w(1,4)=1$ 时，$(1,2,3,4)$ 路径上只能取 $1$ 或 $3$ 条边边权为 $1$，方案数为 $4$。\n\n所以答案为 $8$。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 400$，$0\\le M\\le 400$；\n- $1\\le u\\lt v\\le n$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $21$  | $N \\leq 6$   |\n| $2$  | $20$  | $N \\leq 13$  |\n| $3$  | $37$  | $N, M \\leq 50$ |\n| $4$  | $22$  | 无额外约束 |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2024] 奇偶南瓜 Tikvani", "background": "译自 [Izborne Pripreme 2024 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2024/) D1T3。$\\texttt{0.5s,1G}$。", "description": "给定有向图 $G=(V,E)$，其中 $|V|=N,|E|=M$，满足 $\\forall (u,v)\\in E$，都有 $u\\lt v$。\n\n定义边的一种**着色方案**为一种给每条边分配 $0/1$ 权值的方式。记 $(u,v)$ 边权为 $w(u,v)$。\n\n定义节点 $(u,v)$ 的路径为一个序列 $(a_1,a_2,\\cdots,a_k)$，满足 $a_1=u,a_k=v$，且 $\\forall 1\\le i\\lt k$，都有 $(a_i,a_{i+1})\\in E$。定义路径的权值为其上所有边的权值之和，即 $\\displaystyle \\sum_{i=1}^{k-1} w(a_{i},a_{i+1})$。\n\n定义一种着色方案是好的，当且仅当对于每一对 $(u,v)$，都有 $(u,v)$ 间的所有路径的权值模 $2$ 后的余数相等。\n\n求出好的着色方案数，对 $(10^9+7)$ 取模。", "inputFormat": "第一行，两个正整数，$N,M$，含义见题面。\n\n接下来 $M$ 行，每行两个正整数 $u,v$，表示 $(u,v)\\in E$。", "outputFormat": "输出一行一个整数，表示答案对 $(10^9+7)$ 取模后的结果。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：显然只有 $1,4$ 间有两条路径 $(1,2,3,4),(1,4)$。\n\n当 $w(1,4)=0$ 时，$(1,2,3,4)$ 路径上只能取 $0$ 或 $2$ 条边边权为 $1$，方案数为 $4$；\n\n当 $w(1,4)=1$ 时，$(1,2,3,4)$ 路径上只能取 $1$ 或 $3$ 条边边权为 $1$，方案数为 $4$。\n\n所以答案为 $8$。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 400$，$0\\le M\\le 400$；\n- $1\\le u\\lt v\\le n$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $21$  | $N \\leq 6$   |\n| $2$  | $20$  | $N \\leq 13$  |\n| $3$  | $37$  | $N, M \\leq 50$ |\n| $4$  | $22$  | 无额外约束 |\n\n", "locale": "zh-CN"}}}
{"pid": "P10683", "type": "P", "difficulty": 6, "samples": [["2 0\n4 \n1 1 2 3\n1 2 3 3\n7\n1 1 1 1 2 3 4\n1 2 3 4 4 4 4", "2\n4"], ["3 1\n4\n1 1 2 3\n1 2 3 3\n4\n1 1 1 1\n1 2 3 3\n7\n1 1 1 1 2 3 4\n1 2 3 4 4 4 4", "2\n1\n2"], ["3 2\n4 \n1 1 2 3\n1 2 3 3\n4\n1 1 1 3\n1 2 3 3\n7\n1 1 1 2 3 4 5\n1 2 3 4 4 4 4", "3\n3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "二分图", "COTS（克罗地亚）"], "title": "[COTS 2024] 划分 Particija", "background": "译自 [Izborne Pripreme 2024 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2024/) D2T1。$\\texttt{1s,512M}$。", "description": "\n\n给定正整数 $ N $。\n\n集合 $ \\{1, 2, \\ldots, N\\} $ 的**划分**为由非空集合组成的集族，满足：\n- $\\forall 1\\le i\\le N$，$i$ 出现在**恰好一个**集合中。\n\n例如，$\\{\\{1,3\\},\\{2,4\\},\\{5\\}\\}$ 是集合 $ \\{1, 2, 3, 4, 5\\} $ 的一个划分。\n\n可以用数列 $ [x_1, x_2, \\ldots, x_N ]$ 来表示划分。当且仅当 $ x_i = x_j $ 时，$ i $ 和 $ j $ 在同一个集合中。上面提到的划分 $\\{\\{1,3\\},\\{2,4\\},\\{5\\}\\}$ 可以由数列 $[1, 2, 1, 2, 3]$ 或者 $[5, 1, 5, 1, 4]$ 表示。\n\nPatricija 拥有两个划分：第一个划分用数列 $ [a_1, a_2, \\ldots, a_N] $ 表示，第二个划分用数列 $ [b_1, b_2, \\ldots, b_N] $ 表示。\n\nPatricija 想知道以下问题的答案：如果她使用这两个划分中的集合，来构造集合 $ \\{1, 2, \\ldots, N\\} $ 的划分，至少需要多少个集合。\n\n\n给定参数 $k\\in \\{0,1,2\\}$，\n\n- 当 $k=0$ 时，你需要回答原问题的答案。\n- 当 $k=1$ 时，允许更改 $2N$ 个数字（$a_1,\\cdots,a_N,b_1,\\cdots,b_N$）中**至多**一个，**最小化**构造划分需要的最少集合数。\n- 当 $k=2$ 时，允许更改 $2N$ 个数字（$a_1,\\cdots,a_N,b_1,\\cdots,b_N$）中**至多**一个，**最大化**构造划分需要的最少集合数。\n\n请注意，你需要保证在你修改后，$\\forall 1\\le i\\le N$，$1\\le a_i,b_i\\le N$。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，两个整数 $T,k$，分别表示测试数据数量，以及参数。\n\n接下来依次描述 $T$ 组测试数据：\n\n对于每组测试数据，输入三行。\n\n第一行，一个正整数 $N$，含义见题面；\n\n第二行，$N$ 个正整数，依次表示 $a_1,a_2,\\cdots,a_N$；\n\n第三行，$N$ 个正整数，依次表示 $b_1,b_2,\\cdots,b_N$。\n\n", "outputFormat": "\n对于每组测试数据，输出一行一个整数，表示所求的答案。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：\n\n对于第一组数据，第一个划分为 $\\{\\{1,2\\},\\{3\\},\\{4\\}\\}$，第二个划分为 $\\{\\{1\\},\\{2\\},\\{3,4\\}\\}$。选取 $\\{1,2\\},\\{3,4\\}$ 即可。\n\n对于第二组数据，第一个划分为 $\\{\\{1,2,3,4\\},\\{5\\},\\{6\\},\\{7\\}\\}$，第二个划分为 $\\{\\{1\\},\\{2\\},\\{3\\},\\{4,5,6,7\\}\\}$。选取第一个划分或第二个划分即可。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le T\\le 200\\, 000$，$k\\in \\{0,1,2\\}$；\n- $1\\le a_i,b_i\\le N$；\n- $1\\le N,\\sum N\\le 200\\, 000$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $7$  | $k=0,N\\le 8,\\sum 2^N\\le 10^5$   |\n| $2$  | $23$  | $k=0$  |\n| $3$  | $15$  | $k=1,N\\le 1\\, 000,\\sum N^2\\le 10^6$ |\n| $4$  | $16$  | $k=1$ |\n| $5$  | $19$  | $k=2,N\\le 1\\, 000,\\sum N^2\\le 10^6$ |\n| $6$  | $20$  | $k=2$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2024] 划分 Particija", "background": "译自 [Izborne Pripreme 2024 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2024/) D2T1。$\\texttt{1s,512M}$。", "description": "\n\n给定正整数 $ N $。\n\n集合 $ \\{1, 2, \\ldots, N\\} $ 的**划分**为由非空集合组成的集族，满足：\n- $\\forall 1\\le i\\le N$，$i$ 出现在**恰好一个**集合中。\n\n例如，$\\{\\{1,3\\},\\{2,4\\},\\{5\\}\\}$ 是集合 $ \\{1, 2, 3, 4, 5\\} $ 的一个划分。\n\n可以用数列 $ [x_1, x_2, \\ldots, x_N ]$ 来表示划分。当且仅当 $ x_i = x_j $ 时，$ i $ 和 $ j $ 在同一个集合中。上面提到的划分 $\\{\\{1,3\\},\\{2,4\\},\\{5\\}\\}$ 可以由数列 $[1, 2, 1, 2, 3]$ 或者 $[5, 1, 5, 1, 4]$ 表示。\n\nPatricija 拥有两个划分：第一个划分用数列 $ [a_1, a_2, \\ldots, a_N] $ 表示，第二个划分用数列 $ [b_1, b_2, \\ldots, b_N] $ 表示。\n\nPatricija 想知道以下问题的答案：如果她使用这两个划分中的集合，来构造集合 $ \\{1, 2, \\ldots, N\\} $ 的划分，至少需要多少个集合。\n\n\n给定参数 $k\\in \\{0,1,2\\}$，\n\n- 当 $k=0$ 时，你需要回答原问题的答案。\n- 当 $k=1$ 时，允许更改 $2N$ 个数字（$a_1,\\cdots,a_N,b_1,\\cdots,b_N$）中**至多**一个，**最小化**构造划分需要的最少集合数。\n- 当 $k=2$ 时，允许更改 $2N$ 个数字（$a_1,\\cdots,a_N,b_1,\\cdots,b_N$）中**至多**一个，**最大化**构造划分需要的最少集合数。\n\n请注意，你需要保证在你修改后，$\\forall 1\\le i\\le N$，$1\\le a_i,b_i\\le N$。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，两个整数 $T,k$，分别表示测试数据数量，以及参数。\n\n接下来依次描述 $T$ 组测试数据：\n\n对于每组测试数据，输入三行。\n\n第一行，一个正整数 $N$，含义见题面；\n\n第二行，$N$ 个正整数，依次表示 $a_1,a_2,\\cdots,a_N$；\n\n第三行，$N$ 个正整数，依次表示 $b_1,b_2,\\cdots,b_N$。\n\n", "outputFormat": "\n对于每组测试数据，输出一行一个整数，表示所求的答案。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：\n\n对于第一组数据，第一个划分为 $\\{\\{1,2\\},\\{3\\},\\{4\\}\\}$，第二个划分为 $\\{\\{1\\},\\{2\\},\\{3,4\\}\\}$。选取 $\\{1,2\\},\\{3,4\\}$ 即可。\n\n对于第二组数据，第一个划分为 $\\{\\{1,2,3,4\\},\\{5\\},\\{6\\},\\{7\\}\\}$，第二个划分为 $\\{\\{1\\},\\{2\\},\\{3\\},\\{4,5,6,7\\}\\}$。选取第一个划分或第二个划分即可。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le T\\le 200\\, 000$，$k\\in \\{0,1,2\\}$；\n- $1\\le a_i,b_i\\le N$；\n- $1\\le N,\\sum N\\le 200\\, 000$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $7$  | $k=0,N\\le 8,\\sum 2^N\\le 10^5$   |\n| $2$  | $23$  | $k=0$  |\n| $3$  | $15$  | $k=1,N\\le 1\\, 000,\\sum N^2\\le 10^6$ |\n| $4$  | $16$  | $k=1$ |\n| $5$  | $19$  | $k=2,N\\le 1\\, 000,\\sum N^2\\le 10^6$ |\n| $6$  | $20$  | $k=2$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P10684", "type": "P", "difficulty": 7, "samples": [["5 2\nCPCPC\nPCCPC\n1 1 4\n1 1 2", "3\n4\n5"], ["5 0\nCPPCC\nPPCCP", "4"], ["10 7\nCCPPPCCPCP\nPPPCCCPCCC\n1 2 7\n2 1 4\n2 1 8\n1 1 9\n2 1 1\n1 2 7\n1 1 4", "8\n9\n10\n10\n9\n8\n7\n8"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "线段树", "2024", "O2优化", "COTS（克罗地亚）"], "title": "[COTS 2024] 分割 Segregacija", "background": "译自 [Izborne Pripreme 2024 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2024/) D2T2。$\\texttt{5s,512M}$。\n\n**请不要滥用本题评测。滥用本题评测将被封号。**", "description": "\nPero 有一个 $2$ 行 $N$ 列的矩阵，每个格子里有一个红球或蓝球。\n\nPero 想要重排矩阵中的球，使得所有蓝球位于矩阵的左上侧，所有红球位于右下侧。更为具体地说，重排后，不能存在一个红球位于某个蓝球的上方或左侧。\n\n为此，Pero 可以多次交换相邻的两个球。**两个球是相邻的当且仅当它们所在的格子有公共边。** Pero 想知道达到目标所需的最少交换次数。\n\n此外，Pero 会交换矩阵中的相邻两个球 $Q$ 次，并在每次变更后询问当前矩阵状态所需的最小交换次数。请帮助 Pero，输出初始矩阵下以及每次交换后所需的最小交换次数。", "inputFormat": "\n第一行，两个整数 $N,Q$，含义见题面。\n\n接下来两行，每行一个长度为 $N$ 的字符串，描述这个矩阵。其中 $\\texttt{C}$ 代表红球，$\\texttt{P}$ 代表蓝球。\n\n接下来 $Q$ 行，每行三个正整数 $t,x,y$，描述一次交换操作。\n\n- $t=1$ 时，表示交换 $(x,y),(x,y+1)$；\n- $t=2$ 时，表示交换 $(x,y),(x+1,y)$。\n\n保证交换的两个位置都在矩阵内。\n", "outputFormat": "\n输出 $(Q+1)$ 行，分别表示初始矩阵的答案和每次修改后的答案。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：对于初始状态，只需要依次交换 $(1,1),(2,1)$，$(1,3),(1,4)$，$(1,4),(2,4)$ 即可。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le  10^6$，$0\\le Q\\le 10^6$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $7$  | $N\\le 10$   |\n| $2$  | $11$  | 最多只有 $10$ 个 $\\texttt{C}$  |\n| $3$  | $17$  | $N,Q\\le 500$ |\n| $4$  | $10$  | $N,Q\\le 5\\, 000$ |\n| $5$  | $13$  | $N\\le 100\\, 000, Q\\le 100$ |\n| $6$  | $15$  | $t=2$ |\n| $7$  | $27$  | 无额外约束 |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2024] 分割 Segregacija", "background": "译自 [Izborne Pripreme 2024 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2024/) D2T2。$\\texttt{5s,512M}$。\n\n**请不要滥用本题评测。滥用本题评测将被封号。**", "description": "\nPero 有一个 $2$ 行 $N$ 列的矩阵，每个格子里有一个红球或蓝球。\n\nPero 想要重排矩阵中的球，使得所有蓝球位于矩阵的左上侧，所有红球位于右下侧。更为具体地说，重排后，不能存在一个红球位于某个蓝球的上方或左侧。\n\n为此，Pero 可以多次交换相邻的两个球。**两个球是相邻的当且仅当它们所在的格子有公共边。** Pero 想知道达到目标所需的最少交换次数。\n\n此外，Pero 会交换矩阵中的相邻两个球 $Q$ 次，并在每次变更后询问当前矩阵状态所需的最小交换次数。请帮助 Pero，输出初始矩阵下以及每次交换后所需的最小交换次数。", "inputFormat": "\n第一行，两个整数 $N,Q$，含义见题面。\n\n接下来两行，每行一个长度为 $N$ 的字符串，描述这个矩阵。其中 $\\texttt{C}$ 代表红球，$\\texttt{P}$ 代表蓝球。\n\n接下来 $Q$ 行，每行三个正整数 $t,x,y$，描述一次交换操作。\n\n- $t=1$ 时，表示交换 $(x,y),(x,y+1)$；\n- $t=2$ 时，表示交换 $(x,y),(x+1,y)$。\n\n保证交换的两个位置都在矩阵内。\n", "outputFormat": "\n输出 $(Q+1)$ 行，分别表示初始矩阵的答案和每次修改后的答案。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：对于初始状态，只需要依次交换 $(1,1),(2,1)$，$(1,3),(1,4)$，$(1,4),(2,4)$ 即可。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le  10^6$，$0\\le Q\\le 10^6$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $7$  | $N\\le 10$   |\n| $2$  | $11$  | 最多只有 $10$ 个 $\\texttt{C}$  |\n| $3$  | $17$  | $N,Q\\le 500$ |\n| $4$  | $10$  | $N,Q\\le 5\\, 000$ |\n| $5$  | $13$  | $N\\le 100\\, 000, Q\\le 100$ |\n| $6$  | $15$  | $t=2$ |\n| $7$  | $27$  | 无额外约束 |\n\n", "locale": "zh-CN"}}}
{"pid": "P10685", "type": "P", "difficulty": 6, "samples": [["3 5\n2 4\n7 3\n9 5\n3 2\n8 1\n10 2\n6 3\n1 3", "5"], ["5 1\n2 6\n3 7\n5 4\n1 10\n7 2\n8 27", "11"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "2024", "O2优化", "COTS（克罗地亚）"], "title": "[COTS 2024] 兔子 Zečevi", "background": "译自 [Izborne Pripreme 2024 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2024/) D2T3。$\\texttt{8s,512M}$。\n\n**请不要滥用本题评测。滥用本题评测将被封号。**", "description": "\n数轴上有 $N$ 只兔子，第 $i$ 只兔子位于 $x_i$，起初，第 $i$ 只兔子的能量为 $p_i$。\n\n每秒钟会发生如下的事件：\n\n- 若存在至少一只兔子的能量为 $0$，则过程结束。\n- 否则，每只兔子向右跳跃一个单位长度，同时能量减少 $1$。\n\n数轴上分布着 $M$ 根胡萝卜，第 $i$ 根胡萝卜位于位置 $y_i$，质量为 $t_i$ 千克。当某只兔子的位置上有胡萝卜时，它可以选择吃 $a$ 千克的胡萝卜，其中 $a\\in [0, y]$，其中 $y$ 为胡萝卜的质量。吃掉 $a$ 千克的胡萝卜后，兔子的能量增加 $a$，胡萝卜的质量减少 $a$。\n\n显然兔子一旦停止跳跃，就再也不会跳跃了。在最优的情况下，兔子最多能跳跃多少秒？", "inputFormat": "\n第一行，两个整数 $N,M$，含义见题面。\n\n接下来 $N$ 行，第 $i$ 行两个整数 $x_i,p_i$；\n\n接下来 $M$ 行，第 $i$ 行两个整数 $y_i,t_i$。\n", "outputFormat": "\n输出一行一个整数，表示最优情况下的答案。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：\n\n我们用二元组 $(x_i,p_i)$ 表示兔子的位置和能量。\n\n跳跃三次后，三只兔子的状态分别为 $(5,1),(10,0),(6,2)$。第二只兔子吃掉 $2$ 千克的胡萝卜，状态变为 $(5,1),(10,2),(6,2)$。\n\n接下来一次跳跃之后，三只兔子的状态分别为 $(6,0),(11,1),(7,1)$。第一只兔子吃掉 $3$ 千克胡萝卜，状态变为 $(6,3),(11,1),(7,1)$。\n\n接下来一次跳跃之后，三只兔子的状态分别为 $(7,2),(12,0),(8,0)$。由于第二只兔子吃不到胡萝卜，所以跳跃过程终止。\n\n可以证明这是最优的答案。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证： \n\n- $1\\le N,M\\le  10^5$；\n- $0\\le x_i,y_i\\le 10^9$；\n- $0\\le p_i,t_i\\le 10^9$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $9$  | $N=1$   |\n| $2$  | $12$  | $M=1$  |\n| $3$  | $26$  | $N,M\\le 1\\, 000$ |\n| $4$  | $34$  | $N,Q\\le 50\\, 000$ |\n| $5$  | $19$  | 无额外约束 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2024] 兔子 Zečevi", "background": "译自 [Izborne Pripreme 2024 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2024/) D2T3。$\\texttt{8s,512M}$。\n\n**请不要滥用本题评测。滥用本题评测将被封号。**", "description": "\n数轴上有 $N$ 只兔子，第 $i$ 只兔子位于 $x_i$，起初，第 $i$ 只兔子的能量为 $p_i$。\n\n每秒钟会发生如下的事件：\n\n- 若存在至少一只兔子的能量为 $0$，则过程结束。\n- 否则，每只兔子向右跳跃一个单位长度，同时能量减少 $1$。\n\n数轴上分布着 $M$ 根胡萝卜，第 $i$ 根胡萝卜位于位置 $y_i$，质量为 $t_i$ 千克。当某只兔子的位置上有胡萝卜时，它可以选择吃 $a$ 千克的胡萝卜，其中 $a\\in [0, y]$，其中 $y$ 为胡萝卜的质量。吃掉 $a$ 千克的胡萝卜后，兔子的能量增加 $a$，胡萝卜的质量减少 $a$。\n\n显然兔子一旦停止跳跃，就再也不会跳跃了。在最优的情况下，兔子最多能跳跃多少秒？", "inputFormat": "\n第一行，两个整数 $N,M$，含义见题面。\n\n接下来 $N$ 行，第 $i$ 行两个整数 $x_i,p_i$；\n\n接下来 $M$ 行，第 $i$ 行两个整数 $y_i,t_i$。\n", "outputFormat": "\n输出一行一个整数，表示最优情况下的答案。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释：\n\n我们用二元组 $(x_i,p_i)$ 表示兔子的位置和能量。\n\n跳跃三次后，三只兔子的状态分别为 $(5,1),(10,0),(6,2)$。第二只兔子吃掉 $2$ 千克的胡萝卜，状态变为 $(5,1),(10,2),(6,2)$。\n\n接下来一次跳跃之后，三只兔子的状态分别为 $(6,0),(11,1),(7,1)$。第一只兔子吃掉 $3$ 千克胡萝卜，状态变为 $(6,3),(11,1),(7,1)$。\n\n接下来一次跳跃之后，三只兔子的状态分别为 $(7,2),(12,0),(8,0)$。由于第二只兔子吃不到胡萝卜，所以跳跃过程终止。\n\n可以证明这是最优的答案。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证： \n\n- $1\\le N,M\\le  10^5$；\n- $0\\le x_i,y_i\\le 10^9$；\n- $0\\le p_i,t_i\\le 10^9$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $9$  | $N=1$   |\n| $2$  | $12$  | $M=1$  |\n| $3$  | $26$  | $N,M\\le 1\\, 000$ |\n| $4$  | $34$  | $N,Q\\le 50\\, 000$ |\n| $5$  | $19$  | 无额外约束 |\n", "locale": "zh-CN"}}}
{"pid": "P10686", "type": "P", "difficulty": 4, "samples": [["3 3\n0<1\n1<2\n2<0\n3 5\n0<1\n0>1\n1<2\n1>2\n0<2\n4 4\n0<1\n0>1\n2<3\n2>3\n1 0", "Can not determine\nPlayer 1 can be determined to be the judge after 4 lines\nImpossible\nPlayer 0 can be determined to be the judge after 0 lines\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["并查集", "O2优化"], "title": "Rochambeau", "background": "", "description": "$N$ children are playing Rochambeau (scissors-rock-cloth) game with you. One of them is the judge. The rest children are divided into three groups (it is possible that some group is empty). You don’t know who is the judge, or how the children are grouped. Then the children start playing Rochambeau game for M rounds. Each round two children are arbitrarily selected to play Rochambeau for one once, and you will be told the outcome while not knowing which gesture the children presented. It is known that the children in the same group would present the same gesture (hence, two children in the same group always get draw when playing) and different groups for different gestures. The judge would present gesture randomly each time, hence no one knows what gesture the judge would present. Can you guess who is the judge after after the game ends? If you can, after how many rounds can you find out the judge at the earliest?", "inputFormat": "Input contains multiple test cases. Each test case starts with two integers $N$ and $M (1 \\le N \\le 500, 0 \\le M \\le 2,000)$ in one line, which are the number of children and the number of rounds. Following are M lines, each line contains two integers in $[0, N)$ separated by one symbol. The two integers are the IDs of the two children selected to play Rochambeau for this round. The symbol may be “=”, “>” or “<”, referring to a draw, that first child wins and that second child wins respectively.", "outputFormat": "There is only one line for each test case. If the judge can be found, print the ID of the judge, and the least number of rounds after which the judge can be uniquely determined. If the judge can not be found, or the outcomes of the M rounds of game are inconsistent, print the corresponding message.", "hint": "", "locale": "en", "translations": {"en": {"title": "Rochambeau", "background": "", "description": "$N$ children are playing Rochambeau (scissors-rock-cloth) game with you. One of them is the judge. The rest children are divided into three groups (it is possible that some group is empty). You don’t know who is the judge, or how the children are grouped. Then the children start playing Rochambeau game for M rounds. Each round two children are arbitrarily selected to play Rochambeau for one once, and you will be told the outcome while not knowing which gesture the children presented. It is known that the children in the same group would present the same gesture (hence, two children in the same group always get draw when playing) and different groups for different gestures. The judge would present gesture randomly each time, hence no one knows what gesture the judge would present. Can you guess who is the judge after after the game ends? If you can, after how many rounds can you find out the judge at the earliest?", "inputFormat": "Input contains multiple test cases. Each test case starts with two integers $N$ and $M (1 \\le N \\le 500, 0 \\le M \\le 2,000)$ in one line, which are the number of children and the number of rounds. Following are M lines, each line contains two integers in $[0, N)$ separated by one symbol. The two integers are the IDs of the two children selected to play Rochambeau for this round. The symbol may be “=”, “>” or “<”, referring to a draw, that first child wins and that second child wins respectively.", "outputFormat": "There is only one line for each test case. If the judge can be found, print the ID of the judge, and the least number of rounds after which the judge can be uniquely determined. If the judge can not be found, or the outcomes of the M rounds of game are inconsistent, print the corresponding message.", "hint": "", "locale": "en"}, "zh-CN": {"title": "Rochambeau", "background": "", "description": "$N$ 个小朋友（编号为 $0,1,2,…,N−1$）一起玩石头剪子布游戏。\n\n其中一人为裁判，其余的人被分为三个组（有可能有一些组是空的），第一个组的小朋友只能出石头，第二个组的小朋友只能出剪子，第三个组的小朋友只能出布，而裁判可以使用任意手势。\n\n你不知道谁是裁判，也不知道小朋友们是怎么分组的。\n\n然后，孩子们开始玩游戏，游戏一共进行 $M$\n 轮，每轮从 $N$ 个小朋友中选出两个小朋友进行猜拳。\n\n你将被告知两个小朋友猜拳的胜负结果，但是你不会被告知两个小朋友具体使用了哪种手势。\n\n比赛结束后，你能根据这些结果推断出裁判是谁吗？\n\n如果可以的话，你最早在第几轮可以找到裁判？", "inputFormat": "输入可能包含多组测试用例。\n\n每组测试用例第一行包含两个整数 $N$ 和 $M$。\n\n接下来 $M$ 行，每行包含两个整数 $a,b$，中间夹着一个符号(`>`,`=`,`<`)，表示一轮猜拳的结果。\n\n两个整数为小朋友的编号，`a>b` 表示 $a$ 赢了 $b$，`a=b` 表示 $a$ 和 $b$ 平手，`a<b` 表示 $a$ 输给了 $b$。", "outputFormat": "每组测试用例输出一行结果。\n\n+ 如果有且仅有一个人可能是裁判，则输出 `Player x can be determined to be the judge after y lines`，其中 $x$ 为裁判编号，$y$ 为确定裁判的最少轮数。\n\n+ 如果无法确定裁判是谁，即裁判的人选多于 $1$ 个，则输出 `Can not determine`。\n\n+ 如果在仅有一个裁判的情况下无法完成所有回合，则输出 `Impossible`。", "hint": "$1 \\le N \\le 500$，$1 \\le M \\le 2000$。", "locale": "zh-CN"}}}
{"pid": "P10687", "type": "P", "difficulty": 5, "samples": [["2 1 1\n1 2 no\n2 1 no\n3 2 1\n1 1 yes\n2 2 yes\n3 3 yes\n2 2 1\n1 2 yes\n2 3 no\n5 4 3\n1 2 yes\n1 3 no\n4 5 yes\n5 6 yes\n6 7 no\n0 0 0", "no\nno\n1\n2\nend\n3\n4\n5\n6\nend"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["并查集", "背包 DP"], "title": "True Liars", "background": "", "description": "After having drifted about in a small boat for a couple of days, Akira Crusoe Maeda was finally cast ashore on a foggy island. Though he was exhausted and despaired, he was still fortunate to remember a legend of the foggy island, which he had heard from patriarchs in his childhood. This must be the island in the legend. In the legend, two tribes have inhabited the island, one is divine and the other is devilish, once members of the divine tribe bless you, your future is bright and promising, and your soul will eventually go to Heaven, in contrast, once members of the devilish tribe curse you, your future is bleak and hopeless, and your soul will eventually fall down to Hell.\n\nIn order to prevent the worst-case scenario, Akira should distinguish the devilish from the divine. But how? They looked exactly alike and he could not distinguish one from the other solely by their appearances. He still had his last hope, however. The members of the divine tribe are truth-tellers, that is, they always tell the truth and those of the devilish tribe are liars, that is, they always tell a lie.\n\nHe asked some of them whether or not some are divine. They knew one another very much and always responded to him \"faithfully\" according to their individual natures (i.e., they always tell the truth or always a lie). He did not dare to ask any other forms of questions, since the legend says that a devilish member would curse a person forever when he did not like the question. He had another piece of useful informationf the legend tells the populations of both tribes. These numbers in the legend are trustworthy since everyone living on this island is immortal and none have ever been born at least these millennia.\n\nYou are a good computer programmer and so requested to help Akira by writing a program that classifies the inhabitants according to their answers to his inquiries.", "inputFormat": "The input consists of multiple data sets, each in the following format :\n\n```\nn p1 p2\nxl yl a1\nx2 y2 a2\n...\nxi yi ai\n...\nxn yn an\n```\n\nThe first line has three non-negative integers n, p1, and p2. n is the number of questions Akira asked. pl and p2 are the populations of the divine and devilish tribes, respectively, in the legend. Each of the following n lines has two integers xi, yi and one word ai. xi and yi are the identification numbers of inhabitants, each of which is between 1 and p1 + p2, inclusive. ai is either yes, if the inhabitant xi said that the inhabitant yi was a member of the divine tribe, or no, otherwise. Note that xi and yi can be the same number since \"are you a member of the divine tribe?\" is a valid question. Note also that two lines may have the same x's and y's since Akira was very upset and might have asked the same question to the same one more than once.\n\nYou may assume that n is less than 1000 and that p1 and p2 are less than 300. A line with three zeros, i.e., 0 0 0, represents the end of the input. You can assume that each data set is consistent and no contradictory answers are included.", "outputFormat": "For each data set, if it includes sufficient information to classify all the inhabitants, print the identification numbers of all the divine ones in ascending order, one in a line. In addition, following the output numbers, print end in a line. Otherwise, i.e., if a given data set does not include sufficient information to identify all the divine members, print no in a line.", "hint": "", "locale": "en", "translations": {"en": {"title": "True Liars", "background": "", "description": "After having drifted about in a small boat for a couple of days, Akira Crusoe Maeda was finally cast ashore on a foggy island. Though he was exhausted and despaired, he was still fortunate to remember a legend of the foggy island, which he had heard from patriarchs in his childhood. This must be the island in the legend. In the legend, two tribes have inhabited the island, one is divine and the other is devilish, once members of the divine tribe bless you, your future is bright and promising, and your soul will eventually go to Heaven, in contrast, once members of the devilish tribe curse you, your future is bleak and hopeless, and your soul will eventually fall down to Hell.\n\nIn order to prevent the worst-case scenario, Akira should distinguish the devilish from the divine. But how? They looked exactly alike and he could not distinguish one from the other solely by their appearances. He still had his last hope, however. The members of the divine tribe are truth-tellers, that is, they always tell the truth and those of the devilish tribe are liars, that is, they always tell a lie.\n\nHe asked some of them whether or not some are divine. They knew one another very much and always responded to him \"faithfully\" according to their individual natures (i.e., they always tell the truth or always a lie). He did not dare to ask any other forms of questions, since the legend says that a devilish member would curse a person forever when he did not like the question. He had another piece of useful informationf the legend tells the populations of both tribes. These numbers in the legend are trustworthy since everyone living on this island is immortal and none have ever been born at least these millennia.\n\nYou are a good computer programmer and so requested to help Akira by writing a program that classifies the inhabitants according to their answers to his inquiries.", "inputFormat": "The input consists of multiple data sets, each in the following format :\n\n```\nn p1 p2\nxl yl a1\nx2 y2 a2\n...\nxi yi ai\n...\nxn yn an\n```\n\nThe first line has three non-negative integers n, p1, and p2. n is the number of questions Akira asked. pl and p2 are the populations of the divine and devilish tribes, respectively, in the legend. Each of the following n lines has two integers xi, yi and one word ai. xi and yi are the identification numbers of inhabitants, each of which is between 1 and p1 + p2, inclusive. ai is either yes, if the inhabitant xi said that the inhabitant yi was a member of the divine tribe, or no, otherwise. Note that xi and yi can be the same number since \"are you a member of the divine tribe?\" is a valid question. Note also that two lines may have the same x's and y's since Akira was very upset and might have asked the same question to the same one more than once.\n\nYou may assume that n is less than 1000 and that p1 and p2 are less than 300. A line with three zeros, i.e., 0 0 0, represents the end of the input. You can assume that each data set is consistent and no contradictory answers are included.", "outputFormat": "For each data set, if it includes sufficient information to classify all the inhabitants, print the identification numbers of all the divine ones in ascending order, one in a line. In addition, following the output numbers, print end in a line. Otherwise, i.e., if a given data set does not include sufficient information to identify all the divine members, print no in a line.", "hint": "", "locale": "en"}, "zh-CN": {"title": "True Liars", "background": null, "description": "在小船上漂流了几天后，Akira Crusoe Maeda 终于被抛到了一个雾蒙蒙的岛上。尽管他疲惫不堪，绝望不已，但他仍然幸运地记得他童年时从族长那里听到的雾岛传说。这一定是传说中的岛屿。传说中有两个部落居住在岛上，一个是神圣的，另一个是邪恶的，一旦神圣部落的成员保佑你，你的未来就会光明有希望，你的灵魂最终会去天堂，相比之下，一旦邪恶部落的成员诅咒你，你们的未来就会黯淡无望，你的心灵最终会坠入地狱。\n\n为了防止最坏的情况发生，Akira Crusoe Maeda 应该区分恶魔和神灵。但是怎么做？他们看起来完全一样，他无法仅凭外表区分他们。然而，他还有最后的希望。神圣部落的成员是说实话的人，也就是说，他们总是说实话，而邪恶部落的成员则是骗子，也就是他们总是撒谎。\n\n他问他们中的一些人是否有些是神圣的。他们彼此非常了解，总是根据自己的个性“忠实地”回应他（即，他们总是说实话或撒谎）。他不敢问任何其他形式的问题，因为传说中，当一个恶魔成员不喜欢这个问题时，他会永远诅咒一个人。他有另一条有用的信息，传说告诉了两个部落的人口。传说中的这些数字是值得信赖的，因为生活在这个岛上的每个人都是不朽的，至少在这几千年里没有人出生过。\n\n你是一名优秀的计算机程序员，因此被要求帮助 Akira 编写一个程序，根据居民对他的询问的回答对他们进行分类。", "inputFormat": "输入由多行组成，每个测试点的格式如下：\n```\nn p1 p2\nx1 y1 a1\nx2 y2 a2\n...\nxi yi ai\n...\nxn yn an\n```\n第一行有三个非负整数 $n$、$p_1$ 和 $p_2$。$n$ 是 Akira 提出的问题数量。$p_1$ 和 $p_2$ 分别是传说中神圣部落和恶魔部落的人口。接下来的 $n$ 行中的每一行都有两个整数 $x_i$、$y_i$ 和一个单词 $a_i$，表示询问了居民 $x_i$，问题是：“居民 $y_i$ 是神圣部落的人吗？”。$x_i$ 和 $y_i$ 是居民的识别号，每个识别号在 $1$ 和 $p_1+p_2$（包括 $1$ 和 $p_1+p_2$ ）之间。$a_i$ 要么是 `yes`，要么是 `no`。请注意，$x_i$ 和 $y_i$ 可以是同一个数字，因为“你是神族的成员吗？”是一个有效的问题。还要注意，两行可能有相同的 $x$ 和 $y$ ，因为 Akira 非常沮丧，可能不止一次向同一行问同一个问题。\n\n你可以假设 $n$ 小于 $1000$，$p_1$ 和 $p_2$ 小于 $300$。如果一行有三个零，即 `0 0 0`，表示输入的结束。你可以假设每个测试点都是一致的，没有矛盾的答案。", "outputFormat": "对于每个数据集，如果它包含足够的信息来对所有居民进行分类，请按升序输出所有神圣居民的识别号，一行一个。此外，在输出数字之后，打印 `end` 于最后一行。否则，即如果给定的数据集不包括足够的信息来识别所有神圣的成员，请在最后一行中打印 `no`。", "hint": "对于 $100\\%$ 的数据，每个数据点内最多 10 组数据，$n<1000$，$p_1,p_2<300$，$1\\le x_i, y_i \\le p_1+p_2$。", "locale": "zh-CN"}}}
{"pid": "P10688", "type": "P", "difficulty": 4, "samples": [["4\n0 77\n1 51\n1 33\n2 69\n4 \n0 20523\n1 19243\n1 38900\n0 31492", "77 33 69 51\n31492 20523 38900 19243"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "树状数组", "O2优化"], "title": "Buy Tickets", "background": "", "description": "> Railway tickets were difficult to buy around the Lunar New Year in China, so we must get up early and join a long queue…\n\nThe Lunar New Year was approaching, but unluckily the Little Cat still had schedules going here and there. Now, he had to travel by train to Mianyang, Sichuan Province for the winter camp selection of the national team of Olympiad in Informatics.\n\nIt was one o’clock a.m. and dark outside. Chill wind from the northwest did not scare off the people in the queue. The cold night gave the Little Cat a shiver. Why not find a problem to think about? That was none the less better than freezing to death!\n\nPeople kept jumping the queue. Since it was too dark around, such moves would not be discovered even by the people adjacent to the queue-jumpers. “If every person in the queue is assigned an integral value and all the information about those who have jumped the queue and where they stand after queue-jumping is given, can I find out the final order of people in the queue?” Thought the Little Cat.", "inputFormat": "There will be several test cases in the input. Each test case consists of N + 1 lines where N (1 ≤ N ≤ 200,000) is given in the first line of the test case. The next N lines contain the pairs of values Posi and Vali in the increasing order of i (1 ≤ i ≤ N). For each i, the ranges and meanings of Posi and Vali are as follows:\n\n- Posi ∈ [0, i − 1] — The i-th person came to the queue and stood right behind the Posi-th person in the queue. The booking office was considered the 0th person and the person at the front of the queue was considered the first person in the queue.\n_ Vali ∈ [0, 32767] — The i-th person was assigned the value Vali.\n\nThere no blank lines between test cases. Proceed to the end of input.", "outputFormat": "For each test cases, output a single line of space-separated integers which are the values of people in the order they stand in the queue.", "hint": "", "locale": "en", "translations": {"en": {"title": "Buy Tickets", "background": "", "description": "> Railway tickets were difficult to buy around the Lunar New Year in China, so we must get up early and join a long queue…\n\nThe Lunar New Year was approaching, but unluckily the Little Cat still had schedules going here and there. Now, he had to travel by train to Mianyang, Sichuan Province for the winter camp selection of the national team of Olympiad in Informatics.\n\nIt was one o’clock a.m. and dark outside. Chill wind from the northwest did not scare off the people in the queue. The cold night gave the Little Cat a shiver. Why not find a problem to think about? That was none the less better than freezing to death!\n\nPeople kept jumping the queue. Since it was too dark around, such moves would not be discovered even by the people adjacent to the queue-jumpers. “If every person in the queue is assigned an integral value and all the information about those who have jumped the queue and where they stand after queue-jumping is given, can I find out the final order of people in the queue?” Thought the Little Cat.", "inputFormat": "There will be several test cases in the input. Each test case consists of N + 1 lines where N (1 ≤ N ≤ 200,000) is given in the first line of the test case. The next N lines contain the pairs of values Posi and Vali in the increasing order of i (1 ≤ i ≤ N). For each i, the ranges and meanings of Posi and Vali are as follows:\n\n- Posi ∈ [0, i − 1] — The i-th person came to the queue and stood right behind the Posi-th person in the queue. The booking office was considered the 0th person and the person at the front of the queue was considered the first person in the queue.\n_ Vali ∈ [0, 32767] — The i-th person was assigned the value Vali.\n\nThere no blank lines between test cases. Proceed to the end of input.", "outputFormat": "For each test cases, output a single line of space-separated integers which are the values of people in the order they stand in the queue.", "hint": "", "locale": "en"}, "zh-CN": {"title": "Buy Tickets", "background": "", "description": "春节期间在中国买火车票很困难，所以我们必须早起并加入长队……  春节即将来临，但不幸的是，小猫仍然有安排要去各地。现在，他必须乘火车前往四川省绵阳，参加信息学奥林匹克国家队的冬令营选拔。  现在是凌晨一点，外面一片漆黑。来自西北的寒风并没有吓退排队的人群。寒冷的夜晚让小猫打了个寒颤。为什么不找个问题来思考呢？这总比冻死要好！  人们不断插队。由于周围太黑，这种行为即使是排在插队者旁边的人也无法发现。「如果队列中的每个人都被分配了一个整数值，并且给出了所有插队者的信息以及他们插队后的站位，我能否找出队列中人们的最终顺序？」小猫想道。", "inputFormat": "输入包含多个测试用例。每个测试用例由 $N + 1$ 行组成，其中 $N$ $(1 \\leq N \\leq 200,000)$ 在测试用例的第一行给出。接下来的 $N$ 行包含成对的值 $\\text{Posi}$ 和 $\\text{Vali}$，按 $i$ 的递增顺序排列 $(1 \\leq i \\leq N)$。对于每个 $i$，$\\text{Posi}$ 和 $\\text{Vali}$ 的范围和含义如下：  - $\\text{Posi} \\in [0, i - 1]$ — 第 $i$ 个人来到队列中，并站在队列中第 $\\text{Posi}$ 个人的后面。售票处被视为第 0 个人，队列最前面的人被视为第 1 个人。 - $\\text{Vali} \\in [0, 32767]$ — 第 $i$ 个人被分配了值 $\\text{Vali}$。  测试用例之间没有空行。处理到输入的末尾。", "outputFormat": "对于每个测试用例，输出一行以空格分隔的整数，这些整数是队列中人们按顺序站立的值。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10689", "type": "P", "difficulty": 6, "samples": [["5\n1\n2\n3\n4\n5\n2\nADD 2 4 1\nMIN 4 5", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "平衡树", "O2优化"], "title": "SuperMemo", "background": "", "description": "Your friend, Jackson is invited to a TV show called SuperMemo in which the participant is told to play a memorizing game. At first, the host tells the participant a sequence of numbers, $A_1, A_2, \\ldots A_n$. Then the host performs a series of operations and queries on the sequence which consists:\n\n  * `ADD x y D`: Add $D$ to each number in sub-sequence $A_x \\ldots A_y$. For example, performing \"ADD 2 4 1\" on $1, 2, 3, 4, 5$ results in $1, 3, 4, 5, 5$\n  * `REVERSE x y`: reverse the sub-sequence ${A_x \\ldots A_y}$. For example, performing \"REVERSE 2 4\" on $1, 2, 3, 4, 5$ results in $1, 4, 3, 2, 5$\n  * `REVOLVE x y T`: rotate sub-sequence ${A_x \\ldots A_y}$ $T$ times. For example, performing \"REVOLVE 2 4 2\" on $1, 2, 3, 4, 5$ results in $1, 3, 4, 2, 5$\n  * `INSERT x P`: insert $P$ after $A_x$. For example, performing \"INSERT 2 4\" on $1, 2, 3, 4, 5$ results in $1, 2, 4, 3, 4, 5$\n  * `DELETE x`: delete $A_x$. For example, performing \"DELETE 2\" on $1, 2, 3, 4, 5$ results in $1, 3, 4, 5$\n  * `MIN x y`: query the participant what is the minimum number in sub-sequence $A_x \\ldots A_y$. For example, the correct answer to \"MIN 2 4\" on $1, 2, 3, 4, 5$ is $2$\n\nTo make the show more interesting, the participant is granted a chance to turn to someone else that means when Jackson feels difficult in answering a query he may call you for help. You task is to watch the TV show and write a program giving the correct answer to each query in order to assist Jackson whenever he calls.", "inputFormat": "The first line contains $n$ ($n \\leq 100000$).\n\nThe following $n$ lines describe the sequence.\n\nThen follows $M$ ($M \\leq 100000$), the numbers of operations and queries.\n\nThe following $M$ lines describe the operations and queries. ", "outputFormat": "For each \"MIN\" query, output the correct answer.", "hint": "", "locale": "en", "translations": {"en": {"title": "SuperMemo", "background": "", "description": "Your friend, Jackson is invited to a TV show called SuperMemo in which the participant is told to play a memorizing game. At first, the host tells the participant a sequence of numbers, $A_1, A_2, \\ldots A_n$. Then the host performs a series of operations and queries on the sequence which consists:\n\n  * `ADD x y D`: Add $D$ to each number in sub-sequence $A_x \\ldots A_y$. For example, performing \"ADD 2 4 1\" on $1, 2, 3, 4, 5$ results in $1, 3, 4, 5, 5$\n  * `REVERSE x y`: reverse the sub-sequence ${A_x \\ldots A_y}$. For example, performing \"REVERSE 2 4\" on $1, 2, 3, 4, 5$ results in $1, 4, 3, 2, 5$\n  * `REVOLVE x y T`: rotate sub-sequence ${A_x \\ldots A_y}$ $T$ times. For example, performing \"REVOLVE 2 4 2\" on $1, 2, 3, 4, 5$ results in $1, 3, 4, 2, 5$\n  * `INSERT x P`: insert $P$ after $A_x$. For example, performing \"INSERT 2 4\" on $1, 2, 3, 4, 5$ results in $1, 2, 4, 3, 4, 5$\n  * `DELETE x`: delete $A_x$. For example, performing \"DELETE 2\" on $1, 2, 3, 4, 5$ results in $1, 3, 4, 5$\n  * `MIN x y`: query the participant what is the minimum number in sub-sequence $A_x \\ldots A_y$. For example, the correct answer to \"MIN 2 4\" on $1, 2, 3, 4, 5$ is $2$\n\nTo make the show more interesting, the participant is granted a chance to turn to someone else that means when Jackson feels difficult in answering a query he may call you for help. You task is to watch the TV show and write a program giving the correct answer to each query in order to assist Jackson whenever he calls.", "inputFormat": "The first line contains $n$ ($n \\leq 100000$).\n\nThe following $n$ lines describe the sequence.\n\nThen follows $M$ ($M \\leq 100000$), the numbers of operations and queries.\n\nThe following $M$ lines describe the operations and queries. ", "outputFormat": "For each \"MIN\" query, output the correct answer.", "hint": "", "locale": "en"}, "zh-CN": {"title": "SuperMemo", "background": "", "description": "你的朋友 Jackson 被邀请参加一个名为 SuperMemo 的电视节目，参与者需要玩一个记忆游戏。首先，主持人会告诉参与者一个数字序列 $A_1, A_2, \\ldots A_n$。然后，主持人会对该序列进行一系列操作和查询，包括：\n\n  * `ADD x y D`：将 $D$ 加到子序列 $A_x \\ldots A_y$ 的每个数字上。例如，在 $1, 2, 3, 4, 5$ 上执行 \"ADD 2 4 1\" 后结果为 $1, 3, 4, 5, 5$。\n  * `REVERSE x y`：反转子序列 ${A_x \\ldots A_y}$。例如，在 $1, 2, 3, 4, 5$ 上执行 \"REVERSE 2 4\" 后结果为 $1, 4, 3, 2, 5$。\n  * `REVOLVE x y T`：旋转子序列 ${A_x \\ldots A_y}$ $T$ 次。例如，在 $1, 2, 3, 4, 5$ 上执行 \"REVOLVE 2 4 2\" 后结果为 $1, 3, 4, 2, 5$。\n  * `INSERT x P`：在 $A_x$ 之后插入 $P$。例如，在 $1, 2, 3, 4, 5$ 上执行 \"INSERT 2 4\" 后结果为 $1, 2, 4, 3, 4, 5$。\n  * `DELETE x`：删除 $A_x$。例如，在 $1, 2, 3, 4, 5$ 上执行 \"DELETE 2\" 后结果为 $1, 3, 4, 5$。\n  * `MIN x y`：询问参与者子序列 $A_x \\ldots A_y$ 中的最小数字是多少。例如，在 $1, 2, 3, 4, 5$ 上 \"MIN 2 4\" 的正确答案是 $2$。\n\n为了让节目更有趣，参与者被授予一次求助他人的机会，这意味着当 Jackson 在回答查询时感到困难时，他可以向你求助。你的任务是观看电视节目并编写程序，以便在 Jackson 需要时为每个查询提供正确答案。", "inputFormat": "第一行包含 $n$ ($n \\leq 100000$)。\n\n接下来的 $n$ 行描述了序列。\n\n然后是 $M$ ($M \\leq 100000$)，表示操作和查询的数量。\n\n接下来的 $M$ 行描述了操作和查询。", "outputFormat": "对于每个 \"MIN\" 查询，输出正确答案。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10690", "type": "P", "difficulty": 6, "samples": [["3 3\n1 4 3 \n0 1\n0 1\n4 3", "5\n7\n7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "分块"], "title": "Fotile 模拟赛 L", "background": "", "description": "FOTILE 得到了一个长为 $N$ 的序列 $A$，为了拯救地球，他希望知道某些区间内的最大的连续 $\\rm XOR$ 和。\n\n即对于一个询问，你需要求出\n\n$$\n\\max_{l\\le i\\le j\\le r}\\bigoplus_{k=i}^{j} a_k\n$$\n\n为了体现在线操作，对于一个询问 $(x,y)$：\n\n- $l = \\min ( ((x+{\\rm lastans}) \\bmod N)+1 , ((y+{\\rm lastans}) \\bmod N)+1)$.\n- $r = \\max ( ((x+{\\rm lastans}) \\bmod N)+1 , ((y+{\\rm lastans}) \\bmod N)+1)$.\n\n**其中 $\\rm lastans$ 是上次询问的答案，一开始为0。**", "inputFormat": "第一行两个整数 $N$ 和 $M$。\n\n第二行有 $N$ 个正整数，其中第 $i$ 个数为 $A_i$，有多余空格。\n\n后 $M$ 行每行两个数 $x$, $y$ 表示一对询问。\n", "outputFormat": "共 $M$ 行，第 $i$ 行一个正整数表示第 $i$ 个询问的结果。\n", "hint": "对于所有的测试数据满足 $N=12000$，$M=6000$，$x$，$y$，$a_i$ 均在 signed int 范围内。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Fotile 模拟赛 L", "background": "", "description": "FOTILE 得到了一个长为 $N$ 的序列 $A$，为了拯救地球，他希望知道某些区间内的最大的连续 $\\rm XOR$ 和。\n\n即对于一个询问，你需要求出\n\n$$\n\\max_{l\\le i\\le j\\le r}\\bigoplus_{k=i}^{j} a_k\n$$\n\n为了体现在线操作，对于一个询问 $(x,y)$：\n\n- $l = \\min ( ((x+{\\rm lastans}) \\bmod N)+1 , ((y+{\\rm lastans}) \\bmod N)+1)$.\n- $r = \\max ( ((x+{\\rm lastans}) \\bmod N)+1 , ((y+{\\rm lastans}) \\bmod N)+1)$.\n\n**其中 $\\rm lastans$ 是上次询问的答案，一开始为0。**", "inputFormat": "第一行两个整数 $N$ 和 $M$。\n\n第二行有 $N$ 个正整数，其中第 $i$ 个数为 $A_i$，有多余空格。\n\n后 $M$ 行每行两个数 $x$, $y$ 表示一对询问。\n", "outputFormat": "共 $M$ 行，第 $i$ 行一个正整数表示第 $i$ 个询问的结果。\n", "hint": "对于所有的测试数据满足 $N=12000$，$M=6000$，$x$，$y$，$a_i$ 均在 signed int 范围内。", "locale": "zh-CN"}}}
{"pid": "P10691", "type": "P", "difficulty": 2, "samples": [["3\n356\n114\n514\n", "-wxr-xrw-\n--x--xr--\nr-x--xr--\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "O2优化", "陕西", "省赛/邀请赛"], "title": "[SNCPC2024] chmod", "background": "", "description": "$\\text{chmod}$ 是一个用于更改文件或目录权限的命令，它是 Linux 和其他类 Unix 操作系统中的常用命令之一。$\\text{chmod}$ 命令允许用户为文件或目录设置不同的权限，以控制谁可以读取，写入或执行这些文件。\n\n在 Linux 系统中，每个文件或目录都有与之相关联的权限, 这些权限决定了谁可以对文件进行何种操作。用户被分为三类：所有者（owner），所属组（group）和其他人（others）。每类用户又都有读 （r），写（w）和执行（x）三种权限。这 $9$ 种权限可以分别指定。我们称**权限字符串**是一个长度为 $9$ 的字符串，按顺序分别对应以上提到的 $9$ 种权限，如果具有此权限，则为 $\\text{r}$，$\\text{w}$，$\\text{x}$ 中相应的那一个，否则为 $\\text{-}$。\n\n例如**权限字符串** $\\text{rwxr-x-}\\text{-x}$ 说明，该文件对于所有者具有全部权限，对于所属组用户只具有读和执行权限，而对于其他人只具有执行权限。\n\n使用 $\\text{chmod}$ 命令时，你可以提供模式串来修改权限。在本题，我们只考虑长度为 $3$ 的由不大于 $7$ 的数字组成的模式串，其三个数字从左往右依次代表所有者（owner），所属组（group）和其他人（others）的权限。对于每个数字，其最低三个二进制位从高向低分别表示了该类用户是否具有读（r），写（w）和执行（x）权限。\n\n例如：执行 $\\text{chmod 760 file.txt}$ 后, 表示文件的**权限字符串**为 $\\text{rwxrw-}\\text{-}\\text{-}\\text{-}$。\n\n给出若干合法的模式串，每次读入一条模式串后，你需要输出修改后文件的**权限字符串**。", "inputFormat": "第一行一个正整数 $T$ ($1 \\le T \\le 100$)，表示数据组数。\n\n接下来 $T$ 行，每行一条 $\\text{chmod}$ 模式串。", "outputFormat": "共 $T$ 行，表示模式串对应的**权限字符串**。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNCPC2024] chmod", "background": "", "description": "$\\text{chmod}$ 是一个用于更改文件或目录权限的命令，它是 Linux 和其他类 Unix 操作系统中的常用命令之一。$\\text{chmod}$ 命令允许用户为文件或目录设置不同的权限，以控制谁可以读取，写入或执行这些文件。\n\n在 Linux 系统中，每个文件或目录都有与之相关联的权限, 这些权限决定了谁可以对文件进行何种操作。用户被分为三类：所有者（owner），所属组（group）和其他人（others）。每类用户又都有读 （r），写（w）和执行（x）三种权限。这 $9$ 种权限可以分别指定。我们称**权限字符串**是一个长度为 $9$ 的字符串，按顺序分别对应以上提到的 $9$ 种权限，如果具有此权限，则为 $\\text{r}$，$\\text{w}$，$\\text{x}$ 中相应的那一个，否则为 $\\text{-}$。\n\n例如**权限字符串** $\\text{rwxr-x-}\\text{-x}$ 说明，该文件对于所有者具有全部权限，对于所属组用户只具有读和执行权限，而对于其他人只具有执行权限。\n\n使用 $\\text{chmod}$ 命令时，你可以提供模式串来修改权限。在本题，我们只考虑长度为 $3$ 的由不大于 $7$ 的数字组成的模式串，其三个数字从左往右依次代表所有者（owner），所属组（group）和其他人（others）的权限。对于每个数字，其最低三个二进制位从高向低分别表示了该类用户是否具有读（r），写（w）和执行（x）权限。\n\n例如：执行 $\\text{chmod 760 file.txt}$ 后, 表示文件的**权限字符串**为 $\\text{rwxrw-}\\text{-}\\text{-}\\text{-}$。\n\n给出若干合法的模式串，每次读入一条模式串后，你需要输出修改后文件的**权限字符串**。", "inputFormat": "第一行一个正整数 $T$ ($1 \\le T \\le 100$)，表示数据组数。\n\n接下来 $T$ 行，每行一条 $\\text{chmod}$ 模式串。", "outputFormat": "共 $T$ 行，表示模式串对应的**权限字符串**。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10692", "type": "P", "difficulty": 4, "samples": [["4 4\n", "1111\n1*11\n11*1\n1111\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "2024", "Special Judge", "O2优化", "陕西", "省赛/邀请赛", "状压 DP"], "title": "[SNCPC2024] 表达式矩阵", "background": "", "description": "一个 $n \\times m$ 的字符矩阵 $a_{ij}$，被称为合法的表达式矩阵，当且仅当其满足如下条件：\n\n\n- 矩阵只包含 '1'，'+'，'*' 字符。\n\n- 对于矩阵的每行从左向右组成的字符串，均为合法的表达式。\n\n- 对于矩阵的每列从上向下组成的字符串，均为合法的表达式。\n\n\n一个合法的表达式矩阵的权值定义为，每行从左向右组成的字符串和每列从上向下组成的字符串共 $n + m$ 个表达式求值后的值求和的结果。\n\n求所有 $n \\times m$ 的合法表达式矩阵中，权值最小的那一个。如果有多个最小的答案，你可以给出任意一个。\n\n我们定义字符串 $s$ 是合法表达式如下：\n\n\n\n- 如果 $s = \\overbrace{111\\dots111}^{\\text{至少一个 }1}$，则 $s$ 是合法表达式。\n\n- 如果 $s$ 和 $t$ 均为合法表达式，则 $s$ * $t$ 也是合法表达式。\n\n- 如果 $s$ 和 $t$ 均为合法表达式，则 $s$ + $t$ 也是合法表达式。", "inputFormat": "输入仅一行两个整数 $n, m$ ($3 \\leq n, m \\leq 9$)，由空格隔开，为矩阵的行数和列数。", "outputFormat": "输出共 $n$ 行，每行 $m$ 个字符，其中第 $i$ 行的第 $j$ 个字符为 $a_{ij}$，为权值最小的矩阵。\n\n如果有多个最小的答案，你可以给出任意一个。", "hint": "\n对于样例，此时矩阵的权值为 $4488$，可以证明不存在权值更小的矩阵。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNCPC2024] 表达式矩阵", "background": "", "description": "一个 $n \\times m$ 的字符矩阵 $a_{ij}$，被称为合法的表达式矩阵，当且仅当其满足如下条件：\n\n\n- 矩阵只包含 '1'，'+'，'*' 字符。\n\n- 对于矩阵的每行从左向右组成的字符串，均为合法的表达式。\n\n- 对于矩阵的每列从上向下组成的字符串，均为合法的表达式。\n\n\n一个合法的表达式矩阵的权值定义为，每行从左向右组成的字符串和每列从上向下组成的字符串共 $n + m$ 个表达式求值后的值求和的结果。\n\n求所有 $n \\times m$ 的合法表达式矩阵中，权值最小的那一个。如果有多个最小的答案，你可以给出任意一个。\n\n我们定义字符串 $s$ 是合法表达式如下：\n\n\n\n- 如果 $s = \\overbrace{111\\dots111}^{\\text{至少一个 }1}$，则 $s$ 是合法表达式。\n\n- 如果 $s$ 和 $t$ 均为合法表达式，则 $s$ * $t$ 也是合法表达式。\n\n- 如果 $s$ 和 $t$ 均为合法表达式，则 $s$ + $t$ 也是合法表达式。", "inputFormat": "输入仅一行两个整数 $n, m$ ($3 \\leq n, m \\leq 9$)，由空格隔开，为矩阵的行数和列数。", "outputFormat": "输出共 $n$ 行，每行 $m$ 个字符，其中第 $i$ 行的第 $j$ 个字符为 $a_{ij}$，为权值最小的矩阵。\n\n如果有多个最小的答案，你可以给出任意一个。", "hint": "\n对于样例，此时矩阵的权值为 $4488$，可以证明不存在权值更小的矩阵。", "locale": "zh-CN"}}}
{"pid": "P10693", "type": "P", "difficulty": 4, "samples": [["5\n2 6 4 5 3\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["图论", "2024", "O2优化", "陕西", "基环树", "省赛/邀请赛"], "title": "[SNCPC2024] 换座位", "background": "", "description": "树王国在筹备着举办一次盛大的庆典！\n\nShirost 作为树王国的庆典设计师，准备邀请 $n$ 个嘉宾来参加本次庆典。庆典上一共准备了 $2n$ 个座位，**一个座位最多只能坐一个人且一个人恰好坐一个座位**。Shirost 初步计划将第 $i$ 个嘉宾安排在第 $i$ 个座位上。但是总统调查了这 $n$ 个嘉宾的意愿，第 $i$ 个嘉宾的心仪座位为第 $a_i$ 个座位。但除非能坐到心仪座位上，否则他们只愿意坐在原来的座位上。总统希望 Shirost 能够修改计划，使得尽可能多的嘉宾坐在他们的心仪座位上。\n\n形式化的讲，你需要找到长为 $n$ 的数组 $b_i$ ($1 \\leq i \\leq n, 1 \\leq b_i \\leq 2n$) 满足 $\\forall i \\neq j,b_i \\neq b_j$ 且 $\\forall i, b_i=i$ 或 $b_i=a_i$。且最大化 $b_i = a_i$ 的个数。\n\n你只需要输出最多的个数即可。", "inputFormat": "输入第一行为一个整数 $n$ ($1 \\leq n \\leq 10^{5}$)，表示总人数。\n\n第二行 $n$ 个整数 $a_i$ ($1 \\leq a_i \\leq 2n$)，由空格隔开，表示每个人的心仪座位。\n", "outputFormat": "输出仅一行一个整数，表示最多有多少嘉宾坐在他们的心仪座位上。", "hint": "\n\n对于第一个样例，所有人都可以换到自己的心仪座位。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNCPC2024] 换座位", "background": "", "description": "树王国在筹备着举办一次盛大的庆典！\n\nShirost 作为树王国的庆典设计师，准备邀请 $n$ 个嘉宾来参加本次庆典。庆典上一共准备了 $2n$ 个座位，**一个座位最多只能坐一个人且一个人恰好坐一个座位**。Shirost 初步计划将第 $i$ 个嘉宾安排在第 $i$ 个座位上。但是总统调查了这 $n$ 个嘉宾的意愿，第 $i$ 个嘉宾的心仪座位为第 $a_i$ 个座位。但除非能坐到心仪座位上，否则他们只愿意坐在原来的座位上。总统希望 Shirost 能够修改计划，使得尽可能多的嘉宾坐在他们的心仪座位上。\n\n形式化的讲，你需要找到长为 $n$ 的数组 $b_i$ ($1 \\leq i \\leq n, 1 \\leq b_i \\leq 2n$) 满足 $\\forall i \\neq j,b_i \\neq b_j$ 且 $\\forall i, b_i=i$ 或 $b_i=a_i$。且最大化 $b_i = a_i$ 的个数。\n\n你只需要输出最多的个数即可。", "inputFormat": "输入第一行为一个整数 $n$ ($1 \\leq n \\leq 10^{5}$)，表示总人数。\n\n第二行 $n$ 个整数 $a_i$ ($1 \\leq a_i \\leq 2n$)，由空格隔开，表示每个人的心仪座位。\n", "outputFormat": "输出仅一行一个整数，表示最多有多少嘉宾坐在他们的心仪座位上。", "hint": "\n\n对于第一个样例，所有人都可以换到自己的心仪座位。\n", "locale": "zh-CN"}}}
{"pid": "P10694", "type": "P", "difficulty": 5, "samples": [["iccpcicpc\nicpc\nccpc\n", "133\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "O2优化", "陕西", "省赛/邀请赛"], "title": "[SNCPC2024] 双子序列", "background": "", "description": "小 L 看到不喜欢的字符串就很难受！看到它作为子序列出现也是！\n\n给定一个长字符串 $S$ 表示小 L 要阅读的文本，以及恰好两个短字符串 $s_1$，$s_2$ 表示小 L 不想看到的字符串，三个字符串均由小写字母组成。 \n\n小 L 很反感这两个字符串作为子序列在文本内同时出现，他认为，一个字符串 $T$ 的反感度为：$s_1$ 作为 $T$ 的子序列的出现次数，和 $s_2$ 作为 $T$ 的子序列的出现次数之积。\n\n由于他要读 $S$ 的每个子串，所以现在需要你求出 $S$ 的所有子串的反感度值之和。由于答案可能过大，你只需要输出对 $998244353$ 取模的结果。\n\n定义一个字符串 $H$ 是 $T$ 的子串，当且仅当 $H$ 由 $T$ 删除最前面的若干字符和最后面的若干字符获得（前缀后缀可以一个字符都不删除，也可以把整个串全删除得到空串）。\n\n定义一个字符串 $H$ 是 $T$ 的子序列，当且仅当 $H$ 由 $T$ 删除若干字符后获得（可以一个字符都不删除，也可以全删除后得到空子序列）。", "inputFormat": "输入包括三行，每行一个仅由小写字母组成的字符串。\n\n第一行的字符串代表 $S$，第二行代表 $s_1$，第三行代表 $s_2$。其中 $1\\le |S|\\le 1\\times 10^5$，$1\\le |s_1|,|s_2|\\le 20$。", "outputFormat": "输出一个整数代表求得的答案。", "hint": "| 子串起始位置 | 子串终止位置 |  icpc 次数  | ccpc 次数 |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | 5 | 2 | 1 |\n| 1 | 6 | 2 | 1 |\n| 1 | 7 | 4 | 2 |\n| 1 | 8 | 4 | 2 |\n| 1 | 9 | 11 | 9 |\n| 2 | 5 | 0 | 1 |\n| 2 | 6 | 0 | 1 |\n| 2 | 7 | 0 | 2 |\n| 2 | 8 | 0 | 2 |\n| 2 | 9 | 1 | 9 |\n| 3 | 9 | 1 | 3 |\n| 4 | 9 | 1 | 1 |\n| 5 | 9 | 1 | 1 |\n| 6 | 9 | 1 | 0 |\n\n\n在其余的子串内，两个字符串作为子序列的出现次数均为 $0$。\n\n答案为 $(2\\times 1) \\times 2 + (4\\times 2) \\times 2 + 11\\times 9 + (0\\times 1)\\times 2 + (0\\times 2)\\times 2 + 1\\times 9 + 1\\times 3+ (1\\times 1)\\times 2 + 1\\times 0=133$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNCPC2024] 双子序列", "background": "", "description": "小 L 看到不喜欢的字符串就很难受！看到它作为子序列出现也是！\n\n给定一个长字符串 $S$ 表示小 L 要阅读的文本，以及恰好两个短字符串 $s_1$，$s_2$ 表示小 L 不想看到的字符串，三个字符串均由小写字母组成。 \n\n小 L 很反感这两个字符串作为子序列在文本内同时出现，他认为，一个字符串 $T$ 的反感度为：$s_1$ 作为 $T$ 的子序列的出现次数，和 $s_2$ 作为 $T$ 的子序列的出现次数之积。\n\n由于他要读 $S$ 的每个子串，所以现在需要你求出 $S$ 的所有子串的反感度值之和。由于答案可能过大，你只需要输出对 $998244353$ 取模的结果。\n\n定义一个字符串 $H$ 是 $T$ 的子串，当且仅当 $H$ 由 $T$ 删除最前面的若干字符和最后面的若干字符获得（前缀后缀可以一个字符都不删除，也可以把整个串全删除得到空串）。\n\n定义一个字符串 $H$ 是 $T$ 的子序列，当且仅当 $H$ 由 $T$ 删除若干字符后获得（可以一个字符都不删除，也可以全删除后得到空子序列）。", "inputFormat": "输入包括三行，每行一个仅由小写字母组成的字符串。\n\n第一行的字符串代表 $S$，第二行代表 $s_1$，第三行代表 $s_2$。其中 $1\\le |S|\\le 1\\times 10^5$，$1\\le |s_1|,|s_2|\\le 20$。", "outputFormat": "输出一个整数代表求得的答案。", "hint": "| 子串起始位置 | 子串终止位置 |  icpc 次数  | ccpc 次数 |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | 5 | 2 | 1 |\n| 1 | 6 | 2 | 1 |\n| 1 | 7 | 4 | 2 |\n| 1 | 8 | 4 | 2 |\n| 1 | 9 | 11 | 9 |\n| 2 | 5 | 0 | 1 |\n| 2 | 6 | 0 | 1 |\n| 2 | 7 | 0 | 2 |\n| 2 | 8 | 0 | 2 |\n| 2 | 9 | 1 | 9 |\n| 3 | 9 | 1 | 3 |\n| 4 | 9 | 1 | 1 |\n| 5 | 9 | 1 | 1 |\n| 6 | 9 | 1 | 0 |\n\n\n在其余的子串内，两个字符串作为子序列的出现次数均为 $0$。\n\n答案为 $(2\\times 1) \\times 2 + (4\\times 2) \\times 2 + 11\\times 9 + (0\\times 1)\\times 2 + (0\\times 2)\\times 2 + 1\\times 9 + 1\\times 3+ (1\\times 1)\\times 2 + 1\\times 0=133$。", "locale": "zh-CN"}}}
{"pid": "P10695", "type": "P", "difficulty": 5, "samples": [["10 5\n1 2 5 6 8\n", "2\n"], ["3 3\n1 2 3\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "O2优化", "陕西", "Ad-hoc", "省赛/邀请赛"], "title": "[SNCPC2024] 商路", "background": "", "description": "一个圆周被 $K$ 个点等分，这些点按照顺时针编号为 $1, 2, \\cdots, K$。其中点 $a_1, a_2, \\cdots, a_n$ 分别建造有一座市场 $M_1, M_2, \\cdots, M_n$。\n\n一条从市场 $i$ 出发，目标是市场 $j$ 的商路是有向线段 $M_i M_j$ ($i \\neq j$) 且必须满足以下条件：\n\n- 市场 $j$ 必须是距离市场 $i$ 最远的市场（如果有多个距离相同的最远的市场,那么任意一个均可）。\n    \n- 商路线段 $M_i M_j$ 不能与其他商路线段在起点或者终点以外的地方相交或重合。\n\n最多可以存在多少条商路？", "inputFormat": "第一行包含两个整数 $K, n$ ($3 \\leq K \\leq 10^9, 3\\leq n \\leq \\min(K,10^5) $)，由空格隔开，表示有 $n$ 个市场分布在圆周的 $K$ 等分点上。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\cdots, a_n$ ($1\\leq a_1 < a_2 < \\cdots < a_{n-1} < a_n \\leq K$)，为建有市场的点的编号。", "outputFormat": "输出一个整数表示最多可以存在的商路的数量。\n", "hint": "\n\n对于第一个样例，其中两种可能的答案如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ql7evd73.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ya5u7z3o.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNCPC2024] 商路", "background": "", "description": "一个圆周被 $K$ 个点等分，这些点按照顺时针编号为 $1, 2, \\cdots, K$。其中点 $a_1, a_2, \\cdots, a_n$ 分别建造有一座市场 $M_1, M_2, \\cdots, M_n$。\n\n一条从市场 $i$ 出发，目标是市场 $j$ 的商路是有向线段 $M_i M_j$ ($i \\neq j$) 且必须满足以下条件：\n\n- 市场 $j$ 必须是距离市场 $i$ 最远的市场（如果有多个距离相同的最远的市场,那么任意一个均可）。\n    \n- 商路线段 $M_i M_j$ 不能与其他商路线段在起点或者终点以外的地方相交或重合。\n\n最多可以存在多少条商路？", "inputFormat": "第一行包含两个整数 $K, n$ ($3 \\leq K \\leq 10^9, 3\\leq n \\leq \\min(K,10^5) $)，由空格隔开，表示有 $n$ 个市场分布在圆周的 $K$ 等分点上。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\cdots, a_n$ ($1\\leq a_1 < a_2 < \\cdots < a_{n-1} < a_n \\leq K$)，为建有市场的点的编号。", "outputFormat": "输出一个整数表示最多可以存在的商路的数量。\n", "hint": "\n\n对于第一个样例，其中两种可能的答案如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ql7evd73.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ya5u7z3o.png)", "locale": "zh-CN"}}}
{"pid": "P10696", "type": "P", "difficulty": 1, "samples": [["2\n3\n10 4 15\n4\n10 10 5 4\n", "15\n10\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "O2优化", "陕西", "省赛/邀请赛"], "title": "[SNCPC2024] 写都写了，交一发吧", "background": "", "description": "MCPlayer542 正在做一道题。\n\n由于题目太难，他不能直接写出正解，而是写出了 $n$ 份不同的代码，其中第 $i$ 份代码可以获得 $g_i$ 的分数。\n\n时间紧迫，MCPlayer542 打算直接胡乱把代码交上去了。然而这时候他发现：由于这场比赛的特殊规则，他必须提交两次代码，且他得到的总分将会是两次提交得分的按位与运算结果。和你正在参加的比赛类似，两次不同提交的代码可以是同一份，也可以不同。\n\n形式化地，如果他分别在两次提交中提交了第 $i$ 和第 $j$ 份代码，则得分为 $g_i \\& g_j$，其中 $\\&$ 表示按位与运算。\n\n他想知道他能得到的最高分是多少。", "inputFormat": "输入包含多组测试数据，数据的第一行包含一个整数 $t$ ($1\\le t\\le 2\\times 10^5$)，表示数据组数。\n\n每组数据的第一行包含一个整数 $n$ ($1\\le n \\le 2\\times 10^5$)，表示代码份数。\n\n随后一行输入 $n$ 个整数 $g_1,\\ g_2,\\ \\ldots,\\ g_n$ ($0 \\le g_i<2^{30}$)，用单个空格分隔，含义见题目描述。\n\n数据保证所有 $n$ 之和不超过 $2\\times 10^5$。", "outputFormat": "对每组数据输出一行一个整数，即答案。", "hint": "\n\n对于第一组数据，只需将第三份代码提交两次即可。\n\n对于第二组数据，提交前两份代码即可。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNCPC2024] 写都写了，交一发吧", "background": "", "description": "MCPlayer542 正在做一道题。\n\n由于题目太难，他不能直接写出正解，而是写出了 $n$ 份不同的代码，其中第 $i$ 份代码可以获得 $g_i$ 的分数。\n\n时间紧迫，MCPlayer542 打算直接胡乱把代码交上去了。然而这时候他发现：由于这场比赛的特殊规则，他必须提交两次代码，且他得到的总分将会是两次提交得分的按位与运算结果。和你正在参加的比赛类似，两次不同提交的代码可以是同一份，也可以不同。\n\n形式化地，如果他分别在两次提交中提交了第 $i$ 和第 $j$ 份代码，则得分为 $g_i \\& g_j$，其中 $\\&$ 表示按位与运算。\n\n他想知道他能得到的最高分是多少。", "inputFormat": "输入包含多组测试数据，数据的第一行包含一个整数 $t$ ($1\\le t\\le 2\\times 10^5$)，表示数据组数。\n\n每组数据的第一行包含一个整数 $n$ ($1\\le n \\le 2\\times 10^5$)，表示代码份数。\n\n随后一行输入 $n$ 个整数 $g_1,\\ g_2,\\ \\ldots,\\ g_n$ ($0 \\le g_i<2^{30}$)，用单个空格分隔，含义见题目描述。\n\n数据保证所有 $n$ 之和不超过 $2\\times 10^5$。", "outputFormat": "对每组数据输出一行一个整数，即答案。", "hint": "\n\n对于第一组数据，只需将第三份代码提交两次即可。\n\n对于第二组数据，提交前两份代码即可。\n", "locale": "zh-CN"}}}
{"pid": "P10697", "type": "P", "difficulty": 3, "samples": [["5\n9 4\n99 7\n12345678 9\n9475632111234123 8\n998244353114514 7\n", "9\n81\n6053445\n1758041005111510\n205404686678741\n"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144]}, "tags": ["2024", "O2优化", "数位 DP", "陕西", "进制", "省赛/邀请赛"], "title": "[SNCPC2024] 消失的数字", "background": "", "description": "uuku 正在学习数位 DP！\n\n但某一天，他发现 $1,2,\\ldots,9$ 这九个数字中的 $x$ 消失了，也就是说所有包含 $x$ 这个数字的数都消失了。\n\n这让他非常惊慌，因为这对统计数的个数有很大的影响。\n\n现在，他希望你能帮助他求出这种情况下数 $n$ 在未消失的自然数中从小到大排在第几位。", "inputFormat": "本题有多组测试数据，输入第一行为一个整数 $T$（$1 \\leq T \\leq 10^5$），表示测试数据的组数。\n\n对于每组测试数据：\n\n共一行两个整数 $n, x$ ($0 \\leq n \\leq 10^{18},1 \\leq x \\leq 9$)，由空格隔开，含义如题目描述所述。\n\n数据保证 $n$ 中不包含数字 $x$。", "outputFormat": "对于每组测试数据：输出一行一个整数，表示数 $n$ 的排名。\n", "hint": "\n\n对于样例的第一组数据，自然数列变为 $0,1,2,3,5,6,7,8,9$, 其中数 $9$ 是第 $9$ 个。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNCPC2024] 消失的数字", "background": "", "description": "uuku 正在学习数位 DP！\n\n但某一天，他发现 $1,2,\\ldots,9$ 这九个数字中的 $x$ 消失了，也就是说所有包含 $x$ 这个数字的数都消失了。\n\n这让他非常惊慌，因为这对统计数的个数有很大的影响。\n\n现在，他希望你能帮助他求出这种情况下数 $n$ 在未消失的自然数中从小到大排在第几位。", "inputFormat": "本题有多组测试数据，输入第一行为一个整数 $T$（$1 \\leq T \\leq 10^5$），表示测试数据的组数。\n\n对于每组测试数据：\n\n共一行两个整数 $n, x$ ($0 \\leq n \\leq 10^{18},1 \\leq x \\leq 9$)，由空格隔开，含义如题目描述所述。\n\n数据保证 $n$ 中不包含数字 $x$。", "outputFormat": "对于每组测试数据：输出一行一个整数，表示数 $n$ 的排名。\n", "hint": "\n\n对于样例的第一组数据，自然数列变为 $0,1,2,3,5,6,7,8,9$, 其中数 $9$ 是第 $9$ 个。", "locale": "zh-CN"}}}
{"pid": "P10698", "type": "P", "difficulty": 7, "samples": [["7 12 3\n1 2\n1 3\n3 2\n3 4\n2 4\n1 5\n5 6\n3 6\n1 7\n5 7\n6 7\n4 7\n", "2 1 2 1 2 3 \n"], ["5 8 50\n1 2\n1 2\n1 2\n3 2\n2 4\n2 4\n2 4\n2 4\n", "3 0 3 0 \n"]], "limits": {"time": [15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "LGV 引理", "O2优化", "陕西", "容斥原理", "线性基", "省赛/邀请赛"], "title": "[SNCPC2024] 最大流", "background": "", "description": "给定一个 $n$ 个点 $m$ 条边的有向无环图，图中每条边的容量为 $1$。对点 $1$ 以外的每个点 $i$，设从点 $1$ 到点 $i$ 的最大流为 $f_i$，试求出 $\\min\\{f_i,\\ k\\}$。\n\n在边容量为 $1$ 的图上，一个从点 $1$ 到点 $i$ 的流即为一条从点 $1$ 到点 $i$ 的路径。如果从点 $1$ 到点 $i$ 最多能同时有 $f_i$ 个不交的流（即没有一条边同时属于两个流），则我们认为点 $1$ 到点 $i$ 的最大流是 $f_i$。", "inputFormat": "输入第一行为三个整数 $n, m, k$ ($2 \\leq n \\leq 10^5, 1 \\leq m \\leq 2 \\times 10^5, 1 \\leq k \\leq 50$)，由空格隔开，为图的点数，边数和参数。\n\n接下来 $m$ 行，每行两个整数 $x_i,y_i$ ($1 \\leq x_i, y_i \\leq n, x_i \\neq y_i$)，由空格隔开，描述一条有向边。\n\n图中保证没有自环，但是可能存在重边，保证给出的是一个有向无环图。\n", "outputFormat": "输出仅一行 $n-1$ 个整数，由空格隔开。对于第 $i$ 个整数，如果从结点 $1$ 到结点 $i+1$ 的最大流不超过 $k$，则为最大流的值，否则为 $k$。\n", "hint": "\n\n第一个样例所述图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5sl6gmj6.png)\n\n\n我们可以找到 $4$ 条从点 $1$ 到点 $7$ 的不相交路径：\n\n$\\text{1->7}$\n\n$\\text{1->5->7}$\n\n$\\text{1->3->6->7}$\n\n$\\text{1->2->4->7}$\n\n我们无法找到更多条从点 $1$ 到点 $7$ 的不相交路径：\n\n\n所以点 $1$ 到点 $7$ 的最大流为 $f_7=4$，但是因为 $k=3$，所以答案的第六个整数为 $3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNCPC2024] 最大流", "background": "", "description": "给定一个 $n$ 个点 $m$ 条边的有向无环图，图中每条边的容量为 $1$。对点 $1$ 以外的每个点 $i$，设从点 $1$ 到点 $i$ 的最大流为 $f_i$，试求出 $\\min\\{f_i,\\ k\\}$。\n\n在边容量为 $1$ 的图上，一个从点 $1$ 到点 $i$ 的流即为一条从点 $1$ 到点 $i$ 的路径。如果从点 $1$ 到点 $i$ 最多能同时有 $f_i$ 个不交的流（即没有一条边同时属于两个流），则我们认为点 $1$ 到点 $i$ 的最大流是 $f_i$。", "inputFormat": "输入第一行为三个整数 $n, m, k$ ($2 \\leq n \\leq 10^5, 1 \\leq m \\leq 2 \\times 10^5, 1 \\leq k \\leq 50$)，由空格隔开，为图的点数，边数和参数。\n\n接下来 $m$ 行，每行两个整数 $x_i,y_i$ ($1 \\leq x_i, y_i \\leq n, x_i \\neq y_i$)，由空格隔开，描述一条有向边。\n\n图中保证没有自环，但是可能存在重边，保证给出的是一个有向无环图。\n", "outputFormat": "输出仅一行 $n-1$ 个整数，由空格隔开。对于第 $i$ 个整数，如果从结点 $1$ 到结点 $i+1$ 的最大流不超过 $k$，则为最大流的值，否则为 $k$。\n", "hint": "\n\n第一个样例所述图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5sl6gmj6.png)\n\n\n我们可以找到 $4$ 条从点 $1$ 到点 $7$ 的不相交路径：\n\n$\\text{1->7}$\n\n$\\text{1->5->7}$\n\n$\\text{1->3->6->7}$\n\n$\\text{1->2->4->7}$\n\n我们无法找到更多条从点 $1$ 到点 $7$ 的不相交路径：\n\n\n所以点 $1$ 到点 $7$ 的最大流为 $f_7=4$，但是因为 $k=3$，所以答案的第六个整数为 $3$。", "locale": "zh-CN"}}}
{"pid": "P10699", "type": "P", "difficulty": 6, "samples": [["2\n3 1\n\n3\n\n9\n\n9\n\n\n3 2\n\n4\n\n4\n\n4\n\n\n", "\n\n1\n\n2\n\n3\n\n100\n3 9 27\n\n1\n\n7\n\n49\n\n49\n0 0 0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "交互题", "Special Judge", "O2优化", "陕西", "中国剩余定理 CRT", "省赛/邀请赛"], "title": "[SNCPC2024] 猜质数 I", "background": "", "description": "**这是一道交互题。**\n\nMCPlayer542 手上有一个神秘的**奇质数** $p$，但他并不想让你知道这个数是多少。\n\n他打算用一个函数 $f(x)$ 来加密他的数，其值为 $x$ 在十进制下的各位数字之和，例如 $f(5)=5$，$f(542)=5+4+2=11$，$f(1024)=1+0+2+4=7$。\n\n**然而考虑到你太聪明，他想了想，决定把加密函数改成：**\n$$g(x)=f(f(f(f(f(f(f(f(f(f(x))))))))))$$\n**即连续应用 $10$ 次 $f(x)$，并把手上的 $p$ 换成了 $q=p^k$。** \n\n现在他准备给你 $n$ 个整数 $g(q^{a_1}),\\ g(q^{a_2}),\\ \\ldots,\\ g(q^{a_n})$，并希望你能告诉他\n$$q^{a_1}\\bmod (m\\cdot a_1),\\ q^{a_2}\\bmod (m\\cdot a_2),\\ \\ldots,\\ q^{a_n}\\bmod (m\\cdot a_n)$$\n分别是多少。**他觉得你肯定猜不到，所以决定让你自己选择 $m$ 和 $a_1,\\ a_2,\\ \\ldots,\\ a_n$**。你能完成这个任务吗？\n\n**注意：$m$ 的范围有特殊限制。**\n", "inputFormat": "输入包含多组测试数据。数据的第一行包含一个整数 $t$ ($1\\le t\\le 500$)，表示数据组数。每组数据的交互流程在下文中描述。\n\n在每组数据中，输入的第一行包含两个整数 $n$ 和 $k$ ($1\\le n\\le 50, \\ 1\\le k\\le 10^9$)，用单个空格分隔，含义见题目描述。\n\n接下来每次交互，输出一行一个整数 $a_i$ ($1\\le a_i\\le 10^{18},a_i$ **互不相同**)，表示要询问的 $q$ 的幂次。\n\n给出一个询问后，你应该读入一个整数，即 $g(q^{a_i})$。\n\n你需要在进行完 $n$ 轮交互之后输出一行一个整数 $m$ ($m\\ge 35,1\\le m\\cdot a_i\\le 10^{18}$)，再输出一行 $n$ 个数，即 $q^{a_1}\\bmod (m\\cdot a_1), \\ q^{a_2}\\bmod (m\\cdot a_2), \\ \\ldots, \\ q^{a_n}\\bmod (m\\cdot a_n)$，用单个空格分隔，表示答案。\n\n**你必须进行恰好 $n$ 轮交互，随后输出答案并结束程序，否则你可能得到无法预测的结果。**\n\n注意在你的程序每轮输出结束时（即，每一次交互输出 $a_i$ 时和最后输出 $m$ 与答案时）需要输出回车并刷新输出缓冲区，否则你将会得到 $\\text{Idleness Limit Exceeded}$。\n\n- C 的 $\\text{fflush(stdout)}$；\n- C++ 的 $\\text{cout.flush()}$；\n- Java 的 $\\text{System.out.flush()}$；\n- Python 的 $\\text{stdout.flush()}$；\n\n来刷新输出缓冲区。\n\n**保证在每组数据中的奇质数** $p$ ($2<p\\le 10^{18}$) **都是在交互前确定的，即不会随着你的输入而变化。**\n\n如果你最后输出的答案正确，你会得到 $\\text{Accepted}$；\n\n如果你输出的 $m$ 或 $a_i$ 不符合题目范围要求，或最后输出的答案不正确，你会得到 $\\text{Wrong Answer}$。\n\n此外，其他的评测结果仍会在评测过程中根据通常情况返回。", "outputFormat": "", "hint": "\n\n在第一组数据中，MCPlayer542 手上的奇质数 $p=3$，因此有 $q=p^k=3$。\n\n我们选择数组 $a=\\{1,\\ 2,\\ 3\\}$，依次得到 $g(3^1)=3, \\ g(3^2)=9, \\ g(3^3)=9$。\n\n随后我们猜到 $p=3$，选择 $m=100$，因此输出 $3^1\\bmod (100\\times 1)=3, \\ 3^2\\bmod (100\\times 2)=9, \\ 3^3\\bmod (100\\times 3)=27$。\n\n在第二组数据中，MCPlayer542 手上的奇质数 $p=7$，因此有 $q=p^k=49$。\n\n我们选择数组 $a=\\{1,\\ 7,\\ 49\\}$，依次得到 $g(49^1)=4,\\ g(49^7)=4,\\ g(49^{49})=4$。\n\n随后我们**敏锐地发现** $p=7$，选择 $m=49$，因此输出 $49^1\\bmod (49\\times 1)=0, \\ 49^7\\bmod (49\\times 7)=0, \\ 49^{49}\\bmod (49\\times 49)=0$。\n\n注：第二组数据中的“**敏锐地发现**”仅作为交互流程的示意，并不保证上述交互可以确定 $p=7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNCPC2024] 猜质数 I", "background": "", "description": "**这是一道交互题。**\n\nMCPlayer542 手上有一个神秘的**奇质数** $p$，但他并不想让你知道这个数是多少。\n\n他打算用一个函数 $f(x)$ 来加密他的数，其值为 $x$ 在十进制下的各位数字之和，例如 $f(5)=5$，$f(542)=5+4+2=11$，$f(1024)=1+0+2+4=7$。\n\n**然而考虑到你太聪明，他想了想，决定把加密函数改成：**\n$$g(x)=f(f(f(f(f(f(f(f(f(f(x))))))))))$$\n**即连续应用 $10$ 次 $f(x)$，并把手上的 $p$ 换成了 $q=p^k$。** \n\n现在他准备给你 $n$ 个整数 $g(q^{a_1}),\\ g(q^{a_2}),\\ \\ldots,\\ g(q^{a_n})$，并希望你能告诉他\n$$q^{a_1}\\bmod (m\\cdot a_1),\\ q^{a_2}\\bmod (m\\cdot a_2),\\ \\ldots,\\ q^{a_n}\\bmod (m\\cdot a_n)$$\n分别是多少。**他觉得你肯定猜不到，所以决定让你自己选择 $m$ 和 $a_1,\\ a_2,\\ \\ldots,\\ a_n$**。你能完成这个任务吗？\n\n**注意：$m$ 的范围有特殊限制。**\n", "inputFormat": "输入包含多组测试数据。数据的第一行包含一个整数 $t$ ($1\\le t\\le 500$)，表示数据组数。每组数据的交互流程在下文中描述。\n\n在每组数据中，输入的第一行包含两个整数 $n$ 和 $k$ ($1\\le n\\le 50, \\ 1\\le k\\le 10^9$)，用单个空格分隔，含义见题目描述。\n\n接下来每次交互，输出一行一个整数 $a_i$ ($1\\le a_i\\le 10^{18},a_i$ **互不相同**)，表示要询问的 $q$ 的幂次。\n\n给出一个询问后，你应该读入一个整数，即 $g(q^{a_i})$。\n\n你需要在进行完 $n$ 轮交互之后输出一行一个整数 $m$ ($m\\ge 35,1\\le m\\cdot a_i\\le 10^{18}$)，再输出一行 $n$ 个数，即 $q^{a_1}\\bmod (m\\cdot a_1), \\ q^{a_2}\\bmod (m\\cdot a_2), \\ \\ldots, \\ q^{a_n}\\bmod (m\\cdot a_n)$，用单个空格分隔，表示答案。\n\n**你必须进行恰好 $n$ 轮交互，随后输出答案并结束程序，否则你可能得到无法预测的结果。**\n\n注意在你的程序每轮输出结束时（即，每一次交互输出 $a_i$ 时和最后输出 $m$ 与答案时）需要输出回车并刷新输出缓冲区，否则你将会得到 $\\text{Idleness Limit Exceeded}$。\n\n- C 的 $\\text{fflush(stdout)}$；\n- C++ 的 $\\text{cout.flush()}$；\n- Java 的 $\\text{System.out.flush()}$；\n- Python 的 $\\text{stdout.flush()}$；\n\n来刷新输出缓冲区。\n\n**保证在每组数据中的奇质数** $p$ ($2<p\\le 10^{18}$) **都是在交互前确定的，即不会随着你的输入而变化。**\n\n如果你最后输出的答案正确，你会得到 $\\text{Accepted}$；\n\n如果你输出的 $m$ 或 $a_i$ 不符合题目范围要求，或最后输出的答案不正确，你会得到 $\\text{Wrong Answer}$。\n\n此外，其他的评测结果仍会在评测过程中根据通常情况返回。", "outputFormat": "", "hint": "\n\n在第一组数据中，MCPlayer542 手上的奇质数 $p=3$，因此有 $q=p^k=3$。\n\n我们选择数组 $a=\\{1,\\ 2,\\ 3\\}$，依次得到 $g(3^1)=3, \\ g(3^2)=9, \\ g(3^3)=9$。\n\n随后我们猜到 $p=3$，选择 $m=100$，因此输出 $3^1\\bmod (100\\times 1)=3, \\ 3^2\\bmod (100\\times 2)=9, \\ 3^3\\bmod (100\\times 3)=27$。\n\n在第二组数据中，MCPlayer542 手上的奇质数 $p=7$，因此有 $q=p^k=49$。\n\n我们选择数组 $a=\\{1,\\ 7,\\ 49\\}$，依次得到 $g(49^1)=4,\\ g(49^7)=4,\\ g(49^{49})=4$。\n\n随后我们**敏锐地发现** $p=7$，选择 $m=49$，因此输出 $49^1\\bmod (49\\times 1)=0, \\ 49^7\\bmod (49\\times 7)=0, \\ 49^{49}\\bmod (49\\times 49)=0$。\n\n注：第二组数据中的“**敏锐地发现**”仅作为交互流程的示意，并不保证上述交互可以确定 $p=7$。", "locale": "zh-CN"}}}
{"pid": "P10700", "type": "P", "difficulty": 6, "samples": [["10 7\n10 9 2 1 5 3 10 10 1 8\n14 4\n17 5\n13 10\n16 1\n12 4\n16 6\n16 3\n", "55 6\n60 6\n-68 10\n-58 6\n41 6\n20 6\n79 6\n"], ["6 8\n3 7 7 10 8 9\n21 1\n20 4\n21 3\n21 5\n21 1\n21 2\n21 2\n21 5\n", "170 3\n-100 4\n70 3\n-27 6\n170 3\n140 3\n140 3\n-27 6\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "陕西", "省赛/邀请赛"], "title": "[SNCPC2024] 猜质数 II", "background": "", "description": "为了悄悄准备一个神秘的质数，MCPlayer542 伤透了脑筋。\n\n随后他发明了一种~~聪明~~愚蠢的办法，并起名为“质数分”。\n\n他准备了 $n$ 个不同的数 $a_1,\\ a_2,\\ \\ldots,\\ a_n$ 作为测试点，并定义“质数分” $score(x,l,r)$ 如下：\n\n$$score(x,l,r)=\\sum_{i=l}^r{f(x,a_i)}$$\n其中\n$$f(x,y)=\\left\\{\\begin{array}{rcl}u-y, & x=1 \\\\ u, & 1<x\\le y,\\ \\gcd(x,y)=1 \\\\ -x\\cdot y, & x\\neq 1,\\ \\gcd(x,y)=x \\\\ 0, & \\text{otherwise} \\end{array}\\right.$$\n\n可见质数的“质数分”通常会比较高~~但还是没什么卵用~~。\n\n于是 MCPlayer542 急了，现在他只想暴力乱测，并得到一个得分和 $\\sum_{i=1}^{10^6}{score(i,l,r)}$。他打算测试 $q$ 次，每次测试给定 $u$ 和 $l$，其中 $u$ 为函数 $f(x,y)$ 的参数。\n\n对于每次询问，他想知道所能得到的最大得分和以及能得到这个最大得分和的最小 $r$ 是多少。", "inputFormat": "输入数据的第一行包含两个整数 $n,\\ q$ ($1\\le n,\\ q\\le 5\\times 10^5$)，用单个空格分隔。\n\n第二行包含 $n$ 个整数 $a_1,\\ a_2,\\ \\ldots,\\ a_n$ ($1\\le a_i\\le 10^6$)，用单个空格分隔，表示测试点的数据。\n\n接下来 $q$ 行，每行两个整数 $u_i,\\ l_i$ ($1\\le u_i \\le 1.8\\times 10^7,\\ 1\\le l_i\\le n$)，用单个空格分隔，表示一次询问。", "outputFormat": "对每个询问输出一行两个数，即对应询问的最大得分和以及能获得该得分的最小 $r_i$ ($l_i\\le r_i\\le n$)，用单个空格分隔。", "hint": "\n\n在样例 1 的第一个询问中，$u_1=14,\\ l_1=4$。若我们选择 $r_1=6$，则最后的得分和为 $\\sum_{i=1}^{10^6}{score(i,4,6)}$。其中：\n- $score(1,4,6)=13+9+11=33$；\n- $score(2,4,6)=0+14+14=28$；\n- $score(3,4,6)=0+14-9=5$；\n- $score(4,4,6)=0+14+0=14$；\n- $score(5,4,6)=0-25+0=-25$；\n- $i$ 取其他值时均有 $score(i,4,6)=0+0+0=0$。\n\n故 $r_1=6$ 时得分和为 $33+28+5+14-25=55$。\n\n可以证明在 $r_1$ 取其他值时无法得到更大的得分和，故答案为 $55$，且能达成的最小 $r_1$ 为 $6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNCPC2024] 猜质数 II", "background": "", "description": "为了悄悄准备一个神秘的质数，MCPlayer542 伤透了脑筋。\n\n随后他发明了一种~~聪明~~愚蠢的办法，并起名为“质数分”。\n\n他准备了 $n$ 个不同的数 $a_1,\\ a_2,\\ \\ldots,\\ a_n$ 作为测试点，并定义“质数分” $score(x,l,r)$ 如下：\n\n$$score(x,l,r)=\\sum_{i=l}^r{f(x,a_i)}$$\n其中\n$$f(x,y)=\\left\\{\\begin{array}{rcl}u-y, & x=1 \\\\ u, & 1<x\\le y,\\ \\gcd(x,y)=1 \\\\ -x\\cdot y, & x\\neq 1,\\ \\gcd(x,y)=x \\\\ 0, & \\text{otherwise} \\end{array}\\right.$$\n\n可见质数的“质数分”通常会比较高~~但还是没什么卵用~~。\n\n于是 MCPlayer542 急了，现在他只想暴力乱测，并得到一个得分和 $\\sum_{i=1}^{10^6}{score(i,l,r)}$。他打算测试 $q$ 次，每次测试给定 $u$ 和 $l$，其中 $u$ 为函数 $f(x,y)$ 的参数。\n\n对于每次询问，他想知道所能得到的最大得分和以及能得到这个最大得分和的最小 $r$ 是多少。", "inputFormat": "输入数据的第一行包含两个整数 $n,\\ q$ ($1\\le n,\\ q\\le 5\\times 10^5$)，用单个空格分隔。\n\n第二行包含 $n$ 个整数 $a_1,\\ a_2,\\ \\ldots,\\ a_n$ ($1\\le a_i\\le 10^6$)，用单个空格分隔，表示测试点的数据。\n\n接下来 $q$ 行，每行两个整数 $u_i,\\ l_i$ ($1\\le u_i \\le 1.8\\times 10^7,\\ 1\\le l_i\\le n$)，用单个空格分隔，表示一次询问。", "outputFormat": "对每个询问输出一行两个数，即对应询问的最大得分和以及能获得该得分的最小 $r_i$ ($l_i\\le r_i\\le n$)，用单个空格分隔。", "hint": "\n\n在样例 1 的第一个询问中，$u_1=14,\\ l_1=4$。若我们选择 $r_1=6$，则最后的得分和为 $\\sum_{i=1}^{10^6}{score(i,4,6)}$。其中：\n- $score(1,4,6)=13+9+11=33$；\n- $score(2,4,6)=0+14+14=28$；\n- $score(3,4,6)=0+14-9=5$；\n- $score(4,4,6)=0+14+0=14$；\n- $score(5,4,6)=0-25+0=-25$；\n- $i$ 取其他值时均有 $score(i,4,6)=0+0+0=0$。\n\n故 $r_1=6$ 时得分和为 $33+28+5+14-25=55$。\n\n可以证明在 $r_1$ 取其他值时无法得到更大的得分和，故答案为 $55$，且能达成的最小 $r_1$ 为 $6$。", "locale": "zh-CN"}}}
{"pid": "P10701", "type": "P", "difficulty": 5, "samples": [["2 3 2\n1 1 6\n2 2 7\n3 1 8\n", "6\n"], ["114514 6 1919810\n1 1 1\n1 1 9\n1 4 1\n1 5 9\n1 1 8\n1 4 10\n", "0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "O2优化", "陕西", "省赛/邀请赛"], "title": "[SNCPC2024] 致命公司", "background": "", "description": "Shirost 最近沉迷于一款名为《致命公司》的游戏。\n\n在游戏中，玩家将作为“公司”的合同工，从废弃的工业星球收集废料。在探索的过程中，Shirost 将遇到一个名为弹簧头的怪物，弹簧头会在无人注视它时快速移动，但在被注视时则会保持不动。一旦接近，弹簧头就会立刻杀死 Shirost。\n\n现在 Shirost 站在 $n$ 个无限长的通道的交汇点，他知道有 $m$ 个弹簧头，分别会在 $t_i$ 时刻出现在 $x_i$ 号通道距离他 $y_i$ 米远处。\n\n对于每个时刻 $j$，以下三个事件将会依次发生：\n\n1. 在该时刻开始时，满足 $t_i = j$ 的弹簧头会出现在  $x_i$ 号通道距离 Shirost $y_i$ 米远处。\n\n2. Shirost 选择凝视任意一个通道。\n\n3. 该通道内的所有弹簧头无法移动，而其他通道中**已经出现**的弹簧头会向他移动 $k$ 米，如果某个弹簧头到达他所在位置，则他将在时刻 $j$ 死亡。\n\nShirost 想知道他最晚可以活到哪个时刻。换句话说，如果 Shirost 最晚在时刻 $j$ 死亡，那么你需要输出 $j-1$。如果他不会死亡，则输出 $-1$。", "inputFormat": "输入第一行为三个整数 $n,m,k$ ($1 \\leq n \\leq 5 \\times 10^5, 1 \\leq m \\leq 5 \\times 10^5, 1 \\leq k \\leq 10^{18}$)，由空格隔开，为无限长通道的个数，弹簧头的个数，弹簧头每时刻移动的距离。\n\n接下来 $m$ 行，每行三个整数 $t_i,x_i,y_i$ ($1 \\leq t_i \\leq 10^{18}, 1 \\leq x_i \\leq n, 1 \\leq y_i \\leq 10^{18}$)，由空格隔开，描述弹簧头出现的时刻，出现的通道编号，距离 Shirost 有多远。\n", "outputFormat": "输出仅一行一个整数，表示 Shirost 最晚可以活到哪个时刻。如果他不会死亡，则输出 $-1$。", "hint": "\n\nShirost 可以按如下所述行动：\n| 时刻 | 凝视的通道 | 弹簧头 $1$ 距离 | 弹簧头 $2$ 距离 |  弹簧头 $3$ 距离 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | 1 | 6 |  |  |\n| 2 | 1 | 6 | 5 |  |\n| 3 | 2 | 4 | 5 | 6 |\n| 4 | 1 | 4 | 3 | 6 |\n| 5 | 2 | 2 | 3 | 4 |\n| 6 | 1 | 2 | 1 | 4 |\n\n在第 $7$ 时刻，无论看哪个通道，Shirost 都会在该时刻内被弹簧头杀死。所以答案是 $6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNCPC2024] 致命公司", "background": "", "description": "Shirost 最近沉迷于一款名为《致命公司》的游戏。\n\n在游戏中，玩家将作为“公司”的合同工，从废弃的工业星球收集废料。在探索的过程中，Shirost 将遇到一个名为弹簧头的怪物，弹簧头会在无人注视它时快速移动，但在被注视时则会保持不动。一旦接近，弹簧头就会立刻杀死 Shirost。\n\n现在 Shirost 站在 $n$ 个无限长的通道的交汇点，他知道有 $m$ 个弹簧头，分别会在 $t_i$ 时刻出现在 $x_i$ 号通道距离他 $y_i$ 米远处。\n\n对于每个时刻 $j$，以下三个事件将会依次发生：\n\n1. 在该时刻开始时，满足 $t_i = j$ 的弹簧头会出现在  $x_i$ 号通道距离 Shirost $y_i$ 米远处。\n\n2. Shirost 选择凝视任意一个通道。\n\n3. 该通道内的所有弹簧头无法移动，而其他通道中**已经出现**的弹簧头会向他移动 $k$ 米，如果某个弹簧头到达他所在位置，则他将在时刻 $j$ 死亡。\n\nShirost 想知道他最晚可以活到哪个时刻。换句话说，如果 Shirost 最晚在时刻 $j$ 死亡，那么你需要输出 $j-1$。如果他不会死亡，则输出 $-1$。", "inputFormat": "输入第一行为三个整数 $n,m,k$ ($1 \\leq n \\leq 5 \\times 10^5, 1 \\leq m \\leq 5 \\times 10^5, 1 \\leq k \\leq 10^{18}$)，由空格隔开，为无限长通道的个数，弹簧头的个数，弹簧头每时刻移动的距离。\n\n接下来 $m$ 行，每行三个整数 $t_i,x_i,y_i$ ($1 \\leq t_i \\leq 10^{18}, 1 \\leq x_i \\leq n, 1 \\leq y_i \\leq 10^{18}$)，由空格隔开，描述弹簧头出现的时刻，出现的通道编号，距离 Shirost 有多远。\n", "outputFormat": "输出仅一行一个整数，表示 Shirost 最晚可以活到哪个时刻。如果他不会死亡，则输出 $-1$。", "hint": "\n\nShirost 可以按如下所述行动：\n| 时刻 | 凝视的通道 | 弹簧头 $1$ 距离 | 弹簧头 $2$ 距离 |  弹簧头 $3$ 距离 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | 1 | 6 |  |  |\n| 2 | 1 | 6 | 5 |  |\n| 3 | 2 | 4 | 5 | 6 |\n| 4 | 1 | 4 | 3 | 6 |\n| 5 | 2 | 2 | 3 | 4 |\n| 6 | 1 | 2 | 1 | 4 |\n\n在第 $7$ 时刻，无论看哪个通道，Shirost 都会在该时刻内被弹簧头杀死。所以答案是 $6$。", "locale": "zh-CN"}}}
{"pid": "P10702", "type": "P", "difficulty": 3, "samples": [["3\n9\n5\n10\n", "2\n2\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "数论", "O2优化", "陕西", "进制", "省赛/邀请赛"], "title": "[SNCPC2024] 下棋", "background": "", "description": "LNC 喜欢所有 $k$ 进制下所有数位的乘积为自身因子的数。他称之为 LNC 数。例如：\n\n当 $k = 10$ 时，$y = (36)_{10}$ 是 LNC 数，因为 $(3 \\times 6) \\mid 36$。\n\n当 $k = 4$ 时，$y = (12)_4$ 是 LNC 数，因为转换成十进制后 $(12)_4 = (6)_{10}$，而 $(1 \\times 2) \\mid 6$。\n\n当 $k = 2$ 时，$y = (1101)_2$ 不是 LNC 数，因为转换成十进制后 $(1101)_2 = (13)_{10}$，而 $0$ 不是 $13$ 的因子。\n\nLNC 在和 LJJ 玩一个游戏，LJJ 给出 $x$ 枚棋子，然后 LNC 选定一个整数 $k$ ($k \\geq 2$)。随后他们交替取走若干枚棋子，要求取走的棋子数量是 $k$ 进制意义下的 LNC 数。LNC 先手，先取完的获胜。两个人都绝顶聪明，故都会选择最优的策略。\n\nLJJ 觉得这个游戏很不公平，他们一共玩了 $T$ 局游戏，对于每局游戏他给出的 $x$，他希望知道最小的 $k$ 使得 LNC 先手必胜。", "inputFormat": "输入第一行一个正整数 $T$ ($1 \\le T \\le 1 \\times 10^2$)，表示数据组数。\n\n接下来 $T$ 行每行一个正整数 $x$ ($3 \\le x \\le 10^{18}$)，表示 LJJ 给出的数 $x$。", "outputFormat": "输出 $T$ 行每行一个正整数 $k$，表示每个询问的最小的 $k$，使 LNC 先手必胜。", "hint": "\n\n当 $x=5$ 的时候，LNC 可以选择 $k=2$。$x=(5)_{10}=(101)_2$。\n\nLNC 先手拿掉 $(11)_2$，此时 $x=(10)_2$，LJJ 只能拿走 $(1)_2$，LNC 拿走最后的 $(1)_2$ 获胜。\n\n又因为 $k=2$ 已经不能再小了，所以最终答案为 $k=2$。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNCPC2024] 下棋", "background": "", "description": "LNC 喜欢所有 $k$ 进制下所有数位的乘积为自身因子的数。他称之为 LNC 数。例如：\n\n当 $k = 10$ 时，$y = (36)_{10}$ 是 LNC 数，因为 $(3 \\times 6) \\mid 36$。\n\n当 $k = 4$ 时，$y = (12)_4$ 是 LNC 数，因为转换成十进制后 $(12)_4 = (6)_{10}$，而 $(1 \\times 2) \\mid 6$。\n\n当 $k = 2$ 时，$y = (1101)_2$ 不是 LNC 数，因为转换成十进制后 $(1101)_2 = (13)_{10}$，而 $0$ 不是 $13$ 的因子。\n\nLNC 在和 LJJ 玩一个游戏，LJJ 给出 $x$ 枚棋子，然后 LNC 选定一个整数 $k$ ($k \\geq 2$)。随后他们交替取走若干枚棋子，要求取走的棋子数量是 $k$ 进制意义下的 LNC 数。LNC 先手，先取完的获胜。两个人都绝顶聪明，故都会选择最优的策略。\n\nLJJ 觉得这个游戏很不公平，他们一共玩了 $T$ 局游戏，对于每局游戏他给出的 $x$，他希望知道最小的 $k$ 使得 LNC 先手必胜。", "inputFormat": "输入第一行一个正整数 $T$ ($1 \\le T \\le 1 \\times 10^2$)，表示数据组数。\n\n接下来 $T$ 行每行一个正整数 $x$ ($3 \\le x \\le 10^{18}$)，表示 LJJ 给出的数 $x$。", "outputFormat": "输出 $T$ 行每行一个正整数 $k$，表示每个询问的最小的 $k$，使 LNC 先手必胜。", "hint": "\n\n当 $x=5$ 的时候，LNC 可以选择 $k=2$。$x=(5)_{10}=(101)_2$。\n\nLNC 先手拿掉 $(11)_2$，此时 $x=(10)_2$，LJJ 只能拿走 $(1)_2$，LNC 拿走最后的 $(1)_2$ 获胜。\n\n又因为 $k=2$ 已经不能再小了，所以最终答案为 $k=2$。 ", "locale": "zh-CN"}}}
{"pid": "P10703", "type": "P", "difficulty": 2, "samples": [["5\n1 1\n2 1\n3 2\n5 5\n5 5\n", "7.5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2024", "Special Judge", "O2优化", "陕西", "省赛/邀请赛"], "title": "[SNCPC2024] 窗花", "background": "", "description": "有一扇 $100 \\text{cm} \\times 100 \\text{cm}$ 的窗户和 $n$ 个对角线长为 $2 \\text{cm}$ 的正方形窗花。建立坐标系，以窗户左下角的坐标为原点 $(0,0)$，右上角坐标为 $(100,100)$，第 $i$ 个窗花中心被贴在非边缘的整坐标点 $(x_i,y_i)$ ($1 \\leq x_i,y_i \\leq 99$) 上，窗花的对角线与坐标轴平行。\n\n问窗户有多大的面积被至少一片窗花覆盖。", "inputFormat": "第一行一个整数 $n$ ($1 \\leq n \\leq 10000$)。\n\n\n接下来 $n$ 行，每行两个整数 $x_i,y_i$ ($1 \\leq x_i,y_i \\leq 99$)，含义如上所述。", "outputFormat": "输出仅一行一个实数，为被至少一片窗花覆盖的面积。\n\n你的答案被认为正确当且仅当其相对误差或绝对误差不超过 $10^{−4}$。形式化地说，假设你的答案是 $a$，标准答案是 $b$。你的答案被认为正确当且仅当 $\\frac{|a−b|}{\\max (1,|b|)} \\leq 10^{−4}$。\n", "hint": "\n\n对于第一个样例的解释如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wzkohjei.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNCPC2024] 窗花", "background": "", "description": "有一扇 $100 \\text{cm} \\times 100 \\text{cm}$ 的窗户和 $n$ 个对角线长为 $2 \\text{cm}$ 的正方形窗花。建立坐标系，以窗户左下角的坐标为原点 $(0,0)$，右上角坐标为 $(100,100)$，第 $i$ 个窗花中心被贴在非边缘的整坐标点 $(x_i,y_i)$ ($1 \\leq x_i,y_i \\leq 99$) 上，窗花的对角线与坐标轴平行。\n\n问窗户有多大的面积被至少一片窗花覆盖。", "inputFormat": "第一行一个整数 $n$ ($1 \\leq n \\leq 10000$)。\n\n\n接下来 $n$ 行，每行两个整数 $x_i,y_i$ ($1 \\leq x_i,y_i \\leq 99$)，含义如上所述。", "outputFormat": "输出仅一行一个实数，为被至少一片窗花覆盖的面积。\n\n你的答案被认为正确当且仅当其相对误差或绝对误差不超过 $10^{−4}$。形式化地说，假设你的答案是 $a$，标准答案是 $b$。你的答案被认为正确当且仅当 $\\frac{|a−b|}{\\max (1,|b|)} \\leq 10^{−4}$。\n", "hint": "\n\n对于第一个样例的解释如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wzkohjei.png)", "locale": "zh-CN"}}}
{"pid": "P10704", "type": "P", "difficulty": 5, "samples": [["5 30\n2 2 8 4 2 ", "88"], ["10 5035239199\n4853 53137 86933 4465 13588 11899 49877 16317 43326 52183 ", "2715"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "整除分块"], "title": "救赎（Redemption）", "background": ">$$主啊，$$\n>\n>$$这个人也是我们要拯救的吗\\dots$$\n>\n>$$愿我的弹雨能熄灭你们的痛苦\\dots$$\n>\n>$$如果您见到一位散发着不祥气息的天使，$$\n>\n>$$请替我转告她：$$\n>\n>$$我从来没有忘记过她\\dots$$", "description": "给出 $n,m$ 和 $n$ 个整数 $a_i$（$1\\le i\\le n$）。\n\n求：\n\n$$ \\sum\\limits_{i=1}^{n} \\sum\\limits_{j=1}^{n}\\left \\lfloor \\frac{m}{a_ia_j}  \\right \\rfloor$$\n\n输出答案对 $998244353$ 取模的结果。", "inputFormat": "第一行两个整数表示 $n,m$。\n\n第二行 $n$ 个整数表示 $a_1,a_2\\dots a_n$。", "outputFormat": "一行一个整数表示答案对 $998244353$ 取模后的结果。", "hint": "#### 【样例解释】\n\n样例一中的贡献如下：\n\n$(a_1,a_1):\\left \\lfloor \\frac{30}{2\\times 2} \\right \\rfloor =7$。\n\n$(a_1,a_2),(a_2,a_1):\\left \\lfloor \\frac{30}{2\\times 2} \\right \\rfloor \\times 2=14$。\n\n$(a_1,a_3),(a_3,a_1):\\left \\lfloor \\frac{30}{2\\times 8} \\right \\rfloor \\times 2=2$。\n\n$(a_1,a_4),(a_4,a_1):\\left \\lfloor \\frac{30}{2\\times 4} \\right \\rfloor \\times 2=6$。\n\n$(a_1,a_5),(a_5,a_1):\\left \\lfloor \\frac{30}{2\\times 2} \\right \\rfloor \\times 2=14$。\n\n$(a_2,a_2):\\left \\lfloor \\frac{30}{2\\times 2} \\right \\rfloor =7$。\n\n$(a_2,a_3),(a_3,a_2):\\left \\lfloor \\frac{30}{2\\times 8} \\right \\rfloor \\times 2=2$。\n\n$(a_2,a_4),(a_4,a_2):\\left \\lfloor \\frac{30}{2\\times 4} \\right \\rfloor \\times 2=6$。\n\n$(a_2,a_5),(a_5,a_2):\\left \\lfloor \\frac{30}{2\\times 2} \\right \\rfloor \\times 2=14$。\n\n$(a_3,a_5),(a_5,a_3):\\left \\lfloor \\frac{30}{2\\times 8} \\right \\rfloor \\times 2=2$。\n\n$(a_4,a_4):\\left \\lfloor \\frac{30}{4\\times 4} \\right \\rfloor=1$。\n\n$(a_4,a_5),(a_5,a_4):\\left \\lfloor \\frac{30}{2\\times 4} \\right \\rfloor \\times 2=6$。\n\n$(a_5,a_5):\\left \\lfloor \\frac{30}{2\\times 2} \\right \\rfloor=7$。\n\n$7+14+2+6+14+7+2+6+14+2+1+6+7=88$。\n\n#### 【数据范围】\n\n| subtask 编号 | $n$ | $m$ | $a_i$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $\\le 10^2$ | $\\le 10^{6}$ | $\\le 10^5$ | $10$ | $-$ |\n| $1$ | $\\le 10^4$ | $\\le 10^{10}$ | $\\le 10^9$ | $10$ | $-$ |\n| $2$ | $\\le 10^6$ | $\\le 10^{10}$ | $\\le 10^4$ | $10$ | $-$ |\n| $3$ | $\\le 10^6$ | $\\le 10^8$ | $\\le 10^9$ | $20$ | $-$ |\n| $4$ | $\\le 10^6$ | $\\le 10^{10}$ | $\\le 10^9$ | $20$ | $A$ |\n| $5$ | $\\le 10^6$ | $\\le 10^{10}$ | $\\le 10^9$ | $30$ | $-$ |\n\n特殊性质 $A$：$\\sum\\limits_{i=1}^{n}a_i\\le10^7$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^6$，$1\\le a_i\\le 10^9$，$\\sum\\limits_{i=1}^{n}a_i\\le10^9$，$1\\le m \\le10^{10}$。\n\n**特别提醒：本题使用 subtask 捆绑测试，只有通过一个子任务的全部测试点才能获得此子任务的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "救赎（Redemption）", "background": ">$$主啊，$$\n>\n>$$这个人也是我们要拯救的吗\\dots$$\n>\n>$$愿我的弹雨能熄灭你们的痛苦\\dots$$\n>\n>$$如果您见到一位散发着不祥气息的天使，$$\n>\n>$$请替我转告她：$$\n>\n>$$我从来没有忘记过她\\dots$$", "description": "给出 $n,m$ 和 $n$ 个整数 $a_i$（$1\\le i\\le n$）。\n\n求：\n\n$$ \\sum\\limits_{i=1}^{n} \\sum\\limits_{j=1}^{n}\\left \\lfloor \\frac{m}{a_ia_j}  \\right \\rfloor$$\n\n输出答案对 $998244353$ 取模的结果。", "inputFormat": "第一行两个整数表示 $n,m$。\n\n第二行 $n$ 个整数表示 $a_1,a_2\\dots a_n$。", "outputFormat": "一行一个整数表示答案对 $998244353$ 取模后的结果。", "hint": "#### 【样例解释】\n\n样例一中的贡献如下：\n\n$(a_1,a_1):\\left \\lfloor \\frac{30}{2\\times 2} \\right \\rfloor =7$。\n\n$(a_1,a_2),(a_2,a_1):\\left \\lfloor \\frac{30}{2\\times 2} \\right \\rfloor \\times 2=14$。\n\n$(a_1,a_3),(a_3,a_1):\\left \\lfloor \\frac{30}{2\\times 8} \\right \\rfloor \\times 2=2$。\n\n$(a_1,a_4),(a_4,a_1):\\left \\lfloor \\frac{30}{2\\times 4} \\right \\rfloor \\times 2=6$。\n\n$(a_1,a_5),(a_5,a_1):\\left \\lfloor \\frac{30}{2\\times 2} \\right \\rfloor \\times 2=14$。\n\n$(a_2,a_2):\\left \\lfloor \\frac{30}{2\\times 2} \\right \\rfloor =7$。\n\n$(a_2,a_3),(a_3,a_2):\\left \\lfloor \\frac{30}{2\\times 8} \\right \\rfloor \\times 2=2$。\n\n$(a_2,a_4),(a_4,a_2):\\left \\lfloor \\frac{30}{2\\times 4} \\right \\rfloor \\times 2=6$。\n\n$(a_2,a_5),(a_5,a_2):\\left \\lfloor \\frac{30}{2\\times 2} \\right \\rfloor \\times 2=14$。\n\n$(a_3,a_5),(a_5,a_3):\\left \\lfloor \\frac{30}{2\\times 8} \\right \\rfloor \\times 2=2$。\n\n$(a_4,a_4):\\left \\lfloor \\frac{30}{4\\times 4} \\right \\rfloor=1$。\n\n$(a_4,a_5),(a_5,a_4):\\left \\lfloor \\frac{30}{2\\times 4} \\right \\rfloor \\times 2=6$。\n\n$(a_5,a_5):\\left \\lfloor \\frac{30}{2\\times 2} \\right \\rfloor=7$。\n\n$7+14+2+6+14+7+2+6+14+2+1+6+7=88$。\n\n#### 【数据范围】\n\n| subtask 编号 | $n$ | $m$ | $a_i$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $\\le 10^2$ | $\\le 10^{6}$ | $\\le 10^5$ | $10$ | $-$ |\n| $1$ | $\\le 10^4$ | $\\le 10^{10}$ | $\\le 10^9$ | $10$ | $-$ |\n| $2$ | $\\le 10^6$ | $\\le 10^{10}$ | $\\le 10^4$ | $10$ | $-$ |\n| $3$ | $\\le 10^6$ | $\\le 10^8$ | $\\le 10^9$ | $20$ | $-$ |\n| $4$ | $\\le 10^6$ | $\\le 10^{10}$ | $\\le 10^9$ | $20$ | $A$ |\n| $5$ | $\\le 10^6$ | $\\le 10^{10}$ | $\\le 10^9$ | $30$ | $-$ |\n\n特殊性质 $A$：$\\sum\\limits_{i=1}^{n}a_i\\le10^7$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^6$，$1\\le a_i\\le 10^9$，$\\sum\\limits_{i=1}^{n}a_i\\le10^9$，$1\\le m \\le10^{10}$。\n\n**特别提醒：本题使用 subtask 捆绑测试，只有通过一个子任务的全部测试点才能获得此子任务的分数。**", "locale": "zh-CN"}}}
{"pid": "P10705", "type": "P", "difficulty": 5, "samples": [["6\n9 1 2 4 7 10 \n8 10 5 1 1 7 ", "3\n9"], ["10\n6 13 27 31 34 59 64 66 71 95 \n4 4 10 22 26 28 46 55 62 68 ", "5\n91"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": [], "title": "孤独（Solitude）", "background": ">$$行走的岁月静好，$$\n> \n>$$苍青的天空古老。$$\n>\n>$$轻轻唱起，$$\n>\n>$$那只风鸟。$$\n>\n>$$你却不见了。$$\n", "description": "给出 $n$ 和 $n$ 个整数 $a_i$（$1\\le i\\le n$），$n$ 个整数 $b_i$（$1\\le i\\le n$）。\n\n现在对于一个长为 $n$ 的序列 $S$ 有以下规定：\n\n- $S_i=a_i$ 或 $b_i$。\n\n- 对于所有的 $S_i$（$1\\le i\\le n$），若 $S_i>S_{i-1}$ 且 $S_i>S_{i+1}$ 那么称 $S_i$ 为**峰**，特别地 $S_0=S_{n+1}=0$。\n\n**现求：最大峰数以及取到最大峰数时的最大极差。**\n\n**极差：一个序列中最大值和最小值的差。**\n\n**updated：$S_0$ 和 $S_{n+1}$ 不参与极差运算。**", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数，表示 $a_1,a_2\\dots a_n$。\n\n第三行 $n$ 个整数，表示 $b_1,b_2\\dots b_n$。", "outputFormat": "输出共两行。\n\n第一行一个整数表示**最大峰数**。\n\n第二行一个整数表示**取到最大峰数时的最大极差**。", "hint": "#### 【样例解释】\n\n样例一中 $S$ 序列的一种合法方案为 $9,1,2,4,1,10$。\n\n其中 $S_1,S_4,S_6$ 为**峰**，最大值为 $10-1=9$。 \n\n#### 【数据范围】\n\n| subtask 编号 | $n$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $\\le 20$ | $-$ | $10$ |\n| $1$ | $\\le 2000$ | $-$ | $10$ |\n| $2$ | $\\le 10^5$ | $A$ | $10$ |\n| $3$ | $\\le 10^5$ | $B$ | $10$ |\n| $4$ | $\\le 10^5$ | $C$ | $10$ |\n| $5$ | $\\le 5\\times10^5$ | $-$ | $50$ |\n\n特殊性质 $A$：$\\forall 1< i\\le n$，$\\text{max}(a_{i-1},b_{i-1})\\le \\text{min}(a_i,b_i)$。\n\n特殊性质 $B$：$\\forall 1< i\\le n$，$\\text{min}(a_i,b_i)\\le\\text{max}(a_{i-1},b_{i-1})\\le\\text{max}(a_i,b_i)$。\n\n特殊性质 $C$：$\\forall 1\\le i\\le n$，$a_i=k$，$k$ 是一个正整数。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times10^5$，$1\\le a_i,b_i\\le 10^9$，保证 $a_i\\ne b_i$。\n\n**特别提醒：本题使用 subtask 捆绑测试，只有通过一个子任务的全部测试点才能获得此子任务的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "孤独（Solitude）", "background": ">$$行走的岁月静好，$$\n> \n>$$苍青的天空古老。$$\n>\n>$$轻轻唱起，$$\n>\n>$$那只风鸟。$$\n>\n>$$你却不见了。$$\n", "description": "给出 $n$ 和 $n$ 个整数 $a_i$（$1\\le i\\le n$），$n$ 个整数 $b_i$（$1\\le i\\le n$）。\n\n现在对于一个长为 $n$ 的序列 $S$ 有以下规定：\n\n- $S_i=a_i$ 或 $b_i$。\n\n- 对于所有的 $S_i$（$1\\le i\\le n$），若 $S_i>S_{i-1}$ 且 $S_i>S_{i+1}$ 那么称 $S_i$ 为**峰**，特别地 $S_0=S_{n+1}=0$。\n\n**现求：最大峰数以及取到最大峰数时的最大极差。**\n\n**极差：一个序列中最大值和最小值的差。**\n\n**updated：$S_0$ 和 $S_{n+1}$ 不参与极差运算。**", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数，表示 $a_1,a_2\\dots a_n$。\n\n第三行 $n$ 个整数，表示 $b_1,b_2\\dots b_n$。", "outputFormat": "输出共两行。\n\n第一行一个整数表示**最大峰数**。\n\n第二行一个整数表示**取到最大峰数时的最大极差**。", "hint": "#### 【样例解释】\n\n样例一中 $S$ 序列的一种合法方案为 $9,1,2,4,1,10$。\n\n其中 $S_1,S_4,S_6$ 为**峰**，最大值为 $10-1=9$。 \n\n#### 【数据范围】\n\n| subtask 编号 | $n$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $\\le 20$ | $-$ | $10$ |\n| $1$ | $\\le 2000$ | $-$ | $10$ |\n| $2$ | $\\le 10^5$ | $A$ | $10$ |\n| $3$ | $\\le 10^5$ | $B$ | $10$ |\n| $4$ | $\\le 10^5$ | $C$ | $10$ |\n| $5$ | $\\le 5\\times10^5$ | $-$ | $50$ |\n\n特殊性质 $A$：$\\forall 1< i\\le n$，$\\text{max}(a_{i-1},b_{i-1})\\le \\text{min}(a_i,b_i)$。\n\n特殊性质 $B$：$\\forall 1< i\\le n$，$\\text{min}(a_i,b_i)\\le\\text{max}(a_{i-1},b_{i-1})\\le\\text{max}(a_i,b_i)$。\n\n特殊性质 $C$：$\\forall 1\\le i\\le n$，$a_i=k$，$k$ 是一个正整数。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times10^5$，$1\\le a_i,b_i\\le 10^9$，保证 $a_i\\ne b_i$。\n\n**特别提醒：本题使用 subtask 捆绑测试，只有通过一个子任务的全部测试点才能获得此子任务的分数。**", "locale": "zh-CN"}}}
{"pid": "P10706", "type": "P", "difficulty": 6, "samples": [["8\n3 7 2 2 2 3 72 24 \n1 2\n1 3\n1 4\n4 5\n2 6\n5 7\n4 8\n", "785\n0\n0\n1972\n144\n0\n0\n0"], ["15\n73 83 31 9514 1189 43 79 2 2 1798 5063 2 5 2573 53 \n1 2\n2 3\n1 4\n4 5\n1 6\n3 7\n5 8\n5 9\n6 10\n7 11\n10 12\n9 13\n7 14\n13 15\n", "23952214\n633788\n79763\n38056\n4\n0\n13027099\n0\n0\n3596\n0\n0\n0\n0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": [], "title": "悲哀（Sorrow）", "background": ">$$你是天使，$$\n>\n>$$于光与圣歌中降临。$$\n>\n>$$我是恶魔，$$\n>\n>$$从血与污泥中爬出。$$\n>\n>$$我想拥抱你，$$\n>\n>$$但是害怕血，$$\n>\n>$$染红你洁白的羽翼。$$", "description": "给出一棵有 $n$ 个节点且以 $1$ 为根节点的树，每个节点有两个权值 $a_i,b_i$（$1\\le i\\le n$）。$a_i$ 已经给出，$b_i$ 初始为 $0$。\n\n现在对于每一对节点 $(u,v)$（$1\\le u<v\\le n$），设 $x=\\operatorname{LCA}(u,v)$，如果 $\\gcd(a_u,a_v)>1$ 那么 $b_x\\gets b_x+a_u\\times a_v$，否则不做任何操作。\n\n对于每个 $1\\le i\\le n$ 求出 $b_i\\bmod998244353$。", "inputFormat": "第一行一个整数 $n$，表示有 $n$ 个节点。\n\n第二行 $n$ 个正整数，表示 $a_1,a_2\\dots a_n$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示节点 $u$ 和节点 $v$ 之间有一条边。", "outputFormat": "输出共 $n$ 行，每行一个整数。\n\n第 $i$ 行表示 $b_i$ 对 $998244353$ 取模后的结果。", "hint": "#### 【样例解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bti6350r.png)\n\n建出的树如图。\n\n有以下贡献：\n\n- 对 $1$ 号节点：\n\n$(3,4)$ 贡献 $4$。\n\n$(3,5)$ 贡献 $4$。\n\n$(3,7)$ 贡献 $144$。\n\n$(3,8)$ 贡献 $48$。\n\n$(1,6)$ 贡献 $9$。\n\n$(1,7)$ 贡献 $216$。\n\n$(1,8)$ 贡献 $72$。\n\n$(6,7)$ 贡献 $216$。\n\n$(6,8)$ 贡献 $72$。\n\n总共 $785$。\n\n- 对 $4$ 号节点：\n\n$(4,5)$ 贡献 $4$。\n\n$(4,7)$ 贡献 $144$。\n\n$(4,8)$ 贡献 $48$。\n\n$(5,8)$ 贡献 $48$。\n\n$(7,8)$ 贡献 $1728$。\n\n总共 $1972$。\n\n- 对 $5$ 号节点：\n\n$(5,7)$ 贡献 $144$。\n\n总共 $144$。\n\n其他节点显然都为 $0$。\n\n#### 【数据范围】\n\n| subtask 编号 | $n$ | $a_i$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $100$ | $\\le 1000$ | $-$ | $5$ |\n| $1$ | $2000$ | $\\le 10^5$ | $-$ | $10$ |\n| $2$ | $10^5$ | $\\le 5 \\times 10^5$ | $A$ | $25$ |\n| $3$ | $2 \\times  10^5$ | $\\le 5 \\times 10^5$ | $B$ | $30$ |\n| $4$ | $2 \\times  10^5$ | $\\le 5 \\times 10^5$ | $-$ | $30$ |\n\n特殊性质 $A$：保证所有的 $a_i$ 随机生成。\n\n特殊性质 $B$：保证树的形态是一棵完全二叉树。\n\n对于 $100\\%$ 的数据，$1\\le n\\le2\\times10^5$，$1\\le a_i\\le5\\times10^5$。\n\n**特别提醒：本题使用 subtask 捆绑测试，只有通过一个子任务的全部测试点才能获得此子任务的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "悲哀（Sorrow）", "background": ">$$你是天使，$$\n>\n>$$于光与圣歌中降临。$$\n>\n>$$我是恶魔，$$\n>\n>$$从血与污泥中爬出。$$\n>\n>$$我想拥抱你，$$\n>\n>$$但是害怕血，$$\n>\n>$$染红你洁白的羽翼。$$", "description": "给出一棵有 $n$ 个节点且以 $1$ 为根节点的树，每个节点有两个权值 $a_i,b_i$（$1\\le i\\le n$）。$a_i$ 已经给出，$b_i$ 初始为 $0$。\n\n现在对于每一对节点 $(u,v)$（$1\\le u<v\\le n$），设 $x=\\operatorname{LCA}(u,v)$，如果 $\\gcd(a_u,a_v)>1$ 那么 $b_x\\gets b_x+a_u\\times a_v$，否则不做任何操作。\n\n对于每个 $1\\le i\\le n$ 求出 $b_i\\bmod998244353$。", "inputFormat": "第一行一个整数 $n$，表示有 $n$ 个节点。\n\n第二行 $n$ 个正整数，表示 $a_1,a_2\\dots a_n$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示节点 $u$ 和节点 $v$ 之间有一条边。", "outputFormat": "输出共 $n$ 行，每行一个整数。\n\n第 $i$ 行表示 $b_i$ 对 $998244353$ 取模后的结果。", "hint": "#### 【样例解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bti6350r.png)\n\n建出的树如图。\n\n有以下贡献：\n\n- 对 $1$ 号节点：\n\n$(3,4)$ 贡献 $4$。\n\n$(3,5)$ 贡献 $4$。\n\n$(3,7)$ 贡献 $144$。\n\n$(3,8)$ 贡献 $48$。\n\n$(1,6)$ 贡献 $9$。\n\n$(1,7)$ 贡献 $216$。\n\n$(1,8)$ 贡献 $72$。\n\n$(6,7)$ 贡献 $216$。\n\n$(6,8)$ 贡献 $72$。\n\n总共 $785$。\n\n- 对 $4$ 号节点：\n\n$(4,5)$ 贡献 $4$。\n\n$(4,7)$ 贡献 $144$。\n\n$(4,8)$ 贡献 $48$。\n\n$(5,8)$ 贡献 $48$。\n\n$(7,8)$ 贡献 $1728$。\n\n总共 $1972$。\n\n- 对 $5$ 号节点：\n\n$(5,7)$ 贡献 $144$。\n\n总共 $144$。\n\n其他节点显然都为 $0$。\n\n#### 【数据范围】\n\n| subtask 编号 | $n$ | $a_i$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $100$ | $\\le 1000$ | $-$ | $5$ |\n| $1$ | $2000$ | $\\le 10^5$ | $-$ | $10$ |\n| $2$ | $10^5$ | $\\le 5 \\times 10^5$ | $A$ | $25$ |\n| $3$ | $2 \\times  10^5$ | $\\le 5 \\times 10^5$ | $B$ | $30$ |\n| $4$ | $2 \\times  10^5$ | $\\le 5 \\times 10^5$ | $-$ | $30$ |\n\n特殊性质 $A$：保证所有的 $a_i$ 随机生成。\n\n特殊性质 $B$：保证树的形态是一棵完全二叉树。\n\n对于 $100\\%$ 的数据，$1\\le n\\le2\\times10^5$，$1\\le a_i\\le5\\times10^5$。\n\n**特别提醒：本题使用 subtask 捆绑测试，只有通过一个子任务的全部测试点才能获得此子任务的分数。**", "locale": "zh-CN"}}}
{"pid": "P10707", "type": "P", "difficulty": 6, "samples": [["3 5", "13"], ["12 7", "48643"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": [], "title": "永恒（Eternity）", "background": ">$$行走人间的，$$\n>\n>$$不一定是天使。$$\n>\n>$$带来灾厄的，$$\n>\n>$$不一定是恶魔。$$\n>\n>$$恶魔的眼泪被天使珍藏 ， $$\n>\n>$$天使的纯净由恶魔守护。$$\n>\n>$$或许，$$\n>\n>$$这是最好的结局。$$", "description": "一些前置定义：\n\n- 可重集中的元素必须是非负整数。\n\n- 可重集的大小为可重集中元素的个数。\n\n- 对于一个大小为 $x$ 的可重集，设其中的元素为 $a_1,a_2\\dots a_x$，那么这个可重集的**权值**就为 $a_1\\oplus a_2\\oplus \\dots \\oplus a_x$，即可重集中所有元素的**异或和**。\n\n现在给出 $n,m$。\n\n问有多少不同的大小为 $n$ 的可重集 $S$ 满足：\n\n$$\\max\\limits_{T \\subseteq  S,T\\ne \\emptyset}{Q_T}=m$$\n\n其中 $Q_T$ 为可重集 $T$ 的**权值**。\n\n**注意：根据可重集的性质，数字相同但数字顺序不同的可重集算同一种可重集，即 $\\left \\{ 1,2,3 \\right \\} $ 与 $\\left \\{ 3,2,1 \\right \\} $ 算同一种可重集。**\n\n求出不同可重集的个数 $\\bmod\\ 998244353$ 的结果。\n\n可以证明这样的可重集个数是有限的。", "inputFormat": "第一行两个整数，分别表示 $n$ 和 $m$。", "outputFormat": "一行一个整数，表示答案对 $998244353$ 取模后的结果。", "hint": "#### 【样例解释】\n\n样例一中 $13$ 种方案分别为：\n\n$$(0,0,5)$$，$$(0,1,4)$$，$$(0,1,5)$$，$$(0,4,5)$$，$$(0,5,5)$$，$$(1,1,4)$$，$$(1,1,5)$$，$$(1,4,4)$$，$$(1,4,5)$$，$$(1,5,5)$$，$$(4,4,5)$$，$$(4,5,5)$$，$$(5,5,5)$$。\n\n#### 【数据范围】\n\n| subtask 编号 | $n$ | $m$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :-----: |\n| $0$ | $\\le 10$ | $\\le 10$ | $-$ | $10$ |\n| $1$ | $\\le 10^5$ | $<2^{60}$ | $A$ | $20$ |\n| $2$ | $\\le 2000$ | $\\le 2000$ | $-$ | $10$ |\n| $3$ | $\\le 10^5$ | $<2^{60}$ | $-$ | $60$ | \n\n特殊性质 $A$： $\\operatorname{popcount}(m)\\le 5\\ $，$\\operatorname{popcount}(m)$ 表示 $m$ 的二进制表示中 $1$ 的个数。\n\n对于 $100\\%$ 的数据保证 $1\\le n\\le 10^5$，$0\\le m<2^{60}$。\n\n**特别提醒：本题使用 subtask 捆绑测试，只有通过一个子任务的全部测试点才能获得此子任务的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "永恒（Eternity）", "background": ">$$行走人间的，$$\n>\n>$$不一定是天使。$$\n>\n>$$带来灾厄的，$$\n>\n>$$不一定是恶魔。$$\n>\n>$$恶魔的眼泪被天使珍藏 ， $$\n>\n>$$天使的纯净由恶魔守护。$$\n>\n>$$或许，$$\n>\n>$$这是最好的结局。$$", "description": "一些前置定义：\n\n- 可重集中的元素必须是非负整数。\n\n- 可重集的大小为可重集中元素的个数。\n\n- 对于一个大小为 $x$ 的可重集，设其中的元素为 $a_1,a_2\\dots a_x$，那么这个可重集的**权值**就为 $a_1\\oplus a_2\\oplus \\dots \\oplus a_x$，即可重集中所有元素的**异或和**。\n\n现在给出 $n,m$。\n\n问有多少不同的大小为 $n$ 的可重集 $S$ 满足：\n\n$$\\max\\limits_{T \\subseteq  S,T\\ne \\emptyset}{Q_T}=m$$\n\n其中 $Q_T$ 为可重集 $T$ 的**权值**。\n\n**注意：根据可重集的性质，数字相同但数字顺序不同的可重集算同一种可重集，即 $\\left \\{ 1,2,3 \\right \\} $ 与 $\\left \\{ 3,2,1 \\right \\} $ 算同一种可重集。**\n\n求出不同可重集的个数 $\\bmod\\ 998244353$ 的结果。\n\n可以证明这样的可重集个数是有限的。", "inputFormat": "第一行两个整数，分别表示 $n$ 和 $m$。", "outputFormat": "一行一个整数，表示答案对 $998244353$ 取模后的结果。", "hint": "#### 【样例解释】\n\n样例一中 $13$ 种方案分别为：\n\n$$(0,0,5)$$，$$(0,1,4)$$，$$(0,1,5)$$，$$(0,4,5)$$，$$(0,5,5)$$，$$(1,1,4)$$，$$(1,1,5)$$，$$(1,4,4)$$，$$(1,4,5)$$，$$(1,5,5)$$，$$(4,4,5)$$，$$(4,5,5)$$，$$(5,5,5)$$。\n\n#### 【数据范围】\n\n| subtask 编号 | $n$ | $m$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :-----: |\n| $0$ | $\\le 10$ | $\\le 10$ | $-$ | $10$ |\n| $1$ | $\\le 10^5$ | $<2^{60}$ | $A$ | $20$ |\n| $2$ | $\\le 2000$ | $\\le 2000$ | $-$ | $10$ |\n| $3$ | $\\le 10^5$ | $<2^{60}$ | $-$ | $60$ | \n\n特殊性质 $A$： $\\operatorname{popcount}(m)\\le 5\\ $，$\\operatorname{popcount}(m)$ 表示 $m$ 的二进制表示中 $1$ 的个数。\n\n对于 $100\\%$ 的数据保证 $1\\le n\\le 10^5$，$0\\le m<2^{60}$。\n\n**特别提醒：本题使用 subtask 捆绑测试，只有通过一个子任务的全部测试点才能获得此子任务的分数。**", "locale": "zh-CN"}}}
{"pid": "P10708", "type": "P", "difficulty": 1, "samples": [["3 4 9\n2 3 2\n", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "2024", "枚举", "NOISG（新加坡）"], "title": "[NOISG 2024 Prelim] Tourist", "background": "翻译自 [NOI SG 2024 Prelim A.Tourist](https://github.com/noisg/noi-2024-prelim)。", "description": "你是一名游客，你想要在 $n$ 天内游览一座城市。\n\n你已经为自己安排好了行程。第 $i$ 天你需要乘坐 $a_i$ 次火车。\n\n你了解到有以下两种火车票：\n\n- 单程票：花费 $x$ 元购买一张单程票，可以乘坐 $1$ 次火车。\n\n- 单日票：花费 $y$ 元购买一张单日票，可以在一天中不限次数地乘坐任意次火车。\n\n请你求出购买火车票需要的最小花费。", "inputFormat": "第一行，三个整数 $n,x,y$；\n\n第二行 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "一行一个整数表示最小花费。", "hint": "### 【样例 #1 解释】\n\n你的行程有 $3$ 天，一张单程票 $4$ 元，一张单日票 $9$ 元。\n\n在第一天，购买 $2$ 张单程票，花费 $8$ 元。\n\n在第二天，购买 $1$ 张单日票，花费 $9$ 元。\n\n在第三天，购买 $2$ 张单程票，花费 $8$ 元。\n\n最小花费为 $8+9+8=25$ 元。\n\n### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$100$|无|\n\n对于 $100\\%$ 的数据，$1 \\le n,x \\le 1000,1 \\le y \\le 10^6,1 \\le a_i \\le 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2024 Prelim] Tourist", "background": "翻译自 [NOI SG 2024 Prelim A.Tourist](https://github.com/noisg/noi-2024-prelim)。", "description": "你是一名游客，你想要在 $n$ 天内游览一座城市。\n\n你已经为自己安排好了行程。第 $i$ 天你需要乘坐 $a_i$ 次火车。\n\n你了解到有以下两种火车票：\n\n- 单程票：花费 $x$ 元购买一张单程票，可以乘坐 $1$ 次火车。\n\n- 单日票：花费 $y$ 元购买一张单日票，可以在一天中不限次数地乘坐任意次火车。\n\n请你求出购买火车票需要的最小花费。", "inputFormat": "第一行，三个整数 $n,x,y$；\n\n第二行 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "一行一个整数表示最小花费。", "hint": "### 【样例 #1 解释】\n\n你的行程有 $3$ 天，一张单程票 $4$ 元，一张单日票 $9$ 元。\n\n在第一天，购买 $2$ 张单程票，花费 $8$ 元。\n\n在第二天，购买 $1$ 张单日票，花费 $9$ 元。\n\n在第三天，购买 $2$ 张单程票，花费 $8$ 元。\n\n最小花费为 $8+9+8=25$ 元。\n\n### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$100$|无|\n\n对于 $100\\%$ 的数据，$1 \\le n,x \\le 1000,1 \\le y \\le 10^6,1 \\le a_i \\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P10709", "type": "P", "difficulty": 2, "samples": [["5\n3 2 -1 4 5", "12"], ["1\n10", "10"], ["6\n1 -3 2 10 -4 9", "21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "贪心", "2024", "排序", "NOISG（新加坡）"], "title": "[NOISG 2024 Prelim] Party", "background": "翻译自 [NOI SG 2024 Prelim B.Party](https://github.com/noisg/noi-2024-prelim)。", "description": "James 有 $n$ 个朋友，他想选择其中的 $0$ 个或者更多朋友来参加他的聚会。第 $i$ 个朋友如果参加了他的聚会，会产生 $a_i$ 点快乐值。注意：有些朋友并不想参加聚会，所以他们的 $a_i$ 会是负的。\n\n然而，他家只有一排 $n$ 个座位，而且因为社交距离，两个人不能坐在相邻的座位上。现在 James 想知道，如果他按照最优方案邀请朋友，这些朋友的快乐值的和最大为多少。", "inputFormat": "第一行，一个整数 $n$。\n\n第二行 $n$ 个整数，表示 $a$。", "outputFormat": "一行一个整数，表示答案。", "hint": "### 【样例 #1 解释】\n\nJames 可以邀请第 $1,4,5$ 位朋友。\n\n\n### 【样例 #2 解释】\n\nJames 可以邀请唯一一位朋友。\n\n\n### 【样例 #3 解释】\n\nJames 可以邀请第 $3,4,6$ 位朋友。\n\n\n### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$49$|$n\\le 3$|\n|$2$|$38$|$n\\le 1000$|\n|$3$|$13$|无|\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^5,-10^9 \\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2024 Prelim] Party", "background": "翻译自 [NOI SG 2024 Prelim B.Party](https://github.com/noisg/noi-2024-prelim)。", "description": "James 有 $n$ 个朋友，他想选择其中的 $0$ 个或者更多朋友来参加他的聚会。第 $i$ 个朋友如果参加了他的聚会，会产生 $a_i$ 点快乐值。注意：有些朋友并不想参加聚会，所以他们的 $a_i$ 会是负的。\n\n然而，他家只有一排 $n$ 个座位，而且因为社交距离，两个人不能坐在相邻的座位上。现在 James 想知道，如果他按照最优方案邀请朋友，这些朋友的快乐值的和最大为多少。", "inputFormat": "第一行，一个整数 $n$。\n\n第二行 $n$ 个整数，表示 $a$。", "outputFormat": "一行一个整数，表示答案。", "hint": "### 【样例 #1 解释】\n\nJames 可以邀请第 $1,4,5$ 位朋友。\n\n\n### 【样例 #2 解释】\n\nJames 可以邀请唯一一位朋友。\n\n\n### 【样例 #3 解释】\n\nJames 可以邀请第 $3,4,6$ 位朋友。\n\n\n### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$49$|$n\\le 3$|\n|$2$|$38$|$n\\le 1000$|\n|$3$|$13$|无|\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^5,-10^9 \\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10710", "type": "P", "difficulty": 3, "samples": [["2 3\n2 1 8\n5 4 7\n", "1"], ["3 3\n3 1 4\n2 7 18\n9 8 10", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "双指针 two-pointer", "NOISG（新加坡）"], "title": "[NOISG 2024 Prelim] School Photo", "background": "翻译自 [NOI SG 2024 Prelim C.School Photo](https://github.com/noisg/noi-2024-prelim)。", "description": "Zane 是 NOI 学校的校长。NOI 学校有 $n$ 个班，每个班有 $s$ 名同学。第 $i$ 个班中的第 $j$ 名同学的身高是 $a_{i,j}$。\n\n现在 Zane 想从每个班上选出一名同学拍照，使得这 $n$ 名同学中最高的同学和最低的同学的身高差最小。\n\n请你输出这个最小值。", "inputFormat": "第一行，两个整数 $n,s$；\n\n接下来 $n$ 行，每行 $s$ 个整数，表示 $a$。", "outputFormat": "一行一个整数表示答案。", "hint": "### 【样例 #2 解释】\n\n选择 $a_{1,3},a_{2,2},a_{3,2}$，答案为 $8-4=4$。\n\n### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$11$|$n=2$|\n|$2$|$22$|$n,s\\le100$|\n|$3$|$9$|$n,s\\le250$|\n|$4$|$33$|$n,s\\le500$|\n|$5$|$25$|无|\n\n对于 $100\\%$ 的数据，$1\\le n,s \\le 1000,1\\le a_{i,j} \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2024 Prelim] School Photo", "background": "翻译自 [NOI SG 2024 Prelim C.School Photo](https://github.com/noisg/noi-2024-prelim)。", "description": "Zane 是 NOI 学校的校长。NOI 学校有 $n$ 个班，每个班有 $s$ 名同学。第 $i$ 个班中的第 $j$ 名同学的身高是 $a_{i,j}$。\n\n现在 Zane 想从每个班上选出一名同学拍照，使得这 $n$ 名同学中最高的同学和最低的同学的身高差最小。\n\n请你输出这个最小值。", "inputFormat": "第一行，两个整数 $n,s$；\n\n接下来 $n$ 行，每行 $s$ 个整数，表示 $a$。", "outputFormat": "一行一个整数表示答案。", "hint": "### 【样例 #2 解释】\n\n选择 $a_{1,3},a_{2,2},a_{3,2}$，答案为 $8-4=4$。\n\n### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$11$|$n=2$|\n|$2$|$22$|$n,s\\le100$|\n|$3$|$9$|$n,s\\le250$|\n|$4$|$33$|$n,s\\le500$|\n|$5$|$25$|无|\n\n对于 $100\\%$ 的数据，$1\\le n,s \\le 1000,1\\le a_{i,j} \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10711", "type": "P", "difficulty": 5, "samples": [["7\n1 2 0\n1 6 0\n1 6 1\n3 5\n2 2\n1 3 0\n3 123456789012", "2\n1 2\n3 3\n2\n3 3\n4 3"], ["5\n1 1 0\n1 1 0\n1 1 0\n3 2\n1 1 0", "2\n1 1\n2 1\n"], ["4\n1 19 1\n3 10\n3 10\n3 10\n", "1\n1 10\n1\n1 9\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2024", "NOISG（新加坡）"], "title": "[NOISG 2024 Prelim] Amusement Park", "background": "翻译自 [NOI SG 2024 Prelim D.Amusement Park](https://github.com/noisg/noi-2024-prelim)。", "description": "有一家游乐园，在大门处有一项观光车服务。很显然，一辆观光车只能承载有限的人数，那么如果一个团队来到大门时，发现观光车不够坐时，他们需要决定是否愿意分开。有些团队愿意，有些不愿意。\n\n为了解决这个复杂的问题，公园的管理者蜗牛 Stuart 想请你帮忙写一个程序，支持以下三种操作：\n\n- `join`：一个新的团队进入了队列。我们用两个整数 $s,w$ 描述此次操作：$s$ 表示该团队的总人数；如果 $w=1$，那么这个团队愿意在乘坐观光车时分开；如果 $w=0$，表示他们不愿意分开。假设这次操作是所有操作中第 $i$ 次 `join` 操作，则该团队的编号为 $i$。\n\n- `leave`：给定 $i$，编号为 $i$ 的团队从队伍中离开。\n\n- `board`：给定 $b$，表示新开来一辆能坐 $b$ 人的观光车。从队头开始，如果到一个团队时，观光车可以承载所有人，那么所有人上车；否则如果该团队愿意分开，那么部分人上车；否则该团队留在原位置，在下一个团队重复该过程，直到观光车坐满，或没有人愿意上车。", "inputFormat": "第一行，一个整数 $q$；\n\n接下来 $q$ 行，每行一次操作，分为以下三种：\n\n- `1 s w`：描述一次 `join` 操作；\n\n- `2 i`：描述一次 `leave` 操作；\n\n- `3 b`：描述一次 `board` 操作。", "outputFormat": "对于 `join` 和 `leave` 操作，你不需要输出任何内容。\n\n对于每一次 `board` 操作，设有 $k$ 个团队有至少一个人上了观光车，你需要输出 $k+1$ 行：\n\n- 第一行一个整数 $k$。\n\n- 接下来 $k$ 行，每行两个整数，第一个表示团队编号，第二个表示该团队上观光车的人数。**注意：团队编号应从小到大输出。**（如果 $k=0$，忽略此部分。）", "hint": "### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$12$|$q\\le1000$|\n|$2$|$7$|$s=1,w=0$，没有 `leave` 操作|\n|$3$|$20$|$s\\le10,w=0$，没有 `leave` 操作|\n|$4$|$16$|$s\\le10$，没有 `leave` 操作|\n|$5$|$10$|$s\\le10$|\n|$6$|$35$|无特殊性质|\n\n对于 $100\\%$ 的数据：\n\n- $1 \\le q \\le 200000$\n\n- 对于所有 `join` 操作，$1 \\le s \\le 200000,0 \\le w \\le 1$。\n\n- 对于所有 `leave` 操作，保证所有 $i$ 在操作时都在队列中。\n\n- 对于所有 `board` 操作，$1 \\le b \\le 10^{12}$。\n\n- 至少有一次 `board` 操作。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2024 Prelim] Amusement Park", "background": "翻译自 [NOI SG 2024 Prelim D.Amusement Park](https://github.com/noisg/noi-2024-prelim)。", "description": "有一家游乐园，在大门处有一项观光车服务。很显然，一辆观光车只能承载有限的人数，那么如果一个团队来到大门时，发现观光车不够坐时，他们需要决定是否愿意分开。有些团队愿意，有些不愿意。\n\n为了解决这个复杂的问题，公园的管理者蜗牛 Stuart 想请你帮忙写一个程序，支持以下三种操作：\n\n- `join`：一个新的团队进入了队列。我们用两个整数 $s,w$ 描述此次操作：$s$ 表示该团队的总人数；如果 $w=1$，那么这个团队愿意在乘坐观光车时分开；如果 $w=0$，表示他们不愿意分开。假设这次操作是所有操作中第 $i$ 次 `join` 操作，则该团队的编号为 $i$。\n\n- `leave`：给定 $i$，编号为 $i$ 的团队从队伍中离开。\n\n- `board`：给定 $b$，表示新开来一辆能坐 $b$ 人的观光车。从队头开始，如果到一个团队时，观光车可以承载所有人，那么所有人上车；否则如果该团队愿意分开，那么部分人上车；否则该团队留在原位置，在下一个团队重复该过程，直到观光车坐满，或没有人愿意上车。", "inputFormat": "第一行，一个整数 $q$；\n\n接下来 $q$ 行，每行一次操作，分为以下三种：\n\n- `1 s w`：描述一次 `join` 操作；\n\n- `2 i`：描述一次 `leave` 操作；\n\n- `3 b`：描述一次 `board` 操作。", "outputFormat": "对于 `join` 和 `leave` 操作，你不需要输出任何内容。\n\n对于每一次 `board` 操作，设有 $k$ 个团队有至少一个人上了观光车，你需要输出 $k+1$ 行：\n\n- 第一行一个整数 $k$。\n\n- 接下来 $k$ 行，每行两个整数，第一个表示团队编号，第二个表示该团队上观光车的人数。**注意：团队编号应从小到大输出。**（如果 $k=0$，忽略此部分。）", "hint": "### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$12$|$q\\le1000$|\n|$2$|$7$|$s=1,w=0$，没有 `leave` 操作|\n|$3$|$20$|$s\\le10,w=0$，没有 `leave` 操作|\n|$4$|$16$|$s\\le10$，没有 `leave` 操作|\n|$5$|$10$|$s\\le10$|\n|$6$|$35$|无特殊性质|\n\n对于 $100\\%$ 的数据：\n\n- $1 \\le q \\le 200000$\n\n- 对于所有 `join` 操作，$1 \\le s \\le 200000,0 \\le w \\le 1$。\n\n- 对于所有 `leave` 操作，保证所有 $i$ 在操作时都在队列中。\n\n- 对于所有 `board` 操作，$1 \\le b \\le 10^{12}$。\n\n- 至少有一次 `board` 操作。", "locale": "zh-CN"}}}
{"pid": "P10712", "type": "P", "difficulty": 5, "samples": [["3 2\n12 14 4\n9 5 8\n", "7\n4 5 14 12 9 8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "贪心", "2024", "Special Judge", "NOISG（新加坡）"], "title": "[NOISG 2024 Prelim] Explosives", "background": "翻译自 [NOI SG 2024 Prelim E.Explosives](https://github.com/noisg/noi-2024-prelim)。", "description": "你是一名运送炸弹的卡车司机。\n\n有 $n$ 座工厂（生产炸弹）和 $n$ 座矿井（需要炸弹）排列在一条直线上。第 $i$ 座工厂的坐标为 $a_i$，第 $j$ 座矿井的坐标为 $b_j$。并且，所有 $a_i$ 和 $b_j$ 都均不相等。\n\n你今天需要在每一座工厂各领取一个炸弹，并将每一个炸弹送到某一个矿井中。初始时，你的坐标为 $0$。为了完成此任务，你可以进行以下两种操作：\n\n- `pickup(x)`：从你当前的位置驾驶卡车到坐落在 $x$ 的工厂。执行这次操作需要同时满足以下两个条件：\n\n\t- 有一个 $i$，满足 $x=a_i$。\n    \n   - 你的卡车最多装了 $c-1$ 个炸弹。\n   \n- `offload(x)`：从你当前的位置驾驶卡车到坐落在 $x$ 的矿井。执行这次操作需要同时满足以下两个条件：\n\n\t- 有一个 $j$，满足 $x=b_j$。\n    \n   - 你的卡车最少装了 $1$ 个炸弹。\n   \n由于炸弹十分危险，所以在你的卡车上需要一名安全员。如果你从点 $x$ 到点 $y$，且车上装有炸弹，那么你需要付给安全员 $|x-y|$ 元。如果车上没有炸药，则你不需要支付任何费用。\n\n请求出在花费最小的情况下的操作序列。", "inputFormat": "第一行，两个整数 $n,c$；\n\n第二行，一行 $n$ 个整数，表示 $a$。\n\n第三行，一行 $n$ 个整数，表示 $b$。", "outputFormat": "第一行，一个整数表示最小花费。\n\n第二行，输出 $2n$ 个整数，表示你访问的工厂和矿井坐标，按照访问顺序输出。\n\n例如你执行了四次操作：`pickup(3)`，`offload(5)`，`pickup(6)`，`offload(2)`，则你应该输出 `3 5 6 2`。", "hint": "### 【样例 #1 解释】\n\n按照顺序访问工厂 $3$，矿井 $2$，工厂 $2$，工厂 $1$，矿井 $1$，矿井 $3$，即可得到最小值 $7$。\n\n以此样例为例，如果你只输出正确的最小代价 $7$，你将可以得到该测试点 $50\\%$ 的分数。\n\n### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$16$|$c=1$|\n|$2$|$22$|$a_i\\le 5000,b_i>5000$|\n|$3$|$62$|无|\n\n对于 $100\\%$ 的数据，$1 \\le n,c \\le 1000,1 \\le a_i,b_i \\le 10000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2024 Prelim] Explosives", "background": "翻译自 [NOI SG 2024 Prelim E.Explosives](https://github.com/noisg/noi-2024-prelim)。", "description": "你是一名运送炸弹的卡车司机。\n\n有 $n$ 座工厂（生产炸弹）和 $n$ 座矿井（需要炸弹）排列在一条直线上。第 $i$ 座工厂的坐标为 $a_i$，第 $j$ 座矿井的坐标为 $b_j$。并且，所有 $a_i$ 和 $b_j$ 都均不相等。\n\n你今天需要在每一座工厂各领取一个炸弹，并将每一个炸弹送到某一个矿井中。初始时，你的坐标为 $0$。为了完成此任务，你可以进行以下两种操作：\n\n- `pickup(x)`：从你当前的位置驾驶卡车到坐落在 $x$ 的工厂。执行这次操作需要同时满足以下两个条件：\n\n\t- 有一个 $i$，满足 $x=a_i$。\n    \n   - 你的卡车最多装了 $c-1$ 个炸弹。\n   \n- `offload(x)`：从你当前的位置驾驶卡车到坐落在 $x$ 的矿井。执行这次操作需要同时满足以下两个条件：\n\n\t- 有一个 $j$，满足 $x=b_j$。\n    \n   - 你的卡车最少装了 $1$ 个炸弹。\n   \n由于炸弹十分危险，所以在你的卡车上需要一名安全员。如果你从点 $x$ 到点 $y$，且车上装有炸弹，那么你需要付给安全员 $|x-y|$ 元。如果车上没有炸药，则你不需要支付任何费用。\n\n请求出在花费最小的情况下的操作序列。", "inputFormat": "第一行，两个整数 $n,c$；\n\n第二行，一行 $n$ 个整数，表示 $a$。\n\n第三行，一行 $n$ 个整数，表示 $b$。", "outputFormat": "第一行，一个整数表示最小花费。\n\n第二行，输出 $2n$ 个整数，表示你访问的工厂和矿井坐标，按照访问顺序输出。\n\n例如你执行了四次操作：`pickup(3)`，`offload(5)`，`pickup(6)`，`offload(2)`，则你应该输出 `3 5 6 2`。", "hint": "### 【样例 #1 解释】\n\n按照顺序访问工厂 $3$，矿井 $2$，工厂 $2$，工厂 $1$，矿井 $1$，矿井 $3$，即可得到最小值 $7$。\n\n以此样例为例，如果你只输出正确的最小代价 $7$，你将可以得到该测试点 $50\\%$ 的分数。\n\n### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$16$|$c=1$|\n|$2$|$22$|$a_i\\le 5000,b_i>5000$|\n|$3$|$62$|无|\n\n对于 $100\\%$ 的数据，$1 \\le n,c \\le 1000,1 \\le a_i,b_i \\le 10000$。", "locale": "zh-CN"}}}
{"pid": "P10713", "type": "P", "difficulty": 2, "samples": [["3\n8 7\n999999 1000000\n3 3", "2\n2\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "分类讨论", "梦熊比赛"], "title": "【MX-X1-T1】「KDOI-05」简单的无限网格问题", "background": "原题链接：<https://oier.team/problems/X1A>。", "description": "小 X 正在参加 KDOI 机器人锦标赛。\n\n比赛场地是一个**无限大**的网格，小 X 的机器人初始时位于 $(1,1)$，他需要进行若干次操作，使得机器人移动到 $(n,m)$（$n,m\\ge 2$）。\n\n第 $i$ 次操作时，小 X 可以指定上、下、左、右中的一个方向和一个正整数 $x_i$，然后让机器人向该方向移动 $x_i$ 步。\n\n不幸的是，小 X 的机器人出现了一些 bug，因此，他的操作必须满足一些限制，否则机器人就会立即爆炸：\n\n+ 对于第 $i$ 次操作，若 $i$ 是奇数，则 $x_i$ 也是奇数；若 $i$ 是偶数，则 $x_i$ 也是偶数。\n\n请帮助小 X 计算出使他的机器人到达 $(n,m)$ 的最小操作次数。", "inputFormat": "**本题包含多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，输入包含一行两个正整数 $n,m$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示答案。可以证明，小 X 的机器人一定能在有限步内到达 $(n,m)$。", "hint": "**【样例解释】**\n\n对于第一组数据，可以按如下方式移动：\n\n$$(1,1)\\to(8,1)\\to(8,7)$$\n\n总共需要 $2$ 次操作。可以证明没有比这更优的操作方案。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n,m\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|\n| $1$ | $30$ | $10$ | 无 |\n| $2$ | $30$ | $10^9$ | $n,m$ 奇偶性相同 |\n| $3$ | $40$ | $10^9$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\leq T\\leq10^5$，$2\\leq n,m\\leq10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X1-T1】「KDOI-05」简单的无限网格问题", "background": "原题链接：<https://oier.team/problems/X1A>。", "description": "小 X 正在参加 KDOI 机器人锦标赛。\n\n比赛场地是一个**无限大**的网格，小 X 的机器人初始时位于 $(1,1)$，他需要进行若干次操作，使得机器人移动到 $(n,m)$（$n,m\\ge 2$）。\n\n第 $i$ 次操作时，小 X 可以指定上、下、左、右中的一个方向和一个正整数 $x_i$，然后让机器人向该方向移动 $x_i$ 步。\n\n不幸的是，小 X 的机器人出现了一些 bug，因此，他的操作必须满足一些限制，否则机器人就会立即爆炸：\n\n+ 对于第 $i$ 次操作，若 $i$ 是奇数，则 $x_i$ 也是奇数；若 $i$ 是偶数，则 $x_i$ 也是偶数。\n\n请帮助小 X 计算出使他的机器人到达 $(n,m)$ 的最小操作次数。", "inputFormat": "**本题包含多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，输入包含一行两个正整数 $n,m$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示答案。可以证明，小 X 的机器人一定能在有限步内到达 $(n,m)$。", "hint": "**【样例解释】**\n\n对于第一组数据，可以按如下方式移动：\n\n$$(1,1)\\to(8,1)\\to(8,7)$$\n\n总共需要 $2$ 次操作。可以证明没有比这更优的操作方案。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n,m\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|\n| $1$ | $30$ | $10$ | 无 |\n| $2$ | $30$ | $10^9$ | $n,m$ 奇偶性相同 |\n| $3$ | $40$ | $10^9$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\leq T\\leq10^5$，$2\\leq n,m\\leq10^9$。", "locale": "zh-CN"}}}
{"pid": "P10714", "type": "P", "difficulty": 3, "samples": [["3 3 4\n2 2\n1 1\n1 2\n1 3\n3 1\n", "11"], ["5 8 9\n2 7\n1 7\n2 2\n4 7\n4 5\n4 7\n2 8\n5 2\n1 7\n1 7", "153"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "分类讨论", "梦熊比赛"], "title": "【MX-X1-T2】「KDOI-05」简单的有限网格问题", "background": "原题链接：<https://oier.team/problems/X1B>。", "description": "小 S 在玩一款小游戏。游戏中会有一个 $n\\times m$ 的棋盘，其中 $k$ 个位置上有星星。初始有一个捕捉器，在 $(x,y)$ 位置。每次操作，你可以将捕捉器移动到同行或同列的某个位置，使得新位置与原位置不同且必须保证新位置 $(x',y')$ 满足 $1\\leq x'\\leq n$，$1\\leq y'\\leq m$。**捕捉器会捕捉 $(x,y)$ 到 $(x',y')$ 路径上所有的星星**。一个星星被捕捉后将会消失。\n\n游戏的目标是在恰好两步内获得尽可能多的星星，然而小 S 不会玩，于是每次就会随意挑选一个可以移动到的新位置进行移动。对于 $(n+m-2)^2$ 种小 S 的不同移动方案，求捕捉到的星星数量之和，答案对 $10^9+7$ 取模。", "inputFormat": "第一行三个正整数 $n,m,k$，表示棋盘大小与星星个数。\n\n第二行两个正整数 $x,y$，表示捕捉器初始位置。\n\n接下来 $k$ 行，每行两个正整数，表示每颗星星所在的位置 $(p,q)$。每个位置上可以有多颗星星。", "outputFormat": "一行，一个非负整数，表示对于 $(n+m-2)^2$ 种小 S 的不同移动方案，他能捕捉到的星星数量之和，对 $10^9+7$ 取模。", "hint": "**【样例解释 \\#1】**\n\n网格图中，一种合法的移动捕捉器的方案是：\n\n$$(2,2)\\to(1,2)\\to(1,3)$$\n\n在该方案中，可以捕捉到位置在 $(1,2)$ 和 $(1,3)$ 的各 $1$ 颗星星。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n\\leq$ | $m\\leq$ |\n|:--:|:--:|:--:|:--:|\n| $1$ | $5$ | $50$ | $50$ |\n| $2$ | $10$ | $1000$ | $1000$ |\n| $3$ | $20$ | $10^5$ | $10^5$ |\n| $4$ | $25$ | $10^5$ | $10^9$ |\n| $5$ | $25$ | $10^9$ | $10^9$ |\n| $6$ | $15$ | $10^{18}$ | $10^{18}$ |\n\n对于 $100\\%$ 的数据，$1\\leq k\\leq10^5$，$1\\leq n,m\\leq10^{18}$，$1\\leq x,p\\leq n$，$1\\leq y,q\\leq m$，$(x,y)\\neq(p,q)$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X1-T2】「KDOI-05」简单的有限网格问题", "background": "原题链接：<https://oier.team/problems/X1B>。", "description": "小 S 在玩一款小游戏。游戏中会有一个 $n\\times m$ 的棋盘，其中 $k$ 个位置上有星星。初始有一个捕捉器，在 $(x,y)$ 位置。每次操作，你可以将捕捉器移动到同行或同列的某个位置，使得新位置与原位置不同且必须保证新位置 $(x',y')$ 满足 $1\\leq x'\\leq n$，$1\\leq y'\\leq m$。**捕捉器会捕捉 $(x,y)$ 到 $(x',y')$ 路径上所有的星星**。一个星星被捕捉后将会消失。\n\n游戏的目标是在恰好两步内获得尽可能多的星星，然而小 S 不会玩，于是每次就会随意挑选一个可以移动到的新位置进行移动。对于 $(n+m-2)^2$ 种小 S 的不同移动方案，求捕捉到的星星数量之和，答案对 $10^9+7$ 取模。", "inputFormat": "第一行三个正整数 $n,m,k$，表示棋盘大小与星星个数。\n\n第二行两个正整数 $x,y$，表示捕捉器初始位置。\n\n接下来 $k$ 行，每行两个正整数，表示每颗星星所在的位置 $(p,q)$。每个位置上可以有多颗星星。", "outputFormat": "一行，一个非负整数，表示对于 $(n+m-2)^2$ 种小 S 的不同移动方案，他能捕捉到的星星数量之和，对 $10^9+7$ 取模。", "hint": "**【样例解释 \\#1】**\n\n网格图中，一种合法的移动捕捉器的方案是：\n\n$$(2,2)\\to(1,2)\\to(1,3)$$\n\n在该方案中，可以捕捉到位置在 $(1,2)$ 和 $(1,3)$ 的各 $1$ 颗星星。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n\\leq$ | $m\\leq$ |\n|:--:|:--:|:--:|:--:|\n| $1$ | $5$ | $50$ | $50$ |\n| $2$ | $10$ | $1000$ | $1000$ |\n| $3$ | $20$ | $10^5$ | $10^5$ |\n| $4$ | $25$ | $10^5$ | $10^9$ |\n| $5$ | $25$ | $10^9$ | $10^9$ |\n| $6$ | $15$ | $10^{18}$ | $10^{18}$ |\n\n对于 $100\\%$ 的数据，$1\\leq k\\leq10^5$，$1\\leq n,m\\leq10^{18}$，$1\\leq x,p\\leq n$，$1\\leq y,q\\leq m$，$(x,y)\\neq(p,q)$。", "locale": "zh-CN"}}}
{"pid": "P10715", "type": "P", "difficulty": 4, "samples": [["3\n3\n1 2 3\n1 1 1\n5\n1 2 3 4 5\n2 5 3 6 4\n10\n1 8 3 5 2 6 3 4 6 2\n3 2 7 1 8 2 5 8 3 1", "-1 2 0 -1\n-1 -1 7 0 9 -1\n-1 -1 5 3 4 0 7 8 6 -1 -1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "前缀和", "梦熊比赛"], "title": "【MX-X1-T3】「KDOI-05」简单的序列问题", "background": "原题链接：<https://oier.team/problems/X1C>。", "description": "给出一个长度为 $n$ 的序列 $a$。定义其前缀和数组 $b_i=\\sum_{j=1}^ia_j$。定义其权值 $S=\\sum_{i=1}^n(b_i\\bmod 2)$。\n\n你可以对序列 $a$ 进行若干次如下操作：\n\n* 交换 $a_i,a_j$，花费 $c_i+c_j$ 元，其中 $c$ 为给定序列；\n\n对于 $i=0\\sim n$，求使得 $S=i$ 的最少钱数。如果不可能，输出 $-1$。", "inputFormat": "**本题包含多组测试数据。**\n\n第一行一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行一个正整数 $n$，表示序列长度。\n\n第二行 $n$ 个正整数，表示序列 $a$。\n\n第三行 $n$ 个正整数，表示序列 $c$。", "outputFormat": "对于每组测试数据：\n\n一行，$n+1$ 个整数，第 $i$ 个表示 $S=i-1$ 的最少钱数。如果不可能，输出 $-1$。", "hint": "**【样例解释】**\n\n对于第一组数据，初始 $\\sum_{i=1}^n(b_i\\bmod 2)=2$，故使 $S=2$ 最少要花 $0$ 元。\n\n交换 $a_1,a_2$ 即可使 $\\sum_{i=1}^n(b_i\\bmod 2)=1$，故使 $S=1$ 可以花费 $2$ 元。可以证明这是最优解。\n\n可以证明不存在交换方案使得 $S=0$ 或 $S=3$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n\\leq$ | $\\sum n\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|:--:|\n| $1$ | $10$ | $5$ | $50$ | 无 |\n| $2$ | $10$ | $500$ | $500$ | $a$ 中至多有 $3$ 个奇数 |\n| $3$ | $15$ | $30$ | $150$ | 无 |\n| $4$ | $25$ | $100$ | $500$ | 无 |\n| $5$ | $10$ | $500$ | $500$ | $c_i=1$ |\n| $6$ | $30$ | $500$ | $500$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\leq n,\\sum n\\leq500$，$1\\leq a_i\\leq10^9$，$1\\leq c_i\\leq10^6$，$1\\leq T\\leq500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X1-T3】「KDOI-05」简单的序列问题", "background": "原题链接：<https://oier.team/problems/X1C>。", "description": "给出一个长度为 $n$ 的序列 $a$。定义其前缀和数组 $b_i=\\sum_{j=1}^ia_j$。定义其权值 $S=\\sum_{i=1}^n(b_i\\bmod 2)$。\n\n你可以对序列 $a$ 进行若干次如下操作：\n\n* 交换 $a_i,a_j$，花费 $c_i+c_j$ 元，其中 $c$ 为给定序列；\n\n对于 $i=0\\sim n$，求使得 $S=i$ 的最少钱数。如果不可能，输出 $-1$。", "inputFormat": "**本题包含多组测试数据。**\n\n第一行一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行一个正整数 $n$，表示序列长度。\n\n第二行 $n$ 个正整数，表示序列 $a$。\n\n第三行 $n$ 个正整数，表示序列 $c$。", "outputFormat": "对于每组测试数据：\n\n一行，$n+1$ 个整数，第 $i$ 个表示 $S=i-1$ 的最少钱数。如果不可能，输出 $-1$。", "hint": "**【样例解释】**\n\n对于第一组数据，初始 $\\sum_{i=1}^n(b_i\\bmod 2)=2$，故使 $S=2$ 最少要花 $0$ 元。\n\n交换 $a_1,a_2$ 即可使 $\\sum_{i=1}^n(b_i\\bmod 2)=1$，故使 $S=1$ 可以花费 $2$ 元。可以证明这是最优解。\n\n可以证明不存在交换方案使得 $S=0$ 或 $S=3$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n\\leq$ | $\\sum n\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|:--:|\n| $1$ | $10$ | $5$ | $50$ | 无 |\n| $2$ | $10$ | $500$ | $500$ | $a$ 中至多有 $3$ 个奇数 |\n| $3$ | $15$ | $30$ | $150$ | 无 |\n| $4$ | $25$ | $100$ | $500$ | 无 |\n| $5$ | $10$ | $500$ | $500$ | $c_i=1$ |\n| $6$ | $30$ | $500$ | $500$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\leq n,\\sum n\\leq500$，$1\\leq a_i\\leq10^9$，$1\\leq c_i\\leq10^6$，$1\\leq T\\leq500$。", "locale": "zh-CN"}}}
{"pid": "P10716", "type": "P", "difficulty": 6, "samples": [["10\naabaacaaaa\n5\n5 3\n5 2\n6 1\n10 4\n10 5", "1\n2\n1\n2\n1"], ["10\nbababababa\n10\n6 1\n6 2\n6 3\n6 4\n6 5\n10 2\n10 3\n9 4\n5 5\n4 2", "1\n1\n1\n0\n0\n2\n1\n1\n0\n1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "倍增", "树上启发式合并", "O2优化", "KMP 算法", "梦熊比赛"], "title": "【MX-X1-T4】「KDOI-05」简单的字符串问题", "background": "原题链接：<https://oier.team/problems/X1D>。", "description": "你有一个字符串 $S$。$q$ 个询问，每次给出 $(i,k)$，求有多少个非空字符串 $A$，使得存在可空字符串 $B_1,B_2,\\dots,B_{k-1}$ 满足：\n\n$$S[1,i]=AB_1AB_2A\\dots AB_{k-1}A$$\n\n其中 $S[1,i]$ 表示 $S$ 的长度为 $i$ 的前缀。", "inputFormat": "第一行一个正整数 $n$ 表示 $S$ 的长度。\n\n接下来一个长度为 $n$ 且仅包含小写字母的字符串表示 $S$。\n\n接下来一行一个正整数表示 $q$。\n\n接下来 $q$ 行，每行两个正整数表示一个询问的 $i,k$。", "outputFormat": "输出 $q$ 行，每行一个非负整数表示答案。", "hint": "**【样例解释 \\#1】**\n\n对于第一次询问 $(5,3)$，可以取 $A=\\texttt{a}$，$B_1=\\varepsilon$，$B_2=\\texttt{ba}$，其中 $\\varepsilon$ 表示空串。可以证明有且仅有一个合法的 $A$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n,q\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|\n| $1$ | $5$ | $500$ | 无 |\n| $2$ | $10$ | $5000$ | 无 |\n| $3$ | $10$ | $2\\times10^5$ | $S$ 中字符从 $\\tt a,b$ 中随机生成 |\n| $4$ | $20$ | $2\\times10^5$ | 每个询问的 $k$ 相同 |\n| $5$ | $20$ | $5\\times10^4$ | 无 |\n| $6$ | $35$ | $2\\times10^5$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\leq k\\leq i\\leq n\\leq 2\\times 10^5$，$1\\leq q\\leq 2\\times 10^5$，$s$ 仅包含小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X1-T4】「KDOI-05」简单的字符串问题", "background": "原题链接：<https://oier.team/problems/X1D>。", "description": "你有一个字符串 $S$。$q$ 个询问，每次给出 $(i,k)$，求有多少个非空字符串 $A$，使得存在可空字符串 $B_1,B_2,\\dots,B_{k-1}$ 满足：\n\n$$S[1,i]=AB_1AB_2A\\dots AB_{k-1}A$$\n\n其中 $S[1,i]$ 表示 $S$ 的长度为 $i$ 的前缀。", "inputFormat": "第一行一个正整数 $n$ 表示 $S$ 的长度。\n\n接下来一个长度为 $n$ 且仅包含小写字母的字符串表示 $S$。\n\n接下来一行一个正整数表示 $q$。\n\n接下来 $q$ 行，每行两个正整数表示一个询问的 $i,k$。", "outputFormat": "输出 $q$ 行，每行一个非负整数表示答案。", "hint": "**【样例解释 \\#1】**\n\n对于第一次询问 $(5,3)$，可以取 $A=\\texttt{a}$，$B_1=\\varepsilon$，$B_2=\\texttt{ba}$，其中 $\\varepsilon$ 表示空串。可以证明有且仅有一个合法的 $A$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n,q\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|\n| $1$ | $5$ | $500$ | 无 |\n| $2$ | $10$ | $5000$ | 无 |\n| $3$ | $10$ | $2\\times10^5$ | $S$ 中字符从 $\\tt a,b$ 中随机生成 |\n| $4$ | $20$ | $2\\times10^5$ | 每个询问的 $k$ 相同 |\n| $5$ | $20$ | $5\\times10^4$ | 无 |\n| $6$ | $35$ | $2\\times10^5$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\leq k\\leq i\\leq n\\leq 2\\times 10^5$，$1\\leq q\\leq 2\\times 10^5$，$s$ 仅包含小写字母。", "locale": "zh-CN"}}}
{"pid": "P10717", "type": "P", "difficulty": 7, "samples": [["3 1\n1 2\n2 3\n499122177 499122177 499122177\n1 2\n1 3\n1 4", "499122186"], ["10 2\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 9\n9 10\n1 2 3 4 5 6 7 8 9 10\n10 9 8 7 6 5 4 3 2 1\n1 1 4 5\n1 4 1 9\n1 9 8 1\n0 1 1 4\n5 1 4 1\n9 1 9 8\n1 0 9 9\n8 2 4 4\n3 5 3 1\n2 3 4 5", "497209006"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "容斥原理", "快速沃尔什变换 FWT", "状压 DP", "梦熊比赛"], "title": "【MX-X1-T5】「KDOI-05」简单的树上问题", "background": "原题链接：<https://oier.team/problems/X1E>。", "description": "小 S 有一棵 $n$ 个点的树。每个点上有一个灯泡。\n\n小 S 决定进行 $k$ 次闪灯操作。执行闪灯操作时，他会用电脑主机给每个灯泡发送一次闪灯操作。\n\n然而，小 S 的灯泡是劣质品，只有一部分的灯泡可以收到小 S 的闪灯操作。具体地，第 $j$ 个点上的灯泡有 $p_{i,j}$ 的概率收到小 S 的第 $i$ 次闪灯操作。\n\n好在，小 S 的不同灯泡之间有信息传递功能。具体地，如果一个灯泡在两个收到信息的灯泡的树上最短路径上，这个灯泡也能执行闪灯操作（当然，收到信息的灯泡会执行闪灯操作）。\n\n定义一个灯泡 $i$ 的美丽度为 $a_{i,S}$，其中 $S$ 为这个灯泡执行闪灯操作的操作集合。\n\n定义整棵树的美丽度为每个灯泡美丽度的乘积。求整棵树美丽度的期望，对 $998244353$ 取模。", "inputFormat": "第一行两个正整数 $n,k$，表示树的点数与操作次数。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$，表示树上的一条边 $(u,v)$。\n\n接下来 $k$ 行每行 $n$ 个非负整数，第 $i$ 行第 $j$ 个表示 $p_{i,j}$ 对 $998244353$ 取模后的值。\n\n接下来 $n$ 行每行 $2^k$ 个非负整数，第 $i$ 行第 $(\\sum_{i=1}^k2^{i-1}[i\\in S])+1$ 个表示 $a_{i,S}$。可以理解为 $a_{i,j}$ 中 $j-1$ 的从低到高第 $x$ 个二进制位代表是否有 $x$ 操作。", "outputFormat": "一行，一个非负整数，表示整棵树的美丽度的期望，对 $998244353$ 取模。", "hint": "**【样例解释 \\#1】**\n\n::cute-table\n\n| 收到信息灯泡集合 | 灯泡美丽度 | 树美丽度 |\n|:--:|:--:|:--:|\n| $\\varnothing$ | $1,1,1$ | $1$ |\n| $\\{1\\}$ | $2,1,1$ | $2$ |\n| $\\{2\\}$ | $1,3,1$ | $3$ |\n| $\\{3\\}$ | $1,1,4$ | $4$ |\n| $\\{1,2\\}$ | $2,3,1$ | $6$ |\n| $\\{1,3\\}$ | $2,3,4$ | $24$ |\n| $\\{2,3\\}$ | $1,3,4$ | $12$ |\n| $\\{1,2,3\\}$ | $2,3,4$ | $24$ |\n\n故美丽度的期望是 $\\frac{1+2+3+4+6+24+12+24}{8}=\\frac{19}{2}$，对 $998244353$ 取模后为 $499122186$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n::cute-table{tuack}\n\n| 子任务编号 | 分值 | $n\\leq$ | $k\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|:--:|\n| $1$ | $5$ | $20$ | $1$ | 无 |\n| $2$ | $10$ | $100$ | $2$ | 第 $i$ 条边连接 $i$ 与 $i+1$ 号节点 |\n| $3$ | $5$ | $100$ | $8$ | $p_{i,j}=0$ 或 $p_{i,j}=1$ |\n| $4$ | $5$ | $100$ | $8$ | $a_{i,S}=[S=\\{1,2,\\dots,k\\}]$ |\n| $5$ | $20$ | $100$ | $8$ | 第 $i$ 条边连接 $i$ 与 $i+1$ 号节点 |\n| $6$ | $15$ | $100$ | $6$ | 无 |\n| $7$ | $15$ | $100$ | $7$ | 无 |\n| $8$ | $10$ | $50$ | $8$ | 无 |\n| $9$ | $15$ | $100$ | $8$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq100$，$1\\leq k\\leq8$，$1\\leq u,v\\leq n$，保证给出数据为一棵树，保证其他输入数据均为 $[0,998244353)$ 中的整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X1-T5】「KDOI-05」简单的树上问题", "background": "原题链接：<https://oier.team/problems/X1E>。", "description": "小 S 有一棵 $n$ 个点的树。每个点上有一个灯泡。\n\n小 S 决定进行 $k$ 次闪灯操作。执行闪灯操作时，他会用电脑主机给每个灯泡发送一次闪灯操作。\n\n然而，小 S 的灯泡是劣质品，只有一部分的灯泡可以收到小 S 的闪灯操作。具体地，第 $j$ 个点上的灯泡有 $p_{i,j}$ 的概率收到小 S 的第 $i$ 次闪灯操作。\n\n好在，小 S 的不同灯泡之间有信息传递功能。具体地，如果一个灯泡在两个收到信息的灯泡的树上最短路径上，这个灯泡也能执行闪灯操作（当然，收到信息的灯泡会执行闪灯操作）。\n\n定义一个灯泡 $i$ 的美丽度为 $a_{i,S}$，其中 $S$ 为这个灯泡执行闪灯操作的操作集合。\n\n定义整棵树的美丽度为每个灯泡美丽度的乘积。求整棵树美丽度的期望，对 $998244353$ 取模。", "inputFormat": "第一行两个正整数 $n,k$，表示树的点数与操作次数。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$，表示树上的一条边 $(u,v)$。\n\n接下来 $k$ 行每行 $n$ 个非负整数，第 $i$ 行第 $j$ 个表示 $p_{i,j}$ 对 $998244353$ 取模后的值。\n\n接下来 $n$ 行每行 $2^k$ 个非负整数，第 $i$ 行第 $(\\sum_{i=1}^k2^{i-1}[i\\in S])+1$ 个表示 $a_{i,S}$。可以理解为 $a_{i,j}$ 中 $j-1$ 的从低到高第 $x$ 个二进制位代表是否有 $x$ 操作。", "outputFormat": "一行，一个非负整数，表示整棵树的美丽度的期望，对 $998244353$ 取模。", "hint": "**【样例解释 \\#1】**\n\n::cute-table\n\n| 收到信息灯泡集合 | 灯泡美丽度 | 树美丽度 |\n|:--:|:--:|:--:|\n| $\\varnothing$ | $1,1,1$ | $1$ |\n| $\\{1\\}$ | $2,1,1$ | $2$ |\n| $\\{2\\}$ | $1,3,1$ | $3$ |\n| $\\{3\\}$ | $1,1,4$ | $4$ |\n| $\\{1,2\\}$ | $2,3,1$ | $6$ |\n| $\\{1,3\\}$ | $2,3,4$ | $24$ |\n| $\\{2,3\\}$ | $1,3,4$ | $12$ |\n| $\\{1,2,3\\}$ | $2,3,4$ | $24$ |\n\n故美丽度的期望是 $\\frac{1+2+3+4+6+24+12+24}{8}=\\frac{19}{2}$，对 $998244353$ 取模后为 $499122186$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n::cute-table{tuack}\n\n| 子任务编号 | 分值 | $n\\leq$ | $k\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|:--:|\n| $1$ | $5$ | $20$ | $1$ | 无 |\n| $2$ | $10$ | $100$ | $2$ | 第 $i$ 条边连接 $i$ 与 $i+1$ 号节点 |\n| $3$ | $5$ | $100$ | $8$ | $p_{i,j}=0$ 或 $p_{i,j}=1$ |\n| $4$ | $5$ | $100$ | $8$ | $a_{i,S}=[S=\\{1,2,\\dots,k\\}]$ |\n| $5$ | $20$ | $100$ | $8$ | 第 $i$ 条边连接 $i$ 与 $i+1$ 号节点 |\n| $6$ | $15$ | $100$ | $6$ | 无 |\n| $7$ | $15$ | $100$ | $7$ | 无 |\n| $8$ | $10$ | $50$ | $8$ | 无 |\n| $9$ | $15$ | $100$ | $8$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq100$，$1\\leq k\\leq8$，$1\\leq u,v\\leq n$，保证给出数据为一棵树，保证其他输入数据均为 $[0,998244353)$ 中的整数。", "locale": "zh-CN"}}}
{"pid": "P10718", "type": "P", "difficulty": 7, "samples": [["4 5 3\n1 1\n3 2\n2 3\n4 4\n1 2\n1 3\n1 4\n2 4\n3 4\n3 1 2 4\n3 1 3 4\n4 1 2 4 3\n3\n1\n2\n3\n", "3\n3\n1"], ["8 15 5\n4 4\n5 8\n2 7\n10 9\n1 10\n3 5\n8 2\n7 6\n2 1\n3 1\n3 2\n4 1\n4 2\n5 2\n5 3\n5 4\n6 1\n6 3\n7 1\n7 4\n8 1\n8 4\n8 7\n3 1 8 4 \n3 1 6 3 \n3 7 8 4 \n4 8 1 7 4 \n3 1 2 3 \n5\n1\n2\n3\n4\n5", "5\n8\n5\n1\n0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "计算几何", "平衡树", "O2优化", "平面图", "平面图欧拉公式", "梦熊比赛"], "title": "【MX-X1-T6】「KDOI-05」简单的图上问题", "background": "原题链接：<https://oier.team/problems/X1F>。", "description": "给你一个 $n$ 个点 $m$ 条边的边双连通图，并且给定了每个点的坐标，保证每条边不相交或者只在端点处重合。\n\n给定 $k$ 个图上的简单环 $C_1,C_2,\\dots,C_k$，定义 $G_i$ 为只考虑 $C_i$ 内部的点和边所组成的图。\n\n对 $S\\subseteq\\{1,2,\\dots,k\\},S=\\{s_1,s_2,\\dots,s_t\\}$，定义 $f(S)$ 表示所有 $G_{s_i}$ 交的连通块数量。\n\n有 $q$ 个询问，每次给出一个 $z$，输出 $\\sum_{S\\subseteq\\{1,2,\\dots,k\\},|S|=z}f(S)$。对 $998244353$ 取模。", "inputFormat": "第一行三个正整数表示 $n,m,k$。\n\n接下来 $n$ 行，每行两个整数 $(x_i,y_i)$ 表示第 $i$ 个点的坐标。保证所有 $1\\leq i<j\\leq n$，都有 $x_i\\neq x_j,y_i\\neq y_j$。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$，表示一条连接 $(u_i,v_i)$ 的无向边。\n\n接下来 $k$ 行，每行第一个正整数 $l_i$ 表示环的大小，接下来 $l_i$ 个正整数 $C_{i,1},C_{i,2},\\dots,C_{i,l_i}$ 表示一个原图的简单环，保证 $C_{i,j}$ 按顺序连接可以得到原图上的一个环。\n\n接着一行一个正整数表示 $q$。\n\n最后 $q$ 行，每行一个正整数表示询问的 $z_i$。", "outputFormat": "输出 $q$ 行，每行一个整数表示 $\\sum_{S\\subseteq\\{1,2,\\dots,k\\},|S|=z}f(S)$ 对 $998244353$ 取模后的值。", "hint": "**【样例解释 \\#1】**\n\n样例 $1$ 的数据如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7v424onc.png)\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|\n| $1$ | $15$ | $10$ | 无 |\n| $2$ | $30$ | $1000$ | 无 |\n| $3$ | $30$ | $4\\times10^4$ | 保证平面图是一个凸包的三角剖分 |\n| $4$ | $15$ | $4\\times10^4$ | 无 |\n| $5$ | $10$ | $10^5$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\leq n,\\sum l_i\\leq10^5$，$1\\leq m\\leq 3n-6$，$3\\leq l_i$，$0\\leq |x_i|,|y_i|\\leq 10^9$，$1\\leq q\\leq 20$，$1\\leq u_i,v_i\\leq n$，$u_i\\neq v_i$，$1\\leq z_i\\leq k$。保证所有 $1\\leq i<j\\leq n$，都有 $x_i\\neq x_j,y_i\\neq y_j$。保证每条边不相交或者只在端点处重合，保证图是一个边双连通分量。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X1-T6】「KDOI-05」简单的图上问题", "background": "原题链接：<https://oier.team/problems/X1F>。", "description": "给你一个 $n$ 个点 $m$ 条边的边双连通图，并且给定了每个点的坐标，保证每条边不相交或者只在端点处重合。\n\n给定 $k$ 个图上的简单环 $C_1,C_2,\\dots,C_k$，定义 $G_i$ 为只考虑 $C_i$ 内部的点和边所组成的图。\n\n对 $S\\subseteq\\{1,2,\\dots,k\\},S=\\{s_1,s_2,\\dots,s_t\\}$，定义 $f(S)$ 表示所有 $G_{s_i}$ 交的连通块数量。\n\n有 $q$ 个询问，每次给出一个 $z$，输出 $\\sum_{S\\subseteq\\{1,2,\\dots,k\\},|S|=z}f(S)$。对 $998244353$ 取模。", "inputFormat": "第一行三个正整数表示 $n,m,k$。\n\n接下来 $n$ 行，每行两个整数 $(x_i,y_i)$ 表示第 $i$ 个点的坐标。保证所有 $1\\leq i<j\\leq n$，都有 $x_i\\neq x_j,y_i\\neq y_j$。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$，表示一条连接 $(u_i,v_i)$ 的无向边。\n\n接下来 $k$ 行，每行第一个正整数 $l_i$ 表示环的大小，接下来 $l_i$ 个正整数 $C_{i,1},C_{i,2},\\dots,C_{i,l_i}$ 表示一个原图的简单环，保证 $C_{i,j}$ 按顺序连接可以得到原图上的一个环。\n\n接着一行一个正整数表示 $q$。\n\n最后 $q$ 行，每行一个正整数表示询问的 $z_i$。", "outputFormat": "输出 $q$ 行，每行一个整数表示 $\\sum_{S\\subseteq\\{1,2,\\dots,k\\},|S|=z}f(S)$ 对 $998244353$ 取模后的值。", "hint": "**【样例解释 \\#1】**\n\n样例 $1$ 的数据如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7v424onc.png)\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n\\leq$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|\n| $1$ | $15$ | $10$ | 无 |\n| $2$ | $30$ | $1000$ | 无 |\n| $3$ | $30$ | $4\\times10^4$ | 保证平面图是一个凸包的三角剖分 |\n| $4$ | $15$ | $4\\times10^4$ | 无 |\n| $5$ | $10$ | $10^5$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\leq n,\\sum l_i\\leq10^5$，$1\\leq m\\leq 3n-6$，$3\\leq l_i$，$0\\leq |x_i|,|y_i|\\leq 10^9$，$1\\leq q\\leq 20$，$1\\leq u_i,v_i\\leq n$，$u_i\\neq v_i$，$1\\leq z_i\\leq k$。保证所有 $1\\leq i<j\\leq n$，都有 $x_i\\neq x_j,y_i\\neq y_j$。保证每条边不相交或者只在端点处重合，保证图是一个边双连通分量。", "locale": "zh-CN"}}}
{"pid": "P10719", "type": "P", "difficulty": 3, "samples": [["4 5 5\n00000\n01111\n00011\n00011", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "2024", "前缀和", "GESP"], "title": "[GESP202406 五级] 黑白格", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1153>", "description": "小杨有一个 $n$ 行 $m$ 列的网格图，其中每个格子要么是白色，要么是黑色。\n\n小杨想知道至少包含 $k$ 个黑色格子的最小子矩形包含了多少个格子。", "inputFormat": "第一行包含三个正整数 $n,m,k$，含义如题面所示。\n\n之后 $n$ 行，每行⼀个长度为 $m$ 的 $\\texttt{01}$ 串，代表网格图第 $i$ 行格子的颜色，如果为 $\\texttt{0}$，则对应格子为白色，否则为黑色。", "outputFormat": "输出一个整数，代表至少包含 $k$ 个黑色格子的最小子矩形包含格子的数量，如果不存在则输出 $0$。", "hint": "#### 样例解释\n\n对于样例 $1$，假设 $(i,j)$ 代表第 $i$ 行第 $j$ 列，至少包含 $5$ 个黑色格子的最小子矩形的四个顶点为 $(2,4)$，$(2,5)$，$(4,4)$，$(4,5)$，共包含 $6$ 个格子。\n\n#### 数据范围\n\n对于全部数据，保证有 $1\\le n,m\\le 100$，$1\\le k\\le n\\times m$。\n\n| 子任务编号 | 得分 | $n,m$ |\n| :--: | :--: | :--: |\n| $1$ | $20$ | $\\le 10$  |\n| $2$ | $40$ | $n=1$，$1\\le m\\le 100$ |\n| $3$ | $40$ | $\\le 100$|\n\nUpdate on 2024/7/9：添加了若干组 hack 数据，感谢 @cff_0102 的贡献。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202406 五级] 黑白格", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1153>", "description": "小杨有一个 $n$ 行 $m$ 列的网格图，其中每个格子要么是白色，要么是黑色。\n\n小杨想知道至少包含 $k$ 个黑色格子的最小子矩形包含了多少个格子。", "inputFormat": "第一行包含三个正整数 $n,m,k$，含义如题面所示。\n\n之后 $n$ 行，每行⼀个长度为 $m$ 的 $\\texttt{01}$ 串，代表网格图第 $i$ 行格子的颜色，如果为 $\\texttt{0}$，则对应格子为白色，否则为黑色。", "outputFormat": "输出一个整数，代表至少包含 $k$ 个黑色格子的最小子矩形包含格子的数量，如果不存在则输出 $0$。", "hint": "#### 样例解释\n\n对于样例 $1$，假设 $(i,j)$ 代表第 $i$ 行第 $j$ 列，至少包含 $5$ 个黑色格子的最小子矩形的四个顶点为 $(2,4)$，$(2,5)$，$(4,4)$，$(4,5)$，共包含 $6$ 个格子。\n\n#### 数据范围\n\n对于全部数据，保证有 $1\\le n,m\\le 100$，$1\\le k\\le n\\times m$。\n\n| 子任务编号 | 得分 | $n,m$ |\n| :--: | :--: | :--: |\n| $1$ | $20$ | $\\le 10$  |\n| $2$ | $40$ | $n=1$，$1\\le m\\le 100$ |\n| $3$ | $40$ | $\\le 100$|\n\nUpdate on 2024/7/9：添加了若干组 hack 数据，感谢 @cff_0102 的贡献。", "locale": "zh-CN"}}}
{"pid": "P10720", "type": "P", "difficulty": 2, "samples": [["3\n7\n12\n30", "0\n1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "数论", "GESP"], "title": "[GESP202406 五级] 小杨的幸运数字", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1153>", "description": "小杨认为他的幸运数字应该恰好有两种不同的质因子，例如，$12=2\\times 2\\times 3$ 的质因子有 $2,3$，恰好为两种不同的质因子，因此 $12$ 是幸运数字，而 $30=2\\times3\\times5$ 的质因子有 $2,3,5$，不符合要求，不为幸运数字。\n\n小杨现在有 $n$ 个正整数，他想知道每个正整数是否是他的幸运数字。", "inputFormat": "第一行包含一个正整数 $n$，代表正整数个数。\n\n之后 $n$ 行，每行一个正整数。", "outputFormat": "输出 $n$ 行，对于每个正整数，如果是幸运数字，输出 $1$，否则输出 $0$。\n", "hint": "### 样例解释\n\n$7$ 的质因子有 $7$，只有一种。\n\n$12$ 的质因子有 $2,3$，恰好有两种。\n\n$30$ 的质因子有 $2,3,5$，有三种。\n\n\n### 数据范围\n\n子任务编号|数据点占比|$n$|正整数值域\n:-:|:-:|:-:|:-:\n$1$|$40\\%$|$\\leq 100$|$\\leq 10^5$\n$2$|$60\\%$|$\\leq 10^4$|$\\leq 10^6$\n\n对于全部数据，保证有 $1\\leq n\\leq 10^4$，每个正整数 $a_i$ 满足 $2\\leq a_i\\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202406 五级] 小杨的幸运数字", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1153>", "description": "小杨认为他的幸运数字应该恰好有两种不同的质因子，例如，$12=2\\times 2\\times 3$ 的质因子有 $2,3$，恰好为两种不同的质因子，因此 $12$ 是幸运数字，而 $30=2\\times3\\times5$ 的质因子有 $2,3,5$，不符合要求，不为幸运数字。\n\n小杨现在有 $n$ 个正整数，他想知道每个正整数是否是他的幸运数字。", "inputFormat": "第一行包含一个正整数 $n$，代表正整数个数。\n\n之后 $n$ 行，每行一个正整数。", "outputFormat": "输出 $n$ 行，对于每个正整数，如果是幸运数字，输出 $1$，否则输出 $0$。\n", "hint": "### 样例解释\n\n$7$ 的质因子有 $7$，只有一种。\n\n$12$ 的质因子有 $2,3$，恰好有两种。\n\n$30$ 的质因子有 $2,3,5$，有三种。\n\n\n### 数据范围\n\n子任务编号|数据点占比|$n$|正整数值域\n:-:|:-:|:-:|:-:\n$1$|$40\\%$|$\\leq 100$|$\\leq 10^5$\n$2$|$60\\%$|$\\leq 10^4$|$\\leq 10^6$\n\n对于全部数据，保证有 $1\\leq n\\leq 10^4$，每个正整数 $a_i$ 满足 $2\\leq a_i\\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10721", "type": "P", "difficulty": 3, "samples": [["3\n3 1 2\n13\ndabcabcabcabz\n", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2024", "背包 DP", "GESP"], "title": "[GESP202406 六级] 计算得分", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1154>", "description": "小杨想要计算由 $m$ 个小写字母组成的字符串的得分。\n\n小杨设置了一个包含 $n$ 个正整数的计分序列 $A=[a_1,a_2,\\ldots,a_n]$，如果字符串的一个子串由 $k(1\\leq k \\leq n)$ 个 $\\texttt{abc}$ 首尾相接组成，那么能够得到分数 $a_k$，并且字符串包含的字符不能够重复计算得分，整个字符串的得分是计分子串的总和。\n\n例如，假设 ，字符串 $\\texttt{dabcabcabcabzabc}$ 的所有可能计分方式如下：\n- $\\texttt{d+abc+abcabc+abz+abc}$ 或者 $\\texttt{d+abcabc+abc+abz+abc}$，其中 $\\texttt{d}$ 和 $\\texttt{abz}$ 不计算得分，总得分为 $a_1+a_2+a_1$。\n- $\\texttt{d+abc+abc+abc+abz+abc}$，总得分为 $a_1+a_1+a_1+a_1$。\n- $\\texttt{d+abcabcabc+abz+abc}$，总得分为 $a_3+a_1$。\n\n小杨想知道对于给定的字符串，最大总得分是多少。", "inputFormat": "- 第一行包含一个正整数 $n$，代表计分序列 $A$ 的长度。\n\n- 第二行包含 $n$ 个正整数，代表计分序列 $A$。\n\n- 第三行包含一个正整数 $m$，代表字符串的长度。\n\n- 第四行包含一个由 $m$ 个小写字母组成的字符串。", "outputFormat": "输出一个整数，代表给定字符串的最大总得分。", "hint": "### 样例解释\n最优的计分方式为 $\\texttt{d+abc+abc+abc+abz}$，总得分为 $a_1+a_1+a_1$，共 $9$ 分。\n\n### 数据范围\n\n子任务编号|数据点占比|$n$|$m$|$a_i$|特殊性质\n:-:|:-:|:-:|:-:|:-:|:-:\n$1$|$20\\%$|$\\le 20$|$\\le 10^5$|$\\le 1000$|对于所有的 $i(1 \\le i \\le n)$，存在 $a_i \\ge a_{i+1}$\n$2$|$40\\%$|$\\le 3$|$\\le 10^5$|$\\le 1000$|\n$3$|$40\\%$|$\\le 20$|$\\le 10^5$|$\\le 1000$|\n\n对于全部数据，保证有 $1\\leq n\\leq 20$，$1\\leq m\\leq 10^5$，$1\\leq a_i\\leq 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202406 六级] 计算得分", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1154>", "description": "小杨想要计算由 $m$ 个小写字母组成的字符串的得分。\n\n小杨设置了一个包含 $n$ 个正整数的计分序列 $A=[a_1,a_2,\\ldots,a_n]$，如果字符串的一个子串由 $k(1\\leq k \\leq n)$ 个 $\\texttt{abc}$ 首尾相接组成，那么能够得到分数 $a_k$，并且字符串包含的字符不能够重复计算得分，整个字符串的得分是计分子串的总和。\n\n例如，假设 ，字符串 $\\texttt{dabcabcabcabzabc}$ 的所有可能计分方式如下：\n- $\\texttt{d+abc+abcabc+abz+abc}$ 或者 $\\texttt{d+abcabc+abc+abz+abc}$，其中 $\\texttt{d}$ 和 $\\texttt{abz}$ 不计算得分，总得分为 $a_1+a_2+a_1$。\n- $\\texttt{d+abc+abc+abc+abz+abc}$，总得分为 $a_1+a_1+a_1+a_1$。\n- $\\texttt{d+abcabcabc+abz+abc}$，总得分为 $a_3+a_1$。\n\n小杨想知道对于给定的字符串，最大总得分是多少。", "inputFormat": "- 第一行包含一个正整数 $n$，代表计分序列 $A$ 的长度。\n\n- 第二行包含 $n$ 个正整数，代表计分序列 $A$。\n\n- 第三行包含一个正整数 $m$，代表字符串的长度。\n\n- 第四行包含一个由 $m$ 个小写字母组成的字符串。", "outputFormat": "输出一个整数，代表给定字符串的最大总得分。", "hint": "### 样例解释\n最优的计分方式为 $\\texttt{d+abc+abc+abc+abz}$，总得分为 $a_1+a_1+a_1$，共 $9$ 分。\n\n### 数据范围\n\n子任务编号|数据点占比|$n$|$m$|$a_i$|特殊性质\n:-:|:-:|:-:|:-:|:-:|:-:\n$1$|$20\\%$|$\\le 20$|$\\le 10^5$|$\\le 1000$|对于所有的 $i(1 \\le i \\le n)$，存在 $a_i \\ge a_{i+1}$\n$2$|$40\\%$|$\\le 3$|$\\le 10^5$|$\\le 1000$|\n$3$|$40\\%$|$\\le 20$|$\\le 10^5$|$\\le 1000$|\n\n对于全部数据，保证有 $1\\leq n\\leq 20$，$1\\leq m\\leq 10^5$，$1\\leq a_i\\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P10722", "type": "P", "difficulty": 3, "samples": [["6\n3 1 1 3 4\n100101\n3\n1\n3\n2", "010000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树形数据结构", "2024", "图遍历", "树的遍历", "GESP"], "title": "[GESP202406 六级] 二叉树", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1154>", "description": "小杨有一棵包含 $n$ 个节点的二叉树，且根节点的编号为 $1$。这棵二叉树任意一个节点要么是白色，要么是黑色。之后小杨会对这棵二叉树进行 $q$ 次操作，每次小杨会选择一个节点，将以这个节点为根的子树内所有节点的颜色反转，即黑色变成白色，白色变成黑色。\n\n小杨想知道 $q$ 次操作全部完成之后每个节点的颜色。", "inputFormat": "第一行一个正整数 $n$，表示二叉树的节点数量。\n\n第二行 $(n-1)$ 个正整数，第 $i$（$1\\le i\\le n-1$）个数表示编号为 $(i+1)$ 的节点的父亲节点编号，数据保证是一棵二叉树。\n\n第三行一个长度为 $n$ 的 $\\texttt{01}$ 串，从左到右第 $i$（$1\\le i\\le n$）位如果为 $\\texttt{0}$，表示编号为 $i$ 的节点颜色为白色，否则为黑色。\n\n第四行一个正整数 $q$，表示操作次数。\n\n接下来 $q$ 行每行一个正整数 $a_i$（$1\\le a_i\\le n$），表示第 $i$ 次操作选择的节点编号。", "outputFormat": "输出一行一个长度为 $n$ 的 $\\texttt{01}$ 串，表示 $q$ 次操作全部完成之后每个节点的颜色。从左到右第 $i$（$1\\le i\\le n$） 位如果为 $\\texttt{0}$，表示编号为 $i$ 的节点颜色为白色，否则为黑色。", "hint": "#### 样例解释\n\n第一次操作后，节点颜色为：$\\texttt{011010}$\n\n第二次操作后，节点颜色为：$\\texttt{000000}$\n\n第三次操作后，节点颜色为：$\\texttt{010000}$\n\n#### 数据范围\n\n| 子任务编号 | 得分 | $n$ | $q$ | 特殊条件 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1$ |  $20$ | $\\le 10^5$ | $\\le 10^5$ |对于所有 $i\\ge 2$，节点 $i$ 的父亲节点编号为 $i-1$\n| $2$ |  $40$ | $\\le 1000$ | $\\le 1000$ | |\n| $3$ | $40$ | $\\le 10^5$ | $\\le 10^5$ | |\n\n对于全部数据，保证有 $n,q\\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202406 六级] 二叉树", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1154>", "description": "小杨有一棵包含 $n$ 个节点的二叉树，且根节点的编号为 $1$。这棵二叉树任意一个节点要么是白色，要么是黑色。之后小杨会对这棵二叉树进行 $q$ 次操作，每次小杨会选择一个节点，将以这个节点为根的子树内所有节点的颜色反转，即黑色变成白色，白色变成黑色。\n\n小杨想知道 $q$ 次操作全部完成之后每个节点的颜色。", "inputFormat": "第一行一个正整数 $n$，表示二叉树的节点数量。\n\n第二行 $(n-1)$ 个正整数，第 $i$（$1\\le i\\le n-1$）个数表示编号为 $(i+1)$ 的节点的父亲节点编号，数据保证是一棵二叉树。\n\n第三行一个长度为 $n$ 的 $\\texttt{01}$ 串，从左到右第 $i$（$1\\le i\\le n$）位如果为 $\\texttt{0}$，表示编号为 $i$ 的节点颜色为白色，否则为黑色。\n\n第四行一个正整数 $q$，表示操作次数。\n\n接下来 $q$ 行每行一个正整数 $a_i$（$1\\le a_i\\le n$），表示第 $i$ 次操作选择的节点编号。", "outputFormat": "输出一行一个长度为 $n$ 的 $\\texttt{01}$ 串，表示 $q$ 次操作全部完成之后每个节点的颜色。从左到右第 $i$（$1\\le i\\le n$） 位如果为 $\\texttt{0}$，表示编号为 $i$ 的节点颜色为白色，否则为黑色。", "hint": "#### 样例解释\n\n第一次操作后，节点颜色为：$\\texttt{011010}$\n\n第二次操作后，节点颜色为：$\\texttt{000000}$\n\n第三次操作后，节点颜色为：$\\texttt{010000}$\n\n#### 数据范围\n\n| 子任务编号 | 得分 | $n$ | $q$ | 特殊条件 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1$ |  $20$ | $\\le 10^5$ | $\\le 10^5$ |对于所有 $i\\ge 2$，节点 $i$ 的父亲节点编号为 $i-1$\n| $2$ |  $40$ | $\\le 1000$ | $\\le 1000$ | |\n| $3$ | $40$ | $\\le 10^5$ | $\\le 10^5$ | |\n\n对于全部数据，保证有 $n,q\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10723", "type": "P", "difficulty": 4, "samples": [["5\n0 1 0 1 0\n1 2\n1 3\n3 4\n3 5\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "树形 DP", "拓扑排序", "树的遍历", "GESP"], "title": "[GESP202406 七级] 黑白翻转", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1155>", "description": "小杨有一棵包含 $n$ 个节点的树，这棵树上的任意一个节点要么是白色，要么是黑色。小杨认为一棵树是美丽树当且仅当在删除所有白色节点之后，剩余节点仍然组成一棵树。\n\n小杨每次操作可以选择一个白色节点将它的颜色变为黑色，他想知道自己最少要执行多少次操作可以使得这棵树变为美丽树。\n", "inputFormat": "第一行包含一个正整数 $n$，代表树的节点数。\n\n第二行包含 $n$ 个非负整数 $a_1,a_2,\\ldots,a_n$，其中如果 $a_i=0$，则节点 $i$ 的颜色为白色，否则为黑色。\n\n之后 $n-1$ 行，每行包含两个正整数 $x_i,y_i$，代表存在一条连接节点 $x_i$ 和 $y_i$ 的边。\n", "outputFormat": "输出一个整数，代表最少执行的操作次数。\n", "hint": "### 样例解释\n\n将节点 $1$ 和 $3$ 变为黑色即可使这棵树变为美丽树，此时删除白色节点 $5$，剩余黑色节点仍然组成一棵树。\n\n### 数据范围\n子任务编号|数据点占比|$n$ |$a_i$ |特殊条件\n:-:|:-:|:-:|:-:|:-:\n$1$|$30\\%$ |$\\leq 10^5$ | $0\\leq a_i\\leq 1$|树的形态为一条链\n$2$|$30\\%$ | $\\leq 10^5$ | $0\\leq a_i\\leq 1$| 只有两个节点颜色为黑色\n$3$|$40\\%$|$\\leq 10^5$|$0\\leq a_i\\leq 1$|\n\n对于全部数据，保证有 $1\\leq n\\leq 10^5$，$0\\leq a_i\\leq 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202406 七级] 黑白翻转", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1155>", "description": "小杨有一棵包含 $n$ 个节点的树，这棵树上的任意一个节点要么是白色，要么是黑色。小杨认为一棵树是美丽树当且仅当在删除所有白色节点之后，剩余节点仍然组成一棵树。\n\n小杨每次操作可以选择一个白色节点将它的颜色变为黑色，他想知道自己最少要执行多少次操作可以使得这棵树变为美丽树。\n", "inputFormat": "第一行包含一个正整数 $n$，代表树的节点数。\n\n第二行包含 $n$ 个非负整数 $a_1,a_2,\\ldots,a_n$，其中如果 $a_i=0$，则节点 $i$ 的颜色为白色，否则为黑色。\n\n之后 $n-1$ 行，每行包含两个正整数 $x_i,y_i$，代表存在一条连接节点 $x_i$ 和 $y_i$ 的边。\n", "outputFormat": "输出一个整数，代表最少执行的操作次数。\n", "hint": "### 样例解释\n\n将节点 $1$ 和 $3$ 变为黑色即可使这棵树变为美丽树，此时删除白色节点 $5$，剩余黑色节点仍然组成一棵树。\n\n### 数据范围\n子任务编号|数据点占比|$n$ |$a_i$ |特殊条件\n:-:|:-:|:-:|:-:|:-:\n$1$|$30\\%$ |$\\leq 10^5$ | $0\\leq a_i\\leq 1$|树的形态为一条链\n$2$|$30\\%$ | $\\leq 10^5$ | $0\\leq a_i\\leq 1$| 只有两个节点颜色为黑色\n$3$|$40\\%$|$\\leq 10^5$|$0\\leq a_i\\leq 1$|\n\n对于全部数据，保证有 $1\\leq n\\leq 10^5$，$0\\leq a_i\\leq 1$。", "locale": "zh-CN"}}}
{"pid": "P10724", "type": "P", "difficulty": 4, "samples": [["5\n3 2 4 3 2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "数论", "前缀和", "位运算", "GESP"], "title": "[GESP202406 七级] 区间乘积", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1155>", "description": "小杨有一个包含 $n$ 个正整数的序列 $A=[a_1,a_2,\\ldots,a_n]$。\n\n小杨想知道有多少对 $\\langle l,r\\rangle(1\\leq l\\leq r\\leq n)$ 满足 $a_l\\times a_{l+1}\\times\\ldots\\times a_r$ 为完全平方数。\n\n一个正整数 $x$ 为完全平方数当且仅当存在一个正整数 $y$ 使得 $x=y\\times y$。\n", "inputFormat": "第一行包含一个正整数 $n$，代表正整数个数。\n\n第二行包含 $n$ 个正整数 $a_i$，代表序列 $A$。", "outputFormat": "输出一个整数，代表满足要求的 $\\langle l,r\\rangle$ 数量。\n", "hint": "### 样例解释\n\n满足条件的 $\\langle l,r\\rangle$ 有  $\\langle 1,5\\rangle$ 和 $\\langle 3,3\\rangle$。\n\n\n### 数据范围\n\n子任务编号|数据点占比|$n$|$a_i$\n:-:|:-:|:-:|:-:\n$1$|$20\\%$|$\\leq 10^5$|$1\\leq a_i\\leq 2$\n$2$|$40\\%$|$\\leq 100$|$1\\leq a_i\\leq 30$\n$3$|$40\\%$|$\\leq 10^5$|$1\\leq a_i\\leq 30$\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202406 七级] 区间乘积", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1155>", "description": "小杨有一个包含 $n$ 个正整数的序列 $A=[a_1,a_2,\\ldots,a_n]$。\n\n小杨想知道有多少对 $\\langle l,r\\rangle(1\\leq l\\leq r\\leq n)$ 满足 $a_l\\times a_{l+1}\\times\\ldots\\times a_r$ 为完全平方数。\n\n一个正整数 $x$ 为完全平方数当且仅当存在一个正整数 $y$ 使得 $x=y\\times y$。\n", "inputFormat": "第一行包含一个正整数 $n$，代表正整数个数。\n\n第二行包含 $n$ 个正整数 $a_i$，代表序列 $A$。", "outputFormat": "输出一个整数，代表满足要求的 $\\langle l,r\\rangle$ 数量。\n", "hint": "### 样例解释\n\n满足条件的 $\\langle l,r\\rangle$ 有  $\\langle 1,5\\rangle$ 和 $\\langle 3,3\\rangle$。\n\n\n### 数据范围\n\n子任务编号|数据点占比|$n$|$a_i$\n:-:|:-:|:-:|:-:\n$1$|$20\\%$|$\\leq 10^5$|$1\\leq a_i\\leq 2$\n$2$|$40\\%$|$\\leq 100$|$1\\leq a_i\\leq 30$\n$3$|$40\\%$|$\\leq 10^5$|$1\\leq a_i\\leq 30$\n", "locale": "zh-CN"}}}
{"pid": "P10725", "type": "P", "difficulty": 4, "samples": [["5\n0 1 0 1 0\n1 2\n1 3\n3 4\n3 5", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "树的遍历", "树的直径", "GESP"], "title": "[GESP202406 八级] 最远点对", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1156>", "description": "小杨有一棵包含 $n$ 个节点的树，这棵树上的任意一个节点要么是白色，要么是黑色。\n\n小杨想知道相距最远的一对不同颜色节点的距离是多少。", "inputFormat": "第一行包含一个正整数 $n$，代表树的节点数。\n\n第二行包含 $n$ 个非负整数 $a_1,a_2,\\cdots,a_n$（对于所有的 $1\\le i\\le n$，均有 $a_i$ 等于 $0$ 或 $1$），其中如果 $a_i=0$，则节点 $i$ 的颜色为白色；如果 $a_i=1$，则节点 $i$ 的颜色为黑色。\n\n之后 $(n-1)$ 行，每行包含两个正整数 $x_i,y_i$，代表存在一条连接节点 $x_i$ 和 $y_i$ 的边。\n\n保证输入的树中存在不同颜色的点。", "outputFormat": "输出一个整数，代表相距最远的一对不同颜色节点的距离。", "hint": "#### 样例解释\n\n相距最远的不同颜色的一对节点为节点 $2$ 和 $5$。\n\n#### 数据范围\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 得分 | $n$ | $a_i$ | 特殊条件 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1$ |  $30$ | $\\le 10^5$ | $0\\le a_i\\le 1$ | 树的形态为一条链 |\n| $2$ | $30$ | $\\le 10^3$ | $0\\le a_i\\le 1$ | |\t\n| $3$ | $40$ | $\\le 10^5$ | $0\\le a_i\\le 1$ | |\t\n\n对于全部数据，保证有 $1\\le n\\le 10^5$，$0\\le a_i\\le 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202406 八级] 最远点对", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1156>", "description": "小杨有一棵包含 $n$ 个节点的树，这棵树上的任意一个节点要么是白色，要么是黑色。\n\n小杨想知道相距最远的一对不同颜色节点的距离是多少。", "inputFormat": "第一行包含一个正整数 $n$，代表树的节点数。\n\n第二行包含 $n$ 个非负整数 $a_1,a_2,\\cdots,a_n$（对于所有的 $1\\le i\\le n$，均有 $a_i$ 等于 $0$ 或 $1$），其中如果 $a_i=0$，则节点 $i$ 的颜色为白色；如果 $a_i=1$，则节点 $i$ 的颜色为黑色。\n\n之后 $(n-1)$ 行，每行包含两个正整数 $x_i,y_i$，代表存在一条连接节点 $x_i$ 和 $y_i$ 的边。\n\n保证输入的树中存在不同颜色的点。", "outputFormat": "输出一个整数，代表相距最远的一对不同颜色节点的距离。", "hint": "#### 样例解释\n\n相距最远的不同颜色的一对节点为节点 $2$ 和 $5$。\n\n#### 数据范围\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 得分 | $n$ | $a_i$ | 特殊条件 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1$ |  $30$ | $\\le 10^5$ | $0\\le a_i\\le 1$ | 树的形态为一条链 |\n| $2$ | $30$ | $\\le 10^3$ | $0\\le a_i\\le 1$ | |\t\n| $3$ | $40$ | $\\le 10^5$ | $0\\le a_i\\le 1$ | |\t\n\n对于全部数据，保证有 $1\\le n\\le 10^5$，$0\\le a_i\\le 1$。", "locale": "zh-CN"}}}
{"pid": "P10726", "type": "P", "difficulty": 4, "samples": [["3\n3 1\n5 6 3\n3 5 6\n1 4 100000", "100001"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2024", "最短路", "GESP"], "title": "[GESP202406 八级] 空间跳跃", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1156>", "description": "小杨在二维空间中有 $n$ 个水平挡板，并且挡板之间彼此不重叠，其中第 $i$ 个挡板处于水平高度 $h_i$，左右端点分别位于 $l_i$ 与 $r_i$。\n\n小杨可以在挡板上左右移动，当小杨移动到右端点时，如果再向右移动会竖直掉落，从而落到下方第一个挡板上，移动到左端点时同理。小杨在挡板上每移动 $1$ 个单位长度会耗费 $1$ 个单位时间，掉落时每掉落 $1$ 个单位高度也会耗费 $1$ 个单位时间。\n\n小杨想知道，从第 $s$ 个挡板上的左端点出发到第 $t$ 个挡板需要耗费的最少时间是多少？\n\n注意：可能无法从第 $s$ 个挡板到达到第 $t$ 个挡板。", "inputFormat": "第一行包含一个正整数 $n$，代表挡板数量。\n\n第二行包含两个正整数 $s,t$，含义如题面所示。\n\n之后 $n$ 行，每行包含三个正整数 $l_i,r_i,h_i$，代表第 $i$ 个挡板的左右端点位置与高度。\n", "outputFormat": "输出一个整数代表需要耗费的最少时间，如果无法到达则输出 $-1$。\n", "hint": "### 样例解释\n\n耗费时间最少的移动方案为，从第 $3$ 个挡板左端点移动到右端点，耗费 $3$ 个单位时间，然后向右移动掉落到第 $2$ 个挡板上，耗费 $100000-6=99994$ 个单位时间，之后再向右移动 $1$ 个单位长度，耗费 $1$ 个单位时间，最后向右移动掉落到第 $1$ 个挡板上，耗费 $3$ 个单位时间。共耗费 $100001$ 个单位时间。\n\n### 数据范围\n\n子任务编号|数据点占比|$n$|特殊条件\n:-:|:-:|:-:|:-:\n$1$|$20\\%$|$\\leq 1000$|$l_i=1$\n$2$|$40\\%$|$\\leq 1000$|$l_i=i,r_i=i+1$\n$3$|$40\\%$|$\\leq 1000$|\n\n对于全部数据，保证有 $1\\leq n\\leq 1000$，$1\\leq l_i\\leq r_i\\leq 10^5$，$1\\leq h_i\\leq 10^5$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202406 八级] 空间跳跃", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1156>", "description": "小杨在二维空间中有 $n$ 个水平挡板，并且挡板之间彼此不重叠，其中第 $i$ 个挡板处于水平高度 $h_i$，左右端点分别位于 $l_i$ 与 $r_i$。\n\n小杨可以在挡板上左右移动，当小杨移动到右端点时，如果再向右移动会竖直掉落，从而落到下方第一个挡板上，移动到左端点时同理。小杨在挡板上每移动 $1$ 个单位长度会耗费 $1$ 个单位时间，掉落时每掉落 $1$ 个单位高度也会耗费 $1$ 个单位时间。\n\n小杨想知道，从第 $s$ 个挡板上的左端点出发到第 $t$ 个挡板需要耗费的最少时间是多少？\n\n注意：可能无法从第 $s$ 个挡板到达到第 $t$ 个挡板。", "inputFormat": "第一行包含一个正整数 $n$，代表挡板数量。\n\n第二行包含两个正整数 $s,t$，含义如题面所示。\n\n之后 $n$ 行，每行包含三个正整数 $l_i,r_i,h_i$，代表第 $i$ 个挡板的左右端点位置与高度。\n", "outputFormat": "输出一个整数代表需要耗费的最少时间，如果无法到达则输出 $-1$。\n", "hint": "### 样例解释\n\n耗费时间最少的移动方案为，从第 $3$ 个挡板左端点移动到右端点，耗费 $3$ 个单位时间，然后向右移动掉落到第 $2$ 个挡板上，耗费 $100000-6=99994$ 个单位时间，之后再向右移动 $1$ 个单位长度，耗费 $1$ 个单位时间，最后向右移动掉落到第 $1$ 个挡板上，耗费 $3$ 个单位时间。共耗费 $100001$ 个单位时间。\n\n### 数据范围\n\n子任务编号|数据点占比|$n$|特殊条件\n:-:|:-:|:-:|:-:\n$1$|$20\\%$|$\\leq 1000$|$l_i=1$\n$2$|$40\\%$|$\\leq 1000$|$l_i=i,r_i=i+1$\n$3$|$40\\%$|$\\leq 1000$|\n\n对于全部数据，保证有 $1\\leq n\\leq 1000$，$1\\leq l_i\\leq r_i\\leq 10^5$，$1\\leq h_i\\leq 10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P10727", "type": "P", "difficulty": 1, "samples": [["3\n5 9\n19 4\n8 10", "80"], ["5\n8 2\n4 9\n3 8\n1 7\n9 4\n", "36"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "2023", "枚举", "NOISG（新加坡）"], "title": "[NOISG 2023 Qualification] Area", "background": "", "description": "Stuart 有 $n$ 个长方形，第 $i$ 个长方形长 $h_i$，宽 $w_i$。\n\n长方形的面积是它所覆盖的区域的大小。Stuart 想请你帮他找到这 $n$ 个长方形中面积最大的一个的面积。", "inputFormat": "第一行，一个整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $h_i,w_i$，表示第 $i$ 个长方形的长和宽。", "outputFormat": "一个整数，表示最大面积。", "hint": "### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$50$|$n=1$|\n|$2$|$50$|无|\n\n对于所有数据，$1\\le n\\le100,1\\le h_i,w_i\\le1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2023 Qualification] Area", "background": "", "description": "Stuart 有 $n$ 个长方形，第 $i$ 个长方形长 $h_i$，宽 $w_i$。\n\n长方形的面积是它所覆盖的区域的大小。Stuart 想请你帮他找到这 $n$ 个长方形中面积最大的一个的面积。", "inputFormat": "第一行，一个整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $h_i,w_i$，表示第 $i$ 个长方形的长和宽。", "outputFormat": "一个整数，表示最大面积。", "hint": "### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$50$|$n=1$|\n|$2$|$50$|无|\n\n对于所有数据，$1\\le n\\le100,1\\le h_i,w_i\\le1000$。", "locale": "zh-CN"}}}
{"pid": "P10728", "type": "P", "difficulty": 2, "samples": [["3\n2 3\n1 3\n5 3\n", "1"], ["4\n5 6\n2 5\n6 9\n1 3\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "贪心", "2023", "排序", "扫描线", "NOISG（新加坡）"], "title": "[NOISG 2023 Qualification] Swords", "background": "", "description": "YH 有 $n$ 把剑，第 $i$ 把剑的攻击力为 $a_i$，防御能力为 $b_i$。\n\n对于一把剑 $i$，如果存在一个 $j(j \\not = i)$，使得 $a_i\\le a_j$ 且 $b_i\\le b_j$，那么 YH 就认为这把剑是无用的。反之，他就认为这把剑是有用的。\n\n在本题中，我们保证，不可能找到两把剑 $i,j$，使得 $a_i=a_j$ 且 $b_i=b_j$。\n\n请你帮助 YH 求出这 $n$ 把剑中，有用的剑的数量。", "inputFormat": "第一行，一个整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $a_i,b_i$，表示第 $i$ 把剑形的攻击力和防御能力。", "outputFormat": "一个整数，表示有用的剑**的数量**。", "hint": "|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$11$|$n\\le500$|\n|$2$|$21$|$a_i,b_i\\le500$|\n|$3$|$34$|$a_i=i$|\n|$4$|$25$|对于每一个 $1\\le i<j\\le n$，有 $a_i\\not =a_j$|\n|$5$|$9$|无|\n\n对于所有数据，$1\\le n\\le100000,1\\le a_i,b_i\\le10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2023 Qualification] Swords", "background": "", "description": "YH 有 $n$ 把剑，第 $i$ 把剑的攻击力为 $a_i$，防御能力为 $b_i$。\n\n对于一把剑 $i$，如果存在一个 $j(j \\not = i)$，使得 $a_i\\le a_j$ 且 $b_i\\le b_j$，那么 YH 就认为这把剑是无用的。反之，他就认为这把剑是有用的。\n\n在本题中，我们保证，不可能找到两把剑 $i,j$，使得 $a_i=a_j$ 且 $b_i=b_j$。\n\n请你帮助 YH 求出这 $n$ 把剑中，有用的剑的数量。", "inputFormat": "第一行，一个整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $a_i,b_i$，表示第 $i$ 把剑形的攻击力和防御能力。", "outputFormat": "一个整数，表示有用的剑**的数量**。", "hint": "|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$11$|$n\\le500$|\n|$2$|$21$|$a_i,b_i\\le500$|\n|$3$|$34$|$a_i=i$|\n|$4$|$25$|对于每一个 $1\\le i<j\\le n$，有 $a_i\\not =a_j$|\n|$5$|$9$|无|\n\n对于所有数据，$1\\le n\\le100000,1\\le a_i,b_i\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P10729", "type": "P", "difficulty": 4, "samples": [["5\n1 2 3 4 5", "1 1 2 2 3"], ["5\n2 4 6 8 10\n", "1 2 3 4 5"], ["5\n3 3 1 3 2", "1 1 2 2 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2023", "NOISG（新加坡）"], "title": "[NOISG 2023 Qualification] Dolls", "background": "", "description": "Marc 正在教幼儿园的小朋友，他选择套娃来教小朋友们认识物体的大小。\n\n一个套娃有一个自己的尺寸，记为 $a$。如果两个套娃 $x$ 和 $y$ 的尺寸 $a_x$ 和 $a_y$ 可以满足 $a_x-a_y\\ge2$，那么套娃 $y$ 可以放在套娃 $x$ 中。\n\n很显然，套娃之间是可以互相嵌套多层的。于是 Marc 想请你回答一些问题：\n\n这些问题持续 $n$ 天。在第 $i$ 天，Marc 购买了一个大小为 $a_i$ 的套娃。他想请你求出，在买完第 $i$ 个套娃后，他用前 $i$ 个套娃最多可以套多少层。", "inputFormat": "第一行，一个正整数 $n$。\n\n第二行 $n$ 个整数，表示 $a$。", "outputFormat": "一行 $n$ 个正整数，第 $i$ 个表示用前 $i$ 个套娃最多能套多少层。", "hint": "### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$23$|$n\\le200$|\n|$2$|$14$|$a_i$ 为奇数|\n|$3$|$27$|$a_i$ 不为 $4$ 的倍数|\n|$4$|$36$|无|\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100000,1 \\le a_i \\le 500000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2023 Qualification] Dolls", "background": "", "description": "Marc 正在教幼儿园的小朋友，他选择套娃来教小朋友们认识物体的大小。\n\n一个套娃有一个自己的尺寸，记为 $a$。如果两个套娃 $x$ 和 $y$ 的尺寸 $a_x$ 和 $a_y$ 可以满足 $a_x-a_y\\ge2$，那么套娃 $y$ 可以放在套娃 $x$ 中。\n\n很显然，套娃之间是可以互相嵌套多层的。于是 Marc 想请你回答一些问题：\n\n这些问题持续 $n$ 天。在第 $i$ 天，Marc 购买了一个大小为 $a_i$ 的套娃。他想请你求出，在买完第 $i$ 个套娃后，他用前 $i$ 个套娃最多可以套多少层。", "inputFormat": "第一行，一个正整数 $n$。\n\n第二行 $n$ 个整数，表示 $a$。", "outputFormat": "一行 $n$ 个正整数，第 $i$ 个表示用前 $i$ 个套娃最多能套多少层。", "hint": "### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$23$|$n\\le200$|\n|$2$|$14$|$a_i$ 为奇数|\n|$3$|$27$|$a_i$ 不为 $4$ 的倍数|\n|$4$|$36$|无|\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100000,1 \\le a_i \\le 500000$。", "locale": "zh-CN"}}}
{"pid": "P10730", "type": "P", "difficulty": 5, "samples": [["3\n14 10 100\n3 1 1\n2 3 1", "5"], ["2\n83 72\n1 3\n1 3", "24"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2023", "NOISG（新加坡）"], "title": "[NOISG 2023 Qualification] Burgers", "background": "", "description": "龙虾 Kai 经营着一家汉堡店。做一个汉堡需要 $n$ 种原料，第 $i$ 种原料他有 $x_i$ 份。\n\n他手中有两种汉堡食谱，这两种汉堡对于第 $i$ 种原料分别需要 $a_i$ 份和 $b_i$ 份来制作。\n\n计算 Kai 最多能用这些原料制作多少个汉堡。", "inputFormat": "第一行，一个正整数 $n$。\n\n第二行 $n$ 个整数，表示 $x$。\n\n第三行 $n$ 个整数，表示 $a$。\n\n第四行 $n$ 个整数，表示 $b$。", "outputFormat": "一行一个整数表示最多能制作多少个汉堡。", "hint": "### 【样例 #1 解释】\n\nKai 可以制作 $3$ 个第一种汉堡和 $2$ 个第二种汉堡。\n\n### 【样例 #2 解释】\n\nKai 可以制作 $24$ 个第一种汉堡或 $24$ 个第二种汉堡。\n\n### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$9$|对于所有的 $1 \\le i \\le n$，$a_i=b_i$。|\n|$2$|$17$|$n,x_i\\le100$|\n|$3$|$25$|$n,x_i\\le1500$|\n|$4$|$49$|无|\n\n对于 $100\\%$ 的数据，$1\\le n\\le100000,1\\le x_i,a_i,b_i\\le10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2023 Qualification] Burgers", "background": "", "description": "龙虾 Kai 经营着一家汉堡店。做一个汉堡需要 $n$ 种原料，第 $i$ 种原料他有 $x_i$ 份。\n\n他手中有两种汉堡食谱，这两种汉堡对于第 $i$ 种原料分别需要 $a_i$ 份和 $b_i$ 份来制作。\n\n计算 Kai 最多能用这些原料制作多少个汉堡。", "inputFormat": "第一行，一个正整数 $n$。\n\n第二行 $n$ 个整数，表示 $x$。\n\n第三行 $n$ 个整数，表示 $a$。\n\n第四行 $n$ 个整数，表示 $b$。", "outputFormat": "一行一个整数表示最多能制作多少个汉堡。", "hint": "### 【样例 #1 解释】\n\nKai 可以制作 $3$ 个第一种汉堡和 $2$ 个第二种汉堡。\n\n### 【样例 #2 解释】\n\nKai 可以制作 $24$ 个第一种汉堡或 $24$ 个第二种汉堡。\n\n### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$9$|对于所有的 $1 \\le i \\le n$，$a_i=b_i$。|\n|$2$|$17$|$n,x_i\\le100$|\n|$3$|$25$|$n,x_i\\le1500$|\n|$4$|$49$|无|\n\n对于 $100\\%$ 的数据，$1\\le n\\le100000,1\\le x_i,a_i,b_i\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P10731", "type": "P", "difficulty": 5, "samples": [["9 4\n1 2\n2 3\n2 6\n3 4\n4 5\n4 7\n6 9\n7 8\n6 2\n5 3\n4 8\n5 9", "2\n4 2"], ["6 5\n1 2\n2 3\n4 1\n3 5\n4 6\n1 1\n2 2\n3 3\n2 2\n4 4\n", "4\n3 2 4 1"], ["8 3\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n3 5\n8 5\n4 4", "2\n4 6\n"], ["6 2\n1 2\n1 3\n1 4\n1 5\n1 6\n2 2\n5 6", "2\n2 1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "线段树", "树状数组", "2023", "Special Judge", "树链剖分", "NOISG（新加坡）"], "title": "[NOISG 2023 Qualification] Network", "background": null, "description": "鸭子 Rui Yuan 有 $n$ 台服务器和 $n-1$ 条**双向**数据线，其中第 $i$ 条数据线**双向**连接 $u_i$ 和 $v_i$。保证对于所有 $1 \\le i \\not = j \\le n$，可以通过数据线从第 $i$ 台服务器到达第 $j$ 台服务器，反之亦然。\n\nRui Yuan 还有 $m$ 个应用程序正在运行，第 $j$ 个程序分布在 $a_j$ 和 $b_j$ 两台服务器上运行。\n\n初始时，所有服务器都在运行状态。\n\n第 $j$ 个应用程序如果对下面两个条件**都**成立时，可以运行：\n\n- $a_j$ 和 $b_j$ 均为运行中的服务器。\n\n- $a_j$ 和 $b_j$ 之间可以通过数据线和**正在运行的服务器**连接。\n\nRui Yuan 想请你求出，至少停止运行多少台服务器，才能使所有应用程序停止运行。", "inputFormat": "第一行，两个整数 $n,m$。\n\n接下来 $n-1$ 行，每行两个整数 $u_i,v_i$。\n\n接下来 $m$ 行，每行两个整数 $a_j,b_j$。", "outputFormat": "第一行，一个整数 $x$，表示最少要停运多少台服务器。\n\n接下来 $1$ 行 $x$ 个整数，表示要停运的服务器的编号。所有 $x$ 个整数应互不相同。你可以以任意顺序输出它们。", "hint": "### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$4$|$a_i=b_i$|\n|$2$|$17$|$u_i=i,v_i=i+1$|\n|$3$|$14$|$n,m\\le15$|\n|$4$|$29$|$n,m\\le2000$|\n|$5$|$36$|无|\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 200000,1 \\le u_i,v_i \\le n,u_i\\not = v_i,1 \\le a_j,b_j\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2023 Qualification] Network", "background": null, "description": "鸭子 Rui Yuan 有 $n$ 台服务器和 $n-1$ 条**双向**数据线，其中第 $i$ 条数据线**双向**连接 $u_i$ 和 $v_i$。保证对于所有 $1 \\le i \\not = j \\le n$，可以通过数据线从第 $i$ 台服务器到达第 $j$ 台服务器，反之亦然。\n\nRui Yuan 还有 $m$ 个应用程序正在运行，第 $j$ 个程序分布在 $a_j$ 和 $b_j$ 两台服务器上运行。\n\n初始时，所有服务器都在运行状态。\n\n第 $j$ 个应用程序如果对下面两个条件**都**成立时，可以运行：\n\n- $a_j$ 和 $b_j$ 均为运行中的服务器。\n\n- $a_j$ 和 $b_j$ 之间可以通过数据线和**正在运行的服务器**连接。\n\nRui Yuan 想请你求出，至少停止运行多少台服务器，才能使所有应用程序停止运行。", "inputFormat": "第一行，两个整数 $n,m$。\n\n接下来 $n-1$ 行，每行两个整数 $u_i,v_i$。\n\n接下来 $m$ 行，每行两个整数 $a_j,b_j$。", "outputFormat": "第一行，一个整数 $x$，表示最少要停运多少台服务器。\n\n接下来 $1$ 行 $x$ 个整数，表示要停运的服务器的编号。所有 $x$ 个整数应互不相同。你可以以任意顺序输出它们。", "hint": "### 【数据范围】\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$0$|$0$|样例|\n|$1$|$4$|$a_i=b_i$|\n|$2$|$17$|$u_i=i,v_i=i+1$|\n|$3$|$14$|$n,m\\le15$|\n|$4$|$29$|$n,m\\le2000$|\n|$5$|$36$|无|\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 200000,1 \\le u_i,v_i \\le n,u_i\\not = v_i,1 \\le a_j,b_j\\le n$。", "locale": "zh-CN"}}}
{"pid": "P10732", "type": "P", "difficulty": 1, "samples": [["8 13", "Palindrome!\nPalindrome!\n10\nPalindrome!\n12\n13"], ["3 3", "Palindrome!"], ["999999997 1000000000 ", "999999997\n999999998\nPalindrome!\n1000000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "2019", "NOISG（新加坡）"], "title": "[NOISG 2019 Prelim] Palindromic FizzBuzz", "background": "翻译自 [NOISG2019 Prelim A.Palindromic FizzBuzz](https://github.com/noisg/sg_noi_archive/blob/master/2019_prelim/)。", "description": "给定 $S,E$，对于在 $S,E$ 区间中的每一个数字，如果它不回文，输出它本身，否则输出 `Palindrome!`。", "inputFormat": "一行两个整数 $S,E$。", "outputFormat": "共 $E-S+1$ 行，每行一个整数，输出方式见题目描述。", "hint": "### 【样例 #1 解释】\n$8,9,11$ 都是回文数，所以输出 `Palindrome!`。\n### 【样例 #2 解释】\n$3$ 是回文数。\n### 【数据范围】\n为方便，下文令 $x$ 满足 $1 \\leq S \\leq E \\leq x$。\n| $\\text{Subtask}$ | 分值 | $x$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $0$ | - | 样例 |\n| $1$ | $7$ | $9$ | $S=E$ |\n| $2$ | $11$ | $9$ | 无 |\n| $3$ | $14$ | $100$ | 无 |\n| $4$ | $8$ | $10^5$ | 无 |\n| $5$ | $9$ | $10^9$ | $S=E$ |\n| $6$ | $20$ | $10^9$ | 无 |\n| $7$ | $31$ | $10^{18}$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq S \\leq E \\leq 10^{18},E-S+1\\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2019 Prelim] Palindromic FizzBuzz", "background": "翻译自 [NOISG2019 Prelim A.Palindromic FizzBuzz](https://github.com/noisg/sg_noi_archive/blob/master/2019_prelim/)。", "description": "给定 $S,E$，对于在 $S,E$ 区间中的每一个数字，如果它不回文，输出它本身，否则输出 `Palindrome!`。", "inputFormat": "一行两个整数 $S,E$。", "outputFormat": "共 $E-S+1$ 行，每行一个整数，输出方式见题目描述。", "hint": "### 【样例 #1 解释】\n$8,9,11$ 都是回文数，所以输出 `Palindrome!`。\n### 【样例 #2 解释】\n$3$ 是回文数。\n### 【数据范围】\n为方便，下文令 $x$ 满足 $1 \\leq S \\leq E \\leq x$。\n| $\\text{Subtask}$ | 分值 | $x$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $0$ | - | 样例 |\n| $1$ | $7$ | $9$ | $S=E$ |\n| $2$ | $11$ | $9$ | 无 |\n| $3$ | $14$ | $100$ | 无 |\n| $4$ | $8$ | $10^5$ | 无 |\n| $5$ | $9$ | $10^9$ | $S=E$ |\n| $6$ | $20$ | $10^9$ | 无 |\n| $7$ | $31$ | $10^{18}$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq S \\leq E \\leq 10^{18},E-S+1\\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10733", "type": "P", "difficulty": 2, "samples": [["2 1\n2 1 7", "9 7"], ["5 6\n1 2 1\n3 5 4\n1 5 3\n1 3 3\n2 3 1\n2 4 1", "3 1 4 1 5"], ["2 5\n1 2 1\n2 1 1\n1 2 1\n1 2 1\n2 1 1", "1 114514"], ["5 1\n1 2 123", "123 1000000000 3 4 26311337"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2019", "Special Judge", "构造", "NOISG（新加坡）"], "title": "[NOISG 2019 Prelim] Lost Array", "background": "翻译自 [NOISG2019 Prelim B.Lost Array](https://github.com/noisg/sg_noi_archive/blob/master/2019_prelim/)。\n\n**本题已启用 Special Judge，满足题目条件的任何答案都将视为正确。**", "description": "给定 $M$ 组形如 $\\min (X_{A_i},X_{B_i})=C_i$ 的关系式，请构造一个长度为 $N$ 的数组 $X$，使得数组中的每个数字在 $1$ 到 $10^9$ 之间，并且该数组满足所有的关系式。\n\n题目保证数组存在。", "inputFormat": "第一行两个整数 $N,M$。\n\n接下来 $M$ 行，每行三个数字 $A_i,B_i,C_i$。", "outputFormat": "共一行 $N$ 个整数，代表你构造的数组 $X$。", "hint": "### 【样例 #1 解释】\n显然，$\\min (X_2,X_1) = \\min (9,7) =7$，满足题目条件。\n### 【样例 #3 解释】\n原题的题面没有此样例，但测试数据有。\n\n第一个限制为 $\\min (X_1,X_2) =1$，所有的条件实际上和这个限制一样。\n### 【样例 #4 解释】\n唯一的限制为 $\\min (X_1,X_2) =123$，其余的数字可以是介于 $1$ 到 $10^9$ 之间的任何数字。\n### 【数据范围】\n| $\\text{Subtask}$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $5$ | $N=2,M=1$ |\n| $2$ | $6$ | $M\\leq 3$ |\n| $3$ | $20$ | $N,M\\leq 1000$ |\n| $4$ | $21$ | $C_i \\leq 10,N \\leq 5$ |\n| $5$ | $48$ | 无 |\n\n对于 $100\\%$ 的数据：\n- $1 \\leq N,M \\leq 10^5$\n- $1 \\leq A_i ,B_i \\leq N$\n- $A_i \\neq B_i$\n- $1 \\leq C_i \\leq 10^9$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2019 Prelim] Lost Array", "background": "翻译自 [NOISG2019 Prelim B.Lost Array](https://github.com/noisg/sg_noi_archive/blob/master/2019_prelim/)。\n\n**本题已启用 Special Judge，满足题目条件的任何答案都将视为正确。**", "description": "给定 $M$ 组形如 $\\min (X_{A_i},X_{B_i})=C_i$ 的关系式，请构造一个长度为 $N$ 的数组 $X$，使得数组中的每个数字在 $1$ 到 $10^9$ 之间，并且该数组满足所有的关系式。\n\n题目保证数组存在。", "inputFormat": "第一行两个整数 $N,M$。\n\n接下来 $M$ 行，每行三个数字 $A_i,B_i,C_i$。", "outputFormat": "共一行 $N$ 个整数，代表你构造的数组 $X$。", "hint": "### 【样例 #1 解释】\n显然，$\\min (X_2,X_1) = \\min (9,7) =7$，满足题目条件。\n### 【样例 #3 解释】\n原题的题面没有此样例，但测试数据有。\n\n第一个限制为 $\\min (X_1,X_2) =1$，所有的条件实际上和这个限制一样。\n### 【样例 #4 解释】\n唯一的限制为 $\\min (X_1,X_2) =123$，其余的数字可以是介于 $1$ 到 $10^9$ 之间的任何数字。\n### 【数据范围】\n| $\\text{Subtask}$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 样例 |\n| $1$ | $5$ | $N=2,M=1$ |\n| $2$ | $6$ | $M\\leq 3$ |\n| $3$ | $20$ | $N,M\\leq 1000$ |\n| $4$ | $21$ | $C_i \\leq 10,N \\leq 5$ |\n| $5$ | $48$ | 无 |\n\n对于 $100\\%$ 的数据：\n- $1 \\leq N,M \\leq 10^5$\n- $1 \\leq A_i ,B_i \\leq N$\n- $A_i \\neq B_i$\n- $1 \\leq C_i \\leq 10^9$", "locale": "zh-CN"}}}
{"pid": "P10734", "type": "P", "difficulty": 4, "samples": [["2 3\nQ 1 2\nR 1 2\nQ 1 2", "?\nR"], ["4 5\nR 1 2\nA 2 3\nA 1 4\nQ 2 4\nQ 1 3", "A\nA"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "并查集", "NOISG（新加坡）"], "title": "[NOISG 2019 Prelim] Experimental Charges", "background": "翻译自 [NOISG2019 Prelim C.Experimental Charges](https://github.com/noisg/sg_noi_archive/blob/master/2019_prelim/)。", "description": "现有 $N$ 个带电粒子，带正电子的粒子会和带负电子的粒子相互吸引，而带同一种电子的粒子会相互排斥。\n\n有 $Q$ 次操作，每次操作表示为 $T_i,A_i,B_i$，可根据 $T_i$ 的不同分为三种类型：\n- `A` 操作代表 $A_i,B_i$ 互相吸引。\n- `R` 操作代表 $A_i,B_i$ 互相排斥。\n- `Q` 操作询问按照目前已知的信息，如果 $A_i,B_i$ 放在一起，会发生什么。\n\n对于每个 `Q` 操作，如果互相吸引，输出 `A`；如果互相排斥，输出 `R`；如果无法确定，输出 `?`。\n\n保证至少有一种可能使得所有操作不冲突。", "inputFormat": "第一行两个整数 $N,Q$。\n\n接下来的 $Q$ 行，每行一个字符 $T_i$ 与两个整数 $A_i,B_i$，表示一种操作。", "outputFormat": "若干行，每行表示一次 `Q` 操作的回答。", "hint": "### 【样例 #1 解释】\n对于第一次询问，并不能确定 $1,2$ 之间的关系，输出 `?`。\n\n对于第二次询问，可以确定 $1,2$ 相斥，输出 `R`。\n### 【数据范围】\n| $\\text{Subtask}$ | 分值 | $N,Q$ | $T_i,A_i,B_i$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $7$ | $N=2,Q\\leq 10$ | 无 |\n| $1$ | $11$ | 无 | $A_i=1$ 或 $B_i=1$ |\n| $2$ | $14$ | 无 | $T_i$ 仅可能为 `R` 或 `Q` |\n| $3$ | $12$ | 无 | 所有关系给出后才有查询操作 |\n| $4$ | $25$ | $1\\leq N,Q \\leq 10^3$ | 无 |\n| $5$ | $31$ | 无 | 无 |\n\n对于 $100\\%$ 的数据：\n- $1 \\leq N,Q \\leq 10^5$\n- $1 \\leq A_i \\neq B_i \\leq N$\n- $T_i$ 仅可能为 `A`，`R` 或 `Q`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2019 Prelim] Experimental Charges", "background": "翻译自 [NOISG2019 Prelim C.Experimental Charges](https://github.com/noisg/sg_noi_archive/blob/master/2019_prelim/)。", "description": "现有 $N$ 个带电粒子，带正电子的粒子会和带负电子的粒子相互吸引，而带同一种电子的粒子会相互排斥。\n\n有 $Q$ 次操作，每次操作表示为 $T_i,A_i,B_i$，可根据 $T_i$ 的不同分为三种类型：\n- `A` 操作代表 $A_i,B_i$ 互相吸引。\n- `R` 操作代表 $A_i,B_i$ 互相排斥。\n- `Q` 操作询问按照目前已知的信息，如果 $A_i,B_i$ 放在一起，会发生什么。\n\n对于每个 `Q` 操作，如果互相吸引，输出 `A`；如果互相排斥，输出 `R`；如果无法确定，输出 `?`。\n\n保证至少有一种可能使得所有操作不冲突。", "inputFormat": "第一行两个整数 $N,Q$。\n\n接下来的 $Q$ 行，每行一个字符 $T_i$ 与两个整数 $A_i,B_i$，表示一种操作。", "outputFormat": "若干行，每行表示一次 `Q` 操作的回答。", "hint": "### 【样例 #1 解释】\n对于第一次询问，并不能确定 $1,2$ 之间的关系，输出 `?`。\n\n对于第二次询问，可以确定 $1,2$ 相斥，输出 `R`。\n### 【数据范围】\n| $\\text{Subtask}$ | 分值 | $N,Q$ | $T_i,A_i,B_i$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $7$ | $N=2,Q\\leq 10$ | 无 |\n| $1$ | $11$ | 无 | $A_i=1$ 或 $B_i=1$ |\n| $2$ | $14$ | 无 | $T_i$ 仅可能为 `R` 或 `Q` |\n| $3$ | $12$ | 无 | 所有关系给出后才有查询操作 |\n| $4$ | $25$ | $1\\leq N,Q \\leq 10^3$ | 无 |\n| $5$ | $31$ | 无 | 无 |\n\n对于 $100\\%$ 的数据：\n- $1 \\leq N,Q \\leq 10^5$\n- $1 \\leq A_i \\neq B_i \\leq N$\n- $T_i$ 仅可能为 `A`，`R` 或 `Q`。", "locale": "zh-CN"}}}
{"pid": "P10735", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288]}, "tags": ["数学", "2019", "二分", "交互题", "Special Judge", "NOISG（新加坡）"], "title": "[NOISG 2019 Prelim] Square or Rectangle?", "background": "翻译自 [NOISG2019 Prelim D.Square or Rectangle?](https://github.com/noisg/sg_noi_archive/blob/master/2019_prelim/)。\n\n请注意，本题为**交互题**，请**尽量使用 C++ 进行作答**。同时，你**只需要实现题目中要求的函数**。**不要将答案输出在标准输出。**\n\n对于非 C++ 语言的选手，本题有 IO 交互版：<https://www.luogu.com.cn/problem/P15054>，可在此进行评测。", "description": "现在有一个 $N\\times N$ 的网格，网格内**有一个至少占网格总大小 $4\\%$ 的矩形**。但是，你现在不知道这个矩形是长方形还是正方形，你需要**定义一个函数**来完成这个问题。\n\n### 【实现细节】\n你需要定义以下函数：\n\n`bool am_i_square(int N, int Q)`\n\n- $N$：网格的大小\n- $Q$：能询问评测机的次数。\n\n为了确定形状，你可以向评测机至多调用 $Q$ 次 `bool inside_shape(int X, int Y)` 函数。调用这个来询问评测机方格 $(X,Y)$ 是否在这个矩形中。\n\n一旦你确定了形状，你就可以返回一个 `bool` 类型的量，代表这个矩形是否为**正方形**。\n\n评测机会调用你的函数 $T$ 次。$T$ 的大小见【数据范围与评测方法】。", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "### 【样例】\n考虑以下调用：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/so2eprl8.png)\n\n`am_i_square(5, 25)`\n\n这表示这是一个 $5 \\times 5$ 大小的网格，你可以调用至多 $25$ 次。\n\n`inside_shape(3, 3) = true`\n\n这询问了方格 $(3,3)$ 是否在矩形内，它在正方形的正中间，所以返回 `true`。\n\n`inside_shape(5, 4) = false`\n\n这询问了方格 $(5,4)$ 是否在矩形内，它不在正方形内，所以返回 `false`。\n\n`inside_shape(1, 1) = false`\n\n这询问了方格 $(1,1)$ 是否在矩形内，它不在正方形内，所以返回 `false`。\n\n`inside_shape(2, 4) = true`\n\n这询问了方格 $(2,4)$ 是否在矩形内，它在正方形的左下角，所以返回 `true`。\n\n综上，我们可以确定这是一个正方形，所以该函数返回 `true`。\n### 【数据范围与评测方法】\n对于 $100\\%$ 的测试点：$N=100,1\\leq T \\leq 1000$。\n| $\\text{Subtask}$ | 分值 | 附加条件 |\n| :----------: | :----------: | :----------: |\n| $0$ | $14$ | $Q=10^4$ |\n| $1$ | $19$ | $Q=100$ |\n| $2$ | $18$ | $Q=40$，图形至少占网格总大小的 $25\\%$ |\n| $3$ | $49$ | $Q=50$，得分见下文 |\n### 【Subtask 3 的计分方法】\n记你在所有调用中最大使用了 $q$ 次询问。\n- 若 $q >50$，你得到 $0$ 分。\n- 若 $34 \\leq q \\leq 50$，你得到 $40-30\\times \\frac{q-34}{17}$ 的分数。\n- 若 $q \\leq 33$，你得到满分。\n### 【提示】\n请在你的函数前加上以下内容：\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nextern \"C\" bool inside_shape(int x,int y);\n```\n同时，请在你的 `bool am_i_square(int N, int Q)` 前加上`extern \"C\" `。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2019 Prelim] Square or Rectangle?", "background": "翻译自 [NOISG2019 Prelim D.Square or Rectangle?](https://github.com/noisg/sg_noi_archive/blob/master/2019_prelim/)。\n\n请注意，本题为**交互题**，请**尽量使用 C++ 进行作答**。同时，你**只需要实现题目中要求的函数**。**不要将答案输出在标准输出。**\n\n对于非 C++ 语言的选手，本题有 IO 交互版：<https://www.luogu.com.cn/problem/P15054>，可在此进行评测。", "description": "现在有一个 $N\\times N$ 的网格，网格内**有一个至少占网格总大小 $4\\%$ 的矩形**。但是，你现在不知道这个矩形是长方形还是正方形，你需要**定义一个函数**来完成这个问题。\n\n### 【实现细节】\n你需要定义以下函数：\n\n`bool am_i_square(int N, int Q)`\n\n- $N$：网格的大小\n- $Q$：能询问评测机的次数。\n\n为了确定形状，你可以向评测机至多调用 $Q$ 次 `bool inside_shape(int X, int Y)` 函数。调用这个来询问评测机方格 $(X,Y)$ 是否在这个矩形中。\n\n一旦你确定了形状，你就可以返回一个 `bool` 类型的量，代表这个矩形是否为**正方形**。\n\n评测机会调用你的函数 $T$ 次。$T$ 的大小见【数据范围与评测方法】。", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "### 【样例】\n考虑以下调用：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/so2eprl8.png)\n\n`am_i_square(5, 25)`\n\n这表示这是一个 $5 \\times 5$ 大小的网格，你可以调用至多 $25$ 次。\n\n`inside_shape(3, 3) = true`\n\n这询问了方格 $(3,3)$ 是否在矩形内，它在正方形的正中间，所以返回 `true`。\n\n`inside_shape(5, 4) = false`\n\n这询问了方格 $(5,4)$ 是否在矩形内，它不在正方形内，所以返回 `false`。\n\n`inside_shape(1, 1) = false`\n\n这询问了方格 $(1,1)$ 是否在矩形内，它不在正方形内，所以返回 `false`。\n\n`inside_shape(2, 4) = true`\n\n这询问了方格 $(2,4)$ 是否在矩形内，它在正方形的左下角，所以返回 `true`。\n\n综上，我们可以确定这是一个正方形，所以该函数返回 `true`。\n### 【数据范围与评测方法】\n对于 $100\\%$ 的测试点：$N=100,1\\leq T \\leq 1000$。\n| $\\text{Subtask}$ | 分值 | 附加条件 |\n| :----------: | :----------: | :----------: |\n| $0$ | $14$ | $Q=10^4$ |\n| $1$ | $19$ | $Q=100$ |\n| $2$ | $18$ | $Q=40$，图形至少占网格总大小的 $25\\%$ |\n| $3$ | $49$ | $Q=50$，得分见下文 |\n### 【Subtask 3 的计分方法】\n记你在所有调用中最大使用了 $q$ 次询问。\n- 若 $q >50$，你得到 $0$ 分。\n- 若 $34 \\leq q \\leq 50$，你得到 $40-30\\times \\frac{q-34}{17}$ 的分数。\n- 若 $q \\leq 33$，你得到满分。\n### 【提示】\n请在你的函数前加上以下内容：\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nextern \"C\" bool inside_shape(int x,int y);\n```\n同时，请在你的 `bool am_i_square(int N, int Q)` 前加上`extern \"C\" `。", "locale": "zh-CN"}}}
{"pid": "P10736", "type": "P", "difficulty": 6, "samples": [["5\n1 3 -4 2 1\n", "8"], ["4\n1 1 -2 3", "5"], ["5\n-1 -3 0 -5 -4\n", "0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2020", "ICPC", "SEERC"], "title": "[SEERC 2020] Archeologists", "background": "", "description": "你在玩一个寻宝类游戏，一共有 $n$ 个格子，编号为 $1 \\sim n$，你每在 $i$ 号格子上下挖一层便会获得 $p_i$ 的价值，其中你需要保证每个格子相邻的两个格子都与其下挖的深度的差值不超过 $1$（注意此时 $1$ 和 $n$ 号点最多只能挖一层），请最大化总价值。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 2.5 \\times 10^5)$。\n\n接下来一行 $n$ 个整数 $p_i\\ (-10^6 \\leq p_i \\leq 10^6)$。", "outputFormat": "输出最大价值。", "hint": "样例一解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jalyemdz.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SEERC 2020] Archeologists", "background": "", "description": "你在玩一个寻宝类游戏，一共有 $n$ 个格子，编号为 $1 \\sim n$，你每在 $i$ 号格子上下挖一层便会获得 $p_i$ 的价值，其中你需要保证每个格子相邻的两个格子都与其下挖的深度的差值不超过 $1$（注意此时 $1$ 和 $n$ 号点最多只能挖一层），请最大化总价值。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 2.5 \\times 10^5)$。\n\n接下来一行 $n$ 个整数 $p_i\\ (-10^6 \\leq p_i \\leq 10^6)$。", "outputFormat": "输出最大价值。", "hint": "样例一解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jalyemdz.png)", "locale": "zh-CN"}}}
{"pid": "P10737", "type": "P", "difficulty": 4, "samples": [["010", "Alice"], ["1111", "Bob"], ["1010", "Bob"], ["1010001011001", "Alice"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "ICPC", "SEERC"], "title": "[SEERC 2020] Reverse Game", "background": "", "description": "Alice 和 Bob 在玩一个游戏，规则如下：\n\n- 游戏开始前给定一个字符串 $s$。\n\n- 每次行动，选择 $s$ 的一个子串 $t$，$t$ 只能是 `10`、`100`、`110`、`1010` 中的一个，反转 $t$ 的每个字符，例如 `100` 翻转为 `001`。\n\n- 不能操作者输掉游戏。\n\nAlice 先手，问双方同时采取最优策略的情况下，谁能赢。", "inputFormat": "一个仅包含 $01$ 的字符串 $s\\ (1 \\leq |s| \\leq 10^6)$。", "outputFormat": "如果 Alice 胜利输出 `Alice`，Bob 胜利输出 `Bob`。", "hint": "对于样例 $1$，选择子串 `10` 进行反转后 Bob 无法操作。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SEERC 2020] Reverse Game", "background": "", "description": "Alice 和 Bob 在玩一个游戏，规则如下：\n\n- 游戏开始前给定一个字符串 $s$。\n\n- 每次行动，选择 $s$ 的一个子串 $t$，$t$ 只能是 `10`、`100`、`110`、`1010` 中的一个，反转 $t$ 的每个字符，例如 `100` 翻转为 `001`。\n\n- 不能操作者输掉游戏。\n\nAlice 先手，问双方同时采取最优策略的情况下，谁能赢。", "inputFormat": "一个仅包含 $01$ 的字符串 $s\\ (1 \\leq |s| \\leq 10^6)$。", "outputFormat": "如果 Alice 胜利输出 `Alice`，Bob 胜利输出 `Bob`。", "hint": "对于样例 $1$，选择子串 `10` 进行反转后 Bob 无法操作。", "locale": "zh-CN"}}}
{"pid": "P10738", "type": "P", "difficulty": 6, "samples": [["", "3 2\n1 2\n2 3\n1\n1 3\n0"]], "limits": {"time": [2000], "memory": [262144]}, "tags": ["2020", "Special Judge", "ICPC", "SEERC"], "title": "[SEERC 2020] 3-colorings", "background": "", "description": "**这是一道仅有输出的题。**\n\n定义一个图的有效“三色”染色为：\n\n- 每个点的颜色只能属于 $\\{1,2,3\\}$。\n\n- 对于每个有边相连的顶点 $(u,v)$，$u$ 的颜色需要与 $v$ 不同。\n\n可以证明，一个图最多的“三色”染色总数为 $3^n$ 种。\n\n现在你需构造一个图，一开始它存在 $n \\ (1 \\leq n \\leq 19)$ 个顶点 $m \\ (1 \\leq m \\leq \\frac{n(n-1)}{2})$ 条无向边，然后对于每个 $1 \\leq k \\leq 500$ 的 $k$，你可以添加至多 $17$ 条无向边使得此图的“三色”染色总数为 $6k$ 种。", "inputFormat": "无。", "outputFormat": "第一行 $n,m$，表示你构造图的点数和边数。\n\n然后 $m$ 行，一行两个整数 $u,v$，表示 $(u,v)$ 存在一条无向边。\n\n然后 $k$ 从 $1$ 到 $500$，每个 $k$ 输出你要添加的边数，然后再是对应行添加的边 $(u,v)$。", "hint": "样例仅给出 $k=1$ 和 $k=2$ 的示例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SEERC 2020] 3-colorings", "background": "", "description": "**这是一道仅有输出的题。**\n\n定义一个图的有效“三色”染色为：\n\n- 每个点的颜色只能属于 $\\{1,2,3\\}$。\n\n- 对于每个有边相连的顶点 $(u,v)$，$u$ 的颜色需要与 $v$ 不同。\n\n可以证明，一个图最多的“三色”染色总数为 $3^n$ 种。\n\n现在你需构造一个图，一开始它存在 $n \\ (1 \\leq n \\leq 19)$ 个顶点 $m \\ (1 \\leq m \\leq \\frac{n(n-1)}{2})$ 条无向边，然后对于每个 $1 \\leq k \\leq 500$ 的 $k$，你可以添加至多 $17$ 条无向边使得此图的“三色”染色总数为 $6k$ 种。", "inputFormat": "无。", "outputFormat": "第一行 $n,m$，表示你构造图的点数和边数。\n\n然后 $m$ 行，一行两个整数 $u,v$，表示 $(u,v)$ 存在一条无向边。\n\n然后 $k$ 从 $1$ 到 $500$，每个 $k$ 输出你要添加的边数，然后再是对应行添加的边 $(u,v)$。", "hint": "样例仅给出 $k=1$ 和 $k=2$ 的示例。", "locale": "zh-CN"}}}
{"pid": "P10739", "type": "P", "difficulty": 5, "samples": [["4\n2 3 1 4\n2 1 1 4\n2 3 3 4", "8\n3 5\n3 5\n2 3\n2 5\n2 3\n5 2\n5 2\n5 2\n"], ["2\n1 2\n1 2\n1 2", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "Special Judge", "ICPC", "SEERC"], "title": "[SEERC 2020] Disk Sort", "background": "", "description": "你有 $n+1$ 根棍子，一开始 $1 \\sim n$ 的每根棍子上面都会存在 $3$ 个盘，颜色不超过 $n$ 种。\n\n每次操作，你可以选择一对 $(a_i,b_i)$，表示将 $a_i$ 最顶上的圆盘放到 $b_i$ 最上面（$a_i$ 的圆盘数量至少为 $1$，$b_i$ 的数量至多为 $2$）。\n\n你需要构造出一种合法方案使得操作结束后每个盘上的颜色都一样且 $n+1$ 号为空。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 1000)$，表示共有 $n$ 根棍子。\n\n接下来 $3$ 行，每行 $n$ 个整数 $c_{i,j}\\ (1 \\leq c_{i,j} \\leq n)$，表示第 $j$ 个棍子上面自上向下数第 $i$ 个的颜色。", "outputFormat": "第一行一个整数 $k\\ (1 \\leq k \\leq 6n)$，表示操作次数。\n\n然后 $k$ 行，每行一对 $(a_i,b_i)$，表示交换的对象。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SEERC 2020] Disk Sort", "background": "", "description": "你有 $n+1$ 根棍子，一开始 $1 \\sim n$ 的每根棍子上面都会存在 $3$ 个盘，颜色不超过 $n$ 种。\n\n每次操作，你可以选择一对 $(a_i,b_i)$，表示将 $a_i$ 最顶上的圆盘放到 $b_i$ 最上面（$a_i$ 的圆盘数量至少为 $1$，$b_i$ 的数量至多为 $2$）。\n\n你需要构造出一种合法方案使得操作结束后每个盘上的颜色都一样且 $n+1$ 号为空。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 1000)$，表示共有 $n$ 根棍子。\n\n接下来 $3$ 行，每行 $n$ 个整数 $c_{i,j}\\ (1 \\leq c_{i,j} \\leq n)$，表示第 $j$ 个棍子上面自上向下数第 $i$ 个的颜色。", "outputFormat": "第一行一个整数 $k\\ (1 \\leq k \\leq 6n)$，表示操作次数。\n\n然后 $k$ 行，每行一对 $(a_i,b_i)$，表示交换的对象。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10740", "type": "P", "difficulty": 3, "samples": [["3\n5 23 2021\n", "4"], ["5\n0 0 1 3 3", "15"], ["10\n0 1 2 3 4 5 6 7 8 9", "20"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "ICPC", "SEERC"], "title": "[SEERC 2020] Divisible by 3", "background": "", "description": "定义一个序列 $b$ 的权重为 $\\sum_{i=1}^n \\sum_{j=1}^{i-1} b_i \\times b_j$。\n\n现在你有一个长度为 $n$ 的数组 $a$，求一共存在多少种 $(l,r)$ 使得 $1 \\leq l \\leq r \\leq n$ 且 $[a_l, a_{l+1},\\ldots,a_r]$ 的权重能被 $3$ 整除。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 5 \\times 10^5)$。\n\n然后 $n$ 个整数 $a_i\\ (0 \\leq a_i \\leq 10^9)$。", "outputFormat": "输出方案总数。", "hint": "对于第一个样例，存在 $[1,1]$、$[2,2]$、$[3,3]$、$[1,3]$ 共 $4$ 种方案。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SEERC 2020] Divisible by 3", "background": "", "description": "定义一个序列 $b$ 的权重为 $\\sum_{i=1}^n \\sum_{j=1}^{i-1} b_i \\times b_j$。\n\n现在你有一个长度为 $n$ 的数组 $a$，求一共存在多少种 $(l,r)$ 使得 $1 \\leq l \\leq r \\leq n$ 且 $[a_l, a_{l+1},\\ldots,a_r]$ 的权重能被 $3$ 整除。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 5 \\times 10^5)$。\n\n然后 $n$ 个整数 $a_i\\ (0 \\leq a_i \\leq 10^9)$。", "outputFormat": "输出方案总数。", "hint": "对于第一个样例，存在 $[1,1]$、$[2,2]$、$[3,3]$、$[1,3]$ 共 $4$ 种方案。", "locale": "zh-CN"}}}
{"pid": "P10741", "type": "P", "difficulty": 5, "samples": [["3\n1 3 2", "4"], ["5\n1 2 3 4 5\n", "42"], ["7\n1 4 2 5 3 6 7", "124"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2020", "ICPC", "SEERC"], "title": "[SEERC 2020] Fence Job", "background": "", "description": "Fred 有一个长度为 $n$ 的排列 $h$，每次操作他可以选择一段区间 $[l,r]$，令 $h_i = \\min_{j=l}^{r}h_j\\ (i \\in [l,r])$。\n\n问进行若干次操作（可以为 $0$ 次）后不同的数组数量，对 $10^9 + 7$ 取模。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 3000)$。\n\n接下来一行 $n$ 个整数 $h_i\\ (1 \\leq h_i \\leq n)$。", "outputFormat": "输出操作后不同数组的数量模 $10^9+7$ 的值。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SEERC 2020] Fence Job", "background": "", "description": "Fred 有一个长度为 $n$ 的排列 $h$，每次操作他可以选择一段区间 $[l,r]$，令 $h_i = \\min_{j=l}^{r}h_j\\ (i \\in [l,r])$。\n\n问进行若干次操作（可以为 $0$ 次）后不同的数组数量，对 $10^9 + 7$ 取模。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 3000)$。\n\n接下来一行 $n$ 个整数 $h_i\\ (1 \\leq h_i \\leq n)$。", "outputFormat": "输出操作后不同数组的数量模 $10^9+7$ 的值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10742", "type": "P", "difficulty": 6, "samples": [["6\n1 1\n6 1\n6 11\n11 11\n11 6\n1 6", "50"], ["8\n2 4\n2 1\n4 1\n4 3\n1 3\n1 2\n3 2\n3 4", "6"], ["10\n1 1\n1 5\n4 5\n4 3\n2 3\n2 4\n1 4\n1 2\n4 2\n4 1", "8"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "ICPC", "SEERC"], "title": "[SEERC 2020] Simple Hull", "background": "", "description": "Gary 创造了一个含有 $n$ 个点的多边形，每个点的坐标形如 $(x,y)$。\n\n你需要进行一些连边，保证包含所有的点，同时连出来的图是一条“多边形链”（即任何一个点只能连向或被连向 $2$ 个点，且连出来的边可以在图中与其他边相交）。\n\n你还需要保证每两个存在连边的点 $i$ 和 $j$，这两个点形成的边在图中是垂直或水平的。\n\n输出连出来的图的最小面积。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 10^5)$，表示点的个数。\n\n然后 $n$ 行，每行两个整数 $x_i,y_i\\ (1 \\leq x_i,y_i \\leq 10^6)$。", "outputFormat": "输出连出的 $n$ 边形的面积。", "hint": "三个样例画出的图依次为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r9x5s5zy.png)\n\n（上述图未按比例画图）", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SEERC 2020] Simple Hull", "background": "", "description": "Gary 创造了一个含有 $n$ 个点的多边形，每个点的坐标形如 $(x,y)$。\n\n你需要进行一些连边，保证包含所有的点，同时连出来的图是一条“多边形链”（即任何一个点只能连向或被连向 $2$ 个点，且连出来的边可以在图中与其他边相交）。\n\n你还需要保证每两个存在连边的点 $i$ 和 $j$，这两个点形成的边在图中是垂直或水平的。\n\n输出连出来的图的最小面积。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 10^5)$，表示点的个数。\n\n然后 $n$ 行，每行两个整数 $x_i,y_i\\ (1 \\leq x_i,y_i \\leq 10^6)$。", "outputFormat": "输出连出的 $n$ 边形的面积。", "hint": "三个样例画出的图依次为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r9x5s5zy.png)\n\n（上述图未按比例画图）", "locale": "zh-CN"}}}
{"pid": "P10743", "type": "P", "difficulty": 6, "samples": [["5 15\n0 1 1 3 2\n1 1\n1 2\n1 3\n1 4\n1 5\n2 2\n2 3\n2 4\n2 5\n3 3\n3 4\n3 5\n4 4\n4 5\n5 5", "NO\nNO\nYES\nYES\nYES\nNO\nYES\nYES\nYES\nNO\nNO\nYES\nNO\nNO\nNO"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "ICPC", "SEERC"], "title": "[SEERC 2020] AND = OR", "background": null, "description": "一个数组 $b$ 被称为“好的数组”当且仅当可以将 $b$ 划分为两个非空的子数组，这两个子数组中第一个子数组的 $\\mathtt{OR}$ 结果与第二个子数组的 $\\mathtt{AND}$ 结果相等，例如 $\\{1,7,3,11\\}$，将其划分为 $\\{1,3\\}$ 与 $\\{7,11\\}$，$1\\ \\mathtt{OR}\\ 3 = 3$，$7\\ \\mathtt{AND}\\ 11 = 3$，所以它是一个好的数组。\n\n现在给定一个长度为 $n$ 的数组 $a$，$q$ 组询问，每次给定 $[l,r]$，问 $\\{a_l, a_{l+1},\\ldots,a_{r-1},a_{r}\\}$ 是不是一个好的数组。", "inputFormat": "第一行两个整数 $n\\ (1 \\leq n \\leq 10^5)$ 和 $q\\ (1 \\leq q \\leq 10^5)$。\n\n然后一行 $n$ 个整数表示序列 $a\\ (0\\leq a_i \\leq 2^{30}-1)$。\n\n接下来 $q$ 行，一行两个整数 $l,r\\ (1 \\leq l \\leq r \\leq n)$，表示一组询问。", "outputFormat": "对于每个询问，如果该子数组是好的输出 `YES`，否则输出 `NO`。", "hint": null, "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SEERC 2020] AND = OR", "background": null, "description": "一个数组 $b$ 被称为“好的数组”当且仅当可以将 $b$ 划分为两个非空的子数组，这两个子数组中第一个子数组的 $\\mathtt{OR}$ 结果与第二个子数组的 $\\mathtt{AND}$ 结果相等，例如 $\\{1,7,3,11\\}$，将其划分为 $\\{1,3\\}$ 与 $\\{7,11\\}$，$1\\ \\mathtt{OR}\\ 3 = 3$，$7\\ \\mathtt{AND}\\ 11 = 3$，所以它是一个好的数组。\n\n现在给定一个长度为 $n$ 的数组 $a$，$q$ 组询问，每次给定 $[l,r]$，问 $\\{a_l, a_{l+1},\\ldots,a_{r-1},a_{r}\\}$ 是不是一个好的数组。", "inputFormat": "第一行两个整数 $n\\ (1 \\leq n \\leq 10^5)$ 和 $q\\ (1 \\leq q \\leq 10^5)$。\n\n然后一行 $n$ 个整数表示序列 $a\\ (0\\leq a_i \\leq 2^{30}-1)$。\n\n接下来 $q$ 行，一行两个整数 $l,r\\ (1 \\leq l \\leq r \\leq n)$，表示一组询问。", "outputFormat": "对于每个询问，如果该子数组是好的输出 `YES`，否则输出 `NO`。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P10744", "type": "P", "difficulty": 5, "samples": [["1", "1"], ["2", "2"], ["3", "6"], ["4", "16"], ["5", "40"], ["1000000", "581177467"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "ICPC", "SEERC"], "title": "[SEERC 2020] Modulo Permutations", "background": "", "description": "求长度为 $n$ 的 $1 \\sim n$ 的所有排列总数，其中满足 $p_i \\bmod p_{i+1} \\leq 2$ 的（此处 $p_{n+1} = p_1$），对 $10^9 + 7$ 取模后的值。", "inputFormat": "一个整数 $n\\ (1 \\leq n \\leq 10^6)$。", "outputFormat": "输出答案模 $10^9+7$ 后的值。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SEERC 2020] Modulo Permutations", "background": "", "description": "求长度为 $n$ 的 $1 \\sim n$ 的所有排列总数，其中满足 $p_i \\bmod p_{i+1} \\leq 2$ 的（此处 $p_{n+1} = p_1$），对 $10^9 + 7$ 取模后的值。", "inputFormat": "一个整数 $n\\ (1 \\leq n \\leq 10^6)$。", "outputFormat": "输出答案模 $10^9+7$ 后的值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10745", "type": "P", "difficulty": 6, "samples": [["5\n1 2\n1 3\n2 4\n2 5\n2 2 3 3 3", "3 4 5 1 2"], ["4\n2 1\n3 2\n3 4\n1 0 1 2", "2 1 3 4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "ICPC", "SEERC"], "title": "[SEERC 2020] One Piece", "background": "", "description": "有一个图，它是一个 $n$ 个点的树，每条边都是形如 $(u,v)$ 的边长为 $1$ 的无向边。\n\n你有一个寻宝器，当你在点 $i$ 时，它会返回一个最远距离 $x$，表示存在宝藏的位置距 $i$ 点最远长度为 $x$，一个图可能存在多个宝藏。\n\n现在你知道了对于 $1 \\leq i \\leq n$ 时的寻宝器返回结果，问你确定每个点是否存在宝藏的概率从大到小依次排序后的数组。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 2.5 \\times 10^5)$，表示点数。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$，表示一条边。\n\n再一行 $n$ 个数，表示在 $i$ 点调用寻宝器的返回值。", "outputFormat": "输出每个点是否存在宝藏的概率从大到小依次排序后的数组。\n\n同概率下标升序排序。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SEERC 2020] One Piece", "background": "", "description": "有一个图，它是一个 $n$ 个点的树，每条边都是形如 $(u,v)$ 的边长为 $1$ 的无向边。\n\n你有一个寻宝器，当你在点 $i$ 时，它会返回一个最远距离 $x$，表示存在宝藏的位置距 $i$ 点最远长度为 $x$，一个图可能存在多个宝藏。\n\n现在你知道了对于 $1 \\leq i \\leq n$ 时的寻宝器返回结果，问你确定每个点是否存在宝藏的概率从大到小依次排序后的数组。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 2.5 \\times 10^5)$，表示点数。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$，表示一条边。\n\n再一行 $n$ 个数，表示在 $i$ 点调用寻宝器的返回值。", "outputFormat": "输出每个点是否存在宝藏的概率从大到小依次排序后的数组。\n\n同概率下标升序排序。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10746", "type": "P", "difficulty": 6, "samples": [["3\nactor\ncheat\nzeta\n1\nrBBnR\nNRnbB\nnRRnR\nNRxBr\nnBRbB", "actor 2"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "Special Judge", "ICPC", "SEERC"], "title": "[SEERC 2020] Codenames", "background": "", "description": "有 $q$ 个 $5 \\times 5$ 的图表，给出每个点的颜色（只可能是 `r`、`b`、`n`、`x`），具体颜色分配为：$9$ 个 `r`，$8$ 个 `b`，$5$ 个 `n`，一个 `x`。\n\n图表中每个点对应的字符始终确定，分别为：\n\n```\nabcde\nfghij\nklmno\npqrst\nuvwxy\n```\n\n图表中某些颜色已经翻开来了（用其颜色的大写字母表示已显示），然后你需要从一个 $n$ 个字符串的列表内选择一个字符串 $w$ 和一个数字 $g$，按下述规则进行操作 $g$ 次。\n\n- 如果当前 $w_i$ 字符代表的格子颜色已经被公示，不进行操作，令 $i \\gets i + 1$。\n- 否则，翻开 $w_i$ 代表的格子，如果 $w_i$ 的颜色为 `n`、`b` 或 `x`，就输了。然后再令 $i \\gets i+1$。\n- 当 $g$ 次操作完成或所有 `r` 色块都翻出来时结束操作。\n\n你想要使得所有 `r` 色块都翻出来，求一组满足条件的 $w$ 与 $g$。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 10^5)$。\n\n然后 $n$ 行，每行一个字符串，描述了一整个字符串列表。\n\n第 $n+2$ 行，整数 $q\\ (1 \\leq q \\leq 10^5)$，表示表格个数。\n\n然后 $q$ 组图表，每个图表占据 $5 \\times 5$ 的大小，描述了第 $i$ 个图表的颜色。", "outputFormat": "对于每个图表，如果有解，输出一组合法的 $w$ 和 $g\\ (1 \\leq g \\leq 9)$，无解输出 `IMPOSSIBLE`。", "hint": "答案还可能是 `actor 4`，`zeta 2` 等。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SEERC 2020] Codenames", "background": "", "description": "有 $q$ 个 $5 \\times 5$ 的图表，给出每个点的颜色（只可能是 `r`、`b`、`n`、`x`），具体颜色分配为：$9$ 个 `r`，$8$ 个 `b`，$5$ 个 `n`，一个 `x`。\n\n图表中每个点对应的字符始终确定，分别为：\n\n```\nabcde\nfghij\nklmno\npqrst\nuvwxy\n```\n\n图表中某些颜色已经翻开来了（用其颜色的大写字母表示已显示），然后你需要从一个 $n$ 个字符串的列表内选择一个字符串 $w$ 和一个数字 $g$，按下述规则进行操作 $g$ 次。\n\n- 如果当前 $w_i$ 字符代表的格子颜色已经被公示，不进行操作，令 $i \\gets i + 1$。\n- 否则，翻开 $w_i$ 代表的格子，如果 $w_i$ 的颜色为 `n`、`b` 或 `x`，就输了。然后再令 $i \\gets i+1$。\n- 当 $g$ 次操作完成或所有 `r` 色块都翻出来时结束操作。\n\n你想要使得所有 `r` 色块都翻出来，求一组满足条件的 $w$ 与 $g$。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 10^5)$。\n\n然后 $n$ 行，每行一个字符串，描述了一整个字符串列表。\n\n第 $n+2$ 行，整数 $q\\ (1 \\leq q \\leq 10^5)$，表示表格个数。\n\n然后 $q$ 组图表，每个图表占据 $5 \\times 5$ 的大小，描述了第 $i$ 个图表的颜色。", "outputFormat": "对于每个图表，如果有解，输出一组合法的 $w$ 和 $g\\ (1 \\leq g \\leq 9)$，无解输出 `IMPOSSIBLE`。", "hint": "答案还可能是 `actor 4`，`zeta 2` 等。", "locale": "zh-CN"}}}
{"pid": "P10747", "type": "P", "difficulty": 6, "samples": [["5\n2 3 4 5 6\n1 2 3 4 5", "2"], ["4\n1 2 4 2\n5 6 9 7\n", "0"], ["4\n9 19 6 5\n20 3 16 19\n", "1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "ICPC", "SEERC"], "title": "[SEERC 2020] Neo-Robin Hood", "background": "", "description": "你是一个大盗，镇上一共有 $n$ 户人家，对于每户人家 $i$，你在如下的选择里选一样。\n\n- 盗窃他的 $m_i$ 元钱，他会对你起仇恨。\n\n- 给他 $p_i$ 元钱，他会让你盗窃的一个人取消对你的仇恨。\n\n- 什么也不做。\n\n初始时你没有钱，你想知道，在没人对你有仇恨且你手中的钱非负的情况下，你最多能盗窃多少户人家。\n\n注：你可以按任意顺序依次访问每户人家。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 10^5)$。\n\n第二行一个长度为 $n$ 的序列 $m\\ (1 \\leq m_i \\leq 10^9)$。\n\n第三行一个长度为 $n$ 的序列 $p\\ (1 \\leq p_i \\leq 10^9)$。", "outputFormat": "输出最多能盗窃的人家数。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SEERC 2020] Neo-Robin Hood", "background": "", "description": "你是一个大盗，镇上一共有 $n$ 户人家，对于每户人家 $i$，你在如下的选择里选一样。\n\n- 盗窃他的 $m_i$ 元钱，他会对你起仇恨。\n\n- 给他 $p_i$ 元钱，他会让你盗窃的一个人取消对你的仇恨。\n\n- 什么也不做。\n\n初始时你没有钱，你想知道，在没人对你有仇恨且你手中的钱非负的情况下，你最多能盗窃多少户人家。\n\n注：你可以按任意顺序依次访问每户人家。", "inputFormat": "第一行一个整数 $n\\ (1 \\leq n \\leq 10^5)$。\n\n第二行一个长度为 $n$ 的序列 $m\\ (1 \\leq m_i \\leq 10^9)$。\n\n第三行一个长度为 $n$ 的序列 $p\\ (1 \\leq p_i \\leq 10^9)$。", "outputFormat": "输出最多能盗窃的人家数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10748", "type": "P", "difficulty": 3, "samples": [["3 3 2\n1 2\n1 3\n1 1 2 3 3 2 1 2 3", "1 2 2 1 2 1 3 3 3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "Special Judge", "ICPC", "SEERC"], "title": "[SEERC 2020] Mistake", "background": "", "description": "你有 $k$ 个机器，每个机器都**未按序**存储了 $1 \\sim n$ 共 $n$ 个数，当你启动某个机器时，该机器会将其存储的数最前面的数打印出来，然后删除它。\n\n但是很幸运，你知道 $m$ 对 $(a_i,b_i)$，表示每个存储的 $a_i$ 都在 $b_i$ 前面。\n\n你还知道你依次启动的机器输出了哪些，请对于每个打印的数，确定一种方案表示它是由哪个机器启动得来，保证每个数出现的次数 $=n$。\n\n存在多种可行解，输出任何都可以得分。", "inputFormat": "第一行三个整数 $n,k,m\\ (1 \\leq n,k\\leq 5 \\times 10^5, 0 \\leq m \\leq 2.5 \\times 10^5, 1 \\leq n \\times k \\leq 5 \\times 10^5)$。\n\n然后 $m$ 行每行两个 $a_i,b_i\\ (1 \\leq a_i,b_i \\leq n)$，保证不存在环。\n\n然后一行 $n \\times k$ 的数，表示依次启动的机器输出的序列。", "outputFormat": "输出一种合法的启动方案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SEERC 2020] Mistake", "background": "", "description": "你有 $k$ 个机器，每个机器都**未按序**存储了 $1 \\sim n$ 共 $n$ 个数，当你启动某个机器时，该机器会将其存储的数最前面的数打印出来，然后删除它。\n\n但是很幸运，你知道 $m$ 对 $(a_i,b_i)$，表示每个存储的 $a_i$ 都在 $b_i$ 前面。\n\n你还知道你依次启动的机器输出了哪些，请对于每个打印的数，确定一种方案表示它是由哪个机器启动得来，保证每个数出现的次数 $=n$。\n\n存在多种可行解，输出任何都可以得分。", "inputFormat": "第一行三个整数 $n,k,m\\ (1 \\leq n,k\\leq 5 \\times 10^5, 0 \\leq m \\leq 2.5 \\times 10^5, 1 \\leq n \\times k \\leq 5 \\times 10^5)$。\n\n然后 $m$ 行每行两个 $a_i,b_i\\ (1 \\leq a_i,b_i \\leq n)$，保证不存在环。\n\n然后一行 $n \\times k$ 的数，表示依次启动的机器输出的序列。", "outputFormat": "输出一种合法的启动方案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10749", "type": "P", "difficulty": 5, "samples": [["11 5\n2 4 2 3 4 4 3 1 4 4 4\n1 4\n2 8\n6 9\n8 10\n8 11", "1\n4\n1\n1\n1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "COI（克罗地亚）"], "title": "[COI 2024] CERN", "background": "题目来源：<https://hsin.hr/hio2024/>。翻译来自 [文心一言](https://yiyan.baidu.com/)。如果有更好的翻译请在讨论区提供。", "description": "CERN 是一个专注于核研究和粒子物理学的国际机构。CERN 的粒子加速器系统被用于进行高速粒子碰撞实验。\n\n我们考虑按序列排列的 $N$ 个粒子。每个粒子由其类型 $v_i$ 定义，$v_i$ 是一个介于 $1$ 和 $N$ 之间的正整数。\n\n在最新的研究中，需要进行 $Q$ 次实验。在第 $i$ 次实验中，我们观察序列中从第 $l$ 个到第 $r$ 个的所有粒子（其中 $l < r$）。在观察到的粒子中，我们可以选择任意两个类型不同的粒子并在加速器中进行碰撞，导致两个粒子都被摧毁。我们重复这个碰撞过程，直到观察到的粒子中没有两个类型不同的粒子为止。实验将在所有观察到的粒子都被摧毁或仅剩下同类型的粒子时结束。当然，根据我们碰撞粒子的顺序，最终可能留下各种类型的粒子。\n\n由于粒子碰撞成本高昂，你决定只在理论上进行实验。现在，对于每次实验，你感兴趣的是有多少种类型的粒子，使得实验结束时可能剩下该类型的粒子。", "inputFormat": "第一行包含两个正整数 $N$ 和 $Q$，分别表示粒子的数量和实验的次数。\n\n第二行包含 $N$ 个数 $v_1, \\dots, v_N$，表示粒子的类型。\n\n接下来的 $Q$ 行中，每行包含两个正整数 $l$ 和 $r$（$1 \\leq l < r \\leq N$），表示第 $i$ 次实验中观察到的粒子区间。", "outputFormat": "对于每次实验，在单独的一行中输出可能的结束实验时剩余的粒子类型数量。", "hint": "**【样例解释】**\n\n在第一个实验中，我们可以使类型为 $3$ 和 $4$ 的粒子相撞，留下两个类型为 $2$ 的粒子。无法最终得到任何其他类型的粒子。\n\n在第二个实验中，有可能最终剩下每种类型的一些粒子。\n\n在第四和第五个实验中，不论选择哪种碰撞方式，最终都会剩下一些类型为 $4$ 的粒子。\n\n**【数据范围】**\n\n在所有子任务中，$2 \\leq N \\leq 5\\times 10^5$ 且 $1 \\leq Q \\leq 5\\times 10^5$。\n\n- 子任务 1（13 分）：对于每个 $i = 1, \\dots, N，v_i \\leq 10$。\n- 子任务 2（19 分）：每种类型的粒子最多只有两个。\n- 子任务 3（17 分）：$N, Q \\leq 2\\times 10^3$。\n- 子任务 4（19 分）：$N, Q \\leq 1\\times 10^5$。\n- 子任务 5（32 分）：没有额外的约束条件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2024] CERN", "background": "题目来源：<https://hsin.hr/hio2024/>。翻译来自 [文心一言](https://yiyan.baidu.com/)。如果有更好的翻译请在讨论区提供。", "description": "CERN 是一个专注于核研究和粒子物理学的国际机构。CERN 的粒子加速器系统被用于进行高速粒子碰撞实验。\n\n我们考虑按序列排列的 $N$ 个粒子。每个粒子由其类型 $v_i$ 定义，$v_i$ 是一个介于 $1$ 和 $N$ 之间的正整数。\n\n在最新的研究中，需要进行 $Q$ 次实验。在第 $i$ 次实验中，我们观察序列中从第 $l$ 个到第 $r$ 个的所有粒子（其中 $l < r$）。在观察到的粒子中，我们可以选择任意两个类型不同的粒子并在加速器中进行碰撞，导致两个粒子都被摧毁。我们重复这个碰撞过程，直到观察到的粒子中没有两个类型不同的粒子为止。实验将在所有观察到的粒子都被摧毁或仅剩下同类型的粒子时结束。当然，根据我们碰撞粒子的顺序，最终可能留下各种类型的粒子。\n\n由于粒子碰撞成本高昂，你决定只在理论上进行实验。现在，对于每次实验，你感兴趣的是有多少种类型的粒子，使得实验结束时可能剩下该类型的粒子。", "inputFormat": "第一行包含两个正整数 $N$ 和 $Q$，分别表示粒子的数量和实验的次数。\n\n第二行包含 $N$ 个数 $v_1, \\dots, v_N$，表示粒子的类型。\n\n接下来的 $Q$ 行中，每行包含两个正整数 $l$ 和 $r$（$1 \\leq l < r \\leq N$），表示第 $i$ 次实验中观察到的粒子区间。", "outputFormat": "对于每次实验，在单独的一行中输出可能的结束实验时剩余的粒子类型数量。", "hint": "**【样例解释】**\n\n在第一个实验中，我们可以使类型为 $3$ 和 $4$ 的粒子相撞，留下两个类型为 $2$ 的粒子。无法最终得到任何其他类型的粒子。\n\n在第二个实验中，有可能最终剩下每种类型的一些粒子。\n\n在第四和第五个实验中，不论选择哪种碰撞方式，最终都会剩下一些类型为 $4$ 的粒子。\n\n**【数据范围】**\n\n在所有子任务中，$2 \\leq N \\leq 5\\times 10^5$ 且 $1 \\leq Q \\leq 5\\times 10^5$。\n\n- 子任务 1（13 分）：对于每个 $i = 1, \\dots, N，v_i \\leq 10$。\n- 子任务 2（19 分）：每种类型的粒子最多只有两个。\n- 子任务 3（17 分）：$N, Q \\leq 2\\times 10^3$。\n- 子任务 4（19 分）：$N, Q \\leq 1\\times 10^5$。\n- 子任务 5（32 分）：没有额外的约束条件。", "locale": "zh-CN"}}}
{"pid": "P10750", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["二分", "2024", "交互题", "Special Judge", "O2优化", "排序", "Ad-hoc", "COI（克罗地亚）"], "title": "[COI 2024] Koreografija", "background": "题目来源：<https://hsin.hr/hio2024/>。翻译来自 [文心一言](https://yiyan.baidu.com/)。如果有更好的翻译请在讨论区提供。\n\n", "description": "Jura：Tvrtko，昨天的演出怎么样？  \nTvrtko：非常棒。最精彩的部分是当 $1000$ 名舞者从左到右排列并开始表演时，那个编舞。他们每个人的服装上都写有一个 $1$ 到 $1000$ 之间的数字，并且这些数字都是不同的。但我不得不说，当我看到他们排成一行时，我不喜欢他们的顺序。  \nJura：你是什么意思？  \nTvrtko：我在队伍中看到了一些连续的舞者间隔，并计算了有多少对舞者是这样的：较低位置的舞者编号高于较高位置的舞者编号。我喜欢这样的对数是奇数的情况。  \nJura：哦，Tvrtko，你得看大局。我会处理的。但告诉我，他们的编号顺序是怎样的？  \nTvrtko：嗯……我已经忘了。但我可以告诉你对于每个连续的舞者间隔，我是否喜欢。  \nJura：就这样吧。我们别无选择，只能尝试根据这个来确定他们的编号。  ", "inputFormat": "这是一个交互任务。你的程序需要与组织者提供的程序建立对话，以响应所提出的问题。\n\n你的程序可以通过向标准输出写入来发送查询。每个查询应单独打印在一行上，并应采用 `? a b` 的形式，其中 $a$ 和 $b$ 是满足 $1 \\leq a \\leq b \\leq 1000$ 的正整数。数字 $a$ 和 $b$ 表示所观察区间的舞者位置。\n\n在输出每个查询后，你的程序应刷新输出，并从标准输入读取对查询的响应——一个在集合 $\\{0,1\\}$ 的数字，表示 Tvrtko 对该区间的看法：数字 $1$ 表示 Tvrtko 喜欢那个区间，而 $0$ 表示他不喜欢。你的程序最多可以发送 $500000$ 个这样的查询。\n\n一旦你的程序计算出了舞者服装上的数字，它应在单独的一行上向标准输出打印符号 `!` 后跟从左到右出现的请求的数字序列。之后，你的程序应再次刷新输出并终止执行。", "outputFormat": "", "hint": "**【解释说明】**\n\n尽管在任务中舞者的数量总是为 $1000$，但为了说明目的，我们提供了一个当舞者数量为 $4$ 时的交互示例。\n\n假设：舞者服装上的数字按顺序为 $2,1,4,3$。下面是一种可能的查询方案：\n\n- 查询 `? 1 2`，Tvrtko 数到了一对。\n- 查询 `? 1 3`，Tvrtko 数到了一对。\n- 查询 `? 1 4`，Tvrtko 数到了两对。\n- 查询 `? 2 3`，Tvrtko 没有数到任何一对。\n- 查询 `? 2 4`，Tvrtko 数到了一对。\n- 查询 `? 3 4`，Tvrtko 数到了一对。\n- 使用 `! 2 1 4 3` 输出答案。\n\n**【评分细则】**\n\n设 $Q$ 为你的程序在所有测试用例中发送的最大查询数。\n\n如果 $Q > 5\\times 10^5$，你的程序将得 $0$ 分。\n\n否则，你的程序将获得的分数基于以下表格：\n\n| 范围 | 分数 |\n| :-----------: | :-----------: |\n| $4\\times 10^4 \\leq Q\\leq 5\\times 10^5$ | $30+70\\times\\dfrac{1/Q-1/500000}{1/40000-1/500000}$ |\n| $Q\\leq 4\\times 10^4$ | $100$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2024] Koreografija", "background": "题目来源：<https://hsin.hr/hio2024/>。翻译来自 [文心一言](https://yiyan.baidu.com/)。如果有更好的翻译请在讨论区提供。\n\n", "description": "Jura：Tvrtko，昨天的演出怎么样？  \nTvrtko：非常棒。最精彩的部分是当 $1000$ 名舞者从左到右排列并开始表演时，那个编舞。他们每个人的服装上都写有一个 $1$ 到 $1000$ 之间的数字，并且这些数字都是不同的。但我不得不说，当我看到他们排成一行时，我不喜欢他们的顺序。  \nJura：你是什么意思？  \nTvrtko：我在队伍中看到了一些连续的舞者间隔，并计算了有多少对舞者是这样的：较低位置的舞者编号高于较高位置的舞者编号。我喜欢这样的对数是奇数的情况。  \nJura：哦，Tvrtko，你得看大局。我会处理的。但告诉我，他们的编号顺序是怎样的？  \nTvrtko：嗯……我已经忘了。但我可以告诉你对于每个连续的舞者间隔，我是否喜欢。  \nJura：就这样吧。我们别无选择，只能尝试根据这个来确定他们的编号。  ", "inputFormat": "这是一个交互任务。你的程序需要与组织者提供的程序建立对话，以响应所提出的问题。\n\n你的程序可以通过向标准输出写入来发送查询。每个查询应单独打印在一行上，并应采用 `? a b` 的形式，其中 $a$ 和 $b$ 是满足 $1 \\leq a \\leq b \\leq 1000$ 的正整数。数字 $a$ 和 $b$ 表示所观察区间的舞者位置。\n\n在输出每个查询后，你的程序应刷新输出，并从标准输入读取对查询的响应——一个在集合 $\\{0,1\\}$ 的数字，表示 Tvrtko 对该区间的看法：数字 $1$ 表示 Tvrtko 喜欢那个区间，而 $0$ 表示他不喜欢。你的程序最多可以发送 $500000$ 个这样的查询。\n\n一旦你的程序计算出了舞者服装上的数字，它应在单独的一行上向标准输出打印符号 `!` 后跟从左到右出现的请求的数字序列。之后，你的程序应再次刷新输出并终止执行。", "outputFormat": "", "hint": "**【解释说明】**\n\n尽管在任务中舞者的数量总是为 $1000$，但为了说明目的，我们提供了一个当舞者数量为 $4$ 时的交互示例。\n\n假设：舞者服装上的数字按顺序为 $2,1,4,3$。下面是一种可能的查询方案：\n\n- 查询 `? 1 2`，Tvrtko 数到了一对。\n- 查询 `? 1 3`，Tvrtko 数到了一对。\n- 查询 `? 1 4`，Tvrtko 数到了两对。\n- 查询 `? 2 3`，Tvrtko 没有数到任何一对。\n- 查询 `? 2 4`，Tvrtko 数到了一对。\n- 查询 `? 3 4`，Tvrtko 数到了一对。\n- 使用 `! 2 1 4 3` 输出答案。\n\n**【评分细则】**\n\n设 $Q$ 为你的程序在所有测试用例中发送的最大查询数。\n\n如果 $Q > 5\\times 10^5$，你的程序将得 $0$ 分。\n\n否则，你的程序将获得的分数基于以下表格：\n\n| 范围 | 分数 |\n| :-----------: | :-----------: |\n| $4\\times 10^4 \\leq Q\\leq 5\\times 10^5$ | $30+70\\times\\dfrac{1/Q-1/500000}{1/40000-1/500000}$ |\n| $Q\\leq 4\\times 10^4$ | $100$ |\n", "locale": "zh-CN"}}}
{"pid": "P10751", "type": "P", "difficulty": 0, "samples": [["3\n0 1 0\n0 0 1\n1 0 0", "3\n0 1 0\n0 0 2\n3 0 0"], ["3\n0 1 1\n0 0 1\n0 0 0", "-1"], ["4\n0 1 0 1\n0 0 1 1\n1 0 0 0\n0 0 1 0", "3\n0 1 0 1\n0 0 2 3\n3 0 0 0\n0 0 2 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "COI（克罗地亚）"], "title": "[COI 2024] Ministarstvo（征集 checker）", "background": "题目来源：<https://hsin.hr/hio2024/>。翻译来自 [文心一言](https://yiyan.baidu.com/)。如果有更好的翻译请在讨论区提供。", "description": "经过在派对中成功的职业生涯后（我们不会透露这个派对的名字），Pero 在旅游局找到了一份工作。他监管着一个由 $N$ 个城市组成的网络，这些城市从 $1$ 到 $N$ 进行编号，每对城市之间都有一条单向道路相连。为了增加收入，他决定引入交通许可。Pero 原本希望为每条道路都引入一种特殊的许可，但这会引起上级的注意。因此，他决定引入 $K$ 种不同的许可，从 $1$ 到 $K$ 进行编号，并规定每条道路上行驶都需要持有特定的许可。\n\n为了确保可观的收入，Pero 将满足以下属性：\n\n- 对于每个城市 $v$，都存在一个城市 $u$，使得无法仅凭一种许可从城市 $v$ 行驶到城市 $u$。\n\nPero 请求你的帮助来确定最小的 $K$ 值，如果存在满足上述属性的许可分配方案，则输出这个 $K$ 值以及许可分配方案。如果不存在这样的分配方案，则输出 $-1$。", "inputFormat": "第一行包含一个正整数 $N$。\n\n接下来的 $N$ 行中，第 $i$ 行包含 $N$ 个数字 $a_{i,j}$，其中如果有一条从城市 $i$ 到城市 $j$ 的道路，则 $a_{i,j} = 1$。注意 $a_{i,i} = 0$，且对于 $i \\neq j$，$a_{i,j}$ 和 $a_{j,i}$ 中只有一个非零。", "outputFormat": "如果不存在满足属性的分配方案，则在第一行且仅第一行输出 $-1$。\n\n否则，在第一行输出最小的正整数 $K$。\n\n在接下来的 $N$ 行中，输出分配方案的描述。第 $i$ 行输出 $N$ 个数字 $b_{i,j}$，如果 $a_{i,j} = 0$，则 $b_{i,j} = 0$；否则，$1 \\leq b_{i,j} \\leq K$，表示在该道路上行驶需要哪种许可。", "hint": "**【样例解释】**\n\n对于样例 $3$：需要第一个许可证的道路用红色标记，第二个许可证用蓝色，第三个许可证用绿色。从城市 $1$ 出发，仅使用一个许可证无法到达城市 $3$。从城市 $2$ 出发，仅使用一个许可证无法到达城市 $1$。从城市 $3$ 出发，仅使用一个许可证无法到达城市 $2$。从城市 $4$ 出发，仅使用一个许可证无法到达城市 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nyaqbpz9.png)\n\n**【数据范围】**\n\n在所有子任务中，$2 \\leq N \\leq 1000$。在每个子任务中， $15\\%$ 的分数仅用于判断是否存在这样的分配方案。对于这些分数，如果你不输出 $-1$，你需要输出某个分配方案，但它不必满足 Pero 所期望的属性。\n\n- 子任务 1（20 分）：$N\\leq 5$；\n- 子任务 2（80 分）：无其他约束限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2024] Ministarstvo（征集 checker）", "background": "题目来源：<https://hsin.hr/hio2024/>。翻译来自 [文心一言](https://yiyan.baidu.com/)。如果有更好的翻译请在讨论区提供。", "description": "经过在派对中成功的职业生涯后（我们不会透露这个派对的名字），Pero 在旅游局找到了一份工作。他监管着一个由 $N$ 个城市组成的网络，这些城市从 $1$ 到 $N$ 进行编号，每对城市之间都有一条单向道路相连。为了增加收入，他决定引入交通许可。Pero 原本希望为每条道路都引入一种特殊的许可，但这会引起上级的注意。因此，他决定引入 $K$ 种不同的许可，从 $1$ 到 $K$ 进行编号，并规定每条道路上行驶都需要持有特定的许可。\n\n为了确保可观的收入，Pero 将满足以下属性：\n\n- 对于每个城市 $v$，都存在一个城市 $u$，使得无法仅凭一种许可从城市 $v$ 行驶到城市 $u$。\n\nPero 请求你的帮助来确定最小的 $K$ 值，如果存在满足上述属性的许可分配方案，则输出这个 $K$ 值以及许可分配方案。如果不存在这样的分配方案，则输出 $-1$。", "inputFormat": "第一行包含一个正整数 $N$。\n\n接下来的 $N$ 行中，第 $i$ 行包含 $N$ 个数字 $a_{i,j}$，其中如果有一条从城市 $i$ 到城市 $j$ 的道路，则 $a_{i,j} = 1$。注意 $a_{i,i} = 0$，且对于 $i \\neq j$，$a_{i,j}$ 和 $a_{j,i}$ 中只有一个非零。", "outputFormat": "如果不存在满足属性的分配方案，则在第一行且仅第一行输出 $-1$。\n\n否则，在第一行输出最小的正整数 $K$。\n\n在接下来的 $N$ 行中，输出分配方案的描述。第 $i$ 行输出 $N$ 个数字 $b_{i,j}$，如果 $a_{i,j} = 0$，则 $b_{i,j} = 0$；否则，$1 \\leq b_{i,j} \\leq K$，表示在该道路上行驶需要哪种许可。", "hint": "**【样例解释】**\n\n对于样例 $3$：需要第一个许可证的道路用红色标记，第二个许可证用蓝色，第三个许可证用绿色。从城市 $1$ 出发，仅使用一个许可证无法到达城市 $3$。从城市 $2$ 出发，仅使用一个许可证无法到达城市 $1$。从城市 $3$ 出发，仅使用一个许可证无法到达城市 $2$。从城市 $4$ 出发，仅使用一个许可证无法到达城市 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nyaqbpz9.png)\n\n**【数据范围】**\n\n在所有子任务中，$2 \\leq N \\leq 1000$。在每个子任务中， $15\\%$ 的分数仅用于判断是否存在这样的分配方案。对于这些分数，如果你不输出 $-1$，你需要输出某个分配方案，但它不必满足 Pero 所期望的属性。\n\n- 子任务 1（20 分）：$N\\leq 5$；\n- 子任务 2（80 分）：无其他约束限制。", "locale": "zh-CN"}}}
{"pid": "P10752", "type": "P", "difficulty": 5, "samples": [["5 5\n.....\n.#...\n.....\n...#.\n.....", "3"], ["5 5\n....#\n....#\n.....\n.....\n#....", "1"], ["3 2\n.#\n#.\n..", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["并查集", "2024", "广度优先搜索 BFS", "COI（克罗地亚）"], "title": "[COI 2024] Sirologija", "background": "题目来源：<https://hsin.hr/hio2024/>。翻译来自 [文心一言](https://yiyan.baidu.com/)。如果有更好的翻译请在讨论区提供。", "description": "你是一只蚂蚁，但并非普通的蚂蚁——你是一只对奶酪学痴迷的蚂蚁！你在厨房里发现了一片新的奶酪，并希望尽可能多地派遣你的手下（小蚂蚁）去探索它。想象一下这片奶酪就像一个有 $N$ 行 $M$ 列的表格，从上到下行标号为 $1$ 到 $N$，从左到右列标号为 $1$ 到 $M$。一些区域有洞，而其他区域则有奶酪。我们将第 $r$ 行第 $s$ 列的区域表示为 $(r, s)$。左上角和右下角的区域肯定包含奶酪。\n\n我们设手下的数量为 $K$。你的手下将从左上角的区域开始探索，并在右下角的区域结束。他们只能向下或向右移动。此外，他们的路径不能“交叉”，这意味着我们可以给他们从 $1$ 到 $K$ 的编号，使得没有从某个区域向右移动的是编号较低的手下，同时从该区域向下移动的是编号较高的手下。\n\n此外，你希望这些路径在某种意义上“不同”，即对于每一对手下，都存在一个包含洞的区域 $(r, s)$，使得其中一只手下在某个时刻位于第 $s$ 列且行标号低于 $r$，而另一只手下在某个时刻（不一定同时）也位于第 $s$ 列但行标号高于 $r$ 。非正式地说，每一对手下都从洞的不同侧接近。\n\n输出满足给定条件的路径选择的最大 $K$ 值。\n\n以下是一些不满足条件的路径示例：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0klk31q8.png)", "inputFormat": "第一行包含两个正整数 $N, M$。\n\n接下来的 $N$ 行包含每行的描述。第 $i$ 行包含 $M$ 个字符，其中 `.` 表示奶酪，`#` 表示一个洞。", "outputFormat": "输出满足给定条件的路径选择的最大 $K$ 值。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/433g2mgu.png)\n\n**【数据范围】**\n\n- 子任务 1（15 分）：所有洞都在同一行。\n- 子任务 2（18 分）：$N, M \\leq 10$。\n- 子任务 3（16 分）：$N, M \\leq 50$，第一行、最后一行、第一列、最后一列中没有洞。\n- 子任务 4（18 分）：$N, M \\leq 50$。\n- 子任务 5（16 分）：$N, M \\leq 2000$，第一行、最后一行、第一列、最后一列中没有洞。\n- 子任务 6（17 分）：没有额外的约束条件。\n\n在所有子任务中，$2 \\leq N, M \\leq 2000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2024] Sirologija", "background": "题目来源：<https://hsin.hr/hio2024/>。翻译来自 [文心一言](https://yiyan.baidu.com/)。如果有更好的翻译请在讨论区提供。", "description": "你是一只蚂蚁，但并非普通的蚂蚁——你是一只对奶酪学痴迷的蚂蚁！你在厨房里发现了一片新的奶酪，并希望尽可能多地派遣你的手下（小蚂蚁）去探索它。想象一下这片奶酪就像一个有 $N$ 行 $M$ 列的表格，从上到下行标号为 $1$ 到 $N$，从左到右列标号为 $1$ 到 $M$。一些区域有洞，而其他区域则有奶酪。我们将第 $r$ 行第 $s$ 列的区域表示为 $(r, s)$。左上角和右下角的区域肯定包含奶酪。\n\n我们设手下的数量为 $K$。你的手下将从左上角的区域开始探索，并在右下角的区域结束。他们只能向下或向右移动。此外，他们的路径不能“交叉”，这意味着我们可以给他们从 $1$ 到 $K$ 的编号，使得没有从某个区域向右移动的是编号较低的手下，同时从该区域向下移动的是编号较高的手下。\n\n此外，你希望这些路径在某种意义上“不同”，即对于每一对手下，都存在一个包含洞的区域 $(r, s)$，使得其中一只手下在某个时刻位于第 $s$ 列且行标号低于 $r$，而另一只手下在某个时刻（不一定同时）也位于第 $s$ 列但行标号高于 $r$ 。非正式地说，每一对手下都从洞的不同侧接近。\n\n输出满足给定条件的路径选择的最大 $K$ 值。\n\n以下是一些不满足条件的路径示例：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0klk31q8.png)", "inputFormat": "第一行包含两个正整数 $N, M$。\n\n接下来的 $N$ 行包含每行的描述。第 $i$ 行包含 $M$ 个字符，其中 `.` 表示奶酪，`#` 表示一个洞。", "outputFormat": "输出满足给定条件的路径选择的最大 $K$ 值。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/433g2mgu.png)\n\n**【数据范围】**\n\n- 子任务 1（15 分）：所有洞都在同一行。\n- 子任务 2（18 分）：$N, M \\leq 10$。\n- 子任务 3（16 分）：$N, M \\leq 50$，第一行、最后一行、第一列、最后一列中没有洞。\n- 子任务 4（18 分）：$N, M \\leq 50$。\n- 子任务 5（16 分）：$N, M \\leq 2000$，第一行、最后一行、第一列、最后一列中没有洞。\n- 子任务 6（17 分）：没有额外的约束条件。\n\n在所有子任务中，$2 \\leq N, M \\leq 2000$。", "locale": "zh-CN"}}}
{"pid": "P10753", "type": "P", "difficulty": 3, "samples": [["3 1\nbbc\nced\n1 a", "ne\nda"], ["6 0\nberlio\npjesni", "da"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "COI（克罗地亚）"], "title": "[COI 2023] Bliskost", "background": "题目来源：<https://hsin.hr/hio2023/>。", "description": "一个春天的傍晚，天气异常温暖，两位市民出现在莫斯科的牧首池塘边。第一位不是别人，正是编辑米哈伊尔·亚历山德罗维奇·别尔利奥兹 (Mihail Aleksandrovič Berlioz)，而另一位是名叫“无家汉” (Bezdomni) 的年轻诗人。他们每人都带着一个长度为 $N$ 的字符串。\n\n很快，一位神秘的黑魔法专家，沃兰德 (Woland) 教授，也加入了他们，并说道：\n\n- “先生们，你们的字符串非常有趣，我一眼就能看出它们是否 **相近**！”\n\n一次操作的定义是：选择一个字符串中的两个相邻字母，并将这两个字母都在字母表中循环前移一位。例如，将字母对 “ab” 变为 “bc”，或是将 “qz” 变为 “ra”。如果两个字符串可以通过对它们各自进行若干次操作后变得完全相同，那么这两个字符串就被认为是 **相近的 (bliskima)**。\n\n- “那当然了，教授，您在胡说八道。判断两个字符串是否相近可是个出了名的难题。”\n\n- “不不，米哈伊尔·亚历山德罗维奇，您搞错了，我这就向您证明！瞧好了，我现在就告诉您，您的两个字符串是否相近。然后，您再对您的字符串进行 $Q$ 次修改。在每一次修改之后，我都会再次判断它们是否相近。”\n\n- “您可真勇敢啊，教授，确实，非常勇敢……那么，我们开始吧！”", "inputFormat": "第一行包含两个正整数 $N$ 和 $Q$，分别表示字符串的长度和修改的次数。\n\n第二行是一个长度为 $N$ 的字符串，属于别尔利奥兹。\n\n第三行是一个长度为 $N$ 的字符串，属于“无家汉”。\n\n接下来 $Q$ 行中的第 $i$ 行，包含一个数字 $p_i$ 和一个字符 $c_i$，表示在第 $i$ 次修改中，别尔利奥兹将自己字符串中第 $p_i$ 个字母改为了 $c_i$。", "outputFormat": "在第一行，如果初始的两个字符串是相近的，请输出 “da”，否则输出 “ne”。\n\n在接下来 $Q$ 行中的第 $i$ 行，你需要根据在别尔利奥兹的字符串进行了第 $i$ 次修改后两个字符串是否相近，来输出 “da” 或 “ne”。", "hint": "**【样例解释】**\n\n在第一个示例中，更改后，单词在后续步骤中相近关系：\n- $\\tt abc \\to bcc \\to cdc \\to dec \\to dfd$\n- $\\tt ced \\to dfd$\n\n**【数据范围】**\n\n对于所有子任务，都有 $N$ 和 $Q$ 的取值范围限制：$1 \\leq N \\leq 1\\times 10^6$ 和 $0 ≤ Q ≤ 1\\times 10^6$。\n\n- 子任务 1（7 分）：$Q=0$，$N\\leq 5$；\n- 子任务 2（8 分）：$Q=0$，$N\\leq 1000$；\n- 子任务 3（13 分）：$Q=0$；\n- 子任务 4（12 分）：$Q\\leq 100000$，$N\\leq 5$；\n- 子任务 5（17 分）：$Q\\leq 100000$，$N\\leq 1000$；\n- 子任务 6（43 分）：没有其他额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2023] Bliskost", "background": "题目来源：<https://hsin.hr/hio2023/>。", "description": "一个春天的傍晚，天气异常温暖，两位市民出现在莫斯科的牧首池塘边。第一位不是别人，正是编辑米哈伊尔·亚历山德罗维奇·别尔利奥兹 (Mihail Aleksandrovič Berlioz)，而另一位是名叫“无家汉” (Bezdomni) 的年轻诗人。他们每人都带着一个长度为 $N$ 的字符串。\n\n很快，一位神秘的黑魔法专家，沃兰德 (Woland) 教授，也加入了他们，并说道：\n\n- “先生们，你们的字符串非常有趣，我一眼就能看出它们是否 **相近**！”\n\n一次操作的定义是：选择一个字符串中的两个相邻字母，并将这两个字母都在字母表中循环前移一位。例如，将字母对 “ab” 变为 “bc”，或是将 “qz” 变为 “ra”。如果两个字符串可以通过对它们各自进行若干次操作后变得完全相同，那么这两个字符串就被认为是 **相近的 (bliskima)**。\n\n- “那当然了，教授，您在胡说八道。判断两个字符串是否相近可是个出了名的难题。”\n\n- “不不，米哈伊尔·亚历山德罗维奇，您搞错了，我这就向您证明！瞧好了，我现在就告诉您，您的两个字符串是否相近。然后，您再对您的字符串进行 $Q$ 次修改。在每一次修改之后，我都会再次判断它们是否相近。”\n\n- “您可真勇敢啊，教授，确实，非常勇敢……那么，我们开始吧！”", "inputFormat": "第一行包含两个正整数 $N$ 和 $Q$，分别表示字符串的长度和修改的次数。\n\n第二行是一个长度为 $N$ 的字符串，属于别尔利奥兹。\n\n第三行是一个长度为 $N$ 的字符串，属于“无家汉”。\n\n接下来 $Q$ 行中的第 $i$ 行，包含一个数字 $p_i$ 和一个字符 $c_i$，表示在第 $i$ 次修改中，别尔利奥兹将自己字符串中第 $p_i$ 个字母改为了 $c_i$。", "outputFormat": "在第一行，如果初始的两个字符串是相近的，请输出 “da”，否则输出 “ne”。\n\n在接下来 $Q$ 行中的第 $i$ 行，你需要根据在别尔利奥兹的字符串进行了第 $i$ 次修改后两个字符串是否相近，来输出 “da” 或 “ne”。", "hint": "**【样例解释】**\n\n在第一个示例中，更改后，单词在后续步骤中相近关系：\n- $\\tt abc \\to bcc \\to cdc \\to dec \\to dfd$\n- $\\tt ced \\to dfd$\n\n**【数据范围】**\n\n对于所有子任务，都有 $N$ 和 $Q$ 的取值范围限制：$1 \\leq N \\leq 1\\times 10^6$ 和 $0 ≤ Q ≤ 1\\times 10^6$。\n\n- 子任务 1（7 分）：$Q=0$，$N\\leq 5$；\n- 子任务 2（8 分）：$Q=0$，$N\\leq 1000$；\n- 子任务 3（13 分）：$Q=0$；\n- 子任务 4（12 分）：$Q\\leq 100000$，$N\\leq 5$；\n- 子任务 5（17 分）：$Q\\leq 100000$，$N\\leq 1000$；\n- 子任务 6（43 分）：没有其他额外限制。", "locale": "zh-CN"}}}
{"pid": "P10754", "type": "P", "difficulty": 0, "samples": [["7\n2 3 0 3 2 0 0\n6 8 2 9 9 9 9\n1 2\n2 3\n1 4\n4 5\n5 6\n5 7", "11"], ["7\n2 3 0 3 2 0 0\n6 8 2 9 9 9 1\n1 2\n2 3\n1 4\n4 5\n5 6\n5 7", "4\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "COI（克罗地亚）"], "title": "[COI 2023] Nestabilnost", "background": "题目来源：<https://hsin.hr/hio2023/>。", "description": "河对岸的松林，一小时前还沐浴在五月的阳光下，此刻却变得模糊、朦胧、消散。只剩下一棵巨大的树，一棵有 $N$ 个节点的树……\n\n伊万在 119 号房间里，观察着这棵牢牢扎根于编号为 1 的节点的树。在更仔细地观察了这棵树之后，他注意到每个节点 $i$ 上都有一个数字 $a_i$。突然，一个 **$k$-好子树** (k-dobrog podstabla) 的定义闪现在他的脑海中。如果对于一个子树中的每一条连接节点 $(u, v)$（其中 $u$ 是 $v$ 的父节点）的边，都满足 $a_v = (a_u + 1) \\pmod k$，并且对于该子树内的每个节点 $v$，都满足 $a_v < k$，那么这个子树就是 **$k$-好的**。对于每个数字 $k$，存在一个 **$k$-好**子树的自然不稳定性，记为 $f(k)$。\n\n当他再次回过神来，他注意到树前漂浮着一个木筏，而他的右手里握着一把魔法锯子。伊万决定锯掉一些树枝（边），对于通过移除被锯掉的边而得到的每个连通块（子树），他都会选择一个数字 $k_i$，使得该连通块是 **$k_i$-好的**。伊万决定将这样的一组选择——即选择一组要切断的边，并为每个因此得到的子树选择一个满足条件的 $k_i$（使得该子树是 **$k_i$-好的**）——称为一次 **切割 (rezanjem)**。一次 **切割** 的 **不稳定性 (Nestabilnost)** 定义为所有得到的子树的 $f(k_i)$ 之和。请帮助伊万确定一次 **切割** 可能的最小 **不稳定性**！", "inputFormat": "第一行是一个正整数 $N$，表示树的节点数。\n\n第二行是 $N$ 个整数，第 $i$ 个数表示 $a_i$ ($0 \\le a_i \\le N - 1$) 。\n\n第三行是 $N$ 个整数，第 $k$ 个数表示 $f(k)$ ($1 \\le f(k) \\le 10^9$) 。\n\n接下来的 $N-1$ 行描述了这棵树的结构，第 $i$ 行包含两个整数 $u_i$ 和 $v_i$ ($1 \\le u_i, v_i \\le N, u_i \\ne v_i$)，表示节点 $u_i$ 和 $v_i$ 之间有一条边。", "outputFormat": "在唯一的一行中，输出一次 **切割** 可能的最小 **不稳定性**。", "hint": "**【样例解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wxof20q5.png)\n\n左图为样例 1，右图为样例 2。\n\n**【数据范围】**\n\n在所有子任务中，都满足 $1 ≤ N ≤ 3\\times 10^5$ 的条件。\n\n- 子任务 1（12 分）：$N \\leq 5 000$，树是一条链，且节点 $1$ 是链的一个端点。\n- 子任务 2（20 分）：$N \\leq 300 000$，树是一条链，且节点 $1$ 是链的一个端点。\n- 子任务 3（7 分）：$N \\leq 20$；\n- 子任务 4（22 分）：$N \\leq 5000$；\n- 子任务 5（39 分）：没有其他额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2023] Nestabilnost", "background": "题目来源：<https://hsin.hr/hio2023/>。", "description": "河对岸的松林，一小时前还沐浴在五月的阳光下，此刻却变得模糊、朦胧、消散。只剩下一棵巨大的树，一棵有 $N$ 个节点的树……\n\n伊万在 119 号房间里，观察着这棵牢牢扎根于编号为 1 的节点的树。在更仔细地观察了这棵树之后，他注意到每个节点 $i$ 上都有一个数字 $a_i$。突然，一个 **$k$-好子树** (k-dobrog podstabla) 的定义闪现在他的脑海中。如果对于一个子树中的每一条连接节点 $(u, v)$（其中 $u$ 是 $v$ 的父节点）的边，都满足 $a_v = (a_u + 1) \\pmod k$，并且对于该子树内的每个节点 $v$，都满足 $a_v < k$，那么这个子树就是 **$k$-好的**。对于每个数字 $k$，存在一个 **$k$-好**子树的自然不稳定性，记为 $f(k)$。\n\n当他再次回过神来，他注意到树前漂浮着一个木筏，而他的右手里握着一把魔法锯子。伊万决定锯掉一些树枝（边），对于通过移除被锯掉的边而得到的每个连通块（子树），他都会选择一个数字 $k_i$，使得该连通块是 **$k_i$-好的**。伊万决定将这样的一组选择——即选择一组要切断的边，并为每个因此得到的子树选择一个满足条件的 $k_i$（使得该子树是 **$k_i$-好的**）——称为一次 **切割 (rezanjem)**。一次 **切割** 的 **不稳定性 (Nestabilnost)** 定义为所有得到的子树的 $f(k_i)$ 之和。请帮助伊万确定一次 **切割** 可能的最小 **不稳定性**！", "inputFormat": "第一行是一个正整数 $N$，表示树的节点数。\n\n第二行是 $N$ 个整数，第 $i$ 个数表示 $a_i$ ($0 \\le a_i \\le N - 1$) 。\n\n第三行是 $N$ 个整数，第 $k$ 个数表示 $f(k)$ ($1 \\le f(k) \\le 10^9$) 。\n\n接下来的 $N-1$ 行描述了这棵树的结构，第 $i$ 行包含两个整数 $u_i$ 和 $v_i$ ($1 \\le u_i, v_i \\le N, u_i \\ne v_i$)，表示节点 $u_i$ 和 $v_i$ 之间有一条边。", "outputFormat": "在唯一的一行中，输出一次 **切割** 可能的最小 **不稳定性**。", "hint": "**【样例解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wxof20q5.png)\n\n左图为样例 1，右图为样例 2。\n\n**【数据范围】**\n\n在所有子任务中，都满足 $1 ≤ N ≤ 3\\times 10^5$ 的条件。\n\n- 子任务 1（12 分）：$N \\leq 5 000$，树是一条链，且节点 $1$ 是链的一个端点。\n- 子任务 2（20 分）：$N \\leq 300 000$，树是一条链，且节点 $1$ 是链的一个端点。\n- 子任务 3（7 分）：$N \\leq 20$；\n- 子任务 4（22 分）：$N \\leq 5000$；\n- 子任务 5（39 分）：没有其他额外限制。", "locale": "zh-CN"}}}
{"pid": "P10755", "type": "P", "difficulty": 0, "samples": [["2\n0 2\n2 0\n", "2"], ["4\n0 2 3 1\n2 0 4 5\n3 4 0 3\n1 5 3 0", "6"], ["8\n0 2 5 8 5 9 2 6\n2 0 8 4 3 7 5 3\n5 8 0 3 8 4 3 3\n8 4 3 0 2 2 7 7\n5 3 8 2 0 7 3 3\n9 7 4 2 7 0 6 7\n2 5 3 7 3 6 0 4\n6 3 3 7 3 7 4 0", "25"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "COI（克罗地亚）"], "title": "[COI 2023] Netrpeljivost", "background": "题目来源：<https://hsin.hr/hio2023/>。", "description": "午夜临近，是时候抓紧了。玛格丽塔成功地迎接了所有客人后，他们便在长桌旁安然落座。我们可以按照他们入座的顺序，将客人用从 1 到 $N$ 的数字进行标记。出于某种未知的原因，撒旦大舞会上的客人数量总是 2 的幂。\n\n然而，玛格丽塔现在遇到了一个难题，因为任意两位客人之间都存在一定程度的 **不和睦** (netrpeljivost)，我们可以用一个非负数来表示。客人 $i$ 和 $j$ 之间的不和睦程度我们记作 $netrp(i, j)$。并且总有 $netrp(i, j) = netrp(j, i)$ 以及 $netrp(i, i) = 0$。\n\n由于客人们已经（不怎么舒服地）坐定了，玛格丽塔不能大幅度地调整他们的顺序。客人们甚至不知道，他们自己其实身处一棵巨大的撒旦完全二叉树的叶子节点上，这棵树俗称 VSPBS，当 $N=4$ 时的情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xl062poz.png)\n\n(a) 图 1：初始的树结构，(b) 图 2：操作后的树结构\n\n玛格丽塔可以选择任意一个节点，并在一次操作中交换该节点的左、右孩子，从而改变对应叶子节点上客人的顺序。上图展示了当玛格丽塔对树的根节点进行一次操作后，树（以及餐桌）的状态。玛格丽塔可以对任意节点执行任意次操作。\n\n餐桌的总 **不和睦** 程度定义为所有相邻就坐的客人之间的不和睦程度之和。请帮助玛格丽塔计算出她能达成的餐桌总不和睦程度的最小值！", "inputFormat": "第一行是一个正整数 $N$，表示客人的数量。\n\n在接下来的 $N$ 行中，第 $i$ 行（对于 $1 \\le i \\le N$）包含 $N$ 个整数，其中第 $j$ 个数代表 $netrp(i, j)$。这些值满足上文提到的性质。", "outputFormat": "请输出题目所求的那个数值。", "hint": "**【样例解释】**\n\n在第二个例子中，一个可能的排列方式可以达到最小不耐受度的是 $2,1,4,3$。\n\n**【数据范围】**\n\n在所有子任务中，都满足 $1 \\leq N \\leq 2048$，且 $N$ 是 $2$ 的幂次，$0 \\leq netrp(i,j) \\leq 10^9$。\n\n- 子任务 1（10 分）：$N\\leq 16$；\n- 子任务 2（17 分）：$N\\leq 128$；\n- 子任务 3（32 分）：$N\\leq 512$；\n- 子任务 4（41 分）：无特殊限制；", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2023] Netrpeljivost", "background": "题目来源：<https://hsin.hr/hio2023/>。", "description": "午夜临近，是时候抓紧了。玛格丽塔成功地迎接了所有客人后，他们便在长桌旁安然落座。我们可以按照他们入座的顺序，将客人用从 1 到 $N$ 的数字进行标记。出于某种未知的原因，撒旦大舞会上的客人数量总是 2 的幂。\n\n然而，玛格丽塔现在遇到了一个难题，因为任意两位客人之间都存在一定程度的 **不和睦** (netrpeljivost)，我们可以用一个非负数来表示。客人 $i$ 和 $j$ 之间的不和睦程度我们记作 $netrp(i, j)$。并且总有 $netrp(i, j) = netrp(j, i)$ 以及 $netrp(i, i) = 0$。\n\n由于客人们已经（不怎么舒服地）坐定了，玛格丽塔不能大幅度地调整他们的顺序。客人们甚至不知道，他们自己其实身处一棵巨大的撒旦完全二叉树的叶子节点上，这棵树俗称 VSPBS，当 $N=4$ 时的情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xl062poz.png)\n\n(a) 图 1：初始的树结构，(b) 图 2：操作后的树结构\n\n玛格丽塔可以选择任意一个节点，并在一次操作中交换该节点的左、右孩子，从而改变对应叶子节点上客人的顺序。上图展示了当玛格丽塔对树的根节点进行一次操作后，树（以及餐桌）的状态。玛格丽塔可以对任意节点执行任意次操作。\n\n餐桌的总 **不和睦** 程度定义为所有相邻就坐的客人之间的不和睦程度之和。请帮助玛格丽塔计算出她能达成的餐桌总不和睦程度的最小值！", "inputFormat": "第一行是一个正整数 $N$，表示客人的数量。\n\n在接下来的 $N$ 行中，第 $i$ 行（对于 $1 \\le i \\le N$）包含 $N$ 个整数，其中第 $j$ 个数代表 $netrp(i, j)$。这些值满足上文提到的性质。", "outputFormat": "请输出题目所求的那个数值。", "hint": "**【样例解释】**\n\n在第二个例子中，一个可能的排列方式可以达到最小不耐受度的是 $2,1,4,3$。\n\n**【数据范围】**\n\n在所有子任务中，都满足 $1 \\leq N \\leq 2048$，且 $N$ 是 $2$ 的幂次，$0 \\leq netrp(i,j) \\leq 10^9$。\n\n- 子任务 1（10 分）：$N\\leq 16$；\n- 子任务 2（17 分）：$N\\leq 128$；\n- 子任务 3（32 分）：$N\\leq 512$；\n- 子任务 4（41 分）：无特殊限制；", "locale": "zh-CN"}}}
{"pid": "P10756", "type": "P", "difficulty": 6, "samples": [["2 1 1\n1 2\n1 2\n1", "1 2\n1 2"], ["4 3 0\n2 4 1 3\n1 2 3 4", "2 4"], ["5 3 3\n1 4 3 2 5\n4 5 1 2 3\n3\n1\n4", "2 5\n2 6\n3 1\n3 1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2023", "可持久化线段树", "COI（克罗地亚）"], "title": "[COI 2023] Sličnost", "background": "题目来源：<https://hsin.hr/hio2023/>。", "description": "她手里捧着一束令人作呕、令人不安的黄花。但他却喜欢上了她。\n\n根据一个著名的定理，每个人的个性都可以用一个长度为 $N$ 的排列来表示。因此，我们主人公——大师 (Majstor) 的个性，可以用一个排列 $p$ 来表示。而那位吸引了他目光的女士——玛格丽特 (Margarita) 的个性，则可以用一个排列 $q$ 来表示。\n\n两个排列的 **相似度** (sličnost)，也即婚姻生活的幸福度，可以表示为：从排列 $p$ 中取一个长度为 $K$ 的子区间，再从排列 $q$ 中取一个长度为 $K$ 的子区间，计算这两个子区间所含元素的交集大小，所有可能的取法中，这个交集大小的最大值就是相似度。在此，交集是在集合的意义上考虑的，也就是说，子区间内数字的顺序无关紧要。例如，在 $N = 4, K = 3$ 的情况下，排列 $(2\\ 4\\ 1\\ 3)$ 和 $(1\\ 2\\ 3\\ 4)$ 的相似度是 2，这个值对于任意一对子区间的选择都能达到。\n\n自从见到玛格丽特，大师就对他们俩排列的相似度念念不忘，他的个性也因此变得非常多变。每一天，他排列中的两个相邻元素都会互换位置。需要注意的是，这个变化是永久性的，也就是说，这两个元素在接下来的日子里会保持互换后的状态。现在，他想知道在他刚见到她时，他和她的排列的相似度是多少，以及在接下来的 $Q$ 天里，每天发生变化后的相似度是多少。此外，他还想知道，这个最大的相似度是由多少对子区间达成的。在他爱情的苦恼中，他请求您的帮助！", "inputFormat": "第一行是三个整数 $N, K$ 和 $Q$。\n\n第二行是 $N$ 个数字，构成了排列 $p$。\n\n第三行是 $N$ 个数字，构成了排列 $q$。\n\n接下来的 $Q$ 行是变化的描述。第 $i$ 行包含一个整数 $t_i$ ($1 \\le t_i < N$)，表示在大师的排列 $p$ 中，位置为 $t_i$ 和 $t_i + 1$ 的数字交换了位置。", "outputFormat": "在第一行，需要输出初始排列的相似度，以及达到该相似度的子区间对的数量。\n\n在接下来的 $Q$ 行中，每行输出当天变化发生后，同样的两项信息。", "hint": "**【样例解释】**\n\n第二个样例的解释：在第一个排列中长度为 $3$ 的子区间有 $(2\\ 4\\ 1)$ 和 $(4\\ 1\\ 3)$，在第二个排列中有 $(1\\ 2\\ 3)$ 和 $(2\\ 3\\ 4)$。对于交集，我们有：\n\n- $\\{2,4,1\\} \\cap \\{1,2,3\\} = \\{1,2\\}$；\n- $\\{2,4,1\\} \\cap \\{2,3,4\\} = \\{2,4\\}$；\n- $\\{4,1,3\\} \\cap \\{1,2,3\\} = \\{1,3\\}$；\n- $\\{4,1,3\\} \\cap \\{2,3,4\\} = \\{3,4\\}$；\n\n所以我们可以看到相似度是 $2$，并且这种相似度在四对子区间上得以实现。\n\n**【数据范围】**\n\n在所有子任务中，$2 \\leq N\\leq 10^5$，$1 \\leq K \\leq N$，$0 \\leq Q \\leq 10^5$。\n\n| 子任务  | 分数  | 限制条件     |\n|:--------:|:------:|:-------------:|\n| $1$      | $7$    | $Q = 0, N ≤ 100$  |\n| $2$      | $10$   | $Q = 0, N ≤ 5000$ |\n| $3$      | $7$    | $N = 4$   |\n| $4$      | $20$   | $N, Q ≤ 100$ |\n| $5$      | $23$   | $N, Q ≤ 5000$ |\n| $6$      | $33$   | 无额外限制   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2023] Sličnost", "background": "题目来源：<https://hsin.hr/hio2023/>。", "description": "她手里捧着一束令人作呕、令人不安的黄花。但他却喜欢上了她。\n\n根据一个著名的定理，每个人的个性都可以用一个长度为 $N$ 的排列来表示。因此，我们主人公——大师 (Majstor) 的个性，可以用一个排列 $p$ 来表示。而那位吸引了他目光的女士——玛格丽特 (Margarita) 的个性，则可以用一个排列 $q$ 来表示。\n\n两个排列的 **相似度** (sličnost)，也即婚姻生活的幸福度，可以表示为：从排列 $p$ 中取一个长度为 $K$ 的子区间，再从排列 $q$ 中取一个长度为 $K$ 的子区间，计算这两个子区间所含元素的交集大小，所有可能的取法中，这个交集大小的最大值就是相似度。在此，交集是在集合的意义上考虑的，也就是说，子区间内数字的顺序无关紧要。例如，在 $N = 4, K = 3$ 的情况下，排列 $(2\\ 4\\ 1\\ 3)$ 和 $(1\\ 2\\ 3\\ 4)$ 的相似度是 2，这个值对于任意一对子区间的选择都能达到。\n\n自从见到玛格丽特，大师就对他们俩排列的相似度念念不忘，他的个性也因此变得非常多变。每一天，他排列中的两个相邻元素都会互换位置。需要注意的是，这个变化是永久性的，也就是说，这两个元素在接下来的日子里会保持互换后的状态。现在，他想知道在他刚见到她时，他和她的排列的相似度是多少，以及在接下来的 $Q$ 天里，每天发生变化后的相似度是多少。此外，他还想知道，这个最大的相似度是由多少对子区间达成的。在他爱情的苦恼中，他请求您的帮助！", "inputFormat": "第一行是三个整数 $N, K$ 和 $Q$。\n\n第二行是 $N$ 个数字，构成了排列 $p$。\n\n第三行是 $N$ 个数字，构成了排列 $q$。\n\n接下来的 $Q$ 行是变化的描述。第 $i$ 行包含一个整数 $t_i$ ($1 \\le t_i < N$)，表示在大师的排列 $p$ 中，位置为 $t_i$ 和 $t_i + 1$ 的数字交换了位置。", "outputFormat": "在第一行，需要输出初始排列的相似度，以及达到该相似度的子区间对的数量。\n\n在接下来的 $Q$ 行中，每行输出当天变化发生后，同样的两项信息。", "hint": "**【样例解释】**\n\n第二个样例的解释：在第一个排列中长度为 $3$ 的子区间有 $(2\\ 4\\ 1)$ 和 $(4\\ 1\\ 3)$，在第二个排列中有 $(1\\ 2\\ 3)$ 和 $(2\\ 3\\ 4)$。对于交集，我们有：\n\n- $\\{2,4,1\\} \\cap \\{1,2,3\\} = \\{1,2\\}$；\n- $\\{2,4,1\\} \\cap \\{2,3,4\\} = \\{2,4\\}$；\n- $\\{4,1,3\\} \\cap \\{1,2,3\\} = \\{1,3\\}$；\n- $\\{4,1,3\\} \\cap \\{2,3,4\\} = \\{3,4\\}$；\n\n所以我们可以看到相似度是 $2$，并且这种相似度在四对子区间上得以实现。\n\n**【数据范围】**\n\n在所有子任务中，$2 \\leq N\\leq 10^5$，$1 \\leq K \\leq N$，$0 \\leq Q \\leq 10^5$。\n\n| 子任务  | 分数  | 限制条件     |\n|:--------:|:------:|:-------------:|\n| $1$      | $7$    | $Q = 0, N ≤ 100$  |\n| $2$      | $10$   | $Q = 0, N ≤ 5000$ |\n| $3$      | $7$    | $N = 4$   |\n| $4$      | $20$   | $N, Q ≤ 100$ |\n| $5$      | $23$   | $N, Q ≤ 5000$ |\n| $6$      | $33$   | 无额外限制   |", "locale": "zh-CN"}}}
{"pid": "P10757", "type": "P", "difficulty": 7, "samples": [["3 2 2\n1 2 3\n1 3 5 ", "1\n3 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2011", "提交答案", "Special Judge", "WC"], "title": "[WC2011] 关系挖掘", "background": "", "description": "有人说：“世界上任何两个人最多只需要通过 $6$ 个人就能建立联系”。小 B 对此非常感兴趣，于是着手开展了一些社会网络中关系挖掘的研究工作。\n\n现在小 B 得到了一个包含 $N$ 个人的社会网络数据，该网络中有 $M$ 条关系信息。一条关系信息可以表示为 $(a_i, b_i, w_i)$，表示 $a_i$ 与 $b_i$ 两个人之间存在关系，且紧密度为 $w_i$（$w_i>0$）。现在小 B 希望挑选其中的 $K$（$K\\leq N$）个人作为研究对象，为使研究工作具有较高的可信度，小 B 希望这 $K$ 个人之间的关系紧密度之和尽量大。\n\n该问题可抽象为：给定一个带权无向图 $G=(V, E)$ 和整数 $K$，目标是求出点集 $V$ 的一个子集 $S$，使得 $|S|=K$ 且使下式最大化：\n\n$$\\sum_{(a_i,b_i,w_i)\\in E \\wedge a_i\\in S \\wedge b_i \\in S} w_i$$", "inputFormat": "这是一道提交答案的试题，在你的目录下有 $10$ 个输入文件  `relation*.in`。\n\n输入文件的第一行为三个整数 $N$，$M$ 和 $K$，分别表示给定的社会网络中的点数（人数）、边数（关系数目）以及需要选择的点数（人数）$K$。\n\n接下来 $M$ 行，每行三个正整数 $a_i$，$b_i$，$w_i$，表示一条边（关系）。所有的点（人）按 $1$ 到 $N$ 依次编号。", "outputFormat": "对于每一个输入文件，在目录下给出对应的输出文件  `relation*.out`。\n\n输出文件应包含 $K$ 行，每行一个整数，表示选出的 $K$ 个人的编号。", "hint": "**【评分标准】**\n\n对于每个测试点，如果你没有输出或者输出不合法则得 $0$ 分。\n\n对于每个测试点，我们设有四个评分参数 $m_1$、$m_2$、$m_3$ 和 $m_4$。假设选手选出的 $K$ 个人之间关系紧密度之和为 $c$，\n- 若 $c>m_1$，得 $12$ 分；\n- 若 $c=m_1$，得 $10$ 分；\n- 若 $m_1>c\\geq m_2$，得 $8$ 分；\n- 若 $m_2>c\\geq m_3$，得 $5$ 分；\n- 若 $m_3>c\\geq m_4$，得 $3$ 分；\n- 若 $c>0$，得 $1$ 分；\n- 否则，得 $0$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2011] 关系挖掘", "background": "", "description": "有人说：“世界上任何两个人最多只需要通过 $6$ 个人就能建立联系”。小 B 对此非常感兴趣，于是着手开展了一些社会网络中关系挖掘的研究工作。\n\n现在小 B 得到了一个包含 $N$ 个人的社会网络数据，该网络中有 $M$ 条关系信息。一条关系信息可以表示为 $(a_i, b_i, w_i)$，表示 $a_i$ 与 $b_i$ 两个人之间存在关系，且紧密度为 $w_i$（$w_i>0$）。现在小 B 希望挑选其中的 $K$（$K\\leq N$）个人作为研究对象，为使研究工作具有较高的可信度，小 B 希望这 $K$ 个人之间的关系紧密度之和尽量大。\n\n该问题可抽象为：给定一个带权无向图 $G=(V, E)$ 和整数 $K$，目标是求出点集 $V$ 的一个子集 $S$，使得 $|S|=K$ 且使下式最大化：\n\n$$\\sum_{(a_i,b_i,w_i)\\in E \\wedge a_i\\in S \\wedge b_i \\in S} w_i$$", "inputFormat": "这是一道提交答案的试题，在你的目录下有 $10$ 个输入文件  `relation*.in`。\n\n输入文件的第一行为三个整数 $N$，$M$ 和 $K$，分别表示给定的社会网络中的点数（人数）、边数（关系数目）以及需要选择的点数（人数）$K$。\n\n接下来 $M$ 行，每行三个正整数 $a_i$，$b_i$，$w_i$，表示一条边（关系）。所有的点（人）按 $1$ 到 $N$ 依次编号。", "outputFormat": "对于每一个输入文件，在目录下给出对应的输出文件  `relation*.out`。\n\n输出文件应包含 $K$ 行，每行一个整数，表示选出的 $K$ 个人的编号。", "hint": "**【评分标准】**\n\n对于每个测试点，如果你没有输出或者输出不合法则得 $0$ 分。\n\n对于每个测试点，我们设有四个评分参数 $m_1$、$m_2$、$m_3$ 和 $m_4$。假设选手选出的 $K$ 个人之间关系紧密度之和为 $c$，\n- 若 $c>m_1$，得 $12$ 分；\n- 若 $c=m_1$，得 $10$ 分；\n- 若 $m_1>c\\geq m_2$，得 $8$ 分；\n- 若 $m_2>c\\geq m_3$，得 $5$ 分；\n- 若 $m_3>c\\geq m_4$，得 $3$ 分；\n- 若 $c>0$，得 $1$ 分；\n- 否则，得 $0$ 分。", "locale": "zh-CN"}}}
{"pid": "P10758", "type": "P", "difficulty": 0, "samples": [["3 3 1\n1 3\n1 2 1\n2 3 10\n1 3 5", "1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2011", "提交答案", "Special Judge", "CTSC/CTS"], "title": "[CTSC2011] 道路监控", "background": "", "description": "道路安全部门最近计划部署从 A 市到 B 市的道路监控系统，以提高该部门对于紧急事件的应对能力。A 市到 B 市的道路网可以描述为一个无向图 $G=(V, E)$，其中 $V$ 表示道路网中的节点集合，$E$ 表示连接节点的双向道路集合。所有的节点由 $1\\sim n$ 进行编号，其中 $n$ 为节点个数。A 市所处的节点为 $s$，B 市所处的节点为 $t$。\n\n该部门计划在其中一些道路中安装监控设备，以降低整个道路网的**响应难度**。当紧急事件发生时，部门需要派遣一些人力到一些道路中进行执勤，以使得**任何一条从节点 $s$ 到达节点 $t$ 的路径都经过至少一条监控道路**（安装了监控设备或者有人执勤）。因此**响应难度**定义为需要派遣人力的最少道路数，以使得任何一条从 $s$ 到 $t$ 的路径都经过至少一条监控道路。\n\n由于自然环境不同，在不同的道路安装监控设备的代价也可能不同。具体而言，对于一条边 $e$，其安装设备的代价为 $W(e)$。由于经费有限，他们希望找到一个方案，使得该道路网的响应难度不超过 $k$。请你帮助他们寻找一个尽可能经济的部署方案。", "inputFormat": "这是一道提交答案的试题，在你的目录下有 $10$ 个输入文件 `road*.in`。\n\n输入文件的第一行为三个整数 $n$，$m$ 和 $k$，分别表示道路网中的节点数、道路数以及响应难度的上限值。\n\n输入文件第二行包含两个整数 $s$ 和 $t$，表示 $A$ 市与 $B$ 市的节点编号。\n\n接下来 $m$ 行，每行三个正整数 $a_i$，$b_i$，$w_i$，表示一条连接节点 $a_i$ 和节点 $b_i$ 的道路，其安装监控设备的费用为 $w_i$。", "outputFormat": "对于每一个输入文件，在目录下给出对应的输出文件 `road*.out`。\n\n输出文件第一行包含一个值 $s$，表示选手提供的方案中将在 $s$ 条道路上安装监控设备。接下来 $s$ 行每行包含一个整数 $p_i$，表示在输入文件中的第 $p_i$ 条道路上安装监控设备（边从 $1$ 开始编号）。", "hint": "对于每个测试点，如果你没有输出或者输出不合法则得 $0$ 分。\n\n对于每个测试点，我们设有五个评分参数 $m_1$、$m_2$、$m_3$、$m_4$ 和 $m_5$。假设选手的方案中费用为 $c$，\n\n- 若 $c<m_1$，得 $12$ 分；（备注：赛场上实际为得 $10$ 分）\n- 若 $c=m_1$，得 $10$ 分；\n- 若 $m_1<c\\leq m_2$，得 $8$ 分；\n- 若 $m_2<c\\leq m_3$，得 $5$ 分；\n- 若 $m_3<c\\leq m_4$，得 $3$ 分；\n- 若 $c<m_5$，得 $1$ 分；\n- 否则，得 $0$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTSC2011] 道路监控", "background": "", "description": "道路安全部门最近计划部署从 A 市到 B 市的道路监控系统，以提高该部门对于紧急事件的应对能力。A 市到 B 市的道路网可以描述为一个无向图 $G=(V, E)$，其中 $V$ 表示道路网中的节点集合，$E$ 表示连接节点的双向道路集合。所有的节点由 $1\\sim n$ 进行编号，其中 $n$ 为节点个数。A 市所处的节点为 $s$，B 市所处的节点为 $t$。\n\n该部门计划在其中一些道路中安装监控设备，以降低整个道路网的**响应难度**。当紧急事件发生时，部门需要派遣一些人力到一些道路中进行执勤，以使得**任何一条从节点 $s$ 到达节点 $t$ 的路径都经过至少一条监控道路**（安装了监控设备或者有人执勤）。因此**响应难度**定义为需要派遣人力的最少道路数，以使得任何一条从 $s$ 到 $t$ 的路径都经过至少一条监控道路。\n\n由于自然环境不同，在不同的道路安装监控设备的代价也可能不同。具体而言，对于一条边 $e$，其安装设备的代价为 $W(e)$。由于经费有限，他们希望找到一个方案，使得该道路网的响应难度不超过 $k$。请你帮助他们寻找一个尽可能经济的部署方案。", "inputFormat": "这是一道提交答案的试题，在你的目录下有 $10$ 个输入文件 `road*.in`。\n\n输入文件的第一行为三个整数 $n$，$m$ 和 $k$，分别表示道路网中的节点数、道路数以及响应难度的上限值。\n\n输入文件第二行包含两个整数 $s$ 和 $t$，表示 $A$ 市与 $B$ 市的节点编号。\n\n接下来 $m$ 行，每行三个正整数 $a_i$，$b_i$，$w_i$，表示一条连接节点 $a_i$ 和节点 $b_i$ 的道路，其安装监控设备的费用为 $w_i$。", "outputFormat": "对于每一个输入文件，在目录下给出对应的输出文件 `road*.out`。\n\n输出文件第一行包含一个值 $s$，表示选手提供的方案中将在 $s$ 条道路上安装监控设备。接下来 $s$ 行每行包含一个整数 $p_i$，表示在输入文件中的第 $p_i$ 条道路上安装监控设备（边从 $1$ 开始编号）。", "hint": "对于每个测试点，如果你没有输出或者输出不合法则得 $0$ 分。\n\n对于每个测试点，我们设有五个评分参数 $m_1$、$m_2$、$m_3$、$m_4$ 和 $m_5$。假设选手的方案中费用为 $c$，\n\n- 若 $c<m_1$，得 $12$ 分；（备注：赛场上实际为得 $10$ 分）\n- 若 $c=m_1$，得 $10$ 分；\n- 若 $m_1<c\\leq m_2$，得 $8$ 分；\n- 若 $m_2<c\\leq m_3$，得 $5$ 分；\n- 若 $m_3<c\\leq m_4$，得 $3$ 分；\n- 若 $c<m_5$，得 $1$ 分；\n- 否则，得 $0$ 分。", "locale": "zh-CN"}}}
{"pid": "P10759", "type": "P", "difficulty": 6, "samples": [["6 1\n3 0\n-3 1\n-5 0\n2 1\n6 3\n-4 5", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["贪心", "2024", "可并堆", "BalticOI（波罗的海）", "启发式合并"], "title": "[BalticOI 2024] Jobs", "background": "翻译自 [BalticOI 2024 Day1 T1](https://boi2024.lmio.lt/tasks/d1-jobs-statement.pdf)。", "description": "目前，你可以选择从 $1$ 到 $N$ 编号的 $N$ 个一次性工作。\n\n完成第 $i$ 个工作将给你带来 $x$ 欧元的利润，当然，利润也可能是负的。\n\n有些工作依赖于另一个工作。也就是说，可能有一个编号为 $p$ 的工作必须在第 $i$ 个工作开始之前完成。因此，一个利润较大的工作如果依赖于一个利润为负的工作，看起来收益可能会比较小。\n\n如果 $p = 0$，则第 $i$ 个工作没有依赖。\n\n你目前有 $s$ 欧元，可以决定做哪些工作以及以什么顺序去做，只要尊重依赖关系。此外，你所拥有的钱数在任何时候都不能变成负数。\n\n请计算通过选择按照某种顺序完成（也可能某些选择不完成）这 $N$ 个工作所能获得的最大利润。", "inputFormat": "第一行包含两个整数 $N$ 和 $s$，分别是工作的数量和你最初拥有的金额。\n\n接下来的 $N$ 行，每行包含两个整数 $x$ 和 $p$，分别是第 $i$ 个工作的利润和它所依赖的前置工作的编号。如果 $p = 0$，则第 $i$ 个工作没有依赖。", "outputFormat": "你的程序应该输出一个整数，即你能够获得的最大利润。", "hint": "分别选择 $1,4,3,5$ 号工作即可，总利润为 $3+2-5+6 = 6$。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $s = 10^{18}$ | $11$ |\n| $2$ | $N \\leq 2000$ 且满足性质 A | $14$ |\n| $3$ | 满足性质 A | $15$ |\n| $4$ | $N \\leq 2000$ | $29$ |\n| $5$ | 无特殊性质 | $31$ |\n\n* 性质 A：每个 $p_i$ 要么是 $0$，要么是 $i-1$。\n\n对于所有的数据，$1 \\leq N \\leq 3 \\times 10^5$，$0 \\leq s \\leq 10^{18}$，$-10^9 \\leq x_i \\leq 10^9$，$0 \\leq p_i < i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2024] Jobs", "background": "翻译自 [BalticOI 2024 Day1 T1](https://boi2024.lmio.lt/tasks/d1-jobs-statement.pdf)。", "description": "目前，你可以选择从 $1$ 到 $N$ 编号的 $N$ 个一次性工作。\n\n完成第 $i$ 个工作将给你带来 $x$ 欧元的利润，当然，利润也可能是负的。\n\n有些工作依赖于另一个工作。也就是说，可能有一个编号为 $p$ 的工作必须在第 $i$ 个工作开始之前完成。因此，一个利润较大的工作如果依赖于一个利润为负的工作，看起来收益可能会比较小。\n\n如果 $p = 0$，则第 $i$ 个工作没有依赖。\n\n你目前有 $s$ 欧元，可以决定做哪些工作以及以什么顺序去做，只要尊重依赖关系。此外，你所拥有的钱数在任何时候都不能变成负数。\n\n请计算通过选择按照某种顺序完成（也可能某些选择不完成）这 $N$ 个工作所能获得的最大利润。", "inputFormat": "第一行包含两个整数 $N$ 和 $s$，分别是工作的数量和你最初拥有的金额。\n\n接下来的 $N$ 行，每行包含两个整数 $x$ 和 $p$，分别是第 $i$ 个工作的利润和它所依赖的前置工作的编号。如果 $p = 0$，则第 $i$ 个工作没有依赖。", "outputFormat": "你的程序应该输出一个整数，即你能够获得的最大利润。", "hint": "分别选择 $1,4,3,5$ 号工作即可，总利润为 $3+2-5+6 = 6$。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $s = 10^{18}$ | $11$ |\n| $2$ | $N \\leq 2000$ 且满足性质 A | $14$ |\n| $3$ | 满足性质 A | $15$ |\n| $4$ | $N \\leq 2000$ | $29$ |\n| $5$ | 无特殊性质 | $31$ |\n\n* 性质 A：每个 $p_i$ 要么是 $0$，要么是 $i-1$。\n\n对于所有的数据，$1 \\leq N \\leq 3 \\times 10^5$，$0 \\leq s \\leq 10^{18}$，$-10^9 \\leq x_i \\leq 10^9$，$0 \\leq p_i < i$。", "locale": "zh-CN"}}}
{"pid": "P10760", "type": "P", "difficulty": 6, "samples": [["3\n1 1\n1 3\n3 2", "4"], ["5\n0 0\n1 0\n-1 0\n0 1\n0 -1", "1"], ["1\n1 -1 ", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "BalticOI（波罗的海）"], "title": "[BalticOI 2024] Portal", "background": "翻译自 [BalticOI 2024 Day1 T2](https://boi2024.lmio.lt/tasks/d1-portal-statement.pdf)。", "description": "你在和你的朋友玩一个恶作剧，朋友初始在 $(0,0)$ 位置，每个格子都有颜色，有 $N$ 个传送门，当你的朋友进入某个传送门之内时，会等概率地随机到 $N$ 个传送门其中之一（可能传送到原本的门，如果 $(0,0)$ 有传送门也要传送）。\n\n可惜的是，你的朋友并不知道有传送门的存在，他只会根据他所走的格子确定他所在的格子与其颜色，你需要保证无论他怎么走，他所看到的格子颜色永远与他认为的格子颜色一样。\n\n你可以随意染色，但是请最大化颜色数量，不难发现涂成一个颜色总是最小的解。", "inputFormat": "第一行一个整数 $N$，表示有 $N$ 个传送门。\n\n接下来 $N$ 行，每行两个整数 $(x_i,y_i)$，表示传送门的坐标。", "outputFormat": "输出一个数表示你最大使用颜色的数量，如果可以使用无数种，输出 $-1$。", "hint": "| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $N \\leq 2$ | $1$ |\n| $2$ | $N \\leq 3$ | $10$ |\n| $3$ | 对于所有存在传送门的 $(x_1,y_1)$ 和 $(x_2,y_2)$，保证 $(x_1,y_2)$ 也存在传送门 | $10$ |\n| $4$ | $N \\leq 100$ 且 $-100 \\leq x_i,y_i \\leq 100$ | $29$ |\n| $5$ | $N \\leq 2000$ | $15$ |\n| $6$ | 无特殊性质 | $35$ |\n\n对于全部数据，$1 \\leq N \\leq 10^5$，$-10^6 \\leq x_i,y_i \\leq 10^6$，且保证 $(x_i,y_i)$ 互不相同。\n\n\n对于样例一，传送门被放置在 $(1,1)$、$(1,3)$ 和 $(3,2)$ 位置，如果你的朋友按照以下顺序移动：上、右、下、左。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cjusbzy8.png)\n\n在移动序列结束后，你的朋友会认为他们回到了起始单元格$(0,0)$，但实际上他们也可能最终停在 $(0,2)$ 或 $(2,1)$。他们已经在开始时看到了 $(0,0)$ 单元格的颜色，所以如果现在他们看到不同的颜色，就会意识到必须有传送门的存在。我们不希望发生这种情况，所以我们必须为这三个单元格选择相同的颜色。\n\n没有任何移动序列能让你的朋友认为他们最终停在 $(0,0)$ 单元格，而实际上他们却停在了 $(1,0)$ ，所以这些单元格可以放心地使用不同的颜色。\n\n你可以看到下面例子中使用了 $4$ 种颜色的着色方案。对于这个例子来说，不可能使用超过 $4$ 种颜色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i123jgsw.png)\n\n对于样例二，让我们考虑一个不同的例子，其中在单元格 $(0,0)$、$(0,1)$、$(1,0)$、$(0,-1)$ 和 $(-1,0)$ 处设有传送门。假设你的朋友试图通过先向右移动一次，然后向上移动三次来到达单元格 $(1,3)$。一种可能是，如果他们在一开始和每一步之后都被传送到那里，那么他们最终会到达单元格 $(0,0)$。如果你的朋友现在通过向下移动三次然后向左移动一次来回到他们认为的 $(0,0)$ 单元格，并且在这个过程中没有被从当前单元格传送走，他们最终会到达 $(-1,-3)$。你的朋友会第二次认为自己处于 $(0, 0)$ 单元格，并期望看到相同的颜色。所以你需要用相同的颜色给 $(-1,-3)$ 和 $(0, 0)$ 着色。\n\n请注意，我们选择单元格 $(1,3)$ 作为起点并没有什么特别之处。你同样可以证明其他单元格必须与 $(0,0)$ 共享同一种颜色。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2024] Portal", "background": "翻译自 [BalticOI 2024 Day1 T2](https://boi2024.lmio.lt/tasks/d1-portal-statement.pdf)。", "description": "你在和你的朋友玩一个恶作剧，朋友初始在 $(0,0)$ 位置，每个格子都有颜色，有 $N$ 个传送门，当你的朋友进入某个传送门之内时，会等概率地随机到 $N$ 个传送门其中之一（可能传送到原本的门，如果 $(0,0)$ 有传送门也要传送）。\n\n可惜的是，你的朋友并不知道有传送门的存在，他只会根据他所走的格子确定他所在的格子与其颜色，你需要保证无论他怎么走，他所看到的格子颜色永远与他认为的格子颜色一样。\n\n你可以随意染色，但是请最大化颜色数量，不难发现涂成一个颜色总是最小的解。", "inputFormat": "第一行一个整数 $N$，表示有 $N$ 个传送门。\n\n接下来 $N$ 行，每行两个整数 $(x_i,y_i)$，表示传送门的坐标。", "outputFormat": "输出一个数表示你最大使用颜色的数量，如果可以使用无数种，输出 $-1$。", "hint": "| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $N \\leq 2$ | $1$ |\n| $2$ | $N \\leq 3$ | $10$ |\n| $3$ | 对于所有存在传送门的 $(x_1,y_1)$ 和 $(x_2,y_2)$，保证 $(x_1,y_2)$ 也存在传送门 | $10$ |\n| $4$ | $N \\leq 100$ 且 $-100 \\leq x_i,y_i \\leq 100$ | $29$ |\n| $5$ | $N \\leq 2000$ | $15$ |\n| $6$ | 无特殊性质 | $35$ |\n\n对于全部数据，$1 \\leq N \\leq 10^5$，$-10^6 \\leq x_i,y_i \\leq 10^6$，且保证 $(x_i,y_i)$ 互不相同。\n\n\n对于样例一，传送门被放置在 $(1,1)$、$(1,3)$ 和 $(3,2)$ 位置，如果你的朋友按照以下顺序移动：上、右、下、左。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cjusbzy8.png)\n\n在移动序列结束后，你的朋友会认为他们回到了起始单元格$(0,0)$，但实际上他们也可能最终停在 $(0,2)$ 或 $(2,1)$。他们已经在开始时看到了 $(0,0)$ 单元格的颜色，所以如果现在他们看到不同的颜色，就会意识到必须有传送门的存在。我们不希望发生这种情况，所以我们必须为这三个单元格选择相同的颜色。\n\n没有任何移动序列能让你的朋友认为他们最终停在 $(0,0)$ 单元格，而实际上他们却停在了 $(1,0)$ ，所以这些单元格可以放心地使用不同的颜色。\n\n你可以看到下面例子中使用了 $4$ 种颜色的着色方案。对于这个例子来说，不可能使用超过 $4$ 种颜色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i123jgsw.png)\n\n对于样例二，让我们考虑一个不同的例子，其中在单元格 $(0,0)$、$(0,1)$、$(1,0)$、$(0,-1)$ 和 $(-1,0)$ 处设有传送门。假设你的朋友试图通过先向右移动一次，然后向上移动三次来到达单元格 $(1,3)$。一种可能是，如果他们在一开始和每一步之后都被传送到那里，那么他们最终会到达单元格 $(0,0)$。如果你的朋友现在通过向下移动三次然后向左移动一次来回到他们认为的 $(0,0)$ 单元格，并且在这个过程中没有被从当前单元格传送走，他们最终会到达 $(-1,-3)$。你的朋友会第二次认为自己处于 $(0, 0)$ 单元格，并期望看到相同的颜色。所以你需要用相同的颜色给 $(-1,-3)$ 和 $(0, 0)$ 着色。\n\n请注意，我们选择单元格 $(1,3)$ 作为起点并没有什么特别之处。你同样可以证明其他单元格必须与 $(0,0)$ 共享同一种颜色。", "locale": "zh-CN"}}}
{"pid": "P10761", "type": "P", "difficulty": 5, "samples": [["5\n1 3\n2 1\n1 3\n0 10\n3 5", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "BalticOI（波罗的海）"], "title": "[BalticOI 2024] Trains", "background": "翻译自 [BalticOI 2024 Day1 T3](https://boi2024.lmio.lt/tasks/d1-trains-statement.pdf)。", "description": "你已经抵达维尔纽斯，并希望参观立陶宛的不同城市。立陶宛的城市位于一条直线上，并按顺序从 $1$ 到 $N$ 编号。维尔纽斯是 $1$ 号城市。每个城市都有一个火车站，并且有一条从该站出发的单轨列车运营路线。你只能在该路线起点的城市上车，但可以在其任何一站下车。从第 $i$ 个城市开始的列车每行驶 $d_i$ 个城市就会停靠一站，并且其路线包含 $x_i$ 个停靠站（不包括起始城市）。如果 $d_i = 0$，则从第 $i$ 个城市出发的列车目前处于停运状态，因此你不能乘坐它们。\n\n更具体地说，如果你在第 $i$ 个城市上车，你可以在任何编号为 $i + t \\cdot d_i$ 的城市下车，其中 $1 \\leq t \\leq x_i$。请注意，由于你只希望参观立陶宛的城市，因此即使列车在其路线上有更多的停靠站，你也不会超过第 $N$ 个城市下车。\n\n你打算使用列车前往参观一些城市。在规划你的旅行时，你开始思考从维尔纽斯出发的旅程有多少种不同的选择。如果两次旅行在不同的城市序列中停靠，则它们被视为不同。输出答案对 $10^9 + 7$ 取模的值。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行每行两个整数 $d_i,x_i$。", "outputFormat": "输出路线数对 $10^9 + 7$ 取模的值。", "hint": "对于样例，存在如下七种路线：\n\n- $1$\n- $1 \\rightarrow  2$\n- $1 \\rightarrow  2 \\rightarrow  4$\n- $1 \\rightarrow  3$\n- $1 \\rightarrow 3 \\rightarrow 4$\n- $1 \\rightarrow 3 \\rightarrow 5$\n- $1 \\rightarrow 4$\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $n \\leq 15$ | $8$ |\n| $2$ | $n \\leq 10^4$ | $13$ |\n| $3$ | $d_i = 1$ | $16$ |\n| $4$ | $x_i = 10^9$ | $34$ |\n| $5$ | 无特殊性质 | $29$ |\n\n对于所有数据，保证 $1 \\leq N \\leq 10^5$，$0 \\leq d_i,x_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2024] Trains", "background": "翻译自 [BalticOI 2024 Day1 T3](https://boi2024.lmio.lt/tasks/d1-trains-statement.pdf)。", "description": "你已经抵达维尔纽斯，并希望参观立陶宛的不同城市。立陶宛的城市位于一条直线上，并按顺序从 $1$ 到 $N$ 编号。维尔纽斯是 $1$ 号城市。每个城市都有一个火车站，并且有一条从该站出发的单轨列车运营路线。你只能在该路线起点的城市上车，但可以在其任何一站下车。从第 $i$ 个城市开始的列车每行驶 $d_i$ 个城市就会停靠一站，并且其路线包含 $x_i$ 个停靠站（不包括起始城市）。如果 $d_i = 0$，则从第 $i$ 个城市出发的列车目前处于停运状态，因此你不能乘坐它们。\n\n更具体地说，如果你在第 $i$ 个城市上车，你可以在任何编号为 $i + t \\cdot d_i$ 的城市下车，其中 $1 \\leq t \\leq x_i$。请注意，由于你只希望参观立陶宛的城市，因此即使列车在其路线上有更多的停靠站，你也不会超过第 $N$ 个城市下车。\n\n你打算使用列车前往参观一些城市。在规划你的旅行时，你开始思考从维尔纽斯出发的旅程有多少种不同的选择。如果两次旅行在不同的城市序列中停靠，则它们被视为不同。输出答案对 $10^9 + 7$ 取模的值。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行每行两个整数 $d_i,x_i$。", "outputFormat": "输出路线数对 $10^9 + 7$ 取模的值。", "hint": "对于样例，存在如下七种路线：\n\n- $1$\n- $1 \\rightarrow  2$\n- $1 \\rightarrow  2 \\rightarrow  4$\n- $1 \\rightarrow  3$\n- $1 \\rightarrow 3 \\rightarrow 4$\n- $1 \\rightarrow 3 \\rightarrow 5$\n- $1 \\rightarrow 4$\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $n \\leq 15$ | $8$ |\n| $2$ | $n \\leq 10^4$ | $13$ |\n| $3$ | $d_i = 1$ | $16$ |\n| $4$ | $x_i = 10^9$ | $34$ |\n| $5$ | 无特殊性质 | $29$ |\n\n对于所有数据，保证 $1 \\leq N \\leq 10^5$，$0 \\leq d_i,x_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10762", "type": "P", "difficulty": 5, "samples": [["4 100\n10 30\n30 70\n20 40\n60 20", "3"], ["1 100\n30 40", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "BalticOI（波罗的海）"], "title": "[BalticOI 2024] Fire", "background": "翻译自 [BalticOI 2024 Day2 T1](https://boi2024.lmio.lt/tasks/d2-fire-statement.pdf)。", "description": "我们将一天划分为 $M$ 个时间，同时有 $N$ 个人，每个人愿意工作的时间段为 $[s_i,e_i)$，如果 $s_i > e_i$，说明这个人愿意工作到第二天的 $e_i$ 时间，每个人最多连续工作时间不会超过一整天。\n\n你需要安排一些人工作，使得他们工作时间可以覆盖一整天，请求出这个人数。", "inputFormat": "第一行一个整数 $N,M$。\n\n接下来 $N$ 行，每行一对 $(s_i,e_i)$。", "outputFormat": "输出一个数，表示多少要安排的人数，如果无法安排人数使得一天的时间被覆盖，输出 $-1$。", "hint": "对于第一组样例，选择 $1,2,4$。\n\n对于第二组样例，显然无解。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :-----------: |\n| $1$ | $N \\leq 20$ | $14$ |\n| $2$ | $N \\leq 300$ | $17$ |\n| $3$ | $N \\leq 5000$ | $9$ |\n| $4$ | 保证 $s_i < e_i$ 或 $e_i = 0$ | $13$ |\n| $5$ | 保证每个人工作的时间相同 | $21$ |\n| $6$ | 无特殊性质 | $26$ |\n\n对于所有数据，$1 \\leq N \\leq 2 \\times 10^5$，$2 \\leq M \\leq 10^9$，$0 \\leq s_i,e_i < M$，$s_i \\ne e_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2024] Fire", "background": "翻译自 [BalticOI 2024 Day2 T1](https://boi2024.lmio.lt/tasks/d2-fire-statement.pdf)。", "description": "我们将一天划分为 $M$ 个时间，同时有 $N$ 个人，每个人愿意工作的时间段为 $[s_i,e_i)$，如果 $s_i > e_i$，说明这个人愿意工作到第二天的 $e_i$ 时间，每个人最多连续工作时间不会超过一整天。\n\n你需要安排一些人工作，使得他们工作时间可以覆盖一整天，请求出这个人数。", "inputFormat": "第一行一个整数 $N,M$。\n\n接下来 $N$ 行，每行一对 $(s_i,e_i)$。", "outputFormat": "输出一个数，表示多少要安排的人数，如果无法安排人数使得一天的时间被覆盖，输出 $-1$。", "hint": "对于第一组样例，选择 $1,2,4$。\n\n对于第二组样例，显然无解。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :-----------: |\n| $1$ | $N \\leq 20$ | $14$ |\n| $2$ | $N \\leq 300$ | $17$ |\n| $3$ | $N \\leq 5000$ | $9$ |\n| $4$ | 保证 $s_i < e_i$ 或 $e_i = 0$ | $13$ |\n| $5$ | 保证每个人工作的时间相同 | $21$ |\n| $6$ | 无特殊性质 | $26$ |\n\n对于所有数据，$1 \\leq N \\leq 2 \\times 10^5$，$2 \\leq M \\leq 10^9$，$0 \\leq s_i,e_i < M$，$s_i \\ne e_i$。", "locale": "zh-CN"}}}
{"pid": "P10763", "type": "P", "difficulty": 6, "samples": [["14 6\n0 1\n0 3\n2 3\n2 4\n0 4\n0 6\n3 6\n3 7\n4 7\n6 7\n6 5\n3 5\n3 2\n3 1\n", "2"], ["4 3\n0 0\n0 3\n3 3\n3 0", "0"], ["18 9\n0 2\n2 2\n2 1\n4 1\n4 0\n9 0\n9 2\n4 2\n4 4\n7 4\n7 3\n9 3\n9 6\n4 6\n4 5\n2 5\n2 4\n0 4", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["线段树", "平衡树", "2024", "扫描线", "BalticOI（波罗的海）"], "title": "[BalticOI 2024] Tiles", "background": "翻译自 [BalticOI 2024 Day2 T2](https://boi2024.lmio.lt/tasks/d2-tiles-statement.pdf)。", "description": "有一个存在 $N$ 个顶点的大教堂，顶点坐标依次为 $(x_i,y_i)$，对于每个 $1 \\leq i < N$，存在一条 $i$ 与 $i+1$ 之间的边，此外，还存在一条 $N$ 到 $1$ 的边。\n\n大教堂每条边都与 $x$ 轴或 $y$ 轴平行。此外，大教堂是一个简单多边形，即：\n\n- 每个顶点恰好由两条边相交\n- 任何一对边只能在顶点处相交\n\n你有无数块 $2 \\times 2$ 的瓷砖，你希望用这些瓷砖覆盖大教堂的大部分区域，具体来说，你想选择一条垂直线，并覆盖该线左侧的大教堂部分。对于任何整数 $k$，设 $L_k$ 为包含 $x$ 坐标等于 $k$ 的点的垂直线。对 $L_k$ 左侧大教堂部分的覆盖，是指在平面上放置一定数量的瓷砖，使得：\n\n- 多边形内部且 $x$ 坐标小于 $k$ 的每个点都被某块瓷砖覆盖\n- 多边形外部或 $x$ 坐标大于 $k$ 的点都不被任何瓷砖覆盖\n- 瓷砖的内部不重叠\n\n大教堂中任何顶点的最小 $x$ 坐标为 $0$。我们设 $M$ 为大教堂中任何顶点的最大 $x$ 坐标。\n\n请你求出最大的满足条件的 $k\\ (0 \\leq k \\leq M)$，根据定义，一定存在答案为 $0$。", "inputFormat": "第一行两个整数 $N,M$。\n\n接下来 $N$ 行，每行两个整数 $(x_i,y_i)$。这些顶点按照顺时针或逆时针顺序给出。", "outputFormat": "输出一个答案 $k$。", "hint": "| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $N=4$ | $4$ |\n| $2$ | $N \\leq 6$ | $9$ |\n| $3$ | $x_N=0,y_N=0$，对于 $1 \\leq i \\leq N-2$，$x_i \\leq x_{i+1},y_i \\geq y_{i+1}$ | $11$ |\n| $4$ | $M \\leq 1000$ 且 $y_i \\leq 1000$ | $19$ |\n| $5$ | $y_i$ 都为偶数 | $22$ |\n| $6$ | $x_i$ 都为偶数 | $25$ |\n| $7$ | 无特殊性质 | $10$ |\n\n对于所有数据，$4 \\leq N \\leq 2 \\times 10^5$，$1 \\leq M \\leq 10^9$，$0 \\leq y_i \\leq 10^9$，$\\min(\\{x_i\\}) = 0,\\max(\\{x_i\\}) = M$。\n\n对于样例一，下面是对于 $k=2$ 的覆盖。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q9qi2e3b.png)\n\n可以发现这是最大的情况了。\n\n对于样例二，没有正值 $k$，使得 $L_k$ 左侧的教堂部分可以用瓷砖覆盖。\n\n对于样例三，图示如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6kpbkvbn.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2024] Tiles", "background": "翻译自 [BalticOI 2024 Day2 T2](https://boi2024.lmio.lt/tasks/d2-tiles-statement.pdf)。", "description": "有一个存在 $N$ 个顶点的大教堂，顶点坐标依次为 $(x_i,y_i)$，对于每个 $1 \\leq i < N$，存在一条 $i$ 与 $i+1$ 之间的边，此外，还存在一条 $N$ 到 $1$ 的边。\n\n大教堂每条边都与 $x$ 轴或 $y$ 轴平行。此外，大教堂是一个简单多边形，即：\n\n- 每个顶点恰好由两条边相交\n- 任何一对边只能在顶点处相交\n\n你有无数块 $2 \\times 2$ 的瓷砖，你希望用这些瓷砖覆盖大教堂的大部分区域，具体来说，你想选择一条垂直线，并覆盖该线左侧的大教堂部分。对于任何整数 $k$，设 $L_k$ 为包含 $x$ 坐标等于 $k$ 的点的垂直线。对 $L_k$ 左侧大教堂部分的覆盖，是指在平面上放置一定数量的瓷砖，使得：\n\n- 多边形内部且 $x$ 坐标小于 $k$ 的每个点都被某块瓷砖覆盖\n- 多边形外部或 $x$ 坐标大于 $k$ 的点都不被任何瓷砖覆盖\n- 瓷砖的内部不重叠\n\n大教堂中任何顶点的最小 $x$ 坐标为 $0$。我们设 $M$ 为大教堂中任何顶点的最大 $x$ 坐标。\n\n请你求出最大的满足条件的 $k\\ (0 \\leq k \\leq M)$，根据定义，一定存在答案为 $0$。", "inputFormat": "第一行两个整数 $N,M$。\n\n接下来 $N$ 行，每行两个整数 $(x_i,y_i)$。这些顶点按照顺时针或逆时针顺序给出。", "outputFormat": "输出一个答案 $k$。", "hint": "| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $N=4$ | $4$ |\n| $2$ | $N \\leq 6$ | $9$ |\n| $3$ | $x_N=0,y_N=0$，对于 $1 \\leq i \\leq N-2$，$x_i \\leq x_{i+1},y_i \\geq y_{i+1}$ | $11$ |\n| $4$ | $M \\leq 1000$ 且 $y_i \\leq 1000$ | $19$ |\n| $5$ | $y_i$ 都为偶数 | $22$ |\n| $6$ | $x_i$ 都为偶数 | $25$ |\n| $7$ | 无特殊性质 | $10$ |\n\n对于所有数据，$4 \\leq N \\leq 2 \\times 10^5$，$1 \\leq M \\leq 10^9$，$0 \\leq y_i \\leq 10^9$，$\\min(\\{x_i\\}) = 0,\\max(\\{x_i\\}) = M$。\n\n对于样例一，下面是对于 $k=2$ 的覆盖。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q9qi2e3b.png)\n\n可以发现这是最大的情况了。\n\n对于样例二，没有正值 $k$，使得 $L_k$ 左侧的教堂部分可以用瓷砖覆盖。\n\n对于样例三，图示如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6kpbkvbn.png)", "locale": "zh-CN"}}}
{"pid": "P10764", "type": "P", "difficulty": 6, "samples": [["4\n1 1 1 1\n2 2 2 2", "6"], ["10\n1 2 3 4 5 6 7 8 9 10\n10 9 8 7 6 5 4 3 2 1\n", "21116"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "2024", "BalticOI（波罗的海）"], "title": "[BalticOI 2024] Wall", "background": "翻译自 [BalticOI 2024 Day2 T3](https://boi2024.lmio.lt/tasks/d2-wall-statement.pdf)。", "description": "你想要修建一个围墙，它是由 $N$ 个墙组成的，每个墙 $i$ 可能的高度是 $a_i$ 或 $b_i$，对于每个可能的围墙序列 $h$，你想要求出它的积水量之和。\n\n例如下图展示了一个 $N = 10$，围墙高度分别为 $4, 2, 1, 8, 6, 2, 7, 1, 2, 3$ 的例子，它的实际积水高度是 $4, 4, 4, 8, 7, 7, 7, 3, 3, 3$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p18f84ua.png)\n\n对于某个 $i$ 雨后应有的水位 $H$，需要满足存在两个数 $l,r\\ (l \\leq i,r\\geq i)$，有 $h_l \\geq H,h_r \\geq H$，且 $H$ 最大，此时 $i$ 的积水量为 $H-h_i$。\n\n输出所有可能情况的积水量之和对 $10^9 +7$ 取模的值。", "inputFormat": "第一行一个整数 $N$。\n\n第二行 $N$ 个整数 $a_i$。\n\n第三行 $N$ 个整数 $b_i$。", "outputFormat": "输出可能的围墙积水量之和对 $10^9 +7$ 取模的值。", "hint": "对于样例一，$(2,1,1,2)$ 的情况存在 $2$ 的积水量，$(1,2,1,2)$，$(2,1,2,1)$，$(2,1,2,2)$，$(2,2,1,2)$ 分别存在 $1$ 的积水量。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :-----------: |\n| $1$ | $N \\leq 20$ | $8$ |\n| $2$ | $N \\leq 100$ 且 $a_i,b_i \\leq 1000$ | $17$ |\n| $3$ | $N \\leq 10000$ 且 $a_i,b_i \\leq 1000$ | $19$ |\n| $4$ | $N \\leq 10000$ | $14$ |\n| $5$ | $a_i,b_i \\leq 2$ | $12$ |\n| $6$ | 无特殊性质 | $30$ |\n\n\n对于所有数据 $1 \\leq N \\leq5 \\times10^5$，$1 \\leq a_i,b_i \\leq 10^9$ 且对于 每个 $1 \\leq i \\leq n$，有 $a_i \\neq b_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2024] Wall", "background": "翻译自 [BalticOI 2024 Day2 T3](https://boi2024.lmio.lt/tasks/d2-wall-statement.pdf)。", "description": "你想要修建一个围墙，它是由 $N$ 个墙组成的，每个墙 $i$ 可能的高度是 $a_i$ 或 $b_i$，对于每个可能的围墙序列 $h$，你想要求出它的积水量之和。\n\n例如下图展示了一个 $N = 10$，围墙高度分别为 $4, 2, 1, 8, 6, 2, 7, 1, 2, 3$ 的例子，它的实际积水高度是 $4, 4, 4, 8, 7, 7, 7, 3, 3, 3$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p18f84ua.png)\n\n对于某个 $i$ 雨后应有的水位 $H$，需要满足存在两个数 $l,r\\ (l \\leq i,r\\geq i)$，有 $h_l \\geq H,h_r \\geq H$，且 $H$ 最大，此时 $i$ 的积水量为 $H-h_i$。\n\n输出所有可能情况的积水量之和对 $10^9 +7$ 取模的值。", "inputFormat": "第一行一个整数 $N$。\n\n第二行 $N$ 个整数 $a_i$。\n\n第三行 $N$ 个整数 $b_i$。", "outputFormat": "输出可能的围墙积水量之和对 $10^9 +7$ 取模的值。", "hint": "对于样例一，$(2,1,1,2)$ 的情况存在 $2$ 的积水量，$(1,2,1,2)$，$(2,1,2,1)$，$(2,1,2,2)$，$(2,2,1,2)$ 分别存在 $1$ 的积水量。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :-----------: |\n| $1$ | $N \\leq 20$ | $8$ |\n| $2$ | $N \\leq 100$ 且 $a_i,b_i \\leq 1000$ | $17$ |\n| $3$ | $N \\leq 10000$ 且 $a_i,b_i \\leq 1000$ | $19$ |\n| $4$ | $N \\leq 10000$ | $14$ |\n| $5$ | $a_i,b_i \\leq 2$ | $12$ |\n| $6$ | 无特殊性质 | $30$ |\n\n\n对于所有数据 $1 \\leq N \\leq5 \\times10^5$，$1 \\leq a_i,b_i \\leq 10^9$ 且对于 每个 $1 \\leq i \\leq n$，有 $a_i \\neq b_i$。", "locale": "zh-CN"}}}
{"pid": "P10765", "type": "P", "difficulty": 2, "samples": [["4\n5 2\n1 1\n8 3\n2 2 2 \n8 3 \n1 1 1\n8 3\n1 2 1", "4\n1\n8\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「CROI · R2」在相思树下 I", "background": ">年年桃树下\n>\n>常看一个变成俩\n>\n>小小心愿常比划\n>\n>快快实现吧\n>\n>却没看到他也在树下\n>\n>相逢二字纵使隔天涯\n>\n>转角总会遇上他\n>\n>缘分缘分啊                                        ", "description": "**本题采用多组数据测试。**\n\n现在欣欣有一个从 $1$ 到 $n$ 的序列，并想对这个序列进行如下两种操作。\n\n操作一：删去所有的奇数项。\n\n操作二：删去所有的偶数项。\n\n欣欣发现她在进行 $k$ 次操作后，最后只剩下一个数，但她不知道这个数是多少，于是欣欣来找你求助，她会给你她所进行的 $k$ 次操作的种类，希望你告诉她最后的那个数是多少。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n$ 和 $k$，含义如题面所示。\n\n第二行 $k$ 个整数，代表欣欣依次进行的操作种类，其中 $1$ 代表操作一，$2$ 代表操作二。", "outputFormat": "共 $T$ 行，每行一个数代表每组数据对应的答案。", "hint": "**【样例解释】**\n\n对于第一组数据，序列的变化如下：\n\n$\\{1,2,3,4,5\\} \\to \\{2,4\\} \\to \\{4\\}$。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据， $n\\le 5\\times10^5$。\n\n对于 $100\\%$ 的数据，$1\\le T \\le 10$，$1\\le n\\le 10^{18}$。\n\n保证对于所有的数据，操作 $k$ 次后均仅剩下一个数。", "locale": "zh-CN", "translations": {"en": {"title": "「CROI · R2」Under the Peach Tree of Longing I", "background": "> Year after year under the peach tree,  \n> Watching one become two.  \n> Little wishes often gestured,  \n> \"Come true soon, please do!\"  \n> Yet unaware of his presence beneath the same tree.  \n> Though \"meeting\" seems separated by the ends of the earth,  \n> Around the corner, fate brings us together—  \n> Oh, destiny, destiny!", "description": "**This problem uses multiple test cases.**\n\nXinxin has a sequence from $1$ to $n$ and wants to perform the following two operations:\n\n**Operation 1**: Delete all elements at odd positions.  \n**Operation 2**: Delete all elements at even positions.\n\nAfter performing $k$ operations, exactly one number remains. Given the sequence of operations, determine the final remaining number.", "inputFormat": "- The first line contains a positive integer $T$, the number of test cases.  \n- For each test case:  \n  - The first line contains two integers $n$ and $k$.  \n  - The second line contains $k$ integers representing the operations (1 for Operation 1, 2 for Operation 2).\n", "outputFormat": "Output $T$ lines, each containing the answer for the corresponding test case.\n", "hint": "### Explanation\n\n**Sample Explanation:**  \nFor the first test case, the sequence evolves as:  \n$\\{1,2,3,4,5\\} \\to \\{2,4\\} \\to \\{4\\}$.\n\n### Constraints\n\n- For $30\\%$ of the data: $n \\leq 5 \\times 10^5$.  \n- For $100\\%$ of the data:  \n  - $1 \\leq T \\leq 10$,  \n  - $1 \\leq n \\leq 10^{18}$.  \n- It is guaranteed that exactly one number remains after $k$ operations for all test cases.", "locale": "en"}, "zh-CN": {"title": "「CROI · R2」在相思树下 I", "background": ">年年桃树下\n>\n>常看一个变成俩\n>\n>小小心愿常比划\n>\n>快快实现吧\n>\n>却没看到他也在树下\n>\n>相逢二字纵使隔天涯\n>\n>转角总会遇上他\n>\n>缘分缘分啊                                        ", "description": "**本题采用多组数据测试。**\n\n现在欣欣有一个从 $1$ 到 $n$ 的序列，并想对这个序列进行如下两种操作。\n\n操作一：删去所有的奇数项。\n\n操作二：删去所有的偶数项。\n\n欣欣发现她在进行 $k$ 次操作后，最后只剩下一个数，但她不知道这个数是多少，于是欣欣来找你求助，她会给你她所进行的 $k$ 次操作的种类，希望你告诉她最后的那个数是多少。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n$ 和 $k$，含义如题面所示。\n\n第二行 $k$ 个整数，代表欣欣依次进行的操作种类，其中 $1$ 代表操作一，$2$ 代表操作二。", "outputFormat": "共 $T$ 行，每行一个数代表每组数据对应的答案。", "hint": "**【样例解释】**\n\n对于第一组数据，序列的变化如下：\n\n$\\{1,2,3,4,5\\} \\to \\{2,4\\} \\to \\{4\\}$。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据， $n\\le 5\\times10^5$。\n\n对于 $100\\%$ 的数据，$1\\le T \\le 10$，$1\\le n\\le 10^{18}$。\n\n保证对于所有的数据，操作 $k$ 次后均仅剩下一个数。", "locale": "zh-CN"}}}
{"pid": "P10766", "type": "P", "difficulty": 5, "samples": [["3\n00000\n11111\n10101\n01010\n11100101\n11110000 ", "1\n1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "洛谷月赛"], "title": "「CROI · R2」01-string", "background": "", "description": "给定两个长度为 $n$ 的 $01$ 串 $S,T$，你可以对串 $S$ 执行无限次操作，每次都可以从以下操作中任选一个执行：\n\n- 选择两个正整数 $l,r(1\\le l\\le r\\le n)$，将 $S_l\\dots S_r \\ 01$ 反转。\n\n- 选择两个正整数 $l,r(1\\le l\\le r\\le n)$，将 $S_l\\dots S_r $ 全部改为 $0$。\n\n- 选择两个正整数 $l,r(1\\le l\\le r\\le n)$，将 $S_l\\dots S_r $ 全部改为 $1$。\n\n你需要回答最少使用几次操作才能把 $S$ 变成 $T$。", "inputFormat": "**本题采用多组数据测试。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行一个 $01$ 串，表示串 $S$。\n\n第二行一个 $01$ 串，表示串 $T$。", "outputFormat": "一共 $T$ 行，第 $i$ 行一个整数，表示第 $i$ 组数据的答案。", "hint": "**【样例解释】**\n\n以下提供样例三组数据的合法方案之一：\n\n对于第一组数据，选取 $l=1,r=5$，将 $S_l\\dots S_r$ 全部变成 $1$。\n\n对于第二组数据，选取 $l=1,r=5$，将 $S_l\\dots S_r \\ 01$ 反转。\n\n对于第三组数据，先选取 $l=4,r=8$，将 $S_l\\dots S_r$ $01$ 反转，再选取 $l=5,r=8$，将 $S_l\\dots S_r$ 全部变成 $0$。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Sub 0（10 points）：$n\\le 5$。\n- Sub 1（10 points）：$n\\le 18$。\n- Sub 2（30 points）：$n\\le 2000$。\n- Sub 3（50 points）：无特殊限制。\n\n对于所有的数据，$1\\le T \\le 10$，$1\\le n\\le 5\\times 10^5$。\n", "locale": "zh-CN", "translations": {"en": {"title": "「CROI · R2」01-string", "background": "", "description": "Given two 01-strings $S$ and $T$ of length $n$, you can perform the following operations on string $S$ infinitely many times. In each operation, you may choose one of the following:\n\n- Select two positive integers $l, r$ $(1 \\le l \\le r \\le n)$ and flip the 01 values of $S_l \\dots S_r$ (i.e., change 0 to 1 and 1 to 0).\n\n- Select two positive integers $l, r$ $(1 \\le l \\le r \\le n)$ and set all characters in $S_l \\dots S_r$ to 0.\n\n- Select two positive integers $l, r$ $(1 \\le l \\le r \\le n)$ and set all characters in $S_l \\dots S_r$ to 1.\n\nYour task is to determine the minimum number of operations required to transform $S$ into $T$.", "inputFormat": "**The problem uses multiple test cases.**\n\nThe first line contains a positive integer $T$, indicating the number of test cases.\n\nFor each test case:\n\n- The first line contains a 01-string representing $S$.\n\n- The second line contains a 01-string representing $T$.", "outputFormat": "Output $T$ lines, where the $i$-th line contains an integer representing the answer for the $i$-th test case.\n", "hint": "**【Sample Explanation】**\n\nBelow is one valid solution for each of the three sample test cases:\n\n- For the first test case, select $l=1, r=5$ and set all characters in $S_l \\dots S_r$ to 1.\n\n- For the second test case, select $l=1, r=5$ and flip the 01 values of $S_l \\dots S_r$.\n\n- For the third test case, first select $l=4, r=8$ and flip the 01 values of $S_l \\dots S_r$, then select $l=5, r=8$ and set all characters in $S_l \\dots S_r$ to 0.\n\n**【Data Range】**\n\n**This problem uses bundled tests.**\n\n- Subtask 0 (10 points): $n \\le 5$.\n- Subtask 1 (10 points): $n \\le 18$.\n- Subtask 2 (30 points): $n \\le 2000$.\n- Subtask 3 (50 points): No additional constraints.\n\nFor all test cases, $1 \\le T \\le 10$ and $1 \\le n \\le 5 \\times 10^5$.", "locale": "en"}, "zh-CN": {"title": "「CROI · R2」01-string", "background": "", "description": "给定两个长度为 $n$ 的 $01$ 串 $S,T$，你可以对串 $S$ 执行无限次操作，每次都可以从以下操作中任选一个执行：\n\n- 选择两个正整数 $l,r(1\\le l\\le r\\le n)$，将 $S_l\\dots S_r \\ 01$ 反转。\n\n- 选择两个正整数 $l,r(1\\le l\\le r\\le n)$，将 $S_l\\dots S_r $ 全部改为 $0$。\n\n- 选择两个正整数 $l,r(1\\le l\\le r\\le n)$，将 $S_l\\dots S_r $ 全部改为 $1$。\n\n你需要回答最少使用几次操作才能把 $S$ 变成 $T$。", "inputFormat": "**本题采用多组数据测试。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行一个 $01$ 串，表示串 $S$。\n\n第二行一个 $01$ 串，表示串 $T$。", "outputFormat": "一共 $T$ 行，第 $i$ 行一个整数，表示第 $i$ 组数据的答案。", "hint": "**【样例解释】**\n\n以下提供样例三组数据的合法方案之一：\n\n对于第一组数据，选取 $l=1,r=5$，将 $S_l\\dots S_r$ 全部变成 $1$。\n\n对于第二组数据，选取 $l=1,r=5$，将 $S_l\\dots S_r \\ 01$ 反转。\n\n对于第三组数据，先选取 $l=4,r=8$，将 $S_l\\dots S_r$ $01$ 反转，再选取 $l=5,r=8$，将 $S_l\\dots S_r$ 全部变成 $0$。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Sub 0（10 points）：$n\\le 5$。\n- Sub 1（10 points）：$n\\le 18$。\n- Sub 2（30 points）：$n\\le 2000$。\n- Sub 3（50 points）：无特殊限制。\n\n对于所有的数据，$1\\le T \\le 10$，$1\\le n\\le 5\\times 10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P10767", "type": "P", "difficulty": 5, "samples": [["3 3\n2\n2 1\n2 1 2 1\n6 2\n7 3\n8 4", "Yes\nYes\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "树形 DP", "洛谷月赛"], "title": "「CROI · R2」在相思树下 II", "background": "真的要继续吗？\n\n真的不想放弃吗？\n\n真的有用吗？", "description": "狐妖们在涂山上举办了一场淘汰制比赛，现在已知第 $i$ 名参赛者实力为 $i$，每场比赛都会有两名选手决出胜负，胜者进入下一轮，为了尽量让实力较强和较弱的参赛选手均有获胜的可能，涂山雅雅设计了一种特殊的比赛规则。\n\n具体而言，一共有 $2^n$ 位选手报名参加淘汰赛，每场比赛一定按照两种规则之一进行。\n\n- 规则一：参加比赛的两名选手实力较强者胜出。\n- 规则二：参加比赛的两名选手实力较弱者胜出。\n\n现在涂山雅雅会对你进行 $m$ 次询问，对于一个每场比赛规则确定但选手分布未知的签表，每次询问第 $a$ 名选手能否闯入第 $b$ 轮比赛，若能则输出 `Yes`，否则输出 `No`。特殊地，若某位选手夺得了冠军，则我们称其闯入了第 $n+1$ 轮比赛。\n\n下图展示了一张每场比赛规则确定，但选手分布未知的签表示例。其中，每场比赛下标注 $\\max$ 表示该场比赛按照规则一进行，实力较强者胜出；标注 $\\min$ 表示该场比赛按照规则二进行，实力较弱者胜出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e727l3wf.png)", "inputFormat": "第一行两个整数 $n,m$，含义如题面所示。\n\n接下来 $n$ 行描述签表，其中第 $i$ 行有 $2^{i-1}$ 个整数，代表第 $n-i+1$ 轮中从左往右的每场比赛的比赛规则，其中 $1$ 代表该场比赛按照规则一进行，$2$ 代表该场比赛按照规则二进行。\n\n接下来 $m$ 行每行两个整数 $a,b$，代表一次询问。", "outputFormat": "共 $m$ 行，每行一个字符串 `Yes` 或 `No` 代表每次询问的答案。", "hint": "**【样例解释】**\n\n样例中的签表与题目描述中的图示一致。\n\n若要使第六位选手进入第二轮，或使第七位选手进入第三轮，均可按照如下顺序安排选手位置：$\\{1,2,3,4,7,8,5,6\\}$。具体比赛情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v5sgk5ru.png)\n\n显然不存在一种可能的情况使得第八位选手进入第四轮（即夺得冠军）。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask 0（20 points）：$n \\leq 3$，$m \\leq 20$。\n- Subtask 1（10 points）：对于所有询问，$b \\leq 2$。\n- Subtask 2（10 points）：保证每场比赛的规则均为规则一。\n- Subtask 3（20 points）：保证第 $i$ 轮中的所有比赛比赛规则均相同。\n- Subtask 4（40 points）：无特殊限制。\n\n对于所有数据，$1\\leq a\\leq 2^n$，$1\\leq b\\leq n+1$，$1 \\leq 2^n,m \\leq 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "「CROI · R2」Under the Peach Tree of Longing II", "background": "> Will you truly continue?  \n> Are you truly unwilling to give up?  \n> Is this truly meaningful?  ", "description": "Fox demons organized a single-elimination tournament on Mount Tu. The $i$-th participant has strength $i$. In each match, two contestants compete, and the winner advances to the next round. To allow both stronger and weaker participants a chance to win, YaYa designed a special set of rules.\n\nSpecifically, there are $2^n$ participants in the tournament. Each match follows one of two predetermined rules:\n\n- **Rule 1**: The stronger participant wins.\n- **Rule 2**: The weaker participant wins.\n\nYaYa will ask you $m$ queries. For a bracket with fixed match rules (but unknown initial participant placement), determine whether the $a$-th participant can advance to the $b$-th round. Output `Yes` if possible, otherwise `No`. Notably, if a participant becomes the champion, they are considered to have advanced to the $(n+1)$-th round.\n\nThe figure below shows an example bracket with fixed match rules but unknown participant placement. Matches marked with $\\max$ follow Rule 1 (stronger wins), while those marked with $\\min$ follow Rule 2 (weaker wins).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e727l3wf.png)", "inputFormat": "The first line contains two integers $n$ and $m$, as described.\n\nThe next $n$ lines describe the bracket rules:\n- The $i$-th line contains $2^{i-1}$ integers representing the rules for matches in the $(n-i+1)$-th round (from left to right). Here, `1` denotes Rule 1, and `2` denotes Rule 2.\n\nThe next $m$ lines each contain two integers $a$ and $b$, representing a query.\n", "outputFormat": "Output $m$ lines, each containing `Yes` or `No` as the answer to the corresponding query.\n", "hint": "**【Sample Explanation】**\n\nThe sample bracket matches the figure in the problem description.\n\nTo allow the 6th participant to reach the second round, or the 7th participant to reach the third round, participants can be arranged as $\\{1,2,3,4,7,8,5,6\\}$. The specific match outcomes are shown below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v5sgk5ru.png)\n\nIt is impossible for the 8th participant to reach the 4th round (i.e., become champion).\n\n**【Data Range】**\n\n**This problem uses bundled tests.**\n\n- Subtask 0 (20 points): $n \\leq 3$, $m \\leq 20$.\n- Subtask 1 (10 points): For all queries, $b \\leq 2$.\n- Subtask 2 (10 points): All matches follow Rule 1.\n- Subtask 3 (20 points): All matches in the same round follow the same rule.\n- Subtask 4 (40 points): No additional constraints.\n\nFor all test cases: $1 \\leq a \\leq 2^n$, $1 \\leq b \\leq n+1$, $1 \\leq 2^n, m \\leq 10^6$.", "locale": "en"}, "zh-CN": {"title": "「CROI · R2」在相思树下 II", "background": "真的要继续吗？\n\n真的不想放弃吗？\n\n真的有用吗？", "description": "狐妖们在涂山上举办了一场淘汰制比赛，现在已知第 $i$ 名参赛者实力为 $i$，每场比赛都会有两名选手决出胜负，胜者进入下一轮，为了尽量让实力较强和较弱的参赛选手均有获胜的可能，涂山雅雅设计了一种特殊的比赛规则。\n\n具体而言，一共有 $2^n$ 位选手报名参加淘汰赛，每场比赛一定按照两种规则之一进行。\n\n- 规则一：参加比赛的两名选手实力较强者胜出。\n- 规则二：参加比赛的两名选手实力较弱者胜出。\n\n现在涂山雅雅会对你进行 $m$ 次询问，对于一个每场比赛规则确定但选手分布未知的签表，每次询问第 $a$ 名选手能否闯入第 $b$ 轮比赛，若能则输出 `Yes`，否则输出 `No`。特殊地，若某位选手夺得了冠军，则我们称其闯入了第 $n+1$ 轮比赛。\n\n下图展示了一张每场比赛规则确定，但选手分布未知的签表示例。其中，每场比赛下标注 $\\max$ 表示该场比赛按照规则一进行，实力较强者胜出；标注 $\\min$ 表示该场比赛按照规则二进行，实力较弱者胜出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e727l3wf.png)", "inputFormat": "第一行两个整数 $n,m$，含义如题面所示。\n\n接下来 $n$ 行描述签表，其中第 $i$ 行有 $2^{i-1}$ 个整数，代表第 $n-i+1$ 轮中从左往右的每场比赛的比赛规则，其中 $1$ 代表该场比赛按照规则一进行，$2$ 代表该场比赛按照规则二进行。\n\n接下来 $m$ 行每行两个整数 $a,b$，代表一次询问。", "outputFormat": "共 $m$ 行，每行一个字符串 `Yes` 或 `No` 代表每次询问的答案。", "hint": "**【样例解释】**\n\n样例中的签表与题目描述中的图示一致。\n\n若要使第六位选手进入第二轮，或使第七位选手进入第三轮，均可按照如下顺序安排选手位置：$\\{1,2,3,4,7,8,5,6\\}$。具体比赛情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v5sgk5ru.png)\n\n显然不存在一种可能的情况使得第八位选手进入第四轮（即夺得冠军）。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask 0（20 points）：$n \\leq 3$，$m \\leq 20$。\n- Subtask 1（10 points）：对于所有询问，$b \\leq 2$。\n- Subtask 2（10 points）：保证每场比赛的规则均为规则一。\n- Subtask 3（20 points）：保证第 $i$ 轮中的所有比赛比赛规则均相同。\n- Subtask 4（40 points）：无特殊限制。\n\n对于所有数据，$1\\leq a\\leq 2^n$，$1\\leq b\\leq n+1$，$1 \\leq 2^n,m \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10768", "type": "P", "difficulty": 5, "samples": [["4 5\n1 2 -2 -3", "-13\n1 2\n1 3\n1 4\n2 3\n2 4"], ["6 5\n1 2 4 5 0 -3", "-36\n1 6\n2 6\n3 6\n4 6\n5 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "二分", "堆", "洛谷原创", "Special Judge", "O2优化", "生成树", "构造", "洛谷月赛"], "title": "「CROI · R2」落月摇情", "background": "\n>昨夜闲潭梦落花，\\\n可怜春半不还家。\\\n>江水流春去欲尽，\\\n江潭落月复西斜。\n>\n>斜月沉沉藏海雾，\\\n碣石潇湘无限路。\\\n>不知乘月几人归，\\\n落月摇情满江树。\n", "description": "小烟是住在月亮上的仙女。为了和人间保持联系，小烟在江边种了一棵树。每当月光透过枝叶洒在江面上，形成特定的图案时，小烟就能与那个人产生心灵感应。为了让形成的图案更加美观，小烟用魔法让树的枝条互相交错成他喜欢的样子。你可以认为这棵树是一个**有 $n$ 个节点、$m$ 条边且无重边、无自环的无向连通图**。\n\n某次小烟出差回到月亮上，发现这棵树上所有的枝条都被破坏了。为了快速恢复和人间的联系，小烟需要施加魔法将 $n$ 个节点重新连接起来。施加魔法生成一条边的代价与这条边对月光投影的影响程度有关。由于小烟忘记了原本树的形态，所以她希望花费最小的代价将这棵树恢复到任意一个可能的原先形态。也就是说，她需要这 $n$ 个节点之间形成一张有 $m$ 条边且无重边、无自环的无向连通图。\n\n考虑到你不是仙女，很难计算每条边对投影的影响程度，善良的小烟给出了一个简单的计算方法：给你每个点的影响程度 $a_i$，则用魔法生成一条边 $(u,v)$ 的代价为 $a_u\\times a_v$。请你帮小烟找到一组花费代价最小的施加魔法的方案。\n\n**形式化地**，给出 $n$ 个点，每个点有点权 $a_i$，你需要构造一张有 $m$ 条边，且无重边、无自环的无向图，使得这 $n$ 个点连通。设边 $(u,v)$ 的权值为 $a_u\\times a_v$，你需要最小化图中所有边的权值和。", "inputFormat": "输入共两行。\n\n第一行两个非负整数 $n,m$。\n\n第二行 $n$ 个由空格隔开的整数 $a_i$。", "outputFormat": "输出 $m+1$ 行。\n\n第一行一个整数 $ans$，表示你构造的图中，所有边的权值和。\n\n接下来的 $m$ 行每行两个正整数 $u,v$，表示你构造的图中存在一条边 $u,v$。你需要保证 $u\\neq v$，且不存在两个无序二元组 $(u,v)$ 相同，且所有输出能表示一张 $n$ 个点的连通图。**如有多解，输出任意一组合法解即可**。", "hint": "**【Special Judge】**\n\n本题采用 Special Judge。只要你输出的图满足无重边、无自环且连通，同时其边权和与你输出的答案一致且输出的答案与标准答案一致，你就可以通过对应的测试点。\n\n需要注意的是，请确保你的输出符合输出格式中的要求，否则你得到的结果可能不确定。\n\n本题开启子任务依赖。你可以得到一个子任务对应的分数，当且仅当你通过了当前子任务，同时你也通过了当前子任务依赖的所有子任务。具体的依赖情况见“数据范围”部分的表格。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq n\\leq 10^6$，$n-1\\leq m\\leq \\min(10^6,\\frac{n(n-1)}{2})$，$0\\leq |a_i|\\leq 10^6$。\n\n本题开启捆绑测试、开启子任务依赖。\n\n|  子任务编号  | $n \\le$ | $m \\le$ | 特殊性质 | 分值 |子任务依赖|\n| :----------: | :-----: | :--------------: | :------------: | :-----: | :-----: |\n|$1$ |$7$ | $21$ | 无 |$10$| 无 |\n| $2$ | $16$ |  $120$ | 无 |$15$| $1$ |\n|  $3$  | $1000$ | $3\\times 10^5$| 无 |$15$|$1,2$|\n| $4$ | $2\\times 10^5$ | $3\\times 10^5$ | 保证 $a_i$ 为非负整数 |$15$|无|\n| $5$ | $2\\times 10^5$ | $3\\times 10^5$ | 保证 $m=n-1$ |$10$|无|\n| $6$ | $2\\times 10^5$ | $3\\times 10^5$ |  无  | $15$|$1,2,3$|\n| $7$ | $10^6$ | $10^6$ |  无  | $20$|$1,2,3,6$|\n\n**【样例解释】**\n\n- 对于样例一，构造出的图如下图所示。边权和为 $2+-2+-4+-3+-6=-13$。该样例的构图方式是唯一的。\n\n   ![](https://cdn.luogu.com.cn/upload/image_hosting/nd1clogk.png)\n\n- 对于样例二，构造出的图如下图所示。边权和为 $-3+-6+-12+-15+0=-36$。该样例还存在其它正确的构图方式，比如你可以把边 $(5,6)$ 改为边 $(5,3)$。\n  \n   ![](https://cdn.luogu.com.cn/upload/image_hosting/6fm944rj.png)", "locale": "zh-CN", "translations": {"en": {"title": "「CROI · R2」Moonlit Emotion", "background": "> He dreamed of flowers falling o'er the pool last night;  \n> Alas! Spring has gone, he can’t homeward go.  \n> The water bearing spring will run away in flight;  \n> The moon over the pool will in the west sink low.    \n> In the mist on the sea the slanting moon will hide.  \n> It's a long way from northern hills to southern streams.  \n> How many can go home by moonlight on the tide?  \n> The setting moon sheds o'er riverside trees but dreams riverside trees.  ", "description": "Xiao Yan, a fairy living on the moon, maintains a magical tree by the river to communicate with the human world. Moonlight forms specific patterns through its branches on the river surface. To restore the tree after damage, Xiao Yan needs to reconnect its nodes with minimal cost. The tree is an **undirected connected graph with $n$ nodes and $m$ edges, without multiple edges or self-loops**.\n\nThe cost to generate an edge $(u,v)$ is calculated as $a_u \\times a_v$, where $a_i$ represents the influence factor of node $i$. Your task is to find a connected graph with $m$ edges that minimizes the total edge cost.\n\n**Formally**: Given $n$ nodes with weights $a_i$, construct a connected undirected graph with $m$ edges (no duplicates/self-loops) such that the sum of all edge weights ($a_u \\times a_v$) is minimized.", "inputFormat": "First line: Two non-negative integers $n$, $m$.  \nSecond line: $n$ space-separated integers $a_i$.", "outputFormat": "Output $m+1$ lines:  \n- First line: Total cost $ans$.  \n- Next $m$ lines: Pairs $u$ $v$ representing edges (unordered, no duplicates).  \nAny valid solution is accepted if conditions are met.", "hint": "**【Special Judge】**  \nYour output will be accepted if:  \n- The graph is connected with no duplicate/self-loop edges.  \n- The total cost matches the claimed $ans$ (which must equal the standard answer).\n\n**【Data Range】**  \nConstraints:  \n- $1 \\leq n \\leq 10^6$  \n- $n-1 \\leq m \\leq \\min(10^6, \\frac{n(n-1)}{2})$  \n- $|a_i| \\leq 10^6$\n\n**Subtasks (with dependencies):**  \n| Subtask | $n \\leq$ | $m \\leq$ | Special Conditions | Points | Dependencies |\n|---------|----------|----------|--------------------|--------|--------------|\n| 1       | 7        | 21       | None               | 10     | None         |\n| 2       | 16       | 120      | None               | 15     | 1            |\n| 3       | 1000     | 3e5      | None               | 15     | 1,2          |\n| 4       | 2e5      | 3e5      | $a_i \\geq 0$       | 15     | None         |\n| 5       | 2e5      | 3e5      | $m = n-1$          | 10     | None         |\n| 6       | 2e5      | 3e5      | None               | 15     | 1,2,3        |\n| 7       | 1e6      | 1e6      | None               | 20     | 1,2,3,6      |\n\n**【Sample Explanations】**  \n- **Sample 1**: Unique solution with total cost $-13$.  \n  ![](https://cdn.luogu.com.cn/upload/image_hosting/nd1clogk.png)  \n- **Sample 2**: Multiple valid solutions (e.g., edge $(5,6)$ can be replaced with $(5,3)$).  \n  ![](https://cdn.luogu.com.cn/upload/image_hosting/6fm944rj.png)", "locale": "en"}, "zh-CN": {"title": "「CROI · R2」落月摇情", "background": "\n>昨夜闲潭梦落花，\\\n可怜春半不还家。\\\n>江水流春去欲尽，\\\n江潭落月复西斜。\n>\n>斜月沉沉藏海雾，\\\n碣石潇湘无限路。\\\n>不知乘月几人归，\\\n落月摇情满江树。\n", "description": "小烟是住在月亮上的仙女。为了和人间保持联系，小烟在江边种了一棵树。每当月光透过枝叶洒在江面上，形成特定的图案时，小烟就能与那个人产生心灵感应。为了让形成的图案更加美观，小烟用魔法让树的枝条互相交错成他喜欢的样子。你可以认为这棵树是一个**有 $n$ 个节点、$m$ 条边且无重边、无自环的无向连通图**。\n\n某次小烟出差回到月亮上，发现这棵树上所有的枝条都被破坏了。为了快速恢复和人间的联系，小烟需要施加魔法将 $n$ 个节点重新连接起来。施加魔法生成一条边的代价与这条边对月光投影的影响程度有关。由于小烟忘记了原本树的形态，所以她希望花费最小的代价将这棵树恢复到任意一个可能的原先形态。也就是说，她需要这 $n$ 个节点之间形成一张有 $m$ 条边且无重边、无自环的无向连通图。\n\n考虑到你不是仙女，很难计算每条边对投影的影响程度，善良的小烟给出了一个简单的计算方法：给你每个点的影响程度 $a_i$，则用魔法生成一条边 $(u,v)$ 的代价为 $a_u\\times a_v$。请你帮小烟找到一组花费代价最小的施加魔法的方案。\n\n**形式化地**，给出 $n$ 个点，每个点有点权 $a_i$，你需要构造一张有 $m$ 条边，且无重边、无自环的无向图，使得这 $n$ 个点连通。设边 $(u,v)$ 的权值为 $a_u\\times a_v$，你需要最小化图中所有边的权值和。", "inputFormat": "输入共两行。\n\n第一行两个非负整数 $n,m$。\n\n第二行 $n$ 个由空格隔开的整数 $a_i$。", "outputFormat": "输出 $m+1$ 行。\n\n第一行一个整数 $ans$，表示你构造的图中，所有边的权值和。\n\n接下来的 $m$ 行每行两个正整数 $u,v$，表示你构造的图中存在一条边 $u,v$。你需要保证 $u\\neq v$，且不存在两个无序二元组 $(u,v)$ 相同，且所有输出能表示一张 $n$ 个点的连通图。**如有多解，输出任意一组合法解即可**。", "hint": "**【Special Judge】**\n\n本题采用 Special Judge。只要你输出的图满足无重边、无自环且连通，同时其边权和与你输出的答案一致且输出的答案与标准答案一致，你就可以通过对应的测试点。\n\n需要注意的是，请确保你的输出符合输出格式中的要求，否则你得到的结果可能不确定。\n\n本题开启子任务依赖。你可以得到一个子任务对应的分数，当且仅当你通过了当前子任务，同时你也通过了当前子任务依赖的所有子任务。具体的依赖情况见“数据范围”部分的表格。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq n\\leq 10^6$，$n-1\\leq m\\leq \\min(10^6,\\frac{n(n-1)}{2})$，$0\\leq |a_i|\\leq 10^6$。\n\n本题开启捆绑测试、开启子任务依赖。\n\n|  子任务编号  | $n \\le$ | $m \\le$ | 特殊性质 | 分值 |子任务依赖|\n| :----------: | :-----: | :--------------: | :------------: | :-----: | :-----: |\n|$1$ |$7$ | $21$ | 无 |$10$| 无 |\n| $2$ | $16$ |  $120$ | 无 |$15$| $1$ |\n|  $3$  | $1000$ | $3\\times 10^5$| 无 |$15$|$1,2$|\n| $4$ | $2\\times 10^5$ | $3\\times 10^5$ | 保证 $a_i$ 为非负整数 |$15$|无|\n| $5$ | $2\\times 10^5$ | $3\\times 10^5$ | 保证 $m=n-1$ |$10$|无|\n| $6$ | $2\\times 10^5$ | $3\\times 10^5$ |  无  | $15$|$1,2,3$|\n| $7$ | $10^6$ | $10^6$ |  无  | $20$|$1,2,3,6$|\n\n**【样例解释】**\n\n- 对于样例一，构造出的图如下图所示。边权和为 $2+-2+-4+-3+-6=-13$。该样例的构图方式是唯一的。\n\n   ![](https://cdn.luogu.com.cn/upload/image_hosting/nd1clogk.png)\n\n- 对于样例二，构造出的图如下图所示。边权和为 $-3+-6+-12+-15+0=-36$。该样例还存在其它正确的构图方式，比如你可以把边 $(5,6)$ 改为边 $(5,3)$。\n  \n   ![](https://cdn.luogu.com.cn/upload/image_hosting/6fm944rj.png)", "locale": "zh-CN"}}}
{"pid": "P10769", "type": "P", "difficulty": 7, "samples": [["3\n3 4\n6 2 1\n2\n1 3 7\n2\n1 2\n2 3 5\n3\n1 2 4\n", "12 0\n36 4 0"], ["6\n2 2 2 2 3\n13 12 15 9 3 1\n3\n5 7 9 11 12 13\n4\n1 2 4 8\n3 4 5 7 8 10\n3\n2 4 5\n1000000 1000001 1000002 1000003 1000004 1000005\n2\n1 3\n", "52 6 0 0\n49 3 0\n208 31"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "洛谷原创", "O2优化", "分治", "四边形不等式", "洛谷月赛"], "title": "「CROI · R2」公交接驳", "background": "H 市是一座特大城市，每天来往于城市各个角落的乘客络绎不绝。该市郊区建筑分散，为方便周边群众出行，该市沿平行于主要公路的方向修建了市郊铁路，与公路上的公交系统形成互补格局。同一方向上的铁路站点与公交站点不完全一致，但设有若干个换乘站，铁路列车与公交车均停靠换乘站。现目前，市郊铁路仅在早高峰、晚高峰时各单向发一趟列车。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qipfpx31.png)\n\n上图是沿早高峰方向的市郊铁路和公交车的停靠站点示意图。用蓝色箭头连接的为换乘站，市郊铁路的乘客可以在这些车站换乘公交车。\n\n在下面的问题中，我们忽略非换乘站的存在，仅考虑换乘站在运营过程中的影响。", "description": "由于城市人口增多，H 市市郊铁路通勤压力增大，为了应对短时大客流，公交集团决定于早高峰时期在某条公交线路上安排若干班次的公交车，其运行方向与早高峰时期列车的开行方向相同，均为自西向东运行，便于乘坐火车的乘客换乘公交到达目的地。\n\n给出一条共有 $n$ 个换乘站的街道，由西向东地将每个换乘站编号为 $1\\sim n$。每一个换乘站的调度室对行驶效率的重视程度有所不同，第 $i$ 个换乘站的重视程度为 $v_i$。不同公交车在同一区间内的行驶时间相同，从第 $i$ 个换乘站行驶至第 $i+1$ 个换乘站的**时间**均为 $s_i$，可以忽略车辆停站的时间。市郊铁路列车到达第 $i$ 个换乘站的**时刻**为 $t_i$。保证两个换乘站之间乘坐公交车花费的时间一定不小于乘坐市郊铁路花费的时间。\n\n现在你需要在这条公交线路上安排 $k$ 班公交车。全部的 $n$ 个换乘站都会有乘客从铁路下车。对于每一班车，你都需要安排其发车的时刻和发车的换乘站，且需要保证从任意一个换乘站下车的乘客均能坐上公交车，即最晚到达换乘站 $i$ 的公交车的到达时刻必须不小于 $t_i$。每班公交车发车后，都会以既定速度向东行驶至第 $n$ 个换乘站，并在途中的每个车站停靠并接上所有等候的乘客。你可以任意指定每条公交线路的始发站和发车时刻。\n\n乘客们会登上他们到达车站后，首辆到达该站的公交车。定义换乘站 $i$ 的不满意度为在该站点处，于 $t_i$ 时刻从铁路下车的乘客等待首辆到达该站的公交车所花费的时间与乘客登上的公交车的始发站的重视程度的乘积。如果存在多班公交车同时到站，我们认为乘客登上的是始发站重视程度最小的一班。你需要最小化所有 $n$ 个换乘站的不满意度之和。\n\n铁路时刻表和可供公交公司使用的空闲公交车数量总是在变化，所以你需要处理多组 $t_i$ 和 $k$ 不同的询问。", "inputFormat": "第一行包含一个正整数 $n$，表示换乘站的数量。\n\n第二行包含 $n-1$ 个用空格隔开的非负整数 $s_1,s_2,...,s_{n-1}$。\n\n第三行包含 $n$ 个用空格隔开的非负整数 $v_i$。\n\n第四行包含一个正整数 $p$，表示不同市郊铁路时刻表的数量。\n\n接下来共有 $p$ 组数据，每组数据包含三行。\n\n每组第一行包含 $n$ 个用空格隔开的正整数 $t_1,t_2,\\cdots,t_n$。\n\n每组第二行包含一个正整数 $q_i$ ，表示在当前时刻表下询问的 $k$ 的数量。\n\n每组第三行包含 $q_i$ 个用空格隔开的正整数 $k_1,k_2,\\cdots,k_q$，表示询问的不同的 $k$。", "outputFormat": "输出 $p$ 行，每行 $q_i$ 个用空格隔开的正整数，表示在当前询问的 $k$ 的情况下，所有换乘站不满意度之和的最小值。", "hint": "**【数据范围】**\n\n对于所有测试点，保证 $1\\leq n\\leq 1000$，$1\\leq p\\leq 10$，$s_i\\geq t_{i+1}-t_i\\geq 0$，$1\\leq q_i,k_i\\leq 10^6$，$0\\leq v_i,\\sum s_i\\leq 10^6$，$1\\leq t_i\\leq 2\\times 10^6$。\n\n本题采用捆绑测试。\n\n| 子任务 |  $n≤$  |  $q≤$  | $k_i≤$ | $∑s_i≤$ | 特殊性质 | 分值 |\n| :----: | :----: | :----: | :----: | :-----: | :------: | :--: |\n|  $1$   |  $15$  | $1000$ | $1000$ |  $15$   |    无    | $5$  |\n|  $2$   |  $15$  | $10^6$ | $10^6$ | $10^6$  |    无    | $5$  |\n|  $3$   | $100$  | $10^6$ | $10^6$ | $10^6$  |    无    | $15$ |\n|  $4$   | $1000$ | $10^6$ | $10^6$ | $10^6$  |   $A$    | $5$  |\n|  $5$   | $1000$ | $10^6$ | $10^6$ | $10^6$  |   $B$    | $30$ |\n|  $6$   | $1000$ | $1000$ | $1100$ | $1000$  |    无    | $10$ |\n|  $7$   | $1000$ | $10^6$ | $10^6$ | $10^6$  |    无    | $30$ |\n\n特殊性质 $A$：对于所有输入，保证 $s_i=t_{i+1}-t_i$。\n\n特殊性质 $B$：保证 $v_i=1$。\n\n**【样例解释】**\n\n下面对于样例一的各询问给出一组可行的最优发车方案。注意可以使得答案最优的方案可能是不唯一的。\n\n对于样例一的第一组时刻表：\n- 当 $k=1$ 时，我们于时刻 $1$ 在站点 $1$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $1$    |   $3$    |   $7$    |\n  | 公交班次 $1$ 到站时刻 |   $1$    |   $4$    |   $8$    |\n  |    乘客登上的班次     | 班次 $1$ | 班次 $1$ | 班次 $1$ |\n  |   乘客等待时间     |   $0$    |   $1$    |   $1$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$。故最终答案为 $6\\times 0+6\\times 1+6\\times 1=12$。\n  \n- 当 $k=2$ 时，我们于时刻 $1$ 在站点 $1$ 发车，于时刻 $3$ 在站点 $2$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $1$    |   $3$    |   $7$    |\n  | 公交班次 $1$ 到站时刻 |   $1$    |   $4$    |   $8$    |\n  | 公交班次 $2$ 到站时刻 |    /     |   $3$    |   $7$    |\n  |    乘客登上的班次    | 班次 $1$ | 班次 $2$ | 班次 $2$ |\n  |   乘客等待时间    |   $0$    |   $0$    |   $0$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$；班次 $2$ 的起点站为车站 $2$，$v_2=2$。故最终答案为 $6\\times 0+2\\times 0+2\\times 0=0$。\n  \n\n对于样例一的第二组时刻表：\n- 当 $k=1$ 时，我们于时刻 $2$ 在站点 $1$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $2$    |   $3$    |   $5$    |\n  | 公交班次 $1$ 到站时刻 |   $2$    |   $5$    |   $9$    |\n  |    乘客登上的班次     | 班次 $1$ | 班次 $1$ | 班次 $1$ |\n  |   乘客等待时间    |   $0$    |   $2$    |   $4$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$。故最终答案为 $6\\times 0+6\\times 2+6\\times 4=36$。\n- 当 $k=2$ 时，我们于时刻 $2$ 在站点 $1$ 发车，于时刻 $3$ 在站点 $2$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $2$    |   $3$    |   $5$    |\n  | 公交班次 $1$ 到站时刻 |   $2$    |   $5$    |   $9$    |\n  | 公交班次 $2$ 到站时刻 |    /     |   $3$    |   $7$    |\n  |    乘客登上的班次     | 班次 $1$ | 班次 $2$ | 班次 $2$ |\n  |   乘客等待时间    |   $0$    |   $0$    |   $2$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$；班次 $2$ 的起点站为车站 $2$，$v_2=2$。故最终答案为 $6\\times 0+2\\times 0+2\\times 2=4$。\n  \n- 当 $k=4$ 时，我们分别于时刻 $-2$ 和时刻 $2$ 在站点 $1$ 发车，于时刻 $1$ 和时刻 $3$ 分别在站点 $2$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $2$    |   $3$    |   $5$    |\n  | 公交班次 $1$ 到站时刻 |   $-2$   |   $1$    |   $5$    |\n  | 公交班次 $2$ 到站时刻 |   $2$    |   $5$    |   $9$    |\n  | 公交班次 $3$ 到站时刻 |    /     |   $1$    |   $5$    |\n  | 公交班次 $4$ 到站时刻 |    /     |   $3$    |   $7$    |\n  |    乘客登上的班次     | 班次 $2$ | 班次 $4$ | 班次 $3$ |\n  |   乘客等待时间    |   $0$    |   $0$    |   $0$    |\n  \n  班次 $1$ 和 $2$ 的起点站为车站 $1$，$v_1=6$；班次 $3$ 和 $4$ 的起点站为车站 $2$，$v_2=2$。故最终答案为 $6\\times 0+2\\times 0+2\\times 0=0$。\n  \n  值得注意的是，对于车站 $3$，班次 $1$ 和班次 $3$ 同时最早到达，但由于班次 $1$ 对应的重视程度 $v_1=6$，班次 $3$ 对应的重视程度为 $v_2=2$，因此乘客登上的是班次 $3$。", "locale": "zh-CN", "translations": {"en": {"title": "「CROI · R2」Bus Shuttle", "background": "City H is a metropolis with heavy passenger traffic. To facilitate suburban travel, the city built a suburban railway parallel to the main highway. There are several transfer stations where both trains and buses stop. Currently, the railway operates one-way trains only during morning and evening rush hours.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qipfpx31.png)\n\nThe figure shows transfer stations (blue arrows) where railway passengers can switch to buses. We focus only on transfer stations in this problem.", "description": "To handle peak-hour crowds, the bus company will deploy $k$ buses along a route with $n$ transfer stations (numbered 1 to $n$ west-to-east). Each transfer station $i$ has a priority value $v_i$. The travel time from station $i$ to $i+1$ is $s_i$ (ignoring stop time). The railway arrives at station $i$ at time $t_i$. Bus travel time between stations is always ≥ railway travel time.\n\nYou must schedule $k$ buses such that:\n1. All passengers arriving at any station $i$ at $t_i$ can board a bus (bus arrival time ≥ $t_i$).\n2. For each station $i$, the **dissatisfaction** is calculated as:  \n   (waiting time for the first bus) × (priority $v_j$ of the bus's origin station).  \n   If multiple buses arrive simultaneously, passengers choose the one with the smallest $v_j$.\n\nMinimize the total dissatisfaction across all stations for multiple queries with different $t_i$ and $k$.", "inputFormat": "First line: Integer $n$ (number of stations).  \nSecond line: $n-1$ integers $s_1,...,s_{n-1}$ (travel times).  \nThird line: $n$ integers $v_1,...,v_n$ (priorities).  \nFourth line: Integer $p$ (number of railway schedules).  \n\nFor each schedule:  \n- Line 1: $n$ integers $t_1,...,t_n$ (railway arrival times).  \n- Line 2: Integer $q_i$ (number of queries).  \n- Line 3: $q_i$ integers $k_1,...,k_{q_i}$ (bus counts to test).", "outputFormat": "For each schedule, output $q_i$ integers—the minimal total dissatisfaction for each $k$.", "hint": "**【Data Range】**  \nConstraints:  \n- $1 \\leq n \\leq 1000$, $1 \\leq p \\leq 10$  \n- $s_i \\geq t_{i+1} - t_i \\geq 0$  \n- $1 \\leq q_i, k_i \\leq 10^6$, $0 \\leq v_i, \\sum s_i \\leq 10^6$, $1 \\leq t_i \\leq 2 \\times 10^6$\n\n**Subtasks:**  \n| Subtask | $n$ | $q$ | $k_i$ | $\\sum s_i$ | Special | Points |\n|---------|-----|-----|-------|------------|---------|--------|\n| 1       | 15  | 1e3 | 1e3   | 15         | None    | 5      |\n| 2       | 15  | 1e6 | 1e6   | 1e6        | None    | 5      |\n| 3       | 100 | 1e6 | 1e6   | 1e6        | None    | 15     |\n| 4       | 1e3 | 1e6 | 1e6   | 1e6        | A       | 5      |\n| 5       | 1e3 | 1e6 | 1e6   | 1e6        | B       | 30     |\n| 6       | 1e3 | 1e3 | 1.1e3 | 1e3        | None    | 10     |\n| 7       | 1e3 | 1e6 | 1e6   | 1e6        | None    | 30     |\n\n- **Special A**: $s_i = t_{i+1} - t_i$  \n- **Special B**: $v_i = 1$\n\n**【Sample Explanation】**  \nBelow are feasible optimal bus scheduling plans for the sample queries. Note that there may be multiple valid optimal solutions.\n\n**For the first schedule in Sample 1:**  \n- **When $ k=1 $:**  \n  A bus departs station 1 at time $ 1 $. Operational details:  \n  |                       | Station 1 | Station 2 | Station 3 |  \n  | :-------------------: | :-------: | :-------: | :-------: |  \n  | Railway Arrival Time   |   $ 1 $ |   $ 3 $ |   $ 7 $ |  \n  | Bus Service 1 Arrival  |   $ 1 $ |   $ 4 $ |   $ 8 $ |  \n  | Boarded Service        | Service 1 | Service 1 | Service 1 |  \n  | Waiting Time           |   $ 0 $ |   $ 1 $ |   $ 1 $ |  \n\n  Service 1 starts at station 1 ($ v_1=6 $). Total dissatisfaction:  \n  $$\n  6 \\times 0 + 6 \\times 1 + 6 \\times 1 = 12\n  $$\n\n- **When $ k=2 $:**  \n  Buses depart station 1 at $ t=1 $ and station 2 at $ t=3 $. Operational details:  \n  |                       | Station 1 | Station 2 | Station 3 |  \n  | :-------------------: | :-------: | :-------: | :-------: |  \n  | Railway Arrival Time   |   $ 1 $ |   $ 3 $ |   $ 7 $ |  \n  | Bus Service 1 Arrival  |   $ 1 $ |   $ 4 $ |   $ 8 $ |  \n  | Bus Service 2 Arrival  |    —      |   $ 3 $ |   $ 7 $ |  \n  | Boarded Service        | Service 1 | Service 2 | Service 2 |  \n  | Waiting Time           |   $ 0 $ |   $ 0 $ |   $ 0 $ |  \n\n  Service 1 starts at station 1 ($ v_1=6 $), Service 2 at station 2 ($ v_2=2 $). Total dissatisfaction:  \n  $$\n  6 \\times 0 + 2 \\times 0 + 2 \\times 0 = 0\n  $$\n\n**For the second schedule in Sample 1:**  \n- **When $ k=1 $:**  \n  A bus departs station 1 at $ t=2 $. Operational details:  \n  |                       | Station 1 | Station 2 | Station 3 |  \n  | :-------------------: | :-------: | :-------: | :-------: |  \n  | Railway Arrival Time   |   $ 2 $ |   $ 3 $ |   $ 5 $ |  \n  | Bus Service 1 Arrival  |   $ 2 $ |   $ 5 $ |   $ 9 $ |  \n  | Boarded Service        | Service 1 | Service 1 | Service 1 |  \n  | Waiting Time           |   $ 0 $ |   $ 2 $ |   $ 4 $ |  \n\n  Total dissatisfaction:  \n  $$\n  6 \\times 0 + 6 \\times 2 + 6 \\times 4 = 36\n  $$\n\n- **When $ k=2 $:**  \n  Buses depart station 1 at $ t=2 $ and station 2 at $ t=3 $. Operational details:  \n  |                       | Station 1 | Station 2 | Station 3 |  \n  | :-------------------: | :-------: | :-------: | :-------: |  \n  | Railway Arrival Time   |   $ 2 $ |   $ 3 $ |   $ 5 $ |  \n  | Bus Service 1 Arrival  |   $ 2 $ |   $ 5 $ |   $ 9 $ |  \n  | Bus Service 2 Arrival  |    —      |   $ 3 $ |   $ 7 $ |  \n  | Boarded Service        | Service 1 | Service 2 | Service 2 |  \n  | Waiting Time           |   $ 0 $ |   $ 0 $ |   $ 2 $ |  \n\n  Total dissatisfaction:  \n  $$\n  6 \\times 0 + 2 \\times 0 + 2 \\times 2 = 4\n  $$\n\n- **When $ k=4 $:**  \n  Buses depart:  \n  - Station 1 at $ t=-2 $ and $ t=2 $.  \n  - Station 2 at $ t=1 $ and $ t=3 $.  \n  Operational details:\n\n  |                       | Station 1 | Station 2 | Station 3 |  \n  | :-------------------: | :-------: | :-------: | :-------: |  \n  | Railway Arrival Time   |   $ 2 $ |   $ 3 $ |   $ 5 $ |  \n  | Bus Service 1 Arrival  |  $-2$   |   $ 1 $ |   $ 5 $ |  \n  | Bus Service 2 Arrival  |   $ 2 $ |   $ 5 $ |   $ 9 $ |  \n  | Bus Service 3 Arrival  |    -      |   $ 1 $ |   $ 5 $ |  \n  | Bus Service 4 Arrival  |    -      |   $ 3 $ |   $ 7 $ |  \n  | Boarded Service        | Service 2 | Service 4 | Service 3 |  \n  | Waiting Time           |   $ 0 $ |   $ 0 $ |   $ 0 $ |  \n\n  Services 1/2 start at station 1 ($ v_1=6 $), Services 3/4 at station 2 ($ v_2=2 $). Total dissatisfaction:  \n  $$\n  6 \\times 0 + 2 \\times 0 + 2 \\times 0 = 0\n  $$  \n  **Note:** At Station 3, Services 1 and 3 arrive simultaneously at $ t=5 $. Passengers choose Service 3 (lower $ v_j=2 $) over Service 1 ($ v_j=6 $).", "locale": "en"}, "zh-CN": {"title": "「CROI · R2」公交接驳", "background": "H 市是一座特大城市，每天来往于城市各个角落的乘客络绎不绝。该市郊区建筑分散，为方便周边群众出行，该市沿平行于主要公路的方向修建了市郊铁路，与公路上的公交系统形成互补格局。同一方向上的铁路站点与公交站点不完全一致，但设有若干个换乘站，铁路列车与公交车均停靠换乘站。现目前，市郊铁路仅在早高峰、晚高峰时各单向发一趟列车。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qipfpx31.png)\n\n上图是沿早高峰方向的市郊铁路和公交车的停靠站点示意图。用蓝色箭头连接的为换乘站，市郊铁路的乘客可以在这些车站换乘公交车。\n\n在下面的问题中，我们忽略非换乘站的存在，仅考虑换乘站在运营过程中的影响。", "description": "由于城市人口增多，H 市市郊铁路通勤压力增大，为了应对短时大客流，公交集团决定于早高峰时期在某条公交线路上安排若干班次的公交车，其运行方向与早高峰时期列车的开行方向相同，均为自西向东运行，便于乘坐火车的乘客换乘公交到达目的地。\n\n给出一条共有 $n$ 个换乘站的街道，由西向东地将每个换乘站编号为 $1\\sim n$。每一个换乘站的调度室对行驶效率的重视程度有所不同，第 $i$ 个换乘站的重视程度为 $v_i$。不同公交车在同一区间内的行驶时间相同，从第 $i$ 个换乘站行驶至第 $i+1$ 个换乘站的**时间**均为 $s_i$，可以忽略车辆停站的时间。市郊铁路列车到达第 $i$ 个换乘站的**时刻**为 $t_i$。保证两个换乘站之间乘坐公交车花费的时间一定不小于乘坐市郊铁路花费的时间。\n\n现在你需要在这条公交线路上安排 $k$ 班公交车。全部的 $n$ 个换乘站都会有乘客从铁路下车。对于每一班车，你都需要安排其发车的时刻和发车的换乘站，且需要保证从任意一个换乘站下车的乘客均能坐上公交车，即最晚到达换乘站 $i$ 的公交车的到达时刻必须不小于 $t_i$。每班公交车发车后，都会以既定速度向东行驶至第 $n$ 个换乘站，并在途中的每个车站停靠并接上所有等候的乘客。你可以任意指定每条公交线路的始发站和发车时刻。\n\n乘客们会登上他们到达车站后，首辆到达该站的公交车。定义换乘站 $i$ 的不满意度为在该站点处，于 $t_i$ 时刻从铁路下车的乘客等待首辆到达该站的公交车所花费的时间与乘客登上的公交车的始发站的重视程度的乘积。如果存在多班公交车同时到站，我们认为乘客登上的是始发站重视程度最小的一班。你需要最小化所有 $n$ 个换乘站的不满意度之和。\n\n铁路时刻表和可供公交公司使用的空闲公交车数量总是在变化，所以你需要处理多组 $t_i$ 和 $k$ 不同的询问。", "inputFormat": "第一行包含一个正整数 $n$，表示换乘站的数量。\n\n第二行包含 $n-1$ 个用空格隔开的非负整数 $s_1,s_2,...,s_{n-1}$。\n\n第三行包含 $n$ 个用空格隔开的非负整数 $v_i$。\n\n第四行包含一个正整数 $p$，表示不同市郊铁路时刻表的数量。\n\n接下来共有 $p$ 组数据，每组数据包含三行。\n\n每组第一行包含 $n$ 个用空格隔开的正整数 $t_1,t_2,\\cdots,t_n$。\n\n每组第二行包含一个正整数 $q_i$ ，表示在当前时刻表下询问的 $k$ 的数量。\n\n每组第三行包含 $q_i$ 个用空格隔开的正整数 $k_1,k_2,\\cdots,k_q$，表示询问的不同的 $k$。", "outputFormat": "输出 $p$ 行，每行 $q_i$ 个用空格隔开的正整数，表示在当前询问的 $k$ 的情况下，所有换乘站不满意度之和的最小值。", "hint": "**【数据范围】**\n\n对于所有测试点，保证 $1\\leq n\\leq 1000$，$1\\leq p\\leq 10$，$s_i\\geq t_{i+1}-t_i\\geq 0$，$1\\leq q_i,k_i\\leq 10^6$，$0\\leq v_i,\\sum s_i\\leq 10^6$，$1\\leq t_i\\leq 2\\times 10^6$。\n\n本题采用捆绑测试。\n\n| 子任务 |  $n≤$  |  $q≤$  | $k_i≤$ | $∑s_i≤$ | 特殊性质 | 分值 |\n| :----: | :----: | :----: | :----: | :-----: | :------: | :--: |\n|  $1$   |  $15$  | $1000$ | $1000$ |  $15$   |    无    | $5$  |\n|  $2$   |  $15$  | $10^6$ | $10^6$ | $10^6$  |    无    | $5$  |\n|  $3$   | $100$  | $10^6$ | $10^6$ | $10^6$  |    无    | $15$ |\n|  $4$   | $1000$ | $10^6$ | $10^6$ | $10^6$  |   $A$    | $5$  |\n|  $5$   | $1000$ | $10^6$ | $10^6$ | $10^6$  |   $B$    | $30$ |\n|  $6$   | $1000$ | $1000$ | $1100$ | $1000$  |    无    | $10$ |\n|  $7$   | $1000$ | $10^6$ | $10^6$ | $10^6$  |    无    | $30$ |\n\n特殊性质 $A$：对于所有输入，保证 $s_i=t_{i+1}-t_i$。\n\n特殊性质 $B$：保证 $v_i=1$。\n\n**【样例解释】**\n\n下面对于样例一的各询问给出一组可行的最优发车方案。注意可以使得答案最优的方案可能是不唯一的。\n\n对于样例一的第一组时刻表：\n- 当 $k=1$ 时，我们于时刻 $1$ 在站点 $1$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $1$    |   $3$    |   $7$    |\n  | 公交班次 $1$ 到站时刻 |   $1$    |   $4$    |   $8$    |\n  |    乘客登上的班次     | 班次 $1$ | 班次 $1$ | 班次 $1$ |\n  |   乘客等待时间     |   $0$    |   $1$    |   $1$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$。故最终答案为 $6\\times 0+6\\times 1+6\\times 1=12$。\n  \n- 当 $k=2$ 时，我们于时刻 $1$ 在站点 $1$ 发车，于时刻 $3$ 在站点 $2$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $1$    |   $3$    |   $7$    |\n  | 公交班次 $1$ 到站时刻 |   $1$    |   $4$    |   $8$    |\n  | 公交班次 $2$ 到站时刻 |    /     |   $3$    |   $7$    |\n  |    乘客登上的班次    | 班次 $1$ | 班次 $2$ | 班次 $2$ |\n  |   乘客等待时间    |   $0$    |   $0$    |   $0$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$；班次 $2$ 的起点站为车站 $2$，$v_2=2$。故最终答案为 $6\\times 0+2\\times 0+2\\times 0=0$。\n  \n\n对于样例一的第二组时刻表：\n- 当 $k=1$ 时，我们于时刻 $2$ 在站点 $1$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $2$    |   $3$    |   $5$    |\n  | 公交班次 $1$ 到站时刻 |   $2$    |   $5$    |   $9$    |\n  |    乘客登上的班次     | 班次 $1$ | 班次 $1$ | 班次 $1$ |\n  |   乘客等待时间    |   $0$    |   $2$    |   $4$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$。故最终答案为 $6\\times 0+6\\times 2+6\\times 4=36$。\n- 当 $k=2$ 时，我们于时刻 $2$ 在站点 $1$ 发车，于时刻 $3$ 在站点 $2$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $2$    |   $3$    |   $5$    |\n  | 公交班次 $1$ 到站时刻 |   $2$    |   $5$    |   $9$    |\n  | 公交班次 $2$ 到站时刻 |    /     |   $3$    |   $7$    |\n  |    乘客登上的班次     | 班次 $1$ | 班次 $2$ | 班次 $2$ |\n  |   乘客等待时间    |   $0$    |   $0$    |   $2$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$；班次 $2$ 的起点站为车站 $2$，$v_2=2$。故最终答案为 $6\\times 0+2\\times 0+2\\times 2=4$。\n  \n- 当 $k=4$ 时，我们分别于时刻 $-2$ 和时刻 $2$ 在站点 $1$ 发车，于时刻 $1$ 和时刻 $3$ 分别在站点 $2$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $2$    |   $3$    |   $5$    |\n  | 公交班次 $1$ 到站时刻 |   $-2$   |   $1$    |   $5$    |\n  | 公交班次 $2$ 到站时刻 |   $2$    |   $5$    |   $9$    |\n  | 公交班次 $3$ 到站时刻 |    /     |   $1$    |   $5$    |\n  | 公交班次 $4$ 到站时刻 |    /     |   $3$    |   $7$    |\n  |    乘客登上的班次     | 班次 $2$ | 班次 $4$ | 班次 $3$ |\n  |   乘客等待时间    |   $0$    |   $0$    |   $0$    |\n  \n  班次 $1$ 和 $2$ 的起点站为车站 $1$，$v_1=6$；班次 $3$ 和 $4$ 的起点站为车站 $2$，$v_2=2$。故最终答案为 $6\\times 0+2\\times 0+2\\times 0=0$。\n  \n  值得注意的是，对于车站 $3$，班次 $1$ 和班次 $3$ 同时最早到达，但由于班次 $1$ 对应的重视程度 $v_1=6$，班次 $3$ 对应的重视程度为 $v_2=2$，因此乘客登上的是班次 $3$。", "locale": "zh-CN"}}}
{"pid": "P10770", "type": "P", "difficulty": 7, "samples": [["0\n5\n10 5 1 8 4 3 7 6 2 9\n1 1 1 3", "10 1 4 9 7 6 5 8 3 2"], ["0\n4\n7 2 4 1 5 6 3 8\n0 0 0\n", "7 1 8 2 4 6 5 3\n"], ["0\n4\n2 7 6 4 5 8 1 3\n0 0 0", "2 4 8 6 7 5 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "博弈论", "线段树", "洛谷原创", "洛谷月赛"], "title": "「CROI · R2」夏风与树", "background": "刺眼的阳光把大地烤得炽热，小 B 走在街上，迎面吹来一阵清风，路旁郁郁葱葱的树叶沙沙地摇晃着。\n\n“夏风扫过树叶的声音就像下雨一样呢。”", "description": "Alice 和 Bob 在种树，同时，他们决定玩一个游戏。\n\nAlice 拥有 $1\\sim n$ 号结点，Bob 拥有 $(n+1)\\sim 2n$ 号结点，这 $2n$ 个结点的权值恰好构成一个**排列** $a$，其中 $a_i$ 为 $i$ 号点上的权值。\n\n首先，他们约定 $1$ 号点为树根。\n\n然后，由 Alice 为 $2\\sim n$ 号点决定父亲，其中 $i$ 号点的父亲只能在 $1\\sim(i-1)$ 中选择。\n\n接下来，由 Bob 为 $(n+1)\\sim 2n$ 号点决定父亲，其中 $i$ 号点的父亲只能在 $0\\sim(i-1)$ 中选择。$0$ 号点不在他们的树上，也就是说，Bob 的结点不一定要与这棵树连通。\n\n最后，Alice 会从 $1$ 号点开始，对这棵树进行深度优先搜索，同时她会维护一个序列，搜索过程中，每遇到一个没访问过的点就将它上面的**权值**加入序列末尾。\n\nAlice 希望最终序列的字典序尽可能小，Bob 希望最终序列的字典序尽可能大，并且他们二人都会采取最优策略。现在 Bob 请求你告诉他，最终序列会是什么样。\n\n以下是关于字典序的定义：\n\n- 对于一个长度为 $n$ 的序列 $a$，若 $i>n$，约定 $a_i=-\\infty$。\n- 对于两个序列 $a, b$，我们定义 $a$ 的字典序小于 $b$ 当且仅当存在 $i\\ge 1$，使得 $\\forall 1 \\leq j < i$，$a_j = b_j$，且 $a_i < b_i$。", "inputFormat": "**在本题的部分测试点中，Bob 会把 Alice 在第一步中决定好的 $2\\sim n$ 号结点的父亲告诉你。**\n\n第一行一个整数 $t$，表示子任务编号。特别地，样例的子任务编号为 $0$。\n\n第二行一个正整数 $n$。\n\n第三行 $2n$ 个正整数，表示排列 $a$。\n\n第四行 $(n-1)$ 个整数，若该子任务拥有特殊性质 A，则表示 $2\\sim n$ 号结点的父亲，否则这 $(n-1)$ 个整数都为 $0$。", "outputFormat": "一行，表示最终序列。", "hint": "样例 #1 中，一种可能的最终树，数字为编号，括号内为权值：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gqt4od8n.png)\n### 数据范围\n\n| 子任务 | 分值 | $n$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------:  |\n| $1$ | $10$ | $\\le 4$ |无 |\n| $2$ | $10$ | $\\le 10^5$ |B|\n| $3$ | $30$ | $\\le 10^5$ |A |\n| $4$ | $20$ | $\\le 3000$ |无 |\n| $5$ | $30$ | $\\le 10^5$ |无 |\n\n特殊性质 A：输入中给定一种 Alice 的最优决策中 $2\\sim n$ 号结点的父亲。\n\n特殊性质 B：$a_{n+1}\\sim a_{2n}$ 构成 $1\\sim n$ 的一个排列。 \n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，保证序列 $a$ 是一个 $1\\sim 2n$ 的排列。", "locale": "zh-CN", "translations": {"en": {"title": "「CROI · R2」Summer Wind and Trees", "background": "The glaring sunlight scorched the earth. As Little B walked down the street, a cool breeze blew towards him, rustling the lush green leaves by the roadside.\n\n\"The sound of the summer wind sweeping through the leaves is just like the sound of rain.\"", "description": "Alice and Bob are planting trees while playing a game.\n\nAlice owns nodes $1\\sim n$, and Bob owns nodes $(n+1)\\sim 2n$. The weights of these $2n$ nodes form a **permutation** $a$, where $a_i$ is the weight of node $i$.\n\nFirst, they agree that node $1$ is the root of the tree.\n\nThen, Alice decides the parent for nodes $2\\sim n$, where the parent of node $i$ must be chosen from $1\\sim (i-1)$.\n\nNext, Bob decides the parent for nodes $(n+1)\\sim 2n$, where the parent of node $i$ can be chosen from $0\\sim (i-1)$. Node $0$ is not part of their tree, meaning Bob's nodes do not need to be connected to this tree.\n\nFinally, Alice will perform a depth-first search starting from node $1$. During this process, she maintains a sequence: whenever she encounters an unvisited node, she appends its **weight** to the end of the sequence.\n\nAlice wants the lexicographical order of the final sequence to be as small as possible, while Bob wants it to be as large as possible. Both will adopt optimal strategies. Now Bob asks you to determine what the final sequence will be.\n\nDefinitions related to lexicographical order:\n\n- For a sequence $a$ of length $n$, if $i > n$, we define $a_i = -\\infty$.\n- For two sequences $a$ and $b$, we say $a$ is lexicographically smaller than $b$ if there exists an $i \\ge 1$ such that for all $1 \\leq j < i$, $a_j = b_j$, and $a_i < b_i$.", "inputFormat": "**In some test cases of this problem, Bob will provide you with the parents of nodes $2\\sim n$ determined by Alice in the first step.**\n\nThe first line contains an integer $t$, representing the subtask number. Notably, the sample input has subtask number $0$.\n\nThe second line contains a positive integer $n$.\n\nThe third line contains $2n$ positive integers, representing the permutation $a$.\n\nThe fourth line contains $(n-1)$ integers. If the subtask has Special Property A, these integers represent the parents of nodes $2\\sim n$. Otherwise, all $(n-1)$ integers are $0$.", "outputFormat": "A single line representing the final sequence.", "hint": "In Sample #1, a possible final tree is shown (numbers are node IDs, values in parentheses are weights):\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gqt4od8n.png)\n\n### Data Range\n\n| Subtask | Points | $n$ | Special Properties |\n| :-----: | :----: | :-----: | :----------------: |\n| $1$     | $10$   | $\\le 4$ | None               |\n| $2$     | $10$   | $\\le 10^5$ | B                 |\n| $3$     | $30$   | $\\le 10^5$ | A                 |\n| $4$     | $20$   | $\\le 3000$ | None              |\n| $5$     | $30$   | $\\le 10^5$ | None              |\n\nSpecial Property A: The input provides the parents of nodes $2\\sim n$ under one of Alice's optimal strategies.\n\nSpecial Property B: $a_{n+1}\\sim a_{2n}$ form a permutation of $1\\sim n$.\n\nFor $100\\%$ of the data: $1 \\le n \\le 10^5$, and the sequence $a$ is guaranteed to be a permutation of $1\\sim 2n$.", "locale": "en"}, "zh-CN": {"title": "「CROI · R2」夏风与树", "background": "刺眼的阳光把大地烤得炽热，小 B 走在街上，迎面吹来一阵清风，路旁郁郁葱葱的树叶沙沙地摇晃着。\n\n“夏风扫过树叶的声音就像下雨一样呢。”", "description": "Alice 和 Bob 在种树，同时，他们决定玩一个游戏。\n\nAlice 拥有 $1\\sim n$ 号结点，Bob 拥有 $(n+1)\\sim 2n$ 号结点，这 $2n$ 个结点的权值恰好构成一个**排列** $a$，其中 $a_i$ 为 $i$ 号点上的权值。\n\n首先，他们约定 $1$ 号点为树根。\n\n然后，由 Alice 为 $2\\sim n$ 号点决定父亲，其中 $i$ 号点的父亲只能在 $1\\sim(i-1)$ 中选择。\n\n接下来，由 Bob 为 $(n+1)\\sim 2n$ 号点决定父亲，其中 $i$ 号点的父亲只能在 $0\\sim(i-1)$ 中选择。$0$ 号点不在他们的树上，也就是说，Bob 的结点不一定要与这棵树连通。\n\n最后，Alice 会从 $1$ 号点开始，对这棵树进行深度优先搜索，同时她会维护一个序列，搜索过程中，每遇到一个没访问过的点就将它上面的**权值**加入序列末尾。\n\nAlice 希望最终序列的字典序尽可能小，Bob 希望最终序列的字典序尽可能大，并且他们二人都会采取最优策略。现在 Bob 请求你告诉他，最终序列会是什么样。\n\n以下是关于字典序的定义：\n\n- 对于一个长度为 $n$ 的序列 $a$，若 $i>n$，约定 $a_i=-\\infty$。\n- 对于两个序列 $a, b$，我们定义 $a$ 的字典序小于 $b$ 当且仅当存在 $i\\ge 1$，使得 $\\forall 1 \\leq j < i$，$a_j = b_j$，且 $a_i < b_i$。", "inputFormat": "**在本题的部分测试点中，Bob 会把 Alice 在第一步中决定好的 $2\\sim n$ 号结点的父亲告诉你。**\n\n第一行一个整数 $t$，表示子任务编号。特别地，样例的子任务编号为 $0$。\n\n第二行一个正整数 $n$。\n\n第三行 $2n$ 个正整数，表示排列 $a$。\n\n第四行 $(n-1)$ 个整数，若该子任务拥有特殊性质 A，则表示 $2\\sim n$ 号结点的父亲，否则这 $(n-1)$ 个整数都为 $0$。", "outputFormat": "一行，表示最终序列。", "hint": "样例 #1 中，一种可能的最终树，数字为编号，括号内为权值：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gqt4od8n.png)\n### 数据范围\n\n| 子任务 | 分值 | $n$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------:  |\n| $1$ | $10$ | $\\le 4$ |无 |\n| $2$ | $10$ | $\\le 10^5$ |B|\n| $3$ | $30$ | $\\le 10^5$ |A |\n| $4$ | $20$ | $\\le 3000$ |无 |\n| $5$ | $30$ | $\\le 10^5$ |无 |\n\n特殊性质 A：输入中给定一种 Alice 的最优决策中 $2\\sim n$ 号结点的父亲。\n\n特殊性质 B：$a_{n+1}\\sim a_{2n}$ 构成 $1\\sim n$ 的一个排列。 \n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，保证序列 $a$ 是一个 $1\\sim 2n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P10771", "type": "P", "difficulty": 2, "samples": [["3 1 2\n5 3 4\n7 1 4", "14"], ["5 3 2\n5 6 6 5 1\n0 0 0 0 0", "17"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2021", "NOISG（新加坡）"], "title": "[NOISG 2021 Qualification] Competition", "background": "", "description": "你是一位老师，有 $n$ 个学生，每个学生都有物理成绩 $A_i$ 和生物成绩 $B_i$，你要从这些学生中选出 $a$ 个人参加物理竞赛，$b$ 个人参加生物竞赛。每个学生必须参加一种且只能参加一种竞赛。\n\n定义你所在的学校的实力值为参加物理竞赛的人的物理成绩和参加生物竞赛的人的生物成绩的和。请你求出实力值最大是多少？", "inputFormat": "第 $1$ 行三个整数 $n, a, b$。\n\n第 $2$ 行 $n$ 个整数 $A_i$。\n\n第 $3$ 行 $n$ 个整数 $B_i$。", "outputFormat": "一行一个整数，最大的实力值。", "hint": "#### 样例 1 解释\n\n第一、三个人参加生物竞赛，第二个人参加物理竞赛。\n\n#### 数据范围\n\n**本题采用捆绑测试。**\n\nSubtask0 是样例。\n\nSubtask1（29 pts）$n \\leq 20$。\n\nSubtask2（22 pts）保证所有 $B_i=0$。\n\nSubtask3（49 pts）无特殊限制。\n\n数据保证 $1 \\leq n \\leq 10^5$，$0 \\leq a,b \\leq n$，$a+b=n$，$0 \\leq A_i,B_i \\leq 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2021 Qualification] Competition", "background": "", "description": "你是一位老师，有 $n$ 个学生，每个学生都有物理成绩 $A_i$ 和生物成绩 $B_i$，你要从这些学生中选出 $a$ 个人参加物理竞赛，$b$ 个人参加生物竞赛。每个学生必须参加一种且只能参加一种竞赛。\n\n定义你所在的学校的实力值为参加物理竞赛的人的物理成绩和参加生物竞赛的人的生物成绩的和。请你求出实力值最大是多少？", "inputFormat": "第 $1$ 行三个整数 $n, a, b$。\n\n第 $2$ 行 $n$ 个整数 $A_i$。\n\n第 $3$ 行 $n$ 个整数 $B_i$。", "outputFormat": "一行一个整数，最大的实力值。", "hint": "#### 样例 1 解释\n\n第一、三个人参加生物竞赛，第二个人参加物理竞赛。\n\n#### 数据范围\n\n**本题采用捆绑测试。**\n\nSubtask0 是样例。\n\nSubtask1（29 pts）$n \\leq 20$。\n\nSubtask2（22 pts）保证所有 $B_i=0$。\n\nSubtask3（49 pts）无特殊限制。\n\n数据保证 $1 \\leq n \\leq 10^5$，$0 \\leq a,b \\leq n$，$a+b=n$，$0 \\leq A_i,B_i \\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P10772", "type": "P", "difficulty": 6, "samples": [["5 8\n0 5\n3 11\n1 -8\n4 10\n1 -3\n1 2 5 6 8 -3 -7 11", "1 5\n2 5\n1 1\n4 3\n13 8\n4 9\n8 9\n2 1"], ["3 2\n-1 4\n-2 5\n0 -5\n4 -4", "6 7\n4 5"], ["5 3\n0 2\n2 4\n4 6\n6 8\n8 10\n9 10 10", "9 2\n5 1\n5 1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "NOISG（新加坡）"], "title": "[NOISG 2021 Qualification] Departure", "background": "", "description": "有一个城市，城市里有 $N$ 条路线，每条路线上，在每天午夜会有一辆巴士从起点出发，第二天午夜到达终点。第 $i$ 辆公交车的起点为 $S_i$，终点为 $E_i$。人们可以在巴士路线上的的**任何地方**上车、下车或者换乘。\n\n体育馆是这个城市的中心，坐标为 $0$。在体育馆西边 $x$ 千米的点，坐标为 $-x$，在体育馆东边 $x$ 千米的点，坐标为 $x$。\n\n现在有 $M$ 个人需要从体育馆回家，你需要求出每一个人回家的最短时间。", "inputFormat": "第 $1$ 行两个整数 $N,M$。\n\n第 $2$ 至 $N+1$ 行，每行两个整数 $S_i,E_i$。\n\n第 $N+2$ 行 $M$ 个整数 $P_j$，表示每一个人的家。", "outputFormat": "$M$ 行，每行两个整数 $a,b$（$\\gcd(a,b)=1$），表示这个人最早能在 $\\dfrac{a}{b}$ 天后回家。", "hint": "#### 数据范围\n\n**本题采用捆绑测试。**\n\n以下定义 $\\operatorname{sign}(x) = \\begin{cases}\n1 &\\text{if } x > 0 \\\\\n0 &\\text{if } x = 0 \\\\\n-1 &\\text{if } x < 0 \\\\\n\\end{cases}$。\n\nSubtask0 为样例。\n\nSubtask1（10 pts）$N \\leq 10^4$，$M \\leq 10^3$，$\\operatorname{sign}(S_i)\\neq\\operatorname{sign}(E_i)$。\n\nSubtask2（14 pts）$N \\leq 100$，$M \\leq 10^3$。\n\nSubtask3（12 pts）$N \\leq 10^3$，$M \\leq 10^5$，保证最后答案的值均不大于 $10^3$，保证任意坐标在不超过 $10^2$ 条线路上。\n\nSubtask4（8 pts）$M \\leq 10^3$，保证任意坐标在不超过 $10^4$ 条线路上。\n\nSubtask5（15 pts）$M \\leq 10^4$，保证最后答案的值均不大于 $10^2$。\n\nSubtask6（13 pts）$\\operatorname{sign}(S_i)\\neq\\operatorname{sign}(E_i)$。\n\nSubtask7（28 pts）无特殊限制。\n\n数据保证 $1 \\leq N,M \\leq 10^6$，$-10^6 \\leq S_i,E_i,P_j \\leq 10^6$，$S_i \\neq E_i$，$P_j \\neq 0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2021 Qualification] Departure", "background": "", "description": "有一个城市，城市里有 $N$ 条路线，每条路线上，在每天午夜会有一辆巴士从起点出发，第二天午夜到达终点。第 $i$ 辆公交车的起点为 $S_i$，终点为 $E_i$。人们可以在巴士路线上的的**任何地方**上车、下车或者换乘。\n\n体育馆是这个城市的中心，坐标为 $0$。在体育馆西边 $x$ 千米的点，坐标为 $-x$，在体育馆东边 $x$ 千米的点，坐标为 $x$。\n\n现在有 $M$ 个人需要从体育馆回家，你需要求出每一个人回家的最短时间。", "inputFormat": "第 $1$ 行两个整数 $N,M$。\n\n第 $2$ 至 $N+1$ 行，每行两个整数 $S_i,E_i$。\n\n第 $N+2$ 行 $M$ 个整数 $P_j$，表示每一个人的家。", "outputFormat": "$M$ 行，每行两个整数 $a,b$（$\\gcd(a,b)=1$），表示这个人最早能在 $\\dfrac{a}{b}$ 天后回家。", "hint": "#### 数据范围\n\n**本题采用捆绑测试。**\n\n以下定义 $\\operatorname{sign}(x) = \\begin{cases}\n1 &\\text{if } x > 0 \\\\\n0 &\\text{if } x = 0 \\\\\n-1 &\\text{if } x < 0 \\\\\n\\end{cases}$。\n\nSubtask0 为样例。\n\nSubtask1（10 pts）$N \\leq 10^4$，$M \\leq 10^3$，$\\operatorname{sign}(S_i)\\neq\\operatorname{sign}(E_i)$。\n\nSubtask2（14 pts）$N \\leq 100$，$M \\leq 10^3$。\n\nSubtask3（12 pts）$N \\leq 10^3$，$M \\leq 10^5$，保证最后答案的值均不大于 $10^3$，保证任意坐标在不超过 $10^2$ 条线路上。\n\nSubtask4（8 pts）$M \\leq 10^3$，保证任意坐标在不超过 $10^4$ 条线路上。\n\nSubtask5（15 pts）$M \\leq 10^4$，保证最后答案的值均不大于 $10^2$。\n\nSubtask6（13 pts）$\\operatorname{sign}(S_i)\\neq\\operatorname{sign}(E_i)$。\n\nSubtask7（28 pts）无特殊限制。\n\n数据保证 $1 \\leq N,M \\leq 10^6$，$-10^6 \\leq S_i,E_i,P_j \\leq 10^6$，$S_i \\neq E_i$，$P_j \\neq 0$。", "locale": "zh-CN"}}}
{"pid": "P10773", "type": "P", "difficulty": 6, "samples": [["6 2\n1 2 2 1\n2 3 1 2\n2 4 2 3\n4 5 2 2\n4 6 1 4\n3\n1 3 6\n0 4 5 5\n1 2 5\n", "23\n18"], ["4 3\n1 2 3 0\n2 3 1 0\n3 4 4 0\n1\n1 1 4", "24"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "NOISG（新加坡）"], "title": "[NOISG 2021 Qualification] Truck", "background": null, "description": "有一棵树，每条边有两个权值 $D_i$ 和 $T_i$，给定 $Q$ 次操作。操作分为两种：\n\n`0 x y t`：表示把 $x$ 和 $y$ 之间的一条道路的 $T_i$ 值改为 $t$。\n\n`1 x y`：表示查询 $x$ 到 $y$ 的费用。\n\n定义 $x$ 到 $y$ 的费用为：给定参数 $G$（对每组询问都相同），要求 $x$ 运送一些价值到 $y$，每经过一条权值为 $D_i$ 和 $T_i$ 的边，运送的价值会减少 $T_i$，然后会产生运送的价值的 $D_i$ 倍的费用。在运送到 $y$ 节点时，若运送到的价值刚好为 $G$，产生的费用就为 $x$ 到 $y$ 的费用。\n\n你要对每组询问计算费用。由于费用可能比较大，请输出对 $10^9+7$ 取模的值。", "inputFormat": "第 $1$ 行两个整数 $N,G$。\n\n第 $2 \\sim N$ 行，每行四个整数 $A_i,B_i,D_i,T_i$，表示树上 $A_i$ 和 $B_i$ 有一条边，边权为 $D_i$ 和 $T_i$。\n\n第 $N+1$ 行一个整数 $Q$，表示操作个数。\n\n下面 $Q$ 行，每行一个操作，格式见上。", "outputFormat": "若干行，对于每个查询操作，你需要求出费用。每行一个回答。", "hint": "#### 数据范围\n\n**本题采用捆绑测试。**\n\nSubtask0 为样例。\n\nSubtask1（5 pts）只有查询操作，每个节点度不超过 $2$，且 $T_i=0$。\n\nSubtask2（9 pts）只有查询操作，且 $T_i = 0$。\n\nSubtask3（12 pts）只有查询操作，$D_i=1$，且所有 $T_i$ 相等。\n\nSubtask4（17 pts）只有查询操作，且每个节点度不超过 $2$。\n\nSubtask5（20 pts）每个节点度不超过 $2$。\n\nSubtask6（18 pts）$N,Q \\leq 5000$。\n\nSubtask7（19 pts）无特殊限制。\n\n数据保证 $2 \\leq N \\leq 10^5$，$1 \\leq Q \\leq 10^5$，$1 \\leq A_i,B_i \\leq N$，$1 \\leq D_i,G \\leq 10^9$，$0 \\leq T_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2021 Qualification] Truck", "background": null, "description": "有一棵树，每条边有两个权值 $D_i$ 和 $T_i$，给定 $Q$ 次操作。操作分为两种：\n\n`0 x y t`：表示把 $x$ 和 $y$ 之间的一条道路的 $T_i$ 值改为 $t$。\n\n`1 x y`：表示查询 $x$ 到 $y$ 的费用。\n\n定义 $x$ 到 $y$ 的费用为：给定参数 $G$（对每组询问都相同），要求 $x$ 运送一些价值到 $y$，每经过一条权值为 $D_i$ 和 $T_i$ 的边，运送的价值会减少 $T_i$，然后会产生运送的价值的 $D_i$ 倍的费用。在运送到 $y$ 节点时，若运送到的价值刚好为 $G$，产生的费用就为 $x$ 到 $y$ 的费用。\n\n你要对每组询问计算费用。由于费用可能比较大，请输出对 $10^9+7$ 取模的值。", "inputFormat": "第 $1$ 行两个整数 $N,G$。\n\n第 $2 \\sim N$ 行，每行四个整数 $A_i,B_i,D_i,T_i$，表示树上 $A_i$ 和 $B_i$ 有一条边，边权为 $D_i$ 和 $T_i$。\n\n第 $N+1$ 行一个整数 $Q$，表示操作个数。\n\n下面 $Q$ 行，每行一个操作，格式见上。", "outputFormat": "若干行，对于每个查询操作，你需要求出费用。每行一个回答。", "hint": "#### 数据范围\n\n**本题采用捆绑测试。**\n\nSubtask0 为样例。\n\nSubtask1（5 pts）只有查询操作，每个节点度不超过 $2$，且 $T_i=0$。\n\nSubtask2（9 pts）只有查询操作，且 $T_i = 0$。\n\nSubtask3（12 pts）只有查询操作，$D_i=1$，且所有 $T_i$ 相等。\n\nSubtask4（17 pts）只有查询操作，且每个节点度不超过 $2$。\n\nSubtask5（20 pts）每个节点度不超过 $2$。\n\nSubtask6（18 pts）$N,Q \\leq 5000$。\n\nSubtask7（19 pts）无特殊限制。\n\n数据保证 $2 \\leq N \\leq 10^5$，$1 \\leq Q \\leq 10^5$，$1 \\leq A_i,B_i \\leq N$，$1 \\leq D_i,G \\leq 10^9$，$0 \\leq T_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10774", "type": "P", "difficulty": 0, "samples": [["5 10\n2 1\n3 2\n4 2\n5 1\n5 3\n4 1\n4 3\n5 2\n3 1\n5 4\n5\n1 1\n2 7 0 3\n6 0 7 4 6\n1 2 7\n0 5 0 2 13", "Connected\nConnected\nConnected\nConnected\nDisconnected"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线性基"], "title": "BZOJ3563 DZY Loves Chinese", "background": "", "description": "给定无向图 $G = (V, E)$，$q$ 次询问每次给定一个边集，求删除该边集后图是否连通。保证边集大小不超过 $15$。强制在线。", "inputFormat": "第一行输入两个正整数 $n,m$，表示图的结点数和边数。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$，表示第 $i$ 条边。\n\n接下来输入一行 $Q$，表示询问次数。\n\n接下来 $Q$ 行，每行第一个数为 $k$，而后 $k$ 个正整数 $c_1,c_2,\\dots,c_k$ 表示一个大小为 $k$ 的边集，其中 $c_i$ 为边的序号。\n\n为了强制在线，每次的 $k$ 与 $c_1,c_2,\\dots,c_k$ 均需异或之前回答为连通的个数。", "outputFormat": "对于每个询问输出：连通则为 `Connected`，不连通则为 `Disconnected`（不加引号）。", "hint": "数据保证，$1\\leq n\\leq 10^5$，$1\\leq m\\leq 5\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$，$1\\leq k\\leq 15$。保证图中没有重边与自环。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3563 DZY Loves Chinese", "background": "", "description": "给定无向图 $G = (V, E)$，$q$ 次询问每次给定一个边集，求删除该边集后图是否连通。保证边集大小不超过 $15$。强制在线。", "inputFormat": "第一行输入两个正整数 $n,m$，表示图的结点数和边数。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$，表示第 $i$ 条边。\n\n接下来输入一行 $Q$，表示询问次数。\n\n接下来 $Q$ 行，每行第一个数为 $k$，而后 $k$ 个正整数 $c_1,c_2,\\dots,c_k$ 表示一个大小为 $k$ 的边集，其中 $c_i$ 为边的序号。\n\n为了强制在线，每次的 $k$ 与 $c_1,c_2,\\dots,c_k$ 均需异或之前回答为连通的个数。", "outputFormat": "对于每个询问输出：连通则为 `Connected`，不连通则为 `Disconnected`（不加引号）。", "hint": "数据保证，$1\\leq n\\leq 10^5$，$1\\leq m\\leq 5\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$，$1\\leq k\\leq 15$。保证图中没有重边与自环。", "locale": "zh-CN"}}}
{"pid": "P10775", "type": "P", "difficulty": 7, "samples": [["010 3\n5 9 5\n5 4 0\n8 8 8", "110 121 65\n45 61 25\n144 168 104"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线性代数", "Berlekamp-Massey(BM) 算法"], "title": "BZOJ4162 shlw loves matrix II", "background": "**请注意：本题不是矩阵快速幂模板题。**", "description": "给定矩阵 $M$，计算 $M^n$，并将其中每一个元素对 $10^9+7$ 取模输出。", "inputFormat": "第一行两个整数 $n,k$，其中 $n$ 用二进制表示，可能含有前导零。\n\n接下来 $k$ 行描述了一个 $k\\times k$ 的矩阵 $M$。", "outputFormat": "输出题目描述中要求的矩阵，格式同输入。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 2^{10^4}$，$1\\leq k\\leq 50$，$0\\leq M_{i,j}<10^9+7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4162 shlw loves matrix II", "background": "**请注意：本题不是矩阵快速幂模板题。**", "description": "给定矩阵 $M$，计算 $M^n$，并将其中每一个元素对 $10^9+7$ 取模输出。", "inputFormat": "第一行两个整数 $n,k$，其中 $n$ 用二进制表示，可能含有前导零。\n\n接下来 $k$ 行描述了一个 $k\\times k$ 的矩阵 $M$。", "outputFormat": "输出题目描述中要求的矩阵，格式同输入。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 2^{10^4}$，$1\\leq k\\leq 50$，$0\\leq M_{i,j}<10^9+7$。", "locale": "zh-CN"}}}
{"pid": "P10776", "type": "P", "difficulty": 7, "samples": [["5\n1 2 3 3\n2 2 4 3\n5\n1 3\n1 1\n2 4 4 2\n2 3 1 1\n1 2", "8\n8\n7"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态树 LCT"], "title": "BZOJ3914 Jabby's shadows", "background": "", "description": "给出一棵 $n$ 个点的无根树，树有边权，每个点有两种颜色，最初所有点均为黑色。黑色为 1，白色为 2。每条边有正的权值。\n\n需要维护 $m$ 次操作：\n- `1 u`：询问 $u$ 所在树上同色连通块的直径。若为 0，则输出 QwQ。\n- `2 u v c`：将 $u \\sim v$ 的链覆盖为颜色 $c$。", "inputFormat": "第一行一个正整数 $n$，表示树的结点个数。\n\n第二行 $n-1$ 个正整数 $f_i$，表示结点 $2\\sim n$ 的父结点。\n\n第三行 $n-1$ 个正整数 $e_i$，表示 $2\\sim n$ 号结点到父结点的边的边权。\n\n第四行一个正整数 $m$，表示操作数。接下来 $m$ 行依次表示操作。", "outputFormat": "对于每个 $1$ 操作输出一行作为答案。", "hint": "数据保证，$1\\leq n,m\\leq 100000$，$1\\leq e_i\\leq 10000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3914 Jabby's shadows", "background": "", "description": "给出一棵 $n$ 个点的无根树，树有边权，每个点有两种颜色，最初所有点均为黑色。黑色为 1，白色为 2。每条边有正的权值。\n\n需要维护 $m$ 次操作：\n- `1 u`：询问 $u$ 所在树上同色连通块的直径。若为 0，则输出 QwQ。\n- `2 u v c`：将 $u \\sim v$ 的链覆盖为颜色 $c$。", "inputFormat": "第一行一个正整数 $n$，表示树的结点个数。\n\n第二行 $n-1$ 个正整数 $f_i$，表示结点 $2\\sim n$ 的父结点。\n\n第三行 $n-1$ 个正整数 $e_i$，表示 $2\\sim n$ 号结点到父结点的边的边权。\n\n第四行一个正整数 $m$，表示操作数。接下来 $m$ 行依次表示操作。", "outputFormat": "对于每个 $1$ 操作输出一行作为答案。", "hint": "数据保证，$1\\leq n,m\\leq 100000$，$1\\leq e_i\\leq 10000$。", "locale": "zh-CN"}}}
{"pid": "P10777", "type": "P", "difficulty": 4, "samples": [["6 6\n1 2 1\n2 3 1\n1 3 1\n4 5 1\n5 6 1\n4 6 1\n14\n2\n1 0\n2\n1 1\n1 2\n2\n1 3\n1 4\n1 5\n2\n1 3\n1 4\n1 5\n2", "2\n-1\n1\n0\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["欧拉回路"], "title": "BZOJ3706 反色刷", "background": "", "description": "给定 $n$ 个点，$m$ 条边的无向图，边有黑白两种颜色。现在你可以进行若干次回路反色操作，每次操作从任意点出发，每经过一条边，将其颜色反转，最后回到起点。判断能否通过若干次操作，使这张图所有边都变成白色。\n\n因为某种原因，边的颜色是会改变的，即你相当于需要支持以下两种操作：\n- `1 x` 将第 $x$ 条边反色（边的编号为 $0\\sim m-1$）；\n- `2` 求出最少操作次数；", "inputFormat": "第一行两个整数 $n,m$ 表示这张图有 $n$ 个点 $m$ 条边。\n\n接下来 $m$ 行，每行 $3$ 个整数 $u,v,c$ 表示一条无向边和这条边的颜色，其中 $0$ 为白色，$1$ 为黑色。\n\n接下来一个整数 $q$，表示有 $q$ 个操作。接下来 $q$ 行操作，描述如上。", "outputFormat": "对于每个询问，输出一行一个整数，表示最少需要的反色操作次数。如果没有合法方案输出 $-1$。", "hint": "数据保证，$1\\leq n,m,q \\leq 1000000$，$c < 2$，没有重边自环。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3706 反色刷", "background": "", "description": "给定 $n$ 个点，$m$ 条边的无向图，边有黑白两种颜色。现在你可以进行若干次回路反色操作，每次操作从任意点出发，每经过一条边，将其颜色反转，最后回到起点。判断能否通过若干次操作，使这张图所有边都变成白色。\n\n因为某种原因，边的颜色是会改变的，即你相当于需要支持以下两种操作：\n- `1 x` 将第 $x$ 条边反色（边的编号为 $0\\sim m-1$）；\n- `2` 求出最少操作次数；", "inputFormat": "第一行两个整数 $n,m$ 表示这张图有 $n$ 个点 $m$ 条边。\n\n接下来 $m$ 行，每行 $3$ 个整数 $u,v,c$ 表示一条无向边和这条边的颜色，其中 $0$ 为白色，$1$ 为黑色。\n\n接下来一个整数 $q$，表示有 $q$ 个操作。接下来 $q$ 行操作，描述如上。", "outputFormat": "对于每个询问，输出一行一个整数，表示最少需要的反色操作次数。如果没有合法方案输出 $-1$。", "hint": "数据保证，$1\\leq n,m,q \\leq 1000000$，$c < 2$，没有重边自环。", "locale": "zh-CN"}}}
{"pid": "P10778", "type": "P", "difficulty": 6, "samples": [["5 10\n2 1\n3 2\n4 2\n5 1\n5 3\n4 1\n4 3\n5 2\n3 1\n5 4\n5\n1 1\n3 7 0 3\n4 0 7 4 6\n2 2 7\n4 5 0 2 13", "Connected\nConnected\nConnected\nConnected\nDisconnected"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线性基"], "title": "BZOJ3569 DZY Loves Chinese II", "background": "", "description": "给定无向图 $G = (V, E)$，$q$ 次询问每次给定一个边集，求删除该边集后图是否连通。保证边集大小不超过 $15$。强制在线。", "inputFormat": "第一行输入两个正整数 $n,m$，表示图的结点数和边数。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$，表示第 $i$ 条边。\n\n接下来输入一行 $Q$，表示询问次数。\n\n接下来 $Q$ 行，每行第一个数为 $k$，而后 $k$ 个正整数 $c_1,c_2,\\dots,c_k$ 表示一个大小为 $k$ 的边集，其中 $c_i$ 为边的序号。\n\n为了强制在线，每次的 $c_1,c_2,\\dots,c_k$ 均需异或之前回答为连通的个数。", "outputFormat": "对于每个询问输出：连通则为 `Connected`，不连通则为 `Disconnected`（不加引号）。", "hint": "数据保证，$1\\leq n\\leq 10^5$，$1\\leq m\\leq 5\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$，$1\\leq k\\leq 15$。保证图中没有重边与自环。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3569 DZY Loves Chinese II", "background": "", "description": "给定无向图 $G = (V, E)$，$q$ 次询问每次给定一个边集，求删除该边集后图是否连通。保证边集大小不超过 $15$。强制在线。", "inputFormat": "第一行输入两个正整数 $n,m$，表示图的结点数和边数。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$，表示第 $i$ 条边。\n\n接下来输入一行 $Q$，表示询问次数。\n\n接下来 $Q$ 行，每行第一个数为 $k$，而后 $k$ 个正整数 $c_1,c_2,\\dots,c_k$ 表示一个大小为 $k$ 的边集，其中 $c_i$ 为边的序号。\n\n为了强制在线，每次的 $c_1,c_2,\\dots,c_k$ 均需异或之前回答为连通的个数。", "outputFormat": "对于每个询问输出：连通则为 `Connected`，不连通则为 `Disconnected`（不加引号）。", "hint": "数据保证，$1\\leq n\\leq 10^5$，$1\\leq m\\leq 5\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$，$1\\leq k\\leq 15$。保证图中没有重边与自环。", "locale": "zh-CN"}}}
{"pid": "P10779", "type": "P", "difficulty": 6, "samples": [["5 6\n1 2\n2 3\n3 1\n3 4\n4 5\n3 5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "Tarjan", "双连通分量", "仙人掌", "圆方树", "广义串并联图"], "title": "BZOJ4316 小 C 的独立集", "background": "", "description": "给定简单无向图 $G = (V, E)$，保证每条边属于且仅属于一个简单环，求 $G$ 的最大独立集大小。", "inputFormat": "第一行输入两个正整数 $n,m$，表示图的点数与边数。\n\n接下来 $m$ 行，每行两个正整数 $u,v$，描述一条无向边。", "outputFormat": "输出 $G$ 的最大独立集大小。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 5\\times 10^4$，$1\\leq m\\leq 6\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4316 小 C 的独立集", "background": "", "description": "给定简单无向图 $G = (V, E)$，保证每条边属于且仅属于一个简单环，求 $G$ 的最大独立集大小。", "inputFormat": "第一行输入两个正整数 $n,m$，表示图的点数与边数。\n\n接下来 $m$ 行，每行两个正整数 $u,v$，描述一条无向边。", "outputFormat": "输出 $G$ 的最大独立集大小。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 5\\times 10^4$，$1\\leq m\\leq 6\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P10780", "type": "P", "difficulty": 4, "samples": [["1", "1"], ["5", "35"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["生成函数"], "title": "BZOJ3028 食物", "background": null, "description": "明明这次又要出去旅游了，和上次不同的是，他这次要去宇宙探险！我们暂且不讨论他有多么 NC，他又幻想了他应该带一些什么东西。理所当然的，你当然要帮他计算携带 $n$ 件物品的方案数。\n\n他这次又准备带一些受欢迎的食物，如：蜜桃多啦，鸡块啦，承德汉堡等等。\n\n当然，他又有一些稀奇古怪的限制：\n\n每种食物的限制如下：\n- 承德汉堡：偶数个；\n- 可乐：$0$ 个或 $1$ 个；\n- 鸡腿：$0$ 个，$1$ 个或 $2$ 个；\n- 蜜桃多：奇数个；\n- 鸡块：$4$ 的倍数个；\n- 包子：$0$ 个，$1$ 个，$2$ 个或 $3$ 个；\n- 土豆片炒肉：不超过一个；\n- 面包：$3$ 的倍数个；\n\n注意，这里我们懒得考虑明明对于带的食物该怎么搭配着吃，也认为每种食物都是以『个』为单位（反正是幻想嘛），只要总数加起来是 $n$ 就算一种方案。因此，对于给出的 $n$，你需要计算出方案数，并对 $10007$ 取模。", "inputFormat": "一个整数 $n$，表示总数。", "outputFormat": "一个整数，表示方案数模 $10007$。", "hint": "- 对于 $40\\%$ 的数据，满足 $1\\leq n\\leq 10^5$；\n- 对于所有数据，$1\\leq n\\leq 10^{500}$；", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3028 食物", "background": null, "description": "明明这次又要出去旅游了，和上次不同的是，他这次要去宇宙探险！我们暂且不讨论他有多么 NC，他又幻想了他应该带一些什么东西。理所当然的，你当然要帮他计算携带 $n$ 件物品的方案数。\n\n他这次又准备带一些受欢迎的食物，如：蜜桃多啦，鸡块啦，承德汉堡等等。\n\n当然，他又有一些稀奇古怪的限制：\n\n每种食物的限制如下：\n- 承德汉堡：偶数个；\n- 可乐：$0$ 个或 $1$ 个；\n- 鸡腿：$0$ 个，$1$ 个或 $2$ 个；\n- 蜜桃多：奇数个；\n- 鸡块：$4$ 的倍数个；\n- 包子：$0$ 个，$1$ 个，$2$ 个或 $3$ 个；\n- 土豆片炒肉：不超过一个；\n- 面包：$3$ 的倍数个；\n\n注意，这里我们懒得考虑明明对于带的食物该怎么搭配着吃，也认为每种食物都是以『个』为单位（反正是幻想嘛），只要总数加起来是 $n$ 就算一种方案。因此，对于给出的 $n$，你需要计算出方案数，并对 $10007$ 取模。", "inputFormat": "一个整数 $n$，表示总数。", "outputFormat": "一个整数，表示方案数模 $10007$。", "hint": "- 对于 $40\\%$ 的数据，满足 $1\\leq n\\leq 10^5$；\n- 对于所有数据，$1\\leq n\\leq 10^{500}$；", "locale": "zh-CN"}}}
{"pid": "P10781", "type": "P", "difficulty": 2, "samples": [["2\n1 6\n2 7\n", "6.0\n10.5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "数学", "O2优化", "梦熊比赛"], "title": "【MX-J1-T1】『FLA - III』Spectral", "background": "原题链接：<https://oier.team/problems/J1A>。\n\n---\n\n> 没有看到昂星团。", "description": "有一团火，最开始它的温度是 $0$，火焰旁边有 $n$ 个炭块，每块炭都有 $k$ 点能量。\n\n使用 $T_i$ 表示烧掉 $i$ 块炭后火焰的温度，有：\n\n$$T_i = \\begin{cases} 0 & i = 0 \\\\ k+ \\dfrac{T_{i-1}}{i} & i \\neq 0 \\end{cases}$$\n\n火焰能够达到的最高温度是多少？", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，输入一行两个正整数 $n,k$。", "outputFormat": "对于每组测试数据，输出一行一个实数表示火焰能达到的最高温度，四舍五入到小数点后 $1$ 位。", "hint": "**「样例解释 #1」**\n\n对于第一组测试数据，有 $1$ 块炭，未烧炭时火焰温度为 $0$，烧掉 $1$ 块炭后火焰温度为 $6$，答案为 $6.0$。对于第二组测试数据，有 $2$ 块炭，未烧炭时火焰温度为 $0$，烧掉 $1$ 块炭后火焰温度为 $7$，烧掉 $2$ 块炭后火焰温度为 $10.5$，答案为 $10.5$。\n\n**「数据范围」**\n\n|测试点编号|$T \\leq$|$n \\leq $|$k \\leq$|\n|:---:|:---:|:---:|:---:|\n|$1 \\sim 2$|$5$|$2$|$10$|\n|$3 \\sim 4$|$5$|$10^7$|$10^9$|\n|$5$|$10^5$|$10^9$|$10^9$|\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5$，$1 \\leq n,k \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J1-T1】『FLA - III』Spectral", "background": "原题链接：<https://oier.team/problems/J1A>。\n\n---\n\n> 没有看到昂星团。", "description": "有一团火，最开始它的温度是 $0$，火焰旁边有 $n$ 个炭块，每块炭都有 $k$ 点能量。\n\n使用 $T_i$ 表示烧掉 $i$ 块炭后火焰的温度，有：\n\n$$T_i = \\begin{cases} 0 & i = 0 \\\\ k+ \\dfrac{T_{i-1}}{i} & i \\neq 0 \\end{cases}$$\n\n火焰能够达到的最高温度是多少？", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，输入一行两个正整数 $n,k$。", "outputFormat": "对于每组测试数据，输出一行一个实数表示火焰能达到的最高温度，四舍五入到小数点后 $1$ 位。", "hint": "**「样例解释 #1」**\n\n对于第一组测试数据，有 $1$ 块炭，未烧炭时火焰温度为 $0$，烧掉 $1$ 块炭后火焰温度为 $6$，答案为 $6.0$。对于第二组测试数据，有 $2$ 块炭，未烧炭时火焰温度为 $0$，烧掉 $1$ 块炭后火焰温度为 $7$，烧掉 $2$ 块炭后火焰温度为 $10.5$，答案为 $10.5$。\n\n**「数据范围」**\n\n|测试点编号|$T \\leq$|$n \\leq $|$k \\leq$|\n|:---:|:---:|:---:|:---:|\n|$1 \\sim 2$|$5$|$2$|$10$|\n|$3 \\sim 4$|$5$|$10^7$|$10^9$|\n|$5$|$10^5$|$10^9$|$10^9$|\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5$，$1 \\leq n,k \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10782", "type": "P", "difficulty": 2, "samples": [["4\n1 1\n7 3\n23 8\n17 23\n", "1\n3\n-1\n-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "Special Judge", "O2优化", "构造", "梦熊比赛"], "title": "【MX-J1-T2】『FLA - III』Ilumina", "background": "原题链接：<https://oier.team/problems/J1B>。", "description": "定义 $\\lfloor X \\rfloor$ 为最大的小于等于 $X$ 的整数，例如 $\\lfloor 1.99 \\rfloor = 1,\\lfloor 7 \\rfloor = 7$。\n\n有五个正整数 $n,m,a,b,c$，已知 $b=\\left\\lfloor \\frac{a}{n} \\right\\rfloor , c=\\left\\lfloor \\frac{b}{m} \\right\\rfloor$。\n\n给定 $a$ 和 $c$ 的值，求出一个合法的 $b$ 的值，或者报告不存在合法的 $b$ 的值。\n\n**本题使用自定义校验器，如果存在多个合法的 $b$ 的值，输出其中一个即可。**", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，输入一行两个正整数 $a,c$。", "outputFormat": "对于每组数据，输出一行一个整数。如果不存在合法的 $b$ 的值，输出 `-1`；否则输出一个合法的 $b$ 的值。\n\n**本题使用自定义校验器，如果存在多个合法的 $b$ 的值，输出其中一个即可。**", "hint": "**「样例解释 #1」**\n\n对于第一组测试数据，取 $n=1,m=1$ 时可以得到 $b=1$。\n\n对于第二组测试数据，取 $n=2,m=1$ 时可以得到 $b=3$。\n\n对于第三、第四组测试数据，可以证明不存在合法的 $b$ 的值。\n\n**「数据范围」**\n\n|测试点编号|$a,c \\leq$|特殊性质|\n|:-:|:-:|:-:|\n|$1 \\sim 3$|$10$|无|\n|$4 \\sim 6$|$10^3$|无|\n|$7 \\sim 8$|$10^{18}$|有|\n|$9 \\sim 10$|$10^{18}$|无|\n\n特殊性质：保证对于每组给定的 $a,c$ 一定存在合法的 $b$ 的值。\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5$，$1 \\leq a,c \\leq 10^{18}$。\n\n2024 年 7 月 15 日：添加了 7 组 hack 数据置于 Subtask #1。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J1-T2】『FLA - III』Ilumina", "background": "原题链接：<https://oier.team/problems/J1B>。", "description": "定义 $\\lfloor X \\rfloor$ 为最大的小于等于 $X$ 的整数，例如 $\\lfloor 1.99 \\rfloor = 1,\\lfloor 7 \\rfloor = 7$。\n\n有五个正整数 $n,m,a,b,c$，已知 $b=\\left\\lfloor \\frac{a}{n} \\right\\rfloor , c=\\left\\lfloor \\frac{b}{m} \\right\\rfloor$。\n\n给定 $a$ 和 $c$ 的值，求出一个合法的 $b$ 的值，或者报告不存在合法的 $b$ 的值。\n\n**本题使用自定义校验器，如果存在多个合法的 $b$ 的值，输出其中一个即可。**", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，输入一行两个正整数 $a,c$。", "outputFormat": "对于每组数据，输出一行一个整数。如果不存在合法的 $b$ 的值，输出 `-1`；否则输出一个合法的 $b$ 的值。\n\n**本题使用自定义校验器，如果存在多个合法的 $b$ 的值，输出其中一个即可。**", "hint": "**「样例解释 #1」**\n\n对于第一组测试数据，取 $n=1,m=1$ 时可以得到 $b=1$。\n\n对于第二组测试数据，取 $n=2,m=1$ 时可以得到 $b=3$。\n\n对于第三、第四组测试数据，可以证明不存在合法的 $b$ 的值。\n\n**「数据范围」**\n\n|测试点编号|$a,c \\leq$|特殊性质|\n|:-:|:-:|:-:|\n|$1 \\sim 3$|$10$|无|\n|$4 \\sim 6$|$10^3$|无|\n|$7 \\sim 8$|$10^{18}$|有|\n|$9 \\sim 10$|$10^{18}$|无|\n\n特殊性质：保证对于每组给定的 $a,c$ 一定存在合法的 $b$ 的值。\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5$，$1 \\leq a,c \\leq 10^{18}$。\n\n2024 年 7 月 15 日：添加了 7 组 hack 数据置于 Subtask #1。", "locale": "zh-CN"}}}
{"pid": "P10783", "type": "P", "difficulty": 4, "samples": [["3 3\n1 1 1 1 1 1 1\n3 4 2\n5 4 6\n3 2 2", "2\n7\n3"], ["4 5\n3 4 10 7 1 6 10 6 16 5 3 16 6 2 9\n1 4 6\n4 2 1\n1 14 5\n6 13 3\n11 15 2\n", "104\n11\n74\n51\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "图论", "O2优化", "枚举", "树形 DP", "树论", "梦熊比赛"], "title": "【MX-J1-T3】『FLA - III』Anxiety", "background": "原题链接：<https://oier.team/problems/J1C>。\n\n---\n\nI came. I saw. I had anxiety. I left.", "description": "给定一棵拥有 $2^n-1$ 个节点的二叉树，节点 $i$ 的权值为 $w_i$，节点 $1$ 为根节点。对于所有非根节点 $i$ 都有一条双向边连接节点 $i$ 和节点 $\\left\\lfloor \\frac{i}{2} \\right\\rfloor$。请注意 $\\left\\lfloor X \\right\\rfloor$ 表示不大于 $X$ 的最大整数。\n\n定义节点 $u,v$ 的距离为从节点 $u$ 到节点 $v$ 最少需要经过的边数。给定 $m$ 组询问，第 $i$ 组询问给定三个正整数 $x_i,y_i,k_i$，你需要输出树上与 $x_i,y_i$ 两个节点的距离都不超过 $k_i$ 的节点的权值之和。", "inputFormat": "第一行输入两个正整数 $n,m$。\n\n第二行输入 $2^n-1$ 个正整数，第 $i$ 个正整数为 $w_i$。\n\n接下来 $m$ 行，第 $i$ 行输入三个正整数 $x_i,y_i,k_i$。", "outputFormat": "输出 $m$ 行，每行一个整数，第 $i$ 行的整数表示第 $i$ 组询问的答案。", "hint": "**「样例解释 #1」**\n\n![example](https://cdn.luogu.com.cn/upload/image_hosting/1au4l6hm.png)\n\n对于第一组询问，满足条件的节点有 $1,2$，权值和为 $2$。\n\n对于第二组询问，满足条件的节点有 $1,2,3,4,5,6,7$，权值和为 $7$。\n\n对于第三组询问，满足条件的节点有 $1,2,3$，权值和为 $3$。\n\n**「数据范围」**\n\n|测试点编号|$n \\leq$|$m \\leq$|$k_i \\leq$|$w_i \\leq$|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$2$|$5$|$5$|$10$|\n|$2 \\sim 3$|$10$|$1000$|$1000$|$1000$|\n|$4 \\sim 5$|$18$|$2 \\times 10^5$|$5$|$10^9$|\n|$6 \\sim 7$|$18$|$2 \\times 10^5$|$10^9$|$1$|\n|$8 \\sim 10$|$18$|$2 \\times 10^5$|$10^9$|$10^9$|\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 18$，$1 \\leq m \\leq 2 \\times 10^5$，$1 \\leq x_i,y_i \\leq 2^n-1$，$1 \\leq k_i \\leq 10^9$，$1 \\leq w_i \\leq 10^9$，$x_i \\neq y_i$。节点的编号是从 $1$ 到 $2^n-1$ 的整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J1-T3】『FLA - III』Anxiety", "background": "原题链接：<https://oier.team/problems/J1C>。\n\n---\n\nI came. I saw. I had anxiety. I left.", "description": "给定一棵拥有 $2^n-1$ 个节点的二叉树，节点 $i$ 的权值为 $w_i$，节点 $1$ 为根节点。对于所有非根节点 $i$ 都有一条双向边连接节点 $i$ 和节点 $\\left\\lfloor \\frac{i}{2} \\right\\rfloor$。请注意 $\\left\\lfloor X \\right\\rfloor$ 表示不大于 $X$ 的最大整数。\n\n定义节点 $u,v$ 的距离为从节点 $u$ 到节点 $v$ 最少需要经过的边数。给定 $m$ 组询问，第 $i$ 组询问给定三个正整数 $x_i,y_i,k_i$，你需要输出树上与 $x_i,y_i$ 两个节点的距离都不超过 $k_i$ 的节点的权值之和。", "inputFormat": "第一行输入两个正整数 $n,m$。\n\n第二行输入 $2^n-1$ 个正整数，第 $i$ 个正整数为 $w_i$。\n\n接下来 $m$ 行，第 $i$ 行输入三个正整数 $x_i,y_i,k_i$。", "outputFormat": "输出 $m$ 行，每行一个整数，第 $i$ 行的整数表示第 $i$ 组询问的答案。", "hint": "**「样例解释 #1」**\n\n![example](https://cdn.luogu.com.cn/upload/image_hosting/1au4l6hm.png)\n\n对于第一组询问，满足条件的节点有 $1,2$，权值和为 $2$。\n\n对于第二组询问，满足条件的节点有 $1,2,3,4,5,6,7$，权值和为 $7$。\n\n对于第三组询问，满足条件的节点有 $1,2,3$，权值和为 $3$。\n\n**「数据范围」**\n\n|测试点编号|$n \\leq$|$m \\leq$|$k_i \\leq$|$w_i \\leq$|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$2$|$5$|$5$|$10$|\n|$2 \\sim 3$|$10$|$1000$|$1000$|$1000$|\n|$4 \\sim 5$|$18$|$2 \\times 10^5$|$5$|$10^9$|\n|$6 \\sim 7$|$18$|$2 \\times 10^5$|$10^9$|$1$|\n|$8 \\sim 10$|$18$|$2 \\times 10^5$|$10^9$|$10^9$|\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 18$，$1 \\leq m \\leq 2 \\times 10^5$，$1 \\leq x_i,y_i \\leq 2^n-1$，$1 \\leq k_i \\leq 10^9$，$1 \\leq w_i \\leq 10^9$，$x_i \\neq y_i$。节点的编号是从 $1$ 到 $2^n-1$ 的整数。", "locale": "zh-CN"}}}
{"pid": "P10784", "type": "P", "difficulty": 4, "samples": [["2 3 23\n7 18 7\n63 71 2\n77 86\n13 19\n63 71\n", "15\n"], ["4 5 7\n59 65 7\n39 42 1\n43 51 2\n19 33 2\n14 25\n71 81\n6 11\n59 69\n83 92\n", "7\n"], ["4 8 45\n80 94 22\n60 67 2\n35 44 45\n7 14 5\n82 86\n2 3\n58 63\n48 50\n73 80\n25 45\n11 19\n93 94\n", "13\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "二分", "O2优化", "排序", "背包 DP", "前缀和", "双指针 two-pointer", "梦熊比赛"], "title": "【MX-J1-T4】『FLA - III』Wrestle", "background": "原题链接：<https://oier.team/problems/J1D>。\n\n---\n\n在 2022 年末，疫情将西北某不知名知名学校的大多数学生关在家中上网课，安同学还不知道，他和语文老师的对决已然悄无声息地开始了——他每天早读和语文课都直接睡过去了。\n\n安同学习惯起来穿好衣服、面对摄像头睡觉，摄像头只能拍到他的半个肩膀，就算被强制打开也不会暴露他在睡觉的事实，而且从来没有老师强制打开他的摄像头。而这个不凡的早晨，语文老师打开了他的摄像头，现在是早读时间，他在朦胧中被老师的关爱声叫醒，可惜为时已晚，老师已经愤怒。安同学决定假装网络卡顿，平复老师愤怒的心情。\n\n老师，愤怒了！在安同学醒来后的某些时间段，她要呼叫他的真名，其余时间等他应答。与此同时安同学要打造网卡的假象，他可以在某些时间段内检查设备或者呼叫老师，其余时间静止或随机在画面中闪现，他在这些时间段内的行为称为表演。你的任务是帮助安同学在不激怒老师的情况下最大化表演时间。\n\n因为安同学实在是太抽象了，原始题面受他影响变得也很抽象，这里只有形式化题面给你看。", "description": "给定三个正整数 $n,m,k$ 和两组线段。第一组线段有权值，共 $n$ 条，是**红色**的；第二组线段没有权值，共 $m$ 条，是**蓝色**的。这些线段位于同一个数轴。\n\n- 使用 $l,r,w$ 三个正整数表示一条从数轴上第 $l$ 个整点覆盖到第 $r$ 个整点，权值为 $w$ 的红色线段。**保证数轴上任意一个整点至多被红色线段覆盖一次。**\n\n- 使用 $L,R$ 两个正整数表示一条从数轴上第 $L$ 个整点覆盖到第 $R$ 个整点，没有权值的蓝色线段。**保证数轴上任意一个整点至多被蓝色线段覆盖一次。**\n\n如果一条红色线段从第 $l_0$ 个整点覆盖到第 $r_0$ 个整点，一条蓝色线段从第 $L_0$ 个整点覆盖到第 $R_0$ 个整点且 $\\max(l_0,L_0) \\leq \\min(r_0,R_0)$，就认为这两条线段有交集，交集包含从第 $\\max(l_0,L_0)$ 个整点到第 $\\min(r_0,R_0)$ 个整点的全部 $\\min(r_0,R_0)-\\max(l_0,L_0)+1$ 个整点。你可以选择一些蓝色线段，一种合法的选择方案必须符合以下条件：\n\n- 题目给定的每条红色线段至多与你选择的 $1$ 条蓝色线段有交集。\n\n- 所有和**你选择的蓝色线段**有交集的红色线段权值之和不超过 $k$。\n\n选择方案合法时，**你选择的蓝色线段**和**所有红色线段**的交集至多能包含多少个整点？", "inputFormat": "第一行输入三个正整数 $n,m,k$。\n\n接下来 $n$ 行，第 $i$ 行输入三个正整数 $l_i,r_i,w_i$ 表示一条红色线段。\n\n接下来 $m$ 行，第 $i$ 行输入两个正整数 $L_i,R_i$ 表示一条蓝色线段。\n\n**保证数轴上任意一个整点至多被红色线段覆盖一次。保证数轴上任意一个整点至多被蓝色线段覆盖一次。**", "outputFormat": "输出一行一个整数表示答案。", "hint": "**「样例解释 #1」**\n\n![example](https://cdn.luogu.com.cn/upload/image_hosting/0mxbdlcn.png)\n\n如图，选择输入的第 $2$ 条蓝色线段和第 $3$ 条蓝色线段。\n\n第 $2$ 条蓝色线段与第 $1$ 条红色线段有交，交集包含从第 $13$ 个整点到第 $18$ 个整点的所有整点；第 $3$ 条蓝色线段与第 $2$ 条红色线段有交，交集包含从第 $63$ 个整点到第 $71$ 个整点的所有整点。\n\n第 $1$ 条红色线段仅与第 $2$ 条蓝色线段有交，第 $2$ 条红色线段仅与第 $3$ 条蓝色线段有交；和被选择的蓝色线段有交的红色线段权值和为 $9$，方案合法。故答案为 $15$。\n\n**「数据范围」**\n\n**本题采用捆绑测试。**\n\n|Subtask|$n \\leq$|$m \\leq$|$k \\leq$|$l_i,r_i,L_i,R_i \\leq$|分值|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|**#1**|$10$|$10$|$50$|$100$|$20$|\n|**#2**|$200$|$200$|$200$|$10^5$|$30$|\n|**#3**|$5000$|$5000$|$5000$|$10^9$|$30$|\n|**#4**|$2 \\times 10^5$|$5000$|$5000$|$10^9$|$20$|\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq m,k \\leq 5000$，$1 \\leq l_i,r_i,L_i,R_i \\leq 10^9$，$1 \\leq w_i \\leq k$，$l_i < r_i$，$L_i < R_i$。**保证数轴上任意一个整点至多被红色线段覆盖一次。保证数轴上任意一个整点至多被蓝色线段覆盖一次。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J1-T4】『FLA - III』Wrestle", "background": "原题链接：<https://oier.team/problems/J1D>。\n\n---\n\n在 2022 年末，疫情将西北某不知名知名学校的大多数学生关在家中上网课，安同学还不知道，他和语文老师的对决已然悄无声息地开始了——他每天早读和语文课都直接睡过去了。\n\n安同学习惯起来穿好衣服、面对摄像头睡觉，摄像头只能拍到他的半个肩膀，就算被强制打开也不会暴露他在睡觉的事实，而且从来没有老师强制打开他的摄像头。而这个不凡的早晨，语文老师打开了他的摄像头，现在是早读时间，他在朦胧中被老师的关爱声叫醒，可惜为时已晚，老师已经愤怒。安同学决定假装网络卡顿，平复老师愤怒的心情。\n\n老师，愤怒了！在安同学醒来后的某些时间段，她要呼叫他的真名，其余时间等他应答。与此同时安同学要打造网卡的假象，他可以在某些时间段内检查设备或者呼叫老师，其余时间静止或随机在画面中闪现，他在这些时间段内的行为称为表演。你的任务是帮助安同学在不激怒老师的情况下最大化表演时间。\n\n因为安同学实在是太抽象了，原始题面受他影响变得也很抽象，这里只有形式化题面给你看。", "description": "给定三个正整数 $n,m,k$ 和两组线段。第一组线段有权值，共 $n$ 条，是**红色**的；第二组线段没有权值，共 $m$ 条，是**蓝色**的。这些线段位于同一个数轴。\n\n- 使用 $l,r,w$ 三个正整数表示一条从数轴上第 $l$ 个整点覆盖到第 $r$ 个整点，权值为 $w$ 的红色线段。**保证数轴上任意一个整点至多被红色线段覆盖一次。**\n\n- 使用 $L,R$ 两个正整数表示一条从数轴上第 $L$ 个整点覆盖到第 $R$ 个整点，没有权值的蓝色线段。**保证数轴上任意一个整点至多被蓝色线段覆盖一次。**\n\n如果一条红色线段从第 $l_0$ 个整点覆盖到第 $r_0$ 个整点，一条蓝色线段从第 $L_0$ 个整点覆盖到第 $R_0$ 个整点且 $\\max(l_0,L_0) \\leq \\min(r_0,R_0)$，就认为这两条线段有交集，交集包含从第 $\\max(l_0,L_0)$ 个整点到第 $\\min(r_0,R_0)$ 个整点的全部 $\\min(r_0,R_0)-\\max(l_0,L_0)+1$ 个整点。你可以选择一些蓝色线段，一种合法的选择方案必须符合以下条件：\n\n- 题目给定的每条红色线段至多与你选择的 $1$ 条蓝色线段有交集。\n\n- 所有和**你选择的蓝色线段**有交集的红色线段权值之和不超过 $k$。\n\n选择方案合法时，**你选择的蓝色线段**和**所有红色线段**的交集至多能包含多少个整点？", "inputFormat": "第一行输入三个正整数 $n,m,k$。\n\n接下来 $n$ 行，第 $i$ 行输入三个正整数 $l_i,r_i,w_i$ 表示一条红色线段。\n\n接下来 $m$ 行，第 $i$ 行输入两个正整数 $L_i,R_i$ 表示一条蓝色线段。\n\n**保证数轴上任意一个整点至多被红色线段覆盖一次。保证数轴上任意一个整点至多被蓝色线段覆盖一次。**", "outputFormat": "输出一行一个整数表示答案。", "hint": "**「样例解释 #1」**\n\n![example](https://cdn.luogu.com.cn/upload/image_hosting/0mxbdlcn.png)\n\n如图，选择输入的第 $2$ 条蓝色线段和第 $3$ 条蓝色线段。\n\n第 $2$ 条蓝色线段与第 $1$ 条红色线段有交，交集包含从第 $13$ 个整点到第 $18$ 个整点的所有整点；第 $3$ 条蓝色线段与第 $2$ 条红色线段有交，交集包含从第 $63$ 个整点到第 $71$ 个整点的所有整点。\n\n第 $1$ 条红色线段仅与第 $2$ 条蓝色线段有交，第 $2$ 条红色线段仅与第 $3$ 条蓝色线段有交；和被选择的蓝色线段有交的红色线段权值和为 $9$，方案合法。故答案为 $15$。\n\n**「数据范围」**\n\n**本题采用捆绑测试。**\n\n|Subtask|$n \\leq$|$m \\leq$|$k \\leq$|$l_i,r_i,L_i,R_i \\leq$|分值|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|**#1**|$10$|$10$|$50$|$100$|$20$|\n|**#2**|$200$|$200$|$200$|$10^5$|$30$|\n|**#3**|$5000$|$5000$|$5000$|$10^9$|$30$|\n|**#4**|$2 \\times 10^5$|$5000$|$5000$|$10^9$|$20$|\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq m,k \\leq 5000$，$1 \\leq l_i,r_i,L_i,R_i \\leq 10^9$，$1 \\leq w_i \\leq k$，$l_i < r_i$，$L_i < R_i$。**保证数轴上任意一个整点至多被红色线段覆盖一次。保证数轴上任意一个整点至多被蓝色线段覆盖一次。**", "locale": "zh-CN"}}}
{"pid": "P10785", "type": "P", "difficulty": 6, "samples": [["4 4 10\n1 2 3 1 2 3 1 2 4 1 2 3\n1 2 4 2 3 4 1 2 3 2 3 4\n1 1\n1 2\n1 3\n1 4\n2 2\n2 3\n2 4\n3 3\n3 4\n4 4", "Yes\nNo\nNo\nNo\nYes\nYes\nYes\nYes\nYes\nYes"], ["见 set2.in/ans\n这个样例满足测试点 1-3 的约束条件。", ""], ["见 set3.in/ans\n这个样例满足测试点 8 的约束条件。", ""], ["见 set4.in/ans\n这个样例满足测试点 15、16 的约束条件。", ""]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "NOI", "O2优化", "哈希 hashing", "双指针 two-pointer"], "title": "[NOI2024] 集合", "background": "", "description": "小 Y 和小 S 在玩一个游戏。\n\n给定正整数 $m$，定义**基本集合**为大小为 $3$，元素在 $1\\sim m$ 内的集合。例如：给定 $m=4$，则集合 $\\{1,2,3\\}$ 与集合 $\\{2,3,4\\}$ 都是基本集合。\n\n定义**集合序列**为由基本集合构成的序列，例如，$A=[\\{1,2,3\\},\\{2,3,4\\}]$ 是一个集合序列，其中 $A[1]=\\{1,2,3\\}$，$A[2]=\\{2,3,4\\}$ 都是基本集合。\n\n对于一个 $1\\sim m$ 的排列 $p[1],p[2],\\dots,p[m]$ 与集合 $S\\subseteq \\{1,2,\\dots,m\\}$，定义 $f_p(S)$ 为将 $S$ 内每一个元素 $x$ 置换为 $p[x]$ 后所得到的集合，即 $f_p(S)=\\{p[x]|x\\in S\\}$。\n\n对于两个长度为 $k$ 的集合序列 $A,B$，定义 $A$ 和 $B$ **等价**当且仅当存在一个 $1\\sim m$ 的排列 $p$，使得 $A$ 置换排列 $p$ 后得到 $B$，即对于所有 $1\\leq i\\leq k$，$f_p(A[i])=B[i]$。\n\n给定两个长度为 $n$ 的集合序列 $A,B$，有 $q$ 次询问。每次小 S 会询问小 Y，在给定 $l,r$ 的情况下，判断集合序列 $[A[l],A[l+1],\\dots,A[r]]$ 与集合序列 $[B[l],B[l+1],\\dots,B[r]]$ 是否等价。\n\n时光荏苒，小 S 和小 Y 也会散去。而我们和一个人保持连接的方式就是记住，仅此而已。", "inputFormat": "输入的第一行包含三个正整数 $n,m,q$，分别表示集合序列的长度，元素范围和询问次数。\n\n输入的第二行包含 $3n$ 个正整数，第 $3i-2,3i-1,3i$（$1\\leq i\\leq n$）个正整数分别表示 $A[i]$ 的三个元素。保证这三个元素均在 $[1,m]$ 范围内且互不相同。\n\n输入的第三行包含 $3n$ 个正整数，第 $3i-2,3i-1,3i$（$1\\leq i\\leq n$）个正整数分别表示 $B[i]$ 的三个元素。保证这三个元素均在 $[1,m]$ 范围内且互不相同。\n\n接下来 $q$ 行，每行包含两个正整数 $l,r$，表示一次询问。", "outputFormat": "输出 $q$ 行，每行包含一个字符串 $\\tt{Yes}$ 或 $\\tt{No}$，表示对应询问的两个序列是否等价。", "hint": "**【样例 1 解释】**\n\n以下用 $(l,r)$ 表示对 $l,r$ 的询问：\n- 对于询问 $(1,1)$，令排列 $p=[1,2,4,3]$，则 $f_p(A_1)=\\{p[1],p[2],p[3]\\}=\\{1,2,4\\}=B[1]$，因此该询问对应的两个序列等价。\n- 对于询问 $(1,2),(1,3),(1,4)$，由于 $A[1]=A[2]$ 但 $B[1]\\neq B[2]$，因此这些询问对应的两个序列都不等价。\n- 对于询问 $(2,2),(2,3),(2,4),(3,3),(3,4),(4,4)$，令排列 $p=[2,3,4,1]$，则 $f_p(A_2)=\\{p[1],p[2],p[3]\\}=\\{2,3,4\\}=B_2$，$f_p(A_3)=\\{p[1],p[2],p[4]\\}=\\{1,2,3\\}=B_3$，$f_p(A_4)=\\{p[1],p[2],p[3]\\}=\\{2,3,4\\}=B_4$，因此这些询问对应的两个序列都等价。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1\\leq n\\leq 2\\times 10^5$，$3\\leq m\\leq 6\\times 10^5$，$1\\leq q\\leq 10^6$，$1\\leq l\\leq r\\leq n$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | $m\\leq$ | $q\\leq$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $50$ | $4$ | $50$ |\n| $4\\sim 6$ | $50$ | $5$ | $50$ |\n| $7$ | $200$ | $4$ | $200$ |\n| $8$ | $200$ | $5$ | $200$ |\n| $9$ | $200$ | $4$ | $2\\times 10^5$ |\n| $10$ | $200$ | $5$ | $2\\times 10^5$ |\n| $11$ | $2\\times 10^5$ | $4$ | $2\\times 10^5$ |\n| $12$ | $2\\times 10^5$ | $5$ | $2\\times 10^5$ |\n| $13,14$ | $2\\,000$ | $6\\,000$ | $10^3$ |\n| $15,16$ | $2\\,000$ | $6\\,000$ | $10^6$ |\n| $17,18$ | $2\\times 10^4$ | $6\\times 10^4$ | $10^2$ |\n| $19,20$ | $2\\times 10^5$ | $6\\times 10^5$ | $10^6$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2024] 集合", "background": "", "description": "小 Y 和小 S 在玩一个游戏。\n\n给定正整数 $m$，定义**基本集合**为大小为 $3$，元素在 $1\\sim m$ 内的集合。例如：给定 $m=4$，则集合 $\\{1,2,3\\}$ 与集合 $\\{2,3,4\\}$ 都是基本集合。\n\n定义**集合序列**为由基本集合构成的序列，例如，$A=[\\{1,2,3\\},\\{2,3,4\\}]$ 是一个集合序列，其中 $A[1]=\\{1,2,3\\}$，$A[2]=\\{2,3,4\\}$ 都是基本集合。\n\n对于一个 $1\\sim m$ 的排列 $p[1],p[2],\\dots,p[m]$ 与集合 $S\\subseteq \\{1,2,\\dots,m\\}$，定义 $f_p(S)$ 为将 $S$ 内每一个元素 $x$ 置换为 $p[x]$ 后所得到的集合，即 $f_p(S)=\\{p[x]|x\\in S\\}$。\n\n对于两个长度为 $k$ 的集合序列 $A,B$，定义 $A$ 和 $B$ **等价**当且仅当存在一个 $1\\sim m$ 的排列 $p$，使得 $A$ 置换排列 $p$ 后得到 $B$，即对于所有 $1\\leq i\\leq k$，$f_p(A[i])=B[i]$。\n\n给定两个长度为 $n$ 的集合序列 $A,B$，有 $q$ 次询问。每次小 S 会询问小 Y，在给定 $l,r$ 的情况下，判断集合序列 $[A[l],A[l+1],\\dots,A[r]]$ 与集合序列 $[B[l],B[l+1],\\dots,B[r]]$ 是否等价。\n\n时光荏苒，小 S 和小 Y 也会散去。而我们和一个人保持连接的方式就是记住，仅此而已。", "inputFormat": "输入的第一行包含三个正整数 $n,m,q$，分别表示集合序列的长度，元素范围和询问次数。\n\n输入的第二行包含 $3n$ 个正整数，第 $3i-2,3i-1,3i$（$1\\leq i\\leq n$）个正整数分别表示 $A[i]$ 的三个元素。保证这三个元素均在 $[1,m]$ 范围内且互不相同。\n\n输入的第三行包含 $3n$ 个正整数，第 $3i-2,3i-1,3i$（$1\\leq i\\leq n$）个正整数分别表示 $B[i]$ 的三个元素。保证这三个元素均在 $[1,m]$ 范围内且互不相同。\n\n接下来 $q$ 行，每行包含两个正整数 $l,r$，表示一次询问。", "outputFormat": "输出 $q$ 行，每行包含一个字符串 $\\tt{Yes}$ 或 $\\tt{No}$，表示对应询问的两个序列是否等价。", "hint": "**【样例 1 解释】**\n\n以下用 $(l,r)$ 表示对 $l,r$ 的询问：\n- 对于询问 $(1,1)$，令排列 $p=[1,2,4,3]$，则 $f_p(A_1)=\\{p[1],p[2],p[3]\\}=\\{1,2,4\\}=B[1]$，因此该询问对应的两个序列等价。\n- 对于询问 $(1,2),(1,3),(1,4)$，由于 $A[1]=A[2]$ 但 $B[1]\\neq B[2]$，因此这些询问对应的两个序列都不等价。\n- 对于询问 $(2,2),(2,3),(2,4),(3,3),(3,4),(4,4)$，令排列 $p=[2,3,4,1]$，则 $f_p(A_2)=\\{p[1],p[2],p[3]\\}=\\{2,3,4\\}=B_2$，$f_p(A_3)=\\{p[1],p[2],p[4]\\}=\\{1,2,3\\}=B_3$，$f_p(A_4)=\\{p[1],p[2],p[3]\\}=\\{2,3,4\\}=B_4$，因此这些询问对应的两个序列都等价。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1\\leq n\\leq 2\\times 10^5$，$3\\leq m\\leq 6\\times 10^5$，$1\\leq q\\leq 10^6$，$1\\leq l\\leq r\\leq n$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | $m\\leq$ | $q\\leq$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $50$ | $4$ | $50$ |\n| $4\\sim 6$ | $50$ | $5$ | $50$ |\n| $7$ | $200$ | $4$ | $200$ |\n| $8$ | $200$ | $5$ | $200$ |\n| $9$ | $200$ | $4$ | $2\\times 10^5$ |\n| $10$ | $200$ | $5$ | $2\\times 10^5$ |\n| $11$ | $2\\times 10^5$ | $4$ | $2\\times 10^5$ |\n| $12$ | $2\\times 10^5$ | $5$ | $2\\times 10^5$ |\n| $13,14$ | $2\\,000$ | $6\\,000$ | $10^3$ |\n| $15,16$ | $2\\,000$ | $6\\,000$ | $10^6$ |\n| $17,18$ | $2\\times 10^4$ | $6\\times 10^4$ | $10^2$ |\n| $19,20$ | $2\\times 10^5$ | $6\\times 10^5$ | $10^6$ |\n", "locale": "zh-CN"}}}
{"pid": "P10786", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [6000, 6000], "memory": [524288, 524288]}, "tags": ["动态规划 DP", "2024", "NOI", "交互题", "Special Judge", "O2优化"], "title": "[NOI2024] 百万富翁", "background": "**本题仅支持 C++ 语言评测。由于平台限制，使用 C++14 (GCC 9) 提交代码会导致 CE。请使用其他版本的 C++ 提交（推荐 C++14 及以上）。**\n\n与 NOI 要求的提交格式不同，你的程序中**不应该**包含头文件 `richest.h`。同时，你的程序中应当在包含 `vector` 头文件的前提下，包含对以下函数的声明：\n\n```cpp\nstd::vector<int> ask(std::vector<int> a, std::vector<int> b);\n```\n\n除此之外，其余要求与 NOI 要求一致。", "description": "小 Y 的银行有 $N$ 个客户，编号为 $0$ 到 $N-1$。客户 $i$ 有 $W_i$ 元存款，且**客户之间的存款金额互不相同**。\n\n小 P 是小 Y 的深度合作伙伴，他希望知道哪个客户的存款最多。小 P 无法直接获取客户的存款金额，但他可以依次发送若干次**请求**，每次请求包含若干个**查询**，每个查询是一个二元组 $(i,j)$，表示小 P 想知道客户 $i$ 和客户 $j$ 的存款金额哪个更多。如果 $W_i>W_j$，小 Y 会回答 $i$，否则回答 $j$。\n\n小 P 的**请求数** $t$ 和所有请求的**查询**次数总和 $s$ 有上限，他希望你帮他写一个程序，来找到存款最多的客户。", "inputFormat": "选手不需要，也不应该实现 main 函数。\n\n选手应确保提交的程序包含头文件 `richest.h`，可在程序开头加入以下代码实现：\n\n```cpp\n#include \"richest.h\"\n```\n\n选手需要实现以下函数：\n```cpp\nint richest(int N,int T,int S);\n```\n- $N$ 表示客户的数量；\n- $T$ 表示对于当前函数调用，**请求**数 $t$ 不应超过此值；\n- $S$ 表示对于当前函数调用，所有请求的**查询**次数总和 $s$ 不应超过此值；\n- 该函数需要返回存款最多的客户的编号；\n- 对于每个测试点，该函数**会被交互库调用恰好 $10$ 次**；\n\n选手可以通过调用以下函数向交互库发送一次**请求**：\n```cpp\nstd::vector <int> ask(std::vector <int> a, std::vector <int> b);\n```\n- 在调用 `ask` 函数时需要保证传入参数 $a$ 和 $b$ 的长度相同，且其中的每个元素都必须是小于 $N$ 的非负整数，表示该**请求**中的所有**查询**。\n- 该函数会返回一个类型为 `std::vector <int>` 且长度与 $a$ 和 $b$ 相同的变量，设为 $c$，其中 $c[i]$ 表示在客户 $a[i]$ 和 $b[i]$ 中存款较多的客户的编号。\n\n题目保证在规定的**请求**和**查询**次数限制下，交互库运行的时间不超过 $3$ 秒，交互库使用的内存大小固定，且不超过 $256$ MiB。\n\n**试题目录下的 `grader.cpp` 是提供的交互库参考实现，最终测试所用的交互库与该参考实现有所不同，因此选手的解法不应该依赖交互库实现。**\n\n选手可以在本题目录下使用如下命令编译得到可执行程序：\n\n```\ng++ grader.cpp richest.cpp -o richest -O2 -std=c++14 -static\n```\n\n对于编译得到的可执行程序：\n- 可执行文件将从**标准输入**读入以下格式的数据：\n  - 输入的第一行包含四个非负整数 $N,T,S,R$，其中 $R$ 是交互库生成测试数据的随机种子。\n- 输入完成后，交互库将调用 $10$ 次函数 `richest`，用输入的参数生成的测试数据进行测试。`richest` 函数返回后，交互库会输出以下信息：\n  - 输出的前 $10$ 行中，每行首先包含三个整数 $r,t,s$，表示该次执行的结果。其中 $r$ 是 `richest` 函数的返回值，$t$ 和 $s$ 的含义如题目描述中所示，然后包含该次运行的正确性等消息。\n  - 输出的第 $11$ 行包含 $10$ 次运行的总信息。", "outputFormat": "假设可执行文件生成的测试数据为 $N=4$，$W=[101,103,102,100]$，$T=100$，$S=100$，下面是一个正确的交互过程：\n\n::cute-table{tuack}\n\n| 选手程序 | 交互库 | 说明 |\n| :----------: | :----------: | :----------: |\n|  | 调用 `richest(4,100,100)` | 开始测试 |\n| 调用 `ask([0,2],[1,3])` | 返回 $[1,2]$ | $W_0<W_1,W_2>W_3$ |\n| 调用 `ask([0,2,3],[1,1,1])` | 返回 $[1,1,1]$ | $W_0<W_1,W_2<W_1,W_3<W_1$ |\n| 运行结束并返回 $1$ | 向屏幕打印交互结果 | 交互结束，结果正确 |\n\n在这个例子中，$r=1,t=2,s=5$ 满足请求与查询次数的限制。", "hint": "**【下发文件说明】**\n\n在本试题目录下：\n- `grader.cpp` 是提供的交互库参考实现。\n- `richest.h` 是头文件，选手不用关心具体内容。\n- `template_richest.cpp` 是提供的示例代码，选手可在此代码的基础上实现。\n\n选手注意对所有下发文件做好备份，最终评测时只测试本试题目录下的 `richest.cpp`，对该程序以外文件的修改不会影响评测结果。\n\n**【数据范围】**\n\n对于所有测试数据保证：所有 $W_i$ 两两不同。\n\n本题共 $2$ 个测试点，每个测试点的分值和数据范围见下表。\n\n::cute-table{tuack}\n\n| 测试点编号 | 分值 | $N=$ | $T=$ | $S=$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $1\\,000$ | $1$ | $499\\,500$ |\n| $2$ | $85$ | $1\\,000\\,000$ | $20$ | $2\\,000\\,000$ |\n\n**【评分方式】**\n\n注意：\n- 选手不应通过非法方式获取交互库的内部信息，如试图直接读取数组 $W$ 的值，或直接与标准输入、输出流进行交互。此类行为将被视为作弊。\n- **最终的评测交互库与样例交互库的实现不同，且可能是适应性的：在不与 `ask` 此前返回的结果相矛盾的前提下，最终的评测交互库可能会动态调整 $W$ 的值。**\n\n**本题首先会受到和传统相同的限制**。例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 0 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n在每次 `richest` 函数调用中，程序使用的请求次数 $t$ 和所有请求的查询次数总和 $s$ 需在对应限制下，否则将会获得 $0$ 分。\n\n在上述条件基础上：\n- 在测试点 $1$ 中，程序得到满分当且仅当 `ask` 函数调用合法且 `richest` 函数返回的答案正确；\n- 在测试点 $2$ 中，程序得到的分数将按照以下方式计算：\n  - 若 `ask` 函数调用不合法，则获得 $0$ 分；\n  - 若 `ask` 函数调用均合法，设 $\\max t$ 表示多次调用 `richest` 函数所得的 $t$ 的最大值，$\\max s$ 表示 $s$ 的最大值，则程序将获得 $\\lfloor 85 \\cdot f(\\max t) \\cdot g(\\max s)\\rfloor$ 分，其中 $f$ 与 $g$ 的计算方式如下表所示：\n\n::cute-table{tuack}\n  \n| $\\max t$ | $f(\\max t)$ |\n| :----------: | :----------: |\n| $\\max t\\leq 8$ | $1$ |\n| $9\\leq \\max t\\leq 20$ | $1-\\dfrac{1}{4}\\sqrt{\\max t-8}$ |\n\n::cute-table{tuack}\n\n| $\\max s$ | $g(\\max s)$ |\n| :----------: | :----------: |\n| $\\max s\\leq 1\\,099\\,944$ | $1$ |\n| $1\\,099\\,945\\leq \\max s\\leq 1\\,100\\,043$ | $1-\\dfrac{1}{6} \\log_{10} (\\max s-1\\,099\\,943)$ |\n| $1\\,100\\,044\\leq \\max s\\leq 2\\,000\\,000$ | $\\dfrac{2}{3}-\\dfrac{1}{1\\,500}\\sqrt{\\max s-1\\,100\\,043}$|\n\n以下是测试点 $2$ 中，不同的 $t$ 和 $s$ 对得分影响的示例。\n\n::cute-table{tuack}\n\n| $\\max t$ |            $\\max s$            | 测试点 $2$ 的得分 |\n| :------: | :----------------------------: | :---------------: |\n|  $=20$   |       $\\le 1\\,099\\,944$        |       $11$        |\n|  $=19$   |       $\\le 1\\,099\\,944$        |       $14$        |\n|  $=18$   |       $\\le 1\\,099\\,944$        |       $17$        |\n|  $=17$   |       $\\le 1\\,099\\,944$        |       $21$        |\n|  $=16$   |       $\\le 1\\,099\\,944$        |       $24$        |\n|  $=15$   |       $\\le 1\\,099\\,944$        |       $28$        |\n|  $=14$   |       $\\le 1\\,099\\,944$        |       $32$        |\n|  $=13$   |       $\\le 1\\,099\\,944$        |       $37$        |\n|  $=12$   |       $\\le 1\\,099\\,944$        |       $42$        |\n|  $=11$   |       $\\le 1\\,099\\,944$        |       $48$        |\n|  $=10$   |       $\\le 1\\,099\\,944$        |       $54$        |\n|   $=9$   |       $\\le 1\\,099\\,944$        |       $63$        |\n| $\\le 8$  | $\\in [1\\,099\\,974,1\\,099\\,978]$ |       $63$        |\n| $\\le 8$  | $\\in [1\\,099\\,969,1\\,099\\,973]$ |       $64$        |\n| $\\le 8$  | $\\in [1\\,099\\,965,1\\,099\\,968]$ |       $65$        |\n| $\\le 8$  | $\\in [1\\,099\\,962,1\\,099\\,964]$ |       $66$        |\n| $\\le 8$  | $\\in [1\\,099\\,959,1\\,099\\,961]$ |       $67$        |\n| $\\le 8$  | $\\in [1\\,099\\,957,1\\,099\\,958]$ |       $68$        |\n| $\\le 8$  | $\\in [1\\,099\\,955,1\\,099\\,956]$ |       $69$        |\n| $\\le 8$  | $\\in [1\\,099\\,953,1\\,099\\,954]$ |       $70$        |\n| $\\le 8$  |         $=1\\,099\\,952$          |       $71$        |\n| $\\le 8$  |         $=1\\,099\\,951$          |       $72$        |\n| $\\le 8$  | $\\in [1\\,099\\,949,1\\,099\\,950]$ |       $73$        |\n| $\\le 8$  |         $=1\\,099\\,948$          |       $75$        |\n| $\\le 8$  |         $=1\\,099\\,947$          |       $76$        |\n| $\\le 8$  |         $=1\\,099\\,946$          |       $78$        |\n| $\\le 8$  |         $=1\\,099\\,945$          |       $80$        |\n| $\\le 8$  |       $\\le 1\\,099\\,944$        |       $85$        |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2024] 百万富翁", "background": "**本题仅支持 C++ 语言评测。由于平台限制，使用 C++14 (GCC 9) 提交代码会导致 CE。请使用其他版本的 C++ 提交（推荐 C++14 及以上）。**\n\n与 NOI 要求的提交格式不同，你的程序中**不应该**包含头文件 `richest.h`。同时，你的程序中应当在包含 `vector` 头文件的前提下，包含对以下函数的声明：\n\n```cpp\nstd::vector<int> ask(std::vector<int> a, std::vector<int> b);\n```\n\n除此之外，其余要求与 NOI 要求一致。", "description": "小 Y 的银行有 $N$ 个客户，编号为 $0$ 到 $N-1$。客户 $i$ 有 $W_i$ 元存款，且**客户之间的存款金额互不相同**。\n\n小 P 是小 Y 的深度合作伙伴，他希望知道哪个客户的存款最多。小 P 无法直接获取客户的存款金额，但他可以依次发送若干次**请求**，每次请求包含若干个**查询**，每个查询是一个二元组 $(i,j)$，表示小 P 想知道客户 $i$ 和客户 $j$ 的存款金额哪个更多。如果 $W_i>W_j$，小 Y 会回答 $i$，否则回答 $j$。\n\n小 P 的**请求数** $t$ 和所有请求的**查询**次数总和 $s$ 有上限，他希望你帮他写一个程序，来找到存款最多的客户。", "inputFormat": "选手不需要，也不应该实现 main 函数。\n\n选手应确保提交的程序包含头文件 `richest.h`，可在程序开头加入以下代码实现：\n\n```cpp\n#include \"richest.h\"\n```\n\n选手需要实现以下函数：\n```cpp\nint richest(int N,int T,int S);\n```\n- $N$ 表示客户的数量；\n- $T$ 表示对于当前函数调用，**请求**数 $t$ 不应超过此值；\n- $S$ 表示对于当前函数调用，所有请求的**查询**次数总和 $s$ 不应超过此值；\n- 该函数需要返回存款最多的客户的编号；\n- 对于每个测试点，该函数**会被交互库调用恰好 $10$ 次**；\n\n选手可以通过调用以下函数向交互库发送一次**请求**：\n```cpp\nstd::vector <int> ask(std::vector <int> a, std::vector <int> b);\n```\n- 在调用 `ask` 函数时需要保证传入参数 $a$ 和 $b$ 的长度相同，且其中的每个元素都必须是小于 $N$ 的非负整数，表示该**请求**中的所有**查询**。\n- 该函数会返回一个类型为 `std::vector <int>` 且长度与 $a$ 和 $b$ 相同的变量，设为 $c$，其中 $c[i]$ 表示在客户 $a[i]$ 和 $b[i]$ 中存款较多的客户的编号。\n\n题目保证在规定的**请求**和**查询**次数限制下，交互库运行的时间不超过 $3$ 秒，交互库使用的内存大小固定，且不超过 $256$ MiB。\n\n**试题目录下的 `grader.cpp` 是提供的交互库参考实现，最终测试所用的交互库与该参考实现有所不同，因此选手的解法不应该依赖交互库实现。**\n\n选手可以在本题目录下使用如下命令编译得到可执行程序：\n\n```\ng++ grader.cpp richest.cpp -o richest -O2 -std=c++14 -static\n```\n\n对于编译得到的可执行程序：\n- 可执行文件将从**标准输入**读入以下格式的数据：\n  - 输入的第一行包含四个非负整数 $N,T,S,R$，其中 $R$ 是交互库生成测试数据的随机种子。\n- 输入完成后，交互库将调用 $10$ 次函数 `richest`，用输入的参数生成的测试数据进行测试。`richest` 函数返回后，交互库会输出以下信息：\n  - 输出的前 $10$ 行中，每行首先包含三个整数 $r,t,s$，表示该次执行的结果。其中 $r$ 是 `richest` 函数的返回值，$t$ 和 $s$ 的含义如题目描述中所示，然后包含该次运行的正确性等消息。\n  - 输出的第 $11$ 行包含 $10$ 次运行的总信息。", "outputFormat": "假设可执行文件生成的测试数据为 $N=4$，$W=[101,103,102,100]$，$T=100$，$S=100$，下面是一个正确的交互过程：\n\n::cute-table{tuack}\n\n| 选手程序 | 交互库 | 说明 |\n| :----------: | :----------: | :----------: |\n|  | 调用 `richest(4,100,100)` | 开始测试 |\n| 调用 `ask([0,2],[1,3])` | 返回 $[1,2]$ | $W_0<W_1,W_2>W_3$ |\n| 调用 `ask([0,2,3],[1,1,1])` | 返回 $[1,1,1]$ | $W_0<W_1,W_2<W_1,W_3<W_1$ |\n| 运行结束并返回 $1$ | 向屏幕打印交互结果 | 交互结束，结果正确 |\n\n在这个例子中，$r=1,t=2,s=5$ 满足请求与查询次数的限制。", "hint": "**【下发文件说明】**\n\n在本试题目录下：\n- `grader.cpp` 是提供的交互库参考实现。\n- `richest.h` 是头文件，选手不用关心具体内容。\n- `template_richest.cpp` 是提供的示例代码，选手可在此代码的基础上实现。\n\n选手注意对所有下发文件做好备份，最终评测时只测试本试题目录下的 `richest.cpp`，对该程序以外文件的修改不会影响评测结果。\n\n**【数据范围】**\n\n对于所有测试数据保证：所有 $W_i$ 两两不同。\n\n本题共 $2$ 个测试点，每个测试点的分值和数据范围见下表。\n\n::cute-table{tuack}\n\n| 测试点编号 | 分值 | $N=$ | $T=$ | $S=$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $1\\,000$ | $1$ | $499\\,500$ |\n| $2$ | $85$ | $1\\,000\\,000$ | $20$ | $2\\,000\\,000$ |\n\n**【评分方式】**\n\n注意：\n- 选手不应通过非法方式获取交互库的内部信息，如试图直接读取数组 $W$ 的值，或直接与标准输入、输出流进行交互。此类行为将被视为作弊。\n- **最终的评测交互库与样例交互库的实现不同，且可能是适应性的：在不与 `ask` 此前返回的结果相矛盾的前提下，最终的评测交互库可能会动态调整 $W$ 的值。**\n\n**本题首先会受到和传统相同的限制**。例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 0 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n在每次 `richest` 函数调用中，程序使用的请求次数 $t$ 和所有请求的查询次数总和 $s$ 需在对应限制下，否则将会获得 $0$ 分。\n\n在上述条件基础上：\n- 在测试点 $1$ 中，程序得到满分当且仅当 `ask` 函数调用合法且 `richest` 函数返回的答案正确；\n- 在测试点 $2$ 中，程序得到的分数将按照以下方式计算：\n  - 若 `ask` 函数调用不合法，则获得 $0$ 分；\n  - 若 `ask` 函数调用均合法，设 $\\max t$ 表示多次调用 `richest` 函数所得的 $t$ 的最大值，$\\max s$ 表示 $s$ 的最大值，则程序将获得 $\\lfloor 85 \\cdot f(\\max t) \\cdot g(\\max s)\\rfloor$ 分，其中 $f$ 与 $g$ 的计算方式如下表所示：\n\n::cute-table{tuack}\n  \n| $\\max t$ | $f(\\max t)$ |\n| :----------: | :----------: |\n| $\\max t\\leq 8$ | $1$ |\n| $9\\leq \\max t\\leq 20$ | $1-\\dfrac{1}{4}\\sqrt{\\max t-8}$ |\n\n::cute-table{tuack}\n\n| $\\max s$ | $g(\\max s)$ |\n| :----------: | :----------: |\n| $\\max s\\leq 1\\,099\\,944$ | $1$ |\n| $1\\,099\\,945\\leq \\max s\\leq 1\\,100\\,043$ | $1-\\dfrac{1}{6} \\log_{10} (\\max s-1\\,099\\,943)$ |\n| $1\\,100\\,044\\leq \\max s\\leq 2\\,000\\,000$ | $\\dfrac{2}{3}-\\dfrac{1}{1\\,500}\\sqrt{\\max s-1\\,100\\,043}$|\n\n以下是测试点 $2$ 中，不同的 $t$ 和 $s$ 对得分影响的示例。\n\n::cute-table{tuack}\n\n| $\\max t$ |            $\\max s$            | 测试点 $2$ 的得分 |\n| :------: | :----------------------------: | :---------------: |\n|  $=20$   |       $\\le 1\\,099\\,944$        |       $11$        |\n|  $=19$   |       $\\le 1\\,099\\,944$        |       $14$        |\n|  $=18$   |       $\\le 1\\,099\\,944$        |       $17$        |\n|  $=17$   |       $\\le 1\\,099\\,944$        |       $21$        |\n|  $=16$   |       $\\le 1\\,099\\,944$        |       $24$        |\n|  $=15$   |       $\\le 1\\,099\\,944$        |       $28$        |\n|  $=14$   |       $\\le 1\\,099\\,944$        |       $32$        |\n|  $=13$   |       $\\le 1\\,099\\,944$        |       $37$        |\n|  $=12$   |       $\\le 1\\,099\\,944$        |       $42$        |\n|  $=11$   |       $\\le 1\\,099\\,944$        |       $48$        |\n|  $=10$   |       $\\le 1\\,099\\,944$        |       $54$        |\n|   $=9$   |       $\\le 1\\,099\\,944$        |       $63$        |\n| $\\le 8$  | $\\in [1\\,099\\,974,1\\,099\\,978]$ |       $63$        |\n| $\\le 8$  | $\\in [1\\,099\\,969,1\\,099\\,973]$ |       $64$        |\n| $\\le 8$  | $\\in [1\\,099\\,965,1\\,099\\,968]$ |       $65$        |\n| $\\le 8$  | $\\in [1\\,099\\,962,1\\,099\\,964]$ |       $66$        |\n| $\\le 8$  | $\\in [1\\,099\\,959,1\\,099\\,961]$ |       $67$        |\n| $\\le 8$  | $\\in [1\\,099\\,957,1\\,099\\,958]$ |       $68$        |\n| $\\le 8$  | $\\in [1\\,099\\,955,1\\,099\\,956]$ |       $69$        |\n| $\\le 8$  | $\\in [1\\,099\\,953,1\\,099\\,954]$ |       $70$        |\n| $\\le 8$  |         $=1\\,099\\,952$          |       $71$        |\n| $\\le 8$  |         $=1\\,099\\,951$          |       $72$        |\n| $\\le 8$  | $\\in [1\\,099\\,949,1\\,099\\,950]$ |       $73$        |\n| $\\le 8$  |         $=1\\,099\\,948$          |       $75$        |\n| $\\le 8$  |         $=1\\,099\\,947$          |       $76$        |\n| $\\le 8$  |         $=1\\,099\\,946$          |       $78$        |\n| $\\le 8$  |         $=1\\,099\\,945$          |       $80$        |\n| $\\le 8$  |       $\\le 1\\,099\\,944$        |       $85$        |", "locale": "zh-CN"}}}
{"pid": "P10787", "type": "P", "difficulty": 7, "samples": [["0 4 2\n1 2\n2 3\n3 4\n3 2\n1 4", "001"], ["0 6 8\n5 1\n2 3\n1 2\n5 6\n4 3\n4 3\n5 1\n6 3\n5 4\n1 4\n5 2\n3 6\n6 2", "10101"], ["见 tree3.in/tree3.ans\n这个样例满足测试点 1-3 的约束条件。", ""], ["见 tree4.in/tree4.ans\n这个样例满足测试点 4-6 的约束条件。", ""], ["见 tree5.in/tree5.ans\n这个样例满足测试点 7,8 的约束条件。", ""], ["见 tree6.in/tree6.ans\n这个样例满足测试点 9,10 的约束条件。", ""]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["图论", "贪心", "倍增", "并查集", "2024", "NOI", "O2优化"], "title": "[NOI2024] 树的定向", "background": "由于评测机性能差异，原题时限为 3s，洛谷上时限为 6s。", "description": "给定一棵含有 $n$ 个顶点的树，顶点从 $1$ 到 $n$ 编号，树上第 $i(1\\leq i\\leq n-1)$ 条边连接顶点 $u_i$ 和 $v_i$。\n\n现在，我们想要给树的每条边一个定向。任何一个定向都可以用一个长度为 $n-1$ 的字符串 $S=s_1s_2\\ldots s_{n-1}$ 来描述。其中 $s_i=0$ 代表第 $i$ 条边定向为 $u_i \\to v_i$，否则 $s_i=1$ 代表第 $i$ 条边定向为 $v_i\\to u_i$。\n\n给定 $m$ 个顶点对 $(a_i,b_i)$，其中 $1\\leq a_i,b_i \\leq n$ 且 $a_i\\neq b_i$。\n\n一个**完美定向**定义为：在此定向下，对于任意 $1\\leq i\\leq m$，$a_i$ ****不能到达**** $b_i$。\n\n试求在所有完美定向中，所对应的字符串字典序最小的定向。**数据保证存在至少一个完美定向**。\n\n定义字符串 $S=s_1s_2\\ldots s_{n-1}$ 的字典序小于 $T=t_1t_2\\ldots t_{n-1}$ 若存在一个下标 $k$ 使得 $s_1=t_1, s_2=t_2, \\ldots, s_{k-1}=t_{k-1}$ 且 $s_k < t_k$。\n", "inputFormat": "输入的第一行包含三个非负整数 $c,n,m$，分别表示测试点编号，树的点数，顶点对的个数。其中 $c=0$ 表示该测试点为样例。\n\n接下来 $n-1$ 行，每行包含两个正整数 $u_i,v_i$ 表示树的一条边。保证 $1\\leq u_i,v_i\\leq n$ 且这 $n-1$ 条边构成了一棵树。\n\n接下来 $m$ 行，每行包含两个正整数 $a_i,b_i$。保证 $1\\leq a_i,b_i \\leq n$ 且 $a_i\\neq b_i$。", "outputFormat": "输出一行包含一个字符串 $S=s_1s_2\\ldots s_{n-1}$，表示字典序最小的完美定向所对应的 $01$ 字符串。", "hint": "**【样例 1 解释】**\n\n在该样例中，若 $S=000$，则该定向中 $1$ 能到达 $4$（存在路径 $1\\to 2\\to 3\\to 4$），因而不是完美定向。若 $S=001$，则该定向中 $3$ 不能到达 $2$，$1$ 不能到达 $4$，因面是完美定向。故答案为 $001$。\n\n**【样例 2 解释】**\n\n在该样例中，一组完美定向必定满足 $4$ 不能到达 $3$，$5$ 不能到达 $1$。故 $s_1=s_5=1$。若 $s_2=s_3=0$，则存在路径 $1\\to 2\\to 3\\to 4$，故 $1$ 可到达 $4$。故其不是完美定向。因此，所有完美定向必定满足 $S$ 的字典序不小于 $10101$。且容易验证 $S=10101$ 时，对应的定向是完美定向。\n\n**【数据范围】**\n\n对于所有测试数据保证 $2\\leq n\\leq 5\\times 10^5$，$1\\leq m\\leq 5\\times 10^5$，$1\\leq u_i,v_i\\leq n$ 且所有的边构成了一棵树，$1\\leq a_i,b_i \\leq n$ 且 $a_i\\neq b_i$。\n\n数据保证存在至少一个完美定向。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n$ | $m$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $\\leq 15$ | $\\leq 50$ | 无 |\n| $4\\sim 6$ | $\\leq 300$ | $\\leq 300$ | 无 |\n| $7,8$ | $\\leq 400$ | $=(n-1)(n-2)$ | A |\n| $9,10$ | $\\leq 2\\,000$ | $\\leq 2\\,000$ | B |\n| $11\\sim 14$ | $\\leq 2\\,000$ | $\\leq 2\\,000$ | 无 |\n| $15,16$ | $\\leq 10^5$ | $\\leq 10^5$ | B |\n| $17,18$ | $\\leq 10^5$ | $\\leq 10^5$ | 无 |\n| $19\\sim 21$ | $\\leq 2\\times 10^5$ | $\\leq 2\\times 10^5$ | 无 |\n| $22\\sim 25$ | $\\leq 5\\times 10^5$ | $\\leq 5\\times 10^5$ | 无 |\n\n- 特殊性质 A：保证 $(a,b)$ 出现在 $(a_i,b_i)$ 中当且仅当 $a\\neq b$ 且 $a,b$ 在树上不相邻。\n- 特殊性质 B：保证树上编号为 $1$ 的顶点与其他每个顶点均相邻。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2024] 树的定向", "background": "由于评测机性能差异，原题时限为 3s，洛谷上时限为 6s。", "description": "给定一棵含有 $n$ 个顶点的树，顶点从 $1$ 到 $n$ 编号，树上第 $i(1\\leq i\\leq n-1)$ 条边连接顶点 $u_i$ 和 $v_i$。\n\n现在，我们想要给树的每条边一个定向。任何一个定向都可以用一个长度为 $n-1$ 的字符串 $S=s_1s_2\\ldots s_{n-1}$ 来描述。其中 $s_i=0$ 代表第 $i$ 条边定向为 $u_i \\to v_i$，否则 $s_i=1$ 代表第 $i$ 条边定向为 $v_i\\to u_i$。\n\n给定 $m$ 个顶点对 $(a_i,b_i)$，其中 $1\\leq a_i,b_i \\leq n$ 且 $a_i\\neq b_i$。\n\n一个**完美定向**定义为：在此定向下，对于任意 $1\\leq i\\leq m$，$a_i$ ****不能到达**** $b_i$。\n\n试求在所有完美定向中，所对应的字符串字典序最小的定向。**数据保证存在至少一个完美定向**。\n\n定义字符串 $S=s_1s_2\\ldots s_{n-1}$ 的字典序小于 $T=t_1t_2\\ldots t_{n-1}$ 若存在一个下标 $k$ 使得 $s_1=t_1, s_2=t_2, \\ldots, s_{k-1}=t_{k-1}$ 且 $s_k < t_k$。\n", "inputFormat": "输入的第一行包含三个非负整数 $c,n,m$，分别表示测试点编号，树的点数，顶点对的个数。其中 $c=0$ 表示该测试点为样例。\n\n接下来 $n-1$ 行，每行包含两个正整数 $u_i,v_i$ 表示树的一条边。保证 $1\\leq u_i,v_i\\leq n$ 且这 $n-1$ 条边构成了一棵树。\n\n接下来 $m$ 行，每行包含两个正整数 $a_i,b_i$。保证 $1\\leq a_i,b_i \\leq n$ 且 $a_i\\neq b_i$。", "outputFormat": "输出一行包含一个字符串 $S=s_1s_2\\ldots s_{n-1}$，表示字典序最小的完美定向所对应的 $01$ 字符串。", "hint": "**【样例 1 解释】**\n\n在该样例中，若 $S=000$，则该定向中 $1$ 能到达 $4$（存在路径 $1\\to 2\\to 3\\to 4$），因而不是完美定向。若 $S=001$，则该定向中 $3$ 不能到达 $2$，$1$ 不能到达 $4$，因面是完美定向。故答案为 $001$。\n\n**【样例 2 解释】**\n\n在该样例中，一组完美定向必定满足 $4$ 不能到达 $3$，$5$ 不能到达 $1$。故 $s_1=s_5=1$。若 $s_2=s_3=0$，则存在路径 $1\\to 2\\to 3\\to 4$，故 $1$ 可到达 $4$。故其不是完美定向。因此，所有完美定向必定满足 $S$ 的字典序不小于 $10101$。且容易验证 $S=10101$ 时，对应的定向是完美定向。\n\n**【数据范围】**\n\n对于所有测试数据保证 $2\\leq n\\leq 5\\times 10^5$，$1\\leq m\\leq 5\\times 10^5$，$1\\leq u_i,v_i\\leq n$ 且所有的边构成了一棵树，$1\\leq a_i,b_i \\leq n$ 且 $a_i\\neq b_i$。\n\n数据保证存在至少一个完美定向。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n$ | $m$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $\\leq 15$ | $\\leq 50$ | 无 |\n| $4\\sim 6$ | $\\leq 300$ | $\\leq 300$ | 无 |\n| $7,8$ | $\\leq 400$ | $=(n-1)(n-2)$ | A |\n| $9,10$ | $\\leq 2\\,000$ | $\\leq 2\\,000$ | B |\n| $11\\sim 14$ | $\\leq 2\\,000$ | $\\leq 2\\,000$ | 无 |\n| $15,16$ | $\\leq 10^5$ | $\\leq 10^5$ | B |\n| $17,18$ | $\\leq 10^5$ | $\\leq 10^5$ | 无 |\n| $19\\sim 21$ | $\\leq 2\\times 10^5$ | $\\leq 2\\times 10^5$ | 无 |\n| $22\\sim 25$ | $\\leq 5\\times 10^5$ | $\\leq 5\\times 10^5$ | 无 |\n\n- 特殊性质 A：保证 $(a,b)$ 出现在 $(a_i,b_i)$ 中当且仅当 $a\\neq b$ 且 $a,b$ 在树上不相邻。\n- 特殊性质 B：保证树上编号为 $1$ 的顶点与其他每个顶点均相邻。", "locale": "zh-CN"}}}
{"pid": "P10788", "type": "P", "difficulty": 7, "samples": [["10 10", "16"], ["见 fraction2.in/ans\n这个样例满足测试点 4-6 的约束条件", ""], ["见 fraction3.in/ans\n这个样例满足测试点 11-14 的约束条件", ""], ["见 fraction4.in/ans\n这个样例满足测试点 15-17 的约束条件", ""]], "limits": {"time": [9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "NOI", "O2优化", "深度优先搜索 DFS"], "title": "[NOI2024] 分数", "background": "由于评测机性能差异，原题时限为 6s，洛谷时限为 9s。", "description": "小 Y 和小 C 在玩一个游戏。\n\n定义正分数为分子、分母都为正整数的既约分数。\n\n定义**完美正分数集合** $S$ 为满足以下五条性质的正分数集合：\n- $\\dfrac{1}{2}\\in S$；\n- 对于 $\\dfrac{1}{2}<x<2$，$x\\not \\in S$；\n- 对于所有 $x\\in S$，$\\dfrac{1}{x}\\in S$；\n- 对于所有 $x\\in S$，$x+2 \\in S$；\n- 对于所有 $x\\in S$ 且 $x>2$，$x-2 \\in S$；\n\n可以证明，上述五条性质确定了唯一的完美正分数集合 $S$。\n\n所有完美正分数集合 $S$ 中的正分数被称为**完美正分数**。记 $f(i,j)$ 表示 $\\dfrac{i}{j}$ 是否为完美正分数，即 $f(i,j)=1$ 当且仅当 $i$ 与 $j$ 互素且 $\\dfrac{i}{j} \\in S$，否则 $f(i,j)=0$。\n\n小 C 问小 Y：给定 $n,m$，求所有分子不超过 $n$，分母不超过 $m$ 的完美正分数的个数，即求 $\\sum_{i=1}^n \\sum_{j=1}^m f(i,j)$。\n\n时光走过，小 C 和小 Y 会再遇见。回首往事，大家都过上了各自想要的生活。", "inputFormat": "输入的第一行包含两个正整数 $n$ 和 $m$，分别表示分子和分母的范围。", "outputFormat": "输出一行包含一个非负整数，表示对应的答案。", "hint": "**【样例 1 解释】**\n\n可以证明，分子分母均不超过 $10$ 的完美正分数共有 $16$ 个，其中小于 $1$ 的 $8$ 个如下：\n- $\\dfrac{1}{2},\\dfrac{1}{4},\\dfrac{1}{6},\\dfrac{1}{8},\\dfrac{1}{10},\\dfrac{2}{5},\\dfrac{2}{9},\\dfrac{4}{9}$。\n\n大于 $1$ 的 $8$ 个完美正分数分别为上述 $8$ 个小于 $1$ 的完美正分数的倒数。\n- 可以按照如下方式验证 $\\dfrac{2}{9}$ 是否为完美正分数：因为 $\\dfrac{1}{2}\\in S$，$\\dfrac{1}{2}+2=\\dfrac{5}{2}\\in S$，$\\dfrac{5}{2}+2=\\dfrac{9}{2}\\in S$，$\\dfrac{1}{\\dfrac{9}{2}}=\\dfrac{2}{9}\\in S$；\n- 可以按照如下方式验证 $\\dfrac{3}{7}$ 是否为完美正分数：假设 $\\dfrac{3}{7}$ 是完美正分数，则 $\\dfrac{1}{\\dfrac{3}{7}}=\\dfrac{7}{3}\\in S$，$\\dfrac{7}{3}-2=\\dfrac{1}{3}\\in S$，$\\dfrac{1}{\\dfrac{1}{3}}=3\\in S$，$3-2=1\\in S$，与第二条性质矛盾，因此 $\\dfrac{3}{7}$ 不是完美正分数\n\n**【数据范围】**\n\n对于所有测试数据保证：$2\\leq n,m\\leq 3\\times 10^7$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | $m\\leq$ |\n| :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $10^2$ | $10^2$ |\n| $4\\sim 6$ | $10^3$ | $10^3$ |\n| $7\\sim 10$ | $8\\,000$ | $8\\,000$ |\n| $11\\sim 14$ | $10^5$ | $10^5$ |\n| $15\\sim 17$ | $10^6$ | $10^6$ |\n| $18$ | $8\\times 10^6$ | $8\\times 10^6$ |\n| $19$ | ^ | $3\\times 10^7$ |\n| $20$ | $3\\times 10^7$ | ^ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2024] 分数", "background": "由于评测机性能差异，原题时限为 6s，洛谷时限为 9s。", "description": "小 Y 和小 C 在玩一个游戏。\n\n定义正分数为分子、分母都为正整数的既约分数。\n\n定义**完美正分数集合** $S$ 为满足以下五条性质的正分数集合：\n- $\\dfrac{1}{2}\\in S$；\n- 对于 $\\dfrac{1}{2}<x<2$，$x\\not \\in S$；\n- 对于所有 $x\\in S$，$\\dfrac{1}{x}\\in S$；\n- 对于所有 $x\\in S$，$x+2 \\in S$；\n- 对于所有 $x\\in S$ 且 $x>2$，$x-2 \\in S$；\n\n可以证明，上述五条性质确定了唯一的完美正分数集合 $S$。\n\n所有完美正分数集合 $S$ 中的正分数被称为**完美正分数**。记 $f(i,j)$ 表示 $\\dfrac{i}{j}$ 是否为完美正分数，即 $f(i,j)=1$ 当且仅当 $i$ 与 $j$ 互素且 $\\dfrac{i}{j} \\in S$，否则 $f(i,j)=0$。\n\n小 C 问小 Y：给定 $n,m$，求所有分子不超过 $n$，分母不超过 $m$ 的完美正分数的个数，即求 $\\sum_{i=1}^n \\sum_{j=1}^m f(i,j)$。\n\n时光走过，小 C 和小 Y 会再遇见。回首往事，大家都过上了各自想要的生活。", "inputFormat": "输入的第一行包含两个正整数 $n$ 和 $m$，分别表示分子和分母的范围。", "outputFormat": "输出一行包含一个非负整数，表示对应的答案。", "hint": "**【样例 1 解释】**\n\n可以证明，分子分母均不超过 $10$ 的完美正分数共有 $16$ 个，其中小于 $1$ 的 $8$ 个如下：\n- $\\dfrac{1}{2},\\dfrac{1}{4},\\dfrac{1}{6},\\dfrac{1}{8},\\dfrac{1}{10},\\dfrac{2}{5},\\dfrac{2}{9},\\dfrac{4}{9}$。\n\n大于 $1$ 的 $8$ 个完美正分数分别为上述 $8$ 个小于 $1$ 的完美正分数的倒数。\n- 可以按照如下方式验证 $\\dfrac{2}{9}$ 是否为完美正分数：因为 $\\dfrac{1}{2}\\in S$，$\\dfrac{1}{2}+2=\\dfrac{5}{2}\\in S$，$\\dfrac{5}{2}+2=\\dfrac{9}{2}\\in S$，$\\dfrac{1}{\\dfrac{9}{2}}=\\dfrac{2}{9}\\in S$；\n- 可以按照如下方式验证 $\\dfrac{3}{7}$ 是否为完美正分数：假设 $\\dfrac{3}{7}$ 是完美正分数，则 $\\dfrac{1}{\\dfrac{3}{7}}=\\dfrac{7}{3}\\in S$，$\\dfrac{7}{3}-2=\\dfrac{1}{3}\\in S$，$\\dfrac{1}{\\dfrac{1}{3}}=3\\in S$，$3-2=1\\in S$，与第二条性质矛盾，因此 $\\dfrac{3}{7}$ 不是完美正分数\n\n**【数据范围】**\n\n对于所有测试数据保证：$2\\leq n,m\\leq 3\\times 10^7$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | $m\\leq$ |\n| :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $10^2$ | $10^2$ |\n| $4\\sim 6$ | $10^3$ | $10^3$ |\n| $7\\sim 10$ | $8\\,000$ | $8\\,000$ |\n| $11\\sim 14$ | $10^5$ | $10^5$ |\n| $15\\sim 17$ | $10^6$ | $10^6$ |\n| $18$ | $8\\times 10^6$ | $8\\times 10^6$ |\n| $19$ | ^ | $3\\times 10^7$ |\n| $20$ | $3\\times 10^7$ | ^ |", "locale": "zh-CN"}}}
{"pid": "P10789", "type": "P", "difficulty": 7, "samples": [["0\n3\n5\n1 1 1 0\n2 1 1 0\n2 1 2 1\n4 2 3 0\n6\n1 1 1 0\n2 1 2 0\n3 1 3 2\n4 1 4 1\n5 1 5 3\n6\n1 1 1 0\n2 1 2 0\n2 1 2 0\n3 1 2 0\n3 2 3 2", "3 3 2 4\n5 9 3 21 6\n4 10 5 14 1"], ["见 mountain2.in/ans\n这个样例满足测试点 2,3 的约束条件", ""], ["见 mountain3.in/ans\n这个样例满足测试点 9 的约束条件", ""], ["见 mountain4.in/ans\n这个样例满足测试点 11,12 的约束条件", ""], ["见 mountain5.in/ans\n这个样例满足测试点 13 的约束条件", ""]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["倍增", "树状数组", "2024", "NOI", "O2优化", "树形 DP", "树链剖分", "线段树合并"], "title": "[NOI2024] 登山", "background": "", "description": "“为什么要攀登？因为山就在那里。”\n\n慕士塔格山上有 $n$ 处点位，点从 $1$ 到 $n$ 编号，$1$ 号点位为山顶。这 $n$ 个点位构成一棵有根树的结构，其中 $1$ 号点位为根，对于 $2\\leq i\\leq n$，$i$ 号点位的父亲结点为 $p_i$ 号点位。\n\n记 $d_i$ 为 $i$ 号点位到山顶所需经过的边数。形式化地说，$d_1=0$，对于 $2\\leq i\\leq n$，$d_i=d_{p_i}+1$。\n\n定义一条**登山路径**为从 $2\\sim n$ 号点位中的某一个开始，经过若干次**移动**后**到达山顶**的方案。\n\n定义一次从 $i(2\\leq i\\leq n)$ 号点位出发的**移动**为以下两种方式之一：\n1. 冲刺：在给定的冲刺范围 $[l_i,r_i]$ 内，选择一个正整数 $k$ 满足 $l_i\\leq k\\leq r_i$，向山顶移动 $k$ 步，即移动至 $i$ 号点位在有根树上的 $k$ 级父亲处。保证 $1\\leq l_i\\leq r_i\\leq d_i$。\n2. 休息：由于慕士塔格山地形陡峭，休息时会滑落到某一个儿子结点处。形式化地说，选择一个满足 $p_j=i$ 的 $j$，移动至到 $j$ 号点位。特别地，若 $i$ 号点位为有根树的叶子结点，则不存在满足 $p_j=i$ 的 $j$，因此此时不能选择休息。\n\n定义一条**登山路径**对应的**登山序列**为初始点位以及每次移动到的点位所构成的序列。形式化地说，一条从 $x$ 号点位开始的**登山路径**对应的****登山序列****是一个点序列 $a_1=x,a_2,\\dots,a_m=1$ 满足对于 $1\\leq i<m$，$a_{i+1}$ 是 $a_i$ 的 $k(l_{a_i}\\leq k\\leq r_{a_i})$ 级祖先或 $p_{a_{i+1}}=a_i$。\n\n为了保证每次冲刺都能更接近山顶，一条**合法的登山路径**需要满足：对于初始点位或某次移动到的点位 $i$，以后冲刺到的点位 $j$ 都必须满足 $d_j<d_i-h_i$，其中 $h_i$ 是一个给定的参数，保证 $0\\leq h_i<d_i$。形式化地说，一条**合法的登山路径**对应的**登山序列** $a_1,a_2,\\dots,a_m$ 需要满足：对于所有 $1\\leq i<j\\leq m$，若 $p_{a_j} \\neq a_{j-1}$，则 $d_{a_j}<d_{a_i}-h_{a_i}$。\n\n对于 $2\\sim n$ 号所有点位，求从这些点位开始的**合法的登山路径**条数。两条**登山路径**不同当且仅当其对应的**登山序列**不同。由于答案可能较大，你只需要求出答案对 $998\\,244\\,353$ 取模后的结果。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n输入的第二行包含一个整数 $t$，表示测试数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含一个整数 $n$，表示慕士塔格山的点位数量。\n\n接下来 $n-1$ 行，第 $i-1(2\\leq i\\leq n)$ 行包含四个整数 $p_i,l_i,r_i,h_i$。保证 $1\\leq p_i<i$，$1\\leq l_i\\leq r_i\\leq d_i$，$0\\leq h_i<d_i$。", "outputFormat": "对于每组测试数据，输出一行 $n-1$ 个整数，分别表示从点位 $2\\sim n$ 到达山顶的方案数对 $998\\,244\\,353$ 取模后的结果。", "hint": "**【样例 1 解释】**\n\n样例 $1$ 共包含三组测试数据。\n\n对于第一组测试数据，慕士塔格山的点位结构如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8e2srlpm.png)\n\n在该测试数据中，$d_1=0$，$d_2=1$，$d_3=d_4=2$，$d_5=3$。\n\n从 $4$ 开始的合法的登山路径共有以下 $2$ 条：\n1. 直接选择冲刺到 $4$ 的 $2$ 级父亲，也就是 $1$，到达山顶，对应的登山序列为 $[4,1]$。\n2. 先休息滑落到 $5$，然后从 $5$ 冲刺到它的 $3$ 级父亲，到达山顶。对应的登山序列为 $[4,5,1]$。\n\n从 $5$ 开始的合法的登山路径共有以下 $4$ 条：\n1. 直接选择冲刺到 $5$ 的 $3$ 级父亲，也就是 $1$，到达山顶。对应的登山序列为 $[5,1]$。\n2. 先冲刺到 $5$ 的 $2$ 级父亲，也就是 $2$；然后再从 $2$ 冲刺到它的 $1$ 级父亲，到达山顶。对应的登山序列为 $[5,2,1]$。\n3. 先冲刺到 $5$ 的 $2$ 级父亲，也就是 $2$；然后在 $2$ 处休息，滑落到 $4$；接着从 $4$ 冲刺到它的 $2$ 级父亲，到达山顶。对应的登山序列为 $[5,2,4,1]$。\n4. 先冲刺到 $5$ 的 $2$ 级父亲，也就是 $2$；然后在 $2$ 处休息，滑落到 $4$；继续休息，滑落到 $5$；接着从 $5$ 再次冲刺到它的 $3$ 级父亲，到达山顶。对应的登山序列为 $[5,2,4,5,1]$。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1\\leq t\\leq 4$，$2\\leq n\\leq 10^5$。\n\n对于任意的 $2\\leq i\\leq n$，保证：$1\\leq p_i<i$，$1\\leq l_i\\leq r_i\\leq d_i$，$0\\leq h_i<d_i$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | 是否有 $l_i=r_i$ | 是否有 $h_i=0$ | 是否有 $p_i=i-1$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $6$ | 否 | 否 | 否 |\n| $2,3$ | $300$ | ^ | ^ | ^ |\n| $4,5$ | $5000$ | ^ | ^ | ^ |\n| $6$ | $10^5$ | 是 | 是 | 是 |\n| $7$ | ^ | ^ | ^ | 否 |\n| $8$ | ^ | ^ | 否 | 是 |\n| $9$ | ^ | ^ | ^ | 否 |\n| $10$ | ^ | 否 | 是 | 是 |\n| $11,12$ | ^ | ^ | ^ | 否 |\n| $13$ | ^ | ^ | 否 | 是 |\n| $14\\sim 20$ | ^ | ^ | ^ | 否 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2024] 登山", "background": "", "description": "“为什么要攀登？因为山就在那里。”\n\n慕士塔格山上有 $n$ 处点位，点从 $1$ 到 $n$ 编号，$1$ 号点位为山顶。这 $n$ 个点位构成一棵有根树的结构，其中 $1$ 号点位为根，对于 $2\\leq i\\leq n$，$i$ 号点位的父亲结点为 $p_i$ 号点位。\n\n记 $d_i$ 为 $i$ 号点位到山顶所需经过的边数。形式化地说，$d_1=0$，对于 $2\\leq i\\leq n$，$d_i=d_{p_i}+1$。\n\n定义一条**登山路径**为从 $2\\sim n$ 号点位中的某一个开始，经过若干次**移动**后**到达山顶**的方案。\n\n定义一次从 $i(2\\leq i\\leq n)$ 号点位出发的**移动**为以下两种方式之一：\n1. 冲刺：在给定的冲刺范围 $[l_i,r_i]$ 内，选择一个正整数 $k$ 满足 $l_i\\leq k\\leq r_i$，向山顶移动 $k$ 步，即移动至 $i$ 号点位在有根树上的 $k$ 级父亲处。保证 $1\\leq l_i\\leq r_i\\leq d_i$。\n2. 休息：由于慕士塔格山地形陡峭，休息时会滑落到某一个儿子结点处。形式化地说，选择一个满足 $p_j=i$ 的 $j$，移动至到 $j$ 号点位。特别地，若 $i$ 号点位为有根树的叶子结点，则不存在满足 $p_j=i$ 的 $j$，因此此时不能选择休息。\n\n定义一条**登山路径**对应的**登山序列**为初始点位以及每次移动到的点位所构成的序列。形式化地说，一条从 $x$ 号点位开始的**登山路径**对应的****登山序列****是一个点序列 $a_1=x,a_2,\\dots,a_m=1$ 满足对于 $1\\leq i<m$，$a_{i+1}$ 是 $a_i$ 的 $k(l_{a_i}\\leq k\\leq r_{a_i})$ 级祖先或 $p_{a_{i+1}}=a_i$。\n\n为了保证每次冲刺都能更接近山顶，一条**合法的登山路径**需要满足：对于初始点位或某次移动到的点位 $i$，以后冲刺到的点位 $j$ 都必须满足 $d_j<d_i-h_i$，其中 $h_i$ 是一个给定的参数，保证 $0\\leq h_i<d_i$。形式化地说，一条**合法的登山路径**对应的**登山序列** $a_1,a_2,\\dots,a_m$ 需要满足：对于所有 $1\\leq i<j\\leq m$，若 $p_{a_j} \\neq a_{j-1}$，则 $d_{a_j}<d_{a_i}-h_{a_i}$。\n\n对于 $2\\sim n$ 号所有点位，求从这些点位开始的**合法的登山路径**条数。两条**登山路径**不同当且仅当其对应的**登山序列**不同。由于答案可能较大，你只需要求出答案对 $998\\,244\\,353$ 取模后的结果。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n输入的第二行包含一个整数 $t$，表示测试数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含一个整数 $n$，表示慕士塔格山的点位数量。\n\n接下来 $n-1$ 行，第 $i-1(2\\leq i\\leq n)$ 行包含四个整数 $p_i,l_i,r_i,h_i$。保证 $1\\leq p_i<i$，$1\\leq l_i\\leq r_i\\leq d_i$，$0\\leq h_i<d_i$。", "outputFormat": "对于每组测试数据，输出一行 $n-1$ 个整数，分别表示从点位 $2\\sim n$ 到达山顶的方案数对 $998\\,244\\,353$ 取模后的结果。", "hint": "**【样例 1 解释】**\n\n样例 $1$ 共包含三组测试数据。\n\n对于第一组测试数据，慕士塔格山的点位结构如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8e2srlpm.png)\n\n在该测试数据中，$d_1=0$，$d_2=1$，$d_3=d_4=2$，$d_5=3$。\n\n从 $4$ 开始的合法的登山路径共有以下 $2$ 条：\n1. 直接选择冲刺到 $4$ 的 $2$ 级父亲，也就是 $1$，到达山顶，对应的登山序列为 $[4,1]$。\n2. 先休息滑落到 $5$，然后从 $5$ 冲刺到它的 $3$ 级父亲，到达山顶。对应的登山序列为 $[4,5,1]$。\n\n从 $5$ 开始的合法的登山路径共有以下 $4$ 条：\n1. 直接选择冲刺到 $5$ 的 $3$ 级父亲，也就是 $1$，到达山顶。对应的登山序列为 $[5,1]$。\n2. 先冲刺到 $5$ 的 $2$ 级父亲，也就是 $2$；然后再从 $2$ 冲刺到它的 $1$ 级父亲，到达山顶。对应的登山序列为 $[5,2,1]$。\n3. 先冲刺到 $5$ 的 $2$ 级父亲，也就是 $2$；然后在 $2$ 处休息，滑落到 $4$；接着从 $4$ 冲刺到它的 $2$ 级父亲，到达山顶。对应的登山序列为 $[5,2,4,1]$。\n4. 先冲刺到 $5$ 的 $2$ 级父亲，也就是 $2$；然后在 $2$ 处休息，滑落到 $4$；继续休息，滑落到 $5$；接着从 $5$ 再次冲刺到它的 $3$ 级父亲，到达山顶。对应的登山序列为 $[5,2,4,5,1]$。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1\\leq t\\leq 4$，$2\\leq n\\leq 10^5$。\n\n对于任意的 $2\\leq i\\leq n$，保证：$1\\leq p_i<i$，$1\\leq l_i\\leq r_i\\leq d_i$，$0\\leq h_i<d_i$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | 是否有 $l_i=r_i$ | 是否有 $h_i=0$ | 是否有 $p_i=i-1$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $6$ | 否 | 否 | 否 |\n| $2,3$ | $300$ | ^ | ^ | ^ |\n| $4,5$ | $5000$ | ^ | ^ | ^ |\n| $6$ | $10^5$ | 是 | 是 | 是 |\n| $7$ | ^ | ^ | ^ | 否 |\n| $8$ | ^ | ^ | 否 | 是 |\n| $9$ | ^ | ^ | ^ | 否 |\n| $10$ | ^ | 否 | 是 | 是 |\n| $11,12$ | ^ | ^ | ^ | 否 |\n| $13$ | ^ | ^ | 否 | 是 |\n| $14\\sim 20$ | ^ | ^ | ^ | 否 |\n", "locale": "zh-CN"}}}
{"pid": "P10790", "type": "P", "difficulty": 7, "samples": [["0\n2\n4 7\n2 1\n4 1\n1 4\n2 3\n3 4\n2 4\n4 3\n4 5\n1 2\n2 3\n2 4\n3 1\n4 3", "3233\n2211"], ["见 graphee2.in/ans\n这个样例满足测试点 2 的约束条件", ""], ["见 graphee3.in/ans\n这个样例满足测试点 3,4 的约束条件", ""], ["见 graphee4.in/ans\n这个样例满足测试点 5,6 的约束条件", ""], ["见 graphee5.in/ans\n这个样例满足测试点 8,9 的约束条件", ""], ["见 graphee6.in/ans\n这个样例满足测试点 14,15 的约束条件", ""]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "NOI", "O2优化", "树形 DP", "Tarjan", "启发式合并"], "title": "[NOI2024] 树形图", "background": "由于评测机性能差异，本题时限翻倍。", "description": "给定一个 $n$ 个点 $m$ 条边的**简单有向图** $G$，顶点从 $1$ 到 $n$ 编号。其中简单有向图的定义为**不存在重边与自环**的有向图。\n\n定义顶点 $r$ 是有向图 $G$ 的根当且仅当对于 $1\\leq k\\leq n$，顶点 $r$ 到顶点 $k$ 存在恰好一条**有向简单路径**，其中简单路径的定义为**不经过重复点的路径**。\n\n定义每个点的种类如下：\n- 若顶点 $r$ 是图 $G$ 的根，则称顶点 $r$ 为图 $G$ 的**一类点**。\n- 若顶点 $r$ 不是图 $G$ 的一类点，且存在一种删边的方案，使得图 $G$ 在删去若干条边后得到的图 $G'$ 满足：所有图 $G$ 中的一类点都是 $G'$ 的根，且顶点 $r$ 也是图 $G'$ 的根，则称顶点 $r$ 为图 $G$ 的**二类点**。\n- 若顶点 $r$ 不满足上述条件，则称顶点 $r$ 为图 $G$ 的**三类点**。\n\n根据上述定义，图 $G$ 的每个点都恰好属于一类点，二类点，三类点之一。你需要判断点 $1\\sim n$ 分别属于这三个种类中的哪一种。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个非负整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n输入的第二行包含一个正整数 $t$，表示测试数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含两个正整数 $n,m$，分别表示有向图的点数和边数。\n\n接下来 $m$ 行，每行包含两个正整数 $u,v$，表示一条从 $u$ 到 $v$ 的有向边。保证 $1\\leq u,v\\leq n$，且给定的有向图 $G$ 不存在重边与自环。", "outputFormat": "对于每组数据，输出一行包含一个长度恰好为 $n$ 的字符串 $s$ 表示每个点的种类。其中 $s_i=1$ 表示点 $i$ 为**一类点**，$s_i=2$ 表示点 $i$ 为**二类点**，$s_i=3$ 表示点 $i$ 为**三类点**。", "hint": "**【样例 1 解释】**\n\n样例 $1$ 共包含两组测试数据。\n\n对于第一组测试数据，输入的图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yorwc4dr.png)\n\n由于 $1,3,4$ 均不存在到达 $2$ 的路径，因此 $1,3,4$ 均为三类点。由于 $2$ 到 $1$ 的有向简单路径共有三条：$2\\to 1$，$2\\to 4\\to 1$，$2\\to 3\\to 4\\to 1$，因此 $2$ 不是一类点。删去边 $1\\to 4$，$4\\to 1$，$3\\to 4$，$4\\to 3$ 后，$2$ 到 $1,3,4$ 的有向简单路径均唯一，因此 $2$ 是图 $G'$ 的根，即 $2$ 是二类点。\n\n对于第二组测试数据，输入的图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t8r9veu2.png)\n\n容易发现 $3,4$ 均为一类点，删去边 $2\\to 3$ 后，每个点到其他所有点的有向简单路径均唯一，因此 $1,2$ 均为二类点。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1\\leq t\\leq 10$，$2\\leq n\\leq 10^5$，$1\\leq m\\leq 2\\times 10^5$，且图 $G$ 不存在重边与自环。\n\n::cute-table{tuack}\n\n| 测试点编号 | $t\\leq$ | $n\\leq$ | $m\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $3$ | $10$ | $20$ | 无 |\n| $2$ | $10$ | $10^3$ | $2000$ | A |\n| $3,4$ | ^ | ^ | ^ | B |\n| $5,6$ | ^ | ^ | ^ | 无 |\n| $7$ | ^ | $10^5$ | $2\\times 10^5$ | A |\n| $8,9$ | ^ | ^ | ^ | BC |\n| $10\\sim 13$ | ^ | ^ | ^ | B |\n| $14,15$ | ^ | ^| ^ | C |\n| $16\\sim 20$ | ^ | ^ | ^ | 无 |\n\n- 特殊性质 A：保证不存在一类点。\n- 特殊性质 B：保证不存在二类点。\n- 特殊性质 C：保证编号为 $1$ 的点为图 $G$ 的一类点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2024] 树形图", "background": "由于评测机性能差异，本题时限翻倍。", "description": "给定一个 $n$ 个点 $m$ 条边的**简单有向图** $G$，顶点从 $1$ 到 $n$ 编号。其中简单有向图的定义为**不存在重边与自环**的有向图。\n\n定义顶点 $r$ 是有向图 $G$ 的根当且仅当对于 $1\\leq k\\leq n$，顶点 $r$ 到顶点 $k$ 存在恰好一条**有向简单路径**，其中简单路径的定义为**不经过重复点的路径**。\n\n定义每个点的种类如下：\n- 若顶点 $r$ 是图 $G$ 的根，则称顶点 $r$ 为图 $G$ 的**一类点**。\n- 若顶点 $r$ 不是图 $G$ 的一类点，且存在一种删边的方案，使得图 $G$ 在删去若干条边后得到的图 $G'$ 满足：所有图 $G$ 中的一类点都是 $G'$ 的根，且顶点 $r$ 也是图 $G'$ 的根，则称顶点 $r$ 为图 $G$ 的**二类点**。\n- 若顶点 $r$ 不满足上述条件，则称顶点 $r$ 为图 $G$ 的**三类点**。\n\n根据上述定义，图 $G$ 的每个点都恰好属于一类点，二类点，三类点之一。你需要判断点 $1\\sim n$ 分别属于这三个种类中的哪一种。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个非负整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n输入的第二行包含一个正整数 $t$，表示测试数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含两个正整数 $n,m$，分别表示有向图的点数和边数。\n\n接下来 $m$ 行，每行包含两个正整数 $u,v$，表示一条从 $u$ 到 $v$ 的有向边。保证 $1\\leq u,v\\leq n$，且给定的有向图 $G$ 不存在重边与自环。", "outputFormat": "对于每组数据，输出一行包含一个长度恰好为 $n$ 的字符串 $s$ 表示每个点的种类。其中 $s_i=1$ 表示点 $i$ 为**一类点**，$s_i=2$ 表示点 $i$ 为**二类点**，$s_i=3$ 表示点 $i$ 为**三类点**。", "hint": "**【样例 1 解释】**\n\n样例 $1$ 共包含两组测试数据。\n\n对于第一组测试数据，输入的图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yorwc4dr.png)\n\n由于 $1,3,4$ 均不存在到达 $2$ 的路径，因此 $1,3,4$ 均为三类点。由于 $2$ 到 $1$ 的有向简单路径共有三条：$2\\to 1$，$2\\to 4\\to 1$，$2\\to 3\\to 4\\to 1$，因此 $2$ 不是一类点。删去边 $1\\to 4$，$4\\to 1$，$3\\to 4$，$4\\to 3$ 后，$2$ 到 $1,3,4$ 的有向简单路径均唯一，因此 $2$ 是图 $G'$ 的根，即 $2$ 是二类点。\n\n对于第二组测试数据，输入的图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t8r9veu2.png)\n\n容易发现 $3,4$ 均为一类点，删去边 $2\\to 3$ 后，每个点到其他所有点的有向简单路径均唯一，因此 $1,2$ 均为二类点。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1\\leq t\\leq 10$，$2\\leq n\\leq 10^5$，$1\\leq m\\leq 2\\times 10^5$，且图 $G$ 不存在重边与自环。\n\n::cute-table{tuack}\n\n| 测试点编号 | $t\\leq$ | $n\\leq$ | $m\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $3$ | $10$ | $20$ | 无 |\n| $2$ | $10$ | $10^3$ | $2000$ | A |\n| $3,4$ | ^ | ^ | ^ | B |\n| $5,6$ | ^ | ^ | ^ | 无 |\n| $7$ | ^ | $10^5$ | $2\\times 10^5$ | A |\n| $8,9$ | ^ | ^ | ^ | BC |\n| $10\\sim 13$ | ^ | ^ | ^ | B |\n| $14,15$ | ^ | ^| ^ | C |\n| $16\\sim 20$ | ^ | ^ | ^ | 无 |\n\n- 特殊性质 A：保证不存在一类点。\n- 特殊性质 B：保证不存在二类点。\n- 特殊性质 C：保证编号为 $1$ 的点为图 $G$ 的一类点。", "locale": "zh-CN"}}}
{"pid": "P10791", "type": "P", "difficulty": 3, "samples": [["1\n3 2\n1 1 0", "1 1 0 1"], ["1\n2 20070721\n20070720 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "进制", "前缀和"], "title": "『SpOI - R1』强大到让你们所有人注视", "background": "", "description": "**本题包含多组测试。**\n\n给定一个 $n$ 位的 $k$ 进制大数。\n\n令 $S(l,r)$ 表示截取这个 $k$ 进制大数从高到低第 $l$ 位至第 $r$ 位构成的新 $k$ 进制数。\n\n你需要求出 $\\sum\\limits_{1\\leq l\\leq r\\leq n} S(l,r)$，注意这里的求和也建立在 $k$ 进制下。\n\n由于答案可能很大，设 $(20070720)_{10}$ 在 $k$ 进制下是 $x$，你只需要输出答案对 $x$ 取模的结果。\n\n**再次提醒：以上所有求和、运算和取值都建立在 $k$ 进制下。**", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n每组数据第一行两个正整数 $n,k$，表示这个大数。\n\n每组数据第二行一个数列 $a$，从高位至低位依次表示这个大 $k$ 进制数的每一位上的数。保证 $\\forall i\\in[1,n],0\\leq a_i<k$。", "outputFormat": "每组数据一行，表示答案对 $x$ 取模的结果。由于这也是一个 $k$ 进制数，所以用空格隔开依次输出每一位。\n\n**注意你的输出中不应含有前导零。**", "hint": "#### 样例 #1 解释\n\n所有的 $S(l,r)$：$(1)_2,(1)_2,(0)_2,(11)_2,(10)_2,(110)_2$，把它们在 $2$ 进制下相加得到 $(1101)_2$，再在 $2$ 进制下对 $(20070720)_{10}=(1001100100100000101000000)_2$ 取模即可得到答案 $(1101)_2$。\n\n#### 样例 #2 解释\n\n对于这个数，$S(1,1)$ 显然被 $(\\overline{20070720})_{20070721}$ 整除，$S(2,2),S(1,2)$ 被 $(\\overline{20070720})_{20070721}$ 除后都余 $1$。所以取模后的答案是 $(2)_{20070721}$。\n\n### 数据范围\n\n**本题开启子任务捆绑与子任务依赖。**\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 10$，$1\\leq n\\leq 5\\times 10^5$，$0\\leq a_i<k\\leq 10^9$，$2\\leq k\\leq 10^9$。$k$ 进制大数可能含有前导零。\n\n| Subtask | $T\\leq$ | $n\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| 1 | $10$ | $100$ | 无 | $25$ | 无 |\n| 2 | $1$ | $5\\times 10^3$ | $k>20070720$ | $20$ | 无 |\n| 3 | $1$ | $8\\times 10^3$ | 无 | $25$ | 1,2 |\n| 4 | $5$ | $5\\times 10^5$ | 无 | $30$ | 1,2,3 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『SpOI - R1』强大到让你们所有人注视", "background": "", "description": "**本题包含多组测试。**\n\n给定一个 $n$ 位的 $k$ 进制大数。\n\n令 $S(l,r)$ 表示截取这个 $k$ 进制大数从高到低第 $l$ 位至第 $r$ 位构成的新 $k$ 进制数。\n\n你需要求出 $\\sum\\limits_{1\\leq l\\leq r\\leq n} S(l,r)$，注意这里的求和也建立在 $k$ 进制下。\n\n由于答案可能很大，设 $(20070720)_{10}$ 在 $k$ 进制下是 $x$，你只需要输出答案对 $x$ 取模的结果。\n\n**再次提醒：以上所有求和、运算和取值都建立在 $k$ 进制下。**", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n每组数据第一行两个正整数 $n,k$，表示这个大数。\n\n每组数据第二行一个数列 $a$，从高位至低位依次表示这个大 $k$ 进制数的每一位上的数。保证 $\\forall i\\in[1,n],0\\leq a_i<k$。", "outputFormat": "每组数据一行，表示答案对 $x$ 取模的结果。由于这也是一个 $k$ 进制数，所以用空格隔开依次输出每一位。\n\n**注意你的输出中不应含有前导零。**", "hint": "#### 样例 #1 解释\n\n所有的 $S(l,r)$：$(1)_2,(1)_2,(0)_2,(11)_2,(10)_2,(110)_2$，把它们在 $2$ 进制下相加得到 $(1101)_2$，再在 $2$ 进制下对 $(20070720)_{10}=(1001100100100000101000000)_2$ 取模即可得到答案 $(1101)_2$。\n\n#### 样例 #2 解释\n\n对于这个数，$S(1,1)$ 显然被 $(\\overline{20070720})_{20070721}$ 整除，$S(2,2),S(1,2)$ 被 $(\\overline{20070720})_{20070721}$ 除后都余 $1$。所以取模后的答案是 $(2)_{20070721}$。\n\n### 数据范围\n\n**本题开启子任务捆绑与子任务依赖。**\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 10$，$1\\leq n\\leq 5\\times 10^5$，$0\\leq a_i<k\\leq 10^9$，$2\\leq k\\leq 10^9$。$k$ 进制大数可能含有前导零。\n\n| Subtask | $T\\leq$ | $n\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| 1 | $10$ | $100$ | 无 | $25$ | 无 |\n| 2 | $1$ | $5\\times 10^3$ | $k>20070720$ | $20$ | 无 |\n| 3 | $1$ | $8\\times 10^3$ | 无 | $25$ | 1,2 |\n| 4 | $5$ | $5\\times 10^5$ | 无 | $30$ | 1,2,3 |", "locale": "zh-CN"}}}
{"pid": "P10792", "type": "P", "difficulty": 4, "samples": [["1\n2\n4 1\n2 1", "33"], ["1\n3\n1 2\n3 1\n7 2", "1204285426"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "组合数学", "期望"], "title": "『SpOI - R1』笑起来最帅的小孩", "background": "", "description": "**本题包含多组数据。**\n\n有一个数字序列 $a$，长度为 $n$。序列中每一项均为 $0$ 到 $9$ 的数字。\n\n另有一个空数字序列 $b$，$b$ 中会出现一个**光标**（你可以理解为能够出现在数字之间，或整个数字序列之前，或整个数字序列之后的细线），此时**光标**前后均没有数字。\n\n现在向 $b$ 中依次输入数字序列 $a$。每输入一个数字，数字立即出现在**光标**之后。\n\n接下来**光标**立即随机地移动到任意一个数字之前或所有数字之后。随机是均匀的。换句话说，**光标**移动到所有可移动到的位置的概率是均等的。\n\n现在告诉你数字序列 $a$。你需要输出的是，最终得到的 $b$ 直接转为十进制后的大小（无视前导零）的期望，对质数 $2007072007$ 取模。\n\n由于 $a$ 可能很长，所以本题采用压缩输入。\n\n具体来说，最开始 $a$ 是空的数字序列，输入会给你一个 $k$ 长的二元组数组，其中第 $i$ 项为 $(x_i,l_i)$，表示数字 $x_i$ 连续出现 $l_i$ 次接在之前的 $a$ 之后。你可以用此方法解压缩真正的 $a$，再解决问题。\n\n----------\n\n**在本题，你可以对期望的理解**：对于一个变量可能的结果 $X$，若其权值为 $v_X$，得到该结果的概率为 $p_X$，则对于结果集 $S$，变量的期望 $E=\\sum\\limits_{X\\in S}p_Xv_X$。\n\n**如果你不知道如何对有理数取模**：请查看[此题](https://www.luogu.com.cn/problem/P2613)。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行一个整数 $k$，表示 $a$ 压缩后得到的二元组数组包含多少项。\n\n接下来共 $k$ 行，每行两个整数 $x_i,l_i$，表示在上一项所得 $a$ 序列的基础上，在末尾增加 $l_i$ 个数字 $x_i$ 得到新的 $a$ 序列。你可以用这种方式解压缩真正的 $a$ 序列。", "outputFormat": "对于每组数据，输出一行一个整数，表示在光标每次都随机移动的情况下，可能得到的 $b$ 转化为十进制后的大小（无视前导零）的期望，对质数 $2007072007$ 取模的值。", "hint": "### 数据范围\n\n**本题开启子任务捆绑和子任务依赖。**\n\n令 $n=\\sum\\limits_{i=1}^k l_i$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq T\\leq 15$，$1\\leq n\\leq 2\\times 10^9$，$1\\leq k\\leq 10^5$，且对于任意 $i$ 均有 $0\\leq a_i\\leq 9$，$1\\leq l_i\\leq 2\\times 10^9$。\n\n\n| Subtask | $T\\leq$ | $n\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $15$ | $2\\times 10^9$ | $A$ | $10$ | 无 |\n| 2 | $15$ | $100$ | 无 | $15$ | 无 |\n| 3 | $5$ | $2000$ | 无 | $15$ | 2 |\n| 4 | $5$ | $10^6$ | 无 | $15$ | 2,3 |\n| 5 | $5$ | $2\\times 10^9$ | 无 | $45$ | 1,2,3,4 |\n\n特殊性质 $A$：保证在解压缩后的 $a$ 中，任意一个数字都出现了最多一次。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『SpOI - R1』笑起来最帅的小孩", "background": "", "description": "**本题包含多组数据。**\n\n有一个数字序列 $a$，长度为 $n$。序列中每一项均为 $0$ 到 $9$ 的数字。\n\n另有一个空数字序列 $b$，$b$ 中会出现一个**光标**（你可以理解为能够出现在数字之间，或整个数字序列之前，或整个数字序列之后的细线），此时**光标**前后均没有数字。\n\n现在向 $b$ 中依次输入数字序列 $a$。每输入一个数字，数字立即出现在**光标**之后。\n\n接下来**光标**立即随机地移动到任意一个数字之前或所有数字之后。随机是均匀的。换句话说，**光标**移动到所有可移动到的位置的概率是均等的。\n\n现在告诉你数字序列 $a$。你需要输出的是，最终得到的 $b$ 直接转为十进制后的大小（无视前导零）的期望，对质数 $2007072007$ 取模。\n\n由于 $a$ 可能很长，所以本题采用压缩输入。\n\n具体来说，最开始 $a$ 是空的数字序列，输入会给你一个 $k$ 长的二元组数组，其中第 $i$ 项为 $(x_i,l_i)$，表示数字 $x_i$ 连续出现 $l_i$ 次接在之前的 $a$ 之后。你可以用此方法解压缩真正的 $a$，再解决问题。\n\n----------\n\n**在本题，你可以对期望的理解**：对于一个变量可能的结果 $X$，若其权值为 $v_X$，得到该结果的概率为 $p_X$，则对于结果集 $S$，变量的期望 $E=\\sum\\limits_{X\\in S}p_Xv_X$。\n\n**如果你不知道如何对有理数取模**：请查看[此题](https://www.luogu.com.cn/problem/P2613)。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行一个整数 $k$，表示 $a$ 压缩后得到的二元组数组包含多少项。\n\n接下来共 $k$ 行，每行两个整数 $x_i,l_i$，表示在上一项所得 $a$ 序列的基础上，在末尾增加 $l_i$ 个数字 $x_i$ 得到新的 $a$ 序列。你可以用这种方式解压缩真正的 $a$ 序列。", "outputFormat": "对于每组数据，输出一行一个整数，表示在光标每次都随机移动的情况下，可能得到的 $b$ 转化为十进制后的大小（无视前导零）的期望，对质数 $2007072007$ 取模的值。", "hint": "### 数据范围\n\n**本题开启子任务捆绑和子任务依赖。**\n\n令 $n=\\sum\\limits_{i=1}^k l_i$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq T\\leq 15$，$1\\leq n\\leq 2\\times 10^9$，$1\\leq k\\leq 10^5$，且对于任意 $i$ 均有 $0\\leq a_i\\leq 9$，$1\\leq l_i\\leq 2\\times 10^9$。\n\n\n| Subtask | $T\\leq$ | $n\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $15$ | $2\\times 10^9$ | $A$ | $10$ | 无 |\n| 2 | $15$ | $100$ | 无 | $15$ | 无 |\n| 3 | $5$ | $2000$ | 无 | $15$ | 2 |\n| 4 | $5$ | $10^6$ | 无 | $15$ | 2,3 |\n| 5 | $5$ | $2\\times 10^9$ | 无 | $45$ | 1,2,3,4 |\n\n特殊性质 $A$：保证在解压缩后的 $a$ 中，任意一个数字都出现了最多一次。", "locale": "zh-CN"}}}
{"pid": "P10793", "type": "P", "difficulty": 4, "samples": [["2\n5 3 \n6 10\n6 8 \n3 5 \n7 9 \n1 9\n5 5\n5 10\n3 8\n6 10\n4 10\n5 9", "3\n3"]], "limits": {"time": [1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "单调队列", "O2优化", "排序"], "title": "『SpOI - R1』Double Champions", "background": "", "description": "**本题包含多组数据。**\n\n现在有若干个格子排在一行上。\n\n再给出 $n$ 个区间，每个区间 $i$ 可以覆盖 $[l_i,r_i]$ 这个区间中的每一个格子（例如，区间 $[1,2]$ 可以覆盖格子 $1,2$）。\n\n现在需要把这些区间分组，每个组带来的贡献为所有其旗下的区间的交的总长度。\n\n你需要求出最少把这些区间分成多少组，才能使得每一组的贡献都 $\\geq w$。如果不存在任何方案满足条件，输出 `No`。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据，第一行两个整数 $n,w$。\n\n接下来 $n$ 行，每一行两个整数 $l_i,r_i$，描述一个区间。", "outputFormat": "对于每组数据，输出一行一个答案，表示最少要分的组数，或者字符串 `No`，表示无解。", "hint": "#### 样例 #1 解释\n\n按照输入顺序将输入的区间依次编号为 $①,②,③,④,⑤$。\n\n可以将 $5$ 个区间分为以下 $3$ 组：$\\{①,④\\},\\{②\\},\\{③⑤\\}$。这样每一组的贡献即交集大小分别为 $3,3,3$，符合对每组贡献 $\\geq 3$ 的要求。可以证明，$3$ 组是所有符合条件的区间划分方案中组数最少的。\n\n### 数据范围\n\n**请注意常数因子对程序效率的影响。**\n\n**本题开启捆绑测试和子任务依赖。**\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 20$，$1\\leq n\\leq 2\\times 10^5$，$0\\leq w\\leq 10^6$，$1\\leq l_i\\leq r_i\\leq 10^6$。\n\n| Subtask | $n\\leq$ | $w,l_i,r_i\\leq$ | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $8$ | $15$ | $10$ | 无 |\n| 2 | $11$ | $20$ | $10$ | 1 |\n| 3 | $1.5\\times 10^3$ | $10^4$ | $25$ | 1,2 |\n| 4 | $2\\times 10^5$ | $10^6$ | $55$ | 1,2,3 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『SpOI - R1』Double Champions", "background": "", "description": "**本题包含多组数据。**\n\n现在有若干个格子排在一行上。\n\n再给出 $n$ 个区间，每个区间 $i$ 可以覆盖 $[l_i,r_i]$ 这个区间中的每一个格子（例如，区间 $[1,2]$ 可以覆盖格子 $1,2$）。\n\n现在需要把这些区间分组，每个组带来的贡献为所有其旗下的区间的交的总长度。\n\n你需要求出最少把这些区间分成多少组，才能使得每一组的贡献都 $\\geq w$。如果不存在任何方案满足条件，输出 `No`。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据，第一行两个整数 $n,w$。\n\n接下来 $n$ 行，每一行两个整数 $l_i,r_i$，描述一个区间。", "outputFormat": "对于每组数据，输出一行一个答案，表示最少要分的组数，或者字符串 `No`，表示无解。", "hint": "#### 样例 #1 解释\n\n按照输入顺序将输入的区间依次编号为 $①,②,③,④,⑤$。\n\n可以将 $5$ 个区间分为以下 $3$ 组：$\\{①,④\\},\\{②\\},\\{③⑤\\}$。这样每一组的贡献即交集大小分别为 $3,3,3$，符合对每组贡献 $\\geq 3$ 的要求。可以证明，$3$ 组是所有符合条件的区间划分方案中组数最少的。\n\n### 数据范围\n\n**请注意常数因子对程序效率的影响。**\n\n**本题开启捆绑测试和子任务依赖。**\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 20$，$1\\leq n\\leq 2\\times 10^5$，$0\\leq w\\leq 10^6$，$1\\leq l_i\\leq r_i\\leq 10^6$。\n\n| Subtask | $n\\leq$ | $w,l_i,r_i\\leq$ | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $8$ | $15$ | $10$ | 无 |\n| 2 | $11$ | $20$ | $10$ | 1 |\n| 3 | $1.5\\times 10^3$ | $10^4$ | $25$ | 1,2 |\n| 4 | $2\\times 10^5$ | $10^6$ | $55$ | 1,2,3 |", "locale": "zh-CN"}}}
{"pid": "P10794", "type": "P", "difficulty": 5, "samples": [["1\n3\n1 2", "2"], ["1\n7\n1 2 1 4 4 5", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "树形 DP", "树的直径"], "title": "『SpOI - R1』架子鼓可以站 C", "background": "", "description": "现在有一棵 $n$ 个点的树，树根是节点 $1$。\n\n可以对这棵树做任意次**站 C 操作**，每次**站 C 操作**为：选择树上的一个叶子结点 $x$，再选择根节点到 $x$ 路径上的一条边，删除它；然后添加一条连接 $x$ 和根节点的边。\n\n你需要求出经过若干次**站 C 操作**后树的直径的最大值。\n\n**注意：叶子结点的定义是不为根节点，且度数为 $1$ 的节点。**", "inputFormat": "**本题包含多组测试。**\n\n第一行一个整数 $T$，表示测试数据组数。\n\n接下来 $T$ 组数据，每组第一行一个整数 $n$，第二行一个长为 $n-1$ 的序列 $f_i$，第 $i$ 项为 $i+1$ 号节点在树上的父亲。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "### 样例 #1 解释\n\n不做操作时，树的直径为 $2$。可以证明这是最大的直径。\n\n### 样例 #2 解释\n\n样例中的树如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/23wosgfo.png)\n\n只需要一次站 C 操作：选择叶子结点 $6$，断开 $1$ 到 $4$ 的边，再连接 $6$ 和 $1$。\n\n这将会使树形成一条链，直径为 $6$。可以证明这是最大的直径。\n\n### 数据范围\n\n**请注意常数因子对程序效率的影响。**\n\n**本题开启子任务捆绑与子任务依赖。**\n\n对于所有数据，满足 $1\\leq T\\leq 10^4$，$2 \\leq n \\leq 2\\times 10^5$，保证输入数据构成一棵树。\n\n| Subtask | $T\\leq$ | $n\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $10^4$ | $10$ | 无 | $15$ | 无 |\n| 2 | $10^4$ | $20$ | 无 | $15$ | 1 |\n| 3 | $10^4$ | $90$ | 无 | $20$ | 1,2 |\n| 4 | $10^4$ | $2\\times 10^5$ | $A$ | $15$ | 无 |\n| 5 | $15$ | $2\\times 10^5$ | 无 | $35$ | 1,2,3,4 |\n\n**特别地，对于 Subtask 4，保证 $\\sum n\\leq 3\\times 10^6$。**\n\n特殊性质 $A$：不存在一对 $x\\neq 1\\land y\\neq 1$ 的 $(x,y)$ 满足 $\\text{LCA}(x,y)=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『SpOI - R1』架子鼓可以站 C", "background": "", "description": "现在有一棵 $n$ 个点的树，树根是节点 $1$。\n\n可以对这棵树做任意次**站 C 操作**，每次**站 C 操作**为：选择树上的一个叶子结点 $x$，再选择根节点到 $x$ 路径上的一条边，删除它；然后添加一条连接 $x$ 和根节点的边。\n\n你需要求出经过若干次**站 C 操作**后树的直径的最大值。\n\n**注意：叶子结点的定义是不为根节点，且度数为 $1$ 的节点。**", "inputFormat": "**本题包含多组测试。**\n\n第一行一个整数 $T$，表示测试数据组数。\n\n接下来 $T$ 组数据，每组第一行一个整数 $n$，第二行一个长为 $n-1$ 的序列 $f_i$，第 $i$ 项为 $i+1$ 号节点在树上的父亲。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "### 样例 #1 解释\n\n不做操作时，树的直径为 $2$。可以证明这是最大的直径。\n\n### 样例 #2 解释\n\n样例中的树如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/23wosgfo.png)\n\n只需要一次站 C 操作：选择叶子结点 $6$，断开 $1$ 到 $4$ 的边，再连接 $6$ 和 $1$。\n\n这将会使树形成一条链，直径为 $6$。可以证明这是最大的直径。\n\n### 数据范围\n\n**请注意常数因子对程序效率的影响。**\n\n**本题开启子任务捆绑与子任务依赖。**\n\n对于所有数据，满足 $1\\leq T\\leq 10^4$，$2 \\leq n \\leq 2\\times 10^5$，保证输入数据构成一棵树。\n\n| Subtask | $T\\leq$ | $n\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $10^4$ | $10$ | 无 | $15$ | 无 |\n| 2 | $10^4$ | $20$ | 无 | $15$ | 1 |\n| 3 | $10^4$ | $90$ | 无 | $20$ | 1,2 |\n| 4 | $10^4$ | $2\\times 10^5$ | $A$ | $15$ | 无 |\n| 5 | $15$ | $2\\times 10^5$ | 无 | $35$ | 1,2,3,4 |\n\n**特别地，对于 Subtask 4，保证 $\\sum n\\leq 3\\times 10^6$。**\n\n特殊性质 $A$：不存在一对 $x\\neq 1\\land y\\neq 1$ 的 $(x,y)$ 满足 $\\text{LCA}(x,y)=1$。", "locale": "zh-CN"}}}
{"pid": "P10795", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3\n1 3 5\n1 2\n2 3", "10"], ["5\n1 3 5 8 10\n1 5 3 2 8\n2 1\n3 1\n4 1\n5 3", "22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["点分治", "树上启发式合并", "Kruskal 重构树", "O2优化", "线段树合并"], "title": "『SpOI - R1』Lamborghini (Demo)", "background": "", "description": "给你一棵无根树，每个点 $i$ 有两个属性 $t_i,v_i$。\n\n定义有向路径 $i\\to j$ 的 $f_{i,j}$ 为：\n\n- 若 $i\\to j$ 上 $t_x$ 最小的点为 $x$ 且 $v_j\\leq v_x\\leq v_i$，则 $f_{i,j}=x$。\n- 否则，$f_{i,j}=0$。\n\n求 $\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^n f_{i,j}$。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个以空格分隔的整数，第 $i$ 项表示点 $i$ 的 $t_i$。\n\n第三行 $n$ 个以空格分隔的整数，第 $i$ 项表示点 $i$ 的 $v_i$。\n\n接下来 $n-1$ 行，每行两个整数 $a,b$，表示一条树边 $a\\leftrightarrow b$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "#### 样例 #1 解释\n\n- $f(1,1)=1$。\n- $f(1,2)=0$。\n- $f(1,3)=0$。\n- $f(2,1)=1$。\n- $f(2,2)=2$。\n- $f(2,3)=0$。\n- $f(3,1)=1$。\n- $f(3,2)=2$。\n- $f(3,3)=3$。\n\n故 $\\sum\\limits_{i=1}^3\\sum\\limits_{j=1}^3 f(i,j)=10$。\n\n### 数据范围\n\n**本题开启子任务捆绑与子任务依赖。**\n\n对于 $100\\%$ 的数据，$t$ 互不相同，$1\\leq n\\leq 10^5$，$1\\leq t_i,v_i\\leq 10^9$。\n\n| Subtask | $n\\leq$ | $t_i,v_i\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| 1 | $300$ | $10^5$ | 无 | $15$ | 无 |\n| 2 | $5000$ | $10^5$ | 无 | $15$ | 1 |\n| 3 | $10^5$ | $10^9$ | $A$ | $15$ | 无 |\n| 4 | $10^5$ | $10^9$ | $B$ | $15$ | 无 |\n| 5 | $10^5$ | $10^9$ | 无 | $40$ | 1,2,3,4 |\n\n特殊性质 $A$：**钦定 $1$ 号节点为树的根**，对于任意点对 $(x,y)$ 且 $x\\neq y$，若 $x$ 是 $y$ 的祖先，则 $t_x<t_y$。\n\n特殊性质 $B$：$\\forall i\\in[1,n),a_i=i,b_i=i+1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『SpOI - R1』Lamborghini (Demo)", "background": "", "description": "给你一棵无根树，每个点 $i$ 有两个属性 $t_i,v_i$。\n\n定义有向路径 $i\\to j$ 的 $f_{i,j}$ 为：\n\n- 若 $i\\to j$ 上 $t_x$ 最小的点为 $x$ 且 $v_j\\leq v_x\\leq v_i$，则 $f_{i,j}=x$。\n- 否则，$f_{i,j}=0$。\n\n求 $\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^n f_{i,j}$。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个以空格分隔的整数，第 $i$ 项表示点 $i$ 的 $t_i$。\n\n第三行 $n$ 个以空格分隔的整数，第 $i$ 项表示点 $i$ 的 $v_i$。\n\n接下来 $n-1$ 行，每行两个整数 $a,b$，表示一条树边 $a\\leftrightarrow b$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "#### 样例 #1 解释\n\n- $f(1,1)=1$。\n- $f(1,2)=0$。\n- $f(1,3)=0$。\n- $f(2,1)=1$。\n- $f(2,2)=2$。\n- $f(2,3)=0$。\n- $f(3,1)=1$。\n- $f(3,2)=2$。\n- $f(3,3)=3$。\n\n故 $\\sum\\limits_{i=1}^3\\sum\\limits_{j=1}^3 f(i,j)=10$。\n\n### 数据范围\n\n**本题开启子任务捆绑与子任务依赖。**\n\n对于 $100\\%$ 的数据，$t$ 互不相同，$1\\leq n\\leq 10^5$，$1\\leq t_i,v_i\\leq 10^9$。\n\n| Subtask | $n\\leq$ | $t_i,v_i\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| 1 | $300$ | $10^5$ | 无 | $15$ | 无 |\n| 2 | $5000$ | $10^5$ | 无 | $15$ | 1 |\n| 3 | $10^5$ | $10^9$ | $A$ | $15$ | 无 |\n| 4 | $10^5$ | $10^9$ | $B$ | $15$ | 无 |\n| 5 | $10^5$ | $10^9$ | 无 | $40$ | 1,2,3,4 |\n\n特殊性质 $A$：**钦定 $1$ 号节点为树的根**，对于任意点对 $(x,y)$ 且 $x\\neq y$，若 $x$ 是 $y$ 的祖先，则 $t_x<t_y$。\n\n特殊性质 $B$：$\\forall i\\in[1,n),a_i=i,b_i=i+1$。", "locale": "zh-CN"}}}
{"pid": "P10796", "type": "P", "difficulty": 6, "samples": [["3\n2 1 0\naa\n6 1\n2 -1\n3 2\n1 0 2\n19 0 0\nhappythbirthdayshun\n1000000000 8\n1000000000 0\n1 0\n1 0\n1 0\n1 0\n1 0\n1 0\n1 0\n1 0\n1 0\n1 0\n1 0\n1 0\n1 0\n1 0\n1 0\n1 1\n1 0\n1 0\n5 6 1\nacbac\n1 3\n2 4\n1 -5\n3 6\n2 -3\n3 1\n11 10 12\n9 13 108\n8 12 8\n10 9 0\n6 1 4\n4 7 1", "1\n0\n17\n9\n8\n-9\n8\n-4\n-5\n-5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "线段树", "O2优化", "树链剖分", "KMP 算法"], "title": "『SpOI - R1』我看到了，谢谢你们", "background": "", "description": "**本题包含多组测试。**\n\n**特别注意：本题中，border 的定义有所不同。对于串 $s,t$，若同时存在 $s$ 的一对前缀后缀（可空也可为 $s$ 本身）等于 $t$，则 $t$ 是 $s$ 的 border。**\n\n有一个长度为 $n$ 的字符串 $S$。我们使用这个串上的信息来选举总统。\n\n令 $p_i$ 表示 $S$ 的 $i$ 长前缀，特别地，$p_0$ 表示包含第 $0$ 位的空前缀。现在有 $n+1$ 位候选人站在这 $n+1$ 个前缀上，编号为 $[0,n]$，编号为 $i$ 的人对应前缀 $i$。每个人有一个票数 $a_i$ 和花费 $w_i$。\n\n得票数量**严格**超过总票数一半的人可以当选总统。\n\n初始时所有人都处于**未被控制**状态。每一个时刻，任何一个**未被控制**且**之前一直在等待**的人 $i$ 都可以做出三种选择之一：\n\n1. 进行一次**对 $v$ 投票**操作：将自己的 $a_i$ 票花费 $w_i$ 的代价投给人 $v$。\n2. 进行一次**对 $v$ 揽票**操作：\n\t- 花费 $w_i$ 选中人 $v$，需要满足 $p_i$ 是 $p_v$ 的一个 border。\n\t- $\\forall j\\in[0,n]$，若 $p_v$ 是 $p_j$ 的一个 border，且 $j$ 在此时刻**未被控制**，则 $j$ 下一时刻变为**被控制**，他的 $a_j$ 票都花费 $w_j$ 投给 $i$。\n3. 等待下一个时刻。\n\n每个候选人都希望其他人不会成为总统，且都是绝顶聪明的。**特别地**，当他们的操作出现了交叉导致一个人的票需要投给多人时，被交叉者的票可以分别独立投出并都有效（你可以理解为他的票分裂了）。因此，总统可能有多个。\n\n你可以干涉这个过程。具体来说，你可以在 $0$ 时刻操作一个候选人 $x$，让 $x$ 进行指定的一种选择，并钦定选择涉及的所有变量。$x$ 此后不能再做任何选择，剩下的人必须从 $1$ 时刻再开始选择。你干涉的代价就是 $x$ 这次选择的总花费。\n\n票数 $a$ 和花费 $w$ 都会发生 $q$ 次变化。\n\n每一次变化会改变票数 $a$ 中的某一项或是花费 $w$ 中的某一项。票数 $a$ 可能会变为任意正整数，花费 $w$ 只会变小或者不变。\n\n在每次变化之后，你都需要找到这样一个人 $x$，满足你有一种干涉他的方案使得他一定可以成为总统，且你干涉的代价最小。你只需要输出这个最小代价。\n\n可以证明一定存在这样的人。\n\n本题**强制在线**。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行三个整数 $n,q,type$，表示字符串长度、修改次数、是否强制在线。\n\n接下来一行一个长度为 $n$ 的字符串 $S$。保证 $S$ 中只含有小写英文字母。\n\n接下来 $n+1$ 行，每行两个整数 $a_i,w_i$，依次表示候选人 $0$ 到 $n$ 的初始票数和花费。\n\n接下来 $q$ 行，每行三个整数 $o',p',x'$。设 $lst$ 表示上一次输出的答案的绝对值，则 $o\\gets o'\\oplus(type\\times lst),p\\gets p'\\oplus(type\\times lst),x\\gets (|x'|\\oplus(type\\times lst))\\times (-1)^{[x'\\leq 0]}$（其中 $[x'\\leq 0]$ 为[艾佛森括号](https://baike.baidu.com/item/%E8%89%BE%E4%BD%9B%E6%A3%AE%E6%8B%AC%E5%8F%B7/22361197)），然后：\n\n1. $o=1$ 时，将 $a_p$ 修改为 $x$。\n2. $o=2$ 时，将 $w_p$ 修改为 $w_p'=x$。保证 $w_p\\geq w_p'$。", "outputFormat": "共 $q+1$ 行。\n\n第一行输出在初始状态下你干涉的最小代价。\n\n之后，在每次修改后输出你此时干涉的最小代价，共 $q$ 行。", "hint": "#### 样例 #1 解释\n\n对于第一组数据：\n\n考虑第一次修改之前。全场共有 $11$ 票，则当选总统需要 $>5.5$ 票。\n\n干涉 $0$ 号候选人，且选择第一种选择，使用 $w_0=1$ 的花费进行一次**对 $0$ 投票**操作后，$0$ 号候选人得到 $6$ 票，直接达到了总统要求，可以证明这是花费最小的答案。\n\n第一次修改后，全场共有 $7$ 票，则当选总统需要 $>3.5$ 票。\n\n干涉 $1$ 号候选人，且选择第二种选择，进行一次**对 $1$ 揽票**操作后，$1$ 号候选人将得到 $5$ 票，总花费为 $-1+(-1)+2=0$。他直接达到了总统要求，可以证明这是花费最小的答案。\n\n对于第三组数据，去掉强制在线后的修改操作为：\n\n- $o=2,p=3,x=5$；\n- $o=1,p=5,x=100$；\n- $o=1,p=5,x=1$；\n- $o=2,p=1,x=-8$；\n- $o=2,p=5,x=0$；\n- $o=1,p=2,x=4$。\n\n### 数据范围\n\n**请注意常数因子对程序效率的影响。**\n\n**本题开启子任务捆绑与子任务依赖。**\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 2000$，$1\\leq n\\leq 10^5$，$0\\leq q\\leq 10^5$，$0\\leq type\\leq 1$，且在任何时候都保证 $1\\leq a_i\\leq 2\\times 10^9$，$|w_i|\\leq 2\\times 10^9$。\n\n保证字符串中只含有小写字母。\n\n对于任意一次修改，保证 $o$ 为 $1$ 或 $2$，且 $0\\leq p\\leq n$。在 $o=1$ 时，$1\\leq x\\leq 2\\times 10^9$；$o=2$ 时，$0\\leq |x|\\leq 2\\times 10^9$。\n\n特别地，$w_i$ 中的每一项在被操作的过程中一定单调不递增。\n\n| Subtask | $T\\leq$ | $n,q\\leq$ | $a_i,\\lvert w_i\\rvert \\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $2000$ | $20$ | $10^5$ | 无 | $5$ | 无 |\n| 2 | $2000$ | $200$ | $10^5$ | 无 | $10$ | 1 |\n| 3 | $3$ | $10^5$ | $2\\times 10^9$ | $A$ | $15$ | 无 |\n| 4 | $3$ | $10^5$ | $2\\times 10^9$ | $B$ | $5$ | 无 |\n| 5 | $3$ | $10^5$ | $2\\times 10^9$ | $C$ | $15$ | 无 |\n| 6 | $3$ | $10^5$ | $2\\times 10^9$ | $D$ | $20$ | 无 |\n| 7 | $3$ | $10^5$ | $2\\times 10^9$ | 无 | $30$ | 1,2,3,4,5,6 |\n\n特殊性质 $A$：保证 $o\\neq 2$。\n\n特殊性质 $B$：保证字符串中的每一个字符都在 $26$ 个小写字母中独立均匀随机。\n\n特殊性质 $C$：字符串中只含有 $\\texttt{a}$。\n\n特殊性质 $D$：保证 $type=0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『SpOI - R1』我看到了，谢谢你们", "background": "", "description": "**本题包含多组测试。**\n\n**特别注意：本题中，border 的定义有所不同。对于串 $s,t$，若同时存在 $s$ 的一对前缀后缀（可空也可为 $s$ 本身）等于 $t$，则 $t$ 是 $s$ 的 border。**\n\n有一个长度为 $n$ 的字符串 $S$。我们使用这个串上的信息来选举总统。\n\n令 $p_i$ 表示 $S$ 的 $i$ 长前缀，特别地，$p_0$ 表示包含第 $0$ 位的空前缀。现在有 $n+1$ 位候选人站在这 $n+1$ 个前缀上，编号为 $[0,n]$，编号为 $i$ 的人对应前缀 $i$。每个人有一个票数 $a_i$ 和花费 $w_i$。\n\n得票数量**严格**超过总票数一半的人可以当选总统。\n\n初始时所有人都处于**未被控制**状态。每一个时刻，任何一个**未被控制**且**之前一直在等待**的人 $i$ 都可以做出三种选择之一：\n\n1. 进行一次**对 $v$ 投票**操作：将自己的 $a_i$ 票花费 $w_i$ 的代价投给人 $v$。\n2. 进行一次**对 $v$ 揽票**操作：\n\t- 花费 $w_i$ 选中人 $v$，需要满足 $p_i$ 是 $p_v$ 的一个 border。\n\t- $\\forall j\\in[0,n]$，若 $p_v$ 是 $p_j$ 的一个 border，且 $j$ 在此时刻**未被控制**，则 $j$ 下一时刻变为**被控制**，他的 $a_j$ 票都花费 $w_j$ 投给 $i$。\n3. 等待下一个时刻。\n\n每个候选人都希望其他人不会成为总统，且都是绝顶聪明的。**特别地**，当他们的操作出现了交叉导致一个人的票需要投给多人时，被交叉者的票可以分别独立投出并都有效（你可以理解为他的票分裂了）。因此，总统可能有多个。\n\n你可以干涉这个过程。具体来说，你可以在 $0$ 时刻操作一个候选人 $x$，让 $x$ 进行指定的一种选择，并钦定选择涉及的所有变量。$x$ 此后不能再做任何选择，剩下的人必须从 $1$ 时刻再开始选择。你干涉的代价就是 $x$ 这次选择的总花费。\n\n票数 $a$ 和花费 $w$ 都会发生 $q$ 次变化。\n\n每一次变化会改变票数 $a$ 中的某一项或是花费 $w$ 中的某一项。票数 $a$ 可能会变为任意正整数，花费 $w$ 只会变小或者不变。\n\n在每次变化之后，你都需要找到这样一个人 $x$，满足你有一种干涉他的方案使得他一定可以成为总统，且你干涉的代价最小。你只需要输出这个最小代价。\n\n可以证明一定存在这样的人。\n\n本题**强制在线**。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行三个整数 $n,q,type$，表示字符串长度、修改次数、是否强制在线。\n\n接下来一行一个长度为 $n$ 的字符串 $S$。保证 $S$ 中只含有小写英文字母。\n\n接下来 $n+1$ 行，每行两个整数 $a_i,w_i$，依次表示候选人 $0$ 到 $n$ 的初始票数和花费。\n\n接下来 $q$ 行，每行三个整数 $o',p',x'$。设 $lst$ 表示上一次输出的答案的绝对值，则 $o\\gets o'\\oplus(type\\times lst),p\\gets p'\\oplus(type\\times lst),x\\gets (|x'|\\oplus(type\\times lst))\\times (-1)^{[x'\\leq 0]}$（其中 $[x'\\leq 0]$ 为[艾佛森括号](https://baike.baidu.com/item/%E8%89%BE%E4%BD%9B%E6%A3%AE%E6%8B%AC%E5%8F%B7/22361197)），然后：\n\n1. $o=1$ 时，将 $a_p$ 修改为 $x$。\n2. $o=2$ 时，将 $w_p$ 修改为 $w_p'=x$。保证 $w_p\\geq w_p'$。", "outputFormat": "共 $q+1$ 行。\n\n第一行输出在初始状态下你干涉的最小代价。\n\n之后，在每次修改后输出你此时干涉的最小代价，共 $q$ 行。", "hint": "#### 样例 #1 解释\n\n对于第一组数据：\n\n考虑第一次修改之前。全场共有 $11$ 票，则当选总统需要 $>5.5$ 票。\n\n干涉 $0$ 号候选人，且选择第一种选择，使用 $w_0=1$ 的花费进行一次**对 $0$ 投票**操作后，$0$ 号候选人得到 $6$ 票，直接达到了总统要求，可以证明这是花费最小的答案。\n\n第一次修改后，全场共有 $7$ 票，则当选总统需要 $>3.5$ 票。\n\n干涉 $1$ 号候选人，且选择第二种选择，进行一次**对 $1$ 揽票**操作后，$1$ 号候选人将得到 $5$ 票，总花费为 $-1+(-1)+2=0$。他直接达到了总统要求，可以证明这是花费最小的答案。\n\n对于第三组数据，去掉强制在线后的修改操作为：\n\n- $o=2,p=3,x=5$；\n- $o=1,p=5,x=100$；\n- $o=1,p=5,x=1$；\n- $o=2,p=1,x=-8$；\n- $o=2,p=5,x=0$；\n- $o=1,p=2,x=4$。\n\n### 数据范围\n\n**请注意常数因子对程序效率的影响。**\n\n**本题开启子任务捆绑与子任务依赖。**\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 2000$，$1\\leq n\\leq 10^5$，$0\\leq q\\leq 10^5$，$0\\leq type\\leq 1$，且在任何时候都保证 $1\\leq a_i\\leq 2\\times 10^9$，$|w_i|\\leq 2\\times 10^9$。\n\n保证字符串中只含有小写字母。\n\n对于任意一次修改，保证 $o$ 为 $1$ 或 $2$，且 $0\\leq p\\leq n$。在 $o=1$ 时，$1\\leq x\\leq 2\\times 10^9$；$o=2$ 时，$0\\leq |x|\\leq 2\\times 10^9$。\n\n特别地，$w_i$ 中的每一项在被操作的过程中一定单调不递增。\n\n| Subtask | $T\\leq$ | $n,q\\leq$ | $a_i,\\lvert w_i\\rvert \\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $2000$ | $20$ | $10^5$ | 无 | $5$ | 无 |\n| 2 | $2000$ | $200$ | $10^5$ | 无 | $10$ | 1 |\n| 3 | $3$ | $10^5$ | $2\\times 10^9$ | $A$ | $15$ | 无 |\n| 4 | $3$ | $10^5$ | $2\\times 10^9$ | $B$ | $5$ | 无 |\n| 5 | $3$ | $10^5$ | $2\\times 10^9$ | $C$ | $15$ | 无 |\n| 6 | $3$ | $10^5$ | $2\\times 10^9$ | $D$ | $20$ | 无 |\n| 7 | $3$ | $10^5$ | $2\\times 10^9$ | 无 | $30$ | 1,2,3,4,5,6 |\n\n特殊性质 $A$：保证 $o\\neq 2$。\n\n特殊性质 $B$：保证字符串中的每一个字符都在 $26$ 个小写字母中独立均匀随机。\n\n特殊性质 $C$：字符串中只含有 $\\texttt{a}$。\n\n特殊性质 $D$：保证 $type=0$。", "locale": "zh-CN"}}}
{"pid": "P10797", "type": "P", "difficulty": 3, "samples": [["1\n2 1", "3"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "位运算"], "title": "「CZOI-R1」进制", "background": "", "description": "你有一个数 $x$，你需要对它进行 $n$ 次操作。\n\n每次操作，你可以选择 $y$ 进制下的数 $x$ 的某**一个**有效位上数值增加 $1$。  \n第一个非零数位及其后面的数位是有效位。\n\n注意：\n* **对于每次操作**，你可以任意取 $y\\in[2,+\\infty)$；\n* 你需保证增加操作不会使 $y$ 进制下的数 $x$ 产生进位。\n\n现在你需要求 $n$ 次操作后这个数最大是多少。\n\n答案以十进制输出，并对 $10^9+7$ 取模。你需要输出的是这个数的最大值对 $10^9+7$ 取模的结果，而并非对 $10^9+7$ 取模后的最大值。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行两个整数 $x,n$，分别表示初始数字、操作次数。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示 $x$ 进行 $n$ 次操作后的最大值。", "hint": "**【样例解释】**\n\n很明显，$2$ 在二进制时为 $10$，在三或更高进制时为 $2$。\n\n二进制时，在第一位 $+1$ 会导致二进制产生进位，只能在第二位 $+1$，此时得到的结果为 $11$，转换为十进制为 $3$。\n\n在三或更高进制时，只能往末位 $+1$，三进制下会产生进位，舍去。四或更高进制时得到结果均为 $3$，转化为十进制的结果也是 $3$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n- Subtask #1（$20\\text{ pts}$）：$x\\le 2$。\n- Subtask #2（$20\\text{ pts}$）：$n=1$。\n- Subtask #3（$60\\text{ pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le x,n\\le10^9$，$1\\le T\\le10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CZOI-R1」进制", "background": "", "description": "你有一个数 $x$，你需要对它进行 $n$ 次操作。\n\n每次操作，你可以选择 $y$ 进制下的数 $x$ 的某**一个**有效位上数值增加 $1$。  \n第一个非零数位及其后面的数位是有效位。\n\n注意：\n* **对于每次操作**，你可以任意取 $y\\in[2,+\\infty)$；\n* 你需保证增加操作不会使 $y$ 进制下的数 $x$ 产生进位。\n\n现在你需要求 $n$ 次操作后这个数最大是多少。\n\n答案以十进制输出，并对 $10^9+7$ 取模。你需要输出的是这个数的最大值对 $10^9+7$ 取模的结果，而并非对 $10^9+7$ 取模后的最大值。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行两个整数 $x,n$，分别表示初始数字、操作次数。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示 $x$ 进行 $n$ 次操作后的最大值。", "hint": "**【样例解释】**\n\n很明显，$2$ 在二进制时为 $10$，在三或更高进制时为 $2$。\n\n二进制时，在第一位 $+1$ 会导致二进制产生进位，只能在第二位 $+1$，此时得到的结果为 $11$，转换为十进制为 $3$。\n\n在三或更高进制时，只能往末位 $+1$，三进制下会产生进位，舍去。四或更高进制时得到结果均为 $3$，转化为十进制的结果也是 $3$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n- Subtask #1（$20\\text{ pts}$）：$x\\le 2$。\n- Subtask #2（$20\\text{ pts}$）：$n=1$。\n- Subtask #3（$60\\text{ pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le x,n\\le10^9$，$1\\le T\\le10^6$。", "locale": "zh-CN"}}}
{"pid": "P10798", "type": "P", "difficulty": 4, "samples": [["8\n3 2 1 2 3 -1 3 3", "2"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "O2优化", "ST 表", "单调栈"], "title": "「CZOI-R1」消除威胁", "background": "**本题数据已修复。**", "description": "给定一个序列 $\\{A_n\\}$。\n\n我们称序列 $A$ 中的一个区间 $[l,r]$ 具有威胁，当且仅当 $1\\le l<r\\le n$ 且 $A_l=A_r$，且 $\\forall i\\in[l,r]$ 满足 $|A_i|\\le|A_l|$。\n\n你可以操作 $A$ 任意次，每次操作选择一个 $A_i$ 修改为 $-A_i$。请问最后序列 $A$ 中具有威胁的**不同**区间**最少**有多少个？\n\n\n\n两个区间 $[l_1,r_1]$ 和 $[l_2,r_2]$ 不同，当且仅当 $l_1 \\ne l_2$ 或 $r_1 \\ne r_2$。\n\n", "inputFormat": "第一行一个整数 $n$ ，表示 $A$ 的长度。\n\n第二行 $n$ 个整数，表示 $\\{A_n\\}$。", "outputFormat": "第一行一个正整数，表示**最少**的具有威胁的区间个数。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试**。\n- Subtask #1（$10\\text{ pts}$）：$n\\le10$。\n- Subtask #2（$10\\text{ pts}$）：$n\\le10^3$。\n- Subtask #3（$10\\text{ pts}$）：$|A_i|\\le60$。\n- Subtask #4（$10\\text{ pts}$）：$|A_i|$ 均相等。\n- Subtask #5（$20\\text{ pts}$）：$n\\le10^5$。\n- Subtask #6（$40\\text{ pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le5\\times10^5$，$|A_i|\\le10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CZOI-R1」消除威胁", "background": "**本题数据已修复。**", "description": "给定一个序列 $\\{A_n\\}$。\n\n我们称序列 $A$ 中的一个区间 $[l,r]$ 具有威胁，当且仅当 $1\\le l<r\\le n$ 且 $A_l=A_r$，且 $\\forall i\\in[l,r]$ 满足 $|A_i|\\le|A_l|$。\n\n你可以操作 $A$ 任意次，每次操作选择一个 $A_i$ 修改为 $-A_i$。请问最后序列 $A$ 中具有威胁的**不同**区间**最少**有多少个？\n\n\n\n两个区间 $[l_1,r_1]$ 和 $[l_2,r_2]$ 不同，当且仅当 $l_1 \\ne l_2$ 或 $r_1 \\ne r_2$。\n\n", "inputFormat": "第一行一个整数 $n$ ，表示 $A$ 的长度。\n\n第二行 $n$ 个整数，表示 $\\{A_n\\}$。", "outputFormat": "第一行一个正整数，表示**最少**的具有威胁的区间个数。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试**。\n- Subtask #1（$10\\text{ pts}$）：$n\\le10$。\n- Subtask #2（$10\\text{ pts}$）：$n\\le10^3$。\n- Subtask #3（$10\\text{ pts}$）：$|A_i|\\le60$。\n- Subtask #4（$10\\text{ pts}$）：$|A_i|$ 均相等。\n- Subtask #5（$20\\text{ pts}$）：$n\\le10^5$。\n- Subtask #6（$40\\text{ pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le5\\times10^5$，$|A_i|\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P10799", "type": "P", "difficulty": 5, "samples": [["5 5\n1 2 3 4 5\n1 2\n1 3\n2 4\n2 5\n2 1 2\n2 3 4\n1 3 5 4\n2 2 3\n2 1 5", "0110"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "倍增", "树状数组", "O2优化", "最近公共祖先 LCA", "树链剖分"], "title": "「CZOI-R1」三角形与树", "background": "CaiZi 讨厌三角形，但是他喜欢树。\n\n2024.8.15 Update：增加了一组 hack 数据。", "description": "给定一颗有 $n$ 个点的树，节点编号为 $1\\sim n$，每个点有点权，开始时点 $i$ 的点权为 $a_i$。共有 $q$ 次操作。\n1. 将点 $x$ 到点 $y$ 的简单路径上的点的点权**异或** $k$。\n1. 判断能否在点 $x$ 到点 $y$ 的简单路径上选 $3$ 个**不同点**，并以这 $3$ 个点的点权为边长构成**三角形**。特别的，如果无法选出 $3$ 个点，也视为不能构成**三角形**。\n\n点 $x$ 到点 $y$ 的简单路径：点 $x$ 到点 $y$ 不重复走过任何一条边的路径。其上的所有点为这条路径上所有的点，**包括**点 $x$ 和点 $y$。\n\n**保证任何时刻不会有任何一个点的点权为 $0$。**", "inputFormat": "第一行输入 $2$ 个整数 $n,q$，分别表示这棵树点的个数、操作的个数。\n\n第二行输入 $n$ 个整数 $a_i$，表示开始时点 $i$ 的点权。\n\n接下来 $n-1$ 行，每行输入 $2$ 个整数 $u,v$，表示这棵树的一条边。\n\n接下来 $q$ 行，每行先输入 $1$ 个整数 $s$，表示操作类型。\n- 若 $s=1$，则再输入 $3$ 个整数 $u,v,w$，表示一次修改操作。\n- 若 $s=2$，则再输入 $2$ 个整数 $u,v$，表示一次询问操作。", "outputFormat": "对于每次询问操作，若能满足条件输出 $1$，否则输出 $0$，无需空格或换行。", "hint": "**【样例解释】**\n\n第 $1$ 次操作时简单路径上的点权少于 $3$ 个。  \n第 $2$ 次操作时简单路径上的点权分别为 $1,2,3,4$。  \n第 $3$ 次操作后点 $1\\sim n$ 的点权分别为 $5,6,7,4,1$。  \n第 $4$ 次操作时简单路径上的点权分别为 $5,6,7$。  \n第 $5$ 次操作时简单路径上的点权分别为 $1,5,6$。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n- Subtask #1（$8\\text{ pts}$）：$n,q\\le3\\times10^3$。\n- Subtask #2（$8\\text{ pts}$）：保证这棵树是一朵菊花。\n- Subtask #3（$20\\text{ pts}$）：每次修改操作时 $x=y$。\n- Subtask #4（$24\\text{ pts}$）：保证这棵树是一条链。\n- Subtask #5（$40\\text{ pts}$）：无特殊性质。**依赖 Subtask #1 到 Subtask #4。**\n\n对于 $100\\%$ 的数据，$1\\le u,v\\le n\\le10^5$，$1\\le q\\le10^5$，$s\\in\\{1,2\\}$，$1\\le a_i,w\\le 2^{31}-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CZOI-R1」三角形与树", "background": "CaiZi 讨厌三角形，但是他喜欢树。\n\n2024.8.15 Update：增加了一组 hack 数据。", "description": "给定一颗有 $n$ 个点的树，节点编号为 $1\\sim n$，每个点有点权，开始时点 $i$ 的点权为 $a_i$。共有 $q$ 次操作。\n1. 将点 $x$ 到点 $y$ 的简单路径上的点的点权**异或** $k$。\n1. 判断能否在点 $x$ 到点 $y$ 的简单路径上选 $3$ 个**不同点**，并以这 $3$ 个点的点权为边长构成**三角形**。特别的，如果无法选出 $3$ 个点，也视为不能构成**三角形**。\n\n点 $x$ 到点 $y$ 的简单路径：点 $x$ 到点 $y$ 不重复走过任何一条边的路径。其上的所有点为这条路径上所有的点，**包括**点 $x$ 和点 $y$。\n\n**保证任何时刻不会有任何一个点的点权为 $0$。**", "inputFormat": "第一行输入 $2$ 个整数 $n,q$，分别表示这棵树点的个数、操作的个数。\n\n第二行输入 $n$ 个整数 $a_i$，表示开始时点 $i$ 的点权。\n\n接下来 $n-1$ 行，每行输入 $2$ 个整数 $u,v$，表示这棵树的一条边。\n\n接下来 $q$ 行，每行先输入 $1$ 个整数 $s$，表示操作类型。\n- 若 $s=1$，则再输入 $3$ 个整数 $u,v,w$，表示一次修改操作。\n- 若 $s=2$，则再输入 $2$ 个整数 $u,v$，表示一次询问操作。", "outputFormat": "对于每次询问操作，若能满足条件输出 $1$，否则输出 $0$，无需空格或换行。", "hint": "**【样例解释】**\n\n第 $1$ 次操作时简单路径上的点权少于 $3$ 个。  \n第 $2$ 次操作时简单路径上的点权分别为 $1,2,3,4$。  \n第 $3$ 次操作后点 $1\\sim n$ 的点权分别为 $5,6,7,4,1$。  \n第 $4$ 次操作时简单路径上的点权分别为 $5,6,7$。  \n第 $5$ 次操作时简单路径上的点权分别为 $1,5,6$。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n- Subtask #1（$8\\text{ pts}$）：$n,q\\le3\\times10^3$。\n- Subtask #2（$8\\text{ pts}$）：保证这棵树是一朵菊花。\n- Subtask #3（$20\\text{ pts}$）：每次修改操作时 $x=y$。\n- Subtask #4（$24\\text{ pts}$）：保证这棵树是一条链。\n- Subtask #5（$40\\text{ pts}$）：无特殊性质。**依赖 Subtask #1 到 Subtask #4。**\n\n对于 $100\\%$ 的数据，$1\\le u,v\\le n\\le10^5$，$1\\le q\\le10^5$，$s\\in\\{1,2\\}$，$1\\le a_i,w\\le 2^{31}-1$。", "locale": "zh-CN"}}}
{"pid": "P10800", "type": "P", "difficulty": 7, "samples": [["5 5\n2 2 1 2\n3 4 2 4\n4 3 2 2\n1 4 2 3\n1 2 4 4\n", "32\n"], ["10 10\n7 8 5 2\n5 9 9 4\n3 8 4 3\n5 6 5 1\n5 5 2 4\n9 5 5 1\n3 7 2 5\n4 4 5 4\n9 6 1 5\n3 7 3 7\n", "243\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["线段树", "树状数组", "O2优化"], "title": "「CZOI-R1」卡牌", "background": "Alice 和 Bob 正在玩卡牌游戏。\n", "description": "每张卡牌有四个属性：攻击、防御、速度、血量。\n\n我们称一张卡牌能胜过另一张卡牌，当且仅当其至少有三个属性都大于另一张卡牌。\n\nBob 拥有 $m$ 张卡牌，而 Alice 拥有每个属性值在 $[1, n]$ 的所有 $n^4$ 张卡牌。\n\n现在 Alice 想知道：她有多少张卡牌可以胜过所有 Bob 的卡牌？", "inputFormat": "第一行包含两个整数 $n, m$，分别表示属性值上限和 Bob 的卡牌数量。\n\n接下来 $m$ 行，每行四个整数 $a_i, b_i, c_i, d_i$，表示 Bob 一张卡牌的属性。", "outputFormat": "输出一行一个整数，表示答案对 $2^{32}$ 取模后的结果。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（$10\\text{ pts}$）：$n, m \\le 50$。\n- Subtask #2（$10\\text{ pts}$）：$n, m \\le 5 \\times 10^3$。\n- Subtask #3（$20\\text{ pts}$）：$d_i = 1$。\n- Subtask #4（$20\\text{ pts}$）：$n, m \\le 10^5$。\n- Subtask #5（$40\\text{ pts}$）：无特殊限制。\n\n对于所有测试数据，$1 \\le n, m \\le 5 \\times 10^5$，$1 \\le a_i, b_i, c_i, d_i \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CZOI-R1」卡牌", "background": "Alice 和 Bob 正在玩卡牌游戏。\n", "description": "每张卡牌有四个属性：攻击、防御、速度、血量。\n\n我们称一张卡牌能胜过另一张卡牌，当且仅当其至少有三个属性都大于另一张卡牌。\n\nBob 拥有 $m$ 张卡牌，而 Alice 拥有每个属性值在 $[1, n]$ 的所有 $n^4$ 张卡牌。\n\n现在 Alice 想知道：她有多少张卡牌可以胜过所有 Bob 的卡牌？", "inputFormat": "第一行包含两个整数 $n, m$，分别表示属性值上限和 Bob 的卡牌数量。\n\n接下来 $m$ 行，每行四个整数 $a_i, b_i, c_i, d_i$，表示 Bob 一张卡牌的属性。", "outputFormat": "输出一行一个整数，表示答案对 $2^{32}$ 取模后的结果。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（$10\\text{ pts}$）：$n, m \\le 50$。\n- Subtask #2（$10\\text{ pts}$）：$n, m \\le 5 \\times 10^3$。\n- Subtask #3（$20\\text{ pts}$）：$d_i = 1$。\n- Subtask #4（$20\\text{ pts}$）：$n, m \\le 10^5$。\n- Subtask #5（$40\\text{ pts}$）：无特殊限制。\n\n对于所有测试数据，$1 \\le n, m \\le 5 \\times 10^5$，$1 \\le a_i, b_i, c_i, d_i \\le n$。", "locale": "zh-CN"}}}
{"pid": "P10801", "type": "P", "difficulty": 6, "samples": [["7\n0 6 E\n0 8 E\n2 4 E\n4 2 S\n6 0 S\n6 2 S\n6 4 S", "7"], ["5\n4 0 S\n0 2 E\n2 2 E\n4 4 N\n6 6 W", "2\n5"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "Special Judge", "CEOI（中欧）"], "title": "[CEOI 2024] 海战", "background": "", "description": "**题目译自 [CEOI 2024](https://ceoi2024.fi.muni.cz/) Day1 T1「[Naval battle](https://ceoi2024.fi.muni.cz/page/tasks/statements/battle.pdf)」**\n\n捷克海军司令官翁德拉刚刚晋升为大元帅，正享受着新职位的安稳，却突然被政府通知海军将被裁撤。\n\n翁德拉决心证明捷克海军的重要性。他通过间谍得知，一场四国海军巨舰对决即将展开。如果能赢得这场战役，无疑能向政府有力地展示海军价值。\n\n然而，捷克海军既无战舰也无港口。但翁德拉想到，如果他的间谍能夺取几艘参战舰艇，或许还有一线生机。关键是，如何预知哪些船能在这场海战中幸存下来呢？\n\n海战规则如下：\n- 战前，第 $i$ 艘战舰位于坐标 $(x_i, y_i)$ 处，其中 $x_i$ 和 $y_i$ 均为偶数。每艘战舰隶属于北方、南方、东方或西方舰队之一。\n- 海战分回合进行。每回合：\n    - 每艘战舰同时向其所属舰队方向移动一格。\n    - 如果两艘或以上战舰占据同一格，它们将相撞沉没，从海图上消失。\n- 当不再发生碰撞时，海战结束。存活的战舰是指海战结束后仍留在海图上的战舰。\n\n各舰队战舰的移动方向及坐标变化如下：\n- 北方舰队：$y$ 坐标减 $1$\n- 南方舰队：$y$ 坐标加 $1$\n- 东方舰队：$x$ 坐标加 $1$\n- 西方舰队：$x$ 坐标减 $1$", "inputFormat": "第一行输入一个整数 $N$，代表参与海战的舰船总数。 接下来是 $N$ 行，每行包含三个用空格隔开的整数 $x_i, y_i, d_i$。$x_i$ 和 $y_i$ 表示第 $i$ 艘舰船的初始位置，字符 $d_i$ 表示第 $i$ 艘舰船所属舰队的方向，它可以是 `N`、`S`、`E` 或 `W` 之一。\n\n初始时没有两艘舰船的坐标相同。换句话说，对于任何两艘不同的舰船 $i$ 和 $j$，它们的横坐标 $x_i$ 和 $x_j$ 不可能同时相等，纵坐标 $y_i$ 和 $y_j$ 也不可能同时相等。", "outputFormat": "对于每艘存活的战舰，单独输出一行，包含该舰船的编号 $i\\ (1 \\leq i \\leq N)$。你可以按照任何顺序输出幸存舰船的编号。\n\n如果没有存活的战舰，则输出为空。", "hint": "**样例解释 1**\n\n初始战舰分布如下图：\n\n![battle-sample1-v2.svg](https://img.loj.ac.cn/2024/07/14/c9908b56ff284.svg)\n\n海战过程：\n- 第 $2$ 回合，战舰 $3$ 和 $4$ 在 $(4, 4)$ 处相撞。\n- 第 $6$ 回合，战舰 $1$ 和 $5$ 在 $(6, 6)$ 处相撞，战舰 $2$ 和 $6$ 在 $(6, 8)$ 处相撞。\n\n最终仅剩战舰 $7$ 存活。\n\n\n**样例解释 2**\n\n初始战舰分布如下图：\n\n![battle-sample2.svg](https://img.loj.ac.cn/2024/07/14/59d352521ca5d.svg)\n\n第 $2$ 回合，战舰 $1$、$3$、$4$ 在 $(2, 4)$ 处相撞，战舰 $2$ 和 $5$ 存活。\n\n**数据范围与提示**\n\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 2 \\cdot 10^5$\n- $0 \\leq x_i, y_i \\leq 10^9\\ (1 \\leq i \\leq N)$，且 $x_i, y_i$ 均为偶数\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n|  $1$  | $N = 2$ | $6$  |\n|  $2$  | $N \\leq 100, x_i, y_i \\leq 100\\ (1\\leq i\\leq n)$ | $12$ |\n|  $3$  | $N \\leq 100, x_i, y_i \\leq 10^5\\ (1\\leq i\\leq n)$ | $8$ |\n|  $4$  | $N \\leq 200$ | $11$ |\n|  $5$  | $N \\leq 5\\,000$ | $9$ |\n|  $6$  | $d_i\\ (1 \\leq i \\leq N)$ 为 `S` 或 `E`  | $30$ |\n|  $7$  | 无附加限制| $24$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2024] 海战", "background": "", "description": "**题目译自 [CEOI 2024](https://ceoi2024.fi.muni.cz/) Day1 T1「[Naval battle](https://ceoi2024.fi.muni.cz/page/tasks/statements/battle.pdf)」**\n\n捷克海军司令官翁德拉刚刚晋升为大元帅，正享受着新职位的安稳，却突然被政府通知海军将被裁撤。\n\n翁德拉决心证明捷克海军的重要性。他通过间谍得知，一场四国海军巨舰对决即将展开。如果能赢得这场战役，无疑能向政府有力地展示海军价值。\n\n然而，捷克海军既无战舰也无港口。但翁德拉想到，如果他的间谍能夺取几艘参战舰艇，或许还有一线生机。关键是，如何预知哪些船能在这场海战中幸存下来呢？\n\n海战规则如下：\n- 战前，第 $i$ 艘战舰位于坐标 $(x_i, y_i)$ 处，其中 $x_i$ 和 $y_i$ 均为偶数。每艘战舰隶属于北方、南方、东方或西方舰队之一。\n- 海战分回合进行。每回合：\n    - 每艘战舰同时向其所属舰队方向移动一格。\n    - 如果两艘或以上战舰占据同一格，它们将相撞沉没，从海图上消失。\n- 当不再发生碰撞时，海战结束。存活的战舰是指海战结束后仍留在海图上的战舰。\n\n各舰队战舰的移动方向及坐标变化如下：\n- 北方舰队：$y$ 坐标减 $1$\n- 南方舰队：$y$ 坐标加 $1$\n- 东方舰队：$x$ 坐标加 $1$\n- 西方舰队：$x$ 坐标减 $1$", "inputFormat": "第一行输入一个整数 $N$，代表参与海战的舰船总数。 接下来是 $N$ 行，每行包含三个用空格隔开的整数 $x_i, y_i, d_i$。$x_i$ 和 $y_i$ 表示第 $i$ 艘舰船的初始位置，字符 $d_i$ 表示第 $i$ 艘舰船所属舰队的方向，它可以是 `N`、`S`、`E` 或 `W` 之一。\n\n初始时没有两艘舰船的坐标相同。换句话说，对于任何两艘不同的舰船 $i$ 和 $j$，它们的横坐标 $x_i$ 和 $x_j$ 不可能同时相等，纵坐标 $y_i$ 和 $y_j$ 也不可能同时相等。", "outputFormat": "对于每艘存活的战舰，单独输出一行，包含该舰船的编号 $i\\ (1 \\leq i \\leq N)$。你可以按照任何顺序输出幸存舰船的编号。\n\n如果没有存活的战舰，则输出为空。", "hint": "**样例解释 1**\n\n初始战舰分布如下图：\n\n![battle-sample1-v2.svg](https://img.loj.ac.cn/2024/07/14/c9908b56ff284.svg)\n\n海战过程：\n- 第 $2$ 回合，战舰 $3$ 和 $4$ 在 $(4, 4)$ 处相撞。\n- 第 $6$ 回合，战舰 $1$ 和 $5$ 在 $(6, 6)$ 处相撞，战舰 $2$ 和 $6$ 在 $(6, 8)$ 处相撞。\n\n最终仅剩战舰 $7$ 存活。\n\n\n**样例解释 2**\n\n初始战舰分布如下图：\n\n![battle-sample2.svg](https://img.loj.ac.cn/2024/07/14/59d352521ca5d.svg)\n\n第 $2$ 回合，战舰 $1$、$3$、$4$ 在 $(2, 4)$ 处相撞，战舰 $2$ 和 $5$ 存活。\n\n**数据范围与提示**\n\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 2 \\cdot 10^5$\n- $0 \\leq x_i, y_i \\leq 10^9\\ (1 \\leq i \\leq N)$，且 $x_i, y_i$ 均为偶数\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n|  $1$  | $N = 2$ | $6$  |\n|  $2$  | $N \\leq 100, x_i, y_i \\leq 100\\ (1\\leq i\\leq n)$ | $12$ |\n|  $3$  | $N \\leq 100, x_i, y_i \\leq 10^5\\ (1\\leq i\\leq n)$ | $8$ |\n|  $4$  | $N \\leq 200$ | $11$ |\n|  $5$  | $N \\leq 5\\,000$ | $9$ |\n|  $6$  | $d_i\\ (1 \\leq i \\leq N)$ 为 `S` 或 `E`  | $30$ |\n|  $7$  | 无附加限制| $24$ |", "locale": "zh-CN"}}}
{"pid": "P10802", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "交互题", "Special Judge", "CEOI（中欧）"], "title": "[CEOI 2024] 核酸检测", "background": "", "description": "**题目译自 [CEOI 2024](https://ceoi2024.fi.muni.cz/) Day1 T2「[COVID tests](https://ceoi2024.fi.muni.cz/page/tasks/statements/covid.pdf)」**\n\n亚当的学校最近爆发了新一波 COVID 疫情。为了防止疫情进一步蔓延，学校决定用唾液抗原检测试剂对所有学生进行检测。\n\n由于老师们很久没用过这些试剂了，亚当自告奋勇地成为了检测志愿者。他拿到了来自 $N$ 个学生的唾液样本（出于隐私保护，他只能看到编号从 $0$ 到 $N-1$ 的标识符），他的任务是确定哪些样本呈阳性。\n\n然而，亚当很快意识到，挨个检测所有学生的样本实在太耗时费力了。他灵机一动，想到了一种比逐个检测更巧妙的方法。如果他将部分样本混合在一起进行检测，他就能知道整个混合物是全部阴性，还是至少有一个阳性。这样一来，他就可以通过这种方式减少所需的检测次数！\n\n每个样本的唾液量都足够进行多次检测。而且，这些检测试剂非常精准，同一个样本绝不会出现不同的检测结果。\n\n在这样的条件下，亚当希望优化检测流程，尽量减少使用的检测次数。但是他目前正在进行检测，所以优化过程就交给你啦！\n\n通过当地的统计数据，亚当了解到任何一个样本呈阳性的概率都等于 $P$，并且一个样本是阳性还是阴性不会影响其他样本的检测结果。也许你可以利用这些信息来帮助亚当优化检测方案？", "inputFormat": "这是一道交互题。\n\n你的程序将会处理若干个测试数据。每个测试数据（即程序的一次运行）中，你需要解决 $T$ 个不同的场景。所有场景中，学生数量 $N$ 和阳性样本概率 $P$ 都保持不变，但是哪些学生的样本呈阳性（很可能）在每个场景中都会不同。\n\n你可以自己实现交互协议，也可以使用提供的模板。你可以在「文件」中找到名为 `template.cpp` 的附件，它就是提供的模板。\n\n首先，你的程序应该从标准输入读取一行，包含空格隔开的三个整数 $N, P, T$，分别表示学生数量、阳性样本概率和场景数量。\n\n然后，程序可以向标准输出输出询问信息。每个询问信息应该单独占一行，格式为 `Q`、空格和一个长度为 $N$ 的字符串 $s$。字符串 $s$ 中的每个字符 $s_i$ 都为 `1` 或 `0`，`1` 表示应该将第 $i$ 个学生的样本加入混合物进行检测，`0` 表示不加入。输出完询问信息后，程序需要刷新标准输出缓冲区，然后从标准输入读取一个字符。这个字符会是 `P`（表示混合物中至少有一个样本呈阳性）或 `N`（表示混合物中所有样本均为阴性）。\n\n程序也可以输出最终答案。答案信息应该单独占一行，格式为 `A`、空格和一个长度为 $N$ 的字符串 $s$。字符串 $s$ 中的每个字符 $s_i$ 都为 `1` 或 `0`，`1` 表示第 $i$ 个学生的样本呈阳性，`0` 表示呈阴性。输出完答案信息后，程序同样需要刷新标准输出缓冲区，然后从标准输入读取一个字符。\n\n如果读取到的字符为 `C`，则表示你的答案正确。在这种情况下，程序可以开始处理下一个场景的询问，或者如果是第 $T$ 个场景的答案，则程序可以退出。\n\n如果读取到的字符为 `W`，则表示你的答案错误。程序应该立即退出。\n\n请注意，在收到 `W` 后退出对于交互器给出正确的反馈非常重要。如果你的程序继续运行，它可能会崩溃或收到其他错误的判定。\n\n交互器不会根据你的程序运行结果来动态调整测试数据。这意味着每个样本的阳性与否会在程序运行之前就确定好。并且，每个样本的阳性与否都是通过公平的随机数生成器，以概率 $P$ 独立决定的。\n\n如果你使用 `template.cpp` 中的交互协议实现，你需要实现函数 `std::vector<bool> find_positive()`。这个函数会在每个场景中被调用一次。它需要返回一个长度为 $N$ 的布尔型向量，其中第 $i$ 个元素为 `true` 当且仅当第 $i$ 个学生的样本呈阳性。\n\n实现过程中，你可以使用函数 `bool test_students(std::vector<bool> mask)`。这个函数可以对部分样本进行混合检测。它唯一的参数是一个长度为 $N$ 的布尔型数组，其中第 $i$ 个元素为 `true` 表示应该将第 $i$ 个样本加入混合物进行检测。该函数返回 `true` 当且仅当混合物中至少有一个样本呈阳性。\n\n你也可以使用全局变量 `N` 和 `P`，它们分别代表着总学生人数和阳性样本概率。你可以在 `main` 函数中，首次调用 `scanf` 之后进行初始化操作。\n\n| 示例输入 | 示例输出 |\n|------------|----------------|\n| `10 0.4 2` |                |\n|            | `Q 1000000000` |\n| `P`        |                |\n|            | `Q 0000001000` |\n| `P`        |                |\n|            | `Q 0000000001` |\n| `P`        |                |\n|            | `Q 0111110110` |\n| `N`        |                |\n|            | `A 1000001001` |\n| `C`        |                |\n|            | `A 0000000000` |\n| `W`        | &nbsp;         |\n", "outputFormat": "", "hint": "本题分为两个子任务。\n\n#### Subtask 1 (10 分)\n\n- 学生总数 $N = 1000$\n- 场景数 $T = 1$\n- 阳性样本概率 $P$ 在 $0$ 到 $1$ 之间\n\n如果程序能正确回答并且每个测试数据的询问次数不超过 $2$ 倍的总学生人数 $2N$，则认为该程序通过测试。\n\n#### Subtask2 (90 分)\n\n- 学生总数 $N = 1000$\n- 场景数 $T = 300$\n- 阳性样本概率 $P$ 在 $0.001$ 到 $0.2$ 之间\n\n该子任务具有部分分。\n\n如果你的程序在任何场景的回答错误，你将得 $0$ 分。否则，每个测试数据的得分将基于平均询问次数计算。一般来说，询问次数越少，得分越高。记作程序在所有场景的平均询问次数为 $Q$，四舍五入到小数点后一位。对于每个测试数据，我们计算了一个值 $F$（见下文）。给定测试数据的得分将根据以下规则计算：\n\n- 如果 $Q > 10$ 倍的 $F$，你将得 $0$ 分 (错误答案)。\n- 如果 $F < Q \\leq 10$ 倍的 $F$，得分由以下公式计算：\n  $$ 90 \\cdot \\frac{F}{F + 4 \\cdot (Q-F)} $$\n- 如果 $Q \\leq F$，你将获得满分 $90$ 分。\n\n你的程序将会在不同 $P$ 值的测试数据上进行评分。你将获得的总分是所有测试数据（所有概率 $P$）中的最低分。\n\n测试数据如下：\n\n| $P$ | $F$ |\n|-------|-------|\n| $0.001$ | $15.1$ |\n| $0.005256$ | $51.1$ |\n| $0.011546$ | $94.9$ |\n| $0.028545$ | $191.5$ |\n| $0.039856$ | $246.3$ |\n| $0.068648$ | $366.2$ |\n| $0.104571$ | $490.3$ |\n| $0.158765$ | $639.1$ |\n| $0.2$ | $731.4$ |\n\n交互器会为每个测试数据提供反馈。这些反馈将包括你在得分非零的测试数据上的平均询问次数 $Q$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2024] 核酸检测", "background": "", "description": "**题目译自 [CEOI 2024](https://ceoi2024.fi.muni.cz/) Day1 T2「[COVID tests](https://ceoi2024.fi.muni.cz/page/tasks/statements/covid.pdf)」**\n\n亚当的学校最近爆发了新一波 COVID 疫情。为了防止疫情进一步蔓延，学校决定用唾液抗原检测试剂对所有学生进行检测。\n\n由于老师们很久没用过这些试剂了，亚当自告奋勇地成为了检测志愿者。他拿到了来自 $N$ 个学生的唾液样本（出于隐私保护，他只能看到编号从 $0$ 到 $N-1$ 的标识符），他的任务是确定哪些样本呈阳性。\n\n然而，亚当很快意识到，挨个检测所有学生的样本实在太耗时费力了。他灵机一动，想到了一种比逐个检测更巧妙的方法。如果他将部分样本混合在一起进行检测，他就能知道整个混合物是全部阴性，还是至少有一个阳性。这样一来，他就可以通过这种方式减少所需的检测次数！\n\n每个样本的唾液量都足够进行多次检测。而且，这些检测试剂非常精准，同一个样本绝不会出现不同的检测结果。\n\n在这样的条件下，亚当希望优化检测流程，尽量减少使用的检测次数。但是他目前正在进行检测，所以优化过程就交给你啦！\n\n通过当地的统计数据，亚当了解到任何一个样本呈阳性的概率都等于 $P$，并且一个样本是阳性还是阴性不会影响其他样本的检测结果。也许你可以利用这些信息来帮助亚当优化检测方案？", "inputFormat": "这是一道交互题。\n\n你的程序将会处理若干个测试数据。每个测试数据（即程序的一次运行）中，你需要解决 $T$ 个不同的场景。所有场景中，学生数量 $N$ 和阳性样本概率 $P$ 都保持不变，但是哪些学生的样本呈阳性（很可能）在每个场景中都会不同。\n\n你可以自己实现交互协议，也可以使用提供的模板。你可以在「文件」中找到名为 `template.cpp` 的附件，它就是提供的模板。\n\n首先，你的程序应该从标准输入读取一行，包含空格隔开的三个整数 $N, P, T$，分别表示学生数量、阳性样本概率和场景数量。\n\n然后，程序可以向标准输出输出询问信息。每个询问信息应该单独占一行，格式为 `Q`、空格和一个长度为 $N$ 的字符串 $s$。字符串 $s$ 中的每个字符 $s_i$ 都为 `1` 或 `0`，`1` 表示应该将第 $i$ 个学生的样本加入混合物进行检测，`0` 表示不加入。输出完询问信息后，程序需要刷新标准输出缓冲区，然后从标准输入读取一个字符。这个字符会是 `P`（表示混合物中至少有一个样本呈阳性）或 `N`（表示混合物中所有样本均为阴性）。\n\n程序也可以输出最终答案。答案信息应该单独占一行，格式为 `A`、空格和一个长度为 $N$ 的字符串 $s$。字符串 $s$ 中的每个字符 $s_i$ 都为 `1` 或 `0`，`1` 表示第 $i$ 个学生的样本呈阳性，`0` 表示呈阴性。输出完答案信息后，程序同样需要刷新标准输出缓冲区，然后从标准输入读取一个字符。\n\n如果读取到的字符为 `C`，则表示你的答案正确。在这种情况下，程序可以开始处理下一个场景的询问，或者如果是第 $T$ 个场景的答案，则程序可以退出。\n\n如果读取到的字符为 `W`，则表示你的答案错误。程序应该立即退出。\n\n请注意，在收到 `W` 后退出对于交互器给出正确的反馈非常重要。如果你的程序继续运行，它可能会崩溃或收到其他错误的判定。\n\n交互器不会根据你的程序运行结果来动态调整测试数据。这意味着每个样本的阳性与否会在程序运行之前就确定好。并且，每个样本的阳性与否都是通过公平的随机数生成器，以概率 $P$ 独立决定的。\n\n如果你使用 `template.cpp` 中的交互协议实现，你需要实现函数 `std::vector<bool> find_positive()`。这个函数会在每个场景中被调用一次。它需要返回一个长度为 $N$ 的布尔型向量，其中第 $i$ 个元素为 `true` 当且仅当第 $i$ 个学生的样本呈阳性。\n\n实现过程中，你可以使用函数 `bool test_students(std::vector<bool> mask)`。这个函数可以对部分样本进行混合检测。它唯一的参数是一个长度为 $N$ 的布尔型数组，其中第 $i$ 个元素为 `true` 表示应该将第 $i$ 个样本加入混合物进行检测。该函数返回 `true` 当且仅当混合物中至少有一个样本呈阳性。\n\n你也可以使用全局变量 `N` 和 `P`，它们分别代表着总学生人数和阳性样本概率。你可以在 `main` 函数中，首次调用 `scanf` 之后进行初始化操作。\n\n| 示例输入 | 示例输出 |\n|------------|----------------|\n| `10 0.4 2` |                |\n|            | `Q 1000000000` |\n| `P`        |                |\n|            | `Q 0000001000` |\n| `P`        |                |\n|            | `Q 0000000001` |\n| `P`        |                |\n|            | `Q 0111110110` |\n| `N`        |                |\n|            | `A 1000001001` |\n| `C`        |                |\n|            | `A 0000000000` |\n| `W`        | &nbsp;         |\n", "outputFormat": "", "hint": "本题分为两个子任务。\n\n#### Subtask 1 (10 分)\n\n- 学生总数 $N = 1000$\n- 场景数 $T = 1$\n- 阳性样本概率 $P$ 在 $0$ 到 $1$ 之间\n\n如果程序能正确回答并且每个测试数据的询问次数不超过 $2$ 倍的总学生人数 $2N$，则认为该程序通过测试。\n\n#### Subtask2 (90 分)\n\n- 学生总数 $N = 1000$\n- 场景数 $T = 300$\n- 阳性样本概率 $P$ 在 $0.001$ 到 $0.2$ 之间\n\n该子任务具有部分分。\n\n如果你的程序在任何场景的回答错误，你将得 $0$ 分。否则，每个测试数据的得分将基于平均询问次数计算。一般来说，询问次数越少，得分越高。记作程序在所有场景的平均询问次数为 $Q$，四舍五入到小数点后一位。对于每个测试数据，我们计算了一个值 $F$（见下文）。给定测试数据的得分将根据以下规则计算：\n\n- 如果 $Q > 10$ 倍的 $F$，你将得 $0$ 分 (错误答案)。\n- 如果 $F < Q \\leq 10$ 倍的 $F$，得分由以下公式计算：\n  $$ 90 \\cdot \\frac{F}{F + 4 \\cdot (Q-F)} $$\n- 如果 $Q \\leq F$，你将获得满分 $90$ 分。\n\n你的程序将会在不同 $P$ 值的测试数据上进行评分。你将获得的总分是所有测试数据（所有概率 $P$）中的最低分。\n\n测试数据如下：\n\n| $P$ | $F$ |\n|-------|-------|\n| $0.001$ | $15.1$ |\n| $0.005256$ | $51.1$ |\n| $0.011546$ | $94.9$ |\n| $0.028545$ | $191.5$ |\n| $0.039856$ | $246.3$ |\n| $0.068648$ | $366.2$ |\n| $0.104571$ | $490.3$ |\n| $0.158765$ | $639.1$ |\n| $0.2$ | $731.4$ |\n\n交互器会为每个测试数据提供反馈。这些反馈将包括你在得分非零的测试数据上的平均询问次数 $Q$。", "locale": "zh-CN"}}}
{"pid": "P10803", "type": "P", "difficulty": 6, "samples": [["5\n3 1\n2 8\n7 10 9 9 0", "3"], ["5\n1 20\n3 25\n25 10 40 35 0", "16"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "2024", "CEOI（中欧）", "最短路"], "title": "[CEOI 2024] 文本编辑器", "background": "", "description": "**题目译自 [CEOI 2024](https://ceoi2024.fi.muni.cz/) Day1 T3「[Text editor](https://ceoi2024.fi.muni.cz/page/tasks/statements/editor.pdf)」**\n\n罗伯特正在参加 2024 年 CEOI 编程竞赛。他几乎完成了当天最难的一道题的代码，而且他确信能拿满分！但问题出在一个小小的细节上：他打错了一个字！更糟糕的是，他从 2008 年就开始使用的那只心爱鼠标彻底罢工了，一点反应也没有。因此，他只能用键盘上的方向键移动光标去找到那个错别字。\n\n罗伯特的程序有 $N$ 行，每行的长度分别为 $l_1, l_2, \\ldots , l_N$。罗伯特总是以空行作为程序的结尾，所以 $l_N = 0$。光标可以放在两个字符之间，也可以放在行的开头或结尾。因此，第 $i$ 行有 $l_i + 1$ 个可用的光标位置（称为列），编号从 $1$ 到 $l_i + 1$。例如，下面是光标位于第 $2$ 行第 $6$ 列的情况：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4p5zr0jw.png)\n\n罗伯特想把光标从第 $s_l$ 行的第 $s_c$ 列移动到第 $e_l$ 行的第 $e_c$ 列。他想求出最少需要的按键次数。\n\n水平方向键的使用比较简单。按下 **左键** 会将光标移动到前一列，除非光标位于行首，则会移动到前一行的行尾。类似地，按下 **右键** 会将光标移动到后一列，或者如果光标位于行尾，则会移动到下一行的行首。\n\n例如，**左键** 的移动可以像这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lig1idke.png)\n\n而 **右键** 的移动可以像这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zy9hu3u5.png)\n\n在文件的最开头按下 **左键** 或在文件的最结尾按下 **右键** 都不会有任何效果。\n\n垂直方向键的使用稍微复杂一些。按下 **上键** 会将光标移动到上一行，按下 **下键** 会将光标移动到下一行，列数不会改变。但是，如果这样会使光标超出新行的结尾，光标则会跳到该行末尾。\n\n例如，**上键** 的移动可以像这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2zixw04v.png)\n\n而 **下键** 的移动可以像这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wr5ld99o.png)\n\n如果按下 **上键** 或 **下键** 会把光标移动到不存在的行，则光标根本不会移动。", "inputFormat": "输入的第一行包含一个整数 $N$，表示罗伯特程序的行数。\n\n第二行包含两个空格隔开的整数 $s_l$ 和 $s_c$，表示初始光标位置。\n\n类似地，第三行包含两个空格隔开的整数 $e_l$ 和 $e_c$，表示目标光标位置。\n\n第四行包含 $N$ 个空格隔开的整数 $l_1, l_2, \\ldots , l_N$，表示每行的长度。", "outputFormat": "输出一行包含一个整数，表示将光标从 $(s_l, s_c)$ 移动到 $(e_l, e_c)$ 最少的按键次数。", "hint": "**样例解释 1**\n\n罗伯特可以通过按顺序按 **上键**、**左键** 和 **下键**三个键来将光标移动到目标位置：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wsz8bcr4.png)\n\n或者，他也可以通过按 **左键**、**上键** 和 **下键** 来同样快速地将光标移动到目标位置。\n\n**样例解释 2**\n\n可以很容易地证明，不可能使用最多两个按键到达目标位置。\n\n最短的可能按键序列是按两次 **下键** 然后按十四次 **右键**。\n\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 10^6$\n- $0 \\leq l_i \\leq 10^9\\ (1\\leq i\\leq n)$\n- $l_N = 0$\n- $1 \\leq s_l, e_l \\leq N$\n- $1 \\leq s_c \\leq l_{s_l} + 1$\n- $1 \\leq e_c \\leq l_{e_l} + 1$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n|  $1$  | $N \\leq 2$ | $5$  |\n|  $2$  | $N \\leq 1\\,000, l_i \\leq 5\\,000\\ (1 \\leq i \\leq N)$| $14$ |\n|  $3$  | $N \\leq 1\\,000$ | $26$ |\n|  $4$  | $l_i = l_j\\ (1 \\leq i, j \\leq N - 1)$ | $11$ |\n|  $5$  | 无附加限制| $44$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2024] 文本编辑器", "background": "", "description": "**题目译自 [CEOI 2024](https://ceoi2024.fi.muni.cz/) Day1 T3「[Text editor](https://ceoi2024.fi.muni.cz/page/tasks/statements/editor.pdf)」**\n\n罗伯特正在参加 2024 年 CEOI 编程竞赛。他几乎完成了当天最难的一道题的代码，而且他确信能拿满分！但问题出在一个小小的细节上：他打错了一个字！更糟糕的是，他从 2008 年就开始使用的那只心爱鼠标彻底罢工了，一点反应也没有。因此，他只能用键盘上的方向键移动光标去找到那个错别字。\n\n罗伯特的程序有 $N$ 行，每行的长度分别为 $l_1, l_2, \\ldots , l_N$。罗伯特总是以空行作为程序的结尾，所以 $l_N = 0$。光标可以放在两个字符之间，也可以放在行的开头或结尾。因此，第 $i$ 行有 $l_i + 1$ 个可用的光标位置（称为列），编号从 $1$ 到 $l_i + 1$。例如，下面是光标位于第 $2$ 行第 $6$ 列的情况：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4p5zr0jw.png)\n\n罗伯特想把光标从第 $s_l$ 行的第 $s_c$ 列移动到第 $e_l$ 行的第 $e_c$ 列。他想求出最少需要的按键次数。\n\n水平方向键的使用比较简单。按下 **左键** 会将光标移动到前一列，除非光标位于行首，则会移动到前一行的行尾。类似地，按下 **右键** 会将光标移动到后一列，或者如果光标位于行尾，则会移动到下一行的行首。\n\n例如，**左键** 的移动可以像这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lig1idke.png)\n\n而 **右键** 的移动可以像这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zy9hu3u5.png)\n\n在文件的最开头按下 **左键** 或在文件的最结尾按下 **右键** 都不会有任何效果。\n\n垂直方向键的使用稍微复杂一些。按下 **上键** 会将光标移动到上一行，按下 **下键** 会将光标移动到下一行，列数不会改变。但是，如果这样会使光标超出新行的结尾，光标则会跳到该行末尾。\n\n例如，**上键** 的移动可以像这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2zixw04v.png)\n\n而 **下键** 的移动可以像这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wr5ld99o.png)\n\n如果按下 **上键** 或 **下键** 会把光标移动到不存在的行，则光标根本不会移动。", "inputFormat": "输入的第一行包含一个整数 $N$，表示罗伯特程序的行数。\n\n第二行包含两个空格隔开的整数 $s_l$ 和 $s_c$，表示初始光标位置。\n\n类似地，第三行包含两个空格隔开的整数 $e_l$ 和 $e_c$，表示目标光标位置。\n\n第四行包含 $N$ 个空格隔开的整数 $l_1, l_2, \\ldots , l_N$，表示每行的长度。", "outputFormat": "输出一行包含一个整数，表示将光标从 $(s_l, s_c)$ 移动到 $(e_l, e_c)$ 最少的按键次数。", "hint": "**样例解释 1**\n\n罗伯特可以通过按顺序按 **上键**、**左键** 和 **下键**三个键来将光标移动到目标位置：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wsz8bcr4.png)\n\n或者，他也可以通过按 **左键**、**上键** 和 **下键** 来同样快速地将光标移动到目标位置。\n\n**样例解释 2**\n\n可以很容易地证明，不可能使用最多两个按键到达目标位置。\n\n最短的可能按键序列是按两次 **下键** 然后按十四次 **右键**。\n\n对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 10^6$\n- $0 \\leq l_i \\leq 10^9\\ (1\\leq i\\leq n)$\n- $l_N = 0$\n- $1 \\leq s_l, e_l \\leq N$\n- $1 \\leq s_c \\leq l_{s_l} + 1$\n- $1 \\leq e_c \\leq l_{e_l} + 1$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n|  $1$  | $N \\leq 2$ | $5$  |\n|  $2$  | $N \\leq 1\\,000, l_i \\leq 5\\,000\\ (1 \\leq i \\leq N)$| $14$ |\n|  $3$  | $N \\leq 1\\,000$ | $26$ |\n|  $4$  | $l_i = l_j\\ (1 \\leq i, j \\leq N - 1)$ | $11$ |\n|  $5$  | 无附加限制| $44$ |", "locale": "zh-CN"}}}
{"pid": "P10804", "type": "P", "difficulty": 4, "samples": [["4 3 2 2\n0 1 0 0\n.X.*\n....\n...X", "YES"], ["2 3 2 3\n0 1 0 0\n.X\n.*\n.X", "NO"]], "limits": {"time": [1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350, 1350], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["单调队列", "2024", "CEOI（中欧）", "广度优先搜索 BFS", "深度优先搜索 DFS", "前缀和"], "title": "[CEOI 2024] 玩具谜题", "background": "", "description": "**题目译自 [CEOI 2024](https://ceoi2024.fi.muni.cz/) Day2 T1「[Toy](https://ceoi2024.fi.muni.cz/page/tasks/statements/toy.pdf)」**\n\nCEOI 2024 的命题人 Ben 从科学委员会收到了一份礼物——一个玩具。这个玩具是个谜题，可以想象成一个 $H$ 行 $W$ 列的网格，上面放着一个金属物体。这个金属物体由两部分组成：一个横向的 $1$ 行 $K$ 列的部分和一个纵向的 $L$ 行 $1$ 列的部分，这两部分松散地连接在一起。它们都不能旋转，但可以在网格内水平或垂直滑动，只要它们始终重叠在一个方格上。\n\n网格里还有一些障碍物。金属物体的任何部分都不能穿过障碍物，更糟糕的是，它们也不能（即使部分）移出网格。Ben 的任务是将金属物体从指定起始位置移动到（可能不同的）目标位置，使得两部分重叠在指定的目标方格上。\n\n然而，Ben 玩这个玩具已经有一段时间了，还没有解开谜题。事实上，他开始怀疑组织者在捉弄他，给了他一个无解的谜题。因此，他向你求助，想知道这个谜题是否有解。", "inputFormat": "输入的第一行包含四个空格分隔的整数 $W, H, K, L$，分别表示谜题的宽度、高度、横向部分的宽度和纵向部分的高度。第二行包含四个整数 $x_h, y_h, x_v, y_v$，表示横向部分最左上角方格的坐标和纵向部分最左上角方格的坐标。\n\n行从上到下编号为 $0$ 到 $H-1$，列从左到右编号为 $0$ 到 $W-1$。$x$ 坐标表示列号，$y$ 坐标表示行号。\n\n接下来的 $H$ 行每行包含 $W$ 个字符，表示网格。字符 `.` 表示空方格，字符 `X` 表示障碍物，字符 `*` 表示目标方格。\n\n保证金属物体的初始位置合法，即两部分重叠在一个方格上，并且两部分不与障碍物重叠也不超出网格。\n\n只有一个目标方格，即玩具中只有一个字符 `*`，它可能与金属物体的初始位置重叠。", "outputFormat": "如果可以将金属物体移动到目标方格，则输出一行 `YES`，否则输出 `NO`。", "hint": "**样例解释 1**\n\n初始状态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/anp1jutg.png)\n\n我们可以先将纵向部分向下移动一格，然后尽可能地交替移动横向和纵向部分，直到无法继续。接着，我们可以将纵向部分向上并向右移动，到达目标方格，最后将横向部分向上移动，也到达目标方格。\n\n**样例解释 2**\n\n无法移动纵向部分而不碰到障碍物，因此永远无法到达目标方格。\n\n对于所有输入数据，满足：\n\n- $2 \\leq W, H \\leq 1\\,500$\n- $2 \\leq K \\leq W, 2 \\leq L \\leq H$\n- $0 \\leq x_h \\leq W - K, 0 \\leq y_h \\leq H - 1$\n- $0 \\leq x_v \\leq W - 1, 0 \\leq y_v \\leq H - L$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n|  $1$  | $W, H \\le 50$ | $14$  |\n|  $2$  | $W, H \\le 90$| $21$ |\n|  $3$  | $W, H \\le 300, K, L \\le 10$ | $9$ |\n|  $4$  | $W, H \\le 360$ | $29$ |\n|  $5$  | 无附加限制| $27$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2024] 玩具谜题", "background": "", "description": "**题目译自 [CEOI 2024](https://ceoi2024.fi.muni.cz/) Day2 T1「[Toy](https://ceoi2024.fi.muni.cz/page/tasks/statements/toy.pdf)」**\n\nCEOI 2024 的命题人 Ben 从科学委员会收到了一份礼物——一个玩具。这个玩具是个谜题，可以想象成一个 $H$ 行 $W$ 列的网格，上面放着一个金属物体。这个金属物体由两部分组成：一个横向的 $1$ 行 $K$ 列的部分和一个纵向的 $L$ 行 $1$ 列的部分，这两部分松散地连接在一起。它们都不能旋转，但可以在网格内水平或垂直滑动，只要它们始终重叠在一个方格上。\n\n网格里还有一些障碍物。金属物体的任何部分都不能穿过障碍物，更糟糕的是，它们也不能（即使部分）移出网格。Ben 的任务是将金属物体从指定起始位置移动到（可能不同的）目标位置，使得两部分重叠在指定的目标方格上。\n\n然而，Ben 玩这个玩具已经有一段时间了，还没有解开谜题。事实上，他开始怀疑组织者在捉弄他，给了他一个无解的谜题。因此，他向你求助，想知道这个谜题是否有解。", "inputFormat": "输入的第一行包含四个空格分隔的整数 $W, H, K, L$，分别表示谜题的宽度、高度、横向部分的宽度和纵向部分的高度。第二行包含四个整数 $x_h, y_h, x_v, y_v$，表示横向部分最左上角方格的坐标和纵向部分最左上角方格的坐标。\n\n行从上到下编号为 $0$ 到 $H-1$，列从左到右编号为 $0$ 到 $W-1$。$x$ 坐标表示列号，$y$ 坐标表示行号。\n\n接下来的 $H$ 行每行包含 $W$ 个字符，表示网格。字符 `.` 表示空方格，字符 `X` 表示障碍物，字符 `*` 表示目标方格。\n\n保证金属物体的初始位置合法，即两部分重叠在一个方格上，并且两部分不与障碍物重叠也不超出网格。\n\n只有一个目标方格，即玩具中只有一个字符 `*`，它可能与金属物体的初始位置重叠。", "outputFormat": "如果可以将金属物体移动到目标方格，则输出一行 `YES`，否则输出 `NO`。", "hint": "**样例解释 1**\n\n初始状态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/anp1jutg.png)\n\n我们可以先将纵向部分向下移动一格，然后尽可能地交替移动横向和纵向部分，直到无法继续。接着，我们可以将纵向部分向上并向右移动，到达目标方格，最后将横向部分向上移动，也到达目标方格。\n\n**样例解释 2**\n\n无法移动纵向部分而不碰到障碍物，因此永远无法到达目标方格。\n\n对于所有输入数据，满足：\n\n- $2 \\leq W, H \\leq 1\\,500$\n- $2 \\leq K \\leq W, 2 \\leq L \\leq H$\n- $0 \\leq x_h \\leq W - K, 0 \\leq y_h \\leq H - 1$\n- $0 \\leq x_v \\leq W - 1, 0 \\leq y_v \\leq H - L$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n|  $1$  | $W, H \\le 50$ | $14$  |\n|  $2$  | $W, H \\le 90$| $21$ |\n|  $3$  | $W, H \\le 300, K, L \\le 10$ | $9$ |\n|  $4$  | $W, H \\le 360$ | $29$ |\n|  $5$  | 无附加限制| $27$ |\n", "locale": "zh-CN"}}}
{"pid": "P10805", "type": "P", "difficulty": 6, "samples": [["3 1\n0 1 1\n1 2 1", "0\n2\n0"], ["6 2\n0 1 1\n1 2 1\n2 3 1\n3 4 2\n4 5 1", "0\n3\n3\n12\n8\n0"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "CEOI（中欧）"], "title": "[CEOI 2024] 加油站", "background": "", "description": "**题目译自 [CEOI 2024](https://ceoi2024.fi.muni.cz/) Day2 T2「[Petrol stations](https://ceoi2024.fi.muni.cz/page/tasks/statements/stations.pdf)」**\n\n捷克的高速公路网络由 $N$ 个城市和 $N-1$ 条路组成，每条路的长度（公里）已知。我们知道任意两个城市之间只有一条路径。此外，每个城市恰好有一个加油站，其他地方没有。\n\n有一天，许多人决定开车旅行。总共有 $N^2$ 辆车在路上。奇怪的是，对于每个有序城市对 $(a, b)$，恰好有一辆车从城市 $a$ 开往城市 $b$，沿着这两个城市之间唯一的路径行驶。由于捷克人全都开斯柯达车，每辆车的油箱容量都是 $K$ 升，并且每公里消耗一升汽油。出发前，每辆车的油箱都是满的。此外，捷克人非常有规律。由于懒惰，他们只在汽油不足以到达下一个城市时才加油（油箱为空时可以进入城市）。一旦他们被迫停在加油站，他们总是把油箱加满。\n\n捷克税务部门想知道当天每个加油站停了多少辆车。鉴于这种可预测的行为，你应该能够轻松计算出来。", "inputFormat": "输入的第一行包含两个空格分隔的整数 $N$ 和 $K$，分别表示城市数量和每辆车的油箱容量。\n\n接下来的 $N-1$ 行描述道路。每行包含三个空格分隔的整数 $u_i, v_i, l_i$，其中 $u_i$ 和 $v_i$ 是第 $i$ 条路连接的城市编号，$l_i$ 是这条路的长度（公里）。城市从 $0$ 到 $N-1$ 编号。保证任意两个城市之间只有一条路径。", "outputFormat": "输出 $N$ 行，表示从城市 $0$ 到城市 $N-1$ 每个城市加油站停靠的汽车数。", "hint": "**样例解释 1**\n\n有 $3$ 座城市呈直线排列，连接它们的道路长度为 $1$，油箱容量为 $1$ 升。只有在两个外围城市之间行驶的汽车会在中间城市加油。\n\n**样例解释 2**\n\n有 $6$ 个城市呈直线排列，油箱容量为 $2$ 升。许多汽车需要在城市 $3$ 和城市 $4$ 加油。这是有道理的，因为城市 $3$ 和城市 $4$ 之间的道路长度为 $2$ 公里。\n\n对于所有输入数据，满足：\n- $2 \\leq N \\leq 70\\,000$\n- $1 \\leq K \\leq 10^9$\n- $0 \\leq l_i \\leq K\\ (0 \\leq i \\leq N-2)$\n\n令 $D$ 表示连接到单个城市的道路的最大数量。详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n|  $1$  | $N \\leq 1\\,000, K \\leq 1\\,000$ | $18$  |\n|  $2$  | $D\\le 2$ 且 $l_i = 1\\ (0 \\leq i \\leq N-2)$ | $8$ |\n|  $3$  | $D\\le 2$| $10$ |\n|  $4$  | $K\\leq 10, D\\leq 10$ | $12$ |\n|  $5$  | $K\\leq 10$ | $17$ |\n|  $6$  | 无附加限制| $35$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2024] 加油站", "background": "", "description": "**题目译自 [CEOI 2024](https://ceoi2024.fi.muni.cz/) Day2 T2「[Petrol stations](https://ceoi2024.fi.muni.cz/page/tasks/statements/stations.pdf)」**\n\n捷克的高速公路网络由 $N$ 个城市和 $N-1$ 条路组成，每条路的长度（公里）已知。我们知道任意两个城市之间只有一条路径。此外，每个城市恰好有一个加油站，其他地方没有。\n\n有一天，许多人决定开车旅行。总共有 $N^2$ 辆车在路上。奇怪的是，对于每个有序城市对 $(a, b)$，恰好有一辆车从城市 $a$ 开往城市 $b$，沿着这两个城市之间唯一的路径行驶。由于捷克人全都开斯柯达车，每辆车的油箱容量都是 $K$ 升，并且每公里消耗一升汽油。出发前，每辆车的油箱都是满的。此外，捷克人非常有规律。由于懒惰，他们只在汽油不足以到达下一个城市时才加油（油箱为空时可以进入城市）。一旦他们被迫停在加油站，他们总是把油箱加满。\n\n捷克税务部门想知道当天每个加油站停了多少辆车。鉴于这种可预测的行为，你应该能够轻松计算出来。", "inputFormat": "输入的第一行包含两个空格分隔的整数 $N$ 和 $K$，分别表示城市数量和每辆车的油箱容量。\n\n接下来的 $N-1$ 行描述道路。每行包含三个空格分隔的整数 $u_i, v_i, l_i$，其中 $u_i$ 和 $v_i$ 是第 $i$ 条路连接的城市编号，$l_i$ 是这条路的长度（公里）。城市从 $0$ 到 $N-1$ 编号。保证任意两个城市之间只有一条路径。", "outputFormat": "输出 $N$ 行，表示从城市 $0$ 到城市 $N-1$ 每个城市加油站停靠的汽车数。", "hint": "**样例解释 1**\n\n有 $3$ 座城市呈直线排列，连接它们的道路长度为 $1$，油箱容量为 $1$ 升。只有在两个外围城市之间行驶的汽车会在中间城市加油。\n\n**样例解释 2**\n\n有 $6$ 个城市呈直线排列，油箱容量为 $2$ 升。许多汽车需要在城市 $3$ 和城市 $4$ 加油。这是有道理的，因为城市 $3$ 和城市 $4$ 之间的道路长度为 $2$ 公里。\n\n对于所有输入数据，满足：\n- $2 \\leq N \\leq 70\\,000$\n- $1 \\leq K \\leq 10^9$\n- $0 \\leq l_i \\leq K\\ (0 \\leq i \\leq N-2)$\n\n令 $D$ 表示连接到单个城市的道路的最大数量。详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n|  $1$  | $N \\leq 1\\,000, K \\leq 1\\,000$ | $18$  |\n|  $2$  | $D\\le 2$ 且 $l_i = 1\\ (0 \\leq i \\leq N-2)$ | $8$ |\n|  $3$  | $D\\le 2$| $10$ |\n|  $4$  | $K\\leq 10, D\\leq 10$ | $12$ |\n|  $5$  | $K\\leq 10$ | $17$ |\n|  $6$  | 无附加限制| $35$ |", "locale": "zh-CN"}}}
{"pid": "P10806", "type": "P", "difficulty": 5, "samples": [["3 3\n10 10 10\n5 11 16", "6\nLLR"], ["1 2\n1000\n1 2000", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "贪心", "二分", "2024", "Special Judge", "CEOI（中欧）"], "title": "[CEOI 2024] 洒水器", "background": "", "description": "**题目译自 [CEOI 2024](https://ceoi2024.fi.muni.cz/) Day2 T3「[Sprinklers](https://ceoi2024.fi.muni.cz/page/tasks/statements/sprinklers.pdf)」**\n\n瓦茨拉夫有一个美丽的花园，花园里种了一排 $M$ 朵花。在这一排上，瓦茨拉夫还放置了 $N$ 个洒水器来浇花。\n\n洒水器的位置由数字 $s_1, s_2, \\ldots , s_N$ 给出。花的位置由数字 $f_1, f_2, \\ldots , f_M$ 给出。两者都是非递减顺序，即：\n- $s_1 \\leq s_2 \\leq \\ldots \\leq s_N$\n- $f_1 \\leq f_2 \\leq \\ldots \\leq f_M$\n\n瓦茨拉夫很快就要去参加 CEOI 了。他想确保在他离开期间所有的花都能得到适当的浇水。为此，他可以单独将每个洒水器向左或向右旋转，并设置它们的喷水强度——所有洒水器共享同一个水管，因此喷射距离相同。\n\n如果喷水强度为 $K$，并且第 $i$ 个洒水器向左旋转，它将浇灌位置在 $s_i - K$ 到 $s_i$ 之间的所有花。类似地，如果第 $j$ 个洒水器向右旋转，它将浇灌位置在 $s_j$ 到 $s_j+K$ 之间的所有花。单个洒水器可以浇灌多朵花，一朵花也可以被多个洒水器浇灌。\n\n你的任务是决定是否可以浇灌所有的花。如果是，你应该找到最小的足够喷水强度，以及相应的洒水器配置。如果存在多个具有最小喷水强度的有效配置，输出其中任何一个。", "inputFormat": "输入的第一行包含两个用空格隔开的整数 $N$ 和 $M$。第二行包含 $N$ 个空格分隔的整数 $s_1, s_2, \\ldots , s_N$，表示洒水器的位置。第三行包含 $M$ 个空格分隔的整数 $f_1, f_2, \\ldots , f_M$，表示花的位置。", "outputFormat": "如果无法浇灌所有的花，则输出数字 $-1$。\n\n如果可以，输出应该包含两行。第一行输出数字 $K$，表示浇灌所有花所需的最小的喷水强度。在第二行，输出长度为 $N$ 的字符串 $c$，其中 $c_i$ 为 `L`，如果第 $i$ 个洒水器应该向左旋转，否则为 `R`。", "hint": "**样例解释 1**\n\n每朵花至少被一个洒水器浇水。喷水强度低于 $6$ 是不可能的，因为位置 $16$ 的花离最近的洒水器有 $6$ 个单位距离。\n\n**样例解释 2**\n\n无论洒水器的方向如何，一次最多只能浇灌一朵花。\n\n对于所有输入数据，满足：\n- $1 \\leq N,M \\leq 10^5$\n- $0 \\leq s_{i} \\leq 10^9\\ (1 \\leq i \\leq N)$\n- $0 \\leq f_{i} \\leq 10^9\\ (1 \\leq i \\leq M)$\n- $s_{i} \\leq s_{j}\\ (i \\leq j)$\n- $f_{i} \\leq f_{j}\\ (i \\leq j)$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n|  $1$  | $N = 1$ | $3$  |\n|  $2$  | $N = 3x$，$x$ 是一个整数，$s_{3i+1}=s_{3i+2}=s_{3i+3}\\ (0 \\leq i \\leq x-1)$（即洒水器总是成组放置三个）| $6$ |\n|  $3$  | $N \\leq 10, M \\leq 1\\,000$| $17$ |\n|  $4$  | $K\\leq 8$（即在所有测试数据中，存在一种洒水器配置，使得喷水强度最多为 $8$ 就足以浇灌所有的花） | $27$ |\n|  $5$  | 无附加限制| $47$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2024] 洒水器", "background": "", "description": "**题目译自 [CEOI 2024](https://ceoi2024.fi.muni.cz/) Day2 T3「[Sprinklers](https://ceoi2024.fi.muni.cz/page/tasks/statements/sprinklers.pdf)」**\n\n瓦茨拉夫有一个美丽的花园，花园里种了一排 $M$ 朵花。在这一排上，瓦茨拉夫还放置了 $N$ 个洒水器来浇花。\n\n洒水器的位置由数字 $s_1, s_2, \\ldots , s_N$ 给出。花的位置由数字 $f_1, f_2, \\ldots , f_M$ 给出。两者都是非递减顺序，即：\n- $s_1 \\leq s_2 \\leq \\ldots \\leq s_N$\n- $f_1 \\leq f_2 \\leq \\ldots \\leq f_M$\n\n瓦茨拉夫很快就要去参加 CEOI 了。他想确保在他离开期间所有的花都能得到适当的浇水。为此，他可以单独将每个洒水器向左或向右旋转，并设置它们的喷水强度——所有洒水器共享同一个水管，因此喷射距离相同。\n\n如果喷水强度为 $K$，并且第 $i$ 个洒水器向左旋转，它将浇灌位置在 $s_i - K$ 到 $s_i$ 之间的所有花。类似地，如果第 $j$ 个洒水器向右旋转，它将浇灌位置在 $s_j$ 到 $s_j+K$ 之间的所有花。单个洒水器可以浇灌多朵花，一朵花也可以被多个洒水器浇灌。\n\n你的任务是决定是否可以浇灌所有的花。如果是，你应该找到最小的足够喷水强度，以及相应的洒水器配置。如果存在多个具有最小喷水强度的有效配置，输出其中任何一个。", "inputFormat": "输入的第一行包含两个用空格隔开的整数 $N$ 和 $M$。第二行包含 $N$ 个空格分隔的整数 $s_1, s_2, \\ldots , s_N$，表示洒水器的位置。第三行包含 $M$ 个空格分隔的整数 $f_1, f_2, \\ldots , f_M$，表示花的位置。", "outputFormat": "如果无法浇灌所有的花，则输出数字 $-1$。\n\n如果可以，输出应该包含两行。第一行输出数字 $K$，表示浇灌所有花所需的最小的喷水强度。在第二行，输出长度为 $N$ 的字符串 $c$，其中 $c_i$ 为 `L`，如果第 $i$ 个洒水器应该向左旋转，否则为 `R`。", "hint": "**样例解释 1**\n\n每朵花至少被一个洒水器浇水。喷水强度低于 $6$ 是不可能的，因为位置 $16$ 的花离最近的洒水器有 $6$ 个单位距离。\n\n**样例解释 2**\n\n无论洒水器的方向如何，一次最多只能浇灌一朵花。\n\n对于所有输入数据，满足：\n- $1 \\leq N,M \\leq 10^5$\n- $0 \\leq s_{i} \\leq 10^9\\ (1 \\leq i \\leq N)$\n- $0 \\leq f_{i} \\leq 10^9\\ (1 \\leq i \\leq M)$\n- $s_{i} \\leq s_{j}\\ (i \\leq j)$\n- $f_{i} \\leq f_{j}\\ (i \\leq j)$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :--: | :--: | :--: |\n|  $1$  | $N = 1$ | $3$  |\n|  $2$  | $N = 3x$，$x$ 是一个整数，$s_{3i+1}=s_{3i+2}=s_{3i+3}\\ (0 \\leq i \\leq x-1)$（即洒水器总是成组放置三个）| $6$ |\n|  $3$  | $N \\leq 10, M \\leq 1\\,000$| $17$ |\n|  $4$  | $K\\leq 8$（即在所有测试数据中，存在一种洒水器配置，使得喷水强度最多为 $8$ 就足以浇灌所有的花） | $27$ |\n|  $5$  | 无附加限制| $47$ |", "locale": "zh-CN"}}}
{"pid": "P10807", "type": "P", "difficulty": 3, "samples": [["5\n0 3\n0 3\n1 6\n2 6\n2 6", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化"], "title": "[LMXOI Round 2] Disaster", "background": "LMX 和 HQZ 在一起研究点的划分。", "description": "给定 $n$ 个点，每个点给出了一组限制 $l_i,r_i(0 \\le l_i < i < r_i \\le n+1)$，定义一个划分是好的当且仅当对于每个点 $i$，$l_i,r_i$ 在划分后均不与 $i$ 在同一区间内，求好的划分的个数，答案对 $998244353$ 取模。\n\n补充：在本题中，一组划分表示将 $n$ 个点分为若干个区间，使得每个点恰好在一个区间内，$l_i=0$ 和 $r_i=n+1$ 可以视为无限制。", "inputFormat": "第一行一个整数 $n$ 表示点的个数。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $l_i,r_i$。", "outputFormat": "第一行一个整数，表示答案对 $998244353$ 取模后的值。", "hint": "**样例解释 #1**\n\n样例的 $8$ 种合法划分区间分别是：\n\n$[1,2],[3,5]$\n\n$[1,1],[2,2],[3,5]$\n\n$[1,2],[3,3],[4,5]$\n\n$[1,1],[2,2],[3,3],[4,5]$\n\n$[1,2],[3,4],[5,5]$\n\n$[1,1],[2,2],[3,4],[5,5]$\n\n$[1,2],[3,3],[4,4],[5,5]$\n\n$[1,1],[2,2],[3,3],[4,4],[5,5]$\n\n\n\n\n对于所有数据，$1 \\le n\\le  2 \\times 10^6$，$0 \\le l_i < i < r_i \\le n+1$。\n\n| 子任务编号 |        $n$         |    特殊性质    | 分值 |\n| :--------: | :----------------: | :------------: | :--: |\n| Subtask #1 |      $\\le 20$      |       无       |  $5$   |\n| Subtask #2 |     $\\le 500$      |       无       |  $10$  |\n| Subtask #3 |     $\\le 5000$     |       无       |  $20$  |\n| Subtask #4 |     $\\le 5 \\times 10^5$     | $l_i=0$ |  $10$   |\n| Subtask #5 |     $\\le 5 \\times 10^5$     |无 |  $25$  |\n| Subtask #6 |     $\\le 2 \\times 10^6$     |无 |  $30$  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LMXOI Round 2] Disaster", "background": "LMX 和 HQZ 在一起研究点的划分。", "description": "给定 $n$ 个点，每个点给出了一组限制 $l_i,r_i(0 \\le l_i < i < r_i \\le n+1)$，定义一个划分是好的当且仅当对于每个点 $i$，$l_i,r_i$ 在划分后均不与 $i$ 在同一区间内，求好的划分的个数，答案对 $998244353$ 取模。\n\n补充：在本题中，一组划分表示将 $n$ 个点分为若干个区间，使得每个点恰好在一个区间内，$l_i=0$ 和 $r_i=n+1$ 可以视为无限制。", "inputFormat": "第一行一个整数 $n$ 表示点的个数。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $l_i,r_i$。", "outputFormat": "第一行一个整数，表示答案对 $998244353$ 取模后的值。", "hint": "**样例解释 #1**\n\n样例的 $8$ 种合法划分区间分别是：\n\n$[1,2],[3,5]$\n\n$[1,1],[2,2],[3,5]$\n\n$[1,2],[3,3],[4,5]$\n\n$[1,1],[2,2],[3,3],[4,5]$\n\n$[1,2],[3,4],[5,5]$\n\n$[1,1],[2,2],[3,4],[5,5]$\n\n$[1,2],[3,3],[4,4],[5,5]$\n\n$[1,1],[2,2],[3,3],[4,4],[5,5]$\n\n\n\n\n对于所有数据，$1 \\le n\\le  2 \\times 10^6$，$0 \\le l_i < i < r_i \\le n+1$。\n\n| 子任务编号 |        $n$         |    特殊性质    | 分值 |\n| :--------: | :----------------: | :------------: | :--: |\n| Subtask #1 |      $\\le 20$      |       无       |  $5$   |\n| Subtask #2 |     $\\le 500$      |       无       |  $10$  |\n| Subtask #3 |     $\\le 5000$     |       无       |  $20$  |\n| Subtask #4 |     $\\le 5 \\times 10^5$     | $l_i=0$ |  $10$   |\n| Subtask #5 |     $\\le 5 \\times 10^5$     |无 |  $25$  |\n| Subtask #6 |     $\\le 2 \\times 10^6$     |无 |  $30$  |", "locale": "zh-CN"}}}
{"pid": "P10808", "type": "P", "difficulty": 6, "samples": [["3 1\n1 2\n2 3\n1 1 2\n1 1 2", "8 4 2"], ["4 1\n1 2\n2 4\n1 3\n1 1 2 1\n1 2 3 1", "19 5 3 1"], ["10 3\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7\n7 8\n5 9\n9 10\n1 3 7 3 6 6 6 9 4 8 \n450163553 649444963 324825063 696619525 758594756 594697697 750550965 907640826 118301481 755848673 \n", "475170649 914027313 64013204 696619525 210513956 594697697 111866638 907640826 0 0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "莫比乌斯反演", "线段树合并"], "title": "[LMXOI Round 2] Annihilation", "background": "LMX 和 HQZ 在研究上次被毙掉的题目 Impacter 时，他们提出了一个新的问题。", "description": "给定一棵 $n$ 个节点的，以 $1$ 为根的树，每个点有权值 $a_i$。\n\n对于一个点 $u$，定义函数 $f(u,v,d)$ 表示在 $u$ 的子树内选择一些点（至少需要选取一个点），选出的点中最大权值为 $v$，且它们编号的最大公约数为 $d$ 的方案数。\n\n给定一个常数 $k$ 和一个序列 $b$，对于每个点 $u$，你需要求出 $ \\sum\\limits_{k|i}^{n}\\sum\\limits_{j=1}^nf(u,i,j)\\times b_j$ 的值，其中 $k|i$ 表示 $k$ 可以整除 $i$。由于该值可能很大，所以你需要输出其对 $998244353$ 取模的结果。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$ 表示 $u$ 与 $v$ 之间有一条边。\n\n接下来一行 $n$ 个数，第 $i$ 个数字表示 $a_i$。\n\n接下来一行 $n$ 个数，第 $i$ 个数字表示 $b_i$。", "outputFormat": "一行 $n$ 个整数，分别表示 $u=1,2,\\ldots n$ 时的答案对 $998244353$ 取模的值。", "hint": "**样例解释 #1**\n\n节点 $3$ 可以选择 $\\{3\\}$，因为是求最大值为 $1$ 的倍数，所以贡献为 $2$。\n\n节点 $2$ 可以选择 $\\{2\\},\\{3\\},\\{2,3\\}$，因为是求最大值为 $1$ 的倍数，所以贡献是 $1+2+1=4$ 。\n\n节点 $1$ 可以选择 $\\{1\\},\\{2\\},\\{3\\},\\{1,2\\},\\{1,3\\},\\{2,3\\},\\{1,2,3\\}$，因为是求最大值为 $1$ 的倍数，所以贡献是 $1+1+2+1+1+1+1=8$ 。\n\n对于所有数据，$1 \\le a_i\\le n\\le  10^5$，$1\\le b_i\\le 10^9$。\n\n| 子任务编号 |        $n$         |    特殊性质    | 分值 |\n| :--------: | :----------------: | :------------: | :--: |\n| Subtask #1 |      $\\le 20$      |       无       |  $10$   |\n| Subtask #2 |     $\\le 200$      |       无       |  $10$  |\n| Subtask #3 |     $\\le 2000$     |       无       |  $10$  |\n| Subtask #4 |     $\\le 10^5$     | 树随机生成* |  $10$   |\n| Subtask #5 |     $\\le 10^5$     | $k=1$ |  $20$  |\n| Subtask #6 | $\\le 5\\times 10^4$ |       无       |  $20$  |\n| Subtask #7 |     $\\le 10^5$     |       无       |  $20$  |\n\n树随机生成*：指对于 $u=2,3,\\ldots n$ 每个点，其父亲从 $[1,u-1]$ 的整数中均匀随机选取。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LMXOI Round 2] Annihilation", "background": "LMX 和 HQZ 在研究上次被毙掉的题目 Impacter 时，他们提出了一个新的问题。", "description": "给定一棵 $n$ 个节点的，以 $1$ 为根的树，每个点有权值 $a_i$。\n\n对于一个点 $u$，定义函数 $f(u,v,d)$ 表示在 $u$ 的子树内选择一些点（至少需要选取一个点），选出的点中最大权值为 $v$，且它们编号的最大公约数为 $d$ 的方案数。\n\n给定一个常数 $k$ 和一个序列 $b$，对于每个点 $u$，你需要求出 $ \\sum\\limits_{k|i}^{n}\\sum\\limits_{j=1}^nf(u,i,j)\\times b_j$ 的值，其中 $k|i$ 表示 $k$ 可以整除 $i$。由于该值可能很大，所以你需要输出其对 $998244353$ 取模的结果。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$ 表示 $u$ 与 $v$ 之间有一条边。\n\n接下来一行 $n$ 个数，第 $i$ 个数字表示 $a_i$。\n\n接下来一行 $n$ 个数，第 $i$ 个数字表示 $b_i$。", "outputFormat": "一行 $n$ 个整数，分别表示 $u=1,2,\\ldots n$ 时的答案对 $998244353$ 取模的值。", "hint": "**样例解释 #1**\n\n节点 $3$ 可以选择 $\\{3\\}$，因为是求最大值为 $1$ 的倍数，所以贡献为 $2$。\n\n节点 $2$ 可以选择 $\\{2\\},\\{3\\},\\{2,3\\}$，因为是求最大值为 $1$ 的倍数，所以贡献是 $1+2+1=4$ 。\n\n节点 $1$ 可以选择 $\\{1\\},\\{2\\},\\{3\\},\\{1,2\\},\\{1,3\\},\\{2,3\\},\\{1,2,3\\}$，因为是求最大值为 $1$ 的倍数，所以贡献是 $1+1+2+1+1+1+1=8$ 。\n\n对于所有数据，$1 \\le a_i\\le n\\le  10^5$，$1\\le b_i\\le 10^9$。\n\n| 子任务编号 |        $n$         |    特殊性质    | 分值 |\n| :--------: | :----------------: | :------------: | :--: |\n| Subtask #1 |      $\\le 20$      |       无       |  $10$   |\n| Subtask #2 |     $\\le 200$      |       无       |  $10$  |\n| Subtask #3 |     $\\le 2000$     |       无       |  $10$  |\n| Subtask #4 |     $\\le 10^5$     | 树随机生成* |  $10$   |\n| Subtask #5 |     $\\le 10^5$     | $k=1$ |  $20$  |\n| Subtask #6 | $\\le 5\\times 10^4$ |       无       |  $20$  |\n| Subtask #7 |     $\\le 10^5$     |       无       |  $20$  |\n\n树随机生成*：指对于 $u=2,3,\\ldots n$ 每个点，其父亲从 $[1,u-1]$ 的整数中均匀随机选取。", "locale": "zh-CN"}}}
{"pid": "P10809", "type": "P", "difficulty": 7, "samples": [["5 8 1 4\n1 2\n2 3\n3 4\n4 5\n1 3\n1 4\n2 4\n3 5", "665496236\n1 2\n00010000"], ["6 5 5 6\n1 2\n1 3\n1 4\n1 5\n1 6", "0\n3\n2 3 4"], ["9 9 1 7\n1 3\n2 3\n3 4\n3 5\n4 5\n4 6\n5 7\n4 8\n8 9", "0\n4\n2 6 8 9"]], "limits": {"time": [2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200, 2200], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "双连通分量", "圆方树"], "title": "[LMXOI Round 2] Nirvana", "background": "HQZ 在摆弄 LMX 的一台机器。", "description": "\n定义一张无向连通图是**好的**，当且仅当存在一组定向方案使得原图可以通过对每条边定向使其成为仅有 $S$ 入度为 $0$，$T$ 出度为 $0$ 的**有向无环**图。\n\n给定一张 $n$ 个点 $m$ 条边**无自环**的**无向连通图**，定义一次操作为等概率选取两个**可重**的点 $x, y$ 且 $x \\le y$，连接 $x$ 和 $y$。求一次操作后的图是**好的**的概率 $P$ 对 $998244353$ 取模的值。\n\n若 $P > 0$，你需要在加入一条边后构造一组定向方案。\n\n若 $P = 0$，你需要构造一组删点数量最少的方案使得原图是好的。", "inputFormat": "第一行四个正整数 $n, m, S, T$，含义如题面所述。\n\n接下来 $m$ 行，第 $i$ 行两个正整数 $x_i,y_i$，表示 $x_i$ 和 $y_i$ 之间有一条无向边。", "outputFormat": "第一行一个非负整数 $P$。\n\n若 $P > 0$，接下来两行，第一行两个正整数 $u, v$ 表示你添加的边为 $u \\to v$（有向），第二行一个长度为 $m$ 的仅包含 $0$ 和 $1$ 的字符串 $s$，$s_i = 0$ 表示 $(x_i, y_i)$ 这条边的方向为 $x_i \\to y_i$，否则为 $y_i \\to x_i$。\n\n若 $P = 0$，接下来输出两行，第一行包含一个正整数 $c$，表示最少要删除多少个点。第二行包含 $c$ 个正整数，表示需要删掉的点。\n\n**评分方式：**\n\n**在输出格式正确的情况下**，若你的程序正确回答了概率 $P$，则你能获得该测试点 $30\\%$ 的分数。\n\n**在此基础上**，若你正确构造出了方案，则你能获得该测试点 $100\\%$ 的分数。\n\n**若你的程序输出格式错误，可能会出现不可预料的错误。**", "hint": "对于所有数据，$1 \\le n, m \\le 5 \\times 10^5$。\n\n**update 7/27: Subtask #7 为新的 Hack 数据。数据范围同 Subtask #6**。\n\n| 子任务编号 |         $n$         |         $m$         |        特殊性质        | 分值 |\n| :--------: | :-----------------: | :-----------------: | :--------------------: | :--: |\n| Subtask #1 |      $\\le 10$       |      $\\le 10$       |           无           | $25$ |\n| Subtask #2 |     $\\le 500$      |      $= n - 1$      | $x_i = i, y_i = i + 1$ | $10$ |\n| Subtask #3 |     $\\le 5 \\times 10^5$      |      $= n$      |      原图是一个环      | $5$  |\n| Subtask #4 |     $\\le 500$      |     $\\le 500$      |        无         | $20$ |\n| Subtask #5 | $\\le 5 \\times 10^5$ |      $= n - 1$      | $x_i = i, y_i = i + 1$ | $20$ |\n| Subtask #6 | $\\le 5 \\times 10^5$ | $\\le 5 \\times 10^5$ |        无         | $20$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LMXOI Round 2] Nirvana", "background": "HQZ 在摆弄 LMX 的一台机器。", "description": "\n定义一张无向连通图是**好的**，当且仅当存在一组定向方案使得原图可以通过对每条边定向使其成为仅有 $S$ 入度为 $0$，$T$ 出度为 $0$ 的**有向无环**图。\n\n给定一张 $n$ 个点 $m$ 条边**无自环**的**无向连通图**，定义一次操作为等概率选取两个**可重**的点 $x, y$ 且 $x \\le y$，连接 $x$ 和 $y$。求一次操作后的图是**好的**的概率 $P$ 对 $998244353$ 取模的值。\n\n若 $P > 0$，你需要在加入一条边后构造一组定向方案。\n\n若 $P = 0$，你需要构造一组删点数量最少的方案使得原图是好的。", "inputFormat": "第一行四个正整数 $n, m, S, T$，含义如题面所述。\n\n接下来 $m$ 行，第 $i$ 行两个正整数 $x_i,y_i$，表示 $x_i$ 和 $y_i$ 之间有一条无向边。", "outputFormat": "第一行一个非负整数 $P$。\n\n若 $P > 0$，接下来两行，第一行两个正整数 $u, v$ 表示你添加的边为 $u \\to v$（有向），第二行一个长度为 $m$ 的仅包含 $0$ 和 $1$ 的字符串 $s$，$s_i = 0$ 表示 $(x_i, y_i)$ 这条边的方向为 $x_i \\to y_i$，否则为 $y_i \\to x_i$。\n\n若 $P = 0$，接下来输出两行，第一行包含一个正整数 $c$，表示最少要删除多少个点。第二行包含 $c$ 个正整数，表示需要删掉的点。\n\n**评分方式：**\n\n**在输出格式正确的情况下**，若你的程序正确回答了概率 $P$，则你能获得该测试点 $30\\%$ 的分数。\n\n**在此基础上**，若你正确构造出了方案，则你能获得该测试点 $100\\%$ 的分数。\n\n**若你的程序输出格式错误，可能会出现不可预料的错误。**", "hint": "对于所有数据，$1 \\le n, m \\le 5 \\times 10^5$。\n\n**update 7/27: Subtask #7 为新的 Hack 数据。数据范围同 Subtask #6**。\n\n| 子任务编号 |         $n$         |         $m$         |        特殊性质        | 分值 |\n| :--------: | :-----------------: | :-----------------: | :--------------------: | :--: |\n| Subtask #1 |      $\\le 10$       |      $\\le 10$       |           无           | $25$ |\n| Subtask #2 |     $\\le 500$      |      $= n - 1$      | $x_i = i, y_i = i + 1$ | $10$ |\n| Subtask #3 |     $\\le 5 \\times 10^5$      |      $= n$      |      原图是一个环      | $5$  |\n| Subtask #4 |     $\\le 500$      |     $\\le 500$      |        无         | $20$ |\n| Subtask #5 | $\\le 5 \\times 10^5$ |      $= n - 1$      | $x_i = i, y_i = i + 1$ | $20$ |\n| Subtask #6 | $\\le 5 \\times 10^5$ | $\\le 5 \\times 10^5$ |        无         | $20$ |", "locale": "zh-CN"}}}
{"pid": "P10810", "type": "P", "difficulty": 3, "samples": [["1\ntest\n", "4\n"], ["3\ntest\n", "1\n"], ["3\napollo\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-S2-T1】 变", "background": "原题链接：<https://oier.team/problems/S2A>。", "description": "已知一个仅由小写英文字母构成的字符串 $s$。\n\n每次操作时，你可以任意选择 $s$ 中的一个字符，并将它修改为任意小写英文字母。\n\n你可以按任意顺序对其进行不超过 $k$ 次操作，以最小化 $s$ 的**严格循环节**的长度。当然，不进行操作也是可以的。\n\n请输出在进行完所有操作后，最小的可能的 $s$ 的严格循环节的长度。\n\n> 一个字符串 $t$ 被称为 $s$ 的严格循环节，当且仅当 $s$ 可以通过将 $t$ 重复若干次来构造。\n> \n> 例如：`mai` 是 `maimai` 的严格循环节，`dx` 是 `dx` 的严格循环节。但 `ov` 不是 `ovo` 的严格循环节。\n", "inputFormat": "第一行一个非负整数 $k$。\n\n第二行一个字符串 $s$，仅包含小写英文字母。\n", "outputFormat": "一行一个整数，表示答案。", "hint": "**【样例解释 \\#1】**\n\n可以证明：最多进行一次操作的情况下，严格循环节长度至少为 $4$。\n\n**【样例解释 \\#2】**\n\n可以通过 $3$ 次操作，将 `test` 修改为 `ssss`，严格循环节长度为 $1$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 0（17 pts）：$k = 0$，$|s| \\leq 6$。\n- Subtask 1（14 pts）：$k = 1$，$|s| \\leq 20$。\n- Subtask 2（16 pts）：$k = 1$，$|s| \\leq 500$。\n- Subtask 3（32 pts）：$k < |s| \\leq 10^5$。\n- Subtask 4（21 pts）： 无特殊限制。\n\n对于所有测试数据，保证 $0 \\leq k < |s| \\leq 10^6$，$s$ 中仅包含小写英文字母。\n\n**2024.7.28：新增了一组 Hack 数据。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S2-T1】 变", "background": "原题链接：<https://oier.team/problems/S2A>。", "description": "已知一个仅由小写英文字母构成的字符串 $s$。\n\n每次操作时，你可以任意选择 $s$ 中的一个字符，并将它修改为任意小写英文字母。\n\n你可以按任意顺序对其进行不超过 $k$ 次操作，以最小化 $s$ 的**严格循环节**的长度。当然，不进行操作也是可以的。\n\n请输出在进行完所有操作后，最小的可能的 $s$ 的严格循环节的长度。\n\n> 一个字符串 $t$ 被称为 $s$ 的严格循环节，当且仅当 $s$ 可以通过将 $t$ 重复若干次来构造。\n> \n> 例如：`mai` 是 `maimai` 的严格循环节，`dx` 是 `dx` 的严格循环节。但 `ov` 不是 `ovo` 的严格循环节。\n", "inputFormat": "第一行一个非负整数 $k$。\n\n第二行一个字符串 $s$，仅包含小写英文字母。\n", "outputFormat": "一行一个整数，表示答案。", "hint": "**【样例解释 \\#1】**\n\n可以证明：最多进行一次操作的情况下，严格循环节长度至少为 $4$。\n\n**【样例解释 \\#2】**\n\n可以通过 $3$ 次操作，将 `test` 修改为 `ssss`，严格循环节长度为 $1$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 0（17 pts）：$k = 0$，$|s| \\leq 6$。\n- Subtask 1（14 pts）：$k = 1$，$|s| \\leq 20$。\n- Subtask 2（16 pts）：$k = 1$，$|s| \\leq 500$。\n- Subtask 3（32 pts）：$k < |s| \\leq 10^5$。\n- Subtask 4（21 pts）： 无特殊限制。\n\n对于所有测试数据，保证 $0 \\leq k < |s| \\leq 10^6$，$s$ 中仅包含小写英文字母。\n\n**2024.7.28：新增了一组 Hack 数据。**", "locale": "zh-CN"}}}
{"pid": "P10811", "type": "P", "difficulty": 4, "samples": [["5\n7 5 -4 -6 3", "6"], ["10\n573 -1339 899 939 -26 1430 1324 -1150 1640 -45 ", "1625"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "bitset", "梦熊比赛"], "title": "【MX-S2-T2】 排", "background": "原题链接：<https://oier.team/problems/S2B>。", "description": "有 $n$ 个整数 $a_1,a_2,\\ldots,a_n$。$f_0=0,f_i= \\left\\{\n\\begin{aligned}\n& f_{i-1}   &  \\ f_{i-1}\\times a_i>0, \\\\\n& f_{i-1}+a_i &  \\ f_{i-1}\\times a_i\\le 0.\\\\ \n\\end{aligned}\n\\right.\n$\n\n重排 $a$ 使得得到的 $f_n$ 最大。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$。", "outputFormat": "一行一个整数，表示答案。", "hint": "**【样例解释 \\#1】**\n\n考虑重排为 $-6,-4,5,7,3$，最终的 $f_n$ 为 $6$，可以证明不存在更优的方案。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 0（6 pts）：$n\\le10$。\n- Subtask 1（14 pts）：$n\\le 20$，$|a_i|\\le10$。\n- Subtask 2（8 pts）：$a$ 中全为正数或全为负数。\n- Subtask 3（19 pts）：$a$ 中有且只有一个正数（注意 $a$ 中可以有 $0$）。\n- Subtask 4（29 pts）：$n \\le 200$，$|a_i|\\le 200$。\n- Subtask 5（24 pts）：无特殊限制。\n\n对于所有测试数据，$1 \\le n \\le 2000$，$|a_i|\\le 2000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S2-T2】 排", "background": "原题链接：<https://oier.team/problems/S2B>。", "description": "有 $n$ 个整数 $a_1,a_2,\\ldots,a_n$。$f_0=0,f_i= \\left\\{\n\\begin{aligned}\n& f_{i-1}   &  \\ f_{i-1}\\times a_i>0, \\\\\n& f_{i-1}+a_i &  \\ f_{i-1}\\times a_i\\le 0.\\\\ \n\\end{aligned}\n\\right.\n$\n\n重排 $a$ 使得得到的 $f_n$ 最大。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$。", "outputFormat": "一行一个整数，表示答案。", "hint": "**【样例解释 \\#1】**\n\n考虑重排为 $-6,-4,5,7,3$，最终的 $f_n$ 为 $6$，可以证明不存在更优的方案。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 0（6 pts）：$n\\le10$。\n- Subtask 1（14 pts）：$n\\le 20$，$|a_i|\\le10$。\n- Subtask 2（8 pts）：$a$ 中全为正数或全为负数。\n- Subtask 3（19 pts）：$a$ 中有且只有一个正数（注意 $a$ 中可以有 $0$）。\n- Subtask 4（29 pts）：$n \\le 200$，$|a_i|\\le 200$。\n- Subtask 5（24 pts）：无特殊限制。\n\n对于所有测试数据，$1 \\le n \\le 2000$，$|a_i|\\le 2000$。", "locale": "zh-CN"}}}
{"pid": "P10812", "type": "P", "difficulty": 5, "samples": [["3 1000000007", "3"], ["4 1000", "7"], ["100 511609", "272799"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "前缀和", "梦熊比赛"], "title": "【MX-S2-T3】 跳", "background": "原题链接：<https://oier.team/problems/S2C>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kq7nqgu8.png)\n\n~~跳一跳世界第一。~~\n\n~~不处，不收徒，差距自己找。~~", "description": "给定一个坐标轴，范围是 $1\\sim n$。每个点 $i$ 可以跳到 $i+1$（$i+1\\le n$）或 $i-1$（$i-1\\ge 1$）或他的因子处。每个点只能到达一次。问从点 $n$ 到点 $1$ 一共有多少方案。答案对 $p$ 取模。\n\n两种方案不同当且仅当存在一次跳跃后的位置不同或存在一次跳跃的种类不同。", "inputFormat": "一行两个整数 $n,p$。", "outputFormat": "一行一个整数，表示答案对 $p$ 取模后的结果。", "hint": "**【样例解释 \\#1】**\n\n设 $\\rightarrow$ 表示向上或向下跳，$\\Rightarrow$ 表示跳因子。共三种方案如下。\n+ $3\\Rightarrow1$\n+ $3\\rightarrow2\\rightarrow1$\n+ $3\\rightarrow2\\Rightarrow1$\n\n**【样例解释 \\#2】**\n\n设 $\\rightarrow$ 表示向上或向下跳，$\\Rightarrow$ 表示跳因子。共七种方案如下。\n\n+ $4\\rightarrow3\\Rightarrow1$\n+ $4\\rightarrow3\\rightarrow2\\rightarrow1$\n+ $4\\rightarrow3\\rightarrow2\\Rightarrow1$\n+ $4\\Rightarrow2\\rightarrow3\\Rightarrow1$\n+ $4\\Rightarrow2\\rightarrow1$\n+ $4\\Rightarrow2\\Rightarrow1$\n+ $4\\Rightarrow1$\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 0（8 pts）：$n\\le20$。\n- Subtask 1（11 pts）：$n\\le150$。\n- Subtask 2（23 pts）：$n\\le300$。\n- Subtask 3（26 pts）：$n\\le1000$。\n- Subtask 4（32 pts）：无特殊限制。\n\n对于所有测试数据，$1\\le n\\le5\\times10^3$，$2\\le p\\le 10^9+7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S2-T3】 跳", "background": "原题链接：<https://oier.team/problems/S2C>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kq7nqgu8.png)\n\n~~跳一跳世界第一。~~\n\n~~不处，不收徒，差距自己找。~~", "description": "给定一个坐标轴，范围是 $1\\sim n$。每个点 $i$ 可以跳到 $i+1$（$i+1\\le n$）或 $i-1$（$i-1\\ge 1$）或他的因子处。每个点只能到达一次。问从点 $n$ 到点 $1$ 一共有多少方案。答案对 $p$ 取模。\n\n两种方案不同当且仅当存在一次跳跃后的位置不同或存在一次跳跃的种类不同。", "inputFormat": "一行两个整数 $n,p$。", "outputFormat": "一行一个整数，表示答案对 $p$ 取模后的结果。", "hint": "**【样例解释 \\#1】**\n\n设 $\\rightarrow$ 表示向上或向下跳，$\\Rightarrow$ 表示跳因子。共三种方案如下。\n+ $3\\Rightarrow1$\n+ $3\\rightarrow2\\rightarrow1$\n+ $3\\rightarrow2\\Rightarrow1$\n\n**【样例解释 \\#2】**\n\n设 $\\rightarrow$ 表示向上或向下跳，$\\Rightarrow$ 表示跳因子。共七种方案如下。\n\n+ $4\\rightarrow3\\Rightarrow1$\n+ $4\\rightarrow3\\rightarrow2\\rightarrow1$\n+ $4\\rightarrow3\\rightarrow2\\Rightarrow1$\n+ $4\\Rightarrow2\\rightarrow3\\Rightarrow1$\n+ $4\\Rightarrow2\\rightarrow1$\n+ $4\\Rightarrow2\\Rightarrow1$\n+ $4\\Rightarrow1$\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 0（8 pts）：$n\\le20$。\n- Subtask 1（11 pts）：$n\\le150$。\n- Subtask 2（23 pts）：$n\\le300$。\n- Subtask 3（26 pts）：$n\\le1000$。\n- Subtask 4（32 pts）：无特殊限制。\n\n对于所有测试数据，$1\\le n\\le5\\times10^3$，$2\\le p\\le 10^9+7$。", "locale": "zh-CN"}}}
{"pid": "P10813", "type": "P", "difficulty": 6, "samples": [["3 3 5\n3 2\n1 3\n1 2\n2 3\n2 1", "12"], ["8 900000754 20\n5 5\n1 2\n3 2\n1 8\n4 8\n5 8\n3 4\n3 7\n5 7\n3 4\n6 8\n1 5\n7 8\n7 8\n5 7\n1 8\n3 8\n3 8\n5 6\n3 8\n", "508510094"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "组合数学", "状压 DP", "梦熊比赛"], "title": "【MX-S2-T4】 换", "background": "原题链接：<https://oier.team/problems/S2D>。", "description": "给定 $n,V$ 和一个长为 $m$ 的序列 $(p_1,q_1),(p_2,q_2),\\dots,(p_m,q_m)$。\n\n请求出有多少长度为 $n$ 的正整数序列 $a$，其所有元素 $a_i$ 满足 $1\\le a_i\\le V$，将其按 $k=1,2,\\dots,m$ 依次执行如下操作后，$a$ 不降：  \n\n- 若 $a_{p_k}>a_{q_k}$，则交换 $a_{p_k}$ 与 $a_{q_k}$ 的值。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行三个整数 $n,V,m$。\n\n接下来 $m$ 行，每行两个整数 $p_k,q_k$。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "**【样例解释 \\#1】**\n\n对于第一组样例，有以下 $12$ 种符合条件的序列：\n\n$\\{1,1,1\\}$，$\\{1,1,2\\}$，$\\{1,1,3\\}$，$\\{1,2,1\\}$，$\\{1,3,1\\}$，$\\{2,1,1\\}$，$\\{2,2,2\\}$，$\\{2,2,3\\}$，$\\{2,3,2\\}$，$\\{3,1,1\\}$，$\\{3,2,2\\}$，$\\{3,3,3\\}$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 0（8 pts）：$n\\le6$，$V\\le 8$，$m \\le 50$。\n- Subtask 1（31 pts）：$n \\le 8$。\n- Subtask 2（37 pts）：$n \\le 15$。\n- Subtask 3（24 pts）：无特殊限制。\n\n对于所有测试数据，$1\\le n\\le 18$，$1\\le V\\le 10^9$，$1\\le m\\le 500$，$1\\leq p_k,q_k\\leq n$，注意不保证 $p_k$ 和 $q_k$ 的大小关系，且数据可能存在 $p_k=q_k$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S2-T4】 换", "background": "原题链接：<https://oier.team/problems/S2D>。", "description": "给定 $n,V$ 和一个长为 $m$ 的序列 $(p_1,q_1),(p_2,q_2),\\dots,(p_m,q_m)$。\n\n请求出有多少长度为 $n$ 的正整数序列 $a$，其所有元素 $a_i$ 满足 $1\\le a_i\\le V$，将其按 $k=1,2,\\dots,m$ 依次执行如下操作后，$a$ 不降：  \n\n- 若 $a_{p_k}>a_{q_k}$，则交换 $a_{p_k}$ 与 $a_{q_k}$ 的值。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行三个整数 $n,V,m$。\n\n接下来 $m$ 行，每行两个整数 $p_k,q_k$。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "**【样例解释 \\#1】**\n\n对于第一组样例，有以下 $12$ 种符合条件的序列：\n\n$\\{1,1,1\\}$，$\\{1,1,2\\}$，$\\{1,1,3\\}$，$\\{1,2,1\\}$，$\\{1,3,1\\}$，$\\{2,1,1\\}$，$\\{2,2,2\\}$，$\\{2,2,3\\}$，$\\{2,3,2\\}$，$\\{3,1,1\\}$，$\\{3,2,2\\}$，$\\{3,3,3\\}$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 0（8 pts）：$n\\le6$，$V\\le 8$，$m \\le 50$。\n- Subtask 1（31 pts）：$n \\le 8$。\n- Subtask 2（37 pts）：$n \\le 15$。\n- Subtask 3（24 pts）：无特殊限制。\n\n对于所有测试数据，$1\\le n\\le 18$，$1\\le V\\le 10^9$，$1\\le m\\le 500$，$1\\leq p_k,q_k\\leq n$，注意不保证 $p_k$ 和 $q_k$ 的大小关系，且数据可能存在 $p_k=q_k$。", "locale": "zh-CN"}}}
{"pid": "P10814", "type": "P", "difficulty": 4, "samples": [["6 4\n1 1 4 5 1 4\n1 6 3\n1 6 4\n1 1 4\n1 5 4", "3\n5\n1\n4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树状数组", "扫描线", "离线处理", "模板题"], "title": "【模板】离线二维数点", "background": "青蛙。", "description": "给你一个长为 $n$ 的序列 $a$，有 $m$ 次询问，每次询问给定 $l,r,x$，求 $[l,r]$ 区间中小于等于 $x$ 的元素个数。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个数表示序列 $a$。\n\n之后 $m$ 行，每行三个数 $l,r,x$ 表示一次询问。", "outputFormat": "对每个询问，输出一行一个数表示答案。", "hint": "对于 $20\\%$ 的数据，满足 $1\\le n,m,a_i,l,r,x\\le 100$。\n\n对于 $40\\%$ 的数据，满足 $1\\le n,m,a_i,l,r,x\\le 10^4$。\n\n对于 $60\\%$ 的数据，满足 $1\\le n,m,a_i,l,r,x\\le 10^5$。\n\n对于 $80\\%$ 的数据，满足 $1\\le n,m,a_i,l,r,x\\le 10^6$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m,a_i,l,r,x\\le 2\\times10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】离线二维数点", "background": "青蛙。", "description": "给你一个长为 $n$ 的序列 $a$，有 $m$ 次询问，每次询问给定 $l,r,x$，求 $[l,r]$ 区间中小于等于 $x$ 的元素个数。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个数表示序列 $a$。\n\n之后 $m$ 行，每行三个数 $l,r,x$ 表示一次询问。", "outputFormat": "对每个询问，输出一行一个数表示答案。", "hint": "对于 $20\\%$ 的数据，满足 $1\\le n,m,a_i,l,r,x\\le 100$。\n\n对于 $40\\%$ 的数据，满足 $1\\le n,m,a_i,l,r,x\\le 10^4$。\n\n对于 $60\\%$ 的数据，满足 $1\\le n,m,a_i,l,r,x\\le 10^5$。\n\n对于 $80\\%$ 的数据，满足 $1\\le n,m,a_i,l,r,x\\le 10^6$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m,a_i,l,r,x\\le 2\\times10^6$。", "locale": "zh-CN"}}}
{"pid": "P10815", "type": "P", "difficulty": 2, "samples": [["5\n-1 2 -3 4 -5", "-3"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["O2优化", "模板题"], "title": "【模板】快速读入", "background": "**套取数据直接输出抢最优解是恶劣的违规行为，根据情节轻重，最高可以直接封号。**\n\n制约解除作战！", "description": "给你 $n$ 个数，你需要求和并输出。", "inputFormat": "第一行一个整数 $n$。\n\n之后一行 $n$ 个整数以空格隔开，表示给定的 $n$ 个数。", "outputFormat": "一行一个数表示给定的数的和。", "hint": "对于 $25\\%$ 的数据，满足 $n=10^5$。\n\n对于 $25\\%$ 的数据，满足 $n=10^6$。\n\n对于 $25\\%$ 的数据，满足 $n=10^7$。\n\n对于 $25\\%$ 的数据，满足 $n=10^8$。\n\n对于 $100\\%$ 的数据，满足所有数在 $[-n,n]$ 之间。\n\n数据保证对于序列的任何前缀，这个前缀的和在 32 位有符号整型的存储范围内。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】快速读入", "background": "**套取数据直接输出抢最优解是恶劣的违规行为，根据情节轻重，最高可以直接封号。**\n\n制约解除作战！", "description": "给你 $n$ 个数，你需要求和并输出。", "inputFormat": "第一行一个整数 $n$。\n\n之后一行 $n$ 个整数以空格隔开，表示给定的 $n$ 个数。", "outputFormat": "一行一个数表示给定的数的和。", "hint": "对于 $25\\%$ 的数据，满足 $n=10^5$。\n\n对于 $25\\%$ 的数据，满足 $n=10^6$。\n\n对于 $25\\%$ 的数据，满足 $n=10^7$。\n\n对于 $25\\%$ 的数据，满足 $n=10^8$。\n\n对于 $100\\%$ 的数据，满足所有数在 $[-n,n]$ 之间。\n\n数据保证对于序列的任何前缀，这个前缀的和在 32 位有符号整型的存储范围内。", "locale": "zh-CN"}}}
{"pid": "P10816", "type": "P", "difficulty": 5, "samples": [["wohaha", "1"], ["momomo", "0"], ["gshfd1jkhaRaadfglkjerVcvuy0gf", "73"], ["retiredMiFaFa0v0", "33"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2020] Namomo Subsequence", "background": "", "description": "``gshfd1jkhaRaadfglkjerVcvuy0gf`` said Prof. Pang. \n\nTo understand Prof. Pang's word, we would like to calculate the number of $\\textit{namomo subsequence}$s of it. The word by Prof. Pang is a string $s$ with $n$ characters where each character is either an English letter (lower or upper case) or a digit. The $i$-th character of $s$ is denoted by $s[i]$ ($1\\le i\\le n$). A subsequence $t$ of $s$ is defined by a list of indices $t_1, \\ldots, t_6$ such that $1\\le t_1 < t_2 < \\ldots < t_6\\le n$. Let $compare(c_1, c_2)$ be a function on two characters such that $compare(c_1, c_2)=1$ when $c_1=c_2$ and $compare(c_1, c_2)=0$ otherwise. $t$ is a namomo subsequence of $s$ if and only if for any $1\\le i<j\\le 6$, $compare(s[t_i], s[t_j]) = compare(namomo[i], namomo[j])$, where $namomo[x]$ represents the $x$-th character of the string ``namomo`` ($1\\le x\\le 6$). \n\nOutput the number of namomo subsequences of a given string $s$ modulo $998244353$.", "inputFormat": "The first line contains a string $s$ with $n$ characters ($6\\le n\\le 1000000$). $s$ contains only lower case English letters (`a` -- `z`), upper case English letters (`A` -- `Z`) and digits (`0` -- `9`).", "outputFormat": "Output one integer -- the answer modulo $998244353$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2020] Namomo Subsequence", "background": "", "description": "``gshfd1jkhaRaadfglkjerVcvuy0gf`` said Prof. Pang. \n\nTo understand Prof. Pang's word, we would like to calculate the number of $\\textit{namomo subsequence}$s of it. The word by Prof. Pang is a string $s$ with $n$ characters where each character is either an English letter (lower or upper case) or a digit. The $i$-th character of $s$ is denoted by $s[i]$ ($1\\le i\\le n$). A subsequence $t$ of $s$ is defined by a list of indices $t_1, \\ldots, t_6$ such that $1\\le t_1 < t_2 < \\ldots < t_6\\le n$. Let $compare(c_1, c_2)$ be a function on two characters such that $compare(c_1, c_2)=1$ when $c_1=c_2$ and $compare(c_1, c_2)=0$ otherwise. $t$ is a namomo subsequence of $s$ if and only if for any $1\\le i<j\\le 6$, $compare(s[t_i], s[t_j]) = compare(namomo[i], namomo[j])$, where $namomo[x]$ represents the $x$-th character of the string ``namomo`` ($1\\le x\\le 6$). \n\nOutput the number of namomo subsequences of a given string $s$ modulo $998244353$.", "inputFormat": "The first line contains a string $s$ with $n$ characters ($6\\le n\\le 1000000$). $s$ contains only lower case English letters (`a` -- `z`), upper case English letters (`A` -- `Z`) and digits (`0` -- `9`).", "outputFormat": "Output one integer -- the answer modulo $998244353$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2020] Namomo Subsequence", "background": "", "description": "「gshfd1jkhaRaadfglkjerVcvuy0gf」教授 Pang 说道。\n\n为了理解 Pang 教授的话，我们想要计算它的 $\\textit{namomo 子序列}$ 的数量。Pang 教授的话是一个长度为 $n$ 的字符串 $s$，其中每个字符要么是英文字母（大小写），要么是数字。字符串 $s$ 的第 $i$ 个字符记为 $s[i]$（$1\\le i\\le n$）。字符串 $s$ 的子序列 $t$ 由一组下标 $t_1, \\ldots, t_6$ 定义，满足 $1\\le t_1 < t_2 < \\ldots < t_6\\le n$。定义一个函数 $compare(c_1, c_2)$，对于两个字符 $c_1$ 和 $c_2$，当 $c_1=c_2$ 时 $compare(c_1, c_2)=1$，否则 $compare(c_1, c_2)=0$。当且仅当对于任意 $1\\le i<j\\le 6$，$compare(s[t_i], s[t_j]) = compare(namomo[i], namomo[j])$ 时，$t$ 是字符串 $s$ 的一个 namomo 子序列，其中 $namomo[x]$ 表示字符串「namomo」的第 $x$ 个字符（$1\\le x\\le 6$）。\n\n输出给定字符串 $s$ 的 namomo 子序列的数量，结果对 $998244353$ 取模。", "inputFormat": "第一行包含一个长度为 $n$ 的字符串 $s$（$6\\le n\\le 1000000$）。$s$ 仅包含小写英文字母（`a` -- `z`）、大写英文字母（`A` -- `Z`）和数字（`0` -- `9`）。", "outputFormat": "输出一个整数，即答案对 $998244353$ 取模。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10817", "type": "P", "difficulty": 4, "samples": [["2 2\n1 1\n2 1\n1 2\n2 2", "5\n3\n1\n0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2020] Rectangle Flip 2", "background": "", "description": "Prof. Pang enters a trap room in a dungeon. The room can be represented by an $n$ by $m$ chessboard. We use $(i, j)$ ($1\\le i\\le n$, $1\\le j\\le m$) to denote the cell at the $i$-th row and $j$-th column. Every second, the floor of one cell breaks apart (so that Prof. Pang can no longer stand on that cell.) After $nm$ seconds, there will be no cell to stand on and Prof. Pang will fall through to the next (deeper and more dangerous) level.\n\nBut Prof. Pang knows that calm is the key to overcome any challenge. So instead of being panic, he calculates the number of rectangles such that every cell in it is intact (i.e., not broken) after every second. (A rectangle represented by four integers $a, b, c$ and $d$ ($1\\le a\\le b\\le n, 1\\le c\\le d\\le m$) includes all cells $(i, j)$ such that $a\\le i\\le b, c\\le j\\le d$. There are $\n\\frac{n(n+1)}{2} \\times \\frac{m(m+1)}{2}$ rectangles in total.)", "inputFormat": "The first line contains two integers $n$, $m$ ($1\\le n, m\\le 500$) separated by a single space. \n\nThe $(i+1)$-th line contains two integers $a$, $b$ separated by a single space representing that the cell $(a, b)$ breaks apart at the $i$-th second. It is guaranteed that each cell appears exactly once in the input. ", "outputFormat": "Output $nm$ lines. The $i$-th line should contain the number of rectangles such that every cell in it is intact after the first $i$ cells break apart.", "hint": "In the example, after the first second, there are $3$ rectangles of area $1$ and $2$ rectangles of area $2$ that satisfy the constraint. So the first line should contain a $5$. After the second second, only cells in the second column remains intact. The answer should be $3$. After the third second, only one cell remains intact. The answer should be $1$. After the fourth second, all cells broke apart so the answer should be $0$. ", "locale": "en", "translations": {"en": {"title": "[EC Final 2020] Rectangle Flip 2", "background": "", "description": "Prof. Pang enters a trap room in a dungeon. The room can be represented by an $n$ by $m$ chessboard. We use $(i, j)$ ($1\\le i\\le n$, $1\\le j\\le m$) to denote the cell at the $i$-th row and $j$-th column. Every second, the floor of one cell breaks apart (so that Prof. Pang can no longer stand on that cell.) After $nm$ seconds, there will be no cell to stand on and Prof. Pang will fall through to the next (deeper and more dangerous) level.\n\nBut Prof. Pang knows that calm is the key to overcome any challenge. So instead of being panic, he calculates the number of rectangles such that every cell in it is intact (i.e., not broken) after every second. (A rectangle represented by four integers $a, b, c$ and $d$ ($1\\le a\\le b\\le n, 1\\le c\\le d\\le m$) includes all cells $(i, j)$ such that $a\\le i\\le b, c\\le j\\le d$. There are $\n\\frac{n(n+1)}{2} \\times \\frac{m(m+1)}{2}$ rectangles in total.)", "inputFormat": "The first line contains two integers $n$, $m$ ($1\\le n, m\\le 500$) separated by a single space. \n\nThe $(i+1)$-th line contains two integers $a$, $b$ separated by a single space representing that the cell $(a, b)$ breaks apart at the $i$-th second. It is guaranteed that each cell appears exactly once in the input. ", "outputFormat": "Output $nm$ lines. The $i$-th line should contain the number of rectangles such that every cell in it is intact after the first $i$ cells break apart.", "hint": "In the example, after the first second, there are $3$ rectangles of area $1$ and $2$ rectangles of area $2$ that satisfy the constraint. So the first line should contain a $5$. After the second second, only cells in the second column remains intact. The answer should be $3$. After the third second, only one cell remains intact. The answer should be $1$. After the fourth second, all cells broke apart so the answer should be $0$. ", "locale": "en"}, "zh-CN": {"title": "[EC Final 2020] Rectangle Flip 2", "background": "", "description": "庞教授进入了一个地下城的陷阱房间。这个房间可以用一个 $n$ 行 $m$ 列的棋盘来表示。我们用 $(i, j)$ ($1\\le i\\le n$, $1\\le j\\le m$) 来表示第 $i$ 行第 $j$ 列的单元格。每秒钟，有一个单元格的地板会破裂（这样庞教授就不能再站在这个单元格上了）。经过 $nm$ 秒后，将没有单元格可供站立，庞教授将跌落到下一个（更深且更危险的）层级。\n\n但庞教授知道冷静是克服任何挑战的关键。因此，他没有惊慌，而是计算了在每秒钟后，所有单元格都完好的矩形的数量（即，每个单元格在矩形中都没有破裂）。一个矩形由四个整数 $a, b, c$ 和 $d$ ($1\\le a\\le b\\le n, 1\\le c\\le d\\le m$) 表示，包含所有 $(i, j)$ 使得 $a\\le i\\le b, c\\le j\\le d$。总共有 $\n\\frac{n(n+1)}{2} \\times \\frac{m(m+1)}{2}$ 个矩形。", "inputFormat": "第一行包含两个整数 $n$, $m$ ($1\\le n, m\\le 500$)，用空格分隔。\n\n第 $(i+1)$ 行包含两个整数 $a$, $b$，表示在第 $i$ 秒钟单元格 $(a, b)$ 破裂。保证每个单元格在输入中出现恰好一次。", "outputFormat": "输出 $nm$ 行。第 $i$ 行应包含在前 $i$ 个单元格破裂之后，每个单元格都完好的矩形的数量。", "hint": "在示例中：在第一秒后，有 $3$ 个面积为 $1$ 的矩形和 $2$ 个面积为 $2$ 的矩形满足条件。因此第一行应该输出 $5$。在第二秒后，仅第二列中的单元格保持完好。答案应该是 $3$。在第三秒后，仅一个单元格保持完好。答案应该是 $1$。在第四秒后，所有单元格都破裂，所以答案应该是 $0$。\n\n翻译者：[Immunoglobules](https://www.luogu.com.cn/user/1066251)", "locale": "zh-CN"}}}
{"pid": "P10818", "type": "P", "difficulty": 6, "samples": [["50\n36 22 24 21 27 50 28 14 25 34 18 43 47\n13 30 7 10 48 20 16 29 9 8 15 3 31 12\n38 19 49 37 1 46 32 4 44 11 35 6 33 26\n5 45 17 39 40 2 23 42 41", "16659580358178468547"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2020] Random Shuffle", "background": "", "description": "Prof. Pang is selecting teams that advance to the world final contest. As the regionals are cancelled, he uses random shuffle to rank the teams. There are $n$ teams in total. His code is as follows: \n\n```cpp\nuint64_t x;//uint64_t represents 64-bit unsigned integer\nint n;\nuint64_t rand() {//this is a xor-shift random generator\n    x ^= x << 13;\n    x ^= x >> 7;\n    x ^= x << 17;\n    return x;\n}\nint main() {\n    cin >> n;\n    cin >> x;\n    for (int i = 1; i <= n; i++) {//random shuffle [1, 2,..., n]\n        a[i] = i;\n        swap(a[i], a[rand() % i + 1]);\n    }\n    for (int i = 1; i <= n; i++) {//print the result\n        cout << a[i] << (i == n ? '\\n' : ' ');\n    }\n}\n```\n\n\nHe compiled and ran his code and then entered $n$ and some special nonnegative integer $x$. He printed the result on paper.\n\nOne day later, Prof. Pang forgot his choice for $x$. You are given the result of the code and the integer $n$. Please recover the number $x$ that Prof. Pang had entered. ", "inputFormat": "The first line contains a single integer $n$ ($50\\le n\\le 100000$) -- the number of teams. \n\nThe next line contains $n$ integers -- the result printed by Prof. Pang's code. It is guaranteed that the result is correct, i.e., there exists an integer $x$ ($0\\le x\\le 2^{64}-1$) that leads to the result. ", "outputFormat": "Output the integer $x$ ($0\\le x\\le 2^{64}-1$) Prof. Pang had entered. If there are multiple possible $x$'s, print any one.", "hint": "Note that the second line of the sample input is wrapped to fit in the width of page.", "locale": "en", "translations": {"en": {"title": "[EC Final 2020] Random Shuffle", "background": "", "description": "Prof. Pang is selecting teams that advance to the world final contest. As the regionals are cancelled, he uses random shuffle to rank the teams. There are $n$ teams in total. His code is as follows: \n\n```cpp\nuint64_t x;//uint64_t represents 64-bit unsigned integer\nint n;\nuint64_t rand() {//this is a xor-shift random generator\n    x ^= x << 13;\n    x ^= x >> 7;\n    x ^= x << 17;\n    return x;\n}\nint main() {\n    cin >> n;\n    cin >> x;\n    for (int i = 1; i <= n; i++) {//random shuffle [1, 2,..., n]\n        a[i] = i;\n        swap(a[i], a[rand() % i + 1]);\n    }\n    for (int i = 1; i <= n; i++) {//print the result\n        cout << a[i] << (i == n ? '\\n' : ' ');\n    }\n}\n```\n\n\nHe compiled and ran his code and then entered $n$ and some special nonnegative integer $x$. He printed the result on paper.\n\nOne day later, Prof. Pang forgot his choice for $x$. You are given the result of the code and the integer $n$. Please recover the number $x$ that Prof. Pang had entered. ", "inputFormat": "The first line contains a single integer $n$ ($50\\le n\\le 100000$) -- the number of teams. \n\nThe next line contains $n$ integers -- the result printed by Prof. Pang's code. It is guaranteed that the result is correct, i.e., there exists an integer $x$ ($0\\le x\\le 2^{64}-1$) that leads to the result. ", "outputFormat": "Output the integer $x$ ($0\\le x\\le 2^{64}-1$) Prof. Pang had entered. If there are multiple possible $x$'s, print any one.", "hint": "Note that the second line of the sample input is wrapped to fit in the width of page.", "locale": "en"}, "zh-CN": {"title": "[EC Final 2020] Random Shuffle", "background": "", "description": "庞教授正在选择晋级世界总决赛的队伍。由于地区赛被取消，他使用随机打乱来对队伍进行排名。总共有 $n$ 支队伍。他的代码如下：  \n\n```cpp\nuint64_t x;//uint64_t 表示 64 位无符号整数\nint n;\nuint64_t rand() {//这是一个异或移位随机生成器\n    x ^= x << 13;\n    x ^= x >> 7;\n    x ^= x << 17;\n    return x;\n}\nint main() {\n    cin >> n;\n    cin >> x;\n    for (int i = 1; i <= n; i++) {//随机打乱 [1, 2,..., n]\n         a[i] = i;\n         swap(a[i], a[rand() % i + 1]);\n     }\n     for (int i = 1; i <= n; i++) {//打印结果\n       cout << a[i] << (i == n ? '\\n' : ' ');\n    }\n}\n```\n\n他编译并运行了他的代码，然后输入了 $n$ 和某个特殊的非负整数 $x$。他将结果打印在纸上。  一天后，庞教授忘记了他选择的 $x$。给定代码的结果和整数 $n$。请恢复庞教授输入的数字 $x$。", "inputFormat": "第一行包含一个整数 $n$ ($50\\le n\\le 100000$) —— 队伍的数量。  下一行包含 $n$ 个整数 —— 庞教授代码打印的结果。保证结果是正确的，即存在一个整数 $x$ ($0\\le x\\le 2^{64}-1$) 导致该结果。", "outputFormat": "输出庞教授输入的整数 $x$ ($0\\le x\\le 2^{64}-1$)。如果有多个可能的 $x$，输出其中任意一个。", "hint": "注意样例输入的第二行被换行以适应页面宽度。（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10819", "type": "P", "difficulty": 5, "samples": [["6 5 1\n1 2\n3 2\n2 4\n4 5\n4 6\n1 5 3 6", "5.000000000000"], ["1 0 100\n1 1 1 1", "0.000000000000"], ["4 2 3\n1 2\n3 4\n1 2 3 4", "0.833333333333"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2020", "三分", "Special Judge", "O2优化", "最短路", "ICPC", "EC Final"], "title": "[EC Final 2020] City Brain", "background": "", "description": "Prof. Pang works for the City Brain program of Capital Grancel. The road network of Grancel can be represented by an undirected graph. Initially, the speed limit on each road is $1$m/s. Prof. Pang can increase the speed limit on a road by $1$m/s with the cost of $1$ dollar. Prof. Pang has $k$ dollars. He can spend any nonnegative integral amount of money on each road. If the speed limit on some road is $a$m/s, it takes $1/a$ seconds for anyone to go through the road in either direction.\n\nAfter Prof. Pang spent his money, Prof. Du starts to travel from city $s_1$ to city $t_1$ and Prof. Wo starts to travel from city $s_2$ to city $t_2$. Help Prof. Pang to spend his money wisely to minimize the sum of minimum time of Prof. Du's travel and Prof. Wo's travel. It is guaranteed that $s_1$ and $t_1$ are connected by at least one path and that $s_2$ and $t_2$ are connected by at least one path.", "inputFormat": "The first line contains three integers $n$, $m$, $k$ ($1\\le n \\le 5000$, $0\\le m \\le 5000$, $0\\le k\\le 10^9$) separated by single spaces denoting the number of vertices, the number of edges in the graph and the number of dollars Prof. Pang has.\n\nEach of the following $m$ lines contains two integers $a$, $b$ ($1\\le a, b\\le n, a\\neq b$) separated by a single space denoting the two endpoints of one road. There can be multiple roads between the same pair of cities.\n\nThe following line contains four integers $s_1$, $t_1$, $s_2$, $t_2$ ($1\\le s_1, t_1, s_2, t_2\\le n$) separated by single spaces denoting the starting vertices and ending vertices of Prof. Du and Prof. Wo's travels.", "outputFormat": "Output one decimal in the only line -- the minimum sum of Prof. Du's travel time and Prof. Wo's travel time. The answer will be considered correct if its absolute or relative error does not exceed $10^{-9}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2020] City Brain", "background": "", "description": "Prof. Pang works for the City Brain program of Capital Grancel. The road network of Grancel can be represented by an undirected graph. Initially, the speed limit on each road is $1$m/s. Prof. Pang can increase the speed limit on a road by $1$m/s with the cost of $1$ dollar. Prof. Pang has $k$ dollars. He can spend any nonnegative integral amount of money on each road. If the speed limit on some road is $a$m/s, it takes $1/a$ seconds for anyone to go through the road in either direction.\n\nAfter Prof. Pang spent his money, Prof. Du starts to travel from city $s_1$ to city $t_1$ and Prof. Wo starts to travel from city $s_2$ to city $t_2$. Help Prof. Pang to spend his money wisely to minimize the sum of minimum time of Prof. Du's travel and Prof. Wo's travel. It is guaranteed that $s_1$ and $t_1$ are connected by at least one path and that $s_2$ and $t_2$ are connected by at least one path.", "inputFormat": "The first line contains three integers $n$, $m$, $k$ ($1\\le n \\le 5000$, $0\\le m \\le 5000$, $0\\le k\\le 10^9$) separated by single spaces denoting the number of vertices, the number of edges in the graph and the number of dollars Prof. Pang has.\n\nEach of the following $m$ lines contains two integers $a$, $b$ ($1\\le a, b\\le n, a\\neq b$) separated by a single space denoting the two endpoints of one road. There can be multiple roads between the same pair of cities.\n\nThe following line contains four integers $s_1$, $t_1$, $s_2$, $t_2$ ($1\\le s_1, t_1, s_2, t_2\\le n$) separated by single spaces denoting the starting vertices and ending vertices of Prof. Du and Prof. Wo's travels.", "outputFormat": "Output one decimal in the only line -- the minimum sum of Prof. Du's travel time and Prof. Wo's travel time. The answer will be considered correct if its absolute or relative error does not exceed $10^{-9}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2020] City Brain", "background": null, "description": "Pang 教授在首都 Grancel 的城市大脑项目工作。Grancel 的道路网络可以用一个无向图表示。最初，每条道路的限速为 $1$ 米每秒。Pang 教授可以花费 $1$ 美元将某条道路的限速提高 $1$ 米每秒。Pang 教授有 $k$ 美元。他可以在每条道路上花费任意非负整数金额。如果某条道路的限速为 $a$ 米每秒，则任何人通过这条道路需要 $1/a$ 秒的时间。\n\n在 Pang 教授花费完他的资金后，Du 教授开始从城市 $s_1$ 前往城市 $t_1$，而 Wo 教授开始从城市 $s_2$ 前往城市 $t_2$。帮助 Pang 教授明智地花费他的资金，以最小化 Du 教授和 Wo 教授的最短旅行时间之和。保证 $s_1$ 和 $t_1$ 之间至少有一条路径连通，$s_2$ 和 $t_2$ 之间也至少有一条路径连通。", "inputFormat": "第一行包含三个整数 $n$、$m$、$k$ ($1\\le n \\le 5000$, $0\\le m \\le 5000$, $0\\le k\\le 10^9$)，用单个空格分隔，分别表示图中的顶点数、边数和 Pang 教授拥有的美元数。\n\n接下来的 $m$ 行中，每行包含两个整数 $a$、$b$ ($1\\le a, b\\le n, a \\neq b$)，用单个空格分隔，表示一条道路的两个端点。同一对城市之间可以有多条道路。\n\n接下来的一行包含四个整数 $s_1$、$t_1$、$s_2$、$t_2$ ($1\\le s_1, t_1, s_2, t_2\\le n$)，用单个空格分隔，表示 Du 教授和 Wo 教授旅行的起点和终点。", "outputFormat": "输出一个小数，表示 Du 教授的旅行时间和 Wo 教授的旅行时间的最小和。如果其与标准答案的绝对误差或相对误差不超过 $10^{-9}$，则答案被视为正确。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10820", "type": "P", "difficulty": 7, "samples": [["4\n2 3\n4 3 2\n2 3 4\n2 1 1\n2 1 2\n1 2 1\n1 2 1 2\n1 1 1 2\n2 2\n2 1\n2 1\n1 2\n2 2\n1 2\n1 2 1\n2 1 1\n3 2\n1 2\n3 3\n3 2\n1 1\n1 1\n2 2\n1 1\n1 1 1\n1 1 1\n2 2 2\n2 2\n1 2\n3 4\n5 6\n7 8\n9 10\n11 12 13\n14 15 16", "13\n8\n11\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2020] Tube Master III", "background": "", "description": "Prof. Pang is playing ``Tube Master``.\n\nThe game field is divided into $n \\times m$ cells by $(n + 1) \\times m$ horizontal tubes and $n \\times (m + 1)$ vertical tubes. The product $n m$ is an $\\textbf{even}$ number. There are $(n + 1) (m + 1)$ crossings of the tubes. The 2D coordinate of the crossings are $(i, j)$ ($1\\le i\\le n+1$, $1\\le j\\le m+1$). We name the crossing with coordinate $(i, j)$ as crossing $(i, j)$. We name the cell whose corners are crossings $(i, j), (i+1, j), (i, j+1), (i+1, j+1)$ as cell $(i, j)$ for all $1\\le i\\le n$, $1\\le j\\le m$. Additionally, each cell $(i, j)$ contains an integer ${count}_{i, j}$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wfw0es17.png)\n\nThe above figure shows a game field with $n = 3, m = 2$ (the third sample).\n\nProf. Pang decides to use some of the tubes. However, the game poses several weird restrictions.\n\n- Either $0$ or $2$ tubes connected to each crossing are used.\n- There are exactly ${count}_{i, j}$ turning points adjacent to cell $(i, j)$. A turning point is a crossing such that exactly $1$ horizontal tube and exactly $1$ vertical tube connected to it are used. A turning point $(x, y)$ is adjacent to cell $(i, j)$ if crossing $(x, y)$ is a corner of cell $(i, j)$. \n\nIt costs $a_{i, j}$ to use the tube connecting crossings $(i, j)$ and $(i, j+1)$. It costs $b_{i, j}$ to use the tube connecting crossings $(i, j)$ and $(i+1, j)$. Please help Prof. Pang to find out which tubes he should use such that the restrictions are satisfied and the total cost is minimized.", "inputFormat": "The first line contains a single positive integer $T$ denoting the number of test cases.\n\nFor each test case, the first line contains two integers $n$, $m$ ($1 \\leq n, m \\leq 100$) separated by a single space.\n\nThe $i$-th of the following $n$ lines contains $m$ integers ${count}_{i, 1}, {count}_{i, 2}, \\dots, {count}_{i, m}$ ($0 \\leq {count}_{i, j} \\leq 4$) separated by single spaces.\n\nThe $i$-th of the following $n+1$ lines contains $m$ integers ${a}_{i, 1}, {a}_{i, 2}, \\dots, {a}_{i, m}$ ($1 \\leq {a}_{i, j} \\leq 10^9$) separated by single spaces.\n\nThe $i$-th of the following $n$ lines contains $m+1$ integers ${b}_{i, 1}, \\mathit{b}_{i, 2}, \\dots, {b}_{i, m+1}$ ($1 \\leq {b}_{i, j} \\leq 10^9$) separated by single spaces.\n\nIt is guaranteed that $nm$ is an $\\textbf{even}$ number and that the total sum of $nm$ over all test cases does not exceed $10^4$.", "outputFormat": "For each test case, output an integer that denotes the minimum cost.\n\nIf there is no valid configuration, output $\\texttt{-1}$ instead.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2020] Tube Master III", "background": "", "description": "Prof. Pang is playing ``Tube Master``.\n\nThe game field is divided into $n \\times m$ cells by $(n + 1) \\times m$ horizontal tubes and $n \\times (m + 1)$ vertical tubes. The product $n m$ is an $\\textbf{even}$ number. There are $(n + 1) (m + 1)$ crossings of the tubes. The 2D coordinate of the crossings are $(i, j)$ ($1\\le i\\le n+1$, $1\\le j\\le m+1$). We name the crossing with coordinate $(i, j)$ as crossing $(i, j)$. We name the cell whose corners are crossings $(i, j), (i+1, j), (i, j+1), (i+1, j+1)$ as cell $(i, j)$ for all $1\\le i\\le n$, $1\\le j\\le m$. Additionally, each cell $(i, j)$ contains an integer ${count}_{i, j}$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wfw0es17.png)\n\nThe above figure shows a game field with $n = 3, m = 2$ (the third sample).\n\nProf. Pang decides to use some of the tubes. However, the game poses several weird restrictions.\n\n- Either $0$ or $2$ tubes connected to each crossing are used.\n- There are exactly ${count}_{i, j}$ turning points adjacent to cell $(i, j)$. A turning point is a crossing such that exactly $1$ horizontal tube and exactly $1$ vertical tube connected to it are used. A turning point $(x, y)$ is adjacent to cell $(i, j)$ if crossing $(x, y)$ is a corner of cell $(i, j)$. \n\nIt costs $a_{i, j}$ to use the tube connecting crossings $(i, j)$ and $(i, j+1)$. It costs $b_{i, j}$ to use the tube connecting crossings $(i, j)$ and $(i+1, j)$. Please help Prof. Pang to find out which tubes he should use such that the restrictions are satisfied and the total cost is minimized.", "inputFormat": "The first line contains a single positive integer $T$ denoting the number of test cases.\n\nFor each test case, the first line contains two integers $n$, $m$ ($1 \\leq n, m \\leq 100$) separated by a single space.\n\nThe $i$-th of the following $n$ lines contains $m$ integers ${count}_{i, 1}, {count}_{i, 2}, \\dots, {count}_{i, m}$ ($0 \\leq {count}_{i, j} \\leq 4$) separated by single spaces.\n\nThe $i$-th of the following $n+1$ lines contains $m$ integers ${a}_{i, 1}, {a}_{i, 2}, \\dots, {a}_{i, m}$ ($1 \\leq {a}_{i, j} \\leq 10^9$) separated by single spaces.\n\nThe $i$-th of the following $n$ lines contains $m+1$ integers ${b}_{i, 1}, \\mathit{b}_{i, 2}, \\dots, {b}_{i, m+1}$ ($1 \\leq {b}_{i, j} \\leq 10^9$) separated by single spaces.\n\nIt is guaranteed that $nm$ is an $\\textbf{even}$ number and that the total sum of $nm$ over all test cases does not exceed $10^4$.", "outputFormat": "For each test case, output an integer that denotes the minimum cost.\n\nIf there is no valid configuration, output $\\texttt{-1}$ instead.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2020] Tube Master III", "background": "", "description": "庞教授正在玩「Tube Master」。\n\n游戏场地被 $(n + 1) \\times m$ 条水平管道和 $n \\times (m + 1)$ 条垂直管道划分为 $n \\times m$ 个单元格。乘积 $nm$ 是一个\\textbf{偶数}。管道的交叉点共有 $(n + 1) (m + 1)$ 个。交叉点的二维坐标为 $(i, j)$，其中 $1\\le i\\le n+1$，$1\\le j\\le m+1$。我们将坐标为 $(i, j)$ 的交叉点称为交叉点 $(i, j)$。我们将以交叉点 $(i, j), (i+1, j), (i, j+1), (i+1, j+1)$ 为角的单元格称为单元格 $(i, j)$，其中 $1\\le i\\le n$，$1\\le j\\le m$。此外，每个单元格 $(i, j)$ 包含一个整数 ${count}_{i, j}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wfw0es17.png)\n\n上图展示了一个 $n = 3, m = 2$ 的游戏场地（第三个样例）。\n\n庞教授决定使用一些管道。然而，游戏有几个奇怪的限制条件。\n\n- 每个交叉点要么连接 $0$ 根管道，要么连接 $2$ 根管道。\n- 恰好有 ${count}_{i, j}$ 个转折点与单元格 $(i, j)$ 相邻。转折点是指恰好有 $1$ 根水平管道和 $1$ 根垂直管道连接到它的交叉点。转折点 $(x, y)$ 与单元格 $(i, j)$ 相邻是指交叉点 $(x, y)$ 是单元格 $(i, j)$ 的一个角。\n\n使用连接交叉点 $(i, j)$ 和 $(i, j+1)$ 的管道的费用是 $a_{i, j}$。使用连接交叉点 $(i, j)$ 和 $(i+1, j)$ 的管道的费用是 $b_{i, j}$。请帮助庞教授找出他应该使用哪些管道，以便满足限制条件并使总费用最小。", "inputFormat": "第一行包含一个正整数 $T$，表示测试用例的数量。\n\n对于每个测试用例，第一行包含两个整数 $n$ 和 $m$ ($1 \\leq n, m \\leq 100$)，用一个空格分隔。\n\n接下来的 $n$ 行中，第 $i$ 行包含 $m$ 个整数 ${count}_{i, 1}, {count}_{i, 2}, \\dots, {count}_{i, m}$ ($0 \\leq {count}_{i, j} \\leq 4$)，用空格分隔。\n\n接下来的 $n+1$ 行中，第 $i$ 行包含 $m$ 个整数 ${a}_{i, 1}, {a}_{i, 2}, \\dots, {a}_{i, m}$ ($1 \\leq {a}_{i, j} \\leq 10^9$)，用空格分隔。\n\n接下来的 $n$ 行中，第 $i$ 行包含 $m+1$ 个整数 ${b}_{i, 1}, \\mathit{b}_{i, 2}, \\dots, {b}_{i, m+1}$ ($1 \\leq {b}_{i, j} \\leq 10^9$)，用空格分隔。\n\n保证 $nm$ 是一个\\textbf{偶数}，且所有测试用例中 $nm$ 的总和不超过 $10^4$。", "outputFormat": "对于每个测试用例，输出一个整数，表示最小费用。\n\n如果没有有效的配置，输出 `-1`。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10821", "type": "P", "difficulty": 3, "samples": [["3 2\n0 0\n0 1\n1 0\n0 -1\n-1 0", "100\n11"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2020", "O2优化", "排序", "ICPC", "EC Final"], "title": "[EC Final 2020] Rooks", "background": "", "description": "Prof. Pang plays chess against his rival Prof. Shou. They are the only two players in the game. The chessboard is very large and can be viewed as a 2D plane. Prof. Pang placed $n_1$ rooks and Prof. Shou placed $n_2$ rooks. Each rook is a point with integer coordinates on the chessboard. One rook is $\\textit{attacked}$ by another rook if they satisfy all of the following conditions:\n\n- They are placed by different players.\n- They have the same $x$-coordinate or $y$-coordinate.\n- There is no other rook on the line segment between them.\n\nHelp Prof. Pang and Prof. Shou to decide which rooks are attacked.", "inputFormat": "The first line contains two integers $n_1, n_2$ ($1\\le n_1, n_2\\le 200000$) separated by a single space denoting the number of rooks placed by Prof. Pang and the number of rooks placed by Prof. Shou.\n\nThe $i$-th ($1\\le i\\le n_1$) line of the next $n_1$ lines contains two integers $x, y$ ($-10^9\\le x, y\\le 10^9$) separated by a single space denoting the location $(x, y)$ of the $i$-th rook placed by Prof. Pang.\n\nThe $i$-th ($1\\le i\\le n_2$) line of the next $n_2$ lines contains two integers $x, y$ ($-10^9\\le x, y\\le 10^9$) separated by a single space denoting the location $(x, y)$ of the $i$-th rook placed by Prof. Shou.\n\nIt is guaranteed that the $n_1+n_2$ rooks placed by the players are distinct (i.e., no two rooks can have the same location).", "outputFormat": "Output a string with length $n_1$ on the first line. The $i$-th ($1\\le i\\le n_1$) character should be $1$ if the $i$-th rook placed by Prof. Pang is attacked and $0$ otherwise.\n\nOutput a string with length $n_2$ on the second line. The $i$-th ($1\\le i\\le n_2$) character should be $1$ if the $i$-th rook placed by Prof. Shou is attacked and $0$ otherwise.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2020] Rooks", "background": "", "description": "Prof. Pang plays chess against his rival Prof. Shou. They are the only two players in the game. The chessboard is very large and can be viewed as a 2D plane. Prof. Pang placed $n_1$ rooks and Prof. Shou placed $n_2$ rooks. Each rook is a point with integer coordinates on the chessboard. One rook is $\\textit{attacked}$ by another rook if they satisfy all of the following conditions:\n\n- They are placed by different players.\n- They have the same $x$-coordinate or $y$-coordinate.\n- There is no other rook on the line segment between them.\n\nHelp Prof. Pang and Prof. Shou to decide which rooks are attacked.", "inputFormat": "The first line contains two integers $n_1, n_2$ ($1\\le n_1, n_2\\le 200000$) separated by a single space denoting the number of rooks placed by Prof. Pang and the number of rooks placed by Prof. Shou.\n\nThe $i$-th ($1\\le i\\le n_1$) line of the next $n_1$ lines contains two integers $x, y$ ($-10^9\\le x, y\\le 10^9$) separated by a single space denoting the location $(x, y)$ of the $i$-th rook placed by Prof. Pang.\n\nThe $i$-th ($1\\le i\\le n_2$) line of the next $n_2$ lines contains two integers $x, y$ ($-10^9\\le x, y\\le 10^9$) separated by a single space denoting the location $(x, y)$ of the $i$-th rook placed by Prof. Shou.\n\nIt is guaranteed that the $n_1+n_2$ rooks placed by the players are distinct (i.e., no two rooks can have the same location).", "outputFormat": "Output a string with length $n_1$ on the first line. The $i$-th ($1\\le i\\le n_1$) character should be $1$ if the $i$-th rook placed by Prof. Pang is attacked and $0$ otherwise.\n\nOutput a string with length $n_2$ on the second line. The $i$-th ($1\\le i\\le n_2$) character should be $1$ if the $i$-th rook placed by Prof. Shou is attacked and $0$ otherwise.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2020] Rooks", "background": null, "description": "庞教授与他的对手寿教授下棋。他们是游戏中仅有的两位玩家。棋盘非常大，可以看作是一个二维平面。庞教授放置了 $n_1$ 个车，寿教授放置了 $n_2$ 个车。每个车在棋盘上是一个具有整数坐标的点。如果一个车满足以下所有条件，则被另一个车「攻击」：\n\n- 它们由不同的玩家放置。\n- 它们具有相同的 $x$ 坐标或 $y$ 坐标。\n- 在它们之间的线段上没有其他车。\n\n帮助庞教授和寿教授判断哪些车被攻击。", "inputFormat": "第一行包含两个整数 $n_1, n_2$ ($1\\le n_1, n_2\\le 200000$)，用一个空格分隔，表示庞教授放置的车的数量和寿教授放置的车的数量。\n\n接下来的 $n_1$ 行中的第 $i$ 行 ($1\\le i\\le n_1$) 包含两个整数 $x, y$ ($-10^9\\le x, y\\le 10^9$)，用一个空格分隔，表示庞教授放置的第 $i$ 个车的位置 $(x, y)$。\n\n接下来的 $n_2$ 行中的第 $i$ 行 ($1\\le i\\le n_2$) 包含两个整数 $x, y$ ($-10^9\\le x, y\\le 10^9$)，用一个空格分隔，表示寿教授放置的第 $i$ 个车的位置 $(x, y)$。\n\n保证玩家放置的 $n_1+n_2$ 个车是不同的（即没有两个车可以有相同的位置）。", "outputFormat": "第一行输出一个长度为 $n_1$ 的字符串。如果庞教授放置的第 $i$ 个车被攻击，第 $i$ 个 ($1\\le i\\le n_1$) 字符应为 $1$，否则为 $0$。\n\n第二行输出一个长度为 $n_2$ 的字符串。如果寿教授放置的第 $i$ 个车被攻击，第 $i$ 个 ($1\\le i\\le n_2$) 字符应为 $1$，否则为 $0$。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10822", "type": "P", "difficulty": 6, "samples": [["5\n1 2 3 2 1\n5\n1 5\n2 4\n1 3\n2 5\n4 4", "10\n3\n4\n6\n1"], ["5\n2 3 5 1 5\n5\n2 3\n1 1\n1 3\n2 5\n2 4", "2\n1\n4\n6\n4"], ["10\n2 8 5 1 10 5 9 9 3 5\n10\n6 8\n1 2\n3 5\n5 7\n1 7\n3 9\n4 9\n1 4\n3 7\n2 5", "4\n2\n4\n4\n16\n16\n12\n6\n9\n6"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2020] Prof. Pang's sequence", "background": "", "description": "Prof. Pang is given a fixed sequence $a_1, \\ldots, a_n$ and $m$ queries.\n\nEach query is specified by two integers $l$ and $r$ satisfying $1\\le l\\le r\\le n$. For each query, you should answer the number of pairs of integers $(i, j)$ such that $l\\le i\\le j\\le r$ and the number of distinct integers in $a_i, \\ldots, a_j$ is odd.", "inputFormat": "The first line contains a single integer $n$ ($1\\le n\\le 5\\times 10^5$).\n\nThe next line contains $n$ integers $a_1, \\ldots, a_n$ ($1\\le a_i\\le n$ for all $1\\le i\\le n$) separated by single spaces.\n\nThe next line contains a single integer $m$ ($1\\le m\\le 5\\times 10^5$).\n\nEach of the next $m$ lines contains two integers $l$ and $r$ ($1\\le l\\le r\\le n$) separated by a single space denoting a query.", "outputFormat": "For each query, output one line containing the answer to that query.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2020] Prof. Pang's sequence", "background": "", "description": "Prof. Pang is given a fixed sequence $a_1, \\ldots, a_n$ and $m$ queries.\n\nEach query is specified by two integers $l$ and $r$ satisfying $1\\le l\\le r\\le n$. For each query, you should answer the number of pairs of integers $(i, j)$ such that $l\\le i\\le j\\le r$ and the number of distinct integers in $a_i, \\ldots, a_j$ is odd.", "inputFormat": "The first line contains a single integer $n$ ($1\\le n\\le 5\\times 10^5$).\n\nThe next line contains $n$ integers $a_1, \\ldots, a_n$ ($1\\le a_i\\le n$ for all $1\\le i\\le n$) separated by single spaces.\n\nThe next line contains a single integer $m$ ($1\\le m\\le 5\\times 10^5$).\n\nEach of the next $m$ lines contains two integers $l$ and $r$ ($1\\le l\\le r\\le n$) separated by a single space denoting a query.", "outputFormat": "For each query, output one line containing the answer to that query.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2020] Prof. Pang's sequence", "background": "", "description": "庞教授得到一个固定的序列 $a_1, \\ldots, a_n$ 和 $m$ 个查询。\n\n每个查询由两个整数 $l$ 和 $r$ 指定，满足 $1\\le l\\le r\\le n$。对于每个查询，你需要回答满足 $l\\le i\\le j\\le r$ 且 $a_i, \\ldots, a_j$ 中不同整数的数量为奇数的整数对 $(i, j)$ 的数量。", "inputFormat": "第一行包含一个整数 $n$ ($1\\le n\\le 5\\times 10^5$)。\n\n下一行包含 $n$ 个整数 $a_1, \\ldots, a_n$ ($1\\le a_i\\le n$ 对于所有 $1\\le i\\le n$)，以单个空格分隔。\n\n下一行包含一个整数 $m$ ($1\\le m\\le 5\\times 10^5$)。\n\n接下来的 $m$ 行中的每一行包含两个整数 $l$ 和 $r$ ($1\\le l\\le r\\le n$)，以单个空格分隔，表示一个查询。", "outputFormat": "对于每个查询，输出一行，包含该查询的答案。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10823", "type": "P", "difficulty": 7, "samples": [["6\n2 2 2 2 2 2 2 2\n78 74 5 3 10 2 4 7\n31 75 3 6 6 1 8 4\n91 86 4 2 9 5 8 5\n48 89 3 9 2 3 5 7\n13 25 5 7 6 1 2 4", "7\n355\n239\n571\n637\n109"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2020] Prof. Pang Earning Aus", "background": "", "description": "Prof. Pang has only $1$ Au in his pocket. (Yes, Prof. Pang is from Austan and he uses the currency Au there.)\n\nHe will make use of a balloon store and a candy store to make money: In the balloon store, Prof. Pang can buy $k_{ab}$ balloons for the price of $1$ Au or buy $k_{cb}$ balloons for the price of $1$ candy. In the candy store, Prof. Pang can buy $k_{ac}$ candies for the price of $1$ Au or buy $k_{bc}$ candies for the price of $1$ balloon. Prof. Pang can also sell one balloon and get $k_{ba}$ Aus. He can sell one candy and get $k_{ca}$ Aus. The only constraint to him is that there are only $n_b$ balloons in the balloon store and only $n_c$ candies in the candy store. He can buy balloons and candies only when supplies last. Even if he sells some of his balloons or candies, the number of balloons and candies in the stores will not increase.\n\nEach of the six transactions can be performed in any order for any times ($0$ or more) but they are not separable (for example, Prof. Pang can not buy $k_{ab}/2$ balloons for the price of $1/2$ Au).\n\nPlease find out how many Aus he can make at most.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 1000$) denoting the number of test cases.\n\nEach of the next $T$ lines contains eight integers $n_b$, $n_c$, $k_{ab}$, $k_{ba}$, $k_{ac}$, $k_{ca}$, $k_{bc}$, $k_{cb}$ ($1\\le n_b, n_c\\le 10^9$, $1\\le k_{ab}, k_{ba}, k_{ac}, k_{ca}, k_{bc}, k_{cb}\\le 100$) separated by single spaces.", "outputFormat": "For each test case, print one line containing the answer.", "hint": "In the first example, Prof. Pang buys $2$ balloons with $1$ Au and then sells $2$ balloons and gets $4$ Aus. Then he buys $2$ candies with $1$ Au, sells $2$ candies and gets $4$ Aus.\n", "locale": "en", "translations": {"en": {"title": "[EC Final 2020] Prof. Pang Earning Aus", "background": "", "description": "Prof. Pang has only $1$ Au in his pocket. (Yes, Prof. Pang is from Austan and he uses the currency Au there.)\n\nHe will make use of a balloon store and a candy store to make money: In the balloon store, Prof. Pang can buy $k_{ab}$ balloons for the price of $1$ Au or buy $k_{cb}$ balloons for the price of $1$ candy. In the candy store, Prof. Pang can buy $k_{ac}$ candies for the price of $1$ Au or buy $k_{bc}$ candies for the price of $1$ balloon. Prof. Pang can also sell one balloon and get $k_{ba}$ Aus. He can sell one candy and get $k_{ca}$ Aus. The only constraint to him is that there are only $n_b$ balloons in the balloon store and only $n_c$ candies in the candy store. He can buy balloons and candies only when supplies last. Even if he sells some of his balloons or candies, the number of balloons and candies in the stores will not increase.\n\nEach of the six transactions can be performed in any order for any times ($0$ or more) but they are not separable (for example, Prof. Pang can not buy $k_{ab}/2$ balloons for the price of $1/2$ Au).\n\nPlease find out how many Aus he can make at most.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 1000$) denoting the number of test cases.\n\nEach of the next $T$ lines contains eight integers $n_b$, $n_c$, $k_{ab}$, $k_{ba}$, $k_{ac}$, $k_{ca}$, $k_{bc}$, $k_{cb}$ ($1\\le n_b, n_c\\le 10^9$, $1\\le k_{ab}, k_{ba}, k_{ac}, k_{ca}, k_{bc}, k_{cb}\\le 100$) separated by single spaces.", "outputFormat": "For each test case, print one line containing the answer.", "hint": "In the first example, Prof. Pang buys $2$ balloons with $1$ Au and then sells $2$ balloons and gets $4$ Aus. Then he buys $2$ candies with $1$ Au, sells $2$ candies and gets $4$ Aus.\n", "locale": "en"}, "zh-CN": {"title": "[EC Final 2020] Prof. Pang Earning Aus", "background": "", "description": "庞教授的口袋里只有 $1$ 个奥币。（是的，庞教授来自奥斯坦，他在那里使用奥币。）\n\n他将利用一个气球店和一个糖果店来赚钱：在气球店，庞教授可以用 $1$ 个奥币买 $k_{ab}$ 个气球，或者用 $1$ 个糖果买 $k_{cb}$ 个气球。在糖果店，庞教授可以用 $1$ 个奥币买 $k_{ac}$ 个糖果，或者用 $1$ 个气球买 $k_{bc}$ 个糖果。庞教授还可以卖掉一个气球，得到 $k_{ba}$ 个奥币。他可以卖掉一个糖果，得到 $k_{ca}$ 个奥币。他唯一的限制是气球店里只有 $n_b$ 个气球，糖果店里只有 $n_c$ 个糖果。他只能在供应充足时购买气球和糖果。即使他卖掉了一些气球或糖果，商店里的气球和糖果数量也不会增加。\n\n这六种交易可以以任何顺序进行任意次数（$0$ 次或更多），但它们不可分割（例如，庞教授不能用 $1/2$ 个奥币买 $k_{ab}/2$ 个气球）。\n\n请找出他最多能赚多少个奥币。", "inputFormat": "第一行包含一个整数 $T$ ($1\\le T\\le 1000$)，表示测试用例的数量。\n\n接下来的 $T$ 行中，每行包含八个整数 $n_b$、$n_c$、$k_{ab}$、$k_{ba}$、$k_{ac}$、$k_{ca}$、$k_{bc}$、$k_{cb}$ ($1\\le n_b, n_c\\le 10^9$, $1\\le k_{ab}, k_{ba}, k_{ac}, k_{ca}, k_{bc}, k_{cb}\\le 100$)，它们之间用空格分隔。", "outputFormat": "对于每个测试用例，输出一行包含答案。", "hint": "在第一个例子中，庞教授用 $1$ 个奥币买了 $2$ 个气球，然后卖掉 $2$ 个气球，得到 $4$ 个奥币。接着他用 $1$ 个奥币买了 $2$ 个糖果，卖掉 $2$ 个糖果，得到 $4$ 个奥币。\n（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10824", "type": "P", "difficulty": 6, "samples": [["3 2 1 2 2\n1 11\n2 8\n1 1\n1 2\n2 4", "2 3 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2020] Plants vs Zombies", "background": "", "description": "Prof. Pang is playing $\\textit{Plants vs Zombies}$.\n\nImagine that the game is played on a number axis. The following are the elements in the game:\n\n- $n$ zombies. The $i$-th zombie appears at $0$ on the number axis at time $t_i$ with health point $h_i$. The zombies have the same moving speed $V$ and they all move to the right.\n- $m$ spikeweeds. The $i$-th spikeweed is of position $p_i$ and attack power $a_i$.\n- One peashooter at the position of $10^{100}$. It shoots $K$ peas of attack power $D$ every second.\n\nEvery second in the game is processed as follows:\n\n- When the $x$-th second begins, the zombies whose $t_i$s equal $x$ appear at position $0$.\n- After that, for each appeared and alive zombie $u$, it will suffer from the spikeweeds whose positions are in $(P_u, P_u + V]$ where $P_u$ is the current position of the $u$-th zombie. So its health point will be decreased by $\\sum\\limits_{1\\le i\\le m, P_u < p_i \\le P_u + V} a_i$. The zombie dies if its health point is no more than zero. Otherwise, it is still alive and its position will be increased by $V$.\n- When the $x$-th second ends, the peashooter shoots $K$ peas in a row. For each pea, it will hit the zombie that is alive and of the maximum position currently. If there are multiple zombies of the maximum position, the pea hits the one of the minimum index. The health point of the zombie being hit decreases by $D$. This zombie dies if its health point is decreased to some value no more than $0$. The peas are processed one by one, not simultaneously. (For example, if a zombie is killed by the first pea, the second pea cannot hit it since it dies before the second pea is shot.) If no alive zombie exists, the remain peas will hit nothing.\n\nProf. Pang wants to know the death time (in seconds) of all the $n$ zombies.", "inputFormat": "The first line contains five integers $n,m,V,K,D$ ($1\\le n,m \\le 10^5, 1\\le V,K,D \\le 10^9$) separated by single spaces.\n\nEach of the following $n$ lines contains two integers $t_i, h_i$ ($1\\le t_i,h_i \\le 10^9$) separated by a single space.\n\nEach of the following $m$ lines contains two integers $p_i, a_i$ ($1\\le p_i,a_i \\le 10^9$) separated by a single space.", "outputFormat": "Output one line containing $n$ integers, where the $i$-th integer denotes the death time (in seconds) of the $i$-th zombie.", "hint": "During the first second:\n\n- The first zombie appears and then moves to position 1. It suffers $6$ damage points ($2$ from the first spikeweed, $4$ from the two peas).\n- The third zombie appears and then moves to position 1. It suffers $2$ damage points (from the first spikeweed) and dies (since its health point becomes $-1$).\n\nDuring the second second:\n\n- The first zombie moves to position $2$ and suffers $6$ damage points ($4$ from the second spikeweed, $2$ from the first pea) and dies (since its health point becomes $-1$).\n- The second zombie appears and then moves to position $1$. It suffers $4$ damage points ($2$ from the first spikeweed, $2$ from the second pea).\n\nDuring the third second:\n\n- The second zombie moves to position $2$, suffers $4$ damage points ($4$ from the second spikeweed) and dies (since its health point becomes $0$).\n- The peas hit no zombie during this second.\n\nSo the death times of the zombies are $2$, $3$, $1$, respectively.", "locale": "en", "translations": {"en": {"title": "[EC Final 2020] Plants vs Zombies", "background": "", "description": "Prof. Pang is playing $\\textit{Plants vs Zombies}$.\n\nImagine that the game is played on a number axis. The following are the elements in the game:\n\n- $n$ zombies. The $i$-th zombie appears at $0$ on the number axis at time $t_i$ with health point $h_i$. The zombies have the same moving speed $V$ and they all move to the right.\n- $m$ spikeweeds. The $i$-th spikeweed is of position $p_i$ and attack power $a_i$.\n- One peashooter at the position of $10^{100}$. It shoots $K$ peas of attack power $D$ every second.\n\nEvery second in the game is processed as follows:\n\n- When the $x$-th second begins, the zombies whose $t_i$s equal $x$ appear at position $0$.\n- After that, for each appeared and alive zombie $u$, it will suffer from the spikeweeds whose positions are in $(P_u, P_u + V]$ where $P_u$ is the current position of the $u$-th zombie. So its health point will be decreased by $\\sum\\limits_{1\\le i\\le m, P_u < p_i \\le P_u + V} a_i$. The zombie dies if its health point is no more than zero. Otherwise, it is still alive and its position will be increased by $V$.\n- When the $x$-th second ends, the peashooter shoots $K$ peas in a row. For each pea, it will hit the zombie that is alive and of the maximum position currently. If there are multiple zombies of the maximum position, the pea hits the one of the minimum index. The health point of the zombie being hit decreases by $D$. This zombie dies if its health point is decreased to some value no more than $0$. The peas are processed one by one, not simultaneously. (For example, if a zombie is killed by the first pea, the second pea cannot hit it since it dies before the second pea is shot.) If no alive zombie exists, the remain peas will hit nothing.\n\nProf. Pang wants to know the death time (in seconds) of all the $n$ zombies.", "inputFormat": "The first line contains five integers $n,m,V,K,D$ ($1\\le n,m \\le 10^5, 1\\le V,K,D \\le 10^9$) separated by single spaces.\n\nEach of the following $n$ lines contains two integers $t_i, h_i$ ($1\\le t_i,h_i \\le 10^9$) separated by a single space.\n\nEach of the following $m$ lines contains two integers $p_i, a_i$ ($1\\le p_i,a_i \\le 10^9$) separated by a single space.", "outputFormat": "Output one line containing $n$ integers, where the $i$-th integer denotes the death time (in seconds) of the $i$-th zombie.", "hint": "During the first second:\n\n- The first zombie appears and then moves to position 1. It suffers $6$ damage points ($2$ from the first spikeweed, $4$ from the two peas).\n- The third zombie appears and then moves to position 1. It suffers $2$ damage points (from the first spikeweed) and dies (since its health point becomes $-1$).\n\nDuring the second second:\n\n- The first zombie moves to position $2$ and suffers $6$ damage points ($4$ from the second spikeweed, $2$ from the first pea) and dies (since its health point becomes $-1$).\n- The second zombie appears and then moves to position $1$. It suffers $4$ damage points ($2$ from the first spikeweed, $2$ from the second pea).\n\nDuring the third second:\n\n- The second zombie moves to position $2$, suffers $4$ damage points ($4$ from the second spikeweed) and dies (since its health point becomes $0$).\n- The peas hit no zombie during this second.\n\nSo the death times of the zombies are $2$, $3$, $1$, respectively.", "locale": "en"}, "zh-CN": {"title": "[EC Final 2020] Plants vs Zombies", "background": "", "description": "庞教授正在玩「植物大战僵尸」。\n\n假设游戏在数轴上进行。游戏中有以下元素：\n\n- $n$ 个僵尸。第 $i$ 个僵尸在时间 $t_i$ 出现在数轴的 $0$ 位置，生命值为 $h_i$。僵尸的移动速度相同，均为 $V$，并且它们都向右移动。\n- $m$ 个地刺。第 $i$ 个地刺的位置为 $p_i$，攻击力为 $a_i$。\n- 一个豌豆射手，位于 $10^{100}$ 位置。它每秒发射 $K$ 颗攻击力为 $D$ 的豌豆。\n\n游戏中的每一秒按以下步骤处理：\n\n- 当第 $x$ 秒开始时，所有 $t_i$ 等于 $x$ 的僵尸出现在位置 $0$。\n- 之后，对于每个已经出现且存活的僵尸 $u$，它会受到位置在 $(P_u, P_u + V]$ 的地刺的攻击，其中 $P_u$ 是第 $u$ 个僵尸的当前位置。因此，它的生命值会减少 $\\sum\\limits_{1\\le i\\le m, P_u < p_i \\le P_u + V} a_i$。如果僵尸的生命值不超过零，它就会死亡。否则，它仍然存活并且位置增加 $V$。\n- 当第 $x$ 秒结束时，豌豆射手连续发射 $K$ 颗豌豆。对于每颗豌豆，它会击中当前存活且位置最大的僵尸。如果有多个位置最大的僵尸，豌豆会击中索引最小的那个。被击中的僵尸的生命值减少 $D$。如果僵尸的生命值减少到不超过 $0$，它就会死亡。豌豆是逐个处理的，而不是同时处理的。（例如，如果一个僵尸被第一颗豌豆击杀，第二颗豌豆无法击中它，因为它在第二颗豌豆发射前已经死亡。）如果没有存活的僵尸，剩下的豌豆将击中空处。\n\n庞教授想知道所有 $n$ 个僵尸的死亡时间（以秒为单位）。", "inputFormat": "第一行包含五个整数 $n,m,V,K,D$ ($1\\le n,m \\le 10^5, 1\\le V,K,D \\le 10^9$)，用单个空格分隔。\n\n接下来的 $n$ 行中的每一行包含两个整数 $t_i, h_i$ ($1\\le t_i,h_i \\le 10^9$)，用单个空格分隔。\n\n接下来的 $m$ 行中的每一行包含两个整数 $p_i, a_i$ ($1\\le p_i,a_i \\le 10^9$)，用单个空格分隔。", "outputFormat": "输出一行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个僵尸的死亡时间（以秒为单位）。", "hint": "在第一秒：\n\n- 第一个僵尸出现并移动到位置 1。它受到 $6$ 点伤害（$2$ 点来自第一个地刺，$4$ 点来自两颗豌豆）。\n- 第三个僵尸出现并移动到位置 1。它受到 $2$ 点伤害（来自第一个地刺）并死亡（因为它的生命值变为 $-1$）。\n\n在第二秒：\n\n- 第一个僵尸移动到位置 $2$，受到 $6$ 点伤害（$4$ 点来自第二个地刺，$2$ 点来自第一颗豌豆）并死亡（因为它的生命值变为 $-1$）。\n- 第二个僵尸出现并移动到位置 $1$。它受到 $4$ 点伤害（$2$ 点来自第一个地刺，$2$ 点来自第二颗豌豆）。\n\n在第三秒：\n\n- 第二个僵尸移动到位置 $2$，受到 $4$ 点伤害（$4$ 点来自第二个地刺）并死亡（因为它的生命值变为 $0$）。\n- 这一秒内豌豆没有击中任何僵尸。\n\n因此，僵尸的死亡时间分别是 $2$，$3$，$1$。（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10825", "type": "P", "difficulty": 7, "samples": [["3\n4 1\n0 0\n1 0\n1 1\n0 1\n4 1\n0 0\n1 1\n0 2\n-1 1\n4 100\n0 0\n1 0\n1 1\n0 1", "0.315146743628\n0\n31016.928202570849"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2020] Circle", "background": "", "description": "Prof. Pang does research on the minimum covering circle problem. He does not like random algorithms so he decides to find an efficient deterministic one. He starts with the classical idea of binary search. In each iteration of the binary search, the following problem needs to be solved:\n\nGiven the radius $r$ of a circle and a convex hull $C$, let $S$ be defined as \n\n$$S=\\{p\\ |\\  \\text{the circle with center $p$ and radius $r$ covers $C$}\\}.$$ \n\nFind the area of $S$.", "inputFormat": "The first line contains a single positive integer $T$ denoting the number of test cases.\n\nFor each test case, the first line contains two integers $n$ and $r$ ($1\\le n\\le 1000$, $1\\le r\\le 30000$) separated by a single space denoting the number of vertices of the convex hull and the radius. If $n=1$, the convex hull contains only $1$ point. If $n=2$, the convex hull is a line segment. \n\nEach of the following $n$ lines contains two integers $x, y$ ($-10000\\le x, y\\le 10000$) separated by a single space denoting a vertex at $(x, y)$. It is guaranteed that no two vertices coincide and no three vertices are collinear. Vertices are listed in counter-clockwise order.\n\nIt is guaranteed that the sum of $n$ over all test cases does not exceed $200000$.", "outputFormat": "Output a single decimal indicating the answer. Your answer will be considered correct if the absolute or relative error is no more than $10^{-6}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2020] Circle", "background": "", "description": "Prof. Pang does research on the minimum covering circle problem. He does not like random algorithms so he decides to find an efficient deterministic one. He starts with the classical idea of binary search. In each iteration of the binary search, the following problem needs to be solved:\n\nGiven the radius $r$ of a circle and a convex hull $C$, let $S$ be defined as \n\n$$S=\\{p\\ |\\  \\text{the circle with center $p$ and radius $r$ covers $C$}\\}.$$ \n\nFind the area of $S$.", "inputFormat": "The first line contains a single positive integer $T$ denoting the number of test cases.\n\nFor each test case, the first line contains two integers $n$ and $r$ ($1\\le n\\le 1000$, $1\\le r\\le 30000$) separated by a single space denoting the number of vertices of the convex hull and the radius. If $n=1$, the convex hull contains only $1$ point. If $n=2$, the convex hull is a line segment. \n\nEach of the following $n$ lines contains two integers $x, y$ ($-10000\\le x, y\\le 10000$) separated by a single space denoting a vertex at $(x, y)$. It is guaranteed that no two vertices coincide and no three vertices are collinear. Vertices are listed in counter-clockwise order.\n\nIt is guaranteed that the sum of $n$ over all test cases does not exceed $200000$.", "outputFormat": "Output a single decimal indicating the answer. Your answer will be considered correct if the absolute or relative error is no more than $10^{-6}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2020] Circle", "background": "", "description": "庞教授研究最小覆盖圆问题。他不喜欢随机算法，所以决定寻找一个高效的确定性算法。他从经典的二分查找思想开始。在每次二分查找的迭代中，需要解决以下问题：\n\n给定一个圆的半径 $r$ 和一个凸包 $C$，定义 $S$ 为 \n\n$$S=\\{p\\ |\\  \\text{以 $p$ 为圆心，半径为 $r$ 的圆覆盖 $C$ 的所有点}\\}.$$ \n\n求 $S$ 的面积。", "inputFormat": "第一行包含一个正整数 $T$，表示测试用例的数量。\n\n对于每个测试用例，第一行包含两个整数 $n$ 和 $r$ ($1\\le n\\le 1000$, $1\\le r\\le 30000$)，用一个空格分隔，表示凸包的顶点数和半径。如果 $n=1$，则凸包仅包含 1 个点。如果 $n=2$，则凸包为一条线段。\n\n接下来的 $n$ 行中的每一行包含两个整数 $x, y$ ($-10000\\le x, y\\le 10000$)，用一个空格分隔，表示一个顶点的坐标 $(x, y)$。保证没有两个顶点重合，且没有三个顶点共线。顶点按逆时针顺序列出。\n\n保证所有测试用例中 $n$ 的总和不超过 $200000$。", "outputFormat": "输出一个小数表示答案。如果绝对误差或相对误差不超过 $10^{-6}$，则你的答案将被视为正确。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10826", "type": "P", "difficulty": 5, "samples": [["2\nAC KC QC JC TC\nAC TD 8S 5H 2C", "allin\ncheck"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2020", "ICPC", "EC Final"], "title": "[EC Final 2020] Allin", "background": null, "description": "$\\textbf{Texas hold 'em}$ (also known as $\\textbf{Texas holdem}$, $\\textbf{hold 'em}$, and $\\textbf{holdem}$) is one of the most popular variants of the card game of poker. $\\textbf{Please read the following rules as they may be different from the regular rules.}$ $\\textbf{Two}$ cards, known as $\\textbf{hole cards}$, are dealt $\\textbf{face-down}$ to each player. Each player only knows his own hole cards. And then $\\textbf{five community cards}$ are dealt in three stages $\\textbf{face-up}$. The stages consist of a series of three cards (``the flop``), later an additional single card (``the turn`` or ``fourth street``), and a final card (``the river`` or ``fifth street``). All players know the face-up cards that are already dealt. All cards are drawn from a standard 52-card deck. A standard 52-card deck comprises $13$ ranks in each of the four French suits: clubs ($\\clubsuit$), diamonds ($\\diamondsuit$), hearts ($\\heartsuit$) and spades ($\\spadesuit$). Each suit includes an Ace (A), a King (K), Queen (Q) and Jack (J), each depicted alongside a symbol of its suit; and numerals or pip cards from the Deuce (Two) to the Ten, with each card depicting that many symbols (pips) of its suit. $\\textbf{No card can be drawn more than once.} $\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/otansabp.png)\n\nIndividual cards are ranked as follows (high-to-low): A, K, Q, J, 10, 9, 8, 7, 6, 5, 4, 3, 2. $\\textbf{Each player seeks the best five-card poker hand from any combination of the seven cards}$ -- $\\textbf{the five community cards and his two hole cards}.$\n\nThe following table shows the possible five-card poker hand types in $\\textbf{increasing order}$ of their values. Each type has a specific ordering of the five cards that is described below. $\\textbf{The following part is describing how to compare two hands}$, $\\textbf{which is the same as the regular rule.}$\n\n- $\\textbf{Highcard}$: Simple value of the card. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1>a_2>a_3>a_4>a_5$. ($a_i$ represents the rank of $i$-th card.)\n![](https://cdn.luogu.com.cn/upload/image_hosting/4f6fchzz.png)\n- $\\textbf{Pair}$: Two cards with the same value. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1=a_2$, $a_3>a_4>a_5$, $a_1 \\ne a_3$, $a_1 \\ne a_4$, $a_1 \\ne a_5$.\n![](https://cdn.luogu.com.cn/upload/image_hosting/fakv9qbh.png)\n- $\\textbf{Two pairs}$: Two times two cards with the same value. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1=a_2$, $a_3=a_4$, $a_1 > a_3$, $a_1 \\ne a_5$, $a_3 \\ne a_5$.\n![](https://cdn.luogu.com.cn/upload/image_hosting/89uwdv5l.png)\n- $\\textbf{Three of a kind}$: Three cards with the same value. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1=a_2=a_3$,$a_4 > a_5$, $a_1 \\ne a_4$, $a_1 \\ne a_5$.\n![](https://cdn.luogu.com.cn/upload/image_hosting/lbzmp0in.png)\n- $\\textbf{Straight}$: Sequence of 5 cards in increasing value. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_i$ is exactly one rank above $a_{i+1}$ for all $1\\le i\\le 4$. $\\textbf{Specially, if}$ $a_5$ $\\textbf{is Ace,}$ $a_4$ $\\textbf{can be 2. In this case, Ace is considered one rank below 2.}$\n![](https://cdn.luogu.com.cn/upload/image_hosting/7mu6yjj3.png)\n- $\\textbf{Flush}$: 5 cards of the same suit. The cards are ordered as $a_1a_2a_3a_4a_5$ such that all the five cards have the same suit and $a_1>a_2>a_3>a_4>a_5$.\n![](https://cdn.luogu.com.cn/upload/image_hosting/rlnqq9fx.png)\n- $\\textbf{Full house}$: Combination of three of a kind and a pair. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1=a_2=a_3$, $a_4=a_5$.\n![](https://cdn.luogu.com.cn/upload/image_hosting/99za5m4u.png)\n- $\\textbf{Four of a kind}$: Four cards of the same value. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1=a_2=a_3=a_4$.\n![](https://cdn.luogu.com.cn/upload/image_hosting/d15acddn.png)\n- $\\textbf{Straight flush}$: Straight of the same suit. The cards are ordered as $a_1a_2a_3a_4a_5$ such that all the five cards have the same suit and that $a_i$ is exactly one rank above $a_{i+1}$ for all $1\\le i\\le 4$. $\\textbf{Specially, if}$ $a_5$ $\\textbf{is Ace,}$ $a_4$ $\\textbf{can be 2. In this case, Ace is considered one rank below 2.}$\n![](https://cdn.luogu.com.cn/upload/image_hosting/f7zis4qc.png)\n- $\\textbf{Royal flush}$: Straight flush from Ten to Ace. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1, a_2, a_3, a_4, a_5$ are Ace, King, Queen, Jack, Ten of the same suit.\n![](https://cdn.luogu.com.cn/upload/image_hosting/mgyidu8m.png)\n\nTo compare two hands, first, we will compare the type of two hands. For example, one hand is $\\textbf{Four of a kind}$, the other hand is $\\textbf{Full house}$, $\\textbf{Four of a kind}$ always win $\\textbf{Full house}$.\n\nIf the types of two hands are the same, we compare the ranks of the cards. We will order the card as described above, and compare them one by one. Firstly, we will compare the first card. If a hand's first card has a higher rank, it wins. If the first cards of the two hands have the same rank, we will compare the second card, and so on. If the cards have the same rank in every position, no one wins. The suit of cards never matters. For example, $\\clubsuit$ 5, $\\diamondsuit$ 5, $\\heartsuit$ 5, $\\spadesuit$ 2, $\\clubsuit$ 2 can win $\\diamondsuit$ 3, $\\spadesuit$ 3, $\\heartsuit$ 3, $\\diamondsuit$ A, $\\heartsuit$ A. Since they are both $\\textbf{Full house}$, and we will compare the ranks of the three cards of a kind at first.\n\nConsider the case that the hole cards of Alice are $\\clubsuit$ A, $\\diamondsuit$ 4 and the hole cards of Bob are $\\heartsuit$ 2, $\\spadesuit$ 3. The community cards are $\\spadesuit$ A, $\\heartsuit$ 4, $\\spadesuit$ 5, $\\clubsuit$ Q, $\\heartsuit$ Q. The best hand of Alice (five cards among her hole cards and the community hards) is $\\clubsuit$ A, $\\spadesuit$ A, $\\clubsuit$ Q, $\\heartsuit$ Q, $\\spadesuit$ 5, which is $\\textbf{Two pairs}$. The best hand of Bob is $\\spadesuit$ 5, $\\heartsuit$ 4, $\\spadesuit$ 3, $\\heartsuit$ 2, $\\spadesuit$ A, which is $\\textbf{Straight}$. Thus, Bob wins.\n\nPlayers have betting options to check, call, raise, or fold. $\\textbf{In this problem, we do not care about the meanings of these bets.}$ Rounds of betting take place before the flop is dealt and after each subsequent deal. The player who has the best hand and has not folded by the end of all betting rounds wins all of the money bet for the hand, known as the pot. In certain situations, a ``split-pot`` or ``tie`` can occur when two players have hands of equivalent value. This is also called a ``chop-pot``. $\\textbf{In this problem, we assume the two players never fold.}$ So the player with the best five-card poker hand from any combination of the seven cards wins. If the two players have hands of equal values, no one wins.\n\nTo simplify the statement, we do not introduce the detailed rules here.\n\nDaddy Dream is a world-famous $\\textbf{Texas hold 'em}$ player. As a strong challenger, Wolf Chicken wants to beat Daddy Dream. Wolf Chicken plays first after ``the flop`` (three cards are dealt face-up). Both players know the three face-up cards and each player knows his own two hole cards. Wolf Chicken will choose to allin if and only if he will certainly win whatever the ``the turn``, ``the river`` (the remaining two community cards that have not been revealed) and Daddy Dream's hole cards are. Otherwise, Wolf Chicken will choose to check.\n\nGiven Wolf Chicken's two hole cards and the three flop cards, help him to determine whether he can allin.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T \\le 100000$) denoting the number of test cases.\n\nFor each test case, there is one line containing five strings $h_1, h_2, c_1, c_2, c_3$ separated by single spaces denoting the first hole card, the second hole card, the first community card, the second community card and the third community card.\n\nFor each card, the first character of its corresponding string denotes its rank. (Possible ranks are `2` ,`3`,`4`,`5`,`6`,`7`,`8`,`9`,`T`,`J`,`Q`,`K`,`A`. `T` denotes $10$.) The second character denotes its suit. `C` denotes clubs. `D` denotes diamonds. `H` denotes hearts. `S` denotes spades.\n\nIt is guaranteed that each card appears at most once in one test case.", "outputFormat": "For each test case, print one line. Print $\\texttt{allin}$ if Wolf Chicken will certainly win. Otherwise, print $\\texttt{check}$.", "hint": null, "locale": "en", "translations": {"en": {"title": "[EC Final 2020] Allin", "background": null, "description": "$\\textbf{Texas hold 'em}$ (also known as $\\textbf{Texas holdem}$, $\\textbf{hold 'em}$, and $\\textbf{holdem}$) is one of the most popular variants of the card game of poker. $\\textbf{Please read the following rules as they may be different from the regular rules.}$ $\\textbf{Two}$ cards, known as $\\textbf{hole cards}$, are dealt $\\textbf{face-down}$ to each player. Each player only knows his own hole cards. And then $\\textbf{five community cards}$ are dealt in three stages $\\textbf{face-up}$. The stages consist of a series of three cards (``the flop``), later an additional single card (``the turn`` or ``fourth street``), and a final card (``the river`` or ``fifth street``). All players know the face-up cards that are already dealt. All cards are drawn from a standard 52-card deck. A standard 52-card deck comprises $13$ ranks in each of the four French suits: clubs ($\\clubsuit$), diamonds ($\\diamondsuit$), hearts ($\\heartsuit$) and spades ($\\spadesuit$). Each suit includes an Ace (A), a King (K), Queen (Q) and Jack (J), each depicted alongside a symbol of its suit; and numerals or pip cards from the Deuce (Two) to the Ten, with each card depicting that many symbols (pips) of its suit. $\\textbf{No card can be drawn more than once.} $\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/otansabp.png)\n\nIndividual cards are ranked as follows (high-to-low): A, K, Q, J, 10, 9, 8, 7, 6, 5, 4, 3, 2. $\\textbf{Each player seeks the best five-card poker hand from any combination of the seven cards}$ -- $\\textbf{the five community cards and his two hole cards}.$\n\nThe following table shows the possible five-card poker hand types in $\\textbf{increasing order}$ of their values. Each type has a specific ordering of the five cards that is described below. $\\textbf{The following part is describing how to compare two hands}$, $\\textbf{which is the same as the regular rule.}$\n\n- $\\textbf{Highcard}$: Simple value of the card. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1>a_2>a_3>a_4>a_5$. ($a_i$ represents the rank of $i$-th card.)\n![](https://cdn.luogu.com.cn/upload/image_hosting/4f6fchzz.png)\n- $\\textbf{Pair}$: Two cards with the same value. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1=a_2$, $a_3>a_4>a_5$, $a_1 \\ne a_3$, $a_1 \\ne a_4$, $a_1 \\ne a_5$.\n![](https://cdn.luogu.com.cn/upload/image_hosting/fakv9qbh.png)\n- $\\textbf{Two pairs}$: Two times two cards with the same value. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1=a_2$, $a_3=a_4$, $a_1 > a_3$, $a_1 \\ne a_5$, $a_3 \\ne a_5$.\n![](https://cdn.luogu.com.cn/upload/image_hosting/89uwdv5l.png)\n- $\\textbf{Three of a kind}$: Three cards with the same value. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1=a_2=a_3$,$a_4 > a_5$, $a_1 \\ne a_4$, $a_1 \\ne a_5$.\n![](https://cdn.luogu.com.cn/upload/image_hosting/lbzmp0in.png)\n- $\\textbf{Straight}$: Sequence of 5 cards in increasing value. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_i$ is exactly one rank above $a_{i+1}$ for all $1\\le i\\le 4$. $\\textbf{Specially, if}$ $a_5$ $\\textbf{is Ace,}$ $a_4$ $\\textbf{can be 2. In this case, Ace is considered one rank below 2.}$\n![](https://cdn.luogu.com.cn/upload/image_hosting/7mu6yjj3.png)\n- $\\textbf{Flush}$: 5 cards of the same suit. The cards are ordered as $a_1a_2a_3a_4a_5$ such that all the five cards have the same suit and $a_1>a_2>a_3>a_4>a_5$.\n![](https://cdn.luogu.com.cn/upload/image_hosting/rlnqq9fx.png)\n- $\\textbf{Full house}$: Combination of three of a kind and a pair. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1=a_2=a_3$, $a_4=a_5$.\n![](https://cdn.luogu.com.cn/upload/image_hosting/99za5m4u.png)\n- $\\textbf{Four of a kind}$: Four cards of the same value. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1=a_2=a_3=a_4$.\n![](https://cdn.luogu.com.cn/upload/image_hosting/d15acddn.png)\n- $\\textbf{Straight flush}$: Straight of the same suit. The cards are ordered as $a_1a_2a_3a_4a_5$ such that all the five cards have the same suit and that $a_i$ is exactly one rank above $a_{i+1}$ for all $1\\le i\\le 4$. $\\textbf{Specially, if}$ $a_5$ $\\textbf{is Ace,}$ $a_4$ $\\textbf{can be 2. In this case, Ace is considered one rank below 2.}$\n![](https://cdn.luogu.com.cn/upload/image_hosting/f7zis4qc.png)\n- $\\textbf{Royal flush}$: Straight flush from Ten to Ace. The cards are ordered as $a_1a_2a_3a_4a_5$ such that $a_1, a_2, a_3, a_4, a_5$ are Ace, King, Queen, Jack, Ten of the same suit.\n![](https://cdn.luogu.com.cn/upload/image_hosting/mgyidu8m.png)\n\nTo compare two hands, first, we will compare the type of two hands. For example, one hand is $\\textbf{Four of a kind}$, the other hand is $\\textbf{Full house}$, $\\textbf{Four of a kind}$ always win $\\textbf{Full house}$.\n\nIf the types of two hands are the same, we compare the ranks of the cards. We will order the card as described above, and compare them one by one. Firstly, we will compare the first card. If a hand's first card has a higher rank, it wins. If the first cards of the two hands have the same rank, we will compare the second card, and so on. If the cards have the same rank in every position, no one wins. The suit of cards never matters. For example, $\\clubsuit$ 5, $\\diamondsuit$ 5, $\\heartsuit$ 5, $\\spadesuit$ 2, $\\clubsuit$ 2 can win $\\diamondsuit$ 3, $\\spadesuit$ 3, $\\heartsuit$ 3, $\\diamondsuit$ A, $\\heartsuit$ A. Since they are both $\\textbf{Full house}$, and we will compare the ranks of the three cards of a kind at first.\n\nConsider the case that the hole cards of Alice are $\\clubsuit$ A, $\\diamondsuit$ 4 and the hole cards of Bob are $\\heartsuit$ 2, $\\spadesuit$ 3. The community cards are $\\spadesuit$ A, $\\heartsuit$ 4, $\\spadesuit$ 5, $\\clubsuit$ Q, $\\heartsuit$ Q. The best hand of Alice (five cards among her hole cards and the community hards) is $\\clubsuit$ A, $\\spadesuit$ A, $\\clubsuit$ Q, $\\heartsuit$ Q, $\\spadesuit$ 5, which is $\\textbf{Two pairs}$. The best hand of Bob is $\\spadesuit$ 5, $\\heartsuit$ 4, $\\spadesuit$ 3, $\\heartsuit$ 2, $\\spadesuit$ A, which is $\\textbf{Straight}$. Thus, Bob wins.\n\nPlayers have betting options to check, call, raise, or fold. $\\textbf{In this problem, we do not care about the meanings of these bets.}$ Rounds of betting take place before the flop is dealt and after each subsequent deal. The player who has the best hand and has not folded by the end of all betting rounds wins all of the money bet for the hand, known as the pot. In certain situations, a ``split-pot`` or ``tie`` can occur when two players have hands of equivalent value. This is also called a ``chop-pot``. $\\textbf{In this problem, we assume the two players never fold.}$ So the player with the best five-card poker hand from any combination of the seven cards wins. If the two players have hands of equal values, no one wins.\n\nTo simplify the statement, we do not introduce the detailed rules here.\n\nDaddy Dream is a world-famous $\\textbf{Texas hold 'em}$ player. As a strong challenger, Wolf Chicken wants to beat Daddy Dream. Wolf Chicken plays first after ``the flop`` (three cards are dealt face-up). Both players know the three face-up cards and each player knows his own two hole cards. Wolf Chicken will choose to allin if and only if he will certainly win whatever the ``the turn``, ``the river`` (the remaining two community cards that have not been revealed) and Daddy Dream's hole cards are. Otherwise, Wolf Chicken will choose to check.\n\nGiven Wolf Chicken's two hole cards and the three flop cards, help him to determine whether he can allin.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T \\le 100000$) denoting the number of test cases.\n\nFor each test case, there is one line containing five strings $h_1, h_2, c_1, c_2, c_3$ separated by single spaces denoting the first hole card, the second hole card, the first community card, the second community card and the third community card.\n\nFor each card, the first character of its corresponding string denotes its rank. (Possible ranks are `2` ,`3`,`4`,`5`,`6`,`7`,`8`,`9`,`T`,`J`,`Q`,`K`,`A`. `T` denotes $10$.) The second character denotes its suit. `C` denotes clubs. `D` denotes diamonds. `H` denotes hearts. `S` denotes spades.\n\nIt is guaranteed that each card appears at most once in one test case.", "outputFormat": "For each test case, print one line. Print $\\texttt{allin}$ if Wolf Chicken will certainly win. Otherwise, print $\\texttt{check}$.", "hint": null, "locale": "en"}, "zh-CN": {"title": "[EC Final 2020] Allin", "background": null, "description": "$\\textbf{德州扑克}$（也称为 $\\textbf{Texas holdem}$、$\\textbf{hold 'em}$ 和 $\\textbf{holdem}$）是扑克游戏中最流行的变体之一。$\\textbf{请阅读以下规则，因为它们可能与常规规则不同。}$ $\\textbf{两}$张牌，称为$\\textbf{底牌}$，面朝下发给每位玩家。每位玩家只知道自己的底牌。然后$\\textbf{五张公共牌}$分三个阶段面朝上发出。阶段包括三张牌（“翻牌”），然后是一张额外的牌（“转牌”或“第四街”），最后一张牌（“河牌”或“第五街”）。所有玩家都知道已经发出的面朝上的牌。所有牌都从标准的 52 张牌的牌堆中抽取。标准的 52 张牌的牌堆包含四种法式花色中的每一种的 $13$ 个等级：梅花 ($\\clubsuit$)、方块 ($\\diamondsuit$)、红桃 ($\\heartsuit$) 和黑桃 ($\\spadesuit$)。每种花色包括一张 A（A）、一张 K（K）、Q（Q）和 J（J），每张牌旁边都有其花色的符号；以及从 2（Two）到 10 的数字牌或点数牌，每张牌显示该花色的多个符号（点数）。$\\textbf{任何牌不能被抽取多于一次。}$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/otansabp.png)\n\n单张牌的排名如下（从高到低）：A, K, Q, J, 10, 9, 8, 7, 6, 5, 4, 3, 2。$\\textbf{每位玩家从七张牌中选择最佳的五张牌组合}$ -- $\\textbf{五张公共牌和他的两张底牌}。$\n\n下表显示了可能的五张牌组合类型，按其值的$\\textbf{递增顺序}$排列。每种类型都有特定的五张牌排序，描述如下。$\\textbf{以下部分描述了如何比较两手牌}$，$\\textbf{这与常规规则相同。}$\n\n- $\\textbf{高牌}$：单张牌的简单值。牌的顺序为 $a_1a_2a_3a_4a_5$，使得 $a_1>a_2>a_3>a_4>a_5$。($a_i$ 表示第 $i$ 张牌的等级。)\n![](https://cdn.luogu.com.cn/upload/image_hosting/4f6fchzz.png)\n- $\\textbf{一对}$：两张牌具有相同的值。牌的顺序为 $a_1a_2a_3a_4a_5$，使得 $a_1=a_2$，$a_3>a_4>a_5$，$a_1 \ne a_3$，$a_1 \ne a_4$，$a_1 \ne a_5$。\n![](https://cdn.luogu.com.cn/upload/image_hosting/fakv9qbh.png)\n- $\\textbf{两对}$：两次两张牌具有相同的值。牌的顺序为 $a_1a_2a_3a_4a_5$，使得 $a_1=a_2$，$a_3=a_4$，$a_1 > a_3$，$a_1 \ne a_5$，$a_3 \ne a_5$。\n![](https://cdn.luogu.com.cn/upload/image_hosting/89uwdv5l.png)\n- $\\textbf{三条}$：三张牌具有相同的值。牌的顺序为 $a_1a_2a_3a_4a_5$，使得 $a_1=a_2=a_3$，$a_4 > a_5$，$a_1 \ne a_4$，$a_1 \ne a_5$。\n![](https://cdn.luogu.com.cn/upload/image_hosting/lbzmp0in.png)\n- $\\textbf{顺子}$：五张牌按递增值排列。牌的顺序为 $a_1a_2a_3a_4a_5$，使得对所有 $1\\le i\\le 4$，$a_i$ 恰好比 $a_{i+1}$ 高一等级。$\\textbf{特别地，如果}$ $a_5$ $\\textbf{是 A,}$ $a_4$ $\\textbf{可以是 2。在这种情况下，A 被视为比 2 低一等级。}$\n![](https://cdn.luogu.com.cn/upload/image_hosting/7mu6yjj3.png)\n- $\\textbf{同花}$：五张牌具有相同的花色。牌的顺序为 $a_1a_2a_3a_4a_5$，使得所有五张牌具有相同的花色且 $a_1>a_2>a_3>a_4>a_5$。\n![](https://cdn.luogu.com.cn/upload/image_hosting/rlnqq9fx.png)\n- $\\textbf{葫芦}$：三条和一对的组合。牌的顺序为 $a_1a_2a_3a_4a_5$，使得 $a_1=a_2=a_3$，$a_4=a_5$。\n![](https://cdn.luogu.com.cn/upload/image_hosting/99za5m4u.png)\n- $\\textbf{四条}$：四张牌具有相同的值。牌的顺序为 $a_1a_2a_3a_4a_5$，使得 $a_1=a_2=a_3=a_4$。\n![](https://cdn.luogu.com.cn/upload/image_hosting/d15acddn.png)\n- $\\textbf{同花顺}$：同花的顺子。牌的顺序为 $a_1a_2a_3a_4a_5$，使得所有五张牌具有相同的花色且对所有 $1\\le i\\le 4$，$a_i$ 恰好比 $a_{i+1}$ 高一等级。$\\textbf{特别地，如果}$ $a_5$ $\\textbf{是 A,}$ $a_4$ $\\textbf{可以是 2。在这种情况下，A 被视为比 2 低一等级。}$\n![](https://cdn.luogu.com.cn/upload/image_hosting/f7zis4qc.png)\n- $\\textbf{皇家同花顺}$：从 10 到 A 的同花顺。牌的顺序为 $a_1a_2a_3a_4a_5$，使得 $a_1, a_2, a_3, a_4, a_5$ 是同一花色的 A, K, Q, J, 10。\n![](https://cdn.luogu.com.cn/upload/image_hosting/mgyidu8m.png)\n\n要比较两手牌，首先比较两手牌的类型。例如，一手牌是 $\\textbf{四条}$，另一手牌是 $\\textbf{葫芦}$，$\\textbf{四条}$ 总是赢 $\\textbf{葫芦}$。\n\n如果两手牌的类型相同，我们比较牌的等级。我们将按上述描述排序牌，并逐一比较。首先比较第一张牌。如果一手牌的第一张牌等级更高，则它获胜。如果两手牌的第一张牌等级相同，则比较第二张牌，依此类推。如果每个位置的牌等级相同，则没有人获胜。牌的花色永远不重要。例如，$\\clubsuit$ 5, $\\diamondsuit$ 5, $\\heartsuit$ 5, $\\spadesuit$ 2, $\\clubsuit$ 2 可以赢 $\\diamondsuit$ 3, $\\spadesuit$ 3, $\\heartsuit$ 3, $\\diamondsuit$ A, $\\heartsuit$ A。因为它们都是 $\\textbf{葫芦}$，我们将首先比较三张相同牌的等级。\n\n考虑 Alice 的底牌是 $\\clubsuit$ A, $\\diamondsuit$ 4 和 Bob 的底牌是 $\\heartsuit$ 2, $\\spadesuit$ 3。公共牌是 $\\spadesuit$ A, $\\heartsuit$ 4, $\\spadesuit$ 5, $\\clubsuit$ Q, $\\heartsuit$ Q。Alice 的最佳手牌（她的底牌和公共牌中的五张牌）是 $\\clubsuit$ A, $\\spadesuit$ A, $\\clubsuit$ Q, $\\heartsuit$ Q, $\\spadesuit$ 5，即 $\\textbf{两对}$。Bob 的最佳手牌是 $\\spadesuit$ 5, $\\heartsuit$ 4, $\\spadesuit$ 3, $\\heartsuit$ 2, $\\spadesuit$ A，即 $\\textbf{顺子}$。因此，Bob 获胜。\n\n玩家有下注选项可以选择过牌、跟注、加注或弃牌。$\\textbf{在这个问题中，我们不关心这些下注的含义。}$ 在翻牌发出之前和每次后续发牌后进行下注回合。到所有下注回合结束时，拥有最佳手牌且未弃牌的玩家赢得所有下注的钱，称为底池。在某些情况下，当两名玩家的手牌等值时，可能会出现“分池”或“平局”。这也称为“平分底池”。$\\textbf{在这个问题中，我们假设两名玩家从不弃牌。}$ 因此，从七张牌中任意组合出最佳五张牌的玩家获胜。如果两名玩家的手牌等值，则没有人获胜。\n\n为了简化陈述，我们在此不介绍详细规则。\n\nDaddy Dream 是世界著名的 $\\textbf{德州扑克}$ 玩家。作为一个强大的挑战者，Wolf Chicken 想要击败 Daddy Dream。在“翻牌”（三张牌面朝上发出）后，Wolf Chicken 先行动。两名玩家都知道三张面朝上的牌，每位玩家都知道自己的两张底牌。Wolf Chicken 将选择全押当且仅当无论“转牌”、“河牌”（尚未揭示的两张公共牌）和 Daddy Dream 的底牌是什么，他都能肯定获胜。否则，Wolf Chicken 将选择过牌。\n\n给定 Wolf Chicken 的两张底牌和三张翻牌，帮助他确定是否可以全押。", "inputFormat": "第一行包含一个整数 $T$ ($1\\le T \\le 100000$)，表示测试用例的数量。\n\n对于每个测试用例，有一行包含五个字符串 $h_1, h_2, c_1, c_2, c_3$，用单个空格分隔，表示第一张底牌、第二张底牌、第一张公共牌、第二张公共牌和第三张公共牌。\n\n对于每张牌，其对应字符串的第一个字符表示其等级。（可能的等级有 `2` 、`3`、`4`、`5`、`6`、`7`、`8`、`9`、`T`、`J`、`Q`、`K`、`A`。`T` 表示 $10$。）第二个字符表示其花色。`C` 表示梅花。`D` 表示方块。`H` 表示红桃。`S` 表示黑桃。\n\n保证在一个测试用例中，每张牌最多出现一次。", "outputFormat": "对于每个测试用例，输出一行。如果 Wolf Chicken 将肯定获胜，输出 $\\texttt{allin}$。否则，输出 $\\texttt{check}$。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10827", "type": "P", "difficulty": 4, "samples": [["3\n2 3 6", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "素数判断,质数,筛法", "ICPC", "EC Final"], "title": "[EC Final 2020] Square", "background": "", "description": "Father Study loves math very much.\n\nGiven a sequence of integers $a_1,a_2,...,a_n$, Father Study wants to calculate another sequence of integers $t_1,t_2,...,t_n$ satisifing \n- For each $i~(1 \\le i \\le n)$, $t_i > 0$.\n- For each $i~(1\\le i < n)$, $a_i \\times t_i \\times a_{i+1} \\times t_{i+1}$ is a square number. (In mathematics, a square number or perfect square is an integer that is the square of an integer, in other words, it is the product of some integer with itself.)\n- $\\prod_{i=1}^{n}{t_i}$ is minimized.\n\n\nPlease help Father Study to calculate the answer --- the minimum value of $\\prod_{i=1}^{n}{t_i}$. Because the answer is too large, please output the answer modulo $1000000007$.\n", "inputFormat": "The first line contains a single integer $n$ ($1\\le n \\le 100000$).\n\nThe second line contains $n$ integers $a_1, a_2, ..., a_n$ ($1 \\le a_i \\le 1000000$) separated by single spaces.", "outputFormat": "Output one integer -- the answer modulo $1000000007$. ", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2020] Square", "background": "", "description": "Father Study loves math very much.\n\nGiven a sequence of integers $a_1,a_2,...,a_n$, Father Study wants to calculate another sequence of integers $t_1,t_2,...,t_n$ satisifing \n- For each $i~(1 \\le i \\le n)$, $t_i > 0$.\n- For each $i~(1\\le i < n)$, $a_i \\times t_i \\times a_{i+1} \\times t_{i+1}$ is a square number. (In mathematics, a square number or perfect square is an integer that is the square of an integer, in other words, it is the product of some integer with itself.)\n- $\\prod_{i=1}^{n}{t_i}$ is minimized.\n\n\nPlease help Father Study to calculate the answer --- the minimum value of $\\prod_{i=1}^{n}{t_i}$. Because the answer is too large, please output the answer modulo $1000000007$.\n", "inputFormat": "The first line contains a single integer $n$ ($1\\le n \\le 100000$).\n\nThe second line contains $n$ integers $a_1, a_2, ..., a_n$ ($1 \\le a_i \\le 1000000$) separated by single spaces.", "outputFormat": "Output one integer -- the answer modulo $1000000007$. ", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2020] Square", "background": "", "description": "Father Study 非常喜欢数学。\n\n给定一个整数序列 $a_1,a_2,...,a_n$，Father Study 想要计算另一个整数序列 $t_1,t_2,...,t_n$，满足以下条件：\n- 对于每个 $i~(1 \\le i \\le n)$，有 $t_i > 0$。\n- 对于每个 $i~(1\\le i < n)$，$a_i \\times t_i \\times a_{i+1} \\times t_{i+1}$ 是一个完全平方数。（在数学中，完全平方数是一个整数，它是某个整数的平方，换句话说，它是某个整数与其自身的乘积。）\n- $\\prod_{i=1}^{n}{t_i}$ 的值最小。\n\n\n请帮助 Father Study 计算答案，即 $\\prod_{i=1}^{n}{t_i}$ 的最小值。由于答案可能过大，请输出答案对 $1000000007$ 取模的结果。\n", "inputFormat": "第一行包含一个整数 $n$ ($1\\le n \\le 100000$)。\n\n第二行包含 $n$ 个整数 $a_1, a_2, ..., a_n$ ($1 \\le a_i \\le 1000000$)，它们由单个空格分隔。", "outputFormat": "输出一个整数，即答案对 $1000000007$ 取模的结果。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10828", "type": "P", "difficulty": 7, "samples": [["2\n3 3\n1 3 5\n1 1\n2 2\n3 3\n4 4\n5 5 6\n2 2\n2 3\n3 3", "ABB\nCBC\nCCC\nBABB\nBABC\nCACC\nAACC"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2020] Fillomino", "background": "", "description": "Prof. Pang is the king of Pangland. Pangland is a board with size $n\\times m$. The cell at the $i$-th row and the $j$-th column is denoted as cell $(i, j)$ for all $1\\le i\\le n, 1\\le j\\le m$. If two cells share an edge, they are connected. The board is $\\textbf{toroidal}$, that is, cell $(1,y)$ is also connected to $(n,y)$ and $(x,1)$ is also connected to $(x,m)$ for all $1\\le x\\le n, 1\\le y\\le m$.\n\nProf. Pang has three sons. We call them the first son, the second son and the third son. Each of them lives in a cell in Pangland. The $i$-th son lives in cell $(x_i, y_i)$. No two sons live in the same cell. Prof. Pang wants to distribute the cells in Pangland to his sons such that\n\n- Each cell belongs to exactly one son.\n- There are $cnt_i$ cells that belong to the $i$-th son for all $1\\le i\\le 3$.\n- The cells that belong to the $i$-th son are connected for all $1\\le i\\le 3$.\n- The cell that the $i$-th son lives in must belong to the $i$-th son himself for all $1\\le i\\le 3$.\n\nPlease help Prof. Pang to find a solution if possible.", "inputFormat": "The first line contains a single integer $T$ ($1\\leq T\\leq 10^5$) denoting the number of test cases.\n\nFor each test case, the first line contains two integers $n, m$ ($3\\leq n,m \\leq 500$) separated by a single space.\n\nThe next line contains three positive integers $cnt_1,cnt_2,cnt_3$ ($cnt_1+cnt_2+cnt_3 = n m$) separated by single spaces.\n\nThe $i$-th line of the next $3$ lines contains two integers $x_i, y_i$ ($1\\le x_i\\le n, 1\\le y_i\\le m$) separated by a single space.\n\nIt is guaranteed that $(x_1,y_1)$, $(x_2, y_2)$, $(x_3, y_3)$ are distinct.\n\nIt is guaranteed that the sum of $nm$ over all test cases is no more than $10^6$.", "outputFormat": "For each test case, if there is no solution, output $\\texttt{-1}$ in one line. Otherwise, output $n$ lines. Each line should contain $m$ characters. The $j$-th character in the $i$-th line should be $\\texttt{A}$ if cell $(i, j)$ belongs to the first son, $\\texttt{B}$ if cell $(i, j)$ belongs to the second son and $\\texttt{C}$ if cell $(i, j)$ belongs to the third son. Cell $(x_i, y_i)$ must belong to the $i$-th son for all $1\\le i\\le 3$. The cells that belong to the $i$-th son must be connected for all $1\\le i\\le 3$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2020] Fillomino", "background": "", "description": "Prof. Pang is the king of Pangland. Pangland is a board with size $n\\times m$. The cell at the $i$-th row and the $j$-th column is denoted as cell $(i, j)$ for all $1\\le i\\le n, 1\\le j\\le m$. If two cells share an edge, they are connected. The board is $\\textbf{toroidal}$, that is, cell $(1,y)$ is also connected to $(n,y)$ and $(x,1)$ is also connected to $(x,m)$ for all $1\\le x\\le n, 1\\le y\\le m$.\n\nProf. Pang has three sons. We call them the first son, the second son and the third son. Each of them lives in a cell in Pangland. The $i$-th son lives in cell $(x_i, y_i)$. No two sons live in the same cell. Prof. Pang wants to distribute the cells in Pangland to his sons such that\n\n- Each cell belongs to exactly one son.\n- There are $cnt_i$ cells that belong to the $i$-th son for all $1\\le i\\le 3$.\n- The cells that belong to the $i$-th son are connected for all $1\\le i\\le 3$.\n- The cell that the $i$-th son lives in must belong to the $i$-th son himself for all $1\\le i\\le 3$.\n\nPlease help Prof. Pang to find a solution if possible.", "inputFormat": "The first line contains a single integer $T$ ($1\\leq T\\leq 10^5$) denoting the number of test cases.\n\nFor each test case, the first line contains two integers $n, m$ ($3\\leq n,m \\leq 500$) separated by a single space.\n\nThe next line contains three positive integers $cnt_1,cnt_2,cnt_3$ ($cnt_1+cnt_2+cnt_3 = n m$) separated by single spaces.\n\nThe $i$-th line of the next $3$ lines contains two integers $x_i, y_i$ ($1\\le x_i\\le n, 1\\le y_i\\le m$) separated by a single space.\n\nIt is guaranteed that $(x_1,y_1)$, $(x_2, y_2)$, $(x_3, y_3)$ are distinct.\n\nIt is guaranteed that the sum of $nm$ over all test cases is no more than $10^6$.", "outputFormat": "For each test case, if there is no solution, output $\\texttt{-1}$ in one line. Otherwise, output $n$ lines. Each line should contain $m$ characters. The $j$-th character in the $i$-th line should be $\\texttt{A}$ if cell $(i, j)$ belongs to the first son, $\\texttt{B}$ if cell $(i, j)$ belongs to the second son and $\\texttt{C}$ if cell $(i, j)$ belongs to the third son. Cell $(x_i, y_i)$ must belong to the $i$-th son for all $1\\le i\\le 3$. The cells that belong to the $i$-th son must be connected for all $1\\le i\\le 3$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2020] Fillomino", "background": null, "description": "庞教授是庞国的国王。庞国是一个大小为 $n\\times m$ 的棋盘。第 $i$ 行第 $j$ 列的格子记作格子 $(i, j)$，其中 $1\\le i\\le n, 1\\le j\\le m$。如果两个格子共享一条边，则它们是连通的。这个棋盘是一个**环面**，也就是说，对于所有 $1\\le x\\le n, 1\\le y\\le m$，格子 $(1,y)$ 也与 $(n,y)$ 连通，格子 $(x,1)$ 也与 $(x,m)$ 连通。\n\n庞教授有三个儿子。我们称他们为大儿子、二儿子和三儿子。他们每个人都住在庞国的一个格子中。第 $i$ 个儿子住在格子 $(x_i, y_i)$。没有两个儿子住在同一个格子中。庞教授希望将庞国的格子分配给他的儿子们，使得：\n\n- 每个格子恰好属于一个儿子。\n- 对于所有 $1\\le i\\le 3$，有 $cnt_i$ 个格子属于第 $i$ 个儿子。\n- 对于所有 $1\\le i\\le 3$，属于第 $i$ 个儿子的格子是连通的。\n- 对于所有 $1\\le i\\le 3$，第 $i$ 个儿子所在的格子必须属于他自己。\n\n请帮助庞教授找到一个可能的解决方案。", "inputFormat": "第一行包含一个整数 $T$ ($1\\leq T\\leq 10^5$)，表示测试用例的数量。\n\n对于每个测试用例，第一行包含两个整数 $n, m$ ($3\\leq n,m \\leq 500$)，用一个空格分隔。\n\n下一行包含三个正整数 $cnt_1,cnt_2,cnt_3$ ($cnt_1+cnt_2+cnt_3 = n m$)，用空格分隔。\n\n接下来的 3 行中的第 $i$ 行包含两个整数 $x_i, y_i$ ($1\\le x_i\\le n, 1\\le y_i\\le m$)，用一个空格分隔。\n\n保证 $(x_1,y_1)$、$(x_2, y_2)$、$(x_3, y_3)$ 是不同的。\n\n保证所有测试用例中 $nm$ 的总和不超过 $10^6$。", "outputFormat": "对于每个测试用例，如果没有解决方案，输出一行 $\\texttt{-1}$。否则，输出 $n$ 行。每行应包含 $m$ 个字符。如果格子 $(i, j)$ 属于大儿子，则第 $i$ 行第 $j$ 个字符应为 $\\texttt{A}$；如果属于二儿子，则为 $\\texttt{B}$；如果属于三儿子，则为 $\\texttt{C}$。对于所有 $1\\le i\\le 3$，格子 $(x_i, y_i)$ 必须属于第 $i$ 个儿子。对于所有 $1\\le i\\le 3$，属于第 $i$ 个儿子的格子必须是连通的。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10829", "type": "P", "difficulty": 6, "samples": [["3 3\n1 2\n2 3\n3 1", "da"], ["9 12\n1 2\n2 3\n3 1\n3 4\n4 5\n3 5\n5 6\n6 7\n7 5\n7 8\n9 8\n7 9", "ne"], ["9 12\n1 2\n2 3\n3 1\n4 5\n5 6\n6 4\n7 8\n8 9\n9 7\n1 7\n7 4\n4 1", "da"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["点分治", "2023", "O2优化", "圆方树", "COTS（克罗地亚）"], "title": "[COTS 2023] 三元图 Graf", "background": "译自 [Izborne Pripreme 2023 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2023/) D1T1。$\\texttt{2s,0.5G}$。\n\n祝 NaCly_Fish 生日快乐！（2024.7.28）", "description": "\n对于非负整数 $k$，我们递归地给出 $k-{}$三元图的定义。\n\n- $k-{}$三元图是无向图。\n- 对于 $k=0$，$k-{}$三元图 是一个仅包含 $1$ 个节点和 $0$ 条边的图。\n- 对于 $k\\gt 0$，$k-{}$三元图由三个 $(k-1)-{}$三元图组合而成。具体地说，在这三个 $(k-1)-{}$三元图中各选择一个节点，然后在这三个节点之间两两连边，得到的就是 $k-{}$三元图。\n\n下图展示了一张 $3-{}$三元图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fyidau35.png)\n\n\n给定无向图 $G$，判断它是否是 $k-{}$三元图。\n\n", "inputFormat": "\n第一行，两个正整数，$N,M$，表示 $G$ 的点数和边数。\n\n接下来 $M$ 行，每行两个正整数 $u,v$，表示 $G$ 中的一条边 $(u,v)$。", "outputFormat": "\n如果 $G$ 是 $k-{}$三元图，输出 $\\texttt{da}$（克罗地亚语「是」）；否则输出 $\\texttt{ne}$（克罗地亚语「否」）。", "hint": "\n#### 样例解释\n\n样例 $3$ 解释：这是一张 $2-{}$三元图。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 200\\, 000$，$0\\le M\\le 300\\, 000$；\n- $1\\le u,v\\le N$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $15$  | $N \\leq 10$，$M\\le 20$   |\n| $2$  | $20$  | $N \\leq 1000$，$M\\le 2000$  |\n| $3$  | $15$  | 满足特殊性质 |\n| $4$  | $50$  | 无额外约束 |\n\n特殊性质：若 $G$ 是 $k-{}$三元图，保证每一步选择的 $3$ 个节点在之前已经被选中过。换句话说，总是选中「中间的节点」。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2023] 三元图 Graf", "background": "译自 [Izborne Pripreme 2023 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2023/) D1T1。$\\texttt{2s,0.5G}$。\n\n祝 NaCly_Fish 生日快乐！（2024.7.28）", "description": "\n对于非负整数 $k$，我们递归地给出 $k-{}$三元图的定义。\n\n- $k-{}$三元图是无向图。\n- 对于 $k=0$，$k-{}$三元图 是一个仅包含 $1$ 个节点和 $0$ 条边的图。\n- 对于 $k\\gt 0$，$k-{}$三元图由三个 $(k-1)-{}$三元图组合而成。具体地说，在这三个 $(k-1)-{}$三元图中各选择一个节点，然后在这三个节点之间两两连边，得到的就是 $k-{}$三元图。\n\n下图展示了一张 $3-{}$三元图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fyidau35.png)\n\n\n给定无向图 $G$，判断它是否是 $k-{}$三元图。\n\n", "inputFormat": "\n第一行，两个正整数，$N,M$，表示 $G$ 的点数和边数。\n\n接下来 $M$ 行，每行两个正整数 $u,v$，表示 $G$ 中的一条边 $(u,v)$。", "outputFormat": "\n如果 $G$ 是 $k-{}$三元图，输出 $\\texttt{da}$（克罗地亚语「是」）；否则输出 $\\texttt{ne}$（克罗地亚语「否」）。", "hint": "\n#### 样例解释\n\n样例 $3$ 解释：这是一张 $2-{}$三元图。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 200\\, 000$，$0\\le M\\le 300\\, 000$；\n- $1\\le u,v\\le N$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $15$  | $N \\leq 10$，$M\\le 20$   |\n| $2$  | $20$  | $N \\leq 1000$，$M\\le 2000$  |\n| $3$  | $15$  | 满足特殊性质 |\n| $4$  | $50$  | 无额外约束 |\n\n特殊性质：若 $G$ 是 $k-{}$三元图，保证每一步选择的 $3$ 个节点在之前已经被选中过。换句话说，总是选中「中间的节点」。\n", "locale": "zh-CN"}}}
{"pid": "P10830", "type": "P", "difficulty": 7, "samples": [["2\n3\n1 4 5\n4\n1 4 5 5", "-1\n1 5\n3 5\n4 4"], ["1\n6\n1 2 3 4 5 6", "1 5\n3 3\n4 6\n3 5\n2 4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "数论", "Special Judge", "O2优化", "构造", "COTS（克罗地亚）"], "title": "[COTS 2023] 平均数 Prosjek", "background": "\n\n译自 [Izborne Pripreme 2023 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2023/) D1T2。$\\texttt{3s,0.5G}$。\n\n祝 NaCly_Fish 生日快乐！（2024.7.28）\n\n感谢 @Rainbow_qwq 修复交互库。警示后人：慎用 `multiset.count`（复杂度可退化至线性）。\n", "description": "\n在黑板上有 $N$ 个非负整数。在一次操作中，可以选择黑板上的两个整数 $a,b$ 满足 $2\\mid (a+b)$，将 $a,b$ 从黑板上擦去，然后写下 $(a+b)/2$。注意到每次操作后，黑板上的数都是整数。\n\n试判断是否能让黑板上只剩下一个数。如果可以的话，还需要给出一组解。\n", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，代表数据组数。\n\n接下来依次描述 $T$ 组数据。\n\n对于每组数据，第一行，一个正整数 $N$，代表黑板上数的数量。\n\n第二行，$N$ 个非负整数，描述黑板上的数。\n", "outputFormat": "\n对于每组数据，输出若干行。\n\n如果不可行，输出一行一个 $\\texttt{-1}$；\n\n否则，输出 $(N-1)$ 行，每行两个整数，表示每次要擦除的数。你需要保证操作的数是存在的，且它们的和能被 $2$ 整除。\n", "hint": "\n#### 样例解释\n\n样例 $2$ 解释：$[\\boldsymbol{\\textcolor{red}{1}},2,3,4,\\boldsymbol{\\textcolor{red}{5}},6] \\to [\\boldsymbol{\\textcolor{red}{3}},2,\\boldsymbol{\\textcolor{red}{3}},4,6]\\to [3,2,\\boldsymbol{\\textcolor{red}{4}},\\boldsymbol{\\textcolor{red}{6}}]\\to [\\boldsymbol{\\textcolor{red}{5}},\\boldsymbol{\\textcolor{red}{3}},2]\\to [\\boldsymbol{\\textcolor{red}{4}},\\boldsymbol{\\textcolor{red}{2}}]\\to [3]$。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le T\\le 10^5$；\n- $1\\le N,\\sum N\\le 10^6$；\n- $0\\le a_i\\le 10^{18}$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $9$  | $T\\le 100$，$N\\le 7$   |\n| $2$  | $23$  | $T\\le 100$，$a_i\\le 10$  |\n| $3$  | $16$  | $a_i$ 都为偶数 |\n| $4$  | $52$  | 无额外约束 |\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2023] 平均数 Prosjek", "background": "\n\n译自 [Izborne Pripreme 2023 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2023/) D1T2。$\\texttt{3s,0.5G}$。\n\n祝 NaCly_Fish 生日快乐！（2024.7.28）\n\n感谢 @Rainbow_qwq 修复交互库。警示后人：慎用 `multiset.count`（复杂度可退化至线性）。\n", "description": "\n在黑板上有 $N$ 个非负整数。在一次操作中，可以选择黑板上的两个整数 $a,b$ 满足 $2\\mid (a+b)$，将 $a,b$ 从黑板上擦去，然后写下 $(a+b)/2$。注意到每次操作后，黑板上的数都是整数。\n\n试判断是否能让黑板上只剩下一个数。如果可以的话，还需要给出一组解。\n", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，代表数据组数。\n\n接下来依次描述 $T$ 组数据。\n\n对于每组数据，第一行，一个正整数 $N$，代表黑板上数的数量。\n\n第二行，$N$ 个非负整数，描述黑板上的数。\n", "outputFormat": "\n对于每组数据，输出若干行。\n\n如果不可行，输出一行一个 $\\texttt{-1}$；\n\n否则，输出 $(N-1)$ 行，每行两个整数，表示每次要擦除的数。你需要保证操作的数是存在的，且它们的和能被 $2$ 整除。\n", "hint": "\n#### 样例解释\n\n样例 $2$ 解释：$[\\boldsymbol{\\textcolor{red}{1}},2,3,4,\\boldsymbol{\\textcolor{red}{5}},6] \\to [\\boldsymbol{\\textcolor{red}{3}},2,\\boldsymbol{\\textcolor{red}{3}},4,6]\\to [3,2,\\boldsymbol{\\textcolor{red}{4}},\\boldsymbol{\\textcolor{red}{6}}]\\to [\\boldsymbol{\\textcolor{red}{5}},\\boldsymbol{\\textcolor{red}{3}},2]\\to [\\boldsymbol{\\textcolor{red}{4}},\\boldsymbol{\\textcolor{red}{2}}]\\to [3]$。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le T\\le 10^5$；\n- $1\\le N,\\sum N\\le 10^6$；\n- $0\\le a_i\\le 10^{18}$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $9$  | $T\\le 100$，$N\\le 7$   |\n| $2$  | $23$  | $T\\le 100$，$a_i\\le 10$  |\n| $3$  | $16$  | $a_i$ 都为偶数 |\n| $4$  | $52$  | 无额外约束 |\n\n\n", "locale": "zh-CN"}}}
{"pid": "P10831", "type": "P", "difficulty": 6, "samples": [["\n0\n\n2\n\n2", "? 1 2 3\n\n? 1 2 4\n\n? 1 3 4\n\n!\n0001\n0001\n0001\n1110"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "交互题", "Special Judge", "O2优化", "概率论", "随机化", "COTS（克罗地亚）"], "title": "[COTS 2023] 三角形 Trokuti", "background": "译自 [Izborne Pripreme 2023 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2023/) D1T3。$\\texttt{1s,0.5G}$。\n\n祝 NaCly_Fish 生日快乐！（2024.7.28）", "description": "**这是一道交互题。交互库是非自适应的。**\n\n有一个隐藏的简单无向图 $G$，其中恰有 $N=100$ 个节点。试通过以下询问重建 $G$：\n\n> **询问** 给定两两不同的节点 $u,v,w$，回答这三个节点的导出子图（induced subgraph）的边数。注意到答案只会是 $0,1,2,3$。\n\n【实现细节】\n\n你的程序通过标准输入输出与交互库交互。\n\n- $\\texttt{? u v w}$：发起一次询问，回答 $u,v,w$ 的导出子图的边数（从标准输入读取），注意到答案只会是 $0,1,2,3$。\n\n    你需要保证 $1\\le u,v,w\\le 100$，$u,v,w$ 两两不同。最多询问 $161\\, 700$ 次。\n- $\\texttt{!}$：回答答案。在输出 $\\texttt{!}$ 后换行，接下来输出 $N$ 行，每行一个长度为 $N$ 的 $\\texttt{01}$ 字符串。\n\n    第 $i$ 行第 $j$ 个字符如果是 $\\texttt{1}$，代表 $(i,j)$ 间有边；否则代表 $(i,j)$ 间无边。\n\n每次输出后，你需要刷新缓冲区。如：C++ 中的 `cout.flush()`。\n", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "\n#### 评分方式\n\n记 $Q$ 为你程序询问的最多次数。\n\n若 $Q\\gt 161\\, 700$，得 $0$ 分。\n\n否则，你的得分将由下表确定：\n\n| $Q$ | 得分 |\n|:-----:|:------:|\n| $9\\, 900\\le Q\\le 161\\, 700$  | $\\displaystyle 10+10\\cdot \\frac{161\\, 700-Q}{161\\, 700-9\\, 900}$  | \n| $4\\, 950 \\le Q\\le 9\\, 900$  | $\\displaystyle 20+10\\cdot \\frac{9\\, 900-Q}{9\\,900-4\\,500}$  |\n| $3\\, 400\\le Q\\le 4\\, 950$  | $\\displaystyle 30+70\\cdot \\frac{4\\,950-Q}{4\\,950-3\\,400}$  |\n| $Q\\le 3\\, 400$  | $100$  |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2023] 三角形 Trokuti", "background": "译自 [Izborne Pripreme 2023 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2023/) D1T3。$\\texttt{1s,0.5G}$。\n\n祝 NaCly_Fish 生日快乐！（2024.7.28）", "description": "**这是一道交互题。交互库是非自适应的。**\n\n有一个隐藏的简单无向图 $G$，其中恰有 $N=100$ 个节点。试通过以下询问重建 $G$：\n\n> **询问** 给定两两不同的节点 $u,v,w$，回答这三个节点的导出子图（induced subgraph）的边数。注意到答案只会是 $0,1,2,3$。\n\n【实现细节】\n\n你的程序通过标准输入输出与交互库交互。\n\n- $\\texttt{? u v w}$：发起一次询问，回答 $u,v,w$ 的导出子图的边数（从标准输入读取），注意到答案只会是 $0,1,2,3$。\n\n    你需要保证 $1\\le u,v,w\\le 100$，$u,v,w$ 两两不同。最多询问 $161\\, 700$ 次。\n- $\\texttt{!}$：回答答案。在输出 $\\texttt{!}$ 后换行，接下来输出 $N$ 行，每行一个长度为 $N$ 的 $\\texttt{01}$ 字符串。\n\n    第 $i$ 行第 $j$ 个字符如果是 $\\texttt{1}$，代表 $(i,j)$ 间有边；否则代表 $(i,j)$ 间无边。\n\n每次输出后，你需要刷新缓冲区。如：C++ 中的 `cout.flush()`。\n", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "\n#### 评分方式\n\n记 $Q$ 为你程序询问的最多次数。\n\n若 $Q\\gt 161\\, 700$，得 $0$ 分。\n\n否则，你的得分将由下表确定：\n\n| $Q$ | 得分 |\n|:-----:|:------:|\n| $9\\, 900\\le Q\\le 161\\, 700$  | $\\displaystyle 10+10\\cdot \\frac{161\\, 700-Q}{161\\, 700-9\\, 900}$  | \n| $4\\, 950 \\le Q\\le 9\\, 900$  | $\\displaystyle 20+10\\cdot \\frac{9\\, 900-Q}{9\\,900-4\\,500}$  |\n| $3\\, 400\\le Q\\le 4\\, 950$  | $\\displaystyle 30+70\\cdot \\frac{4\\,950-Q}{4\\,950-3\\,400}$  |\n| $Q\\le 3\\, 400$  | $100$  |\n\n", "locale": "zh-CN"}}}
{"pid": "P10832", "type": "P", "difficulty": 6, "samples": [["1\n3\n2 10\n3 3\n5 7", "7\n1100111"], ["2\n3 2 7\n1100111\n5\n3", "7\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "交互题", "Special Judge", "O2优化", "高斯消元", "通信题", "拉格朗日插值法", "COTS（克罗地亚）"], "title": "[COTS 2023] 传 Mapa", "background": "\n译自 [Izborne Pripreme 2023 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2023/) D2T1。$\\texttt{1s,0.5G}$。\n\n\n祝 NaCly_Fish 生日快乐！（2024.7.28）\n\n~~**受洛谷评测系统的限制（本题需要 run-twice），本题无法评测。**~~", "description": "\n给定 $N$ 对 $[1,10^9]$ 间的正整数，类似于 C++ 中的 $\\texttt{std::map<int,int>}$，可以把每对数的第一个数看成「键」（key），第二个数看成「值」（value）。保证键两两不同，可以通过键查询值。\n\n你想要发送这 $N$ 对正整数，但是受带宽限制，只能将这 $N$ 对正整数压缩成一个 $\\texttt{01}$ 串来发送。\n\n写一个程序，将这 $N$ 对正整数压缩成 $\\texttt{01}$ 串；或者给定你构造的 $\\texttt{01}$ 串，$Q$ 次询问给定键，你要回答对应的值。", "inputFormat": "第一行，一个正整数 $T\\in \\{1,2\\}$，表示数据类型：若为 $1$，则为编码操作；否则为解码操作。\n\n- 当 $T=1$ 时：\n\n第二行，一个整数 $N$，代表正整数对数；\n\n接下来 $N$ 行，每行两个正整数 $x_i,y_i$，分别表示键和对应的值。\n\n- 当 $T=2$ 时：\n\n第二行，三个正整数 $N,Q,K$，表示正整数对数，询问次数和 $\\texttt{01}$ 串长度；\n\n第三行，一个长度为 $K$ 的 $\\texttt{01}$ 串。\n\n接下来 $Q$ 行，每行一个正整数 $x_i$，表示询问的键。", "outputFormat": "- 当 $T=1$ 时：\n\n第一行，一个正整数 $K$，表示你构造的 $\\texttt{01}$ 串长度；\n\n第二行，你构造的 $\\texttt{01}$ 串。\n\n- 当 $T=2$ 时：\n\n输出 $Q$ 行，每行一个正整数，表示对应的值。", "hint": "\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $T\\in \\{1,2\\}$；\n- $1\\le N,Q\\le 100$，$1\\le K\\le 6\\, 000$；\n- $1\\le x_i,y_i\\le 10^9$；\n- $x_i$ 两两不同。\n\n#### 评分方式\n\n\n如果你的输出格式有错或者没有正确回答询问，得 $0$ 分。\n\n否则记 $K$ 为你输出的 $\\texttt{01}$ 串长度，得分由下表确定：\n\n| $K$ | 得分 |\n|:-----:|:------:|\n| $K\\gt 6\\, 000$  | $0$  | \n| $3\\, 000\\le K\\le 6\\, 000$  | $\\displaystyle 100- \\frac{K-3\\, 000}{30}$  |\n| $K\\le 3\\, 000$  | $100$  |\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2023] 传 Mapa", "background": "\n译自 [Izborne Pripreme 2023 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2023/) D2T1。$\\texttt{1s,0.5G}$。\n\n\n祝 NaCly_Fish 生日快乐！（2024.7.28）\n\n~~**受洛谷评测系统的限制（本题需要 run-twice），本题无法评测。**~~", "description": "\n给定 $N$ 对 $[1,10^9]$ 间的正整数，类似于 C++ 中的 $\\texttt{std::map<int,int>}$，可以把每对数的第一个数看成「键」（key），第二个数看成「值」（value）。保证键两两不同，可以通过键查询值。\n\n你想要发送这 $N$ 对正整数，但是受带宽限制，只能将这 $N$ 对正整数压缩成一个 $\\texttt{01}$ 串来发送。\n\n写一个程序，将这 $N$ 对正整数压缩成 $\\texttt{01}$ 串；或者给定你构造的 $\\texttt{01}$ 串，$Q$ 次询问给定键，你要回答对应的值。", "inputFormat": "第一行，一个正整数 $T\\in \\{1,2\\}$，表示数据类型：若为 $1$，则为编码操作；否则为解码操作。\n\n- 当 $T=1$ 时：\n\n第二行，一个整数 $N$，代表正整数对数；\n\n接下来 $N$ 行，每行两个正整数 $x_i,y_i$，分别表示键和对应的值。\n\n- 当 $T=2$ 时：\n\n第二行，三个正整数 $N,Q,K$，表示正整数对数，询问次数和 $\\texttt{01}$ 串长度；\n\n第三行，一个长度为 $K$ 的 $\\texttt{01}$ 串。\n\n接下来 $Q$ 行，每行一个正整数 $x_i$，表示询问的键。", "outputFormat": "- 当 $T=1$ 时：\n\n第一行，一个正整数 $K$，表示你构造的 $\\texttt{01}$ 串长度；\n\n第二行，你构造的 $\\texttt{01}$ 串。\n\n- 当 $T=2$ 时：\n\n输出 $Q$ 行，每行一个正整数，表示对应的值。", "hint": "\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $T\\in \\{1,2\\}$；\n- $1\\le N,Q\\le 100$，$1\\le K\\le 6\\, 000$；\n- $1\\le x_i,y_i\\le 10^9$；\n- $x_i$ 两两不同。\n\n#### 评分方式\n\n\n如果你的输出格式有错或者没有正确回答询问，得 $0$ 分。\n\n否则记 $K$ 为你输出的 $\\texttt{01}$ 串长度，得分由下表确定：\n\n| $K$ | 得分 |\n|:-----:|:------:|\n| $K\\gt 6\\, 000$  | $0$  | \n| $3\\, 000\\le K\\le 6\\, 000$  | $\\displaystyle 100- \\frac{K-3\\, 000}{30}$  |\n| $K\\le 3\\, 000$  | $100$  |\n\n\n", "locale": "zh-CN"}}}
{"pid": "P10833", "type": "P", "difficulty": 6, "samples": [["3\n3 1 2 ", "3"], ["5\n3 2 1 2 3", "5"], ["7\n2 1 3 1 2 3 4", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2023", "O2优化", "分治", "哈希 hashing", "单调栈", "COTS（克罗地亚）"], "title": "[COTS 2023] 下 Niz", "background": "\n译自 [Izborne Pripreme 2023 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2023/) D2T2。$\\texttt{1s,0.5G}$。\n\n祝 NaCly_Fish 生日快乐！（2024.7.28）", "description": "\n给定长度为 $N$ 的序列 $a$，求满足以下条件的 $(l,r)$ 对数：\n\n- $1\\le l\\le r\\le N$；\n- $a_l,a_{l+1},\\cdots,a_{r-1},a_r$ 是 $1\\sim r-l+1$ 的排列。\n", "inputFormat": "\n第一行，一个正整数 $N$，表示序列长度；\n\n第二行，$N$ 个正整数，描述序列 $a$。", "outputFormat": "一行一个整数，即满足条件的 $(l,r)$ 的数量。", "hint": "\n### 样例解释\n\n样例 $3$ 解释：满足条件的 $(l,r)$ 有 $(2,2),(1,2),(1,3),(4,4),(4,5),(4,6),(4,7),(3,5)$。   \n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 10^6$；\n- $1\\le a_i\\le N$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $13$  | 每个数只在序列中出现一次  |\n| $2$  | $20$  | $N\\le 5\\, 000$  |\n| $3$  | $33$  | $N\\le 50\\, 000$ |\n| $4$  | $34$  | 无额外约束 |\n\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2023] 下 Niz", "background": "\n译自 [Izborne Pripreme 2023 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2023/) D2T2。$\\texttt{1s,0.5G}$。\n\n祝 NaCly_Fish 生日快乐！（2024.7.28）", "description": "\n给定长度为 $N$ 的序列 $a$，求满足以下条件的 $(l,r)$ 对数：\n\n- $1\\le l\\le r\\le N$；\n- $a_l,a_{l+1},\\cdots,a_{r-1},a_r$ 是 $1\\sim r-l+1$ 的排列。\n", "inputFormat": "\n第一行，一个正整数 $N$，表示序列长度；\n\n第二行，$N$ 个正整数，描述序列 $a$。", "outputFormat": "一行一个整数，即满足条件的 $(l,r)$ 的数量。", "hint": "\n### 样例解释\n\n样例 $3$ 解释：满足条件的 $(l,r)$ 有 $(2,2),(1,2),(1,3),(4,4),(4,5),(4,6),(4,7),(3,5)$。   \n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 10^6$；\n- $1\\le a_i\\le N$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $13$  | 每个数只在序列中出现一次  |\n| $2$  | $20$  | $N\\le 5\\, 000$  |\n| $3$  | $33$  | $N\\le 50\\, 000$ |\n| $4$  | $34$  | 无额外约束 |\n\n\n\n", "locale": "zh-CN"}}}
{"pid": "P10834", "type": "P", "difficulty": 6, "samples": [["6 \n8 6 2 4 2 6\n1 2\n3 4\n5 7\n6 8\n9 10", "36\n4\n0\n12\n4"], ["7 \n4 2 6 6 2 4 2\n1 2\n3 8\n4 9\n5 10\n6 11\n7 12", "4\n12\n24\n0\n16\n0 "], ["8\n4 10 2 10 6 8 4 12\n1 2\n3 4\n5 6\n7 8\n9 10\n11 12\n13 14", "16\n4\n36\n16\n84\n28\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树上启发式合并", "2023", "O2优化", "线段树合并", "COTS（克罗地亚）"], "title": "[COTS 2023] 题 Zadatak", "background": "译自 [Izborne Pripreme 2023 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2023/) D2T3。$\\texttt{1s,0.5G}$。\n\n祝 NaCly_Fish 生日快乐！（2024.7.28）", "description": "Jura 有 $N$ 个正方形，标号为 $1\\sim N$，第 $i$ 个正方形边长为 $a_i$，且 $2\\mid a_i$。起初，这些正方形都是黑色的。\n\nJura 决定花费他生命中的 $(N-1)$ 秒来玩这些正方形。在第 $i$ 秒时，Jura 将第 $x_i$ 和第 $y_i$ 个正方形合并成第 $(N+i)$ 个正方形（合并后，第 $x_i$ 和第 $y_i$ 个正方形不再存在）。\n\n合并正方形时，将两个正方形的中心对齐，边缘平行对齐地摆在平面中。新的正方形的大小为合并的两个正方形中较大那个的大小；它的颜色是原来两个正方形颜色的「异或和」（黑+黑=白，白+白=白，黑+白=黑，白+黑=黑）。合并正方形的**代价**为，两个正方形合并前（但是已经按照刚才的要求摆好），正方形的交中，满足在两个正方形中均为黑色的区域的面积。\n\n你需要输出每次合并操作的代价。\n\n下图为正方形合并的示例：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8uquyi9a.png)", "inputFormat": "第一行，一个正整数 $N$，表示正方形数量；\n\n第二行，$N$ 个正整数，描述序列 $a$。\n\n接下来 $(N-1)$ 行，每行两个正整数 $x_i,y_i$，描述一次操作。", "outputFormat": "输出 $(N-1)$ 行，每行一个整数，表示操作的代价。", "hint": "### 样例解释\n\n样例 $1$ 的最后一个操作如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rvjzj56s.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 10^5$；\n- $2\\le a_i\\le 10^6$。\n- $2\\mid a_i$。\n- $1\\le x_i,y_i\\le N+i-1$\n- 操作前正方形存在，且 $x_i\\neq y_i$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $14$  | $N\\le 5\\, 000$  |\n| $2$  | $25$  | $x_1=1,y_1=2$；$\\forall 2\\le i\\le N-1$，$x_i=i+1,y_i=N+i-1$  |\n| $3$  | $17$  | $\\exists k\\in \\mathbb{N}$，使得 $2^k=N$；$x_i=2i-1,y_i=2i$ |\n| $4$  | $21$  | $n\\le 30\\, 000$ |\n| $5$  | $23$  | 无额外约束 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2023] 题 Zadatak", "background": "译自 [Izborne Pripreme 2023 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2023/) D2T3。$\\texttt{1s,0.5G}$。\n\n祝 NaCly_Fish 生日快乐！（2024.7.28）", "description": "Jura 有 $N$ 个正方形，标号为 $1\\sim N$，第 $i$ 个正方形边长为 $a_i$，且 $2\\mid a_i$。起初，这些正方形都是黑色的。\n\nJura 决定花费他生命中的 $(N-1)$ 秒来玩这些正方形。在第 $i$ 秒时，Jura 将第 $x_i$ 和第 $y_i$ 个正方形合并成第 $(N+i)$ 个正方形（合并后，第 $x_i$ 和第 $y_i$ 个正方形不再存在）。\n\n合并正方形时，将两个正方形的中心对齐，边缘平行对齐地摆在平面中。新的正方形的大小为合并的两个正方形中较大那个的大小；它的颜色是原来两个正方形颜色的「异或和」（黑+黑=白，白+白=白，黑+白=黑，白+黑=黑）。合并正方形的**代价**为，两个正方形合并前（但是已经按照刚才的要求摆好），正方形的交中，满足在两个正方形中均为黑色的区域的面积。\n\n你需要输出每次合并操作的代价。\n\n下图为正方形合并的示例：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8uquyi9a.png)", "inputFormat": "第一行，一个正整数 $N$，表示正方形数量；\n\n第二行，$N$ 个正整数，描述序列 $a$。\n\n接下来 $(N-1)$ 行，每行两个正整数 $x_i,y_i$，描述一次操作。", "outputFormat": "输出 $(N-1)$ 行，每行一个整数，表示操作的代价。", "hint": "### 样例解释\n\n样例 $1$ 的最后一个操作如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rvjzj56s.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 10^5$；\n- $2\\le a_i\\le 10^6$。\n- $2\\mid a_i$。\n- $1\\le x_i,y_i\\le N+i-1$\n- 操作前正方形存在，且 $x_i\\neq y_i$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $14$  | $N\\le 5\\, 000$  |\n| $2$  | $25$  | $x_1=1,y_1=2$；$\\forall 2\\le i\\le N-1$，$x_i=i+1,y_i=N+i-1$  |\n| $3$  | $17$  | $\\exists k\\in \\mathbb{N}$，使得 $2^k=N$；$x_i=2i-1,y_i=2i$ |\n| $4$  | $21$  | $n\\le 30\\, 000$ |\n| $5$  | $23$  | 无额外约束 |", "locale": "zh-CN"}}}
{"pid": "P10835", "type": "P", "difficulty": 2, "samples": [["4\n3 3\n2 5\n0 3\n1 4\n", "Yes\nYes\nNo\nNo\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "位运算", "洛谷月赛"], "title": "『FLA - I』冲云霄", "background": "住在呼和浩特的小 R 很久以前就学会了异或。异或使用符号 $\\oplus$ 表示，在 C++ 中可用符号 `^` 表示。非负整数 $x$ 和 $y$ 的异或是指对它们二进制表示中的每一位进行如下运算得到的结果：\n\n- 若 $x$ 和 $y$ 的第 $k$ 个二进制位相同，结果的第 $k$ 个二进制位为 $0$；\n- 若 $x$ 和 $y$ 的第 $k$ 个二进制位不同，结果的第 $k$ 个二进制位为 $1$。\n\n使用 $(X)_{10}$ 表示十进制数 $X$，$(Y)_2$ 表示二进制数 $Y$，因为 $(12)_{10}=(1100)_2$，$(10)_{10}=(1010)_2$，所以 $(12)_{10} \\oplus (10)_{10}=(1100)_2 \\oplus (1010)_2=(0110)_2=(6)_{10}$。\n\n住在银川的小 F 想用这道题难倒小 R 但失败了，现在小 F 又想用这道题为难你，不能让他的阴谋得逞！", "description": "给定**整数** $n$ 和 $m$，判断是否存在满足下列条件的数列 $a$。本题中数列元素的下标从 $1$ 开始。\n\n- 数列 $a$ 的长度为 $m$，数列 $a$ 的每一项都为**正整数**。\n\n- $a_1 \\oplus a_2 \\oplus \\cdots \\oplus a_m = n$，即数列 $a$ 的所有项异或得到的结果等于 $n$。\n\n- 数列 $a$ 中所有元素的值都相同。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，输入一行两个整数 $n,m$。", "outputFormat": "对于每组测试数据，输出一行一个字符串。如果存在满足条件的数列 $a$，输出 `Yes`；否则输出 `No`。", "hint": "**「样例解释 #1」**\n\n对于第一组测试数据，数列 $a$ 可以是 $[3,3,3]$，此时 $a_1 \\oplus a_2 \\oplus a_3 = 3 \\oplus 3 \\oplus 3 = 3$。\n\n对于第二组测试数据，数列 $a$ 可以是 $[2,2,2,2,2]$，此时 $a_1 \\oplus a_2 \\oplus a_3 \\oplus a_4 \\oplus a_5 = 2 \\oplus 2 \\oplus 2 \\oplus 2 \\oplus 2 = 2$。\n\n对于第三组和第四组测试数据，可以证明不存在满足条件的数列。\n\n**「数据范围」**\n\n|测试点编号|$T \\leq$|$n \\leq$|$m \\leq$|\n|:-:|:-:|:-:|:-:|\n|$1 \\sim 2$|$5$|$0$|$10^9$|\n|$3 \\sim 4$|$5$|$10^9$|$3$|\n|$5$|$10^5$|$10^9$|$10^9$|\n\n对于所有测试数据，$1 \\leq T \\leq 10^5$，$0 \\leq n \\leq 10^9$，$2 \\leq m \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "『FLA - I』Up to the Clouds", "background": "It has been a long time since Ryan, who lives in Hohhot, learned the operation XOR. Denote by $\\oplus$ the Bitwise XOR operation. In C++, it is denoted by `^`. The XOR of non-negative integers $x$ and $y$ is the result of performing the following operation on each bit of their binary representation:\n\n- When $x$ and $y$ are different on this bit, the result is $1$ on this bit.\n- When $x$ and $y$ are the same on this bit, this result is $0$ on this bit.\n\nDenote by $(X)_{10}$ the decimal representation of $X$, and denote by $(Y)_2$ the binary representation of $Y$. For example, $(12)_{10}=(1100)_2$, $(10)_{10}=(1010)_2$, and then $(12)_{10} \\oplus (10)_{10}=(1100)_2 \\oplus (1010)_2=(0110)_2=(6)_{10}$.\n\nFlanksy, who lives in Yinchuan, tried to stump Ryan using this problem but failed. Now Flanksy wants to use this problem to stump you. Don't let his conspiracy succeed!", "description": "Given **integers** $n$ and $m$, determine whether there is a sequence $a$ that satisfying the following constraints. The indices of the sequence elements in this question start from $1$.\n\n- The length of the sequence $a$ is $m$, and each entry of the sequence $a$ is a **positive integer**.\n\n- $a_1 \\oplus a_2 \\oplus \\cdots \\oplus a_m = n$, that is, the result of XORing all entries of the sequence $a$ is equal to $n$.\n\n- All the entries in $a$ are the same.", "inputFormat": "**Each test consists of multiple test cases.**\n\nThe first line contains an integer $T$ — the number of test cases. Then follows the description of the test cases.\n\nEach test case consists of one line. The only line of each test case contains two integers $n$ and $m$.", "outputFormat": "For each test case, if there is a sequence $a$ that satisfies the restrictions, print `Yes`; otherwise, print `No`.\n", "hint": "**「Sample Explanation #1」**\n\nFor the first test case, the sequence $a$ can be $[3,3,3]$, in which case $a_1 \\oplus a_2 \\oplus a_3 = 3 \\oplus 3 \\oplus 3 = 3$.\n\nFor the second test case, the sequence $a$ can be $[2,2,2,2,2]$, in which case $a_1 \\oplus a_2 \\oplus a_3 \\oplus a_4 \\oplus a_5 = 2 \\oplus 2 \\oplus 2 \\oplus 2 \\oplus 2 = 2$.\n\nFor the third and fourth test cases, it can be proved that there is no sequence that satisfies the restrictions.\n\n**「Constraints」**\n\n|Test Id|$T \\leq$|$n \\leq$|$m \\leq$|\n|:-:|:-:|:-:|:-:|\n|$1 \\sim 2$|$5$|$0$|$10^9$|\n|$3 \\sim 4$|$5$|$10^9$|$3$|\n|$5$|$10^5$|$10^9$|$10^9$|\n\nEach test is worth $20$ points.\n\nFor all tests, $1 \\leq T \\leq 10^5$, $0 \\leq n \\leq 10^9$, $2 \\leq m \\leq 10^9$.", "locale": "en"}, "zh-CN": {"title": "『FLA - I』冲云霄", "background": "住在呼和浩特的小 R 很久以前就学会了异或。异或使用符号 $\\oplus$ 表示，在 C++ 中可用符号 `^` 表示。非负整数 $x$ 和 $y$ 的异或是指对它们二进制表示中的每一位进行如下运算得到的结果：\n\n- 若 $x$ 和 $y$ 的第 $k$ 个二进制位相同，结果的第 $k$ 个二进制位为 $0$；\n- 若 $x$ 和 $y$ 的第 $k$ 个二进制位不同，结果的第 $k$ 个二进制位为 $1$。\n\n使用 $(X)_{10}$ 表示十进制数 $X$，$(Y)_2$ 表示二进制数 $Y$，因为 $(12)_{10}=(1100)_2$，$(10)_{10}=(1010)_2$，所以 $(12)_{10} \\oplus (10)_{10}=(1100)_2 \\oplus (1010)_2=(0110)_2=(6)_{10}$。\n\n住在银川的小 F 想用这道题难倒小 R 但失败了，现在小 F 又想用这道题为难你，不能让他的阴谋得逞！", "description": "给定**整数** $n$ 和 $m$，判断是否存在满足下列条件的数列 $a$。本题中数列元素的下标从 $1$ 开始。\n\n- 数列 $a$ 的长度为 $m$，数列 $a$ 的每一项都为**正整数**。\n\n- $a_1 \\oplus a_2 \\oplus \\cdots \\oplus a_m = n$，即数列 $a$ 的所有项异或得到的结果等于 $n$。\n\n- 数列 $a$ 中所有元素的值都相同。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，输入一行两个整数 $n,m$。", "outputFormat": "对于每组测试数据，输出一行一个字符串。如果存在满足条件的数列 $a$，输出 `Yes`；否则输出 `No`。", "hint": "**「样例解释 #1」**\n\n对于第一组测试数据，数列 $a$ 可以是 $[3,3,3]$，此时 $a_1 \\oplus a_2 \\oplus a_3 = 3 \\oplus 3 \\oplus 3 = 3$。\n\n对于第二组测试数据，数列 $a$ 可以是 $[2,2,2,2,2]$，此时 $a_1 \\oplus a_2 \\oplus a_3 \\oplus a_4 \\oplus a_5 = 2 \\oplus 2 \\oplus 2 \\oplus 2 \\oplus 2 = 2$。\n\n对于第三组和第四组测试数据，可以证明不存在满足条件的数列。\n\n**「数据范围」**\n\n|测试点编号|$T \\leq$|$n \\leq$|$m \\leq$|\n|:-:|:-:|:-:|:-:|\n|$1 \\sim 2$|$5$|$0$|$10^9$|\n|$3 \\sim 4$|$5$|$10^9$|$3$|\n|$5$|$10^5$|$10^9$|$10^9$|\n\n对于所有测试数据，$1 \\leq T \\leq 10^5$，$0 \\leq n \\leq 10^9$，$2 \\leq m \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10836", "type": "P", "difficulty": 2, "samples": [["8 2\nth#nkyou\n#estwish\n", "thankyou\n"], ["16 5\n##soluteradian#e\nyour#awnwillcom#\n", "absoluteradiance\n"], ["40 45\nhhuj#pzr#k#mmd#z##y#o####m##j##tga#k#t#g\nm########be#######vf##a#j###ypuf###pr###\n", "hhujapzrakbmmdczdeyfoghijmkljmntgaokptqg\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "『FLA - I』歌静河", "background": "> You can cry\n>\n> Drinking your eyes\n>\n> Do you miss the sadness when it's gone\n>\n> And you let the river run wild\n>\n> And you let the river run wild\n\n— _The River_ by _AURORA_", "description": "秋有两个长度为 $n$ 且仅包含 `#` 和小写字母的字符串 $a,b$。\n\n这两个字符串总共包含 $m$ 个 `#`，秋打算执行 $m$ 次操作，用小写字母把两个字符串中所有的 `#` 都替换掉。对于第 $i$ 次操作，他要在 $a,b$ 中选择一个字符串，将这个字符串中从左向右数第一个 `#` 替换为第 $(i-1) \\bmod 26 +1$ 个小写字母。**他不能选择不包含 `#` 的字符串。**\n\n秋有一位热爱艺术的好友，他想最小化执行完 $m$ 次操作后的字符串 $a$ 的字典序。秋想，编程也是一种艺术，这样的话，他们的心也会更近一些。", "inputFormat": "第一行输入两个正整数 $n,m$。\n\n第二行输入一个长度为 $n$ 的字符串 $a$。\n\n第三行输入一个长度为 $n$ 的字符串 $b$。", "outputFormat": "输出一行一个字符串，表示执行 $m$ 次操作后能够得到的字典序最小的 $a$。", "hint": "**「样例解释 #1」**\n\n第一次操作选择字符串 $a$，将 $a$ 中的 `#` 替换为第 $(1-1) \\bmod 26+1=1$ 个小写字母，即 `a`；第二次操作选择字符串 $b$，将 $b$ 中的 `#` 替换为第 $(2-1) \\bmod 26+1=2$ 个小写字母，即 `b`。最终的字符串 $a$ 即为 `thankyou`，可以证明这是执行 $m$ 次操作后能得到的字典序最小的 $a$。\n\n**「数据范围」**\n\n|测试点编号|$n \\leq$|特殊性质|\n|:-:|:-:|:-:|\n|$1 \\sim 3$|$10$|无|\n|$4 \\sim 6$|$10^5$|有|\n|$7 \\sim 10$|$10^5$|无|\n\n- 特殊性质：保证 $a,b$ 中存在一个不包含 `#` 的字符串。\n\n对于所有测试数据，$1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 2n$，字符串 $a,b$ 仅包含字符 `#` 和小写字母。\n\n2024 年 8 月 4 日：添加了 1 组 hack 数据置于 Subtask #1。", "locale": "zh-CN", "translations": {"en": {"title": "『FLA - I』Song of Silent River", "background": "> You can cry\n>\n> Drinking your eyes\n>\n> Do you miss the sadness when it's gone\n>\n> And you let the river run wild\n>\n> And you let the river run wild\n\n— _The River_ by _AURORA_", "description": "Qiu has two strings $a,b$ of length $n$ that only contain `#` and lowercase letters.\n\nThese two strings contain $m$ `#`s in total. Qiu intends to perform $m$ operations to replace all `#`s in the two strings with lowercase letters. For the $i$-th operation, he has to choose a string from $a,b$ and replace the first `#` in this string from left to right with the $(i-1) \\bmod 26 +1$-th lowercase letter. **He cannot choose a string that does not contain `#`.**\n\nQiu has a friend who loves art. He wants to minimize the lexicographic order of the string $a$ after performing $m$ operations. Qiu thought that programming is also a kind of art, and in this way, their hearts will be closer.", "inputFormat": "The first line contains two positive integers $n, m$.\n\nThe second line contains a string $a$ of length $n$.\n\nThe last line contains a string $b$ of length $n$.", "outputFormat": "Output one line of one string, indicating the minimum $a$ in lexicographic order that can be obtained after executing $m$ operations.", "hint": "**「Sample Explanation #1」**\n\nIn the first operation, Qiu selects the string $a$ and replaces the `#` into $a$ with the $(1-1) \\bmod 26+1=1$-st lowercase letter, i.e. `a`; In the second operation, Qiu selects the string $b$ and replaces the `#` in $b$ with the $(2-1) \\bmod 26+1=2$-nd lowercase letter, i.e. `b`. The final string $a$ is `thankyou`, which can be proved to be the smallest $a$ in lexicographic order after executing $m$ operations.\n\n**「Constraints」**\n\n|Test Id|$n \\leq$|Special Property|\n|:-:|:-:|:-:|\n|$1 \\sim 3$|$10$|No|\n|$4 \\sim 6$|$10^5$|Yes|\n|$7 \\sim 10$|$10^5$|No|\n\n- Special Property: It is guaranteed that there is a string in $a,b$ that does not contain `#`.\n\nEach test is worth $10$ points.\n\nFor all tests, $1 \\leq n \\leq 10^5$, $1 \\leq m \\leq 2n$, the string $a,b$ contains only the character `#` and lowercase letters.", "locale": "en"}, "zh-CN": {"title": "『FLA - I』歌静河", "background": "> You can cry\n>\n> Drinking your eyes\n>\n> Do you miss the sadness when it's gone\n>\n> And you let the river run wild\n>\n> And you let the river run wild\n\n— _The River_ by _AURORA_", "description": "秋有两个长度为 $n$ 且仅包含 `#` 和小写字母的字符串 $a,b$。\n\n这两个字符串总共包含 $m$ 个 `#`，秋打算执行 $m$ 次操作，用小写字母把两个字符串中所有的 `#` 都替换掉。对于第 $i$ 次操作，他要在 $a,b$ 中选择一个字符串，将这个字符串中从左向右数第一个 `#` 替换为第 $(i-1) \\bmod 26 +1$ 个小写字母。**他不能选择不包含 `#` 的字符串。**\n\n秋有一位热爱艺术的好友，他想最小化执行完 $m$ 次操作后的字符串 $a$ 的字典序。秋想，编程也是一种艺术，这样的话，他们的心也会更近一些。", "inputFormat": "第一行输入两个正整数 $n,m$。\n\n第二行输入一个长度为 $n$ 的字符串 $a$。\n\n第三行输入一个长度为 $n$ 的字符串 $b$。", "outputFormat": "输出一行一个字符串，表示执行 $m$ 次操作后能够得到的字典序最小的 $a$。", "hint": "**「样例解释 #1」**\n\n第一次操作选择字符串 $a$，将 $a$ 中的 `#` 替换为第 $(1-1) \\bmod 26+1=1$ 个小写字母，即 `a`；第二次操作选择字符串 $b$，将 $b$ 中的 `#` 替换为第 $(2-1) \\bmod 26+1=2$ 个小写字母，即 `b`。最终的字符串 $a$ 即为 `thankyou`，可以证明这是执行 $m$ 次操作后能得到的字典序最小的 $a$。\n\n**「数据范围」**\n\n|测试点编号|$n \\leq$|特殊性质|\n|:-:|:-:|:-:|\n|$1 \\sim 3$|$10$|无|\n|$4 \\sim 6$|$10^5$|有|\n|$7 \\sim 10$|$10^5$|无|\n\n- 特殊性质：保证 $a,b$ 中存在一个不包含 `#` 的字符串。\n\n对于所有测试数据，$1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 2n$，字符串 $a,b$ 仅包含字符 `#` 和小写字母。\n\n2024 年 8 月 4 日：添加了 1 组 hack 数据置于 Subtask #1。", "locale": "zh-CN"}}}
{"pid": "P10837", "type": "P", "difficulty": 4, "samples": [["5 4\n11 9 1 3 12\n", "14\n"], ["13 7\n6 42 58 41 20 60 2 61 45 28 45 28 12\n", "38\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "离散化", "洛谷原创", "O2优化", "排序", "前缀和", "队列", "差分", "洛谷月赛"], "title": "『FLA - I』云音泛", "background": "“……这些年来，过得可好？”\n\n“……无所谓好或不好，人生一场空虚大梦，韶华白首，不过转瞬。惟有天道恒在，往复循环，不曾更改...”", "description": "在梦中，秋种下了 $n$ 朵凋零玫瑰。他记得，第 $i$ 朵玫瑰是在时刻 $t_i$ 种植的。\n\n凋零玫瑰在被种下的那个时刻就立即开放，但每一株玫瑰只会开放 $m$ 个时刻（在时刻 $T$ 种植的玫瑰会且仅会在从时刻 $T$ 到时刻 $T+m-1$ 的 $m$ 个时刻开放），在 $m$ 个时刻后便化作再也无法挽留的灰尘，飘散在凛冽的寒风中。\n\n他问你，假如他可以改变不超过一朵玫瑰的种植时间（选定一个 $t_i$ 并将其修改为任意正整数），那么最多有多少个时刻有且仅有一株凋零玫瑰开放？", "inputFormat": "第一行输入两个正整数 $n,m$。\n\n第二行输入 $n$ 个正整数，第 $i$ 个正整数为 $t_i$。", "outputFormat": "输出一行一个正整数表示答案。", "hint": "**「样例解释 #1」**\n\n如图，使用金色标记有且仅有一株凋零玫瑰开放的时刻，使用黑色和红色标记每朵凋零玫瑰开放的时刻。\n\n![example1](https://cdn.luogu.com.cn/upload/image_hosting/1u42cn1k.png)\n\n将使用红色标记的玫瑰的种植时刻改为 $17$（将 $t_1$ 的值修改为 $17$，如下图）后有 $14$ 个时刻有且仅有一株凋零玫瑰开放。可以证明不存在能够使有且仅有一株凋零玫瑰开放的时刻数量大于 $14$ 的修改方案。\n\n![example2](https://cdn.luogu.com.cn/upload/image_hosting/ig0pgy5w.png)\n\n**「数据范围」**\n\n|测试点编号|$n \\leq$|$m \\leq$|$t_i \\leq$|\n|:-:|:-:|:-:|:-:|\n|$1 \\sim 6$|$5000$|$5000$|$5000$|\n|$7 \\sim 12$|$2 \\times 10^5$|$2 \\times 10^5$|$2 \\times 10^5$|\n|$13 \\sim 14$|$2 \\times 10^5$|$1$|$10^9$|\n|$15 \\sim 20$|$2 \\times10^5$|$10^9$|$10^9$|\n\n对于所有测试数据，$1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq m,t_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "『FLA - I』Drifting Clouds' Rhythm", "background": "\"... How is it going these years?\"\n\n\"... There's no such thing as good or bad. Life is a dream of emptiness, the glorious youth and the hoary head, are nothing but an instant. Only the law of natural repeats, never changing ...\"", "description": "In his dream, Qiu planted $n$ roses. He remembered that the $i$-th rose was planted at the moment $t_i$.\n\nA rose comes out as soon as it is planted. However, each rose will bloom for exactly $m$ moments (the rose planted at the moment $T$ will bloom from the moment $T$ to the moment $T+m-1$). After $m$ moments, the rose turns into unretained dust, fading away in the cold wind. \n\nQiu asks you, if he can change the planting moment of at most one rose (that is, select an $t_i$ and modify it to an arbitrary positive integer), for how many moments at most will there be exactly one rose blooming? ", "inputFormat": "The first line of input contains two integers $n$ and $m$ — the number of roses and the blooming time of each rose.\n\nThe second line of input contains $n$ integers $t_1,t_2,\\dots, t_n$ — the planting moment of each rose.", "outputFormat": "Output a single line containing an integer denoting the answer.", "hint": "**「Sample Explanation #1」**\n\nAs the figure below, use golden stripes to mark the moments when exactly one rose is blooming, and use black and red stripes to mark the periods when each rose comes out.\n\n![example1](https://cdn.luogu.com.cn/upload/image_hosting/1u42cn1k.png)\n\nIf we modify the planting moment of the rose with red mark to $17$ (i.e. we modify $t_1$ to $17$, as the figure below), the number of golden moments becomes $14$. It can be proven that there is no other scheme that makes the answer greater than $14$, therefore we should output $14$.\n\n![example2](https://cdn.luogu.com.cn/upload/image_hosting/ig0pgy5w.png)\n\n**「Constraints」**\n\n| Test Id | $n \\leq$ | $m \\leq$ | $t_i \\leq$ |\n| :----------: | :------: | :------: | :--------: |\n| $1 \\sim 6$ | $5000$ | $5000$ | $5000$ |\n| $7 \\sim 12$ | $2 \\times 10^5$ | $2 \\times 10^5$ | $2 \\times 10^5$ |\n| $13 \\sim 14$ | $2 \\times 10^5$ | $1$ | $10^9$ |\n| $15 \\sim 20$ | $2 \\times 10^5$ | $10^9$ | $10^9$ |\n\nEach test is worth $5$ points.\n\nFor all tests, it is guaranteed that $1 \\leq n \\leq 2 \\times 10^5$, $1 \\leq m,t_i \\leq 10^9$.", "locale": "en"}, "zh-CN": {"title": "『FLA - I』云音泛", "background": "“……这些年来，过得可好？”\n\n“……无所谓好或不好，人生一场空虚大梦，韶华白首，不过转瞬。惟有天道恒在，往复循环，不曾更改...”", "description": "在梦中，秋种下了 $n$ 朵凋零玫瑰。他记得，第 $i$ 朵玫瑰是在时刻 $t_i$ 种植的。\n\n凋零玫瑰在被种下的那个时刻就立即开放，但每一株玫瑰只会开放 $m$ 个时刻（在时刻 $T$ 种植的玫瑰会且仅会在从时刻 $T$ 到时刻 $T+m-1$ 的 $m$ 个时刻开放），在 $m$ 个时刻后便化作再也无法挽留的灰尘，飘散在凛冽的寒风中。\n\n他问你，假如他可以改变不超过一朵玫瑰的种植时间（选定一个 $t_i$ 并将其修改为任意正整数），那么最多有多少个时刻有且仅有一株凋零玫瑰开放？", "inputFormat": "第一行输入两个正整数 $n,m$。\n\n第二行输入 $n$ 个正整数，第 $i$ 个正整数为 $t_i$。", "outputFormat": "输出一行一个正整数表示答案。", "hint": "**「样例解释 #1」**\n\n如图，使用金色标记有且仅有一株凋零玫瑰开放的时刻，使用黑色和红色标记每朵凋零玫瑰开放的时刻。\n\n![example1](https://cdn.luogu.com.cn/upload/image_hosting/1u42cn1k.png)\n\n将使用红色标记的玫瑰的种植时刻改为 $17$（将 $t_1$ 的值修改为 $17$，如下图）后有 $14$ 个时刻有且仅有一株凋零玫瑰开放。可以证明不存在能够使有且仅有一株凋零玫瑰开放的时刻数量大于 $14$ 的修改方案。\n\n![example2](https://cdn.luogu.com.cn/upload/image_hosting/ig0pgy5w.png)\n\n**「数据范围」**\n\n|测试点编号|$n \\leq$|$m \\leq$|$t_i \\leq$|\n|:-:|:-:|:-:|:-:|\n|$1 \\sim 6$|$5000$|$5000$|$5000$|\n|$7 \\sim 12$|$2 \\times 10^5$|$2 \\times 10^5$|$2 \\times 10^5$|\n|$13 \\sim 14$|$2 \\times 10^5$|$1$|$10^9$|\n|$15 \\sim 20$|$2 \\times10^5$|$10^9$|$10^9$|\n\n对于所有测试数据，$1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq m,t_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10838", "type": "P", "difficulty": 4, "samples": [["4 2 2 1 2\n2 3 6\n4 1 6\n3 1 8\n", "14\n"], ["9 7 4 1 6\n3 8 7\n6 8 6\n6 7 4\n2 5 3\n3 2 2\n3 9 12\n2 1 2\n8 4 11\n", "12\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "贪心", "二分", "洛谷原创", "O2优化", "树论", "洛谷月赛"], "title": "『FLA - I』庭中有奇树", "background": "![zuzong](https://cdn.luogu.com.cn/upload/image_hosting/6zbja7sn.png)\n\n某天晚上小 G 和小 Y 本打算激情 CF 但过掉两题就下班了，然后他们准备玩一个游戏。", "description": "给定一棵有 $n$ 个节点的无根树，边带权，树上有一个起始节点 $S$ 和一个终止节点 $T$。\n\n有一枚可以沿着边在节点之间移动的棋子，它每次移动花费的硬币数量等于经过的边的权值。\n\n如果当前棋子所在节点为 $u$ 且节点 $v$ 与节点 $u$ 之间连有一条权值为 $w$ 的边，小 G 就能花费 $w$ 个硬币把棋子移动到节点 $v$。游戏开始时棋子位于节点 $S$，我们的小 G 要控制棋子移动到节点 $T$。\n\n由于曾经有人告诉小 G 玩某游戏不开挂等于没玩，小 G 决定开挂。他的外挂可以花费 $k$ 个硬币把棋子从当前节点传送到任意一个**没有和当前节点连边**的节点，小 G 只能用这个外挂至多一次。\n\n正义的小 Y 不能坐视不管，在小 G 开始行动之前，小 Y 可以封锁至多 $m$ 条可能的传送路线。假设小 Y 封锁了从节点 $x$ 向节点 $y$ 的传送路线，小 G 把棋子从节点 $x$ 传送到节点 $y$ 花费的硬币数量就会变成 $10^9$。由于外挂功能强大，小 G 知道小 Y 都封锁了哪些路线。**请注意传送路线是单向的，封锁节点 $x$ 向节点 $y$ 的传送路线不影响小 G 从节点 $y$ 向节点 $x$ 传送。**\n\n有趣的是，游戏中小 G 不仅负责控制棋子移动到节点 $T$，还想**最小化**花费的硬币数量；而小 Y 想要**最大化**小  G 花费的硬币数量。\n\n如果两人都采取最优策略，小 G 总共会花掉多少硬币？", "inputFormat": "第一行输入五个整数 $n,m,k,S,T$。\n\n接下来 $n-1$ 行，第 $i$ 行输入三个正整数 $u_i,v_i,w_i$ 表示节点 $u_i$ 和节点 $v_i$ 之间有一条边权为 $w_i$ 的边。", "outputFormat": "输出一行一个整数，表示在两人都采取最优策略的情况下小 G 花费的硬币数量。", "hint": "**「样例解释 #1」**\n\n![example](https://cdn.luogu.com.cn/upload/image_hosting/1u16xc9r.png)\n\n给出一种可能发生的情况：小 Y 封锁节点 $1$ 向节点 $2$ 的传送路线和节点 $4$ 向节点 $2$ 的传送路线。\n\n小 G 控制棋子从初始节点到达节点 $4$，从节点 $4$ 传送到节点 $3$ 后再到达终止节点，总共花费 $14$ 个硬币。\n\n**「数据范围」**\n\n**本题采用捆绑测试。**\n\n|Subtask|$n\\leq$|$m \\leq$|特殊性质|分值|\n|:---:|:---:|:---:|:---:|:---:|\n|**#1**|$1000$|$10^5$|无|$10$|\n|**#2**|$10^5$|$0$|无|$10$|\n|**#3**|$10^5$|$10^5$|无|$10$|\n|**#4**|$10^5$|$10^9$|A|$15$|\n|**#5**|$10^5$|$10^9$|B|$15$|\n|**#6**|$10^5$|$10^9$|无|$40$|\n\n- 特殊性质 A：保证 $k=10^9$。\n- 特殊性质 B：保证 $k=0$。\n\n对于所有测试数据，$2 \\leq n \\leq 10^5$，$0 \\leq m,k \\leq 10^9$，$1 \\leq S,T,u_i,v_i \\leq n$，$1 \\leq w_i \\leq 10^9$，$S \\neq T$，$u_i \\neq v_i$。节点的编号是从 $1$ 到 $n$ 的整数。\n\n2024 年 8 月 4 日：将样例置于 Subtask #0。", "locale": "zh-CN", "translations": {"en": {"title": "『FLA - I』Magical Tree in the Courtyard", "background": "![zuzong](https://cdn.luogu.com.cn/upload/image_hosting/6zbja7sn.png)\n\n> Glz: The upper bound is 4e10\\\n> Ycy: Wow\\\n> Ycy: Ancestor\n\nOne night, Glz and Ycy participated in a Codeforces contest. However, they only solved two problems, and after that they decided to play a game.", "description": "In the game, Glz is given an unrooted tree with $n$ nodes, with a starting node $S$ and a destination node $T$. Each of the edges has an integer weight.\n\nThere is a piece that can be moved between nodes along the edges, with each move costing a number of coins equal to the weight of the edge it passes through.\n\nThat is, if there exists an edge connecting nodes $x$ and $y$ with an edge of weight $w$, then Glz can choose to move the piece from $x$ to $y$, paying $w$ coins. At the beginning of the game the piece is at node $S$. Glz needs to make the piece at node $T$ eventually after some moves.\n\nSince Glz was once told that playing a game without using a plug-in is the same as not playing, Glz decides to use a plug-in. Using this plug-in he can spend $k$ coins on moving a piece from the current node to any node **not adjacent** to the current node. However, Glz can only use this plug-in at most once.\n\nThe righteous Ycy cannot sit idly by. Before Glz makes his move, Ycy can block up to $m$ possible teleportation routes. If Ycy blocks the teleportation route from node $x$ to node $y$, the number of coins that it takes for Glz to teleport a piece from node $x$ to node $y$ becomes exactly $10^9$ coins. Due to the power of the plug-in, Glz knows which routes Ycy has blocked after his moving process begins. **Note that the blocking procedure is unidirectional, that is, blocking the teleportation route from node $x$ to node $y$ does not affect Glz's teleportation from node $y$ to node $x$.**\n\nInterestingly, during the game, Glz wants to **minimize** the number of coins spent, while Ycy is trying to **maximize** the number of coins spent.\n\nIf both of them adopt their optimal strategy, how many coins will Glz spend in total?", "inputFormat": "The first line of input contains five integers $n$, $m$, $k$, $S$ and $T$ — the number of nodes on the tree, the maximum teleportation routes that can be blocked, the coins that using the plug-in costs, the index of the starting node and the index of the destination node.\n\nThen $n - 1$ lines follow, each line contains three integers $u_i$, $v_i$, $w_i$, representing an edge on the tree connecting nodes $u_i$ and $v_i$, with a weight of $w_i$.", "outputFormat": "Output a single line containing an integer, which denotes the coins that Glz would spend, in the case where both of them adopt their optimal strategy.", "hint": "**「Sample Explanation #1」**\n\n![example](https://cdn.luogu.com.cn/upload/image_hosting/1u16xc9r.png)\n\nIn a possible scenario, Ycy blocks the teleportation routes from node $1$ to node $2$ and from node $4$ to node $2$.\n\nGlz moves the piece from node $1$ to node $4$, and from node $4$ he teleports to node $3$, and then moving to node $2$, spending a total of $14$ coins.\n\n**「Constraints」**\n\n**Subtasks are used in this problem.**\n\n| Subtask Id | $n \\leq$ | $m \\leq$ | Special Properties | Score |\n| :--------: | :------: | :------: | :--------------: | :---: |\n| **#1** | $1000$ | $10^5$| No | $10$ |\n| **#2** | $10^5$ | $0$ | No | $10$ |\n| **#3** | $10^5$ | $10^5$ | No | $10$ |\n| **#4** | $10^5$ | $10^9$ | A | $15$ |\n| **#5** | $10^5$ | $10^9$ | B | $15$ |\n| **#6** | $10^5$ | $10^9$ | No | $40$ |\n\n- Special Property A: $k = 10^9$.\n- Special Property B: $k = 0$.\n\nFor all tests, it is guaranteed that $2 \\leq n \\leq 10^5$, $0 \\leq m,k \\leq 10^9$, $1 \\leq S,T,u_i,v_i \\leq n$, $1 \\leq w_i \\leq 10^9$, $S \\neq T$, $u_i \\neq v_i$. Nodes are numbered from $1$ to $n$.", "locale": "en"}, "zh-CN": {"title": "『FLA - I』庭中有奇树", "background": "![zuzong](https://cdn.luogu.com.cn/upload/image_hosting/6zbja7sn.png)\n\n某天晚上小 G 和小 Y 本打算激情 CF 但过掉两题就下班了，然后他们准备玩一个游戏。", "description": "给定一棵有 $n$ 个节点的无根树，边带权，树上有一个起始节点 $S$ 和一个终止节点 $T$。\n\n有一枚可以沿着边在节点之间移动的棋子，它每次移动花费的硬币数量等于经过的边的权值。\n\n如果当前棋子所在节点为 $u$ 且节点 $v$ 与节点 $u$ 之间连有一条权值为 $w$ 的边，小 G 就能花费 $w$ 个硬币把棋子移动到节点 $v$。游戏开始时棋子位于节点 $S$，我们的小 G 要控制棋子移动到节点 $T$。\n\n由于曾经有人告诉小 G 玩某游戏不开挂等于没玩，小 G 决定开挂。他的外挂可以花费 $k$ 个硬币把棋子从当前节点传送到任意一个**没有和当前节点连边**的节点，小 G 只能用这个外挂至多一次。\n\n正义的小 Y 不能坐视不管，在小 G 开始行动之前，小 Y 可以封锁至多 $m$ 条可能的传送路线。假设小 Y 封锁了从节点 $x$ 向节点 $y$ 的传送路线，小 G 把棋子从节点 $x$ 传送到节点 $y$ 花费的硬币数量就会变成 $10^9$。由于外挂功能强大，小 G 知道小 Y 都封锁了哪些路线。**请注意传送路线是单向的，封锁节点 $x$ 向节点 $y$ 的传送路线不影响小 G 从节点 $y$ 向节点 $x$ 传送。**\n\n有趣的是，游戏中小 G 不仅负责控制棋子移动到节点 $T$，还想**最小化**花费的硬币数量；而小 Y 想要**最大化**小  G 花费的硬币数量。\n\n如果两人都采取最优策略，小 G 总共会花掉多少硬币？", "inputFormat": "第一行输入五个整数 $n,m,k,S,T$。\n\n接下来 $n-1$ 行，第 $i$ 行输入三个正整数 $u_i,v_i,w_i$ 表示节点 $u_i$ 和节点 $v_i$ 之间有一条边权为 $w_i$ 的边。", "outputFormat": "输出一行一个整数，表示在两人都采取最优策略的情况下小 G 花费的硬币数量。", "hint": "**「样例解释 #1」**\n\n![example](https://cdn.luogu.com.cn/upload/image_hosting/1u16xc9r.png)\n\n给出一种可能发生的情况：小 Y 封锁节点 $1$ 向节点 $2$ 的传送路线和节点 $4$ 向节点 $2$ 的传送路线。\n\n小 G 控制棋子从初始节点到达节点 $4$，从节点 $4$ 传送到节点 $3$ 后再到达终止节点，总共花费 $14$ 个硬币。\n\n**「数据范围」**\n\n**本题采用捆绑测试。**\n\n|Subtask|$n\\leq$|$m \\leq$|特殊性质|分值|\n|:---:|:---:|:---:|:---:|:---:|\n|**#1**|$1000$|$10^5$|无|$10$|\n|**#2**|$10^5$|$0$|无|$10$|\n|**#3**|$10^5$|$10^5$|无|$10$|\n|**#4**|$10^5$|$10^9$|A|$15$|\n|**#5**|$10^5$|$10^9$|B|$15$|\n|**#6**|$10^5$|$10^9$|无|$40$|\n\n- 特殊性质 A：保证 $k=10^9$。\n- 特殊性质 B：保证 $k=0$。\n\n对于所有测试数据，$2 \\leq n \\leq 10^5$，$0 \\leq m,k \\leq 10^9$，$1 \\leq S,T,u_i,v_i \\leq n$，$1 \\leq w_i \\leq 10^9$，$S \\neq T$，$u_i \\neq v_i$。节点的编号是从 $1$ 到 $n$ 的整数。\n\n2024 年 8 月 4 日：将样例置于 Subtask #0。", "locale": "zh-CN"}}}
{"pid": "P10839", "type": "P", "difficulty": 1, "samples": [["1 1 1 3", "Yes"], ["5 2 9 27", "Yes"], ["1 1 4 514", "No"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "O2优化", "枚举", "梦熊比赛"], "title": "【MX-J2-T0】Turtle and Equations", "background": "原题链接：<https://oier.team/problems/J2A>。", "description": "给你四个正整数 $a, b, c, d$。\n\n现在你有一条算式 $(a\\ \\Box\\ b)\\ \\Box\\ c$。你需要判断能否在两个方框内分别填入三种运算符 $+, -, \\times$ 之一（运算符可以重复使用），使得算式运算的结果等于 $d$。", "inputFormat": "第一行包含四个正整数 $a, b, c, d$。", "outputFormat": "如果能使得运算结果等于 $d$，输出 `Yes`，否则输出 `No`。", "hint": "#### 【样例解释 #1】\n\n因为 $(1 + 1) + 1 = 3$，可以在第一个方框内填入 $+$，第二个方框内填入 $+$。\n\n#### 【样例解释 #2】\n\n因为 $(5 - 2) \\times 9 = 27$，可以在第一个方框内填入 $-$，第二个方框内填入 $\\times$。\n\n#### 【样例解释 #3】\n\n无论填什么运算符都不能使得算式的结果为 $514$。\n\n#### 【数据范围】\n\n对于所有数据，满足 $1 \\le a, b, c \\le 10$，$1 \\le d \\le 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J2-T0】Turtle and Equations", "background": "原题链接：<https://oier.team/problems/J2A>。", "description": "给你四个正整数 $a, b, c, d$。\n\n现在你有一条算式 $(a\\ \\Box\\ b)\\ \\Box\\ c$。你需要判断能否在两个方框内分别填入三种运算符 $+, -, \\times$ 之一（运算符可以重复使用），使得算式运算的结果等于 $d$。", "inputFormat": "第一行包含四个正整数 $a, b, c, d$。", "outputFormat": "如果能使得运算结果等于 $d$，输出 `Yes`，否则输出 `No`。", "hint": "#### 【样例解释 #1】\n\n因为 $(1 + 1) + 1 = 3$，可以在第一个方框内填入 $+$，第二个方框内填入 $+$。\n\n#### 【样例解释 #2】\n\n因为 $(5 - 2) \\times 9 = 27$，可以在第一个方框内填入 $-$，第二个方框内填入 $\\times$。\n\n#### 【样例解释 #3】\n\n无论填什么运算符都不能使得算式的结果为 $514$。\n\n#### 【数据范围】\n\n对于所有数据，满足 $1 \\le a, b, c \\le 10$，$1 \\le d \\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P10840", "type": "P", "difficulty": 2, "samples": [["2\n1 2\n", "1\n"], ["3\n1 1 1\n", "0\n"], ["4\n1 1 45 14\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-J2-T1】Turtle and Sequences", "background": "原题链接：<https://oier.team/problems/J2B>。", "description": "给你一个序列 $a_1, a_2, \\ldots, a_n$。你可以对这个序列进行若干次操作。\n\n设一次操作前序列长度为 $m$，那么这次操作你可以选择一个整数 $i$ 使得 $1 \\le i \\le m - 1$ 且 $a_i \\ne a_{i + 1}$，删除 $a_{i + 1}$ 并把 $a_i$ 的值设成**任意整数**。\n\n求你最多能进行多少次操作。", "inputFormat": "第一行包含一个正整数 $n$，表示序列的初始长度。\n\n第二行包含 $n$ 个正整数 $a_1, a_2, \\ldots, a_n$。", "outputFormat": "一行一个非负整数，表示最多能进行的操作次数。", "hint": "#### 【样例解释 #1】\n\n可以选择 $i = 1$，删除 $a_2$ 后把 $a_1$ 的值设成 $3$。此时 $a = [3]$，无法再进行任何操作。所以答案是 $1$。\n\n#### 【样例解释 #2】\n\n无法进行任何操作，所以答案是 $0$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | 分值 | $n \\le$ | 特殊性质 | 子任务依赖 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $34$ | $2$ | 无 | 无 |\n| $2$ | $19$ | $10^5$ | $a_1 = a_2 = \\cdots = a_n$ | 无 |\n| $3$ | $47$ | $10^5$ | 无 | $1, 2$ |\n\n对于所有数据，满足 $1 \\le n \\le 10^5$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J2-T1】Turtle and Sequences", "background": "原题链接：<https://oier.team/problems/J2B>。", "description": "给你一个序列 $a_1, a_2, \\ldots, a_n$。你可以对这个序列进行若干次操作。\n\n设一次操作前序列长度为 $m$，那么这次操作你可以选择一个整数 $i$ 使得 $1 \\le i \\le m - 1$ 且 $a_i \\ne a_{i + 1}$，删除 $a_{i + 1}$ 并把 $a_i$ 的值设成**任意整数**。\n\n求你最多能进行多少次操作。", "inputFormat": "第一行包含一个正整数 $n$，表示序列的初始长度。\n\n第二行包含 $n$ 个正整数 $a_1, a_2, \\ldots, a_n$。", "outputFormat": "一行一个非负整数，表示最多能进行的操作次数。", "hint": "#### 【样例解释 #1】\n\n可以选择 $i = 1$，删除 $a_2$ 后把 $a_1$ 的值设成 $3$。此时 $a = [3]$，无法再进行任何操作。所以答案是 $1$。\n\n#### 【样例解释 #2】\n\n无法进行任何操作，所以答案是 $0$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | 分值 | $n \\le$ | 特殊性质 | 子任务依赖 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $34$ | $2$ | 无 | 无 |\n| $2$ | $19$ | $10^5$ | $a_1 = a_2 = \\cdots = a_n$ | 无 |\n| $3$ | $47$ | $10^5$ | 无 | $1, 2$ |\n\n对于所有数据，满足 $1 \\le n \\le 10^5$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10841", "type": "P", "difficulty": 2, "samples": [["4\n3\nabc\n5\naabbb\n6\naaaaaa\n10\npppqqppppq\n", "3\n3\n4\n7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "O2优化", "梦熊比赛"], "title": "【MX-J2-T2】Turtle and Strings", "background": "原题链接：<https://oier.team/problems/J2C>。", "description": "给你一个仅由小写字母组成的字符串 $s$。\n\n一个字符串序列 $t_1, t_2, \\ldots, t_k$ 是合法的当且仅当：\n\n- $s = t_1 + t_2 + \\cdots + t_k$，此处 $+$ 为字符串拼接；\n- $\\forall 1 \\le i \\le k - 1, t_i \\ne t_{i + 1}$。\n\n求合法的字符串序列的长度的最大值。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含一个正整数 $n$，表示字符串的长度。\n\n第二行包含一个长度为 $n$ 的仅由小写字母组成的字符串 $s$。", "outputFormat": "对于每组数据，输出一行一个整数，表示合法的字符串序列的长度的最大值。", "hint": "#### 【样例解释】\n\n在第一组数据中，一个合法且长度最大的字符串序列为 $[\\texttt{a}, \\texttt{b}, \\texttt{c}]$。\n\n在第二组数据中，一个合法且长度最大的字符串序列为 $[\\texttt{a}, \\texttt{abb}, \\texttt{b}]$。\n\n在第三组数据中，一个合法且长度最大的字符串序列为 $[\\texttt{a}, \\texttt{aa}, \\texttt{a}, \\texttt{aa}]$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | 分值 | $n \\le$ | $\\sum n \\le$ | 特殊性质 | 子任务依赖 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $18$ | $9$ | $10^4$ | 无 | 无 |\n| $2$ | $21$ | $50$ | $10^3$ | 无 | $1$ |\n| $3$ | $12$ | $10^6$ | $10^6$ | $s_1 = s_2 = \\cdots = s_n$ | 无 |\n| $4$ | $23$ | $10^6$ | $10^6$ | **恰好**存在一个位置 $1 \\le i \\le n - 1$ 使得 $s_i \\ne s_{i + 1}$ | 无 |\n| $5$ | $26$ | $10^6$ | $10^6$ | 无 | $1, 2, 3, 4$ |\n\n对于所有数据，满足 $1 \\le T \\le 10^5$，$1 \\le n, \\sum n \\le 10^6$，$s$ 仅由小写字母组成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J2-T2】Turtle and Strings", "background": "原题链接：<https://oier.team/problems/J2C>。", "description": "给你一个仅由小写字母组成的字符串 $s$。\n\n一个字符串序列 $t_1, t_2, \\ldots, t_k$ 是合法的当且仅当：\n\n- $s = t_1 + t_2 + \\cdots + t_k$，此处 $+$ 为字符串拼接；\n- $\\forall 1 \\le i \\le k - 1, t_i \\ne t_{i + 1}$。\n\n求合法的字符串序列的长度的最大值。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含一个正整数 $n$，表示字符串的长度。\n\n第二行包含一个长度为 $n$ 的仅由小写字母组成的字符串 $s$。", "outputFormat": "对于每组数据，输出一行一个整数，表示合法的字符串序列的长度的最大值。", "hint": "#### 【样例解释】\n\n在第一组数据中，一个合法且长度最大的字符串序列为 $[\\texttt{a}, \\texttt{b}, \\texttt{c}]$。\n\n在第二组数据中，一个合法且长度最大的字符串序列为 $[\\texttt{a}, \\texttt{abb}, \\texttt{b}]$。\n\n在第三组数据中，一个合法且长度最大的字符串序列为 $[\\texttt{a}, \\texttt{aa}, \\texttt{a}, \\texttt{aa}]$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | 分值 | $n \\le$ | $\\sum n \\le$ | 特殊性质 | 子任务依赖 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $18$ | $9$ | $10^4$ | 无 | 无 |\n| $2$ | $21$ | $50$ | $10^3$ | 无 | $1$ |\n| $3$ | $12$ | $10^6$ | $10^6$ | $s_1 = s_2 = \\cdots = s_n$ | 无 |\n| $4$ | $23$ | $10^6$ | $10^6$ | **恰好**存在一个位置 $1 \\le i \\le n - 1$ 使得 $s_i \\ne s_{i + 1}$ | 无 |\n| $5$ | $26$ | $10^6$ | $10^6$ | 无 | $1, 2, 3, 4$ |\n\n对于所有数据，满足 $1 \\le T \\le 10^5$，$1 \\le n, \\sum n \\le 10^6$，$s$ 仅由小写字母组成。", "locale": "zh-CN"}}}
{"pid": "P10842", "type": "P", "difficulty": 4, "samples": [["4\n1 2\n1 3\n1 4\n", "9\n"], ["6\n1 2\n2 3\n3 4\n4 5\n5 6\n", "70\n"], ["10\n1 2\n1 3\n1 4\n2 5\n3 6\n2 7\n4 8\n8 9\n9 10\n", "536\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-J2-T3】Piggy and Trees", "background": "原题链接：<https://oier.team/problems/J2D>。", "description": "给你一棵 $n$ 个结点的树。\n\n定义 $f(u, v, i)$ 为，在所有满足 $^\\dagger\\text{dis}(u, x) + \\text{dis}(v, x) = \\text{dis}(u, v)$ 的点 $x$ 中，$\\text{dis}(x, i)$ 的最小值。\n\n求 $\\sum\\limits_{u = 1}^n \\sum\\limits_{v = u + 1}^n \\sum\\limits_{i = 1}^n f(u, v, i)$ 对 $10^9 + 7$ 取模的值。\n\n$^\\dagger\\text{dis}(u, v)$ 为树上 $u, v$ 两点的路径长度。特别地，$\\text{dis}(u, u) = 0$。", "inputFormat": "第一行包含一个整数 $n$，表示树的结点数。\n\n之后的 $n - 1$ 行中的第 $i$ 行包含两个整数 $u_i, v_i$，表示树上的一条边。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "#### 【样例解释】\n\n在样例 $1$ 中，所有非 $0$ 的 $f(u, v, i)$ 的值为：\n\n- $f(1, 2, 3) = 1$；\n- $f(1, 2, 4) = 1$；\n- $f(1, 3, 2) = 1$；\n- $f(1, 3, 4) = 1$；\n- $f(1, 4, 2) = 1$；\n- $f(1, 4, 3) = 1$；\n- $f(2, 3, 4) = 1$；\n- $f(2, 4, 3) = 1$；\n- $f(3, 4, 2) = 1$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | 分值 | $n \\le$ | 特殊性质 | 子任务依赖 | \n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $8$ | $50$ | 无 | 无 |\n| $2$ | $15$ | $400$ | 无 | $1$ |\n| $3$ | $24$ | $3000$ | 无 | $1, 2$ |\n| $4$ | $17$ | $2 \\cdot 10^5$ | $u_i = i, v_i = i + 1$ | 无 |\n| $5$ | $36$ | $2 \\cdot 10^5$ | 无 | $1, 2, 3, 4$ |\n\n对于所有数据，满足 $2 \\le n \\le 2 \\cdot 10^5$，输入的图是一棵树。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J2-T3】Piggy and Trees", "background": "原题链接：<https://oier.team/problems/J2D>。", "description": "给你一棵 $n$ 个结点的树。\n\n定义 $f(u, v, i)$ 为，在所有满足 $^\\dagger\\text{dis}(u, x) + \\text{dis}(v, x) = \\text{dis}(u, v)$ 的点 $x$ 中，$\\text{dis}(x, i)$ 的最小值。\n\n求 $\\sum\\limits_{u = 1}^n \\sum\\limits_{v = u + 1}^n \\sum\\limits_{i = 1}^n f(u, v, i)$ 对 $10^9 + 7$ 取模的值。\n\n$^\\dagger\\text{dis}(u, v)$ 为树上 $u, v$ 两点的路径长度。特别地，$\\text{dis}(u, u) = 0$。", "inputFormat": "第一行包含一个整数 $n$，表示树的结点数。\n\n之后的 $n - 1$ 行中的第 $i$ 行包含两个整数 $u_i, v_i$，表示树上的一条边。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "#### 【样例解释】\n\n在样例 $1$ 中，所有非 $0$ 的 $f(u, v, i)$ 的值为：\n\n- $f(1, 2, 3) = 1$；\n- $f(1, 2, 4) = 1$；\n- $f(1, 3, 2) = 1$；\n- $f(1, 3, 4) = 1$；\n- $f(1, 4, 2) = 1$；\n- $f(1, 4, 3) = 1$；\n- $f(2, 3, 4) = 1$；\n- $f(2, 4, 3) = 1$；\n- $f(3, 4, 2) = 1$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | 分值 | $n \\le$ | 特殊性质 | 子任务依赖 | \n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $8$ | $50$ | 无 | 无 |\n| $2$ | $15$ | $400$ | 无 | $1$ |\n| $3$ | $24$ | $3000$ | 无 | $1, 2$ |\n| $4$ | $17$ | $2 \\cdot 10^5$ | $u_i = i, v_i = i + 1$ | 无 |\n| $5$ | $36$ | $2 \\cdot 10^5$ | 无 | $1, 2, 3, 4$ |\n\n对于所有数据，满足 $2 \\le n \\le 2 \\cdot 10^5$，输入的图是一棵树。", "locale": "zh-CN"}}}
{"pid": "P10843", "type": "P", "difficulty": 5, "samples": [["3\n2\n1 0\n5\n2 3 0 4 1\n10\n0 5 9 7 3 1 6 4 8 2\n", "0\n1\n5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "O2优化", "前缀和", "差分", "双指针 two-pointer", "梦熊比赛"], "title": "【MX-J2-T4】Turtle and Cycles", "background": "原题链接：<https://oier.team/problems/J2E>。", "description": "给你一个环形的 $0 \\sim n - 1$ 的**排列** $a_0, a_1, \\ldots, a_{n - 1}$。\n\n一次操作你可以选择一个整数 $i \\in [0, n - 1]$，把 $a_i$ 赋值成 $a_{(i - 1) \\bmod n} + a_{(i + 1) \\bmod n} - a_i$。\n\n一个位置 $i \\in [0, n - 1]$ 是好的当且仅当 $a_{(i - 1) \\bmod n} < a_i$ 且 $a_{(i + 1) \\bmod n} < a_i$。\n\n环形序列 $a$ 是好的当且仅当存在**恰好**一个位置 $i \\in [0, n - 1]$ 使得位置 $i$ 是好的。\n\n求至少要进行多少次操作能让 $a$ 变成好的。可以证明一定有解。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个非负整数 $a_0, a_1, \\ldots, a_{n - 1}$。", "outputFormat": "对于每组数据，输出一行一个整数，表示最少要进行的操作次数。", "hint": "#### 【样例解释】\n\n在第一组数据中，初始序列恰好存在一个好的位置 $i = 0$，所以答案为 $0$。\n\n在第二组数据中，可以选择 $i = 2$ 操作，操作后序列变为 $a = [2, 3, 7, 4, 1]$。此时序列恰好存在一个好的位置 $i = 2$，所以答案为 $1$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | 分值 | $n \\le$ | $\\sum n \\le$ | 特殊性质 | 子任务依赖 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $19$ | $6$ | $10^4$ | 无 | 无 |\n| $2$ | $14$ | $12$ | $10^4$ | 无 | $1$ |\n| $3$ | $27$ | $2 \\cdot 10^3$ | $10^4$ | 无 | $1, 2$ |\n| $4$ | $2$ | $2 \\cdot 10^5$ | $2 \\cdot 10^5$ | $a_i = i$ | 无 |\n| $5$ | $38$ | $2 \\cdot 10^5$ | $2 \\cdot 10^5$ | 无 | $1, 2, 3, 4$ |\n\n对于所有数据，满足 $1 \\le T \\le 10^4$，$2 \\le n, \\sum n \\le 2 \\cdot 10^5$，$0 \\le a_i \\le n - 1$，$a$ 是一个 $0 \\sim n - 1$ 的排列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J2-T4】Turtle and Cycles", "background": "原题链接：<https://oier.team/problems/J2E>。", "description": "给你一个环形的 $0 \\sim n - 1$ 的**排列** $a_0, a_1, \\ldots, a_{n - 1}$。\n\n一次操作你可以选择一个整数 $i \\in [0, n - 1]$，把 $a_i$ 赋值成 $a_{(i - 1) \\bmod n} + a_{(i + 1) \\bmod n} - a_i$。\n\n一个位置 $i \\in [0, n - 1]$ 是好的当且仅当 $a_{(i - 1) \\bmod n} < a_i$ 且 $a_{(i + 1) \\bmod n} < a_i$。\n\n环形序列 $a$ 是好的当且仅当存在**恰好**一个位置 $i \\in [0, n - 1]$ 使得位置 $i$ 是好的。\n\n求至少要进行多少次操作能让 $a$ 变成好的。可以证明一定有解。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个非负整数 $a_0, a_1, \\ldots, a_{n - 1}$。", "outputFormat": "对于每组数据，输出一行一个整数，表示最少要进行的操作次数。", "hint": "#### 【样例解释】\n\n在第一组数据中，初始序列恰好存在一个好的位置 $i = 0$，所以答案为 $0$。\n\n在第二组数据中，可以选择 $i = 2$ 操作，操作后序列变为 $a = [2, 3, 7, 4, 1]$。此时序列恰好存在一个好的位置 $i = 2$，所以答案为 $1$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | 分值 | $n \\le$ | $\\sum n \\le$ | 特殊性质 | 子任务依赖 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $19$ | $6$ | $10^4$ | 无 | 无 |\n| $2$ | $14$ | $12$ | $10^4$ | 无 | $1$ |\n| $3$ | $27$ | $2 \\cdot 10^3$ | $10^4$ | 无 | $1, 2$ |\n| $4$ | $2$ | $2 \\cdot 10^5$ | $2 \\cdot 10^5$ | $a_i = i$ | 无 |\n| $5$ | $38$ | $2 \\cdot 10^5$ | $2 \\cdot 10^5$ | 无 | $1, 2, 3, 4$ |\n\n对于所有数据，满足 $1 \\le T \\le 10^4$，$2 \\le n, \\sum n \\le 2 \\cdot 10^5$，$0 \\le a_i \\le n - 1$，$a$ 是一个 $0 \\sim n - 1$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P10844", "type": "P", "difficulty": 3, "samples": [["4\n5\n-2\n2\n1\n-3\n2\n", "1"], ["2\n4\n1\n1\n1\n1", "3"], ["2\n5\n1\n-1\n1\n-1\n-1\n", "0"], ["200000\n7\n199999\n199999\n1\n199999\n55\n199999\n55", "3"], ["3\n6\n1\n2\n2\n2\n1\n1\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2024] Infinite Race / 无限赛跑", "background": "Day 1 Problem A.\n\n题面译自 [EGOI2024 infiniterace](https://wiki.egoi2024.nl/tasks/infiniterace/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。", "description": "每年在埃因霍温都会举行一场马拉松。今年，组织者们想出了一个特别的点子，比赛不再在 42 公里后结束，而是无限进行下去！为了简化组织工作，比赛在埃因霍温大学的一个跑道上进行，参赛者在跑道上无限循环。\n\nAnika 很高兴成为 $N$ 名参赛者之一，编号从 $0$ 到 $N - 1$。她很快报名，因此她是参赛者 $0$。她在终点线后起跑，其他参赛者都在她前面。Anika 无法记住她跑了多少圈，但她记得何时超越了某人或何时被某人超越。她至少需要多少次越过终点线？没有人会后退，也不会在终点线上发生超车。此外，参赛者的速度不一定是恒定的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w7djguwq.png)", "inputFormat": "输入的第一行包含一个整数 $N$，表示参赛者的数量。\n\n第二行包含一个整数 $Q$，表示事件的数量。\n\n接下来的 $Q$ 行按比赛过程中发生的顺序描述事件。第 $i$ 行包含一个整数 $x_i$。\n\n- 如果 $x_i > 0$，表示 Anika 超越了参赛者 $x_i$。\n- 如果 $x_i < 0$，表示参赛者 $-x_i$ 超越了 Anika。\n", "outputFormat": "输出一个整数，表示 Anika 至少穿过终点线的次数。\n", "hint": "**样例解释**\n\n在第一个样例中，有 $N = 4$ 名参赛者和 $Q = 5$ 个事件。Anika 首先被参赛者 $2$ 超越，后者现在比她快一整圈。然后她反超 $2$，接着超越 $1$，随后被 $3$ 超越。在此时，Anika 仍然可以在她的第一圈。最后，她再次超越 $2$，为了实现这一点，意味着她至少穿过了终点线一次。\n\n在第二个样例中，除了 Anika 之外只有一个参赛者。Anika 四次超越了另一个参赛者，这意味着 Anika 至少穿过终点线三次。\n\n---\n\n**数据范围**\n\n对于全部数据，$2 \\le N \\le 2\\times 10^5$，$1 \\le Q \\le 2\\times 10^5$，$1 \\le x \\le N - 1$ 或 $-(N - 1) \\le x \\le -1$。\n\n- 子任务一（$29$ 分）：$N=2$。\n- 子任务二（$34$ 分）：$x_i > 0$。\n- 子任务三（$22$ 分）：$N,Q\\le 100$。\n- 子任务四（$15$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2024] Infinite Race / 无限赛跑", "background": "Day 1 Problem A.\n\n题面译自 [EGOI2024 infiniterace](https://wiki.egoi2024.nl/tasks/infiniterace/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。", "description": "每年在埃因霍温都会举行一场马拉松。今年，组织者们想出了一个特别的点子，比赛不再在 42 公里后结束，而是无限进行下去！为了简化组织工作，比赛在埃因霍温大学的一个跑道上进行，参赛者在跑道上无限循环。\n\nAnika 很高兴成为 $N$ 名参赛者之一，编号从 $0$ 到 $N - 1$。她很快报名，因此她是参赛者 $0$。她在终点线后起跑，其他参赛者都在她前面。Anika 无法记住她跑了多少圈，但她记得何时超越了某人或何时被某人超越。她至少需要多少次越过终点线？没有人会后退，也不会在终点线上发生超车。此外，参赛者的速度不一定是恒定的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w7djguwq.png)", "inputFormat": "输入的第一行包含一个整数 $N$，表示参赛者的数量。\n\n第二行包含一个整数 $Q$，表示事件的数量。\n\n接下来的 $Q$ 行按比赛过程中发生的顺序描述事件。第 $i$ 行包含一个整数 $x_i$。\n\n- 如果 $x_i > 0$，表示 Anika 超越了参赛者 $x_i$。\n- 如果 $x_i < 0$，表示参赛者 $-x_i$ 超越了 Anika。\n", "outputFormat": "输出一个整数，表示 Anika 至少穿过终点线的次数。\n", "hint": "**样例解释**\n\n在第一个样例中，有 $N = 4$ 名参赛者和 $Q = 5$ 个事件。Anika 首先被参赛者 $2$ 超越，后者现在比她快一整圈。然后她反超 $2$，接着超越 $1$，随后被 $3$ 超越。在此时，Anika 仍然可以在她的第一圈。最后，她再次超越 $2$，为了实现这一点，意味着她至少穿过了终点线一次。\n\n在第二个样例中，除了 Anika 之外只有一个参赛者。Anika 四次超越了另一个参赛者，这意味着 Anika 至少穿过终点线三次。\n\n---\n\n**数据范围**\n\n对于全部数据，$2 \\le N \\le 2\\times 10^5$，$1 \\le Q \\le 2\\times 10^5$，$1 \\le x \\le N - 1$ 或 $-(N - 1) \\le x \\le -1$。\n\n- 子任务一（$29$ 分）：$N=2$。\n- 子任务二（$34$ 分）：$x_i > 0$。\n- 子任务三（$22$ 分）：$N,Q\\le 100$。\n- 子任务四（$15$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。", "locale": "zh-CN"}}}
{"pid": "P10845", "type": "P", "difficulty": 4, "samples": [["3\n0 3\n1 0\n1 0", "1"], ["5\n0 3\n1 0\n0 1\n2 0\n1 0\n", "3"], ["7\n0 0\n0 0\n1 0\n1 0\n2 0\n3 0\n2 0", "4"], ["6\n2 2\n2 2\n2 2\n2 2\n2 2\n2 2", "2"], ["7\n0 2\n2 0\n1 1\n2 2\n0 0\n0 1\n0 1", "3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2024] Bouquet / 花束制作", "background": "Day 1 Problem B.\n\n题面译自 [EGOI2024 bouquet](https://wiki.egoi2024.nl/tasks/bouquet/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。", "description": "参观了世界上最大的花园之一库肯霍夫后，Lieke 非常喜欢花，因此她决定收集一些路边生长的郁金香来制作一个漂亮的花束。然而，在收集花朵时，她必须遵守荷兰严格的郁金香保护法的一些规定。\n\n沿着道路从左到右有 $N$ 株郁金香，编号从 $0$ 到 $N - 1$。郁金香保护法为郁金香 $i$ 分配了两个整数，$l_i$ 和 $r_i$。如果郁金香 $i$ 被包含在花束中，则郁金香 $i$ 左边紧邻的 $l_i$ 株郁金香和右边紧邻的 $r_i$ 株郁金香不能包含在花束中。注意，如果郁金香 $i$ 左边的郁金香少于 $l_i$ 株，或者右边的郁金香少于 $r_i$ 株，那么该侧所有的郁金香仍然不能包含在花束中（允许溢出）。\n\nLieke 想知道如果她最佳地选择花朵，最多能摘取多少株郁金香。帮她找到这个问题的答案，制作一个漂亮的花束吧！", "inputFormat": "输入的第一行包含一个整数 $N$，表示沿路生长的郁金香数量。\n\n接下来的 $N$ 行描述了郁金香保护法的信息：第 $i$ 行包含两个整数 $l_i$ 和 $r_i$，表示郁金香 $i$ 的保护限制。\n", "outputFormat": "输出一个整数，表示 Lieke 在遵守保护法的情况下可以摘取的最大郁金香数量。\n", "hint": "**样例解释**\n\n在第一个样例中，如果 Lieke 摘取郁金香 $0$，她不能摘取右边的两朵郁金香。摘取郁金香 $1$ 并不禁止她摘取郁金香 $2$，但郁金香 $2$ 禁止她摘取郁金香 $1$，因此她不能同时摘取它们。所以，Lieke 可以摘取的最大花朵数量是 $1$。\n\n在第二个样例中，Lieke 可以摘取的郁金香数量最多是 $3$，获得此结果的方式如图所示。其他摘取郁金香的方式会导致更小的答案。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/94f6sv0n.png)\n\n在第三个样例中，通过摘取郁金香 $0, 1, 3$ 和 $6$ 可以获得最多的 $4$ 朵郁金香。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 2\\times 10^5$，$0\\le l_i,r_i\\le N$。\n\n- 子任务一（$8$ 分）：对于任意 $(i,j)$，$l_i=r_i=l_j=r_j$。\n- 子任务二（$16$ 分）：$r_i=0$。\n- 子任务三（$28$ 分）：$N\\le 1000$。\n- 子任务四（$18$ 分）：$l_i,r_i\\le 2$。\n- 子任务五（$30$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2024] Bouquet / 花束制作", "background": "Day 1 Problem B.\n\n题面译自 [EGOI2024 bouquet](https://wiki.egoi2024.nl/tasks/bouquet/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。", "description": "参观了世界上最大的花园之一库肯霍夫后，Lieke 非常喜欢花，因此她决定收集一些路边生长的郁金香来制作一个漂亮的花束。然而，在收集花朵时，她必须遵守荷兰严格的郁金香保护法的一些规定。\n\n沿着道路从左到右有 $N$ 株郁金香，编号从 $0$ 到 $N - 1$。郁金香保护法为郁金香 $i$ 分配了两个整数，$l_i$ 和 $r_i$。如果郁金香 $i$ 被包含在花束中，则郁金香 $i$ 左边紧邻的 $l_i$ 株郁金香和右边紧邻的 $r_i$ 株郁金香不能包含在花束中。注意，如果郁金香 $i$ 左边的郁金香少于 $l_i$ 株，或者右边的郁金香少于 $r_i$ 株，那么该侧所有的郁金香仍然不能包含在花束中（允许溢出）。\n\nLieke 想知道如果她最佳地选择花朵，最多能摘取多少株郁金香。帮她找到这个问题的答案，制作一个漂亮的花束吧！", "inputFormat": "输入的第一行包含一个整数 $N$，表示沿路生长的郁金香数量。\n\n接下来的 $N$ 行描述了郁金香保护法的信息：第 $i$ 行包含两个整数 $l_i$ 和 $r_i$，表示郁金香 $i$ 的保护限制。\n", "outputFormat": "输出一个整数，表示 Lieke 在遵守保护法的情况下可以摘取的最大郁金香数量。\n", "hint": "**样例解释**\n\n在第一个样例中，如果 Lieke 摘取郁金香 $0$，她不能摘取右边的两朵郁金香。摘取郁金香 $1$ 并不禁止她摘取郁金香 $2$，但郁金香 $2$ 禁止她摘取郁金香 $1$，因此她不能同时摘取它们。所以，Lieke 可以摘取的最大花朵数量是 $1$。\n\n在第二个样例中，Lieke 可以摘取的郁金香数量最多是 $3$，获得此结果的方式如图所示。其他摘取郁金香的方式会导致更小的答案。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/94f6sv0n.png)\n\n在第三个样例中，通过摘取郁金香 $0, 1, 3$ 和 $6$ 可以获得最多的 $4$ 朵郁金香。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 2\\times 10^5$，$0\\le l_i,r_i\\le N$。\n\n- 子任务一（$8$ 分）：对于任意 $(i,j)$，$l_i=r_i=l_j=r_j$。\n- 子任务二（$16$ 分）：$r_i=0$。\n- 子任务三（$28$ 分）：$N\\le 1000$。\n- 子任务四（$18$ 分）：$l_i,r_i\\le 2$。\n- 子任务五（$30$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。", "locale": "zh-CN"}}}
{"pid": "P10846", "type": "P", "difficulty": 6, "samples": [["5 3\n0 1 2 2 1\n0\n1\n2\n3", "2 0"], ["4 2\n0 1 0 0\n0\n0\n1", "3 0"], ["9 3\n0 0 2 1 2 0 2 1 2\n4\n8\n1\n0\n4\n1\n0\n7\n", "4 2"], ["8 3\n0 2 1 2 2 1 1 1\n6\n3\n0\n6\n3\n0\n3", "3 2"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2024] Team Coding / 团队编程", "background": "Day 1 Problem C.\n\n题面译自 [EGOI2024 teamcoding](https://wiki.egoi2024.nl/tasks/teamcoding/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。", "description": "埃因霍温巨型开源研究所（Eindhoven Gigantic Open-Source Institute，EGOI）公司有着非常严格的层级结构。除了 CEO Anneke，公司里的其他 $N - 1$ 名员工每人都有一个唯一的上司，并且层级结构中没有循环。你可以将公司的层级结构看作是以 Anneke 为根的树。由于这是一个多元化的公司，员工使用 $K$ 种不同的编程语言，但每位员工都有一种首选的编程语言。\n\nAnneke 为公司团队准备了一个大型的新项目，她希望能投入尽可能多的资源。为了决定哪个团队来负责这个项目，她执行以下操作：\n\n1. 选择一个人来领导团队。这也将确定项目使用的编程语言。每个在该团队领导下的子树中的员工且首选编程语言与团队领导相同的员工将参与这个项目。\n2. 通过将首选编程语言与团队领导相同的员工调入她的团队来增加参与项目的员工数量。\n\n    为了最大化参与项目的员工数量，她可以多次执行以下调换操作：\n    1. 她选择两名员工：\n        - 一名当前在团队领导的子树中且首选编程语言与团队领导不同的员工。\n        - 一名当前不在此子树中且首选编程语言与团队领导相同的员工。此外，这名员工需要与另一名被选中的员工处于相同的层级，即他们在向 Anneke 报告的链中有相同数量的上司。如果你将公司层级结构看作一棵树，那么这两名员工处于树的同一层级。\n    2. 这两名员工（且**仅**他们）交换公司层级结构中的位置。注意，报告给这两名员工的员工保持不变，只是更改了他们报告的对象。在下面的例子中，选择员工 $4$ 作为团队领导时，我们可以交换员工 $3$ 和 $2$，但不能交换员工 $1$ 和 $8$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k1l3gctp.png)\n\n找出能够参与新项目的最大员工数量，以及实现这一目标所需的最少调换次数。\n", "inputFormat": "输入的第一行包含两个整数，$N$ 和 $K$，分别表示 EGOI 的员工数量和员工可能使用的编程语言的数量。\n\nEGOI 的员工编号从 $0$ 到 $N - 1$，CEO Anneke 的编号为 $0$。下一行包含 $N$ 个整数 $l_i$，其中 $0 \\le l_i < K$，表示员工的首选编程语言。\n\n接下来的 $N - 1$ 行包含公司的结构。第 $i$ 行包含一个整数 $b_i$，其中 $0 \\le b_i < N$，表示第 $i$ 号员工的直接上司。注意，$i$ 的取值范围是 $1$ 到 $N - 1$（包含两端），因为 CEO Anneke 没有上司。\n", "outputFormat": "输出一行包含两个整数，$P$ 和 $S$，表示通过任意次数的调换能够达到的最大参与项目的员工数量（包括团队领导）和实现这一目标所需的**最少**调换次数。\n", "hint": "**样例解释**\n\n在前两个样例中，公司结构如下所示，其中模式编码了编程语言（0 = “条纹”，1 = “点状”，2 = “纯色”）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gzcdvyla.png)\n\n在样例 1 中，我们可以选择员工 $1$ 作为团队负责人，员工 $4$ 喜欢相同的编程语言，并且没有可能的交换来改善这一点。在样例 2 中，整个公司有 $3$ 名员工喜欢语言 $0$，这也是 Anneke 喜欢的语言，所以选择 Anneke 作为团队负责人会形成一个大小为 $3$ 的团队，不需要进行交换。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/te28oaxx.png)\n\n在样例 3 中，我们选择员工 $4$ 作为团队负责人，然后可以让员工 $1$ 和 $8$ 以及 $2$ 和 $3$ 交换团队，从而得到总共 $4$ 名员工喜欢与 $4$ 相同的语言，即语言 $2$（纯色）。在样例 4 中，选择员工 $6$ 作为团队负责人，并交换员工 $4$ 和 $7$ 以及 $1$ 和 $5$ 可以获得最大分数。注意，我们不能在选择团队负责人之前交换员工 $6$ 和 $3$ 以获得分数 $4$，因为我们必须首先确定团队负责人。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 10^5$，$1\\le K\\le N$。\n\n- 子任务一（$12$ 分）：第 $i$ 名员工的上司是 $i - 1$。\n- 子任务二（$19$ 分）：$K\\le 2$。\n- 子任务三（$27$ 分）：对于每种编程语言，最多有 $10$ 名员工首选它。\n- 子任务四（$23$ 分）：$N\\le 2000$。\n- 子任务五（$19$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2024] Team Coding / 团队编程", "background": "Day 1 Problem C.\n\n题面译自 [EGOI2024 teamcoding](https://wiki.egoi2024.nl/tasks/teamcoding/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。", "description": "埃因霍温巨型开源研究所（Eindhoven Gigantic Open-Source Institute，EGOI）公司有着非常严格的层级结构。除了 CEO Anneke，公司里的其他 $N - 1$ 名员工每人都有一个唯一的上司，并且层级结构中没有循环。你可以将公司的层级结构看作是以 Anneke 为根的树。由于这是一个多元化的公司，员工使用 $K$ 种不同的编程语言，但每位员工都有一种首选的编程语言。\n\nAnneke 为公司团队准备了一个大型的新项目，她希望能投入尽可能多的资源。为了决定哪个团队来负责这个项目，她执行以下操作：\n\n1. 选择一个人来领导团队。这也将确定项目使用的编程语言。每个在该团队领导下的子树中的员工且首选编程语言与团队领导相同的员工将参与这个项目。\n2. 通过将首选编程语言与团队领导相同的员工调入她的团队来增加参与项目的员工数量。\n\n    为了最大化参与项目的员工数量，她可以多次执行以下调换操作：\n    1. 她选择两名员工：\n        - 一名当前在团队领导的子树中且首选编程语言与团队领导不同的员工。\n        - 一名当前不在此子树中且首选编程语言与团队领导相同的员工。此外，这名员工需要与另一名被选中的员工处于相同的层级，即他们在向 Anneke 报告的链中有相同数量的上司。如果你将公司层级结构看作一棵树，那么这两名员工处于树的同一层级。\n    2. 这两名员工（且**仅**他们）交换公司层级结构中的位置。注意，报告给这两名员工的员工保持不变，只是更改了他们报告的对象。在下面的例子中，选择员工 $4$ 作为团队领导时，我们可以交换员工 $3$ 和 $2$，但不能交换员工 $1$ 和 $8$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k1l3gctp.png)\n\n找出能够参与新项目的最大员工数量，以及实现这一目标所需的最少调换次数。\n", "inputFormat": "输入的第一行包含两个整数，$N$ 和 $K$，分别表示 EGOI 的员工数量和员工可能使用的编程语言的数量。\n\nEGOI 的员工编号从 $0$ 到 $N - 1$，CEO Anneke 的编号为 $0$。下一行包含 $N$ 个整数 $l_i$，其中 $0 \\le l_i < K$，表示员工的首选编程语言。\n\n接下来的 $N - 1$ 行包含公司的结构。第 $i$ 行包含一个整数 $b_i$，其中 $0 \\le b_i < N$，表示第 $i$ 号员工的直接上司。注意，$i$ 的取值范围是 $1$ 到 $N - 1$（包含两端），因为 CEO Anneke 没有上司。\n", "outputFormat": "输出一行包含两个整数，$P$ 和 $S$，表示通过任意次数的调换能够达到的最大参与项目的员工数量（包括团队领导）和实现这一目标所需的**最少**调换次数。\n", "hint": "**样例解释**\n\n在前两个样例中，公司结构如下所示，其中模式编码了编程语言（0 = “条纹”，1 = “点状”，2 = “纯色”）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gzcdvyla.png)\n\n在样例 1 中，我们可以选择员工 $1$ 作为团队负责人，员工 $4$ 喜欢相同的编程语言，并且没有可能的交换来改善这一点。在样例 2 中，整个公司有 $3$ 名员工喜欢语言 $0$，这也是 Anneke 喜欢的语言，所以选择 Anneke 作为团队负责人会形成一个大小为 $3$ 的团队，不需要进行交换。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/te28oaxx.png)\n\n在样例 3 中，我们选择员工 $4$ 作为团队负责人，然后可以让员工 $1$ 和 $8$ 以及 $2$ 和 $3$ 交换团队，从而得到总共 $4$ 名员工喜欢与 $4$ 相同的语言，即语言 $2$（纯色）。在样例 4 中，选择员工 $6$ 作为团队负责人，并交换员工 $4$ 和 $7$ 以及 $1$ 和 $5$ 可以获得最大分数。注意，我们不能在选择团队负责人之前交换员工 $6$ 和 $3$ 以获得分数 $4$，因为我们必须首先确定团队负责人。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 10^5$，$1\\le K\\le N$。\n\n- 子任务一（$12$ 分）：第 $i$ 名员工的上司是 $i - 1$。\n- 子任务二（$19$ 分）：$K\\le 2$。\n- 子任务三（$27$ 分）：对于每种编程语言，最多有 $10$ 名员工首选它。\n- 子任务四（$23$ 分）：$N\\le 2000$。\n- 子任务五（$19$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。", "locale": "zh-CN"}}}
{"pid": "P10848", "type": "P", "difficulty": 3, "samples": [["4 1 5\n1\n1 4\n1 5\n1 7\n1 2\n1 6\n", "2\n1\n2\n1\n2"], ["6 1 3\n5\n5 7\n5 1\n5 11", "2\n3\n1"], ["4 2 4\n2 3\n0 2\n0 3\n0 6\n0 7", "2\n2\n2\n1"], ["5 2 5\n0 4\n0 9\n1 8\n8 3\n1 6\n3 9", "1\n3\n3\n3\n2"], ["500000000 4 3\n543234 1234566 2300001 249999999\n2334445 123567\n6578996 12455726\n3 269979899", "2210878\n5876730\n231106567"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2024] Circle Passing / 传球游戏", "background": "Day 2 Problem A.\n\n题面译自 [EGOI2024 circlepassing](https://wiki.egoi2024.nl/tasks/circlepassing/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。", "description": "这是 Anouk 高中的第一天；作为热身活动，她的体育老师让班级玩记忆名字的游戏。班上有 $2N$ 名学生。他们中的大多数人彼此不认识，但有 $M$ 对最好的朋友，他们一起做任何事情。每个学生最多有一个最好的朋友。\n\n老师把所有学生安排成一个圆圈，连续给每个学生分配一个从 $0$ 到 $2N - 1$ 的编号。更具体地，对于每个 $0 \\le i < 2N - 1$，学生 $i$ 和 $i + 1$ 站在一起。此外，学生 $0$ 和 $2N - 1$ 也站在一起。\n\n由于老师希望每个人都能结识新同学，所以最好的朋友必须尽可能远离彼此，即相对而站。也就是说，形成第 $i$ 对好朋友的学生分别站在位置 $k_i$ 和 $k_i + N$，其中 $0 \\le k_i < N$。\n\n老师选择了两个学生 $x$ 和 $y$ 并将一个球交给学生 $x$。目标是将球传给学生 $y$，但每个学生只能将球传给另一个他们已经知道名字的学生。当然，最好的朋友彼此知道对方的名字。在老师解释规则期间，每个学生都认识了直接站在他们旁边的两个学生的名字。除此之外，没有人知道其他人的名字。\n\n游戏玩了 $Q$ 次；每次老师选择两个学生。由于学生们没有注意，他们在游戏过程中不会学到任何新名字。在每场游戏中，从学生 $x$ 到学生 $y$ 需要的最少传球次数是多少？", "inputFormat": "输入的第一行包含三个整数，$N, M$ 和 $Q$，其中 $2N$ 是 Anouk 班上的学生数，$M$ 是最好朋友的对数，$Q$ 是进行的游戏次数。\n\n第二行包含 $M$ 个整数 $k_0 ,\\cdots, k_{M-1}$，其中 $k_i$ 描述了第 $i$ 对好朋友。对于每个 $i$，最好朋友分别站在位置 $k$ 和 $k + N$。每个学生最多有一个最好的朋友。\n\n接下来的 $Q$ 行每行包含两个整数，$x_i$ 和 $y_i$，即第 $i$ 场游戏中选择的两个学生。", "outputFormat": "输出 $Q$ 行，第 $i$ 行包含一个整数，即第 $i$ 场游戏中所需的最少传球次数。", "hint": "**样例解释**\n\n以下两图描述了第一个样例和第四个样例中的排列情况。如果两个学生彼此认识，他们之间就有一条边连接。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ypxfh72b.png)\n\n在第一个样例的第一个游戏中，球被传给学生 $1$。学生 $1$ 将球传给他们的好朋友学生 $5$。球在学生 $5$ 传给学生 $4$ 后到达学生 $4$，总共需要两次传球。\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 5\\times 10^8$，$1\\le M\\le 5\\times 10^5$ 且 $M\\le N$，$1\\le Q\\le 2\\times 10^4$，$0\\le k_0<k_1<\\cdots<k_{M-1}<N$，$0\\le x_i,y_i < 2N$ 且 $x_i\\ne y_i$。\n\n- 子任务一（$14$ 分）：$M=1$ 且 $x_i=k_0$。换句话说，仅有一对最好的朋友，且在每局游戏中，最开始有球的人有一个最好的朋友。\n- 子任务二（$20$ 分）：$N,M,Q\\le 1000$。\n- 子任务三（$22$ 分）：$N\\le 10^7$ 且 $M,Q\\le 1000$。\n- 子任务四（$17$ 分）：$x_i=0$。\n- 子任务五（$27$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2024] Circle Passing / 传球游戏", "background": "Day 2 Problem A.\n\n题面译自 [EGOI2024 circlepassing](https://wiki.egoi2024.nl/tasks/circlepassing/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。", "description": "这是 Anouk 高中的第一天；作为热身活动，她的体育老师让班级玩记忆名字的游戏。班上有 $2N$ 名学生。他们中的大多数人彼此不认识，但有 $M$ 对最好的朋友，他们一起做任何事情。每个学生最多有一个最好的朋友。\n\n老师把所有学生安排成一个圆圈，连续给每个学生分配一个从 $0$ 到 $2N - 1$ 的编号。更具体地，对于每个 $0 \\le i < 2N - 1$，学生 $i$ 和 $i + 1$ 站在一起。此外，学生 $0$ 和 $2N - 1$ 也站在一起。\n\n由于老师希望每个人都能结识新同学，所以最好的朋友必须尽可能远离彼此，即相对而站。也就是说，形成第 $i$ 对好朋友的学生分别站在位置 $k_i$ 和 $k_i + N$，其中 $0 \\le k_i < N$。\n\n老师选择了两个学生 $x$ 和 $y$ 并将一个球交给学生 $x$。目标是将球传给学生 $y$，但每个学生只能将球传给另一个他们已经知道名字的学生。当然，最好的朋友彼此知道对方的名字。在老师解释规则期间，每个学生都认识了直接站在他们旁边的两个学生的名字。除此之外，没有人知道其他人的名字。\n\n游戏玩了 $Q$ 次；每次老师选择两个学生。由于学生们没有注意，他们在游戏过程中不会学到任何新名字。在每场游戏中，从学生 $x$ 到学生 $y$ 需要的最少传球次数是多少？", "inputFormat": "输入的第一行包含三个整数，$N, M$ 和 $Q$，其中 $2N$ 是 Anouk 班上的学生数，$M$ 是最好朋友的对数，$Q$ 是进行的游戏次数。\n\n第二行包含 $M$ 个整数 $k_0 ,\\cdots, k_{M-1}$，其中 $k_i$ 描述了第 $i$ 对好朋友。对于每个 $i$，最好朋友分别站在位置 $k$ 和 $k + N$。每个学生最多有一个最好的朋友。\n\n接下来的 $Q$ 行每行包含两个整数，$x_i$ 和 $y_i$，即第 $i$ 场游戏中选择的两个学生。", "outputFormat": "输出 $Q$ 行，第 $i$ 行包含一个整数，即第 $i$ 场游戏中所需的最少传球次数。", "hint": "**样例解释**\n\n以下两图描述了第一个样例和第四个样例中的排列情况。如果两个学生彼此认识，他们之间就有一条边连接。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ypxfh72b.png)\n\n在第一个样例的第一个游戏中，球被传给学生 $1$。学生 $1$ 将球传给他们的好朋友学生 $5$。球在学生 $5$ 传给学生 $4$ 后到达学生 $4$，总共需要两次传球。\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 5\\times 10^8$，$1\\le M\\le 5\\times 10^5$ 且 $M\\le N$，$1\\le Q\\le 2\\times 10^4$，$0\\le k_0<k_1<\\cdots<k_{M-1}<N$，$0\\le x_i,y_i < 2N$ 且 $x_i\\ne y_i$。\n\n- 子任务一（$14$ 分）：$M=1$ 且 $x_i=k_0$。换句话说，仅有一对最好的朋友，且在每局游戏中，最开始有球的人有一个最好的朋友。\n- 子任务二（$20$ 分）：$N,M,Q\\le 1000$。\n- 子任务三（$22$ 分）：$N\\le 10^7$ 且 $M,Q\\le 1000$。\n- 子任务四（$17$ 分）：$x_i=0$。\n- 子任务五（$27$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。", "locale": "zh-CN"}}}
{"pid": "P10849", "type": "P", "difficulty": 4, "samples": [["2\n3 3\n1 3", "2"], ["3\n1 1 1\n1 1 1", "1"], ["6\n1 0 1 1 0 1\n1 1 0 0 1 0", "1"], ["4\n2 1 1 8\n0 4 4 0", "-1"], ["1\n1000000000\n1000000000", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2024", "O2优化", "栈", "EGOI（欧洲/女生）"], "title": "[EGOI 2024] Bike Parking / 车位分配", "background": "Day 2 Problem B.\n\n题面译自 [EGOI2024 bikeparking](https://wiki.egoi2024.nl/tasks/bikeparking/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。", "description": "Sanne 最近想出了一个有利可图的商业点子：在埃因霍温火车站出租高级自行车停车位。为了最大化她的利润，她将自行车停车位分成了 $N$ 个不同的级别，编号从 $0$ 到 $N - 1$。级别 $0$ 是高级级别，位置非常靠近火车站台。编号越高的级别停车位越差。级别 $t$ 的停车位数量为 $x_t$。\n\n用户通过一个应用程序来分配他们的停车位。每个用户都有一个订阅等级，并期望在相应的级别获得一个停车位。然而，服务条款并不保证用户在他们的相应级别获得一个停车位。\n\n如果订阅等级为 $s$ 的用户被分配到级别 $t$ 的停车位，那么会发生以下三种情况之一：\n\n1. 如果 $t < s$，用户会感到高兴，并会为应用点赞。\n2. 如果 $t = s$，用户会感到满意，不会有任何反应。\n3. 如果 $t > s$，用户会感到生气，并会给应用差评。\n\n今天，Sanne 的应用有 $y_0 + y_1 + \\cdots + y_{N-1}$ 名用户，其中 $y_s$ 是订阅等级为 $s$ 的用户数量。她需要你的帮助来将用户分配到停车位。每个用户应该得到一个停车位。不能将一个停车位分配给多个用户，但可以有一些停车位不分配给任何用户。此外，用户总数不超过可用停车位总数。\n\nSanne 希望最大化她的应用评分。设 $U$ 为点赞数，$D$ 为差评数。你的任务是通过最佳分配用户到停车位来最大化 $U - D$。", "inputFormat": "第一行包含一个整数 $N$，表示级别或订阅等级的数量。\n\n第二行包含 $N$ 个整数 $x_0,x_1,\\cdots,x_{N-1}$，表示不同级别的停车位数量。\n\n第三行包含 $N$ 个整数 $y_0,y_1,\\cdots,y_{N-1}$，表示每个订阅等级的用户数量。\n", "outputFormat": "输出一个整数，表示通过最佳分配用户到停车位所能得到的最大可能值 $U - D$。\n", "hint": "**样例解释**\n\n在第一个样例中，你可以将订阅级别为 $0$ 的用户分配到 $0$ 级停车位，将两个级别为 $1$ 的用户分配到 $0$ 级停车位（获得 2 次赞），并将剩余的级别为 $1$ 的用户分配到 $1$ 级停车位。这导致评分为 $2$。\n\n在第二个样例中，你可以将级别 $1$ 的用户分配到 $0$ 级停车位，将级别 $2$ 的用户分配到 $1$ 级停车位，并将级别 $0$ 的用户分配到 $2$ 级停车位。这将导致 2 次赞和 1 次踩，评分为 $1$。\n\n在第三个样例中，你可以将级别 $1$ 的用户分配到 $0$ 级停车位，将级别 $0$ 的用户分配到 $2$ 级停车位，并将级别 $4$ 的用户分配到 $3$ 级停车位。这将再次导致 2 次赞和 1 次踩，评分为 $1$。\n\n第四个样例如下图所示。你可以将级别 $1$ 的用户分配到 $0, 0, 3, 3$ 级停车位，导致 2 次赞和 2 次踩。接下来，将级别 $2$ 的用户分配到 $1, 2, 3, 3$ 级停车位，导致 1 次赞和 2 次踩。这相当于 3 次赞和 4 次踩，评分为 $-1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/92be79ja.png)\n\n在第五个样例中，你可以将每个人分配到匹配其自身订阅级别的停车位，因此评分为 $0$。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 3\\times 10^5$，$0\\le x_i,y_i\\le 10^9$，$y_0+y_1+\\cdots+y_{N-1}\\le x_0+x_1+\\cdots+x_{N-1}\\le 10^9$。\n\n- 子任务一（$16$ 分）：$N=2$，$x_i\\le 100$，$y_i\\le 100$。\n- 子任务二（$9$ 分）：对于任意 $(i,j)$，$x_i=x_j=y_i=y_j$。\n- 子任务三（$19$ 分）：$x_i,y_i\\le 1$。\n- 子任务四（$24$ 分）：$N,x_i,y_i\\le 100$。\n- 子任务五（$32$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2024] Bike Parking / 车位分配", "background": "Day 2 Problem B.\n\n题面译自 [EGOI2024 bikeparking](https://wiki.egoi2024.nl/tasks/bikeparking/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。", "description": "Sanne 最近想出了一个有利可图的商业点子：在埃因霍温火车站出租高级自行车停车位。为了最大化她的利润，她将自行车停车位分成了 $N$ 个不同的级别，编号从 $0$ 到 $N - 1$。级别 $0$ 是高级级别，位置非常靠近火车站台。编号越高的级别停车位越差。级别 $t$ 的停车位数量为 $x_t$。\n\n用户通过一个应用程序来分配他们的停车位。每个用户都有一个订阅等级，并期望在相应的级别获得一个停车位。然而，服务条款并不保证用户在他们的相应级别获得一个停车位。\n\n如果订阅等级为 $s$ 的用户被分配到级别 $t$ 的停车位，那么会发生以下三种情况之一：\n\n1. 如果 $t < s$，用户会感到高兴，并会为应用点赞。\n2. 如果 $t = s$，用户会感到满意，不会有任何反应。\n3. 如果 $t > s$，用户会感到生气，并会给应用差评。\n\n今天，Sanne 的应用有 $y_0 + y_1 + \\cdots + y_{N-1}$ 名用户，其中 $y_s$ 是订阅等级为 $s$ 的用户数量。她需要你的帮助来将用户分配到停车位。每个用户应该得到一个停车位。不能将一个停车位分配给多个用户，但可以有一些停车位不分配给任何用户。此外，用户总数不超过可用停车位总数。\n\nSanne 希望最大化她的应用评分。设 $U$ 为点赞数，$D$ 为差评数。你的任务是通过最佳分配用户到停车位来最大化 $U - D$。", "inputFormat": "第一行包含一个整数 $N$，表示级别或订阅等级的数量。\n\n第二行包含 $N$ 个整数 $x_0,x_1,\\cdots,x_{N-1}$，表示不同级别的停车位数量。\n\n第三行包含 $N$ 个整数 $y_0,y_1,\\cdots,y_{N-1}$，表示每个订阅等级的用户数量。\n", "outputFormat": "输出一个整数，表示通过最佳分配用户到停车位所能得到的最大可能值 $U - D$。\n", "hint": "**样例解释**\n\n在第一个样例中，你可以将订阅级别为 $0$ 的用户分配到 $0$ 级停车位，将两个级别为 $1$ 的用户分配到 $0$ 级停车位（获得 2 次赞），并将剩余的级别为 $1$ 的用户分配到 $1$ 级停车位。这导致评分为 $2$。\n\n在第二个样例中，你可以将级别 $1$ 的用户分配到 $0$ 级停车位，将级别 $2$ 的用户分配到 $1$ 级停车位，并将级别 $0$ 的用户分配到 $2$ 级停车位。这将导致 2 次赞和 1 次踩，评分为 $1$。\n\n在第三个样例中，你可以将级别 $1$ 的用户分配到 $0$ 级停车位，将级别 $0$ 的用户分配到 $2$ 级停车位，并将级别 $4$ 的用户分配到 $3$ 级停车位。这将再次导致 2 次赞和 1 次踩，评分为 $1$。\n\n第四个样例如下图所示。你可以将级别 $1$ 的用户分配到 $0, 0, 3, 3$ 级停车位，导致 2 次赞和 2 次踩。接下来，将级别 $2$ 的用户分配到 $1, 2, 3, 3$ 级停车位，导致 1 次赞和 2 次踩。这相当于 3 次赞和 4 次踩，评分为 $-1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/92be79ja.png)\n\n在第五个样例中，你可以将每个人分配到匹配其自身订阅级别的停车位，因此评分为 $0$。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le N\\le 3\\times 10^5$，$0\\le x_i,y_i\\le 10^9$，$y_0+y_1+\\cdots+y_{N-1}\\le x_0+x_1+\\cdots+x_{N-1}\\le 10^9$。\n\n- 子任务一（$16$ 分）：$N=2$，$x_i\\le 100$，$y_i\\le 100$。\n- 子任务二（$9$ 分）：对于任意 $(i,j)$，$x_i=x_j=y_i=y_j$。\n- 子任务三（$19$ 分）：$x_i,y_i\\le 1$。\n- 子任务四（$24$ 分）：$N,x_i,y_i\\le 100$。\n- 子任务五（$32$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。", "locale": "zh-CN"}}}
{"pid": "P10850", "type": "P", "difficulty": 7, "samples": [["5\n\n\n\n\n\n\n10\n\n\n\n\n\n\n13", "\n?\n11000\n00000\n00000\n00000\n00000\n\n?\n01000\n01000\n01000\n00100\n00000\n\n!\n00100\n00010\n01000\n00001\n01000"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "交互题", "Special Judge", "O2优化", "信息论", "随机化", "EGOI（欧洲/女生）"], "title": "[EGOI 2024] Light Bulbs / 灯泡安装", "background": "Day 2 Problem C.\n\n题面译自 [EGOI2024 lightbulbs](https://wiki.egoi2024.nl/tasks/lightbulbs/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。\n\n**本题是一道交互题。**", "description": "在 1891 年在埃因霍温创立他的灯泡公司后不久，Frederik Philips 取得了一个伟大的发现：可以在水平方向或垂直方向上点亮无限射线的灯泡。凭借这一新发现，他希望革新现代家庭的室内设计。\n\n他和他的儿子 Gerard 计划进行一个复杂的安装。他们在一个房间内的 $N \\times N$ 网格中安装了 $N^2$ 个灯泡。他们希望尽可能少地打开灯泡来点亮整个房间，以节省电力。每个灯泡要么是垂直的，意味着它点亮其列中的所有格子，要么是水平的，意味着它点亮其行中的所有格子。\n\n下图显示了一个垂直灯（左）和一个水平灯（右）的示例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0aok3e6q.png)\n\n不幸的是，他们在安装灯泡时没有注意，不记得哪些灯泡是水平点亮的，哪些是垂直点亮的。相反，他们进行了些实验来弄清楚使用哪些灯泡可以点亮整个房间。Gerard 留在有灯泡的房间里，而 Frederik 在另一个房间操作开关。\n\n在每次实验中，Frederik 会打开或关闭每个灯泡，而 Gerard 会报告点亮了多少个格子；由两个或更多独立灯泡点亮的格子只算作一次。实验期间打开多少灯泡并不重要，但他们时间紧迫，理想情况下希望尽可能少地进行实验。\n\n帮助他们找到一种使用最少灯泡点亮整个房间的安排。他们最多可以进行 $2000$ 次实验。然而，如果他们使用更少的实验次数，你将获得更高的分数。\n\n---\n\n**交互方式**\n\n本题是一道交互题。\n\n- 你的程序应首先读取一个整数 $N$，即网格的高度和宽度。\n- 然后，程序应与评测系统进行交互。进行实验时，你应首先打印一行问号 `?`。在接下来的 $N$ 行中，输出一个 $N \\times N$ 的网格，指定哪些灯泡被点亮。具体来说，在每行中，输出一个长度为 $N$ 的字符串，由 $0$（关闭）和 $1$（打开）组成。然后，程序应读取一个整数 $l$（$0 \\le l \\le N^2$），表示通过指定的灯泡点亮的格子数量。\n- 当你想要回答时，打印一行感叹号 `!`，后跟 $N$ 行，格式与上面相同。在你的回答被接受前，**灯泡必须点亮整个网格，且打开的灯泡数量必须最少**。\n\n之后，你的程序应退出。\n\n评测系统是非自适应的，这意味着灯泡网格在交互开始前已经确定。\n\n每次进行实验后，请确保刷新标准输出；否则，程序可能会被判定为 TLE。在 Python 中，只要使用 `input()` 读取行，就会自动刷新。在 C++ 中，`cout << endl;` 除了打印换行符外还会刷新；如果使用 `printf`，请使用 `fflush(stdout)`。", "inputFormat": "见【交互方式】部分。", "outputFormat": "见【交互方式】部分。", "hint": "**样例解释**\n\n在样例交互中，程序首先读取网格大小 $N = 5$。下图展示了隐藏的网格（程序不知道）和众多可能答案之一，使用五盏灯点亮整个网格。标记的灯是打开的，较暗的方块是被照亮的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ys5gxvwm.png)\n\n程序进行了如下所示的两个实验。在第一个实验中，使用左上角的两个垂直灯照亮了总共 10 个方块。第二个实验照亮了总共 13 个方块。最后，程序写出了它的答案（如上图所示）并退出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bftfq9cf.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$3\\le N\\le 100$。你最多可以进行 $2000$ 次实验（输出最终答案不计入实验次数）。如果你超过了限制，程序会被判定为 WA。\n\n- 子任务一（$11$ 分）：$N=3$。\n- 子任务二（$11$ 分）：$N\\le 10$。\n- 子任务三（至多 $78$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。\n\n---\n\n**评分方式**\n\n在子任务三中，你按照下面的公式**根据进行实验的次数得分**：\n\n$$\n\\textrm{score}=\n\\begin{cases}\n(2000-Q)\\cdot 29/900&\\text{if }200\\le Q\\le 2000\\\\\n58+(200-Q)\\cdot 4/23&\\text{if }85\\le Q\\le 200\\\\\n78&\\text{if }Q\\le 85\\\\\n\\end{cases}\n$$\n\n其中 $Q$ 是这个子任务的所有测试点中最多的实验次数。你的得分将被取整到最接近的整数。\n\n下面是总分关于子任务三中 $Q$ 的函数图象。要想得到满分，你需要进行不超过 $85$ 次实验解决子任务三中的每个测试点。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iaq5i0md.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2024] Light Bulbs / 灯泡安装", "background": "Day 2 Problem C.\n\n题面译自 [EGOI2024 lightbulbs](https://wiki.egoi2024.nl/tasks/lightbulbs/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。\n\n**本题是一道交互题。**", "description": "在 1891 年在埃因霍温创立他的灯泡公司后不久，Frederik Philips 取得了一个伟大的发现：可以在水平方向或垂直方向上点亮无限射线的灯泡。凭借这一新发现，他希望革新现代家庭的室内设计。\n\n他和他的儿子 Gerard 计划进行一个复杂的安装。他们在一个房间内的 $N \\times N$ 网格中安装了 $N^2$ 个灯泡。他们希望尽可能少地打开灯泡来点亮整个房间，以节省电力。每个灯泡要么是垂直的，意味着它点亮其列中的所有格子，要么是水平的，意味着它点亮其行中的所有格子。\n\n下图显示了一个垂直灯（左）和一个水平灯（右）的示例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0aok3e6q.png)\n\n不幸的是，他们在安装灯泡时没有注意，不记得哪些灯泡是水平点亮的，哪些是垂直点亮的。相反，他们进行了些实验来弄清楚使用哪些灯泡可以点亮整个房间。Gerard 留在有灯泡的房间里，而 Frederik 在另一个房间操作开关。\n\n在每次实验中，Frederik 会打开或关闭每个灯泡，而 Gerard 会报告点亮了多少个格子；由两个或更多独立灯泡点亮的格子只算作一次。实验期间打开多少灯泡并不重要，但他们时间紧迫，理想情况下希望尽可能少地进行实验。\n\n帮助他们找到一种使用最少灯泡点亮整个房间的安排。他们最多可以进行 $2000$ 次实验。然而，如果他们使用更少的实验次数，你将获得更高的分数。\n\n---\n\n**交互方式**\n\n本题是一道交互题。\n\n- 你的程序应首先读取一个整数 $N$，即网格的高度和宽度。\n- 然后，程序应与评测系统进行交互。进行实验时，你应首先打印一行问号 `?`。在接下来的 $N$ 行中，输出一个 $N \\times N$ 的网格，指定哪些灯泡被点亮。具体来说，在每行中，输出一个长度为 $N$ 的字符串，由 $0$（关闭）和 $1$（打开）组成。然后，程序应读取一个整数 $l$（$0 \\le l \\le N^2$），表示通过指定的灯泡点亮的格子数量。\n- 当你想要回答时，打印一行感叹号 `!`，后跟 $N$ 行，格式与上面相同。在你的回答被接受前，**灯泡必须点亮整个网格，且打开的灯泡数量必须最少**。\n\n之后，你的程序应退出。\n\n评测系统是非自适应的，这意味着灯泡网格在交互开始前已经确定。\n\n每次进行实验后，请确保刷新标准输出；否则，程序可能会被判定为 TLE。在 Python 中，只要使用 `input()` 读取行，就会自动刷新。在 C++ 中，`cout << endl;` 除了打印换行符外还会刷新；如果使用 `printf`，请使用 `fflush(stdout)`。", "inputFormat": "见【交互方式】部分。", "outputFormat": "见【交互方式】部分。", "hint": "**样例解释**\n\n在样例交互中，程序首先读取网格大小 $N = 5$。下图展示了隐藏的网格（程序不知道）和众多可能答案之一，使用五盏灯点亮整个网格。标记的灯是打开的，较暗的方块是被照亮的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ys5gxvwm.png)\n\n程序进行了如下所示的两个实验。在第一个实验中，使用左上角的两个垂直灯照亮了总共 10 个方块。第二个实验照亮了总共 13 个方块。最后，程序写出了它的答案（如上图所示）并退出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bftfq9cf.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$3\\le N\\le 100$。你最多可以进行 $2000$ 次实验（输出最终答案不计入实验次数）。如果你超过了限制，程序会被判定为 WA。\n\n- 子任务一（$11$ 分）：$N=3$。\n- 子任务二（$11$ 分）：$N\\le 10$。\n- 子任务三（至多 $78$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。\n\n---\n\n**评分方式**\n\n在子任务三中，你按照下面的公式**根据进行实验的次数得分**：\n\n$$\n\\textrm{score}=\n\\begin{cases}\n(2000-Q)\\cdot 29/900&\\text{if }200\\le Q\\le 2000\\\\\n58+(200-Q)\\cdot 4/23&\\text{if }85\\le Q\\le 200\\\\\n78&\\text{if }Q\\le 85\\\\\n\\end{cases}\n$$\n\n其中 $Q$ 是这个子任务的所有测试点中最多的实验次数。你的得分将被取整到最接近的整数。\n\n下面是总分关于子任务三中 $Q$ 的函数图象。要想得到满分，你需要进行不超过 $85$ 次实验解决子任务三中的每个测试点。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iaq5i0md.png)", "locale": "zh-CN"}}}
{"pid": "P10851", "type": "P", "difficulty": 7, "samples": [["3 2\n0 1\n1 2", "5\n2 2 2\n2 2 3\n2 2 3\n1 2 2\n1 2 2"]], "limits": {"time": [9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "Special Judge", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2024] Make Them Meet / 活动面基", "background": "Day 2 Problem D.\n\n题面译自 [EGOI2024 makethemmeet](https://wiki.egoi2024.nl/tasks/makethemmeet/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。\n\n**警告：滥用本题评测将会封号。**", "description": "Mila 和 Laura 在网上已经是很长时间的朋友了；但她们从未在现实中见过面。现在，她们都参加了同一个现场活动，这意味着她们肯定会见面。然而，她们所住的酒店非常大且复杂。因此，经过几天后，她们仍未碰面。\n\n酒店由 $N$ 个房间组成，编号从 $0$ 到 $N - 1$。每个房间都有一个可以更换颜色的灯。你找到了酒店的电力服务房，允许你改变灯的颜色。你的目标是使用这些灯引导 Mila 和 Laura 最终见面。\n\n酒店可以表示为一个有 $N$ 个顶点（房间）和 $M$ 条边（连接房间的走廊）的图。Mila 和 Laura 最初在两个不同的房间开始，但你不知道是哪些房间。你可以进行若干次移动。每次移动包括打印一个包含 $N$ 个整数的列表 $c_0,c_1,\\cdots,c_{N-1}$，表示房间 $i$ 的灯变为颜色 $c_i$，其中 $i = 0, 1,\\cdots, N - 1$。然后，Mila 和 Laura 会查看她们当前所在房间的灯的颜色，并走向相邻房间中灯颜色相同的房间。如果没有这样的相邻房间，她们将留在原地。如果有多个这样的相邻房间，她们将任意选择一个。\n\n如果在你的移动过程中，Mila 和 Laura 在同一个房间或同时使用同一个走廊，那么你就成功地让她们见面了。你最多可以进行 $2\\times 10^4$ 次移动，但如果你使用更少的移动次数，你的得分会更高。\n\n注意，你不知道 Mila 和 Laura 最初在哪个房间，也不知道如果她们有多个相同颜色的房间可以选择时会如何走。**你的解决方案必须在无论她们的起始房间是哪些或如何走动的情况下都是正确的。**", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，分别表示酒店的房间数和走廊数。\n\n接下来的 $M$ 行每行包含两个整数 $u_i$ 和 $v_i$，表示房间 $u_i$ 和 $v_i$ 由一个走廊连接。\n", "outputFormat": "输出一行一个整数 $K$，表示移动次数。\n\n在接下来的 $K$ 行中，每行输出 $N$ 个整数 $c_0,c_1,\\cdots,c_{N-1}$，其中对所有的 $i$ 都有 $0 \\le c_i \\le N$。这 $K$ 行代表按时间顺序的你的移动。\n", "hint": "**样例解释**\n\n样例情况是一个长度为 $3$ 的路径，因此它可能属于测试组 $3, 4$ 或 $5$。如果房间的灯根据样例输出进行着色，那么 Mila 和 Laura 总会见面。\n\n例如，假设 Mila 开始在房间 $0$，Laura 开始在房间 $1$：\n\n- 第一步：Mila 必须走到房间 $1$。如果 Laura 走到房间 $0$，那么她们将在 $0$ 和 $1$ 之间的走廊上相遇。假设 Laura 走到房间 $2$。\n- 第二步：Mila 走回房间 $0$，Laura 留在房间 $2$。\n- 第三步：Mila 再次走到房间 $1$，Laura 留在房间 $2$。\n- 第四步：Mila 走到房间 $2$，Laura 走到房间 $1$。于是她们将在房间 $1$ 和 $2$ 之间的走廊上相遇。\n- 第五步：Mila 和 Laura 交换位置并再次相遇（但这并不重要，因为她们已经见面了）。\n\n下图显示了样例的前四步。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/836n7qi6.png)\n\n注意，这仅仅是朋友从房间 $0$ 和 $1$ 开始的情况。可以验证，无论她们从哪里开始以及如何行走，相同的移动顺序都能确保她们见面。\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 100$，$N-1\\le M\\le \\frac{N(N-1)}{2}$，$0\\le u_i,v_i\\le N-1$ 且 $u_i\\ne v_i$。保证你可以从每个房间到达所有房间，且没有走廊连接一个房间和它自己，也没有多个走廊连接相同的两个房间。你最多可以使用 $2\\times 10^4$ 步（即 $K\\le 2\\times 10^4$）。\n\n- 子任务一（至多 $10$ 分）：$M=N-1$ 且走廊是 $(0,1),(0,2),(0,3),\\cdots,(0,N-1)$。也就是说，图为菊花图。\n- 子任务二（至多 $13$ 分）：$M=\\frac{N(N-1)}{2}$，即任意两个房间之间都有一条走廊。也就是说，图为完全图。\n- 子任务三（至多 $11$ 分）：$M=N-1$ 且走廊是 $(0,1),(1,2),(2,3),\\cdots,(N-2,N-1)$。也就是说，图为一条链。\n- 子任务四（至多 $36$ 分）：$M=N-1$。也就是说，图为一棵树。\n- 子任务五（至多 $30$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。\n\n---\n\n**评分方式**\n\n对于每个你的程序正确解决的子任务，你会根据以下公式获得分数：\n\n$$\n\\textrm{score}=\\left\\lfloor S_g\\cdot\\min\\left(1,\\frac{2000}{K_g+1900}+\\frac{1}{5}\\right)\\right\\rfloor\n$$\n\n其中 $S_g$ 是这个子任务的满分，$K_g$ 是你的程序在这个子任务的所有测试点中使用的最大步数。这意味着要想得到满分，你需要用不超过 $600$ 步解决每个测试点。下面是得分关于 $K_g$ 的函数图象。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bnzkmp36.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2024] Make Them Meet / 活动面基", "background": "Day 2 Problem D.\n\n题面译自 [EGOI2024 makethemmeet](https://wiki.egoi2024.nl/tasks/makethemmeet/statement-isc.pdf)。翻译来自于 [ChatGPT](https://chatgpt.com/) 并进行人工校对，若有误请联系 [rui_er](https://www.luogu.com.cn/user/122461)。\n\n**警告：滥用本题评测将会封号。**", "description": "Mila 和 Laura 在网上已经是很长时间的朋友了；但她们从未在现实中见过面。现在，她们都参加了同一个现场活动，这意味着她们肯定会见面。然而，她们所住的酒店非常大且复杂。因此，经过几天后，她们仍未碰面。\n\n酒店由 $N$ 个房间组成，编号从 $0$ 到 $N - 1$。每个房间都有一个可以更换颜色的灯。你找到了酒店的电力服务房，允许你改变灯的颜色。你的目标是使用这些灯引导 Mila 和 Laura 最终见面。\n\n酒店可以表示为一个有 $N$ 个顶点（房间）和 $M$ 条边（连接房间的走廊）的图。Mila 和 Laura 最初在两个不同的房间开始，但你不知道是哪些房间。你可以进行若干次移动。每次移动包括打印一个包含 $N$ 个整数的列表 $c_0,c_1,\\cdots,c_{N-1}$，表示房间 $i$ 的灯变为颜色 $c_i$，其中 $i = 0, 1,\\cdots, N - 1$。然后，Mila 和 Laura 会查看她们当前所在房间的灯的颜色，并走向相邻房间中灯颜色相同的房间。如果没有这样的相邻房间，她们将留在原地。如果有多个这样的相邻房间，她们将任意选择一个。\n\n如果在你的移动过程中，Mila 和 Laura 在同一个房间或同时使用同一个走廊，那么你就成功地让她们见面了。你最多可以进行 $2\\times 10^4$ 次移动，但如果你使用更少的移动次数，你的得分会更高。\n\n注意，你不知道 Mila 和 Laura 最初在哪个房间，也不知道如果她们有多个相同颜色的房间可以选择时会如何走。**你的解决方案必须在无论她们的起始房间是哪些或如何走动的情况下都是正确的。**", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，分别表示酒店的房间数和走廊数。\n\n接下来的 $M$ 行每行包含两个整数 $u_i$ 和 $v_i$，表示房间 $u_i$ 和 $v_i$ 由一个走廊连接。\n", "outputFormat": "输出一行一个整数 $K$，表示移动次数。\n\n在接下来的 $K$ 行中，每行输出 $N$ 个整数 $c_0,c_1,\\cdots,c_{N-1}$，其中对所有的 $i$ 都有 $0 \\le c_i \\le N$。这 $K$ 行代表按时间顺序的你的移动。\n", "hint": "**样例解释**\n\n样例情况是一个长度为 $3$ 的路径，因此它可能属于测试组 $3, 4$ 或 $5$。如果房间的灯根据样例输出进行着色，那么 Mila 和 Laura 总会见面。\n\n例如，假设 Mila 开始在房间 $0$，Laura 开始在房间 $1$：\n\n- 第一步：Mila 必须走到房间 $1$。如果 Laura 走到房间 $0$，那么她们将在 $0$ 和 $1$ 之间的走廊上相遇。假设 Laura 走到房间 $2$。\n- 第二步：Mila 走回房间 $0$，Laura 留在房间 $2$。\n- 第三步：Mila 再次走到房间 $1$，Laura 留在房间 $2$。\n- 第四步：Mila 走到房间 $2$，Laura 走到房间 $1$。于是她们将在房间 $1$ 和 $2$ 之间的走廊上相遇。\n- 第五步：Mila 和 Laura 交换位置并再次相遇（但这并不重要，因为她们已经见面了）。\n\n下图显示了样例的前四步。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/836n7qi6.png)\n\n注意，这仅仅是朋友从房间 $0$ 和 $1$ 开始的情况。可以验证，无论她们从哪里开始以及如何行走，相同的移动顺序都能确保她们见面。\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le N\\le 100$，$N-1\\le M\\le \\frac{N(N-1)}{2}$，$0\\le u_i,v_i\\le N-1$ 且 $u_i\\ne v_i$。保证你可以从每个房间到达所有房间，且没有走廊连接一个房间和它自己，也没有多个走廊连接相同的两个房间。你最多可以使用 $2\\times 10^4$ 步（即 $K\\le 2\\times 10^4$）。\n\n- 子任务一（至多 $10$ 分）：$M=N-1$ 且走廊是 $(0,1),(0,2),(0,3),\\cdots,(0,N-1)$。也就是说，图为菊花图。\n- 子任务二（至多 $13$ 分）：$M=\\frac{N(N-1)}{2}$，即任意两个房间之间都有一条走廊。也就是说，图为完全图。\n- 子任务三（至多 $11$ 分）：$M=N-1$ 且走廊是 $(0,1),(1,2),(2,3),\\cdots,(N-2,N-1)$。也就是说，图为一条链。\n- 子任务四（至多 $36$ 分）：$M=N-1$。也就是说，图为一棵树。\n- 子任务五（至多 $30$ 分）：无特殊限制。\n\n注：部分测试点在 EGOI 中被放在多个子任务中。为节省评测资源及整理数据的工作量，这些测试点被放在包含它的所有子任务中编号最小的一个。这可能导致一份代码得到比预期更高的分数，但是无法过题。\n\n---\n\n**评分方式**\n\n对于每个你的程序正确解决的子任务，你会根据以下公式获得分数：\n\n$$\n\\textrm{score}=\\left\\lfloor S_g\\cdot\\min\\left(1,\\frac{2000}{K_g+1900}+\\frac{1}{5}\\right)\\right\\rfloor\n$$\n\n其中 $S_g$ 是这个子任务的满分，$K_g$ 是你的程序在这个子任务的所有测试点中使用的最大步数。这意味着要想得到满分，你需要用不超过 $600$ 步解决每个测试点。下面是得分关于 $K_g$ 的函数图象。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bnzkmp36.png)", "locale": "zh-CN"}}}
{"pid": "P10852", "type": "P", "difficulty": 2, "samples": [["3\n5 3\n1 1\n4 4\n5 5\n6 6\n1 1\n3 7\n2 4\n5 5\n4 1\n6 4\n5 0", "Yes\nNo\nYes"], ["1\n5 2\n1 -2\n5 -10", "Yes"], ["2\n9 6\n1 -856675560\n8 479857596\n5 -92942328\n4 -283875636\n3 -474808944\n9 670790904\n10 7\n4 -32297373\n10 -633066970\n9 831032854\n5 -43726758\n2 -699796467\n1 -918486370\n8 612342951", "Yes\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "Special Judge", "O2优化", "构造", "梦熊比赛"], "title": "【MX-X2-T1】「Cfz Round 4」Awaken", "background": "原题链接：<https://oier.team/problems/X2A>。\n\n---\n\n能否等到梦醒了的时候。\n\n![图片与题目做法无关，图片来源网络，侵删。QWQ。](https://cdn.luogu.com.cn/upload/image_hosting/wksp5b48.png?x-oss-process=image/resize,m_lfit,h_500,w_500)\n", "description": "月做了一个梦。在梦中，她拿到了一个长度为 $n$ 的**整数**序列 $a_1, \\ldots, a_n$，**其中 $\\bm{n \\ge 5}$**。\n\n梦醒了。月忘记了这个序列中的一部分元素，留下了空白。所幸，月还记得 $m$ 个非空白的位置。月希望将空白的位置填上，还原整个序列。\n\n月还记得梦中的序列有性质：对于所有满足 $x_2+x_3=x_1+x_4$ 的互异下标 $x_1,x_2,x_3,x_4$，总有 $a_{x_2}+a_{x_3}=a_{x_1}+a_{x_4}$ 成立。\n\n月想知道是否可以还原出一个满足性质的序列（如果不能的话，就是她记错了）。若可以，输出 ```Yes```；否则输出 ```No```。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行两个整数 $n,m$，其中 $n \\ge 5$，$m$ 表示 $a_i$ 中不为空的位置的个数。\n- 接下来 $m$ 行，每行两个整数 $p_i,x_i$，表示 $a_{p_i}$ 不为空，且 $a_{{p_i}}=x_i$。保证 $p_i$ 两两不同。", "outputFormat": "对于每组测试数据，输出一个字符串 `Yes` 或 `No`，表示原序列是否存在。\n\n本题中字符串大小写不敏感，即 `yes`、`yeS`、`yEs`、`Yes`、`YEs`、`YeS`、`yES`、`YES` 都被认为是 `Yes`，`No` 同理。", "hint": "**【样例解释 #1】**\n\n对于第 $1$ 组测试数据，当前序列为 $[1,?,?,4,5]$。可以构造出原序列 $[1,2,3,4,5]$，你可以检查此序列满足性质。\n\n对于第 $2$ 组测试数据，当前序列为 $[1,4,7,1,5,4]$。可以证明不存在满足性质的原序列。这组样例提醒你，**$\\bm p$ 不一定升序给出**。\n\n对于第 $3$ 组测试数据，当前序列为 $[?,?,?,?,?]$。可以构造出原序列 $[0,0,0,0,0]$，当然 $[-1,-1,-1,-1,-1]$ 也可以。这组样例提醒你，$m$ 可以等于 $0$，以及原序列可以含有负数或 $0$。\n\n\n**【数据范围】**\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有测试数据，$1 \\le T\\le 4\\times10^4$，$5\\le n\\le2\\times 10^5$，$\\sum n\\le 2\\times10^5$，$0\\le m\\le n$，$1\\le p_i\\le n$，$-10^{9} \\le x_i \\le 10^{9}$。保证在同一组数据内 $p_i$ 两两不同。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 points）：$n\\le2000$ 且 $m=n$。\n- Subtask 2（30 points）：$n\\leq 6$，$|x|\\le7$。\n- Subtask 3（20 points）：$m=2$。\n- Subtask 4（30 points）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X2-T1】「Cfz Round 4」Awaken", "background": "原题链接：<https://oier.team/problems/X2A>。\n\n---\n\n能否等到梦醒了的时候。\n\n![图片与题目做法无关，图片来源网络，侵删。QWQ。](https://cdn.luogu.com.cn/upload/image_hosting/wksp5b48.png?x-oss-process=image/resize,m_lfit,h_500,w_500)\n", "description": "月做了一个梦。在梦中，她拿到了一个长度为 $n$ 的**整数**序列 $a_1, \\ldots, a_n$，**其中 $\\bm{n \\ge 5}$**。\n\n梦醒了。月忘记了这个序列中的一部分元素，留下了空白。所幸，月还记得 $m$ 个非空白的位置。月希望将空白的位置填上，还原整个序列。\n\n月还记得梦中的序列有性质：对于所有满足 $x_2+x_3=x_1+x_4$ 的互异下标 $x_1,x_2,x_3,x_4$，总有 $a_{x_2}+a_{x_3}=a_{x_1}+a_{x_4}$ 成立。\n\n月想知道是否可以还原出一个满足性质的序列（如果不能的话，就是她记错了）。若可以，输出 ```Yes```；否则输出 ```No```。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行两个整数 $n,m$，其中 $n \\ge 5$，$m$ 表示 $a_i$ 中不为空的位置的个数。\n- 接下来 $m$ 行，每行两个整数 $p_i,x_i$，表示 $a_{p_i}$ 不为空，且 $a_{{p_i}}=x_i$。保证 $p_i$ 两两不同。", "outputFormat": "对于每组测试数据，输出一个字符串 `Yes` 或 `No`，表示原序列是否存在。\n\n本题中字符串大小写不敏感，即 `yes`、`yeS`、`yEs`、`Yes`、`YEs`、`YeS`、`yES`、`YES` 都被认为是 `Yes`，`No` 同理。", "hint": "**【样例解释 #1】**\n\n对于第 $1$ 组测试数据，当前序列为 $[1,?,?,4,5]$。可以构造出原序列 $[1,2,3,4,5]$，你可以检查此序列满足性质。\n\n对于第 $2$ 组测试数据，当前序列为 $[1,4,7,1,5,4]$。可以证明不存在满足性质的原序列。这组样例提醒你，**$\\bm p$ 不一定升序给出**。\n\n对于第 $3$ 组测试数据，当前序列为 $[?,?,?,?,?]$。可以构造出原序列 $[0,0,0,0,0]$，当然 $[-1,-1,-1,-1,-1]$ 也可以。这组样例提醒你，$m$ 可以等于 $0$，以及原序列可以含有负数或 $0$。\n\n\n**【数据范围】**\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有测试数据，$1 \\le T\\le 4\\times10^4$，$5\\le n\\le2\\times 10^5$，$\\sum n\\le 2\\times10^5$，$0\\le m\\le n$，$1\\le p_i\\le n$，$-10^{9} \\le x_i \\le 10^{9}$。保证在同一组数据内 $p_i$ 两两不同。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 points）：$n\\le2000$ 且 $m=n$。\n- Subtask 2（30 points）：$n\\leq 6$，$|x|\\le7$。\n- Subtask 3（20 points）：$m=2$。\n- Subtask 4（30 points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P10853", "type": "P", "difficulty": 3, "samples": [["7\n4\n3 0 1 3\n5\n0 1 2 3 4\n1\n6\n1\n0\n6\n1 1 4 5 1 4\n10\n10 32 43 28 19 83 10 10 83 23\n15\n132 256 852 31 1 0 12 13 12 0 0 255 143 23 32", "6\n6\n0\n1\n3\n12\n65"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "位运算", "梦熊比赛"], "title": "【MX-X2-T2】「Cfz Round 4」Xor Counting", "background": "原题链接：<https://oier.team/problems/X2B>。\n\n---\n\n生きてもいいような　気がして  \n或者　就这样活着也不错吧  \n\n繰返し笑い合うんだ　居たくなる旅  \n想要有一段充满欢笑的旅程啊", "description": "给定一个长度为 $n$ 的**非负整数**序列 $a_1, \\ldots, a_n$。\n\n请你求出满足 $a_i \\le (a_i \\oplus a_j) \\le a_j$ 的下标对 $(i, j)$ 的数量。其中 $\\oplus$ 表示**按位异或**，即 C++ 中的 `^`。\n", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行一个整数 $n$。\n- 第二行 $n$ 个整数 $a_1, \\ldots, a_n$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示满足条件的下标对 $(x,y)$ 的数量。", "hint": "**【样例解释】**\n\n对于第 $1$ 组测试数据，满足条件的下标对有 $(2,1),(2,2),(2,3),(2,4),(3,1),(3,4)$。\n\n**【数据范围】**\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有测试数据，$1 \\le T \\le 1000$，$1 \\le n \\le 5\\times10^5$，$0 \\le a_i \\lt 2^{30}$，$\\sum n \\le 5\\times10^5$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（30 points）：$\\sum n \\le 1000$。\n- Subtask 2（30 points）：$a_i \\ge 1$。\n- Subtask 3（40 points）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X2-T2】「Cfz Round 4」Xor Counting", "background": "原题链接：<https://oier.team/problems/X2B>。\n\n---\n\n生きてもいいような　気がして  \n或者　就这样活着也不错吧  \n\n繰返し笑い合うんだ　居たくなる旅  \n想要有一段充满欢笑的旅程啊", "description": "给定一个长度为 $n$ 的**非负整数**序列 $a_1, \\ldots, a_n$。\n\n请你求出满足 $a_i \\le (a_i \\oplus a_j) \\le a_j$ 的下标对 $(i, j)$ 的数量。其中 $\\oplus$ 表示**按位异或**，即 C++ 中的 `^`。\n", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行一个整数 $n$。\n- 第二行 $n$ 个整数 $a_1, \\ldots, a_n$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示满足条件的下标对 $(x,y)$ 的数量。", "hint": "**【样例解释】**\n\n对于第 $1$ 组测试数据，满足条件的下标对有 $(2,1),(2,2),(2,3),(2,4),(3,1),(3,4)$。\n\n**【数据范围】**\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有测试数据，$1 \\le T \\le 1000$，$1 \\le n \\le 5\\times10^5$，$0 \\le a_i \\lt 2^{30}$，$\\sum n \\le 5\\times10^5$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（30 points）：$\\sum n \\le 1000$。\n- Subtask 2（30 points）：$a_i \\ge 1$。\n- Subtask 3（40 points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P10854", "type": "P", "difficulty": 4, "samples": [["4 1000000\n0 0 1 0\n", "3\n2 4 1\n"], ["5 1000000\n1 1 1 1 1\n", "0\n\n"], ["10 1000000\n0 1 0 0 1 1 0 0 1 0\n", "18\n1 2 10 1 9 4 10 4 7 4 7 3 7 8 9 2 10 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "构造", "折半搜索 meet in the middle", "梦熊比赛"], "title": "【MX-X2-T3】「Cfz Round 4」Ninelie", "background": "原题链接：<https://oier.team/problems/X2C>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3g0aruaq.png)\n\n沿着单侧无尽响彻的旋律 流经眼前的街道 伴随着落幕的爱 渐行渐远  \n那无法传达的理想构图日渐扭曲沉寂的抵抗在此刻觉醒 冲动也在此刻姗姗来迟  \n支离破碎的哭喊和美梦 理想只剩下装饰的门面  \n哪怕城市乐于被喧嚣嘈杂所淹没  \n我也会继续高歌舍弃那掌控我的一切  \n所以只愿那静谧 再度响彻  \n> 无需畏惧 黎明已然降临", "description": "给定一个长为 $n$ 的 $01$ 序列 $a_1, \\ldots, a_n$ 以及一个正整数 $r$。\n\n你可以对序列 $a$ 进行操作。每次操作需选定一个下标 $p$，满足 $p$ 为 $1$ 或 $n$ 或 $a_{p-1}\\neq a_{p+1}$，然后将 $a_p$ 翻转（即将 $0$ 变为 $1$，将 $1$ 变为 $0$）。\n\n请你在 $r$ 次操作内将序列 $a$ 变成全 $0$ 或全 $1$。**你不需要最小化操作次数**。如果无法完成，你需要报告无解。\n\n**数据保证 $\\bm{r = 2 \\times 10^6}$ 或 $\\bm{10^6}$，具体细节请参见【数据范围】一节。**", "inputFormat": "第一行两个正整数 $n,r$。\n\n第二行 $n$ 个整数 $a_1, \\ldots, a_n$。", "outputFormat": "若无法在 $r$ 次操作内将序列 $a$ 变成全 $0$ 或全 $1$，则输出一行一个整数 $-1$。\n\n若存在一种构造方案，则输出两行：\n\n- 第一行包含一个非负整数 $m$，表示你的操作次数；你需要保证 $m\\le r$，**你不需要最小化 $\\bm m$**；\n- 第二行包含 $m$ 个正整数，依次表示每次操作的下标 $p$。", "hint": "**【样例解释 #1】**\n\n每次操作后的序列 $a$ 分别为：\n\n- $[0,1,1,0]$；\n- $[0,1,1,1]$；\n- $[1,1,1,1]$。\n\n此时序列 $a$ 中的全部元素均相同。\n\n**【数据范围】**\n\n对于所有测试数据，$2\\le n\\le 2\\times 10^3$，$a_i\\in\\{0,1\\}$，$r = 2 \\times 10^6$ 或 $10^6$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 points）：$n\\le 10$，$r=2\\times 10^6$。\n- Subtask 2（30 points）：$r=2\\times 10^6$。\n- Subtask 3（50 points）：$r=10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X2-T3】「Cfz Round 4」Ninelie", "background": "原题链接：<https://oier.team/problems/X2C>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3g0aruaq.png)\n\n沿着单侧无尽响彻的旋律 流经眼前的街道 伴随着落幕的爱 渐行渐远  \n那无法传达的理想构图日渐扭曲沉寂的抵抗在此刻觉醒 冲动也在此刻姗姗来迟  \n支离破碎的哭喊和美梦 理想只剩下装饰的门面  \n哪怕城市乐于被喧嚣嘈杂所淹没  \n我也会继续高歌舍弃那掌控我的一切  \n所以只愿那静谧 再度响彻  \n> 无需畏惧 黎明已然降临", "description": "给定一个长为 $n$ 的 $01$ 序列 $a_1, \\ldots, a_n$ 以及一个正整数 $r$。\n\n你可以对序列 $a$ 进行操作。每次操作需选定一个下标 $p$，满足 $p$ 为 $1$ 或 $n$ 或 $a_{p-1}\\neq a_{p+1}$，然后将 $a_p$ 翻转（即将 $0$ 变为 $1$，将 $1$ 变为 $0$）。\n\n请你在 $r$ 次操作内将序列 $a$ 变成全 $0$ 或全 $1$。**你不需要最小化操作次数**。如果无法完成，你需要报告无解。\n\n**数据保证 $\\bm{r = 2 \\times 10^6}$ 或 $\\bm{10^6}$，具体细节请参见【数据范围】一节。**", "inputFormat": "第一行两个正整数 $n,r$。\n\n第二行 $n$ 个整数 $a_1, \\ldots, a_n$。", "outputFormat": "若无法在 $r$ 次操作内将序列 $a$ 变成全 $0$ 或全 $1$，则输出一行一个整数 $-1$。\n\n若存在一种构造方案，则输出两行：\n\n- 第一行包含一个非负整数 $m$，表示你的操作次数；你需要保证 $m\\le r$，**你不需要最小化 $\\bm m$**；\n- 第二行包含 $m$ 个正整数，依次表示每次操作的下标 $p$。", "hint": "**【样例解释 #1】**\n\n每次操作后的序列 $a$ 分别为：\n\n- $[0,1,1,0]$；\n- $[0,1,1,1]$；\n- $[1,1,1,1]$。\n\n此时序列 $a$ 中的全部元素均相同。\n\n**【数据范围】**\n\n对于所有测试数据，$2\\le n\\le 2\\times 10^3$，$a_i\\in\\{0,1\\}$，$r = 2 \\times 10^6$ 或 $10^6$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 points）：$n\\le 10$，$r=2\\times 10^6$。\n- Subtask 2（30 points）：$r=2\\times 10^6$。\n- Subtask 3（50 points）：$r=10^6$。", "locale": "zh-CN"}}}
{"pid": "P10855", "type": "P", "difficulty": 6, "samples": [["5\n3 2\n10 1\n261 261\n2333 2333\n124218 998244353", "17\n134\n28873779\n470507314\n428587718\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "O2优化", "莫比乌斯反演", "容斥原理", "字典树 Trie", "梦熊比赛"], "title": "【MX-X2-T4】「Cfz Round 4」Gcd with Xor", "background": "原题链接：<https://oier.team/problems/X2D>。\n\n---\n\nねえ もしも全て投げ捨てられたら  \n呐 若然能将一切舍弃的话\n\n笑って生きることが楽になるの  \n笑着活下去这样的事就会变的轻松吗", "description": "给定两个正整数 $n,k$。\n\n定义 $\\displaystyle f(x)=\\sum_{i=1}^x \\gcd(i,i\\oplus x)^k$。计算 $\\displaystyle \\sum_{i=1}^n f(i)$。其中 $\\gcd(a,b)$ 表示 $a$ 和 $b$ 的最大公因数，$\\oplus$ 表示**按位异或**，即 C++ 中的 `^`。\n\n由于答案可能很大，所以你只需要输出答案对 $10^9+7$ 取模的结果。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入一行两个正整数 $n,k$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示答案对 $10^9+7$ 取模的结果。", "hint": "**【样例解释】**\n\n对于第 $1$ 组测试数据：\n\n$f(1)=\\gcd(1,0)^2=1$。\n\n$f(2)=\\gcd(1,3)^2+\\gcd(2,0)^2=5$。\n\n$f(3)=\\gcd(1,2)^2+\\gcd(2,1)^2+\\gcd(3,0)^2=11$。\n\n$f(1)+f(2)+f(3)=17$。\n\n**【数据范围】**\n\n对于所有测试数据，$1\\le T\\le 1000$，$1\\le n\\le 2\\times 10^5$，$\\sum n\\le 2\\times 10^5$，$1\\le k\\le 10^9$。\n\n**本题采用捆绑测试。**\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n- Subtask 1（10 points）：$\\sum n\\le 2000$。\n- Subtask 2（12 points）：$\\sum n\\le 10^4$。\n- Subtask 3（15 points）：$k=1$。\n- Subtask 4（45 points）：$\\sum n\\le 10^5$。\n- Subtask 5（18 points）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X2-T4】「Cfz Round 4」Gcd with Xor", "background": "原题链接：<https://oier.team/problems/X2D>。\n\n---\n\nねえ もしも全て投げ捨てられたら  \n呐 若然能将一切舍弃的话\n\n笑って生きることが楽になるの  \n笑着活下去这样的事就会变的轻松吗", "description": "给定两个正整数 $n,k$。\n\n定义 $\\displaystyle f(x)=\\sum_{i=1}^x \\gcd(i,i\\oplus x)^k$。计算 $\\displaystyle \\sum_{i=1}^n f(i)$。其中 $\\gcd(a,b)$ 表示 $a$ 和 $b$ 的最大公因数，$\\oplus$ 表示**按位异或**，即 C++ 中的 `^`。\n\n由于答案可能很大，所以你只需要输出答案对 $10^9+7$ 取模的结果。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入一行两个正整数 $n,k$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示答案对 $10^9+7$ 取模的结果。", "hint": "**【样例解释】**\n\n对于第 $1$ 组测试数据：\n\n$f(1)=\\gcd(1,0)^2=1$。\n\n$f(2)=\\gcd(1,3)^2+\\gcd(2,0)^2=5$。\n\n$f(3)=\\gcd(1,2)^2+\\gcd(2,1)^2+\\gcd(3,0)^2=11$。\n\n$f(1)+f(2)+f(3)=17$。\n\n**【数据范围】**\n\n对于所有测试数据，$1\\le T\\le 1000$，$1\\le n\\le 2\\times 10^5$，$\\sum n\\le 2\\times 10^5$，$1\\le k\\le 10^9$。\n\n**本题采用捆绑测试。**\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n- Subtask 1（10 points）：$\\sum n\\le 2000$。\n- Subtask 2（12 points）：$\\sum n\\le 10^4$。\n- Subtask 3（15 points）：$k=1$。\n- Subtask 4（45 points）：$\\sum n\\le 10^5$。\n- Subtask 5（18 points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P10856", "type": "P", "difficulty": 6, "samples": [["0 3 3\n1 2 1 3 2 4 5 1\n2 1 5\n1 3\n2 5 1", "5\n4"], ["1 3 3\n1 2 1 3 2 4 5 1\n2 1 5\n1 6\n2 0 4", "5\n4"], ["1 4 16\n12 9 5 9 12 12 9 12 9 16 5 9 12 16 9 5\n2 0 4\n1 15\n2 14 0\n1 15\n2 6 0\n2 4 14\n1 0\n1 14\n2 4 10\n2 6 3\n1 7\n2 4 13\n1 3\n1 3\n2 4 3\n2 15 2", "5\n7\n4\n7\n9\n5\n7\n2\n11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化", "梦熊比赛"], "title": "【MX-X2-T5】「Cfz Round 4」Xor-Forces", "background": "原题链接：<https://oier.team/problems/X2E>。\n\n---\n\n✿(。◕ᴗ◕。)✿\n", "description": "给定一个长度为 $n=2^k$ 的数组 $a$，下标从 $0$ 开始，维护 $m$ 次操作：\n\n1. 操作一：给定 $x$，设数列 $a'$ 满足 $a'_i=a_{i\\oplus x}$，将 $a$ 修改为 $a'$。其中 $\\oplus$ 表示按位异或运算。\n2. 操作二：给定 $l,r$，查询 $a$ 的下标在 $l,r$ 之间的子数组有多少颜色段。**不保证 $\\bm {l\\le r}$，若 $\\bm{l > r}$，请自行交换 $\\bm{l,r}$。**\n\n其中，一个极长的所有数都相等的子数组称为一个颜色段。\n\n部分测试点要求强制在线。", "inputFormat": "第一行三个整数 $T,k,m$，其中 $T \\in \\{ 0, 1 \\}$ 为决定是否强制在线的参数。\n\n第二行 $n$ 个整数 $a_0, \\ldots, a_{n-1}$。\n\n接下来 $m$ 行，每行两或三个整数，描述一次操作。第一个整数 $\\mathit{op}$ 表示操作类型。\n\n- 若 $op=1$，为操作一，接下来一个整数 $x'$，满足 $x=x'\\oplus(T\\times \\mathit{lst})$。\n- 若 $op=2$，为操作二，接下来两个整数 $l',r'$，满足 $l=l'\\oplus(T\\times \\mathit{lst})$，$r=r'\\oplus(T\\times \\mathit{lst})$。**不保证 $\\bm{l \\le r}$，若 $\\bm{l > r}$，请自行交换 $\\bm{l, r}$。**\n- 其中 $\\mathit{lst}$ 表示上次询问的答案。特别地，如果此前没有询问操作，则 $\\mathit{lst}=0$。", "outputFormat": "输出若干行，每行包含一个整数，依次表示每个询问的答案。", "hint": "**【样例解释 #1】**\n\n此样例允许离线。\n\n初始时 $a=[1,2,1,3,2,4,5,1]$。\n\n$a$ 的下标在 $1,5$ 之间的子数组为 $[2,1,3,2,4]$，它的颜色段数为 $5$。\n\n进行重排操作后，$a=[3,1,2,1,1,5,4,2]$。\n\n$a$ 的下标在 $5,1$ 之间的子数组为 $[1,2,1,1,5]$，它的颜色段数为 $4$。\n\n**【样例解释 #2】**\n\n此样例除强制在线外，与样例 \\#1 完全一致。\n\n**【数据范围】**\n\n对于所有测试数据，$T \\in \\{ 0, 1 \\}$，$0\\le k\\le 18$，$n=2^k$，$1\\le m\\le 2\\times 10^5$，$1\\le a_i\\le n$，$\\mathit{op} \\in \\{ 1, 2 \\}$，$0\\le x,l,r < n$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（15 points）：$T=1$，$k\\le 10$，$m\\le 10^3$。\n- Subtask 2（15 points）：$T=1$，不存在操作一。\n- Subtask 3（20 points）：$T=1$，对于所有操作二，要么 $l=0,r=n-1$，要么 $l=n-1,r=0$。\n- Subtask 4（20 points）：$T=0$。\n- Subtask 5（30 points）：$T=1$。\n\n**注意：Subtask 5 依赖前四个 Subtask，只有通过前四个 Subtask 才能尝试获得该 Subtask 的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X2-T5】「Cfz Round 4」Xor-Forces", "background": "原题链接：<https://oier.team/problems/X2E>。\n\n---\n\n✿(。◕ᴗ◕。)✿\n", "description": "给定一个长度为 $n=2^k$ 的数组 $a$，下标从 $0$ 开始，维护 $m$ 次操作：\n\n1. 操作一：给定 $x$，设数列 $a'$ 满足 $a'_i=a_{i\\oplus x}$，将 $a$ 修改为 $a'$。其中 $\\oplus$ 表示按位异或运算。\n2. 操作二：给定 $l,r$，查询 $a$ 的下标在 $l,r$ 之间的子数组有多少颜色段。**不保证 $\\bm {l\\le r}$，若 $\\bm{l > r}$，请自行交换 $\\bm{l,r}$。**\n\n其中，一个极长的所有数都相等的子数组称为一个颜色段。\n\n部分测试点要求强制在线。", "inputFormat": "第一行三个整数 $T,k,m$，其中 $T \\in \\{ 0, 1 \\}$ 为决定是否强制在线的参数。\n\n第二行 $n$ 个整数 $a_0, \\ldots, a_{n-1}$。\n\n接下来 $m$ 行，每行两或三个整数，描述一次操作。第一个整数 $\\mathit{op}$ 表示操作类型。\n\n- 若 $op=1$，为操作一，接下来一个整数 $x'$，满足 $x=x'\\oplus(T\\times \\mathit{lst})$。\n- 若 $op=2$，为操作二，接下来两个整数 $l',r'$，满足 $l=l'\\oplus(T\\times \\mathit{lst})$，$r=r'\\oplus(T\\times \\mathit{lst})$。**不保证 $\\bm{l \\le r}$，若 $\\bm{l > r}$，请自行交换 $\\bm{l, r}$。**\n- 其中 $\\mathit{lst}$ 表示上次询问的答案。特别地，如果此前没有询问操作，则 $\\mathit{lst}=0$。", "outputFormat": "输出若干行，每行包含一个整数，依次表示每个询问的答案。", "hint": "**【样例解释 #1】**\n\n此样例允许离线。\n\n初始时 $a=[1,2,1,3,2,4,5,1]$。\n\n$a$ 的下标在 $1,5$ 之间的子数组为 $[2,1,3,2,4]$，它的颜色段数为 $5$。\n\n进行重排操作后，$a=[3,1,2,1,1,5,4,2]$。\n\n$a$ 的下标在 $5,1$ 之间的子数组为 $[1,2,1,1,5]$，它的颜色段数为 $4$。\n\n**【样例解释 #2】**\n\n此样例除强制在线外，与样例 \\#1 完全一致。\n\n**【数据范围】**\n\n对于所有测试数据，$T \\in \\{ 0, 1 \\}$，$0\\le k\\le 18$，$n=2^k$，$1\\le m\\le 2\\times 10^5$，$1\\le a_i\\le n$，$\\mathit{op} \\in \\{ 1, 2 \\}$，$0\\le x,l,r < n$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（15 points）：$T=1$，$k\\le 10$，$m\\le 10^3$。\n- Subtask 2（15 points）：$T=1$，不存在操作一。\n- Subtask 3（20 points）：$T=1$，对于所有操作二，要么 $l=0,r=n-1$，要么 $l=n-1,r=0$。\n- Subtask 4（20 points）：$T=0$。\n- Subtask 5（30 points）：$T=1$。\n\n**注意：Subtask 5 依赖前四个 Subtask，只有通过前四个 Subtask 才能尝试获得该 Subtask 的分数。**", "locale": "zh-CN"}}}
{"pid": "P10857", "type": "P", "difficulty": 7, "samples": [["2\n2\n1 0\n2 0\n1 2\n4\n75 0 89 1 0 56\n0 52 19 84 1 0\n0 27 19 108 1 0\n0 89 1 0 56 0\n85 19 108 1 0 0\n75 0 89 1 0 56\n1 1 56 0 0 0\n0 88 19 84 1 0\n0 79 19 108 1 0\n74 0 88 1 0 56\n0 88 1 0 56 0\n109 19 84 1 0 0\n19 56 1 0 0 0\n74 0 88 1 0 56\n18 1 0 56 0 0", "2 1\n7 19"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "Ad-hoc", "梦熊比赛"], "title": "【MX-X2-T6】「Cfz Round 4」Ad-hoc Master", "background": "原题链接：<https://oier.team/problems/X2F>。\n\n---\n\n意気込むことはないけれど  \n尽管不会每天干劲十足\n\n生きていけるよ　君をさがして  \n但我会继续一边寻找着你一边生活", "description": "给定一个正整数 $h$。我们令 $n=2^h-1$。\n\n现给出对于每个不大于 $n$ 的正整数 $u$ 和不大于 $2h-2$ 的正整数 $k$ 所对应的 $f_{u,k}$ 的值，你需要构造一组数对 $(r,w)$，满足 $1 \\le r \\le n$，$0 \\le w \\lt 2^{30}$，且存在一棵层数为 $h$ 的**满**二叉树 $T$ 满足：\n\n- 满二叉树 $T$ 中所有结点的编号形成 $1 \\sim n$ 的一个排列，且每个结点都有权值；\n- 满二叉树 $T$ 的根结点为结点 $r$；\n- 满二叉树 $T$ 中每个结点的权值都为小于 $2^{30}$ 的非负整数，且根结点的权值为 $w$；\n- 对于每个不大于 $n$ 的正整数 $u$ 和不大于 $2h-2$ 的正整数 $k$，所有满足 $\\operatorname{dis}(u,v)=k$ 的结点 $v$ 的权值的**异或和**为 $f_{u,k}$；特殊地，若没有满足条件的结点 $v$，则需要满足 $f_{u,k}=0$。\n\n其中，$\\operatorname{dis}(u,v)$ 的值等于结点 $u$ 和结点 $v$ 之间的简单路径所包含的边的数量。特殊地，$\\operatorname{dis}(u,u)=0$。\n\n题目保证至少存在一组满足条件的数对 $(r,w)$。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行一个正整数 $h$。\n- 接下来 $n$ 行，第 $u$ 行包括 $2h-2$ 个整数，其中第 $k$ 个整数表示 $f_{u,k}$ 的值。", "outputFormat": "对于每组测试数据，输出一行两个整数，分别表示你构造的数对 $(r,w)$ 中 $r$ 与 $w$ 的值。\n\n- 若你构造的数对 $(r,w)$ 满足条件，则你可以获得该测试点 $100\\%$ 的分数；\n- 否则，若你构造的数对 $(r,w)$ 不满足条件，但存在一组满足条件的数对 $(r',w')$ 满足 $r'=r$，则你可以获得该测试点 $50\\%$ 的分数；\n- 否则，若你构造的数对 $(r,w)$ 不满足条件，但存在一组满足条件的数对 $(r',w')$ 满足 $w'=w$，则你可以获得该测试点 $50\\%$ 的分数；\n- 否则，你不能获得该测试点的分数。", "hint": "**【样例解释 #1】**\n\n对于第一组测试数据：\n\n当构造的数对 $(r,w)=(2,1)$ 时，存在一棵如图所示的二叉树符合题意，其中结点 $1,2,3$ 的权值分别为 $2,1,0$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/go56fx7w.png)\n\n当你输出 `2 2` 时，你可以获得该测试点 $50\\%$ 的分数，因为 $(r,w)=(2,2)$ 虽然不满足条件，但存在一组满足条件的数对 $(r',w')=(2,1)$ 满足 $r'=r=2$。\n\n当你输出 `1 1` 时，你也可以获得该测试点 $50\\%$ 的分数。\n\n但当你输出 `1 2` 时，你将不能获得该测试点的分数。\n\n**【数据范围】**\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有测试数据，$1\\le T \\le 1000$，$2 \\le h \\le 16$，$\\sum n \\le 2^{16}$，$0 \\le f_{u,k}\\lt2^{30}$，保证至少存在一组满足条件的数对 $(r,w)$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 points）：$h=2$。\n- Subtask 2（20 points）：满足特殊性质。\n- Subtask 3（60 points）：无特殊限制。\n\n特殊性质：存在一组数对 $(r,w)$，满足 $1 \\le r \\le n$，$0 \\le w \\lt 2^{30}$，且在此基础上存在一棵符合题意的满二叉树，其所有结点的权值均为 $w$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X2-T6】「Cfz Round 4」Ad-hoc Master", "background": "原题链接：<https://oier.team/problems/X2F>。\n\n---\n\n意気込むことはないけれど  \n尽管不会每天干劲十足\n\n生きていけるよ　君をさがして  \n但我会继续一边寻找着你一边生活", "description": "给定一个正整数 $h$。我们令 $n=2^h-1$。\n\n现给出对于每个不大于 $n$ 的正整数 $u$ 和不大于 $2h-2$ 的正整数 $k$ 所对应的 $f_{u,k}$ 的值，你需要构造一组数对 $(r,w)$，满足 $1 \\le r \\le n$，$0 \\le w \\lt 2^{30}$，且存在一棵层数为 $h$ 的**满**二叉树 $T$ 满足：\n\n- 满二叉树 $T$ 中所有结点的编号形成 $1 \\sim n$ 的一个排列，且每个结点都有权值；\n- 满二叉树 $T$ 的根结点为结点 $r$；\n- 满二叉树 $T$ 中每个结点的权值都为小于 $2^{30}$ 的非负整数，且根结点的权值为 $w$；\n- 对于每个不大于 $n$ 的正整数 $u$ 和不大于 $2h-2$ 的正整数 $k$，所有满足 $\\operatorname{dis}(u,v)=k$ 的结点 $v$ 的权值的**异或和**为 $f_{u,k}$；特殊地，若没有满足条件的结点 $v$，则需要满足 $f_{u,k}=0$。\n\n其中，$\\operatorname{dis}(u,v)$ 的值等于结点 $u$ 和结点 $v$ 之间的简单路径所包含的边的数量。特殊地，$\\operatorname{dis}(u,u)=0$。\n\n题目保证至少存在一组满足条件的数对 $(r,w)$。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行一个正整数 $h$。\n- 接下来 $n$ 行，第 $u$ 行包括 $2h-2$ 个整数，其中第 $k$ 个整数表示 $f_{u,k}$ 的值。", "outputFormat": "对于每组测试数据，输出一行两个整数，分别表示你构造的数对 $(r,w)$ 中 $r$ 与 $w$ 的值。\n\n- 若你构造的数对 $(r,w)$ 满足条件，则你可以获得该测试点 $100\\%$ 的分数；\n- 否则，若你构造的数对 $(r,w)$ 不满足条件，但存在一组满足条件的数对 $(r',w')$ 满足 $r'=r$，则你可以获得该测试点 $50\\%$ 的分数；\n- 否则，若你构造的数对 $(r,w)$ 不满足条件，但存在一组满足条件的数对 $(r',w')$ 满足 $w'=w$，则你可以获得该测试点 $50\\%$ 的分数；\n- 否则，你不能获得该测试点的分数。", "hint": "**【样例解释 #1】**\n\n对于第一组测试数据：\n\n当构造的数对 $(r,w)=(2,1)$ 时，存在一棵如图所示的二叉树符合题意，其中结点 $1,2,3$ 的权值分别为 $2,1,0$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/go56fx7w.png)\n\n当你输出 `2 2` 时，你可以获得该测试点 $50\\%$ 的分数，因为 $(r,w)=(2,2)$ 虽然不满足条件，但存在一组满足条件的数对 $(r',w')=(2,1)$ 满足 $r'=r=2$。\n\n当你输出 `1 1` 时，你也可以获得该测试点 $50\\%$ 的分数。\n\n但当你输出 `1 2` 时，你将不能获得该测试点的分数。\n\n**【数据范围】**\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有测试数据，$1\\le T \\le 1000$，$2 \\le h \\le 16$，$\\sum n \\le 2^{16}$，$0 \\le f_{u,k}\\lt2^{30}$，保证至少存在一组满足条件的数对 $(r,w)$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 points）：$h=2$。\n- Subtask 2（20 points）：满足特殊性质。\n- Subtask 3（60 points）：无特殊限制。\n\n特殊性质：存在一组数对 $(r,w)$，满足 $1 \\le r \\le n$，$0 \\le w \\lt 2^{30}$，且在此基础上存在一棵符合题意的满二叉树，其所有结点的权值均为 $w$。", "locale": "zh-CN"}}}
{"pid": "P10858", "type": "P", "difficulty": 2, "samples": [["2\n1 1\n4 4", "1 1\n1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2024", "O2优化", "省赛/邀请赛", "湖北"], "title": "[HBCPC2024] Long Live", "background": "", "description": "In Minecraft, there are three dimensions in the simple world, one of which is known as “The End”. In this dimension, the Ender Dragon is usually symbolized as the final boss of Minecraft.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hsvxefjr.png)\n\nNow we, you, and Steve want to beat the dragon. However, we find that the dragon is telling a puzzle. We must solve it before fighting against the dragon. Please stand by our side to fight against the dragon. The puzzle goes as follows.\n\nGiven two positive integers $x$ and $y$, please find two integers $a$ and $b$, such that\n\n$$\\sqrt{\\dfrac{\\operatorname{lcm}(x,y)}{\\gcd(x,y)}}=a\\sqrt{b}$$\n\nand to maximize $a \\cdot b$.\n\nHere, $\\gcd(a, b)$ represents the greatest common divisor of $a, b$, while $\\operatorname{lcm}(a, b)$ represents the least common multiple of $a, b$.", "inputFormat": "The first line contains an integer $T (1 \\leq T \\leq 10^4)$ indicating the number of test cases.\n\nOf the following $T$ lines, each contains two integers $x$ and $y (1 \\leq x, y \\leq 10^9)$, representing the puzzle.", "outputFormat": "Output $T$ lines. Each contains two integers $a$ and $b$, indicating the answer to each test case.", "hint": "Dear all participants:\n\nThis problem may be the very first page, but not where the story line ends. Please believe in yourself all the time, wishing you with my singing, “Long live all the mountains we moved, I had the time of my life fighting dragons with you”.", "locale": "en", "translations": {"en": {"title": "[HBCPC2024] Long Live", "background": "", "description": "In Minecraft, there are three dimensions in the simple world, one of which is known as “The End”. In this dimension, the Ender Dragon is usually symbolized as the final boss of Minecraft.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hsvxefjr.png)\n\nNow we, you, and Steve want to beat the dragon. However, we find that the dragon is telling a puzzle. We must solve it before fighting against the dragon. Please stand by our side to fight against the dragon. The puzzle goes as follows.\n\nGiven two positive integers $x$ and $y$, please find two integers $a$ and $b$, such that\n\n$$\\sqrt{\\dfrac{\\operatorname{lcm}(x,y)}{\\gcd(x,y)}}=a\\sqrt{b}$$\n\nand to maximize $a \\cdot b$.\n\nHere, $\\gcd(a, b)$ represents the greatest common divisor of $a, b$, while $\\operatorname{lcm}(a, b)$ represents the least common multiple of $a, b$.", "inputFormat": "The first line contains an integer $T (1 \\leq T \\leq 10^4)$ indicating the number of test cases.\n\nOf the following $T$ lines, each contains two integers $x$ and $y (1 \\leq x, y \\leq 10^9)$, representing the puzzle.", "outputFormat": "Output $T$ lines. Each contains two integers $a$ and $b$, indicating the answer to each test case.", "hint": "Dear all participants:\n\nThis problem may be the very first page, but not where the story line ends. Please believe in yourself all the time, wishing you with my singing, “Long live all the mountains we moved, I had the time of my life fighting dragons with you”.", "locale": "en"}, "zh-CN": {"title": "[HBCPC2024] Long Live", "background": "", "description": "在 Minecraft 中，简单世界中有三个维度，其中一个被称为“The End”。在这个维度中，末影龙通常被象征为 Minecraft 的最终 Boss。\n\n现在，我们、你和Steve想要打败这条龙。然而，我们发现这条龙出了一道谜题来困扰我们。在与龙战斗之前，我们必须先解开这个谜题。请站在我们这边，与龙一同战斗。谜题如下：\n\n给定两个正整数 $x$ 和 $y$，请找到两个整数 $a$ 和 $b$，使得\n\n$$\\sqrt{\\dfrac{\\operatorname{lcm}(x,y)}{\\gcd(x,y)}}=a\\sqrt{b}$$\n\n并使 $a \\cdot b$ 最大化。\n\n其中，$\\gcd(a, b)$ 表示 $a$ 和 $b$ 的最大公约数，而 $\\operatorname{lcm}(a, b)$ 表示 $a$ 和 $b$ 的最小公倍数。", "inputFormat": "第一行包含一个整数 $T \\ (1 \\leq T \\leq 10^4)$，表示测试用例的数量。\n\n接下来的 $T$ 行中，每行包含两个整数 $x$ 和 $y \\ (1 \\leq x, y \\leq 10^9)$，表示这个谜题。", "outputFormat": "输出 $T$ 行，每行包含两个整数 $a$ 和 $b$，表示每个测试用例的答案。", "hint": "亲爱的所有参赛者：\n\n这个问题可能是故事的开篇，但绝不是故事的结尾。请一直相信自己，愿我的歌声伴随你们，“致我们曾一起翻越的高山，与你并肩战斗巨龙的时光，我度过了生命中最美好的时光”。\n\n翻译者：[Immunoglobules](https://www.luogu.com.cn/user/1066251)", "locale": "zh-CN"}}}
{"pid": "P10859", "type": "P", "difficulty": 3, "samples": [["2\n4\n0 -1\n-3 0\n0 2\n2 2\n3\n-1 -1\n0 0\n1 1", "2\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2024", "Special Judge", "O2优化", "叉积", "省赛/邀请赛", "湖北"], "title": "[HBCPC2024] Nana Likes Polygons", "background": "", "description": "Nana’s electronic pet, MACARON, enjoys moving around in the room. Nana wants to create a boundedarea where MACARON can roam within.\n\nThe positions in the room can be represented using a two-dimensional coordinate system, and Nana provides a set of vertices on it. Nana likes polygons and now wants to select a subset of vertices that can form a convex polygon as its endpoints. However, Nana also wants to ensure that the selected area is not too big.\n\nThus, she is going to determine the minimum possible area of the convex polygon ending on a subset of given vertices. If such a convex polygon doesn’t exist, please output `-1` (without quotes).", "inputFormat": "The first line contains a single integer $T (1 \\leq T \\leq 10)$ — the number of test cases.\n\nFor each test case, the first line contains a single integer $n (1 \\leq n \\leq 100)$ — the number of given vertices.\n\nThe following $n$ lines each contain two integers, and the $i$-th line contains $x_i, y_i (-1000 \\leq x_i, y_i \\leq 1000)$ — the coordinate of the $i$-th vertex.", "outputFormat": "For each test case, if no such convex polygon, please output `-1` without quotes; otherwise output a single real number denoting the minimum possible area of the convex polygon ending on these given vertices.\n\nLet $a$ and $b$ denote the answer and your output respectively. Your output will be accepted if the absolute or relative error of $b$ does not exceed $10^{-6}$. Formally, your output is accepted if and only if $\\dfrac{|a-b|}{\\max(a,b)} \\leq 10^{-6}$", "hint": "For the first test case, choose $(2, 2), (−3, 0)$, and $(0, 2)$ as endpoints of a convex polygon with area $2$. It can be proved that this is the minimized area in this case.\n\nFor the second test case, no convex polygon can be formed by these three vertices.", "locale": "en", "translations": {"en": {"title": "[HBCPC2024] Nana Likes Polygons", "background": "", "description": "Nana’s electronic pet, MACARON, enjoys moving around in the room. Nana wants to create a boundedarea where MACARON can roam within.\n\nThe positions in the room can be represented using a two-dimensional coordinate system, and Nana provides a set of vertices on it. Nana likes polygons and now wants to select a subset of vertices that can form a convex polygon as its endpoints. However, Nana also wants to ensure that the selected area is not too big.\n\nThus, she is going to determine the minimum possible area of the convex polygon ending on a subset of given vertices. If such a convex polygon doesn’t exist, please output `-1` (without quotes).", "inputFormat": "The first line contains a single integer $T (1 \\leq T \\leq 10)$ — the number of test cases.\n\nFor each test case, the first line contains a single integer $n (1 \\leq n \\leq 100)$ — the number of given vertices.\n\nThe following $n$ lines each contain two integers, and the $i$-th line contains $x_i, y_i (-1000 \\leq x_i, y_i \\leq 1000)$ — the coordinate of the $i$-th vertex.", "outputFormat": "For each test case, if no such convex polygon, please output `-1` without quotes; otherwise output a single real number denoting the minimum possible area of the convex polygon ending on these given vertices.\n\nLet $a$ and $b$ denote the answer and your output respectively. Your output will be accepted if the absolute or relative error of $b$ does not exceed $10^{-6}$. Formally, your output is accepted if and only if $\\dfrac{|a-b|}{\\max(a,b)} \\leq 10^{-6}$", "hint": "For the first test case, choose $(2, 2), (−3, 0)$, and $(0, 2)$ as endpoints of a convex polygon with area $2$. It can be proved that this is the minimized area in this case.\n\nFor the second test case, no convex polygon can be formed by these three vertices.", "locale": "en"}, "zh-CN": {"title": "[HBCPC2024] Nana Likes Polygons", "background": "", "description": "娜娜的电子宠物 MACARON 喜欢在房间里四处走动。娜娜想要创建一个有界区域，让 MACARON 可以在其中活动。\n\n房间中的位置可以用二维坐标系表示，娜娜提供了一组顶点。娜娜喜欢多边形，现在想选择一个顶点的子集，形成一个凸多边形的端点。然而，娜娜还希望确保选择的区域不要太大。\n\n因此，她将确定以给定顶点的子集为端点的凸多边形的最小可能面积。如果不存在这样的凸多边形，请输出 `-1`（不带引号）。", "inputFormat": "第一行包含一个整数 $T (1 \\leq T \\leq 10)$ —— 测试用例的数量。\n\n对于每个测试用例，第一行包含一个整数 $n (1 \\leq n \\leq 100)$ —— 给定顶点的数量。\n\n接下来的 $n$ 行每行包含两个整数，第 $i$ 行包含 $x_i, y_i (-1000 \\leq x_i, y_i \\leq 1000)$ —— 第 $i$ 个顶点的坐标。", "outputFormat": "对于每个测试用例，如果不存在这样的凸多边形，请输出 `-1`（不带引号）；否则输出一个实数，表示以这些给定顶点为端点的凸多边形的最小可能面积。\n\n设 $a$ 和 $b$ 分别表示答案和你的输出。如果 $b$ 的绝对误差或相对误差不超过 $10^{-6}$，你的输出将被接受。形式上，如果且仅如果 $\\dfrac{|a-b|}{\\max(a,b)} \\leq 10^{-6}$，你的输出才会被接受。", "hint": "对于第一个测试用例，选择 $(2, 2), (-3, 0)$ 和 $(0, 2)$ 作为一个凸多边形的端点，其面积为 2。可以证明这是该情况下的最小面积。\n\n对于第二个测试用例，这三个顶点无法形成凸多边形。（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10860", "type": "P", "difficulty": 7, "samples": [["8\n1 1 1 1\n1 2 1 2\n1 3 1 3\n2 1 2 1\n2 3 2 3\n3 1 3 1\n3 2 3 2\n3 3 3 3", "4"], ["2\n1 1 100 100\n1 501 100 600", "2"], ["4\n1 1 4 1\n1 4 5 4\n1 1 1 4\n4 1 4 5", "5"], ["9\n1 1 9 1\n1 1 1 9\n1 9 9 9\n9 1 9 9\n3 3 7 3\n3 3 3 7\n3 7 7 7\n7 3 7 7\n5 5 5 5", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "离散化", "网络流", "O2优化", "省赛/邀请赛", "湖北"], "title": "[HBCPC2024] Lili Likes Polygons", "background": "", "description": "Lili and Nana are weeding in the backyard of Lili’s house. They are repeatedly selecting rectangular areas and removing all the grass within them.\n\nThe backyard can be visualized as a 2D grid, each square cell representing one unit area. They have performed a total of $n$ operations. During the $i$-th operation, they choose the left, bottom, right, and top sides of a rectangle, denoted as $l_i, b_i, r_i, t_i$, and clear all the cells within this rectangle using a lawnmower. **Note that these rectangles may overlap with each other.**\n\nLet $[l_i, r_i]\\times[b_i, t_i]$ denote a rectangle.\n\nHere is an example illustrated in the following figure.  They have selected $2$ rectangles, with the first rectangle being $[1, 5]\\times[2, 3]$ and the second rectangle being $[2, 3]\\times[1, 4]$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nb9g0n5i.png)\n\nAfter the $n$ weeding operations, the union of the bare area may not be connected but all the sides are horizontal or vertical. Thus, the union becomes orthogonal polygon(s), some of which contain polygon holes.  Moreover, there can be bare cells inner some holes. Please see the example inputs for more details and illustrations.\n\nNow, they want to restore the land by planting some plants on the bare cells. Lili likes polygons, especially rectangles. Therefore, they want to select several rectangles, and these rectangles do not overlap with each other and exactly cover all the bare cells. Then, they plant different plants in different rectangles they selected.\n\nFor example, here is a feasible selection of rectangles for the aforementioned case: choose $[1, 1]\\times [2, 3]$, $[2, 3]\\times[1, 4]$ and $[4, 5]\\times [2, 3]$.\n\nAfter playing for a while, these two little girls have become tired, so they want to know the minimum number of non-overlapping rectangles that can cover all the bare cells.", "inputFormat": "The first line contains a single integer $n$ ($1\\leq n\\leq 300$) --- the number of rectangles when they weed.\n\nThe following $n$ lines each contain $4$ integers, and the $i$-th line contains $l_i, b_i, r_i, t_i$ ($1\\leq l_i, b_i, r_i, t_i\\leq 10^9, l_i\\leq r_i, b_i\\leq t_i$) --- the left, bottom, right, and top sides of the $i$-th rectangle.\n\nIt is guaranteed the sum of the endpoints of the bare area (polygon(s) with polygonal holes) does not exceed $2000$.", "outputFormat": "Output a single integer on a single line denoting the minimum number of rectangles they need to select to plant plants on all the bare cells.", "hint": "For the first example, an optimal selection is $[1, 1]\\times [1, 3]$, $[2, 1]\\times [2, 1]$,  $[2, 3]\\times [2, 3]$ and $[3, 1]\\times [3, 3]$.\n\nFor the second example, an optimal selection is $[1, 1]\\times [100, 100]$ and $[1, 501]\\times [100, 600]$.\n\nFor the third example, an optimal selection is $[1, 1]\\times [4, 1]$, $[1, 4]\\times [5, 4]$,  $[1, 2]\\times [1, 3]$, $[4, 2]\\times [4, 3]$ and $[4, 5]\\times [4, 5]$.\n\nFor the fourth example, the bare area is illustrated in the following figure. \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uun9l7e6.png)", "locale": "en", "translations": {"en": {"title": "[HBCPC2024] Lili Likes Polygons", "background": "", "description": "Lili and Nana are weeding in the backyard of Lili’s house. They are repeatedly selecting rectangular areas and removing all the grass within them.\n\nThe backyard can be visualized as a 2D grid, each square cell representing one unit area. They have performed a total of $n$ operations. During the $i$-th operation, they choose the left, bottom, right, and top sides of a rectangle, denoted as $l_i, b_i, r_i, t_i$, and clear all the cells within this rectangle using a lawnmower. **Note that these rectangles may overlap with each other.**\n\nLet $[l_i, r_i]\\times[b_i, t_i]$ denote a rectangle.\n\nHere is an example illustrated in the following figure.  They have selected $2$ rectangles, with the first rectangle being $[1, 5]\\times[2, 3]$ and the second rectangle being $[2, 3]\\times[1, 4]$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nb9g0n5i.png)\n\nAfter the $n$ weeding operations, the union of the bare area may not be connected but all the sides are horizontal or vertical. Thus, the union becomes orthogonal polygon(s), some of which contain polygon holes.  Moreover, there can be bare cells inner some holes. Please see the example inputs for more details and illustrations.\n\nNow, they want to restore the land by planting some plants on the bare cells. Lili likes polygons, especially rectangles. Therefore, they want to select several rectangles, and these rectangles do not overlap with each other and exactly cover all the bare cells. Then, they plant different plants in different rectangles they selected.\n\nFor example, here is a feasible selection of rectangles for the aforementioned case: choose $[1, 1]\\times [2, 3]$, $[2, 3]\\times[1, 4]$ and $[4, 5]\\times [2, 3]$.\n\nAfter playing for a while, these two little girls have become tired, so they want to know the minimum number of non-overlapping rectangles that can cover all the bare cells.", "inputFormat": "The first line contains a single integer $n$ ($1\\leq n\\leq 300$) --- the number of rectangles when they weed.\n\nThe following $n$ lines each contain $4$ integers, and the $i$-th line contains $l_i, b_i, r_i, t_i$ ($1\\leq l_i, b_i, r_i, t_i\\leq 10^9, l_i\\leq r_i, b_i\\leq t_i$) --- the left, bottom, right, and top sides of the $i$-th rectangle.\n\nIt is guaranteed the sum of the endpoints of the bare area (polygon(s) with polygonal holes) does not exceed $2000$.", "outputFormat": "Output a single integer on a single line denoting the minimum number of rectangles they need to select to plant plants on all the bare cells.", "hint": "For the first example, an optimal selection is $[1, 1]\\times [1, 3]$, $[2, 1]\\times [2, 1]$,  $[2, 3]\\times [2, 3]$ and $[3, 1]\\times [3, 3]$.\n\nFor the second example, an optimal selection is $[1, 1]\\times [100, 100]$ and $[1, 501]\\times [100, 600]$.\n\nFor the third example, an optimal selection is $[1, 1]\\times [4, 1]$, $[1, 4]\\times [5, 4]$,  $[1, 2]\\times [1, 3]$, $[4, 2]\\times [4, 3]$ and $[4, 5]\\times [4, 5]$.\n\nFor the fourth example, the bare area is illustrated in the following figure. \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uun9l7e6.png)", "locale": "en"}, "zh-CN": {"title": "[HBCPC2024] Lili Likes Polygons", "background": null, "description": "莉莉和娜娜正在莉莉家后院除草。她们反复选择矩形区域，并移除其中的所有草坪。\n\n后院可以被视为一个二维网格，每个方格表示一个单位面积。她们共进行了 $n$ 次操作。在第 $i$ 次操作中，她们选择了一个矩形的左、下、右、上的边界，分别表示为 $l_i, b_i, r_i, t_i$，并使用割草机清除该矩形内的所有方格。**注意，这些矩形可能会相互重叠。**\n\n用 $[l_i, r_i] \\times [b_i, t_i]$ 表示一个矩形。\n\n以下是一个例子，如图所示。她们选择了 $2$ 个矩形，第一个矩形是 $[1, 5] \\times [2, 3]$，第二个矩形是 $[2, 3] \\times [1, 4]$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nb9g0n5i.png)\n\n经过 $n$ 次除草操作后，裸露区域的联合可能不连通，但所有边都是水平或垂直的。因此，联合区域变成了一个或多个直角多边形，其中一些可能包含多边形孔洞。此外，在某些孔洞内部可能会有裸露的方格。更多细节和图示请参见示例输入。\n\n现在，她们想通过在裸露的方格上种植植物来恢复土地。莉莉喜欢多边形，特别是矩形。因此，她们想选择若干个矩形，这些矩形之间不重叠，并且能够完全覆盖所有的裸露方格。然后，她们将在选择的不同矩形中种植不同的植物。\n\n例如，下面是上述情况的一个可行的矩形选择：选择 $[1, 1] \\times [2, 3]$、$[2, 3] \\times [1, 4]$ 和 $[4, 5] \\times [2, 3]$。\n\n玩了一会儿，这两个小女孩已经累了，所以她们想知道覆盖所有裸露方格的最小不重叠矩形数量。", "inputFormat": "第一行包含一个整数 $n$ ($1 \\leq n \\leq 300$) —— 表示除草时使用的矩形数量。\n\n接下来的 $n$ 行每行包含 $4$ 个整数，第 $i$ 行包含 $l_i, b_i, r_i, t_i$ ($1 \\leq l_i, b_i, r_i, t_i \\leq 10^9, l_i \\leq r_i, b_i \\leq t_i$) —— 表示第 $i$ 个矩形的左、下、右、上边界。\n\n保证裸露区域的端点总数（多边形及其孔洞）不超过 $2000$。", "outputFormat": "在一行上输出一个整数，表示覆盖所有裸露方格所需选择的最小矩形数量。", "hint": "对于第一个例子，最优选择是 $[1, 1] \\times [1, 3]$、$[2, 1] \\times [2, 1]$、$[2, 3] \\times [2, 3]$ 和 $[3, 1] \\times [3, 3]$。\n\n对于第二个例子，最优选择是 $[1, 1] \\times [100, 100]$ 和 $[1, 501] \\times [100, 600]$。\n\n对于第三个例子，最优选择是 $[1, 1] \\times [4, 1]$、$[1, 4] \\times [5, 4]$、$[1, 2] \\times [1, 3]$、$[4, 2] \\times [4, 3]$ 和 $[4, 5] \\times [4, 5]$。\n\n对于第四个例子，裸露区域如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uun9l7e6.png)\n\n翻译者：[Immunoglobules](https://www.luogu.com.cn/user/1066251)", "locale": "zh-CN"}}}
{"pid": "P10861", "type": "P", "difficulty": 6, "samples": [["10 4 5\n1 2 3 4 5 5 6 5 4 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "O2优化", "分治", "四边形不等式", "省赛/邀请赛", "湖北"], "title": "[HBCPC2024] MACARON Likes Happy Endings", "background": "", "description": "MACARON is going to read a book, which contains $n$ chapters, and the $i$-th chapter has $a_i$ characters. \nMACARON wants to read this book in the next $k$ days. \nOn each day, he either reads several chapters from the first unread chapter, or just takes a rest (does not read the book), but he should finish his reading in $k$ days.\n\nMACARON enjoys his reading time and likes happy endings, so he does not want to be too sad during these days.\nHe has an unlucky number $d$, because he thinks number $d$ will lead to a bad ending.\nWe use a sadness value to quantify his mood on each day.\nOn the $i$-th day, if he reads, suppose that he reads chapters from $L_i$ to $R_i$.\nThe sadness value of this day is the number of intervals $[l, r]$ such that $L_i\\leq l\\leq r\\leq R_i$ and $\\bigoplus_{i=l}^r a_i=d$.\nThe $\\oplus$ denotes the bitwise XOR operator.\nIf he doesn't read, let the sadness value be $0$.\n\nMACARON wants to arrange his reading schedule to minimize the sum of sadness value in $k$ days.\nCan you help him find the minimum value?", "inputFormat": "The first line contains three integers $n, k$ and $d$ ($1\\leq n\\leq 10^5, 1\\leq k\\leq \\min(n, 20), 0\\leq d\\leq 10^6$) --- the number of chapters, the days for reading, and the unlucky number.\n\nThe second line contains $n$ integers $a_i$ ($0\\leq a_i\\leq 10^6$) --- the number of characters in each chapter.", "outputFormat": "Output a single integer denoting the minimized sum of the sadness value.", "hint": "Here is an optimal schedule for reading:\n\n- on the first day, just take a rest, and the sadness value is 0;\n- on the second day, read from chapter 1 to chapter 3, and the sadness value is 0;\n- on the third day, read from chapter 4 to chapter 7, and the sadness value is 2;\n- on the fourth day, read from chapter 8 to chapter 10, and the sadness value is 1.", "locale": "en", "translations": {"en": {"title": "[HBCPC2024] MACARON Likes Happy Endings", "background": "", "description": "MACARON is going to read a book, which contains $n$ chapters, and the $i$-th chapter has $a_i$ characters. \nMACARON wants to read this book in the next $k$ days. \nOn each day, he either reads several chapters from the first unread chapter, or just takes a rest (does not read the book), but he should finish his reading in $k$ days.\n\nMACARON enjoys his reading time and likes happy endings, so he does not want to be too sad during these days.\nHe has an unlucky number $d$, because he thinks number $d$ will lead to a bad ending.\nWe use a sadness value to quantify his mood on each day.\nOn the $i$-th day, if he reads, suppose that he reads chapters from $L_i$ to $R_i$.\nThe sadness value of this day is the number of intervals $[l, r]$ such that $L_i\\leq l\\leq r\\leq R_i$ and $\\bigoplus_{i=l}^r a_i=d$.\nThe $\\oplus$ denotes the bitwise XOR operator.\nIf he doesn't read, let the sadness value be $0$.\n\nMACARON wants to arrange his reading schedule to minimize the sum of sadness value in $k$ days.\nCan you help him find the minimum value?", "inputFormat": "The first line contains three integers $n, k$ and $d$ ($1\\leq n\\leq 10^5, 1\\leq k\\leq \\min(n, 20), 0\\leq d\\leq 10^6$) --- the number of chapters, the days for reading, and the unlucky number.\n\nThe second line contains $n$ integers $a_i$ ($0\\leq a_i\\leq 10^6$) --- the number of characters in each chapter.", "outputFormat": "Output a single integer denoting the minimized sum of the sadness value.", "hint": "Here is an optimal schedule for reading:\n\n- on the first day, just take a rest, and the sadness value is 0;\n- on the second day, read from chapter 1 to chapter 3, and the sadness value is 0;\n- on the third day, read from chapter 4 to chapter 7, and the sadness value is 2;\n- on the fourth day, read from chapter 8 to chapter 10, and the sadness value is 1.", "locale": "en"}, "zh-CN": {"title": "[HBCPC2024] MACARON Likes Happy Endings", "background": null, "description": "MACARON 要读一本书，这本书包含 $n$ 章，第 $i$ 章有 $a_i$ 个字符。\nMACARON 想在接下来的 $k$ 天内读完这本书。\n每天，他要么从未读的第一章开始读若干章，要么就休息（不读书），但他必须在 $k$ 天内完成阅读。\n\nMACARON 享受他的阅读时间，并喜欢圆满的结局，所以他不希望在这些日子里太过悲伤。\n他有一个不吉利的数字 $d$，因为他认为数字 $d$ 会导致不好的结局。\n我们用一个悲伤值来量化他每天的心情。\n在第 $i$ 天，如果他阅读，假设他读了从 $L_i$ 到 $R_i$ 的章节。\n这一天的悲伤值是满足 $L_i\\leq l\\leq r\\leq R_i$ 且 $\\bigoplus_{i=l}^r a_i=d$ 的区间 $[l, r]$ 的数量。\n这里的 $\\oplus$ 表示按位异或运算符。\n如果他不读书，则悲伤值为 0。\n\nMACARON 想安排他的阅读计划，以最小化 $k$ 天内悲伤值的总和。\n你能帮他找到最小值吗？", "inputFormat": "第一行包含三个整数 $n, k$ 和 $d$（$1\\leq n\\leq 10^5, 1\\leq k\\leq \\min(n, 20), 0\\leq d\\leq 10^6$）——章节数、阅读天数和不吉利的数字。\n\n第二行包含 $n$ 个整数 $a_i$（$0\\leq a_i\\leq 10^6$）——每章的字符数。", "outputFormat": "输出一个整数，表示最小化后的悲伤值总和。", "hint": "以下是一个最优的阅读计划：\n\n- 第一天，休息，悲伤值为 0；\n- 第二天，阅读第 1 章到第 3 章，悲伤值为 0；\n- 第三天，阅读第 4 章到第 7 章，悲伤值为 2；\n- 第四天，阅读第 8 章到第 10 章，悲伤值为 1。（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10862", "type": "P", "difficulty": 1, "samples": [["3\n600 200 27 26\n750 0 26 27\n750 750 1 1", "16000\n19500\n750"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "O2优化", "省赛/邀请赛", "湖北"], "title": "[HBCPC2024] Spicy or Grilled?", "background": "", "description": "Since a regular programming contest lasts for five hours, it's a big problem to prepare contestants' food during the contest.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nh1zzieg.png)\n\nIn the 20XX International Collegiate Programming Contest in Hubei Province, China, there were $n$ contestants participating in the contest. The host wanted to prepare a Spicy Chicken Burger Set for every contestant, which was $a$ dollars per set at that time. But since there were some people who could not bear the spiciness like Walk Alone, a Grilled Chicken Burger Set was prepared for these people, which was $b$ dollars per set. Before the contest, the host had collected the number $x$ of people who wanted to eat a Grilled Chicken Burger Set.\n\nBut Walk Alone was too stupid and lazy to calculate how much the host would spend. Please help him to calculate.", "inputFormat": "In the first line,there is an integer $T$ ($1 \\leq T \\leq 10^4$) denoting the number of test cases. \n\nFor each test case, there are four integers $n$, $x$, $a$ and $b$ ($1 \\leq n, a, b \\leq 10^4, 0 \\le x \\le n$) in each line, representing the number of contestants in total, the number of contestants who want Grilled Chicken Burger Set, the price of Spicy Chicken Burger Set and Grilled Chicken Burger Set per set.", "outputFormat": "For each test case, output a single integer denoting the total money the host would spend.", "hint": "In the first test case, there were $400$ people chosen the Spicy Chicken Burger Set and $200$ people chosen the Grilled one. So the total money is $400 \\times 27 + 200 \\times 26 = 16\\ 000$ dollars.", "locale": "en", "translations": {"en": {"title": "[HBCPC2024] Spicy or Grilled?", "background": "", "description": "Since a regular programming contest lasts for five hours, it's a big problem to prepare contestants' food during the contest.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nh1zzieg.png)\n\nIn the 20XX International Collegiate Programming Contest in Hubei Province, China, there were $n$ contestants participating in the contest. The host wanted to prepare a Spicy Chicken Burger Set for every contestant, which was $a$ dollars per set at that time. But since there were some people who could not bear the spiciness like Walk Alone, a Grilled Chicken Burger Set was prepared for these people, which was $b$ dollars per set. Before the contest, the host had collected the number $x$ of people who wanted to eat a Grilled Chicken Burger Set.\n\nBut Walk Alone was too stupid and lazy to calculate how much the host would spend. Please help him to calculate.", "inputFormat": "In the first line,there is an integer $T$ ($1 \\leq T \\leq 10^4$) denoting the number of test cases. \n\nFor each test case, there are four integers $n$, $x$, $a$ and $b$ ($1 \\leq n, a, b \\leq 10^4, 0 \\le x \\le n$) in each line, representing the number of contestants in total, the number of contestants who want Grilled Chicken Burger Set, the price of Spicy Chicken Burger Set and Grilled Chicken Burger Set per set.", "outputFormat": "For each test case, output a single integer denoting the total money the host would spend.", "hint": "In the first test case, there were $400$ people chosen the Spicy Chicken Burger Set and $200$ people chosen the Grilled one. So the total money is $400 \\times 27 + 200 \\times 26 = 16\\ 000$ dollars.", "locale": "en"}, "zh-CN": {"title": "[HBCPC2024] Spicy or Grilled?", "background": "", "description": "由于一场常规的编程比赛持续五个小时，因此在比赛期间为参赛者准备食物是一个大问题。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nh1zzieg.png)\n\n在 20XX 年中国湖北省的国际大学生程序设计竞赛中，有 $n$ 名参赛者参加比赛。主办方希望为每位参赛者准备一份辣鸡汉堡套餐，当时每份套餐的价格为 $a$ 美元。但由于有些人无法忍受辣味，比如 Walk Alone，主办方为这些人准备了烤鸡汉堡套餐，每份套餐的价格为 $b$ 美元。比赛前，主办方收集了想要吃烤鸡汉堡套餐的人数 $x$。\n\n但 Walk Alone 太笨太懒，无法计算主办方将花费多少钱。请帮助他计算。", "inputFormat": "第一行有一个整数 $T$ ($1 \\leq T \\leq 10^4$)，表示测试用例的数量。\n\n对于每个测试用例，每行有四个整数 $n$、$x$、$a$ 和 $b$ ($1 \\leq n, a, b \\leq 10^4, 0 \\le x \\le n$)，分别表示参赛者总数、想要烤鸡汉堡套餐的参赛者人数、辣鸡汉堡套餐的价格和烤鸡汉堡套餐的价格。", "outputFormat": "对于每个测试用例，输出一个整数，表示主办方将花费的总金额。", "hint": "在第一个测试用例中，有 $400$ 人选择了辣鸡汉堡套餐，$200$ 人选择了烤鸡汉堡套餐。因此总金额为 $400 \\times 27 + 200 \\times 26 = 16\\ 000$ 美元。（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10863", "type": "P", "difficulty": 5, "samples": [["6 3 2 1 3", "1\n3\n2"], ["10 15 5 4 7", "0\n9\n9\n0\n64\n0\n0"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["树状数组", "2024", "O2优化", "可持久化线段树", "省赛/邀请赛", "湖北"], "title": "[HBCPC2024] Enchanted", "background": "", "description": "In Minecraft, one way to become stronger is to have the armors and weapons enchanted. Enchanted books play an important role.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pc5cf4e8.png)\n\nThe most important attribute of an enchanted book is its level. The higher the level is, the better the book is. We could merge two books with the same level  $l$ into one new book(the older two will disappear). The level of the new book is $l+1$ and the merger costs $2^{l+1}$.\n\nNow, Steve has $n$ enchanted books numbered from $1$ to $n$. Initially, the $i$-th book's level is $a_i$. Steve asks you to help him with the following four operations.\n\n1. Given two integers $l,r(1 \\le l \\le r \\le n)$, calculate the maximum level Steve can reach by merging books numbered from $l$ to $r$.\n2.  Given three integers $l,r(1 \\le l \\le r \\le n)$ and $k$, then follow the steps:   \nStep $1$: Steve merges all the books numbered from $l$ to $r$ until there does not exist two books with the same level.    \nStep $2$: Steve adds one new book with level $k$ to the books he gets in Step $1$.     \nStep $3$: Steve needs to merge books he gets in Step $2$ and he wants to maximize the times he merges the books.    \nPlease calculate and output the total cost modulo $10^9+7$ in Step $3$.     \n$\\textbf{Note that, after calculating, the sequence is restored. That is, this operation does NOT actually change the sequence.}$\n\n3. Given two integers $pos,k$, Steve changes the level of the book numbered $pos$ to $k$.\n\n4. Given one integer $t$, Steve restores the sequence to the state after the $t$-th operation. If $t=0$, then Steve restores the sequence to the beginning state.", "inputFormat": "The first and the only line contains 5 integers $n,m,A,p,q$.($1 \\leq n \\leq 10^6$, $1 \\leq m \\leq 10^6$, $1 \\leq A \\leq 19\\,260\\,817$, $1 \\leq p \\leq 4$, $1 \\leq q \\leq 30$)\n\nPlease pay attention! To avoid large input file, the true input is constructed through the following strategy:\n\n$\\textbf{Function rnd():}\\ \\ \\ \\\\\nA \\leftarrow (7A+13) \\bmod 19\\,260\\,817\\ \\ \\ \\\\ \\textbf{return } A$\n\nFirstly, $n$ integers $a_1,a_2,\\cdots,a_n$ are generated in turn, $a_i \\leftarrow rnd() \\bmod q + 1$.\n\nThen, the parameters of all operations are generated.\n\nFor each operation, the number of operation(representing by $opt$) is firstly generated, $opt \\leftarrow rnd() \\bmod p + 1$.\n\nAccording to the number of operation, the different method is applied to generate parameters for different operation.\n\n- For operation 1: we need to get $l$ and $r$ by using:\n  - $L \\leftarrow rnd() \\bmod n + 1$\n  - $R \\leftarrow rnd() \\bmod n + 1$\n  - $l \\leftarrow \\min(L,R)$\n  - $r \\leftarrow \\max(L,R)$\n\n- For operation 2: we need to get $l,r$ and $k$ by using:\n  - $L \\leftarrow rnd() \\bmod n + 1$\n  - $R \\leftarrow rnd() \\bmod n + 1$\n  - $l \\leftarrow \\min(L,R)$\n  - $r \\leftarrow \\max(L,R)$\n  - $k \\leftarrow rnd() \\bmod q + 1$\n\n- For operation 3: we need to get $pos$ and $k$ by using:\n  - $pos \\leftarrow rnd() \\bmod n + 1$\n  - $k \\leftarrow rnd() \\bmod q + 1$\n\n- For operation 4: we need to get $t$ by using:\n\n  - $t \\leftarrow rnd() \\bmod i$\n\nHere, $i$ represents the $i$-th operation.", "outputFormat": "For each operation 1 and 2, you need to output one single line with an integer, representing the answer to operation 1 and 2 modulo $10^9 + 7$.", "hint": "Function `max` means the maximum one between the parameters. Function `min` means the minimum one between the parameters.\n\nIn example 1, the initial books are $[1,2,3,1,2,3]$. The three operations' ranges are $[4,4]$, $[1,3]$ and $[4,5]$.", "locale": "en", "translations": {"en": {"title": "[HBCPC2024] Enchanted", "background": "", "description": "In Minecraft, one way to become stronger is to have the armors and weapons enchanted. Enchanted books play an important role.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pc5cf4e8.png)\n\nThe most important attribute of an enchanted book is its level. The higher the level is, the better the book is. We could merge two books with the same level  $l$ into one new book(the older two will disappear). The level of the new book is $l+1$ and the merger costs $2^{l+1}$.\n\nNow, Steve has $n$ enchanted books numbered from $1$ to $n$. Initially, the $i$-th book's level is $a_i$. Steve asks you to help him with the following four operations.\n\n1. Given two integers $l,r(1 \\le l \\le r \\le n)$, calculate the maximum level Steve can reach by merging books numbered from $l$ to $r$.\n2.  Given three integers $l,r(1 \\le l \\le r \\le n)$ and $k$, then follow the steps:   \nStep $1$: Steve merges all the books numbered from $l$ to $r$ until there does not exist two books with the same level.    \nStep $2$: Steve adds one new book with level $k$ to the books he gets in Step $1$.     \nStep $3$: Steve needs to merge books he gets in Step $2$ and he wants to maximize the times he merges the books.    \nPlease calculate and output the total cost modulo $10^9+7$ in Step $3$.     \n$\\textbf{Note that, after calculating, the sequence is restored. That is, this operation does NOT actually change the sequence.}$\n\n3. Given two integers $pos,k$, Steve changes the level of the book numbered $pos$ to $k$.\n\n4. Given one integer $t$, Steve restores the sequence to the state after the $t$-th operation. If $t=0$, then Steve restores the sequence to the beginning state.", "inputFormat": "The first and the only line contains 5 integers $n,m,A,p,q$.($1 \\leq n \\leq 10^6$, $1 \\leq m \\leq 10^6$, $1 \\leq A \\leq 19\\,260\\,817$, $1 \\leq p \\leq 4$, $1 \\leq q \\leq 30$)\n\nPlease pay attention! To avoid large input file, the true input is constructed through the following strategy:\n\n$\\textbf{Function rnd():}\\ \\ \\ \\\\\nA \\leftarrow (7A+13) \\bmod 19\\,260\\,817\\ \\ \\ \\\\ \\textbf{return } A$\n\nFirstly, $n$ integers $a_1,a_2,\\cdots,a_n$ are generated in turn, $a_i \\leftarrow rnd() \\bmod q + 1$.\n\nThen, the parameters of all operations are generated.\n\nFor each operation, the number of operation(representing by $opt$) is firstly generated, $opt \\leftarrow rnd() \\bmod p + 1$.\n\nAccording to the number of operation, the different method is applied to generate parameters for different operation.\n\n- For operation 1: we need to get $l$ and $r$ by using:\n  - $L \\leftarrow rnd() \\bmod n + 1$\n  - $R \\leftarrow rnd() \\bmod n + 1$\n  - $l \\leftarrow \\min(L,R)$\n  - $r \\leftarrow \\max(L,R)$\n\n- For operation 2: we need to get $l,r$ and $k$ by using:\n  - $L \\leftarrow rnd() \\bmod n + 1$\n  - $R \\leftarrow rnd() \\bmod n + 1$\n  - $l \\leftarrow \\min(L,R)$\n  - $r \\leftarrow \\max(L,R)$\n  - $k \\leftarrow rnd() \\bmod q + 1$\n\n- For operation 3: we need to get $pos$ and $k$ by using:\n  - $pos \\leftarrow rnd() \\bmod n + 1$\n  - $k \\leftarrow rnd() \\bmod q + 1$\n\n- For operation 4: we need to get $t$ by using:\n\n  - $t \\leftarrow rnd() \\bmod i$\n\nHere, $i$ represents the $i$-th operation.", "outputFormat": "For each operation 1 and 2, you need to output one single line with an integer, representing the answer to operation 1 and 2 modulo $10^9 + 7$.", "hint": "Function `max` means the maximum one between the parameters. Function `min` means the minimum one between the parameters.\n\nIn example 1, the initial books are $[1,2,3,1,2,3]$. The three operations' ranges are $[4,4]$, $[1,3]$ and $[4,5]$.", "locale": "en"}, "zh-CN": {"title": "[HBCPC2024] Enchanted", "background": "", "description": "在《Minecraft》中，变得更强的一种方式是让盔甲和武器附魔。附魔书在其中扮演了重要角色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pc5cf4e8.png)\n\n附魔书最重要的属性是其等级。等级越高，书越好。我们可以将两本相同等级 $l$ 的书合并成一本新书（原来的两本书将消失）。新书的等级为 $l+1$，合并的费用为 $2^{l+1}$。\n\n现在，Steve 有 $n$ 本编号从 $1$ 到 $n$ 的附魔书。最初，第 $i$ 本书的等级为 $a_i$。Steve 请你帮助他完成以下四种操作。\n\n1. 给定两个整数 $l,r(1 \\le l \\le r \\le n)$，计算通过合并编号从 $l$ 到 $r$ 的书能达到的最大等级。\n2. 给定三个整数 $l,r(1 \\le l \\le r \\le n)$ 和 $k$，然后按照以下步骤操作：\n步骤 $1$：Steve 合并编号从 $l$ 到 $r$ 的所有书，直到不存在两本等级相同的书。\n步骤 $2$：Steve 将一个新书等级为 $k$ 的书加入步骤 $1$ 中得到的书中。\n步骤 $3$：Steve 需要合并步骤 $2$ 中得到的书，并希望最大化合并次数。\n请计算并输出步骤 $3$ 中的总费用对 $10^9+7$ 取模的结果。\n\\textbf{注意，计算后，序列会恢复。也就是说，此操作实际上不会改变序列。}\n\n3. 给定两个整数 $pos,k$，Steve 将编号为 $pos$ 的书的等级改为 $k$。\n\n4. 给定一个整数 $t$，Steve 将序列恢复到第 $t$ 次操作后的状态。如果 $t=0$，则 Steve 将序列恢复到初始状态。", "inputFormat": "第一行也是唯一一行包含 5 个整数 $n,m,A,p,q$。($1 \\leq n \\leq 10^6$, $1 \\leq m \\leq 10^6$, $1 \\leq A \\leq 19\\,260\\,817$, $1 \\leq p \\leq 4$, $1 \\leq q \\leq 30$)\n\n请注意！为了避免输入文件过大，真实输入是通过以下策略构造的：\n\n$\\textbf{func rnd():}\\ \\ \\ \\\\\nA \\leftarrow (7A+13) \\bmod 19\\,260\\,817\\ \\ \\ \\\\ \\textbf{return } A$\n\n首先，生成 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，依次生成，$a_i \\leftarrow rnd() \\bmod q + 1$。\n\n然后，生成所有操作的参数。\n\n对于每个操作，首先生成操作编号（用 $opt$ 表示），$opt \\leftarrow rnd() \\bmod p + 1$。\n\n根据操作编号，不同的操作使用不同的方法生成参数。\n\n- 对于操作 1：需要通过以下方式获取 $l$ 和 $r$：\n  - $L \\leftarrow rnd() \\bmod n + 1$\n  - $R \\leftarrow rnd() \\bmod n + 1$\n  - $l \\leftarrow \\min(L,R)$\n  - $r \\leftarrow \\max(L,R)$\n\n- 对于操作 2：需要通过以下方式获取 $l,r$ 和 $k$：\n  - $L \\leftarrow rnd() \\bmod n + 1$\n  - $R \\leftarrow rnd() \\bmod n + 1$\n  - $l \\leftarrow \\min(L,R)$\n  - $r \\leftarrow \\max(L,R)$\n  - $k \\leftarrow rnd() \\bmod q + 1$\n\n- 对于操作 3：需要通过以下方式获取 $pos$ 和 $k$：\n  - $pos \\leftarrow rnd() \\bmod n + 1$\n  - $k \\leftarrow rnd() \\bmod q + 1$\n\n- 对于操作 4：需要通过以下方式获取 $t$：\n\n  - $t \\leftarrow rnd() \\bmod i$\n\n这里，$i$ 表示第 $i$ 次操作。", "outputFormat": "对于每个操作 1 和 2，你需要输出一行整数，表示操作 1 和 2 的答案对 $10^9 + 7$ 取模的结果。", "hint": "函数 `max` 表示参数中的最大值。函数 `min` 表示参数中的最小值。\n\n在例子 1 中，初始书为 $[1,2,3,1,2,3]$。三个操作的范围分别是 $[4,4]$，$[1,3]$ 和 $[4,5]$。（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10864", "type": "P", "difficulty": 4, "samples": [["8\n2 1\n1 1\n1 2\n2 2\n1 1\n1 3\n2 3\n3 1", "0 0\n0 0\n0 1\n0 0\n0 0\n0 0\n0 0\n3 0"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "搜索", "并查集", "2024", "O2优化", "省赛/邀请赛", "湖北"], "title": "[HBCPC2024] Genshin Impact Startup Forbidden II", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/9ez2u5m2.png)\n\nBlue-edged Shot is forbidden from playing Genshin Impact by LeavingZ, so she turned to Go game.\n\nA game of Go involves two players, one playing with Black stones and the other with White stones. Two players take turns making moves, with the Black stones going first. The Go board is composed of a grid of $19\\times 19$ intersections, and we use $(x,y)$ to represent the intersection at the $x$-th row and $y$-th column. The stones are placed on the intersections. The top left corner is $(1,1)$, while the bottom right corner is $(19,19)$.\n\nThe intersections $(x_1,y_1)$ and $(x_2,y_2)$ are adjacent if and only if $|x_1-x_2| + |y_1-y_2| = 1$. Adjacent intersections with stones of the same color belong to the same group of stones. The number of `liberties` for a stone is equal to the number of adjacent intersections to the stone's intersection that do not have any stones on them. The liberties of a group of stones equal the sum of the liberties of all the stones belonging to that group. A group of stones with zero liberties is considered dead and must be removed from the board.\n\nNote that after Black plays, priority is given to removing any dead White stones, and then recalculating the liberties for Black stones. This is because there might be situations where, after Black plays, both Black and White stones have zero liberties, but removing the dead White stones increases the liberties for Black stones. As for White, process the stones similarly. After White plays, priority is given to removing any dead Black stones, and then recalculating the liberties for White stones.\n\nNow there is a game of Go, starting with an empty board, and a total of $m$ moves have been made by both players. Given the positions where each stone is placed, output after each move, how many Black and White stones are removed respectively causing by this move. Obviously, black stones are played on odd-numbered moves, and white stones are played on even-numbered moves. It's guaranteed that stones are placed on empty intersections. Note that stones can be placed on $\\textbf{any}$ intersections that do not have stones on them at the moment, regardless of violating the Go rules in real life.", "inputFormat": "Input $m$ ($1 \\le m \\le 5\\times 10^5)$ lines, the $i$-th line contains two integers $x_i,y_i$ ($1 \\le x_i,y_i \\le 19$), representing the $i$-th move puts stone on $(x_i,y_i)$.\n\nIt's guaranteed that stones are placed on intersections that do not have stones on them at the moment.", "outputFormat": "Output $m$ lines, each line contains two integers. The first integer in the $i$-th line represents the number of Black stones removed after the $i$-th move, while the second for White stones.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/u15z6yt8.png)", "locale": "en", "translations": {"en": {"title": "[HBCPC2024] Genshin Impact Startup Forbidden II", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/9ez2u5m2.png)\n\nBlue-edged Shot is forbidden from playing Genshin Impact by LeavingZ, so she turned to Go game.\n\nA game of Go involves two players, one playing with Black stones and the other with White stones. Two players take turns making moves, with the Black stones going first. The Go board is composed of a grid of $19\\times 19$ intersections, and we use $(x,y)$ to represent the intersection at the $x$-th row and $y$-th column. The stones are placed on the intersections. The top left corner is $(1,1)$, while the bottom right corner is $(19,19)$.\n\nThe intersections $(x_1,y_1)$ and $(x_2,y_2)$ are adjacent if and only if $|x_1-x_2| + |y_1-y_2| = 1$. Adjacent intersections with stones of the same color belong to the same group of stones. The number of `liberties` for a stone is equal to the number of adjacent intersections to the stone's intersection that do not have any stones on them. The liberties of a group of stones equal the sum of the liberties of all the stones belonging to that group. A group of stones with zero liberties is considered dead and must be removed from the board.\n\nNote that after Black plays, priority is given to removing any dead White stones, and then recalculating the liberties for Black stones. This is because there might be situations where, after Black plays, both Black and White stones have zero liberties, but removing the dead White stones increases the liberties for Black stones. As for White, process the stones similarly. After White plays, priority is given to removing any dead Black stones, and then recalculating the liberties for White stones.\n\nNow there is a game of Go, starting with an empty board, and a total of $m$ moves have been made by both players. Given the positions where each stone is placed, output after each move, how many Black and White stones are removed respectively causing by this move. Obviously, black stones are played on odd-numbered moves, and white stones are played on even-numbered moves. It's guaranteed that stones are placed on empty intersections. Note that stones can be placed on $\\textbf{any}$ intersections that do not have stones on them at the moment, regardless of violating the Go rules in real life.", "inputFormat": "Input $m$ ($1 \\le m \\le 5\\times 10^5)$ lines, the $i$-th line contains two integers $x_i,y_i$ ($1 \\le x_i,y_i \\le 19$), representing the $i$-th move puts stone on $(x_i,y_i)$.\n\nIt's guaranteed that stones are placed on intersections that do not have stones on them at the moment.", "outputFormat": "Output $m$ lines, each line contains two integers. The first integer in the $i$-th line represents the number of Black stones removed after the $i$-th move, while the second for White stones.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/u15z6yt8.png)", "locale": "en"}, "zh-CN": {"title": "[HBCPC2024] Genshin Impact Startup Forbidden II", "background": "", "description": "### 弹窗内容\n\nLeavingZ：你被禁止玩《原神》。\n\n\n\n蓝边铅球因LeavingZ的禁止而无法玩《原神》，所以她转向了围棋。\n\n围棋游戏由两名玩家进行，一方使用黑子，另一方使用白子。两名玩家轮流下子，黑子先行。围棋棋盘由$19\\times 19$的交叉点组成，我们用$(x,y)$表示第$x$行第$y$列的交叉点。棋子放置在交叉点上。左上角为$(1,1)$，右下角为$(19,19)$。\n\n如果$|x_1-x_2| + |y_1-y_2| = 1$，那么交叉点$(x_1,y_1)$和$(x_2,y_2)$是相邻的。相邻的交叉点上放置相同颜色的棋子属于同一组棋子。一个棋子的“气”数等于该棋子所在交叉点的相邻交叉点上没有棋子的个数。一组棋子的“气”数等于该组棋子中所有棋子的“气”数之和。一组棋子如果“气”数为零，则被视为“死棋”并且必须从棋盘上移除。\n\n注意，在黑子落子后，优先移除任何死掉的白子，然后重新计算黑子的“气”数。这是因为可能出现这样的情况：黑子落子后，黑白两方的棋子都没有“气”，但移除死掉的白子会增加黑子的“气”。白子落子的处理方式类似。在白子落子后，优先移除任何死掉的黑子，然后重新计算白子的“气”数。\n\n现在有一局围棋，从空棋盘开始，总共进行了$m$步。给定每步棋子的放置位置，请输出每步棋子落子后，分别有多少颗黑子和白子被移除。显然，黑子在奇数步落子，白子在偶数步落子。保证棋子放置在空的交叉点上。注意，棋子可以放置在$\\textbf{任意}$当前没有棋子的交叉点上，无论是否违反了现实中的[围棋规则](https://zhuanlan.zhihu.com/p/440794632)$^{(1)}$。\n\n注释：\n- (2):译者补充", "inputFormat": "输入包含 $m$ 行（$1 \\le m \\le 5\\times 10^5$），第 $i$ 行包含两个整数 $x_i, y_i$ （$1 \\le x_i, y_i \\le 19$），表示第 $i$ 步在 $(x_i, y_i)$ 位置放置棋子。\n\n保证棋子放置在当前没有棋子的交叉点上。", "outputFormat": "输出包含 $m$ 行，每行包含两个整数。第 $i$ 行的第一个整数表示第 $i$ 步后被移除的黑子数量，第二个整数表示被移除的白子数量。\n\n翻译者：[Immunoglobules](https://www.luogu.com.cn/user/1066251)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10865", "type": "P", "difficulty": 4, "samples": [["5 5 3\n1 1 2\n2 2 1\n5 5 2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "离散化", "O2优化", "省赛/邀请赛", "湖北", "状压 DP"], "title": "[HBCPC2024] Genshin Impact Startup Forbidden III", "background": "", "description": "Blue-edged Shot is forbidden from playing Genshin Impact by LeavingZ. However, today LeavingZ went to Huazhong University of Science and Technology, School of Cyber Science and Engineering, to harvest the gold medal of the 2024 International Collegiate Programming Contest in Hubei Province, China.\n\nAn activity of Genshin Impact called `Dodoco's Bomb-Tastic Adventure` has begun. This is a single-player game, where each game involves a pond. The pond can be divided into an $n$ by $m$ grid, with the cell in the $i$-th row and $j$-th column represented by $(i,j)$. Among these, $k$ cells contain fish, and you will play as the Spark Knight Klee, who fishes with explosives.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3keap2xe.png)\n\nIf Klee drops a bomb at $(a,b)$, all the cells $(x,y)$ satisfying $|x-a|+|y-b|\\le 1$ will be covered by the explosion. For every cell covered by the explosion, Klee will catch one fish from it. Klee can drop bombs at any location. The question is, to catch all the fish, how many `Jumpy Dumpty` bombs are needed at a minimum?", "inputFormat": "The first line contains three integers $n,m,k$ ($1 \\le n,m \\le 10^3, 1 \\le k \\le 10$) --- the size of the grid and the number of cells containing fish.\n\nThe following $k$ lines, each line contains three integers $x_i,y_i,a_i$ ($1\\le x_i \\le n, 1 \\le y_i \\le m, 1 \\le a_i \\le 3$), representing there are $a_i$ fish in cell $(x_i,y_i)$.\n\nIt is guaranteed that the input cell $(x_i,y_i)$ are unique.", "outputFormat": "Output a single integer, denoting the minimum number of bombs needed.", "hint": "One possible way is to drop two bombs at $(1,2)$ and another two at $(5,5)$.\n\nIt can be proven that there is no solution with a smaller answer.", "locale": "en", "translations": {"en": {"title": "[HBCPC2024] Genshin Impact Startup Forbidden III", "background": "", "description": "Blue-edged Shot is forbidden from playing Genshin Impact by LeavingZ. However, today LeavingZ went to Huazhong University of Science and Technology, School of Cyber Science and Engineering, to harvest the gold medal of the 2024 International Collegiate Programming Contest in Hubei Province, China.\n\nAn activity of Genshin Impact called `Dodoco's Bomb-Tastic Adventure` has begun. This is a single-player game, where each game involves a pond. The pond can be divided into an $n$ by $m$ grid, with the cell in the $i$-th row and $j$-th column represented by $(i,j)$. Among these, $k$ cells contain fish, and you will play as the Spark Knight Klee, who fishes with explosives.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3keap2xe.png)\n\nIf Klee drops a bomb at $(a,b)$, all the cells $(x,y)$ satisfying $|x-a|+|y-b|\\le 1$ will be covered by the explosion. For every cell covered by the explosion, Klee will catch one fish from it. Klee can drop bombs at any location. The question is, to catch all the fish, how many `Jumpy Dumpty` bombs are needed at a minimum?", "inputFormat": "The first line contains three integers $n,m,k$ ($1 \\le n,m \\le 10^3, 1 \\le k \\le 10$) --- the size of the grid and the number of cells containing fish.\n\nThe following $k$ lines, each line contains three integers $x_i,y_i,a_i$ ($1\\le x_i \\le n, 1 \\le y_i \\le m, 1 \\le a_i \\le 3$), representing there are $a_i$ fish in cell $(x_i,y_i)$.\n\nIt is guaranteed that the input cell $(x_i,y_i)$ are unique.", "outputFormat": "Output a single integer, denoting the minimum number of bombs needed.", "hint": "One possible way is to drop two bombs at $(1,2)$ and another two at $(5,5)$.\n\nIt can be proven that there is no solution with a smaller answer.", "locale": "en"}, "zh-CN": {"title": "[HBCPC2024] Genshin Impact Startup Forbidden III", "background": null, "description": "“Blue-edged Shot 被 LeavingZ 禁止玩《原神》。然而，今天 LeavingZ 前往了华中科技大学的网络科学与工程学院，参加2024年中国湖北省国际大学生程序设计竞赛，并收获了金牌。\n\n《原神》中的一个活动多多炸弹大冒险已经开始了。这是一个单人游戏，每局游戏都涉及一个池塘。池塘可以被划分为一个 $n×m$ 的网格，其中第 $i$ 行第 $j$ 列的单元格表示为 $(i,j)$。在这些单元格中，有 $k$ 个单元格包含鱼，你将扮演火花骑士克莱，她用炸药来捕鱼。\n\n如果克莱在 $(a,b)$ 位置投放炸弹，那么所有满足$|x-a|+|y-b|\\le 1$的单元格 $(x,y)$ 都将被爆炸覆盖。对于每一个被爆炸覆盖的单元格，克莱都会从其中捕到一条鱼。克莱可以在任何位置投放炸弹。问题是，为了捕到所有的鱼，至少需要多少枚“蹦蹦炸弹”？", "inputFormat": "第一行包含三个整数 $n,m,k$ ($1 \\le n,m \\le 10^3, 1 \\le k \\le 10$)，分别表示网格的大小（行数和列数）以及包含鱼的单元格数量。\n\n接下来的 $k$ 行，每行包含三个整数 $x_i,y_i,a_i$ ($1\\le x_i \\le n, 1 \\le y_i \\le m, 1 \\le a_i \\le 3$)，表示在网格的 ($x_i, y_i$) 单元格中有 $a_i$ 条鱼。\n\n输入保证所有的 $(x_i, y_i)$ 单元格坐标都是唯一的。", "outputFormat": "输出一个整数，表示所需的最少炸弹数量。” 在这个问题中，你需要计算并输出一个整数，该整数代表为了捕获所有鱼所需投放的最少“蹦蹦炸弹”数量。", "hint": "一种可能的方法是在 $(1,2)$ 位置投放两枚炸弹，再在 $(5,5)$ 位置投放另外两枚炸弹。\n\n可以证明没有比这个答案更小的解。", "locale": "zh-CN"}}}
{"pid": "P10866", "type": "P", "difficulty": 6, "samples": [["1\n8 6\n1 2\n1 3\n2 4\n4 5\n2 6\n4 8\n3 7\n4 8\n7 7\n4 5\n2 2\n4 6\n5 1", "5\n4\n4\n3\n4\n4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["并查集", "2024", "O2优化", "省赛/邀请赛", "湖北"], "title": "[HBCPC2024] Colorful Tree", "background": "", "description": "You are given a tree with $n$ nodes numbered from $1$ to $n$ and $n - 1$ edges. Each node has a color. Initially, all of them are white. \n\nWe are going to perform $q$ operations. In each operation, two vertices $u$ and $v$ will be given, and we will color black to the points along the simple path from $u$ to $v$ ($u,v$ inclusive). Note that a simple path in the tree is defined as a path that does not pass through any vertex more than once.\n\nAfter each operation, you are required to determine the length of the longest simple path in the tree where all nodes on the path are the same color. The length of a path is defined as the number of nodes on the path.", "inputFormat": "The first line contains a single integer $T$ ($1 \\le T \\le 100$) indicating the number of test cases.\n\nFor each test case, the first line contains two integers $n$ ($1 \\le n \\le 2\\times 10^5$) and $q$ ($1 \\le q \\le 2\\times 10^5$), indicating the number of nodes in the tree and the number of operations, respectively.\n\nIn the following $n-1$ lines, each contains two integers $u$ and $v$, representing an edge from vertex $u$ to $v$ in the tree.\n\nThen follow $q$ lines, each contains two integers $u$ and $v$, representing an operation that colors black to the points along the path from vertex $u$ to $v$.\n\nIt is guaranteed that the sum of $n$ and $q$ of all the test cases in a test does not exceed $2\\times 10^5$ respectively.", "outputFormat": "For each test case, output $q$ lines, each line should contain an integer representing the length of the longest simple path in the tree where all nodes on the path are the same color after the corresponding operation.", "hint": "", "locale": "en", "translations": {"en": {"title": "[HBCPC2024] Colorful Tree", "background": "", "description": "You are given a tree with $n$ nodes numbered from $1$ to $n$ and $n - 1$ edges. Each node has a color. Initially, all of them are white. \n\nWe are going to perform $q$ operations. In each operation, two vertices $u$ and $v$ will be given, and we will color black to the points along the simple path from $u$ to $v$ ($u,v$ inclusive). Note that a simple path in the tree is defined as a path that does not pass through any vertex more than once.\n\nAfter each operation, you are required to determine the length of the longest simple path in the tree where all nodes on the path are the same color. The length of a path is defined as the number of nodes on the path.", "inputFormat": "The first line contains a single integer $T$ ($1 \\le T \\le 100$) indicating the number of test cases.\n\nFor each test case, the first line contains two integers $n$ ($1 \\le n \\le 2\\times 10^5$) and $q$ ($1 \\le q \\le 2\\times 10^5$), indicating the number of nodes in the tree and the number of operations, respectively.\n\nIn the following $n-1$ lines, each contains two integers $u$ and $v$, representing an edge from vertex $u$ to $v$ in the tree.\n\nThen follow $q$ lines, each contains two integers $u$ and $v$, representing an operation that colors black to the points along the path from vertex $u$ to $v$.\n\nIt is guaranteed that the sum of $n$ and $q$ of all the test cases in a test does not exceed $2\\times 10^5$ respectively.", "outputFormat": "For each test case, output $q$ lines, each line should contain an integer representing the length of the longest simple path in the tree where all nodes on the path are the same color after the corresponding operation.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[HBCPC2024] Colorful Tree", "background": "", "description": "给你一棵有 $n$ 个节点的树，节点编号从 $1$ 到 $n$，并且有 $n-1$ 条边。每个节点都有一个颜色。起初，所有节点的颜色都是白色。\n\n我们将进行 $q$ 次操作。在每次操作中，会给出两个顶点 $u$ 和 $v$，然后我们将沿着从 $u$ 到 $v$ 的简单路径上的所有节点（包括 $u$ 和 $v$）染成黑色。注意，树中的简单路径定义为路径上的任意顶点都不会被重复经过。\n\n在每次操作之后，你需要确定树中最长的简单路径，其路径上的所有节点的颜色相同。路径的长度定义为路径上的节点数目。", "inputFormat": "第一行包含一个整数 $T$ ($1 \\le T \\le 100$)，表示测试用例的数量。\n\n对于每个测试用例，第一行包含两个整数 $n$ ($1 \\le n \\le 2\\times 10^5$) 和 $q$ ($1 \\le q \\le 2\\times 10^5$)，分别表示树中节点的数量和操作的数量。\n\n紧接着$^{(1)}$的 $n-1$ 行中，每行包含两个整数 $u$ 和 $v$，表示树中顶点 $u$ 和 $v$ 之间的一条边。\n\n接下来 $q$ 行，每行包含两个整数 $u$ 和 $v$，表示将从顶点 $u$ 到顶点 $v$ 的路径上的所有节点染成黑色的操作。\n\n保证一个测试中所有测试用例的 $n$ 和 $q$ 的总和均不超过 $2\\times 10^5$。$^{(2)}$\n\n注释：\n- (1):也可以译为接下来，此处译者只是想区分下条的语句。\n- (2)可以用以下数学表达式表示：\n\n$$\n\\sum_{i=1}^{T} n_i \\leq 2 \\times 10^5 \\quad \\text{且} \\quad \\sum_{i=1}^{T} q_i \\leq 2 \\times 10^5\n$$\n\n其中 $n_i$ 和 $q_i$ 分别表示第 $i$ 个测试用例中的节点数量和操作数量。", "outputFormat": "对于每个测试用例，输出 $q$ 行，每行应包含一个整数，表示在执行相应操作后，树中所有节点颜色相同的最长简单路径的长度。\n\n\n翻译者：[Immunoglobules](https://www.luogu.com.cn/user/1066251)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10867", "type": "P", "difficulty": 4, "samples": [["3\n1 2 4", "332748120\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2024", "O2优化", "期望", "省赛/邀请赛", "湖北"], "title": "[HBCPC2024] Points on the Number Axis A", "background": "", "description": "Alice is playing a single-player game on the number axis.\n\nThere are $n$ points on the number axis. Each time, the player selects two points. The two points will be removed, and their midpoint will be added. When there is only one point on the axis, the game ends. Formally, if the two chosen points is $x_i$ and $x_j$, then $\\dfrac{x_i+x_j}{2}$ will be added after the operation.\n\nIn order to play this game happily, Alice will always select two points randomly.\n\nNow Alice have a question: where is the expected position of the last point.\n\nIt can be proven that the answer can be expressed in the form $\\dfrac{p}{q}$, you only need to output the value of $p\\cdot q^{-1} \\bmod 998\\,244\\,353$.", "inputFormat": "The first line contains one integer $n$ ($1 \\le n \\le 10^6$).\n\nThe second line contains $n$ integers $x_i$ ($0 \\le x_1 \\le \\dots \\le x_n < 998\\,244\\,353$), denoting the position of the $i$-th point.\n\nNote that two points may be in the same position.", "outputFormat": "Output one integer, the answer modulo $998\\,244\\,353$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[HBCPC2024] Points on the Number Axis A", "background": "", "description": "Alice is playing a single-player game on the number axis.\n\nThere are $n$ points on the number axis. Each time, the player selects two points. The two points will be removed, and their midpoint will be added. When there is only one point on the axis, the game ends. Formally, if the two chosen points is $x_i$ and $x_j$, then $\\dfrac{x_i+x_j}{2}$ will be added after the operation.\n\nIn order to play this game happily, Alice will always select two points randomly.\n\nNow Alice have a question: where is the expected position of the last point.\n\nIt can be proven that the answer can be expressed in the form $\\dfrac{p}{q}$, you only need to output the value of $p\\cdot q^{-1} \\bmod 998\\,244\\,353$.", "inputFormat": "The first line contains one integer $n$ ($1 \\le n \\le 10^6$).\n\nThe second line contains $n$ integers $x_i$ ($0 \\le x_1 \\le \\dots \\le x_n < 998\\,244\\,353$), denoting the position of the $i$-th point.\n\nNote that two points may be in the same position.", "outputFormat": "Output one integer, the answer modulo $998\\,244\\,353$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[HBCPC2024] Points on the Number Axis A", "background": "", "description": "Alice 正在数轴上玩一个单人游戏。\n\n数轴上有 $n$ 个点。每次，玩家选择两个点。这两个点将被移除，并添加它们的中点。当数轴上只剩下一个点时，游戏结束。形式上，如果选择的两个点是 $x_i$ 和 $x_j$，那么在操作后将添加 $\\dfrac{x_i+x_j}{2}$。\n\n为了愉快地进行这个游戏，Alice 总是随机选择两个点。\n\n现在 Alice 有一个问题：最后一个点的期望位置在哪里。\n\n可以证明，答案可以表示成 $\\dfrac{p}{q}$ 的形式，你只需要输出 $p\\cdot q^{-1} \\bmod 998\\,244\\,353$ 的值。", "inputFormat": "第一行包含一个整数 $n$ ($1 \\le n \\le 10^6$)。\n\n第二行包含 $n$ 个整数 $x_i$ ($0 \\le x_1 \\le \\dots \\le x_n < 998\\,244\\,353$)，表示第 $i$ 个点的位置。\n\n注意，两个点可能在同一位置。", "outputFormat": "输出一个整数，即答案对 $998\\,244\\,353$ 取模后的结果。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10868", "type": "P", "difficulty": 6, "samples": [["3\n1 2 4", "623902723"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "数学", "2024", "O2优化", "期望", "省赛/邀请赛", "湖北"], "title": "[HBCPC2024] Points on the Number Axis B", "background": "", "description": "Bob is playing a single-player game on the number axis.\n\nThere are $n$ points on the number axis. Each time, the player selects two points. The two points will be removed, and their midpoint will be added. When there is only one point on the axis, the game ends. Formally, if the two chosen points is $x_i$ and $x_j$, then $\\dfrac{x_i+x_j}{2}$ will be added after the operation.\n\nIn order to play this game happily, Bob will always select two adjacent points randomly. Initially, the $i$-th point and the $(i+1)$-th point are adjacent. When Bob added a new point, it inherits its left point's left adjacent point and its right point's right adjacent point.\n\nNow Bob have a question: where is the expected position of the last point.\n\nIt can be proven that the answer can be expressed in the form $\\dfrac{p}{q}$, you only need to output the value of $p\\cdot q^{-1} \\bmod 998\\,244\\,353$.", "inputFormat": "The first line contains one integer $n$ ($1 \\le n \\le 10^6$).\n\nThe second line contains $n$ integers $x_i$ ($0 \\le x_1 \\le \\dots \\le x_n < 998\\,244\\,353$), describing the position of the $i$-th point.\n\nNote that two points may be in the same position.", "outputFormat": "Output one integer, the answer modulo $998\\,244\\,353$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[HBCPC2024] Points on the Number Axis B", "background": "", "description": "Bob is playing a single-player game on the number axis.\n\nThere are $n$ points on the number axis. Each time, the player selects two points. The two points will be removed, and their midpoint will be added. When there is only one point on the axis, the game ends. Formally, if the two chosen points is $x_i$ and $x_j$, then $\\dfrac{x_i+x_j}{2}$ will be added after the operation.\n\nIn order to play this game happily, Bob will always select two adjacent points randomly. Initially, the $i$-th point and the $(i+1)$-th point are adjacent. When Bob added a new point, it inherits its left point's left adjacent point and its right point's right adjacent point.\n\nNow Bob have a question: where is the expected position of the last point.\n\nIt can be proven that the answer can be expressed in the form $\\dfrac{p}{q}$, you only need to output the value of $p\\cdot q^{-1} \\bmod 998\\,244\\,353$.", "inputFormat": "The first line contains one integer $n$ ($1 \\le n \\le 10^6$).\n\nThe second line contains $n$ integers $x_i$ ($0 \\le x_1 \\le \\dots \\le x_n < 998\\,244\\,353$), describing the position of the $i$-th point.\n\nNote that two points may be in the same position.", "outputFormat": "Output one integer, the answer modulo $998\\,244\\,353$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[HBCPC2024] Points on the Number Axis B", "background": "", "description": "Bob 正在数轴上玩一个单人游戏。\n\n数轴上有 $n$ 个点。每次，玩家选择两个点。这两个点将被移除，并添加它们的中点。当数轴上只剩下一个点时，游戏结束。形式上，如果选择的两个点是 $x_i$ 和 $x_j$，那么在操作后将添加 $\\dfrac{x_i+x_j}{2}$。\n\n为了愉快地玩这个游戏，Bob 总是随机选择两个相邻的点。最初，第 $i$ 个点和第 $(i+1)$ 个点是相邻的。当 Bob 添加一个新点时，它继承其左点的左相邻点和其右点的右相邻点。\n\n现在 Bob 有一个问题：最后一个点的期望位置在哪里。\n\n可以证明，答案可以表示为 $\\dfrac{p}{q}$ 的形式，你只需要输出 $p\\cdot q^{-1} \\bmod 998\\,244\\,353$ 的值。", "inputFormat": "第一行包含一个整数 $n$ ($1 \\le n \\le 10^6$)。\n\n第二行包含 $n$ 个整数 $x_i$ ($0 \\le x_1 \\le \\dots \\le x_n < 998\\,244\\,353$)，描述第 $i$ 个点的位置。\n\n注意，两个点可能在同一位置。", "outputFormat": "输出一个整数，即答案对 $998\\,244\\,353$ 取模的结果。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10869", "type": "P", "difficulty": 3, "samples": [["3\n3 4\n10 15\n2 4", "10\n25\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2024", "O2优化", "最短路", "省赛/邀请赛", "湖北"], "title": "[HBCPC2024] LCMs", "background": "", "description": "Walk Alone has a number axis with only positive integers on it. The cost of walking from point on integer $a$ to point on integer $b$ is ${\\rm lcm}(a, b)$, where ${\\rm lcm}(a, b)$ means the least common multiple of integers $a$ and $b$. Due to the hatred of the integer $1$, Walk Alone forbids anyone from moving to points on integers $\\textbf{smaller than or equal to}$ $1$.\n\nGiven two integers $a$ and $b$, you need to calculate the minimal cost of walking from point on integer $a$ to $b$.", "inputFormat": "There are $T$ ($1 \\le T \\le 1000$) test cases.\n\nIn each test case, there is only one line containing two integers $a$ and $b$ ($2 \\le a \\le b \\le 10^7$), denoting the start and end point.", "outputFormat": "For each test case, output a single integer denoting the minimal cost.", "hint": "In the first test case, you can walk such a path: $3 \\to 2 \\to 4$, where the total cost is ${\\rm lcm}(3, 2) + {\\rm lcm}(2, 4) = 6 + 4 = 10$, which can be proved to be the minimum.", "locale": "en", "translations": {"en": {"title": "[HBCPC2024] LCMs", "background": "", "description": "Walk Alone has a number axis with only positive integers on it. The cost of walking from point on integer $a$ to point on integer $b$ is ${\\rm lcm}(a, b)$, where ${\\rm lcm}(a, b)$ means the least common multiple of integers $a$ and $b$. Due to the hatred of the integer $1$, Walk Alone forbids anyone from moving to points on integers $\\textbf{smaller than or equal to}$ $1$.\n\nGiven two integers $a$ and $b$, you need to calculate the minimal cost of walking from point on integer $a$ to $b$.", "inputFormat": "There are $T$ ($1 \\le T \\le 1000$) test cases.\n\nIn each test case, there is only one line containing two integers $a$ and $b$ ($2 \\le a \\le b \\le 10^7$), denoting the start and end point.", "outputFormat": "For each test case, output a single integer denoting the minimal cost.", "hint": "In the first test case, you can walk such a path: $3 \\to 2 \\to 4$, where the total cost is ${\\rm lcm}(3, 2) + {\\rm lcm}(2, 4) = 6 + 4 = 10$, which can be proved to be the minimum.", "locale": "en"}, "zh-CN": {"title": "[HBCPC2024] LCMs", "background": "", "description": "Walk Alone 有一个数轴，上面只有正整数。从整数 $a$ 走到整数 $b$ 的代价是 ${\\rm lcm}(a, b)$，其中 ${\\rm lcm}(a, b)$ 表示整数 $a$ 和 $b$ 的最小公倍数。由于对整数 $1$ 的厌恶，Walk Alone 禁止任何人移动到小于或等于 $1$ 的整数点上。\n\n给定两个整数 $a$ 和 $b$，你需要计算从整数 $a$ 到 $b$ 的最小行走代价。", "inputFormat": "有 $T$ 个测试用例（$1 \\le T \\le 1000$）。\n\n在每个测试用例中，只有一行包含两个整数 $a$ 和 $b$（$2 \\le a \\le b \\le 10^7$），表示起点和终点。", "outputFormat": "对于每个测试用例，输出一个整数，表示最小代价。", "hint": "在第一个测试用例中，你可以选择这样的路径：$3 \\to 2 \\to 4$，总代价为 ${\\rm lcm}(3, 2) + {\\rm lcm}(2, 4) = 6 + 4 = 10$，这可以被证明是最小的。（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10871", "type": "P", "difficulty": 6, "samples": [["1", "1\n1 1\n\n"], ["2", "1\n1 1\n"], ["3", "9\n2 3\n3 1\n2 2\n1 1\n3 3\n3 2\n1 2\n1 3\n2 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2022", "Special Judge", "O2优化", "构造", "COTS（克罗地亚）"], "title": "[COTS 2022] 皇后  Kraljice", "background": "\n译自 [Izborne Pripreme 2022 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2022/) D1T1。$\\texttt{1s,0.5G}$。\n\n", "description": "有一块 $N\\times N$ 的国际象棋棋盘，**依次**在空格子上放置皇后，最大化放置皇后的数量。你需要构造一组方案。\n\n能在一个格子上放置皇后，当且仅当这个格子被偶数个皇后攻击。\n\n一个皇后攻击一个格子，当且仅当皇后所在的格子与被攻击格子处于同一行/列/对角线上。", "inputFormat": "一行一个整数 $N$。", "outputFormat": "第一行一个整数 $K$，表示能放置的最多皇后数量。\n\n接下来 $K$ 行，每行两个整数 $x,y$，描述放置皇后的位置。", "hint": "\n### 样例解释\n\n样例 $3$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qr1b2kcs.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 2^{10}$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $6$  | $1\\le N\\le 2^4$  |\n| $2$  | $11$  | $1\\le N\\le 2^6$  |\n| $3$  | $28$  | $1\\le N\\le 2^8$ |\n| $4$  | $55$  | 无额外约束 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2022] 皇后  Kraljice", "background": "\n译自 [Izborne Pripreme 2022 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2022/) D1T1。$\\texttt{1s,0.5G}$。\n\n", "description": "有一块 $N\\times N$ 的国际象棋棋盘，**依次**在空格子上放置皇后，最大化放置皇后的数量。你需要构造一组方案。\n\n能在一个格子上放置皇后，当且仅当这个格子被偶数个皇后攻击。\n\n一个皇后攻击一个格子，当且仅当皇后所在的格子与被攻击格子处于同一行/列/对角线上。", "inputFormat": "一行一个整数 $N$。", "outputFormat": "第一行一个整数 $K$，表示能放置的最多皇后数量。\n\n接下来 $K$ 行，每行两个整数 $x,y$，描述放置皇后的位置。", "hint": "\n### 样例解释\n\n样例 $3$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qr1b2kcs.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 2^{10}$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $6$  | $1\\le N\\le 2^4$  |\n| $2$  | $11$  | $1\\le N\\le 2^6$  |\n| $3$  | $28$  | $1\\le N\\le 2^8$ |\n| $4$  | $55$  | 无额外约束 |\n", "locale": "zh-CN"}}}
{"pid": "P10872", "type": "P", "difficulty": 6, "samples": [["6 4 3", "2\n011011\n101010"], ["5 2 0", "0\n01001\n00000"], ["10 7 6", "5\n1101100111\n1110001101"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2022", "Special Judge", "O2优化", "位运算", "构造", "Ad-hoc", "COTS（克罗地亚）"], "title": "[COTS 2022] 移位 Maliand", "background": "译自 [Izborne Pripreme 2022 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2022/) D1T2。$\\texttt{2s,0.5G}$。\t\n\n[SPJ link](https://www.luogu.com.cn/paste/9qlivbk0)。", "description": "\n给定非负整数 $N,K,L$，试构造两个 $01$ 序列 $S,T$，满足：\n\n- $S,T$ 的长度为 $N$；\n- $S$ 中恰好有 $K$ 个 $1$，$T$ 中恰有 $L$ 个 $1$；\n- $f(S,T)$ 是所有可能的 $f(S,T)$ 中最小的。\n\n定义 $f(S,T)$ 为**任意**循环移位 $S,T$ 后，$\\sum_{i=1}^{N} S_i\\operatorname{and} T_i$  的最大值，其中 $\\mathrm{and}$ 表示按位与运算。\n\n请你构造出 $S,T$。", "inputFormat": "一行三个整数 $N,K,L$。", "outputFormat": "第一行一个整数 $F$，表示 $f(S,T)$ 的最小值；\n\n接下来两行分别描述序列 $S,T$。相邻元素之间不需要加空格。\n\n若有多解，输出任意一个均可。", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 5\\times 10^5$，$0\\le K,L\\le N$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $5$  | $1\\le N\\le 13$  |\n| $2$  | $50$  | $1\\le N\\le 5\\, 000$  |\n| $3$  | $45$  | 无额外约束 |\n\n\n【评分方式】\n\n如果你回答对了 $F$，可以得到 $20\\%$ 的分数；\n\n在此基础下，如果你的 $S,T$ 满足条件，将获得剩下 $80\\%$ 的分数。\n\n如果只打算回答第一问，也要任意输出两个符合条件 $1,2$ 的 $01$ 序列，否则不保证能得到分数。\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2022] 移位 Maliand", "background": "译自 [Izborne Pripreme 2022 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2022/) D1T2。$\\texttt{2s,0.5G}$。\t\n\n[SPJ link](https://www.luogu.com.cn/paste/9qlivbk0)。", "description": "\n给定非负整数 $N,K,L$，试构造两个 $01$ 序列 $S,T$，满足：\n\n- $S,T$ 的长度为 $N$；\n- $S$ 中恰好有 $K$ 个 $1$，$T$ 中恰有 $L$ 个 $1$；\n- $f(S,T)$ 是所有可能的 $f(S,T)$ 中最小的。\n\n定义 $f(S,T)$ 为**任意**循环移位 $S,T$ 后，$\\sum_{i=1}^{N} S_i\\operatorname{and} T_i$  的最大值，其中 $\\mathrm{and}$ 表示按位与运算。\n\n请你构造出 $S,T$。", "inputFormat": "一行三个整数 $N,K,L$。", "outputFormat": "第一行一个整数 $F$，表示 $f(S,T)$ 的最小值；\n\n接下来两行分别描述序列 $S,T$。相邻元素之间不需要加空格。\n\n若有多解，输出任意一个均可。", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 5\\times 10^5$，$0\\le K,L\\le N$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $5$  | $1\\le N\\le 13$  |\n| $2$  | $50$  | $1\\le N\\le 5\\, 000$  |\n| $3$  | $45$  | 无额外约束 |\n\n\n【评分方式】\n\n如果你回答对了 $F$，可以得到 $20\\%$ 的分数；\n\n在此基础下，如果你的 $S,T$ 满足条件，将获得剩下 $80\\%$ 的分数。\n\n如果只打算回答第一问，也要任意输出两个符合条件 $1,2$ 的 $01$ 序列，否则不保证能得到分数。\n\n\n", "locale": "zh-CN"}}}
{"pid": "P10873", "type": "P", "difficulty": 6, "samples": [["2", "BC\nCC"], ["3", "BBCC\nBCBC\nBBCC"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2022", "Special Judge", "O2优化", "欧拉回路", "构造", "Ad-hoc", "COTS（克罗地亚）"], "title": "[COTS 2022] 帽子 Šeširi", "background": "译自 [Izborne Pripreme 2022 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2022/) D1T3。$\\texttt{3s,0.5G}$。\n\n喜欢小圆！\n\n", "description": "$N$ 个 OIer 头上戴着红色或者白色的帽子。每个人只能看到别人的帽子颜色，他们会根据别人的帽子颜色猜测自己头上帽子的颜色。\n\n他们想要构造一组猜测策略，满足以下条件：\n\n- 设有 $b$ 人戴了白色帽子，其中**至少**有 $\\lfloor\\frac{b}{2}\\rfloor$ 人猜对自己帽子的颜色。\n- 设有 $c$ 人戴了红色帽子，其中**至少**有 $\\lfloor\\frac{c}{2}\\rfloor$ 人猜对自己帽子的颜色。\n\n请帮助他们找到一种策略，使得在 $2^N$ 种可能的情况中都满足条件。", "inputFormat": "一行一个整数 $N$。", "outputFormat": "输出 $N$ 行，每行一个长度为 $2^{N-1}$ 的字符串，由 $\\texttt{B},\\texttt{C}$ 组成。\n\n第 $i$ 行的字符串描述了第 $i$ 个 OIer 的策略。具体地说：\n\n- 定义 $f(S)$ 为：将所有长度为 $(N-1)$ 的由 $\\texttt{B},\\texttt{C}$ 组成的字符串按照字典序排序后，$S$ 的排名。\n- 记 $x$ 为第 $i$ 行输出的字符串，$s_i\\in \\{\\texttt{B},\\texttt{C}\\}$ 为第 $i$ 个 OIer 头上戴的帽子颜色。其中 $\\texttt{B}$ 是白色（克罗地亚语「bijela」），$\\texttt{C}$ 是红色（克罗地亚语「crvena」）。\n- 记 $y=\\overline{s_1s_{2}\\cdots s_{i-1}s_{i+1}\\cdots s_n}$。注意左边是高位。\n- 第 $i$ 个 OIer 会猜测的颜色为 $x_{f(y)}$。\n\n可参阅【样例解释】。", "hint": "\n#### 样例解释\n\n以样例 $2$ 为例。\n\n当 $s=\\texttt{CCC}$ 时，对于第 $1$ 个 OIer，$x=\\texttt{BBCC}$，$y=\\texttt{CC}$。显然 $f(y)=4$，所以他会猜测 $x_4=\\texttt{C}$。\n\n#### 计分方式\n\n| 测试点编号 | $N=$ | 分值 |\n|:-----:|:------:|:-------:|\n| $1$  | $4$  | $7$  |\n| $2$  | $5$  | $7$  |\n| $3$  | $6$  | $7$  |\n| $4$  | $7$  | $7$  |\n| $5$  | $8$  | $7$  |\n| $6$  | $9$  | $7$  |\n| $7$  | $10$  | $7$  |\n| $8$  | $11$  | $7$  |\n| $9$  | $12$  | $7$  |\n| $10$  | $13$  | $7$  |\n| $11$  | $14$  | $6$  |\n| $12$  | $15$  | $6$  |\n| $13$  | $16$  | $6$  |\n| $14$  | $17$  | $6$  |\n| $15$  | $18$  | $6$  |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2022] 帽子 Šeširi", "background": "译自 [Izborne Pripreme 2022 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2022/) D1T3。$\\texttt{3s,0.5G}$。\n\n喜欢小圆！\n\n", "description": "$N$ 个 OIer 头上戴着红色或者白色的帽子。每个人只能看到别人的帽子颜色，他们会根据别人的帽子颜色猜测自己头上帽子的颜色。\n\n他们想要构造一组猜测策略，满足以下条件：\n\n- 设有 $b$ 人戴了白色帽子，其中**至少**有 $\\lfloor\\frac{b}{2}\\rfloor$ 人猜对自己帽子的颜色。\n- 设有 $c$ 人戴了红色帽子，其中**至少**有 $\\lfloor\\frac{c}{2}\\rfloor$ 人猜对自己帽子的颜色。\n\n请帮助他们找到一种策略，使得在 $2^N$ 种可能的情况中都满足条件。", "inputFormat": "一行一个整数 $N$。", "outputFormat": "输出 $N$ 行，每行一个长度为 $2^{N-1}$ 的字符串，由 $\\texttt{B},\\texttt{C}$ 组成。\n\n第 $i$ 行的字符串描述了第 $i$ 个 OIer 的策略。具体地说：\n\n- 定义 $f(S)$ 为：将所有长度为 $(N-1)$ 的由 $\\texttt{B},\\texttt{C}$ 组成的字符串按照字典序排序后，$S$ 的排名。\n- 记 $x$ 为第 $i$ 行输出的字符串，$s_i\\in \\{\\texttt{B},\\texttt{C}\\}$ 为第 $i$ 个 OIer 头上戴的帽子颜色。其中 $\\texttt{B}$ 是白色（克罗地亚语「bijela」），$\\texttt{C}$ 是红色（克罗地亚语「crvena」）。\n- 记 $y=\\overline{s_1s_{2}\\cdots s_{i-1}s_{i+1}\\cdots s_n}$。注意左边是高位。\n- 第 $i$ 个 OIer 会猜测的颜色为 $x_{f(y)}$。\n\n可参阅【样例解释】。", "hint": "\n#### 样例解释\n\n以样例 $2$ 为例。\n\n当 $s=\\texttt{CCC}$ 时，对于第 $1$ 个 OIer，$x=\\texttt{BBCC}$，$y=\\texttt{CC}$。显然 $f(y)=4$，所以他会猜测 $x_4=\\texttt{C}$。\n\n#### 计分方式\n\n| 测试点编号 | $N=$ | 分值 |\n|:-----:|:------:|:-------:|\n| $1$  | $4$  | $7$  |\n| $2$  | $5$  | $7$  |\n| $3$  | $6$  | $7$  |\n| $4$  | $7$  | $7$  |\n| $5$  | $8$  | $7$  |\n| $6$  | $9$  | $7$  |\n| $7$  | $10$  | $7$  |\n| $8$  | $11$  | $7$  |\n| $9$  | $12$  | $7$  |\n| $10$  | $13$  | $7$  |\n| $11$  | $14$  | $6$  |\n| $12$  | $15$  | $6$  |\n| $13$  | $16$  | $6$  |\n| $14$  | $17$  | $6$  |\n| $15$  | $18$  | $6$  |\n\n", "locale": "zh-CN"}}}
{"pid": "P10874", "type": "P", "difficulty": 7, "samples": [["0 2\n2 3 1 1 2 2\n3 3 1 1 3 3", "*--o--o\n      |\no  *--o\n*  o--o\n|  |  |\no  o  o\n|  |  |\no--o  *"], ["0 2\n2 3 1 1 2 2\n3 3 1 1 3 3", "*--o  o\n   |\no  *  o\n*  o  o\n|\no  o--o\n|  |  |\no--o  *"], ["1 2\n2 3 1 1 2 2\n3 3 1 1 3 3", "5\n9"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000]}, "tags": ["2022", "Special Judge", "O2优化", "构造", "COTS（克罗地亚）"], "title": "[COTS 2022] 旅程 Dugput（非官方数据）", "background": "译自 [Izborne Pripreme 2022 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2022/) D2T1。$\\texttt{5s,0.5G}$。\n\n\n- **输入格式有微调。**\n- **官方数据有误。** 部分 out 文件是使用树姐姐 [\t\nhhoppitree](https://www.luogu.com.cn/user/183609) 的代码生成的。如果出现了分数 $\\gt 100$ 的情况，欢迎联系搬题人更新数据。\n", "description": "\n构造一个 $N\\times M$ 的网格图，边权均为 $1$，每条边可以存在或者不存在。\n\n在连通的前提下，最大化 $(A,B)$ 到 $(C,D)$ 的最短路长度。\n\n**此处路径长度定义为路径经过的节点个数。**", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n第一行，两个整数 $\\mathrm{type},T$，表示测试数据类型和测试数据组数。\n\n接下来 $T$ 行，每行 $6$ 个整数 $N,M,A,B,C,D$，含义见题面。", "outputFormat": "每组测试数据输出若干行。\n\n- $\\mathrm{type}=0$：「构造」类数据\n\n此类数据中，你需要构造一个网格图。输出 $(2N-1)$ 行，每行 $(3M-2)$ 个字符。\n\n其中，第 $(2i-1)$ 行的第 $(3j-2)$ 个字符代表点 $(i,j)$。当 $(i,j)=(A,B)$ 或 $(S,T)$ 时，用 `*`（ASCII 42）表示；否则用 `o`（ASCII 111）表示。\n\n对于同一行的两个点 $(i,j),(i,j+1)$，若有边，则用 `--`（ASCII 45）填充它们之间的两个空格；否则不填充。\n\n对于同一列的两个点 $(i,j),(i+1,j)$，若有边，则用 `|`（ASCII 124）填充它们之间的一个空格；否则不填充。\n\n未填充的区域均用空格补齐。不要输出多余的空格和空行。\n\n可参阅样例输出。\n\n- $\\mathrm{type}=1$：「传统」类数据\n\n只需要输出一行一个整数，表示最短的最长路长度。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 5\\, 000$；\n- $1\\le T\\le 1\\, 600$；\n- $1\\le A,C\\le N$，$1\\le B,D\\le M$；\n- $(A,B)\\neq (C,D)$。\n\n| 子任务编号 | $N\\cdot M\\in $ | $M\\le $ | $\\mathrm{type}=$ | 分值 | \n|:-----:|:------:| :----: | :--: | :--: |\n| $1$  | $[2,100]$  | $5\\, 000$ | $0$ | $20$ | \n| $2$  | $[2,1\\, 000]$  | $5\\, 000$  | $0$ | $25$ |\n| $3$  | $[2,15\\, 000]$  | $3$  | $0$ | $15$ |\n| $4$  | $[2,100\\, 000]$  | $5\\, 000$  | $0$ | $25$ | \n| $5$  | $[2,100\\, 000]$  | $5\\, 000$  | $1$ | $15$ |\n\n【评分方式】\n\n\n- $\\mathrm{type}=0$：「构造」类数据\n\n记 $d_i$ 为第 $i$ 组测试数据中，你构造的方案中的最短路长度，$D_i$ 为可能的最长最短路长度。记\n\n$$K=\\frac{1}{Q}\\sum_{i=1}^Q\\frac{d_i}{D_i}$$\n\n当 $K=1$ 时，该测试点得满分；否则得 $0.7\\cdot K$ 倍测试点得分的分数。\n\n每个子任务的得分为所有测试点得分的 $\\min$。\n\n例如，样例 $1$ 的输出得满分；对于样例 $2$，$\\displaystyle k=\\frac{1}{2}\\left(\\frac{3}{5}+\\frac{5}{9}\\right)=\\frac{31}{45}$，将得到 $\\displaystyle 0.7\\cdot \\frac{31}{45}\\approx 0.482$ 倍测试点得分的分数。\n\n- $\\mathrm{type}=1$：「传统」类数据\n\n和传统题评分方式相同。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2022] 旅程 Dugput（非官方数据）", "background": "译自 [Izborne Pripreme 2022 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2022/) D2T1。$\\texttt{5s,0.5G}$。\n\n\n- **输入格式有微调。**\n- **官方数据有误。** 部分 out 文件是使用树姐姐 [\t\nhhoppitree](https://www.luogu.com.cn/user/183609) 的代码生成的。如果出现了分数 $\\gt 100$ 的情况，欢迎联系搬题人更新数据。\n", "description": "\n构造一个 $N\\times M$ 的网格图，边权均为 $1$，每条边可以存在或者不存在。\n\n在连通的前提下，最大化 $(A,B)$ 到 $(C,D)$ 的最短路长度。\n\n**此处路径长度定义为路径经过的节点个数。**", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n第一行，两个整数 $\\mathrm{type},T$，表示测试数据类型和测试数据组数。\n\n接下来 $T$ 行，每行 $6$ 个整数 $N,M,A,B,C,D$，含义见题面。", "outputFormat": "每组测试数据输出若干行。\n\n- $\\mathrm{type}=0$：「构造」类数据\n\n此类数据中，你需要构造一个网格图。输出 $(2N-1)$ 行，每行 $(3M-2)$ 个字符。\n\n其中，第 $(2i-1)$ 行的第 $(3j-2)$ 个字符代表点 $(i,j)$。当 $(i,j)=(A,B)$ 或 $(S,T)$ 时，用 `*`（ASCII 42）表示；否则用 `o`（ASCII 111）表示。\n\n对于同一行的两个点 $(i,j),(i,j+1)$，若有边，则用 `--`（ASCII 45）填充它们之间的两个空格；否则不填充。\n\n对于同一列的两个点 $(i,j),(i+1,j)$，若有边，则用 `|`（ASCII 124）填充它们之间的一个空格；否则不填充。\n\n未填充的区域均用空格补齐。不要输出多余的空格和空行。\n\n可参阅样例输出。\n\n- $\\mathrm{type}=1$：「传统」类数据\n\n只需要输出一行一个整数，表示最短的最长路长度。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 5\\, 000$；\n- $1\\le T\\le 1\\, 600$；\n- $1\\le A,C\\le N$，$1\\le B,D\\le M$；\n- $(A,B)\\neq (C,D)$。\n\n| 子任务编号 | $N\\cdot M\\in $ | $M\\le $ | $\\mathrm{type}=$ | 分值 | \n|:-----:|:------:| :----: | :--: | :--: |\n| $1$  | $[2,100]$  | $5\\, 000$ | $0$ | $20$ | \n| $2$  | $[2,1\\, 000]$  | $5\\, 000$  | $0$ | $25$ |\n| $3$  | $[2,15\\, 000]$  | $3$  | $0$ | $15$ |\n| $4$  | $[2,100\\, 000]$  | $5\\, 000$  | $0$ | $25$ | \n| $5$  | $[2,100\\, 000]$  | $5\\, 000$  | $1$ | $15$ |\n\n【评分方式】\n\n\n- $\\mathrm{type}=0$：「构造」类数据\n\n记 $d_i$ 为第 $i$ 组测试数据中，你构造的方案中的最短路长度，$D_i$ 为可能的最长最短路长度。记\n\n$$K=\\frac{1}{Q}\\sum_{i=1}^Q\\frac{d_i}{D_i}$$\n\n当 $K=1$ 时，该测试点得满分；否则得 $0.7\\cdot K$ 倍测试点得分的分数。\n\n每个子任务的得分为所有测试点得分的 $\\min$。\n\n例如，样例 $1$ 的输出得满分；对于样例 $2$，$\\displaystyle k=\\frac{1}{2}\\left(\\frac{3}{5}+\\frac{5}{9}\\right)=\\frac{31}{45}$，将得到 $\\displaystyle 0.7\\cdot \\frac{31}{45}\\approx 0.482$ 倍测试点得分的分数。\n\n- $\\mathrm{type}=1$：「传统」类数据\n\n和传统题评分方式相同。\n\n", "locale": "zh-CN"}}}
{"pid": "P10875", "type": "P", "difficulty": 5, "samples": [["3 3\n1 2\n2 3\n3 1\n1\n1 2", "3"], ["3 4\n1 2\n1 2\n2 3\n2 3\n3\n1 2\n2 3\n3 1", "2\n4\n4"], ["6 7\n1 2\n2 3\n3 4\n2 5\n3 5\n4 5\n1 3\n5\n1 3\n2 3\n4 5\n1 4\n2 6", "7\n5\n6\n7\n-1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2022", "O2优化", "生成树", "分块", "整体二分", "启发式合并", "COTS（克罗地亚）"], "title": "[COTS 2022] 游戏 M", "background": "译自 [Izborne Pripreme 2022 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2022/) D2T2。$\\texttt{3s,0.5G}$。", "description": "\n有一张 $N$ 个节点的无向图，依次向图中添加 $M$ 条边。\n\n有 $Q$ 个询问，每次询问给定 $u,v$，问：至少添加前多少条边，才能使得 $u,v$ 间没有割边（换言之，割去任意一条边，都不影响 $u,v$ 的连通性）。特别地，如果 $u,v$ 始终不连通或者始终有割边，则输出 $-1$。\n", "inputFormat": "第一行，两个整数 $N,M$，含义见题面；\n\n接下来 $M$ 行，第 $i$ 行包含两个整数 $s_i,t_i$，表示第 $i$ 条边为 $(s_i,t_i)$。\n\n第 $(M+2)$ 行，一个整数 $Q$，含义见题面；\n\n接下来 $Q$ 行，每行两个整数 $u,v$，描述一个询问。", "outputFormat": "\n输出 $Q$ 行，每行一个整数，表示询问的答案。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $2\\le N \\le 3\\times 10^5$，$0\\le M\\le 3\\times 10^5$，$1\\le Q\\le 3\\times 10^5$；\n- $s_i\\neq t_i$，$u\\neq v$；\n- $1\\le u,v,s_i,t_i\\le N$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $10$  | $Q=1$  |\n| $2$  | $20$  | $2\\mid M$，$(s_{2i-1},t_{2i-1})=(s_{2i},t_{2i})$  |\n| $3$  | $30$  | $N,M\\le 5\\, 000$ |\n| $4$  | $40$  | 无额外约束 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2022] 游戏 M", "background": "译自 [Izborne Pripreme 2022 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2022/) D2T2。$\\texttt{3s,0.5G}$。", "description": "\n有一张 $N$ 个节点的无向图，依次向图中添加 $M$ 条边。\n\n有 $Q$ 个询问，每次询问给定 $u,v$，问：至少添加前多少条边，才能使得 $u,v$ 间没有割边（换言之，割去任意一条边，都不影响 $u,v$ 的连通性）。特别地，如果 $u,v$ 始终不连通或者始终有割边，则输出 $-1$。\n", "inputFormat": "第一行，两个整数 $N,M$，含义见题面；\n\n接下来 $M$ 行，第 $i$ 行包含两个整数 $s_i,t_i$，表示第 $i$ 条边为 $(s_i,t_i)$。\n\n第 $(M+2)$ 行，一个整数 $Q$，含义见题面；\n\n接下来 $Q$ 行，每行两个整数 $u,v$，描述一个询问。", "outputFormat": "\n输出 $Q$ 行，每行一个整数，表示询问的答案。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $2\\le N \\le 3\\times 10^5$，$0\\le M\\le 3\\times 10^5$，$1\\le Q\\le 3\\times 10^5$；\n- $s_i\\neq t_i$，$u\\neq v$；\n- $1\\le u,v,s_i,t_i\\le N$。\n\n| 子任务编号 | 分值 | 约束  |\n|:-----:|:------:|:-------:|\n| $1$  | $10$  | $Q=1$  |\n| $2$  | $20$  | $2\\mid M$，$(s_{2i-1},t_{2i-1})=(s_{2i},t_{2i})$  |\n| $3$  | $30$  | $N,M\\le 5\\, 000$ |\n| $4$  | $40$  | 无额外约束 |", "locale": "zh-CN"}}}
{"pid": "P10876", "type": "P", "difficulty": 6, "samples": [["4\n0 0\n0 10\n10 0\n10 10", "Alenka"], ["5\n2 1\n1 3\n6 4\n3 5\n5 2", "Alenka"], ["4\n4 2\n2 4\n2 2\n1 1", "Bara"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["博弈论", "2022", "O2优化", "凸包", "COTS（克罗地亚）"], "title": "[COTS 2022] 点组 Točkice", "background": "译自 [Izborne Pripreme 2022 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2022/) D2T3。$\\texttt{1s,0.5G}$。", "description": "平面上有 $N$ 个点 $(x_i,y_i)$，无三点共线，两个人轮流操作，每次选择两个点连一条线段，要求不与之前的线段在非顶点处相交，无法操作者输，问先手必胜还是后手必胜。", "inputFormat": "第一行，一个整数 $N$；\n\n接下来 $N$ 行，每行两个整数 $x_i,y_i$。", "outputFormat": "如果 A（先手）胜，输出 `Alenka`；否则输出 `Bara`。", "hint": "对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 10^5$；\n- $1\\le x_i,y_i\\le 10^6$；\n- 任意三点不共线。\n\n| 子任务编号 | 分值 | $N\\le$ |\n|:-----:|:------:|:-------:|\n| $1$  | $13$  | $7$  |\n| $2$  | $17$  | $300$  |\n| $3$  | $21$  | $1\\, 000$ |\n| $4$  | $49$  | $10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2022] 点组 Točkice", "background": "译自 [Izborne Pripreme 2022 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2022/) D2T3。$\\texttt{1s,0.5G}$。", "description": "平面上有 $N$ 个点 $(x_i,y_i)$，无三点共线，两个人轮流操作，每次选择两个点连一条线段，要求不与之前的线段在非顶点处相交，无法操作者输，问先手必胜还是后手必胜。", "inputFormat": "第一行，一个整数 $N$；\n\n接下来 $N$ 行，每行两个整数 $x_i,y_i$。", "outputFormat": "如果 A（先手）胜，输出 `Alenka`；否则输出 `Bara`。", "hint": "对于 $100\\%$ 的数据，保证：\n\n- $1\\le N\\le 10^5$；\n- $1\\le x_i,y_i\\le 10^6$；\n- 任意三点不共线。\n\n| 子任务编号 | 分值 | $N\\le$ |\n|:-----:|:------:|:-------:|\n| $1$  | $13$  | $7$  |\n| $2$  | $17$  | $300$  |\n| $3$  | $21$  | $1\\, 000$ |\n| $4$  | $49$  | $10^5$ |", "locale": "zh-CN"}}}
{"pid": "P10877", "type": "P", "difficulty": 3, "samples": [["2\n2\n01\n30\n101001001010100110101101011110\n", "1\n75497471\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "数学", "2024", "洛谷原创", "O2优化"], "title": "「KDOI-07」n1gr tS0i", "background": "众所周知，小 T 不喜欢 01 串问题，于是小 R 出了另一个有关 01 串的题目：", "description": "有一个长度为 $n$ 的 $\\tt 01$ 串 $S$，你要对 $S$ 进行 **恰好** $n$ 次操作。每次操作选择 $1 \\leq l \\color{red}< \\color{normal} r \\leq n$，然后你按位翻转 $S_{l\\dots r}$。这里的按位翻转指，$S_{l\\dots r}$ 内所有 $\\tt 0$ 同时变为 $\\tt 1$，且所有 $\\tt 1$ 同时变为 $\\tt 0$。\n\n求 $n$ 次操作后，所有可能不同的 $S$ 的个数。因为答案可能很大，所以请对 $998244353$ 取模。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$ 描述数据组数。对于每组数据：\n\n- 第一行一个整数 $n$。\n- 接下来一行，一个长度为 $n$ 的 $\\tt 01$ 串 $S$。", "outputFormat": "对于每组数据，一行一个整数，表示答案，对 $998244353$ 取模后的结果。", "hint": "### 样例解释\n\n- 对于 $n = 2$，$S = \\tt 01$，我们会发现每次操作只能选择 $l = 1, r = 2$ 即反转整串，因此 $2$ 次操作后只能得到 $\\tt 01$，故答案为 $1$；\n- 对于第二组数据，暂时不能给你一个明确的答复。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n\\le$ | 分数 |\n| :----------: | :----------: | :----------: |\n| $1$ | $4$ | $30$ |\n| $2$ | $10^5$ | $70$ |\n\n对于所有数据，保证 $2 \\leq n \\leq 10^5$，$\\sum n \\leq 10^6$，$1 \\leq T \\leq 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「KDOI-07」n1gr tS0i", "background": "众所周知，小 T 不喜欢 01 串问题，于是小 R 出了另一个有关 01 串的题目：", "description": "有一个长度为 $n$ 的 $\\tt 01$ 串 $S$，你要对 $S$ 进行 **恰好** $n$ 次操作。每次操作选择 $1 \\leq l \\color{red}< \\color{normal} r \\leq n$，然后你按位翻转 $S_{l\\dots r}$。这里的按位翻转指，$S_{l\\dots r}$ 内所有 $\\tt 0$ 同时变为 $\\tt 1$，且所有 $\\tt 1$ 同时变为 $\\tt 0$。\n\n求 $n$ 次操作后，所有可能不同的 $S$ 的个数。因为答案可能很大，所以请对 $998244353$ 取模。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$ 描述数据组数。对于每组数据：\n\n- 第一行一个整数 $n$。\n- 接下来一行，一个长度为 $n$ 的 $\\tt 01$ 串 $S$。", "outputFormat": "对于每组数据，一行一个整数，表示答案，对 $998244353$ 取模后的结果。", "hint": "### 样例解释\n\n- 对于 $n = 2$，$S = \\tt 01$，我们会发现每次操作只能选择 $l = 1, r = 2$ 即反转整串，因此 $2$ 次操作后只能得到 $\\tt 01$，故答案为 $1$；\n- 对于第二组数据，暂时不能给你一个明确的答复。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n\\le$ | 分数 |\n| :----------: | :----------: | :----------: |\n| $1$ | $4$ | $30$ |\n| $2$ | $10^5$ | $70$ |\n\n对于所有数据，保证 $2 \\leq n \\leq 10^5$，$\\sum n \\leq 10^6$，$1 \\leq T \\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P10878", "type": "P", "difficulty": 4, "samples": [["4 2\n1 2 3 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "洛谷原创", "O2优化"], "title": "[JRKSJ R9] 在相思树下 III", "background": ">我知 \n>\n>再迷恋他也非我能私有\n>\n>就当神爱世人遥远温柔 \n>\n>未必要牵手\n>\n>隔千万光年宇宙献吻 \n>\n>亦真切感受\n>\n>不用 \n>\n>强求 \n>\n>对号入座那虚构", "description": "给你一个长为 $n$ 的序列 $a_{1\\dots n}$，你需要对它进行两种操作共 $n-1$ 次。\n\n对一个长度为 $l$ 的序列 $b_{1\\dots l}$ 进行一次操作将会把序列变为一个长为 $l-1$ 的序列 $c_{1\\dots l-1}$：\n\n- 操作一中，$\\forall i\\in[1,l),c_i=\\max(b_i,b_{i+1})$；\n- 操作二中，$\\forall i\\in[1,l),c_i=\\min(b_i,b_{i+1})$。\n\n给定整数 $m$，你只能进行**至多** $m$ 次操作一。进行 $n-1$ 次操作后序列 $a$ 的长度变为 $1$。你可以任意安排操作的顺序，求最终剩余的数 $a_1$ 的最大值。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $a_i$ 表示初始序列。", "outputFormat": "一个整数，代表最终剩余的数的最大可能值。", "hint": "### 样例解释\n\n一种可能的操作顺序是：\n- 进行一次操作一，序列变为 $2,3,3$；\n- 进行一次操作二，序列变为 $2,3$；\n- 进行一次操作一，序列变为 $3$。\n\n显然最终剩余的数不可能大于 $3$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\mathrm{Subtask}$ | $n\\le$ | 特殊性质 | 分数 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ |  | $10$ |  \n| $2$ | $5000$ |  | $30$ |  \n| $3$ | $10^6$ | $\\checkmark$ | $20$ |  \n| $4$ | $10^6$ |  | $40$ |  \n\n特殊性质：保证 $\\forall i\\in[1,n],a_i\\le10$。\n\n对于所有数据，保证 $1\\leq m < n \\leq 10^6$，$1 \\leq a_i \\leq 10^{9}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R9] 在相思树下 III", "background": ">我知 \n>\n>再迷恋他也非我能私有\n>\n>就当神爱世人遥远温柔 \n>\n>未必要牵手\n>\n>隔千万光年宇宙献吻 \n>\n>亦真切感受\n>\n>不用 \n>\n>强求 \n>\n>对号入座那虚构", "description": "给你一个长为 $n$ 的序列 $a_{1\\dots n}$，你需要对它进行两种操作共 $n-1$ 次。\n\n对一个长度为 $l$ 的序列 $b_{1\\dots l}$ 进行一次操作将会把序列变为一个长为 $l-1$ 的序列 $c_{1\\dots l-1}$：\n\n- 操作一中，$\\forall i\\in[1,l),c_i=\\max(b_i,b_{i+1})$；\n- 操作二中，$\\forall i\\in[1,l),c_i=\\min(b_i,b_{i+1})$。\n\n给定整数 $m$，你只能进行**至多** $m$ 次操作一。进行 $n-1$ 次操作后序列 $a$ 的长度变为 $1$。你可以任意安排操作的顺序，求最终剩余的数 $a_1$ 的最大值。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $a_i$ 表示初始序列。", "outputFormat": "一个整数，代表最终剩余的数的最大可能值。", "hint": "### 样例解释\n\n一种可能的操作顺序是：\n- 进行一次操作一，序列变为 $2,3,3$；\n- 进行一次操作二，序列变为 $2,3$；\n- 进行一次操作一，序列变为 $3$。\n\n显然最终剩余的数不可能大于 $3$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\mathrm{Subtask}$ | $n\\le$ | 特殊性质 | 分数 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ |  | $10$ |  \n| $2$ | $5000$ |  | $30$ |  \n| $3$ | $10^6$ | $\\checkmark$ | $20$ |  \n| $4$ | $10^6$ |  | $40$ |  \n\n特殊性质：保证 $\\forall i\\in[1,n],a_i\\le10$。\n\n对于所有数据，保证 $1\\leq m < n \\leq 10^6$，$1 \\leq a_i \\leq 10^{9}$。", "locale": "zh-CN"}}}
{"pid": "P10879", "type": "P", "difficulty": 6, "samples": [["3\n1 1\n1 2\n1\n1 3 2", "1 2"], ["5\n1 1\n1 2\n3 3\n2 4\n9\n2 5 497855355\n1 5 840823564\n3 1 295265328\n2 3 457999227\n4 4 235621825\n2 1 86836399\n5 2 800390742\n5 3 869167938\n2 4 269250165", "405260353 409046983 606499796 13504540"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "数学", "图论", "2024", "洛谷原创", "O2优化", "动态规划优化", "组合数学", "容斥原理", "期望"], "title": "「KDOI-07」对树链剖分的爱", "background": "楼下说得对，但是 sszcdjr 在 NOI 2024 D2T2 用巧妙做法把我的暴力树剖爆掉了。\n\n楼上说得对，但是树链剖分把我送上 10√ 了，所以我出了这道题以表示我对树链剖分的爱喵。", "description": "给出一棵 $n$ 个节点以 $1$ 为根的有根树。对于第 $2\\leq i\\leq n$ 个节点，其父亲 $f_i$ 在 $[l_i,r_i]$ 中均匀随机。每个树的边有边权，初始为 $0$。\n\n现在有 $m$ 次操作，第 $i$ 次操作表示将 $(u_i,v_i)$ 的路径上所有的边的权值统一加上 $w_i$。$m$ 次操作结束后，对于所有 $i=2\\sim n$，求 $(i,f_i)$ 边上权值的期望，对 $998244353$ 取模。", "inputFormat": "第一行一个正整数表示 $n$。\n\n接下来 $n-1$ 行，其中第 $i$ 行两个正整数表示 $l_{i+1},r_{i+1}$。\n\n接下来一行一个正整数表示 $m$。\n\n接下来 $m$ 行，第 $i$ 行三个正整数表示 $u_i,v_i,w_i$。", "outputFormat": "一行 $n-1$ 个正整数，其中第 $i$ 个表示边 $(i+1,f_{i+1})$ 边权的期望，对 $998244353$ 取模。", "hint": "### 样例解释 1\n\n所有节点的父亲共有 $2$ 种可能的情况：\n\n- $f_2=1,f_3=1$，此时 $(f_2,2),(f_3,3)$ 边上的权值分别是 $0,2$。\n\n- $f_2=1,f_3=2$，此时 $(f_2,2),(f_3,3)$ 边上的权值分别是 $2,2$。\n\n于是边 $(f_2,2)$ 边权的期望为 $\\dfrac{0+2}{2}=1$，边 $(f_3,3)$ 边权的期望为 $\\dfrac{2+2}{2}=2$。\n\n\n---\n### 数据规模与约定\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n\\leq$ | $m\\leq$ | 分数 |\n| :-----------: | :-----------: |  :-----------: | :-----------: |\n| $1$ | $10$ | $10$ | $20$ |\n| $2$ | $50$ | $50$ | $20$ |\n| $3$ | $500$ | $500$ | $20$ |\n| $4$ | $5000$ | $1$ | $20$ |\n| $5$ | $5000$ | $5000$ | $20$|\n\n\n对于所有数据，保证 $1\\leq n,m\\leq5000$，$1\\leq l_i\\leq r_i<i$，$1\\leq u_i,v_i\\leq n$，$1\\leq w_i\\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「KDOI-07」对树链剖分的爱", "background": "楼下说得对，但是 sszcdjr 在 NOI 2024 D2T2 用巧妙做法把我的暴力树剖爆掉了。\n\n楼上说得对，但是树链剖分把我送上 10√ 了，所以我出了这道题以表示我对树链剖分的爱喵。", "description": "给出一棵 $n$ 个节点以 $1$ 为根的有根树。对于第 $2\\leq i\\leq n$ 个节点，其父亲 $f_i$ 在 $[l_i,r_i]$ 中均匀随机。每个树的边有边权，初始为 $0$。\n\n现在有 $m$ 次操作，第 $i$ 次操作表示将 $(u_i,v_i)$ 的路径上所有的边的权值统一加上 $w_i$。$m$ 次操作结束后，对于所有 $i=2\\sim n$，求 $(i,f_i)$ 边上权值的期望，对 $998244353$ 取模。", "inputFormat": "第一行一个正整数表示 $n$。\n\n接下来 $n-1$ 行，其中第 $i$ 行两个正整数表示 $l_{i+1},r_{i+1}$。\n\n接下来一行一个正整数表示 $m$。\n\n接下来 $m$ 行，第 $i$ 行三个正整数表示 $u_i,v_i,w_i$。", "outputFormat": "一行 $n-1$ 个正整数，其中第 $i$ 个表示边 $(i+1,f_{i+1})$ 边权的期望，对 $998244353$ 取模。", "hint": "### 样例解释 1\n\n所有节点的父亲共有 $2$ 种可能的情况：\n\n- $f_2=1,f_3=1$，此时 $(f_2,2),(f_3,3)$ 边上的权值分别是 $0,2$。\n\n- $f_2=1,f_3=2$，此时 $(f_2,2),(f_3,3)$ 边上的权值分别是 $2,2$。\n\n于是边 $(f_2,2)$ 边权的期望为 $\\dfrac{0+2}{2}=1$，边 $(f_3,3)$ 边权的期望为 $\\dfrac{2+2}{2}=2$。\n\n\n---\n### 数据规模与约定\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n\\leq$ | $m\\leq$ | 分数 |\n| :-----------: | :-----------: |  :-----------: | :-----------: |\n| $1$ | $10$ | $10$ | $20$ |\n| $2$ | $50$ | $50$ | $20$ |\n| $3$ | $500$ | $500$ | $20$ |\n| $4$ | $5000$ | $1$ | $20$ |\n| $5$ | $5000$ | $5000$ | $20$|\n\n\n对于所有数据，保证 $1\\leq n,m\\leq5000$，$1\\leq l_i\\leq r_i<i$，$1\\leq u_i,v_i\\leq n$，$1\\leq w_i\\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10880", "type": "P", "difficulty": 6, "samples": [["3 3\n1 2 3\n1 2\n1 3\n2 3", "3"], ["10 10\n7 9 4 5 8 3 2 1 6 10 \n3 7\n2 6\n1 2\n3 4\n8 9\n1 2\n2 6\n5 8\n6 9\n4 5", "12"], ["60 30\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 \n34 57\n2 17\n3 16\n18 50\n18 54\n8 45\n8 56\n14 39\n22 33\n12 33\n27 49\n33 33\n9 11\n12 52\n11 17\n23 31\n14 39\n19 57\n25 32\n15 22\n2 48\n14 21\n51 59\n28 48\n26 31\n31 60\n41 58\n36 46\n49 53\n44 48", "328034228"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "洛谷原创", "O2优化", "排序"], "title": "[JRKSJ R9] 莫队的 1.5 近似构造", "background": "二维莫队构造可以看作 $i,j$ 之间有权值为 $|l_i-l_j|+|r_i-r_j|$ 的完全图上的 TSP 问题。显然，任何莫队的边权都满足三角不等式。\n\n求出最小生成树，然后把所有度数为奇数的点拿出来，对这个导出子图跑最小权匹配得到 $E$，将 $E$ 加到最小生成树上，然后跑欧拉路径即可。\n\n 注意到 $\\text{MST}(S)\\le \\text{TSP}(S)$，$2E\\le \\text{TSP}(S)$（$E$ 的 $\\text{TSP}$ 方案可以给出两组匹配，考虑其中的较小值）且欧拉路径的边权和不小于欧拉路径给出的方案的权值，就给出了 $\\le 1.5\\text{TSP}(S)$ 的结果。", "description": "给你一个 $1\\sim n$ 的排列 $a$ 和 $m$ 个该排列上的区间 $[l_i,r_i]$。\n\n对于一个值域区间 $[L,R]$：\n- 称「选取 $i$ 时该值域区间的价值」为 $a_{l_i},a_{l_i+1},\\dots,a_{r_i}$ 中有多少个数属于值域区间 $[L,R]$；\n- 定义值域区间 $[L,R]$ 的价值为 $\\forall i\\in[1,m]$，「选取 $i$ 时该值域区间的价值」的最大值。\n\n即，值域区间 $[L,R]$ 的价值为 $\\displaystyle\\max_{i=1}^m \\sum_{j=l_i}^{r_i} [L\\le a_j\\le R]$。\n\n定义两个区间相交当且仅当至少有一个整数被这两个区间共同包含。请你选出若干个**互不相交**的值域区间，使得它们的价值的乘积最大。将该答案对 $998244353$ 取模后输出。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数表示 $a_{1\\dots n}$。\n\n下面 $m$ 行，每行两个整数 $l_i,r_i$。", "outputFormat": "一个整数表示答案。输出答案时对 $998244353$ 取模。", "hint": "### 样例解释 1\n\n选择值域区间 $[1,3]$。\n\n### 样例解释 2\n\n可以选择值域区间 $[1,3],[4,5],[8,10]$。\n\n### 样例解释 3\n\n样例 3 满足特殊性质。\n\n### 数据规模与约定\n**本题采用捆绑测试。**\n\n| $\\mathrm{Subtask}$ | $n,m\\le$ | 特殊性质 | 分数 |\n| :-----: | :-----: | :-----: | :-----: |\n| $1$ | $20$ |  | $10$ |\n| $2$ | $5\\times 10^3$ |  | $15$ |\n| $3$ | $3\\times 10^5$ | $\\checkmark$ | $10$ |\n| $4$ | $5\\times 10^4$ |  | $25$ |\n| $5$ | $3\\times 10^5$ |  | $40$ |\n\n特殊性质：保证 $\\forall i\\in[1,n],a_i=i$。\n\n对于所有数据，保证 $1\\le n,m\\le 3\\times 10^5$，$1\\le l_i\\le r_i\\le n$，$a$ 是一个 $1\\sim n$ 的排列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R9] 莫队的 1.5 近似构造", "background": "二维莫队构造可以看作 $i,j$ 之间有权值为 $|l_i-l_j|+|r_i-r_j|$ 的完全图上的 TSP 问题。显然，任何莫队的边权都满足三角不等式。\n\n求出最小生成树，然后把所有度数为奇数的点拿出来，对这个导出子图跑最小权匹配得到 $E$，将 $E$ 加到最小生成树上，然后跑欧拉路径即可。\n\n 注意到 $\\text{MST}(S)\\le \\text{TSP}(S)$，$2E\\le \\text{TSP}(S)$（$E$ 的 $\\text{TSP}$ 方案可以给出两组匹配，考虑其中的较小值）且欧拉路径的边权和不小于欧拉路径给出的方案的权值，就给出了 $\\le 1.5\\text{TSP}(S)$ 的结果。", "description": "给你一个 $1\\sim n$ 的排列 $a$ 和 $m$ 个该排列上的区间 $[l_i,r_i]$。\n\n对于一个值域区间 $[L,R]$：\n- 称「选取 $i$ 时该值域区间的价值」为 $a_{l_i},a_{l_i+1},\\dots,a_{r_i}$ 中有多少个数属于值域区间 $[L,R]$；\n- 定义值域区间 $[L,R]$ 的价值为 $\\forall i\\in[1,m]$，「选取 $i$ 时该值域区间的价值」的最大值。\n\n即，值域区间 $[L,R]$ 的价值为 $\\displaystyle\\max_{i=1}^m \\sum_{j=l_i}^{r_i} [L\\le a_j\\le R]$。\n\n定义两个区间相交当且仅当至少有一个整数被这两个区间共同包含。请你选出若干个**互不相交**的值域区间，使得它们的价值的乘积最大。将该答案对 $998244353$ 取模后输出。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数表示 $a_{1\\dots n}$。\n\n下面 $m$ 行，每行两个整数 $l_i,r_i$。", "outputFormat": "一个整数表示答案。输出答案时对 $998244353$ 取模。", "hint": "### 样例解释 1\n\n选择值域区间 $[1,3]$。\n\n### 样例解释 2\n\n可以选择值域区间 $[1,3],[4,5],[8,10]$。\n\n### 样例解释 3\n\n样例 3 满足特殊性质。\n\n### 数据规模与约定\n**本题采用捆绑测试。**\n\n| $\\mathrm{Subtask}$ | $n,m\\le$ | 特殊性质 | 分数 |\n| :-----: | :-----: | :-----: | :-----: |\n| $1$ | $20$ |  | $10$ |\n| $2$ | $5\\times 10^3$ |  | $15$ |\n| $3$ | $3\\times 10^5$ | $\\checkmark$ | $10$ |\n| $4$ | $5\\times 10^4$ |  | $25$ |\n| $5$ | $3\\times 10^5$ |  | $40$ |\n\n特殊性质：保证 $\\forall i\\in[1,n],a_i=i$。\n\n对于所有数据，保证 $1\\le n,m\\le 3\\times 10^5$，$1\\le l_i\\le r_i\\le n$，$a$ 是一个 $1\\sim n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P10881", "type": "P", "difficulty": 7, "samples": [["3\n1 2 3", "60"], ["4\n1 2 3 4", "8629"], ["7\n1 9 1 9 8 1 0", "311816897"], ["16\n2 0 0 9 0 2 2 8 2 0 0 9 0 8 1 5", "871736512"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["动态规划 DP", "2024", "洛谷原创", "O2优化", "组合数学", "线性代数"], "title": "「KDOI-07」能量场", "background": "4202 年，小 K 作为一名已经工作了 3143 天的 gaLaxy enGineer Master，在 XS41 星系的 OIPA115 星球上建立了据点，帮助人类探索未知。在这里，他建起了一些能量场。原本他决定使用一些卒来运输能量，然而在他操控的两个红色卒碰撞并损失所有能量后决定还是应该使用能量管道连接他们，~~并使能量管道呈 $(180+\\mathrm{eps})^\\circ$ 角~~。", "description": "小 K 有 $n$ 个能量场，第 $i$ 个能量场存储 $a_i$ 点能量。\n\n小 K 在能量场之间建立了 $n$ 条不同的双向能量管道，使得能量场两两连通。\n\n对于一条能量管道，它的能量级为两端能量场能量之和。\n\n小 K 对一组 $n$ 个不同能量管道集合的满意度是所有能量管道能量级的乘积。\n\n现在小 K 想知道，对于所有不同的合法的搭建能量管道的方式，满意度的总和是多少。由于小 K 的满意度是一个 $[0,998244353)$ 之间的整数，所以你只需要输出满意度总和对 $998244353$ 取模后的值即可。\n\n两种搭建管道的方式是不同的当且仅当存在至少一条管道连接能量场 $i,j$，且恰好在其中一种搭建管道的方式中出现。\n\n---\n\n**【形式化题意】**\n\n有一个 $n$ 个点的完全图 $G(V,E)$。每个点有点权 $a_i$。$i,j$ 两点之间的边权 $w_{i,j}=a_i+a_j$。\n\n定义一个连通子图 $G'(V,E')$ 使得 $E'\\in E$ 的权值为 $\\prod_{e\\in E'}w_e$。注意，子图的点集是全集。\n\n求 $G(V,E)$ 的连通子图中所有基环树的权值和，对 $998244353$ 取模。\n\n基环树要求无重边无自环。", "inputFormat": "第一行一个正整数 $n$，表示能量场数量。\n\n第二行 $n$ 个非负整数 $a_i$，表示第 $i$ 个能量场存储的能量。", "outputFormat": "一行，一个非负整数，表示对于所有不同搭建能量管道的方式，满意度的总和，对 $998244353$ 取模。", "hint": "### 样例解释 1\n\n可能的基环树形态只有包含三个点的环，环边 $(1,2),(1,3),(2,3)$ 的边权分别是 $3,4,5$，乘积为 $60$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\mathrm{Subtask}$ | $n\\leq$ | 特殊性质 | 分数 |\n|:--:|:--:|:--:|:--:|\n| $1$ | $3$ |  | $1$ |\n| $2$ | $7$ |  | $4$ |\n| $3$ | $24$ | $\\checkmark$ | $5$ |\n| $4$ | $12$ |  | $10$ |\n| $5$ | $18$ |  | $10$ |\n| $6$ | $20$ |  | $5$ |\n| $7$ | $23$ |  | $5$ |\n| $8$ | $24$ |  | $30$ |\n| $9$ | $50$ |  | $15$ |\n| $10$ | $200$ |  | $5$ |\n| $11$ | $500$ |  | $5$ |\n| $12$ | $1000$ |  | $5$ |\n\n特殊性质：保证 $\\forall i\\in[1,n],a_i=499122177$。\n\n对于所有数据，保证 $3\\leq n\\leq 1000$，$0\\leq a_i<998244353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「KDOI-07」能量场", "background": "4202 年，小 K 作为一名已经工作了 3143 天的 gaLaxy enGineer Master，在 XS41 星系的 OIPA115 星球上建立了据点，帮助人类探索未知。在这里，他建起了一些能量场。原本他决定使用一些卒来运输能量，然而在他操控的两个红色卒碰撞并损失所有能量后决定还是应该使用能量管道连接他们，~~并使能量管道呈 $(180+\\mathrm{eps})^\\circ$ 角~~。", "description": "小 K 有 $n$ 个能量场，第 $i$ 个能量场存储 $a_i$ 点能量。\n\n小 K 在能量场之间建立了 $n$ 条不同的双向能量管道，使得能量场两两连通。\n\n对于一条能量管道，它的能量级为两端能量场能量之和。\n\n小 K 对一组 $n$ 个不同能量管道集合的满意度是所有能量管道能量级的乘积。\n\n现在小 K 想知道，对于所有不同的合法的搭建能量管道的方式，满意度的总和是多少。由于小 K 的满意度是一个 $[0,998244353)$ 之间的整数，所以你只需要输出满意度总和对 $998244353$ 取模后的值即可。\n\n两种搭建管道的方式是不同的当且仅当存在至少一条管道连接能量场 $i,j$，且恰好在其中一种搭建管道的方式中出现。\n\n---\n\n**【形式化题意】**\n\n有一个 $n$ 个点的完全图 $G(V,E)$。每个点有点权 $a_i$。$i,j$ 两点之间的边权 $w_{i,j}=a_i+a_j$。\n\n定义一个连通子图 $G'(V,E')$ 使得 $E'\\in E$ 的权值为 $\\prod_{e\\in E'}w_e$。注意，子图的点集是全集。\n\n求 $G(V,E)$ 的连通子图中所有基环树的权值和，对 $998244353$ 取模。\n\n基环树要求无重边无自环。", "inputFormat": "第一行一个正整数 $n$，表示能量场数量。\n\n第二行 $n$ 个非负整数 $a_i$，表示第 $i$ 个能量场存储的能量。", "outputFormat": "一行，一个非负整数，表示对于所有不同搭建能量管道的方式，满意度的总和，对 $998244353$ 取模。", "hint": "### 样例解释 1\n\n可能的基环树形态只有包含三个点的环，环边 $(1,2),(1,3),(2,3)$ 的边权分别是 $3,4,5$，乘积为 $60$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\mathrm{Subtask}$ | $n\\leq$ | 特殊性质 | 分数 |\n|:--:|:--:|:--:|:--:|\n| $1$ | $3$ |  | $1$ |\n| $2$ | $7$ |  | $4$ |\n| $3$ | $24$ | $\\checkmark$ | $5$ |\n| $4$ | $12$ |  | $10$ |\n| $5$ | $18$ |  | $10$ |\n| $6$ | $20$ |  | $5$ |\n| $7$ | $23$ |  | $5$ |\n| $8$ | $24$ |  | $30$ |\n| $9$ | $50$ |  | $15$ |\n| $10$ | $200$ |  | $5$ |\n| $11$ | $500$ |  | $5$ |\n| $12$ | $1000$ |  | $5$ |\n\n特殊性质：保证 $\\forall i\\in[1,n],a_i=499122177$。\n\n对于所有数据，保证 $3\\leq n\\leq 1000$，$0\\leq a_i<998244353$。", "locale": "zh-CN"}}}
{"pid": "P10882", "type": "P", "difficulty": 7, "samples": [["7 6\n3 11 1 5 12 19 10\n1 1\n3 5\n2 5\n1 7\n2 6\n1 4", "yumi!\nyumi!\n28\n24\n28\nyumi!"], ["20 20\n26 17 11 89 56 33 72 73 43 77 80 87 97 17 43 74 72 91 49 69\n10 19\n2 4\n3 5\n2 11\n1 12\n10 19\n3 5\n8 15\n8 12\n14 20\n5 11\n13 18\n2 18\n17 19\n1 9\n5 8\n9 12\n1 11\n4 13\n3 18", "109\nyumi!\nyumi!\n87\n54\n109\nyumi!\n103\n193\n109\n132\n163\n45\n212\n54\n161\n200\n54\n132\n87"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "洛谷原创", "O2优化"], "title": "[JRKSJ R9] ZYPRESSEN", "background": "大气层越发清澈澄明\\\n无声的丝柏冲天而立\n\n![](https://s41.ax1x.com/2026/01/26/pZ2z24J.png)\n\n耀眼的大气下\\\n哀怨依然青深\\\n柏木静静摇曳\\\n鸟儿再次划破青空\\\n此处已无真心话语\\\n阿修罗泪如雨落土", "description": "已经完全是秋季了。\n\n即使如此，丝柏（ZYPRESSEN）也是一如既往的黢黑吧。\n\n给你一个长度为 $n$ 的序列 $a$，共有 $q$ 次询问，每次询问如下：\n\n* 给你一个区间 $[l,r]$，对于所有的 $i,j,k$ 满足 $l\\le i<j<k\\le r$ 且三边长度分别为 $a_i,a_j,a_k$ 的三角形存在，你需要求出 $a_i+a_j+a_k$ 的最小值。\n\n三边长度分别为 $a,b,c(a\\le b\\le c)$ 时，能构成三角形当且仅当 $a+b>c$。", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个整数 $a_{1\\dots n}$。\n\n接下来 $q$ 行，每行两个整数 $l,r$ 表示询问。", "outputFormat": "$q$ 行，每行一个整数表示答案。如果不存在符合条件的 $i,j,k$，输出 `yumi!`。", "hint": "### 样例解释 1\n\n对于区间 $[3,5]$，因为 $1+5<12$，所以不存在合法的三角形。\n\n对于区间 $[2,5]$ 和 $[2,6]$，选取 $a_i=11,a_j=5,a_k=12$。\n\n对于区间 $[1,7]$，选取 $a_i=3,a_j=11,a_k=10$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\mathrm{Subtask}$ | $n\\le$ | $q\\le$ | 特殊性质 |分数 | \n| :-----: | :-----: | :-----: | :-----: | :-----: | \n| $1$ | $5\\times 10^3$ | $5\\times 10^3$ | |$10$ | \n| $2$ | $5\\times 10^4$ | $5\\times 10^4$ | |$25$ | \n| $3$ | $2.5\\times 10^5$ | $5\\times 10^5$ | $\\checkmark$|$10$ | \n| $4$ | $2.5\\times 10^5$ | $5\\times 10^5$ | |$55$ | \n\n特殊性质：保证 $a_i$ 在范围内等概率随机生成。\n\n对于所有数据，保证 $1\\le n\\le 2.5\\times 10^5$，$1\\le q\\le 5\\times 10^5$，$1\\le a_i\\le 10^7$，$1\\le l\\le r\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R9] ZYPRESSEN", "background": "大气层越发清澈澄明\\\n无声的丝柏冲天而立\n\n![](https://s41.ax1x.com/2026/01/26/pZ2z24J.png)\n\n耀眼的大气下\\\n哀怨依然青深\\\n柏木静静摇曳\\\n鸟儿再次划破青空\\\n此处已无真心话语\\\n阿修罗泪如雨落土", "description": "已经完全是秋季了。\n\n即使如此，丝柏（ZYPRESSEN）也是一如既往的黢黑吧。\n\n给你一个长度为 $n$ 的序列 $a$，共有 $q$ 次询问，每次询问如下：\n\n* 给你一个区间 $[l,r]$，对于所有的 $i,j,k$ 满足 $l\\le i<j<k\\le r$ 且三边长度分别为 $a_i,a_j,a_k$ 的三角形存在，你需要求出 $a_i+a_j+a_k$ 的最小值。\n\n三边长度分别为 $a,b,c(a\\le b\\le c)$ 时，能构成三角形当且仅当 $a+b>c$。", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个整数 $a_{1\\dots n}$。\n\n接下来 $q$ 行，每行两个整数 $l,r$ 表示询问。", "outputFormat": "$q$ 行，每行一个整数表示答案。如果不存在符合条件的 $i,j,k$，输出 `yumi!`。", "hint": "### 样例解释 1\n\n对于区间 $[3,5]$，因为 $1+5<12$，所以不存在合法的三角形。\n\n对于区间 $[2,5]$ 和 $[2,6]$，选取 $a_i=11,a_j=5,a_k=12$。\n\n对于区间 $[1,7]$，选取 $a_i=3,a_j=11,a_k=10$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\mathrm{Subtask}$ | $n\\le$ | $q\\le$ | 特殊性质 |分数 | \n| :-----: | :-----: | :-----: | :-----: | :-----: | \n| $1$ | $5\\times 10^3$ | $5\\times 10^3$ | |$10$ | \n| $2$ | $5\\times 10^4$ | $5\\times 10^4$ | |$25$ | \n| $3$ | $2.5\\times 10^5$ | $5\\times 10^5$ | $\\checkmark$|$10$ | \n| $4$ | $2.5\\times 10^5$ | $5\\times 10^5$ | |$55$ | \n\n特殊性质：保证 $a_i$ 在范围内等概率随机生成。\n\n对于所有数据，保证 $1\\le n\\le 2.5\\times 10^5$，$1\\le q\\le 5\\times 10^5$，$1\\le a_i\\le 10^7$，$1\\le l\\le r\\le n$。", "locale": "zh-CN"}}}
{"pid": "P10883", "type": "P", "difficulty": 4, "samples": [["4\n3 2 1 4", "3 1"], ["2\n1 2", "1 1"], ["7\n3 6 5 7 4 1 2 ", "3 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2017", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2017/2018 #2] Doktor", "background": "搬运自 [COCI 2017/2018 Contest #2](https://hsin.hr/coci/archive/2017_2018/) T3「Doktor」，[原题题面](https://hsin.hr/coci/archive/2017_2018/contest2_tasks.pdf)。\n\nSpecial Judge 由搬题人提供，如果有锅请私信，谢谢。", "description": "> And the Mrs, Ms, says:\n>\n>\"I've been riding horses for fifteen years, and it is impossible to shoe a horse upside down!\"\n>\n> (…)\n\n\"Yes, that's upside down\" - whispers Domagoj, looking at Mate's hand while playing, for the purposes of this task, a heavily modified version of the card game Hanabi. For the sake of simplicity, Mate is holding $N$ cards in his hands, numbered from $1,2,\\dots,N$\n in a certain order. (Each number from $1$ to $N$\nappears exactly once.) As when playing the real game, he cannot voluntarily change the card order.\n\nJust so the task is at least somewhat related to the story, Domagoj will point for Mate to a contiguous subarray of cards. (He can point to a single card too, but he will point to at least one card.) Mate will then \"rotate\" that contiguous subarray and put it back.\n\n(The rotating can be thought of as taking all the cards in the given subarray and rotating all of them for 180 degrees. This means that the first and last card swap places, as well as the second and the second to last card, and so on.)\n\nLike all of us, Domagoj is very fond of fixed points. In other words, cards whose numbers match their position in hand, counting from Domagoj's left side. Therefore, he'd like the number of fixed points to be as great as possible after rotating the given subarray.\n\nHelp Domagoj find out which contiguous subarray he needs to point out so that the number of fixed points in Mate's hand after rotating that subarray is maximal.", "inputFormat": " The first line of input contains the positive integer $N (1 \\leq N \\leq 500000)$, the number of cards in Mate's hand.\n \n The following line contains the numbers on the cards in Mate's hand in the order that Domagoj sees them.", "outputFormat": " You must output a single line containing $A$ and \n$B$, the numbers on the cards that are the beginning and the end of the required contiguous subarray, in that order. If there are multiple options, output any of them.", "hint": "In the first test case, after rotating the contiguous subarray that starts with 3 and ends with 1, the cards will be ordered 1 2 3 4, and now all the cards are fixed points. In this example, the given output is the only correct output.\n\n In the second test case, rotating any subarray consisting of only one card results with the same card order, the one that produces the maximal number of fixed points.", "locale": "en", "translations": {"en": {"title": "[COCI 2017/2018 #2] Doktor", "background": "搬运自 [COCI 2017/2018 Contest #2](https://hsin.hr/coci/archive/2017_2018/) T3「Doktor」，[原题题面](https://hsin.hr/coci/archive/2017_2018/contest2_tasks.pdf)。\n\nSpecial Judge 由搬题人提供，如果有锅请私信，谢谢。", "description": "> And the Mrs, Ms, says:\n>\n>\"I've been riding horses for fifteen years, and it is impossible to shoe a horse upside down!\"\n>\n> (…)\n\n\"Yes, that's upside down\" - whispers Domagoj, looking at Mate's hand while playing, for the purposes of this task, a heavily modified version of the card game Hanabi. For the sake of simplicity, Mate is holding $N$ cards in his hands, numbered from $1,2,\\dots,N$\n in a certain order. (Each number from $1$ to $N$\nappears exactly once.) As when playing the real game, he cannot voluntarily change the card order.\n\nJust so the task is at least somewhat related to the story, Domagoj will point for Mate to a contiguous subarray of cards. (He can point to a single card too, but he will point to at least one card.) Mate will then \"rotate\" that contiguous subarray and put it back.\n\n(The rotating can be thought of as taking all the cards in the given subarray and rotating all of them for 180 degrees. This means that the first and last card swap places, as well as the second and the second to last card, and so on.)\n\nLike all of us, Domagoj is very fond of fixed points. In other words, cards whose numbers match their position in hand, counting from Domagoj's left side. Therefore, he'd like the number of fixed points to be as great as possible after rotating the given subarray.\n\nHelp Domagoj find out which contiguous subarray he needs to point out so that the number of fixed points in Mate's hand after rotating that subarray is maximal.", "inputFormat": " The first line of input contains the positive integer $N (1 \\leq N \\leq 500000)$, the number of cards in Mate's hand.\n \n The following line contains the numbers on the cards in Mate's hand in the order that Domagoj sees them.", "outputFormat": " You must output a single line containing $A$ and \n$B$, the numbers on the cards that are the beginning and the end of the required contiguous subarray, in that order. If there are multiple options, output any of them.", "hint": "In the first test case, after rotating the contiguous subarray that starts with 3 and ends with 1, the cards will be ordered 1 2 3 4, and now all the cards are fixed points. In this example, the given output is the only correct output.\n\n In the second test case, rotating any subarray consisting of only one card results with the same card order, the one that produces the maximal number of fixed points.", "locale": "en"}, "zh-CN": {"title": "[COCI 2017/2018 #2] Doktor", "background": "", "description": "> 夫人说：\n>\n>「我已经骑马十五年了，不可能把马倒着钉蹄铁！」\n>\n> （……）\n\n「是的，那是倒着的。」——多马戈伊低声说道，看着马特的手，正在玩一个经过大幅修改的纸牌游戏 Hanabi。为了简单起见，马特手中有 $N$ 张牌，按顺序编号为 $1, 2, \\dots, N$。\n每个数字从 $1$ 到 $N$ 恰好出现一次。就像玩真正的游戏一样，他不能主动改变牌的顺序。\n\n为了让任务至少与故事有些关联，多马戈伊会指向马特手中一段连续的牌子序列。（他也可以指向单张牌，但至少会指向一张牌。）然后马特将「旋转」该连续子数组并放回去。\n\n（旋转可以被认为是将给定子数组中的所有牌旋转 180 度。这意味着第一张和最后一张牌交换位置，第二张和倒数第二张牌交换位置，依此类推。）\n\n和我们所有人一样，多马戈伊非常喜欢不动点。换句话说，就是牌的数字与它们在手中的位置相匹配的牌，从多马戈伊的左侧开始计数。因此，他希望在旋转给定子数组后，不动点的数量尽可能多。\n\n帮助多马戈伊找出他需要指出哪一段连续子数组，以便在旋转该子数组后，马特手中的不动点数量达到最大。", "inputFormat": "输入的第一行包含正整数 $N (1 \\leq N \\leq 500000)$，表示马特手中的牌数。\n\n接下来的行包含多马戈伊看到的马特手中牌的顺序。", "outputFormat": "你必须输出一行，包含 $A$ 和 $B$，即所需连续子数组的起始和结束牌上的数字，按此顺序。如果有多个选项，输出其中任意一个。", "hint": "在第一个测试用例中，旋转从 3 开始到 1 结束的连续子数组后，牌的顺序将变为 1 2 3 4，现在所有的牌都是不动点。在这个例子中，给定的输出是唯一正确的输出。\n\n在第二个测试用例中，旋转任何仅包含一张牌的子数组会导致相同的牌顺序，这种顺序产生最大数量的不动点。（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10884", "type": "P", "difficulty": 5, "samples": [["4 6\n2 1\n6 3\n7 2\n5 6", "3"], ["2 7\n4 6\n3 5", "0"], ["4 15\n5 5\n5 12\n6 10\n2 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2017", "COCI（克罗地亚）"], "title": "[COCI 2017/2018 #2] San", "background": "搬运自 [COCI 2017/2018 Contest #2](https://hsin.hr/coci/archive/2017_2018/) T4「San」，[原题题面](https://hsin.hr/coci/archive/2017_2018/contest2_tasks.pdf)。\n\n根据原题，时间限制 1 秒，空间限制 64 MB，满分 120 分。", "description": "Have you ever dreamt that you were the main character in a computer game? The protagonist of this story, Branimir, is having that dream right now.\n\nThe world in Branimir's dream consists of $N$ skyscrapers ordered from left to right. For the $i^{th}$ skyscraper, we know the height $H_i$ and the number of gold coins $G_i$ on the roof of the skyscraper. The game begins with a jump on any of the skyscrapers and consists of several steps. In each step, Branimir can jump on a skyscraper to the right from the one he's currently on (it is possible for him to jump over a couple of them too) and if it is not lower than the current one. On each skyscraper roof he's on, Branimir will collect all the gold coins. Branimir can end the game after any number of steps (zero as well), but he must collect at least $K$ gold coins in order to advance to the next level.\n\nBranimir wants to know the number of different ways for him to play the game in order to advance to the next level. Two games are played in different ways if there is a skyscraper that was visited in one game, and not in the other.", "inputFormat": "The first line of input contains positive integers $N(1\\leq N \\leq 40)$ and $K(1\\leq K\\leq 4\\times 10^{10}$), the numbers from the task.\n\nThe $i^{th}$ of the following \n$N$ lines contains two positive integers, $H_i$ and $G_i(1\\leq H_i,G_i \\leq 10^9$), the numbers from the task.", "outputFormat": "You must output the number of different ways to play the game from the task.", "hint": "#### Explanation for Sample Output 1\n\nThe following three games will take Branimir to the next level (the numbers represent the labels of the skyscrapers he visited): {1, 2, 3}, {1, 4} and {4}.\n\n#### Scoring\n\nIn test cases worth 40% of total points, it will hold \n$N\\leq 20$.", "locale": "en", "translations": {"en": {"title": "[COCI 2017/2018 #2] San", "background": "搬运自 [COCI 2017/2018 Contest #2](https://hsin.hr/coci/archive/2017_2018/) T4「San」，[原题题面](https://hsin.hr/coci/archive/2017_2018/contest2_tasks.pdf)。\n\n根据原题，时间限制 1 秒，空间限制 64 MB，满分 120 分。", "description": "Have you ever dreamt that you were the main character in a computer game? The protagonist of this story, Branimir, is having that dream right now.\n\nThe world in Branimir's dream consists of $N$ skyscrapers ordered from left to right. For the $i^{th}$ skyscraper, we know the height $H_i$ and the number of gold coins $G_i$ on the roof of the skyscraper. The game begins with a jump on any of the skyscrapers and consists of several steps. In each step, Branimir can jump on a skyscraper to the right from the one he's currently on (it is possible for him to jump over a couple of them too) and if it is not lower than the current one. On each skyscraper roof he's on, Branimir will collect all the gold coins. Branimir can end the game after any number of steps (zero as well), but he must collect at least $K$ gold coins in order to advance to the next level.\n\nBranimir wants to know the number of different ways for him to play the game in order to advance to the next level. Two games are played in different ways if there is a skyscraper that was visited in one game, and not in the other.", "inputFormat": "The first line of input contains positive integers $N(1\\leq N \\leq 40)$ and $K(1\\leq K\\leq 4\\times 10^{10}$), the numbers from the task.\n\nThe $i^{th}$ of the following \n$N$ lines contains two positive integers, $H_i$ and $G_i(1\\leq H_i,G_i \\leq 10^9$), the numbers from the task.", "outputFormat": "You must output the number of different ways to play the game from the task.", "hint": "#### Explanation for Sample Output 1\n\nThe following three games will take Branimir to the next level (the numbers represent the labels of the skyscrapers he visited): {1, 2, 3}, {1, 4} and {4}.\n\n#### Scoring\n\nIn test cases worth 40% of total points, it will hold \n$N\\leq 20$.", "locale": "en"}, "zh-CN": {"title": "[COCI 2017/2018 #2] San", "background": "", "description": "你是否曾经梦见自己是电脑游戏中的主角？这个故事的主角 Branimir 正在做这样的梦。\n\n在 Branimir 的梦中，世界由 $N$ 座从左到右排列的摩天大楼组成。对于第 $i$ 座摩天大楼，我们知道其高度 $H_i$ 和屋顶上的金币数量 $G_i$。游戏开始时，可以跳到任意一座摩天大楼上，并由此开始多个步骤。在每一步中，Branimir 可以跳到右边的一座摩天大楼上（也可以跳过几座），但前提是它的高度不低于当前所在的摩天大楼。在每座摩天大楼的屋顶上，Branimir 将收集所有的金币。Branimir 可以在任意步数后结束游戏（包括零步），但他必须至少收集 $K$ 个金币才能晋级到下一个关卡。\n\nBranimir 想知道有多少种不同的方式可以玩这个游戏以晋级到下一个关卡。如果在一个游戏中访问了某座摩天大楼，而在另一个游戏中没有访问，则这两个游戏的玩法不同。", "inputFormat": "输入的第一行包含正整数 $N(1\\leq N \\leq 40)$ 和 $K(1\\leq K\\leq 4\\times 10^{10})$，这些是题目中的数字。\n\n接下来的 $N$ 行中的第 $i$ 行包含两个正整数 $H_i$ 和 $G_i(1\\leq H_i,G_i \\leq 10^9)$，这些是题目中的数字。", "outputFormat": "你必须输出完成题目所述游戏的不同方式的数量。", "hint": "#### 示例输出 1 的解释\n\n以下三种游戏方式可以让 Branimir 晋级到下一个关卡（数字表示他访问的摩天大楼的编号）：{1, 2, 3}，{1, 4} 和 {4}。\n\n#### 评分\n\n在总分的 40% 的测试用例中，将满足 $N\\leq 20$。（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10885", "type": "P", "difficulty": 3, "samples": [["2\n4\n1 3 2 4\n5\n1 5 3 2 4", "3\n3"], ["4\n6\n2 1 4 3 6 5\n6\n1 2 3 4 5 6\n3\n1 3 2\n1\n1", "2\n5\n2\n0"], ["6\n2\n1 2\n20\n16 2 10 18 4 6 8 20 14 12 3 9 17 13 1 15 7 11 19 5\n9\n3 4 1 5 2 6 7 8 9\n10\n1 3 2 4 7 6 5 8 10 9\n13\n5 7 3 11 1 9 13 6 10 4 2 8 12\n5\n1 2 3 4 5", "1\n1\n4\n5\n1\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["梦熊比赛"], "title": "【MX-S3-T1】「FeOI Round 1」野心", "background": "原题链接：<https://oier.team/problems/S3A>。\n\n---\n\n![](bilibili:BV1eZ4y1w7n1)", "description": "给出一个 $1 \\sim n$ 的排列 $p$，询问存在多少个数 $i$（$1 \\le i <n$）满足 $[p_1,p_2,\\cdots,p_i]$ 和 $[p_{i+1},p_{i+2},\\cdots,p_n]$ 排序后都是等差数列。", "inputFormat": "**本题单个测试点内包含多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。\n\n接下来，对于每组数据，格式如下：\n\n第一行一个数 $n$ 表示排列长度。\n\n接下来一行 $n$ 个数表示排列 $p$。", "outputFormat": "对于每组测试数据，输出一行一个数表示询问的答案。", "hint": "**【样例解释 #1】**\n\n第一组：三种拆分为 $[1,3,2][4]$，$[1,3][2,4]$，$[1][3,2,4]$。\n\n第二组：三种拆分为 $[1][5,3,2,4]$，$[1,5][3,2,4]$，$[1,5,3][2,4]$。\n\n**【样例解释 #2】**\n\n第一组：两种拆分为 $[2,1][4,3,6,5]$，$[2,1,4,3][6,5]$。\n\n第二组：每种拆分都是合法的。\n\n第三组：每种拆分都是合法的。\n\n第四组：不存在拆分方案，故没有方案合法。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n设 $\\sum n$ 为单个测试点内所有的 $n$ 之和。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$1 \\le n \\le 10^6$，$1 \\le \\sum n \\le 2 \\times 10^6$，保证 $p$ 是排列且 $1 \\le p_i \\le n$。\n\n| 子任务编号 | $n $ | $\\sum n $ | 分数 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $\\le 10^3$ | $\\le 5\\times 10^3$ | $30$ |\n| $2$ | $\\le 10^5$ | $\\le 5\\times 10^5$ | $30$ |\n| $3$ | $\\le 10^6$ | $\\le 2\\times 10^6$ | $40$ |\n\n**请使用较快的输入输出方式。**\n\n**新增子任务 4 为 hack 数据，分值为 $\\boldsymbol{0}$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S3-T1】「FeOI Round 1」野心", "background": "原题链接：<https://oier.team/problems/S3A>。\n\n---\n\n![](bilibili:BV1eZ4y1w7n1)", "description": "给出一个 $1 \\sim n$ 的排列 $p$，询问存在多少个数 $i$（$1 \\le i <n$）满足 $[p_1,p_2,\\cdots,p_i]$ 和 $[p_{i+1},p_{i+2},\\cdots,p_n]$ 排序后都是等差数列。", "inputFormat": "**本题单个测试点内包含多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。\n\n接下来，对于每组数据，格式如下：\n\n第一行一个数 $n$ 表示排列长度。\n\n接下来一行 $n$ 个数表示排列 $p$。", "outputFormat": "对于每组测试数据，输出一行一个数表示询问的答案。", "hint": "**【样例解释 #1】**\n\n第一组：三种拆分为 $[1,3,2][4]$，$[1,3][2,4]$，$[1][3,2,4]$。\n\n第二组：三种拆分为 $[1][5,3,2,4]$，$[1,5][3,2,4]$，$[1,5,3][2,4]$。\n\n**【样例解释 #2】**\n\n第一组：两种拆分为 $[2,1][4,3,6,5]$，$[2,1,4,3][6,5]$。\n\n第二组：每种拆分都是合法的。\n\n第三组：每种拆分都是合法的。\n\n第四组：不存在拆分方案，故没有方案合法。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n设 $\\sum n$ 为单个测试点内所有的 $n$ 之和。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$1 \\le n \\le 10^6$，$1 \\le \\sum n \\le 2 \\times 10^6$，保证 $p$ 是排列且 $1 \\le p_i \\le n$。\n\n| 子任务编号 | $n $ | $\\sum n $ | 分数 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $\\le 10^3$ | $\\le 5\\times 10^3$ | $30$ |\n| $2$ | $\\le 10^5$ | $\\le 5\\times 10^5$ | $30$ |\n| $3$ | $\\le 10^6$ | $\\le 2\\times 10^6$ | $40$ |\n\n**请使用较快的输入输出方式。**\n\n**新增子任务 4 为 hack 数据，分值为 $\\boldsymbol{0}$。**", "locale": "zh-CN"}}}
{"pid": "P10886", "type": "P", "difficulty": 4, "samples": [["2 0 1 1 1", "11"], ["9 0 1 0 663", "422994"], ["20 1 0 0 998244353", "560706529"], ["114514 17723 134 1045 233337", "442762986"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "素数判断,质数,筛法", "梦熊比赛"], "title": "【MX-S3-T2】「FeOI Round 1」Journey", "background": "原题链接：<https://oier.team/problems/S3B>。\n\n---\n\n![](bilibili:BV1pv411C7ti)", "description": "小 W 最近正在学习某编程语言。\n\n这个编程语言有个语句如下：\n\n```\nrange(a,b,c)\n```\n\n这个语句表示一个序列，这个序列是这样的：\n\n$$\n[a,a+c,a+2c,\\cdots,a+kc]\n$$\n\n其中，$k$ 是最大的满足 $a+kc<b$ 的非负整数 $k$。例如 `range(1,7,2)` 表示的序列为 $[1,3,5]$。\n\n小 W 想问你一个问题：给你一个长为 $n$ 的序列 $g$（下标从 $1$ 开始），求出下列式子的值，答案模 $10^9 +7$。\n\n$$\n\\sum_{a=1}^{n}\\sum_{b=a+1}^{n+1}\\sum_{c=1}^{n}\\sum\\limits_{i\\in \\mathrm{range}(a,b,c)} g_i\n$$\n\n", "inputFormat": "为了加快读入速度，我们采用以下读入方法。\n\n读入共一行五个非负整数 $n,A,B,C,g_n$。\n\n其中 $n$ 为序列 $g$ 的长度，$A,B,C$ 为生成数据的参数，$g_n$ 为序列 $g$ 的第 $n$ 项。\n\n对于序列 $g$ 的第 $i$（$1\\leq i < n$）项，满足 $g_i \\equiv Ag_{i+1}^2+Bg_{i+1}+C \\pmod {10^9 + 7}$。", "outputFormat": "共一行一个非负整数，为题目中所求的答案。", "hint": "**【样例解释 #1】**\n\n$g=[2,1]$（下标从 $1$ 开始）\n\n令 $ans=\\sum\\limits_{i\\in \\mathrm{range}(a,b,c)} g_i$。\n\n当 $a=1,b=2,c=1$ 时，$ans=2$。\n\n当 $a=1,b=2,c=2$ 时，$ans=2$。\n\n当 $a=1,b=3,c=1$ 时，$ans=2+1=3$。\n\n当 $a=1,b=3,c=2$ 时，$ans=2$。\n\n当 $a=2,b=3,c=1$ 时，$ans=1$。\n\n当 $a=2,b=3,c=2$ 时，$ans=1$。\n\n答案为 $\\sum ans=2+2+3+2+1+1=11$。\n\n**【样例解释 #2】**\n\n该样例满足特殊性质 A。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq 2\\times 10^7$，$0\\leq A,B,C,g_n<10^9 +7$。\n\n| 测试点编号 |       $n=$       | 特殊性质 |\n| :--------: | :--------------: | :------: |\n|    $1$     |       $1$        |    AB    |\n|    $2$     |      $1000$      |    无    |\n|    $3$     |      $1000$      |    无    |\n|    $4$     |      $5000$      |    无    |\n|    $5$     |      $5000$      |    无    |\n|    $6$     |      $10^4$      |    A     |\n|    $7$     |      $10^5$      |    A     |\n|    $8$     |      $10^5$      |    B     |\n|    $9$     |      $10^5$      |    无    |\n|    $10$    |  $2\\times 10^5$  |    A     |\n|    $11$    |  $2\\times 10^5$  |    B     |\n|    $12$    |  $5\\times 10^5$  |    无    |\n|    $13$    |      $10^6$      |    A     |\n|    $14$    |      $10^6$      |    B     |\n|    $15$    |  $2\\times 10^6$  |    无    |\n|    $16$    |  $3\\times 10^6$  |    无    |\n|    $17$    |  $5\\times 10^6$  |    A     |\n|    $18$    |      $10^7$      |    A     |\n|    $19$    |      $10^7$      |    B     |\n|    $20$    | $1.3\\times 10^7$ |    无    |\n|    $21$    | $1.6\\times 10^7$ |    无    |\n|    $22$    |  $2\\times 10^7$  |    A     |\n|    $23$    |  $2\\times 10^7$  |    B     |\n|    $24$    |  $2\\times 10^7$  |    无    |\n|    $25$    |  $2\\times 10^7$  |    无    |\n\n特殊性质 A：保证所有 $g_i$ 相等。\n\n特殊性质 B：保证只有 $g_n\\neq 0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S3-T2】「FeOI Round 1」Journey", "background": "原题链接：<https://oier.team/problems/S3B>。\n\n---\n\n![](bilibili:BV1pv411C7ti)", "description": "小 W 最近正在学习某编程语言。\n\n这个编程语言有个语句如下：\n\n```\nrange(a,b,c)\n```\n\n这个语句表示一个序列，这个序列是这样的：\n\n$$\n[a,a+c,a+2c,\\cdots,a+kc]\n$$\n\n其中，$k$ 是最大的满足 $a+kc<b$ 的非负整数 $k$。例如 `range(1,7,2)` 表示的序列为 $[1,3,5]$。\n\n小 W 想问你一个问题：给你一个长为 $n$ 的序列 $g$（下标从 $1$ 开始），求出下列式子的值，答案模 $10^9 +7$。\n\n$$\n\\sum_{a=1}^{n}\\sum_{b=a+1}^{n+1}\\sum_{c=1}^{n}\\sum\\limits_{i\\in \\mathrm{range}(a,b,c)} g_i\n$$\n\n", "inputFormat": "为了加快读入速度，我们采用以下读入方法。\n\n读入共一行五个非负整数 $n,A,B,C,g_n$。\n\n其中 $n$ 为序列 $g$ 的长度，$A,B,C$ 为生成数据的参数，$g_n$ 为序列 $g$ 的第 $n$ 项。\n\n对于序列 $g$ 的第 $i$（$1\\leq i < n$）项，满足 $g_i \\equiv Ag_{i+1}^2+Bg_{i+1}+C \\pmod {10^9 + 7}$。", "outputFormat": "共一行一个非负整数，为题目中所求的答案。", "hint": "**【样例解释 #1】**\n\n$g=[2,1]$（下标从 $1$ 开始）\n\n令 $ans=\\sum\\limits_{i\\in \\mathrm{range}(a,b,c)} g_i$。\n\n当 $a=1,b=2,c=1$ 时，$ans=2$。\n\n当 $a=1,b=2,c=2$ 时，$ans=2$。\n\n当 $a=1,b=3,c=1$ 时，$ans=2+1=3$。\n\n当 $a=1,b=3,c=2$ 时，$ans=2$。\n\n当 $a=2,b=3,c=1$ 时，$ans=1$。\n\n当 $a=2,b=3,c=2$ 时，$ans=1$。\n\n答案为 $\\sum ans=2+2+3+2+1+1=11$。\n\n**【样例解释 #2】**\n\n该样例满足特殊性质 A。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq 2\\times 10^7$，$0\\leq A,B,C,g_n<10^9 +7$。\n\n| 测试点编号 |       $n=$       | 特殊性质 |\n| :--------: | :--------------: | :------: |\n|    $1$     |       $1$        |    AB    |\n|    $2$     |      $1000$      |    无    |\n|    $3$     |      $1000$      |    无    |\n|    $4$     |      $5000$      |    无    |\n|    $5$     |      $5000$      |    无    |\n|    $6$     |      $10^4$      |    A     |\n|    $7$     |      $10^5$      |    A     |\n|    $8$     |      $10^5$      |    B     |\n|    $9$     |      $10^5$      |    无    |\n|    $10$    |  $2\\times 10^5$  |    A     |\n|    $11$    |  $2\\times 10^5$  |    B     |\n|    $12$    |  $5\\times 10^5$  |    无    |\n|    $13$    |      $10^6$      |    A     |\n|    $14$    |      $10^6$      |    B     |\n|    $15$    |  $2\\times 10^6$  |    无    |\n|    $16$    |  $3\\times 10^6$  |    无    |\n|    $17$    |  $5\\times 10^6$  |    A     |\n|    $18$    |      $10^7$      |    A     |\n|    $19$    |      $10^7$      |    B     |\n|    $20$    | $1.3\\times 10^7$ |    无    |\n|    $21$    | $1.6\\times 10^7$ |    无    |\n|    $22$    |  $2\\times 10^7$  |    A     |\n|    $23$    |  $2\\times 10^7$  |    B     |\n|    $24$    |  $2\\times 10^7$  |    无    |\n|    $25$    |  $2\\times 10^7$  |    无    |\n\n特殊性质 A：保证所有 $g_i$ 相等。\n\n特殊性质 B：保证只有 $g_n\\neq 0$。", "locale": "zh-CN"}}}
