{"pid": "P7500", "type": "P", "difficulty": 4, "samples": [["8 4 4\n4 1 2 3 5\n2 3 6\n2 2 4\n3 7 4 8\n1 6\n4 3\n4 8\n6 7", "9"], ["8 4 4\n4 1 2 3 5\n3 6 3 8\n2 2 4\n3 7 4 8\n1 6\n4 3\n4 8\n6 7", "7"], ["8 3 4\n4 1 2 3 5\n2 3 6\n3 7 4 8\n1 6\n4 3\n4 8\n6 7", "3"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "「HMOI R1」地铁客流", "background": "一座城市的地铁客流量是非常重要的指标，它体现了这座城市正在不断流动着的人口数量。无论通勤还是旅游，都会给这座城市的经济带来活力。\n\n疫情期间各地地铁客流惨淡，甚至有部分城市地铁停运。现在疫情态势好转，各地陆续复工复产，地铁客流量大小也是判断城市复工复产、经济恢复率的重要参考。", "description": "天穹市的地铁系统由 $M$ 条线路组成，共有 $N$ 座车站，**每座车站都会有线路停靠**。每条线路的相邻两站之间可视为由无向边连接。其中地铁 $i$ 号线上有 $k_i$ 座车站，**这些车站互不相同**。\n\n这些线路会在一些车站相交，也就是说，一座车站可能有很多线路停靠。\n\n现在，有 $P$ 位乘客分别想从 $s_j$ 号车站出发，去 $t_j$ 号车站，**保证这两座车站不同**。当这两座车站不在一条线路上时，他就会进行若干次换乘。作为天穹地铁的技术工作人员，你需要计算这些乘客贡献的客流量。\n\n-------------\n\n请注意，在这里使用的客流量计算方法和实际应用中的有所不同。\n\n客流量 $=$ 进站客流 $+$ 换乘客流。进站客流即为乘客数；换乘客流为乘客的换乘次数。起终点之间可能会有多条路径可以选择，此时，地铁客流量与 **乘客选择的** 路径无关；计算时，我们只考虑 **换乘次数最少** 的路径。\n\n---------\n\n注意：\n\n- 设从 $s$ 到 $t$ 最少进行 $\\rm trans$ 次换乘，则此时要乘坐 $\\rm trans + 1$ 条线路，贡献 $\\rm trans + 1$ 的客流量。  \n- 当乘客不能从起点到达终点时，即 $s, t$ 之间没有通路，他就会去坐公交，此时客流量计为 $0$。", "inputFormat": "第一行三个整数 $N, M, P$。\n\n接下来 $M$ 行，每行表示一条地铁线路：  \n每行第一个整数为 $k_i\\ (2 \\le k_i \\le N)$，为这条线的车站数；  \n后面 $k_i$ 个整数 $q\\ (1 \\le q \\le N)$，为这条线路依次经过的车站编号。\n\n接下来 $P$ 行，每行两个整数 $s_j, t_j\\ (1 \\le s_j, t_j \\le N;\\ s_j \\neq t_j)$，表示一位乘客的出行起终点。", "outputFormat": "仅一行一个整数，表示这些乘客贡献的客流量。", "hint": "样例解释：\n\n- 默认乘客会选择换乘次数最少的路径。\n- 边上的数字表示所在地铁线路的编号。\n\n样例 1 如图：\n![](https://cdn.luogu.com.cn/upload/image_hosting/t97d5qmr.png)\n\n乘客 $1$ 会乘坐 $1$ 号线从 $1$ 到 $3$，再乘坐 $2$ 号线从 $3$ 到 $6$；  \n乘客 $2$ 会乘坐 $3$ 号线从 $4$ 到 $2$，再乘坐 $1$ 号线从 $2$ 到 $3$；  \n乘客 $3$ 会乘坐 $4$ 号线从 $4$ 到 $8$；  \n乘客 $4$ 会乘坐 $2$ 号线从 $6$ 到 $3$，乘坐 $1$ 号线从 $3$ 到 $2$，再乘坐 $3$ 号线从 $2$ 到 $4$，最后乘坐 $4$ 号线从 $4$ 到 $7$。\n\n如上，四个人分别贡献了 $2, 2, 1, 4$ 的客流量，答案为 $9$。\n\n样例 2 如图：\n![](https://cdn.luogu.com.cn/upload/image_hosting/i0lm9un9.png)\n\n相比样例 1，  \n乘客 $2$ 可以选择另外一条路线，即乘坐 $4$ 号线从 $4$ 到 $8$，再乘坐 $2$ 号线从 $8$ 到 $3$，也是换乘一次的；  \n乘客 $4$ 可以选择另外一条换乘次数更少的的路线：乘坐 $4$ 号线从 $7$ 到 $8$，再乘坐 $2$ 号线从 $8$ 到 $6$，只换乘了一次。\n\n总客流量为 $2 + 2 + 1 + 2 = 7$。\n\n样例 3 如图：\n![](https://cdn.luogu.com.cn/upload/image_hosting/a2afk5k5.png)\n\n相比样例 1，乘客 $2$ 和 $4$ 的出行路径不是通路，不会计入客流量。\n\n总客流量为 $2 + 0 + 1 + 0 = 3$。\n\n------------\n\n设车站 $i$ 停靠的线路数为 $\\mathrm{siz}_i$。  \n对于所有数据：\n\n- $2 \\le N \\le 10^5$；\n- $1 \\le M \\le 1000$；\n- $1 \\le P \\le 100$；\n- $1 \\le \\mathrm{siz}_i \\le 50$。\n\n--------\n\n**本题采用捆绑测试。**\n\n| No.  | Constraints              | Score |\n| ---- | ------------------------ | ----- |\n| $1$  | $N, P \\le 5;\\ M \\le 3$   | $10$  |\n| $2$  | $k_i = 2$                | $20$  |\n| $3$  | $N, M \\le 50;\\ P \\le 10$ | $20$  |\n| $4$  | $M \\le 500;\\ P \\le 10$   | $20$  |\n| $5$  | No further constraints   | $30$  |\n\n------------\n\n由于读入量较大，请勿不关流同步使用 `cin`。\n\n你可以通过 `std::ios::sync_with_stdio(false)` 来关闭 `cin` 的流同步。\n\n你也可以使用以下快速读入模板，支持读入 `int` 范围内的非负整数。\n\n```cpp\nint readInt() {\n\tint ret = 0; char o;\n\twhile (!isdigit(o = getchar()));\n\tdo ret = ret * 10 + (o ^ 48);\n\twhile (isdigit(o = getchar()));\n\treturn ret;\n}\n```\n----------\n\n- Idea: 南桥汽车站\n- Solution: 南桥汽车站\n- Code: 南桥汽车站\n- Data: 南桥汽车站", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HMOI R1」地铁客流", "background": "一座城市的地铁客流量是非常重要的指标，它体现了这座城市正在不断流动着的人口数量。无论通勤还是旅游，都会给这座城市的经济带来活力。\n\n疫情期间各地地铁客流惨淡，甚至有部分城市地铁停运。现在疫情态势好转，各地陆续复工复产，地铁客流量大小也是判断城市复工复产、经济恢复率的重要参考。", "description": "天穹市的地铁系统由 $M$ 条线路组成，共有 $N$ 座车站，**每座车站都会有线路停靠**。每条线路的相邻两站之间可视为由无向边连接。其中地铁 $i$ 号线上有 $k_i$ 座车站，**这些车站互不相同**。\n\n这些线路会在一些车站相交，也就是说，一座车站可能有很多线路停靠。\n\n现在，有 $P$ 位乘客分别想从 $s_j$ 号车站出发，去 $t_j$ 号车站，**保证这两座车站不同**。当这两座车站不在一条线路上时，他就会进行若干次换乘。作为天穹地铁的技术工作人员，你需要计算这些乘客贡献的客流量。\n\n-------------\n\n请注意，在这里使用的客流量计算方法和实际应用中的有所不同。\n\n客流量 $=$ 进站客流 $+$ 换乘客流。进站客流即为乘客数；换乘客流为乘客的换乘次数。起终点之间可能会有多条路径可以选择，此时，地铁客流量与 **乘客选择的** 路径无关；计算时，我们只考虑 **换乘次数最少** 的路径。\n\n---------\n\n注意：\n\n- 设从 $s$ 到 $t$ 最少进行 $\\rm trans$ 次换乘，则此时要乘坐 $\\rm trans + 1$ 条线路，贡献 $\\rm trans + 1$ 的客流量。  \n- 当乘客不能从起点到达终点时，即 $s, t$ 之间没有通路，他就会去坐公交，此时客流量计为 $0$。", "inputFormat": "第一行三个整数 $N, M, P$。\n\n接下来 $M$ 行，每行表示一条地铁线路：  \n每行第一个整数为 $k_i\\ (2 \\le k_i \\le N)$，为这条线的车站数；  \n后面 $k_i$ 个整数 $q\\ (1 \\le q \\le N)$，为这条线路依次经过的车站编号。\n\n接下来 $P$ 行，每行两个整数 $s_j, t_j\\ (1 \\le s_j, t_j \\le N;\\ s_j \\neq t_j)$，表示一位乘客的出行起终点。", "outputFormat": "仅一行一个整数，表示这些乘客贡献的客流量。", "hint": "样例解释：\n\n- 默认乘客会选择换乘次数最少的路径。\n- 边上的数字表示所在地铁线路的编号。\n\n样例 1 如图：\n![](https://cdn.luogu.com.cn/upload/image_hosting/t97d5qmr.png)\n\n乘客 $1$ 会乘坐 $1$ 号线从 $1$ 到 $3$，再乘坐 $2$ 号线从 $3$ 到 $6$；  \n乘客 $2$ 会乘坐 $3$ 号线从 $4$ 到 $2$，再乘坐 $1$ 号线从 $2$ 到 $3$；  \n乘客 $3$ 会乘坐 $4$ 号线从 $4$ 到 $8$；  \n乘客 $4$ 会乘坐 $2$ 号线从 $6$ 到 $3$，乘坐 $1$ 号线从 $3$ 到 $2$，再乘坐 $3$ 号线从 $2$ 到 $4$，最后乘坐 $4$ 号线从 $4$ 到 $7$。\n\n如上，四个人分别贡献了 $2, 2, 1, 4$ 的客流量，答案为 $9$。\n\n样例 2 如图：\n![](https://cdn.luogu.com.cn/upload/image_hosting/i0lm9un9.png)\n\n相比样例 1，  \n乘客 $2$ 可以选择另外一条路线，即乘坐 $4$ 号线从 $4$ 到 $8$，再乘坐 $2$ 号线从 $8$ 到 $3$，也是换乘一次的；  \n乘客 $4$ 可以选择另外一条换乘次数更少的的路线：乘坐 $4$ 号线从 $7$ 到 $8$，再乘坐 $2$ 号线从 $8$ 到 $6$，只换乘了一次。\n\n总客流量为 $2 + 2 + 1 + 2 = 7$。\n\n样例 3 如图：\n![](https://cdn.luogu.com.cn/upload/image_hosting/a2afk5k5.png)\n\n相比样例 1，乘客 $2$ 和 $4$ 的出行路径不是通路，不会计入客流量。\n\n总客流量为 $2 + 0 + 1 + 0 = 3$。\n\n------------\n\n设车站 $i$ 停靠的线路数为 $\\mathrm{siz}_i$。  \n对于所有数据：\n\n- $2 \\le N \\le 10^5$；\n- $1 \\le M \\le 1000$；\n- $1 \\le P \\le 100$；\n- $1 \\le \\mathrm{siz}_i \\le 50$。\n\n--------\n\n**本题采用捆绑测试。**\n\n| No.  | Constraints              | Score |\n| ---- | ------------------------ | ----- |\n| $1$  | $N, P \\le 5;\\ M \\le 3$   | $10$  |\n| $2$  | $k_i = 2$                | $20$  |\n| $3$  | $N, M \\le 50;\\ P \\le 10$ | $20$  |\n| $4$  | $M \\le 500;\\ P \\le 10$   | $20$  |\n| $5$  | No further constraints   | $30$  |\n\n------------\n\n由于读入量较大，请勿不关流同步使用 `cin`。\n\n你可以通过 `std::ios::sync_with_stdio(false)` 来关闭 `cin` 的流同步。\n\n你也可以使用以下快速读入模板，支持读入 `int` 范围内的非负整数。\n\n```cpp\nint readInt() {\n\tint ret = 0; char o;\n\twhile (!isdigit(o = getchar()));\n\tdo ret = ret * 10 + (o ^ 48);\n\twhile (isdigit(o = getchar()));\n\treturn ret;\n}\n```\n----------\n\n- Idea: 南桥汽车站\n- Solution: 南桥汽车站\n- Code: 南桥汽车站\n- Data: 南桥汽车站", "locale": "zh-CN"}}}
{"pid": "P7501", "type": "P", "difficulty": 4, "samples": [["4 4 0\n1 1 1 1", "24"], ["4 4 1\n1 1 1 1", "24"], ["3 47 1\n4 8 9", "10940"], ["8 100000 1\n21 37 23 13 32 22 9 39", "405170260"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "「HMOI R1」50 块好兄弟", "background": "Polaris_Dane 非常菜，他不仅沉迷于计数，而且喜欢玩星际争霸 2。", "description": "「我的好兄弟无穷无尽，而你的虫子每时每刻都在消亡」\n\n作为新上任爱民如子的指挥官，Polaris_Dane 充分领悟了雷诺指挥官的智慧，决定将此战术贯彻到底。\n\n有 $N$ 个兵营，依次编号为 $1,2,3\\cdots N$。现在需要把它们排列在一条数轴中位于 $[1,M]$ 间的整点处。每一个兵营都有一个生产范围 $r_i$，若兵营放在点 $x\\ (1 \\le x \\le M)$ 处，那么它会在区间 $[x - r_i + 1, x + r_i - 1]$ 生产好兄弟。\n\n当 $\\rm type = 0$ 时，生产好兄弟的范围必须被区间 $[1,M]$ 完全包含；当 $\\rm type = 1$ 时，生产好兄弟的范围可以落在 $[1,M]$ 之外，但是兵营必须放在 $[1,M]$ 内。\n\nPolaris_Dane 不能让好兄弟们太挤了，所以任何两个兵营的生产范围 **都不能相交**，他想知道有多少种方案满足该条件。\n\n若两个方案中存在一个编号为 $i$ 的兵营，其在两个方案中的放置位置不同，则称这两个方案不同。\n\n由于答案可能很大，所以 Polaris_Dane 想请你输出答案对 $998244353$ 取模后的结果。", "inputFormat": "第一行三个整数 $N, M, \\mathrm{type}$，其中 $\\rm type \\in \\{0, 1\\}$。\n\n第二行 $N$ 个整数 $r_1, r_2, r_3, \\ldots, r_n$。", "outputFormat": "仅一行一个整数，为所求的答案对 $998244353$ 取模后的结果。", "hint": "样例解释：\n\n在样例 1 中，无论如何摆放兵营，生产范围都不会交叉，所以答案即为 $A_4^4 = 24$。\n\n在样例 2 中，虽然生产范围可以出界，但是兵营的可选位置还是只有 $4$ 种，答案仍是 $A_4^4 = 24$。\n\n--------\n\n对于所有数据：\n- $1 \\le N, M \\le 10^6$；\n- $1 \\le r_i \\le 1000$。\n\n-----------\n\n**本题采用捆绑测试。**\n\n| No. | Constraints                           | $\\rm type$ | Score |\n| ----------- | ------------------------------------- | ---------- | ----- |\n| $1$         | $N = 2;\\ M \\le 1000;\\ r_i = 1$          | $0$        | $10$  |\n| $2$         | $N = 2;\\ M \\le 10^6;\\ r_i = 1$          | $0$        | $10$  |\n| $3$         | $N \\le 40;\\ M \\le 10^6;\\ r_i = 1$ | $0$        | $10$  |\n| $4$         | No further constraints                | $0$        | $30$  |\n| $5$         | $N, r_i \\le 40$                 | $1$        | $20$  |\n| $6$         | No further constraints                | $1$        | $20$  |\n\n------\n\n- Idea: Polaris_Dane\n- Solution: Polaris_Dane\n- Code: Polaris_Dane\n- Data: Polaris_Dane", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HMOI R1」50 块好兄弟", "background": "Polaris_Dane 非常菜，他不仅沉迷于计数，而且喜欢玩星际争霸 2。", "description": "「我的好兄弟无穷无尽，而你的虫子每时每刻都在消亡」\n\n作为新上任爱民如子的指挥官，Polaris_Dane 充分领悟了雷诺指挥官的智慧，决定将此战术贯彻到底。\n\n有 $N$ 个兵营，依次编号为 $1,2,3\\cdots N$。现在需要把它们排列在一条数轴中位于 $[1,M]$ 间的整点处。每一个兵营都有一个生产范围 $r_i$，若兵营放在点 $x\\ (1 \\le x \\le M)$ 处，那么它会在区间 $[x - r_i + 1, x + r_i - 1]$ 生产好兄弟。\n\n当 $\\rm type = 0$ 时，生产好兄弟的范围必须被区间 $[1,M]$ 完全包含；当 $\\rm type = 1$ 时，生产好兄弟的范围可以落在 $[1,M]$ 之外，但是兵营必须放在 $[1,M]$ 内。\n\nPolaris_Dane 不能让好兄弟们太挤了，所以任何两个兵营的生产范围 **都不能相交**，他想知道有多少种方案满足该条件。\n\n若两个方案中存在一个编号为 $i$ 的兵营，其在两个方案中的放置位置不同，则称这两个方案不同。\n\n由于答案可能很大，所以 Polaris_Dane 想请你输出答案对 $998244353$ 取模后的结果。", "inputFormat": "第一行三个整数 $N, M, \\mathrm{type}$，其中 $\\rm type \\in \\{0, 1\\}$。\n\n第二行 $N$ 个整数 $r_1, r_2, r_3, \\ldots, r_n$。", "outputFormat": "仅一行一个整数，为所求的答案对 $998244353$ 取模后的结果。", "hint": "样例解释：\n\n在样例 1 中，无论如何摆放兵营，生产范围都不会交叉，所以答案即为 $A_4^4 = 24$。\n\n在样例 2 中，虽然生产范围可以出界，但是兵营的可选位置还是只有 $4$ 种，答案仍是 $A_4^4 = 24$。\n\n--------\n\n对于所有数据：\n- $1 \\le N, M \\le 10^6$；\n- $1 \\le r_i \\le 1000$。\n\n-----------\n\n**本题采用捆绑测试。**\n\n| No. | Constraints                           | $\\rm type$ | Score |\n| ----------- | ------------------------------------- | ---------- | ----- |\n| $1$         | $N = 2;\\ M \\le 1000;\\ r_i = 1$          | $0$        | $10$  |\n| $2$         | $N = 2;\\ M \\le 10^6;\\ r_i = 1$          | $0$        | $10$  |\n| $3$         | $N \\le 40;\\ M \\le 10^6;\\ r_i = 1$ | $0$        | $10$  |\n| $4$         | No further constraints                | $0$        | $30$  |\n| $5$         | $N, r_i \\le 40$                 | $1$        | $20$  |\n| $6$         | No further constraints                | $1$        | $20$  |\n\n------\n\n- Idea: Polaris_Dane\n- Solution: Polaris_Dane\n- Code: Polaris_Dane\n- Data: Polaris_Dane", "locale": "zh-CN"}}}
{"pid": "P7502", "type": "P", "difficulty": 5, "samples": [["6\n3 1 2\n1 3 2\n1 4 5\n3 6 2\n2 3 2\n3 6 2\n", "0\n1\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化", "字典树 Trie"], "title": "「HMOI R1」不知道是啥的垃圾题", "background": "由于这是崩坏 3 round，所以这里应该有一个关于崩坏三的背景。然而 fz 不玩崩坏 3，而且他实在是太屑了，所以这题就变成了一道裸题。", "description": "要求维护一个可重集，支持三种操作：\n1. 插入一个自然数对；\n1. 删除一个自然数对，保证这个数对之前在集合中；\n1. 给定一个自然数对 $(x,y)$，问集合中有多少个数对 $(a,b)$ 满足 $x\\operatorname{xor}a>y\\operatorname{xor}b$，其中 $\\operatorname{xor}$ 表示按位异或运算。\n\n本题中所有“数对”均指有序数对。", "inputFormat": "第一行一个自然数 $M$ 代表操作数。\n\n接下来 $M$ 行，每行一个操作，格式如下：\n- `1 x y` 表示插入自然数对 $(x,y)$；\n- `2 x y` 表示删除自然数对 $(x,y)$，保证此时 $(x,y)$ 在集合中至少出现了一次；\n- `3 x y` 表示查询自然数对 $(x,y)$。", "outputFormat": "共 $M$ 行，每个询问输出一行一个自然数，表示询问的答案。", "hint": "对于样例，第一次查询时集合里没有任何数对，所以答案为 $0$。\n\n第二次查询时，集合为 $\\{(3,2),(4,5)\\}$，$6\\operatorname{xor}3=5>0=2\\operatorname{xor}2$，$6\\operatorname{xor}4=2<7=2\\operatorname{xor}5$，故满足条件的数对只有 $(3,2)$ 一个，答案为 $1$。\n\n第三次询问时，集合为 $\\{(4,5)\\}$，没有满足条件的数对，答案为 $0$。\n\n------------\n对于所有数据：\n- $0 \\le M \\le 2 \\times 10^5$；\n- $0 \\le x, y \\le 10^{18}$。\n\n--------\n\n**本题采用捆绑测试。**\n\n| No.  | Constraints                 | Score |\n| ---- | --------------------------- | ----- |\n| $1$  | $M \\le 2000$ | $10$  |\n| $2$  | $x, y < 8$          | $20$  |\n| $3$  | $x, y \\le M$          | $30$  |\n| $4$  | No further constraints      | $40$  |\n\n-------\n\n- Idea: FZzzz\n- Solution: FZzzz\n- Code: FZzzz\n- Data: FZzzz", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HMOI R1」不知道是啥的垃圾题", "background": "由于这是崩坏 3 round，所以这里应该有一个关于崩坏三的背景。然而 fz 不玩崩坏 3，而且他实在是太屑了，所以这题就变成了一道裸题。", "description": "要求维护一个可重集，支持三种操作：\n1. 插入一个自然数对；\n1. 删除一个自然数对，保证这个数对之前在集合中；\n1. 给定一个自然数对 $(x,y)$，问集合中有多少个数对 $(a,b)$ 满足 $x\\operatorname{xor}a>y\\operatorname{xor}b$，其中 $\\operatorname{xor}$ 表示按位异或运算。\n\n本题中所有“数对”均指有序数对。", "inputFormat": "第一行一个自然数 $M$ 代表操作数。\n\n接下来 $M$ 行，每行一个操作，格式如下：\n- `1 x y` 表示插入自然数对 $(x,y)$；\n- `2 x y` 表示删除自然数对 $(x,y)$，保证此时 $(x,y)$ 在集合中至少出现了一次；\n- `3 x y` 表示查询自然数对 $(x,y)$。", "outputFormat": "共 $M$ 行，每个询问输出一行一个自然数，表示询问的答案。", "hint": "对于样例，第一次查询时集合里没有任何数对，所以答案为 $0$。\n\n第二次查询时，集合为 $\\{(3,2),(4,5)\\}$，$6\\operatorname{xor}3=5>0=2\\operatorname{xor}2$，$6\\operatorname{xor}4=2<7=2\\operatorname{xor}5$，故满足条件的数对只有 $(3,2)$ 一个，答案为 $1$。\n\n第三次询问时，集合为 $\\{(4,5)\\}$，没有满足条件的数对，答案为 $0$。\n\n------------\n对于所有数据：\n- $0 \\le M \\le 2 \\times 10^5$；\n- $0 \\le x, y \\le 10^{18}$。\n\n--------\n\n**本题采用捆绑测试。**\n\n| No.  | Constraints                 | Score |\n| ---- | --------------------------- | ----- |\n| $1$  | $M \\le 2000$ | $10$  |\n| $2$  | $x, y < 8$          | $20$  |\n| $3$  | $x, y \\le M$          | $30$  |\n| $4$  | No further constraints      | $40$  |\n\n-------\n\n- Idea: FZzzz\n- Solution: FZzzz\n- Code: FZzzz\n- Data: FZzzz", "locale": "zh-CN"}}}
{"pid": "P7503", "type": "P", "difficulty": 5, "samples": [["6\n1 1 4 5 1 4\n1 1\n4 5\n1 4\n1 5\n1 1\n4 4\n", "6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": [], "title": "「HMOI R1」文化课", "background": "有一群人在参加 CPS0202。由于作弊可以使得省队名额减一，所以他们准备作弊祸害他人，然后高考考全省第二。\n\n但是由于他们非常菜，高考考不到全省第二，所以他们需要你来指导他们作弊。\n\nfz 编不下去了，恳请 PD 帮他写个崩 3 的背景。", "description": "$n$ 个人正在会考。由于他们假装自己退役了，所以下午的 CPS0202 跟他们没啥关系。\n\n目前第 $i$ 个人有一个得分 $a_i$，想要及格需要拿到 $l_i$ 分。而为了不被老师怀疑，他的分数不能超过 $r_i$。\n\n你可以组织若干场作弊。这些作弊是同时进行的，所以不能有人同时参加两场或以上的作弊。每场作弊在连续的一段考生中进行，他们的分数都变为他们中分数最高的人的分数。\n\n求最多能使多少人及格且不被怀疑。", "inputFormat": "第一行一个整数 $n$，表示有 $n$ 个人。\n\n第二行 $n$ 个用空格隔开的整数，第 $i$ 个数 $a_i$ 代表第 $i$ 个人的初始得分。\n\n接下来 $n$ 行每行两个整数，第 $i$ 行的数为 $l_i$ 和 $r_i$，意义见题目描述。", "outputFormat": "一行一个整数，代表最多能使多少人及格且不被老师怀疑。", "hint": "在 $[2,3]$ 组织一场作弊，可以使所有人满足条件。\n\n本题采用捆绑测试。\n- Subtask 1（$5$ 分）：$n\\le5$；\n- Subtask 2（$5$ 分）：$n\\le100$；\n- Subtask 3（$10$ 分）：$n\\le8\\times10^3$；\n- Subtask 4（$30$ 分）：$l_i=r_i$；\n- Subtask 5（$20$ 分）：$a_i\\le a_{i+1}$；\n- Subtask 6（$30$ 分）：无特殊性质。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，$1\\le a_i\\le n$，$1\\le l_i\\le r_i\\le n$。\n\n-------\n\n- Idea: FZzzz\n- Solution: FZzzz\n- Code: FZzzz\n- Data: FZzzz", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HMOI R1」文化课", "background": "有一群人在参加 CPS0202。由于作弊可以使得省队名额减一，所以他们准备作弊祸害他人，然后高考考全省第二。\n\n但是由于他们非常菜，高考考不到全省第二，所以他们需要你来指导他们作弊。\n\nfz 编不下去了，恳请 PD 帮他写个崩 3 的背景。", "description": "$n$ 个人正在会考。由于他们假装自己退役了，所以下午的 CPS0202 跟他们没啥关系。\n\n目前第 $i$ 个人有一个得分 $a_i$，想要及格需要拿到 $l_i$ 分。而为了不被老师怀疑，他的分数不能超过 $r_i$。\n\n你可以组织若干场作弊。这些作弊是同时进行的，所以不能有人同时参加两场或以上的作弊。每场作弊在连续的一段考生中进行，他们的分数都变为他们中分数最高的人的分数。\n\n求最多能使多少人及格且不被怀疑。", "inputFormat": "第一行一个整数 $n$，表示有 $n$ 个人。\n\n第二行 $n$ 个用空格隔开的整数，第 $i$ 个数 $a_i$ 代表第 $i$ 个人的初始得分。\n\n接下来 $n$ 行每行两个整数，第 $i$ 行的数为 $l_i$ 和 $r_i$，意义见题目描述。", "outputFormat": "一行一个整数，代表最多能使多少人及格且不被老师怀疑。", "hint": "在 $[2,3]$ 组织一场作弊，可以使所有人满足条件。\n\n本题采用捆绑测试。\n- Subtask 1（$5$ 分）：$n\\le5$；\n- Subtask 2（$5$ 分）：$n\\le100$；\n- Subtask 3（$10$ 分）：$n\\le8\\times10^3$；\n- Subtask 4（$30$ 分）：$l_i=r_i$；\n- Subtask 5（$20$ 分）：$a_i\\le a_{i+1}$；\n- Subtask 6（$30$ 分）：无特殊性质。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，$1\\le a_i\\le n$，$1\\le l_i\\le r_i\\le n$。\n\n-------\n\n- Idea: FZzzz\n- Solution: FZzzz\n- Code: FZzzz\n- Data: FZzzz", "locale": "zh-CN"}}}
{"pid": "P7504", "type": "P", "difficulty": 6, "samples": [["2 2 2", "1"], ["4 2 2", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "「HMOI R1」可爱的德丽莎", "background": "Polaris_Dane 非常菜，他不仅沉迷于数论，而且喜欢玩崩坏 3。", "description": "可爱的德丽莎希望你能帮她求出\n\n$$\n\\sum_{x = 1}^n\\sum_{y = 1}^n\\sum_{i = 1}^x[x \\bot k_1][i \\bot x]\\cdot i\\cdot \\sum_{j = 1}^y[y \\bot k_2][j \\bot y]\\cdot j\n$$\n的结果。\n\n其中 $[x \\bot y] = \\begin{cases}1 & \\operatorname{gcd}(x,y)=1 \\\\ 0 & \\operatorname{gcd}(x,y)\\neq 1\\end{cases}$\n\n德丽莎这么可爱，你怎么能不答应她呢？\n\n由于答案可能很大，所以德丽莎只想知道它对 $998244353$ 取模后的结果。", "inputFormat": "共一行三个整数 $n, k_1, k_2$。", "outputFormat": "仅一行一个数，为所求的答案对 $998244353$ 取模后的结果。", "hint": "**本题测试点编号倒序排列。**\n\n对于所有数据：\n- $1 \\le n, k_1, k_2 \\le 2 \\times 10^9$。\n\n---------\n\n**本题采用捆绑测试。**\n\n| No. | Constraints                   | Score |\n| ----------- | ----------------------------- | ----- |\n| $1$         | $1\\le n,k_1,k_2\\le 100$         | $10$  |\n| $2$         | $1\\le n,k_1,k_2\\le 3000$ | $20$  |\n| $3$         | $1\\le n,k_1,k_2\\le 5\\times 10^5$ | $20$  |\n| $4$         | No further constraints        | $50$  |\n\n---------------\n\n- Idea: Polaris_Dane\n- Solution: Polaris_Dane\n- Code: Polaris_Dane\n- Data: Polaris_Dane", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HMOI R1」可爱的德丽莎", "background": "Polaris_Dane 非常菜，他不仅沉迷于数论，而且喜欢玩崩坏 3。", "description": "可爱的德丽莎希望你能帮她求出\n\n$$\n\\sum_{x = 1}^n\\sum_{y = 1}^n\\sum_{i = 1}^x[x \\bot k_1][i \\bot x]\\cdot i\\cdot \\sum_{j = 1}^y[y \\bot k_2][j \\bot y]\\cdot j\n$$\n的结果。\n\n其中 $[x \\bot y] = \\begin{cases}1 & \\operatorname{gcd}(x,y)=1 \\\\ 0 & \\operatorname{gcd}(x,y)\\neq 1\\end{cases}$\n\n德丽莎这么可爱，你怎么能不答应她呢？\n\n由于答案可能很大，所以德丽莎只想知道它对 $998244353$ 取模后的结果。", "inputFormat": "共一行三个整数 $n, k_1, k_2$。", "outputFormat": "仅一行一个数，为所求的答案对 $998244353$ 取模后的结果。", "hint": "**本题测试点编号倒序排列。**\n\n对于所有数据：\n- $1 \\le n, k_1, k_2 \\le 2 \\times 10^9$。\n\n---------\n\n**本题采用捆绑测试。**\n\n| No. | Constraints                   | Score |\n| ----------- | ----------------------------- | ----- |\n| $1$         | $1\\le n,k_1,k_2\\le 100$         | $10$  |\n| $2$         | $1\\le n,k_1,k_2\\le 3000$ | $20$  |\n| $3$         | $1\\le n,k_1,k_2\\le 5\\times 10^5$ | $20$  |\n| $4$         | No further constraints        | $50$  |\n\n---------------\n\n- Idea: Polaris_Dane\n- Solution: Polaris_Dane\n- Code: Polaris_Dane\n- Data: Polaris_Dane", "locale": "zh-CN"}}}
{"pid": "P7505", "type": "P", "difficulty": 2, "samples": [["3 4 3\n-1 1 2\n2 3\n3\n1 5\n3", "2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2021", "洛谷原创", "排序", "队列"], "title": "「Wdsr-2.5」小小的埴轮兵团", "background": "杖刀偶磨弓是埴轮兵团的首长。\n\n作为埴轮兵长，训练埴轮兵团是很平常的事情。", "description": "磨弓下达命令让埴轮们站成一行。不妨认为它们站在了一个数轴上，每个埴轮的位置就是它脚下数轴的数字。磨弓会告诉你，第 $i$ 个埴轮的位置为 $a_i$ 。**不保证** $\\bm {a_i}$ **升序**。\n\n数轴的长度是有限制的，具体的范围是 $[-k,k]$ 。也就是说，如果某个埴轮移出了这个范围，它就脱离了这个队列了，并且不会再次回到队列当中。\n\n为了训练埴轮，磨弓给埴轮们下达了 $m$ 个指令，有以下 3 种：\n\n- 指令 1：**全体埴轮**向数轴的正方向移动 $x$ 个单位长度。\n- 指令 2：**全体埴轮**往数轴的反方向移动 $x$ 个单位长度。\n- 指令 3：依次报数，统计目前队列里一共有多少个埴轮。\n\n但是磨弓发现，埴轮兵团的大小实在是太大了，以至于执行这些操作变得非常缓慢。尽管如此，磨弓仍然希望你告诉她所有指令 3 的结果。", "inputFormat": "第一行共有 $3$ 个整数 $n, m, k$，含义如题面所示。\n\n第二行共有 $n$ 个整数 $a_1, a_2, \\cdots, a_n$，表示每个埴轮的位置。\n\n接下来 $m$ 行，有 $1$ 或者 $2$ 个正整数，描述一条指令。首先是一个整数 $\\operatorname{op}$，表示这条指令的类型。如果 $1 \\leq \\operatorname{op} \\leq 2$，接下来还会输入一个整数 $x$。", "outputFormat": "对于每条指令 3 ，输出一个整数，表示目前还在队列中的埴轮的数目。", "hint": "#### 样例 1 说明\n\n一共有三个埴轮。初始时，它们的站位分别是 $[-1,1,2]$ 。\n\n- 第一次操作后，所有埴轮向左移动 $3$ 格，位置变成了  $[\\underline{\\bm{-4}},-2,-1]$ 。第一个埴轮被移出了数轴。\n- 第二次操作后，输出当前的埴轮数目，为 $2$ 个。\n- 第三次操作后，所有埴轮向右移动 $5$ 格，位置变成了 $[3,\\underline{\\bm4}]$ ，第二个埴轮被移出了数轴。\n- 第四次操作后，输出当前的埴轮数目，为 $1$ 个。\n\n#### 样例 2, 3\n\n见下发附件。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，$1 \\leq n, m \\leq 5\\times 10^3$；\n- 对于另外 $20\\%$ 的数据，$1\\le k\\le 500$；\n- 对于 $100\\%$ 的数据，$1 \\leq n, m \\leq 3\\times 10^5$，$1 \\leq k, x \\leq 2 \\times 10^9$，$-k \\le a_i \\le k$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-2.5」小小的埴轮兵团", "background": "杖刀偶磨弓是埴轮兵团的首长。\n\n作为埴轮兵长，训练埴轮兵团是很平常的事情。", "description": "磨弓下达命令让埴轮们站成一行。不妨认为它们站在了一个数轴上，每个埴轮的位置就是它脚下数轴的数字。磨弓会告诉你，第 $i$ 个埴轮的位置为 $a_i$ 。**不保证** $\\bm {a_i}$ **升序**。\n\n数轴的长度是有限制的，具体的范围是 $[-k,k]$ 。也就是说，如果某个埴轮移出了这个范围，它就脱离了这个队列了，并且不会再次回到队列当中。\n\n为了训练埴轮，磨弓给埴轮们下达了 $m$ 个指令，有以下 3 种：\n\n- 指令 1：**全体埴轮**向数轴的正方向移动 $x$ 个单位长度。\n- 指令 2：**全体埴轮**往数轴的反方向移动 $x$ 个单位长度。\n- 指令 3：依次报数，统计目前队列里一共有多少个埴轮。\n\n但是磨弓发现，埴轮兵团的大小实在是太大了，以至于执行这些操作变得非常缓慢。尽管如此，磨弓仍然希望你告诉她所有指令 3 的结果。", "inputFormat": "第一行共有 $3$ 个整数 $n, m, k$，含义如题面所示。\n\n第二行共有 $n$ 个整数 $a_1, a_2, \\cdots, a_n$，表示每个埴轮的位置。\n\n接下来 $m$ 行，有 $1$ 或者 $2$ 个正整数，描述一条指令。首先是一个整数 $\\operatorname{op}$，表示这条指令的类型。如果 $1 \\leq \\operatorname{op} \\leq 2$，接下来还会输入一个整数 $x$。", "outputFormat": "对于每条指令 3 ，输出一个整数，表示目前还在队列中的埴轮的数目。", "hint": "#### 样例 1 说明\n\n一共有三个埴轮。初始时，它们的站位分别是 $[-1,1,2]$ 。\n\n- 第一次操作后，所有埴轮向左移动 $3$ 格，位置变成了  $[\\underline{\\bm{-4}},-2,-1]$ 。第一个埴轮被移出了数轴。\n- 第二次操作后，输出当前的埴轮数目，为 $2$ 个。\n- 第三次操作后，所有埴轮向右移动 $5$ 格，位置变成了 $[3,\\underline{\\bm4}]$ ，第二个埴轮被移出了数轴。\n- 第四次操作后，输出当前的埴轮数目，为 $1$ 个。\n\n#### 样例 2, 3\n\n见下发附件。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，$1 \\leq n, m \\leq 5\\times 10^3$；\n- 对于另外 $20\\%$ 的数据，$1\\le k\\le 500$；\n- 对于 $100\\%$ 的数据，$1 \\leq n, m \\leq 3\\times 10^5$，$1 \\leq k, x \\leq 2 \\times 10^9$，$-k \\le a_i \\le k$ 。", "locale": "zh-CN"}}}
{"pid": "P7506", "type": "P", "difficulty": 6, "samples": [["2 1 10\nJoesSR B9 A99 PASS\nCirno C2 D2 A49\nE49 DOUBLE PASS A19 A49 A99 A99 A99 A99 A99  ", "Round 1:\nJoesSR used A99,now p=99.\nCirno used D2,now p=49.\nJoesSR used E49,now p=49.\nCirno used C2,now p=98.\nJoesSR used B9,now p=89.\nCirno used DOUBLE,now p=89.\nJoesSR used PASS,now p=89.\nCirno lost the game."], ["3 2 25\nCirno A9 A19 B1\nReimu TURN A9 C2\nMarisa DOUBLE D2 D2\nA9 B9 C2 PASS PASS A9 A1 A99 A99 A99 A99 A99 A99 A99 A99 A99 A99 A99 A99 A99 A99 A99 A99 A99 A99\n", "Round 1:\nCirno used A19,now p=19.\nReimu used C2,now p=38.\nMarisa used D2,now p=19.\nCirno used A9,now p=28.\nReimu used A9,now p=37.\nMarisa used C2,now p=74.\nCirno used A9,now p=83.\nReimu used B9,now p=74.\nMarisa used A9,now p=83.\nCirno used A1,now p=84.\nReimu used PASS,now p=84.\nMarisa used D2,now p=42.\nCirno used B1,now p=41.\nReimu used TURN,now p=41.\nCirno used PASS,now p=41.\nMarisa used DOUBLE,now p=41.\nReimu lost the game.\nRound 2:\nReimu used A99,now p=99.\nMarisa lost the game.\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2021", "洛谷原创"], "title": "「Wdsr-2.5」琪露诺的算数游戏", "background": "", "description": "#### 游戏概况\n\n《琪露诺的算数游戏》（诨名“⑨牌”），是一款轻松快乐的多玩家卡牌回合制游戏。\n\n**注意：这里的规则与市面上的⑨牌规则不尽相同**。由于⑨牌种类太多不大容易处理，所以这里的规则更类似于 $\\text{NEU}$ 游戏。\n\n游戏中有 $n$ 名玩家，围成一圈。一共会进行 $m$ 轮。每个玩家初始时有 $3$ 张手牌。游戏有一个 $k$ 张牌的牌堆。在本题中，你可以认为**不会出现牌堆抽完的情况**（真的）。此外，根据该题给出的规则，你不需要考虑选手手牌的顺序。\n\n为了简述游戏规则，你可以认为每一轮游戏中有一个整型变量（类似于 $\\text{int}$ 类型寄存器） $p$ 。玩家打出的牌本质上是对 $p$ 进行操作。\n\n**注**：请注意下文中“局”、“轮”、“回合”的关系。本题你只会进行一局游戏，每局有 $m$ 轮，每一轮会有若干回合，每一回合会有一名玩家出牌。\n\n每一轮开始时，$p$ 会被初始化为 $0$ ，然后从初始玩家开始，按照**顺时针顺序**（$1,2,3,\\cdots n-1,n,1,2,\\cdots$ ，逆时针同理），依次出牌。如果这是第一轮，那么初始玩家就是 $1$ 号玩家。当某个玩家出完某张牌后，如果此时 $p> 99$ ，视作该玩家成为该局的**失败者**；否则她就会**立刻从牌堆顶部取出一张牌**并进入到下一回合。失败者会丢失手上其余的两张牌，并从牌堆顶部依次摸三张牌放入自己的手牌中。同时，失败者会成为**下一轮初始玩家**。在一局游戏当中，牌堆里的牌只减不增。被使用的牌不会回到牌堆当中。\n\n下面介绍该魔改版游戏的牌型。\n\n#### 基本牌\n\n基本牌可以分为五类：加法牌、减法牌、乘法牌、除法牌、固定牌。\n\n- 加法牌，一共有 $7$ 种： $A_{1},A_{2},A_{5},A_{9},A_{19},A_{49},A_{99}$ 。其中， $A_x$ 的作用效果是，使 $p$ 加上牌面上的数字。即 $p\\gets p+x$ 。  \n- 减法牌，一共有 $3$ 种： $B_{1},B_{9},B_{19}$ 。作用效果与加法牌类似，只不过会使 $p$ 减去牌面上的数字。  \n- 乘法牌，一共只有 $1$ 种： $C_2$ 。它的作用效果是令 $p$ 乘上对应的数字，即 $p\\gets p\\times x$ 。  \n- 除法牌，同样只有 $1$ 种： $D_2$ 。会令 $p$ 除以对应的数字，**向下取整**。即 $p\\gets \\lfloor p\\div x\\rfloor$ 。  \n- 固定牌，一共有 $3$ 种： $E_{0},E_{49},E_{99}$ ，会将 $p$ 直接设置为牌面上的数字。\n\n#### 解牌\n\n解牌是可以使一名玩家跳过该回合，并附加一些特殊效果的一类牌。\n\n- $\\tt{PASS}$ ，跳过你，转到下一个玩家。\n- $\\tt{TURN}$ ，跳过你，出牌顺序反转（顺时针变为逆时针，逆时针变为顺时针。在下一轮游戏开始时会重置为顺时针）。\n- $\\tt{DOUBLE}$ ，跳过你，然后给下一名玩家施加 $\\verb!\"DOUBLE\"!$ 效果，也即要出两张牌（先打一摸一，再打一摸一，需要保持全程总数不超过 $99$ 才能保证不失败）。\n\n$\\tt{DOUBLE}$ 效果的一些说明：如果你被施加了 $\\tt{DOUBLE}$ 的效果，但是你第一张出了解牌（三种解牌都可以），那么你就会立即解除 $\\tt{DOUBLE}$ 效果，跳过这一回合，**并且将效果转移到下一名玩家**。 $\\tt{DOUBLE}$ 效果不能叠加。\n\n--- \n\n在输入文件中，卡牌名会形如 $\\colorbox{#f0f0f0}\\verb!A1 A99 D2 PASS DOUBLE!$ 等等。\n\n#### 策略\n\n这一部分将会讲述本题中所有玩家的运行逻辑。\n\n如果无论怎么出都会失败，那么玩家就会随便打出一张牌并成为失败者（显然，打出哪张牌不会对游戏结局产生实质上的影响）。否则会有两种情形：\n\n1. 如果此时没有被施加 $\\tt{DOUBLE}$ 效果：\n   - 每名玩家会优先考虑普通牌，并且选择在不成为失败者的前提下使 $p$ 变得**尽可能大**的那种方案（如果有多种方案可以使得 $p$ 最大，那就会按照**乘法牌、加法牌、减法牌、除法牌、固定牌**的顺序优先选择。显然，同一类普通牌中的不同种类的牌不会使 $p$ 产生相同的值）。\n   - 如果没有普通牌，或者出牌后会成为失败者，那么就考虑使用解牌。玩家会依次考虑手头是否有 $\\tt{PASS,TURN,DOUBLE}$ 牌。如果有，就打出这张牌。\n2. 如果被施加了 $\\tt{DOUBLE}$ 效果：\n   - 优先考虑使用解牌。依次考虑$\\tt{PASS,TURN,DOUBLE}$ 。如果有，就打出这张牌。\n   - 否则，选择在不成为失败者的前提下使 $p$ 变得**尽可能小**的那种方案（如果有多种方案可以使得 $p$ 最小，那就会按照**除法牌、减法牌、加法牌、乘法牌、固定牌**的顺序优先选择）。此时玩家会被解除 $\\tt{DOUBLE}$ 状态，于是她会按照情形 $1$ 来决策。", "inputFormat": "第一行三个正整数 $n,m,k$ ，含义如题面所示。\n\n接下来 $n$ 行，每行四个字符串 $name,card_1,card_2,card_3$ ，表示这名玩家的名称以及她的三张手牌。玩家名称仅由大小写英文字母组成，不包含空格，长度不超过 $20$ 。\n\n接下来一行， $k$ 个字符串，按照从上至下的顺序描述牌堆里的牌。\n\n详情可以参考输入样例。", "outputFormat": "当新的一轮开始时，你需要输出： $\\colorbox{f0f0f0}\\verb!Round XXX:!$ （其中，$\\verb!XXX!$ 表示这是第多少轮）。\n\n每名玩家出牌时，如果她不是失败者，你需要输出： $\\colorbox{f0f0f0}\\verb!XXX used YYY,now p=ZZZ.!$ （其中，$\\verb!XXX!$ 是玩家名； $\\verb!YYY!$ 是卡牌名； $\\verb!ZZZ!$ 是当前 $p$ 的值）。\n\n否则，当一名玩家成为失败者时，该轮结束。你要输出：$\\colorbox{f0f0f0}\\verb!XXX lost the game.!$ （其中，$\\verb!XXX!$ 是玩家名）。\n\n详情可以参考输出样例。", "hint": "#### 样例 1 说明\n\n牌的使用情况都在输出样例中。这里仅说明每出一张牌后每名玩家当前手牌的情况。具体为什么要使用某张牌，可以参考题目描述。\n\n$$\n\\def\\c#1{\\texttt{#1}}\n\\def\\arraystretch{1.5}\n\\begin{matrix}\n\\begin{gathered}\n\\textbf{\\textsf{初始}}\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{B9} & \\c{A99} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{C2} & \\c{D2} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\textbf{\\textsf{第一回合}}\\quad (p: 0\\to 99)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{B9} & \\c{E49} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{C2} & \\c{D2} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\textbf{\\textsf{第二回合}}\\quad (p:99\\to 49)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{B9} & \\c{E49} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{C2} & \\c{DOUBLE} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\textbf{\\textsf{第三回合}}\\quad (p:49\\to 49)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{B9} & \\c{PASS} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{C2} & \\c{DOUBLE} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\end{gathered}\n&\n\\begin{gathered}\n\\textbf{\\textsf{第四回合}}\\quad (p:49\\to 98)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{B9} & \\c{PASS} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{A19} & \\c{DOUBLE} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\textbf{\\textsf{第五回合}}\\quad (p:98\\to 89)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{A49} & \\c{PASS} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{A19} & \\c{DOUBLE} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\textbf{\\textsf{第六回合}}\\quad (p:89\\to 89)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{A49} & \\c{PASS} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{A19} & \\c{A99} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\textbf{\\textsf{第七回合}}\\quad (p:89\\to 89)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{A49} & \\c{A99} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{A19} & \\c{A99} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\end{gathered}\n\\end{matrix}\n$$\n\n**注**：初始回合以及第 $2,4,6$ 回合都是 $\\text{JoesSR}$ 出牌；第 $1,3,5,7$ 回合都是琪露诺出牌。值得注意的是，尽管第 $5$ 回合琪露诺使用了 $\\tt{DOUBLE}$ ，但因为下一回合被 $\\tt{PASS}$ 了，所以第 $7$ 回合仍然是琪露诺出牌。\n\n此时琪露诺无论如何都会失败，于是琪露诺成为了失败者。\n\n#### 样例 3\n\n见下发附件。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，仅包含普通牌，并且 $n\\le 3$ 。\n- 对于另外 $15\\%$ 的数据，不包含 $\\tt{TURN}$ 牌和 $\\tt{PASS}$ 牌。\n- 对于另外 $15\\%$ 的数据，不包含 $\\tt{DOUBLE}$ 牌。\n- 对于 $100\\%$ 的数据， 满足 $1\\le n\\le 30;1\\le m\\le 100;1\\le k\\le 3\\times 10^5$ 。保证任何时候 $|p|<10^4$ 。\n\n#### 参考资料\n\n[【东方桌游考古】NEU，“⑨牌”，与十年前的同人](https://www.bilibili.com/read/cv9951620)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-2.5」琪露诺的算数游戏", "background": "", "description": "#### 游戏概况\n\n《琪露诺的算数游戏》（诨名“⑨牌”），是一款轻松快乐的多玩家卡牌回合制游戏。\n\n**注意：这里的规则与市面上的⑨牌规则不尽相同**。由于⑨牌种类太多不大容易处理，所以这里的规则更类似于 $\\text{NEU}$ 游戏。\n\n游戏中有 $n$ 名玩家，围成一圈。一共会进行 $m$ 轮。每个玩家初始时有 $3$ 张手牌。游戏有一个 $k$ 张牌的牌堆。在本题中，你可以认为**不会出现牌堆抽完的情况**（真的）。此外，根据该题给出的规则，你不需要考虑选手手牌的顺序。\n\n为了简述游戏规则，你可以认为每一轮游戏中有一个整型变量（类似于 $\\text{int}$ 类型寄存器） $p$ 。玩家打出的牌本质上是对 $p$ 进行操作。\n\n**注**：请注意下文中“局”、“轮”、“回合”的关系。本题你只会进行一局游戏，每局有 $m$ 轮，每一轮会有若干回合，每一回合会有一名玩家出牌。\n\n每一轮开始时，$p$ 会被初始化为 $0$ ，然后从初始玩家开始，按照**顺时针顺序**（$1,2,3,\\cdots n-1,n,1,2,\\cdots$ ，逆时针同理），依次出牌。如果这是第一轮，那么初始玩家就是 $1$ 号玩家。当某个玩家出完某张牌后，如果此时 $p> 99$ ，视作该玩家成为该局的**失败者**；否则她就会**立刻从牌堆顶部取出一张牌**并进入到下一回合。失败者会丢失手上其余的两张牌，并从牌堆顶部依次摸三张牌放入自己的手牌中。同时，失败者会成为**下一轮初始玩家**。在一局游戏当中，牌堆里的牌只减不增。被使用的牌不会回到牌堆当中。\n\n下面介绍该魔改版游戏的牌型。\n\n#### 基本牌\n\n基本牌可以分为五类：加法牌、减法牌、乘法牌、除法牌、固定牌。\n\n- 加法牌，一共有 $7$ 种： $A_{1},A_{2},A_{5},A_{9},A_{19},A_{49},A_{99}$ 。其中， $A_x$ 的作用效果是，使 $p$ 加上牌面上的数字。即 $p\\gets p+x$ 。  \n- 减法牌，一共有 $3$ 种： $B_{1},B_{9},B_{19}$ 。作用效果与加法牌类似，只不过会使 $p$ 减去牌面上的数字。  \n- 乘法牌，一共只有 $1$ 种： $C_2$ 。它的作用效果是令 $p$ 乘上对应的数字，即 $p\\gets p\\times x$ 。  \n- 除法牌，同样只有 $1$ 种： $D_2$ 。会令 $p$ 除以对应的数字，**向下取整**。即 $p\\gets \\lfloor p\\div x\\rfloor$ 。  \n- 固定牌，一共有 $3$ 种： $E_{0},E_{49},E_{99}$ ，会将 $p$ 直接设置为牌面上的数字。\n\n#### 解牌\n\n解牌是可以使一名玩家跳过该回合，并附加一些特殊效果的一类牌。\n\n- $\\tt{PASS}$ ，跳过你，转到下一个玩家。\n- $\\tt{TURN}$ ，跳过你，出牌顺序反转（顺时针变为逆时针，逆时针变为顺时针。在下一轮游戏开始时会重置为顺时针）。\n- $\\tt{DOUBLE}$ ，跳过你，然后给下一名玩家施加 $\\verb!\"DOUBLE\"!$ 效果，也即要出两张牌（先打一摸一，再打一摸一，需要保持全程总数不超过 $99$ 才能保证不失败）。\n\n$\\tt{DOUBLE}$ 效果的一些说明：如果你被施加了 $\\tt{DOUBLE}$ 的效果，但是你第一张出了解牌（三种解牌都可以），那么你就会立即解除 $\\tt{DOUBLE}$ 效果，跳过这一回合，**并且将效果转移到下一名玩家**。 $\\tt{DOUBLE}$ 效果不能叠加。\n\n--- \n\n在输入文件中，卡牌名会形如 $\\colorbox{#f0f0f0}\\verb!A1 A99 D2 PASS DOUBLE!$ 等等。\n\n#### 策略\n\n这一部分将会讲述本题中所有玩家的运行逻辑。\n\n如果无论怎么出都会失败，那么玩家就会随便打出一张牌并成为失败者（显然，打出哪张牌不会对游戏结局产生实质上的影响）。否则会有两种情形：\n\n1. 如果此时没有被施加 $\\tt{DOUBLE}$ 效果：\n   - 每名玩家会优先考虑普通牌，并且选择在不成为失败者的前提下使 $p$ 变得**尽可能大**的那种方案（如果有多种方案可以使得 $p$ 最大，那就会按照**乘法牌、加法牌、减法牌、除法牌、固定牌**的顺序优先选择。显然，同一类普通牌中的不同种类的牌不会使 $p$ 产生相同的值）。\n   - 如果没有普通牌，或者出牌后会成为失败者，那么就考虑使用解牌。玩家会依次考虑手头是否有 $\\tt{PASS,TURN,DOUBLE}$ 牌。如果有，就打出这张牌。\n2. 如果被施加了 $\\tt{DOUBLE}$ 效果：\n   - 优先考虑使用解牌。依次考虑$\\tt{PASS,TURN,DOUBLE}$ 。如果有，就打出这张牌。\n   - 否则，选择在不成为失败者的前提下使 $p$ 变得**尽可能小**的那种方案（如果有多种方案可以使得 $p$ 最小，那就会按照**除法牌、减法牌、加法牌、乘法牌、固定牌**的顺序优先选择）。此时玩家会被解除 $\\tt{DOUBLE}$ 状态，于是她会按照情形 $1$ 来决策。", "inputFormat": "第一行三个正整数 $n,m,k$ ，含义如题面所示。\n\n接下来 $n$ 行，每行四个字符串 $name,card_1,card_2,card_3$ ，表示这名玩家的名称以及她的三张手牌。玩家名称仅由大小写英文字母组成，不包含空格，长度不超过 $20$ 。\n\n接下来一行， $k$ 个字符串，按照从上至下的顺序描述牌堆里的牌。\n\n详情可以参考输入样例。", "outputFormat": "当新的一轮开始时，你需要输出： $\\colorbox{f0f0f0}\\verb!Round XXX:!$ （其中，$\\verb!XXX!$ 表示这是第多少轮）。\n\n每名玩家出牌时，如果她不是失败者，你需要输出： $\\colorbox{f0f0f0}\\verb!XXX used YYY,now p=ZZZ.!$ （其中，$\\verb!XXX!$ 是玩家名； $\\verb!YYY!$ 是卡牌名； $\\verb!ZZZ!$ 是当前 $p$ 的值）。\n\n否则，当一名玩家成为失败者时，该轮结束。你要输出：$\\colorbox{f0f0f0}\\verb!XXX lost the game.!$ （其中，$\\verb!XXX!$ 是玩家名）。\n\n详情可以参考输出样例。", "hint": "#### 样例 1 说明\n\n牌的使用情况都在输出样例中。这里仅说明每出一张牌后每名玩家当前手牌的情况。具体为什么要使用某张牌，可以参考题目描述。\n\n$$\n\\def\\c#1{\\texttt{#1}}\n\\def\\arraystretch{1.5}\n\\begin{matrix}\n\\begin{gathered}\n\\textbf{\\textsf{初始}}\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{B9} & \\c{A99} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{C2} & \\c{D2} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\textbf{\\textsf{第一回合}}\\quad (p: 0\\to 99)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{B9} & \\c{E49} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{C2} & \\c{D2} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\textbf{\\textsf{第二回合}}\\quad (p:99\\to 49)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{B9} & \\c{E49} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{C2} & \\c{DOUBLE} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\textbf{\\textsf{第三回合}}\\quad (p:49\\to 49)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{B9} & \\c{PASS} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{C2} & \\c{DOUBLE} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\end{gathered}\n&\n\\begin{gathered}\n\\textbf{\\textsf{第四回合}}\\quad (p:49\\to 98)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{B9} & \\c{PASS} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{A19} & \\c{DOUBLE} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\textbf{\\textsf{第五回合}}\\quad (p:98\\to 89)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{A49} & \\c{PASS} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{A19} & \\c{DOUBLE} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\textbf{\\textsf{第六回合}}\\quad (p:89\\to 89)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{A49} & \\c{PASS} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{A19} & \\c{A99} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\textbf{\\textsf{第七回合}}\\quad (p:89\\to 89)\\cr\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{玩家名} & \\textbf{手牌 1} & \\textbf{手牌 2}  & \\textbf{手牌 3} \\cr\\hline\n\\text{JoesSR} & \\c{A49} & \\c{A99} & \\c{PASS} \\cr\\hline\n\\text{Cirno} & \\c{A19} & \\c{A99} & \\c{A49} \\cr\\hline\n\\end{array}\\cr\n\\end{gathered}\n\\end{matrix}\n$$\n\n**注**：初始回合以及第 $2,4,6$ 回合都是 $\\text{JoesSR}$ 出牌；第 $1,3,5,7$ 回合都是琪露诺出牌。值得注意的是，尽管第 $5$ 回合琪露诺使用了 $\\tt{DOUBLE}$ ，但因为下一回合被 $\\tt{PASS}$ 了，所以第 $7$ 回合仍然是琪露诺出牌。\n\n此时琪露诺无论如何都会失败，于是琪露诺成为了失败者。\n\n#### 样例 3\n\n见下发附件。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，仅包含普通牌，并且 $n\\le 3$ 。\n- 对于另外 $15\\%$ 的数据，不包含 $\\tt{TURN}$ 牌和 $\\tt{PASS}$ 牌。\n- 对于另外 $15\\%$ 的数据，不包含 $\\tt{DOUBLE}$ 牌。\n- 对于 $100\\%$ 的数据， 满足 $1\\le n\\le 30;1\\le m\\le 100;1\\le k\\le 3\\times 10^5$ 。保证任何时候 $|p|<10^4$ 。\n\n#### 参考资料\n\n[【东方桌游考古】NEU，“⑨牌”，与十年前的同人](https://www.bilibili.com/read/cv9951620)", "locale": "zh-CN"}}}
{"pid": "P7507", "type": "P", "difficulty": 6, "samples": [["6 10\n3 0 4 5 1000 7\n1004 1005 1004 1004 5 997\n1006 1004 1000 999 5 999\n1017 1021 1023 1023 20 1019\n1012 1009 1009 1009 24 1018\n1007 1004 1004 1004 5 997\n", "1005\n1005\n1020\n1008\n1005\n1005\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2021", "洛谷原创", "O2优化", "背包 DP", "分块"], "title": "「Wdsr-2.5」未来水妖集市", "background": "每年，河城荷取（河童）都要为未来水妖集市准备展品，以及用于销售的商品。于是河童会生产大批量的产品。\n\n为了提高生产效率，河童决定搭建一条生产线。具体而言，河童会利用她的机械臂，构建出一长串的机器。每个机器只会对原材料进行若干次加工，最终输出成品。\n\n由于河童需要调试设备，于是机械臂每次操作后，河童会用一些询问确定这条生产线目前的性能如何。为了顺利完成生产任务，河童找到了你，希望你写一个程序告诉她每次操作后生产线的性能。", "description": "初始时原材料会有一个初始权值 。然后它会经过若干个机器的加工，花费若干点**加工指数**，得到最终产品。\n\n河童的机器有两种：\n\n- 0 型：每次加工花费 $v_i$ 的加工指数，让材料的附加值增加 $w_i$ 。材料经过时**最多只能加工一次**。\n- 1 型：每次加工花费 $v_i$ 的加工指数，让材料的附加值增加 $w_i$ 。材料经过时**加工次数无限制**。\n\n现在河童会利用一个机械臂来设计这套工艺流程。初始时，流水线上没有一台机器，机械臂放在位置 $0$。机器的位置编号是从 $1$ 开始的。现在河童会告诉你加工指数的最大值 $v$ ，然后她会下达 $q$ 个命令。不妨设每个指令执行前，机械臂的位置在 $p$ 。\n\n每个指令的格式为 $\\colorbox{#f0f0f0}\\verb!opt ti vi wi xi yi!$ ，其中 $opt$ 表示操作的种类。共有如下几种：\n\n1. **右移**：将机械臂向右移动一格，即 $p\\gets p+1$。\n2. **左移**：将机械臂向左移动一格，即 $p\\gets p-1$。\n3. **插入机器**：在机械臂当前位置插入一个机器，它的类型为 $t_i$ ，每次消耗的加工指数为 $v_i$ ，材料的附加值会增加 $w_i$ ，插入的机器的位置为 $p+1$ 。机械臂位置不变，但是被插入的机器右侧的机器都会向右移动一格。\n4. **删除机器**：在机械臂当前位置移除一个机器，移除的机器位置为 $p+1$ 。移除机器后机械臂位置不变，但是被移除的机器右侧的机器都会向左移动一格。\n5. **修改机器**：在机械臂当前位置修改一个机器的参数。即修改的机器的位置为 $p+1$ 。\n\n对于操作 1, 2, 4，请忽略参数 $\\colorbox{#f0f0f0}\\verb!ti vi wi!$ 。\n\n每次操作完，河童会询问你，如果一个初始权值为 $x_i$ 的物品从左侧起第一个机器进去，直到从右边机器出来，依次加工，消耗最多 $y_i$ 点加工点数（ $y_i\\le v$ ），这个物品可以获得的最大权值。特别地，如果此时没有一台机器，此物品权值不变。\n\n假设某一时刻共有 $u$ 台机器，那么数据保证在此时刻机械臂的位置必然在 $[0,u]$ 内。", "inputFormat": "第一行两个正整数 $q,v$ ，含义如题面所述。\n\n接下来 $q$ 行，每行 $6$ 个正整数 $opt',t_i',v_i',w_i',x_i',y_i'$ 。你需要**将它们分别异或上** $\\boldsymbol{last}$ 来获得真实的 $opt,t_i,v_i,w_i,x_i,y_i$ 。其中 $last$ 为上次输出的结果。特别地，初始时 $last=0$ 。", "outputFormat": "输出共 $q$ 行，每行一个正整数，表示每次询问的答案。", "hint": "#### 样例 1 说明\n\n解码后的输入数据：\n\n```plain\n6 10\n3 0 4 5 1000 7\n1 0 1 1 1000 8\n3 1 5 10 1000 10\n5 1 3 3 1000 7\n4 1 1 1 1000 10\n2 1 1 1 1000 8\n```\n\n#### 样例 2, 3\n\n见下发附件。\n\n#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，满足 $q,v\\le 10$ 。\n- 对于另外 $20\\%$ 的数据，满足 $v\\le 100$ 。\n- 对于另外 $20\\%$ 的数据，满足 $q,v\\le 2\\times 10^3$ 。\n- 对于 $100\\%$ 的数据， 满足 $1\\le q\\le 3\\times 10^4;1\\le v\\le 2\\times 10^4;1\\le x_i,y_i,w_i\\le 4\\times 10^4$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-2.5」未来水妖集市", "background": "每年，河城荷取（河童）都要为未来水妖集市准备展品，以及用于销售的商品。于是河童会生产大批量的产品。\n\n为了提高生产效率，河童决定搭建一条生产线。具体而言，河童会利用她的机械臂，构建出一长串的机器。每个机器只会对原材料进行若干次加工，最终输出成品。\n\n由于河童需要调试设备，于是机械臂每次操作后，河童会用一些询问确定这条生产线目前的性能如何。为了顺利完成生产任务，河童找到了你，希望你写一个程序告诉她每次操作后生产线的性能。", "description": "初始时原材料会有一个初始权值 。然后它会经过若干个机器的加工，花费若干点**加工指数**，得到最终产品。\n\n河童的机器有两种：\n\n- 0 型：每次加工花费 $v_i$ 的加工指数，让材料的附加值增加 $w_i$ 。材料经过时**最多只能加工一次**。\n- 1 型：每次加工花费 $v_i$ 的加工指数，让材料的附加值增加 $w_i$ 。材料经过时**加工次数无限制**。\n\n现在河童会利用一个机械臂来设计这套工艺流程。初始时，流水线上没有一台机器，机械臂放在位置 $0$。机器的位置编号是从 $1$ 开始的。现在河童会告诉你加工指数的最大值 $v$ ，然后她会下达 $q$ 个命令。不妨设每个指令执行前，机械臂的位置在 $p$ 。\n\n每个指令的格式为 $\\colorbox{#f0f0f0}\\verb!opt ti vi wi xi yi!$ ，其中 $opt$ 表示操作的种类。共有如下几种：\n\n1. **右移**：将机械臂向右移动一格，即 $p\\gets p+1$。\n2. **左移**：将机械臂向左移动一格，即 $p\\gets p-1$。\n3. **插入机器**：在机械臂当前位置插入一个机器，它的类型为 $t_i$ ，每次消耗的加工指数为 $v_i$ ，材料的附加值会增加 $w_i$ ，插入的机器的位置为 $p+1$ 。机械臂位置不变，但是被插入的机器右侧的机器都会向右移动一格。\n4. **删除机器**：在机械臂当前位置移除一个机器，移除的机器位置为 $p+1$ 。移除机器后机械臂位置不变，但是被移除的机器右侧的机器都会向左移动一格。\n5. **修改机器**：在机械臂当前位置修改一个机器的参数。即修改的机器的位置为 $p+1$ 。\n\n对于操作 1, 2, 4，请忽略参数 $\\colorbox{#f0f0f0}\\verb!ti vi wi!$ 。\n\n每次操作完，河童会询问你，如果一个初始权值为 $x_i$ 的物品从左侧起第一个机器进去，直到从右边机器出来，依次加工，消耗最多 $y_i$ 点加工点数（ $y_i\\le v$ ），这个物品可以获得的最大权值。特别地，如果此时没有一台机器，此物品权值不变。\n\n假设某一时刻共有 $u$ 台机器，那么数据保证在此时刻机械臂的位置必然在 $[0,u]$ 内。", "inputFormat": "第一行两个正整数 $q,v$ ，含义如题面所述。\n\n接下来 $q$ 行，每行 $6$ 个正整数 $opt',t_i',v_i',w_i',x_i',y_i'$ 。你需要**将它们分别异或上** $\\boldsymbol{last}$ 来获得真实的 $opt,t_i,v_i,w_i,x_i,y_i$ 。其中 $last$ 为上次输出的结果。特别地，初始时 $last=0$ 。", "outputFormat": "输出共 $q$ 行，每行一个正整数，表示每次询问的答案。", "hint": "#### 样例 1 说明\n\n解码后的输入数据：\n\n```plain\n6 10\n3 0 4 5 1000 7\n1 0 1 1 1000 8\n3 1 5 10 1000 10\n5 1 3 3 1000 7\n4 1 1 1 1000 10\n2 1 1 1 1000 8\n```\n\n#### 样例 2, 3\n\n见下发附件。\n\n#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，满足 $q,v\\le 10$ 。\n- 对于另外 $20\\%$ 的数据，满足 $v\\le 100$ 。\n- 对于另外 $20\\%$ 的数据，满足 $q,v\\le 2\\times 10^3$ 。\n- 对于 $100\\%$ 的数据， 满足 $1\\le q\\le 3\\times 10^4;1\\le v\\le 2\\times 10^4;1\\le x_i,y_i,w_i\\le 4\\times 10^4$ 。", "locale": "zh-CN"}}}
{"pid": "P7508", "type": "P", "difficulty": 5, "samples": [["7 7 4 1\n2 1\n3 1\n4 2\n5 2\n6 1\n7 6\n3 2\n7 1 2 3\n", "3\n3\n3\n4\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "2021", "洛谷原创", "O2优化", "图遍历"], "title": "「Wdsr-2.5」第二次月面战争", "background": "若干年之前，八云紫策划了第二次月面战争。\n\n作为神社的巫女，灵梦自然有保护人间之里人类的职责。为了能够使得人类免受月面战争可能造成的影响，灵梦决定在博丽神社设立一个结界。\n\n由于结界的影响范围有限，只能覆盖到博丽神社，于是灵梦决定将人间之里的所有居民迁入到神社中去。然而由于居民数目较多，灵梦在组织上出现了一些困难。这时，她找到了外界的你，希望你帮助她解决这个问题。", "description": "人间之里可以看做一张 $n$ 个点 $m$ 条边的有向图，而博丽神社在点 $t$ 。然而由于时间差的原因，灵梦不能一次性获取所有居民的位置，于是她会依次受到 $k$ 条消息，每条信息包含一个节点 $x$。\n\n- 如果 $x$ 号节点本来没有居民，那么灵梦得知了有一个居民在 $x$ 号节点。\n- 如果 $x$ 号节点本来有居民，那么由于某些原因， $x$ 号节点现在没有居民了。\n\n由于某些原因，在 $t$ 号节点也有可能存在居民。\n\n每当得知一条新的消息后，灵梦都需要快速计算出居民的最快疏散时间，以便于合理安排（此时，你可以认为其他节点上没有居民）。同时为了避免拥挤，以及其他难以预料的困难，灵梦做出了如下规则：\n\n- 每一时刻，每个居民只能沿着一条有向边走一步，或者**停留在原地**。\n- 每一时刻，每个节点上，**最多只能有一位居民**。\n- 当居民到达了博丽神社，那么**下一时刻**他就可以进入结界以获得庇护。你可以认为，在居民进入结界后他的行程就结束了。\n\n最快疏散时间，指的是**所有居民**全部进入结界的最短用时。", "inputFormat": "第一行四个正整数 $n,m,k,t$ ，含义如题所示。\n\n接下来 $m$ 行，每行两个正整数 $u,v$ ，描述一条 $u\\to v$ 的有向边。可能出现自环或者重边，请选手自行忽略。\n\n接下来一行，共 $k$ 个整数 $x_i$ ，表示在第 $i$ 条消息中 $x_i$ 号节点是否有居民的情况发生了变化。", "outputFormat": "输出共 $k$ 行，每行表示在按照前 $i$ 条消息，疏散所有居民所用的最小疏散时间。", "hint": "#### 样例 1 说明\n\n![main1.png](https://i.loli.net/2021/03/26/bWyznVgRc1pqPaf.png)\n\n这张图描述了**初始状态**、**第一次操作**、**第二次操作**的情况。可以发现；\n\n- 第一次操作后， $7$ 号节点最快通过 $7\\to 6\\to 1$ 到达神社，再花费 $1$ 单位时间进入神社，总共用时 $3$ 单位时间。\n- 第二次操作后， $1$ 号节点花费 $1$ 时刻进入神社， $7$ 号节点仍然按照 $7\\to 6\\to 1$ 到达神社，并花费 $1$ 单位时间进入神社即可。总共花费 $3$ 单位时间。\n\n![main2.png](https://i.loli.net/2021/03/26/sr3kbOWh7PxBway.png)\n\n这张图描述了第三次操作后的情况。\n\n第一时刻， $1$ 进入神社， $2\\to 1,7\\to 6$ ；第二时刻， $1$ 进入神社， $6\\to 1$ ；第三时刻所有人都进入了神社，于是总共花费 $3$ 单位时间。\n\n![main3.png](https://i.loli.net/2021/03/26/IWt7zKPohpFBmfV.png)\n\n这张图描述了第四次操作后的情况。\n\n第一时刻， $1$ 进入神社， $3\\to 1,7\\to 6$ ， $2$ 不动；第二时刻， $1$ 进入神社， $2\\to 1$ ， $6$ 不动。接下来花费 $2$ 时刻全部进入神社，于是总共花费 $4$ 单位时间。\n\n#### 样例 2,3\n\n见下发附件。\n\n#### 数据范围及约定\n\n$$\n\\def\\bd{\\boldsymbol}\n\\def\\a{\\texttt{A}}\t% 链的性质\n\\def\\b{\\texttt{B}}\t% 菊花图的性质\n\\def\\p{\\texttt{P}}\t% k为正的性质\n\\def\\n{\\text{无特殊限制}}\n\\def\\l{\\hline}\n\\def\\arraystretch{1.5}\\begin{array}{|c|c|c|c|c|}\\l\n\\textbf{数据点} & \\bd{n} & \\bd{m} & \\bd{k} & \\textbf{特殊性质} \\cr\\l\n1\\sim4 & n\\le 8 & m\\le 10 & k\\le 10 & - \\cr\\l\n5,6 & \\n & m=n-1 & \\n & \\p,\\a \\cr\\l\n7,8 & \\n & m=n-1 & \\n & \\p,\\b \\cr\\l\n9 & n\\le 10^5 & m=n-1 & k\\le 10^5 & \\p \\cr\\l\n10\\sim 12 & n\\le 10^3 & m\\le 10^3 & k\\le 10^3 & - \\cr\\l\n13,14 & n\\le 10^5 & m\\le 10^5 & k\\le 10^5 & \\p \\cr\\l\n15\\sim 17 & n\\le 10^5 & m\\le 10^5 & k\\le 10^5 & - \\cr\\l\n18\\sim 20 & \\n & \\n & \\n & - \\cr\\l\n\\end{array}\n$$\n\n- 特殊性质 $\\texttt{P}:$ 保证只存在出现居民的操作。\n- 特殊性质 $\\texttt{A}:$ 保证整张图是一条链，但不保证 $t$ 是链的一端。\n- 特殊性质 $\\texttt{B}:$ 保证除了 $t$ 以外的所有节点，都指向 $t$ 。\n\n\n对于所有数据，满足 $1\\le n\\le 10^6; 1\\le m\\le 1.05\\times 10^6;1\\le k\\le 10^6$ 。保证所有节点可以到达 $t$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-2.5」第二次月面战争", "background": "若干年之前，八云紫策划了第二次月面战争。\n\n作为神社的巫女，灵梦自然有保护人间之里人类的职责。为了能够使得人类免受月面战争可能造成的影响，灵梦决定在博丽神社设立一个结界。\n\n由于结界的影响范围有限，只能覆盖到博丽神社，于是灵梦决定将人间之里的所有居民迁入到神社中去。然而由于居民数目较多，灵梦在组织上出现了一些困难。这时，她找到了外界的你，希望你帮助她解决这个问题。", "description": "人间之里可以看做一张 $n$ 个点 $m$ 条边的有向图，而博丽神社在点 $t$ 。然而由于时间差的原因，灵梦不能一次性获取所有居民的位置，于是她会依次受到 $k$ 条消息，每条信息包含一个节点 $x$。\n\n- 如果 $x$ 号节点本来没有居民，那么灵梦得知了有一个居民在 $x$ 号节点。\n- 如果 $x$ 号节点本来有居民，那么由于某些原因， $x$ 号节点现在没有居民了。\n\n由于某些原因，在 $t$ 号节点也有可能存在居民。\n\n每当得知一条新的消息后，灵梦都需要快速计算出居民的最快疏散时间，以便于合理安排（此时，你可以认为其他节点上没有居民）。同时为了避免拥挤，以及其他难以预料的困难，灵梦做出了如下规则：\n\n- 每一时刻，每个居民只能沿着一条有向边走一步，或者**停留在原地**。\n- 每一时刻，每个节点上，**最多只能有一位居民**。\n- 当居民到达了博丽神社，那么**下一时刻**他就可以进入结界以获得庇护。你可以认为，在居民进入结界后他的行程就结束了。\n\n最快疏散时间，指的是**所有居民**全部进入结界的最短用时。", "inputFormat": "第一行四个正整数 $n,m,k,t$ ，含义如题所示。\n\n接下来 $m$ 行，每行两个正整数 $u,v$ ，描述一条 $u\\to v$ 的有向边。可能出现自环或者重边，请选手自行忽略。\n\n接下来一行，共 $k$ 个整数 $x_i$ ，表示在第 $i$ 条消息中 $x_i$ 号节点是否有居民的情况发生了变化。", "outputFormat": "输出共 $k$ 行，每行表示在按照前 $i$ 条消息，疏散所有居民所用的最小疏散时间。", "hint": "#### 样例 1 说明\n\n![main1.png](https://i.loli.net/2021/03/26/bWyznVgRc1pqPaf.png)\n\n这张图描述了**初始状态**、**第一次操作**、**第二次操作**的情况。可以发现；\n\n- 第一次操作后， $7$ 号节点最快通过 $7\\to 6\\to 1$ 到达神社，再花费 $1$ 单位时间进入神社，总共用时 $3$ 单位时间。\n- 第二次操作后， $1$ 号节点花费 $1$ 时刻进入神社， $7$ 号节点仍然按照 $7\\to 6\\to 1$ 到达神社，并花费 $1$ 单位时间进入神社即可。总共花费 $3$ 单位时间。\n\n![main2.png](https://i.loli.net/2021/03/26/sr3kbOWh7PxBway.png)\n\n这张图描述了第三次操作后的情况。\n\n第一时刻， $1$ 进入神社， $2\\to 1,7\\to 6$ ；第二时刻， $1$ 进入神社， $6\\to 1$ ；第三时刻所有人都进入了神社，于是总共花费 $3$ 单位时间。\n\n![main3.png](https://i.loli.net/2021/03/26/IWt7zKPohpFBmfV.png)\n\n这张图描述了第四次操作后的情况。\n\n第一时刻， $1$ 进入神社， $3\\to 1,7\\to 6$ ， $2$ 不动；第二时刻， $1$ 进入神社， $2\\to 1$ ， $6$ 不动。接下来花费 $2$ 时刻全部进入神社，于是总共花费 $4$ 单位时间。\n\n#### 样例 2,3\n\n见下发附件。\n\n#### 数据范围及约定\n\n$$\n\\def\\bd{\\boldsymbol}\n\\def\\a{\\texttt{A}}\t% 链的性质\n\\def\\b{\\texttt{B}}\t% 菊花图的性质\n\\def\\p{\\texttt{P}}\t% k为正的性质\n\\def\\n{\\text{无特殊限制}}\n\\def\\l{\\hline}\n\\def\\arraystretch{1.5}\\begin{array}{|c|c|c|c|c|}\\l\n\\textbf{数据点} & \\bd{n} & \\bd{m} & \\bd{k} & \\textbf{特殊性质} \\cr\\l\n1\\sim4 & n\\le 8 & m\\le 10 & k\\le 10 & - \\cr\\l\n5,6 & \\n & m=n-1 & \\n & \\p,\\a \\cr\\l\n7,8 & \\n & m=n-1 & \\n & \\p,\\b \\cr\\l\n9 & n\\le 10^5 & m=n-1 & k\\le 10^5 & \\p \\cr\\l\n10\\sim 12 & n\\le 10^3 & m\\le 10^3 & k\\le 10^3 & - \\cr\\l\n13,14 & n\\le 10^5 & m\\le 10^5 & k\\le 10^5 & \\p \\cr\\l\n15\\sim 17 & n\\le 10^5 & m\\le 10^5 & k\\le 10^5 & - \\cr\\l\n18\\sim 20 & \\n & \\n & \\n & - \\cr\\l\n\\end{array}\n$$\n\n- 特殊性质 $\\texttt{P}:$ 保证只存在出现居民的操作。\n- 特殊性质 $\\texttt{A}:$ 保证整张图是一条链，但不保证 $t$ 是链的一端。\n- 特殊性质 $\\texttt{B}:$ 保证除了 $t$ 以外的所有节点，都指向 $t$ 。\n\n\n对于所有数据，满足 $1\\le n\\le 10^6; 1\\le m\\le 1.05\\times 10^6;1\\le k\\le 10^6$ 。保证所有节点可以到达 $t$。", "locale": "zh-CN"}}}
{"pid": "P7509", "type": "P", "difficulty": 4, "samples": [["5 1\n1 2 3 4 5\n1 1 1 1 1", "15"], ["3 2\n1 2 3\n499122177 499122177 499122177", "499122177"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "期望"], "title": "撕裂抹消", "background": "何以撕裂，何以抹消？", "description": "给定一个长为 $n$ 的整数序列 $a_1,a_2,\\dots,a_n$，再给定一个有理数序列 $p_1,p_2,\\dots,p_n$。每个位置上有一个随机系数 $c_i \\in \\{0,1\\}$，其中 $P(c_i =  1) = p_i$，$P(c_i = 0) = 1-p_i$。\n\n注意到随机系数写作序列后可以划分为若干个极长的连续 $0$、$1$ 段，极长指不能再向两边扩展。定义一种系数序列的权值为：当系数序列中恰有 $k$ 个极长连续 $1$ 段时为 $\\sum\\limits_{i=1}^n c_i a_i$，否则为 $0$。\n\n求这个系数序列的期望权值。答案对 $998244353$ 取模。", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个非负整数 $a_1,a_2,\\dots,a_n$。\n\n第三行，$n$ 个非负整数 $p_1,p_2,\\dots,p_n$，以模 $998244353$ 意义下给出。", "outputFormat": "一行，一个非负整数，表示期望。", "hint": "**样例解释**\n\n对于第一组样例，$c_i$ 必然为 $1$，且必然恰有 $1$ 个极长连续段，故权值必然为 $1 + 2 + 3 + 4 + 5 = 15$。\n\n对于第二组样例，仅有 $c_1 = 1,c_2 = 0,c_3 = 1$ 时权值不为 $0$，且此种情况的概率为 $\\frac 12 \\times \\frac 12 \\times \\frac 12 = \\frac 18$，故期望为 $\\frac{1+3}8 = \\frac 12 \\equiv 499122177 \\pmod {998244353}$。\n\n**数据范围**\n\n对于 $30\\%$ 的数据，$n \\le 20$。\n\n对于 $60\\%$ 的数据，$n \\le 10^3$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le k \\le \\min\\left(20,\\left\\lfloor\\frac{n+1}2\\right\\rfloor\\right)$，$0 \\le a_i,p_i < 998244353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "撕裂抹消", "background": "何以撕裂，何以抹消？", "description": "给定一个长为 $n$ 的整数序列 $a_1,a_2,\\dots,a_n$，再给定一个有理数序列 $p_1,p_2,\\dots,p_n$。每个位置上有一个随机系数 $c_i \\in \\{0,1\\}$，其中 $P(c_i =  1) = p_i$，$P(c_i = 0) = 1-p_i$。\n\n注意到随机系数写作序列后可以划分为若干个极长的连续 $0$、$1$ 段，极长指不能再向两边扩展。定义一种系数序列的权值为：当系数序列中恰有 $k$ 个极长连续 $1$ 段时为 $\\sum\\limits_{i=1}^n c_i a_i$，否则为 $0$。\n\n求这个系数序列的期望权值。答案对 $998244353$ 取模。", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个非负整数 $a_1,a_2,\\dots,a_n$。\n\n第三行，$n$ 个非负整数 $p_1,p_2,\\dots,p_n$，以模 $998244353$ 意义下给出。", "outputFormat": "一行，一个非负整数，表示期望。", "hint": "**样例解释**\n\n对于第一组样例，$c_i$ 必然为 $1$，且必然恰有 $1$ 个极长连续段，故权值必然为 $1 + 2 + 3 + 4 + 5 = 15$。\n\n对于第二组样例，仅有 $c_1 = 1,c_2 = 0,c_3 = 1$ 时权值不为 $0$，且此种情况的概率为 $\\frac 12 \\times \\frac 12 \\times \\frac 12 = \\frac 18$，故期望为 $\\frac{1+3}8 = \\frac 12 \\equiv 499122177 \\pmod {998244353}$。\n\n**数据范围**\n\n对于 $30\\%$ 的数据，$n \\le 20$。\n\n对于 $60\\%$ 的数据，$n \\le 10^3$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le k \\le \\min\\left(20,\\left\\lfloor\\frac{n+1}2\\right\\rfloor\\right)$，$0 \\le a_i,p_i < 998244353$。", "locale": "zh-CN"}}}
{"pid": "P7510", "type": "P", "difficulty": 6, "samples": [["2\n", "-1 0\n"], ["5\n", "2 1\n9 7\n6 3\n8 4\n10 5\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2021", "Special Judge", "构造"], "title": "铃解缀", "background": "题目：数对构造。", "description": "将 $1 \\sim 2n$ 的整数分为 $n$ 个有序数对 $(a_i,b_i)$（$1 \\le i \\le n$）。你需要使得对于任意不大于 $n$ 的正整数 $i$，有 $a_i - b_i = i$。\n\n给定 $n$，请你给出一种构造方案。若无解则输出 `-1 0`。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "若无解，输出一行两个整数 `-1 0`。否则输出 $n$ 行，每行两个 $1 \\sim 2n$ 内的正整数，表示 $(a_i,b_i)$。\n\n你需要保证 $n$ 对 $(a_i,b_i)$ 按 $a_i - b_i$ 的大小顺次构成一个 $1 \\sim 2n$ 整数的排列。", "hint": "**样例解释**\n\n对于第一组样例，显然这个样例无解。\n\n对于第二组样例，样例输出给出了一种可行的构造方案。\n\n**数据范围及约定**\n\n**本题使用捆绑测试。**\n\n$\\texttt{Subtask 1 (20 pts)}$：$n \\le 5$。\n\n$\\texttt{Subtask 2 (20 pts)}$：$n \\le 10 ^ 5$。\n\n$\\texttt{Subtask 3 (30 pts)}$：$n$ 为素数。\n\n$\\texttt{Subtask 4 (30 pts)}$：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$。\n\n这道题用来锻炼数学思维和构造能力，但不适合在 OI 比赛中。\n\n[CoOI Round 1](https://www.luogu.com.cn/contest/43016) B 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "铃解缀", "background": "题目：数对构造。", "description": "将 $1 \\sim 2n$ 的整数分为 $n$ 个有序数对 $(a_i,b_i)$（$1 \\le i \\le n$）。你需要使得对于任意不大于 $n$ 的正整数 $i$，有 $a_i - b_i = i$。\n\n给定 $n$，请你给出一种构造方案。若无解则输出 `-1 0`。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "若无解，输出一行两个整数 `-1 0`。否则输出 $n$ 行，每行两个 $1 \\sim 2n$ 内的正整数，表示 $(a_i,b_i)$。\n\n你需要保证 $n$ 对 $(a_i,b_i)$ 按 $a_i - b_i$ 的大小顺次构成一个 $1 \\sim 2n$ 整数的排列。", "hint": "**样例解释**\n\n对于第一组样例，显然这个样例无解。\n\n对于第二组样例，样例输出给出了一种可行的构造方案。\n\n**数据范围及约定**\n\n**本题使用捆绑测试。**\n\n$\\texttt{Subtask 1 (20 pts)}$：$n \\le 5$。\n\n$\\texttt{Subtask 2 (20 pts)}$：$n \\le 10 ^ 5$。\n\n$\\texttt{Subtask 3 (30 pts)}$：$n$ 为素数。\n\n$\\texttt{Subtask 4 (30 pts)}$：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$。\n\n这道题用来锻炼数学思维和构造能力，但不适合在 OI 比赛中。\n\n[CoOI Round 1](https://www.luogu.com.cn/contest/43016) B 题。", "locale": "zh-CN"}}}
{"pid": "P7511", "type": "P", "difficulty": 6, "samples": [["5 0\n1 2 3 4 5", "120"], ["5 1\n2 3 4 5 1", "5"], ["5 2\n2 4 5 1 3", "60"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "三到六", "background": "「听说 JOJO 6 要来力！」  \n「好时代，来临力！」  \n「可是那个无敌的男人……」  \n「啊……在吃刀子之前，让我重温一下『欧拉欧拉』……」", "description": "给定整数 $n,k$ 和一个 $n$ 阶排列 $\\pi'$，问多少个排列 $\\pi$ 满足恰有 $k$ 个位置 $i$ 满足 $1 \\le i \\le n$ 且 $\\pi_i < \\pi_{\\pi'_i}$。答案对 $998244353$ 取模。", "inputFormat": "第一行，两个整数 $n,k$。\n\n第二行，$n$ 个正整数，表示 $\\pi'$。", "outputFormat": "一行，一个非负整数，表示满足条件的 $\\pi$ 的数量。", "hint": "**样例解释**\n\n对于第一组样例，$\\pi_i$ 不可能小于 $\\pi_i$，故必然满足条件，则答案为 $5! = 120$。 \n\n对于第二组样例，有以下 $5$ 种 $\\pi$ 满足条件：\n\n 1. $12345$；\n 1. $23451$；\n 1. $34512$；\n 1. $45123$；\n 1. $51234$。\n\n对于第三组样例，不予解释。\n\n**数据范围**\n\n对于 $20\\%$ 的数据，$n \\le 10$。\n\n对于 $40\\%$ 的数据，$n \\le 3 \\times 10^2$。\n\n对于 $60\\%$ 的数据，$n \\le 10^3$。\n\n对于另外 $20\\%$ 的数据，保证 $\\pi'_i = i \\bmod n + 1$（$1 \\le i \\le n$）。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^5$，$0 \\le k \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "三到六", "background": "「听说 JOJO 6 要来力！」  \n「好时代，来临力！」  \n「可是那个无敌的男人……」  \n「啊……在吃刀子之前，让我重温一下『欧拉欧拉』……」", "description": "给定整数 $n,k$ 和一个 $n$ 阶排列 $\\pi'$，问多少个排列 $\\pi$ 满足恰有 $k$ 个位置 $i$ 满足 $1 \\le i \\le n$ 且 $\\pi_i < \\pi_{\\pi'_i}$。答案对 $998244353$ 取模。", "inputFormat": "第一行，两个整数 $n,k$。\n\n第二行，$n$ 个正整数，表示 $\\pi'$。", "outputFormat": "一行，一个非负整数，表示满足条件的 $\\pi$ 的数量。", "hint": "**样例解释**\n\n对于第一组样例，$\\pi_i$ 不可能小于 $\\pi_i$，故必然满足条件，则答案为 $5! = 120$。 \n\n对于第二组样例，有以下 $5$ 种 $\\pi$ 满足条件：\n\n 1. $12345$；\n 1. $23451$；\n 1. $34512$；\n 1. $45123$；\n 1. $51234$。\n\n对于第三组样例，不予解释。\n\n**数据范围**\n\n对于 $20\\%$ 的数据，$n \\le 10$。\n\n对于 $40\\%$ 的数据，$n \\le 3 \\times 10^2$。\n\n对于 $60\\%$ 的数据，$n \\le 10^3$。\n\n对于另外 $20\\%$ 的数据，保证 $\\pi'_i = i \\bmod n + 1$（$1 \\le i \\le n$）。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^5$，$0 \\le k \\le n$。", "locale": "zh-CN"}}}
{"pid": "P7512", "type": "P", "difficulty": 7, "samples": [["3 0", "6 13 17 4"], ["5 1", "1035"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2500, 2500, 2500], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["O2优化"], "title": "「Byakkai OI 2021」Eaquira", "background": "", "description": "给定 $n$，并在数轴上截取 $[1,n]$ 的整点。\n\n定义**极长连续黑区间段**为满足 $1 \\le L \\le R \\le p$ 的区间段 $[L,R]$，且编号在 $[L,R]$ 内的区间都是黑色，且其不能再扩展，即编号为 $L-1$（如果存在，下同）和 $R+1$ 的区间都是白色。\n\n首先，请您将它们划分成若干个区间 $[l_1,r_1],[l_2,r_2],\\dots,[l_p,r_p]$，满足 $l_1=1,r_p = n$，且对于 $1 \\le i < p$ 有 $r_i = l_{i+1}-1$；对于 $1 \\le i \\le p$ 满足 $l_i \\le r_i$。  \n\n其二，您需要将每个区间标记为黑色或是白色，但不允许第 $1$ 个区间和第 $p$ 个区间同时被标记为黑色。\n\n其三，请您在每个区间内选出一个子区间，称为**绝妙子区间**。\n\n其四，请您在每个极长连续黑区间段中各选出一个黑色区间，称为**绝妙黑区间**。\n\n其五，在所有的极长连续黑区间段中钦定若干个称作**绝妙极长连续黑区间段**。\n\n定义一种以上述步骤所确定的方案的权值为黑色区间的个数与绝妙极长连续黑区间段个数的和。\n\n我本来希望您求出对于 $s = 0,1,2,\\dots,n$ 得到可以使得最终权值为 $s$ 的方案数。不过我也准备了一些更低要求的挑战。详见输入格式。\n\n答案对 $998244353$ 取模。", "inputFormat": "一行，两个整数 $n,{\\rm type}$。\n\n若 ${\\rm type} = 0$，则表示需要对 $0 \\le s \\le n$ 求出权值为 $s$ 的方案数。  \n若 ${\\rm type} = 1$，则表示需要求出对所有 $0 \\le s \\le n$ 的总方案数。", "outputFormat": "若 ${\\rm type} = 0$，则一行 $n+1$ 个非负整数，依次表示对于 $s = 0,1,2,\\dots,n$ 的答案。  \n若 ${\\rm type} = 1$，则一行一个非负整数，表示答案。", "hint": "**样例解释**\n\n以下用 $0$ 表示黑，$1$ 表示白。\n\n对于第一个样例，考虑 $[1,3]$ 的 $4$ 种划分：\n- $[1,1],[2,2],[3,3]$：  \n  此时选出无序数对的方案数为 $1$。  \n  考虑每个区间的黑白标记情况，有如下 $4$ 种方案： \n    - $001,100$：此时可以选择将唯一的极长连续黑区间段标记为绝妙与否，则权值为 $2$ 或 $3$，选择绝妙黑区间的方案数为 $2$。\n    - $101$：此时可以选择将唯一的极长连续黑区间段标记为绝妙与否，则权值为 $1$ 或 $2$，选择绝妙黑区间的方案数为 $1$。\n- $[1,2],[3,3]$ 或 $[1,1],[2,3]$：  \n  此时选出无序数对的方案数为 $3$。  \n  考虑每个区间的黑白标记情况，有如下 $2$ 种方案：\n    - $01,10$：此时可以选择将唯一的极长连续黑区间段标记为绝妙与否，则权值为 $1$ 或 $2$，选择绝妙黑区间的方案数为 $1$。\n- $[1,3]$：  \n  此时选出无序数对的方案数为 $6$。  \n  考虑每个区间的黑白标记情况，有如下 $1$ 种方案：\n    - $1$：此时权值为 $0$，总方案数为 $6$，选择绝妙黑区间的方案数为 $1$。\n故权值为 $0$ 的方案数为 $6 \\times 1 = 6$，权值为 $1$ 的方案数为 $1 \\times 1 + 2 \\times 3 \\times 2 \\times 1 = 13$，权值为 $2$ 的方案数为 $1 \\times 2 \\times 2 + 1 \\times 1 + 2 \\times 3 \\times 2 \\times 1 = 17$，权值为 $3$ 的方案数为 $1 \\times 2 \\times 2 = 4$。\n\n对于第二个样例，不予解释。\n\n**数据范围**\n\n**本题使用捆绑测试。**\n\n具体子任务限制及分值如下表：\n\n|子任务编号|分值|$n \\le $|${\\rm type} =$|时限 / s|\n|:-:|:-:|:-:|:-:|:-:|\n|$0$|$1$|$8$|$0$|$1$|\n|$1$|$4$|$13$|$1$|$1$|\n|$2$|$8$|$300$|$1$|$1$|\n|$3$|$5$|$70$|$0$|$1$|\n|$4$|$10$|$5 \\times 10^3$|$1$|$1$|\n|$5$|$8$|$300$|$0$|$1$|\n|$6$|$12$|$2 \\times 10^5$|$1$|$1$|\n|$7$|$22$|$10^3$|$0$|$2$|\n|$8$|$30$|$2 \\times 10^5$|$0$|$2.5$|\n\n对于所有数据，$1 \\le n \\le 2 \\times 10^5$，${\\rm type} \\in \\{0,1\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Byakkai OI 2021」Eaquira", "background": "", "description": "给定 $n$，并在数轴上截取 $[1,n]$ 的整点。\n\n定义**极长连续黑区间段**为满足 $1 \\le L \\le R \\le p$ 的区间段 $[L,R]$，且编号在 $[L,R]$ 内的区间都是黑色，且其不能再扩展，即编号为 $L-1$（如果存在，下同）和 $R+1$ 的区间都是白色。\n\n首先，请您将它们划分成若干个区间 $[l_1,r_1],[l_2,r_2],\\dots,[l_p,r_p]$，满足 $l_1=1,r_p = n$，且对于 $1 \\le i < p$ 有 $r_i = l_{i+1}-1$；对于 $1 \\le i \\le p$ 满足 $l_i \\le r_i$。  \n\n其二，您需要将每个区间标记为黑色或是白色，但不允许第 $1$ 个区间和第 $p$ 个区间同时被标记为黑色。\n\n其三，请您在每个区间内选出一个子区间，称为**绝妙子区间**。\n\n其四，请您在每个极长连续黑区间段中各选出一个黑色区间，称为**绝妙黑区间**。\n\n其五，在所有的极长连续黑区间段中钦定若干个称作**绝妙极长连续黑区间段**。\n\n定义一种以上述步骤所确定的方案的权值为黑色区间的个数与绝妙极长连续黑区间段个数的和。\n\n我本来希望您求出对于 $s = 0,1,2,\\dots,n$ 得到可以使得最终权值为 $s$ 的方案数。不过我也准备了一些更低要求的挑战。详见输入格式。\n\n答案对 $998244353$ 取模。", "inputFormat": "一行，两个整数 $n,{\\rm type}$。\n\n若 ${\\rm type} = 0$，则表示需要对 $0 \\le s \\le n$ 求出权值为 $s$ 的方案数。  \n若 ${\\rm type} = 1$，则表示需要求出对所有 $0 \\le s \\le n$ 的总方案数。", "outputFormat": "若 ${\\rm type} = 0$，则一行 $n+1$ 个非负整数，依次表示对于 $s = 0,1,2,\\dots,n$ 的答案。  \n若 ${\\rm type} = 1$，则一行一个非负整数，表示答案。", "hint": "**样例解释**\n\n以下用 $0$ 表示黑，$1$ 表示白。\n\n对于第一个样例，考虑 $[1,3]$ 的 $4$ 种划分：\n- $[1,1],[2,2],[3,3]$：  \n  此时选出无序数对的方案数为 $1$。  \n  考虑每个区间的黑白标记情况，有如下 $4$ 种方案： \n    - $001,100$：此时可以选择将唯一的极长连续黑区间段标记为绝妙与否，则权值为 $2$ 或 $3$，选择绝妙黑区间的方案数为 $2$。\n    - $101$：此时可以选择将唯一的极长连续黑区间段标记为绝妙与否，则权值为 $1$ 或 $2$，选择绝妙黑区间的方案数为 $1$。\n- $[1,2],[3,3]$ 或 $[1,1],[2,3]$：  \n  此时选出无序数对的方案数为 $3$。  \n  考虑每个区间的黑白标记情况，有如下 $2$ 种方案：\n    - $01,10$：此时可以选择将唯一的极长连续黑区间段标记为绝妙与否，则权值为 $1$ 或 $2$，选择绝妙黑区间的方案数为 $1$。\n- $[1,3]$：  \n  此时选出无序数对的方案数为 $6$。  \n  考虑每个区间的黑白标记情况，有如下 $1$ 种方案：\n    - $1$：此时权值为 $0$，总方案数为 $6$，选择绝妙黑区间的方案数为 $1$。\n故权值为 $0$ 的方案数为 $6 \\times 1 = 6$，权值为 $1$ 的方案数为 $1 \\times 1 + 2 \\times 3 \\times 2 \\times 1 = 13$，权值为 $2$ 的方案数为 $1 \\times 2 \\times 2 + 1 \\times 1 + 2 \\times 3 \\times 2 \\times 1 = 17$，权值为 $3$ 的方案数为 $1 \\times 2 \\times 2 = 4$。\n\n对于第二个样例，不予解释。\n\n**数据范围**\n\n**本题使用捆绑测试。**\n\n具体子任务限制及分值如下表：\n\n|子任务编号|分值|$n \\le $|${\\rm type} =$|时限 / s|\n|:-:|:-:|:-:|:-:|:-:|\n|$0$|$1$|$8$|$0$|$1$|\n|$1$|$4$|$13$|$1$|$1$|\n|$2$|$8$|$300$|$1$|$1$|\n|$3$|$5$|$70$|$0$|$1$|\n|$4$|$10$|$5 \\times 10^3$|$1$|$1$|\n|$5$|$8$|$300$|$0$|$1$|\n|$6$|$12$|$2 \\times 10^5$|$1$|$1$|\n|$7$|$22$|$10^3$|$0$|$2$|\n|$8$|$30$|$2 \\times 10^5$|$0$|$2.5$|\n\n对于所有数据，$1 \\le n \\le 2 \\times 10^5$，${\\rm type} \\in \\{0,1\\}$。", "locale": "zh-CN"}}}
{"pid": "P7513", "type": "P", "difficulty": 7, "samples": [["15 1 2\n", "201012023\n"], ["1 7 3\n", "2\n"], ["3 2 3\n", "301162058\n"], ["4 2 2\n", "0\n"], ["19260817 114514 13579\n", "461194421\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "递推", "递归", "O2优化", "素数判断,质数,筛法", "快速傅里叶变换 FFT", "快速数论变换 NTT"], "title": "「Stoi2031」兰亭序 加强版", "background": "本题是[「Stoi2031」兰亭序](https://www.luogu.com.cn/problem/P7487) 的加强版。", "description": "给定 $n=a^b,k$，对 $1 \\le t \\le k$ 求\n\n$$\\prod_{x_1=1}^{n}\\prod_{x_2=1}^{n}\\dots\\prod_{x_t=1}^{n}\\left( 1+e^{\\frac{2\\pi ix_1x_2\\dots x_t}{n}} \\right) \\bmod{335544323}$$\n\n输出所有 $k$ 个答案的异或和。\n\n其中 $e^{it}=\\cos{t}+i\\sin{t}$ 对所有 $t \\in \\mathbb{R}$ 成立，$i$ 为虚数单位，满足 $i^2=-1$。", "inputFormat": "一行三个正整数 $a,b,k$，其中 $n=a^b$。", "outputFormat": "一行一个自然数表示答案。", "hint": "对于所有数据，$1 \\le a \\le 10^{18}$，$1 \\le b \\le 10^{13}$，$1 \\le k \\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Stoi2031」兰亭序 加强版", "background": "本题是[「Stoi2031」兰亭序](https://www.luogu.com.cn/problem/P7487) 的加强版。", "description": "给定 $n=a^b,k$，对 $1 \\le t \\le k$ 求\n\n$$\\prod_{x_1=1}^{n}\\prod_{x_2=1}^{n}\\dots\\prod_{x_t=1}^{n}\\left( 1+e^{\\frac{2\\pi ix_1x_2\\dots x_t}{n}} \\right) \\bmod{335544323}$$\n\n输出所有 $k$ 个答案的异或和。\n\n其中 $e^{it}=\\cos{t}+i\\sin{t}$ 对所有 $t \\in \\mathbb{R}$ 成立，$i$ 为虚数单位，满足 $i^2=-1$。", "inputFormat": "一行三个正整数 $a,b,k$，其中 $n=a^b$。", "outputFormat": "一行一个自然数表示答案。", "hint": "对于所有数据，$1 \\le a \\le 10^{18}$，$1 \\le b \\le 10^{13}$，$1 \\le k \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P7514", "type": "P", "difficulty": 5, "samples": [["6 3\n8 11 13 14 16 19\n10 18 2 3 6 7\n", "8\n"], ["见附件中的 card/card2.in。", "见附件中的 card/card2.ans。"], ["见附件中的 card/card3.in。", "见附件中的 card/card3.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2021", "O2优化", "排序", "双指针 two-pointer"], "title": "[省选联考 2021 A/B 卷] 卡牌游戏", "background": "", "description": "Alice 有 $n$ 张卡牌，第 $i$（$1 \\le i \\le n$）张卡牌的正面有数字 $a_i$，背面有数字 $b_i$，初始时所有卡牌正面朝上。\n\n现在 Alice 可以将不超过 $m$ 张卡牌翻面，即由正面朝上改为背面朝上。Alice 的目标是让最终朝上的 $n$ 个数字的极差（最大值与最小值的差）尽量小。请你帮 Alice 算一算极差的最小值是多少。", "inputFormat": "第一行，两个正整数 $n, m$，代表卡牌张数与至多翻面张数。  \n第二行，$n$ 个正整数，第 $i$ 个数字表示 $a_i$。  \n第三行，$n$ 个正整数，第 $i$ 个数字表示 $b_i$。\n\n数据保证卡牌上的 $2 n$ 个数字互不相同，且卡牌按照 $a_i$ 升序给出。", "outputFormat": "仅一行，一个整数，表示答案。", "hint": "**【样例 #1 解释】**\n\n最优方案之一：将第 $1, 5, 6$ 张卡牌翻面，最终朝上的数字依次为 $10, 11, 13, 14, 6, 7$，极差为 $14 - 6 = 8$。\n\n---\n\n**【数据范围】**\n\n对于所有测试数据：$3 \\le n \\le {10}^6$，$1 \\le m < n$，$1 \\le a_i, b_i \\le {10}^9$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\le$ | 特殊限制 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $10$ | 无 |\n| $3 \\sim 4$ | $500$ | 无 |\n| $5 \\sim 6$ | $5 \\times {10}^5$ | $m \\le 1000$ |\n| $7$ | ${10}^5$ | 无 |\n| $8$ | $4 \\times {10}^5$ | 无 |\n| $9$ | $7 \\times {10}^5$ | 无 |\n| $10$ | ${10}^6$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2021 A/B 卷] 卡牌游戏", "background": "", "description": "Alice 有 $n$ 张卡牌，第 $i$（$1 \\le i \\le n$）张卡牌的正面有数字 $a_i$，背面有数字 $b_i$，初始时所有卡牌正面朝上。\n\n现在 Alice 可以将不超过 $m$ 张卡牌翻面，即由正面朝上改为背面朝上。Alice 的目标是让最终朝上的 $n$ 个数字的极差（最大值与最小值的差）尽量小。请你帮 Alice 算一算极差的最小值是多少。", "inputFormat": "第一行，两个正整数 $n, m$，代表卡牌张数与至多翻面张数。  \n第二行，$n$ 个正整数，第 $i$ 个数字表示 $a_i$。  \n第三行，$n$ 个正整数，第 $i$ 个数字表示 $b_i$。\n\n数据保证卡牌上的 $2 n$ 个数字互不相同，且卡牌按照 $a_i$ 升序给出。", "outputFormat": "仅一行，一个整数，表示答案。", "hint": "**【样例 #1 解释】**\n\n最优方案之一：将第 $1, 5, 6$ 张卡牌翻面，最终朝上的数字依次为 $10, 11, 13, 14, 6, 7$，极差为 $14 - 6 = 8$。\n\n---\n\n**【数据范围】**\n\n对于所有测试数据：$3 \\le n \\le {10}^6$，$1 \\le m < n$，$1 \\le a_i, b_i \\le {10}^9$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\le$ | 特殊限制 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $10$ | 无 |\n| $3 \\sim 4$ | $500$ | 无 |\n| $5 \\sim 6$ | $5 \\times {10}^5$ | $m \\le 1000$ |\n| $7$ | ${10}^5$ | 无 |\n| $8$ | $4 \\times {10}^5$ | 无 |\n| $9$ | $7 \\times {10}^5$ | 无 |\n| $10$ | ${10}^6$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P7515", "type": "P", "difficulty": 6, "samples": [["3\n3 3\n28 25\n24 25\n3 3\n15 14\n14 12\n3 3\n0 3000005\n0 0\n", "YES\n7 8 8\n8 5 4\n4 7 9\nYES\n4 2 2\n5 4 6\n5 0 2\nNO\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "各省省选", "2021", "Special Judge", "O2优化", "差分约束", "构造"], "title": "[省选联考 2021 A 卷] 矩阵游戏", "background": "", "description": "Alice 有一个 $n \\times m$ 的矩阵 $a_{i, j}$（$1 \\le i \\le n$，$1 \\le j \\le m$），其每个元素为大小不超过 ${10}^6$ 的非负整数。\n\nBob 根据该矩阵生成了一个 $(n - 1) \\times (m - 1)$ 的矩阵 $b_{i, j}$（$1 \\le i \\le n - 1$，$1 \\le j \\le m - 1$），每个元素的生成公式为\n\n$$ b_{i, j} = a_{i, j} + a_{i, j + 1} + a_{i + 1, j} + a_{i + 1, j + 1} $$\n\n现在 Alice 忘记了矩阵 $a_{i, j}$，请你根据 Bob 给出的矩阵 $b_{i, j}$ 还原出 $a_{i, j}$。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个整数 $T$，表示数据组数。对于每组数据：\n\n第一行，两个正整数 $n, m$，表示矩阵 $a_{i, j}$ 的大小。  \n接下来 $n - 1$ 行，每行 $m - 1$ 个非负整数，表示 $b_{i, j}$。", "outputFormat": "对于每组数据：\n\n1. 若矩阵 $b_{i, j}$ 无法被生成，则输出一行一个字符串 `NO`。\n2. 若矩阵 $b_{i, j}$ 可被生成，则先输出一行一个字符串 `YES`，接下来输出 $n$ 行每行 $m$ 个（用单个空格分隔的）大小不超过 ${10}^6$ 的非负整数表示 $a_{i, j}$。\n\n若有多个矩阵 $a_{i, j}$ 可生成给出的 $b_{i, j}$，输出其中任意一个即可。", "hint": "**【数据范围】**\n\n对于所有测试数据：$1 \\le T \\le 10$，$2 \\le n, m \\le 300$，$0 \\le b_{i, j} \\le 4 \\times {10}^6$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n, m \\le$ | 特殊限制 |\n|:-:|:-:|:-:|\n| $1 \\sim 4$ | $3$ | 无 |\n| $5 \\sim 7$ | $10$ | $m = 2$ |\n| $8 \\sim 10$ | $100$ | $m = 2$ |\n| $11 \\sim 15$ | $300$ | $0 \\le b_{i, j} \\le 1$ |\n| $16 \\sim 20$ | $300$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2021 A 卷] 矩阵游戏", "background": "", "description": "Alice 有一个 $n \\times m$ 的矩阵 $a_{i, j}$（$1 \\le i \\le n$，$1 \\le j \\le m$），其每个元素为大小不超过 ${10}^6$ 的非负整数。\n\nBob 根据该矩阵生成了一个 $(n - 1) \\times (m - 1)$ 的矩阵 $b_{i, j}$（$1 \\le i \\le n - 1$，$1 \\le j \\le m - 1$），每个元素的生成公式为\n\n$$ b_{i, j} = a_{i, j} + a_{i, j + 1} + a_{i + 1, j} + a_{i + 1, j + 1} $$\n\n现在 Alice 忘记了矩阵 $a_{i, j}$，请你根据 Bob 给出的矩阵 $b_{i, j}$ 还原出 $a_{i, j}$。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个整数 $T$，表示数据组数。对于每组数据：\n\n第一行，两个正整数 $n, m$，表示矩阵 $a_{i, j}$ 的大小。  \n接下来 $n - 1$ 行，每行 $m - 1$ 个非负整数，表示 $b_{i, j}$。", "outputFormat": "对于每组数据：\n\n1. 若矩阵 $b_{i, j}$ 无法被生成，则输出一行一个字符串 `NO`。\n2. 若矩阵 $b_{i, j}$ 可被生成，则先输出一行一个字符串 `YES`，接下来输出 $n$ 行每行 $m$ 个（用单个空格分隔的）大小不超过 ${10}^6$ 的非负整数表示 $a_{i, j}$。\n\n若有多个矩阵 $a_{i, j}$ 可生成给出的 $b_{i, j}$，输出其中任意一个即可。", "hint": "**【数据范围】**\n\n对于所有测试数据：$1 \\le T \\le 10$，$2 \\le n, m \\le 300$，$0 \\le b_{i, j} \\le 4 \\times {10}^6$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n, m \\le$ | 特殊限制 |\n|:-:|:-:|:-:|\n| $1 \\sim 4$ | $3$ | 无 |\n| $5 \\sim 7$ | $10$ | $m = 2$ |\n| $8 \\sim 10$ | $100$ | $m = 2$ |\n| $11 \\sim 15$ | $300$ | $0 \\le b_{i, j} \\le 1$ |\n| $16 \\sim 20$ | $300$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P7516", "type": "P", "difficulty": 6, "samples": [["4 6\n2 3\n3 2\n4 1\n1 4\n2 1\n3 1\n", "6 5 5 4 4 4 4\n"], ["见附件中的 graph/graph2.in。", "见附件中的 graph/graph2.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2021", "O2优化"], "title": "[省选联考 2021 A/B 卷] 图函数", "background": "", "description": "对于一张 $n$ 个点 $m$ 条边的有向图 $G$（顶点从 $1 \\sim n$ 编号），定义函数 $f(u, G)$：\n\n1. 初始化返回值 $cnt = 0$，图 $G' = G$。\n2. 从 $1$ 至 $n$ 按顺序枚举顶点 $v$，如果当前的图 $G'$ 中，从 $u$ 到 $v$ 与从 $v$ 到 $u$ 的路径都存在，则将 $cnt + 1$，并在图 $G'$ 中删去顶点 $v$ 以及与它相关的边。\n3. 第 $2$ 步结束后，返回值 $cnt$ 即为函数值。\n\n现在给定一张有向图 $G$，请你求出 $h(G) = f(1, G) + f(2, G) + \\cdots + f(n, G)$ 的值。\n\n更进一步地，记删除（按输入顺序给出的）第 $1$ 到 $i$ 条边后的图为 $G_i$（$1 \\le i \\le m$），请你求出所有 $h(G_i)$ 的值。", "inputFormat": "第一行，两个整数 $n,m$，表示图的点数与边数。  \n接下来 $m$ 行，每行两个整数，第 $i$ 行的两个整数 $x_i, y_i$ 表示一条有向边 $x_i \\to y_i$。\n\n数据保证 $x_i \\neq y_i$ 且同一条边不会给出多次。", "outputFormat": "输出一行 $m + 1$ 个整数，其中第一个数表示给出的完整图 $G$ 的 $h(G)$ 值。第 $i$（$2 \\le i \\le m + 1$）个整数表示 $h(G_{i-1})$。", "hint": "**【样例 #1 解释】**\n\n对于给出的完整图 $G$：\n\n1. $f(1, G) = 1$，过程中删除了顶点 $1$。\n2. $f(2, G) = 1$，过程中删除了顶点 $2$。\n3. $f(3, G) = 2$，过程中删除了顶点 $2, 3$。\n4. $f(4, G) = 2$，过程中删除了顶点 $1, 4$。\n\n---\n\n**【数据范围】**\n\n对于所有测试数据：$2 \\le n \\le {10}^3$，$1 \\le m \\le 2 \\times {10}^5$，$1 \\le x_i, y_i \\le n$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\le$ | $m\\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 4$ | $10$ | $10$ |\n| $5 \\sim 11$ | $100$ | $2 \\times {10}^3$ |\n| $12 \\sim 20$ | ${10}^3$ | $5 \\times {10}^3$ |\n| $21 \\sim 25$ | ${10}^3$ | $2 \\times {10}^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2021 A/B 卷] 图函数", "background": "", "description": "对于一张 $n$ 个点 $m$ 条边的有向图 $G$（顶点从 $1 \\sim n$ 编号），定义函数 $f(u, G)$：\n\n1. 初始化返回值 $cnt = 0$，图 $G' = G$。\n2. 从 $1$ 至 $n$ 按顺序枚举顶点 $v$，如果当前的图 $G'$ 中，从 $u$ 到 $v$ 与从 $v$ 到 $u$ 的路径都存在，则将 $cnt + 1$，并在图 $G'$ 中删去顶点 $v$ 以及与它相关的边。\n3. 第 $2$ 步结束后，返回值 $cnt$ 即为函数值。\n\n现在给定一张有向图 $G$，请你求出 $h(G) = f(1, G) + f(2, G) + \\cdots + f(n, G)$ 的值。\n\n更进一步地，记删除（按输入顺序给出的）第 $1$ 到 $i$ 条边后的图为 $G_i$（$1 \\le i \\le m$），请你求出所有 $h(G_i)$ 的值。", "inputFormat": "第一行，两个整数 $n,m$，表示图的点数与边数。  \n接下来 $m$ 行，每行两个整数，第 $i$ 行的两个整数 $x_i, y_i$ 表示一条有向边 $x_i \\to y_i$。\n\n数据保证 $x_i \\neq y_i$ 且同一条边不会给出多次。", "outputFormat": "输出一行 $m + 1$ 个整数，其中第一个数表示给出的完整图 $G$ 的 $h(G)$ 值。第 $i$（$2 \\le i \\le m + 1$）个整数表示 $h(G_{i-1})$。", "hint": "**【样例 #1 解释】**\n\n对于给出的完整图 $G$：\n\n1. $f(1, G) = 1$，过程中删除了顶点 $1$。\n2. $f(2, G) = 1$，过程中删除了顶点 $2$。\n3. $f(3, G) = 2$，过程中删除了顶点 $2, 3$。\n4. $f(4, G) = 2$，过程中删除了顶点 $1, 4$。\n\n---\n\n**【数据范围】**\n\n对于所有测试数据：$2 \\le n \\le {10}^3$，$1 \\le m \\le 2 \\times {10}^5$，$1 \\le x_i, y_i \\le n$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\le$ | $m\\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 4$ | $10$ | $10$ |\n| $5 \\sim 11$ | $100$ | $2 \\times {10}^3$ |\n| $12 \\sim 20$ | ${10}^3$ | $5 \\times {10}^3$ |\n| $21 \\sim 25$ | ${10}^3$ | $2 \\times {10}^5$ |", "locale": "zh-CN"}}}
{"pid": "P7517", "type": "P", "difficulty": 3, "samples": [["6\n16 11 6 1 9 11\n", "7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2021", "O2优化", "枚举"], "title": "[省选联考 2021 B 卷] 数对", "background": "", "description": "给定 $n$ 个正整数 $a_i$，请你求出有多少个数对 $(i, j)$ 满足 $1 \\le i \\le n$，$1 \\le j \\le n$，$i \\ne j$ 且 $a_i$ 是 $a_j$ 的倍数。", "inputFormat": "第一行，一个整数 $n$，表示数字个数。\n\n第二行，$n$ 个整数，表示 $a_i$。", "outputFormat": "输出一行，一个整数，表示答案。", "hint": "对于 $40 \\%$ 的数据，$n \\le 1000$。  \n对于 $70 \\%$ 的数据，$1 \\le a_i \\le 5 \\times {10}^3$。  \n对于 $100 \\%$ 的数据，$2 \\le n \\le 2 \\times {10}^5$，$1 \\le a_i \\le 5 \\times {10}^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2021 B 卷] 数对", "background": "", "description": "给定 $n$ 个正整数 $a_i$，请你求出有多少个数对 $(i, j)$ 满足 $1 \\le i \\le n$，$1 \\le j \\le n$，$i \\ne j$ 且 $a_i$ 是 $a_j$ 的倍数。", "inputFormat": "第一行，一个整数 $n$，表示数字个数。\n\n第二行，$n$ 个整数，表示 $a_i$。", "outputFormat": "输出一行，一个整数，表示答案。", "hint": "对于 $40 \\%$ 的数据，$n \\le 1000$。  \n对于 $70 \\%$ 的数据，$1 \\le a_i \\le 5 \\times {10}^3$。  \n对于 $100 \\%$ 的数据，$2 \\le n \\le 2 \\times {10}^5$，$1 \\le a_i \\le 5 \\times {10}^5$。", "locale": "zh-CN"}}}
{"pid": "P7518", "type": "P", "difficulty": 6, "samples": [["7 3 3\n2 3 1\n2 1 3 3 2 1 3\n1 2\n2 3\n1 4\n4 5\n4 6\n6 7\n5\n3 5\n1 3\n7 3\n5 7\n7 5\n", "2\n2\n2\n3\n1\n"], ["见附件中的 gem/gem2.in", "见附件中的 gem/gem2.ans"], ["见附件中的 gem/gem3.in", "见附件中的 gem/gem3.ans"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "二分", "各省省选", "2021", "O2优化", "可持久化线段树"], "title": "[省选联考 2021 A/B 卷]  宝石", "background": "**链的部分分官方数据有误。这里已经修改，如仍有误请反馈。**", "description": "欧艾大陆上有 $n$ 座城市，城市从 $1 \\sim n$ 编号，所有城市经由 $n - 1$ 条无向道路互相连通，即 $n$ 座城市与 $n - 1$ 条道路构成了一棵树。\n\n每座城市的集市上都会出售宝石，总共有 $m$ 种不同的宝石，用 $1 \\sim m$ 编号。$i$ 号城市的集市出售的是第 $w_i$ 种宝石，一种宝石可能会在多座城市的集市出售。\n\nK 神有一个宝石收集器。这个宝石收集器能按照顺序收集至多 $c$ 颗宝石，其收集宝石的顺序为：$P_1, P_2, \\ldots , P_c$。更具体地，收集器需要先放入第 $P_1$ 种宝石，然后才能再放入第 $P_2$ 种宝石，之后再能放入第 $P_3$ 种宝石，以此类推。其中 $P_1, P_2, \\ldots , P_c$ 互不相等。\n\nK 神到达一个城市后，如果该城市的集市上出售的宝石种类和当前收集器中需要放入的种类相同，则他可以在该城市的集市上购买一颗宝石并放入宝石收集器中；否则他只会路过该城市什么都不做。\n\n现在 K 神给了你 $q$ 次询问，每次给出起点 $s_i$ 与终点 $t_i$，他想知道如果从 $s_i$ 号城市出发，沿最短路线走到 $t_i$ 号城市后，他的收集器中最多能收集到几个宝石？（在每次询问中，收集器内初始时没有任何宝石。起点与终点城市集市上的宝石可以尝试被收集）", "inputFormat": "第一行，包含三个正整数 $n, m, c$，分别表示城市数，宝石种类数，收集器的容量。  \n第二行，包含 $c$ 个正整数 $P_i$。数据保证 $1 \\le P_i \\le m$ 且这些数互不相等。  \n第三行，包含 $n$ 个正整数 $w_i$，表示每个城市集市上出售的宝石种类。  \n接下来 $n - 1$ 行，每行两个正整数 $u_i, v_i$，表示一条连接 $u_i$ 和 $v_i$ 号城市的道路。  \n接下来一行，包含一个正整数 $q$，表示询问次数。  \n接下来 $q$ 行，每行两个正整数 $s_i, t_i$，表示该次询问的起点与终点。", "outputFormat": "按输入顺序输出 $q$ 行，每行一个整数，表示询问的答案。", "hint": "**【数据范围】**\n\n对于所有测试数据：$1 \\le n, q \\le 2 \\times {10}^5$，$1 \\le c \\le m \\le 5 \\times {10}^4$，$1 \\le w_i \\le m$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n, q \\le$ | 特殊限制 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $10$ | 无 |\n| $3 \\sim 5$ | $1000$ | 无 |\n| $6 \\sim 10$ | $2 \\times {10}^5$ | $m \\le 300$ |\n| $11 \\sim 14$ | $2 \\times {10}^5$ | $u_i = i$，$v_i = i + 1$ |\n| $15 \\sim 20$ | $2 \\times {10}^5$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2021 A/B 卷]  宝石", "background": "**链的部分分官方数据有误。这里已经修改，如仍有误请反馈。**", "description": "欧艾大陆上有 $n$ 座城市，城市从 $1 \\sim n$ 编号，所有城市经由 $n - 1$ 条无向道路互相连通，即 $n$ 座城市与 $n - 1$ 条道路构成了一棵树。\n\n每座城市的集市上都会出售宝石，总共有 $m$ 种不同的宝石，用 $1 \\sim m$ 编号。$i$ 号城市的集市出售的是第 $w_i$ 种宝石，一种宝石可能会在多座城市的集市出售。\n\nK 神有一个宝石收集器。这个宝石收集器能按照顺序收集至多 $c$ 颗宝石，其收集宝石的顺序为：$P_1, P_2, \\ldots , P_c$。更具体地，收集器需要先放入第 $P_1$ 种宝石，然后才能再放入第 $P_2$ 种宝石，之后再能放入第 $P_3$ 种宝石，以此类推。其中 $P_1, P_2, \\ldots , P_c$ 互不相等。\n\nK 神到达一个城市后，如果该城市的集市上出售的宝石种类和当前收集器中需要放入的种类相同，则他可以在该城市的集市上购买一颗宝石并放入宝石收集器中；否则他只会路过该城市什么都不做。\n\n现在 K 神给了你 $q$ 次询问，每次给出起点 $s_i$ 与终点 $t_i$，他想知道如果从 $s_i$ 号城市出发，沿最短路线走到 $t_i$ 号城市后，他的收集器中最多能收集到几个宝石？（在每次询问中，收集器内初始时没有任何宝石。起点与终点城市集市上的宝石可以尝试被收集）", "inputFormat": "第一行，包含三个正整数 $n, m, c$，分别表示城市数，宝石种类数，收集器的容量。  \n第二行，包含 $c$ 个正整数 $P_i$。数据保证 $1 \\le P_i \\le m$ 且这些数互不相等。  \n第三行，包含 $n$ 个正整数 $w_i$，表示每个城市集市上出售的宝石种类。  \n接下来 $n - 1$ 行，每行两个正整数 $u_i, v_i$，表示一条连接 $u_i$ 和 $v_i$ 号城市的道路。  \n接下来一行，包含一个正整数 $q$，表示询问次数。  \n接下来 $q$ 行，每行两个正整数 $s_i, t_i$，表示该次询问的起点与终点。", "outputFormat": "按输入顺序输出 $q$ 行，每行一个整数，表示询问的答案。", "hint": "**【数据范围】**\n\n对于所有测试数据：$1 \\le n, q \\le 2 \\times {10}^5$，$1 \\le c \\le m \\le 5 \\times {10}^4$，$1 \\le w_i \\le m$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n, q \\le$ | 特殊限制 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $10$ | 无 |\n| $3 \\sim 5$ | $1000$ | 无 |\n| $6 \\sim 10$ | $2 \\times {10}^5$ | $m \\le 300$ |\n| $11 \\sim 14$ | $2 \\times {10}^5$ | $u_i = i$，$v_i = i + 1$ |\n| $15 \\sim 20$ | $2 \\times {10}^5$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P7519", "type": "P", "difficulty": 6, "samples": [["3 6\n1 2 1\n", "5\n"], ["6 50\n4 7 9 3 0 3\n", "96"], ["11 300\n6 8 8 12 0 11 6 1 0 15 5\n", "30140983\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2021", "O2优化"], "title": "[省选联考 2021 A/B 卷] 滚榜", "background": "", "description": "封榜是 ICPC 系列竞赛中的一个特色机制。ICPC 竞赛是实时反馈提交结果的程序设计竞赛，参赛选手与场外观众可以通过排行榜实时查看每个参赛队伍的过题数与排名。竞赛的最后一小时会进行“封榜”，即排行榜上将隐藏最后一小时内的提交的结果。赛后通过滚榜环节将最后一小时的结果（即每只队伍最后一小时的过题数）公布。\n\nAlice 围观了一场 ICPC 竞赛的滚榜环节。本次竞赛共有 $n$ 支队伍参赛，队伍从 $1 \\sim n$ 编号，$i$ 号队伍在封榜前通过的题数为 $a_i$。排行榜上队伍按照过题数从大到小进行排名，若两支队伍过题数相同，则编号小的队伍排名靠前。\n\n滚榜时主办方以 $b_i$ 不降的顺序依次公布了每支队伍在封榜后的过题数 $b_i$（最终该队伍总过题数为 $a_i + b_i$），并且每公布一支队伍的结果，排行榜上就会实时更新排名。Alice 并不记得队伍被公布的顺序，也不记得最终排行榜上的排名情况，只记得每次公布后，本次被公布结果的队伍都成为了新排行榜上的第一名，以及所有队伍在封榜后一共通过了 $m$ 道题（即 $\\sum_{i = 1}^{n} b_i = m$）。\n\n现在 Alice 想请你帮她算算，最终排行榜上队伍的排名情况可能有多少种。", "inputFormat": "第一行，包含两个正整数 $n, m$，表示队伍数量与它们封榜后的总过题数。  \n第二行，包含 $n$ 个正整数，表示 $a_i$。", "outputFormat": "仅一行，一个整数，表示答案。", "hint": "**【样例 #1 解释】**\n\n1. 最终排名：$1, 3, 2$，滚榜情况（按公布顺序，下同）：$b_2 = 0$，$b_3 = 2$，$b_1 = 4$。\n\n2. 最终排名：$2, 1, 3$，滚榜情况：$b_3 = 2$，$b_1 = 2$，$b_2 = 2$。\n\n3. 最终排名：$2, 3, 1$，滚榜情况：$b_1 = 1$，$b_3 = 2$，$b_2 = 3$。\n\n4. 最终排名：$3, 1, 2$，滚榜情况：$b_2 = 0$，$b_1 = 2$，$b_3 = 4$。\n\n5. 最终排名：$3, 2, 1$，滚榜情况：$b_1 = 1$，$b_2 = 1$，$b_3 = 4$。\n\n---\n\n**【数据范围】**\n\n对于所有测试数据：$1 \\le n \\le 13$，$1 \\le m \\le 500$，$0 \\le a_i \\le {10}^4$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\le$ | $m \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $2$ | $10$ |\n| $3 \\sim 5$ | $3$ | $10$ |\n| $6 \\sim 8$ | $8$ | $100$ |\n| $9 \\sim 12$ | $10$ | $200$ |\n| $13 \\sim 16$ | $12$ | $300$ |\n| $17 \\sim 20$ | $13$ | $500$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2021 A/B 卷] 滚榜", "background": "", "description": "封榜是 ICPC 系列竞赛中的一个特色机制。ICPC 竞赛是实时反馈提交结果的程序设计竞赛，参赛选手与场外观众可以通过排行榜实时查看每个参赛队伍的过题数与排名。竞赛的最后一小时会进行“封榜”，即排行榜上将隐藏最后一小时内的提交的结果。赛后通过滚榜环节将最后一小时的结果（即每只队伍最后一小时的过题数）公布。\n\nAlice 围观了一场 ICPC 竞赛的滚榜环节。本次竞赛共有 $n$ 支队伍参赛，队伍从 $1 \\sim n$ 编号，$i$ 号队伍在封榜前通过的题数为 $a_i$。排行榜上队伍按照过题数从大到小进行排名，若两支队伍过题数相同，则编号小的队伍排名靠前。\n\n滚榜时主办方以 $b_i$ 不降的顺序依次公布了每支队伍在封榜后的过题数 $b_i$（最终该队伍总过题数为 $a_i + b_i$），并且每公布一支队伍的结果，排行榜上就会实时更新排名。Alice 并不记得队伍被公布的顺序，也不记得最终排行榜上的排名情况，只记得每次公布后，本次被公布结果的队伍都成为了新排行榜上的第一名，以及所有队伍在封榜后一共通过了 $m$ 道题（即 $\\sum_{i = 1}^{n} b_i = m$）。\n\n现在 Alice 想请你帮她算算，最终排行榜上队伍的排名情况可能有多少种。", "inputFormat": "第一行，包含两个正整数 $n, m$，表示队伍数量与它们封榜后的总过题数。  \n第二行，包含 $n$ 个正整数，表示 $a_i$。", "outputFormat": "仅一行，一个整数，表示答案。", "hint": "**【样例 #1 解释】**\n\n1. 最终排名：$1, 3, 2$，滚榜情况（按公布顺序，下同）：$b_2 = 0$，$b_3 = 2$，$b_1 = 4$。\n\n2. 最终排名：$2, 1, 3$，滚榜情况：$b_3 = 2$，$b_1 = 2$，$b_2 = 2$。\n\n3. 最终排名：$2, 3, 1$，滚榜情况：$b_1 = 1$，$b_3 = 2$，$b_2 = 3$。\n\n4. 最终排名：$3, 1, 2$，滚榜情况：$b_2 = 0$，$b_1 = 2$，$b_3 = 4$。\n\n5. 最终排名：$3, 2, 1$，滚榜情况：$b_1 = 1$，$b_2 = 1$，$b_3 = 4$。\n\n---\n\n**【数据范围】**\n\n对于所有测试数据：$1 \\le n \\le 13$，$1 \\le m \\le 500$，$0 \\le a_i \\le {10}^4$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\le$ | $m \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $2$ | $10$ |\n| $3 \\sim 5$ | $3$ | $10$ |\n| $6 \\sim 8$ | $8$ | $100$ |\n| $9 \\sim 12$ | $10$ | $200$ |\n| $13 \\sim 16$ | $12$ | $300$ |\n| $17 \\sim 20$ | $13$ | $500$ |", "locale": "zh-CN"}}}
