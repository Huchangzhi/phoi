{"pid": "P11304", "type": "P", "difficulty": 0, "samples": [["7\n154 39 225 99 151 145 -1", "011000110010100101100110000000000000111011"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "提交答案", "Special Judge", "构造", "COTS（克罗地亚）"], "title": "[COTS 2016] 破译 DeCSS", "background": "译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D1T1。\n\n提交答案时，采用文件名为 $\\texttt{decss-*.out}$。", "description": "\n**这是一道提交答案题。** 输入文件可以在附件中下载。\n\n### 基本定义\n\n**内容扰乱系统**（Content Scramble System，CSS）是一种对 DVD 进行加密的技术，以期保护版权。为了方便做题，此题对 CSS 进行了一定的简化。\n\n**密钥** $k$ 是一个长度为 $42$ 的 $\\texttt{01}$ 序列 $k_1,k_2,\\cdots,k_{42}$。\n\n**明文**、**密文**是由 $n$ 个字节组成的序列。\n\n**密钥流** $T(k)$ 同样是由 $n$ 个字节组成的序列。\n\n加密时，首先基于密钥 $k$ 生成密钥流 $T(k)$，然后将密钥流与明文按位异或，即得到密文。如果已知密文和部分明文，即可得到部分密钥流。\n\n在本题中，你需要基于部分密钥流 $T(k)$ 确定一个可能的密钥 $k$。\n\n---\n\n### LFSR\n\n从密钥生成密钥流使用了线性反馈移位寄存器（LFSR）。\n\nLFSR 的状态由 $m$ 位二进制位 $b_1\\sim b_m$ 组成。定义**反馈位置集** $S\\subseteq \\{1,2,\\cdots,m\\}$，它控制输出时会基于哪些位进行运算。\n\n在一个**周期**内，LFSR 会做如下的事情：\n\n- 输出 $\\displaystyle b=\\bigoplus_{i\\in S} b_i$，其中 $\\oplus$ 表示按位异或运算。\n- 对于 $1\\le i\\lt m$，**同时**令 $b_i\\gets b_{i+1}$，并让 $b_m\\gets b$。\n\nLFSR 的一**步**由 $8$ 个周期组成，一步输出一个字节。令这 $8$ 个周期输出的位为 $i_1\\sim i_8$，则该步输出的字节为 $(\\overline{i_8i_7i_6i_5i_4i_3i_2i_1})_2$。\n\nCSS 使用的 LFSR 有：\n\n| 名称 | $m=$ | $S=$ | 初始状态 |\n| :--: | :--: | :--: | :--: |\n| LFSR17 | $17$ | $\\{1,15\\}$ | $k_1,k_2,\\cdots,k_{17}$ |\n| LFSR25 | $25$ | $\\{1,4,5,13\\}$ | $k_{18},k_{19},\\cdots,k_{42}$ |\n\n------\n\n### 生成密钥流\n\n接下来介绍 $T(k)$ 的生成方法。\n\n1. 用 $k$ 将 LFSR17 和 LFSR25 初始化；\n2. $c\\gets 0$；\n3. 重复以下操作 $n$ 次：\n    - 令 $x$ 为 LFSR17 执行一步的结果；\n    - 令 $y$ 为 LFSR25 执行一步的结果；\n    - 令 $z\\gets x+y+c$；\n    - $c\\gets \\lfloor z/256\\rfloor,z\\gets z\\bmod 256$；\n    - 将 $z$ 新增到密钥流的末尾。\n\n给定部分密钥流，确定一个可能的密钥 $k$，使得它能够生成符合条件的密钥流。", "inputFormat": "\n第一行，一个正整数 $n$。\n\n第二行，$n$ 个整数 $t_1,t_2,\\cdots,t_n$，描述一个密钥流。\n\n- 如果 $t_i=-1$，表示 $t_i$ 未知。否则 $t_i\\in [0,256)$。", "outputFormat": "\n输出一行一个长度为 $42$ 的 $\\texttt{01}$ 串，表示密钥 $k$。\n\n**数据保证有解。**\n输出任意一组合法解均可。", "hint": "\n\n#### 评分方式\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 500$，**保证有解**。\n\n令 $m$ 表示已知的密钥流中元素的个数。\n\n| 输入文件名 | $n\\le $ |  $m\\le $ |得分 |  \n| :--: | :--: | :--: | :--: |  \n| $\\texttt{decss-1.in}$ | $ 20 $ |  $20$ |  $ 8 $   |  \n| $\\texttt{decss-2.in}$ | $ 25 $ |  $21$ |  ^   |  \n| $\\texttt{decss-3.in}$ | $ 20 $ |  $8$ | ^  |  \n| $\\texttt{decss-4.in}$ | $ 30 $ |  $10$ | ^  |  \n| $\\texttt{decss-5.in}$ | $ 31 $ |  $8$ | $ 9 $   |  \n| $\\texttt{decss-6.in}$ | $ 30 $ |  $20$ | ^   |  \n| $\\texttt{decss-7.in}$ | $ 200 $ | $9$ | $ 12 $   |  \n| $\\texttt{decss-8.in}$ | $ 300 $ | $12$ | ^   |  \n| $\\texttt{decss-9.in}$ | $ 500 $ | ^ | $ 13 $   |  \n| $\\texttt{decss-10.in}$ | ^ | ^ | ^  |  \n\n#### 样例解释\n\n\n| 步数 | 周期 | LFSR17 | LFSR25 | $x$ | $y$ | $c$ | $z$ |\n| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |\n| 初态 |  | 1 1100 0110 0101 0010 | 1 1001 1000 0000 0000 0011 1011 |  |  | $0$ |  |\n|  | 1 | 1 1000 1100 1010 0100 | 1 0011 0000 0000 0000 0111 0110 |  |  |  |  |\n|  | 2 | 1 0001 1001 0100 1000 | 0 0110 0000 0000 0000 1110 1101 |  |  |  |  |\n|  | 3 | 0 0011 0010 1001 0001 | 0 1100 0000 0000 0001 1101 1011 |  |  |  |  |\n|  | 4 | 0 0110 0101 0010 0010 | 1 1000 0000 0000 0011 1011 0110 |  |  |  |  |\n|  | 5 | 0 1100 1010 0100 0100 | 1 0000 0000 0000 0111 0110 1101 |  |  |  |  |\n|  | 6 | 1 1001 0100 1000 1001 | 0 0000 0000 0000 1110 1101 1011 |  |  |  |  |\n|  | 7 | 1 0010 1001 0001 0011 | 0 0000 0000 0001 1101 1011 0110 |  |  |  |  |\n|  | 8 | 0 0101 0010 0010 0111 | 0 0000 0000 0011 1011 0110 1101 |  |  |  |  |\n| 1 |  |  |  | $228$ | $182$ | $1$ | $154$ |\n|  | 9 | 0 1010 0100 0100 1111 | 0 0000 0000 0111 0110 1101 1011 |  |  |  |  |\n|  | 10 | 1 0100 1000 1001 1111 | 0 0000 0000 1110 1101 1011 0111 |  |  |  |  |\n|  | 11 | 0 1001 0001 0011 1110 | 0 0000 0001 1101 1011 0110 1110 |  |  |  |  |\n|  | 12 | 1 0010 0010 0111 1101 | 0 0000 0011 1011 0110 1101 1101 |  |  |  |  |\n|  | 13 | 0 0100 0100 1111 1010 | 0 0000 0111 0110 1101 1011 1011 |  |  |  |  |\n|  | 14 | 0 1000 1001 1111 0100 | 0 0000 1110 1101 1011 0111 0110 |  |  |  |  |\n|  | 15 | 1 0001 0011 1110 1001 | 0 0001 1101 1011 0110 1110 1101 |  |  |  |  |\n|  | 16 | 0 0010 0111 1101 0011 | 0 0011 1011 0110 1101 1101 1010 |  |  |  |  |\n| 2 |  |  |  | $203$ | $91$ | $1$ | $39$ |\n|  | 17 | 0 0100 1111 1010 0110 | 0 0111 0110 1101 1011 1011 0100 |  |  |  |  |\n|  | 18 | 0 1001 1111 0100 1101 | 0 1110 1101 1011 0111 0110 1001 |  |  |  |  |\n|  | 19 | 1 0011 1110 1001 1011 | 1 1101 1011 0110 1110 1101 0010 |  |  |  |  |\n|  | 20 | 0 0111 1101 0011 0111 | 1 1011 0110 1101 1101 1010 0100 |  |  |  |  |\n|  | 21 | 0 1111 1010 0110 1111 | 1 0110 1101 1011 1011 0100 1000 |  |  |  |  |\n|  | 22 | 1 1111 0100 1101 1111 | 0 1101 1011 0111 0110 1001 0001 |  |  |  |  |\n|  | 23 | 1 1110 1001 1011 1110 | 1 1011 0110 1110 1101 0010 0010 |  |  |  |  |\n|  | 24 | 1 1101 0011 0111 1100 | 1 0110 1101 1101 1010 0100 0101 |  |  |  |  |\n| 3 |  |  |  | $62$ | $162$ | $0$ | $225$ |\n|  | 25 | 1 1010 0110 1111 1000 | 0 1101 1011 1011 0100 1000 1011 |  |  |  |  |\n|  | 26 | 1 0100 1101 1111 0001 | 1 1011 0111 0110 1001 0001 0110 |  |  |  |  |\n|  | 27 | 0 1001 1011 1110 0011 | 1 0110 1110 1101 0010 0010 1101 |  |  |  |  |\n|  | 28 | 1 0011 0111 1100 0110 | 0 1101 1101 1010 0100 0101 1011 |  |  |  |  |\n|  | 29 | 0 0110 1111 1000 1100 | 1 1011 1011 0100 1000 1011 0111 |  |  |  |  |\n|  | 30 | 0 1101 1111 0001 1001 | 1 0111 0110 1001 0001 0110 1111 |  |  |  |  |\n|  | 31 | 1 1011 1110 0011 0010 | 0 1110 1101 0010 0010 1101 1110 |  |  |  |  |\n|  | 32 | 1 0111 1100 0110 0101 | 1 1101 1010 0100 0101 1011 1101 |  |  |  |  |\n| 4 |  |  |  | $166$ | $189$ | $1$ | $99$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2016] 破译 DeCSS", "background": "译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D1T1。\n\n提交答案时，采用文件名为 $\\texttt{decss-*.out}$。", "description": "\n**这是一道提交答案题。** 输入文件可以在附件中下载。\n\n### 基本定义\n\n**内容扰乱系统**（Content Scramble System，CSS）是一种对 DVD 进行加密的技术，以期保护版权。为了方便做题，此题对 CSS 进行了一定的简化。\n\n**密钥** $k$ 是一个长度为 $42$ 的 $\\texttt{01}$ 序列 $k_1,k_2,\\cdots,k_{42}$。\n\n**明文**、**密文**是由 $n$ 个字节组成的序列。\n\n**密钥流** $T(k)$ 同样是由 $n$ 个字节组成的序列。\n\n加密时，首先基于密钥 $k$ 生成密钥流 $T(k)$，然后将密钥流与明文按位异或，即得到密文。如果已知密文和部分明文，即可得到部分密钥流。\n\n在本题中，你需要基于部分密钥流 $T(k)$ 确定一个可能的密钥 $k$。\n\n---\n\n### LFSR\n\n从密钥生成密钥流使用了线性反馈移位寄存器（LFSR）。\n\nLFSR 的状态由 $m$ 位二进制位 $b_1\\sim b_m$ 组成。定义**反馈位置集** $S\\subseteq \\{1,2,\\cdots,m\\}$，它控制输出时会基于哪些位进行运算。\n\n在一个**周期**内，LFSR 会做如下的事情：\n\n- 输出 $\\displaystyle b=\\bigoplus_{i\\in S} b_i$，其中 $\\oplus$ 表示按位异或运算。\n- 对于 $1\\le i\\lt m$，**同时**令 $b_i\\gets b_{i+1}$，并让 $b_m\\gets b$。\n\nLFSR 的一**步**由 $8$ 个周期组成，一步输出一个字节。令这 $8$ 个周期输出的位为 $i_1\\sim i_8$，则该步输出的字节为 $(\\overline{i_8i_7i_6i_5i_4i_3i_2i_1})_2$。\n\nCSS 使用的 LFSR 有：\n\n| 名称 | $m=$ | $S=$ | 初始状态 |\n| :--: | :--: | :--: | :--: |\n| LFSR17 | $17$ | $\\{1,15\\}$ | $k_1,k_2,\\cdots,k_{17}$ |\n| LFSR25 | $25$ | $\\{1,4,5,13\\}$ | $k_{18},k_{19},\\cdots,k_{42}$ |\n\n------\n\n### 生成密钥流\n\n接下来介绍 $T(k)$ 的生成方法。\n\n1. 用 $k$ 将 LFSR17 和 LFSR25 初始化；\n2. $c\\gets 0$；\n3. 重复以下操作 $n$ 次：\n    - 令 $x$ 为 LFSR17 执行一步的结果；\n    - 令 $y$ 为 LFSR25 执行一步的结果；\n    - 令 $z\\gets x+y+c$；\n    - $c\\gets \\lfloor z/256\\rfloor,z\\gets z\\bmod 256$；\n    - 将 $z$ 新增到密钥流的末尾。\n\n给定部分密钥流，确定一个可能的密钥 $k$，使得它能够生成符合条件的密钥流。", "inputFormat": "\n第一行，一个正整数 $n$。\n\n第二行，$n$ 个整数 $t_1,t_2,\\cdots,t_n$，描述一个密钥流。\n\n- 如果 $t_i=-1$，表示 $t_i$ 未知。否则 $t_i\\in [0,256)$。", "outputFormat": "\n输出一行一个长度为 $42$ 的 $\\texttt{01}$ 串，表示密钥 $k$。\n\n**数据保证有解。**\n输出任意一组合法解均可。", "hint": "\n\n#### 评分方式\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 500$，**保证有解**。\n\n令 $m$ 表示已知的密钥流中元素的个数。\n\n| 输入文件名 | $n\\le $ |  $m\\le $ |得分 |  \n| :--: | :--: | :--: | :--: |  \n| $\\texttt{decss-1.in}$ | $ 20 $ |  $20$ |  $ 8 $   |  \n| $\\texttt{decss-2.in}$ | $ 25 $ |  $21$ |  ^   |  \n| $\\texttt{decss-3.in}$ | $ 20 $ |  $8$ | ^  |  \n| $\\texttt{decss-4.in}$ | $ 30 $ |  $10$ | ^  |  \n| $\\texttt{decss-5.in}$ | $ 31 $ |  $8$ | $ 9 $   |  \n| $\\texttt{decss-6.in}$ | $ 30 $ |  $20$ | ^   |  \n| $\\texttt{decss-7.in}$ | $ 200 $ | $9$ | $ 12 $   |  \n| $\\texttt{decss-8.in}$ | $ 300 $ | $12$ | ^   |  \n| $\\texttt{decss-9.in}$ | $ 500 $ | ^ | $ 13 $   |  \n| $\\texttt{decss-10.in}$ | ^ | ^ | ^  |  \n\n#### 样例解释\n\n\n| 步数 | 周期 | LFSR17 | LFSR25 | $x$ | $y$ | $c$ | $z$ |\n| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |\n| 初态 |  | 1 1100 0110 0101 0010 | 1 1001 1000 0000 0000 0011 1011 |  |  | $0$ |  |\n|  | 1 | 1 1000 1100 1010 0100 | 1 0011 0000 0000 0000 0111 0110 |  |  |  |  |\n|  | 2 | 1 0001 1001 0100 1000 | 0 0110 0000 0000 0000 1110 1101 |  |  |  |  |\n|  | 3 | 0 0011 0010 1001 0001 | 0 1100 0000 0000 0001 1101 1011 |  |  |  |  |\n|  | 4 | 0 0110 0101 0010 0010 | 1 1000 0000 0000 0011 1011 0110 |  |  |  |  |\n|  | 5 | 0 1100 1010 0100 0100 | 1 0000 0000 0000 0111 0110 1101 |  |  |  |  |\n|  | 6 | 1 1001 0100 1000 1001 | 0 0000 0000 0000 1110 1101 1011 |  |  |  |  |\n|  | 7 | 1 0010 1001 0001 0011 | 0 0000 0000 0001 1101 1011 0110 |  |  |  |  |\n|  | 8 | 0 0101 0010 0010 0111 | 0 0000 0000 0011 1011 0110 1101 |  |  |  |  |\n| 1 |  |  |  | $228$ | $182$ | $1$ | $154$ |\n|  | 9 | 0 1010 0100 0100 1111 | 0 0000 0000 0111 0110 1101 1011 |  |  |  |  |\n|  | 10 | 1 0100 1000 1001 1111 | 0 0000 0000 1110 1101 1011 0111 |  |  |  |  |\n|  | 11 | 0 1001 0001 0011 1110 | 0 0000 0001 1101 1011 0110 1110 |  |  |  |  |\n|  | 12 | 1 0010 0010 0111 1101 | 0 0000 0011 1011 0110 1101 1101 |  |  |  |  |\n|  | 13 | 0 0100 0100 1111 1010 | 0 0000 0111 0110 1101 1011 1011 |  |  |  |  |\n|  | 14 | 0 1000 1001 1111 0100 | 0 0000 1110 1101 1011 0111 0110 |  |  |  |  |\n|  | 15 | 1 0001 0011 1110 1001 | 0 0001 1101 1011 0110 1110 1101 |  |  |  |  |\n|  | 16 | 0 0010 0111 1101 0011 | 0 0011 1011 0110 1101 1101 1010 |  |  |  |  |\n| 2 |  |  |  | $203$ | $91$ | $1$ | $39$ |\n|  | 17 | 0 0100 1111 1010 0110 | 0 0111 0110 1101 1011 1011 0100 |  |  |  |  |\n|  | 18 | 0 1001 1111 0100 1101 | 0 1110 1101 1011 0111 0110 1001 |  |  |  |  |\n|  | 19 | 1 0011 1110 1001 1011 | 1 1101 1011 0110 1110 1101 0010 |  |  |  |  |\n|  | 20 | 0 0111 1101 0011 0111 | 1 1011 0110 1101 1101 1010 0100 |  |  |  |  |\n|  | 21 | 0 1111 1010 0110 1111 | 1 0110 1101 1011 1011 0100 1000 |  |  |  |  |\n|  | 22 | 1 1111 0100 1101 1111 | 0 1101 1011 0111 0110 1001 0001 |  |  |  |  |\n|  | 23 | 1 1110 1001 1011 1110 | 1 1011 0110 1110 1101 0010 0010 |  |  |  |  |\n|  | 24 | 1 1101 0011 0111 1100 | 1 0110 1101 1101 1010 0100 0101 |  |  |  |  |\n| 3 |  |  |  | $62$ | $162$ | $0$ | $225$ |\n|  | 25 | 1 1010 0110 1111 1000 | 0 1101 1011 1011 0100 1000 1011 |  |  |  |  |\n|  | 26 | 1 0100 1101 1111 0001 | 1 1011 0111 0110 1001 0001 0110 |  |  |  |  |\n|  | 27 | 0 1001 1011 1110 0011 | 1 0110 1110 1101 0010 0010 1101 |  |  |  |  |\n|  | 28 | 1 0011 0111 1100 0110 | 0 1101 1101 1010 0100 0101 1011 |  |  |  |  |\n|  | 29 | 0 0110 1111 1000 1100 | 1 1011 1011 0100 1000 1011 0111 |  |  |  |  |\n|  | 30 | 0 1101 1111 0001 1001 | 1 0111 0110 1001 0001 0110 1111 |  |  |  |  |\n|  | 31 | 1 1011 1110 0011 0010 | 0 1110 1101 0010 0010 1101 1110 |  |  |  |  |\n|  | 32 | 1 0111 1100 0110 0101 | 1 1101 1010 0100 0101 1011 1101 |  |  |  |  |\n| 4 |  |  |  | $166$ | $189$ | $1$ | $99$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P11305", "type": "P", "difficulty": 6, "samples": [["abcxyzabc\n", "3"], ["bbcdbcbbcbadadda", "5"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "二分", "哈希 hashing", "后缀数组 SA", "COTS（克罗地亚）"], "title": "[COTS 2016] 删除 Brisanje", "background": "\n译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D1T2。$\\texttt{4s,0.5G}$。\n\n\n为了卡掉理论复杂度较劣的解法，在 Subtask 0 添加了 Hack 数据（#35~#39，感谢 @Hoks 和 @N_z_），同时将时限改为 1.5s。欢迎对数据的加强。\n", "description": "\n给定字符串 $s$。\n\n定义 $s(l,r)$ 为 $s$ 第 $l\\sim r$ 个字符组成的字符串。\n\n定义 $t(l,r)$ 为 $s$ 删除第 $l\\sim r$ 个字符后得到的字符串。\n\n找到最长的区间 $[l,r]$，使得 $s(l,r)$ 在 $t(l,r)$ 中作为子串出现。\n", "inputFormat": "一行一个字符串 $s$。\n", "outputFormat": "输出一个整数，表示最长可能的区间长度。  \n", "hint": "\n#### 样例解释\n\n不难注意到 $\\texttt{bbcdbcb\\underline{bcbad}adda} \\to \\texttt{bbcd\\underline{bcbad}da}$。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le |s| \\le 10^5$；\n- $s$ 中只有小写字母。\n\n\n| 子任务编号 | $\\vert s\\vert \\in $ | 得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ [1,400] $    |   $ 16 $   |  \n| $ 2 $    | $ (400,5000] $   |  $ 24 $   |  \n| $ 3 $    | $ (5000,10^5]$ | $ 60 $   |  \n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2016] 删除 Brisanje", "background": "\n译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D1T2。$\\texttt{4s,0.5G}$。\n\n\n为了卡掉理论复杂度较劣的解法，在 Subtask 0 添加了 Hack 数据（#35~#39，感谢 @Hoks 和 @N_z_），同时将时限改为 1.5s。欢迎对数据的加强。\n", "description": "\n给定字符串 $s$。\n\n定义 $s(l,r)$ 为 $s$ 第 $l\\sim r$ 个字符组成的字符串。\n\n定义 $t(l,r)$ 为 $s$ 删除第 $l\\sim r$ 个字符后得到的字符串。\n\n找到最长的区间 $[l,r]$，使得 $s(l,r)$ 在 $t(l,r)$ 中作为子串出现。\n", "inputFormat": "一行一个字符串 $s$。\n", "outputFormat": "输出一个整数，表示最长可能的区间长度。  \n", "hint": "\n#### 样例解释\n\n不难注意到 $\\texttt{bbcdbcb\\underline{bcbad}adda} \\to \\texttt{bbcd\\underline{bcbad}da}$。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le |s| \\le 10^5$；\n- $s$ 中只有小写字母。\n\n\n| 子任务编号 | $\\vert s\\vert \\in $ | 得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ [1,400] $    |   $ 16 $   |  \n| $ 2 $    | $ (400,5000] $   |  $ 24 $   |  \n| $ 3 $    | $ (5000,10^5]$ | $ 60 $   |  \n\n", "locale": "zh-CN"}}}
{"pid": "P11306", "type": "P", "difficulty": 6, "samples": [["6 5\n2 3\n4 0\n5 6\n0 0\n0 0\n0 0\n4 1 3 2 2 5\n3 3\n2 2\n3 5\n5 4\n6 1", "4\n5\n5\n6\n4"], ["8 10\n4 5\n8 0\n0 0\n3 7\n0 6\n0 0\n2 0\n0 0\n7 0 9 3 6 0 6 2\n3 0\n4 0\n8 2\n2 3\n7 6\n1 6\n5 7\n6 9\n1 1\n1 7", "3\n3\n3\n6\n6\n6\n6\n8\n7\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "线段树", "倍增", "树状数组", "树的遍历", "树链剖分", "COTS（克罗地亚）"], "title": "[COTS 2016] 搜索树 Jelka", "background": "译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D2T1。$\\texttt{1s,0.5G}$。\n", "description": "\n给定一棵 $n$ 个点的二叉树，点有点权，其中 $1$ 号点为根节点。\n\n$m$ 次操作修改某个点的点权。在每次修改后询问：这棵树上有多少个节点的子树（包含自身）是二叉搜索树（BST）？\n\n我们给定 BST 的定义：\n\n- 含有一个节点的树是 BST。\n- 对于大于一个节点的树，它是 BST 当且仅当：\n\t- 根节点的左子树为空，或者左子树是二叉搜索树，且左子树内所有点的点权均**不大于**根节点的点权；\n   - 根节点的右子树为空，或者右子树是二叉搜索树，且右子树内所有点的点权均**不小于**根节点的点权。\n\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行两个整数 $l_i,r_i$，表示 $i$ 号点的左儿子和右儿子编号。\n- 特别地，若不存在，则为 $0$。\n\n接下来一行，$n$ 个整数 $a_1,\\cdots,a_n$，表示每个点的点权。\n\n接下来 $m$ 行，每行两个整数 $x,v$，表示一次操作 $a_x\\gets v$。\n", "outputFormat": "输出 $m$ 行 $m$ 个整数，表示答案。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释如图所示。\n\n其中节点内的数字表示 BST 权值，节点外的数字表示节点编号。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yabnaj75.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le n,m\\le 2\\times 10^5$；\n- $0\\le a_i,v\\le 10^9$；\n- 操作和树的形态均合法。\n\n\n| 子任务编号 | $n,m\\le  $ | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $ 5\\, 000$    |  | $ 16 $   |  \n| $ 2 $    | $ 2\\times 10^5 $   | A |  $ 24 $   |  \n| $ 3 $    | $ 2\\times 10^5$ | | $ 60 $   |  \n\n特殊性质 A：$\\forall 1\\le i\\le n$，$l_i=0\\lor r_i=0$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2016] 搜索树 Jelka", "background": "译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D2T1。$\\texttt{1s,0.5G}$。\n", "description": "\n给定一棵 $n$ 个点的二叉树，点有点权，其中 $1$ 号点为根节点。\n\n$m$ 次操作修改某个点的点权。在每次修改后询问：这棵树上有多少个节点的子树（包含自身）是二叉搜索树（BST）？\n\n我们给定 BST 的定义：\n\n- 含有一个节点的树是 BST。\n- 对于大于一个节点的树，它是 BST 当且仅当：\n\t- 根节点的左子树为空，或者左子树是二叉搜索树，且左子树内所有点的点权均**不大于**根节点的点权；\n   - 根节点的右子树为空，或者右子树是二叉搜索树，且右子树内所有点的点权均**不小于**根节点的点权。\n\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行两个整数 $l_i,r_i$，表示 $i$ 号点的左儿子和右儿子编号。\n- 特别地，若不存在，则为 $0$。\n\n接下来一行，$n$ 个整数 $a_1,\\cdots,a_n$，表示每个点的点权。\n\n接下来 $m$ 行，每行两个整数 $x,v$，表示一次操作 $a_x\\gets v$。\n", "outputFormat": "输出 $m$ 行 $m$ 个整数，表示答案。\n", "hint": "\n#### 样例解释\n\n样例 $1$ 解释如图所示。\n\n其中节点内的数字表示 BST 权值，节点外的数字表示节点编号。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yabnaj75.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le n,m\\le 2\\times 10^5$；\n- $0\\le a_i,v\\le 10^9$；\n- 操作和树的形态均合法。\n\n\n| 子任务编号 | $n,m\\le  $ | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $ 5\\, 000$    |  | $ 16 $   |  \n| $ 2 $    | $ 2\\times 10^5 $   | A |  $ 24 $   |  \n| $ 3 $    | $ 2\\times 10^5$ | | $ 60 $   |  \n\n特殊性质 A：$\\forall 1\\le i\\le n$，$l_i=0\\lor r_i=0$。\n\n", "locale": "zh-CN"}}}
{"pid": "P11307", "type": "P", "difficulty": 6, "samples": [["4 4\n2 4 1 0\n1 2 3\n1 3 4\n3 1 1\n4 1 2", "9"], ["6 8\n3 5 8 2 9 4\n3 1 2\n6 3 3\n3 1 1\n6 2 2\n2 3 6\n3 1 2\n3 2 2\n4 1 1", "46"], ["12 10\n9 2 7 5 5 9 3 6 5 7 8 8\n6 3 3\n9 1 1\n6 10 11\n1 3 11\n5 6 12\n3 5 5\n12 3 7\n6 1 4\n4 6 6\n10 4 6", "126"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "线段树", "生成树", "ST 表", "COTS（克罗地亚）"], "title": "[COTS 2016] 建造费 Pristojba", "background": "译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D2T2。$\\texttt{5s,0.5G}$。\n", "description": "\n有一张 $n$ 个点的简单无向图 $G$。\n\n给定数列 $p$，边 $(i,j)$（$i\\neq j$）的边权为 $p_i+p_j$。\n\n然而，不是所有 $i,j$ 间都有边连接。给定 $m$ 个三元组形如 $x,l,r$，表示「$\\forall l\\le y\\le r$，$x,y$ 间有边连接」。\n\n求出这张无向图的[最小生成树](https://www.luogu.com.cn/user/398152)的边权和。\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n第二行，$n$ 个非负整数 $p_1,\\cdots,p_n$。\n\n接下来 $m$ 行，每行三个正整数 $x,l,r$。\n\n**不保证三元组两两不同**，但保证 $x\\not\\in [l,r]$。\n\n**输入数据保证有解。**", "outputFormat": "输出一行一个整数，表示答案。\n", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le n,m\\le  10^5$；\n- $0\\le p_i\\le 10^6$；\n- $1\\le x\\le n$；\n- $1\\le l\\le r\\le n$，$x\\not\\in [l,r]$；\n- 存在一组解。\n\n\n| 子任务编号 | $n,m\\le  $ |  得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ 10^3$  |   $ 20 $   |  \n| $ 2 $    | $ 10^5 $  | $ 80 $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2016] 建造费 Pristojba", "background": "译自 [Izborne Pripreme 2016 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2016/) D2T2。$\\texttt{5s,0.5G}$。\n", "description": "\n有一张 $n$ 个点的简单无向图 $G$。\n\n给定数列 $p$，边 $(i,j)$（$i\\neq j$）的边权为 $p_i+p_j$。\n\n然而，不是所有 $i,j$ 间都有边连接。给定 $m$ 个三元组形如 $x,l,r$，表示「$\\forall l\\le y\\le r$，$x,y$ 间有边连接」。\n\n求出这张无向图的[最小生成树](https://www.luogu.com.cn/user/398152)的边权和。\n", "inputFormat": "\n第一行，两个正整数 $n,m$。\n\n第二行，$n$ 个非负整数 $p_1,\\cdots,p_n$。\n\n接下来 $m$ 行，每行三个正整数 $x,l,r$。\n\n**不保证三元组两两不同**，但保证 $x\\not\\in [l,r]$。\n\n**输入数据保证有解。**", "outputFormat": "输出一行一个整数，表示答案。\n", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le n,m\\le  10^5$；\n- $0\\le p_i\\le 10^6$；\n- $1\\le x\\le n$；\n- $1\\le l\\le r\\le n$，$x\\not\\in [l,r]$；\n- 存在一组解。\n\n\n| 子任务编号 | $n,m\\le  $ |  得分 |  \n| :--: | :--: | :--: | \n| $ 1 $    | $ 10^3$  |   $ 20 $   |  \n| $ 2 $    | $ 10^5 $  | $ 80 $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11308", "type": "P", "difficulty": 2, "samples": [["10\n3 3 3 1\n3 3 4 5\n4 4 4 12\n4 4 3 8\n10 10 7 34\n10 10 8 34\n12 11 11 12\n12 11 12 12\n9 9 1 80\n9 9 6 70", "Together\nDivide\nChance\nChance\nTogether\nChance\nChance\nDivide\nTogether\nChance"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "鸽笼原理", "洛谷月赛", "分类讨论"], "title": "茫茫的不归路", "background": "NoitaCesaE 的匹配机制总是很奇怪，小 $ \\zeta $ 总是被匹配到与他的其他车队成员不同的阵营，这时他就没法享受被优质队友带飞的快感了。", "description": "具体的，有 $ n $ 个阵营，每个阵营最多 $ m $ 人。已经有 $ p $ 个人被分配了所属的阵营，且此时每个阵营人数均不超限。\n\n小 $ \\zeta $ 的 $ k $ 人车队进入了这个房间，在不改变已经进入的 $ p $ 个人的所属阵营的情况下，如果他们能一起进入同一个阵营使得阵营人数不超过限制，那么就会进入同一个阵营，否则车队就分散进不同的阵营了。\n\n请求出对于给定的 $ n,m,k,p $，任意的已经进入的 $ p $ 个人的阵营归属情况下，小 $ \\zeta $ 的车队能够进入同一个阵营的**可能性情况**（具体参见输出格式）。", "inputFormat": "**本题多测**，第一行输入一个整数 $ T $，代表这个测试点内有 $ T $ 组数据。\n\n对于每组数据：\n\n一行四个整数 $ n,m,k,p $，含义见题目描述。", "outputFormat": "对于每组数据，输出以下三种情况之一：\n\n* `Together` 表示无论已经进入的人如何归属，这个车队一定能进入同一个阵营；\n\n* `Chance` 表示存在一部分已经进入的人的阵营归属情况，使得这个车队的所有人进入同一个阵营；\n\n* `Divide` 表示无论已经进入的人如何归属，这个车队的所有人必然进入不同的阵营。", "hint": "**【样例 1 解释】**\n\n对于第一组数据，无论这个人在哪个阵营，都有至少两个阵营为空，因此一定可以容纳这个 $ 3 $ 人车队，故输出 `Together`。\n\n**【数据规模与约定】**\n\n对于 $ 40\\% $ 的数据，$ T \\le 10 $，$ n,m \\le 4 $，$ k \\le 6 $，$ p \\le 10 $。\n\n对于另 $ 20\\% $ 的数据，保证输出没有 `Together`。\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 1000 $，$ 1 \\le n,m \\le 10^4 $，$ 1 \\le k \\le 10^8 $，$ 0 \\le p \\le 10^8 $，$ p+k \\le n \\times m $。", "locale": "zh-CN", "translations": {"en": {"title": "The Endless Road of No Return", "background": "NoitaCesaE’s matchmaking system has always been peculiar. Little ζ frequently finds himself assigned to teams different from his squad members, depriving him of the joy of being carried by his skilled teammates.", "description": "Specifically, there are $ n $ teams, each with a maximum capacity of $ m $ players. Currently, $ p $ players have already been assigned to teams, with no team exceeding its capacity limit.\n\nLittle $ \\zeta $'s squad of $ k $ players enters the room. Without changing the team assignments of the $ p $ existing players, if they can all join the same team without exceeding the team capacity limit, they will do so. Otherwise, the squad will be split across different teams.\n\nGiven n, m, k, p, determine the possibility scenario for Little $ \\zeta $'s squad to join the same team, considering all possible team distributions of the $ p $ existing players (see output format for details).", "inputFormat": "Multiple test cases. The first line contains an integer T, representing the number of test cases.\n\nFor each test case:\n\nOne line containing four integers $ n, m, k, p $, as described in the problem.", "outputFormat": "For each test case, output one of these three possibilities:\n\n* `Together` indicates the squad will definitely be able to join the same team regardless of existing player distribution;\n* `Chance` indicates there exist some distributions of existing players where the squad can join the same team;\n* `Divide` indicates the squad will inevitably be split across different teams regardless of existing player distribution.", "hint": "**「Sample 1 Explanation」**\n\nFor the first test case, regardless of which team the one existing player is in,\nat least two teams will be empty. \n\nTherefore, a squad of 3 players can definitely\nfit in one team, thus outputting Together.\n\n**「Data Constraints」**\n\n* For 40% of test cases: $ T ≤ 10$，$n, m ≤ 4，k ≤ 6$，$p ≤ 10 $；\n* For another 20% of test cases, the output will not be `Together`.\n* For 100% of test cases: $ 1 ≤ T ≤ 1000$，$1 ≤ n, m ≤ 10^4$，$1 ≤ k ≤ 10^8$，$0 ≤ p ≤ 10^8$，$p + k ≤ n × m $.", "locale": "en"}, "zh-CN": {"title": "茫茫的不归路", "background": "NoitaCesaE 的匹配机制总是很奇怪，小 $ \\zeta $ 总是被匹配到与他的其他车队成员不同的阵营，这时他就没法享受被优质队友带飞的快感了。", "description": "具体的，有 $ n $ 个阵营，每个阵营最多 $ m $ 人。已经有 $ p $ 个人被分配了所属的阵营，且此时每个阵营人数均不超限。\n\n小 $ \\zeta $ 的 $ k $ 人车队进入了这个房间，在不改变已经进入的 $ p $ 个人的所属阵营的情况下，如果他们能一起进入同一个阵营使得阵营人数不超过限制，那么就会进入同一个阵营，否则车队就分散进不同的阵营了。\n\n请求出对于给定的 $ n,m,k,p $，任意的已经进入的 $ p $ 个人的阵营归属情况下，小 $ \\zeta $ 的车队能够进入同一个阵营的**可能性情况**（具体参见输出格式）。", "inputFormat": "**本题多测**，第一行输入一个整数 $ T $，代表这个测试点内有 $ T $ 组数据。\n\n对于每组数据：\n\n一行四个整数 $ n,m,k,p $，含义见题目描述。", "outputFormat": "对于每组数据，输出以下三种情况之一：\n\n* `Together` 表示无论已经进入的人如何归属，这个车队一定能进入同一个阵营；\n\n* `Chance` 表示存在一部分已经进入的人的阵营归属情况，使得这个车队的所有人进入同一个阵营；\n\n* `Divide` 表示无论已经进入的人如何归属，这个车队的所有人必然进入不同的阵营。", "hint": "**【样例 1 解释】**\n\n对于第一组数据，无论这个人在哪个阵营，都有至少两个阵营为空，因此一定可以容纳这个 $ 3 $ 人车队，故输出 `Together`。\n\n**【数据规模与约定】**\n\n对于 $ 40\\% $ 的数据，$ T \\le 10 $，$ n,m \\le 4 $，$ k \\le 6 $，$ p \\le 10 $。\n\n对于另 $ 20\\% $ 的数据，保证输出没有 `Together`。\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 1000 $，$ 1 \\le n,m \\le 10^4 $，$ 1 \\le k \\le 10^8 $，$ 0 \\le p \\le 10^8 $，$ p+k \\le n \\times m $。", "locale": "zh-CN"}}}
{"pid": "P11309", "type": "P", "difficulty": 2, "samples": [["3\n3 0\n9 8 2\n2 1\n10 11\n5 10\n1 2 3 4 5", "27\n22\n25"], ["5\n5 0\n100 101 102 103 104\n5 1\n20 40 50 70 10\n2 103\n30 20\n7 2\n1 2 3 4 5 6 7\n2 10\n1 1", "510\n350\n50\n49\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛", "分类讨论"], "title": "纷飞的樱花雨", "background": "高中的时候做过樱花雨实验，氯化钴遇到氢氧化钠溶液产生的沉淀物就像是一场铺天盖地的樱花雨。\n\n小 $ \\zeta $ 问她，你见过樱花吗？\n\n她抬头摇起眼睛，碎亮的光倒映在少女乌黑的瞳孔里。\n\n她侧头定定看了我一会儿，然后淡淡地笑了。\n\n她说，「我知道你想考武汉大学。」\n\n「我也会去武汉大学。」\n\n「今年九月，你要和我一起去看樱花吗？」", "description": "小 $ \\zeta $ 喜欢观赏樱花。\n\n$ n $ 朵樱花的掉落过程中，第 $ i $ 个掉落的樱花的美丽度为 $ a_i $。\n\n每朵樱花掉落后，樱花掉落的总观赏度会增加这朵樱花及之前所有已经掉落的樱花的美丽度的最大值。\n\n交换**正好** $ k $ 次两朵樱花的掉落顺序（不能交换一朵樱花和本身，但可以重复交换两朵樱花），最大化总观赏度的值。\n\n形式化地讲，给出一个长度为 $ n $ 的数组，进行正好 $ k $ 次交换使得 $ \\sum_{i=1}^n \\max_{j=1}^ia_j $  最大。", "inputFormat": "**本题多测**，第一行输入该测试点内数据组数 $ T $。\n\n对于每组测试数据：\n\n第一行两个整数 $ n $ 和 $ k $，含义见题目描述。\n\n接下来 $ n $ 个空格分隔的整数，第 $ i $ 个代表 $ a_i $ 的初始值。", "outputFormat": "对于每组测试数据，输出一行一个整数表示题目要求的值。", "hint": "**【样例 1 解释】**\n\n第二组数据可以将 $ 10 $ 和 $ 11 $ 交换，观赏度总和为 $ 11+11=22 $。\n\n**【数据规模与约定】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 500 $，$ 2 \\le n \\le 10^5 $，$ 0 \\le k \\le 10^9 $，$ \\sum n \\le 10^6 $，$ 1 \\le a_i \\le 10^9 $。\n\n**本题测试点等分，按测试点加和计分。**\n\n| 测试点编号 | $ n $ | $ k $ |\n|:-:|:-:|:-:|\n| $ 1 $ | $ \\le 50 $ | $ =0 $ |\n| $ 2 $ | - | $ =0 $ |\n| $ 3 \\sim 4 $ | $ \\le 50 $ | $ =1 $ |\n| $ 5 \\sim 7 $ | - | $ =1 $ |\n| $ 8 \\sim 10 $ | - | - |", "locale": "zh-CN", "translations": {"en": {"title": "Dancing Cherry Blossom Rain", "background": "In memoriam tempus scholae - In those halcyon days of high school chemistry, we conducted an ethereal experiment where cobalt chloride met sodium\nhydroxide, creating a precipitate that descended like a magnificent storm of\ncherry blossoms from the heavens.\n\nLittle $ \\zeta $ asked her, “Have you ever witnessed the cherry blossoms?”\n\nShe lifted her gaze, and in her obsidian pupils danced fragments of light, like\nstars caught in midnight pools.\n\nAfter a thoughtful pause, her eyes fixed upon me, a gentle smile gracing her\nlips.\n\n“I know your heart is set on Wuhan University,” she said.\n\n“That’s where I shall be too.”\n\n“This September... would you join me in watching the cherry blossoms?”", "description": "Little $ \\zeta $ adores watching cherry blossoms. During the falling of $ n $ cherry blossoms, the beauty value of the $ i $-th falling blossom is $ a_i $.\n\nAfter each blossom falls, the total viewing score increases by the maximum beauty value among all fallen blossoms (including the current one and all previous ones). You can swap the falling order of two blossoms exactly k times (you cannot swap a blossom with itself, but you can swap the same pair multiple times).\n\nYour task is to maximize the total viewing score.\n\nFormally, given an array $ a $ of length $ n $, perform **exactly** $ k $ swaps to maximize $ \\sum_{i=1}^n\\max_{j=1}^ia_j $.", "inputFormat": "Multiple test cases. \n\nThe first line contains $ T $, the number of test cases.For each test case:\n\nFirst line contains two integers $ n $ and $ k $.\n\nNext line contains n space-separated integers representing the initial values\nof $ a_i $.", "outputFormat": "For each test case, output one line containing a single integer - the maximum possible total viewing score.", "hint": "**「Sample 1 Explanation」**\n\nFor the second test case, you can swap 10 and 11, making the total viewing\nscore 11 + 11 = 22.\n\n**「Data Constraints」**\n\nFor 100% of test cases: $ 1 \\le T \\le 500 $，$ 2 \\le n \\le 10^5 $，$ 0 \\le k \\le 10^9 $，$ \\sum n \\le 10^6 $，$ 1 \\le a_i \\le 10^9 $。\n\n| Test Point ID | $ n $ | $ k $ |\n|:-:|:-:|:-:|\n| $ 1 $ | $ \\le 50 $ | $ =0 $ |\n| $ 2 $ | - | $ =0 $ |\n| $ 3 \\sim 4 $ | $ \\le 50 $ | $ =1 $ |\n| $ 5 \\sim 7 $ | - | $ =1 $ |\n| $ 8 \\sim 10 $ | - | - |", "locale": "en"}, "zh-CN": {"title": "纷飞的樱花雨", "background": "高中的时候做过樱花雨实验，氯化钴遇到氢氧化钠溶液产生的沉淀物就像是一场铺天盖地的樱花雨。\n\n小 $ \\zeta $ 问她，你见过樱花吗？\n\n她抬头摇起眼睛，碎亮的光倒映在少女乌黑的瞳孔里。\n\n她侧头定定看了我一会儿，然后淡淡地笑了。\n\n她说，「我知道你想考武汉大学。」\n\n「我也会去武汉大学。」\n\n「今年九月，你要和我一起去看樱花吗？」", "description": "小 $ \\zeta $ 喜欢观赏樱花。\n\n$ n $ 朵樱花的掉落过程中，第 $ i $ 个掉落的樱花的美丽度为 $ a_i $。\n\n每朵樱花掉落后，樱花掉落的总观赏度会增加这朵樱花及之前所有已经掉落的樱花的美丽度的最大值。\n\n交换**正好** $ k $ 次两朵樱花的掉落顺序（不能交换一朵樱花和本身，但可以重复交换两朵樱花），最大化总观赏度的值。\n\n形式化地讲，给出一个长度为 $ n $ 的数组，进行正好 $ k $ 次交换使得 $ \\sum_{i=1}^n \\max_{j=1}^ia_j $  最大。", "inputFormat": "**本题多测**，第一行输入该测试点内数据组数 $ T $。\n\n对于每组测试数据：\n\n第一行两个整数 $ n $ 和 $ k $，含义见题目描述。\n\n接下来 $ n $ 个空格分隔的整数，第 $ i $ 个代表 $ a_i $ 的初始值。", "outputFormat": "对于每组测试数据，输出一行一个整数表示题目要求的值。", "hint": "**【样例 1 解释】**\n\n第二组数据可以将 $ 10 $ 和 $ 11 $ 交换，观赏度总和为 $ 11+11=22 $。\n\n**【数据规模与约定】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 500 $，$ 2 \\le n \\le 10^5 $，$ 0 \\le k \\le 10^9 $，$ \\sum n \\le 10^6 $，$ 1 \\le a_i \\le 10^9 $。\n\n**本题测试点等分，按测试点加和计分。**\n\n| 测试点编号 | $ n $ | $ k $ |\n|:-:|:-:|:-:|\n| $ 1 $ | $ \\le 50 $ | $ =0 $ |\n| $ 2 $ | - | $ =0 $ |\n| $ 3 \\sim 4 $ | $ \\le 50 $ | $ =1 $ |\n| $ 5 \\sim 7 $ | - | $ =1 $ |\n| $ 8 \\sim 10 $ | - | - |", "locale": "zh-CN"}}}
{"pid": "P11310", "type": "P", "difficulty": 3, "samples": [["1\n4", "3"], ["1\n0", "NO!"]], "limits": {"time": [1000, 1000, 1000], "memory": [524288, 524288, 524288]}, "tags": ["数学", "数论", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「WPOI-R2」无穷的迭代器", "background": "You can also see the pdf at the bottom of the chinese problem statement.", "description": "对于实数 $ r $，记一次操作为：\n\n* 找到不小于 $ r $ 的最小整数即 $ \\lceil r \\rceil $，并将 $ r $ 的值乘上 $ \\lceil r \\rceil $。\n\n现在给定非负整数 $ k $，对于 $ r=k+\\frac{1}{2} $，至少需要对 $ r $ 进行几次操作才能使 $ r $ 为整数？", "inputFormat": "本题多测，第一行一个整数 $ T $ 代表数据组数。\n\n对于每组数据：\n\n一行一个整数 $k$，含义见题目描述。", "outputFormat": "对于每组数据：\n\n若可以变成整数，输出一行一个整数代表你找到的最小的次数。\n\n若不能变成整数，输出一行 `NO!`。", "hint": "**【样例 1 解释】**\n\n| 操作次数 | $ r= $ |\n|:-:|:-:|\n| 初始 | $ \\frac{9}{2} $ |\n| $ 1 $ | $ \\frac{45}{2} $ |\n| $ 2 $ | $ \\frac{1035}{2} $ |\n| $ 3 $ | $ 268065 $ |\n\n**【数据规模与约定】**\n\n**提示：本题采用捆绑计分。**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 20 $，$ 0 \\le k \\le 10^{18} $。\n\n* Subtask 1（15 pts）：$ 1 \\le k \\le 10 $。\n* Subtask 2（40 pts）：$ 1 \\le k \\le 100 $。\n* Subtask 3（45 pts）：$ 0 \\le k \\le 10^{18} $。", "locale": "zh-CN", "translations": {"en": {"title": "Iterators for Infinity", "background": "", "description": "For a real number $ r $, defining an operation as:\n\n* $ r \\leftarrow r\\lceil r \\rceil $（$ \\lceil r \\rceil $ is smallest integer that is not less than r）.\n\nGive a nonnegative integer $ k $，what is the minimum number of operations that need to be performed on $ r=k+0.5 $ to make $ r $ an integer?", "inputFormat": "This is a multiple test problem, where the first line an integer $ T $ represents the\nnumber of data sets.\n\nFor each group of data: One integer $ k $ in the first line, the meaning of which is described in the description section.\n", "outputFormat": "If it can be made into an integer, output one line with an integer representing the smallest number of times you found it.\n\nIf it cannot be made into an integer, output a line `NO!`.", "hint": "**「Sample 1 Explanation」**\n\n| Times | $ r $ |\n|:-:|:-:|\n| $ 0 $ | $ \\frac{9}{2} $ |\n| $ 1 $ | $ \\frac{45}{2} $ |\n| $ 2 $ | $ \\frac{1035}{2} $ |\n| $ 3 $ | $ 268065 $ |\n\n**「Data sizes and conventions」**\n\n**This question is scored as a bundle.**\n\nFor 100% of data, $ 1 \\le T \\le 20 $，$ 0 \\le k \\le 10^{18} $.\n\n* Subtask 1（15 pts）：$ 1 \\le k \\le 10 $。\n* Subtask 2（40 pts）：$ 1 \\le k \\le 100 $。\n* Subtask 3（45 pts）：$ 0 \\le k \\le 10^{18} $。", "locale": "en"}, "zh-CN": {"title": "「WPOI-R2」无穷的迭代器", "background": "You can also see the pdf at the bottom of the chinese problem statement.", "description": "对于实数 $ r $，记一次操作为：\n\n* 找到不小于 $ r $ 的最小整数即 $ \\lceil r \\rceil $，并将 $ r $ 的值乘上 $ \\lceil r \\rceil $。\n\n现在给定非负整数 $ k $，对于 $ r=k+\\frac{1}{2} $，至少需要对 $ r $ 进行几次操作才能使 $ r $ 为整数？", "inputFormat": "本题多测，第一行一个整数 $ T $ 代表数据组数。\n\n对于每组数据：\n\n一行一个整数 $k$，含义见题目描述。", "outputFormat": "对于每组数据：\n\n若可以变成整数，输出一行一个整数代表你找到的最小的次数。\n\n若不能变成整数，输出一行 `NO!`。", "hint": "**【样例 1 解释】**\n\n| 操作次数 | $ r= $ |\n|:-:|:-:|\n| 初始 | $ \\frac{9}{2} $ |\n| $ 1 $ | $ \\frac{45}{2} $ |\n| $ 2 $ | $ \\frac{1035}{2} $ |\n| $ 3 $ | $ 268065 $ |\n\n**【数据规模与约定】**\n\n**提示：本题采用捆绑计分。**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 20 $，$ 0 \\le k \\le 10^{18} $。\n\n* Subtask 1（15 pts）：$ 1 \\le k \\le 10 $。\n* Subtask 2（40 pts）：$ 1 \\le k \\le 100 $。\n* Subtask 3（45 pts）：$ 0 \\le k \\le 10^{18} $。", "locale": "zh-CN"}}}
{"pid": "P11311", "type": "P", "difficulty": 5, "samples": [["5\n1 2 3 4 5", "5"], ["6\n1 2 2 1 2 3", "5"], ["9\n1 2 1 4 1 2 1 1 2", "8"], ["21\n1 2 1 2 1 2 1 2 1 2 3 4 5 6 7 1 2 1 2 1 2", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "排序", "洛谷月赛"], "title": "漫长的小纸带", "background": "You can also see the pdf at the bottom of the chinese problem statement.\n\n小 $ \\zeta $ 是一个喜欢打暴力的 OIer。在每次模拟赛中，他秉持着“10 分钟想不出来正解那就把暴力糊上去”的理念，每次都稳定地拿到很高的分数；平时训练时，他会关注题目的部分分，针对部分分任务进行求解，有时在部分分求解上使用的时间比这个题正解的思考都长。", "description": "小 $ \\zeta $ 经过了几年的暴力训练，暴力水平更是炉火纯青。在 S-PSC 2077 的比赛中，他惊喜的发现第二题《漫长的小纸带》是一道很困难的题目，正适合他这种暴力选手发挥。\n\n这道题目是多测题目，在某个测试点内有 $ n $ 组数据，第 $ i $ 组数据的规模为 $ a_i $。他写出了一个暴力程序，对于一段连续的数据，程序解决这段数据需要消耗的时间为这段数据中出现的不同的 $ a_i $ 的种类数平方。形式化地讲，对于一个从第 $ l $ 组到第 $ r $ 组的连续的数据段，记 $ S=\\{a_i|l \\le i \\le r\\} $，程序需要消耗 $ |S|^2 $ 的时间来一起解决它们。\n\n现在，他给你 $ n $ 和 $ n $ 组数据的规模，请找到一种将这些数据划分成若干个数据段的方案，使得程序消耗的总时间最短。", "inputFormat": "第一行一个整数 $ n $。\n\n接下来一行 $ n $ 个整数 $ a_i $，代表每一组测试数据的规模。", "outputFormat": "输出一个数代表总时间消耗。", "hint": "**【样例 3 解释】**\n\n分段方式为：\n\n* 第一段 $ \\{1\\} $，消耗为 $ 1 $。\n* 第二段 $ \\{2\\} $，消耗为 $ 1 $。\n* 第三段 $ \\{1\\} $，消耗为 $ 1 $。\n* 第四段 $ \\{4\\} $，消耗为 $ 1 $。\n* 第五段 $ \\{1,2,1,1,2\\} $，消耗为 $ 4 $。\n\n故程序总共消耗的时间为 $ 8 $。\n\n**【数据范围】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le n \\le 2 \\times 10^5 $，$ 1 \\le a_i \\le 10^9 $。\n\n**提示：本题开启捆绑测试。**\n\n| 子任务编号 | $ n \\le $ | 特殊性质 | 分数 |\n|:-:|:-:|:-:|:-:|\n| $ 1 $ | $ 10 $ | - | $ 8 $ |\n| $ 2 $ | $ 300 $ | - | $ 8 $ |\n| $ 3 $ | $ 2000 $ | - | $ 16 $ |\n| $ 4 $ | - | A | $ 16 $ |\n| $ 5 $ | - | B | $ 24 $ |\n| $ 6 $ | - | - | $ 28 $ |\n\n特殊性质 A：所有的 $ a_i $ 在 $ [1,10^9] $ 内等概率随机生成，且本子任务只有 $ 1 $ 个测试点。\n\n特殊性质 B：$ 1 \\le a_i \\le 1000 $。\n", "locale": "zh-CN", "translations": {"en": {"title": "The Long Paper Tape", "background": "Little $ ζ $ is an OIer who loves brute force solutions. During each mock competition, he follows the philosophy of “if I can’t figure out the optimal solution in 10 minutes, I’ll submit a brute force one,” consistently achieving high scores.\n\nDuring practice, he pays special attention to partial scores, solving tasks specifically for these partial points. Sometimes, he spends more time optimizing for partial scores than thinking about the complete solution.", "description": "After years of brute force training, Little $ζ$ has mastered the art. During SPSC 2077, he was delighted to find that the second problem, “The Long Paper Tape,” was a challenging one - perfect for a brute force specialist like him.\n\nThis is a multiple test case problem with $ n $ test cases in one test point. The size of the i-th test case is $a_i$. He wrote a brute force program where, for a continuous segment of data, the time needed to solve that segment is the square of the number of different $a_i$ values in that segment. Formally, for a continuous segment from the l-th to the r-th test case, let $ S = \\{a_i|l ≤ i ≤ r\\}$, the program needs $ |S|^2 $ time to solve them together.\n\nNow, given $ n $ and the sizes of $ n $ test cases, find a way to divide these cases into several segments so that the total time consumed by the program is minimized.", "inputFormat": "The first line contains an integer $n $.\n\nThe next line contains $n$ integers $a_i$, representing the size of each test case.", "outputFormat": "Output one number representing the minimum total time consumption.", "hint": "**「Sample 3 Explanation」**\n\nThe segments are:\n* First segment $\\{1\\}$, cost = $ 1 $;\n* Second segment $\\{2\\}$, cost = $ 1 $;\n* Third segment $\\{1\\}$, cost = $1$;\n* Fourth segment $\\{4\\}$, cost = $1$;\n* Fifth segment $\\{1, 2, 1, 1, 2\\}$, cost = $4$;\n\nTherefore, the total time consumption is $8$.\n\n**「Data Constraints」**\n\nFor 100% of test cases：$ 1 \\le n \\le 2 \\times 10^5 $，$ 1 \\le a_i \\le 10^9 $。\n\n| Subtask ID | $ n \\le $ | Special Property | pts |\n|:-:|:-:|:-:|:-:|\n| $ 1 $ | $ 10 $ | - | $ 8 $ |\n| $ 2 $ | $ 300 $ | - | $ 8 $ |\n| $ 3 $ | $ 2000 $ | - | $ 16 $ |\n| $ 4 $ | - | A | $ 16 $ |\n| $ 5 $ | - | B | $ 24 $ |\n| $ 6 $ | - | - | $ 28 $ |\n\nSpecial Property A: All $a_i $ are randomly generated with uniform distribution in range $[1, 10^9]$, and this subtask has only one test point.\n\nSpecial Property B: $1 ≤ a_i ≤ 1000$.", "locale": "en"}, "zh-CN": {"title": "漫长的小纸带", "background": "You can also see the pdf at the bottom of the chinese problem statement.\n\n小 $ \\zeta $ 是一个喜欢打暴力的 OIer。在每次模拟赛中，他秉持着“10 分钟想不出来正解那就把暴力糊上去”的理念，每次都稳定地拿到很高的分数；平时训练时，他会关注题目的部分分，针对部分分任务进行求解，有时在部分分求解上使用的时间比这个题正解的思考都长。", "description": "小 $ \\zeta $ 经过了几年的暴力训练，暴力水平更是炉火纯青。在 S-PSC 2077 的比赛中，他惊喜的发现第二题《漫长的小纸带》是一道很困难的题目，正适合他这种暴力选手发挥。\n\n这道题目是多测题目，在某个测试点内有 $ n $ 组数据，第 $ i $ 组数据的规模为 $ a_i $。他写出了一个暴力程序，对于一段连续的数据，程序解决这段数据需要消耗的时间为这段数据中出现的不同的 $ a_i $ 的种类数平方。形式化地讲，对于一个从第 $ l $ 组到第 $ r $ 组的连续的数据段，记 $ S=\\{a_i|l \\le i \\le r\\} $，程序需要消耗 $ |S|^2 $ 的时间来一起解决它们。\n\n现在，他给你 $ n $ 和 $ n $ 组数据的规模，请找到一种将这些数据划分成若干个数据段的方案，使得程序消耗的总时间最短。", "inputFormat": "第一行一个整数 $ n $。\n\n接下来一行 $ n $ 个整数 $ a_i $，代表每一组测试数据的规模。", "outputFormat": "输出一个数代表总时间消耗。", "hint": "**【样例 3 解释】**\n\n分段方式为：\n\n* 第一段 $ \\{1\\} $，消耗为 $ 1 $。\n* 第二段 $ \\{2\\} $，消耗为 $ 1 $。\n* 第三段 $ \\{1\\} $，消耗为 $ 1 $。\n* 第四段 $ \\{4\\} $，消耗为 $ 1 $。\n* 第五段 $ \\{1,2,1,1,2\\} $，消耗为 $ 4 $。\n\n故程序总共消耗的时间为 $ 8 $。\n\n**【数据范围】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le n \\le 2 \\times 10^5 $，$ 1 \\le a_i \\le 10^9 $。\n\n**提示：本题开启捆绑测试。**\n\n| 子任务编号 | $ n \\le $ | 特殊性质 | 分数 |\n|:-:|:-:|:-:|:-:|\n| $ 1 $ | $ 10 $ | - | $ 8 $ |\n| $ 2 $ | $ 300 $ | - | $ 8 $ |\n| $ 3 $ | $ 2000 $ | - | $ 16 $ |\n| $ 4 $ | - | A | $ 16 $ |\n| $ 5 $ | - | B | $ 24 $ |\n| $ 6 $ | - | - | $ 28 $ |\n\n特殊性质 A：所有的 $ a_i $ 在 $ [1,10^9] $ 内等概率随机生成，且本子任务只有 $ 1 $ 个测试点。\n\n特殊性质 B：$ 1 \\le a_i \\le 1000 $。\n", "locale": "zh-CN"}}}
{"pid": "P11312", "type": "P", "difficulty": 4, "samples": [["1\n5 10\n1 12\n44 50\n9 10\n88 99\n29 99", "Yes\n10 50 10 90 30"], ["2\n3 11\n99 10003\n39 299\n39 10003\n5 55\n1 54\n1 20\n1 300\n1 300\n1 300", "Yes\n123 246 369\nNo"], ["3\n6 1\n1 10\n1 10\n1 10\n1 10\n1 10\n1 10\n5 4\n11 15\n6 10\n9 14\n20 23\n27 29\n5 11\n20 30\n50 70\n111 120\n72 77\n119 121", "Yes\n1 1 4 5 1 4\nYes\n14 7 14 21 28\nYes\n24 60 120 72 120"], ["4\n3 33\n32 34\n65 67\n97 101\n3 5\n299 99494993\n499 49992999\n499 39999939\n4 25\n719 830\n2194 2893\n132 142\n199 225\n3 10\n140 143\n131 135\n238 241", "Yes\n33 66 99\nYes\n1919810 11400 51400\nYes\n729 2700 135 216\nNo"], ["1\n10 7\n77 77\n82 174\n77 77\n82 174\n77 77\n82 174\n77 77\n82 174\n77 77\n82 174", "Yes\n77 154 77 154 77 154 77 154 77 154"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "洛谷原创", "Special Judge", "O2优化", "枚举", "洛谷月赛", "调和级数"], "title": "神奇的小江鸟", "background": "You can also see the pdf at the bottom of the chinese problem statement.\n\n感谢 [ineverleft](https://www.luogu.com.cn/user/362679) 为本题提供的本地调试 checker。\n\n「愿有前程可奔赴，亦有岁月可回首。」", "description": "小 $ \\zeta $ 在探险过程中看到了一个大锁。\n\n这个大锁有 $ n $ 个拨圈，第 $ i $ 个拨圈的拨动范围为 $ l_i $ 到 $ r_i $ 之间（含两个边界）的所有整数（保证 $ l_i \\le r_i $）。\n\n我们定义这个大锁的「自由度」为所有拨圈上的数的**最大公约数**，当锁的「自由度」大于等于 $ k $ 时，会被打开。\n\n请你找到一种锁的开启方案，或报告无解。", "inputFormat": "**本题单测试点内含有多组测试数据**，第一行一个整数 $ T $，代表数据组数。\n\n对于每组数据：\n\n第一行两个整数 $ n,k $，分别代表拨圈数量和自由度限制。\n\n接下来 $ n $ 行，每行两个整数 $ l_i,r_i $，含义见题目描述。", "outputFormat": "对于每组数据：\n\n* 如果有解，第一行输出 `Yes`，下一行输出 $ n $ 个空格分隔的整数，第 $ i $ 个为你的构造方案中第 $ i $ 个拨圈显示的数。**本题使用了 Special Judge，符合要求的答案均判对。**\n\n* 否则，输出一行 `No` 表示无解。", "hint": "**【样例 1 解释】**\n\n唯一的一组数据 $ \\gcd $ 为 $ 10 $。\n\n五个样例自测均可使用下发的附件。**请注意部分样例可能存在多解，样例输出仅列举了一组可行解。**\n\n**【数据规模与约定】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 5 $，$ 2 \\le n \\le 10^4 $，$ 1 \\le l_i \\le r_i \\le 10^9 $，$ 1 \\le k \\le 1000 $。\n\n**本题开启子任务捆绑测试。**\n\n* Subtask 1（10 pts）：$ k=1 $。\n* Subtask 2（15 pts）：$ n \\le 10 $，$ r_i - l_i + 1 \\le 5 $。\n* Subtask 3（15 pts）：$ r_i \\le 10^3 $。\n* Subtask 4（10 pts）：$ k \\le 5 $，$ l_i,r_i $ 均在 $ 1 \\le l_i \\le r_i \\le 10^9 $ 范围内等概率随机生成，该子任务只有 $ 1 $ 个测试点。\n* Subtask 5（15 pts）：对于每组数据，$ \\exist 1 \\le i \\le n,l_i=r_i $。\n* Subtask 6（35 pts）：无特殊限制。\n\n**【关于附加文件】**\n\n**本题下发了 `checker.cpp` 作为自测器。**\n\n请将输入内容、你的程序输出、参考答案输出分别放置在 `restore.in`、`restore.out`、`restore.ans` 中，这三个文件必须与 `checker.cpp` 在同一目录下，运行 `checker.cpp`，终端上会给出自测结果。\n\n**你需要保证你的输入满足 $ 100\\% $ 数据范围的要求。**\n\n注意，如果你的输入/输出/答案的格式和范围不正确的话，`checker.cpp` 出现的结果是不可预料的。因此，**请先确保你的三个文件格式正确。**", "locale": "zh-CN", "translations": {"en": {"title": "The Magical River Bird", "background": "I wish a good future to enjoy, and a good memories to traceback.", "description": "Little ζ discovered a large lock during his adventure.\n\nThis lock has $n$ dials, where the $i$-th dial can be set to any integer from $l_i$\nto $r_i$ (inclusive, and $l_i ≤ r_i$ is guaranteed).\n\nWe define the lock’s “degree of freedom” as the greatest common divisor (GCD) of all numbers shown on the dials. The lock opens when its “degree of freedom” is greater than or equal to $k$.\n\nYour task is to find a valid combination to open the lock, or report if it’s impossible.", "inputFormat": "Multiple test cases within a single test point. \nThe first line contains an integer $T $, representing the number of test cases.\n\nFor each test case:\n\nFirst line contains two integers $n, k$, representing the number of dials and\nthe freedom degree requirement.\n\nThe next $n$ lines each contain two integers $l_i, r_i$, as described in the problem.", "outputFormat": "For each test case:\n* If a solution exists, output `Yes` on the first line, followed by a line containing n space-separated integers, where the i-th number represents the value shown on the $i$-th dial in your solution. This problem uses Special Judge, any answer meeting the requirements will be accepted.\n* Otherwise, output a single line containing `No` to indicate no solution exists.", "hint": "**「Sample 1 Explanation」**\n\nFor the only test case, the $\\gcd$ is 10.\n\nAll five samples can be tested using the provided attachment. Note that some samples may have multiple valid solutions; the sample output shows just one possible solution.\n\n**「Data Constraints」**\n\nFor 100% of testcases：$ 1 \\le T \\le 5 $，$ 2 \\le n \\le 10^4 $，$ 1 \\le l_i \\le r_i \\le 10^9 $，$ 1 \\le k \\le 1000 $。\n\n**This problem uses subtask scoring。**\n\n* Subtask 1（10 pts）：$ k=1 $。\n* Subtask 2（15 pts）：$ n \\le 10 $，$ r_i - l_i + 1 \\le 5 $。\n* Subtask 3（15 pts）：$ r_i \\le 10^3 $。\n* Subtask 4（10 pts）：$ k \\le 5 $，$ l_i, r_i $ are randomly generated with uniform distribution in range $ [1, 10^9] $, this subtask has only one test point.\n* Subtask 5（15 pts）：For all cases，$ \\exist 1 \\le i \\le n,l_i=r_i $。\n* Subtask 6（35 pts）：No additional constraints.\n\n**「About Additional Files」**\n\nA `checker.cpp` is provided as a testing tool.\n\nPlace your input content, program output, and reference answer in `restore.in`, `restore.out`, and `restore.ans` respectively. These three files must be in the same directory as `checker.cpp`. Run `checker.cpp` to see the testing results.\n\nYour input must satisfy the constraints for $100\\%$ of test cases.\n\nNote that if your input/output/answer format or range is incorrect, the results from checker.cpp are unpredictable. Therefore, please ensure your three files are correctly formatted first.", "locale": "en"}, "zh-CN": {"title": "神奇的小江鸟", "background": "You can also see the pdf at the bottom of the chinese problem statement.\n\n感谢 [ineverleft](https://www.luogu.com.cn/user/362679) 为本题提供的本地调试 checker。\n\n「愿有前程可奔赴，亦有岁月可回首。」", "description": "小 $ \\zeta $ 在探险过程中看到了一个大锁。\n\n这个大锁有 $ n $ 个拨圈，第 $ i $ 个拨圈的拨动范围为 $ l_i $ 到 $ r_i $ 之间（含两个边界）的所有整数（保证 $ l_i \\le r_i $）。\n\n我们定义这个大锁的「自由度」为所有拨圈上的数的**最大公约数**，当锁的「自由度」大于等于 $ k $ 时，会被打开。\n\n请你找到一种锁的开启方案，或报告无解。", "inputFormat": "**本题单测试点内含有多组测试数据**，第一行一个整数 $ T $，代表数据组数。\n\n对于每组数据：\n\n第一行两个整数 $ n,k $，分别代表拨圈数量和自由度限制。\n\n接下来 $ n $ 行，每行两个整数 $ l_i,r_i $，含义见题目描述。", "outputFormat": "对于每组数据：\n\n* 如果有解，第一行输出 `Yes`，下一行输出 $ n $ 个空格分隔的整数，第 $ i $ 个为你的构造方案中第 $ i $ 个拨圈显示的数。**本题使用了 Special Judge，符合要求的答案均判对。**\n\n* 否则，输出一行 `No` 表示无解。", "hint": "**【样例 1 解释】**\n\n唯一的一组数据 $ \\gcd $ 为 $ 10 $。\n\n五个样例自测均可使用下发的附件。**请注意部分样例可能存在多解，样例输出仅列举了一组可行解。**\n\n**【数据规模与约定】**\n\n对于 $ 100\\% $ 的数据，$ 1 \\le T \\le 5 $，$ 2 \\le n \\le 10^4 $，$ 1 \\le l_i \\le r_i \\le 10^9 $，$ 1 \\le k \\le 1000 $。\n\n**本题开启子任务捆绑测试。**\n\n* Subtask 1（10 pts）：$ k=1 $。\n* Subtask 2（15 pts）：$ n \\le 10 $，$ r_i - l_i + 1 \\le 5 $。\n* Subtask 3（15 pts）：$ r_i \\le 10^3 $。\n* Subtask 4（10 pts）：$ k \\le 5 $，$ l_i,r_i $ 均在 $ 1 \\le l_i \\le r_i \\le 10^9 $ 范围内等概率随机生成，该子任务只有 $ 1 $ 个测试点。\n* Subtask 5（15 pts）：对于每组数据，$ \\exist 1 \\le i \\le n,l_i=r_i $。\n* Subtask 6（35 pts）：无特殊限制。\n\n**【关于附加文件】**\n\n**本题下发了 `checker.cpp` 作为自测器。**\n\n请将输入内容、你的程序输出、参考答案输出分别放置在 `restore.in`、`restore.out`、`restore.ans` 中，这三个文件必须与 `checker.cpp` 在同一目录下，运行 `checker.cpp`，终端上会给出自测结果。\n\n**你需要保证你的输入满足 $ 100\\% $ 数据范围的要求。**\n\n注意，如果你的输入/输出/答案的格式和范围不正确的话，`checker.cpp` 出现的结果是不可预料的。因此，**请先确保你的三个文件格式正确。**", "locale": "zh-CN"}}}
{"pid": "P11313", "type": "P", "difficulty": 7, "samples": [["5\n2 2 2\n2 2 1\n4 4 4\n4 4 2\n4 6 3", "NO\nYES\n1 1\n1 1\nYES\n1 1 2 2\n1 1 2 2\n3 3 4 4\n3 3 4 4\nYES\n1 1 1 1\n1 2 2 1\n1 2 2 1\n1 1 1 1\nYES\n1 1 1 1 1 1\n1 2 2 3 3 1\n1 2 2 3 3 1\n1 1 1 1 1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "Special Judge", "构造", "Ad-hoc", "分类讨论", "RMI（罗马尼亚）"], "title": "[RMI 2021] 园艺 / Gardening", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D1T1。$\\texttt{1s,0.5G}$。", "description": "\n现在要在 $N$ 行 $M$ 列的矩形格子内种花，每个格子内种一株花。一共有 $K$ 种品种的花，编号为 $1\\sim K$。\n\n为了让花更好看，以下条件必须满足：\n\n- 每种花至少出现一株。\n- 每种花所在的格子形成一个四连通块。\n- 与格子 $(i,j)$ 四连通的格子中，**恰好**有两个格子种的花与 $(i,j)$ 种的花的品种相同。\n\n请你构造一组方案，或者指出这是不可能实现的。\n", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来 $T$ 组测试数据，每组测试数据包含一行三个正整数 $N,M,K$。\n\n", "outputFormat": "\n对于每组测试数据：\n\n- 如果不可能构造，输出一行一个 $\\texttt{NO}$；\n- 否则，输出一行一个 $\\texttt{YES}$；接下来 $N$ 行，每行 $M$ 个正整数，描述一个方案。\n\n任意一组合法方案都可以得分。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le N,M\\le 2\\times 10^5$； \n- $1\\le K\\le N\\cdot M$；\n- $1\\le T\\le 10^5$；\n- 令 $S$ 为**有解**的测试数据中的 $\\sum N\\cdot M$，则 $S\\le 2\\times 10^5$。\n\n\n| 子任务编号 | $N\\le  $ | 特殊性质 |  得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $ 4 $  | A |  $5$ |\n| $ 2 $    | $ 4 $  |  |  $6$ |\n| $ 3 $    | $ 6 $  |  |  $10$ |\n| $ 4 $    | $ 2\\times 10^5$  | B |  $18$ |\n| $ 5 $    | $ 2\\times 10^5$  | C |  $39$ |\n| $ 6 $    | $ 2\\times 10^5$  |  |  $22$ |\n\n- 特殊性质 A：$M\\le 4$。\n- 特殊性质 B：$N=M$。\n- 特殊性质 C：$K$ 在 $[1,N\\cdot M]$ 中等概率独立随机选取。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2021] 园艺 / Gardening", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D1T1。$\\texttt{1s,0.5G}$。", "description": "\n现在要在 $N$ 行 $M$ 列的矩形格子内种花，每个格子内种一株花。一共有 $K$ 种品种的花，编号为 $1\\sim K$。\n\n为了让花更好看，以下条件必须满足：\n\n- 每种花至少出现一株。\n- 每种花所在的格子形成一个四连通块。\n- 与格子 $(i,j)$ 四连通的格子中，**恰好**有两个格子种的花与 $(i,j)$ 种的花的品种相同。\n\n请你构造一组方案，或者指出这是不可能实现的。\n", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来 $T$ 组测试数据，每组测试数据包含一行三个正整数 $N,M,K$。\n\n", "outputFormat": "\n对于每组测试数据：\n\n- 如果不可能构造，输出一行一个 $\\texttt{NO}$；\n- 否则，输出一行一个 $\\texttt{YES}$；接下来 $N$ 行，每行 $M$ 个正整数，描述一个方案。\n\n任意一组合法方案都可以得分。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le N,M\\le 2\\times 10^5$； \n- $1\\le K\\le N\\cdot M$；\n- $1\\le T\\le 10^5$；\n- 令 $S$ 为**有解**的测试数据中的 $\\sum N\\cdot M$，则 $S\\le 2\\times 10^5$。\n\n\n| 子任务编号 | $N\\le  $ | 特殊性质 |  得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $ 4 $  | A |  $5$ |\n| $ 2 $    | $ 4 $  |  |  $6$ |\n| $ 3 $    | $ 6 $  |  |  $10$ |\n| $ 4 $    | $ 2\\times 10^5$  | B |  $18$ |\n| $ 5 $    | $ 2\\times 10^5$  | C |  $39$ |\n| $ 6 $    | $ 2\\times 10^5$  |  |  $22$ |\n\n- 特殊性质 A：$M\\le 4$。\n- 特殊性质 B：$N=M$。\n- 特殊性质 C：$K$ 在 $[1,N\\cdot M]$ 中等概率独立随机选取。\n\n", "locale": "zh-CN"}}}
{"pid": "P11314", "type": "P", "difficulty": 7, "samples": [["5\n0\n1\n2\n3\n4", "0\n1 1\n1 2\n2 1 2\n1 3"], ["4\n5\n6\n100\n1000", "2 1 3\n3 1 2 3\n5 1 2 3 7 8\n7 1 2 3 5 10 11 12"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "RMI（罗马尼亚）"], "title": "[RMI 2021] 礼物 / Present", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D1T2。$\\texttt{4s,0.5G}$。", "description": "\n> 定义一个集合 $S$ 是**好的**，当且仅当：\n> \n> - $S$ 为有限集合；\n> - $S$ 中只包含正整数；\n> - $\\forall x,y\\in S$，都有 $\\gcd(x,y)\\in S$。\n> \n> 注意到 $\\varnothing$ **也是好的**。\n\n\n> **Laikan 序**\n> \n> 定义好的集合 $A,B$ 满足 $A\\lt B$，当且仅当下列条件至少有一个成立：\n> \n> - $\\max A\\lt \\max B$；\n> - $\\max A=\\max B\\land A\\backslash \\{\\max A\\}\\lt B\\backslash\\{\\max B\\}$。\n> \n> 特别地，定义 $\\max \\varnothing=-\\infty$。\n> \n> 不难发现，对于好的集合 $S$，这总是良定义的。\n\n你要将一个**好的**集合 $S$ 作为礼物送给你的挚友。\n\n由于你们已经分隔 $k$ 天，你想要让这个礼物更有纪念意义。\n\n于是，你将所有好的集合按照 **Laikan 序** 排序，得到一个无穷序列 $S_0,S_1,\\cdots$。你将要把 $S_k$ 送给你的挚友。\n\n你想要知道，你要送的集合里面的元素是什么。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来 $T$ 组测试数据，每组测试数据包含一行一个整数 $k$。\n\t", "outputFormat": "\n对于每组测试数据，输出一行。\n\n第一个数，表示 $|S|$。\n\n接下来 $|S|$ 个数，**升序**输出 $S$ 中的元素。\n", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le T\\le 5$； \n- $0\\le k\\le 1.5\\times 10^9$。\n\n\n| 子任务编号 | $k\\le  $ |得分 |  \n| :--: | :--: |  :--: |\n| $ 1 $    | $ 10^2 $  | $8$ |\n| $ 2 $    | $ 10^6 $  | $21$ |\n| $ 3 $    | $ 5\\times 10^8 $  | $41$ |\n| $ 4 $    | $ 10^9 $  | $14$ |\n| $ 5 $    | $ 1.5\\times 10^9$  | $16$ |\n\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2021] 礼物 / Present", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D1T2。$\\texttt{4s,0.5G}$。", "description": "\n> 定义一个集合 $S$ 是**好的**，当且仅当：\n> \n> - $S$ 为有限集合；\n> - $S$ 中只包含正整数；\n> - $\\forall x,y\\in S$，都有 $\\gcd(x,y)\\in S$。\n> \n> 注意到 $\\varnothing$ **也是好的**。\n\n\n> **Laikan 序**\n> \n> 定义好的集合 $A,B$ 满足 $A\\lt B$，当且仅当下列条件至少有一个成立：\n> \n> - $\\max A\\lt \\max B$；\n> - $\\max A=\\max B\\land A\\backslash \\{\\max A\\}\\lt B\\backslash\\{\\max B\\}$。\n> \n> 特别地，定义 $\\max \\varnothing=-\\infty$。\n> \n> 不难发现，对于好的集合 $S$，这总是良定义的。\n\n你要将一个**好的**集合 $S$ 作为礼物送给你的挚友。\n\n由于你们已经分隔 $k$ 天，你想要让这个礼物更有纪念意义。\n\n于是，你将所有好的集合按照 **Laikan 序** 排序，得到一个无穷序列 $S_0,S_1,\\cdots$。你将要把 $S_k$ 送给你的挚友。\n\n你想要知道，你要送的集合里面的元素是什么。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来 $T$ 组测试数据，每组测试数据包含一行一个整数 $k$。\n\t", "outputFormat": "\n对于每组测试数据，输出一行。\n\n第一个数，表示 $|S|$。\n\n接下来 $|S|$ 个数，**升序**输出 $S$ 中的元素。\n", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le T\\le 5$； \n- $0\\le k\\le 1.5\\times 10^9$。\n\n\n| 子任务编号 | $k\\le  $ |得分 |  \n| :--: | :--: |  :--: |\n| $ 1 $    | $ 10^2 $  | $8$ |\n| $ 2 $    | $ 10^6 $  | $21$ |\n| $ 3 $    | $ 5\\times 10^8 $  | $41$ |\n| $ 4 $    | $ 10^9 $  | $14$ |\n| $ 5 $    | $ 1.5\\times 10^9$  | $16$ |\n\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11315", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "交互题", "Special Judge", "树的遍历", "通信题", "RMI（罗马尼亚）"], "title": "[RMI 2021] 速通 / Speedrun", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D1T3。$\\texttt{3.5s,0.5G}$。\n\n评测时，**不要引入头文件**。在文件头加入如下的语句：\n\n```\nvoid setHintLen(int);\nvoid setHint(int,int, bool);\nint getLength();\nbool getHint(int);\nbool goTo(int);\n```", "description": "\n**这是一道通信题。**\n\n你在一棵 $N$ 个节点的树上，从某个节点出发跑酷。\n\n**你不知道这棵树的具体形态**，只知道现在自己在哪个节点。你在点 $u$ 时，唯一能做的就是选择一个 $v$，尝试走到 $v$。如果 $(u,v)$ 这条边存在，你会走到 $v$；否则你将留在原地。\n\n需要注意的是，**你最多能试错 $Q$ 次**。也就是说，如果你超过 $Q$ 次选择了一条不存在的边，就失败了。\n\n当你经过每个节点至少一次时，我们说你**速通成功**。\n\n现在有一个作弊的机会。你可以在每个节点放一个长度为 $l$ 的 $\\texttt{01}$ 串，当你在某个节点时，可以读取那个节点上 $\\texttt{01}$ 串的信息。需要注意的是，在放置 $\\texttt{01}$ 串的时候**你是知道这棵树的形态的，但是你不知道自己跑酷时的出发点。**\n\n\n请你找到一种设置信息和速通的方式，使得速通成功。\n\n### 实现细节\n\n你不需要，也不应该实现 main 函数。\n\n你需要实现以下的函数：\n\n```cpp\nvoid assignHints(int subtask, int N, int A[], int B[]);\nvoid speedrun(int subtask, int N, int start);\n```\n\n你可以调用以下的函数：\n\n```cpp\nvoid setHintLen(int l);\nvoid setHint(int i, int j, bool b);\nint getLength();\nbool getHint(int j);\nbool goTo(int x);\n```\n#### 第一次运行\n\n第一次运行用于确定每个节点上的信息。\n\n交互库将会调用 `assignHints` 函数恰好一次。参数的含义：\n- `subtask`：子任务编号。\n- `N`：树的节点数量。\n- `A[]`, `B[]`：长度为 $N$ 的整数数组，含义为对于每个 $i=1,2,\\cdots, N-1$，$A[i],B[i]$ 间有一条边连接。\n\n随后，你需要立刻调用 `setHintLen` 函数恰好一次。传入正整数 `l` 表示你的 $\\texttt{01}$ 串的长度。\n\n$\\texttt{01}$ 串起初全为 $0$。\n\n接下来，你可以多次调用 `setHint`，其中 $1\\le j\\le l$，表示将节点 $i$ 的 $\\texttt{01}$ 串的第 $j$ 位设置成 `b`。\n\n在第一次运行中，禁止调用 `getLength`，`getHint` 和 `goTo`。\n\n#### 第二次运行\n\n交互库将会调用 `speedrun` 函数恰好一次。参数的含义：\n- `subtask`：子任务编号。\n- `N`：树的节点数量。\n- `start`：你的初始位置。\n\n调用 `getLength` 来获得 $\\texttt{01}$ 串的长度。\n\n当你在节点 $i$ 时，调用 `getHint(j)` 来获得当前节点上 $\\texttt{01}$ 串的第 $j$ 位。\n\n可以调用 `goTo` 来尝试移动一步。如果成功，返回值为 `true`；否则返回值为 `false`。\n\n在第二次运行中，禁止调用 `setHint` 和 `setHintLen`。\n\n", "inputFormat": "", "outputFormat": "", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^3$。\n\n令 $Q$ 为 `goTo` 函数返回 `False` 的最大次数，$L$ 为 $l$ 的最大值。超出限制，得 $0$ 分。\n\n| 子任务编号 | $L\\le  $ | $Q\\le$ | 树的形态 | 计分方式 | 得分 |  \n| :--: | :--: |  :--: | :--: |:--: | :--: |\n| $ 1 $    | $ N $  | $2\\,000$ | | I | $21$ | \n| $ 2 $    | $ 20 $  | $2\\,000$ | 菊花图 | I | $8$ | \n| $ 3 $    | $ 20 $ | $2\\,000$ | 链 | I | $19$ |\n| $ 4 $    | $ 316 $  | $32\\, 000$ | | I |$12$ |\n| $ 5 $    | $ 40 $  | $2\\, 000$ | | II | $40$ |\n\n- 菊花图：存在一个度数为 $(N-1)$ 的节点。\n- 链：每个节点度数均不大于 $2$。\n- 计分方式 $\\text{I}$：成功遍历树，得满分；否则得 $0$ 分。\n- 计分方式 $\\text{II}$：成功遍历树的得分为 $\\min(40,60-l)$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2021] 速通 / Speedrun", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D1T3。$\\texttt{3.5s,0.5G}$。\n\n评测时，**不要引入头文件**。在文件头加入如下的语句：\n\n```\nvoid setHintLen(int);\nvoid setHint(int,int, bool);\nint getLength();\nbool getHint(int);\nbool goTo(int);\n```", "description": "\n**这是一道通信题。**\n\n你在一棵 $N$ 个节点的树上，从某个节点出发跑酷。\n\n**你不知道这棵树的具体形态**，只知道现在自己在哪个节点。你在点 $u$ 时，唯一能做的就是选择一个 $v$，尝试走到 $v$。如果 $(u,v)$ 这条边存在，你会走到 $v$；否则你将留在原地。\n\n需要注意的是，**你最多能试错 $Q$ 次**。也就是说，如果你超过 $Q$ 次选择了一条不存在的边，就失败了。\n\n当你经过每个节点至少一次时，我们说你**速通成功**。\n\n现在有一个作弊的机会。你可以在每个节点放一个长度为 $l$ 的 $\\texttt{01}$ 串，当你在某个节点时，可以读取那个节点上 $\\texttt{01}$ 串的信息。需要注意的是，在放置 $\\texttt{01}$ 串的时候**你是知道这棵树的形态的，但是你不知道自己跑酷时的出发点。**\n\n\n请你找到一种设置信息和速通的方式，使得速通成功。\n\n### 实现细节\n\n你不需要，也不应该实现 main 函数。\n\n你需要实现以下的函数：\n\n```cpp\nvoid assignHints(int subtask, int N, int A[], int B[]);\nvoid speedrun(int subtask, int N, int start);\n```\n\n你可以调用以下的函数：\n\n```cpp\nvoid setHintLen(int l);\nvoid setHint(int i, int j, bool b);\nint getLength();\nbool getHint(int j);\nbool goTo(int x);\n```\n#### 第一次运行\n\n第一次运行用于确定每个节点上的信息。\n\n交互库将会调用 `assignHints` 函数恰好一次。参数的含义：\n- `subtask`：子任务编号。\n- `N`：树的节点数量。\n- `A[]`, `B[]`：长度为 $N$ 的整数数组，含义为对于每个 $i=1,2,\\cdots, N-1$，$A[i],B[i]$ 间有一条边连接。\n\n随后，你需要立刻调用 `setHintLen` 函数恰好一次。传入正整数 `l` 表示你的 $\\texttt{01}$ 串的长度。\n\n$\\texttt{01}$ 串起初全为 $0$。\n\n接下来，你可以多次调用 `setHint`，其中 $1\\le j\\le l$，表示将节点 $i$ 的 $\\texttt{01}$ 串的第 $j$ 位设置成 `b`。\n\n在第一次运行中，禁止调用 `getLength`，`getHint` 和 `goTo`。\n\n#### 第二次运行\n\n交互库将会调用 `speedrun` 函数恰好一次。参数的含义：\n- `subtask`：子任务编号。\n- `N`：树的节点数量。\n- `start`：你的初始位置。\n\n调用 `getLength` 来获得 $\\texttt{01}$ 串的长度。\n\n当你在节点 $i$ 时，调用 `getHint(j)` 来获得当前节点上 $\\texttt{01}$ 串的第 $j$ 位。\n\n可以调用 `goTo` 来尝试移动一步。如果成功，返回值为 `true`；否则返回值为 `false`。\n\n在第二次运行中，禁止调用 `setHint` 和 `setHintLen`。\n\n", "inputFormat": "", "outputFormat": "", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^3$。\n\n令 $Q$ 为 `goTo` 函数返回 `False` 的最大次数，$L$ 为 $l$ 的最大值。超出限制，得 $0$ 分。\n\n| 子任务编号 | $L\\le  $ | $Q\\le$ | 树的形态 | 计分方式 | 得分 |  \n| :--: | :--: |  :--: | :--: |:--: | :--: |\n| $ 1 $    | $ N $  | $2\\,000$ | | I | $21$ | \n| $ 2 $    | $ 20 $  | $2\\,000$ | 菊花图 | I | $8$ | \n| $ 3 $    | $ 20 $ | $2\\,000$ | 链 | I | $19$ |\n| $ 4 $    | $ 316 $  | $32\\, 000$ | | I |$12$ |\n| $ 5 $    | $ 40 $  | $2\\, 000$ | | II | $40$ |\n\n- 菊花图：存在一个度数为 $(N-1)$ 的节点。\n- 链：每个节点度数均不大于 $2$。\n- 计分方式 $\\text{I}$：成功遍历树，得满分；否则得 $0$ 分。\n- 计分方式 $\\text{II}$：成功遍历树的得分为 $\\min(40,60-l)$。\n", "locale": "zh-CN"}}}
{"pid": "P11316", "type": "P", "difficulty": 5, "samples": [["100 23", "171243255"], ["1 1", "0"], ["3 2", "288"], ["300 300", "929890502"]], "limits": {"time": [200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "背包 DP", "组合数学", "排列组合", "容斥原理", "RMI（罗马尼亚）"], "title": "[RMI 2021] 去 M / NoM", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D2T1。$\\texttt{0.2s,0.5G}$。", "description": "\n有 $N$ 个绿色的石子，标号 $1\\sim N$。\n\n有 $N$ 个灰色的石子，标号 $1\\sim N$。\n\n将 $2N$ 个石子任意排成一列，两个相邻石子的距离为 $1$。定义 $\\mathrm{dist}(i)$ 为绿色的上面标有 $i$ 的石子与灰色的上面标有 $i$ 的石子的距离。\n\n给定正整数 $M$。若存在 $1\\le i\\le N$，使得 $M\\mid \\mathrm{dist}(i)$，我们就说这样的排列方式是**不好的**（因为可能会导致 IDE 卡死）。否则我们就说这样的排列方式是**好的**。\n\n求出好的排列方案数，对 $(10^9+7)$ 取模。\n\n两种排列方案相同，当且仅当对应石子颜色和编号都相同。\n\n", "inputFormat": "\n一行两个正整数 $N,M$。\n", "outputFormat": "\n输出一行一个整数，表示方案数对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le M\\le N\\le 2\\, 000$。\n\n\n| 子任务编号 | $N,M\\le  $ |得分 |  \n| :--: | :--: |  :--: |\n| $ 1 $    | $ 5 $  | $9$ |\n| $ 2 $    | $ 100 $  | $12$ |\n| $ 3 $    | $ 300 $  | $13$ |\n| $ 4 $    | $ 900 $  | $18$ |\n| $ 5 $    | $ 2\\, 000$  | $48$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2021] 去 M / NoM", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D2T1。$\\texttt{0.2s,0.5G}$。", "description": "\n有 $N$ 个绿色的石子，标号 $1\\sim N$。\n\n有 $N$ 个灰色的石子，标号 $1\\sim N$。\n\n将 $2N$ 个石子任意排成一列，两个相邻石子的距离为 $1$。定义 $\\mathrm{dist}(i)$ 为绿色的上面标有 $i$ 的石子与灰色的上面标有 $i$ 的石子的距离。\n\n给定正整数 $M$。若存在 $1\\le i\\le N$，使得 $M\\mid \\mathrm{dist}(i)$，我们就说这样的排列方式是**不好的**（因为可能会导致 IDE 卡死）。否则我们就说这样的排列方式是**好的**。\n\n求出好的排列方案数，对 $(10^9+7)$ 取模。\n\n两种排列方案相同，当且仅当对应石子颜色和编号都相同。\n\n", "inputFormat": "\n一行两个正整数 $N,M$。\n", "outputFormat": "\n输出一行一个整数，表示方案数对 $(10^9+7)$ 取模后的结果。\n", "hint": "\n对于 $100\\%$ 的数据，保证 $1\\le M\\le N\\le 2\\, 000$。\n\n\n| 子任务编号 | $N,M\\le  $ |得分 |  \n| :--: | :--: |  :--: |\n| $ 1 $    | $ 5 $  | $9$ |\n| $ 2 $    | $ 100 $  | $12$ |\n| $ 3 $    | $ 300 $  | $13$ |\n| $ 4 $    | $ 900 $  | $18$ |\n| $ 5 $    | $ 2\\, 000$  | $48$ |", "locale": "zh-CN"}}}
{"pid": "P11317", "type": "P", "difficulty": 6, "samples": [["11 3\n1 2 5\n2 3 3\n2 6 5\n3 4 4\n3 5 2\n1 7 6\n7 8 4\n7 9 5\n1 10 1\n10 11 1\n", "28\n28\n28\n32\n30\n32\n28\n32\n32\n29\n30"]], "limits": {"time": [450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450, 450], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "RMI（罗马尼亚）"], "title": "[RMI 2021] 路径 / Paths", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D2T2。$\\texttt{0.3s,0.5G}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9hniafzi.png)", "description": "\n橘猫有一棵树 $T=(V,E)$，边有边权。其中 $|V|=n$。\n\n令 $\\operatorname{path}(u,v)$ 为 $u,v$ 间最短路径上的边集。\n\n对于根节点 $\\mathrm{root}$，定义点集 $V'\\subseteq V$ 的**路径并**为 $\\displaystyle E'(V')=\\bigcup_{u\\in V'} \\operatorname{path}(\\mathrm{root},u)$。在此基础上，定义 $V'$ 的**权值**为 $\\displaystyle \\sum_{(u,v,w)\\in E'(V') } w$，即路径并的边权和。\n\n给定正整数 $k$。定义 $f(u)$ 为：当 $u$ 为根时，在 ${n\\choose k}$ 种选择 $V'\\subseteq V$ 且 $|V'|=k$ 的方案中，$V'$ 权值的最大值。\n\n对于 $u=1,2,\\cdots,n$，橘猫请你帮她求出 $f(u)$ 的值。", "inputFormat": "\n第一行，两个正整数 $n,k$。\n\n接下来 $(n-1)$ 行，每行三个整数 $u,v,w$，表示 $(u,v,w)\\in E$。\n", "outputFormat": "\n输出 $n$ 行，第 $i$ 行一个整数表示 $f(i)$。\n", "hint": "\n#### 样例解释\n\n$u=1$ 时，一种最优方案是选择 $V'=\\{4,6,9\\}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kflft23q.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le k\\le n\\le 10^5$； \n- $0\\le w\\le 10^9$。\n\n\n| 子任务编号 | $n\\le  $ | $k\\le$ |得分 |  \n| :--: | :--: |  :--: | :--: |\n| $ 1 $    | $ 18 $  | $n$ | $8$ |\n| $ 2 $    | $ 200 $  | $20$ | $11$ |\n| $ 3 $    | $ 10^3 $ | $100$ | $17$ |\n| $ 4 $    | $ 2\\times 10^3 $  | $n$ | $20$ |\n| $ 5 $    | $ 10^5 $  | $1$ | $12$ |\n| $ 6 $    | $ 10^5$ | $n$ | $32$ |\n\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2021] 路径 / Paths", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D2T2。$\\texttt{0.3s,0.5G}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9hniafzi.png)", "description": "\n橘猫有一棵树 $T=(V,E)$，边有边权。其中 $|V|=n$。\n\n令 $\\operatorname{path}(u,v)$ 为 $u,v$ 间最短路径上的边集。\n\n对于根节点 $\\mathrm{root}$，定义点集 $V'\\subseteq V$ 的**路径并**为 $\\displaystyle E'(V')=\\bigcup_{u\\in V'} \\operatorname{path}(\\mathrm{root},u)$。在此基础上，定义 $V'$ 的**权值**为 $\\displaystyle \\sum_{(u,v,w)\\in E'(V') } w$，即路径并的边权和。\n\n给定正整数 $k$。定义 $f(u)$ 为：当 $u$ 为根时，在 ${n\\choose k}$ 种选择 $V'\\subseteq V$ 且 $|V'|=k$ 的方案中，$V'$ 权值的最大值。\n\n对于 $u=1,2,\\cdots,n$，橘猫请你帮她求出 $f(u)$ 的值。", "inputFormat": "\n第一行，两个正整数 $n,k$。\n\n接下来 $(n-1)$ 行，每行三个整数 $u,v,w$，表示 $(u,v,w)\\in E$。\n", "outputFormat": "\n输出 $n$ 行，第 $i$ 行一个整数表示 $f(i)$。\n", "hint": "\n#### 样例解释\n\n$u=1$ 时，一种最优方案是选择 $V'=\\{4,6,9\\}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kflft23q.png)\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le k\\le n\\le 10^5$； \n- $0\\le w\\le 10^9$。\n\n\n| 子任务编号 | $n\\le  $ | $k\\le$ |得分 |  \n| :--: | :--: |  :--: | :--: |\n| $ 1 $    | $ 18 $  | $n$ | $8$ |\n| $ 2 $    | $ 200 $  | $20$ | $11$ |\n| $ 3 $    | $ 10^3 $ | $100$ | $17$ |\n| $ 4 $    | $ 2\\times 10^3 $  | $n$ | $20$ |\n| $ 5 $    | $ 10^5 $  | $1$ | $12$ |\n| $ 6 $    | $ 10^5$ | $n$ | $32$ |\n\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11318", "type": "P", "difficulty": 6, "samples": [["6 10\n1 2 3 1 2 3\n1 1 6 3\n3 1 6\n1 1 3 3\n3 1 6\n1 1 3 1000\n3 1 6\n2 1 1000\n3 1 6\n1 1 3 999\n3 1 5", "9\n6\n5\n1005\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["暴力数据结构", "2021", "交互题", "均摊分析", "吉司机线段树 segment tree beats", "RMI（罗马尼亚）"], "title": "[RMI 2021] 奇树 / Weirdtree", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D2T3。$\\texttt{1s,0.5G}$。\n\n提交时，需要在文件头添加\n\n```cpp\nvoid initialise(int N, int Q, int h[]);\nvoid cut(int l, int r, int k);\nvoid magic(int i, int x);\nlong long int inspect(int l, int r);\n```\n\n请使用 C++17 或更高版本提交。", "description": "\n**这是一道（函数式）交互题。**\n\n你需要维护一个长度为 $N$ 的非负整数序列 $h_1,h_2,\\cdots,h_N$。有三种操作，一共 $Q$ 次：\n\n- 操作 1（砍树）。给定 $l,r,k$。执行 $k$ 次以下操作：\n\t- 若区间 $[l,r]$ 的最大值为 $0$，无事发生；\n    - 否则，将最大值减去 $1$（如果存在多个，取下标最小的一个）。\n    \n    形式化地：\n    - 若 $\\displaystyle \\max_{i\\in [l,r]} \\{h_i\\}=0$，无事发生。\n    - 否则，记 $\\displaystyle x=\\min\\argmax_{i\\in [l,r]}\\{h_i\\}$（换句话说，满足 $x\\in [l,r],h_x=\\max_{i\\in [l,r]}\\{h_i\\}$ 的最小的 $x$）。令 $h_x\\gets h_x-1$。\n- 操作 2（施法）。给定 $x,v$，令 $h_x\\gets v$。\n- 操作 3（查询）。给定 $l,r$，求 $\\displaystyle \\sum_{i\\in [l,r]} h_i$。\n\n\n### 实现细节\n\n你不需要，也不应该实现 `main` 函数。你应当实现以下函数：\n\n```cpp\nvoid initialise(int N, int Q, int h[]);\nvoid cut(int l, int r, int k);\nvoid magic(int i, int x);\nlong long int inspect(int l, int r);\n```\n\n- `initialise` 函数：\n    - 将在最开始被调用恰好一次。\n    - `N`：数组长度。\n    - `Q`：询问次数。\n    - `h[]`：长度为 $(N+1)$ 的数组，`h[i]`（$1\\le i\\le N$）表示数列中的第 $i$ 个数。\n- `cut` 函数：\n    - 见操作 1。\n- `magic` 函数：\n    - 见操作 2。\n- `inspect` 函数：\n    - 见操作 3。\n    - 返回一个整数表示答案。\n\n你可以自由使用全局变量，STL 库等。\n\n为了方便选手本地测试，我们在附件中提供了 $\\texttt{grader.cpp}$。下面的输入输出格式均表示 sample grader 的输入输出格式。\n", "inputFormat": "\n第一行，两个正整数 $N,Q$;\n\n第二行，$N$ 个整数 $h_1,\\cdots,h_N$；\n\n接下来 $Q$ 行，每行若干个整数：第一个整数表示操作类型，接下来若干个数表示参数。", "outputFormat": "\n对于每个操作 3，输出一行表示答案。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le N, Q\\le 3\\times 10^5$；\n- $1\\le i\\le N$；\n- $1\\le l\\le r\\le N$；\n- $0\\le x,k,h_i\\le 10^9$。\n\n\n| 子任务编号 | $N,Q\\le  $ | 特殊性质 |得分 |  \n| :--: | :--: |  :--: | :--: |\n| $ 1 $    | $ 10^3 $  | A | $5$ |\n| $ 2 $    | $ 8\\times 10^4 $  | A | $8$ |\n| $ 3 $    | $ 10^3 $ | B | $8$ |\n| $ 4 $    | $ 3\\times 10^5 $  | B | $19$ |\n| $ 5 $    | $ 3\\times 10^5 $  | C | $10$ |\n| $ 6 $    | $ 8\\times 10^4 $ |  | $21$ |\n| $ 7 $    | $ 3\\times 10^5 $ |  | $29$ |\n\n- 特殊性质 A：$k=1$。\n- 特殊性质 B：没有操作 2。\n- 特殊性质 C：$l=1,r=N$（这对操作 $1,3$ 都有效）。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RMI 2021] 奇树 / Weirdtree", "background": "\n译自 [9th Romanian Master of Informatics, RMI 2021](https://rmi.lbi.ro/rmi_2021/) D2T3。$\\texttt{1s,0.5G}$。\n\n提交时，需要在文件头添加\n\n```cpp\nvoid initialise(int N, int Q, int h[]);\nvoid cut(int l, int r, int k);\nvoid magic(int i, int x);\nlong long int inspect(int l, int r);\n```\n\n请使用 C++17 或更高版本提交。", "description": "\n**这是一道（函数式）交互题。**\n\n你需要维护一个长度为 $N$ 的非负整数序列 $h_1,h_2,\\cdots,h_N$。有三种操作，一共 $Q$ 次：\n\n- 操作 1（砍树）。给定 $l,r,k$。执行 $k$ 次以下操作：\n\t- 若区间 $[l,r]$ 的最大值为 $0$，无事发生；\n    - 否则，将最大值减去 $1$（如果存在多个，取下标最小的一个）。\n    \n    形式化地：\n    - 若 $\\displaystyle \\max_{i\\in [l,r]} \\{h_i\\}=0$，无事发生。\n    - 否则，记 $\\displaystyle x=\\min\\argmax_{i\\in [l,r]}\\{h_i\\}$（换句话说，满足 $x\\in [l,r],h_x=\\max_{i\\in [l,r]}\\{h_i\\}$ 的最小的 $x$）。令 $h_x\\gets h_x-1$。\n- 操作 2（施法）。给定 $x,v$，令 $h_x\\gets v$。\n- 操作 3（查询）。给定 $l,r$，求 $\\displaystyle \\sum_{i\\in [l,r]} h_i$。\n\n\n### 实现细节\n\n你不需要，也不应该实现 `main` 函数。你应当实现以下函数：\n\n```cpp\nvoid initialise(int N, int Q, int h[]);\nvoid cut(int l, int r, int k);\nvoid magic(int i, int x);\nlong long int inspect(int l, int r);\n```\n\n- `initialise` 函数：\n    - 将在最开始被调用恰好一次。\n    - `N`：数组长度。\n    - `Q`：询问次数。\n    - `h[]`：长度为 $(N+1)$ 的数组，`h[i]`（$1\\le i\\le N$）表示数列中的第 $i$ 个数。\n- `cut` 函数：\n    - 见操作 1。\n- `magic` 函数：\n    - 见操作 2。\n- `inspect` 函数：\n    - 见操作 3。\n    - 返回一个整数表示答案。\n\n你可以自由使用全局变量，STL 库等。\n\n为了方便选手本地测试，我们在附件中提供了 $\\texttt{grader.cpp}$。下面的输入输出格式均表示 sample grader 的输入输出格式。\n", "inputFormat": "\n第一行，两个正整数 $N,Q$;\n\n第二行，$N$ 个整数 $h_1,\\cdots,h_N$；\n\n接下来 $Q$ 行，每行若干个整数：第一个整数表示操作类型，接下来若干个数表示参数。", "outputFormat": "\n对于每个操作 3，输出一行表示答案。", "hint": "\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le N, Q\\le 3\\times 10^5$；\n- $1\\le i\\le N$；\n- $1\\le l\\le r\\le N$；\n- $0\\le x,k,h_i\\le 10^9$。\n\n\n| 子任务编号 | $N,Q\\le  $ | 特殊性质 |得分 |  \n| :--: | :--: |  :--: | :--: |\n| $ 1 $    | $ 10^3 $  | A | $5$ |\n| $ 2 $    | $ 8\\times 10^4 $  | A | $8$ |\n| $ 3 $    | $ 10^3 $ | B | $8$ |\n| $ 4 $    | $ 3\\times 10^5 $  | B | $19$ |\n| $ 5 $    | $ 3\\times 10^5 $  | C | $10$ |\n| $ 6 $    | $ 8\\times 10^4 $ |  | $21$ |\n| $ 7 $    | $ 3\\times 10^5 $ |  | $29$ |\n\n- 特殊性质 A：$k=1$。\n- 特殊性质 B：没有操作 2。\n- 特殊性质 C：$l=1,r=N$（这对操作 $1,3$ 都有效）。\n", "locale": "zh-CN"}}}
{"pid": "P11319", "type": "P", "difficulty": 4, "samples": [["3\n42 100 1", "4"], ["5\n1 5 2 4 3", "20"], ["2\n2 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "树状数组", "离散化", "康托展开", "NOISG（新加坡）"], "title": "[NOISG 2020 Qualification] Cryptography", "background": "Charles 是一位密码学家，他正在研究生成随机数的新方法。他试图通过组合多个随机数源来创建一个密码学安全的伪随机数生成器（CSPRNG）。", "description": "他发明了一种算法，包括以下步骤：\n\n1. 随机生成一个长度为 $N$ 的正整数序列 $S$，其中元素两两不同。\n2. 随机打乱 $S$，得到一个长度为 $N$ 的排列 $P$。\n3. 计算排列 $P$ 的字典序排名。\n4. 输出排名对 $10^9 + 7$ 取模的结果。\n\n排列 $P$ 的字典序排名定义为所有小于等于 $P$ 的排列数量。\n\nCharles 是一位密码学家，但不是程序员。现在，给定排列 $P$，请帮助 Charles 计算其字典序排名，并对 $10^9 + 7$ 取模。", "inputFormat": "第一行包含一个整数 $N$，表示排列的长度。  \n第二行包含 $N$ 个正整数 $P_1, P_2, \\dots, P_N$，表示排列 $P$。", "outputFormat": "输出一个整数，表示排列 $P$ 的字典序排名，对 $10^9 + 7$ 取模。", "hint": "【样例解释】\n\n对于样例 #1，以下是所有排列的字典序：\n\n1. $[1, 42, 100]$ \n2. $[1, 100, 42]$\n3. $[42, 1, 100]$\n4. $[42, 100, 1]$\n5. $[100, 1, 42]$\n6. $[100, 42, 1]$\n\n排列 $[42, 100, 1]$ 的字典序排名为 $4$。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$  \n- $1 \\leq P_i \\leq 10^9$  \n- 对于任意 $i \\neq j$，$P_i \\neq P_j$\n\n| 子任务编号 | 分值       | 限制条件                                              |\n|:--------:|:---------:|:--------------------------------------------------:|\n| $1$      | $5$       | $N = 2$                                              |\n| $2$      | $9$       | $1 \\leq N \\leq 8$                                    |\n| $3$      | $10$      | $P$ 为严格递增或递减                                 |\n| $4$      | $11$      | $P = [k, 1, \\dots, k-1, k+1, \\dots, N]$，$1 \\leq k \\leq N$ |\n| $5$      | $21$      | $1 \\leq N \\leq 3 \\times 10^3, 1 \\leq P_i \\leq N$     |\n| $6$      | $13$      | $1 \\leq N \\leq 3 \\times 10^3$                        |\n| $7$      | $19$      | $1 \\leq P_i \\leq N$                                  |\n| $8$      | $12$      | 无其他特殊限制                                       |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Qualification] Cryptography", "background": "Charles 是一位密码学家，他正在研究生成随机数的新方法。他试图通过组合多个随机数源来创建一个密码学安全的伪随机数生成器（CSPRNG）。", "description": "他发明了一种算法，包括以下步骤：\n\n1. 随机生成一个长度为 $N$ 的正整数序列 $S$，其中元素两两不同。\n2. 随机打乱 $S$，得到一个长度为 $N$ 的排列 $P$。\n3. 计算排列 $P$ 的字典序排名。\n4. 输出排名对 $10^9 + 7$ 取模的结果。\n\n排列 $P$ 的字典序排名定义为所有小于等于 $P$ 的排列数量。\n\nCharles 是一位密码学家，但不是程序员。现在，给定排列 $P$，请帮助 Charles 计算其字典序排名，并对 $10^9 + 7$ 取模。", "inputFormat": "第一行包含一个整数 $N$，表示排列的长度。  \n第二行包含 $N$ 个正整数 $P_1, P_2, \\dots, P_N$，表示排列 $P$。", "outputFormat": "输出一个整数，表示排列 $P$ 的字典序排名，对 $10^9 + 7$ 取模。", "hint": "【样例解释】\n\n对于样例 #1，以下是所有排列的字典序：\n\n1. $[1, 42, 100]$ \n2. $[1, 100, 42]$\n3. $[42, 1, 100]$\n4. $[42, 100, 1]$\n5. $[100, 1, 42]$\n6. $[100, 42, 1]$\n\n排列 $[42, 100, 1]$ 的字典序排名为 $4$。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$  \n- $1 \\leq P_i \\leq 10^9$  \n- 对于任意 $i \\neq j$，$P_i \\neq P_j$\n\n| 子任务编号 | 分值       | 限制条件                                              |\n|:--------:|:---------:|:--------------------------------------------------:|\n| $1$      | $5$       | $N = 2$                                              |\n| $2$      | $9$       | $1 \\leq N \\leq 8$                                    |\n| $3$      | $10$      | $P$ 为严格递增或递减                                 |\n| $4$      | $11$      | $P = [k, 1, \\dots, k-1, k+1, \\dots, N]$，$1 \\leq k \\leq N$ |\n| $5$      | $21$      | $1 \\leq N \\leq 3 \\times 10^3, 1 \\leq P_i \\leq N$     |\n| $6$      | $13$      | $1 \\leq N \\leq 3 \\times 10^3$                        |\n| $7$      | $19$      | $1 \\leq P_i \\leq N$                                  |\n| $8$      | $12$      | 无其他特殊限制                                       |", "locale": "zh-CN"}}}
{"pid": "P11320", "type": "P", "difficulty": 4, "samples": [["1 10\n4 8 6", "4"], ["5 100\n50 30 25\n50 40 25\n25 25 25\n75 20 25\n5 5 25", "20"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "NOISG（新加坡）"], "title": "[NOISG 2020 Qualification] Fuel Station", "background": null, "description": "随着油价的暴跌，企鹅 Pengu 决定去拜访老鼠 Squeaky，距离他的家有 $D$ 公里。\n\nPengu 的车辆从出发时拥有 $F$ 升燃料，每公里消耗 $1$ 升燃料，并且车辆在任何时候都能容纳任意数量的燃料。\n\n在 Pengu 和目的地之间有 $N$ 个加油站，第 $i$ 个加油站距离 Pengu 的家 $X_i$ 公里。  \n在每个加油站，Pengu 只能补充最多 $A_i$ 升燃料（为防止囤积便宜燃料），且只有当初始油量 $F \\leq B_i$ 时才能加油（优先给燃料少的车辆）。注意，这里的 $F$ 是出发时的初始燃料量。\n\nPengu 希望能够以尽可能少的初始燃料 $F$ 完成这次旅行。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $D$，分别表示加油站的数量和目的地的距。 \n- 接下来 $N$ 行，每行包含三个整数 $X_i, A_i, B_i$，表示第 $i$ 个加油站的距离、加油量上限以及加油条件限制。", "outputFormat": "输出一个整数，表示完成这次旅行所需的最小初始燃料 $F$。", "hint": "【样例解释】\n\n对于样例 #1：  \n- 以 $F = 4$ 升燃料出发。  \n- 到达第一个加油站（$X_1 = 4$）时油量剩余 $4 - 4 = 0$ 升。  \n- 加油 $A_1 = 8$ 升，因为 $F \\leq B_1 = 6$，此时油量为 $0 + 8 = 8$ 升。  \n- 到达目的地（$X = 10$）时油量剩余 $8 - (10 - 4) = 2$ 升。  \n\n这是可能的最小初始燃料量。\n\n对于样例 #2：  \n- 以 $F = 20$ 升燃料出发。  \n- 到达第 $5$ 个加油站（$X_5 = 5$）时油量剩余 $20 - 5 = 15$ 升。  \n- 加油 $A_5 = 5$ 升，因为 $F \\leq B_5 = 25$，此时油量为 $15 + 5 = 20$ 升。  \n- 到达第 $3$ 个加油站（$X_3 = 25$）时油量剩余 $20 - (25 - 5) = 0$ 升。  \n- 加油 $A_3 = 25$ 升，因为 $F \\leq B_3 = 25$，此时油量为 $0 + 25 = 25$ 升。  \n- 到达第 $1$ 和第 $2$ 个加油站（$X_1 = X_2 = 50$）时油量剩余 $25 - (50 - 25) = 0$ 升。  \n- 分别加油 $A_1 + A_2 = 70$ 升，此时油量为 $0 + 70 = 70$ 升。  \n- 到达目的地（$X = 100$）时油量剩余 $70 - (100 - 50) = 20$ 升。  \n\n这是可能的最小初始燃料量。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$  \n- $1 \\leq A_i, B_i, D \\leq 10^9$  \n- $0 < X_i < D$\n\n| 子任务编号 | 分值       | 限制条件                      |\n|:--------:|:---------:|:--------------------------:|\n| $1$      | $7$       | $N = 1$                     |\n| $2$      | $13$      | $B_i = 10^9$                |\n| $3$      | $17$      | $1 \\leq D \\leq 10^4, 1 \\leq N \\leq 10^4$ |\n| $4$      | $12$      | $1 \\leq D \\leq 10^4$        |\n| $5$      | $19$      | $1 \\leq N \\leq 16$          |\n| $6$      | $11$      | $1 \\leq N \\leq 10^4$        |\n| $7$      | $21$      | 无其他限制                  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Qualification] Fuel Station", "background": null, "description": "随着油价的暴跌，企鹅 Pengu 决定去拜访老鼠 Squeaky，距离他的家有 $D$ 公里。\n\nPengu 的车辆从出发时拥有 $F$ 升燃料，每公里消耗 $1$ 升燃料，并且车辆在任何时候都能容纳任意数量的燃料。\n\n在 Pengu 和目的地之间有 $N$ 个加油站，第 $i$ 个加油站距离 Pengu 的家 $X_i$ 公里。  \n在每个加油站，Pengu 只能补充最多 $A_i$ 升燃料（为防止囤积便宜燃料），且只有当初始油量 $F \\leq B_i$ 时才能加油（优先给燃料少的车辆）。注意，这里的 $F$ 是出发时的初始燃料量。\n\nPengu 希望能够以尽可能少的初始燃料 $F$ 完成这次旅行。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $D$，分别表示加油站的数量和目的地的距。 \n- 接下来 $N$ 行，每行包含三个整数 $X_i, A_i, B_i$，表示第 $i$ 个加油站的距离、加油量上限以及加油条件限制。", "outputFormat": "输出一个整数，表示完成这次旅行所需的最小初始燃料 $F$。", "hint": "【样例解释】\n\n对于样例 #1：  \n- 以 $F = 4$ 升燃料出发。  \n- 到达第一个加油站（$X_1 = 4$）时油量剩余 $4 - 4 = 0$ 升。  \n- 加油 $A_1 = 8$ 升，因为 $F \\leq B_1 = 6$，此时油量为 $0 + 8 = 8$ 升。  \n- 到达目的地（$X = 10$）时油量剩余 $8 - (10 - 4) = 2$ 升。  \n\n这是可能的最小初始燃料量。\n\n对于样例 #2：  \n- 以 $F = 20$ 升燃料出发。  \n- 到达第 $5$ 个加油站（$X_5 = 5$）时油量剩余 $20 - 5 = 15$ 升。  \n- 加油 $A_5 = 5$ 升，因为 $F \\leq B_5 = 25$，此时油量为 $15 + 5 = 20$ 升。  \n- 到达第 $3$ 个加油站（$X_3 = 25$）时油量剩余 $20 - (25 - 5) = 0$ 升。  \n- 加油 $A_3 = 25$ 升，因为 $F \\leq B_3 = 25$，此时油量为 $0 + 25 = 25$ 升。  \n- 到达第 $1$ 和第 $2$ 个加油站（$X_1 = X_2 = 50$）时油量剩余 $25 - (50 - 25) = 0$ 升。  \n- 分别加油 $A_1 + A_2 = 70$ 升，此时油量为 $0 + 70 = 70$ 升。  \n- 到达目的地（$X = 100$）时油量剩余 $70 - (100 - 50) = 20$ 升。  \n\n这是可能的最小初始燃料量。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$  \n- $1 \\leq A_i, B_i, D \\leq 10^9$  \n- $0 < X_i < D$\n\n| 子任务编号 | 分值       | 限制条件                      |\n|:--------:|:---------:|:--------------------------:|\n| $1$      | $7$       | $N = 1$                     |\n| $2$      | $13$      | $B_i = 10^9$                |\n| $3$      | $17$      | $1 \\leq D \\leq 10^4, 1 \\leq N \\leq 10^4$ |\n| $4$      | $12$      | $1 \\leq D \\leq 10^4$        |\n| $5$      | $19$      | $1 \\leq N \\leq 16$          |\n| $6$      | $11$      | $1 \\leq N \\leq 10^4$        |\n| $7$      | $21$      | 无其他限制                  |", "locale": "zh-CN"}}}
{"pid": "P11321", "type": "P", "difficulty": 5, "samples": [["5 4 4\n1 2 1\n3 4 2\n4 5 5\n5 3 8\n3 1 5 2", "8"], ["6 6 4\n1 2 5\n2 4 7\n4 6 50\n6 5 3\n1 5 15\n3 5 6\n1 5 4 6", "15"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "NOISG（新加坡）"], "title": "[NOISG 2020 Qualification] Relay Marathon", "background": "Nilan 是 Berapur 国家的一位马拉松组织者。他计划在国家内的城市网络中组织一场接力马拉松。", "description": "该国家共有 $N$ 个城市，通过 $M$ 条双向道路连接。每个城市编号为 $1$ 到 $N$，每条道路编号为 $1$ 到 $M$，第 $i$ 条道路连接城市 $u_i$ 和 $v_i$，通行时间为 $w_i$ 秒。道路网络中没有自环或重复边。\n\n在 $N$ 个城市中，有 $K$ 个特殊城市，编号分别为 $A_1, A_2, \\dots, A_K$。\n\n接力马拉松的规则如下：\n1. 两组人分别从两个起始城市 `start1` 和 `start2` 出发；\n2. 第一组人从 `start1` 前往 `finish1`；\n3. 第一组人到达 `finish1` 后，第二组人立即（无延迟）从 `start2` 前往 `finish2`；\n4. 接力马拉松在第二组人到达 `finish2` 时结束。\n\n接力马拉松的有效条件：\n- `start1`、`finish1`、`start2` 和 `finish2` 必须是四个不同的特殊城市。\n\n令 $D(a, b)$ 表示从城市 $a$ 到城市 $b$ 的最短通行时间。如果 $a$ 和 $b$ 之间无路径，则定义 $D(a, b) = \\infty$。\n\n接力马拉松的总耗时定义为：\n\n$$\nD(start1, finish1) + D(start2, finish2)\n$$  \n\n你的任务是找到所有有效的起点和终点组合中，总耗时的最小值。", "inputFormat": "- 第一行包含三个整数 $N, M, K$，分别表示城市数量、道路数量和特殊城市数量。\n- 接下来 $M$ 行，每行包含三个整数 $u_i, v_i, w_i$，表示城市 $u_i$ 和 $v_i$ 之间有一条通行时间为 $w_i$ 秒的道路。\n- 最后一行包含 $K$ 个整数 $A_1, A_2, \\dots, A_K$，表示特殊城市的编号。", "outputFormat": "输出一个整数，表示接力马拉松的最小总耗时。", "hint": "【样例解释】\n\n对于样例 #1：\n- 有效组合为 `start1 = 1, finish1 = 2, start2 = 3, finish2 = 5`；\n- $D(1, 2) = 1$，$D(3, 5) = 7$；\n- 总耗时为 $1 + 7 = 8$。\n\n对于样例 #2：\n- 有效组合为 `start1 = 1, finish1 = 4, start2 = 5, finish2 = 6`；\n- $D(1, 4) = 12$，$D(5, 6) = 3$；\n- 总耗时为 $12 + 3 = 15$。\n\n【数据范围】\n\n- $4 \\leq K \\leq N \\leq 10^5$  \n- $2 \\leq M \\leq \\min \\left( \\frac{N(N-1)}{2}, 3 \\times 10^6 \\right)$  \n- $1 \\leq w_i \\leq 1000$  \n- $1 \\leq u_i \\neq v_i \\leq N$\n\n| 子任务编号 | 分值       | 限制条件                     |\n|:--------:|:---------:|:-------------------------:|\n| $1$      | $5$       | $4 \\leq K \\leq N \\leq 50$  |\n| $2$      | $12$      | $4 \\leq K \\leq N \\leq 500$ |\n| $3$      | $25$      | 城市 $1$ 和城市 $2$ 是特殊城市，直接由一条耗时为 $1$ 秒的道路相连，且城市 $1$ 不与其他城市相连，城市 $2$ 也不与其他城市相连 |\n| $4$      | $58$      | 无额外限制                   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Qualification] Relay Marathon", "background": "Nilan 是 Berapur 国家的一位马拉松组织者。他计划在国家内的城市网络中组织一场接力马拉松。", "description": "该国家共有 $N$ 个城市，通过 $M$ 条双向道路连接。每个城市编号为 $1$ 到 $N$，每条道路编号为 $1$ 到 $M$，第 $i$ 条道路连接城市 $u_i$ 和 $v_i$，通行时间为 $w_i$ 秒。道路网络中没有自环或重复边。\n\n在 $N$ 个城市中，有 $K$ 个特殊城市，编号分别为 $A_1, A_2, \\dots, A_K$。\n\n接力马拉松的规则如下：\n1. 两组人分别从两个起始城市 `start1` 和 `start2` 出发；\n2. 第一组人从 `start1` 前往 `finish1`；\n3. 第一组人到达 `finish1` 后，第二组人立即（无延迟）从 `start2` 前往 `finish2`；\n4. 接力马拉松在第二组人到达 `finish2` 时结束。\n\n接力马拉松的有效条件：\n- `start1`、`finish1`、`start2` 和 `finish2` 必须是四个不同的特殊城市。\n\n令 $D(a, b)$ 表示从城市 $a$ 到城市 $b$ 的最短通行时间。如果 $a$ 和 $b$ 之间无路径，则定义 $D(a, b) = \\infty$。\n\n接力马拉松的总耗时定义为：\n\n$$\nD(start1, finish1) + D(start2, finish2)\n$$  \n\n你的任务是找到所有有效的起点和终点组合中，总耗时的最小值。", "inputFormat": "- 第一行包含三个整数 $N, M, K$，分别表示城市数量、道路数量和特殊城市数量。\n- 接下来 $M$ 行，每行包含三个整数 $u_i, v_i, w_i$，表示城市 $u_i$ 和 $v_i$ 之间有一条通行时间为 $w_i$ 秒的道路。\n- 最后一行包含 $K$ 个整数 $A_1, A_2, \\dots, A_K$，表示特殊城市的编号。", "outputFormat": "输出一个整数，表示接力马拉松的最小总耗时。", "hint": "【样例解释】\n\n对于样例 #1：\n- 有效组合为 `start1 = 1, finish1 = 2, start2 = 3, finish2 = 5`；\n- $D(1, 2) = 1$，$D(3, 5) = 7$；\n- 总耗时为 $1 + 7 = 8$。\n\n对于样例 #2：\n- 有效组合为 `start1 = 1, finish1 = 4, start2 = 5, finish2 = 6`；\n- $D(1, 4) = 12$，$D(5, 6) = 3$；\n- 总耗时为 $12 + 3 = 15$。\n\n【数据范围】\n\n- $4 \\leq K \\leq N \\leq 10^5$  \n- $2 \\leq M \\leq \\min \\left( \\frac{N(N-1)}{2}, 3 \\times 10^6 \\right)$  \n- $1 \\leq w_i \\leq 1000$  \n- $1 \\leq u_i \\neq v_i \\leq N$\n\n| 子任务编号 | 分值       | 限制条件                     |\n|:--------:|:---------:|:-------------------------:|\n| $1$      | $5$       | $4 \\leq K \\leq N \\leq 50$  |\n| $2$      | $12$      | $4 \\leq K \\leq N \\leq 500$ |\n| $3$      | $25$      | 城市 $1$ 和城市 $2$ 是特殊城市，直接由一条耗时为 $1$ 秒的道路相连，且城市 $1$ 不与其他城市相连，城市 $2$ 也不与其他城市相连 |\n| $4$      | $58$      | 无额外限制                   |", "locale": "zh-CN"}}}
{"pid": "P11322", "type": "P", "difficulty": 5, "samples": [["9 4\n1 2 10\n2 3 4\n8 9 4\n8 7 3\n7 3 5\n3 4 1\n4 5 3\n5 6 2", "4\n1 8 3 6"], ["9 26\n2 1 21\n2 9 21\n2 8 21\n2 3 56\n3 4 37\n4 5 29\n7 6 25\n6 4 24", "4\n5 6 2 3"], ["3 18\n1 2 35\n2 3 49", "3\n1 2 3"], ["10 3\n10 9 1\n9 8 1\n8 5 1\n1 2 1\n2 3 1\n5 4 1\n3 4 1\n5 6 1\n6 7 1", "2\n4 10"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "Special Judge", "NOISG（新加坡）"], "title": "[NOISG 2020 Qualification] Firefighting", "background": "在 Mouseopolis，这座鼠国的大都会，一场大火席卷了整座城市。为了防止类似灾难再次发生，鼠国的国王 Squeaky 决定在鼠国的城镇中建立消防站。", "description": "鼠国由 $N$ 个城镇组成，编号为 $1$ 到 $N$。城镇之间通过 $N-1$ 条双向道路连接，每条道路连接两个城镇，并且道路的长度可能不同。城镇网络保证任何两个城镇之间都可以通过某些道路相连。\n\n为了有效扑灭火灾，国王的顾问认为消防站到火灾发生地点的距离不得超过 $K$ 公里，否则火势将难以控制。然而，建设消防站的成本较高，国王希望尽可能减少消防站的数量。\n\n任务是确定在鼠国的哪些城镇建设消防站，以使得需要建设的消防站数量最少。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $K$，分别表示城镇的数量和消防站的最大服务距离。\n- 接下来的 $N-1$ 行，每行包含三个整数 $A_i, B_i, D_i$，表示城镇 $A_i$ 和城镇 $B_i$ 之间有一条长度为 $D_i$ 公里的双向道路。", "outputFormat": "- 第一行包含一个整数 $F$，表示需要建设的最少消防站数量。\n- 第二行包含 $F$ 个整数，表示建设消防站的城镇编号。\n\n可以按任意顺序输出。如果有多种可行方案，输出任意一种即可。", "hint": "【样例解释】\n\n对于样例 #1，最少需要在城镇 $1, 8, 3, 6$ 建立消防站，以保证每个城镇到最近的消防站的距离不超过 $4$ 公里。\n\n对于样例 #2，最少需要在城镇 $5, 6, 2, 3$ 建立消防站。\n\n对于样例 #3，必须在每个城镇建立消防站。\n\n对于样例 #4，可以在城镇 $4$ 和 $10$ 建立消防站，或者选择其他符合条件的方案。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$  \n- $1 \\leq K \\leq 10^{15}$  \n- $1 \\leq A_i, B_i \\leq N$  \n- $1 \\leq D_i \\leq 10^9$\n\n| 子任务编号 | 分值       | 限制条件                      |\n|:--------:|:---------:|:--------------------------:|\n| $1$      | $3$       | $K \\leq 20$，且 $D_i \\geq 30$ |\n| $2$      | $5$       | $N \\leq 17, K \\leq 17$，且 $D_i = 1$ |\n| $3$      | $9$       | $N \\leq 17, K \\leq 10^6$，且 $D_i \\leq 10^4$ |\n| $4$      | $19$      | $K \\leq 30$，且 $D_i \\geq 20$ |\n| $5$      | $26$      | $N \\leq 3 \\times 10^3$     |\n| $6$      | $38$      | 无额外限制                 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Qualification] Firefighting", "background": "在 Mouseopolis，这座鼠国的大都会，一场大火席卷了整座城市。为了防止类似灾难再次发生，鼠国的国王 Squeaky 决定在鼠国的城镇中建立消防站。", "description": "鼠国由 $N$ 个城镇组成，编号为 $1$ 到 $N$。城镇之间通过 $N-1$ 条双向道路连接，每条道路连接两个城镇，并且道路的长度可能不同。城镇网络保证任何两个城镇之间都可以通过某些道路相连。\n\n为了有效扑灭火灾，国王的顾问认为消防站到火灾发生地点的距离不得超过 $K$ 公里，否则火势将难以控制。然而，建设消防站的成本较高，国王希望尽可能减少消防站的数量。\n\n任务是确定在鼠国的哪些城镇建设消防站，以使得需要建设的消防站数量最少。", "inputFormat": "- 第一行包含两个整数 $N$ 和 $K$，分别表示城镇的数量和消防站的最大服务距离。\n- 接下来的 $N-1$ 行，每行包含三个整数 $A_i, B_i, D_i$，表示城镇 $A_i$ 和城镇 $B_i$ 之间有一条长度为 $D_i$ 公里的双向道路。", "outputFormat": "- 第一行包含一个整数 $F$，表示需要建设的最少消防站数量。\n- 第二行包含 $F$ 个整数，表示建设消防站的城镇编号。\n\n可以按任意顺序输出。如果有多种可行方案，输出任意一种即可。", "hint": "【样例解释】\n\n对于样例 #1，最少需要在城镇 $1, 8, 3, 6$ 建立消防站，以保证每个城镇到最近的消防站的距离不超过 $4$ 公里。\n\n对于样例 #2，最少需要在城镇 $5, 6, 2, 3$ 建立消防站。\n\n对于样例 #3，必须在每个城镇建立消防站。\n\n对于样例 #4，可以在城镇 $4$ 和 $10$ 建立消防站，或者选择其他符合条件的方案。\n\n【数据范围】\n\n- $1 \\leq N \\leq 3 \\times 10^5$  \n- $1 \\leq K \\leq 10^{15}$  \n- $1 \\leq A_i, B_i \\leq N$  \n- $1 \\leq D_i \\leq 10^9$\n\n| 子任务编号 | 分值       | 限制条件                      |\n|:--------:|:---------:|:--------------------------:|\n| $1$      | $3$       | $K \\leq 20$，且 $D_i \\geq 30$ |\n| $2$      | $5$       | $N \\leq 17, K \\leq 17$，且 $D_i = 1$ |\n| $3$      | $9$       | $N \\leq 17, K \\leq 10^6$，且 $D_i \\leq 10^4$ |\n| $4$      | $19$      | $K \\leq 30$，且 $D_i \\geq 20$ |\n| $5$      | $26$      | $N \\leq 3 \\times 10^3$     |\n| $6$      | $38$      | 无额外限制                 |", "locale": "zh-CN"}}}
{"pid": "P11323", "type": "P", "difficulty": 4, "samples": [["3\n2\n5 1\n4\n4 4 3 3\n6\n1 1 4 5 1 4", "2\n4\n6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "O2优化", "分类讨论", "梦熊比赛"], "title": "【MX-S7-T1】「SMOI-R2」Happy Card", "background": "原题链接：<https://oier.team/problems/S7A>。", "description": "LLL 在 NOIP 前想愉悦身心，于是设计了一个有趣的纸牌游戏。\n\n该游戏中有 $n$ 种不同的牌，编号为 $1,2,\\dots,n$，第 $i$ 种牌有 $v_i$ 张。\n\n总共有四种出牌方法：\n\n- **单牌**：出一张单牌。\n- **对子**：出两张同种的牌。\n- **炸**：出四张同种的牌。\n- **三带一**：出三张同种的牌和一张不同种的牌。\n\n当出完所有牌后即可获得游戏胜利。\n\nLLL 想知道**最少需要出多少次牌**才能获得游戏胜利，请你帮他求出这个值。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示数据组数。接下来，对于每组数据：\n- 第一行，一个正整数 $n$，表示牌的种类数。\n- 第二行，$n$ 个非负整数 $v_1, \\ldots, v_n$，表示第 $i$ 种牌的数量。", "outputFormat": "对于每组测试数据：\n- 仅一行，一个整数，表示最少需要出多少次牌才能获得游戏胜利。", "hint": "**【样例解释 #1】**\n\n对于第一组数据，可以先出 $1, 1, 1, 2$（**三带一**），再出 $1, 1$（**对子**）。\n\n对于第二组数据，可以用 $4$ 次出完：\n\n- 出 $1, 1, 1, 1$（**炸**）。\n- 出 $2, 2, 2, 2$（**炸**）。\n- 出 $3, 3, 3, 4$（**三带一**）。\n- 出 $4, 4$（**对子**）。\n\n**【样例 #2】**\n\n见附件中的 `card/card2.in` 与 `card/card2.ans`。\n\n该组样例满足测试点 $2\\sim 3$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `card/card3.in` 与 `card/card3.ans`。\n\n该组样例满足测试点 $5\\sim 6$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `card/card4.in` 与 `card/card4.ans`。\n\n该组样例满足测试点 $9\\sim 10$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\le T\\le 10$，$1\\le n\\le3\\times10^5$，$0\\le v_i\\le10^9$。\n\n|测试点编号|$n\\le$|$v_i\\le$|\n|:-:|:-:|:-:|\n|$1$|$2$|$10^9$|\n|$2\\sim 3$|$5$|$5$|\n|$4$|$5$|$10^9$|\n|$5\\sim 6$|$50$|$10^9$|\n|$7$|$3\\times 10^5$|$2$|\n|$8$|$3\\times 10^5$|$3$|\n|$9\\sim 10$|$3\\times 10^5$|$10^9$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S7-T1】「SMOI-R2」Happy Card", "background": "原题链接：<https://oier.team/problems/S7A>。", "description": "LLL 在 NOIP 前想愉悦身心，于是设计了一个有趣的纸牌游戏。\n\n该游戏中有 $n$ 种不同的牌，编号为 $1,2,\\dots,n$，第 $i$ 种牌有 $v_i$ 张。\n\n总共有四种出牌方法：\n\n- **单牌**：出一张单牌。\n- **对子**：出两张同种的牌。\n- **炸**：出四张同种的牌。\n- **三带一**：出三张同种的牌和一张不同种的牌。\n\n当出完所有牌后即可获得游戏胜利。\n\nLLL 想知道**最少需要出多少次牌**才能获得游戏胜利，请你帮他求出这个值。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示数据组数。接下来，对于每组数据：\n- 第一行，一个正整数 $n$，表示牌的种类数。\n- 第二行，$n$ 个非负整数 $v_1, \\ldots, v_n$，表示第 $i$ 种牌的数量。", "outputFormat": "对于每组测试数据：\n- 仅一行，一个整数，表示最少需要出多少次牌才能获得游戏胜利。", "hint": "**【样例解释 #1】**\n\n对于第一组数据，可以先出 $1, 1, 1, 2$（**三带一**），再出 $1, 1$（**对子**）。\n\n对于第二组数据，可以用 $4$ 次出完：\n\n- 出 $1, 1, 1, 1$（**炸**）。\n- 出 $2, 2, 2, 2$（**炸**）。\n- 出 $3, 3, 3, 4$（**三带一**）。\n- 出 $4, 4$（**对子**）。\n\n**【样例 #2】**\n\n见附件中的 `card/card2.in` 与 `card/card2.ans`。\n\n该组样例满足测试点 $2\\sim 3$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `card/card3.in` 与 `card/card3.ans`。\n\n该组样例满足测试点 $5\\sim 6$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `card/card4.in` 与 `card/card4.ans`。\n\n该组样例满足测试点 $9\\sim 10$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1\\le T\\le 10$，$1\\le n\\le3\\times10^5$，$0\\le v_i\\le10^9$。\n\n|测试点编号|$n\\le$|$v_i\\le$|\n|:-:|:-:|:-:|\n|$1$|$2$|$10^9$|\n|$2\\sim 3$|$5$|$5$|\n|$4$|$5$|$10^9$|\n|$5\\sim 6$|$50$|$10^9$|\n|$7$|$3\\times 10^5$|$2$|\n|$8$|$3\\times 10^5$|$3$|\n|$9\\sim 10$|$3\\times 10^5$|$10^9$|", "locale": "zh-CN"}}}
