{"pid": "P3938", "type": "P", "difficulty": 4, "samples": [["5 \n1 1 \n2 3 \n5 7 \n7 13 \n4 12", "1 \n1 \n2 \n2 \n4 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2017", "二分", "O2优化", "最近公共祖先 LCA", "Fibonacci 数列"], "title": "斐波那契", "background": "大样例可在页面底部「附件」中下载。", "description": "小 C 养了一些很可爱的兔子。 有一天，小 C 突然发现兔子们都是严格按照伟大的数学家斐波那契提出的模型来进行 繁衍：一对兔子从出生后第二个月起，每个月刚开始的时候都会产下一对小兔子。我们假定， 在整个过程中兔子不会出现任何意外。\n\n小 C 把兔子按出生顺序，把兔子们从 1 开始标号，并且小 C 的兔子都是 1 号兔子和 1 号兔子的后代。如果某两对兔子是同时出生的，那么小 C 会将父母标号更小的一对优先标 号。\n\n如果我们把这种关系用图画下来，前六个月大概就是这样的：\n\n \n  ![](https://cdn.luogu.com.cn/upload/pic/9806.png) \n\n其中，一个箭头 $A \\to B$ 表示 $A$ 是 $B$ 的祖先，相同的颜色表示同一个月出生的兔子。\n\n为了更细致地了解兔子们是如何繁衍的，小 C 找来了一些兔子，并且向你提出了 $m$ 个问题：她想知道关于每两对兔子 $a_i$ 和 $b_i$，他们的最近公共祖先是谁。你能帮帮小 C 吗？\n\n一对兔子的祖先是这对兔子以及他们父母（如果有的话）的祖先，而最近公共祖先是指 两对兔子所共有的祖先中，离他们的距离之和最近的一对兔子。比如，$5$ 和 $7$ 的最近公共祖 先是 $2,1$ 和 $2$ 的最近公共祖先是 $1,6$ 和 $6$ 的最近公共祖先是 $6$。\n", "inputFormat": "输入第一行，包含一个正整数 $m$。输入接下来 $m$ 行，每行包含 $2$ 个正整数，表示 $a_i$ 和 $b_i$。\n", "outputFormat": "输出一共 $m$ 行，每行一个正整数，依次表示你对问题的答案。\n", "hint": "【数据范围与约定】 子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解决一部分测试数据。 每个测试点的数据规模及特点如下表：\n\n ![](https://cdn.luogu.com.cn/upload/pic/9807.png) \n\n特殊性质 $1$：保证 $a_i$, $b_i$ 均为某一个月出生的兔子中标号最大的一对兔子。例如，对 于前六个月，标号最大的兔子分别是 $1, 2, 3, 5, 8, 13$。\n\n特殊性质 $2$：保证 $|a_i-b_i|\\le 1$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Fibonacci", "background": "The large sample can be downloaded in Attachments at the bottom of the page.", "description": "Xiao C (pinyin) keeps some very cute rabbits. One day, Xiao C suddenly discovered that the rabbits reproduce strictly according to the model proposed by the great mathematician Fibonacci: starting from the second month after birth, at the beginning of each month a pair of rabbits gives birth to one new pair. We assume that no accidents occur during the entire process.\n\nXiao C numbers the rabbit pairs in order of birth starting from 1, and all the rabbits are the No. 1 pair and its descendants. If two pairs of rabbits are born at the same time, Xiao C assigns numbers first to the pair whose parents have smaller labels.\n\nIf we draw this relationship as a graph, the first six months look roughly like this:\n\n![](https://cdn.luogu.com.cn/upload/pic/9806.png)\n\nHere, an arrow $A \\to B$ means that $A$ is an ancestor of $B$, and the same color indicates that the pairs were born in the same month.\n\nTo understand the reproduction in more detail, Xiao C picked some pairs of rabbits and asked you $m$ questions: for each two pairs of rabbits $a_i$ and $b_i$, she wants to know their lowest common ancestor. Can you help Xiao C?\n\nAn ancestor of a pair is the pair itself and the ancestors of its parents (if any). The lowest common ancestor (LCA) is the common ancestor of the two pairs that minimizes the sum of distances to them. For example, the LCA of $5$ and $7$ is $2$, the LCA of $1$ and $2$ is $1$, and the LCA of $6$ and $6$ is $6$.\n\n# Description", "inputFormat": "The first line contains a positive integer $m$. Each of the next $m$ lines contains $2$ positive integers, representing $a_i$ and $b_i$.", "outputFormat": "Output $m$ lines. Each line contains one positive integer, in order, representing your answer to the corresponding query.", "hint": "Constraints and Conventions. Subtasks provide characteristics of some testdata. If you encounter difficulties, you may try to solve only part of the testdata. The scale and characteristics of each test point are shown in the table below:\n\n![](https://cdn.luogu.com.cn/upload/pic/9807.png)\n\nSpecial property 1: It is guaranteed that $a_i$ and $b_i$ are both the pair with the largest label among those born in some month. For example, for the first six months, the largest labels are $1, 2, 3, 5, 8, 13$.\n\nSpecial property 2: It is guaranteed that $|a_i-b_i|\\le 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "斐波那契", "background": "大样例可在页面底部「附件」中下载。", "description": "小 C 养了一些很可爱的兔子。 有一天，小 C 突然发现兔子们都是严格按照伟大的数学家斐波那契提出的模型来进行 繁衍：一对兔子从出生后第二个月起，每个月刚开始的时候都会产下一对小兔子。我们假定， 在整个过程中兔子不会出现任何意外。\n\n小 C 把兔子按出生顺序，把兔子们从 1 开始标号，并且小 C 的兔子都是 1 号兔子和 1 号兔子的后代。如果某两对兔子是同时出生的，那么小 C 会将父母标号更小的一对优先标 号。\n\n如果我们把这种关系用图画下来，前六个月大概就是这样的：\n\n \n  ![](https://cdn.luogu.com.cn/upload/pic/9806.png) \n\n其中，一个箭头 $A \\to B$ 表示 $A$ 是 $B$ 的祖先，相同的颜色表示同一个月出生的兔子。\n\n为了更细致地了解兔子们是如何繁衍的，小 C 找来了一些兔子，并且向你提出了 $m$ 个问题：她想知道关于每两对兔子 $a_i$ 和 $b_i$，他们的最近公共祖先是谁。你能帮帮小 C 吗？\n\n一对兔子的祖先是这对兔子以及他们父母（如果有的话）的祖先，而最近公共祖先是指 两对兔子所共有的祖先中，离他们的距离之和最近的一对兔子。比如，$5$ 和 $7$ 的最近公共祖 先是 $2,1$ 和 $2$ 的最近公共祖先是 $1,6$ 和 $6$ 的最近公共祖先是 $6$。\n", "inputFormat": "输入第一行，包含一个正整数 $m$。输入接下来 $m$ 行，每行包含 $2$ 个正整数，表示 $a_i$ 和 $b_i$。\n", "outputFormat": "输出一共 $m$ 行，每行一个正整数，依次表示你对问题的答案。\n", "hint": "【数据范围与约定】 子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解决一部分测试数据。 每个测试点的数据规模及特点如下表：\n\n ![](https://cdn.luogu.com.cn/upload/pic/9807.png) \n\n特殊性质 $1$：保证 $a_i$, $b_i$ 均为某一个月出生的兔子中标号最大的一对兔子。例如，对 于前六个月，标号最大的兔子分别是 $1, 2, 3, 5, 8, 13$。\n\n特殊性质 $2$：保证 $|a_i-b_i|\\le 1$。\n", "locale": "zh-CN"}}}
{"pid": "P3939", "type": "P", "difficulty": 4, "samples": [["6 5 \n1 2 3 2 3 3  \n1 1 3 2 \n1 4 6 3  \n2 3 \n1 1 3 2  \n1 4 6 3", "1 \n2 \n2 \n3 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["线段树", "二分", "O2优化", "可持久化线段树"], "title": "数颜色", "background": "大样例可在页面底部「附件」中下载。", "description": "小 C 的兔子不是雪白的，而是五彩缤纷的。每只兔子都有一种颜色，不同的兔子可能有相同的颜色。小 C 把她标号从 1 到 $n$ 的 $n$ 只兔子排成长长的一排，来给他们喂胡萝卜吃。排列完成后，第 $i$ 只兔子的颜色是 $a_i$。\n\n俗话说得好，“萝卜青菜，各有所爱”。小 C 发现，不同颜色的兔子可能有对胡萝卜的不同偏好。比如，银色的兔子最喜欢吃金色的胡萝卜，金色的兔子更喜欢吃胡萝卜叶子，而绿色的兔子却喜欢吃酸一点的胡萝卜……为了满足兔子们的要求，小 C 十分苦恼。所以，为了使得胡萝卜喂得更加准确，小 C 想知道在区间 $[l_j,r_j]$ 里有多少只颜色为 $c_j$ 的兔子。\n\n不过，因为小 C 的兔子们都十分地活跃，它们不是很愿意待在一个固定的位置；与此同时，小 C 也在根据她知道的信息来给兔子们调整位置。所以，有时编号为 $x_j$ 和 $x_j+1$ 的两只兔子会交换位置。小 C 被这一系列麻烦事给难住了。你能帮帮她吗？", "inputFormat": "从标准输入中读入数据。输入第 1 行两个正整数 $n$,$m$。\n\n输入第 2 行 $n$ 个正整数，第 $i$ 个数表示第 $i$ 只兔子的颜色 $a_i$。\n\n输入接下来 $m$ 行，每行为以下两种中的一种：\n\n- “$1\\ l_j\\ r_j\\ c_j$” ：询问在区间 $[l_j,r_j]$ 里有多少只颜色为 $c_j$ 的兔子；\n\n- “$2\\ x_j$”： $x_j$ 和 $x_j+1$ 两只兔子交换了位置。", "outputFormat": "输出到标准输出中。\n\n对于每个 1 操作，输出一行一个正整数，表示你对于这个询问的答案。", "hint": "【样例 1 说明】\n\n前两个 1 操作和后两个 1 操作对应相同；在第三次的 2 操作后，3 号兔子和 4 号兔子\n\n交换了位置，序列变为 1 2 2 3 3 3。\n\n【数据范围与约定】\n\n子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解 决一部分测试数据。 对于所有测试点，有 $1 \\le l_j < r_j \\le n,1 \\le x_j < n$。 每个测试点的数据规模及特点如下表：\n\n ![](https://cdn.luogu.com.cn/upload/pic/9808.png) \n\n特殊性质 1：保证对于所有操作 1，有 $|r_j - l_j| \\le 20$ 或 $|r_j - l_j| \\le n - 20$。\n\n特殊性质 2：保证不会有两只相同颜色的兔子。", "locale": "zh-CN", "translations": {"en": {"title": "Counting Colors", "background": "Large samples can be downloaded from “Attachments” at the bottom of the page.", "description": "Xiao C’s rabbits are not snow-white, but colorful. Each rabbit has a color, and different rabbits may share the same color. Xiao C lines up her $n$ rabbits, numbered from $1$ to $n$, in a long row to feed them carrots. After arranging, the color of the $i$-th rabbit is $a_i$.\n\nAs the saying goes, “Different strokes for different folks.” Xiao C finds that rabbits of different colors may have different preferences for carrots. For example, silver rabbits like golden carrots the most, golden rabbits prefer carrot leaves, while green rabbits like sour carrots... To satisfy the rabbits’ needs, Xiao C is quite troubled. Therefore, to feed carrots more accurately, Xiao C wants to know how many rabbits of color $c_j$ are in the interval $[l_j, r_j]$.\n\nHowever, Xiao C’s rabbits are very active and are not willing to stay in fixed positions; meanwhile, Xiao C also rearranges the rabbits based on what she knows. So, sometimes the rabbits numbered $x_j$ and $x_j + 1$ will swap positions. Xiao C is overwhelmed by this series of hassles. Can you help her?", "inputFormat": "Read from standard input. The first line contains two positive integers $n, m$.\n\nThe second line contains $n$ positive integers; the $i$-th number denotes the color $a_i$ of the $i$-th rabbit.\n\nThe next $m$ lines each describe one of the following two types of operations:\n- “$1\\ l_j\\ r_j\\ c_j$”: Query how many rabbits of color $c_j$ are in the interval $[l_j, r_j]$.\n- “$2\\ x_j$”: The rabbits numbered $x_j$ and $x_j + 1$ swap positions.", "outputFormat": "Print to standard output.\n\nFor each type-1 operation, output one positive integer on a separate line, which is the answer to that query.", "hint": "[Sample 1 Explanation]\n\nThe first two type-1 operations and the last two type-1 operations are the same queries. After the third type-2 operation, rabbit $3$ and rabbit $4$ swap positions, and the sequence becomes 1 2 2 3 3 3.\n\n[Constraints]\n\nSubtasks provide characteristics of partial testdata. If you encounter difficulties, you can try to solve only part of the testdata. For all test points, $1 \\le l_j < r_j \\le n$, $1 \\le x_j < n$. The scale and characteristics of each test point are shown in the following table:\n\n![](https://cdn.luogu.com.cn/upload/pic/9808.png)\n\nSpecial Property 1: For all type-1 operations, it is guaranteed that either $|r_j - l_j| \\le 20$ or $|r_j - l_j| \\le n - 20$.\n\nSpecial Property 2: It is guaranteed that no two rabbits have the same color.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数颜色", "background": "大样例可在页面底部「附件」中下载。", "description": "小 C 的兔子不是雪白的，而是五彩缤纷的。每只兔子都有一种颜色，不同的兔子可能有相同的颜色。小 C 把她标号从 1 到 $n$ 的 $n$ 只兔子排成长长的一排，来给他们喂胡萝卜吃。排列完成后，第 $i$ 只兔子的颜色是 $a_i$。\n\n俗话说得好，“萝卜青菜，各有所爱”。小 C 发现，不同颜色的兔子可能有对胡萝卜的不同偏好。比如，银色的兔子最喜欢吃金色的胡萝卜，金色的兔子更喜欢吃胡萝卜叶子，而绿色的兔子却喜欢吃酸一点的胡萝卜……为了满足兔子们的要求，小 C 十分苦恼。所以，为了使得胡萝卜喂得更加准确，小 C 想知道在区间 $[l_j,r_j]$ 里有多少只颜色为 $c_j$ 的兔子。\n\n不过，因为小 C 的兔子们都十分地活跃，它们不是很愿意待在一个固定的位置；与此同时，小 C 也在根据她知道的信息来给兔子们调整位置。所以，有时编号为 $x_j$ 和 $x_j+1$ 的两只兔子会交换位置。小 C 被这一系列麻烦事给难住了。你能帮帮她吗？", "inputFormat": "从标准输入中读入数据。输入第 1 行两个正整数 $n$,$m$。\n\n输入第 2 行 $n$ 个正整数，第 $i$ 个数表示第 $i$ 只兔子的颜色 $a_i$。\n\n输入接下来 $m$ 行，每行为以下两种中的一种：\n\n- “$1\\ l_j\\ r_j\\ c_j$” ：询问在区间 $[l_j,r_j]$ 里有多少只颜色为 $c_j$ 的兔子；\n\n- “$2\\ x_j$”： $x_j$ 和 $x_j+1$ 两只兔子交换了位置。", "outputFormat": "输出到标准输出中。\n\n对于每个 1 操作，输出一行一个正整数，表示你对于这个询问的答案。", "hint": "【样例 1 说明】\n\n前两个 1 操作和后两个 1 操作对应相同；在第三次的 2 操作后，3 号兔子和 4 号兔子\n\n交换了位置，序列变为 1 2 2 3 3 3。\n\n【数据范围与约定】\n\n子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解 决一部分测试数据。 对于所有测试点，有 $1 \\le l_j < r_j \\le n,1 \\le x_j < n$。 每个测试点的数据规模及特点如下表：\n\n ![](https://cdn.luogu.com.cn/upload/pic/9808.png) \n\n特殊性质 1：保证对于所有操作 1，有 $|r_j - l_j| \\le 20$ 或 $|r_j - l_j| \\le n - 20$。\n\n特殊性质 2：保证不会有两只相同颜色的兔子。", "locale": "zh-CN"}}}
{"pid": "P3940", "type": "P", "difficulty": 6, "samples": [["5 2 \n1 3 15 10 6", "2\n1 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2017", "O2优化"], "title": "分组", "background": "大样例可在页面底部「附件」中下载。\n", "description": "小 C 在了解了她所需要的信息之后，让兔子们调整到了恰当的位置。小 C 准备给兔子 们分成若干个小组来喂恰当的胡萝卜给兔子们吃。\n\n此时， $n$ 只兔子按一定顺序排成一排，第 $i$ 只兔子的颜色是 $a_i$ 。由于顺序已经是被 调整好了的，所以每个小组都应当是序列上连续的一段。\n\n在分组前，小 C 发现了一个规律：有些兔子会两两发生矛盾。并且，两只兔子会发生矛 盾，当且仅当代表他们的颜色的数值之和为一个正整数的平方。比如，1 色兔子和 2 色兔子 不会发生矛盾，因为 3 不是任何一个正整数的平方；而 1 色兔子却会和 3 色兔子发生矛盾， 因为 $4 = 2^2$。\n\n小 C 认为，只要一个小组内的矛盾不要过大就行。因此，小 C 定义了一个小组的矛盾 值 $k$ ，表示在这个小组里，至少需要将这个组再一次分成 $k$ 个小团体；每个小团体并不需 要是序列上连续的一段，但是需要使得每个小团体内任意两只兔子之间都不会发生矛盾。\n\n小 C 要求，矛盾值最大的小组的矛盾值 $k$ 不超过 $K$ 就可以了。当然，这样的分组方 法可能会有很多个；为了使得分组变得更加和谐，小 C 想知道，在保证分组数量最少的情况 下，字典序最小的方案是什么。你能帮帮她吗？\n\n字典序最小的方案是指，按顺序排列分组的间隔位置，即所有存在兔子 $i$ 和 $i + 1$ 在 不同组的位置 $i$，和其它所有相同分组组数相同的可行方案相比总有第一个不同的位置比其 它方案小的方案。\n", "inputFormat": "从标准输入中读入数据。\n\n输入第 1 行两个正整数 $n,K$。\n\n输入第 2 行 $n$ 个正整数，第 $i$ 个数表示第 $i$ 只兔子的颜色 $a_i$。\n", "outputFormat": "输出到标准输出中。\n\n输出第 1 行一个正整数 $m$，为你至少需要将兔子分为多少个小组。\n\n输出第 2 行$m-1$个从小到大的排列的正整数，第 $i$ 个数 $s_i$ 表示 $s_i$ 和 $s_i + 1$ 在 你的方案里被分到了两个小组。如果 $m = 1$，那么请输出一个空行。\n", "hint": "【样例 1 解释】\n\n如果将五只兔子全部分到同一个小组的话，那么 (1, 3) (3, 6) (6, 10) (10, 15) (1, 15) 均 不能分到同一个小团体；因为最多分成两个小团体，所以为了满足前 4 对限制，只能分为 {{1, 6, 15}, {3, 10}}，但此时不满足 (1, 15) ，所以不存在一种组数为 1 的方案满足全部限制。\n\n\n如果将五只兔子分为两个小组的话，一种字典序最小的可行的分组方案是 {1}, {3, 15, 10, 6}，此时第二组内的小团体数量不超过 2 的一种分法是 {{3, 10}, {15, 6}}。\n\n【数据范围】\n\n子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解 决一部分测试数据。\n\n每个测试点的数据规模及特点如下表：\n\n \n  ![](https://cdn.luogu.com.cn/upload/pic/9809.png) \n\n特殊性质 1：保证最优分组方案唯一。\n\n特殊性质 2：保证不会有两只相同颜色的兔子。\n", "locale": "zh-CN", "translations": {"en": {"title": "Grouping", "background": "Large samples can be downloaded from the \"Attachments\" at the bottom of the page.", "description": "After learning the information she needed, Little C adjusted the rabbits to appropriate positions. She plans to divide the rabbits into several groups to feed them suitable carrots.\n\nAt this moment, $n$ rabbits stand in a line in a fixed order. The $i$-th rabbit has color $a_i$. Since the order has been fixed, each group must be a contiguous segment in the sequence.\n\nBefore grouping, Little C notices a pattern: some rabbits have pairwise conflicts. Two rabbits are in conflict if and only if the sum of their color values is a perfect square. For example, color 1 and color 2 do not conflict because 3 is not a perfect square; but color 1 and color 3 do conflict because $4 = 2^2$.\n\nLittle C thinks it is fine as long as the conflict within a group is not too large. She defines the conflict value $k$ of a group as the minimum number of sub-teams into which this group must be further partitioned so that within each sub-team, any two rabbits do not conflict. These sub-teams do not need to be contiguous segments.\n\nLittle C requires that the maximum conflict value among all groups does not exceed $K$. There may be many grouping methods that satisfy this. To make the grouping more harmonious, she wants to know, among all solutions with the minimum number of groups, which one is lexicographically smallest. Can you help her?\n\nThe lexicographically smallest solution is defined as follows: list in increasing order all positions $i$ such that rabbit $i$ and rabbit $i + 1$ belong to different groups. Among all feasible solutions with the same number of groups, the one whose first differing position is smaller is considered lexicographically smaller.", "inputFormat": "Read from standard input.\n\nThe first line contains two positive integers $n, K$.\n\nThe second line contains $n$ positive integers; the $i$-th number denotes the color $a_i$ of the $i$-th rabbit.", "outputFormat": "Write to standard output.\n\nPrint a single integer $m$ on the first line, the minimum number of groups you need to divide the rabbits into.\n\nPrint $m - 1$ positive integers in increasing order on the second line. The $i$-th number $s_i$ means that $s_i$ and $s_i + 1$ are placed into different groups in your solution. If $m = 1$, then print an empty line.", "hint": "[Sample 1 Explanation]\n\nIf all five rabbits are put into one group, then the pairs (1, 3), (3, 6), (6, 10), (10, 15), (1, 15) cannot be placed in the same sub-team pairwise. Since at most two sub-teams are allowed, to satisfy the first four constraints, the only way is {{1, 6, 15}, {3, 10}}, but then (1, 15) is not satisfied. Therefore, there is no solution with $m = 1$ that satisfies all constraints.\n\nIf the five rabbits are divided into two groups, one lexicographically smallest feasible grouping is {1}, {3, 15, 10, 6}. In this case, one way to partition the second group into at most 2 sub-teams is {{3, 10}, {15, 6}}.\n\nConstraints\n\nSubtasks will specify characteristics of some testdata. If you find the problem difficult, you may try to solve only part of the testdata.\n\nThe size and characteristics of each test point are shown in the table below:\n\n![](https://cdn.luogu.com.cn/upload/pic/9809.png)\n\nSpecial property 1: The optimal grouping is guaranteed to be unique.\n\nSpecial property 2: No two rabbits share the same color.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "分组", "background": "大样例可在页面底部「附件」中下载。\n", "description": "小 C 在了解了她所需要的信息之后，让兔子们调整到了恰当的位置。小 C 准备给兔子 们分成若干个小组来喂恰当的胡萝卜给兔子们吃。\n\n此时， $n$ 只兔子按一定顺序排成一排，第 $i$ 只兔子的颜色是 $a_i$ 。由于顺序已经是被 调整好了的，所以每个小组都应当是序列上连续的一段。\n\n在分组前，小 C 发现了一个规律：有些兔子会两两发生矛盾。并且，两只兔子会发生矛 盾，当且仅当代表他们的颜色的数值之和为一个正整数的平方。比如，1 色兔子和 2 色兔子 不会发生矛盾，因为 3 不是任何一个正整数的平方；而 1 色兔子却会和 3 色兔子发生矛盾， 因为 $4 = 2^2$。\n\n小 C 认为，只要一个小组内的矛盾不要过大就行。因此，小 C 定义了一个小组的矛盾 值 $k$ ，表示在这个小组里，至少需要将这个组再一次分成 $k$ 个小团体；每个小团体并不需 要是序列上连续的一段，但是需要使得每个小团体内任意两只兔子之间都不会发生矛盾。\n\n小 C 要求，矛盾值最大的小组的矛盾值 $k$ 不超过 $K$ 就可以了。当然，这样的分组方 法可能会有很多个；为了使得分组变得更加和谐，小 C 想知道，在保证分组数量最少的情况 下，字典序最小的方案是什么。你能帮帮她吗？\n\n字典序最小的方案是指，按顺序排列分组的间隔位置，即所有存在兔子 $i$ 和 $i + 1$ 在 不同组的位置 $i$，和其它所有相同分组组数相同的可行方案相比总有第一个不同的位置比其 它方案小的方案。\n", "inputFormat": "从标准输入中读入数据。\n\n输入第 1 行两个正整数 $n,K$。\n\n输入第 2 行 $n$ 个正整数，第 $i$ 个数表示第 $i$ 只兔子的颜色 $a_i$。\n", "outputFormat": "输出到标准输出中。\n\n输出第 1 行一个正整数 $m$，为你至少需要将兔子分为多少个小组。\n\n输出第 2 行$m-1$个从小到大的排列的正整数，第 $i$ 个数 $s_i$ 表示 $s_i$ 和 $s_i + 1$ 在 你的方案里被分到了两个小组。如果 $m = 1$，那么请输出一个空行。\n", "hint": "【样例 1 解释】\n\n如果将五只兔子全部分到同一个小组的话，那么 (1, 3) (3, 6) (6, 10) (10, 15) (1, 15) 均 不能分到同一个小团体；因为最多分成两个小团体，所以为了满足前 4 对限制，只能分为 {{1, 6, 15}, {3, 10}}，但此时不满足 (1, 15) ，所以不存在一种组数为 1 的方案满足全部限制。\n\n\n如果将五只兔子分为两个小组的话，一种字典序最小的可行的分组方案是 {1}, {3, 15, 10, 6}，此时第二组内的小团体数量不超过 2 的一种分法是 {{3, 10}, {15, 6}}。\n\n【数据范围】\n\n子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解 决一部分测试数据。\n\n每个测试点的数据规模及特点如下表：\n\n \n  ![](https://cdn.luogu.com.cn/upload/pic/9809.png) \n\n特殊性质 1：保证最优分组方案唯一。\n\n特殊性质 2：保证不会有两只相同颜色的兔子。\n", "locale": "zh-CN"}}}
{"pid": "P3941", "type": "P", "difficulty": 4, "samples": [["2 3 2 \n1 2 1 \n2 1 2", "6 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["O2优化", "枚举", "前缀和"], "title": "入阵曲", "background": "pdf题面和大样例链接：http://pan.baidu.com/s/1cawM7c 密码：xgxv\n\n```plain\n丹青千秋酿，一醉解愁肠。 \n无悔少年枉，只愿壮志狂。 \n```", "description": "小 F 很喜欢数学，但是到了高中以后数学总是考不好。\n\n有一天，他在数学课上发起了呆；他想起了过去的一年。一年前，当他初识算法竞赛的时候，觉得整个世界都焕然一新。这世界上怎么会有这么多奇妙的东西？曾经自己觉得难以解决的问题，被一个又一个算法轻松解决。\n\n小 F 当时暗自觉得，与自己的幼稚相比起来，还有好多要学习的呢。\n\n一年过去了，想想都还有点恍惚。\n\n他至今还能记得，某天晚上听着入阵曲，激动地睡不着觉，写题写到鸡鸣时分都兴奋不已。也许，这就是热血吧。\n\n \n![](https://cdn.luogu.com.cn/upload/pic/9810.png) \n\n也就是在那个时候，小 F 学会了矩阵乘法。让两个矩阵乘几次就能算出斐波那契数列的第 $10^{100}$ 项，真是奇妙无比呢。\n\n不过，小 F 现在可不想手算矩阵乘法——他觉得好麻烦。取而代之的，是一个简单的小问题。他写写画画，画出了一个 $n \\times m$ 的矩阵，每个格子里都有一个不超过 $k$ 的正整数。\n\n小 F 想问问你，这个矩阵里有多少个不同的子矩形中的数字之和是 $k$ 的倍数？ 如果把一个子矩形用它的左上角和右下角描述为 $(x_1,y_1,x_2,y_2)$，其中$x_1 \\le x_2,y_1 \\le y_2$； 那么，我们认为两个子矩形是不同的，当且仅当他们以 $(x_1,y_1,x_2,y_2)$ 表示时不同；也就是说，只要两个矩形以 $(x_1,y_1,x_2,y_2)$ 表示时相同，就认为这两个矩形是同一个矩形，你应该在你的答案里只算一次。", "inputFormat": "从标准输入中读入数据。\n\n输入第一行，包含三个正整数 $n,m,k$。\n\n输入接下来 $n$ 行，每行包含 $m$ 个正整数，第 $i$ 行第 $j$ 列表示矩阵中第 $i$ 行第 $j$ 列 中所填的正整数 $a_{i,j}$。", "outputFormat": "输出到标准输出中。\n\n输入一行一个非负整数，表示你的答案。", "hint": "【样例 1 说明】\n\n这些矩形是符合要求的：$(1, 1, 1, 3),(1, 1, 2, 2),(1, 2, 1, 2),(1, 2, 2, 3),(2, 1, 2, 1),(2, 3, 2, 3)$。\n\n\n子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解决一部分测试数据。\n\n每个测试点的数据规模及特点如下表：\n\n \n  ![](https://cdn.luogu.com.cn/upload/pic/9811.png) \n\n特殊性质：保证所有 $a_{i,j}$ 均相同。", "locale": "zh-CN", "translations": {"en": {"title": "Ruzhenqu", "background": "PDF statement and large samples link: http://pan.baidu.com/s/1cawM7c Password: xgxv.\n\n```plain\n丹青千秋酿，一醉解愁肠。 \n无悔少年枉，只愿壮志狂。 \n```", "description": "Xiao F likes mathematics very much, but after entering high school he has never done well in math exams.\n\nOne day, he spaced out during math class; he thought about the past year. A year ago, when he first encountered algorithm contests, he felt that the whole world was brand new. How could there be so many wonderful things in this world? Problems that he used to think were hard were easily solved by one algorithm after another.\n\nBack then, Xiao F secretly felt that, compared with his own naivety, he still had a lot to learn.\n\nA year has passed, and thinking about it still feels a bit unreal.\n\nHe can still remember that one night, listening to Ruzhenqu, he was too excited to sleep. He kept solving problems until the rooster crowed at dawn, and he was still thrilled. Maybe that’s what “hot-blooded” feels like.\n\n![](https://cdn.luogu.com.cn/upload/pic/9810.png)\n\nIt was around that time that Xiao F learned matrix multiplication. Multiplying two matrices a few times to compute the $10^{100}$-th term of the Fibonacci sequence felt truly amazing.\n\nHowever, Xiao F does not want to do matrix multiplication by hand now—he finds it troublesome. Instead, he came up with a simple little problem. He drew an $n \\times m$ matrix, with each cell containing a positive integer not exceeding $k$.\n\nXiao F wants to ask you: how many different subrectangles in this matrix have a sum of numbers that is a multiple of $k$? If a subrectangle is described by its top-left and bottom-right corners as $(x_1,y_1,x_2,y_2)$, where $x_1 \\le x_2, y_1 \\le y_2$; then we consider two subrectangles to be different if and only if their $(x_1,y_1,x_2,y_2)$ representations differ. In other words, as long as two rectangles have the same $(x_1,y_1,x_2,y_2)$ representation, they are regarded as the same rectangle, and you should count it only once in your answer.", "inputFormat": "Read from standard input.\n\nThe first line contains three positive integers $n,m,k$.\n\nThe next $n$ lines each contain $m$ positive integers. In the $i$-th row, the $j$-th column contains the positive integer $a_{i,j}$.", "outputFormat": "Output to standard output.\n\nOutput a single non-negative integer on one line, which is your answer.", "hint": "[Sample 1 explanation]\n\nThese rectangles meet the requirement: $(1, 1, 1, 3),(1, 1, 2, 2),(1, 2, 1, 2),(1, 2, 2, 3),(2, 1, 2, 1),(2, 3, 2, 3)$.\n\nSubtasks will provide characteristics of some testdata. If you find the problem difficult, you can try solving only part of the testdata.\n\nThe data scale and characteristics for each test point are shown in the following table:\n\n![](https://cdn.luogu.com.cn/upload/pic/9811.png)\n\nSpecial property: all $a_{i,j}$ are guaranteed to be equal.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "入阵曲", "background": "pdf题面和大样例链接：http://pan.baidu.com/s/1cawM7c 密码：xgxv\n\n```plain\n丹青千秋酿，一醉解愁肠。 \n无悔少年枉，只愿壮志狂。 \n```", "description": "小 F 很喜欢数学，但是到了高中以后数学总是考不好。\n\n有一天，他在数学课上发起了呆；他想起了过去的一年。一年前，当他初识算法竞赛的时候，觉得整个世界都焕然一新。这世界上怎么会有这么多奇妙的东西？曾经自己觉得难以解决的问题，被一个又一个算法轻松解决。\n\n小 F 当时暗自觉得，与自己的幼稚相比起来，还有好多要学习的呢。\n\n一年过去了，想想都还有点恍惚。\n\n他至今还能记得，某天晚上听着入阵曲，激动地睡不着觉，写题写到鸡鸣时分都兴奋不已。也许，这就是热血吧。\n\n \n![](https://cdn.luogu.com.cn/upload/pic/9810.png) \n\n也就是在那个时候，小 F 学会了矩阵乘法。让两个矩阵乘几次就能算出斐波那契数列的第 $10^{100}$ 项，真是奇妙无比呢。\n\n不过，小 F 现在可不想手算矩阵乘法——他觉得好麻烦。取而代之的，是一个简单的小问题。他写写画画，画出了一个 $n \\times m$ 的矩阵，每个格子里都有一个不超过 $k$ 的正整数。\n\n小 F 想问问你，这个矩阵里有多少个不同的子矩形中的数字之和是 $k$ 的倍数？ 如果把一个子矩形用它的左上角和右下角描述为 $(x_1,y_1,x_2,y_2)$，其中$x_1 \\le x_2,y_1 \\le y_2$； 那么，我们认为两个子矩形是不同的，当且仅当他们以 $(x_1,y_1,x_2,y_2)$ 表示时不同；也就是说，只要两个矩形以 $(x_1,y_1,x_2,y_2)$ 表示时相同，就认为这两个矩形是同一个矩形，你应该在你的答案里只算一次。", "inputFormat": "从标准输入中读入数据。\n\n输入第一行，包含三个正整数 $n,m,k$。\n\n输入接下来 $n$ 行，每行包含 $m$ 个正整数，第 $i$ 行第 $j$ 列表示矩阵中第 $i$ 行第 $j$ 列 中所填的正整数 $a_{i,j}$。", "outputFormat": "输出到标准输出中。\n\n输入一行一个非负整数，表示你的答案。", "hint": "【样例 1 说明】\n\n这些矩形是符合要求的：$(1, 1, 1, 3),(1, 1, 2, 2),(1, 2, 1, 2),(1, 2, 2, 3),(2, 1, 2, 1),(2, 3, 2, 3)$。\n\n\n子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解决一部分测试数据。\n\n每个测试点的数据规模及特点如下表：\n\n \n  ![](https://cdn.luogu.com.cn/upload/pic/9811.png) \n\n特殊性质：保证所有 $a_{i,j}$ 均相同。", "locale": "zh-CN"}}}
{"pid": "P3942", "type": "P", "difficulty": 5, "samples": [["4 1 0 \n1 2 \n1 3 \n1 4", "1 \n "], ["6 1 0 \n1 2 \n1 3 \n1 4 \n4 5 \n4 6", "2 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "贪心", "O2优化", "排序", "栈"], "title": "将军令", "background": "> 历史/落在/赢家/之手  \n> 至少/我们/拥有/传说  \n> 谁说/败者/无法/不朽  \n> 拳头/只能/让人/低头  \n> 念头/却能/让人/抬头  \n> 抬头/去看/去爱/去追  \n> 你心中的梦", "description": "又想起了四月。\n\n如果不是省选，大家大概不会这么轻易地分道扬镳吧？只见一个又一个昔日的队友离开了机房。\n\n凭君莫话封侯事，一将功成万骨枯。\n\n梦里，小 F 成了一个给将军送密信的信使。\n\n现在，有两封关乎国家生死的密信需要送到前线大将军帐下，路途凶险，时间紧迫。小 F 没有怯战，勇敢地承担了这个任务。\n\n不过，小 F 实在是太粗心了，他一不小心把两封密信中的一封给弄掉了。\n\n小 F 偷偷打开了剩下的那封密信。他发现一副十分详细的地图，以及几句批文——原来这是战场周围的情报地图。他仔细看后发现，在这张地图上标记了 $n$ 个从 $1$ 到 $n$ 标号的驿站，$n - 1$ 条长度为 $1$ 里的小道，每条小道双向连接两个不同的驿站，并且驿站之间可以通过小道两两可达。\n\n小 F 仔细辨认着上面的批注，突然明白了丢失的信的内容了。原来，每个驿站都可以驻扎一个小队，每个小队可以控制距离不超过 $k$ 里的驿站。如果有驿站没被控制，就容易产生危险——因此这种情况应该完全避免。而那封丢失的密信里，就装着数学重臣留下的精妙的排布方案，也就是用了最少的小队来控制所有驿站。\n\n小 F 知道，如果能计算出最优方案的话，也许他就能够将功赎过，免于死罪。他找到了你，你能帮帮他吗？当然，小 F 在等待你的支援的过程中，也许已经从图上观察出了一些可能会比较有用的性质，他会通过一种特殊的方式告诉你。", "inputFormat": "从标准输入中读入数据。\n\n输入第 $1$ 行为三个正整数 $n,k,t$，分别代表：驿站数，一支小队能够控制的最远距离，以及对应的特殊性质的编号。关于特殊性质请参考数据范围中的表格。\n\n输入第 $2$ 行至第 $n$ 行，每行两个正整数 $u_i,v_i$，表示在编号为 $u_i$ 和 $v_i$ 的驿站之间有一条长度为 $1$ 里的小道。", "outputFormat": "输出到标准输出中。\n\n输出仅包含一行一个正整数，为最优方案下需要的小队数。", "hint": "【样例 1 说明】\n\n如图。由于一号节点到周围的点距离均是 $1$，因此可以控制所有驿站。\n\n【样例 2 说明】\n\n如图，和样例 1 类似。\n\n\n\n![](https://cdn.luogu.com.cn/upload/pic/9813.png)\n\n子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解决一部分测试数据。\n\n$t$ 的含义如下：\n- $t = 0$：该测试点没有额外的特殊性质；\n- $t = 1$：保证最多 $8$ 个点的所连接的小道超过 $1$ 条；\n- $t = 2$：保证所有点到 $1$ 号点的距离不超过 $2$。\n\n每个测试点的数据规模及特点如下表\n\n![](https://cdn.luogu.com.cn/upload/pic/9812.png)", "locale": "zh-CN", "translations": {"en": {"title": "General's Order", "background": "> History/falls into/the victor's/hands  \n> At least/we/have/legends  \n> Who says/the defeated/cannot/be immortal  \n> Fists/can only/make people/bow their heads  \n> Thoughts/can/make people/lift their heads  \n> Lift your head/to look/to love/to chase  \n> The dream in your heart.", "description": "April comes to mind again.\n\nIf not for the NOI Qualifier, we probably wouldn’t have parted ways so easily, right? One by one, former teammates left the computer room.\n\n“Speak no more of marquisates; a general's success is built upon myriad bones.”\n\nIn a dream, little F became a courier delivering secret letters to a general.\n\nNow, there are two secret letters crucial to the life and death of the nation that must be delivered to the commanding general at the front. The journey is perilous and time is tight. Little F, undeterred by personal risk, bravely takes on the task.\n\nHowever, little F is very careless. He accidentally lost one of the two secret letters.\n\nHe secretly opened the remaining letter and found a very detailed map together with a few annotations—turns out it was an intelligence map of the battlefield and its surroundings. On this map, there are $n$ relay stations labeled from $1$ to $n$, and $n - 1$ small roads of length $1$ li, each road bidirectionally connecting two different relay stations. Any two stations are reachable via these roads.\n\nCarefully reading the notes, little F suddenly understood the contents of the lost letter. Each relay station can host one squad, and each squad can control all stations within a distance no more than $k$ li. If any station is left uncontrolled, danger may arise—so such situations must be completely avoided. The lost secret letter contained a brilliant arrangement from the imperial mathematical minister: an optimal placement using the fewest squads to control all relay stations.\n\nLittle F knows that if he can compute the optimal plan, he might redeem his mistake and avoid the death penalty. He found you—can you help him? Of course, while waiting for your assistance, little F may have observed some potentially useful properties from the map, which he will convey to you in a special way.", "inputFormat": "Read from standard input.\n\nThe first line contains three positive integers $n$, $k$, $t$, representing the number of relay stations, the maximum distance a squad can control, and the code for a special property. For the special property, see the Hint.\n\nThe next $n - 1$ lines each contain two positive integers $u_i$, $v_i$, indicating that there is a bidirectional small road of length $1$ li between $u_i$ and $v_i$.", "outputFormat": "Write to standard output.\n\nOutput a single line: the number of squads required under an optimal plan.", "hint": "[Sample 1 Explanation]\n\nAs shown in the figure. Since the distance from node $1$ to its surrounding nodes is $1$, it can control all relay stations.\n\n[Sample 2 Explanation]\n\nAs shown in the figure, similar to Sample 1.\n\n![](https://cdn.luogu.com.cn/upload/pic/9813.png)\n\nSubtasks will provide some characteristics of the testdata. If you find the problem difficult, you can try to solve only part of the testdata.\n\nThe meaning of $t$ is as follows:\n- $t = 0$: This test point has no additional special property.\n- $t = 1$: It is guaranteed that at most $8$ nodes are incident to more than $1$ road.\n- $t = 2$: It is guaranteed that the distance from every node to node $1$ is at most $2$.\n\nThe scale and characteristics of each test point are shown in the following table:\n\n![](https://cdn.luogu.com.cn/upload/pic/9812.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "将军令", "background": "> 历史/落在/赢家/之手  \n> 至少/我们/拥有/传说  \n> 谁说/败者/无法/不朽  \n> 拳头/只能/让人/低头  \n> 念头/却能/让人/抬头  \n> 抬头/去看/去爱/去追  \n> 你心中的梦", "description": "又想起了四月。\n\n如果不是省选，大家大概不会这么轻易地分道扬镳吧？只见一个又一个昔日的队友离开了机房。\n\n凭君莫话封侯事，一将功成万骨枯。\n\n梦里，小 F 成了一个给将军送密信的信使。\n\n现在，有两封关乎国家生死的密信需要送到前线大将军帐下，路途凶险，时间紧迫。小 F 没有怯战，勇敢地承担了这个任务。\n\n不过，小 F 实在是太粗心了，他一不小心把两封密信中的一封给弄掉了。\n\n小 F 偷偷打开了剩下的那封密信。他发现一副十分详细的地图，以及几句批文——原来这是战场周围的情报地图。他仔细看后发现，在这张地图上标记了 $n$ 个从 $1$ 到 $n$ 标号的驿站，$n - 1$ 条长度为 $1$ 里的小道，每条小道双向连接两个不同的驿站，并且驿站之间可以通过小道两两可达。\n\n小 F 仔细辨认着上面的批注，突然明白了丢失的信的内容了。原来，每个驿站都可以驻扎一个小队，每个小队可以控制距离不超过 $k$ 里的驿站。如果有驿站没被控制，就容易产生危险——因此这种情况应该完全避免。而那封丢失的密信里，就装着数学重臣留下的精妙的排布方案，也就是用了最少的小队来控制所有驿站。\n\n小 F 知道，如果能计算出最优方案的话，也许他就能够将功赎过，免于死罪。他找到了你，你能帮帮他吗？当然，小 F 在等待你的支援的过程中，也许已经从图上观察出了一些可能会比较有用的性质，他会通过一种特殊的方式告诉你。", "inputFormat": "从标准输入中读入数据。\n\n输入第 $1$ 行为三个正整数 $n,k,t$，分别代表：驿站数，一支小队能够控制的最远距离，以及对应的特殊性质的编号。关于特殊性质请参考数据范围中的表格。\n\n输入第 $2$ 行至第 $n$ 行，每行两个正整数 $u_i,v_i$，表示在编号为 $u_i$ 和 $v_i$ 的驿站之间有一条长度为 $1$ 里的小道。", "outputFormat": "输出到标准输出中。\n\n输出仅包含一行一个正整数，为最优方案下需要的小队数。", "hint": "【样例 1 说明】\n\n如图。由于一号节点到周围的点距离均是 $1$，因此可以控制所有驿站。\n\n【样例 2 说明】\n\n如图，和样例 1 类似。\n\n\n\n![](https://cdn.luogu.com.cn/upload/pic/9813.png)\n\n子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解决一部分测试数据。\n\n$t$ 的含义如下：\n- $t = 0$：该测试点没有额外的特殊性质；\n- $t = 1$：保证最多 $8$ 个点的所连接的小道超过 $1$ 条；\n- $t = 2$：保证所有点到 $1$ 号点的距离不超过 $2$。\n\n每个测试点的数据规模及特点如下表\n\n![](https://cdn.luogu.com.cn/upload/pic/9812.png)", "locale": "zh-CN"}}}
{"pid": "P3943", "type": "P", "difficulty": 6, "samples": [["5 2 2 \n1 5 \n3 4", "2   \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["O2优化", "背包 DP", "差分", "状压 DP"], "title": "星空", "background": "pdf题面和大样例链接：http://pan.baidu.com/s/1cawM7c 密码：xgxv\n\n```cpp\n命运偷走如果只留下结果， 时间偷走初衷只留下了苦衷。\n你来过，然后你走后，只留下星空。\n```", "description": "逃不掉的那一天还是来了，小 F 看着夜空发呆。\n\n天上空荡荡的，没有一颗星星——大概是因为天上吹不散的乌云吧。\n\n心里吹不散的乌云，就让它在那里吧，反正也没有机会去改变什么了。\n\n小 C 拿来了一长串星型小灯泡，假装是星星，递给小 F，想让小 F 开心一点。不过，有着强迫症的小 F 发现，这串一共 $n$ 个灯泡的灯泡串上有 $k$ 个灯泡没有被点亮。小 F 决定和小 C 一起把这个灯泡串全部点亮。\n\n不过，也许是因为过于笨拙，小 F 只能将其中连续一段的灯泡状态给翻转——点亮暗灯泡，熄灭亮灯泡。经过摸索，小 F 发现他一共能够翻转 $m$ 种长度的灯泡段中灯泡的状态。\n\n小 C 和小 F 最终花了很长很长很长很长很长很长的时间把所有灯泡给全部点亮了。他们想知道他们是不是蠢了，因此他们找到了你，让你帮忙算算：在最优的情况下，至少需要几次操作才能把整个灯泡串给点亮？", "inputFormat": "从标准输入中读入数据。\n\n输入第 $1$ 行三个正整数 $n,k,m$。\n\n输入第 $2$ 行 $k$ 个正整数，第 $i$ 个数表示第 $i$ 个被没点亮的灯泡的位置 $a_i$。\n\n输入第 $3$ 行 $m$ 个正整数，第 $i$ 个数表示第 $i$ 种操作的长度 $b_i$。\n\n保证所有 $b_i$ 互不相同；保证对于 $1\\le i<k$，有 $a_i<a_{i+1}$；保证输入数据有解。", "outputFormat": "输出标准输入中。\n\n输出一行一个非负整数，表示最少操作次数。\n", "hint": "【样例 1 解释】\n\n ![](https://cdn.luogu.com.cn/upload/pic/9814.png) \n\n【数据范围与约定】\n\n子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解 决一部分测试数据。\n\n每个测试点的数据规模及特点如下表\n\n ![](https://cdn.luogu.com.cn/upload/pic/9815.png) \n\n特殊性质：保证答案小于 4\n", "locale": "zh-CN", "translations": {"en": {"title": "Starry Sky", "background": "PDF statement and large sample link: http://pan.baidu.com/s/1cawM7c Password: xgxv.\n\n```cpp\n命运偷走如果只留下结果， 时间偷走初衷只留下了苦衷。\n你来过，然后你走后，只留下星空。\n```", "description": "The inevitable day still came. Little F stared blankly at the night sky.\n\nThe sky was empty, with not a single star—probably because of the heavy clouds that would not disperse.\n\nAs for the clouds in the heart that will not disperse, just let them be. After all, there is no chance to change anything.\n\nLittle C brought a long string of star-shaped mini bulbs, pretending they were stars, and handed it to Little F, hoping to cheer him up. However, due to a bit of OCD, Little F noticed that among the total of $n$ bulbs, $k$ bulbs on the string were not lit. Little F decided to work with Little C to light up the entire string.\n\nBut perhaps due to clumsiness, Little F could only flip the states of a contiguous segment of bulbs—turning off lit bulbs and turning on unlit bulbs. After some trials, Little F found that he could flip segments of $m$ different lengths.\n\nLittle C and Little F eventually spent a very very very very very very long time to light up all the bulbs. They want to know if they were being silly, so they came to you to calculate: in the optimal case, what is the minimum number of operations needed to light up the entire bulb string?", "inputFormat": "Read from standard input.\n\n- The first line contains three positive integers $n$, $k$, $m$.\n- The second line contains $k$ positive integers. The $i$-th number is the position $a_i$ of the $i$-th bulb that is not lit.\n- The third line contains $m$ positive integers. The $i$-th number is the length $b_i$ of the $i$-th operation.\n\nIt is guaranteed that all $b_i$ are distinct; for $1 \\le i < k$, $a_i < a_{i+1}$; and the input has a solution.", "outputFormat": "Print one non-negative integer: the minimum number of operations.", "hint": "[Explanation for Sample 1]\n\n![](https://cdn.luogu.com.cn/upload/pic/9814.png)\n\n[Constraints and Conventions]\n\nSubtasks specify some properties of the testdata. If you find the problem difficult, you may try to solve only part of the testdata.\n\nThe data scale and features of each test point are summarized in the table below.\n\n![](https://cdn.luogu.com.cn/upload/pic/9815.png)\n\nSpecial property: It is guaranteed that the answer is less than $4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "星空", "background": "pdf题面和大样例链接：http://pan.baidu.com/s/1cawM7c 密码：xgxv\n\n```cpp\n命运偷走如果只留下结果， 时间偷走初衷只留下了苦衷。\n你来过，然后你走后，只留下星空。\n```", "description": "逃不掉的那一天还是来了，小 F 看着夜空发呆。\n\n天上空荡荡的，没有一颗星星——大概是因为天上吹不散的乌云吧。\n\n心里吹不散的乌云，就让它在那里吧，反正也没有机会去改变什么了。\n\n小 C 拿来了一长串星型小灯泡，假装是星星，递给小 F，想让小 F 开心一点。不过，有着强迫症的小 F 发现，这串一共 $n$ 个灯泡的灯泡串上有 $k$ 个灯泡没有被点亮。小 F 决定和小 C 一起把这个灯泡串全部点亮。\n\n不过，也许是因为过于笨拙，小 F 只能将其中连续一段的灯泡状态给翻转——点亮暗灯泡，熄灭亮灯泡。经过摸索，小 F 发现他一共能够翻转 $m$ 种长度的灯泡段中灯泡的状态。\n\n小 C 和小 F 最终花了很长很长很长很长很长很长的时间把所有灯泡给全部点亮了。他们想知道他们是不是蠢了，因此他们找到了你，让你帮忙算算：在最优的情况下，至少需要几次操作才能把整个灯泡串给点亮？", "inputFormat": "从标准输入中读入数据。\n\n输入第 $1$ 行三个正整数 $n,k,m$。\n\n输入第 $2$ 行 $k$ 个正整数，第 $i$ 个数表示第 $i$ 个被没点亮的灯泡的位置 $a_i$。\n\n输入第 $3$ 行 $m$ 个正整数，第 $i$ 个数表示第 $i$ 种操作的长度 $b_i$。\n\n保证所有 $b_i$ 互不相同；保证对于 $1\\le i<k$，有 $a_i<a_{i+1}$；保证输入数据有解。", "outputFormat": "输出标准输入中。\n\n输出一行一个非负整数，表示最少操作次数。\n", "hint": "【样例 1 解释】\n\n ![](https://cdn.luogu.com.cn/upload/pic/9814.png) \n\n【数据范围与约定】\n\n子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解 决一部分测试数据。\n\n每个测试点的数据规模及特点如下表\n\n ![](https://cdn.luogu.com.cn/upload/pic/9815.png) \n\n特殊性质：保证答案小于 4\n", "locale": "zh-CN"}}}
{"pid": "P3944", "type": "P", "difficulty": 4, "samples": [["3 5\n1 2 3 \n", "0 5"], ["8 8\n10 20 30 40 50 60 70 80\n", "16 23"], ["8 80\n10 20 30 40 50 60 70 80\n", "Human Cannot Win Dog"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "贪心", "排序"], "title": "肮脏的牧师", "background": "@Yumis 出题人在这里哦~\n", "description": "Yumis最近在玩炉石传说。\n\n在炉石传说中脏牧有一张一费卡片（一费就是使用要消耗1点法力水晶），叫做疯狂药水，这个的效果是将一个敌方场上攻击小于等于2的随从拉到自己的战场内。\n\n还有一张四费卡片叫做暗影狂乱，这个的效果是将一个敌方场上攻击小于等于3的随从拉到自己的战场内。\n\n还有一张一费卡片就是缩小药水，这个的效果是将敌人全场的随从攻击力下降3点。\n\n\n你PY了炉石的GM所以你有了无数张的这三种卡片，但是GM告诉你缩小药水是这个牌比较不好创建，为了为GM着想你必须在使用**最少的缩小药水**的情况下A爆对手的脸。\n\n\n现在你的对手场上有n个随从，每个随从的攻击力是ki点。\n\n你的对手有m点血量。\n\n\n而你现在要做的就是将敌方的场上的随从拉过来自己的场上并攻击对手（每一个随从只能攻击一次，攻击力为你拉过来的时候随从剩余的攻击力），A爆对面的脸（将对面的血打到0点及以下）。\n", "inputFormat": "第一行用一个空格隔开的两个整数n,m分别代表敌方场上的随从数量和你对手的血量。\n\n第二行n个整数每两个整数之间用一个空格隔开，分别代表敌方场上每一个随从的攻击力ki。\n", "outputFormat": "一行如果可以A爆则输出**最少使用的缩小药水的数量**和此时使用的法力水晶，两个数据之间用一个空格隔开（如果有多个答案则输出消耗法力水晶最少的答案）。\n\n否则输出“Human Cannot Win Dog”（没有双引号）\n", "hint": "样例说明1：\n\n敌方场上有3只随从，敌方有5点血量\n\n我们把3攻随从和2攻随从拉过来花费0个缩小药水和5点耗费（一张疯狂药水一个暗影狂乱（1+4 = 5））伤害足够击杀对方。\n\n\n样例说明2：\n\n使用16个缩小药水（下面数据后面第一个括号指拉过来的时候伤害为多高 ，第二个括号表示拉过来的时候使用多少的缩小药水）\n\n拿10（1）（3）、20（2）（6）、30（3）（9）、50（2）（16）攻的怪物总共造成8点伤害 刚好A爆！\n\n\n\nEasy : 保证 0 < n <= 10  并且不存在用到暗影狂乱和缩小药水的情况    20%\n\n\nNormal ：保证 0 < n <= 10  并且不存在用到缩小药水的情况           20%\n\n\nHard ：保证 0 < n <= 10                                                 30%\n\n\nExtra：保证0 <= n <= 5000000(6个0)，最大攻击力小于30000                  30%\n\n\n保证 0 < n <= 5000000     0 < ki <=30000    0<=m<=5000000 (6个0)\n", "locale": "zh-CN", "translations": {"en": {"title": "Dirty Priest", "background": "@Yumis, the problem setter, is here~", "description": "Yumis has recently been playing Hearthstone.\n\nIn Hearthstone, the \"Dirty Priest\" archetype uses a 1-mana card called \"Potion of Madness,\" whose effect is: take control of an enemy minion with attack ≤ 2.\n\nThere is also a 4-mana card called \"Shadow Madness,\" whose effect is: take control of an enemy minion with attack ≤ 3.\n\nThere is another 1-mana card called \"Shrink Potion,\" whose effect is: reduce the attack of all enemy minions by 3.\n\nYou have \"PY\" (pinyin) the Hearthstone GM, so you now have unlimited copies of these three cards. However, the GM told you that \"Shrink Potion\" is harder to create. To be considerate to the GM, you must kill the opponent while using the minimum number of Shrink Potions.\n\nYour opponent currently has n minions on board, with attack values k_i.\n\nYour opponent has m health.\n\nYour task is to take control of enemy minions onto your side and attack the opponent with them. Each minion can attack at most once, and the damage it deals equals its remaining attack at the moment you take control. You need to burst the opponent down (reduce their health to 0 or below).", "inputFormat": "- The first line contains two integers n and m, separated by a space, representing the number of enemy minions and the opponent’s health.\n- The second line contains n integers, separated by spaces, representing the attack values k_i of each enemy minion.", "outputFormat": "- If it is possible to burst the opponent down, output one line with two integers: the minimum number of Shrink Potions used and the total mana crystals spent in that case, separated by a space. If there are multiple optimal answers with the same minimum number of Shrink Potions, output the one with the minimum mana crystals spent.\n- Otherwise, output Human Cannot Win Dog (without quotes).", "hint": "Sample explanation 1:\n- The enemy has 3 minions on board, and the opponent has 5 health.\n- Take control of the 3-attack minion and the 2-attack minion, spending 0 Shrink Potions and 5 mana crystals (one Potion of Madness and one Shadow Madness, 1 + 4 = 5). The damage is enough to kill the opponent.\n\nSample explanation 2:\n- Use 16 Shrink Potions (for each minion below, the first parenthesis is the attack when taken, and the second parenthesis is the total number of Shrink Potions used at that moment).\n- Taking minions with original attacks 10 (1) (3), 20 (2) (6), 30 (3) (9), 50 (2) (16) deals a total of 8 damage, exactly lethal.\n\nSubtasks:\n- Easy: Guaranteed 0 < n ≤ 10, and no Shadow Madness or Shrink Potion is needed. 20%.\n- Normal: Guaranteed 0 < n ≤ 10, and no Shrink Potion is needed. 20%.\n- Hard: Guaranteed 0 < n ≤ 10. 30%.\n- Extra: Guaranteed 0 ≤ n ≤ 5,000,000, maximum attack < 30,000. 30%.\n\nConstraints:\n- $0 < n \\le 5{,}000{,}000$\n- $0 < k_i \\le 30{,}000$\n- $0 \\le m \\le 5{,}000{,}000$ (6 zeros).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "肮脏的牧师", "background": "@Yumis 出题人在这里哦~\n", "description": "Yumis最近在玩炉石传说。\n\n在炉石传说中脏牧有一张一费卡片（一费就是使用要消耗1点法力水晶），叫做疯狂药水，这个的效果是将一个敌方场上攻击小于等于2的随从拉到自己的战场内。\n\n还有一张四费卡片叫做暗影狂乱，这个的效果是将一个敌方场上攻击小于等于3的随从拉到自己的战场内。\n\n还有一张一费卡片就是缩小药水，这个的效果是将敌人全场的随从攻击力下降3点。\n\n\n你PY了炉石的GM所以你有了无数张的这三种卡片，但是GM告诉你缩小药水是这个牌比较不好创建，为了为GM着想你必须在使用**最少的缩小药水**的情况下A爆对手的脸。\n\n\n现在你的对手场上有n个随从，每个随从的攻击力是ki点。\n\n你的对手有m点血量。\n\n\n而你现在要做的就是将敌方的场上的随从拉过来自己的场上并攻击对手（每一个随从只能攻击一次，攻击力为你拉过来的时候随从剩余的攻击力），A爆对面的脸（将对面的血打到0点及以下）。\n", "inputFormat": "第一行用一个空格隔开的两个整数n,m分别代表敌方场上的随从数量和你对手的血量。\n\n第二行n个整数每两个整数之间用一个空格隔开，分别代表敌方场上每一个随从的攻击力ki。\n", "outputFormat": "一行如果可以A爆则输出**最少使用的缩小药水的数量**和此时使用的法力水晶，两个数据之间用一个空格隔开（如果有多个答案则输出消耗法力水晶最少的答案）。\n\n否则输出“Human Cannot Win Dog”（没有双引号）\n", "hint": "样例说明1：\n\n敌方场上有3只随从，敌方有5点血量\n\n我们把3攻随从和2攻随从拉过来花费0个缩小药水和5点耗费（一张疯狂药水一个暗影狂乱（1+4 = 5））伤害足够击杀对方。\n\n\n样例说明2：\n\n使用16个缩小药水（下面数据后面第一个括号指拉过来的时候伤害为多高 ，第二个括号表示拉过来的时候使用多少的缩小药水）\n\n拿10（1）（3）、20（2）（6）、30（3）（9）、50（2）（16）攻的怪物总共造成8点伤害 刚好A爆！\n\n\n\nEasy : 保证 0 < n <= 10  并且不存在用到暗影狂乱和缩小药水的情况    20%\n\n\nNormal ：保证 0 < n <= 10  并且不存在用到缩小药水的情况           20%\n\n\nHard ：保证 0 < n <= 10                                                 30%\n\n\nExtra：保证0 <= n <= 5000000(6个0)，最大攻击力小于30000                  30%\n\n\n保证 0 < n <= 5000000     0 < ki <=30000    0<=m<=5000000 (6个0)\n", "locale": "zh-CN"}}}
{"pid": "P3945", "type": "P", "difficulty": 5, "samples": [["3 100\n0 10 0 10000000 0.006207480877613 0 0\n8.660254037844 -5 0 10000000 -0.003103740438807 -0.00537583613352 0\n-8.660254037844 -5 0 10000000 -0.003103740438807 0.00537583613352 0", "0.620349511786 9.980741705470 0.000000000000\n8.333401109655 -5.527609289167 0.000000000000\n-8.953750621441 -4.453132416303 0.000000000000"], ["3 100\n0 10 0 10000000 0.06207480877613 0 0\n8.760254037844 -5 0 10000000 -0.03103740438807 -0.0537583613352 0\n-8.660254037844 -5 0 10000000 -0.03103740438807 0.0537583613352 0", "6.204092324054 9.982347016794 0.000000000000\n5.642963405596 -10.364100727695 0.000000000000\n-11.747055729651 0.381753710901 0.000000000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "Special Judge", "向量"], "title": "三体问题【std 疑似有误】", "background": "@FirstLight0521 出题人在这里哦~\n\n三体人所居住的星系由于三体运动的不确定性而导致三体星人生活动荡不安，善良的人类程序员（也就是你了！伟大的英雄！）决定帮助愚蠢得连程序都不会写的三体星人模拟天体的运动轨迹。这时，无聊的“歌者”文明决定戏弄一下你，于是给三体星系添加了一些新的星体。\n", "description": "输入 $N$ 个天体与他们在空间中的坐标 $(x_i,y_i,z_i)$、初速度 $(v_x,v_y,v_z)$ 与质量 $M_i$，已知三体世界受到“歌者”影响时间的流动不是连续的（每 $0.01$ 秒钟刷新一次），天体均视为质点，求 $t$ 时刻所有天体的坐标。\n\n本题万有引力常数 $G$ 取 $6.67408 \\times 10^{-11}$，在代码中可以写成：\n\n```cpp\n#define G 6.67408e-11\n```\n\n当你的答案与标准答案的相对误差不超过 $0.5 \\%$ 的时候，你在本测试点得到 AC。也就是说，保留多少位小数你可以自行确定。标准答案将会保留 $12$ 位小数。本题开启 SPJ 判断你的答案是否正确。\n", "inputFormat": "第一行一个正整数 $N$ 和一个非负实数 $t$，分别表示天体数与时刻。\n\n接下来 $N$ 行，每行 $7$ 个实数 $x_i,y_i,z_i,M_i,v_x,v_y,v_z$，分别表示各天体坐标、质量与初速度（三个方向上的分速度）。\n", "outputFormat": "$N$ 行，每行为第 $i$ 个天体在 $t$ 时刻的坐标 $x_i,y_i,z_i$，以单个空格隔开。\n", "hint": "$3 \\le N \\le 30,0 \\le t \\le 100,-100 \\le x_i,y_i,z_i \\le 100$。$M_i$ 在 `long long` 范围内。", "locale": "zh-CN", "translations": {"en": {"title": "Three-Body Problem [std suspected to be incorrect]", "background": "@FirstLight0521 The problem setter is here~\n\nBecause the Trisolarans’ star system is chaotic due to the unpredictability of three-body motion, Trisolarans live in constant turmoil. Kind human programmers (that is you, the great hero!) decide to help the Trisolarans, who are so foolish they cannot even write programs, by simulating the trajectories of celestial bodies. At this moment, the bored \"Singer\" civilization decides to tease you and adds some new celestial bodies to the Trisolaran system.", "description": "You are given $N$ celestial bodies with their positions $(x_i, y_i, z_i)$ in space, initial velocities $(v_x, v_y, v_z)$, and masses $M_i$. It is known that, under the influence of the \"Singer\" civilization, time in the three-body world does not flow continuously (it updates every $0.01$ seconds). All celestial bodies are treated as point masses. Compute the positions of all celestial bodies at time $t$.\n\nThe universal gravitational constant $G$ is $6.67408 \\times 10^{-11}$. In code, you may write:\n\n```cpp\n#define G 6.67408e-11\n```\n\nIf your answer’s relative error does not exceed $0.5\\%$ compared to the standard answer, you will receive AC on that test point. In other words, you may choose how many decimal places to keep. The standard answer keeps $12$ decimal places. This problem uses SPJ to check correctness.", "inputFormat": "The first line contains a positive integer $N$ and a nonnegative real number $t$, representing the number of celestial bodies and the time, respectively.\n\nThe next $N$ lines each contain $7$ real numbers $x_i, y_i, z_i, M_i, v_x, v_y, v_z$, representing each body’s position, mass, and initial velocity (the velocity components in the three directions).", "outputFormat": "Output $N$ lines. The $i$-th line contains the coordinates $x_i, y_i, z_i$ of the $i$-th body at time $t$, separated by single spaces.", "hint": "Constraints: $3 \\le N \\le 30$, $0 \\le t \\le 100$, $-100 \\le x_i, y_i, z_i \\le 100$. $M_i$ is within the range of long long.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "三体问题【std 疑似有误】", "background": "@FirstLight0521 出题人在这里哦~\n\n三体人所居住的星系由于三体运动的不确定性而导致三体星人生活动荡不安，善良的人类程序员（也就是你了！伟大的英雄！）决定帮助愚蠢得连程序都不会写的三体星人模拟天体的运动轨迹。这时，无聊的“歌者”文明决定戏弄一下你，于是给三体星系添加了一些新的星体。\n", "description": "输入 $N$ 个天体与他们在空间中的坐标 $(x_i,y_i,z_i)$、初速度 $(v_x,v_y,v_z)$ 与质量 $M_i$，已知三体世界受到“歌者”影响时间的流动不是连续的（每 $0.01$ 秒钟刷新一次），天体均视为质点，求 $t$ 时刻所有天体的坐标。\n\n本题万有引力常数 $G$ 取 $6.67408 \\times 10^{-11}$，在代码中可以写成：\n\n```cpp\n#define G 6.67408e-11\n```\n\n当你的答案与标准答案的相对误差不超过 $0.5 \\%$ 的时候，你在本测试点得到 AC。也就是说，保留多少位小数你可以自行确定。标准答案将会保留 $12$ 位小数。本题开启 SPJ 判断你的答案是否正确。\n", "inputFormat": "第一行一个正整数 $N$ 和一个非负实数 $t$，分别表示天体数与时刻。\n\n接下来 $N$ 行，每行 $7$ 个实数 $x_i,y_i,z_i,M_i,v_x,v_y,v_z$，分别表示各天体坐标、质量与初速度（三个方向上的分速度）。\n", "outputFormat": "$N$ 行，每行为第 $i$ 个天体在 $t$ 时刻的坐标 $x_i,y_i,z_i$，以单个空格隔开。\n", "hint": "$3 \\le N \\le 30,0 \\le t \\le 100,-100 \\le x_i,y_i,z_i \\le 100$。$M_i$ 在 `long long` 范围内。", "locale": "zh-CN"}}}
{"pid": "P3946", "type": "P", "difficulty": 5, "samples": [["2 1 1 2 10 1\n1 10\n3 10\n1 2 6", "6"], ["5 6 2 5 10 1\n1 10\n1 10\n1 10\n1 10\n1 10\n1 5 9\n1 3 9\n2 4 1\n2 5 9\n3 4 1\n3 5 6", "8"], ["5 6 2 5 10 1\n1 10\n1 10\n10 10\n1 10\n1 10\n1 5 9\n1 3 9\n2 4 1\n2 5 11\n3 4 1\n3 5 6\n", "wtnap wa kotori no oyatsu desu!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["最短路"], "title": "ことりのおやつ（小鸟的点心）", "background": "", "description": "这是2017年的冬天。（又到了白色相簿的季节2333）\n\n![滑雪鸟](https://db.loveliv.es/png/navi/476/0)\n\n滑完雪之后，ことり突然想吃点心啦！于是她去了甜品店。\n\n日本的冬天经常下雪。不幸的是，今天也是这样，每秒钟雪的厚度会增加q毫米。\n\n秋叶原共有n个地点，编号从1到n。每个地点在开始的时候的积雪高度为hi。\n\n有m条**双向**道路连接这些地点，它们的长度分别为wi米。\n\n雪太大，公共交通系统已经停摆了，所以ことり得走路回家。她走路的速度是1m/s。\n\n为了方便地图的绘制，秋叶原的道路规划使得每条道路严格地连接两个不同的地点，并且不会有两条道路连接的地点相同。\n\n每个地点都有一个极限雪高li，单位是毫米，如果到达这个地点的时候，这里的雪的高度高于li则会被困在这个点走不出去，无法成功地走到ことり家。\n\n点心店这个地点的编号是s，ことり家的编号是t。\n\n不考虑点心店和ことり家的雪。\n\nことり想在g秒内回到家吃点心，越快越好。如果在g秒之内，ことり无法到家，或者她被困在路上了，那么ことり会把wtnap变成她的点心( ・ 8 ・ )\n", "inputFormat": "第1行6个整数，空格隔开，分别代表n，m，s，t，g，q。\n\n以下n行，每行2个整数，空格隔开，分别表示这个地点的hi和li。\n\n以下m行，每行3个整数，空格隔开，分别表示这条路连接的两个地点u, v和这条路的长度wi。\n", "outputFormat": "输出1行1个整数，表示到达ことり家的最短用时。\n\n如果wtnap变成了ことり的点心那么输出\"wtnap wa kotori no oyatsu desu!\"\n\n输出时不含引号。\n", "hint": "对于0%的数据，与样例一模一样；  \n对于40%的数据，q = 0。  \n对于上一行中50%的数据，所有wi < li。  \n对于100%的数据，1 ≤ s, t ≤ n;  0 ≤ g, q ≤ 10^9; 0 ≤ wi ≤ li ≤ 10^9。\n\n![](https://cdn.luogu.com.cn/upload/pic/9826.png)\n", "locale": "zh-CN", "translations": {"en": {"title": "Kotori's Snack", "background": "", "description": "It is the winter of 2017. (It is the season of White Album again 2333.)\n\n![滑雪鸟](https://db.loveliv.es/png/navi/476/0)\n\nAfter skiing, Kotori suddenly wants a snack, so she goes to a dessert shop.\n\nIt often snows in winter in Japan. Unfortunately, today is the same, and the snow depth increases by $q$ millimeters every second.\n\nAkihabara has $n$ locations, numbered from $1$ to $n$. Each location initially has a snow depth of $h_i$.\n\nThere are $m$ bidirectional roads connecting these locations, and their lengths are $w_i$ meters.\n\nThe snow is too heavy and public transportation has stopped, so Kotori has to walk home. Her walking speed is $1$ m/s.\n\nFor convenient mapping, the road network ensures that each road strictly connects two different locations, and there are no two roads connecting the same pair of locations.\n\nEach location has a limit snow height $l_i$ in millimeters. If, upon arrival, the snow depth there is greater than $l_i$, she will be trapped at that location and cannot leave, and thus cannot reach Kotori's home.\n\nThe dessert shop is location $s$, and Kotori's home is location $t$.\n\nDo not consider the snow at the dessert shop and at Kotori's home.\n\nKotori wants to get home within $g$ seconds, as fast as possible. If she cannot reach home within $g$ seconds, or she gets trapped on the way, then she will turn wtnap into her snack ( ・ 8 ・ ).", "inputFormat": "The first line contains $6$ integers, separated by spaces: $n$, $m$, $s$, $t$, $g$, $q$.\n\nThe next $n$ lines each contain $2$ integers, separated by spaces, representing $h_i$ and $l_i$ for that location.\n\nThe next $m$ lines each contain $3$ integers, separated by spaces, representing the two locations $u$, $v$ connected by the road and the road length $w_i$.", "outputFormat": "Output one line with one integer, the shortest time to reach Kotori's home.\n\nIf wtnap becomes Kotori's snack, output \"wtnap wa kotori no oyatsu desu!\" without quotes.", "hint": "For $0\\%$ of the testdata, the same as the sample.  \nFor $40\\%$ of the testdata, $q = 0$.  \nFor $50\\%$ of the testdata in the previous line, all $w_i < l_i$.  \nFor $100\\%$ of the testdata, $1 \\le s, t \\le n$; $0 \\le g, q \\le 10^9$; $0 \\le w_i \\le l_i \\le 10^9$.\n\n![](https://cdn.luogu.com.cn/upload/pic/9826.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "ことりのおやつ（小鸟的点心）", "background": "", "description": "这是2017年的冬天。（又到了白色相簿的季节2333）\n\n![滑雪鸟](https://db.loveliv.es/png/navi/476/0)\n\n滑完雪之后，ことり突然想吃点心啦！于是她去了甜品店。\n\n日本的冬天经常下雪。不幸的是，今天也是这样，每秒钟雪的厚度会增加q毫米。\n\n秋叶原共有n个地点，编号从1到n。每个地点在开始的时候的积雪高度为hi。\n\n有m条**双向**道路连接这些地点，它们的长度分别为wi米。\n\n雪太大，公共交通系统已经停摆了，所以ことり得走路回家。她走路的速度是1m/s。\n\n为了方便地图的绘制，秋叶原的道路规划使得每条道路严格地连接两个不同的地点，并且不会有两条道路连接的地点相同。\n\n每个地点都有一个极限雪高li，单位是毫米，如果到达这个地点的时候，这里的雪的高度高于li则会被困在这个点走不出去，无法成功地走到ことり家。\n\n点心店这个地点的编号是s，ことり家的编号是t。\n\n不考虑点心店和ことり家的雪。\n\nことり想在g秒内回到家吃点心，越快越好。如果在g秒之内，ことり无法到家，或者她被困在路上了，那么ことり会把wtnap变成她的点心( ・ 8 ・ )\n", "inputFormat": "第1行6个整数，空格隔开，分别代表n，m，s，t，g，q。\n\n以下n行，每行2个整数，空格隔开，分别表示这个地点的hi和li。\n\n以下m行，每行3个整数，空格隔开，分别表示这条路连接的两个地点u, v和这条路的长度wi。\n", "outputFormat": "输出1行1个整数，表示到达ことり家的最短用时。\n\n如果wtnap变成了ことり的点心那么输出\"wtnap wa kotori no oyatsu desu!\"\n\n输出时不含引号。\n", "hint": "对于0%的数据，与样例一模一样；  \n对于40%的数据，q = 0。  \n对于上一行中50%的数据，所有wi < li。  \n对于100%的数据，1 ≤ s, t ≤ n;  0 ≤ g, q ≤ 10^9; 0 ≤ wi ≤ li ≤ 10^9。\n\n![](https://cdn.luogu.com.cn/upload/pic/9826.png)\n", "locale": "zh-CN"}}}
{"pid": "P3947", "type": "P", "difficulty": 5, "samples": [["3 2 10\nBokutachiwaHitotsunoHikari 3 8\nKorekara 1 2\nSnowHalation 2 5\n", "6\nSnowHalation\nBokutachiwaHitotsunoHikari\nKorekara\n"], ["2 1 2\nAoizoraJumpingHeart 1 2\nTimeLapse 2 4", "No Answer"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["搜索", "O2优化", "剪枝", "状压 DP"], "title": "肝活动", "background": "Yume 最近在玩一个名为《LoveLive! School idol festival》的音乐游戏。他之所以喜欢上这个游戏，是因为这个游戏对非洲人十分友好，即便你脸黑到抽不出好卡，还可以通过在每个月举办的两次活动中达成一定的目标来获得奖励。", "description": "Yume 很喜欢这一期活动奖励卡的卡面，于是他决定要肝这一期的活动，拿到活动奖励。这一期的活动规则很特殊，玩家需要在活动规定的结束时间前，完成所有指定的歌曲（**每首歌曲只能打一次**），并获得一定的分数，就可以拿到活动奖励。如果在规定的时间前没有完成所有的歌曲，或者分数不够奖励的分数线，则不能领取活动奖励。每首歌有一个限定的奖励开放时间，玩家如果在这段时间内完成了这首歌，便可以获得一定的分数（**获得的分数 = 开放时间 - 当前已用的总时间**）。如果超出了这段时间之后再完成这首歌，就不能获得分数了。\n\n这样的规则对 Yume 这样的老玩家来说本应是轻而易举，但不巧的是 Yume 把活动的结束时间记成了活动的开始时间，以至于当他上线跃跃欲试的时候，惊恐地发现活动已经快要结束了。现在他想知道，在剩余的时间之内，他能否完成所有的歌、达成奖励的分数线拿到活动卡。为了节省时间，他把这个问题交给了你来解决。请你根据给定的数据，帮他计算出能否在剩余的时间内达成目标。如果能，请告诉他完成每首歌曲的顺序。\n", "inputFormat": "输入的第一行是三个整数 $n,m,t$，分别表示规定完成的歌曲数目、获得奖励需要达到的最低分数和距离活动结束剩余的时间。\n\n接下来有 $n$ 行，第 $i$ 行有一个字符串 $S_i$ 和两个整数 $T_i$ 和 $M_i$，表示第 $i$ 首歌的歌名为 $S_i$，完成第 $i$ 首歌所需要的时间为 $T_i$，第 $i$ 首歌的奖励开放时间剩余 $M_i$。保证 $T_i\\le M_i$。其中数据已按 $S_i$ 的字典序给出。", "outputFormat": "如果在活动结束前 Yume 可以完成指定的目标拿到奖励，则在第一行输出一个整数 $C$，表示在获得奖励的前提下，所能够获得的分数的最大值；\n\n接下来的 $n$ 行中，按照完成歌曲的顺序输出第 $i$ 首歌的歌名。如果有多种可能性，则输出字典序最小的情况。\n\n如果在活动结束前 Yume 不能完成所有的歌曲，输出 `No Answer`。", "hint": "对于 $0\\%$ 的数据，与测试数据完全相同。\n\n对于 $20\\%$ 的数据，满足 $n \\le 5$。\n\n对于 $40\\%$ 的数据，满足 $n \\le 9$。\n\n对于 $70\\%$ 的数据，满足 $n \\le 15$。\n\n另有 $10\\%$ 的数据满足 $\\sum\\limits^{n}_{i=1} T_i < t$。\n\n对于 $100\\%$ 的数据，满足 $n \\le 22$，$S_i$ 的长度不超过 $50$。保证 $m,t,M_i,T_i$ 及其相加的结果都在 `int` 最大范围内。", "locale": "zh-CN", "translations": {"en": {"title": "Grind the Event", "background": "Yume has been playing a rhythm game called LoveLive! School idol festival. He likes it because the game is friendly to unlucky players: even if you are so unlucky that you cannot draw good cards, you can still earn rewards by reaching certain goals in the two events held each month.", "description": "Yume really likes the artwork of the reward card for this event, so he decides to grind this event to get the reward. The rules of this event are special: before the event’s end time, the player must finish all designated songs (each song can be played only once) and reach a certain score to claim the reward. If the player does not finish all the songs in time, or the score is below the threshold, the reward cannot be claimed. Each song has a limited reward open window. If the player finishes the song within this window, they earn a score (score earned = open window time − current total time used). If the song is completed after this window, no score is earned.\n\nThis should have been easy for a veteran like Yume, but he mistakenly remembered the event end time as the start time. When he logged in, he was shocked to find that the event was about to end. Now he wants to know whether, within the remaining time, he can finish all the songs and reach the score threshold to get the event card. To save time, he asks you to solve this problem. Based on the given data, determine whether he can achieve the goal in the remaining time. If he can, tell him the order in which to complete the songs.", "inputFormat": "The first line contains three integers $n,m,t$, representing the number of required songs, the minimum score needed to obtain the reward, and the remaining time until the event ends.\n\nThe next $n$ lines each contain a string $S_i$ and two integers $T_i$ and $M_i$, indicating that the $i$-th song’s name is $S_i$, completing the $i$-th song takes $T_i$ time, and the $i$-th song’s reward open window has $M_i$ time remaining. It is guaranteed that $T_i \\le M_i$. The input data are given in the lexicographic order of $S_i$.", "outputFormat": "If Yume can achieve the goal and claim the reward before the event ends, output an integer $C$ on the first line, representing the maximum score that can be obtained while still getting the reward.\n\nThen output $n$ lines, listing the song names in the order they are completed. If there are multiple valid orders, output the lexicographically smallest one.\n\nIf Yume cannot finish all the songs before the event ends, output `No Answer`.", "hint": "- For $0\\%$ of the testdata, it is identical to the testdata.\n- For $20\\%$ of the testdata, $n \\le 5$.\n- For $40\\%$ of the testdata, $n \\le 9$.\n- For $70\\%$ of the testdata, $n \\le 15$.\n- Additionally, for $10\\%$ of the testdata, $\\sum\\limits_{i=1}^{n} T_i < t$.\n- For $100\\%$ of the testdata, $n \\le 22$, the length of $S_i$ does not exceed $50$. It is guaranteed that $m, t, M_i, T_i$ and any of their sums are within the maximum range of `int`.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "肝活动", "background": "Yume 最近在玩一个名为《LoveLive! School idol festival》的音乐游戏。他之所以喜欢上这个游戏，是因为这个游戏对非洲人十分友好，即便你脸黑到抽不出好卡，还可以通过在每个月举办的两次活动中达成一定的目标来获得奖励。", "description": "Yume 很喜欢这一期活动奖励卡的卡面，于是他决定要肝这一期的活动，拿到活动奖励。这一期的活动规则很特殊，玩家需要在活动规定的结束时间前，完成所有指定的歌曲（**每首歌曲只能打一次**），并获得一定的分数，就可以拿到活动奖励。如果在规定的时间前没有完成所有的歌曲，或者分数不够奖励的分数线，则不能领取活动奖励。每首歌有一个限定的奖励开放时间，玩家如果在这段时间内完成了这首歌，便可以获得一定的分数（**获得的分数 = 开放时间 - 当前已用的总时间**）。如果超出了这段时间之后再完成这首歌，就不能获得分数了。\n\n这样的规则对 Yume 这样的老玩家来说本应是轻而易举，但不巧的是 Yume 把活动的结束时间记成了活动的开始时间，以至于当他上线跃跃欲试的时候，惊恐地发现活动已经快要结束了。现在他想知道，在剩余的时间之内，他能否完成所有的歌、达成奖励的分数线拿到活动卡。为了节省时间，他把这个问题交给了你来解决。请你根据给定的数据，帮他计算出能否在剩余的时间内达成目标。如果能，请告诉他完成每首歌曲的顺序。\n", "inputFormat": "输入的第一行是三个整数 $n,m,t$，分别表示规定完成的歌曲数目、获得奖励需要达到的最低分数和距离活动结束剩余的时间。\n\n接下来有 $n$ 行，第 $i$ 行有一个字符串 $S_i$ 和两个整数 $T_i$ 和 $M_i$，表示第 $i$ 首歌的歌名为 $S_i$，完成第 $i$ 首歌所需要的时间为 $T_i$，第 $i$ 首歌的奖励开放时间剩余 $M_i$。保证 $T_i\\le M_i$。其中数据已按 $S_i$ 的字典序给出。", "outputFormat": "如果在活动结束前 Yume 可以完成指定的目标拿到奖励，则在第一行输出一个整数 $C$，表示在获得奖励的前提下，所能够获得的分数的最大值；\n\n接下来的 $n$ 行中，按照完成歌曲的顺序输出第 $i$ 首歌的歌名。如果有多种可能性，则输出字典序最小的情况。\n\n如果在活动结束前 Yume 不能完成所有的歌曲，输出 `No Answer`。", "hint": "对于 $0\\%$ 的数据，与测试数据完全相同。\n\n对于 $20\\%$ 的数据，满足 $n \\le 5$。\n\n对于 $40\\%$ 的数据，满足 $n \\le 9$。\n\n对于 $70\\%$ 的数据，满足 $n \\le 15$。\n\n另有 $10\\%$ 的数据满足 $\\sum\\limits^{n}_{i=1} T_i < t$。\n\n对于 $100\\%$ 的数据，满足 $n \\le 22$，$S_i$ 的长度不超过 $50$。保证 $m,t,M_i,T_i$ 及其相加的结果都在 `int` 最大范围内。", "locale": "zh-CN"}}}
{"pid": "P3948", "type": "P", "difficulty": 3, "samples": [["3 2 4 0 2\nA 1 3 5\nQ 2 3 \n5\n1 3\n2 3\n1 1 \n2 2 \n3 3\n", "1\n2\n1\n1\n1\n0\n"], ["17 25 4098 310 2622\nA 10 16 657212040\nA 4 15 229489140\nA 1 2 -433239891\nA 3 12 532385784\nA 10 17 56266644\nA 8 10 10038874\nA 6 9 13084764\nA 4 5 -9206340\nQ 2 8\nA 2 4 -43223955\nA 6 9 31478706\nA 2 4 189818310\nA 2 8 179421180\nA 2 8 40354938\nQ 8 14\nA 3 6 57229575\nA 6 13 132795740\nA 2 17 14558022\nA 14 15 -552674185\nA 5 11 -1104138\nQ 2 12\nQ 1 14\nA 3 9 524902182\nA 8 12 114291440\nA 3 7 107531442\n1\n11 12\n", "3\n6\n7\n8\n2\n"], ["20 3 4317 1020 2232\nA 8 15 -434078222\nA 1 2 54988154\nA 13 19 81757858\n15\n7 11\n3 5\n3 9\n6 9\n9 13\n6 19\n1 20\n3 5\n3 10\n1 7\n2 14\n6 10\n2 3\n2 3\n10 12\n", "0\n0\n0\n0\n0\n2\n2\n0\n0\n0\n0\n0\n0\n0\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "树状数组", "前缀和", "差分"], "title": "数据结构", "background": "**引言**\n\n数据结构学得好，未来工作没烦恼。\n\nEdgration（以下简称 edt）是一个喜欢乱搞数据结构的蒟蒻。有一天，他作死想去刁难一下 dalao：\n\nedt：想求一种数据结构，使得可以实现区间加，求出某一区间大于 $k$ 的元素的个数。\n\ndalao1：sb 线段树。\n\ndalao2：sb 分块。\n\ndalao3：sb 平衡树。\n\nedt: 不行，那就加上取模，求区间取模 mod 后大于 MIN 小于 MAX 的元素个数。\n\ndalao1：线段树&……￥#&……%……&\\*&%￥。\n\ndalao2：sb 分块 &%￥……%#￥#&……&\\*。\n\ndalao3：*&……%&￥ LCT 维护 SBT 水题 &……%&……%。\n\nedt：那不仅取模，每个数乘上数组下标再取模。\n\ndalao：￥%￥￥&*（#￥% 叽里呱啦叽里呱啦。\n\nedt：不行，再把取模的值丢到一棵树上，维护一棵仙人掌乘积方差的最小极差。\n\ndalao：替罪羊树上用 sb 块状链表维护 Toptree 上的最小费用最大流和可持久化仙人掌，算出来在基尔霍夫矩阵中反演后跑一遍 fft 维护的插头 DP 就好了，给我三分钟轻松水过。\n\nedt：mmp。", "description": "蒟蒻 edt 把这个问题交给了你—— 一个精通数据结构的大犇，由于是第一题，这个题没那么难。\n\n![图片已丢失](https://timgsa.baidu.com/timg?image&quality=80&size=b9999\\_10000&sec=1508946101936&di=0c08b703e466d2a3b2d20dd8008821fc&imgtype=0&src=http%3A%2F%2Fjoymepic.joyme.com%2Farticle%2Fuploads%2Fallimg%2F201511%2F1446516425349678.gif)\n\nedt 现在对于题目进行了如下的简化：\n\n最开始的数组每个元素都是 $0$。\n\n\n给出 $\\text{n},\\text{opt},\\text{mod},\\text{min},\\text{max}$ 在 `int` 范围内。\n\n\n操作 $A,Q$：\n\n\n`A L R X` 表示把 $[L,R]$ 这个区间加上 $X$。\n\n**（数组的从 $L$ 到 $R$ 的每个元素都加上 $X$）**\n\n\n`Q L R` 表示询问 $[L,R]$ 这个区间中元素 $T$ 满足 $\\text{min}\\le (T\\times i\\ mod\\ \\text{mod})\\le \\text{max}$  的 $T$ 这样的数的个数（$i$ 是数组下标）。\n\n**（元素的值 $\\times$ 数组下标对 $\\text{mod}$ 取模的值在 $\\min$ 到 $\\max$ 范围内）**\n\n\n由于 edt 请来了一位非三次元的仓鼠，他帮你延后了部分问题，将这些询问打入了混乱时空，你的询问操作不会超过 $1000$ 次，不幸的是，对于延后的询问操作可能有很多次（小于 $1\\times10^7$ 次），但是保证这些延后的询问操作之后不会再次有修改操作（就是在最后会有很多次询问，但不会进行修改）。", "inputFormat": "第一行给出 $\\text{n},\\text{opt},\\text{mod},\\text{min},\\text{max}$ 分别表示序列大小，操作次数，取模，最小值，最大值。\n\n\n之后 $\\text{opt}$ 行，给出：\n\n\n`A L R X` 表示区间加，保证 $\\text{X}$ 在 `int` 范围内。\n\n\n`Q L R` 表示区间查询满足条件的个数。\n\n\n第 $\\text{opt}+1$ 行给出一个数 $\\text{Final}$，表示后面有 $\\text{Final}$ 个询问。\n\n\n之后 $\\text{Final}$ 行，给出 $L,R$ 表示询问区间 $[L,R]$ 表示询问 $[L,R]$ 之间满足条件的个数。", "outputFormat": "对于每个 $Q$ 操作，每行输出一个数表示每次询问的值。\n\n之后 $\\text{Final}$ 行，每行输出一个数表示被延后的 $\\text{Final}$ 个询问的值。", "hint": "## 样例说明\n\n给出样例 1 的解释：\n\n样例 1 中，$a$ 数组修改为$5,5,5$，每个 $a_i\\times i\\ mod\\ 4$ 的值为 $1,2,3$。\n\n对于 $\\text{Final}$ 的询问，询问 $[1,3]$ 中大于等于 $0$ 小于等于 $2$ 的个数为 $2$ 个。\n\n剩下的询问类似。\n\n## 题目说明\n\n**注意**：\n \n### 1.关于负数取模问题，请以 C++ 的向 $0$ 取整为标准，即如：\n\n[ $ -7 \\bmod 3 = -1 $ ]  [ $ 7 \\bmod 3 = 1 $ ]\n\n### 2.一共有 50 个测试点，每个点分值为 2 分。\n\n因为测试点数较多，请 OIer 们自觉地不要故意多次提交来卡评测机，出题人 edt 在这里表示由衷的感谢。\n\n## 数据范围\n\n如果你不能做对所有点，请尝试获得部分分，所有数据都是随机生成。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/whf39g4d.png)", "locale": "zh-CN", "translations": {"en": {"title": "Data Structures", "background": "Introduction\n\nIf you learn data structures well, your future job will have no worries.\n\nEdgration (hereafter edt) is a \"ju ruo\" (newbie) who likes to mess with data structures. One day, he decided to make things hard for some \"dalao\" (experts):\n\nedt: I want a data structure that supports range add and can return the number of elements greater than $k$ in a given interval.\n\ndalao1: sb segment tree.\n\ndalao2: sb block decomposition.\n\ndalao3: sb balanced tree.\n\nedt: Not good enough, then add modulo: count, after taking modulo, how many numbers in the interval are greater than MIN and less than MAX.\n\ndalao1: segment tree &……￥#&……%……&\\*&%￥.\n\ndalao2: sb block decomposition &%￥……%#￥#&……&\\*.\n\ndalao3: *&……%&￥ LCT maintaining SBT easy problem &……%&……%.\n\nedt: Not only modulo, but also multiply each number by its array index and then take modulo.\n\ndalao: ￥%￥￥&*（#￥% gibberish gibberish.\n\nedt: No, then throw the modulo values onto a tree and maintain the minimum range of the cactus product variance.\n\ndalao: Use scapegoat tree with sb block linked list to maintain min-cost max-flow on Toptree and a persistent cactus, then invert in the Kirchhoff matrix and run plug DP maintained by fft. Give me three minutes, easy pass.\n\nedt: mmp.", "description": "The newbie edt gives this problem to you—a master of data structures. Since this is the first problem, it is not that hard.\n\n![图片已丢失](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1508946101936&di=0c08b703e466d2a3b2d20dd8008821fc&imgtype=0&src=http%3A%2F%2Fjoymepic.joyme.com%2Farticle%2Fuploads%2Fallimg%2F201511%2F1446516425349678.gif)\n\nThe problem is simplified as follows:\n\n- Initially, every element in the array is $0$.\n- You are given $\\text{n}, \\text{opt}, \\text{mod}, \\text{min}, \\text{max}$ within the range of `int`.\n\nOperations $A, Q$:\n\n- `A L R X` means add $X$ to the interval $[L, R]$.\n  (Every element from $L$ to $R$ in the array is increased by $X$.)\n- `Q L R` asks, in the interval $[L, R]$, for the count of elements $T$ such that $\\text{min} \\le (T \\times i \\mod \\text{mod}) \\le \\text{max}$, where $i$ is the array index.\n  (The value of the element times its index, modulo $\\text{mod}$, falls within the range from $\\min$ to $\\max$, inclusive.)\n\nBecause edt invited a non-3D hamster to help, some queries are postponed into a chaotic spacetime. The number of online `Q` operations will not exceed $1000$. Unfortunately, there may be many postponed queries (less than $1 \\times 10^7$), but it is guaranteed that after these postponed queries, there will be no more update operations (that is, at the end there are many queries but no modifications).", "inputFormat": "- The first line gives $\\text{n}, \\text{opt}, \\text{mod}, \\text{min}, \\text{max}$, representing the sequence size, the number of operations, the modulo, the minimum value, and the maximum value.\n- Then follow $\\text{opt}$ lines, each being one of:\n  - `A L R X` denotes a range add. $\\text{X}$ is guaranteed to be within the range of `int`.\n  - `Q L R` denotes a range query asking for the count that satisfies the condition.\n- The $(\\text{opt} + 1)$-th line gives a number $\\text{Final}$, meaning there are $\\text{Final}$ postponed queries after that.\n- Then follow $\\text{Final}$ lines, each giving $L, R$, asking for the count that satisfies the condition in $[L, R]$.", "outputFormat": "- For each `Q` operation, output one number per line representing the answer to that query.\n- Then output $\\text{Final}$ lines, each with one number representing the answer to each postponed query.", "hint": "Sample Explanation\n\nExplanation for Sample 1:\n\nIn Sample 1, the array $a$ becomes $5, 5, 5$. Each $a_i \\times i \\mod 4$ equals $1, 2, 3$.\n\nFor the $\\text{Final}$ queries, in $[1, 3]$, the count of values greater than or equal to $0$ and less than or equal to $2$ is $2$.\n\nThe rest are similar.\n\nNotes\n\n- Important:\n  - Regarding modulo with negative numbers, follow C++ truncation toward $0$. For example:\n    [ $ -7 \\bmod 3 = -1 $ ]  [ $ 7 \\bmod 3 = 1 $ ].\n- There are 50 test points, each worth 2 points.\n  Because there are many test points, please do not intentionally submit many times to jam the judge. The author edt expresses sincere thanks.\n\nConstraints\n\nIf you cannot solve all points, try to obtain partial scores. All testdata are randomly generated.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/whf39g4d.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数据结构", "background": "**引言**\n\n数据结构学得好，未来工作没烦恼。\n\nEdgration（以下简称 edt）是一个喜欢乱搞数据结构的蒟蒻。有一天，他作死想去刁难一下 dalao：\n\nedt：想求一种数据结构，使得可以实现区间加，求出某一区间大于 $k$ 的元素的个数。\n\ndalao1：sb 线段树。\n\ndalao2：sb 分块。\n\ndalao3：sb 平衡树。\n\nedt: 不行，那就加上取模，求区间取模 mod 后大于 MIN 小于 MAX 的元素个数。\n\ndalao1：线段树&……￥#&……%……&\\*&%￥。\n\ndalao2：sb 分块 &%￥……%#￥#&……&\\*。\n\ndalao3：*&……%&￥ LCT 维护 SBT 水题 &……%&……%。\n\nedt：那不仅取模，每个数乘上数组下标再取模。\n\ndalao：￥%￥￥&*（#￥% 叽里呱啦叽里呱啦。\n\nedt：不行，再把取模的值丢到一棵树上，维护一棵仙人掌乘积方差的最小极差。\n\ndalao：替罪羊树上用 sb 块状链表维护 Toptree 上的最小费用最大流和可持久化仙人掌，算出来在基尔霍夫矩阵中反演后跑一遍 fft 维护的插头 DP 就好了，给我三分钟轻松水过。\n\nedt：mmp。", "description": "蒟蒻 edt 把这个问题交给了你—— 一个精通数据结构的大犇，由于是第一题，这个题没那么难。\n\n![图片已丢失](https://timgsa.baidu.com/timg?image&quality=80&size=b9999\\_10000&sec=1508946101936&di=0c08b703e466d2a3b2d20dd8008821fc&imgtype=0&src=http%3A%2F%2Fjoymepic.joyme.com%2Farticle%2Fuploads%2Fallimg%2F201511%2F1446516425349678.gif)\n\nedt 现在对于题目进行了如下的简化：\n\n最开始的数组每个元素都是 $0$。\n\n\n给出 $\\text{n},\\text{opt},\\text{mod},\\text{min},\\text{max}$ 在 `int` 范围内。\n\n\n操作 $A,Q$：\n\n\n`A L R X` 表示把 $[L,R]$ 这个区间加上 $X$。\n\n**（数组的从 $L$ 到 $R$ 的每个元素都加上 $X$）**\n\n\n`Q L R` 表示询问 $[L,R]$ 这个区间中元素 $T$ 满足 $\\text{min}\\le (T\\times i\\ mod\\ \\text{mod})\\le \\text{max}$  的 $T$ 这样的数的个数（$i$ 是数组下标）。\n\n**（元素的值 $\\times$ 数组下标对 $\\text{mod}$ 取模的值在 $\\min$ 到 $\\max$ 范围内）**\n\n\n由于 edt 请来了一位非三次元的仓鼠，他帮你延后了部分问题，将这些询问打入了混乱时空，你的询问操作不会超过 $1000$ 次，不幸的是，对于延后的询问操作可能有很多次（小于 $1\\times10^7$ 次），但是保证这些延后的询问操作之后不会再次有修改操作（就是在最后会有很多次询问，但不会进行修改）。", "inputFormat": "第一行给出 $\\text{n},\\text{opt},\\text{mod},\\text{min},\\text{max}$ 分别表示序列大小，操作次数，取模，最小值，最大值。\n\n\n之后 $\\text{opt}$ 行，给出：\n\n\n`A L R X` 表示区间加，保证 $\\text{X}$ 在 `int` 范围内。\n\n\n`Q L R` 表示区间查询满足条件的个数。\n\n\n第 $\\text{opt}+1$ 行给出一个数 $\\text{Final}$，表示后面有 $\\text{Final}$ 个询问。\n\n\n之后 $\\text{Final}$ 行，给出 $L,R$ 表示询问区间 $[L,R]$ 表示询问 $[L,R]$ 之间满足条件的个数。", "outputFormat": "对于每个 $Q$ 操作，每行输出一个数表示每次询问的值。\n\n之后 $\\text{Final}$ 行，每行输出一个数表示被延后的 $\\text{Final}$ 个询问的值。", "hint": "## 样例说明\n\n给出样例 1 的解释：\n\n样例 1 中，$a$ 数组修改为$5,5,5$，每个 $a_i\\times i\\ mod\\ 4$ 的值为 $1,2,3$。\n\n对于 $\\text{Final}$ 的询问，询问 $[1,3]$ 中大于等于 $0$ 小于等于 $2$ 的个数为 $2$ 个。\n\n剩下的询问类似。\n\n## 题目说明\n\n**注意**：\n \n### 1.关于负数取模问题，请以 C++ 的向 $0$ 取整为标准，即如：\n\n[ $ -7 \\bmod 3 = -1 $ ]  [ $ 7 \\bmod 3 = 1 $ ]\n\n### 2.一共有 50 个测试点，每个点分值为 2 分。\n\n因为测试点数较多，请 OIer 们自觉地不要故意多次提交来卡评测机，出题人 edt 在这里表示由衷的感谢。\n\n## 数据范围\n\n如果你不能做对所有点，请尝试获得部分分，所有数据都是随机生成。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/whf39g4d.png)", "locale": "zh-CN"}}}
{"pid": "P3949", "type": "P", "difficulty": 5, "samples": [["3\n2\n4 5", "X\nZ\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "答案错误", "background": "**本题可能不存在唯一解，当前本题与题解仅作参考。**\n\n小 X 比较差，她（她？tan90°）有许多 WA 掉的题，所以她很难受。小 Z 决定去安慰她，可是他的提交记录里一道 WA 都没有（flag），于是他决定篡改一半题的署名，让小 X 觉得他们的错题相当，这样她会好受一些。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cbmwn01e.png)", "description": "每道 WA 了的题都会有一个分数，对于两个人的 WA 题程度是否相同，小X有这样一个评判方法：\n\n无聊的她想了这样一个神奇的函数：\n\n$$f(x)=a_1x^0+a_2x^1+a_3x^2+\\cdots+a_{n}x^{n-1}$$\n\n她认为，无论 $a_i$ 取什么值，两组 $f(x)$ 的和都相等，则这两组题的错误程度很相似。\n\n假如有分值为 $A=\\{1,4,6,7 \\},B=\\{2,3,5,8\\}$ 的两份被篡改完成的 WA 题，当 $a_1=a_2=a_3=1$ 时，神奇的函数为：\n\n$$f(x)=x^2+x+1$$\n\n那么，$f(1)=3,f(2)=7,f(3)=13\\cdots$\n\n显然：$ f(1) + f(4) + f(6) + f(7) = 124 = f(2) + f(3) +f(5) +f(8)$。\n\n对于这组系数，此分组方案是合法的，可以证明，$a_i$ 取任意值，按照以上方案分组都满足条件（两组的 $f(x)$ 和相同），不信可以手动枚举（#滑稽）。\n\n所以，$A=\\{1,4,6,7 \\},B=\\{2,3,5,8\\}$。就是一种合法的分组。\n", "inputFormat": "第一行一个整数 $n$，代表有 $2^n$ 道 WA 题，分值分别从$1$ 到 $2^n$，满足 $n\\ge 2$。\n\n第二行一个整数 $q$，表示有 $q$ 组询问。\n\n最后一行 $q$ 个整数，询问分值为 $x$ 的 WA 题是谁的名字。\n\n（因为小 X 比较菜，所以我们认为分值为 $1$ 的 WA 题是属于她的）\n", "outputFormat": "一共 $q$ 行，每行一个字符 $\\verb!X!$ 或 $\\verb!Z!$，表示分值为 $x$ 的 WA 题是谁的署名。\n", "hint": "### 数据范围及约定\n\n- 对于 $10\\%$ 的数据，$2\\le n\\le 4$，$q\\le 10$；\n- 对于 $40\\%$ 的数据，$2\\le n\\le 20$，$1\\le q\\le 5000$；\n- 对于 $100\\%$ 的数据，$2\\le n\\le 60$，$q\\le 10^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Wrong Answer", "background": "**This problem may not have a unique solution; the current problem and solution are for reference only.**\n\nXiao X is not very good (she? tan 90°) and has many problems that were WA, so she feels upset. Xiao Z decides to comfort her, but there is not a single WA in his submission history (flag). So he decides to alter the signature of half of the problems, making Xiao X feel that their wrong problems are comparable, so she will feel better.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cbmwn01e.png)", "description": "Each problem that was WA has a score. To judge whether the degree of WA problems is the same for the two people, Xiao X uses the following method:\n\nWhen bored, she came up with a magical function:\n\n$$f(x)=a_1x^0+a_2x^1+a_3x^2+\\cdots+a_{n}x^{n-1}$$\n\nShe believes that no matter what values $a_i$ take, if the sums of $f(x)$ over two groups are equal, then the error levels of the two groups of problems are very similar.\n\nSuppose there are two modified sets of WA problems with scores $A=\\{1,4,6,7 \\}$ and $B=\\{2,3,5,8\\}$. When $a_1=a_2=a_3=1$, the magical function is:\n\n$$f(x)=x^2+x+1$$\n\nThen $f(1)=3, f(2)=7, f(3)=13 \\cdots$.\n\nObviously: $ f(1) + f(4) + f(6) + f(7) = 124 = f(2) + f(3) + f(5) + f(8)$.\n\nFor this set of coefficients, this partition is valid. It can be proven that for any values of $a_i$, grouping according to the above scheme satisfies the condition (the sums of $f(x)$ over the two groups are the same). If you do not believe it, you can enumerate manually (#huaji).\n\nSo $A=\\{1,4,6,7 \\}, B=\\{2,3,5,8\\}$ is a valid grouping.", "inputFormat": "The first line contains an integer $n$, meaning there are $2^n$ WA problems, with scores from $1$ to $2^n$, with $n \\ge 2$.\n\nThe second line contains an integer $q$, indicating there are $q$ queries.\n\nThe last line contains $q$ integers, each asking whose name is on the WA problem with score $x$.\n\n(Because Xiao X is relatively weak, we assume the WA problem with score $1$ belongs to her.)", "outputFormat": "Output $q$ lines, each containing a character $\\verb!X!$ or $\\verb!Z!$, indicating whose signature is on the WA problem with score $x$.", "hint": "### Constraints and Conventions\n\n- For $10\\%$ of the testdata, $2 \\le n \\le 4$, $q \\le 10$.\n- For $40\\%$ of the testdata, $2 \\le n \\le 20$, $1 \\le q \\le 5000$.\n- For $100\\%$ of the testdata, $2 \\le n \\le 60$, $q \\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "答案错误", "background": "**本题可能不存在唯一解，当前本题与题解仅作参考。**\n\n小 X 比较差，她（她？tan90°）有许多 WA 掉的题，所以她很难受。小 Z 决定去安慰她，可是他的提交记录里一道 WA 都没有（flag），于是他决定篡改一半题的署名，让小 X 觉得他们的错题相当，这样她会好受一些。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cbmwn01e.png)", "description": "每道 WA 了的题都会有一个分数，对于两个人的 WA 题程度是否相同，小X有这样一个评判方法：\n\n无聊的她想了这样一个神奇的函数：\n\n$$f(x)=a_1x^0+a_2x^1+a_3x^2+\\cdots+a_{n}x^{n-1}$$\n\n她认为，无论 $a_i$ 取什么值，两组 $f(x)$ 的和都相等，则这两组题的错误程度很相似。\n\n假如有分值为 $A=\\{1,4,6,7 \\},B=\\{2,3,5,8\\}$ 的两份被篡改完成的 WA 题，当 $a_1=a_2=a_3=1$ 时，神奇的函数为：\n\n$$f(x)=x^2+x+1$$\n\n那么，$f(1)=3,f(2)=7,f(3)=13\\cdots$\n\n显然：$ f(1) + f(4) + f(6) + f(7) = 124 = f(2) + f(3) +f(5) +f(8)$。\n\n对于这组系数，此分组方案是合法的，可以证明，$a_i$ 取任意值，按照以上方案分组都满足条件（两组的 $f(x)$ 和相同），不信可以手动枚举（#滑稽）。\n\n所以，$A=\\{1,4,6,7 \\},B=\\{2,3,5,8\\}$。就是一种合法的分组。\n", "inputFormat": "第一行一个整数 $n$，代表有 $2^n$ 道 WA 题，分值分别从$1$ 到 $2^n$，满足 $n\\ge 2$。\n\n第二行一个整数 $q$，表示有 $q$ 组询问。\n\n最后一行 $q$ 个整数，询问分值为 $x$ 的 WA 题是谁的名字。\n\n（因为小 X 比较菜，所以我们认为分值为 $1$ 的 WA 题是属于她的）\n", "outputFormat": "一共 $q$ 行，每行一个字符 $\\verb!X!$ 或 $\\verb!Z!$，表示分值为 $x$ 的 WA 题是谁的署名。\n", "hint": "### 数据范围及约定\n\n- 对于 $10\\%$ 的数据，$2\\le n\\le 4$，$q\\le 10$；\n- 对于 $40\\%$ 的数据，$2\\le n\\le 20$，$1\\le q\\le 5000$；\n- 对于 $100\\%$ 的数据，$2\\le n\\le 60$，$q\\le 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P3950", "type": "P", "difficulty": 5, "samples": [["5 9\n1 2\n2 3\n3 4\n4 5\nQ 1 4\nC 2 1\nC 4 3\nQ 3 1\nQ 1 5\nU 1\nU 2\nC 4 3\nQ 3 4", "Yes\nNo\nNo\nNo"], ["10 10\n1 2\n1 3\n3 4\n3 5\n1 6\n3 7\n1 8\n2 9\n5 10\nC 8 1\nQ 6 1\nC 2 1\nQ 2 10\nU 1\nC 9 2\nC 7 3\nU 3\nQ 6 7\nQ 1 10", "Yes\nNo\nNo\nYes"], ["20 20\n1 2\n1 3\n2 4\n1 5\n1 6\n4 7\n1 8\n2 9\n5 10\n1 11\n2 12\n7 13\n1 14\n1 15\n11 16\n4 17\n3 18\n18 19\n8 20\nQ 13 5\nC 14 1\nC 16 11\nU 1\nU 2\nC 20 8\nQ 7 1\nC 7 4\nQ 17 17\nQ 1 6\nC 16 11\nC 2 1\nQ 16 2\nU 3\nU 5\nU 6\nC 2 1\nC 6 1\nC 13 7\nC 11 1\n", "Yes\nYes\nYes\nYes\nNo\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "树状数组", "最近公共祖先 LCA", "树链剖分", "动态树 LCT"], "title": "部落冲突", "background": "在一个叫做 Travian 的世界里，生活着各个大大小小的部落。其中最为强大的是罗马、高卢和日耳曼。他们之间为了争夺资源和土地，进行了无数次的战斗。期间诞生了众多家喻户晓的英雄人物，也留下了许多可歌可泣的动人故事。\n\n![](http://img4.dwstatic.com/coc/1602/320370032694/1456415099616.jpg)\n\n其中，在大大小小的部落之间，会有一些道路相连，这些道路是 Travian 世界里的重要枢纽，简单起见，你可以把这些部落与部落之间相连的道路看作一颗树，可见每条道路对于 Travian 世界的重要程度。有了这些道路，建筑工人就可以通过这些道路进行友好外交啦。\n\n然而，事情并不会像想象的那样美好，由于资源的匮乏，相邻的部落（由一条道路相连的部落）之间经常会发生大大小小的冲突事件，更有甚者，会升级为部落之间的大型战争。\n\n为了避免误伤，每当两个相邻的部落之间发生大型战争之时，这两个部落间的道路是不允许通行的，对于一些强大的部落，甚至能与多个相邻的部落同时开战，同样的，这些战争地带的道路十分危险，是不可通行的。\n\n天下之势，分久必合，当两个部落经历了不打不相识的苦战之后，他们可以签订停战协议（暂时停战，以后依旧可能再次开战），这样，两个部落之间的道路又会重新恢复为可通行状态，建筑工人们又可以经过此地购买最新的大本营设计图纸来强大自己的部落了。\n\n为了简单起见，我们把各大战争事件按发起的时间顺序依次编号（最先发起的战争编号就为 $1$，第二次战争编号就为 $2$，以此类推），当两个部落停战之时，则会直接告诉你这场战争的编号，然后这场战争就载入了史册，不复存在了，当然，这并不会影响到其他战争的编号。\n\n建筑工人十分讨厌战争，因为战争，想从一个部落到另一个部落进行友好交流的建筑工人可能就此白跑一趟。所以，在他们出发之前，都会向你问问能不能到达他们想去的部落。\n", "description": "简单起见，你就是要处理下面三件事，所有的事件都是按照时间顺序给出的。\n\n1. `Q p q` 从第 $p$ 个部落出发的建筑工人想知道能否到达第 $q$ 个部落了，你要回答的便是 `Yes` / `No`，注意**大小写**。\n\n2. `C p q` 第 $p$ 个部落与第 $q$ 个部落开战了，保证他们一定是相邻的部落，且目前处于停战（未开战）状态。\n\n3. `U x` 第 $x$ 次发生的战争结束了，它将永远的被载入史册，不复存在（保证这个消息不会告诉你多次）\n", "inputFormat": "第一行两个数 $n$ 和 $m$， $n$ 代表了一共有 $n$ 个部落，$m$ 代表了以上三种事件发生的总数。\n\n接下来的 $n - 1$ 行，每行两个数 $p, q$，代表了第 $p$ 个部落与第 $q$ 个部落之间有一条道路相连。\n\n接下来的 $m$ 行，每行表示一件事，详见题目描述。", "outputFormat": "每行一个 `Yes` 或者 `No`，表示从第 $p$ 个部落出发的建筑工人能否到达第 $q$ 个部落。", "hint": "对于 $30\\%$ 的数据，$n, m\\leq 6\\times10^3$。\n\n对于另 $30\\%$ 的数据，保证部落之间的地理关系是一条链，且 $i$ 与 $i + 1$ 之间有一条道路。\n\n对于另 $30\\%$ 的数据，$n, m\\leq 10^5$。\n\n对于 $100\\%$ 的数据，$1\\leq n, m\\leq 3\\times10^5$。\n", "locale": "zh-CN", "translations": {"en": {"title": "{{Tribal Conflict}}", "background": "{{In a world called Travian live many tribes both large and small. The strongest among them are the Romans, Gauls, and Germans. They have fought countless battles over resources and land. Many famous heroes were born during these times, and many moving stories were left behind.\n\n![](http://img4.dwstatic.com/coc/1602/320370032694/1456415099616.jpg)\n\nBetween the many tribes, there are roads connecting them. For simplicity, you can regard the road network between tribes as a tree, which shows how important each road is in the Travian world. With these roads, builders can travel for friendly diplomacy.\n\nHowever, things are not always so pleasant. Due to a lack of resources, neighboring tribes (connected by one road) often have conflicts, and sometimes these escalate into large-scale wars between tribes.\n\nTo avoid collateral damage, whenever two neighboring tribes are at large-scale war, the road between them is closed to traffic. Some powerful tribes can even go to war with multiple neighboring tribes at the same time; the roads within these war zones are dangerous and impassable.\n\nAs the saying goes, after long division comes union. After a hard battle, two tribes may sign a truce agreement (a temporary ceasefire; they may go to war again later). Then the road between them becomes passable again, and builders can pass through to buy the latest Town Hall blueprints to strengthen their tribes.\n\nFor simplicity, we number all war events in the order they start (the earliest war is numbered $1$, the second $2$, and so on). When two tribes make a truce, you will be told the number of that war. That war is then recorded in history and no longer exists. Of course, this does not affect the numbering of other wars.\n\nBuilders hate wars. Because of wars, a builder traveling from one tribe to another for friendly exchange may make a wasted trip. So before they set out, they will ask you whether they can reach their destination.}}", "description": "{{You need to handle the three types of events below. All events are given in chronological order. Initially, all roads are passable (no wars).\n\n1. `Q p q` A builder starting from the $p$-th tribe wants to know whether they can reach the $q$-th tribe. You must answer `Yes` / `No`. Note the capitalization.\n\n2. `C p q` The $p$-th tribe and the $q$-th tribe go to war. It is guaranteed they are adjacent tribes and are currently in a truce (not at war). The road between them becomes impassable.\n\n3. `U x` The $x$-th war ends and is recorded in history; it no longer exists (this message will not be given multiple times). The corresponding road becomes passable again.}}", "inputFormat": "{{The first line contains two integers $n$ and $m$: $n$ is the number of tribes, and $m$ is the total number of events.\n\nThe next $n - 1$ lines each contain two integers $p, q$, indicating there is a road connecting the $p$-th tribe and the $q$-th tribe.\n\nThe next $m$ lines each describe one event, as detailed in the Description.}}", "outputFormat": "{{For each query, output one `Yes` or `No` on its own line, indicating whether a builder starting from the $p$-th tribe can reach the $q$-th tribe.}}", "hint": "{{For $30\\%$ of the testdata, $n, m \\leq 6 \\times 10^3$.\n\nFor another $30\\%$ of the testdata, the tribes form a chain, and there is a road between $i$ and $i + 1$.\n\nFor another $30\\%$ of the testdata, $n, m \\leq 10^5$.\n\nFor $100\\%$ of the testdata, $1 \\leq n, m \\leq 3 \\times 10^5$.}}\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "部落冲突", "background": "在一个叫做 Travian 的世界里，生活着各个大大小小的部落。其中最为强大的是罗马、高卢和日耳曼。他们之间为了争夺资源和土地，进行了无数次的战斗。期间诞生了众多家喻户晓的英雄人物，也留下了许多可歌可泣的动人故事。\n\n![](http://img4.dwstatic.com/coc/1602/320370032694/1456415099616.jpg)\n\n其中，在大大小小的部落之间，会有一些道路相连，这些道路是 Travian 世界里的重要枢纽，简单起见，你可以把这些部落与部落之间相连的道路看作一颗树，可见每条道路对于 Travian 世界的重要程度。有了这些道路，建筑工人就可以通过这些道路进行友好外交啦。\n\n然而，事情并不会像想象的那样美好，由于资源的匮乏，相邻的部落（由一条道路相连的部落）之间经常会发生大大小小的冲突事件，更有甚者，会升级为部落之间的大型战争。\n\n为了避免误伤，每当两个相邻的部落之间发生大型战争之时，这两个部落间的道路是不允许通行的，对于一些强大的部落，甚至能与多个相邻的部落同时开战，同样的，这些战争地带的道路十分危险，是不可通行的。\n\n天下之势，分久必合，当两个部落经历了不打不相识的苦战之后，他们可以签订停战协议（暂时停战，以后依旧可能再次开战），这样，两个部落之间的道路又会重新恢复为可通行状态，建筑工人们又可以经过此地购买最新的大本营设计图纸来强大自己的部落了。\n\n为了简单起见，我们把各大战争事件按发起的时间顺序依次编号（最先发起的战争编号就为 $1$，第二次战争编号就为 $2$，以此类推），当两个部落停战之时，则会直接告诉你这场战争的编号，然后这场战争就载入了史册，不复存在了，当然，这并不会影响到其他战争的编号。\n\n建筑工人十分讨厌战争，因为战争，想从一个部落到另一个部落进行友好交流的建筑工人可能就此白跑一趟。所以，在他们出发之前，都会向你问问能不能到达他们想去的部落。\n", "description": "简单起见，你就是要处理下面三件事，所有的事件都是按照时间顺序给出的。\n\n1. `Q p q` 从第 $p$ 个部落出发的建筑工人想知道能否到达第 $q$ 个部落了，你要回答的便是 `Yes` / `No`，注意**大小写**。\n\n2. `C p q` 第 $p$ 个部落与第 $q$ 个部落开战了，保证他们一定是相邻的部落，且目前处于停战（未开战）状态。\n\n3. `U x` 第 $x$ 次发生的战争结束了，它将永远的被载入史册，不复存在（保证这个消息不会告诉你多次）\n", "inputFormat": "第一行两个数 $n$ 和 $m$， $n$ 代表了一共有 $n$ 个部落，$m$ 代表了以上三种事件发生的总数。\n\n接下来的 $n - 1$ 行，每行两个数 $p, q$，代表了第 $p$ 个部落与第 $q$ 个部落之间有一条道路相连。\n\n接下来的 $m$ 行，每行表示一件事，详见题目描述。", "outputFormat": "每行一个 `Yes` 或者 `No`，表示从第 $p$ 个部落出发的建筑工人能否到达第 $q$ 个部落。", "hint": "对于 $30\\%$ 的数据，$n, m\\leq 6\\times10^3$。\n\n对于另 $30\\%$ 的数据，保证部落之间的地理关系是一条链，且 $i$ 与 $i + 1$ 之间有一条道路。\n\n对于另 $30\\%$ 的数据，$n, m\\leq 10^5$。\n\n对于 $100\\%$ 的数据，$1\\leq n, m\\leq 3\\times10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P3951", "type": "P", "difficulty": 3, "samples": [["3 7", "11\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["数学", "2017", "NOIP 提高组", "不定方程", "中国剩余定理 CRT", "构造"], "title": "[NOIP 2017 提高组] 小凯的疑惑", "background": "NOIP2017 提高组 D1T1", "description": "小凯手中有两种面值的金币，两种面值均为正整数且彼此互素。每种金币小凯都有无数个。在不找零的情况下，仅凭这两种金币，有些物品他是无法准确支付的。现在小凯想知道在无法准确支付的物品中，最贵的价值是多少金币？\n\n注意：输入数据保证存在小凯无法准确支付的商品。\n", "inputFormat": "两个正整数 $a$ 和 $b$，它们之间用一个空格隔开，表示小凯中金币的面值。\n", "outputFormat": "一个正整数 $N$，表示不找零的情况下，小凯用手中的金币不能准确支付的最贵的物品的价值。\n", "hint": "【输入输出样例 1 说明】\n\n小凯手中有面值为 $3$ 和 $7$ 的金币无数个，在不找零的前提下无法准确支付价值为 $1,2,4,5,8,11$ 的物品，其中最贵的物品价值为 $11$，比 $11$ 贵的物品都能买到，比如：\n\n$12 = 3 \\times 4 + 7 \\times 0$；\n\n$13 = 3 \\times 2 + 7 \\times 1$；\n\n$14 = 3 \\times 0 + 7 \\times 2$；\n\n$15 = 3 \\times 5 + 7 \\times 0 $。\n\n\n【数据范围与约定】\n\n对于 $30\\%$ 的数据： $1 \\le a,b \\le 50 $。\n\n对于 $60\\%$ 的数据： $1 \\le a,b \\le 10^4 $。\n\n对于$ 100\\%$ 的数据：$1 \\le a,b \\le 10^9 $。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2017 Senior] Xiaokai's Doubt", "background": "NOIP 2017 Senior D1T1.", "description": "Xiaokai has two coin denominations, both positive integers and coprime. He has infinitely many coins of each denomination. Without making change, using only these two denominations, there are some item prices he cannot pay exactly. Now Xiaokai wants to know: among the prices that cannot be paid exactly, what is the most expensive price?\n\nNote: The input guarantees that there exists an item that Xiaokai cannot pay exactly.", "inputFormat": "Two positive integers $a$ and $b$, separated by a single space, representing the denominations of Xiaokai's coins.", "outputFormat": "A single positive integer $N$, the most expensive item price that cannot be paid exactly without making change.", "hint": "[Explanation for Sample 1]\n\nXiaokai has infinitely many coins with denominations $3$ and $7$. Without making change, he cannot pay exactly for items priced $1, 2, 4, 5, 8, 11$. Among them, the most expensive price is $11$. Every price greater than $11$ can be paid, for example:\n\n$12 = 3 \\times 4 + 7 \\times 0$；\n\n$13 = 3 \\times 2 + 7 \\times 1$；\n\n$14 = 3 \\times 0 + 7 \\times 2$；\n\n$15 = 3 \\times 5 + 7 \\times 0$。\n\nConstraints\n\nFor $30\\%$ of the testdata: $1 \\le a,b \\le 50$。\n\nFor $60\\%$ of the testdata: $1 \\le a,b \\le 10^4$。\n\nFor $100\\%$ of the testdata: $1 \\le a,b \\le 10^9$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2017 提高组] 小凯的疑惑", "background": "NOIP2017 提高组 D1T1", "description": "小凯手中有两种面值的金币，两种面值均为正整数且彼此互素。每种金币小凯都有无数个。在不找零的情况下，仅凭这两种金币，有些物品他是无法准确支付的。现在小凯想知道在无法准确支付的物品中，最贵的价值是多少金币？\n\n注意：输入数据保证存在小凯无法准确支付的商品。\n", "inputFormat": "两个正整数 $a$ 和 $b$，它们之间用一个空格隔开，表示小凯中金币的面值。\n", "outputFormat": "一个正整数 $N$，表示不找零的情况下，小凯用手中的金币不能准确支付的最贵的物品的价值。\n", "hint": "【输入输出样例 1 说明】\n\n小凯手中有面值为 $3$ 和 $7$ 的金币无数个，在不找零的前提下无法准确支付价值为 $1,2,4,5,8,11$ 的物品，其中最贵的物品价值为 $11$，比 $11$ 贵的物品都能买到，比如：\n\n$12 = 3 \\times 4 + 7 \\times 0$；\n\n$13 = 3 \\times 2 + 7 \\times 1$；\n\n$14 = 3 \\times 0 + 7 \\times 2$；\n\n$15 = 3 \\times 5 + 7 \\times 0 $。\n\n\n【数据范围与约定】\n\n对于 $30\\%$ 的数据： $1 \\le a,b \\le 50 $。\n\n对于 $60\\%$ 的数据： $1 \\le a,b \\le 10^4 $。\n\n对于$ 100\\%$ 的数据：$1 \\le a,b \\le 10^9 $。\n", "locale": "zh-CN"}}}
{"pid": "P3952", "type": "P", "difficulty": 4, "samples": [["8\n2 O(1)\nF i 1 1\nE\n2 O(n^1)\nF x 1 n\nE\n1 O(1)\nF x 1 n\n4 O(n^2)\nF x 5 n\nF y 10 n\nE\nE\n4 O(n^2)\nF x 9 n\nE\nF y 2 n\nE\n4 O(n^1)\nF x 9 n\nF y n 4\nE\nE\n4 O(1)\nF y n 4\nF x 9 n\nE\nE\n4 O(n^2)\nF x 1 n\nF x 1 10\nE\nE", "Yes\nYes\nERR\nYes\nNo\nYes\nYes\nERR"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "2017", "NOIP 提高组", "栈"], "title": "[NOIP 2017 提高组] 时间复杂度", "background": "NOIP2017 提高组 D1T2", "description": "小明正在学习一种新的编程语言 A++，刚学会循环语句的他激动地写了好多程序并给出了他自己算出的时间复杂度，可他的编程老师实在不想一个一个检查小明的程序，于是你的机会来啦！下面请你编写程序来判断小明对他的每个程序给出的时间复杂度是否正确。\n\nA++ 语言的循环结构如下：\n\n \n```cpp\nF i x y\n    循环体\nE\n```\n \n \n其中`F i x y`表示新建变量 $i$（变量 $i$ 不可与未被销毁的变量重名）并初始化为 $x$， 然后判断 $i$ 和 $y$ 的大小关系，若 $i$ 小于等于 $y$ 则进入循环，否则不进入。每次循环结束后 $i$ 都会被修改成 $i+1$，一旦 $i$ 大于 $y$ 终止循环。\n\n$x$ 和 $y$ 可以是正整数（$x$ 和 $y$ 的大小关系不定）或变量 $n$。$n$ 是一个表示数据规模的变量，在时间复杂度计算中需保留该变量而不能将其视为常数，该数远大于 $100$。\n\n`E` 表示循环体结束。循环体结束时，这个循环体新建的变量也被销毁。\n\n注：本题中为了书写方便，在描述复杂度时，使用大写英文字母 $\\operatorname O$ 表示通常意义下 $\\Theta$ 的概念。", "inputFormat": "输入文件第一行一个正整数 $t$，表示有 $t$（$t \\le 10$）个程序需要计算时间复杂度。 每个程序我们只需抽取其中 `F i x y` 和 `E` 即可计算时间复杂度。注意：循环结构允许嵌套。\n\n接下来每个程序的第一行包含一个正整数 $L$ 和一个字符串，$L$ 代表程序行数，字符串表示这个程序的复杂度，`O(1)` 表示常数复杂度，`O(n^w)` 表示复杂度为 $n^w$，其中 $w$ 是一个小于 $100$ 的正整数，输入保证复杂度只有 `O(1)` 和 `O(n^w)` 两种类型。\n\n接下来 $L$ 行代表程序中循环结构中的`F i x y`或者 `E`。 程序行若以`F`开头，表示进入一个循环，之后有空格分离的三个字符（串）`i x y`， 其中 $i$ 是一个小写字母（保证不为 $n$），表示新建的变量名，$x$ 和 $y$ 可能是正整数或 $n$ ，已知若为正整数则一定小于 $100$。\n\n程序行若以`E`开头，则表示循环体结束。", "outputFormat": "输出文件共 $t$ 行，对应输入的 $t$ 个程序，每行输出 `Yes` 或 `No` 或者 `ERR`，若程序实际复杂度与输入给出的复杂度一致则输出 `Yes`，不一致则输出 `No`，若程序有语法错误（其中语法错误只有: ① `F` 和 `E` 不匹配 ②新建的变量与已经存在但未被销毁的变量重复两种情况），则输出 `ERR`。\n\n注意：即使在程序不会执行的循环体中出现了语法错误也会编译错误，要输出 `ERR`。", "hint": "【输入输出样例解释 $1$】\n\n第一个程序 $i$ 从 $1$ 到 $1$ 是常数复杂度。\n\n第二个程序 $x$ 从 $1$ 到 $n$ 是 $n$ 的一次方的复杂度。\n\n第三个程序有一个 `F` 开启循环却没有 `E` 结束，语法错误。\n\n第四个程序二重循环，$n$ 的平方的复杂度。\n\n第五个程序两个一重循环，$n$ 的一次方的复杂度。\n\n第六个程序第一重循环正常，但第二重循环开始即终止（因为 $n$ 远大于 $100$，$100$ 大于 $4$）。\n\n第七个程序第一重循环无法进入，故为常数复杂度。\n\n第八个程序第二重循环中的变量 $x$ 与第一重循环中的变量重复，出现语法错误②，输出 `ERR`。\n\n【数据规模与约定】\n\n对于 $30\\%$ 的数据：不存在语法错误，数据保证小明给出的每个程序的前 $L/2$ 行一定为以 `F` 开头的语句，第 $L/2+1$ 行至第 $L$ 行一定为以 `E` 开头的语句，$L  \\le 10$，若 $x$、$y$ 均为整数，$x$ 一定小于 $y$，且只有 $y$ 有可能为 $n$。\n\n对于 $50\\%$ 的数据：不存在语法错误，$L  \\le 100$，且若 $x$、$y$ 均为整数，$x$ 一定小于 $y$，且只有 $y$ 有可能为 $n$。\n\n对于 $70\\%$ 的数据：不存在语法错误，$L  \\le 100$。\n\n对于 $100\\%$ 的数据：$L  \\le 100$。\n\n\n---\n如果需要 Hack 请私信 @zhouyonglong 或发讨论，提供数据和能 Hack 掉的本题的AC记录。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2017 Senior] Time Complexity", "background": "NOIP 2017 Senior D1T2.", "description": "Xiao Ming is learning a new programming language, A++. After just learning loop statements, he excitedly wrote many programs and gave the time complexity he calculated for each. His programming teacher does not want to check them one by one, so here is your chance! Please write a program to judge whether the time complexity Xiao Ming gave for each program is correct.\n\nThe loop structure in A++ is as follows:\n\n```cpp\nF i x y\n    loop body\nE\n```\n\nHere, `F i x y` means creating a new variable $i$ (the variable $i$ must not have the same name as any existing variable that has not been destroyed) and initializing it to $x$. Then compare $i$ with $y$: if $i$ is less than or equal to $y$, enter the loop; otherwise, do not enter. After each loop, $i$ is updated to $i+1$. Once $i$ becomes greater than $y$, the loop terminates.\n\n$x$ and $y$ can be positive integers (the relation between $x$ and $y$ is not fixed) or the variable $n$. The variable $n$ represents the problem size; in time complexity analysis, $n$ must be kept as a variable and not treated as a constant. It is much larger than $100$.\n\n`E` indicates the end of the loop body. When the loop body ends, the variables created by this loop are destroyed.\n\nNote: For convenience, this problem uses the uppercase letter $\\operatorname O$ to denote the concept of $\\Theta$ in the usual sense when describing complexity.", "inputFormat": "The first line of input contains a positive integer $t$, meaning there are $t$ ($t \\le 10$) programs whose time complexity needs to be checked. For each program, we only need to extract the `F i x y` and `E` lines to compute the time complexity. Note: Loop structures can be nested.\n\nFor each program, the first line contains a positive integer $L$ and a string. $L$ is the number of lines in the program, and the string denotes the program’s claimed complexity. `O(1)` means constant complexity, and `O(n^w)` means the complexity is $n^w$, where $w$ is a positive integer less than $100$. The input guarantees that the claimed complexity is only one of `O(1)` or `O(n^w)`.\n\nThe next $L$ lines are either `F i x y` or `E`, representing the loop structure in the program. If a line starts with `F`, it indicates entering a loop, followed by three space-separated tokens `i x y`, where $i$ is a lowercase letter (guaranteed not to be $n$) representing the newly created variable name, and $x$ and $y$ may be positive integers or $n$. If they are positive integers, they are guaranteed to be less than $100$.\n\nIf a line starts with `E`, it indicates the end of a loop body.", "outputFormat": "Output exactly $t$ lines, each corresponding to one program in the input. For each program, output `Yes`, `No`, or `ERR`. Output `Yes` if the actual complexity matches the given complexity; output `No` if it does not match; output `ERR` if there is a syntax error. The only syntax errors are: ① mismatched `F` and `E`; ② creating a variable with the same name as an already existing but not yet destroyed variable.\n\nNote: Even if a syntax error occurs inside a loop body that will never execute, it is still a compile-time error, and you must output `ERR`.", "hint": "[Explanation of Sample 1]\n\n- The first program: $i$ goes from $1$ to $1$, which is constant complexity.\n- The second program: $x$ goes from $1$ to $n$, which is linear in $n$.\n- The third program: there is an `F` that starts a loop without a matching `E`, which is a syntax error.\n- The fourth program: two nested loops, so the complexity is $n^2$.\n- The fifth program: two separate single loops, so the complexity is linear in $n$.\n- The sixth program: the first loop is normal, but the second loop terminates immediately (because $n$ is much larger than $100$, and $100$ is larger than $4$).\n- The seventh program: the first loop cannot be entered, so it is constant complexity.\n- The eighth program: the variable $x$ in the second nested loop duplicates the variable from the first loop, which triggers syntax error ②, so output `ERR`.\n\n[Constraints and Notes]\n\n- For $30\\%$ of the testdata: no syntax errors. It is guaranteed that the first $L/2$ lines are `F`-starting statements, and lines $L/2+1$ to $L$ are `E`-starting statements. $L \\le 10$. If $x$ and $y$ are both integers, then $x < y$, and only $y$ may be $n$.\n- For $50\\%$ of the testdata: no syntax errors. $L \\le 100$. If $x$ and $y$ are both integers, then $x < y$, and only $y$ may be $n$.\n- For $70\\%$ of the testdata: no syntax errors. $L \\le 100$.\n- For $100\\%$ of the testdata: $L \\le 100$.\n\n---\nIf you need to hack, please private message @zhouyonglong or start a discussion, and provide testdata and an AC submission that this problem can be hacked by.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2017 提高组] 时间复杂度", "background": "NOIP2017 提高组 D1T2", "description": "小明正在学习一种新的编程语言 A++，刚学会循环语句的他激动地写了好多程序并给出了他自己算出的时间复杂度，可他的编程老师实在不想一个一个检查小明的程序，于是你的机会来啦！下面请你编写程序来判断小明对他的每个程序给出的时间复杂度是否正确。\n\nA++ 语言的循环结构如下：\n\n \n```cpp\nF i x y\n    循环体\nE\n```\n \n \n其中`F i x y`表示新建变量 $i$（变量 $i$ 不可与未被销毁的变量重名）并初始化为 $x$， 然后判断 $i$ 和 $y$ 的大小关系，若 $i$ 小于等于 $y$ 则进入循环，否则不进入。每次循环结束后 $i$ 都会被修改成 $i+1$，一旦 $i$ 大于 $y$ 终止循环。\n\n$x$ 和 $y$ 可以是正整数（$x$ 和 $y$ 的大小关系不定）或变量 $n$。$n$ 是一个表示数据规模的变量，在时间复杂度计算中需保留该变量而不能将其视为常数，该数远大于 $100$。\n\n`E` 表示循环体结束。循环体结束时，这个循环体新建的变量也被销毁。\n\n注：本题中为了书写方便，在描述复杂度时，使用大写英文字母 $\\operatorname O$ 表示通常意义下 $\\Theta$ 的概念。", "inputFormat": "输入文件第一行一个正整数 $t$，表示有 $t$（$t \\le 10$）个程序需要计算时间复杂度。 每个程序我们只需抽取其中 `F i x y` 和 `E` 即可计算时间复杂度。注意：循环结构允许嵌套。\n\n接下来每个程序的第一行包含一个正整数 $L$ 和一个字符串，$L$ 代表程序行数，字符串表示这个程序的复杂度，`O(1)` 表示常数复杂度，`O(n^w)` 表示复杂度为 $n^w$，其中 $w$ 是一个小于 $100$ 的正整数，输入保证复杂度只有 `O(1)` 和 `O(n^w)` 两种类型。\n\n接下来 $L$ 行代表程序中循环结构中的`F i x y`或者 `E`。 程序行若以`F`开头，表示进入一个循环，之后有空格分离的三个字符（串）`i x y`， 其中 $i$ 是一个小写字母（保证不为 $n$），表示新建的变量名，$x$ 和 $y$ 可能是正整数或 $n$ ，已知若为正整数则一定小于 $100$。\n\n程序行若以`E`开头，则表示循环体结束。", "outputFormat": "输出文件共 $t$ 行，对应输入的 $t$ 个程序，每行输出 `Yes` 或 `No` 或者 `ERR`，若程序实际复杂度与输入给出的复杂度一致则输出 `Yes`，不一致则输出 `No`，若程序有语法错误（其中语法错误只有: ① `F` 和 `E` 不匹配 ②新建的变量与已经存在但未被销毁的变量重复两种情况），则输出 `ERR`。\n\n注意：即使在程序不会执行的循环体中出现了语法错误也会编译错误，要输出 `ERR`。", "hint": "【输入输出样例解释 $1$】\n\n第一个程序 $i$ 从 $1$ 到 $1$ 是常数复杂度。\n\n第二个程序 $x$ 从 $1$ 到 $n$ 是 $n$ 的一次方的复杂度。\n\n第三个程序有一个 `F` 开启循环却没有 `E` 结束，语法错误。\n\n第四个程序二重循环，$n$ 的平方的复杂度。\n\n第五个程序两个一重循环，$n$ 的一次方的复杂度。\n\n第六个程序第一重循环正常，但第二重循环开始即终止（因为 $n$ 远大于 $100$，$100$ 大于 $4$）。\n\n第七个程序第一重循环无法进入，故为常数复杂度。\n\n第八个程序第二重循环中的变量 $x$ 与第一重循环中的变量重复，出现语法错误②，输出 `ERR`。\n\n【数据规模与约定】\n\n对于 $30\\%$ 的数据：不存在语法错误，数据保证小明给出的每个程序的前 $L/2$ 行一定为以 `F` 开头的语句，第 $L/2+1$ 行至第 $L$ 行一定为以 `E` 开头的语句，$L  \\le 10$，若 $x$、$y$ 均为整数，$x$ 一定小于 $y$，且只有 $y$ 有可能为 $n$。\n\n对于 $50\\%$ 的数据：不存在语法错误，$L  \\le 100$，且若 $x$、$y$ 均为整数，$x$ 一定小于 $y$，且只有 $y$ 有可能为 $n$。\n\n对于 $70\\%$ 的数据：不存在语法错误，$L  \\le 100$。\n\n对于 $100\\%$ 的数据：$L  \\le 100$。\n\n\n---\n如果需要 Hack 请私信 @zhouyonglong 或发讨论，提供数据和能 Hack 掉的本题的AC记录。", "locale": "zh-CN"}}}
{"pid": "P3953", "type": "P", "difficulty": 5, "samples": [["2\n5 7 2 10\n1 2 1\n2 4 0\n4 5 2\n2 3 2\n3 4 1\n3 5 2\n1 5 3\n2 2 0 10\n1 2 0\n2 1 0", "3\n-1\n\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["搜索", "2017", "NOIP 提高组", "记忆化搜索", "最短路"], "title": "[NOIP 2017 提高组] 逛公园", "background": "NOIP2017 D1T3", "description": "策策同学特别喜欢逛公园。公园可以看成一张 $N$ 个点 $M$ 条边构成的有向图，且没有 自环和重边。其中 $1$ 号点是公园的入口，$N$ 号点是公园的出口，每条边有一个非负权值， 代表策策经过这条边所要花的时间。\n\n策策每天都会去逛公园，他总是从 $1$ 号点进去，从 $N$ 号点出来。\n\n策策喜欢新鲜的事物，他不希望有两天逛公园的路线完全一样，同时策策还是一个特别热爱学习的好孩子，他不希望每天在逛公园这件事上花费太多的时间。如果 $1$ 号点 到 $N$ 号点的最短路长为 $d$，那么策策只会喜欢长度不超过 $d + K$ 的路线。\n\n策策同学想知道总共有多少条满足条件的路线，你能帮帮他吗？\n\n为避免输出过大，答案对 $P$ 取模。\n\n如果有无穷多条合法的路线，请输出 $-1$。", "inputFormat": "第一行包含一个整数 $T$, 代表数据组数。\n\n接下来 $T$ 组数据，对于每组数据： 第一行包含四个整数 $N,M,K,P$，每两个整数之间用一个空格隔开。\n\n\n接下来 $M$ 行，每行三个整数 $a_i,b_i,c_i$，代表编号为 $a_i,b_i$ 的点之间有一条权值为 $c_i$ 的有向边，每两个整数之间用一个空格隔开。", "outputFormat": "输出文件包含 $T$ 行，每行一个整数代表答案。", "hint": "【样例解释1】\n\n\n对于第一组数据，最短路为 $3$。 $1\\to 5, 1\\to 2\\to 4\\to 5, 1\\to 2\\to 3\\to 5$ 为 $3$ 条合法路径。\n\n\n【测试数据与约定】\n\n对于不同的测试点，我们约定各种参数的规模不会超过如下\n\n::cute-table{tuack}\n\n|测试点编号　　|$T$　　　|$N$　　　|$M$　　　|$K$　　　|是否有 $0$ 边|\n:-:|:-:|:-:|:-:|:-:|:-:\n$1$|$5$|$5$|$10$|$0$|否\n$2$|$5$|$10^3$|$2\\times 10^3$|$0$|否\n$3$|$5$|$10^3$|$2\\times 10^3$|$50$|否\n$4$|$5$|$10^3$|$2\\times 10^3$|$50$|否\n$5$|$5$|$10^3$|$2\\times 10^3$|$50$|否\n$6$|$5$|$10^3$|$2\\times 10^3$|$50$|是\n$7$|$5$|$10^5$|$2\\times 10^5$|$0$|否\n$8$|$3$|$10^5$|$2\\times 10^5$|$50$|否\n$9$|$3$|$10^5$|$2\\times 10^5$|$50$|是\n$10$|$3$|$10^5$|$2\\times 10^5$|$50$|是\n\n\n对于 $100\\%$ 的数据，$1 \\le P \\le 10^9$，$1 \\le a_i,b_i \\le N$，$0 \\le c_i \\le 1000$。\n\n数据保证：至少存在一条合法的路线。\n\n---\n\n- 2019.8.30 增加了一组 hack 数据 by @skicean\n- 2022.7.21 增加了一组 hack 数据 by @djwj233", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2017 Senior] Visiting the Park", "background": "NOIP 2017 D1T3.", "description": "Cece loves visiting the park. The park can be regarded as a directed graph with $N$ vertices and $M$ edges, without self-loops and without multiple edges. Vertex $1$ is the entrance and vertex $N$ is the exit. Each edge has a non-negative weight representing the time Cece spends to traverse that edge.\n\nCece visits the park every day. He always enters from vertex $1$ and exits at vertex $N$.\n\nCece likes new things. He does not want to take exactly the same route on two different days. He also does not want to spend too much time. If the shortest path length from vertex $1$ to vertex $N$ is $d$, then Cece only likes routes with length no more than $d + K$.\n\nCece wants to know how many routes satisfy these conditions. Can you help him?\n\nTo avoid large output, report the answer modulo $P$.\n\nIf there are infinitely many valid routes, output $-1$.", "inputFormat": "The first line contains an integer $T$, the number of test cases.\n\nThen follow $T$ test cases. For each test case:\n- The first line contains four integers $N, M, K, P$, separated by a single space.\n- The next $M$ lines each contain three integers $a_i, b_i, c_i$, indicating there is a directed edge from vertex $a_i$ to vertex $b_i$ with weight $c_i$, with integers separated by a single space.", "outputFormat": "The output contains $T$ lines, each with one integer representing the answer.", "hint": "[Sample Explanation 1]\n\nFor the first test case, the shortest distance is $3$. $1\\to 5, 1\\to 2\\to 4\\to 5, 1\\to 2\\to 3\\to 5$ are $3$ valid paths.\n\n[Testdata and Conventions]\n\nFor different test points, the scales of various parameters do not exceed the following.\n\n::cute-table{tuack}\n\n| Test point ID | $T$ | $N$ | $M$ | $K$ | Any $0$-weight edges |\n:-:|:-:|:-:|:-:|:-:|:-:\n$1$ | $5$ | $5$ | $10$ | $0$ | No\n$2$ | $5$ | $10^3$ | $2\\times 10^3$ | $0$ | No\n$3$ | $5$ | $10^3$ | $2\\times 10^3$ | $50$ | No\n$4$ | $5$ | $10^3$ | $2\\times 10^3$ | $50$ | No\n$5$ | $5$ | $10^3$ | $2\\times 10^3$ | $50$ | No\n$6$ | $5$ | $10^3$ | $2\\times 10^3$ | $50$ | Yes\n$7$ | $5$ | $10^5$ | $2\\times 10^5$ | $0$ | No\n$8$ | $3$ | $10^5$ | $2\\times 10^5$ | $50$ | No\n$9$ | $3$ | $10^5$ | $2\\times 10^5$ | $50$ | Yes\n$10$ | $3$ | $10^5$ | $2\\times 10^5$ | $50$ | Yes\n\nFor $100\\%$ of the testdata, $1 \\le P \\le 10^9$, $1 \\le a_i, b_i \\le N$, $0 \\le c_i \\le 1000$.\n\nThe testdata guarantees that at least one valid route exists.\n\n---\n\n- 2019.8.30 Added a set of hack testdata by @skicean.\n- 2022.7.21 Added a set of hack testdata by @djwj233.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2017 提高组] 逛公园", "background": "NOIP2017 D1T3", "description": "策策同学特别喜欢逛公园。公园可以看成一张 $N$ 个点 $M$ 条边构成的有向图，且没有 自环和重边。其中 $1$ 号点是公园的入口，$N$ 号点是公园的出口，每条边有一个非负权值， 代表策策经过这条边所要花的时间。\n\n策策每天都会去逛公园，他总是从 $1$ 号点进去，从 $N$ 号点出来。\n\n策策喜欢新鲜的事物，他不希望有两天逛公园的路线完全一样，同时策策还是一个特别热爱学习的好孩子，他不希望每天在逛公园这件事上花费太多的时间。如果 $1$ 号点 到 $N$ 号点的最短路长为 $d$，那么策策只会喜欢长度不超过 $d + K$ 的路线。\n\n策策同学想知道总共有多少条满足条件的路线，你能帮帮他吗？\n\n为避免输出过大，答案对 $P$ 取模。\n\n如果有无穷多条合法的路线，请输出 $-1$。", "inputFormat": "第一行包含一个整数 $T$, 代表数据组数。\n\n接下来 $T$ 组数据，对于每组数据： 第一行包含四个整数 $N,M,K,P$，每两个整数之间用一个空格隔开。\n\n\n接下来 $M$ 行，每行三个整数 $a_i,b_i,c_i$，代表编号为 $a_i,b_i$ 的点之间有一条权值为 $c_i$ 的有向边，每两个整数之间用一个空格隔开。", "outputFormat": "输出文件包含 $T$ 行，每行一个整数代表答案。", "hint": "【样例解释1】\n\n\n对于第一组数据，最短路为 $3$。 $1\\to 5, 1\\to 2\\to 4\\to 5, 1\\to 2\\to 3\\to 5$ 为 $3$ 条合法路径。\n\n\n【测试数据与约定】\n\n对于不同的测试点，我们约定各种参数的规模不会超过如下\n\n::cute-table{tuack}\n\n|测试点编号　　|$T$　　　|$N$　　　|$M$　　　|$K$　　　|是否有 $0$ 边|\n:-:|:-:|:-:|:-:|:-:|:-:\n$1$|$5$|$5$|$10$|$0$|否\n$2$|$5$|$10^3$|$2\\times 10^3$|$0$|否\n$3$|$5$|$10^3$|$2\\times 10^3$|$50$|否\n$4$|$5$|$10^3$|$2\\times 10^3$|$50$|否\n$5$|$5$|$10^3$|$2\\times 10^3$|$50$|否\n$6$|$5$|$10^3$|$2\\times 10^3$|$50$|是\n$7$|$5$|$10^5$|$2\\times 10^5$|$0$|否\n$8$|$3$|$10^5$|$2\\times 10^5$|$50$|否\n$9$|$3$|$10^5$|$2\\times 10^5$|$50$|是\n$10$|$3$|$10^5$|$2\\times 10^5$|$50$|是\n\n\n对于 $100\\%$ 的数据，$1 \\le P \\le 10^9$，$1 \\le a_i,b_i \\le N$，$0 \\le c_i \\le 1000$。\n\n数据保证：至少存在一条合法的路线。\n\n---\n\n- 2019.8.30 增加了一组 hack 数据 by @skicean\n- 2022.7.21 增加了一组 hack 数据 by @djwj233", "locale": "zh-CN"}}}
{"pid": "P3954", "type": "P", "difficulty": 1, "samples": [["100 100 80 ", "90"], ["60 90 80 ", "79"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2017", "NOIP 普及组", "顺序结构"], "title": "[NOIP 2017 普及组] 成绩", "background": "NOIP2017 普及组 T1", "description": "牛牛最近学习了 C++ 入门课程，这门课程的总成绩计算方法是：\n\n$$\n\\text{总成绩}=\\text{作业成绩}\\times 20\\%+\\text{小测成绩}×30\\%+\\text{期末考试成绩} \\times 50\\%\n$$\n\n牛牛想知道，这门课程自己最终能得到多少分。\n", "inputFormat": "三个非负整数 $A,B,C$，分别表示牛牛的作业成绩、小测成绩和期末考试成绩。相邻两个数之间用一个空格隔开，三项成绩满分都是 $100$ 分。\n", "outputFormat": "一个整数，即牛牛这门课程的总成绩，满分也是 $100$ 分。\n", "hint": "**样例 1 说明**\n\n牛牛的作业成绩是 $100$ 分，小测成绩是 $100$ 分，期末考试成绩是 $80$ 分，总成绩是 $100 \\times 20\\%+100 \\times 30\\%+80 \\times 50\\%=20+30+40=90$。\n\n**样例 2 说明**\n\n牛牛的作业成绩是 $60$ 分，小测成绩是 $90$ 分，期末考试成绩是 $80$ 分，总成绩是 $60 \\times 20\\%+90 \\times 30\\%+80 \\times 50\\%=12+27+40=79$。\n\n**数据说明**\n\n对于 $30\\%$ 的数据，$A=B=0$。\n\n对于另外 $30\\%$ 的数据，$A=B=100$。\n\n对于 $100\\%$ 的数据，$0≤A,B,C≤100$ 且 $A,B,C$ 都是 $10$ 的整数倍。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2017 Junior] Score", "background": "NOIP 2017 Junior T1.", "description": "Niuniu recently studied an introductory C++ course. The total score for this course is calculated as:\n\n$$\n\\text{总成绩}=\\text{作业成绩}\\times 20\\%+\\text{小测成绩}×30\\%+\\text{期末考试成绩} \\times 50\\%\n$$\n\nNiuniu wants to know the final score they can get in this course.", "inputFormat": "Three non-negative integers $A, B, C$, representing Niuniu’s homework score, quiz score, and final exam score, respectively. Adjacent numbers are separated by a single space. Each of the three scores is out of $100$ points.", "outputFormat": "A single integer: Niuniu’s total score for the course, also out of $100$ points.", "hint": "**Sample 1 Explanation**\n\nNiuniu’s homework score is $100$ points, quiz score is $100$ points, and final exam score is $80$ points. The total score is $100 \\times 20\\%+100 \\times 30\\%+80 \\times 50\\%=20+30+40=90$.\n\n**Sample 2 Explanation**\n\nNiuniu’s homework score is $60$ points, quiz score is $90$ points, and final exam score is $80$ points. The total score is $60 \\times 20\\%+90 \\times 30\\%+80 \\times 50\\%=12+27+40=79$.\n\n**Constraints**\n\n- For $30\\%$ of the testdata, $A=B=0$.\n- For another $30\\%$ of the testdata, $A=B=100$.\n- For $100\\%$ of the testdata, $0≤A,B,C≤100$ and $A,B,C$ are all multiples of $10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2017 普及组] 成绩", "background": "NOIP2017 普及组 T1", "description": "牛牛最近学习了 C++ 入门课程，这门课程的总成绩计算方法是：\n\n$$\n\\text{总成绩}=\\text{作业成绩}\\times 20\\%+\\text{小测成绩}×30\\%+\\text{期末考试成绩} \\times 50\\%\n$$\n\n牛牛想知道，这门课程自己最终能得到多少分。\n", "inputFormat": "三个非负整数 $A,B,C$，分别表示牛牛的作业成绩、小测成绩和期末考试成绩。相邻两个数之间用一个空格隔开，三项成绩满分都是 $100$ 分。\n", "outputFormat": "一个整数，即牛牛这门课程的总成绩，满分也是 $100$ 分。\n", "hint": "**样例 1 说明**\n\n牛牛的作业成绩是 $100$ 分，小测成绩是 $100$ 分，期末考试成绩是 $80$ 分，总成绩是 $100 \\times 20\\%+100 \\times 30\\%+80 \\times 50\\%=20+30+40=90$。\n\n**样例 2 说明**\n\n牛牛的作业成绩是 $60$ 分，小测成绩是 $90$ 分，期末考试成绩是 $80$ 分，总成绩是 $60 \\times 20\\%+90 \\times 30\\%+80 \\times 50\\%=12+27+40=79$。\n\n**数据说明**\n\n对于 $30\\%$ 的数据，$A=B=0$。\n\n对于另外 $30\\%$ 的数据，$A=B=100$。\n\n对于 $100\\%$ 的数据，$0≤A,B,C≤100$ 且 $A,B,C$ 都是 $10$ 的整数倍。", "locale": "zh-CN"}}}
{"pid": "P3955", "type": "P", "difficulty": 2, "samples": [["5 5 \n2123 \n1123 \n23 \n24 \n24 \n2 23 \n3 123 \n3 124 \n2 12 \n2 12", "23 \n1123 \n-1 \n-1 \n-1 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["字符串", "2017", "NOIP 普及组", "排序"], "title": "[NOIP 2017 普及组] 图书管理员", "background": "NOIP2017 普及组 T2", "description": "图书馆中每本书都有一个图书编码，可以用于快速检索图书，这个图书编码是一个正整数。每位借书的读者手中有一个需求码，这个需求码也是一个正整数。如果一本书的图书编码恰好以读者的需求码结尾，那么这本书就是这位读者所需要的。小 D 刚刚当上图书馆的管理员，她知道图书馆里所有书的图书编码，她请你帮她写一个程序，对于每一位读者，求出他所需要的书中图书编码最小的那本书，如果没有他需要的书，请输出 `-1`。", "inputFormat": "第一行，包含两个正整数 $n,q$，以一个空格分开，分别代表图书馆里书的数量和读者的数量。\n\n接下来的 $n$ 行，每行包含一个正整数，代表图书馆里某本书的图书编码。\n\n接下来的 $q$ 行，每行包含两个正整数，以一个空格分开，第一个正整数代表图书馆里读者的需求码的长度，第二个正整数代表读者的需求码。", "outputFormat": "$q$ 行，每行包含一个整数，如果存在第 $i$ 个读者所需要的书，则在第 $i$ 行输出第 $i$ 个读者所需要的书中图书编码最小的那本书的图书编码，否则输出 $-1$。", "hint": "**数据规模与约定**\n\n对于 $20\\%$ 的数据，$1 \\le n \\le 2$。\n\n另有 $20\\%$ 的数据，$q = 1$。\n\n另有 $20\\%$ 的数据，所有读者的需求码的长度均为 $1$。\n\n另有 $20\\%$ 的数据，所有的图书编码按从小到大的顺序给出。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1000,1 \\le q \\le 1000$，所有的图书编码和需求码均不超过 $10^7$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2017 Junior] Librarian", "background": "NOIP 2017 Junior T2.", "description": "Each book in the library has a book code, which is a positive integer, used for quick lookup. Each reader has a request code, also a positive integer. If a book’s code ends with a reader’s request code, then that book is what the reader needs. Xiao D has just become the librarian. She knows the codes of all books in the library and asks you to write a program to, for each reader, find the book with the smallest code among the books they need. If there is no book they need, please output `-1`.", "inputFormat": "The first line contains two positive integers $n, q$, separated by a space, representing the number of books in the library and the number of readers, respectively.\n\nThe next $n$ lines each contain a positive integer, representing the code of a book in the library.\n\nThe next $q$ lines each contain two positive integers separated by a space. The first integer is the length of the reader’s request code, and the second integer is the reader’s request code.", "outputFormat": "Output $q$ lines. For the $i$-th line, if there exists a book needed by the $i$-th reader, output the smallest book code among those books; otherwise, output -1.", "hint": "Constraints and Notes\n\nFor $20\\%$ of the testdata, $1 \\le n \\le 2$.\n\nFor another $20\\%$ of the testdata, $q = 1$.\n\nFor another $20\\%$ of the testdata, the lengths of all readers’ request codes are $1$.\n\nFor another $20\\%$ of the testdata, all book codes are given in ascending order.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 1000, 1 \\le q \\le 1000$, and all book codes and request codes do not exceed $10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2017 普及组] 图书管理员", "background": "NOIP2017 普及组 T2", "description": "图书馆中每本书都有一个图书编码，可以用于快速检索图书，这个图书编码是一个正整数。每位借书的读者手中有一个需求码，这个需求码也是一个正整数。如果一本书的图书编码恰好以读者的需求码结尾，那么这本书就是这位读者所需要的。小 D 刚刚当上图书馆的管理员，她知道图书馆里所有书的图书编码，她请你帮她写一个程序，对于每一位读者，求出他所需要的书中图书编码最小的那本书，如果没有他需要的书，请输出 `-1`。", "inputFormat": "第一行，包含两个正整数 $n,q$，以一个空格分开，分别代表图书馆里书的数量和读者的数量。\n\n接下来的 $n$ 行，每行包含一个正整数，代表图书馆里某本书的图书编码。\n\n接下来的 $q$ 行，每行包含两个正整数，以一个空格分开，第一个正整数代表图书馆里读者的需求码的长度，第二个正整数代表读者的需求码。", "outputFormat": "$q$ 行，每行包含一个整数，如果存在第 $i$ 个读者所需要的书，则在第 $i$ 行输出第 $i$ 个读者所需要的书中图书编码最小的那本书的图书编码，否则输出 $-1$。", "hint": "**数据规模与约定**\n\n对于 $20\\%$ 的数据，$1 \\le n \\le 2$。\n\n另有 $20\\%$ 的数据，$q = 1$。\n\n另有 $20\\%$ 的数据，所有读者的需求码的长度均为 $1$。\n\n另有 $20\\%$ 的数据，所有的图书编码按从小到大的顺序给出。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1000,1 \\le q \\le 1000$，所有的图书编码和需求码均不超过 $10^7$。", "locale": "zh-CN"}}}
{"pid": "P3956", "type": "P", "difficulty": 4, "samples": [["5 7\n1 1 0\n1 2 0\n2 2 1\n3 3 1\n3 4 0\n4 4 1\n5 5 0", "8"], ["5 5\n1 1 0\n1 2 0\n2 2 1\n3 3 1\n5 5 0", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["搜索", "2017", "NOIP 普及组", "广度优先搜索 BFS", "深度优先搜索 DFS", "剪枝", "最短路"], "title": "[NOIP 2017 普及组] 棋盘", "background": "NOIP2017 普及组 T3", "description": "有一个 $m \\times m$ 的棋盘，棋盘上每一个格子可能是红色、黄色或没有任何颜色的。你现在要从棋盘的最左上角走到棋盘的最右下角。\n\n任何一个时刻，你所站在的位置必须是有颜色的（不能是无色的）， 你只能向上、下、左、右四个方向前进。当你从一个格子走向另一个格子时，如果两个格子的颜色相同，那你不需要花费金币；如果不同，则你需要花费 $1 $ 个金币。\n\n另外， 你可以花费 $2$ 个金币施展魔法让下一个无色格子暂时变为你指定的颜色。但这个魔法不能连续使用， 而且这个魔法的持续时间很短，也就是说，如果你使用了这个魔法，走到了这个暂时有颜色的格子上，你就不能继续使用魔法； 只有当你离开这个位置，走到一个本来就有颜色的格子上的时候，你才能继续使用这个魔法，而当你离开了这个位置（施展魔法使得变为有颜色的格子）时，这个格子恢复为无色。\n\n现在你要从棋盘的最左上角，走到棋盘的最右下角，求花费的最少金币是多少？", "inputFormat": "第一行包含两个正整数 $ m, n$，以一个空格分开，分别代表棋盘的大小，棋盘上有颜色的格子的数量。\n\n接下来的 $ n $ 行，每行三个正整数 $ x, y, c$， 分别表示坐标为 $(x,y)$ 的格子有颜色 $ c$。\n\n其中 $ c=1$ 代表黄色，$ c=0$ 代表红色。 相邻两个数之间用一个空格隔开。 棋盘左上角的坐标为 $(1, 1)$，右下角的坐标为 $( m, m)$。\n\n棋盘上其余的格子都是无色。保证棋盘的左上角，也就是 $(1, 1)$ 一定是有颜色的。", "outputFormat": "一个整数，表示花费的金币的最小值，如果无法到达，输出 `-1`。", "hint": "**样例 1 说明**\n\n棋盘的颜色如下表格所示，其中空白的部分表示无色。\n\n| $\\color{red}\\text{红}$ | $\\color{red}\\text{红}$ |  |  |  |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n|  | $\\color{yellow}\\text{黄}$ |  |  |  |\n|  |  | $\\color{yellow}\\text{黄}$ | $\\color{red}\\text{红}$ |  |\n|  |  |  | $\\color{yellow}\\text{黄}$ |  |\n|  |  |  |  | $\\color{red}\\text{红}$ |\n\n\n从 $(1,1)$ 开始，走到 $(1,2)$ 不花费金币。\n\n从 $(1,2)$ 向下走到 $(2,2)$ 花费 $1$ 枚金币。\n\n从 $(2,2)$ 施展魔法，将 $(2,3)$ 变为黄色，花费 $2$ 枚金币。\n\n从 $(2,2)$ 走到 $(2,3)$ 不花费金币。\n\n从 $(2,3)$ 走到 $(3,3)$ 不花费金币。\n\n从 $(3,3)$ 走到 $(3,4)$ 花费 $1$ 枚金币。\n\n从 $(3,4)$ 走到 $(4,4)$ 花费 $1$ 枚金币。\n\n从 $(4,4)$ 施展魔法，将 $(4,5)$ 变为黄色，花费 $ 2$ 枚金币。\n\n从 $(4,4)$ 走到 $(4,5)$ 不花费金币。\n\n从 $(4,5)$ 走到 $(5,5)$ 花费 $1$ 枚金币。\n\n共花费 $8 $ 枚金币。\n\n**样例 2 说明**\n\n棋盘的颜色如下表格所示，其中空白的部分表示无色。\n\n| $\\color{red}\\text{红}$ | $\\color{red}\\text{红}$ |  |  |  |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n|  | $\\color{yellow}\\text{黄}$ |  |  |  |\n|  |  | $\\color{yellow}\\text{黄}$ |  |  |\n|  |  |  | $\\color{white}\\text{　}$ |  |\n|  |  |  |  | $\\color{red}\\text{红}$ |\n\n从 $( 1, 1)$ 走到 $( 1, 2)$，不花费金币。\n\n从 $( 1, 2)$ 走到 $( 2, 2)$，花费 $ 1 $ 金币。\n\n施展魔法将 $( 2, 3)$ 变为黄色，并从 $( 2, 2)$ 走到 $( 2, 3)$ 花费 $ 2$ 金币。\n\n从 $( 2, 3)$ 走到 $( 3, 3)$ 不花费金币。\n\n从 $( 3, 3)$ 只能施展魔法到达 $( 3, 2),( 2, 3),( 3, 4),( 4, 3)$。\n\n而从以上四点均无法到达 $( 5, 5)$，故无法到达终点，输出$-1$。\n\n**数据规模与约定**\n\n对于 $30\\%$ 的数据，$1 ≤ m ≤ 5, 1 ≤ n ≤ 10$。\n\n对于 $60\\%$ 的数据，$1 ≤ m ≤ 20, 1 ≤ n ≤ 200$。\n\n对于 $100\\%$ 的数据，$1 ≤ m ≤ 100, 1 ≤ n ≤ 1,000, 0 ≤ c ≤ 2$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2017 Junior] Chessboard", "background": "NOIP 2017 Junior T3.", "description": "There is an $m \\times m$ chessboard. Each cell on the board may be red, yellow, or colorless. You need to go from the top-left corner of the board to the bottom-right corner.\n\nAt any moment, the cell you stand on must be colored (not colorless). You can move only in four directions: up, down, left, and right. When you move from one cell to another, if the two cells have the same color, you do not need to spend any coins; if the colors are different, you need to spend $1$ coin.\n\nIn addition, you can spend $2$ coins to cast a spell to temporarily change the next colorless cell into a color you choose. But this spell cannot be used consecutively, and its duration is short. That is, if you use this spell and step onto this temporarily colored cell, you cannot use the spell again; only when you leave this position and step onto a cell that originally has a color can you use the spell again. When you leave the cell that was made colored by the spell, it reverts to colorless.\n\nNow you need to go from the top-left corner to the bottom-right corner of the board. Find the minimum number of coins required.", "inputFormat": "The first line contains two positive integers $ m, n$, separated by a space, which denote the size of the board and the number of colored cells, respectively.\n\nThe next $ n $ lines each contain three integers $ x, y, c$, indicating that the cell at coordinates $(x,y)$ has color $ c$.\n\nHere, $ c=1$ means yellow, and $ c=0$ means red. Adjacent numbers are separated by a space. The top-left corner has coordinates $(1, 1)$, and the bottom-right corner has coordinates $( m, m)$.\n\nAll other cells on the board are colorless. It is guaranteed that the top-left corner $(1, 1)$ is colored.", "outputFormat": "Output a single integer, the minimum number of coins required. If it is impossible to reach the destination, output `-1`.", "hint": "Explanation for Sample 1\n\nThe board’s colors are as shown in the table below, where blank cells are colorless.\n\n| $\\color{red}\\text{红}$ | $\\color{red}\\text{红}$ |  |  |  |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n|  | $\\color{yellow}\\text{黄}$ |  |  |  |\n|  |  | $\\color{yellow}\\text{黄}$ | $\\color{red}\\text{红}$ |  |\n|  |  |  | $\\color{yellow}\\text{黄}$ |  |\n|  |  |  |  | $\\color{red}\\text{红}$ |\n\nStart from $(1,1)$ and move to $(1,2)$ without spending coins.\n\nMove from $(1,2)$ down to $(2,2)$, spending $1$ coin.\n\nCast the spell at $(2,2)$ to make $(2,3)$ yellow, spending $2$ coins.\n\nMove from $(2,2)$ to $(2,3)$ without spending coins.\n\nMove from $(2,3)$ to $(3,3)$ without spending coins.\n\nMove from $(3,3)$ to $(3,4)$, spending $1$ coin.\n\nMove from $(3,4)$ to $(4,4)$, spending $1$ coin.\n\nCast the spell at $(4,4)$ to make $(4,5)$ yellow, spending $ 2$ coins.\n\nMove from $(4,4)$ to $(4,5)$ without spending coins.\n\nMove from $(4,5)$ to $(5,5)$, spending $1$ coin.\n\nA total of $8 $ coins are spent.\n\nExplanation for Sample 2\n\nThe board’s colors are as shown in the table below, where blank cells are colorless.\n\n| $\\color{red}\\text{红}$ | $\\color{red}\\text{红}$ |  |  |  |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n|  | $\\color{yellow}\\text{黄}$ |  |  |  |\n|  |  | $\\color{yellow}\\text{黄}$ |  |  |\n|  |  |  | $\\color{white}\\text{　}$ |  |\n|  |  |  |  | $\\color{red}\\text{红}$ |\n\nFrom $( 1, 1)$ to $( 1, 2)$, spend no coins.\n\nFrom $( 1, 2)$ to $( 2, 2)$, spend $ 1 $ coin.\n\nCast the spell to make $( 2, 3)$ yellow, and move from $( 2, 2)$ to $( 2, 3)$, spending $ 2$ coins.\n\nFrom $( 2, 3)$ to $( 3, 3)$, spend no coins.\n\nFrom $( 3, 3)$, you can only cast the spell to reach $( 3, 2),( 2, 3),( 3, 4),( 4, 3)$.\n\nFrom none of these four cells can you reach $( 5, 5)$, so it is impossible to reach the destination, and the output is $-1$.\n\n**Constraints**\n\nFor $30\\%$ of the testdata, $1 ≤ m ≤ 5, 1 ≤ n ≤ 10$.\n\nFor $60\\%$ of the testdata, $1 ≤ m ≤ 20, 1 ≤ n ≤ 200$.\n\nFor $100\\%$ of the testdata, $1 ≤ m ≤ 100, 1 ≤ n ≤ 1,000, 0 ≤ c ≤ 2$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2017 普及组] 棋盘", "background": "NOIP2017 普及组 T3", "description": "有一个 $m \\times m$ 的棋盘，棋盘上每一个格子可能是红色、黄色或没有任何颜色的。你现在要从棋盘的最左上角走到棋盘的最右下角。\n\n任何一个时刻，你所站在的位置必须是有颜色的（不能是无色的）， 你只能向上、下、左、右四个方向前进。当你从一个格子走向另一个格子时，如果两个格子的颜色相同，那你不需要花费金币；如果不同，则你需要花费 $1 $ 个金币。\n\n另外， 你可以花费 $2$ 个金币施展魔法让下一个无色格子暂时变为你指定的颜色。但这个魔法不能连续使用， 而且这个魔法的持续时间很短，也就是说，如果你使用了这个魔法，走到了这个暂时有颜色的格子上，你就不能继续使用魔法； 只有当你离开这个位置，走到一个本来就有颜色的格子上的时候，你才能继续使用这个魔法，而当你离开了这个位置（施展魔法使得变为有颜色的格子）时，这个格子恢复为无色。\n\n现在你要从棋盘的最左上角，走到棋盘的最右下角，求花费的最少金币是多少？", "inputFormat": "第一行包含两个正整数 $ m, n$，以一个空格分开，分别代表棋盘的大小，棋盘上有颜色的格子的数量。\n\n接下来的 $ n $ 行，每行三个正整数 $ x, y, c$， 分别表示坐标为 $(x,y)$ 的格子有颜色 $ c$。\n\n其中 $ c=1$ 代表黄色，$ c=0$ 代表红色。 相邻两个数之间用一个空格隔开。 棋盘左上角的坐标为 $(1, 1)$，右下角的坐标为 $( m, m)$。\n\n棋盘上其余的格子都是无色。保证棋盘的左上角，也就是 $(1, 1)$ 一定是有颜色的。", "outputFormat": "一个整数，表示花费的金币的最小值，如果无法到达，输出 `-1`。", "hint": "**样例 1 说明**\n\n棋盘的颜色如下表格所示，其中空白的部分表示无色。\n\n| $\\color{red}\\text{红}$ | $\\color{red}\\text{红}$ |  |  |  |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n|  | $\\color{yellow}\\text{黄}$ |  |  |  |\n|  |  | $\\color{yellow}\\text{黄}$ | $\\color{red}\\text{红}$ |  |\n|  |  |  | $\\color{yellow}\\text{黄}$ |  |\n|  |  |  |  | $\\color{red}\\text{红}$ |\n\n\n从 $(1,1)$ 开始，走到 $(1,2)$ 不花费金币。\n\n从 $(1,2)$ 向下走到 $(2,2)$ 花费 $1$ 枚金币。\n\n从 $(2,2)$ 施展魔法，将 $(2,3)$ 变为黄色，花费 $2$ 枚金币。\n\n从 $(2,2)$ 走到 $(2,3)$ 不花费金币。\n\n从 $(2,3)$ 走到 $(3,3)$ 不花费金币。\n\n从 $(3,3)$ 走到 $(3,4)$ 花费 $1$ 枚金币。\n\n从 $(3,4)$ 走到 $(4,4)$ 花费 $1$ 枚金币。\n\n从 $(4,4)$ 施展魔法，将 $(4,5)$ 变为黄色，花费 $ 2$ 枚金币。\n\n从 $(4,4)$ 走到 $(4,5)$ 不花费金币。\n\n从 $(4,5)$ 走到 $(5,5)$ 花费 $1$ 枚金币。\n\n共花费 $8 $ 枚金币。\n\n**样例 2 说明**\n\n棋盘的颜色如下表格所示，其中空白的部分表示无色。\n\n| $\\color{red}\\text{红}$ | $\\color{red}\\text{红}$ |  |  |  |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n|  | $\\color{yellow}\\text{黄}$ |  |  |  |\n|  |  | $\\color{yellow}\\text{黄}$ |  |  |\n|  |  |  | $\\color{white}\\text{　}$ |  |\n|  |  |  |  | $\\color{red}\\text{红}$ |\n\n从 $( 1, 1)$ 走到 $( 1, 2)$，不花费金币。\n\n从 $( 1, 2)$ 走到 $( 2, 2)$，花费 $ 1 $ 金币。\n\n施展魔法将 $( 2, 3)$ 变为黄色，并从 $( 2, 2)$ 走到 $( 2, 3)$ 花费 $ 2$ 金币。\n\n从 $( 2, 3)$ 走到 $( 3, 3)$ 不花费金币。\n\n从 $( 3, 3)$ 只能施展魔法到达 $( 3, 2),( 2, 3),( 3, 4),( 4, 3)$。\n\n而从以上四点均无法到达 $( 5, 5)$，故无法到达终点，输出$-1$。\n\n**数据规模与约定**\n\n对于 $30\\%$ 的数据，$1 ≤ m ≤ 5, 1 ≤ n ≤ 10$。\n\n对于 $60\\%$ 的数据，$1 ≤ m ≤ 20, 1 ≤ n ≤ 200$。\n\n对于 $100\\%$ 的数据，$1 ≤ m ≤ 100, 1 ≤ n ≤ 1,000, 0 ≤ c ≤ 2$。", "locale": "zh-CN"}}}
{"pid": "P3957", "type": "P", "difficulty": 5, "samples": [["7 4 10\n2 6\n5 -3\n10 3\n11 -3\n13 1\n17 6\n20 2", "2"], ["7 4 20\n2 6\n5 -3\n10 3\n11 -3\n13 1\n17 6\n20 2", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["动态规划 DP", "2017", "二分", "单调队列", "NOIP 普及组", "队列"], "title": "[NOIP 2017 普及组] 跳房子", "background": "NOIP2017 普及组 T4", "description": "跳房子，也叫跳飞机，是一种世界性的儿童游戏，也是中国民间传统的体育游戏之一。\n\n跳房子的游戏规则如下：\n\n在地面上确定一个起点，然后在起点右侧画 $n$ 个格子，这些格子都在同一条直线上。每个格子内有一个数字（整数），表示到达这个格子能得到的分数。玩家第一次从起点开始向右跳，跳到起点右侧的一个格子内。第二次再从当前位置继续向右跳，依此类推。规则规定：\n\n玩家每次都必须跳到当前位置右侧的一个格子内。玩家可以在任意时刻结束游戏，获得的分数为曾经到达过的格子中的数字之和。\n\n现在小 R 研发了一款弹跳机器人来参加这个游戏。但是这个机器人有一个非常严重的缺陷，它每次向右弹跳的距离只能为固定的 $d$。小 R 希望改进他的机器人，如果他花 $g$ 个金币改进他的机器人，那么他的机器人灵活性就能增加 $g$，但是需要注意的是，每 次弹跳的距离至少为 $1$。具体而言，当 $g<d$ 时，他的机器人每次可以选择向右弹跳的距离为 $d-g,d-g+1,d-g+2,\\ldots,d+g-1,d+g$；否则当 $g \\geq d$ 时，他的机器人每次可以选择向右弹跳的距离为 $1,2,3,\\ldots,d+g-1,d+g$。\n\n现在小 R 希望获得至少 $k$ 分，请问他至少要花多少金币来改造他的机器人。", "inputFormat": "第一行三个正整数 $n,d,k$，分别表示格子的数目，改进前机器人弹跳的固定距离，以及希望至少获得的分数。相邻两个数 之间用一个空格隔开。\n\n接下来 $n$ 行，每行两个整数 $x_i,s_i$，分别表示起点到第 $i$ 个格子的距离以及第 $i$ 个格子的分数。两个数之间用一个空格隔开。保证 $x_i$ 按递增顺序输入。", "outputFormat": "共一行，一个整数，表示至少要花多少金币来改造他的机器人。若无论如何他都无法获得至少 $k$ 分，输出 $-1$。", "hint": "**样例 1 说明**\n\n花费 $2$ 个金币改进后，小 R 的机器人依次选择的向右弹跳的距离分别为 $ 2, 3, 5, 3, 4,3$，先后到达的位置分别为 $2, 5, 10, 13, 17, 20$，对应 $ 1, 2, 3, 5, 6, 7$ 这 $6$ 个格子。这些格子中的数字之和 $ 15$ 即为小 R 获得的分数。\n\n**样例 2 说明**\n\n由于样例中 $7$ 个格子组合的最大可能数字之和只有 $18$，所以无论如何都无法获得 $20$ 分。\n\n**数据规模与约定**\n\n本题共 10 组测试数据，每组数据等分。\n\n对于全部的数据满足 $1 \\le n \\le 5\\times10^5$，$1 \\le d \\le2\\times10^3$，$1 \\le x_i, k \\le 10^9$，$|s_i| < 10^5$。\n\n对于第 $1, 2$ 组测试数据，保证 $n\\le 10$。\n\n对于第 $3, 4, 5$ 组测试数据，保证 $n \\le 500$。\n\n对于第 $6, 7, 8$ 组测试数据，保证 $d = 1$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2017 Junior] Hopscotch", "background": "NOIP 2017 Junior T4.", "description": "Hopscotch, also called “jumping the airplane,” is a worldwide children’s game and one of China’s traditional folk sports.\n\nThe rules of hopscotch are as follows:\n\nOn the ground, fix a starting point, and then draw $n$ cells to the right of the start point along a straight line. Each cell contains an integer, which is the score awarded upon reaching that cell. The player starts at the start point and, on the first jump, jumps to a cell to the right of the start point. On the second jump, the player continues jumping to the right from the current position, and so on. The rules state:\n\n- On every jump, the player must land on a cell strictly to the right of the current position. The player may end the game at any time. The final score is the sum of the numbers in all cells that have ever been reached.\n\nNow, Xiao R has developed a bouncing robot to play this game. However, the robot has a very serious flaw: each time it jumps to the right, the distance can only be a fixed $d$. Xiao R wants to improve his robot. If he spends $g$ gold coins to improve the robot, its flexibility increases by $g$. Note that each jump distance must be at least $1$. Specifically, when $g < d$, the robot can choose its rightward jump distance each time from $d-g, d-g+1, d-g+2, \\ldots, d+g-1, d+g$; otherwise, when $g \\ge d$, the robot can choose its rightward jump distance each time from $1, 2, 3, \\ldots, d+g-1, d+g$.\n\nNow Xiao R wants to obtain at least $k$ points. What is the minimum number of gold coins he must spend to modify his robot?", "inputFormat": "The first line contains three positive integers $n, d, k$, representing the number of cells, the robot’s fixed jump distance before improvement, and the desired score (at least $k$). The numbers are separated by a single space.\n\nThe next $n$ lines each contain two integers $x_i, s_i$, representing the distance from the start point to the $i$-th cell and the score of the $i$-th cell. The two numbers are separated by a single space. It is guaranteed that $x_i$ are given in increasing order.", "outputFormat": "Output a single integer: the minimum number of gold coins required to modify the robot. If it is impossible to obtain at least $k$ points under any circumstances, output $-1$.", "hint": "- Sample 1 explanation\n\nAfter spending $2$ gold coins on improvements, Xiao R’s robot chooses rightward jump distances $2, 3, 5, 3, 4, 3$ in order, reaching positions $2, 5, 10, 13, 17, 20$, which correspond to cells $1, 2, 3, 5, 6, 7$. The sum of the numbers in these cells is $15$, which is the score obtained by Xiao R.\n\n- Sample 2 explanation\n\nSince the maximum possible sum of the numbers of any subset of the $7$ cells in the sample is only $18$, it is impossible to obtain $20$ points.\n\n- Constraints\n\nThere are $10$ groups of testdata, each accounting for an equal proportion.\n\nFor all testdata, $1 \\le n \\le 5\\times 10^5$, $1 \\le d \\le 2\\times 10^3$, $1 \\le x_i, k \\le 10^9$, $|s_i| < 10^5$.\n\nFor testdata groups $1$ and $2$, $n \\le 10$.\n\nFor testdata groups $3$, $4$, and $5$, $n \\le 500$.\n\nFor testdata groups $6$, $7$, and $8$, $d = 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2017 普及组] 跳房子", "background": "NOIP2017 普及组 T4", "description": "跳房子，也叫跳飞机，是一种世界性的儿童游戏，也是中国民间传统的体育游戏之一。\n\n跳房子的游戏规则如下：\n\n在地面上确定一个起点，然后在起点右侧画 $n$ 个格子，这些格子都在同一条直线上。每个格子内有一个数字（整数），表示到达这个格子能得到的分数。玩家第一次从起点开始向右跳，跳到起点右侧的一个格子内。第二次再从当前位置继续向右跳，依此类推。规则规定：\n\n玩家每次都必须跳到当前位置右侧的一个格子内。玩家可以在任意时刻结束游戏，获得的分数为曾经到达过的格子中的数字之和。\n\n现在小 R 研发了一款弹跳机器人来参加这个游戏。但是这个机器人有一个非常严重的缺陷，它每次向右弹跳的距离只能为固定的 $d$。小 R 希望改进他的机器人，如果他花 $g$ 个金币改进他的机器人，那么他的机器人灵活性就能增加 $g$，但是需要注意的是，每 次弹跳的距离至少为 $1$。具体而言，当 $g<d$ 时，他的机器人每次可以选择向右弹跳的距离为 $d-g,d-g+1,d-g+2,\\ldots,d+g-1,d+g$；否则当 $g \\geq d$ 时，他的机器人每次可以选择向右弹跳的距离为 $1,2,3,\\ldots,d+g-1,d+g$。\n\n现在小 R 希望获得至少 $k$ 分，请问他至少要花多少金币来改造他的机器人。", "inputFormat": "第一行三个正整数 $n,d,k$，分别表示格子的数目，改进前机器人弹跳的固定距离，以及希望至少获得的分数。相邻两个数 之间用一个空格隔开。\n\n接下来 $n$ 行，每行两个整数 $x_i,s_i$，分别表示起点到第 $i$ 个格子的距离以及第 $i$ 个格子的分数。两个数之间用一个空格隔开。保证 $x_i$ 按递增顺序输入。", "outputFormat": "共一行，一个整数，表示至少要花多少金币来改造他的机器人。若无论如何他都无法获得至少 $k$ 分，输出 $-1$。", "hint": "**样例 1 说明**\n\n花费 $2$ 个金币改进后，小 R 的机器人依次选择的向右弹跳的距离分别为 $ 2, 3, 5, 3, 4,3$，先后到达的位置分别为 $2, 5, 10, 13, 17, 20$，对应 $ 1, 2, 3, 5, 6, 7$ 这 $6$ 个格子。这些格子中的数字之和 $ 15$ 即为小 R 获得的分数。\n\n**样例 2 说明**\n\n由于样例中 $7$ 个格子组合的最大可能数字之和只有 $18$，所以无论如何都无法获得 $20$ 分。\n\n**数据规模与约定**\n\n本题共 10 组测试数据，每组数据等分。\n\n对于全部的数据满足 $1 \\le n \\le 5\\times10^5$，$1 \\le d \\le2\\times10^3$，$1 \\le x_i, k \\le 10^9$，$|s_i| < 10^5$。\n\n对于第 $1, 2$ 组测试数据，保证 $n\\le 10$。\n\n对于第 $3, 4, 5$ 组测试数据，保证 $n \\le 500$。\n\n对于第 $6, 7, 8$ 组测试数据，保证 $d = 1$。", "locale": "zh-CN"}}}
