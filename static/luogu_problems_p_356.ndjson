{"pid": "P8215", "type": "P", "difficulty": 6, "samples": [["2 1\n8 6 7\n5 2 8\n7 1 5\n6 5 8\n1 4 4 3", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "最小割", "THUPC"], "title": "[THUPC 2022 初赛] 分组作业", "background": "", "description": "老师布置了分组作业。在此之前，老师将班上 $2n$ 个学生分成了 $n$ 组，每组两个人。其中 $1$ 号和 $2$ 号为一组，$3$ 号和 $4$ 号为一组，……，$2n-1$ 号和 $2n$ 号为一组。\n\n老师让每个队伍自行安排分工。这样是否合作就成了一个大问题。大家决定用表决的方式来确定。首先每个人决定是否愿意和队友合作。不同的人因为自己的原因和分配的队友的原因，对合作的意愿不一样，对于第 $i$ 个学生，选择“愿意”会产生 $c_i$ 的不满，选择“不愿意”会产生 $d_i$ 的不满。\n\n如果两名队友都选择“愿意”，那么根据实际情况他们可以合作或者不合作。但是如果有一名队友选择“不愿意”，那么他们只能不合作。\n\n学生中还有 $m$ 个单向的喜欢关系，一个关系形如“$A$ 喜欢 $B$”。在这样一个关系中，如果 $A$ 没有和队友合作，且 $B$ 选择了“愿意”，$A$ 会有略微沮丧，产生 $a_i$ 的不满；如果 $A$ 表决了“不愿意”，但 $B$ 成功与队友合作，那么 $A$ 会羡慕嫉妒恨并产生 $b_i$ 的不满。（由于当 $A$ 和 $B$ 在同一组时这种设定会变得很奇怪，所以题目保证不会有这种情况）其中 $i$ 表示第 $i$ 个关系。\n\n如果一个学生 $i$ 选择了“愿意”但是他的队友选择了“不愿意”，那么他会因为队友产生 $e_i$ 的不满。\n\n问所有情况下最小的不满之和是多少。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $2n$ 行，每行三个整数 $c_i,d_i,e_i$。\n\n接下来 $m$ 行，每行四个正整数 $A,B,a_i,b_i$ 。", "outputFormat": "一行一个整数表示答案。", "hint": "【数据范围】\n\n保证 $1\\le n \\le 5000$，$0\\le m \\le 10000$，$1\\le a_i,b_i,c_i,d_i,e_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 初赛] 分组作业", "background": "", "description": "老师布置了分组作业。在此之前，老师将班上 $2n$ 个学生分成了 $n$ 组，每组两个人。其中 $1$ 号和 $2$ 号为一组，$3$ 号和 $4$ 号为一组，……，$2n-1$ 号和 $2n$ 号为一组。\n\n老师让每个队伍自行安排分工。这样是否合作就成了一个大问题。大家决定用表决的方式来确定。首先每个人决定是否愿意和队友合作。不同的人因为自己的原因和分配的队友的原因，对合作的意愿不一样，对于第 $i$ 个学生，选择“愿意”会产生 $c_i$ 的不满，选择“不愿意”会产生 $d_i$ 的不满。\n\n如果两名队友都选择“愿意”，那么根据实际情况他们可以合作或者不合作。但是如果有一名队友选择“不愿意”，那么他们只能不合作。\n\n学生中还有 $m$ 个单向的喜欢关系，一个关系形如“$A$ 喜欢 $B$”。在这样一个关系中，如果 $A$ 没有和队友合作，且 $B$ 选择了“愿意”，$A$ 会有略微沮丧，产生 $a_i$ 的不满；如果 $A$ 表决了“不愿意”，但 $B$ 成功与队友合作，那么 $A$ 会羡慕嫉妒恨并产生 $b_i$ 的不满。（由于当 $A$ 和 $B$ 在同一组时这种设定会变得很奇怪，所以题目保证不会有这种情况）其中 $i$ 表示第 $i$ 个关系。\n\n如果一个学生 $i$ 选择了“愿意”但是他的队友选择了“不愿意”，那么他会因为队友产生 $e_i$ 的不满。\n\n问所有情况下最小的不满之和是多少。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $2n$ 行，每行三个整数 $c_i,d_i,e_i$。\n\n接下来 $m$ 行，每行四个正整数 $A,B,a_i,b_i$ 。", "outputFormat": "一行一个整数表示答案。", "hint": "【数据范围】\n\n保证 $1\\le n \\le 5000$，$0\\le m \\le 10000$，$1\\le a_i,b_i,c_i,d_i,e_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8216", "type": "P", "difficulty": 5, "samples": [["17\n1 0 5 2\n0 0 3 5\n0 3 4 5\n1 2 7 7\n1 2 7 10\n0 7 10 4\n0 11 13 1\n1 1 7 11\n1 1 7 13\n1 0 6 15\n0 15 16 5\n0 15 16 6\n1 5 6 16\n1 3 6 18\n1 4 7 18\n0 18 21 3\n0 18 21 7", "Yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 初赛] 画图", "background": "", "description": "一年两度的THUPC又要来了，小C和小Z作为参赛无数届的老选手，自然也要来凑一番热闹。不过因为已经是老年人了，参赛自然是免谈了，但是他们对THUPC几年不换的logo产生了审美疲劳，为了更好地吸引大家报名，他们打算重画一个更花里胡哨的。\n\n笑死，你怎么可能指望两个宅男码农有丝毫的艺术细菌？\n\n他们深知这件事不在自己的能力范围之内，于是打算写一个人工智障来帮自己来画logo！\n\n经过不懈的努力，他们的人工智障终于能跑起来了，不过他们很快就发现这个人工智障比自己还没有艺术细菌——它只会在平面上画水平和竖直的线段来拼成“THUPC”字样！\n\n不过程序写都写了，不用白不用。小C和小Z针对程序的这一特性进行深入研究后制定了这样的规则：\n\n对于每一条水平线段，设其横坐标区间为 $[l_i,r_i]$ ，纵坐标为 $y_i$； 对于每一条竖直线段，设其纵坐标区间为 $[d_i,u_i]$ ，横坐标为 $x_i$ 。上述所有数值均为整数，且满足$r_i > l_i,u_i > d_i$。\n\n“THUPC”字样应当由 $15$ 条线段拼成，设其编号为 $1 \\thicksim 15$ 。对于每一个字母，规则如下：\n\n字母\"T\"由 $1$ 号水平线段和 $2$ 号竖直线段组成，满足 $d_2<y_1=u_2,l_1<x_2<r_1$ 。\n\n字母\"H\"由 $3$ 号竖直线段、$4$ 号水平线段和 $5$ 号竖直线段组成，满足 $d_3=d_5<y_4<u_3=u_5,x_3=l_4<r_4=x_5$ 。\n\n字母\"U\"由 $6$ 号竖直线段、$7$ 号水平线段和 $8$ 号竖直线段组成，满足 $d_6=d_8=y_7<u_6=u_8,x_6=l_7<r_7=x_8$ 。\n\n字母\"P\"由 $9$ 号竖直线段、$10$ 号水平线段、$11$ 号水平线段和 $12$ 号竖直线段组成，满足 $d_9<y_{11}=d_{12}<u_9=y_{10}=u_{12},x_9=l_{10}=l_{11}<r_{10}=r_{11}=x_{12}$ 。\n\n字母\"C\"由 $13$ 号竖直线段、$14$ 号水平线段和 $15$ 号水平线段组成，满足 $d_{13}=y_{15}<u_{13}=y_{14},x_{13}=l_{14}=l_{15}<r_{14}=r_{15}$ 。\n\n生成的这 $5$ 个字母可以排布在平面的任何地方而无需从左到右排列，但是组成任意两个不同字母的任意两条线段不得相交。\n\n需要注意的是，人工智障给出的线段顺序可能并不按照上述编号顺序；另外，给出的线段可能出现同方向线段的首尾相连、重叠或包含，此时应将其视为连续的一整条线段。\n\n只有生成的线段在连接和排序后符合上述规范，才认为人工智障生成了一幅正确的logo；否则，如果出现多余的线段、缺少某条线段或坐标不满足要求等情况均为不正确的。\n\n最后，小C和小Z要写一个程序来检验人工智障的每一份输出结果是否符合上述规范，不过熬夜连肝三天的他们终于累得爬不起来了，于是他们请你来帮忙。", "inputFormat": "第 $1$ 行：一个正整数 $n$ 表示线段的个数，保证 $1 \\leq n \\leq 10^5$ 。\n\n接下来 $n$ 行，每行先输入一个整数 $op_i$ ，必定为 $0$ 或 $1$ ：如果 $op_i=0$ ，表示第 $i$ 条线段为水平线段，接下来输入 $3$ 个整数 $l_i,r_i,y_i$ 描述这条线段，保证 $l_i<r_i$ ；如果 $op_i=1$ ，表示第 $i$ 条线段为竖直线段，接下来输入 $3$ 个整数 $d_i,u_i,x_i$ 描述这条线段，保证 $d_i<u_i$ 。\n\n保证输入的坐标均在 $[-10^9,10^9]$ 范围内。", "outputFormat": "如果符合规范，输出一个字符串 `Yes`，否则输出一个字符串`No`。", "hint": "【样例解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oomfukad.png)\n\n这组样例中，字母 `T` 的水平线段和 `C` 的竖直线段分别是由两条线段拼成的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 初赛] 画图", "background": "", "description": "一年两度的THUPC又要来了，小C和小Z作为参赛无数届的老选手，自然也要来凑一番热闹。不过因为已经是老年人了，参赛自然是免谈了，但是他们对THUPC几年不换的logo产生了审美疲劳，为了更好地吸引大家报名，他们打算重画一个更花里胡哨的。\n\n笑死，你怎么可能指望两个宅男码农有丝毫的艺术细菌？\n\n他们深知这件事不在自己的能力范围之内，于是打算写一个人工智障来帮自己来画logo！\n\n经过不懈的努力，他们的人工智障终于能跑起来了，不过他们很快就发现这个人工智障比自己还没有艺术细菌——它只会在平面上画水平和竖直的线段来拼成“THUPC”字样！\n\n不过程序写都写了，不用白不用。小C和小Z针对程序的这一特性进行深入研究后制定了这样的规则：\n\n对于每一条水平线段，设其横坐标区间为 $[l_i,r_i]$ ，纵坐标为 $y_i$； 对于每一条竖直线段，设其纵坐标区间为 $[d_i,u_i]$ ，横坐标为 $x_i$ 。上述所有数值均为整数，且满足$r_i > l_i,u_i > d_i$。\n\n“THUPC”字样应当由 $15$ 条线段拼成，设其编号为 $1 \\thicksim 15$ 。对于每一个字母，规则如下：\n\n字母\"T\"由 $1$ 号水平线段和 $2$ 号竖直线段组成，满足 $d_2<y_1=u_2,l_1<x_2<r_1$ 。\n\n字母\"H\"由 $3$ 号竖直线段、$4$ 号水平线段和 $5$ 号竖直线段组成，满足 $d_3=d_5<y_4<u_3=u_5,x_3=l_4<r_4=x_5$ 。\n\n字母\"U\"由 $6$ 号竖直线段、$7$ 号水平线段和 $8$ 号竖直线段组成，满足 $d_6=d_8=y_7<u_6=u_8,x_6=l_7<r_7=x_8$ 。\n\n字母\"P\"由 $9$ 号竖直线段、$10$ 号水平线段、$11$ 号水平线段和 $12$ 号竖直线段组成，满足 $d_9<y_{11}=d_{12}<u_9=y_{10}=u_{12},x_9=l_{10}=l_{11}<r_{10}=r_{11}=x_{12}$ 。\n\n字母\"C\"由 $13$ 号竖直线段、$14$ 号水平线段和 $15$ 号水平线段组成，满足 $d_{13}=y_{15}<u_{13}=y_{14},x_{13}=l_{14}=l_{15}<r_{14}=r_{15}$ 。\n\n生成的这 $5$ 个字母可以排布在平面的任何地方而无需从左到右排列，但是组成任意两个不同字母的任意两条线段不得相交。\n\n需要注意的是，人工智障给出的线段顺序可能并不按照上述编号顺序；另外，给出的线段可能出现同方向线段的首尾相连、重叠或包含，此时应将其视为连续的一整条线段。\n\n只有生成的线段在连接和排序后符合上述规范，才认为人工智障生成了一幅正确的logo；否则，如果出现多余的线段、缺少某条线段或坐标不满足要求等情况均为不正确的。\n\n最后，小C和小Z要写一个程序来检验人工智障的每一份输出结果是否符合上述规范，不过熬夜连肝三天的他们终于累得爬不起来了，于是他们请你来帮忙。", "inputFormat": "第 $1$ 行：一个正整数 $n$ 表示线段的个数，保证 $1 \\leq n \\leq 10^5$ 。\n\n接下来 $n$ 行，每行先输入一个整数 $op_i$ ，必定为 $0$ 或 $1$ ：如果 $op_i=0$ ，表示第 $i$ 条线段为水平线段，接下来输入 $3$ 个整数 $l_i,r_i,y_i$ 描述这条线段，保证 $l_i<r_i$ ；如果 $op_i=1$ ，表示第 $i$ 条线段为竖直线段，接下来输入 $3$ 个整数 $d_i,u_i,x_i$ 描述这条线段，保证 $d_i<u_i$ 。\n\n保证输入的坐标均在 $[-10^9,10^9]$ 范围内。", "outputFormat": "如果符合规范，输出一个字符串 `Yes`，否则输出一个字符串`No`。", "hint": "【样例解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oomfukad.png)\n\n这组样例中，字母 `T` 的水平线段和 `C` 的竖直线段分别是由两条线段拼成的。", "locale": "zh-CN"}}}
{"pid": "P8217", "type": "P", "difficulty": 4, "samples": [["14 17\n....+---+---+....\n.../   /   /|....\n..+---+---+ |....\n./   /|   | +---+\n+---+ |   |/   /|\n|   | +---+---+ |\n|   |/   /|   | +\n+---+---+ |   |/|\n|   |   | +---+ |\n|   |   |/   /| +\n+---+---+---+ |/.\n|   |   |   | +..\n|   |   |   |/...\n+---+---+---+....", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2022", "O2优化", "其它技巧", "THUPC"], "title": "[THUPC 2022 初赛] 数正方体", "background": "", "description": "小 E 有一块面积为 $n\\times m$ 的矩形区域，上面有 $n\\times m$ 个边长为 $1$ 的格子，第 $i$ 行 $j$ 列的格子上堆了 $ A_{i,j}$ 个同样大小的正方体积木。小 E 做了某道题之后，突发奇想把这些正方体画成了字符画，然后让你帮他数一数他一共有多少个正方体。我们定义每个正方体为如下格式，并且不会做任何旋转，只会严格以这一种形式摆放：\n\n```\n..+---+\n./   /| 高\n+---+ |\n|   | +\n|   |/.宽\n+---+..\n长\n```\n\n每个顶点用 $1$ 个 + 表示，长用 $3$ 个 - 表示，宽用 $1$ 个 / 表示，高用两个 | 表示。字符 . 作为背景。中间的空白是空格（ASCII 码为 $32$ ）。\n\n若两个正方体左右相邻，图示为\n\n```\n..+---+---+\n./   /   /|\n+---+---+ |\n|   |   | +\n|   |   |/.\n+---+---+..\n```\n\n若两个正方体积木上下相邻，图示为\n\n```\n..+---+\n./   /|\n+---+ |\n|   | +\n|   |/|\n+---+ |\n|   | +\n|   |/.\n+---+..\n```\n\n若两个正方体前后相邻，图示为\n\n```\n....+---+\n.../   /|\n..+---+ |\n./   /| +\n+---+ |/.\n|   | +..\n|   |/...\n+---+....\n```\n\n位于前面的正方体的面会遮挡住位于后面的正方体的面。为了让你看得清楚，没有整列正方体被挡在后面，小E保证了 $1\\le A_{ij} \\le A_{i-1,j}$，$1\\le A_{ij}\\le A_{i,j-1}$。并且图中没有整行或者整列的 . 。所以，一个字符画对应唯一的矩阵 $A$，一个矩阵 $A$ 也对应一个唯一的字符画。", "inputFormat": "第一行两个正整数 $r,c$，表示图的高度和宽度。（注意不是 $n$ 和 $m$）\n\n接下来是一个 $r$ 行 $c$ 列的字符画，表示小E堆叠的正方体。", "outputFormat": "一行一个整数，表示正方体的数量。", "hint": "【样例解释】\n\n此时 $A$ 矩阵为 \n\n$$\\begin{bmatrix}3 & 3 & 2 \\\\ 3 & 2 & 1\\end{bmatrix}$$\n\n，因为 $3+3+3+2+2+1=14$，所以图中共有 $14$ 个正方体。\n\n【数据范围】\n\n保证 $1\\le n,m \\le 50$，$1\\le A_{ij}\\le 100$。（注意这里是 $n$ 和 $m$ 不是 $r$ 和 $c$）\n\n保证 $\\forall 1<i\\le n$, $A_{ij}\\le A_{i-1,j}$。\n\n保证 $\\forall 1<j<m$, $A_{ij}\\le A_{i,j-1}$。\n\n保证字符画中没有一整行或者一整列是 . 。\n\n小 E 的话：做出这题并不难。不过还是建议在 AC 本题之后看一看题解。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 初赛] 数正方体", "background": "", "description": "小 E 有一块面积为 $n\\times m$ 的矩形区域，上面有 $n\\times m$ 个边长为 $1$ 的格子，第 $i$ 行 $j$ 列的格子上堆了 $ A_{i,j}$ 个同样大小的正方体积木。小 E 做了某道题之后，突发奇想把这些正方体画成了字符画，然后让你帮他数一数他一共有多少个正方体。我们定义每个正方体为如下格式，并且不会做任何旋转，只会严格以这一种形式摆放：\n\n```\n..+---+\n./   /| 高\n+---+ |\n|   | +\n|   |/.宽\n+---+..\n长\n```\n\n每个顶点用 $1$ 个 + 表示，长用 $3$ 个 - 表示，宽用 $1$ 个 / 表示，高用两个 | 表示。字符 . 作为背景。中间的空白是空格（ASCII 码为 $32$ ）。\n\n若两个正方体左右相邻，图示为\n\n```\n..+---+---+\n./   /   /|\n+---+---+ |\n|   |   | +\n|   |   |/.\n+---+---+..\n```\n\n若两个正方体积木上下相邻，图示为\n\n```\n..+---+\n./   /|\n+---+ |\n|   | +\n|   |/|\n+---+ |\n|   | +\n|   |/.\n+---+..\n```\n\n若两个正方体前后相邻，图示为\n\n```\n....+---+\n.../   /|\n..+---+ |\n./   /| +\n+---+ |/.\n|   | +..\n|   |/...\n+---+....\n```\n\n位于前面的正方体的面会遮挡住位于后面的正方体的面。为了让你看得清楚，没有整列正方体被挡在后面，小E保证了 $1\\le A_{ij} \\le A_{i-1,j}$，$1\\le A_{ij}\\le A_{i,j-1}$。并且图中没有整行或者整列的 . 。所以，一个字符画对应唯一的矩阵 $A$，一个矩阵 $A$ 也对应一个唯一的字符画。", "inputFormat": "第一行两个正整数 $r,c$，表示图的高度和宽度。（注意不是 $n$ 和 $m$）\n\n接下来是一个 $r$ 行 $c$ 列的字符画，表示小E堆叠的正方体。", "outputFormat": "一行一个整数，表示正方体的数量。", "hint": "【样例解释】\n\n此时 $A$ 矩阵为 \n\n$$\\begin{bmatrix}3 & 3 & 2 \\\\ 3 & 2 & 1\\end{bmatrix}$$\n\n，因为 $3+3+3+2+2+1=14$，所以图中共有 $14$ 个正方体。\n\n【数据范围】\n\n保证 $1\\le n,m \\le 50$，$1\\le A_{ij}\\le 100$。（注意这里是 $n$ 和 $m$ 不是 $r$ 和 $c$）\n\n保证 $\\forall 1<i\\le n$, $A_{ij}\\le A_{i-1,j}$。\n\n保证 $\\forall 1<j<m$, $A_{ij}\\le A_{i,j-1}$。\n\n保证字符画中没有一整行或者一整列是 . 。\n\n小 E 的话：做出这题并不难。不过还是建议在 AC 本题之后看一看题解。", "locale": "zh-CN"}}}
{"pid": "P8218", "type": "P", "difficulty": 2, "samples": [["4\n4 3 2 1\n2\n1 4\n2 3", "10\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["前缀和"], "title": "【深进1.例1】求区间和", "background": null, "description": "给定由 $n$ 个正整数组成的序列 $a_1, a_2, \\cdots, a_n$ 和 $m$ 个区间 $[l_i,r_i]$，分别求这 $m$ 个区间的区间和。", "inputFormat": "第一行包含一个正整数 $n$，表示序列的长度。\n\n第二行包含 $n$ 个正整数 $a_1,a_2, \\cdots ,a_n$。\n\n第三行包含一个正整数 $m$，表示区间的数量。\n\n接下来 $m$ 行，每行包含两个正整数 $l_i,r_i$，满足 $1\\le l_i\\le r_i\\le n$。", "outputFormat": "共 $m$ 行，其中第 $i$ 行包含一个正整数，表示第 $i$ 组答案的询问。", "hint": "### 样例解释\n\n第 $1$ 到第 $4$ 个数加起来和为 $10$。第 $2$ 个数到第 $3$ 个数加起来和为 $5$。\n\n### 数据范围\n\n对于 $50 \\%$ 的数据：$n,m\\le 1000$；\n\n对于 $100 \\%$ 的数据：$1 \\le n, m\\le 10^5$，$1 \\le a_i\\le 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【深进1.例1】求区间和", "background": null, "description": "给定由 $n$ 个正整数组成的序列 $a_1, a_2, \\cdots, a_n$ 和 $m$ 个区间 $[l_i,r_i]$，分别求这 $m$ 个区间的区间和。", "inputFormat": "第一行包含一个正整数 $n$，表示序列的长度。\n\n第二行包含 $n$ 个正整数 $a_1,a_2, \\cdots ,a_n$。\n\n第三行包含一个正整数 $m$，表示区间的数量。\n\n接下来 $m$ 行，每行包含两个正整数 $l_i,r_i$，满足 $1\\le l_i\\le r_i\\le n$。", "outputFormat": "共 $m$ 行，其中第 $i$ 行包含一个正整数，表示第 $i$ 组答案的询问。", "hint": "### 样例解释\n\n第 $1$ 到第 $4$ 个数加起来和为 $10$。第 $2$ 个数到第 $3$ 个数加起来和为 $5$。\n\n### 数据范围\n\n对于 $50 \\%$ 的数据：$n,m\\le 1000$；\n\n对于 $100 \\%$ 的数据：$1 \\le n, m\\le 10^5$，$1 \\le a_i\\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P8219", "type": "P", "difficulty": 1, "samples": [["12 17", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "[WFOI - 02] I wanna a feasitor（化验器）", "background": "> 比赛时在做什么？有没有空？可以来开 longlong 吗？\n\nkid 一脸疑惑地看着 Elgo87，Elgo87 说，通关就告诉你 ...", "description": "kid 发现了一个函数 $f(x)$，它表示**除 $x$ 本身之外，$x$ 的最大约数**（$x$ 为大于 $1$ 正整数）。\n\n下面是一些例子：\n\n- $f(8)=4$，因为 $8$ 的约数有 $1,2,4,8$，除 $8$ 本身之外显然最大的约数为 $4$，所以 $f(8)=4$；\n- $f(15)=5$，因为 $15$ 的约数有 $1,3,5,15$，除 $15$ 本身之外显然最大的约数为 $5$，所以 $f(15)=5$；\n\nkid 还发现了两个数 $L,R$，你需要帮他求对于 $L\\sim R$ 中的每一个数 $x$，$f(x)$ 的**最大值**，作为通关密码。\n\n注意，$L\\sim R$ 包括 $L$ 和 $R$。\n\n你只需要告诉他答案，剩下的操作就交给 Elgo87 吧！", "inputFormat": "一行两个整数 $L,R$，意义如题目描述。", "outputFormat": "一行，表示对于 $L\\sim R$ 中每个数 $x$，$f(x)$ 的最大值。", "hint": "**【样例解释】**\n\n在 $12\\sim17$，也就是 $12,13,14,15,16,17$ 这几个数中，除这些数本身之外的最大因数分别是 $6,1,7,5,8,1$，故最大值为 $8$。\n\n**【数据范围】**\n\n**本题采用 $\\tt Subtask$ 捆绑测试。** 即你需要通过一个 $\\tt Subtask$ 中的所有测试点才能得到这部分的分数。\n\n- $\\texttt{Subtask \\#0 (10pts)}$：$2\\le L< R\\le 100$；\n- $\\texttt{Subtask \\#1 (30pts)}$：$2\\le L< R\\le10^4$；\n- $\\texttt{Subtask \\#2 (30pts)}$：$2\\le L < R\\le 10^9$，$R-L\\le 10^6$；\n- $\\texttt{Subtask \\#3 (30pts)}$：$2\\le L < R \\le 10^{18}$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 02] I wanna a feasitor（化验器）", "background": "> 比赛时在做什么？有没有空？可以来开 longlong 吗？\n\nkid 一脸疑惑地看着 Elgo87，Elgo87 说，通关就告诉你 ...", "description": "kid 发现了一个函数 $f(x)$，它表示**除 $x$ 本身之外，$x$ 的最大约数**（$x$ 为大于 $1$ 正整数）。\n\n下面是一些例子：\n\n- $f(8)=4$，因为 $8$ 的约数有 $1,2,4,8$，除 $8$ 本身之外显然最大的约数为 $4$，所以 $f(8)=4$；\n- $f(15)=5$，因为 $15$ 的约数有 $1,3,5,15$，除 $15$ 本身之外显然最大的约数为 $5$，所以 $f(15)=5$；\n\nkid 还发现了两个数 $L,R$，你需要帮他求对于 $L\\sim R$ 中的每一个数 $x$，$f(x)$ 的**最大值**，作为通关密码。\n\n注意，$L\\sim R$ 包括 $L$ 和 $R$。\n\n你只需要告诉他答案，剩下的操作就交给 Elgo87 吧！", "inputFormat": "一行两个整数 $L,R$，意义如题目描述。", "outputFormat": "一行，表示对于 $L\\sim R$ 中每个数 $x$，$f(x)$ 的最大值。", "hint": "**【样例解释】**\n\n在 $12\\sim17$，也就是 $12,13,14,15,16,17$ 这几个数中，除这些数本身之外的最大因数分别是 $6,1,7,5,8,1$，故最大值为 $8$。\n\n**【数据范围】**\n\n**本题采用 $\\tt Subtask$ 捆绑测试。** 即你需要通过一个 $\\tt Subtask$ 中的所有测试点才能得到这部分的分数。\n\n- $\\texttt{Subtask \\#0 (10pts)}$：$2\\le L< R\\le 100$；\n- $\\texttt{Subtask \\#1 (30pts)}$：$2\\le L< R\\le10^4$；\n- $\\texttt{Subtask \\#2 (30pts)}$：$2\\le L < R\\le 10^9$，$R-L\\le 10^6$；\n- $\\texttt{Subtask \\#3 (30pts)}$：$2\\le L < R \\le 10^{18}$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8220", "type": "P", "difficulty": 2, "samples": [["5\n2 4 3", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "[WFOI - 02] I wanna win the race（比赛）", "background": "> best is yet to come\n\nkid 不小心进入了联机模式，他需要比他的对手更快通关才能取得胜利……", "description": "kid 走进了一个场地，若干名选手在进行比赛，场地可以抽象为一个坐标系。\n\n选手们要从 $\\left(1,1\\right)$ 跑到 $\\left(n,n\\right)$，若当前选手处在 $\\left(x,y\\right)$，则他们下一步可以移动到 $\\left(x\\pm1,y\\right)$ 或 $\\left(x,y\\pm1\\right)$，注意，他们**仅可以在第一象限活动**，即任何时候 $x>0,y>0$。\n\n所有点最开始都是 $\\texttt{A}$ 类点，主办方选择了一个三元组 $\\left(a,b,c\\right)$，将所有满足 $a\\leq x\\leq b$ 且 $y\\leq c$ 的点 $\\left(x,y\\right)$ 变为 $\\texttt{B}$ 类点，选手每经过一个 $\\texttt{A}$ 类需要耗时 $1$ 秒，每经过一个 $\\texttt{B}$ 类需要耗时 $2$ 秒。请注意，**起始点和终点也要纳入计算。**\n\nkid 想要赢得这场比赛，他想知道**最少**需要多少秒能到达终点。\n\n**请注意，在【数据范围】中有重要的约束条件。**", "inputFormat": "共两行，第一行一个整数 $n$，第二行三个整数 $a,b,c$。", "outputFormat": "输出一个整数表示 kid 通关所需要的的最少秒数。", "hint": "**【样例解释】**\n\n下图是其中一种可行的方案，紫色点为 $\\texttt{A}$ 类点，红色点为 $\\texttt{B}$ 类点：\n\n![](https://s1.ax1x.com/2022/03/06/bBvQPJ.png)\n\n**【数据规模与约定】**\n\n**本题采用 $\\tt Subtask$ 捆绑测试。**\n\n对于 $30\\%$ 的数据，$1<a<b<n\\leq 10^3，0<c\\leq 10^3$。\n\n对于 $100\\%$ 的数据，$1<a<b<n\\leq 10^9，0<c\\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 02] I wanna win the race（比赛）", "background": "> best is yet to come\n\nkid 不小心进入了联机模式，他需要比他的对手更快通关才能取得胜利……", "description": "kid 走进了一个场地，若干名选手在进行比赛，场地可以抽象为一个坐标系。\n\n选手们要从 $\\left(1,1\\right)$ 跑到 $\\left(n,n\\right)$，若当前选手处在 $\\left(x,y\\right)$，则他们下一步可以移动到 $\\left(x\\pm1,y\\right)$ 或 $\\left(x,y\\pm1\\right)$，注意，他们**仅可以在第一象限活动**，即任何时候 $x>0,y>0$。\n\n所有点最开始都是 $\\texttt{A}$ 类点，主办方选择了一个三元组 $\\left(a,b,c\\right)$，将所有满足 $a\\leq x\\leq b$ 且 $y\\leq c$ 的点 $\\left(x,y\\right)$ 变为 $\\texttt{B}$ 类点，选手每经过一个 $\\texttt{A}$ 类需要耗时 $1$ 秒，每经过一个 $\\texttt{B}$ 类需要耗时 $2$ 秒。请注意，**起始点和终点也要纳入计算。**\n\nkid 想要赢得这场比赛，他想知道**最少**需要多少秒能到达终点。\n\n**请注意，在【数据范围】中有重要的约束条件。**", "inputFormat": "共两行，第一行一个整数 $n$，第二行三个整数 $a,b,c$。", "outputFormat": "输出一个整数表示 kid 通关所需要的的最少秒数。", "hint": "**【样例解释】**\n\n下图是其中一种可行的方案，紫色点为 $\\texttt{A}$ 类点，红色点为 $\\texttt{B}$ 类点：\n\n![](https://s1.ax1x.com/2022/03/06/bBvQPJ.png)\n\n**【数据规模与约定】**\n\n**本题采用 $\\tt Subtask$ 捆绑测试。**\n\n对于 $30\\%$ 的数据，$1<a<b<n\\leq 10^3，0<c\\leq 10^3$。\n\n对于 $100\\%$ 的数据，$1<a<b<n\\leq 10^9，0<c\\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8221", "type": "P", "difficulty": 4, "samples": [["2 4\n1 2 3 4\n4 3 2 1", "YES\n1\n0 2"], ["2 4\n1 2 3 4\n4 1 3 2", "NO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "[WFOI - 02] I wanna reverse to reserve（翻转）", "background": "> 君子不器\n\n“我最擅长解谜了，你说是吧，kid。”\n\n“嗯...”", "description": "kid 走进了一个 $n$ 行 $m$ 列的矩阵，**不**保证矩阵中有 $n$ 个数字 $1$，$n$ 个数字 $2$，$\\dots$ , $n$ 个数字 $m$ 但 $n,m$ 均为偶数。\n\n现有两种改变矩阵的方式：\n\n- 选择任意一行，将这一行上的数翻转；\n- 选择任意一列，将这一列上的数翻转。\n\n每次操作可以选择任意一种方式。\n\n现在需要通过若干次操作，将矩阵变为：\n\n$$\nn\\;行\\left\\{\n\\begin{array}{l}\n1\\quad2\\quad3\\quad\\cdots\\quad m\\\\\n\\\\\n1\\quad2\\quad3\\quad\\cdots\\quad m\\\\\n\n\\\\\n\\cdots\\\\\n\\\\\n1\\quad2\\quad3\\quad\\cdots\\quad m\\\\\n\\end{array}\n\\right.\n\n$$\n\n这样才会出现下一个存档点。\n\n你需要帮 kid 解决这个问题。\n\n你只需要给出答案，剩下的操作就交给 Uvocde 吧！", "inputFormat": "第一行两个正整数 $n$ 和 $m$，以下 $n$ 行，每行 $m$ 个正整数，表示该矩阵。", "outputFormat": "第一行一个字符串，若不可能有可行的操作方式，则输出 `NO`，否则输出 `YES`；\n\n如果输出 `YES`，下一行输出一个非负整数 $ans$，表示一种共需要 $ans$ 次操作。接下来输出 $ans$ 行，每行一个字符和一个数 $k$（中间有空格），这个字符表示这一次操作是翻转行还是翻转列，若是对某一行进行翻转则为 `0`，若翻转某一列则为 `1`，$k$ 表示翻转第几行或是第几列。\n\n若存在可行方案，则只需输出一组可行解即可（不需要使 $ans$ 最小），但你要使 $ans \\le n \\times m$。\n\n本题采用 $\\text{SPJ}$，只要翻转操作正确即可给分。\n\n", "hint": "**【数据范围】**\n\n**本题采用 Subtask 捆绑测试**。\n\n- $\\texttt{Subtask \\#0 (20pts)}$：最多只有 $2$ 个数不在规定位置上；\n- $\\texttt{Subtask \\#1 (20pts)}$：$n=2$；\n- $\\texttt{Subtask \\#2 (20pts)}$：$m=2$；\n- $\\texttt{Subtask \\#3 (40pts)}$：$1\\le n\\le 100$，$1\\le m\\le 100$；\n\n全部数据满足 $1\\le n\\le 100$，$1\\le m\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 02] I wanna reverse to reserve（翻转）", "background": "> 君子不器\n\n“我最擅长解谜了，你说是吧，kid。”\n\n“嗯...”", "description": "kid 走进了一个 $n$ 行 $m$ 列的矩阵，**不**保证矩阵中有 $n$ 个数字 $1$，$n$ 个数字 $2$，$\\dots$ , $n$ 个数字 $m$ 但 $n,m$ 均为偶数。\n\n现有两种改变矩阵的方式：\n\n- 选择任意一行，将这一行上的数翻转；\n- 选择任意一列，将这一列上的数翻转。\n\n每次操作可以选择任意一种方式。\n\n现在需要通过若干次操作，将矩阵变为：\n\n$$\nn\\;行\\left\\{\n\\begin{array}{l}\n1\\quad2\\quad3\\quad\\cdots\\quad m\\\\\n\\\\\n1\\quad2\\quad3\\quad\\cdots\\quad m\\\\\n\n\\\\\n\\cdots\\\\\n\\\\\n1\\quad2\\quad3\\quad\\cdots\\quad m\\\\\n\\end{array}\n\\right.\n\n$$\n\n这样才会出现下一个存档点。\n\n你需要帮 kid 解决这个问题。\n\n你只需要给出答案，剩下的操作就交给 Uvocde 吧！", "inputFormat": "第一行两个正整数 $n$ 和 $m$，以下 $n$ 行，每行 $m$ 个正整数，表示该矩阵。", "outputFormat": "第一行一个字符串，若不可能有可行的操作方式，则输出 `NO`，否则输出 `YES`；\n\n如果输出 `YES`，下一行输出一个非负整数 $ans$，表示一种共需要 $ans$ 次操作。接下来输出 $ans$ 行，每行一个字符和一个数 $k$（中间有空格），这个字符表示这一次操作是翻转行还是翻转列，若是对某一行进行翻转则为 `0`，若翻转某一列则为 `1`，$k$ 表示翻转第几行或是第几列。\n\n若存在可行方案，则只需输出一组可行解即可（不需要使 $ans$ 最小），但你要使 $ans \\le n \\times m$。\n\n本题采用 $\\text{SPJ}$，只要翻转操作正确即可给分。\n\n", "hint": "**【数据范围】**\n\n**本题采用 Subtask 捆绑测试**。\n\n- $\\texttt{Subtask \\#0 (20pts)}$：最多只有 $2$ 个数不在规定位置上；\n- $\\texttt{Subtask \\#1 (20pts)}$：$n=2$；\n- $\\texttt{Subtask \\#2 (20pts)}$：$m=2$；\n- $\\texttt{Subtask \\#3 (40pts)}$：$1\\le n\\le 100$，$1\\le m\\le 100$；\n\n全部数据满足 $1\\le n\\le 100$，$1\\le m\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P8222", "type": "P", "difficulty": 6, "samples": [["1\n3\n0 0\n0 2\n-1 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "凸包", "旋转卡壳", "其它技巧", "洛谷月赛", "双指针 two-pointer"], "title": "[WFOI - 02] I wanna escape the shadow（阴影）", "background": "> Define adventure with death\n>\n> You are the shadow to my life\n\n背景突然阴沉了下来，但是 kid 清楚，这是最黑暗的时刻，也是黎明之前...", "description": "现在 kid 身处一个**圆心为 $(0,0)$，半径为 $r$ 的**圆中，并且学会了一种新的操作 `mklig(X,Y,Z)` 来消除黑暗，具体如下：\n\n$X,Y,Z$ 是三个不同的点，作射线 $XY,ZY$，设两条射线与圆周交于 $d_1,d_2$，那么将 弧 $d_1d_2$，线段 $Yd_1,Yd_2$ 围成的区域照亮。\n\n现在圆内有一些点，记 $S_{光}$ 是圆的半径为 $r$ 的时候被照亮的总面积，现在 kid 想知道在使 $\\lim\\limits_{r \\to \\infty} \\dfrac{S_{光}}{\\pi r^2}$ （可以理解为 r 无穷大时）最大时，最少需要多少次 `mklig` 操作。你只需要给出答案，剩下的操作就交给 €€£ 吧！\n\n数据保证不存在三点共线。", "inputFormat": "**本题有多组数据**\n\n第一行一个整数 $T$，表示数据组数；\n\n对于每组数据：\n\n第一行一个正整数 $n$；\n\n接下来 $n$ 行，每行两个整数，分别表示一个点的横纵坐标。", "outputFormat": "共 $T$ 行，每行一个整数，表示答案。", "hint": "- ####  样例解释\n\n![](https://s1.ax1x.com/2022/03/14/bXTM01.png)\n\n**本题采用 Subtask 捆绑测试。**\n\n- $\\texttt{Subtask \\#0 (30pts)}$：$n = 10^3$ 且数据随机；\n- $\\texttt{Subtask \\#1 (30pts)}$：$n \\le 5$ ；\n- $\\texttt{Subtask \\#2 (40pts)}$：$n \\le 10^6$；\n\n对于每个测试点，保证 $T \\le 5 ，\\sum n\\le 10^6$，点的坐标的绝对值不超过 $10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 02] I wanna escape the shadow（阴影）", "background": "> Define adventure with death\n>\n> You are the shadow to my life\n\n背景突然阴沉了下来，但是 kid 清楚，这是最黑暗的时刻，也是黎明之前...", "description": "现在 kid 身处一个**圆心为 $(0,0)$，半径为 $r$ 的**圆中，并且学会了一种新的操作 `mklig(X,Y,Z)` 来消除黑暗，具体如下：\n\n$X,Y,Z$ 是三个不同的点，作射线 $XY,ZY$，设两条射线与圆周交于 $d_1,d_2$，那么将 弧 $d_1d_2$，线段 $Yd_1,Yd_2$ 围成的区域照亮。\n\n现在圆内有一些点，记 $S_{光}$ 是圆的半径为 $r$ 的时候被照亮的总面积，现在 kid 想知道在使 $\\lim\\limits_{r \\to \\infty} \\dfrac{S_{光}}{\\pi r^2}$ （可以理解为 r 无穷大时）最大时，最少需要多少次 `mklig` 操作。你只需要给出答案，剩下的操作就交给 €€£ 吧！\n\n数据保证不存在三点共线。", "inputFormat": "**本题有多组数据**\n\n第一行一个整数 $T$，表示数据组数；\n\n对于每组数据：\n\n第一行一个正整数 $n$；\n\n接下来 $n$ 行，每行两个整数，分别表示一个点的横纵坐标。", "outputFormat": "共 $T$ 行，每行一个整数，表示答案。", "hint": "- ####  样例解释\n\n![](https://s1.ax1x.com/2022/03/14/bXTM01.png)\n\n**本题采用 Subtask 捆绑测试。**\n\n- $\\texttt{Subtask \\#0 (30pts)}$：$n = 10^3$ 且数据随机；\n- $\\texttt{Subtask \\#1 (30pts)}$：$n \\le 5$ ；\n- $\\texttt{Subtask \\#2 (40pts)}$：$n \\le 10^6$；\n\n对于每个测试点，保证 $T \\le 5 ，\\sum n\\le 10^6$，点的坐标的绝对值不超过 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P8223", "type": "P", "difficulty": 7, "samples": [["3\n2 3 1", "2\n2\n2 0\n1 0"], ["5\n4 2 3 5 1", "3\n3\n3 1\n1 1\n2 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "随机化", "构造", "洛谷月赛"], "title": "[WFOI - 02] I wanna moqueve（位移序列）", "background": "> It's my fiesta.\n>\n> 一场前，kid 在 WFOIR1 的地图上，折戟沉沙；一场后，kid 从倒下的地方爬起。\n> \n> kid 成功了，他不再是从前那个他了。\n\n简化题意：[$\\texttt{Link}$](https://www.luogu.com.cn/paste/dlxx9pm0)\n\n为什么做完这题你不去做做[这题](https://www.luogu.com.cn/problem/P7999)呢", "description": "kid 需要在一台奇怪的电脑上排序一个 $1\\sim n$ 的排列，下一个存档点才会出现。\n\nkid 可以选择一个数 $x$，然后接下来的每次操作，kid 可以向左或向右循环位移一段长为 $x$ 的序列（最左/右边的会平移至最右/左边）（位移量是 $1$）。\n\n如果 kid 的操作次数超过了 $23\\times n$，排列就会爆炸，kid 将会再次倒下。所以，请告诉 kid 一种还原序列的方案，剩下的操作就交给 €€£ 吧！", "inputFormat": "输入共 $2$ 行：\n\n第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数，表示序列 $a$。", "outputFormat": "输出共 $m + 2$ 行。\n\n前两行每行 $1$ 个数，分别是 $x,m$。$m$ 表示操作次数。\n\n接下来 $m$ 行，每行两个数，前一个数表示平移区间左端点，后一个数表示方向，$0$ 为向左，$1$ 为向右；\n\n本题采用 $\\text{SPJ}$，只要循环位移操作正确即可给分。", "hint": "- **样例 $1$ 解释：**\n\t\n    左移 $(2,3)$ 序列变成 $2,1,3$；\n    \n    左移 $(1,2)$ 序列变成 $1,2,3$；\n    \n- **样例 $2$ 解释：** \n\n    右移 $(3,5)$ 序列变成 $4,2,1,3,5$；\n\n\t右移 $(1,3)$ 序列变成 $1,4,2,3,5$；\n    \n    左移 $(2,4)$ 序列变成 $1,2,3,4,5$；\n    \n**本题采用 Subtask 捆绑测试。**\n\nSubtask 编号 | 数据规模与约定\n:-: | :-:\n**Subtask #0** ($\\texttt{1 pts}$) | $n=1$\n**Subtask #1** ($\\texttt{2 pts}$) | $n=2$\n**Subtask #2** ($\\texttt{3 pts}$) | $n=3$\n**Subtask #3** ($\\texttt{4 pts}$) | $n=4$\n**Subtask #4** ($\\texttt{20 pts}$) | $1\\le n\\le 50$\n**Subtask #5** ($\\texttt{20 pts}$) | $1\\le n\\le 100$\n**Subtask #6** ($\\texttt{50 pts}$) | $1\\le n\\le 10^3$\n\n对于 $100\\%$ 的数据，$1\\le n,a_i\\le 10^3$，数据保证 $a$ 是一个 $1\\sim n$ 的排列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 02] I wanna moqueve（位移序列）", "background": "> It's my fiesta.\n>\n> 一场前，kid 在 WFOIR1 的地图上，折戟沉沙；一场后，kid 从倒下的地方爬起。\n> \n> kid 成功了，他不再是从前那个他了。\n\n简化题意：[$\\texttt{Link}$](https://www.luogu.com.cn/paste/dlxx9pm0)\n\n为什么做完这题你不去做做[这题](https://www.luogu.com.cn/problem/P7999)呢", "description": "kid 需要在一台奇怪的电脑上排序一个 $1\\sim n$ 的排列，下一个存档点才会出现。\n\nkid 可以选择一个数 $x$，然后接下来的每次操作，kid 可以向左或向右循环位移一段长为 $x$ 的序列（最左/右边的会平移至最右/左边）（位移量是 $1$）。\n\n如果 kid 的操作次数超过了 $23\\times n$，排列就会爆炸，kid 将会再次倒下。所以，请告诉 kid 一种还原序列的方案，剩下的操作就交给 €€£ 吧！", "inputFormat": "输入共 $2$ 行：\n\n第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数，表示序列 $a$。", "outputFormat": "输出共 $m + 2$ 行。\n\n前两行每行 $1$ 个数，分别是 $x,m$。$m$ 表示操作次数。\n\n接下来 $m$ 行，每行两个数，前一个数表示平移区间左端点，后一个数表示方向，$0$ 为向左，$1$ 为向右；\n\n本题采用 $\\text{SPJ}$，只要循环位移操作正确即可给分。", "hint": "- **样例 $1$ 解释：**\n\t\n    左移 $(2,3)$ 序列变成 $2,1,3$；\n    \n    左移 $(1,2)$ 序列变成 $1,2,3$；\n    \n- **样例 $2$ 解释：** \n\n    右移 $(3,5)$ 序列变成 $4,2,1,3,5$；\n\n\t右移 $(1,3)$ 序列变成 $1,4,2,3,5$；\n    \n    左移 $(2,4)$ 序列变成 $1,2,3,4,5$；\n    \n**本题采用 Subtask 捆绑测试。**\n\nSubtask 编号 | 数据规模与约定\n:-: | :-:\n**Subtask #0** ($\\texttt{1 pts}$) | $n=1$\n**Subtask #1** ($\\texttt{2 pts}$) | $n=2$\n**Subtask #2** ($\\texttt{3 pts}$) | $n=3$\n**Subtask #3** ($\\texttt{4 pts}$) | $n=4$\n**Subtask #4** ($\\texttt{20 pts}$) | $1\\le n\\le 50$\n**Subtask #5** ($\\texttt{20 pts}$) | $1\\le n\\le 100$\n**Subtask #6** ($\\texttt{50 pts}$) | $1\\le n\\le 10^3$\n\n对于 $100\\%$ 的数据，$1\\le n,a_i\\le 10^3$，数据保证 $a$ 是一个 $1\\sim n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P8224", "type": "P", "difficulty": 7, "samples": [["5 4 2 3 2 2 2 15\n3 1", "YES\n15\n2 2\n2 3\n3 3\n3 2\n4 2\n4 3\n5 3\n5 2\n5 1\n4 1\n3 1\n2 1\n1 1\n1 2\n1 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "提交答案", "Special Judge", "O2优化", "模拟退火", "随机调整", "其它技巧", "构造", "洛谷月赛"], "title": "[WFOI - 02] I wanna cross the grid（穿越网格）", "background": ">  相信奇迹的人，本身比奇迹更伟大吧\n\n突然，存档点落到了一个巨大的网格中，只有走过所有必经区域，才能出现下一个存档点...", "description": "给定一张 $n$ 行 $m$ 列的网格图，行和列从 $1$ 开始编号，定义二元组 $(x,y)$ 表示第 $x$ 行第 $y$ 列的格子，每一行的第 $L$ 到第 $R$ 列的格子是必经区域，形式化地，设 $D$ 是必经区域集合，则 $D=\\{(x,y)|1\\leq x\\leq n,L\\leq y\\leq R,x,y\\in N_+\\}$。\n\n每次 kid 可以向上下左右四个方向走一步，且不能超过边界。形式化地，若现在 kid 现在在 $(x,y)$，则 kid 可以走到 $(x+1,y),(x,y+1),(x-1,y),(x,y-1)$。\n\n初始时 kid 在 $(S_x,S_y)$（保证 $S_y=L$），他需要走过所有的必经区域，且任何一个格子最多只经过一次。形式化地，kid 走的路径形如一个二元组序列 $P=(x_1,y_1),(x_2,y_2)...(x_k,y_k)$，需要满足 $\\forall (x_0,y_0)\\in D，\\exist i\\in[1,k]，(x_0,y_0)=(x_i,y_i)$，且 $\\forall i\\not= j，(x_i,y_i)\\not= (x_j,y_j)$。\n\n同时，kid 还要记录一个通关序列 $p$，当 kid 第一次进入某一行的必经区域之后，就要把行号写在当前序列的后面，且立刻经过本行所有的必经区域。同时，$p$ 必须包含一个长度为 $L_q$ 的子序列 $q$ 才是一个合法的通关序列，从而真正通关。形式化地，$p$ 合法当且仅当存在长度为 $L_q$ 的序列 $c$ 满足 $p_{c_i}=q_i$，且 $c$ 单调上升。\n\n同时，为了给 lindongli2004 降低操作难度，lindongli2004 希望 kid 走的步数越少越好。\n\n给定 $n,m,L,R,S_x,S_y,q$，请你为 kid 规划一条通关路线，或者告诉他不存在一条路线。剩下的操作就交给 lindongli2004 吧！", "inputFormat": "第一行 $8$ 个正整数 $n,m,L,R,S_x,S_y,L_q,s$，分别表示矩阵的行数和列数，必经区域的左边界和右边界，起点的 $x$ 坐标和 $y$ 坐标，序列 $q$ 的长度和评分参数。\n\n第二行 $L_q$ 个不重复的正整数，表示序列 $q$ 。", "outputFormat": "第一行一个字符串 `YES` 或者 `NO` 表示是否存在一条路径（不包含引号）。\n\n若存在一条路径，第二行一个正整数 $cnt$ 表示路径长度，接下来 $cnt$ 行每行两个正整数 $x,y$ 表示路径的坐标。", "hint": "#### 数据范围：\n\n$1\\leq L\\leq R\\leq m$，$1\\leq S_x\\leq n$，其他详见下发文件。\n\n#### 评分规则：\n\n下发文件中第一行的最后一个数为 $s$，设你的操作步数为 $cnt$。那么\n - 若 $cnt\\leq s$，你将获得 $10$ 分。\n - 若 $cnt> s$ 且能通关，你将获得 $9- \\frac{cnt-s}{\\lfloor\\frac{n}{2}\\rfloor}$ 分。\n - 若你不能通关，你将获得 $0$ 分。\n \n#### checker：\n\n[自取](/paste/c4omcrf2)\n\n使用方法：在同一目录下，把下发的数据放到 data.in 中，把你的答案放到 data.out 中，编译运行即可。\n\n注意事项：\n - 此 checker 默认存在一组方案，并 check 该方案是否合法。\n - 此 checker 的最大方案容量为 $2.5 \\times 10^{8}$ ，也就是说，你的方案中不能有超过 $2.5 \\times 10^{8}$ 个数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 02] I wanna cross the grid（穿越网格）", "background": ">  相信奇迹的人，本身比奇迹更伟大吧\n\n突然，存档点落到了一个巨大的网格中，只有走过所有必经区域，才能出现下一个存档点...", "description": "给定一张 $n$ 行 $m$ 列的网格图，行和列从 $1$ 开始编号，定义二元组 $(x,y)$ 表示第 $x$ 行第 $y$ 列的格子，每一行的第 $L$ 到第 $R$ 列的格子是必经区域，形式化地，设 $D$ 是必经区域集合，则 $D=\\{(x,y)|1\\leq x\\leq n,L\\leq y\\leq R,x,y\\in N_+\\}$。\n\n每次 kid 可以向上下左右四个方向走一步，且不能超过边界。形式化地，若现在 kid 现在在 $(x,y)$，则 kid 可以走到 $(x+1,y),(x,y+1),(x-1,y),(x,y-1)$。\n\n初始时 kid 在 $(S_x,S_y)$（保证 $S_y=L$），他需要走过所有的必经区域，且任何一个格子最多只经过一次。形式化地，kid 走的路径形如一个二元组序列 $P=(x_1,y_1),(x_2,y_2)...(x_k,y_k)$，需要满足 $\\forall (x_0,y_0)\\in D，\\exist i\\in[1,k]，(x_0,y_0)=(x_i,y_i)$，且 $\\forall i\\not= j，(x_i,y_i)\\not= (x_j,y_j)$。\n\n同时，kid 还要记录一个通关序列 $p$，当 kid 第一次进入某一行的必经区域之后，就要把行号写在当前序列的后面，且立刻经过本行所有的必经区域。同时，$p$ 必须包含一个长度为 $L_q$ 的子序列 $q$ 才是一个合法的通关序列，从而真正通关。形式化地，$p$ 合法当且仅当存在长度为 $L_q$ 的序列 $c$ 满足 $p_{c_i}=q_i$，且 $c$ 单调上升。\n\n同时，为了给 lindongli2004 降低操作难度，lindongli2004 希望 kid 走的步数越少越好。\n\n给定 $n,m,L,R,S_x,S_y,q$，请你为 kid 规划一条通关路线，或者告诉他不存在一条路线。剩下的操作就交给 lindongli2004 吧！", "inputFormat": "第一行 $8$ 个正整数 $n,m,L,R,S_x,S_y,L_q,s$，分别表示矩阵的行数和列数，必经区域的左边界和右边界，起点的 $x$ 坐标和 $y$ 坐标，序列 $q$ 的长度和评分参数。\n\n第二行 $L_q$ 个不重复的正整数，表示序列 $q$ 。", "outputFormat": "第一行一个字符串 `YES` 或者 `NO` 表示是否存在一条路径（不包含引号）。\n\n若存在一条路径，第二行一个正整数 $cnt$ 表示路径长度，接下来 $cnt$ 行每行两个正整数 $x,y$ 表示路径的坐标。", "hint": "#### 数据范围：\n\n$1\\leq L\\leq R\\leq m$，$1\\leq S_x\\leq n$，其他详见下发文件。\n\n#### 评分规则：\n\n下发文件中第一行的最后一个数为 $s$，设你的操作步数为 $cnt$。那么\n - 若 $cnt\\leq s$，你将获得 $10$ 分。\n - 若 $cnt> s$ 且能通关，你将获得 $9- \\frac{cnt-s}{\\lfloor\\frac{n}{2}\\rfloor}$ 分。\n - 若你不能通关，你将获得 $0$ 分。\n \n#### checker：\n\n[自取](/paste/c4omcrf2)\n\n使用方法：在同一目录下，把下发的数据放到 data.in 中，把你的答案放到 data.out 中，编译运行即可。\n\n注意事项：\n - 此 checker 默认存在一组方案，并 check 该方案是否合法。\n - 此 checker 的最大方案容量为 $2.5 \\times 10^{8}$ ，也就是说，你的方案中不能有超过 $2.5 \\times 10^{8}$ 个数。", "locale": "zh-CN"}}}
{"pid": "P8225", "type": "P", "difficulty": 1, "samples": [["2\n1 999\n2 999", "aya\nbaka"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数论", "洛谷原创", "洛谷月赛"], "title": "「Wdoi-5」天才⑨与天才拆分", "background": "$\\kern{75pt}$![](https://cdn.luogu.com.cn/upload/image_hosting/ghy90htm.png?x-oss-process=image/resize,m_lfit,h_340,w_450)\n\n萌萌琪露诺在寺子屋的教室里面见到了哆来咪·苏伊特。心怀好意的哆来咪告诉了她期末考试的题目，只要解出这些题目就能免于被慧音老师头槌。兴奋的琪露诺告别了哆来咪，猛然发现自己已经身处在期末考试的考场之上！但是琪露诺实在是太笨了，醒来就把哆来咪告诉她的题目忘得一干二净，只记得试卷上有大量的⑨。\n\n现在琪露诺已经在考试啦，你可以使用⑨的妖精链接回答她的问题，以平复她忘记了考试答案的悲痛。你能帮帮她吗？\n\n温馨提示：考试作弊是不对的哦。", "description": "琪露诺定义一个十进制正整数为「$k$ 阶天才数」，当且仅当该整数的**位数**为 $k$ 的倍数，且**每一个数位**均为 $9$。例如，$9999$ 是 $2$ 阶天才数，而 $999$ 不是 $2$ 阶天才数，但是它是 $1$ 阶天才数，也是 $3$ 阶天才数。\n\n琪露诺给定你 $t$ 个询问，每个询问有两个整数 $n$ 和 $k$，希望你能帮帮她，告诉她能不能把 $n$ 拆分成若干个 $k$ 阶天才数的和。", "inputFormat": "- 第一行是一个整数 $t$，代表询问的个数。\n- 接下来 $t$ 行，每行两个整数 $k$ 和 $n$，代表一个询问。", "outputFormat": "- 输出共 $t$ 行。如果对应的询问答案是可以，输出一行一个字符串 `aya`，否则输出一行一个字符串 `baka`。", "hint": "本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\n{\\text{无特殊限制}}\n\\def\\arraystretch{1.5}\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Task} & \\bm t= & \\bm {n_i \\le} & \\bm {k_i \\le} \\cr\\hline\n1 & 1 & 233 & 1 \\cr\\hline\n2\\sim 6 & 1 & 10^3 & 1 \\cr\\hline\n7\\sim 8 & 10 & 10^9 & 1 \\cr\\hline\n9 & 10^3 & 10^9 & 1 \\cr\\hline\n10 & 10^3 & 10^{18} & 1 \\cr\\hline\n11\\sim 20 & 10^3 &  10^{18} & 10 \\cr\\hline\n\\end{array}\n$$\n\n对于全部数据，满足 $1\\le t\\le 10^3$，$1\\le n_i\\le 10^{18}$，$1\\le k_i\\le 10$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-5」天才⑨与天才拆分", "background": "$\\kern{75pt}$![](https://cdn.luogu.com.cn/upload/image_hosting/ghy90htm.png?x-oss-process=image/resize,m_lfit,h_340,w_450)\n\n萌萌琪露诺在寺子屋的教室里面见到了哆来咪·苏伊特。心怀好意的哆来咪告诉了她期末考试的题目，只要解出这些题目就能免于被慧音老师头槌。兴奋的琪露诺告别了哆来咪，猛然发现自己已经身处在期末考试的考场之上！但是琪露诺实在是太笨了，醒来就把哆来咪告诉她的题目忘得一干二净，只记得试卷上有大量的⑨。\n\n现在琪露诺已经在考试啦，你可以使用⑨的妖精链接回答她的问题，以平复她忘记了考试答案的悲痛。你能帮帮她吗？\n\n温馨提示：考试作弊是不对的哦。", "description": "琪露诺定义一个十进制正整数为「$k$ 阶天才数」，当且仅当该整数的**位数**为 $k$ 的倍数，且**每一个数位**均为 $9$。例如，$9999$ 是 $2$ 阶天才数，而 $999$ 不是 $2$ 阶天才数，但是它是 $1$ 阶天才数，也是 $3$ 阶天才数。\n\n琪露诺给定你 $t$ 个询问，每个询问有两个整数 $n$ 和 $k$，希望你能帮帮她，告诉她能不能把 $n$ 拆分成若干个 $k$ 阶天才数的和。", "inputFormat": "- 第一行是一个整数 $t$，代表询问的个数。\n- 接下来 $t$ 行，每行两个整数 $k$ 和 $n$，代表一个询问。", "outputFormat": "- 输出共 $t$ 行。如果对应的询问答案是可以，输出一行一个字符串 `aya`，否则输出一行一个字符串 `baka`。", "hint": "本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\n{\\text{无特殊限制}}\n\\def\\arraystretch{1.5}\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Task} & \\bm t= & \\bm {n_i \\le} & \\bm {k_i \\le} \\cr\\hline\n1 & 1 & 233 & 1 \\cr\\hline\n2\\sim 6 & 1 & 10^3 & 1 \\cr\\hline\n7\\sim 8 & 10 & 10^9 & 1 \\cr\\hline\n9 & 10^3 & 10^9 & 1 \\cr\\hline\n10 & 10^3 & 10^{18} & 1 \\cr\\hline\n11\\sim 20 & 10^3 &  10^{18} & 10 \\cr\\hline\n\\end{array}\n$$\n\n对于全部数据，满足 $1\\le t\\le 10^3$，$1\\le n_i\\le 10^{18}$，$1\\le k_i\\le 10$。", "locale": "zh-CN"}}}
{"pid": "P8226", "type": "P", "difficulty": 3, "samples": [["4 3 2\n1 3 4\n1 1 2 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "数论", "洛谷原创", "洛谷月赛"], "title": "「Wdoi-5」樱点收集", "background": "119 季 5 月，明明本应是樱花盛开的春天，幻想乡却依然下着大雪。异变的主谋**西行寺幽幽子**在古书上看到，只要使妖樱西行妖满开便会有什么人复活，便出于兴趣命令妖梦收集幻想乡中的春度，一手策划成了这场异变。在收集春度的过程中散落的能量在西行妖的影响下化为**樱点**，散落在幻想乡各处。\n\n出发解决**春雪异变**的灵梦将前往冥界旅途划分为了若干段，每一段都可以收集到一定的樱点。收集齐一定程度的樱点，就会立即开出樱之结界。开出樱之结界后可以短暂地屏蔽一切攻击，并且获得相应的增益。\n\n但是樱之结界何时开放仅由樱点的收集情况所决定，她不得不对樱点进行「规划」。通过某些途径规避某一段路上樱点的收集，借此使得在将来的某几段路程里，灵梦得以恰好在该段的末尾开放樱之结界。  \n\n但是现实往往不尽人意。也就是说，可能有某些要求无法达成。灵梦希望找出一个方案，使得她可以达成的要求最多。灵梦委托八云紫帮忙决策，于是这个重任就被一条懒紫交给了式神八云蓝。尽管八云蓝擅长计算，但是八云紫睡觉去了没有给她编程，因而现在这个任务就落到了你的手上。", "description": "灵梦当前拥有的樱点可以使用一个**变量** $c$ 存储，初始时为 $0$。当樱点在某个瞬间**恰好**变为了 $k$，灵梦就会展开樱之结界，同时 $c$ 变为 $0$。\n\n现在她把路程**依次**划分为了 $n$ 个关卡，其中第 $i$ 关上，灵梦一共可以获得 $a_i$ 点樱点。这些樱点是均匀分布在这关的路程上的。也就是说，随着这段路程的进行，灵梦的樱点个数会依次增加，每次增加 $1$ 个单位（$c\\gets c+1$），恰好在这段路程结束的瞬间会收集到这关中第 $a_i$ 点樱点。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3yuiywt0.png)\n\n**【需要注意的是，这只是图示参考，不满足实际的数据限制。】**\n\n在这个例子里，灵梦将路径划分为了四个关卡。这四个关卡的樱点个数分别为 $2,0,3,1$。\n\n灵梦提出了 $m$ 个要求。第 $i$ 个要求 $b_i$ 表示灵梦希望在第 $b_i$ 段路程结束的瞬间，**恰好**展开樱之结界（如果在这段路程的中途展开但是结束的瞬间没有展开，那就不算达成了要求）。\n\n灵梦可以选择在某个关卡开头放 bomb，**跳过**整个关卡的樱点收集。这样的机会**有且仅有**一次（当然，灵梦可以选择不使用 bomb）。\n\n现在需要求出，在最优的选择下，灵梦**最多**可以达成多少个要求。", "inputFormat": "- 第一行共有三个整数 $n,m,k$，分别表示关卡数、要求个数，以及常量 $k$。\n- 第二行 $m$ 个整数 $b_1,b_2,\\cdots b_m$，描述了灵梦的 $m$ 个要求。**保证 $\\bm{b_i}$ 单调递增**。\n- 第三行 $n$ 个整数 $a_1,a_2,\\cdots a_n$，描述了第 $i$ 关可以获得的樱点个数。", "outputFormat": "- 共一行一个整数，表示答案。", "hint": "样例 $2$ 见下发的附件 $\\textbf{\\textit{sukura2.in/sakura2.ans}}$。该样例约束与测试点 $1\\sim 8$ 一致。  \n样例 $3$ 见下发的附件 $\\textbf{\\textit{sukura3.in/sakura3.ans}}$。该样例约束与测试点 $9\\sim 14$ 一致。  \n样例 $4$ 见下发的附件 $\\textbf{\\textit{sukura4.in/sakura4.ans}}$。该样例约束与测试点 $15\\sim 20$ 一致。\n\n#### 样例 1 解释\n\n- 在不使用 bomb 时，灵梦会在第 $2$、$3$ 关开出樱之结界，其中第 $3$ 关在统计序列中，满足要求数为 $1$。\n- 在第 $1$ 关使用 bomb，灵梦会在第 $4$ 关开出樱之结界，且第 $4$ 关在统计序列中，满足要求数为 $1$。\n- 在第 $2$ 关使用 bomb，灵梦会在第 $4$ 关开出樱之结界，且第 $4$ 关在统计序列中，满足要求数为 $1$。\n- 在第 $3$ 关使用 bomb，灵梦会在第 $2$ 关开出樱之结界，且第 $2$ 关不在统计序列中，满足要求数为 $0$。\n- 在第 $4$ 关使用 bomb，灵梦会在第 $2$、$3$ 关开出樱之结界，其中第 $3$ 关在序列中，满足要求数为 $1$。\n\n#### 数据范围及约定\n\n本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\bm{n\\le } & \\bm{k\\le} \\cr\\hline\n1\\sim 8 & 200 & 10^3 \\cr\\hline\n9\\sim 14 & 2\\times 10^3 & 10^5 \\cr\\hline\n15\\sim 20 & 3\\times 10^5 & 10^6 \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，保证 $1\\le m\\le n\\le 3\\times 10^5$，$1\\le k\\le 10^6$，$1\\le a_i\\le 10^9$，$1 \\le b_i \\le n$，$b$ 序列递增。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-5」樱点收集", "background": "119 季 5 月，明明本应是樱花盛开的春天，幻想乡却依然下着大雪。异变的主谋**西行寺幽幽子**在古书上看到，只要使妖樱西行妖满开便会有什么人复活，便出于兴趣命令妖梦收集幻想乡中的春度，一手策划成了这场异变。在收集春度的过程中散落的能量在西行妖的影响下化为**樱点**，散落在幻想乡各处。\n\n出发解决**春雪异变**的灵梦将前往冥界旅途划分为了若干段，每一段都可以收集到一定的樱点。收集齐一定程度的樱点，就会立即开出樱之结界。开出樱之结界后可以短暂地屏蔽一切攻击，并且获得相应的增益。\n\n但是樱之结界何时开放仅由樱点的收集情况所决定，她不得不对樱点进行「规划」。通过某些途径规避某一段路上樱点的收集，借此使得在将来的某几段路程里，灵梦得以恰好在该段的末尾开放樱之结界。  \n\n但是现实往往不尽人意。也就是说，可能有某些要求无法达成。灵梦希望找出一个方案，使得她可以达成的要求最多。灵梦委托八云紫帮忙决策，于是这个重任就被一条懒紫交给了式神八云蓝。尽管八云蓝擅长计算，但是八云紫睡觉去了没有给她编程，因而现在这个任务就落到了你的手上。", "description": "灵梦当前拥有的樱点可以使用一个**变量** $c$ 存储，初始时为 $0$。当樱点在某个瞬间**恰好**变为了 $k$，灵梦就会展开樱之结界，同时 $c$ 变为 $0$。\n\n现在她把路程**依次**划分为了 $n$ 个关卡，其中第 $i$ 关上，灵梦一共可以获得 $a_i$ 点樱点。这些樱点是均匀分布在这关的路程上的。也就是说，随着这段路程的进行，灵梦的樱点个数会依次增加，每次增加 $1$ 个单位（$c\\gets c+1$），恰好在这段路程结束的瞬间会收集到这关中第 $a_i$ 点樱点。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3yuiywt0.png)\n\n**【需要注意的是，这只是图示参考，不满足实际的数据限制。】**\n\n在这个例子里，灵梦将路径划分为了四个关卡。这四个关卡的樱点个数分别为 $2,0,3,1$。\n\n灵梦提出了 $m$ 个要求。第 $i$ 个要求 $b_i$ 表示灵梦希望在第 $b_i$ 段路程结束的瞬间，**恰好**展开樱之结界（如果在这段路程的中途展开但是结束的瞬间没有展开，那就不算达成了要求）。\n\n灵梦可以选择在某个关卡开头放 bomb，**跳过**整个关卡的樱点收集。这样的机会**有且仅有**一次（当然，灵梦可以选择不使用 bomb）。\n\n现在需要求出，在最优的选择下，灵梦**最多**可以达成多少个要求。", "inputFormat": "- 第一行共有三个整数 $n,m,k$，分别表示关卡数、要求个数，以及常量 $k$。\n- 第二行 $m$ 个整数 $b_1,b_2,\\cdots b_m$，描述了灵梦的 $m$ 个要求。**保证 $\\bm{b_i}$ 单调递增**。\n- 第三行 $n$ 个整数 $a_1,a_2,\\cdots a_n$，描述了第 $i$ 关可以获得的樱点个数。", "outputFormat": "- 共一行一个整数，表示答案。", "hint": "样例 $2$ 见下发的附件 $\\textbf{\\textit{sukura2.in/sakura2.ans}}$。该样例约束与测试点 $1\\sim 8$ 一致。  \n样例 $3$ 见下发的附件 $\\textbf{\\textit{sukura3.in/sakura3.ans}}$。该样例约束与测试点 $9\\sim 14$ 一致。  \n样例 $4$ 见下发的附件 $\\textbf{\\textit{sukura4.in/sakura4.ans}}$。该样例约束与测试点 $15\\sim 20$ 一致。\n\n#### 样例 1 解释\n\n- 在不使用 bomb 时，灵梦会在第 $2$、$3$ 关开出樱之结界，其中第 $3$ 关在统计序列中，满足要求数为 $1$。\n- 在第 $1$ 关使用 bomb，灵梦会在第 $4$ 关开出樱之结界，且第 $4$ 关在统计序列中，满足要求数为 $1$。\n- 在第 $2$ 关使用 bomb，灵梦会在第 $4$ 关开出樱之结界，且第 $4$ 关在统计序列中，满足要求数为 $1$。\n- 在第 $3$ 关使用 bomb，灵梦会在第 $2$ 关开出樱之结界，且第 $2$ 关不在统计序列中，满足要求数为 $0$。\n- 在第 $4$ 关使用 bomb，灵梦会在第 $2$、$3$ 关开出樱之结界，其中第 $3$ 关在序列中，满足要求数为 $1$。\n\n#### 数据范围及约定\n\n本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\bm{n\\le } & \\bm{k\\le} \\cr\\hline\n1\\sim 8 & 200 & 10^3 \\cr\\hline\n9\\sim 14 & 2\\times 10^3 & 10^5 \\cr\\hline\n15\\sim 20 & 3\\times 10^5 & 10^6 \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，保证 $1\\le m\\le n\\le 3\\times 10^5$，$1\\le k\\le 10^6$，$1\\le a_i\\le 10^9$，$1 \\le b_i \\le n$，$b$ 序列递增。", "locale": "zh-CN"}}}
{"pid": "P8227", "type": "P", "difficulty": 6, "samples": [["14\n((()())(()()))\n()()()()()()()", "6"], ["14\n((()())(()()))\n(()())(()())()", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["贪心", "递归", "洛谷原创", "树形 DP", "洛谷月赛", "双指针 two-pointer"], "title": "「Wdoi-5」建立与摧毁的结界", "background": "八云紫拥有操控境界程度的能力。作为其式神的八云蓝，同样拥有一定程度的操作境界的能力，而作为八云蓝的式神橙，却因为功力尚且不足，而无法对境界进行过多的干预了。\n\n于是八云蓝打算教教橙，境界的用法。境界可以被抽象成一层一层的括号，操作境界本质上就是对括号序列进行修改。由于橙的能力尚且不足，因此只能进行一些简单的境界的建立与摧毁。\n\n尽管如此，通过简单的操作，亦可以把一个境界转换为另外一个境界。为了给橙作为练习，蓝找来了两个境界的范本。将其中一个境界转换为另外一个境界的难度，就是橙需要施用能力的最小次数。但是由于境界实在太长，蓝决定写一个程序（？）来帮帮她计算出境界的难度。", "description": "境界可以被抽象为由圆括号组成的括号序列。现做出如下定义：\n\n- 定义 $D_i$ 为**嵌套括号序列**。其中 $D_0$ 为零阶嵌套括号序列，被定义为单组括号 $\\verb!()!$；而 $D_k$ 则为 $k$ 阶嵌套括号序列（$k \\geq 1$）定义为 $\\verb!(!D_{k-1}\\verb!)!$，即在 $D_{k-1}$ 的外层增添了一层括号。\n- 定义 $F_i$ 为**平铺括号序列**。其中 $F_0$ 为零阶平铺括号序列，被定义为单组括号 $\\verb!()!$；而 $F_k$ 则为 $k$ 阶平铺括号序列（$k \\geq 1$），定义为 $\\verb!()!F_{k-1}$，即在 $F_{k-1}$ 的左侧增添了一对括号。\n\n例如，$\\verb!((()))!$ 为 $D_2$，$\\verb!()()()()!$ 为 $F_{3}$。\n\n现在蓝给出了两个长度为 $n$ 的**合法**括号序列 $A$ 和 $B$。橙可以用以下操作对序列 $A$ 进行变换：\n\n- 选择任意非负整数 $k$，选择括号序列的一个子串满足其为一个 $k$ 阶嵌套括号序列，然后将其变为 $k$ 阶平铺括号序列。\n- 选择任意非负整数 $k$，选择括号序列的一个子串满足其为一个 $k$ 阶平铺括号序列，然后将其变为 $k$ 阶嵌套括号序列。\n\n**提示说明**处有「合法括号序列」与「子串」的定义。\n\n现在需要求出将序列 $A$ 变换为序列 $B$ 所需的最少操作数。可以证明，总存在一种操作方案能将序列 $A$ 变换为序列 $B$。", "inputFormat": "- 第一行共有一个整数 $n$，表示 $A$ 与 $B$ 括号序列的长度。\n- 接下来一行，共有 $n$ 个字符，描述括号序列 $A$。保证序列 $A$ 合法。\n- 接下来一行，共有 $n$ 个字符，描述括号序列 $B$。保证序列 $B$ 合法。", "outputFormat": "- 共一行，一个整数，表示将 $A$ 转换为 $B$ 需要的最少步数（可能为 $0$，也就是不进行任何操作）。", "hint": "样例 $3$ 见下发的附件  $\\textbf{\\textit{border3.in/border3.ans}}$。  \n样例 $4$ 见下发的附件  $\\textbf{\\textit{border4.in/border4.ans}}$。满足特殊性质 $\\text{A}$（见下文）。  \n样例 $5$ 见下发的附件  $\\textbf{\\textit{border5.in/border5.ans}}$。  \n\n#### 样例 1 解释\n\n- 第一步：$\\texttt{((\\underline{()()})(()()))}\\to\\texttt{((\\underline{(())})(()()))}$。\n- 第二步：$\\texttt{(((()))(\\underline{()()}))}\\to\\texttt{(((()))(\\underline{(())}))}$。\n- 第三步：$\\texttt{(((()))\\underline{((()))})}\\to\\texttt{(((()))\\underline{()()()})}$。\n- 第四步：$\\texttt{(\\underline{((()))}()()())}\\to\\texttt{(\\underline{()()()}()()())}$。\n- 第五步：$\\texttt{(\\underline{()()()()()()})}\\to\\texttt{(\\underline{(((((())))))})}$。\n- 第六步：$\\texttt{\\underline{((((((()))))))}}\\to\\texttt{\\underline{()()()()()()()}}$。\n\n可以证明，不存在更短的方案。\n\n#### 提示\n\n**合法括号序列**通过这样一个形式定义：\n\n- $\\verb!()!$ 是合法括号序列。\n- 若 $A$ 是合法括号序列，那么 $\\verb!(!A\\verb!)!$ 是合法括号序列。\n- 若 $A,B$ 均为合法括号序列，那么 $AB$ 是合法括号序列。\n\n我们称 $A$ 是 $B$ 的**子串**，当且仅当删除 $B$ 开头若干个字符（可以不删除），再删除 $B$ 末尾若干个字符（可以不删除），剩下来的字符序列与 $A$ 完全相同。\n\n#### 数据范围及约定\n\n本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\bm{n\\le } & \\textbf{特殊性质} \\cr\\hline\n1\\sim 4 & 10 & - \\cr\\hline\n5\\sim 7 & 2\\times 10^3 & \\text{A} \\cr\\hline\n8\\sim 10 & 2\\times 10^3 & - \\cr\\hline\n11\\sim 15 & 10^6 & \\text{A} \\cr\\hline\n16\\sim 20 & 10^6 & - \\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证 $B$ 是 $(n\\div 2-1)$ 阶平铺括号序列。\n\n#### 友情提醒\n\n考虑到选手可能会用不同的方式进行字符串的读入，这里保证输入文件**每行末尾没有多余空格**，并且每行都以 `\\n` 结尾（也就是说，不会出现多余的 `\\r`）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-5」建立与摧毁的结界", "background": "八云紫拥有操控境界程度的能力。作为其式神的八云蓝，同样拥有一定程度的操作境界的能力，而作为八云蓝的式神橙，却因为功力尚且不足，而无法对境界进行过多的干预了。\n\n于是八云蓝打算教教橙，境界的用法。境界可以被抽象成一层一层的括号，操作境界本质上就是对括号序列进行修改。由于橙的能力尚且不足，因此只能进行一些简单的境界的建立与摧毁。\n\n尽管如此，通过简单的操作，亦可以把一个境界转换为另外一个境界。为了给橙作为练习，蓝找来了两个境界的范本。将其中一个境界转换为另外一个境界的难度，就是橙需要施用能力的最小次数。但是由于境界实在太长，蓝决定写一个程序（？）来帮帮她计算出境界的难度。", "description": "境界可以被抽象为由圆括号组成的括号序列。现做出如下定义：\n\n- 定义 $D_i$ 为**嵌套括号序列**。其中 $D_0$ 为零阶嵌套括号序列，被定义为单组括号 $\\verb!()!$；而 $D_k$ 则为 $k$ 阶嵌套括号序列（$k \\geq 1$）定义为 $\\verb!(!D_{k-1}\\verb!)!$，即在 $D_{k-1}$ 的外层增添了一层括号。\n- 定义 $F_i$ 为**平铺括号序列**。其中 $F_0$ 为零阶平铺括号序列，被定义为单组括号 $\\verb!()!$；而 $F_k$ 则为 $k$ 阶平铺括号序列（$k \\geq 1$），定义为 $\\verb!()!F_{k-1}$，即在 $F_{k-1}$ 的左侧增添了一对括号。\n\n例如，$\\verb!((()))!$ 为 $D_2$，$\\verb!()()()()!$ 为 $F_{3}$。\n\n现在蓝给出了两个长度为 $n$ 的**合法**括号序列 $A$ 和 $B$。橙可以用以下操作对序列 $A$ 进行变换：\n\n- 选择任意非负整数 $k$，选择括号序列的一个子串满足其为一个 $k$ 阶嵌套括号序列，然后将其变为 $k$ 阶平铺括号序列。\n- 选择任意非负整数 $k$，选择括号序列的一个子串满足其为一个 $k$ 阶平铺括号序列，然后将其变为 $k$ 阶嵌套括号序列。\n\n**提示说明**处有「合法括号序列」与「子串」的定义。\n\n现在需要求出将序列 $A$ 变换为序列 $B$ 所需的最少操作数。可以证明，总存在一种操作方案能将序列 $A$ 变换为序列 $B$。", "inputFormat": "- 第一行共有一个整数 $n$，表示 $A$ 与 $B$ 括号序列的长度。\n- 接下来一行，共有 $n$ 个字符，描述括号序列 $A$。保证序列 $A$ 合法。\n- 接下来一行，共有 $n$ 个字符，描述括号序列 $B$。保证序列 $B$ 合法。", "outputFormat": "- 共一行，一个整数，表示将 $A$ 转换为 $B$ 需要的最少步数（可能为 $0$，也就是不进行任何操作）。", "hint": "样例 $3$ 见下发的附件  $\\textbf{\\textit{border3.in/border3.ans}}$。  \n样例 $4$ 见下发的附件  $\\textbf{\\textit{border4.in/border4.ans}}$。满足特殊性质 $\\text{A}$（见下文）。  \n样例 $5$ 见下发的附件  $\\textbf{\\textit{border5.in/border5.ans}}$。  \n\n#### 样例 1 解释\n\n- 第一步：$\\texttt{((\\underline{()()})(()()))}\\to\\texttt{((\\underline{(())})(()()))}$。\n- 第二步：$\\texttt{(((()))(\\underline{()()}))}\\to\\texttt{(((()))(\\underline{(())}))}$。\n- 第三步：$\\texttt{(((()))\\underline{((()))})}\\to\\texttt{(((()))\\underline{()()()})}$。\n- 第四步：$\\texttt{(\\underline{((()))}()()())}\\to\\texttt{(\\underline{()()()}()()())}$。\n- 第五步：$\\texttt{(\\underline{()()()()()()})}\\to\\texttt{(\\underline{(((((())))))})}$。\n- 第六步：$\\texttt{\\underline{((((((()))))))}}\\to\\texttt{\\underline{()()()()()()()}}$。\n\n可以证明，不存在更短的方案。\n\n#### 提示\n\n**合法括号序列**通过这样一个形式定义：\n\n- $\\verb!()!$ 是合法括号序列。\n- 若 $A$ 是合法括号序列，那么 $\\verb!(!A\\verb!)!$ 是合法括号序列。\n- 若 $A,B$ 均为合法括号序列，那么 $AB$ 是合法括号序列。\n\n我们称 $A$ 是 $B$ 的**子串**，当且仅当删除 $B$ 开头若干个字符（可以不删除），再删除 $B$ 末尾若干个字符（可以不删除），剩下来的字符序列与 $A$ 完全相同。\n\n#### 数据范围及约定\n\n本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\bm{n\\le } & \\textbf{特殊性质} \\cr\\hline\n1\\sim 4 & 10 & - \\cr\\hline\n5\\sim 7 & 2\\times 10^3 & \\text{A} \\cr\\hline\n8\\sim 10 & 2\\times 10^3 & - \\cr\\hline\n11\\sim 15 & 10^6 & \\text{A} \\cr\\hline\n16\\sim 20 & 10^6 & - \\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证 $B$ 是 $(n\\div 2-1)$ 阶平铺括号序列。\n\n#### 友情提醒\n\n考虑到选手可能会用不同的方式进行字符串的读入，这里保证输入文件**每行末尾没有多余空格**，并且每行都以 `\\n` 结尾（也就是说，不会出现多余的 `\\r`）。", "locale": "zh-CN"}}}
{"pid": "P8228", "type": "P", "difficulty": 4, "samples": [["4 3\n0 1 1 3 4\n3 0 3 3 3\n1 0 0 2 2", "4 4 4 0 4 4 4 4 3 4 4 4 4 7 3 0 4 4 6 9 3 3 0 4 6 6 5 3 0 0 2 2 3 0 0 0 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["洛谷原创", "O2优化", "差分", "洛谷月赛"], "title": "「Wdoi-5」模块化核熔炉", "background": "为了通过使用核聚变获得能源，守矢神社在旧地狱修建了巨大的核融合控制中心。控制中心形如双层八卦炉，通过各种电路紧密地调控着核融合的精密运行。获得了八咫鸟力量的阿空会在核反应炉的中心点燃神火。\n\n但是正八边形的八卦炉并不利于进行拓展与维护。为了方便地实现电路，河童打算对核控制中心进行模块化改造，以实现核熔炉的维护。具体而言，河童打算将核控制中心设计成由若干个正六边形组成的巨大结构。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ohyfxv02.png)\n\n被赋予了神力的阿空可以依次激发其中的一些模块，而这些被激发的模块会快速影响到一定范围内的其他的模块。通过模块间的链接实现能量的产生。\n\n但是因为阿空脑袋空空，由于它已经激发了多次模块，它已经记不清每个模块当中产生的核融合程度了。你能帮帮它吗？", "description": "核控制中心可以看作由若干个正六边形模块组成的六边形阵列。阵列当中每个模块都可以储存核融合能量（一个非负整数）。左图就是一个核控制中心示意图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/78y7b98x.png)\n\n我们使用如下方式对控制中心中每个模块进行标号。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9ffz2m5o.png)\n\n以阵列中心为原点延伸出三根射线作为三根轴，每两根轴之间的夹角为 $120\\degree$。这三根轴将平面划分为了三个部分。每个模块都可以使用一个三元组 $(x,y,z)$ 描述它的坐标，表示从原点开始按如图所示的 $x,y,z$ 方向各走若干步之后到达的地方。为了防止出现多个坐标表示同一个模块的情况，做出如下规定：原点的坐标为 $(0,0,0)$；对于中心在坐标轴上的模块，它的坐标就是从原点向所在轴走过的距离；对于其他情况，我们将平面划分为了三个区域（如第二张图的红蓝绿三个区域），一个模块的坐标就是沿着它两侧的轴分别需要走的距离。例如模块 $P$ 的坐标为 $(2,4,0)$。容易发现，每个坐标唯一对应一个模块，一个模块唯一对应一个坐标。\n\n同时定义，两个模块的**距离**为从一个模块到另一个模块需要经过模块（包括起点和终点）的最少个数。在第一张图中，红色部分的模块到其中心距离均不超过 $3$，绿色部分的模块到其中心距离均不超过 $3$，而蓝色部分的模块到其中心距离均不超过 $2$。\n\n核控制中心可以视为到达原点距离不超过 $n$ 的模块组成的阵列。现在阿空会执行以下操作 $m$ 次：\n\n- $\\colorbox{f0f0f0}{\\verb!x y z r k!}$ ：激活坐标为 $(x,y,z)$ 的模块。它会使控制中心中到它距离不超过 $r$ 的**所有**的模块的核融合能量增加 $k$。保证 $(x,y,z)$ 在控制中心当中。\n\n现在需要求出，执行完 $m$ 个操作后，每个模块里核融合能量值。", "inputFormat": "- 第一行共两个正整数 $n,m$，分别表示控制中心的大小、操作个数。\n- 接下来 $m$ 行，每行有五个整数 $x_i,y_i,z_i,r_i,k_i$，表示将距离 $(x_i,y_i,z_i)$ 不超过 $r$ 的所有模块的核融合能量增加 $k_i$。", "outputFormat": "- 共一行，若干个整数。按照从左往右从上往下的顺序，依次输出每个模块当中核融合能量值。每两个值之间使用空格隔开。\n\n下图当中的红色箭头展示了「从左往右从上往下」的顺序。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vziqfo7l.png)", "hint": "样例 $2$ 见下发的附件 $\\textbf{\\textit{nuclear2.in/nuclear2.ans}}$。  \n样例 $3$ 见下发的附件 $\\textbf{\\textit{nuclear3.in/nuclear3.ans}}$。满足特殊性质 $\\text{A}$（见下文）。  \n样例 $4$ 见下发的附件 $\\textbf{\\textit{nuclear4.in/nuclear4.ans}}$。满足特殊性质 $\\text{B}$（见下文）。  \n样例 $5$ 见下发的附件 $\\textbf{\\textit{nuclear5.in/nuclear5.ans}}$。\n\n#### 样例 1 解释\n\n如图所示（所有未标出数字的模块的核融合能量值均为 $0$）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6y7bm2eb.png)\n\n\n\n按照从左往右、从上往下的顺序依次输出每个数值，即可得到答案。\n\n#### 数据范围及约定\n\n本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Task} & \\bm{n\\le } & \\bm{m\\le} & \\textbf{特殊性质} \\cr\\hline\n1\\sim 3 & 10 & 10 & \\text{A} \\cr\\hline\n4\\sim 7 & 100 & 300 & - \\cr\\hline\n8\\sim 10 & 800 & 3\\times 10^5 & \\text{B} \\cr\\hline\n11\\sim 14 & 800 & 3\\times 10^5 & \\text{A} \\cr\\hline\n15\\sim 20 & 800 & 3\\times 10^5 & - \\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证对于第 $i$ 次操作，被激活的模块到控制中心边缘上的模块的距离不小于 $r_i$。  \n**特殊性质** $\\textbf{B}$：保证对于第 $i$ 次操作，被激活的模块均为 $(0,0,0)$。\n\n对于全部数据，保证 $n\\le 800$，$m\\le 3\\times 10^5$，$1\\le k_i\\le 5\\times 10^3$，$1\\le r_i\\le 10^9$。每次激活的模块都在控制中心里。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-5」模块化核熔炉", "background": "为了通过使用核聚变获得能源，守矢神社在旧地狱修建了巨大的核融合控制中心。控制中心形如双层八卦炉，通过各种电路紧密地调控着核融合的精密运行。获得了八咫鸟力量的阿空会在核反应炉的中心点燃神火。\n\n但是正八边形的八卦炉并不利于进行拓展与维护。为了方便地实现电路，河童打算对核控制中心进行模块化改造，以实现核熔炉的维护。具体而言，河童打算将核控制中心设计成由若干个正六边形组成的巨大结构。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ohyfxv02.png)\n\n被赋予了神力的阿空可以依次激发其中的一些模块，而这些被激发的模块会快速影响到一定范围内的其他的模块。通过模块间的链接实现能量的产生。\n\n但是因为阿空脑袋空空，由于它已经激发了多次模块，它已经记不清每个模块当中产生的核融合程度了。你能帮帮它吗？", "description": "核控制中心可以看作由若干个正六边形模块组成的六边形阵列。阵列当中每个模块都可以储存核融合能量（一个非负整数）。左图就是一个核控制中心示意图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/78y7b98x.png)\n\n我们使用如下方式对控制中心中每个模块进行标号。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9ffz2m5o.png)\n\n以阵列中心为原点延伸出三根射线作为三根轴，每两根轴之间的夹角为 $120\\degree$。这三根轴将平面划分为了三个部分。每个模块都可以使用一个三元组 $(x,y,z)$ 描述它的坐标，表示从原点开始按如图所示的 $x,y,z$ 方向各走若干步之后到达的地方。为了防止出现多个坐标表示同一个模块的情况，做出如下规定：原点的坐标为 $(0,0,0)$；对于中心在坐标轴上的模块，它的坐标就是从原点向所在轴走过的距离；对于其他情况，我们将平面划分为了三个区域（如第二张图的红蓝绿三个区域），一个模块的坐标就是沿着它两侧的轴分别需要走的距离。例如模块 $P$ 的坐标为 $(2,4,0)$。容易发现，每个坐标唯一对应一个模块，一个模块唯一对应一个坐标。\n\n同时定义，两个模块的**距离**为从一个模块到另一个模块需要经过模块（包括起点和终点）的最少个数。在第一张图中，红色部分的模块到其中心距离均不超过 $3$，绿色部分的模块到其中心距离均不超过 $3$，而蓝色部分的模块到其中心距离均不超过 $2$。\n\n核控制中心可以视为到达原点距离不超过 $n$ 的模块组成的阵列。现在阿空会执行以下操作 $m$ 次：\n\n- $\\colorbox{f0f0f0}{\\verb!x y z r k!}$ ：激活坐标为 $(x,y,z)$ 的模块。它会使控制中心中到它距离不超过 $r$ 的**所有**的模块的核融合能量增加 $k$。保证 $(x,y,z)$ 在控制中心当中。\n\n现在需要求出，执行完 $m$ 个操作后，每个模块里核融合能量值。", "inputFormat": "- 第一行共两个正整数 $n,m$，分别表示控制中心的大小、操作个数。\n- 接下来 $m$ 行，每行有五个整数 $x_i,y_i,z_i,r_i,k_i$，表示将距离 $(x_i,y_i,z_i)$ 不超过 $r$ 的所有模块的核融合能量增加 $k_i$。", "outputFormat": "- 共一行，若干个整数。按照从左往右从上往下的顺序，依次输出每个模块当中核融合能量值。每两个值之间使用空格隔开。\n\n下图当中的红色箭头展示了「从左往右从上往下」的顺序。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vziqfo7l.png)", "hint": "样例 $2$ 见下发的附件 $\\textbf{\\textit{nuclear2.in/nuclear2.ans}}$。  \n样例 $3$ 见下发的附件 $\\textbf{\\textit{nuclear3.in/nuclear3.ans}}$。满足特殊性质 $\\text{A}$（见下文）。  \n样例 $4$ 见下发的附件 $\\textbf{\\textit{nuclear4.in/nuclear4.ans}}$。满足特殊性质 $\\text{B}$（见下文）。  \n样例 $5$ 见下发的附件 $\\textbf{\\textit{nuclear5.in/nuclear5.ans}}$。\n\n#### 样例 1 解释\n\n如图所示（所有未标出数字的模块的核融合能量值均为 $0$）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6y7bm2eb.png)\n\n\n\n按照从左往右、从上往下的顺序依次输出每个数值，即可得到答案。\n\n#### 数据范围及约定\n\n本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Task} & \\bm{n\\le } & \\bm{m\\le} & \\textbf{特殊性质} \\cr\\hline\n1\\sim 3 & 10 & 10 & \\text{A} \\cr\\hline\n4\\sim 7 & 100 & 300 & - \\cr\\hline\n8\\sim 10 & 800 & 3\\times 10^5 & \\text{B} \\cr\\hline\n11\\sim 14 & 800 & 3\\times 10^5 & \\text{A} \\cr\\hline\n15\\sim 20 & 800 & 3\\times 10^5 & - \\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证对于第 $i$ 次操作，被激活的模块到控制中心边缘上的模块的距离不小于 $r_i$。  \n**特殊性质** $\\textbf{B}$：保证对于第 $i$ 次操作，被激活的模块均为 $(0,0,0)$。\n\n对于全部数据，保证 $n\\le 800$，$m\\le 3\\times 10^5$，$1\\le k_i\\le 5\\times 10^3$，$1\\le r_i\\le 10^9$。每次激活的模块都在控制中心里。", "locale": "zh-CN"}}}
{"pid": "P8229", "type": "P", "difficulty": 5, "samples": [["4\n1 2 499122177\n3 2 499122177\n10 2 499122177\n1000000000000000000 100 16235235", "499122177\n748683267\n748683281\n565383148"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 抛硬币", "background": "", "description": "伊利找到了一个魔法数字 $K$，一个装满草莓的魔法篮子，还有一个魔法硬币。\n\n伊利注意到，当抛硬币时，它有 $P$ 的概率概率朝上。随后她抛了 $n$ 次硬币，如果硬币朝上篮子里的草莓会变成原来的 $K$ 倍。否则，她会吃掉篮子里的所有草莓，吃完后篮子会神奇地变出一颗新的草莓。\n\n伊利现在很好奇她在抛 $n$ 次硬币后期望会吃多少草莓。请你告诉她答案在 $\\bmod\\ 998244353$ 意义下的答案。", "inputFormat": "第一行一个数 $T$，表示数据组数。\n\n接下来 $T$ 行，每一行三个数表示 $n,K,P$。", "outputFormat": "$T$ 行，每行一个正整数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，满足 $1\\leq T\\leq 10^5$，$1\\leq n \\leq 10^{18}$，$0\\leq K,P<998244353$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round A CoinFlip](https://judge.agm-contest.com/public/problems/21/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 抛硬币", "background": "", "description": "伊利找到了一个魔法数字 $K$，一个装满草莓的魔法篮子，还有一个魔法硬币。\n\n伊利注意到，当抛硬币时，它有 $P$ 的概率概率朝上。随后她抛了 $n$ 次硬币，如果硬币朝上篮子里的草莓会变成原来的 $K$ 倍。否则，她会吃掉篮子里的所有草莓，吃完后篮子会神奇地变出一颗新的草莓。\n\n伊利现在很好奇她在抛 $n$ 次硬币后期望会吃多少草莓。请你告诉她答案在 $\\bmod\\ 998244353$ 意义下的答案。", "inputFormat": "第一行一个数 $T$，表示数据组数。\n\n接下来 $T$ 行，每一行三个数表示 $n,K,P$。", "outputFormat": "$T$ 行，每行一个正整数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，满足 $1\\leq T\\leq 10^5$，$1\\leq n \\leq 10^{18}$，$0\\leq K,P<998244353$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round A CoinFlip](https://judge.agm-contest.com/public/problems/21/text)。", "locale": "zh-CN"}}}
{"pid": "P8230", "type": "P", "difficulty": 3, "samples": [["1 5 5\n0 0 0 0 1\n0 0 0 0 0\n0 0 1 0 0\n0 0 0 0 1\n5 0 0 0 0", "4\n"], ["2 5 5\n0 0 -9 0 1\n0 0 -9 -9 -9\n0 0 1 0 0\n0 0 -1 0 1\n4 0 0 0 0\n0 0 0 0 1\n0 0 0 0 0\n0 0 3 0 0\n0 0 0 0 1\n5 0 0 0 0", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 地牢", "background": "", "description": "丹尼是 Dungeon Crawlers 的狂热粉丝。最近，他想知道电脑是否可以玩这个游戏，而他想让你帮他试一试。\n\n游戏分为 $L$ 个关卡，每个关卡都有 $N\\times M$ 个单元格。单元格有以下几种：\n\n* `0` 代表一个空单元格。\n\n* `-1` 代表通往下一个关卡的出口，进入下一关后初始位置在这个出口的位置，除了最后一关没有出口，每个关卡都只有一个出口。\n\n* `-9` 代表无法通过的障碍物。\n\n* `x` 一个整数 $x(1\\leq x\\leq 10^9)$ ，代表敌人的能力值。\n\n为了击败敌人，你的能力值需要大于或等于它的能力值。打败它后，你自己的能力值就会增加与被击败的敌人的能力值相等的值。你可以走上下左右四个单元格，有敌人的格子必须击败才能通过。出口是强制传送的，不能经过出口而不传送。\n\n假设初始的能力值为 $1$，你从地牢第一层左上角的 $(1,1)$ 开始，在最后一层的任意位置结束游戏。那么你能达到的最大能力值是多少？数据保证始终存在一条通往最后一关的路径。", "inputFormat": "第一行三个整数 $L,N,M$。\n\n接下来 $L$ 个矩阵，每个矩阵有 $N$ 行 $M$ 列共 $N\\times M$ 个整数表示单元格的种类。\n\n保证 $(1,1)$ 位置上数为 $0$。", "outputFormat": "一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq L\\times N\\times M\\leq 10^6$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round B Dungeon](https://judge.agm-contest.com/public/problems/7/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 地牢", "background": "", "description": "丹尼是 Dungeon Crawlers 的狂热粉丝。最近，他想知道电脑是否可以玩这个游戏，而他想让你帮他试一试。\n\n游戏分为 $L$ 个关卡，每个关卡都有 $N\\times M$ 个单元格。单元格有以下几种：\n\n* `0` 代表一个空单元格。\n\n* `-1` 代表通往下一个关卡的出口，进入下一关后初始位置在这个出口的位置，除了最后一关没有出口，每个关卡都只有一个出口。\n\n* `-9` 代表无法通过的障碍物。\n\n* `x` 一个整数 $x(1\\leq x\\leq 10^9)$ ，代表敌人的能力值。\n\n为了击败敌人，你的能力值需要大于或等于它的能力值。打败它后，你自己的能力值就会增加与被击败的敌人的能力值相等的值。你可以走上下左右四个单元格，有敌人的格子必须击败才能通过。出口是强制传送的，不能经过出口而不传送。\n\n假设初始的能力值为 $1$，你从地牢第一层左上角的 $(1,1)$ 开始，在最后一层的任意位置结束游戏。那么你能达到的最大能力值是多少？数据保证始终存在一条通往最后一关的路径。", "inputFormat": "第一行三个整数 $L,N,M$。\n\n接下来 $L$ 个矩阵，每个矩阵有 $N$ 行 $M$ 列共 $N\\times M$ 个整数表示单元格的种类。\n\n保证 $(1,1)$ 位置上数为 $0$。", "outputFormat": "一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq L\\times N\\times M\\leq 10^6$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round B Dungeon](https://judge.agm-contest.com/public/problems/7/text)。", "locale": "zh-CN"}}}
{"pid": "P8231", "type": "P", "difficulty": 6, "samples": [["5 6\n1 1 1 1 1 1\n1 1 1 1 1 1\n1 1 1 1 1 1\n1 1 1 1 1 1\n1 1 1 1 1 1\n5\n2 1 2 3 10\n2 2 5 6 15\n3 4 4 5 1\n1 2 5 4 13\n5 1 5 6 6\n4\n2\n5 6 1\n5 4 1\n3\n1 3 1\n2 2 1\n2 3 1\n1\n3 3 1\n2\n4 6 1\n1 1 1\n", "0 3 -1 1 0\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2022", "O2优化", "整体二分", "AGM"], "title": "[AGM 2022 资格赛] 农场", "background": "", "description": "你是一个资本家，你经营着一块大小为 $n\\times m$ 的方格形状的田地，第 $i$ 行第 $j$ 列上初始有 $a_{i,j}$ 数量的小麦。\n\n在这个田地上，你圈了 $Q$ 块矩形，每块矩形表示一个农场（农场之间可能有重叠的格子）。每一个农场的小麦数量等于这个农场内每个格子的小麦的数量之和，一个农场盈利当且仅当这个农场上的小麦数量大于等于这个农场盈利所需要的小麦数 $b_i$。\n\n不幸的是，接下来连续 $T$ 天都有强降雨，每一天都会有一些格子上的小麦数量变少。\n\n你需要对于每个农场，确定它能盈利几天，如果 $T$ 天后仍然盈利则输出 $-1$。\n\n", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行，每行 $m$ 个整数 $a_{i,j}$。\n\n下一行一个整数 $Q$。接下来 $Q$ 行，每行五个数 $l,r,L,R,b$ 表示第 $i$ 个农场的左上角坐标，右下角坐标以及盈利所需的小麦数。\n\n下一行一个整数 $T$。接下来 $T$ 段输入，每一段先输入一个 $p$ 表示这一天发生的事件，接下来 $p$ 行每一行三个整数 $x,y,z$ 表示 $(x,y)$ 格子上的小麦减少了 $z$。\n\n\n", "outputFormat": "一行 $Q$ 个整数，表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,m\\leq 500$，$1\\leq Q \\leq 50000$，$0\\leq a_{i,j}\\leq 10^9$，$1\\leq l<L\\leq n$，$1<r<R\\leq m$，$0\\leq b_i\\leq 10^{18}$，$1\\leq T \\leq 50000$，$1\\leq x\\leq n$，$1\\leq y\\leq m$，$1\\leq z\\leq 10^9$，$1\\leq \\sum p\\leq 10^5$。保证任何时刻 $z\\leq a_{x,y}$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round C TimeToFarm](https://judge.agm-contest.com/team/problems/10/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 农场", "background": "", "description": "你是一个资本家，你经营着一块大小为 $n\\times m$ 的方格形状的田地，第 $i$ 行第 $j$ 列上初始有 $a_{i,j}$ 数量的小麦。\n\n在这个田地上，你圈了 $Q$ 块矩形，每块矩形表示一个农场（农场之间可能有重叠的格子）。每一个农场的小麦数量等于这个农场内每个格子的小麦的数量之和，一个农场盈利当且仅当这个农场上的小麦数量大于等于这个农场盈利所需要的小麦数 $b_i$。\n\n不幸的是，接下来连续 $T$ 天都有强降雨，每一天都会有一些格子上的小麦数量变少。\n\n你需要对于每个农场，确定它能盈利几天，如果 $T$ 天后仍然盈利则输出 $-1$。\n\n", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行，每行 $m$ 个整数 $a_{i,j}$。\n\n下一行一个整数 $Q$。接下来 $Q$ 行，每行五个数 $l,r,L,R,b$ 表示第 $i$ 个农场的左上角坐标，右下角坐标以及盈利所需的小麦数。\n\n下一行一个整数 $T$。接下来 $T$ 段输入，每一段先输入一个 $p$ 表示这一天发生的事件，接下来 $p$ 行每一行三个整数 $x,y,z$ 表示 $(x,y)$ 格子上的小麦减少了 $z$。\n\n\n", "outputFormat": "一行 $Q$ 个整数，表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,m\\leq 500$，$1\\leq Q \\leq 50000$，$0\\leq a_{i,j}\\leq 10^9$，$1\\leq l<L\\leq n$，$1<r<R\\leq m$，$0\\leq b_i\\leq 10^{18}$，$1\\leq T \\leq 50000$，$1\\leq x\\leq n$，$1\\leq y\\leq m$，$1\\leq z\\leq 10^9$，$1\\leq \\sum p\\leq 10^5$。保证任何时刻 $z\\leq a_{x,y}$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round C TimeToFarm](https://judge.agm-contest.com/team/problems/10/text)。", "locale": "zh-CN"}}}
{"pid": "P8232", "type": "P", "difficulty": 4, "samples": [["4 4 1\n1 2 3 4\n1 2 3 4\n1 1 3 5\n1 1 4 0\n4 4 2\n0 0 0 0\n0 0 0 0\n0 0 0 0\n0 0 0 0", "6\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2022", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 2048 花园", "background": "", "description": "这是一个类似 2048 的游戏，你有一个 $n$ 行 $m$ 列的方格，每个方格上有一个数 $a_{i,j}$。\n\n你总共可以操作 $K$ 次魔法，每次操作之前，系统都会将行号最小的前提下最靠左的空格子的 $a$ 值变为 $1$，如果不存在这样的空格子，那么这次魔法被停止执行并且游戏结束。\n\n操作如下：你可以将每个格子向上/下/左/右“移动”。向一个方向移动的定义是，先将所有格子向那个方向移动直到不能移动，然后从对应的方向边界处开始不断合并两个值相同的格子然后生成一个新的值为原来的值 $+1$ 的格子。如下图即为一次完整的操作（包括操作前系统的改动）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ycplqbpz.png)\n\n现在你想最大化 $K$ 次魔法后（假设游戏中途结束你的分数依然可以结算）你的每个格子上的最大值，请你求出这个值。", "inputFormat": "输入有若干组数据，每组数据第一行三个数 $n,m,K$。\n\n接下来 $n$ 行每行 $m$ 个数 $a_{i,j}$。", "outputFormat": "对于每组数据，输出答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,m\\leq 2500$，$1\\leq \\sum (n\\times m)\\leq 2500$，$1\\leq K\\times K \\leq \\min(n,m)$，$0\\leq a_{i,j}\\leq 10^6$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round D Rainy Garden](https://judge.agm-contest.com/public/problems/18/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 2048 花园", "background": "", "description": "这是一个类似 2048 的游戏，你有一个 $n$ 行 $m$ 列的方格，每个方格上有一个数 $a_{i,j}$。\n\n你总共可以操作 $K$ 次魔法，每次操作之前，系统都会将行号最小的前提下最靠左的空格子的 $a$ 值变为 $1$，如果不存在这样的空格子，那么这次魔法被停止执行并且游戏结束。\n\n操作如下：你可以将每个格子向上/下/左/右“移动”。向一个方向移动的定义是，先将所有格子向那个方向移动直到不能移动，然后从对应的方向边界处开始不断合并两个值相同的格子然后生成一个新的值为原来的值 $+1$ 的格子。如下图即为一次完整的操作（包括操作前系统的改动）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ycplqbpz.png)\n\n现在你想最大化 $K$ 次魔法后（假设游戏中途结束你的分数依然可以结算）你的每个格子上的最大值，请你求出这个值。", "inputFormat": "输入有若干组数据，每组数据第一行三个数 $n,m,K$。\n\n接下来 $n$ 行每行 $m$ 个数 $a_{i,j}$。", "outputFormat": "对于每组数据，输出答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,m\\leq 2500$，$1\\leq \\sum (n\\times m)\\leq 2500$，$1\\leq K\\times K \\leq \\min(n,m)$，$0\\leq a_{i,j}\\leq 10^6$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round D Rainy Garden](https://judge.agm-contest.com/public/problems/18/text)。", "locale": "zh-CN"}}}
{"pid": "P8233", "type": "P", "difficulty": 5, "samples": [["4\n1 2 2\n2 1 5\n1 3 5\n2 1 5", "1\n10"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2022", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 区间", "background": "", "description": "给你一个一行无限列的方格，刚开始每个格子都是白色。\n\n你需要维护以下两种操作：\n\n* `1 l r`：将 $l$ 到 $r$ 中每个格子都填成黑色。\n\n* `2 l r`：查询 $[l,r]$ 有多少个子区间满足区间内格子都是黑色。 \n", "inputFormat": "第一行一个整数 $n$ 表示操作次数。\n\n接下来 $n$ 行，每行三个数 $opt,l,r$ 表示操作种类和区间。", "outputFormat": "对于每个 $2$ 操作输出一行一个整数表示答案在 $\\bmod\\ 1000000007$ 意义下的值。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^6$，$1\\leq opt\\leq 2$，$1\\leq l\\leq r\\leq 10^{18}$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round E Intervals](https://judge.agm-contest.com/public/problems/4/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 区间", "background": "", "description": "给你一个一行无限列的方格，刚开始每个格子都是白色。\n\n你需要维护以下两种操作：\n\n* `1 l r`：将 $l$ 到 $r$ 中每个格子都填成黑色。\n\n* `2 l r`：查询 $[l,r]$ 有多少个子区间满足区间内格子都是黑色。 \n", "inputFormat": "第一行一个整数 $n$ 表示操作次数。\n\n接下来 $n$ 行，每行三个数 $opt,l,r$ 表示操作种类和区间。", "outputFormat": "对于每个 $2$ 操作输出一行一个整数表示答案在 $\\bmod\\ 1000000007$ 意义下的值。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^6$，$1\\leq opt\\leq 2$，$1\\leq l\\leq r\\leq 10^{18}$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round E Intervals](https://judge.agm-contest.com/public/problems/4/text)。", "locale": "zh-CN"}}}
{"pid": "P8234", "type": "P", "difficulty": 6, "samples": [["4\n0\n5\n5 4 3 0\n0 1 2 5\n0 2 3 5\n5 1 4 0\n0 1 5\n0 2 5\n5 3 0\n0 4 5", "5\n1 2 3 2 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "Special Judge", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 拼图", "background": "", "description": "你有一张形状为正 $n$ 边形的柱形拼图，它由一个中间块，$n$ 个边缘块和 $n$ 个角块拼成，正 $n$ 边形的每条边上有两个角块和一个边缘块。（如下图即为 $n=5$ 时拼图的俯视图，蓝色为角块，红色为边缘块，灰色为中间块）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k83mqxkd.png)\n\n每个边缘块有顶部底部和向外裸露的面总共三个面上是有颜色的，每个面上的颜色不一定相同。而每个角块上向外裸露的面有两个，所以总共四个面上是有颜色的，每个面上的颜色也不一定相同。而中间块只有顶部和底部是有颜色的。\n\n我们将角块与边缘块逆时针标号，正 $n$ 边形的第 $i(i<n)$ 条边的侧面由第 $i$ 块角块的逆时针方向侧面，第 $i$ 块边缘块与第 $i+1$ 块的角块的顺时针方向侧面组成。特别地，第 $n$ 条边的侧面由第 $n$ 块角块的逆时针方向侧面，第 $n$ 块边缘块与第 $1$ 块的角块的顺时针方向侧面组成。\n\n接着，你可以执行如下的操作：选择拼图的一条边并将两边的角块交换后上下反转（注意此时两个侧面会互换）并且边上的边缘块也上下反转。\n\n我们称一个平面是整齐的当且仅当平面上颜色均相同，现在你要通过若干次操作，来使得这个拼图上的每个面都是整齐的。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来两个正整数 $col_{tp},col_{bt}$ 分别表示中间块顶部的颜色和底部的颜色。\n\n接下来 $n$ 行，每行四个整数 $ct_i,cl_i,cr_i,cb_i$ 分别表示第 $i$ 个角块的顶部颜色，逆时针方向侧面颜色，顺时针方向侧面颜色以及底部颜色。\n\n接下来 $n$ 行，每行三个整数 $et_i,es_i,eb_i$ 分别表示第 $i$ 个边缘块的顶部颜色，侧面颜色以及底部颜色。\n\n\n", "outputFormat": "如果无解，输出 $-1$。\n\n否则先输出一行一个整数表示操作次数 $m$，接下来一行 $m$ 个整数表示第 $i$ 操作的边编号。\n\n你需要保证操作次数不超过 $100000$，多解输出任意一种即可。", "hint": "#### 样例解释\n\n如下图\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/958k6wj3.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $4\\leq n \\leq 100$，$0\\leq ct_i,cl_i,cr_i,cb_i\\leq n+1$，$\\{es_1,es_2,...,es_n,col_{tp},col_{bt}\\}$ 构成一个 $0\\sim n+1$ 的排列。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round F Kube](https://judge.agm-contest.com/public/problems/20/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 拼图", "background": "", "description": "你有一张形状为正 $n$ 边形的柱形拼图，它由一个中间块，$n$ 个边缘块和 $n$ 个角块拼成，正 $n$ 边形的每条边上有两个角块和一个边缘块。（如下图即为 $n=5$ 时拼图的俯视图，蓝色为角块，红色为边缘块，灰色为中间块）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k83mqxkd.png)\n\n每个边缘块有顶部底部和向外裸露的面总共三个面上是有颜色的，每个面上的颜色不一定相同。而每个角块上向外裸露的面有两个，所以总共四个面上是有颜色的，每个面上的颜色也不一定相同。而中间块只有顶部和底部是有颜色的。\n\n我们将角块与边缘块逆时针标号，正 $n$ 边形的第 $i(i<n)$ 条边的侧面由第 $i$ 块角块的逆时针方向侧面，第 $i$ 块边缘块与第 $i+1$ 块的角块的顺时针方向侧面组成。特别地，第 $n$ 条边的侧面由第 $n$ 块角块的逆时针方向侧面，第 $n$ 块边缘块与第 $1$ 块的角块的顺时针方向侧面组成。\n\n接着，你可以执行如下的操作：选择拼图的一条边并将两边的角块交换后上下反转（注意此时两个侧面会互换）并且边上的边缘块也上下反转。\n\n我们称一个平面是整齐的当且仅当平面上颜色均相同，现在你要通过若干次操作，来使得这个拼图上的每个面都是整齐的。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来两个正整数 $col_{tp},col_{bt}$ 分别表示中间块顶部的颜色和底部的颜色。\n\n接下来 $n$ 行，每行四个整数 $ct_i,cl_i,cr_i,cb_i$ 分别表示第 $i$ 个角块的顶部颜色，逆时针方向侧面颜色，顺时针方向侧面颜色以及底部颜色。\n\n接下来 $n$ 行，每行三个整数 $et_i,es_i,eb_i$ 分别表示第 $i$ 个边缘块的顶部颜色，侧面颜色以及底部颜色。\n\n\n", "outputFormat": "如果无解，输出 $-1$。\n\n否则先输出一行一个整数表示操作次数 $m$，接下来一行 $m$ 个整数表示第 $i$ 操作的边编号。\n\n你需要保证操作次数不超过 $100000$，多解输出任意一种即可。", "hint": "#### 样例解释\n\n如下图\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/958k6wj3.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $4\\leq n \\leq 100$，$0\\leq ct_i,cl_i,cr_i,cb_i\\leq n+1$，$\\{es_1,es_2,...,es_n,col_{tp},col_{bt}\\}$ 构成一个 $0\\sim n+1$ 的排列。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round F Kube](https://judge.agm-contest.com/public/problems/20/text)。", "locale": "zh-CN"}}}
