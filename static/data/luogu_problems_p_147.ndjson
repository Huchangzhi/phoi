{"pid": "P3978", "type": "P", "difficulty": 6, "samples": [["1", "1.000000000"], ["3", "1.200000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "2015", "各省省选", "Special Judge", "Catalan 数", "生成函数", "期望", "天津"], "title": "[TJOI2015] 概率论", "background": "", "description": "为了提高智商，ZJY 开始学习概率论。有一天，她想到了这样一个问题：对于一棵随机生成的 $n$ 个结点的有根二叉树（所有互相不同构的形态等概率出现），它的叶子节点数的期望是多少呢？\n\n判断两棵树是否同构的伪代码如下：\n\n$$\n\\def\\arraystretch{1.2}\n    \\begin{array}{ll}\n    \\hline\n    \\textbf{算法 1}&\\text{Check}(T1,T2) \\\\\n    \\hline\n    1&\\textbf{Require: }\\text{ 两棵树的节点}T1,T2\\\\\n    2&\\qquad\\textbf{if}\\ \\ T1=\\text{null}\\textbf{ or }T2=\\text{null}\\textbf{ then }\\\\\n    3&\\qquad\\qquad\\textbf{return}\\ \\ T1=\\text{null}\\textbf{ and }T2=\\text{null}\\\\\n    4&\\qquad\\textbf{else}\\\\\n    5&\\qquad\\qquad\\textbf{return}\\ \\text{Check}(T1\\to\\mathit{leftson},T2\\to\\mathit{leftson}) \\\\ \n    & \\qquad\\qquad\\qquad \\textbf{ and }\\text{Check}(T1\\to\\mathit{rightson},T2\\to\\mathit{rightson})\\\\\n    6&\\qquad\\textbf{endif}\\\\\n    \\hline\n    \\end{array} \n    $$\n\n", "inputFormat": "输入一个正整数 $n$，表示有根树的结点数。\n", "outputFormat": "输出这棵树期望的叶子节点数，要求误差小于 $10^{-9}$。\n", "hint": "## 数据范围\n\n对于 $30\\%$ 的数据，$1 \\le n \\le 10$。\n\n对于 $70\\%$ 的数据，$1 \\le n \\le 100$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2015] Probability Theory", "background": "", "description": "To boost her IQ, ZJY started studying probability theory. One day, she came up with this question: among all non-isomorphic rooted binary trees with $n$ nodes, chosen uniformly at random, what is the expected number of leaf nodes?\n\nThe pseudocode to check whether two trees are isomorphic is as follows:\n$$\n\\def\\arraystretch{1.2}\n    \\begin{array}{ll}\n    \\hline\n    \\textbf{Algorithm 1}&\\text{Check}(T1,T2) \\\\\n    \\hline\n    1&\\textbf{Require: }\\text{ nodes }T1,T2\\text{ of the two trees}\\\\\n    2&\\qquad\\textbf{if}\\ \\ T1=\\text{null}\\textbf{ or }T2=\\text{null}\\textbf{ then }\\\\\n    3&\\qquad\\qquad\\textbf{return}\\ \\ T1=\\text{null}\\textbf{ and }T2=\\text{null}\\\\\n    4&\\qquad\\textbf{else}\\\\\n    5&\\qquad\\qquad\\textbf{return}\\ \\text{Check}(T1\\to\\mathit{leftson},T2\\to\\mathit{leftson}) \\\\ \n    & \\qquad\\qquad\\qquad \\textbf{ and }\\text{Check}(T1\\to\\mathit{rightson},T2\\to\\mathit{rightson})\\\\\n    6&\\qquad\\textbf{endif}\\\\\n    \\hline\n    \\end{array} \n    $$", "inputFormat": "Input a positive integer $n$, the number of nodes in the rooted tree.", "outputFormat": "Output the expected number of leaf nodes of the tree. The error must be less than $10^{-9}$.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $1 \\le n \\le 10$.\n- For $70\\%$ of the testdata, $1 \\le n \\le 100$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2015] 概率论", "background": "", "description": "为了提高智商，ZJY 开始学习概率论。有一天，她想到了这样一个问题：对于一棵随机生成的 $n$ 个结点的有根二叉树（所有互相不同构的形态等概率出现），它的叶子节点数的期望是多少呢？\n\n判断两棵树是否同构的伪代码如下：\n\n$$\n\\def\\arraystretch{1.2}\n    \\begin{array}{ll}\n    \\hline\n    \\textbf{算法 1}&\\text{Check}(T1,T2) \\\\\n    \\hline\n    1&\\textbf{Require: }\\text{ 两棵树的节点}T1,T2\\\\\n    2&\\qquad\\textbf{if}\\ \\ T1=\\text{null}\\textbf{ or }T2=\\text{null}\\textbf{ then }\\\\\n    3&\\qquad\\qquad\\textbf{return}\\ \\ T1=\\text{null}\\textbf{ and }T2=\\text{null}\\\\\n    4&\\qquad\\textbf{else}\\\\\n    5&\\qquad\\qquad\\textbf{return}\\ \\text{Check}(T1\\to\\mathit{leftson},T2\\to\\mathit{leftson}) \\\\ \n    & \\qquad\\qquad\\qquad \\textbf{ and }\\text{Check}(T1\\to\\mathit{rightson},T2\\to\\mathit{rightson})\\\\\n    6&\\qquad\\textbf{endif}\\\\\n    \\hline\n    \\end{array} \n    $$\n\n", "inputFormat": "输入一个正整数 $n$，表示有根树的结点数。\n", "outputFormat": "输出这棵树期望的叶子节点数，要求误差小于 $10^{-9}$。\n", "hint": "## 数据范围\n\n对于 $30\\%$ 的数据，$1 \\le n \\le 10$。\n\n对于 $70\\%$ 的数据，$1 \\le n \\le 100$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P3979", "type": "P", "difficulty": 6, "samples": [["3 7\n1 2\n1 3\n1 2 3\n1\n3 1\n2 1 1 6\n3 1\n2 2 2 5\n3 1\n2 3 3 4\n3 1", "1\n2\n3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "倍增", "最近公共祖先 LCA", "树链剖分"], "title": "遥远的国度", "background": "", "description": "`zcwwzdjn` 在追杀 `zhx` ，而 `zhx` 逃入了一个遥远的国度。当 `zcwwzdjn` 准备进入遥远的国度继续追杀时，守护神 `RapiD` 阻拦了 `zcwwzdjn` 的去路，他需要 `zcwwzdjn` 完成任务后才能进入遥远的国度继续追杀。\n\n问题是这样的：遥远的国度有 $n$ 个城市，这些城市之间由一些路连接且这些城市构成了一颗树。这个国度有一个首都，我们可以把这个首都看做整棵树的根，但遥远的国度比较奇怪，首都是随时有可能变为另外一个城市的。遥远的国度的每个城市有一个防御值，第 $i$ 个的防御值为 $val_i$，有些时候 `RapiD` 会使得某两个城市之间的路径上的所有城市的防御值都变为某个值。\n\n`RapiD` 想知道在某个时候，如果把首都看做整棵树的根的话，那么以某个城市为根的子树的所有城市的防御值最小是多少。\n\n由于 `RapiD` 无法解决这个问题，所以他拦住了 `zcwwzdjn` 希望他能帮忙。但 `zcwwzdjn` 还要追杀 `zhx`，所以这个重大的问题就被转交到了你的手上。", "inputFormat": "第 $1$ 行两个整数 $n\\ m$，代表城市个数和操作数。\n\n第 $2$ 行至第 $n$ 行，每行两个整数 $u\\ v$，代表城市 $u$ 和城市 $v$ 之间有一条路。\n\n第 $n+1$ 行，有 $n$ 个整数，第 $i$ 个代表第 $i$ 个点的初始防御值 $val_i$。\n\n第 $n+2$ 行一个整数 $id$，代表初始的首都为 $id$。\n\n第 $n+3$ 行至第 $n+m+2$ 行，首先有一个整数 $opt$。\n\n如果 $opt=1$，接下来有一个整数 $id$，代表把首都修改为 $id$；\n\n如果 $opt=2$，接下来有三个整数 $x\\ y\\ v$，代表将 $x\\ y$ 路径上的所有城市的防御值修改为 $v$；\n\n如果 $opt=3$，接下来有一个整数 $id$，代表询问以城市 $id$ 为根的子树中的最小防御值。", "outputFormat": "对于每个 $opt=3$ 的操作，输出一行代表对应子树的最小点权值。", "hint": "对于 $20\\%$ 的数据，$n\\le 1000,m\\le 1000$。\n\n对于另外 $10\\%$ 的数据，$n\\le 100000,m\\le 100000$，保证修改为单点修改。\n\n对于另外 $10\\%$ 的数据，$n\\le100000,m \\le 100000$，保证树为一条链。\n\n对于另外 $10\\%$ 的数据，$n\\le 100000,m\\le100000$，没有修改首都的操作。\n\n对于 $100\\%$ 的数据，$1 \\leq n\\le 100000,1 \\leq m \\le 100000,0<val_i<2^{31}$。", "locale": "zh-CN", "translations": {"en": {"title": "A Distant Kingdom", "background": "", "description": "`zcwwzdjn` is hunting down `zhx`, and `zhx` has fled to a distant kingdom. When `zcwwzdjn` is about to enter the distant kingdom to continue the pursuit, the guardian `RapiD` blocks his way. He must complete a task before he can enter the distant kingdom and continue the chase.\n\nHere is the problem: the distant kingdom has $n$ cities. These cities are connected by some roads and they form a tree. The kingdom has a capital, and we can regard this capital as the root of the whole tree; however, the capital may change to another city at any time. Each city has a defense value; the $i$-th city's defense value is $val_i$. Sometimes `RapiD` will set the defense values of all cities on the path between two cities to a certain value.\n\n`RapiD` wants to know, at some moment, if we regard the capital as the root of the whole tree, then what is the minimum defense value among all cities in the subtree rooted at some city.\n\nSince `RapiD` cannot solve this, he stopped `zcwwzdjn` hoping he could help. But `zcwwzdjn` still needs to hunt down `zhx`, so this important problem has been handed over to you.", "inputFormat": "Line $1$: two integers $n\\ m$, representing the number of cities and the number of operations.\n\nLines $2$ to $n$: each line contains two integers $u\\ v$, meaning there is a road between city $u$ and city $v$.\n\nLine $n+1$: $n$ integers; the $i$-th integer is the initial defense value $val_i$ of the $i$-th city.\n\nLine $n+2$: one integer $id$, meaning the initial capital is $id$.\n\nLines $n+3$ to $n+m+2$: first there is an integer $opt$.\n- If $opt=1$, then there is an integer $id$, meaning the capital is updated to $id$.\n- If $opt=2$, then there are three integers $x\\ y\\ v$, meaning the defense values of all cities on the path $x\\ y$ are set to $v$.\n- If $opt=3$, then there is an integer $id$, meaning you need to query the minimum defense value in the subtree rooted at city $id$ (with the current capital regarded as the root of the whole tree).", "outputFormat": "For each $opt=3$ operation, output one line containing the minimum defense value in the corresponding subtree.", "hint": "For $20\\%$ of the testdata, $n\\le 1000,m\\le 1000$.\n\nFor another $10\\%$ of the testdata, $n\\le 100000,m\\le 100000$, and updates are guaranteed to be point updates.\n\nFor another $10\\%$ of the testdata, $n\\le100000,m \\le 100000$, and the tree is guaranteed to be a chain.\n\nFor another $10\\%$ of the testdata, $n\\le 100000,m\\le100000$, and there are no operations that change the capital.\n\nFor $100\\%$ of the testdata, $1 \\leq n\\le 100000,1 \\leq m \\le 100000,0<val_i<2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "遥远的国度", "background": "", "description": "`zcwwzdjn` 在追杀 `zhx` ，而 `zhx` 逃入了一个遥远的国度。当 `zcwwzdjn` 准备进入遥远的国度继续追杀时，守护神 `RapiD` 阻拦了 `zcwwzdjn` 的去路，他需要 `zcwwzdjn` 完成任务后才能进入遥远的国度继续追杀。\n\n问题是这样的：遥远的国度有 $n$ 个城市，这些城市之间由一些路连接且这些城市构成了一颗树。这个国度有一个首都，我们可以把这个首都看做整棵树的根，但遥远的国度比较奇怪，首都是随时有可能变为另外一个城市的。遥远的国度的每个城市有一个防御值，第 $i$ 个的防御值为 $val_i$，有些时候 `RapiD` 会使得某两个城市之间的路径上的所有城市的防御值都变为某个值。\n\n`RapiD` 想知道在某个时候，如果把首都看做整棵树的根的话，那么以某个城市为根的子树的所有城市的防御值最小是多少。\n\n由于 `RapiD` 无法解决这个问题，所以他拦住了 `zcwwzdjn` 希望他能帮忙。但 `zcwwzdjn` 还要追杀 `zhx`，所以这个重大的问题就被转交到了你的手上。", "inputFormat": "第 $1$ 行两个整数 $n\\ m$，代表城市个数和操作数。\n\n第 $2$ 行至第 $n$ 行，每行两个整数 $u\\ v$，代表城市 $u$ 和城市 $v$ 之间有一条路。\n\n第 $n+1$ 行，有 $n$ 个整数，第 $i$ 个代表第 $i$ 个点的初始防御值 $val_i$。\n\n第 $n+2$ 行一个整数 $id$，代表初始的首都为 $id$。\n\n第 $n+3$ 行至第 $n+m+2$ 行，首先有一个整数 $opt$。\n\n如果 $opt=1$，接下来有一个整数 $id$，代表把首都修改为 $id$；\n\n如果 $opt=2$，接下来有三个整数 $x\\ y\\ v$，代表将 $x\\ y$ 路径上的所有城市的防御值修改为 $v$；\n\n如果 $opt=3$，接下来有一个整数 $id$，代表询问以城市 $id$ 为根的子树中的最小防御值。", "outputFormat": "对于每个 $opt=3$ 的操作，输出一行代表对应子树的最小点权值。", "hint": "对于 $20\\%$ 的数据，$n\\le 1000,m\\le 1000$。\n\n对于另外 $10\\%$ 的数据，$n\\le 100000,m\\le 100000$，保证修改为单点修改。\n\n对于另外 $10\\%$ 的数据，$n\\le100000,m \\le 100000$，保证树为一条链。\n\n对于另外 $10\\%$ 的数据，$n\\le 100000,m\\le100000$，没有修改首都的操作。\n\n对于 $100\\%$ 的数据，$1 \\leq n\\le 100000,1 \\leq m \\le 100000,0<val_i<2^{31}$。", "locale": "zh-CN"}}}
{"pid": "P3980", "type": "P", "difficulty": 6, "samples": [["3 3\n2 3 4\n1 2 2\n2 3 5\n3 3 2", "14"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "NOI", "网络流", "图论建模", "费用流", "线性规划"], "title": "[NOI2008] 志愿者招募", "background": "", "description": "申奥成功后，布布经过不懈努力，终于成为奥组委下属公司人力资源部门的主管。布布刚上任就遇到了一个难题：为即将启动的奥运新项目招募一批短期志愿者。经过估算，这个项目需要 $n$ 天才能完成，其中第 $i$ 天至少需要 $a_i$ 个人。布布通过了解得知，一共有 $m$ 类志愿者可以招募。其中第 $i$ 类可以从第 $s_i$ 天工作到第 $t_i$ 天，招募费用是每人 $c_i$ 元。新官上任三把火，为了出色地完成自己的工作，布布希望用尽量少的费用招募足够的志愿者，但这并不是他的特长！于是布布找到了你，希望你帮他设计一种最优的招募方案。", "inputFormat": "第一行包含两个整数 $n,m$，表示完成项目的天数和可以招募的志愿者的种类。接下来的一行中包含 $n$ 个非负整数，表示每天至少需要的志愿者人数。 接下来的 $m$ 行中每行包含三个整数 $s_i, t_i, c_i$，含义如上文所述。为了方便起见，我们可以认为每类志愿者的数量都是无限多的。保证存在可行的招募方案。", "outputFormat": "仅包含一个整数，表示你所设计的最优方案的总费用。\n", "hint": "$1\\leq n\\leq 1000$，$1\\leq m\\leq 10000$，题目中其他所涉及的数据均不超过 $2^{31}-1$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2008] Volunteer Recruitment", "background": "", "description": "After the successful Olympic bid, through persistent effort, Bubu finally became the head of the HR department of a company under the Organizing Committee. On his first day, he faced a challenge: recruiting a group of short-term volunteers for a new Olympic project. It is estimated that the project will take $n$ days to complete, and on day $i$, at least $a_i$ people are needed.\n\nThere are $m$ types of volunteers available. Type $i$ can work from day $s_i$ to day $t_i$ (inclusive), and the recruitment cost is $c_i$ yuan per person. Eager to excel in his new role, Bubu wants to recruit enough volunteers at the minimum possible cost, but this is not his strong suit. He turns to you to design an optimal recruitment plan.\n\nFor convenience, assume the number of volunteers of each type is unlimited. It is guaranteed that there exists a feasible recruitment plan.", "inputFormat": "- The first line contains two integers $n, m$, denoting the number of days needed to complete the project and the number of available volunteer types.\n- The second line contains $n$ non-negative integers, denoting the minimum number of volunteers required for each day.\n- Each of the next $m$ lines contains three integers $s_i, t_i, c_i$, as described above.", "outputFormat": "Output a single integer, the total cost of your optimal plan.", "hint": "Constraints: $1 \\le n \\le 1000$, $1 \\le m \\le 10000$, and all other quantities involved do not exceed $2^{31} - 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2008] 志愿者招募", "background": "", "description": "申奥成功后，布布经过不懈努力，终于成为奥组委下属公司人力资源部门的主管。布布刚上任就遇到了一个难题：为即将启动的奥运新项目招募一批短期志愿者。经过估算，这个项目需要 $n$ 天才能完成，其中第 $i$ 天至少需要 $a_i$ 个人。布布通过了解得知，一共有 $m$ 类志愿者可以招募。其中第 $i$ 类可以从第 $s_i$ 天工作到第 $t_i$ 天，招募费用是每人 $c_i$ 元。新官上任三把火，为了出色地完成自己的工作，布布希望用尽量少的费用招募足够的志愿者，但这并不是他的特长！于是布布找到了你，希望你帮他设计一种最优的招募方案。", "inputFormat": "第一行包含两个整数 $n,m$，表示完成项目的天数和可以招募的志愿者的种类。接下来的一行中包含 $n$ 个非负整数，表示每天至少需要的志愿者人数。 接下来的 $m$ 行中每行包含三个整数 $s_i, t_i, c_i$，含义如上文所述。为了方便起见，我们可以认为每类志愿者的数量都是无限多的。保证存在可行的招募方案。", "outputFormat": "仅包含一个整数，表示你所设计的最优方案的总费用。\n", "hint": "$1\\leq n\\leq 1000$，$1\\leq m\\leq 10000$，题目中其他所涉及的数据均不超过 $2^{31}-1$。", "locale": "zh-CN"}}}
{"pid": "P3981", "type": "P", "difficulty": 6, "samples": [["2 2 2", "1"], ["2 14 5", "12"]], "limits": {"time": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "递推", "2017", "Fibonacci 数列", "矩阵乘法", "构造"], "title": "琅泽难题", "background": "```cpp\n万事万物总是那么巧妙，数学海洋令我无限徜徉，在那一瞬，我又发现了美。\n```\n真程海洋的伟大数学家**琅泽**响应真程海洋殿主的号召，参与了这次出题。\n\n根据他的思考与推算，出了一道有意思的题目，以下是他给你们的话：\n", "description": "这个题目的灵感来自于这组数据：\n\n ![](https://cdn.luogu.com.cn/upload/pic/9088.png) \n\n这组数据采用**描述法**的规律，在第$ n+1 $层从左到右描述第$ n $层的数据，描述规律如下：从左到右描述第$ n $层的数据，从第一个数据开始，每当碰到连续的$ a_1 $个$ b_1 $时，将$ a_1\\,b_1 $作为新的两个数据写在第$ n+1 $层的最后（这个最后是接在最后一个数据后面，如果第$ n+1 $层本来没有数据，则此时的最后即为开头），**紧接着**再描述接下来连续的$ a_2 $个$ b_2 $（$ b_1\\neq b_2 $），往后亦如此，直到所有数据被描述完毕，则此时第$ n+1 $层也构造完毕，此处的$ n $为正整数。\n\n现在，我有一个新的想法了，给定一个**初始数据** $ Q $（初始数据在第一层，且第一层仅有一个数据——初始数据$ Q $），按照**类似于**上述规律的规律（描述法）构造一组数据，称为“琅泽阵”。我定义的规律为：在奇数层遵循$ A $规律，在偶数层遵循$ B $规律。具体表现如下图：\n\n ![](https://cdn.luogu.com.cn/upload/pic/9091.png) \n\n上图是当初始数据为$ 1 $时呈现的部分琅泽阵，至于是什么规律，就需要你去探究。\n\n### 但是！！！\n\n这还不是最终目的，我要考的是，在第$ i $层中，有多少个$ x $（我们定义初始数据所在的层数为第一层）？\n", "inputFormat": "输入仅一行，包含三个整数$ Q $和$ i $以及$ x $，每两个数据之间有一个空格。\n\n$ Q $作为该琅泽阵的初始数据。\n", "outputFormat": "输出仅一行，包含一个整数，表示在第$ i $层中，$ x $的数量。\n\n由于输出数据较大，请将输出数据对$ 20171111 $取模（即原始输出数据除以$ 20171111 $后取其余数作为最终输出数据）。\n", "hint": "### 样例一说明：\n\n构建出来的琅泽阵（一小部分）为：\n\n ![](https://cdn.luogu.com.cn/upload/pic/10486.png) \n\n故第$ 2 $层中$ 2 $的数量为$ 1 $。\n\n### 注意：\n\n所有数据均为整数；\n\n如果你毫无思路，你可以选择解决一些子问题；\n\n以下是各个测试点中，输入数据的范围大小：\n\n![](https://cdn.luogu.com.cn/upload/pic/10333.png)\n", "locale": "zh-CN", "translations": {"en": {"title": "Langze's Puzzle", "background": "```cpp\n万事万物总是那么巧妙，数学海洋令我无限徜徉，在那一瞬，我又发现了美。\n```\nThe great mathematician Langze of Zhencheng Ocean responded to the call of the Hall Master of Zhencheng Ocean and took part in making this problem.\n\nBased on his thinking and calculations, he created an interesting problem. Here is his message for you:", "description": "The inspiration for this problem comes from the following data:\n\n![](https://cdn.luogu.com.cn/upload/pic/9088.png)\n\nThis data follows the “description method” rule: on the $ n+1 $-th layer, describe the data of the $ n $-th layer from left to right. The rule is as follows: starting from the first datum, whenever you encounter a run of $ a_1 $ consecutive $ b_1 $, write $ a_1\\,b_1 $ as two new data at the end of the $ n+1 $-th layer (the “end” here means appended after the last datum; if the $ n+1 $-th layer has no data yet, then this “end” is the beginning). Then, immediately describe the next run of $ a_2 $ consecutive $ b_2 $ ($ b_1 \\neq b_2 $), and so on, until all data have been fully described. At that point, the $ n+1 $-th layer is constructed. Here $ n $ is a positive integer.\n\nNow, I have a new idea. Given an initial datum $ Q $ (the initial datum is on the first layer, and the first layer contains only one datum — the initial datum $ Q $), construct a data array using a rule similar to the one above (the description method), called the “Langze Array.” My rule is: on odd-numbered layers follow rule $ A $, and on even-numbered layers follow rule $ B $. See the figure below:\n\n![](https://cdn.luogu.com.cn/upload/pic/9091.png)\n\nThe above shows part of the Langze Array when the initial datum is $ 1 $. As for what the exact rules are, that is for you to explore.\n\nHowever!!!\n\nThat is not the final goal. What I want you to find is: on the $ i $-th layer, how many $ x $ are there (we define the layer containing the initial datum as the first layer)?", "inputFormat": "The input contains only one line with three integers $ Q $, $ i $, and $ x $, separated by single spaces.\n\n$ Q $ is the initial datum of the Langze Array.", "outputFormat": "Output a single line with one integer: the count of $ x $ on the $ i $-th layer.\n\nSince the output can be large, output the result modulo $ 20171111 $ (that is, take the remainder after dividing the original result by $ 20171111 $).", "hint": "Sample 1 explanation:\n\nA (small) part of the constructed Langze Array is:\n\n![](https://cdn.luogu.com.cn/upload/pic/10486.png)\n\nTherefore, the count of $ 2 $ on the $ 2 $-nd layer is $ 1 $.\n\nNotes:\n- All data are integers.\n- If you have no idea how to proceed, you may choose to solve some subproblems first.\n- Constraints for each test point are as follows:\n  \n  ![](https://cdn.luogu.com.cn/upload/pic/10333.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "琅泽难题", "background": "```cpp\n万事万物总是那么巧妙，数学海洋令我无限徜徉，在那一瞬，我又发现了美。\n```\n真程海洋的伟大数学家**琅泽**响应真程海洋殿主的号召，参与了这次出题。\n\n根据他的思考与推算，出了一道有意思的题目，以下是他给你们的话：\n", "description": "这个题目的灵感来自于这组数据：\n\n ![](https://cdn.luogu.com.cn/upload/pic/9088.png) \n\n这组数据采用**描述法**的规律，在第$ n+1 $层从左到右描述第$ n $层的数据，描述规律如下：从左到右描述第$ n $层的数据，从第一个数据开始，每当碰到连续的$ a_1 $个$ b_1 $时，将$ a_1\\,b_1 $作为新的两个数据写在第$ n+1 $层的最后（这个最后是接在最后一个数据后面，如果第$ n+1 $层本来没有数据，则此时的最后即为开头），**紧接着**再描述接下来连续的$ a_2 $个$ b_2 $（$ b_1\\neq b_2 $），往后亦如此，直到所有数据被描述完毕，则此时第$ n+1 $层也构造完毕，此处的$ n $为正整数。\n\n现在，我有一个新的想法了，给定一个**初始数据** $ Q $（初始数据在第一层，且第一层仅有一个数据——初始数据$ Q $），按照**类似于**上述规律的规律（描述法）构造一组数据，称为“琅泽阵”。我定义的规律为：在奇数层遵循$ A $规律，在偶数层遵循$ B $规律。具体表现如下图：\n\n ![](https://cdn.luogu.com.cn/upload/pic/9091.png) \n\n上图是当初始数据为$ 1 $时呈现的部分琅泽阵，至于是什么规律，就需要你去探究。\n\n### 但是！！！\n\n这还不是最终目的，我要考的是，在第$ i $层中，有多少个$ x $（我们定义初始数据所在的层数为第一层）？\n", "inputFormat": "输入仅一行，包含三个整数$ Q $和$ i $以及$ x $，每两个数据之间有一个空格。\n\n$ Q $作为该琅泽阵的初始数据。\n", "outputFormat": "输出仅一行，包含一个整数，表示在第$ i $层中，$ x $的数量。\n\n由于输出数据较大，请将输出数据对$ 20171111 $取模（即原始输出数据除以$ 20171111 $后取其余数作为最终输出数据）。\n", "hint": "### 样例一说明：\n\n构建出来的琅泽阵（一小部分）为：\n\n ![](https://cdn.luogu.com.cn/upload/pic/10486.png) \n\n故第$ 2 $层中$ 2 $的数量为$ 1 $。\n\n### 注意：\n\n所有数据均为整数；\n\n如果你毫无思路，你可以选择解决一些子问题；\n\n以下是各个测试点中，输入数据的范围大小：\n\n![](https://cdn.luogu.com.cn/upload/pic/10333.png)\n", "locale": "zh-CN"}}}
{"pid": "P3982", "type": "P", "difficulty": 4, "samples": [["1010000011100000101011111010100010100110", "A PIG"], ["1", "Error"], ["0000001000000010000000100000001010100000", "22A"], ["IOIOOOOI", "Error"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "2017", "进制"], "title": "龙盘雪峰信息解析器", "background": "```cpp\n薄雾笼罩，远方的雪峰无限迷人，感慨之间，阴影将至。\n```\n与真程海洋毗邻的龙盘雪山与我们保持着联系，但是龙盘雪山的通讯员常常把信息进行奇怪的加密，然后要我们来破译，很是谨慎。但是，久而久之，我们的通讯员不耐烦了，差点掀桌子砸凳子不干了。所以我们想做一个信息解析器，就是这样。\n", "description": "龙盘雪峰传来的信息都加密成了复杂的代码，我们需要你来做一个程序，按照解析规则解密这些代码，翻译成文字信息，以下是其解析规则：\n\n该代码应为一连串的二进制码（只存在$ 0 $和$ 1 $，做加法时满$ 2 $进$ 1 $，每个$ 0 $或$ 1 $占一个字符），每八个字符为一单元（这也是规则）。\n\n每个单元都有这样的规则：一、若【前三个字符】为$ 101 $时表示需要转换为字母$ A-Z $，字母$ A $代码为$ 10100000 $，字母$ C $为$ 10100010 $，$ 26 $个**大写字母**以字母表顺序按照这种规律顺序排列，分别对应一个二进制代码。二、若【前三个字符】为$ 111 $，则该单元翻译为空格。三、若【第一个字符】为$ 0 $，则该单元表示一个数，待定**与下一个单元所表示的数做加法**。加法过程中，这两个单元应转换为十进制，然后除以$ 2 $并**舍弃余数**才相加，加法结束后，这两个单元做加法得到的结果即为这两个单元的翻译结果（翻译结果用十进制表示，**这两个单元**就都翻译完毕了，详见样例$ 3 $）。\n\n由于保险，龙盘雪峰经常发送【假代码】，而假代码则不存在上述规则，如果是假代码，**仅**输出$ Error $。\n", "inputFormat": "输入仅一行，包含一串连续的代码（长度不超过$ 171111 $个字符），中间不会出现空格，保证不出现空代码。\n", "outputFormat": "输出仅一行，包含一个字符串，是二进制代码按照上述规则翻译后的文字信息。\n\n若该二进制代码中存在假代码信息，则**只**输出$ Error $。\n", "hint": "### 样例一说明：\n\n$ 10100000 $代表$ A $，下一个单元开头为$ 111 $，那么翻译为空格，再下一个单元开头为$ 101 $，后接$ 01111 $，比$ A $多了$ 2^0+2^1+2^2+2^3=15 $，那么代表的就是$ P $了，以此类推，最后翻译为$ A\\;PIG $。\n\n### 注意：\n\n对于规则一的解释：$ 26 $个大写字母按照字母表的顺序排列，以$ A=10100000 $开始，往后的每一个字母的二进制码的值都比前面一个字母的二进制码的值多$ 1 $（注意满二进一）；\n\n此题目有误解题意的现象，请一定要看清楚题目，搞清楚逻辑关系，注意细节！\n", "locale": "zh-CN", "translations": {"en": {"title": "Longpan Snow Peak Information Parser", "background": "```cpp\n薄雾笼罩，远方的雪峰无限迷人，感慨之间，阴影将至。\n```\nLongpan Snow Peak, adjacent to the Yuzhencheng Ocean, stays in contact with us. However, the correspondent at Longpan Snow Peak often encrypts messages in strange ways and then asks us to decipher them—very cautious indeed. Over time, our own correspondents grew impatient, nearly flipping tables and smashing stools in frustration. So we want to build an information parser. That’s it.", "description": "Messages from Longpan Snow Peak are encrypted into complex codes. We need you to write a program that deciphers these codes according to the rules below and translates them into text.\n\nThe code is a continuous string of binary digits (only $ 0 $ and $ 1 $; when adding, carry $ 1 $ whenever it reaches $ 2 $; each $ 0 $ or $ 1 $ occupies one character). Every eight characters form one unit (this is also a rule).\n\nEach unit follows these rules:\n1. If the first three characters are $ 101 $, the unit represents a letter $ A\\text{-}Z $. The code for $ A $ is $ 10100000 $, the code for $ C $ is $ 10100010 $. The $ 26 $ uppercase letters are arranged in alphabetical order following this pattern, each corresponding to a unique binary code.\n2. If the first three characters are $ 111 $, the unit translates to a space.\n3. If the first character is $ 0 $, then the unit represents a number to be added to the number represented by the next unit. During this addition, convert these two units to decimal, then divide each by $ 2 $ and discard the remainder before adding. After the addition, the sum is the translation result for these two units (the result is expressed in decimal). Both of these units are then considered fully translated (see Sample $ 3 $).\n\nFor safety, Longpan Snow Peak often sends “fake code,” which does not follow the rules above. If fake code appears, only output Error.", "inputFormat": "The input contains a single line with a continuous code string (length does not exceed $ 171111 $ characters). No spaces will appear, and the input is guaranteed to be non-empty.", "outputFormat": "Output a single line containing the string produced by translating the binary code according to the rules above.\n\nIf the binary code contains any fake code, only output Error.", "hint": "Explanation for Sample $ 1 $:\n\n$ 10100000 $ represents $ A $. The next unit begins with $ 111 $, which translates to a space. The next unit begins with $ 101 $ and is followed by $ 01111 $, which is $ 2^0+2^1+2^2+2^3=15 $ more than $ A $, so it represents $ P $. By analogy, the final translation is $ A\\;PIG $.\n\nNote:\n\nFor Rule $ 1 $: the $ 26 $ uppercase letters are arranged in alphabetical order, starting from $ A=10100000 $. Each subsequent letter’s binary code has a value exactly $ 1 $ greater than the previous letter’s binary code (remember to carry in base $ 2 $).\n\nThis problem is prone to misunderstandings. Please read the statement carefully, clarify the logical relationships, and pay attention to details.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "龙盘雪峰信息解析器", "background": "```cpp\n薄雾笼罩，远方的雪峰无限迷人，感慨之间，阴影将至。\n```\n与真程海洋毗邻的龙盘雪山与我们保持着联系，但是龙盘雪山的通讯员常常把信息进行奇怪的加密，然后要我们来破译，很是谨慎。但是，久而久之，我们的通讯员不耐烦了，差点掀桌子砸凳子不干了。所以我们想做一个信息解析器，就是这样。\n", "description": "龙盘雪峰传来的信息都加密成了复杂的代码，我们需要你来做一个程序，按照解析规则解密这些代码，翻译成文字信息，以下是其解析规则：\n\n该代码应为一连串的二进制码（只存在$ 0 $和$ 1 $，做加法时满$ 2 $进$ 1 $，每个$ 0 $或$ 1 $占一个字符），每八个字符为一单元（这也是规则）。\n\n每个单元都有这样的规则：一、若【前三个字符】为$ 101 $时表示需要转换为字母$ A-Z $，字母$ A $代码为$ 10100000 $，字母$ C $为$ 10100010 $，$ 26 $个**大写字母**以字母表顺序按照这种规律顺序排列，分别对应一个二进制代码。二、若【前三个字符】为$ 111 $，则该单元翻译为空格。三、若【第一个字符】为$ 0 $，则该单元表示一个数，待定**与下一个单元所表示的数做加法**。加法过程中，这两个单元应转换为十进制，然后除以$ 2 $并**舍弃余数**才相加，加法结束后，这两个单元做加法得到的结果即为这两个单元的翻译结果（翻译结果用十进制表示，**这两个单元**就都翻译完毕了，详见样例$ 3 $）。\n\n由于保险，龙盘雪峰经常发送【假代码】，而假代码则不存在上述规则，如果是假代码，**仅**输出$ Error $。\n", "inputFormat": "输入仅一行，包含一串连续的代码（长度不超过$ 171111 $个字符），中间不会出现空格，保证不出现空代码。\n", "outputFormat": "输出仅一行，包含一个字符串，是二进制代码按照上述规则翻译后的文字信息。\n\n若该二进制代码中存在假代码信息，则**只**输出$ Error $。\n", "hint": "### 样例一说明：\n\n$ 10100000 $代表$ A $，下一个单元开头为$ 111 $，那么翻译为空格，再下一个单元开头为$ 101 $，后接$ 01111 $，比$ A $多了$ 2^0+2^1+2^2+2^3=15 $，那么代表的就是$ P $了，以此类推，最后翻译为$ A\\;PIG $。\n\n### 注意：\n\n对于规则一的解释：$ 26 $个大写字母按照字母表的顺序排列，以$ A=10100000 $开始，往后的每一个字母的二进制码的值都比前面一个字母的二进制码的值多$ 1 $（注意满二进一）；\n\n此题目有误解题意的现象，请一定要看清楚题目，搞清楚逻辑关系，注意细节！\n", "locale": "zh-CN"}}}
{"pid": "P3983", "type": "P", "difficulty": 4, "samples": [["11\n1 6 11 17 23 27 33 35 38 43", "32"], ["7\n1 5 14 18 20 28 31 34 39 42", "21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2017", "背包 DP"], "title": "赛斯石（赛后强化版）", "background": "```cpp\n白露横江，水光接天，纵一苇之所如，凌万顷之茫然。——苏轼\n```\n真程海洋近来需要进购大批赛斯石，你或许会问，什么是赛斯石？\n\n首先我们来了解一下赛斯，赛斯是一个重量单位，我们用$ si $作为其单位。比如$ 1 $赛斯就是$ 1si $。\n\n而赛斯石有这样一个性质，它本来是一赛斯一赛斯单独存在的，但是用自然枪将其精化之后，它就会与其它经过精化的赛斯石进行合并，合并到合适的重量之后，便将其钝化，使其不再合并其它赛斯石，如果合错了，也可以用金刚刀将其切开（神奇的是你只能切成整数赛斯重量）。赛斯石的重量只能是**整数**赛斯重量，而不同赛斯重量的赛斯石的价格也是不一样的。\n", "description": "现需上市$ Need $赛斯重量的赛斯石，卖家想算出这些赛斯石经过某种合并方式来获得的最大收益。然而目前有一个问题，市场在真程大殿附近（真程海洋中心位置），卖家需要租船送赛斯石过去（即不考虑卖家自己租船过去的费用），目前有十种船可以租，载重量从$ 1si $到$ 10si $，每艘船的租价也是有所不同的，如下表所示：\n\n ![](https://cdn.luogu.com.cn/upload/pic/10663.png) \n\n由于真程大殿附近有强烈的赛斯力，导致**无法对赛斯石进行任何操作**，商家将赛斯石运过来之后就只能按照之前合并好的卖。假设卖家不返回，且这些赛斯石全部能卖出去。现在卖家他要计算总盈利（设总盈利=赛斯石的总收益-租船所需总费用），请你设计一个程序，算出一种最佳方案，以获得**最大总盈利**。\n", "inputFormat": "输入一共有两行\n\n第一行有一个数据$ Need $（赛斯石的总量，单位：$ si $）\n\n第二行有十个数据$ a_{1}\\  ...\\ a_{10} $（分别为$ 1si $到$ 10si $的赛斯石市场价格，单位：元）\n", "outputFormat": "输出仅一行，包含一个整数，表示最大总盈利。\n", "hint": "### 样例一说明：\n\n将$ 11 $个单位赛斯石合并为一个$ 4si $的赛斯石和一个$ 7si $的赛斯石并且租两个载重分别为$ 4si $和$ 7si $的船，这样做为最佳方案，那么最大总盈利就是$ 32 $元。\n\n### 注意：\n\n对于所有输入数据，均在区间$ (0, 100000) $中，并且为整数；\n\n保证卖家最大总盈利为正；\n\n同一行中，每两个数据之间有一个空格。\n\n赛后强化版于$ 2020 $年$ 10 $月$ 13 $日$ 19 $点$ 18 $分已强化完毕。\n", "locale": "zh-CN", "translations": {"en": {"title": "Sais Stone (Post-contest Enhanced Version)", "background": "```cpp\n白露横江，水光接天，纵一苇之所如，凌万顷之茫然。——苏轼\n```\nZhencheng Ocean recently needs to purchase a large number of Sais stones. You may ask: what is a Sais stone?\n\nFirst, let’s learn about “Sais” (赛斯). It is a unit of weight, and we use $ si $ as its unit symbol. For example, $ 1 $ Sais is $ 1 $ si.\n\nA Sais stone has the following property: originally, it exists as separate pieces of $ 1 $ si each. After being refined with a “Natural Gun,” it will merge with other refined Sais stones. Once merged to a suitable weight, it is “passivated” so it will no longer merge with other Sais stones. If merged incorrectly, it can be cut apart with a “Diamond Knife” (interestingly, you can only cut it into integer Sais weights). A Sais stone’s weight must be an integer number of Sais, and the price differs for different integer weights of Sais stones.", "description": "We now need to bring to market Sais stones with a total weight of $ Need $ si. The seller wants to compute the maximum revenue obtainable by merging the $ 1 $ si units in some way. However, there is a complication: the market is near the Zhencheng Grand Hall (the center of Zhencheng Ocean), and the seller needs to rent boats to deliver the Sais stones there (we do not count the cost for the seller himself to travel). There are ten types of boats available for rent, with carrying capacities from $ 1 $ si to $ 10 $ si, and each boat type has a different rental price, as shown in the table below.\n\n ![](https://cdn.luogu.com.cn/upload/pic/10663.png) \n\nDue to the strong Sais force near the Zhencheng Grand Hall, it is **impossible to perform any operation on the Sais stones** there. After the seller transports the Sais stones over, they can only be sold as pre-merged pieces. Assume the seller does not return and that all these Sais stones can be sold. Now the seller wants to calculate the total profit (let total profit = total revenue from Sais stones − total boat rental cost). Please design a program to find an optimal plan to obtain the **maximum total profit**.", "inputFormat": "The input consists of two lines.\n\n- The first line contains a single number $ Need $ (the total amount of Sais stones, unit: si).\n- The second line contains ten numbers $ a_{1}\\  ...\\ a_{10} $ (the market prices, in yuan, for Sais stones of weights $ 1 $ si to $ 10 $ si, respectively).", "outputFormat": "Output a single line containing one integer, the maximum total profit.", "hint": "- Sample explanation:\n\n  Merge $ 11 $ units of $ 1 $ si Sais stones into one $ 4 $ si stone and one $ 7 $ si stone, and rent two boats with capacities $ 4 $ si and $ 7 $ si. This is optimal, so the maximum total profit is $ 32 $ yuan.\n\n- Notes:\n\n  For all input numbers, they are integers in the interval $ (0, 100000) $.\n\n  It is guaranteed that the maximum total profit is positive.\n\n  In the same line, there is one space between any two numbers.\n\n  The post-contest enhanced version was completed on $ 2020 $-$ 10 $-$ 13 at $ 19 $:$ 18 $.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "赛斯石（赛后强化版）", "background": "```cpp\n白露横江，水光接天，纵一苇之所如，凌万顷之茫然。——苏轼\n```\n真程海洋近来需要进购大批赛斯石，你或许会问，什么是赛斯石？\n\n首先我们来了解一下赛斯，赛斯是一个重量单位，我们用$ si $作为其单位。比如$ 1 $赛斯就是$ 1si $。\n\n而赛斯石有这样一个性质，它本来是一赛斯一赛斯单独存在的，但是用自然枪将其精化之后，它就会与其它经过精化的赛斯石进行合并，合并到合适的重量之后，便将其钝化，使其不再合并其它赛斯石，如果合错了，也可以用金刚刀将其切开（神奇的是你只能切成整数赛斯重量）。赛斯石的重量只能是**整数**赛斯重量，而不同赛斯重量的赛斯石的价格也是不一样的。\n", "description": "现需上市$ Need $赛斯重量的赛斯石，卖家想算出这些赛斯石经过某种合并方式来获得的最大收益。然而目前有一个问题，市场在真程大殿附近（真程海洋中心位置），卖家需要租船送赛斯石过去（即不考虑卖家自己租船过去的费用），目前有十种船可以租，载重量从$ 1si $到$ 10si $，每艘船的租价也是有所不同的，如下表所示：\n\n ![](https://cdn.luogu.com.cn/upload/pic/10663.png) \n\n由于真程大殿附近有强烈的赛斯力，导致**无法对赛斯石进行任何操作**，商家将赛斯石运过来之后就只能按照之前合并好的卖。假设卖家不返回，且这些赛斯石全部能卖出去。现在卖家他要计算总盈利（设总盈利=赛斯石的总收益-租船所需总费用），请你设计一个程序，算出一种最佳方案，以获得**最大总盈利**。\n", "inputFormat": "输入一共有两行\n\n第一行有一个数据$ Need $（赛斯石的总量，单位：$ si $）\n\n第二行有十个数据$ a_{1}\\  ...\\ a_{10} $（分别为$ 1si $到$ 10si $的赛斯石市场价格，单位：元）\n", "outputFormat": "输出仅一行，包含一个整数，表示最大总盈利。\n", "hint": "### 样例一说明：\n\n将$ 11 $个单位赛斯石合并为一个$ 4si $的赛斯石和一个$ 7si $的赛斯石并且租两个载重分别为$ 4si $和$ 7si $的船，这样做为最佳方案，那么最大总盈利就是$ 32 $元。\n\n### 注意：\n\n对于所有输入数据，均在区间$ (0, 100000) $中，并且为整数；\n\n保证卖家最大总盈利为正；\n\n同一行中，每两个数据之间有一个空格。\n\n赛后强化版于$ 2020 $年$ 10 $月$ 13 $日$ 19 $点$ 18 $分已强化完毕。\n", "locale": "zh-CN"}}}
{"pid": "P3984", "type": "P", "difficulty": 2, "samples": [["3 5\n1 2 10", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "洛谷月赛"], "title": "高兴的津津", "background": null, "description": "津津上高中了。她在自己的妈妈的魔鬼训练下，成为了一个神犇，每次参加一次 OI 比赛必拿 Au 虐全场。每次她拿到一个 Au 后就很高兴。假设津津不会因为其它事高兴，并且她的高兴会持续 $T$ 天（包含获奖当天。就算在高兴的时候再次拿到 Au，她的高兴也只能维持包括这次拿奖之日起 $T$ 天，而不是额外增加 $T$ 天的高兴时间，除非之后再拿奖）。请你帮忙检查一下津津接下来的的日程安排，要参加 $n$ 场比赛，看看接下来的几天，津津会累计开心多久？", "inputFormat": "第一行两个整数 $n$ 和 $T$。\n\n接下来一行，$n$ 个单调递增整数 $t_i$，表示她在第 $t_i$ 天的时候拿了一个 Au。", "outputFormat": "一个整数表示，津津累计开心多久。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le2\\times10^5$。\n- $1\\le T\\le10^9$。\n- $1\\le t_i\\le 10^9$，$t_i$ 单调递增。", "locale": "zh-CN", "translations": {"en": {"title": "Happy Jinjin", "background": "", "description": "Jinjin has started high school. Under her mom’s strict training, she became a top OI contestant and wins Au every time. Each time she gets an Au, she becomes happy. Assume Jinjin does not get happy for any other reason, and her happiness lasts for $T$ days (including the award day). Even if she wins another Au while still happy, her happiness lasts for $T$ days starting from that new award day; it does not add an extra $T$ days, unless she wins again later. Please help check Jinjin’s upcoming schedule: she will attend $n$ contests. How many days in total will Jinjin be happy in the coming days?", "inputFormat": "The first line contains two integers $n$ and $T$.\n\nThe next line contains $n$ strictly increasing integers $t_i$, meaning she won an Au on day $t_i$.", "outputFormat": "Output a single integer: the total number of days Jinjin is happy.", "hint": "#### Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that:\n\n- $1 \\le n \\le 2 \\times 10^5$.\n- $1 \\le T \\le 10^9$.\n- $1 \\le t_i \\le 10^9$, and $t_i$ is strictly increasing.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "高兴的津津", "background": null, "description": "津津上高中了。她在自己的妈妈的魔鬼训练下，成为了一个神犇，每次参加一次 OI 比赛必拿 Au 虐全场。每次她拿到一个 Au 后就很高兴。假设津津不会因为其它事高兴，并且她的高兴会持续 $T$ 天（包含获奖当天。就算在高兴的时候再次拿到 Au，她的高兴也只能维持包括这次拿奖之日起 $T$ 天，而不是额外增加 $T$ 天的高兴时间，除非之后再拿奖）。请你帮忙检查一下津津接下来的的日程安排，要参加 $n$ 场比赛，看看接下来的几天，津津会累计开心多久？", "inputFormat": "第一行两个整数 $n$ 和 $T$。\n\n接下来一行，$n$ 个单调递增整数 $t_i$，表示她在第 $t_i$ 天的时候拿了一个 Au。", "outputFormat": "一个整数表示，津津累计开心多久。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le n\\le2\\times10^5$。\n- $1\\le T\\le10^9$。\n- $1\\le t_i\\le 10^9$，$t_i$ 单调递增。", "locale": "zh-CN"}}}
{"pid": "P3985", "type": "P", "difficulty": 4, "samples": [["5 10\n2 800\n5 400\n5 300\n3 400\n2 200\n", "1600"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "排序", "背包 DP", "进制", "洛谷月赛"], "title": "不开心的金明", "background": "", "description": "金明今天很不开心，家里购置的二手房就要领钥匙了，房里并没有一间他自己专用的很宽敞的房间。更让他不高兴的是，妈妈昨天对他说：“你需要购买哪些物品，怎么布置，你说了不算（有很大的限制），而且不超过 $W$ 元钱。”。今天一早金明就开始做预算，但是他想买的东西太多了，肯定会超过妈妈限定的 $W$ 元。于是，他把每件物品规定了一个重要度整数 $p_i$ 表示。他还从因特网上查到了每件物品的价格 $v_i$（都是整数元）。\n\n妈妈看到购物单后进行了审查，要求购物单上所有的物品价格的极差（最贵的减去最便宜的）不超过 $3$（当然金明至今不知道为什么会这样）。他希望在不超过 $W$ 元（可以等于 $W$ 元）的前提下，使购买的重要度总和 $\\sum p_i$ 的最大。\n\n\n请你帮助金明设计一个满足要求的购物单，你只需要告诉我们重要度的最大的和。\n", "inputFormat": "输入的第 $1$ 行，为两个正整数，用一个空格隔开：\n\n$n,W$（其中 $W$ 表示总钱数，$n$ 为希望购买物品的个数。）\n\n从第 $2$ 行到第 $n+1$ 行，第 $j$ 行给出了编号为 $j-1$ 的物品的基本数据，每行有 $2$ 个非负整数 $v,p$（其中 $v$ 表示该物品的价格，$p$ 表示该物品的重要度）", "outputFormat": "输出只有一个正整数，为不超过总钱数的物品的重要度的总和的最大值。", "hint": "$1 \\le N \\le 100$。\n\n$1 \\le W \\le 10^9$。\n\n$1 \\le v_i \\le 10^9$。\n\n对所有的 $i=1,2,3,…,N$，$\\min(v_i) \\le v_i \\le \\min(v_i)+3$。\n\n$1 \\le p_i \\le 10^7$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Unhappy Jinming", "background": "", "description": "Jinming is very unhappy today. The family is about to get the keys to a second-hand apartment, but there is no spacious room exclusively for him. What makes him even more upset is that his mom told him yesterday: \"Which items to buy and how to arrange them is not up to you (there are many restrictions), and moreover the total must not exceed $W$ yuan.\" Early this morning, Jinming started budgeting, but there are so many things he wants to buy that he will surely exceed the $W$ yuan limit. So, he assigns to each item an integer importance $p_i$. He also looked up the price $v_i$ of each item on the Internet (all in integer yuan).\n\nAfter reviewing the shopping list, his mom requires that the range of the prices of all items on the list (the most expensive minus the cheapest) must not exceed $3$ (of course Jinming still does not know why). He hopes, under the constraint that the total cost does not exceed $W$ yuan (it can be equal to $W$), to maximize the total importance $\\sum p_i$.\n\nPlease help Jinming design a shopping list that meets the requirements. You only need to tell us the maximum possible sum of importance.", "inputFormat": "The first line contains two positive integers, separated by a space:\n$N, W$ (where $W$ is the total amount of money, and $N$ is the number of items he wants to buy).\n\nFrom line $2$ to line $N + 1$, the $j$-th line gives the basic data of the item with ID $j - 1$. Each line contains $2$ non-negative integers $v, p$ (where $v$ is the price of that item, and $p$ is its importance).", "outputFormat": "Output a single positive integer: the maximum possible sum of importance of items whose total cost does not exceed the total amount of money.", "hint": "$1 \\le N \\le 100$.\n\n$1 \\le W \\le 10^9$.\n\n$1 \\le v_i \\le 10^9$.\n\nFor all $i = 1, 2, 3, \\dots, N$, $\\min(v_i) \\le v_i \\le \\min(v_i) + 3$.\n\n$1 \\le p_i \\le 10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "不开心的金明", "background": "", "description": "金明今天很不开心，家里购置的二手房就要领钥匙了，房里并没有一间他自己专用的很宽敞的房间。更让他不高兴的是，妈妈昨天对他说：“你需要购买哪些物品，怎么布置，你说了不算（有很大的限制），而且不超过 $W$ 元钱。”。今天一早金明就开始做预算，但是他想买的东西太多了，肯定会超过妈妈限定的 $W$ 元。于是，他把每件物品规定了一个重要度整数 $p_i$ 表示。他还从因特网上查到了每件物品的价格 $v_i$（都是整数元）。\n\n妈妈看到购物单后进行了审查，要求购物单上所有的物品价格的极差（最贵的减去最便宜的）不超过 $3$（当然金明至今不知道为什么会这样）。他希望在不超过 $W$ 元（可以等于 $W$ 元）的前提下，使购买的重要度总和 $\\sum p_i$ 的最大。\n\n\n请你帮助金明设计一个满足要求的购物单，你只需要告诉我们重要度的最大的和。\n", "inputFormat": "输入的第 $1$ 行，为两个正整数，用一个空格隔开：\n\n$n,W$（其中 $W$ 表示总钱数，$n$ 为希望购买物品的个数。）\n\n从第 $2$ 行到第 $n+1$ 行，第 $j$ 行给出了编号为 $j-1$ 的物品的基本数据，每行有 $2$ 个非负整数 $v,p$（其中 $v$ 表示该物品的价格，$p$ 表示该物品的重要度）", "outputFormat": "输出只有一个正整数，为不超过总钱数的物品的重要度的总和的最大值。", "hint": "$1 \\le N \\le 100$。\n\n$1 \\le W \\le 10^9$。\n\n$1 \\le v_i \\le 10^9$。\n\n对所有的 $i=1,2,3,…,N$，$\\min(v_i) \\le v_i \\le \\min(v_i)+3$。\n\n$1 \\le p_i \\le 10^7$。\n", "locale": "zh-CN"}}}
{"pid": "P3986", "type": "P", "difficulty": 5, "samples": [["19260817", "34166325"], ["1000000000", "773877569"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "递归", "枚举", "扩展欧几里德算法", "不定方程", "Fibonacci 数列", "洛谷月赛"], "title": "斐波那契数列", "background": "", "description": "定义一个数列：\n\n\n$f(0) = a, f(1) = b, f(n) = f(n - 1) + f(n - 2)$\n\n\n其中 $a, b$ 均为正整数，$n \\geq 2$。\n\n\n问有多少种 $(a, b)$，使得 $k$ 出现在这个数列里，且不是前两项。\n\n\n由于答案可能很大，你只需要输出答案模 $10^9 + 7$ 的结果即可。\n", "inputFormat": "一行一个整数 $k$。\n", "outputFormat": "一行一个数，表示答案模 $10^9 + 7$ 的结果。\n", "hint": "$1 \\leq k \\leq 10^9$\n", "locale": "zh-CN", "translations": {"en": {"title": "Fibonacci Sequence", "background": "", "description": "Define a sequence:\n\n$f(0) = a, f(1) = b, f(n) = f(n - 1) + f(n - 2)$\n\nwhere $a, b$ are positive integers and $n \\geq 2$.\n\nHow many pairs $(a, b)$ are there such that $k$ appears in this sequence and is not one of the first two terms?\n\nSince the answer may be large, you only need to output the result modulo $10^9 + 7$.", "inputFormat": "One line containing an integer $k$.", "outputFormat": "One line containing an integer, which is the answer modulo $10^9 + 7$.", "hint": "$1 \\leq k \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "斐波那契数列", "background": "", "description": "定义一个数列：\n\n\n$f(0) = a, f(1) = b, f(n) = f(n - 1) + f(n - 2)$\n\n\n其中 $a, b$ 均为正整数，$n \\geq 2$。\n\n\n问有多少种 $(a, b)$，使得 $k$ 出现在这个数列里，且不是前两项。\n\n\n由于答案可能很大，你只需要输出答案模 $10^9 + 7$ 的结果即可。\n", "inputFormat": "一行一个整数 $k$。\n", "outputFormat": "一行一个数，表示答案模 $10^9 + 7$ 的结果。\n", "hint": "$1 \\leq k \\leq 10^9$\n", "locale": "zh-CN"}}}
{"pid": "P3987", "type": "P", "difficulty": 6, "samples": [["5 3\n1 2 3 4 5\n2 1 5\n1 1 5 2\n2 1 5", "15\n12"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000, 1280000]}, "tags": ["平衡树", "树状数组", "深度优先搜索 DFS", "洛谷月赛"], "title": "我永远喜欢珂朵莉~", "background": "http://sukasuka-anime.com/\n\n戒不掉的珂毒\n\n出不动的分块\n\n ![](https://cdn.luogu.com.cn/upload/pic/11191.png) \n\n ![](https://cdn.luogu.com.cn/upload/pic/11192.png) \n\n ![](https://cdn.luogu.com.cn/upload/pic/11193.png) \n\n哦对了有没有想买BD的珂学家啊？支持一下墨鱼吧~\n\n或者有没有人想来手办众筹啊？\n", "description": "给珂朵莉一个长为 $n$ 的非负数序列 $a$，支持以下两个操作：\n\n- $\\verb!1 l r x!$：把区间 $[l,r]$ 中所有 $x$ 的倍数除以 $x$。\n- $\\verb!2 l r!$：查询区间 $[l,r]$ 内元素的和。\n\n珂朵莉很可爱，所以你要帮珂朵莉写这个题。\n", "inputFormat": "第一行两个数表示 $n,m$。\n\n第二行 $n$ 个非负整数表示 $a_i$。\n\n之后 $m$ 行每行一个操作：\n\n- $\\verb!1 l r x!$：把区间 $[l,r]$ 中所有 $x$ 的倍数除以 $x$。\n- $\\verb!2 l r!$：查询区间 $[l,r]$ 内元素的和。\n", "outputFormat": "对于每次询问，输出一行一个数表示答案。\n", "hint": "### 数据范围及约定\n\n$1 \\le n , m \\le 10^5$，$0 \\le a_i \\le 5\\times 10^5$，$1 \\le x \\le 5\\times 10^5$。\n", "locale": "zh-CN", "translations": {"en": {"title": "I Will Always Love Chtholly~", "background": "http://sukasuka-anime.com/\n\nCan't quit the Chtholly addiction.\n\nSqrt decomposition that I just can't pull off.\n\n![](https://cdn.luogu.com.cn/upload/pic/11191.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/11192.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/11193.png)\n\nOh, by the way, are there any \"Ke-ologists\" who want to buy the BD? Please support Moyu~.\n\nOr does anyone want to join a figure crowdfunding?", "description": "Give Chtholly a non-negative sequence $a$ of length $n$, supporting the following two operations:\n- $\\verb!1 l r x!$: Divide all multiples of $x$ in the interval $[l,r]$ by $x$.\n- $\\verb!2 l r!$: Query the sum of elements in the interval $[l,r]$.\n\nChtholly is very cute, so you should help her solve this problem.", "inputFormat": "The first line contains two numbers $n,m$.\n\nThe second line contains $n$ non-negative integers $a_i$.\n\nThen there are $m$ lines, each describing one operation:\n- $\\verb!1 l r x!$: Divide all multiples of $x$ in the interval $[l,r]$ by $x$.\n- $\\verb!2 l r!$: Query the sum of elements in the interval $[l,r]$.", "outputFormat": "For each query, output one line with one number denoting the answer.", "hint": "Constraints\n\n$1 \\le n , m \\le 10^5$, $0 \\le a_i \\le 5\\times 10^5$, $1 \\le x \\le 5\\times 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "我永远喜欢珂朵莉~", "background": "http://sukasuka-anime.com/\n\n戒不掉的珂毒\n\n出不动的分块\n\n ![](https://cdn.luogu.com.cn/upload/pic/11191.png) \n\n ![](https://cdn.luogu.com.cn/upload/pic/11192.png) \n\n ![](https://cdn.luogu.com.cn/upload/pic/11193.png) \n\n哦对了有没有想买BD的珂学家啊？支持一下墨鱼吧~\n\n或者有没有人想来手办众筹啊？\n", "description": "给珂朵莉一个长为 $n$ 的非负数序列 $a$，支持以下两个操作：\n\n- $\\verb!1 l r x!$：把区间 $[l,r]$ 中所有 $x$ 的倍数除以 $x$。\n- $\\verb!2 l r!$：查询区间 $[l,r]$ 内元素的和。\n\n珂朵莉很可爱，所以你要帮珂朵莉写这个题。\n", "inputFormat": "第一行两个数表示 $n,m$。\n\n第二行 $n$ 个非负整数表示 $a_i$。\n\n之后 $m$ 行每行一个操作：\n\n- $\\verb!1 l r x!$：把区间 $[l,r]$ 中所有 $x$ 的倍数除以 $x$。\n- $\\verb!2 l r!$：查询区间 $[l,r]$ 内元素的和。\n", "outputFormat": "对于每次询问，输出一行一个数表示答案。\n", "hint": "### 数据范围及约定\n\n$1 \\le n , m \\le 10^5$，$0 \\le a_i \\le 5\\times 10^5$，$1 \\le x \\le 5\\times 10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P3988", "type": "P", "difficulty": 4, "samples": [["4\n2\n0\n3\n2", "3\n4\n2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2013", "线段树", "各省省选", "平衡树", "树状数组", "上海"], "title": "[SHOI2013] 发牌", "background": "", "description": "在一些扑克游戏里，如德州扑克，发牌是有讲究的。一般称呼专业的发牌手为荷官。荷官在发牌前，先要销牌（burn card）。所谓销牌，就是把当前在牌库顶的那一张牌移动到牌库底，它用来防止玩家猜牌而影响游戏。\n\n假设一开始，荷官拿出了一副新牌，这副牌有 $N$ 张不同的牌，编号依次为 $1$ 到 $N$。由于是新牌，所以牌是按照顺序排好的，从牌库顶开始，依次为 $1,2,\\cdots,N$，$N$ 号牌在牌库底。为了发完所有的牌，荷官会进行 $N$ 次发牌操作，在第 $i$ 次发牌之前，他会连续进行 $R_i$ 次销牌操作，$R_i$ 由输入给定。请问最后玩家拿到这副牌的顺序是什么样的？\n\n举个例子，假设 $N=4$，则一开始的时候，牌库中牌的构成顺序为 $1,2,3,4$。\n\n- 假设 $R_1=2$，则荷官应该连销两次牌，将 $1$ 和 $2$ 放入牌库底，再将 $3$ 发给玩家。目前牌库中的牌顺序为 $4,1,2$。\n- 假设 $R_2=0$，荷官不需要销牌，直接将 $4$ 发给玩家，目前牌库中的牌顺序为 $1,2$。\n- 假设 $R_3=3$，则荷官依次销去了 $1,2,1$，再将 $2$ 发给了玩家。目前牌库仅剩下一张牌 $1$。\n- 假设 $R_4=2$，荷官在重复销去两次 $1$ 之后，还是将 $1$ 发给了玩家，这是因为 $1$ 是牌库中唯一的一张牌。", "inputFormat": "第一行，一个整数 $N$，表示牌的数量。\n\n第二行到第 $N+1$ 行，在第 $i+1$ 行，有一个整数 $R_i$。\n", "outputFormat": "共 $N$ 行，第 $i$ 行有一个整数，表示玩家收到的第 $i$ 张牌的编号。", "hint": "#### 数据规模与约定\n\n对于 $100 \\%$ 的数据，$0 \\le R_i < N$。  \n\n| 测试点编号 | $N=$ | 测试点编号 | $N=$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5\\times 10^3$ | $6$ | $3\\times 10^5$ |\n| $2$ | $10^4$ |  $7$ | $4\\times 10^5$ |\n| $3$ | $5\\times 10^4$ | $8$ | $5\\times 10^5$ |\n| $4$ | $10^5$ | $9$ | $6\\times 10^5$ |\n| $5$ | $2\\times 10^5$ | $10$ | $7\\times 10^5$ |", "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2013] Dealing Cards", "background": "", "description": "In some poker games, such as Texas hold'em, dealing has its own rules. The professional dealer is commonly called the dealer. Before dealing, the dealer needs to burn a card (burn card). Burning means moving the current top card of the deck to the bottom of the deck. This helps prevent players from guessing cards and affecting the game.\n\nSuppose at the start, the dealer takes out a new deck with $N$ distinct cards labeled from $1$ to $N$. Since it is a new deck, the cards are in order from the top of the deck as $1, 2, \\cdots, N$, with card $N$ at the bottom. To deal all cards, the dealer performs $N$ dealing operations. Before the $i$-th deal, he performs $R_i$ consecutive burn operations, where $R_i$ is given in the input. What is the final order of the cards received by the player?\n\nFor example, suppose $N=4$. Initially, the deck order is $1,2,3,4$.\n\n- Suppose $R_1=2$. The dealer burns twice, moves $1$ and $2$ to the bottom, then deals $3$ to the player. The current deck order is $4,1,2$.\n- Suppose $R_2=0$. The dealer does not burn and directly deals $4$ to the player. The current deck order is $1,2$.\n- Suppose $R_3=3$. The dealer burns $1,2,1$ in order, then deals $2$ to the player. The deck now has only one card left, $1$.\n- Suppose $R_4=2$. After burning $1$ twice again, the dealer still deals $1$ to the player because $1$ is the only card in the deck.", "inputFormat": "The first line contains an integer $N$, the number of cards.\n\nFrom the second line to line $N+1$, the $(i+1)$-th line contains an integer $R_i$.", "outputFormat": "Output $N$ lines. On the $i$-th line, output one integer, the label of the $i$-th card received by the player.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $0 \\le R_i < N$.\n\n| Test point ID | $N=$ | Test point ID | $N=$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5\\times 10^3$ | $6$ | $3\\times 10^5$ |\n| $2$ | $10^4$ |  $7$ | $4\\times 10^5$ |\n| $3$ | $5\\times 10^4$ | $8$ | $5\\times 10^5$ |\n| $4$ | $10^5$ | $9$ | $6\\times 10^5$ |\n| $5$ | $2\\times 10^5$ | $10$ | $7\\times 10^5$ |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2013] 发牌", "background": "", "description": "在一些扑克游戏里，如德州扑克，发牌是有讲究的。一般称呼专业的发牌手为荷官。荷官在发牌前，先要销牌（burn card）。所谓销牌，就是把当前在牌库顶的那一张牌移动到牌库底，它用来防止玩家猜牌而影响游戏。\n\n假设一开始，荷官拿出了一副新牌，这副牌有 $N$ 张不同的牌，编号依次为 $1$ 到 $N$。由于是新牌，所以牌是按照顺序排好的，从牌库顶开始，依次为 $1,2,\\cdots,N$，$N$ 号牌在牌库底。为了发完所有的牌，荷官会进行 $N$ 次发牌操作，在第 $i$ 次发牌之前，他会连续进行 $R_i$ 次销牌操作，$R_i$ 由输入给定。请问最后玩家拿到这副牌的顺序是什么样的？\n\n举个例子，假设 $N=4$，则一开始的时候，牌库中牌的构成顺序为 $1,2,3,4$。\n\n- 假设 $R_1=2$，则荷官应该连销两次牌，将 $1$ 和 $2$ 放入牌库底，再将 $3$ 发给玩家。目前牌库中的牌顺序为 $4,1,2$。\n- 假设 $R_2=0$，荷官不需要销牌，直接将 $4$ 发给玩家，目前牌库中的牌顺序为 $1,2$。\n- 假设 $R_3=3$，则荷官依次销去了 $1,2,1$，再将 $2$ 发给了玩家。目前牌库仅剩下一张牌 $1$。\n- 假设 $R_4=2$，荷官在重复销去两次 $1$ 之后，还是将 $1$ 发给了玩家，这是因为 $1$ 是牌库中唯一的一张牌。", "inputFormat": "第一行，一个整数 $N$，表示牌的数量。\n\n第二行到第 $N+1$ 行，在第 $i+1$ 行，有一个整数 $R_i$。\n", "outputFormat": "共 $N$ 行，第 $i$ 行有一个整数，表示玩家收到的第 $i$ 张牌的编号。", "hint": "#### 数据规模与约定\n\n对于 $100 \\%$ 的数据，$0 \\le R_i < N$。  \n\n| 测试点编号 | $N=$ | 测试点编号 | $N=$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5\\times 10^3$ | $6$ | $3\\times 10^5$ |\n| $2$ | $10^4$ |  $7$ | $4\\times 10^5$ |\n| $3$ | $5\\times 10^4$ | $8$ | $5\\times 10^5$ |\n| $4$ | $10^5$ | $9$ | $6\\times 10^5$ |\n| $5$ | $2\\times 10^5$ | $10$ | $7\\times 10^5$ |", "locale": "zh-CN"}}}
{"pid": "P3989", "type": "P", "difficulty": 6, "samples": [["2\n2\nbbaa\n2\naba", "NO\nYES"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "各省省选", "上海"], "title": "[SHOI2013] 阶乘字符串", "background": "shoi2013d1t2\n\n（本题卡常数注意）\n", "description": "给定一个由前 $n$ 个小写字母组成的串 $S$。串 $S$ 是阶乘字符串当且仅当前 $n$ 个小写字母的全排列（共 $n!$ 种）都作为的子序列（可以不连续）出现。\n\n由这个定义出发，可以得到一个简单的枚举法去验证，但是它实在太慢了。所以现在请你设计一个算法，在 $1$ 秒内判断出给定的串是否是阶乘字符串。", "inputFormat": "输入第 $1$ 行一个整数 $T$，表示这个文件中会有 $T$ 组数据。\n\n接下来分 $T$ 个块，每块 $2$ 行：\n\n- 第 $1$ 行一个正整数 $n$，表示 $S$ 由前 $n$ 个小写字母组成。\n- 第 $2$ 行一个字符串 $s$。", "outputFormat": "对于每组数据，分别输出一行。每行是 `YES` 或者 `NO`，表示该数据对应的串 $S$ 是否是阶乘字符串。", "hint": "第一组数据中，`ab` 这个串没有作为子序列出现。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9zs871wl.png)\n", "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2013] Factorial String", "background": "shoi2013d1t2\n\n(Note: Be careful with constant factors.)", "description": "Given a string $S$ composed of the first $n$ lowercase letters. The string $S$ is a factorial string if and only if every permutation of the first $n$ lowercase letters (in total $n!$ permutations) appears as a subsequence (not necessarily contiguous).\n\nFrom this definition, a simple enumeration can be used to verify it, but it is far too slow. Please design an algorithm to determine within $1$ second whether the given string is a factorial string.", "inputFormat": "The first line contains an integer $T$, indicating that there are $T$ test cases in this file.\n\nThen $T$ blocks follow, each with $2$ lines:\n- Line $1$: a positive integer $n$, indicating that $S$ is composed of the first $n$ lowercase letters.\n- Line $2$: a string $s$.", "outputFormat": "For each test case, output one line: `YES` or `NO`, indicating whether the corresponding string $S$ is a factorial string.", "hint": "In the first test case, the string `ab` does not appear as a subsequence.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9zs871wl.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2013] 阶乘字符串", "background": "shoi2013d1t2\n\n（本题卡常数注意）\n", "description": "给定一个由前 $n$ 个小写字母组成的串 $S$。串 $S$ 是阶乘字符串当且仅当前 $n$ 个小写字母的全排列（共 $n!$ 种）都作为的子序列（可以不连续）出现。\n\n由这个定义出发，可以得到一个简单的枚举法去验证，但是它实在太慢了。所以现在请你设计一个算法，在 $1$ 秒内判断出给定的串是否是阶乘字符串。", "inputFormat": "输入第 $1$ 行一个整数 $T$，表示这个文件中会有 $T$ 组数据。\n\n接下来分 $T$ 个块，每块 $2$ 行：\n\n- 第 $1$ 行一个正整数 $n$，表示 $S$ 由前 $n$ 个小写字母组成。\n- 第 $2$ 行一个字符串 $s$。", "outputFormat": "对于每组数据，分别输出一行。每行是 `YES` 或者 `NO`，表示该数据对应的串 $S$ 是否是阶乘字符串。", "hint": "第一组数据中，`ab` 这个串没有作为子序列出现。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9zs871wl.png)\n", "locale": "zh-CN"}}}
{"pid": "P3990", "type": "P", "difficulty": 6, "samples": [["3 5", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2013", "各省省选", "上海", "前缀和", "矩阵乘法", "构造"], "title": "[SHOI2013] 超级跳马", "background": "", "description": "现有一个 $n$ 行 $m$ 列的棋盘，一只马欲从棋盘的左上角跳到右下角。每一步它向右跳奇数列，且跳到本行或相邻行。跳越期间，马不能离开棋盘。例如，当 $n = 3$，$m = 10$ 时，下图是一种可行的跳法。\n\n![](https://cdn.luogu.com.cn/upload/pic/9367.png) \n\n试求跳法种数对 $30\\,011$ 取模的结果。", "inputFormat": "仅有一行，包含两个正整数 $n, m$，表示棋盘的规模。", "outputFormat": "仅有一行，包含一个整数，即跳法种数模 $30\\,011$ 后的结果。\n", "hint": "- 对于 $10\\%$ 的数据，$1 \\leq n \\leq 10$，$2 \\leq m \\leq 10$；\n- 对于 $50\\%$ 的数据，$1 \\leq n \\leq 10$，$2 ≤ m ≤ 10^5$；\n- 对于 $80\\%$ 的数据，$1 \\leq n \\leq 10$，$2 \\leq m \\leq 10^9$；\n- 对于 $100\\%$ 的数据，$1 \\leq n \\leq 50$，$2 \\leq m \\leq 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2013] Super Jumping Knight", "background": "", "description": "Given an $n$-row by $m$-column board, a knight wants to jump from the top-left corner to the bottom-right corner. At each step, it jumps to the right by an odd number of columns and lands in the same row or an adjacent row. During the jump, the knight must not leave the board. For example, when $n = 3$, $m = 10$, the figure below shows a valid sequence of jumps.\n\n![](https://cdn.luogu.com.cn/upload/pic/9367.png)\n\nFind the number of different jump sequences modulo $30\\,011$.", "inputFormat": "A single line containing two positive integers $n$, $m$, representing the size of the board.", "outputFormat": "Output a single line containing one integer, the number of jump sequences modulo $30\\,011$.", "hint": "- For $10\\%$ of the testdata, $1 \\leq n \\leq 10$, $2 \\leq m \\leq 10$.\n- For $50\\%$ of the testdata, $1 \\leq n \\leq 10$, $2 \\leq m \\leq 10^5$.\n- For $80\\%$ of the testdata, $1 \\leq n \\leq 10$, $2 \\leq m \\leq 10^9$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 50$, $2 \\leq m \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2013] 超级跳马", "background": "", "description": "现有一个 $n$ 行 $m$ 列的棋盘，一只马欲从棋盘的左上角跳到右下角。每一步它向右跳奇数列，且跳到本行或相邻行。跳越期间，马不能离开棋盘。例如，当 $n = 3$，$m = 10$ 时，下图是一种可行的跳法。\n\n![](https://cdn.luogu.com.cn/upload/pic/9367.png) \n\n试求跳法种数对 $30\\,011$ 取模的结果。", "inputFormat": "仅有一行，包含两个正整数 $n, m$，表示棋盘的规模。", "outputFormat": "仅有一行，包含一个整数，即跳法种数模 $30\\,011$ 后的结果。\n", "hint": "- 对于 $10\\%$ 的数据，$1 \\leq n \\leq 10$，$2 \\leq m \\leq 10$；\n- 对于 $50\\%$ 的数据，$1 \\leq n \\leq 10$，$2 ≤ m ≤ 10^5$；\n- 对于 $80\\%$ 的数据，$1 \\leq n \\leq 10$，$2 \\leq m \\leq 10^9$；\n- 对于 $100\\%$ 的数据，$1 \\leq n \\leq 50$，$2 \\leq m \\leq 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P3991", "type": "P", "difficulty": 6, "samples": [["5\n0 25 37 46 2\n1 32 14 16 3\n3 99 77 88 4\n2 43 68 57 5\n14 72 36 18 6\n", "92\n75\n396\n319\n432"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["动态规划 DP", "2017", "各省省选", "平衡树", "北京", "O2优化", "分治", "矩阵加速", "动态 DP"], "title": "[BJOI2017] 喷式水战改", "background": "拿到了飞机的驾照(?)，这样补给就不愁了\n\nXXXX年XX月XX日\n\n拿到了喷气机(??)的驾照，这样就飞得更快了\n\nXXXX年XX月XX日\n\n拿到了攻击机(???)的驾照（不存在的）\n\nXXXX年XX月XX日\n\n用铅版做夹层的话，机身可是会变重的呢\n\nXXXX年XX月XX日\n\n幸酱的特制快递，精确投递到了目标地点\n\n-------------------------------------\n\n又是核平的一天。\n\n天音正在给喷气机做保养，并充填燃料。\n\n这种喷气机是某姬(?????)特别制作的，发动机拥有三种工作状态\n\n1、通常型（Original）：在高空平飞或隐蔽飞行时进行的低功耗高效率工作状态\n\n2、后期型（Extended）：为在俯冲时最大化能量利用率而特别改造过的工作状态\n\n3、增强型（Enhanced）：在俯冲攻击结束后为产生极限扭力抬高高度的工作状态\n\n在一次攻击中，喷气机将会经历\"通常-后期-增强-通常\"的工作流程\n\n不同工作状态中，燃料的利用效率是不同的\n\n现在天音正在调整喷气机燃料装填序列\n\n你需要做的就是求出燃料能产生的最大总能量\n\n为什么是你？\n\n和平还是核平，选一个吧", "description": "初始燃料序列为空。每次操作会向序列中的 $p _ i$ 位置添加 $x _ i$ 单位的同种燃料，该燃料每一单位在三种工作状态下能产生的能量分别为 $a _ i, b _ i, c _ i$。\n\n添加的位置 $p _ i$ 是指，在添加后，加入的第一个单位燃料前面有 $p _ i$ 个单位的原燃料。\n\n全部的 $x _ i$ 单位燃料依次放置，然后原来在 $p _ i$ 位置的燃料（如果有的话）依次向后排列。\n\n对于一个确定的燃料序列，其能产生的最大总能量为：将序列依次分成\"通常-后期-增强-通常\"四段（每段可以为空），每一段在对应工作状态下产生的能量之和的最大值。\n\n对于每次添加操作，你需要给出该次操作使得最大总能量增加了多少。\n\n如果对于这种计算方式没有直观的感受，可以查看样例说明。", "inputFormat": "第一行一个数 $n$，表示操作个数。\n\n接下来 $n$ 行，每行 $5$ 个数 $p _ i, a _ i, b _ i, c _ i, x _ i$，空格分隔，表示向序列中的 $p _ i$ 位置添加 $x _ i$ 单位的同种燃料\n\n这种燃料每单位在通常、后期、增强工作状态下产生的能量分别为 $a _ i, b _ i, c _ i$。", "outputFormat": "$n$ 行，每行一个数，表示该次操作后能量序列所能产生的最大总能量增加了多少。", "hint": "第一次操作后，燃料序列为 `[1 1]`，最大能量发生方式为 `[En1 En1]`，共 $46+46=92$。\n\n第二次操作后，燃料序列为 `[1 2 2 2 1]`，最大能量发生方式为 `[Or1 Or2 Or2 Or2 En1]`，共 $25+32+32+32+46=167$，增加了 $167-92=75$。\n\n第三次操作后，燃料序列为 `[1 2 2 3 3 3 3 2 1]`，最大能量发生方式为 `[Or1 Or2 Or2 Or3 Or3 Or3 Or3 Or2 En1]`，增加了 $99\\times 4=396$。\n\n第四次操作后，燃料序列为 `[1 2 4 4 4 4 4 2 3 3 3 3 2 1]`，最大能量发生方式为 `[Or1 Or2 Ex4 Ex4 Ex4 Ex4 Ex4 Or2 Or3 Or3 Or3 Or3 Or2 Or1]`。\n\n第五次操作后，燃料序列为 `[1 2 4 4 4 4 4 2 3 3 3 3 2 1 5 5 5 5 5 5]`，最大能量发生方式为 `[Or1 Or2 Ex4 Ex4 Ex4 Ex4 Ex4 Or2 Or3 Or3 Or3 Or3 Or2 Or1 Or5 Or5 Or5 Or5 Or5 Or5]`。\n\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$, $1 \\leq a_i, b_i, c_i \\leq 10^4$， $1 \\leq x_i \\leq 10^9$。\n\n对于 $100\\%$ 的数据，保证插入时序列中至少已有 $p _ i$ 单位的燃料。\n\n后 $50\\%$ 数据有梯度。", "locale": "zh-CN", "translations": {"en": {"title": "[BJOI2017] Jet Water War Kai", "background": "Got a pilot license for airplanes (?), so resupply is no longer a problem.\n\nXXXX year XX month XX day.\n\nGot a pilot license for jets (??), so I can fly even faster.\n\nXXXX year XX month XX day.\n\nGot a pilot license for attack aircraft (???), which does not exist.\n\nXXXX year XX month XX day.\n\nIf you use lead plates for the sandwich structure, the fuselage will get heavier.\n\nXXXX year XX month XX day.\n\nKou-chan’s special delivery was precisely dropped on the target.\n\n-------------------------------------\n\nAnother day of “nuke-peace.”\n\nAmane is doing maintenance on the jet and refueling it.\n\nThis jet was specially made by a certain “mou ji” (某姬). Its engine has three operating states:\n\n1. Original: a low-power, high-efficiency state used for high-altitude level flight or stealth flight.\n\n2. Extended: a state specially modified to maximize energy utilization during a dive.\n\n3. Enhanced: a state used after a diving attack to generate extreme torque and regain altitude.\n\nIn one attack, the jet will go through the workflow “Original → Extended → Enhanced → Original.”\n\nFuel utilization efficiency differs across states.\n\nAmane is now tuning the jet’s fuel loading sequence.\n\nYour task is to compute the maximum total energy the fuel can produce.\n\nWhy you? Choose one: peace or “nuke-peace.”", "description": "The initial fuel sequence is empty. Each operation inserts $x _ i$ units of the same type of fuel at position $p _ i$ in the sequence. For this fuel, each unit can produce energy $a _ i, b _ i, c _ i$ in the three operating states, respectively.\n\nThe position $p _ i$ means that, after insertion, there are $p _ i$ units of the original fuel in front of the first inserted unit.\n\nAll $x _ i$ units are placed consecutively. Then the fuel that originally started at position $p _ i$ (if any) is shifted backward in order.\n\nFor a fixed fuel sequence, its maximum total energy is defined as follows: split the sequence into four consecutive segments in the order “Original → Extended → Enhanced → Original” (each segment may be empty). The total energy is the sum, over all units, of the energy corresponding to the state of the segment they belong to. Take the maximum value over all such splits.\n\nFor each insertion operation, output by how much the maximum total energy increases due to this operation.\n\nIf this calculation is not intuitive, see the sample explanation.", "inputFormat": "The first line contains an integer $n$, the number of operations.\n\nEach of the next $n$ lines contains $5$ integers $p _ i, a _ i, b _ i, c _ i, x _ i$, separated by spaces, indicating that $x _ i$ units of the same fuel are inserted at position $p _ i$ in the sequence.\n\nFor this fuel, each unit produces $a _ i, b _ i, c _ i$ energy in the Original, Extended, and Enhanced states, respectively.", "outputFormat": "Output $n$ lines. Each line contains a single integer, the increase in the maximum total energy after that operation.", "hint": "After the first operation, the fuel sequence is “[1 1]”. The way to achieve maximum energy is “[En1 En1]”, totaling $46+46=92$.\n\nAfter the second operation, the fuel sequence is “[1 2 2 2 1]”. The way to achieve maximum energy is “[Or1 Or2 Or2 Or2 En1]”, totaling $25+32+32+32+46=167$, increased by $167-92=75$.\n\nAfter the third operation, the fuel sequence is “[1 2 2 3 3 3 3 2 1]”. The way to achieve maximum energy is “[Or1 Or2 Or2 Or3 Or3 Or3 Or3 Or2 En1]”, increased by $99\\times 4=396$.\n\nAfter the fourth operation, the fuel sequence is “[1 2 4 4 4 4 4 2 3 3 3 3 2 1]”. The way to achieve maximum energy is “[Or1 Or2 Ex4 Ex4 Ex4 Ex4 Ex4 Or2 Or3 Or3 Or3 Or3 Or2 Or1]”.\n\nAfter the fifth operation, the fuel sequence is “[1 2 4 4 4 4 4 2 3 3 3 3 2 1 5 5 5 5 5 5]”. The way to achieve maximum energy is “[Or1 Or2 Ex4 Ex4 Ex4 Ex4 Ex4 Or2 Or3 Or3 Or3 Or3 Or2 Or1 Or5 Or5 Or5 Or5 Or5 Or5]”.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 10^5$, $1 \\leq a_i, b_i, c_i \\leq 10^4$, $1 \\leq x_i \\leq 10^9$.\n\nFor $100\\%$ of the testdata, it is guaranteed that at the time of insertion there are at least $p _ i$ units of fuel already in the sequence.\n\nThe remaining $50\\%$ of the testdata has graded difficulty.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BJOI2017] 喷式水战改", "background": "拿到了飞机的驾照(?)，这样补给就不愁了\n\nXXXX年XX月XX日\n\n拿到了喷气机(??)的驾照，这样就飞得更快了\n\nXXXX年XX月XX日\n\n拿到了攻击机(???)的驾照（不存在的）\n\nXXXX年XX月XX日\n\n用铅版做夹层的话，机身可是会变重的呢\n\nXXXX年XX月XX日\n\n幸酱的特制快递，精确投递到了目标地点\n\n-------------------------------------\n\n又是核平的一天。\n\n天音正在给喷气机做保养，并充填燃料。\n\n这种喷气机是某姬(?????)特别制作的，发动机拥有三种工作状态\n\n1、通常型（Original）：在高空平飞或隐蔽飞行时进行的低功耗高效率工作状态\n\n2、后期型（Extended）：为在俯冲时最大化能量利用率而特别改造过的工作状态\n\n3、增强型（Enhanced）：在俯冲攻击结束后为产生极限扭力抬高高度的工作状态\n\n在一次攻击中，喷气机将会经历\"通常-后期-增强-通常\"的工作流程\n\n不同工作状态中，燃料的利用效率是不同的\n\n现在天音正在调整喷气机燃料装填序列\n\n你需要做的就是求出燃料能产生的最大总能量\n\n为什么是你？\n\n和平还是核平，选一个吧", "description": "初始燃料序列为空。每次操作会向序列中的 $p _ i$ 位置添加 $x _ i$ 单位的同种燃料，该燃料每一单位在三种工作状态下能产生的能量分别为 $a _ i, b _ i, c _ i$。\n\n添加的位置 $p _ i$ 是指，在添加后，加入的第一个单位燃料前面有 $p _ i$ 个单位的原燃料。\n\n全部的 $x _ i$ 单位燃料依次放置，然后原来在 $p _ i$ 位置的燃料（如果有的话）依次向后排列。\n\n对于一个确定的燃料序列，其能产生的最大总能量为：将序列依次分成\"通常-后期-增强-通常\"四段（每段可以为空），每一段在对应工作状态下产生的能量之和的最大值。\n\n对于每次添加操作，你需要给出该次操作使得最大总能量增加了多少。\n\n如果对于这种计算方式没有直观的感受，可以查看样例说明。", "inputFormat": "第一行一个数 $n$，表示操作个数。\n\n接下来 $n$ 行，每行 $5$ 个数 $p _ i, a _ i, b _ i, c _ i, x _ i$，空格分隔，表示向序列中的 $p _ i$ 位置添加 $x _ i$ 单位的同种燃料\n\n这种燃料每单位在通常、后期、增强工作状态下产生的能量分别为 $a _ i, b _ i, c _ i$。", "outputFormat": "$n$ 行，每行一个数，表示该次操作后能量序列所能产生的最大总能量增加了多少。", "hint": "第一次操作后，燃料序列为 `[1 1]`，最大能量发生方式为 `[En1 En1]`，共 $46+46=92$。\n\n第二次操作后，燃料序列为 `[1 2 2 2 1]`，最大能量发生方式为 `[Or1 Or2 Or2 Or2 En1]`，共 $25+32+32+32+46=167$，增加了 $167-92=75$。\n\n第三次操作后，燃料序列为 `[1 2 2 3 3 3 3 2 1]`，最大能量发生方式为 `[Or1 Or2 Or2 Or3 Or3 Or3 Or3 Or2 En1]`，增加了 $99\\times 4=396$。\n\n第四次操作后，燃料序列为 `[1 2 4 4 4 4 4 2 3 3 3 3 2 1]`，最大能量发生方式为 `[Or1 Or2 Ex4 Ex4 Ex4 Ex4 Ex4 Or2 Or3 Or3 Or3 Or3 Or2 Or1]`。\n\n第五次操作后，燃料序列为 `[1 2 4 4 4 4 4 2 3 3 3 3 2 1 5 5 5 5 5 5]`，最大能量发生方式为 `[Or1 Or2 Ex4 Ex4 Ex4 Ex4 Ex4 Or2 Or3 Or3 Or3 Or3 Or2 Or1 Or5 Or5 Or5 Or5 Or5 Or5]`。\n\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$, $1 \\leq a_i, b_i, c_i \\leq 10^4$， $1 \\leq x_i \\leq 10^9$。\n\n对于 $100\\%$ 的数据，保证插入时序列中至少已有 $p _ i$ 单位的燃料。\n\n后 $50\\%$ 数据有梯度。", "locale": "zh-CN"}}}
{"pid": "P3992", "type": "P", "difficulty": 7, "samples": [["2\n1 2\n3 4\n1\n1 3\n", "4\n2\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "各省省选", "北京", "O2优化", "排序", "前缀和", "分块"], "title": "[BJOI2017] 开车", "background": "", "description": "有 $n$ 辆车，分别在 $a_1, a_2, \\ldots , a_n$ 位置和 $n$ 个加油站，分别在 $b_1, b_2, \\ldots ,b_n$ 位置。\n\n每个加油站只能支持一辆车的加油，所以你要把这些车开到不同的加油站加油。一个车从 $x$ 位置开到 $y$ 位置的代价为 $|x-y|$，问如何安排车辆，使得代价之和最小。\n\n同时你有 $q$ 个操作，每次操作会修改第 $i$ 辆车的位置到 $x$，你要回答每次修改操作之后最优安排方案的总代价。\n", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行 $n$ 个整数 $a_1, a_2,\\ldots,a_n$。\n\n接下来一行 $n$ 个整数 $b_1, b_2,\\ldots,b_n$。\n\n接下来一行一个正整数 $q$，表示操作的个数。\n\n接下来 $q$ 行，每行有两个整数 $i$（$1\\leq i\\leq n$）和 $x$，表示将i这辆车开到 $x$ 位置的操作。\n\n所有的车和加油站的范围一直在 $0$ 到 $10^9$ 之间。\n", "outputFormat": "共 $q+1$ 行，第一行表示一开始的最优代价。\n\n接下来 $q$ 行，第 $i$ 行表示操作 $i$ 之后的最优代价。\n", "hint": "【样例解释】\n\n一开始将第一辆车开到位置 $4$，将第二辆车开到位置 $3$，代价为 $|4-1|+|3-2|=4$。\n\n修改后第一辆车的位置变成 $3$，代价为 $|3-3|+|4-2|=2$。\n\n|测试点|数据范围|\n|:-:|:-:|\n|$1$| $n\\leq 10^3$，$q=0$|\n|$2$| $n\\leq 10^3$，$q\\leq 10^3$|\n|$3$| $n\\leq 10^4$，$q\\leq 10^4$|\n|$4$| $n\\leq 5\\times 10^4$，$q=0$|\n|$5\\sim 6$| $n\\leq 3\\times 10^4$，$q\\leq 3\\times 10^4$|\n|$7\\sim 10$| $n\\leq 5\\times 10^4$，$q\\leq 5\\times 10^4$|\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 5\\times 10^4$，$0\\leq q\\leq 5\\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[BJOI2017] Driving", "background": "", "description": "There are $n$ cars located at positions $a_1, a_2, \\ldots, a_n$, and $n$ gas stations located at positions $b_1, b_2, \\ldots, b_n$.\n\nEach gas station can serve at most one car, so you must drive the cars to distinct gas stations. The cost for a car to drive from position $x$ to position $y$ is $|x - y|$. Find an assignment that minimizes the sum of costs.\n\nYou are also given $q$ operations. In each operation, the position of the $i$-th car is updated to $x$. After each update, you need to output the minimal total cost of an optimal assignment.", "inputFormat": "The first line contains a positive integer $n$.\n\nThe second line contains $n$ integers $a_1, a_2, \\ldots, a_n$.\n\nThe third line contains $n$ integers $b_1, b_2, \\ldots, b_n$.\n\nThe fourth line contains a positive integer $q$, the number of operations.\n\nEach of the next $q$ lines contains two integers $i$ ($1 \\le i \\le n$) and $x$, indicating that the position of car $i$ is updated to $x$.\n\nAll car and gas station positions are always within $0$ to $10^9$.", "outputFormat": "Output $q + 1$ lines. The first line is the minimal total cost before any operations.\n\nThen output $q$ lines, where the $i$-th line is the minimal total cost after operation $i$.", "hint": "Sample explanation:\n\nInitially, drive the first car to position $4$ and the second car to position $3$, with a total cost of $|4 - 1| + |3 - 2| = 4$.\n\nAfter the update, the first car’s position becomes $3$, and the total cost is $|3 - 3| + |4 - 2| = 2$.\n\n| Test points | Constraints |\n|:-:|:-:|\n| $1$ | $n \\le 10^3$, $q = 0$ |\n| $2$ | $n \\le 10^3$, $q \\le 10^3$ |\n| $3$ | $n \\le 10^4$, $q \\le 10^4$ |\n| $4$ | $n \\le 5 \\times 10^4$, $q = 0$ |\n| $5 \\sim 6$ | $n \\le 3 \\times 10^4$, $q \\le 3 \\times 10^4$ |\n| $7 \\sim 10$ | $n \\le 5 \\times 10^4$, $q \\le 5 \\times 10^4$ |\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 5 \\times 10^4$, $0 \\le q \\le 5 \\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BJOI2017] 开车", "background": "", "description": "有 $n$ 辆车，分别在 $a_1, a_2, \\ldots , a_n$ 位置和 $n$ 个加油站，分别在 $b_1, b_2, \\ldots ,b_n$ 位置。\n\n每个加油站只能支持一辆车的加油，所以你要把这些车开到不同的加油站加油。一个车从 $x$ 位置开到 $y$ 位置的代价为 $|x-y|$，问如何安排车辆，使得代价之和最小。\n\n同时你有 $q$ 个操作，每次操作会修改第 $i$ 辆车的位置到 $x$，你要回答每次修改操作之后最优安排方案的总代价。\n", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行 $n$ 个整数 $a_1, a_2,\\ldots,a_n$。\n\n接下来一行 $n$ 个整数 $b_1, b_2,\\ldots,b_n$。\n\n接下来一行一个正整数 $q$，表示操作的个数。\n\n接下来 $q$ 行，每行有两个整数 $i$（$1\\leq i\\leq n$）和 $x$，表示将i这辆车开到 $x$ 位置的操作。\n\n所有的车和加油站的范围一直在 $0$ 到 $10^9$ 之间。\n", "outputFormat": "共 $q+1$ 行，第一行表示一开始的最优代价。\n\n接下来 $q$ 行，第 $i$ 行表示操作 $i$ 之后的最优代价。\n", "hint": "【样例解释】\n\n一开始将第一辆车开到位置 $4$，将第二辆车开到位置 $3$，代价为 $|4-1|+|3-2|=4$。\n\n修改后第一辆车的位置变成 $3$，代价为 $|3-3|+|4-2|=2$。\n\n|测试点|数据范围|\n|:-:|:-:|\n|$1$| $n\\leq 10^3$，$q=0$|\n|$2$| $n\\leq 10^3$，$q\\leq 10^3$|\n|$3$| $n\\leq 10^4$，$q\\leq 10^4$|\n|$4$| $n\\leq 5\\times 10^4$，$q=0$|\n|$5\\sim 6$| $n\\leq 3\\times 10^4$，$q\\leq 3\\times 10^4$|\n|$7\\sim 10$| $n\\leq 5\\times 10^4$，$q\\leq 5\\times 10^4$|\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 5\\times 10^4$，$0\\leq q\\leq 5\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P3993", "type": "P", "difficulty": 7, "samples": [["6\n1\n2\n3\n4\n5\n6\n", "0\n-1\n-1\n-1\n-1\n9\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2017", "各省省选", "北京", "生成函数"], "title": "[BJOI2017] 同构", "background": "", "description": "你有 $n$ 个点，你可以在这 $n$ 个点之间连无向边，两个点之间至多只能连一条边，也不允许连自环，问至多能连多少条边。\n\n但这个问题的答案显然是 $\\dfrac{n(n-1)}{2}$ 条。所以有一个额外的限制，要求这个图不存在非平凡的自同构。\n\n一个图 $G$ 有非平凡的自同构定义为存在一个 $1$ 到 $n$ 的置换 $p(1)$ 到 $p(n)$ 满足对于所有点 $u,v$，$(u, v)$ 之间有边当且仅当 $(p(u), p(v))$ 之间有边，并且这个置换非平凡也就是存在一个点 $u$ 使得 $p(u) \\ne u$。\n\n比如对于一个 $5$ 个点的图 $(1,2),(2,3),(3,4),(4,5),(5,1),(1,3)$，那么 $p(1)=3$，$p(2)=2$，$p(3)=1$，$p(4)=5$，$p(5)=4$ 为这个图的一个非平凡的自同构。\n\n你要回答一个 $n$ 个点的无向简单的不存在非平凡自同构的图最多有多少条边，如果答案不存在，即不存在 $n$ 个点满足条件的图，请输出 `-1`，否则输出答案对 $10^9+7$ 取模的结果。", "inputFormat": "**本题有多组数据。**   \n一行一个正整数 $T$ 表示数据组数。   \n对于每组数据：   \n一个正整数 $n$ 表示你要回答的图的点的个数。", "outputFormat": "对于每组数据：   \n一行一个整数代表答案对 $10^9+7$ 取模的结果，如果不存在 $n$ 个点满足条件的图，就输出 `-1`。", "hint": "|测试点|数据范围|\n|:-:|:-:|\n|$1$|$n ,T \\le 6$|\n|$2$|$n,T \\le 10$|\n|$3,4$|$n,T \\le 100$|\n|$5,6$|$n \\le 10^5$|\n|$7,8$|$n \\le 10^9$|\n|$9$|$n \\le 10^{18}$|\n|$10$|$n=10^{100}$|\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^{100}$，$1 \\le T \\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[BJOI2017] Isomorphism", "background": "", "description": "You have $n$ vertices. You may add undirected edges between these $n$ vertices, with at most one edge per pair and no self-loops. What is the maximum number of edges you can add?\n\nThe obvious answer is $\\dfrac{n(n-1)}{2}$ edges. Therefore, there is an additional constraint: the graph must not have a nontrivial automorphism.\n\nA graph $G$ has a nontrivial automorphism if there exists a permutation $p$ of $\\{1, \\dots, n\\}$ such that for all vertices $u, v$, there is an edge between $u$ and $v$ if and only if there is an edge between $p(u)$ and $p(v)$, and this permutation is nontrivial, i.e., there exists a vertex $u$ with $p(u) \\ne u$.\n\nFor example, for the 5-vertex graph $(1,2),(2,3),(3,4),(4,5),(5,1),(1,3)$, the mapping $p(1)=3$, $p(2)=2$, $p(3)=1$, $p(4)=5$, $p(5)=4$ is a nontrivial automorphism of this graph.\n\nYou need to answer: among simple undirected graphs on $n$ vertices that have no nontrivial automorphism, what is the maximum number of edges? If no such graph on $n$ vertices exists, output `-1`; otherwise, output the answer modulo $10^9+7$.", "inputFormat": "**This problem contains multiple test cases.**  \nA single line with a positive integer $T$, the number of test cases.  \nFor each test case:  \nA single positive integer $n$, the number of vertices.", "outputFormat": "For each test case:  \nOutput a single integer, the answer modulo $10^9+7$. If no graph on $n$ vertices satisfies the condition, output `-1`.", "hint": "| Test point | Constraints |\n|:-:|:-:|\n| $1$ | $n, T \\le 6$ |\n| $2$ | $n, T \\le 10$ |\n| $3,4$ | $n, T \\le 100$ |\n| $5,6$ | $n \\le 10^5$ |\n| $7,8$ | $n \\le 10^9$ |\n| $9$ | $n \\le 10^{18}$ |\n| $10$ | $n=10^{100}$ |\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 10^{100}$, $1 \\le T \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BJOI2017] 同构", "background": "", "description": "你有 $n$ 个点，你可以在这 $n$ 个点之间连无向边，两个点之间至多只能连一条边，也不允许连自环，问至多能连多少条边。\n\n但这个问题的答案显然是 $\\dfrac{n(n-1)}{2}$ 条。所以有一个额外的限制，要求这个图不存在非平凡的自同构。\n\n一个图 $G$ 有非平凡的自同构定义为存在一个 $1$ 到 $n$ 的置换 $p(1)$ 到 $p(n)$ 满足对于所有点 $u,v$，$(u, v)$ 之间有边当且仅当 $(p(u), p(v))$ 之间有边，并且这个置换非平凡也就是存在一个点 $u$ 使得 $p(u) \\ne u$。\n\n比如对于一个 $5$ 个点的图 $(1,2),(2,3),(3,4),(4,5),(5,1),(1,3)$，那么 $p(1)=3$，$p(2)=2$，$p(3)=1$，$p(4)=5$，$p(5)=4$ 为这个图的一个非平凡的自同构。\n\n你要回答一个 $n$ 个点的无向简单的不存在非平凡自同构的图最多有多少条边，如果答案不存在，即不存在 $n$ 个点满足条件的图，请输出 `-1`，否则输出答案对 $10^9+7$ 取模的结果。", "inputFormat": "**本题有多组数据。**   \n一行一个正整数 $T$ 表示数据组数。   \n对于每组数据：   \n一个正整数 $n$ 表示你要回答的图的点的个数。", "outputFormat": "对于每组数据：   \n一行一个整数代表答案对 $10^9+7$ 取模的结果，如果不存在 $n$ 个点满足条件的图，就输出 `-1`。", "hint": "|测试点|数据范围|\n|:-:|:-:|\n|$1$|$n ,T \\le 6$|\n|$2$|$n,T \\le 10$|\n|$3,4$|$n,T \\le 100$|\n|$5,6$|$n \\le 10^5$|\n|$7,8$|$n \\le 10^9$|\n|$9$|$n \\le 10^{18}$|\n|$10$|$n=10^{100}$|\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^{100}$，$1 \\le T \\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P3994", "type": "P", "difficulty": 6, "samples": [["6\n1 9 3 0\n1 17 1 9\n1 1 1 6\n4 13 2 15\n4 9 2 4\n", "27\n26\n7\n43\n24\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["单调队列", "O2优化", "斜率优化", "队列"], "title": "高速公路", "background": null, "description": "C 国拥有一张四通八达的高速公路树。\n\nC 国有 $n$ 个城市，城市之间由一共 $n-1$ 条高速公路连接。除了首都 $1$ 号城市，每个城市都有一家本地的客运公司，可以发车前往全国各地。你可以把它认作以 $1$ 为根的树。两城市的距离定义为它们之间简单路径的长度。\n\n假设有一个人要从 $i$ 号城市坐车出发前往与其距离为 $D$ 的 $j$ 号城市，那么他要花费 $P_i \\times D+Q_i$ 元，**且要求满足 $j$ 是 $i$ 的祖先**。由于距离首都越远，国家的监管就越松，所以距离首都越远，客运公司的 $P_i$ 越大，如果 $i$ 号城市是 $j$ 号城市的某个祖先，那么一定存在 $P_i \\leq P_j$。\n\n小 T 成为了国家统计局的调查人员，他需要对现在的高速路网进行一次调查，了解从其他每一个城市到达首都 $1$ 号城市所花费的金钱。\n\n因为可能出现多转车（或不转车）的抵达首都的方法，所以人工计算这个结果是十分复杂的。大宁非常的懒，所以请你编写一个程序解决它。", "inputFormat": "第 $1$ 行包含一个整数 $n$，表示城市的个数。\n\n第 $2$ 到 $n$ 行，每行描述一个除首都之外的城市。其中第 $i$ 行包含 $4$ 个整数 $F_i,S_i,P_i,Q_i$，分别表示 $i$ 号城市的父亲城市，它到父亲城市高速公路的长度，以及乘车价格的两个参数。", "outputFormat": "输出包含 $n-1$ 行，每行包含一个整数。\n\n其中第 $i$ 行表示从 $i+1$ 号城市出发，到达首都最少的乘车费用。", "hint": "#### 数据规模与约定\n\n- 对于前 $40\\%$ 的数据 $n \\leq 1000$。\n- 对于另外 $20\\%$ 的数据，$F_i=i-1$\n- 对于所有的数据，$1 \\leq n \\leq 10^6$，$0 \\leq Pi,Qi \\lt 2^{31}$，保证结果不会大于 $2^{63}-1$。", "locale": "zh-CN", "translations": {"en": {"title": "Highway", "background": "", "description": "Country C has a well-connected highway network that forms a tree.\n\nThere are $n$ cities in Country C, connected by a total of $n - 1$ highways. Except for the capital, city $1$, each city has a local passenger transport company that can dispatch vehicles to various places nationwide. You can regard the network as a tree rooted at $1$. The distance between two cities is defined as the length of the simple path between them.\n\nSuppose a person departs from city $i$ to city $j$, which is at distance $D$ from $i$. Then the cost is $P_i \\times D + Q_i$ yuan, and it is required that $j$ is an ancestor of $i$. Because national supervision becomes looser farther from the capital, the $P_i$ of transport companies increases with distance from the capital: if city $i$ is an ancestor of city $j$, then $P_i \\leq P_j$.\n\nXiao T has become an investigator at the national statistics bureau. He needs to survey the current highway network to find out the cost to reach the capital, city $1$, from every other city.\n\nBecause reaching the capital may involve multiple transfers (or none), computing this by hand is very complicated. Xiao T is very lazy, so please write a program to solve it.", "inputFormat": "The first line contains an integer $n$, the number of cities.\n\nLines $2$ through $n$ each describe one city other than the capital. Specifically, line $i$ contains four integers $F_i, S_i, P_i, Q_i$, representing the parent city of city $i$, the length of the highway from city $i$ to its parent, and the two fare parameters of city $i$.", "outputFormat": "Output $n - 1$ lines, each containing an integer.\n\nThe $i$-th line contains the minimum cost to reach the capital starting from city $i + 1$.", "hint": "Constraints and Notes:\n- For the first $40\\%$ of the testdata, $n \\leq 1000$.\n- For another $20\\%$ of the testdata, $F_i = i - 1$.\n- For all the testdata, $1 \\leq n \\leq 10^6$, $0 \\leq P_i, Q_i < 2^{31}$, and the result is guaranteed not to exceed $2^{63} - 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "高速公路", "background": null, "description": "C 国拥有一张四通八达的高速公路树。\n\nC 国有 $n$ 个城市，城市之间由一共 $n-1$ 条高速公路连接。除了首都 $1$ 号城市，每个城市都有一家本地的客运公司，可以发车前往全国各地。你可以把它认作以 $1$ 为根的树。两城市的距离定义为它们之间简单路径的长度。\n\n假设有一个人要从 $i$ 号城市坐车出发前往与其距离为 $D$ 的 $j$ 号城市，那么他要花费 $P_i \\times D+Q_i$ 元，**且要求满足 $j$ 是 $i$ 的祖先**。由于距离首都越远，国家的监管就越松，所以距离首都越远，客运公司的 $P_i$ 越大，如果 $i$ 号城市是 $j$ 号城市的某个祖先，那么一定存在 $P_i \\leq P_j$。\n\n小 T 成为了国家统计局的调查人员，他需要对现在的高速路网进行一次调查，了解从其他每一个城市到达首都 $1$ 号城市所花费的金钱。\n\n因为可能出现多转车（或不转车）的抵达首都的方法，所以人工计算这个结果是十分复杂的。大宁非常的懒，所以请你编写一个程序解决它。", "inputFormat": "第 $1$ 行包含一个整数 $n$，表示城市的个数。\n\n第 $2$ 到 $n$ 行，每行描述一个除首都之外的城市。其中第 $i$ 行包含 $4$ 个整数 $F_i,S_i,P_i,Q_i$，分别表示 $i$ 号城市的父亲城市，它到父亲城市高速公路的长度，以及乘车价格的两个参数。", "outputFormat": "输出包含 $n-1$ 行，每行包含一个整数。\n\n其中第 $i$ 行表示从 $i+1$ 号城市出发，到达首都最少的乘车费用。", "hint": "#### 数据规模与约定\n\n- 对于前 $40\\%$ 的数据 $n \\leq 1000$。\n- 对于另外 $20\\%$ 的数据，$F_i=i-1$\n- 对于所有的数据，$1 \\leq n \\leq 10^6$，$0 \\leq Pi,Qi \\lt 2^{31}$，保证结果不会大于 $2^{63}-1$。", "locale": "zh-CN"}}}
{"pid": "P3995", "type": "P", "difficulty": 6, "samples": [["14 7\n1 4\n4 10\n4 9\n4 8\n9 13\n13 14\n3 1\n7 3\n2 1\n2 6\n6 12\n11 6\n5 2\n11 3\n7 8\n2 8\n11 1\n8 14\n5 7\n9 14\n", "2\n6\n7\n8\n0\n11\n0\n0\n13\n0\n0\n0\n14\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化", "树链剖分", "期望", "差分"], "title": "树链剖分", "background": "树链剖分，计算机术语，指一种对树进行划分的算法，它先通过轻重边剖分将树分为多条链，保证每个点属于且只属于一条链，然后再通过数据结构（树状数组、SBT、SPLAY、线段树等）来维护每一条链。(摘自百度百科)\n", "description": "大宁最近在研究树链剖分。他发现树链剖分的时间复杂度主要由轻重链的划分方式保证，最常见的剖分方式是按照子树大小剖分。如图（摘自百度百科），黑边为重链，长度任意，白边为轻链，长度全部为1。注意，下图 1-2, 1-3 为不同轻链。\n\n ![](https://cdn.luogu.com.cn/upload/pic/11502.png) \n\n其中对于每个节点，其在重链上的儿子叫做重儿子，且只有唯一一个，而叶子节点没有重儿子。例如对于图上 1 号点，重儿子是 4 号点。显然，对于不同剖分方式，同一组查询访问的链的数量不同。现在给定一棵根为 1 号节点的有根树和若干询问操作，每次询问访问从 $u$ 到 $v$ 上面的所有轻重链一次。例如在上图的剖分方式中，查询 3 到 8 一共访问了 3 条：轻链 1-3，重链 1-4，轻链 4-8；查询 3 到 11 一共访问了 3 条：轻链 1-3，轻链 1-2，重链 2-11。\n\n大宁请你给出一种剖分方案，使所有询问操作总共访问的**轻重链总条数**最小，由于可能有许多合法方案，请任意输出一种，我们提供Special Judge检验你的方案的正确性。\n\n设你的剖分方式的查询链数为 $x$，std 答案的查询数为 $x_0$，评分参数为 $a$ 。\n\n你得到的分数是：\n\n* $10$ 分  当 $x\\leq x_0$ 。\n\n* $8$ 分  当 $0<(x-x_0)\\leq a$ 。\n\n* $7$ 分  当 $a<(x-x0)\\leq 2\\times a$ 。\n\n* $6$ 分  当 $2\\times a<(x-x0)\\leq 3\\times a$ 。\n\n* $1$ 分  输出了合法的方案。\n\n\n\n$a=\\lfloor\\frac{q}{300}\\rfloor$, $q$ 为询问总数。\n\n我们提供了 `Div\\_Checker.exe` 来检验你的答案。把它放到 `div.in` , `div.out` 同文件夹下运行，其中 `div.in` 是输入数据的文件形式, `div.out` 是你的程序在该输入下的输出。如果你的 `div.out` 答案合法，它会返回：\n\n`Your answer is XXX.`\n\n`XXX` 是你的剖分方式在该输入数据下的查询次数，否则返回：\n\n`Wrong Outdata.`\n\n**注意: 在正式提交的时候不能使用文件输入输出。**\n", "inputFormat": "第一行有两个正整数 $n$ 和 $q$ ，表示该树的节点数 $n$ 和查询次数 $q$ 。\n\n接下来 $n-1$ 行，各有两个正整数 $u$ ，$v$ ，表示 $u$ 和 $v$ 之间有一条边。\n\n接下来 $q$ 行为 $q$ 个询问，为 $U$，$V$，表示有一次从 $U$ 到 $V$ 的询问。\n", "outputFormat": "一共 $n$ 行，对于 $i$ 号节点，如果它不是叶子节点，那么输出它在你的剖分方案里的重儿子，否则输出 0。\n", "hint": "样例即为上图，但图上的剖分方式对于此处的查询并非最优。\n\n对于 $20\\%$ 的数据，$n,q<=10$\n\n对于 $60\\%$ 的数据，$n,q<=1000$\n\n对于 $100\\%$ 的数据，$1<=n<=100000$,$1<=q<=200000$ ,保证给出的是一棵合法的树。\n\n[Div\\_Checker下载](https://pan.baidu.com/s/1c26OLf6)\n\n如果对Checker的使用方式不太理解，请参照下面的图片\n\n图中数据为样例。\n\n ![](https://cdn.luogu.com.cn/upload/pic/11563.png) \n\n一个合法方案的输出。\n\n ![](https://cdn.luogu.com.cn/upload/pic/11564.png) \n\n不合法方案的输出。\n\n![](https://cdn.luogu.com.cn/upload/pic/11565.png)\n\n---\n\n$\\text{upd 2022.8.26}$：新增加一组 Hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "Heavy-Light Decomposition", "background": "Heavy-light decomposition is a computing term for an algorithm that partitions a tree. It first splits the tree into multiple chains via heavy-light edge decomposition, ensuring each node belongs to exactly one chain, and then maintains each chain using data structures (Fenwick tree, SBT, SPLAY, segment tree, etc.). (from Baidu Baike)", "description": "Daning has been studying heavy-light decomposition. He found that the time complexity of heavy-light decomposition mainly depends on how heavy and light chains are divided, and the most common method is to split according to subtree size. As shown in the figure (from Baidu Baike), black edges are heavy chains (arbitrary length), and white edges are light chains (all of length $1$. Note that in the figure, $1$–$2$ and $1$–$3$ are different light chains.\n\n ![](https://cdn.luogu.com.cn/upload/pic/11502.png) \n\nFor each node, its child on the heavy chain is called its heavy child, and there is exactly one; leaf nodes have no heavy child. For example, for node $1$ in the figure, its heavy child is node $4$. Clearly, different decompositions lead to different numbers of chains visited by the same set of queries. Now, given a rooted tree with root $1$ and several queries, each query traverses all heavy-light chains along the path from $u$ to $v$ once. For example, under the decomposition in the figure above, the query from $3$ to $8$ visits $3$ chains in total: the light chain $1$–$3$, the heavy chain $1$–$4$, and the light chain $4$–$8$; the query from $3$ to $11$ also visits $3$ chains: the light chain $1$–$3$, the light chain $1$–$2$, and the heavy chain $2$–$11$.\n\nPlease output a decomposition scheme that minimizes the total number of heavy-light chains visited over all queries. Since there may be many valid schemes, output any one of them. We provide a Special Judge to check the correctness of your scheme.\n\nLet the total number of chains visited by your scheme be $x$, by the standard solution be $x_0$, and let the scoring parameter be $a$.\n\nYour score is:\n\n- $10$ points if $x \\leq x_0$.\n- $8$ points if $0 < (x - x_0) \\leq a$.\n- $7$ points if $a < (x - x_0) \\leq 2 \\times a$.\n- $6$ points if $2 \\times a < (x - x_0) \\leq 3 \\times a$.\n- $1$ point if you output a valid scheme.\n\n$a = \\lfloor \\frac{q}{300} \\rfloor$, where $q$ is the number of queries.\n\nWe provide `Div_Checker.exe` to check your answer. Put it in the same folder as `div.in` and `div.out`, then run it, where `div.in` is the input file and `div.out` is your program’s output on that input. If your `div.out` is valid, it will print:\n\n`Your answer is XXX.`\n\n`XXX` is the total number of chains visited by your decomposition on that input. Otherwise, it will print:\n\n`Wrong Outdata.`\n\nNote: You must not use file I/O in the official submission.", "inputFormat": "The first line contains two positive integers $n$ and $q$, the number of nodes of the tree and the number of queries.\n\nThe next $n - 1$ lines each contain two positive integers $u$, $v$, meaning there is an edge between $u$ and $v$.\n\nThe next $q$ lines each describe a query with two integers $U$, $V$, meaning a query from $U$ to $V$.", "outputFormat": "Output $n$ lines. For node $i$, if it is not a leaf, output its heavy child in your decomposition; otherwise, output $0$.", "hint": "The sample corresponds to the figure above, but the decomposition in the figure is not optimal for the sample queries.\n\nConstraints:\n- For $20\\%$ of the testdata, $n, q \\leq 10$.\n- For $60\\%$ of the testdata, $n, q \\leq 1000$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 100000$, $1 \\leq q \\leq 200000$. It is guaranteed the input is a valid tree.\n\n[Div_Checker download](https://pan.baidu.com/s/1c26OLf6)\n\nIf you are not sure how to use the checker, please refer to the images below.\n\nThe data in the images is the sample.\n\n ![](https://cdn.luogu.com.cn/upload/pic/11563.png) \n\nAn output of a valid scheme.\n\n ![](https://cdn.luogu.com.cn/upload/pic/11564.png) \n\nAn invalid output.\n\n![](https://cdn.luogu.com.cn/upload/pic/11565.png)\n\n---\n\n$\\text{upd 2022.8.26}$: Added a new set of hack testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "树链剖分", "background": "树链剖分，计算机术语，指一种对树进行划分的算法，它先通过轻重边剖分将树分为多条链，保证每个点属于且只属于一条链，然后再通过数据结构（树状数组、SBT、SPLAY、线段树等）来维护每一条链。(摘自百度百科)\n", "description": "大宁最近在研究树链剖分。他发现树链剖分的时间复杂度主要由轻重链的划分方式保证，最常见的剖分方式是按照子树大小剖分。如图（摘自百度百科），黑边为重链，长度任意，白边为轻链，长度全部为1。注意，下图 1-2, 1-3 为不同轻链。\n\n ![](https://cdn.luogu.com.cn/upload/pic/11502.png) \n\n其中对于每个节点，其在重链上的儿子叫做重儿子，且只有唯一一个，而叶子节点没有重儿子。例如对于图上 1 号点，重儿子是 4 号点。显然，对于不同剖分方式，同一组查询访问的链的数量不同。现在给定一棵根为 1 号节点的有根树和若干询问操作，每次询问访问从 $u$ 到 $v$ 上面的所有轻重链一次。例如在上图的剖分方式中，查询 3 到 8 一共访问了 3 条：轻链 1-3，重链 1-4，轻链 4-8；查询 3 到 11 一共访问了 3 条：轻链 1-3，轻链 1-2，重链 2-11。\n\n大宁请你给出一种剖分方案，使所有询问操作总共访问的**轻重链总条数**最小，由于可能有许多合法方案，请任意输出一种，我们提供Special Judge检验你的方案的正确性。\n\n设你的剖分方式的查询链数为 $x$，std 答案的查询数为 $x_0$，评分参数为 $a$ 。\n\n你得到的分数是：\n\n* $10$ 分  当 $x\\leq x_0$ 。\n\n* $8$ 分  当 $0<(x-x_0)\\leq a$ 。\n\n* $7$ 分  当 $a<(x-x0)\\leq 2\\times a$ 。\n\n* $6$ 分  当 $2\\times a<(x-x0)\\leq 3\\times a$ 。\n\n* $1$ 分  输出了合法的方案。\n\n\n\n$a=\\lfloor\\frac{q}{300}\\rfloor$, $q$ 为询问总数。\n\n我们提供了 `Div\\_Checker.exe` 来检验你的答案。把它放到 `div.in` , `div.out` 同文件夹下运行，其中 `div.in` 是输入数据的文件形式, `div.out` 是你的程序在该输入下的输出。如果你的 `div.out` 答案合法，它会返回：\n\n`Your answer is XXX.`\n\n`XXX` 是你的剖分方式在该输入数据下的查询次数，否则返回：\n\n`Wrong Outdata.`\n\n**注意: 在正式提交的时候不能使用文件输入输出。**\n", "inputFormat": "第一行有两个正整数 $n$ 和 $q$ ，表示该树的节点数 $n$ 和查询次数 $q$ 。\n\n接下来 $n-1$ 行，各有两个正整数 $u$ ，$v$ ，表示 $u$ 和 $v$ 之间有一条边。\n\n接下来 $q$ 行为 $q$ 个询问，为 $U$，$V$，表示有一次从 $U$ 到 $V$ 的询问。\n", "outputFormat": "一共 $n$ 行，对于 $i$ 号节点，如果它不是叶子节点，那么输出它在你的剖分方案里的重儿子，否则输出 0。\n", "hint": "样例即为上图，但图上的剖分方式对于此处的查询并非最优。\n\n对于 $20\\%$ 的数据，$n,q<=10$\n\n对于 $60\\%$ 的数据，$n,q<=1000$\n\n对于 $100\\%$ 的数据，$1<=n<=100000$,$1<=q<=200000$ ,保证给出的是一棵合法的树。\n\n[Div\\_Checker下载](https://pan.baidu.com/s/1c26OLf6)\n\n如果对Checker的使用方式不太理解，请参照下面的图片\n\n图中数据为样例。\n\n ![](https://cdn.luogu.com.cn/upload/pic/11563.png) \n\n一个合法方案的输出。\n\n ![](https://cdn.luogu.com.cn/upload/pic/11564.png) \n\n不合法方案的输出。\n\n![](https://cdn.luogu.com.cn/upload/pic/11565.png)\n\n---\n\n$\\text{upd 2022.8.26}$：新增加一组 Hack 数据。", "locale": "zh-CN"}}}
{"pid": "P3996", "type": "P", "difficulty": 6, "samples": [["7\n3 1 5 16\n10 1 0 5\n2 1 0 3\n2 1 0 10\n3 1 5 59\n1 2 0 998\n0 1 0 0\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["O2优化"], "title": "失败的竞猜游戏", "background": "大宁是一个喜欢赌博的人，最近在玩一款竞猜游戏，然而屡战屡败。大宁非常不高兴，就去找游戏的运营商理论，质疑游戏的数据是否有意针对玩家。\n", "description": "游戏规则如下：玩家给出 $A_0$，$a$，$b$ 三个整数，代表一个线性递推式：\n\n$A_i=a \\times A_{i-1} +b$\n\n它定义了一个无限长度的数列 {$A_1$，$A_2$，$A_3$……}，而游戏系统会随机生成一个数 $n$，如果 $n$ 可以表示为该数列中的若干个**互不相同**的项 ( $A_0$ 不计入数列中) 之和，那么玩家胜利，反之玩家失败。现在大宁通过逼迫运营商交出了一组最近的游戏数据，但是他懒得一个个去算了，现在请你帮忙计算一下，数据中玩家一共获胜了多少次。\n", "inputFormat": "第一行一个正整数 $T$，表示进行了 $T$ 场游戏。\n\n接下来 $T$ 行，每行四个整数，描述一场游戏，分别为题目中的 $A_0$，$a$，$b$，$n$。\n", "outputFormat": "输出一行 $Ans$，表示玩家在 $T$ 场游戏中获胜的次数。\n", "hint": "样例说明：\n\n第 $1\\sim 3$ 场游戏玩家失败，$4\\sim 7$ 场游戏玩家胜利。\n\n| 测试点编号 | 数据范围 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1\\sim 2$ | $T=10$, $n\\leq 10^3$ | $a=1$ |\n| $3\\sim 4$ | $T=10^3$, $n\\leq 10^4$ | $a=2$ |\n| $5$ | $T=10^4$, $n\\leq 10^9$ | $a\\leq 3$ |\n| $6$ | $T=10^5$, $n\\leq 10^9$ | $b=0$ |\n| $7\\sim 10$ | $T=2\\times 10^5$, $n\\leq10^9$ | 无 |\n对于所有数据，$1\\leq a\\leq10$, $0 \\leq b \\leq 10^4$, $0\\leq n \\leq 10^9$, $0 \\leq A_0 \\leq 100$。\n\n事实上这个游戏玩家的胜率微乎其微。\n", "locale": "zh-CN", "translations": {"en": {"title": "A Failed Guessing Game", "background": "Daning is a person who likes gambling and has recently been playing a guessing game, but he keeps losing. He is very unhappy and goes to argue with the game operator, questioning whether the game's testdata is intentionally targeting players.", "description": "The game rules are as follows: The player gives three integers $A_0$, $a$, $b$, which define a linear recurrence:\n$A_i=a \\times A_{i-1} +b$\nIt defines an infinite sequence { $A_1$, $A_2$, $A_3$, ... }. The game system randomly generates a number $n$. If $n$ can be represented as the sum of several distinct terms from this sequence (excluding $A_0$), the player wins; otherwise, the player loses. Now Daning has forced the operator to hand over a batch of recent game testdata, but he is too lazy to compute them one by one. Please help determine how many times the player won in the testdata.", "inputFormat": "The first line contains a positive integer $T$, the number of games played.\nEach of the next $T$ lines contains four integers, describing one game: $A_0$, $a$, $b$, $n$.", "outputFormat": "Output one line with $Ans$, the number of times the player won among the $T$ games.", "hint": "Sample explanation:\nIn games $1 \\sim 3$ the player loses; in games $4 \\sim 7$ the player wins.\n\n| Test point ID | Constraints | Special properties |\n| :----------: | :----------: | :----------: |\n| $1 \\sim 2$ | $T=10$, $n \\leq 10^3$ | $a=1$ |\n| $3 \\sim 4$ | $T=10^3$, $n \\leq 10^4$ | $a=2$ |\n| $5$ | $T=10^4$, $n \\leq 10^9$ | $a \\leq 3$ |\n| $6$ | $T=10^5$, $n \\leq 10^9$ | $b=0$ |\n| $7 \\sim 10$ | $T=2 \\times 10^5$, $n \\leq 10^9$ | None |\n\nFor all testdata, $1 \\leq a \\leq 10$, $0 \\leq b \\leq 10^4$, $0 \\leq n \\leq 10^9$, $0 \\leq A_0 \\leq 100$.\n\nIn fact, the player's win rate in this game is negligible.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "失败的竞猜游戏", "background": "大宁是一个喜欢赌博的人，最近在玩一款竞猜游戏，然而屡战屡败。大宁非常不高兴，就去找游戏的运营商理论，质疑游戏的数据是否有意针对玩家。\n", "description": "游戏规则如下：玩家给出 $A_0$，$a$，$b$ 三个整数，代表一个线性递推式：\n\n$A_i=a \\times A_{i-1} +b$\n\n它定义了一个无限长度的数列 {$A_1$，$A_2$，$A_3$……}，而游戏系统会随机生成一个数 $n$，如果 $n$ 可以表示为该数列中的若干个**互不相同**的项 ( $A_0$ 不计入数列中) 之和，那么玩家胜利，反之玩家失败。现在大宁通过逼迫运营商交出了一组最近的游戏数据，但是他懒得一个个去算了，现在请你帮忙计算一下，数据中玩家一共获胜了多少次。\n", "inputFormat": "第一行一个正整数 $T$，表示进行了 $T$ 场游戏。\n\n接下来 $T$ 行，每行四个整数，描述一场游戏，分别为题目中的 $A_0$，$a$，$b$，$n$。\n", "outputFormat": "输出一行 $Ans$，表示玩家在 $T$ 场游戏中获胜的次数。\n", "hint": "样例说明：\n\n第 $1\\sim 3$ 场游戏玩家失败，$4\\sim 7$ 场游戏玩家胜利。\n\n| 测试点编号 | 数据范围 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1\\sim 2$ | $T=10$, $n\\leq 10^3$ | $a=1$ |\n| $3\\sim 4$ | $T=10^3$, $n\\leq 10^4$ | $a=2$ |\n| $5$ | $T=10^4$, $n\\leq 10^9$ | $a\\leq 3$ |\n| $6$ | $T=10^5$, $n\\leq 10^9$ | $b=0$ |\n| $7\\sim 10$ | $T=2\\times 10^5$, $n\\leq10^9$ | 无 |\n对于所有数据，$1\\leq a\\leq10$, $0 \\leq b \\leq 10^4$, $0\\leq n \\leq 10^9$, $0 \\leq A_0 \\leq 100$。\n\n事实上这个游戏玩家的胜率微乎其微。\n", "locale": "zh-CN"}}}
{"pid": "P3997", "type": "P", "difficulty": 6, "samples": [["3 8 2\n1 -8 8\n3 -7 3\n5 -5 5", "76"], ["2 4 1\n4 -4 2\n1 -4 4", "98"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2013", "线段树", "各省省选", "树状数组", "上海", "O2优化", "扫描线"], "title": "[SHOI2013] 扇形面积并", "background": "", "description": " ![](https://cdn.luogu.com.cn/upload/pic/11825.png) \n\n给定 n 个同心的扇形，求有多少面积，被至少 $k$ 个扇形所覆盖。\n", "inputFormat": "第一行是三个整数 $n$，$m$，$k$。$n$ 代表同心扇形个数，$m$ 代表将 $(−\\pi ,\\pi]$ 的角度区间平均分成 $2m$ 份。\n\n从第二行开始的 $n$ 行，每行三个整数 $r，a_1，a_2$。描述了一个圆心在原点的扇形，半径为 $r$，圆心角是从弧度 $\\pi\\times \\frac{a_1}{m}$ 到 $\\pi\\times \\frac{a_2}{m}$（$a_1$ 不一定小于 $a_2$）。\n", "outputFormat": "输出一个整数 $ans$ ，$\\frac{\\pi}{2m}\\times ans$ 等于至少 $k$ 个扇形所覆盖的总面积。\n\n数据保证答案在 $2^{63} - 1$ 范围内。\n", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$, $1\\leq m\\leq 10^6$, $1\\leq k\\leq 5000$, $1\\leq r_i\\leq 10^5$,$-m\\leq a_1,a_2\\leq m$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2013] Union of Sector Areas", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/pic/11825.png)\n\nGiven $n$ concentric sectors, find how much area is covered by at least $k$ sectors.", "inputFormat": "The first line contains three integers $n$, $m$, $k$. Here, $n$ is the number of concentric sectors, and $m$ means the angle interval $(-\\pi, \\pi]$ is evenly divided into $2m$ parts.\n\nFrom the second line, each of the next $n$ lines contains three integers $r, a_1, a_2$. Each line describes a sector centered at the origin with radius $r$, whose central angle ranges from radians $\\pi \\times \\frac{a_1}{m}$ to $\\pi \\times \\frac{a_2}{m}$ ($a_1$ is not necessarily less than $a_2$).", "outputFormat": "Output an integer $ans$, such that $\\frac{\\pi}{2m} \\times ans$ equals the total area covered by at least $k$ sectors.\n\nIt is guaranteed that the answer is within the range $2^{63} - 1$.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $1 \\le m \\le 10^6$, $1 \\le k \\le 5000$, $1 \\le r_i \\le 10^5$, $-m \\le a_1, a_2 \\le m$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2013] 扇形面积并", "background": "", "description": " ![](https://cdn.luogu.com.cn/upload/pic/11825.png) \n\n给定 n 个同心的扇形，求有多少面积，被至少 $k$ 个扇形所覆盖。\n", "inputFormat": "第一行是三个整数 $n$，$m$，$k$。$n$ 代表同心扇形个数，$m$ 代表将 $(−\\pi ,\\pi]$ 的角度区间平均分成 $2m$ 份。\n\n从第二行开始的 $n$ 行，每行三个整数 $r，a_1，a_2$。描述了一个圆心在原点的扇形，半径为 $r$，圆心角是从弧度 $\\pi\\times \\frac{a_1}{m}$ 到 $\\pi\\times \\frac{a_2}{m}$（$a_1$ 不一定小于 $a_2$）。\n", "outputFormat": "输出一个整数 $ans$ ，$\\frac{\\pi}{2m}\\times ans$ 等于至少 $k$ 个扇形所覆盖的总面积。\n\n数据保证答案在 $2^{63} - 1$ 范围内。\n", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$, $1\\leq m\\leq 10^6$, $1\\leq k\\leq 5000$, $1\\leq r_i\\leq 10^5$,$-m\\leq a_1,a_2\\leq m$。\n", "locale": "zh-CN"}}}
