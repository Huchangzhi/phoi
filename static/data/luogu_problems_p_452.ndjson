{"pid": "P10167", "type": "P", "difficulty": 6, "samples": [["123?13?23\n1 10", "507086689"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "洛谷月赛", "拉格朗日插值法"], "title": "[DTCPC 2024] 小方学乘法", "background": "小方上数学课，开始学乘法，但是他在课上睡着了。", "description": "\n他梦见了一个数学公式，只包含数字和乘号，梦境是迷糊的，所以他可能会把乘号看成字母 $x$。\n\n他冥冥之中记得这个 $x$ 的值，并且他认为字母可以看成数字，因此他在将字母 $x$ 都替换为了数字的情况下算出了这个表达式的值。\n\n然后他被教练抓到睡觉了。\n\n在被 gank 之前，他想回忆起梦中算出的值。\n\n但是小方太困了，所以他决定求出所有情况下的值，也就是将每个**乘号**都替换或者不替换为字母 $x$ 所代表的值后，对所有可能情况求和。\n\n然而小方连 $x$ 都忘记了，只记得它在某个范围 $[L,R]$ 内，所以他要对每个 $x$ 求出上面那个和的和。\n\n小方刚学乘法，算不清太大的数字，所以他想让你求出答案 $\\bmod {10^9+7}$ 的结果。\n\n**形式化题意**\n\n给你一个只含有数字 $1 \\sim 9$ 和 `?` 的字符串 $s$，保证没有两个相邻的 `?`，且字符串的第一个字符和最后一个字符都不是 `?`。\n\n现在每个 `?` 可以换成 $x$ 或者 $\\times$，其中 $x$ 是一个给定的字符串拼接变量。\n\n比如 `12x45` 当 $x=33$ 时替换结果为 `123345`。\n\n记 $x=k$ 时所有 `?` 替换方案下表达式的权值和为 $f(k)$。\n\n求 $\\sum_{i=L}^R{f(i)} \\bmod {10^9 + 7}$。\n\n\n", "inputFormat": "第一行一个长度为 $n$（$1 \\le n \\le 2000$） 字符串 $S$，表示算式。\n\n第二行两个正整数 $L,R$（$1 \\le L \\le R < 10^{18}$）。", "outputFormat": "一行一个正整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 小方学乘法", "background": "小方上数学课，开始学乘法，但是他在课上睡着了。", "description": "\n他梦见了一个数学公式，只包含数字和乘号，梦境是迷糊的，所以他可能会把乘号看成字母 $x$。\n\n他冥冥之中记得这个 $x$ 的值，并且他认为字母可以看成数字，因此他在将字母 $x$ 都替换为了数字的情况下算出了这个表达式的值。\n\n然后他被教练抓到睡觉了。\n\n在被 gank 之前，他想回忆起梦中算出的值。\n\n但是小方太困了，所以他决定求出所有情况下的值，也就是将每个**乘号**都替换或者不替换为字母 $x$ 所代表的值后，对所有可能情况求和。\n\n然而小方连 $x$ 都忘记了，只记得它在某个范围 $[L,R]$ 内，所以他要对每个 $x$ 求出上面那个和的和。\n\n小方刚学乘法，算不清太大的数字，所以他想让你求出答案 $\\bmod {10^9+7}$ 的结果。\n\n**形式化题意**\n\n给你一个只含有数字 $1 \\sim 9$ 和 `?` 的字符串 $s$，保证没有两个相邻的 `?`，且字符串的第一个字符和最后一个字符都不是 `?`。\n\n现在每个 `?` 可以换成 $x$ 或者 $\\times$，其中 $x$ 是一个给定的字符串拼接变量。\n\n比如 `12x45` 当 $x=33$ 时替换结果为 `123345`。\n\n记 $x=k$ 时所有 `?` 替换方案下表达式的权值和为 $f(k)$。\n\n求 $\\sum_{i=L}^R{f(i)} \\bmod {10^9 + 7}$。\n\n\n", "inputFormat": "第一行一个长度为 $n$（$1 \\le n \\le 2000$） 字符串 $S$，表示算式。\n\n第二行两个正整数 $L,R$（$1 \\le L \\le R < 10^{18}$）。", "outputFormat": "一行一个正整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10168", "type": "P", "difficulty": 3, "samples": [["111100", "8\n2\n1 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "构造", "洛谷月赛"], "title": "[DTCPC 2024] 0=1=0", "background": "", "description": "给你一个只含 $0$ 和 $1$ 的字符串 $s$。\n\n每次你可以选择 $i\\in [1,n)$，并将 $s_i$ 和 $s_{i+1}$ 分别取反。\n\n定义 $1$ 取反结果为 $0$，$0$ 取反结果为 $1$。\n\n要求使得顺序对数量最大，即使得 $i\\lt j$ 且 $s_i\\lt s_j$ 的 $(i,j)$ 个数最大。\n\n输出方案。", "inputFormat": "一行一个字符串 $S$（$\\lvert S\\rvert\\leq 2\\times 10^5$）。", "outputFormat": "第一行输出一个数字，表示最大的顺序对个数。\n\n第二行输出一个数字 $x$，表示操作步数。\n\n接下来输出一行 $x$ 个数字，第 $i$ 个数字 $a_i$ 表示第 $i$ 步操作的是 $s_{a_i}$ 和 $s_{a_i+1}$ 。\n\n**你要保证操作步数不超过 $2\\times 10^5$ 步，但不必最小化操作步数。**", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 0=1=0", "background": "", "description": "给你一个只含 $0$ 和 $1$ 的字符串 $s$。\n\n每次你可以选择 $i\\in [1,n)$，并将 $s_i$ 和 $s_{i+1}$ 分别取反。\n\n定义 $1$ 取反结果为 $0$，$0$ 取反结果为 $1$。\n\n要求使得顺序对数量最大，即使得 $i\\lt j$ 且 $s_i\\lt s_j$ 的 $(i,j)$ 个数最大。\n\n输出方案。", "inputFormat": "一行一个字符串 $S$（$\\lvert S\\rvert\\leq 2\\times 10^5$）。", "outputFormat": "第一行输出一个数字，表示最大的顺序对个数。\n\n第二行输出一个数字 $x$，表示操作步数。\n\n接下来输出一行 $x$ 个数字，第 $i$ 个数字 $a_i$ 表示第 $i$ 步操作的是 $s_{a_i}$ 和 $s_{a_i+1}$ 。\n\n**你要保证操作步数不超过 $2\\times 10^5$ 步，但不必最小化操作步数。**", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10169", "type": "P", "difficulty": 6, "samples": [["3 0\n1 0 2", "5"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2024", "颜色段均摊（珂朵莉树 ODT）", "洛谷月赛", "单调栈"], "title": "[DTCPC 2024] mex,min,max", "background": "", "description": "给定序列 $\\{a_n\\}$ 和 $k$，求有多少子区间 $[l,r]$ 满足 $\\operatorname{mex}\\{a_l,a_{l+1},\\dots,a_{r-1},a_r\\}+\\min\\{a_l,a_{l+1},\\dots,a_{r-1},a_r\\}+k\\geq \\max\\{a_l,a_{l+1},\\dots,a_{r-1},a_r\\}$。\n\n$\\operatorname{mex}$ 定义为集合内没有出现过的最小的**非负整数**。", "inputFormat": "第一行两个整数 $n,k$（$1\\leq n\\leq 5\\times 10^5,0\\leq k\\leq n$）。\n\n第二行 $n$ 个非负整数，第 $i$ 个表示 $a_i$（$0\\leq a_i\\leq n$）。", "outputFormat": "一行一个数，表示满足条件的子区间个数。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] mex,min,max", "background": "", "description": "给定序列 $\\{a_n\\}$ 和 $k$，求有多少子区间 $[l,r]$ 满足 $\\operatorname{mex}\\{a_l,a_{l+1},\\dots,a_{r-1},a_r\\}+\\min\\{a_l,a_{l+1},\\dots,a_{r-1},a_r\\}+k\\geq \\max\\{a_l,a_{l+1},\\dots,a_{r-1},a_r\\}$。\n\n$\\operatorname{mex}$ 定义为集合内没有出现过的最小的**非负整数**。", "inputFormat": "第一行两个整数 $n,k$（$1\\leq n\\leq 5\\times 10^5,0\\leq k\\leq n$）。\n\n第二行 $n$ 个非负整数，第 $i$ 个表示 $a_i$（$0\\leq a_i\\leq n$）。", "outputFormat": "一行一个数，表示满足条件的子区间个数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10170", "type": "P", "difficulty": 2, "samples": [["ababa", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "2024", "洛谷月赛"], "title": "[DTCPC 2024] 小方和小立方", "background": "小方不想变成小立方。", "description": "给你一个由小写字母组成的字符串，求有多少个区间 $[l,r]$，满足这个区间所表示的串是回文的，且每个字符的出现次数不超过 $2$。", "inputFormat": "一行一个字符串 $S$（$\\lvert S\\rvert\\leq 5\\times 10^4$）。", "outputFormat": "一行一个数，表示答案。", "hint": null, "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 小方和小立方", "background": "小方不想变成小立方。", "description": "给你一个由小写字母组成的字符串，求有多少个区间 $[l,r]$，满足这个区间所表示的串是回文的，且每个字符的出现次数不超过 $2$。", "inputFormat": "一行一个字符串 $S$（$\\lvert S\\rvert\\leq 5\\times 10^4$）。", "outputFormat": "一行一个数，表示答案。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P10171", "type": "P", "difficulty": 5, "samples": [["3 1 3\n11 7 6", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "数论", "快速傅里叶变换 FFT", "洛谷月赛"], "title": "[DTCPC 2024] 取模", "background": "", "description": "给定序列 $\\{a_n\\}$ 和 $[L,R]$，问有多少个 $k\\in [L,R]$ 满足 $a_i\\bmod k$ 互不相同。", "inputFormat": "第一行三个正整数 $n,L,R$（$n\\leq 5\\times 10^4,1\\leq L\\leq R\\leq 10^9$）。\n\n第二行 $n$ 个正整数，表示 $\\{a_n\\}$（$0 < a_i\\leq 4\\times10^5$）。", "outputFormat": "一行一个数，表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 取模", "background": "", "description": "给定序列 $\\{a_n\\}$ 和 $[L,R]$，问有多少个 $k\\in [L,R]$ 满足 $a_i\\bmod k$ 互不相同。", "inputFormat": "第一行三个正整数 $n,L,R$（$n\\leq 5\\times 10^4,1\\leq L\\leq R\\leq 10^9$）。\n\n第二行 $n$ 个正整数，表示 $\\{a_n\\}$（$0 < a_i\\leq 4\\times10^5$）。", "outputFormat": "一行一个数，表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10172", "type": "P", "difficulty": 4, "samples": [["2 2", "3\n1 2\n3 -1"], ["3 5", "12\n2 3 4 5 6\n1 -1 12 -1 7\n8 9 -1 11 10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "Special Judge", "O2优化", "构造"], "title": "「OICon-02」Pick Stone", "background": "", "description": "小 S 有一个 $n\\times m$ 的棋盘。初始每个位置都有一个棋子。每次，小 S 可以取走一个周围（四连通）被取走棋子数不超过 $1$ 的棋子。求小 S 最多能取走多少棋子，并构造一种合法的取棋子方案。", "inputFormat": "一行，两个正整数 $n,m$，表示棋盘大小。", "outputFormat": "第一行一个正整数，表示最多能取走的棋子数 $ans$。\n\n接下来 $n$ 行，每行 $m$ 个 $-1\\sim ans$ 之间的整数。每个位置的数表示这个位置的棋子是第几个取走的。如果该位置的棋子没被取走，请输出 $-1$。", "hint": "### 样例解释\n\n对于样例 $1$，取出 $(1,1)$ 时周围有 $0$ 个已取出位置，取出 $(1,2),(2,1)$ 时周围有 $1$ 个已取出位置，故原构造符合要求。\n\n容易证明没有更优答案。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n|:--:|:--:|:--:|\n| $1$ | $n=1$ | $20$ |\n| $2$ | $n=2$ | $30$ |\n| $3$ | $n=3$ | $50$ |\n\n对于 $100\\%$ 的数据：$\\bm{1\\leq n\\leq3}$，$1\\leq m\\leq10^5$。\n\n如果你答对了第一问最多能取走的棋子数而没有正确地构造，你将获得 $70\\%$ 的分值。一个子任务你的得分是所有测试点得分的最小值。注意，你仍需要按格式输出 $n\\times m$ 个数表示构造方案，我们推荐你全部输出 $-1$。\n\n保证 `checker.cpp` 在符合格式要求的输出下用时不超过 $0.5$ 秒。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「OICon-02」Pick Stone", "background": "", "description": "小 S 有一个 $n\\times m$ 的棋盘。初始每个位置都有一个棋子。每次，小 S 可以取走一个周围（四连通）被取走棋子数不超过 $1$ 的棋子。求小 S 最多能取走多少棋子，并构造一种合法的取棋子方案。", "inputFormat": "一行，两个正整数 $n,m$，表示棋盘大小。", "outputFormat": "第一行一个正整数，表示最多能取走的棋子数 $ans$。\n\n接下来 $n$ 行，每行 $m$ 个 $-1\\sim ans$ 之间的整数。每个位置的数表示这个位置的棋子是第几个取走的。如果该位置的棋子没被取走，请输出 $-1$。", "hint": "### 样例解释\n\n对于样例 $1$，取出 $(1,1)$ 时周围有 $0$ 个已取出位置，取出 $(1,2),(2,1)$ 时周围有 $1$ 个已取出位置，故原构造符合要求。\n\n容易证明没有更优答案。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n|:--:|:--:|:--:|\n| $1$ | $n=1$ | $20$ |\n| $2$ | $n=2$ | $30$ |\n| $3$ | $n=3$ | $50$ |\n\n对于 $100\\%$ 的数据：$\\bm{1\\leq n\\leq3}$，$1\\leq m\\leq10^5$。\n\n如果你答对了第一问最多能取走的棋子数而没有正确地构造，你将获得 $70\\%$ 的分值。一个子任务你的得分是所有测试点得分的最小值。注意，你仍需要按格式输出 $n\\times m$ 个数表示构造方案，我们推荐你全部输出 $-1$。\n\n保证 `checker.cpp` 在符合格式要求的输出下用时不超过 $0.5$ 秒。", "locale": "zh-CN"}}}
{"pid": "P10173", "type": "P", "difficulty": 5, "samples": [["4\n1 3 4 2", "14"], ["10\n1 3 6 2 7 9 4 10 8 5", "1992"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化", "笛卡尔树", "单调栈"], "title": "「OICon-02」maxiMINImax", "background": "", "description": "给出一个长度为 $n$ 的排列 $a$。定义一个子区间 $[l,r]$ 中 $a_i$ 的最小值为 $\\min_{[l,r]}$，$a_i$ 的最大值为 $\\max_{[l,r]}$。对于所有子区间三元组 $([l_1,r_1],[l_2,r_2],[l_3,r_3])$ 使得 $1\\leq l_1\\leq r_1<l_2\\leq r_2<l_3\\leq r_3\\leq n$，求 $\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})$ 之和，对 $9712176$ 取模。", "inputFormat": "第一行，一个正整数 $n$，表示排列的长度。\n\n第二行，$n$ 个正整数 $a$，表示给出的排列 $a$。", "outputFormat": "一行，一个正整数，表示 $\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})$ 之和，对 $9712176$ 取模。", "hint": "### 样例解释\n\n对于样例 $1$：\n\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,2],[3,3])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=0$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,2],[3,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=0$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,2],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[3,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=6$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,2],[3,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([2,2],[3,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$。\n\n所有 $([l_1,r_1],[l_2,r_2],[l_3,r_3])$ 的 $\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})$ 总和为 $0+0+2+2+6+2+2=14$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n|:--:|:--:|:--:|\n| $1$ | $n\\leq60$ | $5$ |\n| $2$ | $n\\leq100$ | $9$ |\n| $3$ | $n\\leq200$ | $9$ |\n| $4$ | $n\\leq500$ | $9$ |\n| $5$ | $n\\leq2000$ | $19$ |\n| $6$ | $n\\leq6000$ | $11$ |\n| $7$ | $n\\leq10^5$ | $19$ |\n| $8$ | 无特殊限制 | $19$ |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq10^6$，$1\\leq a_i\\leq n$，保证 $a$ 为 $\\{1,2,\\dots,n\\}$ 的一个排列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「OICon-02」maxiMINImax", "background": "", "description": "给出一个长度为 $n$ 的排列 $a$。定义一个子区间 $[l,r]$ 中 $a_i$ 的最小值为 $\\min_{[l,r]}$，$a_i$ 的最大值为 $\\max_{[l,r]}$。对于所有子区间三元组 $([l_1,r_1],[l_2,r_2],[l_3,r_3])$ 使得 $1\\leq l_1\\leq r_1<l_2\\leq r_2<l_3\\leq r_3\\leq n$，求 $\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})$ 之和，对 $9712176$ 取模。", "inputFormat": "第一行，一个正整数 $n$，表示排列的长度。\n\n第二行，$n$ 个正整数 $a$，表示给出的排列 $a$。", "outputFormat": "一行，一个正整数，表示 $\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})$ 之和，对 $9712176$ 取模。", "hint": "### 样例解释\n\n对于样例 $1$：\n\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,2],[3,3])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=0$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,2],[3,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=0$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,2],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[3,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=6$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,2],[3,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([2,2],[3,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$。\n\n所有 $([l_1,r_1],[l_2,r_2],[l_3,r_3])$ 的 $\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})$ 总和为 $0+0+2+2+6+2+2=14$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n|:--:|:--:|:--:|\n| $1$ | $n\\leq60$ | $5$ |\n| $2$ | $n\\leq100$ | $9$ |\n| $3$ | $n\\leq200$ | $9$ |\n| $4$ | $n\\leq500$ | $9$ |\n| $5$ | $n\\leq2000$ | $19$ |\n| $6$ | $n\\leq6000$ | $11$ |\n| $7$ | $n\\leq10^5$ | $19$ |\n| $8$ | 无特殊限制 | $19$ |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq10^6$，$1\\leq a_i\\leq n$，保证 $a$ 为 $\\{1,2,\\dots,n\\}$ 的一个排列。", "locale": "zh-CN"}}}
{"pid": "P10174", "type": "P", "difficulty": 5, "samples": [["4 2\n1 3 2 4", "1\n2\n2\n2"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线性数据结构", "O2优化", "树论", "单调栈"], "title": "「OICon-02」Great Segments", "background": "upd：时间限制改为 400ms\n\n[加强版题目推荐](https://www.luogu.com.cn/problem/P11291)", "description": "给定一个长度为 $n$ 的无重复元素序列 $a$。\n\n对于一个区间 $[l,r]$，我们定义它是好的，有以下条件：\n\n1. 定义一个序列 $b=\\{ a_l,\\max(a_l,a_{l+1}),\\max(a_l,a_{l+1},a_{l+2}),\\ ...\\ ,\\max(a_l,a_{l+1},\\ ... \\ ,a_r)\\}$，将该序列进行去重操作后，该序列的长度不超过 $k$ 且大于 $1$；\n2. $\\max(a_l,a_{l+1},\\ ... \\ ,a_r)=a_r$。\n\n请你解决这样一个问题：对于每一个 $i \\ (1 \\le i \\le n)$，有多少个好的区间 $[l,r]$ 满足 $l \\le i \\le r$。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数，第 $i$ 个数表示 $a_i$。", "outputFormat": "$n$ 行，每行一个整数，第 $i$ 行的数表示序列中有多少个好的区间 $[l,r]$ 满足 $l \\le i \\le r$。", "hint": "### 样例解释\n\n对于样例 $1$，满足条件的区间有：\n\n1. $[1,2]$；\n2. $[2,4]$；\n3. $[3,4]$。\n\n故当 $i=1,2,3,4$ 时，分别有以下区间满足 $l\\leq i\\leq r$（根据上述的区间编号）：\n\n1. $1$ 区间；\n2. $1,2$ 区间；\n3. $2,3$ 区间；\n4. $2,3$ 区间。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $n \\le 200$ | $5$ |\n| $2$ | $n\\leq 2000$ | $10$ | \n| $3$ | $\\{a\\}$ 递增 | $10$ |\n| $4$ | $k\\leq 5$ | $12$ |\n| $5$ | $k=n$ | $13$ |\n| $6$ | $n \\le 3 \\times 10^5$ | $20$ |\n| $7$ | 无特殊限制 | $30$ |\n\n对于 $100\\%$ 的数据：$1\\leq k\\leq n\\leq 10^6$，$0\\leq a_i\\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「OICon-02」Great Segments", "background": "upd：时间限制改为 400ms\n\n[加强版题目推荐](https://www.luogu.com.cn/problem/P11291)", "description": "给定一个长度为 $n$ 的无重复元素序列 $a$。\n\n对于一个区间 $[l,r]$，我们定义它是好的，有以下条件：\n\n1. 定义一个序列 $b=\\{ a_l,\\max(a_l,a_{l+1}),\\max(a_l,a_{l+1},a_{l+2}),\\ ...\\ ,\\max(a_l,a_{l+1},\\ ... \\ ,a_r)\\}$，将该序列进行去重操作后，该序列的长度不超过 $k$ 且大于 $1$；\n2. $\\max(a_l,a_{l+1},\\ ... \\ ,a_r)=a_r$。\n\n请你解决这样一个问题：对于每一个 $i \\ (1 \\le i \\le n)$，有多少个好的区间 $[l,r]$ 满足 $l \\le i \\le r$。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数，第 $i$ 个数表示 $a_i$。", "outputFormat": "$n$ 行，每行一个整数，第 $i$ 行的数表示序列中有多少个好的区间 $[l,r]$ 满足 $l \\le i \\le r$。", "hint": "### 样例解释\n\n对于样例 $1$，满足条件的区间有：\n\n1. $[1,2]$；\n2. $[2,4]$；\n3. $[3,4]$。\n\n故当 $i=1,2,3,4$ 时，分别有以下区间满足 $l\\leq i\\leq r$（根据上述的区间编号）：\n\n1. $1$ 区间；\n2. $1,2$ 区间；\n3. $2,3$ 区间；\n4. $2,3$ 区间。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $n \\le 200$ | $5$ |\n| $2$ | $n\\leq 2000$ | $10$ | \n| $3$ | $\\{a\\}$ 递增 | $10$ |\n| $4$ | $k\\leq 5$ | $12$ |\n| $5$ | $k=n$ | $13$ |\n| $6$ | $n \\le 3 \\times 10^5$ | $20$ |\n| $7$ | 无特殊限制 | $30$ |\n\n对于 $100\\%$ 的数据：$1\\leq k\\leq n\\leq 10^6$，$0\\leq a_i\\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10175", "type": "P", "difficulty": 6, "samples": [["3 10 6\n1 1\n1 2 3", "156"], ["11 4 6\n1 1 2 3 4 4 4 5 6 7\n325 190 400 325 380 165 334 400 80 171 340", "678"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "树形 DP", "组合数学"], "title": "「OICon-02」Subtree Value", "background": "", "description": "给出一棵 $n$ 个节点的树，每个点有点权 $a_v$。定义一棵树的一个子连通块为一个树中点的**非空集合**，满足这些点在树上形成一个连通块。定义子连通块 $S$ 的权值为 $\\prod_{v\\in S}(a_v+|S|)$。求所有子连通块的权值之和对 $U^V$ 取模。", "inputFormat": "第一行，三个正整数 $n,U,V$，分别表示节点个数，以及模数（$U^V$）。\n\n第二行，$n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，分别表示以 $1$ 节点为根节点的情况下第 $i$ 个点的父亲节点。\n\n第三行，$n$ 个非负整数 $a_i$，表示每个点的点权。", "outputFormat": "一行，一个正整数，表示所有子联通块的权值之和，对 $U^V$ 取模。", "hint": "### 样例解释\n\n对于样例 $1$，以下子连通块的权值分别是：\n\n* $\\{1\\}$：$(1+1)=2$；\n* $\\{2\\}$：$(2+1)=3$；\n* $\\{3\\}$：$(3+1)=4$；\n* $\\{1,2\\}$：$(1+2)\\times(2+2)=12$；\n* $\\{1,3\\}$：$(1+2)\\times(3+2)=15$；\n* $\\{1,2,3\\}$：$(1+3)\\times(2+3)\\times(3+3)=120$。\n\n总和为 $2+3+4+12+15+120=156$，对 $10^6$ 取模后为 $156$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n|:--:|:--:|:--:|\n| $1$ | $n\\leq10$ | $5$ |\n| $2$ | $n\\leq150$ | $8$ |\n| $3$ | $n\\leq500$ | $11$ |\n| $4$ | $U=2,V=1$ | $7$ |\n| $5$ | $V=1$ | $23$ |\n| $6$ | $U\\mid a_i$ | $23$ |\n| $7$ | 无特殊限制 | $23$ |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq2000$，$1\\leq f_i<i$，$2\\leq U\\leq10$，$1\\leq V\\leq6$，$0\\leq a_i< U^V$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「OICon-02」Subtree Value", "background": "", "description": "给出一棵 $n$ 个节点的树，每个点有点权 $a_v$。定义一棵树的一个子连通块为一个树中点的**非空集合**，满足这些点在树上形成一个连通块。定义子连通块 $S$ 的权值为 $\\prod_{v\\in S}(a_v+|S|)$。求所有子连通块的权值之和对 $U^V$ 取模。", "inputFormat": "第一行，三个正整数 $n,U,V$，分别表示节点个数，以及模数（$U^V$）。\n\n第二行，$n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，分别表示以 $1$ 节点为根节点的情况下第 $i$ 个点的父亲节点。\n\n第三行，$n$ 个非负整数 $a_i$，表示每个点的点权。", "outputFormat": "一行，一个正整数，表示所有子联通块的权值之和，对 $U^V$ 取模。", "hint": "### 样例解释\n\n对于样例 $1$，以下子连通块的权值分别是：\n\n* $\\{1\\}$：$(1+1)=2$；\n* $\\{2\\}$：$(2+1)=3$；\n* $\\{3\\}$：$(3+1)=4$；\n* $\\{1,2\\}$：$(1+2)\\times(2+2)=12$；\n* $\\{1,3\\}$：$(1+2)\\times(3+2)=15$；\n* $\\{1,2,3\\}$：$(1+3)\\times(2+3)\\times(3+3)=120$。\n\n总和为 $2+3+4+12+15+120=156$，对 $10^6$ 取模后为 $156$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n|:--:|:--:|:--:|\n| $1$ | $n\\leq10$ | $5$ |\n| $2$ | $n\\leq150$ | $8$ |\n| $3$ | $n\\leq500$ | $11$ |\n| $4$ | $U=2,V=1$ | $7$ |\n| $5$ | $V=1$ | $23$ |\n| $6$ | $U\\mid a_i$ | $23$ |\n| $7$ | 无特殊限制 | $23$ |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq2000$，$1\\leq f_i<i$，$2\\leq U\\leq10$，$1\\leq V\\leq6$，$0\\leq a_i< U^V$。", "locale": "zh-CN"}}}
{"pid": "P10176", "type": "P", "difficulty": 7, "samples": [["3 3\na\naa\naaa\n1 2 3\n2 3 3\n1 3 3", "6\n30\n36"], ["10 10\naabb\naba\nabbba\nabaccaab\nabbba\nababababab\naaaaa\nbbbbbb\naaba\nabbba\n1 10 10\n1 4 5\n3 6 4\n2 8 1\n1 5 4\n2 10 7\n2 9 2\n4 5 5\n5 5 6\n8 9 10", "241\n31\n51\n105\n40\n136\n460\n17\n0\n0"], ["5 5\na\nba\naba\nababa\nabab\n1 3 3\n1 2 3\n2 3 3\n4 4 5\n3 4 4", "12\n2\n9\n11\n28"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["字符串", "后缀自动机 SAM", "O2优化", "分块", "AC 自动机", "根号分治"], "title": "「OICon-02」Native Faith", "background": "", "description": "本题字符串下标从 $1$ 开始。  \n\n定义两个字符串相加的结果为将这两个字符串首尾拼接形成的新字符串。\n\n令 $f(a,b,c)=\\sum\\limits_{i=1}^{|a|}\\sum\\limits_{j=i}^{|a|}\\sum\\limits_{k=1}^{|b|}\\sum\\limits_{l=k}^{|b|}[a_{i,i+1,\\cdots,j}+b_{k,k+1,\\cdots,l} = c]$（$a,b,c$ 均为字符串）。\n\n即有多少种方式从 $a,b$ 中分别选出一个非空子串使两个子串的和为 $c$。\n\n给定 $n$ 个字符串 $s_1,s_2,s_3,\\cdots,s_n$。\n\n有 $q$ 次询问，每次询问给出三个正整数 $l,r,k$，求 $\\sum\\limits_{i=l}^r\\sum\\limits_{j=l}^rf(s_i,s_j,s_k)$。", "inputFormat": "第一行包含两个整数 $n,q$。\n\n下面 $n$ 行，每行一个只包含小写字母的非空字符串表示 $s_1,s_2,\\cdots,s_n$。\n\n下面 $q$ 行，每行三个正整数 $l,r,k$，表示一次询问。", "outputFormat": "对于每个询问，每行输出一个整数表示答案。", "hint": "### 样例解释\n\n对于样例 $1$，给出部分 $f$ 函数的值。\n- $f(s_1,s_1,s_3)=0$，$f(s_1,s_2,s_3)=1$，$f(s_1,s_3,s_3)=2$，$f(s_2,s_1,s_3)=1$，$f(s_2,s_2,s_3)=4$，$f(s_2,s_3,s_3)=7$，$f(s_3,s_1,s_3)=2$，$f(s_3,s_2,s_3)=7$，$f(s_3,s_3,s_3)=12$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n令 $m=\\sum|s_i|$。\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ | \n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1\\le n,m,q\\le 3\\times 10^3$ | $17$ |\n| $2$ | 保证每次询问的 $k$ 各不相同 | $23$ | \n| $3$ | $1\\le n,m,q\\le 3\\times 10^4$ | $27$ |\n| $4$ | 字符串只包含小写字母 $\\texttt{a}$ | $19$ |\n| $5$ | 无特殊限制 | $14$ |\n\n对于 $100\\%$ 的数据：$1\\le n,m,q\\le 10^5$，$1\\le l \\le r\\le n$，$1\\le k\\le n$，字符串仅包含小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「OICon-02」Native Faith", "background": "", "description": "本题字符串下标从 $1$ 开始。  \n\n定义两个字符串相加的结果为将这两个字符串首尾拼接形成的新字符串。\n\n令 $f(a,b,c)=\\sum\\limits_{i=1}^{|a|}\\sum\\limits_{j=i}^{|a|}\\sum\\limits_{k=1}^{|b|}\\sum\\limits_{l=k}^{|b|}[a_{i,i+1,\\cdots,j}+b_{k,k+1,\\cdots,l} = c]$（$a,b,c$ 均为字符串）。\n\n即有多少种方式从 $a,b$ 中分别选出一个非空子串使两个子串的和为 $c$。\n\n给定 $n$ 个字符串 $s_1,s_2,s_3,\\cdots,s_n$。\n\n有 $q$ 次询问，每次询问给出三个正整数 $l,r,k$，求 $\\sum\\limits_{i=l}^r\\sum\\limits_{j=l}^rf(s_i,s_j,s_k)$。", "inputFormat": "第一行包含两个整数 $n,q$。\n\n下面 $n$ 行，每行一个只包含小写字母的非空字符串表示 $s_1,s_2,\\cdots,s_n$。\n\n下面 $q$ 行，每行三个正整数 $l,r,k$，表示一次询问。", "outputFormat": "对于每个询问，每行输出一个整数表示答案。", "hint": "### 样例解释\n\n对于样例 $1$，给出部分 $f$ 函数的值。\n- $f(s_1,s_1,s_3)=0$，$f(s_1,s_2,s_3)=1$，$f(s_1,s_3,s_3)=2$，$f(s_2,s_1,s_3)=1$，$f(s_2,s_2,s_3)=4$，$f(s_2,s_3,s_3)=7$，$f(s_3,s_1,s_3)=2$，$f(s_3,s_2,s_3)=7$，$f(s_3,s_3,s_3)=12$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n令 $m=\\sum|s_i|$。\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ | \n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1\\le n,m,q\\le 3\\times 10^3$ | $17$ |\n| $2$ | 保证每次询问的 $k$ 各不相同 | $23$ | \n| $3$ | $1\\le n,m,q\\le 3\\times 10^4$ | $27$ |\n| $4$ | 字符串只包含小写字母 $\\texttt{a}$ | $19$ |\n| $5$ | 无特殊限制 | $14$ |\n\n对于 $100\\%$ 的数据：$1\\le n,m,q\\le 10^5$，$1\\le l \\le r\\le n$，$1\\le k\\le n$，字符串仅包含小写字母。", "locale": "zh-CN"}}}
{"pid": "P10177", "type": "P", "difficulty": 2, "samples": [["2\n1 1", "0"], ["4\n2 4 1 3", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "似巨龙高歌", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/wpc73r2k.png)\n\n拜谢 whk 神犇帆巨/bx\n\n尽管帆帆文化课很强，但在新年他不想给同龄蒟蒻带来太大压力，于是他准备对一年的考试成绩做一些手脚……", "description": "面对着自己向巨龙一样腾飞的成绩，新年到来时帆帆忍不住唱起了《爱你》。\n\n他今年一共有 $n$ 次考试，第 $i$ 次考试的排名是 $a_i$。\n\n这在无形之中给别的同学造成了压力，于是他希望把自己的 $n$ 次排名进行重排，使得进步最大的一次考试进步的名次最少，这样他就可以隐藏自己的实力。\n\n对于第 $i$ 次和第 $i+1$ 次考试（$1\\le i < n$），他的进步名次即为 $a_i-a_{i+1}$，如果该值为负则代表他退步了。\n\n\n请你帮帮他。\n", "inputFormat": "输入两行。\n\n第一行，输入一个整数 $n$。\n\n第二行，输入 $n$ 个整数，每两个整数之间用空格隔开。第 $i$ 个整数表示 $a_i$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "\n### 【样例 1 解释】\n\n帆帆不改变原本的考试序列，那么从第一次到第二次考试进步了 $0$ 名（排名没变化）。\n\n### 【样例 2 解释】\n\n帆帆可以把自己的考试排名重排为 $1,2,3,4$，那么他每次考试都进步了 $-1$，所以答案是 $-1$。 \n\n本题采用捆绑测试\n\n### 【数据范围】\n\n- 对于 $30\\%$ 的数据，保证 $n\\le 10$。\n\n- 对于 $50\\%$ 的数据，保证 $n\\le 5000$。\n\n- 对于另外 $20\\%$ 的数据，保证 $a_i\\le 2$。\n\n- 对于 $100\\%$ 的数据，保证 $2\\le n\\le 10^6$，$1\\le a_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "似巨龙高歌", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/wpc73r2k.png)\n\n拜谢 whk 神犇帆巨/bx\n\n尽管帆帆文化课很强，但在新年他不想给同龄蒟蒻带来太大压力，于是他准备对一年的考试成绩做一些手脚……", "description": "面对着自己向巨龙一样腾飞的成绩，新年到来时帆帆忍不住唱起了《爱你》。\n\n他今年一共有 $n$ 次考试，第 $i$ 次考试的排名是 $a_i$。\n\n这在无形之中给别的同学造成了压力，于是他希望把自己的 $n$ 次排名进行重排，使得进步最大的一次考试进步的名次最少，这样他就可以隐藏自己的实力。\n\n对于第 $i$ 次和第 $i+1$ 次考试（$1\\le i < n$），他的进步名次即为 $a_i-a_{i+1}$，如果该值为负则代表他退步了。\n\n\n请你帮帮他。\n", "inputFormat": "输入两行。\n\n第一行，输入一个整数 $n$。\n\n第二行，输入 $n$ 个整数，每两个整数之间用空格隔开。第 $i$ 个整数表示 $a_i$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "\n### 【样例 1 解释】\n\n帆帆不改变原本的考试序列，那么从第一次到第二次考试进步了 $0$ 名（排名没变化）。\n\n### 【样例 2 解释】\n\n帆帆可以把自己的考试排名重排为 $1,2,3,4$，那么他每次考试都进步了 $-1$，所以答案是 $-1$。 \n\n本题采用捆绑测试\n\n### 【数据范围】\n\n- 对于 $30\\%$ 的数据，保证 $n\\le 10$。\n\n- 对于 $50\\%$ 的数据，保证 $n\\le 5000$。\n\n- 对于另外 $20\\%$ 的数据，保证 $a_i\\le 2$。\n\n- 对于 $100\\%$ 的数据，保证 $2\\le n\\le 10^6$，$1\\le a_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10178", "type": "P", "difficulty": 4, "samples": [["2\n3 2 3\n1 2\n2 3\n2 2 1\n1 2\n1 2", "Yes\n1 2\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "广度优先搜索 BFS", "最短路", "洛谷月赛"], "title": "陌路寻诗礼", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/pkwo5ogg.png)\n\n作为 luogu 网红的帆巨，有非常多狂热的粉丝，而我们的帆巨也很喜欢面基，寻找遍布大江南北的粉丝们。\n\n\n", "description": "帆巨所在的家乡的地图是一张有 $n$ 个节点 $m$ 条有向道路的有向图，每个节点都是一个城市，而帆巨所在的城市是 $1$ 号城市，并且 $1$ 号城市总是可以通过若干道路到达其他任何城市。\n\n第 $i$ 条道路从 $x_i$ 号城市出发到达 $y_i$ 号城市，长度为 $z_i$。\n\n帆帆现在要从他的 $1$ 号城市前往各个城市面基。\n\n精通 spfa 算法的帆帆在面基的过程中自然会按照长度和最短的路径去其他城市。\n\n但是帆帆有选择困难症，他希望从 $1$ 号城市到达每一座城市的最短路径都是唯一的，所以他决定施加魔法，改变所有道路的长度，具体地：\n\n帆巨施加魔法后，对于每一条道路的长度，都可以 **独立地** 将其变成一个 $[1,k]$ 范围内的整数，其中 $k$ 是帆巨的魔法等级。\n\n但帆巨所在的世界的地图和他的魔法等级一直在变，总共会变 $T$ 次，所以他希望你对 $T$ 次询问都给出一种构造方法使得帆巨不会纠结或者报告无解。\n\n", "inputFormat": "\n第一行一个整数 $T$ 表示数据组数。\n\n接下来 $T$ 组，每组先是三个整数 $n,m,k$，接着 $m$ 行描述有向道路 $(x_i,y_i)$。\n\n**不保证无自环无重边。**", "outputFormat": "对于每组数据，如果有解，第一行输出 `Yes`，第二行 $m$ 个数依次输出每条边的权值；如果没有解，一行输出 `No`。\n\n本题采用 `special judge` 评测，也就是说，如果有多种可能的答案，你可以输出任意一种。", "hint": "### 【样例解释】\n\n对于第一组数据，$1$ 号点到达每个点的路径都是唯一，自然无论怎么设置边权，最短路都是唯一的。\n\n对于第二组数据，因为 $k=1$，所以两条边的边权都只能设置为 $1$。$1$ 号点到 $2$ 号点的最短路长度为 $1$，走两条边都可以，所以不是唯一的。\n\n### 【数据范围】\n\n本题采用捆绑测试。\n\n对于 $20\\%$ 的数据，$n,m\\leq 5$。\n\n对于另外 $20\\%$ 的数据，$k=1$。\n\n对于另外 $20\\%$ 的数据，$m=n-1$。\n\n对于另外 $20\\%$ 的数据，$k=10^9$。\n\n对于 $100\\%$ 的数据，$n\\ge 1$，$m\\ge 0$，$1\\le \\sum n,\\sum m\\leq 3\\times 10^5$，$1\\leq k \\leq 10^9$，$1\\le x_i,y_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "陌路寻诗礼", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/pkwo5ogg.png)\n\n作为 luogu 网红的帆巨，有非常多狂热的粉丝，而我们的帆巨也很喜欢面基，寻找遍布大江南北的粉丝们。\n\n\n", "description": "帆巨所在的家乡的地图是一张有 $n$ 个节点 $m$ 条有向道路的有向图，每个节点都是一个城市，而帆巨所在的城市是 $1$ 号城市，并且 $1$ 号城市总是可以通过若干道路到达其他任何城市。\n\n第 $i$ 条道路从 $x_i$ 号城市出发到达 $y_i$ 号城市，长度为 $z_i$。\n\n帆帆现在要从他的 $1$ 号城市前往各个城市面基。\n\n精通 spfa 算法的帆帆在面基的过程中自然会按照长度和最短的路径去其他城市。\n\n但是帆帆有选择困难症，他希望从 $1$ 号城市到达每一座城市的最短路径都是唯一的，所以他决定施加魔法，改变所有道路的长度，具体地：\n\n帆巨施加魔法后，对于每一条道路的长度，都可以 **独立地** 将其变成一个 $[1,k]$ 范围内的整数，其中 $k$ 是帆巨的魔法等级。\n\n但帆巨所在的世界的地图和他的魔法等级一直在变，总共会变 $T$ 次，所以他希望你对 $T$ 次询问都给出一种构造方法使得帆巨不会纠结或者报告无解。\n\n", "inputFormat": "\n第一行一个整数 $T$ 表示数据组数。\n\n接下来 $T$ 组，每组先是三个整数 $n,m,k$，接着 $m$ 行描述有向道路 $(x_i,y_i)$。\n\n**不保证无自环无重边。**", "outputFormat": "对于每组数据，如果有解，第一行输出 `Yes`，第二行 $m$ 个数依次输出每条边的权值；如果没有解，一行输出 `No`。\n\n本题采用 `special judge` 评测，也就是说，如果有多种可能的答案，你可以输出任意一种。", "hint": "### 【样例解释】\n\n对于第一组数据，$1$ 号点到达每个点的路径都是唯一，自然无论怎么设置边权，最短路都是唯一的。\n\n对于第二组数据，因为 $k=1$，所以两条边的边权都只能设置为 $1$。$1$ 号点到 $2$ 号点的最短路长度为 $1$，走两条边都可以，所以不是唯一的。\n\n### 【数据范围】\n\n本题采用捆绑测试。\n\n对于 $20\\%$ 的数据，$n,m\\leq 5$。\n\n对于另外 $20\\%$ 的数据，$k=1$。\n\n对于另外 $20\\%$ 的数据，$m=n-1$。\n\n对于另外 $20\\%$ 的数据，$k=10^9$。\n\n对于 $100\\%$ 的数据，$n\\ge 1$，$m\\ge 0$，$1\\le \\sum n,\\sum m\\leq 3\\times 10^5$，$1\\leq k \\leq 10^9$，$1\\le x_i,y_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P10179", "type": "P", "difficulty": 4, "samples": [["2\n4 2\n1 2\n3 4\n3 3\n1 2\n2 3\n3 1", "Yes\n1 3\n2 4\n2 3\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "水影若深蓝", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/e2h3lfb4.png)\n\n帆帆爱明日方舟，更爱水月和深蓝之树。但在龙年，他想构建一棵独属于他的深蓝之树。", "description": "在梦里，在朦胧的水影中，帆帆看见了这棵只属于他的深蓝之树。\n\n当一切梦沉寂，他却遗忘了所有，只记得树上有 $n$ 个结点。\n\n真的吗？似乎并没有，有 $m$ 件事情他一直牢记着，第 $i$ 件事情是：节点 $u_i$ 和 $v_i$ 在这棵深蓝之树上唯一的不重复经过某个点的路径恰好有两条边。\n\n那么，你能否帮助帆帆想起来这棵深蓝之树的样子呢，如果有多个可能的，你只需要输出任意一种。\n\n当然，帆帆也是会磨损的，因此当你发现无论如何都找不到满足帆帆这 $m$ 件事情的深蓝之树时，你需要报告无解。\n", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$ 表示数据组数。\n\n对于每组数据：\n\n第一行两个非负整数 $n,m$ 表示树上的点数和帆帆记忆中事件个数。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$ 表示一个事件。", "outputFormat": "对于每组数据：\n\n- 若不存在符合条件的树，输出 `No`。\n- 否则，第一行输出 `Yes`，接下来 $n-1$ 行输出 $n-1$ 对正整数 $(u,v)$，表示你给出的树上的 $n-1$ 条边。\n\n本题采用 `special judge` 评测，也就是说，如果有多种可能的答案，你可以输出任意一种。", "hint": "### 样例 $1$ 解释\n\n对于第一组数据，不难验证给出的树符合条件。\n\n对于第二组数据，可以证明不存在符合条件的树。\n\n### 测试点约束\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$n\\ge 2$，$m\\ge 0$，$1\\le \\sum n\\le 3\\times 10^5$，$0\\le \\sum m\\le 3\\times 10^5$，$1\\le u_i,v_i\\le n$，$u_i\\neq v_i$。\n\n本题采用捆绑测试。\n\n| 子任务编号 | 特殊限制 | 分值 |\n| :--------: | :-------------: | :--: |\n| Subtask #1 |     $\\sum n,\\sum m\\le 9$     | $10$ |\n| Subtask #2 |    $\\sum n,\\sum m\\le 50$     | $10$ |\n| Subtask #3 |    $\\sum n,\\sum m\\le 5000$    | $10$ |\n| Subtask #4 |   $v_i=u_i+1$    | $10$ |\n| Subtask #5 |   $u_i=1$    | $10$ |\n| Subtask #6 |   $u_i\\neq 1,v_i\\neq 1$    | $10$ |\n| Subtask #7 |   $T=1$    | $10$ |\n| Subtask #8 |   无    | $30$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "水影若深蓝", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/e2h3lfb4.png)\n\n帆帆爱明日方舟，更爱水月和深蓝之树。但在龙年，他想构建一棵独属于他的深蓝之树。", "description": "在梦里，在朦胧的水影中，帆帆看见了这棵只属于他的深蓝之树。\n\n当一切梦沉寂，他却遗忘了所有，只记得树上有 $n$ 个结点。\n\n真的吗？似乎并没有，有 $m$ 件事情他一直牢记着，第 $i$ 件事情是：节点 $u_i$ 和 $v_i$ 在这棵深蓝之树上唯一的不重复经过某个点的路径恰好有两条边。\n\n那么，你能否帮助帆帆想起来这棵深蓝之树的样子呢，如果有多个可能的，你只需要输出任意一种。\n\n当然，帆帆也是会磨损的，因此当你发现无论如何都找不到满足帆帆这 $m$ 件事情的深蓝之树时，你需要报告无解。\n", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$ 表示数据组数。\n\n对于每组数据：\n\n第一行两个非负整数 $n,m$ 表示树上的点数和帆帆记忆中事件个数。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$ 表示一个事件。", "outputFormat": "对于每组数据：\n\n- 若不存在符合条件的树，输出 `No`。\n- 否则，第一行输出 `Yes`，接下来 $n-1$ 行输出 $n-1$ 对正整数 $(u,v)$，表示你给出的树上的 $n-1$ 条边。\n\n本题采用 `special judge` 评测，也就是说，如果有多种可能的答案，你可以输出任意一种。", "hint": "### 样例 $1$ 解释\n\n对于第一组数据，不难验证给出的树符合条件。\n\n对于第二组数据，可以证明不存在符合条件的树。\n\n### 测试点约束\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$n\\ge 2$，$m\\ge 0$，$1\\le \\sum n\\le 3\\times 10^5$，$0\\le \\sum m\\le 3\\times 10^5$，$1\\le u_i,v_i\\le n$，$u_i\\neq v_i$。\n\n本题采用捆绑测试。\n\n| 子任务编号 | 特殊限制 | 分值 |\n| :--------: | :-------------: | :--: |\n| Subtask #1 |     $\\sum n,\\sum m\\le 9$     | $10$ |\n| Subtask #2 |    $\\sum n,\\sum m\\le 50$     | $10$ |\n| Subtask #3 |    $\\sum n,\\sum m\\le 5000$    | $10$ |\n| Subtask #4 |   $v_i=u_i+1$    | $10$ |\n| Subtask #5 |   $u_i=1$    | $10$ |\n| Subtask #6 |   $u_i\\neq 1,v_i\\neq 1$    | $10$ |\n| Subtask #7 |   $T=1$    | $10$ |\n| Subtask #8 |   无    | $30$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P10180", "type": "P", "difficulty": 5, "samples": [["5 3\n1 2 1 3 3\n1 1 2 2\n1 2\n1 3\n2 3", "9\n6\n9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "半彩三重奏", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/6205nazm.png)\n\n帆帆不满足于只构建一棵深蓝之树，他觉得深蓝之树只有深蓝色太单调了，于是想给这棵树染上颜色。", "description": "由于现在已经来到了魔幻的龙年，帆帆的深蓝之树已经被染上了颜色，结点 $i$ 的颜色为 $a_i$。\n\n帆帆是一个喜新厌旧的人，在接下来的 $q$ 天中，他每天都会改变他喜欢的颜色，第 $i$ 天他喜欢的两种颜色是 $x_i,y_i$（$x_i\\neq y_i$）。\n\n但是为了照顾自己的树，他需要经常在树上移动，并且只会经过自己喜欢的颜色。\n\n具体来说，第 $i$ 天，帆帆会选择一个有序结点对 $(u,v)$，然后沿着 $u\\to v$ 的唯一简单路径移动，并且中间经过的结点（包含 $u,v$）颜色必须 $\\in \\{x_i,y_i\\}$（$u$ 可以等于 $v$），之后可以抽取一次宵宫。\n\n每一天你都需要抽取一个满命宵宫，然后告诉帆帆有多少种可能的选择有序结点对的方案。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$ 表示每个点的颜色。\n\n接下来一行 $n-1$ 个正整数 $p_2,p_3,\\cdots,p_n$，表示对所有 $2\\le i\\le n$，树上存在一条边 $(p_i,i)$。\n\n接下来 $q$ 行，每行两个正整数 $x_i,y_i$。", "outputFormat": "对于每组询问输出一行一个正整数表示答案。", "hint": "### 【样例 $1$ 解释】\n\n树的形态如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w65i5hof.png)\n\n对于第一组询问，合法的路径有且仅有 $\\{1,2,3\\}$ 中一点到另一点的路径。\n\n对于第二组询问，合法的路径有且仅有 $1\\to 1,1\\to 3,3\\to 1,3\\to 3,4\\to 4,5\\to 5$。\n\n### 【子任务约束】\n\n本题采用子任务捆绑测试。\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^6$，$1\\le q\\le 2\\times 10^6$，$1\\le a_i,x,y\\le n$，$x\\neq y$。保证 $p_i<i$。\n\n| 子任务编号 |        $n$         |        $q$         | 特殊性质 | 分值 | 依赖子任务 | \n| :--------: | :----------------: | :----------------: | :------: | :--: | :--: |\n| Subtask \\#1 |     $\\le 100$      |     $\\le 100$      |    无    | $7$  |无|\n| Subtask \\#2 |     $\\le 2000$     |     $\\le 2000$     |    无    | $18$ |$1$|\n| Subtask \\#3 |     $\\le 10^5$     | $\\le 2\\times 10^5$ |    A     | $5$  |无|\n| Subtask \\#4 |     $\\le 10^5$     | $\\le 2\\times 10^5$ |    B     | $19$ |无|\n| Subtask \\#5 |     $\\le 10^5$     | $\\le 2\\times 10^5$ |    无    | $21$ |$1,2,3,4$|\n| Subtask \\#6 | $\\le 2\\times 10^5$ | $\\le 5\\times 10^5$ |    无    | $10$ |$5$|\n| Subtask \\#7 | $\\le 10^6$ | $\\le 2\\times 10^6$ |    无    | $20$ |$6$|\n\n特殊性质 A：$p_i=1$。\n\n特殊性质 B：$p_i=i-1$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "半彩三重奏", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/6205nazm.png)\n\n帆帆不满足于只构建一棵深蓝之树，他觉得深蓝之树只有深蓝色太单调了，于是想给这棵树染上颜色。", "description": "由于现在已经来到了魔幻的龙年，帆帆的深蓝之树已经被染上了颜色，结点 $i$ 的颜色为 $a_i$。\n\n帆帆是一个喜新厌旧的人，在接下来的 $q$ 天中，他每天都会改变他喜欢的颜色，第 $i$ 天他喜欢的两种颜色是 $x_i,y_i$（$x_i\\neq y_i$）。\n\n但是为了照顾自己的树，他需要经常在树上移动，并且只会经过自己喜欢的颜色。\n\n具体来说，第 $i$ 天，帆帆会选择一个有序结点对 $(u,v)$，然后沿着 $u\\to v$ 的唯一简单路径移动，并且中间经过的结点（包含 $u,v$）颜色必须 $\\in \\{x_i,y_i\\}$（$u$ 可以等于 $v$），之后可以抽取一次宵宫。\n\n每一天你都需要抽取一个满命宵宫，然后告诉帆帆有多少种可能的选择有序结点对的方案。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$ 表示每个点的颜色。\n\n接下来一行 $n-1$ 个正整数 $p_2,p_3,\\cdots,p_n$，表示对所有 $2\\le i\\le n$，树上存在一条边 $(p_i,i)$。\n\n接下来 $q$ 行，每行两个正整数 $x_i,y_i$。", "outputFormat": "对于每组询问输出一行一个正整数表示答案。", "hint": "### 【样例 $1$ 解释】\n\n树的形态如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w65i5hof.png)\n\n对于第一组询问，合法的路径有且仅有 $\\{1,2,3\\}$ 中一点到另一点的路径。\n\n对于第二组询问，合法的路径有且仅有 $1\\to 1,1\\to 3,3\\to 1,3\\to 3,4\\to 4,5\\to 5$。\n\n### 【子任务约束】\n\n本题采用子任务捆绑测试。\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^6$，$1\\le q\\le 2\\times 10^6$，$1\\le a_i,x,y\\le n$，$x\\neq y$。保证 $p_i<i$。\n\n| 子任务编号 |        $n$         |        $q$         | 特殊性质 | 分值 | 依赖子任务 | \n| :--------: | :----------------: | :----------------: | :------: | :--: | :--: |\n| Subtask \\#1 |     $\\le 100$      |     $\\le 100$      |    无    | $7$  |无|\n| Subtask \\#2 |     $\\le 2000$     |     $\\le 2000$     |    无    | $18$ |$1$|\n| Subtask \\#3 |     $\\le 10^5$     | $\\le 2\\times 10^5$ |    A     | $5$  |无|\n| Subtask \\#4 |     $\\le 10^5$     | $\\le 2\\times 10^5$ |    B     | $19$ |无|\n| Subtask \\#5 |     $\\le 10^5$     | $\\le 2\\times 10^5$ |    无    | $21$ |$1,2,3,4$|\n| Subtask \\#6 | $\\le 2\\times 10^5$ | $\\le 5\\times 10^5$ |    无    | $10$ |$5$|\n| Subtask \\#7 | $\\le 10^6$ | $\\le 2\\times 10^6$ |    无    | $20$ |$6$|\n\n特殊性质 A：$p_i=1$。\n\n特殊性质 B：$p_i=i-1$。\n", "locale": "zh-CN"}}}
{"pid": "P10181", "type": "P", "difficulty": 7, "samples": [["5 5 0 956144375 1\n2 4 1 5 2 \n", "21971409"], ["10 10 0 478178732 1\n2 2 1 1 2 1 2 1 2 1 \n", "2834792"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "并查集", "洛谷原创", "O2优化", "凸完全单调性（wqs 二分）", "洛谷月赛", "根号分治", "单调栈"], "title": "龙逐千灯幻", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/6w2vttoo.png)\n\n龙年到，帆帆也举起了自己的彩龙灯，他自己也要变成大彩龙啦！", "description": "帆帆一共有 $n$ 盏龙灯，第 $i$ 盏的颜色是 $a_i$。\n\n帆帆认为一段区间 $[l,r]$ 的美观度 $f(l,r)$ 为 $a_l\\cdots a_r$ 中的不同颜色个数。\n\n帆帆准备带着自己的龙灯去玩，他一共计划去玩 $m$ 天，第 $i$ 天，他会带着自己的 $1\\cdots x_i$ 号龙灯，但是他发现如果把很多龙灯装在一起，那么别人只会注意到其中有多少种不同的颜色。\n\n因此帆帆准备把这 $x_i$ 个龙灯按照编号顺序分成恰好 $k_i$ 个区间，满足每盏灯恰好在一个区间内。\n\n那么帆帆这次出行的美观度就为所有区间的美观度的和。\n\n请你帮帮帆帆最大化每一次出行的美观度。\n\n", "inputFormat": "第一行五个整数 $n,m,id,seed,limx$，分别代表序列长度，询问次数，以及 $\\texttt{subtask}$ 编号（样例中的 $id=0$），随机数种子，以及一个和询问有关的参数 $limx$。\n\n因为本题输入量过大，因此采用如下方式生成询问：\n\n我们使用下面的代码生成一个伪随机数列：\n\n```cpp\nuint64_t PRG_state;\nuint64_t get_number()\n{\n    PRG_state ^= PRG_state << 13;\n    PRG_state ^= PRG_state >> 7;\n    PRG_state ^= PRG_state << 17;\n    return PRG_state;\n}\nint readW(int l,int r)\n{\n\treturn get_number()%(r-l+1)+l;\n}\n```\n\n一开始 `PRG_state=seed`，你每次调用 `readW(l,r)` 会返回一个 $[l,r]$ 内的随机数。\n\n第二行 $n$ 个整数，第 $i$ 个整数代表 $a_i$。\n\n设 $x_i,k_i,c_i$ 表示第 $i$ 组询问需要的参数 $x,k,c$，其中 $c$ 的作用见输出格式，那么所有询问的参数可以用以下程序生成：\n\n```cpp\nfor (int i = 1; i <= m; ++i) {\n\tx[i] = readW(limx, n);\n\tk[i] = readW(1, x[i]);\n\tc[i] = readW(0, 1e7);\n}\n```\n\n注：**请不要在运行上述代码段获得各组询问的参数之前调用 `readW()` 函数，否则无法获得正确的询问信息。** 本题不需要利用该伪随机数生成器的特殊性质，你只需将  `get_number()` 视为一个每次调用独立且均匀随机地生成一个无符号 $64$ 位整数的生成器即可。本题也不需要优化伪随机数生成器的内部实现。", "outputFormat": "为了减少输出量，我们使用如下方式进行信息压缩：\n\n如果第 $i$ 组询问的答案为 $ans_i$，其生成参数为 $c_i$，那么你需要输出：\n\n$$\\bigoplus\\limits_{i=1}^m(ans_i\\times c_i)$$\n\n其中 $\\bigoplus $ 为异或运算，该值显然一定位于 `long long` 能表示的整数范围内。", "hint": "### 【样例1解释】\n\n询问分别是：\n\n```\n3 1 6121576\n5 3 3089509\n1 1 4506170\n3 1 2821007\n1 1 7941511\n```\n\n答案分别是:\n\n```\n3\n5\n1\n3\n1\n```\n\n对于第一组询问，要分成一个区间，那么就是 $[1,3]$，美观度就是 $f(1,3)=3$ 。\n\n对于第二组询问，最优的方案是分成 $[1,3],[4,4],[5,5]$，美观度是 $f(1,3)+f(4,4)+f(5,5)=5$\n\n后三个询问同理。\n\n### 【样例2解释】\n\n询问分别是：\n\n```\n8 4 6858024\n3 2 236530\n2 2 8140891\n5 3 4562139\n8 7 4749403\n7 4 4319971\n5 1 5063575\n3 1 7343109\n6 2 1566851\n3 1 7959241\n```\n\n询问答案分别是：\n\n```\n7\n3\n2\n5\n8\n7\n2\n2\n4\n2\n```\n\n### 【数据范围】\n\n本题采用捆绑测试。\n\n- 子任务一（$10$ 分）：$1 \\leq n\\leq 500$。\n- 子任务二（$15$ 分）：$1\\leq n\\leq 3000$。\n- 子任务三（$15$ 分）：$m=1$。\n- 子任务四（$20$ 分）：$1\\le a_i\\le 30$。\n- 子任务五（$20$ 分）：$1\\leq n\\leq 4\\times 10^4$。\n- 子任务六（$20$ 分）：无特殊限制。\n\n\n对于 $100\\%$ 的数据，$1 \\leq n\\leq 10^5$，$1\\leq  m\\leq 10^6$，$0\\leq seed\\leq 10^9$，$1\\leq limx\\leq n$，$1\\leq a_i\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "龙逐千灯幻", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/6w2vttoo.png)\n\n龙年到，帆帆也举起了自己的彩龙灯，他自己也要变成大彩龙啦！", "description": "帆帆一共有 $n$ 盏龙灯，第 $i$ 盏的颜色是 $a_i$。\n\n帆帆认为一段区间 $[l,r]$ 的美观度 $f(l,r)$ 为 $a_l\\cdots a_r$ 中的不同颜色个数。\n\n帆帆准备带着自己的龙灯去玩，他一共计划去玩 $m$ 天，第 $i$ 天，他会带着自己的 $1\\cdots x_i$ 号龙灯，但是他发现如果把很多龙灯装在一起，那么别人只会注意到其中有多少种不同的颜色。\n\n因此帆帆准备把这 $x_i$ 个龙灯按照编号顺序分成恰好 $k_i$ 个区间，满足每盏灯恰好在一个区间内。\n\n那么帆帆这次出行的美观度就为所有区间的美观度的和。\n\n请你帮帮帆帆最大化每一次出行的美观度。\n\n", "inputFormat": "第一行五个整数 $n,m,id,seed,limx$，分别代表序列长度，询问次数，以及 $\\texttt{subtask}$ 编号（样例中的 $id=0$），随机数种子，以及一个和询问有关的参数 $limx$。\n\n因为本题输入量过大，因此采用如下方式生成询问：\n\n我们使用下面的代码生成一个伪随机数列：\n\n```cpp\nuint64_t PRG_state;\nuint64_t get_number()\n{\n    PRG_state ^= PRG_state << 13;\n    PRG_state ^= PRG_state >> 7;\n    PRG_state ^= PRG_state << 17;\n    return PRG_state;\n}\nint readW(int l,int r)\n{\n\treturn get_number()%(r-l+1)+l;\n}\n```\n\n一开始 `PRG_state=seed`，你每次调用 `readW(l,r)` 会返回一个 $[l,r]$ 内的随机数。\n\n第二行 $n$ 个整数，第 $i$ 个整数代表 $a_i$。\n\n设 $x_i,k_i,c_i$ 表示第 $i$ 组询问需要的参数 $x,k,c$，其中 $c$ 的作用见输出格式，那么所有询问的参数可以用以下程序生成：\n\n```cpp\nfor (int i = 1; i <= m; ++i) {\n\tx[i] = readW(limx, n);\n\tk[i] = readW(1, x[i]);\n\tc[i] = readW(0, 1e7);\n}\n```\n\n注：**请不要在运行上述代码段获得各组询问的参数之前调用 `readW()` 函数，否则无法获得正确的询问信息。** 本题不需要利用该伪随机数生成器的特殊性质，你只需将  `get_number()` 视为一个每次调用独立且均匀随机地生成一个无符号 $64$ 位整数的生成器即可。本题也不需要优化伪随机数生成器的内部实现。", "outputFormat": "为了减少输出量，我们使用如下方式进行信息压缩：\n\n如果第 $i$ 组询问的答案为 $ans_i$，其生成参数为 $c_i$，那么你需要输出：\n\n$$\\bigoplus\\limits_{i=1}^m(ans_i\\times c_i)$$\n\n其中 $\\bigoplus $ 为异或运算，该值显然一定位于 `long long` 能表示的整数范围内。", "hint": "### 【样例1解释】\n\n询问分别是：\n\n```\n3 1 6121576\n5 3 3089509\n1 1 4506170\n3 1 2821007\n1 1 7941511\n```\n\n答案分别是:\n\n```\n3\n5\n1\n3\n1\n```\n\n对于第一组询问，要分成一个区间，那么就是 $[1,3]$，美观度就是 $f(1,3)=3$ 。\n\n对于第二组询问，最优的方案是分成 $[1,3],[4,4],[5,5]$，美观度是 $f(1,3)+f(4,4)+f(5,5)=5$\n\n后三个询问同理。\n\n### 【样例2解释】\n\n询问分别是：\n\n```\n8 4 6858024\n3 2 236530\n2 2 8140891\n5 3 4562139\n8 7 4749403\n7 4 4319971\n5 1 5063575\n3 1 7343109\n6 2 1566851\n3 1 7959241\n```\n\n询问答案分别是：\n\n```\n7\n3\n2\n5\n8\n7\n2\n2\n4\n2\n```\n\n### 【数据范围】\n\n本题采用捆绑测试。\n\n- 子任务一（$10$ 分）：$1 \\leq n\\leq 500$。\n- 子任务二（$15$ 分）：$1\\leq n\\leq 3000$。\n- 子任务三（$15$ 分）：$m=1$。\n- 子任务四（$20$ 分）：$1\\le a_i\\le 30$。\n- 子任务五（$20$ 分）：$1\\leq n\\leq 4\\times 10^4$。\n- 子任务六（$20$ 分）：无特殊限制。\n\n\n对于 $100\\%$ 的数据，$1 \\leq n\\leq 10^5$，$1\\leq  m\\leq 10^6$，$0\\leq seed\\leq 10^9$，$1\\leq limx\\leq n$，$1\\leq a_i\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P10182", "type": "P", "difficulty": 7, "samples": [["2 1 2", "2"], ["2 3 4", "254"], ["19 8 10", "913255725"], ["10000000000 1 2", "880793261"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "洛谷原创", "O2优化", "线性代数", "洛谷月赛"], "title": "一径入繁华", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/68qtrpb7.png)\n\n伴随龙年到来的，还有帆巨很喜欢的九省联考。为了爆踩压轴题。帆巨狠狠地重温了数论。\n\n数论所生，繁华之地！", "description": "帆巨觉得求 $x^a$ 在 $\\bmod\\ p$ 意义下的值太简单了，所以他想求 $\\sigma_0^s(x^t)$ 在 $\\bmod\\ p$ 意义下的值。\n\n帆帆不满足于只计算一次，于是他列了一个 $n\\times n$ 的数表 $A$，保证第 $i$ 行第 $j$ 列（$1\\le i,j\\le n$）中的元素 $a_{i,j}$ 满足：\n\n$$\na_{i,j}=\\sum_{d\\mid \\gcd(i,j)}\\mu\\left(\\dfrac{\\gcd(i,j)}{d}\\right)\\times (\\sigma_0(d^s))^t\n$$\n\n帆帆想知道这个数表长什么样子，但这个数表实在太大了，所以请你告诉他 $\\det A$ 对 $10^9+7$ 取模后的结果。\n\n注释：\n\n1. 表达式中的各种函数含义在 **[这里](https://oi-wiki.org/math/number-theory/basic/#%E4%BE%8B%E5%AD%90)（$\\mu$ 表示莫比乌斯函数，$\\sigma_0$ 表示约数个数函数）**。\n2. $\\det A$ 表示方阵 $A$ 的 **[行列式](https://baike.baidu.com/item/%E8%A1%8C%E5%88%97%E5%BC%8F/2010180)**。", "inputFormat": "一行，输入三个整数 $n,s,t$。", "outputFormat": "一行，输出一个整数表示答案。", "hint": "### 【样例 $1$ 解释】\n\n矩阵 $A$ 如下：\n\n$$\n\\begin{bmatrix}\n1 & 1\\\\\n1 &3\n\\end{bmatrix}\n$$\n\n行列式为 $1\\times 3 - 1\\times 1=2$。\n\n### 【样例 $2$ 解释】\n\n矩阵 $A$ 如下：\n\n$$\n\\begin{bmatrix}\n1 & 1\\\\\n1 & 255\n\\end{bmatrix}\n$$\n\n行列式为 $1\\times 255 - 1 \\times 1=254$。\n\n### 数据范围\n\n本题采用 **子任务捆绑测试**。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^{11}$，$0\\le s,t< 10^9+7$。\n\n\n| 子任务编号  |      $n$      | 特殊性质  | 分值 |\n| :---------: | :-----------: | :-------: | :--: |\n| Subtask #1  |   $\\le 500$   |    无     | $8$  |\n| Subtask #2  |  $\\le 10^7$   | $s=1,t=2$ | $5$  |\n| Subtask #3  |  $\\le 10^7$   |   $s=1$   | $10$ |\n| Subtask #4  | $\\le 10^{11}$ | $s=1,t=2$ | $10$ |\n| Subtask #5  | $\\le 10^{11}$ |   $s=1$   | $10$ |\n| Subtask #6  | $\\le 10^{11}$ |   $t=1$   | $2$  |\n| Subtask #7  | $\\le 10^{7}$  | $t\\le 9$  | $10$ |\n| Subtask #8  | $\\le 10^{11}$ | $t\\le 9$  | $15$ |\n| Subtask #9  |  $\\le 10^7$   |    无     | $10$ |\n| Subtask #10 | $\\le 10^{11}$ |    无     | $20$ |\n\n**特殊性质** 一栏为空则表示没有特殊性质。子任务中没有规定范围的变量的值均在 $[0,10^9+7)$ 范围内生成。\n\n时间限制：$\\text{2000 ms}$；\n\n空间限制：$\\text{512 MB}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "一径入繁华", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/68qtrpb7.png)\n\n伴随龙年到来的，还有帆巨很喜欢的九省联考。为了爆踩压轴题。帆巨狠狠地重温了数论。\n\n数论所生，繁华之地！", "description": "帆巨觉得求 $x^a$ 在 $\\bmod\\ p$ 意义下的值太简单了，所以他想求 $\\sigma_0^s(x^t)$ 在 $\\bmod\\ p$ 意义下的值。\n\n帆帆不满足于只计算一次，于是他列了一个 $n\\times n$ 的数表 $A$，保证第 $i$ 行第 $j$ 列（$1\\le i,j\\le n$）中的元素 $a_{i,j}$ 满足：\n\n$$\na_{i,j}=\\sum_{d\\mid \\gcd(i,j)}\\mu\\left(\\dfrac{\\gcd(i,j)}{d}\\right)\\times (\\sigma_0(d^s))^t\n$$\n\n帆帆想知道这个数表长什么样子，但这个数表实在太大了，所以请你告诉他 $\\det A$ 对 $10^9+7$ 取模后的结果。\n\n注释：\n\n1. 表达式中的各种函数含义在 **[这里](https://oi-wiki.org/math/number-theory/basic/#%E4%BE%8B%E5%AD%90)（$\\mu$ 表示莫比乌斯函数，$\\sigma_0$ 表示约数个数函数）**。\n2. $\\det A$ 表示方阵 $A$ 的 **[行列式](https://baike.baidu.com/item/%E8%A1%8C%E5%88%97%E5%BC%8F/2010180)**。", "inputFormat": "一行，输入三个整数 $n,s,t$。", "outputFormat": "一行，输出一个整数表示答案。", "hint": "### 【样例 $1$ 解释】\n\n矩阵 $A$ 如下：\n\n$$\n\\begin{bmatrix}\n1 & 1\\\\\n1 &3\n\\end{bmatrix}\n$$\n\n行列式为 $1\\times 3 - 1\\times 1=2$。\n\n### 【样例 $2$ 解释】\n\n矩阵 $A$ 如下：\n\n$$\n\\begin{bmatrix}\n1 & 1\\\\\n1 & 255\n\\end{bmatrix}\n$$\n\n行列式为 $1\\times 255 - 1 \\times 1=254$。\n\n### 数据范围\n\n本题采用 **子任务捆绑测试**。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^{11}$，$0\\le s,t< 10^9+7$。\n\n\n| 子任务编号  |      $n$      | 特殊性质  | 分值 |\n| :---------: | :-----------: | :-------: | :--: |\n| Subtask #1  |   $\\le 500$   |    无     | $8$  |\n| Subtask #2  |  $\\le 10^7$   | $s=1,t=2$ | $5$  |\n| Subtask #3  |  $\\le 10^7$   |   $s=1$   | $10$ |\n| Subtask #4  | $\\le 10^{11}$ | $s=1,t=2$ | $10$ |\n| Subtask #5  | $\\le 10^{11}$ |   $s=1$   | $10$ |\n| Subtask #6  | $\\le 10^{11}$ |   $t=1$   | $2$  |\n| Subtask #7  | $\\le 10^{7}$  | $t\\le 9$  | $10$ |\n| Subtask #8  | $\\le 10^{11}$ | $t\\le 9$  | $15$ |\n| Subtask #9  |  $\\le 10^7$   |    无     | $10$ |\n| Subtask #10 | $\\le 10^{11}$ |    无     | $20$ |\n\n**特殊性质** 一栏为空则表示没有特殊性质。子任务中没有规定范围的变量的值均在 $[0,10^9+7)$ 范围内生成。\n\n时间限制：$\\text{2000 ms}$；\n\n空间限制：$\\text{512 MB}$。", "locale": "zh-CN"}}}
{"pid": "P10183", "type": "P", "difficulty": 2, "samples": [["2\n1 \n2", "-1"], ["5\n10 \n20 \n30\n40\n50", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "最大公约数 gcd", "洛谷比赛"], "title": "[YDOI R1] Running", "background": "小 Z 要去跑步，他想开学后拉爆他的同学。", "description": "\n\n小 Z 在一条公路上跑步，公路上有 $n$ 个超市，第 $i$ 个超市的位置为 $a_i$。当小 Z 经过一个超市的时间为奇数时，他就会去逛超市，从而被同学拉爆。\n\n小 Z 最开始位于位置为 $0$ 的点。他会在每个单位时间向右跑 $v$ 个单位长度。\n\n请求出：能够使小 Z 经过 $n$ 个超市中每一个超市时，都不去逛超市的 $v$ 的最大值。\n\n\n规定 $v$ 必须是正整数，且小 Z 到达任意一个超市时，花费的时间必须为整数，换言之，你需要保证小 Z 到达任意一个超市的时间都是偶数。注意时间初始为 $0$。\n", "inputFormat": "输入共 $n+1$ 行。\n\n第 $1$ 行，$1$ 个正整数 $n$。\n\n第 $2\\sim n+1$ 行，每行 $1$ 个正整数，第 $i+1$ 行输入的正整数是 $a_i$。", "outputFormat": "输出共 $1$ 行。\n\n输出符合条件的 $v$ 的最大值。如果无解则输出 $-1$。", "hint": "### 【样例解释】\n对于样例 $1$，可以证明不存在符合要求的速度。\n\n对于样例 $2$，当 $v=5$ 时，到达第 $1\\sim5$ 个超市的时间分别为 $2$，$4$，$6$，$8$，$10$，均为偶数，符合题目要求。可以证明不存在更快的符合要求的速度。\n\n\n**本题采用捆绑测试**。\n\n|子任务编号|$n\\le$|$a_i\\le$|分值|\n|:--:|:--:|:--:|:--:|\n|$1$|$1$|$3\\times10^{18}$|$10$|\n|$2$|$25$|保证 $a_1\\le 2\\times 10^6$|$10$|\n|$3$|$10^4$|保证 $a_1\\le 2\\times 10^6$|$20$|\n|$4$|$2\\times10^6$|$3\\times10^{18}$|$60$|\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2\\times10^6$，$1\\le a_1<a_2<\\dots<a_{n-1}<a_n\\le3\\times10^{18}$。保证所有输入都是正整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YDOI R1] Running", "background": "小 Z 要去跑步，他想开学后拉爆他的同学。", "description": "\n\n小 Z 在一条公路上跑步，公路上有 $n$ 个超市，第 $i$ 个超市的位置为 $a_i$。当小 Z 经过一个超市的时间为奇数时，他就会去逛超市，从而被同学拉爆。\n\n小 Z 最开始位于位置为 $0$ 的点。他会在每个单位时间向右跑 $v$ 个单位长度。\n\n请求出：能够使小 Z 经过 $n$ 个超市中每一个超市时，都不去逛超市的 $v$ 的最大值。\n\n\n规定 $v$ 必须是正整数，且小 Z 到达任意一个超市时，花费的时间必须为整数，换言之，你需要保证小 Z 到达任意一个超市的时间都是偶数。注意时间初始为 $0$。\n", "inputFormat": "输入共 $n+1$ 行。\n\n第 $1$ 行，$1$ 个正整数 $n$。\n\n第 $2\\sim n+1$ 行，每行 $1$ 个正整数，第 $i+1$ 行输入的正整数是 $a_i$。", "outputFormat": "输出共 $1$ 行。\n\n输出符合条件的 $v$ 的最大值。如果无解则输出 $-1$。", "hint": "### 【样例解释】\n对于样例 $1$，可以证明不存在符合要求的速度。\n\n对于样例 $2$，当 $v=5$ 时，到达第 $1\\sim5$ 个超市的时间分别为 $2$，$4$，$6$，$8$，$10$，均为偶数，符合题目要求。可以证明不存在更快的符合要求的速度。\n\n\n**本题采用捆绑测试**。\n\n|子任务编号|$n\\le$|$a_i\\le$|分值|\n|:--:|:--:|:--:|:--:|\n|$1$|$1$|$3\\times10^{18}$|$10$|\n|$2$|$25$|保证 $a_1\\le 2\\times 10^6$|$10$|\n|$3$|$10^4$|保证 $a_1\\le 2\\times 10^6$|$20$|\n|$4$|$2\\times10^6$|$3\\times10^{18}$|$60$|\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2\\times10^6$，$1\\le a_1<a_2<\\dots<a_{n-1}<a_n\\le3\\times10^{18}$。保证所有输入都是正整数。", "locale": "zh-CN"}}}
{"pid": "P10184", "type": "P", "difficulty": 4, "samples": [["5 3 \n3 2 5 1 1 ", "3 "], ["6 4 \n1 1 4 5 1 4 ", "3 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "贪心", "二分", "O2优化", "洛谷比赛"], "title": "[YDOI R1] whk", "background": "小 Z 要卷 whk。", "description": "小 Z 一共要卷 $n$ 门科目，第 $i$ 门科目他有且只有 $a_i$ 道题。有无数天时间，每天小 Z 可以做无数道题。\n\n如果小 Z 认为一天是有趣的，仅当他在这一天**至少**做了 $t$ 门科目的题。\n\n小 Z 想知道最多有多少天是有趣的。", "inputFormat": "第一行，$2$ 个正整数 $n,t$。\n\n接下来一行，有 $n$ 个整数，分别 $a_1,a_2,a_3,\\dots,a_{n-1},a_n$。\n", "outputFormat": "一个整数，输出小 Z 认为有趣的天数的最大值。", "hint": "Subtask 0 为 hack 数据，不计分。\n\n **本题采用捆绑测试**。\n| 子任务编号 | $n\\le$ | $a_i\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | \n| $1$ | $1000$ | $1000$ | 无 | $20$ | \n| $2$ | $5\\times10^5$ | $10^5$ | $t=1$ | $10$ |  \n| $3$ | $5\\times10^5$ | $1$ | 所有 $a_i$ 值都为 $1$ | $10$ |  \n| $4$ | $5\\times10^5$ | $10^6$ | 无 | $60$ |   \n\n\n\n对于所有数据，$1\\le t\\le n\\le5\\times10^5$，$1\\le a_i \\le 10^6$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YDOI R1] whk", "background": "小 Z 要卷 whk。", "description": "小 Z 一共要卷 $n$ 门科目，第 $i$ 门科目他有且只有 $a_i$ 道题。有无数天时间，每天小 Z 可以做无数道题。\n\n如果小 Z 认为一天是有趣的，仅当他在这一天**至少**做了 $t$ 门科目的题。\n\n小 Z 想知道最多有多少天是有趣的。", "inputFormat": "第一行，$2$ 个正整数 $n,t$。\n\n接下来一行，有 $n$ 个整数，分别 $a_1,a_2,a_3,\\dots,a_{n-1},a_n$。\n", "outputFormat": "一个整数，输出小 Z 认为有趣的天数的最大值。", "hint": "Subtask 0 为 hack 数据，不计分。\n\n **本题采用捆绑测试**。\n| 子任务编号 | $n\\le$ | $a_i\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | \n| $1$ | $1000$ | $1000$ | 无 | $20$ | \n| $2$ | $5\\times10^5$ | $10^5$ | $t=1$ | $10$ |  \n| $3$ | $5\\times10^5$ | $1$ | 所有 $a_i$ 值都为 $1$ | $10$ |  \n| $4$ | $5\\times10^5$ | $10^6$ | 无 | $60$ |   \n\n\n\n对于所有数据，$1\\le t\\le n\\le5\\times10^5$，$1\\le a_i \\le 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P10185", "type": "P", "difficulty": 4, "samples": [["2\n1 2\n2 3 ", "38"], ["2\n18 2\n9 1", "786624"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "组合数学", "二项式定理"], "title": "[YDOI R1] Necklace", "background": "hdkk 正在做项链。", "description": "hdkk 有 $n$ 种颜色的珠子，每种珠子有 $a_i$ 颗，他可以选出任意颗珠子串成一串项链。\n\n每种珠子有一个漂亮值 $v_i$，hdkk 认为项链有一个美丽度，若第 $i$ 种珠子在项链中有 $cnt$ 颗并且 $cnt\\ge1$，则这串项链的美丽度会加上 $(v_i)^{cnt}$。\n\n\n\n现在他想知道，所有不同的项链的美丽度总和是多少，请你求出答案，并对 $10^9+7$ 取模。\n\n定义两串项链是不同的，当且仅当存在一颗珠子，它在一串项链中出现，在另一串中没有出现。\n\n注意：每颗珠子都是互不相同的，即使颜色一样。", "inputFormat": "第 $1$ 行有 $1$ 个正整数 $n$。\n\n第 $2$ 行有 $n$ 个整数，第 $i$ 个数表示 $a_i$。\n\n第 $3$ 行有 $n$ 个整数，第 $i$ 个数表示 $v_i$。\n\n\n", "outputFormat": "一个整数，所有不同项链的美丽度的总和对 $10^9+7$ 取模的结果。", "hint": "### 样例解释 #1\n\n颜色 $1$：$\\left\\{1\\right\\}$，颜色 $2$：$\\left\\{2,3\\right\\}$。\n\n共有 $7$ 种不同的项链：$\\left \\{1 \\right \\},\\left \\{2\\right \\},\\left \\{3\\right \\},\\left \\{1,2 \\right \\},\\left \\{1,3 \\right \\},\\left \\{2,3 \\right \\},\\left \\{1,2,3 \\right \\}$，美丽度总和为 $2+3+3+(2+3)+(2+3)+3^2+(2+3^2)=38$。\n\n\n**本题采用捆绑测试。**\n\n|子任务编号|$n\\le$|$a_i\\le$|分值|\n|:--:|:--:|:--:|:--:|\n|$1$|$4$|$5$|$15$|\n|$2$|$10^3$|$10^3$|$25$|\n|$3$|$2\\times10^5$|$10^9$|$60$|\n\n对于所有数据，保证 $1\\le n\\le2\\times10^5$，$1\\le a_i\\le10^9$，$1\\le v_i\\le10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YDOI R1] Necklace", "background": "hdkk 正在做项链。", "description": "hdkk 有 $n$ 种颜色的珠子，每种珠子有 $a_i$ 颗，他可以选出任意颗珠子串成一串项链。\n\n每种珠子有一个漂亮值 $v_i$，hdkk 认为项链有一个美丽度，若第 $i$ 种珠子在项链中有 $cnt$ 颗并且 $cnt\\ge1$，则这串项链的美丽度会加上 $(v_i)^{cnt}$。\n\n\n\n现在他想知道，所有不同的项链的美丽度总和是多少，请你求出答案，并对 $10^9+7$ 取模。\n\n定义两串项链是不同的，当且仅当存在一颗珠子，它在一串项链中出现，在另一串中没有出现。\n\n注意：每颗珠子都是互不相同的，即使颜色一样。", "inputFormat": "第 $1$ 行有 $1$ 个正整数 $n$。\n\n第 $2$ 行有 $n$ 个整数，第 $i$ 个数表示 $a_i$。\n\n第 $3$ 行有 $n$ 个整数，第 $i$ 个数表示 $v_i$。\n\n\n", "outputFormat": "一个整数，所有不同项链的美丽度的总和对 $10^9+7$ 取模的结果。", "hint": "### 样例解释 #1\n\n颜色 $1$：$\\left\\{1\\right\\}$，颜色 $2$：$\\left\\{2,3\\right\\}$。\n\n共有 $7$ 种不同的项链：$\\left \\{1 \\right \\},\\left \\{2\\right \\},\\left \\{3\\right \\},\\left \\{1,2 \\right \\},\\left \\{1,3 \\right \\},\\left \\{2,3 \\right \\},\\left \\{1,2,3 \\right \\}$，美丽度总和为 $2+3+3+(2+3)+(2+3)+3^2+(2+3^2)=38$。\n\n\n**本题采用捆绑测试。**\n\n|子任务编号|$n\\le$|$a_i\\le$|分值|\n|:--:|:--:|:--:|:--:|\n|$1$|$4$|$5$|$15$|\n|$2$|$10^3$|$10^3$|$25$|\n|$3$|$2\\times10^5$|$10^9$|$60$|\n\n对于所有数据，保证 $1\\le n\\le2\\times10^5$，$1\\le a_i\\le10^9$，$1\\le v_i\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P10186", "type": "P", "difficulty": 6, "samples": [["2", "6"], ["1919810", "107114211"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "素数判断,质数,筛法", "莫比乌斯反演", "杜教筛"], "title": "[YDOI R1] Lattice", "background": "se 喜欢点阵。", "description": "se 有一个正方形点阵，这个点阵以 $(1,1)$ 为左下角，以 $(n,n)$ 为右上角。\n\nse 还有一条直线，其表达式为 $y=kx$，其中 $k\\in(0,\\infty)$。\n\n对于任意一个 $k$，设该直线经过了 $cnt$ 个点阵中的点，se 对这条直线有一个喜爱程度，为 $cnt^2$。\n\nse 想知道所有直线的喜爱程度和对 $10^9+7$ 取模的结果，请你告诉 se。", "inputFormat": "一行一个整数 $n$。", "outputFormat": "输出一个整数，表示喜爱程度和对 $10^9+7$ 取模的结果。", "hint": "### 样例解释 #1\n当 $k$ 为 $\\frac{1}{2}$ 时，直线过点阵中的点 $(2,1)$，喜爱程度为 $1^2=1$；当 $k$ 为 $1$ 时，直线过点阵中的点 $(1,1)$ 和点 $(2,2)$，喜爱程度为 $2^2=4$；当 $k$ 为 $2$ 时，直线过点阵中的点 $(1,2)$，喜爱程度为 $1^2=1$。喜爱程度和为 $1+4+1=6$。\n### 数据范围\n**本题采用捆绑测试**。\n|子任务编号|$n\\le$|分值|\n|:--:|:--:|:--:|\n|$1$|$8$|$5$|\n|$2$|$10^3$|$15$|\n|$3$|$10^6$|$30$|\n|$4$|$2^{31}-1$|$50$|\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2^{31}-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YDOI R1] Lattice", "background": "se 喜欢点阵。", "description": "se 有一个正方形点阵，这个点阵以 $(1,1)$ 为左下角，以 $(n,n)$ 为右上角。\n\nse 还有一条直线，其表达式为 $y=kx$，其中 $k\\in(0,\\infty)$。\n\n对于任意一个 $k$，设该直线经过了 $cnt$ 个点阵中的点，se 对这条直线有一个喜爱程度，为 $cnt^2$。\n\nse 想知道所有直线的喜爱程度和对 $10^9+7$ 取模的结果，请你告诉 se。", "inputFormat": "一行一个整数 $n$。", "outputFormat": "输出一个整数，表示喜爱程度和对 $10^9+7$ 取模的结果。", "hint": "### 样例解释 #1\n当 $k$ 为 $\\frac{1}{2}$ 时，直线过点阵中的点 $(2,1)$，喜爱程度为 $1^2=1$；当 $k$ 为 $1$ 时，直线过点阵中的点 $(1,1)$ 和点 $(2,2)$，喜爱程度为 $2^2=4$；当 $k$ 为 $2$ 时，直线过点阵中的点 $(1,2)$，喜爱程度为 $1^2=1$。喜爱程度和为 $1+4+1=6$。\n### 数据范围\n**本题采用捆绑测试**。\n|子任务编号|$n\\le$|分值|\n|:--:|:--:|:--:|\n|$1$|$8$|$5$|\n|$2$|$10^3$|$15$|\n|$3$|$10^6$|$30$|\n|$4$|$2^{31}-1$|$50$|\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2^{31}-1$。", "locale": "zh-CN"}}}
