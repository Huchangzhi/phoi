{"pid": "P9800", "type": "P", "difficulty": 6, "samples": [["16\nfun while return var { } ( ) , ; > = + ++ - --\n9\nfun fib(num) { # compute fibs\n  var return_value = 1, prev = 0, temp;\n  while (num > 0) {\n    temp = return_value; return_value = return_value + prev;\n    prev = temp;\n    num--;\n  }\n  return return_value;\n}\n", "fun a(b){var c=1,d=0,e;while(b>0){e=c;c=c+d;d=e;b--;}return c;}\n"], ["10\n( ) + ++ : -> >> >>: b c)\n2\n($val1++ + +4 kb) >> :out\nb-> + 10 >>: t # using >>: \n", "(a+++ +4c )>> :d b->+10>>:e\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "ICPC", "NERC/NEERC"], "title": "[NERC 2018] JS Minification", "background": "翻译自 [NERC 2018](https://neerc.ifmo.ru/archive/2018/neerc-2018-statement.pdf) J 题。", "description": "你有一个程序，其中每行包含 $0$ 个或多个可以用空格分隔的标记，你需要将其按下列方法“压行”。\n\n- 在每一行中，如果存在 `#` 开头的部分，说明这是一个注释，其与其同一行后面的东西一起不被执行。\n\n- 通过重复跳过空格并从当前解析位置开始查找可能最长的标识符，将每一行从左到右解析为标识符序列，从而将源代码转换为标识符序列。下面列出了所有可能的标识符：\n\n> - 保留标识符：缩小过程中应保留的任何类型的运算符、分隔符、文字、保留字或库函数的名称。保留标记是不包含 `#` 的非空格 ASCII 字符的固定字符串。\n> - 数字标识符：有数字组成的一连串数字字符串。\n> - 单词标识符：由以下集合中的一系列字符组成：小写字母、大写字母、数字、`_`、`$` 且不以数字开头。\n\n请注意，在压缩过程中，满足数字或单词定义，但出现在保留标记列表中的**最长字符序列**被视为保留标识符。\n\n在压缩过程中，使用以下算法以系统的方式重命名单词：\n\n- 定义 $s$ 为若干个由小写字母组成的字符串按长度为第一关键词，字典序为第二关键词进行排序后的序列。\n\n- 将标识符序列中遇到的第一个单词重命名为目标单词列表中的第一个词，并将标识符顺序中出现的所有相同单词重命名成第一个词。然后将标识符序列中遇到的第二个新词重命名为目标单词列表中的第二单词，依此类推。\n\n此外，你可以删除原本某些不必要的空格与换行符。但是注意，你删除后并不可以使原本不是标识符的某些字符串变成了标识符，或是原本是标识符的变成了不是标识符的。", "inputFormat": "输入的第一行包含一个整数 $n \\ (1 \\leq n \\leq 40)$，代表标识符的数量。\n\n输入的第二行包含由空格分隔的保留标识符的列表，该列表中没有重复，长度不小于 $1$，不大于 $20$。\n\n输入的第三行包含单个整数 $m \\ (1 \\leq m \\leq 40)$，代表输入代码中的行数。\n\n接下来 $m$ 行一行一串代码（可能包含前导空格）。", "outputFormat": "输出一行，是对输入代码进行压缩处理的结果。输出解析后的与具有相应重命名后的标识符序列，并且应包含尽可能少的空格。如果有多种方法，那请输出空格最少且长度最小的。", "hint": "保证数据范围 $1 \\leq n \\leq 40$，$1 \\leq m \\leq 40$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NERC 2018] JS Minification", "background": "翻译自 [NERC 2018](https://neerc.ifmo.ru/archive/2018/neerc-2018-statement.pdf) J 题。", "description": "你有一个程序，其中每行包含 $0$ 个或多个可以用空格分隔的标记，你需要将其按下列方法“压行”。\n\n- 在每一行中，如果存在 `#` 开头的部分，说明这是一个注释，其与其同一行后面的东西一起不被执行。\n\n- 通过重复跳过空格并从当前解析位置开始查找可能最长的标识符，将每一行从左到右解析为标识符序列，从而将源代码转换为标识符序列。下面列出了所有可能的标识符：\n\n> - 保留标识符：缩小过程中应保留的任何类型的运算符、分隔符、文字、保留字或库函数的名称。保留标记是不包含 `#` 的非空格 ASCII 字符的固定字符串。\n> - 数字标识符：有数字组成的一连串数字字符串。\n> - 单词标识符：由以下集合中的一系列字符组成：小写字母、大写字母、数字、`_`、`$` 且不以数字开头。\n\n请注意，在压缩过程中，满足数字或单词定义，但出现在保留标记列表中的**最长字符序列**被视为保留标识符。\n\n在压缩过程中，使用以下算法以系统的方式重命名单词：\n\n- 定义 $s$ 为若干个由小写字母组成的字符串按长度为第一关键词，字典序为第二关键词进行排序后的序列。\n\n- 将标识符序列中遇到的第一个单词重命名为目标单词列表中的第一个词，并将标识符顺序中出现的所有相同单词重命名成第一个词。然后将标识符序列中遇到的第二个新词重命名为目标单词列表中的第二单词，依此类推。\n\n此外，你可以删除原本某些不必要的空格与换行符。但是注意，你删除后并不可以使原本不是标识符的某些字符串变成了标识符，或是原本是标识符的变成了不是标识符的。", "inputFormat": "输入的第一行包含一个整数 $n \\ (1 \\leq n \\leq 40)$，代表标识符的数量。\n\n输入的第二行包含由空格分隔的保留标识符的列表，该列表中没有重复，长度不小于 $1$，不大于 $20$。\n\n输入的第三行包含单个整数 $m \\ (1 \\leq m \\leq 40)$，代表输入代码中的行数。\n\n接下来 $m$ 行一行一串代码（可能包含前导空格）。", "outputFormat": "输出一行，是对输入代码进行压缩处理的结果。输出解析后的与具有相应重命名后的标识符序列，并且应包含尽可能少的空格。如果有多种方法，那请输出空格最少且长度最小的。", "hint": "保证数据范围 $1 \\leq n \\leq 40$，$1 \\leq m \\leq 40$。", "locale": "zh-CN"}}}
{"pid": "P9801", "type": "P", "difficulty": 6, "samples": [["19\n? 3\n+ 2 2\n? 3\n? 4\n+ 5 2\n? 5\n? 6\n+ 1 2\n? 2\n? 3\n? 4\n? 5\n? 6\n? 7\n? 9\n- 8\n? 2\n? 3\n? 6", "0\n1\n0\n2\n1\n3\n2\n1\n2\n1\n0\n0\n2\n1\n1"]], "limits": {"time": [2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600, 2600], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "ICPC", "NERC/NEERC"], "title": "[NERC 2018] King Kog’s Reception", "background": "翻译自 [NERC 2018](https://neerc.ifmo.ru/archive/2018/neerc-2018-statement.pdf) K 题。", "description": "有些骑士想要拜访国王，但是由于这里的骑士都很遵守礼节，他们都会提前预约好他要来拜访的时刻和拜访将持续的时间。骑士按照接待处记录的时刻顺序依次拜访国王，每个骑士必须等前面的骑士结束拜访。\n\n很不幸，公主也准备要来拜访国王，但善良的公主并不会为此而打乱骑士们拜访的顺序，而她会等待骑士们拜访完了再来拜访，请你计算公主要等多长时间。", "inputFormat": "共 $q+1$ 行。\n\n第一行一个整数 $q (1 \\leq q \\leq 3 \\times 10^5)$。\n\n然后 $q$ 行，先是一个字符。\n\n- 如果字符是 `+`，紧跟在后面两个数字，表示骑士 $i$ 要于 $t (1 \\leq t \\leq 10^6)$ 时刻到达，拜访时间 $d(1 \\leq d \\leq 10^6)$ 时间单位。\n\n- 如果字符是 `-`，后面一个数字 $i(1 \\leq i \\leq q)$，表示骑士 $i$ 暂时取消了他的预约。\n\n- 如果字符是 `?`，后面一个数字 $t (1 \\leq t \\leq 10^6)$，表示公主将于 $t$ 时刻拜访。", "outputFormat": "对于每个 `?`，输出一行，表示公主要等待多长时间。注意此处公主拜访时骑士的预约记录只有前面的几个，并不包含后面加进来的。", "hint": "对于所有数据，保证 $1 \\leq q \\leq 3 \\times 10^5$，$1 \\leq t \\leq 10^6$，$1 \\leq d \\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NERC 2018] King Kog’s Reception", "background": "翻译自 [NERC 2018](https://neerc.ifmo.ru/archive/2018/neerc-2018-statement.pdf) K 题。", "description": "有些骑士想要拜访国王，但是由于这里的骑士都很遵守礼节，他们都会提前预约好他要来拜访的时刻和拜访将持续的时间。骑士按照接待处记录的时刻顺序依次拜访国王，每个骑士必须等前面的骑士结束拜访。\n\n很不幸，公主也准备要来拜访国王，但善良的公主并不会为此而打乱骑士们拜访的顺序，而她会等待骑士们拜访完了再来拜访，请你计算公主要等多长时间。", "inputFormat": "共 $q+1$ 行。\n\n第一行一个整数 $q (1 \\leq q \\leq 3 \\times 10^5)$。\n\n然后 $q$ 行，先是一个字符。\n\n- 如果字符是 `+`，紧跟在后面两个数字，表示骑士 $i$ 要于 $t (1 \\leq t \\leq 10^6)$ 时刻到达，拜访时间 $d(1 \\leq d \\leq 10^6)$ 时间单位。\n\n- 如果字符是 `-`，后面一个数字 $i(1 \\leq i \\leq q)$，表示骑士 $i$ 暂时取消了他的预约。\n\n- 如果字符是 `?`，后面一个数字 $t (1 \\leq t \\leq 10^6)$，表示公主将于 $t$ 时刻拜访。", "outputFormat": "对于每个 `?`，输出一行，表示公主要等待多长时间。注意此处公主拜访时骑士的预约记录只有前面的几个，并不包含后面加进来的。", "hint": "对于所有数据，保证 $1 \\leq q \\leq 3 \\times 10^5$，$1 \\leq t \\leq 10^6$，$1 \\leq d \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9802", "type": "P", "difficulty": 3, "samples": [["8 7\n1 1 3 1 5 3 7 1\n5 7 4 8 1 3 5 2", "10"], ["3 3\n3 1 2\n5 3 4", "0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2018", "排序", "ICPC", "NERC/NEERC"], "title": "[NERC 2018] Lazyland", "background": "翻译自 [NERC 2018](https://neerc.ifmo.ru/archive/2018/neerc-2018-statement.pdf) L 题。", "description": "一个城市里有 $n$ 个人，和 $k$ 种职业，其中，每个人都有一个现在正在从事的职业 $a_i$，但是很遗憾，由于某些职业的空缺，使得这个城市根本无法继续正常生存下去。\n\n你作为一城之主，自然不希望看到自己的城市这样子下去，你决定说服其中的某些人，使得每种职业都有人在做，对于每个人 $i$，你需要耗费 $b_i$ 的时间去说服。\n\n你需要求出你去说服的时间的最小值。", "inputFormat": "第一行两个整数 $n$ 和 $k (1 \\leq k \\leq n \\leq 10^5)$，分别表示 $n$ 个人和 $k$ 种职业。\n\n第二行 $n$ 个整数 $a_i (1 \\leq a_i \\leq k)$，表示第 $i$ 个人正在从事的职业 。\n\n第三行 $n$ 个整数 $b_i (1 \\leq b_i \\leq 10^9)$，表示第 $i$ 个人被说服去做别的职业的时间。", "outputFormat": "输出去说服市民的最小时间。", "hint": "对于所有的数据，保证 $1 \\leq k \\leq n \\leq 10^5$，$1 \\leq a_i \\leq k$，$1 \\leq b_i \\leq 10^9$。\n\n对于样例一，分别令 $1$，$6$，$8$ 号市民去从事 $2$，$4$，$6$ 号职业。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NERC 2018] Lazyland", "background": "翻译自 [NERC 2018](https://neerc.ifmo.ru/archive/2018/neerc-2018-statement.pdf) L 题。", "description": "一个城市里有 $n$ 个人，和 $k$ 种职业，其中，每个人都有一个现在正在从事的职业 $a_i$，但是很遗憾，由于某些职业的空缺，使得这个城市根本无法继续正常生存下去。\n\n你作为一城之主，自然不希望看到自己的城市这样子下去，你决定说服其中的某些人，使得每种职业都有人在做，对于每个人 $i$，你需要耗费 $b_i$ 的时间去说服。\n\n你需要求出你去说服的时间的最小值。", "inputFormat": "第一行两个整数 $n$ 和 $k (1 \\leq k \\leq n \\leq 10^5)$，分别表示 $n$ 个人和 $k$ 种职业。\n\n第二行 $n$ 个整数 $a_i (1 \\leq a_i \\leq k)$，表示第 $i$ 个人正在从事的职业 。\n\n第三行 $n$ 个整数 $b_i (1 \\leq b_i \\leq 10^9)$，表示第 $i$ 个人被说服去做别的职业的时间。", "outputFormat": "输出去说服市民的最小时间。", "hint": "对于所有的数据，保证 $1 \\leq k \\leq n \\leq 10^5$，$1 \\leq a_i \\leq k$，$1 \\leq b_i \\leq 10^9$。\n\n对于样例一，分别令 $1$，$6$，$8$ 号市民去从事 $2$，$4$，$6$ 号职业。", "locale": "zh-CN"}}}
{"pid": "P9803", "type": "P", "difficulty": 5, "samples": [["4\n0 1 0 1\n0 0 1 0\n0 1 0 0\n1 0 0 0", "4 2 3\n..#.\n.4..\n####\n1#.#\n..3.\n#2..\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "Special Judge", "强连通分量", "构造", "ICPC", "NERC/NEERC"], "title": "[NERC 2018] Minegraphed", "background": "翻译自 [NERC 2018](https://neerc.ifmo.ru/archive/2018/neerc-2018-statement.pdf) M 题。", "description": "Marika 正在制作一款名为 Minegraphed 的游戏，游戏内容是你在一个三维的长方体上移动。长方体游戏场地的每个单元格都是空单元格或障碍单元格。你总是在一个空单元格里面，要么在最底层，要么在一个障碍的顶部。对于每次移动，你可以选择东南西北中的一项进行移动，移动的规则如下：\n\n- 你不能移动至矩形立方体外面。\n- 如果你面前的单元格是空的，那么你可以向前移动一格，然后向底部落下，直到你到达最底层或者一个障碍。\n- 如果你在非最顶层，你前面的单元格是一个障碍物，你上面的单元格和这个障碍物上面的单元格都是空的，然后你可以爬到该障碍物的顶部。\n- 其余情况，你不能进行移动。\n\n长方体中有 $n$ 个可以站立的特殊空单元格，分别编号为 $1\\sim n$。\n\nMarika 还有一个 $n \\times n$ 的二维数组 $a$，表示一个包含 $n$ 个结点的有向图的邻接矩阵（$a_{i,j}=1$ 表示有一条边 $i\\to j$，反之亦然）。你需要满足 $i$ 在有向图上能通过若干条边到达 $j$，当且仅当在长方体的游戏场地中可以通过移动从编号为 $i$ 的单元格到达编号为 $j$ 的单元格。\n\n请构造一种合法方案。", "inputFormat": "第一行一个整数 $n \\ (1 \\leq n \\leq 9)$。\n\n然后 $n$ 行，每行 $n$ 个数分别为 $a_{i,1},a_{i,2},\\ldots,a_{i,n}$，表示有向图的邻接矩阵。", "outputFormat": "输出第一行 $x,y,z$ 表示你的矩形立方体的长宽高，你需要保证 $x \\times y \\times z \\leq 10^6$。\n\n然后 $z$ 层（自上向下），每层一个 $x \\times y$ 的矩形：$map_{i,j}$ 若为 `#` 表示障碍，若为 `.` 表示普通的空单元格，若为数字则表示一个特殊空单元格，数字表示其对应的编号。\n\n保证存在解法。", "hint": "样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w4266sez.png)\n\n对于所有数据保证 $1 \\leq n \\leq 9$，$a_{i,j} \\in \\{0, 1\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NERC 2018] Minegraphed", "background": "翻译自 [NERC 2018](https://neerc.ifmo.ru/archive/2018/neerc-2018-statement.pdf) M 题。", "description": "Marika 正在制作一款名为 Minegraphed 的游戏，游戏内容是你在一个三维的长方体上移动。长方体游戏场地的每个单元格都是空单元格或障碍单元格。你总是在一个空单元格里面，要么在最底层，要么在一个障碍的顶部。对于每次移动，你可以选择东南西北中的一项进行移动，移动的规则如下：\n\n- 你不能移动至矩形立方体外面。\n- 如果你面前的单元格是空的，那么你可以向前移动一格，然后向底部落下，直到你到达最底层或者一个障碍。\n- 如果你在非最顶层，你前面的单元格是一个障碍物，你上面的单元格和这个障碍物上面的单元格都是空的，然后你可以爬到该障碍物的顶部。\n- 其余情况，你不能进行移动。\n\n长方体中有 $n$ 个可以站立的特殊空单元格，分别编号为 $1\\sim n$。\n\nMarika 还有一个 $n \\times n$ 的二维数组 $a$，表示一个包含 $n$ 个结点的有向图的邻接矩阵（$a_{i,j}=1$ 表示有一条边 $i\\to j$，反之亦然）。你需要满足 $i$ 在有向图上能通过若干条边到达 $j$，当且仅当在长方体的游戏场地中可以通过移动从编号为 $i$ 的单元格到达编号为 $j$ 的单元格。\n\n请构造一种合法方案。", "inputFormat": "第一行一个整数 $n \\ (1 \\leq n \\leq 9)$。\n\n然后 $n$ 行，每行 $n$ 个数分别为 $a_{i,1},a_{i,2},\\ldots,a_{i,n}$，表示有向图的邻接矩阵。", "outputFormat": "输出第一行 $x,y,z$ 表示你的矩形立方体的长宽高，你需要保证 $x \\times y \\times z \\leq 10^6$。\n\n然后 $z$ 层（自上向下），每层一个 $x \\times y$ 的矩形：$map_{i,j}$ 若为 `#` 表示障碍，若为 `.` 表示普通的空单元格，若为数字则表示一个特殊空单元格，数字表示其对应的编号。\n\n保证存在解法。", "hint": "样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w4266sez.png)\n\n对于所有数据保证 $1 \\leq n \\leq 9$，$a_{i,j} \\in \\{0, 1\\}$。", "locale": "zh-CN"}}}
{"pid": "P9804", "type": "P", "difficulty": 4, "samples": [["6 5 14\n1 3 1\n5 1 5\n2 3 2\n3 4 1\n3 5 3\nZ 1 1\nZ 1 2\nP\nP\nD\nD\nP\nZ 3 5\nP\nZ 3 5\nD\nZ 3 5\nL\nZ 3 5", "0\n-1\n-1\n3\n1\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "POI（波兰）", "2022", "2023"], "title": "[POI 2022/2023 R1] kol", "background": "题目译自 [POI2022~2023R1 kol](https://sio2.mimuw.edu.pl/c/oi30-1/p/kol/)。\n\n注意：原题时限为 32s，为避免卡评测，此题时限改为 3s。\n", "description": "你在一个 $m \\times m$ 的棋盘上玩贪吃蛇游戏，已知原本蛇长度为 $1$，内容为 `0`，在 $(1,1)$ 处，棋盘上存在 $p$ 个“食物点”，当一条蛇吃了一个“食物点”时，它将会在其头部增加一个食物点对应数值的部分，下图可以更清楚的演示吃食物的过程（红色数字为蛇身）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8t9pu2br.png)\n\n现在你进行了 $n$ 个操作，存在移动操作（上下左右）和查询操作（询问一个点是否被蛇覆盖），请编写一个程序求出它。", "inputFormat": "第一行三个整数 $m$，$p$，$n \\ (1 \\leq m \\leq 2000$，$1 \\leq p \\leq \\min(m^2 - 1, 10^6)$，$1 \\leq n \\leq 10^6)$。\n\n接下来 $p$ 行，每行三个整数 $w_i$，$k_i$，$c_i \\ (1 \\leq w_i,k_i \\leq m$，$0 \\leq c_i \\leq m^2-1)$，表示坐标 $(w_i,k_i)$ 的点是一个存在食物为 $c_i$ 的食物点。\n\n然后 $n$ 行，每行先是一个字符。\n\n- 如果该字符为 `Z`，则紧接着后面两个左边 $w_j',k_j'$，表示询问 $(w_j',k_j')$ 的地方是否存在蛇身，不存在输出 $-1$，存在输出对应的内容（数值）。\n\n- 否则，按照对应顺序移动：上（`G`）、下（`D`）、左（`L`）或右（`P`）。", "outputFormat": "对应字符为 `Z` 的，输出对应的输出。", "hint": "子任务分配如下：\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $m \\leq 300$ 且 $p,n \\leq 2000$ | $20$ |\n| $2$ | $m \\leq 800$ 且 $p,n \\leq 50000$ | $20$ |\n| $3$ | $c_i=0$ | $20$ |\n| $4$ | 无附加限制 | $40$ |\n\n本题中，子任务 $0$ 为样例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2022/2023 R1] kol", "background": "题目译自 [POI2022~2023R1 kol](https://sio2.mimuw.edu.pl/c/oi30-1/p/kol/)。\n\n注意：原题时限为 32s，为避免卡评测，此题时限改为 3s。\n", "description": "你在一个 $m \\times m$ 的棋盘上玩贪吃蛇游戏，已知原本蛇长度为 $1$，内容为 `0`，在 $(1,1)$ 处，棋盘上存在 $p$ 个“食物点”，当一条蛇吃了一个“食物点”时，它将会在其头部增加一个食物点对应数值的部分，下图可以更清楚的演示吃食物的过程（红色数字为蛇身）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8t9pu2br.png)\n\n现在你进行了 $n$ 个操作，存在移动操作（上下左右）和查询操作（询问一个点是否被蛇覆盖），请编写一个程序求出它。", "inputFormat": "第一行三个整数 $m$，$p$，$n \\ (1 \\leq m \\leq 2000$，$1 \\leq p \\leq \\min(m^2 - 1, 10^6)$，$1 \\leq n \\leq 10^6)$。\n\n接下来 $p$ 行，每行三个整数 $w_i$，$k_i$，$c_i \\ (1 \\leq w_i,k_i \\leq m$，$0 \\leq c_i \\leq m^2-1)$，表示坐标 $(w_i,k_i)$ 的点是一个存在食物为 $c_i$ 的食物点。\n\n然后 $n$ 行，每行先是一个字符。\n\n- 如果该字符为 `Z`，则紧接着后面两个左边 $w_j',k_j'$，表示询问 $(w_j',k_j')$ 的地方是否存在蛇身，不存在输出 $-1$，存在输出对应的内容（数值）。\n\n- 否则，按照对应顺序移动：上（`G`）、下（`D`）、左（`L`）或右（`P`）。", "outputFormat": "对应字符为 `Z` 的，输出对应的输出。", "hint": "子任务分配如下：\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $m \\leq 300$ 且 $p,n \\leq 2000$ | $20$ |\n| $2$ | $m \\leq 800$ 且 $p,n \\leq 50000$ | $20$ |\n| $3$ | $c_i=0$ | $20$ |\n| $4$ | 无附加限制 | $40$ |\n\n本题中，子任务 $0$ 为样例。", "locale": "zh-CN"}}}
{"pid": "P9805", "type": "P", "difficulty": 3, "samples": [["8 2\n(()(()))", "2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["POI（波兰）", "2022", "2023"], "title": "[POI 2022/2023 R1] ply", "background": "题目译自 [POI2022~2023R1 ply](https://sio2.mimuw.edu.pl/c/oi30-1/p/ply/)。", "description": "定义“合法括号串”及其深度如下：\n\n- 空串是一个合法括号串，深度为 $0$。\n- 如果 $w$ 是一个合法括号串，深度为 $h$，则 $(w)$ 也是一个合法括号串，深度为 $h+1$。\n- 如果 $w_1$ 和 $w_2$ 都是合法括号串，深度分别为 $h_1$ 和 $h_2$，则 $w_1w_2$ 也是一个合法括号串，深度为 $\\max(h_1,h_2)$。\n\n定义翻转一个字符为：\n\n- 如果当前字符为 `(`，修改为 `)`。\n- 如果当前字符为 `)`，修改为 `(`。\n\n你需要通过翻转 $s$ 当中某些字符使得深度不超过 $H$，求最小操作次数。", "inputFormat": "第一行两个数字 $n \\ (2 \\leq n \\leq 10^6)$ 和 $H \\ (1 \\leq H \\leq \\frac{n}{2})$，分别表示 $|s|$ 和要求修改后不超过的深度。\n\n第二行一个字符串 $s$，表示原来的括号串。", "outputFormat": "输出最小修改次数。", "hint": "对于样例，可以修改为 `(()()())`，这样深度为 $2$。\n\n子任务分配如下：\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $n \\leq 20$ | $20$ |\n| $2$ | $n \\leq 3000$ | $40$ |\n| $3$ | $n \\leq 10^6$ 且 $H = h-1$ | $20$ |\n| $4$ | $n \\leq 10^6$ | $20$ |\n\n注：$h$ 为输入的括号串的深度。\n\n本题中，子任务 $0$ 为样例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2022/2023 R1] ply", "background": "题目译自 [POI2022~2023R1 ply](https://sio2.mimuw.edu.pl/c/oi30-1/p/ply/)。", "description": "定义“合法括号串”及其深度如下：\n\n- 空串是一个合法括号串，深度为 $0$。\n- 如果 $w$ 是一个合法括号串，深度为 $h$，则 $(w)$ 也是一个合法括号串，深度为 $h+1$。\n- 如果 $w_1$ 和 $w_2$ 都是合法括号串，深度分别为 $h_1$ 和 $h_2$，则 $w_1w_2$ 也是一个合法括号串，深度为 $\\max(h_1,h_2)$。\n\n定义翻转一个字符为：\n\n- 如果当前字符为 `(`，修改为 `)`。\n- 如果当前字符为 `)`，修改为 `(`。\n\n你需要通过翻转 $s$ 当中某些字符使得深度不超过 $H$，求最小操作次数。", "inputFormat": "第一行两个数字 $n \\ (2 \\leq n \\leq 10^6)$ 和 $H \\ (1 \\leq H \\leq \\frac{n}{2})$，分别表示 $|s|$ 和要求修改后不超过的深度。\n\n第二行一个字符串 $s$，表示原来的括号串。", "outputFormat": "输出最小修改次数。", "hint": "对于样例，可以修改为 `(()()())`，这样深度为 $2$。\n\n子任务分配如下：\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $n \\leq 20$ | $20$ |\n| $2$ | $n \\leq 3000$ | $40$ |\n| $3$ | $n \\leq 10^6$ 且 $H = h-1$ | $20$ |\n| $4$ | $n \\leq 10^6$ | $20$ |\n\n注：$h$ 为输入的括号串的深度。\n\n本题中，子任务 $0$ 为样例。", "locale": "zh-CN"}}}
{"pid": "P9806", "type": "P", "difficulty": 3, "samples": [["9 4 3\n1 3 2 1 2 3 1 3 2\n1 3 1 2\n", "1 1 0 1 1 1 1 0 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 6000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["POI（波兰）", "2022", "2023"], "title": "[POI 2022/2023 R1] poc", "background": "题目译自 [POI2022~2023R1 poc](https://sio2.mimuw.edu.pl/c/oi30-1/p/poc/)。\n", "description": "小 A 和小 B 在记录过往的车辆的类型！\n\n已知类型分别有 $1 \\sim k$ 个，每种车辆必然属于其中之一。\n\n小 A 按顺序细心地记录了所有的车辆的类型，但是贪玩的小 B 只按顺序记录了一部分车辆。\n\n小 A 记录的内容长度为 $n$，小 B 记录的长度为 $m$。\n\n称在小 A 记录中的第 $i$ 辆车“可能被 B 记录到”当且仅当在小 A 的记录中存在一个包含 $i$ 的子序列与小 B 所记录的完全相同。\n\n保证小 B 记录的序列一定是小 A 记录的子序列，问哪些车辆是可能会被小 B 记录到，哪些没有。", "inputFormat": "第一行三个整数 $n,m,k \\ (1 \\leq n,m,k \\leq 3 \\times 10^5)$。\n\n第二行一个长度为 $n$ 的序列，表示小 A 记录的序列。\n\n第三行一个长度为 $m$ 的序列，表示小 B 记录的序列。\n\n上述序列中的元素均满足 $1\\leq$ 序列元素 $\\leq k$。", "outputFormat": "对于每个小 A 记录到的车辆，请确定它能否被记录到，能输出 $1$，不能输出 $0$。", "hint": "对于样例，存在如下的子序列：\n\n$(1,2,4,5)$，$(1,2,4,9)$，$(1,2,7,9)$，$(1,6,7,9)$，$(4,6,7,9)$。\n\n注意到 $3$ 和 $8$ 一直都没被取到，故不能被小 B 记录到。\n\n子任务分配如下：\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $n,m \\leq 100$ | $15$ |\n| $2$ | $n,m \\leq 2000$ | $20$ |\n| $3$ | 每种类型的车辆最多被小 A 记录一次 | $15$ |\n| $4$ | 无附加限制 | $50$ |\n\n时间限制：Subtask1 1s，Subtask2 10s，Subtask3 和 Subtask4 6s。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2022/2023 R1] poc", "background": "题目译自 [POI2022~2023R1 poc](https://sio2.mimuw.edu.pl/c/oi30-1/p/poc/)。\n", "description": "小 A 和小 B 在记录过往的车辆的类型！\n\n已知类型分别有 $1 \\sim k$ 个，每种车辆必然属于其中之一。\n\n小 A 按顺序细心地记录了所有的车辆的类型，但是贪玩的小 B 只按顺序记录了一部分车辆。\n\n小 A 记录的内容长度为 $n$，小 B 记录的长度为 $m$。\n\n称在小 A 记录中的第 $i$ 辆车“可能被 B 记录到”当且仅当在小 A 的记录中存在一个包含 $i$ 的子序列与小 B 所记录的完全相同。\n\n保证小 B 记录的序列一定是小 A 记录的子序列，问哪些车辆是可能会被小 B 记录到，哪些没有。", "inputFormat": "第一行三个整数 $n,m,k \\ (1 \\leq n,m,k \\leq 3 \\times 10^5)$。\n\n第二行一个长度为 $n$ 的序列，表示小 A 记录的序列。\n\n第三行一个长度为 $m$ 的序列，表示小 B 记录的序列。\n\n上述序列中的元素均满足 $1\\leq$ 序列元素 $\\leq k$。", "outputFormat": "对于每个小 A 记录到的车辆，请确定它能否被记录到，能输出 $1$，不能输出 $0$。", "hint": "对于样例，存在如下的子序列：\n\n$(1,2,4,5)$，$(1,2,4,9)$，$(1,2,7,9)$，$(1,6,7,9)$，$(4,6,7,9)$。\n\n注意到 $3$ 和 $8$ 一直都没被取到，故不能被小 B 记录到。\n\n子任务分配如下：\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $n,m \\leq 100$ | $15$ |\n| $2$ | $n,m \\leq 2000$ | $20$ |\n| $3$ | 每种类型的车辆最多被小 A 记录一次 | $15$ |\n| $4$ | 无附加限制 | $50$ |\n\n时间限制：Subtask1 1s，Subtask2 10s，Subtask3 和 Subtask4 6s。", "locale": "zh-CN"}}}
{"pid": "P9807", "type": "P", "difficulty": 6, "samples": [["3 1 1 1\n3 2 1 4\n6 3 1 2\n10 2 1 4", "2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["POI（波兰）", "2022", "2023"], "title": "[POI 2022/2023 R1] wyp", "background": "题目译自 [POI2022~2023R1 wyp](https://sio2.mimuw.edu.pl/c/oi30-1/p/wyp/)。", "description": "你在高速上开着你新买的车，高速上共有 $2$ 个车道（分为左右，初始时所有车辆都在右侧），$n$ 辆在前面的车，但是由于这些车开的实在是太慢了，你想要进行超车。\n\n已知你的速度为 $V$，其他车速度为 $v_i$（保证 $V > v_i$），如果你的车的车头已经要撞上其他车了，那么你将会向左开进行超车，如果你当前右侧位置存在一个空隙使得你的车进入的了，那么你一定进行右侧。\n\n注意此处存在其他车相撞的情况，后面的车的速度会改成与它前面一样的速度。\n\n问你的车会进行几次左转操作。", "inputFormat": "第一行四个整数 $n$，$D$，$W$，$M$（$1 \\leq n \\leq 10^5$，$ 1 \\leq D \\leq 10^9$，$1 \\leq W,M \\leq 1000$），分别表示卡车的数量，自己车的长度，自己车的速度为 $W/M$，默认自己车的车头坐标为 $0$。\n\n接下来 $n$ 行，每行 $4$ 个整数 $x_i$，$d_i$，$w_i$，$m_i$（$1 \\leq x_i,d_i \\leq 10^9$，$1 \\leq w_i,m_i \\leq 1000$），分别表示其他车的坐标、长度，速度为 $w_i / m_i$。\n\n保证按 $x_i$ 升序排序给出。", "outputFormat": "输出要实行超车 $n$ 辆车要左转的次数。", "hint": "样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ymk60iqd.png)\n\n子任务分配如下：\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $v_i = v_{i+1}$ | $10$ |\n| $2$ | $v_i \\leq v_{i+1}$ | $20$ |\n| $3$ | $n \\leq 1000$ | $35$ |\n| $4$ | 无附加限制 | $35$ |\n\n本题中，子任务 $0$ 为样例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2022/2023 R1] wyp", "background": "题目译自 [POI2022~2023R1 wyp](https://sio2.mimuw.edu.pl/c/oi30-1/p/wyp/)。", "description": "你在高速上开着你新买的车，高速上共有 $2$ 个车道（分为左右，初始时所有车辆都在右侧），$n$ 辆在前面的车，但是由于这些车开的实在是太慢了，你想要进行超车。\n\n已知你的速度为 $V$，其他车速度为 $v_i$（保证 $V > v_i$），如果你的车的车头已经要撞上其他车了，那么你将会向左开进行超车，如果你当前右侧位置存在一个空隙使得你的车进入的了，那么你一定进行右侧。\n\n注意此处存在其他车相撞的情况，后面的车的速度会改成与它前面一样的速度。\n\n问你的车会进行几次左转操作。", "inputFormat": "第一行四个整数 $n$，$D$，$W$，$M$（$1 \\leq n \\leq 10^5$，$ 1 \\leq D \\leq 10^9$，$1 \\leq W,M \\leq 1000$），分别表示卡车的数量，自己车的长度，自己车的速度为 $W/M$，默认自己车的车头坐标为 $0$。\n\n接下来 $n$ 行，每行 $4$ 个整数 $x_i$，$d_i$，$w_i$，$m_i$（$1 \\leq x_i,d_i \\leq 10^9$，$1 \\leq w_i,m_i \\leq 1000$），分别表示其他车的坐标、长度，速度为 $w_i / m_i$。\n\n保证按 $x_i$ 升序排序给出。", "outputFormat": "输出要实行超车 $n$ 辆车要左转的次数。", "hint": "样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ymk60iqd.png)\n\n子任务分配如下：\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $v_i = v_{i+1}$ | $10$ |\n| $2$ | $v_i \\leq v_{i+1}$ | $20$ |\n| $3$ | $n \\leq 1000$ | $35$ |\n| $4$ | 无附加限制 | $35$ |\n\n本题中，子任务 $0$ 为样例。", "locale": "zh-CN"}}}
{"pid": "P9808", "type": "P", "difficulty": 6, "samples": [["5 3\n1 4 3\n3 1 6\n1 2 5\n4 5 1\n5\n3\n2", "8\n40\n90\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["POI（波兰）", "2022", "2023"], "title": "[POI 2022/2023 R1] zbo", "background": "题目译自 [POI2022~2023R1 zbo](https://sio2.mimuw.edu.pl/c/oi30-1/p/zbo/)。", "description": "远古时期有一个国王，他统治了 $n$ 个村庄，这些村庄以 $n-1$ 条道路连接，原来的国王城堡在 $1$ 号村庄。\n\n国王的儿子不久就要成年了，作为成年的王子们，其需要自己的城堡，所以在一些村庄会有**新的城堡**。\n\n每座城堡都需要进行通讯，但是无奈距离太过遥远，为此，每个城堡每天都会派出若干个信鸽，向其他每个城堡发送消息。一只信鸽每行驶一公里就要吃一克谷物。\n\n请你实现一个程序，求出按照输入顺序建造的每个城堡建造完之后所有城堡都能通讯的最少花费谷物数量。\n\n具体的，定义 $dis(x,y)$ 为 $x$ 到 $y$ 所花费的谷物数，求每个城堡 $i$ 建造完后的 $\\sum ^{i} _{x=1} \\sum ^{i}_{y=1} dis(x,y)$。\n\n注意上述式子默认两个相同的地点所花费为 $0$。", "inputFormat": "输入第一行两个数字 $n$ 和 $k \\ (1 \\leq k < n \\leq 10^5)$，分别表示村庄数量和即将建造的城堡数量。\n\n接下来 $n-1$ 行，每行三个整数 $a,b,c \\ (1 \\leq a,b \\leq n, a \\neq b, 1 \\leq c \\leq 1000)$，表示 $a$ 到 $b$ 存在一条长度为 $c$ 的无向边。\n\n再接下来 $k$ 行，每行一个整数 $d_{i}$，表示第 $i$ 个城堡建设在 $d_{i}$ 位置上，注意城堡不会重复建在一个位置。", "outputFormat": "对于每个建造完的城堡，输出最小花费。", "hint": "子任务分配如下：\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n \\cdot k \\leq 10^5$ | $15$ |\n| $2$ | 村庄是一条从 $1$ 到 $n$ 的链 | $35$ |\n| $3$ | 无特殊性质 | $50$ |\n\n本题中，子任务 $0$ 为样例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2022/2023 R1] zbo", "background": "题目译自 [POI2022~2023R1 zbo](https://sio2.mimuw.edu.pl/c/oi30-1/p/zbo/)。", "description": "远古时期有一个国王，他统治了 $n$ 个村庄，这些村庄以 $n-1$ 条道路连接，原来的国王城堡在 $1$ 号村庄。\n\n国王的儿子不久就要成年了，作为成年的王子们，其需要自己的城堡，所以在一些村庄会有**新的城堡**。\n\n每座城堡都需要进行通讯，但是无奈距离太过遥远，为此，每个城堡每天都会派出若干个信鸽，向其他每个城堡发送消息。一只信鸽每行驶一公里就要吃一克谷物。\n\n请你实现一个程序，求出按照输入顺序建造的每个城堡建造完之后所有城堡都能通讯的最少花费谷物数量。\n\n具体的，定义 $dis(x,y)$ 为 $x$ 到 $y$ 所花费的谷物数，求每个城堡 $i$ 建造完后的 $\\sum ^{i} _{x=1} \\sum ^{i}_{y=1} dis(x,y)$。\n\n注意上述式子默认两个相同的地点所花费为 $0$。", "inputFormat": "输入第一行两个数字 $n$ 和 $k \\ (1 \\leq k < n \\leq 10^5)$，分别表示村庄数量和即将建造的城堡数量。\n\n接下来 $n-1$ 行，每行三个整数 $a,b,c \\ (1 \\leq a,b \\leq n, a \\neq b, 1 \\leq c \\leq 1000)$，表示 $a$ 到 $b$ 存在一条长度为 $c$ 的无向边。\n\n再接下来 $k$ 行，每行一个整数 $d_{i}$，表示第 $i$ 个城堡建设在 $d_{i}$ 位置上，注意城堡不会重复建在一个位置。", "outputFormat": "对于每个建造完的城堡，输出最小花费。", "hint": "子任务分配如下：\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n \\cdot k \\leq 10^5$ | $15$ |\n| $2$ | 村庄是一条从 $1$ 到 $n$ 的链 | $35$ |\n| $3$ | 无特殊性质 | $50$ |\n\n本题中，子任务 $0$ 为样例。", "locale": "zh-CN"}}}
{"pid": "P9809", "type": "P", "difficulty": 5, "samples": [["5\nA 3\nA 5\nB 6\nA 9\nB 4", "3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2006", "各省省选", "上海", "根号分治"], "title": "[SHOI2006] 作业 Homework", "background": "", "description": "给定一个集合为 $S$，初始为空，你需要执行以下两个操作共 $N$ 次。\n\n操作一，在集合 $S$ 中加入一个新元素，其代号为 $X$，保证 $X$ 在当前集合中不存在。\n\n操作二，在当前的集合 $S$ 中询问所有元素 $\\bmod\\ Y$ 最小的值。", "inputFormat": "第一行一个正整数 $N$。\n\n接下来 $N$ 行，每行一个字符和一个正整数，如字符为 `A`，表示这个操作是操作一。若字符为 `B`，则这个操作为操作二。", "outputFormat": "对于每个操作二，输出一行一个整数表示答案。", "hint": "对于 $100\\%$ 的数据，$N\\leq10^5$，$X,Y\\leq3\\times10^5$。数据保证，第一个操作为操作一。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SHOI2006] 作业 Homework", "background": "", "description": "给定一个集合为 $S$，初始为空，你需要执行以下两个操作共 $N$ 次。\n\n操作一，在集合 $S$ 中加入一个新元素，其代号为 $X$，保证 $X$ 在当前集合中不存在。\n\n操作二，在当前的集合 $S$ 中询问所有元素 $\\bmod\\ Y$ 最小的值。", "inputFormat": "第一行一个正整数 $N$。\n\n接下来 $N$ 行，每行一个字符和一个正整数，如字符为 `A`，表示这个操作是操作一。若字符为 `B`，则这个操作为操作二。", "outputFormat": "对于每个操作二，输出一行一个整数表示答案。", "hint": "对于 $100\\%$ 的数据，$N\\leq10^5$，$X,Y\\leq3\\times10^5$。数据保证，第一个操作为操作一。", "locale": "zh-CN"}}}
{"pid": "P9810", "type": "P", "difficulty": 2, "samples": [["4\n3\n0\n4\n0", "0"], ["10\n1\n3\n5\n4\n0\n0\n7\n0\n0\n6", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144]}, "tags": ["2015", "CCC（加拿大）"], "title": "[CCC 2015 S1] Zero That Out", "background": null, "description": "给定 $k$ 个整数 $a_1,a_2 \\dots ,a_k$，维护一个序列，按顺序进行以下操作：\n\n- 当 $a_{i} = 0$ 时，将序列中最后加入的数删除。\n- 否则，将 $a_{i}$ 加入序列。\n\n例如：当 $a = \\{1,3,5,4,0,0,7,0,0,6\\}$ 时，操作如下。\n\n|$a_{i}$|序列|\n|:--:|:--:|\n|$1$|$\\{1\\}$|\n|$3$|$\\{1,3\\}$|\n|$5$|$\\{1,3,5\\}$|\n|$4$|$\\{1,3,5,4\\}$|\n|$0$|$\\{1,3,5\\}$|\n|$0$|$\\{1,3\\}$|\n|$7$|$\\{1,3,7\\}$|\n|$0$|$\\{1,3\\}$|\n|$0$|$\\{1\\}$|\n|$6$|$\\{1,6\\}$|\n\n你需要计算最终序列中所有数的和。", "inputFormat": "第一行一个整数 $k$。\n\n接下来 $k$ 行，每行一个整数 $a_i$。", "outputFormat": "输出一行一个整数，表示最终序列中所有数的和。", "hint": "**【数据范围】：**\n\n$1 \\le k \\le 10^5$，$0 \\le a_i \\le 100$。\n\n保证在 $a_i = 0$ 时序列不为空。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2015 S1] Zero That Out", "background": null, "description": "给定 $k$ 个整数 $a_1,a_2 \\dots ,a_k$，维护一个序列，按顺序进行以下操作：\n\n- 当 $a_{i} = 0$ 时，将序列中最后加入的数删除。\n- 否则，将 $a_{i}$ 加入序列。\n\n例如：当 $a = \\{1,3,5,4,0,0,7,0,0,6\\}$ 时，操作如下。\n\n|$a_{i}$|序列|\n|:--:|:--:|\n|$1$|$\\{1\\}$|\n|$3$|$\\{1,3\\}$|\n|$5$|$\\{1,3,5\\}$|\n|$4$|$\\{1,3,5,4\\}$|\n|$0$|$\\{1,3,5\\}$|\n|$0$|$\\{1,3\\}$|\n|$7$|$\\{1,3,7\\}$|\n|$0$|$\\{1,3\\}$|\n|$0$|$\\{1\\}$|\n|$6$|$\\{1,6\\}$|\n\n你需要计算最终序列中所有数的和。", "inputFormat": "第一行一个整数 $k$。\n\n接下来 $k$ 行，每行一个整数 $a_i$。", "outputFormat": "输出一行一个整数，表示最终序列中所有数的和。", "hint": "**【数据范围】：**\n\n$1 \\le k \\le 10^5$，$0 \\le a_i \\le 100$。\n\n保证在 $a_i = 0$ 时序列不为空。", "locale": "zh-CN"}}}
{"pid": "P9811", "type": "P", "difficulty": 2, "samples": [["4\n3\nM\nS\nS\nL\nL 3\nS 3\nL 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2015", "CCC（加拿大）"], "title": "[CCC 2015 S2] Jerseys", "background": "", "description": "有编号为 $1 \\sim n$ 的队服要分给 $m$ 个队员，队服从小到大分别有 S、M、L 三种大小，每个队员对于队服有一定的要求，具体的：第 $i$ 个队员希望得到的队服尺码**不小于** $a_{i}$，编号为 $b_{i}$。\n\n求最多能满足多少人的要求。\n", "inputFormat": "第一行一个整数 $n$，第二行一个整数 $m$。\n\n接下来 $n$ 行，每行一个字符 $c_{i}$，表示编号为 $i$ 的队服大小，满足 $c_{i} \\in \\{\\text{S,M,L}\\}$。\n\n接下来 $m$ 行，每行一个字符 $a_{j}$ 和一个整数 $b_{j}$，满足 $a_{j} \\in \\{\\text{S,M,L}\\}$，含义见题目描述。", "outputFormat": "输出一行一个整数，表示最多能满足要求的人数。", "hint": "**【数据范围】：**\n\n对于 $50\\%$ 的数据，$1 \\leq n,m \\leq 10^{3}$；\n\n对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 10^{6}$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2015 S2] Jerseys", "background": "", "description": "有编号为 $1 \\sim n$ 的队服要分给 $m$ 个队员，队服从小到大分别有 S、M、L 三种大小，每个队员对于队服有一定的要求，具体的：第 $i$ 个队员希望得到的队服尺码**不小于** $a_{i}$，编号为 $b_{i}$。\n\n求最多能满足多少人的要求。\n", "inputFormat": "第一行一个整数 $n$，第二行一个整数 $m$。\n\n接下来 $n$ 行，每行一个字符 $c_{i}$，表示编号为 $i$ 的队服大小，满足 $c_{i} \\in \\{\\text{S,M,L}\\}$。\n\n接下来 $m$ 行，每行一个字符 $a_{j}$ 和一个整数 $b_{j}$，满足 $a_{j} \\in \\{\\text{S,M,L}\\}$，含义见题目描述。", "outputFormat": "输出一行一个整数，表示最多能满足要求的人数。", "hint": "**【数据范围】：**\n\n对于 $50\\%$ 的数据，$1 \\leq n,m \\leq 10^{3}$；\n\n对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 10^{6}$。\n\n", "locale": "zh-CN"}}}
{"pid": "P9812", "type": "P", "difficulty": 3, "samples": [["4\n3\n4\n1\n1", "2"], ["4\n6\n2\n2\n3\n3\n4\n4", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2015", "CCC（加拿大）"], "title": "[CCC 2015 S3] Gates", "background": "", "description": "机场有 $n$ 个登机口，你需要按顺序安排 $m$ 架飞机，第 $i$ 架飞机只能使用 $1 \\sim g_{i}$ 号登机口，一个登机口永久只能被一架飞机使用。**当没有登机口可以供某架飞机使用时机场便会关闭，之后的飞机都不能登机。**\n\n请确定一种方案，使得有登机口的飞机数量最多。", "inputFormat": "第一行一个整数 $n$。\n\n第二行一个整数 $m$。\n\n接下来 $m$ 行，每行一个整数 $g_{i}$。", "outputFormat": "一行一个整数，表示最多能安排的飞机数量。", "hint": "**【数据范围】：**\n\n对于 $40\\%$ 的数据，$1 \\leq n,m \\leq 2 \\times 10^{3}$。\n\n对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 10^{5}$，$1 \\leq g_{i} \\leq n$。\n\n本题中 Subtask 0 为原题数据，Subtask 1 为 Hack 数据，Hack 数据不计分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2015 S3] Gates", "background": "", "description": "机场有 $n$ 个登机口，你需要按顺序安排 $m$ 架飞机，第 $i$ 架飞机只能使用 $1 \\sim g_{i}$ 号登机口，一个登机口永久只能被一架飞机使用。**当没有登机口可以供某架飞机使用时机场便会关闭，之后的飞机都不能登机。**\n\n请确定一种方案，使得有登机口的飞机数量最多。", "inputFormat": "第一行一个整数 $n$。\n\n第二行一个整数 $m$。\n\n接下来 $m$ 行，每行一个整数 $g_{i}$。", "outputFormat": "一行一个整数，表示最多能安排的飞机数量。", "hint": "**【数据范围】：**\n\n对于 $40\\%$ 的数据，$1 \\leq n,m \\leq 2 \\times 10^{3}$。\n\n对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 10^{5}$，$1 \\leq g_{i} \\leq n$。\n\n本题中 Subtask 0 为原题数据，Subtask 1 为 Hack 数据，Hack 数据不计分。", "locale": "zh-CN"}}}
{"pid": "P9813", "type": "P", "difficulty": 4, "samples": [["10 4 7\n1 2 4 4\n1 3 7 2\n3 1 8 1\n3 2 2 2\n4 2 1 6\n3 4 1 1\n1 4 6 12\n1 4", "7"], ["3 3 3\n1 2 5 1\n3 2 8 2\n1 3 1 3\n1 3", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2015", "CCC（加拿大）"], "title": "[CCC 2015 S4] Convex Hull", "background": "", "description": "给定一个 $n$ 个点，$m$ 条边的无向图，每条边有两个边权 $t_{i}$ 和 $h_{i}$。\n\n你需要找到一条从 $s$ 到 $t$ 的路径，满足路径上边的 $h_{i}$ 之和 $<k$ 且 $t_{i}$ 之和最小，只需要输出这个最小值即可，如果无法找到满足条件的路径，输出 $-1$。", "inputFormat": "第一行三个整数 $k,n,m$。\n\n接下来 $m$ 行，每行四个整数 $u_{i},v_{i},t_{i},h_{i}$ 表示一条从 $u_{i}$ 到 $v_{i}$ 的路径，边权为 $\\{t_{i},h_{i}\\}$。\n\n最后一行两个整数 $s,t$。", "outputFormat": "当存在满足条件的路径时，输出一行一个整数表示满足条件的最小 $t_{i}$ 之和。\n\n否则输出一行 $-1$。", "hint": "**【数据范围】：**\n\n对于 $20\\%$ 的数据，$k = 1$，$2 \\leq n \\leq 200$。\n\n对于另外 $20\\%$ 的数据，$k = 1$，$2 \\leq n \\leq 2 \\times 10^{3}$。\n\n对于 $100\\%$ 的数据，$0 \\leq h_{i} \\leq 200$，$1 \\leq t_{i} \\leq 10^{5}$，$1 \\leq k \\leq 200$，$2 \\leq n \\leq 2 \\times 10^{3}$，$1 \\leq m \\leq 10^{4}$，$s \\neq t$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2015 S4] Convex Hull", "background": "", "description": "给定一个 $n$ 个点，$m$ 条边的无向图，每条边有两个边权 $t_{i}$ 和 $h_{i}$。\n\n你需要找到一条从 $s$ 到 $t$ 的路径，满足路径上边的 $h_{i}$ 之和 $<k$ 且 $t_{i}$ 之和最小，只需要输出这个最小值即可，如果无法找到满足条件的路径，输出 $-1$。", "inputFormat": "第一行三个整数 $k,n,m$。\n\n接下来 $m$ 行，每行四个整数 $u_{i},v_{i},t_{i},h_{i}$ 表示一条从 $u_{i}$ 到 $v_{i}$ 的路径，边权为 $\\{t_{i},h_{i}\\}$。\n\n最后一行两个整数 $s,t$。", "outputFormat": "当存在满足条件的路径时，输出一行一个整数表示满足条件的最小 $t_{i}$ 之和。\n\n否则输出一行 $-1$。", "hint": "**【数据范围】：**\n\n对于 $20\\%$ 的数据，$k = 1$，$2 \\leq n \\leq 200$。\n\n对于另外 $20\\%$ 的数据，$k = 1$，$2 \\leq n \\leq 2 \\times 10^{3}$。\n\n对于 $100\\%$ 的数据，$0 \\leq h_{i} \\leq 200$，$1 \\leq t_{i} \\leq 10^{5}$，$1 \\leq k \\leq 200$，$2 \\leq n \\leq 2 \\times 10^{3}$，$1 \\leq m \\leq 10^{4}$，$s \\neq t$。", "locale": "zh-CN"}}}
{"pid": "P9814", "type": "P", "difficulty": 5, "samples": [["5\n10\n12\n6\n14\n7\n3\n1\n8\n2", "44"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2015", "CCC（加拿大）"], "title": "[CCC 2015 S5] Greedy For Pies", "background": "", "description": "给定一个长度为 $n$ 的序列 $a$ 和一个长度为 $m$ 的序列 $b$，你可以将 $b$ 序列中的元素任意插入到 $a$ 序列的任何位置（包括开头和末尾）。之后，你可以从新的序列中选一些元素，但你不能选择两个相邻的元素。\n\n你需要使得你选出的数之和最大，输出这个最大值即可。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行一个整数 $a_{i}$。\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行一个整数 $b_{i}$。", "outputFormat": "输出一行一个整数，表示你能选出元素和的最大值。", "hint": "**【数据范围】：**\n\n对于 $20\\%$ 的数据，$m = 0$。\n\n对于另外 $20\\%$ 的数据，$m = 1$。\n\n对于另外 $20\\%$ 的数据，$m \\leq 10$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 3 \\times 10^{3}$，$0 \\leq m \\leq 100$，$1 \\leq a_{i},b_{i} \\leq 10^{5}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2015 S5] Greedy For Pies", "background": "", "description": "给定一个长度为 $n$ 的序列 $a$ 和一个长度为 $m$ 的序列 $b$，你可以将 $b$ 序列中的元素任意插入到 $a$ 序列的任何位置（包括开头和末尾）。之后，你可以从新的序列中选一些元素，但你不能选择两个相邻的元素。\n\n你需要使得你选出的数之和最大，输出这个最大值即可。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行一个整数 $a_{i}$。\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行一个整数 $b_{i}$。", "outputFormat": "输出一行一个整数，表示你能选出元素和的最大值。", "hint": "**【数据范围】：**\n\n对于 $20\\%$ 的数据，$m = 0$。\n\n对于另外 $20\\%$ 的数据，$m = 1$。\n\n对于另外 $20\\%$ 的数据，$m \\leq 10$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 3 \\times 10^{3}$，$0 \\leq m \\leq 100$，$1 \\leq a_{i},b_{i} \\leq 10^{5}$。", "locale": "zh-CN"}}}
{"pid": "P9815", "type": "P", "difficulty": 3, "samples": [["3\n1\n1 1\n3\n0 1\n1 1\n1 0\n3\n0 1\n2 3\n4 5", "0\n4\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "O2优化"], "title": "wbyblD", "background": "> D题，我不要被hack！！！", "description": "有 $n+2$ 个点排成一排，编号为 $0\\sim n+1$。对于第 $i$ 号点有两个整数 $a_i,b_i$，其中 $0\\le i\\le n+1$。规定初始时 $a_0=b_0=a_{n+1}=b_{n+1}=0$。\n\n设你当前在第 $x$ 号点，当前的移动方向为 $y$，初始时 $x=0,y=1$。\n\n你将按如下方式移动直到 $x,y$ 某一次变化后满足 $x=0,y=-1$ 或 $x=n+1,y=1$。\n\n- 若 $y=1$，首先将 $x$ 增加 $1$，此时若 $a_x>0$ 则将 $y$ 变成 $-1$，否则 $y$ 不变，最后再将 $a_x$ 减少 $1$。\n- 若 $y=-1$，首先将 $x$ 减少 $1$，此时若 $b_x>0$ 则将 $y$ 变成 $1$，否则 $y$ 不变，最后再将 $b_x$ 减少 $1$。\n\n问最后结束时 $x$ 会在第几号点，事实上，最后 $x$ 仅可能在第 $0$ 号点或第 $n+1$ 号点。", "inputFormat": "本题有多组测试数据。第一行输入一个正整数 $T$，表示测试数据组数，接下来分别输入 $T$ 组数据。\n\n对于每组测试数据，第一行输入一个正整数 $n$。\n\n接下来 $n$ 行每行输入两个非负整数 $a_i,b_i$，表示 $a_i,b_i$ 的初始值。", "outputFormat": "对于每组测试数据输出一行一个整数表示最后结束时 $x$ 会在第几号点。", "hint": "#### 样例解释\n\n对于样例第 $1$ 组数据，$(x,y)$ 依次为 $(0,1)\\to (1,1)\\to (1,-1)\\to (0,-1)$。\n\n对于样例第 $2$ 组数据，$(x,y)$ 依次为 $(0,1)\\to (1,1)\\to (2,1)\\to (2,-1)\\to (1,-1)\\to (1,1)\\to (2,1)\\to (3,1)\\to (3,-1)\\to (2,-1)\\to (2,1)\\to (3,1)\\to (4,1)$。\n\n对于样例第 $3$ 组数据，$(x,y)$ 依次为 $(0,1)\\to (1,1)\\to (2,1)\\to (2,-1)\\to (1,-1)\\to (1,1)\\to (2,1)\\to (2,-1)\\to (1,-1)\\to (0,-1)$。\n\n#### 数据范围与约定\n\n对于前 $30\\%$ 的测试点，保证 $n,a_i,b_i\\le 10$。\n\n对于前 $60\\%$ 的测试点，保证 $\\sum n\\le 5000$。\n\n对于另外 $20\\%$ 的测试点，保证 $T=10$，$n=10^5$，$a_i,b_i$ 在指定范围内均匀随机生成。特别的，保证除该档部分分外所有测试点满足 $T\\ne 10$。\n\n对于所有测试点，保证 $1\\le T\\le 10^4$，$1\\le n\\le 10^5$，$1\\le \\sum n\\le 10^6$，$0\\le a_i,b_i\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "wbyblD", "background": "> D题，我不要被hack！！！", "description": "有 $n+2$ 个点排成一排，编号为 $0\\sim n+1$。对于第 $i$ 号点有两个整数 $a_i,b_i$，其中 $0\\le i\\le n+1$。规定初始时 $a_0=b_0=a_{n+1}=b_{n+1}=0$。\n\n设你当前在第 $x$ 号点，当前的移动方向为 $y$，初始时 $x=0,y=1$。\n\n你将按如下方式移动直到 $x,y$ 某一次变化后满足 $x=0,y=-1$ 或 $x=n+1,y=1$。\n\n- 若 $y=1$，首先将 $x$ 增加 $1$，此时若 $a_x>0$ 则将 $y$ 变成 $-1$，否则 $y$ 不变，最后再将 $a_x$ 减少 $1$。\n- 若 $y=-1$，首先将 $x$ 减少 $1$，此时若 $b_x>0$ 则将 $y$ 变成 $1$，否则 $y$ 不变，最后再将 $b_x$ 减少 $1$。\n\n问最后结束时 $x$ 会在第几号点，事实上，最后 $x$ 仅可能在第 $0$ 号点或第 $n+1$ 号点。", "inputFormat": "本题有多组测试数据。第一行输入一个正整数 $T$，表示测试数据组数，接下来分别输入 $T$ 组数据。\n\n对于每组测试数据，第一行输入一个正整数 $n$。\n\n接下来 $n$ 行每行输入两个非负整数 $a_i,b_i$，表示 $a_i,b_i$ 的初始值。", "outputFormat": "对于每组测试数据输出一行一个整数表示最后结束时 $x$ 会在第几号点。", "hint": "#### 样例解释\n\n对于样例第 $1$ 组数据，$(x,y)$ 依次为 $(0,1)\\to (1,1)\\to (1,-1)\\to (0,-1)$。\n\n对于样例第 $2$ 组数据，$(x,y)$ 依次为 $(0,1)\\to (1,1)\\to (2,1)\\to (2,-1)\\to (1,-1)\\to (1,1)\\to (2,1)\\to (3,1)\\to (3,-1)\\to (2,-1)\\to (2,1)\\to (3,1)\\to (4,1)$。\n\n对于样例第 $3$ 组数据，$(x,y)$ 依次为 $(0,1)\\to (1,1)\\to (2,1)\\to (2,-1)\\to (1,-1)\\to (1,1)\\to (2,1)\\to (2,-1)\\to (1,-1)\\to (0,-1)$。\n\n#### 数据范围与约定\n\n对于前 $30\\%$ 的测试点，保证 $n,a_i,b_i\\le 10$。\n\n对于前 $60\\%$ 的测试点，保证 $\\sum n\\le 5000$。\n\n对于另外 $20\\%$ 的测试点，保证 $T=10$，$n=10^5$，$a_i,b_i$ 在指定范围内均匀随机生成。特别的，保证除该档部分分外所有测试点满足 $T\\ne 10$。\n\n对于所有测试点，保证 $1\\le T\\le 10^4$，$1\\le n\\le 10^5$，$1\\le \\sum n\\le 10^6$，$0\\le a_i,b_i\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9816", "type": "P", "difficulty": 4, "samples": [["3 5 71\n1 1\n3 3\n1 0\n7 5\n9 6\n10 1\n5 6\n7 6", "27\n11\n29\n2\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "O2优化"], "title": "少项式复合幂", "background": "> I have won everything except your heart.\n\n终于，小 Z 可以玩一年原神了。但在此之前，他决定做出这道题，以纪念自己对【数据删除】的感情。", "description": "给定多项式 $f(x)=\\sum_{i=1}^ma_ix^{b_i}$。定义 $f_1(x)=f(x)$，$f_n(x)=f(f_{n-1}(x))$。\n\n给定模数 $p$。有 $q$ 次询问，每次给出 $x,y$，查询 $f_y(x)\\bmod p$ 的值。\n\n**请注意 $m,p$ 的特殊数据范围。**", "inputFormat": "输入的第一行包含三个正整数 $m,q,p$，分别为 $f$ 的项数，询问次数和给定模数。\n\n随后 $m$ 行，每行读入两个非负整数 $a_i,b_i$，用于描述多项式 $f$。\n\n随后 $q$ 行，每行两个正整数 $x,y$，表示一次询问。", "outputFormat": "输出共 $q$ 行，每行包含对应询问的答案。", "hint": "#### 样例解释\n\n样例 1 中 $f(x)=3x^3+x+1$。以第 3 次询问为例，$f_1(10)=f(10)=3\\times10^3+10+1=3011\\equiv 29 \\pmod {71}$。\n\n#### 数据范围与约定\n\n|测试点编号|$y$|$m$|$q$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1\\sim 3$|$\\le 10$|$\\le 20$|$\\le 10^3$|无|\n|$4\\sim 7$|$\\le 10^3$|$\\le 20$|$\\le 10^4$|无|\n|$8,9$|$\\le 10^7$|$\\le 1$|$\\le 3\\times 10^5$|A|\n|$10$|$\\le 10^7$|$\\le 1$|$\\le 3\\times 10^5$|无|\n|$11,12$|$\\le 10^7$|$\\le 2$|$\\le 10^5$|A、B|\n|$13$|$\\le 10^7$|$\\le 2$|$\\le 10^5$|B|\n|$14\\sim 16$|$\\le 10^7$|$\\le 20$|$\\le 500$|无|\n|$17\\sim 20$|$\\le 10^7$|$\\le 20$|$\\le 3\\times 10^5$|无|\n- 特殊性质 A：保证 $p$ 为质数。\n- 特殊性质 B：保证 $b_i\\le 1$。\n\n对于所有数据，保证 $1\\le m\\le 20$，$0\\le a_i,b_i\\le 10^5$，$2\\le p\\le 10^5$，$1\\le q\\le 3\\times 10^5$，$1\\le x,y\\le 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "少项式复合幂", "background": "> I have won everything except your heart.\n\n终于，小 Z 可以玩一年原神了。但在此之前，他决定做出这道题，以纪念自己对【数据删除】的感情。", "description": "给定多项式 $f(x)=\\sum_{i=1}^ma_ix^{b_i}$。定义 $f_1(x)=f(x)$，$f_n(x)=f(f_{n-1}(x))$。\n\n给定模数 $p$。有 $q$ 次询问，每次给出 $x,y$，查询 $f_y(x)\\bmod p$ 的值。\n\n**请注意 $m,p$ 的特殊数据范围。**", "inputFormat": "输入的第一行包含三个正整数 $m,q,p$，分别为 $f$ 的项数，询问次数和给定模数。\n\n随后 $m$ 行，每行读入两个非负整数 $a_i,b_i$，用于描述多项式 $f$。\n\n随后 $q$ 行，每行两个正整数 $x,y$，表示一次询问。", "outputFormat": "输出共 $q$ 行，每行包含对应询问的答案。", "hint": "#### 样例解释\n\n样例 1 中 $f(x)=3x^3+x+1$。以第 3 次询问为例，$f_1(10)=f(10)=3\\times10^3+10+1=3011\\equiv 29 \\pmod {71}$。\n\n#### 数据范围与约定\n\n|测试点编号|$y$|$m$|$q$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1\\sim 3$|$\\le 10$|$\\le 20$|$\\le 10^3$|无|\n|$4\\sim 7$|$\\le 10^3$|$\\le 20$|$\\le 10^4$|无|\n|$8,9$|$\\le 10^7$|$\\le 1$|$\\le 3\\times 10^5$|A|\n|$10$|$\\le 10^7$|$\\le 1$|$\\le 3\\times 10^5$|无|\n|$11,12$|$\\le 10^7$|$\\le 2$|$\\le 10^5$|A、B|\n|$13$|$\\le 10^7$|$\\le 2$|$\\le 10^5$|B|\n|$14\\sim 16$|$\\le 10^7$|$\\le 20$|$\\le 500$|无|\n|$17\\sim 20$|$\\le 10^7$|$\\le 20$|$\\le 3\\times 10^5$|无|\n- 特殊性质 A：保证 $p$ 为质数。\n- 特殊性质 B：保证 $b_i\\le 1$。\n\n对于所有数据，保证 $1\\le m\\le 20$，$0\\le a_i,b_i\\le 10^5$，$2\\le p\\le 10^5$，$1\\le q\\le 3\\times 10^5$，$1\\le x,y\\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P9817", "type": "P", "difficulty": 5, "samples": [["5\n1 1\n2 1\n4 1\n5 2\n10 10", "0\n1\n4\n9\n810"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "******D", "background": "欢迎新斗友@[lmxcslD](https://www.luogu.com.cn/user/358957)", "description": "定义一个长度为 $m$ 的非空序列 $p_1,p_2,...,p_m$ 是**乱**的当且仅当满足以下两个条件。\n\n- 所有元素之和不超过 $n$，即 $\\sum_{i=1}^m p_i\\le n$。\n- 对于任意一个元素 $p_i$ 满足 $p_i=1$ 或 $p_i$ 为质数。\n\n定义一个**乱**的序列 $p_1,p_2,...,p_m$ 的**乱斗值**为该序列中所有元素减 $k$ 的平方和，即 $\\sum_{i=1}^m (p_i-k)^2$。\n\n特别的，定义一个**不乱**的序列的乱斗值为 $0$。\n\n现在给定两个正整数 $n,k$，问所有序列中**乱斗值**最大的序列的**乱斗值**是多少。", "inputFormat": "本题有多组测试数据。第一行输入一个正整数 $T$，表示测试数据组数，接下来分别输入 $T$ 组数据。\n\n对于每组测试数据，输入一行两个正整数 $n,k$。", "outputFormat": "对于每组测试数据输出一行一个整数表示答案。", "hint": "#### 样例解释\n\n对于样例第 $1,2,3,4$ 组数据，其中一种**乱斗值**最大的序列分别为 $(1),(2),(1,3),(5)$。\n\n#### 数据范围与约定\n\n|测试点编号|$T$|$n$|$k$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$=100$|$\\le 10$|$\\le 10$|无|\n|$2$|$=200$|$\\le 30$|$\\le 10$|无|\n|$3$|$=300$|$\\le 10^3$|$\\le 5\\times 10^4$|无|\n|$4$|$=400$|$\\le 10^5$|$\\le 5\\times 10^4$|无|\n|$5$|$=500$|$\\le 10^7$|$\\le 5\\times 10^4$|无|\n|$6$|$=600$|$\\le 10^9$|$=1$|$n$ 为质数|\n|$7$|$=700$|$\\le 10^9$|$=1$|无|\n|$8$|$=800$|$\\le 10^9$|$=44444$|无|\n|$9$|$=900$|$\\le 10^9$|$\\le 5\\times 10^4$|$n$ 为质数|\n|$10$|$=10^3$|$\\le 10^9$|$\\le 5\\times 10^4$|无|\n\n对于所有测试点，保证 $1\\le T\\le 10^3$，$1\\le n\\le 10^9$，$1\\le k\\le 5\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "******D", "background": "欢迎新斗友@[lmxcslD](https://www.luogu.com.cn/user/358957)", "description": "定义一个长度为 $m$ 的非空序列 $p_1,p_2,...,p_m$ 是**乱**的当且仅当满足以下两个条件。\n\n- 所有元素之和不超过 $n$，即 $\\sum_{i=1}^m p_i\\le n$。\n- 对于任意一个元素 $p_i$ 满足 $p_i=1$ 或 $p_i$ 为质数。\n\n定义一个**乱**的序列 $p_1,p_2,...,p_m$ 的**乱斗值**为该序列中所有元素减 $k$ 的平方和，即 $\\sum_{i=1}^m (p_i-k)^2$。\n\n特别的，定义一个**不乱**的序列的乱斗值为 $0$。\n\n现在给定两个正整数 $n,k$，问所有序列中**乱斗值**最大的序列的**乱斗值**是多少。", "inputFormat": "本题有多组测试数据。第一行输入一个正整数 $T$，表示测试数据组数，接下来分别输入 $T$ 组数据。\n\n对于每组测试数据，输入一行两个正整数 $n,k$。", "outputFormat": "对于每组测试数据输出一行一个整数表示答案。", "hint": "#### 样例解释\n\n对于样例第 $1,2,3,4$ 组数据，其中一种**乱斗值**最大的序列分别为 $(1),(2),(1,3),(5)$。\n\n#### 数据范围与约定\n\n|测试点编号|$T$|$n$|$k$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$=100$|$\\le 10$|$\\le 10$|无|\n|$2$|$=200$|$\\le 30$|$\\le 10$|无|\n|$3$|$=300$|$\\le 10^3$|$\\le 5\\times 10^4$|无|\n|$4$|$=400$|$\\le 10^5$|$\\le 5\\times 10^4$|无|\n|$5$|$=500$|$\\le 10^7$|$\\le 5\\times 10^4$|无|\n|$6$|$=600$|$\\le 10^9$|$=1$|$n$ 为质数|\n|$7$|$=700$|$\\le 10^9$|$=1$|无|\n|$8$|$=800$|$\\le 10^9$|$=44444$|无|\n|$9$|$=900$|$\\le 10^9$|$\\le 5\\times 10^4$|$n$ 为质数|\n|$10$|$=10^3$|$\\le 10^9$|$\\le 5\\times 10^4$|无|\n\n对于所有测试点，保证 $1\\le T\\le 10^3$，$1\\le n\\le 10^9$，$1\\le k\\le 5\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P9818", "type": "P", "difficulty": 6, "samples": [["4 10\n2 2 1 5 9\n1 5 3\n3 2 1 2 1 3 3\n1 3 1\n5\n3 3\n2 3\n1 4\n2 4\n3 4", "3\n8\n13\n11\n6"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "游戏王", "background": "**本题已经增加 hack 数据**。hack 数据位于 subtask 7，记 0 分。此外本题时限较大数据点较多，希望各位不要滥用评测资源。\n\n你正在打块，突然家长走了进来，于是你假装在玩原神。", "description": "你改造了原神的抽卡系统。\n\n具体而言，在第 $i$ 次抽卡时，系统将会给出一个可重集合 $S_i$，表示这次抽卡中可供选择的角色。第 $j$ 个角色有两个属性：力量值 $s_{i,j}$ 与魔力值 $m_{i,j}$。你可以从中选择一名角色，并将其加入到自己的背包中；当然，你也可以不做任何选择。你的力量值被定义为背包中所有角色的力量值之和，同时你需要时刻保证背包中角色的魔力值之积不超过魔力上限 $v$。你的任务是最大化自己的力量值。\n\n但是，你很快就厌烦了千篇一律的抽卡。为了给生活找点乐子，你想到了这样的问题：如果游戏从第 $l$ 次抽卡开始，到第 $r$ 次抽卡结束，你的力量值最大是多少呢？\n\n你一口气提出了 $q$ 个这样的问题。现在，你需要计算出它们的答案。\n\n**形式化题意**：\n\n给出一个长为 $n$ 的序列 $\\{S_n\\}$，其中 $S_i$ 为多个二元组 $(s_{i,j},m_{i,j})$ 构成的可重集。有 $q$ 次询问，每次给定 $l,r$，你需要从 $S_l,S_{l+1},\\cdots,S_r$ 的每个集合中分别选出 $0$ 个或 $1$ 个二元组。记选出的 $k$ 个二元组为 $(s'_i,m'_i),1\\le i\\le k$，则你需要在保证 $\\prod_{i=1}^km'_i\\le v$ 的基础上，最大化 $\\sum_{i=1}^k s'_i$。", "inputFormat": "输入的第一行包含两个正整数 $n,v$。\n\n接下来 $n$ 行，每行首先读入 $|S_i|$，接下来读入 $|S_i|$ 对正整数 $(s_{i,j},m_{i,j})$，即 $S_i$ 中每一角色的力量值与魔力值。\n\n随后一行，读入一个正整数 $q$。\n\n接下来 $q$ 行，每行两个正整数 $l,r$，表示一次询问。**注意询问间两两独立，即每次询问都将被视作一次新的游戏。**", "outputFormat": "输出共 $q$ 行。对于每次询问，输出你的体力值的最大值。", "hint": "#### 样例解释\n\n对于第一组询问，最优策略是从 $S_3$ 中选择 $(3,3)$。此时你的能力值为 $3$。\n\n对于第三组询问，最优策略是从 $S_1$ 中选择 $(2,1)$，$S_2$ 中选择 $(5,3)$，$S_3$ 中选择 $(3,3)$，$S_4$ 中选择 $(3,1)$，此时魔力值之积等于 $1\\times 3\\times 3\\times 1=9\\le 10$，你的能力值等于 $2+5+3+3=13$。 \n\n#### 数据范围与约定\n\n**本题使用子任务捆绑测试，只有通过子任务内全部测试点才可以获得该子任务的相应分数**。\n\n记 $tot=\\sum_{i=1}^n|S_i|$。\n\n- 子任务 1（5 分）：保证 $n,tot\\le 10$。\n- 子任务 2（20 分）：保证 $n,v,tot,q\\le 100$。\n- 子任务 3（15 分）：保证所有 $m_{i,j}$ 在范围内均匀随机生成。\n- 子任务 4（20 分）：保证 $1\\le n,v,tot,q\\le 10^4$。\n- 子任务 5（15 分）：保证对于所有询问，均有 $l=1$ 或者 $r=n$。\n- 子任务 6（25 分）：无特殊限制。\n\n对于所有数据，保证 $1\\le n,tot\\le 10^5$，$1\\le q\\le 2\\times 10^5$，$1\\le m_{i,j}\\le v\\le 10^5$，$1\\le s_{i,j}\\le 10^4$，$1\\le l\\le r\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "游戏王", "background": "**本题已经增加 hack 数据**。hack 数据位于 subtask 7，记 0 分。此外本题时限较大数据点较多，希望各位不要滥用评测资源。\n\n你正在打块，突然家长走了进来，于是你假装在玩原神。", "description": "你改造了原神的抽卡系统。\n\n具体而言，在第 $i$ 次抽卡时，系统将会给出一个可重集合 $S_i$，表示这次抽卡中可供选择的角色。第 $j$ 个角色有两个属性：力量值 $s_{i,j}$ 与魔力值 $m_{i,j}$。你可以从中选择一名角色，并将其加入到自己的背包中；当然，你也可以不做任何选择。你的力量值被定义为背包中所有角色的力量值之和，同时你需要时刻保证背包中角色的魔力值之积不超过魔力上限 $v$。你的任务是最大化自己的力量值。\n\n但是，你很快就厌烦了千篇一律的抽卡。为了给生活找点乐子，你想到了这样的问题：如果游戏从第 $l$ 次抽卡开始，到第 $r$ 次抽卡结束，你的力量值最大是多少呢？\n\n你一口气提出了 $q$ 个这样的问题。现在，你需要计算出它们的答案。\n\n**形式化题意**：\n\n给出一个长为 $n$ 的序列 $\\{S_n\\}$，其中 $S_i$ 为多个二元组 $(s_{i,j},m_{i,j})$ 构成的可重集。有 $q$ 次询问，每次给定 $l,r$，你需要从 $S_l,S_{l+1},\\cdots,S_r$ 的每个集合中分别选出 $0$ 个或 $1$ 个二元组。记选出的 $k$ 个二元组为 $(s'_i,m'_i),1\\le i\\le k$，则你需要在保证 $\\prod_{i=1}^km'_i\\le v$ 的基础上，最大化 $\\sum_{i=1}^k s'_i$。", "inputFormat": "输入的第一行包含两个正整数 $n,v$。\n\n接下来 $n$ 行，每行首先读入 $|S_i|$，接下来读入 $|S_i|$ 对正整数 $(s_{i,j},m_{i,j})$，即 $S_i$ 中每一角色的力量值与魔力值。\n\n随后一行，读入一个正整数 $q$。\n\n接下来 $q$ 行，每行两个正整数 $l,r$，表示一次询问。**注意询问间两两独立，即每次询问都将被视作一次新的游戏。**", "outputFormat": "输出共 $q$ 行。对于每次询问，输出你的体力值的最大值。", "hint": "#### 样例解释\n\n对于第一组询问，最优策略是从 $S_3$ 中选择 $(3,3)$。此时你的能力值为 $3$。\n\n对于第三组询问，最优策略是从 $S_1$ 中选择 $(2,1)$，$S_2$ 中选择 $(5,3)$，$S_3$ 中选择 $(3,3)$，$S_4$ 中选择 $(3,1)$，此时魔力值之积等于 $1\\times 3\\times 3\\times 1=9\\le 10$，你的能力值等于 $2+5+3+3=13$。 \n\n#### 数据范围与约定\n\n**本题使用子任务捆绑测试，只有通过子任务内全部测试点才可以获得该子任务的相应分数**。\n\n记 $tot=\\sum_{i=1}^n|S_i|$。\n\n- 子任务 1（5 分）：保证 $n,tot\\le 10$。\n- 子任务 2（20 分）：保证 $n,v,tot,q\\le 100$。\n- 子任务 3（15 分）：保证所有 $m_{i,j}$ 在范围内均匀随机生成。\n- 子任务 4（20 分）：保证 $1\\le n,v,tot,q\\le 10^4$。\n- 子任务 5（15 分）：保证对于所有询问，均有 $l=1$ 或者 $r=n$。\n- 子任务 6（25 分）：无特殊限制。\n\n对于所有数据，保证 $1\\le n,tot\\le 10^5$，$1\\le q\\le 2\\times 10^5$，$1\\le m_{i,j}\\le v\\le 10^5$，$1\\le s_{i,j}\\le 10^4$，$1\\le l\\le r\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9819", "type": "P", "difficulty": 7, "samples": [["5\n0 0\n1 10\n2 0\n3 10\n4 0", "22.099751242242"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["计算几何", "2020", "上海", "Special Judge", "O2优化", "线段相交", "ICPC"], "title": "[ICPC 2020 Shanghai R] Wowoear", "background": "", "description": "Wowo is a solo adventurer who completed many dangerous journeys on his own foot in forests, deserts and even glaciers. The Shanghai ICPC (Shanghai Invitational Contest on Programmable Cheating) committee invited Wowo as a tester of their new running trial.\n\nThe trial can be described as a 2D simple polyline $(p_1,\\ldots, p_n)$. In other words, the trial consists of $n-1$ line segments $(p_1, p_2),\\ldots, (p_{n-1}, p_n)$. The line segments do not intersect with each other except that two consecutive line segments $(p_i, p_{i+1})$ and $(p_{i+1}, p_{i+2})$ intersect at the point $p_{i+1}$. Any two consecutive segments have different directions. The committee wants Wowo to run from $p_1$ to $p_n$ along the line segments $(p_1,p_2),\\ldots, (p_{n-1}, p_n)$ in order.\n\nHowever, Wowo has a smart device that can hack the committee's system for an interval of time. Wowo is able to choose $2$ points $a, b$ on the trial and run directly from $a$ to $b$ along the line segment $(a, b)$. Each of these $a$ and $b$ can be some $p_i$ ($1\\le i\\le n$) and can be some point on some line segment $(p_i, p_{i+1})$ ($1\\le i<n$) as well. Before reaching $a$ and after reaching $b$, Wowo has to run along the original trial. Wowo does not want to be caught cheating, so he decided that the line segment $(a, b)$ should not intersect or touch any line segment of the trial at any point other than $a$ and $b$. Help Wowo to choose $a$ and $b$ wisely and output the shortest distance Wowo need to run from $p_1$ to $p_n$ using his smart cheating device.", "inputFormat": "The first line includes a single integer $n$ indicating the number of points on the running trial ($2\\le n\\le 200$).\n\nThe $i+1$-th line ($1\\le i\\le n$) contains two integers $x$ and $y$ separated by a single space indicating the coordinates of $p_i$ ($-1000\\le x, y\\le 1000$).\n\nIt is guaranteed that the line segments do not intersect with each other except that two consecutive line segments $(p_i, p_{i+1})$ and $(p_{i+1}, p_{i+2})$ intersect at the point $p_{i+1}$. In other words, $(p_i, p_{i+1})\\cap (p_{j}, p_{j+1})=\\left\\{\\begin{array}{cc}\\emptyset & i\\neq j-1\\\\ \\{p_{j}\\} & i = j-1\\end{array}\\right.$ holds for any integers $i, j$ satisfying $1\\le i< j<n$. Here $(s, t)$ represents all points on the line segment from $s$ to $t$ including $s$ and $t$.\n\nIt is guaranteed that each line segment has nonzero length. In other words, $p_i\\neq p_{i+1}$ for any integer $i\\in [1, n)$.\n\nIt is guaranteed that adjacent line segments are not collinear. In other words, for any integer $i\\in [1,n-2]$ and any real number $\\lambda$, $p_i - p_{i+1}$ is $\\textbf{not}$ equal to $\\lambda(p_{i+1}-p_{i+2})$.", "outputFormat": "Output the shortest distance Wowo needs to run. Your answer will be considered correct if its absolute or relative error does not exceed $10^{-6}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 Shanghai R] Wowoear", "background": "", "description": "Wowo is a solo adventurer who completed many dangerous journeys on his own foot in forests, deserts and even glaciers. The Shanghai ICPC (Shanghai Invitational Contest on Programmable Cheating) committee invited Wowo as a tester of their new running trial.\n\nThe trial can be described as a 2D simple polyline $(p_1,\\ldots, p_n)$. In other words, the trial consists of $n-1$ line segments $(p_1, p_2),\\ldots, (p_{n-1}, p_n)$. The line segments do not intersect with each other except that two consecutive line segments $(p_i, p_{i+1})$ and $(p_{i+1}, p_{i+2})$ intersect at the point $p_{i+1}$. Any two consecutive segments have different directions. The committee wants Wowo to run from $p_1$ to $p_n$ along the line segments $(p_1,p_2),\\ldots, (p_{n-1}, p_n)$ in order.\n\nHowever, Wowo has a smart device that can hack the committee's system for an interval of time. Wowo is able to choose $2$ points $a, b$ on the trial and run directly from $a$ to $b$ along the line segment $(a, b)$. Each of these $a$ and $b$ can be some $p_i$ ($1\\le i\\le n$) and can be some point on some line segment $(p_i, p_{i+1})$ ($1\\le i<n$) as well. Before reaching $a$ and after reaching $b$, Wowo has to run along the original trial. Wowo does not want to be caught cheating, so he decided that the line segment $(a, b)$ should not intersect or touch any line segment of the trial at any point other than $a$ and $b$. Help Wowo to choose $a$ and $b$ wisely and output the shortest distance Wowo need to run from $p_1$ to $p_n$ using his smart cheating device.", "inputFormat": "The first line includes a single integer $n$ indicating the number of points on the running trial ($2\\le n\\le 200$).\n\nThe $i+1$-th line ($1\\le i\\le n$) contains two integers $x$ and $y$ separated by a single space indicating the coordinates of $p_i$ ($-1000\\le x, y\\le 1000$).\n\nIt is guaranteed that the line segments do not intersect with each other except that two consecutive line segments $(p_i, p_{i+1})$ and $(p_{i+1}, p_{i+2})$ intersect at the point $p_{i+1}$. In other words, $(p_i, p_{i+1})\\cap (p_{j}, p_{j+1})=\\left\\{\\begin{array}{cc}\\emptyset & i\\neq j-1\\\\ \\{p_{j}\\} & i = j-1\\end{array}\\right.$ holds for any integers $i, j$ satisfying $1\\le i< j<n$. Here $(s, t)$ represents all points on the line segment from $s$ to $t$ including $s$ and $t$.\n\nIt is guaranteed that each line segment has nonzero length. In other words, $p_i\\neq p_{i+1}$ for any integer $i\\in [1, n)$.\n\nIt is guaranteed that adjacent line segments are not collinear. In other words, for any integer $i\\in [1,n-2]$ and any real number $\\lambda$, $p_i - p_{i+1}$ is $\\textbf{not}$ equal to $\\lambda(p_{i+1}-p_{i+2})$.", "outputFormat": "Output the shortest distance Wowo needs to run. Your answer will be considered correct if its absolute or relative error does not exceed $10^{-6}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 Shanghai R] Wowoear", "background": "", "description": "Wowo 是一位单人冒险家，他曾独自一人在森林、沙漠甚至冰川中完成过许多危险的旅程。ICPC（上海市可编程作弊邀请赛）组委会邀请 Wowo 作为新的跑步测试员。\n\n该试验可描述为二维简单折线 $(p_1,\\ldots, p_n)$。换句话说，试验由 $n-1$ 条线段 $(p_1, p_2),\\ldots, (p_{n-1}, p_n)$ 组成。除了两个连续的线段 $(p_i, p_{i+1})$ 和 $(p_{i+1}, p_{i+2})$ 相交于点 $p_{i+1}$ 外，其他线段互不相交。任何两条连续的线段都有不同的方向。委员会希望 Wowo 从 $p_1$ 到 $p_n$ 依次沿着线段 $(p_1,p_2),\\ldots, (p_{n-1}, p_n)$ 运行。\n\n然而，Wowo 拥有一个智能设备，可以在一段时间内侵入委员会的系统。Wowo 能够在试验中选择 $2$ 点 $a, b$ ，并沿着线段 $(a, b)$ 直接从 $a$ 跑到 $b$ 。其中每个 $a$ 和 $b$ 都可以是某个 $p_i$ （$1\\le i\\le n$）。($1\\le i\\le n$) ，也可以是线段 $(p_i, p_{i+1})$ 上的某一点。($1\\le i \\le n$)上的某一点。在到达 $a$ 之前和 $b$ 之后，Wowo 必须沿着原来的试验路线运行。沃沃不想被发现作弊，所以他决定线段 $(a, b)$ 不能与试验中的任何线段相交，也不能接触到 $a$ 和 $b$ 以外的任何点。请帮助 Wowo 明智地选择 $a$ 和 $b$ ，并利用他的智能作弊装置输出 Wowo 需要从 $p_1$ 跑到 $p_n$ 的最短距离", "inputFormat": "第一行包含一个整数 $n$ ，表示运行试验中的点数（ $2\\le n\\le 200$ ）。\n\n第 $i+1$（$1\\le i\\le n$）行包含两个整数 $x$ 和 $y$，中间用一个空格隔开，表示 $p_i$（$-1000\\le x, y\\le 1000$）的坐标。\n\n除了两条连续的线段 $(p_i, p_{i+1})$ 和 $(p_{i+1}, p_{i+2})$ 相交于点 $p_{i+1}$ 之外，其他线段保证互不相交。换句话说，对于满足 $1 \\le i\\lt j \\lt n$ 的任何整数 $i, j$，$(p_i, p_{i+1})\\cap (p_{j}, p_{j+1})=\\left\\{\\begin{array}{cc}\\emptyset & i\\neq j-1\\\\ \\{p_{j}\\} & i = j-1\\end{array}\\right.$ 都成立。这里的 $(s, t)$ 代表从 $s$ 到 $t$ 的线段上的所有点，包括 $s$ 和 $t$。\n可以保证每条线段的长度都不为零。换句话说，$p_i\\neq p_{i+1}$ 满足任意整数 $i\\in [1, n)$。\n\n保证相邻线段不相交。换句话说，对于任意整数 $i\\in [1,n-2]$ 和任意实数 $\\lambda$，$p_i - p_{i+1}$ 不**等于**$\\lambda(p_{i+1}-p_{i+2})$。", "outputFormat": "输出 Wowo 需要运行的最短距离。如果答案的绝对误差或相对误差不超过 $10^{-6}$，则认为答案正确。  \nTranslation by [nightwatch_ryan](/user/961351)", "hint": "", "locale": "zh-CN"}}}
