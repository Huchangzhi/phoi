{"pid": "P1701", "type": "P", "difficulty": 3, "samples": [["4\n2 spots firebreathing\n0\n1 flying\n2 telepathic flying", "yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2019", "USACO", "O2优化", "树的遍历"], "title": "[USACO19OPEN] Cow Evolution B", "background": "", "description": "现在是 3019 年，在过去的一千年里发生了不计其数的牛类进化，产生了具有各种有趣特性的奶牛。\n\n牛类进化的记录可以用一棵树来表示，起源是位于树根位置的没有特殊特性的奶牛。树上每一个产生后代的结点，有可能所有的奶牛都进化出了一种新的特性（比如说喷火（fire breathing），如下图所示，其中所有斑点（spots）奶牛最后都能喷火），或者是奶牛种群产生了分支进化，其中有些进化出了新的特性（比如，飞（flying）），有的没有。 \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q7v0zhg4.png)\n\n树底部的叶结点表示 3019 年所有产生的奶牛的子种群。没有不同的叶结点（子种群）具有完全相同的一组特性。例如，子种群 #1 是没有特殊特性的奶牛，子种群 #3 是能够心灵感应的（telepathic）会飞的奶牛。相比之下，子种群 #2 是会飞但不能心灵感应的奶牛。子种群 #3 是唯一既会飞又会心灵感应的。\n\n像上图这样每一种进化出的新特性都恰好在树中的一条边上产生（也就是说，在整个进化历史中仅在一个时间点产生），这样的进化树被称为是“合法的”。例如，如果斑点这一特性在两个不同分支中均进化产生，这棵进化树就不是合法的。给定 3019 年奶牛子种群的描述，请判断是否这可以由一棵合法的进化树所解释。 ", "inputFormat": "输入的第一行包含子种群的数量 $N$（$2\\le N\\le 25$）。以下 $N$ 行每行描述一个子种群。每行包含一个整数 $K$（$0\\le K\\le 25$），之后是 $K$ 个该子种群奶牛所拥有的特性。特性是由至多 $20$ 个小写字母（`a..z`）组成的字符串。没有两个子种群拥有完全相同的特性。 ", "outputFormat": " 如果可能构造一棵可以解释所有子种群产生途径的进化树，输出 `yes`，否则输出 `no`。 ", "hint": "### 样例解释 1\n\n\n这个输入样例与上图所示的合法进化树一致。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO19OPEN] Cow Evolution B", "background": "", "description": "现在是 3019 年，在过去的一千年里发生了不计其数的牛类进化，产生了具有各种有趣特性的奶牛。\n\n牛类进化的记录可以用一棵树来表示，起源是位于树根位置的没有特殊特性的奶牛。树上每一个产生后代的结点，有可能所有的奶牛都进化出了一种新的特性（比如说喷火（fire breathing），如下图所示，其中所有斑点（spots）奶牛最后都能喷火），或者是奶牛种群产生了分支进化，其中有些进化出了新的特性（比如，飞（flying）），有的没有。 \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q7v0zhg4.png)\n\n树底部的叶结点表示 3019 年所有产生的奶牛的子种群。没有不同的叶结点（子种群）具有完全相同的一组特性。例如，子种群 #1 是没有特殊特性的奶牛，子种群 #3 是能够心灵感应的（telepathic）会飞的奶牛。相比之下，子种群 #2 是会飞但不能心灵感应的奶牛。子种群 #3 是唯一既会飞又会心灵感应的。\n\n像上图这样每一种进化出的新特性都恰好在树中的一条边上产生（也就是说，在整个进化历史中仅在一个时间点产生），这样的进化树被称为是“合法的”。例如，如果斑点这一特性在两个不同分支中均进化产生，这棵进化树就不是合法的。给定 3019 年奶牛子种群的描述，请判断是否这可以由一棵合法的进化树所解释。 ", "inputFormat": "输入的第一行包含子种群的数量 $N$（$2\\le N\\le 25$）。以下 $N$ 行每行描述一个子种群。每行包含一个整数 $K$（$0\\le K\\le 25$），之后是 $K$ 个该子种群奶牛所拥有的特性。特性是由至多 $20$ 个小写字母（`a..z`）组成的字符串。没有两个子种群拥有完全相同的特性。 ", "outputFormat": " 如果可能构造一棵可以解释所有子种群产生途径的进化树，输出 `yes`，否则输出 `no`。 ", "hint": "### 样例解释 1\n\n\n这个输入样例与上图所示的合法进化树一致。 ", "locale": "zh-CN"}}}
{"pid": "P1702", "type": "P", "difficulty": 3, "samples": [["3\n3 5\n4 5\n1 3\n", "2 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "突击考试", "background": "", "description": "一日，老师决定进行一次突击考试。已知每个学生都有一个考试能力等级，教室里一共有 $N$ 个课桌，按照顺序排成一列，每张课桌可以坐两个人，第 $i$ 张课桌坐的两个人的能力等级为$A_i,B_i$。现在老师决定对能力等级为 $K$ 的人进行测验。他会从这 $N$ 排中选择连续的 $L$ 排进行测验，要求这 $L$ 排中的每一排至少有一个人考试能力等级为 $K$。现在我们想知道 $L$ 的最大值以及对应的等级 $K$。", "inputFormat": "第 $1$ 行：一个整数 $N$；\n\n第 $2$ 至第 $N+1$ 行：每行两个整数，表示 $A_i,B_i$。", "outputFormat": "两个整数 $L$ 和 $K$，要求在 $L$ 最大的条件下 $K$ 最小。", "hint": "### 数据范围及约定\n\n对于全部数据，$1 \\le N \\le 100,000$，$1 \\le A[i],B[i] \\le 5$。", "locale": "zh-CN", "translations": {"en": {"title": "Surprise Exam", "background": "", "description": "One day, the teacher decides to hold a surprise exam. It is known that each student has an ability level. There are $N$ desks in the classroom, arranged in a single row. Each desk can seat two students; the two students at desk $i$ have ability levels $A_i$ and $B_i$. The teacher now decides to test people whose ability level is $K$. He will choose $L$ consecutive desks from these $N$ desks for the exam, requiring that each of these $L$ desks has at least one person whose ability level is $K$. We want to determine the maximum possible $L$ and the corresponding $K$.", "inputFormat": "Line 1: an integer $N$.\n\nLines 2 to $N+1$: each line contains two integers, $A_i$ and $B_i$.", "outputFormat": "Output two integers $L$ and $K$, where $L$ is maximized; among those, choose the smallest possible $K$.", "hint": "### Constraints\n\nFor all testdata, $1 \\le N \\le 100{,}000$, $1 \\le A_i, B_i \\le 5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "突击考试", "background": "", "description": "一日，老师决定进行一次突击考试。已知每个学生都有一个考试能力等级，教室里一共有 $N$ 个课桌，按照顺序排成一列，每张课桌可以坐两个人，第 $i$ 张课桌坐的两个人的能力等级为$A_i,B_i$。现在老师决定对能力等级为 $K$ 的人进行测验。他会从这 $N$ 排中选择连续的 $L$ 排进行测验，要求这 $L$ 排中的每一排至少有一个人考试能力等级为 $K$。现在我们想知道 $L$ 的最大值以及对应的等级 $K$。", "inputFormat": "第 $1$ 行：一个整数 $N$；\n\n第 $2$ 至第 $N+1$ 行：每行两个整数，表示 $A_i,B_i$。", "outputFormat": "两个整数 $L$ 和 $K$，要求在 $L$ 最大的条件下 $K$ 最小。", "hint": "### 数据范围及约定\n\n对于全部数据，$1 \\le N \\le 100,000$，$1 \\le A[i],B[i] \\le 5$。", "locale": "zh-CN"}}}
{"pid": "P1703", "type": "P", "difficulty": 2, "samples": [["CompleteVictory\nWherethereisawillthereisaway\n0", "Yvqgpxaimmklongnzfwpvxmniytm"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "洛谷原创"], "title": "那个什么密码 2", "background": "_本题改编自 <https://www.luogu.com.cn/problem/P1079>。_", "description": "16 世纪法国外交家 Blaise de Vigenère 设计了一种多表密码加密算法 Vigenère 密码。Vigenère 密码的加密解密算法简单易用，且破译难度比较高，曾在美国南北战争中为南军所广泛使用。\n\n \n在密码学中，我们称需要加密的信息为明文，用 $M$ 表示；称加密后的信息为密文，用 $C$ 表示；而密钥是一种参数，是将明文转换为密文或将密文转换为明文的算法中输入的数据，记为 $k$。在 Vigenère 密码中，密钥 $k$ 是一个字母串，$k=k_1,k_2,…,k_n$。当明文 $M=m_1,m_2,…,m_n$ 时，得到的密文 $C=c_1,c_2,…,c_n$，其中 $c_i$=$m_i \\operatorname{\\circledR} k_i$，运算 $\\circledR$ 的规则如下表所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ucldwpmy.png)\n\nVigenère 加密在操作时需要注意：\n\n1. $\\circledR$ 运算忽略参与运算的字母的大小写，并保持字母在明文 $M$ 中的大小写形式；\n2. 当明文 $M$ 的长度大于密钥 $k$ 的长度时，将密钥 $k$ 重复使用。\n\n**任务：**\n\n给定一串明文和一串密钥，请对明文进行两次加密：\n\n- 一次加密：依次输入 $n$ 条形如 $(l,r)$ 的指令，翻转明文中的第 $l$ 到 $r$ 个字符。\n- 二次加密：按照上面的规则，对一次加密后的一级密文再施加一次 Vigenère 密码加密，得到最终的二级密文。\n\n例如，明文 $M=\\texttt{Helloworld}$，密钥 $k=\\texttt{abc}$，$n=1$，指令为 $(4,9)$ 时，一级密文 $C_1=\\texttt{Hellrowold}$，二级密文 $C_2=\\texttt{Hfnlsqwpnd}$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|c|c|c|c|} \\hline\n\\textsf{明文} & \\tt H & \\tt e & \\tt l & \\tt l & \\tt o & \\tt w & \\tt o & \\tt r & \\tt l & \\tt d \\\\  \\hline\n\\textsf{一级密文} & \\tt H & \\tt e & \\tt l & \\tt l & \\tt r & \\tt o & \\tt w & \\tt o & \\tt l & \\tt d \\\\  \\hline\n\\textsf{密钥} & \\tt a & \\tt b & \\tt c & \\tt a & \\tt b & \\tt c & \\tt a & \\tt b & \\tt c & \\tt a \\\\  \\hline\n\\textsf{二级密文} & \\tt H & \\tt f & \\tt n & \\tt l & \\tt s & \\tt q & \\tt w & \\tt p & \\tt n & \\tt d \\\\  \\hline\n\\end{array}\n$$", "inputFormat": "第一行为一个字符串，表示密钥 $k$，长度不超过 $1000$，其中仅包含大小写字母。  \n\n第二行为一个字符串，表示加密前的明文，长度不超过 $1000$，其中仅包含大小写字母。\n\n第三行为一个非负整数 $n\\ (0 \\le n \\le 10^5)$，表示一次加密中的指令个数。\n\n下面 $n$ 行，每行两个正整数 $l,r\\ (1 \\le l \\le r \\le m)$，表示一个指令，其中 $m$ 是明文的长度。", "outputFormat": "一个字符串，表示输入密钥和明文所对应的二级密文。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "That Whatever Password 2", "background": "_This problem is adapted from <https://www.luogu.com.cn/problem/P1079>._", "description": "In the 16th century, the French diplomat Blaise de Vigenère designed a polyalphabetic cipher called the Vigenère cipher. The Vigenère cipher is simple and easy to use for both encryption and decryption, yet relatively hard to crack. It was widely used by the Confederate Army during the American Civil War.\n\nIn cryptography, the information to be encrypted is called the plaintext, denoted by $M$; the encrypted information is called the ciphertext, denoted by $C$; and the key is a parameter used as input to the algorithm that converts plaintext to ciphertext or ciphertext to plaintext, denoted by $k$. In the Vigenère cipher, the key $k$ is a string of letters, $k = k_1, k_2, \\dots, k_n$. When the plaintext is $M = m_1, m_2, \\dots, m_n$, the ciphertext obtained is $C = c_1, c_2, \\dots, c_n$, where $c_i = m_i \\operatorname{\\circledR} k_i$. The rules for the operation $\\circledR$ are shown in the table below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ucldwpmy.png)\n\nNotes when applying Vigenère encryption:\n1. The $\\circledR$ operation ignores the case of the letters involved, and preserves the letter case as it appears in the plaintext $M$.\n2. When the length of the plaintext $M$ is greater than the length of the key $k$, repeat the key $k$.\n\nTask:\nGiven a plaintext and a key, perform two rounds of encryption:\n\n- First-stage encryption: sequentially apply $n$ instructions of the form $(l, r)$, reversing the characters from the $l$-th to the $r$-th positions of the plaintext.\n- Second-stage encryption: according to the above rules, apply the Vigenère cipher once more to the result of the first stage to obtain the final level-2 ciphertext.\n\nFor example, with plaintext $M=\\texttt{Helloworld}$, key $k=\\texttt{abc}$, $n=1$, and instruction $(4, 9)$, the level-1 ciphertext is $C_1=\\texttt{Hellrowold}$, and the level-2 ciphertext is $C_2=\\texttt{Hfnlsqwpnd}$.\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|c|c|c|c|} \\hline\n\\textsf{Plaintext} & \\tt H & \\tt e & \\tt l & \\tt l & \\tt o & \\tt w & \\tt o & \\tt r & \\tt l & \\tt d \\\\  \\hline\n\\textsf{Level-1 Ciphertext} & \\tt H & \\tt e & \\tt l & \\tt l & \\tt r & \\tt o & \\tt w & \\tt o & \\tt l & \\tt d \\\\  \\hline\n\\textsf{Key} & \\tt a & \\tt b & \\tt c & \\tt a & \\tt b & \\tt c & \\tt a & \\tt b & \\tt c & \\tt a \\\\  \\hline\n\\textsf{Level-2 Ciphertext} & \\tt H & \\tt f & \\tt n & \\tt l & \\tt s & \\tt q & \\tt w & \\tt p & \\tt n & \\tt d \\\\  \\hline\n\\end{array}\n$$", "inputFormat": "The first line contains a string representing the key $k$, with length not exceeding 1000, containing only uppercase and lowercase letters.  \nThe second line contains a string representing the plaintext before encryption, with length not exceeding 1000, containing only uppercase and lowercase letters.  \nThe third line contains a non-negative integer $n$ ($0 \\le n \\le 10^5$), representing the number of instructions in the first-stage encryption.  \nEach of the following $n$ lines contains two positive integers $l, r$ ($1 \\le l \\le r \\le m$), representing one instruction, where $m$ is the length of the plaintext.", "outputFormat": "Output a single string, which is the level-2 ciphertext corresponding to the given key and plaintext.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "那个什么密码 2", "background": "_本题改编自 <https://www.luogu.com.cn/problem/P1079>。_", "description": "16 世纪法国外交家 Blaise de Vigenère 设计了一种多表密码加密算法 Vigenère 密码。Vigenère 密码的加密解密算法简单易用，且破译难度比较高，曾在美国南北战争中为南军所广泛使用。\n\n \n在密码学中，我们称需要加密的信息为明文，用 $M$ 表示；称加密后的信息为密文，用 $C$ 表示；而密钥是一种参数，是将明文转换为密文或将密文转换为明文的算法中输入的数据，记为 $k$。在 Vigenère 密码中，密钥 $k$ 是一个字母串，$k=k_1,k_2,…,k_n$。当明文 $M=m_1,m_2,…,m_n$ 时，得到的密文 $C=c_1,c_2,…,c_n$，其中 $c_i$=$m_i \\operatorname{\\circledR} k_i$，运算 $\\circledR$ 的规则如下表所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ucldwpmy.png)\n\nVigenère 加密在操作时需要注意：\n\n1. $\\circledR$ 运算忽略参与运算的字母的大小写，并保持字母在明文 $M$ 中的大小写形式；\n2. 当明文 $M$ 的长度大于密钥 $k$ 的长度时，将密钥 $k$ 重复使用。\n\n**任务：**\n\n给定一串明文和一串密钥，请对明文进行两次加密：\n\n- 一次加密：依次输入 $n$ 条形如 $(l,r)$ 的指令，翻转明文中的第 $l$ 到 $r$ 个字符。\n- 二次加密：按照上面的规则，对一次加密后的一级密文再施加一次 Vigenère 密码加密，得到最终的二级密文。\n\n例如，明文 $M=\\texttt{Helloworld}$，密钥 $k=\\texttt{abc}$，$n=1$，指令为 $(4,9)$ 时，一级密文 $C_1=\\texttt{Hellrowold}$，二级密文 $C_2=\\texttt{Hfnlsqwpnd}$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|c|c|c|c|} \\hline\n\\textsf{明文} & \\tt H & \\tt e & \\tt l & \\tt l & \\tt o & \\tt w & \\tt o & \\tt r & \\tt l & \\tt d \\\\  \\hline\n\\textsf{一级密文} & \\tt H & \\tt e & \\tt l & \\tt l & \\tt r & \\tt o & \\tt w & \\tt o & \\tt l & \\tt d \\\\  \\hline\n\\textsf{密钥} & \\tt a & \\tt b & \\tt c & \\tt a & \\tt b & \\tt c & \\tt a & \\tt b & \\tt c & \\tt a \\\\  \\hline\n\\textsf{二级密文} & \\tt H & \\tt f & \\tt n & \\tt l & \\tt s & \\tt q & \\tt w & \\tt p & \\tt n & \\tt d \\\\  \\hline\n\\end{array}\n$$", "inputFormat": "第一行为一个字符串，表示密钥 $k$，长度不超过 $1000$，其中仅包含大小写字母。  \n\n第二行为一个字符串，表示加密前的明文，长度不超过 $1000$，其中仅包含大小写字母。\n\n第三行为一个非负整数 $n\\ (0 \\le n \\le 10^5)$，表示一次加密中的指令个数。\n\n下面 $n$ 行，每行两个正整数 $l,r\\ (1 \\le l \\le r \\le m)$，表示一个指令，其中 $m$ 是明文的长度。", "outputFormat": "一个字符串，表示输入密钥和明文所对应的二级密文。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1704", "type": "P", "difficulty": 5, "samples": [["13 4\r\n2 13 8 7\r\n6 10 9 8 9 10 11 16 14 12 13 14 18 ", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "二分", "洛谷原创"], "title": "寻找最优美做题曲线", "background": "nodgd 是一个喜欢写程序的同学，前不久（好像还是有点久了）洛谷 OJ 横空出世，nodgd 同学当然第一时间来到洛谷 OJ 刷题。于是发生了一系列有趣的事情，他就打算用这些事情来出题恶心大家……", "description": "洛谷 OJ 刷题有个有趣的评测功能，就是系统自动绘制出用户的“做题曲线”。所谓做题曲线就是一条曲线，或者说是折线，是这样定义的：假设某用户在第 $b_i$ 天 AC 了 $c_i$ 道题，并且 $b_i$ 严格递增，那么该用户的做题曲线就是平面上点 $(i,c_i)$ 依次连出的一条折线。比如你在第 $1$ 天做了 $3$ 道题，第 $3$ 天做了 $4$ 道题，第 $6$ 天做了 $1$ 道题，那么你在前 $6$ 天的做题曲线就是从点 $(1,3)$ 到点 $(2,4)$ 到点 $(3,1)$ 的连续折线。\n\nnodgd 同学可以预测出自己未来 $N$ 天每条能够 $AC$ 题目的数量，同时有一个很无趣的爱好，就是单调递增，nodgd 强迫自己的做题曲线保持严格的单调递增。但是出于某些原因，nodgd 在某些日子（共有 $K$ 天）必须刷题，而且刷题数量一定是预计的数量（体现 nodgd 的神预测）。nodgd 同学想知道，在这样的情况下，自己最多有多少天可以刷题，不过 nodgd 同学还有大量的数学竞赛题、物理竞赛题、英语竞赛题、美术竞赛题、体育竞赛题……要做，就拜托你来帮他算算了。", "inputFormat": "第一行两个正整数，$N$ 和 $K$，表示 nodgd 预测了未来 $N$ 天每天做题的数量，其中 $K$ 天必须刷题。\n\n第二行 $K$ 个正整数 $p_i$，表示第 $p_i$ 天必须刷题 $(1 \\le p_i\\le N$，保证每个 $p_i$ 不同）。\n\n第三行 $N$ 个正整数 $c_i$，表示在第 $i$ 天 nodgd 可以 $AC$ 的题目数量必须是 $c_i$。", "outputFormat": "输出共一行。\n\n如果能找到严格递增的做题曲线：一个正整数，表示 nodgd 最多有多少天可以刷题。\n\n如果找不到严格递增的做题曲线：直接输出 `impossible`（不加引号，全是小写字母）。", "hint": "### 数据范围及约定\n\n对于全部数据，\n\n- $1 \\le N \\le 500000$，$1 \\le K \\le N/2$；\n- $1 \\le p[i] \\le N$，保证每个 $p[i]$ 不同，不保证 $p[i]$ 按大小顺序输入；\n- $1 \\le c[i] \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Find the Most Elegant Problem-Solving Curve", "background": "nodgd is a student who enjoys programming. Some time ago (well, maybe not that recently), Luogu OJ came into being. Of course, nodgd started solving problems on Luogu OJ right away. A series of interesting events followed, and he decided to turn them into a problem to bother everyone.", "description": "Luogu OJ has a fun judging feature that automatically draws a user's \"problem-solving curve.\" This curve is a polyline defined as follows: suppose a user solved $c_{b_i}$ problems on day $b_i$, where $b_i$ are strictly increasing. Then the user's problem-solving curve is the polyline passing through the points $(i, c_{b_i})$ in order. For example, if you solved $3$ problems on day $1$, $4$ on day $3$, and $1$ on day $6$, then your problem-solving curve over the first $6$ days is the continuous polyline from $(1, 3)$ to $(2, 4)$ to $(3, 1)$.\n\nnodgd can predict how many problems he would be able to AC on each of the next $N$ days. He also has an obsession with being strictly increasing, so he forces his problem-solving curve to be strictly increasing. For some reasons, on certain days (a total of $K$ days), he must solve problems, and the number of problems solved on those days must exactly match the predicted numbers (showcasing nodgd’s divine prediction). He wants to know, under these constraints, the maximum number of days on which he can solve problems. However, since he still has a pile of math, physics, English, art, and PE competition problems to do, he is asking you to compute it for him.", "inputFormat": "- The first line contains two positive integers $N$ and $K$, meaning nodgd has predictions for the next $N$ days, among which $K$ days are mandatory.\n- The second line contains $K$ distinct positive integers $p_i$, indicating that day $p_i$ is mandatory (the $p_i$ are not guaranteed to be in increasing order).\n- The third line contains $N$ positive integers $c_i$, where on day $i$, if nodgd solves problems, the number must be exactly $c_i$.", "outputFormat": "Output a single line.\n\n- If a strictly increasing problem-solving curve can be constructed, output a single positive integer: the maximum number of days on which nodgd can solve problems.\n- If no strictly increasing curve exists, output `impossible`.", "hint": "Constraints\n\nFor all testdata,\n\n- $1 \\le N \\le 500000$, $1 \\le K \\le N/2$；\n- $1 \\le p_i \\le N$, and all $p_i$ are distinct; the $p_i$ are not guaranteed to be in increasing order；\n- $1 \\le c_i \\le 10^9$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "寻找最优美做题曲线", "background": "nodgd 是一个喜欢写程序的同学，前不久（好像还是有点久了）洛谷 OJ 横空出世，nodgd 同学当然第一时间来到洛谷 OJ 刷题。于是发生了一系列有趣的事情，他就打算用这些事情来出题恶心大家……", "description": "洛谷 OJ 刷题有个有趣的评测功能，就是系统自动绘制出用户的“做题曲线”。所谓做题曲线就是一条曲线，或者说是折线，是这样定义的：假设某用户在第 $b_i$ 天 AC 了 $c_i$ 道题，并且 $b_i$ 严格递增，那么该用户的做题曲线就是平面上点 $(i,c_i)$ 依次连出的一条折线。比如你在第 $1$ 天做了 $3$ 道题，第 $3$ 天做了 $4$ 道题，第 $6$ 天做了 $1$ 道题，那么你在前 $6$ 天的做题曲线就是从点 $(1,3)$ 到点 $(2,4)$ 到点 $(3,1)$ 的连续折线。\n\nnodgd 同学可以预测出自己未来 $N$ 天每条能够 $AC$ 题目的数量，同时有一个很无趣的爱好，就是单调递增，nodgd 强迫自己的做题曲线保持严格的单调递增。但是出于某些原因，nodgd 在某些日子（共有 $K$ 天）必须刷题，而且刷题数量一定是预计的数量（体现 nodgd 的神预测）。nodgd 同学想知道，在这样的情况下，自己最多有多少天可以刷题，不过 nodgd 同学还有大量的数学竞赛题、物理竞赛题、英语竞赛题、美术竞赛题、体育竞赛题……要做，就拜托你来帮他算算了。", "inputFormat": "第一行两个正整数，$N$ 和 $K$，表示 nodgd 预测了未来 $N$ 天每天做题的数量，其中 $K$ 天必须刷题。\n\n第二行 $K$ 个正整数 $p_i$，表示第 $p_i$ 天必须刷题 $(1 \\le p_i\\le N$，保证每个 $p_i$ 不同）。\n\n第三行 $N$ 个正整数 $c_i$，表示在第 $i$ 天 nodgd 可以 $AC$ 的题目数量必须是 $c_i$。", "outputFormat": "输出共一行。\n\n如果能找到严格递增的做题曲线：一个正整数，表示 nodgd 最多有多少天可以刷题。\n\n如果找不到严格递增的做题曲线：直接输出 `impossible`（不加引号，全是小写字母）。", "hint": "### 数据范围及约定\n\n对于全部数据，\n\n- $1 \\le N \\le 500000$，$1 \\le K \\le N/2$；\n- $1 \\le p[i] \\le N$，保证每个 $p[i]$ 不同，不保证 $p[i]$ 按大小顺序输入；\n- $1 \\le c[i] \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1705", "type": "P", "difficulty": 2, "samples": [["5 2 8\r\n1 7 2 5 4", "4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "洛谷原创", "背包 DP"], "title": "爱与愁过火", "background": "（本道题目隐藏了两首歌名，找找看哪~~~）\n\n《爱与愁的故事第一弹·heartache》第三章。\n\n爱与愁大神说这是ta的伤心指数，只不过现在好很多了，翻译只是看你无聊让你动动脑筋罢了（shit~~~）。虽然月落乌啼嘴上骂着：“我去年买了个表……纽曼表……”，但是结果还是请爱与愁大神去Pizza Hut吃了一顿。\n", "description": "到了 Pizza Hut，爱与愁大神由于不爽，所以存心想坑月落乌啼的钱，他点了 $m$ 样菜，每样菜 $a_i$ 元。月落乌啼预计只用 $n$ 元，于是他让爱与愁大神重新从这 $m$ 样菜中选 $r$ 样。\n\n爱与愁大神还是想坑钱，于是他打电话给你，让你编一个程序告诉他有几种方案可以从 $m$ 样菜中点取 $r$ 样菜但是还能超过月落乌啼的预计 $n$ 元。", "inputFormat": "第一行三个数 $m$，$r$，$n$。\n\n第二行 $m$ 个数，每道菜需要的钱 $a_i$，两个数之间有空格。", "outputFormat": "只有一个整数，表示方案总数。\n", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 数据，$m \\le 30$，$r \\le m$，$m \\le a_i \\le 90$，$n \\le 2700$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Love and Sorrow, Going Too Far", "background": "(This problem hides two song titles. Try to find them~~~).\n\nChapter 3 of \"The Story of Love and Sorrow, Volume One · heartache.\"\n\nThe God of Love and Sorrow says this is ta's sadness index, but it's much better now. The translation is just to give you something to do when you're bored (shit~~~). Although Yue Luo Wu Ti cursed out loud: \"I bought a watch last year... a Newman watch...\", in the end he still treated the God of Love and Sorrow to a meal at Pizza Hut.", "description": "At Pizza Hut, the God of Love and Sorrow was upset and wanted to rip Yue Luo Wu Ti off. He ordered $m$ dishes, each costing $a_i$ yuan. Yue Luo Wu Ti planned to spend only $n$ yuan, so he asked the God of Love and Sorrow to reselect $r$ dishes from these $m$ dishes.\n\nStill trying to spend more money, he called you and asked you to write a program to tell him in how many ways he can choose $r$ dishes from the $m$ dishes such that the total cost exceeds $n$ yuan.", "inputFormat": "The first line contains three integers $m$, $r$, $n$.\n\nThe second line contains $m$ integers, where each $a_i$ is the cost of a dish, separated by spaces.", "outputFormat": "Output a single integer, the total number of valid selections.", "hint": "### Constraints\n\nFor $100\\%$ of the testdata, $m \\le 30$, $r \\le m$, $m \\le a_i \\le 90$, $n \\le 2700$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "爱与愁过火", "background": "（本道题目隐藏了两首歌名，找找看哪~~~）\n\n《爱与愁的故事第一弹·heartache》第三章。\n\n爱与愁大神说这是ta的伤心指数，只不过现在好很多了，翻译只是看你无聊让你动动脑筋罢了（shit~~~）。虽然月落乌啼嘴上骂着：“我去年买了个表……纽曼表……”，但是结果还是请爱与愁大神去Pizza Hut吃了一顿。\n", "description": "到了 Pizza Hut，爱与愁大神由于不爽，所以存心想坑月落乌啼的钱，他点了 $m$ 样菜，每样菜 $a_i$ 元。月落乌啼预计只用 $n$ 元，于是他让爱与愁大神重新从这 $m$ 样菜中选 $r$ 样。\n\n爱与愁大神还是想坑钱，于是他打电话给你，让你编一个程序告诉他有几种方案可以从 $m$ 样菜中点取 $r$ 样菜但是还能超过月落乌啼的预计 $n$ 元。", "inputFormat": "第一行三个数 $m$，$r$，$n$。\n\n第二行 $m$ 个数，每道菜需要的钱 $a_i$，两个数之间有空格。", "outputFormat": "只有一个整数，表示方案总数。\n", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 数据，$m \\le 30$，$r \\le m$，$m \\le a_i \\le 90$，$n \\le 2700$。\n", "locale": "zh-CN"}}}
{"pid": "P1706", "type": "P", "difficulty": 2, "samples": [["3", "    1    2    3\n    1    3    2\n    2    1    3\n    2    3    1\n    3    1    2\n    3    2    1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "数学", "递归", "深度优先搜索 DFS"], "title": "全排列问题", "background": "", "description": "按照字典序输出自然数 $1$ 到 $n$ 所有不重复的排列，即 $n$ 的全排列，要求所产生的任一数字序列中不允许出现重复的数字。\n", "inputFormat": "一个整数 $n$。\n", "outputFormat": "由 $1 \\sim n$ 组成的所有不重复的数字序列，每行一个序列。\n\n每个数字保留 $5$ 个场宽。\n", "hint": "$1 \\leq n \\leq 9$。", "locale": "zh-CN", "translations": {"en": {"title": "Full Permutation Problem", "background": "", "description": "Output, in lexicographic order, all non-repeating permutations of the natural numbers $1$ to $n$, i.e., the full set of permutations of $1$ to $n$. No generated sequence may contain repeated numbers.", "inputFormat": "A single integer $n$.", "outputFormat": "All non-repeating sequences composed of $1 \\sim n$, one sequence per line. Each number should be printed in a field of width $5$.", "hint": "$1 \\leq n \\leq 9$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "全排列问题", "background": "", "description": "按照字典序输出自然数 $1$ 到 $n$ 所有不重复的排列，即 $n$ 的全排列，要求所产生的任一数字序列中不允许出现重复的数字。\n", "inputFormat": "一个整数 $n$。\n", "outputFormat": "由 $1 \\sim n$ 组成的所有不重复的数字序列，每行一个序列。\n\n每个数字保留 $5$ 个场宽。\n", "hint": "$1 \\leq n \\leq 9$。", "locale": "zh-CN"}}}
{"pid": "P1707", "type": "P", "difficulty": 5, "samples": [["4 10007\n2 1 1 1\n2 2 3\n1 1 2", "nodgd 74\nCiocio 80\nNicole 59"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "倍增", "矩阵运算", "洛谷原创", "矩阵乘法", "线性递推"], "title": "刷题比赛", "background": "nodgd 是一个喜欢写程序的同学，前不久洛谷 OJ 横空出世，nodgd 同学当然第一时间来到洛谷 OJ 刷题。   \n于是发生了一系列有趣的事情，他就打算用这些事情来出题恶心大家……", "description": "洛谷OJ当然算是好地方，nodgd 同学打算和朋友分享一下。于是他就拉上了他的朋友 Ciocio 和 Nicole 两位同学一起刷题。喜欢比赛的他们当然不放过这样一次刷题比赛的机会！\n\n在第 $1$ 天 nodgd,Ciocio,Nicole 都只做了 $1$ 道题。\n\n在第 $2$ 天 nodgd,Ciocio,Nicole 都只做了 $3$ 道题。\n\n他们都有着严格的刷题规则，并且会在每一天都很遵守规则的刷一定量的题。\n\n1、nodgd 同学第 $k+2$ 天刷题数量    \n$$a_{k+2}=pa_{k+1}+qa_k+b_{k+1}+c_{k+1}+rk^2+tk+1$$\n\n2、Ciocio 同学第 $k+2$ 天刷题数量      \n$$b_{k+2}=ub_{k+1}+vb_k+a_{k+1}+c_{k+1}+w^k$$\n\n3、Nicole 同学第 $k+2$ 天刷题数量    \n$$c_{k+2} = xc_{k+1}+yc_k + a_{k+1} + b_{k+1} + z^k+k+2$$\n\n（以上的字母 $p,q,r,t,u,v,w,x,y,z$ 都是给定的常数，并保证是正整数）\n\n于是他们开始了长时间的刷题比赛！一共进行了 $n$ 天\n\n但是时间是可贵的，nodgd 想快速知道第 $n$ 天每个人的刷题数量。  \n不过 nodgd 同学还有大量的数学竞赛题、物理竞赛题、英语竞赛题、美术竞赛题、体育竞赛题…… 要做，就拜托你来帮他算算了。\n\n由于结果很大，输出结果 $\\bmod \\space m$ 的值即可。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行四个正整数 $p,q,r,t$。\n\n第三行三个正整数 $u,v,w$。\n\n第四行三个正整数 $x,y,z$。", "outputFormat": "共三行，每行一个名字 + 一个空格 + 一个整数。  \n依次是 nodgd,Ciocio,Nicole 和他们在第 $n$ 天刷题数量 $\\bmod \\space m$ 的值。", "hint": "对于 $100\\%$ 的数据，$4\\le n \\le 10^{16}$，$2\\le m \\le 10^{16}$，$1\\le p,q,r,t,u,v,w,x,y,z \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Problem-Solving Contest", "background": "nodgd is a student who likes programming. Recently, Luogu OJ was launched, and of course nodgd came to Luogu OJ right away to practice problems.  \nA series of interesting things happened, and he decided to turn them into a problem to make everyone suffer a bit….", "description": "Luogu OJ is certainly a good place, and nodgd wants to share it with friends. So he invited his friends Ciocio and Nicole to practice problems together. Since they love contests, they naturally would not miss such an opportunity for a problem-solving contest!\n\nOn day $1$, nodgd, Ciocio, Nicole each solved $1$ problem.\n\nOn day $2$, nodgd, Ciocio, Nicole each solved $3$ problems.\n\nThey all have strict rules for solving problems and will strictly follow the rules to solve a certain number of problems each day.\n\n1. The number of problems nodgd solves on day $k+2$:\n$$a_{k+2}=pa_{k+1}+qa_k+b_{k+1}+c_{k+1}+rk^2+tk+1$$\n\n2. The number of problems Ciocio solves on day $k+2$:\n$$b_{k+2}=ub_{k+1}+vb_k+a_{k+1}+c_{k+1}+w^k$$\n\n3. The number of problems Nicole solves on day $k+2$:\n$$c_{k+2} = xc_{k+1}+yc_k + a_{k+1} + b_{k+1} + z^k+k+2$$\n\n(All letters $p, q, r, t, u, v, w, x, y, z$ are given constants and are guaranteed to be positive integers.)\n\nThen they started a long problem-solving contest, lasting for $n$ days.\n\nHowever, time is precious, and nodgd wants to quickly know how many problems each person solves on day $n$.  \nBut nodgd still has a lot of math contest problems, physics contest problems, English contest problems, art contest problems, PE contest problems… to do, so please help him calculate.\n\nBecause the results can be large, output the values $\\bmod \\space m$.", "inputFormat": "The first line contains two positive integers $n, m$.\n\nThe second line contains four positive integers $p, q, r, t$.\n\nThe third line contains three positive integers $u, v, w$.\n\nThe fourth line contains three positive integers $x, y, z$.", "outputFormat": "Output three lines, each containing a name + a space + an integer.  \nIn order: nodgd, Ciocio, Nicole, and their number of problems solved on day $n$ $\\bmod \\space m$.", "hint": "For $100\\%$ of the testdata, $4 \\le n \\le 10^{16}$, $2 \\le m \\le 10^{16}$, $1 \\le p, q, r, t, u, v, w, x, y, z \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "刷题比赛", "background": "nodgd 是一个喜欢写程序的同学，前不久洛谷 OJ 横空出世，nodgd 同学当然第一时间来到洛谷 OJ 刷题。   \n于是发生了一系列有趣的事情，他就打算用这些事情来出题恶心大家……", "description": "洛谷OJ当然算是好地方，nodgd 同学打算和朋友分享一下。于是他就拉上了他的朋友 Ciocio 和 Nicole 两位同学一起刷题。喜欢比赛的他们当然不放过这样一次刷题比赛的机会！\n\n在第 $1$ 天 nodgd,Ciocio,Nicole 都只做了 $1$ 道题。\n\n在第 $2$ 天 nodgd,Ciocio,Nicole 都只做了 $3$ 道题。\n\n他们都有着严格的刷题规则，并且会在每一天都很遵守规则的刷一定量的题。\n\n1、nodgd 同学第 $k+2$ 天刷题数量    \n$$a_{k+2}=pa_{k+1}+qa_k+b_{k+1}+c_{k+1}+rk^2+tk+1$$\n\n2、Ciocio 同学第 $k+2$ 天刷题数量      \n$$b_{k+2}=ub_{k+1}+vb_k+a_{k+1}+c_{k+1}+w^k$$\n\n3、Nicole 同学第 $k+2$ 天刷题数量    \n$$c_{k+2} = xc_{k+1}+yc_k + a_{k+1} + b_{k+1} + z^k+k+2$$\n\n（以上的字母 $p,q,r,t,u,v,w,x,y,z$ 都是给定的常数，并保证是正整数）\n\n于是他们开始了长时间的刷题比赛！一共进行了 $n$ 天\n\n但是时间是可贵的，nodgd 想快速知道第 $n$ 天每个人的刷题数量。  \n不过 nodgd 同学还有大量的数学竞赛题、物理竞赛题、英语竞赛题、美术竞赛题、体育竞赛题…… 要做，就拜托你来帮他算算了。\n\n由于结果很大，输出结果 $\\bmod \\space m$ 的值即可。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行四个正整数 $p,q,r,t$。\n\n第三行三个正整数 $u,v,w$。\n\n第四行三个正整数 $x,y,z$。", "outputFormat": "共三行，每行一个名字 + 一个空格 + 一个整数。  \n依次是 nodgd,Ciocio,Nicole 和他们在第 $n$ 天刷题数量 $\\bmod \\space m$ 的值。", "hint": "对于 $100\\%$ 的数据，$4\\le n \\le 10^{16}$，$2\\le m \\le 10^{16}$，$1\\le p,q,r,t,u,v,w,x,y,z \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P1708", "type": "P", "difficulty": 3, "samples": [["2\n2 1\n3 2\n", "2\n9\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "语言月赛"], "title": "[入门赛 #21] 星云 hard ver.", "background": "本题与 easy ver. 的区别在于本题**有**多组测试数据。\n\n你看，那一抹云，衬着星星，多美啊！", "description": "定义星云数为位数不大于 $n$ 且各数位之和不超过 $k$ 的正整数，给定 $n,k$，求星云数的个数。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：  \n第一行输入两个整数 $n,k$。", "outputFormat": "对于每组测试数据：  \n输出一行一个整数，表示答案。", "hint": "### 数据规模与约定\n\n对于 $50\\%$ 的数据，$1 \\leq n \\leq 2$。  \n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5$，$1 \\leq n \\leq 7$，$1 \\leq k \\leq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #21] 星云 hard ver.", "background": "本题与 easy ver. 的区别在于本题**有**多组测试数据。\n\n你看，那一抹云，衬着星星，多美啊！", "description": "定义星云数为位数不大于 $n$ 且各数位之和不超过 $k$ 的正整数，给定 $n,k$，求星云数的个数。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：  \n第一行输入两个整数 $n,k$。", "outputFormat": "对于每组测试数据：  \n输出一行一个整数，表示答案。", "hint": "### 数据规模与约定\n\n对于 $50\\%$ 的数据，$1 \\leq n \\leq 2$。  \n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5$，$1 \\leq n \\leq 7$，$1 \\leq k \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P1709", "type": "P", "difficulty": 5, "samples": [["7\nanabana\n", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "贪心", "2003", "USACO", "ICPC", "SEERC"], "title": "[SEERC 2003 / USACO5.5] 隐藏口令 Hidden Password", "background": "", "description": "有时候程序员有很奇怪的方法来隐藏他们的口令。Binny 会选择一个字符串 $S$（由 $N$ 个小写字母组成，$5 \\le N \\le 5 \\times {10}^6$），然后他把 $S$ 顺时针绕成一个圈，每次取一个做开头字母并顺时针依次取字母而组成一个字符串。这样将得到一些字符串，他把它们排序后取出第一个字符串。把这个字符串的第一个字母在原字符串中的位置减 $1$ 做为口令。\n\n如字符串 `alabala`，按操作的到 $7$ 个字符串，排序后得：\n\n`aalabal`\n`abalaal`  \n`alaalab`  \n`alabala`  \n`balaala`  \n`laalaba`  \n`labalaa`\n\n第一个字符串为 `aalabal`，这个 `a` 在原字符串位置为 $7$，$7-1=6$，则 $6$ 为口令。", "inputFormat": "第一行：一个数：$N$\n\n第二行开始：字符串：$S$（每 $72$ 个字符一个换行符）", "outputFormat": "一行，为得到的口令", "hint": "测试数据题目满足：\n\n$30 \\%$ 的数据 $n \\le {10}^4$。  \n$70 \\%$ 的数据 $n \\le {10}^5$。  \n$100 \\%$ 的数据 $1 \\le n \\le 5 \\times {10}^6$。\n\n题目翻译来自 NOCOW。\n\nUSACO Training Section 5.5\n\n// 20170523 新增数据四组", "locale": "zh-CN", "translations": {"en": {"title": "[SEERC 2003 / USACO5.5] Hidden Password", "background": "", "description": "Sometimes the programmers have very strange ways of hiding their passwords. Billy \"Hacker\" Geits chooses a string S composed of L (5 <= L <= 100,000) lowercase letters ('a'..'z') with length L. Then he makes and sorts all L-1 one-letter left cyclic shifts of the string. He then takes as a password one prefix of the lexicographically first of the obtained strings (including S).\n\nFor example consider the string \"alabala\". The sorted cyclic one-letter left shifts (including the initial string) are:\n\n```\naalabal \nabalaal \nalaalab \nalabala \nbalaala \nlaalaba \nlabalaa\n```\n\nLexicographically, first string is 'aalabal'. The first letter of this string ('a') is the 'a' that was in position 6 in the initial string (counting the first letter in the string as position 0).\n\nWrite a program that, for given string S, finds the start position of the first letter of the sorted list of cyclic shifts of the string. If the first element appears more than once in the sorted list, then the program should output the smallest possible initial position.", "inputFormat": "Line 1: A single integer: L\n\nLine 2..?: All L characters of the the string S, broken across lines such that each line has 72 characters except the last one, which might have fewer.", "outputFormat": "Line 1: A single integer that is the start position of the first letter, as described above.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[SEERC 2003 / USACO5.5] 隐藏口令 Hidden Password", "background": "", "description": "有时候程序员有很奇怪的方法来隐藏他们的口令。Binny 会选择一个字符串 $S$（由 $N$ 个小写字母组成，$5 \\le N \\le 5 \\times {10}^6$），然后他把 $S$ 顺时针绕成一个圈，每次取一个做开头字母并顺时针依次取字母而组成一个字符串。这样将得到一些字符串，他把它们排序后取出第一个字符串。把这个字符串的第一个字母在原字符串中的位置减 $1$ 做为口令。\n\n如字符串 `alabala`，按操作的到 $7$ 个字符串，排序后得：\n\n`aalabal`\n`abalaal`  \n`alaalab`  \n`alabala`  \n`balaala`  \n`laalaba`  \n`labalaa`\n\n第一个字符串为 `aalabal`，这个 `a` 在原字符串位置为 $7$，$7-1=6$，则 $6$ 为口令。", "inputFormat": "第一行：一个数：$N$\n\n第二行开始：字符串：$S$（每 $72$ 个字符一个换行符）", "outputFormat": "一行，为得到的口令", "hint": "测试数据题目满足：\n\n$30 \\%$ 的数据 $n \\le {10}^4$。  \n$70 \\%$ 的数据 $n \\le {10}^5$。  \n$100 \\%$ 的数据 $1 \\le n \\le 5 \\times {10}^6$。\n\n题目翻译来自 NOCOW。\n\nUSACO Training Section 5.5\n\n// 20170523 新增数据四组", "locale": "zh-CN"}}}
{"pid": "P1710", "type": "P", "difficulty": 5, "samples": [["5 6 5\n1 2\n1 3\n4 2\n3 2\n2 5\n5 3\n5\n2\n4\n1\n3\n", "0\n2\n2\n4\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "O2优化", "洛谷月赛"], "title": "地铁涨价", "background": "", "description": "博艾市除了有海底高铁连接中国大陆、台湾与日本，市区里也有很成熟的轨道交通系统。我们可以认为博艾地铁系统是一个无向连通图。博艾有 $N$ 个地铁站，同时有 $M$ 小段地铁连接两个不同的站。\n\n地铁计价方式很简单。从 A 站到 B 站，每经过一小段铁路（连接直接相邻的两个点的一条边），就要收取 $1$ 博艾元。也就是说，从 A 站到 B 站，选择的路径不一样，要价也会不同。\n\n我们认为凡华中学在 $1$ 号地铁站。学生们通过地铁通勤，他们当然知道选择最短路来坐车的话，票价最便宜。\n\n然而博艾地铁公司经营不善，一直亏损，于是他们打算提价。提价一次就是将一小段铁路原来收费 $1$ 元改收 $2$ 元。同一小段的铁路不会多次提价。他们打算提价 $Q$ 次。\n\n学生们知道，如果他们到学校的一条最短路径中的一小段提价了，可以改变路径，使总票价不变。然而随着一条一条的铁路被提价，当居住在某个站附近的学生发现，提价后，没有任何一种方案可以从家到学校的费用和初始费用相等时，就会不满。\n\n现在地铁公司希望知道，对于每一次涨价，有多少个站，学生会因为涨价而不满呢？", "inputFormat": "第一行为三个整数 $N,M,Q$。\n\n接下来 $M$ 行，每行 $2$ 个整数 $a_i,b_i,$ 表示第 $i$ 条铁路连接的两个站。$i$ 表示铁路编号。\n\n接下来 $Q$ 行，每行一行整数 $r_j$，表示每次涨价的铁路编号。", "outputFormat": "输出共 $Q$ 行。每行一个整数表示不满的车站数量。", "hint": "### 样例解释\n\n```plain\n次数 车站2 车站3 车站4 车站5\n初始 1     1     2     2\n1    1     1     2     2\n2    1     2     2     3\n3    1     2     2     3\n4    2     2     3     3\n5    2     2     4     3\n```\n### 数据范围及约定\n\n- 对于 $20\\%$ 的数据 $N \\le 100,Q \\le 30$。\n- 对于 $40\\%$ 的数据 $Q \\le 30$。\n- 对于 $70\\%$ 的数据正确的输出结果中，不会有超过 $50$ 种不一样的整数（数据范围剧透解法系列）\n- 对于 $100\\%$ 的数据 $N \\le 100000,Q \\le M \\le 200000$。", "locale": "zh-CN", "translations": {"en": {"title": "Subway Fare Increase", "background": "", "description": "In addition to a submarine high-speed rail connecting mainland China, Taiwan, and Japan, Boai (博艾) City also has a well-developed urban rail transit system. We can model the Boai metro system as an undirected connected graph. There are $N$ metro stations and $M$ short rail segments, each connecting two different stations.\n\nThe fare policy is simple. From station A to station B, for each short segment traversed (i.e., an edge connecting two adjacent stations), the charge is $1$ Boai yuan. That is, different paths from A to B may have different fares.\n\nAssume Fanhua High School (凡华中学) is at station $1$. Students commute by metro, and they know that taking a shortest path yields the cheapest fare.\n\nHowever, the Boai metro company has been operating at a loss and plans to raise fares. One price increase changes the charge for a short segment from $1$ to $2$. The same segment will not be increased more than once. They will perform $Q$ such increases.\n\nStudents know that if a segment on one of their shortest paths is increased, they can change their route so that the total fare remains unchanged. However, as more and more segments are increased, when students living near some station find that, after the increases, there is no way to travel from home to school with a total fare equal to the initial fare, they become dissatisfied.\n\nNow the metro company wants to know, for each price increase, how many stations will have students who become dissatisfied due to the increase.", "inputFormat": "The first line contains three integers $N, M, Q$.\n\nThe next $M$ lines each contain $2$ integers $a_i, b_i$, indicating that the $i$-th rail segment connects these two stations. The integer $i$ is the segment index.\n\nThe next $Q$ lines each contain one integer $r_j$, indicating the index of the rail segment increased at step $j$.", "outputFormat": "Output $Q$ lines. Each line contains one integer, the number of dissatisfied stations.", "hint": "### Sample Explanation\n\n```plain\n次数 车站2 车站3 车站4 车站5\n初始 1     1     2     2\n1    1     1     2     2\n2    1     2     2     3\n3    1     2     2     3\n4    2     2     3     3\n5    2     2     4     3\n```\n\n### Constraints\n\n- For $20\\%$ of the testdata, $N \\le 100, Q \\le 30$.\n- For $40\\%$ of the testdata, $Q \\le 30$.\n- For $70\\%$ of the testdata, there are no more than $50$ distinct integers in the correct outputs (data range spoiler series).\n- For $100\\%$ of the testdata, $N \\le 100000, Q \\le M \\le 200000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "地铁涨价", "background": "", "description": "博艾市除了有海底高铁连接中国大陆、台湾与日本，市区里也有很成熟的轨道交通系统。我们可以认为博艾地铁系统是一个无向连通图。博艾有 $N$ 个地铁站，同时有 $M$ 小段地铁连接两个不同的站。\n\n地铁计价方式很简单。从 A 站到 B 站，每经过一小段铁路（连接直接相邻的两个点的一条边），就要收取 $1$ 博艾元。也就是说，从 A 站到 B 站，选择的路径不一样，要价也会不同。\n\n我们认为凡华中学在 $1$ 号地铁站。学生们通过地铁通勤，他们当然知道选择最短路来坐车的话，票价最便宜。\n\n然而博艾地铁公司经营不善，一直亏损，于是他们打算提价。提价一次就是将一小段铁路原来收费 $1$ 元改收 $2$ 元。同一小段的铁路不会多次提价。他们打算提价 $Q$ 次。\n\n学生们知道，如果他们到学校的一条最短路径中的一小段提价了，可以改变路径，使总票价不变。然而随着一条一条的铁路被提价，当居住在某个站附近的学生发现，提价后，没有任何一种方案可以从家到学校的费用和初始费用相等时，就会不满。\n\n现在地铁公司希望知道，对于每一次涨价，有多少个站，学生会因为涨价而不满呢？", "inputFormat": "第一行为三个整数 $N,M,Q$。\n\n接下来 $M$ 行，每行 $2$ 个整数 $a_i,b_i,$ 表示第 $i$ 条铁路连接的两个站。$i$ 表示铁路编号。\n\n接下来 $Q$ 行，每行一行整数 $r_j$，表示每次涨价的铁路编号。", "outputFormat": "输出共 $Q$ 行。每行一个整数表示不满的车站数量。", "hint": "### 样例解释\n\n```plain\n次数 车站2 车站3 车站4 车站5\n初始 1     1     2     2\n1    1     1     2     2\n2    1     2     2     3\n3    1     2     2     3\n4    2     2     3     3\n5    2     2     4     3\n```\n### 数据范围及约定\n\n- 对于 $20\\%$ 的数据 $N \\le 100,Q \\le 30$。\n- 对于 $40\\%$ 的数据 $Q \\le 30$。\n- 对于 $70\\%$ 的数据正确的输出结果中，不会有超过 $50$ 种不一样的整数（数据范围剧透解法系列）\n- 对于 $100\\%$ 的数据 $N \\le 100000,Q \\le M \\le 200000$。", "locale": "zh-CN"}}}
{"pid": "P1711", "type": "P", "difficulty": 2, "samples": [["4\n-1 -1 -1 1", "2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "2018", "USACO", "O2优化"], "title": "[USACO18FEB] Taming the Herd B", "background": "", "description": "一大清早，Farmer John 就被木材破裂的声音吵醒了。是这些奶牛们干的，她们又逃出牛棚了！\n\nFarmer John 已经厌烦了奶牛在清晨出逃，他觉得受够了：是时候采取强硬措施了。他在牛棚的墙上钉了一个计数器，追踪从上次出逃开始经过的天数。所以如果某一天早上发生了出逃事件，这一天的计数器就为 $0$；如果最近的出逃是 $3$ 天前，计数器读数就为 $3$。Farmer John 一丝不苟地记录了每一天计数器的读数。\n\n年末到了，Farmer John 准备做一些统计。他说，你们这些奶牛会付出代价的！然而意想不到的是，他的记录的一些条目竟然丢失了！\n\nFarmer John 确信他是在发生出逃的某一天开始记录的。请帮助他确定，在所有与残留记录条目一致的事件序列中，基于记录的时间，最少和最多可能发生的出逃次数。 ", "inputFormat": "输入的第一行包含一个整数 $N$（$1\\le N\\le 100$），表示从 Farmer John 开始对奶牛出逃计数器进行计数以来已经经过的天数。\n\n第二行包含 $N$ 个空格分隔的整数。第 $i$ 个整数是 $−1$，表示第 $i$ 天的记录丢失了，或者是一个非负整数 $a_i$（不超过 $100$），表示在第 $i$ 天计数器的数字是 $a_i$。", "outputFormat": "如果没有事件序列与 Farmer John 的残留记录以及他所确定的奶牛在第 $1$ 天清晨出逃这一事实相一致，输出一个整数 $−1$。否则，输出两个空格分隔的整数 $m$ 和 $M$，其中 $m$ 为所有事件序列中出逃的最少次数，$M$ 为最多次数。 ", "hint": "在这个样例中，我们可以推断第 $3$ 天必然有出逃发生。我们已经知道在第 $1$ 天也发生了出逃，所以最后不确定的只有第 $2$ 天是否发生了出逃。因此，总共发生了 $2$ 至 $3$ 次出逃。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO18FEB] Taming the Herd B", "background": "", "description": "一大清早，Farmer John 就被木材破裂的声音吵醒了。是这些奶牛们干的，她们又逃出牛棚了！\n\nFarmer John 已经厌烦了奶牛在清晨出逃，他觉得受够了：是时候采取强硬措施了。他在牛棚的墙上钉了一个计数器，追踪从上次出逃开始经过的天数。所以如果某一天早上发生了出逃事件，这一天的计数器就为 $0$；如果最近的出逃是 $3$ 天前，计数器读数就为 $3$。Farmer John 一丝不苟地记录了每一天计数器的读数。\n\n年末到了，Farmer John 准备做一些统计。他说，你们这些奶牛会付出代价的！然而意想不到的是，他的记录的一些条目竟然丢失了！\n\nFarmer John 确信他是在发生出逃的某一天开始记录的。请帮助他确定，在所有与残留记录条目一致的事件序列中，基于记录的时间，最少和最多可能发生的出逃次数。 ", "inputFormat": "输入的第一行包含一个整数 $N$（$1\\le N\\le 100$），表示从 Farmer John 开始对奶牛出逃计数器进行计数以来已经经过的天数。\n\n第二行包含 $N$ 个空格分隔的整数。第 $i$ 个整数是 $−1$，表示第 $i$ 天的记录丢失了，或者是一个非负整数 $a_i$（不超过 $100$），表示在第 $i$ 天计数器的数字是 $a_i$。", "outputFormat": "如果没有事件序列与 Farmer John 的残留记录以及他所确定的奶牛在第 $1$ 天清晨出逃这一事实相一致，输出一个整数 $−1$。否则，输出两个空格分隔的整数 $m$ 和 $M$，其中 $m$ 为所有事件序列中出逃的最少次数，$M$ 为最多次数。 ", "hint": "在这个样例中，我们可以推断第 $3$ 天必然有出逃发生。我们已经知道在第 $1$ 天也发生了出逃，所以最后不确定的只有第 $2$ 天是否发生了出逃。因此，总共发生了 $2$ 至 $3$ 次出逃。 ", "locale": "zh-CN"}}}
{"pid": "P1712", "type": "P", "difficulty": 5, "samples": [["6 3\n3 5\n1 2\n3 4\n2 2\n1 5\n1 4", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1500, 1500, 1500, 2000, 2500, 3000, 3000, 3000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2016", "线段树", "NOI", "离散化", "O2优化", "排序", "双指针 two-pointer"], "title": "[NOI2016] 区间", "background": "", "description": "在数轴上有 $n$ 个闭区间从 $1$ 至 $n$ 编号，第 $i$ 个闭区间为 $[l_i,r_i]$ 。\n\n现在要从中选出 $m$ 个区间，使得这 $m$ 个区间共同包含至少一个位置。换句话说，就是使得存在一个 $x$ ，使得对于每一个被选中的区间 $[l_i,r_i]$，都有 $l_i \\leq x \\leq r_i$ 。\n\n对于一个合法的选取方案，它的花费为被选中的最长区间长度减去被选中的最短区间长度。\n\n区间 $[l_i,r_i]$ 的长度定义为 $(r_i-l_i)$ ，即等于它的右端点的值减去左端点的值。\n\n求所有合法方案中最小的花费。如果不存在合法的方案，输出 $-1$。", "inputFormat": "第一行包含两个整数，分别代表 $n$ 和 $m$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行两个整数表示一个区间，第 $(i + 1)$ 行的整数 $l_i, r_i$ 分别代表第 $i$ 个区间的左右端点。", "outputFormat": "输出一行一个整数表示答案。\n", "hint": "#### 样例输入输出 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qoddox9k.png)\n \n 如图，当 $n=6$，$m=3$ 时，花费最小的方案是选取 $[3,5],[3,4],[1,4]$ 这三个区间，它们共同包含了 $4$ 这个位置，所以是合法的。其中最长的区间是 $[1, 4]$，最短的区间是 $[3, 4]$，所以它的花费是 $(4 - 1) - (4 - 3) = 2$。\n\n#### 数据规模与约定\n\n::cute-table{tuack}\n\n本题共 20 个测试点，各测试点信息如下表。\n| 测试点编号 | $ n= $ | $ m= $ | $ l_i,r_i $ |\n|:-:|:-:|:-:|:-:|\n| 1 | $ 20 $ | $ 9 $ | $ 0 \\le l_i \\le r_i \\le 100 $ |\n| 2 | ^ | $ 10 $ | $ 0 \\le l_i \\le r_i \\le 100 $ |\n| 3 | $ 199 $ | $ 3 $ | $ 0 \\le l_i \\le r_i \\le 100000 $ |\n| 4 | $ 200 $ | ^ | ^ |\n| 5 | $ 1000 $ | $ 2 $ | ^ |\n| 6 | $ 2000 $ | ^ | ^ |\n| 7 | $ 199 $ | $ 60 $ | $ 0 \\le l_i \\le r_i \\le 5000 $ |\n| 8 | $ 200 $ | $ 50 $ | ^ |\n| 9 | ^ | ^ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 10 | $ 1999 $ | $ 500 $ | $ 0 \\le l_i \\le r_i \\le 5000 $ |\n| 11 | $ 2000 $ | $ 400 $ | ^ |\n| 12 | ^ | $ 500 $ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 13 | $ 30000 $ | $ 2000 $ | $ 0 \\le l_i \\le r_i \\le 100000 $ |\n| 14 | $ 40000 $ | $ 1000 $ | ^ |\n| 15 | $ 50000 $ | $ 15000 $ | ^ |\n| 16 | $ 100000 $ | $ 20000 $ | ^ |\n| 17 | $ 200000 $ | ^ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 18 | $ 300000 $ | $ 50000 $ | ^ |\n| 19 | $ 400000 $ | $ 90000 $ | ^ |\n| 20 | $ 500000 $ | $ 200000 $ | ^ |\n\n对于全部的测试点，保证 $1 \\leq m \\leq n$，$1 \\leq n \\leq 5 \\times 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$0 \\leq l_i \\leq r_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2016] Intervals", "background": "", "description": "On the number line, there are $n$ closed intervals numbered from $1$ to $n$. The $i$-th closed interval is $[l_i, r_i]$.\n\nNow we need to choose $m$ intervals such that these $m$ intervals share at least one position. In other words, there exists an $x$ such that for every selected interval $[l_i, r_i]$, we have $l_i \\leq x \\leq r_i$.\n\nFor a valid selection, its cost is the length of the longest selected interval minus the length of the shortest selected interval.\n\nThe length of an interval $[l_i, r_i]$ is defined as $(r_i - l_i)$, i.e., the value of the right endpoint minus the value of the left endpoint.\n\nFind the minimum cost among all valid selections. If no valid selection exists, output $-1$.", "inputFormat": "The first line contains two integers, representing $n$ and $m$.\n\nFrom line $2$ to line $(n + 1)$, each line contains two integers representing an interval. On line $(i + 1)$, the integers $l_i, r_i$ denote the left and right endpoints of the $i$-th interval.", "outputFormat": "Output a single integer on one line representing the answer.", "hint": "#### Explanation for Sample Input/Output 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qoddox9k.png)\n\nAs shown, when $n = 6$, $m = 3$, the minimum-cost plan is to select the three intervals $[3, 5], [3, 4], [1, 4]$. They all contain position $4$, so the selection is valid. Among them, the longest interval is $[1, 4]$, and the shortest interval is $[3, 4]$, so the cost is $(4 - 1) - (4 - 3) = 2$.\n\n#### Constraints and Conventions\n\n::cute-table{tuack}\n\nThere are 20 test points in total. See the table below for details.\n| Test point ID | $ n= $ | $ m= $ | $ l_i, r_i $ |\n|:-:|:-:|:-:|:-:|\n| 1 | $ 20 $ | $ 9 $ | $ 0 \\le l_i \\le r_i \\le 100 $ |\n| 2 | ^ | $ 10 $ | $ 0 \\le l_i \\le r_i \\le 100 $ |\n| 3 | $ 199 $ | $ 3 $ | $ 0 \\le l_i \\le r_i \\le 100000 $ |\n| 4 | $ 200 $ | ^ | ^ |\n| 5 | $ 1000 $ | $ 2 $ | ^ |\n| 6 | $ 2000 $ | ^ | ^ |\n| 7 | $ 199 $ | $ 60 $ | $ 0 \\le l_i \\le r_i \\le 5000 $ |\n| 8 | $ 200 $ | $ 50 $ | ^ |\n| 9 | ^ | ^ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 10 | $ 1999 $ | $ 500 $ | $ 0 \\le l_i \\le r_i \\le 5000 $ |\n| 11 | $ 2000 $ | $ 400 $ | ^ |\n| 12 | ^ | $ 500 $ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 13 | $ 30000 $ | $ 2000 $ | $ 0 \\le l_i \\le r_i \\le 100000 $ |\n| 14 | $ 40000 $ | $ 1000 $ | ^ |\n| 15 | $ 50000 $ | $ 15000 $ | ^ |\n| 16 | $ 100000 $ | $ 20000 $ | ^ |\n| 17 | $ 200000 $ | ^ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 18 | $ 300000 $ | $ 50000 $ | ^ |\n| 19 | $ 400000 $ | $ 90000 $ | ^ |\n| 20 | $ 500000 $ | $ 200000 $ | ^ |\n\nFor all test points, it is guaranteed that $1 \\le m \\le n$, $1 \\le n \\le 5 \\times 10^5$, $1 \\le m \\le 2 \\times 10^5$, $0 \\le l_i \\le r_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2016] 区间", "background": "", "description": "在数轴上有 $n$ 个闭区间从 $1$ 至 $n$ 编号，第 $i$ 个闭区间为 $[l_i,r_i]$ 。\n\n现在要从中选出 $m$ 个区间，使得这 $m$ 个区间共同包含至少一个位置。换句话说，就是使得存在一个 $x$ ，使得对于每一个被选中的区间 $[l_i,r_i]$，都有 $l_i \\leq x \\leq r_i$ 。\n\n对于一个合法的选取方案，它的花费为被选中的最长区间长度减去被选中的最短区间长度。\n\n区间 $[l_i,r_i]$ 的长度定义为 $(r_i-l_i)$ ，即等于它的右端点的值减去左端点的值。\n\n求所有合法方案中最小的花费。如果不存在合法的方案，输出 $-1$。", "inputFormat": "第一行包含两个整数，分别代表 $n$ 和 $m$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行两个整数表示一个区间，第 $(i + 1)$ 行的整数 $l_i, r_i$ 分别代表第 $i$ 个区间的左右端点。", "outputFormat": "输出一行一个整数表示答案。\n", "hint": "#### 样例输入输出 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qoddox9k.png)\n \n 如图，当 $n=6$，$m=3$ 时，花费最小的方案是选取 $[3,5],[3,4],[1,4]$ 这三个区间，它们共同包含了 $4$ 这个位置，所以是合法的。其中最长的区间是 $[1, 4]$，最短的区间是 $[3, 4]$，所以它的花费是 $(4 - 1) - (4 - 3) = 2$。\n\n#### 数据规模与约定\n\n::cute-table{tuack}\n\n本题共 20 个测试点，各测试点信息如下表。\n| 测试点编号 | $ n= $ | $ m= $ | $ l_i,r_i $ |\n|:-:|:-:|:-:|:-:|\n| 1 | $ 20 $ | $ 9 $ | $ 0 \\le l_i \\le r_i \\le 100 $ |\n| 2 | ^ | $ 10 $ | $ 0 \\le l_i \\le r_i \\le 100 $ |\n| 3 | $ 199 $ | $ 3 $ | $ 0 \\le l_i \\le r_i \\le 100000 $ |\n| 4 | $ 200 $ | ^ | ^ |\n| 5 | $ 1000 $ | $ 2 $ | ^ |\n| 6 | $ 2000 $ | ^ | ^ |\n| 7 | $ 199 $ | $ 60 $ | $ 0 \\le l_i \\le r_i \\le 5000 $ |\n| 8 | $ 200 $ | $ 50 $ | ^ |\n| 9 | ^ | ^ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 10 | $ 1999 $ | $ 500 $ | $ 0 \\le l_i \\le r_i \\le 5000 $ |\n| 11 | $ 2000 $ | $ 400 $ | ^ |\n| 12 | ^ | $ 500 $ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 13 | $ 30000 $ | $ 2000 $ | $ 0 \\le l_i \\le r_i \\le 100000 $ |\n| 14 | $ 40000 $ | $ 1000 $ | ^ |\n| 15 | $ 50000 $ | $ 15000 $ | ^ |\n| 16 | $ 100000 $ | $ 20000 $ | ^ |\n| 17 | $ 200000 $ | ^ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 18 | $ 300000 $ | $ 50000 $ | ^ |\n| 19 | $ 400000 $ | $ 90000 $ | ^ |\n| 20 | $ 500000 $ | $ 200000 $ | ^ |\n\n对于全部的测试点，保证 $1 \\leq m \\leq n$，$1 \\leq n \\leq 5 \\times 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$0 \\leq l_i \\leq r_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1713", "type": "P", "difficulty": 7, "samples": [["4 3\n1 1\n2 3\n4 2\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "轮廓线 DP"], "title": "麦当劳叔叔的难题", "background": "", "description": "话说我们铭铭小朋友成功的回答了爸爸的问题，自然少不了要去索要些奖励，抠门的爸爸一看报纸，嘿，门口的麦当劳在搞活动，还有免费午餐哦，不过前提条件：得正确回答麦当劳叔叔的问题。\n\n问题是这样描述的：\n\n“我面前有很多个小朋友，我希望你帮我找到一个最聪明的小朋友。我心目中最聪明的就是第一个跑进麦当劳大门的，我希望你帮我找出最聪明和最不聪明的小朋友，可能的最大的到达时间差。但是，小朋友只能按照一个特殊的规则前进。小朋友面前有一个 $n\\times n$ 的格子矩阵，左下角的格子是起点，右上角的格子是大门。每个孩子每秒可以走向 上、下、左、右 前进一个格子，每个格子只能经过一次。但矩阵中间有一些障碍区，不能通过，只能绕过。”\n\n例如，$4\\times 4$ 的矩阵，格子 $(1, 1),(2, 3),(4, 2) $ 为障碍区，黑格子就是一条可行的路线。时间为 $7$。\n", "inputFormat": "第一行为两个整数 $n, m$。\n\n第二至第 $m+1$ 行里，每行描述一个障碍区。用两个整数表示 $x, y$。\n", "outputFormat": "仅一行，那个最大的时间差。\n", "hint": "$2\\le n\\le 10$，$0\\le m\\le 100$，$1\\leq x,y\\leq n$。", "locale": "zh-CN", "translations": {"en": {"title": "Ronald McDonald's Dilemma", "background": "", "description": "Mingming has just answered his dad's question correctly and, of course, wants a reward. His stingy dad spots a newspaper ad: the McDonald's at their doorstep is running a promotion—there is even a free lunch. But there is a catch: you must correctly answer Ronald McDonald's question.\n\nThe question is as follows:\n\n“There are many kids in front of me. I want you to help me find the smartest kid. In my mind, the smartest is the one who first runs into the McDonald's door. I want you to find the maximum possible difference in arrival times between the smartest and the least smart kid. However, the kids can only move according to a special rule. In front of them is an $ n \\times n $ grid. The bottom-left cell is the start, and the top-right cell is the door. Each child can move one cell per second in one of the four directions: up, down, left, or right. Each cell can be visited at most once. Some cells in the grid are obstacles and cannot be passed; they must be detoured.”\n\nFor example, in a $ 4 \\times 4 $ grid, cells $ (1, 1), (2, 3), (4, 2) $ are obstacles. The black cells indicate one feasible route. The time is $ 7 $.", "inputFormat": "The first line contains two integers $ n, m $.\n\nEach of the next $ m $ lines describes one obstacle, given by two integers $ x, y $.", "outputFormat": "Output a single line containing the maximum time difference.", "hint": "Constraints: $ 2 \\le n \\le 10 $, $ 0 \\le m \\le 100 $, $ 1 \\le x, y \\le n $.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "麦当劳叔叔的难题", "background": "", "description": "话说我们铭铭小朋友成功的回答了爸爸的问题，自然少不了要去索要些奖励，抠门的爸爸一看报纸，嘿，门口的麦当劳在搞活动，还有免费午餐哦，不过前提条件：得正确回答麦当劳叔叔的问题。\n\n问题是这样描述的：\n\n“我面前有很多个小朋友，我希望你帮我找到一个最聪明的小朋友。我心目中最聪明的就是第一个跑进麦当劳大门的，我希望你帮我找出最聪明和最不聪明的小朋友，可能的最大的到达时间差。但是，小朋友只能按照一个特殊的规则前进。小朋友面前有一个 $n\\times n$ 的格子矩阵，左下角的格子是起点，右上角的格子是大门。每个孩子每秒可以走向 上、下、左、右 前进一个格子，每个格子只能经过一次。但矩阵中间有一些障碍区，不能通过，只能绕过。”\n\n例如，$4\\times 4$ 的矩阵，格子 $(1, 1),(2, 3),(4, 2) $ 为障碍区，黑格子就是一条可行的路线。时间为 $7$。\n", "inputFormat": "第一行为两个整数 $n, m$。\n\n第二至第 $m+1$ 行里，每行描述一个障碍区。用两个整数表示 $x, y$。\n", "outputFormat": "仅一行，那个最大的时间差。\n", "hint": "$2\\le n\\le 10$，$0\\le m\\le 100$，$1\\leq x,y\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P1714", "type": "P", "difficulty": 3, "samples": [["5 2\n1 2 3 4 5", "9"], ["6 3\n1 -2 3 -4 5 -6", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["单调队列", "前缀和", "队列", "ST 表"], "title": "切蛋糕", "background": "", "description": "今天是小 Z 的生日，同学们为他带来了一块蛋糕。这块蛋糕是一个长方体，被用不同色彩分成了 $n$ 个相同的小块，每小块都有对应的幸运值。\n\n小 Z 作为寿星，自然希望吃到的蛋糕的幸运值总和最大，但小 Z 最多又只能吃 $m(m\\le n)$ 小块的蛋糕。\n\n请你帮他从这 $n$ 小块中找出**连续**的 $k(1 \\le k\\le m)$ 块蛋糕，使得其上的总幸运值最大。\n\n**形式化地**，在数列 $\\{p_n\\}$ 中，找出一个子段 $[l,r](r-l+1\\le m)$，最大化 $\\sum\\limits_{i=l}^rp_i$。", "inputFormat": "第一行两个整数 $n,m$。分别代表共有 $n$ 小块蛋糕，小 Z 最多只能吃 $m$ 小块。\n\n第二行 $n$ 个整数，第 $i$ 个整数 $p_i$ 代表第 $i$ 小块蛋糕的幸运值。", "outputFormat": "仅一行一个整数，即小 Z 能够得到的最大幸运值。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，有 $1\\le n\\le100$。\n- 对于 $100\\%$ 的数据，有 $1\\le n\\le5\\times 10^5$，$|p_i|≤500$。\n\n保证答案的绝对值在 $[0,2^{31}-1]$ 之内。", "locale": "zh-CN", "translations": {"en": {"title": "Cutting Cake", "background": "", "description": "Today is Xiao Z's birthday, and his classmates brought him a cake. The cake is a rectangular prism, divided into $n$ identical small pieces with different colors, and each small piece has a corresponding lucky value.\n\nAs the birthday person, Xiao Z naturally wants the sum of lucky values of the cake he eats to be as large as possible, but Xiao Z can eat at most $m(m\\le n)$ small pieces of cake.\n\nPlease help him choose $k(1 \\le k\\le m)$ consecutive pieces among these $n$ pieces so that their total lucky value is maximized.\n\nFormally, in the sequence $\\{p_n\\}$, find a subsegment $[l,r](r-l+1\\le m)$ that maximizes $\\sum\\limits_{i=l}^rp_i$.", "inputFormat": "The first line contains two integers $n,m$. They represent that there are $n$ small pieces in total, and Xiao Z can eat at most $m$ small pieces.\n\nThe second line contains $n$ integers. The $i$-th integer $p_i$ represents the lucky value of the $i$-th small piece of cake.", "outputFormat": "Output a single integer in one line, which is the maximum lucky value Xiao Z can obtain.", "hint": "Constraints and Conventions.\n\n- For $20\\%$ of the testdata, $1\\le n\\le100$.\n- For $100\\%$ of the testdata, $1\\le n\\le5\\times 10^5$, $|p_i|≤500$.\n\nIt is guaranteed that the absolute value of the answer is within $[0,2^{31}-1]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "切蛋糕", "background": "", "description": "今天是小 Z 的生日，同学们为他带来了一块蛋糕。这块蛋糕是一个长方体，被用不同色彩分成了 $n$ 个相同的小块，每小块都有对应的幸运值。\n\n小 Z 作为寿星，自然希望吃到的蛋糕的幸运值总和最大，但小 Z 最多又只能吃 $m(m\\le n)$ 小块的蛋糕。\n\n请你帮他从这 $n$ 小块中找出**连续**的 $k(1 \\le k\\le m)$ 块蛋糕，使得其上的总幸运值最大。\n\n**形式化地**，在数列 $\\{p_n\\}$ 中，找出一个子段 $[l,r](r-l+1\\le m)$，最大化 $\\sum\\limits_{i=l}^rp_i$。", "inputFormat": "第一行两个整数 $n,m$。分别代表共有 $n$ 小块蛋糕，小 Z 最多只能吃 $m$ 小块。\n\n第二行 $n$ 个整数，第 $i$ 个整数 $p_i$ 代表第 $i$ 小块蛋糕的幸运值。", "outputFormat": "仅一行一个整数，即小 Z 能够得到的最大幸运值。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，有 $1\\le n\\le100$。\n- 对于 $100\\%$ 的数据，有 $1\\le n\\le5\\times 10^5$，$|p_i|≤500$。\n\n保证答案的绝对值在 $[0,2^{31}-1]$ 之内。", "locale": "zh-CN"}}}
{"pid": "P1715", "type": "P", "difficulty": 5, "samples": [["7\n3 6\n17 15\n13 15\n6 12\n9 1\n2 7\n10 19", "28\n6\n1\n0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["计算几何", "2016", "USACO", "容斥原理", "分类讨论"], "title": "[USACO16DEC] Lots of Triangles P", "background": "", "description": "Farmer John is thinking of selling some of his land to earn a bit of extra income. His property contains $N$ trees ($3 \\leq N \\leq 300$), each described by a point in the 2D plane, no three of which are collinear. FJ is thinking about selling triangular lots of land defined by having trees at their vertices; there are of course $L = \\binom{N}{3}$ such lots he can consider, based on all possible triples of trees on his property.\n\nA triangular lot has value $v$ if it contains exactly $v$ trees in its interior (the trees on the corners do not count, and note that there are no trees on the boundaries since no three trees are collinear). For every $v = 0 \\ldots N-3$, please help FJ determine how many of his $L$ potential lots have value $v$.", "inputFormat": "The first line of input contains $N$.\n\nThe following $N$ lines contain the $x$ and $y$ coordinates of a single tree; these are both integers in the range $0 \\ldots 1,000,000$.", "outputFormat": "Output $N-2$ lines, where output line $i$ contains a count of the number of lots having value $i-1$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO16DEC] Lots of Triangles P", "background": "", "description": "Farmer John is thinking of selling some of his land to earn a bit of extra income. His property contains $N$ trees ($3 \\leq N \\leq 300$), each described by a point in the 2D plane, no three of which are collinear. FJ is thinking about selling triangular lots of land defined by having trees at their vertices; there are of course $L = \\binom{N}{3}$ such lots he can consider, based on all possible triples of trees on his property.\n\nA triangular lot has value $v$ if it contains exactly $v$ trees in its interior (the trees on the corners do not count, and note that there are no trees on the boundaries since no three trees are collinear). For every $v = 0 \\ldots N-3$, please help FJ determine how many of his $L$ potential lots have value $v$.", "inputFormat": "The first line of input contains $N$.\n\nThe following $N$ lines contain the $x$ and $y$ coordinates of a single tree; these are both integers in the range $0 \\ldots 1,000,000$.", "outputFormat": "Output $N-2$ lines, where output line $i$ contains a count of the number of lots having value $i-1$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO16DEC] Lots of Triangles P", "background": "", "description": "Farmer John 正在考虑出售他的一部分土地以赚取一些额外收入。他的财产包含 $N$ 棵树（$3 \\leq N \\leq 300$），每棵树由二维平面中的一个点描述，且任意三棵树不共线。FJ 正在考虑出售由三棵树作为顶点定义的三角形地块；显然，他可以考虑的此类地块数量为 $L = \\binom{N}{3}$，基于他财产中所有可能的三棵树组合。\n\n一个三角形地块的价值为 $v$，如果它的内部恰好包含 $v$ 棵树（顶点上的树不计入，且由于没有三棵树共线，边界上也没有树）。对于每个 $v = 0 \\ldots N-3$，请帮助 FJ 确定他的 $L$ 个潜在地块中有多少个地块的价值为 $v$。", "inputFormat": "输入的第一行包含 $N$。\n\n接下来的 $N$ 行每行包含一棵树的 $x$ 和 $y$ 坐标；这些坐标都是 $0 \\ldots 1,000,000$ 范围内的整数。", "outputFormat": "输出 $N-2$ 行，其中第 $i$ 行输出价值为 $i-1$ 的地块数量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1716", "type": "P", "difficulty": 2, "samples": [["5\n10\n-1\n3\n3\n-9\n", "10\n-9\n3\n-1\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "排序"], "title": "双调序列", "background": "", "description": "电脑组的童鞋们经常玩一些智力 PK 小游戏，某月某日，发源于小朋友又发明了一种新的序列：双调序列，所谓的双调呢主要是满足如下条件描述：\n\n假定有 $n$（$n \\le 1000$）个整数（都在 `long int` 范围内，即 $-2147483648 \\sim 2147483647$），双调序列的第一个数是 $n$ 个整数中的最大数，第二个数是 $n$ 个整数中的最小数，第三个数是 $n$ 个数中的第二大数，第四个数是 $n$ 个数中的第二小数……取过的数不能再取，依次类推，直到结束。\n\n聪明的你听完描述就抿嘴笑了吧？那就请你用程序正确的帮他找出这 $n$ 个数的双调序列。\n", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行给出了题目中所述的 $n$ 个整数，每行包含一个整数。\n", "outputFormat": "有 $n$ 行，每行为一个整数，是满足条件的双调序列\n", "hint": "对于 $100 \\%$ 的数据，$1 \\le n \\le 1000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Max-Min Alternating Sequence", "background": "", "description": "Students in the computer group often play small brain-teaser PK games. One day, a student invented a new sequence: the \"Max-Min alternating sequence,\" defined as follows:\n\nSuppose there are $n$ ($n \\le 1000$) integers (all within the `long int` range, i.e., $-2147483648 \\sim 2147483647$). The first number of the sequence is the maximum among the $n$ integers, the second number is the minimum, the third number is the second largest, the fourth number is the second smallest, and so on. Numbers that have been taken cannot be chosen again, proceeding until all numbers are used.\n\nPlease write a program to produce this sequence for the given $n$ integers.", "inputFormat": "The first line contains an integer $n$.\n\nThe next $n$ lines contain the $n$ integers described above, one integer per line.", "outputFormat": "Output $n$ lines, each containing one integer, forming the required Max-Min alternating sequence.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "双调序列", "background": "", "description": "电脑组的童鞋们经常玩一些智力 PK 小游戏，某月某日，发源于小朋友又发明了一种新的序列：双调序列，所谓的双调呢主要是满足如下条件描述：\n\n假定有 $n$（$n \\le 1000$）个整数（都在 `long int` 范围内，即 $-2147483648 \\sim 2147483647$），双调序列的第一个数是 $n$ 个整数中的最大数，第二个数是 $n$ 个整数中的最小数，第三个数是 $n$ 个数中的第二大数，第四个数是 $n$ 个数中的第二小数……取过的数不能再取，依次类推，直到结束。\n\n聪明的你听完描述就抿嘴笑了吧？那就请你用程序正确的帮他找出这 $n$ 个数的双调序列。\n", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行给出了题目中所述的 $n$ 个整数，每行包含一个整数。\n", "outputFormat": "有 $n$ 行，每行为一个整数，是满足条件的双调序列\n", "hint": "对于 $100 \\%$ 的数据，$1 \\le n \\le 1000$。\n", "locale": "zh-CN"}}}
{"pid": "P1717", "type": "P", "difficulty": 4, "samples": [["2\n1\n10 1\n2 5\n2\n", "31"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "堆"], "title": "钓鱼", "background": null, "description": "话说发源于小朋友精心设计的游戏被电脑组的童鞋们藐杀之后非常不爽，为了表示安慰和鼓励，VIP999 决定请他吃一次“年年大丰收”，为了表示诚意，他还决定亲自去钓鱼。\n\n但是，因为还要准备 NOIP2013, z 老师只给了他 $H$ 个小时的空余时间，假设有 $n$ 个鱼塘都在一条水平路边，从左边到右编号为 $1,2,3\\dots n$ 。\n\nVIP 是个很讲究效率的孩子，他希望用这些时间钓到尽量多的鱼。他从湖 $1$ 出发，向右走，有选择的在一些湖边停留一定的时间钓鱼，最后在某一个湖边结束钓鱼。他测出从第 $i$ 个湖到 $i+1$ 个湖需要走 $5 \\times t_i$ 分钟的路，还测出在第 $i$ 个湖边停留，第一个 $5$ 分钟可以钓到鱼 $f_i$，以后再每钓 $5$ 分钟鱼，鱼量减少 $d_i$。为了简化问题，他假定没有其他人钓鱼，也不会有其他因素影响他钓到期望数量的鱼。请编程求出能钓最多鱼的数量。", "inputFormat": "第一行：湖的数量 $n$。\n\n第二行：时间 $H$（小时）。\n\n第三行：$n$ 个数，$f_1,f_2,\\dots,f_n$。\n\n第四行：$n$ 个数，$d_1,d_2,\\dots,d_n$。\n\n第五行：$n-1$ 个数，$t_1,t_2,\\dots,t_{n-1}$", "outputFormat": "一个数，所能钓鱼的最大数量。", "hint": "数据范围：$1\\le H \\le 16,2\\le n \\le 25,1\\le f_i\\le 200,0\\le d_i\\le 20,1\\le t_i\\le 20$。", "locale": "zh-CN", "translations": {"en": {"title": "Fishing", "background": "", "description": "After the Computer Group classmates easily beat a carefully designed game made by a younger kid, he felt very upset. To comfort and encourage him, VIP999 decided to treat him to \"Niannian Dafengshou\" (pinyin), and to show sincerity, he also decided to go fishing himself.\n\nHowever, since he still needs to prepare for NOIP 2013, Teacher z only gave him $H$ hours of free time. Suppose there are $n$ fish ponds along a horizontal road, numbered from left to right as $1, 2, 3, \\dots, n$.\n\nVIP is very efficient. He wants to catch as many fish as possible within this time. He starts from lake $1$ and walks to the right, optionally stopping at some lakes to fish for some time, and finally ends fishing at some lake. He measured that walking from lake $i$ to lake $i+1$ takes $5 \\times t_i$ minutes, and when staying at lake $i$, the first $5$ minutes yield $f_i$ fish. After that, for every additional $5$ minutes of fishing, the number of fish decreases by $d_i$. To simplify the problem, assume there are no other anglers and no other factors affecting the expected number of fish he catches. Please write a program to compute the maximum number of fish he can catch.", "inputFormat": "- Line 1: The number of lakes $n$.\n- Line 2: Time $H$ (hours).\n- Line 3: $n$ numbers: $f_1, f_2, \\dots, f_n$.\n- Line 4: $n$ numbers: $d_1, d_2, \\dots, d_n$.\n- Line 5: $n - 1$ numbers: $t_1, t_2, \\dots, t_{n-1}$.", "outputFormat": "One integer: the maximum number of fish that can be caught.", "hint": "Constraints: $1 \\le H \\le 16$, $2 \\le n \\le 25$, $1 \\le f_i \\le 200$, $0 \\le d_i \\le 20$, $1 \\le t_i \\le 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "钓鱼", "background": null, "description": "话说发源于小朋友精心设计的游戏被电脑组的童鞋们藐杀之后非常不爽，为了表示安慰和鼓励，VIP999 决定请他吃一次“年年大丰收”，为了表示诚意，他还决定亲自去钓鱼。\n\n但是，因为还要准备 NOIP2013, z 老师只给了他 $H$ 个小时的空余时间，假设有 $n$ 个鱼塘都在一条水平路边，从左边到右编号为 $1,2,3\\dots n$ 。\n\nVIP 是个很讲究效率的孩子，他希望用这些时间钓到尽量多的鱼。他从湖 $1$ 出发，向右走，有选择的在一些湖边停留一定的时间钓鱼，最后在某一个湖边结束钓鱼。他测出从第 $i$ 个湖到 $i+1$ 个湖需要走 $5 \\times t_i$ 分钟的路，还测出在第 $i$ 个湖边停留，第一个 $5$ 分钟可以钓到鱼 $f_i$，以后再每钓 $5$ 分钟鱼，鱼量减少 $d_i$。为了简化问题，他假定没有其他人钓鱼，也不会有其他因素影响他钓到期望数量的鱼。请编程求出能钓最多鱼的数量。", "inputFormat": "第一行：湖的数量 $n$。\n\n第二行：时间 $H$（小时）。\n\n第三行：$n$ 个数，$f_1,f_2,\\dots,f_n$。\n\n第四行：$n$ 个数，$d_1,d_2,\\dots,d_n$。\n\n第五行：$n-1$ 个数，$t_1,t_2,\\dots,t_{n-1}$", "outputFormat": "一个数，所能钓鱼的最大数量。", "hint": "数据范围：$1\\le H \\le 16,2\\le n \\le 25,1\\le f_i\\le 200,0\\le d_i\\le 20,1\\le t_i\\le 20$。", "locale": "zh-CN"}}}
{"pid": "P1718", "type": "P", "difficulty": 2, "samples": [["5\r\n1 3\r\n3 2\r\n2 4\r\n4 5\r\n5 1\r\n1 4\r\n3 4\r\n", "1 3 2 4 5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "图形复原", "background": "", "description": "HWX 小朋友对几何的热爱在电脑组是出了名的，号称“每题必解”，这天，LXC 在玩 logo 的时候突然想到了一个题目，刚好可以去测试一下他封号的虚实，于是，他 logo 编程画了一个 $n$ 边形，并且将 $n$ 个顶点用 $1, 2, 3, \\ldots, n$ 这 $n$ 个连续自然数随手编了个号，为了增加难度，他又画了一些不相交的对角线。如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4g8ij0r9.png)\n\n他把所有的边和对角线都写在一张纸上，对于上图，他写了：$(1, 3)$、$(3, 2)$、$(2, 4)$、$(4, 5)$、$(5, 1)$、$(1, 4)$、$(3, 4)$。正得意的时候，电脑突然自动重启了，郁闷的是，他忘记保存刚才的 logo 程序了，此刻的他很想利用纸上记录的信息将这个 $n$ 边形的编号复原，电脑组的你能帮助他吗？\n", "inputFormat": "第一行 $n$（$n \\le 50$）\n\n下面若干行，每行两个数 $a, b$，表示纸上记录的信息。\n", "outputFormat": "仅一行，按字典序较小的顺序依次输出顶点的编号。对于上面的例子，你的输出应该是 `1 3 2 4 5`。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Polygon Label Restoration", "background": "", "description": "HWX is well-known in the computer group for his love of geometry and is reputed to \"solve every problem.\" One day, while LXC was playing with Logo, he suddenly thought of a problem that could test HWX’s reputation. He used Logo to draw an $n$-gon and casually labeled its $n$ vertices with the consecutive natural numbers $1, 2, 3, \\ldots, n$. To increase the difficulty, he also drew some non-intersecting diagonals. As shown in the figure:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4g8ij0r9.png)\n\nHe wrote down all the sides and diagonals on a piece of paper. For the figure above, he wrote: $(1, 3)$, $(3, 2)$, $(2, 4)$, $(4, 5)$, $(5, 1)$, $(1, 4)$, $(3, 4)$. Just when he was pleased with himself, the computer suddenly rebooted automatically. Unfortunately, he had forgotten to save the Logo program. Now he wants to use the recorded information on the paper to restore the labeling of the $n$-gon. Can you help him?", "inputFormat": "The first line contains $n$ ($n \\le 50$).\n\nThe following lines each contain two integers $a, b$, representing one recorded segment (either a side or a diagonal). Input continues until EOF.", "outputFormat": "Output a single line listing the labels of the vertices in order around the polygon. If both directions are possible, output the lexicographically smaller sequence. For the example above, your output should be `1 3 2 4 5`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "图形复原", "background": "", "description": "HWX 小朋友对几何的热爱在电脑组是出了名的，号称“每题必解”，这天，LXC 在玩 logo 的时候突然想到了一个题目，刚好可以去测试一下他封号的虚实，于是，他 logo 编程画了一个 $n$ 边形，并且将 $n$ 个顶点用 $1, 2, 3, \\ldots, n$ 这 $n$ 个连续自然数随手编了个号，为了增加难度，他又画了一些不相交的对角线。如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4g8ij0r9.png)\n\n他把所有的边和对角线都写在一张纸上，对于上图，他写了：$(1, 3)$、$(3, 2)$、$(2, 4)$、$(4, 5)$、$(5, 1)$、$(1, 4)$、$(3, 4)$。正得意的时候，电脑突然自动重启了，郁闷的是，他忘记保存刚才的 logo 程序了，此刻的他很想利用纸上记录的信息将这个 $n$ 边形的编号复原，电脑组的你能帮助他吗？\n", "inputFormat": "第一行 $n$（$n \\le 50$）\n\n下面若干行，每行两个数 $a, b$，表示纸上记录的信息。\n", "outputFormat": "仅一行，按字典序较小的顺序依次输出顶点的编号。对于上面的例子，你的输出应该是 `1 3 2 4 5`。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1719", "type": "P", "difficulty": 3, "samples": [["4\n0 -2 -7 0\n 9 2 -6 2\n-4 1 -4  1 \n-1 8  0 -2\n", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "枚举", "前缀和"], "title": "最大加权矩形", "background": null, "description": "为了更好地备战 NOIP 2013，电脑组的几个女孩子 LYQ,ZSC,ZHQ 认为：我们不光需要机房，我们还需要运动。于是她们决定找校长申请一块电脑组的课余运动场地。听说她们都是电脑组的高手，校长没有马上答应他们，而是先给她们出了一道数学题，并告诉她们，她们能获得的运动场地的面积就是她们能找到的这个最大的数字。\n\n校长给她们一个大小为 $n\\times n$ 的矩阵，矩阵中的每一个元素都有一个整数权值，要她们求出该矩阵中的最大加权矩形（即从中找一大小不限的矩形，使其中包含的所有元素的权值和最大）中所有元素的权值和，且矩阵中每个元素的权值均在区间 $[-127,127]$ 内。\n\n几个女孩子有点犯难了，于是就找到了电脑组精打细算的 HZH,TZY 小朋友帮忙计算，但是遗憾的是，他们的答案都不一样。涉及土地的事情我们可不能含糊，你能帮忙计算出校长所给的矩形中加权和最大的矩形吗？", "inputFormat": "第一行包含一个正整数 $n$。\n\n接下来 $n$ 行每行包含 $n$ 个整数，表示给定的矩阵。", "outputFormat": "输出一行一个整数，表示该矩阵的最大加权矩形中所有元素的权值和。", "hint": "### 样例解释\n该矩阵中的最大加权矩形为\n```text\n9  2\n-4  1\n-1  8\n```\n它们的和为 $15$。\n### 数据范围\n对于 $100\\%$ 的数据，$1 \\leq n\\le 120$。", "locale": "zh-CN", "translations": {"en": {"title": "Maximum Weighted Rectangle", "background": null, "description": "To better prepare for NOIP 2013, several girls from the computer group—LYQ, ZSC, and ZHQ—believed that they needed not only a computer room but also physical exercise. So they decided to apply to the principal for an extracurricular sports field for their group. Hearing that they were all skilled members of the computer group, the principal did not immediately agree but first gave them a math problem. He told them that the area of the sports field they could obtain would be the largest number they could find from the problem.\n\nThe principal gave them an $n \\times n$ matrix where each element has an integer weight. They need to find the maximum weighted rectangle in the matrix (i.e., find a rectangle of any size such that the sum of all elements it contains is maximized) and output the sum of all elements in that rectangle. The weight of each element in the matrix is within the range $[-127, 127]$.\n\nThe girls found this a bit challenging, so they sought help from two meticulous young members of the computer group, HZH and TZY. Unfortunately, their answers differed. We cannot afford to be sloppy when it comes to land matters. Can you help calculate the maximum weighted rectangle in the principal's matrix?", "inputFormat": "The first line contains a positive integer $n$.\n\nThe next $n$ lines each contain $n$ integers, representing the given matrix.", "outputFormat": "Output a single integer representing the sum of all elements in the maximum weighted rectangle of the matrix.", "hint": "### Explanation\nThe maximum weighted rectangle in this matrix is:\n```text\n9  2\n-4  1\n-1  8\n```\nTheir sum is $15$.\n### Data Range\nFor $100\\%$ of the data, $1 \\le n \\le 120$.\n\nTranslated by Kimi K2 Thinking.", "locale": "en"}, "zh-CN": {"title": "最大加权矩形", "background": null, "description": "为了更好地备战 NOIP 2013，电脑组的几个女孩子 LYQ,ZSC,ZHQ 认为：我们不光需要机房，我们还需要运动。于是她们决定找校长申请一块电脑组的课余运动场地。听说她们都是电脑组的高手，校长没有马上答应他们，而是先给她们出了一道数学题，并告诉她们，她们能获得的运动场地的面积就是她们能找到的这个最大的数字。\n\n校长给她们一个大小为 $n\\times n$ 的矩阵，矩阵中的每一个元素都有一个整数权值，要她们求出该矩阵中的最大加权矩形（即从中找一大小不限的矩形，使其中包含的所有元素的权值和最大）中所有元素的权值和，且矩阵中每个元素的权值均在区间 $[-127,127]$ 内。\n\n几个女孩子有点犯难了，于是就找到了电脑组精打细算的 HZH,TZY 小朋友帮忙计算，但是遗憾的是，他们的答案都不一样。涉及土地的事情我们可不能含糊，你能帮忙计算出校长所给的矩形中加权和最大的矩形吗？", "inputFormat": "第一行包含一个正整数 $n$。\n\n接下来 $n$ 行每行包含 $n$ 个整数，表示给定的矩阵。", "outputFormat": "输出一行一个整数，表示该矩阵的最大加权矩形中所有元素的权值和。", "hint": "### 样例解释\n该矩阵中的最大加权矩形为\n```text\n9  2\n-4  1\n-1  8\n```\n它们的和为 $15$。\n### 数据范围\n对于 $100\\%$ 的数据，$1 \\leq n\\le 120$。", "locale": "zh-CN"}}}
{"pid": "P1720", "type": "P", "difficulty": 1, "samples": [["6", "8.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "递推", "洛谷原创", "Fibonacci 数列"], "title": "月落乌啼算钱（斐波那契数列）", "background": "（本道题目木有隐藏歌曲……不用猜了……）\n\n《爱与愁的故事第一弹·heartache》最终章。\n\n吃完 pizza，月落乌啼知道超出自己的预算了。为了不在爱与愁大神面前献丑，只好还是硬着头皮去算钱……\n", "description": "算完钱后，月落乌啼想着：“你坑我！”于是当爱与愁大神问多少钱时，月落乌啼说了一堆乱码。爱与愁大神说：“算了算了，我只问第 $n$ 样菜价格多少？”月落乌啼写出了：\n\n$$F_n=\\dfrac{\\left(\\frac{1+\\sqrt{5}}{2}\\right)^n-\\left(\\frac{1-\\sqrt{5}}{2}\\right)^n}{\\sqrt{5}}$$\n\n由于爱与愁大神学过编程，于是就用 $1$ 分钟的时间求出了 $F_n$ 的结果。月落乌啼为此大吃一惊。你能学学爱与愁大神求出 $F_n$ 的值吗？\n\n", "inputFormat": "一行一个自然数 $n$。", "outputFormat": "只有 $1$ 行一个实数 $F_n$，保留两位小数。", "hint": "对于所有数据：$0 \\leq n\\leq 48$。", "locale": "zh-CN", "translations": {"en": {"title": "Yue Luo Wu Ti Counts Money (Fibonacci Sequence)", "background": "(This problem has no hidden song... no need to guess.)\n\nThe final chapter of \"The Story of Love and Sorrow, Part 1 · heartache.\"\n\nAfter eating pizza, Yue Luo Wu Ti knew he had gone over his budget. To avoid embarrassing himself in front of Ai Yu Chou, he braced himself to settle the bill.", "description": "After paying, Yue Luo Wu Ti thought, \"You ripped me off!\" So when Ai Yu Chou asked how much it cost, Yue Luo Wu Ti replied with a bunch of gibberish. Ai Yu Chou said, \"Forget it, I only ask: what is the price of the $n$-th dish?\" Yue Luo Wu Ti wrote:\n\n$$F_n=\\dfrac{\\left(\\frac{1+\\sqrt{5}}{2}\\right)^n-\\left(\\frac{1-\\sqrt{5}}{2}\\right)^n}{\\sqrt{5}}$$\n\nSince Ai Yu Chou had studied programming, he computed $F_n$ in $1$ minute. Yue Luo Wu Ti was shocked. Can you, like Ai Yu Chou, compute the value of $F_n$?", "inputFormat": "One line containing a non-negative integer $n$.", "outputFormat": "One line containing a real number $F_n$, with two decimal places.", "hint": "For all testdata: $0 \\leq n \\leq 48$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "月落乌啼算钱（斐波那契数列）", "background": "（本道题目木有隐藏歌曲……不用猜了……）\n\n《爱与愁的故事第一弹·heartache》最终章。\n\n吃完 pizza，月落乌啼知道超出自己的预算了。为了不在爱与愁大神面前献丑，只好还是硬着头皮去算钱……\n", "description": "算完钱后，月落乌啼想着：“你坑我！”于是当爱与愁大神问多少钱时，月落乌啼说了一堆乱码。爱与愁大神说：“算了算了，我只问第 $n$ 样菜价格多少？”月落乌啼写出了：\n\n$$F_n=\\dfrac{\\left(\\frac{1+\\sqrt{5}}{2}\\right)^n-\\left(\\frac{1-\\sqrt{5}}{2}\\right)^n}{\\sqrt{5}}$$\n\n由于爱与愁大神学过编程，于是就用 $1$ 分钟的时间求出了 $F_n$ 的结果。月落乌啼为此大吃一惊。你能学学爱与愁大神求出 $F_n$ 的值吗？\n\n", "inputFormat": "一行一个自然数 $n$。", "outputFormat": "只有 $1$ 行一个实数 $F_n$，保留两位小数。", "hint": "对于所有数据：$0 \\leq n\\leq 48$。", "locale": "zh-CN"}}}
