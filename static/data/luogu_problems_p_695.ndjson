{"pid": "P15087", "type": "P", "difficulty": 3, "samples": [["18 2", "4 5"], ["4 0", "2 2"], ["8 3", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "数论", "Special Judge", "最大公约数 gcd", "UOI（乌克兰）"], "title": "[UOI 2025 II Stage] Area of the Cake", "background": "", "description": "Vus the Cossack and Us the Cossack are playing a game on a cake in the shape of a rectangle with dimensions $n \\times m$.\n\nThey take turns (Vus starts), cutting a square piece from the cake with the maximum possible side length such that three of the four sides of the square coincide with the sides of the cake at the beginning of the turn. The player then takes this piece for themselves. If the cake is square, the player takes the entire remaining cake.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/unxepv2o.png)\n\nCutting the cake $4 \\times 5$. The pieces of cake outlined in red are cut by Vus, and those in blue are cut by Us.\n:::\n\nWhen the entire cake has been successfully divided, it turns out that the sum of the areas of the squares that Vus took is $p$, and Us took $q$.\n\nThe Cossacks got so caught up in the game that they forgot the size of the cake, so they asked you for help. Find any possible dimensions of the initial cake.", "inputFormat": "The first line contains two integers $p$ and $q$ $(0\\leq p,q\\leq10^{12}; p+q>0)$.", "outputFormat": "Output two integers $n$ and $m$ --- the dimensions of the initial cake. If there are multiple correct answers, output any pair.\n\nIf such a cake does not exist, output $-1$.", "hint": "An illustration of the first example is in the legend.\n\nIn the second example, a cake of size $2\\times 2$ satisfies the condition because then Vus will take the entire cake of area $4$ on his first move.", "locale": "en", "translations": {"en": {"title": "[UOI 2025 II Stage] Area of the Cake", "background": "", "description": "Vus the Cossack and Us the Cossack are playing a game on a cake in the shape of a rectangle with dimensions $n \\times m$.\n\nThey take turns (Vus starts), cutting a square piece from the cake with the maximum possible side length such that three of the four sides of the square coincide with the sides of the cake at the beginning of the turn. The player then takes this piece for themselves. If the cake is square, the player takes the entire remaining cake.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/unxepv2o.png)\n\nCutting the cake $4 \\times 5$. The pieces of cake outlined in red are cut by Vus, and those in blue are cut by Us.\n:::\n\nWhen the entire cake has been successfully divided, it turns out that the sum of the areas of the squares that Vus took is $p$, and Us took $q$.\n\nThe Cossacks got so caught up in the game that they forgot the size of the cake, so they asked you for help. Find any possible dimensions of the initial cake.", "inputFormat": "The first line contains two integers $p$ and $q$ $(0\\leq p,q\\leq10^{12}; p+q>0)$.", "outputFormat": "Output two integers $n$ and $m$ --- the dimensions of the initial cake. If there are multiple correct answers, output any pair.\n\nIf such a cake does not exist, output $-1$.", "hint": "An illustration of the first example is in the legend.\n\nIn the second example, a cake of size $2\\times 2$ satisfies the condition because then Vus will take the entire cake of area $4$ on his first move.", "locale": "en"}, "zh-CN": {"title": "[UOI 2025 II Stage] Area of the Cake", "background": "", "description": "哥萨克人 Vus 和哥萨克人 Us 正在一块尺寸为 $n \\times m$ 的矩形蛋糕上玩游戏。\n\n他们轮流行动（Vus 先手），从蛋糕上切下一个尽可能大的正方形块，使得该正方形的四条边中有三条在回合开始时与蛋糕的边重合。然后，该玩家拿走这块蛋糕。如果蛋糕本身就是正方形，则该玩家拿走剩下的整块蛋糕。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/unxepv2o.png)\n\n切割 $4 \\times 5$ 的蛋糕。红色边框的蛋糕块由 Vus 切下，蓝色边框的由 Us 切下。\n:::\n\n当整块蛋糕被成功分割后，Vus 拿走的正方形面积总和为 $p$，Us 拿走的为 $q$。\n\n哥萨克们玩得太投入，以至于忘记了蛋糕的尺寸，于是他们向你求助。请找出任意可能的初始蛋糕尺寸。\n", "inputFormat": "第一行包含两个整数 $p$ 和 $q$（$0\\leq p,q\\leq10^{12}; p+q>0$）。\n", "outputFormat": "输出两个整数 $n$ 和 $m$ ——初始蛋糕的尺寸。如果有多个正确答案，输出任意一对即可。\n\n如果这样的蛋糕不存在，输出 $-1$。", "hint": "第一个示例的示意图已在题目描述中给出。\n\n在第二个示例中，一块 $2\\times 2$ 的蛋糕满足条件，因为 Vus 会在他的第一步拿走面积为 $4$ 的整块蛋糕。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15088", "type": "P", "difficulty": 6, "samples": [["4\n6\n015423\n7\n1235212\n4\n1111\n6\n156156", "Yes\nYes\nNo\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "博弈论", "2025", "Ad-hoc", "UOI（乌克兰）"], "title": "[UOI 2025 II Stage] Digital Game", "background": "", "description": "Vus the Cossack and Us the Cossack are playing a game on a string $s$ of length $n$, consisting of digits $0$-$9$.\n\nThe players take turns (Vus starts) removing any digit from the string $s$. If at any moment there are two identical digits next to each other in the string, Us wins. If all digits are removed and Us has not won, then Vus wins.\n\nVus the Cossack is so impatient that even before the game starts, he wants to know if he can win with optimal play (when both players always play to win) against Us, and he has asked you to find this out.", "inputFormat": "The first line contains $t$ $(1\\leq t \\leq 10)$ --- the number of subtests.\n\nIn each test case:\n\nThe first line contains a single integer $n$ $(1\\leq n \\leq 10^6)$.\n\nThe second line contains a string $s$ of length $n$, consisting only of digits $0$-$9$.\n\nIt is guaranteed that the sum of $n$ across all subtests does not exceed $10^6$.", "outputFormat": "For each of the $t$ lines, output $\\tt{Yes}$ if Cossack Vus can win; or $\\tt{No}$ otherwise.", "hint": "In the first example, two identical digits will never be next to each other, as each digit appears no more than once.\n\nIn the second example, Vus can take the last $2$. Then, if Us takes $1$ or $2$, Vus takes $2$ or $1$ respectively, and then all digits become different; thus, Vus will win. However, if Us takes $3$ or $5$, then Vus will take any $2$ first, and then any $1$.\n\nIn the third example, Us wins even before the game starts.\n\n### Scoring\n\n- ($8$ points): the number of different digits $\\leq 2$;\n- ($8$ points): the number of different digits $\\leq 5$;\n- ($6$ points): the number of different digits $\\leq 7$;\n- ($8$ points): only one digit appears more than once;\n- ($7$ points): if $s_l=s_r, s_i=s_j $ and $s_i \\neq s_l$ $(l\\neq r; i\\neq j)$, then the intervals $[l, r]$ and $[i, j]$ do not overlap;\n- ($7$ points): $n \\leq 4$;\n- ($6$ points): $n \\leq 8$;\n- ($6$ points): $n \\leq 12$;\n- ($6$ points): $n \\leq 15$;\n- ($38$ points): no additional restrictions.", "locale": "en", "translations": {"en": {"title": "[UOI 2025 II Stage] Digital Game", "background": "", "description": "Vus the Cossack and Us the Cossack are playing a game on a string $s$ of length $n$, consisting of digits $0$-$9$.\n\nThe players take turns (Vus starts) removing any digit from the string $s$. If at any moment there are two identical digits next to each other in the string, Us wins. If all digits are removed and Us has not won, then Vus wins.\n\nVus the Cossack is so impatient that even before the game starts, he wants to know if he can win with optimal play (when both players always play to win) against Us, and he has asked you to find this out.", "inputFormat": "The first line contains $t$ $(1\\leq t \\leq 10)$ --- the number of subtests.\n\nIn each test case:\n\nThe first line contains a single integer $n$ $(1\\leq n \\leq 10^6)$.\n\nThe second line contains a string $s$ of length $n$, consisting only of digits $0$-$9$.\n\nIt is guaranteed that the sum of $n$ across all subtests does not exceed $10^6$.", "outputFormat": "For each of the $t$ lines, output $\\tt{Yes}$ if Cossack Vus can win; or $\\tt{No}$ otherwise.", "hint": "In the first example, two identical digits will never be next to each other, as each digit appears no more than once.\n\nIn the second example, Vus can take the last $2$. Then, if Us takes $1$ or $2$, Vus takes $2$ or $1$ respectively, and then all digits become different; thus, Vus will win. However, if Us takes $3$ or $5$, then Vus will take any $2$ first, and then any $1$.\n\nIn the third example, Us wins even before the game starts.\n\n### Scoring\n\n- ($8$ points): the number of different digits $\\leq 2$;\n- ($8$ points): the number of different digits $\\leq 5$;\n- ($6$ points): the number of different digits $\\leq 7$;\n- ($8$ points): only one digit appears more than once;\n- ($7$ points): if $s_l=s_r, s_i=s_j $ and $s_i \\neq s_l$ $(l\\neq r; i\\neq j)$, then the intervals $[l, r]$ and $[i, j]$ do not overlap;\n- ($7$ points): $n \\leq 4$;\n- ($6$ points): $n \\leq 8$;\n- ($6$ points): $n \\leq 12$;\n- ($6$ points): $n \\leq 15$;\n- ($38$ points): no additional restrictions.", "locale": "en"}, "zh-CN": {"title": "[UOI 2025 II Stage] Digital Game", "background": "", "description": "哥萨克人 Vus 和哥萨克人 Us 正在一个长度为 $n$、由数字 $0$-$9$ 组成的字符串 $s$ 上玩游戏。\n\n玩家轮流行动（Vus 先手），从字符串 $s$ 中移除任意一个数字。如果在任意时刻字符串中存在两个相邻且相同的数字，则 Us 获胜。如果所有数字都被移除而 Us 尚未获胜，则 Vus 获胜。\n\n哥萨克人 Vus 非常没耐心，甚至想在游戏开始前就知道，在双方都采取最优策略（始终以获胜为目标）的情况下，他是否能战胜 Us。他请你帮他找出答案。", "inputFormat": "-   第一行包含 $t$（$1\\leq t \\leq 10$）——表示子测试用例的数量。\n-   每个测试用例：\n    -   第一行包含一个整数 $n$（$1\\leq n \\leq 10^6$）。\n    -   第二行包含一个长度为 $n$ 的字符串 $s$，仅由数字 $0$-$9$ 组成。\n\n保证所有子测试用例的 $n$ 之和不超过 $10^6$。", "outputFormat": "对于每个测试用例，输出一行：如果哥萨克人 Vus 能获胜，输出 `Yes`；否则输出 `No`。\n", "hint": "在第一个示例中，永远不会出现两个相邻的相同数字，因为每个数字最多出现一次。\n\n在第二个示例中，Vus 可以先取走最后一个 $2$。然后，如果 Us 取 $1$ 或 $2$，Vus 就分别取 $2$ 或 $1$，之后所有数字都互不相同，因此 Vus 将获胜。但如果 Us 取 $3$ 或 $5$，那么 Vus 会先取任意一个 $2$，然后取任意一个 $1$。\n\n在第三个示例中，Us 甚至在游戏开始前就已经获胜了。\n\n### 评分细则\n\n-   （$8$ 分）：不同数字的数量 $\\leq 2$；\n-   （$8$ 分）：不同数字的数量 $\\leq 5$；\n-   （$6$ 分）：不同数字的数量 $\\leq 7$；\n-   （$8$ 分）：只有一个数字出现超过一次；\n-   （$7$ 分）：如果 $s_l=s_r, s_i=s_j$ 且 $s_i \\neq s_l$（$l\\neq r; i\\neq j$），则区间 $[l, r]$ 和 $[i, j]$ 不重叠；\n-   （$7$ 分）：$n \\leq 4$；\n-   （$6$ 分）：$n \\leq 8$；\n-   （$6$ 分）：$n \\leq 12$；\n-   （$6$ 分）：$n \\leq 15$；\n-   （$38$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15089", "type": "P", "difficulty": 5, "samples": [["10\n1 2\n2 3\n3 4\n4 5\n2 6\n6 7\n3 8\n8 9\n10 1", "6\n5 4 3 2 1 10 \n9 8 3 2 6 7 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "Special Judge", "UOI（乌克兰）"], "title": "[UOI 2025 II Stage] OldPost --- NewPost", "background": "", "description": "In the country of Trilyandia, there are $n$ cities connected by $n-1$ roads. The road system in this country is special:\n\n- one road connects only two different cities;\n- there can be at most one road between any two cities;\n- from any city, it is possible to reach any other city, possibly passing through others.\n\n\nThe postal company OldPost decided to provide delivery services in this country. Due to the limited number of staff, transportation is carried out only along one route $a$ of length $l$, that is, a sequence of cities $a_1,a_2,\\dots,a_l$ such that\n\n- $a_i\\neq a_j$ for ($i\\neq j$);\n- cities $a_i$ and $a_{i+1}$ are connected by a road $(1\\leq i < l)$.\n\nTo maximize profit, OldPost decided to operate along the route with the maximum length.\n\nAn ancient competitor of OldPost --- NewPost decided to do the same, but along its own route $b$: $b_1,b_2,\\dots,b_l$, which does not necessarily differ from $a$, but also has the maximum possible length.\n\nThe president, upon learning about the intentions of both companies, asked OldPost and NewPost to choose routes $a$ and $b$ in such a way as to cover the maximum number of cities (that is, to ensure that the maximum number of cities are in at least one route). Since the president of Trilyandia specializes in management, while the postal companies specialize in delivering items rather than finding routes, you have been tasked with finding such $a$ and $b$.\n\nNote that each company wants to have the maximum possible length of its route; even if choosing a shorter route increases the total number of cities covered.\n\nHelp find routes $a$ and $b$ that have the maximum possible length and cover the maximum number of cities.", "inputFormat": "The first line contains a single integer $n$ $(2\\leq n \\leq 6\\cdot 10^5)$ --- the number of cities in the country.\n\nEach of the next $n-1$ lines contains two integers $x_i$ and $y_i$ $(1 \\leq x_i,y_i \\leq n, x_i \\neq y_i)$ --- pairs of cities between which there is a road.", "outputFormat": "The first line should contain a single integer $l$ ($2 \\leq l \\leq n$) --- the length of the found trade routes.\n\nThe second line should contain $l$ integers $a_1,a_2,\\dots,a_l$ ($1 \\leq a_i \\leq n$) --- the cities in route $a$.\n\nThe third line should contain $l$ integers $b_1,b_2,\\dots,b_l$ ($1 \\leq b_i \\leq n$) --- the cities in route $b$.\n\nIf there are multiple optimal routes, output any of them.", "hint": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/xv696w8k.png)\n:::\n\nIn the example, the longest possible routes are as follows:\n\n- $5$-$4$-$3$-$2$-$6$-$7$\n- $9$-$8$-$3$-$2$-$6$-$7$\n- $5$-$4$-$3$-$2$-$1$-$10$\n- $9$-$8$-$3$-$2$-$1$-$10$ \n\nThe first and fourth routes allow covering all cities.\n\n### Scoring\n\n- ($8$ points): $n\\leq 10$;\n- ($8$ points): $n\\leq 20$;\n- ($6$ points): $n \\leq 1\\,000$; there is exactly one city that is directly connected to all others;\n- ($8$ points): $n \\leq 20\\,000$; there are exactly two cities that are connected to only one other city (the cities form a line);\n- ($8$ points): $n \\leq 20\\,000$; there is exactly one city that is connected to three or more cities;\n- ($8$ points): $n \\leq 10\\,000$; there are no more than $10$ cities that are connected to only one other city;\n- ($16$ points): $n\\leq 1\\,000$;\n- ($18$ points): $n\\leq 70\\,000$;\n- ($20$ points): no additional restrictions.", "locale": "en", "translations": {"en": {"title": "[UOI 2025 II Stage] OldPost --- NewPost", "background": "", "description": "In the country of Trilyandia, there are $n$ cities connected by $n-1$ roads. The road system in this country is special:\n\n- one road connects only two different cities;\n- there can be at most one road between any two cities;\n- from any city, it is possible to reach any other city, possibly passing through others.\n\n\nThe postal company OldPost decided to provide delivery services in this country. Due to the limited number of staff, transportation is carried out only along one route $a$ of length $l$, that is, a sequence of cities $a_1,a_2,\\dots,a_l$ such that\n\n- $a_i\\neq a_j$ for ($i\\neq j$);\n- cities $a_i$ and $a_{i+1}$ are connected by a road $(1\\leq i < l)$.\n\nTo maximize profit, OldPost decided to operate along the route with the maximum length.\n\nAn ancient competitor of OldPost --- NewPost decided to do the same, but along its own route $b$: $b_1,b_2,\\dots,b_l$, which does not necessarily differ from $a$, but also has the maximum possible length.\n\nThe president, upon learning about the intentions of both companies, asked OldPost and NewPost to choose routes $a$ and $b$ in such a way as to cover the maximum number of cities (that is, to ensure that the maximum number of cities are in at least one route). Since the president of Trilyandia specializes in management, while the postal companies specialize in delivering items rather than finding routes, you have been tasked with finding such $a$ and $b$.\n\nNote that each company wants to have the maximum possible length of its route; even if choosing a shorter route increases the total number of cities covered.\n\nHelp find routes $a$ and $b$ that have the maximum possible length and cover the maximum number of cities.", "inputFormat": "The first line contains a single integer $n$ $(2\\leq n \\leq 6\\cdot 10^5)$ --- the number of cities in the country.\n\nEach of the next $n-1$ lines contains two integers $x_i$ and $y_i$ $(1 \\leq x_i,y_i \\leq n, x_i \\neq y_i)$ --- pairs of cities between which there is a road.", "outputFormat": "The first line should contain a single integer $l$ ($2 \\leq l \\leq n$) --- the length of the found trade routes.\n\nThe second line should contain $l$ integers $a_1,a_2,\\dots,a_l$ ($1 \\leq a_i \\leq n$) --- the cities in route $a$.\n\nThe third line should contain $l$ integers $b_1,b_2,\\dots,b_l$ ($1 \\leq b_i \\leq n$) --- the cities in route $b$.\n\nIf there are multiple optimal routes, output any of them.", "hint": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/xv696w8k.png)\n:::\n\nIn the example, the longest possible routes are as follows:\n\n- $5$-$4$-$3$-$2$-$6$-$7$\n- $9$-$8$-$3$-$2$-$6$-$7$\n- $5$-$4$-$3$-$2$-$1$-$10$\n- $9$-$8$-$3$-$2$-$1$-$10$ \n\nThe first and fourth routes allow covering all cities.\n\n### Scoring\n\n- ($8$ points): $n\\leq 10$;\n- ($8$ points): $n\\leq 20$;\n- ($6$ points): $n \\leq 1\\,000$; there is exactly one city that is directly connected to all others;\n- ($8$ points): $n \\leq 20\\,000$; there are exactly two cities that are connected to only one other city (the cities form a line);\n- ($8$ points): $n \\leq 20\\,000$; there is exactly one city that is connected to three or more cities;\n- ($8$ points): $n \\leq 10\\,000$; there are no more than $10$ cities that are connected to only one other city;\n- ($16$ points): $n\\leq 1\\,000$;\n- ($18$ points): $n\\leq 70\\,000$;\n- ($20$ points): no additional restrictions.", "locale": "en"}, "zh-CN": {"title": "[UOI 2025 II Stage] OldPost --- NewPost", "background": "", "description": "在 Trilyandia 国家，有 $n$ 个城市通过 $n-1$ 条道路相连。该国的道路系统很特别：\n\n-   每条道路仅连接两个不同的城市；\n-   任意两个城市之间最多有一条道路；\n-   从任意城市出发，都可以到达其他任意城市（可能需途经其他城市）。\n\n邮政公司 OldPost 决定在该国提供配送服务。由于员工人数有限，运输仅沿一条长度为 $l$ 的路线 $a$ 进行，即一个城市序列 $a_1,a_2,\\dots,a_l$，满足：\n\n-   对于 $i\\neq j$，有 $a_i\\neq a_j$；\n-   城市 $a_i$ 和 $a_{i+1}$ 之间有道路连接（$1\\leq i < l$）。\n\n为了最大化利润，OldPost 决定沿长度最长的路线运营。\n\nOldPost 的古老竞争对手 NewPost 也决定做同样的事，但沿其自己的路线 $b$：$b_1,b_2,\\dots,b_l$，该路线不一定与 $a$ 不同，但也具有最大可能长度。\n\n总统得知两家公司的意图后，要求 OldPost 和 NewPost 选择路线 $a$ 和 $b$，使得覆盖的城市数量最多（即确保尽可能多的城市至少出现在一条路线上）。由于 Trilyandia 的总统擅长管理，而邮政公司擅长投递物品而非寻找路线，因此你需要找出这样的 $a$ 和 $b$。\n\n注意，每家公司都希望自己的路线长度尽可能长；即使选择更短的路线能增加覆盖的城市总数。\n\n请帮助找出具有最大可能长度且覆盖最多城市数量的路线 $a$ 和 $b$。", "inputFormat": "-   第一行包含一个整数 $n$（$2\\leq n \\leq 6\\cdot 10^5$）——国家中的城市数量。\n-   接下来的 $n-1$ 行，每行包含两个整数 $x_i$ 和 $y_i$（$1 \\leq x_i,y_i \\leq n, x_i \\neq y_i$）——表示有道路连接的城市对。", "outputFormat": "-   第一行应包含一个整数 $l$（$2 \\leq l \\leq n$）——找到的贸易路线的长度。\n-   第二行应包含 $l$ 个整数 $a_1,a_2,\\dots,a_l$（$1 \\leq a_i \\leq n$）——路线 $a$ 中的城市。\n-   第三行应包含 $l$ 个整数 $b_1,b_2,\\dots,b_l$（$1 \\leq b_i \\leq n$）——路线 $b$ 中的城市。\n\n如果有多个最优路线，输出任意一组即可。", "hint": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/xv696w8k.png)\n:::\n\n在示例中，可能的最长路线如下：\n\n-   $5$-$4$-$3$-$2$-$6$-$7$\n-   $9$-$8$-$3$-$2$-$6$-$7$\n-   $5$-$4$-$3$-$2$-$1$-$10$\n-   $9$-$8$-$3$-$2$-$1$-$10$\n\n第一条和第四条路线可以覆盖所有城市。\n\n### 评分细则\n\n-   （$8$ 分）：$n\\leq 10$；\n-   （$8$ 分）：$n\\leq 20$；\n-   （$6$ 分）：$n \\leq 1\\,000$；恰好有一个城市直接与其他所有城市相连；\n-   （$8$ 分）：$n \\leq 20\\,000$；恰好有两个城市只与另一个城市相连（城市呈链状）；\n-   （$8$ 分）：$n \\leq 20\\,000$；恰好有一个城市与三个或更多城市相连；\n-   （$8$ 分）：$n \\leq 10\\,000$；最多有 $10$ 个城市只与另一个城市相连；\n-   （$16$ 分）：$n\\leq 1\\,000$；\n-   （$18$ 分）：$n\\leq 70\\,000$；\n-   （$20$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15090", "type": "P", "difficulty": 1, "samples": [["20 3 60\n", "120"], ["65 10 30", "150"], ["100 20 90", "1800"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "UOI（乌克兰）"], "title": "[UOI 2025 II Stage] Movies", "background": "", "description": "Deadpool is watching movies about Wolverine from different universes on a multiverse movie website. It is known that there are a total of $n$ movies, and each page of the website displays $k$ different movies (with the last page showing all remaining ones). Deadpool doesn't have much time, so he goes straight to the last page and watches all the movies from it.\n\nEach movie lasts exactly $c$ minutes. How much time did he spend watching the movies?", "inputFormat": "The first line contains three integers $n$, $k$, $c$ $(1 \\le n, k, c \\le 10^4)$ --- the number of movies, the number of movies on one page, and the duration of one movie.", "outputFormat": "Output a single number $t$, the amount of time that Deadpool will spend watching the movies.", "hint": "In the first example, we have $20$ movies and $3$ movies on each page except the last one, so there are $2$ movies on the last page, and watching those two movies will take a total of $120$ minutes.\n\nIn the second example, there are a total of $65$ movies and $10$ movies per page, so there will be $5$ movies on the last page, and watching them will take $150$ minutes.\n\nIn the third example, there are $100$ movies, with $20$ movies per page, so there will be $20$ movies on the last page, and Deadpool will watch them for $1800$ minutes.", "locale": "en", "translations": {"en": {"title": "[UOI 2025 II Stage] Movies", "background": "", "description": "Deadpool is watching movies about Wolverine from different universes on a multiverse movie website. It is known that there are a total of $n$ movies, and each page of the website displays $k$ different movies (with the last page showing all remaining ones). Deadpool doesn't have much time, so he goes straight to the last page and watches all the movies from it.\n\nEach movie lasts exactly $c$ minutes. How much time did he spend watching the movies?", "inputFormat": "The first line contains three integers $n$, $k$, $c$ $(1 \\le n, k, c \\le 10^4)$ --- the number of movies, the number of movies on one page, and the duration of one movie.", "outputFormat": "Output a single number $t$, the amount of time that Deadpool will spend watching the movies.", "hint": "In the first example, we have $20$ movies and $3$ movies on each page except the last one, so there are $2$ movies on the last page, and watching those two movies will take a total of $120$ minutes.\n\nIn the second example, there are a total of $65$ movies and $10$ movies per page, so there will be $5$ movies on the last page, and watching them will take $150$ minutes.\n\nIn the third example, there are $100$ movies, with $20$ movies per page, so there will be $20$ movies on the last page, and Deadpool will watch them for $1800$ minutes.", "locale": "en"}, "zh-CN": {"title": "[UOI 2025 II Stage] Movies", "background": "", "description": "Deadpool 正在一个多元宇宙电影网站上观看来自不同宇宙的金刚狼电影。已知总共有 $n$ 部电影，网站的每一页会显示 $k$ 部不同的电影（最后一页显示剩余的所有电影）。Deadpool 时间不多，所以他直接跳转到最后一页，并观看该页上的所有电影。\n\n每部电影的时长恰好为 $c$ 分钟。他观看这些电影总共花费了多少时间？\n", "inputFormat": "第一行包含三个整数 $n$、$k$、$c$（$1 \\le n, k, c \\le 10^4$）——分别表示电影的总数、每页显示的电影数量以及每部电影的时长。", "outputFormat": "输出一个数字 $t$，表示 Deadpool 观看电影所花费的总时间。\n", "hint": "在第一个示例中，总共有 $20$ 部电影，除最后一页外每页显示 $3$ 部电影，因此最后一页有 $2$ 部电影，观看这两部电影总共需要 $120$ 分钟。\n\n在第二个示例中，总共有 $65$ 部电影，每页 $10$ 部，因此最后一页有 $5$ 部电影，观看它们需要 $150$ 分钟。\n\n在第三个示例中，总共有 $100$ 部电影，每页 $20$ 部，因此最后一页有 $20$ 部电影，Deadpool 将花费 $1800$ 分钟观看它们。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15091", "type": "P", "difficulty": 2, "samples": [["4\n20 40 80 80", "3"], ["4\n20 40 20 20", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2025", "UOI（乌克兰）"], "title": "[UOI 2025 II Stage] Catamarans", "background": "", "description": "A group of $n$ people plans to go for a ride on catamarans.\n\nAs the leader of the group, you have been tasked with ordering the catamarans. You know that one catamaran can hold a weight of no more than $100$ kilograms, and you also know the weight of each group member.\n\nYou are aware that in your group, a person can weigh either $20$, $40$, $60$, $80$, or $100$ kilograms.\n\nTo spend as little money as possible, you decided to write a program that calculates the minimum number of catamarans needed.\n", "inputFormat": "The first line contains one integer $n$ $(1 \\le n \\le 1\\,000)$~--- the number of people in the group.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ $(a_i \\in \\{20, 40, 60, 80, 100\\})$~--- the weight of each person.", "outputFormat": "Output one integer --- the minimum number of catamarans needed.", "hint": "In the first example, we can seat the first two people in one catamaran, the third person in the second catamaran, and the fourth person in the third catamaran. We cannot seat everyone in two catamarans because person $2$ cannot sit with person $3$ or $4$, and person $3$ cannot sit with person $4$ either.\n\nIn the second example, we can seat everyone in one catamaran because their total weight is equal to $100$ kilograms, which means the catamaran can hold them.", "locale": "en", "translations": {"en": {"title": "[UOI 2025 II Stage] Catamarans", "background": "", "description": "A group of $n$ people plans to go for a ride on catamarans.\n\nAs the leader of the group, you have been tasked with ordering the catamarans. You know that one catamaran can hold a weight of no more than $100$ kilograms, and you also know the weight of each group member.\n\nYou are aware that in your group, a person can weigh either $20$, $40$, $60$, $80$, or $100$ kilograms.\n\nTo spend as little money as possible, you decided to write a program that calculates the minimum number of catamarans needed.\n", "inputFormat": "The first line contains one integer $n$ $(1 \\le n \\le 1\\,000)$~--- the number of people in the group.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ $(a_i \\in \\{20, 40, 60, 80, 100\\})$~--- the weight of each person.", "outputFormat": "Output one integer --- the minimum number of catamarans needed.", "hint": "In the first example, we can seat the first two people in one catamaran, the third person in the second catamaran, and the fourth person in the third catamaran. We cannot seat everyone in two catamarans because person $2$ cannot sit with person $3$ or $4$, and person $3$ cannot sit with person $4$ either.\n\nIn the second example, we can seat everyone in one catamaran because their total weight is equal to $100$ kilograms, which means the catamaran can hold them.", "locale": "en"}, "zh-CN": {"title": "[UOI 2025 II Stage] Catamarans", "background": "", "description": "一个由 $n$ 人组成的小组计划去坐双体船游玩。\n\n作为小组的领队，你的任务是预订双体船。你知道一艘双体船最多可以承载 $100$ 公斤的重量，并且你也知道小组中每个成员的体重。\n\n你知道在你的小组中，一个人的体重可能是 $20$、$40$、$60$、$80$ 或 $100$ 公斤。\n\n为了尽可能省钱，你决定编写一个程序来计算所需双体船的最少数量。", "inputFormat": "-   第一行包含一个整数 $n$（$1 \\le n \\le 1\\,000$）——小组中的人数。\n-   第二行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$a_i \\in \\{20, 40, 60, 80, 100\\}$）——每个人的体重。\n", "outputFormat": "输出一个整数——所需双体船的最少数量。\n", "hint": "在第一个示例中，我们可以将前两个人安排在一艘双体船上，第三个人安排在第二艘，第四个人安排在第三艘。我们无法将所有人安排在两艘双体船上，因为第 $2$ 个人不能与第 $3$ 或第 $4$ 个人同船，第 $3$ 个人也不能与第 $4$ 个人同船。\n\n在第二个示例中，我们可以将所有人安排在一艘双体船上，因为他们的总重量等于 $100$ 公斤，这意味着双体船可以承载他们。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15092", "type": "P", "difficulty": 4, "samples": [["3", "8\n3 2\n1 3\n2 1\n2 3\n1 3\n2 3\n1 2\n3 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "Special Judge", "构造", "UOI（乌克兰）"], "title": "[UOI 2025 II Stage] Diagonal Numbers", "background": "", "description": "Vasylko was given cubes with numbers from $1$ to $n$. One cube had the number $n$, two cubes had the number $n-1$, and so on, with $n-1$ cubes having the number $2$, and $n$ cubes having the number $1$.\n\nHe arranged the cubes in a square frame without a top boundary, so that all cubes were placed below the diagonal that runs from the top left corner to the bottom right corner. In the first column on the left, there are $n$ cubes with the number $1$; in the second column, there are $n-1$ cubes with the number $2$... in the $n$-th column, there is one cube with the number $n$. That is, in the $i$-th column, there are $n-i+1$ cubes with the number $i$.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ukzslmb.png)\n\nInitial state\n:::\n\nVasylko wanted to rearrange them so that all cubes were positioned below the $\\textbf{opposite diagonal}$. Thus, in the first row from the bottom, there should be $n$ cubes with the number $1$; in the second row, there should be $n-1$ cubes with the number $2$... in the $n$-th row, there should be one cube with the number $n$. That is, in the $i$-th row, there should be $n-i+1$ cubes with the number $i$.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/mdqyqdxf.png)\n\nFinal state\n:::\n\nHe also decided that he would only move cubes from the top of one column to the top of another (not necessarily adjacent). Help him do this in the most efficient way --- find the minimum number of moves he needs and output which moves Vasylko should make.\n\n$\\textbf{You can earn partial points; see details below.}$", "inputFormat": "The first line contains one integer $n$ $(3 \\le n \\le 1000)$ --- the size of the square.\n", "outputFormat": "In the first line, output one integer $k$ ($1 \\leq k \\leq 10^6$) --- the minimum number of moves needed to rearrange the cubes.\n\nIn each of the following $k$ lines, output two integers $a$ and $b$ ($1 \\leq a, b \\leq n$; $a \\neq b$), where $a$ is the column number from which you take a cube, and $b$ is the column number to which you place the cube.\n", "hint": "First, we will place the last column. Therefore, the only first move to rearrange the cubes in the minimum number of moves may be to move $3$ from the third column to the second, because otherwise we will not be able to place $1$ at the beginning of the third column if we do not move $3$ or do not move it to the second column.\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t5g26r2c.png)\nFirst 3 states\n:::\n\nAfter we have placed $1$, we need to place $2$ and $3$ in their places in the third column, again the only way to do this is to first move $3$ to the first column, because otherwise we will not be able to place $2$ in the third column in the next move, and then place $3$ in its place.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/1214q8jd.png)\n\nNext 3 states\n:::\n\nAfter this, we want to correctly place the second column, and for $1$ to be the first number, we first need to take $2$, which we can only take in the last column. After we have placed $1$, we only need to return $2$ to the second column to achieve the desired state of the cubes.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/7f8al4dk.png)\n\nFinal 3 states\n:::\n\n### Scoring\n\n- ($12$ points): $n = 4$;\n- ($20$ points): $n = 5$;\n- ($20$ points): $n = 6$;\n- ($20$ points): $n \\le 10$;\n- ($20$ points): $n \\le 100$;\n- ($8$ points): no additional restrictions.\n\nYou can earn half the points for each block if you output the correct $k$ for each test in the block. You will also receive a quarter of the points if you output an incorrect $k$, but the instructions are correct; in this case, $k \\le 10^6$.\n\nNote that to earn half the points, you need to output the correct $k$ and\n\n- either output nothing else; that is, output only $k$, but no instructions;\n- or output all $k$ instructions completely, where all column numbers are from $1$ to $n$. There are no additional requirements for them.\n\nIf you output, for example, only a few instructions, or too many instructions, or numbers that are not column numbers, etc., you will receive $0$ points.", "locale": "en", "translations": {"en": {"title": "[UOI 2025 II Stage] Diagonal Numbers", "background": "", "description": "Vasylko was given cubes with numbers from $1$ to $n$. One cube had the number $n$, two cubes had the number $n-1$, and so on, with $n-1$ cubes having the number $2$, and $n$ cubes having the number $1$.\n\nHe arranged the cubes in a square frame without a top boundary, so that all cubes were placed below the diagonal that runs from the top left corner to the bottom right corner. In the first column on the left, there are $n$ cubes with the number $1$; in the second column, there are $n-1$ cubes with the number $2$... in the $n$-th column, there is one cube with the number $n$. That is, in the $i$-th column, there are $n-i+1$ cubes with the number $i$.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ukzslmb.png)\n\nInitial state\n:::\n\nVasylko wanted to rearrange them so that all cubes were positioned below the $\\textbf{opposite diagonal}$. Thus, in the first row from the bottom, there should be $n$ cubes with the number $1$; in the second row, there should be $n-1$ cubes with the number $2$... in the $n$-th row, there should be one cube with the number $n$. That is, in the $i$-th row, there should be $n-i+1$ cubes with the number $i$.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/mdqyqdxf.png)\n\nFinal state\n:::\n\nHe also decided that he would only move cubes from the top of one column to the top of another (not necessarily adjacent). Help him do this in the most efficient way --- find the minimum number of moves he needs and output which moves Vasylko should make.\n\n$\\textbf{You can earn partial points; see details below.}$", "inputFormat": "The first line contains one integer $n$ $(3 \\le n \\le 1000)$ --- the size of the square.\n", "outputFormat": "In the first line, output one integer $k$ ($1 \\leq k \\leq 10^6$) --- the minimum number of moves needed to rearrange the cubes.\n\nIn each of the following $k$ lines, output two integers $a$ and $b$ ($1 \\leq a, b \\leq n$; $a \\neq b$), where $a$ is the column number from which you take a cube, and $b$ is the column number to which you place the cube.\n", "hint": "First, we will place the last column. Therefore, the only first move to rearrange the cubes in the minimum number of moves may be to move $3$ from the third column to the second, because otherwise we will not be able to place $1$ at the beginning of the third column if we do not move $3$ or do not move it to the second column.\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t5g26r2c.png)\nFirst 3 states\n:::\n\nAfter we have placed $1$, we need to place $2$ and $3$ in their places in the third column, again the only way to do this is to first move $3$ to the first column, because otherwise we will not be able to place $2$ in the third column in the next move, and then place $3$ in its place.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/1214q8jd.png)\n\nNext 3 states\n:::\n\nAfter this, we want to correctly place the second column, and for $1$ to be the first number, we first need to take $2$, which we can only take in the last column. After we have placed $1$, we only need to return $2$ to the second column to achieve the desired state of the cubes.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/7f8al4dk.png)\n\nFinal 3 states\n:::\n\n### Scoring\n\n- ($12$ points): $n = 4$;\n- ($20$ points): $n = 5$;\n- ($20$ points): $n = 6$;\n- ($20$ points): $n \\le 10$;\n- ($20$ points): $n \\le 100$;\n- ($8$ points): no additional restrictions.\n\nYou can earn half the points for each block if you output the correct $k$ for each test in the block. You will also receive a quarter of the points if you output an incorrect $k$, but the instructions are correct; in this case, $k \\le 10^6$.\n\nNote that to earn half the points, you need to output the correct $k$ and\n\n- either output nothing else; that is, output only $k$, but no instructions;\n- or output all $k$ instructions completely, where all column numbers are from $1$ to $n$. There are no additional requirements for them.\n\nIf you output, for example, only a few instructions, or too many instructions, or numbers that are not column numbers, etc., you will receive $0$ points.", "locale": "en"}, "zh-CN": {"title": "[UOI 2025 II Stage] Diagonal Numbers", "background": "", "description": "Vasylko 得到了写有数字 $1$ 到 $n$ 的方块。其中写有数字 $n$ 的方块有 $1$ 个，写有数字 $n-1$ 的方块有 $2$ 个，依此类推，写有数字 $2$ 的方块有 $n-1$ 个，写有数字 $1$ 的方块有 $n$ 个。\n\n他将这些方块摆放在一个没有上边框的正方形框架内，使得所有方块都位于从左上角到右下角的对角线下方。最左边的第一列有 $n$ 个写有数字 $1$ 的方块；第二列有 $n-1$ 个写有数字 $2$ 的方块……第 $n$ 列有 $1$ 个写有数字 $n$ 的方块。也就是说，第 $i$ 列有 $n-i+1$ 个写有数字 $i$ 的方块。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ukzslmb.png)\n\n初始状态\n:::\n\nVasylko 想重新排列它们，使得所有方块都位于**另一条对角线**下方。这样，从下往上数的第一行应有 $n$ 个写有数字 $1$ 的方块；第二行应有 $n-1$ 个写有数字 $2$ 的方块……第 $n$ 行应有 $1$ 个写有数字 $n$ 的方块。也就是说，第 $i$ 行应有 $n-i+1$ 个写有数字 $i$ 的方块。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/mdqyqdxf.png)\n\n最终状态\n:::\n\n他还决定，只将方块从一列的顶部移动到另一列的顶部（不一定是相邻列）。请以最高效的方式帮助他——找出他所需的最少移动次数，并输出 Vasylko 应进行的移动。\n\n**你可以获得部分分数；详见下文。**", "inputFormat": "第一行包含一个整数 $n$（$3 \\le n \\le 1000$）——正方形的尺寸。\n", "outputFormat": "-   第一行输出一个整数 $k$（$1 \\leq k \\leq 10^6$）——重新排列方块所需的最少移动次数。\n-   接下来的 $k$ 行，每行输出两个整数 $a$ 和 $b$（$1 \\leq a, b \\leq n$；$a \\neq b$），其中 $a$ 表示取出方块的列号，$b$ 表示放入方块的列号。", "hint": "首先，我们将处理最后一列。因此，以最少移动次数重新排列方块的唯一第一步可能是将 $3$ 从第三列移动到第二列，因为如果不移动 $3$ 或不将其移动到第二列，我们将无法将 $1$ 放在第三列的开头。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/t5g26r2c.png)\n前 3 个状态\n:::\n\n放置好 $1$ 之后，我们需要将 $2$ 和 $3$ 放到它们在第三列的正确位置。同样，唯一的方法是先将 $3$ 移动到第一列，否则我们将无法在下一步中将 $2$ 放入第三列，然后再将 $3$ 放回它的位置。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/1214q8jd.png)\n\n接下来 3 个状态\n:::\n\n此后，我们想要正确放置第二列。为了让 $1$ 成为第一个数字，我们首先需要取出 $2$，而 $2$ 只能在最后一列被取出。放置好 $1$ 后，我们只需将 $2$ 放回第二列，即可达到期望的方块状态。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/7f8al4dk.png)\n\n最后 3 个状态\n:::\n\n### 评分细则\n\n-   （$12$ 分）：$n = 4$；\n-   （$20$ 分）：$n = 5$；\n-   （$20$ 分）：$n = 6$；\n-   （$20$ 分）：$n \\le 10$；\n-   （$20$ 分）：$n \\le 100$；\n-   （$8$ 分）：无额外限制。\n\n对于每个测试组，如果你为该组中每个测试输出了正确的 $k$，你可以获得该组一半的分数。如果你输出了错误的 $k$ 但移动指令正确，你也可以获得四分之一的分数；此时要求 $k \\le 10^6$。\n\n注意，要获得一半的分数，你需要输出正确的 $k$ 并且：\n\n-   要么不输出其他内容，即只输出 $k$，不输出移动指令；\n-   要么完整输出所有 $k$ 条移动指令，其中所有列号都在 $1$ 到 $n$ 之间。除此之外没有其他要求。\n\n如果你只输出部分指令、或输出过多指令、或输出的数字不是列号等，你将获得 $0$ 分。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15093", "type": "P", "difficulty": 5, "samples": [["8 4\n6 1 6 1", "6\n1 1 1 0 \n1 0 1 1 \n1 0 1 0 \n1 0 1 0 \n1 0 0 0 \n1 0 0 0 \n0 0 1 0 \n0 0 1 0 "], ["4 4\n3 0 3 0", "2\n1 0 1 0 \n1 0 1 0 \n1 0 0 0 \n0 0 1 0 "], ["7 3\n4 3 2", "7\n1 1 1 \n1 0 0 \n1 0 0 \n1 0 0 \n0 1 0 \n0 1 0 \n0 0 1 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "2025", "Special Judge", "构造", "链表", "UOI（乌克兰）"], "title": "[UOI 2025 II Stage] Odd Rows", "background": "", "description": "Once, s1mple approached Kostya, a well-known problem solver, and said:\n\n$\\textit{If you want to become better, you need constant practice. Here is a problem for training:}$\n\nGiven a matrix $a$ of size $n \\times m$ ($n$ --- number of rows; $m$ --- number of columns), where each element is either $0$ or $1$. It is known that each column contains exactly $c_i$ ones. The elements within each column can be arranged freely. The goal is to maximize the number of rows with an odd number of ones and to find such a matrix.\n\nKostya silently nodded, sat down at the table, and began to work, knowing that every practice brings him closer to mastery.\n\nKostya couldn't solve the problem and is asking you to help him solve it.\n\n$\\textbf{You can earn partial points if you only find the number, not the matrix. More details below.}$", "inputFormat": "The first line contains two integers $n$ and $m$ $(1 \\le n \\cdot m \\le 10^6)$ --- the dimensions of the matrix.\n\nThe second line contains $m$ integers $c_1, c_2, \\dots, c_m$ $(0 \\le c_i \\le n)$ --- the number of ones in each column. ", "outputFormat": "In the first line, output a single integer $t$ ($0 \\leq t \\leq n$) --- the number of rows in the matrix with an odd sum.\n\nIn each of the next $n$ lines, output $m$ integers $a_{ij}$ ($0 \\leq a_{ij} \\leq 1$) --- the numbers of the matrix.", "hint": "In the first example, the first and third columns intersect in at least $4$ positions, meaning that if there were only these two columns, we would have $4$ even rows, but since there are also two columns with $1$ one, we can convert two of them to odd, so the optimal answer will be $6$ odd rows.\n\nIn the second example, we can ignore the second and fourth columns because they have no ones, meaning they will not change the parity of any row, and the first and third intersect in at least $2$ rows, meaning at least two rows will be even, so the answer is $2$.\n\nIn the third example, the answer is $7$, because there exists a matrix that has $7$ odd rows and satisfies the condition, and there is no matrix that has more than $7$.\n\n### Scoring\n\n- ($10$ points): $n, m \\le 5$;\n- ($8$ points): the number of ones in the matrix does not exceed $n$;\n- ($20$ points): the number of ones in each column does not exceed $n/2$;\n- ($14$ points): $n, m \\le 50$;\n- ($14$ points): $n \\le 3\\,000$;\n- ($14$ points): $n \\cdot m \\le 3\\cdot10^5$;\n- ($20$ points): no additional restrictions.\n\nYou can earn half the points for each block if you output the correct $t$ for each test in the block.\n\nNote that to earn partial points, you need to output the correct $t$ and\n\n- either output nothing more; that is, output only $t$, but not the matrix;\n- or output the complete matrix consisting of $0$s and $1$s, which does not have to be correct. For example, one that consists entirely of zeros.\n\nIf you output, for example, only a few rows, or too many rows, numbers other than $0$ and $1$, etc., you will receive $0$ points.", "locale": "en", "translations": {"en": {"title": "[UOI 2025 II Stage] Odd Rows", "background": "", "description": "Once, s1mple approached Kostya, a well-known problem solver, and said:\n\n$\\textit{If you want to become better, you need constant practice. Here is a problem for training:}$\n\nGiven a matrix $a$ of size $n \\times m$ ($n$ --- number of rows; $m$ --- number of columns), where each element is either $0$ or $1$. It is known that each column contains exactly $c_i$ ones. The elements within each column can be arranged freely. The goal is to maximize the number of rows with an odd number of ones and to find such a matrix.\n\nKostya silently nodded, sat down at the table, and began to work, knowing that every practice brings him closer to mastery.\n\nKostya couldn't solve the problem and is asking you to help him solve it.\n\n$\\textbf{You can earn partial points if you only find the number, not the matrix. More details below.}$", "inputFormat": "The first line contains two integers $n$ and $m$ $(1 \\le n \\cdot m \\le 10^6)$ --- the dimensions of the matrix.\n\nThe second line contains $m$ integers $c_1, c_2, \\dots, c_m$ $(0 \\le c_i \\le n)$ --- the number of ones in each column. ", "outputFormat": "In the first line, output a single integer $t$ ($0 \\leq t \\leq n$) --- the number of rows in the matrix with an odd sum.\n\nIn each of the next $n$ lines, output $m$ integers $a_{ij}$ ($0 \\leq a_{ij} \\leq 1$) --- the numbers of the matrix.", "hint": "In the first example, the first and third columns intersect in at least $4$ positions, meaning that if there were only these two columns, we would have $4$ even rows, but since there are also two columns with $1$ one, we can convert two of them to odd, so the optimal answer will be $6$ odd rows.\n\nIn the second example, we can ignore the second and fourth columns because they have no ones, meaning they will not change the parity of any row, and the first and third intersect in at least $2$ rows, meaning at least two rows will be even, so the answer is $2$.\n\nIn the third example, the answer is $7$, because there exists a matrix that has $7$ odd rows and satisfies the condition, and there is no matrix that has more than $7$.\n\n### Scoring\n\n- ($10$ points): $n, m \\le 5$;\n- ($8$ points): the number of ones in the matrix does not exceed $n$;\n- ($20$ points): the number of ones in each column does not exceed $n/2$;\n- ($14$ points): $n, m \\le 50$;\n- ($14$ points): $n \\le 3\\,000$;\n- ($14$ points): $n \\cdot m \\le 3\\cdot10^5$;\n- ($20$ points): no additional restrictions.\n\nYou can earn half the points for each block if you output the correct $t$ for each test in the block.\n\nNote that to earn partial points, you need to output the correct $t$ and\n\n- either output nothing more; that is, output only $t$, but not the matrix;\n- or output the complete matrix consisting of $0$s and $1$s, which does not have to be correct. For example, one that consists entirely of zeros.\n\nIf you output, for example, only a few rows, or too many rows, numbers other than $0$ and $1$, etc., you will receive $0$ points.", "locale": "en"}, "zh-CN": {"title": "[UOI 2025 II Stage] Odd Rows", "background": "", "description": "一次，s1mple 找到了著名的问题解决者 Kostya，对他说：\n\n**如果你想变得更强，就需要持续练习。这里有一个用于训练的问题：**\n\n给定一个大小为 $n \\times m$ 的矩阵 $a$（$n$ 为行数，$m$ 为列数），其中每个元素要么是 $0$，要么是 $1$。已知每列恰好包含 $c_i$ 个 $1$。每列内的元素可以自由排列。目标是最大化包含奇数个 $1$ 的行数，并找出这样的一个矩阵。\n\nKostya 默默点头，坐到桌边开始工作，深知每一次练习都让他更接近精通。\n\nKostya 没能解决这个问题，现在请你帮他解决它。\n\n**如果你只找出数量而不输出矩阵，可以获得部分分数。详情见下文。**", "inputFormat": "-   第一行包含两个整数 $n$ 和 $m$（$1 \\le n \\cdot m \\le 10^6$）——矩阵的维度。\n-   第二行包含 $m$ 个整数 $c_1, c_2, \\dots, c_m$（$0 \\le c_i \\le n$）——每列中 $1$ 的数量。\n", "outputFormat": "-   第一行输出一个整数 $t$（$0 \\leq t \\leq n$）——矩阵中具有奇数和的行数。\n-   接下来的 $n$ 行，每行输出 $m$ 个整数 $a_{ij}$（$0 \\leq a_{ij} \\leq 1$）——矩阵的元素。\n", "hint": "在第一个示例中，第一列和第三列至少在 $4$ 个位置相交，这意味着如果只有这两列，我们将有 $4$ 个偶数和行。但由于还有两列各有一个 $1$，我们可以将其中两行转换为奇数和，因此最优答案是 $6$ 个奇数和行。\n\n在第二个示例中，我们可以忽略第二列和第四列，因为它们没有 $1$，这意味着它们不会改变任何行的奇偶性。第一列和第三列至少在 $2$ 行相交，意味着至少有 $2$ 行是偶数和，因此答案是 $2$。\n\n在第三个示例中，答案是 $7$，因为存在一个满足条件且具有 $7$ 个奇数和行的矩阵，并且不存在多于 $7$ 个奇数和行的矩阵。\n\n### 评分细则\n\n-   （$10$ 分）：$n, m \\le 5$；\n-   （$8$ 分）：矩阵中 $1$ 的总数不超过 $n$；\n-   （$20$ 分）：每列中 $1$ 的数量不超过 $n/2$；\n-   （$14$ 分）：$n, m \\le 50$；\n-   （$14$ 分）：$n \\le 3\\,000$；\n-   （$14$ 分）：$n \\cdot m \\le 3\\cdot10^5$；\n-   （$20$ 分）：无额外限制。\n\n对于每个测试组，如果你为该组中每个测试输出了正确的 $t$，你可以获得该组一半的分数。\n\n注意，要获得部分分数，你需要输出正确的 $t$ 并且：\n\n-   要么不输出其他内容，即只输出 $t$，不输出矩阵；\n-   要么输出一个完整的由 $0$ 和 $1$ 组成的矩阵，该矩阵不必正确。例如，可以是一个全零矩阵。\n\n如果你只输出部分行、或输出过多行、或输出非 $0$ 非 $1$ 的数字等，你将获得 $0$ 分。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15094", "type": "P", "difficulty": 6, "samples": [["10 5\n3 4 3 4 3 2 3 1 2 1\n2 2 5\n1 3\n2 2 5\n3 4 5\n2 2 5", "2\n1\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "分块", "UOI（乌克兰）"], "title": "[UOI 2025 II Stage] Three Queries", "background": "", "description": "Given an array $a$ of length $n$ and $q$ queries. We also have a binary array $w$ of infinite length, initially all $w_i=1$.\n\nThere are three types of queries:\n- $1 \\ x$ --- toggle the value of $w_x$ (from $1$ to $0$, and vice versa).\n- $2 \\ l \\ r$ --- count the number of unique numbers in the array $a$ in the range $[l, r]$ for which $w_{a_i}=1$ and $l \\le i \\le r$.\n- $3 \\ x \\ t$ --- assign the value $t$ to $a_x$.\n\nProvide an answer for each query of the second type.", "inputFormat": "The first line contains two integers $n$ and $q$ $(1 \\le n, q \\le 3\\cdot10^5)$~--- the length of the array and the number of queries.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ $(1 \\le a_i \\le 10^9)$~--- the values of the elements of the array.\n\nEach of the following $q$ lines starts with an integer $type$ $(1 \\le type \\le 3)$ --- the type number of each query:\n\n- If $type = 1$, the query contains one integer $x$ $(1 \\le x \\le 10^9)$ --- toggle the value of $w_x$.\n- If $type = 2$, the query contains two integers $l$ and $r$ $(1 \\le l \\le r \\le n)$ --- count the number of unique numbers in the array $a$ in the range $[l, r]$ for which $w_{a_i}=1$ and $l \\le i \\le r$.\n- If $type = 3$, the query contains two integers $x$ and $t$ $(1 \\le x \\le n, 1 \\le t \\le 10^9)$ --- replace the value of $a_x$ with $t$.", "outputFormat": "For each query of the second type, output the number of unique numbers in the range on a separate line.", "hint": "In the example for the first query of the second type, the segment looks like $[4, 3, 4, 3]$, meaning there are numbers $3$, $4$, and $w_3$, $w_4$ are equal to $1$, so the answer is $2$. After the next query of type $1$, $w_3$ becomes $0$, so for the next query, the answer is $1$. After the next query, the array will look like $[3, 4, 3, 5, 3, 2, 3, 1, 2, 1]$. In the last query, the segment will look like $[4, 3, 5, 3]$, meaning there are numbers $3, 4, 5$, respectively the answer is $2$, because $w_3 = 0$.\n\n### Scoring\n\n- ($8$ points): $n, q \\le 10^3$;\n- ($6$ points): only queries of type $2$; $n=q; l_i=1$; $r_i=i$;\n- ($13$ points): only queries of type $2$;\n- ($10$ points): only queries of type $1$ and $2$; all $a_i$ are pairwise distinct;\n- ($14$ points): only queries of type $1$ and $2$; all $w_{a_i}$ can change only once;\n- ($7$ points): only queries of type $1$ and $2$;\n- ($14$ points): only queries of type $2$ and $3$;\n- ($8$ points): at any moment, $a_i \\le 100$;\n- ($10$ points): $n, q \\le 5\\cdot10^4$;\n- ($10$ points): without additional constraints.", "locale": "en", "translations": {"en": {"title": "[UOI 2025 II Stage] Three Queries", "background": "", "description": "Given an array $a$ of length $n$ and $q$ queries. We also have a binary array $w$ of infinite length, initially all $w_i=1$.\n\nThere are three types of queries:\n- $1 \\ x$ --- toggle the value of $w_x$ (from $1$ to $0$, and vice versa).\n- $2 \\ l \\ r$ --- count the number of unique numbers in the array $a$ in the range $[l, r]$ for which $w_{a_i}=1$ and $l \\le i \\le r$.\n- $3 \\ x \\ t$ --- assign the value $t$ to $a_x$.\n\nProvide an answer for each query of the second type.", "inputFormat": "The first line contains two integers $n$ and $q$ $(1 \\le n, q \\le 3\\cdot10^5)$~--- the length of the array and the number of queries.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ $(1 \\le a_i \\le 10^9)$~--- the values of the elements of the array.\n\nEach of the following $q$ lines starts with an integer $type$ $(1 \\le type \\le 3)$ --- the type number of each query:\n\n- If $type = 1$, the query contains one integer $x$ $(1 \\le x \\le 10^9)$ --- toggle the value of $w_x$.\n- If $type = 2$, the query contains two integers $l$ and $r$ $(1 \\le l \\le r \\le n)$ --- count the number of unique numbers in the array $a$ in the range $[l, r]$ for which $w_{a_i}=1$ and $l \\le i \\le r$.\n- If $type = 3$, the query contains two integers $x$ and $t$ $(1 \\le x \\le n, 1 \\le t \\le 10^9)$ --- replace the value of $a_x$ with $t$.", "outputFormat": "For each query of the second type, output the number of unique numbers in the range on a separate line.", "hint": "In the example for the first query of the second type, the segment looks like $[4, 3, 4, 3]$, meaning there are numbers $3$, $4$, and $w_3$, $w_4$ are equal to $1$, so the answer is $2$. After the next query of type $1$, $w_3$ becomes $0$, so for the next query, the answer is $1$. After the next query, the array will look like $[3, 4, 3, 5, 3, 2, 3, 1, 2, 1]$. In the last query, the segment will look like $[4, 3, 5, 3]$, meaning there are numbers $3, 4, 5$, respectively the answer is $2$, because $w_3 = 0$.\n\n### Scoring\n\n- ($8$ points): $n, q \\le 10^3$;\n- ($6$ points): only queries of type $2$; $n=q; l_i=1$; $r_i=i$;\n- ($13$ points): only queries of type $2$;\n- ($10$ points): only queries of type $1$ and $2$; all $a_i$ are pairwise distinct;\n- ($14$ points): only queries of type $1$ and $2$; all $w_{a_i}$ can change only once;\n- ($7$ points): only queries of type $1$ and $2$;\n- ($14$ points): only queries of type $2$ and $3$;\n- ($8$ points): at any moment, $a_i \\le 100$;\n- ($10$ points): $n, q \\le 5\\cdot10^4$;\n- ($10$ points): without additional constraints.", "locale": "en"}, "zh-CN": {"title": "[UOI 2025 II Stage] Three Queries", "background": "", "description": "给定一个长度为 $n$ 的数组 $a$ 和 $q$ 个查询。我们还有一个无限长的二进制数组 $w$，初始时所有 $w_i = 1$。\n\n共有三种类型的查询：\n- $1 \\ x$ —— 切换 $w_x$ 的值（从 $1$ 变为 $0$，或从 $0$ 变为 $1$）。\n- $2 \\ l \\ r$ —— 统计数组 $a$ 中，满足 $w_{a_i} = 1$ 且 $l \\le i \\le r$ 的不同数字的数量。\n- $3 \\ x \\ t$ —— 将 $a_x$ 的值赋为 $t$。\n\n请对每个第二类查询给出答案。", "inputFormat": "-   第一行包含两个整数 $n$ 和 $q$（$1 \\le n, q \\le 3\\cdot10^5$）——数组的长度和查询的数量。\n-   第二行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$1 \\le a_i \\le 10^9$）——数组元素的值。\n-   接下来的 $q$ 行，每行以一个整数 $type$（$1 \\le type \\le 3$）开头，表示查询的类型：\n    -   如果 $type = 1$，查询包含一个整数 $x$（$1 \\le x \\le 10^9$）——切换 $w_x$ 的值。\n    -   如果 $type = 2$，查询包含两个整数 $l$ 和 $r$（$1 \\le l \\le r \\le n$）——统计数组 $a$ 在区间 $[l, r]$ 中，满足 $w_{a_i} = 1$ 且 $l \\le i \\le r$ 的不同数字的数量。\n    -   如果 $type = 3$，查询包含两个整数 $x$ 和 $t$（$1 \\le x \\le n, 1 \\le t \\le 10^9$）——将 $a_x$ 的值替换为 $t$。", "outputFormat": "对于每个第二类查询，在单独一行输出区间内满足条件的不同数字的数量。\n", "hint": "在示例的第一个第二类查询中，区间为 $[4, 3, 4, 3]$，其中包含数字 $3$ 和 $4$，且 $w_3$、$w_4$ 均为 $1$，因此答案为 $2$。执行下一个类型 $1$ 的查询后，$w_3$ 变为 $0$，因此对于下一个查询，答案为 $1$。执行下一个查询后，数组变为 $[3, 4, 3, 5, 3, 2, 3, 1, 2, 1]$。在最后一个查询中，区间为 $[4, 3, 5, 3]$，包含数字 $3, 4, 5$，但 $w_3 = 0$，因此答案为 $2$。\n\n### 评分细则\n\n-   （$8$ 分）：$n, q \\le 10^3$；\n-   （$6$ 分）：仅包含类型 $2$ 的查询；$n = q$；$l_i = 1$；$r_i = i$；\n-   （$13$ 分）：仅包含类型 $2$ 的查询；\n-   （$10$ 分）：仅包含类型 $1$ 和 $2$ 的查询；所有 $a_i$ 互不相同；\n-   （$14$ 分）：仅包含类型 $1$ 和 $2$ 的查询；所有 $w_{a_i}$ 只能改变一次；\n-   （$7$ 分）：仅包含类型 $1$ 和 $2$ 的查询；\n-   （$14$ 分）：仅包含类型 $2$ 和 $3$ 的查询；\n-   （$8$ 分）：任何时刻 $a_i \\le 100$；\n-   （$10$ 分）：$n, q \\le 5\\cdot10^4$；\n-   （$10$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15095", "type": "P", "difficulty": 4, "samples": [["4 6\n1 2 b\n2 3 a\n3 4 a\n1 1 a\n4 3 d\n4 3 c", "7"], ["2 3\n1 1 x\n2 2 y\n1 1 z", "0"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "ICPC"], "title": "[ICPC 2025 LAC] Ananna", "background": "", "description": "Dananland is a very typical country: it consists of $N$ cities, each identified by a distinct number. These cities are connected by $M$ unidirectional roads, where each road has a name.\n\nAnanna is a bright little girl who lives in Dananland. Unfortunately, she was born with a terrible disease: she can only read backwards. After being a victim of terrible bullying by her peers, or, as Ananna calls them, *sreep*, she found solace in palindromes: words that are the same when read backwards.\n\nAnanna’s mom, Evee, is trying to help her with her condition. One way she helps is by taking her on road trips. A road trip is a sequence of roads that starts at some city $U$ and ends at a different city $V$; the same road may appear more than once.\n\nWhile on a road trip, Evee asks Ananna the first letter of each road name, so she can practice looking at the start of words. This is, obviously, a source of great anxiety to Ananna, so to avoid having a *kcatta cinap*, Evee always makes sure that the sequence formed by taking the first letter of each road’s name, in the order they are traversed, is a palindrome.\n\nEvee is now looking at a map of Dananland, and she wonders: How many distinct pairs of cities $U,V$ exist such that Evee can take a road trip from $U$ to $V$?", "inputFormat": "The first line contains two integers $N$ and $M$ ($1 \\le N, M \\le 5000$), indicating respectively the number of cities and the number of roads in Dananland. Each city is identified by a distinct integer from $1$ to $N$.\n\nEach of the next $M$ lines contains two integers $U$ and $V$ ($1 \\le U, V \\le N$) and a lowercase letter $C$, representing that there is a unidirectional road from $U$ to $V$ whose name starts with $C$. Several roads may connect the same pair of cities, and a road may connect a city to itself.", "outputFormat": "Output a single line with an integer indicating the number of pairs of cities $U,V$ such that $U \\ne V$, there is a road trip from $U$ to $V$, and the letters of the roads (in the order they are traversed) form a palindrome.", "hint": "### Explanation of sample 1:\n\nThe 7 pairs of cities and possible road trips are:\n\n- $1,2$: $1 \\xrightarrow{b} 2$\n- $1,3$: $1 \\xrightarrow{a} 1 \\xrightarrow{b} 2 \\xrightarrow{a} 3$\n- $1,4$: $1 \\xrightarrow{a} 1 \\xrightarrow{a} 1 \\xrightarrow{b} 2 \\xrightarrow{a} 3 \\xrightarrow{a} 4$\n- $2,3$: $2 \\xrightarrow{a} 3$\n- $2,4$: $2 \\xrightarrow{a} 3 \\xrightarrow{a} 4$\n- $3,4$: $3 \\xrightarrow{a} 4$\n- $4,3$: $4 \\xrightarrow{d} 3$", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 LAC] Ananna", "background": "", "description": "Dananland is a very typical country: it consists of $N$ cities, each identified by a distinct number. These cities are connected by $M$ unidirectional roads, where each road has a name.\n\nAnanna is a bright little girl who lives in Dananland. Unfortunately, she was born with a terrible disease: she can only read backwards. After being a victim of terrible bullying by her peers, or, as Ananna calls them, *sreep*, she found solace in palindromes: words that are the same when read backwards.\n\nAnanna’s mom, Evee, is trying to help her with her condition. One way she helps is by taking her on road trips. A road trip is a sequence of roads that starts at some city $U$ and ends at a different city $V$; the same road may appear more than once.\n\nWhile on a road trip, Evee asks Ananna the first letter of each road name, so she can practice looking at the start of words. This is, obviously, a source of great anxiety to Ananna, so to avoid having a *kcatta cinap*, Evee always makes sure that the sequence formed by taking the first letter of each road’s name, in the order they are traversed, is a palindrome.\n\nEvee is now looking at a map of Dananland, and she wonders: How many distinct pairs of cities $U,V$ exist such that Evee can take a road trip from $U$ to $V$?", "inputFormat": "The first line contains two integers $N$ and $M$ ($1 \\le N, M \\le 5000$), indicating respectively the number of cities and the number of roads in Dananland. Each city is identified by a distinct integer from $1$ to $N$.\n\nEach of the next $M$ lines contains two integers $U$ and $V$ ($1 \\le U, V \\le N$) and a lowercase letter $C$, representing that there is a unidirectional road from $U$ to $V$ whose name starts with $C$. Several roads may connect the same pair of cities, and a road may connect a city to itself.", "outputFormat": "Output a single line with an integer indicating the number of pairs of cities $U,V$ such that $U \\ne V$, there is a road trip from $U$ to $V$, and the letters of the roads (in the order they are traversed) form a palindrome.", "hint": "### Explanation of sample 1:\n\nThe 7 pairs of cities and possible road trips are:\n\n- $1,2$: $1 \\xrightarrow{b} 2$\n- $1,3$: $1 \\xrightarrow{a} 1 \\xrightarrow{b} 2 \\xrightarrow{a} 3$\n- $1,4$: $1 \\xrightarrow{a} 1 \\xrightarrow{a} 1 \\xrightarrow{b} 2 \\xrightarrow{a} 3 \\xrightarrow{a} 4$\n- $2,3$: $2 \\xrightarrow{a} 3$\n- $2,4$: $2 \\xrightarrow{a} 3 \\xrightarrow{a} 4$\n- $3,4$: $3 \\xrightarrow{a} 4$\n- $4,3$: $4 \\xrightarrow{d} 3$", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 LAC] Ananna", "background": "", "description": "Dananland 是一个非常典型的国家：它由 $N$ 个城市组成，每个城市都有一个唯一的编号。这些城市通过 $M$ 条有向道路相连，每条道路都有一个名字。\n\nAnanna 是居住在 Dananland 的一个聪明的小女孩。不幸的是，她生来患有一种严重的疾病：她只能倒着阅读单词。在被她的同龄人——或者像 Ananna 称呼他们的那样，叫做 **sreep**——残忍地欺凌之后，她在回文词中找到了慰藉：回文词就是正读和倒读都相同的单词。\n\nAnanna 的妈妈 Evee 正试图帮助她应对这种情况。其中一种帮助方式就是带她进行公路旅行。一次公路旅行是指从某个城市 $U$ 开始，到一个不同的城市 $V$ 结束的一系列道路的序列；同一条道路可以在序列中出现多次。\n\n在一次公路旅行中，Evee 会询问 Ananna 每条道路名称的第一个字母，这样她可以练习看单词的开头。这显然给 Ananna 带来了巨大的焦虑，为了避免一次 **kcatta cinap**（panic attack），Evee 总是确保按遍历顺序取出的每条道路名称的首字母所构成的序列是一个回文串。\n\nEvee 现在正在查看 Dananland 的地图，她想知道：有多少个不同的城市对 $U, V$ 存在，使得 Evee 可以进行一次从 $U$ 到 $V$ 的公路旅行？", "inputFormat": "第一行包含两个整数 $N$ 和 $M$（$1 \\le N, M \\le 5000$），分别表示 Dananland 中城市的数量和道路的数量。每个城市由 $1$ 到 $N$ 之间的一个不同整数标识。\n\n接下来的 $M$ 行，每行包含两个整数 $U$ 和 $V$（$1 \\le U, V \\le N$）以及一个小写字母 $C$，表示存在一条从 $U$ 到 $V$ 的有向道路，其名称以字母 $C$ 开头。连接同一对城市的道路可能有多条，并且道路可以连接一个城市到它自身。", "outputFormat": "输出一行一个整数，表示满足以下条件的城市对 $U, V$ 的数量：$U \\ne V$，存在一条从 $U$ 到 $V$ 的公路旅行，并且道路的字母（按遍历顺序）构成一个回文串。\n", "hint": "### 样例 1 解释：\n\n7 对城市及可能的公路旅行路线如下：\n\n- $1,2$：$1 \\xrightarrow{b} 2$\n- $1,3$：$1 \\xrightarrow{a} 1 \\xrightarrow{b} 2 \\xrightarrow{a} 3$\n- $1,4$：$1 \\xrightarrow{a} 1 \\xrightarrow{a} 1 \\xrightarrow{b} 2 \\xrightarrow{a} 3 \\xrightarrow{a} 4$\n- $2,3$：$2 \\xrightarrow{a} 3$\n- $2,4$：$2 \\xrightarrow{a} 3 \\xrightarrow{a} 4$\n- $3,4$：$3 \\xrightarrow{a} 4$\n- $4,3$：$4 \\xrightarrow{d} 3$\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15096", "type": "P", "difficulty": 5, "samples": [["5 3\n101\n001\n010\n011\n000", "01221"], ["3 2\n01\n10\n11", "*"], ["4 3\n011\n000\n100\n011", "1002"], ["1 3\n000", "*"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "Special Judge", "线性基", "ICPC"], "title": "[ICPC 2025 LAC] Brazilian FootXOR", "background": "", "description": "Alex is coaching the famous Brazilian FootXOR Club. For today’s training, they want to organize a match between two teams selected from the $N$ club members. To ensure a fair match, the two teams must be balanced.\n\nEach club member has a set of abilities represented as a $K$-digit binary string. Each digit corresponds to a characteristic that the player may or may not have. Surprisingly, it is not the quantity of players having each characteristic that matters when deciding whether two teams are balanced: the important thing is the parity of that quantity.\n\nTwo teams are considered balanced if they have the same number of players and the bitwise XOR of the ability strings of all players in the first team is equal to the bitwise XOR of the ability strings of all players in the second team. Of course, each club member can only be assigned to at most one team and, for a match to happen, teams cannot be empty.\n\nAlex is really busy right now. As their coaching assistant, you must determine how to assign players to the two teams. If it is impossible to fulfill the coach’s conditions, you must inform the coach accordingly.", "inputFormat": "The first line contains two integers $N$ and $K$ ($1 \\le N, K \\le 1500$), indicating respectively the number of club members and the number of binary digits used to represent their abilities. Each club member is identified by a distinct integer from $1$ to $N$.\n\nThe $i$-th of the next $N$ lines contains a $K$-digit binary string $A_i$, representing the abilities of club member $i$. Note that $A_i$ has a fixed length and so it may contain leading zeros.\n", "outputFormat": "Output a single line with a string of length $N$ if it is possible to fulfill the coach’s conditions. In this case, the $i$-th character of the string must be a digit “1”, “2” or “0”, indicating respectively that club member $i$ is assigned to the first team, to the second team, or to none of the two teams. If there are multiple solutions, output any of them.\n\nIf the coach’s conditions cannot be honored, output the character “*” (asterisk) instead.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 LAC] Brazilian FootXOR", "background": "", "description": "Alex is coaching the famous Brazilian FootXOR Club. For today’s training, they want to organize a match between two teams selected from the $N$ club members. To ensure a fair match, the two teams must be balanced.\n\nEach club member has a set of abilities represented as a $K$-digit binary string. Each digit corresponds to a characteristic that the player may or may not have. Surprisingly, it is not the quantity of players having each characteristic that matters when deciding whether two teams are balanced: the important thing is the parity of that quantity.\n\nTwo teams are considered balanced if they have the same number of players and the bitwise XOR of the ability strings of all players in the first team is equal to the bitwise XOR of the ability strings of all players in the second team. Of course, each club member can only be assigned to at most one team and, for a match to happen, teams cannot be empty.\n\nAlex is really busy right now. As their coaching assistant, you must determine how to assign players to the two teams. If it is impossible to fulfill the coach’s conditions, you must inform the coach accordingly.", "inputFormat": "The first line contains two integers $N$ and $K$ ($1 \\le N, K \\le 1500$), indicating respectively the number of club members and the number of binary digits used to represent their abilities. Each club member is identified by a distinct integer from $1$ to $N$.\n\nThe $i$-th of the next $N$ lines contains a $K$-digit binary string $A_i$, representing the abilities of club member $i$. Note that $A_i$ has a fixed length and so it may contain leading zeros.\n", "outputFormat": "Output a single line with a string of length $N$ if it is possible to fulfill the coach’s conditions. In this case, the $i$-th character of the string must be a digit “1”, “2” or “0”, indicating respectively that club member $i$ is assigned to the first team, to the second team, or to none of the two teams. If there are multiple solutions, output any of them.\n\nIf the coach’s conditions cannot be honored, output the character “*” (asterisk) instead.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 LAC] Brazilian FootXOR", "background": "", "description": "Alex 正在执教著名的巴西 FootXOR 俱乐部。为了今天的训练，他们想组织一场由 $N$ 名俱乐部成员中选出的两支队伍之间的比赛。为了确保比赛公平，两支队伍必须是平衡的。\n\n每名俱乐部成员的能力由一个 $K$ 位二进制字符串表示。每一位对应一种球员可能拥有或不拥有的特征。令人惊讶的是，在决定两支队伍是否平衡时，重要的不是拥有每种特征的球员数量，而是该数量的奇偶性。\n\n两支队伍被认为是平衡的，如果它们拥有相同数量的球员，并且第一支队伍所有球员能力字符串的按位异或值等于第二支队伍所有球员能力字符串的按位异或值。当然，每名俱乐部成员最多只能被分配到一个队伍，并且为了比赛能够进行，队伍不能为空。\n\nAlex 现在非常忙。作为他们的执教助理，你必须决定如何将球员分配到两支队伍。如果无法满足教练的条件，你必须相应地告知教练。", "inputFormat": "第一行包含两个整数 $N$ 和 $K$（$1 \\le N, K \\le 1500$），分别表示俱乐部成员的数量和用于表示他们能力的二进制位数。每名俱乐部成员由 $1$ 到 $N$ 之间的一个不同整数标识。\n\n接下来的 $N$ 行中的第 $i$ 行包含一个 $K$ 位二进制字符串 $A_i$，表示俱乐部成员 $i$ 的能力。请注意 $A_i$ 有固定的长度，因此可能包含前导零。", "outputFormat": "如果能够满足教练的条件，则输出一行一个长度为 $N$ 的字符串。在这种情况下，字符串的第 $i$ 个字符必须是数字“1”、“2”或“0”，分别表示俱乐部成员 $i$ 被分配到第一支队伍、第二支队伍或者两支队伍都不分配。如果存在多种解决方案，输出任意一种即可。\n\n如果无法满足教练的条件，则输出字符“*”（星号）。\n", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15097", "type": "P", "difficulty": 2, "samples": [["2 6\n-20 -10 -5 -10 -2 -40", "-5"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "二分", "单调队列", "2025", "ICPC"], "title": "[ICPC 2025 LAC] Coatless in Yakutsk", "background": "", "description": "It was your first time visiting Salvador, and you made the rookie mistake of sleeping on the beach. You woke up red, sunburned, and frankly, humiliated. Swearing vengeance against the sun and all its terrible consequences, you decided that your next vacation would be somewhere with a real winter – like Yakutsk, Russia, where the average temperature is $-42^\\circ$ Celsius.\n\nBut you came prepared! You brought a warm, cozy coat. The coat is perfect, it warms you very well. Maybe too well, as you get sweaty and the coat gets dirty after $C$ days of use. Since your trip lasts more than $C$ days, you must find a way to avoid walking around smelling bad.\n\nTo do so, when the coat gets dirty, you cannot wear it until it is washed, but you may also choose to wash it earlier. On any day you do not wear the coat – whether because it is dirty or being washed – you must endure the day’s temperature without its protection. After being washed, the coat is fresh and ready to be worn again. At the start of your trip, the coat is clean.\n\nGiven the daily temperatures in Yakutsk for the duration of your trip, you must determine the lowest temperature on a day when you are forced to be without your coat, assuming you schedule wash days optimally to make this temperature as high as possible.", "inputFormat": "The first line contains two integers $C$ and $N$ ($1 \\le C < N \\le 10^5$), indicating respectively the number of days you can wear the coat before it gets dirty, and the duration in days of your holidays.\n\nThe second line contains $N$ integers $T_1, T_2, \\dots, T_N$ ($-50 \\le T_i \\le 50$ for $i = 1, 2, \\dots, N$), where $T_i$ is the temperature on the $i$-th day.\n", "outputFormat": "Output a single line with an integer indicating the minimum temperature you must endure without your coat.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 LAC] Coatless in Yakutsk", "background": "", "description": "It was your first time visiting Salvador, and you made the rookie mistake of sleeping on the beach. You woke up red, sunburned, and frankly, humiliated. Swearing vengeance against the sun and all its terrible consequences, you decided that your next vacation would be somewhere with a real winter – like Yakutsk, Russia, where the average temperature is $-42^\\circ$ Celsius.\n\nBut you came prepared! You brought a warm, cozy coat. The coat is perfect, it warms you very well. Maybe too well, as you get sweaty and the coat gets dirty after $C$ days of use. Since your trip lasts more than $C$ days, you must find a way to avoid walking around smelling bad.\n\nTo do so, when the coat gets dirty, you cannot wear it until it is washed, but you may also choose to wash it earlier. On any day you do not wear the coat – whether because it is dirty or being washed – you must endure the day’s temperature without its protection. After being washed, the coat is fresh and ready to be worn again. At the start of your trip, the coat is clean.\n\nGiven the daily temperatures in Yakutsk for the duration of your trip, you must determine the lowest temperature on a day when you are forced to be without your coat, assuming you schedule wash days optimally to make this temperature as high as possible.", "inputFormat": "The first line contains two integers $C$ and $N$ ($1 \\le C < N \\le 10^5$), indicating respectively the number of days you can wear the coat before it gets dirty, and the duration in days of your holidays.\n\nThe second line contains $N$ integers $T_1, T_2, \\dots, T_N$ ($-50 \\le T_i \\le 50$ for $i = 1, 2, \\dots, N$), where $T_i$ is the temperature on the $i$-th day.\n", "outputFormat": "Output a single line with an integer indicating the minimum temperature you must endure without your coat.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 LAC] Coatless in Yakutsk", "background": "", "description": "这是你第一次到访萨尔瓦多，并且犯了一个新手错误：在海滩上睡着了。你醒来时皮肤通红、被晒伤了，坦率地说，感到非常丢脸。你发誓要向太阳及其所有可怕的后果复仇，于是决定你的下一个假期要去一个拥有真正冬天的地方——比如俄罗斯的雅库茨克，那里的平均气温是 $-42^\\circ$ 摄氏度。\n\n但你是有备而来的！你带了一件温暖舒适的厚外套。这件外套非常完美，能很好地为你保暖。可能好过头了，因为穿了 $C$ 天之后，你会出汗，外套也会变脏。由于你的旅行持续时间超过 $C$ 天，你必须想办法避免穿着有异味的外套到处走。\n\n为此，当外套变脏时，你不能穿它直到它被洗净，但你也可以选择提前清洗它。在任何一天你不穿外套时——无论是因为它脏了还是在清洗中——你都必须忍受当天的气温而得不到它的保护。外套洗完后，就会变得干净并可以再次穿着。在你的旅行开始时，外套是干净的。\n\n给定你旅行期间雅库茨克每日的气温，你需要确定在被迫没有外套穿的日子里，你所经历的最低气温，前提是你最优地安排清洗日期，以使这个温度尽可能高。", "inputFormat": "第一行包含两个整数 $C$ 和 $N$（$1 \\le C < N \\le 10^5$），分别表示你在外套变脏前可以穿着它的天数，以及你假期的持续天数。\n\n第二行包含 $N$ 个整数 $T_1, T_2, \\dots, T_N$（对于 $i = 1, 2, \\dots, N$，有 $-50 \\le T_i \\le 50$），其中 $T_i$ 是第 $i$ 天的气温。", "outputFormat": "输出一行一个整数，表示你在没有外套穿的日子里必须忍受的最低气温。\n", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15098", "type": "P", "difficulty": 4, "samples": [["3 2\n1 3 1\n1 2\n2 3", "7 9 7"], ["3 3\n1 3 1\n2 3\n1 2\n3 1", "5 9 5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["并查集", "2025", "ICPC"], "title": "[ICPC 2025 LAC] Dangerous City", "background": "", "description": "Alice is moving to the city of Nogonia, and to decide where to live, she is evaluating the safety of the city.\n\nNogonia is a planned city with $N$ intersections, numbered from $1$ to $N$, and $M$ streets. Each street connects two intersections bidirectionally. It is guaranteed that any intersection can reach all other intersections using the streets, and no two streets connect the same pair of intersections.\n\nThe government of Nogonia publishes a **danger rating** $D_i$ for each intersection $i$. However, Alice thinks these ratings are insufficient because she wants to assess the safety of moving through the city, not just where she lives. So, she developed her own way to measure how dangerous the city is.\n\nFor any given path in the city, Alice defines its **path risk** as the **maximum** danger rating among all intersections on that path, including its endpoints. The **risk factor** between two intersections $U$ and $V$, denoted as $f(U,V)$, is the **minimum** possible path risk among all paths connecting $U$ and $V$. By definition, the only path from an intersection $U$ to itself is the trivial path containing only $U$, so we have $f(U,U) = D_U$. Finally, she assigns a **danger score** to each intersection $U$, denoted as:\n\n$$\nS_U = \\sum_{V=1}^{N} f(U,V)\n$$\n\nIn other words, the danger score of an intersection $U$ is the sum of its risk factors to every intersection in the city.\n\nComputing these danger scores for all intersections is not easy, so Alice asks for your help!", "inputFormat": "The first line contains two integers $N$ ($2 \\le N \\le 3 \\cdot 10^5$) and $M$ ($1 \\le M \\le 3 \\cdot 10^5$), indicating respectively the number of intersections and streets in Nogonia. Each intersection is identified by a distinct integer from $1$ to $N$.\n\nThe second line contains $N$ integers $D_1, D_2, \\dots, D_N$ ($1 \\le D_i \\le 10^9$ for $i = 1, 2, \\dots, N$), where $D_i$ is the danger rating of intersection $i$.\n\nEach of the next $M$ lines contains two integers $U$ and $V$ ($1 \\le U, V \\le N$ and $U \\ne V$), indicating that there is a two-way street between intersections $U$ and $V$.\n\nIt is guaranteed that there is at most one street between each pair of intersections and that any intersection can be reached from any other using one or more streets.", "outputFormat": "Output a single line with $N$ integers $S_1, S_2, \\dots, S_N$, that is, the danger scores of all the intersections.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 LAC] Dangerous City", "background": "", "description": "Alice is moving to the city of Nogonia, and to decide where to live, she is evaluating the safety of the city.\n\nNogonia is a planned city with $N$ intersections, numbered from $1$ to $N$, and $M$ streets. Each street connects two intersections bidirectionally. It is guaranteed that any intersection can reach all other intersections using the streets, and no two streets connect the same pair of intersections.\n\nThe government of Nogonia publishes a **danger rating** $D_i$ for each intersection $i$. However, Alice thinks these ratings are insufficient because she wants to assess the safety of moving through the city, not just where she lives. So, she developed her own way to measure how dangerous the city is.\n\nFor any given path in the city, Alice defines its **path risk** as the **maximum** danger rating among all intersections on that path, including its endpoints. The **risk factor** between two intersections $U$ and $V$, denoted as $f(U,V)$, is the **minimum** possible path risk among all paths connecting $U$ and $V$. By definition, the only path from an intersection $U$ to itself is the trivial path containing only $U$, so we have $f(U,U) = D_U$. Finally, she assigns a **danger score** to each intersection $U$, denoted as:\n\n$$\nS_U = \\sum_{V=1}^{N} f(U,V)\n$$\n\nIn other words, the danger score of an intersection $U$ is the sum of its risk factors to every intersection in the city.\n\nComputing these danger scores for all intersections is not easy, so Alice asks for your help!", "inputFormat": "The first line contains two integers $N$ ($2 \\le N \\le 3 \\cdot 10^5$) and $M$ ($1 \\le M \\le 3 \\cdot 10^5$), indicating respectively the number of intersections and streets in Nogonia. Each intersection is identified by a distinct integer from $1$ to $N$.\n\nThe second line contains $N$ integers $D_1, D_2, \\dots, D_N$ ($1 \\le D_i \\le 10^9$ for $i = 1, 2, \\dots, N$), where $D_i$ is the danger rating of intersection $i$.\n\nEach of the next $M$ lines contains two integers $U$ and $V$ ($1 \\le U, V \\le N$ and $U \\ne V$), indicating that there is a two-way street between intersections $U$ and $V$.\n\nIt is guaranteed that there is at most one street between each pair of intersections and that any intersection can be reached from any other using one or more streets.", "outputFormat": "Output a single line with $N$ integers $S_1, S_2, \\dots, S_N$, that is, the danger scores of all the intersections.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 LAC] Dangerous City", "background": "", "description": "Alice 正搬到 Nogonia 市，为了决定住在哪里，她正在评估这座城市的安全性。\n\nNogonia 是一个规划城市，拥有 $N$ 个路口，编号从 $1$ 到 $N$，以及 $M$ 条街道。每条街道双向连接两个路口。保证任意路口都可以通过街道到达所有其他路口，且任意两个路口之间最多由一条街道直接相连。\n\nNogonia 市政$ $府为每个路口 $i$ 公布了一个 **危险评级** $D_i$。然而，Alice 认为这些评级还不够，因为她想评估在城市中移动的安全性，而不仅仅是她居住的地点。因此，她开发了自己的方法来衡量这座城市的危险程度。\n\n对于城市中的任意一条路径，Alice 将其 **路径风险** 定义为该路径上（包括端点）所有路口的危险评级的 **最大值**。两个路口 $U$ 和 $V$ 之间的 **风险因子**，记作 $f(U,V)$，是连接 $U$ 和 $V$ 的所有路径中可能的最小路径风险。根据定义，从一个路口 $U$ 到其自身的唯一路径是只包含 $U$ 的平凡路径，因此我们有 $f(U,U) = D_U$。最后，她为每个路口 $U$ 分配一个 **危险分数**，记作：\n\n$$\nS_U = \\sum_{V=1}^{N} f(U,V)\n$$\n\n换句话说，一个路口 $U$ 的危险分数是它与城市中每一个路口之间的风险因子之和。\n\n为所有路口计算这些危险分数并不容易，所以 Alice 请求你的帮助！", "inputFormat": "第一行包含两个整数 $N$（$2 \\le N \\le 3 \\cdot 10^5$）和 $M$（$1 \\le M \\le 3 \\cdot 10^5$），分别表示 Nogonia 市的路口数量和街道数量。每个路口由 $1$ 到 $N$ 之间的一个不同整数标识。\n\n第二行包含 $N$ 个整数 $D_1, D_2, \\dots, D_N$（对于 $i = 1, 2, \\dots, N$，有 $1 \\le D_i \\le 10^9$），其中 $D_i$ 是路口 $i$ 的危险评级。\n\n接下来的 $M$ 行，每行包含两个整数 $U$ 和 $V$（$1 \\le U, V \\le N$ 且 $U \\ne V$），表示路口 $U$ 和 $V$ 之间有一条双向街道。\n\n保证每对路口之间最多有一条街道，并且任意路口都可以通过一条或多条街道到达其他任意路口。", "outputFormat": "输出一行，包含 $N$ 个整数 $S_1, S_2, \\dots, S_N$，即所有路口的危险分数。\n", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15099", "type": "P", "difficulty": 7, "samples": [["6\n2 1\n1 3\n3 5\n5 6\n4 3\n8\nb 1\ns 2\nb 6\ns 3\nb 4\ns 5\nb 3\ns 4", "0\n1\n0\n5\n4\n3\n0\n1"], ["7\n4 2\n2 1\n1 3\n3 6\n5 2\n3 7\n6\ns 4\nb 5\nb 6\ns 7\nb 2\ns 3", "1\n0\n0\n1\n0\n1"], ["2\n1 2\n5\ns 1\nb 1\ns 1\nb 1\ns 1", "5\n4\n3\n2\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "ICPC"], "title": "[ICPC 2025 LAC] Exciting Business Opportunities", "background": "", "description": "The Treeland subway system consists of $N$ stations connected by $N-1$ bidirectional tunnels. The tunnels are arranged in such a way that it is always possible to travel between any two stations. The system is already considered to be the most efficient in the country: there are trains between every pair of stations in the system.\n\nAlejandro, from the subway improvement department, has been tasked with making the system even better and more attractive for passengers and businesses. To that end, the department collected $P$ proposals from companies. Each proposal is either to sponsor some station (basically, add a sign with the name of the company on the station), or to open a business at some station (a restaurant, a store, or anything like this). Notice that there is no restriction on the number of proposals that can be accepted for each station.\n\nCompanies willing to open businesses in the system, though, informed that they will withdraw their proposals unless the station $X$ where their business is located, is either a sponsored station or there is a train between two sponsored stations that goes through $X$. Of course, Alejandro does not want to select proposals that will later be withdrawn. Thus, he will make sure to select a set of proposals such that no proposal in the set will be withdrawn. He calls such a set a **valid set of proposals**.\n\nThe figure below shows sponsored stations in red/dashed circles and businesses in blue/dotted circles. The set of proposals in (a) is valid because the business proposal for station 3 is located exactly on the path between the two sponsored stations 2 and 4. The set of proposals in (b) is also valid, because the business proposal for station 1 is located exactly on a sponsored station. On the contrary, the set of proposals in (c) is not valid: even though the business proposal for station 3 is located on a path between two sponsored stations, the business proposal for station 5 is not.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/4zquiszy.png)\n:::\n\nTo choose a valid set, Alejandro took the $P$ proposals (each one described on a piece of paper), and numbered them from $1$ to $P$. Now he wants to select a contiguous range of proposals that form a valid set. More precisely, he wants to pick two integers $i$ and $j$, with $1 \\le i \\le j \\le P$, such that proposals $i, i+1, \\dots, j$ form a valid set; besides, he wants the set to be as large as possible. Alejandro is not sure about which should be the initial proposal $i$ in the range he will select. Help him compute for each $i$ from $1$ to $P$, the size of the largest contiguous range of proposals that form a valid set, starting at proposal $i$.", "inputFormat": "The first line contains an integer $N$ ($2 \\le N \\le 10^5$) indicating the number of stations in the subway system. Each station is identified by a distinct integer from $1$ to $N$.\n\nEach of the next $N-1$ lines contains two integers $U$ and $V$ ($1 \\le U, V \\le N$ and $U \\ne V$), representing that there is a bidirectional tunnel between stations $U$ and $V$. It is guaranteed that it is possible to go from any station to any other station using the tunnels.\n\nThe next line contains an integer $P$ ($1 \\le P \\le 10^5$) denoting the number of proposals submitted by companies. Each proposal is identified by a distinct integer from $1$ to $P$.\n\nThe $i$-th of the next $P$ lines describes proposal $i$ with a character $C$ and an integer $X$ ($1 \\le X \\le N$). For a sponsoring proposal $C$ is the lowercase letter \"s\", while for a business proposal it is the lowercase letter \"b\"; in both cases $X$ is the corresponding station. Notice that each station can have an arbitrary number of proposals of any type.", "outputFormat": "Output $P$ lines. The $i$-th line must contain an integer indicating the size of the largest valid set of contiguous proposals whose initial proposal is $i$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 LAC] Exciting Business Opportunities", "background": "", "description": "The Treeland subway system consists of $N$ stations connected by $N-1$ bidirectional tunnels. The tunnels are arranged in such a way that it is always possible to travel between any two stations. The system is already considered to be the most efficient in the country: there are trains between every pair of stations in the system.\n\nAlejandro, from the subway improvement department, has been tasked with making the system even better and more attractive for passengers and businesses. To that end, the department collected $P$ proposals from companies. Each proposal is either to sponsor some station (basically, add a sign with the name of the company on the station), or to open a business at some station (a restaurant, a store, or anything like this). Notice that there is no restriction on the number of proposals that can be accepted for each station.\n\nCompanies willing to open businesses in the system, though, informed that they will withdraw their proposals unless the station $X$ where their business is located, is either a sponsored station or there is a train between two sponsored stations that goes through $X$. Of course, Alejandro does not want to select proposals that will later be withdrawn. Thus, he will make sure to select a set of proposals such that no proposal in the set will be withdrawn. He calls such a set a **valid set of proposals**.\n\nThe figure below shows sponsored stations in red/dashed circles and businesses in blue/dotted circles. The set of proposals in (a) is valid because the business proposal for station 3 is located exactly on the path between the two sponsored stations 2 and 4. The set of proposals in (b) is also valid, because the business proposal for station 1 is located exactly on a sponsored station. On the contrary, the set of proposals in (c) is not valid: even though the business proposal for station 3 is located on a path between two sponsored stations, the business proposal for station 5 is not.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/4zquiszy.png)\n:::\n\nTo choose a valid set, Alejandro took the $P$ proposals (each one described on a piece of paper), and numbered them from $1$ to $P$. Now he wants to select a contiguous range of proposals that form a valid set. More precisely, he wants to pick two integers $i$ and $j$, with $1 \\le i \\le j \\le P$, such that proposals $i, i+1, \\dots, j$ form a valid set; besides, he wants the set to be as large as possible. Alejandro is not sure about which should be the initial proposal $i$ in the range he will select. Help him compute for each $i$ from $1$ to $P$, the size of the largest contiguous range of proposals that form a valid set, starting at proposal $i$.", "inputFormat": "The first line contains an integer $N$ ($2 \\le N \\le 10^5$) indicating the number of stations in the subway system. Each station is identified by a distinct integer from $1$ to $N$.\n\nEach of the next $N-1$ lines contains two integers $U$ and $V$ ($1 \\le U, V \\le N$ and $U \\ne V$), representing that there is a bidirectional tunnel between stations $U$ and $V$. It is guaranteed that it is possible to go from any station to any other station using the tunnels.\n\nThe next line contains an integer $P$ ($1 \\le P \\le 10^5$) denoting the number of proposals submitted by companies. Each proposal is identified by a distinct integer from $1$ to $P$.\n\nThe $i$-th of the next $P$ lines describes proposal $i$ with a character $C$ and an integer $X$ ($1 \\le X \\le N$). For a sponsoring proposal $C$ is the lowercase letter \"s\", while for a business proposal it is the lowercase letter \"b\"; in both cases $X$ is the corresponding station. Notice that each station can have an arbitrary number of proposals of any type.", "outputFormat": "Output $P$ lines. The $i$-th line must contain an integer indicating the size of the largest valid set of contiguous proposals whose initial proposal is $i$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 LAC] Exciting Business Opportunities", "background": "", "description": "Treeland 的地铁系统由 $N$ 个车站组成，这些车站通过 $N-1$ 条双向隧道连接。隧道的布局保证任意两个车站之间总是可以通行。该系统已经被认为是该国最高效的地铁系统：系统中的每对车站之间都有列车运行。\n\n地铁改进部门的 Alejandro 接到一项任务，要使该系统对乘客和商业更加友好、更具吸引力。为此，该部门收集了来自公司的 $P$ 份提案。每份提案要么是赞助某个车站（基本上就是在车站上添加带有公司名称的标识），要么是在某个车站开设一家企业（例如餐厅、商店等）。请注意，每个车站可以接受的提案数量没有限制。\n\n然而，愿意在该系统中开设企业的公司表示，除非他们企业所在的车站 $X$ 是一个被赞助的车站，或者存在一条连接两个被赞助车站的列车线路经过 $X$，否则他们将撤回提案。当然，Alejandro 不希望选择那些之后会被撤回的提案。因此，他将确保选择一个提案集合，使得集合中的任何提案都不会被撤回。他称这样的集合为 **有效的提案集合**。\n\n下图展示了被赞助的车站用红色/虚线圆圈表示，企业用蓝色/点状圆圈表示。图 (a) 中的提案集合是有效的，因为车站 3 的企业提案恰好位于两个被赞助车站 2 和 4 之间的路径上。图 (b) 中的提案集合也是有效的，因为车站 1 的企业提案恰好位于一个被赞助车站上。相反，图 (c) 中的提案集合是无效的：尽管车站 3 的企业提案位于两个被赞助车站之间的路径上，但车站 5 的企业提案并不满足条件。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/4zquiszy.png)\n:::\n\n为了选择一个有效的集合，Alejandro 拿到了这 $P$ 份提案（每份提案都写在一张纸上），并将它们从 $1$ 到 $P$ 编号。现在他想选择一个连续的提案区间，使其构成一个有效的集合。更准确地说，他想选择两个整数 $i$ 和 $j$，满足 $1 \\le i \\le j \\le P$，使得提案 $i, i+1, \\dots, j$ 构成一个有效的集合；此外，他希望这个集合尽可能大。Alejandro 不确定他应选择的区间起始提案 $i$ 是哪一个。请帮助他计算，对于每个从 $1$ 到 $P$ 的 $i$，以提案 $i$ 为起始的、构成有效集合的最大连续提案区间的大小。", "inputFormat": "第一行包含一个整数 $N$（$2 \\le N \\le 10^5$），表示地铁系统中的车站数量。每个车站由 $1$ 到 $N$ 之间的一个不同整数标识。\n\n接下来的 $N-1$ 行，每行包含两个整数 $U$ 和 $V$（$1 \\le U, V \\le N$ 且 $U \\ne V$），表示车站 $U$ 和 $V$ 之间有一条双向隧道。保证使用这些隧道可以从任意车站到达其他任意车站。\n\n接下来一行包含一个整数 $P$（$1 \\le P \\le 10^5$），表示公司提交的提案数量。每份提案由 $1$ 到 $P$ 之间的一个不同整数标识。\n\n接下来的 $P$ 行中的第 $i$ 行描述提案 $i$，包含一个字符 $C$ 和一个整数 $X$（$1 \\le X \\le N$）。对于赞助提案，$C$ 是小写字母 “s”；对于企业提案，$C$ 是小写字母 “b”；在这两种情况下，$X$ 都是对应的车站。请注意，每个车站可以拥有任意数量的任意类型的提案。", "outputFormat": "输出 $P$ 行。第 $i$ 行必须包含一个整数，表示以提案 $i$ 为起始的、构成有效集合的最大连续提案区间的大小。\n", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15100", "type": "P", "difficulty": 6, "samples": [["7\n+ 2 5 3\n+ 4 7 5\n? 1 10\n? 2 7\n? 4 5\n- 2\n? 4 5", "0\n3\n5\n3"], ["4\n+ 1 2 1\n+ 3 4 1\n? 1 2\n? 1 4", "1\n0"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2025", "ICPC"], "title": "[ICPC 2025 LAC] Festival Signs", "background": "", "description": "During a festival, advertisement signs are added to and removed from a stage at different moments. Each sign has a rectangular shape and is placed perpendicular to the ground, with one side resting firmly on the ground.\n\nA webcam is livestreaming the festival, showing a 2D image of the stage. In this image, the bottom border corresponds to the ground. Each sign covers a rectangular area in the image. A sign is described by an interval $[A, B]$ and a height $H$, meaning it covers all points $(x, y)$ of the image where $A \\le x \\le B$ and $0 \\le y < H$.\n\nNote that the sign covers the points on the bottom and side borders of the rectangle, but not the top border. Besides, rectangles representing different signs may overlap.\n\nDuring the livestream, the manager will make several queries at different moments. Each query specifies an interval $[L, R]$, and asks for the minimum height $y \\ge 0$ among all uncovered points $(x, y)$ with $L \\le x \\le R$, with $x$ and $y$ being real numbers.\n\nYour task is to write a program to process a sequence of $N$ events: sign additions, sign removals, and queries about the minimum uncovered height over a given interval.\n\nAs an example, consider the following sequence of $N = 7$ events given in chronological order (see picture below):\n\n- Sign with $[A, B] = [2, 5]$ and $H = 3$ is added.\n- Sign with $[A, B] = [4, 7]$ and $H = 5$ is added.\n- Query $[1, 10]$ is made. The answer to this query is $0$. An uncovered point with minimum height within the interval is, for instance, the point with coordinates $(1.5, 0)$.\n- Query $[2, 7]$ is made, with answer $3$.\n- Query $[4, 5]$ is made, with answer $5$.\n- Second added sign is removed.\n- Query $[4, 5]$ is made, with answer $3$. Note that the removal of the second added sign changed the answer of query $[4, 5]$.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/gw9d0s7k.png)\n:::", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 2 \\cdot 10^5$) indicating the number of events.\n\nEach of the next $N$ lines describes an event, in chronological order. The content of the line depends on the event, as follows:\n\n- **Sign addition**: the line contains the character “+” (plus sign) and three integers $A$, $B$ and $H$ ($1 \\le A, B, H \\le 10^9$ and $A < B$), representing that a sign is added, covering a rectangle of the image as explained in the statement. Each added sign is assigned a sequential integer identifier, starting from $1$.\n- **Sign removal**: the line contains the character “-” (minus sign) and an integer $I \\ge 1$, indicating that the sign with identifier $I$ is removed. It is guaranteed that $I$ identifies an added and not previously removed sign.\n- **Query**: the line contains the character “?” (question mark) and two integers $L$ and $R$ ($1 \\le L < R \\le 10^9$), asking for the minimum uncovered height within the interval $[L, R]$, as explained in the statement. It is guaranteed that the input contains at least one query.", "outputFormat": "Output a line for each query, with an integer indicating the minimum uncovered height within the corresponding interval.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 LAC] Festival Signs", "background": "", "description": "During a festival, advertisement signs are added to and removed from a stage at different moments. Each sign has a rectangular shape and is placed perpendicular to the ground, with one side resting firmly on the ground.\n\nA webcam is livestreaming the festival, showing a 2D image of the stage. In this image, the bottom border corresponds to the ground. Each sign covers a rectangular area in the image. A sign is described by an interval $[A, B]$ and a height $H$, meaning it covers all points $(x, y)$ of the image where $A \\le x \\le B$ and $0 \\le y < H$.\n\nNote that the sign covers the points on the bottom and side borders of the rectangle, but not the top border. Besides, rectangles representing different signs may overlap.\n\nDuring the livestream, the manager will make several queries at different moments. Each query specifies an interval $[L, R]$, and asks for the minimum height $y \\ge 0$ among all uncovered points $(x, y)$ with $L \\le x \\le R$, with $x$ and $y$ being real numbers.\n\nYour task is to write a program to process a sequence of $N$ events: sign additions, sign removals, and queries about the minimum uncovered height over a given interval.\n\nAs an example, consider the following sequence of $N = 7$ events given in chronological order (see picture below):\n\n- Sign with $[A, B] = [2, 5]$ and $H = 3$ is added.\n- Sign with $[A, B] = [4, 7]$ and $H = 5$ is added.\n- Query $[1, 10]$ is made. The answer to this query is $0$. An uncovered point with minimum height within the interval is, for instance, the point with coordinates $(1.5, 0)$.\n- Query $[2, 7]$ is made, with answer $3$.\n- Query $[4, 5]$ is made, with answer $5$.\n- Second added sign is removed.\n- Query $[4, 5]$ is made, with answer $3$. Note that the removal of the second added sign changed the answer of query $[4, 5]$.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/gw9d0s7k.png)\n:::", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 2 \\cdot 10^5$) indicating the number of events.\n\nEach of the next $N$ lines describes an event, in chronological order. The content of the line depends on the event, as follows:\n\n- **Sign addition**: the line contains the character “+” (plus sign) and three integers $A$, $B$ and $H$ ($1 \\le A, B, H \\le 10^9$ and $A < B$), representing that a sign is added, covering a rectangle of the image as explained in the statement. Each added sign is assigned a sequential integer identifier, starting from $1$.\n- **Sign removal**: the line contains the character “-” (minus sign) and an integer $I \\ge 1$, indicating that the sign with identifier $I$ is removed. It is guaranteed that $I$ identifies an added and not previously removed sign.\n- **Query**: the line contains the character “?” (question mark) and two integers $L$ and $R$ ($1 \\le L < R \\le 10^9$), asking for the minimum uncovered height within the interval $[L, R]$, as explained in the statement. It is guaranteed that the input contains at least one query.", "outputFormat": "Output a line for each query, with an integer indicating the minimum uncovered height within the corresponding interval.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 LAC] Festival Signs", "background": "", "description": "在一个节日期间，广告牌会在不同时刻被添加到舞台上或从舞台上移除。每个广告牌呈矩形，垂直于地面放置，其中一条边稳固地接触地面。\n\n一个网络摄像头正在直播节日，展示舞台的二维图像。在这幅图像中，底部边界对应地面。每个广告牌覆盖图像中的一个矩形区域。一个广告牌由一个区间 $[A, B]$ 和一个高度 $H$ 描述，这意味着它覆盖图像中所有满足 $A \\le x \\le B$ 且 $0 \\le y < H$ 的点 $(x, y)$。\n\n请注意，广告牌覆盖矩形底部和侧边边界上的点，但不覆盖顶部边界上的点。此外，表示不同广告牌的矩形可以重叠。\n\n在直播过程中，经理会在不同时刻进行多次查询。每次查询指定一个区间 $[L, R]$，并询问在满足 $L \\le x \\le R$ 的所有未被覆盖的点 $(x, y)$ 中，最小的 $y$ 值（其中 $x$ 和 $y$ 是实数）。\n\n你的任务是编写一个程序来处理一系列 $N$ 个事件：广告牌的添加、广告牌的移除，以及关于给定区间内最小未被覆盖高度的查询。\n\n例如，考虑以下按时间顺序给出的 $N = 7$ 个事件序列（见下图）：\n\n- 添加一个广告牌，其 $[A, B] = [2, 5]$，$H = 3$。\n- 添加一个广告牌，其 $[A, B] = [4, 7]$，$H = 5$。\n- 进行查询 $[1, 10]$。该查询的答案是 $0$。该区间内具有最小高度的未被覆盖点的一个例子是坐标为 $(1.5, 0)$ 的点。\n- 进行查询 $[2, 7]$，答案为 $3$。\n- 进行查询 $[4, 5]$，答案为 $5$。\n- 移除第二次添加的广告牌。\n- 进行查询 $[4, 5]$，答案为 $3$。请注意，移除第二个广告牌改变了查询 $[4, 5]$ 的答案。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/gw9d0s7k.png)\n:::", "inputFormat": "第一行包含一个整数 $N$（$1 \\le N \\le 2 \\cdot 10^5$），表示事件的数量。\n\n接下来的 $N$ 行按时间顺序描述每个事件。每行的内容取决于事件类型，如下所示：\n\n- **广告牌添加**：该行包含字符 “+”（加号）和三个整数 $A$、$B$ 和 $H$（$1 \\le A, B, H \\le 10^9$ 且 $A < B$），表示添加一个广告牌，其覆盖图像中的矩形区域，如题目描述中所述。每个添加的广告牌被分配一个从 $1$ 开始的连续整数标识符。\n- **广告牌移除**：该行包含字符 “-”（减号）和一个整数 $I \\ge 1$，表示移除标识符为 $I$ 的广告牌。保证 $I$ 标识一个已被添加且之前未被移除的广告牌。\n- **查询**：该行包含字符 “?”（问号）和两个整数 $L$ 和 $R$（$1 \\le L < R \\le 10^9$），询问区间 $[L, R]$ 内最小未被覆盖高度，如题目描述中所述。保证输入中至少包含一个查询。", "outputFormat": "对每个查询输出一行，包含一个整数，表示对应区间内的最小未被覆盖高度。\n", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15101", "type": "P", "difficulty": 4, "samples": [["4\n| 3 1\n- 2 1\n| 3 2\n- 2 1", "SUSS"], ["4\n| 3 1\n| 2 3\n| 1 2\n- 2 2", "SSSU"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "树状数组", "2025", "离散化", "差分", "ICPC"], "title": "[ICPC 2025 LAC] Game of Pieces", "background": "", "description": "If you’ve ever played Tetris for long enough, you might have experienced the **Tetris effect** – seeing falling blocks even after you have stopped playing. To stay focused on solving problems and avoid such distractions, we will consider a simplified version of the game.\n\nThe game is played on a board composed of square cells arranged in a grid. Columns of the grid are numbered sequentially from left to right. The board is infinite to the right and to the top. Each cell is either empty or filled, and initially, all cells are empty.\n\nA sequence of $N$ rectangular pieces is given, and the pieces are dropped onto the board one at a time. Pieces have different sizes. A piece of size $L$ is either vertical ($L \\times 1$ cells) or horizontal ($1 \\times L$ cells). When a piece is dropped at a specified column, it starts at a location above all the currently filled cells and falls straight down until it either reaches the bottom of the board or lands on top of an already filled cell. Once a piece lands, it fills its final set of cells.\n\nEach time a piece lands, the game is considered **safe** if no empty cell has a filled cell above it; otherwise the game is **unsafe**, the offending piece is removed from the board, and the game continues with the next piece as if it had never been dropped.\n\nIn the example below, corresponding to the first sample input, the game becomes unsafe once the second piece lands, hence the piece is removed and the next pieces keep the game safe.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/zhs065dh.png)\n:::\n\nGiven the sequence of pieces and their drop positions, your task is to determine, for each piece, whether it makes the board unsafe after landing.", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 2 \\cdot 10^5$), indicating the number of pieces.\n\nEach of the next $N$ lines describes a piece with a character $C$ and two integers $L$ and $P$ ($1 \\le L \\le 10^9$ and $1 \\le P \\le 10^{18}$), representing respectively the type of the piece, its length, and the position where it is dropped. For a vertical piece, $C$ is the character “|” (pipe), the piece has $L \\times 1$ cells, and it is dropped at column $P$. For a horizontal piece, $C$ is the character “-” (hyphen), the piece has $1 \\times L$ cells, and it is dropped spanning columns $P, P+1, \\dots, P+L-1$.", "outputFormat": "Output a single line with a string of length $N$. The $i$-th character of the string must be the uppercase letter “U” if the game becomes unsafe immediately after the $i$-th piece lands on the board, and the uppercase letter “S” otherwise.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 LAC] Game of Pieces", "background": "", "description": "If you’ve ever played Tetris for long enough, you might have experienced the **Tetris effect** – seeing falling blocks even after you have stopped playing. To stay focused on solving problems and avoid such distractions, we will consider a simplified version of the game.\n\nThe game is played on a board composed of square cells arranged in a grid. Columns of the grid are numbered sequentially from left to right. The board is infinite to the right and to the top. Each cell is either empty or filled, and initially, all cells are empty.\n\nA sequence of $N$ rectangular pieces is given, and the pieces are dropped onto the board one at a time. Pieces have different sizes. A piece of size $L$ is either vertical ($L \\times 1$ cells) or horizontal ($1 \\times L$ cells). When a piece is dropped at a specified column, it starts at a location above all the currently filled cells and falls straight down until it either reaches the bottom of the board or lands on top of an already filled cell. Once a piece lands, it fills its final set of cells.\n\nEach time a piece lands, the game is considered **safe** if no empty cell has a filled cell above it; otherwise the game is **unsafe**, the offending piece is removed from the board, and the game continues with the next piece as if it had never been dropped.\n\nIn the example below, corresponding to the first sample input, the game becomes unsafe once the second piece lands, hence the piece is removed and the next pieces keep the game safe.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/zhs065dh.png)\n:::\n\nGiven the sequence of pieces and their drop positions, your task is to determine, for each piece, whether it makes the board unsafe after landing.", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 2 \\cdot 10^5$), indicating the number of pieces.\n\nEach of the next $N$ lines describes a piece with a character $C$ and two integers $L$ and $P$ ($1 \\le L \\le 10^9$ and $1 \\le P \\le 10^{18}$), representing respectively the type of the piece, its length, and the position where it is dropped. For a vertical piece, $C$ is the character “|” (pipe), the piece has $L \\times 1$ cells, and it is dropped at column $P$. For a horizontal piece, $C$ is the character “-” (hyphen), the piece has $1 \\times L$ cells, and it is dropped spanning columns $P, P+1, \\dots, P+L-1$.", "outputFormat": "Output a single line with a string of length $N$. The $i$-th character of the string must be the uppercase letter “U” if the game becomes unsafe immediately after the $i$-th piece lands on the board, and the uppercase letter “S” otherwise.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 LAC] Game of Pieces", "background": "", "description": "如果你玩过足够久的俄罗斯方块，你可能体验过俄罗斯方块效应——即使在停止游戏后，仍会看到下落的方块。为了专注于解决问题并避免这种干扰，我们将考虑一个简化版本的游戏。\n\n游戏在一个由方格单元格组成的棋盘上进行。网格的列从左到右依次编号。棋盘向右和向上是无限的。每个单元格要么是空的，要么是被填充的，初始时所有单元格都是空的。\n\n给定一个由 $N$ 个矩形方块组成的序列，这些方块被逐一放置到棋盘上。方块有不同的尺寸。一个尺寸为 $L$ 的方块要么是竖直的（$L \\times 1$ 个单元格），要么是水平的（$1 \\times L$ 个单元格）。当一个方块被放置到指定的列时，它从所有当前已被填充的单元格上方开始，垂直下落，直到触及棋盘底部或落到一个已被填充的单元格顶部。一旦方块落地，它将填充其最终占据的一组单元格。\n\n每次一个方块落地后，如果没有任何空单元格的上方存在被填充的单元格，则认为游戏状态是 **安全的**；否则游戏状态是 **不安全的**，违规的方块将从棋盘上移除，游戏继续处理下一个方块，就好像它从未被放置过一样。\n\n在下图中，对应第一个样例输入，游戏在第二个方块落地后变得不安全，因此该方块被移除，后续的方块保持游戏安全。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/zhs065dh.png)\n:::\n\n给定方块的序列及其放置位置，你的任务是确定每个方块在落地后是否会使棋盘变得不安全。", "inputFormat": "第一行包含一个整数 $N$（$1 \\le N \\le 2 \\cdot 10^5$），表示方块的数量。\n\n接下来的 $N$ 行，每行描述一个方块，包含一个字符 $C$ 和两个整数 $L$ 和 $P$（$1 \\le L \\le 10^9$ 且 $1 \\le P \\le 10^{18}$），分别表示方块的类型、长度以及放置位置。对于竖直方块，$C$ 是字符 “|”（竖线），方块有 $L \\times 1$ 个单元格，并被放置在第 $P$ 列。对于水平方块，$C$ 是字符 “-”（连字符），方块有 $1 \\times L$ 个单元格，并跨越第 $P, P+1, \\dots, P+L-1$ 列放置。", "outputFormat": "输出一行一个长度为 $N$ 的字符串。如果第 $i$ 个方块在棋盘上落地后游戏立即变得不安全，则字符串的第 $i$ 个字符必须是大写字母 “U”，否则是大写字母 “S”。\n", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15102", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3\n2 10 11\n5 6 7", "1\n2\n3\n5\n9\n10\n12\n20\n21"], ["4\n999999998 999999999 1000000000\n999999998 999999999 1000000000\n999999998 999999999 1000000000\n999999998 999999999 1000000000", "999999998\n999999999\n1000000000\n1999999998\n1999999999\n2000000000\n2999999998\n2999999999\n3000000000\n3999999998\n3999999999\n4000000000"]], "limits": {"time": [9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "ICPC"], "title": "[ICPC 2025 LAC] Horrible Restaurants", "background": "", "description": "Ricardo is a restaurant critic, which means he spends his time eating at restaurants and giving them a rating. Each rating is an integer number of stars between $0$ and $3$, inclusive. Thus, there are exactly four possible ratings.\n\nDuring his visit to Cheapland, he must review $N$ restaurants. Unfortunately, all of them are terrible, and if left to his honest opinion, Ricardo would give $0$ stars to every restaurant. However, the government of Cheapland can bribe Ricardo to increase the rating of any restaurant.\n\nEach restaurant has its own bribe costs, which depend both on the restaurant itself and on the number of stars awarded. Bribing Ricardo to give a restaurant $3$ stars is always more expensive than bribing him for $2$ stars, which in turn is more expensive than bribing him for $1$ star. Naturally, no payment is required for a $0$-star rating.\n\nAs one might imagine, the Cheapland government wants to spend as little as possible while making their gastronomic scene look as strong as possible. To plan their strategy, they need to determine the minimum cost required to achieve a total of $k$ stars among all the $N$ restaurants, for every integer value $k$ between $1$ and $3N$, inclusive.\n\nHowever, since bribe costs vary from restaurant to restaurant, calculating these values isn’t straightforward – which is why they need your help.", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 2 \\cdot 10^5$) indicating the number of restaurants.\n\nEach of the next $N$ lines describes a restaurant with three integers $C_1$, $C_2$ and $C_3$ ($1 \\le C_1 < C_2 < C_3 \\le 10^9$), where $C_i$ is the cost of getting a rating of $i$ stars for the restaurant.\n", "outputFormat": "Output a line for each $k$ from $1$ to $3N$ (inclusive), with an integer indicating the minimum total cost required to achieve exactly $k$ stars among all the $N$ restaurants.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 LAC] Horrible Restaurants", "background": "", "description": "Ricardo is a restaurant critic, which means he spends his time eating at restaurants and giving them a rating. Each rating is an integer number of stars between $0$ and $3$, inclusive. Thus, there are exactly four possible ratings.\n\nDuring his visit to Cheapland, he must review $N$ restaurants. Unfortunately, all of them are terrible, and if left to his honest opinion, Ricardo would give $0$ stars to every restaurant. However, the government of Cheapland can bribe Ricardo to increase the rating of any restaurant.\n\nEach restaurant has its own bribe costs, which depend both on the restaurant itself and on the number of stars awarded. Bribing Ricardo to give a restaurant $3$ stars is always more expensive than bribing him for $2$ stars, which in turn is more expensive than bribing him for $1$ star. Naturally, no payment is required for a $0$-star rating.\n\nAs one might imagine, the Cheapland government wants to spend as little as possible while making their gastronomic scene look as strong as possible. To plan their strategy, they need to determine the minimum cost required to achieve a total of $k$ stars among all the $N$ restaurants, for every integer value $k$ between $1$ and $3N$, inclusive.\n\nHowever, since bribe costs vary from restaurant to restaurant, calculating these values isn’t straightforward – which is why they need your help.", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 2 \\cdot 10^5$) indicating the number of restaurants.\n\nEach of the next $N$ lines describes a restaurant with three integers $C_1$, $C_2$ and $C_3$ ($1 \\le C_1 < C_2 < C_3 \\le 10^9$), where $C_i$ is the cost of getting a rating of $i$ stars for the restaurant.\n", "outputFormat": "Output a line for each $k$ from $1$ to $3N$ (inclusive), with an integer indicating the minimum total cost required to achieve exactly $k$ stars among all the $N$ restaurants.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 LAC] Horrible Restaurants", "background": "", "description": "Ricardo 是一名餐厅评论家，这意味着他花时间在餐厅用餐并给出评分。每个评分是一个介于 $0$ 到 $3$（含）之间的整数星数。因此，总共有恰好四种可能的评分。\n\n在他访问 Cheapland 期间，他必须评价 $N$ 家餐厅。不幸的是，所有这些餐厅都很糟糕，如果任由 Ricardo 表达真实意见，他会给每家餐厅都打 $0$ 星。然而，Cheapland 的政$ $府可以贿赂 Ricardo 来提高任何一家餐厅的评分。\n\n每家餐厅都有自己的贿赂成本，这既取决于餐厅本身，也取决于获得的星数。贿赂 Ricardo 给一家餐厅 $3$ 星总是比贿赂他给 $2$ 星更昂贵，而贿赂 $2$ 星又比贿赂 $1$ 星更昂贵。自然，$0$ 星评分不需要任何支付。\n\n正如人们可能想象的那样，Cheapland 政$ $府希望在使他们的美食景观看起来尽可能强大的同时，花费尽可能少的钱。为了规划他们的策略，他们需要确定在所有 $N$ 家餐厅中总共获得 $k$ 颗星所需的最小成本，其中 $k$ 是 $1$ 到 $3N$（含）之间的每个整数值。\n\n然而，由于贿赂成本因餐厅而异，计算这些值并不简单——这就是他们需要你帮助的原因。", "inputFormat": "第一行包含一个整数 $N$（$1 \\le N \\le 2 \\cdot 10^5$），表示餐厅的数量。\n\n接下来的 $N$ 行，每行描述一家餐厅，包含三个整数 $C_1$、$C_2$ 和 $C_3$（$1 \\le C_1 < C_2 < C_3 \\le 10^9$），其中 $C_i$ 表示让该餐厅获得 $i$ 星评分的成本。", "outputFormat": "对于每个从 $1$ 到 $3N$（含）的 $k$，输出一行，包含一个整数，表示在所有 $N$ 家餐厅中恰好总共获得 $k$ 颗星所需的最小总成本。", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15103", "type": "P", "difficulty": 5, "samples": [["4\n1 2 3 4\n10\n? 2 3 2\n? 3 99 99 99\n- 1\n- 4\n? 2 3 3\n? 3 4 1 4\n+ 64 3\n+ 1 2\n? 4 1 2 64 3\n? 4 1 3 64 2", "2\n0\n1\n0\n*\n1"], ["1\n217\n1\n? 1 314", "0"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "ICPC", "链表"], "title": "[ICPC 2025 LAC] Infinite Arrays", "background": "", "description": "A subarray of an array $B$ is a contiguous sequence of elements taken from $B$. For example, if $B = [3, 1, 4, 1, 5]$, then $[3, 1, 4]$, $[4, 1]$, the empty array $[]$ and the whole array $B$ are subarrays of $B$ (among others), while $[3, 4, 5]$ and $[1, 3]$ are not subarrays of $B$.\n\nWe also define $C^m$ as the array obtained by the concatenation of $m$ copies of the array $C$. For example, if $C = [3, 2]$ then $C^1 = [3, 2]$, $C^2 = [3, 2, 3, 2]$ and $C^\\infty = [\\dots, 3, 2, 3, 2, 3, 2, \\dots]$.\n\nIn this problem you are given an array $P$ containing no repeated numbers, and you have to process a sequence of events that occur in order. The events can be of three types:\n\n- **Delete**: a number present in $P$ must be deleted. For example, if $P = [2, 3, 4]$ and the number $3$ has to be deleted, once the event is processed $P$ will become $[2, 4]$.\n- **Insert**: a number not present in $P$ must be inserted into $P$ before some other number present in $P$. For example, if $P = [4, 3, 2, 1]$ and the number $9$ must be inserted before the number $1$, once the event is processed $P$ will become $[4, 3, 2, 9, 1]$.\n- **Query**: the length of the longest common subarray between $P^\\infty$ and $A^\\infty$ must be computed, where $A$ is an array given in the query. For example, if $P = [1, 2, 3, 4]$ and $A = [3, 2]$, then the longest common subarray between $P^\\infty$ and $A^\\infty$ is $[2, 3]$, so the answer to the query is $2$.\n\nAre you ready for this challenge?", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 5 \\cdot 10^5$) indicating the initial length of $P$.\n\nThe second line contains $N$ different integers $P_1, P_2, \\dots, P_N$ ($1 \\le P_i \\le 10^6$ for $i = 1, 2, \\dots, N$).\n\nThe third line contains an integer $E$ ($1 \\le E \\le 5 \\cdot 10^5$) representing the number of events that need to be processed.\n\nEach of the next $E$ lines describes an event, in the order they must be processed. The content of the line depends on the event, as follows:\n\n- **Delete**: the line contains the character “-” (minus sign) and an integer $X$ ($1 \\le X \\le 10^6$, and $X \\in P$), denoting that $X$ must be deleted from $P$. It is guaranteed that after the removal $P$ does not become empty.\n- **Insert**: the line contains the character “+” (plus sign) and two integers $Y$ and $Z$ ($1 \\le Y, Z \\le 10^6$, $Y \\notin P$, and $Z \\in P$), denoting that $Y$ must be inserted into $P$ immediately to the left of $Z$.\n- **Query**: the line contains the character “?” (question mark), a positive integer $K$, and $K$ integers $A_1, A_2, \\dots, A_K$ ($1 \\le A_i \\le 10^6$ for $i = 1, 2, \\dots, K$), indicating that the length of the longest common subarray between $P^\\infty$ and $A^\\infty$ must be computed. It is guaranteed that the input contains at least one query, and the sum of $K$ across all the queries is at most $10^6$.", "outputFormat": "Output a line for each query, with an integer indicating the length of the longest common subarray between $P^\\infty$ and $A^\\infty$, or the character “*” (asterisk) if the length of the longest common subarray is larger than $10^{18}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 LAC] Infinite Arrays", "background": "", "description": "A subarray of an array $B$ is a contiguous sequence of elements taken from $B$. For example, if $B = [3, 1, 4, 1, 5]$, then $[3, 1, 4]$, $[4, 1]$, the empty array $[]$ and the whole array $B$ are subarrays of $B$ (among others), while $[3, 4, 5]$ and $[1, 3]$ are not subarrays of $B$.\n\nWe also define $C^m$ as the array obtained by the concatenation of $m$ copies of the array $C$. For example, if $C = [3, 2]$ then $C^1 = [3, 2]$, $C^2 = [3, 2, 3, 2]$ and $C^\\infty = [\\dots, 3, 2, 3, 2, 3, 2, \\dots]$.\n\nIn this problem you are given an array $P$ containing no repeated numbers, and you have to process a sequence of events that occur in order. The events can be of three types:\n\n- **Delete**: a number present in $P$ must be deleted. For example, if $P = [2, 3, 4]$ and the number $3$ has to be deleted, once the event is processed $P$ will become $[2, 4]$.\n- **Insert**: a number not present in $P$ must be inserted into $P$ before some other number present in $P$. For example, if $P = [4, 3, 2, 1]$ and the number $9$ must be inserted before the number $1$, once the event is processed $P$ will become $[4, 3, 2, 9, 1]$.\n- **Query**: the length of the longest common subarray between $P^\\infty$ and $A^\\infty$ must be computed, where $A$ is an array given in the query. For example, if $P = [1, 2, 3, 4]$ and $A = [3, 2]$, then the longest common subarray between $P^\\infty$ and $A^\\infty$ is $[2, 3]$, so the answer to the query is $2$.\n\nAre you ready for this challenge?", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 5 \\cdot 10^5$) indicating the initial length of $P$.\n\nThe second line contains $N$ different integers $P_1, P_2, \\dots, P_N$ ($1 \\le P_i \\le 10^6$ for $i = 1, 2, \\dots, N$).\n\nThe third line contains an integer $E$ ($1 \\le E \\le 5 \\cdot 10^5$) representing the number of events that need to be processed.\n\nEach of the next $E$ lines describes an event, in the order they must be processed. The content of the line depends on the event, as follows:\n\n- **Delete**: the line contains the character “-” (minus sign) and an integer $X$ ($1 \\le X \\le 10^6$, and $X \\in P$), denoting that $X$ must be deleted from $P$. It is guaranteed that after the removal $P$ does not become empty.\n- **Insert**: the line contains the character “+” (plus sign) and two integers $Y$ and $Z$ ($1 \\le Y, Z \\le 10^6$, $Y \\notin P$, and $Z \\in P$), denoting that $Y$ must be inserted into $P$ immediately to the left of $Z$.\n- **Query**: the line contains the character “?” (question mark), a positive integer $K$, and $K$ integers $A_1, A_2, \\dots, A_K$ ($1 \\le A_i \\le 10^6$ for $i = 1, 2, \\dots, K$), indicating that the length of the longest common subarray between $P^\\infty$ and $A^\\infty$ must be computed. It is guaranteed that the input contains at least one query, and the sum of $K$ across all the queries is at most $10^6$.", "outputFormat": "Output a line for each query, with an integer indicating the length of the longest common subarray between $P^\\infty$ and $A^\\infty$, or the character “*” (asterisk) if the length of the longest common subarray is larger than $10^{18}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 LAC] Infinite Arrays", "background": "", "description": "一个数组 $B$ 的**子数组**是指从 $B$ 中取出的一段连续元素序列。例如，如果 $B = [3, 1, 4, 1, 5]$，那么 $[3, 1, 4]$、$[4, 1]$、空数组 $[]$ 和整个数组 $B$ 都是 $B$ 的子数组（还有其他子数组），而 $[3, 4, 5]$ 和 $[1, 3]$ 不是 $B$ 的子数组。\n\n我们还定义 $C^m$ 为将数组 $C$ 连接 $m$ 份所得到的数组。例如，如果 $C = [3, 2]$，那么 $C^1 = [3, 2]$，$C^2 = [3, 2, 3, 2]$，且 $C^\\infty = [\\dots, 3, 2, 3, 2, 3, 2, \\dots]$。\n\n在这个问题中，你被给定一个不包含重复数字的数组 $P$，并且你需要按顺序处理一系列事件。事件可以分为三种类型：\n\n- **删除**：必须从 $P$ 中删除一个存在的数字。例如，如果 $P = [2, 3, 4]$ 且数字 $3$ 需要被删除，处理完该事件后 $P$ 将变为 $[2, 4]$。\n- **插入**：必须将一个不存在于 $P$ 中的数字插入到 $P$ 中，并位于 $P$ 中某个现有数字之前。例如，如果 $P = [4, 3, 2, 1]$ 且数字 $9$ 需要插入到数字 $1$ 之前，处理完该事件后 $P$ 将变为 $[4, 3, 2, 9, 1]$。\n- **查询**：必须计算 $P^\\infty$ 和 $A^\\infty$ 之间的最长公共子数组的长度，其中 $A$ 是查询中给出的数组。例如，如果 $P = [1, 2, 3, 4]$ 且 $A = [3, 2]$，那么 $P^\\infty$ 和 $A^\\infty$ 之间的最长公共子数组是 $[2, 3]$，因此查询的答案是 $2$。\n\n你准备好迎接这个挑战了吗？", "inputFormat": "第一行包含一个整数 $N$（$1 \\le N \\le 5 \\cdot 10^5$），表示 $P$ 的初始长度。\n\n第二行包含 $N$ 个不同的整数 $P_1, P_2, \\dots, P_N$（对于 $i = 1, 2, \\dots, N$，有 $1 \\le P_i \\le 10^6$）。\n\n第三行包含一个整数 $E$（$1 \\le E \\le 5 \\cdot 10^5$），表示需要处理的事件数量。\n\n接下来的 $E$ 行按顺序描述每个事件。每行的内容取决于事件类型，如下所示：\n\n- **删除**：该行包含字符 “-”（减号）和一个整数 $X$（$1 \\le X \\le 10^6$，且 $X \\in P$），表示必须从 $P$ 中删除 $X$。保证删除后 $P$ 不会变为空。\n- **插入**：该行包含字符 “+”（加号）和两个整数 $Y$ 和 $Z$（$1 \\le Y, Z \\le 10^6$，$Y \\notin P$，且 $Z \\in P$），表示必须将 $Y$ 插入到 $P$ 中，紧邻 $Z$ 的左侧。\n- **查询**：该行包含字符 “?”（问号）、一个正整数 $K$ 以及 $K$ 个整数 $A_1, A_2, \\dots, A_K$（对于 $i = 1, 2, \\dots, K$，有 $1 \\le A_i \\le 10^6$），表示必须计算 $P^\\infty$ 和 $A^\\infty$ 之间的最长公共子数组的长度。保证输入中至少包含一个查询，并且所有查询的 $K$ 值之和不超过 $10^6$。", "outputFormat": "对每个查询输出一行，包含一个整数，表示 $P^\\infty$ 和 $A^\\infty$ 之间的最长公共子数组的长度；或者，如果最长公共子数组的长度大于 $10^{18}$，则输出字符 “*”（星号）。", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15104", "type": "P", "difficulty": 6, "samples": [["6\n1 0 0\n-1 0 0\n0 1 0\n0 -1 0\n0 0 1\n0 0 -1", "54.7356103172"], ["2\n314 314 314\n1 1 1", "90"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["计算几何", "2025", "Special Judge", "ICPC"], "title": "[ICPC 2025 LAC] Just Look Up", "background": "", "description": "The year is 2432, and after millennia of looking at the sky, astronomers have found all the stars. This arduous journey, which started with the discovery of the Sun in 450 BC, has finally come to an end. Since scientists can never be content, they have turned to the next best thing, and decided to find planets instead.\n\nA passionate group, the Planet Discovery Aficionados (PDA), has already started working on it! To find new planets, they have built the Large Astronomical Telescope of Amazing Might (LATAM) – a telescope that is extremely sensitive to light and thus can see even the tiniest planets.\n\nWhen pointed to the sky, LATAM’s field of view encompasses the portion of space enclosed strictly by a circular cone, with the vertex located at the Earth and extending infinitely away from it. The angle of the cone corresponding to the viewing area of LATAM can be adjusted by the members of PDA, and it ranges from $0^\\circ$ when the cone collapses to a line, to $90^\\circ$ when it encompasses a full half-space.\n\nSadly, because LATAM is so sensitive to light, if there are any stars in its field of view the picture will be a bright spot, and PDA won’t be able to see any planets. They ask for your help to determine the largest possible viewing angle that does not include any stars. PDA has enough money to travel anywhere on Earth, so you are allowed to point LATAM in any direction in the sky.\n\nBecause the universe is sufficiently large, PDA considers that all the stars and the Earth are fixed 3D points, with the Earth located at $(0,0,0)$. The group will give you the coordinates of all the stars in the universe. They hope that with this information, you will be able to complete your task.", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 500$) indicating the number of stars in the universe.\n\nEach of the next $N$ lines describes a star with three integers $X$, $Y$ and $Z$ ($-10^3 \\le X,Y,Z \\le 10^3$), representing that the star is located at $(X,Y,Z)$. No two stars share the same location, and no star is located at $(0,0,0)$.\n", "outputFormat": "Output a single line with the largest possible angle the telescope can be set to without observing any stars. If there exists a direction where a full half-space contains no stars, report $90^\\circ$. The output must have an absolute or relative error of at most $10^{-4}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 LAC] Just Look Up", "background": "", "description": "The year is 2432, and after millennia of looking at the sky, astronomers have found all the stars. This arduous journey, which started with the discovery of the Sun in 450 BC, has finally come to an end. Since scientists can never be content, they have turned to the next best thing, and decided to find planets instead.\n\nA passionate group, the Planet Discovery Aficionados (PDA), has already started working on it! To find new planets, they have built the Large Astronomical Telescope of Amazing Might (LATAM) – a telescope that is extremely sensitive to light and thus can see even the tiniest planets.\n\nWhen pointed to the sky, LATAM’s field of view encompasses the portion of space enclosed strictly by a circular cone, with the vertex located at the Earth and extending infinitely away from it. The angle of the cone corresponding to the viewing area of LATAM can be adjusted by the members of PDA, and it ranges from $0^\\circ$ when the cone collapses to a line, to $90^\\circ$ when it encompasses a full half-space.\n\nSadly, because LATAM is so sensitive to light, if there are any stars in its field of view the picture will be a bright spot, and PDA won’t be able to see any planets. They ask for your help to determine the largest possible viewing angle that does not include any stars. PDA has enough money to travel anywhere on Earth, so you are allowed to point LATAM in any direction in the sky.\n\nBecause the universe is sufficiently large, PDA considers that all the stars and the Earth are fixed 3D points, with the Earth located at $(0,0,0)$. The group will give you the coordinates of all the stars in the universe. They hope that with this information, you will be able to complete your task.", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 500$) indicating the number of stars in the universe.\n\nEach of the next $N$ lines describes a star with three integers $X$, $Y$ and $Z$ ($-10^3 \\le X,Y,Z \\le 10^3$), representing that the star is located at $(X,Y,Z)$. No two stars share the same location, and no star is located at $(0,0,0)$.\n", "outputFormat": "Output a single line with the largest possible angle the telescope can be set to without observing any stars. If there exists a direction where a full half-space contains no stars, report $90^\\circ$. The output must have an absolute or relative error of at most $10^{-4}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 LAC] Just Look Up", "background": "", "description": "现在是 2432 年，经过数千年的观天探索，天文学家们已经找到了所有的恒星。这项艰巨的旅程始于公元前 450 年太阳的发现，如今终于画上了句号。由于科学家们永远不会满足，他们转向了次优目标，决定开始寻找行星。\n\n一个充满热情的团体——“行星发现爱好者协会”（PDA）已经开始了这项工作！为了发现新的行星，他们建造了“强大无比的大型天文望远镜”（LATAM）——这台望远镜对光线极其敏感，因此甚至能看到最微小的行星。\n\n当指向天空时，LATAM 的视场严格包含一个圆锥体所包围的那部分空间，该圆锥的顶点位于地球，并无限远离地球延伸。LATAM 视场对应的圆锥角度可以由 PDA 成员调整，范围从圆锥坍缩为一条线时的 $0^\\circ$，到涵盖整个半空间时的 $90^\\circ$。\n\n遗憾的是，由于 LATAM 对光线如此敏感，如果视场内有任何恒星，图像就会变成一个亮点，PDA 将无法看到任何行星。他们请求你帮助确定不包含任何恒星的最大可能视场角。PDA 有足够的资金在地球上任何地方旅行，因此你可以将 LATAM 指向天空中的任意方向。\n\n由于宇宙足够大，PDA 认为所有恒星和地球都是固定的三维点，地球位于 $(0,0,0)$。该团体将给你宇宙中所有恒星的坐标。他们希望凭借这些信息，你能够完成任务。", "inputFormat": "第一行包含一个整数 $N$（$1 \\le N \\le 500$），表示宇宙中恒星的数量。\n\n接下来的 $N$ 行，每行描述一颗恒星，包含三个整数 $X$、$Y$ 和 $Z$（$-10^3 \\le X,Y,Z \\le 10^3$），表示该恒星位于 $(X,Y,Z)$。没有两颗恒星共享同一位置，也没有恒星位于 $(0,0,0)$。", "outputFormat": "输出一行，表示望远镜可以设置而不观测到任何恒星的最大可能角度。如果存在一个方向使得整个半空间不包含任何恒星，则报告 $90^\\circ$。输出的绝对误差或相对误差不得超过 $10^{-4}$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P15105", "type": "P", "difficulty": 4, "samples": [["3 0 20\n* 2\n!\n+ 5", "4"], ["1 0 1\n!", "*"], ["1 1 1\n+ 1", "*"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "数学", "贪心", "二分", "2025", "三分", "ICPC"], "title": "[ICPC 2025 LAC] Keep Fighting", "background": "", "description": "Bob is playing a card game where he must defeat a monster. Before the game starts, Bob's power is set to $P$, the monster's health is set to $H$, and Bob receives a deck of $N$ cards in his hands.\n\nEach card in the deck belongs to one of the following types:\n\n- **Multiply**: a card of this type has a number $X$ written on it. Playing it multiplies Bob's current power by $X$.\n- **Add**: a card of this type also has a number $Y$ written on it. Playing it increases Bob's current power by $Y$.\n- **Attack**: a card of this type allows Bob to attack the monster. Playing it reduces the monster's current health by Bob's current power.\n\nThe game is played in turns. In each turn, Bob must play exactly one card from his hand, after which the card is moved to a discard pile. If Bob has no cards left in his hand at the end of a turn, he retrieves all cards from the discard pile and can use them again in any order.\n\nThe monster is beaten as soon as its health reaches $0$ or less. Is it possible for Bob to beat the monster? If so, what is the minimum number of turns required?", "inputFormat": "The first line contains three integers $N$ ($1 \\le N \\le 50$), $P$ ($0 \\le P \\le 10^9$) and $H$ ($1 \\le H \\le 10^9$), indicating respectively the number of cards in the deck, Bob's initial power and the monster's initial health.\n\nEach of the next $N$ lines describes a card. The content of the line depends on the type of the card, as follows:\n\n- **Multiply**: the line contains the character “*” (asterisk) and an integer $X$ ($1 \\le X \\le 10^9$), representing the multiply factor provided by the card.\n- **Add**: the line contains the character “+” (plus sign) and an integer $Y$ ($1 \\le Y \\le 10^9$), indicating the increment provided by the card.\n- **Attack**: the line contains the character “!” (exclamation mark).", "outputFormat": "Output a single line with an integer indicating the minimum number of turns required to beat the monster, or the character “*” (asterisk) if it is impossible to beat the monster.", "hint": "### Explanation of sample 1:\n\nTo beat the monster in 4 turns, Bob can play as follows:\n\n1. Bob plays the $+5$ card, so his power becomes $5$.\n2. Bob plays the $*2$ card, so his power becomes $10$.\n3. Bob plays the $!$ card, so the monster's health becomes $10$. Since now Bob has no cards in his hands, all three cards go back to him.\n4. Bob plays the $!$ card, so the monster's health becomes $0$, and the monster is beaten.", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 LAC] Keep Fighting", "background": "", "description": "Bob is playing a card game where he must defeat a monster. Before the game starts, Bob's power is set to $P$, the monster's health is set to $H$, and Bob receives a deck of $N$ cards in his hands.\n\nEach card in the deck belongs to one of the following types:\n\n- **Multiply**: a card of this type has a number $X$ written on it. Playing it multiplies Bob's current power by $X$.\n- **Add**: a card of this type also has a number $Y$ written on it. Playing it increases Bob's current power by $Y$.\n- **Attack**: a card of this type allows Bob to attack the monster. Playing it reduces the monster's current health by Bob's current power.\n\nThe game is played in turns. In each turn, Bob must play exactly one card from his hand, after which the card is moved to a discard pile. If Bob has no cards left in his hand at the end of a turn, he retrieves all cards from the discard pile and can use them again in any order.\n\nThe monster is beaten as soon as its health reaches $0$ or less. Is it possible for Bob to beat the monster? If so, what is the minimum number of turns required?", "inputFormat": "The first line contains three integers $N$ ($1 \\le N \\le 50$), $P$ ($0 \\le P \\le 10^9$) and $H$ ($1 \\le H \\le 10^9$), indicating respectively the number of cards in the deck, Bob's initial power and the monster's initial health.\n\nEach of the next $N$ lines describes a card. The content of the line depends on the type of the card, as follows:\n\n- **Multiply**: the line contains the character “*” (asterisk) and an integer $X$ ($1 \\le X \\le 10^9$), representing the multiply factor provided by the card.\n- **Add**: the line contains the character “+” (plus sign) and an integer $Y$ ($1 \\le Y \\le 10^9$), indicating the increment provided by the card.\n- **Attack**: the line contains the character “!” (exclamation mark).", "outputFormat": "Output a single line with an integer indicating the minimum number of turns required to beat the monster, or the character “*” (asterisk) if it is impossible to beat the monster.", "hint": "### Explanation of sample 1:\n\nTo beat the monster in 4 turns, Bob can play as follows:\n\n1. Bob plays the $+5$ card, so his power becomes $5$.\n2. Bob plays the $*2$ card, so his power becomes $10$.\n3. Bob plays the $!$ card, so the monster's health becomes $10$. Since now Bob has no cards in his hands, all three cards go back to him.\n4. Bob plays the $!$ card, so the monster's health becomes $0$, and the monster is beaten.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 LAC] Keep Fighting", "background": "", "description": "Bob 正在玩一个需要击败怪物的卡牌游戏。在游戏开始前，Bob 的攻击力被设定为 $P$，怪物的生命值被设定为 $H$，并且 Bob 手上有 $N$ 张卡牌。\n\n牌库中的每张卡牌属于以下类型之一：\n\n- **乘法**：此类卡牌上写有一个数字 $X$。使用它会使 Bob 当前的攻击力乘以 $X$。\n- **加法**：此类卡牌上也写有一个数字 $Y$。使用它会使 Bob 当前的攻击力增加 $Y$。\n- **攻击**：此类卡牌允许 Bob 攻击怪物。使用它会使怪物的当前生命值减少 Bob 当前的攻击力。\n\n游戏按回合进行。在每个回合中，Bob 必须从他手中恰好打出一张卡牌，之后该卡牌被移到弃牌堆。如果在一个回合结束时 Bob 手中没有剩余卡牌，他会取回弃牌堆中的所有卡牌，并可以以任意顺序再次使用它们。\n\n一旦怪物的生命值达到 $0$ 或更低，怪物就被击败。Bob 有可能击败怪物吗？如果可以，所需的最少回合数是多少？\n", "inputFormat": "第一行包含三个整数 $N$（$1 \\le N \\le 50$）、$P$（$0 \\le P \\le 10^9$）和 $H$（$1 \\le H \\le 10^9$），分别表示牌库中的卡牌数量、Bob 的初始攻击力和怪物的初始生命值。\n\n接下来的 $N$ 行描述每张卡牌。每行的内容取决于卡牌的类型，如下所示：\n\n- **乘法**：该行包含字符 “*”（星号）和一个整数 $X$（$1 \\le X \\le 10^9$），表示该卡牌提供的乘数。\n- **加法**：该行包含字符 “+”（加号）和一个整数 $Y$（$1 \\le Y \\le 10^9$），表示该卡牌提供的增量。\n- **攻击**：该行包含字符 “!”（感叹号）。", "outputFormat": "输出一行，包含一个整数，表示击败怪物所需的最少回合数；或者，如果无法击败怪物，则输出字符 “*”（星号）。\n", "hint": "### 样例 1 解释：\n\n为了在 4 回合内击败怪物，Bob 可以按以下方式出牌：\n\n1. Bob 打出 $+5$ 卡牌，因此他的攻击力变为 $5$。\n2. Bob 打出 $*2$ 卡牌，因此他的攻击力变为 $10$。\n3. Bob 打出 $!$ 卡牌，因此怪物的生命值变为 $10$。由于此时 Bob 手中没有卡牌，所有三张卡牌回到他手中。\n4. Bob 打出 $!$ 卡牌，因此怪物的生命值变为 $0$，怪物被击败。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15106", "type": "P", "difficulty": 3, "samples": [["10\nGGGgGGG\ngggggGG\ngGGGGGg\nggGGGGG\nGggGgGG\nGgGGGgG\nGGGGGgG\nggGggGG\nGGGGGGG\nGgGGGGG", "0123456789"], ["3\nGGGg+GG\nGgGGGgG\nGGGGGgG", "056"], ["3\nGGGg+GG\nG-GGGgG\nGGGGGgG", "0*6"], ["2\n+++gG--\n---gG++", "00"], ["1\n-+-+-+-", "*"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "ICPC"], "title": "[ICPC 2025 LAC] LED Counter", "background": "", "description": "A LED counter is a device having $N$ positions arranged in a single row. Each position is able to display a digit from $0$ to $9$, and is made of seven LEDs, as this picture shows.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/zu7vhl4p.png)\n:::\n\nTo display a specific digit, just the appropriate LEDs are turned on. The following picture indicates which LEDs are turned on for each possible digit.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/fgc5q95d.png)\n:::\n\nAs you can see, all but the middle LED are turned on to display the digit $0$, the upper-right LED and the bottom-right LED are turned on to display the digit $1$, and so on.\n\nBy turning on the appropriate LEDs in each of the $N$ positions of the counter, the device is able to display $10^N$ distinct values, from $00\\cdots0$ ($N$ zeros) to $99\\cdots9$ ($N$ nines). Note that leading zeros are displayed.\n\nAstro Void has owned a LED counter for quite some time, and so the device might have some malfunctioning LEDs. While a good LED turns on or off when needed, a malfunctioning LED is always turned on or always turned off, independently of the intended value of the counter.\n\nGiven the description of the state of each LED in Astro Void’s LED counter (good LED that is turned on, good LED that is turned off, always-on LED, or always-off LED), you must tell the intended value of the counter, indicating which positions cannot be determined without ambiguity.\n\nAs an example of a LED counter with $N = 3$ positions, consider the picture below. If all the LEDs are good, then the intended value of the counter is of course $056$. If the bottom LED of the first position is an always-on LED, then the intended value of the counter is still $056$, because no other value would be displayed as the picture shows. However, if the bottom-left LED of the second position is an always-off LED, then the second position of the counter cannot be determined without ambiguity, since $056$ and $066$ would be displayed as shown.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/sozuba2o.png)\n:::", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 10^5$) indicating the number of positions in the LED counter.\n\nThe $i$-th of the next $N$ lines contains a string $S_i$ of length $7$ describing the seven LEDs in the $i$-th position of the counter. Each character of $S_i$ describes a particular LED, from left to right and from top to bottom, that is, in the following order: upper-left, bottom-left, top, middle, bottom, upper-right and bottom-right. The character is either an uppercase letter “G” (good LED that is turned on), a lowercase letter “g” (good LED that is turned off), a plus sign “+” (always-on LED) or a hyphen “-” (always-off LED). It is guaranteed that $S_i$ describes valid states for the LEDs in the $i$-th position of the counter. For instance, $S_i$ is not “ggggggg”, because when all LEDs are good, no digit would be displayed with all of them turned off.\n", "outputFormat": "Output a single line with a string of $N$ digits indicating the intended value of the counter. If a position of the counter cannot be determined without ambiguity, output the character “*” (asterisk) instead of the corresponding digit.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 LAC] LED Counter", "background": "", "description": "A LED counter is a device having $N$ positions arranged in a single row. Each position is able to display a digit from $0$ to $9$, and is made of seven LEDs, as this picture shows.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/zu7vhl4p.png)\n:::\n\nTo display a specific digit, just the appropriate LEDs are turned on. The following picture indicates which LEDs are turned on for each possible digit.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/fgc5q95d.png)\n:::\n\nAs you can see, all but the middle LED are turned on to display the digit $0$, the upper-right LED and the bottom-right LED are turned on to display the digit $1$, and so on.\n\nBy turning on the appropriate LEDs in each of the $N$ positions of the counter, the device is able to display $10^N$ distinct values, from $00\\cdots0$ ($N$ zeros) to $99\\cdots9$ ($N$ nines). Note that leading zeros are displayed.\n\nAstro Void has owned a LED counter for quite some time, and so the device might have some malfunctioning LEDs. While a good LED turns on or off when needed, a malfunctioning LED is always turned on or always turned off, independently of the intended value of the counter.\n\nGiven the description of the state of each LED in Astro Void’s LED counter (good LED that is turned on, good LED that is turned off, always-on LED, or always-off LED), you must tell the intended value of the counter, indicating which positions cannot be determined without ambiguity.\n\nAs an example of a LED counter with $N = 3$ positions, consider the picture below. If all the LEDs are good, then the intended value of the counter is of course $056$. If the bottom LED of the first position is an always-on LED, then the intended value of the counter is still $056$, because no other value would be displayed as the picture shows. However, if the bottom-left LED of the second position is an always-off LED, then the second position of the counter cannot be determined without ambiguity, since $056$ and $066$ would be displayed as shown.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/sozuba2o.png)\n:::", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 10^5$) indicating the number of positions in the LED counter.\n\nThe $i$-th of the next $N$ lines contains a string $S_i$ of length $7$ describing the seven LEDs in the $i$-th position of the counter. Each character of $S_i$ describes a particular LED, from left to right and from top to bottom, that is, in the following order: upper-left, bottom-left, top, middle, bottom, upper-right and bottom-right. The character is either an uppercase letter “G” (good LED that is turned on), a lowercase letter “g” (good LED that is turned off), a plus sign “+” (always-on LED) or a hyphen “-” (always-off LED). It is guaranteed that $S_i$ describes valid states for the LEDs in the $i$-th position of the counter. For instance, $S_i$ is not “ggggggg”, because when all LEDs are good, no digit would be displayed with all of them turned off.\n", "outputFormat": "Output a single line with a string of $N$ digits indicating the intended value of the counter. If a position of the counter cannot be determined without ambiguity, output the character “*” (asterisk) instead of the corresponding digit.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 LAC] LED Counter", "background": "", "description": "LED 计数器是一种有 $N$ 个位置按单行排列的设备。每个位置能够显示一个从 $0$ 到 $9$ 的数字，并且由七个 LED 组成，如下图所示。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/zu7vhl4p.png)\n:::\n\n要显示一个特定的数字，只需打开相应的 LED。下图指示了每个可能数字对应打开的 LED。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/fgc5q95d.png)\n:::\n\n正如你所见，除了中间的 LED 外，其他所有 LED 都打开以显示数字 $0$；右上和右下的 LED 打开以显示数字 $1$；依此类推。\n\n通过打开计数器的 $N$ 个位置中每个位置的相应 LED，该设备能够显示 $10^N$ 个不同的值，从 $00\\cdots0$（$N$ 个零）到 $99\\cdots9$（$N$ 个九）。请注意，前导零会被显示。\n\nAstro Void 拥有这个 LED 计数器已经有一段时间了，因此设备可能有一些故障的 LED。好的 LED 在需要时会打开或关闭，而故障的 LED 则总是打开或总是关闭，与计数器的预期值无关。\n\n给定 Astro Void 的 LED 计数器中每个 LED 状态的描述（打开的好 LED、关闭的好 LED、常亮 LED 或常灭 LED），你必须确定计数器的预期值，并指出哪些位置无法被无歧义地确定。\n\n以一个有 $N = 3$ 个位置的 LED 计数器为例，考虑下图。如果所有 LED 都是好的，那么计数器的预期值显然是 $056$。如果第一个位置的底部 LED 是一个常亮 LED，那么计数器的预期值仍然是 $056$，因为没有其他值会如图所示显示。然而，如果第二个位置的左下 LED 是一个常灭 LED，那么计数器的第二个位置就无法无歧义地确定，因为 $056$ 和 $066$ 都会显示为如图所示的样子。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/sozuba2o.png)\n:::", "inputFormat": "第一行包含一个整数 $N$（$1 \\le N \\le 10^5$），表示 LED 计数器的位置数量。\n\n接下来的 $N$ 行中的第 $i$ 行包含一个长度为 $7$ 的字符串 $S_i$，描述计数器第 $i$ 个位置的七个 LED。$S_i$ 的每个字符按从左到右、从上到下的顺序描述一个特定的 LED，即按以下顺序：左上、左下、顶部、中部、底部、右上、右下。字符是大写字母 “G”（打开的好 LED）、小写字母 “g”（关闭的好 LED）、加号 “+”（常亮 LED）或连字符 “-”（常灭 LED）。保证 $S_i$ 描述了计数器第 $i$ 个位置的 LED 的有效状态。例如，$S_i$ 不会是 “ggggggg”，因为当所有 LED 都是好的时，没有任何数字会显示为全部关闭的状态。", "outputFormat": "输出一行一个长度为 $N$ 的字符串，表示计数器的预期值。如果某个位置无法无歧义地确定，则在该位置输出字符 “*”（星号）代替相应的数字。\n", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
