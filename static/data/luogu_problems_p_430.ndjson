{"pid": "P9719", "type": "P", "difficulty": 7, "samples": [["6\n3\n1 1 1\n3\n1 1 2\n3\n1 1 3\n3\n1 2 1\n3\n1 2 2\n3\n1 2 3", "1 2 2\n-1\n1 2 1\n1 1 2\n2 1 2\n1 1 1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["字符串", "2022", "O2优化", "ICPC", "Lyndon 分解", "EC Final"], "title": "[EC Final 2022] Minimum Suffix", "background": "", "description": "For a string $s$ of length $n$, we define $p_j = x$ if $s[x\\ldots j]$ is the minimum suffix of $s[1\\ldots j]$, for all $j=1,\\ldots, n$. (A suffix is the minimum suffix of a string if it is lexicographically smaller than any other suffix of that string.)\n\nYou are to recover $s$ from $p_1,\\ldots, p_n$. If there are multiple answers, find the lexicographically smallest one.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 10^5$) representing the number of test cases.\n\nFor each test case, the first line contains a single integer $n$ ($1\\le n\\le 3\\times 10^6$) representing the length of $s$. The next line contains $n$ integers $p_1,\\ldots, p_n$ ($1\\le p_i\\le i$ for all $1\\le i\\le n$).\n\nIt is guaranteed that the sum of $n$ over all test cases does not exceed $3\\times 10^6$.", "outputFormat": "For each test case, output one line. If there is no solution, output $-1$. Otherwise, output the lexicographically smallest $s$. Characters of $s$ are represented by positive integers. Smaller integers represent smaller characters in the lexicographical order.", "hint": "As the input/output can be huge, it is recommended to use fast input/output methods.", "locale": "en", "translations": {"en": {"title": "[EC Final 2022] Minimum Suffix", "background": "", "description": "For a string $s$ of length $n$, we define $p_j = x$ if $s[x\\ldots j]$ is the minimum suffix of $s[1\\ldots j]$, for all $j=1,\\ldots, n$. (A suffix is the minimum suffix of a string if it is lexicographically smaller than any other suffix of that string.)\n\nYou are to recover $s$ from $p_1,\\ldots, p_n$. If there are multiple answers, find the lexicographically smallest one.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 10^5$) representing the number of test cases.\n\nFor each test case, the first line contains a single integer $n$ ($1\\le n\\le 3\\times 10^6$) representing the length of $s$. The next line contains $n$ integers $p_1,\\ldots, p_n$ ($1\\le p_i\\le i$ for all $1\\le i\\le n$).\n\nIt is guaranteed that the sum of $n$ over all test cases does not exceed $3\\times 10^6$.", "outputFormat": "For each test case, output one line. If there is no solution, output $-1$. Otherwise, output the lexicographically smallest $s$. Characters of $s$ are represented by positive integers. Smaller integers represent smaller characters in the lexicographical order.", "hint": "As the input/output can be huge, it is recommended to use fast input/output methods.", "locale": "en"}, "zh-CN": {"title": "[EC Final 2022] Minimum Suffix", "background": "", "description": "对于长度为 $n$ 的字符串 $s$，如果 $s[x\\ldots j]$ 是 $s[1\\ldots j]$ 的最小后缀，则我们定义 $p_j = x$，其中 $j=1,\\ldots, n$。（后缀是字符串的最小后缀，如果它在字典序上小于该字符串的任何其他后缀。）\n\n你需要从 $p_1,\\ldots, p_n$ 中恢复出 $s$。如果存在多个答案，则找出字典序最小的那个。", "inputFormat": "第一行包含一个整数 $T$（$1\\le T\\le 10^5$），表示测试用例的数量。\n\n对于每个测试用例，第一行包含一个整数 $n$（$1\\le n\\le 3\\times 10^6$），表示 $s$ 的长度。接下来的一行包含 $n$ 个整数 $p_1,\\ldots, p_n$（$1\\le p_i\\le i$，$1\\le i\\le n$）。\n\n保证所有测试用例中 $n$ 的总和不超过 $3\\times 10^6$。", "outputFormat": "对于每个测试用例，输出一行。如果没有解决方案，则输出 $-1$。否则，输出字典序最小的 $s$。$s$ 中的字符由正整数表示。较小的整数表示字典序较小的字符。", "hint": "本题输入输出规模较大，建议使用快速的输入输出方式。\n\n翻译来自于：[ChatGPT](https://chatgpt.com/)。", "locale": "zh-CN"}}}
{"pid": "P9720", "type": "P", "difficulty": 6, "samples": [["2\n0 0 0 2 4 2 4 0\n0 0 0 1 2 1 2 0\n2 1 4 2\n1 1\n0 0 0 3 6 3 6 0\n0 1 1 0 3 2 2 3\n0 0 4 2\n0 3", "1.0000000000\n1.2272623352"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "2022", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2022] Map", "background": "", "description": "It is a famous math fact that if you drop a map of a park completely inside the park, then there exists a point on the map which overlays with the point it represents.\n\nMio likes this fact a lot so she drops a map of her favorite park completely inside the park. The park $P$ can be represented by a rectangle. A map of the park is just a smaller (or equal) version of the park printed on paper. The map is similar to the original rectangle. Each point on the map corresponds to a point in the park by the similarity transformation.\n\nWe can define a map formally: A map is a rectangle $M$ (of smaller or equal size) together with a positive real number $r$ and a bijective function $f:M \\rightarrow P$ satisfying \n\n- For every pair of different points $a, b\\in M$, $|f(a)-f(b)|/|a-b|=r$.\n\n$|x-y|$ represents the Euclidean distance between points $x$ and $y$. \n\nLike in many games, Mio can teleport using the map. Precisely, when Mio is at some point $x$ on the map (including the boundary), she may teleport to the corresponding point $f(x)$ in the park. She may also choose not to teleport. The reverse is also true. When she is at point $y$ in the park (including the boundary), she may teleport to the point $f^{-1}(y)$ on the map representing her current location. And she may also choose not to teleport.\n\nMio can teleport at most $n$ (and at least $0$) times. Each teleport takes $k$ seconds. Mio can also walk on her foot at a speed of $1$ unit per second. \n\nGiven two points $s$ and $t$, find the minimum time Mio needs to reach $t$ from $s$.\n\nEach teleport can be in any direction (from the map to the park, or from the park to the map). The map may be placed upside down. Since the map is inside the park, it is possible that Mio is on the map and in the park simultaneously. In this case, she may teleport in either direction. \n\nFor example, in the following figure, the park is $ABCD$, and the map is $A'B'C'D'$. When Mio is inside the map, she is on the map and in the park simultaneously. When she is at point $D'$, she can teleport from the map to the park (reaching $D$), and from the park to the map (reaching $D^{\\prime\\prime}$).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hz6nq09e.png)", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 100$) denoting the number of test cases.\n\nFor each test case, the first line contains the $4$ corners of the rectangle representing the park. The corners are given in clockwise or counterclockwise order. It is guaranteed that the $4$ corners are distinct.\n\nThe second line contains the $4$ corners of the rectangle representing the map. The $i$-th corner of the map corresponds to the $i$-th corner of the park for all $1\\le i\\le 4$. Note that you can figure out whether the map is placed upside down or not by the order of the corners. The corners are given in clockwise or counterclockwise order. It is guaranteed that the map is inside the park. (The boundary of the map may intersect with the boundary of the park at $1$ or more points.) It is guaranteed that the map is valid, i.e., there is a positive real number and a bijective function from the map to the park satisfying the definition above.\n\nThe third line contains two points $s$ and $t$. It is guaranteed that $s$ and $t$ are inside (or on the boundary of) the park.\n\nThe fourth line contains two integers $k, n$ ($0\\le k\\le 2\\times 10^6, 0\\le n\\le 100$), the time each teleport needs, and the maximum number of teleports. \n\nEach point in the input is represented by a pair of integers whose absolute values are no more than $2\\times 10^6$. Integers are separated by single spaces.", "outputFormat": "For each test case, output one number representing the answer in one line. Your answer is considered correct if its absolute or relative error does not exceed $10^{-9}$.  ", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2022] Map", "background": "", "description": "It is a famous math fact that if you drop a map of a park completely inside the park, then there exists a point on the map which overlays with the point it represents.\n\nMio likes this fact a lot so she drops a map of her favorite park completely inside the park. The park $P$ can be represented by a rectangle. A map of the park is just a smaller (or equal) version of the park printed on paper. The map is similar to the original rectangle. Each point on the map corresponds to a point in the park by the similarity transformation.\n\nWe can define a map formally: A map is a rectangle $M$ (of smaller or equal size) together with a positive real number $r$ and a bijective function $f:M \\rightarrow P$ satisfying \n\n- For every pair of different points $a, b\\in M$, $|f(a)-f(b)|/|a-b|=r$.\n\n$|x-y|$ represents the Euclidean distance between points $x$ and $y$. \n\nLike in many games, Mio can teleport using the map. Precisely, when Mio is at some point $x$ on the map (including the boundary), she may teleport to the corresponding point $f(x)$ in the park. She may also choose not to teleport. The reverse is also true. When she is at point $y$ in the park (including the boundary), she may teleport to the point $f^{-1}(y)$ on the map representing her current location. And she may also choose not to teleport.\n\nMio can teleport at most $n$ (and at least $0$) times. Each teleport takes $k$ seconds. Mio can also walk on her foot at a speed of $1$ unit per second. \n\nGiven two points $s$ and $t$, find the minimum time Mio needs to reach $t$ from $s$.\n\nEach teleport can be in any direction (from the map to the park, or from the park to the map). The map may be placed upside down. Since the map is inside the park, it is possible that Mio is on the map and in the park simultaneously. In this case, she may teleport in either direction. \n\nFor example, in the following figure, the park is $ABCD$, and the map is $A'B'C'D'$. When Mio is inside the map, she is on the map and in the park simultaneously. When she is at point $D'$, she can teleport from the map to the park (reaching $D$), and from the park to the map (reaching $D^{\\prime\\prime}$).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hz6nq09e.png)", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 100$) denoting the number of test cases.\n\nFor each test case, the first line contains the $4$ corners of the rectangle representing the park. The corners are given in clockwise or counterclockwise order. It is guaranteed that the $4$ corners are distinct.\n\nThe second line contains the $4$ corners of the rectangle representing the map. The $i$-th corner of the map corresponds to the $i$-th corner of the park for all $1\\le i\\le 4$. Note that you can figure out whether the map is placed upside down or not by the order of the corners. The corners are given in clockwise or counterclockwise order. It is guaranteed that the map is inside the park. (The boundary of the map may intersect with the boundary of the park at $1$ or more points.) It is guaranteed that the map is valid, i.e., there is a positive real number and a bijective function from the map to the park satisfying the definition above.\n\nThe third line contains two points $s$ and $t$. It is guaranteed that $s$ and $t$ are inside (or on the boundary of) the park.\n\nThe fourth line contains two integers $k, n$ ($0\\le k\\le 2\\times 10^6, 0\\le n\\le 100$), the time each teleport needs, and the maximum number of teleports. \n\nEach point in the input is represented by a pair of integers whose absolute values are no more than $2\\times 10^6$. Integers are separated by single spaces.", "outputFormat": "For each test case, output one number representing the answer in one line. Your answer is considered correct if its absolute or relative error does not exceed $10^{-9}$.  ", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2022] Map", "background": "", "description": "有一个著名的数学定理，如果你把一张公园的地图完全放在公园里，那么地图上存在一个点与它所代表的点重合。\n\nMio 非常喜欢这个定理，所以她把她最喜欢的公园的地图完全放在了公园里。公园 $P$ 可以用一个矩形表示。公园的地图只是一个较小（或相等）版本的公园在纸上的打印。地图与原始矩形相似。地图上的每个点都通过相似变换对应于公园中的一个点。\n\n我们可以正式定义地图：地图是一个矩形 $M$（大小较小或相等），加上一个正实数 $r$ 和一个双射函数 $f:M \\rightarrow P$，满足以下条件：\n\n- 对于 $M$ 中的每对不同的点 $a, b$，$|f(a)-f(b)|/|a-b|=r$。\n\n这里 $|x-y|$ 表示点 $x$ 和点 $y$ 之间的欧几里德距离。\n\n就像许多游戏一样，Mio 可以使用地图进行传送。准确地说，当 Mio 在地图上的某个点 $x$（包括边界）时，她可以传送到公园中相应的点 $f(x)$。她也可以选择不传送。反之亦然。当她在公园中的点 $y$（包括边界）时，她可以传送到代表她当前位置的地图上的点 $f^{-1}(y)$。她也可以选择不传送。\n\nMio 最多可以传送 $n$ 次（最少为 $0$ 次）。每次传送需要 $k$ 秒。Mio 还可以以每秒 $1$ 个单位的速度步行。\n\n给定两个点 $s$ 和 $t$，找出 Mio 从 $s$ 到 $t$ 需要的最短时间。\n\n每次传送可以是任意方向（从地图到公园，或从公园到地图）。地图可以倒置放置。由于地图位于公园内部，所以 Mio 可能同时在地图上和在公园中。在这种情况下，她可以选择传送的方向。\n\n例如，在下图中，公园是 $ABCD$，地图是 $A'B'C'D'$。当 Mio 在地图上时，她同时在地图上和在公园中。当她在点 $D'$ 时，她可以从地图传送到公园（到达 $D$），并从公园传送到地图（到达 $D^{\\prime\\prime}$）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hz6nq09e.png)", "inputFormat": "第一行包含一个整数 $T$（$1\\le T\\le 100$），表示测试用例的数量。\n\n对于每个测试用例，第一行包含表示公园矩形的 $4$ 个角点。角点按顺时针或逆时针顺序给出。保证 $4$ 个角点不相同。\n\n第二行包含表示地图矩形的 $4$ 个角点。地图的第 $i$ 个角点对应于公园的第 $i$ 个角点，对于所有 $1\\le i\\le 4$。请注意，您可以通过角点的顺序确定地图是否倒置放置。角点按顺时针或逆时针顺序给出。保证地图位于公园内部。（地图的边界可能与公园的边界在 $1$ 个或多个点相交。）保证地图是有效的，即存在一个正实数和一个从地图到公园的双射函数，满足上述的定义。\n\n第三行包含两个点 $s$ 和 $t$。保证 $s$ 和 $t$ 在公园内部（或在公园的边界上）。\n\n第四行包含两个整数 $k, n$（$0\\le k\\le 2\\times 10^6, 0\\le n\\le 100$），表示每次传送所需的时间，以及最大传送次数。\n\n输入中的每个点由一对整数表示，其绝对值不超过 $2\\times 10^6$。整数之间用单个空格分隔。", "outputFormat": "对于每个测试用例，输出一行数字表示答案。如果没有解决方案，则输出 $-1$。否则，输出最小的时间。您的答案被认为是正确的，如果其绝对或相对误差不超过 $10^{-9}$。\n\n翻译来自于：[ChatGPT](https://chatgpt.com/)。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9721", "type": "P", "difficulty": 5, "samples": [["3\n\n0\n\n0\n\n1\n", "\n? 1 2\n\n? 1 3\n\n? 2 3\n\n! 2 3 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["二分", "2022", "交互题", "Special Judge", "O2优化", "排序", "ICPC", "EC Final"], "title": "[EC Final 2022] Inversion", "background": "", "description": "$\\textbf{This is an interactive problem.}$\n\nThere is a hidden permutation $p_1, p_2, \\dots, p_n$ of $\\{1, 2, \\dots, n\\}$. You want to find it by asking the parity of the number of inversions of $p_l,\\ldots, p_r$.\n\nYou can query in the format ${?~l~r}$, and the interactor will respond you $\\left( \\sum_{l\\leq i < j\\leq r} [p_i > p_j]\\right) \\bmod 2$. $[p_i>p_j]$ is $1$ when $p_i>p_j$ and $0$ when $p_i\\le p_j$.", "inputFormat": "Firstly, you should read the integer $n$ ($1\\le n\\le 2000$).\n\nAfter that, you can make no more than $4 \\times 10^4$ queries. To make a query, output ``${?~l~r}$'' ($1 \\leq l \\leq r \\leq n$) on a separate line, then you should read the response from standard input. \n\nTo give your answer, print ``${!~p_1~p_2~\\dots~p_n}$'' on a separate line. The output of the answer is \\textbf{not} counted towards the limit of $4 \\times 10^4$ queries. \n\nAfter that, your program should terminate. \n\nAfter printing a query, do not forget to output end of line and flush the output. To do this, use $\\texttt{fflush(stdout)}$ or $\\texttt{cout.flush()}$ in C++, $\\texttt{System.out.flush()}$ in Java, $\\texttt{flush(output)}$ in Pascal, or $\\texttt{stdout.flush()}$ in Python. \n\nIt is guaranteed that the permutation is fixed in advance. ", "outputFormat": "", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2022] Inversion", "background": "", "description": "$\\textbf{This is an interactive problem.}$\n\nThere is a hidden permutation $p_1, p_2, \\dots, p_n$ of $\\{1, 2, \\dots, n\\}$. You want to find it by asking the parity of the number of inversions of $p_l,\\ldots, p_r$.\n\nYou can query in the format ${?~l~r}$, and the interactor will respond you $\\left( \\sum_{l\\leq i < j\\leq r} [p_i > p_j]\\right) \\bmod 2$. $[p_i>p_j]$ is $1$ when $p_i>p_j$ and $0$ when $p_i\\le p_j$.", "inputFormat": "Firstly, you should read the integer $n$ ($1\\le n\\le 2000$).\n\nAfter that, you can make no more than $4 \\times 10^4$ queries. To make a query, output ``${?~l~r}$'' ($1 \\leq l \\leq r \\leq n$) on a separate line, then you should read the response from standard input. \n\nTo give your answer, print ``${!~p_1~p_2~\\dots~p_n}$'' on a separate line. The output of the answer is \\textbf{not} counted towards the limit of $4 \\times 10^4$ queries. \n\nAfter that, your program should terminate. \n\nAfter printing a query, do not forget to output end of line and flush the output. To do this, use $\\texttt{fflush(stdout)}$ or $\\texttt{cout.flush()}$ in C++, $\\texttt{System.out.flush()}$ in Java, $\\texttt{flush(output)}$ in Pascal, or $\\texttt{stdout.flush()}$ in Python. \n\nIt is guaranteed that the permutation is fixed in advance. ", "outputFormat": "", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2022] Inversion", "background": "", "description": "**这是一个交互式问题。**\n\n有一个隐藏的排列 $p_1, p_2, \\dots, p_n$，它是 $\\{1, 2, \\dots, n\\}$ 的一个排列。你需要通过询问 $p_l,\\ldots, p_r$ 的逆序数的奇偶性来找到它。\n\n你可以以 ${?~l~r}$ 的格式进行查询，交互器将会返回 $ \\left( \\sum_{l\\leq i < j\\leq r} [p_i > p_j]\\right) \\bmod 2$。当 $p_i > p_j$ 时，$[p_i>p_j]$ 为 $1$，否则为 $0$。", "inputFormat": "首先，你需要读取整数 $n$ ($1\\le n\\le 2000$)。\n\n在此之后，你可以进行不超过 $4 \\times 10^4$ 次查询。要进行一次查询，输出 ``${?~l~r}$'' ($1 \\leq l \\leq r \\leq n$) 在单独的一行上，然后你需要从标准输入读取响应。\n\n为了给出答案，打印 ``${!~p_1~p_2~\\dots~p_n}$'' 在单独的一行上。答案的输出不计入 $4 \\times 10^4$ 次查询的限制。\n\n在打印查询后，不要忘记输出换行并刷新输出。为此，在 C++ 中使用 $\\texttt{fflush(stdout)}$ 或 $\\texttt{cout.flush()}$，在 Java 中使用 $\\texttt{System.out.flush()}$，在 Pascal 中使用 $\\texttt{flush(output)}$，在 Python 中使用 $\\texttt{stdout.flush()}$。\n\n保证排列是预先固定的。", "outputFormat": "", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9722", "type": "P", "difficulty": 7, "samples": [["3\n1\n1 1 1000000000 1000000000\n3\n1 1 2 2\n3 3 4 4\n5 5 6 6\n5\n581574116 47617804 999010750 826131769\n223840663 366320907 613364068 926991396\n267630832 51913575 488301124 223957497\n217461197 492085159 999485867 913732845\n28144453 603781668 912516656 993160442", "230616300\n64\n977066618"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2022", "O2优化", "ICPC", "吉司机线段树 segment tree beats", "EC Final"], "title": "[EC Final 2022] Rectangle", "background": "", "description": "Prof. Pang has $n$ rectangles, the coordinate of the lower left corner of the $i$-th rectangle is $(x_{i,1}, y_{i,1})$, and the coordinate of the upper right corner is $(x_{i,2}, y_{i,2})$. Rectangles may overlap.\n\nYou need to choose three straight lines such that:\n\n- Each line should be parallel to the $x$-axis or the $y$-axis, which means its formula is $x = a$ or $y = a$.\n- In the formula $x = a$ or $y = a$, $a$ should be an integer in $[1, 10^9]$.\n- These three lines should be distinct.\n- Each rectangle is $\\textbf{touched}$ by at least one line. A line touches a rectangle if it intersects with the boundary and/or the interior of the rectangle.\n\nYou need to compute the number of ways to choose three lines. Since the answer can be very large, output it modulo $998244353$. Two ways are considered the same if only the order of three lines differs in these two ways. ", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$, denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n~(1 \\le n \\le 10^5)$. The $i$-th line of the next $n$ lines contains four integers $x_{i,1}, y_{i,1},x_{i,2}, y_{i,2}~(1\\le x_{i,1}<x_{i,2}\\le 10^9,1\\le y_{i,1}<y_{i,2}\\le 10^9)$.\n\nIt is guaranteed that the sum of $n$ over all test cases does not exceed $2\\times 10^5$.", "outputFormat": "For each test case, output one integer representing the answer in one line.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2022] Rectangle", "background": "", "description": "Prof. Pang has $n$ rectangles, the coordinate of the lower left corner of the $i$-th rectangle is $(x_{i,1}, y_{i,1})$, and the coordinate of the upper right corner is $(x_{i,2}, y_{i,2})$. Rectangles may overlap.\n\nYou need to choose three straight lines such that:\n\n- Each line should be parallel to the $x$-axis or the $y$-axis, which means its formula is $x = a$ or $y = a$.\n- In the formula $x = a$ or $y = a$, $a$ should be an integer in $[1, 10^9]$.\n- These three lines should be distinct.\n- Each rectangle is $\\textbf{touched}$ by at least one line. A line touches a rectangle if it intersects with the boundary and/or the interior of the rectangle.\n\nYou need to compute the number of ways to choose three lines. Since the answer can be very large, output it modulo $998244353$. Two ways are considered the same if only the order of three lines differs in these two ways. ", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$, denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n~(1 \\le n \\le 10^5)$. The $i$-th line of the next $n$ lines contains four integers $x_{i,1}, y_{i,1},x_{i,2}, y_{i,2}~(1\\le x_{i,1}<x_{i,2}\\le 10^9,1\\le y_{i,1}<y_{i,2}\\le 10^9)$.\n\nIt is guaranteed that the sum of $n$ over all test cases does not exceed $2\\times 10^5$.", "outputFormat": "For each test case, output one integer representing the answer in one line.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2022] Rectangle", "background": "", "description": "庞教授有 $n$ 个矩形，第 $i$ 个矩形的左下角坐标是 $(x_{i,1}, y_{i,1})$，右上角坐标是 $(x_{i,2}, y_{i,2})$。矩形可以重叠。\n\n你需要选择三条直线，使得：\n\n- 每条直线应该与 $x$ 轴或 $y$ 轴平行，即其方程为 $x = a$ 或 $y = a$。\n- 在方程 $x = a$ 或 $y = a$ 中，$a$ 应该是 $[1, 10^9]$ 区间内的整数。\n- 这三条直线应该是不同的。\n- 每个矩形至少被一条直线 $\\textbf{触摸}$。如果一条直线与矩形的边界和/或内部相交，则称该直线触摸该矩形。\n\n你需要计算选择三条直线的方法数。由于答案可能非常大，输出对 $998244353$ 取模的结果。如果两种方法只有三条直线的顺序不同，则认为它们是相同的。", "inputFormat": "第一行包含一个整数 $T~(1 \\le T \\le 10^5)$，表示测试用例的数量。\n\n对于每个测试用例，第一行包含一个整数 $n~(1 \\le n \\le 10^5)$。接下来的 $n$ 行中，第 $i$ 行包含四个整数 $x_{i,1}, y_{i,1},x_{i,2}, y_{i,2}~(1\\le x_{i,1}<x_{i,2}\\le 10^9,1\\le y_{i,1}<y_{i,2}\\le 10^9)$。\n\n保证所有测试用例中 $n$ 的总和不超过 $2\\times 10^5$。", "outputFormat": "对于每个测试用例，输出一行整数，表示答案。\n\n**【样例解释】**\n\n翻译来自于：[ChatGPT](https://chatgpt.com/)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9723", "type": "P", "difficulty": 5, "samples": [["5\n1\n1 1\n2\n1 1\n2 1\n2\n9 4\n9 6\n10\n1 1\n2 1\n2 2\n3 1\n3 2\n3 3\n4 1\n4 2\n4 3\n4 4\n10\n1 1\n2 1\n2 2\n5 7\n3 2\n3 3\n4 1\n4 2\n4 3\n4 4\n", "0\n1\n2\n6\n13\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "O2优化", "广度优先搜索 BFS", "ICPC", "EC Final"], "title": "[EC Final 2022] Chinese Checker", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/krp4wk8f.png)\n\nProf. Pang is playing Chinese Checkers. The game board is the same as the figure shown above. There are $n$ checkers on the board. Prof. Pang wants to know how many different moves there are on the current board.\n\nOne **move** consists of several **steps**. At first, Prof. Pang needs to choose one checker $a$ to move. In each step, Prof. Pang needs to choose another checker $b$ as the pivot, and move the checker $a$ to the symmetrical position about the checker $b$. (In one move, Prof. Pang cannot change his choice of $a$ between steps. **If after a step, the checker $a$ will return to its position before the move, this step is not allowed.**) There are several conditions about the pivot $b$:\n\n- The segment connecting $a$ and $b$ needs to be parallel to one of the coordinate axis. Note: There are three axes on the hexagonal board. One of them is horizontal and any pair of axes intersect at an angle of $\\pi/3$.\n- $a$ and $b$ **do not** need to be adjacent.\n- There cannot be extra checkers other than $b$ on the segment connecting $a$ and its symmetrical position.\n- The symmetrical position should be on the hexagonal board and is not occupied by any other checker.\n\nA move must have at least one step. After the first step, Prof. Pang can stop at any time he wants. And Prof. Pang can choose any checker on the board as the moving checker. Output the number of different moves Prof. Pang can make. Two moves are different if and only if the sets of positions of all checkers are different after these two moves, i.e., the checkers are indistinguishable. ", "inputFormat": "The first line contains an integer $T~(1\\leq T\\leq 100)$ -- the number of test cases.\n\nFor each test case, the first line contains an integer $n~(1\\leq n\\leq 121)$ -- the number of checkers.\n\nEach of the following $n$ lines contains two integers, indicating the position of a checker. The first number indicates which row it is in, and the second number indicates which one of this row it is. They are counting from top to bottom and left to right, starting from $1$.\n\nIt is guaranteed that checkers' positions are different.", "outputFormat": "For each test case, output one integer in a line -- the number of different moves.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2022] Chinese Checker", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/krp4wk8f.png)\n\nProf. Pang is playing Chinese Checkers. The game board is the same as the figure shown above. There are $n$ checkers on the board. Prof. Pang wants to know how many different moves there are on the current board.\n\nOne **move** consists of several **steps**. At first, Prof. Pang needs to choose one checker $a$ to move. In each step, Prof. Pang needs to choose another checker $b$ as the pivot, and move the checker $a$ to the symmetrical position about the checker $b$. (In one move, Prof. Pang cannot change his choice of $a$ between steps. **If after a step, the checker $a$ will return to its position before the move, this step is not allowed.**) There are several conditions about the pivot $b$:\n\n- The segment connecting $a$ and $b$ needs to be parallel to one of the coordinate axis. Note: There are three axes on the hexagonal board. One of them is horizontal and any pair of axes intersect at an angle of $\\pi/3$.\n- $a$ and $b$ **do not** need to be adjacent.\n- There cannot be extra checkers other than $b$ on the segment connecting $a$ and its symmetrical position.\n- The symmetrical position should be on the hexagonal board and is not occupied by any other checker.\n\nA move must have at least one step. After the first step, Prof. Pang can stop at any time he wants. And Prof. Pang can choose any checker on the board as the moving checker. Output the number of different moves Prof. Pang can make. Two moves are different if and only if the sets of positions of all checkers are different after these two moves, i.e., the checkers are indistinguishable. ", "inputFormat": "The first line contains an integer $T~(1\\leq T\\leq 100)$ -- the number of test cases.\n\nFor each test case, the first line contains an integer $n~(1\\leq n\\leq 121)$ -- the number of checkers.\n\nEach of the following $n$ lines contains two integers, indicating the position of a checker. The first number indicates which row it is in, and the second number indicates which one of this row it is. They are counting from top to bottom and left to right, starting from $1$.\n\nIt is guaranteed that checkers' positions are different.", "outputFormat": "For each test case, output one integer in a line -- the number of different moves.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2022] Chinese Checker", "background": "", "description": "棋盘上有 $n$ 个棋子，你需要求对于当前局面，下一次移动有多少种不同的走法。\n\n一次移动由若干步组成。假设当前要移动的棋子为 $a$，在每一步中，首先需要选择另一个棋子 $b$ 作为跳台，然后将 $a$ 走到关于 $b$ 的对称位置（在一次移动中，你无法更改需要移动的棋子 $a$。并且在某一步中，棋子 $a$ 回到此次移动前所在的位置是不被允许的）。\n\n关于跳台 $b$ 的选择有一些条件：\n\n- $a$ 和 $b$ 之间的连线应当平行于棋盘的某条坐标轴。注：棋盘上一共有三条坐标轴，其中一条与水平线平行，并且任意两条坐标轴之间的夹角均为 $\\frac{\\pi}{3}$。\n\n- $a$ 和 $b$ 不必相邻。\n\n- 除了跳台 $b$ 以外，$a$ 和其关于 $b$ 的对称点的连线上不能有其他棋子。\n\n- 对称点的位置应当落在棋盘上，并且没有被其他棋子占据。\n\n一次移动需要至少走一步。在第一步以后，你可以随时停下来。你可以选择棋盘上任意一个棋子作为移动棋子。请输出有多少种不同的走法。\n\n两种走法不同当且仅当两次移动后所有棋子的位置组成的集合不同，并且棋子之间不可区分。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据，第一行一个整数 $n$，表示棋子数量。\n\n接下来 $n$ 行，每行两个整数，表示棋子位置。第一个整数表示棋子所在行，第二个整数表示棋子所在列（棋子在这一行的第几个位置上，注意每一行的起始位置和列数有可能是不一样的）。行列的编号从 $1$ 开始，分别从上到下，从左到右递增。\n\n保证每个棋子的位置互不相同。", "outputFormat": "输出 $T$ 行，每行一个整数，表示不同走法的数量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9724", "type": "P", "difficulty": 5, "samples": [["5 5 3 1\n1 2\n2 4\n4 5\n1 3\n3 5\n", "2\n"], ["13 17 12 3\n1 2\n2 3\n3 4\n4 13\n5 13\n7 8\n7 9\n7 10\n7 11\n7 6\n12 7\n1 8\n8 9\n9 10\n10 11\n11 6\n6 13\n", "7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "O2优化", "最短路", "ICPC", "EC Final"], "title": "[EC Final 2022] Chase Game", "background": "", "description": "Prof. Shou is being chased by Prof. Pang on an undirected unweighted simple graph. Initially, Prof. Shou is at vertex $1$. His destination is vertex $n$. Prof. Pang is at vertex $k$.\n\nIn each second, Prof. Shou may choose an adjacent vertex and walk to that vertex. Then Prof. Shou is attacked by Prof. Pang. The damage of this attack is equal to $d-dis$ where $d$ is Prof. Pang's attack range and $dis$ is the distance (number of edges in the shortest path) between Prof. Shou and Prof. Pang on the graph. However, when $dis$ is greater than or equal to $d$, Prof. Pang cannot deal any positive damage. In this case, instead of attacking with non-positive damage, he will teleport to the vertex where Prof. Shou is and then deal $d$ damage. (When $dis$ is less than $d$, Prof. Pang will stay at his current vertex.)\n\nPlease find the minimum sum of damage Prof. Shou will take to reach vertex $n$ from vertex $1$. Prof. Shou will take the last attack at vertex $n$.", "inputFormat": "The first line contains $4$ integers $n, m, k, d$ ($2\\le n\\le 10^5, n-1\\le m\\le 2\\times 10^5, 1\\le k\\le n, 1\\le d\\le 2\\times 10^5$).\n\nEach of the next $m$ lines contains two integers $a, b$ ($1\\le a, b\\le n, a \\ne b$) representing an edge of the graph. The edges are distinct. ($a\\ b$ and $b\\ a$ represents the same edge. Thus, only one of these two lines may appear in the input.)\n\nIt is guaranteed that the graph is connected.", "outputFormat": "Output one integer representing the answer in one line.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2022] Chase Game", "background": "", "description": "Prof. Shou is being chased by Prof. Pang on an undirected unweighted simple graph. Initially, Prof. Shou is at vertex $1$. His destination is vertex $n$. Prof. Pang is at vertex $k$.\n\nIn each second, Prof. Shou may choose an adjacent vertex and walk to that vertex. Then Prof. Shou is attacked by Prof. Pang. The damage of this attack is equal to $d-dis$ where $d$ is Prof. Pang's attack range and $dis$ is the distance (number of edges in the shortest path) between Prof. Shou and Prof. Pang on the graph. However, when $dis$ is greater than or equal to $d$, Prof. Pang cannot deal any positive damage. In this case, instead of attacking with non-positive damage, he will teleport to the vertex where Prof. Shou is and then deal $d$ damage. (When $dis$ is less than $d$, Prof. Pang will stay at his current vertex.)\n\nPlease find the minimum sum of damage Prof. Shou will take to reach vertex $n$ from vertex $1$. Prof. Shou will take the last attack at vertex $n$.", "inputFormat": "The first line contains $4$ integers $n, m, k, d$ ($2\\le n\\le 10^5, n-1\\le m\\le 2\\times 10^5, 1\\le k\\le n, 1\\le d\\le 2\\times 10^5$).\n\nEach of the next $m$ lines contains two integers $a, b$ ($1\\le a, b\\le n, a \\ne b$) representing an edge of the graph. The edges are distinct. ($a\\ b$ and $b\\ a$ represents the same edge. Thus, only one of these two lines may appear in the input.)\n\nIt is guaranteed that the graph is connected.", "outputFormat": "Output one integer representing the answer in one line.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2022] Chase Game", "background": "", "description": "Shou 教授被 Pang 教授在一个无向无权简单图上追赶。最初，Shou 教授在顶点 $1$。他的目的地是顶点 $n$。Pang 教授在顶点 $k$。\n\n每秒钟，Shou 教授可以选择一个相邻的顶点并走向该顶点。然后，Shou 教授会受到 Pang 教授的攻击。此次攻击的伤害等于 $d-dis$，其中 $d$ 是 Pang 教授的攻击范围，$dis$ 是图上从 Shou 教授到 Pang 教授的距离（最短路径上的边数）。然而，当 $dis$ 大于或等于 $d$ 时，Pang 教授无法造成任何正伤害。在这种情况下，他将不会使用非正的伤害攻击，而是会传送到 Shou 教授所在的顶点，然后造成 $d$ 伤害。（当 $dis$ 小于 $d$ 时，Pang 教授将停留在当前顶点。）\n\n请找出 Shou 教授从顶点 $1$ 到顶点 $n$ 所需的最小伤害总和。Shou 教授将在顶点 $n$ 处受到最后一次攻击。", "inputFormat": "第一行包含 $4$ 个整数 $n, m, k, d$ ($2\\le n\\le 10^5, n-1\\le m\\le 2\\times 10^5, 1\\le k\\le n, 1\\le d\\le 2\\times 10^5$)。\n\n接下来的 $m$ 行中，每行包含两个整数 $a, b$ ($1\\le a, b\\le n, a \\ne b$)，表示图的一条边。边是不同的。($a\\ b$ 和 $b\\ a$ 表示相同的边。因此，在输入中只会出现这两行中的一行。)\n\n保证图是连通的。", "outputFormat": "输出一行整数，表示答案。\n\n翻译来自于：[ChatGPT](https://chatgpt.com/)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9725", "type": "P", "difficulty": 4, "samples": [["4\n2\n1 2\n4\n1 2\n2 3\n3 4\n4\n1 2\n2 3\n2 4\n5\n1 2\n2 3\n3 4\n3 5\n", "-1\n1\n-1\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["图论", "2022", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2022] Chase Game 2", "background": "", "description": "Prof. Pang and Prof. Shou like playing a chase game.\n\nThe game map consists of $n$ rooms and $n-1$ bi-directional channels. The game map is connected. That means, the map forms a tree.\n\nAt first, Prof. Pang is in room $u$, while Prof. Shou is in room $v$ ($u\\neq v$). Prof. Pang and Prof. Shou take turns to play, and Prof. Shou goes first. In one's turn, the player knows his own position and the other player's position and can decide either to stay in the current room or to move to another room which is connected with the current room directly by a channel. When Prof. Pang and Prof. Shou are in the same room, Prof. Shou is caught by Prof. Pang. \n\nProf. Pang and Prof. Shou are smart enough. Prof. Pang wants to catch Prof. Shou in a finite number of turns. Prof. Shou does not want to be caught by Prof. Pang in any finite number of turns. \n\nProf. Shou gets tired of being caught every time and finds Prof. Fei for help. Prof. Shou asks Prof. Fei to add some channels so that Prof. Pang cannot catch him in finite number of turns for any pair of initial rooms $(u,v)$. Prof. Fei is lazy, so he hopes to add as few channels as possible. If no matter how to add the channels there is always a pair of rooms $(u,v)$ such that Prof. Pang can catch Prof. Shou, output $-1$.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 10^4$) denoting the number of test cases. \n\nFor each test case, the first line contains a single integer $n$ ($2\\le n\\le 10^5$) denoting the number of rooms.\n\nFor the next $n-1$ lines, each line contains two integers $u$ and $v$ ($1\\le u, v\\le n$) denoting a channel connecting room $u$ and room $v$.\n\nIt is guaranteed that the sum of $n$ over all test cases does not exceed $2\\times 10^5$, and the rooms and channels always form a tree.", "outputFormat": "For each test case, print a number denoting the smallest number of added channels, or just print $-1$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2022] Chase Game 2", "background": "", "description": "Prof. Pang and Prof. Shou like playing a chase game.\n\nThe game map consists of $n$ rooms and $n-1$ bi-directional channels. The game map is connected. That means, the map forms a tree.\n\nAt first, Prof. Pang is in room $u$, while Prof. Shou is in room $v$ ($u\\neq v$). Prof. Pang and Prof. Shou take turns to play, and Prof. Shou goes first. In one's turn, the player knows his own position and the other player's position and can decide either to stay in the current room or to move to another room which is connected with the current room directly by a channel. When Prof. Pang and Prof. Shou are in the same room, Prof. Shou is caught by Prof. Pang. \n\nProf. Pang and Prof. Shou are smart enough. Prof. Pang wants to catch Prof. Shou in a finite number of turns. Prof. Shou does not want to be caught by Prof. Pang in any finite number of turns. \n\nProf. Shou gets tired of being caught every time and finds Prof. Fei for help. Prof. Shou asks Prof. Fei to add some channels so that Prof. Pang cannot catch him in finite number of turns for any pair of initial rooms $(u,v)$. Prof. Fei is lazy, so he hopes to add as few channels as possible. If no matter how to add the channels there is always a pair of rooms $(u,v)$ such that Prof. Pang can catch Prof. Shou, output $-1$.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 10^4$) denoting the number of test cases. \n\nFor each test case, the first line contains a single integer $n$ ($2\\le n\\le 10^5$) denoting the number of rooms.\n\nFor the next $n-1$ lines, each line contains two integers $u$ and $v$ ($1\\le u, v\\le n$) denoting a channel connecting room $u$ and room $v$.\n\nIt is guaranteed that the sum of $n$ over all test cases does not exceed $2\\times 10^5$, and the rooms and channels always form a tree.", "outputFormat": "For each test case, print a number denoting the smallest number of added channels, or just print $-1$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2022] Chase Game 2", "background": "", "description": "庞教授和寿教授喜欢玩追逐游戏。\n\n游戏地图由 $n$ 个房间和 $n-1$ 条双向通道组成。游戏地图是连通的。这意味着地图形成一棵树。\n\n一开始，庞教授在房间 $u$，而寿教授在房间 $v$（$u\\neq v$）。庞教授和寿教授轮流玩游戏，寿教授先开始。在自己的回合中，玩家知道自己所在的位置和另一个玩家的位置，可以决定留在当前房间或者移动到与当前房间直接通过通道相连的另一个房间。当庞教授和寿教授在同一个房间时，寿教授被庞教授抓住。\n\n庞教授和寿教授足够聪明。庞教授希望在有限的回合内抓住寿教授。寿教授不希望在任何有限的回合内被庞教授抓住。\n\n寿教授厌倦了每次都被抓住，找到了费教授寻求帮助。寿教授请求费教授添加一些通道，使得无论初始房间对 $(u,v)$ 如何，庞教授都无法在有限的回合内抓住他。费教授很懒，所以他希望尽可能少地添加通道。如果无论如何添加通道，总是存在一对房间 $(u,v)$，使得庞教授能够抓住寿教授，输出 $-1$。", "inputFormat": "第一行包含一个整数 $T$ ($1\\le T\\le 10^4$)，表示测试用例的数量。\n\n对于每个测试用例，第一行包含一个整数 $n$ ($2\\le n\\le 10^5$)，表示房间的数量。\n\n接下来的 $n-1$ 行，每行包含两个整数 $u$ 和 $v$ ($1\\le u, v\\le n$)，表示连接房间 $u$ 和房间 $v$ 的通道。\n\n保证所有测试用例中 $n$ 的总和不超过 $2\\times 10^5$，并且房间和通道始终构成一棵树。\n\n对于每个测试用例，输出一个数字表示添加的通道的最小数量，或者只输出 $-1$。", "outputFormat": "输出一行整数，表示答案。\n\n翻译来自于：[ChatGPT](https://chatgpt.com/)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9726", "type": "P", "difficulty": 7, "samples": [["5\n2 3\n6 7\n1 9\n5 10\n4 8\n", "9\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384]}, "tags": ["2022", "网络流", "O2优化", "ICPC", "bitset", "EC Final"], "title": "[EC Final 2022] Magic", "background": "", "description": "**Warning: Unusual memory limit!**\n\nYou are given a sequence $a_0,\\ldots,a_{2n}$. Initially, all numbers are zero. \n\nThere are $n$ operations. The $i$-th operation is represented by two integers $l_i, r_i$ ($1\\le l_i < r_i\\le 2n, 1\\le i\\le n$), which assigns $i$ to $a_{l_i},\\ldots,a_{r_i-1}$.  It is guaranteed that all the $2n$ integers, $l_1,l_2,\\ldots, l_n, r_1, r_2, \\ldots, r_n$, are distinct.\n\nYou need to perform each operation exactly once, in arbitrary order.\n\nYou want to maximize the number of $i$ $(0\\leq i< 2n)$ such that $a_i\\neq a_{i+1}$ after all $n$ operations. Output the maximum number.", "inputFormat": "The first line contains an integer $n$ ($1\\le n\\le 5\\times 10^3$).\n\nThe $i$-th line of the next $n$ lines contains a pair of integers $l_i, r_i$ ($1\\le l_i < r_i\\le 2n$). It is guaranteed that all the $2n$ integers, $l_1,l_2,\\ldots, l_n, r_1, r_2, \\ldots, r_n$, are distinct.", "outputFormat": "Output one integer representing the answer in one line.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2022] Magic", "background": "", "description": "**Warning: Unusual memory limit!**\n\nYou are given a sequence $a_0,\\ldots,a_{2n}$. Initially, all numbers are zero. \n\nThere are $n$ operations. The $i$-th operation is represented by two integers $l_i, r_i$ ($1\\le l_i < r_i\\le 2n, 1\\le i\\le n$), which assigns $i$ to $a_{l_i},\\ldots,a_{r_i-1}$.  It is guaranteed that all the $2n$ integers, $l_1,l_2,\\ldots, l_n, r_1, r_2, \\ldots, r_n$, are distinct.\n\nYou need to perform each operation exactly once, in arbitrary order.\n\nYou want to maximize the number of $i$ $(0\\leq i< 2n)$ such that $a_i\\neq a_{i+1}$ after all $n$ operations. Output the maximum number.", "inputFormat": "The first line contains an integer $n$ ($1\\le n\\le 5\\times 10^3$).\n\nThe $i$-th line of the next $n$ lines contains a pair of integers $l_i, r_i$ ($1\\le l_i < r_i\\le 2n$). It is guaranteed that all the $2n$ integers, $l_1,l_2,\\ldots, l_n, r_1, r_2, \\ldots, r_n$, are distinct.", "outputFormat": "Output one integer representing the answer in one line.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2022] Magic", "background": null, "description": "**警告：不寻常的内存限制！**\n\n给定一个序列 $a_0, \\ldots, a_{2n}$。最初，所有数字都是零。\n\n有 $n$ 个操作。第 $i$ 个操作由两个整数 $l_i, r_i$ 表示（$1 \\le l_i < r_i \\le 2n, 1 \\le i \\le n$），它将 $i$ 赋值给 $a_{l_i}, \\ldots, a_{r_i-1}$。保证所有 $2n$ 个整数 $l_1, l_2, \\ldots, l_n, r_1, r_2, \\ldots, r_n$ 都是不同的。\n\n你需要以任意顺序执行每个操作恰好一次。\n\n你想要最大化满足 $a_i \n\\neq a_{i+1}$ 的 $i$ 的数量（$0 \\leq i < 2n$）在所有 $n$ 个操作之后。输出最大数量。", "inputFormat": "第一行包含一个整数 $n$（$1 \\le n \\le 5 \\times 10^3$）。\n\n接下来的 $n$ 行中的第 $i$ 行包含一对整数 $l_i, r_i$（$1 \\le l_i < r_i \\le 2n$）。保证所有 $2n$ 个整数 $l_1, l_2, \\ldots, l_n, r_1, r_2, \\ldots, r_n$ 都是不同的。", "outputFormat": "输出一个整数，表示答案。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9727", "type": "P", "difficulty": 6, "samples": [["3\n2 2\n3 4\n3 8\n", "4\n11\n11\n9\n1110\n1110\n1110\n18\n11101110\n10111011\n11011011\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "Special Judge", "O2优化", "构造", "ICPC", "EC Final"], "title": "[EC Final 2022] Aqre", "background": "", "description": "Given an $n \\times m$ matrix, you need to fill it with $0$ and $1$, such that:\n\n- There cannot be **four** consecutive horizontal or vertical cells filled with the same number.\n- The cells filled with $1$ form a connected area. (Two cells are adjacent if they share an edge. A group of cells is said to be connected if for every pair of cells it is possible to find a path connecting the two cells which lies completely within the group, and which only travels from one cell to an adjacent cell in each step.)\n\nPlease construct a matrix satisfying the conditions above and has as many $1$s as possible. Output the maximum number of $1$s, and the matrix.", "inputFormat": "The first line contains an integer $T~(1\\leq T\\leq 10^3)$ -- the number of test cases.\n\nFor each test case, the first line contains two integers $n, m~(2\\leq n, m\\leq 10^3)$.\n\n### It is guaranteed that the sum of $n\\cdot m$ over all test cases does not exceed $10^6$.", "outputFormat": "For each test case, output the maximum number of $1$s in the first line. Then output the matrix in the following $n$ lines. If there are multiple solution, output any.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2022] Aqre", "background": "", "description": "Given an $n \\times m$ matrix, you need to fill it with $0$ and $1$, such that:\n\n- There cannot be **four** consecutive horizontal or vertical cells filled with the same number.\n- The cells filled with $1$ form a connected area. (Two cells are adjacent if they share an edge. A group of cells is said to be connected if for every pair of cells it is possible to find a path connecting the two cells which lies completely within the group, and which only travels from one cell to an adjacent cell in each step.)\n\nPlease construct a matrix satisfying the conditions above and has as many $1$s as possible. Output the maximum number of $1$s, and the matrix.", "inputFormat": "The first line contains an integer $T~(1\\leq T\\leq 10^3)$ -- the number of test cases.\n\nFor each test case, the first line contains two integers $n, m~(2\\leq n, m\\leq 10^3)$.\n\n### It is guaranteed that the sum of $n\\cdot m$ over all test cases does not exceed $10^6$.", "outputFormat": "For each test case, output the maximum number of $1$s in the first line. Then output the matrix in the following $n$ lines. If there are multiple solution, output any.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2022] Aqre", "background": null, "description": "给定一个 $n \\times m$ 矩阵，你需要用 $0$ 和 $1$ 填充它，使得满足以下条件：\n\n- 不能有**四个**连续的水平或垂直单元格填有相同的数字。\n- 填有 $1$ 的单元格形成一个连通区域。（如果它们共享一个边，则两个单元格是相邻的。如果对于每对单元格，可以找到一条完全位于该区域内的连接两个单元格的路径，并且每一步只能从一个单元格移动到相邻的单元格，则一组单元格被称为连通的。）\n\n请构造一个满足上述条件且具有尽可能多的 $1$ 的矩阵。输出 $1$ 的最大数量以及该矩阵。", "inputFormat": "第一行包含一个整数 $T~(1\\leq T\\leq 10^3)$，表示测试用例的数量。\n\n对于每个测试用例，第一行包含两个整数 $n, m~(2\\leq n, m\\leq 10^3)$。\n\n保证所有测试用例中 $n\\cdot m$ 的总和不超过 $10^6$。", "outputFormat": "对于每个测试用例，在第一行中输出 $1$ 的最大数量。然后在接下来的 $n$ 行中输出矩阵。如果有多种解决方案，则输出任意一个。\n\n翻译来自于：[ChatGPT](https://chatgpt.com/)", "hint": null, "locale": "zh-CN"}}}
{"pid": "P9728", "type": "P", "difficulty": 3, "samples": [["5 2\n1 0 1 0 1\n", "13\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2022", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2022] Dining Professors", "background": "", "description": "Prof. Pang invited $n$ professors to his banquet. The professors sit at a round table. For all $i$ from $1$ to $n$, professor $i$ sits adjacent to professor $(i \\bmod n) + 1$ and $((i + n - 2)\\bmod n) + 1$.\n\nProf. Pang prepared $n$ dishes. There are $n$ positions on the table. Position $i$ is in front of professor $i$. Professor $i$ can access only the dishes placed at positions $i$, $(i \\bmod n) + 1$, and $((i + n - 2)\\bmod n) + 1$. Prof. Pang will place exactly one dish at each position.\n\nAmong the dishes, $a$ of them are spicy and $n-a$ of them are not spicy. Some (possibly $0$) professors are unable to have spicy food. If a professor can have spicy food, his/her **satisfaction level** is the number of dishes (no matter spicy or not) he/she can access. If a professor cannot have spicy food, his/her satisfaction level is the number of not spicy dishes he/she can access.\n\nProf. Pang knows whether each professor can have spicy food or not. Please help him to arrange the dishes on the table so that the sum of satisfaction levels over all the professors is maximized. Output the maximum sum.", "inputFormat": "The first line contains two integers $n, a$ ($3\\le n\\le 10^5, 0\\le a\\le n$). \n\nThe second line contains $n$ integers $b_1, \\ldots, b_n$. $b_i$ is $0$ or $1$. $b_i=1$ means professor $i$ can have spicy food. $b_i=0$ means professor $i$ cannot have spicy food.", "outputFormat": "Output one integer representing the answer in one line.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2022] Dining Professors", "background": "", "description": "Prof. Pang invited $n$ professors to his banquet. The professors sit at a round table. For all $i$ from $1$ to $n$, professor $i$ sits adjacent to professor $(i \\bmod n) + 1$ and $((i + n - 2)\\bmod n) + 1$.\n\nProf. Pang prepared $n$ dishes. There are $n$ positions on the table. Position $i$ is in front of professor $i$. Professor $i$ can access only the dishes placed at positions $i$, $(i \\bmod n) + 1$, and $((i + n - 2)\\bmod n) + 1$. Prof. Pang will place exactly one dish at each position.\n\nAmong the dishes, $a$ of them are spicy and $n-a$ of them are not spicy. Some (possibly $0$) professors are unable to have spicy food. If a professor can have spicy food, his/her **satisfaction level** is the number of dishes (no matter spicy or not) he/she can access. If a professor cannot have spicy food, his/her satisfaction level is the number of not spicy dishes he/she can access.\n\nProf. Pang knows whether each professor can have spicy food or not. Please help him to arrange the dishes on the table so that the sum of satisfaction levels over all the professors is maximized. Output the maximum sum.", "inputFormat": "The first line contains two integers $n, a$ ($3\\le n\\le 10^5, 0\\le a\\le n$). \n\nThe second line contains $n$ integers $b_1, \\ldots, b_n$. $b_i$ is $0$ or $1$. $b_i=1$ means professor $i$ can have spicy food. $b_i=0$ means professor $i$ cannot have spicy food.", "outputFormat": "Output one integer representing the answer in one line.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2022] Dining Professors", "background": "", "description": "庞教授邀请了 $n$ 位教授参加他的宴会。教授们坐在一个圆桌周围。对于所有 $i$，从 $1$ 到 $n$，教授 $i$ 坐在教授 $(i \\bmod n) + 1$ 和 $((i + n - 2)\\bmod n) + 1$ 旁边。\n\n庞教授准备了 $n$ 道菜。桌子上有 $n$ 个位置。位置 $i$ 在教授 $i$ 的前面。教授 $i$ 只能接触到放在位置 $i$、$(i \\bmod n) + 1$ 和 $((i + n - 2)\\bmod n) + 1$ 处的菜。庞教授将在每个位置上放置一道菜。\n\n在这些菜中，有 $a$ 道是辣的，$n-a$ 道是不辣的。有些（可能为 $0$）教授不能吃辣的食物。如果一位教授可以吃辣的食物，他/她的**满意度水平**是他/她可以接触到的菜的数量（无论是辣的还是不辣的）。如果一位教授不能吃辣的食物，他/她的满意度水平是他/她可以接触到的不辣的菜的数量。\n\n庞教授知道每位教授是否可以吃辣的食物。请帮助他安排桌子上的菜，使得所有教授的满意度水平之和最大化。输出最大的总和。", "inputFormat": "第一行包含两个整数 $n, a$ ($3\\le n\\le 10^5, 0\\le a\\le n$)。\n\n第二行包含 $n$ 个整数 $b_1, \\ldots, b_n$。$b_i$ 是 $0$ 或 $1$。$b_i=1$ 表示教授 $i$ 可以吃辣的食物。$b_i=0$ 表示教授 $i$ 不能吃辣的食物。", "outputFormat": "输出一行一个整数，表示答案。\n\n翻译来自于：[ChatGPT](https://chatgpt.com/)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9730", "type": "P", "difficulty": 7, "samples": [["17 2\n42 1 33 1\n42 1 33 7\n", "YES\nNO\n"], ["1 1\n999999999999 999999999999 999999999999 999999999999\n", "YES\n"], ["2 1\n1000000000000 0 1 1000000000000\n", "NO\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "CEOI（中欧）"], "title": "[CEOI 2023] Grading Server", "background": "翻译自 CEOI2023 Day1 T2 [Grading Server](https://www.ceoi2023.de/wp-content/uploads/2023/09/2-grading-server.pdf)。", "description": "竞赛委员会的主席注意到了一些可疑的网络活动 —— 有人想要攻击评测系统！\n\n评测系统拥有特定的算力 $c_G$。黑客会尝试将 $c_G$ 降为 $0$（甚至更低）。系统被 $f_G$ 个防火墙保护着，每个防火墙都会将攻击的影响降低 $S$。\n\n每个时刻，黑客可以进行以下两种操作之一：\n\n- 击破一个防火墙，将 $f_G$ 降低 $1$（但不能低于 $0$），或者\n- 用他所有的算力 $c_H$ 攻击系统，将 $c_G$ 降低 $\\max(c_H - f_G\\cdot S, 0)$。\n\n但委员会主席可以反击：击破黑客的 $f_H$ 个防火墙之一；或者用系统的算力攻击黑客，类似地将 $c_H$ 降低 $\\max(c_G - f_H \\cdot S,0)$。委员会主席和黑客轮流行动，黑客先行动。\n\n为了安排防御，委员会成员需要一个程序告诉他们，在 $Q$ 个不同的 $(c_H, f_H, c_G, f_G)$ 情况下，就算委员会主席采取了最优的行动，黑客是否依然能够击垮评测系统（将 $c_G$ 降低为 $0$ 或更低）。", "inputFormat": "第一行两个整数 $S, Q$。\n\n接下来 $Q$ 行，每行四个整数 $c_H, f_H, c_G, f_G$ 描述一个情况，分别为黑客的算力和防火墙数量，以及评测系统的算力和防火墙数量。", "outputFormat": "你的程序应当输出 $Q$ 行，每行一个字符串 `YES` 或 `NO`。`YES` 表示无论委员会主席的行动如何，采取最优策略的黑客总能够让 $c_G$ 降为 $0$ 或更低；否则输出 `NO`。", "hint": "#### 样例解释\n\n考虑样例一的第一个情况：\n\n- 首先，黑客攻击评测系统，将 $c_G$ 降低 $42 - 1\\cdot 17 = 25$ 为 $8$；\n- 接下来，委员会主席无法通过攻击降低 $c_H$，所以明智的选择是击破黑客的唯一的防火墙；\n- 然而，黑客可以继续攻击评测系统，将 $c_G$ 降低 $25$ 为 $-17\\leq 0$，击垮评测系统并毁掉第一天比赛日。\n\n对于第二个情况：\n\n- 一开始，黑客唯一能做的就是击破一个评测系统的防火墙；\n- 接下来，委员会主席攻击黑客，将 $c_H$ 降低为 $26$；\n- 接下来两轮，黑客同样只能攻击评测系统的防火墙。同时委员会主席每次攻击黑客，将 $c_H$ 降低为不大于 $0$ 的值，成功防御黑客的攻击。\n\n#### 数据范围与约定\n\n- Subtask 1（5 分）：$S, c_H, c_G, f_H, f_G\\leq 75$；\n- Subtask 2（5 分）：$S, c_H, c_G, f_H, f_G\\leq 300$；\n- Subtask 3（10 分）：$S = 1$；\n- Subtask 4（25 分）：$S, c_H, c_G, f_H, f_G\\leq 2000$；\n- Subtask 5（20 分）：$S\\leq 400$；\n- Subtask 6（20 分）：$f_H, f_G\\leq 125$；\n- Subtask 7（15 分）：无特殊限制。\n\n对于所有数据，$1\\leq S\\leq 3\\times 10 ^ 4$，$1\\leq c_H, c_G\\leq 10 ^ {12}$，$0\\leq f_H, f_G\\leq 10 ^ {12}$，$1\\leq Q\\leq 2.5\\times 10 ^ 5$。\n\n#### 限制\n\n时间：4s  \n空间：1GB", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2023] Grading Server", "background": "翻译自 CEOI2023 Day1 T2 [Grading Server](https://www.ceoi2023.de/wp-content/uploads/2023/09/2-grading-server.pdf)。", "description": "竞赛委员会的主席注意到了一些可疑的网络活动 —— 有人想要攻击评测系统！\n\n评测系统拥有特定的算力 $c_G$。黑客会尝试将 $c_G$ 降为 $0$（甚至更低）。系统被 $f_G$ 个防火墙保护着，每个防火墙都会将攻击的影响降低 $S$。\n\n每个时刻，黑客可以进行以下两种操作之一：\n\n- 击破一个防火墙，将 $f_G$ 降低 $1$（但不能低于 $0$），或者\n- 用他所有的算力 $c_H$ 攻击系统，将 $c_G$ 降低 $\\max(c_H - f_G\\cdot S, 0)$。\n\n但委员会主席可以反击：击破黑客的 $f_H$ 个防火墙之一；或者用系统的算力攻击黑客，类似地将 $c_H$ 降低 $\\max(c_G - f_H \\cdot S,0)$。委员会主席和黑客轮流行动，黑客先行动。\n\n为了安排防御，委员会成员需要一个程序告诉他们，在 $Q$ 个不同的 $(c_H, f_H, c_G, f_G)$ 情况下，就算委员会主席采取了最优的行动，黑客是否依然能够击垮评测系统（将 $c_G$ 降低为 $0$ 或更低）。", "inputFormat": "第一行两个整数 $S, Q$。\n\n接下来 $Q$ 行，每行四个整数 $c_H, f_H, c_G, f_G$ 描述一个情况，分别为黑客的算力和防火墙数量，以及评测系统的算力和防火墙数量。", "outputFormat": "你的程序应当输出 $Q$ 行，每行一个字符串 `YES` 或 `NO`。`YES` 表示无论委员会主席的行动如何，采取最优策略的黑客总能够让 $c_G$ 降为 $0$ 或更低；否则输出 `NO`。", "hint": "#### 样例解释\n\n考虑样例一的第一个情况：\n\n- 首先，黑客攻击评测系统，将 $c_G$ 降低 $42 - 1\\cdot 17 = 25$ 为 $8$；\n- 接下来，委员会主席无法通过攻击降低 $c_H$，所以明智的选择是击破黑客的唯一的防火墙；\n- 然而，黑客可以继续攻击评测系统，将 $c_G$ 降低 $25$ 为 $-17\\leq 0$，击垮评测系统并毁掉第一天比赛日。\n\n对于第二个情况：\n\n- 一开始，黑客唯一能做的就是击破一个评测系统的防火墙；\n- 接下来，委员会主席攻击黑客，将 $c_H$ 降低为 $26$；\n- 接下来两轮，黑客同样只能攻击评测系统的防火墙。同时委员会主席每次攻击黑客，将 $c_H$ 降低为不大于 $0$ 的值，成功防御黑客的攻击。\n\n#### 数据范围与约定\n\n- Subtask 1（5 分）：$S, c_H, c_G, f_H, f_G\\leq 75$；\n- Subtask 2（5 分）：$S, c_H, c_G, f_H, f_G\\leq 300$；\n- Subtask 3（10 分）：$S = 1$；\n- Subtask 4（25 分）：$S, c_H, c_G, f_H, f_G\\leq 2000$；\n- Subtask 5（20 分）：$S\\leq 400$；\n- Subtask 6（20 分）：$f_H, f_G\\leq 125$；\n- Subtask 7（15 分）：无特殊限制。\n\n对于所有数据，$1\\leq S\\leq 3\\times 10 ^ 4$，$1\\leq c_H, c_G\\leq 10 ^ {12}$，$0\\leq f_H, f_G\\leq 10 ^ {12}$，$1\\leq Q\\leq 2.5\\times 10 ^ 5$。\n\n#### 限制\n\n时间：4s  \n空间：1GB", "locale": "zh-CN"}}}
{"pid": "P9731", "type": "P", "difficulty": 6, "samples": [["3 2 3\n1 2\n2 3\n2 3", "2 1\n3 2\n2 3"], ["3 4 3\n2 3 2 2\n2 3 3 2\n2 2 3 2", "2 2 2 3\n3 2 3 2\n2 3 2 2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "Special Judge", "O2优化", "CEOI（中欧）", "欧拉回路", "构造"], "title": "[CEOI 2023] Balance", "background": "翻译自 CEOI2023 Day1 T3 [Balance](https://www.ceoi2023.de/wp-content/uploads/2023/09/3-balance.pdf)。", "description": "由于黑客对评测机的攻击，组委会决定重测所有提交记录。\n\n有 $N$ 台评测机，$T$ 个题目（编号为 $1, 2, \\cdots, T$）。组委会已经确定，每台评测机要评测哪些提交（数目相同，都是 $S$ 个提交，保证 $S$ 是 $2$ 的整数次幂）。在接下来的 $S$ 分钟内，每分钟每台评测机会评测一个提交。\n\n每个提交都会提交至某个题目。由于存数据的机器太脆弱了，所以要求，对于所有题目和任意两个时刻，在这两个时刻，这个题的被评测的提交的数量之差不超过 $1$。\n\n请构造一组方案，使得满足上面的条件。", "inputFormat": "第一行输入 $N, S, T$。\n\n接下来 $N$ 行，每行输入 $S$ 个整数，表示这个评测机被分配到的提交的题目编号。", "outputFormat": "输出 $N$ 行，每行 $S$ 个数，表示这个评测机按顺序要评测的提交的题目编号。\n\n可以证明，一定存在一组解。", "hint": "保证存在正整数 $k$ 使得 $S = 2 ^ k$，$1 \\le N, S, T \\le 10 ^ 5$，$NS \\le 5 \\times 10 ^ 5$。\n\n- Subtask 1（$10$ 分）：$S = 2$ 且 $N, T \\le 20$。\n- Subtask 2（$15 + 5 + 5$ 分）：$S = 2$。\n- Subtask 3（$15 + 5 + 5$ 分）：$NS \\le 10 ^ 4$。\n- Subtask 4（$20 + 10 + 10$ 分）：没有其它限制。\n\n对于后三个子任务，存在部分分（对应括号中的分数）：\n\n- 第一个数表示如果能解决满足 $T \\le N$ 且对于每个题目的提交数量均整除 $S$ 时的所有测试点能得到的分数。\n- 第二个数表示如果能解决满足 $T \\le N$ 时的所有测试点能多得到的分数。\n- 第三个数表示如果解决了整个 Subtask 时能多得到的分数。\n\n在洛谷上，本题分为 $10$ 个子任务。对于原来的后三个 Subtask，在本题中分别按顺序分为三个子任务（如原 Subtask 3 就是子任务 $5, 6, 7$），有依赖关系。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2023] Balance", "background": "翻译自 CEOI2023 Day1 T3 [Balance](https://www.ceoi2023.de/wp-content/uploads/2023/09/3-balance.pdf)。", "description": "由于黑客对评测机的攻击，组委会决定重测所有提交记录。\n\n有 $N$ 台评测机，$T$ 个题目（编号为 $1, 2, \\cdots, T$）。组委会已经确定，每台评测机要评测哪些提交（数目相同，都是 $S$ 个提交，保证 $S$ 是 $2$ 的整数次幂）。在接下来的 $S$ 分钟内，每分钟每台评测机会评测一个提交。\n\n每个提交都会提交至某个题目。由于存数据的机器太脆弱了，所以要求，对于所有题目和任意两个时刻，在这两个时刻，这个题的被评测的提交的数量之差不超过 $1$。\n\n请构造一组方案，使得满足上面的条件。", "inputFormat": "第一行输入 $N, S, T$。\n\n接下来 $N$ 行，每行输入 $S$ 个整数，表示这个评测机被分配到的提交的题目编号。", "outputFormat": "输出 $N$ 行，每行 $S$ 个数，表示这个评测机按顺序要评测的提交的题目编号。\n\n可以证明，一定存在一组解。", "hint": "保证存在正整数 $k$ 使得 $S = 2 ^ k$，$1 \\le N, S, T \\le 10 ^ 5$，$NS \\le 5 \\times 10 ^ 5$。\n\n- Subtask 1（$10$ 分）：$S = 2$ 且 $N, T \\le 20$。\n- Subtask 2（$15 + 5 + 5$ 分）：$S = 2$。\n- Subtask 3（$15 + 5 + 5$ 分）：$NS \\le 10 ^ 4$。\n- Subtask 4（$20 + 10 + 10$ 分）：没有其它限制。\n\n对于后三个子任务，存在部分分（对应括号中的分数）：\n\n- 第一个数表示如果能解决满足 $T \\le N$ 且对于每个题目的提交数量均整除 $S$ 时的所有测试点能得到的分数。\n- 第二个数表示如果能解决满足 $T \\le N$ 时的所有测试点能多得到的分数。\n- 第三个数表示如果解决了整个 Subtask 时能多得到的分数。\n\n在洛谷上，本题分为 $10$ 个子任务。对于原来的后三个 Subtask，在本题中分别按顺序分为三个子任务（如原 Subtask 3 就是子任务 $5, 6, 7$），有依赖关系。", "locale": "zh-CN"}}}
{"pid": "P9732", "type": "P", "difficulty": 7, "samples": [["5 3\n3 5 2 3 6\n2 1 5 2 3", "-1\n00111"], ["5 2\n1 6 1 5 2\n4 1 6 2 4", "2\n10111"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["线段树", "并查集", "2023", "Special Judge", "O2优化", "CEOI（中欧）", "决策单调性"], "title": "[CEOI 2023] Trade", "background": "译自 CEOI2023 Day2 T1 [Trade](https://www.ceoi2023.de/wp-content/uploads/2023/09/4-trade.pdf)。", "description": "有 $n$ 个机器人排成一排，第 $i$ 个机器人的购买价是 $c_i$ 欧元，卖出价是 $s_i$ 欧元。\n\n给定 $1\\le k\\le n$，你需要购买一段长度至少为 $k$ 的区间中所有的机器人，然后选择其中的恰好 $k$ 个机器人来卖出。\n\n你需要求出：\n1. 你能够得到的最大收益；\n2. 在收益最大化的前提下，哪些机器人可以在某种最优方案中被卖出。", "inputFormat": "第一行包含两个整数 $n,k$。\n\n第二行 $n$ 个正整数 $c_1,\\dots,c_n$。\n\n第三行 $n$ 个正整数 $s_1,\\dots,s_n$。", "outputFormat": "第一行输出一个整数表示最大收益。\n\n第二行输出一个 $01$ 串，第 $i$ 位输出 $1$ 表示第 $i$ 个机器人可以在某种最优方案中被卖出，反之第 $i$ 位输出 $0$。", "hint": "样例一中最优方案是购买第 $3\\sim 5$ 个机器人然后将它们卖出，但仍然会亏损 $1$ 欧元。\n\n样例二中最大收益为 $2$ 欧元，可以购买 $1,2,3$ 并卖出 $1,3$，也可以购买 $3,4$ 并卖出 $3,4$，也可以购买 $3,4,5$ 并卖出 $3,5$，因此 $1,3,4,5$ 都有可能在某种最优方案中被卖出，输出 `10111`。\n\n### 数据规模与约定\n\n对于全部数据，$1\\le k\\le n \\le 250000$，$1\\le c_i,s_i\\le 10^9$。\n\n- Subtask 1（5+5 points）：$n \\le 200$。\n- Subtask 2（5+5 points）：$n \\le 6000$。\n- Subtask 3（5+5 points）：$k=2$。\n- Subtask 4（10+15 points）：$k\\le 200$。\n- Subtask 5（25+20 points）：无特殊限制。\n\n在每个子任务中，如果第一行的输出正确，可以获得子任务前半部分的分数，如果第二行的输出也正确，可以获得子任务全部的分数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2023] Trade", "background": "译自 CEOI2023 Day2 T1 [Trade](https://www.ceoi2023.de/wp-content/uploads/2023/09/4-trade.pdf)。", "description": "有 $n$ 个机器人排成一排，第 $i$ 个机器人的购买价是 $c_i$ 欧元，卖出价是 $s_i$ 欧元。\n\n给定 $1\\le k\\le n$，你需要购买一段长度至少为 $k$ 的区间中所有的机器人，然后选择其中的恰好 $k$ 个机器人来卖出。\n\n你需要求出：\n1. 你能够得到的最大收益；\n2. 在收益最大化的前提下，哪些机器人可以在某种最优方案中被卖出。", "inputFormat": "第一行包含两个整数 $n,k$。\n\n第二行 $n$ 个正整数 $c_1,\\dots,c_n$。\n\n第三行 $n$ 个正整数 $s_1,\\dots,s_n$。", "outputFormat": "第一行输出一个整数表示最大收益。\n\n第二行输出一个 $01$ 串，第 $i$ 位输出 $1$ 表示第 $i$ 个机器人可以在某种最优方案中被卖出，反之第 $i$ 位输出 $0$。", "hint": "样例一中最优方案是购买第 $3\\sim 5$ 个机器人然后将它们卖出，但仍然会亏损 $1$ 欧元。\n\n样例二中最大收益为 $2$ 欧元，可以购买 $1,2,3$ 并卖出 $1,3$，也可以购买 $3,4$ 并卖出 $3,4$，也可以购买 $3,4,5$ 并卖出 $3,5$，因此 $1,3,4,5$ 都有可能在某种最优方案中被卖出，输出 `10111`。\n\n### 数据规模与约定\n\n对于全部数据，$1\\le k\\le n \\le 250000$，$1\\le c_i,s_i\\le 10^9$。\n\n- Subtask 1（5+5 points）：$n \\le 200$。\n- Subtask 2（5+5 points）：$n \\le 6000$。\n- Subtask 3（5+5 points）：$k=2$。\n- Subtask 4（10+15 points）：$k\\le 200$。\n- Subtask 5（25+20 points）：无特殊限制。\n\n在每个子任务中，如果第一行的输出正确，可以获得子任务前半部分的分数，如果第二行的输出也正确，可以获得子任务全部的分数。", "locale": "zh-CN"}}}
{"pid": "P9733", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "交互题", "Special Judge", "O2优化", "CEOI（中欧）"], "title": "[CEOI 2023] The Ties That Guide Us (incursion)", "background": "", "description": "你用销售机器人的利润雇佣了一名助手，现在你准备好去拿走装有 CEOI 奖章的保险箱了。\n\n保险箱位于一所由 $n$ 个房间所组成的大学建筑内，这些房间由 $n-1$ 扇门连接。每个房间都可以从其他任何房间到达，且每个房间最多与 $3$ 扇门相连。  \n你和你的助手都有描述建筑物内房间相连情况的平面图，但是你们两个各自拥有的平面图虽然描述了相同的房间结构布局，但是房间和门的编号可能不同。\n\n在比赛的第二天，委员会忙于处理赛时通知和选手提问。这将是接近装着奖牌的保险箱的完美机会。\n\n你的助手会首先搜索整栋大楼。一旦他找到保险箱所在的房间，它就会给你留下前往那个房间的提示。由于手机不能带进赛场，他用了去年 BOI 留下的几乎无限供应的领带。由于这些领带完全相同无法区分，你能获得的信息就是他在任何给定房间里所留下的领带数量。由于一个房间内过多的领带非常可疑，因此任何单个房间内领带的最大数量应当尽可能少（参阅评分部分）。\n\n之后，你计划在上厕所的时候溜出去，利用助手留下来的领带找到有保险箱的房间。保险箱藏在房间里，所以你进入带有保险箱的房间时，必须依靠领带识别这个房间；此外，由于“上厕所”时间过长会被发现，你必须尽快找到保险箱。你最多可以走过 $d+30$ 扇门，其中 $d$ 是你的初始位置到保险箱所在位置的最短路径上的门数量。若重复穿过同一扇门，则每次都计入。\n\n因此，你需要编写一个程序，告诉助手需要在每个房间留下多少条领带，并引导你前往带有保险箱的房间。", "inputFormat": "本题为函数交互题。\n\n对于每个测试点，你的程序会运行两次。\n\n你需要实现如下两个函数（函数原型已给出）：\n```\nvector<int> mark(vector<pair<int,int>> F, int safe);\n```\n- $F$: 包含了 $n-1$ 个二元组 $(u,v)$，其中 $1 \\le u,v \\le n$ 并且保证 $u \\neq v$，代表在助手的地图上，$u$ 号房间和 $v$号房间之间由一扇门相连。\n- $\\mathrm{safe}$: 表示你的助手的地图上保险箱所在的房间编号。\n\n该函数应当返回一个长度为 $n$ 的 `vector<int>` $v$，其中每个元素 $v_i$ 代表你的助手应当在他地图上 $i+1$ 号房间留下的领带数量。你应当保证 $0 \\le v_i \\le 10^9$。\n\n```\nvoid locate(vector<pair<int,int>> F,int curr,int t);\n```\n- $F$: 包含了 $n-1$ 个二元组 $(u,v)$，其中 $1 \\le u,v \\le n$ 并且保证 $u \\neq v$，代表在你的地图上，$u$ 号房间和 $v$号房间之间由一扇门相连。\n- $\\mathrm{curr}$: 你目前所在的房间编号。\n- $t$: 在你当前所处的房间中，找到的领带数量。\n\n在如下的叙述中，房间编号采用你地图的编号方案。\n\n在实现函数 `locate` 的过程中，你可以调用如下函数：\n```\nint visit(int v);\n```\n以此来从你目前所在的房间 $u$ 移动到一个相邻的房间 $v$。你需要保证操作合法，即 $1 \\le v \\le n,(u,v) \\in F\\:\\vee (v,u) \\in F$。\n\n该函数返回一个非负整数 $k$，表示你在房间 $v$ 中找到的领带个数。\n\n该函数调用的次数不应超过 $d+30$，其中 $d$ 是你的起点到终点的最短距离。\n\n当函数 `locate` 终止时，你应当处于带有保险箱的房间内。\n\n对于每个测试点，第一次运行程序时调用 `mark`，第二次调用 `locate`。\n\n如果 `visit` 调用次数过多、调用不合法或在 `mark` 中被调用，你的程序将会被终止运行，提交将会被判**错误**。  \n你的程序不得写入或读取 `stdin` 或 `stdout`，否则将会被判**违反安全规定**。  \n但是你可以随便往 `stderr` 输出，没人管这个。\n\n你需要在源代码文件开头加上 `#include \"incursion.h\"`。\n\n你应当将程序与 `sample_grader.cpp` 链接以进行本地测试。\n\n下面是示例评分器的说明，请参阅 `sample_grader.cpp` 以获取操作说明。\n\n为简单起见，本评分器不会运行你的程序两次，而是在一次运行中调用两个函数各一次。附件中包含了一个 `sample_grader.cpp` 的示例实现。\n\n注意：该实现不与评测所用的实现相同，禁止采用 Hack 评分器的方式试图通过本题！\n", "outputFormat": "", "hint": "### 评分细则\n\n共有 4 个 subtask。对于每个测试点，$2 \\le n \\le 45000$。\n\nSubtask 1 (30 points)，保证没有一个房间有三扇门相连。\nSubtask 2 (30 points). 有且仅有一个房间有两扇门相连。\nSubtask 3 (40 points). 没有特殊性质。\n\n对于每个测试点，假设使用领带最多的房间用了 $T_{\\max}$ 条领带，\n- $T_{\\max}<2$，你将会获得该测试点 $100\\%$ 的分数。\n- $T_{\\max}=2$，你将会获得该测试点 $40\\%$ 的分数。\n- $2 < T_{\\max} \\le 10^9$，你将会获得该测试点 $30\\%$ 的分数。\n\n### 交互库使用方法\n**注意洛谷提供的交互库与原版不同。**\n\n请使用 `g++ -std=c++17 -Wall -O2 -o test interactive_lib.cpp xxx.cpp` 编译，其中 `xxx.cpp` 是你的程序名字。\n\n示例交互库首先从标准输入读入三个正整数, $n$, $s$, $seed$，表示点数、起点的原编号、随机数种子。\n\n然后读入 $n-1$ 行，每行两个正整数 $u,v$，表示原树的一条边。其中需保证 $1 \\le u < v \\le n$。\n然后读入一行一个字符串，表示打乱规则。\n\n**你不需要在意打乱序号的具体实现。该实现与最终评测所用交互库不一定相同。**\n\n接下来交互库将会调用一次 `mark`，一次 `locate`。注意交互库可能会打乱序号。\n\n交互库可能向终端输出以下信息：\n\n- `Invalid input.` 输入不合法。\n- `Invalid call to visit. (ALICE CALLED VISIT)` 在 `mark` 中调用 `visit`。\n- `Invalid call to visit. (INDEX ERROR)` 访问了不合法的点。\n- `Invalid call to visit. (NOT CONNECTED)` 访问的点和当前所在的点没有直接的边相连。\n- `Invalid call to visit. (TOO MANY VISITS)` 调用 `visit` 次数过多。\n- `Invalid return value of mark.` `mark` 的返回值不合法。即返回的 `vector` 长度不为 $n$ 或者有小于 $0$ 或大于 $10^9$ 的数。\n- `Not correct: current position is X` 最终并不在目标点，你应该在 $X$ 点（在第二张地图上）。\n- `Correct: at most X tie(s) per room.` 到达目标点，且用领带最多的房间使用了 X 条领带。\n\n最终评测时，只会返回正确与否的信息。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2023] The Ties That Guide Us (incursion)", "background": "", "description": "你用销售机器人的利润雇佣了一名助手，现在你准备好去拿走装有 CEOI 奖章的保险箱了。\n\n保险箱位于一所由 $n$ 个房间所组成的大学建筑内，这些房间由 $n-1$ 扇门连接。每个房间都可以从其他任何房间到达，且每个房间最多与 $3$ 扇门相连。  \n你和你的助手都有描述建筑物内房间相连情况的平面图，但是你们两个各自拥有的平面图虽然描述了相同的房间结构布局，但是房间和门的编号可能不同。\n\n在比赛的第二天，委员会忙于处理赛时通知和选手提问。这将是接近装着奖牌的保险箱的完美机会。\n\n你的助手会首先搜索整栋大楼。一旦他找到保险箱所在的房间，它就会给你留下前往那个房间的提示。由于手机不能带进赛场，他用了去年 BOI 留下的几乎无限供应的领带。由于这些领带完全相同无法区分，你能获得的信息就是他在任何给定房间里所留下的领带数量。由于一个房间内过多的领带非常可疑，因此任何单个房间内领带的最大数量应当尽可能少（参阅评分部分）。\n\n之后，你计划在上厕所的时候溜出去，利用助手留下来的领带找到有保险箱的房间。保险箱藏在房间里，所以你进入带有保险箱的房间时，必须依靠领带识别这个房间；此外，由于“上厕所”时间过长会被发现，你必须尽快找到保险箱。你最多可以走过 $d+30$ 扇门，其中 $d$ 是你的初始位置到保险箱所在位置的最短路径上的门数量。若重复穿过同一扇门，则每次都计入。\n\n因此，你需要编写一个程序，告诉助手需要在每个房间留下多少条领带，并引导你前往带有保险箱的房间。", "inputFormat": "本题为函数交互题。\n\n对于每个测试点，你的程序会运行两次。\n\n你需要实现如下两个函数（函数原型已给出）：\n```\nvector<int> mark(vector<pair<int,int>> F, int safe);\n```\n- $F$: 包含了 $n-1$ 个二元组 $(u,v)$，其中 $1 \\le u,v \\le n$ 并且保证 $u \\neq v$，代表在助手的地图上，$u$ 号房间和 $v$号房间之间由一扇门相连。\n- $\\mathrm{safe}$: 表示你的助手的地图上保险箱所在的房间编号。\n\n该函数应当返回一个长度为 $n$ 的 `vector<int>` $v$，其中每个元素 $v_i$ 代表你的助手应当在他地图上 $i+1$ 号房间留下的领带数量。你应当保证 $0 \\le v_i \\le 10^9$。\n\n```\nvoid locate(vector<pair<int,int>> F,int curr,int t);\n```\n- $F$: 包含了 $n-1$ 个二元组 $(u,v)$，其中 $1 \\le u,v \\le n$ 并且保证 $u \\neq v$，代表在你的地图上，$u$ 号房间和 $v$号房间之间由一扇门相连。\n- $\\mathrm{curr}$: 你目前所在的房间编号。\n- $t$: 在你当前所处的房间中，找到的领带数量。\n\n在如下的叙述中，房间编号采用你地图的编号方案。\n\n在实现函数 `locate` 的过程中，你可以调用如下函数：\n```\nint visit(int v);\n```\n以此来从你目前所在的房间 $u$ 移动到一个相邻的房间 $v$。你需要保证操作合法，即 $1 \\le v \\le n,(u,v) \\in F\\:\\vee (v,u) \\in F$。\n\n该函数返回一个非负整数 $k$，表示你在房间 $v$ 中找到的领带个数。\n\n该函数调用的次数不应超过 $d+30$，其中 $d$ 是你的起点到终点的最短距离。\n\n当函数 `locate` 终止时，你应当处于带有保险箱的房间内。\n\n对于每个测试点，第一次运行程序时调用 `mark`，第二次调用 `locate`。\n\n如果 `visit` 调用次数过多、调用不合法或在 `mark` 中被调用，你的程序将会被终止运行，提交将会被判**错误**。  \n你的程序不得写入或读取 `stdin` 或 `stdout`，否则将会被判**违反安全规定**。  \n但是你可以随便往 `stderr` 输出，没人管这个。\n\n你需要在源代码文件开头加上 `#include \"incursion.h\"`。\n\n你应当将程序与 `sample_grader.cpp` 链接以进行本地测试。\n\n下面是示例评分器的说明，请参阅 `sample_grader.cpp` 以获取操作说明。\n\n为简单起见，本评分器不会运行你的程序两次，而是在一次运行中调用两个函数各一次。附件中包含了一个 `sample_grader.cpp` 的示例实现。\n\n注意：该实现不与评测所用的实现相同，禁止采用 Hack 评分器的方式试图通过本题！\n", "outputFormat": "", "hint": "### 评分细则\n\n共有 4 个 subtask。对于每个测试点，$2 \\le n \\le 45000$。\n\nSubtask 1 (30 points)，保证没有一个房间有三扇门相连。\nSubtask 2 (30 points). 有且仅有一个房间有两扇门相连。\nSubtask 3 (40 points). 没有特殊性质。\n\n对于每个测试点，假设使用领带最多的房间用了 $T_{\\max}$ 条领带，\n- $T_{\\max}<2$，你将会获得该测试点 $100\\%$ 的分数。\n- $T_{\\max}=2$，你将会获得该测试点 $40\\%$ 的分数。\n- $2 < T_{\\max} \\le 10^9$，你将会获得该测试点 $30\\%$ 的分数。\n\n### 交互库使用方法\n**注意洛谷提供的交互库与原版不同。**\n\n请使用 `g++ -std=c++17 -Wall -O2 -o test interactive_lib.cpp xxx.cpp` 编译，其中 `xxx.cpp` 是你的程序名字。\n\n示例交互库首先从标准输入读入三个正整数, $n$, $s$, $seed$，表示点数、起点的原编号、随机数种子。\n\n然后读入 $n-1$ 行，每行两个正整数 $u,v$，表示原树的一条边。其中需保证 $1 \\le u < v \\le n$。\n然后读入一行一个字符串，表示打乱规则。\n\n**你不需要在意打乱序号的具体实现。该实现与最终评测所用交互库不一定相同。**\n\n接下来交互库将会调用一次 `mark`，一次 `locate`。注意交互库可能会打乱序号。\n\n交互库可能向终端输出以下信息：\n\n- `Invalid input.` 输入不合法。\n- `Invalid call to visit. (ALICE CALLED VISIT)` 在 `mark` 中调用 `visit`。\n- `Invalid call to visit. (INDEX ERROR)` 访问了不合法的点。\n- `Invalid call to visit. (NOT CONNECTED)` 访问的点和当前所在的点没有直接的边相连。\n- `Invalid call to visit. (TOO MANY VISITS)` 调用 `visit` 次数过多。\n- `Invalid return value of mark.` `mark` 的返回值不合法。即返回的 `vector` 长度不为 $n$ 或者有小于 $0$ 或大于 $10^9$ 的数。\n- `Not correct: current position is X` 最终并不在目标点，你应该在 $X$ 点（在第二张地图上）。\n- `Correct: at most X tie(s) per room.` 到达目标点，且用领带最多的房间使用了 X 条领带。\n\n最终评测时，只会返回正确与否的信息。", "locale": "zh-CN"}}}
{"pid": "P9734", "type": "P", "difficulty": 7, "samples": [["4 5 20 6\n0 1 3 19\n0 2 2 8\n1 2 4 15\n1 3 5 14\n2 3 1 18\n0 3 5\n0 3 7\n0 3 9\n2 0 6\n3 1 10\n1 2 15", "3\n8\n14\n2\n5\n7"], ["6 10 100 9\n5 3 4 29\n1 0 6 26\n0 4 2 7\n0 5 18 18\n2 0 79 82\n3 4 35 46\n1 2 15 57\n2 4 3 6\n4 1 21 83\n3 2 47 53\n0 2 63\n0 4 70\n0 4 98\n0 5 25\n0 5 19\n0 4 96\n0 5 2\n0 3 62\n0 3 83", "42\n32\n4\n93\n99\n6\n102\n60\n39"], ["8 12 1000000000000000 13\n2 0 4451698272827 120985696255786\n6 5 78520421713825 342652131468508\n2 1 185377268405175 382583457603811\n0 4 54350742205838 133614919589507\n7 0 68486247989149 651590905094148\n0 6 85177550834829 299184420663240\n5 2 442329739732459 926608308293721\n3 7 78020232822359 913548478810253\n1 3 267796317244889 687571310475622\n5 4 90590208828121 910324397566584\n5 7 8414633059584 17796117322043\n4 6 45682367792138 204548471584556\n7 2 44779065000162\n3 5 79376234836942\n4 7 305556687070759\n4 3 927935834343174\n5 1 663284649258985\n2 5 967584209777344\n5 2 963749709374595\n7 4 484562389171308\n1 5 446160773830045\n6 4 801452311055604\n3 1 744524289545354\n0 6 467418420721777\n5 6 371181379240653", "72937946261976\n929038398222642\n702857945988825\n272921388674172\n580895059624855\n181808439529442\n117602869946965\n569788353034530\n1181546234307589\n244230056736534\n513790925121797\n617759130113052\n674500988551485"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2021", "JOISC/JOIST（日本）"], "title": "[JOISC 2021] 逃走経路 (Escape Route) (Day2)", "background": "在洛谷上提交本题**不是**交互题，请注意提交方式。\n\n本题测试数据很大，评测可能需要加载 1-2 分钟。\n\n[英文题面](https://www2.ioi-jp.org/camp/2021/2021-sp-tasks/day2/escape_route-en.pdf)。", "description": "IOI 王国使用 Byou（秒）作为时间单位，将一天划分成 $S$ Byou，分别称为时刻 $0,1,\\dotsc,S-1$。\n\nIOI 王国中有 $N$ 个城市和 $M$ 条双向道路，均从 $0$ 开始标号。保证任两个城市之间均连通。第 $i$ 条道路连接城市 $A_i$ 和 $B_i$，需要恰好 $L_i$ Byou 通过。每天的时刻 $C_i$ 后，第 $i$ 条道路将开始进行检查，直到当天结束。\n\nJOI 组织是一个活跃在 IOI 王国中的秘密团体。出于其保密性，成员不能在道路上受到检查。如果其成员想要通过道路 $i$，最晚要在时刻 $C_i-L_i$ 到达这条路的一端。道路的检查不会影响两端的城市。\n\n现在有 $Q$ 名 JOI 组织的成员，从 $0$ 开始标号。第 $j$ 名成员在某天的时刻 $T_j$，要从城市 $U_j$ 出发去城市 $V_j$。成员可以在任意城市内停留任意长的时间。注意这名成员可能会在路上花费一天以上。\n\n请计算每名成员花费的最短时间，精确到 Byou.", "inputFormat": "第一行四个正整数 $N,M,S,Q$。\n\n接下来 $M$ 行，第 $i$ 行四个正整数表示 $A_{i-1},B_{i-1},L_{i-1},C_{i-1}$。\n\n接下来 $Q$ 行，第 $i$ 行三个正整数表示 $U_{i-1},V_{i-1},T_{i-1}$。", "outputFormat": "输出共 $Q$ 行，第 $i$ 行表示第 $i-1$ 名成员旅行所需的最短时间。", "hint": "对于 $100\\%$ 的数据，保证：\n\n- $2 \\leq N \\leq 90$。\n- $N-1 \\leq M \\leq \\dfrac{N(N-1)}{2}$。\n- $2 \\leq S \\leq 10^{15}$。\n- $1 \\leq Q \\leq 3 \\times 10^6$。\n- $0 \\leq A_i,B_i \\leq N-1$。\n- $A_i \\neq B_i$。\n- $\\forall i,j \\in [0,M-1]$，若 $i \\neq j$，则有 $(A_i,B_i) \\neq (A_j,B_j),(A_i,B_i) \\neq (B_j,A_j)$。\n- $1 \\leq L_i \\leq C_i < S$。\n- 从任意城市出发走过一些边后，可以到达任意其他城市。\n- $0\\leq U_j,V_j \\leq N-1$。\n- $U_j \\neq V_j$。\n- $0 \\leq T_j < S$。\n\n有 $5 \\%$ 的分数，满足 $N \\leq 40,Q \\leq 1000$。\n\n另有 $20 \\%$ 的分数，满足 $N \\leq 40,U_j=0$\n\n另有 $10 \\%$ 的分数，满足 $N \\leq 40$。\n\n另有 $35 \\%$ 的分数，满足 $N \\leq 60$。\n\n**建议使用较快的 IO 方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2021] 逃走経路 (Escape Route) (Day2)", "background": "在洛谷上提交本题**不是**交互题，请注意提交方式。\n\n本题测试数据很大，评测可能需要加载 1-2 分钟。\n\n[英文题面](https://www2.ioi-jp.org/camp/2021/2021-sp-tasks/day2/escape_route-en.pdf)。", "description": "IOI 王国使用 Byou（秒）作为时间单位，将一天划分成 $S$ Byou，分别称为时刻 $0,1,\\dotsc,S-1$。\n\nIOI 王国中有 $N$ 个城市和 $M$ 条双向道路，均从 $0$ 开始标号。保证任两个城市之间均连通。第 $i$ 条道路连接城市 $A_i$ 和 $B_i$，需要恰好 $L_i$ Byou 通过。每天的时刻 $C_i$ 后，第 $i$ 条道路将开始进行检查，直到当天结束。\n\nJOI 组织是一个活跃在 IOI 王国中的秘密团体。出于其保密性，成员不能在道路上受到检查。如果其成员想要通过道路 $i$，最晚要在时刻 $C_i-L_i$ 到达这条路的一端。道路的检查不会影响两端的城市。\n\n现在有 $Q$ 名 JOI 组织的成员，从 $0$ 开始标号。第 $j$ 名成员在某天的时刻 $T_j$，要从城市 $U_j$ 出发去城市 $V_j$。成员可以在任意城市内停留任意长的时间。注意这名成员可能会在路上花费一天以上。\n\n请计算每名成员花费的最短时间，精确到 Byou.", "inputFormat": "第一行四个正整数 $N,M,S,Q$。\n\n接下来 $M$ 行，第 $i$ 行四个正整数表示 $A_{i-1},B_{i-1},L_{i-1},C_{i-1}$。\n\n接下来 $Q$ 行，第 $i$ 行三个正整数表示 $U_{i-1},V_{i-1},T_{i-1}$。", "outputFormat": "输出共 $Q$ 行，第 $i$ 行表示第 $i-1$ 名成员旅行所需的最短时间。", "hint": "对于 $100\\%$ 的数据，保证：\n\n- $2 \\leq N \\leq 90$。\n- $N-1 \\leq M \\leq \\dfrac{N(N-1)}{2}$。\n- $2 \\leq S \\leq 10^{15}$。\n- $1 \\leq Q \\leq 3 \\times 10^6$。\n- $0 \\leq A_i,B_i \\leq N-1$。\n- $A_i \\neq B_i$。\n- $\\forall i,j \\in [0,M-1]$，若 $i \\neq j$，则有 $(A_i,B_i) \\neq (A_j,B_j),(A_i,B_i) \\neq (B_j,A_j)$。\n- $1 \\leq L_i \\leq C_i < S$。\n- 从任意城市出发走过一些边后，可以到达任意其他城市。\n- $0\\leq U_j,V_j \\leq N-1$。\n- $U_j \\neq V_j$。\n- $0 \\leq T_j < S$。\n\n有 $5 \\%$ 的分数，满足 $N \\leq 40,Q \\leq 1000$。\n\n另有 $20 \\%$ 的分数，满足 $N \\leq 40,U_j=0$\n\n另有 $10 \\%$ 的分数，满足 $N \\leq 40$。\n\n另有 $35 \\%$ 的分数，满足 $N \\leq 60$。\n\n**建议使用较快的 IO 方式。**", "locale": "zh-CN"}}}
{"pid": "P9735", "type": "P", "difficulty": 2, "samples": [["4\nPatrik 3\nPatrik 5\nJosip 1 7", "2 2 3"], ["2\nJosip 1 5", "5 1 2"], ["5\nPatrik 4\nJosip 2 4\nJosip 2 6\nJosip 4 2", "2 3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2022", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #2] Tramvaji", "background": "", "description": "Patrik 和 Josip 在坐电车。他们共坐了 $n$ 站。\n\n除了上车的那一站，其他每一站到站时，都会发生以下事件中的一种：\n\n- Patrik 说：从上车到现在经过了 $t$ 分钟。\n\n- Josip 说：从第 $y$ 站到这里花费了 $t$ 分钟。\n\n现在，请你根据这些信息，求出哪两个站之间所需要的时间最短，以及这个时间。", "inputFormat": "输入共 $n$ 行：\n\n第一行，一个整数 $n$（$2\\le n\\le1000$），表示车站数量。\n\n接下来 $n-1$ 行，第 $i$ 行表示第 $i+1$ 个车站发生的事件：\n\n- 第一种操作：$\\texttt{Patrik } t_i$（$1\\le t_i\\le10^9$）\n\n- 第二种操作：$\\texttt{Josip } y_i\\texttt{ }t_i$（$y_i < i + 1$，$1\\le t_i\\le10^9$）\n\n**每个车站都处在不同的位置。**", "outputFormat": "一行，三个整数 $t$，$x_1$，$x_2$，表示最短时间，以及花费最短时间的起点和终点。\n\n**如果有多组解，输出字典序最小的那一组。**", "hint": "**本题采用捆绑测试。**\n\n|$\\text{Subtask}$|分数|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$12$|$t_i \\le 1000$ |\n|$2$|$13$|只有 $\\texttt{Patrik}$ 事件 |\n|$3$|$25$|无|\n\n**本题满分 $50$ 分。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #2] Tramvaji", "background": "", "description": "Patrik 和 Josip 在坐电车。他们共坐了 $n$ 站。\n\n除了上车的那一站，其他每一站到站时，都会发生以下事件中的一种：\n\n- Patrik 说：从上车到现在经过了 $t$ 分钟。\n\n- Josip 说：从第 $y$ 站到这里花费了 $t$ 分钟。\n\n现在，请你根据这些信息，求出哪两个站之间所需要的时间最短，以及这个时间。", "inputFormat": "输入共 $n$ 行：\n\n第一行，一个整数 $n$（$2\\le n\\le1000$），表示车站数量。\n\n接下来 $n-1$ 行，第 $i$ 行表示第 $i+1$ 个车站发生的事件：\n\n- 第一种操作：$\\texttt{Patrik } t_i$（$1\\le t_i\\le10^9$）\n\n- 第二种操作：$\\texttt{Josip } y_i\\texttt{ }t_i$（$y_i < i + 1$，$1\\le t_i\\le10^9$）\n\n**每个车站都处在不同的位置。**", "outputFormat": "一行，三个整数 $t$，$x_1$，$x_2$，表示最短时间，以及花费最短时间的起点和终点。\n\n**如果有多组解，输出字典序最小的那一组。**", "hint": "**本题采用捆绑测试。**\n\n|$\\text{Subtask}$|分数|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$12$|$t_i \\le 1000$ |\n|$2$|$13$|只有 $\\texttt{Patrik}$ 事件 |\n|$3$|$25$|无|\n\n**本题满分 $50$ 分。**", "locale": "zh-CN"}}}
{"pid": "P9736", "type": "P", "difficulty": 3, "samples": [["1 2", "1\nA A A\nA"], ["3 2", "6\nD C C\nD C C\nD C C\nD C C\nD C C\nD C C\nC\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #2] Ekspert", "background": null, "description": "给定四个变量 $\\texttt{A}$，$\\texttt{B}$，$\\texttt{C}$，$\\texttt{D}$，初始值为 $x$，$y$，$0$，$1$。\n\n你可以对它们进行如下操作：\n\n选择两个变量，将他们相加的和存储在一个变量中。\n\n请你使用该种操作不超过 $100$ 次，使任意一个变量的值等于 $x\\times y$。", "inputFormat": "一行，两个整数 $x$，$y$（$1\\le x\\times y\\le10^{18}$），含义如题目所述。", "outputFormat": "第一行，输出一个正整数 $n$（$0\\le n\\le100$），表示操作次数。\n\n接下来 $n$ 行，第 $i$ 行记录第 $i$ 次操作，形如 $\\texttt{R1 R2 R3}$，表示将 $\\texttt{R1}$ 和 $\\texttt{R2}$ 的和存储在 $\\texttt{R3}$ 中。", "hint": "| $\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$14$|$x,y \\le 50$ |\n|$2$|$14$|$x\\times y \\le 10^4$|\n|$3$|$42$|无|\n\n**本题满分 $70$ 分。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #2] Ekspert", "background": null, "description": "给定四个变量 $\\texttt{A}$，$\\texttt{B}$，$\\texttt{C}$，$\\texttt{D}$，初始值为 $x$，$y$，$0$，$1$。\n\n你可以对它们进行如下操作：\n\n选择两个变量，将他们相加的和存储在一个变量中。\n\n请你使用该种操作不超过 $100$ 次，使任意一个变量的值等于 $x\\times y$。", "inputFormat": "一行，两个整数 $x$，$y$（$1\\le x\\times y\\le10^{18}$），含义如题目所述。", "outputFormat": "第一行，输出一个正整数 $n$（$0\\le n\\le100$），表示操作次数。\n\n接下来 $n$ 行，第 $i$ 行记录第 $i$ 次操作，形如 $\\texttt{R1 R2 R3}$，表示将 $\\texttt{R1}$ 和 $\\texttt{R2}$ 的和存储在 $\\texttt{R3}$ 中。", "hint": "| $\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$14$|$x,y \\le 50$ |\n|$2$|$14$|$x\\times y \\le 10^4$|\n|$3$|$42$|无|\n\n**本题满分 $70$ 分。**", "locale": "zh-CN"}}}
{"pid": "P9737", "type": "P", "difficulty": 5, "samples": [["2 2 1\n0 0 1 2", "3"], ["3 3 0", "36"], ["3 3 5\n0 0 0 0\n0 0 1 3\n0 0 3 1\n1 3 3 1\n1 3 3 1", "7"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #2] Lampice", "background": "", "description": "Teo 的阳台是一个长 $n+1$，宽 $m+1$ 的矩形平台，上有 $2k$ 盏彩灯，这些彩灯的颜色用 $1 \\sim k$ 之间的一个数字来表示。每种颜色的彩灯都有 $2$ 盏，它们的坐标都为正整数。\n\nTeo 认为阳台上一个区域是好的，当且仅当：\n\n- 这个小区域是矩形，且边都与阳台的边平行。\n\n- 对于每一种颜色的 $2$ 盏彩灯，要么都在小区域内，要么都在小区域外。\n\n- 小区域的左上角，右下角坐标均为整数。\n\n- 小区域的长宽都**至少**为 $2$。\n\n现在，Teo 想请你求出在他的阳台上，有多少个小区域是好的。\n\n**注意：左下角坐标为 $(0,0)$，右上角坐标为 $(n,m)$。**", "inputFormat": "第一行，三个整数 $n$，$m$，$k$（$1\\le n\\le150,1\\le m\\le1000,0\\le k\\le200000$），表示阳台的长，宽，和彩灯的颜色数。\n\n接下来 $k$ 行，每行 $4$ 个整数 $x_1$，$y_1$，$x_2$，$y_2$，第 $i$ 行表示颜色为 $i$ 的两盏彩灯的坐标。", "outputFormat": "一行，一个整数，表示好的小区域个数。", "hint": "|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$26$|对于每种颜色的灯，$x_1=y_1=0$\n|$2$|$12$|$n,m\\le10$，$k\\le1000$|\n|$3$|$35$|$m\\le150$|\n|$4$|$37$|无|\n\n**本题满分 $110$ 分。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #2] Lampice", "background": "", "description": "Teo 的阳台是一个长 $n+1$，宽 $m+1$ 的矩形平台，上有 $2k$ 盏彩灯，这些彩灯的颜色用 $1 \\sim k$ 之间的一个数字来表示。每种颜色的彩灯都有 $2$ 盏，它们的坐标都为正整数。\n\nTeo 认为阳台上一个区域是好的，当且仅当：\n\n- 这个小区域是矩形，且边都与阳台的边平行。\n\n- 对于每一种颜色的 $2$ 盏彩灯，要么都在小区域内，要么都在小区域外。\n\n- 小区域的左上角，右下角坐标均为整数。\n\n- 小区域的长宽都**至少**为 $2$。\n\n现在，Teo 想请你求出在他的阳台上，有多少个小区域是好的。\n\n**注意：左下角坐标为 $(0,0)$，右上角坐标为 $(n,m)$。**", "inputFormat": "第一行，三个整数 $n$，$m$，$k$（$1\\le n\\le150,1\\le m\\le1000,0\\le k\\le200000$），表示阳台的长，宽，和彩灯的颜色数。\n\n接下来 $k$ 行，每行 $4$ 个整数 $x_1$，$y_1$，$x_2$，$y_2$，第 $i$ 行表示颜色为 $i$ 的两盏彩灯的坐标。", "outputFormat": "一行，一个整数，表示好的小区域个数。", "hint": "|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$26$|对于每种颜色的灯，$x_1=y_1=0$\n|$2$|$12$|$n,m\\le10$，$k\\le1000$|\n|$3$|$35$|$m\\le150$|\n|$4$|$37$|无|\n\n**本题满分 $110$ 分。**", "locale": "zh-CN"}}}
{"pid": "P9738", "type": "P", "difficulty": 3, "samples": [["2 1\navokado\ndabar\nbrazil", "Zoe"], ["3 3\nananas\natlas\nbanana\nalbatros\ncikla\nnogomet\n", "Leona"], ["2 2\nhrvatska\nzastava\nbijeli\ngaleb", "Leona"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "2022", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #2] Prijateljice", "background": "", "description": "Leona 和 Zoe 拿到了一些单词。他们打算用这些单词玩一个游戏：\n\n在每一个回合中，两人轮流说单词。这个单词需要满足以下要求：\n\n它比前一个单词的字典序大，且开头字母必须和前一个字母相同，或在字母表上正好在前一个单词的开头字母的后面一个。\n\nLeona 先说，他会选择字典序最小的单词说出来。轮到谁时，他说不出单词了，他就输了。\n\n两人在玩这个游戏时，都会采用最优策略，也就是说，选择符合条件的单词中字典序最小的那个。\n\n现在他们想知道，谁会赢呢。", "inputFormat": "第一行，两个整数 $n$，$m$（$1 \\le n,m \\le 10^5$）。\n\n接下来 $n$ 行，每行一个字符串，表示 Leona 拥有的单词。\n\n接下来 $m$ 行，每行一个字符串，表示 Zoe 拥有的单词。\n\n输入的单词均为小写字母，且互不相同。它们的总长度不超过 $10^6$，且按字典序排序。\n", "outputFormat": "输出一行，一个字符串，为 $\\texttt{Leona}$ 或 $\\texttt{Zoe}$，表示获胜者。", "hint": "|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$20$|$n,m\\le100$，每个单词的长度不超过 $10$|\n|$2$|$30$|$n,m\\le1000$|\n|$3$|$60$|无|\n\n**本题满分 $110$ 分。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #2] Prijateljice", "background": "", "description": "Leona 和 Zoe 拿到了一些单词。他们打算用这些单词玩一个游戏：\n\n在每一个回合中，两人轮流说单词。这个单词需要满足以下要求：\n\n它比前一个单词的字典序大，且开头字母必须和前一个字母相同，或在字母表上正好在前一个单词的开头字母的后面一个。\n\nLeona 先说，他会选择字典序最小的单词说出来。轮到谁时，他说不出单词了，他就输了。\n\n两人在玩这个游戏时，都会采用最优策略，也就是说，选择符合条件的单词中字典序最小的那个。\n\n现在他们想知道，谁会赢呢。", "inputFormat": "第一行，两个整数 $n$，$m$（$1 \\le n,m \\le 10^5$）。\n\n接下来 $n$ 行，每行一个字符串，表示 Leona 拥有的单词。\n\n接下来 $m$ 行，每行一个字符串，表示 Zoe 拥有的单词。\n\n输入的单词均为小写字母，且互不相同。它们的总长度不超过 $10^6$，且按字典序排序。\n", "outputFormat": "输出一行，一个字符串，为 $\\texttt{Leona}$ 或 $\\texttt{Zoe}$，表示获胜者。", "hint": "|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$20$|$n,m\\le100$，每个单词的长度不超过 $10$|\n|$2$|$30$|$n,m\\le1000$|\n|$3$|$60$|无|\n\n**本题满分 $110$ 分。**", "locale": "zh-CN"}}}
{"pid": "P9739", "type": "P", "difficulty": 6, "samples": [["\n\n0\n\n\n1\n\n\n\n0\n", "X\nK\n\nL\nL\nK\n\nX\nD\nD\nK\n\n! 1"], ["\n\n0\n\n0\n\n0\n\n1\n", "X\nK\n\nK\n\nK\n\nK\n\n! 0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "交互题", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #2] Kruhologija", "background": "**这是一道交互题。**", "description": "你是一只蚂蚁，你现在在一块漂浮在空中的面包上！\n\n面包可以看成由若干个正方体组成的立体图形，这个图形在高度上最多只有一个方块，并且是连通的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k9o74nmn.png)\n\n左图是第一个样例，右图是不合法（不连通）的一个例子。\n\n我们记这些正方体构成的立体图形有 $n$ 个面。你现在正在一个小块的一个面上，面向未知的方向。你可以进行 $q$ 次操作，每次你可以：\n\n- $\\texttt{K}$：向你面向的方向走一格；\n- $\\texttt{L}$：向左转 $90\\degree$；\n- $\\texttt{D}$：向右转 $90\\degree$；\n- $\\texttt{X}$：在当前格子上放置 / 删除标记。\n\n注意：当你走到了边缘时，继续往前走，你会走到另一个面上，所以你可以向任意方向行走任意步。\n\n一个立方体上的洞的定义为：完全被立方体包围的空间的一部分。\n\n你很喜欢洞，所以你想要求出这个立方体上洞的数量。", "inputFormat": "这是一道交互题。你需要输出面包上洞的数量。你可以向交互库发送一次操作，库会返回一个值。值为 $0$ 表示目前格子上没有标记，为 $1$ 则有。如果你的操作次数超过了 $q$ 次，你的答案将会被认为不正确。如果你找到了答案，输出 `! g`，$g$ 表示你在面包上找到了 $g$ 个洞。", "outputFormat": "", "hint": "|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$49$|$n\\le 40$，$q=20000$，面包上最多有一个洞|\n|$2$|$61$|$n\\le 200$，$q=20000$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #2] Kruhologija", "background": "**这是一道交互题。**", "description": "你是一只蚂蚁，你现在在一块漂浮在空中的面包上！\n\n面包可以看成由若干个正方体组成的立体图形，这个图形在高度上最多只有一个方块，并且是连通的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k9o74nmn.png)\n\n左图是第一个样例，右图是不合法（不连通）的一个例子。\n\n我们记这些正方体构成的立体图形有 $n$ 个面。你现在正在一个小块的一个面上，面向未知的方向。你可以进行 $q$ 次操作，每次你可以：\n\n- $\\texttt{K}$：向你面向的方向走一格；\n- $\\texttt{L}$：向左转 $90\\degree$；\n- $\\texttt{D}$：向右转 $90\\degree$；\n- $\\texttt{X}$：在当前格子上放置 / 删除标记。\n\n注意：当你走到了边缘时，继续往前走，你会走到另一个面上，所以你可以向任意方向行走任意步。\n\n一个立方体上的洞的定义为：完全被立方体包围的空间的一部分。\n\n你很喜欢洞，所以你想要求出这个立方体上洞的数量。", "inputFormat": "这是一道交互题。你需要输出面包上洞的数量。你可以向交互库发送一次操作，库会返回一个值。值为 $0$ 表示目前格子上没有标记，为 $1$ 则有。如果你的操作次数超过了 $q$ 次，你的答案将会被认为不正确。如果你找到了答案，输出 `! g`，$g$ 表示你在面包上找到了 $g$ 个洞。", "outputFormat": "", "hint": "|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$49$|$n\\le 40$，$q=20000$，面包上最多有一个洞|\n|$2$|$61$|$n\\le 200$，$q=20000$|", "locale": "zh-CN"}}}
