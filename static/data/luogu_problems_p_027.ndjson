{"pid": "P1541", "type": "P", "difficulty": 4, "samples": [["9 5\n6 10 14 2 8 8 18 5 17\n1 3 1 2 1\n", "73\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2010", "递归", "NOIP 提高组", "枚举"], "title": "[NOIP 2010 提高组] 乌龟棋", "background": "NOIP2010 提高组 T2", "description": "小明过生日的时候，爸爸送给他一副乌龟棋当作礼物。\n\n乌龟棋的棋盘是一行 $N$ 个格子，每个格子上一个分数（非负整数）。棋盘第 $1$ 格是唯一的起点，第 $N$ 格是终点，游戏要求玩家控制一个乌龟棋子从起点出发走到终点。\n\n乌龟棋中 $M$ 张爬行卡片，分成 $4$ 种不同的类型（$M$ 张卡片中不一定包含所有 $4$ 种类型的卡片，见样例），每种类型的卡片上分别标有 $1,2,3,4$ 四个数字之一，表示使用这种卡片后，乌龟棋子将向前爬行相应的格子数。游戏中，玩家每次需要从所有的爬行卡片中选择一张之前没有使用过的爬行卡片，控制乌龟棋子前进相应的格子数，每张卡片只能使用一次。\n\n\n游戏中，乌龟棋子自动获得起点格子的分数，并且在后续的爬行中每到达一个格子，就得到该格子相应的分数。玩家最终游戏得分就是乌龟棋子从起点到终点过程中到过的所有格子的分数总和。\n\n\n很明显，用不同的爬行卡片使用顺序会使得最终游戏的得分不同，小明想要找到一种卡片使用顺序使得最终游戏得分最多。\n\n\n现在，告诉你棋盘上每个格子的分数和所有的爬行卡片，你能告诉小明，他最多能得到多少分吗？", "inputFormat": "每行中两个数之间用一个空格隔开。\n\n第 $1$ 行 $2$ 个正整数 $N,M$，分别表示棋盘格子数和爬行卡片数。\n\n\n第 $2$ 行 $N$ 个非负整数，$a_1,a_2,…,a_N$，其中 $a_i$ 表示棋盘第 $i$ 个格子上的分数。\n\n\n第 $3$ 行 $M$ 个整数，$b_1,b_2,…,b_M$，表示 $M$ 张爬行卡片上的数字。\n\n\n输入数据保证到达终点时刚好用光 $M$ 张爬行卡片。", "outputFormat": "一个整数，表示小明最多能得到的分数。", "hint": "每个测试点 1s。\n\n小明使用爬行卡片顺序为 $1,1,3,1,2$，得到的分数为 $6+10+14+8+18+17=73$。注意，由于起点是 $1$，所以自动获得第 $1$ 格的分数 $6$。\n\n\n对于 $30\\%$ 的数据有 $1 \\le N \\le 30,1 \\le M \\le 12$。\n\n对于 $50\\%$ 的数据有 $1 \\le N \\le 120,1 \\le M \\le 50$，且 $4$ 种爬行卡片，每种卡片的张数不会超过 $20$。\n\n\n对于 $100\\%$ 的数据有 $1 \\le N \\le 350,1 \\le M \\le 120$，且 $4$ 种爬行卡片，每种卡片的张数不会超过 $40$；$0 \\le a_i \\le 100(1 \\le i \\le N),1 \\le b_i \\le 4(1 \\le i\\le M)$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2010 Senior] Turtle Chess", "background": "NOIP 2010 Senior T2.", "description": "On Xiaoming’s birthday, his father gave him a Turtle Chess set as a gift.\n\nThe Turtle Chess board is a row of $N$ cells, each with a score (a non-negative integer). Cell $1$ is the only starting point, and cell $N$ is the end. The player controls a turtle piece to move from the start to the end.\n\nThere are $M$ crawling cards in Turtle Chess, divided into $4$ different types (the $M$ cards do not necessarily include all $4$ types; see the sample). Each type of card is labeled with one of the numbers $1,2,3,4$, meaning that after using such a card, the turtle moves forward by the corresponding number of cells. In the game, each time the player must choose one crawling card that has not been used before from all cards, and move the turtle forward accordingly. Each card can be used only once.\n\nIn the game, the turtle automatically gains the score of the starting cell, and during subsequent moves, whenever it arrives at a cell, it gains that cell’s score. The final score is the sum of the scores of all cells the turtle visits from start to end.\n\nClearly, different orders of using the crawling cards can lead to different final scores. Xiaoming wants to find an order that maximizes the final score.\n\nGiven the score of each board cell and all the crawling cards, can you tell Xiaoming the maximum score he can obtain?", "inputFormat": "Numbers on each line are separated by a single space.\n\nThe first line contains two positive integers $N,M$, the number of board cells and the number of crawling cards.\n\nThe second line contains $N$ non-negative integers, $a_1,a_2,…,a_N$, where $a_i$ is the score on cell $i$.\n\nThe third line contains $M$ integers, $b_1,b_2,…,b_M$, which are the numbers on the $M$ crawling cards.\n\nThe input guarantees that upon reaching the end, exactly all $M$ crawling cards have been used.", "outputFormat": "Output one integer, the maximum score Xiaoming can obtain.", "hint": "Each test point: 1 s.\n\nXiaoming uses the crawling cards in the order $1,1,3,1,2$, and the score is $6+10+14+8+18+17=73$. Note that since the start is $1$, he automatically gains the score $6$ on cell $1$.\n\nConstraints:\nFor $30\\%$ of the testdata, $1 \\le N \\le 30,1 \\le M \\le 12$.\nFor $50\\%$ of the testdata, $1 \\le N \\le 120,1 \\le M \\le 50$, and among the $4$ types of crawling cards, the count of each type does not exceed $20$.\nFor $100\\%$ of the testdata, $1 \\le N \\le 350,1 \\le M \\le 120$, and among the $4$ types of crawling cards, the count of each type does not exceed $40$；$0 \\le a_i \\le 100(1 \\le i \\le N),1 \\le b_i \\le 4(1 \\le i\\le M)$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2010 提高组] 乌龟棋", "background": "NOIP2010 提高组 T2", "description": "小明过生日的时候，爸爸送给他一副乌龟棋当作礼物。\n\n乌龟棋的棋盘是一行 $N$ 个格子，每个格子上一个分数（非负整数）。棋盘第 $1$ 格是唯一的起点，第 $N$ 格是终点，游戏要求玩家控制一个乌龟棋子从起点出发走到终点。\n\n乌龟棋中 $M$ 张爬行卡片，分成 $4$ 种不同的类型（$M$ 张卡片中不一定包含所有 $4$ 种类型的卡片，见样例），每种类型的卡片上分别标有 $1,2,3,4$ 四个数字之一，表示使用这种卡片后，乌龟棋子将向前爬行相应的格子数。游戏中，玩家每次需要从所有的爬行卡片中选择一张之前没有使用过的爬行卡片，控制乌龟棋子前进相应的格子数，每张卡片只能使用一次。\n\n\n游戏中，乌龟棋子自动获得起点格子的分数，并且在后续的爬行中每到达一个格子，就得到该格子相应的分数。玩家最终游戏得分就是乌龟棋子从起点到终点过程中到过的所有格子的分数总和。\n\n\n很明显，用不同的爬行卡片使用顺序会使得最终游戏的得分不同，小明想要找到一种卡片使用顺序使得最终游戏得分最多。\n\n\n现在，告诉你棋盘上每个格子的分数和所有的爬行卡片，你能告诉小明，他最多能得到多少分吗？", "inputFormat": "每行中两个数之间用一个空格隔开。\n\n第 $1$ 行 $2$ 个正整数 $N,M$，分别表示棋盘格子数和爬行卡片数。\n\n\n第 $2$ 行 $N$ 个非负整数，$a_1,a_2,…,a_N$，其中 $a_i$ 表示棋盘第 $i$ 个格子上的分数。\n\n\n第 $3$ 行 $M$ 个整数，$b_1,b_2,…,b_M$，表示 $M$ 张爬行卡片上的数字。\n\n\n输入数据保证到达终点时刚好用光 $M$ 张爬行卡片。", "outputFormat": "一个整数，表示小明最多能得到的分数。", "hint": "每个测试点 1s。\n\n小明使用爬行卡片顺序为 $1,1,3,1,2$，得到的分数为 $6+10+14+8+18+17=73$。注意，由于起点是 $1$，所以自动获得第 $1$ 格的分数 $6$。\n\n\n对于 $30\\%$ 的数据有 $1 \\le N \\le 30,1 \\le M \\le 12$。\n\n对于 $50\\%$ 的数据有 $1 \\le N \\le 120,1 \\le M \\le 50$，且 $4$ 种爬行卡片，每种卡片的张数不会超过 $20$。\n\n\n对于 $100\\%$ 的数据有 $1 \\le N \\le 350,1 \\le M \\le 120$，且 $4$ 种爬行卡片，每种卡片的张数不会超过 $40$；$0 \\le a_i \\le 100(1 \\le i \\le N),1 \\le b_i \\le 4(1 \\le i\\le M)$。", "locale": "zh-CN"}}}
{"pid": "P1542", "type": "P", "difficulty": 3, "samples": [["3\n1 2 2\n6 6 2\n7 8 4\n", "2.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "二分"], "title": "包裹快递", "background": "", "description": "小 K 成功地破解了密文。但是乘车到 X 国的时候，发现钱包被偷了，于是无奈之下只好作快递员来攒足路费去 Orz 教主……\n\n一个快递公司要将 $n$ 个包裹分别送到 $n$ 个地方，并分配给邮递员小 K 一个事先设定好的路线，小 K 需要开车按照路线给的地点顺序相继送达，且不能遗漏一个地点。小 K 得到每个地方可以签收的时间段，并且也知道路线中一个地方到下一个地方的距离。若到达某一个地方的时间早于可以签收的时间段，则必须在这个地方停留至可以签收，但不能晚于签收的时间段，可以认为签收的过程是瞬间完成的。\n\n为了节省燃料，小 K 希望在全部送达的情况下，车的最大速度越小越好，就找到了你给他设计一种方案，并求出车的最大速度最小是多少。\n", "inputFormat": "第 1 行为一个正整数 $n$，表示需要运送包裹的地点数。\n\n下面 $n$ 行，第 $i+1$ 行有 3 个正整数 $x _ i, y _ i, s _ i$，表示按路线顺序给出第 $i$ 个地点签收包裹的时间段为 $[x _ i, y _ i]$，即最早为距出发时刻 $x _ i$，最晚为距出发时刻 $y _ i$，从前一个地点到达第 $i$ 个地点距离为 $s _ i$，且保证路线中 $x _ i$ 递增。\n\n可以认为 $s _ 1$ 为出发的地方到第 $1$ 个地点的距离，且出发时刻为 $0$。\n", "outputFormat": "仅包括一个正数，为车的最大速度最小值，结果保留两位小数。\n", "hint": "#### 数据范围\n- 对于 $20\\%$ 的数据，$0 < n \\le 10$。   \n- 对于 $30\\%$ 的数据，$0<x_i,y_i,s_i \\le 1000$。   \n- 对于 $50\\%$ 的数据，$0<n \\le 1000$。   \n- 对于 $100\\%$ 的数据，$0<n \\le 2\\times10^5$，$x_i \\le y_i \\le 10^8$，$s_i \\le10^7$。\n\n-----\n#### 样例解释\n第一段用 $1$ 的速度在时间 $2$ 到达第 $1$ 个地点，第二段用 $0.5$ 的速度在时间 $6$ 到达第 $2$ 个地点，第三段用 $2$ 的速度在时间 $8$ 到达第 $3$ 个地点。", "locale": "zh-CN", "translations": {"en": {"title": "Parcel Delivery", "background": "", "description": "Xiao K successfully cracked the ciphertext. But when taking a bus to country X, he found his wallet had been stolen, so he had no choice but to work as a courier to save enough fare to go pay respect to the \"Orz Jiaozhu\".\n\nA courier company needs to deliver $n$ packages to $n$ locations and assigns Xiao K a predetermined route. Xiao K must drive and deliver according to the order of locations given by the route, and he cannot skip any location. Xiao K is given the receivable time window for each location and also knows the distance from each location to the next along the route. If he arrives at a location earlier than its time window, he must wait there until the window opens, but he cannot be later than the end of the time window. The signing process is considered instantaneous.\n\nTo save fuel, Xiao K wants the car’s maximum speed to be as small as possible while completing all deliveries. Please design a plan for him and compute the minimal possible maximum speed.", "inputFormat": "The first line contains a positive integer $n$, the number of locations to deliver to.\n\nThe next $n$ lines: on the $(i+1)$-th line there are 3 positive integers $x _ i, y _ i, s _ i$, meaning that, in the route order, the time window to sign for the $i$-th location is $[x _ i, y _ i]$ (earliest at time $x _ i$ from the departure moment, latest at time $y _ i$ from the departure moment), the distance from the previous location to the $i$-th location is $s _ i$, and it is guaranteed that $x _ i$ are increasing along the route.\n\nAssume $s _ 1$ is the distance from the starting point to the first location, and the departure time is $0$.", "outputFormat": "Output a single positive number: the minimal possible maximum speed of the car, rounded to two decimal places.", "hint": "Constraints\n- For 20% of the testdata, $0 < n \\le 10$.\n- For 30% of the testdata, $0 < x_i, y_i, s_i \\le 1000$.\n- For 50% of the testdata, $0 < n \\le 1000$.\n- For 100% of the testdata, $0 < n \\le 2\\times 10^5$, $x_i \\le y_i \\le 10^8$, $s_i \\le 10^7$.\n\nSample Explanation\nOn the first leg, use speed $1$ to arrive at time $2$ at the first location. On the second leg, use speed $0.5$ to arrive at time $6$ at the second location. On the third leg, use speed $2$ to arrive at time $8$ at the third location.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "包裹快递", "background": "", "description": "小 K 成功地破解了密文。但是乘车到 X 国的时候，发现钱包被偷了，于是无奈之下只好作快递员来攒足路费去 Orz 教主……\n\n一个快递公司要将 $n$ 个包裹分别送到 $n$ 个地方，并分配给邮递员小 K 一个事先设定好的路线，小 K 需要开车按照路线给的地点顺序相继送达，且不能遗漏一个地点。小 K 得到每个地方可以签收的时间段，并且也知道路线中一个地方到下一个地方的距离。若到达某一个地方的时间早于可以签收的时间段，则必须在这个地方停留至可以签收，但不能晚于签收的时间段，可以认为签收的过程是瞬间完成的。\n\n为了节省燃料，小 K 希望在全部送达的情况下，车的最大速度越小越好，就找到了你给他设计一种方案，并求出车的最大速度最小是多少。\n", "inputFormat": "第 1 行为一个正整数 $n$，表示需要运送包裹的地点数。\n\n下面 $n$ 行，第 $i+1$ 行有 3 个正整数 $x _ i, y _ i, s _ i$，表示按路线顺序给出第 $i$ 个地点签收包裹的时间段为 $[x _ i, y _ i]$，即最早为距出发时刻 $x _ i$，最晚为距出发时刻 $y _ i$，从前一个地点到达第 $i$ 个地点距离为 $s _ i$，且保证路线中 $x _ i$ 递增。\n\n可以认为 $s _ 1$ 为出发的地方到第 $1$ 个地点的距离，且出发时刻为 $0$。\n", "outputFormat": "仅包括一个正数，为车的最大速度最小值，结果保留两位小数。\n", "hint": "#### 数据范围\n- 对于 $20\\%$ 的数据，$0 < n \\le 10$。   \n- 对于 $30\\%$ 的数据，$0<x_i,y_i,s_i \\le 1000$。   \n- 对于 $50\\%$ 的数据，$0<n \\le 1000$。   \n- 对于 $100\\%$ 的数据，$0<n \\le 2\\times10^5$，$x_i \\le y_i \\le 10^8$，$s_i \\le10^7$。\n\n-----\n#### 样例解释\n第一段用 $1$ 的速度在时间 $2$ 到达第 $1$ 个地点，第二段用 $0.5$ 的速度在时间 $6$ 到达第 $2$ 个地点，第三段用 $2$ 的速度在时间 $8$ 到达第 $3$ 个地点。", "locale": "zh-CN"}}}
{"pid": "P1543", "type": "P", "difficulty": 5, "samples": [["6\n2\n3\n1\n3\n6\n5\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["搜索", "贪心", "2004", "POI（波兰）", "树形 DP", "拓扑排序", "基环树"], "title": "[POI 2004] SZP", "background": "一班班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 十分可爱。", "description": "班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 作为某日的值日班长，在自习课上管理着 $n$ 名同学。除了她以外每一名同学都监视着另一名同学。现在班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 需要选择尽量多的同学去搬卷子和答题卡，且使得对于这些同学中的每一名同学，至少有一位监视她的同学没有被选中。问班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 最多可以选择多少同学。\n\n由于班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 太可爱了，所以没有人监视她，也可以认为她的学号是 $0$。\n\n如果一个人没有被监视，那么她就不能被选择。\n", "inputFormat": "第一行只有一个整数，$n$ 代表同学的数量。同学的学号从 $1$ 到 $n$ 编号。\n\n接下来 $n$ 行每行一个整数 $a_k$ 表示同学 $k$ 将要监视同学 $a_k$，$1 \\le k \\le n$，$1 \\le a_k \\le n$，$a_k \\ne k$。", "outputFormat": "一个数，最多能有多少同学参加入这个任务。", "hint": "对于 $100\\%$ 的数据，$1\\le k,a_k\\le n\\le 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2004] SZP", "background": null, "description": "Byteotian Intelligence Agency (BIA) employs many spies. Each of them has duty to shadow exactly one other spy.\n\nKing Byteasar wants to entrust as many agents as possible with a top secret operation. However, the operation is so important that each spy taking part has to be traced by at least one agent not involved in the operation (assignment of shadowing BIA spies does not change).\n\nWrite a programme that:\n\n- reads from standard input the description of whom each spy shadows,\n- calculates how many agents can be assigned to the operation in a way that each of them would be spied by at least one agent not taking part in the operation,\n- writes the result to the standard output.", "inputFormat": "In the first line of the input there is one positive integer written,$n$ - the number of spies, $2\\le n\\le 10^6$. The spies are numbered from $1$ to $n$. In the following $n$ lines there is a description of whom each agent spies. Each of these lines contains one positive integer. A number $a_k$ situated in line no. $k+1$ indicates, that the spy no.$k$ shadows the spy no.$a_k$ , $1\\le k \\le n$, $1\\le a_k\\le n$, $a_k\\neq k$.", "outputFormat": "Your programme should write one integer in the first line of the output - the maximal number of spies that can be assigned to the secret operation.", "hint": "$1\\le k \\le n$, $1\\le a_k\\le n$, $a_k\\neq k$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9ghkuikn.png)\n\nTask author: Pawel Parys.", "locale": "en"}, "zh-CN": {"title": "[POI 2004] SZP", "background": "一班班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 十分可爱。", "description": "班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 作为某日的值日班长，在自习课上管理着 $n$ 名同学。除了她以外每一名同学都监视着另一名同学。现在班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 需要选择尽量多的同学去搬卷子和答题卡，且使得对于这些同学中的每一名同学，至少有一位监视她的同学没有被选中。问班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 最多可以选择多少同学。\n\n由于班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 太可爱了，所以没有人监视她，也可以认为她的学号是 $0$。\n\n如果一个人没有被监视，那么她就不能被选择。\n", "inputFormat": "第一行只有一个整数，$n$ 代表同学的数量。同学的学号从 $1$ 到 $n$ 编号。\n\n接下来 $n$ 行每行一个整数 $a_k$ 表示同学 $k$ 将要监视同学 $a_k$，$1 \\le k \\le n$，$1 \\le a_k \\le n$，$a_k \\ne k$。", "outputFormat": "一个数，最多能有多少同学参加入这个任务。", "hint": "对于 $100\\%$ 的数据，$1\\le k,a_k\\le n\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P1544", "type": "P", "difficulty": 3, "samples": [["5 3\n7\n3 9\n8 1 0\n2 7 4 4\n4 5 2 6 5", "75"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "记忆化搜索"], "title": "三倍经验", "background": "", "description": "数字金字塔由 $n$ 行整数组成，第 $i(1\\le i\\le n)$ 行有 $i$ 个数字，一个示例如下。  \n```text\n        7\n      3   9\n    8   1   0\n  2   7   4   4 \n4   5   2   6   5\n```  \n现在你在金字塔的顶部（第一行），你希望走到金字塔的底部（第 $n$ 行），每一步你只能走向当前所在位置的左下方的数字或者右下方的数字。同时作为一个强大的小朋友，你可以选择金字塔中的不多于 $k$ 个数字让他们成为原来的 $3$ 倍。  \n\n你会收集你路上经过的所有位置上的数字，最后的得分即为收集的数字之和，求最大得分。", "inputFormat": "第一行输入两个整数 $n,k$，表示数字金字塔的行数和乘 $3$ 的数字个数最大值；  \n接下来 $n$ 行，其中的第 $i$ 行有 $i$ 个以空格隔开的整数依次表示数字金字塔第 $i$ 行的数字 $a_{i,1},a_{i,2},a_{i,3}...a_{i,i}$。", "outputFormat": "一行一个整数，表示最大得分。", "hint": "对于 $30\\%$ 的数据，满足 $k\\le n\\le 6$，并且对于任意 $1\\le i\\le n$，$1\\le j\\le i$ 满足 $0\\le a_{i,j}\\le 100$；  \n对于 $100\\%$ 的数据，满足 $1\\le n\\le100$，$0\\le k\\le \\dfrac{n(n+1)}{2}$，且对于任意 $1\\le i\\le n$，$1\\le j\\le i$ 满足 $|a_{i,j}|\\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Triple Experience", "background": "", "description": "A number pyramid has $n$ rows of integers. The $i$-th row ($1 \\le i \\le n$) has $i$ numbers. One example is as follows.\n```text\n        7\n      3   9\n    8   1   0\n  2   7   4   4 \n4   5   2   6   5\n```\nNow you start at the top of the pyramid (the first row) and want to reach the bottom (the $n$-th row). At each step, you can move to the number down-left or down-right of your current position. Also, as a powerful kid, you may choose at most $k$ numbers in the pyramid and make them $3$ times their original value.\n\nYou will collect all numbers along your path. Your final score is the sum of the collected numbers. Find the maximum possible score.", "inputFormat": "The first line contains two integers $n,k$, the number of rows in the number pyramid and the maximum count of numbers that can be multiplied by $3$.  \nThen follow $n$ lines. The $i$-th of them contains $i$ space-separated integers, which are the numbers in the $i$-th row of the pyramid: $a_{i,1},a_{i,2},a_{i,3}...a_{i,i}$.", "outputFormat": "Output a single integer, the maximum score.", "hint": "Constraints:  \nFor $30\\%$ of the testdata, $k \\le n \\le 6$, and for any $1 \\le i \\le n$, $1 \\le j \\le i$ it holds that $0 \\le a_{i,j} \\le 100$.  \nFor $100\\%$ of the testdata, $1 \\le n \\le 100$, $0 \\le k \\le \\dfrac{n(n+1)}{2}$, and for any $1 \\le i \\le n$, $1 \\le j \\le i$ it holds that $|a_{i,j}| \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "三倍经验", "background": "", "description": "数字金字塔由 $n$ 行整数组成，第 $i(1\\le i\\le n)$ 行有 $i$ 个数字，一个示例如下。  \n```text\n        7\n      3   9\n    8   1   0\n  2   7   4   4 \n4   5   2   6   5\n```  \n现在你在金字塔的顶部（第一行），你希望走到金字塔的底部（第 $n$ 行），每一步你只能走向当前所在位置的左下方的数字或者右下方的数字。同时作为一个强大的小朋友，你可以选择金字塔中的不多于 $k$ 个数字让他们成为原来的 $3$ 倍。  \n\n你会收集你路上经过的所有位置上的数字，最后的得分即为收集的数字之和，求最大得分。", "inputFormat": "第一行输入两个整数 $n,k$，表示数字金字塔的行数和乘 $3$ 的数字个数最大值；  \n接下来 $n$ 行，其中的第 $i$ 行有 $i$ 个以空格隔开的整数依次表示数字金字塔第 $i$ 行的数字 $a_{i,1},a_{i,2},a_{i,3}...a_{i,i}$。", "outputFormat": "一行一个整数，表示最大得分。", "hint": "对于 $30\\%$ 的数据，满足 $k\\le n\\le 6$，并且对于任意 $1\\le i\\le n$，$1\\le j\\le i$ 满足 $0\\le a_{i,j}\\le 100$；  \n对于 $100\\%$ 的数据，满足 $1\\le n\\le100$，$0\\le k\\le \\dfrac{n(n+1)}{2}$，且对于任意 $1\\le i\\le n$，$1\\le j\\le i$ 满足 $|a_{i,j}|\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1545", "type": "P", "difficulty": 5, "samples": [["2 8\n1 2\n6 7\n3 6", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2004", "线段树", "USACO", "单调队列", "动态规划优化"], "title": "[USACO04DEC] Dividing the Path G", "background": null, "description": "约翰的奶牛们发现山脊上的草特别美味。为了维持草的生长，约翰打算安装若干喷灌器。\n\n为简化问题，山脊可以看成一维的数轴，长为 $L\\ (1\\le L\\le 10^6)$，而且 $L$ 一定是一个偶数。每个喷灌器可以双向喷灌，并有确定的射程，该射程不短于 $A$，不长于 $B$，$A$，$B(1\\le A\\le B\\le 10^3)$ 都是给出的正整数。它所在位置的两边射程内，都属它的灌溉区域。\n\n现要求山脊的每一个区域都被灌溉到，而且喷灌器的灌溉区域不允许重叠。约翰有 $N(1\\le N\\le 10^3)$ 只奶牛，每一只都有特别喜爱的草区，第 $i$ 奶牛的草区是 $[S_i,E_i]$，不同奶牛的草区可以重叠。现要求，每只奶牛的草区仅被一个喷灌器灌溉。\n\n注意：\n\n1. 数轴 $L$ 从 $0$ 开始标记（即坐标范围 $0\\sim L$）  \n2. 喷灌器坐标和射程必须为整数，对于坐标为 $i$ 射程为 $x$ 的喷灌器，它的灌溉范围为 $[i-x,i+x]$。\n3. 浇灌区间必须在山脊范围内。例如，不能在 $0$ 位置放一个半径为 $1$ 的浇灌器。\n\n寻找最少需要的喷灌器数目。", "inputFormat": "第一行两个整数 $N,L$。\n\n第二行两个整数 $A,B$。\n\n然后 $N$ 行每一行两个整数 $S_i,E_i$（$1\\le S_i < E_i\\le L$）。", "outputFormat": "一行，输出所需的最少洒水器数量。如果无法为农夫约翰设计喷头配置，则输出 $-1$。", "hint": "对于 $100\\%$ 的数据，$1\\le L\\le 10^6$，$1\\le A,B\\le 10^3$，$1\\le N\\le 10^3$，$1\\le S_i<E_i\\le L$。\n\n样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ryn23fwj.png)", "locale": "zh-CN", "translations": {"en": {"title": "[USACO04DEC] Dividing the Path G", "background": "", "description": "John’s cows have discovered that the grass on the ridge is especially tasty. To sustain its growth, John plans to install several sprinklers.\n\nTo simplify the problem, the ridge is modeled as a one-dimensional number line of length $L\\ (1\\le L\\le 10^6)$, and $L$ is guaranteed to be even. Each sprinkler sprays in both directions with a fixed radius that is at least $A$ and at most $B$, where $A, B\\ (1\\le A\\le B\\le 10^3)$ are given positive integers. The interval within its radius on both sides of its position is its irrigation area.\n\nThe entire ridge must be irrigated, and irrigation areas of different sprinklers are not allowed to overlap. John has $N\\ (1\\le N\\le 10^3)$ cows, each with a favorite grass interval. The $i$-th cow’s interval is $[S_i,E_i]$, and different cows’ intervals may overlap. Each cow’s favorite interval must be irrigated by exactly one sprinkler, i.e., it must be entirely contained in the irrigation range of a single sprinkler.\n\nNote:\n1. The number line for $L$ is labeled starting from $0$ (i.e., the coordinate range is $0\\sim L$).  \n2. Sprinkler coordinates and radii must be integers. For a sprinkler at coordinate $i$ with radius $x$, its irrigation interval is $[i-x,i+x]$.  \n3. The irrigated interval must lie within the ridge. For example, you cannot place a sprinkler with radius $1$ at position $0$.\n\nFind the minimum number of sprinklers required.", "inputFormat": "The first line contains two integers $N,L$.\n\nThe second line contains two integers $A,B$.\n\nThen follow $N$ lines, each containing two integers $S_i,E_i$（$1\\le S_i < E_i\\le L$）.", "outputFormat": "Output a single line with the minimum number of sprinklers required. If it is impossible to design a valid sprinkler configuration for Farmer John, output $-1$.", "hint": "Constraints:\n- For $100\\%$ of the testdata, $1\\le L\\le 10^6$, $1\\le A,B\\le 10^3$, $1\\le N\\le 10^3$, $1\\le S_i<E_i\\le L$.\n\nSample explanation:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ryn23fwj.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO04DEC] Dividing the Path G", "background": null, "description": "约翰的奶牛们发现山脊上的草特别美味。为了维持草的生长，约翰打算安装若干喷灌器。\n\n为简化问题，山脊可以看成一维的数轴，长为 $L\\ (1\\le L\\le 10^6)$，而且 $L$ 一定是一个偶数。每个喷灌器可以双向喷灌，并有确定的射程，该射程不短于 $A$，不长于 $B$，$A$，$B(1\\le A\\le B\\le 10^3)$ 都是给出的正整数。它所在位置的两边射程内，都属它的灌溉区域。\n\n现要求山脊的每一个区域都被灌溉到，而且喷灌器的灌溉区域不允许重叠。约翰有 $N(1\\le N\\le 10^3)$ 只奶牛，每一只都有特别喜爱的草区，第 $i$ 奶牛的草区是 $[S_i,E_i]$，不同奶牛的草区可以重叠。现要求，每只奶牛的草区仅被一个喷灌器灌溉。\n\n注意：\n\n1. 数轴 $L$ 从 $0$ 开始标记（即坐标范围 $0\\sim L$）  \n2. 喷灌器坐标和射程必须为整数，对于坐标为 $i$ 射程为 $x$ 的喷灌器，它的灌溉范围为 $[i-x,i+x]$。\n3. 浇灌区间必须在山脊范围内。例如，不能在 $0$ 位置放一个半径为 $1$ 的浇灌器。\n\n寻找最少需要的喷灌器数目。", "inputFormat": "第一行两个整数 $N,L$。\n\n第二行两个整数 $A,B$。\n\n然后 $N$ 行每一行两个整数 $S_i,E_i$（$1\\le S_i < E_i\\le L$）。", "outputFormat": "一行，输出所需的最少洒水器数量。如果无法为农夫约翰设计喷头配置，则输出 $-1$。", "hint": "对于 $100\\%$ 的数据，$1\\le L\\le 10^6$，$1\\le A,B\\le 10^3$，$1\\le N\\le 10^3$，$1\\le S_i<E_i\\le L$。\n\n样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ryn23fwj.png)", "locale": "zh-CN"}}}
{"pid": "P1546", "type": "P", "difficulty": 3, "samples": [["4\n0 4 9 21\n4 0 8 17\n9 8 0 16\n21 17 16 0", "28"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "贪心", "USACO", "并查集", "生成树"], "title": "[USACO3.1] 最短网络 Agri-Net", "background": "Farmer John 被选为他们镇的镇长！他其中一个竞选承诺就是在镇上建立起互联网，并连接到所有的农场。当然，他需要你的帮助。\n", "description": "FJ 已经给他的农场安排了一条高速的网络线路，他想把这条线路共享给其他农场。为了用最小的消费，他想铺设最短的光纤去连接所有的农场。\n\n你将得到一份各农场之间连接费用的列表，你必须找出能连接所有农场并所用光纤最短的方案。每两个农场间的距离不会超过 $10^5$。", "inputFormat": "第一行农场的个数 $N$（$3 \\leq N \\leq 100$）。\n\n接下来是一个 $N \\times N$ 的矩阵，表示每个农场之间的距离。理论上，他们是 $N$ 行，每行由 $N$ 个用空格分隔的数组成，实际上，由于每行 $80$ 个字符的限制，因此，某些行会紧接着另一些行。当然，对角线将会是 $0$，因为不会有线路从第 $i$ 个农场到它本身。", "outputFormat": "只有一个输出，其中包含连接到每个农场的光纤的最小长度。\n", "hint": "题目翻译来自NOCOW。\n\nUSACO Training Section 3.1\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO3.1] Shortest Network Agri-Net", "background": "Farmer John has been elected mayor of their town! One of his campaign promises is to bring the Internet to the town and connect all the farms. Of course, he needs your help.", "description": "FJ has arranged a high-speed network line for his farm, and he wants to share it with other farms. To minimize the cost, he wants to lay the shortest optical fiber to connect all the farms.\n\nYou are given a list of connection costs between farms. You must find a plan that connects all farms with the minimum total fiber length. The distance between any two farms will not exceed $10^5$.", "inputFormat": "The first line contains the number of farms $N$ ($3 \\leq N \\leq 100$).\n\nNext is an $N \\times N$ matrix representing the distance between each pair of farms. In theory, it consists of $N$ lines, each with $N$ integers separated by spaces. In practice, due to the $80$-character-per-line limit, some rows may continue directly onto subsequent lines. The diagonal entries are $0$, since there is no line from the $i$-th farm to itself.", "outputFormat": "Output a single integer: the minimum total length of fiber needed to connect all farms.", "hint": "Problem translation from NOCOW.\nUSACO Training Section 3.1.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO3.1] 最短网络 Agri-Net", "background": "Farmer John 被选为他们镇的镇长！他其中一个竞选承诺就是在镇上建立起互联网，并连接到所有的农场。当然，他需要你的帮助。\n", "description": "FJ 已经给他的农场安排了一条高速的网络线路，他想把这条线路共享给其他农场。为了用最小的消费，他想铺设最短的光纤去连接所有的农场。\n\n你将得到一份各农场之间连接费用的列表，你必须找出能连接所有农场并所用光纤最短的方案。每两个农场间的距离不会超过 $10^5$。", "inputFormat": "第一行农场的个数 $N$（$3 \\leq N \\leq 100$）。\n\n接下来是一个 $N \\times N$ 的矩阵，表示每个农场之间的距离。理论上，他们是 $N$ 行，每行由 $N$ 个用空格分隔的数组成，实际上，由于每行 $80$ 个字符的限制，因此，某些行会紧接着另一些行。当然，对角线将会是 $0$，因为不会有线路从第 $i$ 个农场到它本身。", "outputFormat": "只有一个输出，其中包含连接到每个农场的光纤的最小长度。\n", "hint": "题目翻译来自NOCOW。\n\nUSACO Training Section 3.1\n", "locale": "zh-CN"}}}
{"pid": "P1547", "type": "P", "difficulty": 3, "samples": [["3 3\n1 2 23\n2 3 1000\n1 3 43", "43"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "贪心", "2005", "USACO", "并查集", "生成树", "连通块"], "title": "[USACO05MAR] Out of Hay S", "background": "", "description": "Bessie 计划调查 $N$（$2 \\leq N \\leq 2\\,000$）个农场的干草情况，它从 $1$ 号农场出发。农场之间总共有 $M$（$1 \\leq M \\leq 10^4$）条双向道路，所有道路的总长度不超过 $10^9$。有些农场之间存在着多条道路，所有的农场之间都是连通的。\n\nBessie 希望计算出该图中最小生成树中的最长边的长度。\n", "inputFormat": "第一行两个整数 $N,M$。\n\n接下来 $M$ 行，每行三个用空格隔开的整数 $A_i,B_i,L_i$，表示 $A_i,B_i$ 之间有一条道路，长度为 $L_i$。", "outputFormat": "一个整数，表示最小生成树中的最长边的长度。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO05MAR] Out of Hay S", "background": "", "description": "Bessie plans to survey the hay situation of $N$ ($2 \\leq N \\leq 2\\,000$) farms, starting from farm $1$. There are $M$ ($1 \\leq M \\leq 10^4$) bidirectional roads in total, and the total length of all roads does not exceed $10^9$. There may be multiple roads between some pairs of farms, and all farms are connected.\n\nBessie wants to compute the length of the longest edge in a minimum spanning tree of this graph.", "inputFormat": "The first line contains two integers $N, M$.\n\nEach of the next $M$ lines contains three space-separated integers $A_i, B_i, L_i$, indicating there is a road between $A_i$ and $B_i$ with length $L_i$.", "outputFormat": "Output a single integer, the length of the longest edge in the minimum spanning tree.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO05MAR] Out of Hay S", "background": "", "description": "Bessie 计划调查 $N$（$2 \\leq N \\leq 2\\,000$）个农场的干草情况，它从 $1$ 号农场出发。农场之间总共有 $M$（$1 \\leq M \\leq 10^4$）条双向道路，所有道路的总长度不超过 $10^9$。有些农场之间存在着多条道路，所有的农场之间都是连通的。\n\nBessie 希望计算出该图中最小生成树中的最长边的长度。\n", "inputFormat": "第一行两个整数 $N,M$。\n\n接下来 $M$ 行，每行三个用空格隔开的整数 $A_i,B_i,L_i$，表示 $A_i,B_i$ 之间有一条道路，长度为 $L_i$。", "outputFormat": "一个整数，表示最小生成树中的最长边的长度。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1548", "type": "P", "difficulty": 1, "samples": [["2 3", "8 10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["1997", "NOIP 普及组", "枚举"], "title": "[NOIP 1997 普及组] 棋盘问题", "background": "NOIP1997 普及组第一题", "description": "设有一个 $N \\times M$ 方格的棋盘 $(1≤N≤100,1≤M≤100)$\n\n求出该棋盘中包含有多少个正方形、多少个长方形（不包括正方形）。\n\n例如：当 $N=2, M=3$ 时：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kkidop2i.png)\n\n   \n正方形的个数有 $8$ 个：即边长为 $1$ 的正方形有 $6$ 个；边长为 $2$ 的正方形有 $2$ 个。\n\n长方形的个数有 $10$ 个：\n\n即  \n\n- $2 \\times 1$ 的长方形有 $4$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vhazon60.png)\n\n- $1 \\times 2$ 的长方形有 $3$ 个：  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jr40fqzv.png)\n\n- $3 \\times 1$ 的长方形有 $2$ 个：  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ja0mx48f.png)\n\n- $3 \\times 2$ 的长方形有 $1$ 个：  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kkidop2i.png)\n", "inputFormat": "一行两个整数 $N,M$。", "outputFormat": "一行两个整数，表示正方形的个数与长方形的个数。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 1997 Junior] Chessboard Problem", "background": "NOIP 1997 Junior, Problem 1.", "description": "Given a chessboard with an $N \\times M$ grid $(1≤N≤100,1≤M≤100)$, find how many squares and how many rectangles (excluding squares) it contains.\n\nFor example, when $N=2, M=3$:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kkidop2i.png)\n\nThe number of squares is $8$: there are $6$ squares of side length $1$ and $2$ squares of side length $2$.\n\nThe number of rectangles is $10$:\n\nSpecifically:\n\n- There are $4$ rectangles of size $2 \\times 1$:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vhazon60.png)\n\n- There are $3$ rectangles of size $1 \\times 2$:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jr40fqzv.png)\n\n- There are $2$ rectangles of size $3 \\times 1$:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ja0mx48f.png)\n\n- There is $1$ rectangle of size $3 \\times 2$:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kkidop2i.png)", "inputFormat": "One line with two integers $N,M$.", "outputFormat": "One line with two integers, the number of squares and the number of rectangles.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 1997 普及组] 棋盘问题", "background": "NOIP1997 普及组第一题", "description": "设有一个 $N \\times M$ 方格的棋盘 $(1≤N≤100,1≤M≤100)$\n\n求出该棋盘中包含有多少个正方形、多少个长方形（不包括正方形）。\n\n例如：当 $N=2, M=3$ 时：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kkidop2i.png)\n\n   \n正方形的个数有 $8$ 个：即边长为 $1$ 的正方形有 $6$ 个；边长为 $2$ 的正方形有 $2$ 个。\n\n长方形的个数有 $10$ 个：\n\n即  \n\n- $2 \\times 1$ 的长方形有 $4$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vhazon60.png)\n\n- $1 \\times 2$ 的长方形有 $3$ 个：  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jr40fqzv.png)\n\n- $3 \\times 1$ 的长方形有 $2$ 个：  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ja0mx48f.png)\n\n- $3 \\times 2$ 的长方形有 $1$ 个：  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kkidop2i.png)\n", "inputFormat": "一行两个整数 $N,M$。", "outputFormat": "一行两个整数，表示正方形的个数与长方形的个数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1549", "type": "P", "difficulty": 4, "samples": [["1", "NO\n"], ["2", "1 2\n4 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["1997", "NOIP 提高组", "Special Judge"], "title": "[NOIP 1997 提高组] 棋盘问题", "background": "NOIP1997 提高组第一题\n\n[P5512](https://www.luogu.com.cn/problem/P5512) 为本题数据加强版。\n\n本题实际的数据的范围是 $1\\le N\\le 5$。不保证存在可以通过原数据范围的非打表做法。", "description": "在 $N \\times N$（$1 \\le N \\le 10$）的棋盘上，填入 $1, 2, \\dots, N ^ 2$ 共 $N ^ 2$ 个数，使得任意两个相邻的数之和为素数。\n\n例如：当 $N = 2$ 时，有：\n\n| $1$ | $2$ |\n| :-----------: | :-----------: |\n| $4$ | $3$ |\n\n其相邻数的和为素数的有：\n\n$1+2,1+4,4+3,2+3$\n\n当 $N=4$ 时，一种可以填写的方案如下：\n\n| $1$ | $2$ | $11$ | $12$ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $16$ | $15$ | $8$ | $5$ |\n| $13$ | $4$ | $9$ | $14$ |\n| $6$ | $7$ | $10$ | $3$ |\n\n在这里我们约定：左上角的格子里必须填数字 $1$。", "inputFormat": "一个数 $N$。", "outputFormat": "如有多种解，则输出第一行、第一列之和为最小的排列方案；若无解，则输出 `NO`。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 1997 Senior] Chessboard Problem", "background": "NOIP 1997 Senior, Problem 1.\n\n[P5512](https://www.luogu.com.cn/problem/P5512) is the enhanced testdata version of this problem.\n\nThe actual constraints for this problem are $1\\le N\\le 5$. There is no guarantee that a solution without hardcoding can pass the original constraints.", "description": "On an $N \\times N$ ($1 \\le N \\le 10$) board, fill in the $N ^ 2$ numbers $1, 2, \\dots, N ^ 2$, so that the sum of any two adjacent numbers is a prime number.\n\nFor example, when $N = 2$, there is:\n\n| $1$ | $2$ |\n| :-----------: | :-----------: |\n| $4$ | $3$ |\n\nThe adjacent pairs whose sums are prime are:\n\n$1+2,1+4,4+3,2+3$\n\nWhen $N=4$, one possible arrangement is:\n\n| $1$ | $2$ | $11$ | $12$ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $16$ | $15$ | $8$ | $5$ |\n| $13$ | $4$ | $9$ | $14$ |\n| $6$ | $7$ | $10$ | $3$ |\n\nHere we stipulate that the top-left cell must contain the number $1$.", "inputFormat": "A single integer $N$.", "outputFormat": "If multiple solutions exist, output the arrangement whose sum of the first row and the first column is minimal. Output the board in $N$ lines, each containing $N$ integers separated by single spaces. If no solution exists, output `NO`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 1997 提高组] 棋盘问题", "background": "NOIP1997 提高组第一题\n\n[P5512](https://www.luogu.com.cn/problem/P5512) 为本题数据加强版。\n\n本题实际的数据的范围是 $1\\le N\\le 5$。不保证存在可以通过原数据范围的非打表做法。", "description": "在 $N \\times N$（$1 \\le N \\le 10$）的棋盘上，填入 $1, 2, \\dots, N ^ 2$ 共 $N ^ 2$ 个数，使得任意两个相邻的数之和为素数。\n\n例如：当 $N = 2$ 时，有：\n\n| $1$ | $2$ |\n| :-----------: | :-----------: |\n| $4$ | $3$ |\n\n其相邻数的和为素数的有：\n\n$1+2,1+4,4+3,2+3$\n\n当 $N=4$ 时，一种可以填写的方案如下：\n\n| $1$ | $2$ | $11$ | $12$ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $16$ | $15$ | $8$ | $5$ |\n| $13$ | $4$ | $9$ | $14$ |\n| $6$ | $7$ | $10$ | $3$ |\n\n在这里我们约定：左上角的格子里必须填数字 $1$。", "inputFormat": "一个数 $N$。", "outputFormat": "如有多种解，则输出第一行、第一列之和为最小的排列方案；若无解，则输出 `NO`。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1550", "type": "P", "difficulty": 3, "samples": [["4\n5\n4\n4\n3\n0 2 2 2\n2 0 3 3\n2 3 0 4\n2 3 4 0", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "贪心", "2008", "USACO", "生成树"], "title": "[USACO08OCT] Watering Hole G", "background": "", "description": "Farmer John 的农场缺水了。\n\n他决定将水引入到他的 $n$ 个农场。他准备通过挖若干井，并在各块田中修筑水道来连通各块田地以供水。在第 $i$ 号田中挖一口井需要花费 $W_i$ 元。连接 $i$ 号田与 $j$ 号田需要 $P_{i,j}$（$P_{j,i}=P_{i,j}$）元。\n\n请求出 FJ 需要为使所有农场都与有水的农场相连或拥有水井所需要的最少钱数。", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行，每行一个整数 $W_i$。\n\n接下来 $n$ 行，每行 $n$ 个整数，第 $i$ 行的第 $j$ 个数表示连接 $i$ 号田和 $j$ 号田需要的费用 $P_{i,j}$。", "outputFormat": "输出最小开销。\n", "hint": "对于 $100\\%$ 的数据，$1 \\leq n \\leq 300$，$1 \\leq W_i \\leq 10^5$，$0 \\leq P_{i,j} \\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO08OCT] Watering Hole G", "background": "", "description": "Farmer John’s farm is short of water.\n\nHe decides to bring water to his $n$ fields. He can dig some wells and build channels between fields to connect them for water supply. Digging a well in field $i$ costs $W_i$ units. Connecting field $i$ and field $j$ costs $P_{i,j}$ (with $P_{j,i} = P_{i,j}$) units.\n\nFind the minimum amount of money FJ needs so that every field is either connected to a field that has water or has its own well.", "inputFormat": "The first line contains an integer $n$.\n\nThe next $n$ lines each contain an integer $W_i$.\n\nThe next $n$ lines each contain $n$ integers; the $j$-th number in the $i$-th line is the cost $P_{i,j}$ to connect field $i$ and field $j$.", "outputFormat": "Output the minimum cost.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\leq n \\leq 300$, $1 \\leq W_i \\leq 10^5$, $0 \\leq P_{i,j} \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO08OCT] Watering Hole G", "background": "", "description": "Farmer John 的农场缺水了。\n\n他决定将水引入到他的 $n$ 个农场。他准备通过挖若干井，并在各块田中修筑水道来连通各块田地以供水。在第 $i$ 号田中挖一口井需要花费 $W_i$ 元。连接 $i$ 号田与 $j$ 号田需要 $P_{i,j}$（$P_{j,i}=P_{i,j}$）元。\n\n请求出 FJ 需要为使所有农场都与有水的农场相连或拥有水井所需要的最少钱数。", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行，每行一个整数 $W_i$。\n\n接下来 $n$ 行，每行 $n$ 个整数，第 $i$ 行的第 $j$ 个数表示连接 $i$ 号田和 $j$ 号田需要的费用 $P_{i,j}$。", "outputFormat": "输出最小开销。\n", "hint": "对于 $100\\%$ 的数据，$1 \\leq n \\leq 300$，$1 \\leq W_i \\leq 10^5$，$0 \\leq P_{i,j} \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1551", "type": "P", "difficulty": 3, "samples": [["6 5 3\n1 2\n1 5\n3 4\n5 2\n1 3\n1 4\n2 3\n5 6", "Yes\nYes\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["并查集"], "title": "亲戚", "background": "若某个家族人员过于庞大，要判断两个是否是亲戚，确实还很不容易，现在给出某个亲戚关系图，求任意给出的两个人是否具有亲戚关系。\n", "description": "规定：$x$ 和 $y$ 是亲戚，$y$ 和 $z$ 是亲戚，那么 $x$ 和 $z$ 也是亲戚。如果 $x$，$y$ 是亲戚，那么 $x$ 的亲戚都是 $y$ 的亲戚，$y$ 的亲戚也都是 $x$ 的亲戚。", "inputFormat": "第一行：三个整数 $n,m,p$，（$n,m,p \\le 5000$），分别表示有 $n$ 个人，$m$ 个亲戚关系，询问 $p$ 对亲戚关系。\n\n以下 $m$ 行：每行两个数 $M_i$，$M_j$，$1 \\le M_i,~M_j\\le n$，表示 $M_i$ 和 $M_j$ 具有亲戚关系。\n\n接下来 $p$ 行：每行两个数 $P_i,P_j$，询问 $P_i$ 和 $P_j$ 是否具有亲戚关系。", "outputFormat": "$p$ 行，每行一个 `Yes` 或 `No`。表示第 $i$ 个询问的答案为“具有”或“不具有”亲戚关系。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Relatives", "background": "If a family is too large, it can be hard to determine whether two people are relatives. Given a kinship graph, determine whether any given pair of people are relatives.", "description": "Rules: If $x$ and $y$ are relatives, and $y$ and $z$ are relatives, then $x$ and $z$ are also relatives. If $x$ and $y$ are relatives, then all relatives of $x$ are also relatives of $y$, and all relatives of $y$ are also relatives of $x$.", "inputFormat": "The first line contains three integers $n,m,p$ ($n,m,p \\le 5000$), representing that there are $n$ people, $m$ kinship relations, and $p$ queries.\n\nEach of the following $m$ lines contains two integers $M_i,M_j$ ($1 \\le M_i,~M_j \\le n$), indicating that $M_i$ and $M_j$ are relatives.\n\nThen the next $p$ lines each contain two integers $P_i,P_j$, asking whether $P_i$ and $P_j$ are relatives.", "outputFormat": "Output $p$ lines. Each line contains either `Yes` or `No`, indicating whether the answer to the $i$-th query is “are relatives” or “are not relatives.”", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "亲戚", "background": "若某个家族人员过于庞大，要判断两个是否是亲戚，确实还很不容易，现在给出某个亲戚关系图，求任意给出的两个人是否具有亲戚关系。\n", "description": "规定：$x$ 和 $y$ 是亲戚，$y$ 和 $z$ 是亲戚，那么 $x$ 和 $z$ 也是亲戚。如果 $x$，$y$ 是亲戚，那么 $x$ 的亲戚都是 $y$ 的亲戚，$y$ 的亲戚也都是 $x$ 的亲戚。", "inputFormat": "第一行：三个整数 $n,m,p$，（$n,m,p \\le 5000$），分别表示有 $n$ 个人，$m$ 个亲戚关系，询问 $p$ 对亲戚关系。\n\n以下 $m$ 行：每行两个数 $M_i$，$M_j$，$1 \\le M_i,~M_j\\le n$，表示 $M_i$ 和 $M_j$ 具有亲戚关系。\n\n接下来 $p$ 行：每行两个数 $P_i,P_j$，询问 $P_i$ 和 $P_j$ 是否具有亲戚关系。", "outputFormat": "$p$ 行，每行一个 `Yes` 或 `No`。表示第 $i$ 个询问的答案为“具有”或“不具有”亲戚关系。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1552", "type": "P", "difficulty": 6, "samples": [["5 4\n0 3 3\n1 3 5\n2 2 2\n1 2 4\n2 3 1\n", "6\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2012", "平衡树", "APIO", "可并堆", "栈"], "title": "[APIO2012] 派遣", "background": "在一个忍者的帮派里，一些忍者们被选中派遣给顾客，然后依据自己的工作获取报偿。", "description": "在这个帮派里，有一名忍者被称之为 Master。除了 Master 以外，每名忍者都有且仅有一个上级。为保密，同时增强忍者们的领导力，所有与他们工作相关的指令总是由上级发送给他的直接下属，而不允许通过其他的方式发送。\n\n现在你要招募一批忍者，并把它们派遣给顾客。你需要为每个被派遣的忍者支付一定的薪水，同时使得支付的薪水总额不超过你的预算。另外，为了发送指令，你需要选择一名忍者作为管理者，要求这个管理者可以向所有被派遣的忍者发送指令，在发送指令时，任何忍者（不管是否被派遣）都可以作为消息的传递人。管理者自己可以被派遣，也可以不被派遣。当然，如果管理者没有被派遣，你就不需要支付管理者的薪水。\n\n   \n你的目标是在预算内使顾客的满意度最大。这里定义顾客的满意度为派遣的忍者总数乘以管理者的领导力水平，其中每个忍者的领导力水平也是一定的。\n\n   \n写一个程序，给定每一个忍者 $i$ 的上级 $B_i$，薪水 $C_i$，领导力 $L_i$，以及支付给忍者们的薪水总预算 $M$，输出在预算内满足上述要求时顾客满意度的最大值。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，其中 $N$ 表示忍者的个数，$M$ 表示薪水的总预算。\n\n \n接下来 $N$ 行描述忍者们的上级、薪水以及领导力。其中的第 $i$ 行包含三个整数 $B_i,C_i,L_i$ 分别表示第 $i$ 个忍者的上级，薪水以及领导力。Master 满足 $B_i=0$，并且每一个忍者的老板的编号一定小于自己的编号 $B_i\\lt i$。", "outputFormat": "一行一个整数，表示在预算内顾客的满意度的最大值。", "hint": "$1 \\le N \\le 10^5$，$1 \\le M \\le 10^9$，$0 \\le B_i \\lt i$，$1 \\le C_i \\le M$，$1 \\le L_i \\le 10^9$。\n\n对于 $30\\%$ 的数据，$N \\le 3000$。", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2012] Dispatch", "background": "In a ninja gang, some ninjas are selected to be dispatched to customers and are paid according to their work.", "description": "In this gang, there is one ninja called the Master. Every ninja except the Master has exactly one superior. For secrecy and to strengthen leadership, all work-related commands are always sent from a superior to their direct subordinate, and cannot be sent in any other way.\n\nYou are now to recruit a group of ninjas and dispatch them to customers. You must pay a salary for each dispatched ninja, and the total salary must not exceed your budget. In addition, to send commands, you must choose one ninja as the manager, and this manager must be able to send commands to all dispatched ninjas. When sending commands, any ninja (dispatched or not) may act as a relay. The manager themself may or may not be dispatched. If the manager is not dispatched, you do not need to pay the manager’s salary.\n\nYour goal is to maximize customer satisfaction within the budget. Customer satisfaction is defined as the number of dispatched ninjas multiplied by the manager’s leadership level, where each ninja has a fixed leadership level.\n\nWrite a program that, given each ninja $i$’s superior $B_i$, salary $C_i$, leadership level $L_i$, and the total budget $M$, outputs the maximum possible customer satisfaction under the above requirements.", "inputFormat": "The first line contains two integers $N$ and $M$, where $N$ is the number of ninjas and $M$ is the total salary budget.\n\nThe next $N$ lines describe each ninja’s superior, salary, and leadership level. The $i$-th line contains three integers $B_i, C_i, L_i$, denoting ninja $i$’s superior, salary, and leadership level, respectively. The Master has $B_i = 0$, and every ninja’s superior index is strictly less than their own, i.e., $B_i \\lt i$.", "outputFormat": "Output a single integer, the maximum customer satisfaction within the budget.", "hint": "$1 \\le N \\le 10^5$，$1 \\le M \\le 10^9$，$0 \\le B_i \\lt i$，$1 \\le C_i \\le M$，$1 \\le L_i \\le 10^9$。\n\nFor $30\\%$ of the testdata, $N \\le 3000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2012] 派遣", "background": "在一个忍者的帮派里，一些忍者们被选中派遣给顾客，然后依据自己的工作获取报偿。", "description": "在这个帮派里，有一名忍者被称之为 Master。除了 Master 以外，每名忍者都有且仅有一个上级。为保密，同时增强忍者们的领导力，所有与他们工作相关的指令总是由上级发送给他的直接下属，而不允许通过其他的方式发送。\n\n现在你要招募一批忍者，并把它们派遣给顾客。你需要为每个被派遣的忍者支付一定的薪水，同时使得支付的薪水总额不超过你的预算。另外，为了发送指令，你需要选择一名忍者作为管理者，要求这个管理者可以向所有被派遣的忍者发送指令，在发送指令时，任何忍者（不管是否被派遣）都可以作为消息的传递人。管理者自己可以被派遣，也可以不被派遣。当然，如果管理者没有被派遣，你就不需要支付管理者的薪水。\n\n   \n你的目标是在预算内使顾客的满意度最大。这里定义顾客的满意度为派遣的忍者总数乘以管理者的领导力水平，其中每个忍者的领导力水平也是一定的。\n\n   \n写一个程序，给定每一个忍者 $i$ 的上级 $B_i$，薪水 $C_i$，领导力 $L_i$，以及支付给忍者们的薪水总预算 $M$，输出在预算内满足上述要求时顾客满意度的最大值。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，其中 $N$ 表示忍者的个数，$M$ 表示薪水的总预算。\n\n \n接下来 $N$ 行描述忍者们的上级、薪水以及领导力。其中的第 $i$ 行包含三个整数 $B_i,C_i,L_i$ 分别表示第 $i$ 个忍者的上级，薪水以及领导力。Master 满足 $B_i=0$，并且每一个忍者的老板的编号一定小于自己的编号 $B_i\\lt i$。", "outputFormat": "一行一个整数，表示在预算内顾客的满意度的最大值。", "hint": "$1 \\le N \\le 10^5$，$1 \\le M \\le 10^9$，$0 \\le B_i \\lt i$，$1 \\le C_i \\le M$，$1 \\le L_i \\le 10^9$。\n\n对于 $30\\%$ 的数据，$N \\le 3000$。", "locale": "zh-CN"}}}
{"pid": "P1553", "type": "P", "difficulty": 2, "samples": [["5087462", "2647805"], ["600.084", "6.48"], ["700/27", "7/72"], ["8670%", "768%"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "洛谷原创"], "title": "数字反转（升级版）", "background": "**以下为原题面，仅供参考:**\n\n给定一个数，请将该数各个位上数字反转得到一个新数。\n\n这次与 NOIp2011 普及组第一题不同的是：这个数可以是小数，分数，百分数，整数。整数反转是将所有数位对调；小数反转是把整数部分的数反转，再将小数部分的数反转，不交换整数部分与小数部分；分数反转是把分母的数反转，再把分子的数反转，不交换分子与分母；百分数的分子一定是整数，百分数只改变数字部分。整数新数也应满足整数的常见形式，即除非给定的原数为零，否则反转后得到的新数的最高位数字不应为零；小数新数的末尾不为 $0$（除非小数部分除了 $0$ 没有别的数，那么只保留1个 $0$）；分数不约分，分子和分母都不是小数（约分滴童鞋抱歉了，不能过哦。输入数据保证分母不为 $0$），本次没有负数。\n", "description": "给定一个数，请将该数各个位上数字反转得到一个新数。\n\n这次与 NOIp2011 普及组第一题不同的是：这个数可以是小数，分数，百分数，整数。\n\n- 整数反转是将所有数位对调。\n\n- 小数反转是把整数部分的数反转，再将小数部分的数反转，不交换整数部分与小数部分。\n\n- 分数反转是把分母的数反转，再把分子的数反转，不交换分子与分母。\n\n- 百分数的分子一定是整数，百分数只改变数字部分。", "inputFormat": "一个实数 $s$\n", "outputFormat": "一个实数，即 $s$ 的反转数\n", "hint": "**【数据范围】**\n\n- 对于 $25\\%$ 的数据，$s$ 是整数，不大于 $20$ 位；\n- 对于 $25\\%$ 的数据，$s$ 是小数，整数部分和小数部分均不大于 $10$ 位；\n- 对于 $25\\%$ 的数据，$s$ 是分数，分子和分母均不大于 $10$ 位；\n- 对于 $25\\%$ 的数据，$s$ 是百分数，分子不大于 $19$ 位。\n\n**【数据保证】**\n\n- 对于整数翻转而言，整数原数和整数新数满足整数的常见形式，即除非给定的原数为零，否则反转后得到的新数和原来的数字的最高位数字不应为零。\n\n- 对于小数翻转而言，其小数点前面部分同上，小数点后面部分的形式，保证满足小数的常见形式，也就是末尾没有多余的 $0$（小数部分除了 $0$ 没有别的数，那么只保留 $1$ 个 $0$。若反转之后末尾数字出现 $0$，请省略多余的 $0$）\n\n- 对于分数翻转而言，分数不约分，分子和分母都不是小数。输入的分母不为 $0$。与整数翻转相关规定见上。\n\n- 对于百分数翻转而言，见与整数翻转相关内容。\n\n数据不存在负数。", "locale": "zh-CN", "translations": {"en": {"title": "Digit Reversal (Enhanced Edition)", "background": "The following is the original statement, for reference only:\n\nGiven a number, reverse the digits in each place to obtain a new number.\n\nUnlike NOIp2011 Junior Problem 1, this time the number can be a decimal, a fraction, a percentage, or an integer. Integer reversal means reversing all digits. Decimal reversal means reversing the digits of the integer part and the digits of the fractional part separately, without swapping the integer and fractional parts. Fraction reversal means reversing the digits of the denominator and then the digits of the numerator, without swapping the numerator and the denominator. For a percentage, the numerator is always an integer, and only the digits are changed. The new integer must satisfy the normal integer form: unless the given original number is zero, the highest digit of the reversed integer must not be zero. The new decimal must not end with $0$ (unless the fractional part contains nothing but $0$, in which case keep exactly one $0$). Fractions are not reduced, and neither the numerator nor the denominator is a decimal (the input guarantees that the denominator is not $0$). There are no negative numbers.", "description": "Given a number, reverse the digits in each place to obtain a new number.\n\nUnlike NOIp2011 Junior Problem 1, this time the number can be a decimal, a fraction, a percentage, or an integer.\n\n- Integer reversal: reverse all digits.\n\n- Decimal reversal: reverse the digits of the integer part and the digits of the fractional part separately, without swapping the integer and fractional parts.\n\n- Fraction reversal: reverse the digits of the denominator, then reverse the digits of the numerator, without swapping the numerator and the denominator.\n\n- Percentage: the numerator is always an integer; only the digits are changed.", "inputFormat": "A number $s$.", "outputFormat": "A number: the reversed form of $s$.", "hint": "Constraints\n\n- For $25\\%$ of the testdata, $s$ is an integer with at most $20$ digits.\n- For $25\\%$ of the testdata, $s$ is a decimal, and both its integer part and fractional part have at most $10$ digits.\n- For $25\\%$ of the testdata, $s$ is a fraction, and both its numerator and denominator have at most $10$ digits.\n- For $25\\%$ of the testdata, $s$ is a percentage, and its numerator has at most $19$ digits.\n\nData Guarantees\n\n- For integer reversal, both the original integer and the reversed integer satisfy the normal integer form: unless the original number is zero, the highest digit of both the original and the reversed number must not be zero.\n- For decimal reversal, the part before the decimal point follows the same rule as integers. The part after the decimal point satisfies the normal decimal form, i.e., there are no extra trailing $0$s (if the fractional part has nothing but $0$, keep exactly $1$ zero. If trailing zeros appear after reversal, omit the extra $0$s).\n- For fraction reversal, the fraction is not reduced, and neither the numerator nor the denominator is a decimal. The input denominator is not $0$. Rules related to integer reversal apply as above.\n- For percentage reversal, see the rules related to integers.\n\nThere are no negative numbers in the testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数字反转（升级版）", "background": "**以下为原题面，仅供参考:**\n\n给定一个数，请将该数各个位上数字反转得到一个新数。\n\n这次与 NOIp2011 普及组第一题不同的是：这个数可以是小数，分数，百分数，整数。整数反转是将所有数位对调；小数反转是把整数部分的数反转，再将小数部分的数反转，不交换整数部分与小数部分；分数反转是把分母的数反转，再把分子的数反转，不交换分子与分母；百分数的分子一定是整数，百分数只改变数字部分。整数新数也应满足整数的常见形式，即除非给定的原数为零，否则反转后得到的新数的最高位数字不应为零；小数新数的末尾不为 $0$（除非小数部分除了 $0$ 没有别的数，那么只保留1个 $0$）；分数不约分，分子和分母都不是小数（约分滴童鞋抱歉了，不能过哦。输入数据保证分母不为 $0$），本次没有负数。\n", "description": "给定一个数，请将该数各个位上数字反转得到一个新数。\n\n这次与 NOIp2011 普及组第一题不同的是：这个数可以是小数，分数，百分数，整数。\n\n- 整数反转是将所有数位对调。\n\n- 小数反转是把整数部分的数反转，再将小数部分的数反转，不交换整数部分与小数部分。\n\n- 分数反转是把分母的数反转，再把分子的数反转，不交换分子与分母。\n\n- 百分数的分子一定是整数，百分数只改变数字部分。", "inputFormat": "一个实数 $s$\n", "outputFormat": "一个实数，即 $s$ 的反转数\n", "hint": "**【数据范围】**\n\n- 对于 $25\\%$ 的数据，$s$ 是整数，不大于 $20$ 位；\n- 对于 $25\\%$ 的数据，$s$ 是小数，整数部分和小数部分均不大于 $10$ 位；\n- 对于 $25\\%$ 的数据，$s$ 是分数，分子和分母均不大于 $10$ 位；\n- 对于 $25\\%$ 的数据，$s$ 是百分数，分子不大于 $19$ 位。\n\n**【数据保证】**\n\n- 对于整数翻转而言，整数原数和整数新数满足整数的常见形式，即除非给定的原数为零，否则反转后得到的新数和原来的数字的最高位数字不应为零。\n\n- 对于小数翻转而言，其小数点前面部分同上，小数点后面部分的形式，保证满足小数的常见形式，也就是末尾没有多余的 $0$（小数部分除了 $0$ 没有别的数，那么只保留 $1$ 个 $0$。若反转之后末尾数字出现 $0$，请省略多余的 $0$）\n\n- 对于分数翻转而言，分数不约分，分子和分母都不是小数。输入的分母不为 $0$。与整数翻转相关规定见上。\n\n- 对于百分数翻转而言，见与整数翻转相关内容。\n\n数据不存在负数。", "locale": "zh-CN"}}}
{"pid": "P1554", "type": "P", "difficulty": 1, "samples": [["129 137", "1 10 2 9 1 1 1 1 0 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "数学", "2006", "USACO"], "title": "[USACO06DEC] 梦中的统计 Dream Counting B", "background": "Bessie 处于半梦半醒的状态。过了一会儿，她意识到她在数数，不能入睡。", "description": "Bessie 的大脑反应灵敏，仿佛真实地看到了她数过的一个又一个数。她开始注意每一个数码（$0 \\ldots 9$）：每一个数码在计数的过程中出现过多少次？\n\n给出两个整数 $M$ 和 $N$，求在序列 $[M, M + 1, M + 2, \\ldots, N - 1, N]$ 中每一个数码出现了多少次。", "inputFormat": "第 $1$ 行：两个用空格分开的整数 $M$ 和 $N$。", "outputFormat": "第 $1$ 行：十个用空格分开的整数，分别表示数码 $0 \\ldots 9$ 在序列中出现的次数。", "hint": "数据保证，$1 \\leq M \\leq N \\leq 2 \\times 10^9$，$0 \\leq N-M \\leq 5 \\times 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO06DEC] Dream Counting B", "background": "Bessie is half asleep. After a while, she realizes she is counting and cannot fall asleep.", "description": "Bessie's mind is sharp, as if she vividly sees each number she has counted. She starts to pay attention to every digit ($0 \\ldots 9$): how many times does each digit appear during the counting process?\n\nGiven two integers $M$ and $N$, determine how many times each digit appears in the sequence $[M, M + 1, M + 2, \\ldots, N - 1, N]$.", "inputFormat": "Line $1$: Two integers $M$ and $N$ separated by a space.", "outputFormat": "Line $1$: Ten integers separated by spaces, representing how many times the digits $0 \\ldots 9$ appear in the sequence.", "hint": "Constraints: $1 \\leq M \\leq N \\leq 2 \\times 10^9$, $0 \\leq N - M \\leq 5 \\times 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO06DEC] 梦中的统计 Dream Counting B", "background": "Bessie 处于半梦半醒的状态。过了一会儿，她意识到她在数数，不能入睡。", "description": "Bessie 的大脑反应灵敏，仿佛真实地看到了她数过的一个又一个数。她开始注意每一个数码（$0 \\ldots 9$）：每一个数码在计数的过程中出现过多少次？\n\n给出两个整数 $M$ 和 $N$，求在序列 $[M, M + 1, M + 2, \\ldots, N - 1, N]$ 中每一个数码出现了多少次。", "inputFormat": "第 $1$ 行：两个用空格分开的整数 $M$ 和 $N$。", "outputFormat": "第 $1$ 行：十个用空格分开的整数，分别表示数码 $0 \\ldots 9$ 在序列中出现的次数。", "hint": "数据保证，$1 \\leq M \\leq N \\leq 2 \\times 10^9$，$0 \\leq N-M \\leq 5 \\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1555", "type": "P", "difficulty": 3, "samples": [["1010\n212", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "2011", "USACO", "枚举", "进制"], "title": "[USACO11NOV] 尴尬的数字 Awkward Digits B", "background": "Bessie 刚刚学会了不同进制数之间的转换，但是她总是犯错误，因为她的两个前蹄不能轻松的握住钢笔。", "description": "每当 Bessie 将一个数转换成新的进制时，她总会写错一位数字。例如，她将 `14` 转化成 $2$ 进制数，正确的结果是 `1110`，但她可能会写成 `0110` 或 `1111`。Bessie 从不会意外地增加或删减数字，所以她可能会写出以 `0` 开头的错误数字。\n\n给出 Bessie 转换后 $N$ 的 $2$ 进制形式和 $3$ 进制形式，请计算出 $N$ 的正确数值（用十进制表示）。$N$ 可能会达到 $10^9$，输入数据保证解的存在唯一性。", "inputFormat": "第一行，$N$ 的 $2$ 进制表示（有一位是错误的数字）。\n\n第二行，$N$ 的 $3$ 进制表示（有一位是错误的数字）。", "outputFormat": "仅一行，$N$ 的正确数值。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[USACO11NOV] Awkward Digits B", "background": "Bessie has just learned how to convert numbers between different bases, but she often makes mistakes because her two front hooves cannot easily hold a pen.", "description": "Every time Bessie converts a number to a new base, she always writes exactly one digit incorrectly. For example, when she converts `14` to base $2$, the correct result is `1110`, but she might write `0110` or `1111`. Bessie never accidentally inserts or deletes digits, so she might write an incorrect number that starts with `0`.\n\nGiven Bessie's base $2$ form of $N$ and base $3$ form of $N$ after her conversion, compute the correct value of $N$ (in decimal). $N$ may be as large as $10^9$, and the input guarantees that the solution exists and is unique.", "inputFormat": "The first line contains the base $2$ representation of $N$ (with exactly one incorrect digit).\nThe second line contains the base $3$ representation of $N$ (with exactly one incorrect digit).", "outputFormat": "Output a single line with the correct value of $N$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO11NOV] 尴尬的数字 Awkward Digits B", "background": "Bessie 刚刚学会了不同进制数之间的转换，但是她总是犯错误，因为她的两个前蹄不能轻松的握住钢笔。", "description": "每当 Bessie 将一个数转换成新的进制时，她总会写错一位数字。例如，她将 `14` 转化成 $2$ 进制数，正确的结果是 `1110`，但她可能会写成 `0110` 或 `1111`。Bessie 从不会意外地增加或删减数字，所以她可能会写出以 `0` 开头的错误数字。\n\n给出 Bessie 转换后 $N$ 的 $2$ 进制形式和 $3$ 进制形式，请计算出 $N$ 的正确数值（用十进制表示）。$N$ 可能会达到 $10^9$，输入数据保证解的存在唯一性。", "inputFormat": "第一行，$N$ 的 $2$ 进制表示（有一位是错误的数字）。\n\n第二行，$N$ 的 $3$ 进制表示（有一位是错误的数字）。", "outputFormat": "仅一行，$N$ 的正确数值。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1556", "type": "P", "difficulty": 4, "samples": [["4\n0 1\n2 1\n2 0\n2 -5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2012", "USACO"], "title": "[USACO12MAR] 幸福的路 Connect the Cows B", "background": null, "description": "每天，John 都要为了农场里 $n$（$1 \\leq n\\leq 10$）头牛的健康和幸福四处奔波。\n\n每头牛的位置可以描述为一个二维坐标，John 从坐标原点 $(0,0)$ 出发。为了使路径更有趣，John 决定只沿着平行于坐标轴的方向行走，这样只能沿着东西南北方向运动。而且只有到达某头牛的坐标后 John 才会改变行走的方向（当然，如果有必要，John 也会穿过某头牛的坐标而不改变行走的方向）。\n\n如果 John 改变行走的方向，他会原地转 $90^\\circ$ 或者 $180^\\circ$。John 的路径必须保证检查完所有牛后返回原点。\n\nJohn 可以穿过某头牛的坐标而不改变方向任意次，请计算出有多少条路径满足 John 能检查完 $n$ 头牛，在每头牛的坐标处恰好改变一次方向。同一条路径从不同方向经过要计算两次。", "inputFormat": "第一行一个整数 $n$，含义如题面所示。\n\n第二行到第 $n+1$ 行，第 $i+1$ 行是两个用空格隔开的整数 $x$ 和 $y$，表示第 $i$ 头牛的坐标（$-1000 \\leq x,y \\leq 1000$）。", "outputFormat": "一行一个整数，表示路径的数量（如果没有满足要求的路径则输出 `0`）。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[USACO12MAR] Happy Road (Connect the Cows B)", "background": "", "description": "Every day, John bustles around to ensure the health and happiness of $n$ ($1 \\leq n \\leq 10$) cows.\n\nEach cow’s position is given by a 2D coordinate, and John starts at the origin $(0, 0)$. To make the route more interesting, John decides to move only along directions parallel to the coordinate axes, that is, only north, south, east, or west. Moreover, John changes direction only upon reaching the coordinate of some cow (of course, if necessary, John may also pass through a cow’s coordinate without changing direction).\n\nIf John changes direction, he turns in place by $90^\\circ$ or $180^\\circ$. John’s path must visit all cows and then return to the origin.\n\nJohn may pass through any cow’s coordinate without changing direction any number of times. Please compute how many routes allow John to visit all $n$ cows, such that he changes direction exactly once at each cow’s coordinate. The same geometric path traversed in the opposite direction should be counted twice.", "inputFormat": "The first line contains an integer $n$, as described above.\n\nThe next $n$ lines each contain two space-separated integers $x$ and $y$, where line $i+1$ gives the coordinates of the $i$-th cow ($-1000 \\leq x, y \\leq 1000$).", "outputFormat": "Output a single integer on one line, the number of valid routes (output `0` if there are no valid routes).", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO12MAR] 幸福的路 Connect the Cows B", "background": null, "description": "每天，John 都要为了农场里 $n$（$1 \\leq n\\leq 10$）头牛的健康和幸福四处奔波。\n\n每头牛的位置可以描述为一个二维坐标，John 从坐标原点 $(0,0)$ 出发。为了使路径更有趣，John 决定只沿着平行于坐标轴的方向行走，这样只能沿着东西南北方向运动。而且只有到达某头牛的坐标后 John 才会改变行走的方向（当然，如果有必要，John 也会穿过某头牛的坐标而不改变行走的方向）。\n\n如果 John 改变行走的方向，他会原地转 $90^\\circ$ 或者 $180^\\circ$。John 的路径必须保证检查完所有牛后返回原点。\n\nJohn 可以穿过某头牛的坐标而不改变方向任意次，请计算出有多少条路径满足 John 能检查完 $n$ 头牛，在每头牛的坐标处恰好改变一次方向。同一条路径从不同方向经过要计算两次。", "inputFormat": "第一行一个整数 $n$，含义如题面所示。\n\n第二行到第 $n+1$ 行，第 $i+1$ 行是两个用空格隔开的整数 $x$ 和 $y$，表示第 $i$ 头牛的坐标（$-1000 \\leq x,y \\leq 1000$）。", "outputFormat": "一行一个整数，表示路径的数量（如果没有满足要求的路径则输出 `0`）。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1557", "type": "P", "difficulty": 4, "samples": [["+(1)23+(3)15-(1)2", "66"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "高精度", "USACO"], "title": "Kruscal的加法", "background": "奶牛 Kruscal 认为人类的加法太落后了。比如说有时候想要用加法计算 `+15*3`，只能写成 `+15+15+15`，真是浪费精力啊！于是，Kruscal 决定开发出一种新的加法算式。", "description": "当然，新的算式也是建立在原本算式的基础上的，不同就在于上式可以直接写成 `+++15`，同理，对于 `-15*3` 这样的算式可以写成 `---15`。一段时间后，Kruscal 又被那无穷多个 `+-` 号囧到了，于是他又将这个算式改进了一下。\n\n比如 `+15*3` 又可以写成 `+(3)15`，同样，`-15*3` 等价于 `-(3)15`。但从上面可以看出，对于乘数较小的情况，如 `+++15` 这样的表述还是很方便的，于是在新的算式中还是保留了这种形式。\n\n对于算式还要做一点特殊的说明：`+15*3` 转换成 Kruscal 型算式时可以写成 `+++15` 或 `+(3)15`，但不可以写成 `++(2)15` 这样的形式。\n\n对于算式 `23+15*3-2` 可以表示为以下几种形式：`23+++15-2`、`23+(3)15-2`、`+23+++15-2`、`+23+(3)15-2`、`+(1)23+(3)15-(1)2`。不会出现如下几种形式：`(1)23+++15-2`、`+23++(2)15-(1)2`、`23+++15-2+(0)100`、`23-(-3)15-2`。", "inputFormat": "一行，一个 Kruscal 型算式。", "outputFormat": "一行，为运算结果。", "hint": "对于 $100 \\%$ 的数据，算式长度不超过 $2000$。", "locale": "zh-CN", "translations": {"en": {"title": "Kruscal's Addition", "background": "The cow Kruscal thinks human addition is too backward. For example, sometimes to compute `+15*3` using addition, you can only write `+15+15+15`, which is a waste of effort. So Kruscal decided to develop a new additive expression.", "description": "Of course, the new notation is based on the original one. The difference is that the above can be written directly as `+++15`; similarly, an expression like `-15*3` can be written as `---15`. After a while, Kruscal was bothered by the countless `+` and `-` signs, so he improved the notation again.\n\nFor example, `+15*3` can also be written as `+(3)15`, and similarly, `-15*3` is equivalent to `-(3)15`. But as you can see, when the multiplier is small, expressions like `+++15` are still convenient, so this form is kept in the new notation.\n\nThere is a special note about the expressions: when converting `+15*3` to a Kruscal-style expression, you can write it as `+++15` or `+(3)15`, but not as `++(2)15`.\n\nThe expression `23+15*3-2` can be written in the following forms: `23+++15-2`, `23+(3)15-2`, `+23+++15-2`, `+23+(3)15-2`, `+(1)23+(3)15-(1)2`. The following forms will not appear: `(1)23+++15-2`, `+23++(2)15-(1)2`, `23+++15-2+(0)100`, `23-(-3)15-2`.", "inputFormat": "One line, a Kruscal-style expression.", "outputFormat": "One line, the result of the computation.", "hint": "For $100\\%$ of the testdata, the expression length does not exceed 2000.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Kruscal的加法", "background": "奶牛 Kruscal 认为人类的加法太落后了。比如说有时候想要用加法计算 `+15*3`，只能写成 `+15+15+15`，真是浪费精力啊！于是，Kruscal 决定开发出一种新的加法算式。", "description": "当然，新的算式也是建立在原本算式的基础上的，不同就在于上式可以直接写成 `+++15`，同理，对于 `-15*3` 这样的算式可以写成 `---15`。一段时间后，Kruscal 又被那无穷多个 `+-` 号囧到了，于是他又将这个算式改进了一下。\n\n比如 `+15*3` 又可以写成 `+(3)15`，同样，`-15*3` 等价于 `-(3)15`。但从上面可以看出，对于乘数较小的情况，如 `+++15` 这样的表述还是很方便的，于是在新的算式中还是保留了这种形式。\n\n对于算式还要做一点特殊的说明：`+15*3` 转换成 Kruscal 型算式时可以写成 `+++15` 或 `+(3)15`，但不可以写成 `++(2)15` 这样的形式。\n\n对于算式 `23+15*3-2` 可以表示为以下几种形式：`23+++15-2`、`23+(3)15-2`、`+23+++15-2`、`+23+(3)15-2`、`+(1)23+(3)15-(1)2`。不会出现如下几种形式：`(1)23+++15-2`、`+23++(2)15-(1)2`、`23+++15-2+(0)100`、`23-(-3)15-2`。", "inputFormat": "一行，一个 Kruscal 型算式。", "outputFormat": "一行，为运算结果。", "hint": "对于 $100 \\%$ 的数据，算式长度不超过 $2000$。", "locale": "zh-CN"}}}
{"pid": "P1558", "type": "P", "difficulty": 4, "samples": [["2 2 4\nC 1 1 2\nP 1 2\nC 2 2 2\nP 1 2", "2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "位运算"], "title": "色板游戏", "background": "阿宝上学了，今天老师拿来了一块很长的涂色板。", "description": "色板长度为 $L$，$L$ 是一个正整数，所以我们可以均匀地将它划分成 $L$ 块 $1$ 厘米长的小方格。并从左到右标记为 $1, 2, \\dots, L$。\n\n现在色板上只有一个颜色，老师告诉阿宝在色板上只能做两件事：\n\n1. `C A B C` 指在 $A$ 到 $B$ 号方格中涂上颜色 $C$。\n2. `P A B` 指老师的提问：$A$ 到 $B$ 号方格中有几种颜色。\n\n学校的颜料盒中一共有 $T$ 种颜料。为简便起见，我们把他们标记为 $1, 2, \\dots, T$。开始时色板上原有的颜色就为 $1$ 号色。 面对如此复杂的问题，阿宝向你求助，你能帮助他吗？", "inputFormat": "第一行有 $3$ 个整数 $L (1 \\le L \\le 10^5)$，$T (1 \\le T \\le 30)$ 和 $O (1 \\le O \\le 10^5)$。 在这里 $O$ 表示事件数。 \n\n接下来 $O$ 行, 每行以 `C A B C` 或 `P A B` 的形式表示所要做的事情（这里 $A, B, C$ 为整数，可能 $A> B$，这样的话需要你交换 $A$ 和 $B$）。", "outputFormat": "对于老师的提问，做出相应的回答。每行一个整数。", "hint": "**【数据范围】**\n\n$1 \\le L \\le 10^5, 1 \\le T \\le 30, 1 \\le O \\le 10^5$。\n\n$1 \\le A, B \\le L$（不保证 $A \\le B$），$1 \\le C \\le T$。", "locale": "zh-CN", "translations": {"en": {"title": "Color Board Game", "background": "Abao has started school. Today the teacher brought a very long color board.", "description": "The color board has length $L$, where $L$ is a positive integer, so we can evenly divide it into $L$ small squares, each $1$ centimeter long, labeled from left to right as $1, 2, \\dots, L$.\n\nCurrently the board has only one color. The teacher tells Abao that only two operations are allowed on the board:\n\n1. `C A B C` means to paint all squares numbered from $A$ to $B$ with color $C$.\n2. `P A B` means a query: how many different colors appear among squares numbered from $A$ to $B$.\n\nThere are $T$ types of paint in the school’s paint box. For simplicity, we label them as $1, 2, \\dots, T$. Initially, the entire board has color $1$. Facing such a complex problem, Abao asks for your help. Can you help him?", "inputFormat": "The first line contains $3$ integers $L$ $(1 \\le L \\le 10^5)$, $T$ $(1 \\le T \\le 30)$, and $O$ $(1 \\le O \\le 10^5)$. Here $O$ is the number of operations.\n\nThen follow $O$ lines, each describing an operation in the form `C A B C` or `P A B` (here $A, B, C$ are integers; it is possible that $A > B$, in which case you should swap $A$ and $B$).", "outputFormat": "For each query from the teacher, output the corresponding answer. Print one integer per line.", "hint": "Constraints\n\n$1 \\le L \\le 10^5$, $1 \\le T \\le 30$, $1 \\le O \\le 10^5$.\n\n$1 \\le A, B \\le L$ (not guaranteed that $A \\le B$), $1 \\le C \\le T$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "色板游戏", "background": "阿宝上学了，今天老师拿来了一块很长的涂色板。", "description": "色板长度为 $L$，$L$ 是一个正整数，所以我们可以均匀地将它划分成 $L$ 块 $1$ 厘米长的小方格。并从左到右标记为 $1, 2, \\dots, L$。\n\n现在色板上只有一个颜色，老师告诉阿宝在色板上只能做两件事：\n\n1. `C A B C` 指在 $A$ 到 $B$ 号方格中涂上颜色 $C$。\n2. `P A B` 指老师的提问：$A$ 到 $B$ 号方格中有几种颜色。\n\n学校的颜料盒中一共有 $T$ 种颜料。为简便起见，我们把他们标记为 $1, 2, \\dots, T$。开始时色板上原有的颜色就为 $1$ 号色。 面对如此复杂的问题，阿宝向你求助，你能帮助他吗？", "inputFormat": "第一行有 $3$ 个整数 $L (1 \\le L \\le 10^5)$，$T (1 \\le T \\le 30)$ 和 $O (1 \\le O \\le 10^5)$。 在这里 $O$ 表示事件数。 \n\n接下来 $O$ 行, 每行以 `C A B C` 或 `P A B` 的形式表示所要做的事情（这里 $A, B, C$ 为整数，可能 $A> B$，这样的话需要你交换 $A$ 和 $B$）。", "outputFormat": "对于老师的提问，做出相应的回答。每行一个整数。", "hint": "**【数据范围】**\n\n$1 \\le L \\le 10^5, 1 \\le T \\le 30, 1 \\le O \\le 10^5$。\n\n$1 \\le A, B \\le L$（不保证 $A \\le B$），$1 \\le C \\le T$。", "locale": "zh-CN"}}}
{"pid": "P1559", "type": "P", "difficulty": 5, "samples": [["3\r\n10 2 3\r\n2 3 4\r\n3 4 5\r\n2 2 2\r\n3 5 3\r\n4 5 1", "52"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "剪枝", "模拟退火", "二分图", "状压 DP"], "title": "运动员最佳匹配问题", "background": "", "description": "羽毛球队有男女运动员各 $n$ 人。给定 $2$ 个 $n \\times n$ 矩阵 $P$ 和 $Q$。$P_{i,j}$ 是男运动员 $i$ 和女运动员 $j$ 配对组成混合双打的男运动员竞赛优势；$Q_{i,j}$ 是女运动员 $i$ 和男运动员 $j$ 配合的女运动员竞赛优势。\n\n但是，由于技术配合和心理状态等各种因素影响，$P_{i,j}$ 不一定等于 $Q_{j,i}$。男运动员 $i$ 和女运动员 $j$ 配对组成混合双打的男女双方竞赛优势为 $\\bm{P_{i,j} \\times Q_{j,i}}$。\n\n现在，请你设计一个算法，计算男女运动员最佳配对法，使各组男女双方竞赛优势的总和达到最大。\n", "inputFormat": "第一行有 $1$ 个正整数 $n$ $(1 \\le n \\le 20)$。接下来的 $2n$ 行，每行 $n$ 个数。前 $n$ 行是 $P$，后 $n$ 行是 $Q$。", "outputFormat": "将计算出的男女双方竞赛优势的总和的最大值输出。", "hint": "保证题目数据均在 $\\text{int}$ 类型范围内。", "locale": "zh-CN", "translations": {"en": {"title": "Optimal Matching of Athletes", "background": "", "description": "A badminton team has $n$ male athletes and $n$ female athletes. You are given two $n \\times n$ matrices $P$ and $Q$. $P_{i,j}$ is the male athlete $i$'s competitive advantage when paired with female athlete $j$ in mixed doubles; $Q_{i,j}$ is the female athlete $i$'s competitive advantage when cooperating with male athlete $j$.\n\nHowever, due to various factors such as technical coordination and psychological state, $P_{i,j}$ is not necessarily equal to $Q_{j,i}$. The combined competitive advantage of the pair consisting of male athlete $i$ and female athlete $j$ is $\\bm{P_{i,j} \\times Q_{j,i}}$.\n\nNow, design an algorithm to compute the optimal pairing between male and female athletes so that the sum of the combined competitive advantages across all pairs is maximized.", "inputFormat": "The first line contains one positive integer $n$ $(1 \\le n \\le 20)$. The next $2n$ lines each contain $n$ numbers. The first $n$ lines are $P$, and the last $n$ lines are $Q$.", "outputFormat": "Output the maximum possible sum of the combined competitive advantages across all pairs.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "运动员最佳匹配问题", "background": "", "description": "羽毛球队有男女运动员各 $n$ 人。给定 $2$ 个 $n \\times n$ 矩阵 $P$ 和 $Q$。$P_{i,j}$ 是男运动员 $i$ 和女运动员 $j$ 配对组成混合双打的男运动员竞赛优势；$Q_{i,j}$ 是女运动员 $i$ 和男运动员 $j$ 配合的女运动员竞赛优势。\n\n但是，由于技术配合和心理状态等各种因素影响，$P_{i,j}$ 不一定等于 $Q_{j,i}$。男运动员 $i$ 和女运动员 $j$ 配对组成混合双打的男女双方竞赛优势为 $\\bm{P_{i,j} \\times Q_{j,i}}$。\n\n现在，请你设计一个算法，计算男女运动员最佳配对法，使各组男女双方竞赛优势的总和达到最大。\n", "inputFormat": "第一行有 $1$ 个正整数 $n$ $(1 \\le n \\le 20)$。接下来的 $2n$ 行，每行 $n$ 个数。前 $n$ 行是 $P$，后 $n$ 行是 $Q$。", "outputFormat": "将计算出的男女双方竞赛优势的总和的最大值输出。", "hint": "保证题目数据均在 $\\text{int}$ 类型范围内。", "locale": "zh-CN"}}}
{"pid": "P1560", "type": "P", "difficulty": 5, "samples": [["8 4\r\nE2\r\nA6\r\nG1\r\nF5", "33"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "USACO"], "title": "[USACO5.2] 蜗牛的旅行Snail Trails", "background": "", "description": "萨丽·斯内尔（Sally Snail，蜗牛）喜欢在 $N\\times N$ 的棋盘上闲逛（$1<n \\le 120$）。\n\n她总是从棋盘的左上角出发。棋盘上有空的格子（用 $\\verb!.!$ 来表示）和 $B$ 个路障（用 $\\verb!#!$ 来表示）。\n\n下面是这种表示法的示例棋盘：\n\n$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S  .  .  .  .  .  #  .! \\\\\n\\verb!2  .  .  .  .  #  .  .  .! \\\\\n\\verb!3  .  .  .  .  .  .  .  .! \\\\\n\\verb!4  .  .  .  .  .  .  .  .! \\\\\n\\verb!5  .  .  .  .  .  #  .  .! \\\\\n\\verb!6  #  .  .  .  .  .  .  .! \\\\\n\\verb!7  .  .  .  .  .  .  .  .! \\\\\n\\verb!8  .  .  .  .  .  .  .  .! \\\\\n\\end{aligned}\\quad}$$\n\n萨丽总是垂直（向上或者向下）或水平（向左或者向右）地走。她可以从出发地（总是记作 $\\tt A1$）向下或者向右走。一旦萨丽选定了一个方向，她就会一直走下去。如果她遇到棋盘边缘或者路障，她就停下来，并且转过 $90$ 度。她不可能离开棋盘，或者走进路障当中。并且，萨丽从不跨过她已经经过的格子。当她再也不能走的时候，她就停止散步。\n\n这里是上面的棋盘上的一次散步路线图示：\n\n$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S--------------+  #  .! \\\\\n\\verb!2  .  .  .  .  #  |  .  .! \\\\\n\\verb!3  .  .  .  .  .  |  .  .! \\\\\n\\verb!4  .  .  .  .  .  +-----+! \\\\\n\\verb!5  .  .  .  .  .  #  .  |! \\\\\n\\verb!6  #  .  .  .  .  .  .  |! \\\\\n\\verb!7  +-----------------+  |! \\\\\n\\verb!8  +--------------------+! \\\\\n\\end{aligned}\\quad}$$\n \n萨丽向右走，再向下，向右，向下，然后向左，再向上，最后向右走。这时她遇到了一个她已经走过的格子，她就停下来了。但是，如果她在 $\\tt F5$ 格遇到路障后选择另外一条路——向我们看来是左边的方向转弯，情况就不一样了。\n\n你的任务是计算并输出，如果萨丽聪明地选择她的路线的话，她所能够经过的最多格子数。\n", "inputFormat": "输入的第一行包括 $N$ —棋盘的大小，和 $B$ —路障的数量（$1 \\le B \\le 200$）。接下来的 $B$ 行包含着路障的位置信息。下面的样例输入对应着上面的示例棋盘。下面的输出文件表示问题的解答。注意，当 $N>26$ 时，输入文件就不能表示 $\\tt Z$ 列以后的路障了。（这句话不用专门理他。其实就是从 $A$ 的 ASCII 码开始向后顺延，不管是什么字母就行了）", "outputFormat": "输出文件应该只由一行组成，即萨丽能够经过的最多格子数。\n", "hint": "$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S  .  .  .  .  .  #  .! \\\\\n\\verb!2  |  .  .  .  #  .  .  .! \\\\\n\\verb!3  |  .  .  .  +--------+! \\\\\n\\verb!4  |  .  .  .  |  .  .  |! \\\\\n\\verb!5  +-----------+  #  .  |! \\\\\n\\verb!6  #  .  .  .  .  .  .  |! \\\\\n\\verb!7  +------------------  |! \\\\\n\\verb!8  +--------------------+! \\\\\n\\end{aligned}\\quad}$$\n\n题目翻译来自NOCOW。\n\nUSACO Training Section 5.2\n\n[本题疑似有误，不保证存在可以通过任意符合要求的输入数据的程序](https://www.luogu.com.cn/discuss/1072919)。如果您认为您的做法可以通过任意符合要求的输入数据，欢迎联系管理员。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO5.2] Snail Trails", "background": "", "description": "Sally Snail likes to wander on an $N \\times N$ board ($1<n \\le 120$).\n\nShe always starts in the upper-left corner. The board has empty cells (denoted by \\verb!.!) and $B$ obstacles (denoted by \\verb!#!).\n\nHere is an example board in this notation:\n\n$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S  .  .  .  .  .  #  .! \\\\\n\\verb!2  .  .  .  .  #  .  .  .! \\\\\n\\verb!3  .  .  .  .  .  .  .  .! \\\\\n\\verb!4  .  .  .  .  .  .  .  .! \\\\\n\\verb!5  .  .  .  .  .  #  .  .! \\\\\n\\verb!6  #  .  .  .  .  .  .  .! \\\\\n\\verb!7  .  .  .  .  .  .  .  .! \\\\\n\\verb!8  .  .  .  .  .  .  .  .! \\\\\n\\end{aligned}\\quad}$$\n\nSally always moves vertically (up or down) or horizontally (left or right). From the starting cell (always denoted as $\\tt A1$), she may move either down or right. Once Sally chooses a direction, she continues in that direction. If she encounters the edge of the board or an obstacle, she stops and turns $90$ degrees. She cannot leave the board or enter an obstacle. Also, Sally never crosses a cell she has already visited. When she can no longer move, she stops.\n\nHere is a trace of one walk on the board above:\n\n$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S--------------+  #  .! \\\\\n\\verb!2  .  .  .  .  #  |  .  .! \\\\\n\\verb!3  .  .  .  .  .  |  .  .! \\\\\n\\verb!4  .  .  .  .  .  +-----+! \\\\\n\\verb!5  .  .  .  .  .  #  .  |! \\\\\n\\verb!6  #  .  .  .  .  .  .  |! \\\\\n\\verb!7  +-----------------+  |! \\\\\n\\verb!8  +--------------------+! \\\\\n\\end{aligned}\\quad}$$\n\nShe goes right, then down, right, down, then left, up, and finally right. At that point she encounters a cell she has already visited, so she stops. However, if after hitting the obstacle at $\\tt F5$ she had chosen the other way — namely, turned to what looks like the left to us — the result would be different.\n\nYour task is to compute and output the maximum number of cells Sally can visit if she chooses her path optimally.", "inputFormat": "The first line contains $N$ — the size of the board, and $B$ — the number of obstacles ($1 \\le B \\le 200$). The next $B$ lines contain the positions of the obstacles. The sample input below corresponds to the example board above. The sample output below shows the answer to that instance. Note that when $N > 26$, the input file cannot denote obstacles beyond column Z. (You do not need to worry specifically about this — just continue from the ASCII code of A; whatever letters come next are fine.)", "outputFormat": "Output a single line with the maximum number of cells Sally can visit.", "hint": "$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S  .  .  .  .  .  #  .! \\\\\n\\verb!2  |  .  .  .  #  .  .  .! \\\\\n\\verb!3  |  .  .  .  +--------+! \\\\\n\\verb!4  |  .  .  .  |  .  .  |! \\\\\n\\verb!5  +-----------+  #  .  |! \\\\\n\\verb!6  #  .  .  .  .  .  .  |! \\\\\n\\verb!7  +------------------  |! \\\\\n\\verb!8  +--------------------+! \\\\\n\\end{aligned}\\quad}$$\n\nTranslation from NOCOW.\n\nUSACO Training Section 5.2.\n\n[This problem may contain issues; we do not guarantee that there exists a program that can pass all inputs that meet the requirements.](https://www.luogu.com.cn/discuss/1072919) If you believe your solution can pass all valid inputs, feel free to contact the administrators.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO5.2] 蜗牛的旅行Snail Trails", "background": "", "description": "萨丽·斯内尔（Sally Snail，蜗牛）喜欢在 $N\\times N$ 的棋盘上闲逛（$1<n \\le 120$）。\n\n她总是从棋盘的左上角出发。棋盘上有空的格子（用 $\\verb!.!$ 来表示）和 $B$ 个路障（用 $\\verb!#!$ 来表示）。\n\n下面是这种表示法的示例棋盘：\n\n$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S  .  .  .  .  .  #  .! \\\\\n\\verb!2  .  .  .  .  #  .  .  .! \\\\\n\\verb!3  .  .  .  .  .  .  .  .! \\\\\n\\verb!4  .  .  .  .  .  .  .  .! \\\\\n\\verb!5  .  .  .  .  .  #  .  .! \\\\\n\\verb!6  #  .  .  .  .  .  .  .! \\\\\n\\verb!7  .  .  .  .  .  .  .  .! \\\\\n\\verb!8  .  .  .  .  .  .  .  .! \\\\\n\\end{aligned}\\quad}$$\n\n萨丽总是垂直（向上或者向下）或水平（向左或者向右）地走。她可以从出发地（总是记作 $\\tt A1$）向下或者向右走。一旦萨丽选定了一个方向，她就会一直走下去。如果她遇到棋盘边缘或者路障，她就停下来，并且转过 $90$ 度。她不可能离开棋盘，或者走进路障当中。并且，萨丽从不跨过她已经经过的格子。当她再也不能走的时候，她就停止散步。\n\n这里是上面的棋盘上的一次散步路线图示：\n\n$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S--------------+  #  .! \\\\\n\\verb!2  .  .  .  .  #  |  .  .! \\\\\n\\verb!3  .  .  .  .  .  |  .  .! \\\\\n\\verb!4  .  .  .  .  .  +-----+! \\\\\n\\verb!5  .  .  .  .  .  #  .  |! \\\\\n\\verb!6  #  .  .  .  .  .  .  |! \\\\\n\\verb!7  +-----------------+  |! \\\\\n\\verb!8  +--------------------+! \\\\\n\\end{aligned}\\quad}$$\n \n萨丽向右走，再向下，向右，向下，然后向左，再向上，最后向右走。这时她遇到了一个她已经走过的格子，她就停下来了。但是，如果她在 $\\tt F5$ 格遇到路障后选择另外一条路——向我们看来是左边的方向转弯，情况就不一样了。\n\n你的任务是计算并输出，如果萨丽聪明地选择她的路线的话，她所能够经过的最多格子数。\n", "inputFormat": "输入的第一行包括 $N$ —棋盘的大小，和 $B$ —路障的数量（$1 \\le B \\le 200$）。接下来的 $B$ 行包含着路障的位置信息。下面的样例输入对应着上面的示例棋盘。下面的输出文件表示问题的解答。注意，当 $N>26$ 时，输入文件就不能表示 $\\tt Z$ 列以后的路障了。（这句话不用专门理他。其实就是从 $A$ 的 ASCII 码开始向后顺延，不管是什么字母就行了）", "outputFormat": "输出文件应该只由一行组成，即萨丽能够经过的最多格子数。\n", "hint": "$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S  .  .  .  .  .  #  .! \\\\\n\\verb!2  |  .  .  .  #  .  .  .! \\\\\n\\verb!3  |  .  .  .  +--------+! \\\\\n\\verb!4  |  .  .  .  |  .  .  |! \\\\\n\\verb!5  +-----------+  #  .  |! \\\\\n\\verb!6  #  .  .  .  .  .  .  |! \\\\\n\\verb!7  +------------------  |! \\\\\n\\verb!8  +--------------------+! \\\\\n\\end{aligned}\\quad}$$\n\n题目翻译来自NOCOW。\n\nUSACO Training Section 5.2\n\n[本题疑似有误，不保证存在可以通过任意符合要求的输入数据的程序](https://www.luogu.com.cn/discuss/1072919)。如果您认为您的做法可以通过任意符合要求的输入数据，欢迎联系管理员。", "locale": "zh-CN"}}}
