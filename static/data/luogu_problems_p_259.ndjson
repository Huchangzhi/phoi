{"pid": "P6239", "type": "P", "difficulty": 6, "samples": [["3 4 1", "3"], ["4 3 3", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "各省省选", "江西", "状压 DP"], "title": "[JXOI2012] 奇怪的道路", "background": "", "description": "小宇从历史书上了解到一个古老的文明。这个文明在各个方面高度发达，交通方面也不例外。考古学家已经知道，这个文明在全盛时期有 $n$ 座城市，编号为 $1,2,...,n$。$m$ 条道路连接在这些城市之间，每条道路将两个城市连接起来，使得两地的居民可以方便地来往。一对城市之间可能存在多条道路。\n\n据史料记载，这个文明的交通网络满足两个奇怪的特征。\n\n1. 这个文明崇拜数字 $k$，对于任何一条道路，设它连接的两个城市分别为 $u$ 和 $v$，则必定满足 $1 \\le \\left\\vert {u-v}\\right\\vert \\le k$。\n2. 任何一个城市都与恰好偶数条道路相连（ $0$ 也被认为是偶数）。\n\n不过，由于时间过于久远，具体的交通网络我们已经无法得知了。小宇很好奇这 $n$ 个城市之间究竟有多少种可能的连接方法，于是她向你求助。\n\n两种可能的连接方法不同当且仅当存在一对城市，它们间的道路数在两种方法中不同。\n\n在交通网络中，有可能存在两个城市无法互相到达。\n\n方法数可能很大，你只需要输出方法数模 $10^9 + 7$ 后的结果。", "inputFormat": "输入共一行，有三个整数 $n,m,k$。", "outputFormat": "输出一个整数，表示方案数模 $10^9 + 7$ 后的结果。", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，满足 $1 \\le n,m \\le 30$，$1 \\le k \\le 8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JXOI2012] 奇怪的道路", "background": "", "description": "小宇从历史书上了解到一个古老的文明。这个文明在各个方面高度发达，交通方面也不例外。考古学家已经知道，这个文明在全盛时期有 $n$ 座城市，编号为 $1,2,...,n$。$m$ 条道路连接在这些城市之间，每条道路将两个城市连接起来，使得两地的居民可以方便地来往。一对城市之间可能存在多条道路。\n\n据史料记载，这个文明的交通网络满足两个奇怪的特征。\n\n1. 这个文明崇拜数字 $k$，对于任何一条道路，设它连接的两个城市分别为 $u$ 和 $v$，则必定满足 $1 \\le \\left\\vert {u-v}\\right\\vert \\le k$。\n2. 任何一个城市都与恰好偶数条道路相连（ $0$ 也被认为是偶数）。\n\n不过，由于时间过于久远，具体的交通网络我们已经无法得知了。小宇很好奇这 $n$ 个城市之间究竟有多少种可能的连接方法，于是她向你求助。\n\n两种可能的连接方法不同当且仅当存在一对城市，它们间的道路数在两种方法中不同。\n\n在交通网络中，有可能存在两个城市无法互相到达。\n\n方法数可能很大，你只需要输出方法数模 $10^9 + 7$ 后的结果。", "inputFormat": "输入共一行，有三个整数 $n,m,k$。", "outputFormat": "输出一个整数，表示方案数模 $10^9 + 7$ 后的结果。", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，满足 $1 \\le n,m \\le 30$，$1 \\le k \\le 8$。", "locale": "zh-CN"}}}
{"pid": "P6240", "type": "P", "difficulty": 6, "samples": [["8 5\n10 31 36 30 36 24 29 29\n59 152 284 202 282 156 277 212\n3 5 81\n4 5 75\n7 8 71\n1 3 92\n4 4 95\n", "566\n484\n489\n495\n202"], ["15 10\n5 15 18 15 18 12 14 14 10 15 17 18 9 7 6 \n11 31 26 34 19 17 15 25 11 34 18 26 21 8 11 \n7 15 31\n2 9 67\n8 15 77\n3 13 43\n6 7 98\n2 2 110\n3 13 26\n11 11 84\n7 14 25\n4 6 90", "66\n118\n128\n89\n32\n31\n55\n18\n55\n70"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["O2优化", "分治", "背包 DP"], "title": "好吃的题目", "background": "这是一道好吃的题目。", "description": "有一条小吃街，从左到右依次排列着 $n$ 个商店，从 $1$ 开始标号。\n\n第 $i$ 个商店会只出售一种小吃，热量为 $h_i$，美味度为 $w_i$。\n\n现在有 $m$ 个吃货要来逛街，第 $i$ 个吃货会在 $[l_i,r_i]$ 的商店内寻找小吃，而且为了防止太胖，最多能摄入 $t_i$ 的热量。\n\n小吃吃多了会腻，所以同一个商店的小吃只能吃一次。\n\n现在每个吃货想知道自己最多能得到多少美味度。", "inputFormat": "第一行为两个整数，分别表示 $n,m$。\n\n第二行为 $n$ 个整数，第 $i$ 个整数表示 $h_i$。\n\n第三行为 $n$ 个整数，第 $i$ 个整数表示 $w_i$。\n\n第 $4$ 到第 $(m + 3)$ 行，每行三个整数，第 $(i + 3)$ 行的整数 $l_i, r_i, t_i$ 分别表示第 $i$ 个吃货的参数。\n", "outputFormat": "对于每个吃货，输出一行一个整数，表示最大的美味度和。", "hint": "#### 【样例输入输出解释】\n\n**样例 1 解释**\n\n对于第一组数据的第一个吃货，可以选择第 $3$ 个商店和第 $5$ 个商店。\n\n摄入的热量为 $36+36=72\\leq 81$，获得美味度为 $284+282=566$。\n\n**样例 2 解释**\n\n对于第二组数据的第一个吃货，可以选择第 $10$，第 $13$，第 $15$ 个商店。\n\n摄入的热量为 $15+9+6=30\\leq 31$，获得美味度为 $34+21+11=66$。\n\n---\n\n#### 【数据规模与约定】\n\n- 对于 $30\\%$ 的数据，满足 $n,m\\leq 500$。\n- 对于 $60\\%$ 的数据，满足 $n\\leq 4\\times 10^4$，$m\\leq 5000$。\n- 对于 $100\\%$ 的数据，满足 $1 \\leq n\\leq 4\\times 10^4$，$1 \\leq m\\leq 2\\times 10^5$，$1\\leq l_i\\leq r_i\\leq n$，$1\\leq h_i,t_i\\leq 200$，$1\\leq w_i\\leq 10^7$。\n\n\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "好吃的题目", "background": "这是一道好吃的题目。", "description": "有一条小吃街，从左到右依次排列着 $n$ 个商店，从 $1$ 开始标号。\n\n第 $i$ 个商店会只出售一种小吃，热量为 $h_i$，美味度为 $w_i$。\n\n现在有 $m$ 个吃货要来逛街，第 $i$ 个吃货会在 $[l_i,r_i]$ 的商店内寻找小吃，而且为了防止太胖，最多能摄入 $t_i$ 的热量。\n\n小吃吃多了会腻，所以同一个商店的小吃只能吃一次。\n\n现在每个吃货想知道自己最多能得到多少美味度。", "inputFormat": "第一行为两个整数，分别表示 $n,m$。\n\n第二行为 $n$ 个整数，第 $i$ 个整数表示 $h_i$。\n\n第三行为 $n$ 个整数，第 $i$ 个整数表示 $w_i$。\n\n第 $4$ 到第 $(m + 3)$ 行，每行三个整数，第 $(i + 3)$ 行的整数 $l_i, r_i, t_i$ 分别表示第 $i$ 个吃货的参数。\n", "outputFormat": "对于每个吃货，输出一行一个整数，表示最大的美味度和。", "hint": "#### 【样例输入输出解释】\n\n**样例 1 解释**\n\n对于第一组数据的第一个吃货，可以选择第 $3$ 个商店和第 $5$ 个商店。\n\n摄入的热量为 $36+36=72\\leq 81$，获得美味度为 $284+282=566$。\n\n**样例 2 解释**\n\n对于第二组数据的第一个吃货，可以选择第 $10$，第 $13$，第 $15$ 个商店。\n\n摄入的热量为 $15+9+6=30\\leq 31$，获得美味度为 $34+21+11=66$。\n\n---\n\n#### 【数据规模与约定】\n\n- 对于 $30\\%$ 的数据，满足 $n,m\\leq 500$。\n- 对于 $60\\%$ 的数据，满足 $n\\leq 4\\times 10^4$，$m\\leq 5000$。\n- 对于 $100\\%$ 的数据，满足 $1 \\leq n\\leq 4\\times 10^4$，$1 \\leq m\\leq 2\\times 10^5$，$1\\leq l_i\\leq r_i\\leq n$，$1\\leq h_i,t_i\\leq 200$，$1\\leq w_i\\leq 10^7$。\n\n\n\n\n", "locale": "zh-CN"}}}
{"pid": "P6241", "type": "P", "difficulty": 5, "samples": [["3\n2\n3\n7", "2\n1 1\n1 2\n3\n1 1\n2 2\n1 3\n4\n1 1\n1 2\n2 3\n1 4​"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400]}, "tags": ["2019", "Special Judge", "eJOI（欧洲）", "构造"], "title": "[eJOI 2019] 塔", "background": "", "description": "Jernej 在晚上感到很无聊，于是他发明了一个游戏。他想要用数字卡片生成一个塔。一开始，他在一张卡片上写下了一个数字 $1$。\n\nJernej 可以再另一张写下一个新的数字并放在塔顶。 **这个新的数字必须等于之前塔中某一连续段的数字之和** 。也就是说，假设现在塔中已有 $n$ 个数字，你可以任意选取塔中的一段 $[l,u]$ ，并对这一段求和，将得到的新数字添加至塔顶，其中 $1\\le l\\le u\\le n$。\n\nJernej 想要生成 $T$ 个塔（相当于多组询问），每个塔顶都是 $T$ 个可能不同的他想要的数字。你需要帮助他求出生成这些塔的最小步数及其方案。", "inputFormat": "第一行：一个整数 $T$，表示塔的个数；\n\n接下来 $T$ 行，一行一个整数 $q$，表示现在 Jernej 想生成一个塔顶数字为 $q$ 的塔。\n\n保证有解。", "outputFormat": "对于每个询问 $q$：\n\n- 输出一行，包含一个整数 $s$ （$0\\le s\\le 10^3$），表示最小步数。\n- 接下来 $s$ 行，每行两个由空格隔开的整数 $l,u$，表示建生成塔的方案（操作时间早的先输出）。", "hint": "#### 【Special Judge 计分标准】\n\n本题共 $10$ 个测试点。对于每个测试点，计分规则如下：\n\n- 对于测试点中的任意一个塔，如果你的程序输出的 **最小步数** 与标准答案 **均一致** ，那么这个测试点你会得到 $10$ 分。\n- 对于测试点中的任意一个塔，如果你的程序输出的答案是错误的，那么得 $0$ 分（评测时如果发现输出不完全可能会得到 UKE）。\n- 如果你的答案并 **不是最优解但不是错误的** ，那么对于该测试点中的第 $i$ 个塔，你得到的分数为 $\\text{score}_i =1+\\dfrac{\\text{minimum steps}}{\\text{solution steps}}\\times 7$，其中 $\\text{minimum steps}$ 表示正确答案的最小步数，$\\text{solution steps}$ 表示你的程序输出的答案。最终这个测试点的得分为 $\\min\\limits_{i\\in [1,T]} \\{\\text{score}_i\\}$。向上取两位小数。\n\n#### 【输入输出样例解释】\n\n**询问 1 解释**：\n\n- Jernej 想要生成造一个塔顶数为 $2$ 的塔。起初塔为 $\\{1\\}$（左边表示塔底，右边表示塔顶）；\n- 第一步，选取子段 $[1,1]$，对 $\\{1\\}$ 中的所有元素求和，得到 $1$，现在塔为 $\\{1,1\\}$；\n- 第二步，选取子段 $[1,2]$，对 $\\{1,1\\}$ 中的所有元素求和，得到 $2$，现在塔为 $\\{1,1,2\\}$。此时已经达到了询问的要求。\n\n**询问 2 解释**：\n\n- 要生成塔顶为 $3$ 的塔不止一种方法。除了样例输出的一种之外，下面的也是正确答案：\n\n```plain\n1 1\n1 2\n2 3\n```\n\n#### 【数据规模与约定】\n\n**本题采用多测试点捆绑测试，共有 7 个子任务**。\n\n- Subtask 1（1 test case - 10 points）：$T\\le 10,q\\le 10$。\n- Subtask 2（1 test case - 10 points）：$T\\le 20,q\\le 20$。\n- Subtask 3（1 test case - 10 points）：$T= 100,q\\le 100$。\n- Subtask 4（1 test case - 10 points）：$T= 10^3,q\\le 10^4$。\n- Subtask 5（1 test case - 10 points）：$T= 10^3,q\\le 10^5$。\n- Subtask 6（1 test case - 10 points）：$T= 10^3,q\\le 10^6$。\n- Subtask 7（1 test case - 10 points）：$T= 10^3,q\\le 10^9$。\n- Subtask 8（1 test case - 10 points）：$T= 10^3,q\\le 10^{12}$。\n- Subtask 9（2 test case - 20 points）：无其他限制。\n\n对于所有数据，保证 $1\\le T\\le 10^3,1\\le q\\le 10^{18}$\n\n#### 【说明】\n\n原题来自：[eJOI2019](https://www.ejoi2019.si) Problem D. [Tower](https://www.ejoi2019.si/static/media/uploads/tasks/tower-isc.pdf)。\n\n翻译提供：@[```_Wallace_```](https://www.luogu.com.cn/user/61430)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2019] 塔", "background": "", "description": "Jernej 在晚上感到很无聊，于是他发明了一个游戏。他想要用数字卡片生成一个塔。一开始，他在一张卡片上写下了一个数字 $1$。\n\nJernej 可以再另一张写下一个新的数字并放在塔顶。 **这个新的数字必须等于之前塔中某一连续段的数字之和** 。也就是说，假设现在塔中已有 $n$ 个数字，你可以任意选取塔中的一段 $[l,u]$ ，并对这一段求和，将得到的新数字添加至塔顶，其中 $1\\le l\\le u\\le n$。\n\nJernej 想要生成 $T$ 个塔（相当于多组询问），每个塔顶都是 $T$ 个可能不同的他想要的数字。你需要帮助他求出生成这些塔的最小步数及其方案。", "inputFormat": "第一行：一个整数 $T$，表示塔的个数；\n\n接下来 $T$ 行，一行一个整数 $q$，表示现在 Jernej 想生成一个塔顶数字为 $q$ 的塔。\n\n保证有解。", "outputFormat": "对于每个询问 $q$：\n\n- 输出一行，包含一个整数 $s$ （$0\\le s\\le 10^3$），表示最小步数。\n- 接下来 $s$ 行，每行两个由空格隔开的整数 $l,u$，表示建生成塔的方案（操作时间早的先输出）。", "hint": "#### 【Special Judge 计分标准】\n\n本题共 $10$ 个测试点。对于每个测试点，计分规则如下：\n\n- 对于测试点中的任意一个塔，如果你的程序输出的 **最小步数** 与标准答案 **均一致** ，那么这个测试点你会得到 $10$ 分。\n- 对于测试点中的任意一个塔，如果你的程序输出的答案是错误的，那么得 $0$ 分（评测时如果发现输出不完全可能会得到 UKE）。\n- 如果你的答案并 **不是最优解但不是错误的** ，那么对于该测试点中的第 $i$ 个塔，你得到的分数为 $\\text{score}_i =1+\\dfrac{\\text{minimum steps}}{\\text{solution steps}}\\times 7$，其中 $\\text{minimum steps}$ 表示正确答案的最小步数，$\\text{solution steps}$ 表示你的程序输出的答案。最终这个测试点的得分为 $\\min\\limits_{i\\in [1,T]} \\{\\text{score}_i\\}$。向上取两位小数。\n\n#### 【输入输出样例解释】\n\n**询问 1 解释**：\n\n- Jernej 想要生成造一个塔顶数为 $2$ 的塔。起初塔为 $\\{1\\}$（左边表示塔底，右边表示塔顶）；\n- 第一步，选取子段 $[1,1]$，对 $\\{1\\}$ 中的所有元素求和，得到 $1$，现在塔为 $\\{1,1\\}$；\n- 第二步，选取子段 $[1,2]$，对 $\\{1,1\\}$ 中的所有元素求和，得到 $2$，现在塔为 $\\{1,1,2\\}$。此时已经达到了询问的要求。\n\n**询问 2 解释**：\n\n- 要生成塔顶为 $3$ 的塔不止一种方法。除了样例输出的一种之外，下面的也是正确答案：\n\n```plain\n1 1\n1 2\n2 3\n```\n\n#### 【数据规模与约定】\n\n**本题采用多测试点捆绑测试，共有 7 个子任务**。\n\n- Subtask 1（1 test case - 10 points）：$T\\le 10,q\\le 10$。\n- Subtask 2（1 test case - 10 points）：$T\\le 20,q\\le 20$。\n- Subtask 3（1 test case - 10 points）：$T= 100,q\\le 100$。\n- Subtask 4（1 test case - 10 points）：$T= 10^3,q\\le 10^4$。\n- Subtask 5（1 test case - 10 points）：$T= 10^3,q\\le 10^5$。\n- Subtask 6（1 test case - 10 points）：$T= 10^3,q\\le 10^6$。\n- Subtask 7（1 test case - 10 points）：$T= 10^3,q\\le 10^9$。\n- Subtask 8（1 test case - 10 points）：$T= 10^3,q\\le 10^{12}$。\n- Subtask 9（2 test case - 20 points）：无其他限制。\n\n对于所有数据，保证 $1\\le T\\le 10^3,1\\le q\\le 10^{18}$\n\n#### 【说明】\n\n原题来自：[eJOI2019](https://www.ejoi2019.si) Problem D. [Tower](https://www.ejoi2019.si/static/media/uploads/tasks/tower-isc.pdf)。\n\n翻译提供：@[```_Wallace_```](https://www.luogu.com.cn/user/61430)", "locale": "zh-CN"}}}
{"pid": "P6242", "type": "P", "difficulty": 6, "samples": [["5 6\n1 2 3 4 5\n3 2 5\n1 1 3 3\n4 2 4\n2 3 4 1\n5 1 5\n3 1 4\n", "14\n6\n6\n11\n"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["线段树", "O2优化", "吉司机线段树 segment tree beats", "模板题"], "title": "【模板】线段树 3（区间最值操作、区间历史最值）", "background": "本题是线段树维护区间最值操作与区间历史最值的模板。", "description": "给出一个长度为 $n$ 的数列 $A$，同时定义一个辅助数组 $B$，$B$ 开始与 $A$ 完全相同。接下来进行了 $m$ 次操作，操作有五种类型，按以下格式给出：\n\n- `1 l r k`：对于所有的 $i\\in[l,r]$，将 $A_i$ 加上 $k$（$k$ 可以为负数）。\n- `2 l r v`：对于所有的 $i\\in[l,r]$，将 $A_i$ 变成 $\\min(A_i,v)$。\n- `3 l r`：求 $\\sum_{i=l}^{r}A_i$。\n- `4 l r`：对于所有的 $i\\in[l,r]$，求 $A_i$ 的最大值。\n- `5 l r`：对于所有的 $i\\in[l,r]$，求 $B_i$ 的最大值。\n\n在每一次操作后，我们都进行一次更新，让 $B_i\\gets\\max(B_i,A_i)$。\n", "inputFormat": "第一行包含两个正整数 $n,m$，分别表示数列 $A$ 的长度和操作次数。\n\n第二行包含 $n$ 个整数 $A_1,A_2,\\cdots,A_n$，表示数列 $A$。\n\n接下来 $m$ 行，每行行首有一个整数 $op$，表示操作类型；接下来两个或三个整数表示操作参数，格式见【题目描述】。\n", "outputFormat": "对于 $op\\in\\{3,4,5\\}$ 的操作，输出一行包含一个整数，表示这个询问的答案。\n", "hint": "#### 样例说明 \\#1 ####\n\n| 操作次数 | 输入内容 | 操作 | 数列 | 输出结果 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 0 |  |  | $1,2,3,4,5$ |  |\n| 1 | `3 2 5` | 求出 $[2,5]$ 所有数的和 | $1,2,3,4,5$ | `14` |\n| 2 | `1 1 3 3` | 将 $[1,3]$ 内所有数加 $3$ | $4,5,6,4,5$ |  |\n| 3 | `4 2 4` | 求出 $[2,4]$ 所有数的最大值 | $4,5,6,4,5$ | `6` |\n| 4 | `2 3 4 1` | 将 $[3,4]$ 所有数与 $1$ 取最小值 | $4,5,1,1,5$ |  |\n| 5 | `5 1 5` | 求出 $[1,5]$ 所有位置历史最大值的最大值 | $4,5,1,1,5$ | `6` |\n| 6 | `3 1 4` | 求出 $[1,4]$ 所有数的和 | $4,5,1,1,5$ | `11` |\n\n#### 数据规模与约定\n\n- 对于测试点 $1,2$，满足 $n,m\\leq 5000$；\n- 对于测试点 $3,4$，满足 $op\\in\\{1,2,3,4\\}$；\n- 对于测试点 $5,6$，满足 $op\\in\\{1,3,4,5\\}$；\n- 对于全部测试数据，保证 $1\\leq n,m\\leq 5\\times 10^5$，$-5\\times10^8\\leq A_i\\leq 5\\times10^8$，$op\\in[1,5]$，$1 \\leq l\\leq r \\leq n$，$-2000\\leq k\\leq 2000$，$-5\\times10^8\\leq v\\leq 5\\times10^8$。\n\n#### 提示 ####\n\n本题输入量较大，请使用合理高效的读入方法。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】线段树 3（区间最值操作、区间历史最值）", "background": "本题是线段树维护区间最值操作与区间历史最值的模板。", "description": "给出一个长度为 $n$ 的数列 $A$，同时定义一个辅助数组 $B$，$B$ 开始与 $A$ 完全相同。接下来进行了 $m$ 次操作，操作有五种类型，按以下格式给出：\n\n- `1 l r k`：对于所有的 $i\\in[l,r]$，将 $A_i$ 加上 $k$（$k$ 可以为负数）。\n- `2 l r v`：对于所有的 $i\\in[l,r]$，将 $A_i$ 变成 $\\min(A_i,v)$。\n- `3 l r`：求 $\\sum_{i=l}^{r}A_i$。\n- `4 l r`：对于所有的 $i\\in[l,r]$，求 $A_i$ 的最大值。\n- `5 l r`：对于所有的 $i\\in[l,r]$，求 $B_i$ 的最大值。\n\n在每一次操作后，我们都进行一次更新，让 $B_i\\gets\\max(B_i,A_i)$。\n", "inputFormat": "第一行包含两个正整数 $n,m$，分别表示数列 $A$ 的长度和操作次数。\n\n第二行包含 $n$ 个整数 $A_1,A_2,\\cdots,A_n$，表示数列 $A$。\n\n接下来 $m$ 行，每行行首有一个整数 $op$，表示操作类型；接下来两个或三个整数表示操作参数，格式见【题目描述】。\n", "outputFormat": "对于 $op\\in\\{3,4,5\\}$ 的操作，输出一行包含一个整数，表示这个询问的答案。\n", "hint": "#### 样例说明 \\#1 ####\n\n| 操作次数 | 输入内容 | 操作 | 数列 | 输出结果 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 0 |  |  | $1,2,3,4,5$ |  |\n| 1 | `3 2 5` | 求出 $[2,5]$ 所有数的和 | $1,2,3,4,5$ | `14` |\n| 2 | `1 1 3 3` | 将 $[1,3]$ 内所有数加 $3$ | $4,5,6,4,5$ |  |\n| 3 | `4 2 4` | 求出 $[2,4]$ 所有数的最大值 | $4,5,6,4,5$ | `6` |\n| 4 | `2 3 4 1` | 将 $[3,4]$ 所有数与 $1$ 取最小值 | $4,5,1,1,5$ |  |\n| 5 | `5 1 5` | 求出 $[1,5]$ 所有位置历史最大值的最大值 | $4,5,1,1,5$ | `6` |\n| 6 | `3 1 4` | 求出 $[1,4]$ 所有数的和 | $4,5,1,1,5$ | `11` |\n\n#### 数据规模与约定\n\n- 对于测试点 $1,2$，满足 $n,m\\leq 5000$；\n- 对于测试点 $3,4$，满足 $op\\in\\{1,2,3,4\\}$；\n- 对于测试点 $5,6$，满足 $op\\in\\{1,3,4,5\\}$；\n- 对于全部测试数据，保证 $1\\leq n,m\\leq 5\\times 10^5$，$-5\\times10^8\\leq A_i\\leq 5\\times10^8$，$op\\in[1,5]$，$1 \\leq l\\leq r \\leq n$，$-2000\\leq k\\leq 2000$，$-5\\times10^8\\leq v\\leq 5\\times10^8$。\n\n#### 提示 ####\n\n本题输入量较大，请使用合理高效的读入方法。\n", "locale": "zh-CN"}}}
{"pid": "P6243", "type": "P", "difficulty": 6, "samples": [["3\n2 2\n7 4\n3 5", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2006", "USACO"], "title": "[USACO06OPEN] The Milk Queue G", "background": "题目是经过简写保证不改变原有题意的题目。", "description": "每早，FJ 的 $N$ 头奶牛都排成一列挤奶．一个个进到仓库，为提高速率，FJ 把整个挤奶过程划分成两道工序，FJ负责实行第一道，第二道由 Rob 完成。\n\n如果某头牛先于另一头牛开始进行第一道工序，那么她同样先开始第二道工序。\n\nFJ 发现，如果奶牛们按某种顺序排队进行挤奶，那么可能会在排队等待上多花很多的时间。比如，如果 FJ 要花很长时间才能完成某头奶牛的第一道工序，那么 Rob 就会浪费一段时间。反之如果 FJ 的工作完成得太快，Rob 面前会有很多奶牛排起长队。\n\n请你计算按最优方式排队后最少需要多少时间才能挤完奶。对于每头奶牛，数据提供第一道工序的时间 $A_i$ 和第二道工序的时间 $B_i$。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行两个整数表示第 $i$ 头牛的 $A_i$，$B_i$ 值。", "outputFormat": "输出按最优方案排队后挤奶所需的最短时间。", "hint": "#### 样例说明\n\n把奶牛们按照 3，1，2  的顺序排队，这样挤奶总共花费 16 个单位时间．\n\n$1\\le N\\le 25000$\n\n$1\\le A_i,B_i\\le 2\\times 10^4$\n\n2025-06-03: 增加了一组 hack 数据", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO06OPEN] The Milk Queue G", "background": "题目是经过简写保证不改变原有题意的题目。", "description": "每早，FJ 的 $N$ 头奶牛都排成一列挤奶．一个个进到仓库，为提高速率，FJ 把整个挤奶过程划分成两道工序，FJ负责实行第一道，第二道由 Rob 完成。\n\n如果某头牛先于另一头牛开始进行第一道工序，那么她同样先开始第二道工序。\n\nFJ 发现，如果奶牛们按某种顺序排队进行挤奶，那么可能会在排队等待上多花很多的时间。比如，如果 FJ 要花很长时间才能完成某头奶牛的第一道工序，那么 Rob 就会浪费一段时间。反之如果 FJ 的工作完成得太快，Rob 面前会有很多奶牛排起长队。\n\n请你计算按最优方式排队后最少需要多少时间才能挤完奶。对于每头奶牛，数据提供第一道工序的时间 $A_i$ 和第二道工序的时间 $B_i$。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行两个整数表示第 $i$ 头牛的 $A_i$，$B_i$ 值。", "outputFormat": "输出按最优方案排队后挤奶所需的最短时间。", "hint": "#### 样例说明\n\n把奶牛们按照 3，1，2  的顺序排队，这样挤奶总共花费 16 个单位时间．\n\n$1\\le N\\le 25000$\n\n$1\\le A_i,B_i\\le 2\\times 10^4$\n\n2025-06-03: 增加了一组 hack 数据", "locale": "zh-CN"}}}
{"pid": "P6244", "type": "P", "difficulty": 2, "samples": [["7\n1 6\n8 6\n14 5\n19 2\n1 8\n18 3\n10 6", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2006", "USACO"], "title": "[USACO06OPEN] County Fair Events S", "background": "题目是经过简写保证不改变原有题意的题目。", "description": "FJ 参加活动。 \n\n他想参加尽可能多的 $N$ 个活动，参加完某个之后可以立刻参加下一个。 \n\n给定 FJ 可参加的活动列表、其开始时间 $T$ 和持续时间 $L$ ，求 FJ 可以参加的最大活动数。 \n\nFJ 每个活动都不会提早离开。", "inputFormat": "第一行有一个整数 $N$。\n\n第二到 $N+1$ 行：每行包含两个用空格分隔的整数 $T$ 和 $L$ ，意义如上述。", "outputFormat": "输出仅一行，FJ 最多能参加几个活动。", "hint": "$1\\le T,L\\le 10^5$\n\n$1\\le N\\le 10^4$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO06OPEN] County Fair Events S", "background": "题目是经过简写保证不改变原有题意的题目。", "description": "FJ 参加活动。 \n\n他想参加尽可能多的 $N$ 个活动，参加完某个之后可以立刻参加下一个。 \n\n给定 FJ 可参加的活动列表、其开始时间 $T$ 和持续时间 $L$ ，求 FJ 可以参加的最大活动数。 \n\nFJ 每个活动都不会提早离开。", "inputFormat": "第一行有一个整数 $N$。\n\n第二到 $N+1$ 行：每行包含两个用空格分隔的整数 $T$ 和 $L$ ，意义如上述。", "outputFormat": "输出仅一行，FJ 最多能参加几个活动。", "hint": "$1\\le T,L\\le 10^5$\n\n$1\\le N\\le 10^4$", "locale": "zh-CN"}}}
{"pid": "P6245", "type": "P", "difficulty": 3, "samples": [["3000 5\n600 800\n1600 1800\n100 1300\n300 2100\n1600 2300", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "USACO"], "title": "[USACO06OPEN] The Climbing Wall S", "background": "题目是经过简写保证不改变原有题意的题目。", "description": "Bessie 要爬墙，墙宽 $30000$ ，高 $H$，墙上有 $F$ 个不同的落脚点 $(X,Y)$。\n\n$(0,0)$ 在左下角的地面。任意落脚点至少相距 $300$。至少有一条路可以上去，Bessie 每次最多爬 $1000$ 个单位距离，且可以向任意方向爬行。\n\n一旦她到达了一个高度距离 $H$ 不到 $1000$ 的落脚点，可以直接到墙顶。Bessie 的起点可以在任一高度不超过 $1000$ 的落脚点上。问Bessi爬到顶端的最少次数。\n\n本题距离指**欧几里得距离**。", "inputFormat": "第一行有两个以空格分隔的整数 $H$ 和 $F$ 。\n\n第二到 $F+1$ 行，每行是落脚点的坐标 $(X,Y)$，$X$ 是距攀岩墙左边的距离，$Y$ 是离地面的距离。", "outputFormat": "输出仅一个整数，Bessie 到达攀岩墙顶部所需的最少步数。", "hint": "#### 样例说明\n\n分别经过 $(600,800),(100,1300),(300,2100)$。\n\n$1001\\le H\\le 3\\times 10^4$\n\n$1\\le F\\le 10^4$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO06OPEN] The Climbing Wall S", "background": "题目是经过简写保证不改变原有题意的题目。", "description": "Bessie 要爬墙，墙宽 $30000$ ，高 $H$，墙上有 $F$ 个不同的落脚点 $(X,Y)$。\n\n$(0,0)$ 在左下角的地面。任意落脚点至少相距 $300$。至少有一条路可以上去，Bessie 每次最多爬 $1000$ 个单位距离，且可以向任意方向爬行。\n\n一旦她到达了一个高度距离 $H$ 不到 $1000$ 的落脚点，可以直接到墙顶。Bessie 的起点可以在任一高度不超过 $1000$ 的落脚点上。问Bessi爬到顶端的最少次数。\n\n本题距离指**欧几里得距离**。", "inputFormat": "第一行有两个以空格分隔的整数 $H$ 和 $F$ 。\n\n第二到 $F+1$ 行，每行是落脚点的坐标 $(X,Y)$，$X$ 是距攀岩墙左边的距离，$Y$ 是离地面的距离。", "outputFormat": "输出仅一个整数，Bessie 到达攀岩墙顶部所需的最少步数。", "hint": "#### 样例说明\n\n分别经过 $(600,800),(100,1300),(300,2100)$。\n\n$1001\\le H\\le 3\\times 10^4$\n\n$1\\le F\\le 10^4$", "locale": "zh-CN"}}}
{"pid": "P6246", "type": "P", "difficulty": 7, "samples": [["5 2\n0 1 2 3 4", "3"]], "limits": {"time": [2000, 3000, 4000, 6000, 6000], "memory": [256000, 256000, 256000, 256000, 256000]}, "tags": ["2000", "二分", "IOI", "O2优化", "斜率优化", "凸完全单调性（wqs 二分）", "栈", "队列"], "title": "[IOI 2000] 邮局 加强版 加强版", "background": "> 看到你时总是感觉清风徐徐,\n>\n> 本以为和你相识不会是偶遇,\n>\n> 奈何你犹如过客、化作秋雨,  \n>\n> 只是经过我生命的一瓢柳絮,\n>\n> 从不会真正有童话似的结局.\n>\n> 我静静地写尽这些躁言丑句,\n> \n> 本以为可以稍稍地缓解抑郁.\n>\n> 却是徒增一场悲伤的脑补剧.\n>\n> 你问我为什么说这么多?\n>\n> 因为这题是加强版的 [IOI2000]邮局.", "description": "高速公路旁边有 $n$ 个村庄。高速公路表示为整数轴，每个村庄的位置用单个整数坐标表示。两个位置之间的距离是其整数坐标差的绝对值。\n\n现在要建立  $m$ 个邮局，邮局将建在一些，但不一定是所有的村庄中。为了建立邮局，应选择他们建造的位置，使每个村庄与其最近的邮局之间的距离总和最小。\n\n你要编写一个程序，已知村庄的位置和邮局的数量，计算每个村庄和最近的邮局之间所有距离的最小可能的总和。", "inputFormat": "第一行包含两个整数，分别表示村庄的数量 $n$ 和邮局的数量 $m$。\n\n第二行共 $n$ 个整数，表示每个村庄的坐标，第 $i$ 个整数表示第 $i$ 个村庄的坐标 $a_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n本题共五个测试点，各测试点信息如下：\n\n| 测试点编号 | $n = $ | $a_i \\leq $ |\n| :----------: | :-------: | :----: |\n| 1 | $50000$ | $6 \\times 10^4$ |\n| 2 | $150000$ | $2 \\times 10^5$ |\n| 3 | $299998$ | $5 \\times 10^5$ |\n| 4 | $499998$ | $10^6$ |\n| 5 | $499999$ | $2\\times 10^6$ |\n\n对于全部的测试点，保证 $1 \\leq m \\leq n \\leq 5 \\times 10^5$，$0 \\leq a_i \\leq 2\\times 10^6$，且 $a_i$ 的值在对应范围内均匀随机。\n\n保证最终答案不超过 $10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2000] 邮局 加强版 加强版", "background": "> 看到你时总是感觉清风徐徐,\n>\n> 本以为和你相识不会是偶遇,\n>\n> 奈何你犹如过客、化作秋雨,  \n>\n> 只是经过我生命的一瓢柳絮,\n>\n> 从不会真正有童话似的结局.\n>\n> 我静静地写尽这些躁言丑句,\n> \n> 本以为可以稍稍地缓解抑郁.\n>\n> 却是徒增一场悲伤的脑补剧.\n>\n> 你问我为什么说这么多?\n>\n> 因为这题是加强版的 [IOI2000]邮局.", "description": "高速公路旁边有 $n$ 个村庄。高速公路表示为整数轴，每个村庄的位置用单个整数坐标表示。两个位置之间的距离是其整数坐标差的绝对值。\n\n现在要建立  $m$ 个邮局，邮局将建在一些，但不一定是所有的村庄中。为了建立邮局，应选择他们建造的位置，使每个村庄与其最近的邮局之间的距离总和最小。\n\n你要编写一个程序，已知村庄的位置和邮局的数量，计算每个村庄和最近的邮局之间所有距离的最小可能的总和。", "inputFormat": "第一行包含两个整数，分别表示村庄的数量 $n$ 和邮局的数量 $m$。\n\n第二行共 $n$ 个整数，表示每个村庄的坐标，第 $i$ 个整数表示第 $i$ 个村庄的坐标 $a_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n本题共五个测试点，各测试点信息如下：\n\n| 测试点编号 | $n = $ | $a_i \\leq $ |\n| :----------: | :-------: | :----: |\n| 1 | $50000$ | $6 \\times 10^4$ |\n| 2 | $150000$ | $2 \\times 10^5$ |\n| 3 | $299998$ | $5 \\times 10^5$ |\n| 4 | $499998$ | $10^6$ |\n| 5 | $499999$ | $2\\times 10^6$ |\n\n对于全部的测试点，保证 $1 \\leq m \\leq n \\leq 5 \\times 10^5$，$0 \\leq a_i \\leq 2\\times 10^6$，且 $a_i$ 的值在对应范围内均匀随机。\n\n保证最终答案不超过 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P6247", "type": "P", "difficulty": 6, "samples": [["4\n0.0 0.0\n0.0 1.0\n1.0 0.0\n1.0 1.0", "1.00 1.41"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "各省省选", "山东", "Special Judge", "分治", "凸包", "K-D Tree"], "title": "[SDOI2012] 最近最远点对", "background": "", "description": "给定平面直角坐标系上的 $n$ 个点，分别求出距离最近的两个点的距离和距离最远的两个点的距离。注意，距离为直线距离。", "inputFormat": "第一行一个整数，$n$。\n接下来 $n$ 行每行两个非负浮点数，$x_i$,$y_i$，表示第 $i$ 个点的 X 坐标与 Y 坐标。", "outputFormat": "总共一行，两个浮点数，为最短距离与最长距离。误差不超过 $0.01$ 视为正确。", "hint": "- 对于 $30\\%$ 的数据，$n\\leq 2000$；\n- 对于 $70\\%$ 的数据，$n\\leq 20000$；\n- 对于 $100\\%$ 的数据，$0 \\lt n\\leq 10^5$，输入数据中所有数均为不超过 $10^9$ 的非负数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SDOI2012] 最近最远点对", "background": "", "description": "给定平面直角坐标系上的 $n$ 个点，分别求出距离最近的两个点的距离和距离最远的两个点的距离。注意，距离为直线距离。", "inputFormat": "第一行一个整数，$n$。\n接下来 $n$ 行每行两个非负浮点数，$x_i$,$y_i$，表示第 $i$ 个点的 X 坐标与 Y 坐标。", "outputFormat": "总共一行，两个浮点数，为最短距离与最长距离。误差不超过 $0.01$ 视为正确。", "hint": "- 对于 $30\\%$ 的数据，$n\\leq 2000$；\n- 对于 $70\\%$ 的数据，$n\\leq 20000$；\n- 对于 $100\\%$ 的数据，$0 \\lt n\\leq 10^5$，输入数据中所有数均为不超过 $10^9$ 的非负数。", "locale": "zh-CN"}}}
{"pid": "P6248", "type": "P", "difficulty": 3, "samples": [["7 0\nSigma 10\nOrisa 10\nMei 10\nReaper 10\nMoira 10\nLucio 10\nDoomfist 1", "60"], ["8 2\nPharah 5\nMercy 5\nReinhardt 10\nDVA 10\nSOLDIER:76 12\nTorbjorn 5\nAnna 8\nBaptiste 10\nPharah Mercy 20\nAnna Pharah 5", "75"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["枚举", "深度优先搜索 DFS", "进制"], "title": "准备战斗，选择你的英雄", "background": "zjf，被 NOIP 普及组初赛戏耍，pj 1= -> 初赛三等，愤恨地离开了 OI，深陷中考的泥潭当中。据说，他颓废是因为玩多了 [OW](https://ow.blizzard.cn/home) 这款游戏。", "description": "目前，游戏共有 $31$ 个英雄，每局可以派 $6$ 个英雄上场。实际能使用的英雄数将会小于 $31$。简单地假设，每位英雄对团队的贡献可以用一个正整数 $v_i$ 表示。团队的总能力等于所有英雄的贡献之和。特别地，对于 $m$ 组特定的英雄，他们一起出现会让团队总能力提高 $x_i$。\n\n**另注：英雄组合可以重复，若重复请多次计数。**", "inputFormat": "第一行两个整数 $n$，$m$，表示可选英雄个数和特定的组合数。  \n接下来 $n$ 行，每行先给出第 $i$ 个英雄的名字，然后再输入一个整数 $v_i$。  \n接下来 $m$ 行，每行两个字符串 $a$，$b$ 和一个整数 $x_i$，表示若英雄 $a$ 和英雄 $b$ 一起出现时总能力提高 $x_i$。  \n**保证：$a$ 和 $b$ 不是同一个英雄。**\n\n", "outputFormat": "一个整数，表示团队能力值的最大值。", "hint": "#### 样例 1 解释\n我们应该选择前 $6$ 名英雄。\n\n---\n\n#### 样例 2 解释\n我们应该选择 Pharah、Mercy、Reinhardt、DVA、SOLDIER:76、Anna\n\n---\n\n#### 数据范围\n对于 $40\\%$ 的数据，$m=0$。  \n对于 $100\\%$ 的数据，$6\\le n \\le 30$，$0\\le m \\le 30$，*$1\\le x_i,v_i \\le 100$*，英雄名字长度 $\\le 10$，字符集包括大小写字母、数字以及冒号（ `:` ）。每个英雄的名字各不相同。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "准备战斗，选择你的英雄", "background": "zjf，被 NOIP 普及组初赛戏耍，pj 1= -> 初赛三等，愤恨地离开了 OI，深陷中考的泥潭当中。据说，他颓废是因为玩多了 [OW](https://ow.blizzard.cn/home) 这款游戏。", "description": "目前，游戏共有 $31$ 个英雄，每局可以派 $6$ 个英雄上场。实际能使用的英雄数将会小于 $31$。简单地假设，每位英雄对团队的贡献可以用一个正整数 $v_i$ 表示。团队的总能力等于所有英雄的贡献之和。特别地，对于 $m$ 组特定的英雄，他们一起出现会让团队总能力提高 $x_i$。\n\n**另注：英雄组合可以重复，若重复请多次计数。**", "inputFormat": "第一行两个整数 $n$，$m$，表示可选英雄个数和特定的组合数。  \n接下来 $n$ 行，每行先给出第 $i$ 个英雄的名字，然后再输入一个整数 $v_i$。  \n接下来 $m$ 行，每行两个字符串 $a$，$b$ 和一个整数 $x_i$，表示若英雄 $a$ 和英雄 $b$ 一起出现时总能力提高 $x_i$。  \n**保证：$a$ 和 $b$ 不是同一个英雄。**\n\n", "outputFormat": "一个整数，表示团队能力值的最大值。", "hint": "#### 样例 1 解释\n我们应该选择前 $6$ 名英雄。\n\n---\n\n#### 样例 2 解释\n我们应该选择 Pharah、Mercy、Reinhardt、DVA、SOLDIER:76、Anna\n\n---\n\n#### 数据范围\n对于 $40\\%$ 的数据，$m=0$。  \n对于 $100\\%$ 的数据，$6\\le n \\le 30$，$0\\le m \\le 30$，*$1\\le x_i,v_i \\le 100$*，英雄名字长度 $\\le 10$，字符集包括大小写字母、数字以及冒号（ `:` ）。每个英雄的名字各不相同。\n", "locale": "zh-CN"}}}
{"pid": "P6249", "type": "P", "difficulty": 4, "samples": [["5\n-5 1 5\n-3 1 5\n-1 1 5\n1 1 5\n3 2 5\n", "4"], ["5\n-5 2 5\n-3 1 5\n-1 1 5\n1 0 5\n3 4 5\n", "5"], ["5\n1 1 1\n2 1 2\n3 1 3\n4 1 5\n-5 5 5\n", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": [], "title": "神帖", "background": "zrl 的生日在 3.14。出生在神帖迭起的日子，他的快乐自然很多。这不，他又要收取来着神帖的馈赠了。", "description": "神帖分布在讨论区的一些页面上，每个页面最多有一个神帖。假设他正在浏览的页面设为 $0$ 号页面。向左一页为 $-1$ 号页面，向右一页为 $1$ 号页面，以此类推。第 $i$ 个神帖在 $x_i$ 号页面上，并且有特定的封禁的时间 $t_i$ 和快乐值 $v_i$，超过了这个时间 $t_i$ 浏览就不能得到他的快乐值了。zrl 向左或向右翻一页需要 $1$ 单位时间，浏览神帖不需要时间。问：zrl 最多能得到多少快乐值。\n\n注：在 $t_i$ 个单位时间浏览第 $i$ 个神贴仍能得到 $v_i$ 的快乐值。\n\n**另注：每个神帖的快乐值最多只能得到一次。**", "inputFormat": "第一行一个整数 $n$，表示神帖数量。\n\n接下来 $n$ 行，每行三个整数，分别表示第 $i$ 个神帖的 $x_i$，$v_i$，$t_i$。", "outputFormat": "一个整数，为 zrl 能得到的最多的快乐值。", "hint": "#### 样例解释：\n\n样例 1：$0 \\rightarrow -1 \\rightarrow 0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3$  \n样例 2：$0 \\rightarrow -1 \\rightarrow 0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3$  \n样例 3：$0 \\rightarrow -1 \\rightarrow -2 \\rightarrow -3 \\rightarrow -4 \\rightarrow -5$ \n\n---\n\n#### 数据范围：\n\n| 测试点 | 特殊性质 |\n| :-----------: | :-----------: |\n| $1-2$ | $x_i \\ge 0$ |\n| $3-4$ | $0 \\le t_i \\le 20$ |\n| $5-6$ | $n \\le 20$ |\n| $7$ | $-10 \\le x_i \\le 10$ |\n| $8-9$ | $t_i=$\\|$x_i$\\| |\n| $10-13$ | 所有 $t_i$ 均相等 |\n| $14-17$ | $n \\le 60$ |\n| $17-22$ | 无 |\n\n对于 $100\\%$ 的数据，$n \\le 200$，$-500 \\le x_i \\le 500$，$0 \\le v_i \\le 10^9$，$0\\le t_i \\le 500$。\n\nHint：新增两组 Hack 数据，贪心/模拟已经过不去了。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "神帖", "background": "zrl 的生日在 3.14。出生在神帖迭起的日子，他的快乐自然很多。这不，他又要收取来着神帖的馈赠了。", "description": "神帖分布在讨论区的一些页面上，每个页面最多有一个神帖。假设他正在浏览的页面设为 $0$ 号页面。向左一页为 $-1$ 号页面，向右一页为 $1$ 号页面，以此类推。第 $i$ 个神帖在 $x_i$ 号页面上，并且有特定的封禁的时间 $t_i$ 和快乐值 $v_i$，超过了这个时间 $t_i$ 浏览就不能得到他的快乐值了。zrl 向左或向右翻一页需要 $1$ 单位时间，浏览神帖不需要时间。问：zrl 最多能得到多少快乐值。\n\n注：在 $t_i$ 个单位时间浏览第 $i$ 个神贴仍能得到 $v_i$ 的快乐值。\n\n**另注：每个神帖的快乐值最多只能得到一次。**", "inputFormat": "第一行一个整数 $n$，表示神帖数量。\n\n接下来 $n$ 行，每行三个整数，分别表示第 $i$ 个神帖的 $x_i$，$v_i$，$t_i$。", "outputFormat": "一个整数，为 zrl 能得到的最多的快乐值。", "hint": "#### 样例解释：\n\n样例 1：$0 \\rightarrow -1 \\rightarrow 0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3$  \n样例 2：$0 \\rightarrow -1 \\rightarrow 0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3$  \n样例 3：$0 \\rightarrow -1 \\rightarrow -2 \\rightarrow -3 \\rightarrow -4 \\rightarrow -5$ \n\n---\n\n#### 数据范围：\n\n| 测试点 | 特殊性质 |\n| :-----------: | :-----------: |\n| $1-2$ | $x_i \\ge 0$ |\n| $3-4$ | $0 \\le t_i \\le 20$ |\n| $5-6$ | $n \\le 20$ |\n| $7$ | $-10 \\le x_i \\le 10$ |\n| $8-9$ | $t_i=$\\|$x_i$\\| |\n| $10-13$ | 所有 $t_i$ 均相等 |\n| $14-17$ | $n \\le 60$ |\n| $17-22$ | 无 |\n\n对于 $100\\%$ 的数据，$n \\le 200$，$-500 \\le x_i \\le 500$，$0 \\le v_i \\le 10^9$，$0\\le t_i \\le 500$。\n\nHint：新增两组 Hack 数据，贪心/模拟已经过不去了。", "locale": "zh-CN"}}}
{"pid": "P6250", "type": "P", "difficulty": 5, "samples": [["3\n1\n2\n5", "YES\n1\n1 1\nNO\nYES\n3\n1 5\n2 1\n2 -1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2020", "Special Judge"], "title": "分拆", "background": "小 W 喜欢分拆。", "description": "小 W 定义了一种「良好的分拆」：\n\n对于正整数 $n$，如果存在 $n$ 个整数 $(a_1,a_2,\\cdots,a_n)$ 使得 $\\sum\\limits_{i=1}^na_i=\\prod\\limits_{i=1}^na_i=n$，那么称 $n$ 是「良好的」，而 $(a_1,a_2,\\cdots,a_n)$ 是 $n$ 的一个「良好的分拆」。\n\n现在，小 W 给了你一些 $n$，他希望你求出这些 $n$ 分别是不是「良好的」。如果是良好的，请**任意**输出一个 $n$ 的「良好的分拆」。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行一个整数 $n$，表示小 W 的一个询问。", "outputFormat": "对于每组数据，输出若干行。\n\n如果 $n$ 不是「良好的」，那么仅输出一行 `NO`；\n\n否则，第一行输出 `YES`，接下来一行一个数 $a$，表示你的「良好的分拆」中有多少种不同的数，接下来 $a$ 行，每行两个数 $x,y$，表示有 $x$ 个 $y$。", "hint": "## 样例解释\n$n=1$ 时，$(1)$ 是 $1$ 的一个「良好的分拆」；\n\n$n=2$ 时，$2$ 没有「良好的分拆」；\n\n$n=5$ 时，$5+1+1+(-1)+(-1)=5\\times1\\times1\\times(-1)\\times(-1)=5$，所以 $(5,1,1,-1,-1)$ 是 $5$ 的一个「良好的分拆」。\n## 数据范围\n**本题不捆绑测试。**  \n$\\text{Subtask\\;1(10\\;pts)}$：$n=1,T=1000$；  \n$\\text{Subtask\\;2(30\\;pts)}$：$n\\le 10^4,T=100$；  \n$\\text{Subtask\\;3(60\\;pts)}$：$T=1000$。  \n对于所有数据，$1\\le n\\le10^9$。\n## 说明\n本题带有 $\\text{SPJ}$。\n\n某个测试点获得满分，当且仅当对于这个测试点的所有 $T$ 组数据，有：\n- 第一行的答案相同。\n- 如果第一行的答案为 `YES`，则还要满足 $1\\le a\\le 20$，$1\\le x\\le n$，$\\sum y\\times x=\\prod y^x=\\sum x=n$。\n\n**为了便于 $\\text{SPJ}$ 的编写，允许有的 $y$ 相同，同时请确保在输出文件末尾有且仅有一个换行。**\n\n$\\text{SPJ}$ 源码请到[云剪贴板](https://www.luogu.com.cn/paste/tlhjg36n)查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "分拆", "background": "小 W 喜欢分拆。", "description": "小 W 定义了一种「良好的分拆」：\n\n对于正整数 $n$，如果存在 $n$ 个整数 $(a_1,a_2,\\cdots,a_n)$ 使得 $\\sum\\limits_{i=1}^na_i=\\prod\\limits_{i=1}^na_i=n$，那么称 $n$ 是「良好的」，而 $(a_1,a_2,\\cdots,a_n)$ 是 $n$ 的一个「良好的分拆」。\n\n现在，小 W 给了你一些 $n$，他希望你求出这些 $n$ 分别是不是「良好的」。如果是良好的，请**任意**输出一个 $n$ 的「良好的分拆」。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行一个整数 $n$，表示小 W 的一个询问。", "outputFormat": "对于每组数据，输出若干行。\n\n如果 $n$ 不是「良好的」，那么仅输出一行 `NO`；\n\n否则，第一行输出 `YES`，接下来一行一个数 $a$，表示你的「良好的分拆」中有多少种不同的数，接下来 $a$ 行，每行两个数 $x,y$，表示有 $x$ 个 $y$。", "hint": "## 样例解释\n$n=1$ 时，$(1)$ 是 $1$ 的一个「良好的分拆」；\n\n$n=2$ 时，$2$ 没有「良好的分拆」；\n\n$n=5$ 时，$5+1+1+(-1)+(-1)=5\\times1\\times1\\times(-1)\\times(-1)=5$，所以 $(5,1,1,-1,-1)$ 是 $5$ 的一个「良好的分拆」。\n## 数据范围\n**本题不捆绑测试。**  \n$\\text{Subtask\\;1(10\\;pts)}$：$n=1,T=1000$；  \n$\\text{Subtask\\;2(30\\;pts)}$：$n\\le 10^4,T=100$；  \n$\\text{Subtask\\;3(60\\;pts)}$：$T=1000$。  \n对于所有数据，$1\\le n\\le10^9$。\n## 说明\n本题带有 $\\text{SPJ}$。\n\n某个测试点获得满分，当且仅当对于这个测试点的所有 $T$ 组数据，有：\n- 第一行的答案相同。\n- 如果第一行的答案为 `YES`，则还要满足 $1\\le a\\le 20$，$1\\le x\\le n$，$\\sum y\\times x=\\prod y^x=\\sum x=n$。\n\n**为了便于 $\\text{SPJ}$ 的编写，允许有的 $y$ 相同，同时请确保在输出文件末尾有且仅有一个换行。**\n\n$\\text{SPJ}$ 源码请到[云剪贴板](https://www.luogu.com.cn/paste/tlhjg36n)查看。", "locale": "zh-CN"}}}
{"pid": "P6251", "type": "P", "difficulty": 4, "samples": [["4\n3 2 1 2\n2 3 4 3\n2 1 2 1\n2 2 1 3", "3 2 4 1\n4 2 1 3"], ["2\n1 2\n2 3\n2 8\n2 1", "impossible"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "Special Judge", "O2优化", "ICPC", "WF"], "title": "[ICPC 2019 WF] Azulejos", "background": "### Warning: If you submit a malicious program, you will be banned.\n### 警告：恶意提交本题将被封号。\n", "description": "Ceramic artists Maria and João are opening a small azulejo store in Porto. Azulejos are the beautiful ceramic tiles for which Portugal is famous. Maria and João want to create an attractive window display, but, due to limited space in their shop, they must arrange their tile samples in two rows on a single shelf. Each of João's tiles has exactly one of Maria's tiles in front of it and each of Maria's tiles has exactly one of João's tiles behind it. These hand-crafted tiles are of many different sizes, and it is important that each tile in the back row is taller than the tile in front of it so that both are visible to passers-by. For the convenience of shoppers, tiles in each row are arranged in non-decreasing order of price from left to right. Tiles of the same price may be arranged in any order subject to the visibility condition stated above.\n\nYour task is to find an ordering of the tiles in each row that satisfies these constraints, or determine that no such ordering exists.", "inputFormat": "The first line of input contains an integer $n$ ($1 \\leq n \\leq 5 \\times 10^5$), the number of tiles in each row. The next four lines contain $n$ integers each; the first pair of lines represents the back row of tiles and the second pair of lines represents the front row. Tiles in each row are numbered from $1$ to $n$ according to their ordering in the input. The first line in each pair contains $n$ integers $p_1, \\dots , p_n$ ($1 \\leq p_i \\leq 10^9$ for each $i$), where $p_i$ is the price of tile number $i$ in that row. The second line in each pair contains $n$ integers $h_1, \\dots , h_n$ ($1 \\leq h_i \\leq 10^9$ for each $i$), where $h_i$ is the height of tile number $i$ in that row.", "outputFormat": "If there is a valid ordering, output it as two lines of $n$ integers, each consisting of a permutation of the tile numbers from $1$ to $n$. The first line represents the ordering of the tiles in the back row and the second\nrepresents the ordering of the tiles in the front row. If more than one pair of permutations satisfies the constraints, any such pair will be accepted. If no ordering exists, output `impossible`.", "hint": "Source: ICPC 2019 World Finals.", "locale": "en", "translations": {"en": {"title": "[ICPC 2019 WF] Azulejos", "background": "### Warning: If you submit a malicious program, you will be banned.\n### 警告：恶意提交本题将被封号。\n", "description": "Ceramic artists Maria and João are opening a small azulejo store in Porto. Azulejos are the beautiful ceramic tiles for which Portugal is famous. Maria and João want to create an attractive window display, but, due to limited space in their shop, they must arrange their tile samples in two rows on a single shelf. Each of João's tiles has exactly one of Maria's tiles in front of it and each of Maria's tiles has exactly one of João's tiles behind it. These hand-crafted tiles are of many different sizes, and it is important that each tile in the back row is taller than the tile in front of it so that both are visible to passers-by. For the convenience of shoppers, tiles in each row are arranged in non-decreasing order of price from left to right. Tiles of the same price may be arranged in any order subject to the visibility condition stated above.\n\nYour task is to find an ordering of the tiles in each row that satisfies these constraints, or determine that no such ordering exists.", "inputFormat": "The first line of input contains an integer $n$ ($1 \\leq n \\leq 5 \\times 10^5$), the number of tiles in each row. The next four lines contain $n$ integers each; the first pair of lines represents the back row of tiles and the second pair of lines represents the front row. Tiles in each row are numbered from $1$ to $n$ according to their ordering in the input. The first line in each pair contains $n$ integers $p_1, \\dots , p_n$ ($1 \\leq p_i \\leq 10^9$ for each $i$), where $p_i$ is the price of tile number $i$ in that row. The second line in each pair contains $n$ integers $h_1, \\dots , h_n$ ($1 \\leq h_i \\leq 10^9$ for each $i$), where $h_i$ is the height of tile number $i$ in that row.", "outputFormat": "If there is a valid ordering, output it as two lines of $n$ integers, each consisting of a permutation of the tile numbers from $1$ to $n$. The first line represents the ordering of the tiles in the back row and the second\nrepresents the ordering of the tiles in the front row. If more than one pair of permutations satisfies the constraints, any such pair will be accepted. If no ordering exists, output `impossible`.", "hint": "Source: ICPC 2019 World Finals.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2019 WF] Azulejos", "background": "", "description": "陶艺家 Maria 和 João 正在波尔图开设一家小型的 azulejo 商店。Azulejos 是葡萄牙著名的美丽陶瓷瓷砖。Maria 和 João 想要创建一个吸引人的橱窗展示，但由于店内空间有限，他们必须将瓷砖样品在一个架子上排列成两行。João 的每块瓷砖前面都有 Maria 的一块瓷砖，Maria 的每块瓷砖后面都有 João 的一块瓷砖。这些手工制作的瓷砖有许多不同的尺寸，重要的是后排的每块瓷砖都比前排的瓷砖高，以便路人都能看到。为了方便顾客，每排瓷砖按价格从左到右非递减排列。相同价格的瓷砖可以在满足上述可见性条件的情况下以任何顺序排列。\n\n你的任务是找到满足这些约束条件的瓷砖排列，或者确定不存在这样的排列。", "inputFormat": "输入的第一行包含一个整数 $n$ ($1 \\leq n \\leq 5 \\times 10^5$)，表示每排的瓷砖数量。接下来的四行每行包含 $n$ 个整数；前两行表示后排的瓷砖，后两行表示前排的瓷砖。每排的瓷砖根据输入中的顺序从 $1$ 到 $n$ 编号。每对中的第一行包含 $n$ 个整数 $p_1, \\dots , p_n$ ($1 \\leq p_i \\leq 10^9$ 对于每个 $i$)，其中 $p_i$ 是该排中编号为 $i$ 的瓷砖的价格。每对中的第二行包含 $n$ 个整数 $h_1, \\dots , h_n$ ($1 \\leq h_i \\leq 10^9$ 对于每个 $i$)，其中 $h_i$ 是该排中编号为 $i$ 的瓷砖的高度。", "outputFormat": "如果存在有效的排列，则输出两行 $n$ 个整数，每行由从 $1$ 到 $n$ 的瓷砖编号的一个排列组成。第一行表示后排瓷砖的排列，第二行表示前排瓷砖的排列。如果有多个满足约束的排列对，任何这样的对都将被接受。如果不存在这样的排列，输出 `impossible`。", "hint": "来源：ICPC 2019 世界总决赛。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6252", "type": "P", "difficulty": 5, "samples": [["5 60 18 2\n0 0\n20 20\n30 10\n50 30\n70 20", "6460"], ["4 10 1 1\n0 0\n1 9\n9 9\n10 0", "impossible"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["计算几何", "2019", "O2优化", "ICPC", "WF"], "title": "[ICPC 2019 WF] Beautiful Bridges", "background": "### Warning: If you submit a malicious program, you will be banned.\n### 警告：恶意提交本题将被封号。\n", "description": "What connects us all? Well, it is often bridges. Since ancient times, people have been building bridges for roads, for trains, for pedestrians, and as aqueducts to transport water. It is humanity's way of not taking inconvenient geography for an answer.\n\nThe company Arch Bridges Construction (ABC) specializes in—you guessed it—the construction of arch bridges. This classical style of bridge is supported by pillars that extend from the ground below the bridge. Arches between pillars distribute the bridge's weight onto the adjacent pillars.\n\nThe bridges built by ABC often have pillars spaced at irregular intervals. For aesthetic reasons, ABC's bridges always have semicircular arches, as illustrated in Figure B.1. However, while a bridge arch can touch the ground, it cannot extend below the ground. This makes some pillar placements impossible.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r95zwobd.png)\n\nGiven a ground profile and a desired bridge height $h$, there are usually many ways of building an arch bridge. We model the ground profile as a piecewise-linear function described by $n$ key points $(x_1, y_1),(x_2, y_2), \\dots ,(x_n, y_n)$, where the $x-\\text{coordinate}$ of a point is the position along the bridge, and the $y-\\text{coordinate}$ is the elevation of the ground above sea level at this position along the bridge. The first and last pillars must be built at the first and last key points, and any intermediate pillars can be built only at these key points. The cost of a bridge is the cost of its pillars (which is proportional to their heights) plus the cost of its arches (which is proportional to the amount of material used). So a bridge with $k$ pillars of heights $h_1, \\dots , h_k$ that are separated by horizontal distances $d_1, \\dots , d_{k - 1}$ has a total cost of\n$$\\alpha \\cdot \\sum_{i = 1}^{k} h_i + \\beta \\cdot \\sum_{i = 1}^{k - 1} d_i^2$$\nfor some given constants $\\alpha$ and $\\beta$. ABC wants to construct each bridge at the lowest possible cost.", "inputFormat": "The first line of input contains four integers $n, h, \\alpha, and \\beta$, where $n$ ($2 \\leq n \\leq 10^4$) is the number of points describing the ground profile, $h$ ($1 \\leq h \\leq 10^5$) is the desired height of the bridge above sea level, and $\\alpha, \\beta$ ($1 \\leq \\alpha, \\beta \\leq 10^4$) are the cost factors as described earlier. Then follow $n$ lines, the $i^{\\text{th}}$ of which contains two integers $x_i, y_i$ ($0 \\leq x_1 < x_2 < . . . < x_n \\leq 10^5$ and $0 \\leq yi < h$), describing the ground profile.", "outputFormat": "Output the minimum cost of building a bridge from horizontal position $x_1$ to $x_n$ at height $h$ above sea level. If it is impossible to build any such bridge, output `impossible`.", "hint": "Source: ICPC 2019 World Finals.", "locale": "en", "translations": {"en": {"title": "[ICPC 2019 WF] Beautiful Bridges", "background": "### Warning: If you submit a malicious program, you will be banned.\n### 警告：恶意提交本题将被封号。\n", "description": "What connects us all? Well, it is often bridges. Since ancient times, people have been building bridges for roads, for trains, for pedestrians, and as aqueducts to transport water. It is humanity's way of not taking inconvenient geography for an answer.\n\nThe company Arch Bridges Construction (ABC) specializes in—you guessed it—the construction of arch bridges. This classical style of bridge is supported by pillars that extend from the ground below the bridge. Arches between pillars distribute the bridge's weight onto the adjacent pillars.\n\nThe bridges built by ABC often have pillars spaced at irregular intervals. For aesthetic reasons, ABC's bridges always have semicircular arches, as illustrated in Figure B.1. However, while a bridge arch can touch the ground, it cannot extend below the ground. This makes some pillar placements impossible.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r95zwobd.png)\n\nGiven a ground profile and a desired bridge height $h$, there are usually many ways of building an arch bridge. We model the ground profile as a piecewise-linear function described by $n$ key points $(x_1, y_1),(x_2, y_2), \\dots ,(x_n, y_n)$, where the $x-\\text{coordinate}$ of a point is the position along the bridge, and the $y-\\text{coordinate}$ is the elevation of the ground above sea level at this position along the bridge. The first and last pillars must be built at the first and last key points, and any intermediate pillars can be built only at these key points. The cost of a bridge is the cost of its pillars (which is proportional to their heights) plus the cost of its arches (which is proportional to the amount of material used). So a bridge with $k$ pillars of heights $h_1, \\dots , h_k$ that are separated by horizontal distances $d_1, \\dots , d_{k - 1}$ has a total cost of\n$$\\alpha \\cdot \\sum_{i = 1}^{k} h_i + \\beta \\cdot \\sum_{i = 1}^{k - 1} d_i^2$$\nfor some given constants $\\alpha$ and $\\beta$. ABC wants to construct each bridge at the lowest possible cost.", "inputFormat": "The first line of input contains four integers $n, h, \\alpha, and \\beta$, where $n$ ($2 \\leq n \\leq 10^4$) is the number of points describing the ground profile, $h$ ($1 \\leq h \\leq 10^5$) is the desired height of the bridge above sea level, and $\\alpha, \\beta$ ($1 \\leq \\alpha, \\beta \\leq 10^4$) are the cost factors as described earlier. Then follow $n$ lines, the $i^{\\text{th}}$ of which contains two integers $x_i, y_i$ ($0 \\leq x_1 < x_2 < . . . < x_n \\leq 10^5$ and $0 \\leq yi < h$), describing the ground profile.", "outputFormat": "Output the minimum cost of building a bridge from horizontal position $x_1$ to $x_n$ at height $h$ above sea level. If it is impossible to build any such bridge, output `impossible`.", "hint": "Source: ICPC 2019 World Finals.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2019 WF] Beautiful Bridges", "background": "", "description": "是什么将我们连接在一起？通常是桥梁。自古以来，人们就开始建造桥梁用于道路、火车、行人以及作为运河来运输水。这是人类不屈服于不便地理条件的一种方式。\n\nArch Bridges Construction (ABC) 公司专门从事——你猜对了——拱桥的建造。这种经典风格的桥梁由从桥下地面延伸的柱子支撑。柱子之间的拱将桥梁的重量分布到相邻的柱子上。\n\nABC 建造的桥梁通常在不规则间隔处设置柱子。出于美学原因，ABC 的桥梁总是有半圆形的拱，如图 B.1 所示。然而，虽然桥拱可以接触地面，但不能延伸到地面以下。这使得某些柱子的位置不可能实现。\n\n给定一个地面轮廓和一个期望的桥梁高度 $h$，通常有多种建造拱桥的方法。我们将地面轮廓建模为由 $n$ 个关键点 $(x_1, y_1),(x_2, y_2), \\dots ,(x_n, y_n)$ 描述的分段线性函数，其中点的 $x-\\text{坐标}$ 是沿桥的位置，$y-\\text{坐标}$ 是沿桥该位置处的地面海拔。第一个和最后一个柱子必须建在第一个和最后一个关键点上，任何中间的柱子只能建在这些关键点上。桥梁的成本是其柱子的成本（与其高度成正比）加上其拱的成本（与使用的材料量成正比）。因此，一个有 $k$ 个高度为 $h_1, \\dots , h_k$ 的柱子并且水平距离为 $d_1, \\dots , d_{k - 1}$ 的桥梁的总成本为\n$$\\alpha \\cdot \\sum_{i = 1}^{k} h_i + \\beta \\cdot \\sum_{i = 1}^{k - 1} d_i^2$$\n对于某些给定的常数 $\\alpha$ 和 $\\beta$。ABC 希望以最低的成本建造每座桥梁。", "inputFormat": "输入的第一行包含四个整数 $n, h, \\alpha, \\beta$，其中 $n$ ($2 \\leq n \\leq 10^4$) 是描述地面轮廓的点的数量，$h$ ($1 \\leq h \\leq 10^5$) 是期望的桥梁海拔高度，$\\alpha, \\beta$ ($1 \\leq \\alpha, \\beta \\leq 10^4$) 是如前所述的成本因子。接下来是 $n$ 行，第 $i^{\\text{th}}$ 行包含两个整数 $x_i, y_i$ ($0 \\leq x_1 < x_2 < . . . < x_n \\leq 10^5$ 且 $0 \\leq y_i < h$)，描述地面轮廓。", "outputFormat": "输出从水平位置 $x_1$ 到 $x_n$ 在海拔高度 $h$ 处建造桥梁的最低成本。如果无法建造任何这样的桥梁，输出 `impossible`。", "hint": "来源：ICPC 2019 世界总决赛。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6253", "type": "P", "difficulty": 6, "samples": [["W 3\n21-17\n13x22x31x24\n19x28", "-b-.-.-. -b-.-.-.\n.-.-.-.- .-.-.-.-\n-.-.-.-. -.-.-.-.\nB-.-w-.- .-.-w-.-\n-.-.-W-. -.-.-.-.\nw-.-.-.- .-.-.-.-\n-.-w-w-. -.-.-.-W\n.-.-.-.- .-.-.-.-"], ["B 5\n2-7\n9x2\n32-27\n2x11x18\n5-9", "-.-b-.-W -.-.-.-W\nb-b-.-.- .-.-.-.-\n-w-.-.-. -b-.-.-.\nB-w-b-.- B-w-.-.-\n-.-.-.-. -.-W-.-.\n.-.-.-.- .-.-.-.-\n-.-.-.-. -.-.-B-.\n.-.-.-B- .-.-.-.-"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "Special Judge", "O2优化", "ICPC", "WF"], "title": "[ICPC 2019 WF] Checks Post Facto", "background": "### Warning: If you submit a malicious program, you will be banned.\n### 警告：恶意提交本题将被封号。\n", "description": "Your university's board game club just hosted a Checkers tournament, and you were assigned to take notes on the games. Unfortunately, while walking home, you dropped all of your papers into a puddle! Disaster! Much of what you wrote is now unreadable; all you have left are some lists of moves played in the middle of various games. Is there some way you can reconstruct what happened in those games? You had better fix things fast, or they will demote you to Tic-Tac-Toe recordkeeper!\n\nCheckers (or English Draughts) is a well-known board game with simple rules. It is played on the dark squares of an $8 \\times 8$ checkerboard. There are two players, Black and White, who alternate turns moving their pieces (all of Black's pieces are black and all of White's pieces are white). Each piece occupies a single dark square, and can be either a normal $man$ or a promoted $king$. A turn consists of choosing one piece and moving it in one of two ways:\n\n1. Shifting it diagonally to an unoccupied adjacent dark square, as shown in Figure C.1(a). This is called a $simple~move$. If the piece is a man, it can move only in the two diagonal directions towards the opposing side of the board (towards the bottom for Black, the top for White). If the piece is a king, it can move in all four diagonal directions.\n\n2. Jumping over an adjacent enemy piece to an unoccupied square immediately on the other side, then removing ($capturing$) that piece. Men can jump only in the two directions described above, while kings can jump in all four. The player can then repeat this step, continuing to jump with the same piece as long as there are properly-positioned enemy pieces to capture. Such a sequence of one or more jumps is called a $jump~move$. Figure C.1(b) shows a jump move comprising three\njumps.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/onoiijvu.png)\n\nIn Checkers, captures are forced moves. If a jump move is available at the start of a player's turn, they must jump, and cannot stop jumping with that piece until it has no more possible jumps. They are free to choose which piece to jump with, and where, if there are multiple possibilities. In Figure C.1(b), Black could not have made any other move.\n\nIf a man reaches the farthest row from its player (that is, a black man reaches the bottom row or a white man reaches the top row), it is removed from the board and replaced by a king of the same color (it is said to be $promoted$), and the turn ends. A piece cannot be promoted and then jump backwards as a new king in the same turn.\n\n\nGiven a list of moves, find a setup of pieces such that the moves can be legally played in sequence starting from that setup. This setup may not have black men on the bottom row or white men on the top row, since they would have been promoted to kings already. You need only ensure that the rules above are obeyed; you do not need to ensure that this setup is reachable in a real game of Checkers.", "inputFormat": "The first line of input contains a character $c$ and an integer $n$, where $c$ is either `B` or `W`, indicates which player makes the first move (Black or White respectively) and $n$ ($1 \\leq n \\leq 100$) is the number of moves in the list. Then follow $n$ lines, each of which describes a move in the standard Checkers notation defined below.\n\n\nThe dark squares are identified by numbers $1 \\sim 32$, as shown in Figure C.1(c). A simple move from square $a$ to square $b$ is written as `a-b`. A jump move starting at $a$ and jumping to $b_1, b_2, \\dots , b_k$ is written as $a\\text{x}b_1\\text{x}b_2\\text{x} \\dots \\text{x}b_k$.\n\nThere is always a valid solution for the given set of moves.", "outputFormat": "Output two boards side-by-side (separated by a space), giving the positions of all pieces on the board before (on the left) and after (on the right) the given moves. Use  `-` for light squares,  `.` for empty dark squares, lowercase `b` and `w` for black and white men, and uppercase `B` and `W` for black and white kings. If there is more than one valid solution, any one is acceptable.", "hint": "Source: ICPC World Finals 2019.", "locale": "en", "translations": {"en": {"title": "[ICPC 2019 WF] Checks Post Facto", "background": "### Warning: If you submit a malicious program, you will be banned.\n### 警告：恶意提交本题将被封号。\n", "description": "Your university's board game club just hosted a Checkers tournament, and you were assigned to take notes on the games. Unfortunately, while walking home, you dropped all of your papers into a puddle! Disaster! Much of what you wrote is now unreadable; all you have left are some lists of moves played in the middle of various games. Is there some way you can reconstruct what happened in those games? You had better fix things fast, or they will demote you to Tic-Tac-Toe recordkeeper!\n\nCheckers (or English Draughts) is a well-known board game with simple rules. It is played on the dark squares of an $8 \\times 8$ checkerboard. There are two players, Black and White, who alternate turns moving their pieces (all of Black's pieces are black and all of White's pieces are white). Each piece occupies a single dark square, and can be either a normal $man$ or a promoted $king$. A turn consists of choosing one piece and moving it in one of two ways:\n\n1. Shifting it diagonally to an unoccupied adjacent dark square, as shown in Figure C.1(a). This is called a $simple~move$. If the piece is a man, it can move only in the two diagonal directions towards the opposing side of the board (towards the bottom for Black, the top for White). If the piece is a king, it can move in all four diagonal directions.\n\n2. Jumping over an adjacent enemy piece to an unoccupied square immediately on the other side, then removing ($capturing$) that piece. Men can jump only in the two directions described above, while kings can jump in all four. The player can then repeat this step, continuing to jump with the same piece as long as there are properly-positioned enemy pieces to capture. Such a sequence of one or more jumps is called a $jump~move$. Figure C.1(b) shows a jump move comprising three\njumps.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/onoiijvu.png)\n\nIn Checkers, captures are forced moves. If a jump move is available at the start of a player's turn, they must jump, and cannot stop jumping with that piece until it has no more possible jumps. They are free to choose which piece to jump with, and where, if there are multiple possibilities. In Figure C.1(b), Black could not have made any other move.\n\nIf a man reaches the farthest row from its player (that is, a black man reaches the bottom row or a white man reaches the top row), it is removed from the board and replaced by a king of the same color (it is said to be $promoted$), and the turn ends. A piece cannot be promoted and then jump backwards as a new king in the same turn.\n\n\nGiven a list of moves, find a setup of pieces such that the moves can be legally played in sequence starting from that setup. This setup may not have black men on the bottom row or white men on the top row, since they would have been promoted to kings already. You need only ensure that the rules above are obeyed; you do not need to ensure that this setup is reachable in a real game of Checkers.", "inputFormat": "The first line of input contains a character $c$ and an integer $n$, where $c$ is either `B` or `W`, indicates which player makes the first move (Black or White respectively) and $n$ ($1 \\leq n \\leq 100$) is the number of moves in the list. Then follow $n$ lines, each of which describes a move in the standard Checkers notation defined below.\n\n\nThe dark squares are identified by numbers $1 \\sim 32$, as shown in Figure C.1(c). A simple move from square $a$ to square $b$ is written as `a-b`. A jump move starting at $a$ and jumping to $b_1, b_2, \\dots , b_k$ is written as $a\\text{x}b_1\\text{x}b_2\\text{x} \\dots \\text{x}b_k$.\n\nThere is always a valid solution for the given set of moves.", "outputFormat": "Output two boards side-by-side (separated by a space), giving the positions of all pieces on the board before (on the left) and after (on the right) the given moves. Use  `-` for light squares,  `.` for empty dark squares, lowercase `b` and `w` for black and white men, and uppercase `B` and `W` for black and white kings. If there is more than one valid solution, any one is acceptable.", "hint": "Source: ICPC World Finals 2019.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2019 WF] Checks Post Facto", "background": "", "description": "游戏在一个 $8 \\times 8$ 的方格棋盘的深色方格上进行。有两名玩家，黑方和白方，他们轮流移动他们的棋子（所有黑方的棋子都是黑色的，所有白方的棋子都是白色的）。每个棋子占据一个单独的深色方格，可以是**兵**或**王**。一个回合包括选择一个棋子并以以下两种方式之一移动它：\n\n1. 将其**斜着**移动到一个相邻的未占用的深色方格，如图 (a) 所示。这被称为**简单移动**。兵只能沿向前的两种方向移动（对于黑方是朝下，对于白方是朝上）。如果棋子是王，它可以在所有四个斜方向移动。\n\n2. 跳过对方的棋子到达空地，并吃掉对方的子。允许移动的方向与第一条相同。然后，玩家可以重复此步骤，继续使用相同的棋子跳。这样一个或多个跳的序列称为**跳跃移动**。图 (b) 展示了由三个跳跃组成的跳跃移动。\n\n如果在玩家回合开始时有一个跳跃移动可用，他们必须进行跳跃，并且不能停止使用该棋子跳跃，直到它没有更多可能的跳跃。他们可以自由选择使用哪个棋子进行跳跃，以及在有多个可能性的情况下选择在哪里跳跃。在图 (b) 中，黑方不能进行任何其他移动。\n\n如果一个兵达到其玩家的最远一行（即，一个黑子达到底行或一个白子达到顶行），它将变成同色的王（称为**晋升**），然后**回合结束**。这意味着一个兵不能在同一回合中被晋升然后以王的身份继续倒退跳跃。\n\n给定一系列移动，请找到一个初始棋局，使得可以从该棋局开始按顺序合法进行这些移动。此棋局可能不能在底行有黑子或在顶行有白子，因为它们可能已经被晋升为王。你只需要确保上述规则被遵守；不需要确保这个棋局在实际跳棋游戏中是可达的。", "inputFormat": "输入的第一行包含一个字符 $c$ 和一个整数 $n$，其中 $c$ 是 B 或 W，表示哪个玩家首先移动（分别为黑方或白方），$n$（$1 \\leq n \\leq 100$）是移动列表中的移动次数。然后是 $n$ 行，每行描述标准跳棋符号中定义的一步移动。\n\n深色方格用数字 $1 \\sim 32$ 标识，如图 (c) 所示。从方格 $a$ 到方格 $b$ 的简单移动写作 a-b。从 $a$ 开始跳到 $b_1, b_2, \\dots , b_k$ 的跳跃移动写作 $a\\text{x}b_1\\text{x}b_2\\text{x} \\dots \\text{x}b_k$。\n\n对于给定的移动集合，总是存在至少一个答案。", "outputFormat": "所有棋子在棋盘上的位置以两个并排的棋盘输出（用空格分隔），分别表示在给定的移动之前（左边）和之后（右边）的棋盘。\n\n使用`-`表示浅色方格，`.`表示空的深色方格，小写的`b`和`w`表示黑色和白色兵，大写的`B`和`W`表示黑色和白色王。如果存在多个答案，则任何一个都可以接受。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P6254", "type": "P", "difficulty": 4, "samples": [["9\ne1 e1 s1 e2 s1 s2 e42 e1 s1", "3 1"], ["8\ns1 s1 e3 e1 s3 e1 e3 s3", "8 2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["模拟", "2019", "O2优化", "ICPC", "WF"], "title": "[ICPC 2019 WF] Circular DNA", "background": "", "description": "You have an internship with a bioinformatics research group studying DNA. A single strand of DNA consists of many genes, which fall into different categories called gene types. Gene types are delimited by specific nucleotide sequences known as gene markers. Each gene type i has a unique start marker $\\texttt s_i$ and a unique end marker $\\texttt e_i$ . After many dirty jobs (growing bacteria, cell extraction, protein engineering,and so on), your research group can convert DNA into a form consisting of only the gene markers, removing all the genetic material lying between the markers.\n\nYour research group came up with the interesting hypothesis that gene interpretation depends on whether the markers of some gene types form properly nested structures. To decide whether markers of gene type $i$ form a proper nesting in a given sequence of markers $w$, one needs to consider the subsequence of $w$ containing only the markers of gene type $i$ ($\\texttt s_i$ and $\\texttt e_i$), leaving none of them out. The following (and only the following) are considered to be properly nested structures:\n\n- $\\texttt s_i \\texttt e_i$\n- $\\texttt s_i N \\texttt e_i$, where $N$ is a properly nested structure\n- $AB$, where $A$ and $B$ are properly nested structures\n\nGiven your computing background, you were assigned to investigate this property, but there is one further complication. Your group is studying a specific type of DNA called circular DNA, which is DNA that forms a closed loop. To study nesting in circular DNA, it is necessary to cut the loop at some location, which results in a unique sequence of markers (the direction of reading is fixed by molecular properties). Whether a gene type $i$ forms a proper nesting now also depends on where the circular DNA is cut. Your task is to find the cutting location that maximizes the number of gene types that form a properly nested structure. Figure D.1 shows an example corresponding to Sample Input 1. The indicated cut results in the markers for gene type 1 being properly nested.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l856fbko.png)", "inputFormat": "The first line of input contains an integer $n$ ($1 \\leq n \\leq 10^6$), the length of the DNA. The next line contains the DNA sequence, that is, $n$ markers. Each marker is a character $c$ followed by an integer $i$, where $c \\in \\{\\texttt s, \\texttt e\\}$ specifies whether it is a start or an end marker and $i$ ($1 \\leq i \\leq 10^6$) is the gene type of the marker. The given DNA sequence has been obtained from the circular DNA by cutting at an arbitrary location.", "outputFormat": "Output one line with two integers $p$ and $m$, where $p$ is the cutting position that maximizes the number of different gene types that form a proper nesting, and $m$ is this maximum number of gene types. The DNA is cut just before the $p^{\\text{th}}$ input marker (for instance, the cut shown in Figure D.1 has $p = 3$). If more than one cutting position yields the same maximum value of $m$, output the smallest $p$ that does so.", "hint": "Source: ICPC 2019 World Finals.", "locale": "en", "translations": {"en": {"title": "[ICPC 2019 WF] Circular DNA", "background": "", "description": "You have an internship with a bioinformatics research group studying DNA. A single strand of DNA consists of many genes, which fall into different categories called gene types. Gene types are delimited by specific nucleotide sequences known as gene markers. Each gene type i has a unique start marker $\\texttt s_i$ and a unique end marker $\\texttt e_i$ . After many dirty jobs (growing bacteria, cell extraction, protein engineering,and so on), your research group can convert DNA into a form consisting of only the gene markers, removing all the genetic material lying between the markers.\n\nYour research group came up with the interesting hypothesis that gene interpretation depends on whether the markers of some gene types form properly nested structures. To decide whether markers of gene type $i$ form a proper nesting in a given sequence of markers $w$, one needs to consider the subsequence of $w$ containing only the markers of gene type $i$ ($\\texttt s_i$ and $\\texttt e_i$), leaving none of them out. The following (and only the following) are considered to be properly nested structures:\n\n- $\\texttt s_i \\texttt e_i$\n- $\\texttt s_i N \\texttt e_i$, where $N$ is a properly nested structure\n- $AB$, where $A$ and $B$ are properly nested structures\n\nGiven your computing background, you were assigned to investigate this property, but there is one further complication. Your group is studying a specific type of DNA called circular DNA, which is DNA that forms a closed loop. To study nesting in circular DNA, it is necessary to cut the loop at some location, which results in a unique sequence of markers (the direction of reading is fixed by molecular properties). Whether a gene type $i$ forms a proper nesting now also depends on where the circular DNA is cut. Your task is to find the cutting location that maximizes the number of gene types that form a properly nested structure. Figure D.1 shows an example corresponding to Sample Input 1. The indicated cut results in the markers for gene type 1 being properly nested.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l856fbko.png)", "inputFormat": "The first line of input contains an integer $n$ ($1 \\leq n \\leq 10^6$), the length of the DNA. The next line contains the DNA sequence, that is, $n$ markers. Each marker is a character $c$ followed by an integer $i$, where $c \\in \\{\\texttt s, \\texttt e\\}$ specifies whether it is a start or an end marker and $i$ ($1 \\leq i \\leq 10^6$) is the gene type of the marker. The given DNA sequence has been obtained from the circular DNA by cutting at an arbitrary location.", "outputFormat": "Output one line with two integers $p$ and $m$, where $p$ is the cutting position that maximizes the number of different gene types that form a proper nesting, and $m$ is this maximum number of gene types. The DNA is cut just before the $p^{\\text{th}}$ input marker (for instance, the cut shown in Figure D.1 has $p = 3$). If more than one cutting position yields the same maximum value of $m$, output the smallest $p$ that does so.", "hint": "Source: ICPC 2019 World Finals.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2019 WF] Circular DNA", "background": "", "description": "你在一个研究 DNA 的生物信息学研究小组实习。单链 DNA 由许多基因组成，这些基因分为不同的类别，称为基因类型。基因类型由特定的核苷酸序列分隔，称为基因标记。每个基因类型 $i$ 有一个唯一的起始标记 $\\texttt s_i$ 和一个唯一的结束标记 $\\texttt e_i$。经过许多繁琐的工作（如细菌培养、细胞提取、蛋白质工程等），你的研究小组可以将 DNA 转换为仅由基因标记组成的形式，去除标记之间的所有遗传物质。\n\n你的研究小组提出了一个有趣的假设，即基因的解释取决于某些基因类型的标记是否形成了正确的嵌套结构。要确定基因类型 $i$ 的标记在给定的标记序列 $w$ 中是否形成了正确的嵌套结构，需要考虑 $w$ 的子序列，其中只包含基因类型 $i$ 的标记（$\\texttt s_i$ 和 $\\texttt e_i$），不遗漏任何一个。以下（且仅以下）被认为是正确的嵌套结构：\n\n- $\\texttt s_i \\texttt e_i$\n- $\\texttt s_i N \\texttt e_i$，其中 $N$ 是一个正确的嵌套结构\n- $AB$，其中 $A$ 和 $B$ 是正确的嵌套结构\n\n鉴于你的计算背景，你被分配去研究这个性质，但还有一个进一步的复杂性。你的小组正在研究一种称为环状 DNA 的特定类型的 DNA，这种 DNA 形成一个闭合的环。为了研究环状 DNA 中的嵌套，有必要在某个位置切开环，这会产生一个唯一的标记序列（读取方向由分子性质固定）。基因类型 $i$ 是否形成正确的嵌套现在也取决于环状 DNA 的切割位置。你的任务是找到最大化形成正确嵌套结构的基因类型数量的切割位置。图 D.1 显示了对应于样例输入 1 的一个例子。所示的切割导致基因类型 1 的标记正确嵌套。", "inputFormat": "输入的第一行包含一个整数 $n$ ($1 \\leq n \\leq 10^6$)，表示 DNA 的长度。下一行包含 DNA 序列，即 $n$ 个标记。每个标记是一个字符 $c$ 后跟一个整数 $i$，其中 $c \\in \\{\\texttt s, \\texttt e\\}$ 指定它是起始还是结束标记，$i$ ($1 \\leq i \\leq 10^6$) 是标记的基因类型。给定的 DNA 序列是通过在任意位置切割环状 DNA 获得的。", "outputFormat": "输出一行包含两个整数 $p$ 和 $m$，其中 $p$ 是最大化形成正确嵌套结构的不同基因类型数量的切割位置，$m$ 是这个最大基因类型数量。DNA 在第 $p$ 个输入标记之前被切割（例如，图 D.1 所示的切割有 $p = 3$）。如果有多个切割位置产生相同的最大值 $m$，则输出最小的 $p$。", "hint": "来源：ICPC 2019 世界总决赛。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6255", "type": "P", "difficulty": 4, "samples": [["6 5\n1 2\n1 3\n2 3\n4 5\n5 6\n", "2\n4 5\n6 5"], ["8 8\n1 2\n1 3\n2 3\n3 4\n1 5\n1 6\n6 7\n6 8\n", "3\n1 5\n1 6\n3 4\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2019", "O2优化", "ICPC", "WF"], "title": "[ICPC 2019 WF] Dead-End Detector", "background": "### Warning: If you submit a malicious program, you will be banned.\n### 警告：恶意提交本题将被封号。\n", "description": "The council of your home town has decided to improve road sign placement,especially for dead ends. They have given you a road map, and you must determine where to put up signs to mark the dead ends. They want you to use as few signs as possible.\n\nThe road map is a collection of locations connected by two-way streets. The following rule describes how to obtain a complete placement of dead-end signs. Consider a street $S$ connecting a location $x$ with another location. The $x$-entrance of $S$ gets a dead-end sign if, after entering $S$ from $x$, it is not possible to come back to $x$ without making a U-turn. A U-turn is a 180-degree turn immediately reversing the direction.\n\nTo save costs, you have decided not to install redundant dead-end signs, as specified by the following rule. Consider a street $S$ with a dead-end sign at its $x$-entrance and another street $T$ with a dead-end sign at its $y$-entrance. If, after entering $S$ from $x$, it is possible to go to $y$ and enter $T$ without making a U-turn, the dead-end sign at the $y$-entrance of $T$ is redundant. See Figure E.1 for examples.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/33rn5okp.png)\n\nFigure E.1: Illustration of sample inputs, indicating where non-redundant dead-end signs are placed.\n", "inputFormat": "The first line of input contains two integers $n$ and $m$, where $n$ $(1 \\leq n \\leq 5\\times10^5)$ is the number of locations and $m$ $(0 \\leq m \\leq 5 \\times 10^5)$ is the number of streets. Each of the following $m$ lines contains two integers $v$ and $w$ $(1 \\leq v \\lt w \\leq n)$ indicating that there is a two-way street connecting locations $v$ and $w$. All location pairs in the input are distinct.", "outputFormat": "On the first line, output $k$, the number of dead-end signs installed. On each of the next $k$ lines, output two integers $v$ and $w$ marking that a dead-end sign should be installed at the $v$-entrance of a street connecting locations $v$ and $w$. The lines describing dead-end signs must be sorted in ascending order of $v$-locations,breaking ties in ascending order of $w$-locations.", "hint": "Source: ICPC World Finals 2019 Problem E.", "locale": "en", "translations": {"en": {"title": "[ICPC 2019 WF] Dead-End Detector", "background": "### Warning: If you submit a malicious program, you will be banned.\n### 警告：恶意提交本题将被封号。\n", "description": "The council of your home town has decided to improve road sign placement,especially for dead ends. They have given you a road map, and you must determine where to put up signs to mark the dead ends. They want you to use as few signs as possible.\n\nThe road map is a collection of locations connected by two-way streets. The following rule describes how to obtain a complete placement of dead-end signs. Consider a street $S$ connecting a location $x$ with another location. The $x$-entrance of $S$ gets a dead-end sign if, after entering $S$ from $x$, it is not possible to come back to $x$ without making a U-turn. A U-turn is a 180-degree turn immediately reversing the direction.\n\nTo save costs, you have decided not to install redundant dead-end signs, as specified by the following rule. Consider a street $S$ with a dead-end sign at its $x$-entrance and another street $T$ with a dead-end sign at its $y$-entrance. If, after entering $S$ from $x$, it is possible to go to $y$ and enter $T$ without making a U-turn, the dead-end sign at the $y$-entrance of $T$ is redundant. See Figure E.1 for examples.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/33rn5okp.png)\n\nFigure E.1: Illustration of sample inputs, indicating where non-redundant dead-end signs are placed.\n", "inputFormat": "The first line of input contains two integers $n$ and $m$, where $n$ $(1 \\leq n \\leq 5\\times10^5)$ is the number of locations and $m$ $(0 \\leq m \\leq 5 \\times 10^5)$ is the number of streets. Each of the following $m$ lines contains two integers $v$ and $w$ $(1 \\leq v \\lt w \\leq n)$ indicating that there is a two-way street connecting locations $v$ and $w$. All location pairs in the input are distinct.", "outputFormat": "On the first line, output $k$, the number of dead-end signs installed. On each of the next $k$ lines, output two integers $v$ and $w$ marking that a dead-end sign should be installed at the $v$-entrance of a street connecting locations $v$ and $w$. The lines describing dead-end signs must be sorted in ascending order of $v$-locations,breaking ties in ascending order of $w$-locations.", "hint": "Source: ICPC World Finals 2019 Problem E.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2019 WF] Dead-End Detector", "background": "", "description": "你所在家乡的市政委员会决定改善道路标志的设置，特别是对于死胡同的标志。他们给了你一张道路地图，你需要确定在哪里设置标志来标记死胡同。他们希望你使用尽可能少的标志。\n\n这张道路地图是由通过双向街道连接的多个地点组成的。以下规则描述了如何完成死胡同标志的设置。考虑一条街道 $S$ 连接地点 $x$ 和另一个地点。如果从 $x$ 进入 $S$ 后，无法在不掉头的情况下返回 $x$，则在 $S$ 的 $x$ 入口处设置一个死胡同标志。掉头是指立即反向的 180 度转弯。\n\n为了节省成本，你决定不安装冗余的死胡同标志，具体规则如下。考虑一条在 $x$ 入口处有死胡同标志的街道 $S$ 和另一条在 $y$ 入口处有死胡同标志的街道 $T$。如果从 $x$ 进入 $S$ 后，可以在不掉头的情况下到达 $y$ 并进入 $T$，那么 $T$ 的 $y$ 入口处的死胡同标志是冗余的。参见图 E.1 以获取示例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/33rn5okp.png)\n\n图 E.1：示例输入的说明，指示放置非冗余死胡同标志的位置。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$，其中 $n$ $(1 \\leq n \\leq 5\\times10^5)$ 是地点的数量，$m$ $(0 \\leq m \\leq 5 \\times 10^5)$ 是街道的数量。接下来的 $m$ 行中的每一行包含两个整数 $v$ 和 $w$ $(1 \\leq v < w \\leq n)$，表示有一条双向街道连接地点 $v$ 和 $w$。输入中的所有地点对都是不同的。", "outputFormat": "第一行输出 $k$，表示安装的死胡同标志的数量。在接下来的 $k$ 行中，每行输出两个整数 $v$ 和 $w$，表示在连接地点 $v$ 和 $w$ 的街道的 $v$ 入口处应安装一个死胡同标志。描述死胡同标志的行必须按 $v$ 位置升序排序，若有相同则按 $w$ 位置升序排序。", "hint": "来源：ICPC 世界总决赛 2019 问题 E。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6256", "type": "P", "difficulty": 7, "samples": [["10 20 5\n32 50 12 60\n30 60 8 70\n25 70 0 80\n15 30 28 40\n5 20 14 25\n", "2"], ["2 4 2\n3 2 0 3\n5 2 1 5", "1"]], "limits": {"time": [15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "O2优化", "ICPC", "WF"], "title": "[ICPC 2019 WF] Directing Rainfall", "background": "", "description": "Porto and the nearby Douro Valley are famous for producing port wine. Wine lovers from all over the world come here to enjoy this sweet wine where it is made. The International Consortium of Port Connoisseurs (ICPC) is organizing tours to the vineyards that are upstream on the Douro River. To make visits more pleasurable for tourists, the ICPC has recently installed sun tarps above the vineyards. The tarps protect tourists from sunburn when strolling among the vines and sipping on a vintage port.\n\nUnfortunately, there is a small problem with the tarps. Grapes need sunlight and water to grow. While the tarps let through enough sunlight, they are entirely waterproof. This means that rainwater might not\nreach the vineyards below. If nothing is done, this year's wine harvest is in peril!\n\nThe ICPC wants to solve their problem by puncturing the tarps so that they let rainwater through to the vineyards below. Since there is little time to waste before the rainy season starts, the ICPC wants to make the minimum number of punctures that achieve this goal. We will consider a two-dimensional version of this problem. The vineyard to be watered is an interval on the $x$-axis, and the tarps are modeled as line segments above the $x$-axis. The tarps are slanted, that is, not parallel to the $x-$ or $y-$ axes (see Figure F.1 for an example). Rain falls straight down from infinitely high. When any rain falls on a tarp, it flows toward the tarp's lower end and falls off from there, unless there is a puncture between the place where the rain falls and the tarp's lower end—in which case the rain will fall through the puncture instead. After the rain falls off a tarp, it continues to fall vertically.\n\nThis repeats until the rain hits the ground (the $x$-axis).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/acu9ydhw.png)\n\nFor legal reasons you have to ensure that at least some of the rain that reaches the vineyard originated from directly above the vineyard. This is to prevent any vineyard from stealing all their rain from neighboring vineyards (see the second sample input for an example).", "inputFormat": "The first line of input contains three integers $l$ , $r$ and $n$, where $(l,r)$ $(0 \\leq l \\lt r \\leq 10^9)$ is the interval representing the vineyard and $n$ $(0 \\leq n \\leq 5 \\times 10^5)$ is the number of tarps. Each of the following $n$ linesdescribes a tarp and contains four integers $x_1, y_1, x_2, y_2$ , where $(x_1, y_1)$ is the position of the tarp's lowerend and $(x_2, y_2)$ is the position of the higher end $(0 \\leq x_1, x_2 \\leq 10^9 , x_1≠x_2, $ and $ 0 \\lt y_1 \\lt y_2 \\leq 10^9)$.\nThe $x$-coordinates given in the input ($l$, $r$, and the values of $x_1$ and $x_2$ for all tarps) are all distinct. Thetarps described in the input will not intersect, and no endpoint of a tarp will lie on another tarp.", "outputFormat": "Output the smallest number of punctures that need to be made to get some rain falling from above the vineyard to the vineyard.", "hint": "Source: ICPC World Finals 2019 Problem F: Directing Rainfall.", "locale": "en", "translations": {"en": {"title": "[ICPC 2019 WF] Directing Rainfall", "background": "", "description": "Porto and the nearby Douro Valley are famous for producing port wine. Wine lovers from all over the world come here to enjoy this sweet wine where it is made. The International Consortium of Port Connoisseurs (ICPC) is organizing tours to the vineyards that are upstream on the Douro River. To make visits more pleasurable for tourists, the ICPC has recently installed sun tarps above the vineyards. The tarps protect tourists from sunburn when strolling among the vines and sipping on a vintage port.\n\nUnfortunately, there is a small problem with the tarps. Grapes need sunlight and water to grow. While the tarps let through enough sunlight, they are entirely waterproof. This means that rainwater might not\nreach the vineyards below. If nothing is done, this year's wine harvest is in peril!\n\nThe ICPC wants to solve their problem by puncturing the tarps so that they let rainwater through to the vineyards below. Since there is little time to waste before the rainy season starts, the ICPC wants to make the minimum number of punctures that achieve this goal. We will consider a two-dimensional version of this problem. The vineyard to be watered is an interval on the $x$-axis, and the tarps are modeled as line segments above the $x$-axis. The tarps are slanted, that is, not parallel to the $x-$ or $y-$ axes (see Figure F.1 for an example). Rain falls straight down from infinitely high. When any rain falls on a tarp, it flows toward the tarp's lower end and falls off from there, unless there is a puncture between the place where the rain falls and the tarp's lower end—in which case the rain will fall through the puncture instead. After the rain falls off a tarp, it continues to fall vertically.\n\nThis repeats until the rain hits the ground (the $x$-axis).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/acu9ydhw.png)\n\nFor legal reasons you have to ensure that at least some of the rain that reaches the vineyard originated from directly above the vineyard. This is to prevent any vineyard from stealing all their rain from neighboring vineyards (see the second sample input for an example).", "inputFormat": "The first line of input contains three integers $l$ , $r$ and $n$, where $(l,r)$ $(0 \\leq l \\lt r \\leq 10^9)$ is the interval representing the vineyard and $n$ $(0 \\leq n \\leq 5 \\times 10^5)$ is the number of tarps. Each of the following $n$ linesdescribes a tarp and contains four integers $x_1, y_1, x_2, y_2$ , where $(x_1, y_1)$ is the position of the tarp's lowerend and $(x_2, y_2)$ is the position of the higher end $(0 \\leq x_1, x_2 \\leq 10^9 , x_1≠x_2, $ and $ 0 \\lt y_1 \\lt y_2 \\leq 10^9)$.\nThe $x$-coordinates given in the input ($l$, $r$, and the values of $x_1$ and $x_2$ for all tarps) are all distinct. Thetarps described in the input will not intersect, and no endpoint of a tarp will lie on another tarp.", "outputFormat": "Output the smallest number of punctures that need to be made to get some rain falling from above the vineyard to the vineyard.", "hint": "Source: ICPC World Finals 2019 Problem F: Directing Rainfall.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2019 WF] Directing Rainfall", "background": "", "description": "波尔图和附近的杜罗河谷因生产波特酒而闻名。来自世界各地的葡萄酒爱好者来到这里品尝这种甜美的葡萄酒。国际波特酒鉴赏家联盟（ICPC）正在组织到杜罗河上游葡萄园的旅行。为了让游客的参观更加愉快，ICPC 最近在葡萄园上方安装了遮阳篷。这些遮阳篷保护游客在葡萄藤间漫步和品尝陈年波特酒时不被晒伤。\n\n不幸的是，遮阳篷存在一个小问题。葡萄需要阳光和水才能生长。虽然遮阳篷能透过足够的阳光，但它们完全防水。这意味着雨水可能无法到达下方的葡萄园。如果不采取措施，今年的葡萄酒收成将岌岌可危！\n\nICPC 想通过在遮阳篷上打孔来解决这个问题，以便雨水能透过遮阳篷到达下方的葡萄园。由于雨季即将到来，时间紧迫，ICPC 希望以最少的打孔次数实现这一目标。我们将考虑这个问题的二维版本。需要浇灌的葡萄园是 $x$ 轴上的一个区间，遮阳篷被建模为 $x$ 轴上方的线段。遮阳篷是倾斜的，即不平行于 $x$ 轴或 $y$ 轴（参见图 F.1 了解示例）。雨水从无限高处直线下落。当雨水落在遮阳篷上时，它会流向遮阳篷的低端并从那里落下，除非在雨水落下的地方和遮阳篷的低端之间有一个孔——在这种情况下，雨水将通过孔落下。雨水从遮阳篷上落下后，继续垂直下落。\n\n这种情况会重复，直到雨水落到地面（$x$ 轴）上。\n\n出于法律原因，您必须确保至少有一些雨水是直接从葡萄园上方落到葡萄园的。这是为了防止任何葡萄园从邻近的葡萄园窃取所有的雨水（参见第二个样例输入了解示例）。", "inputFormat": "输入的第一行包含三个整数 $l$、$r$ 和 $n$，其中 $(l,r)$ $(0 \\leq l < r \\leq 10^9)$ 是表示葡萄园的区间，$n$ $(0 \\leq n \\leq 5 \\times 10^5)$ 是遮阳篷的数量。接下来的 $n$ 行中的每一行描述一个遮阳篷，包含四个整数 $x_1, y_1, x_2, y_2$，其中 $(x_1, y_1)$ 是遮阳篷低端的位置，$(x_2, y_2)$ 是高端的位置 $(0 \\leq x_1, x_2 \\leq 10^9, x_1 \neq x_2, $ 且 $ 0 < y_1 < y_2 \\leq 10^9)$。\n\n输入中给出的 $x$ 坐标（$l$、$r$ 以及所有遮阳篷的 $x_1$ 和 $x_2$ 的值）都是不同的。输入中描述的遮阳篷不会相交，且没有遮阳篷的端点会位于另一个遮阳篷上。", "outputFormat": "输出需要打孔的最小次数，以便从葡萄园上方落下的雨水能够到达葡萄园。", "hint": "来源：ICPC 世界总决赛 2019 问题 F：引导降雨。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6257", "type": "P", "difficulty": 6, "samples": [["10 5\nS 0\nY 1\nR 2\nE 3\nN 4\nE 5\nA 6\nD 7\nY 7\nR 9\nRY\nE\nN\nS\nAY", "2\n2\n1\n1\n0"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "O2优化", "ICPC", "WF"], "title": "[ICPC 2019 WF] First of Her Name", "background": "### Warning: If you submit a malicious program, you will be banned.\n### 警告：恶意提交本题将被封号。\n", "description": "In the Royal Family, names are very important! As the Royal Historian you have been charged with analyzing the patterns in the names of the Royal Ladies in the realm.\n\nThere have been n Royal Ladies, for convenience numbered from 1 to $n$. The name of each Lady is anuppercase letter concatenated with the name of her mother. The exception is the Lady numbered 1, the\nfounder of the Royal Family, whose name is just a single uppercase letter.\n\nFor example, ENERYS could be the mother of AENERYS (as the name AENERYS consists of the single uppercase letter 'A' concatenated with ENERYS, which is her mother's name). Similarly, AENERYS could be the mother of DAENERYS and YAENERYS.\n\nYou are given the description of all the Royal Ladies. Your task is to determine, for certain interesting strings $s$, the number of Royal Ladies for whom s is a prefix of their name.\n\nFor example, consider Sample Input 1 below, with a Royal Line that goes straight from the founder S to AENERYS (through YS, RYS, ERYS, NERYS and ENERYS), with each Lady having exactly one daughter. Then AENERYS has two daughters—DAENERYS and YAENERYS, with the latter havingone daughter, RYAENERYS.\n\nIn such a family, RY is a prefix of the names of two ladies: RYS and RYAENERYS. E is a prefix of the names of ERYS and ENERYS. N is a prefix only of NERYS's name, while S is a prefix only of the nameof the founder, S. AY is not a prefix of any Royal Lady's name.\n", "inputFormat": "The first line of input contains two integers $n$ and $k$, where $n$ $(1 \\leq n \\leq 10^6)$ is the total number of Royal Ladies and $k$ $(1 \\leq k \\leq 10^6)$ is the number of query strings.\n\nThen follow n lines describing the Royal Ladies. The $i^{th}$ of these lines describes the Royal Lady numbered $i$, and contains an uppercase letter $c_i$ ('A'–'Z') and an integer $p_i$, where $c_i$ is the first letter of the name of Lady $i$, and $p_i$ $(p1 = 0$ and $1 \\leq pi \\lt i$ for $i \\gt 1)$ is the number of her mother (or $0$, in the case\nof the First Lady). All the names are unique.\n\nThe remaining $k$ lines each contain one nonempty query string, consisting only of uppercase letters. The sum of the lengths of the query strings is at most $10^6$.", "outputFormat": "Output $k$ lines, with the $i^{th}$ line containing the number of Royal Ladies who have the $i^{th}$ query string as a prefix of their name.", "hint": "Source: ICPC World Finals 2019.", "locale": "en", "translations": {"en": {"title": "[ICPC 2019 WF] First of Her Name", "background": "### Warning: If you submit a malicious program, you will be banned.\n### 警告：恶意提交本题将被封号。\n", "description": "In the Royal Family, names are very important! As the Royal Historian you have been charged with analyzing the patterns in the names of the Royal Ladies in the realm.\n\nThere have been n Royal Ladies, for convenience numbered from 1 to $n$. The name of each Lady is anuppercase letter concatenated with the name of her mother. The exception is the Lady numbered 1, the\nfounder of the Royal Family, whose name is just a single uppercase letter.\n\nFor example, ENERYS could be the mother of AENERYS (as the name AENERYS consists of the single uppercase letter 'A' concatenated with ENERYS, which is her mother's name). Similarly, AENERYS could be the mother of DAENERYS and YAENERYS.\n\nYou are given the description of all the Royal Ladies. Your task is to determine, for certain interesting strings $s$, the number of Royal Ladies for whom s is a prefix of their name.\n\nFor example, consider Sample Input 1 below, with a Royal Line that goes straight from the founder S to AENERYS (through YS, RYS, ERYS, NERYS and ENERYS), with each Lady having exactly one daughter. Then AENERYS has two daughters—DAENERYS and YAENERYS, with the latter havingone daughter, RYAENERYS.\n\nIn such a family, RY is a prefix of the names of two ladies: RYS and RYAENERYS. E is a prefix of the names of ERYS and ENERYS. N is a prefix only of NERYS's name, while S is a prefix only of the nameof the founder, S. AY is not a prefix of any Royal Lady's name.\n", "inputFormat": "The first line of input contains two integers $n$ and $k$, where $n$ $(1 \\leq n \\leq 10^6)$ is the total number of Royal Ladies and $k$ $(1 \\leq k \\leq 10^6)$ is the number of query strings.\n\nThen follow n lines describing the Royal Ladies. The $i^{th}$ of these lines describes the Royal Lady numbered $i$, and contains an uppercase letter $c_i$ ('A'–'Z') and an integer $p_i$, where $c_i$ is the first letter of the name of Lady $i$, and $p_i$ $(p1 = 0$ and $1 \\leq pi \\lt i$ for $i \\gt 1)$ is the number of her mother (or $0$, in the case\nof the First Lady). All the names are unique.\n\nThe remaining $k$ lines each contain one nonempty query string, consisting only of uppercase letters. The sum of the lengths of the query strings is at most $10^6$.", "outputFormat": "Output $k$ lines, with the $i^{th}$ line containing the number of Royal Ladies who have the $i^{th}$ query string as a prefix of their name.", "hint": "Source: ICPC World Finals 2019.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2019 WF] First of Her Name", "background": "", "description": "众所周知，皇室家族的名字非常有讲究。而作为研究皇室的历史学家的你，最近接到了一个艰巨的任务——分析王国历史中所有皇室夫人的名字。\r\n\r\n王国历史上有 $n$ 位皇室夫人，方便起见，我们将其从 $1$ 至 $n$ 编号。除了 $1$ 号夫人外，其余夫人的名字均为一个大写字母连接着她母亲的名字。而 $1$ 号夫人作为王国的首任王后，她的名字只有一个大写字母。\r\n\r\n例如，由于 `AENERYS` 由 `A` 与 `ENERYS` 组成，因此 `ENERYS` 是 `AENERYS` 的母亲。相似地，`AENERYS` 是 `DAENERYS` 与 `YAENERYS` 的母亲。\r\n\r\n你知道王国历史上所有皇室夫人的姓名与关系，而你需要完成的任务是，对于其他历史学家感兴趣的名字串 $s$，总共有多少位夫人的名字是以 $s$ 起始的。\r\n\r\n例如在样例的皇室族谱中，`S` 至 `AENERYS` 的这一支（包含 `YS`、`RYS`、`ERYS`、`NERYS` 与 `ENERYS` 这几位夫人）均只有一位女儿。接下来 `AENERYS` 有两位女儿，分别是 `DAENERYS`，以及女儿是 `RYAENERYS` 的 `YAENERYS`。\r\n\r\n在这个皇室家族内，有两位夫人的名字以 `RY` 起始，她们是 `RYS` 与 `RYAENERYS`。而 `ERYS` 与 `ENERYS` 均以 `E` 起始。名字以 `N` 起始的仅有一位夫人 `NERYS`。同样地，以 `S` 起始的仅有首位王后 `S`。而没有任何一位夫人的名字以 `AY` 起始。", "inputFormat": "第一行有两个整数 $n,k$，分别代表王国历史上皇室夫人总数，以及其他历史学家感兴趣的名字串的个数。\r\n\r\n接下来 $n$ 行描述所有皇室夫人的姓名与关系。第 $i+1$ 行描述第 $i$ 位夫人的资料 $c_i$ 与 $p_i$，其中字符 $c_i$ 表示她名字的首位字母，$p_i$ 为她母亲的编号。对于编号为 $1$ 的首位王后，$p_1=0$。所有夫人的名字均不重复。\r\n\r\n接下来 $k$ 行，每行为一个大写字母构成的非空串，代表一个其他历史学家感兴趣的名字串。", "outputFormat": "输出 $k$ 行，第 $i$ 行为一个整数，代表总共有多少位夫人的名字是以第 $i$ 个感兴趣的名字串起始的。", "hint": "$1\\leq n\\leq 10^6$，$1\\leq k\\leq 10^6$，$p_1=0$，特别地，对于 $1\\lt i\\leq n$，保证有 $1\\leq p_i\\lt i$。感兴趣的名字串总长不超过 $10^6$。", "locale": "zh-CN"}}}
{"pid": "P6258", "type": "P", "difficulty": 5, "samples": [["6 2\n2\n3\n4\n5\n4\n3\n", "1\n2\n4\n5\n3\n1"], ["5 3\n2\n3\n1\n5\n4\n", "3\n3\n3\n2\n2"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "O2优化", "ICPC", "WF"], "title": "[ICPC 2019 WF] Hobson's Trains", "background": "### Warning: If you submit a malicious program, you will be banned.\n### 警告：恶意提交本题将被封号。\n", "description": "Mr. Hobson has retired from running a stable and has invested in a more modern form of transport,trains. He has built a rail network with n stations. However, he has retained his commitment to free the passenger from the burden of too many choices: from each station, a passenger can catch a train to exactly one other station. Such a journey is referred to as a **$leg$**. Note that this is a one-way journey, and it might not be possible to get back again.\n\nHobson also offers exactly one choice of ticket, which allows a passenger to travel up to $k$ legs in one trip. At the exit from each station is an automated ticket reader (only one, so that passengers do not need\nto decide which to use). The reader checks that the distance from the initial station to the final station does not exceed $k$ legs.\n\nEach ticket reader must be programmed with a list of valid starting stations, but the more memory this list needs, the more expensive the machine will be. Help Hobson by determining, for each station $A$, the\nnumber of stations (including $A$) from which a customer can reach $A$ in at most $k$ legs.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l1j8vud2.png)", "inputFormat": "The first line of input contains two integers $n$ and $k$, where $n$ $(2 \\leq n \\leq 5\\times10^5)$ is the number of stations and $k$ $(1 \\leq k \\leq n − 1)$ is the maximum number of legs that may be traveled on a ticket. Then follow $n$ lines, the $i^{th}$ of which contains an integer $d_i$ $(1 \\leq d_i \\leq n$ and $d_i ≠ i)$, the station which may be reached from station $i$ in one leg.\n", "outputFormat": "Output $n$ lines, with the $i^{th}$ line containing the number of stations from which station $i$ can be reached in at most $k$ legs.\n", "hint": "Source: ICPC World Finals 2019.", "locale": "en", "translations": {"en": {"title": "[ICPC 2019 WF] Hobson's Trains", "background": "### Warning: If you submit a malicious program, you will be banned.\n### 警告：恶意提交本题将被封号。\n", "description": "Mr. Hobson has retired from running a stable and has invested in a more modern form of transport,trains. He has built a rail network with n stations. However, he has retained his commitment to free the passenger from the burden of too many choices: from each station, a passenger can catch a train to exactly one other station. Such a journey is referred to as a **$leg$**. Note that this is a one-way journey, and it might not be possible to get back again.\n\nHobson also offers exactly one choice of ticket, which allows a passenger to travel up to $k$ legs in one trip. At the exit from each station is an automated ticket reader (only one, so that passengers do not need\nto decide which to use). The reader checks that the distance from the initial station to the final station does not exceed $k$ legs.\n\nEach ticket reader must be programmed with a list of valid starting stations, but the more memory this list needs, the more expensive the machine will be. Help Hobson by determining, for each station $A$, the\nnumber of stations (including $A$) from which a customer can reach $A$ in at most $k$ legs.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l1j8vud2.png)", "inputFormat": "The first line of input contains two integers $n$ and $k$, where $n$ $(2 \\leq n \\leq 5\\times10^5)$ is the number of stations and $k$ $(1 \\leq k \\leq n − 1)$ is the maximum number of legs that may be traveled on a ticket. Then follow $n$ lines, the $i^{th}$ of which contains an integer $d_i$ $(1 \\leq d_i \\leq n$ and $d_i ≠ i)$, the station which may be reached from station $i$ in one leg.\n", "outputFormat": "Output $n$ lines, with the $i^{th}$ line containing the number of stations from which station $i$ can be reached in at most $k$ legs.\n", "hint": "Source: ICPC World Finals 2019.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2019 WF] Hobson's Trains", "background": null, "description": "Hobson 先生从管理马厩的工作中退休后，投资于一种更加现代的交通方式：火车。\n\n他已经修建了一个包含 $n$ 个火车站的铁路网。然而，他兑现了让乘客摆脱选择困难症的承诺：对于每个站点，乘客只能乘坐火车前往一个站点，别无其它选择。\n\n这样的一段旅程被称作一趟。要注意这是单向的旅程，可能无法再回到出发点。\n\nHobson 同样也只提供一种车票，允许乘客一次旅行的距离不超过 $k$ 趟。在每个站点的出口会有一个自动读票机（只有一个，所以乘客就不用纠结于要用哪个）。机器会检查从始发站到到达站的距离是否不超过 $k$ 趟。\n\n每个读票机必须编入一个合法始发站列表，但是列表消耗的存储空间越多，机器就越贵。\n\n请帮助 Hobson 先生确定：对于每个站点 $A$，能够在最多 $k$ 趟的旅程中到达 $A$ 的站点个数（包含 $A$ 本身）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1hewt4ho.png)\n\n上图为样例输入 1 对应的示意图。每个圆圈代表了一个站点，圆圈旁边的数字为当 $k=2$ 时需要编入读票机的站点编号。", "inputFormat": "第一行包含两个整数 $n, k$，$n$ 为站点个数，$k$ 为一张票允许旅行的最多趟数。  \n接下来 $n$ 行，第 $i$ 行包含一个整数 $d_i$，表示第 $i$ 个站点经过一趟到达的站点。", "outputFormat": "输出 $n$ 行，第 $i$ 行输出能在 $k$ 趟内到达站点 $i$ 的站点数目。\n\n**【译者注】**\n\n在不侵犯原题版权的情况下，本题面中文翻译基于[知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议](http://creativecommons.org/licenses/by-nc-sa/4.0/)发布，注明出处时需指向本题链接。\n\nTranslate By @小粉兔", "hint": "对于全部数据，满足 $2\\le n\\le 5 \\times 10^5,1\\le k\\le n - 1$，对于任意 $1 \\le i \\le n$ 都满足 $1 \\le d_i \\le n$ 且 $d_i\\ne i$。", "locale": "zh-CN"}}}
