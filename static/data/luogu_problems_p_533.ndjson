{"pid": "P11821", "type": "P", "difficulty": 7, "samples": [["4 998244853", "9"], ["114514 1000000007\n", "637348702\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["递推", "2019", "生成树", "组合数学", "容斥原理", "高斯消元", "PA（波兰）"], "title": "[PA 2019 Final] 数图 / Grafy 加强版", "background": "P11817 的加强版。本题存在 $\\Theta(\\sqrt n\\log n)$ 的做法。\n\n本题数据为自造。\n\nstd: joke3579，validator & generator: Starrykiller。\n\n**请勿提交 OEIS 题解。**\n\n", "description": "求出 $n$ 个节点的满足以下条件的**有标号有向简单图**的数量：\n\n- $\\forall 1\\le i\\le n$，$\\operatorname{deg_{out}}(i)=\\operatorname{deg_{in}}(i)=2$。\n\n这里，$\\operatorname{deg_{out}}(u)$ 指节点 $u$ 的出度，$\\operatorname{deg_{in}}(u)$ 指节点 $u$ 的入度。\n\n你只需要输出答案对给定大素数 $p$ 取模后的结果。\n\n\n注意我们是对**有标号**的「有向简单图」计数。也就是说，这张图中无重边自环。注意 $u\\to v$ 和 $v\\to u$ 同时出现是允许的。\n\n\n", "inputFormat": "一行两个正整数 $n,p$。", "outputFormat": "一行一个非负整数，表示答案。", "hint": "- $3\\le n\\le 10^7$；\n- $10^8+7\\le p\\le 10^9+7$，$p$ 为素数。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2019 Final] 数图 / Grafy 加强版", "background": "P11817 的加强版。本题存在 $\\Theta(\\sqrt n\\log n)$ 的做法。\n\n本题数据为自造。\n\nstd: joke3579，validator & generator: Starrykiller。\n\n**请勿提交 OEIS 题解。**\n\n", "description": "求出 $n$ 个节点的满足以下条件的**有标号有向简单图**的数量：\n\n- $\\forall 1\\le i\\le n$，$\\operatorname{deg_{out}}(i)=\\operatorname{deg_{in}}(i)=2$。\n\n这里，$\\operatorname{deg_{out}}(u)$ 指节点 $u$ 的出度，$\\operatorname{deg_{in}}(u)$ 指节点 $u$ 的入度。\n\n你只需要输出答案对给定大素数 $p$ 取模后的结果。\n\n\n注意我们是对**有标号**的「有向简单图」计数。也就是说，这张图中无重边自环。注意 $u\\to v$ 和 $v\\to u$ 同时出现是允许的。\n\n\n", "inputFormat": "一行两个正整数 $n,p$。", "outputFormat": "一行一个非负整数，表示答案。", "hint": "- $3\\le n\\le 10^7$；\n- $10^8+7\\le p\\le 10^9+7$，$p$ 为素数。\n\n", "locale": "zh-CN"}}}
{"pid": "P11822", "type": "P", "difficulty": 6, "samples": [["5\n1 3 3 2 4\n", "5 8 19 39 31\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "根号分治", "湖北"], "title": "[湖北省选模拟 2025] 团队分组 / divide", "background": "", "description": "小 X 决定建立一个团队，但是现在团队里只有小 X 一个人。\n\n在接下的 $n$ 天里，小 X 每天都会招募到一个人，其中加入的第 $i$ 个人的能力值为 $v_i$，小 X 的能力值为 $v_0=10^{10^{100}}$。\n\n为了更好管理整个团队，小 X 需要将团队分成小组。具体的，假设现在已经有 $k$ 个人加入了团队，小 X 希望找到一个序列 $0=a_0<a_1<\\dots <a_m=k+1$，使得对于所有 $0\\le i<m-1$，有 $\\sum\\limits_{j=a_i}^{a_{i+1}-1}v_j>\\sum\\limits_{j=a_{i+1}}^{a_{i+2}-1}v_j$。\n\n为了让新加入的队员们感受到幸福感，小 X 希望 $a_m$ 尽可能大，在此基础上 $a_{m-1}$ 尽可能大，在此基础上 $a_{m-2}$ 尽可能大，以此类推。换句话说，让序列 $a_m,a_{m-1},a_{m-2}\\dots a_1$ 的字典序尽可能大。\n\n但是小 X 现在正忙于招募队员，所以他希望你来帮他解决这一问题，你只需要告诉他在 $k=1,2\\dots n$ 的时候， $\\sum\\limits_{i=0}^m(i\\times a_i)$ 的值即可。", "inputFormat": "第一行包含一个整数 $n$。\n\n第二行包含 $n$ 个整数，其中第 $i$ 个数为 $v_i$。", "outputFormat": "输出仅一行，包含 $n$ 个以空格隔开的整数，其中第 $i$ 个数表示 $k=i$ 时的答案。", "hint": "**【样例 1 解释】**\n\n- 对于 $k=1$，有 $m=2$，$a_0=0,a_1=1,a_2=2$，输出 $0\\times 0+1\\times 1+2\\times 2=5$。\n- 对于 $k=2$，有 $m=2$，$a_0=0,a_1=2,a_2=3$，输出 $0\\times 0+1\\times 2+2\\times 3=8$。\n- 对于 $k=3$，有 $m=3$，$a_0=0,a_1=1,a_2=3,a_3=4$，输出 $0\\times 0+1\\times 1+2\\times 3+3\\times 4=19$。\n- 对于 $k=4$，有 $m=4$，$a_0=0,a_1=1,a_2=3,a_3=4,a_4=5$，输出 $0\\times 0+1\\times 1+2\\times 3+3\\times 4+4\\times 5=39$。\n- 对于 $k=5$，有 $m=3$，$a_0=0,a_1=3,a_2=5,a_3=6$，输出 $0\\times 0+1\\times 3+2\\times 5+3\\times 6=31$。\n\n**【样例 2】**\n\n见选手目录下的 `divide/divide2.in` 与 `divide/divide2.ans`。\n\n样例 $2$ 满足测试点 $1\\sim 3$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 `divide/divide3.in` 与 `divide/divide3.ans`。\n\n样例 $3$ 满足测试点 $4\\sim 6$ 的限制。\n\n**【样例 4】**\n\n见选手目录下的 `divide/divide4.in` 与 `divide/divide4.ans`。\n\n样例 $4$ 满足测试点 $7\\sim 10$ 的限制。\n\n**【样例 5】**\n\n见选手目录下的 `divide/divide5.in` 与 `divide/divide5.ans`。\n\n样例 $5$ 满足测试点 $13\\sim 15$ 的限制。\n\n**【子任务】**\n\n对于全部的测试数据，保证 $1\\le n\\le 10^5$，$1\\le v_i\\le n$。\n\n| 测试点 | $n \\le $ | 特殊性质 |\n| :--: | :--: | :--: |\n| $1\\sim 3$ | $10$ | 无 |\n| $4\\sim 6$ | $100$ | 无 |\n| $7\\sim 10$ | $5000$ | 无 |\n| $11,12$ | $5\\times 10^4$ | 无 |\n| $13\\sim 15$ | $10^5$ | $v_i$ 随机生成 |\n| $16\\sim 20$ | $10^5$ | 无", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2025] 团队分组 / divide", "background": "", "description": "小 X 决定建立一个团队，但是现在团队里只有小 X 一个人。\n\n在接下的 $n$ 天里，小 X 每天都会招募到一个人，其中加入的第 $i$ 个人的能力值为 $v_i$，小 X 的能力值为 $v_0=10^{10^{100}}$。\n\n为了更好管理整个团队，小 X 需要将团队分成小组。具体的，假设现在已经有 $k$ 个人加入了团队，小 X 希望找到一个序列 $0=a_0<a_1<\\dots <a_m=k+1$，使得对于所有 $0\\le i<m-1$，有 $\\sum\\limits_{j=a_i}^{a_{i+1}-1}v_j>\\sum\\limits_{j=a_{i+1}}^{a_{i+2}-1}v_j$。\n\n为了让新加入的队员们感受到幸福感，小 X 希望 $a_m$ 尽可能大，在此基础上 $a_{m-1}$ 尽可能大，在此基础上 $a_{m-2}$ 尽可能大，以此类推。换句话说，让序列 $a_m,a_{m-1},a_{m-2}\\dots a_1$ 的字典序尽可能大。\n\n但是小 X 现在正忙于招募队员，所以他希望你来帮他解决这一问题，你只需要告诉他在 $k=1,2\\dots n$ 的时候， $\\sum\\limits_{i=0}^m(i\\times a_i)$ 的值即可。", "inputFormat": "第一行包含一个整数 $n$。\n\n第二行包含 $n$ 个整数，其中第 $i$ 个数为 $v_i$。", "outputFormat": "输出仅一行，包含 $n$ 个以空格隔开的整数，其中第 $i$ 个数表示 $k=i$ 时的答案。", "hint": "**【样例 1 解释】**\n\n- 对于 $k=1$，有 $m=2$，$a_0=0,a_1=1,a_2=2$，输出 $0\\times 0+1\\times 1+2\\times 2=5$。\n- 对于 $k=2$，有 $m=2$，$a_0=0,a_1=2,a_2=3$，输出 $0\\times 0+1\\times 2+2\\times 3=8$。\n- 对于 $k=3$，有 $m=3$，$a_0=0,a_1=1,a_2=3,a_3=4$，输出 $0\\times 0+1\\times 1+2\\times 3+3\\times 4=19$。\n- 对于 $k=4$，有 $m=4$，$a_0=0,a_1=1,a_2=3,a_3=4,a_4=5$，输出 $0\\times 0+1\\times 1+2\\times 3+3\\times 4+4\\times 5=39$。\n- 对于 $k=5$，有 $m=3$，$a_0=0,a_1=3,a_2=5,a_3=6$，输出 $0\\times 0+1\\times 3+2\\times 5+3\\times 6=31$。\n\n**【样例 2】**\n\n见选手目录下的 `divide/divide2.in` 与 `divide/divide2.ans`。\n\n样例 $2$ 满足测试点 $1\\sim 3$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 `divide/divide3.in` 与 `divide/divide3.ans`。\n\n样例 $3$ 满足测试点 $4\\sim 6$ 的限制。\n\n**【样例 4】**\n\n见选手目录下的 `divide/divide4.in` 与 `divide/divide4.ans`。\n\n样例 $4$ 满足测试点 $7\\sim 10$ 的限制。\n\n**【样例 5】**\n\n见选手目录下的 `divide/divide5.in` 与 `divide/divide5.ans`。\n\n样例 $5$ 满足测试点 $13\\sim 15$ 的限制。\n\n**【子任务】**\n\n对于全部的测试数据，保证 $1\\le n\\le 10^5$，$1\\le v_i\\le n$。\n\n| 测试点 | $n \\le $ | 特殊性质 |\n| :--: | :--: | :--: |\n| $1\\sim 3$ | $10$ | 无 |\n| $4\\sim 6$ | $100$ | 无 |\n| $7\\sim 10$ | $5000$ | 无 |\n| $11,12$ | $5\\times 10^4$ | 无 |\n| $13\\sim 15$ | $10^5$ | $v_i$ 随机生成 |\n| $16\\sim 20$ | $10^5$ | 无", "locale": "zh-CN"}}}
{"pid": "P11823", "type": "P", "difficulty": 7, "samples": [["abaxyaba\n4\n2 3 7 8 2\n1 2 7 8 2\n5 8 1 4 3\n5 8 1 4 4", "1\n3\n2\n-1\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "后缀自动机 SAM", "动态树 LCT", "分块", "湖北"], "title": "[湖北省选模拟 2025] 最后的台词 / lines", "background": "", "description": "现某戏剧拟从一段优美的文字中截取若干片段作为剧本中的台词。具体的要求如下：\n\n1. 剧本由若干句从给定文字中截取的台词组成。即，每句台词都必须是给定的字符串 $S$ 的一个子串。\n2. 相邻的两句台词必须可以相互衔接。具体而言，给定一衔接系数 $k$，每一句台词的长度为 $k$ 的后缀必须和下一句台词的长度为 $k$ 的前缀相同。\n3. 剧本最初的台词和最后的台词已经确定，第一句台词为 $S_{l_1\\ldots r_1}$，最后一句台词为 $S_{l_2\\ldots r_2}$。\n\n现已知字符串 $S$，请你编写程序，对于多组给定的 $l_1, r_1, l_2, r_2$ 和衔接系数 $k$，计算是否存在满足上述限制的剧本。\n如果存在，至少包含多少句台词。", "inputFormat": "第一行包含一个由小写英文字母构成的字符串 $S$。\n\n第二行包含一个正整数 $q$。\n\n接下来 $q$ 行，每行包含五个由空格分开的正整数 $l_1, r_1, l_2, r_2, k$，描述一组询问。", "outputFormat": "对于每组询问，输出一行一个整数。如果不存在满足题中限制的剧本，则输出 `-1`。否则输出所求的最小值。\n", "hint": "**【样例 1 解释】**\n\n对于第一组询问，给定的第一句台词和最后一句台词是完全相同的，因此剧本可以仅包含这一个字符串。\n\n对于第二组询问，一种可行的方案为 $\\{\\text{ab}, \\text{aba}, \\text{ba}\\}$。\n\n对于第三组询问，一种可行的方案为 $\\{\\text{yaba}, \\text{abax}\\}$。\n\n对于第四组询问，可以证明不存在可以满足题目中要求的剧本。\n\n**【样例 2】**\n\n见选手目录下的 `lines/lines2.in` 与 `lines/lines2.ans`。\n\n样例 $2$ 满足测试点 $2\\sim 3$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 `lines/lines3.in` 与 `lines/lines3.ans`。\n\n样例 $3$ 满足测试点 $2\\sim 3$ 的限制。\n\n**【样例 4】**\n\n见选手目录下的 `lines/lines4.in` 与 `lines/lines4.ans`。\n\n样例 $4$ 满足测试点 $11\\sim 12$ 的限制。\n\n**【样例 5】**\n\n见选手目录下的 `lines/lines5.in` 与 `lines/lines5.ans`。\n\n样例 $5$ 满足测试点 $11\\sim 12$ 的限制。\n\n**【子任务】**\n\n对于全部的测试数据，保证 $1 \\le |S| \\le 10^6$，$1 \\le q \\le 10^6$，$1 \\le l_1 + k - 1 \\le r_1 \\le |S|$，$1 \\le l_2 + k - 1 \\le r_2 \\le |S|$，$1 \\le k \\le |S|$。\n\n| 测试点 | $\\lvert  S \\rvert \\leq$ | $q \\leq $ | 特殊性质 |\n| :--: | :--: | :--: | :--: |\n| $1$ | $10$ | $10$ | 无 |\n| $2,3$ | $400$ | $400$ | 无 |\n| $4\\sim 6$ | $3000$ | $5\\times 10^4$ | 无 |\n| $7,8$ | $5\\times 10^4$ | $5\\times 10^4$ | $l_1 \\le l_2$ |\n| $9,10$ | $5\\times 10^4$ | $5\\times 10^4$ | $k \\le 10$ |\n| $11,12$ | $5\\times 10^4$ | $5\\times 10^4$ | 无 |\n| $13\\sim 16$ | $2\\times 10^5$ | $2\\times 10^5$ | 无 |\n| $17\\sim 20$ | $10^6$ | $10^6$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2025] 最后的台词 / lines", "background": "", "description": "现某戏剧拟从一段优美的文字中截取若干片段作为剧本中的台词。具体的要求如下：\n\n1. 剧本由若干句从给定文字中截取的台词组成。即，每句台词都必须是给定的字符串 $S$ 的一个子串。\n2. 相邻的两句台词必须可以相互衔接。具体而言，给定一衔接系数 $k$，每一句台词的长度为 $k$ 的后缀必须和下一句台词的长度为 $k$ 的前缀相同。\n3. 剧本最初的台词和最后的台词已经确定，第一句台词为 $S_{l_1\\ldots r_1}$，最后一句台词为 $S_{l_2\\ldots r_2}$。\n\n现已知字符串 $S$，请你编写程序，对于多组给定的 $l_1, r_1, l_2, r_2$ 和衔接系数 $k$，计算是否存在满足上述限制的剧本。\n如果存在，至少包含多少句台词。", "inputFormat": "第一行包含一个由小写英文字母构成的字符串 $S$。\n\n第二行包含一个正整数 $q$。\n\n接下来 $q$ 行，每行包含五个由空格分开的正整数 $l_1, r_1, l_2, r_2, k$，描述一组询问。", "outputFormat": "对于每组询问，输出一行一个整数。如果不存在满足题中限制的剧本，则输出 `-1`。否则输出所求的最小值。\n", "hint": "**【样例 1 解释】**\n\n对于第一组询问，给定的第一句台词和最后一句台词是完全相同的，因此剧本可以仅包含这一个字符串。\n\n对于第二组询问，一种可行的方案为 $\\{\\text{ab}, \\text{aba}, \\text{ba}\\}$。\n\n对于第三组询问，一种可行的方案为 $\\{\\text{yaba}, \\text{abax}\\}$。\n\n对于第四组询问，可以证明不存在可以满足题目中要求的剧本。\n\n**【样例 2】**\n\n见选手目录下的 `lines/lines2.in` 与 `lines/lines2.ans`。\n\n样例 $2$ 满足测试点 $2\\sim 3$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 `lines/lines3.in` 与 `lines/lines3.ans`。\n\n样例 $3$ 满足测试点 $2\\sim 3$ 的限制。\n\n**【样例 4】**\n\n见选手目录下的 `lines/lines4.in` 与 `lines/lines4.ans`。\n\n样例 $4$ 满足测试点 $11\\sim 12$ 的限制。\n\n**【样例 5】**\n\n见选手目录下的 `lines/lines5.in` 与 `lines/lines5.ans`。\n\n样例 $5$ 满足测试点 $11\\sim 12$ 的限制。\n\n**【子任务】**\n\n对于全部的测试数据，保证 $1 \\le |S| \\le 10^6$，$1 \\le q \\le 10^6$，$1 \\le l_1 + k - 1 \\le r_1 \\le |S|$，$1 \\le l_2 + k - 1 \\le r_2 \\le |S|$，$1 \\le k \\le |S|$。\n\n| 测试点 | $\\lvert  S \\rvert \\leq$ | $q \\leq $ | 特殊性质 |\n| :--: | :--: | :--: | :--: |\n| $1$ | $10$ | $10$ | 无 |\n| $2,3$ | $400$ | $400$ | 无 |\n| $4\\sim 6$ | $3000$ | $5\\times 10^4$ | 无 |\n| $7,8$ | $5\\times 10^4$ | $5\\times 10^4$ | $l_1 \\le l_2$ |\n| $9,10$ | $5\\times 10^4$ | $5\\times 10^4$ | $k \\le 10$ |\n| $11,12$ | $5\\times 10^4$ | $5\\times 10^4$ | 无 |\n| $13\\sim 16$ | $2\\times 10^5$ | $2\\times 10^5$ | 无 |\n| $17\\sim 20$ | $10^6$ | $10^6$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11824", "type": "P", "difficulty": 7, "samples": [["5\n1 1 2 2\n1 2 2 4 1\n", "10 4 14 24 16\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "2025", "矩阵加速", "湖北", "全局平衡二叉树"], "title": "[湖北省选模拟 2025] 团队协作 / team", "background": "", "description": "小 X 建立的团队一共有 $n$ 名队员，所有队员依次编号为 $1,2\\dots n$，作为队长的小 X 编号为 $1$，除了小 X 之外的所有员工均有一个**直系领导** $p_i$，保证 $p_i<i$。同时每一名队员都有一个能力值，其中第 $i$ 名队员的能力值为 $v_i$。\n\n小 X 接到了 $10^{10^{100}}$ 个任务，每一个任务需要派遣团队中一部分的队员。出于团队的特色，小 X 对于对于每一次派出的队员有一定的要求。\n\n1. 队员都不愿意与他的直系领导共同参与任务，如果某次任务中派遣了除小 X 之外的某名队员，则不能派遣这名队员的直系领导。\n2. 重复的组队会让队员感到厌烦，所以小 X 希望每一次派出的队员组合都是不同的，也就是对于任意两个任务，都至少存在一名队员只在其中一个任务中被派遣。\n\n对于一次任务，小 X 都会给所有此次任务中被派遣的队员增加一定的积分，其中积分为所有被派遣的员工的**能力值的最大值**。\n\n如果需要满足小 X 的要求，显然无法完成所有的任务，所以小 X 希望你告诉他，在他在满足要求的情况下完成最多的任务之后，每一名队员的积分是多少，由于这个数可能过大，所以小 X 只需要你告诉他积分对 $998\\ 244\\ 353$ 取模的结果。", "inputFormat": "第一行包含一个整数 $n$，表示小 X 所在团队的人数。\n\n第二行包含 $n-1$ 个以空格隔开的整数，其中第 $i$ 个数为 $p_{i+1}$。\n\n第三行包含 $n$ 个整数，其中第 $i$ 个数为 $v_i$。", "outputFormat": "输出一行 $n$ 个以空格隔开的整数。第 $i$ 个数为编号为 $i$ 的队员在最终的积分对 $998\\ 244\\ 353$ 取模后的结果。\n", "hint": "**【样例 1 解释】**\n\n可以列举出所有可能的派遣队员的方式共有 $13$ 种：\n\n* 派遣编号为 $1$ 的队员，增加的积分为 $1$。\n* 派遣编号为 $1,4$ 的队员，增加的积分为 $4$。\n* 派遣编号为 $1,4,5$ 的队员，增加的积分为 $4$。\n* 派遣编号为 $1,5$ 的队员，增加的积分为 $1$。\n* 派遣编号为 $2$ 的队员，增加的积分为 $2$。\n* 派遣编号为 $2,3$ 的队员，增加的积分为 $2$。\n* 派遣编号为 $3$ 的队员，增加的积分为 $2$。\n* 派遣编号为 $3,4$ 的队员，增加的积分为 $4$。\n* 派遣编号为 $3,4,5$ 的队员，增加的积分为 $4$。\n* 派遣编号为 $3,5$ 的队员，增加的积分为 $2$。\n* 派遣编号为 $4$ 的队员，增加的积分为 $4$。\n* 派遣编号为 $4,5$ 的队员，增加的积分为 $4$。\n* 派遣编号为 $5$ 的队员，增加的积分为 $1$。\n\n由此可得五名队员的积分依次为：$1+4+4+1=10$，$2+2=4$，$2+2+4+4+2=14$，$4+4+4+4+4+4=24$，$4+1+4+2+4+1=16$。\n\n**【样例 2】**\n\n见选手目录下的 `team/team2.in` 与 `team/team2.ans`。\n\n样例 $2$ 满足测试点 $1\\sim 2$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 `team/team3.in` 与 `team/team3.ans`。\n\n样例 $3$ 满足测试点 $4\\sim 5$ 的限制。\n\n**【样例 4】**\n\n见选手目录下的 `team/team4.in` 与 `team/team4.ans`。\n\n样例 $4$ 满足测试点 $8\\sim 9$ 的限制。\n\n**【样例 5】**\n\n见选手目录下的 `team/team5.in` 与 `team/team5.ans`。\n\n样例 $5$ 满足测试点 $10\\sim 11$ 的限制。\n\n**【样例 6】**\n\n见选手目录下的 `team/team6.in` 与 `team/team6.ans`。\n\n样例 $6$ 满足测试点 $15\\sim 17$ 的限制。\n\n**【子任务】**\n\n对于全部的测试数据，保证 $2\\le n\\le 3\\times 10^5$，$1\\le v_i\\le n$，$1\\le p_i<i$。\n\n| 测试点 | $n \\le$ | 特殊性质 |\n| :--: | :--: | :--: |\n| $1,2$ | $20$ | 无 |\n| $3$ | $100$ | 无 |\n| $4,5$ | $500$ | 无 |\n| $6,7$ | $1000$ | 无 |\n| $8,9$ | $5000$ | 无 |\n| $10,11$ | $3\\times 10^5$ | $v_i \\le 10$ |\n| $12\\sim 14$ | $10^5$ | 无 |\n| $15\\sim 17$ | $2\\times 10^5$ | 无 |\n| $18\\sim 20$ | $3\\times 10^5$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2025] 团队协作 / team", "background": "", "description": "小 X 建立的团队一共有 $n$ 名队员，所有队员依次编号为 $1,2\\dots n$，作为队长的小 X 编号为 $1$，除了小 X 之外的所有员工均有一个**直系领导** $p_i$，保证 $p_i<i$。同时每一名队员都有一个能力值，其中第 $i$ 名队员的能力值为 $v_i$。\n\n小 X 接到了 $10^{10^{100}}$ 个任务，每一个任务需要派遣团队中一部分的队员。出于团队的特色，小 X 对于对于每一次派出的队员有一定的要求。\n\n1. 队员都不愿意与他的直系领导共同参与任务，如果某次任务中派遣了除小 X 之外的某名队员，则不能派遣这名队员的直系领导。\n2. 重复的组队会让队员感到厌烦，所以小 X 希望每一次派出的队员组合都是不同的，也就是对于任意两个任务，都至少存在一名队员只在其中一个任务中被派遣。\n\n对于一次任务，小 X 都会给所有此次任务中被派遣的队员增加一定的积分，其中积分为所有被派遣的员工的**能力值的最大值**。\n\n如果需要满足小 X 的要求，显然无法完成所有的任务，所以小 X 希望你告诉他，在他在满足要求的情况下完成最多的任务之后，每一名队员的积分是多少，由于这个数可能过大，所以小 X 只需要你告诉他积分对 $998\\ 244\\ 353$ 取模的结果。", "inputFormat": "第一行包含一个整数 $n$，表示小 X 所在团队的人数。\n\n第二行包含 $n-1$ 个以空格隔开的整数，其中第 $i$ 个数为 $p_{i+1}$。\n\n第三行包含 $n$ 个整数，其中第 $i$ 个数为 $v_i$。", "outputFormat": "输出一行 $n$ 个以空格隔开的整数。第 $i$ 个数为编号为 $i$ 的队员在最终的积分对 $998\\ 244\\ 353$ 取模后的结果。\n", "hint": "**【样例 1 解释】**\n\n可以列举出所有可能的派遣队员的方式共有 $13$ 种：\n\n* 派遣编号为 $1$ 的队员，增加的积分为 $1$。\n* 派遣编号为 $1,4$ 的队员，增加的积分为 $4$。\n* 派遣编号为 $1,4,5$ 的队员，增加的积分为 $4$。\n* 派遣编号为 $1,5$ 的队员，增加的积分为 $1$。\n* 派遣编号为 $2$ 的队员，增加的积分为 $2$。\n* 派遣编号为 $2,3$ 的队员，增加的积分为 $2$。\n* 派遣编号为 $3$ 的队员，增加的积分为 $2$。\n* 派遣编号为 $3,4$ 的队员，增加的积分为 $4$。\n* 派遣编号为 $3,4,5$ 的队员，增加的积分为 $4$。\n* 派遣编号为 $3,5$ 的队员，增加的积分为 $2$。\n* 派遣编号为 $4$ 的队员，增加的积分为 $4$。\n* 派遣编号为 $4,5$ 的队员，增加的积分为 $4$。\n* 派遣编号为 $5$ 的队员，增加的积分为 $1$。\n\n由此可得五名队员的积分依次为：$1+4+4+1=10$，$2+2=4$，$2+2+4+4+2=14$，$4+4+4+4+4+4=24$，$4+1+4+2+4+1=16$。\n\n**【样例 2】**\n\n见选手目录下的 `team/team2.in` 与 `team/team2.ans`。\n\n样例 $2$ 满足测试点 $1\\sim 2$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 `team/team3.in` 与 `team/team3.ans`。\n\n样例 $3$ 满足测试点 $4\\sim 5$ 的限制。\n\n**【样例 4】**\n\n见选手目录下的 `team/team4.in` 与 `team/team4.ans`。\n\n样例 $4$ 满足测试点 $8\\sim 9$ 的限制。\n\n**【样例 5】**\n\n见选手目录下的 `team/team5.in` 与 `team/team5.ans`。\n\n样例 $5$ 满足测试点 $10\\sim 11$ 的限制。\n\n**【样例 6】**\n\n见选手目录下的 `team/team6.in` 与 `team/team6.ans`。\n\n样例 $6$ 满足测试点 $15\\sim 17$ 的限制。\n\n**【子任务】**\n\n对于全部的测试数据，保证 $2\\le n\\le 3\\times 10^5$，$1\\le v_i\\le n$，$1\\le p_i<i$。\n\n| 测试点 | $n \\le$ | 特殊性质 |\n| :--: | :--: | :--: |\n| $1,2$ | $20$ | 无 |\n| $3$ | $100$ | 无 |\n| $4,5$ | $500$ | 无 |\n| $6,7$ | $1000$ | 无 |\n| $8,9$ | $5000$ | 无 |\n| $10,11$ | $3\\times 10^5$ | $v_i \\le 10$ |\n| $12\\sim 14$ | $10^5$ | 无 |\n| $15\\sim 17$ | $2\\times 10^5$ | 无 |\n| $18\\sim 20$ | $3\\times 10^5$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11825", "type": "P", "difficulty": 2, "samples": [["4 4\n2024\n4167\n4266\n2024", "6174\n6174\n6174\n6174"], ["3 5\n50985\n53955\n95355", "75933\n53955\n59994"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2024", "台湾"], "title": "[TOIP2024] 6174", "background": "", "description": "西元 $1955$ 年，數學家卡布列克(D. R. Kaprekar)發現了以下有趣的性質：\n\n對於所有位數不完全相同的 $4$ 位數正整數，將其所有位數依數值由大至小排列所得到的數字減去由小至大排列所得到的數字，如此一來會得到另外一新的 $4$ 位數正整數（包含前導零）。若重複上述步驟若干次，必定可以得到 $6174$ 這個數字。又因為以 $6174$ 重複上述步驟計算將會得到 $6174$ 自身，該性質如同黑洞一般只進不出，故 $6174$ 因此而得名「黑洞數」。\n\n舉例來說： \n\n$\\newline\n\\qquad 2024 \\longrightarrow 4220 - 0224 = 3996 \\newline\n\\qquad 3996 \\longrightarrow 9963 - 3699 = 6264 \\newline\n\\qquad 6264 \\longrightarrow 6642 - 2466 = 4176 \\newline\n\\qquad 4176 \\longrightarrow 7641 - 1467 = 6174 \\newline\n\\qquad 6174 \\longrightarrow 7641 - 1467 = 6174$\n\n可得：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1ac3i6ge.png)\n\n針對所有位數不完全相同的 $d$ 位數，也有類似的情況，只是最後不一定會停在單一一個數字，而是有可能在一群數字之間循環。例如當 $d = 5$ 時，以下是某兩種循環的情形：\n![](https://cdn.luogu.com.cn/upload/image_hosting/dbwzmjdv.png)\n\n不難推論，不論 $d$ 為何，由任一數字開始必定會進入某些數字組成的循環之中（單一數字亦算作循環）。今給定 $n$ 個所有位數不完全相同的 $d$ 位數，請各自輸出由該數字作為起始數字進行若干步驟計算後，進入循環時**第一個**遇到的數字。\n\n舉例來說，若以 $50985$ 作為起始數字進行若干步驟計算後可以得到如下的結果，可以發現到在經過 $7$ 次步驟之後，會得到於先前計算中已經出現過的 $75933$，之後再進行計算將會進入循環之中，而 $75933$ 即為進入循環時**第一個**遇到的數字，故以本例子來說須輸出 $75933$。 \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r21etde8.png)", "inputFormat": "> $n$ $d$  \n> $s_1$  \n> $s_2$  \n> $\\vdots$  \n> $s_n$  \n\n* $n$ 為一正整數，代表接下來欲詢問 $n$ 個數字。\n* $d$ 為一正整數，代表接下來欲詢問的數字皆為 $d$ 位數。\n* $s_i$ 為一正整數，代表第 $i$ 個詢問的起始數字（不含前導零）。", "outputFormat": "> $c_1$  \n> $c_2$  \n> $\\vdots$  \n> $c_n$\n* $c_i$ 為一正整數，代表以數字 $s_i$ 作為起始數字進行若干步驟計算後，進入循環時**第一個**遇到的數字（不含前導零）。", "hint": "### 測資限制\n\n* $2 \\le d \\le 10$。\n* $1 \\le n \\le 10^4$。\n* $1 \\le s_i < 10^d$。\n* 所有輸入的數皆為正整數。\n* 保證 $s_i$ 在 $d$ 位數表示中所有位數不完全相同。\n* 保證 $n$ 個數字進行若干步驟計算，進入循環時其總計算步驟數不超過 $10^5$。\n \n### 評分說明\n\n本題共有三組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $12$ | 輸入滿足 $d = 3$ 或 $d = 4$。 |\n| 2 | $24$ | 輸入滿足 $2 \\le d \\le 6$ 且 $1 \\le n \\le 100$。 |\n| 3 | $64$ | 無額外限制。 |", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[TOIP2024] 6174", "background": "", "description": "公元 $1955$ 年，数学家卡布列克(D. R. Kaprekar)发现了以下有趣的性质：\n\n对于所有位数不完全相同的 $4$ 位正整数，将其所有位数依数值由大至小排列所得到的数字减去由小至大排列所得到的数字，如此一来会得到另外一新的 $4$ 位正整数（包含前导零）。若重复上述步骤若干次，必定可以得到 $6174$ 这个数字。又因为以 $6174$ 重复上述步骤计算将会得到 $6174$ 自身，该性质如同黑洞一般只进不出，故 $6174$ 因此而得名「黑洞数」。\n\n举例来说： \n\n$\\newline\n\\qquad 2024 \\longrightarrow 4220 - 0224 = 3996 \\newline\n\\qquad 3996 \\longrightarrow 9963 - 3699 = 6264 \\newline\n\\qquad 6264 \\longrightarrow 6642 - 2466 = 4176 \\newline\n\\qquad 4176 \\longrightarrow 7641 - 1467 = 6174 \\newline\n\\qquad 6174 \\longrightarrow 7641 - 1467 = 6174$\n\n可得：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1ac3i6ge.png)\n\n针对所有位数不完全相同的 $d$ 位数，也有类似的情况，只是最后不一定会停在单一一个数字，而是有可能在一群数字之间循环。例如当 $d = 5$ 时，以下是某两种循环的情形：\n![](https://cdn.luogu.com.cn/upload/image_hosting/dbwzmjdv.png)\n\n不难推论，不论 $d$ 为何，由任一数字开始必定会进入某些数字组成的循环之中（单一数字亦算作循环）。今给定 $n$ 个所有位数不完全相同的 $d$ 位数，请各自输出由该数字作为起始数字进行若干步骤计算后，进入循环时**第一个**遇到的数字。\n\n举例来说，若以 $50985$ 作为起始数字进行若干步骤计算后可以得到如下的结果，可以发现在经过 $7$ 次步骤之后，会得到于先前计算中已经出现过的 $75933$，之后再继续计算将会进入循环之中，而 $75933$ 即为进入循环时**第一个**遇到的数字，故以本例子来说须输出 $75933$。 \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r21etde8.png)\n", "inputFormat": "> $n$ $d$  \n> $s_1$  \n> $s_2$  \n> $\\vdots$  \n> $s_n$  \n\n* $n$ 为一正整数，代表接下来欲询问 $n$ 个数字。\n* $d$ 为一正整数，代表接下来欲询问的数字皆为 $d$ 位数。\n* $s_i$ 为一正整数，代表第 $i$ 个询问的起始数字（不含前导零）。", "outputFormat": "> $c_1$  \n> $c_2$  \n> $\\vdots$  \n> $c_n$\n* $c_i$ 为一正整数，代表以数字 $s_i$ 作为起始数字进行若干步骤计算后，进入循环时**第一个**遇到的数字（不含前导零）。", "hint": "### 测试数据限制\n\n* $2 \\le d \\le 10$。\n* $1 \\le n \\le 10^4$。\n* $1 \\le s_i < 10^d$。\n* 所有输入的数均为正整数。\n* 保证 $s_i$ 在 $d$ 位数表示中所有位数不完全相同。\n* 保证 $n$ 个数字进行若干步骤计算，进入循环时其总计算步骤数不超过 $10^5$。\n \n### 评分说明\n\n本题共有三组子任务，条件限制如下所示。  \n每一组可有一或多笔测试数据，该组所有测试数据皆需答对才会获得该组分数。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $12$ | 输入满足 $d = 3$ 或 $d = 4$。 |\n| 2 | $24$ | 输入满足 $2 \\le d \\le 6$ 且 $1 \\le n \\le 100$。 |\n| 3 | $64$ | 无额外限制。 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[TOIP2024] 6174", "background": "", "description": "西元 $1955$ 年，數學家卡布列克(D. R. Kaprekar)發現了以下有趣的性質：\n\n對於所有位數不完全相同的 $4$ 位數正整數，將其所有位數依數值由大至小排列所得到的數字減去由小至大排列所得到的數字，如此一來會得到另外一新的 $4$ 位數正整數（包含前導零）。若重複上述步驟若干次，必定可以得到 $6174$ 這個數字。又因為以 $6174$ 重複上述步驟計算將會得到 $6174$ 自身，該性質如同黑洞一般只進不出，故 $6174$ 因此而得名「黑洞數」。\n\n舉例來說： \n\n$\\newline\n\\qquad 2024 \\longrightarrow 4220 - 0224 = 3996 \\newline\n\\qquad 3996 \\longrightarrow 9963 - 3699 = 6264 \\newline\n\\qquad 6264 \\longrightarrow 6642 - 2466 = 4176 \\newline\n\\qquad 4176 \\longrightarrow 7641 - 1467 = 6174 \\newline\n\\qquad 6174 \\longrightarrow 7641 - 1467 = 6174$\n\n可得：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1ac3i6ge.png)\n\n針對所有位數不完全相同的 $d$ 位數，也有類似的情況，只是最後不一定會停在單一一個數字，而是有可能在一群數字之間循環。例如當 $d = 5$ 時，以下是某兩種循環的情形：\n![](https://cdn.luogu.com.cn/upload/image_hosting/dbwzmjdv.png)\n\n不難推論，不論 $d$ 為何，由任一數字開始必定會進入某些數字組成的循環之中（單一數字亦算作循環）。今給定 $n$ 個所有位數不完全相同的 $d$ 位數，請各自輸出由該數字作為起始數字進行若干步驟計算後，進入循環時**第一個**遇到的數字。\n\n舉例來說，若以 $50985$ 作為起始數字進行若干步驟計算後可以得到如下的結果，可以發現到在經過 $7$ 次步驟之後，會得到於先前計算中已經出現過的 $75933$，之後再進行計算將會進入循環之中，而 $75933$ 即為進入循環時**第一個**遇到的數字，故以本例子來說須輸出 $75933$。 \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r21etde8.png)", "inputFormat": "> $n$ $d$  \n> $s_1$  \n> $s_2$  \n> $\\vdots$  \n> $s_n$  \n\n* $n$ 為一正整數，代表接下來欲詢問 $n$ 個數字。\n* $d$ 為一正整數，代表接下來欲詢問的數字皆為 $d$ 位數。\n* $s_i$ 為一正整數，代表第 $i$ 個詢問的起始數字（不含前導零）。", "outputFormat": "> $c_1$  \n> $c_2$  \n> $\\vdots$  \n> $c_n$\n* $c_i$ 為一正整數，代表以數字 $s_i$ 作為起始數字進行若干步驟計算後，進入循環時**第一個**遇到的數字（不含前導零）。", "hint": "### 測資限制\n\n* $2 \\le d \\le 10$。\n* $1 \\le n \\le 10^4$。\n* $1 \\le s_i < 10^d$。\n* 所有輸入的數皆為正整數。\n* 保證 $s_i$ 在 $d$ 位數表示中所有位數不完全相同。\n* 保證 $n$ 個數字進行若干步驟計算，進入循環時其總計算步驟數不超過 $10^5$。\n \n### 評分說明\n\n本題共有三組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $12$ | 輸入滿足 $d = 3$ 或 $d = 4$。 |\n| 2 | $24$ | 輸入滿足 $2 \\le d \\le 6$ 且 $1 \\le n \\le 100$。 |\n| 3 | $64$ | 無額外限制。 |", "locale": "zh-Hant"}}}
{"pid": "P11826", "type": "P", "difficulty": 3, "samples": [["3 4\n2 2 1\n2 4", "3"], ["4 5\n3 3 3\n1 3 4", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2024", "台湾"], "title": "[TOIP2024] 奇巧方塊", "background": "", "description": "有一個 $m$ 列 $n$ 行 的 $01$-矩陣恰有 $t$ 個 $1$，且所有的 $1$ 皆位於同一列。$1$ 所在的列編號為 $r$，行編號為 $c_1, c_2, \\ldots, c_t$。請計算共有幾個 $k\\times k$ 的子矩陣包含奇數個 $0$。\n\n以下圖中 $3\\times 4$ 的 $01$-矩陣為例，共有 $3$ 個 $2\\times 2$ 的子矩陣包含奇數個 $0$，如藍色的子矩陣所標示。紅色的 $2\\times 2$ 的子矩陣包含 $4$ 個 $0$，故不列入計算。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qyetx42p.png)", "inputFormat": "> $m$ $n$  \n> $t$ $k$ $r$  \n> $c_1$ $c_2$ $\\cdots$ $c_t$\n>\n> * $m, n$ 分別為矩陣之列數與行數。\n* $t$ 為 $1$ 的個數。\n* $k$ 為子矩陣的大小。\n* $r$ 為 $t$ 個 $1$ 所在之列的編號。\n* $c_1, c_2, \\ldots, c_t$ 為 $1$ 的行的編號，且保證 $c_i < c_{i+1}$。", "outputFormat": "> $x$\n\n一個整數 $x$，為含奇數個 $0$ 的 $k\\times k$ 子矩陣個數。", "hint": "### 測資限制\n\n* $1 \\le m, n\\le 10^9$。\n* $0 \\le t \\le \\min(n, 10^5)$。\n* $1 \\le k \\le \\min(m, n)$。\n* $1 \\le r \\le m$。\n* $1 \\le c_i \\le n$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有三組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $11$ | 輸入滿足 $m, n \\le 1000$。 |\n| 2 | $41$ | 輸入滿足 $m, n \\le 10^5$。 |\n| 3 | $48$ | 無額外限制。 |", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[TOIP2024] 奇巧方块", "background": "", "description": "有一个 $m$ 列 $n$ 行 的 $01$-矩阵恰有 $t$ 个 $1$，且所有的 $1$ 皆位于同一列。$1$ 所在的列编号为 $r$，行编号为 $c_1, c_2, \\ldots, c_t$。请计算共有几个 $k\\times k$ 的子矩阵包含奇数个 $0$。\n\n以下图中 $3\\times 4$ 的 $01$-矩阵为例，共有 $3$ 个 $2\\times 2$ 的子矩阵包含奇数个 $0$，如蓝色的子矩阵所标示。红色的 $2\\times 2$ 的子矩阵包含 $4$ 个 $0$，故不列入计算。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qyetx42p.png)", "inputFormat": "> $m$ $n$  \n> $t$ $k$ $r$  \n> $c_1$ $c_2$ $\\cdots$ $c_t$\n\n* $m, n$ 分别为矩阵之列数与行数。\n* $t$ 为 $1$ 的个数。\n* $k$ 为子矩阵的大小。\n* $r$ 为 $t$ 个 $1$ 所在之列的编号。\n* $c_1, c_2, \\ldots, c_t$ 为 $1$ 的行的编号，且保证 $c_i < c_{i+1}$。", "outputFormat": "> $x$\n\n一个整数 $x$，为含奇数个 $0$ 的 $k\\times k$ 子矩阵个数。", "hint": "### 测试数据限制\n\n* $1 \\le m, n\\le 10^9$。\n* $0 \\le t \\le \\min(n, 10^5)$。\n* $1 \\le k \\le \\min(m, n)$。\n* $1 \\le r \\le m$。\n* $1 \\le c_i \\le n$。\n* 输入的数均为整数。\n\n### 评分说明\n\n本题共有三组子任务，条件限制如下所示。  \n每一组可有一或多个测试数据，该组所有测试数据皆需答对才会获得该组分数。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $11$ | 输入满足 $m, n \\le 1000$。 |\n| 2 | $41$ | 输入满足 $m, n \\le 10^5$。 |\n| 3 | $48$ | 无额外限制。 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[TOIP2024] 奇巧方塊", "background": "", "description": "有一個 $m$ 列 $n$ 行 的 $01$-矩陣恰有 $t$ 個 $1$，且所有的 $1$ 皆位於同一列。$1$ 所在的列編號為 $r$，行編號為 $c_1, c_2, \\ldots, c_t$。請計算共有幾個 $k\\times k$ 的子矩陣包含奇數個 $0$。\n\n以下圖中 $3\\times 4$ 的 $01$-矩陣為例，共有 $3$ 個 $2\\times 2$ 的子矩陣包含奇數個 $0$，如藍色的子矩陣所標示。紅色的 $2\\times 2$ 的子矩陣包含 $4$ 個 $0$，故不列入計算。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qyetx42p.png)", "inputFormat": "> $m$ $n$  \n> $t$ $k$ $r$  \n> $c_1$ $c_2$ $\\cdots$ $c_t$\n>\n> * $m, n$ 分別為矩陣之列數與行數。\n* $t$ 為 $1$ 的個數。\n* $k$ 為子矩陣的大小。\n* $r$ 為 $t$ 個 $1$ 所在之列的編號。\n* $c_1, c_2, \\ldots, c_t$ 為 $1$ 的行的編號，且保證 $c_i < c_{i+1}$。", "outputFormat": "> $x$\n\n一個整數 $x$，為含奇數個 $0$ 的 $k\\times k$ 子矩陣個數。", "hint": "### 測資限制\n\n* $1 \\le m, n\\le 10^9$。\n* $0 \\le t \\le \\min(n, 10^5)$。\n* $1 \\le k \\le \\min(m, n)$。\n* $1 \\le r \\le m$。\n* $1 \\le c_i \\le n$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有三組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $11$ | 輸入滿足 $m, n \\le 1000$。 |\n| 2 | $41$ | 輸入滿足 $m, n \\le 10^5$。 |\n| 3 | $48$ | 無額外限制。 |", "locale": "zh-Hant"}}}
{"pid": "P11827", "type": "P", "difficulty": 4, "samples": [["3 2 8\n1 3 4\n4 2", "3\n2 6 8"], ["3 2 9\n3 4 1\n4 2", "-1"], ["0 4 61\n\n3 5 23 30", "4\n30 53 58 61"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "Special Judge", "台湾"], "title": "[TOIP2024] 大步小步向前走", "background": "本題的 Special Judge 由 [nr0728](https://www.luogu.com.cn/user/682739) 重構，以符合 -std=c++14 標準。", "description": "五條聖是電門中學的學生，他的夢想是成為職業足球選手。雖然他因為想每天練習足球而不想去上學，但為了不違反國民教育法第二章第 $3$ 條，他還是乖乖的去上學。\n\n五條聖家到學校的路是一條直線道路，我們把五條聖家到學校的路以一條數線表示，五條聖家在座標 $0$ 公尺處，學校在座標 $e$ 公尺處。\n\n五條聖透過刻苦練習，習得了 $k$ 種前進步法，第 $j$ 種步法可以前進恰好 $s_j$ 公尺，他希望應用這些步法在足球比賽中。\n為了多多練習這些步法，五條聖在上學路上不會用這些步法以外的方式前進。\n為了避免遲到，五條聖也不會往回跳，只會筆直往學校前進。\n\n不幸的是，這條路上有 $n$ 個坑洞，第 $i$ 個坑洞在座標 $a_i$ 公尺處。\n因此如果五條聖落腳在 $a_i$ 公尺處，則他的腳會受傷導致他不能完成他足球員的夢想，這是他一定要避免的。\n\n給定學校座標、坑洞位置以及五條聖練成的步法長度，五條聖想要你幫他找出最佳的邁步方式，滿足下列條件：\n\n1. 避開所有坑洞。\n2. 最後恰好停在 $e$ 公尺處。\n3. 最大步法使用的次數愈多愈好。\n4. 若存在多種最大步法次數最多的方式，第二大的步法使用的次數愈多愈好。\n5. 若還有多種方法，以此類推比較第三大、第四大、$\\cdots$、第 $k$ 大的步法次數。", "inputFormat": "> $n$ $k$ $e$  \n> $a_1$ $a_2$ $a_3$ $\\cdots$ $a_n$  \n> $s_1$ $s_2$ $s_3$ $\\cdots$ $s_k$\n\n* $n, k, e$ 分別代表坑洞數、五條聖步法種類的數量以及學校座標。\n* 第 $i$ 個洞的座標在 $a_i$。\n* 第 $j$ 種步法長度為 $s_j$。", "outputFormat": "> $m$  \n> $p_1$ $p_2$ $p_3$ $\\cdots$ $p_m$\n\n* $m$ 為一正整數，代表最佳的邁步方式總共走幾步。\n* $p_i$ 皆為正整數，代表第 $i$ 步落腳在 $p_i$ 公尺處。\n* 若答案不唯一，輸出任一符合所求的答案皆可。\n\n若不存在任何的邁步方式，輸出一行 $-1$。", "hint": "### 測資限制\n\n* $2 \\le e \\le 3 \\times 10^5$。\n* $0 \\le n \\le e - 1$。\n* $2 \\le k \\le e$。\n* $1 \\le a_i \\le e - 1$。\n* $1 \\le s_j \\le e$。\n* $1 \\le k\\times (e - n) \\le 3 \\times 10^5$。\n* 上述變數皆為整數。\n* 所有 $a_i$ 相異。\n* 所有 $s_j$ 相異。\n\n### 評分說明\n\n本題共有一組子任務，條件限制如下所示。\n\n每一組可有一或多筆測試資料，\n\n$$該組獲得的分數 = 該組滿分分數\\times \\min_{測試資料 \\in 該組} 評分(測試資料)。$$\n\n對一筆測資資料，考慮問題描述中提到條件的符合與否：\n\n* 如果輸出的答案不符合輸出格式或不符合 1., 2., 或 3. 評分為 $0$。\n* 如果輸出的答案符合 1., 2., 和 3. 但不符合 4. 評分為 $0.2$。\n* 如果輸出的答案符合 1., 2., 3., 和 4. 但不符合 5. 評分為 $0.5$。\n* 如果輸出的答案符合 1., 2., 3., 4. 和 5. 評分為 $1$。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $100$ | 無額外限制。 |", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[TOIP2024] 大步小步向前走", "background": "本题的 Special Judge 由 [CuteMurasame](https://www.luogu.com.cn/user/682739) 重构，以符合 -std=c++14 标准。", "description": "五条圣是电门中学的学生，他的梦想是成为职业足球选手。虽然他因为想每天练习足球而不想去上学，但为了不违反国民教育法第二章第 $3$ 条，他还是乖乖的去上学。\n\n五条圣家到学校的路是一条直线道路，我们把五条圣家到学校的路以一条数线表示，五条圣家在坐标 $0$ 米处，学校在坐标 $e$ 米处。\n\n五条圣通过刻苦练习，习得了 $k$ 种前进的步法，第 $j$ 种步法可以前进恰好 $s_j$ 米，他希望应用这些步法在足球比赛中。\n为了多多练习这些步法，五条圣在上学路上不会用这些步法以外的方式前进。\n为了避免迟到，五条圣也不会往回跳，只会笔直往学校前进。\n\n不幸的是，这条路上有 $n$ 个坑洞，第 $i$ 个坑洞在坐标 $a_i$ 米处。\n因此如果五条圣落脚在 $a_i$ 米处，则他的脚会受伤导致他不能完成他足球员的梦想，这是他一定要避免的。\n\n给定学校坐标、坑洞位置以及五条圣练成的步法长度，五条圣想要你帮他找出最佳的迈步方式，满足下列条件：\n\n1. 避开所有坑洞。\n2. 最后恰好停在 $e$ 米处。\n3. 最大步法使用的次数越多越好。\n4. 若存在多种最大步法次数最多的方式，第二大的步法使用的次数越多越好。\n5. 若还有多种方法，以此类推比较第三大、第四大、$\\cdots$、第 $k$ 大的步法次数。", "inputFormat": "> $n$ $k$ $e$  \n> $a_1$ $a_2$ $a_3$ $\\cdots$ $a_n$  \n> $s_1$ $s_2$ $s_3$ $\\cdots$ $s_k$\n\n* $n, k, e$ 分别代表坑洞数、五条圣步法种类的数量以及学校坐标。\n* 第 $i$ 个洞的坐标在 $a_i$。\n* 第 $j$ 种步法长度为 $s_j$。", "outputFormat": "> $m$  \n> $p_1$ $p_2$ $p_3$ $\\cdots$ $p_m$\n\n* $m$ 为一正整数，代表最佳的迈步方式总共走几步。\n* $p_i$ 均为正整数，代表第 $i$ 步落脚在 $p_i$ 米处。\n* 若答案不唯一，输出任一符合所求的答案均可。\n\n若不存在任何的迈步方式，输出一行 $-1$。", "hint": "### 测试数据限制\n\n* $2 \\le e \\le 3 \\times 10^5$。\n* $0 \\le n \\le e - 1$。\n* $2 \\le k \\le e$。\n* $1 \\le a_i \\le e - 1$。\n* $1 \\le s_j \\le e$。\n* $1 \\le k\\times (e - n) \\le 3 \\times 10^5$。\n* 上述变量均为整数。\n* 所有 $a_i$ 互不相同。\n* 所有 $s_j$ 互不相同。\n\n### 评分说明\n\n本题共有一组子任务，条件限制如下所示。\n\n每一组可有一或多组测试数据，\n\n$$该组获得的分数 = 该组满分分数\\times \\min_{测试数据 \\in 该组} 评分(测试数据)。$$\n\n对一组测试数据，考虑问题描述中提到条件的符合与否：\n\n* 如果输出的答案不符合输出格式或不符合 1., 2., 或 3. 评分为 $0$。\n* 如果输出的答案符合 1., 2., 和 3. 但不符合 4. 评分为 $0.2$。\n* 如果输出的答案符合 1., 2., 3., 和 4. 但不符合 5. 评分为 $0.5$。\n* 如果输出的答案符合 1., 2., 3., 4. 和 5. 评分为 $1$。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $100$ | 无额外限制。 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[TOIP2024] 大步小步向前走", "background": "本題的 Special Judge 由 [nr0728](https://www.luogu.com.cn/user/682739) 重構，以符合 -std=c++14 標準。", "description": "五條聖是電門中學的學生，他的夢想是成為職業足球選手。雖然他因為想每天練習足球而不想去上學，但為了不違反國民教育法第二章第 $3$ 條，他還是乖乖的去上學。\n\n五條聖家到學校的路是一條直線道路，我們把五條聖家到學校的路以一條數線表示，五條聖家在座標 $0$ 公尺處，學校在座標 $e$ 公尺處。\n\n五條聖透過刻苦練習，習得了 $k$ 種前進步法，第 $j$ 種步法可以前進恰好 $s_j$ 公尺，他希望應用這些步法在足球比賽中。\n為了多多練習這些步法，五條聖在上學路上不會用這些步法以外的方式前進。\n為了避免遲到，五條聖也不會往回跳，只會筆直往學校前進。\n\n不幸的是，這條路上有 $n$ 個坑洞，第 $i$ 個坑洞在座標 $a_i$ 公尺處。\n因此如果五條聖落腳在 $a_i$ 公尺處，則他的腳會受傷導致他不能完成他足球員的夢想，這是他一定要避免的。\n\n給定學校座標、坑洞位置以及五條聖練成的步法長度，五條聖想要你幫他找出最佳的邁步方式，滿足下列條件：\n\n1. 避開所有坑洞。\n2. 最後恰好停在 $e$ 公尺處。\n3. 最大步法使用的次數愈多愈好。\n4. 若存在多種最大步法次數最多的方式，第二大的步法使用的次數愈多愈好。\n5. 若還有多種方法，以此類推比較第三大、第四大、$\\cdots$、第 $k$ 大的步法次數。", "inputFormat": "> $n$ $k$ $e$  \n> $a_1$ $a_2$ $a_3$ $\\cdots$ $a_n$  \n> $s_1$ $s_2$ $s_3$ $\\cdots$ $s_k$\n\n* $n, k, e$ 分別代表坑洞數、五條聖步法種類的數量以及學校座標。\n* 第 $i$ 個洞的座標在 $a_i$。\n* 第 $j$ 種步法長度為 $s_j$。", "outputFormat": "> $m$  \n> $p_1$ $p_2$ $p_3$ $\\cdots$ $p_m$\n\n* $m$ 為一正整數，代表最佳的邁步方式總共走幾步。\n* $p_i$ 皆為正整數，代表第 $i$ 步落腳在 $p_i$ 公尺處。\n* 若答案不唯一，輸出任一符合所求的答案皆可。\n\n若不存在任何的邁步方式，輸出一行 $-1$。", "hint": "### 測資限制\n\n* $2 \\le e \\le 3 \\times 10^5$。\n* $0 \\le n \\le e - 1$。\n* $2 \\le k \\le e$。\n* $1 \\le a_i \\le e - 1$。\n* $1 \\le s_j \\le e$。\n* $1 \\le k\\times (e - n) \\le 3 \\times 10^5$。\n* 上述變數皆為整數。\n* 所有 $a_i$ 相異。\n* 所有 $s_j$ 相異。\n\n### 評分說明\n\n本題共有一組子任務，條件限制如下所示。\n\n每一組可有一或多筆測試資料，\n\n$$該組獲得的分數 = 該組滿分分數\\times \\min_{測試資料 \\in 該組} 評分(測試資料)。$$\n\n對一筆測資資料，考慮問題描述中提到條件的符合與否：\n\n* 如果輸出的答案不符合輸出格式或不符合 1., 2., 或 3. 評分為 $0$。\n* 如果輸出的答案符合 1., 2., 和 3. 但不符合 4. 評分為 $0.2$。\n* 如果輸出的答案符合 1., 2., 3., 和 4. 但不符合 5. 評分為 $0.5$。\n* 如果輸出的答案符合 1., 2., 3., 4. 和 5. 評分為 $1$。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $100$ | 無額外限制。 |", "locale": "zh-Hant"}}}
{"pid": "P11828", "type": "P", "difficulty": 5, "samples": [["5 0\n0 1 1 2 3\n5 1 1 1 0", "3"], ["5 1\n0 1 1 2 3\n5 1 1 1 0", "1"], ["10 0\n6 5 5 5 0 3 4 6 6 6\n6 4 5 7 10 7 10 7 3 0", "22"], ["10 2\n0 1 2 3 4 5 6 7 8 9\n8 7 6 5 0 5 4 3 2 1", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树状数组", "2024", "最近公共祖先 LCA", "台湾"], "title": "[TOIP2024] 距離函數", "background": "", "description": "小明和小花各有一棵 $n$ 個節點的有根樹，其中小明的樹滿足節點 $i$ 的父節點為 $p_i$、根節點的 $p_i$ 為 $0$；小花的樹滿足節點 $i$ 的父節點為 $q_i$、根節點的 $q_i$ 為 $0$。他們想要知道彼此的有根樹有多相似，為了明確定義相似程度，他們兩人共同設計了一個兩棵有根樹的「距離函數」，只要距離函數給出的值越大，就表示這兩棵樹越不相似。\n\n為了同時兼顧樹的長相及編號的差異，距離函數大量考慮了「互為祖先關係」的節點對。詳細地說，在一棵有根樹 $T$ 上，當兩個節點 $u, v$ 滿足 $u$ 落在 $v$ 不斷往父節點移動到根節點的路徑上時，我們就稱 $u$ 為 $v$ 在 $T$ 上的祖先；而當一對節點 $\\{u, v\\}$ 滿足 $u$ 為 $v$ 在 $T$ 上的祖先、或 $v$ 為 $u$ 在 $T$ 上的祖先時，**$\\{u, v\\}$ 在 $T$ 即互為祖先關係**。\n\n小明和小花將以上的距離函數運用在兩棵樹的情況下，只要一對節點 $\\{u, v\\}$ 滿足他們在其中一棵樹互為祖先關係、另一棵不是的話，他們就認為這兩棵有根樹的距離增加了。\n\n不過這樣的距離函數限制過於死板，為了容許誤差的存在，兩人又多加入了一個誤差參數 $k$ 來進行函數值的調整，並牽扯到了計算「祖先關係距離」的子函數 $d_T(u, v)$，也就是說，我們可以計算兩個節點 $\\{u, v\\}$ 在給定的有根樹 $T$ 上距離「成為祖先關係」有多近。很顯然的，當 $u, v$ 互為祖先關係時，他們的「祖先關係距離」即為 $0$；而當 $u, v$ 互不為祖先關係時，他們的祖先關係距離被定義成「最少的移動步數使得 $u, v$ 互為祖先關係」，白話地說，我們可以想像有兩顆棋子分別擺在節點 $u$ 和 $v$ 上，每一步移動都可以把一顆棋子移動到所在節點的父節點上，而祖先關係距離即是最少的棋子移動次數使得兩顆棋子能落在互為祖先關係的節點對上。\n\n要計算 $u, v$ 在 $T$ 上的祖先關係距離 $d_T(u, v)$ 其實很單純：先找出 $u, v$ 在 $T$ 上的「最低共同祖先」$\\textrm{lca}(u, v)$，並取 $u$ 和 $v$ 分別往上移動到 $\\textrm{lca}(u, v)$ 的步數中最小的那個即可。\n\n有了祖先關係距離的定義，小明和小花的距離函數終於能夠完整的定義清楚：\n\n- 首先決定好一個誤差參數 $k$，以及需要計算距離的兩棵有根樹 $S, T$。\n- 當一對節點對 $\\{u, v\\}$ 滿足他們在其中一棵樹互為祖先關係、另一棵的祖先關係距離大於 $k$ 時，該節點對就被視為是有差異的節點對。\n    - 也就是說，「$d_S(u, v) = 0$ 且 $d_T(u, v)>k$」或「$d_T(u, v) = 0$ 且 $d_S(u, v) > k$」。\n- 考慮所有 $\\frac{N\\times (N - 1)}{2}$ 組節點對，有差異的節點對數量即是 $S, T$ 的距離函數值。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5uztead1.png)\n\n上圖為範例測試資料一和二所給定的兩棵有根樹，左邊的樹以節點 $1$ 為根、右邊的樹以節點 $5$ 為根。以節點對 $\\{2, 5\\}$ 為例，我們可知在左樹 $\\textrm{lca}(2, 5)=1$，節點 $5$ 移動到節點 $1$ 需要兩步，但節點 $2$ 移動到節點 $1$ 只需要一步，因此他們在左樹的祖先關係距離為 $1$。注意到因為節點對 $\\{2, 5\\}$ 在右樹互為祖先關係，當 $k=0$ 時，節點對 $\\{2, 5\\}$ 會被視為有差異的節點對，同理，節點對 $\\{2, 4\\}$ 以及 $\\{4, 5\\}$ 都是有差異的節點對，因此，上圖中的兩棵樹在 $k=0$ 時的距離函數值為 $3$；而當 $k=1$ 時，只有 $\\{4, 5\\}$ 因在左樹的祖先關係距離為 $2$ 會被視為有差異的節點對，距離函數值僅為 $1$。\n\n請你撰寫一支程式，幫助小明和小花計算給定的兩棵有根樹在誤差參數為 $k$ 時的距離函數值。", "inputFormat": "> $n$ $k$  \n> $p_1$ $p_2$ $\\cdots$ $p_n$  \n> $q_1$ $q_2$ $\\cdots$ $q_n$\n\n* $n$ 代表給定的樹之大小。\n* $k$ 代表這次量測兩棵樹距離時使用的誤差參數。\n* 在給定的第一棵樹中，節點 $i$ 的父節點為 $p_i$。特別地，當 $p_i = 0$ 時，表示節點 $i$ 是第一棵樹的根節點。\n* 在給定的第二棵樹中，節點 $i$ 的父節點為 $q_i$。特別地，當 $q_i = 0$ 時，表示節點 $i$ 是第二棵樹的根節點。\n", "outputFormat": "> $d$\n\n* $d$ 為一整數，代表給定的兩棵樹在誤差參數 $k$ 時的距離函數值。", "hint": "### 測資限制\n\n* $1 \\le n \\le 2\\times 10^5$。\n* $0 \\le k < n$。\n* $0 \\le p_i, q_i \\le n$。\n* 保證存在唯一一個 $u$ 滿足 $p_u = 0$，且序列 $p$ 形成一個以 $u$ 為根的有根樹。\n* 保證存在唯一一個 $v$ 滿足 $q_v = 0$，且序列 $q$ 形成一個以 $v$ 為根的有根樹。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有五組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $4$ | $n \\le 100$。 |\n| 2 | $10$ | $n \\le 3000$。 |\n| 3 | $32$ | $k = 0$。 |\n| 4 | $25$ | $k \\le 20$。 |\n| 5 | $29$ | 無額外限制。 |", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[TOIP2024] 距离函数", "background": "", "description": "小明和小花各有一棵 $n$ 个节点的有根树，其中小明的树满足节点 $i$ 的父节点为 $p_i$、根节点的 $p_i$ 为 $0$；小花的树满足节点 $i$ 的父节点为 $q_i$、根节点的 $q_i$ 为 $0$。他们想要知道彼此的有根树有多相似，为了明确定义相似程度，他们两人共同设计了一个两棵有根树的「距离函数」，只要距离函数给出的值越大，就表示这两棵树越不相似。\n\n为了同时兼顾树的长相及编号的差异，距离函数大量考虑了「互为祖先关系」的节点对。详细地说，在一棵有根树 $T$ 上，当两个节点 $u, v$ 满足 $u$ 落在 $v$ 不断往父节点移动到根节点的路径上时，我们就称 $u$ 为 $v$ 在 $T$ 上的祖先；而当一对节点 $\\{u, v\\}$ 满足 $u$ 为 $v$ 在 $T$ 上的祖先、或 $v$ 为 $u$ 在 $T$ 上的祖先时，**$\\{u, v\\}$ 在 $T$ 即互为祖先关系**。\n\n小明和小花将以上的距离函数应用在两棵树的情况下，只要一对节点 $\\{u, v\\}$ 满足他们在其中一棵树互为祖先关系、另一棵不是的话，他们就认为这两棵有根树的距离增加了。\n\n不过这样的距离函数限制过于死板，为了容许误差的存在，两人又多加入了一个误差参数 $k$ 来进行函数值的调整，并牵涉到了计算「祖先关系距离」的子函数 $d_T(u, v)$，也就是说，我们可以计算两个节点 $\\{u, v\\}$ 在给定的有根树 $T$ 上距离「成为祖先关系」有多近。很显然的，当 $u, v$ 互为祖先关系时，他们的「祖先关系距离」即为 $0$；而当 $u, v$ 互不为祖先关系时，他们的祖先关系距离被定义成「最少的移动步数使得 $u, v$ 互为祖先关系」，白话地说，我们可以想象有两颗棋子分别摆在节点 $u$ 和 $v$ 上，每一步移动都可以把一颗棋子移动到所在节点的父节点上，而祖先关系距离即是最少的棋子移动次数使得两颗棋子能落在互为祖先关系的节点对上。\n\n要计算 $u, v$ 在 $T$ 上的祖先关系距离 $d_T(u, v)$ 其实很单纯：先找出 $u, v$ 在 $T$ 上的「最近公共祖先」$\\textrm{lca}(u, v)$，并取 $u$ 和 $v$ 分别往上移动到 $\\textrm{lca}(u, v)$ 的步数中最小的那个即可。\n\n有了祖先关系距离的定义，小明和小花的距离函数终于能够完整地定义清楚：\n\n- 首先决定好一个误差参数 $k$，以及需要计算距离的两棵有根树 $S, T$。\n- 当一对节点对 $\\{u, v\\}$ 满足他们在其中一棵树互为祖先关系、另一棵的祖先关系距离大于 $k$ 时，该节点对就被视为是有差异的节点对。\n    - 也就是说，「$d_S(u, v) = 0$ 且 $d_T(u, v)>k$」或「$d_T(u, v) = 0$ 且 $d_S(u, v) > k$」。\n- 考虑所有 $\\frac{N\\times (N - 1)}{2}$ 组节点对，有差异的节点对数量即是 $S, T$ 的距离函数值。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5uztead1.png)\n\n上图为范例测试数据一和二所给定的两棵有根树，左边的树以节点 $1$ 为根、右边的树以节点 $5$ 为根。以节点对 $\\{2, 5\\}$ 为例，我们可知在左树 $\\textrm{lca}(2, 5)=1$，节点 $5$ 移动到节点 $1$ 需要两步，但节点 $2$ 移动到节点 $1$ 只需要一步，因此他们在左树的祖先关系距离为 $1$。注意到因为节点对 $\\{2, 5\\}$ 在右树互为祖先关系，当 $k=0$ 时，节点对 $\\{2, 5\\}$ 会被视为有差异的节点对，同理，节点对 $\\{2, 4\\}$ 以及 $\\{4, 5\\}$ 都是有差异的节点对，因此，上图中的两棵树在 $k=0$ 时的距离函数值为 $3$；而当 $k=1$ 时，只有 $\\{4, 5\\}$ 因在左树的祖先关系距离为 $2$ 会被视为有差异的节点对，距离函数值仅为 $1$。\n\n请你编写一个程序，帮助小明和小花计算给定的两棵有根树在误差参数为 $k$ 时的距离函数值。", "inputFormat": "> $n$ $k$  \n> $p_1$ $p_2$ $\\cdots$ $p_n$  \n> $q_1$ $q_2$ $\\cdots$ $q_n$\n\n* $n$ 代表给定的树之大小。\n* $k$ 代表这次量测两棵树距离时使用的误差参数。\n* 在给定的第一棵树中，节点 $i$ 的父节点为 $p_i$。特别地，当 $p_i = 0$ 时，表示节点 $i$ 是第一棵树的根节点。\n* 在给定的第二棵树中，节点 $i$ 的父节点为 $q_i$。特别地，当 $q_i = 0$ 时，表示节点 $i$ 是第二棵树的根节点。", "outputFormat": "> $d$\n\n* $d$ 为一整数，代表给定的两棵树在误差参数 $k$ 时的距离函数值。", "hint": "### 测试数据限制\n\n* $1 \\le n \\le 2\\times 10^5$。\n* $0 \\le k < n$。\n* $0 \\le p_i, q_i \\le n$。\n* 保证存在唯一一个 $u$ 满足 $p_u = 0$，且序列 $p$ 形成一个以 $u$ 为根的有根树。\n* 保证存在唯一一个 $v$ 满足 $q_v = 0$，且序列 $q$ 形成一个以 $v$ 为根的有根树。\n* 输入的数均为整数。\n\n### 评分说明\n\n本题共有五组子任务，条件限制如下所示。\n每一组可有一或多组测试数据，该组所有测试数据皆需答对才会获得该组分数。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $4$ | $n \\le 100$。 |\n| 2 | $10$ | $n \\le 3000$。 |\n| 3 | $32$ | $k = 0$。 |\n| 4 | $25$ | $k \\le 20$。 |\n| 5 | $29$ | 无额外限制。 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[TOIP2024] 距離函數", "background": "", "description": "小明和小花各有一棵 $n$ 個節點的有根樹，其中小明的樹滿足節點 $i$ 的父節點為 $p_i$、根節點的 $p_i$ 為 $0$；小花的樹滿足節點 $i$ 的父節點為 $q_i$、根節點的 $q_i$ 為 $0$。他們想要知道彼此的有根樹有多相似，為了明確定義相似程度，他們兩人共同設計了一個兩棵有根樹的「距離函數」，只要距離函數給出的值越大，就表示這兩棵樹越不相似。\n\n為了同時兼顧樹的長相及編號的差異，距離函數大量考慮了「互為祖先關係」的節點對。詳細地說，在一棵有根樹 $T$ 上，當兩個節點 $u, v$ 滿足 $u$ 落在 $v$ 不斷往父節點移動到根節點的路徑上時，我們就稱 $u$ 為 $v$ 在 $T$ 上的祖先；而當一對節點 $\\{u, v\\}$ 滿足 $u$ 為 $v$ 在 $T$ 上的祖先、或 $v$ 為 $u$ 在 $T$ 上的祖先時，**$\\{u, v\\}$ 在 $T$ 即互為祖先關係**。\n\n小明和小花將以上的距離函數運用在兩棵樹的情況下，只要一對節點 $\\{u, v\\}$ 滿足他們在其中一棵樹互為祖先關係、另一棵不是的話，他們就認為這兩棵有根樹的距離增加了。\n\n不過這樣的距離函數限制過於死板，為了容許誤差的存在，兩人又多加入了一個誤差參數 $k$ 來進行函數值的調整，並牽扯到了計算「祖先關係距離」的子函數 $d_T(u, v)$，也就是說，我們可以計算兩個節點 $\\{u, v\\}$ 在給定的有根樹 $T$ 上距離「成為祖先關係」有多近。很顯然的，當 $u, v$ 互為祖先關係時，他們的「祖先關係距離」即為 $0$；而當 $u, v$ 互不為祖先關係時，他們的祖先關係距離被定義成「最少的移動步數使得 $u, v$ 互為祖先關係」，白話地說，我們可以想像有兩顆棋子分別擺在節點 $u$ 和 $v$ 上，每一步移動都可以把一顆棋子移動到所在節點的父節點上，而祖先關係距離即是最少的棋子移動次數使得兩顆棋子能落在互為祖先關係的節點對上。\n\n要計算 $u, v$ 在 $T$ 上的祖先關係距離 $d_T(u, v)$ 其實很單純：先找出 $u, v$ 在 $T$ 上的「最低共同祖先」$\\textrm{lca}(u, v)$，並取 $u$ 和 $v$ 分別往上移動到 $\\textrm{lca}(u, v)$ 的步數中最小的那個即可。\n\n有了祖先關係距離的定義，小明和小花的距離函數終於能夠完整的定義清楚：\n\n- 首先決定好一個誤差參數 $k$，以及需要計算距離的兩棵有根樹 $S, T$。\n- 當一對節點對 $\\{u, v\\}$ 滿足他們在其中一棵樹互為祖先關係、另一棵的祖先關係距離大於 $k$ 時，該節點對就被視為是有差異的節點對。\n    - 也就是說，「$d_S(u, v) = 0$ 且 $d_T(u, v)>k$」或「$d_T(u, v) = 0$ 且 $d_S(u, v) > k$」。\n- 考慮所有 $\\frac{N\\times (N - 1)}{2}$ 組節點對，有差異的節點對數量即是 $S, T$ 的距離函數值。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5uztead1.png)\n\n上圖為範例測試資料一和二所給定的兩棵有根樹，左邊的樹以節點 $1$ 為根、右邊的樹以節點 $5$ 為根。以節點對 $\\{2, 5\\}$ 為例，我們可知在左樹 $\\textrm{lca}(2, 5)=1$，節點 $5$ 移動到節點 $1$ 需要兩步，但節點 $2$ 移動到節點 $1$ 只需要一步，因此他們在左樹的祖先關係距離為 $1$。注意到因為節點對 $\\{2, 5\\}$ 在右樹互為祖先關係，當 $k=0$ 時，節點對 $\\{2, 5\\}$ 會被視為有差異的節點對，同理，節點對 $\\{2, 4\\}$ 以及 $\\{4, 5\\}$ 都是有差異的節點對，因此，上圖中的兩棵樹在 $k=0$ 時的距離函數值為 $3$；而當 $k=1$ 時，只有 $\\{4, 5\\}$ 因在左樹的祖先關係距離為 $2$ 會被視為有差異的節點對，距離函數值僅為 $1$。\n\n請你撰寫一支程式，幫助小明和小花計算給定的兩棵有根樹在誤差參數為 $k$ 時的距離函數值。", "inputFormat": "> $n$ $k$  \n> $p_1$ $p_2$ $\\cdots$ $p_n$  \n> $q_1$ $q_2$ $\\cdots$ $q_n$\n\n* $n$ 代表給定的樹之大小。\n* $k$ 代表這次量測兩棵樹距離時使用的誤差參數。\n* 在給定的第一棵樹中，節點 $i$ 的父節點為 $p_i$。特別地，當 $p_i = 0$ 時，表示節點 $i$ 是第一棵樹的根節點。\n* 在給定的第二棵樹中，節點 $i$ 的父節點為 $q_i$。特別地，當 $q_i = 0$ 時，表示節點 $i$ 是第二棵樹的根節點。\n", "outputFormat": "> $d$\n\n* $d$ 為一整數，代表給定的兩棵樹在誤差參數 $k$ 時的距離函數值。", "hint": "### 測資限制\n\n* $1 \\le n \\le 2\\times 10^5$。\n* $0 \\le k < n$。\n* $0 \\le p_i, q_i \\le n$。\n* 保證存在唯一一個 $u$ 滿足 $p_u = 0$，且序列 $p$ 形成一個以 $u$ 為根的有根樹。\n* 保證存在唯一一個 $v$ 滿足 $q_v = 0$，且序列 $q$ 形成一個以 $v$ 為根的有根樹。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有五組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $4$ | $n \\le 100$。 |\n| 2 | $10$ | $n \\le 3000$。 |\n| 3 | $32$ | $k = 0$。 |\n| 4 | $25$ | $k \\le 20$。 |\n| 5 | $29$ | 無額外限制。 |", "locale": "zh-Hant"}}}
{"pid": "P11829", "type": "P", "difficulty": 5, "samples": [["1\n5 6\n1 2\n2 3\n3 4\n4 5\n5 3\n4 2", "3 3 4 5\n1 1\n1 2"], ["2\n5 4\n1 2\n1 3\n3 4\n3 5\n5 4\n1 2\n2 3\n1 3\n4 5", "2 1 2\n1 3\n2 4 5\n3 1 2 3\n1 4\n1 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "生成树", "台湾"], "title": "[TOIP2024] 棲息地分配", "background": "", "description": "有 $n$ 隻貓活動於某個地區，每隻貓各有其棲息地，編號為 $1$ 到 $n$。棲息地之間有 $m$ 條道路連接，道路總數不超過 $2n-4$。第 $i$ 條道路連接第 $a_i$ 個棲息地和第 $b_i$ 個棲息地，貓可以沿著這些道路在棲息地之間**雙向**移動，且不會有兩條不同的道路連接著同一對棲息地。有 $3$ 個動保團體要接管此地區，請你協助將這 $n$ 個棲息地分配給這 $3$ 個團體，滿足以下要求：\n\n- 每個棲息地僅由 $1$ 個團體管理，且每個團體需要管理至少 $1$ 個棲息地。每個團體所屬的棲息地之間不一定要連通。\n- 為了方便管理，每個團體會移除由該團體負責的棲息地之間的道路。換句話說，若有一條道路連接的兩個棲息地被分配到同一個團體，該道路會被移除。\n- 這些道路移除後，剩餘的道路不可以形成「環」，以免貓可能會繞著環奔跑，讓工作人員難以捉捕。也就是說，不可以存在一個兩兩相異的棲息地序列 $v_1,v_2,\\ldots, v_k$，滿足 $k \\ge 3$，且對於所有 $1\\le i < k$，棲息地 $v_i$ 和棲息地 $v_{i+1}$ 都有一條未被移除的道路連接、同時 $v_k$ 和 $v_1$ 也有一條未被移除的道路連接。\n\n舉例，有 $5$ 個棲息地，道路連接如下圖所示\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b0pxmz4d.png)\n\n我們可以將第 $3$, $4$, $5$ 個棲息地分配給第 $1$ 個團體，第 $1$ 個棲息地分配給第 $2$ 個團體，第 $2$ 個棲息地分配給第 $3$ 個團體。 移除掉道路後，如下圖所示\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pxugxjfr.png)\n\n剩餘道路不存在環，所以這是一種滿足目標的分配方式。\n\n請輸出這 $3$ 個團體應該分別管理哪些棲息地，若有多種分配方式滿足條件，輸出任意一種。", "inputFormat": "> $t$  \n> $test_1$  \n> $test_2$  \n> $\\vdots$  \n> $test_t$\n\n* $t$ 表示測試資料個數。\n* $test_i$ 為第 $i$ 筆測試資料。\n\n每一筆測試資料的輸入格式如下：\n\n> $n$ $m$  \n> $a_1$ $b_1$  \n> $a_2$ $b_2$  \n> $\\vdots$  \n> $a_m$ $b_m$  \n\n* $n$ 為貓的棲息地數量。\n* $m$ 為道路數量。\n* $a_i, b_i$ 為第 $i$ 條道路連接的棲息地編號。不會有兩條不同的道路連接著同一對棲息地。", "outputFormat": "輸出 $t$ 筆測試資料之答案：\n\n> $answer_1$  \n> $answer_2$  \n> $\\vdots$  \n> $answer_t$  \n\n* $answer_i$ 為第 $i$ 筆測試資料之答案。\n\n每一筆測試資料答案的輸出格式如下\n\n> $k_1$ $c_{1,1}$ $\\cdots$ $c_{1,k_1}$   \n> $k_2$ $c_{2,1}$ $\\cdots$ $c_{1,k_2}$   \n> $k_3$ $c_{3,1}$ $\\cdots$ $c_{1,k_3}$   \n\n* $k_i$ 為第 $i$ 個團體分配到的棲息地總數。\n* $c_{i,j}$ 為第 $i$ 個團體分配到的第 $j$ 個棲息地。\n\n若該筆測試資料不存在所求的分法，請輸出 -1。", "hint": "### 測資限制\n* $1 \\le t \\le 3\\times 10^5$。\n* $3 \\le n \\le 3\\times 10^5$。\n* $0 \\le m \\le 2n - 4$。\n* $1 \\le a_i, b_i \\le n$，$a_i \\neq b_i$。\n* 所有測試資料中，$n$ 的總和不超過 $3\\times 10^5$。\n\n### 評分說明\n\n本題共有四組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $3$ | 輸入滿足 $m = n - 1$，且所有的棲息地連通。 |\n| 2 | $23$ | 輸入保證存在兩個以上的棲息地互相無法抵達。 |\n| 3 | $28$ | 輸入滿足所有測試資料中，$n$ 的總和不超過 $500$。 |\n| 4 | $46$ | 無額外限制。 |", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[TOIP2024] 栖息地分配", "background": "", "description": "有 $n$ 只猫活动于某个地区，每只猫各有其栖息地，编号为 $1$ 到 $n$。栖息地之间有 $m$ 条道路连接，道路总数不超过 $2n-4$。第 $i$ 条道路连接第 $a_i$ 个栖息地和第 $b_i$ 个栖息地，猫可以沿着这些道路在栖息地之间**双向**移动，且不会有两条不同的道路连接着同一对栖息地。有 $3$ 个动物保护团体要接管此地区，请你协助将这 $n$ 个栖息地分配给这 $3$ 个团体，满足以下要求：\n\n- 每个栖息地仅由 $1$ 个团体管理，且每个团体需要管理至少 $1$ 个栖息地。每个团体所属的栖息地之间不一定要连通。\n- 为了方便管理，每个团体会移除由该团体负责的栖息地之间的道路。换句话说，若有一条道路连接的两个栖息地被分配到同一个团体，该道路会被移除。\n- 这些道路移除后，剩余的道路不可以形成「环」，以免猫可能会绕着环奔跑，让工作人员难以捕捉。也就是说，不可以存在一个两两相异的栖息地序列 $v_1,v_2,\\ldots, v_k$，满足 $k \\ge 3$，且对于所有 $1\\le i < k$，栖息地 $v_i$ 和栖息地 $v_{i+1}$ 都有一条未被移除的道路连接、同时 $v_k$ 和 $v_1$ 也有一条未被移除的道路连接。\n\n举例，有 $5$ 个栖息地，道路连接如下图所示\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b0pxmz4d.png)\n\n我们可以将第 $3$, $4$, $5$ 个栖息地分配给第 $1$ 个团体，第 $1$ 个栖息地分配给第 $2$ 个团体，第 $2$ 个栖息地分配给第 $3$ 个团体。 移除掉道路后，如下图所示\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pxugxjfr.png)\n\n剩余道路不存在环，所以这是一种满足目标的分配方式。\n\n请输出这 $3$ 个团体应该分别管理哪些栖息地，若有多种分配方式满足条件，输出任意一种。", "inputFormat": "> $t$  \n> $test_1$  \n> $test_2$  \n> $\\vdots$  \n> $test_t$\n\n* $t$ 表示测试数据个数。\n* $test_i$ 为第 $i$ 组测试数据。\n\n每一组测试数据的输入格式如下：\n\n> $n$ $m$  \n> $a_1$ $b_1$  \n> $a_2$ $b_2$  \n> $\\vdots$  \n> $a_m$ $b_m$  \n\n* $n$ 为猫的栖息地数量。\n* $m$ 为道路数量。\n* $a_i, b_i$ 为第 $i$ 条道路连接的栖息地编号。不会有两条不同的道路连接同一对栖息地。", "outputFormat": "输出 $t$ 组测试数据之答案：\n\n> $answer_1$  \n> $answer_2$  \n> $\\vdots$  \n> $answer_t$  \n\n* $answer_i$ 为第 $i$ 组测试数据之答案。\n\n每一组测试数据答案的输出格式如下：\n\n> $k_1$ $c_{1,1}$ $\\cdots$ $c_{1,k_1}$   \n> $k_2$ $c_{2,1}$ $\\cdots$ $c_{2,k_2}$   \n> $k_3$ $c_{3,1}$ $\\cdots$ $c_{3,k_3}$   \n\n* $k_i$ 为第 $i$ 个团体分配到的栖息地总数。\n* $c_{i,j}$ 为第 $i$ 个团体分配到的第 $j$ 个栖息地。\n\n若该组测试数据不存在所求的分法，请输出 `-1`。", "hint": "### 测试数据限制\n* $1 \\le t \\le 3\\times 10^5$。\n* $3 \\le n \\le 3\\times 10^5$。\n* $0 \\le m \\le 2n - 4$。\n* $1 \\le a_i, b_i \\le n$，$a_i \\neq b_i$。\n* 所有测试数据中，$n$ 的总和不超过 $3\\times 10^5$。\n\n### 评分说明\n\n本题共有四组子任务，条件限制如下所示。\n每一组可有一或多组测试数据，该组所有测试数据皆需答对才会获得该组分数。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $3$ | 输入满足 $m = n - 1$，且所有的栖息地连通。 |\n| 2 | $23$ | 输入保证存在两个以上的栖息地互相无法抵达。 |\n| 3 | $28$ | 输入满足所有测试数据中，$n$ 的总和不超过 $500$。 |\n| 4 | $46$ | 无额外限制。 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[TOIP2024] 棲息地分配", "background": "", "description": "有 $n$ 隻貓活動於某個地區，每隻貓各有其棲息地，編號為 $1$ 到 $n$。棲息地之間有 $m$ 條道路連接，道路總數不超過 $2n-4$。第 $i$ 條道路連接第 $a_i$ 個棲息地和第 $b_i$ 個棲息地，貓可以沿著這些道路在棲息地之間**雙向**移動，且不會有兩條不同的道路連接著同一對棲息地。有 $3$ 個動保團體要接管此地區，請你協助將這 $n$ 個棲息地分配給這 $3$ 個團體，滿足以下要求：\n\n- 每個棲息地僅由 $1$ 個團體管理，且每個團體需要管理至少 $1$ 個棲息地。每個團體所屬的棲息地之間不一定要連通。\n- 為了方便管理，每個團體會移除由該團體負責的棲息地之間的道路。換句話說，若有一條道路連接的兩個棲息地被分配到同一個團體，該道路會被移除。\n- 這些道路移除後，剩餘的道路不可以形成「環」，以免貓可能會繞著環奔跑，讓工作人員難以捉捕。也就是說，不可以存在一個兩兩相異的棲息地序列 $v_1,v_2,\\ldots, v_k$，滿足 $k \\ge 3$，且對於所有 $1\\le i < k$，棲息地 $v_i$ 和棲息地 $v_{i+1}$ 都有一條未被移除的道路連接、同時 $v_k$ 和 $v_1$ 也有一條未被移除的道路連接。\n\n舉例，有 $5$ 個棲息地，道路連接如下圖所示\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b0pxmz4d.png)\n\n我們可以將第 $3$, $4$, $5$ 個棲息地分配給第 $1$ 個團體，第 $1$ 個棲息地分配給第 $2$ 個團體，第 $2$ 個棲息地分配給第 $3$ 個團體。 移除掉道路後，如下圖所示\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pxugxjfr.png)\n\n剩餘道路不存在環，所以這是一種滿足目標的分配方式。\n\n請輸出這 $3$ 個團體應該分別管理哪些棲息地，若有多種分配方式滿足條件，輸出任意一種。", "inputFormat": "> $t$  \n> $test_1$  \n> $test_2$  \n> $\\vdots$  \n> $test_t$\n\n* $t$ 表示測試資料個數。\n* $test_i$ 為第 $i$ 筆測試資料。\n\n每一筆測試資料的輸入格式如下：\n\n> $n$ $m$  \n> $a_1$ $b_1$  \n> $a_2$ $b_2$  \n> $\\vdots$  \n> $a_m$ $b_m$  \n\n* $n$ 為貓的棲息地數量。\n* $m$ 為道路數量。\n* $a_i, b_i$ 為第 $i$ 條道路連接的棲息地編號。不會有兩條不同的道路連接著同一對棲息地。", "outputFormat": "輸出 $t$ 筆測試資料之答案：\n\n> $answer_1$  \n> $answer_2$  \n> $\\vdots$  \n> $answer_t$  \n\n* $answer_i$ 為第 $i$ 筆測試資料之答案。\n\n每一筆測試資料答案的輸出格式如下\n\n> $k_1$ $c_{1,1}$ $\\cdots$ $c_{1,k_1}$   \n> $k_2$ $c_{2,1}$ $\\cdots$ $c_{1,k_2}$   \n> $k_3$ $c_{3,1}$ $\\cdots$ $c_{1,k_3}$   \n\n* $k_i$ 為第 $i$ 個團體分配到的棲息地總數。\n* $c_{i,j}$ 為第 $i$ 個團體分配到的第 $j$ 個棲息地。\n\n若該筆測試資料不存在所求的分法，請輸出 -1。", "hint": "### 測資限制\n* $1 \\le t \\le 3\\times 10^5$。\n* $3 \\le n \\le 3\\times 10^5$。\n* $0 \\le m \\le 2n - 4$。\n* $1 \\le a_i, b_i \\le n$，$a_i \\neq b_i$。\n* 所有測試資料中，$n$ 的總和不超過 $3\\times 10^5$。\n\n### 評分說明\n\n本題共有四組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $3$ | 輸入滿足 $m = n - 1$，且所有的棲息地連通。 |\n| 2 | $23$ | 輸入保證存在兩個以上的棲息地互相無法抵達。 |\n| 3 | $28$ | 輸入滿足所有測試資料中，$n$ 的總和不超過 $500$。 |\n| 4 | $46$ | 無額外限制。 |", "locale": "zh-Hant"}}}
{"pid": "P11830", "type": "P", "difficulty": 5, "samples": [["0 4\n2\n1 2 1 1\n1 1 2 2\n2\n1 1 1 2\n1 1 2 3\n2\n1 2 1 2\n2 3 3 4\n4\n1 2 1 4\n3 4 1 2\n3 4 2 3\n3 4 3 4", "1\n2\n4\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "二分", "各省省选", "2025", "离散化", "O2优化", "分类讨论"], "title": "[省选联考 2025] 幸运数字", "background": null, "description": "小 X 有 $n$ 个正整数二元组 $(a_i, b_i) (1 \\leq i \\leq n)$。他将会维护初始为空的可重集 $S$，并对其进行 $n$ 轮操作。第 $i (1 \\leq i \\leq n)$ 轮操作中，他会在 $S$ 中加入 $a_i$ 个 $b_i$。\n\n设 $m = \\sum \\limits_{i=1}^{n} a_i$，在所有操作结束后，小 X 会得到一个包含 $m$ 个正整数的可重集 $S$。最后他会计算 $S$ 的中位数，即 $S$ 中第 $\\left\\lfloor \\frac{m+1}{2} \\right\\rfloor$ 小的数，作为他的幸运数字。\n\n想知道小 X 幸运数字的小 Y 不知道这 $n$ 个二元组的具体数值是多少，但她得知了每个数的范围。具体地，对于每个 $1 \\leq i \\leq n$，小 Y 知道 $a_i \\in [l_{i,1}, r_{i,1}]$ 且 $b_i \\in [l_{i,2}, r_{i,2}]$。\n\n小 Y 想知道在满足以上条件的情况下，有多少个数可能成为小 X 的幸运数字。", "inputFormat": "本题有多组测试数据。输入的第一行两个整数 $c, T$，分别表示测试点编号和测试数据组数，接下来输入每组测试数据。样例满足 $c = 0$。\n\n对于每组测试数据，第一行一个整数 $n$，表示二元组的个数，接下来 $n$ 行，第 $i (1 \\leq i \\leq n)$ 行四个整数 $l_{i,1}, r_{i,1}, l_{i,2}, r_{i,2}$，描述二元组每个数的范围。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示可能的幸运数字个数。", "hint": "**【样例 1 解释】**\n\n该组样例共有 $4$ 组测试数据。\n- 对于第一组测试数据，若取 $(a_1, b_1) = (1, 1), (a_2, b_2) = (1, 2)$，则得到 $S = \\{1, 2\\}$，其中位数为 $1$；若取 $(a_1, b_1) = (2, 1), (a_2, b_2) = (1, 2)$，则得到 $S = \\{1, 1, 2\\}$，其中位数为 $1$。因此仅有 $1$ 为可能计算出的中位数，因此答案为 $1$。\n- 对于第二组测试数据，若取 $(a_1, b_1) = (1, 1), (a_2, b_2) = (1, 2)$，则得到 $S = \\{1, 2\\}$，其中位数为 1；若取 $(a_1, b_1) = (1, 2), (a_2, b_2) = (1, 3)$，则得到 $S = \\{2, 3\\}$，其中位数为 $2$。可以证明不存在其他可能计算出的中位数，因此答案为 $2$。\n- 对于第三组测试数据，可以证明有且仅有 $1, 2, 3, 4$ 为可能计算出的中位数，因此答案为 $4$。\n- 对于第四组测试数据，可以证明有且仅有 $1, 2, 3$ 为可能计算出的中位数，因此答案为 $3$。\n\n**【样例 2】**\n\n见选手目录下的 lucky/lucky2.in 与 lucky/lucky2.ans。\n\n该组样例共有 $60$ 组测试数据，所有数据均满足 $n = 4$。其中测试数据 $1 \\sim 20$ 满足特殊性质 AB，测试数据 $21 \\sim 40$ 满足特殊性质 A。\n\n**【样例 3】**\n\n见选手目录下的 lucky/lucky3.in 与 lucky/lucky3.ans。\n\n该组样例共有 $4$ 组测试数据，所有数据均满足 $n = 2\\,000$。其中测试数据 $1$ 满足特殊性质 AB，测试数据 $2$ 满足特殊性质 A，测试数据 $3$ 满足特殊性质 B。\n\n**【样例 4】**\n\n见选手目录下的 lucky/lucky4.in 与 lucky/lucky4.ans。\n\n该组样例共有 $2$ 组测试数据，所有数据均满足 $n = 2 \\times 10^5$。其中测试数据 $1$ 满足特殊性质 A，测试数据 $2$ 满足特殊性质 B。\n\n**【子任务】**\n\n设 $\\sum n$ 为单个测试点内所有测试数据的 $n$ 的和。对于所有测试点，\n- $1 \\leq T \\leq 400$，\n- $1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq \\sum n \\leq 6 \\times 10^5$，\n- $\\forall 1 \\leq i \\leq n$，$1 \\leq l_{i,1} \\leq r_{i,1} \\leq 10^9$，$1 \\leq l_{i,2} \\leq r_{i,2} \\leq 10^9$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\leq$ | $\\sum n \\leq$ | 特殊性质 A | 特殊性质 B |\n|:------------:|:----------:|:--------------:|:------------:|:------------:|\n| $1$  | $4$ | $400$ | 是 | 是 |\n| $2$  |  ^  | ^ | ^ | 否 |\n| $3$  | $2\\,000$ | $10^4$ | ^ | 是 |\n| $4$  | ^ | ^ | ^ | 否 |\n| $5$  | ^ | ^ | 否 | 是 |\n| $6$  | ^ | ^ | ^ | 否 |\n| $7$  | $2 \\times 10^5$ | $6 \\times 10^5$ | 是 | 是 |\n| $8$  | ^ | ^ | ^ | 否 |\n| $9$  | ^ | ^ | 否 | 是 |\n| $10$ | ^ | ^ | ^ | 否 |\n\n- 特殊性质 A：$\\forall 1 \\leq i \\leq n$，$r_{i,1}, r_{i,2} \\leq n$。\n- 特殊性质 B：$\\forall 1 \\leq i \\leq n$，$l_{i,1} = r_{i,1}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2025] 幸运数字", "background": null, "description": "小 X 有 $n$ 个正整数二元组 $(a_i, b_i) (1 \\leq i \\leq n)$。他将会维护初始为空的可重集 $S$，并对其进行 $n$ 轮操作。第 $i (1 \\leq i \\leq n)$ 轮操作中，他会在 $S$ 中加入 $a_i$ 个 $b_i$。\n\n设 $m = \\sum \\limits_{i=1}^{n} a_i$，在所有操作结束后，小 X 会得到一个包含 $m$ 个正整数的可重集 $S$。最后他会计算 $S$ 的中位数，即 $S$ 中第 $\\left\\lfloor \\frac{m+1}{2} \\right\\rfloor$ 小的数，作为他的幸运数字。\n\n想知道小 X 幸运数字的小 Y 不知道这 $n$ 个二元组的具体数值是多少，但她得知了每个数的范围。具体地，对于每个 $1 \\leq i \\leq n$，小 Y 知道 $a_i \\in [l_{i,1}, r_{i,1}]$ 且 $b_i \\in [l_{i,2}, r_{i,2}]$。\n\n小 Y 想知道在满足以上条件的情况下，有多少个数可能成为小 X 的幸运数字。", "inputFormat": "本题有多组测试数据。输入的第一行两个整数 $c, T$，分别表示测试点编号和测试数据组数，接下来输入每组测试数据。样例满足 $c = 0$。\n\n对于每组测试数据，第一行一个整数 $n$，表示二元组的个数，接下来 $n$ 行，第 $i (1 \\leq i \\leq n)$ 行四个整数 $l_{i,1}, r_{i,1}, l_{i,2}, r_{i,2}$，描述二元组每个数的范围。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示可能的幸运数字个数。", "hint": "**【样例 1 解释】**\n\n该组样例共有 $4$ 组测试数据。\n- 对于第一组测试数据，若取 $(a_1, b_1) = (1, 1), (a_2, b_2) = (1, 2)$，则得到 $S = \\{1, 2\\}$，其中位数为 $1$；若取 $(a_1, b_1) = (2, 1), (a_2, b_2) = (1, 2)$，则得到 $S = \\{1, 1, 2\\}$，其中位数为 $1$。因此仅有 $1$ 为可能计算出的中位数，因此答案为 $1$。\n- 对于第二组测试数据，若取 $(a_1, b_1) = (1, 1), (a_2, b_2) = (1, 2)$，则得到 $S = \\{1, 2\\}$，其中位数为 1；若取 $(a_1, b_1) = (1, 2), (a_2, b_2) = (1, 3)$，则得到 $S = \\{2, 3\\}$，其中位数为 $2$。可以证明不存在其他可能计算出的中位数，因此答案为 $2$。\n- 对于第三组测试数据，可以证明有且仅有 $1, 2, 3, 4$ 为可能计算出的中位数，因此答案为 $4$。\n- 对于第四组测试数据，可以证明有且仅有 $1, 2, 3$ 为可能计算出的中位数，因此答案为 $3$。\n\n**【样例 2】**\n\n见选手目录下的 lucky/lucky2.in 与 lucky/lucky2.ans。\n\n该组样例共有 $60$ 组测试数据，所有数据均满足 $n = 4$。其中测试数据 $1 \\sim 20$ 满足特殊性质 AB，测试数据 $21 \\sim 40$ 满足特殊性质 A。\n\n**【样例 3】**\n\n见选手目录下的 lucky/lucky3.in 与 lucky/lucky3.ans。\n\n该组样例共有 $4$ 组测试数据，所有数据均满足 $n = 2\\,000$。其中测试数据 $1$ 满足特殊性质 AB，测试数据 $2$ 满足特殊性质 A，测试数据 $3$ 满足特殊性质 B。\n\n**【样例 4】**\n\n见选手目录下的 lucky/lucky4.in 与 lucky/lucky4.ans。\n\n该组样例共有 $2$ 组测试数据，所有数据均满足 $n = 2 \\times 10^5$。其中测试数据 $1$ 满足特殊性质 A，测试数据 $2$ 满足特殊性质 B。\n\n**【子任务】**\n\n设 $\\sum n$ 为单个测试点内所有测试数据的 $n$ 的和。对于所有测试点，\n- $1 \\leq T \\leq 400$，\n- $1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq \\sum n \\leq 6 \\times 10^5$，\n- $\\forall 1 \\leq i \\leq n$，$1 \\leq l_{i,1} \\leq r_{i,1} \\leq 10^9$，$1 \\leq l_{i,2} \\leq r_{i,2} \\leq 10^9$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\leq$ | $\\sum n \\leq$ | 特殊性质 A | 特殊性质 B |\n|:------------:|:----------:|:--------------:|:------------:|:------------:|\n| $1$  | $4$ | $400$ | 是 | 是 |\n| $2$  |  ^  | ^ | ^ | 否 |\n| $3$  | $2\\,000$ | $10^4$ | ^ | 是 |\n| $4$  | ^ | ^ | ^ | 否 |\n| $5$  | ^ | ^ | 否 | 是 |\n| $6$  | ^ | ^ | ^ | 否 |\n| $7$  | $2 \\times 10^5$ | $6 \\times 10^5$ | 是 | 是 |\n| $8$  | ^ | ^ | ^ | 否 |\n| $9$  | ^ | ^ | 否 | 是 |\n| $10$ | ^ | ^ | ^ | 否 |\n\n- 特殊性质 A：$\\forall 1 \\leq i \\leq n$，$r_{i,1}, r_{i,2} \\leq n$。\n- 特殊性质 B：$\\forall 1 \\leq i \\leq n$，$l_{i,1} = r_{i,1}$。", "locale": "zh-CN"}}}
{"pid": "P11831", "type": "P", "difficulty": 7, "samples": [["0 1\n4 4 7\n1 2\n1 3\n2 4\n3 4\n4 2 3 1\n1 3 2 4\n3 2 1 3\n3 3 2 4\n1 1 4\n3 1 1 3\n2 2 4\n3 1 2 3\n3 4 1 1", "4\n2\n3\n4\n0"]], "limits": {"time": [9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["各省省选", "2025", "O2优化", "分块", "bitset"], "title": "[省选联考 2025] 追忆", "background": "考虑到评测机性能差距，本题较官方赛事增加了 3 秒的额外时限。\n\n我常常追忆过去。\n\n生命瞬间定格在脑海。我将背后的时间裁剪、折叠、蜷曲，揉捻成天上朵朵白云。\n\n云朵之间亦有分别：积云厚重，而卷云飘渺。生命里震撼的场景掠过我的思绪便一生无法忘怀，而更为普通平常的记忆在时间的冲刷下只留下些许残骸。追忆宛如入梦，太过清楚则无法愉悦自己的幻想，过分模糊却又坠入虚无。只有薄雾间的山水，面纱下的女子，那恰到好处的朦胧，才能满足我对美的苛求。\n\n追忆总在不经意间将我裹进泛黄的纸页里。分别又重聚的朋友，推倒又重建的街道，种种线索协助着我从一个具体的时刻出发沿时间的河逆流而上。曾经的日子无法重来，我只不过是一个过客。但我仍然渴望在每一次追忆之旅中留下闲暇时间，在一个场景前驻足，在岁月的朦胧里瞭望过去的自己，感受尽可能多的甜蜜。美好的时光曾流过我的身体，我便心满意足。\n\n过去已经凝固，我带着回忆向前，只是时常疏于保管，回忆也在改变着各自的形态。这给我的追忆旅程带来些许挑战。\n\n我该在哪里停留？我问我自己。", "description": "给定一个 $n$ 个点 $m$ 条边的有向图 $G$，结点由 $1$ 至 $n$ 编号。第 $i$ ($1 \\leq i \\leq m$) 条边从 $u_i$ 指向 $v_i$，保证 $u_i < v_i$。节点 $j$ ($1 \\leq j \\leq n$) 有两个权值 $a_j, b_j$，保证 $[a_1, \\ldots, a_n]$ 与 $[b_1, \\ldots, b_n]$ 均是 $1 \\sim n$ 的排列。\n\n你需要进行 $q$ 次操作。操作有以下三种：\n- $1\\ x\\ y$：交换 $a_x$ 和 $a_y$；\n- $2\\ x\\ y$：交换 $b_x$ 和 $b_y$；\n- $3\\ x\\ l\\ r$：你需要输出满足以下两个条件的点 $y$ 中 $b_y$ 的最大值，若不存在满足条件的点则输出 $0$：\n  1. $l \\leq a_y \\leq r$。\n  2. 图 $G$ 中存在一条 $x$ 到 $y$ 的有向路径，即存在整数 $k \\geq 1$ 与 $k$ 个结点 $p_1, p_2, \\ldots, p_k$，满足 $p_1 = x$，$p_k = y$，且对于所有 $1 \\leq i < k$，图 $G$ 中存在从 $p_i$ 指向 $p_{i+1}$ 的有向边。特别地，图 $G$ 中总是存在一条 $x$ 到 $x$ 的有向路径。", "inputFormat": "**本题有多组测试数据**。输入的第一行两个整数 $c, T$，分别表示测试点编号和测试数据组数，接下来输入每组测试数据。样例满足 $c = 0$。\n\n对于每组测试数据，\n- 第一行三个整数 $n, m, q$，分别表示图 $G$ 的节点数、图 $G$ 的边数和操作次数，\n- 接下来 $m$ 行，第 $i$ ($1 \\leq i \\leq m$) 行两个整数 $u_i, v_i$，描述一条边，\n- 接下来一行 $n$ 个整数 $a_1, a_2, \\ldots, a_n$，描述每个节点的 $a$ 权值，\n- 接下来一行 $n$ 个整数 $b_1, b_2, \\ldots, b_n$，描述每个节点的 $b$ 权值，\n- 最后 $q$ 行，第 $i$ ($1 \\leq i \\leq q$) 行三或四个整数 $o_i, x_i, y_i$ 或 $o_i, x_i, l_i, r_i$，描述一次操作，格式同题目描述。", "outputFormat": "对于每个 $3$ 操作输出一行一个整数，表示对应操作的答案。", "hint": "**【样例 1 解释】**\n\n该组样例共有 $1$ 组测试数据。该组测试数据共包含 $7$ 个操作。\n- 对于第一个操作，所有满足条件的点为 $2, 4$，因此答案为 $\\max\\{b_2, b_4\\} = 4$。\n- 对于第二个操作，所有满足条件的点为 $3$，因此答案为 $b_3 = 2$。\n- 对于第三个操作，交换 $a_1, a_4$ 后得到的权值序列 $a$ 为 $[1, 2, 3, 4]$。\n- 对于第四个操作，所有满足条件的点为 $1, 2, 3$，因此答案为 $\\max\\{b_1, b_2, b_3\\} = 3$。\n- 对于第五个操作，交换 $b_2, b_4$ 后得到的权值序列 $b$ 为 $[1, 4, 2, 3]$。\n- 对于第六个操作，所有满足条件的点为 $2, 3$，因此答案为 $\\max\\{b_2, b_3\\} = 4$。\n- 对于第七个操作，没有满足条件的点，因此答案为 $0$。\n\n**【样例 2】**\n\n见选手目录下的 recall/recall2.in 与 recall/recall2.ans。\n\n该组样例满足测试点 $1 \\sim 5$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 recall/recall3.in 与 recall/recall3.ans。\n\n该组样例满足测试点 $7$ 的限制。\n\n**【样例 4】**\n\n见选手目录下的 recall/recall4.in 与 recall/recall4.ans。\n\n该组样例满足测试点 $10 \\sim 12$ 的限制。\n\n**【样例 5】**\n\n见选手目录下的 recall/recall5.in 与 recall/recall5.ans。\n\n该组样例满足测试点 $13, 14$ 的限制。\n\n**【样例 6】**\n\n见选手目录下的 recall/recall6.in 与 recall/recall6.ans。\n\n该组样例满足测试点 $18$ 的限制。\n\n**【样例 7】**\n\n见选手目录下的 recall/recall7.in 与 recall/recall7.ans。\n\n该组样例满足测试点 $23 \\sim 25$ 的限制。\n\n**【子任务】**\n\n对于所有测试点，\n- $1 \\leq T \\leq 3$，\n- $1 \\leq n, q \\leq 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，\n- $\\forall 1 \\leq i \\leq m$，$1 \\leq u_i < v_i \\leq n$，\n- $\\forall 1 \\leq i \\leq n$，$1 \\leq a_i \\leq n$，且 $[a_1, \\ldots, a_n]$ 是 $1 \\sim n$ 的一个排列，\n- $\\forall 1 \\leq i \\leq n$，$1 \\leq b_i \\leq n$，且 $[b_1, \\ldots, b_n]$ 是 $1 \\sim n$ 的一个排列，\n- $\\forall 1 \\leq i \\leq q$，$o_i \\in \\{1, 2, 3\\}$，$1 \\leq x_i, y_i \\leq n$，$1 \\leq l_i \\leq r_i \\leq n$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n, q \\leq$ | $m \\leq$ | 特殊性质 |\n|:------------:|:------------:|:----------:|:----------:|\n| $1 \\sim 5$| $2\\,000$| $4\\,000$| 无 |\n| $6$| $8 \\times 10^4$ | $1.6 \\times 10^5$ | AB |\n| $7$| $6 \\times 10^4$ | $1.2 \\times 10^5$ | B|\n| $8, 9$ | $8 \\times 10^4$ | $1.6 \\times 10^5$ | ^ |\n| $10 \\sim 12$ | ^ | ^ | AC|\n| $13, 14$ | $6 \\times 10^4$ | $1.2 \\times 10^5$ | A|\n| $15, 16$ | $8 \\times 10^4$ | $1.6 \\times 10^5$ | ^ |\n| $17$ | $6 \\times 10^4$ | $1.2 \\times 10^5$ | D |\n| $18$ | $8 \\times 10^4$ | $1.6 \\times 10^5$ | ^ |\n| $19, 20$ | $6 \\times 10^4$ | $1.2 \\times 10^5$ | 无 |\n| $21, 22$ | $8 \\times 10^4$ | $1.6 \\times 10^5$ | ^ |\n| $23 \\sim 25$| $10^5$| $2 \\times 10^5$ | ^ |\n\n- 特殊性质 A：$\\forall 1 \\leq i \\leq q, o_i \\neq 1$。\n- 特殊性质 B：$\\forall 1 \\leq i \\leq q, o_i \\neq 2$。\n- 特殊性质 C：$\\forall 1 \\leq i \\leq q, l_i = 1, r_i = n$。\n- 特殊性质 D：保证在每个 $3$ 操作的时刻，$\\forall 1 \\leq i \\leq n, a_i = b_i$。\n\n**【提示】**\n\n请注意本题特别的时空限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2025] 追忆", "background": "考虑到评测机性能差距，本题较官方赛事增加了 3 秒的额外时限。\n\n我常常追忆过去。\n\n生命瞬间定格在脑海。我将背后的时间裁剪、折叠、蜷曲，揉捻成天上朵朵白云。\n\n云朵之间亦有分别：积云厚重，而卷云飘渺。生命里震撼的场景掠过我的思绪便一生无法忘怀，而更为普通平常的记忆在时间的冲刷下只留下些许残骸。追忆宛如入梦，太过清楚则无法愉悦自己的幻想，过分模糊却又坠入虚无。只有薄雾间的山水，面纱下的女子，那恰到好处的朦胧，才能满足我对美的苛求。\n\n追忆总在不经意间将我裹进泛黄的纸页里。分别又重聚的朋友，推倒又重建的街道，种种线索协助着我从一个具体的时刻出发沿时间的河逆流而上。曾经的日子无法重来，我只不过是一个过客。但我仍然渴望在每一次追忆之旅中留下闲暇时间，在一个场景前驻足，在岁月的朦胧里瞭望过去的自己，感受尽可能多的甜蜜。美好的时光曾流过我的身体，我便心满意足。\n\n过去已经凝固，我带着回忆向前，只是时常疏于保管，回忆也在改变着各自的形态。这给我的追忆旅程带来些许挑战。\n\n我该在哪里停留？我问我自己。", "description": "给定一个 $n$ 个点 $m$ 条边的有向图 $G$，结点由 $1$ 至 $n$ 编号。第 $i$ ($1 \\leq i \\leq m$) 条边从 $u_i$ 指向 $v_i$，保证 $u_i < v_i$。节点 $j$ ($1 \\leq j \\leq n$) 有两个权值 $a_j, b_j$，保证 $[a_1, \\ldots, a_n]$ 与 $[b_1, \\ldots, b_n]$ 均是 $1 \\sim n$ 的排列。\n\n你需要进行 $q$ 次操作。操作有以下三种：\n- $1\\ x\\ y$：交换 $a_x$ 和 $a_y$；\n- $2\\ x\\ y$：交换 $b_x$ 和 $b_y$；\n- $3\\ x\\ l\\ r$：你需要输出满足以下两个条件的点 $y$ 中 $b_y$ 的最大值，若不存在满足条件的点则输出 $0$：\n  1. $l \\leq a_y \\leq r$。\n  2. 图 $G$ 中存在一条 $x$ 到 $y$ 的有向路径，即存在整数 $k \\geq 1$ 与 $k$ 个结点 $p_1, p_2, \\ldots, p_k$，满足 $p_1 = x$，$p_k = y$，且对于所有 $1 \\leq i < k$，图 $G$ 中存在从 $p_i$ 指向 $p_{i+1}$ 的有向边。特别地，图 $G$ 中总是存在一条 $x$ 到 $x$ 的有向路径。", "inputFormat": "**本题有多组测试数据**。输入的第一行两个整数 $c, T$，分别表示测试点编号和测试数据组数，接下来输入每组测试数据。样例满足 $c = 0$。\n\n对于每组测试数据，\n- 第一行三个整数 $n, m, q$，分别表示图 $G$ 的节点数、图 $G$ 的边数和操作次数，\n- 接下来 $m$ 行，第 $i$ ($1 \\leq i \\leq m$) 行两个整数 $u_i, v_i$，描述一条边，\n- 接下来一行 $n$ 个整数 $a_1, a_2, \\ldots, a_n$，描述每个节点的 $a$ 权值，\n- 接下来一行 $n$ 个整数 $b_1, b_2, \\ldots, b_n$，描述每个节点的 $b$ 权值，\n- 最后 $q$ 行，第 $i$ ($1 \\leq i \\leq q$) 行三或四个整数 $o_i, x_i, y_i$ 或 $o_i, x_i, l_i, r_i$，描述一次操作，格式同题目描述。", "outputFormat": "对于每个 $3$ 操作输出一行一个整数，表示对应操作的答案。", "hint": "**【样例 1 解释】**\n\n该组样例共有 $1$ 组测试数据。该组测试数据共包含 $7$ 个操作。\n- 对于第一个操作，所有满足条件的点为 $2, 4$，因此答案为 $\\max\\{b_2, b_4\\} = 4$。\n- 对于第二个操作，所有满足条件的点为 $3$，因此答案为 $b_3 = 2$。\n- 对于第三个操作，交换 $a_1, a_4$ 后得到的权值序列 $a$ 为 $[1, 2, 3, 4]$。\n- 对于第四个操作，所有满足条件的点为 $1, 2, 3$，因此答案为 $\\max\\{b_1, b_2, b_3\\} = 3$。\n- 对于第五个操作，交换 $b_2, b_4$ 后得到的权值序列 $b$ 为 $[1, 4, 2, 3]$。\n- 对于第六个操作，所有满足条件的点为 $2, 3$，因此答案为 $\\max\\{b_2, b_3\\} = 4$。\n- 对于第七个操作，没有满足条件的点，因此答案为 $0$。\n\n**【样例 2】**\n\n见选手目录下的 recall/recall2.in 与 recall/recall2.ans。\n\n该组样例满足测试点 $1 \\sim 5$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 recall/recall3.in 与 recall/recall3.ans。\n\n该组样例满足测试点 $7$ 的限制。\n\n**【样例 4】**\n\n见选手目录下的 recall/recall4.in 与 recall/recall4.ans。\n\n该组样例满足测试点 $10 \\sim 12$ 的限制。\n\n**【样例 5】**\n\n见选手目录下的 recall/recall5.in 与 recall/recall5.ans。\n\n该组样例满足测试点 $13, 14$ 的限制。\n\n**【样例 6】**\n\n见选手目录下的 recall/recall6.in 与 recall/recall6.ans。\n\n该组样例满足测试点 $18$ 的限制。\n\n**【样例 7】**\n\n见选手目录下的 recall/recall7.in 与 recall/recall7.ans。\n\n该组样例满足测试点 $23 \\sim 25$ 的限制。\n\n**【子任务】**\n\n对于所有测试点，\n- $1 \\leq T \\leq 3$，\n- $1 \\leq n, q \\leq 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，\n- $\\forall 1 \\leq i \\leq m$，$1 \\leq u_i < v_i \\leq n$，\n- $\\forall 1 \\leq i \\leq n$，$1 \\leq a_i \\leq n$，且 $[a_1, \\ldots, a_n]$ 是 $1 \\sim n$ 的一个排列，\n- $\\forall 1 \\leq i \\leq n$，$1 \\leq b_i \\leq n$，且 $[b_1, \\ldots, b_n]$ 是 $1 \\sim n$ 的一个排列，\n- $\\forall 1 \\leq i \\leq q$，$o_i \\in \\{1, 2, 3\\}$，$1 \\leq x_i, y_i \\leq n$，$1 \\leq l_i \\leq r_i \\leq n$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n, q \\leq$ | $m \\leq$ | 特殊性质 |\n|:------------:|:------------:|:----------:|:----------:|\n| $1 \\sim 5$| $2\\,000$| $4\\,000$| 无 |\n| $6$| $8 \\times 10^4$ | $1.6 \\times 10^5$ | AB |\n| $7$| $6 \\times 10^4$ | $1.2 \\times 10^5$ | B|\n| $8, 9$ | $8 \\times 10^4$ | $1.6 \\times 10^5$ | ^ |\n| $10 \\sim 12$ | ^ | ^ | AC|\n| $13, 14$ | $6 \\times 10^4$ | $1.2 \\times 10^5$ | A|\n| $15, 16$ | $8 \\times 10^4$ | $1.6 \\times 10^5$ | ^ |\n| $17$ | $6 \\times 10^4$ | $1.2 \\times 10^5$ | D |\n| $18$ | $8 \\times 10^4$ | $1.6 \\times 10^5$ | ^ |\n| $19, 20$ | $6 \\times 10^4$ | $1.2 \\times 10^5$ | 无 |\n| $21, 22$ | $8 \\times 10^4$ | $1.6 \\times 10^5$ | ^ |\n| $23 \\sim 25$| $10^5$| $2 \\times 10^5$ | ^ |\n\n- 特殊性质 A：$\\forall 1 \\leq i \\leq q, o_i \\neq 1$。\n- 特殊性质 B：$\\forall 1 \\leq i \\leq q, o_i \\neq 2$。\n- 特殊性质 C：$\\forall 1 \\leq i \\leq q, l_i = 1, r_i = n$。\n- 特殊性质 D：保证在每个 $3$ 操作的时刻，$\\forall 1 \\leq i \\leq n, a_i = b_i$。\n\n**【提示】**\n\n请注意本题特别的时空限制。", "locale": "zh-CN"}}}
{"pid": "P11832", "type": "P", "difficulty": 7, "samples": [["0 2\n4 2\n1 3\n4 2\n4 5\n2 3\n4 2\n3 1\n1 4\n3 4", "1 2 4 3\n1 3 2 4"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "各省省选", "2025", "O2优化", "Tarjan", "广义串并联图"], "title": "[省选联考 2025] 图排列", "background": "考虑到评测机性能差距，本题较官方赛事增加了 0.5 秒的额外时限。", "description": "小 Q 有 $m$ 个互不相同的正整数二元组 $\\{(a_i, b_i)\\}_{i=1}^m$，其中对于所有 $1 \\leq i \\leq m$，$1 \\leq a_i < b_i \\leq n$。这 $m$ 个二元组满足如下性质：不存在 $1 \\leq i, j \\leq m$ 满足 $a_i < a_j < b_i < b_j$。\n\n小 D 有一个 $1 \\sim n$ 的排列 $p$。小 Q 和小 D 利用他们手上的二元组和排列一起构建了一张 $n$ 个点 $m$ 条边的无向图 $G = (V, E)$，其中 $V = \\{1, 2, \\ldots, n\\}$，$E = \\{(p_{a_i}, p_{b_i}) \\mid i \\in \\{1, 2, \\ldots, m\\}\\}$。\n\n现在小 I 得知了图 $G$，他想要知道在小 Q 的 $m$ 个二元组所具有的性质的前提下，小 D 手中的排列 $p$ 可能是什么。由于小 I 手中的信息不足，排列 $p$ 有很多种可能，小 I 希望你可以告诉他其中字典序最小的那一个。\n\n小 Q，小 D 和小 I 是很好的朋友，他们保证不会欺骗彼此，因此存在至少一个排列 $p$ 满足条件。", "inputFormat": "本题有多组测试数据。输入的第一行两个整数 $c, T$，分别表示测试点编号和测试数据组数，接下来输入每组测试数据。样例满足 $c = 0$。\n\n对于每组测试数据，第一行两个整数 $n, m$，分别表示图 G 的点数和边数，接下来 $m$ 行，第 $i (1 \\leq i \\leq m)$ 行两个整数 $u_i, v_i$，描述图 $G$ 的一条边。", "outputFormat": "对于每组测试数据，输出一行一个 $1 \\sim n$ 的排列 $p$，表示题设条件下字典序最小的排列。数据保证存在至少一个排列 $p$ 满足条件。", "hint": "**【样例 1 解释】**\n\n该组样例共有 $2$ 组测试数据。\n- 对于第一组测试数据，\n - 如果小 D 的排列为 $[1, 2, 3, 4]$，那么小 Q 拥有的二元组为 $\\{(1, 3), (2, 4)\\}$，但取 $i = 1, j = 2$ 有 $1 < 2 < 3 < 4$，因此不满足小 Q 的二元组的性质。\n - 如果小 D 的排列为 $[1, 2, 4, 3]$，那么小 Q 拥有的二元组为 $\\{(1, 4), (2, 3)\\}$，可以证明其满足性质。\n- 对于第二组测试数据，如果小 D 的排列为 $[1, 3, 2, 4]$，那么小 Q 拥有的二元组为 $\\{(2, 3), (3, 4), (1, 2), (1, 4), (2, 4)\\}$，可以证明其满足性质。\n\n**【样例 2】**\n\n见选手目录下的 graperm/graperm2.in 与 graperm/graperm2.ans。\n\n该组样例满足测试点 $1, 2$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 graperm/graperm3.in 与 graperm/graperm3.ans。\n\n该组样例满足测试点 $3, 4$ 的限制。\n\n**【样例 4】**\n\n见选手目录下的 graperm/graperm4.in 与 graperm/graperm4.ans。\n\n该组样例满足测试点 $5, 6$ 的限制。\n\n**【样例 5】**\n\n见选手目录下的 graperm/graperm5.in 与 graperm/graperm5.ans。\n\n该组样例满足测试点 $7, 8$ 的限制。\n\n**【样例 6】**\n\n见选手目录下的 graperm/graperm6.in 与 graperm/graperm6.ans。\n\n该组样例满足测试点 $9 \\sim 11$ 的限制。\n\n**【样例 7】**\n\n见选手目录下的 graperm/graperm7.in 与 graperm/graperm7.ans。\n\n该组样例满足测试点 $12$ 的限制。\n\n**【样例 8】**\n\n见选手目录下的 graperm/graperm8.in 与 graperm/graperm8.ans。\n\n该组样例满足测试点 $13 \\sim 15$ 的限制。\n\n**【样例 9】**\n\n见选手目录下的 graperm/graperm9.in 与 graperm/graperm9.ans。\n\n该组样例满足测试点 $16 \\sim 18$ 的限制。\n\n**【样例 10】**\n\n见选手目录下的 graperm/graperm10.in 与 graperm/graperm10.ans。\n\n该组样例满足测试点 $19 \\sim 21$ 的限制。\n\n**【样例 11】**\n\n见选手目录下的 graperm/graperm11.in 与 graperm/graperm11.ans。\n\n该组样例满足测试点 $22 \\sim 25$ 的限制。\n\n**【子任务】**\n\n对于所有测试点，\n- $1 \\leq T \\leq 10$，\n- $2 \\leq n \\leq 10^5$，$0 \\leq m \\leq 2n$，\n- $\\forall 1 \\leq i \\leq m$，$1 \\leq u_i, v_i \\leq n$，$u_i \\neq v_i$，即 $G$ 没有自环，\n- $\\forall 1 \\leq i < j \\leq m$，$\\{u_i, v_i\\} \\neq \\{u_j, v_j\\}$，即 $G$ 没有重边，\n- 保证存在至少一个排列 $p$ 满足条件。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\leq$ | 特殊性质 |\n|:------------:|:----------:|:----------:|\n| $1,2$ | $10$ | 无|\n| $3,4$ | $2\\,000$ | AC|\n| $5,6$ | ^ | A |\n| $7,8$ | ^ | C |\n| $9 \\sim 11$ | ^ | 无|\n| $12$ | $10^5$ | ABC |\n| $13 \\sim 15$| ^ | AC|\n| $16 \\sim 18$| ^ | A |\n| $19 \\sim 21$| ^ | C |\n| $22 \\sim 25$| ^ | 无|\n\n- 特殊性质 A：$G$ 连通。\n- 特殊性质 B：$G$ 中每个点的度数不超过 $2$。\n- 特殊性质 C：$G$ 中不存在简单环，即 $G$ 是一个森林。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2025] 图排列", "background": "考虑到评测机性能差距，本题较官方赛事增加了 0.5 秒的额外时限。", "description": "小 Q 有 $m$ 个互不相同的正整数二元组 $\\{(a_i, b_i)\\}_{i=1}^m$，其中对于所有 $1 \\leq i \\leq m$，$1 \\leq a_i < b_i \\leq n$。这 $m$ 个二元组满足如下性质：不存在 $1 \\leq i, j \\leq m$ 满足 $a_i < a_j < b_i < b_j$。\n\n小 D 有一个 $1 \\sim n$ 的排列 $p$。小 Q 和小 D 利用他们手上的二元组和排列一起构建了一张 $n$ 个点 $m$ 条边的无向图 $G = (V, E)$，其中 $V = \\{1, 2, \\ldots, n\\}$，$E = \\{(p_{a_i}, p_{b_i}) \\mid i \\in \\{1, 2, \\ldots, m\\}\\}$。\n\n现在小 I 得知了图 $G$，他想要知道在小 Q 的 $m$ 个二元组所具有的性质的前提下，小 D 手中的排列 $p$ 可能是什么。由于小 I 手中的信息不足，排列 $p$ 有很多种可能，小 I 希望你可以告诉他其中字典序最小的那一个。\n\n小 Q，小 D 和小 I 是很好的朋友，他们保证不会欺骗彼此，因此存在至少一个排列 $p$ 满足条件。", "inputFormat": "本题有多组测试数据。输入的第一行两个整数 $c, T$，分别表示测试点编号和测试数据组数，接下来输入每组测试数据。样例满足 $c = 0$。\n\n对于每组测试数据，第一行两个整数 $n, m$，分别表示图 G 的点数和边数，接下来 $m$ 行，第 $i (1 \\leq i \\leq m)$ 行两个整数 $u_i, v_i$，描述图 $G$ 的一条边。", "outputFormat": "对于每组测试数据，输出一行一个 $1 \\sim n$ 的排列 $p$，表示题设条件下字典序最小的排列。数据保证存在至少一个排列 $p$ 满足条件。", "hint": "**【样例 1 解释】**\n\n该组样例共有 $2$ 组测试数据。\n- 对于第一组测试数据，\n - 如果小 D 的排列为 $[1, 2, 3, 4]$，那么小 Q 拥有的二元组为 $\\{(1, 3), (2, 4)\\}$，但取 $i = 1, j = 2$ 有 $1 < 2 < 3 < 4$，因此不满足小 Q 的二元组的性质。\n - 如果小 D 的排列为 $[1, 2, 4, 3]$，那么小 Q 拥有的二元组为 $\\{(1, 4), (2, 3)\\}$，可以证明其满足性质。\n- 对于第二组测试数据，如果小 D 的排列为 $[1, 3, 2, 4]$，那么小 Q 拥有的二元组为 $\\{(2, 3), (3, 4), (1, 2), (1, 4), (2, 4)\\}$，可以证明其满足性质。\n\n**【样例 2】**\n\n见选手目录下的 graperm/graperm2.in 与 graperm/graperm2.ans。\n\n该组样例满足测试点 $1, 2$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 graperm/graperm3.in 与 graperm/graperm3.ans。\n\n该组样例满足测试点 $3, 4$ 的限制。\n\n**【样例 4】**\n\n见选手目录下的 graperm/graperm4.in 与 graperm/graperm4.ans。\n\n该组样例满足测试点 $5, 6$ 的限制。\n\n**【样例 5】**\n\n见选手目录下的 graperm/graperm5.in 与 graperm/graperm5.ans。\n\n该组样例满足测试点 $7, 8$ 的限制。\n\n**【样例 6】**\n\n见选手目录下的 graperm/graperm6.in 与 graperm/graperm6.ans。\n\n该组样例满足测试点 $9 \\sim 11$ 的限制。\n\n**【样例 7】**\n\n见选手目录下的 graperm/graperm7.in 与 graperm/graperm7.ans。\n\n该组样例满足测试点 $12$ 的限制。\n\n**【样例 8】**\n\n见选手目录下的 graperm/graperm8.in 与 graperm/graperm8.ans。\n\n该组样例满足测试点 $13 \\sim 15$ 的限制。\n\n**【样例 9】**\n\n见选手目录下的 graperm/graperm9.in 与 graperm/graperm9.ans。\n\n该组样例满足测试点 $16 \\sim 18$ 的限制。\n\n**【样例 10】**\n\n见选手目录下的 graperm/graperm10.in 与 graperm/graperm10.ans。\n\n该组样例满足测试点 $19 \\sim 21$ 的限制。\n\n**【样例 11】**\n\n见选手目录下的 graperm/graperm11.in 与 graperm/graperm11.ans。\n\n该组样例满足测试点 $22 \\sim 25$ 的限制。\n\n**【子任务】**\n\n对于所有测试点，\n- $1 \\leq T \\leq 10$，\n- $2 \\leq n \\leq 10^5$，$0 \\leq m \\leq 2n$，\n- $\\forall 1 \\leq i \\leq m$，$1 \\leq u_i, v_i \\leq n$，$u_i \\neq v_i$，即 $G$ 没有自环，\n- $\\forall 1 \\leq i < j \\leq m$，$\\{u_i, v_i\\} \\neq \\{u_j, v_j\\}$，即 $G$ 没有重边，\n- 保证存在至少一个排列 $p$ 满足条件。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\leq$ | 特殊性质 |\n|:------------:|:----------:|:----------:|\n| $1,2$ | $10$ | 无|\n| $3,4$ | $2\\,000$ | AC|\n| $5,6$ | ^ | A |\n| $7,8$ | ^ | C |\n| $9 \\sim 11$ | ^ | 无|\n| $12$ | $10^5$ | ABC |\n| $13 \\sim 15$| ^ | AC|\n| $16 \\sim 18$| ^ | A |\n| $19 \\sim 21$| ^ | C |\n| $22 \\sim 25$| ^ | 无|\n\n- 特殊性质 A：$G$ 连通。\n- 特殊性质 B：$G$ 中每个点的度数不超过 $2$。\n- 特殊性质 C：$G$ 中不存在简单环，即 $G$ 是一个森林。", "locale": "zh-CN"}}}
{"pid": "P11833", "type": "P", "difficulty": 5, "samples": [["0 2\n2\n4 5 1\n6 7 1\n3\n4 5 3\n7 6 1\n10 8 4", "No\nYes"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "线段树", "二分", "各省省选", "2025", "颜色段均摊（珂朵莉树 ODT）", "O2优化", "分块"], "title": "[省选联考 2025] 推箱子", "background": null, "description": "在一条无穷长的数轴上摆放着 $n$ 个箱子。第 $i$ ($1 \\leq i \\leq n$) 个箱子在时刻 0 位于数轴 $a_i$ 处，而你希望在时刻 $t_i$ 以及**之后的所有时刻**，这个箱子处在数轴的 $b_i$ 处。保证序列 $[a_1, \\ldots, a_n]$ 和 $[b_1, \\ldots, b_n]$ **单调递增**。\n\n为此，从时刻 $0$ 开始的每个单位时间里，你可以将某个箱子在数轴上移动一个单位长度，也可以什么都不做。你需要保证任意时刻每个点上都只有一个箱子。形式化地，每个单位时间里你可以按照以下方式进行一次操作，也可以不进行操作：\n1. 选择任意一个箱子。记其编号为 $i$，它目前的位置为 $p_i$。\n2. 选择一个方向 $d \\in \\{\\pm1\\}$，其中 $d = 1$ 代表向右，$d = -1$ 代表向左。你需要保证数轴上 $(p_i + d)$ 处没有箱子。\n3. 将 $i$ 号箱子从点 $p_i$ 移动到点 $(p_i + d)$ 处。\n\n你想知道，是否存在一种操作方法同时满足所有箱子的要求，即对于任意 $1 \\leq i \\leq n$，第 $i$ 个箱子在时刻 $t_i$ 以及之后的所有时刻都处于数轴的 $b_i$ 处。", "inputFormat": "**本题有多组测试数据**。输入的第一行两个整数 $c, T$，分别表示测试点编号和测试数据组数，接下来输入每组测试数据。样例满足 $c = 0$。\n\n对于每组测试数据，第一行一个整数 $n$，表示箱子的个数，接下来 $n$ 行，第 $i$ ($1 \\leq i \\leq n$) 行三个整数 $a_i, b_i, t_i$，分别表示第 $i$ 个箱子的初始位置、目标位置和时刻要求。", "outputFormat": "对于每组测试数据，输出一行一个字符串 `Yes` 或 `No`，表示是否存在一种操作方法同时满足所有箱子的要求。", "hint": "**【样例 1 解释】**\n\n该组样例共有 2 组测试数据。\n- 对于第一组测试数据，答案是否定的。将 1 号箱子由点 4 移动到点 5，并将 2 号箱子由点 6 移动到点 7，至少需要两个单位时间，因此不可能在时刻 1 同时满足两个箱子的条件。\n- 对于第二组测试数据，答案是肯定的，例如如下方法同时满足了所有箱子的要求：\n - 在时刻 0 至时刻 1 的一个单位时间，将 2 号箱子由点 7 移动到点 6；\n - 在时刻 1 至时刻 2 的一个单位时间，将 3 号箱子由点 10 移动到点 9；\n - 在时刻 2 至时刻 3 的一个单位时间，将 1 号箱子由点 4 移动到点 5；\n - 在时刻 3 至时刻 4 的一个单位时间，将 3 号箱子由点 9 移动到点 8；\n - 在之后的所有单位时间，什么都不做。\n \n**【样例 2】**\n\n见选手目录下的 `move/move2.in` 与 `move/move2.ans`。\n\n该组样例共有 $6$ 组测试数据，所有数据均满足特殊性质 A。其中每组测试数据的 $n$ 分别为 $7$、$7$、$7$、$200$、$3\\,000$、$2 \\times 10^5$，且测试数据 $1 \\sim 3$ 满足 $a_i, b_i \\leq 15$，测试数据 $4$ 满足 $a_i, b_i \\leq 3,000$。\n\n**【样例 3】**\n\n见选手目录下的 `move/move3.in` 与 `move/move3.ans`。\n\n该组样例共有 $6$ 组测试数据，所有数据均满足特殊性质 B。其中每组测试数据的 $n$ 分别为 $7$、$7$、$7$、$200$、$3\\,000$、$2 \\times 10^5$，且测试数据 $1 \\sim 3$ 满足 $a_i, b_i \\leq 15$，测试数据 $4$ 满足 $a_i, b_i \\leq 3,000$。\n\n**【样例 4】**\n\n见选手目录下的 `move/move4.in` 与 `move/move4.ans`。\n\n该组样例共有 $6$ 组测试数据，所有数据均满足特殊性质 C。其中每组测试数据的 $n$ 分别为 $7$、$7$、$7$、$200$、$3\\,000$、$2 \\times 10^5$，且测试数据 $1 \\sim 3$ 满足 $a_i, b_i \\leq 15$，测试数据 $4$ 满足 $a_i, b_i \\leq 3,000$。\n\n**【样例 5】**\n\n见选手目录下的 `move/move5.in` 与 `move/move5.ans`。\n\n该组样例共有 $6$ 组测试数据。其中每组测试数据的 $n$ 分别为 $7$、$7$、$7$、$200$、$3\\,000$、$2 \\times 10^5$，且测试数据 $1 \\sim 3$ 满足 $a_i, b_i \\leq 15$，测试数据 $4$ 满足 $a_i, b_i \\leq 3,000$。\n\n**【子任务】**\n\n对于所有测试点，\n- $1 \\leq T \\leq 6$,\n- $1 \\leq n \\leq 2 \\times 10^5$,\n- $\\forall 1 \\leq i \\leq n, 1 \\leq a_i, b_i \\leq 10^9, 0 \\leq t_i \\leq 10^{16}$,\n- $\\forall 1 \\leq i < n, a_i < a_{i+1}, b_i < b_{i+1}$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\leq$ | $a_i, b_i \\leq$ | 特殊性质 |\n|:------------:|:------------:|:-------------------:|:----------:|\n| $1$ | $7$ | $15$ | A |\n| $2, 3$ | ^ | ^ | 无 |\n| $4$ | $200$ | $3\\,000$ | A |\n| $5$ | ^ | ^ | B |\n| $6, 7$ | ^ | ^ | 无 |\n| $8$ | $3\\,000$ | $10^9$ | A |\n| $9$ | ^ | ^ | B |\n| $10, 11$ | ^ | ^ | 无 |\n| $12$ | $8 \\times 10^4$ | $5 \\times 10^5$ | A |\n| $13$ | ^ | ^ | B |\n| $14, 15$ | ^ | ^ | C |\n| $16 \\sim 18$ | ^ | ^ | 无 |\n| $19, 20$ | $2 \\times 10^5$ | $10^9$ | B |\n| $21, 22$ | ^ | ^ | C |\n| $23 \\sim 25$ | ^ | ^ | 无 |\n\n- 特殊性质 A：$\\forall 1 \\leq i < j \\leq n, t_i = t_j$。\n- 特殊性质 B：$\\forall 1 \\leq i \\leq n, a_i \\leq b_i$ 且 $\\forall 1 \\leq i < n, b_i < a_{i+1}$。\n- 特殊性质 C：$\\forall 1 \\leq i \\leq n, a_i \\leq b_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2025] 推箱子", "background": null, "description": "在一条无穷长的数轴上摆放着 $n$ 个箱子。第 $i$ ($1 \\leq i \\leq n$) 个箱子在时刻 0 位于数轴 $a_i$ 处，而你希望在时刻 $t_i$ 以及**之后的所有时刻**，这个箱子处在数轴的 $b_i$ 处。保证序列 $[a_1, \\ldots, a_n]$ 和 $[b_1, \\ldots, b_n]$ **单调递增**。\n\n为此，从时刻 $0$ 开始的每个单位时间里，你可以将某个箱子在数轴上移动一个单位长度，也可以什么都不做。你需要保证任意时刻每个点上都只有一个箱子。形式化地，每个单位时间里你可以按照以下方式进行一次操作，也可以不进行操作：\n1. 选择任意一个箱子。记其编号为 $i$，它目前的位置为 $p_i$。\n2. 选择一个方向 $d \\in \\{\\pm1\\}$，其中 $d = 1$ 代表向右，$d = -1$ 代表向左。你需要保证数轴上 $(p_i + d)$ 处没有箱子。\n3. 将 $i$ 号箱子从点 $p_i$ 移动到点 $(p_i + d)$ 处。\n\n你想知道，是否存在一种操作方法同时满足所有箱子的要求，即对于任意 $1 \\leq i \\leq n$，第 $i$ 个箱子在时刻 $t_i$ 以及之后的所有时刻都处于数轴的 $b_i$ 处。", "inputFormat": "**本题有多组测试数据**。输入的第一行两个整数 $c, T$，分别表示测试点编号和测试数据组数，接下来输入每组测试数据。样例满足 $c = 0$。\n\n对于每组测试数据，第一行一个整数 $n$，表示箱子的个数，接下来 $n$ 行，第 $i$ ($1 \\leq i \\leq n$) 行三个整数 $a_i, b_i, t_i$，分别表示第 $i$ 个箱子的初始位置、目标位置和时刻要求。", "outputFormat": "对于每组测试数据，输出一行一个字符串 `Yes` 或 `No`，表示是否存在一种操作方法同时满足所有箱子的要求。", "hint": "**【样例 1 解释】**\n\n该组样例共有 2 组测试数据。\n- 对于第一组测试数据，答案是否定的。将 1 号箱子由点 4 移动到点 5，并将 2 号箱子由点 6 移动到点 7，至少需要两个单位时间，因此不可能在时刻 1 同时满足两个箱子的条件。\n- 对于第二组测试数据，答案是肯定的，例如如下方法同时满足了所有箱子的要求：\n - 在时刻 0 至时刻 1 的一个单位时间，将 2 号箱子由点 7 移动到点 6；\n - 在时刻 1 至时刻 2 的一个单位时间，将 3 号箱子由点 10 移动到点 9；\n - 在时刻 2 至时刻 3 的一个单位时间，将 1 号箱子由点 4 移动到点 5；\n - 在时刻 3 至时刻 4 的一个单位时间，将 3 号箱子由点 9 移动到点 8；\n - 在之后的所有单位时间，什么都不做。\n \n**【样例 2】**\n\n见选手目录下的 `move/move2.in` 与 `move/move2.ans`。\n\n该组样例共有 $6$ 组测试数据，所有数据均满足特殊性质 A。其中每组测试数据的 $n$ 分别为 $7$、$7$、$7$、$200$、$3\\,000$、$2 \\times 10^5$，且测试数据 $1 \\sim 3$ 满足 $a_i, b_i \\leq 15$，测试数据 $4$ 满足 $a_i, b_i \\leq 3,000$。\n\n**【样例 3】**\n\n见选手目录下的 `move/move3.in` 与 `move/move3.ans`。\n\n该组样例共有 $6$ 组测试数据，所有数据均满足特殊性质 B。其中每组测试数据的 $n$ 分别为 $7$、$7$、$7$、$200$、$3\\,000$、$2 \\times 10^5$，且测试数据 $1 \\sim 3$ 满足 $a_i, b_i \\leq 15$，测试数据 $4$ 满足 $a_i, b_i \\leq 3,000$。\n\n**【样例 4】**\n\n见选手目录下的 `move/move4.in` 与 `move/move4.ans`。\n\n该组样例共有 $6$ 组测试数据，所有数据均满足特殊性质 C。其中每组测试数据的 $n$ 分别为 $7$、$7$、$7$、$200$、$3\\,000$、$2 \\times 10^5$，且测试数据 $1 \\sim 3$ 满足 $a_i, b_i \\leq 15$，测试数据 $4$ 满足 $a_i, b_i \\leq 3,000$。\n\n**【样例 5】**\n\n见选手目录下的 `move/move5.in` 与 `move/move5.ans`。\n\n该组样例共有 $6$ 组测试数据。其中每组测试数据的 $n$ 分别为 $7$、$7$、$7$、$200$、$3\\,000$、$2 \\times 10^5$，且测试数据 $1 \\sim 3$ 满足 $a_i, b_i \\leq 15$，测试数据 $4$ 满足 $a_i, b_i \\leq 3,000$。\n\n**【子任务】**\n\n对于所有测试点，\n- $1 \\leq T \\leq 6$,\n- $1 \\leq n \\leq 2 \\times 10^5$,\n- $\\forall 1 \\leq i \\leq n, 1 \\leq a_i, b_i \\leq 10^9, 0 \\leq t_i \\leq 10^{16}$,\n- $\\forall 1 \\leq i < n, a_i < a_{i+1}, b_i < b_{i+1}$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\leq$ | $a_i, b_i \\leq$ | 特殊性质 |\n|:------------:|:------------:|:-------------------:|:----------:|\n| $1$ | $7$ | $15$ | A |\n| $2, 3$ | ^ | ^ | 无 |\n| $4$ | $200$ | $3\\,000$ | A |\n| $5$ | ^ | ^ | B |\n| $6, 7$ | ^ | ^ | 无 |\n| $8$ | $3\\,000$ | $10^9$ | A |\n| $9$ | ^ | ^ | B |\n| $10, 11$ | ^ | ^ | 无 |\n| $12$ | $8 \\times 10^4$ | $5 \\times 10^5$ | A |\n| $13$ | ^ | ^ | B |\n| $14, 15$ | ^ | ^ | C |\n| $16 \\sim 18$ | ^ | ^ | 无 |\n| $19, 20$ | $2 \\times 10^5$ | $10^9$ | B |\n| $21, 22$ | ^ | ^ | C |\n| $23 \\sim 25$ | ^ | ^ | 无 |\n\n- 特殊性质 A：$\\forall 1 \\leq i < j \\leq n, t_i = t_j$。\n- 特殊性质 B：$\\forall 1 \\leq i \\leq n, a_i \\leq b_i$ 且 $\\forall 1 \\leq i < n, b_i < a_{i+1}$。\n- 特殊性质 C：$\\forall 1 \\leq i \\leq n, a_i \\leq b_i$。", "locale": "zh-CN"}}}
{"pid": "P11834", "type": "P", "difficulty": 7, "samples": [["0 2\n2 1\n1 2 1\n3 3\n1 2 2\n1 3 2\n2 3 2", "750000006\n171875002"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2025", "O2优化", "组合数学", "容斥原理", "概率论"], "title": "[省选联考 2025] 岁月", "background": "> 希望大家一直记得我。  \n> “希望大家永远忘了我。”", "description": "小 Y 有一个 $n$ 个节点、$m$ 条边的带权**无向图** $G$，节点由 1 至 $n$ 编号。第 $i$ ($1 \\leq i \\leq m$) 条边连接 $u_i$ 和 $v_i$，边权为 $w_i$。保证 $G$ 连通且没有重边自环。\n\n小 Y 预见到岁月将会磨灭图 $G$ 的痕迹，而这会导致一些边变成有向边，另一些边直接消失。具体地，图 $G$ 历经岁月将会磨损为 $n$ 个节点的带权**有向图** $G'$，其中对于第 $i$ ($1 \\leq i \\leq m$) 条边，$G'$ 上\n- 有 $\\frac{1}{4}$ 的概率同时存在 $u_i$ 向 $v_i$ 和 $v_i$ 向 $u_i$ 的有向边，它们的边权均为 $w_i$;\n- 有 $\\frac{1}{4}$ 的概率存在 $v_i$ 向 $u_i$、边权为 $w_i$ 的有向边，而不存在其反向边;\n- 有 $\\frac{1}{4}$ 的概率存在 $u_i$ 向 $v_i$、边权为 $w_i$ 的有向边，而不存在其反向边;\n- 有 $\\frac{1}{4}$ 的概率 $u_i$ 和 $v_i$ 之间没有边。\n\n所有 $m$ 个随机事件是独立的。\n\n小 Y 认为一个无向图的核心是最小生成树，而一个有向图的核心是最小外向生成树。称图 $G'$ 的一个边子集 $E$ 是**外向生成树**，当且仅当 $|E| = n - 1$ 且存在一个节点 $x$ 可以只经过 $E$ 中的有向边到达图 $G'$ 上的所有节点。图 $G'$ 的**最小外向生成树**即为图 $G'$ 上边权和最小的外向生成树。\n\n小 Y 希望图的核心历经岁月侵蚀也保持不变，于是他想知道，有多大的概率，图 $G'$ 的最小外向生成树存在，且其边权和等于图 $G$ 的最小生成树边权和。\n\n你需要将答案对 $(10^9 + 7)$ 取模。可以证明答案一定为有理数 $\\frac{a}{b}$，其中 $a$ 和 $b$ 互质，且 $b$ 不是 $(10^9 + 7)$ 的倍数。因此你输出的数 $x$ 需要满足 $0 \\leq x < 10^9 + 7$ 且 $a \\equiv bx \\pmod{10^9 + 7}$，可以证明这样的 $x$ 唯一存在。", "inputFormat": "**本题有多组测试数据**。输入的第一行两个整数 $c, T$，分别表示测试点编号和测试数据组数，接下来输入每组测试数据。样例满足 $c = 0$。\n\n对于每组测试数据，第一行两个整数 $n, m$，分别表示图 $G$ 的点数和边数，接下来 $m$ 行，第 $i$ ($1 \\leq i \\leq m$) 行三个整数 $u_i, v_i, w_i$，描述图 $G$ 上的一条边。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示图 $G'$ 的最小外向生成树存在且其边权和等于图 $G$ 的最小生成树边权和的概率，对 $(10^9 + 7)$ 取模。", "hint": "**【样例 1 解释】**\n\n该组样例共有 2 组测试数据。\n- 对于第一组测试数据，由于图上只有一条边，因此只要 $G'$ 上有边，$G'$ 的最小外向生成树边权和就一定等于 $G$ 的最小生成树边权和。$G'$ 上存在边的概率为 $\\frac{3}{4}$，故答案为 $\\frac{3}{4}$，取模后的结果为 $750\\,000\\,006$。\n- 对于第二组测试数据，在所有 $2^{2m} = 64$ 种 $G'$ 中，有 13 种情况不满足 $G'$ 的最小外向生成树边权和等于 $G$ 的最小生成树边权和：\n - $G'$ 为空图;\n - $G'$ 仅包含一条有向边，共 6 种情况;\n - $G'$ 仅包含两条有向边，且指向同一个节点，共 3 种情况;\n - $G'$ 仅包含两条有向边，且构成一个二元环，共 3 种情况。\n\n由于所有情况等概率出现，因此答案为 $1 - \\frac{13}{64} = \\frac{51}{64}$，取模后的结果为 $171\\,875\\,002$。\n\n**【样例 2】**\n\n见选手目录下的 `years/years2.in` 与 `years/years2.ans`。\n\n该组样例共有 5 组测试数据。其中每组测试数据分别满足测试点 $1 \\sim 3$、$4 \\sim 6$、$7,8$、$9 \\sim 11$、$12,13$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 `years/years3.in` 与 `years/years3.ans`。\n\n该组样例共有 5 组测试数据。其中每组测试数据分别满足测试点 $14 \\sim 16$、$17, 18$、$19, 20$、$21 \\sim 23$、$24, 25$ 的限制。\n\n**【子任务】**\n\n对于所有测试点，\n- $1 \\leq T \\leq 5$,\n- $2 \\leq n \\leq 15$, $n - 1 \\leq m \\leq \\frac{n(n-1)}{2}$,\n- $\\forall 1 \\leq i \\leq m$, $1 \\leq u_i < v_i \\leq n$, $1 \\leq w_i \\leq m$,\n- $\\forall 1 \\leq i < j \\leq m$, $(u_i, v_i) \\neq (u_j, v_j)$，即 $G$ 没有重边，\n- 保证 $G$ 连通。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\leq$ | 特殊性质 |\n|:------------:|:------------:|:----------:|\n| $1 \\sim 3$ | $6$ | A |\n| $4 \\sim 6$ | $15$ | B |\n| $7, 8$ | $9$ | C |\n| $9 \\sim 11$ | $12$ | ^ |\n| $12, 13$ | $14$ | ^ |\n| $14 \\sim 16$ | $15$ | ^ |\n| $17, 18$ | $9$ | 无 |\n| $19, 20$ | $12$ | ^ |\n| $21 \\sim 23$ | $14$ | ^ |\n| $24, 25$ | $15$ | ^ |\n\n- 特殊性质 A：$m \\leq 6$, $\\forall 1 \\leq i \\leq m$, $w_i \\leq 2$。\n- 特殊性质 B：$\\forall 1 \\leq i < j \\leq m$, $w_i \\neq w_j$。\n- 特殊性质 C：$\\forall 1 \\leq i \\leq m$, $w_i = 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2025] 岁月", "background": "> 希望大家一直记得我。  \n> “希望大家永远忘了我。”", "description": "小 Y 有一个 $n$ 个节点、$m$ 条边的带权**无向图** $G$，节点由 1 至 $n$ 编号。第 $i$ ($1 \\leq i \\leq m$) 条边连接 $u_i$ 和 $v_i$，边权为 $w_i$。保证 $G$ 连通且没有重边自环。\n\n小 Y 预见到岁月将会磨灭图 $G$ 的痕迹，而这会导致一些边变成有向边，另一些边直接消失。具体地，图 $G$ 历经岁月将会磨损为 $n$ 个节点的带权**有向图** $G'$，其中对于第 $i$ ($1 \\leq i \\leq m$) 条边，$G'$ 上\n- 有 $\\frac{1}{4}$ 的概率同时存在 $u_i$ 向 $v_i$ 和 $v_i$ 向 $u_i$ 的有向边，它们的边权均为 $w_i$;\n- 有 $\\frac{1}{4}$ 的概率存在 $v_i$ 向 $u_i$、边权为 $w_i$ 的有向边，而不存在其反向边;\n- 有 $\\frac{1}{4}$ 的概率存在 $u_i$ 向 $v_i$、边权为 $w_i$ 的有向边，而不存在其反向边;\n- 有 $\\frac{1}{4}$ 的概率 $u_i$ 和 $v_i$ 之间没有边。\n\n所有 $m$ 个随机事件是独立的。\n\n小 Y 认为一个无向图的核心是最小生成树，而一个有向图的核心是最小外向生成树。称图 $G'$ 的一个边子集 $E$ 是**外向生成树**，当且仅当 $|E| = n - 1$ 且存在一个节点 $x$ 可以只经过 $E$ 中的有向边到达图 $G'$ 上的所有节点。图 $G'$ 的**最小外向生成树**即为图 $G'$ 上边权和最小的外向生成树。\n\n小 Y 希望图的核心历经岁月侵蚀也保持不变，于是他想知道，有多大的概率，图 $G'$ 的最小外向生成树存在，且其边权和等于图 $G$ 的最小生成树边权和。\n\n你需要将答案对 $(10^9 + 7)$ 取模。可以证明答案一定为有理数 $\\frac{a}{b}$，其中 $a$ 和 $b$ 互质，且 $b$ 不是 $(10^9 + 7)$ 的倍数。因此你输出的数 $x$ 需要满足 $0 \\leq x < 10^9 + 7$ 且 $a \\equiv bx \\pmod{10^9 + 7}$，可以证明这样的 $x$ 唯一存在。", "inputFormat": "**本题有多组测试数据**。输入的第一行两个整数 $c, T$，分别表示测试点编号和测试数据组数，接下来输入每组测试数据。样例满足 $c = 0$。\n\n对于每组测试数据，第一行两个整数 $n, m$，分别表示图 $G$ 的点数和边数，接下来 $m$ 行，第 $i$ ($1 \\leq i \\leq m$) 行三个整数 $u_i, v_i, w_i$，描述图 $G$ 上的一条边。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示图 $G'$ 的最小外向生成树存在且其边权和等于图 $G$ 的最小生成树边权和的概率，对 $(10^9 + 7)$ 取模。", "hint": "**【样例 1 解释】**\n\n该组样例共有 2 组测试数据。\n- 对于第一组测试数据，由于图上只有一条边，因此只要 $G'$ 上有边，$G'$ 的最小外向生成树边权和就一定等于 $G$ 的最小生成树边权和。$G'$ 上存在边的概率为 $\\frac{3}{4}$，故答案为 $\\frac{3}{4}$，取模后的结果为 $750\\,000\\,006$。\n- 对于第二组测试数据，在所有 $2^{2m} = 64$ 种 $G'$ 中，有 13 种情况不满足 $G'$ 的最小外向生成树边权和等于 $G$ 的最小生成树边权和：\n - $G'$ 为空图;\n - $G'$ 仅包含一条有向边，共 6 种情况;\n - $G'$ 仅包含两条有向边，且指向同一个节点，共 3 种情况;\n - $G'$ 仅包含两条有向边，且构成一个二元环，共 3 种情况。\n\n由于所有情况等概率出现，因此答案为 $1 - \\frac{13}{64} = \\frac{51}{64}$，取模后的结果为 $171\\,875\\,002$。\n\n**【样例 2】**\n\n见选手目录下的 `years/years2.in` 与 `years/years2.ans`。\n\n该组样例共有 5 组测试数据。其中每组测试数据分别满足测试点 $1 \\sim 3$、$4 \\sim 6$、$7,8$、$9 \\sim 11$、$12,13$ 的限制。\n\n**【样例 3】**\n\n见选手目录下的 `years/years3.in` 与 `years/years3.ans`。\n\n该组样例共有 5 组测试数据。其中每组测试数据分别满足测试点 $14 \\sim 16$、$17, 18$、$19, 20$、$21 \\sim 23$、$24, 25$ 的限制。\n\n**【子任务】**\n\n对于所有测试点，\n- $1 \\leq T \\leq 5$,\n- $2 \\leq n \\leq 15$, $n - 1 \\leq m \\leq \\frac{n(n-1)}{2}$,\n- $\\forall 1 \\leq i \\leq m$, $1 \\leq u_i < v_i \\leq n$, $1 \\leq w_i \\leq m$,\n- $\\forall 1 \\leq i < j \\leq m$, $(u_i, v_i) \\neq (u_j, v_j)$，即 $G$ 没有重边，\n- 保证 $G$ 连通。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\leq$ | 特殊性质 |\n|:------------:|:------------:|:----------:|\n| $1 \\sim 3$ | $6$ | A |\n| $4 \\sim 6$ | $15$ | B |\n| $7, 8$ | $9$ | C |\n| $9 \\sim 11$ | $12$ | ^ |\n| $12, 13$ | $14$ | ^ |\n| $14 \\sim 16$ | $15$ | ^ |\n| $17, 18$ | $9$ | 无 |\n| $19, 20$ | $12$ | ^ |\n| $21 \\sim 23$ | $14$ | ^ |\n| $24, 25$ | $15$ | ^ |\n\n- 特殊性质 A：$m \\leq 6$, $\\forall 1 \\leq i \\leq m$, $w_i \\leq 2$。\n- 特殊性质 B：$\\forall 1 \\leq i < j \\leq m$, $w_i \\neq w_j$。\n- 特殊性质 C：$\\forall 1 \\leq i \\leq m$, $w_i = 1$。", "locale": "zh-CN"}}}
{"pid": "P11835", "type": "P", "difficulty": 7, "samples": [["0 4\n3 2\n1 2 1\n4 3\n3 1 2 1\n5 4\n1 3 2 3 4\n7 5\n4 4 5 2 3 3 1", "4\n7\n20\n59"], ["0 2\n11 10\n8 8 8 9 9 8 8 9 9 9 8\n12 2500\n1529 1470 1361 1416 1492 1503 1641 1868 1829 1959 2052 2105", "694\n4961744"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "各省省选", "2025", "O2优化", "动态规划优化"], "title": "[省选联考 2025] 封印", "background": null, "description": "在一次探险中，小 H 发现了一个古老的封印。封印的本体是一个长度为 $n$ 的序列 $A = [a_1, a_2, \\ldots, a_n]$。初始，每个元素都是 1 至 $m$ 间的正整数。\n\n设 $|A|$ 表示序列 $A$ 的长度，小 H 可以对序列进行以下修改:\n1. 选择序列 $A$ 的某个**严格**前缀最大值元素 $a_s$，即选择 $1 \\leq s \\leq |A|$ 满足 $\\forall 1 \\leq j < s, a_s > a_j$，特别地，$a_1$ 总是序列 $A$ 的严格前缀最大值;\n2. 若 $a_s \\neq 1$，将 $(a_s - 1)$ 插入序列 $A$ 的尾端;\n3. 删去序列 $A$ 的前 $s$ 个元素。\n\n考虑如下例子：在 $A = [1, 3, 2, 3, 4]$ 时，\n- 小 H 可以选择 $s = 1$，此时修改后的序列变为 $[3, 2, 3, 4]$;\n- 小 H 可以选择 $s = 2$，此时修改后的序列变为 $[2, 3, 4, 2]$;\n- 小 H 不能选择 $s = 4$，因为 $a_2 = a_4 = 3$，这意味着 $a_4$ 并非严格前缀最大值。\n\n小 H 可以进行任意多次修改操作，也可以不进行任何修改。为了解开封印，小 H 想知道：通过以上修改操作，他可以得到多少种不同的非空序列。\n\n认为两个序列 $A = [a_1, \\ldots, a_n]$ 和 $B = [b_1, \\ldots, b_m]$ 不同，当且仅当 $n \\neq m$ 或 $\\exists 1 \\leq i \\leq \\min\\{n, m\\}$，$a_i \\neq b_i$。\n\n由于答案可能很大，你只需告诉小 H 答案对 $998\\,244\\,353$ 取模后的结果。", "inputFormat": "**本题有多组测试数据**。输入的第一行两个整数 $c, T$，分别表示测试点编号和测试数据组数，接下来输入每组测试数据。样例满足 $c = 0$。\n\n对于每组测试数据，第一行两个整数 $n, m$，分别表示序列长度与值域，第二行 $n$ 个整数 $a_1, a_2, \\ldots, a_n$，描述序列 $A$。", "outputFormat": "对于每组测试数据输出一行一个整数，表示通过修改操作可以得到的非空序列个数，对 $998\\,244\\,353$ 取模。", "hint": "**【样例 1 解释】**\n\n该组样例共有 4 组测试数据。\n- 对于第一组测试数据，可以通过修改得到的非空序列有 $[1, 2, 1]$，$[2, 1]$，$[1, 1]$，$[1]$。\n- 对于第二组测试数据，可以通过修改操作得到的非空序列有 $[3, 1, 2, 1]$，$[1, 2, 1, 2]$，$[2, 1, 2]$，$[1, 2, 1]$，$[2, 1]$，$[1, 1]$，$[1]$。\n\n**【样例 3】**\n\n见选手目录下的 `seal/seal3.in` 与 `seal/seal3.ans`。\n\n该组样例满足测试点 3 ~ 5 的限制。\n\n**【样例 4】**\n\n见选手目录下的 `seal/seal4.in` 与 `seal/seal4.ans`。\n\n该组样例满足测试点 10 的限制。\n\n**【样例 5】**\n\n见选手目录下的 `seal/seal5.in` 与 `seal/seal5.ans`。\n\n该组样例满足测试点 11 ~ 14 的限制。\n\n**【样例 6】**\n\n见选手目录下的 `seal/seal6.in` 与 `seal/seal6.ans`。\n\n该组样例满足测试点 15 的限制。\n\n**【样例 7】**\n\n见选手目录下的 `seal/seal7.in` 与 `seal/seal7.ans`。\n\n该组样例满足测试点 17 ~ 19 的限制。\n\n**【样例 8】**\n\n见选手目录下的 `seal/seal8.in` 与 `seal/seal8.ans`。\n\n该组样例满足测试点 22 ~ 25 的限制。\n\n**【子任务】**\n\n对于所有测试点，\n- $1\\leq T\\leq 10$，\n- $1\\leq n,m\\leq 2500$，\n- $\\forall 1\\leq i\\leq n$，$1\\leq a_i\\leq m$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\leq$ | $m \\leq$ | 特殊性质 |\n|:------------:|:------------:|:------------:|:----------:|\n| $1, 2$ | $10$ | $10$ | 无 |\n| $3 \\sim 5$ | $18$ | $70$ | ^ |\n| $6$ | ^ | ^ | A |\n| $7, 8$ | ^ | ^ | AB |\n| $9$ | $70$ | ^ | A |\n| $10$ | ^ | ^ | AB |\n| $11 \\sim 14$ | ^ | ^ | 无 |\n| $15$ | $300$ | $300$ | A |\n| $16$ | ^ | ^ | AB |\n| $17 \\sim 19$ | ^ | ^ | 无 |\n| $20$ | $2\\,500$ | $2\\,500$ | A |\n| $21$ | ^ | ^ | AB |\n| $22 \\sim 25$ | ^ | ^ | 无 |\n\n- 特殊性质 A：$\\forall 1 \\leq i < j \\leq n, a_i \\neq a_j$。\n- 特殊性质 B：$\\forall 1 \\leq i < n, a_i < a_{i+1}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2025] 封印", "background": null, "description": "在一次探险中，小 H 发现了一个古老的封印。封印的本体是一个长度为 $n$ 的序列 $A = [a_1, a_2, \\ldots, a_n]$。初始，每个元素都是 1 至 $m$ 间的正整数。\n\n设 $|A|$ 表示序列 $A$ 的长度，小 H 可以对序列进行以下修改:\n1. 选择序列 $A$ 的某个**严格**前缀最大值元素 $a_s$，即选择 $1 \\leq s \\leq |A|$ 满足 $\\forall 1 \\leq j < s, a_s > a_j$，特别地，$a_1$ 总是序列 $A$ 的严格前缀最大值;\n2. 若 $a_s \\neq 1$，将 $(a_s - 1)$ 插入序列 $A$ 的尾端;\n3. 删去序列 $A$ 的前 $s$ 个元素。\n\n考虑如下例子：在 $A = [1, 3, 2, 3, 4]$ 时，\n- 小 H 可以选择 $s = 1$，此时修改后的序列变为 $[3, 2, 3, 4]$;\n- 小 H 可以选择 $s = 2$，此时修改后的序列变为 $[2, 3, 4, 2]$;\n- 小 H 不能选择 $s = 4$，因为 $a_2 = a_4 = 3$，这意味着 $a_4$ 并非严格前缀最大值。\n\n小 H 可以进行任意多次修改操作，也可以不进行任何修改。为了解开封印，小 H 想知道：通过以上修改操作，他可以得到多少种不同的非空序列。\n\n认为两个序列 $A = [a_1, \\ldots, a_n]$ 和 $B = [b_1, \\ldots, b_m]$ 不同，当且仅当 $n \\neq m$ 或 $\\exists 1 \\leq i \\leq \\min\\{n, m\\}$，$a_i \\neq b_i$。\n\n由于答案可能很大，你只需告诉小 H 答案对 $998\\,244\\,353$ 取模后的结果。", "inputFormat": "**本题有多组测试数据**。输入的第一行两个整数 $c, T$，分别表示测试点编号和测试数据组数，接下来输入每组测试数据。样例满足 $c = 0$。\n\n对于每组测试数据，第一行两个整数 $n, m$，分别表示序列长度与值域，第二行 $n$ 个整数 $a_1, a_2, \\ldots, a_n$，描述序列 $A$。", "outputFormat": "对于每组测试数据输出一行一个整数，表示通过修改操作可以得到的非空序列个数，对 $998\\,244\\,353$ 取模。", "hint": "**【样例 1 解释】**\n\n该组样例共有 4 组测试数据。\n- 对于第一组测试数据，可以通过修改得到的非空序列有 $[1, 2, 1]$，$[2, 1]$，$[1, 1]$，$[1]$。\n- 对于第二组测试数据，可以通过修改操作得到的非空序列有 $[3, 1, 2, 1]$，$[1, 2, 1, 2]$，$[2, 1, 2]$，$[1, 2, 1]$，$[2, 1]$，$[1, 1]$，$[1]$。\n\n**【样例 3】**\n\n见选手目录下的 `seal/seal3.in` 与 `seal/seal3.ans`。\n\n该组样例满足测试点 3 ~ 5 的限制。\n\n**【样例 4】**\n\n见选手目录下的 `seal/seal4.in` 与 `seal/seal4.ans`。\n\n该组样例满足测试点 10 的限制。\n\n**【样例 5】**\n\n见选手目录下的 `seal/seal5.in` 与 `seal/seal5.ans`。\n\n该组样例满足测试点 11 ~ 14 的限制。\n\n**【样例 6】**\n\n见选手目录下的 `seal/seal6.in` 与 `seal/seal6.ans`。\n\n该组样例满足测试点 15 的限制。\n\n**【样例 7】**\n\n见选手目录下的 `seal/seal7.in` 与 `seal/seal7.ans`。\n\n该组样例满足测试点 17 ~ 19 的限制。\n\n**【样例 8】**\n\n见选手目录下的 `seal/seal8.in` 与 `seal/seal8.ans`。\n\n该组样例满足测试点 22 ~ 25 的限制。\n\n**【子任务】**\n\n对于所有测试点，\n- $1\\leq T\\leq 10$，\n- $1\\leq n,m\\leq 2500$，\n- $\\forall 1\\leq i\\leq n$，$1\\leq a_i\\leq m$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\leq$ | $m \\leq$ | 特殊性质 |\n|:------------:|:------------:|:------------:|:----------:|\n| $1, 2$ | $10$ | $10$ | 无 |\n| $3 \\sim 5$ | $18$ | $70$ | ^ |\n| $6$ | ^ | ^ | A |\n| $7, 8$ | ^ | ^ | AB |\n| $9$ | $70$ | ^ | A |\n| $10$ | ^ | ^ | AB |\n| $11 \\sim 14$ | ^ | ^ | 无 |\n| $15$ | $300$ | $300$ | A |\n| $16$ | ^ | ^ | AB |\n| $17 \\sim 19$ | ^ | ^ | 无 |\n| $20$ | $2\\,500$ | $2\\,500$ | A |\n| $21$ | ^ | ^ | AB |\n| $22 \\sim 25$ | ^ | ^ | 无 |\n\n- 特殊性质 A：$\\forall 1 \\leq i < j \\leq n, a_i \\neq a_j$。\n- 特殊性质 B：$\\forall 1 \\leq i < n, a_i < a_{i+1}$。", "locale": "zh-CN"}}}
{"pid": "P11836", "type": "P", "difficulty": 2, "samples": [["4 5\n..#.\n##.#\n####\n..##\n1 3\n2 3\n4 3\n4 4\n4 4", "4\n3\n2\n1\n0\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2025"], "title": "[USACO25FEB] Reflection B", "background": "", "description": "Farmer John 有一块正方形画布，由一个 $N$ 行 $N$ 列的方阵表示（$2 \\leq N \\leq 2000$，$N$ 为偶数）。他按照以下步骤来绘制画布：\n\n首先，他将画布分成四个等大的象限，由通过画布中心的水平和垂直直线分隔。\n其次，他在画布的右上象限中绘制了一幅美丽的画作。右上象限的每个方格或者被涂色（以 `#` 表示），或者未被涂色（以 `.` 表示）。\n最后，由于他对自己的画作感到非常自豪，他将其沿此前提到的水平和垂直直线翻转到画布的其他象限中。\n例如，假设 $N=8$，且 FJ 在步骤 2 中于右上象限绘制了以下画作：\n\n```plain\n.#..\n.#..\n.##.\n....\n```\n\n在步骤 3 中沿水平和垂直直线翻转过后，画布将如下所示：\n\n```plain\n..#..#..\n..#..#..\n.##..##.\n........\n........\n.##..##.\n..#..#..\n..#..#..\n```\n\n然而，当 FJ 熟睡时，Bessie 闯入了他的牛棚，偷走了他珍贵的画布。她彻底破坏了画布——移除了某些涂色的单元格，同时添加了某些涂色的单元格！在 FJ 醒来之前，她将画布归还给了 FJ。\n\nFJ 想要修改他的画布，使其再次满足翻转条件：即，它是将右上象限翻转到其他各象限的结果。由于他只有有限的资源，他希望以尽可能少的操作来实现这一点，其中单次操作包括为一个方格涂色或移除一个方格的涂色。\n\n给定 Bessie 破坏后的画布，以及一系列 $U$（$0\\le U \\leq 10^5$）次对画布的更新，每次更新切换单个方格的状态，若它是 '#' 则切换为 '.'，反之亦然。在所有更新之前，以及在每次更新之后，输出 FJ 为满足翻转条件所需要执行的最小操作数量 $x$。", "inputFormat": "输入的第一行包含整数 $N$ 和 $U$。\n\n以下 $N$ 行，每行包含 $N$ 个字符，表示 Bessie 破坏后的画布。每个字符均为 `#` 或 `.`。\n\n以下 $U$ 行，每行包含整数 $r$ 和 $c$，其中 $1 \\leq r, c \\leq N$，表示一次对画布从上到下第 $r$ 行，从左到右第 $c$ 列的方格的更新。", "outputFormat": "输出 $U+1$ 行，为在所有更新之前以及在每次更新之后的 $x$。\n", "hint": "样例 1 解释：\n\n以下画布满足翻转条件，并且可由原画布经过 4 次操作得到：\n\n```plain\n....\n####\n####\n....\n```\n\n使用少于 4 次操作使原画布满足翻转条件是不可能的。\n\n在更新 $(1, 3)$ 之后，画布看起来是这样的：\n\n```plain\n....\n##.#\n####\n..##\n```\n\n现在需要 3 次操作使画布满足翻转条件。\n\n在更新 $(2, 3)$ 之后，画布看起来是这样的：\n\n```plain\n....\n####\n####\n..##\n```\n\n现在需要 2 次操作使画布满足翻转条件。\n\n- 测试点 $2\\sim 3$：$N \\le 4$。\n- 测试点 $4\\sim 6$：$U \\le 10$。\n- 测试点 $7\\sim 16$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25FEB] Reflection B", "background": null, "description": "Farmer John has a square canvas represented by an $N$ by $N$ grid of cells ($2 \\leq N \\leq 2000$, $N$ is even). He paints the canvas according to the following steps:  \n\n1. First, he divides the canvas into four equal quadrants, separated by  horizontal and vertical lines through the center of the canvas.\n2. Next, he paints a lovely painting in the top-right quadrant of the canvas. Each cell of the top-right quadrant will either be painted (represented by '#') or unpainted (represented by '.').\n3. Finally, since he is so proud of his painting, he reflects it across the previously mentioned horizontal and vertical lines into the other quadrants of the canvas.  \n\nFor example, suppose $N=8$ and FJ painted the following painting in the top-right quadrant in step 2:  \n\n\n```\n.#..\n.#..\n.##.\n....\n```\n  \n\nThen after reflecting across the horizontal and vertical lines into the other quadrants in step 3, the canvas would look as follows:  \n\n\n```\n..#..#..\n..#..#..\n.##..##.\n........\n........\n.##..##.\n..#..#..\n..#..#..\n```\n  \n\nHowever, while FJ was sleeping, Bessie broke into his barn and stole his precious canvas. She totally vandalized the canvas  removing some painted cells and adding more painted cells! Before FJ woke up, she returned the canvas to FJ. \n\nFJ would like to modify his canvas so that it once again satisfies the reflective condition: that is, it is the result of reflecting the top-right quadrant into each of the other quadrants.  Since he only has a limited number of resources, he would like to achieve this in as  few operations as possible, where a single operation consists of either painting a cell or removing paint from a cell.   \n\nYou are given the canvas after Bessie's vandalism, as well as a sequence of $U$ ($0\\le U \\leq 10^5$)  updates to the canvas, each toggling a single cell to '.' if it is '#', or vice versa. Before any updates, and after each update, output the minimum number of operations $x$ FJ needs to perform so that the reflective condition is satisfied.", "inputFormat": "The first line contains integers $N$ and $U$.  \n\nThe next $N$ lines each contain $N$ characters representing the canvas after Bessie's vandalism. Every character is either '#' or '.'.  \n\nThe following $U$ lines each contain integers $r$ and $c$, where $1 \\leq r, c \\leq N$, representing an update to the cell in the $r$th row from the top and $c$th column from the left of the canvas.", "outputFormat": "Output $U+1$ lines representing $x$ before any updates and after each update.", "hint": "##### For Sample 1:\n\nThe following canvas satisfies the reflective condition and differs from the original canvas by 4 operations:  \n\n\n```\n....\n####\n####\n....\n```\n  \n\nIt is impossible to make the original canvas satisfy the reflective condition using fewer than 4 operations.  \n\nAfter updating $(1, 3)$, the canvas looks like this:  \n\n\n```\n....\n##.#\n####\n..##\n```\n  \n\nIt now takes 3 operations to make the canvas satisfy the reflective condition.  \n\nAfter updating $(2, 3)$, the canvas looks like this:  \n\n\n```\n....\n####\n####\n..##\n```\n  \n\nIt now takes 2 operations to make the canvas satisfy the reflective condition.  \n\n\n#### SCORING:\n \n- Inputs 2-3: $N \\le 4$\n- Inputs 4-6: $U \\le 10$\n- Inputs 7-16: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO25FEB] Reflection B", "background": "", "description": "Farmer John 有一块正方形画布，由一个 $N$ 行 $N$ 列的方阵表示（$2 \\leq N \\leq 2000$，$N$ 为偶数）。他按照以下步骤来绘制画布：\n\n首先，他将画布分成四个等大的象限，由通过画布中心的水平和垂直直线分隔。\n其次，他在画布的右上象限中绘制了一幅美丽的画作。右上象限的每个方格或者被涂色（以 `#` 表示），或者未被涂色（以 `.` 表示）。\n最后，由于他对自己的画作感到非常自豪，他将其沿此前提到的水平和垂直直线翻转到画布的其他象限中。\n例如，假设 $N=8$，且 FJ 在步骤 2 中于右上象限绘制了以下画作：\n\n```plain\n.#..\n.#..\n.##.\n....\n```\n\n在步骤 3 中沿水平和垂直直线翻转过后，画布将如下所示：\n\n```plain\n..#..#..\n..#..#..\n.##..##.\n........\n........\n.##..##.\n..#..#..\n..#..#..\n```\n\n然而，当 FJ 熟睡时，Bessie 闯入了他的牛棚，偷走了他珍贵的画布。她彻底破坏了画布——移除了某些涂色的单元格，同时添加了某些涂色的单元格！在 FJ 醒来之前，她将画布归还给了 FJ。\n\nFJ 想要修改他的画布，使其再次满足翻转条件：即，它是将右上象限翻转到其他各象限的结果。由于他只有有限的资源，他希望以尽可能少的操作来实现这一点，其中单次操作包括为一个方格涂色或移除一个方格的涂色。\n\n给定 Bessie 破坏后的画布，以及一系列 $U$（$0\\le U \\leq 10^5$）次对画布的更新，每次更新切换单个方格的状态，若它是 '#' 则切换为 '.'，反之亦然。在所有更新之前，以及在每次更新之后，输出 FJ 为满足翻转条件所需要执行的最小操作数量 $x$。", "inputFormat": "输入的第一行包含整数 $N$ 和 $U$。\n\n以下 $N$ 行，每行包含 $N$ 个字符，表示 Bessie 破坏后的画布。每个字符均为 `#` 或 `.`。\n\n以下 $U$ 行，每行包含整数 $r$ 和 $c$，其中 $1 \\leq r, c \\leq N$，表示一次对画布从上到下第 $r$ 行，从左到右第 $c$ 列的方格的更新。", "outputFormat": "输出 $U+1$ 行，为在所有更新之前以及在每次更新之后的 $x$。\n", "hint": "样例 1 解释：\n\n以下画布满足翻转条件，并且可由原画布经过 4 次操作得到：\n\n```plain\n....\n####\n####\n....\n```\n\n使用少于 4 次操作使原画布满足翻转条件是不可能的。\n\n在更新 $(1, 3)$ 之后，画布看起来是这样的：\n\n```plain\n....\n##.#\n####\n..##\n```\n\n现在需要 3 次操作使画布满足翻转条件。\n\n在更新 $(2, 3)$ 之后，画布看起来是这样的：\n\n```plain\n....\n####\n####\n..##\n```\n\n现在需要 2 次操作使画布满足翻转条件。\n\n- 测试点 $2\\sim 3$：$N \\le 4$。\n- 测试点 $4\\sim 6$：$U \\le 10$。\n- 测试点 $7\\sim 16$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11837", "type": "P", "difficulty": 2, "samples": [["4\n2 2 2 0", "1\n0\n3\n1\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "2025"], "title": "[USACO25FEB] Making Mexes B", "background": "", "description": "给定一个包含 $N$ 个非负整数的数组 $a$，$a_1, a_2, \\dots, a_N$（$1\\le N\\le 2\\cdot 10^5$，$0\\le a_i\\le N$）。在一次操作中，你可以将 $a$ 的任一元素修改为任意非负整数。\n\n一个数组的 mex 是它不包含的最小非负整数。对于范围 $0$ 到 $N$ 内的每一个 $i$，计算使 $a$ 的 mex 等于 $i$ 所需要的最小操作次数。", "inputFormat": "输入的第一行包含 $N$。\n\n以下一行包含 $a_1,a_2,\\dots, a_N$。", "outputFormat": "对于范围 $0$ 到 $N$ 内的每一个 $i$ 输出一行，包含对于 $i$ 的最小操作次数。注意，$a$ 的 mex 对于范围 $0$ 到 $N$ 内的任意 $i$ 值都是可以通过修改取到的。\n", "hint": "样例 1 解释：\n\n- 为使 $a$ 的 mex 等于 $0$，我们可以将 $a_4$ 修改为 $3$（或任何正整数）。在得到的数组 $[2, 2, 2, 3]$ 中，$0$ 是数组不包含的最小非负整数，因此 $0$ 是数组的 mex。\n- 为使 $a$ 的 mex 等于 $1$，我们不需要进行任何修改，因为 $1$ 已经是 $a = [2, 2, 2, 0]$ 中不包含的最小非负整数。\n- 为使 $a$ 的 mex 等于 $2$，我们需要修改 $a$ 的前三个元素。例如，我们可以将 $a$ 修改为 $[3, 1, 1, 0]$。\n\n- 测试点 $2\\sim 6$：$N\\le 10^3$。\n- 测试点 $7\\sim 11$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25FEB] Making Mexes B", "background": null, "description": "You are given an array $a$ of $N$ non-negative integers $a_1, a_2, \\dots, a_N$ ($1\\le N\\le 2\\cdot 10^5, 0\\le a_i\\le N$). In one operation, you can change any element of $a$ to any non-negative integer.  \n\nThe _mex_ of an array is the minimum non-negative integer that it does not contain. For each $i$ in the range $0$ to $N$ inclusive, compute the minimum number of operations you need  in order to make the mex of $a$ equal $i$.", "inputFormat": "The first line contains $N$.  \n\nThe next line contains $a_1,a_2,\\dots, a_N$.", "outputFormat": "For each $i$ in the range $0$ to $N$, output the minimum number of operations for $i$ on a new line. Note that it is always possible to make the mex of $a$ equal to any $i$ in the range $0$ to $N$.", "hint": "##### For Sample 1:\n- To make the mex of $a$ equal to $0$, we can change $a_4$ to $3$ (or any positive integer). In the resulting array, $[2, 2, 2, 3]$, $0$ is the smallest non-negative integer that the array does not contain, so $0$ is the mex of the array.\n- To make the mex of $a$ equal to $1$, we don't need to make any changes since $1$ is already the smallest non-negative integer that $a = [2, 2, 2, 0]$ does not contain.\n- To make the mex of $a$ equal to $2$, we need to change the first three elements of $a$. For example, we can change $a$ to be $[3, 1, 1, 0]$.  \n\n#### SCORING:\n\n- Inputs 2-6: $N\\le 10^3$\n- Inputs 7-11: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO25FEB] Making Mexes B", "background": "", "description": "给定一个包含 $N$ 个非负整数的数组 $a$，$a_1, a_2, \\dots, a_N$（$1\\le N\\le 2\\cdot 10^5$，$0\\le a_i\\le N$）。在一次操作中，你可以将 $a$ 的任一元素修改为任意非负整数。\n\n一个数组的 mex 是它不包含的最小非负整数。对于范围 $0$ 到 $N$ 内的每一个 $i$，计算使 $a$ 的 mex 等于 $i$ 所需要的最小操作次数。", "inputFormat": "输入的第一行包含 $N$。\n\n以下一行包含 $a_1,a_2,\\dots, a_N$。", "outputFormat": "对于范围 $0$ 到 $N$ 内的每一个 $i$ 输出一行，包含对于 $i$ 的最小操作次数。注意，$a$ 的 mex 对于范围 $0$ 到 $N$ 内的任意 $i$ 值都是可以通过修改取到的。\n", "hint": "样例 1 解释：\n\n- 为使 $a$ 的 mex 等于 $0$，我们可以将 $a_4$ 修改为 $3$（或任何正整数）。在得到的数组 $[2, 2, 2, 3]$ 中，$0$ 是数组不包含的最小非负整数，因此 $0$ 是数组的 mex。\n- 为使 $a$ 的 mex 等于 $1$，我们不需要进行任何修改，因为 $1$ 已经是 $a = [2, 2, 2, 0]$ 中不包含的最小非负整数。\n- 为使 $a$ 的 mex 等于 $2$，我们需要修改 $a$ 的前三个元素。例如，我们可以将 $a$ 修改为 $[3, 1, 1, 0]$。\n\n- 测试点 $2\\sim 6$：$N\\le 10^3$。\n- 测试点 $7\\sim 11$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11838", "type": "P", "difficulty": 4, "samples": [["2\n1 1\n1\n4 1\n1 1 1 1", "YES\nYES"], ["11\n4 2\n1 2 2 2\n4 2\n1 1 2 1\n4 2\n1 1 2 2\n6 2\n1 1 2 2 1 1\n10 2\n1 1 1 2 2 1 1 1 2 2\n8 3\n3 3 1 2 2 1 2 2\n9 3\n1 1 2 2 2 3 3 3 3\n16 3\n2 2 3 2 2 3 1 1 2 2 3 2 2 3 1 1\n24 3\n1 1 2 2 3 3 3 2 2 3 3 3 1 1 2 2 3 3 3 2 2 3 3 3\n9 3\n1 2 2 1 3 3 1 2 2\n6 3\n1 2 1 2 2 3", "YES\nNO\nYES\nNO\nYES\nYES\nYES\nYES\nYES\nNO\nNO"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "递归", "2025", "剪枝", "区间 DP"], "title": "[USACO25FEB] Printing Sequences B", "background": "", "description": "Bessie 正在学习使用一种简单的编程语言进行编程。她首先定义一个合法的程序，然后执行该程序以产生一些输出序列。\n\n### 定义：\n\n一个程序是一个非空的语句序列。\n\n一个语句的形式或者是 \"PRINT $c$\"，其中 $c$ 是一个整数，或者是 \"REP $o$\"，随后是一个程序，随后是 \"END\"，其中 $o$ 是一个不小于 1 的整数。\n\n### 执行：\n\n执行一个程序将依次执行其语句。\n\n执行语句 \"PRINT $c$\" 将使 $c$ 追加到输出序列中。\n\n执行以 \"REP $o$\" 开始的语句将依次执行内部程序共 $o$ 次。\n\nBessie 知道如何编写的一个程序示例如下。\n\n```plain\nREP 3\n    PRINT 1\n    REP 2\n        PRINT 2\n    END\nEND\n```\n\n该程序输出序列 $[1,2,2,1,2,2,1,2,2]$。\n\nBessie 想要输出一个包含 $N$（$1 \\le N \\le 100$）个正整数的序列。Elsie 挑战她使用不超过 $K$（$1 \\le K \\le 3$）个 \"PRINT\" 语句。注意，Bessie 可以使用任意数量的 \"REP\" 语句。同时注意，序列中的每个正整数都不超过 $K$。\n\n对于 $T$（$1 \\le T \\le 100$）个独立的测试用例中的每一个，求 Bessie 是否可以编写一个程序，使用至多 $K$ 个 \"PRINT\" 语句输出给定的序列。", "inputFormat": "输入的第一行包含 $T$。\n\n每一个测试用例的第一行包含空格分隔的两个整数 $N$ 和 $K$。\n\n每一个测试用例的第二行包含一个由 $N$ 个空格分隔的正整数组成的序列，每个数都不超过 $K$，为 Bessie 想要产生的序列。", "outputFormat": "对于每一个测试用例输出一行，包含 \"YES\" 或 \"NO\"（大小写敏感）。\n", "hint": "样例 1 解释：\n\n对于第二个测试用例，以下代码使用了 $1$ 个 \"PRINT\" 语句输出了序列 $[1,1,1,1]$。\n\n```plain\nREP 4\n    PRINT 1\nEND\n```\n\n样例 2 解释：\n\n对于第一个测试用例，以下代码使用了 $2$ 个 \"PRINT\" 语句输出了序列 $[1,2,2,2]$。\n\n```plain\nPRINT 1\nREP 3\n    PRINT 2\nEND\n```\n\n对于第二个测试用例，答案是 \"NO\"，因为使用不超过 $2$ 个 \"PRINT\" 语句输出序列 $[1,1,2,1]$ 是不可能的。\n\n对于第六个测试用例，以下代码使用了 $3$ 个 \"PRINT\" 语句输出了序列 $[3,3,1,2,2,1,2,2]$。\n\n```plain\nREP 2\n    PRINT 3\nEND\nREP 2\n    PRINT 1\n    REP 2\n        PRINT 2\n    END\nEND\n```\n\n- 测试点 $3$：$K=1$。\n- 测试点 $4\\sim 7$：$K \\le 2$。\n- 测试点 $8\\sim 13$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25FEB] Printing Sequences B", "background": null, "description": "Bessie is learning to code using a simple programming language. She first defines a valid program, then executes it to produce some output sequence.   \n\n**Defining:**  \n- A _program_ is a nonempty sequence of _statements_.\n- A statement is either of the form \"PRINT $c$\" where $c$ is an integer, or \"REP $o$\",  followed by a program, followed by \"END,\" where $o$ is an integer that is at least 1.\n\n**Executing:** \n- Executing a program executes its statements in sequence.\n- Executing the statement \"PRINT $c$\" appends $c$ to the output sequence.\n- Executing a statement starting with \"REP $o$\" executes the inner program a total of $o$ times in sequence.  \n\nAn example of a program that Bessie knows how to write is as follows.  \n\n```\nREP 3\n    PRINT 1\n    REP 2\n        PRINT 2\n    END\nEND\n```\n\nThe program outputs the sequence $[1,2,2,1,2,2,1,2,2]$.  \n\nBessie wants to output a sequence of $N$ ($1 \\le N \\le 100$) positive integers. Elsie challenges her to use no more than $K$ ($1 \\le K \\le 3$) \"PRINT\" statements. Note that Bessie can use as many \"REP\" statements as she wants. Also note that each positive integer in the sequence is no greater than $K$.  \n\nFor each of $T$ ($1 \\le T \\le 100$) independent test cases, determine whether Bessie can write a program that outputs some given sequence using at most $K$ \"PRINT\" statements.", "inputFormat": "The first line contains $T$.  \n\nThe first line of each test case contains two space-separated integers, $N$ and $K$.  \n\nThe second line of each test case contains a sequence of $N$ space-separated positive integers,  each at most $K$, which is the sequence that Bessie wants to produce.", "outputFormat": "For each test case, output \"YES\" or \"NO\" (case sensitive) on a separate line.", "hint": "##### For Sample 1:\nFor the second test case, the following code outputs the sequence $[1,1,1,1]$ with $1$ \"PRINT\" statement.  \n\n```\nREP 4\n    PRINT 1\nEND\n```\n\n##### For Sample 2:\nFor the first test case, the following code outputs the sequence $[1,2,2,2]$ with $2$ \"PRINT\" statements.  \n\n```\nPRINT 1\nREP 3\n    PRINT 2\nEND\n```\n\nFor the second test case, the answer is \"NO\" because it is impossible to output the sequence $[1,1,2,1]$ using at most $2$ \"PRINT\" statements.  \n\nFor the sixth test case, the following code outputs the sequence $[3,3,1,2,2,1,2,2]$ with $3$ \"PRINT\" statements.  \n\n```\nREP 2\n    PRINT 3\nEND\nREP 2\n    PRINT 1\n    REP 2\n        PRINT 2\n    END\nEND\n```\n\n#### SCORING:\n \n- Input 3: $K=1$\n- Inputs 4-7: $K \\le 2$\n- Inputs 8-13: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO25FEB] Printing Sequences B", "background": "", "description": "Bessie 正在学习使用一种简单的编程语言进行编程。她首先定义一个合法的程序，然后执行该程序以产生一些输出序列。\n\n### 定义：\n\n一个程序是一个非空的语句序列。\n\n一个语句的形式或者是 \"PRINT $c$\"，其中 $c$ 是一个整数，或者是 \"REP $o$\"，随后是一个程序，随后是 \"END\"，其中 $o$ 是一个不小于 1 的整数。\n\n### 执行：\n\n执行一个程序将依次执行其语句。\n\n执行语句 \"PRINT $c$\" 将使 $c$ 追加到输出序列中。\n\n执行以 \"REP $o$\" 开始的语句将依次执行内部程序共 $o$ 次。\n\nBessie 知道如何编写的一个程序示例如下。\n\n```plain\nREP 3\n    PRINT 1\n    REP 2\n        PRINT 2\n    END\nEND\n```\n\n该程序输出序列 $[1,2,2,1,2,2,1,2,2]$。\n\nBessie 想要输出一个包含 $N$（$1 \\le N \\le 100$）个正整数的序列。Elsie 挑战她使用不超过 $K$（$1 \\le K \\le 3$）个 \"PRINT\" 语句。注意，Bessie 可以使用任意数量的 \"REP\" 语句。同时注意，序列中的每个正整数都不超过 $K$。\n\n对于 $T$（$1 \\le T \\le 100$）个独立的测试用例中的每一个，求 Bessie 是否可以编写一个程序，使用至多 $K$ 个 \"PRINT\" 语句输出给定的序列。", "inputFormat": "输入的第一行包含 $T$。\n\n每一个测试用例的第一行包含空格分隔的两个整数 $N$ 和 $K$。\n\n每一个测试用例的第二行包含一个由 $N$ 个空格分隔的正整数组成的序列，每个数都不超过 $K$，为 Bessie 想要产生的序列。", "outputFormat": "对于每一个测试用例输出一行，包含 \"YES\" 或 \"NO\"（大小写敏感）。\n", "hint": "样例 1 解释：\n\n对于第二个测试用例，以下代码使用了 $1$ 个 \"PRINT\" 语句输出了序列 $[1,1,1,1]$。\n\n```plain\nREP 4\n    PRINT 1\nEND\n```\n\n样例 2 解释：\n\n对于第一个测试用例，以下代码使用了 $2$ 个 \"PRINT\" 语句输出了序列 $[1,2,2,2]$。\n\n```plain\nPRINT 1\nREP 3\n    PRINT 2\nEND\n```\n\n对于第二个测试用例，答案是 \"NO\"，因为使用不超过 $2$ 个 \"PRINT\" 语句输出序列 $[1,1,2,1]$ 是不可能的。\n\n对于第六个测试用例，以下代码使用了 $3$ 个 \"PRINT\" 语句输出了序列 $[3,3,1,2,2,1,2,2]$。\n\n```plain\nREP 2\n    PRINT 3\nEND\nREP 2\n    PRINT 1\n    REP 2\n        PRINT 2\n    END\nEND\n```\n\n- 测试点 $3$：$K=1$。\n- 测试点 $4\\sim 7$：$K \\le 2$。\n- 测试点 $8\\sim 13$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P11839", "type": "P", "difficulty": 4, "samples": [["3\n5\n4 3 2 1 3\n6\n5 1 2 6 3 4\n6\n4 1 3 2 1 1", "4 3 3 2 1\n6 5 4\n4 3 2 1 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "贪心", "USACO", "2025"], "title": "[USACO25FEB] The Best Lineup S", "background": "", "description": "Farmer John 有 $N$（$1 \\leq N \\leq 2 \\cdot 10^5$）头奶牛排成一条队伍 $a$。队伍 $a$ 中从前到后第 $i$ 头奶牛编号为一个整数 $a_i$（$1 \\leq a_i \\leq N$）。可能存在多头奶牛编号为同一整数。\n\nFJ 将以以下方式构造另一条队伍 $b$：\n\n- 初始时，$b$ 为空。\n- 当 $a$ 非空时，移除 $a$ 最前面的奶牛，并选择是否将该奶牛添加到 $b$ 的最后。\n\nFJ 想要构造队伍 $b$，使得 $b$ 中从前到后的编号序列是字典序最大的（见脚注）。\n\n在 FJ 构造队伍 $b$ 之前，他可以执行以下操作至多一次：\n\n- 选择队伍 $a$ 中的一头奶牛，并将其移动至当前位置之前的任意位置。\n\n假设 FJ 以最优方式执行至多一次上述操作，输出他可以达到的字典序最大的 $b$ 的编号序列。\n\n每个测试点将包含 $T$（$1 \\leq T \\leq 100$）个独立的测试用例。", "inputFormat": "输入的第一行包含 $T$。\n\n每一个测试用例的第一行包含 $N$。\n\n每一个测试用例的第二行包含 $N$ 个空格分隔的整数 $a_1, a_2, \\ldots, a_N$。\n\n输入保证所有测试用例的 $N$ 之和不超过 $10^6$。", "outputFormat": "对于每一个测试用例输出一行，包含字典序最大的 $b$。\n", "hint": "样例 1 解释：\n\n在第一个测试用例中，FJ 可以将第五头奶牛移动到第二头奶牛之后。现在，$a = [4, 3, 3, 2, 1]$。可以证明，$[4, 3, 3, 2, 1]$ 也是字典序最大的 $b$。\n\n在第二个测试用例中，FJ 可以将第四头奶牛移动到队伍的最前面。\n\n在第三个测试用例中，FJ 不需要执行任何操作。他可以通过将除第二头奶牛之外的每头奶牛添加到 $b$ 的最后来构造 $b$。可以证明，这得到了字典序最大的 $b$。\n\n- 测试点 $2\\sim 4$：$N \\leq 100$。\n- 测试点 $5\\sim 8$：$N \\leq 750$。\n- 测试点 $9\\sim 18$：没有额外限制。\n\n### 脚注\n\n我们知道，序列 $s$ 的字典序大于序列 $t$ 当且仅当以下条件之一成立：\n- 在 $s_i \\neq t_i$ 的第一个位置 $i$ 处，有 $s_i > t_i$。\n- 当不存在这样的 $i$ 时，$s$ 的长度大于 $t$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25FEB] The Best Lineup S", "background": null, "description": "Farmer John has $N$ $(1 \\leq N \\leq 2 \\cdot 10^5)$ cows in a line $a$. The $i$'th cow from the front of line $a$ is labeled an integer $a_i$ ($1 \\leq a_i \\leq N$). Multiple cows may be labeled the same integer.  \n\nFJ will construct another line $b$ in the following manner: \n-  Initially, $b$ is empty. \n- While $a$ is nonempty, remove the cow at the front of $a$ and potentially add that cow to the back of $b$.  \n\nFJ wants to construct line $b$ such that the sequence of labels in $b$ from front to back is lexicographically greatest (see the footnote).  \n\nBefore FJ constructs line $b$, he can perform the following operation at most once:  \n\n\n-  Choose a cow in line $a$ and move it anywhere before its current position.   \n\nGiven that FJ optimally performs the aforementioned operation at most once, output the lexicographically greatest label sequence of $b$ he can achieve.   \n\nEach input will consist of $T$ ($1 \\leq T \\leq 100$) independent test cases.", "inputFormat": "The first line contains $T$.  \n\nThe first line of each test case contains $N$.  \n\nThe second line of each test case contains $N$ space-separated integers $a_1, a_2, \\ldots, a_N$.  \n\nIt is guaranteed that the sum of $N$ over all test cases does not exceed $10^6$.", "outputFormat": "For each test case, output the lexicographically greatest $b$ on a new line.", "hint": "In the first test case, FJ can move the fifth cow to directly after the second cow. Now, $a = [4, 3, 3, 2, 1]$. It can be shown $[4, 3, 3, 2, 1]$ is also the lexicographically greatest $b$.   \n\nIn the second test case, FJ can move the fourth cow to the front of the line.  \n\nIn the third test case, FJ does not need to perform any operations. He can construct $b$ by adding each cow beside the second cow to the back of $b$. It can be shown this results in the lexicographically greatest $b$.  \n\n#### SCORING:\n \n-  Inputs 2-4: $N \\leq 100$ \n-  Inputs 5-8: $N \\leq 750$ \n-  Inputs 9-18: No additional constraints    \n\n#### FOOTNOTE:\nRecall that a sequence $s$ is lexicographically greater than a sequence $t$ if and only if one of the following holds: \n-  At the first position $i$ where $s_i \\neq t_i$, $s_i > t_i$. \n-  If no such $i$ exists, $s$ is longer than $t$.", "locale": "en"}, "zh-CN": {"title": "[USACO25FEB] The Best Lineup S", "background": "", "description": "Farmer John 有 $N$（$1 \\leq N \\leq 2 \\cdot 10^5$）头奶牛排成一条队伍 $a$。队伍 $a$ 中从前到后第 $i$ 头奶牛编号为一个整数 $a_i$（$1 \\leq a_i \\leq N$）。可能存在多头奶牛编号为同一整数。\n\nFJ 将以以下方式构造另一条队伍 $b$：\n\n- 初始时，$b$ 为空。\n- 当 $a$ 非空时，移除 $a$ 最前面的奶牛，并选择是否将该奶牛添加到 $b$ 的最后。\n\nFJ 想要构造队伍 $b$，使得 $b$ 中从前到后的编号序列是字典序最大的（见脚注）。\n\n在 FJ 构造队伍 $b$ 之前，他可以执行以下操作至多一次：\n\n- 选择队伍 $a$ 中的一头奶牛，并将其移动至当前位置之前的任意位置。\n\n假设 FJ 以最优方式执行至多一次上述操作，输出他可以达到的字典序最大的 $b$ 的编号序列。\n\n每个测试点将包含 $T$（$1 \\leq T \\leq 100$）个独立的测试用例。", "inputFormat": "输入的第一行包含 $T$。\n\n每一个测试用例的第一行包含 $N$。\n\n每一个测试用例的第二行包含 $N$ 个空格分隔的整数 $a_1, a_2, \\ldots, a_N$。\n\n输入保证所有测试用例的 $N$ 之和不超过 $10^6$。", "outputFormat": "对于每一个测试用例输出一行，包含字典序最大的 $b$。\n", "hint": "样例 1 解释：\n\n在第一个测试用例中，FJ 可以将第五头奶牛移动到第二头奶牛之后。现在，$a = [4, 3, 3, 2, 1]$。可以证明，$[4, 3, 3, 2, 1]$ 也是字典序最大的 $b$。\n\n在第二个测试用例中，FJ 可以将第四头奶牛移动到队伍的最前面。\n\n在第三个测试用例中，FJ 不需要执行任何操作。他可以通过将除第二头奶牛之外的每头奶牛添加到 $b$ 的最后来构造 $b$。可以证明，这得到了字典序最大的 $b$。\n\n- 测试点 $2\\sim 4$：$N \\leq 100$。\n- 测试点 $5\\sim 8$：$N \\leq 750$。\n- 测试点 $9\\sim 18$：没有额外限制。\n\n### 脚注\n\n我们知道，序列 $s$ 的字典序大于序列 $t$ 当且仅当以下条件之一成立：\n- 在 $s_i \\neq t_i$ 的第一个位置 $i$ 处，有 $s_i > t_i$。\n- 当不存在这样的 $i$ 时，$s$ 的长度大于 $t$。", "locale": "zh-CN"}}}
{"pid": "P11840", "type": "P", "difficulty": 4, "samples": [["5\n0 1 2 3 4\n5", "0"], ["4\n0 0 1 1\n4\n3\n2", "2\n1\n0"], ["4\n0 0 1 1\n2\n3\n4", "1\n2\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2025", "树的遍历"], "title": "[USACO25FEB] Vocabulary Quiz S", "background": "", "description": "Bessie 正在帮助 Elsie 准备她即将到来的词汇测验。要测验的单词将从 $M$ 个不同单词的词库中抽取，其中词库里没有一个单词是另一个单词的前缀。\n\n当词库非空时，Bessie 将从词库中选择一个单词，将其从词库中移除，并从左到右逐个字符地读给 Elsie。Elsie 的任务是在她能够唯一确定该单词时告诉 Bessie，此后 Bessie 将停止朗读。\n\nBessie 已经决定按顺序 $w_1,w_2,\\dots,w_M$ 朗读单词。如果 Elsie 尽可能快地回答，Bessie 将朗读每个单词的多少个字符？\n\n这些单词以一种压缩格式给出。我们将首先定义 $N+1$（$1\\le N\\le 10^6$）个不同的单词，然后词库将由其中所有不作为另一个单词前缀的单词组成。这些单词定义如下：\n\n- 初始时，第 $0$ 个单词为空字符串。\n- 然后对于每一个 $1\\le i\\le N$，第 $i$ 个单词将等于第 $p_i$ 个单词在末尾加上一个额外的字符（$0\\le p_i<i$）。字符的选择使得所有 $N+1$ 个单词各不相同。", "inputFormat": "输入的第一行包含 $N$，其中 $N+1$ 是以压缩格式给出的单词的数量。\n\n以下一行包含 $p_1,p_2,\\dots,p_N$，其中 $p_i$ 表示第 $i$ 个单词是通过取第 $p_i$ 个单词并在末尾添加一个字符形成的。\n\n令 $M$ 为不是某个其他单词前缀的单词数量。以下 $M$ 行将包含 $w_1,w_2,\\dots,w_M$，表示第 $w_i$ 个单词将是第 $i$ 个被朗读的单词。输入保证朗读的单词形成词库中单词的一个排列。", "outputFormat": "输出 $M$ 行，其中第 $i$ 行包含 Bessie 对第 $i$ 个单词朗读的字符数量。\n", "hint": "样例 1 解释：\n\n有 $6$ 个单词编号为 $0 \\dots 5$。单词 $5$ 是唯一一个不是另一个单词的前缀的单词，因此它是词库中唯一的单词。一般地说，一旦库中仅剩下一个单词，Elsie 就不再需要任何字符以确定它。\n\n样例 2 解释：\n\n词库由单词 $2$，$3$ 和 $4$ 组成。\n\nElsie 需要两个字符来确定单词 $4$，因为单词 $3$ 和 $4$ 的第一个字符相同。\n\n一旦 Bessie 朗读了单词 $3$ 的第一个字符，Elsie 就有了足够的字符来唯一确定它，因为单词 $4$ 已经被朗读。\n\n- 测试点 $4\\sim 5$：所有单词的长度均不超过 $20$。\n- 测试点 $6\\sim 10$：词库中所有单词的长度之和不超过 $10^7$。\n- 测试点 $11\\sim 18$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO25FEB] Vocabulary Quiz S", "background": null, "description": "Bessie is helping Elsie with her upcoming vocabulary quiz. The words to be tested will be drawn from a bank of $M$ distinct words, where no word in the bank is a prefix of another word in the bank.  \n\nWhile the bank is nonempty, Bessie will select a word from the bank, remove it from the bank, and read it to Elsie one character at a time from left to right. Elsie's task is to tell Bessie once she can uniquely identify it, after which Bessie will stop reading.   \n\nBessie has already decided to read the words from the word bank in the order  $w_1,w_2,\\dots,w_M$. If Elsie answers as quickly as possible, how  many characters of each word will Bessie read?  \n\nThe words are given in a compressed format. We will first define $N+1$ ($1\\le N\\le 10^6$) distinct words, and then the word bank will consist of all those words that are not a prefix of another word. The words are defined as follows:  \n\n\n- Initially, the $0$th word will be the empty string. \n- Then for each $1\\le i\\le N$,  the $i$th word will be equal to the $p_i$th word plus an additional character at the end ($0\\le p_i < i$). The characters are chosen such that all $N+1$ words are distinct.", "inputFormat": "The first line contains $N$, where $N+1$ is the number of words given in the compressed format.  \n\nThe next line contains $p_1,p_2,\\dots,p_N$ where $p_i$ represents that the $i$-th word is formed by taking the $p_i$-th word and adding a single character to the end.  \n\nLet $M$ be the number of words that are not a prefix of some other word. The next $M$ lines will contain $w_1,w_2,\\dots,w_M$, meaning that the $w_i$th word will be the $i$th to be read. It is guaranteed that the  words to be read form a permutation of the words in the word bank.", "outputFormat": "Output $M$ lines, where the $i$th line contains the number of characters of the  $i$th word that Bessie reads.", "hint": "##### For Sample 1:\nThere are $6$ words labeled $0\\dots 5$. Word $5$ is the only one that is not  a prefix of another word, so it is the only one in the bank. In general, once only one word is left in the bank, Elsie won't need any characters to identify it.  \n\n\n##### For Sample 2:\n\nThe bank consists of words $2$, $3$, and $4$.  \n\nElsie needs two characters to identify word $4$ since words $3$ and $4$ share their first character in common.  \n\nOnce Bessie reads the first character of word $3$, Elsie has enough characters to uniquely identify it, since word $4$ was already read.  \n\n\n\n#### SCORING:\n- Inputs 4-5: No word has length greater than $20$.\n- Inputs 6-10: The sum of the lengths of all words in the word bank does not exceed $10^7$.\n- Inputs 11-18: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO25FEB] Vocabulary Quiz S", "background": "", "description": "Bessie 正在帮助 Elsie 准备她即将到来的词汇测验。要测验的单词将从 $M$ 个不同单词的词库中抽取，其中词库里没有一个单词是另一个单词的前缀。\n\n当词库非空时，Bessie 将从词库中选择一个单词，将其从词库中移除，并从左到右逐个字符地读给 Elsie。Elsie 的任务是在她能够唯一确定该单词时告诉 Bessie，此后 Bessie 将停止朗读。\n\nBessie 已经决定按顺序 $w_1,w_2,\\dots,w_M$ 朗读单词。如果 Elsie 尽可能快地回答，Bessie 将朗读每个单词的多少个字符？\n\n这些单词以一种压缩格式给出。我们将首先定义 $N+1$（$1\\le N\\le 10^6$）个不同的单词，然后词库将由其中所有不作为另一个单词前缀的单词组成。这些单词定义如下：\n\n- 初始时，第 $0$ 个单词为空字符串。\n- 然后对于每一个 $1\\le i\\le N$，第 $i$ 个单词将等于第 $p_i$ 个单词在末尾加上一个额外的字符（$0\\le p_i<i$）。字符的选择使得所有 $N+1$ 个单词各不相同。", "inputFormat": "输入的第一行包含 $N$，其中 $N+1$ 是以压缩格式给出的单词的数量。\n\n以下一行包含 $p_1,p_2,\\dots,p_N$，其中 $p_i$ 表示第 $i$ 个单词是通过取第 $p_i$ 个单词并在末尾添加一个字符形成的。\n\n令 $M$ 为不是某个其他单词前缀的单词数量。以下 $M$ 行将包含 $w_1,w_2,\\dots,w_M$，表示第 $w_i$ 个单词将是第 $i$ 个被朗读的单词。输入保证朗读的单词形成词库中单词的一个排列。", "outputFormat": "输出 $M$ 行，其中第 $i$ 行包含 Bessie 对第 $i$ 个单词朗读的字符数量。\n", "hint": "样例 1 解释：\n\n有 $6$ 个单词编号为 $0 \\dots 5$。单词 $5$ 是唯一一个不是另一个单词的前缀的单词，因此它是词库中唯一的单词。一般地说，一旦库中仅剩下一个单词，Elsie 就不再需要任何字符以确定它。\n\n样例 2 解释：\n\n词库由单词 $2$，$3$ 和 $4$ 组成。\n\nElsie 需要两个字符来确定单词 $4$，因为单词 $3$ 和 $4$ 的第一个字符相同。\n\n一旦 Bessie 朗读了单词 $3$ 的第一个字符，Elsie 就有了足够的字符来唯一确定它，因为单词 $4$ 已经被朗读。\n\n- 测试点 $4\\sim 5$：所有单词的长度均不超过 $20$。\n- 测试点 $6\\sim 10$：词库中所有单词的长度之和不超过 $10^7$。\n- 测试点 $11\\sim 18$：没有额外限制。", "locale": "zh-CN"}}}
