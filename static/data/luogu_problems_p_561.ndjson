{"pid": "P12386", "type": "P", "difficulty": 4, "samples": [["3", "3\n3 2 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2023", "构造", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 Python B] 混乱的数组", "background": "", "description": "给定一个正整数 $x$，请找出一个尽可能短的仅含正整数的数组 $A$ 使得 $A$ 中恰好有 $x$ 对 $i, j$ 满足 $i < j$ 且 $A_i > A_j$。\n\n如果存在多个这样的数组，请输出字典序最小的那个。", "inputFormat": "输入一行包含一个整数表示 $x$。", "outputFormat": "输出两行。\n\n第一行包含一个整数 $n$，表示所求出的数组长度。\n\n第二行包含 $n$ 个整数 $A_i$，相邻整数之间使用一个空格分隔，依次表示数组中的每个数。", "hint": "### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$x \\leq 10$；\n- 对于 $60\\%$ 的评测用例，$x \\leq 100$；\n- 对于所有评测用例，$1 \\leq x \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 Python B] 混乱的数组", "background": "", "description": "给定一个正整数 $x$，请找出一个尽可能短的仅含正整数的数组 $A$ 使得 $A$ 中恰好有 $x$ 对 $i, j$ 满足 $i < j$ 且 $A_i > A_j$。\n\n如果存在多个这样的数组，请输出字典序最小的那个。", "inputFormat": "输入一行包含一个整数表示 $x$。", "outputFormat": "输出两行。\n\n第一行包含一个整数 $n$，表示所求出的数组长度。\n\n第二行包含 $n$ 个整数 $A_i$，相邻整数之间使用一个空格分隔，依次表示数组中的每个数。", "hint": "### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$x \\leq 10$；\n- 对于 $60\\%$ 的评测用例，$x \\leq 100$；\n- 对于所有评测用例，$1 \\leq x \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P12387", "type": "P", "difficulty": 3, "samples": [["3\n3 2 1", "abc\ndabc\nbda\nb"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "构造"], "title": "纯白之箭", "background": "搭建，纯白之箭！", "description": "给定长度为 $n$ 的正整数序列 $a$，构造一个长度为 $n+1$ 的字符串序列 $S$，使得对于每个 $1\\le i\\le n$ 都有 $\\operatorname{border}(S_iS_{i+1})=a_i$。\n\n定义：\n- 对于两个字符串 $S_1,S_2$，$S_1S_2$ 是它们的拼接。\n- 对于一个长度为 $l$ 的字符串 $S$，$\\operatorname{border}(S)$ 是最大的正整数 $k<l$ 使得对于每个 $1\\le i\\le k$ 有 $S_i=S_{l-k+i}$，也即 $S$ 的最长 border 的长度。\n\n由于某些原因，你构造的字符串序列需要满足：\n- 每个字符串都是非空的且只包含小写字母。\n- 所有字符串的长度之和不超过 $2\\times10^6$。\n\n保证有解。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数描述正整数序列 $a$。", "outputFormat": "$n+1$ 行，第 $i$ 行描述你构造的字符串序列中的第 $i$ 项 $S_i$。", "hint": "**本题采用捆绑测试。**\n\n数据范围：\n- Subtask 1 (10pts)：$n=2$。\n- Subtask 2 (20pts)：$n\\le 26$。\n- Subtask 3 (30pts)：序列 $a$ 单调不降。\n- Subtask 4 (40pts)：无特殊限制。\n\n对于全部数据，$1\\le n,a_i\\le 10^5$，$\\sum a_i\\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "纯白之箭", "background": "搭建，纯白之箭！", "description": "给定长度为 $n$ 的正整数序列 $a$，构造一个长度为 $n+1$ 的字符串序列 $S$，使得对于每个 $1\\le i\\le n$ 都有 $\\operatorname{border}(S_iS_{i+1})=a_i$。\n\n定义：\n- 对于两个字符串 $S_1,S_2$，$S_1S_2$ 是它们的拼接。\n- 对于一个长度为 $l$ 的字符串 $S$，$\\operatorname{border}(S)$ 是最大的正整数 $k<l$ 使得对于每个 $1\\le i\\le k$ 有 $S_i=S_{l-k+i}$，也即 $S$ 的最长 border 的长度。\n\n由于某些原因，你构造的字符串序列需要满足：\n- 每个字符串都是非空的且只包含小写字母。\n- 所有字符串的长度之和不超过 $2\\times10^6$。\n\n保证有解。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数描述正整数序列 $a$。", "outputFormat": "$n+1$ 行，第 $i$ 行描述你构造的字符串序列中的第 $i$ 项 $S_i$。", "hint": "**本题采用捆绑测试。**\n\n数据范围：\n- Subtask 1 (10pts)：$n=2$。\n- Subtask 2 (20pts)：$n\\le 26$。\n- Subtask 3 (30pts)：序列 $a$ 单调不降。\n- Subtask 4 (40pts)：无特殊限制。\n\n对于全部数据，$1\\le n,a_i\\le 10^5$，$\\sum a_i\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P12388", "type": "P", "difficulty": 5, "samples": [["10", "13"], ["10000", "3159"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "O2优化"], "title": "Easy Equation", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/q0ae6v6a.png)\n\n（图：某位不愿透露姓名的热心 /ˈfɜri/ 网友）", "description": "定义：\n$$f(n)=\\sum_{i=1}^n\\sum_{j=1}^n[\\operatorname{popcount}(i+j)\\gcd(i,j)=\\max(i,j)]$$\n其中 $\\operatorname{popcount}(x)$ 是 $x$ 在二进制下 $1$ 的个数，$\\gcd(i,j)$ 是 $i,j$ 的最大公约数。\n\n现在给定正整数 $n$，你需要求出 $f(1)\\oplus f(2)\\oplus\\cdots\\oplus f(n)$ 的值。其中 $\\oplus$ 是按位异或。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个自然数，表示 $f(1)\\oplus f(2)\\oplus\\cdots\\oplus f(n)$ 的值。", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1 (10pts)：$n\\le 10$。\n- Subtask 2 (10pts)：$n\\le 10^3$。\n- Subtask 3 (20pts)：$n\\le 10^5$。\n- Subtask 4 (30pts)：$n\\le 10^6$。\n- Subtask 5 (30pts)：$n\\le 10^7$。\n\n对于全部数据，$1\\le n\\le 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Easy Equation", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/q0ae6v6a.png)\n\n（图：某位不愿透露姓名的热心 /ˈfɜri/ 网友）", "description": "定义：\n$$f(n)=\\sum_{i=1}^n\\sum_{j=1}^n[\\operatorname{popcount}(i+j)\\gcd(i,j)=\\max(i,j)]$$\n其中 $\\operatorname{popcount}(x)$ 是 $x$ 在二进制下 $1$ 的个数，$\\gcd(i,j)$ 是 $i,j$ 的最大公约数。\n\n现在给定正整数 $n$，你需要求出 $f(1)\\oplus f(2)\\oplus\\cdots\\oplus f(n)$ 的值。其中 $\\oplus$ 是按位异或。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个自然数，表示 $f(1)\\oplus f(2)\\oplus\\cdots\\oplus f(n)$ 的值。", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1 (10pts)：$n\\le 10$。\n- Subtask 2 (10pts)：$n\\le 10^3$。\n- Subtask 3 (20pts)：$n\\le 10^5$。\n- Subtask 4 (30pts)：$n\\le 10^6$。\n- Subtask 5 (30pts)：$n\\le 10^7$。\n\n对于全部数据，$1\\le n\\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P12389", "type": "P", "difficulty": 5, "samples": [["6 3 6\n0 1 2 0 1 2\n2 1 2 1 2\n2 1 2 4 5\n2 1 2 5 6\n1 1 2 1\n2 1 2 4 5\n2 1 2 5 6", "Yes\nYes\nNo\nNo\nYes"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 2500, 2500, 1500, 1500, 1500, 1500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化", "哈希 hashing", "差分"], "title": "COmPoUNdS", "background": "小 S 因为某些原因对区间加区间取模情有独钟，他造了一些这样的题但是基本上都不会做。有一天小 S 误食了一点冰红茶突然灵感迸发把所有题都秒了，于是趁着药效他随便选了一道题造了数据，然而药效过了后他也不知道怎么做了，所以请你帮他写一下标程，事成送你一瓶冰红茶。", "description": "给定正整数 $n,k,q$ 和一个长度为 $n$ 的序列 $a$，$q$ 次操作或询问：\n- `1 l r c`，对于每个 $i\\in[l,r]$，令 $a_i\\gets(a_i+c)\\bmod k$。\n- `2 l1 r1 l2 r2`，判断 $a$ 的两个长度相同的子段 $a_{l_1\\cdots r_1},a_{l_2\\cdots r_2}$ 是否相等。", "inputFormat": "第一行三个正整数 $n,k,q$。\n\n第二行 $n$ 个正整数表示序列 $a$ 的初始值。\n\n后 $q$ 行每行描述一个操作或询问，格式见题目描述。", "outputFormat": "若干行，每行回答一个 2 操作。如果相等输出 `Yes` 否则输出 `No`。", "hint": "**本题采用捆绑测试及子任务依赖。**\n\n| 子任务编号 | 分值 | 特殊限制 | 依赖子任务 | 时间限制 |\n| :---: | :---: | :---: | :---: | :---: |\n| $1$ | $10$ | $n,q\\le 10^3$ | | $\\text{1.5 s}$\n| $2$ | $20$ | $k=2$ | | $\\text{2.5 s}$\n| $3$ | $20$ | $n\\le10^5$ | $1$ | $\\text{1.5 s}$\n| $4$ | $50$ | 无特殊限制 | $1,2,3$ | $\\text{2.5 s}$\n \n对于全部数据，$1\\le n,q\\le 10^6$，$2\\le k\\le 10^6$，$0\\le a_i,c<k$，对于 2 操作 $r_1-l_1=r_2-l_2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "COmPoUNdS", "background": "小 S 因为某些原因对区间加区间取模情有独钟，他造了一些这样的题但是基本上都不会做。有一天小 S 误食了一点冰红茶突然灵感迸发把所有题都秒了，于是趁着药效他随便选了一道题造了数据，然而药效过了后他也不知道怎么做了，所以请你帮他写一下标程，事成送你一瓶冰红茶。", "description": "给定正整数 $n,k,q$ 和一个长度为 $n$ 的序列 $a$，$q$ 次操作或询问：\n- `1 l r c`，对于每个 $i\\in[l,r]$，令 $a_i\\gets(a_i+c)\\bmod k$。\n- `2 l1 r1 l2 r2`，判断 $a$ 的两个长度相同的子段 $a_{l_1\\cdots r_1},a_{l_2\\cdots r_2}$ 是否相等。", "inputFormat": "第一行三个正整数 $n,k,q$。\n\n第二行 $n$ 个正整数表示序列 $a$ 的初始值。\n\n后 $q$ 行每行描述一个操作或询问，格式见题目描述。", "outputFormat": "若干行，每行回答一个 2 操作。如果相等输出 `Yes` 否则输出 `No`。", "hint": "**本题采用捆绑测试及子任务依赖。**\n\n| 子任务编号 | 分值 | 特殊限制 | 依赖子任务 | 时间限制 |\n| :---: | :---: | :---: | :---: | :---: |\n| $1$ | $10$ | $n,q\\le 10^3$ | | $\\text{1.5 s}$\n| $2$ | $20$ | $k=2$ | | $\\text{2.5 s}$\n| $3$ | $20$ | $n\\le10^5$ | $1$ | $\\text{1.5 s}$\n| $4$ | $50$ | 无特殊限制 | $1,2,3$ | $\\text{2.5 s}$\n \n对于全部数据，$1\\le n,q\\le 10^6$，$2\\le k\\le 10^6$，$0\\le a_i,c<k$，对于 2 操作 $r_1-l_1=r_2-l_2$。", "locale": "zh-CN"}}}
{"pid": "P12390", "type": "P", "difficulty": 6, "samples": [["4 3 1", "1"], ["123456 78 9", "37527411787678151"], ["142857142857142857 2 59", "573170602055236649"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "O2优化", "Stirling 数"], "title": "调和级数求和 2", "background": "前情提要：[调和级数求和](https://www.luogu.com.cn/problem/P5702)。←注意，解决这道题目对于解决本题可能并不会有什么帮助。", "description": "给定正整数 $n,p,k$。定义 $\\operatorname{inv}(x,p^k)$ 是满足 $ax\\equiv 1\\pmod{p^k}$ 的小于 $p^k$ 的非负整数 $a$，如果不存在这样的 $a$ 则 $\\operatorname{inv}(x,p^k)=0$。可以证明，如果存在这样的 $a$，那么它是唯一的。\n\n现在，你需要求出下式的值：\n$$\\sum_{i=1}^n\\operatorname{inv}(i,p^k)$$\n由于答案可能很大，所以需要对 $p^k$ 取模。\n\n**注意此处 $\\bm p$ 不一定是质数。**", "inputFormat": "一行三个正整数 $n,p,k$。", "outputFormat": "一行一个正整数，表示欲求式子的值。答案对 $p^k$ 取模。", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1 (10pts)：$k=1$。\n- Subtask 2 (40pts)：$\\frac np\\le 10^4$。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，有 $1\\le n\\le 10^{18}$，$2\\le p\\le 10^6$，$p^k\\le 10^{18}$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "调和级数求和 2", "background": "前情提要：[调和级数求和](https://www.luogu.com.cn/problem/P5702)。←注意，解决这道题目对于解决本题可能并不会有什么帮助。", "description": "给定正整数 $n,p,k$。定义 $\\operatorname{inv}(x,p^k)$ 是满足 $ax\\equiv 1\\pmod{p^k}$ 的小于 $p^k$ 的非负整数 $a$，如果不存在这样的 $a$ 则 $\\operatorname{inv}(x,p^k)=0$。可以证明，如果存在这样的 $a$，那么它是唯一的。\n\n现在，你需要求出下式的值：\n$$\\sum_{i=1}^n\\operatorname{inv}(i,p^k)$$\n由于答案可能很大，所以需要对 $p^k$ 取模。\n\n**注意此处 $\\bm p$ 不一定是质数。**", "inputFormat": "一行三个正整数 $n,p,k$。", "outputFormat": "一行一个正整数，表示欲求式子的值。答案对 $p^k$ 取模。", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1 (10pts)：$k=1$。\n- Subtask 2 (40pts)：$\\frac np\\le 10^4$。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，有 $1\\le n\\le 10^{18}$，$2\\le p\\le 10^6$，$p^k\\le 10^{18}$。\n\n", "locale": "zh-CN"}}}
{"pid": "P12391", "type": "P", "difficulty": 5, "samples": [["10 2\n1 1 2 2 2 1 1 2 2 1\n", "81"], ["3 3\n2 2 3\n", "2"], ["30 30\n26 4 4 4 20 28 13 13 2 2 2 2 2 24 24 24 24 24 24 24 29 29 29 29 29 2 2 2 2 2\n", "1905"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "Ad-hoc", "洛谷比赛"], "title": "「RiOI-6」帝国少女", "background": "![](bilibili:BV1Ni4y1g7oN)\n\n小萝卜喜欢帽子哥哥。有多喜欢呢？每次和他出去玩都要计划好久的！\n\n萝卜呢，有很多件好看的衣服。因此计划的一部分就是：每次出去玩都和上次穿的不一样。\n\n可是原先的计划表非常不合理，因此小萝卜需要花很多时间来修改。因为出去玩的时间非常宝贵，所以她认为修改次数要尽量小。", "description": "萝卜有 $m$ 件衣服，计划表为长为 $n$ 的序列 $a$，则 $a_i$ 为 $[1,m]$ 中的整数，表示当天穿的是哪一件衣服。**萝卜保证他的衣服至少有两件。**\n\n萝卜每次修改可以将 $a_i$ 修改为 $[1,m]$ 中任何一个整数。对于一个序列 $a$，他的**困难程度**定义为：使得 $a_1,a_2,\\cdots,a_n$ 中任意相邻两个数都不同的最小操作次数。设这个值为 $f(a,m)$。\n\n对于序列 $a$，萝卜想请你求出其所有子段的困难程度之和，即：\n\n$$\\sum_{1\\le l\\le r\\le n}f([a_l,a_{l+1},\\cdots,a_r],m)$$", "inputFormat": "第一行两个正整数 $n,m$，表示计划表长度与衣服的件数。\n\n接下来一行 $n$ 个正整数 $a_i$，表示计划表。", "outputFormat": "一行一个整数，表示答案。", "hint": "**【样例解释】**\n\n对于样例 $1$ 的整个原序列，一种最优的修改方案是将其修改为 $[2,1,2,1,2,1,2,1,2,1]$，修改次数是 $4$，故困难程度为 $4$。\n\n对于样例 $2$，所有子段及其困难程度如下：\n\n- $[2]$，困难程度为 $0$。\n- $[2,2]$，困难程度为 $1$。\n- $[2,2,3]$，困难程度为 $1$。\n- $[2]$，困难程度为 $0$。\n- $[2,3]$，困难程度为 $0$。\n- $[3]$，困难程度为 $0$。\n\n故总和为 $2$。\n\n对于样例 $3$，暂时不能给你一个明确的答复。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$m\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$10$|$10$|$10$||\n|$2$|$20$|$10^3$|$10^9$||\n|$3$|$30$|$2\\times10^5$|$10^9$|$m>2$|\n|$4$|$40$|$2\\times10^5$|$10^9$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2\\times10^5$，$2\\le m\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-6」帝国少女", "background": "![](bilibili:BV1Ni4y1g7oN)\n\n小萝卜喜欢帽子哥哥。有多喜欢呢？每次和他出去玩都要计划好久的！\n\n萝卜呢，有很多件好看的衣服。因此计划的一部分就是：每次出去玩都和上次穿的不一样。\n\n可是原先的计划表非常不合理，因此小萝卜需要花很多时间来修改。因为出去玩的时间非常宝贵，所以她认为修改次数要尽量小。", "description": "萝卜有 $m$ 件衣服，计划表为长为 $n$ 的序列 $a$，则 $a_i$ 为 $[1,m]$ 中的整数，表示当天穿的是哪一件衣服。**萝卜保证他的衣服至少有两件。**\n\n萝卜每次修改可以将 $a_i$ 修改为 $[1,m]$ 中任何一个整数。对于一个序列 $a$，他的**困难程度**定义为：使得 $a_1,a_2,\\cdots,a_n$ 中任意相邻两个数都不同的最小操作次数。设这个值为 $f(a,m)$。\n\n对于序列 $a$，萝卜想请你求出其所有子段的困难程度之和，即：\n\n$$\\sum_{1\\le l\\le r\\le n}f([a_l,a_{l+1},\\cdots,a_r],m)$$", "inputFormat": "第一行两个正整数 $n,m$，表示计划表长度与衣服的件数。\n\n接下来一行 $n$ 个正整数 $a_i$，表示计划表。", "outputFormat": "一行一个整数，表示答案。", "hint": "**【样例解释】**\n\n对于样例 $1$ 的整个原序列，一种最优的修改方案是将其修改为 $[2,1,2,1,2,1,2,1,2,1]$，修改次数是 $4$，故困难程度为 $4$。\n\n对于样例 $2$，所有子段及其困难程度如下：\n\n- $[2]$，困难程度为 $0$。\n- $[2,2]$，困难程度为 $1$。\n- $[2,2,3]$，困难程度为 $1$。\n- $[2]$，困难程度为 $0$。\n- $[2,3]$，困难程度为 $0$。\n- $[3]$，困难程度为 $0$。\n\n故总和为 $2$。\n\n对于样例 $3$，暂时不能给你一个明确的答复。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$m\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$10$|$10$|$10$||\n|$2$|$20$|$10^3$|$10^9$||\n|$3$|$30$|$2\\times10^5$|$10^9$|$m>2$|\n|$4$|$40$|$2\\times10^5$|$10^9$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2\\times10^5$，$2\\le m\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P12392", "type": "P", "difficulty": 6, "samples": [["3 2", "2 6"], ["4 5", "320 1760 1280"], ["11 4514", "381390190 652303527 170625074 922115722 774772088 111358420"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "前缀和", "洛谷比赛"], "title": "「RiOI-6」Re:帝国少女", "background": "![](bilibili:BV1PU4y1Z7AQ)\n\n小萝卜是远近闻名的军师呢（自豪脸）。\n\n不过最近，如果你要找她请教，那么她就会大喊一声：那！我！问！你！\n\n你愿意和他（她）一直在一起吗？你能接受被拒绝被分手吗？你能为了他付出多少呢？你能保证完成自己许下的诺言吗？\n\n——不过萝卜还是很愿意帮忙的，尽管她已经见证了若干自己促成的人们分手了……生气啊啊啊啊啊！", "description": "> 萝卜有 $m$ 件衣服，计划表为长为 $n$ 的序列 $a$，则 $a_i$ 为 $[1,m]$ 中的整数，表示当天穿的是哪一件衣服。  \n> 现在给定 $a$，萝卜每次修改可以将 $a_i$ 修改为 $[1,m]$ 中任何一个整数，要求在使得序列中相邻的两个数都不同的前提下，让修改次数最少。\n\n小萝卜的朋友很多，她们也希望和自己的意中人出去玩，她要以此为切入点评判这些情感问题。\n\n具体的，对于一个表示计划表的序列 $a$，令**困难程度** $f(a,n,m)$ 表示以上问题的答案，$g(a,n,m)$ 表示使答案最优的修改方案数。其中两个方案不同当且仅当修改后的序列不同。\n\n在所有长为 $n$ 值域为 $[1,m]$ 的整数序列中，对于每个 $i\\in[0,\\lfloor\\frac{n}2\\rfloor]$，小萝卜想知道困难程度为 $i$ 的序列的最优修改方案数之和是多少。\n\n形式化的，给定 $n,m$，令所有长为 $n$ 值域为 $[1,m]$ 的整数序列的集合为 $S$，则对每个 $i\\in[0,\\lfloor\\frac{n}2\\rfloor]$ 求：\n\n$$\n\\sum\\limits_{a\\in S}[f(a,n,m)=i]g(a,n,m)\n$$\n\n答案对 $10^9+7$ 取模。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行 $\\lfloor\\frac{n}2\\rfloor+1$ 个非负整数，其中第 $k$ 个为 $i=k-1$ 时的答案。", "hint": "#### 【样例解释】\n\n对于样例 $1$，所有可能的序列以及对应的 $f,g$ 函数值如下：\n\n- $[1,1,1]$：$1,1$。\n- $[1,1,2]$：$1,1$。\n- $[1,2,1]$：$0,1$。\n- $[1,2,2]$：$1,1$。\n- $[2,1,1]$：$1,1$。\n- $[2,1,2]$：$0,1$。\n- $[2,2,1]$：$1,1$。\n- $[2,2,2]$：$1,1$。\n\n故 $i=0$ 时答案为 $2$，$i=1$ 时答案为 $6$。\n\n对于样例 $2,3$，暂时不能给你一个明确的答复。\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$m\\le$|\n|:-:|:-:|:-:|:-:|\n|$1$|$7$|$9$|$5$|\n|$2$|$10$|$5\\times10^3$|$2$|\n|$3$|$13$|$50$|$50$|\n|$4$|$15$|$200$|$200$|\n|$5$|$20$|$200$|$10^9$|\n|$6$|$35$|$5\\times10^3$|$10^9$|\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times10^3$，$2\\le m\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-6」Re:帝国少女", "background": "![](bilibili:BV1PU4y1Z7AQ)\n\n小萝卜是远近闻名的军师呢（自豪脸）。\n\n不过最近，如果你要找她请教，那么她就会大喊一声：那！我！问！你！\n\n你愿意和他（她）一直在一起吗？你能接受被拒绝被分手吗？你能为了他付出多少呢？你能保证完成自己许下的诺言吗？\n\n——不过萝卜还是很愿意帮忙的，尽管她已经见证了若干自己促成的人们分手了……生气啊啊啊啊啊！", "description": "> 萝卜有 $m$ 件衣服，计划表为长为 $n$ 的序列 $a$，则 $a_i$ 为 $[1,m]$ 中的整数，表示当天穿的是哪一件衣服。  \n> 现在给定 $a$，萝卜每次修改可以将 $a_i$ 修改为 $[1,m]$ 中任何一个整数，要求在使得序列中相邻的两个数都不同的前提下，让修改次数最少。\n\n小萝卜的朋友很多，她们也希望和自己的意中人出去玩，她要以此为切入点评判这些情感问题。\n\n具体的，对于一个表示计划表的序列 $a$，令**困难程度** $f(a,n,m)$ 表示以上问题的答案，$g(a,n,m)$ 表示使答案最优的修改方案数。其中两个方案不同当且仅当修改后的序列不同。\n\n在所有长为 $n$ 值域为 $[1,m]$ 的整数序列中，对于每个 $i\\in[0,\\lfloor\\frac{n}2\\rfloor]$，小萝卜想知道困难程度为 $i$ 的序列的最优修改方案数之和是多少。\n\n形式化的，给定 $n,m$，令所有长为 $n$ 值域为 $[1,m]$ 的整数序列的集合为 $S$，则对每个 $i\\in[0,\\lfloor\\frac{n}2\\rfloor]$ 求：\n\n$$\n\\sum\\limits_{a\\in S}[f(a,n,m)=i]g(a,n,m)\n$$\n\n答案对 $10^9+7$ 取模。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行 $\\lfloor\\frac{n}2\\rfloor+1$ 个非负整数，其中第 $k$ 个为 $i=k-1$ 时的答案。", "hint": "#### 【样例解释】\n\n对于样例 $1$，所有可能的序列以及对应的 $f,g$ 函数值如下：\n\n- $[1,1,1]$：$1,1$。\n- $[1,1,2]$：$1,1$。\n- $[1,2,1]$：$0,1$。\n- $[1,2,2]$：$1,1$。\n- $[2,1,1]$：$1,1$。\n- $[2,1,2]$：$0,1$。\n- $[2,2,1]$：$1,1$。\n- $[2,2,2]$：$1,1$。\n\n故 $i=0$ 时答案为 $2$，$i=1$ 时答案为 $6$。\n\n对于样例 $2,3$，暂时不能给你一个明确的答复。\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$m\\le$|\n|:-:|:-:|:-:|:-:|\n|$1$|$7$|$9$|$5$|\n|$2$|$10$|$5\\times10^3$|$2$|\n|$3$|$13$|$50$|$50$|\n|$4$|$15$|$200$|$200$|\n|$5$|$20$|$200$|$10^9$|\n|$6$|$35$|$5\\times10^3$|$10^9$|\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times10^3$，$2\\le m\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P12393", "type": "P", "difficulty": 5, "samples": [["5 3 0\n1 2\n1 3\n3 4\n4 5\n1 2\n1 4\n2 2\n", "2\n3\n3\n"], ["10 5 1\n1 2\n1 3\n3 4\n2 5\n4 6\n4 7\n7 8\n8 9\n9 10\n1 0\n4 2\n2 4\n2 1\n8 0\n", "0\n4\n3\n2\n8\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "洛谷原创", "O2优化", "可持久化线段树", "洛谷比赛"], "title": "「RiOI-6」flos", "background": "![](bilibili:BV1Gi4y1g77Q)\n\n即使是像萝卜这样不起眼的小木头，也有被人喜欢的日子呢！\n\n帽子的表白真是突如其来，小萝卜拼尽全力才战胜了自己上扬的嘴角，没有在上课划水的时候笑出来。\n\n今年的 2.14，终于！可以！两个人过了！", "description": "帽子要摘一些小萝卜最喜欢的花装点礼物。\n\n小萝卜最喜欢的花长在一棵根为 $1$ 的树上，其中每个节点都有一朵花。当帽子从点 $u$ 开始摘花时，花的芳香度 $w_v$ 定义为 $\\operatorname{dis}(u,v)$，也即 $u$ 到 $v$ 的最短距离。帽子只能摘下一朵花。\n\n帽子只有 $t$ 秒的时间。具体的，他从 $u$ 开始沿着边移动，当他向上爬一条边（即**远离根**）时消耗 $1$ 单位时间，向下滑一条边（即**接近根**）时不消耗时间，全过程中剩余时间不能少于 $0$。\n\n小萝卜有 $q$ 个问题，每次形如：帽子从点 $x_i$ 出发，有 $t_i$ 时间，摘的花的最大芳香度是多少。各个询问相互独立。\n\n特别的，有时候小萝卜会在帽子摘完花后才会问下一个问题，所以在一些测试点中你需要强制在线。", "inputFormat": "第一行两个正整数 $n,q,d$，表示树的节点个数、询问个数、与是否强制在线。\n\n接下来 $n-1$ 行，每行两个正整数 $u_i,v_i$，表示树上 $u_i,v_i$ 之间有一条边。\n\n接下来 $q$ 行，每行两个非负整数 $x_i,t_i$，表示一组询问。特别的，若 $d=1$，设上一组询问的答案为 $ans$（第一组询问为 $0$），你需要将 $x_i,t_i$ 异或上 $ans$ 得到真实询问。", "outputFormat": "$q$ 行每行一个非负整数，表示每个询问的答案。", "hint": "#### 【样例解释】\n\n对于样例 $1$，三个询问分别如下：\n\n- 从 $1$ 出发，时间为 $2$ 秒。此时能摘下的其中一朵芳香度最大的花是 $4$，芳香度为 $2$。帽子可以向上爬 $2$ 条边到达 $4$。\n- 从 $1$ 出发，时间为 $4$ 秒。此时能摘下的其中一朵芳香度最大的花是 $5$，芳香度为 $3$。帽子可以向上爬 $3$ 条边到达 $5$。\n- 从 $2$ 出发，时间为 $2$ 秒。此时能摘下的其中一朵芳香度最大的花是 $4$，芳香度为 $3$。帽子可以先向下滑一条边到 $1$，再向上爬 $2$ 条边到达 $4$。\n\n对于样例 $2$，暂时不能给你一个明确的答复。\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n,q\\le$|$d=$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$20$|$10^3$|$0$||\n|$2$|$10$|$2\\times10^5$|$0$|$\\forall i,u_i+1=v_i$|\n|$3$|$20$|$2\\times10^5$|$0$|$\\forall i,t_i=n$|\n|$4$|$20$|$2\\times10^5$|$0$||\n|$5$|$30$|$2\\times10^5$|$1$||\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 2\\times10^5,d\\in\\{0,1\\},1\\le x_i\\le n,0\\le t_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-6」flos", "background": "![](bilibili:BV1Gi4y1g77Q)\n\n即使是像萝卜这样不起眼的小木头，也有被人喜欢的日子呢！\n\n帽子的表白真是突如其来，小萝卜拼尽全力才战胜了自己上扬的嘴角，没有在上课划水的时候笑出来。\n\n今年的 2.14，终于！可以！两个人过了！", "description": "帽子要摘一些小萝卜最喜欢的花装点礼物。\n\n小萝卜最喜欢的花长在一棵根为 $1$ 的树上，其中每个节点都有一朵花。当帽子从点 $u$ 开始摘花时，花的芳香度 $w_v$ 定义为 $\\operatorname{dis}(u,v)$，也即 $u$ 到 $v$ 的最短距离。帽子只能摘下一朵花。\n\n帽子只有 $t$ 秒的时间。具体的，他从 $u$ 开始沿着边移动，当他向上爬一条边（即**远离根**）时消耗 $1$ 单位时间，向下滑一条边（即**接近根**）时不消耗时间，全过程中剩余时间不能少于 $0$。\n\n小萝卜有 $q$ 个问题，每次形如：帽子从点 $x_i$ 出发，有 $t_i$ 时间，摘的花的最大芳香度是多少。各个询问相互独立。\n\n特别的，有时候小萝卜会在帽子摘完花后才会问下一个问题，所以在一些测试点中你需要强制在线。", "inputFormat": "第一行两个正整数 $n,q,d$，表示树的节点个数、询问个数、与是否强制在线。\n\n接下来 $n-1$ 行，每行两个正整数 $u_i,v_i$，表示树上 $u_i,v_i$ 之间有一条边。\n\n接下来 $q$ 行，每行两个非负整数 $x_i,t_i$，表示一组询问。特别的，若 $d=1$，设上一组询问的答案为 $ans$（第一组询问为 $0$），你需要将 $x_i,t_i$ 异或上 $ans$ 得到真实询问。", "outputFormat": "$q$ 行每行一个非负整数，表示每个询问的答案。", "hint": "#### 【样例解释】\n\n对于样例 $1$，三个询问分别如下：\n\n- 从 $1$ 出发，时间为 $2$ 秒。此时能摘下的其中一朵芳香度最大的花是 $4$，芳香度为 $2$。帽子可以向上爬 $2$ 条边到达 $4$。\n- 从 $1$ 出发，时间为 $4$ 秒。此时能摘下的其中一朵芳香度最大的花是 $5$，芳香度为 $3$。帽子可以向上爬 $3$ 条边到达 $5$。\n- 从 $2$ 出发，时间为 $2$ 秒。此时能摘下的其中一朵芳香度最大的花是 $4$，芳香度为 $3$。帽子可以先向下滑一条边到 $1$，再向上爬 $2$ 条边到达 $4$。\n\n对于样例 $2$，暂时不能给你一个明确的答复。\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n,q\\le$|$d=$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$20$|$10^3$|$0$||\n|$2$|$10$|$2\\times10^5$|$0$|$\\forall i,u_i+1=v_i$|\n|$3$|$20$|$2\\times10^5$|$0$|$\\forall i,t_i=n$|\n|$4$|$20$|$2\\times10^5$|$0$||\n|$5$|$30$|$2\\times10^5$|$1$||\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 2\\times10^5,d\\in\\{0,1\\},1\\le x_i\\le n,0\\le t_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P12394", "type": "P", "difficulty": 7, "samples": [["1 5", "1 3 6 10 15"], ["2 2", "1 7"], ["10 20", "1 2047 261625 10391745 210766920 738437852 751995961 367882293 626598267 990684424 32946479 746153195 309367626 577393442 149727732 683395486 756615148 203162153 948422841 561114284"], ["100 20", "1 766755082 570047877 716144748 321097835 123137643 571618454 644127872 879655648 371687313 984928153 761377418 790560387 887056207 799077157 156396768 647907515 242209960 978001146 356334941"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["多项式", "洛谷原创", "O2优化", "快速数论变换 NTT", "拉格朗日反演", "洛谷比赛"], "title": "「RiOI-6」神曲", "background": "![](bilibili:BV1Kt4y1Q7Y6)\n\n安慰一个伤心的人，真的好困难呢……\n\n在好友最需要自己的时候，明明有很多话可说，却只会“好惨”“拍拍”“抱抱”什么的，真的很让人自责啊。\n\n如果萝卜能让所有人对感情认真起来，像她这样被伤害的人，是不是就会少一些呢？", "description": "定义一个长度为 $n$，值域为 $V$ 的二元组序列 $(l_i,r_i)^n_{i=1}$ 是好的，当且仅当：\n\n- $\\forall 1\\le i\\le n, 1\\le l_i\\le r_i\\le V$。\n- $\\forall 1\\le i<j\\le n, (l_j\\le l_i\\le r_i\\le r_j)\\lor(r_j < l_i)\\lor(r_i < l_j)$。\n\n换句话说，每个二元组代表一个区间，且对于所有 $i<j$，要么 $[l_i,r_i]$ 被 $[l_j,r_j]$ 包含，要么 $[l_i,r_i]$ 与 $[l_j,r_j]$ 没有交集。\n\n给定 $n,m$。请对 $V=1,2,\\cdots,m$，求出有多少个长度为 $n$，值域为 $V$ 的二元组序列是好的。答案对 $998244353$ 取模。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行 $m$ 个非负整数，表示答案。", "hint": "#### 【样例解释】\n\n对于样例 $1$，满足在值域内的区间显然有 $\\frac{V(V+1)}2$ 种。所以 $V=1,\\cdots,5$ 时答案为 $1,3,6,10,15$。\n\n对于样例 $2$：\n\n当 $V=1$ 时，显然只有一种好的序列：$[(1,1),(1,1)]$。  \n当 $V=2$ 时：好的序列有以下 $7$ 种：\n- $[(1,1),(2,2)]$。\n- $[(2,2),(1,1)]$。\n- $[(1,1),(1,1)]$。\n- $[(2,2),(2,2)]$。\n- $[(1,1),(1,2)]$。\n- $[(2,2),(1,2)]$。\n- $[(1,2),(1,2)]$。\n\n对于样例 $3,4$，暂时不能给你一个明确的答复。\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$m\\le$|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$10$|$10$|\n|$2$|$5$|$2\\times10^5$|$2$|\n|$3$|$20$|$50$|$50$|\n|$4$|$20$|$5\\times10^3$|$5\\times10^3$|\n|$5$|$10$|$4\\times10^4$|$4\\times10^4$|\n|$6$|$20$|$10^5$|$10^5$|\n|$7$|$20$|$2\\times10^5$|$2\\times10^5$|\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\times10^5$。\n\n**请注意常数因子对程序运行效率的影响。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-6」神曲", "background": "![](bilibili:BV1Kt4y1Q7Y6)\n\n安慰一个伤心的人，真的好困难呢……\n\n在好友最需要自己的时候，明明有很多话可说，却只会“好惨”“拍拍”“抱抱”什么的，真的很让人自责啊。\n\n如果萝卜能让所有人对感情认真起来，像她这样被伤害的人，是不是就会少一些呢？", "description": "定义一个长度为 $n$，值域为 $V$ 的二元组序列 $(l_i,r_i)^n_{i=1}$ 是好的，当且仅当：\n\n- $\\forall 1\\le i\\le n, 1\\le l_i\\le r_i\\le V$。\n- $\\forall 1\\le i<j\\le n, (l_j\\le l_i\\le r_i\\le r_j)\\lor(r_j < l_i)\\lor(r_i < l_j)$。\n\n换句话说，每个二元组代表一个区间，且对于所有 $i<j$，要么 $[l_i,r_i]$ 被 $[l_j,r_j]$ 包含，要么 $[l_i,r_i]$ 与 $[l_j,r_j]$ 没有交集。\n\n给定 $n,m$。请对 $V=1,2,\\cdots,m$，求出有多少个长度为 $n$，值域为 $V$ 的二元组序列是好的。答案对 $998244353$ 取模。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行 $m$ 个非负整数，表示答案。", "hint": "#### 【样例解释】\n\n对于样例 $1$，满足在值域内的区间显然有 $\\frac{V(V+1)}2$ 种。所以 $V=1,\\cdots,5$ 时答案为 $1,3,6,10,15$。\n\n对于样例 $2$：\n\n当 $V=1$ 时，显然只有一种好的序列：$[(1,1),(1,1)]$。  \n当 $V=2$ 时：好的序列有以下 $7$ 种：\n- $[(1,1),(2,2)]$。\n- $[(2,2),(1,1)]$。\n- $[(1,1),(1,1)]$。\n- $[(2,2),(2,2)]$。\n- $[(1,1),(1,2)]$。\n- $[(2,2),(1,2)]$。\n- $[(1,2),(1,2)]$。\n\n对于样例 $3,4$，暂时不能给你一个明确的答复。\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$m\\le$|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$10$|$10$|\n|$2$|$5$|$2\\times10^5$|$2$|\n|$3$|$20$|$50$|$50$|\n|$4$|$20$|$5\\times10^3$|$5\\times10^3$|\n|$5$|$10$|$4\\times10^4$|$4\\times10^4$|\n|$6$|$20$|$10^5$|$10^5$|\n|$7$|$20$|$2\\times10^5$|$2\\times10^5$|\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\times10^5$。\n\n**请注意常数因子对程序运行效率的影响。**", "locale": "zh-CN"}}}
{"pid": "P12395", "type": "P", "difficulty": 7, "samples": [["1 5", "1 3 6 10 15"], ["2 2", "1 7"], ["10 20", "1 2047 261625 10391745 210766920 738437852 751995961 367882293 626598267 990684424 32946479 746153195 309367626 577393442 149727732 683395486 756615148 203162153 948422841 561114284"], ["100 20", "1 766755082 570047877 716144748 321097835 123137643 571618454 644127872 879655648 371687313 984928153 761377418 790560387 887056207 799077157 156396768 647907515 242209960 978001146 356334941"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["多项式", "洛谷原创", "O2优化", "Stirling 数", "生成函数", "快速数论变换 NTT", "拉格朗日反演"], "title": "「RiOI-6」神曲（加强版）", "background": "![](bilibili:BV1UtV5zqEjC)", "description": "定义一个长度为 $n$，值域为 $V$ 的二元组序列 $(l_i,r_i)^n_{i=1}$ 是好的，当且仅当：\n\n- $\\forall 1\\le i\\le n, 1\\le l_i\\le r_i\\le V$。\n- $\\forall 1\\le i<j\\le n, (l_j\\le l_i\\le r_i\\le r_j)\\lor(r_j < l_i)\\lor(r_i < l_j)$。\n\n换句话说，每个二元组代表一个区间，且对于所有 $i<j$，要么 $[l_i,r_i]$ 被 $[l_j,r_j]$ 包含，要么 $[l_i,r_i]$ 与 $[l_j,r_j]$ 没有交集。\n\n给定 $n,m$。请对 $V=1,2,\\cdots,m$，求出有多少个长度为 $n$，值域为 $V$ 的二元组序列是好的。答案对 $998244353$ 取模。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行 $m$ 个非负整数，表示答案。", "hint": "#### 【样例解释】\n\n对于样例 $1$，满足在值域内的区间显然有 $\\frac{V(V+1)}2$ 种。所以 $V=1,\\cdots,5$ 时答案为 $1,3,6,10,15$。\n\n对于样例 $2$：\n\n当 $V=1$ 时，显然只有一种好的序列：$[(1,1),(1,1)]$。  \n当 $V=2$ 时：好的序列有以下 $7$ 种：\n- $[(1,1),(2,2)]$。\n- $[(2,2),(1,1)]$。\n- $[(1,1),(1,1)]$。\n- $[(2,2),(2,2)]$。\n- $[(1,1),(1,2)]$。\n- $[(2,2),(1,2)]$。\n- $[(1,2),(1,2)]$。\n\n对于样例 $3,4$，暂时不能给你一个明确的答复。\n\n#### 【数据范围】\n\n本题总共有 $10$ 个数据点。\n\n对于第 $i$ 个点，保证 $n=m=i\\times10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-6」神曲（加强版）", "background": "![](bilibili:BV1UtV5zqEjC)", "description": "定义一个长度为 $n$，值域为 $V$ 的二元组序列 $(l_i,r_i)^n_{i=1}$ 是好的，当且仅当：\n\n- $\\forall 1\\le i\\le n, 1\\le l_i\\le r_i\\le V$。\n- $\\forall 1\\le i<j\\le n, (l_j\\le l_i\\le r_i\\le r_j)\\lor(r_j < l_i)\\lor(r_i < l_j)$。\n\n换句话说，每个二元组代表一个区间，且对于所有 $i<j$，要么 $[l_i,r_i]$ 被 $[l_j,r_j]$ 包含，要么 $[l_i,r_i]$ 与 $[l_j,r_j]$ 没有交集。\n\n给定 $n,m$。请对 $V=1,2,\\cdots,m$，求出有多少个长度为 $n$，值域为 $V$ 的二元组序列是好的。答案对 $998244353$ 取模。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行 $m$ 个非负整数，表示答案。", "hint": "#### 【样例解释】\n\n对于样例 $1$，满足在值域内的区间显然有 $\\frac{V(V+1)}2$ 种。所以 $V=1,\\cdots,5$ 时答案为 $1,3,6,10,15$。\n\n对于样例 $2$：\n\n当 $V=1$ 时，显然只有一种好的序列：$[(1,1),(1,1)]$。  \n当 $V=2$ 时：好的序列有以下 $7$ 种：\n- $[(1,1),(2,2)]$。\n- $[(2,2),(1,1)]$。\n- $[(1,1),(1,1)]$。\n- $[(2,2),(2,2)]$。\n- $[(1,1),(1,2)]$。\n- $[(2,2),(1,2)]$。\n- $[(1,2),(1,2)]$。\n\n对于样例 $3,4$，暂时不能给你一个明确的答复。\n\n#### 【数据范围】\n\n本题总共有 $10$ 个数据点。\n\n对于第 $i$ 个点，保证 $n=m=i\\times10^5$。", "locale": "zh-CN"}}}
{"pid": "P12396", "type": "P", "difficulty": 2, "samples": [["8 5 3\nGWBGAABGAAABG", "118"], ["1 1 1\nGABGABGABGABG", "14"], ["8 5 1\nGBGBGBGB", "140"], ["1 5 2\nGABGABGW", "29"], ["1 11 10\nGBGW", "64"], ["1 50 1\nGBGW", "22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「FAOI-R9」平民上篮", "background": "You can switch the language of problem description.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/96tdfgkh.png)\n\n清风紧盯着篮板上的白线，篮球出手后击打在边缘上，他为之心头一紧，篮球落在篮筐的铁环上，他心头的石头落下了一点，可是，篮球弹起来后又弹出了篮板，他奔向篮球掉落的方向，眼看着篮球要飞向边线......\n\n清风至今还能想起一年前备战体育中考的那段时光。", "description": "B 市的篮球中考规则是这样的：\n\n* 考生的一组完整动作定义为运球到篮下，一组成功的上篮动作及返回三个动作的依次连续进行。\n* 一组上篮动作的成功的判定条件为：考生在一段连续时间内身体一直在篮筐下，即在此段时间内只会发生投篮投进或者投篮失败，若**存在某次**投篮投进则为成功，若投篮失败**至少**三次则也视为成功。\n* 运球到篮下和返回分别是由三分线到篮筐下的位移及其反向位移。\n* 考生初始在三分线上，需要完成至少四组完整的动作并回到三分线（也就是说即使四组动作已经完成时，如果清风不在三分线上那么不能结束考试），计取所有动作的总时间和。若在 30 秒内为满分，在 46 秒外为零分。\n\n清风在本次练习中可以进行以下动作：\n\n* 若他在三分线上，他可以选择运球到篮下（操作符号为 `G`），消耗 $ a $ 秒，动作结束后他在篮下。\n* 若他在篮下，他可以选择运球返回（操作符号为 `B`），消耗 $ a $ 秒，动作结束后他在三分线上。\n* 若他在篮下，他可以选择瞄准上篮（操作符号为 `A`）或随便上篮（操作符号为 `W`），瞄准上篮消耗 $ b $ 秒，篮球一定投进；随便上篮消耗 $ c $ 秒，篮球一定投不进。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v8ib3xgn.png)\n\n（考试规则示意图）\n\n现在给出清风一场训练的操作序列，保证它一定合法，请你帮助清风规划剩下的操作使得他完成篮球考试且总用时（含已经进行完的操作）最短。", "inputFormat": "第一行三个整数 $ a,b,c $，表示操作耗时参数。\n\n一行一个字符串 $ S $，表示清风的操作序列。", "outputFormat": "一行一个整数表示最短的总用时。", "hint": "**【样例 1 解释】**\n\n给出的操作序列之后需要进行的操作依次为：`ABGAB`。\n\n对于最后一组完整动作：显然一次上篮直接过是优于三次尝试的。\n\n**【样例 2 解释】**\n\n动作做完了但清风又跑到篮筐底下了，正解是回去。\n\n**【样例 3 解释】**\n\n需要再重复四遍 `GWWWB`，显然三次尝试是优于一次直接成功上篮的。\n\n**【样例 4 解释】**\n\n对于没做完的完整动作，显然尝试两次是优于一次直接成功上篮的。\n\n而对于没做的完整动作，显然一次直接成功上篮是优于尝试三次的。\n\n**【样例 5 解释】**\n\n显然对于没做完的完整动作和没做的完整动作，尝试至少两次或至少三次不优于一次直接上篮。\n\n**【样例 6 解释】**\n\n对于没做完的完整动作和没做的完整动作，尝试两次或三次优于一次直接上篮。\n\n**【数据规模与约定】**\n\n记 $ n $ 为 $ S $ 的长度。\n\n**本题测试点等分。**\n\n对于测试点 $ 1 $，保证按照给出的操作序列可以直接结束考试。\n\n对于测试点 $ 2 \\sim 5 $，保证 $ b=c $。\n\n对于测试点 $ 6 \\sim 10 $，无特殊限制。\n\n对于每个测试点，保证 $ 1 \\le n \\le 100 $，且 $ S_i \\in \\{\\texttt{G},\\texttt{B},\\texttt{A},\\texttt{W}\\} $，$ 1 \\le a,b,c \\le 10^7 $，$ b \\ge c $，且 $ S $ 一定合法。", "locale": "zh-CN", "translations": {"en": {"title": "「FAOI-R9」Ordinary People's Layup", "background": "Qingfeng stared at the white line on the backboard.\n\nWhen the basketball hit the edge after being shot, He tightened his heart for the ball landed on the rim of the basket and he felt a slight sense of relief.\n\nHowever, after bouncing up the basketball popped out of the backboard.\n\nHe rushed toward the direction where the ball fell watching as it was about to fly toward the sideline...\n\nQingfeng can still remember those time a year ago when he was preparing for the high school entrance examination so far.", "description": "The basketball rules for the high school entrance examination in City B are as follows:\n\n- A full set of movements for examinees is defined as dribbling to the basket, a successful layup, and returning to the three point line, with these three actions performed consecutively in sequence.\n- The criteria for determining the success of a set of movements are as follows: examinees must remain under the basket for a continuous period of time, during which only successful or failed shots can occur.A set is considered successful if a shot is made during this period. Specially, if (at least) three consecutive shots fail, it is also deemed successful.\n- Dribbling to the basket and returning are respectively the displacement from the three point line to under the basket and its reverse displacement.\n- The candidate is initially on the three-point line and needs to complete at least four complete sets of actions and return to the three-point line (meaning that even if all four sets of actions have been completed, the exam cannot be ended if Qingfeng is not on the three-point line). The total time for all actions is calculated. The score will be full if the time is within 35 seconds, and it will be zero if the time is outside 45 seconds.\n\nQingfeng can perform the following actions in this execrise:\n\n- If he is on the three point line, he can use $a$ seconds and dribble the ball to the basket,whose operation symbol is ```G```. After this action, he is under the basket.\n- If he is under the basket, he can use $a$ seconds and dribble the ball to the three point line,whose operation symbol is ```B```. After this action, he is on the three point line.\n- If he is under the basket, he can use $b$ seconds and aim for the layup ,whose operation symbol is ```A```. Then, the basketball will definitely be thrown in. Or he can use $c$ seconds and casully layup,whose operation symbol is ```W```. Then, the basketball won't be thrown in.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/499mp1rj.png)\n\n(Exam Rules Diagram)\n\nNow a sequence of Qingfeng's operation sequence is given and it is ensured to be legal. Please help Qingfeng plan the remaining operations so that he can complete the basketball exam in the shortest total time (including the operations that have already been performed).", "inputFormat": "The first line of input contains three integers $a,b,c$, which denotes the time each operation cost.\n\nThe second line contains a string $S$,  which denotes the operation sequence.", "outputFormat": "The only line contains an integer representing the shortest total time.", "hint": "#### Sample Description\n\nFor the first test case: After the given operation sequence, the subsequent operations to be performed are: ```ABGAB```.\n\nFor the last full set of movements: Obviously, making a layup successfully in one attempt is better than trying three times.\n\nFor the second test case: The movements were completed, but Qingfeng ran back under the basket, the correct action is to return.\n\nFor the third test case: Qingfeng needs repeat ```GWWWB``` four times; obviously, three attempts are better than making a layup successfully in one attempt.\n\nFor the fourth test case: \n\nFor incomplete full movements, obviously, trying twice is better than making a layup successfully in one attempt.\n\nFor unperformed full movements, obviously, making a layup successfully in one attempt is better than trying three times.\n\nFor the fifth test case: Obviously, for incomplete and unperformed full movements, trying at least twice or three times is not better than making a layup successfully in one attempt.\n\nFor the sixth test case: For incomplete and unperformed full movements, trying twice or three times is better than making a layup successfully in one attempt.\n\n#### Constraints\n\n**The score of each test case is equal.**\n\nFor test case $1$, it is guaranteed that the exam can be ended directly by performing the given sequence of operations.\n\nFor test case $2\\sim 5$, it is guaranteed that $b=c$.\n\nFor test case $6\\sim 10$, there are no additional constraints.\n\nFor all test cases, it is guaranteed that $1\\le |S|\\le 100$, $S_i\\in\\{\\texttt{G},\\texttt{B},\\texttt{A},\\texttt{W}\\}$, $1\\le a,b,c \\le 10^7$, $b\\ge c$, and $S$ is legal.", "locale": "en"}, "zh-CN": {"title": "「FAOI-R9」平民上篮", "background": "You can switch the language of problem description.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/96tdfgkh.png)\n\n清风紧盯着篮板上的白线，篮球出手后击打在边缘上，他为之心头一紧，篮球落在篮筐的铁环上，他心头的石头落下了一点，可是，篮球弹起来后又弹出了篮板，他奔向篮球掉落的方向，眼看着篮球要飞向边线......\n\n清风至今还能想起一年前备战体育中考的那段时光。", "description": "B 市的篮球中考规则是这样的：\n\n* 考生的一组完整动作定义为运球到篮下，一组成功的上篮动作及返回三个动作的依次连续进行。\n* 一组上篮动作的成功的判定条件为：考生在一段连续时间内身体一直在篮筐下，即在此段时间内只会发生投篮投进或者投篮失败，若**存在某次**投篮投进则为成功，若投篮失败**至少**三次则也视为成功。\n* 运球到篮下和返回分别是由三分线到篮筐下的位移及其反向位移。\n* 考生初始在三分线上，需要完成至少四组完整的动作并回到三分线（也就是说即使四组动作已经完成时，如果清风不在三分线上那么不能结束考试），计取所有动作的总时间和。若在 30 秒内为满分，在 46 秒外为零分。\n\n清风在本次练习中可以进行以下动作：\n\n* 若他在三分线上，他可以选择运球到篮下（操作符号为 `G`），消耗 $ a $ 秒，动作结束后他在篮下。\n* 若他在篮下，他可以选择运球返回（操作符号为 `B`），消耗 $ a $ 秒，动作结束后他在三分线上。\n* 若他在篮下，他可以选择瞄准上篮（操作符号为 `A`）或随便上篮（操作符号为 `W`），瞄准上篮消耗 $ b $ 秒，篮球一定投进；随便上篮消耗 $ c $ 秒，篮球一定投不进。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v8ib3xgn.png)\n\n（考试规则示意图）\n\n现在给出清风一场训练的操作序列，保证它一定合法，请你帮助清风规划剩下的操作使得他完成篮球考试且总用时（含已经进行完的操作）最短。", "inputFormat": "第一行三个整数 $ a,b,c $，表示操作耗时参数。\n\n一行一个字符串 $ S $，表示清风的操作序列。", "outputFormat": "一行一个整数表示最短的总用时。", "hint": "**【样例 1 解释】**\n\n给出的操作序列之后需要进行的操作依次为：`ABGAB`。\n\n对于最后一组完整动作：显然一次上篮直接过是优于三次尝试的。\n\n**【样例 2 解释】**\n\n动作做完了但清风又跑到篮筐底下了，正解是回去。\n\n**【样例 3 解释】**\n\n需要再重复四遍 `GWWWB`，显然三次尝试是优于一次直接成功上篮的。\n\n**【样例 4 解释】**\n\n对于没做完的完整动作，显然尝试两次是优于一次直接成功上篮的。\n\n而对于没做的完整动作，显然一次直接成功上篮是优于尝试三次的。\n\n**【样例 5 解释】**\n\n显然对于没做完的完整动作和没做的完整动作，尝试至少两次或至少三次不优于一次直接上篮。\n\n**【样例 6 解释】**\n\n对于没做完的完整动作和没做的完整动作，尝试两次或三次优于一次直接上篮。\n\n**【数据规模与约定】**\n\n记 $ n $ 为 $ S $ 的长度。\n\n**本题测试点等分。**\n\n对于测试点 $ 1 $，保证按照给出的操作序列可以直接结束考试。\n\n对于测试点 $ 2 \\sim 5 $，保证 $ b=c $。\n\n对于测试点 $ 6 \\sim 10 $，无特殊限制。\n\n对于每个测试点，保证 $ 1 \\le n \\le 100 $，且 $ S_i \\in \\{\\texttt{G},\\texttt{B},\\texttt{A},\\texttt{W}\\} $，$ 1 \\le a,b,c \\le 10^7 $，$ b \\ge c $，且 $ S $ 一定合法。", "locale": "zh-CN"}, "zh-Hant": {"title": "", "background": "", "description": "", "inputFormat": "", "outputFormat": "", "hint": "", "locale": "zh-Hant"}}}
{"pid": "P12397", "type": "P", "difficulty": 4, "samples": [["4 3\n21\n20\n19\n50", "1\n1\n0\n1"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "洛谷原创", "O2优化", "枚举", "洛谷月赛"], "title": "「FAOI-R9」函数大师", "background": "作为一名电脑技术大神，明月喜欢用几何画板画出各种奇形怪状函数的图象，例如 $ y=\\frac{x^x}{\\sin x} $，$ y=\\lfloor x^{\\tan x} \\rfloor $，$ y=\\frac{x+x^3+x^5+x^7}{1+x^2+x^4+x^6} $，它们有的连续，有的离散，有的长得很奇怪，但是作为一名中考数学 99/100 的 math master，他自信自己能掌握很多函数的规律。\n\n于是，清风给了他一个这样的函数。", "description": "清风定义函数 $ s(x)(x \\in \\mathbb{N^*}) $ 代表 $ x $ 在十进制表示下的的各位数字之和，即：\n\n$$ s(x)=\\sum_{i=0}^{+\\infty}(\\lfloor \\frac{x}{10^i} \\rfloor \\bmod 10) $$\n清风又定义 $ S_k(x) (x\\in \\mathbb {N^*},k\\in \\mathbb{N}) $，满足：\n\n$$ S_0(x) = x,S_k(x) = s(S_{k-1}(x)) $$\n\n清风再定义 $ f_k(x)(x\\in \\mathbb {N^*},k\\in \\mathbb{N}) $，满足：\n\n$$ f_k(x)=\\sum_{i=0}^{k}S_i(x) $$\n\n清风把这个函数给了明月，明月自信满满地将函数输入几何画板后，显示的图象让他眼花缭乱。为了探究这个函数的性质，明月找到了你。\n\n给定你 $ k $，每次询问给定你 $ m $，请你求出 $ y=f_k(x) $  与 $ y=m $ 两个函数图象的公共点个数，可以证明这个数值一定是有限的。", "inputFormat": "第一行两个整数 $ T,k $，表示有 $ T $ 组询问，$ k $ 的意义见题目描述。\n\n接下来 $ T $ 行，每行一个正整数，第 $ i $ 行的表示第 $ i $ 次询问的 $ m $。", "outputFormat": "对于每次询问，输出公共点的个数。", "hint": "**【样例 1 解释】**\n\n对于样例 $ 1 $，每组数据对应的所有公共点的 $ x $ 坐标集合分别为 $ \\{12\\} $、$ \\{5\\} $、$ \\varnothing $ 和 $ \\{26\\} $。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于每个测试点，$ 1 \\le T \\le 10^5 $，$ 0 \\le k \\le 10^9 $，$ 1 \\le m \\le 10^{18} $。\n\n* Subtask 1（5 pts）：$ k=0 $。\n* Subtask 2（20 pts）：$ T \\le 10 $，$ m \\le 10^5 $，$ k \\le 10 $。\n* Subtask 3（25 pts）：$ T \\le 10 $，$ m \\le 10^6 $，$ k \\le 10^4 $。\n* Subtask 4（25 pts）：$ k \\le 1 $。\n* Subtask 5（25 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"en": {"title": "「FAOI-R9」Function Master", "background": "As a computer technology master Mingyue likes using Geometer's Sketchpad to draw the graphs of various bizarre functions, like $ y=\\frac{x^x}{\\sin x} $, $ y=\\lfloor x^{\\tan x} \\rfloor $, and $ y=\\frac{x+x^3+x^5+x^7}{1+x^2+x^4+x^6}$.\n\nSome of them are continuous, some are discrete, and some have very strange shapes. However, as a math master who scored 99/100 in the high school entrance examination in math, he is confident that he can grasp the laws of many functions.\n\nSo, Qingfeng give him such a function.", "description": "Qingfeng denotes a function $s(x)\\;(x \\in \\mathbb N^*)$ as the sum of each digit of $x$ in decimal. Formally, $s(x)$ is defined as:\n\n$$ s(x) = \\sum_{i=0} \\left( \\lfloor \\frac{x}{10^i} \\rfloor \\bmod 10 \\right). $$\n\nConsequently, he defines $S_k(x)\\;(x \\in \\mathbb N^*, k \\in \\mathbb N)$ as follows:\n\n$$ S_k(x) = \\begin{cases} x, & k = 0, \\\\ s(S_{k-1}(x)), & k > 0. \\end{cases} $$\n\nMoreover, Qingfeng defines $f_k(x)\\;(x \\in \\mathbb N^*, k \\in \\mathbb N)$ to be $\\sum_{i=0}^k S_i(x)$. After giving such a function to Mingyue, who confidently inputs the formula into the Geometer's Sketchpad and is dazzled by the graphics, Mingyue decides to ask you to find out the properties of the function.\n\nTo be specific: you are given a constant integer $k$. There are multiple queries, in each of them you are given another integer $m$, and you have to find out the number of intersection points of the graphics of the functions $y = f_k(x)$ and $y = m$. It can be proven that the result is always finite under the given constraints.", "inputFormat": "The first line contains two integers $T$ and $k$, denoting the number of queries, and the given constant, respectively.\n\nThen $T$ lines follow. Each line contains a single integer $m$.", "outputFormat": "For each query, output a single line containing an integer: the answer to the corresponding query.", "hint": "#### Sample Description\n\nFor the first test case: the sets of the x - coordinates of all the intersection points corresponding to each group of data are \n$\\{12\\}$, $\\{5\\}$, $\\varnothing$, and $\\{26\\}$, respectively.\n\n#### Constraints\n\n**Subtasks are used in this problem.**\n\n- Subtask 1（5 pts）: $ k=0 $.\n- Subtask 2（20 pts）: $ T \\le 10 $, $ m \\le 10^5 $, $ k \\le 10 $.\n- Subtask 3（25 pts）: $ T \\le 10 $, $ m \\le 10^6 $, $ k \\le 10^4 $.\n- Subtask 4（25 pts）: $ k \\le 1 $.\n- Subtask 5（25 pts）: No additional constraints.\n\nFor all test cases, it is guaranteed that $1\\le T\\le 10^5$, $0\\le k\\le 10^9$, $0\\le m\\le 10^{18}$.", "locale": "en"}, "zh-CN": {"title": "「FAOI-R9」函数大师", "background": "作为一名电脑技术大神，明月喜欢用几何画板画出各种奇形怪状函数的图象，例如 $ y=\\frac{x^x}{\\sin x} $，$ y=\\lfloor x^{\\tan x} \\rfloor $，$ y=\\frac{x+x^3+x^5+x^7}{1+x^2+x^4+x^6} $，它们有的连续，有的离散，有的长得很奇怪，但是作为一名中考数学 99/100 的 math master，他自信自己能掌握很多函数的规律。\n\n于是，清风给了他一个这样的函数。", "description": "清风定义函数 $ s(x)(x \\in \\mathbb{N^*}) $ 代表 $ x $ 在十进制表示下的的各位数字之和，即：\n\n$$ s(x)=\\sum_{i=0}^{+\\infty}(\\lfloor \\frac{x}{10^i} \\rfloor \\bmod 10) $$\n清风又定义 $ S_k(x) (x\\in \\mathbb {N^*},k\\in \\mathbb{N}) $，满足：\n\n$$ S_0(x) = x,S_k(x) = s(S_{k-1}(x)) $$\n\n清风再定义 $ f_k(x)(x\\in \\mathbb {N^*},k\\in \\mathbb{N}) $，满足：\n\n$$ f_k(x)=\\sum_{i=0}^{k}S_i(x) $$\n\n清风把这个函数给了明月，明月自信满满地将函数输入几何画板后，显示的图象让他眼花缭乱。为了探究这个函数的性质，明月找到了你。\n\n给定你 $ k $，每次询问给定你 $ m $，请你求出 $ y=f_k(x) $  与 $ y=m $ 两个函数图象的公共点个数，可以证明这个数值一定是有限的。", "inputFormat": "第一行两个整数 $ T,k $，表示有 $ T $ 组询问，$ k $ 的意义见题目描述。\n\n接下来 $ T $ 行，每行一个正整数，第 $ i $ 行的表示第 $ i $ 次询问的 $ m $。", "outputFormat": "对于每次询问，输出公共点的个数。", "hint": "**【样例 1 解释】**\n\n对于样例 $ 1 $，每组数据对应的所有公共点的 $ x $ 坐标集合分别为 $ \\{12\\} $、$ \\{5\\} $、$ \\varnothing $ 和 $ \\{26\\} $。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于每个测试点，$ 1 \\le T \\le 10^5 $，$ 0 \\le k \\le 10^9 $，$ 1 \\le m \\le 10^{18} $。\n\n* Subtask 1（5 pts）：$ k=0 $。\n* Subtask 2（20 pts）：$ T \\le 10 $，$ m \\le 10^5 $，$ k \\le 10 $。\n* Subtask 3（25 pts）：$ T \\le 10 $，$ m \\le 10^6 $，$ k \\le 10^4 $。\n* Subtask 4（25 pts）：$ k \\le 1 $。\n* Subtask 5（25 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P12398", "type": "P", "difficulty": 5, "samples": [["5 1\n2\n2 1 1\n2\n3 1 1 1\n3\n4 4 3 2 1\n7\n5 4 3 6 2 1\n101\n10 10 100 10 100 10 10 10 100 10 10", "0\n1\n7\n6\n260"], ["3 2\n10\n1 7\n3 1 5 1\n14\n8 4 3 2 1 4 3 2 1\n8 4 3 2 1 4 3 2 1\n13\n5 4 3 8 7 1\n6 3 5 4 3 2 1", "4\n9\n14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "递推", "二分", "洛谷原创", "O2优化", "洛谷月赛", "双指针 two-pointer"], "title": "「FAOI-R9」决战黎明", "background": "牢光是一个很会发明小游戏的人。\n\n清风喜欢和明月玩棋。有一天，他玩了一款牢光发明的《智棋之决战黎明》，因为游戏的趣味而欲罢不能，可惜明月太聪明了，他总是被明月虐。于是，他决定把这个问题推给你让你帮他研究。", "description": "一些概念的定义如下：\n\n* 战线：棋子按照玩家给定的顺序排列的轨道，**棋子一旦落入战线，即必须在这个战线上行动**。\n\n* 棋子等级：玩家给棋子赋予的等级，会且只会因为「对战」的结果产生变化。**初始时这个等级必须为正整数。**\n\n* 对战：对于两个棋子的对战，当棋子等级相等时，两个棋子均被消除；当两个棋子等级不等时，等级大的棋子等级减少 $ 1 $，等级小的棋子被消除。在一次对战中，显然至少会消除掉 $ 1 $ 个棋子。\n\n游戏流程如下：\n\n* 初始时双方游戏积分均为 $ 0 $。\n\n* **准备阶段**：双方玩家规定本方的棋子数量，每个棋子的棋子等级、所属战线和出场顺序。**注意可以在某条战线上不放置任何棋子。**\n\n* **对战阶段**：对于每条战线，进行如下流程（注意这里「在场棋子」指**本条战线上**未被消除的棋子）：\n\n  * 如果两方均没有在场的棋子，则这个战线的流程结束。\n\n  * 如果一方已经没有在场的棋子，则另一方获得与在场棋子的等级之和相等的游戏积分，这个战线的流程结束。\n  \n  * 如果双方均有在场的棋子，则两方在场的出场顺序最靠前的棋子进行一次「对战」。\n\n* **结算阶段**：当所有战线的流程结束后，两个玩家的游戏积分则为本次游戏的结果。\n\n在本局游戏中，有 $ n $ 个战线。\n\n明月已经完成了自己的准备阶段，但是清风在自己未完成准备时偷偷看到了明月的全部 $ n $ 个战线的准备方案。\n\n请你帮助清风设计一种准备方案，使得清风的所有棋子的初始等级均为正整数且和不超过 $ m $，且游戏结束后明月的游戏积分最少，你只需要输出这个最少的积分量即可。\n\n因为清风很爱玩，所以你总共要对于 $ T $ 轮各自独立的游戏给出答案。", "inputFormat": "第一行两个整数 $ T,n $，代表数据组数和每局游戏的战线条数。\n\n对于每组数据：\n\n第一行一个整数 $ m $，代表本局游戏清风的棋子等级之和上限。\n\n接下来 $ n $ 行的第 $ i $ 行，每行开头一个整数 $ l_i $ 代表这个战线明月排布的棋子数量，接下来 $ l_i $ 个整数，依次表示明月阵营出场的每个棋子的等级（$ l_i $ 个棋子的出场顺序即为它们的读入顺序）。", "outputFormat": "对于每组数据，输出一行一个整数，代表题目要求的答案。", "hint": "**【样例 1 解释】**\n\n对于第一组数据，一种方案是清风派出初始等级为 $ 2 $ 的棋子一枚。\n\n对战流程如下：\n\n* 清风在场棋子等级分别为 $ \\{2\\} $，明月在场棋子等级分别为 $ \\{1,1\\} $，等级为 $ 2 $ 的清风棋子和等级为 $ 1 $ 的明月棋子对战，明月棋子被消除，清风棋子等级降为 $ 1 $。\n\n* 清风在场棋子等级分别为 $ \\{1\\} $，明月在场棋子等级分别为 $ \\{1\\} $，双方均派出等级为 $ 1 $ 的棋子出战，均被消除。\n\n* 双方均已无棋子，该条战线不影响双方积分。\n\n因此，该种方案明月的积分为 $ 0 $。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于每个测试点：\n\n* $ 1 \\le T \\le 5 $；\n\n* $ \\bm{1 \\le n \\le 2} $，$ 1 \\le l_i \\le 10^5 $；\n\n* $ 0 \\le m \\le 10^{18} $，明月的棋子等级均为正整数且不超过 $ 10^9 $。\n\n| 子任务编号 | $ n $ | $ l_i $ | $ m $ | 明月棋子等级上限 | 分值 |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| $ 1 $ | $ =1 $ | $ \\le 5 $ | $ \\le 10 $ | $ \\le 5 $ | $ 8 $ |\n| $ 2 $ | $ =1 $ | $ \\le 300 $ | $ \\le 300 $ | $ \\le 5 $ | $ 16 $ |\n| $ 3 $ | $ =1 $ | - | - | $ =1 $ | $ 4 $ |\n| $ 4 $ | $ =1 $ | - | - | - | $ 24 $ |\n| $ 5 $ | $ =2 $ | - | $ =0 $ | - | $ 4 $ |\n| $ 6 $ | $ =2 $ | $ \\le 300 $ | - | - | $ 8 $ |\n| $ 7 $ | $ =2 $ | $ \\le 5000 $ | - | - | $ 12 $ |\n| $ 8 $ | $ =2 $ | - | - | - | $ 24 $ |", "locale": "zh-CN", "translations": {"en": {"title": "「FAOI-R9」Battle at Dawn", "background": "Mr.Light is very good at inventing mini-games.\n\nQingfeng likes to play chess with Mingyue. One day, they played a game called \"Wisdom Chess: Battle at Dawn\" invented by Mr.Light. they were so addicted to the game's fun that they couldn't stop. \n\nUnfortunately, Mingyue was too smart so that Qingfeng was always defeated by Mingyue. So, he decided to pass this problem on to you to help him study it.", "description": "The definitions of some concepts are as follows:\n\n- Battle line: A track where the chess pieces are arranged in the order given by the player. **Once a chess piece lands on a battle line, it must move on this battle line.**\n- Chess piece level: The level assigned to a chess piece by the player, which will only change due to the result of a \"battle\". **Initially, this level must be a positive integer.**\n- Battle: In a battle between two chess pieces, when the levels of the two chess pieces are equal, both chess pieces are eliminated; when the levels of the two chess pieces are not equal, the level of the chess piece with the higher level is reduced by $1$, and the chess piece with the lower level is eliminated. In one battle, obviously at least one chess piece will be eliminated.\n\nThe game process is as follows:\n\n- Initially, the game scores of both players are $0$.\n- **Preparation stage**: Both players specify the number of their own chess pieces, the level of each chess piece, the battle line it belongs to, and the order of appearance. **Note that it is possible not to place any chess pieces on a certain battle line.**\n- **Battle stage**: For each battle line, the following process is carried out (note that here, \"active chess pieces\" refer to the chess pieces that have not been eliminated **on this battle line**):\n  - If neither side has any active chess pieces, the process for this battle line ends.\n  - If one side has no active chess pieces, the other side gets a game score equal to the sum of the levels of the active chess pieces, and the process for this battle line ends.\n  - If both sides have active chess pieces, the two chess pieces with the earliest order of appearance on both sides have a \"battle\".\n- **Settlement stage**: After the processes of all battle lines are completed, the game scores of the two players are the results of this game.\n\nIn this game, there are $n$ battle lines.\n\nMingyue has completed his preparation stage, but Qingfeng secretly saw Mingyue's preparation plans for all $n$ battle lines before he completed his own preparation.\n\nPlease help Qingfeng design a preparation plan so that the initial levels of all of Qingfeng's chess pieces are positive integers and their sum does not exceed $m$, and Mingyue's game score is minimized after the game ends. You only need to output this minimum score.\n\nSince Qingfeng loves playing very much, you need to give answers for $T$ independent rounds of the game in total.", "inputFormat": "The first line contains two integers $T$ and $n$, representing the number of data sets and the number of battle lines in each game.\n\nFor each data set:\n\nThe first line contains an integer $m$, representing the upper limit of the sum of the levels of Qingfeng's chess pieces in this game.\n\nIn the following $n$ lines, the $i$-th line starts with an integer $l_i$ representing the number of chess pieces arranged by Mingyue on this battle line, followed by $l_i$ integers, representing the level of each chess piece that appears in the Mingyue's camp in sequence(the order of appearance of the $l_i$ chess pieces is the order of their input).", "outputFormat": "For each data set, output a single line containing an integer representing the answer required by the problem.", "hint": "#### Sample Description\n\nFor the first test case: one possible plan is for Qingfeng to send out one chess piece with an initial level of $2$.\n\nThe battle process is as follows:\n\n- The levels of Qingfeng's active chess pieces are $\\{2\\}$, and the levels of Mingyue's active chess pieces are $\\{1,1\\}$. The Qingfeng's chess piece with level 2 battles with Mingyue's chess piece with level 1. Mingyue's chess piece is eliminated, and the level of Qingfeng's chess piece is reduced to 1.\n- The levels of Qingfeng's active chess pieces are $\\{1\\}$, and the levels of Mingyue's active chess pieces are $\\{1\\}$. Both sides send out chess pieces with level 1 to battle, and both are eliminated.\n- Both sides have no more chess pieces, and this battle line does not affect the scores of both sides.\n  \nTherefore, Mingyue's score in this plan is $0$.\n\n#### Constraints\n\n**Subtasks are used in this problem.**\n\n| Subtask ID | $ n $ | $ l_i $ | $ m $ | max level of Mingyue's chess pieces | points |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| $ 1 $ | $ =1 $ | $ \\le 5 $ | $ \\le 10 $ | $ \\le 5 $ | $ 8 $ |\n| $ 2 $ | $ =1 $ | $ \\le 300 $ | $ \\le 300 $ | $ \\le 5 $ | $ 16 $ |\n| $ 3 $ | $ =1 $ | - | - | $ =1 $ | $ 4 $ |\n| $ 4 $ | $ =1 $ | - | - | - | $ 24 $ |\n| $ 5 $ | $ =2 $ | - | $ =0 $ | - | $ 4 $ |\n| $ 6 $ | $ =2 $ | $ \\le 300 $ | - | - | $ 8 $ |\n| $ 7 $ | $ =2 $ | $ \\le 5000 $ | - | - | $ 12 $ |\n| $ 8 $ | $ =2 $ | - | - | - | $ 24 $ |\n\nFor all test cases:\n\n- $1\\le T\\le 5$;\n- $\\bm{1 \\le n\\le 2}$, $1\\le l_i\\le 10^5$；\n- $0\\le m\\le 10^{18}$. The level of Mingyue's chess pieces are all positive integers and do not exceed $10^9$.", "locale": "en"}, "zh-CN": {"title": "「FAOI-R9」决战黎明", "background": "牢光是一个很会发明小游戏的人。\n\n清风喜欢和明月玩棋。有一天，他玩了一款牢光发明的《智棋之决战黎明》，因为游戏的趣味而欲罢不能，可惜明月太聪明了，他总是被明月虐。于是，他决定把这个问题推给你让你帮他研究。", "description": "一些概念的定义如下：\n\n* 战线：棋子按照玩家给定的顺序排列的轨道，**棋子一旦落入战线，即必须在这个战线上行动**。\n\n* 棋子等级：玩家给棋子赋予的等级，会且只会因为「对战」的结果产生变化。**初始时这个等级必须为正整数。**\n\n* 对战：对于两个棋子的对战，当棋子等级相等时，两个棋子均被消除；当两个棋子等级不等时，等级大的棋子等级减少 $ 1 $，等级小的棋子被消除。在一次对战中，显然至少会消除掉 $ 1 $ 个棋子。\n\n游戏流程如下：\n\n* 初始时双方游戏积分均为 $ 0 $。\n\n* **准备阶段**：双方玩家规定本方的棋子数量，每个棋子的棋子等级、所属战线和出场顺序。**注意可以在某条战线上不放置任何棋子。**\n\n* **对战阶段**：对于每条战线，进行如下流程（注意这里「在场棋子」指**本条战线上**未被消除的棋子）：\n\n  * 如果两方均没有在场的棋子，则这个战线的流程结束。\n\n  * 如果一方已经没有在场的棋子，则另一方获得与在场棋子的等级之和相等的游戏积分，这个战线的流程结束。\n  \n  * 如果双方均有在场的棋子，则两方在场的出场顺序最靠前的棋子进行一次「对战」。\n\n* **结算阶段**：当所有战线的流程结束后，两个玩家的游戏积分则为本次游戏的结果。\n\n在本局游戏中，有 $ n $ 个战线。\n\n明月已经完成了自己的准备阶段，但是清风在自己未完成准备时偷偷看到了明月的全部 $ n $ 个战线的准备方案。\n\n请你帮助清风设计一种准备方案，使得清风的所有棋子的初始等级均为正整数且和不超过 $ m $，且游戏结束后明月的游戏积分最少，你只需要输出这个最少的积分量即可。\n\n因为清风很爱玩，所以你总共要对于 $ T $ 轮各自独立的游戏给出答案。", "inputFormat": "第一行两个整数 $ T,n $，代表数据组数和每局游戏的战线条数。\n\n对于每组数据：\n\n第一行一个整数 $ m $，代表本局游戏清风的棋子等级之和上限。\n\n接下来 $ n $ 行的第 $ i $ 行，每行开头一个整数 $ l_i $ 代表这个战线明月排布的棋子数量，接下来 $ l_i $ 个整数，依次表示明月阵营出场的每个棋子的等级（$ l_i $ 个棋子的出场顺序即为它们的读入顺序）。", "outputFormat": "对于每组数据，输出一行一个整数，代表题目要求的答案。", "hint": "**【样例 1 解释】**\n\n对于第一组数据，一种方案是清风派出初始等级为 $ 2 $ 的棋子一枚。\n\n对战流程如下：\n\n* 清风在场棋子等级分别为 $ \\{2\\} $，明月在场棋子等级分别为 $ \\{1,1\\} $，等级为 $ 2 $ 的清风棋子和等级为 $ 1 $ 的明月棋子对战，明月棋子被消除，清风棋子等级降为 $ 1 $。\n\n* 清风在场棋子等级分别为 $ \\{1\\} $，明月在场棋子等级分别为 $ \\{1\\} $，双方均派出等级为 $ 1 $ 的棋子出战，均被消除。\n\n* 双方均已无棋子，该条战线不影响双方积分。\n\n因此，该种方案明月的积分为 $ 0 $。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于每个测试点：\n\n* $ 1 \\le T \\le 5 $；\n\n* $ \\bm{1 \\le n \\le 2} $，$ 1 \\le l_i \\le 10^5 $；\n\n* $ 0 \\le m \\le 10^{18} $，明月的棋子等级均为正整数且不超过 $ 10^9 $。\n\n| 子任务编号 | $ n $ | $ l_i $ | $ m $ | 明月棋子等级上限 | 分值 |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| $ 1 $ | $ =1 $ | $ \\le 5 $ | $ \\le 10 $ | $ \\le 5 $ | $ 8 $ |\n| $ 2 $ | $ =1 $ | $ \\le 300 $ | $ \\le 300 $ | $ \\le 5 $ | $ 16 $ |\n| $ 3 $ | $ =1 $ | - | - | $ =1 $ | $ 4 $ |\n| $ 4 $ | $ =1 $ | - | - | - | $ 24 $ |\n| $ 5 $ | $ =2 $ | - | $ =0 $ | - | $ 4 $ |\n| $ 6 $ | $ =2 $ | $ \\le 300 $ | - | - | $ 8 $ |\n| $ 7 $ | $ =2 $ | $ \\le 5000 $ | - | - | $ 12 $ |\n| $ 8 $ | $ =2 $ | - | - | - | $ 24 $ |", "locale": "zh-CN"}}}
{"pid": "P12399", "type": "P", "difficulty": 6, "samples": [["1\n5\n\n3\n\n2", "\n\n? 1 3\n\n? 1 3\n\n! 1 -1 0 2 -2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "交互题", "Special Judge", "O2优化", "枚举", "洛谷月赛", "Ad-hoc"], "title": "「FAOI-R9」少年游", "background": "> 「欲买桂花同载酒，终不似，少年游。」\n> \n> ——刘过《唐多令·芦叶满汀洲》\n\n清风想起了自己学完语法第一次接触算法的那天，当时他惊叹于最大子段和的线性做法的奇妙，居然不用暴力枚举每个区间。\n\n“明月，我们能玩一个游戏吗？”", "description": "明月现在想出了一个长度为 $ n $ 的整数序列 $ a $，对于任意 $1  \\le i \\le n $ 满足 $ |a_i| \\le 10^6 $，这个序列在初始时已经完全确定。\n\n明月只告诉了清风 $ n $ 的值，清风现在可以提出最多 $ 10^4 $ 个询问，每次询问给出一个区间 $ [l,r] $，表示将 $ a $ 序列区间内元素的值全都乘上 $ -1 $，之后明月告诉他操作完之后这个序列的最大子段和的值。而这个要求必须满足 $ 1 \\le l \\le r \\le n $。**操作的效果（对 $ a $ 序列元素的改动）是永久保留的。**\n\n本题中序列的最大子段和的定义为选出序列中的一个**可以为空**的连续段使得元素的和最大，这个最大值即为这个序列的最大子段和。\n\n而清风的目标就是还原这个序列的每个元素的初始值，清风可以进行最多一次作答。\n\n假如你是清风，请完成这个游戏。**注意你的得分和询问次数相关。**\n\n### 交互格式\n\n第一行输入一个整数 $ n $。\n\n在此之后，你应该进行若干次询问，每次询问形如 $ ?\\ l \\ r $，表示给出一个区间 $ [l,r] $，你需要保证 $ 1 \\le l \\le r \\le n $。\n\n如果你得到了答案，请你进行形如 $ !\\ a_1\\ a_2\\ a_3 \\dots a_n $ 的回答，代表你得到了 $ a $ 数组每个元素的初始值。你需要保证 $ |a_i| \\le 10^6 $。在此之后你应该立即退出本轮交互。\n\n每次输出后，请**刷新缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n每次询问并刷新缓冲区后，你将从标准输入中输入一个数字 $ M $，表示序列 $ a $ 的最大子段和。", "inputFormat": "本题有多组数据。\n\n第一行，一个整数 $T$ 表示数据组数。\n\n对于每一组数据，请按照 **【交互格式】** 进行交互。当你报告 $ a $ 序列每个位置的初始值后：\n\n+ 如果你给出的初值正确：\n\t+ 如果这是最后一组数据，交互库退出根据询问次数打分；\n\t+ 如果这不是最后一组数据，你应当接着读入 $n$ 以进行下一组数据的交互。\n+ 否则，初值错误，交互库会立刻终止，给你打 $ 0 $ 分。\n+ 打分规则具体参见 **【计分方式】** 一节。", "outputFormat": "见 **【输入格式】**。", "hint": "**【样例 1 解释】**\n\n$ a $ 序列的初始值为 $ \\{1,-1,0,2,-2\\} $。\n\n样例提供的交互过程不符合逻辑（也就是说凭这些信息猜不出 $ a $ 的所有元素初值），只是演示交互格式而已。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于每个测试点，$ 1 \\le T \\le 10 $，$ 2 \\le n \\le 10^3 $，$ |a_i| \\le 10^6 $，且**交互库不是适应性的**，即 $ a_i $ 的所有值在交互开始前**已经全部生成**。\n\n* Subtask 1（20 pts）：$ n \\le 13 $。\n* Subtask 2（80 pts）：无特殊限制。\n\n**【计分方式】**\n\n* 如果你在一些测试点上出现 TLE / RE 等错误，你该子任务不得分。\n* 对于每组数据：若你出现格式错误或询问次数超过 $ 10^4 $，或答案不正确，则该组数据得分比率为 $ 0.0 $。否则按照以下方式计分：\n  * 记你在该组测试数据的询问次数为 $ Q $；\n  * 若 $ Q \\le 3001 $，你得分比率为 $ 1.0 $；\n  * 若 $ 3001 < Q \\le 3011 $，则你的得分比率为 $ 1.0-\\frac{Q-3001}{100} $；\n  * 若 $ Q>3011 $，则你得分为 $ 0.9-\\frac{Q-3011}{10000} $。\n* 对于每个测试点，你的得分比率为该测试点所有数据的最小值；对于每个子任务，你的得分比率为该组子任务的每个测试点的最小值。\n* 由于最终分数为整数，分数计算结果可能会被四舍五入，但是保证较多次数对应得分比率一定不比较少次数对应比率的测试数据得分高。\n\n**【后记】**\n\n“希望未来的道路上，你们的脆弱永远都有人能够包容；你们说的话，永远都有人能聆听。”\n \n“大家的十里春风，永远都有人能懂。”", "locale": "zh-CN", "translations": {"en": {"title": "「FAOI-R9」A Youngsters' Tour", "background": "> Even if I can buy laurel wine for you  \nAnd get afloat,  \nCould our youth renew?\n>\n> —— *Liu Guo, Song of More Sugar, Translated by Xu Yuanchong*\n\nQingfeng recalls the day when he had just finished programming syntax and entered the world of algorithms. He was amazed at the elegance of the linear approach to the Greatest Subsegment Sum problem, which doesn't need to enumerate intervals.\n\n\"Mingyue, can we play a game?\"", "description": "Mingyue has thought of an integer sequence $a$ of length $n$, which has already been determined. For each index $1 \\leq i \\leq n$, $\\lvert a_i \\rvert \\leq 10^6$ holds.\n\nMingyue has only told the value of $n$ to Qingfeng, and he can ask up to $10^4$ queries. In each query, Qingfeng picks an interval $[l, r]$ (which must satisfy $1 \\leq l \\leq r \\leq n$), then Mingyue will multiply $a_i$ by $-1$ for each $l \\leq i \\leq r$. After the multiplications are processed, Mingyue will tell Qingfeng the current *Greatest Subsegment Sum*$^\\dagger$ of the array $a$. **Note that the queries are permanent**.\n\nQingfeng can only make one answer, in which he must recover the initial array $a_1, \\ldots, a_n$. Suppose you are Qingfeng, please finish the game.\n\n$\\dagger$: The *Greatest Subsegment Sum* of an array $a$ is defined as the maximum value of the sum of any subsegment (possibly, an empty subsegment) of $a$.\n\n### Interaction\n\nTo ask a question, output a line in the following format:\n\n- $?\\;l\\;r$ — to pick an interval $[l, r]$ and query. You should guarantee that $1 \\leq l \\leq r \\leq n$.\n\nThe jury will output a single integer $M$ denoting the current Greatest Subsegment Sum, after processing your query.\n\nWhen you have determined the initial array, output a line in the following format:\n\n- $!\\;a_1\\;a_2\\;\\ldots\\;a_n$. You should guarantee that $\\lvert a_i \\rvert \\leq 10^6$.\n\nAfter printing a query, do not forget to output the end of the line and **flush the output**. Otherwise, you will get an arbitrary verdict except Accepted. To do this, use:\n\n- `fflush(stdout)` for C/C++；\n- `std::cout << std::flush` for C++;\n- `System.out.flush()` for Java;\n- `stdout.flush()` for Python;\n- `flush(output)` for Pascal;\n- see the documentation for other languages.\n\nSpecially, the output will be automatically flushed if you use `std::endl` to print an end-of-line, for C++.", "inputFormat": "Each test contains multiple test cases. The first line contains the number of test cases $t$. The description of the test cases follows.\n\nThe first line of each test case contains a single integer $n$ — the length of the array $a$.\n\nAfter reading $n$, you should interact with the jury with respect to the **Interaction** section above.\n\n- If the initial value of $a_1, \\ldots, a_n$ is reported wrong, or you have exceeded the limit of queries,  the jury immediately terminates and you will receive $0$ points.\n- Otherwise, if this is the last test case, the jury terminates you will receive points according to the maximum number of queries you have made in each test case.\n- Otherwise, the interaction continues.", "outputFormat": "Refer to the **Interaction** and **Input** section above.", "hint": "**Sample Description**\n\nNote that the example test cases do not represent an optimal strategy for asking questions and are only shown for the sake of demonstrating the interaction format. Specifically, we cannot uniquely determine the initial array $a$ in the examples.\n\n**Constraints**\n\n**Subtasks are used in this problem**.\n\n- Subtask 1 (20 pts): $n \\leq 13$.\n- Subtask 2 (80 pts): No additional constraints.\n\nFor each test data, it's guaranteed that $1 \\leq t \\leq 10$, $1 \\leq n \\leq 10^3$, $\\lvert a_i \\rvert \\leq 10^6$, and the interactor is *not adaptive* (that means the initial value of $a_1, \\ldots, a_n$ has already been determined before all the queries).\n\n**Scoring**\n\nA Subtask has a positive score (*before rounding to integers*) if and only if in all test cases, the answers are correct and the number of queries made for each test case does not exceed $10^4$.\n\nDenote the maximum number of queries in all the test cases in a subtask as $Q$. Then the *rate of score* of the Subtask is calculated as follows:\n\n- $1.0$, if $Q \\leq 3\\;001$;\n- $1.0 - \\frac{Q - 3\\;001}{100}$, if $3\\;001 < Q \\leq 3\\;011$;\n- $0.9 - \\frac{Q - 3\\;011}{1000}$, if $Q > 3\\;011$.\n\n**Postscript**\n\n\"I hope that, in the future, there will always be someone who can tolerate your fragility and listen to your words.\"\n\n\"The breeze of spring, sprung up in your mind, will never be alone.\"", "locale": "en"}, "zh-CN": {"title": "「FAOI-R9」少年游", "background": "> 「欲买桂花同载酒，终不似，少年游。」\n> \n> ——刘过《唐多令·芦叶满汀洲》\n\n清风想起了自己学完语法第一次接触算法的那天，当时他惊叹于最大子段和的线性做法的奇妙，居然不用暴力枚举每个区间。\n\n“明月，我们能玩一个游戏吗？”", "description": "明月现在想出了一个长度为 $ n $ 的整数序列 $ a $，对于任意 $1  \\le i \\le n $ 满足 $ |a_i| \\le 10^6 $，这个序列在初始时已经完全确定。\n\n明月只告诉了清风 $ n $ 的值，清风现在可以提出最多 $ 10^4 $ 个询问，每次询问给出一个区间 $ [l,r] $，表示将 $ a $ 序列区间内元素的值全都乘上 $ -1 $，之后明月告诉他操作完之后这个序列的最大子段和的值。而这个要求必须满足 $ 1 \\le l \\le r \\le n $。**操作的效果（对 $ a $ 序列元素的改动）是永久保留的。**\n\n本题中序列的最大子段和的定义为选出序列中的一个**可以为空**的连续段使得元素的和最大，这个最大值即为这个序列的最大子段和。\n\n而清风的目标就是还原这个序列的每个元素的初始值，清风可以进行最多一次作答。\n\n假如你是清风，请完成这个游戏。**注意你的得分和询问次数相关。**\n\n### 交互格式\n\n第一行输入一个整数 $ n $。\n\n在此之后，你应该进行若干次询问，每次询问形如 $ ?\\ l \\ r $，表示给出一个区间 $ [l,r] $，你需要保证 $ 1 \\le l \\le r \\le n $。\n\n如果你得到了答案，请你进行形如 $ !\\ a_1\\ a_2\\ a_3 \\dots a_n $ 的回答，代表你得到了 $ a $ 数组每个元素的初始值。你需要保证 $ |a_i| \\le 10^6 $。在此之后你应该立即退出本轮交互。\n\n每次输出后，请**刷新缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n每次询问并刷新缓冲区后，你将从标准输入中输入一个数字 $ M $，表示序列 $ a $ 的最大子段和。", "inputFormat": "本题有多组数据。\n\n第一行，一个整数 $T$ 表示数据组数。\n\n对于每一组数据，请按照 **【交互格式】** 进行交互。当你报告 $ a $ 序列每个位置的初始值后：\n\n+ 如果你给出的初值正确：\n\t+ 如果这是最后一组数据，交互库退出根据询问次数打分；\n\t+ 如果这不是最后一组数据，你应当接着读入 $n$ 以进行下一组数据的交互。\n+ 否则，初值错误，交互库会立刻终止，给你打 $ 0 $ 分。\n+ 打分规则具体参见 **【计分方式】** 一节。", "outputFormat": "见 **【输入格式】**。", "hint": "**【样例 1 解释】**\n\n$ a $ 序列的初始值为 $ \\{1,-1,0,2,-2\\} $。\n\n样例提供的交互过程不符合逻辑（也就是说凭这些信息猜不出 $ a $ 的所有元素初值），只是演示交互格式而已。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于每个测试点，$ 1 \\le T \\le 10 $，$ 2 \\le n \\le 10^3 $，$ |a_i| \\le 10^6 $，且**交互库不是适应性的**，即 $ a_i $ 的所有值在交互开始前**已经全部生成**。\n\n* Subtask 1（20 pts）：$ n \\le 13 $。\n* Subtask 2（80 pts）：无特殊限制。\n\n**【计分方式】**\n\n* 如果你在一些测试点上出现 TLE / RE 等错误，你该子任务不得分。\n* 对于每组数据：若你出现格式错误或询问次数超过 $ 10^4 $，或答案不正确，则该组数据得分比率为 $ 0.0 $。否则按照以下方式计分：\n  * 记你在该组测试数据的询问次数为 $ Q $；\n  * 若 $ Q \\le 3001 $，你得分比率为 $ 1.0 $；\n  * 若 $ 3001 < Q \\le 3011 $，则你的得分比率为 $ 1.0-\\frac{Q-3001}{100} $；\n  * 若 $ Q>3011 $，则你得分为 $ 0.9-\\frac{Q-3011}{10000} $。\n* 对于每个测试点，你的得分比率为该测试点所有数据的最小值；对于每个子任务，你的得分比率为该组子任务的每个测试点的最小值。\n* 由于最终分数为整数，分数计算结果可能会被四舍五入，但是保证较多次数对应得分比率一定不比较少次数对应比率的测试数据得分高。\n\n**【后记】**\n\n“希望未来的道路上，你们的脆弱永远都有人能够包容；你们说的话，永远都有人能聆听。”\n \n“大家的十里春风，永远都有人能懂。”", "locale": "zh-CN"}}}
{"pid": "P12401", "type": "P", "difficulty": 6, "samples": [["5 5\n1 5 8 7 3\n1 8\n4 1\n2 0\n4 0\n5 8", "5\n6\n1\n3\n6\n36"], ["7 0\n4 3 1 7 2 3 5", "7"], ["7 10\n1 6 7 10 5 4 3\n2 7\n2 8\n2 9\n2 9\n2 10\n6 5\n6 6\n6 7\n6 8\n6 9", "8\n8\n5\n3\n3\n2\n4\n4\n4\n5\n7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "COI（克罗地亚）"], "title": "[COI 2025] 玻利维亚 / Bolivija", "background": "\n译自 [COI 2025](https://hsin.hr/hio2025/) T2。\n\n\n玻利维亚坐落于南美，有着丰富的文化和自然风光。玻利维亚同时也是 IOI 2025 的举办地。\n\n萨哈马火山（Nevado Sajama）是一个复式火山，也是玻利维亚的最高峰，位于玻利维亚奥鲁罗省和萨哈马省的交界处。", "description": "\n考虑一个 $N$ 格的直方图。从左往右数第 $i$ 格的高度为 $v_i$。\n\n这里，$N$ 是奇数，并且 $v_{(N+1)/2}$ 是 $v$ 数组的全局最大值之一。我们令 $\\mathrm{mx}=v_{(N+1)/2}$。\n\n对于整数二元组 $(A,B)$ 满足 $0\\le A\\lt B\\le \\mathrm{mx}$，我们考虑截取直方图中高度介于 $[A,B]$ 间的部分，如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iqmfkhgq.png)\n\n如果截取出来的部分关于位于 $(N+1)/2$ 的竖直线是对称的，我们就说 $(A,B)$ 是好的。上图就展示了一个好的 $(A,B)$，这里 $A=2,B=4$。\n\n有 $Q$ 次对 $v$ 数组的单点修改。$\\forall 1\\le i\\le Q+1$，求出在第 $(i-1)$ 次修改后，满足 $\\forall 0\\le A\\lt B\\le \\mathrm{mx}$ 的二元组 $(A,B)$ 中，有多少个二元组是好的。\n\n我们保证修改不会破坏「$v_{(N+1)/2}$ 是数组全局最大值之一」的性质。", "inputFormat": "\n第一行，两个非负整数 $N,Q$。\n\n第二行，$N$ 个非负整数 $v_1,v_2,\\ldots,v_N$。\n\n接下来 $Q$ 行，每行两个非负整数 $x,h$，描述一次修改 $v_{x}\\gets h$。\n\n保证 $x\\neq (N+1)/2$，且 $h\\le \\mathrm{mx}$。", "outputFormat": "输出 $(Q+1)$ 行，第 $i$ 仅一个非负整数，第 $(i-1)$ 次修改后的答案。\n", "hint": "\n### 样例解释\n\n#### 样例 $2$ 解释\n\n样例 $2$ 对应的图片即为【题面描述】中的图片。\n\n好的二元组为：$(0, 1), (2, 3), (2, 4), (3, 4), (5, 6), (5, 7), (6, 7)$，共 $7$ 个。\n\n\n### 数据范围\n\n- $3\\le N\\le 2\\times 10^5$，且 $N$ 为奇数；\n- $0\\le Q\\le 2\\times 10^5$；\n- $v_i\\le 654\\, 200$（萨哈马火山的高度为 $654200\\,\\mathrm{cm}$）；\n- 在任意时刻，$v_{(N+1)/2}$ 是 $v $ 的一个最大值；\n- $x\\neq (N+1)/2$。\n\n### 子任务\n\n- $\\text{Subtask 0 (0 pts)}$：样例。\n- $\\text{Subtask 1 (9 pts)}$：$Q=0,N\\le 300,v_i\\le 300$。\n- $\\text{Subtask 2 (23 pts)}$：$Q=0$。\n- $\\text{Subtask 3 (31 pts)}$：每次修改，$v_i$ 的值变化至多为 $1$。\n- $\\text{Subtask 4 (37 pts)}$：无额外约束。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2025] 玻利维亚 / Bolivija", "background": "\n译自 [COI 2025](https://hsin.hr/hio2025/) T2。\n\n\n玻利维亚坐落于南美，有着丰富的文化和自然风光。玻利维亚同时也是 IOI 2025 的举办地。\n\n萨哈马火山（Nevado Sajama）是一个复式火山，也是玻利维亚的最高峰，位于玻利维亚奥鲁罗省和萨哈马省的交界处。", "description": "\n考虑一个 $N$ 格的直方图。从左往右数第 $i$ 格的高度为 $v_i$。\n\n这里，$N$ 是奇数，并且 $v_{(N+1)/2}$ 是 $v$ 数组的全局最大值之一。我们令 $\\mathrm{mx}=v_{(N+1)/2}$。\n\n对于整数二元组 $(A,B)$ 满足 $0\\le A\\lt B\\le \\mathrm{mx}$，我们考虑截取直方图中高度介于 $[A,B]$ 间的部分，如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iqmfkhgq.png)\n\n如果截取出来的部分关于位于 $(N+1)/2$ 的竖直线是对称的，我们就说 $(A,B)$ 是好的。上图就展示了一个好的 $(A,B)$，这里 $A=2,B=4$。\n\n有 $Q$ 次对 $v$ 数组的单点修改。$\\forall 1\\le i\\le Q+1$，求出在第 $(i-1)$ 次修改后，满足 $\\forall 0\\le A\\lt B\\le \\mathrm{mx}$ 的二元组 $(A,B)$ 中，有多少个二元组是好的。\n\n我们保证修改不会破坏「$v_{(N+1)/2}$ 是数组全局最大值之一」的性质。", "inputFormat": "\n第一行，两个非负整数 $N,Q$。\n\n第二行，$N$ 个非负整数 $v_1,v_2,\\ldots,v_N$。\n\n接下来 $Q$ 行，每行两个非负整数 $x,h$，描述一次修改 $v_{x}\\gets h$。\n\n保证 $x\\neq (N+1)/2$，且 $h\\le \\mathrm{mx}$。", "outputFormat": "输出 $(Q+1)$ 行，第 $i$ 仅一个非负整数，第 $(i-1)$ 次修改后的答案。\n", "hint": "\n### 样例解释\n\n#### 样例 $2$ 解释\n\n样例 $2$ 对应的图片即为【题面描述】中的图片。\n\n好的二元组为：$(0, 1), (2, 3), (2, 4), (3, 4), (5, 6), (5, 7), (6, 7)$，共 $7$ 个。\n\n\n### 数据范围\n\n- $3\\le N\\le 2\\times 10^5$，且 $N$ 为奇数；\n- $0\\le Q\\le 2\\times 10^5$；\n- $v_i\\le 654\\, 200$（萨哈马火山的高度为 $654200\\,\\mathrm{cm}$）；\n- 在任意时刻，$v_{(N+1)/2}$ 是 $v $ 的一个最大值；\n- $x\\neq (N+1)/2$。\n\n### 子任务\n\n- $\\text{Subtask 0 (0 pts)}$：样例。\n- $\\text{Subtask 1 (9 pts)}$：$Q=0,N\\le 300,v_i\\le 300$。\n- $\\text{Subtask 2 (23 pts)}$：$Q=0$。\n- $\\text{Subtask 3 (31 pts)}$：每次修改，$v_i$ 的值变化至多为 $1$。\n- $\\text{Subtask 4 (37 pts)}$：无额外约束。\n", "locale": "zh-CN"}}}
{"pid": "P12402", "type": "P", "difficulty": 7, "samples": [["2\n2 0", "0 1\n2 3"], ["2\n1 1", "-1"], ["3\n2 0 2", "0 1\n2 6\n3 7\n4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "Special Judge", "COI（克罗地亚）"], "title": "[COI 2025] 贪腐 / Korupcija", "background": "译自 [COI 2025](https://hsin.hr/hio2025/) T3。\n\n\n> ……普及贪腐，非惟寡人。吾施腐败之礼：朽乱纲纪，堕落功业，无尽滋长。凡彼人所许诸事，吾皆加倍赐予。且设第八议：予之于谁？索几何？……", "description": "给定正整数 $N$。初始时，集合 $S=\\{0,1,\\ldots,2^N-1\\}$。\n\n初始时序列 $b_0=b_1=\\ldots=b_{N-1}=0$。\n\n考虑重复以下过程 $2^{N-1}$ 次：\n\n- 从 $S$ 中选出两个整数 $X,Y$，满足 $X\\oplus Y=2^k$（$k\\in \\mathbb N$）。将它们从 $S$ 中删去。\n- 令 $b_k\\gets b_k+1$。\n\n给定序列 $a_0,a_1,\\ldots,a_{N-1}$。判断是否能通过恰当地选择每次操作的 $X,Y$，满足最终得到的 $b$ 序列和 $a$ 序列相同。如果能的话，还需要构造一组方案。\n\n如果正确地判断了解的存在性，你也能得到部分分数。详见「计分方式」。", "inputFormat": "第一行，正整数 $N$。\n\n第二行，$N$ 个非负整数 $a_0,a_1,\\ldots,a_{N-1}$。\n\n保证 $\\sum a_i=2^{N-1}$。", "outputFormat": "如果不可能，输出一行一个 $\\texttt{-1}$。\n\n否则，输出 $2^{N-1}$ 行，每行两个非负整数 $X,Y$。\n\n输出任意一组解均可。", "hint": "### 数据范围\n\n- $1\\le N\\le 20$；\n- $0\\le a_i$；\n- $\\sum a_i=2^{N-1}$。\n\n### 子任务\n\n子任务 $0$ 为样例。\n\n| 子任务编号 | $N$ | 特殊性质 | 得分 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $\\le  4$ |  | $15$ |\n| $2$ | $\\ge  2$ | 对于所有 $i>2$，$a_i=0$ | $15$ |\n| $3$ | $\\le  6$ |  | $20$ |\n| $4$ | $\\le 20$ |  | $50$ |\n\n### 计分方式\n\n如果正确地判断了解的存在性，你也能得到 $20\\%$ 分数。\n\n具体地说，如果你在无解的时候输出了 $-1$，有解的时候输出了 $2^{N-1}$ 对非负整数，那么就视为你正确地判断了解的存在性。\n\n如果你构造的方案正确，可以得到剩余的 $80\\%$ 分数。\n\n---\n\n题面背景的翻译由 GPT-o4-mini 提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2025] 贪腐 / Korupcija", "background": "译自 [COI 2025](https://hsin.hr/hio2025/) T3。\n\n\n> ……普及贪腐，非惟寡人。吾施腐败之礼：朽乱纲纪，堕落功业，无尽滋长。凡彼人所许诸事，吾皆加倍赐予。且设第八议：予之于谁？索几何？……", "description": "给定正整数 $N$。初始时，集合 $S=\\{0,1,\\ldots,2^N-1\\}$。\n\n初始时序列 $b_0=b_1=\\ldots=b_{N-1}=0$。\n\n考虑重复以下过程 $2^{N-1}$ 次：\n\n- 从 $S$ 中选出两个整数 $X,Y$，满足 $X\\oplus Y=2^k$（$k\\in \\mathbb N$）。将它们从 $S$ 中删去。\n- 令 $b_k\\gets b_k+1$。\n\n给定序列 $a_0,a_1,\\ldots,a_{N-1}$。判断是否能通过恰当地选择每次操作的 $X,Y$，满足最终得到的 $b$ 序列和 $a$ 序列相同。如果能的话，还需要构造一组方案。\n\n如果正确地判断了解的存在性，你也能得到部分分数。详见「计分方式」。", "inputFormat": "第一行，正整数 $N$。\n\n第二行，$N$ 个非负整数 $a_0,a_1,\\ldots,a_{N-1}$。\n\n保证 $\\sum a_i=2^{N-1}$。", "outputFormat": "如果不可能，输出一行一个 $\\texttt{-1}$。\n\n否则，输出 $2^{N-1}$ 行，每行两个非负整数 $X,Y$。\n\n输出任意一组解均可。", "hint": "### 数据范围\n\n- $1\\le N\\le 20$；\n- $0\\le a_i$；\n- $\\sum a_i=2^{N-1}$。\n\n### 子任务\n\n子任务 $0$ 为样例。\n\n| 子任务编号 | $N$ | 特殊性质 | 得分 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $\\le  4$ |  | $15$ |\n| $2$ | $\\ge  2$ | 对于所有 $i>2$，$a_i=0$ | $15$ |\n| $3$ | $\\le  6$ |  | $20$ |\n| $4$ | $\\le 20$ |  | $50$ |\n\n### 计分方式\n\n如果正确地判断了解的存在性，你也能得到 $20\\%$ 分数。\n\n具体地说，如果你在无解的时候输出了 $-1$，有解的时候输出了 $2^{N-1}$ 对非负整数，那么就视为你正确地判断了解的存在性。\n\n如果你构造的方案正确，可以得到剩余的 $80\\%$ 分数。\n\n---\n\n题面背景的翻译由 GPT-o4-mini 提供。", "locale": "zh-CN"}}}
{"pid": "P12403", "type": "P", "difficulty": 7, "samples": [["1\n6 5 3 1\n1 2\n2 3\n2 4\n4 5\n5 6", "4 3"], ["1\n6 6 3 2\n1 2\n2 3\n3 4\n4 1\n3 5\n5 6", "1 6"], ["1\n6 7 3 3\n1 2\n2 3\n3 1\n2 4\n4 5\n5 6\n6 4", "4 2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2025", "Special Judge", "仙人掌", "圆方树", "分类讨论", "COI（克罗地亚）"], "title": "[COI 2025] 象掌兽 / Lirili Larila", "background": "\n译自 [COI 2025](https://hsin.hr/hio2025/) T4。\n\n\n> 苏格拉底曰：“请告诉我，柏拉图，你是否同意：最强的斗士当属能飞之辈，如‘邦巴迪罗·鳄地罗’（Bombardiro Crocodillo）与‘邦邦比尼·古西尼’（Bombombini Gusini）？”\n> \n> 柏拉图对曰：“此言不当。陆地斗士，如‘嘟嘟·帕塔品’（Brr Brr Patapim）与‘瞳瞳瞳·萨胡尔’（Tung Tung Tung Sahur），虽不能飞翔，然其功业辉煌，岂可轻视？”\n> \n> 苏格拉底复言：“吾以为，唯有让斗士鏖战，方能识真章，待其胜负自明，方可究竟是非。”\n> \n> 柏拉图欣然赞曰：“善哉，苏格拉底！吾亦以为此乃探求真理之正道也。”\n", "description": "\n本题中，「仙人掌」指的是简单连通无向图，其中每个**点**至多在一个环中。\n\n给定一张 $N$ 个点 $M$ 条边的仙人掌图，点编号 $1\\sim N$。给定正整数 $A,B$。\n\n选定两个点 $s,t$（$s\\neq t$）。我们将这 $N$ 个点染色：\n\n$\\gdef \\dist {\\operatorname{dist}}$\n\n对于点 $i$，\n\n- 若 $\\dist(i,s)\\lt \\dist(i,t)$，点 $i$ 被染粉；\n- 若 $\\dist(i,s)\\gt \\dist(i,t)$，点 $i$ 被染黑；\n- 否则若 $\\dist(i,s)=\\dist(i,t)$，点 $i$ 被染蓝。\n\n这里，$\\dist(a,b)$ 表示图中 $a,b$ 路径的最短边数。\n\n欲使图中粉色的点有 $A$ 个，黑色的点有 $B$ 个。构造 $s,t$ 满足这个条件。数据保证有解。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来依次输入 $T$ 组数据：\n\n> 第一行，四个正整数 $N,M,A,B$。\n>\n> 接下来 $M$ 行，每行两个正整数 $a,b$，描述图中的一条边。\n\n数据保证有解。", "outputFormat": "\n对于每组数据，输出两个正整数，表示 $s,t$。\n\n任意一组解均可。", "hint": "\n## 数据范围\n\n- $2\\le N,\\sum N\\le 2\\times 10^5$；\n- $1\\le A,B$；\n- $2\\le A+B\\le N$；\n- $a\\neq b$；\n- 给定的图是仙人掌。\n\n### 样例解释\n\n#### 样例 $1$ 解释\n\n被染粉的点：$4,5,6$。被染黑的点：$3$。\n\n#### 样例 $2$ 解释\n\n被染粉的点：$1,2,4$。被染黑的点：$5,6$。\n\n#### 样例 $3$ 解释\n\n被染粉的点：$4,5,6$。被染黑的点：$1,2,3$。\n\n## 子任务\n\n子任务 $0$ 为样例。\n\n| 子任务编号 | 图的形态 | $\\sum N\\le$ | 特殊性质 | 得分 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ |     | $300$ |   | $6$ |\n| $2$ | 树 | $5\\, 000$ |   | $8$ |\n| $3$ | 树 | $2\\times 10^5$ |   | $25$ |\n| $4$ | 基环树 | $5\\, 000$ |   | $13$ |\n| $5$ | 基环树 | $2\\times 10^5$ | $\\text{A}$ | $17$ |\n| $6$ | 基环树 | $2\\times 10^5$ |   | $8$ |\n| $7$ |     | $5\\, 000$ |   | $11$ |\n| $8$ |     | $2\\times 10^5$ |   | $12$ |\n\n- 特殊性质 $\\text{A}$：保证存在一组解，使得 $s,t$ 都在环上。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2025] 象掌兽 / Lirili Larila", "background": "\n译自 [COI 2025](https://hsin.hr/hio2025/) T4。\n\n\n> 苏格拉底曰：“请告诉我，柏拉图，你是否同意：最强的斗士当属能飞之辈，如‘邦巴迪罗·鳄地罗’（Bombardiro Crocodillo）与‘邦邦比尼·古西尼’（Bombombini Gusini）？”\n> \n> 柏拉图对曰：“此言不当。陆地斗士，如‘嘟嘟·帕塔品’（Brr Brr Patapim）与‘瞳瞳瞳·萨胡尔’（Tung Tung Tung Sahur），虽不能飞翔，然其功业辉煌，岂可轻视？”\n> \n> 苏格拉底复言：“吾以为，唯有让斗士鏖战，方能识真章，待其胜负自明，方可究竟是非。”\n> \n> 柏拉图欣然赞曰：“善哉，苏格拉底！吾亦以为此乃探求真理之正道也。”\n", "description": "\n本题中，「仙人掌」指的是简单连通无向图，其中每个**点**至多在一个环中。\n\n给定一张 $N$ 个点 $M$ 条边的仙人掌图，点编号 $1\\sim N$。给定正整数 $A,B$。\n\n选定两个点 $s,t$（$s\\neq t$）。我们将这 $N$ 个点染色：\n\n$\\gdef \\dist {\\operatorname{dist}}$\n\n对于点 $i$，\n\n- 若 $\\dist(i,s)\\lt \\dist(i,t)$，点 $i$ 被染粉；\n- 若 $\\dist(i,s)\\gt \\dist(i,t)$，点 $i$ 被染黑；\n- 否则若 $\\dist(i,s)=\\dist(i,t)$，点 $i$ 被染蓝。\n\n这里，$\\dist(a,b)$ 表示图中 $a,b$ 路径的最短边数。\n\n欲使图中粉色的点有 $A$ 个，黑色的点有 $B$ 个。构造 $s,t$ 满足这个条件。数据保证有解。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来依次输入 $T$ 组数据：\n\n> 第一行，四个正整数 $N,M,A,B$。\n>\n> 接下来 $M$ 行，每行两个正整数 $a,b$，描述图中的一条边。\n\n数据保证有解。", "outputFormat": "\n对于每组数据，输出两个正整数，表示 $s,t$。\n\n任意一组解均可。", "hint": "\n## 数据范围\n\n- $2\\le N,\\sum N\\le 2\\times 10^5$；\n- $1\\le A,B$；\n- $2\\le A+B\\le N$；\n- $a\\neq b$；\n- 给定的图是仙人掌。\n\n### 样例解释\n\n#### 样例 $1$ 解释\n\n被染粉的点：$4,5,6$。被染黑的点：$3$。\n\n#### 样例 $2$ 解释\n\n被染粉的点：$1,2,4$。被染黑的点：$5,6$。\n\n#### 样例 $3$ 解释\n\n被染粉的点：$4,5,6$。被染黑的点：$1,2,3$。\n\n## 子任务\n\n子任务 $0$ 为样例。\n\n| 子任务编号 | 图的形态 | $\\sum N\\le$ | 特殊性质 | 得分 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ |     | $300$ |   | $6$ |\n| $2$ | 树 | $5\\, 000$ |   | $8$ |\n| $3$ | 树 | $2\\times 10^5$ |   | $25$ |\n| $4$ | 基环树 | $5\\, 000$ |   | $13$ |\n| $5$ | 基环树 | $2\\times 10^5$ | $\\text{A}$ | $17$ |\n| $6$ | 基环树 | $2\\times 10^5$ |   | $8$ |\n| $7$ |     | $5\\, 000$ |   | $11$ |\n| $8$ |     | $2\\times 10^5$ |   | $12$ |\n\n- 特殊性质 $\\text{A}$：保证存在一组解，使得 $s,t$ 都在环上。\n", "locale": "zh-CN"}}}
{"pid": "P12404", "type": "P", "difficulty": 2, "samples": [["2 3 1", "2 2"], ["7 2 3", "7 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "洛谷原创", "Special Judge", "O2优化", "洛谷比赛"], "title": "「CZOI-R3」可爱棉羊", "background": "", "description": "农夫有 $N$ 只小棉羊，它们被关在**一排连续**的 $N$ 个羊圈里。\n\n有一天，有 $x$ 只不同的小棉羊生病了。每天晚上，每只已被感染的小棉羊，就会随机感染**与它相邻的一只**小棉羊。而且同一只小棉羊有可能会被多次传染。\n\n第 $i$ 只小棉羊只与第 $i-1$ 和第 $i+1$ 只小棉羊相邻。特别的，第 $1$ 只小棉羊相邻的小棉羊只有 $2$，第 $N$ 只小棉羊相邻的小棉羊只有 $N-1$。\n\n在过了 $T$ 天后（即 $T$ 轮传染后），农夫才发现这件事。他十分着急，迫切地想要知道：对于所有可能的情况，现在被传染的的小棉羊的数量的**最大值**和**最小值**分别是多少。", "inputFormat": "第一行输入 $3$ 个整数  $N,T,x$。", "outputFormat": "第一行输出 $2$ 个整数，分别表示被传染的小棉羊的数量的**最大值**和**最小值**。\n\n如果您的输出有任意一个数正确，您将得到该测试点 $50\\%$ 的分数。若您不会其中一个输出请使用 $0$ 替代，否则不可以得分。", "hint": "**【样例解释 #1】**\n\n在第一轮传染后，$2$ 只小棉羊都会被传染，所以被传染的小棉羊的数量的**最大值**和**最小值**均为 $2$。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（$20\\text{ pts}$）：$N,T \\le 20$。\n- Subtask #2（$20\\text{ pts}$）：$N \\le 20$。\n- Subtask #3（$20\\text{ pts}$）：$x=1$。\n- Subtask #4（$40\\text{ pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le N,T\\le10^9$，$1\\le x\\le N$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CZOI-R3」可爱棉羊", "background": "", "description": "农夫有 $N$ 只小棉羊，它们被关在**一排连续**的 $N$ 个羊圈里。\n\n有一天，有 $x$ 只不同的小棉羊生病了。每天晚上，每只已被感染的小棉羊，就会随机感染**与它相邻的一只**小棉羊。而且同一只小棉羊有可能会被多次传染。\n\n第 $i$ 只小棉羊只与第 $i-1$ 和第 $i+1$ 只小棉羊相邻。特别的，第 $1$ 只小棉羊相邻的小棉羊只有 $2$，第 $N$ 只小棉羊相邻的小棉羊只有 $N-1$。\n\n在过了 $T$ 天后（即 $T$ 轮传染后），农夫才发现这件事。他十分着急，迫切地想要知道：对于所有可能的情况，现在被传染的的小棉羊的数量的**最大值**和**最小值**分别是多少。", "inputFormat": "第一行输入 $3$ 个整数  $N,T,x$。", "outputFormat": "第一行输出 $2$ 个整数，分别表示被传染的小棉羊的数量的**最大值**和**最小值**。\n\n如果您的输出有任意一个数正确，您将得到该测试点 $50\\%$ 的分数。若您不会其中一个输出请使用 $0$ 替代，否则不可以得分。", "hint": "**【样例解释 #1】**\n\n在第一轮传染后，$2$ 只小棉羊都会被传染，所以被传染的小棉羊的数量的**最大值**和**最小值**均为 $2$。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（$20\\text{ pts}$）：$N,T \\le 20$。\n- Subtask #2（$20\\text{ pts}$）：$N \\le 20$。\n- Subtask #3（$20\\text{ pts}$）：$x=1$。\n- Subtask #4（$40\\text{ pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le N,T\\le10^9$，$1\\le x\\le N$。", "locale": "zh-CN"}}}
{"pid": "P12405", "type": "P", "difficulty": 5, "samples": [["5\n3 4 6\n8 2 5\n501 501 6\n11451 41919 313172124\n824431 960532 10000007", "420\n610340\n520860091\n95420244\n42443525"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "组合数学", "排列组合", "Ad-hoc", "洛谷比赛"], "title": "「CZOI-R3」星光闪耀", "background": "> 今夜星光闪闪 我爱你的心满满 ……", "description": "天空中有一个包含 $n$ 颗星星的星团。\n\n小 K 认为天空中只有一个星团不够浪漫，因此她准备施展魔法。若在她施展魔法前第 $i$ 个星团包含 $a_i$ 颗星星，且 $a_i\\ge2$；则施展魔法后天空中**分别**增加包含 $1\\sim a_i-1$ 颗星星的星团（注意原本的星团会被保留）。\n\n小 K 定义一个包含 $v$ 颗星星的星团的**闪耀度**为 $k^v$。求她施展 $m$ 次魔法后，天空中所有星团的**闪耀度**之和，对 $998244353$ 取模。\n\n------------\n**【形式化题意】**\n\n给定一个可重集 $S_0$，初始 $S_0$ 中只有一个数 $n$。\n\n定义一次操作为：新建一个可重集 $S_1$，对于 $\\forall1\\le i\\le|S_0|$，若 $S_{0,i}\\ge 2$，则对于 $\\forall1\\le j\\le S_{0,i}-1$，将 $j$ 加入 $S_1$。在这次操作的最后，将 $S_1$ 中所有元素加入 $S_0$。\n\n求进行了 $m$ 次操作后的 $\\sum_{i=1}^{|S_0|} k^{S_{0,i}}$，对 $998244353$ 取模。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入 $1$ 个整数 $T$。\n\n接下来 $T$ 行，每行输入 $3$ 个整数 $n,m,k$。", "outputFormat": "共 $T$ 行，每行输出 $1$ 个整数，表示该组数据的答案。", "hint": "**【样例解释】**\n\n以下记 $L_i$ 表示包含 $i$ 颗星星的星团的个数，即 $S_{0,j}=i$ 的个数。\n\n第 $1$ 组测试数据中：\n- 第一次施展魔法（进行操作）后 $L_1=1,L_2=1,L_3=1$。\n- 第二次施展魔法（进行操作）后 $L_1=3,L_2=2,L_3=1$。\n- 第三次施展魔法（进行操作）后 $L_1=6,L_2=3,L_3=1$。\n- 第四次施展魔法（进行操作）后 $L_1=10,L_2=4,L_3=1$。\n\n因此答案为 $10\\times6^1+4\\times6^2+1\\times6^3=420$。\n\n第 $2$ 组测试数据中：\n- 第一次施展魔法（进行操作）后 $\\forall1\\le i\\le n,L_i=1$。\n- 第二次施展魔法（进行操作）后 $\\forall1\\le i\\le n,L_i=n-i+1$。\n\n因此答案为 $\\sum_{i=1}^n(n-i+1)5^i=610340$。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n记 $\\sum n,\\sum m$ 分别为单个测试点内 $n,m$ 的和。\n\n- Subtask #1（$5\\text{ pts}$）：$k=0$。\n- Subtask #2（$10\\text{ pts}$）：$n\\le5$ 且 $m\\le5$。\n- Subtask #3（$10\\text{ pts}$）：$m\\le3$。\n- Subtask #4（$10\\text{ pts}$）：$k=1$。\n- Subtask #5（$10\\text{ pts}$）：$n\\le2\\times10^2$ 且 $m\\le2\\times10^2$ 且单个测试点内的 $k$ 相等。\n- Subtask #6（$10\\text{ pts}$）：$n\\le2\\times10^3$ 且 $m\\le2\\times10^3$ 且单个测试点内的 $k$ 相等。\n- Subtask #7（$15\\text{ pts}$）：$\\sum n\\le2\\times10^7$。\n- Subtask #8（$15\\text{ pts}$）：$\\sum m\\le2\\times10^6$。\n- Subtask #9（$15\\text{ pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le5\\times10^5$，$1\\le n\\le2\\times10^6$，$1\\le m\\le2\\times10^6$，$\\sum m\\le2\\times10^7$，$0\\le k\\le998244352$。\n\n**本题 IO 量较大，请采用较快的 IO 方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CZOI-R3」星光闪耀", "background": "> 今夜星光闪闪 我爱你的心满满 ……", "description": "天空中有一个包含 $n$ 颗星星的星团。\n\n小 K 认为天空中只有一个星团不够浪漫，因此她准备施展魔法。若在她施展魔法前第 $i$ 个星团包含 $a_i$ 颗星星，且 $a_i\\ge2$；则施展魔法后天空中**分别**增加包含 $1\\sim a_i-1$ 颗星星的星团（注意原本的星团会被保留）。\n\n小 K 定义一个包含 $v$ 颗星星的星团的**闪耀度**为 $k^v$。求她施展 $m$ 次魔法后，天空中所有星团的**闪耀度**之和，对 $998244353$ 取模。\n\n------------\n**【形式化题意】**\n\n给定一个可重集 $S_0$，初始 $S_0$ 中只有一个数 $n$。\n\n定义一次操作为：新建一个可重集 $S_1$，对于 $\\forall1\\le i\\le|S_0|$，若 $S_{0,i}\\ge 2$，则对于 $\\forall1\\le j\\le S_{0,i}-1$，将 $j$ 加入 $S_1$。在这次操作的最后，将 $S_1$ 中所有元素加入 $S_0$。\n\n求进行了 $m$ 次操作后的 $\\sum_{i=1}^{|S_0|} k^{S_{0,i}}$，对 $998244353$ 取模。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入 $1$ 个整数 $T$。\n\n接下来 $T$ 行，每行输入 $3$ 个整数 $n,m,k$。", "outputFormat": "共 $T$ 行，每行输出 $1$ 个整数，表示该组数据的答案。", "hint": "**【样例解释】**\n\n以下记 $L_i$ 表示包含 $i$ 颗星星的星团的个数，即 $S_{0,j}=i$ 的个数。\n\n第 $1$ 组测试数据中：\n- 第一次施展魔法（进行操作）后 $L_1=1,L_2=1,L_3=1$。\n- 第二次施展魔法（进行操作）后 $L_1=3,L_2=2,L_3=1$。\n- 第三次施展魔法（进行操作）后 $L_1=6,L_2=3,L_3=1$。\n- 第四次施展魔法（进行操作）后 $L_1=10,L_2=4,L_3=1$。\n\n因此答案为 $10\\times6^1+4\\times6^2+1\\times6^3=420$。\n\n第 $2$ 组测试数据中：\n- 第一次施展魔法（进行操作）后 $\\forall1\\le i\\le n,L_i=1$。\n- 第二次施展魔法（进行操作）后 $\\forall1\\le i\\le n,L_i=n-i+1$。\n\n因此答案为 $\\sum_{i=1}^n(n-i+1)5^i=610340$。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n记 $\\sum n,\\sum m$ 分别为单个测试点内 $n,m$ 的和。\n\n- Subtask #1（$5\\text{ pts}$）：$k=0$。\n- Subtask #2（$10\\text{ pts}$）：$n\\le5$ 且 $m\\le5$。\n- Subtask #3（$10\\text{ pts}$）：$m\\le3$。\n- Subtask #4（$10\\text{ pts}$）：$k=1$。\n- Subtask #5（$10\\text{ pts}$）：$n\\le2\\times10^2$ 且 $m\\le2\\times10^2$ 且单个测试点内的 $k$ 相等。\n- Subtask #6（$10\\text{ pts}$）：$n\\le2\\times10^3$ 且 $m\\le2\\times10^3$ 且单个测试点内的 $k$ 相等。\n- Subtask #7（$15\\text{ pts}$）：$\\sum n\\le2\\times10^7$。\n- Subtask #8（$15\\text{ pts}$）：$\\sum m\\le2\\times10^6$。\n- Subtask #9（$15\\text{ pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le5\\times10^5$，$1\\le n\\le2\\times10^6$，$1\\le m\\le2\\times10^6$，$\\sum m\\le2\\times10^7$，$0\\le k\\le998244352$。\n\n**本题 IO 量较大，请采用较快的 IO 方式。**", "locale": "zh-CN"}}}
{"pid": "P12406", "type": "P", "difficulty": 5, "samples": [["2 1 1 1\n1 2\n2 1", "1"], ["5 4 3 2\n1 4 3 2 5\n5 1 4 2 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "树状数组", "洛谷原创", "O2优化", "洛谷比赛"], "title": "「CZOI-R3」消除序列", "background": "", "description": "有两个长为 $n$ 的排列 $a,b$，你可以做任意次操作：\n\n- 将 $a$ 循环左移一位。若在进行操作前 $a_1\\neq 0$，则消耗 $x$ 点代价。\n- 将 $a$ 循环右移一位。若在进行操作前 $a_1\\neq 0$，则消耗 $y$ 点代价。\n- 交换 $x,y$。消耗 $z$ 点代价。\n- 若 $a_1=b_1$，将 $b$ 循环左移一位，同时令 $a_1=0$。不消耗代价。\n\n求出让对于 $\\forall 1\\le i\\le n$ 有 $a_i=0$ 的最小代价，显然一定可以通过若干次操作达成目标。\n\n$\\dag$：设某次循环左移操作前序列为 $a_1,a_2,\\cdots,a_{n-1},a_n$，则操作后序列为 $a_2,\\cdots,a_{n-1},a_n,a_1$。设某次循环右移操作前序列为 $a_1,a_2,\\cdots,a_{n-1},a_n$，则操作后序列为 $a_n,a_1,a_2,\\cdots,a_{n-1}$。", "inputFormat": "第一行输入四个整数 $n,x,y,z$。\n\n第二行输入 $n$ 个整数，表示排列 $a$。\n\n第三行输入 $n$ 个整数，表示排列 $b$。", "outputFormat": "一行输出一个整数，表示答案。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask #1（$10\\text{ pts}$）：$n\\le 10$。\n- Subtask #2（$25\\text{ pts}$）： $x=y=z$。\n- Subtask #3（$25\\text{ pts}$）：$n\\le 10^3$。**依赖 Subtask #1。**\n- Subtask #4（$40\\text{ pts}$）：无特殊性质。**依赖 Subtask #2 #3。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$a,b$ 为长度为 $n$ 的排列。$1\\le x,y,z\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CZOI-R3」消除序列", "background": "", "description": "有两个长为 $n$ 的排列 $a,b$，你可以做任意次操作：\n\n- 将 $a$ 循环左移一位。若在进行操作前 $a_1\\neq 0$，则消耗 $x$ 点代价。\n- 将 $a$ 循环右移一位。若在进行操作前 $a_1\\neq 0$，则消耗 $y$ 点代价。\n- 交换 $x,y$。消耗 $z$ 点代价。\n- 若 $a_1=b_1$，将 $b$ 循环左移一位，同时令 $a_1=0$。不消耗代价。\n\n求出让对于 $\\forall 1\\le i\\le n$ 有 $a_i=0$ 的最小代价，显然一定可以通过若干次操作达成目标。\n\n$\\dag$：设某次循环左移操作前序列为 $a_1,a_2,\\cdots,a_{n-1},a_n$，则操作后序列为 $a_2,\\cdots,a_{n-1},a_n,a_1$。设某次循环右移操作前序列为 $a_1,a_2,\\cdots,a_{n-1},a_n$，则操作后序列为 $a_n,a_1,a_2,\\cdots,a_{n-1}$。", "inputFormat": "第一行输入四个整数 $n,x,y,z$。\n\n第二行输入 $n$ 个整数，表示排列 $a$。\n\n第三行输入 $n$ 个整数，表示排列 $b$。", "outputFormat": "一行输出一个整数，表示答案。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask #1（$10\\text{ pts}$）：$n\\le 10$。\n- Subtask #2（$25\\text{ pts}$）： $x=y=z$。\n- Subtask #3（$25\\text{ pts}$）：$n\\le 10^3$。**依赖 Subtask #1。**\n- Subtask #4（$40\\text{ pts}$）：无特殊性质。**依赖 Subtask #2 #3。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$a,b$ 为长度为 $n$ 的排列。$1\\le x,y,z\\le 10^6$。", "locale": "zh-CN"}}}
