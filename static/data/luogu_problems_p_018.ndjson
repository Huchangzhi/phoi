{"pid": "P1361", "type": "P", "difficulty": 6, "samples": [["3\n4 2 1\n2 3 2\n1\n2 3 2 1 2", "11"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "网络流", "最小割"], "title": "小M的作物", "background": "", "description": "小 M 在 MC 里开辟了两块巨大的耕地 $A$ 和 $B$（你可以认为容量是无穷），现在，小 P 有 $n$ 种作物的种子，每种作物的种子有 $1$ 个（就是可以种一棵作物），编号为 $1$ 到 $n$。\n\n现在，第 $i$ 种作物种植在 $A$ 中种植可以获得 $a_i$ 的收益，在 $B$ 中种植可以获得 $b_i$ 的收益，而且，现在还有这么一种神奇的现象，就是某些作物共同种在一块耕地中可以获得额外的收益，小 M 找到了规则中共有 $m$ 种作物组合，第 $i$ 个组合中的作物共同种在 $A$ 中可以获得 $c_{1,i}$ 的额外收益，共同种在 $B$ 中可以获得 $c_{2,i}$ 的额外收益。\n\n小 M 很快的算出了种植的最大收益，但是他想要考考你，你能回答他这个问题么？", "inputFormat": "第一行一个整数 $n$，表示作物种数。\n\n第二行 $n$ 个整数，表示 $a_i$。\n\n第三行 $n$ 个整数，表示 $b_i$。\n\n第四行一个整数 $m$，表示组合种数。\n\n接下来 $m$ 行中，第 $i$ 行第一个整数 $k_i$，表示第 $i$ 个作物组合中的作物种数，接下来两个整数 $c_{1,i},c_{2,i}$，然后 $k_i$ 个整数，表示该组合中的作物编号。", "outputFormat": "只有一行，包括一个整数，表示最大收益。", "hint": "### 样例解释\n\n $A$ 耕地种作物 $1,2$，$B$ 耕地种作物 $3$，收益： $4+2+3+2=11$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1 \\le k < n \\le 10^3$，$1 \\le m \\le 10^3$。题目当中出现的所有权值均为不大于 $1000$ 的非负整数。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao M's Crops", "background": "", "description": "Xiao M opened two huge farmlands $A$ and $B$ in MC (you can assume their capacity is infinite). Now, Xiao P has seeds of $n$ crop types, exactly $1$ seed for each type (i.e., you can plant at most one plant of each type), numbered from $1$ to $n$.\n\nFor the $i$-th crop, planting it in $A$ yields a profit of $a_i$, and planting it in $B$ yields a profit of $b_i$. There is also a special phenomenon: certain sets of crops planted together on the same field yield an extra profit. Xiao M found $m$ such crop combinations in total. For the $i$-th combination, if all its crops are planted together in $A$, you gain an extra $c_{1,i}$ profit; if they are planted together in $B$, you gain an extra $c_{2,i}$ profit.\n\nXiao M quickly computed the maximum profit, but he wants to test you. Can you answer this question?", "inputFormat": "The first line contains an integer $n$, the number of crop types.\n\nThe second line contains $n$ integers, representing $a_i$.\n\nThe third line contains $n$ integers, representing $b_i$.\n\nThe fourth line contains an integer $m$, the number of combinations.\n\nEach of the next $m$ lines describes one combination: on the $i$-th line, the first integer $k_i$ is the number of crops in the $i$-th combination, followed by two integers $c_{1,i}, c_{2,i}$, then $k_i$ integers indicating the indices of the crops in this combination.", "outputFormat": "Output a single line containing one integer, the maximum profit.", "hint": "Sample Explanation:\n\nPlant crops $1, 2$ in field $A$, and crop $3$ in field $B$. Profit: $4+2+3+2=11$.\n\nConstraints:\n\nFor $100\\%$ of the testdata, $1 \\le k_i < n \\le 10^3$, $1 \\le m \\le 10^3$. All values that appear in the problem are non-negative integers not exceeding $1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小M的作物", "background": "", "description": "小 M 在 MC 里开辟了两块巨大的耕地 $A$ 和 $B$（你可以认为容量是无穷），现在，小 P 有 $n$ 种作物的种子，每种作物的种子有 $1$ 个（就是可以种一棵作物），编号为 $1$ 到 $n$。\n\n现在，第 $i$ 种作物种植在 $A$ 中种植可以获得 $a_i$ 的收益，在 $B$ 中种植可以获得 $b_i$ 的收益，而且，现在还有这么一种神奇的现象，就是某些作物共同种在一块耕地中可以获得额外的收益，小 M 找到了规则中共有 $m$ 种作物组合，第 $i$ 个组合中的作物共同种在 $A$ 中可以获得 $c_{1,i}$ 的额外收益，共同种在 $B$ 中可以获得 $c_{2,i}$ 的额外收益。\n\n小 M 很快的算出了种植的最大收益，但是他想要考考你，你能回答他这个问题么？", "inputFormat": "第一行一个整数 $n$，表示作物种数。\n\n第二行 $n$ 个整数，表示 $a_i$。\n\n第三行 $n$ 个整数，表示 $b_i$。\n\n第四行一个整数 $m$，表示组合种数。\n\n接下来 $m$ 行中，第 $i$ 行第一个整数 $k_i$，表示第 $i$ 个作物组合中的作物种数，接下来两个整数 $c_{1,i},c_{2,i}$，然后 $k_i$ 个整数，表示该组合中的作物编号。", "outputFormat": "只有一行，包括一个整数，表示最大收益。", "hint": "### 样例解释\n\n $A$ 耕地种作物 $1,2$，$B$ 耕地种作物 $3$，收益： $4+2+3+2=11$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1 \\le k < n \\le 10^3$，$1 \\le m \\le 10^3$。题目当中出现的所有权值均为不大于 $1000$ 的非负整数。", "locale": "zh-CN"}}}
{"pid": "P1362", "type": "P", "difficulty": 3, "samples": [["22 22\n", "1\n"], ["484 484\n", "0"], ["1 58\n", "12"], ["58 484\n", "24"], ["1000000000 1000000000\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "数学"], "title": "兔子数", "background": "", "description": "设 $S(N)$ 表示 $N$ 的各位数字之和，如 $S(484) = 4+8+4 = 16$， $S(22) = 2+2 = 4$。如果一个正整数满足 $S(x \\cdot x) = S(x) \\cdot S(x)$，我们称之为 Rabbit Number。比方说，$22$ 就是一个 Rabbit Number，因为 $S(484) = S(22) \\cdot S(22)$。\n\n现在，给出一个区间 $[L,R]$，求在该区间内的 Rabbit Number 的个数。", "inputFormat": "输入仅一行，为空格隔开的两个数 $L$ 和 $R$。", "outputFormat": "输出仅一行一个整数，表示所求 Rabbit Number 的个数。", "hint": "对于 $100 \\%$ 的数据，$1 \\le L \\le R \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Rabbit Number", "background": "", "description": "Let $S(N)$ denote the sum of the digits of $N$, such as $S(484) = 4+8+4 = 16$, $S(22) = 2+2 = 4$. If a positive integer satisfies $S(x \\cdot x) = S(x) \\cdot S(x)$, we call it a Rabbit Number. For example, $22$ is a Rabbit Number, because $S(484) = S(22) \\cdot S(22)$.\n\nNow, given an interval $[L,R]$, find the number of Rabbit Numbers within this interval.", "inputFormat": "The input consists of a single line with two numbers $L$ and $R$ separated by a space.", "outputFormat": "Output a single line containing one integer, the number of Rabbit Numbers in $[L,R]$.", "hint": "Constraints: For $100 \\%$ of the testdata, $1 \\le L \\le R \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "兔子数", "background": "", "description": "设 $S(N)$ 表示 $N$ 的各位数字之和，如 $S(484) = 4+8+4 = 16$， $S(22) = 2+2 = 4$。如果一个正整数满足 $S(x \\cdot x) = S(x) \\cdot S(x)$，我们称之为 Rabbit Number。比方说，$22$ 就是一个 Rabbit Number，因为 $S(484) = S(22) \\cdot S(22)$。\n\n现在，给出一个区间 $[L,R]$，求在该区间内的 Rabbit Number 的个数。", "inputFormat": "输入仅一行，为空格隔开的两个数 $L$ 和 $R$。", "outputFormat": "输出仅一行一个整数，表示所求 Rabbit Number 的个数。", "hint": "对于 $100 \\%$ 的数据，$1 \\le L \\le R \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1363", "type": "P", "difficulty": 4, "samples": [["5 4\n##.#\n##S#\n#..#\n#.##\n#..#\n5 4\n##.#\n##S#\n#..#\n..#.\n#.##\n", "Yes\nNo\n\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "广度优先搜索 BFS", "深度优先搜索 DFS", "栈"], "title": "幻象迷宫", "background": "（喵星人 LHX 和 WD 同心协力击退了汪星人的入侵，不幸的是，汪星人撤退之前给它们制造了一片幻象迷宫。）\n\nWD：呜呜，肿么办啊……\n\nLHX：momo...我们一定能走出去的！\n\nWD：嗯，+U+U！", "description": "幻象迷宫可以认为是无限大的，不过它由若干个 $N\\times M$ 的矩阵重复组成。矩阵中有的地方是道路，用 $\\verb!.!$ 表示；有的地方是墙，用 $\\verb!#!$ 表示。LHX 和 WD 所在的位置用 $\\verb!S!$ 表示。也就是对于迷宫中的一个点$(x,y)$，如果 $(x \\bmod n,y \\bmod m)$ 是 $\\verb!.!$ 或者 $\\verb!S!$，那么这个地方是道路；如果 $(x \\bmod n,y \\bmod m)$ 是$\\verb!#!$，那么这个地方是墙。LHX 和 WD 可以向上下左右四个方向移动，当然不能移动到墙上。\n\n请你告诉 LHX 和 WD，它们能否走出幻象迷宫（如果它们能走到距离起点无限远处，就认为能走出去）。如果不能的话，LHX 就只好启动城堡的毁灭程序了……当然不到万不得已，他不想这么做。", "inputFormat": "输入包含多组数据。\n\n每组数据的第一行是两个整数 $N,M$。\n\n接下来是一个 $N\\times M$ 的字符矩阵，表示迷宫里 $(0,0)$ 到 $(n-1,m-1)$ 这个矩阵单元。", "outputFormat": "对于每组数据，输出一个字符串，`Yes` 或者 `No`。", "hint": "- 对于 $30\\%$ 的数据，$1\\le N,M\\le 20$；\n- 对于 $50\\%$ 的数据，$1\\le N,M\\le 100$；\n- 对于 $100\\%$ 的数据，$1\\le N,M\\le 1500$，每个测试点不超过 $10$ 组数据。", "locale": "zh-CN", "translations": {"en": {"title": "Illusion Maze", "background": "(The cat-people LHX and WD joined forces to repel the dog-people’s invasion. Unfortunately, before retreating, the dog-people created an illusion maze for them.)\n\nWD: Boo-hoo, what should we do...\n\nLHX: Momo... We can definitely get out!\n\nWD: Mm, +U+U!", "description": "The illusion maze can be regarded as infinite, but it is formed by repeating several $N \\times M$ matrices. In the matrix, some cells are roads, denoted by \\verb!.!, and some cells are walls, denoted by \\verb!#!. The position of LHX and WD is denoted by \\verb!S!. That is, for a point $(x,y)$ in the maze, if $(x \\bmod n,y \\bmod m)$ is \\verb!.! or \\verb!S!, then this location is a road; if $(x \\bmod n,y \\bmod m)$ is \\verb!#!, then this location is a wall. LHX and WD can move in the four directions up, down, left, and right, and of course they cannot move into walls. Here, $n$ and $m$ refer to $N$ and $M$ respectively.\n\nPlease tell LHX and WD whether they can escape from the illusion maze (if they can reach positions at unbounded distance from the starting point, we consider that they can escape). Otherwise, LHX will have to activate the castle’s self-destruction program... but he really does not want to do that unless absolutely necessary.", "inputFormat": "The input contains multiple test cases.\n\nFor each test case, the first line contains two integers $N, M$.\n\nThen follows an $N \\times M$ character matrix, representing the cells from $(0,0)$ to $(n-1,m-1)$.", "outputFormat": "For each test case, output a string, \"Yes\" or \"No\".", "hint": "- For 30% of the testdata, $1 \\le N, M \\le 20$.\n- For 50% of the testdata, $1 \\le N, M \\le 100$.\n- For 100% of the testdata, $1 \\le N, M \\le 1500$, with no more than $10$ test cases per test point.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "幻象迷宫", "background": "（喵星人 LHX 和 WD 同心协力击退了汪星人的入侵，不幸的是，汪星人撤退之前给它们制造了一片幻象迷宫。）\n\nWD：呜呜，肿么办啊……\n\nLHX：momo...我们一定能走出去的！\n\nWD：嗯，+U+U！", "description": "幻象迷宫可以认为是无限大的，不过它由若干个 $N\\times M$ 的矩阵重复组成。矩阵中有的地方是道路，用 $\\verb!.!$ 表示；有的地方是墙，用 $\\verb!#!$ 表示。LHX 和 WD 所在的位置用 $\\verb!S!$ 表示。也就是对于迷宫中的一个点$(x,y)$，如果 $(x \\bmod n,y \\bmod m)$ 是 $\\verb!.!$ 或者 $\\verb!S!$，那么这个地方是道路；如果 $(x \\bmod n,y \\bmod m)$ 是$\\verb!#!$，那么这个地方是墙。LHX 和 WD 可以向上下左右四个方向移动，当然不能移动到墙上。\n\n请你告诉 LHX 和 WD，它们能否走出幻象迷宫（如果它们能走到距离起点无限远处，就认为能走出去）。如果不能的话，LHX 就只好启动城堡的毁灭程序了……当然不到万不得已，他不想这么做。", "inputFormat": "输入包含多组数据。\n\n每组数据的第一行是两个整数 $N,M$。\n\n接下来是一个 $N\\times M$ 的字符矩阵，表示迷宫里 $(0,0)$ 到 $(n-1,m-1)$ 这个矩阵单元。", "outputFormat": "对于每组数据，输出一个字符串，`Yes` 或者 `No`。", "hint": "- 对于 $30\\%$ 的数据，$1\\le N,M\\le 20$；\n- 对于 $50\\%$ 的数据，$1\\le N,M\\le 100$；\n- 对于 $100\\%$ 的数据，$1\\le N,M\\le 1500$，每个测试点不超过 $10$ 组数据。", "locale": "zh-CN"}}}
{"pid": "P1364", "type": "P", "difficulty": 3, "samples": [["5\t\t\t\t\t\t\n13 2 3\n4 0 0\n12 4 5\n20 0 0\n40 0 0\n", "81"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "树形数据结构", "广度优先搜索 BFS", "最短路", "树的重心"], "title": "医院设置", "background": "", "description": "设有一棵二叉树，如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kawht13x.png)\n\n其中，圈中的数字表示结点中居民的人口。圈边上数字表示结点编号，现在要求在某个结点上建立一个医院，使所有居民所走的路程之和为最小，同时约定，相邻接点之间的距离为 $1$。如上图中，若医院建在 $1$ 处，则距离和 $=4+12+2\\times20+2\\times40=136$；若医院建在 $3$ 处，则距离和 $=4\\times2+13+20+40=81$。", "inputFormat": "第一行一个整数 $n$，表示树的结点数。\n\n接下来的 $n$ 行每行描述了一个结点的状况，包含三个整数 $w, u, v$，其中 $w$ 为居民人口数，$u$ 为左链接（为 $0$ 表示无链接），$v$ 为右链接（为 $0$ 表示无链接）。", "outputFormat": "一个整数，表示最小距离和。\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 100$，$0 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Hospital Placement", "background": "", "description": "Given a binary tree as shown:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kawht13x.png)\n\nThe number inside each circle is the population at that node. The number beside each circle is the node index. Choose one node to build a hospital so that the total distance traveled by all residents is minimized. The distance between two adjacent nodes is $1$.\n\nFor example, if the hospital is built at node $1$, the total distance is $4 + 12 + 2 \\times 20 + 2 \\times 40 = 136$. If it is built at node $3$, the total distance is $4 \\times 2 + 13 + 20 + 40 = 81$.", "inputFormat": "The first line contains an integer $n$, the number of nodes in the tree.\n\nEach of the next $n$ lines describes one node with three integers $w, u, v$, where $w$ is the population at the node, $u$ is the left child (with $0$ meaning no child), and $v$ is the right child (with $0$ meaning no child).", "outputFormat": "Output a single integer, the minimum total distance.", "hint": "Constraints\n\nFor 100% of the testdata, it is guaranteed that $1 \\leq n \\leq 100$, $0 \\leq u, v \\leq n$, $1 \\leq w \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "医院设置", "background": "", "description": "设有一棵二叉树，如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kawht13x.png)\n\n其中，圈中的数字表示结点中居民的人口。圈边上数字表示结点编号，现在要求在某个结点上建立一个医院，使所有居民所走的路程之和为最小，同时约定，相邻接点之间的距离为 $1$。如上图中，若医院建在 $1$ 处，则距离和 $=4+12+2\\times20+2\\times40=136$；若医院建在 $3$ 处，则距离和 $=4\\times2+13+20+40=81$。", "inputFormat": "第一行一个整数 $n$，表示树的结点数。\n\n接下来的 $n$ 行每行描述了一个结点的状况，包含三个整数 $w, u, v$，其中 $w$ 为居民人口数，$u$ 为左链接（为 $0$ 表示无链接），$v$ 为右链接（为 $0$ 表示无链接）。", "outputFormat": "一个整数，表示最小距离和。\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 100$，$0 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1365", "type": "P", "difficulty": 4, "samples": [["4\n????", "4.1250"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "期望"], "title": "WJMZBMR打osu! / Easy", "background": "原 维护队列 参见 P1903", "description": "某一天 WJMZBMR 在打 osu，~~但是他太弱了，有些地方完全靠运气:(~~。\n\n我们来简化一下这个游戏的规则\n\n有 $n$ 次点击要做，成功了就是 `o`，失败了就是 `x`，分数是按 combo 计算的，连续 $a$ 个 combo 就有 $a\\times a$ 分，combo 就是极大的连续 `o`。\n\n比如`ooxxxxooooxxx`，分数就是 $2 \\times 2 + 4 \\times 4 = 4 +16=20$。\n\nSevenkplus 闲的慌就看他打了一盘，有些地方跟运气无关要么是 `o` 要么是 `x`，有些地方 `o` 或者 `x` 各有 $50\\%$ 的可能性，用 `?` 号来表示。\n\n比如 `oo?xx` 就是一个可能的输入。\n那么 WJMZBMR 这场 osu 的期望得分是多少呢？\n\n比如 `oo?xx` 的话，`?` 是 `o` 的话就是 `oooxx`（$9$），是x的话就是 `ooxxx`（$4$），期望自然就是 $(4+9)/2 =6.5$ 了。", "inputFormat": "第一行一个整数 $n$（$n\\le3\\times10^5$），表示点击的个数\n\n接下来一个字符串，每个字符都是 `o`，`x`，`?` 中的一个\n", "outputFormat": "一行一个浮点数表示答案\n\n四舍五入到小数点后 $4$ 位\n\n如果害怕精度跪建议用 long double 或者 extended。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "WJMZBMR Plays osu! / Easy", "background": "Original: Maintain Queue, see P1903.", "description": "One day WJMZBMR was playing osu, ~~but he is too weak; some parts rely entirely on luck :(~~.\n\nLet’s simplify the rules of the game.\n\nThere are $n$ clicks to make. A success is `o`, a miss is `x`. The score is computed by combos: a combo of length $a$ is worth $a\\times a$ points. A combo is a maximal consecutive block of `o`.\n\nFor example, for `ooxxxxooooxxx`, the score is $2 \\times 2 + 4 \\times 4 = 4 +16=20$.\n\nSome positions are fixed (either `o` or `x`), and some positions are random with $50\\%$ chance for each, denoted by `?`.\n\nFor example, `oo?xx` is a possible input. What is the expected score of this osu game?\n\nFor `oo?xx`, if `?` is `o`, then it becomes `oooxx` ($9$); if it is `x`, then it becomes `ooxxx` ($4$). The expected value is $(4+9)/2 =6.5$.", "inputFormat": "The first line contains an integer $n$ ($n\\le3\\times10^5$), the number of clicks.\n\nThe next line contains a string, where each character is one of `o`, `x`, `?`.", "outputFormat": "Output a single floating-point number: the answer.\n\nRound to $4$ decimal places.\n\nIf you are worried about precision, it is recommended to use long double or extended.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "WJMZBMR打osu! / Easy", "background": "原 维护队列 参见 P1903", "description": "某一天 WJMZBMR 在打 osu，~~但是他太弱了，有些地方完全靠运气:(~~。\n\n我们来简化一下这个游戏的规则\n\n有 $n$ 次点击要做，成功了就是 `o`，失败了就是 `x`，分数是按 combo 计算的，连续 $a$ 个 combo 就有 $a\\times a$ 分，combo 就是极大的连续 `o`。\n\n比如`ooxxxxooooxxx`，分数就是 $2 \\times 2 + 4 \\times 4 = 4 +16=20$。\n\nSevenkplus 闲的慌就看他打了一盘，有些地方跟运气无关要么是 `o` 要么是 `x`，有些地方 `o` 或者 `x` 各有 $50\\%$ 的可能性，用 `?` 号来表示。\n\n比如 `oo?xx` 就是一个可能的输入。\n那么 WJMZBMR 这场 osu 的期望得分是多少呢？\n\n比如 `oo?xx` 的话，`?` 是 `o` 的话就是 `oooxx`（$9$），是x的话就是 `ooxxx`（$4$），期望自然就是 $(4+9)/2 =6.5$ 了。", "inputFormat": "第一行一个整数 $n$（$n\\le3\\times10^5$），表示点击的个数\n\n接下来一个字符串，每个字符都是 `o`，`x`，`?` 中的一个\n", "outputFormat": "一行一个浮点数表示答案\n\n四舍五入到小数点后 $4$ 位\n\n如果害怕精度跪建议用 long double 或者 extended。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1366", "type": "P", "difficulty": 3, "samples": [["1\n3 5\n1 3 6\n1 3 3 5 5", "3"], ["1\n9 4\n1 2 3 4 5 6 7 8 9\n1 1 4 5", "2"], ["2\n3 5\n1 3 6\n1 3 3 5 5\n9 4\n1 2 3 4 5 6 7 8 9\n1 1 4 5", "3\n2"]], "limits": {"time": [1400], "memory": [131072]}, "tags": ["O2优化", "双指针 two-pointer"], "title": "有序表的合并", "background": "", "description": "给出两个数列 $a, b$，均按不降序排序。其中保证 $a$ 中没有重复的数字。\n\n现在请你求出：$a$ 中每一个数字在 $b$ 中出现了几次？", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n输入的第一行是一个整数，表示数据组数 $T$。接下来按顺序给出每组数据的输入信息：\n\n第一行为两个整数，依次表示 $a$ 数列的长度 $n$ 和 $b$ 数列的长度 $m$。  \n第二行有 $n$ 个整数表示数列 $a$，第 $i$ 个整数表示 $a_i$。  \n第三行有 $m$ 个整数表示数列 $b$，第 $i$ 个整数表示 $b_i$。", "outputFormat": "为了避免输出过大，对于每组数据，请你输出一行一个整数，表示数列 $a$ 的每个数在 $b$ 中出现次数的**按位异或和**。\n\n形式化的，设 $a_i$ 在 $b$ 中出现了 $c_i$ 次，则你需要输出 $c_1 \\bigoplus c_2 \\bigoplus \\dots \\bigoplus c_n$ 的值，其中 $\\bigoplus$ 表示按位异或操作。你可以参考提示来完成计算。", "hint": "### 样例 1 解释\n\n- $a_1 = 1$ 在 $b$ 中出现了 $1$ 次。\n- $a_2 = 3$ 在 $b$ 中出现了 $2$ 次。\n- $a_3 = 6$ 在 $b$ 中出现了 $0$ 次。\n\n故输出为 $1 \\bigoplus 2 = 3$。\n\n### 样例 2 解释\n\n$1, 4, 5$ 分别在 $b$ 中出现了 $2, 1, 1$ 次，故输出为 $2 \\bigoplus 1 \\bigoplus 1 = 2$。\n\n### 数据规模与约定\n\n对于全部的测试点，保证：\n- $1 \\leq T \\leq 10$；\n- $1 \\leq n, m \\leq 10^7$，$\\sum (n + m) \\leq  10^7$；\n- $1 \\leq a_i, b_i < 2^{64}$，且 $a_i < a_{i + 1}$，$b_i \\leq b_{i + 1}$。\n\n其中 $\\sum (n+m)$ 表示单测试点内所有 $n$ 与 $m$ 的和，即输入数列的总长度不超过 $10^7$。\n\n### 提示\n\n- 请注意大量数据读入对程序效率造成的影响，选择合适的读入方式，避免超时。\n- 请采用合适的数据类型存储变量，避免溢出。\n- 如果你不知道什么是按位异或和，可以在你的代码里添加如下的函数：\n\n```cpp\ntemplate <class T>\nT getXorSum(T *begin, T *end) {\n  T ret = 0;\n  for (T *it = begin; it != end; ++it) ret ^= *it;\n  return ret;\n}\n```\n这一函数的作用是计算传入数组（包括 `std::vector`）某一左闭右开区间的按位异或和，返回值类型与传入数组的类型相同，调用方法与 `std::sort` 类似，例如，要求数组 $a$ 的 $a_1 \\sim a_n$ 的按位异或和，则调用 `getXorSum(a + 1, a + 1 + n)`，求 $a_0 \\sim a_{n - 1}$ 的按位异或和，则调用 `getXorSum(a, a + n)`。如果 $a$ 是 `std::vector`，则将上述调用代码里的 `a` 均改为 `a.begin()` 即可。\n", "locale": "zh-CN", "translations": {"en": {"title": "Merging Sorted Sequences", "background": "", "description": "Given two sequences $a, b$, both sorted in non-decreasing order. It is guaranteed that there are no duplicate numbers in $a$.\n\nNow, for each number in $a$, determine how many times it appears in $b$.", "inputFormat": "There are multiple test cases in a single test file.\n\nThe first line contains an integer $T$, the number of test cases. Then, for each test case, the input is given as follows:\n- The first line contains two integers, the lengths of sequences $a$ and $b$, denoted by $n$ and $m$.\n- The second line contains $n$ integers representing sequence $a$, where the $i$-th integer is $a_i$.\n- The third line contains $m$ integers representing sequence $b$, where the $i$-th integer is $b_i$.", "outputFormat": "To avoid excessive output, for each test case, output a single integer on one line: the bitwise XOR sum of the occurrence counts of every number of $a$ in $b$.\n\nFormally, let $a_i$ appear $c_i$ times in $b$. You need to output $c_1 \\bigoplus c_2 \\bigoplus \\dots \\bigoplus c_n$, where $\\bigoplus$ denotes the bitwise XOR operation. You may refer to the Hint to complete the computation.", "hint": "### Explanation of Sample 1\n\n- $a_1 = 1$ appears $1$ time in $b$.\n- $a_2 = 3$ appears $2$ times in $b$.\n- $a_3 = 6$ appears $0$ times in $b$.\n\nTherefore, the output is $1 \\bigoplus 2 = 3$.\n\n### Explanation of Sample 2\n\n$1, 4, 5$ appear $2, 1, 1$ times in $b$, respectively, so the output is $2 \\bigoplus 1 \\bigoplus 1 = 2$.\n\n### Constraints\n\nFor all test files, it is guaranteed that:\n- $1 \\leq T \\leq 10$;\n- $1 \\leq n, m \\leq 10^7$, and $\\sum (n + m) \\leq 10^7$;\n- $1 \\leq a_i, b_i < 2^{64}$, and $a_i < a_{i + 1}$, $b_i \\leq b_{i + 1}$.\n\nHere, $\\sum (n + m)$ denotes the sum of all $n$ and $m$ within a single test file, i.e., the total length of the input sequences does not exceed $10^7$.\n\n### Notes\n\n- Pay attention to the impact of large input on program efficiency. Choose an appropriate input method to avoid timeouts.\n- Use suitable data types to store variables to avoid overflow.\n- If you do not know what a bitwise XOR sum is, you can add the following function to your code:\n\n```cpp\ntemplate <class T>\nT getXorSum(T *begin, T *end) {\n  T ret = 0;\n  for (T *it = begin; it != end; ++it) ret ^= *it;\n  return ret;\n}\n```\nThis function computes the bitwise XOR sum over a half-open interval of the given array (including `std::vector`). The return type matches the type of the input array. The usage is similar to `std::sort`. For example, to compute the bitwise XOR sum of $a_1 \\sim a_n$, call `getXorSum(a + 1, a + 1 + n)`. To compute the bitwise XOR sum of $a_0 \\sim a_{n - 1}$, call `getXorSum(a, a + n)`. If $a$ is a `std::vector`, replace `a` in the calls above with `a.begin()` accordingly.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "有序表的合并", "background": "", "description": "给出两个数列 $a, b$，均按不降序排序。其中保证 $a$ 中没有重复的数字。\n\n现在请你求出：$a$ 中每一个数字在 $b$ 中出现了几次？", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n输入的第一行是一个整数，表示数据组数 $T$。接下来按顺序给出每组数据的输入信息：\n\n第一行为两个整数，依次表示 $a$ 数列的长度 $n$ 和 $b$ 数列的长度 $m$。  \n第二行有 $n$ 个整数表示数列 $a$，第 $i$ 个整数表示 $a_i$。  \n第三行有 $m$ 个整数表示数列 $b$，第 $i$ 个整数表示 $b_i$。", "outputFormat": "为了避免输出过大，对于每组数据，请你输出一行一个整数，表示数列 $a$ 的每个数在 $b$ 中出现次数的**按位异或和**。\n\n形式化的，设 $a_i$ 在 $b$ 中出现了 $c_i$ 次，则你需要输出 $c_1 \\bigoplus c_2 \\bigoplus \\dots \\bigoplus c_n$ 的值，其中 $\\bigoplus$ 表示按位异或操作。你可以参考提示来完成计算。", "hint": "### 样例 1 解释\n\n- $a_1 = 1$ 在 $b$ 中出现了 $1$ 次。\n- $a_2 = 3$ 在 $b$ 中出现了 $2$ 次。\n- $a_3 = 6$ 在 $b$ 中出现了 $0$ 次。\n\n故输出为 $1 \\bigoplus 2 = 3$。\n\n### 样例 2 解释\n\n$1, 4, 5$ 分别在 $b$ 中出现了 $2, 1, 1$ 次，故输出为 $2 \\bigoplus 1 \\bigoplus 1 = 2$。\n\n### 数据规模与约定\n\n对于全部的测试点，保证：\n- $1 \\leq T \\leq 10$；\n- $1 \\leq n, m \\leq 10^7$，$\\sum (n + m) \\leq  10^7$；\n- $1 \\leq a_i, b_i < 2^{64}$，且 $a_i < a_{i + 1}$，$b_i \\leq b_{i + 1}$。\n\n其中 $\\sum (n+m)$ 表示单测试点内所有 $n$ 与 $m$ 的和，即输入数列的总长度不超过 $10^7$。\n\n### 提示\n\n- 请注意大量数据读入对程序效率造成的影响，选择合适的读入方式，避免超时。\n- 请采用合适的数据类型存储变量，避免溢出。\n- 如果你不知道什么是按位异或和，可以在你的代码里添加如下的函数：\n\n```cpp\ntemplate <class T>\nT getXorSum(T *begin, T *end) {\n  T ret = 0;\n  for (T *it = begin; it != end; ++it) ret ^= *it;\n  return ret;\n}\n```\n这一函数的作用是计算传入数组（包括 `std::vector`）某一左闭右开区间的按位异或和，返回值类型与传入数组的类型相同，调用方法与 `std::sort` 类似，例如，要求数组 $a$ 的 $a_1 \\sim a_n$ 的按位异或和，则调用 `getXorSum(a + 1, a + 1 + n)`，求 $a_0 \\sim a_{n - 1}$ 的按位异或和，则调用 `getXorSum(a, a + n)`。如果 $a$ 是 `std::vector`，则将上述调用代码里的 `a` 均改为 `a.begin()` 即可。\n", "locale": "zh-CN"}}}
{"pid": "P1367", "type": "P", "difficulty": 3, "samples": [["4 1\n1 1\n5 1\n3 -1 \n10 1\n", "2 0\n6 1\n2 0\n11 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "蚂蚁", "background": "", "description": "有许多蚂蚁在一根无限长的木棍上，每一只蚂蚁都有一个初始位置和初始朝向（任意两只蚂蚁的初始位置不同）。蚂蚁们以每秒一个单位的速度向前移动，当两只蚂蚁相遇时，它们会掉头（掉头时间忽略不计）。现给出每只蚂蚁的初始位置和初始朝向，请你计算出它们在 $t$ 秒后的位置和朝向。\n", "inputFormat": "第一行，两个空格隔开的整数 $n,t$（代表蚂蚁数 $n$ 和时间 $t$）。\n\n第 $2\\sim n+1$ 行每行两个整数，第 $i+1$ 行代表第 $i$ 只蚂蚁的初始位置 $a_i$ 及初始朝向 $b_i$（$b_i=1$ 时蚂蚁朝右，$b_i=-1$ 时蚂蚁朝左）。\n", "outputFormat": "共 $n$ 行，每行两个整数，第 $i$ 行代表 $t$ 秒后第 $i$ 只蚂蚁的位置及朝向（$-1$ 表示朝左，$1$ 表示朝右，$0$ 表示正在转向中）。", "hint": "### 数据范围及约定\n\n- 对于 $40\\%$ 的数据，$1\\le n\\le 100$；\n- 对于 $80\\%$ 的数据，$1\\le n\\le 10^4$，$0\\le t\\le 1000$；\n- 对于 $100\\%$ 的数据，$n\\le 10^5$，$0\\le t\\le 10^5$，$|a_i|\\le 10^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Ants", "background": "", "description": "There are many ants on an infinitely long stick. Each ant has an initial position and an initial direction (no two ants share the same initial position). The ants move forward in their current direction at a speed of 1 unit per second. When two ants meet, they turn around (the turning time is negligible). Given the initial position and initial direction of each ant, please compute their positions and directions after $t$ seconds.", "inputFormat": "The first line contains two space-separated integers $n, t$ (the number of ants $n$ and the time $t$).\n\nLines $2$ to $n+1$ each contain two integers. Line $i+1$ gives the initial position $a_i$ and initial direction $b_i$ of the $i$-th ant ($b_i = 1$ means facing right, $b_i = -1$ means facing left).", "outputFormat": "Output $n$ lines, each containing two integers. The $i$-th line represents the position and direction of the $i$-th ant after $t$ seconds ($-1$ means facing left, $1$ means facing right, $0$ means currently turning).", "hint": "### Constraints and Conventions\n\n- For $40\\%$ of the testdata, $1 \\le n \\le 100$.\n- For $80\\%$ of the testdata, $1 \\le n \\le 10^4$, $0 \\le t \\le 1000$.\n- For $100\\%$ of the testdata, $n \\le 10^5$, $0 \\le t \\le 10^5$, $|a_i| \\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "蚂蚁", "background": "", "description": "有许多蚂蚁在一根无限长的木棍上，每一只蚂蚁都有一个初始位置和初始朝向（任意两只蚂蚁的初始位置不同）。蚂蚁们以每秒一个单位的速度向前移动，当两只蚂蚁相遇时，它们会掉头（掉头时间忽略不计）。现给出每只蚂蚁的初始位置和初始朝向，请你计算出它们在 $t$ 秒后的位置和朝向。\n", "inputFormat": "第一行，两个空格隔开的整数 $n,t$（代表蚂蚁数 $n$ 和时间 $t$）。\n\n第 $2\\sim n+1$ 行每行两个整数，第 $i+1$ 行代表第 $i$ 只蚂蚁的初始位置 $a_i$ 及初始朝向 $b_i$（$b_i=1$ 时蚂蚁朝右，$b_i=-1$ 时蚂蚁朝左）。\n", "outputFormat": "共 $n$ 行，每行两个整数，第 $i$ 行代表 $t$ 秒后第 $i$ 只蚂蚁的位置及朝向（$-1$ 表示朝左，$1$ 表示朝右，$0$ 表示正在转向中）。", "hint": "### 数据范围及约定\n\n- 对于 $40\\%$ 的数据，$1\\le n\\le 100$；\n- 对于 $80\\%$ 的数据，$1\\le n\\le 10^4$，$0\\le t\\le 1000$；\n- 对于 $100\\%$ 的数据，$n\\le 10^5$，$0\\le t\\le 10^5$，$|a_i|\\le 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P1368", "type": "P", "difficulty": 5, "samples": [["10\n10 9 8 7 6 5 4 3 2 1\n", "1 10 9 8 7 6 5 4 3 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "后缀自动机 SAM"], "title": "工艺", "background": "新模板题：[P13270 【模板】最小表示法](https://www.luogu.com.cn/problem/P13270)。", "description": "小敏和小燕是一对好朋友。\n\n他们正在玩一种神奇的游戏，叫 Minecraft。\n\n他们现在要做一个由方块构成的长条工艺品。但是方块现在是乱的，而且由于机器的要求，他们只能做到把这个工艺品最左边的方块放到最右边。\n\n他们想，在仅这一个操作下，最漂亮的工艺品能多漂亮。\n\n两个工艺品美观的比较方法是，从头开始比较，如果第 $i$ 个位置上方块不一样那么谁的瑕疵度小，那么谁就更漂亮，如果一样那么继续比较第 $i+1$ 个方块。如果全都一样，那么这两个工艺品就一样漂亮。", "inputFormat": "第一行一个整数 $n$，代表方块的数目。\n\n第二行 $n$ 个整数，每个整数按从左到右的顺序输出方块瑕疵度的值，保证其小于 $30$。", "outputFormat": "一行 $n$ 个整数，代表最美观工艺品从左到右瑕疵度的值。", "hint": "- 对于 $20\\%$ 的数据，$n\\le 1000$；\n- 对于 $40\\%$ 的数据，$n\\le 10^4$；\n- 对于 $100\\%$ 的数据，$n\\le 3\\times 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Craft", "background": "New template problem: [P13270 [Template] Minimal Representation](https://www.luogu.com.cn/problem/P13270).", "description": "Xiaomin and Xiaoyan are good friends.\n\nThey are playing a magical game called Minecraft.\n\nThey are going to make a long strip craftwork composed of blocks. However, the blocks are currently in disorder, and due to the machine’s limitation, they can only move the leftmost block of the craftwork to the right end.\n\nThey want to know, using only this single operation, how pretty the craftwork can become.\n\nTo compare the beauty of two craftworks, compare them from the beginning. If at position $i$ the blocks differ, the one with the smaller defect score is prettier; if they are the same, continue to compare the block at position $i+1$. If all positions are the same, then the two craftworks are equally pretty.", "inputFormat": "The first line contains an integer $n$, the number of blocks.\n\nThe second line contains $n$ integers, which are the defect scores of the blocks from left to right. Each score is less than $30$.", "outputFormat": "Output one line with $n$ integers, which are the defect scores from left to right of the prettiest craftwork.", "hint": "- For $20\\%$ of the testdata, $n \\le 1000$.\n- For $40\\%$ of the testdata, $n \\le 10^4$.\n- For $100\\%$ of the testdata, $n \\le 3\\times 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "工艺", "background": "新模板题：[P13270 【模板】最小表示法](https://www.luogu.com.cn/problem/P13270)。", "description": "小敏和小燕是一对好朋友。\n\n他们正在玩一种神奇的游戏，叫 Minecraft。\n\n他们现在要做一个由方块构成的长条工艺品。但是方块现在是乱的，而且由于机器的要求，他们只能做到把这个工艺品最左边的方块放到最右边。\n\n他们想，在仅这一个操作下，最漂亮的工艺品能多漂亮。\n\n两个工艺品美观的比较方法是，从头开始比较，如果第 $i$ 个位置上方块不一样那么谁的瑕疵度小，那么谁就更漂亮，如果一样那么继续比较第 $i+1$ 个方块。如果全都一样，那么这两个工艺品就一样漂亮。", "inputFormat": "第一行一个整数 $n$，代表方块的数目。\n\n第二行 $n$ 个整数，每个整数按从左到右的顺序输出方块瑕疵度的值，保证其小于 $30$。", "outputFormat": "一行 $n$ 个整数，代表最美观工艺品从左到右瑕疵度的值。", "hint": "- 对于 $20\\%$ 的数据，$n\\le 1000$；\n- 对于 $40\\%$ 的数据，$n\\le 10^4$；\n- 对于 $100\\%$ 的数据，$n\\le 3\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1369", "type": "P", "difficulty": 3, "samples": [["10\r\n2 3\r\n9 2\r\n7 4\r\n3 4\r\n5 7\r\n1 5\r\n10 4\r\n10 6\r\n11 4\r\n4 6\r\n", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心"], "title": "矩形", "background": "", "description": "给出平面上的 $n$ 个点，请找出一个边与坐标轴平行的矩形，使得它的边界上有尽量多的点。\n", "inputFormat": "第一行一个整数 $n$，为平面内点的个数。\n\n第 $2\\sim n+1$ 行每行两个整数，为点的横、纵坐标。\n", "outputFormat": "只有一个数，为所取矩形边界上能包含尽量多的点的个数。\n", "hint": "### 数据范围及约定\n\n- 对于 $40\\%$ 的数据，$1\\le n\\le 30$；\n- 对于 $100\\%$ 的数据，$1\\le n\\le 300$，各点的横、纵坐标在 $[1,100]$ 范围内。\n", "locale": "zh-CN", "translations": {"en": {"title": "Rectangle", "background": "", "description": "Given $n$ points on the plane, find an axis-aligned rectangle whose boundary contains as many points as possible.", "inputFormat": "The first line contains an integer $n$, the number of points in the plane.\nEach of lines $2\\sim n+1$ contains two integers, the $x$- and $y$-coordinates of a point.", "outputFormat": "Output a single integer: the maximum number of points that can lie on the boundary of the chosen rectangle.", "hint": "Constraints and Notes\n- For $40\\%$ of the data, $1 \\le n \\le 30$.\n- For $100\\%$ of the data, $1 \\le n \\le 300$, and each coordinate lies in the range $[1,100]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "矩形", "background": "", "description": "给出平面上的 $n$ 个点，请找出一个边与坐标轴平行的矩形，使得它的边界上有尽量多的点。\n", "inputFormat": "第一行一个整数 $n$，为平面内点的个数。\n\n第 $2\\sim n+1$ 行每行两个整数，为点的横、纵坐标。\n", "outputFormat": "只有一个数，为所取矩形边界上能包含尽量多的点的个数。\n", "hint": "### 数据范围及约定\n\n- 对于 $40\\%$ 的数据，$1\\le n\\le 30$；\n- 对于 $100\\%$ 的数据，$1\\le n\\le 300$，各点的横、纵坐标在 $[1,100]$ 范围内。\n", "locale": "zh-CN"}}}
{"pid": "P1370", "type": "P", "difficulty": 5, "samples": [["8\r\n1 9 9 8 0 3 2 1", "814"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "洛谷原创", "生成树", "洛谷月赛"], "title": "Charlie 的云笔记序列", "background": "Charlie 是 oiinhand 的忠实粉丝。他有使用 oih 云笔记记录自己的题解的习惯。只有一点一滴的积累才能留下自己的足迹。\n\noih 云笔记有什么特点吗？\n\noih 的站长 soha 表示，目前 oih2 的云笔记功能比较简陋，但是正在开发 oih3 中的新版云笔记功能将是世界上最适合 oier 的储藏笔记的工具。\n\n首先，新版云笔记支持 markdown 功能，并且可以实时预览，插入公式图片都不是问题。实时自动保存，不用担心突然断电啊文档消失，而且不管在哪里都可以看！\n\n其次，可以一键生成题解模板摘要，不用各种复制粘贴了，超省事！\n\n再者，云笔记可以给其他同学分享自己的笔记，共同进步。写完了笔记，还可以一键向洛谷投稿呢！\n\n然而 Charlie 最喜欢的功能是 oih 的题目收藏。现在他收藏了一系列题目，但是觉得不过瘾所以正在玩弄这个功能。", "description": "某天，Charlie 将收藏的题目抽象为一个序列。$a=[a_1,a_2,a_3,\\cdots,a_{n-1},a_n]$。\n\n设 $a[l:r]$ 表示序列 ${a_i}$ 第 $l$ 个数到第 $r$ 个数之间的子串，其中 $1 \\le l \\le r \\le n$。形式化地，$a[l:r]={a_l,a_{l+1},a_{l+2},\\cdots,a_{r-1},a_r}$。比如说，$a=[9,8,0,3,2,1]$，那么 $a[2:5]=[8,0,3,2]$。\n\nCharlie 对序列 $[a_i]$ 定义了一个函数 $F(l,r)$，表示序列 $a[l:r]$ 的本质不同的子序列个数。特别地，一个空序列也被当作一个本质不同的子序列。\n\n序列 $a[l:r]$ 的子序列定义为 $[a_{i_1},a_{i_2},a_{i_3},\\cdots,a_{i_{k-1}},a_{i_k}]$，其中 $l \\le i_1<i_2<i_3<\\cdots<i_{k-1}<i_k \\le r$。比如说，$a=[9,8,0,3,2,1]$，那么 $[8,3,2]$ 是 $a[2:5]=[8,0,3,2]$ 的一个子序列。\n\n长度为 $n$ 的序列 $a$ 和长度为 $m$ 的序列 $b$ 被称作本质不同的，当且仅当 $n\\neq m$，或存在 $i$，使得 $a_i \\neq b_i$。反之，则称这 $2$ 个序列是本质相同的。比如说，$[9,8]$ 和 $[9,7]$ 是本质不同的，$[9,8]$ 和 $[9,8,7]$ 也是本质不同的，而 $[9,8]$ 和 $[9,8]$ 是本质相同的。\n\n举个例子，设 $a=[1,9,9,8,0,3,2,1]$，那么 $F(1,3)=6$，因为 $a[1:3]=[1,9,9]$ 有 $6$ 个子序列：$[],[1],[9],[1,9],[9,9],[1,9,9]$。\n\n现在 Charlie 想知道，$\\sum _{1\\le l\\le r\\le n} F(l,r)$ 的值是多少。由于这个数可能很大，请输出它对 $998244353$（$7\\times 17\\times 2^{23}+1$，一个质数）取模后的结果。", "inputFormat": "第一行一个整数 $n$，表示序列 $a$ 的长度。\n\n第二行包括 $n$ 个整数，表示 $a_1,a_2,a_3,\\cdots a_{n-1},a_n$。", "outputFormat": "一行，一个整数表示 $\\sum _{1\\le l\\le r\\le n} F(l,r)$ 的值对 $998244353$ 取模后的结果。", "hint": "- 对于 $10\\%$ 的数据，$1\\le n \\le 10$；\n- 对于 $30\\%$ 的数据，$1 \\le n \\le 100$；\n- 对于 $50\\%$ 的数据，$1\\le n \\le 1000$，$0 \\le a_i \\le 10^5$；\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$|a_i| \\le 10^9$。\n\noiinhand 3.0 正在开发中。\n\n这将是 oiers 都需要的工具，它不仅集合了全网所有大型 OJ 的资源（题目、题解）而且针对用户还可以将自己在其他 OJ 评测过的代码储存下来，并且有超贴心的云笔记功能，帮助大家最大效率练习。\n\nsoha 借此地征求意见，有奖哦！<http://www.wenjuan.com/s/M7fqIv/>", "locale": "zh-CN", "translations": {"en": {"title": "Charlie's Cloud Notes Sequence", "background": "Charlie is a loyal fan of oiinhand. He has the habit of using oih cloud notes to record his problem solutions. Only bit-by-bit accumulation can leave his own footprints.\n\nDoes oih cloud notes have any special features?\n\noih’s admin soha says that the current cloud notes in oih2 are relatively simple, but the new cloud notes under development for oih3 will be the best tool in the world for OIers to store their notes.\n\nFirst, the new cloud notes support Markdown with real-time preview; inserting formulas and images is not a problem. It saves automatically in real time, so you do not need to worry about sudden power outages or document loss, and you can view it anywhere!\n\nSecond, it can generate a problem-solution template summary with one click, so you no longer need to copy and paste. Super convenient!\n\nMoreover, cloud notes can be shared with other classmates for mutual improvement. After finishing a note, you can submit it to Luogu with one click!\n\nHowever, Charlie’s favorite feature is oih’s problem collection. He has now collected a series of problems, but he feels it is not enough, so he is playing with this feature.", "description": "One day, Charlie abstracts his collected problems into a sequence. $a = [a_1, a_2, a_3, \\cdots, a_{n-1}, a_n]$.\n\nLet $a[l:r]$ denote the subarray of the sequence $\\{a_i\\}$ from the $l$-th element to the $r$-th element, where $1 \\le l \\le r \\le n$. Formally, $a[l:r] = \\{a_l, a_{l+1}, a_{l+2}, \\cdots, a_{r-1}, a_r\\}$. For example, if $a = [9, 8, 0, 3, 2, 1]$, then $a[2:5] = [8, 0, 3, 2]$.\n\nCharlie defines a function $F(l, r)$ on the sequence $[a_i]$, which denotes the number of essentially different subsequences of $a[l:r]$. In particular, the empty sequence is also counted as one essentially different subsequence.\n\nA subsequence of $a[l:r]$ is defined as $[a_{i_1}, a_{i_2}, a_{i_3}, \\cdots, a_{i_{k-1}}, a_{i_k}]$, where $l \\le i_1 < i_2 < i_3 < \\cdots < i_{k-1} < i_k \\le r$. For example, if $a = [9, 8, 0, 3, 2, 1]$, then $[8, 3, 2]$ is a subsequence of $a[2:5] = [8, 0, 3, 2]$.\n\nA sequence $a$ of length $n$ and a sequence $b$ of length $m$ are called essentially different if and only if $n \\ne m$, or there exists $i$ such that $a_i \\ne b_i$. Otherwise, the two sequences are called essentially the same. For example, $[9, 8]$ and $[9, 7]$ are essentially different; $[9, 8]$ and $[9, 8, 7]$ are also essentially different; while $[9, 8]$ and $[9, 8]$ are essentially the same.\n\nFor example, let $a = [1, 9, 9, 8, 0, 3, 2, 1]$. Then $F(1, 3) = 6$, because $a[1:3] = [1, 9, 9]$ has $6$ subsequences: $[], [1], [9], [1, 9], [9, 9], [1, 9, 9]$.\n\nNow Charlie wants to know the value of $\\sum_{1 \\le l \\le r \\le n} F(l, r)$. Since this number may be large, please output it modulo $998244353$ ($7 \\times 17 \\times 2^{23} + 1$, a prime).", "inputFormat": "The first line contains an integer $n$, denoting the length of the sequence $a$.\n\nThe second line contains $n$ integers, denoting $a_1, a_2, a_3, \\cdots, a_{n-1}, a_n$.", "outputFormat": "One line containing a single integer: the value of $\\sum_{1 \\le l \\le r \\le n} F(l, r)$ modulo $998244353$.", "hint": "- For $10\\%$ of the testdata, $1 \\le n \\le 10$.\n- For $30\\%$ of the testdata, $1 \\le n \\le 100$.\n- For $50\\%$ of the testdata, $1 \\le n \\le 1000$, $0 \\le a_i \\le 10^5$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $|a_i| \\le 10^9$.\n\noiinhand 3.0 is under development.\n\nThis will be a must-have tool for OIers. It not only aggregates resources (problems, solutions) from all major OJs across the web, but also allows users to store code they have been judged on other OJs, and it has a very considerate cloud notes feature to help everyone practice with maximum efficiency.\n\nsoha is soliciting feedback here, with rewards! <http://www.wenjuan.com/s/M7fqIv/>\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Charlie 的云笔记序列", "background": "Charlie 是 oiinhand 的忠实粉丝。他有使用 oih 云笔记记录自己的题解的习惯。只有一点一滴的积累才能留下自己的足迹。\n\noih 云笔记有什么特点吗？\n\noih 的站长 soha 表示，目前 oih2 的云笔记功能比较简陋，但是正在开发 oih3 中的新版云笔记功能将是世界上最适合 oier 的储藏笔记的工具。\n\n首先，新版云笔记支持 markdown 功能，并且可以实时预览，插入公式图片都不是问题。实时自动保存，不用担心突然断电啊文档消失，而且不管在哪里都可以看！\n\n其次，可以一键生成题解模板摘要，不用各种复制粘贴了，超省事！\n\n再者，云笔记可以给其他同学分享自己的笔记，共同进步。写完了笔记，还可以一键向洛谷投稿呢！\n\n然而 Charlie 最喜欢的功能是 oih 的题目收藏。现在他收藏了一系列题目，但是觉得不过瘾所以正在玩弄这个功能。", "description": "某天，Charlie 将收藏的题目抽象为一个序列。$a=[a_1,a_2,a_3,\\cdots,a_{n-1},a_n]$。\n\n设 $a[l:r]$ 表示序列 ${a_i}$ 第 $l$ 个数到第 $r$ 个数之间的子串，其中 $1 \\le l \\le r \\le n$。形式化地，$a[l:r]={a_l,a_{l+1},a_{l+2},\\cdots,a_{r-1},a_r}$。比如说，$a=[9,8,0,3,2,1]$，那么 $a[2:5]=[8,0,3,2]$。\n\nCharlie 对序列 $[a_i]$ 定义了一个函数 $F(l,r)$，表示序列 $a[l:r]$ 的本质不同的子序列个数。特别地，一个空序列也被当作一个本质不同的子序列。\n\n序列 $a[l:r]$ 的子序列定义为 $[a_{i_1},a_{i_2},a_{i_3},\\cdots,a_{i_{k-1}},a_{i_k}]$，其中 $l \\le i_1<i_2<i_3<\\cdots<i_{k-1}<i_k \\le r$。比如说，$a=[9,8,0,3,2,1]$，那么 $[8,3,2]$ 是 $a[2:5]=[8,0,3,2]$ 的一个子序列。\n\n长度为 $n$ 的序列 $a$ 和长度为 $m$ 的序列 $b$ 被称作本质不同的，当且仅当 $n\\neq m$，或存在 $i$，使得 $a_i \\neq b_i$。反之，则称这 $2$ 个序列是本质相同的。比如说，$[9,8]$ 和 $[9,7]$ 是本质不同的，$[9,8]$ 和 $[9,8,7]$ 也是本质不同的，而 $[9,8]$ 和 $[9,8]$ 是本质相同的。\n\n举个例子，设 $a=[1,9,9,8,0,3,2,1]$，那么 $F(1,3)=6$，因为 $a[1:3]=[1,9,9]$ 有 $6$ 个子序列：$[],[1],[9],[1,9],[9,9],[1,9,9]$。\n\n现在 Charlie 想知道，$\\sum _{1\\le l\\le r\\le n} F(l,r)$ 的值是多少。由于这个数可能很大，请输出它对 $998244353$（$7\\times 17\\times 2^{23}+1$，一个质数）取模后的结果。", "inputFormat": "第一行一个整数 $n$，表示序列 $a$ 的长度。\n\n第二行包括 $n$ 个整数，表示 $a_1,a_2,a_3,\\cdots a_{n-1},a_n$。", "outputFormat": "一行，一个整数表示 $\\sum _{1\\le l\\le r\\le n} F(l,r)$ 的值对 $998244353$ 取模后的结果。", "hint": "- 对于 $10\\%$ 的数据，$1\\le n \\le 10$；\n- 对于 $30\\%$ 的数据，$1 \\le n \\le 100$；\n- 对于 $50\\%$ 的数据，$1\\le n \\le 1000$，$0 \\le a_i \\le 10^5$；\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$|a_i| \\le 10^9$。\n\noiinhand 3.0 正在开发中。\n\n这将是 oiers 都需要的工具，它不仅集合了全网所有大型 OJ 的资源（题目、题解）而且针对用户还可以将自己在其他 OJ 评测过的代码储存下来，并且有超贴心的云笔记功能，帮助大家最大效率练习。\n\nsoha 借此地征求意见，有奖哦！<http://www.wenjuan.com/s/M7fqIv/>", "locale": "zh-CN"}}}
{"pid": "P1371", "type": "P", "difficulty": 3, "samples": [["5\nNOIOI", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "洛谷原创", "洛谷月赛"], "title": "NOI元丹", "background": null, "description": "小A打算开始炼 $\\texttt{NOI}$ 元丹（什么鬼），据说吃了可以提高 $\\texttt{NOI}$ 时的成绩。\n\n是这么炼的。元丹有三种元核，`N`、`O`、`I`。现有很多个这样原核，按顺序排成一行。炼元丹时，从左往右分别挑出 `N`、`O`、`I` 三个原核吞下。\n\n现在他关心，有几种服用方式……且慢！\n\n他觉得服用方式太少，以至于不能成仙。所以他可以通过某个途径，得到 `N`、`O`、`I` 的三种原核中的**任意一个**，至于哪一种由他决定。然后他将获得这个原核的插入到这一排原核中的任意位置（包括最前最后）。\n\n现在你要知道，新的元核序列中能有多少种 `N`、`O`、`I` 的取出方式。子序列的字母并不要求连续。", "inputFormat": "第一行，一个整数 $N$，表示字符串的长度。\n\n第二行，一行字符串，里面只有只有 `N`、`O`、`I` 三种字母。", "outputFormat": "表示出最多可以提炼出来的 $\\texttt{NOI}$ 元丹的方案种数。", "hint": "样例解释：\n\n他可以获取一个 `N` 元核，加到最前面。\n\n```plain\nNNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI\n~ ~~   | ~ ~  ~ | ~   ~~ |  ~~~   |  ~~  ~ |  ~  ~~\n```\n对于 $30\\%$ 的数据 $N \\le 200$。\n\n对于 $50\\%$ 的数据 $N \\le 2000$。\n\n对于 $100\\%$ 的数据 $3 \\le N \\le 10 ^ 5$。", "locale": "zh-CN", "translations": {"en": {"title": "NOI Yuandan", "background": "", "description": "Xiao A plans to start refining the $\\texttt{NOI}$ \"Yuandan\" (whatever that is). It is said that taking it can improve one’s performance in $\\texttt{NOI}$.\n\nHere is how it is refined. The Yuandan has three kinds of cores: `N`, `O`, and `I`. There are many such cores arranged in a line in order. During refinement, he picks, from left to right, an `N`, then an `O`, then an `I`, and swallows them.\n\nNow he wonders how many ways there are to take it... Hold on!\n\nHe feels the number of ways is too few to become immortal. So he can, by some means, obtain any one of the three types of cores `N`, `O`, `I` (he may choose which type). Then he inserts this acquired core at any position in the line (including before the first and after the last).\n\nYou need to find, in the new sequence of cores, how many ways there are to take out `N`, `O`, `I`. The letters in the substring do not need to be consecutive.", "inputFormat": "- The first line contains an integer $N$, the length of the string.\n- The second line contains a string consisting only of the letters `N`, `O`, and `I`.", "outputFormat": "Output the maximum number of ways to refine the $\\texttt{NOI}$ Yuandan.", "hint": "Sample explanation:\n\nHe can obtain an `N` core and add it to the front.\n\n```plain\nNNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI\n~ ~~   | ~ ~  ~ | ~   ~~ |  ~~~   |  ~~  ~ |  ~  ~~\n```\nConstraints:\n- For 30% of the testdata, $N \\le 200$.\n- For 50% of the testdata, $N \\le 2000$.\n- For 100% of the testdata, $3 \\le N \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "NOI元丹", "background": null, "description": "小A打算开始炼 $\\texttt{NOI}$ 元丹（什么鬼），据说吃了可以提高 $\\texttt{NOI}$ 时的成绩。\n\n是这么炼的。元丹有三种元核，`N`、`O`、`I`。现有很多个这样原核，按顺序排成一行。炼元丹时，从左往右分别挑出 `N`、`O`、`I` 三个原核吞下。\n\n现在他关心，有几种服用方式……且慢！\n\n他觉得服用方式太少，以至于不能成仙。所以他可以通过某个途径，得到 `N`、`O`、`I` 的三种原核中的**任意一个**，至于哪一种由他决定。然后他将获得这个原核的插入到这一排原核中的任意位置（包括最前最后）。\n\n现在你要知道，新的元核序列中能有多少种 `N`、`O`、`I` 的取出方式。子序列的字母并不要求连续。", "inputFormat": "第一行，一个整数 $N$，表示字符串的长度。\n\n第二行，一行字符串，里面只有只有 `N`、`O`、`I` 三种字母。", "outputFormat": "表示出最多可以提炼出来的 $\\texttt{NOI}$ 元丹的方案种数。", "hint": "样例解释：\n\n他可以获取一个 `N` 元核，加到最前面。\n\n```plain\nNNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI\n~ ~~   | ~ ~  ~ | ~   ~~ |  ~~~   |  ~~  ~ |  ~  ~~\n```\n对于 $30\\%$ 的数据 $N \\le 200$。\n\n对于 $50\\%$ 的数据 $N \\le 2000$。\n\n对于 $100\\%$ 的数据 $3 \\le N \\le 10 ^ 5$。", "locale": "zh-CN"}}}
{"pid": "P1372", "type": "P", "difficulty": 2, "samples": [["4 2\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "洛谷原创", "最大公约数 gcd"], "title": "又是毕业季I", "background": "“叮铃铃铃”，随着高考最后一科结考铃声的敲响，三年青春时光顿时凝固于此刻。毕业的欣喜怎敌那离别的不舍，憧憬着未来仍毋忘逝去的歌。$1000$ 多个日夜的欢笑和泪水，全凝聚在毕业晚会上，相信，这一定是一生最难忘的时刻！", "description": "为了把毕业晚会办得更好，老师想要挑出默契程度最大的 $k$ 个人参与毕业晚会彩排。可是如何挑呢？老师列出全班同学的号数 $1,2,\\ldots ,n$ 并且相信 $k$ 个人的默契程度便是他们的最大公约数（这不是迷信哦~）。这可难为了他，请你帮帮忙吧！\n\nPS：一个数的最大公约数即本身。", "inputFormat": "两个空格分开的正整数 $n$ 和 $k$。", "outputFormat": "一个整数，为最大的默契值。", "hint": "对于 $20\\%$ 的数据，$k \\le 2$，$n \\le 10^3$。\n\n对于另 $30\\%$ 的数据，$k \\le 10$，$n \\le 100$。\n\n对于 $100\\%$ 的数据，$k \\le 10^9$，$n \\le 10^9$，$n \\ge k \\ge 1$（神犇学校，人数众多）。", "locale": "zh-CN", "translations": {"en": {"title": "Graduation Season Again I", "background": "\"Ding-ling-ling-ling.\" With the ringing of the final bell of the Gaokao, three years of youth are frozen in this moment. The joy of graduation cannot outweigh the sorrow of parting; while looking forward to the future, we still do not forget the songs of the past. Over $1000$ days and nights of laughter and tears are condensed into the graduation party. We believe this must be one of the most unforgettable moments in a lifetime.", "description": "To make the graduation party better, the teacher wants to select $k$ students with the highest compatibility to participate in the rehearsal. But how to choose? The teacher lists all student numbers $1, 2, \\ldots, n$ and believes that the compatibility level of $k$ students is their greatest common divisor (this is not superstition~). This is difficult for him, so please help!\n\nPS: The greatest common divisor of a single number is the number itself.", "inputFormat": "Two space-separated positive integers $n$ and $k$.", "outputFormat": "A single integer: the maximum compatibility value.", "hint": "For $20\\%$ of the testdata, $k \\le 2$, $n \\le 10^3$.\n\nFor another $30\\%$ of the testdata, $k \\le 10$, $n \\le 100$.\n\nFor $100\\%$ of the testdata, $k \\le 10^9$, $n \\le 10^9$, $n \\ge k \\ge 1$ (a \"Shenben\" school, many students).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "又是毕业季I", "background": "“叮铃铃铃”，随着高考最后一科结考铃声的敲响，三年青春时光顿时凝固于此刻。毕业的欣喜怎敌那离别的不舍，憧憬着未来仍毋忘逝去的歌。$1000$ 多个日夜的欢笑和泪水，全凝聚在毕业晚会上，相信，这一定是一生最难忘的时刻！", "description": "为了把毕业晚会办得更好，老师想要挑出默契程度最大的 $k$ 个人参与毕业晚会彩排。可是如何挑呢？老师列出全班同学的号数 $1,2,\\ldots ,n$ 并且相信 $k$ 个人的默契程度便是他们的最大公约数（这不是迷信哦~）。这可难为了他，请你帮帮忙吧！\n\nPS：一个数的最大公约数即本身。", "inputFormat": "两个空格分开的正整数 $n$ 和 $k$。", "outputFormat": "一个整数，为最大的默契值。", "hint": "对于 $20\\%$ 的数据，$k \\le 2$，$n \\le 10^3$。\n\n对于另 $30\\%$ 的数据，$k \\le 10$，$n \\le 100$。\n\n对于 $100\\%$ 的数据，$k \\le 10^9$，$n \\le 10^9$，$n \\ge k \\ge 1$（神犇学校，人数众多）。", "locale": "zh-CN"}}}
{"pid": "P1373", "type": "P", "difficulty": 4, "samples": [["2 2 3\n1 1\n1 1\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "洛谷原创"], "title": "小 a 和 uim 之大逃离", "background": "小 a 和 uim 来到雨林中探险。突然一阵北风吹来，一片乌云从北部天边急涌过来，还伴着一道道闪电，一阵阵雷声。刹那间，狂风大作，乌云布满了天空，紧接着豆大的雨点从天空中打落下来，只见前方出现了一个披头散发、青面獠牙的怪物，低沉着声音说：“呵呵，既然你们来到这，只能活下来一个！”。小 a 和他的小伙伴都惊呆了！\n", "description": "瞬间，地面上出现了一个 $n\\times m$ 的巨幅矩阵，矩阵的每个格子上有一坨 $0\\sim k$ 不等量的魔液。\n\n怪物各给了小 a 和 uim 一个魔瓶，说道，你们可以从矩阵的任一个格子开始，每次向右或向下走一步，从任一个格子结束。开始时小 a 用魔瓶吸收地面上的魔液，下一步由 uim 吸收，如此交替下去，并且要求最后一步必须由 uim 吸收。魔瓶只有 $k$ 的容量，也就是说，如果装了 $k+1$ 那么魔瓶会被清空成零，如果装了 $k+2$ 就只剩下 $1$，依次类推。\n\n怪物还说道，最后谁的魔瓶装的魔液多，谁就能活下来。小 a 和 uim 感情深厚，情同手足，怎能忍心让小伙伴离自己而去呢？沉默片刻，小 a 灵机一动，如果他俩的魔瓶中魔液一样多，不就都能活下来了吗？小 a 和他的小伙伴都笑呆了！\n\n现在他想知道他们都能活下来有多少种方法。", "inputFormat": "第一行，三个空格隔开的整数 $n,m,k$。\n\n接下来 $n$ 行，$m$ 列，表示矩阵每一个的魔液量。同一行的数字用空格隔开。\n", "outputFormat": "一个整数，表示方法数。由于可能很大，输出对 $1,000,000,007$ 取余后的结果。", "hint": "【题目来源】\n\nlzn 改编\n\n【样例解释】\n\n样例解释：四种方案是：$(1,1)\\to (1,2)$，$(1,1)\\to (2,1)$，$(1,2)\\to (2,2)$，$(2,1)\\to (2,2)$。\n\n【数据范围】\n\n对于 $20\\%$ 的数据，$n,m\\leq 10$，$k\\leq2$；\n\n对于 $50\\%$ 的数据，$n,m\\leq 100$，$k\\leq5$；\n\n对于 $100\\%$ 的数据，$1 \\leq n,m\\leq 800$，$1\\leq k\\leq 15$。\n", "locale": "zh-CN", "translations": {"en": {"title": "The Great Escape of Xiao a and uim", "background": "Xiao a and uim came to explore the rainforest. Suddenly a north wind blew, a dark cloud surged in from the northern horizon with flashes of lightning and peals of thunder. In an instant, a gale rose, dark clouds covered the sky, and then big raindrops fell from above. A disheveled, green-faced, tusked monster appeared ahead, and said in a deep voice: \"Hehe, since you have come here, only one of you can survive!\" Xiao a and his partner were stunned.", "description": "In a flash, a gigantic $n \\times m$ matrix appeared on the ground, and each cell of the matrix held an amount of magic fluid between $0 \\sim k$.\n\nThe monster gave Xiao a and uim a magic bottle each, and said: You may start from any cell of the matrix, move one step to the right or down each time, and end at any cell. At the start, Xiao a uses his bottle to absorb the magic fluid on the ground; on the next step, uim absorbs; and so on, alternating. Moreover, the last absorption must be performed by uim. Each magic bottle has capacity $k$, meaning the amount in a bottle is always taken modulo $k+1$: if it reaches $k+1$ it resets to $0$, if it reaches $k+2$ it becomes $1$, and so on.\n\nThe monster also said that whoever has more magic fluid in their bottle at the end will survive. Xiao a and uim are very close, like brothers. How could he bear to let his partner perish? After a brief silence, Xiao a had a brainwave: if the amounts in their bottles are the same, both can survive. Xiao a and his partner burst into laughter.\n\nNow he wants to know in how many ways both of them can survive.", "inputFormat": "The first line contains three integers $n, m, k$ separated by spaces.\n\nThe next $n$ lines each contain $m$ integers, representing the amount of magic fluid in each cell of the matrix. Numbers in the same row are separated by spaces.", "outputFormat": "Output a single integer: the number of ways. Since the answer may be large, output it modulo $1,000,000,007$.", "hint": "[Problem Source]\n\nAdapted by lzn.\n\n[Sample Explanation]\n\nSample explanation: The four valid schemes are: $(1,1)\\to (1,2)$, $(1,1)\\to (2,1)$, $(1,2)\\to (2,2)$, $(2,1)\\to (2,2)$.\n\n[Constraints]\n\nFor $20\\%$ of the testdata, $n, m \\leq 10$, $k \\leq 2$.\nFor $50\\%$ of the testdata, $n, m \\leq 100$, $k \\leq 5$.\nFor $100\\%$ of the testdata, $1 \\leq n, m \\leq 800$, $1 \\leq k \\leq 15$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小 a 和 uim 之大逃离", "background": "小 a 和 uim 来到雨林中探险。突然一阵北风吹来，一片乌云从北部天边急涌过来，还伴着一道道闪电，一阵阵雷声。刹那间，狂风大作，乌云布满了天空，紧接着豆大的雨点从天空中打落下来，只见前方出现了一个披头散发、青面獠牙的怪物，低沉着声音说：“呵呵，既然你们来到这，只能活下来一个！”。小 a 和他的小伙伴都惊呆了！\n", "description": "瞬间，地面上出现了一个 $n\\times m$ 的巨幅矩阵，矩阵的每个格子上有一坨 $0\\sim k$ 不等量的魔液。\n\n怪物各给了小 a 和 uim 一个魔瓶，说道，你们可以从矩阵的任一个格子开始，每次向右或向下走一步，从任一个格子结束。开始时小 a 用魔瓶吸收地面上的魔液，下一步由 uim 吸收，如此交替下去，并且要求最后一步必须由 uim 吸收。魔瓶只有 $k$ 的容量，也就是说，如果装了 $k+1$ 那么魔瓶会被清空成零，如果装了 $k+2$ 就只剩下 $1$，依次类推。\n\n怪物还说道，最后谁的魔瓶装的魔液多，谁就能活下来。小 a 和 uim 感情深厚，情同手足，怎能忍心让小伙伴离自己而去呢？沉默片刻，小 a 灵机一动，如果他俩的魔瓶中魔液一样多，不就都能活下来了吗？小 a 和他的小伙伴都笑呆了！\n\n现在他想知道他们都能活下来有多少种方法。", "inputFormat": "第一行，三个空格隔开的整数 $n,m,k$。\n\n接下来 $n$ 行，$m$ 列，表示矩阵每一个的魔液量。同一行的数字用空格隔开。\n", "outputFormat": "一个整数，表示方法数。由于可能很大，输出对 $1,000,000,007$ 取余后的结果。", "hint": "【题目来源】\n\nlzn 改编\n\n【样例解释】\n\n样例解释：四种方案是：$(1,1)\\to (1,2)$，$(1,1)\\to (2,1)$，$(1,2)\\to (2,2)$，$(2,1)\\to (2,2)$。\n\n【数据范围】\n\n对于 $20\\%$ 的数据，$n,m\\leq 10$，$k\\leq2$；\n\n对于 $50\\%$ 的数据，$n,m\\leq 100$，$k\\leq5$；\n\n对于 $100\\%$ 的数据，$1 \\leq n,m\\leq 800$，$1\\leq k\\leq 15$。\n", "locale": "zh-CN"}}}
{"pid": "P1374", "type": "P", "difficulty": 4, "samples": [["3 4 7 3\n1010\n0000\n0101\n1 2 3 3\n0132401\n12131\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "洛谷原创", "迭代加深搜索"], "title": "进攻幽暗城", "background": "由于震惊海内外的 “愤怒门投毒事件” 的发生，部落为了对抗皇家药剂师协会的叛乱，所有的外交工作完成后，部落大酋长萨尔带领着小 A 穿过传送门到达幽暗城平叛。\n", "description": "幽暗城的地图是一个 $n \\times m$ 的 $01$ 串。$a_{i, j} = 1$ 时表示 $(i, j)$ 的位置是障碍，无法通过；$a_{i, j} = 0$ 时表示 $(i, j)$ 的位置可以进入。\n\n小 A 与萨尔的初始位置是 $(x_1, y_1)$，而恐惧魔王的初始位置是 $(x_2, y_2)$。小 A 的目标就是到达恐惧魔王的位置。\n\n萨尔会按照一个特定的路线行走，该路线是一个数字串，由 $0 \\sim 4$ 组成。\n\n第 $i$ 秒，若数字串第（$i \\bmod {}$数字串的长度）位等于 $0$，则表示这一秒萨尔将会原地不动；   \n等于 $1$，则表示这一秒萨尔会向上走一格；   \n等于 $2$，则表示这一秒萨尔会向下走一格；   \n等于 $3$，则表示这一秒萨尔会向左走一格；   \n等于 $4$，则表示这一秒萨尔会向右走一格。\n\n若萨尔将要移动的位置是墙或者超出迷宫的范围，则萨尔会原地不动。恐惧魔王也是这样。（换句话说，你可以认为如果将数字串是重复无限次，第 $i$ 秒就是字符串第 $i$ 位）\n\n小A每秒可以选择从上下左右四个方向中选择一个方向，朝那个方向走一格，前提是那个位置不是墙并且没有超出迷宫的范围；或者原地不动。不过，由于幽暗城的诡异环境，小 A 只能持续脱离萨尔的光环 $s$ 秒，若超过 $s$ 秒小 A 则会死亡。光环的有效半径为 $d$ ，表示当小 A 与萨尔之间的距离 $\\sqrt{(x-xx)^2+(y-yy)^2}$ 小于等于 $d$ 时小 A 才能受到萨尔光环的效果。若小 A 脱离萨尔的光环又重新进入光环有效区域，则再次离开光环时持续时间归零重记。\n\n小 A 想知道最少需要几秒他才能到达恐惧魔王所在的位置。", "inputFormat": "第一行四个数 $n,m,s,d$。\n\n接下来的 $n$ 行，每行 $m$ 个数（$0$ 或 $1$），之间没有空格，表示幽暗城的地图。\n\n接下来的一行四个整数，$x_1,y_1,x_2,y_2$（$1 \\le x_1,x_2 \\le n$，$1 \\le y_1,y_2 \\le m$）。\n\n接下来的一行是一个数字串，表示萨尔的移动方式。\n\n接下来的一行是一个数字串，表示恐惧魔王的移动方式。", "outputFormat": "一行一个整数，表示需要最少的时间。\n", "hint": "**【题目来源】**\n\nkiro 原创\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 50$，$0 \\le s \\le 1000$，$0 \\le d \\le 100$，$1 \\le $ 数字串长度 $ \\le 100$，$0 \\le $ 答案 $ \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Assault on the Undercity", "background": "Because of the shocking “Wrathgate poisoning incident,” in order to suppress the rebellion of the Royal Apothecary Society, after all diplomatic work was completed, Warchief Thrall led Xiao A through the portal to the Undercity to quell the uprising.", "description": "The map of the Undercity is an $n \\times m$ grid of $0/1$. If $a_{i, j} = 1$, then position $(i, j)$ is an obstacle and cannot be traversed; if $a_{i, j} = 0$, then position $(i, j)$ is passable.\n\nXiao A and Thrall start at $(x_1, y_1)$, and the Dreadlord starts at $(x_2, y_2)$. Xiao A’s goal is to reach the Dreadlord’s position.\n\nThrall moves according to a specific route, which is a digit string composed of digits $0$ to $4$.\n\nAt second $i$:\n- If the $i$-th digit (thinking of the digit string repeated infinitely) is $0$, Thrall stays still this second.\n- If it is $1$, Thrall moves up by one cell this second.\n- If it is $2$, Thrall moves down by one cell this second.\n- If it is $3$, Thrall moves left by one cell this second.\n- If it is $4$, Thrall moves right by one cell this second.\n\nIf Thrall’s next position would be a wall or outside the maze, Thrall stays in place. The Dreadlord follows the same rule. (In other words, you can think of the digit string as repeating infinitely; at second $i$, take the $i$-th character of this infinite string.)\n\nEach second, Xiao A may choose one of the four directions (up, down, left, right) and move one cell in that direction, provided the destination is not a wall and not out of bounds; or Xiao A may stay in place. However, due to the strange environment in the Undercity, Xiao A can remain outside Thrall’s “aura” for at most $s$ consecutive seconds; if this limit is exceeded, Xiao A dies. The aura has effective radius $d$, meaning Xiao A receives Thrall’s aura effect only when the distance $\\sqrt{(x-xx)^2+(y-yy)^2}$ between Xiao A and Thrall is less than or equal to $d$. If Xiao A leaves Thrall’s aura and then re-enters the effective area of the aura, the counter resets to zero the next time Xiao A leaves the aura.\n\nXiao A wants to know the minimum number of seconds needed to reach the Dreadlord’s position.", "inputFormat": "The first line contains four integers $n, m, s, d$.\n\nThe next $n$ lines each contain $m$ digits ($0$ or $1$) without spaces, representing the map of the Undercity.\n\nThe next line contains four integers $x_1, y_1, x_2, y_2$ ($1 \\le x_1, x_2 \\le n$, $1 \\le y_1, y_2 \\le m$).\n\nThe next line is a digit string describing Thrall’s movement.\n\nThe next line is a digit string describing the Dreadlord’s movement.", "outputFormat": "Output a single integer on one line, the minimum time required.", "hint": "Source: kiro, original.\n\nConstraints:\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 50$, $0 \\le s \\le 1000$, $0 \\le d \\le 100$, $1 \\le$ length of the digit string $\\le 100$, $0 \\le$ answer $\\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "进攻幽暗城", "background": "由于震惊海内外的 “愤怒门投毒事件” 的发生，部落为了对抗皇家药剂师协会的叛乱，所有的外交工作完成后，部落大酋长萨尔带领着小 A 穿过传送门到达幽暗城平叛。\n", "description": "幽暗城的地图是一个 $n \\times m$ 的 $01$ 串。$a_{i, j} = 1$ 时表示 $(i, j)$ 的位置是障碍，无法通过；$a_{i, j} = 0$ 时表示 $(i, j)$ 的位置可以进入。\n\n小 A 与萨尔的初始位置是 $(x_1, y_1)$，而恐惧魔王的初始位置是 $(x_2, y_2)$。小 A 的目标就是到达恐惧魔王的位置。\n\n萨尔会按照一个特定的路线行走，该路线是一个数字串，由 $0 \\sim 4$ 组成。\n\n第 $i$ 秒，若数字串第（$i \\bmod {}$数字串的长度）位等于 $0$，则表示这一秒萨尔将会原地不动；   \n等于 $1$，则表示这一秒萨尔会向上走一格；   \n等于 $2$，则表示这一秒萨尔会向下走一格；   \n等于 $3$，则表示这一秒萨尔会向左走一格；   \n等于 $4$，则表示这一秒萨尔会向右走一格。\n\n若萨尔将要移动的位置是墙或者超出迷宫的范围，则萨尔会原地不动。恐惧魔王也是这样。（换句话说，你可以认为如果将数字串是重复无限次，第 $i$ 秒就是字符串第 $i$ 位）\n\n小A每秒可以选择从上下左右四个方向中选择一个方向，朝那个方向走一格，前提是那个位置不是墙并且没有超出迷宫的范围；或者原地不动。不过，由于幽暗城的诡异环境，小 A 只能持续脱离萨尔的光环 $s$ 秒，若超过 $s$ 秒小 A 则会死亡。光环的有效半径为 $d$ ，表示当小 A 与萨尔之间的距离 $\\sqrt{(x-xx)^2+(y-yy)^2}$ 小于等于 $d$ 时小 A 才能受到萨尔光环的效果。若小 A 脱离萨尔的光环又重新进入光环有效区域，则再次离开光环时持续时间归零重记。\n\n小 A 想知道最少需要几秒他才能到达恐惧魔王所在的位置。", "inputFormat": "第一行四个数 $n,m,s,d$。\n\n接下来的 $n$ 行，每行 $m$ 个数（$0$ 或 $1$），之间没有空格，表示幽暗城的地图。\n\n接下来的一行四个整数，$x_1,y_1,x_2,y_2$（$1 \\le x_1,x_2 \\le n$，$1 \\le y_1,y_2 \\le m$）。\n\n接下来的一行是一个数字串，表示萨尔的移动方式。\n\n接下来的一行是一个数字串，表示恐惧魔王的移动方式。", "outputFormat": "一行一个整数，表示需要最少的时间。\n", "hint": "**【题目来源】**\n\nkiro 原创\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 50$，$0 \\le s \\le 1000$，$0 \\le d \\le 100$，$1 \\le $ 数字串长度 $ \\le 100$，$0 \\le $ 答案 $ \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P1375", "type": "P", "difficulty": 3, "samples": [["3", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "福建省历届夏令营", "Catalan 数"], "title": "小猫", "background": "", "description": "有 $2n$ 只小猫站成一圈，主人小明想把它们两两之间用绳子绑住尾巴连在一起。同时小明是个完美主义者，不容许看到有两根绳子交叉。请问小明有几种连线方案，可以把让所有小猫两两配对？\n\n方案数很大，仅需输出方案数模 $10^9+7$（一个质数）的值。\n\n\n", "inputFormat": "输入共一行，一个整数 $n$。\n", "outputFormat": "输出方案数对 $10^9+7$ 取模后的值。\n", "hint": "### 数据范围\n\n- 对于 $60\\%$ 的数据，$1\\le N \\le 100$。\n- 对于 $100\\%$ 的数据，$1\\le N \\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Kittens", "background": "", "description": "There are $2n$ kittens standing in a circle. Their owner, Xiao Ming, wants to tie their tails together in pairs with strings. At the same time, Xiao Ming is a perfectionist and does not allow any two strings to cross. How many ways are there to connect them so that all kittens are paired?\n\nThe number of ways can be large; you only need to output the value modulo $10^9+7$ (a prime).", "inputFormat": "A single line containing an integer $n$.", "outputFormat": "Output the number of ways modulo $10^9+7$.", "hint": "### Constraints\n\n- For 60% of the testdata, $1 \\le n \\le 100$.\n- For 100% of the testdata, $1 \\le n \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小猫", "background": "", "description": "有 $2n$ 只小猫站成一圈，主人小明想把它们两两之间用绳子绑住尾巴连在一起。同时小明是个完美主义者，不容许看到有两根绳子交叉。请问小明有几种连线方案，可以把让所有小猫两两配对？\n\n方案数很大，仅需输出方案数模 $10^9+7$（一个质数）的值。\n\n\n", "inputFormat": "输入共一行，一个整数 $n$。\n", "outputFormat": "输出方案数对 $10^9+7$ 取模后的值。\n", "hint": "### 数据范围\n\n- 对于 $60\\%$ 的数据，$1\\le N \\le 100$。\n- 对于 $100\\%$ 的数据，$1\\le N \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1376", "type": "P", "difficulty": 2, "samples": [["4 5\n88 200\n89 400\n97 300\n91 500\n", "126900\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["贪心", "2005", "USACO", "福建省历届夏令营"], "title": "[USACO05MAR] Yogurt factory 机器工厂", "background": null, "description": "小 T 开办了一家机器工厂，在 $N$ 个星期内，原材料成本和劳动力价格不断起伏，第 $i$ 周生产一台机器需要花费 $C_i$ 元。若没把机器卖出去，每保养一台机器，每周需要花费 $S$ 元，这个费用不会发生变化。\n\n机器工厂接到订单，在第 $i$ 周需要交付 $Y_i$ 台机器给委托人，第 $i$ 周刚生产的机器，或者之前的存货，都可以进行交付。\n\n请你计算出这 $n$ 周时间内完成订单的最小代价。", "inputFormat": "第一行输入两个整数 $N$ 和 $S$，接下来 $N$ 行每行两个数 $C_i$ 和 $Y_i$。", "outputFormat": "输出一个整数，表示最少的代价。", "hint": "对于 $100\\%$ 的数据，$1 \\le n\\le 10^4$，$1 \\le C_i \\le 5000$，$1 \\le S \\le 100$，$0 \\le Y_i \\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO05MAR] Yogurt factory Machine Factory", "background": "", "description": "Xiao T opened a machine factory. Over $N$ weeks, raw material costs and labor prices fluctuate; in week $i$, producing one machine costs $C_i$ yuan. If a machine is not sold, maintaining each machine costs $S$ yuan per week; this fee is constant.\n\nThe factory has received orders: in week $i$, it must deliver $Y_i$ machines to the client. Machines produced in week $i$, as well as inventory from previous weeks, can be used to fulfill the order.\n\nPlease compute the minimum total cost to complete all orders over these $N$ weeks.", "inputFormat": "The first line contains two integers $N$ and $S$. The next $N$ lines each contain two integers $C_i$ and $Y_i$.", "outputFormat": "Output a single integer, the minimum cost.", "hint": "For $100\\%$ of the testdata, $1 \\le N \\le 10^4$, $1 \\le C_i \\le 5000$, $1 \\le S \\le 100$, $0 \\le Y_i \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO05MAR] Yogurt factory 机器工厂", "background": null, "description": "小 T 开办了一家机器工厂，在 $N$ 个星期内，原材料成本和劳动力价格不断起伏，第 $i$ 周生产一台机器需要花费 $C_i$ 元。若没把机器卖出去，每保养一台机器，每周需要花费 $S$ 元，这个费用不会发生变化。\n\n机器工厂接到订单，在第 $i$ 周需要交付 $Y_i$ 台机器给委托人，第 $i$ 周刚生产的机器，或者之前的存货，都可以进行交付。\n\n请你计算出这 $n$ 周时间内完成订单的最小代价。", "inputFormat": "第一行输入两个整数 $N$ 和 $S$，接下来 $N$ 行每行两个数 $C_i$ 和 $Y_i$。", "outputFormat": "输出一个整数，表示最少的代价。", "hint": "对于 $100\\%$ 的数据，$1 \\le n\\le 10^4$，$1 \\le C_i \\le 5000$，$1 \\le S \\le 100$，$0 \\le Y_i \\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P1377", "type": "P", "difficulty": 5, "samples": [["4\n1 3 4 2\n", "1 3 2 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "各省省选", "天津", "笛卡尔树"], "title": "[TJOI2011] 树的序", "background": "", "description": "众所周知，二叉查找树的形态和键值的插入顺序密切相关。准确的讲： \n1. 空树中加入一个键值 $k$，则变为只有一个结点的二叉查找树，此结点的键值即为 $k$。\n2. 在非空树中插入一个键值 $k$，若 $k$ 小于其根的键值，则在其左子树中插入 $k$，否则在其右子树中插入 $k$。\n\n我们将一棵二叉查找树的键值插入序列称为树的生成序列，现给出一个生成序列，求与其生成同样二叉查找树的所有生成序列中字典序最小的那个，其中，字典序关系是指对两个长度同为 $n$ 的生成序列，先比较第一个插入键值，再比较第二个，依此类推。", "inputFormat": "第一行，一个整数 $n$，表示二叉查找树的结点个数。第二行，有 $n$ 个正整数 $k_1, k_2, \\cdots,k_n$，表示生成序列，简单起见，$k_1 \\sim k_n$ 为一个 $1$ 到 $n$ 的排列。", "outputFormat": "一行，$n$ 个正整数，为能够生成同样二叉查找树的所有生成序列中最小的。", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 的数据， $1\\le n ≤ 10$。\n- 对于 $50\\%$ 的数据， $1\\le n ≤ 100$。\n- 对于 $100\\%$ 的数据， $1\\le n ≤ 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2011] Tree Order", "background": "", "description": "It is well known that the shape of a binary search tree (BST) is closely related to the insertion order of keys. Specifically:\n1. Inserting a key $k$ into an empty tree yields a BST with a single node whose key is $k$.\n2. When inserting a key $k$ into a non-empty tree, if $k$ is less than the key of its root, insert $k$ into its left subtree; otherwise, insert it into its right subtree.\n\nWe call an insertion sequence of keys for a BST a generating sequence of the tree. Given one generating sequence, find the lexicographically smallest generating sequence among all sequences that generate the same BST. Here, the lexicographic order means that for two generating sequences both of length $n$, we first compare the first inserted keys, then the second, and so on.", "inputFormat": "The first line contains an integer $n$, the number of nodes in the BST. The second line contains $n$ positive integers $k_1, k_2, \\cdots, k_n$, representing the generating sequence. For simplicity, $k_1 \\sim k_n$ is a permutation of $1$ to $n$.", "outputFormat": "One line with $n$ positive integers, which is the lexicographically smallest among all generating sequences that can generate the same BST.", "hint": "Constraints and Conventions\n\n- For $20\\%$ of the testdata, $1 \\le n \\le 10$.\n- For $50\\%$ of the testdata, $1 \\le n \\le 100$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2011] 树的序", "background": "", "description": "众所周知，二叉查找树的形态和键值的插入顺序密切相关。准确的讲： \n1. 空树中加入一个键值 $k$，则变为只有一个结点的二叉查找树，此结点的键值即为 $k$。\n2. 在非空树中插入一个键值 $k$，若 $k$ 小于其根的键值，则在其左子树中插入 $k$，否则在其右子树中插入 $k$。\n\n我们将一棵二叉查找树的键值插入序列称为树的生成序列，现给出一个生成序列，求与其生成同样二叉查找树的所有生成序列中字典序最小的那个，其中，字典序关系是指对两个长度同为 $n$ 的生成序列，先比较第一个插入键值，再比较第二个，依此类推。", "inputFormat": "第一行，一个整数 $n$，表示二叉查找树的结点个数。第二行，有 $n$ 个正整数 $k_1, k_2, \\cdots,k_n$，表示生成序列，简单起见，$k_1 \\sim k_n$ 为一个 $1$ 到 $n$ 的排列。", "outputFormat": "一行，$n$ 个正整数，为能够生成同样二叉查找树的所有生成序列中最小的。", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 的数据， $1\\le n ≤ 10$。\n- 对于 $50\\%$ 的数据， $1\\le n ≤ 100$。\n- 对于 $100\\%$ 的数据， $1\\le n ≤ 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1378", "type": "P", "difficulty": 4, "samples": [["2\n20 0 10 10\n13 3\n17 7\n", "50\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "数学", "福建省历届夏令营", "枚举", "深度优先搜索 DFS"], "title": "油滴扩展", "background": "", "description": "在一个长方形框子里，最多有 $N$ 个相异的点，在其中任何一个点上放一个很小的油滴，那么这个油滴会一直扩展，直到接触到其他油滴或者框子的边界。必须等一个油滴扩展完毕才能放置下一个油滴。那么应该按照怎样的顺序在这 $N$ 个点上放置油滴，才能使放置完毕后所有油滴占据的总面积最大呢？（不同的油滴不会相互融合）\n\n注：圆的面积公式 $S = \\pi r^2$，其中 $r$ 为圆的半径。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，四个整数 $x, y, x', y'$，表示长方形边框一个顶点及其对角顶点的坐标。\n\n接下来 $N$ 行，第 $i$ 行两个整数 $x_i, y_i$，表示盒子内第 $i$ 个点的坐标。", "outputFormat": "一行，一个整数，长方形盒子剩余的最小空间（结果四舍五入输出）。", "hint": "对于 $100\\%$ 的数据，$1 \\le N \\le 6$，坐标范围在 $[-1000, 1000]$ 内。", "locale": "zh-CN", "translations": {"en": {"title": "Oil Droplet Expansion", "background": "", "description": "Inside a rectangular frame, there are at most $N$ distinct points. If you place a tiny oil droplet at any one of these points, the droplet will keep expanding until it touches another droplet or the boundary of the frame. You must wait for one droplet to finish expanding before placing the next droplet. In what order should you place droplets at these $N$ points so that the total area occupied by all droplets after placement is maximized? (Different droplets do not merge.)\n\nNote: The area of a circle is $S = \\pi r^2$, where $r$ is the radius.", "inputFormat": "The first line contains an integer $N$.\n\nThe second line contains four integers $x, y, x', y'$, which represent the coordinates of one vertex of the rectangle and its diagonally opposite vertex.\n\nThe next $N$ lines each contain two integers $x_i, y_i$, representing the coordinates of the $i$-th point inside the rectangle.", "outputFormat": "One line with a single integer: the minimum remaining area of the rectangle (rounded to the nearest integer).", "hint": "For $100\\%$ of the testdata, $1 \\le N \\le 6$, and coordinate values are within $[-1000, 1000]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "油滴扩展", "background": "", "description": "在一个长方形框子里，最多有 $N$ 个相异的点，在其中任何一个点上放一个很小的油滴，那么这个油滴会一直扩展，直到接触到其他油滴或者框子的边界。必须等一个油滴扩展完毕才能放置下一个油滴。那么应该按照怎样的顺序在这 $N$ 个点上放置油滴，才能使放置完毕后所有油滴占据的总面积最大呢？（不同的油滴不会相互融合）\n\n注：圆的面积公式 $S = \\pi r^2$，其中 $r$ 为圆的半径。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，四个整数 $x, y, x', y'$，表示长方形边框一个顶点及其对角顶点的坐标。\n\n接下来 $N$ 行，第 $i$ 行两个整数 $x_i, y_i$，表示盒子内第 $i$ 个点的坐标。", "outputFormat": "一行，一个整数，长方形盒子剩余的最小空间（结果四舍五入输出）。", "hint": "对于 $100\\%$ 的数据，$1 \\le N \\le 6$，坐标范围在 $[-1000, 1000]$ 内。", "locale": "zh-CN"}}}
{"pid": "P1379", "type": "P", "difficulty": 4, "samples": [["283104765\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "福建省历届夏令营", "枚举", "广度优先搜索 BFS", "哈希 hashing", "A*  算法"], "title": "八数码难题", "background": "", "description": "在 $3\\times 3$ 的棋盘上，摆有八个棋子，每个棋子上标有 $1$ 至 $8$ 的某一数字。棋盘中留有一个空格，空格用 $0$ 来表示。空格周围的棋子可以移到空格中。要求解的问题是：给出一种初始布局（初始状态）和目标布局（为了使题目简单,设目标状态为 $123804765$），找到一种最少步骤的移动方法，实现从初始布局到目标布局的转变。\n", "inputFormat": "输入初始状态，一行九个数字，空格用 $0$ 表示。\n", "outputFormat": "只有一行，该行只有一个数字，表示从初始状态到目标状态需要的最少移动次数。保证测试数据中无特殊无法到达目标状态数据。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7rhxbnup.png)\n\n图中标有 $0$ 的是空格。绿色格子是空格所在位置，橙色格子是下一步可以移动到空格的位置。如图所示，用四步可以达到目标状态。\n\n并且可以证明，不存在更优的策略。", "locale": "zh-CN", "translations": {"en": {"title": "Eight-Puzzle Problem", "background": "", "description": "On a $3\\times 3$ board, there are eight tiles, each labeled with a digit from $1$ to $8$. One cell is left empty and is denoted by $0$. A tile adjacent to the blank can be moved into the blank. The task is: given an initial layout (initial state) and a target layout (to simplify the problem, the target state is set to $123804765$), find a sequence of moves with the minimum number of steps to transform the initial state into the target state.", "inputFormat": "Input the initial state: nine numbers in one line, with the blank denoted by $0$.", "outputFormat": "Output a single line containing one integer, the minimum number of moves required to reach the target state from the initial state. It is guaranteed that in the testdata there are no unsolvable initial states.", "hint": "### Sample Explanation\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7rhxbnup.png)\n\nIn the figure, the cell labeled $0$ is the blank. The green cell is the position of the blank, and the orange cells are the positions that can be moved into the blank in the next step. As shown, the target state can be reached in four moves.\n\nMoreover, it can be proven that no better strategy exists.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "八数码难题", "background": "", "description": "在 $3\\times 3$ 的棋盘上，摆有八个棋子，每个棋子上标有 $1$ 至 $8$ 的某一数字。棋盘中留有一个空格，空格用 $0$ 来表示。空格周围的棋子可以移到空格中。要求解的问题是：给出一种初始布局（初始状态）和目标布局（为了使题目简单,设目标状态为 $123804765$），找到一种最少步骤的移动方法，实现从初始布局到目标布局的转变。\n", "inputFormat": "输入初始状态，一行九个数字，空格用 $0$ 表示。\n", "outputFormat": "只有一行，该行只有一个数字，表示从初始状态到目标状态需要的最少移动次数。保证测试数据中无特殊无法到达目标状态数据。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7rhxbnup.png)\n\n图中标有 $0$ 的是空格。绿色格子是空格所在位置，橙色格子是下一步可以移动到空格的位置。如图所示，用四步可以达到目标状态。\n\n并且可以证明，不存在更优的策略。", "locale": "zh-CN"}}}
{"pid": "P1380", "type": "P", "difficulty": 5, "samples": [["5 6\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "福建省历届夏令营"], "title": "T 型骨牌", "background": null, "description": "现在要在 $n\\times m$ 的棋盘上，摆入 T 型，T 型可以旋转，具体包括如下四个样式（“#”代表被 T 型占据的格子，“.”代表自由的格子）：\n\n```plain\n###      ..#      .#.      #..\n.#.      ###      .#.      ###\n.#.      ..#      ###      #..\n```\n\n问最多能在 $n\\times m$ 的棋盘上摆入多少个不重叠的 T 型。", "inputFormat": "输入共一行两个数 $n,m$。", "outputFormat": "输出共一个数，表示最多能放入多少个 T 型。", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le n,m\\le 9$。\n\n### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r08wh2nu.png)", "locale": "zh-CN", "translations": {"en": {"title": "T-shaped Pentomino", "background": "", "description": "We want to place T-shaped pentominoes on an $n\\times m$ grid. The T-shaped pentomino can be rotated and specifically has the following four orientations (\"#\" represents a cell occupied by the T, \".\" represents a free cell):\n\n```plain\n###      ..#      .#.      #..\n.#.      ###      .#.      ###\n.#.      ..#      ###      #..\n```\n\nWhat is the maximum number of non-overlapping T-shaped pentominoes that can be placed on an $n\\times m$ grid?", "inputFormat": "A single line containing two integers $n,m$.", "outputFormat": "Output a single integer, the maximum number of T-shaped pentominoes that can be placed.", "hint": "### Constraints\n\nFor all testdata, $1\\le n,m\\le 9$.\n\n### Sample Explanation\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r08wh2nu.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "T 型骨牌", "background": null, "description": "现在要在 $n\\times m$ 的棋盘上，摆入 T 型，T 型可以旋转，具体包括如下四个样式（“#”代表被 T 型占据的格子，“.”代表自由的格子）：\n\n```plain\n###      ..#      .#.      #..\n.#.      ###      .#.      ###\n.#.      ..#      ###      #..\n```\n\n问最多能在 $n\\times m$ 的棋盘上摆入多少个不重叠的 T 型。", "inputFormat": "输入共一行两个数 $n,m$。", "outputFormat": "输出共一个数，表示最多能放入多少个 T 型。", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le n,m\\le 9$。\n\n### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r08wh2nu.png)", "locale": "zh-CN"}}}
