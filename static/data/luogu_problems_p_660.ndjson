{"pid": "P14379", "type": "P", "difficulty": 5, "samples": [["5 3\n1 2 2 1 3\n2 1\n5 1\n3 4", "9\n8\n4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "平衡树", "树状数组", "颜色段均摊（珂朵莉树 ODT）", "O2优化", "梦熊比赛", "STL"], "title": "【MX-S9-T2】「LAOI-16」摩天大楼", "background": "> 摩天大楼，太稀有，人人高贵富有；粉饰骷髅，气质有，人们争先恐后。\n>\n> 摩天大楼，想拥有，让人爱不释手；晶莹剔透，攀比后，才能高枕无忧。", "description": "Wa1 邀请 ChA 来到一个神秘的二维空间。\n\n这个空间中共矗立着 $n$ 栋摩天大楼，坐标 $i$（$1 \\le i \\le n$）处矗立着一栋高为 $a_i$ 的摩天大楼。由于该空间的科技水平远超人类，第 $i$ 栋大楼只会阻挡高度**恰好等于** $a_i$ 的飞行物，其他高度的飞行物可以自由通过。\n\nWa1 为 ChA 准备了一架可飞行于正整数高度的飞机。每次游戏给定起点 $x$ 和终点 $y$（$1 \\le x < y \\le n$）。Wa1 会选择一个整数 $k$（$x \\le k < y$），ChA 只能在第 $k$ 和第 $k+1$ 栋大楼之间改变飞行高度。\n\n为保证安全，ChA 会采用以下策略：\n\n- 从起点 $x$ 出发，以**能不改变高度**穿过区间 $[x,k]$ 所有大楼的**最低高度**飞行；\n- 到达 $k$ 后，如果不是**能不改变高度**穿过区间 $[k+1,y]$ 所有大楼的**最低高度**，再调整到它继续飞行，抵达终点 $y$。\n\n若 ChA 在这次飞行中改变了一次高度，则会消耗 $1$ 单位航油。Wa1 是个卖航油的商人，为了赚取 ChA 的航油费，他会尽量让 ChA 在飞行中必须改变一次高度。\n\nWa1 邀请 ChA 游玩超值飞行套餐。具体地，设起点和终点为 $x,y$ **最多**耗费 $f(x,y)$ 单位的航油，超值飞行套餐可以让 Wa1 卖出 $\\displaystyle \\sum_{i=1}^{n}\\sum_{j=i+1}^{n}f(i,j)$ 单位的航油。\n\nWa1 共 $q$ 次邀请 ChA 来游玩超值飞行套餐，第 $i$ 次邀请前他会把 $x_i$ 处的大楼高度修改为 $v_i$。对于每次邀请，Wa1 想知道他能卖出去多少单位航油。", "inputFormat": "第一行，两个正整数 $n,q$。\n\n第二行，$n$ 个正整数 $a_1, \\ldots, a_n$，含义见题目描述。\n\n接下来 $q$ 行，每行两个正整数 $x_i,v_i$，表示第 $x_i$ 栋大楼高度修改为 $v_i$。", "outputFormat": "共 $q$ 行，每行一个整数，表示答案。", "hint": "**【样例解释 #1】**  \n\n初始高度：$\\langle 1, 2, 2, 1, 3\\rangle$。\n\n对于第 $1$ 次操作：修改 $a_2 = 1$，新高度为 $\\langle 1, 1, 2, 1, 3\\rangle$。\n\n- 若相邻两段可通过的最低高度不同，则 ChA 必须升降一次。\n- 例如区间 $[1,5]$：选择 $k=2$，则通过 $[1,2]$ 的最低高度为 $2$，通过 $[3,5]$ 的最低高度为 $4$。显然 $2\\neq4$，ChA 必须更改一次飞机高度，产生 $1$ 单位的耗油量。\n- 统计可得总耗油量为 $9$ 单位。\n\n**【样例 #2】**\n\n见选手目录下的 $\\textbf{\\textit{building/building2.in}}$ 与 $\\textbf{\\textit{building/building2.ans}}$。\n\n该样例满足测试点 $1$ 的约束条件。\n\n**【样例 #3】**\n\n见选手目录下的 $\\textbf{\\textit{building/building3.in}}$ 与 $\\textbf{\\textit{building/building3.ans}}$。\n\n该样例满足测试点 $4\\sim 7$ 的约束条件。\n\n**【样例 #4】**\n\n见选手目录下的 $\\textbf{\\textit{building/building4.in}}$ 与 $\\textbf{\\textit{building/building4.ans}}$。\n\n该样例满足测试点 $8$ 的约束条件。\n\n**【样例 #5】**\n\n见选手目录下的 $\\textbf{\\textit{building/building5.in}}$ 与 $\\textbf{\\textit{building/building5.ans}}$。\n\n该样例满足测试点 $9, 10$ 的约束条件。\n\n**【样例 #6】**\n\n见选手目录下的 $\\textbf{\\textit{building/building6.in}}$ 与 $\\textbf{\\textit{building/building6.ans}}$。\n\n该样例满足测试点 $11, 12$ 的约束条件。\n\n**【样例 #7】**\n\n见选手目录下的 $\\textbf{\\textit{building/building7.in}}$ 与 $\\textbf{\\textit{building/building7.ans}}$。\n\n该样例满足测试点 $16\\sim 20$ 的约束条件。\n\n**【数据范围】**  \n\n本题共 $20$ 个测试点，每个 $5$ 分。\n\n对于所有测试数据，保证：\n\n- $2\\le n\\le 10^6$，$1\\le q\\le 10^6$；\n- $1\\le x_i\\le n$；\n- $1\\le a_i,v_i\\le 10^6$。\n\n::cute-table{tuack}\n\n|测试点编号|$n,q\\le$|特殊性质|\n|:--:|:--:|:--:|\n|$1$|$80$|无|\n|$2, 3$|$300$|^|\n|$4\\sim 7$|$5\\times 10^3$|^|\n|$8$|$10^6$|A|\n|$9, 10$|^|B|\n|$11, 12$|^|C|\n|$13\\sim 15$|^|D|\n|$16\\sim 20$|^|无|\n\n特殊性质 A：任意时刻不存在高度为 $1$ 的大楼。    \n特殊性质 B：任意时刻高度为 $1$ 的大楼最多存在一个。    \n特殊性质 C：任意时刻不存在高度为 $2$ 的大楼。    \n特殊性质 D：$q = 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S9-T2】「LAOI-16」摩天大楼", "background": "> 摩天大楼，太稀有，人人高贵富有；粉饰骷髅，气质有，人们争先恐后。\n>\n> 摩天大楼，想拥有，让人爱不释手；晶莹剔透，攀比后，才能高枕无忧。", "description": "Wa1 邀请 ChA 来到一个神秘的二维空间。\n\n这个空间中共矗立着 $n$ 栋摩天大楼，坐标 $i$（$1 \\le i \\le n$）处矗立着一栋高为 $a_i$ 的摩天大楼。由于该空间的科技水平远超人类，第 $i$ 栋大楼只会阻挡高度**恰好等于** $a_i$ 的飞行物，其他高度的飞行物可以自由通过。\n\nWa1 为 ChA 准备了一架可飞行于正整数高度的飞机。每次游戏给定起点 $x$ 和终点 $y$（$1 \\le x < y \\le n$）。Wa1 会选择一个整数 $k$（$x \\le k < y$），ChA 只能在第 $k$ 和第 $k+1$ 栋大楼之间改变飞行高度。\n\n为保证安全，ChA 会采用以下策略：\n\n- 从起点 $x$ 出发，以**能不改变高度**穿过区间 $[x,k]$ 所有大楼的**最低高度**飞行；\n- 到达 $k$ 后，如果不是**能不改变高度**穿过区间 $[k+1,y]$ 所有大楼的**最低高度**，再调整到它继续飞行，抵达终点 $y$。\n\n若 ChA 在这次飞行中改变了一次高度，则会消耗 $1$ 单位航油。Wa1 是个卖航油的商人，为了赚取 ChA 的航油费，他会尽量让 ChA 在飞行中必须改变一次高度。\n\nWa1 邀请 ChA 游玩超值飞行套餐。具体地，设起点和终点为 $x,y$ **最多**耗费 $f(x,y)$ 单位的航油，超值飞行套餐可以让 Wa1 卖出 $\\displaystyle \\sum_{i=1}^{n}\\sum_{j=i+1}^{n}f(i,j)$ 单位的航油。\n\nWa1 共 $q$ 次邀请 ChA 来游玩超值飞行套餐，第 $i$ 次邀请前他会把 $x_i$ 处的大楼高度修改为 $v_i$。对于每次邀请，Wa1 想知道他能卖出去多少单位航油。", "inputFormat": "第一行，两个正整数 $n,q$。\n\n第二行，$n$ 个正整数 $a_1, \\ldots, a_n$，含义见题目描述。\n\n接下来 $q$ 行，每行两个正整数 $x_i,v_i$，表示第 $x_i$ 栋大楼高度修改为 $v_i$。", "outputFormat": "共 $q$ 行，每行一个整数，表示答案。", "hint": "**【样例解释 #1】**  \n\n初始高度：$\\langle 1, 2, 2, 1, 3\\rangle$。\n\n对于第 $1$ 次操作：修改 $a_2 = 1$，新高度为 $\\langle 1, 1, 2, 1, 3\\rangle$。\n\n- 若相邻两段可通过的最低高度不同，则 ChA 必须升降一次。\n- 例如区间 $[1,5]$：选择 $k=2$，则通过 $[1,2]$ 的最低高度为 $2$，通过 $[3,5]$ 的最低高度为 $4$。显然 $2\\neq4$，ChA 必须更改一次飞机高度，产生 $1$ 单位的耗油量。\n- 统计可得总耗油量为 $9$ 单位。\n\n**【样例 #2】**\n\n见选手目录下的 $\\textbf{\\textit{building/building2.in}}$ 与 $\\textbf{\\textit{building/building2.ans}}$。\n\n该样例满足测试点 $1$ 的约束条件。\n\n**【样例 #3】**\n\n见选手目录下的 $\\textbf{\\textit{building/building3.in}}$ 与 $\\textbf{\\textit{building/building3.ans}}$。\n\n该样例满足测试点 $4\\sim 7$ 的约束条件。\n\n**【样例 #4】**\n\n见选手目录下的 $\\textbf{\\textit{building/building4.in}}$ 与 $\\textbf{\\textit{building/building4.ans}}$。\n\n该样例满足测试点 $8$ 的约束条件。\n\n**【样例 #5】**\n\n见选手目录下的 $\\textbf{\\textit{building/building5.in}}$ 与 $\\textbf{\\textit{building/building5.ans}}$。\n\n该样例满足测试点 $9, 10$ 的约束条件。\n\n**【样例 #6】**\n\n见选手目录下的 $\\textbf{\\textit{building/building6.in}}$ 与 $\\textbf{\\textit{building/building6.ans}}$。\n\n该样例满足测试点 $11, 12$ 的约束条件。\n\n**【样例 #7】**\n\n见选手目录下的 $\\textbf{\\textit{building/building7.in}}$ 与 $\\textbf{\\textit{building/building7.ans}}$。\n\n该样例满足测试点 $16\\sim 20$ 的约束条件。\n\n**【数据范围】**  \n\n本题共 $20$ 个测试点，每个 $5$ 分。\n\n对于所有测试数据，保证：\n\n- $2\\le n\\le 10^6$，$1\\le q\\le 10^6$；\n- $1\\le x_i\\le n$；\n- $1\\le a_i,v_i\\le 10^6$。\n\n::cute-table{tuack}\n\n|测试点编号|$n,q\\le$|特殊性质|\n|:--:|:--:|:--:|\n|$1$|$80$|无|\n|$2, 3$|$300$|^|\n|$4\\sim 7$|$5\\times 10^3$|^|\n|$8$|$10^6$|A|\n|$9, 10$|^|B|\n|$11, 12$|^|C|\n|$13\\sim 15$|^|D|\n|$16\\sim 20$|^|无|\n\n特殊性质 A：任意时刻不存在高度为 $1$ 的大楼。    \n特殊性质 B：任意时刻高度为 $1$ 的大楼最多存在一个。    \n特殊性质 C：任意时刻不存在高度为 $2$ 的大楼。    \n特殊性质 D：$q = 1$。", "locale": "zh-CN"}}}
{"pid": "P14380", "type": "P", "difficulty": 6, "samples": [["5 5\n1 2\n2 3\n1 4\n2 5\n4 5\n4 5\n2 5\n2 4\n2 3\n", "3\n3\n8\n5\n3\n"], ["10 10\n1 2\n1 3\n2 4\n2 5\n4 6\n1 7\n1 8\n1 9\n5 10\n3 4\n8 10\n7 9\n4 10\n2 7\n9 9\n2 5\n3 10\n6 9\n1 5\n", "3\n6\n6\n22\n15\n1\n8\n30\n10\n10\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化", "扫描线", "梦熊比赛"], "title": "【MX-S9-T3】「LAOI-16」天外来物", "background": "> 你像天外来物一样求之不得，你在世俗里的名字不重要了。\n> \n> 正好我隐藏的人格是契而不舍，直到蜂拥而至的人都透明了。", "description": "ChA 在天上点缀了 $n$ 颗星星，编号为 $1 \\sim n$。他们之间有 $n - 1$ 对星链。\n\nWa1 仰望星空，手指沿着星链移动，她发现星星构成了一棵树结构。\n\n于是 Wa1 为每一颗星星附上了 $1\\sim n$ 的编号。\n\n“我要随便选两个数字 $l, r$，然后用手指把编号在 $[l,r]$ 的星星，两两沿着星链按**最短路径**连接。我手指划过的所有星星和星链就属于同一个星系。”\n\n“简单地说，我要让这个星系**包含编号在 $[l,r]$ 中的所有点**并且**连通**。虽然有很多，但我只要满足条件的**最小**的星系。”\n\n“这样生成的星系叫作 $[l,r]$ 的天外来物，即 $f(l,r)$。”\n\nChA 共 $q$ 次望向那片曾经的星空。他每次会随意想两个整数 $L_i,R_i$。他想知道有多少种不同的 $f(l,r)$，其中 $L_i\\le l\\le r\\le R_i$。\n\n称 $f$ 相同，当且仅当其包含的点集相同。", "inputFormat": "第一行，两个整数 $n,q$，具体意义见题目描述。\n\n接下来 $n-1$ 行，每行两个整数 $x,y$，表示一条星链连接的两颗星星。\n\n接下来 $q$ 行，每行两个整数 $L_i,R_i$。", "outputFormat": "共 $q$ 行，每行一个整数，表示满足 $L\\le l\\le r\\le R$ 互不相同 $f(l,r)$ 的个数。", "hint": "**【样例解释 #1】**\n\n以下是所有合法 $f(i,j)$ 的对应集合。\n\n$f(1,1)=\\{1\\}$，$f(2,2)=\\{2\\}$，$f(3,3)=\\{3\\}$，$f(4,4)=\\{4\\}$，$f(5,5)=\\{5\\}$。\n\n$f(1,2)=\\{1,2\\}$，$f(2,3)=\\{2,3\\}$，$f(3,4)=\\{1,2,3,4\\}$，$f(4,5)=\\{1,2,4,5\\}$。\n\n$f(1,3)=\\{1,2,3\\}$，$f(2,4)=\\{1,2,3,4\\}$，$f(3,5)=\\{1,2,3,4,5\\}$。\n\n$f(1,4)=\\{1,2,3,4\\}$，$f(2,5)=\\{1,2,3,4,5\\}$。\n\n$f(1,5)=\\{1,2,3,4,5\\}$。\n\n**【样例解释 #2】**\n\n该样例满足测试点 $1, 2$ 的约束条件。\n\n**【样例 #3】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed3.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed3.ans}}$。\n\n该样例满足测试点 $1, 2$ 的约束条件。\n\n**【样例 #4】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed4.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed4.ans}}$。\n\n该样例满足测试点 $3, 4$ 的约束条件。\n\n**【样例 #5】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed5.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed5.ans}}$。\n\n该样例满足测试点 $5\\sim 8$ 的约束条件。\n\n**【样例 #6】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed6.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed6.ans}}$。\n\n该样例满足测试点 $9\\sim 11$ 的约束条件。\n\n**【样例 #7】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed7.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed7.ans}}$。\n\n该样例满足测试点 $12, 13$ 的约束条件。\n\n**【样例 #8】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed8.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed8.ans}}$。\n\n该样例满足测试点 $14, 15$ 的约束条件。\n\n**【样例 #9】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed9.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed9.ans}}$。\n\n该样例满足测试点 $16\\sim 19$ 的约束条件。\n\n**【样例 #10】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed10.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed10.ans}}$。\n\n该样例满足测试点 $20\\sim 25$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点，每个 $4$ 分。\n\n对于所有测试数据，保证：\n\n- $1\\le n,q\\le 5\\times 10^5$；\n- $1\\le L_i\\le R_i\\le n$；\n- $1\\le x,y\\le n$，保证输入的边构成树。\n\n::cute-table{tuack}\n\n|测试点编号|$n,q \\le$|特殊性质|\n|:--:|:--:|:--:|\n|$1, 2$|$100$|无|\n|$3, 4$|$600$|^|\n|$5\\sim 8$|$5000$|^|\n|$9\\sim 11$|$5\\times 10^5$|A|\n|$12, 13$|^|B|\n|$14, 15$|^|C|\n|$16\\sim 19$|$10^5$|无|\n|$20\\sim 25$|$5\\times 10^5$|^|\n\n特殊性质 A：$q = 1$。    \n特殊性质 B：对于所有 $2 \\le i \\le n$，均有 $i$ 与 $i-1$ 连边。    \n特殊性质 C：对于所有 $2 \\le i \\le n$，均有 $i$ 与 $1$ 连边。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S9-T3】「LAOI-16」天外来物", "background": "> 你像天外来物一样求之不得，你在世俗里的名字不重要了。\n> \n> 正好我隐藏的人格是契而不舍，直到蜂拥而至的人都透明了。", "description": "ChA 在天上点缀了 $n$ 颗星星，编号为 $1 \\sim n$。他们之间有 $n - 1$ 对星链。\n\nWa1 仰望星空，手指沿着星链移动，她发现星星构成了一棵树结构。\n\n于是 Wa1 为每一颗星星附上了 $1\\sim n$ 的编号。\n\n“我要随便选两个数字 $l, r$，然后用手指把编号在 $[l,r]$ 的星星，两两沿着星链按**最短路径**连接。我手指划过的所有星星和星链就属于同一个星系。”\n\n“简单地说，我要让这个星系**包含编号在 $[l,r]$ 中的所有点**并且**连通**。虽然有很多，但我只要满足条件的**最小**的星系。”\n\n“这样生成的星系叫作 $[l,r]$ 的天外来物，即 $f(l,r)$。”\n\nChA 共 $q$ 次望向那片曾经的星空。他每次会随意想两个整数 $L_i,R_i$。他想知道有多少种不同的 $f(l,r)$，其中 $L_i\\le l\\le r\\le R_i$。\n\n称 $f$ 相同，当且仅当其包含的点集相同。", "inputFormat": "第一行，两个整数 $n,q$，具体意义见题目描述。\n\n接下来 $n-1$ 行，每行两个整数 $x,y$，表示一条星链连接的两颗星星。\n\n接下来 $q$ 行，每行两个整数 $L_i,R_i$。", "outputFormat": "共 $q$ 行，每行一个整数，表示满足 $L\\le l\\le r\\le R$ 互不相同 $f(l,r)$ 的个数。", "hint": "**【样例解释 #1】**\n\n以下是所有合法 $f(i,j)$ 的对应集合。\n\n$f(1,1)=\\{1\\}$，$f(2,2)=\\{2\\}$，$f(3,3)=\\{3\\}$，$f(4,4)=\\{4\\}$，$f(5,5)=\\{5\\}$。\n\n$f(1,2)=\\{1,2\\}$，$f(2,3)=\\{2,3\\}$，$f(3,4)=\\{1,2,3,4\\}$，$f(4,5)=\\{1,2,4,5\\}$。\n\n$f(1,3)=\\{1,2,3\\}$，$f(2,4)=\\{1,2,3,4\\}$，$f(3,5)=\\{1,2,3,4,5\\}$。\n\n$f(1,4)=\\{1,2,3,4\\}$，$f(2,5)=\\{1,2,3,4,5\\}$。\n\n$f(1,5)=\\{1,2,3,4,5\\}$。\n\n**【样例解释 #2】**\n\n该样例满足测试点 $1, 2$ 的约束条件。\n\n**【样例 #3】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed3.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed3.ans}}$。\n\n该样例满足测试点 $1, 2$ 的约束条件。\n\n**【样例 #4】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed4.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed4.ans}}$。\n\n该样例满足测试点 $3, 4$ 的约束条件。\n\n**【样例 #5】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed5.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed5.ans}}$。\n\n该样例满足测试点 $5\\sim 8$ 的约束条件。\n\n**【样例 #6】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed6.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed6.ans}}$。\n\n该样例满足测试点 $9\\sim 11$ 的约束条件。\n\n**【样例 #7】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed7.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed7.ans}}$。\n\n该样例满足测试点 $12, 13$ 的约束条件。\n\n**【样例 #8】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed8.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed8.ans}}$。\n\n该样例满足测试点 $14, 15$ 的约束条件。\n\n**【样例 #9】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed9.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed9.ans}}$。\n\n该样例满足测试点 $16\\sim 19$ 的约束条件。\n\n**【样例 #10】**\n\n见选手目录下的 $\\textbf{\\textit{unearthed/unearthed10.in}}$ 与 $\\textbf{\\textit{unearthed/unearthed10.ans}}$。\n\n该样例满足测试点 $20\\sim 25$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点，每个 $4$ 分。\n\n对于所有测试数据，保证：\n\n- $1\\le n,q\\le 5\\times 10^5$；\n- $1\\le L_i\\le R_i\\le n$；\n- $1\\le x,y\\le n$，保证输入的边构成树。\n\n::cute-table{tuack}\n\n|测试点编号|$n,q \\le$|特殊性质|\n|:--:|:--:|:--:|\n|$1, 2$|$100$|无|\n|$3, 4$|$600$|^|\n|$5\\sim 8$|$5000$|^|\n|$9\\sim 11$|$5\\times 10^5$|A|\n|$12, 13$|^|B|\n|$14, 15$|^|C|\n|$16\\sim 19$|$10^5$|无|\n|$20\\sim 25$|$5\\times 10^5$|^|\n\n特殊性质 A：$q = 1$。    \n特殊性质 B：对于所有 $2 \\le i \\le n$，均有 $i$ 与 $i-1$ 连边。    \n特殊性质 C：对于所有 $2 \\le i \\le n$，均有 $i$ 与 $1$ 连边。", "locale": "zh-CN"}}}
{"pid": "P14381", "type": "P", "difficulty": 7, "samples": [["2 2 3 2", "10"], ["3 4 7 2", "532"], ["8 15 114 3", "979159471"], ["28 39 1024 2", "207170535"], ["48 99 7531 1", "974278338"], ["47 97 7864 3", "916373488"], ["49 996 959418 1", "379260530"], ["50 1000 998244 5", "979938753"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-S9-T4】「LAOI-16」顽疾", "background": "> 你怎么像患者的固有资产，催着往事追忆任病情延展。\n>\n> 我用上不眠不休的手段，抵抗梦里你的温暖。", "description": "在 ChA 的想象世界，每种疾病都有一个代号。比如 Wa1 就患有顽疾 $(k,w,t)$。\n\n同样地，每种生命体征都有一种代号。Wa1 共测量了 $n$ 次生命体征，设第 $i$（$1 \\le i \\le n$）个测量结果是 $a_i$。保存测量结果的文件夹按 $a_i$ 升序排序。测量结果序列 $a$ 的风险程度是 $\\displaystyle\\prod_{i=1}^{n-1} (a_{i+1}-a_{i}+1)^t$，记为 $g(a)$。\n\n定义一个正整数数列 $b$ 满足顽疾 $(k,w,t)$ 的特征，当且仅当下列条件均成立：\n\n1. 对于所有 $1 \\le i \\le n$，均有 $1 \\le b_i \\le k$；\n2. 对于所有 $1 \\le i < n$，均有 $b_i\\times b_{i+1}\\le w$。\n\n定义 $f(a)$ 为使得 $a_{p_i}$ 满足以上特征的长为 $n$ 的排列 $p$ 的数量。\n\n不幸的是，ChA 完全遗忘了 $a$ 的内容。你只能初步评估 Wa1 的健康情况为 $\\displaystyle\\sum_{a\\in A} f(a)\\times g(a)$，其中 $A$ 为全体满足 $\\forall i\\in [1,n),a_i\\le a_{i+1}$ 的序列构成的集合。\n\n为了 Wa1，你需要求出 Wa1 的健康情况。由于这个数可能很大，Wa1 允许你输出对 $10^9+7$ 取模的结果。", "inputFormat": "仅一行，四个正整数 $n,k,w,t$，含义见题目描述。", "outputFormat": "共一行，一个整数，表示 Wa1 的健康情况对 $10^9+7$ 取模的结果。", "hint": "**【样例解释 #1】**  \n\n- 序列 $a$ 为 $\\langle 1,1\\rangle$ 时，贡献为 $f(a)\\times g(a)=2\\times1^2=2$。\n- 序列 $a$ 为 $\\langle 1,2\\rangle$ 时，贡献为 $f(a)\\times g(a)=2\\times2^2=8$。\n- 序列 $a$ 为 $\\langle 2,2\\rangle$ 时，贡献为 $f(a)\\times g(a)=0\\times1^2=0$。\n\n其他序列显然 $f(a)=0$，答案为 $2+8+0=10$。\n\n**【样例解释 #2】**\n\n该样例满足测试点 $1\\sim 3$ 的约束条件。\n\n**【样例解释 #3】**\n\n该样例满足测试点 $4\\sim 7$ 的约束条件。\n\n**【样例解释 #4】**\n\n该样例满足测试点 $8\\sim 15$ 的约束条件。\n\n**【样例解释 #5】**\n\n该样例满足测试点 $16\\sim 20$ 的约束条件。\n\n**【样例解释 #6】**\n\n该样例满足测试点 $21\\sim 30$ 的约束条件。\n\n**【样例解释 #7】**\n\n该样例满足测试点 $31\\sim 35$ 的约束条件。\n\n**【样例解释 #8】**\n\n该样例满足测试点 $36\\sim 50$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $50$ 个测试点，每个 $2$ 分。\n\n对于所有测试数据，保证：\n\n- $1\\le n\\le 50$；\n- $1\\le k\\le 1000$；\n- $1\\le w\\le k^2$；\n- $1\\le t\\le 5$。\n\n::cute-table{tuack}\n\n|测试点编号|$n \\le$|$k \\le$|$t \\le$|\n|:--:|:--:|:--:|:--:|\n|$1\\sim 3$|$8$|$8$|$5$|\n|$4\\sim 7$|^|$16$|^|\n|$8\\sim 15$|$30$|$40$|^|\n|$16\\sim 20$|$50$|$100$|$1$|\n|$21\\sim 30$|^|^|$3$|\n|$31\\sim 35$|^|$1000$|$1$|\n|$36\\sim 50$|^|^|$5$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S9-T4】「LAOI-16」顽疾", "background": "> 你怎么像患者的固有资产，催着往事追忆任病情延展。\n>\n> 我用上不眠不休的手段，抵抗梦里你的温暖。", "description": "在 ChA 的想象世界，每种疾病都有一个代号。比如 Wa1 就患有顽疾 $(k,w,t)$。\n\n同样地，每种生命体征都有一种代号。Wa1 共测量了 $n$ 次生命体征，设第 $i$（$1 \\le i \\le n$）个测量结果是 $a_i$。保存测量结果的文件夹按 $a_i$ 升序排序。测量结果序列 $a$ 的风险程度是 $\\displaystyle\\prod_{i=1}^{n-1} (a_{i+1}-a_{i}+1)^t$，记为 $g(a)$。\n\n定义一个正整数数列 $b$ 满足顽疾 $(k,w,t)$ 的特征，当且仅当下列条件均成立：\n\n1. 对于所有 $1 \\le i \\le n$，均有 $1 \\le b_i \\le k$；\n2. 对于所有 $1 \\le i < n$，均有 $b_i\\times b_{i+1}\\le w$。\n\n定义 $f(a)$ 为使得 $a_{p_i}$ 满足以上特征的长为 $n$ 的排列 $p$ 的数量。\n\n不幸的是，ChA 完全遗忘了 $a$ 的内容。你只能初步评估 Wa1 的健康情况为 $\\displaystyle\\sum_{a\\in A} f(a)\\times g(a)$，其中 $A$ 为全体满足 $\\forall i\\in [1,n),a_i\\le a_{i+1}$ 的序列构成的集合。\n\n为了 Wa1，你需要求出 Wa1 的健康情况。由于这个数可能很大，Wa1 允许你输出对 $10^9+7$ 取模的结果。", "inputFormat": "仅一行，四个正整数 $n,k,w,t$，含义见题目描述。", "outputFormat": "共一行，一个整数，表示 Wa1 的健康情况对 $10^9+7$ 取模的结果。", "hint": "**【样例解释 #1】**  \n\n- 序列 $a$ 为 $\\langle 1,1\\rangle$ 时，贡献为 $f(a)\\times g(a)=2\\times1^2=2$。\n- 序列 $a$ 为 $\\langle 1,2\\rangle$ 时，贡献为 $f(a)\\times g(a)=2\\times2^2=8$。\n- 序列 $a$ 为 $\\langle 2,2\\rangle$ 时，贡献为 $f(a)\\times g(a)=0\\times1^2=0$。\n\n其他序列显然 $f(a)=0$，答案为 $2+8+0=10$。\n\n**【样例解释 #2】**\n\n该样例满足测试点 $1\\sim 3$ 的约束条件。\n\n**【样例解释 #3】**\n\n该样例满足测试点 $4\\sim 7$ 的约束条件。\n\n**【样例解释 #4】**\n\n该样例满足测试点 $8\\sim 15$ 的约束条件。\n\n**【样例解释 #5】**\n\n该样例满足测试点 $16\\sim 20$ 的约束条件。\n\n**【样例解释 #6】**\n\n该样例满足测试点 $21\\sim 30$ 的约束条件。\n\n**【样例解释 #7】**\n\n该样例满足测试点 $31\\sim 35$ 的约束条件。\n\n**【样例解释 #8】**\n\n该样例满足测试点 $36\\sim 50$ 的约束条件。\n\n**【数据范围】**\n\n本题共 $50$ 个测试点，每个 $2$ 分。\n\n对于所有测试数据，保证：\n\n- $1\\le n\\le 50$；\n- $1\\le k\\le 1000$；\n- $1\\le w\\le k^2$；\n- $1\\le t\\le 5$。\n\n::cute-table{tuack}\n\n|测试点编号|$n \\le$|$k \\le$|$t \\le$|\n|:--:|:--:|:--:|:--:|\n|$1\\sim 3$|$8$|$8$|$5$|\n|$4\\sim 7$|^|$16$|^|\n|$8\\sim 15$|$30$|$40$|^|\n|$16\\sim 20$|$50$|$100$|$1$|\n|$21\\sim 30$|^|^|$3$|\n|$31\\sim 35$|^|$1000$|$1$|\n|$36\\sim 50$|^|^|$5$|", "locale": "zh-CN"}}}
{"pid": "P14382", "type": "P", "difficulty": 7, "samples": [["3 4\n3\n1 2\n1 4\n2 3", "3"], ["4 4\n4\n1 1\n1 4\n4 1\n4 4", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "枚举", "JOISC/JOIST（日本）"], "title": "[JOISC 2017] 开荒者 / Cultivation", "background": null, "description": "在 21XX 年，IOI 星球的居民计划移民至一颗新发现的星球。\n\n这颗新星球上有一片田地，它是一个由 $R$ 行和 $C$ 列组成的矩形网格。列的方向与南北方向平行，行的方向与东西方向平行。从北向南数第 $i$ 行、从西向东数第 $j$ 列的格子被称为格子 $(i, j)$。田地的西北角是格子 $(1, 1)$，东南角是格子 $(R, C)$。每年，IOI 星球的居民都会选择吹过田地的风的方向。风的方向可以是东、西、南或北之一。\n\n为了在新星球上从事农业，他们将在田地的每个格子上种植“JOI 草”。在移民第一年的春季，田地中 $N$ 个格子已种有 JOI 草。\n\nJOI 草的覆盖范围会随风扩展。每年夏季，JOI 草的种子会被风吹向居民选定的方向。种子会向风的方向移动一个格子并落地。如果种子落在一个没有 JOI 草的格子上，那么该格子将在下一年春季长出 JOI 草。一旦一个格子长出 JOI 草，它在未来将一直保持有 JOI 草。\n\n我们希望计算：如果适当调整风的方向，使田地中所有格子都长出 JOI 草所需的最少年数。\n\n**任务**\n\n编写一个程序，计算在适当调整风的方向的前提下，使田地中所有格子都长出 JOI 草所需的最少年数。", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含两个由空格分隔的整数 $R$、$C$。表示田地是一个 $R$ 行 $C$ 列的矩形网格。\n- 第二行包含一个整数 $N$，表示在移民第一年春季，田地中已有 JOI 草的格子数。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含两个由空格分隔的整数 $S_i$、$E_i$。表示格子 $(S_i, E_i)$ 在移民第一年春季已种有 JOI 草。", "outputFormat": "向标准输出写入一行。该行输出包含在适当调整风的方向的前提下，使田地中所有格子都长出 JOI 草所需的最少年数。", "hint": "### 样例 1 解释\n\n在样例输入 1 中，以下格子在移民第一年的春季已种有 JOI 草。\n\n```\nx 0 x 0\nx x 0 x\nx x x x\n```\n\n新星球上的田地；标有‘0’的格子在移民第一年的春季已种有 JOI 草。\n\n在本样例输入中，若我们为前三年选择的风向依次为西、南、南，则三年后的春季所有格子都将长出 JOI 草。下表中的数字描述了每个格子在春季首次长出 JOI 草的年份。这是所需的最少年数。\n\n```\n1 0 1 0\n2 1 0 2\n3 2 2 3\n```\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le N \\le 300$。\n- $1 \\le R \\le 1\\,000\\,000\\,000$。\n- $1 \\le C \\le 1\\,000\\,000\\,000$。\n- $1 \\le S_i \\le R$（$1 \\le i \\le N$）。\n- $1 \\le E_i \\le C$（$1 \\le i \\le N$）。\n- 在移民第一年的春季，田地中至少存在一个没有 JOI 草的格子。\n- $(S_i, E_i) \\ne (S_j, E_j)$（$1 \\le i < j \\le N$）。\n\n### 子任务\n\n共有 6 个子任务。每个子任务的得分及附加约束如下：\n\n**子任务 1 [5 分]**\n\n- $R \\le 4$。\n- $C \\le 4$。\n\n**子任务 2 [10 分]**\n\n- $R \\le 40$。\n- $C \\le 40$。\n\n**子任务 3 [15 分]**\n\n- $R \\le 40$。\n\n**子任务 4 [30 分]**\n\n- $N \\le 25$。\n\n**子任务 5 [20 分]**\n\n- $N \\le 100$。\n\n**子任务 6 [20 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2017] 开荒者 / Cultivation", "background": null, "description": "在 21XX 年，IOI 星球的居民计划移民至一颗新发现的星球。\n\n这颗新星球上有一片田地，它是一个由 $R$ 行和 $C$ 列组成的矩形网格。列的方向与南北方向平行，行的方向与东西方向平行。从北向南数第 $i$ 行、从西向东数第 $j$ 列的格子被称为格子 $(i, j)$。田地的西北角是格子 $(1, 1)$，东南角是格子 $(R, C)$。每年，IOI 星球的居民都会选择吹过田地的风的方向。风的方向可以是东、西、南或北之一。\n\n为了在新星球上从事农业，他们将在田地的每个格子上种植“JOI 草”。在移民第一年的春季，田地中 $N$ 个格子已种有 JOI 草。\n\nJOI 草的覆盖范围会随风扩展。每年夏季，JOI 草的种子会被风吹向居民选定的方向。种子会向风的方向移动一个格子并落地。如果种子落在一个没有 JOI 草的格子上，那么该格子将在下一年春季长出 JOI 草。一旦一个格子长出 JOI 草，它在未来将一直保持有 JOI 草。\n\n我们希望计算：如果适当调整风的方向，使田地中所有格子都长出 JOI 草所需的最少年数。\n\n**任务**\n\n编写一个程序，计算在适当调整风的方向的前提下，使田地中所有格子都长出 JOI 草所需的最少年数。", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含两个由空格分隔的整数 $R$、$C$。表示田地是一个 $R$ 行 $C$ 列的矩形网格。\n- 第二行包含一个整数 $N$，表示在移民第一年春季，田地中已有 JOI 草的格子数。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含两个由空格分隔的整数 $S_i$、$E_i$。表示格子 $(S_i, E_i)$ 在移民第一年春季已种有 JOI 草。", "outputFormat": "向标准输出写入一行。该行输出包含在适当调整风的方向的前提下，使田地中所有格子都长出 JOI 草所需的最少年数。", "hint": "### 样例 1 解释\n\n在样例输入 1 中，以下格子在移民第一年的春季已种有 JOI 草。\n\n```\nx 0 x 0\nx x 0 x\nx x x x\n```\n\n新星球上的田地；标有‘0’的格子在移民第一年的春季已种有 JOI 草。\n\n在本样例输入中，若我们为前三年选择的风向依次为西、南、南，则三年后的春季所有格子都将长出 JOI 草。下表中的数字描述了每个格子在春季首次长出 JOI 草的年份。这是所需的最少年数。\n\n```\n1 0 1 0\n2 1 0 2\n3 2 2 3\n```\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le N \\le 300$。\n- $1 \\le R \\le 1\\,000\\,000\\,000$。\n- $1 \\le C \\le 1\\,000\\,000\\,000$。\n- $1 \\le S_i \\le R$（$1 \\le i \\le N$）。\n- $1 \\le E_i \\le C$（$1 \\le i \\le N$）。\n- 在移民第一年的春季，田地中至少存在一个没有 JOI 草的格子。\n- $(S_i, E_i) \\ne (S_j, E_j)$（$1 \\le i < j \\le N$）。\n\n### 子任务\n\n共有 6 个子任务。每个子任务的得分及附加约束如下：\n\n**子任务 1 [5 分]**\n\n- $R \\le 4$。\n- $C \\le 4$。\n\n**子任务 2 [10 分]**\n\n- $R \\le 40$。\n- $C \\le 40$。\n\n**子任务 3 [15 分]**\n\n- $R \\le 40$。\n\n**子任务 4 [30 分]**\n\n- $N \\le 25$。\n\n**子任务 5 [20 分]**\n\n- $N \\le 100$。\n\n**子任务 6 [20 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14383", "type": "P", "difficulty": 6, "samples": [["4\n1 3\n2 5\n4 8\n6 7", "4"], ["3\n1 4\n2 5\n3 6", "0"], ["5\n1 4\n2 10\n6 9\n7 8\n3 5", "8"], ["8\n1 15\n2 5\n3 8\n4 6\n14 16\n7 9\n10 13\n11 12", "16"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["图论", "2017", "线段树", "并查集", "JOISC/JOIST（日本）"], "title": "[JOISC 2017] 港口设施 / Port Facility", "background": "", "description": "每天，大量集装箱通过船只运抵 JOI 港口，随后由卡车运往全国各地。\n\nJOI 港口非常狭窄，仅有两个区域可用于堆放集装箱。在每个区域中，我们可以垂直堆叠任意数量的集装箱。\n\n出于安全考虑，当集装箱由船只运抵时，我们必须将其放置在其中一个区域的顶部；若该区域已有集装箱，则必须将其叠放在已有集装箱的上方。当集装箱由卡车运走时，我们必须从其中一个区域的顶部取走集装箱。\n\n今天，将有 $N$ 个集装箱运抵 JOI 港口，且所有集装箱最终都将由卡车运走。\n\n你的任务是管理 JOI 港口的设施。对于每个集装箱，你已知其到达时间和离开时间。请编写一个程序，计算满足上述条件的堆放与取走集装箱的方式总数，结果对 $1\\,000\\,000\\,007$ 取模。\n\n**任务**\n\n给定运抵 JOI 港口的集装箱数量，以及每个集装箱的到达与离开时间，编写一个程序，计算满足条件的堆放与取走集装箱的方式总数，结果对 $1\\,000\\,000\\,007$ 取模。", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含一个整数 $N$，表示运抵 JOI 港口的集装箱数量。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含两个由空格分隔的整数 $A_i$、$B_i$。表示第 $i$ 个集装箱将在时间 $A_i$ 到达 JOI 港口，并在时间 $B_i$ 由卡车运走。", "outputFormat": "向标准输出写入一行。该行输出包含满足条件的堆放与取走集装箱的方式总数，结果对 $1\\,000\\,000\\,007$ 取模。", "hint": "### 样例 1 解释\n\n共有 4 种堆放与取走集装箱的方式。将两个区域记为 A、B。以下方式满足条件：\n\n- 将第 1、2、3、4 号集装箱分别放入区域 A、B、A、A。\n- 将第 1、2、3、4 号集装箱分别放入区域 A、B、A、B。\n- 将第 1、2、3、4 号集装箱分别放入区域 B、A、B、A。\n- 将第 1、2、3、4 号集装箱分别放入区域 B、A、B、B。\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le N \\le 1\\,000\\,000$。\n- $1 \\le A_i \\le 2N$（$1 \\le i \\le N$）。\n- $1 \\le B_i \\le 2N$（$1 \\le i \\le N$）。\n- $A_i < B_i$（$1 \\le i \\le N$）。\n- $2N$ 个整数 $A_1, \\cdots, A_N, B_1, \\cdots, B_N$ 互不相同。\n\n### 子任务\n\n共有 4 个子任务。每个子任务的得分及附加约束如下：\n\n**子任务 1 [10 分]**\n\n- $N \\le 20$。\n\n**子任务 2 [12 分]**\n\n- $N \\le 2\\,000$。\n\n**子任务 3 [56 分]**\n\n- $N \\le 100\\,000$。\n\n**子任务 4 [22 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2017] 港口设施 / Port Facility", "background": "", "description": "每天，大量集装箱通过船只运抵 JOI 港口，随后由卡车运往全国各地。\n\nJOI 港口非常狭窄，仅有两个区域可用于堆放集装箱。在每个区域中，我们可以垂直堆叠任意数量的集装箱。\n\n出于安全考虑，当集装箱由船只运抵时，我们必须将其放置在其中一个区域的顶部；若该区域已有集装箱，则必须将其叠放在已有集装箱的上方。当集装箱由卡车运走时，我们必须从其中一个区域的顶部取走集装箱。\n\n今天，将有 $N$ 个集装箱运抵 JOI 港口，且所有集装箱最终都将由卡车运走。\n\n你的任务是管理 JOI 港口的设施。对于每个集装箱，你已知其到达时间和离开时间。请编写一个程序，计算满足上述条件的堆放与取走集装箱的方式总数，结果对 $1\\,000\\,000\\,007$ 取模。\n\n**任务**\n\n给定运抵 JOI 港口的集装箱数量，以及每个集装箱的到达与离开时间，编写一个程序，计算满足条件的堆放与取走集装箱的方式总数，结果对 $1\\,000\\,000\\,007$ 取模。", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含一个整数 $N$，表示运抵 JOI 港口的集装箱数量。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含两个由空格分隔的整数 $A_i$、$B_i$。表示第 $i$ 个集装箱将在时间 $A_i$ 到达 JOI 港口，并在时间 $B_i$ 由卡车运走。", "outputFormat": "向标准输出写入一行。该行输出包含满足条件的堆放与取走集装箱的方式总数，结果对 $1\\,000\\,000\\,007$ 取模。", "hint": "### 样例 1 解释\n\n共有 4 种堆放与取走集装箱的方式。将两个区域记为 A、B。以下方式满足条件：\n\n- 将第 1、2、3、4 号集装箱分别放入区域 A、B、A、A。\n- 将第 1、2、3、4 号集装箱分别放入区域 A、B、A、B。\n- 将第 1、2、3、4 号集装箱分别放入区域 B、A、B、A。\n- 将第 1、2、3、4 号集装箱分别放入区域 B、A、B、B。\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le N \\le 1\\,000\\,000$。\n- $1 \\le A_i \\le 2N$（$1 \\le i \\le N$）。\n- $1 \\le B_i \\le 2N$（$1 \\le i \\le N$）。\n- $A_i < B_i$（$1 \\le i \\le N$）。\n- $2N$ 个整数 $A_1, \\cdots, A_N, B_1, \\cdots, B_N$ 互不相同。\n\n### 子任务\n\n共有 4 个子任务。每个子任务的得分及附加约束如下：\n\n**子任务 1 [10 分]**\n\n- $N \\le 20$。\n\n**子任务 2 [12 分]**\n\n- $N \\le 2\\,000$。\n\n**子任务 3 [56 分]**\n\n- $N \\le 100\\,000$。\n\n**子任务 4 [22 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14384", "type": "P", "difficulty": 7, "samples": [["3 2 50\n0\n200\n300", "2"], ["3 2 10\n0\n200\n300", "8"], ["20 6 1\n0\n2\n13\n27\n35\n46\n63\n74\n80\n88\n100\n101\n109\n110\n119\n138\n139\n154\n172\n192", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2017", "二分", "Ad-hoc", "JOISC/JOIST（日本）"], "title": "[JOISC 2017] 烟花棒 / Sparklers", "background": "", "description": "JOI 君和他的朋友们将玩仙女棒。总共有 $N$ 个人，包括 JOI 君和他的朋友们。如果某人点燃一根仙女棒，它会持续燃烧恰好 $T$ 秒。\n\n一开始，JOI 君和他的朋友们沿着一条从东向西延伸的直线街道分散站立。JOI 君和他的朋友们被编号为 $1$ 到 $N$。对于任意 $i, j$，若 $i < j$，则第 $i$ 个人站在第 $j$ 个人的西侧，或者第 $i$ 个人与第 $j$ 个人站在同一位置。第 $i$ 个人距离最西侧的人（即第 $1$ 个人）的距离为 $X_i$ 米。JOI 君是第 $K$ 个人。\n\n当他们开始玩仙女棒时，他们发现打火机燃料不足，只能点燃一根仙女棒。\n\n因此，他们决定先点燃 JOI 君的仙女棒，然后通过用燃烧的仙女棒接触其他仙女棒来点燃它们。\n\n由于每根仙女棒只能燃烧 $T$ 秒，JOI 君和他的朋友们必须合作，将火势传递给所有仙女棒。当他们从一根燃烧的仙女棒点燃另一根仙女棒时，必须满足以下条件：\n\n- 他们必须在点燃仙女棒后的 $T$ 秒内接触一根燃烧的仙女棒。他们可以在恰好 $T$ 秒后进行接触。\n- 他们计划点燃的仙女棒此前不能已被点燃。\n- 持有燃烧仙女棒的人与持有未点燃仙女棒的人必须处于同一位置。\n\n我们忽略从一根仙女棒点燃另一根仙女棒所需的等待时间。\n\n由于 JOI 君和他的朋友们一开始是分散站立的，他们必须适当移动以传递火势。他们可以以任意速度向西或向东奔跑。但奔跑过快在玩耍时是危险的。因此，他们将制定规则：他们的速度不得超过每秒 $s$ 米。这里，$s$ 是一个非负整数。\n\n他们应如何设定速度上限，才能将火势传递给所有仙女棒？\n\n**任务**\n\n给定仙女棒燃烧的持续时间以及 JOI 君和他的朋友们的初始位置，编写一个程序，计算最小的整数 $s$，使得当速度上限为每秒 $s$ 米时，他们能够将火势传递给所有仙女棒。\n", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含三个由空格分隔的整数 $N$、$K$、$T$。表示共有 $N$ 个人，JOI 君是第 $K$ 个人，且一根仙女棒可燃烧 $T$ 秒。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含一个整数 $X_i$。表示第 $i$ 个人在初始时距离最西侧的人为 $X_i$ 米。\n", "outputFormat": "向标准输出写入一行。该行输出包含最小的整数 $s$，使得当速度上限为每秒 $s$ 米时，他们能够将火势传递给所有仙女棒。\n", "hint": "### 样例 1 解释\n\n在本样例输入中，速度上限可以为每秒 $2$ 米。第一个人向东移动，第二个人向西移动，第三个人向西移动；他们的速度均为每秒 $2$ 米。经过 $50$ 秒后，第二个人将火传递给第一个人。随后，第一个人向东移动，第三个人向西移动；他们的速度仍为每秒 $2$ 米。再经过 $25$ 秒后，第一个人将火传递给第三个人。若速度上限为每秒 $1$ 米，则他们无法将火势传递给所有仙女棒。\n\n### 样例 2 解释\n\n在本样例输入中，速度上限可以为每秒 $8$ 米。第一个人向东移动，第二个人向东移动，第三个人向西移动；他们的速度均为每秒 $8$ 米。经过 $3$ 秒后，第二个人停止移动，而第一和第三个人继续移动。再经过 $6.5$ 秒后，第二和第三个人到达同一位置，但他们并未传递火势；第二和第三个人停止移动，第一个人继续移动。再经过 $0.5$ 秒后，第二个人将火传递给第三个人；第一个人继续移动，第三个人向西移动，速度为每秒 $8$ 米。再经过 $9$ 秒后，第一和第三个人到达同一位置，第三个人将火传递给第一个人。若速度上限为每秒 $7$ 米，则他们无法将火势传递给所有仙女棒。\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le K \\le N \\le 100\\,000$。\n- $1 \\le T \\le 1\\,000\\,000\\,000$。\n- $0 \\le X_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）。\n- $X_1 = 0$。\n- $X_i \\le X_j$（$1 \\le i \\le j \\le N$）。\n\n### 子任务\n\n共有 3 个子任务。每个子任务的得分及附加约束如下：\n\n**子任务 1 [30 分]**\n\n- $N \\le 20$。\n\n**子任务 2 [20 分]**\n\n- $N \\le 1\\,000$。\n\n**子任务 3 [50 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2017] 烟花棒 / Sparklers", "background": "", "description": "JOI 君和他的朋友们将玩仙女棒。总共有 $N$ 个人，包括 JOI 君和他的朋友们。如果某人点燃一根仙女棒，它会持续燃烧恰好 $T$ 秒。\n\n一开始，JOI 君和他的朋友们沿着一条从东向西延伸的直线街道分散站立。JOI 君和他的朋友们被编号为 $1$ 到 $N$。对于任意 $i, j$，若 $i < j$，则第 $i$ 个人站在第 $j$ 个人的西侧，或者第 $i$ 个人与第 $j$ 个人站在同一位置。第 $i$ 个人距离最西侧的人（即第 $1$ 个人）的距离为 $X_i$ 米。JOI 君是第 $K$ 个人。\n\n当他们开始玩仙女棒时，他们发现打火机燃料不足，只能点燃一根仙女棒。\n\n因此，他们决定先点燃 JOI 君的仙女棒，然后通过用燃烧的仙女棒接触其他仙女棒来点燃它们。\n\n由于每根仙女棒只能燃烧 $T$ 秒，JOI 君和他的朋友们必须合作，将火势传递给所有仙女棒。当他们从一根燃烧的仙女棒点燃另一根仙女棒时，必须满足以下条件：\n\n- 他们必须在点燃仙女棒后的 $T$ 秒内接触一根燃烧的仙女棒。他们可以在恰好 $T$ 秒后进行接触。\n- 他们计划点燃的仙女棒此前不能已被点燃。\n- 持有燃烧仙女棒的人与持有未点燃仙女棒的人必须处于同一位置。\n\n我们忽略从一根仙女棒点燃另一根仙女棒所需的等待时间。\n\n由于 JOI 君和他的朋友们一开始是分散站立的，他们必须适当移动以传递火势。他们可以以任意速度向西或向东奔跑。但奔跑过快在玩耍时是危险的。因此，他们将制定规则：他们的速度不得超过每秒 $s$ 米。这里，$s$ 是一个非负整数。\n\n他们应如何设定速度上限，才能将火势传递给所有仙女棒？\n\n**任务**\n\n给定仙女棒燃烧的持续时间以及 JOI 君和他的朋友们的初始位置，编写一个程序，计算最小的整数 $s$，使得当速度上限为每秒 $s$ 米时，他们能够将火势传递给所有仙女棒。\n", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含三个由空格分隔的整数 $N$、$K$、$T$。表示共有 $N$ 个人，JOI 君是第 $K$ 个人，且一根仙女棒可燃烧 $T$ 秒。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含一个整数 $X_i$。表示第 $i$ 个人在初始时距离最西侧的人为 $X_i$ 米。\n", "outputFormat": "向标准输出写入一行。该行输出包含最小的整数 $s$，使得当速度上限为每秒 $s$ 米时，他们能够将火势传递给所有仙女棒。\n", "hint": "### 样例 1 解释\n\n在本样例输入中，速度上限可以为每秒 $2$ 米。第一个人向东移动，第二个人向西移动，第三个人向西移动；他们的速度均为每秒 $2$ 米。经过 $50$ 秒后，第二个人将火传递给第一个人。随后，第一个人向东移动，第三个人向西移动；他们的速度仍为每秒 $2$ 米。再经过 $25$ 秒后，第一个人将火传递给第三个人。若速度上限为每秒 $1$ 米，则他们无法将火势传递给所有仙女棒。\n\n### 样例 2 解释\n\n在本样例输入中，速度上限可以为每秒 $8$ 米。第一个人向东移动，第二个人向东移动，第三个人向西移动；他们的速度均为每秒 $8$ 米。经过 $3$ 秒后，第二个人停止移动，而第一和第三个人继续移动。再经过 $6.5$ 秒后，第二和第三个人到达同一位置，但他们并未传递火势；第二和第三个人停止移动，第一个人继续移动。再经过 $0.5$ 秒后，第二个人将火传递给第三个人；第一个人继续移动，第三个人向西移动，速度为每秒 $8$ 米。再经过 $9$ 秒后，第一和第三个人到达同一位置，第三个人将火传递给第一个人。若速度上限为每秒 $7$ 米，则他们无法将火势传递给所有仙女棒。\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le K \\le N \\le 100\\,000$。\n- $1 \\le T \\le 1\\,000\\,000\\,000$。\n- $0 \\le X_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）。\n- $X_1 = 0$。\n- $X_i \\le X_j$（$1 \\le i \\le j \\le N$）。\n\n### 子任务\n\n共有 3 个子任务。每个子任务的得分及附加约束如下：\n\n**子任务 1 [30 分]**\n\n- $N \\le 20$。\n\n**子任务 2 [20 分]**\n\n- $N \\le 1\\,000$。\n\n**子任务 3 [50 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14385", "type": "P", "difficulty": 7, "samples": [["3 3\n1 2 1\n2 3 1\n3 1 1", "1"], ["3 2\n1 2 4\n1 2 2", "3"], ["6 3\n1 4 1\n2 5 1\n3 6 1", "2"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2017", "二分", "Ad-hoc", "JOISC/JOIST（日本）"], "title": "[JOISC 2017] 门票安排 / Arranging Tickets", "background": "", "description": "在 JOI 共和国，有 $N$ 个车站，编号从 $1$ 到 $N$。它们按顺时针方向排列在一条环形铁路上。\n\n有 $N$ 种火车票，编号从 $1$ 到 $N$。使用一张类型为 $i$（$1 \\le i \\le N-1$）的票，一个人可以从车站 $i$ 前往车站 $i+1$，或从车站 $i+1$ 前往车站 $i$。使用一张类型为 $N$ 的票，一个人可以从车站 $1$ 前往车站 $N$，或从车站 $N$ 前往车站 $1$。我们只能购买包含每种类型票各一张的票包。\n\n你正在 JOI 共和国的一家旅行社工作。你的任务是为客户安排车票。\n\n今天，你有 $M$ 个订票请求。第 $i$ 个请求表示有 $C_i$ 人希望从车站 $A_i$ 前往车站 $B_i$。这些 $C_i$ 人旅行时无需走相同的路线。\n\n你希望知道，为了满足所有请求，你最少需要购买多少个票包。\n\n**任务**\n\n给定车站数量和请求信息，编写一个程序，计算你最少需要购买的票包数量。", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含两个由空格分隔的整数 $N$、$M$。表示 JOI 共和国有 $N$ 个车站，今天你有 $M$ 个请求。\n- 接下来的 $M$ 行中，第 $i$ 行（$1 \\le i \\le M$）包含三个由空格分隔的整数 $A_i$、$B_i$、$C_i$。表示第 $i$ 个请求是 $C_i$ 人希望从车站 $A_i$ 前往车站 $B_i$。\n", "outputFormat": "向标准输出写入一行。该行输出包含你最少需要购买的票包数量。", "hint": "### 样例 1 解释\n\n若所有人都顺时针旅行，则每种票各需一张，因此你只需购买一个票包。\n\n### 样例 2 解释\n\n若人们按以下方式旅行，则每种票各需三张：\n\n- 在第一个请求中，三人顺时针旅行，一人逆时针旅行。\n- 在第二个请求中，两人逆时针旅行。\n\n因此，购买三个票包已足够。我们输出 3，因为若仅购买两个票包，则无法完成所有旅行。\n\n### 样例 3 解释\n\n例如，你购买了两个票包，并按以下方式分配：\n\n- 将票 1、2、3 给希望从车站 1 前往车站 4 的人。\n- 将票 1、6、5 给希望从车站 2 前往车站 5 的人。\n- 将票 3、4、5 给希望从车站 3 前往车站 6 的人。\n\n我们输出 2，因为若仅购买一个票包，则无法完成所有旅行。\n\n### 约束条件\n\n所有输入数据满足以下条件：\n\n- $3 \\le N \\le 200\\,000$。\n- $1 \\le M \\le 100\\,000$。\n- $1 \\le A_i \\le N$（$1 \\le i \\le M$）。\n- $1 \\le B_i \\le N$（$1 \\le i \\le M$）。\n- $1 \\le C_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le M$）。\n- $A_i \\ne B_i$（$1 \\le i \\le M$）。\n\n### 子任务\n\n共有 5 个子任务。每个子任务的得分及附加约束如下：\n\n**子任务 1 [10 分]**\n\n- $N \\le 20$。\n- $M \\le 20$。\n- $C_i = 1$（$1 \\le i \\le M$）。\n\n**子任务 2 [35 分]**\n\n- $N \\le 300$。\n- $M \\le 300$。\n- $C_i = 1$（$1 \\le i \\le M$）。\n\n**子任务 3 [20 分]**\n\n- $N \\le 3\\,000$。\n- $M \\le 3\\,000$。\n- $C_i = 1$（$1 \\le i \\le M$）。\n\n**子任务 4 [20 分]**\n\n- $C_i = 1$（$1 \\le i \\le M$）。\n\n**子任务 5 [15 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2017] 门票安排 / Arranging Tickets", "background": "", "description": "在 JOI 共和国，有 $N$ 个车站，编号从 $1$ 到 $N$。它们按顺时针方向排列在一条环形铁路上。\n\n有 $N$ 种火车票，编号从 $1$ 到 $N$。使用一张类型为 $i$（$1 \\le i \\le N-1$）的票，一个人可以从车站 $i$ 前往车站 $i+1$，或从车站 $i+1$ 前往车站 $i$。使用一张类型为 $N$ 的票，一个人可以从车站 $1$ 前往车站 $N$，或从车站 $N$ 前往车站 $1$。我们只能购买包含每种类型票各一张的票包。\n\n你正在 JOI 共和国的一家旅行社工作。你的任务是为客户安排车票。\n\n今天，你有 $M$ 个订票请求。第 $i$ 个请求表示有 $C_i$ 人希望从车站 $A_i$ 前往车站 $B_i$。这些 $C_i$ 人旅行时无需走相同的路线。\n\n你希望知道，为了满足所有请求，你最少需要购买多少个票包。\n\n**任务**\n\n给定车站数量和请求信息，编写一个程序，计算你最少需要购买的票包数量。", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含两个由空格分隔的整数 $N$、$M$。表示 JOI 共和国有 $N$ 个车站，今天你有 $M$ 个请求。\n- 接下来的 $M$ 行中，第 $i$ 行（$1 \\le i \\le M$）包含三个由空格分隔的整数 $A_i$、$B_i$、$C_i$。表示第 $i$ 个请求是 $C_i$ 人希望从车站 $A_i$ 前往车站 $B_i$。\n", "outputFormat": "向标准输出写入一行。该行输出包含你最少需要购买的票包数量。", "hint": "### 样例 1 解释\n\n若所有人都顺时针旅行，则每种票各需一张，因此你只需购买一个票包。\n\n### 样例 2 解释\n\n若人们按以下方式旅行，则每种票各需三张：\n\n- 在第一个请求中，三人顺时针旅行，一人逆时针旅行。\n- 在第二个请求中，两人逆时针旅行。\n\n因此，购买三个票包已足够。我们输出 3，因为若仅购买两个票包，则无法完成所有旅行。\n\n### 样例 3 解释\n\n例如，你购买了两个票包，并按以下方式分配：\n\n- 将票 1、2、3 给希望从车站 1 前往车站 4 的人。\n- 将票 1、6、5 给希望从车站 2 前往车站 5 的人。\n- 将票 3、4、5 给希望从车站 3 前往车站 6 的人。\n\n我们输出 2，因为若仅购买一个票包，则无法完成所有旅行。\n\n### 约束条件\n\n所有输入数据满足以下条件：\n\n- $3 \\le N \\le 200\\,000$。\n- $1 \\le M \\le 100\\,000$。\n- $1 \\le A_i \\le N$（$1 \\le i \\le M$）。\n- $1 \\le B_i \\le N$（$1 \\le i \\le M$）。\n- $1 \\le C_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le M$）。\n- $A_i \\ne B_i$（$1 \\le i \\le M$）。\n\n### 子任务\n\n共有 5 个子任务。每个子任务的得分及附加约束如下：\n\n**子任务 1 [10 分]**\n\n- $N \\le 20$。\n- $M \\le 20$。\n- $C_i = 1$（$1 \\le i \\le M$）。\n\n**子任务 2 [35 分]**\n\n- $N \\le 300$。\n- $M \\le 300$。\n- $C_i = 1$（$1 \\le i \\le M$）。\n\n**子任务 3 [20 分]**\n\n- $N \\le 3\\,000$。\n- $M \\le 3\\,000$。\n- $C_i = 1$（$1 \\le i \\le M$）。\n\n**子任务 4 [20 分]**\n\n- $C_i = 1$（$1 \\le i \\le M$）。\n\n**子任务 5 [15 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14387", "type": "P", "difficulty": 6, "samples": [["9 3 3\n3\n1\n1\n1\n2\n2\n2\n3\n3\n2 4\n4 9\n6 7", "1\n3\n0"], ["5 2 1\n2\n1\n1\n1\n2\n1 4", "1"], ["15 5 15\n5\n4\n1\n2\n3\n1\n1\n2\n4\n5\n4\n1\n5\n3\n5\n8 1\n11 1\n5 3\n6 11\n9 12\n15 14\n15 2\n3 12\n2 1\n4 8\n15 5\n12 6\n1 13\n13 8\n14 9", "2\n1\n1\n3\n2\n0\n3\n4\n0\n1\n3\n4\n1\n2\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2017", "倍增", "JOISC/JOIST（日本）"], "title": "[JOISC 2017] 火车旅行 / Railway Trip", "background": "", "description": "JOI 铁路公司运营一条铁路。在 JOI 铁路的线路上，有 $N$ 个车站沿直线排列，编号从 $1$ 到 $N$。对于每个 $i$（$1 \\le i \\le N - 1$），车站 $i$ 与车站 $i + 1$ 由一条铁轨连接。\n\nJOI 铁路公司运营 $K$ 种类型的列车，每种列车均双向运行。列车类型用 $1$ 到 $K$（含）之间的整数表示。每个车站有一个“等级”，也是一个 $1$ 到 $K$（含）之间的整数。对于每个 $i$（$1 \\le i \\le N$），车站 $i$ 的等级为 $L_i$。两端的车站，即车站 $1$ 和车站 $N$，等级均为 $K$。\n\n类型为 $j$（$1 \\le j \\le K$）的列车会在所有等级大于等于 $j$ 的车站停靠，且不在其他任何车站停靠。由于两端的车站（即车站 $1$ 和车站 $N$）等级均为 $K$，因此所有列车均在这两个车站停靠。\n\n每天都有许多乘客使用 JOI 铁路。在旅途中，他们可以乘坐方向与目的地相反的列车，或者直接经过目的地。但在旅行结束时，他们必须在目的地车站下车。他们不喜欢在车站过多停靠，因此会尽量选择中间停靠站数量最少的路线，而不论经过的车站总数或换乘次数。若乘客在某个车站下车换乘，我们将其计为一次停靠。起点站的首次停靠和终点站的最后一次停靠不计入中间停靠站。\n\n你的任务是编写一个程序，能够回答每位乘客的最小中间停靠站数量的查询。\n\n**任务**\n\n给定 JOI 铁路的信息，以及每位乘客的起始站和目的地，编写一个程序，能够回答每位乘客的最小中间停靠站数量的查询。", "inputFormat": "从标准输入读取以下数据：\n\n- 输入的第一行包含三个以空格分隔的整数 $N$、$K$、$Q$。这表示 JOI 铁路有 $N$ 个车站，有 $K$ 种类型的列车，并给出 $Q$ 个关于两站之间旅行的查询。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含一个整数 $L_i$，表示车站 $i$ 的等级。\n- 接下来的 $Q$ 行中，第 $k$ 行（$1 \\le k \\le Q$）包含两个以空格分隔的整数 $A_i$、$B_i$。这表示第 $k$ 位乘客的起始站和目的地分别为车站 $A_i$ 和 $B_i$。\n", "outputFormat": "向标准输出写入 $Q$ 行。第 $k$ 行（$1 \\le k \\le Q$）包含从车站 $A_k$ 到车站 $B_k$ 的路线中最小的中间停靠站数量。\n", "hint": "### 样例 1 解释\n\n在本样例输入中，给出了三个关于两站之间旅行的查询：\n\n- 第一个查询是关于从车站 2 到车站 4 的旅行。若乘客乘坐类型为 1 的列车从车站 2 直达车站 4，则仅有一个中间停靠站，即车站 3。\n- 第二个查询是关于从车站 4 到车站 9 的旅行。若乘客先乘坐类型为 1 的列车从车站 4 到车站 5，再乘坐类型为 2 的列车从车站 5 到车站 1，最后乘坐类型为 3 的列车从车站 1 到车站 9，则共有三个中间停靠站，分别为车站 5、1 和 8。\n- 第三个查询是关于从车站 6 到车站 7 的旅行。若乘客乘坐类型为 2 的列车从车站 6 直达车站 7，则无中间停靠站。\n\n### 样例 2 解释\n\n请注意，乘客在旅途中可以经过目的地车站。\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $2 \\le N \\le 100\\,000$。\n- $1 \\le K \\le N$。\n- $1 \\le Q \\le 100\\,000$。\n- $1 \\le L_i \\le K$（$1 \\le i \\le N$）。\n- $1 \\le A_k \\le N$（$1 \\le k \\le Q$）。\n- $1 \\le B_k \\le N$（$1 \\le k \\le Q$）。\n- $A_k \\ne B_k$（$1 \\le k \\le Q$）。\n\n### 子任务\n\n共有 4 个子任务。每个子任务的得分及额外约束如下：\n\n**子任务 1 [5 分]**\n\n- $N \\le 100$。\n- $K \\le 100$。\n- $Q \\le 50$。\n\n**子任务 2 [15 分]**\n\n- $Q \\le 50$。\n\n**子任务 3 [25 分]**\n\n- $K \\le 20$。\n\n**子任务 4 [55 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2017] 火车旅行 / Railway Trip", "background": "", "description": "JOI 铁路公司运营一条铁路。在 JOI 铁路的线路上，有 $N$ 个车站沿直线排列，编号从 $1$ 到 $N$。对于每个 $i$（$1 \\le i \\le N - 1$），车站 $i$ 与车站 $i + 1$ 由一条铁轨连接。\n\nJOI 铁路公司运营 $K$ 种类型的列车，每种列车均双向运行。列车类型用 $1$ 到 $K$（含）之间的整数表示。每个车站有一个“等级”，也是一个 $1$ 到 $K$（含）之间的整数。对于每个 $i$（$1 \\le i \\le N$），车站 $i$ 的等级为 $L_i$。两端的车站，即车站 $1$ 和车站 $N$，等级均为 $K$。\n\n类型为 $j$（$1 \\le j \\le K$）的列车会在所有等级大于等于 $j$ 的车站停靠，且不在其他任何车站停靠。由于两端的车站（即车站 $1$ 和车站 $N$）等级均为 $K$，因此所有列车均在这两个车站停靠。\n\n每天都有许多乘客使用 JOI 铁路。在旅途中，他们可以乘坐方向与目的地相反的列车，或者直接经过目的地。但在旅行结束时，他们必须在目的地车站下车。他们不喜欢在车站过多停靠，因此会尽量选择中间停靠站数量最少的路线，而不论经过的车站总数或换乘次数。若乘客在某个车站下车换乘，我们将其计为一次停靠。起点站的首次停靠和终点站的最后一次停靠不计入中间停靠站。\n\n你的任务是编写一个程序，能够回答每位乘客的最小中间停靠站数量的查询。\n\n**任务**\n\n给定 JOI 铁路的信息，以及每位乘客的起始站和目的地，编写一个程序，能够回答每位乘客的最小中间停靠站数量的查询。", "inputFormat": "从标准输入读取以下数据：\n\n- 输入的第一行包含三个以空格分隔的整数 $N$、$K$、$Q$。这表示 JOI 铁路有 $N$ 个车站，有 $K$ 种类型的列车，并给出 $Q$ 个关于两站之间旅行的查询。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含一个整数 $L_i$，表示车站 $i$ 的等级。\n- 接下来的 $Q$ 行中，第 $k$ 行（$1 \\le k \\le Q$）包含两个以空格分隔的整数 $A_i$、$B_i$。这表示第 $k$ 位乘客的起始站和目的地分别为车站 $A_i$ 和 $B_i$。\n", "outputFormat": "向标准输出写入 $Q$ 行。第 $k$ 行（$1 \\le k \\le Q$）包含从车站 $A_k$ 到车站 $B_k$ 的路线中最小的中间停靠站数量。\n", "hint": "### 样例 1 解释\n\n在本样例输入中，给出了三个关于两站之间旅行的查询：\n\n- 第一个查询是关于从车站 2 到车站 4 的旅行。若乘客乘坐类型为 1 的列车从车站 2 直达车站 4，则仅有一个中间停靠站，即车站 3。\n- 第二个查询是关于从车站 4 到车站 9 的旅行。若乘客先乘坐类型为 1 的列车从车站 4 到车站 5，再乘坐类型为 2 的列车从车站 5 到车站 1，最后乘坐类型为 3 的列车从车站 1 到车站 9，则共有三个中间停靠站，分别为车站 5、1 和 8。\n- 第三个查询是关于从车站 6 到车站 7 的旅行。若乘客乘坐类型为 2 的列车从车站 6 直达车站 7，则无中间停靠站。\n\n### 样例 2 解释\n\n请注意，乘客在旅途中可以经过目的地车站。\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $2 \\le N \\le 100\\,000$。\n- $1 \\le K \\le N$。\n- $1 \\le Q \\le 100\\,000$。\n- $1 \\le L_i \\le K$（$1 \\le i \\le N$）。\n- $1 \\le A_k \\le N$（$1 \\le k \\le Q$）。\n- $1 \\le B_k \\le N$（$1 \\le k \\le Q$）。\n- $A_k \\ne B_k$（$1 \\le k \\le Q$）。\n\n### 子任务\n\n共有 4 个子任务。每个子任务的得分及额外约束如下：\n\n**子任务 1 [5 分]**\n\n- $N \\le 100$。\n- $K \\le 100$。\n- $Q \\le 50$。\n\n**子任务 2 [15 分]**\n\n- $Q \\le 50$。\n\n**子任务 3 [25 分]**\n\n- $K \\le 20$。\n\n**子任务 4 [55 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14388", "type": "P", "difficulty": 7, "samples": [["19 1 4 8 7\n10\n1 20\n2 10\n4 5\n6 5", "103"], ["105 3 5 9 10\n59\n68\n71\n4 71\n6 32\n7 29\n3 62\n2 35", "547"], ["1000000000000 1 1 1000000 6\n999999259244\n1 123456789", "333333209997456789"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2017", "斜率优化", "JOISC/JOIST（日本）"], "title": "[JOISC 2017] 长途巴士 / Long Distance Coach", "background": "", "description": "在城市 I 与城市 O 之间有一辆长途客车，车上配备了一台供水机，乘客和司机均可从中取水饮用。客车于时间 $0$ 从城市 I 出发，于时间 $X$ 抵达城市 O。沿途共有 $N$ 个补水点，客车在第 $i$ 个补水点（$1 \\le i \\le N$）的到达时间为 $S_i$。\n\n初始时，供水机内无水。我们可以在出发前向供水机注水；此外，当客车停靠在补水点时，也可向供水机注水。无论客车处于何处，每升水的价格均为 $W$ 日元。\n\n在城市 I，有 $M$ 名乘客上车，乘客编号为 $1$ 至 $M$。除城市 I 外，其他地点无乘客上车。第 $j$ 名乘客（$1 \\le j \\le M$）在时间 $D_j$ 需要一升水。若他饮水，则在经过时间 $T$ 后将再次需要一升水。换言之，第 $j$ 名乘客在时间 $D_j + kT$（$k = 0, 1, 2, \\ldots$）需要水。此处满足 $1 \\le D_j < T$，且所有乘客的 $T$ 值相同。若供水机在乘客需要水时无水，则该乘客将离开客车。若第 $j$ 名乘客在抵达城市 O 前离开客车，我们需要退还其车费，退款费用为 $C_j$ 日元。\n\n司机同样需要饮水。若他饮水，则在经过时间 $T$ 后将再次需要一升水，方式与乘客相同。换言之，司机在时间 $kT$（$k = 0, 1, 2, \\ldots$）需要水。若供水机在司机需要水时无水，则客车运营将停止。\n\n不会同时有两人需要水。当客车抵达城市 O 或补水点时，乘客和司机均不需要水。\n\n通过调整在补水点向供水机注水的水量，我们希望最小化水费与退款费用之和，并确保客车能够顺利运营至城市 O。你的任务是决定在旅途中于何处、注入多少水量至供水机。\n\n**任务**\n\n给定客车的行驶时间、补水点信息、乘客与司机的需求信息，编写一个程序，计算在客车成功抵达城市 O 的前提下，水费与退款费用之和的最小值。", "inputFormat": "从标准输入读取以下数据：\n\n- 输入的第一行包含五个以空格分隔的整数 $X$、$N$、$M$、$W$、$T$。这表示客车将在时间 $X$ 抵达城市 O，沿途有 $N$ 个补水点，车上共有 $M$ 名乘客，每升水的价格为 $W$ 日元，乘客与司机的饮水间隔时间为 $T$。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含一个整数 $S_i$，表示客车将在时间 $S_i$ 到达第 $i$ 个补水点。\n- 接下来的 $M$ 行中，第 $j$ 行（$1 \\le j \\le M$）包含两个以空格分隔的整数 $D_j$、$C_j$，表示第 $j$ 名乘客首次需要水的时间为 $D_j$，且为其退款的费用为 $C_j$。", "outputFormat": "向标准输出写入一行。输出包含一个整数，表示最小总费用。\n", "hint": "### 样例 1 解释\n\n在本样例输入中，若我们在出发前向供水机注入 7 升水，并在第一个补水点注入 4 升水，则客车的运行过程如下：\n\n1. 客车从城市 I 出发。此时，供水机内有 7 升水。\n2. 司机与乘客 1、2、3、4 分别在时间 $0$、$1$、$2$、$4$、$6$ 饮用 1 升水。剩余水量为 2 升。\n3. 司机与乘客 1 分别在时间 $7$、$8$ 饮用 1 升水。剩余水量为 0 升。\n4. 在时间 $9$，乘客 2 需要水，但由于供水机无水，他离开客车。\n5. 在时间 $10$，我们在第一个补水点向供水机注入 4 升水。剩余水量为 4 升。\n6. 乘客 3、4、司机与乘客 1 分别在时间 $11$、$13$、$14$、$15$ 饮用 1 升水。剩余水量为 0 升。\n7. 在时间 $18$，乘客 3 需要水，但由于供水机无水，他离开客车。\n8. 在时间 $19$，客车抵达城市 O。\n\n总共用水量为 11 升，水费为 88 日元。乘客 2 与乘客 3 的退款费用之和为 15 日元。总费用为 103 日元。\n\n我们输出 103，因为若总费用小于或等于 102 日元，则无法使客车正常运行。\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le X \\le 1\\,000\\,000\\,000\\,000$。\n- $1 \\le N \\le 200\\,000$。\n- $1 \\le M \\le 200\\,000$。\n- $1 \\le W \\le 1\\,000\\,000$。\n- $1 \\le T \\le X$。\n- $1 \\le S_i < X$（$1 \\le i \\le N$）。\n- $1 \\le D_j < T$（$1 \\le j \\le M$）。\n- $1 \\le C_j \\le 1\\,000\\,000\\,000$（$1 \\le j \\le M$）。\n- $D_j$（$1 \\le j \\le M$）互不相同。\n- 当客车抵达城市 O 或补水点时，乘客与司机均不需要水。\n\n### 子任务\n\n共有 4 个子任务。每个子任务的得分及额外约束如下：\n\n**子任务 1 [16 分]**\n\n- $N \\le 8$。\n- $M \\le 8$。\n\n**子任务 2 [30 分]**\n\n- $N \\le 100$。\n- $M \\le 100$。\n\n**子任务 3 [25 分]**\n\n- $N \\le 2000$。\n- $M \\le 2000$。\n\n**子任务 4 [29 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2017] 长途巴士 / Long Distance Coach", "background": "", "description": "在城市 I 与城市 O 之间有一辆长途客车，车上配备了一台供水机，乘客和司机均可从中取水饮用。客车于时间 $0$ 从城市 I 出发，于时间 $X$ 抵达城市 O。沿途共有 $N$ 个补水点，客车在第 $i$ 个补水点（$1 \\le i \\le N$）的到达时间为 $S_i$。\n\n初始时，供水机内无水。我们可以在出发前向供水机注水；此外，当客车停靠在补水点时，也可向供水机注水。无论客车处于何处，每升水的价格均为 $W$ 日元。\n\n在城市 I，有 $M$ 名乘客上车，乘客编号为 $1$ 至 $M$。除城市 I 外，其他地点无乘客上车。第 $j$ 名乘客（$1 \\le j \\le M$）在时间 $D_j$ 需要一升水。若他饮水，则在经过时间 $T$ 后将再次需要一升水。换言之，第 $j$ 名乘客在时间 $D_j + kT$（$k = 0, 1, 2, \\ldots$）需要水。此处满足 $1 \\le D_j < T$，且所有乘客的 $T$ 值相同。若供水机在乘客需要水时无水，则该乘客将离开客车。若第 $j$ 名乘客在抵达城市 O 前离开客车，我们需要退还其车费，退款费用为 $C_j$ 日元。\n\n司机同样需要饮水。若他饮水，则在经过时间 $T$ 后将再次需要一升水，方式与乘客相同。换言之，司机在时间 $kT$（$k = 0, 1, 2, \\ldots$）需要水。若供水机在司机需要水时无水，则客车运营将停止。\n\n不会同时有两人需要水。当客车抵达城市 O 或补水点时，乘客和司机均不需要水。\n\n通过调整在补水点向供水机注水的水量，我们希望最小化水费与退款费用之和，并确保客车能够顺利运营至城市 O。你的任务是决定在旅途中于何处、注入多少水量至供水机。\n\n**任务**\n\n给定客车的行驶时间、补水点信息、乘客与司机的需求信息，编写一个程序，计算在客车成功抵达城市 O 的前提下，水费与退款费用之和的最小值。", "inputFormat": "从标准输入读取以下数据：\n\n- 输入的第一行包含五个以空格分隔的整数 $X$、$N$、$M$、$W$、$T$。这表示客车将在时间 $X$ 抵达城市 O，沿途有 $N$ 个补水点，车上共有 $M$ 名乘客，每升水的价格为 $W$ 日元，乘客与司机的饮水间隔时间为 $T$。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含一个整数 $S_i$，表示客车将在时间 $S_i$ 到达第 $i$ 个补水点。\n- 接下来的 $M$ 行中，第 $j$ 行（$1 \\le j \\le M$）包含两个以空格分隔的整数 $D_j$、$C_j$，表示第 $j$ 名乘客首次需要水的时间为 $D_j$，且为其退款的费用为 $C_j$。", "outputFormat": "向标准输出写入一行。输出包含一个整数，表示最小总费用。\n", "hint": "### 样例 1 解释\n\n在本样例输入中，若我们在出发前向供水机注入 7 升水，并在第一个补水点注入 4 升水，则客车的运行过程如下：\n\n1. 客车从城市 I 出发。此时，供水机内有 7 升水。\n2. 司机与乘客 1、2、3、4 分别在时间 $0$、$1$、$2$、$4$、$6$ 饮用 1 升水。剩余水量为 2 升。\n3. 司机与乘客 1 分别在时间 $7$、$8$ 饮用 1 升水。剩余水量为 0 升。\n4. 在时间 $9$，乘客 2 需要水，但由于供水机无水，他离开客车。\n5. 在时间 $10$，我们在第一个补水点向供水机注入 4 升水。剩余水量为 4 升。\n6. 乘客 3、4、司机与乘客 1 分别在时间 $11$、$13$、$14$、$15$ 饮用 1 升水。剩余水量为 0 升。\n7. 在时间 $18$，乘客 3 需要水，但由于供水机无水，他离开客车。\n8. 在时间 $19$，客车抵达城市 O。\n\n总共用水量为 11 升，水费为 88 日元。乘客 2 与乘客 3 的退款费用之和为 15 日元。总费用为 103 日元。\n\n我们输出 103，因为若总费用小于或等于 102 日元，则无法使客车正常运行。\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le X \\le 1\\,000\\,000\\,000\\,000$。\n- $1 \\le N \\le 200\\,000$。\n- $1 \\le M \\le 200\\,000$。\n- $1 \\le W \\le 1\\,000\\,000$。\n- $1 \\le T \\le X$。\n- $1 \\le S_i < X$（$1 \\le i \\le N$）。\n- $1 \\le D_j < T$（$1 \\le j \\le M$）。\n- $1 \\le C_j \\le 1\\,000\\,000\\,000$（$1 \\le j \\le M$）。\n- $D_j$（$1 \\le j \\le M$）互不相同。\n- 当客车抵达城市 O 或补水点时，乘客与司机均不需要水。\n\n### 子任务\n\n共有 4 个子任务。每个子任务的得分及额外约束如下：\n\n**子任务 1 [16 分]**\n\n- $N \\le 8$。\n- $M \\le 8$。\n\n**子任务 2 [30 分]**\n\n- $N \\le 100$。\n- $M \\le 100$。\n\n**子任务 3 [25 分]**\n\n- $N \\le 2000$。\n- $M \\le 2000$。\n\n**子任务 4 [29 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14389", "type": "P", "difficulty": 6, "samples": [["5\n1 2 3 4\n2 2 3\n1 1\n1 1\n1 3\n1 4\n4\n2 4\n4 2\n1 5\n5 3", "YES\nNO\nNO\nYES"], ["5\n2 3 1 3\n1 3\n1 2\n1 1\n1 3\n1 2\n4\n1 3\n3 1\n4 3\n2 5", "NO\nYES\nNO\nYES"], ["7\n6 3 4 1 2 5\n1 1\n1 5\n1 1\n1 1\n2 2 3\n1 4\n1 6\n3\n4 1\n5 3\n4 7", "YES\nNO\nYES"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["图论", "2017", "线段树", "JOISC/JOIST（日本）"], "title": "[JOISC 2017] 幽深府邸 / Long Mansion", "background": "", "description": "JOI 君家附近有一座宽敞的豪宅。豪宅中有 $N$ 个房间，自东向西排成一列。从最东边的房间起，第 $i$ 个房间被称为房间 $i$。对于每个满足 $1 \\le i \\le N-1$ 的 $i$，房间 $i$ 与房间 $i+1$ 之间由一条走廊相连。走廊可双向通行。从房间进入走廊需要一把钥匙。每把钥匙都有一个称为“类型”的编号，多个钥匙可以具有相同的类型。\n\n从房间 $i$ 或房间 $i+1$ 进入它们之间的走廊，需要一把类型为 $C_i$ 的钥匙。\n\n房间 $i$ 中有 $B_i$ 把钥匙，其类型为 $A_{i,j}$（$1 \\le j \\le B_i$）。若 JOI 君进入某个房间，他会拾取该房间内的所有钥匙，之后可随时使用这些钥匙进入走廊。\n\nJOI 君可无限次使用钥匙。有时，他会获得多个相同类型的钥匙，但与仅拥有一个该类型钥匙的情况相比，他并无特殊优势。\n\n为应对在豪宅中迷路的情况，JOI 君计划编写一个程序，用于回答以下查询：\n\n- 若 JOI 君在未携带任何钥匙的情况下进入房间 $x$，他能否移动到房间 $y$？\n\n你的任务是编写一个程序，代替 JOI 君回答上述查询。\n\n**任务**\n\n给定豪宅的信息与查询，编写一个程序，对于每个查询，判断在假设 JOI 君当前未携带任何钥匙的情况下，他是否能从一个房间移动到另一个房间。\n", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含一个整数 $N$，表示豪宅中房间的数量。\n- 第二行包含 $N-1$ 个以空格分隔的整数 $C_1, C_2, \\ldots, C_{N-1}$。这表示进入连接房间 $i$ 与房间 $i+1$ 的走廊，需要一把类型为 $C_i$ 的钥匙。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含一个正整数 $B_i$，以及 $B_i$ 个以空格分隔的整数 $A_{i,1}, A_{i,2}, \\ldots, A_{i,B_i}$。这表示房间 $i$ 中有 $B_i$ 把钥匙，其类型分别为 $A_{i,j}$（$1 \\le j \\le B_i$）。\n- 下一行包含一个整数 $Q$，表示查询的数量。\n- 接下来的 $Q$ 行中，第 $k$ 行（$1 \\le k \\le Q$）包含两个以空格分隔的整数 $X_k, Y_k$。这表示第 $k$ 个查询询问：假设 JOI 君当前未携带任何钥匙，他是否能从房间 $X_k$ 移动到房间 $Y_k$。\n", "outputFormat": "向标准输出写入 $Q$ 行。第 $k$ 行（$1 \\le k \\le Q$）若在假设 JOI 君当前未携带任何钥匙的情况下，他能从房间 $X_k$ 移动到房间 $Y_k$，则输出 YES；否则输出 NO。\n", "hint": "### 样例 1 解释\n\n- 在第一个查询中，若 JOI 君按房间 2、1、2、3、4 的顺序访问，他可以到达房间 4。\n- 在第二个查询中，他只能访问房间 3 和 4。由于他仅能获得类型为 1 和 3 的钥匙，因此无法到达房间 2。\n- 在第三个查询中，他无法从房间 5 获得类型为 4 的钥匙以进入房间 4，因此他无法到达房间 5。\n- 在第四个查询中，若他按房间 5、4、3 的顺序访问，他可以到达房间 3。\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $2 \\le N \\le 500000$。\n- $1 \\le Q \\le 500000$。\n- $1 \\le B_1 + B_2 + \\cdots + B_N \\le 500000$。\n- $1 \\le B_i \\le N$（$1 \\le i \\le N$）。\n- $1 \\le C_i \\le N$（$1 \\le i \\le N-1$）。\n- $1 \\le A_{i,j} \\le N$（$1 \\le i \\le N$，$1 \\le j \\le B_i$）。\n- 对于每个 $i$（$1 \\le i \\le N$），$B_i$ 个整数 $A_{i,1}, \\ldots, A_{i,B_i}$ 互不相同。\n- $1 \\le X_k \\le N$（$1 \\le k \\le Q$）。\n- $1 \\le Y_k \\le N$（$1 \\le k \\le Q$）。\n- $X_k \\ne Y_k$（$1 \\le k \\le Q$）。\n\n### 子任务\n\n本题共有 4 个子任务。每个子任务的得分与额外约束如下：\n\n**子任务 1 [5 分]**\n\n- $N \\le 5000$。\n- $Q \\le 5000$。\n- $B_1 + B_2 + \\cdots + B_N \\le 5000$。\n\n**子任务 2 [5 分]**\n\n- $N \\le 5000$。\n- $B_1 + B_2 + \\cdots + B_N \\le 5000$。\n\n**子任务 3 [15 分]**\n\n- $N \\le 100000$。\n- $C_i \\le 20$（$1 \\le i \\le N-1$）。\n- $A_{i,j} \\le 20$（$1 \\le i \\le N$，$1 \\le j \\le B_i$）。\n\n**子任务 4 [75 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2017] 幽深府邸 / Long Mansion", "background": "", "description": "JOI 君家附近有一座宽敞的豪宅。豪宅中有 $N$ 个房间，自东向西排成一列。从最东边的房间起，第 $i$ 个房间被称为房间 $i$。对于每个满足 $1 \\le i \\le N-1$ 的 $i$，房间 $i$ 与房间 $i+1$ 之间由一条走廊相连。走廊可双向通行。从房间进入走廊需要一把钥匙。每把钥匙都有一个称为“类型”的编号，多个钥匙可以具有相同的类型。\n\n从房间 $i$ 或房间 $i+1$ 进入它们之间的走廊，需要一把类型为 $C_i$ 的钥匙。\n\n房间 $i$ 中有 $B_i$ 把钥匙，其类型为 $A_{i,j}$（$1 \\le j \\le B_i$）。若 JOI 君进入某个房间，他会拾取该房间内的所有钥匙，之后可随时使用这些钥匙进入走廊。\n\nJOI 君可无限次使用钥匙。有时，他会获得多个相同类型的钥匙，但与仅拥有一个该类型钥匙的情况相比，他并无特殊优势。\n\n为应对在豪宅中迷路的情况，JOI 君计划编写一个程序，用于回答以下查询：\n\n- 若 JOI 君在未携带任何钥匙的情况下进入房间 $x$，他能否移动到房间 $y$？\n\n你的任务是编写一个程序，代替 JOI 君回答上述查询。\n\n**任务**\n\n给定豪宅的信息与查询，编写一个程序，对于每个查询，判断在假设 JOI 君当前未携带任何钥匙的情况下，他是否能从一个房间移动到另一个房间。\n", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含一个整数 $N$，表示豪宅中房间的数量。\n- 第二行包含 $N-1$ 个以空格分隔的整数 $C_1, C_2, \\ldots, C_{N-1}$。这表示进入连接房间 $i$ 与房间 $i+1$ 的走廊，需要一把类型为 $C_i$ 的钥匙。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含一个正整数 $B_i$，以及 $B_i$ 个以空格分隔的整数 $A_{i,1}, A_{i,2}, \\ldots, A_{i,B_i}$。这表示房间 $i$ 中有 $B_i$ 把钥匙，其类型分别为 $A_{i,j}$（$1 \\le j \\le B_i$）。\n- 下一行包含一个整数 $Q$，表示查询的数量。\n- 接下来的 $Q$ 行中，第 $k$ 行（$1 \\le k \\le Q$）包含两个以空格分隔的整数 $X_k, Y_k$。这表示第 $k$ 个查询询问：假设 JOI 君当前未携带任何钥匙，他是否能从房间 $X_k$ 移动到房间 $Y_k$。\n", "outputFormat": "向标准输出写入 $Q$ 行。第 $k$ 行（$1 \\le k \\le Q$）若在假设 JOI 君当前未携带任何钥匙的情况下，他能从房间 $X_k$ 移动到房间 $Y_k$，则输出 YES；否则输出 NO。\n", "hint": "### 样例 1 解释\n\n- 在第一个查询中，若 JOI 君按房间 2、1、2、3、4 的顺序访问，他可以到达房间 4。\n- 在第二个查询中，他只能访问房间 3 和 4。由于他仅能获得类型为 1 和 3 的钥匙，因此无法到达房间 2。\n- 在第三个查询中，他无法从房间 5 获得类型为 4 的钥匙以进入房间 4，因此他无法到达房间 5。\n- 在第四个查询中，若他按房间 5、4、3 的顺序访问，他可以到达房间 3。\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $2 \\le N \\le 500000$。\n- $1 \\le Q \\le 500000$。\n- $1 \\le B_1 + B_2 + \\cdots + B_N \\le 500000$。\n- $1 \\le B_i \\le N$（$1 \\le i \\le N$）。\n- $1 \\le C_i \\le N$（$1 \\le i \\le N-1$）。\n- $1 \\le A_{i,j} \\le N$（$1 \\le i \\le N$，$1 \\le j \\le B_i$）。\n- 对于每个 $i$（$1 \\le i \\le N$），$B_i$ 个整数 $A_{i,1}, \\ldots, A_{i,B_i}$ 互不相同。\n- $1 \\le X_k \\le N$（$1 \\le k \\le Q$）。\n- $1 \\le Y_k \\le N$（$1 \\le k \\le Q$）。\n- $X_k \\ne Y_k$（$1 \\le k \\le Q$）。\n\n### 子任务\n\n本题共有 4 个子任务。每个子任务的得分与额外约束如下：\n\n**子任务 1 [5 分]**\n\n- $N \\le 5000$。\n- $Q \\le 5000$。\n- $B_1 + B_2 + \\cdots + B_N \\le 5000$。\n\n**子任务 2 [5 分]**\n\n- $N \\le 5000$。\n- $B_1 + B_2 + \\cdots + B_N \\le 5000$。\n\n**子任务 3 [15 分]**\n\n- $N \\le 100000$。\n- $C_i \\le 20$（$1 \\le i \\le N-1$）。\n- $A_{i,j} \\le 20$（$1 \\le i \\le N$，$1 \\le j \\le B_i$）。\n\n**子任务 4 [75 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14390", "type": "P", "difficulty": 7, "samples": [["1\n6\n7\n0 1\n0 3\n1 2\n1 4\n2 4\n2 5\n3 4", ""]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "交互题", "Special Judge", "JOISC/JOIST（日本）"], "title": "[JOISC 2017] 自然公园 / Natural Park", "background": "", "description": "JOI 岛是一个观光区，整座岛屿被指定为自然公园。\n\nJOI 岛上有 $N$ 个地点和若干条道路。这些地点从 $0$ 到 $N-1$ 编号。每条道路连接两个不同的地点，且可双向通行。每个地点最多连接 7 条道路。任意两个不同地点之间至多仅有一条道路相连。只要经过若干条道路，我们便可从任意地点到达其他任意地点。\n\n你和你的朋友 IOI 女士将共同调查 JOI 岛。为高效完成调查，你需要弄清 JOI 岛的结构。JOI 岛十分危险，因为岛上栖息着许多野生动物。由于 IOI 女士拥有出色的运动能力，她将负责实地探索 JOI 岛，而你则根据 IOI 女士的报告来确定 JOI 岛的结构。\n\n你将提供两个地点 $A$、$B$ 以及若干中间地点给 IOI 女士，并询问：若仅允许经过给定的中间地点，是否可能从地点 $A$ 到达地点 $B$？随后，IOI 女士将探索 JOI 岛，并将结果报告给你。\n\n由于调查时间不能过长，查询次数应小于或等于 45000。\n\n**任务**\n\n编写一个程序，与 IOI 女士通信并确定 JOI 岛的结构。\n\n**实现细节**\n\n你需要编写一个程序，实现确定 JOI 岛结构的方法。你的程序应当声明函数 `void Answer(int A, int B);` 和 `int Ask(int A, int B, int Place[]);`，并且使用不低于 C++17 的语言标准提交试题。\n\n你的程序应实现以下函数：\n\n- `void Detect(int T, int N)`\n\n  该函数仅被调用一次。\n\n  - 参数 $T$ 为子任务编号，$N$ 为地点数量。\n\n你的程序应通过调用以下函数，输出其确定的 JOI 岛结构：\n\n- `void Answer(int A, int B)`\n\n  调用该函数的次数应等于 JOI 岛中道路的总数。\n\n  - 参数 $A$、$B$ 表示存在一条连接地点 $A$ 与地点 $B$ 的道路。\n  \n   参数应满足以下条件：\n\n    - $A$、$B$ 应满足 $0 \\le A < B \\le N-1$。若此条件不满足，你的程序将被判定为 **Wrong Answer[1]**。\n    - 若函数以参数 $(A, B)$ 被调用，则必须存在一条连接地点 $A$ 与地点 $B$ 的道路。若此条件不满足，你的程序将被判定为 **Wrong Answer[2]**。\n    - 函数不应以相同的参数 $(A, B)$ 被调用超过一次。若此条件不满足，你的程序将被判定为 **Wrong Answer[3]**。\n\n此外，你的程序可调用以下函数：\n\n- `int Ask(int A, int B, int Place[])`\n\n  该函数用于向 IOI 女士提问。\n\n  - `Place` 是一个数组的指针，表示可能经过的中间地点。对于每个 $i$（$0 \\le i \\le N-1$），若 `Place[i] = 1`，表示可经过地点 $i$；若 `Place[i] = 0`，表示不可经过地点 $i$。\n  - 若仅允许经过数组 `Place[]` 中指定的某些地点，可以从地点 $A$ 到达地点 $B$，则该函数返回值为 1；否则返回值为 0。\n\n  参数应满足以下条件：\n\n    - $0 \\le A < B \\le N-1$。\n    - $0 \\le \\text{Place}[i] \\le 1$（$0 \\le i \\le N-1$）。\n    - $\\text{Place}[A] = 1$。\n    - $\\text{Place}[B] = 1$。\n\n若上述条件未被满足，你的程序将被判定为 **Wrong Answer[4]**。然而，若数组 `Place[]` 的长度不等于 $N$，该函数的行为无法保证。\n\n函数 `Ask` 的调用次数不得超过 45000 次。若超出，你的程序将被判定为 **Wrong Answer[5]**。\n\n当函数 `Detect` 执行完毕后，若存在某条道路未作为先前对函数 `Answer` 的调用参数出现，则你的程序将被判定为 **Wrong Answer[6]**。\n\n你的程序可实现其他函数供内部使用，或使用全局变量。你的程序不得使用标准输入和标准输出，也不得通过任何方式与其他文件通信。\n\n\n**编译与测试运行**\n\n你可以从竞赛网页下载一个归档文件，其中包含一个用于测试你程序的示例评测程序。该归档文件还包含你的程序的一个示例源代码文件。\n\n一个示例评测程序由一个源文件组成，该文件名为 `grader.c` 或 `grader.cpp`。例如，如果你的程序名为 `park.c` 或 `park.cpp`，你可以运行以下命令来编译你的程序。\n\n- C  \n  `gcc -std=c11 -O2 -o grader grader.c park.c -lm`\n\n- C++  \n  `g++ -std=c++14 -O2 -o grader grader.cpp park.cpp`\n\n当编译成功后，将生成可执行文件 `grader`。\n\n请注意，实际的评测程序与示例评测程序不同。示例评测程序将以单个进程运行，从标准输入读取输入数据，并将结果写入标准输出。", "inputFormat": "示例评测程序从标准输入读取以下数据：\n\n- 第一行输入包含一个整数 $T$，表示子任务编号。\n- 第二行输入包含一个整数 $N$，表示地点数量。\n- 第三行输入包含一个整数 $M$，表示道路数量。\n- 在接下来的 $M$ 行中，第 $i$ 行（$1 \\le i \\le M$）包含两个以空格分隔的整数 $A_i$、$B_i$。这表示存在一条连接地点 $A_i$ 与地点 $B_i$ 的道路，且该道路可双向通行。\n", "outputFormat": "当程序成功终止时，示例评测程序将向标准输出写入以下信息。（引号实际不会输出。）\n\n- 若你的程序被视为正确，示例评测程序将输出 “Accepted.”。\n- 若你的程序被视为 **Wrong Answer**，示例评测程序将按以下格式输出其类型：“Wrong Answer [1]”，随后你的程序将被终止。\n\n若你的程序被视为多种类型的 **Wrong Answer**，示例评测程序仅报告其中一种。\n", "hint": "### 示例调用\n\n| 调用 | 返回值 |\n|:----:|:------:|\n| `Ask(3, 5, {0,0,1,1,1,1})` | 1 |\n| `Answer(2, 4)` |  |\n| `Answer(2, 5)` |  |\n| `Answer(3, 4)` |  |\n| `Ask(0, 4, {1,0,1,0,1,0})` | 0 |\n| `Answer(0, 1)` |  |\n| `Answer(0, 3)` |  |\n| `Answer(1, 4)` |  |\n| `Answer(1, 2)` |  |\n\n请注意，本示例中的函数调用不一定具有实际意义。在本示例中，函数 `Detect` 以参数 $T = 1$、$N = 6$ 被调用。在本示例中，JOI 岛屿的结构如下：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/ma475cjp.png)\n\nJOI 岛屿的结构。  \n圆圈和数字表示地点及其编号，线段表示道路。\n:::\n\n- 第一次调用函数 `Ask` 是询问：若仅允许经过地点 2、3、4、5，是否可以从地点 3 到达地点 5。由于可行，函数 `Ask` 返回 1。\n- 第二次调用函数 `Ask` 是询问：若仅允许经过地点 0、2、4，是否可以从地点 0 到达地点 4。由于不可行，函数 `Ask` 返回 0。\n\n\n### 约束条件\n\n所有输入数据均满足以下条件。关于 $T$、$N$、$M$ 的含义，请参见“示例评测程序的输入”。\n\n- $1 \\le T \\le 5$。\n- $2 \\le N \\le 1400$。\n- $1 \\le M \\le 1500$。\n- 对于每个地点，最多有 7 条道路连接它与其他地点。\n- 若允许经过若干条道路，则可以从任意地点到达其他任意地点。\n- 对于任意两个不同的地点，最多只有一条道路连接它们。\n\n### 子任务\n\n共有 5 个子任务。每个子任务的得分及附加约束如下：\n\n**子任务 1 [10 分]**\n\n- $T = 1$。\n- $N \\le 250$。\n\n**子任务 2 [10 分]**\n\n- $T = 2$。\n- $M = N - 1$。\n- 对于地点 0 或 $N-1$，恰好有一条道路连接它与其他地点；对于其他每个地点，恰好有两条道路连接它与其他地点。\n\n**子任务 3 [27 分]**\n\n- $T = 3$。\n- $M = N - 1$。\n- 对于每个 $i$（$1 \\le i \\le N - 1$），若我们最多经过 8 个其他地点，则可以从地点 0 到达地点 $i$。\n\n**子任务 4 [30 分]**\n\n- $T = 4$。\n- $M = N - 1$。\n\n**子任务 5 [23 分]**\n\n- $T = 5$。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2017] 自然公园 / Natural Park", "background": "", "description": "JOI 岛是一个观光区，整座岛屿被指定为自然公园。\n\nJOI 岛上有 $N$ 个地点和若干条道路。这些地点从 $0$ 到 $N-1$ 编号。每条道路连接两个不同的地点，且可双向通行。每个地点最多连接 7 条道路。任意两个不同地点之间至多仅有一条道路相连。只要经过若干条道路，我们便可从任意地点到达其他任意地点。\n\n你和你的朋友 IOI 女士将共同调查 JOI 岛。为高效完成调查，你需要弄清 JOI 岛的结构。JOI 岛十分危险，因为岛上栖息着许多野生动物。由于 IOI 女士拥有出色的运动能力，她将负责实地探索 JOI 岛，而你则根据 IOI 女士的报告来确定 JOI 岛的结构。\n\n你将提供两个地点 $A$、$B$ 以及若干中间地点给 IOI 女士，并询问：若仅允许经过给定的中间地点，是否可能从地点 $A$ 到达地点 $B$？随后，IOI 女士将探索 JOI 岛，并将结果报告给你。\n\n由于调查时间不能过长，查询次数应小于或等于 45000。\n\n**任务**\n\n编写一个程序，与 IOI 女士通信并确定 JOI 岛的结构。\n\n**实现细节**\n\n你需要编写一个程序，实现确定 JOI 岛结构的方法。你的程序应当声明函数 `void Answer(int A, int B);` 和 `int Ask(int A, int B, int Place[]);`，并且使用不低于 C++17 的语言标准提交试题。\n\n你的程序应实现以下函数：\n\n- `void Detect(int T, int N)`\n\n  该函数仅被调用一次。\n\n  - 参数 $T$ 为子任务编号，$N$ 为地点数量。\n\n你的程序应通过调用以下函数，输出其确定的 JOI 岛结构：\n\n- `void Answer(int A, int B)`\n\n  调用该函数的次数应等于 JOI 岛中道路的总数。\n\n  - 参数 $A$、$B$ 表示存在一条连接地点 $A$ 与地点 $B$ 的道路。\n  \n   参数应满足以下条件：\n\n    - $A$、$B$ 应满足 $0 \\le A < B \\le N-1$。若此条件不满足，你的程序将被判定为 **Wrong Answer[1]**。\n    - 若函数以参数 $(A, B)$ 被调用，则必须存在一条连接地点 $A$ 与地点 $B$ 的道路。若此条件不满足，你的程序将被判定为 **Wrong Answer[2]**。\n    - 函数不应以相同的参数 $(A, B)$ 被调用超过一次。若此条件不满足，你的程序将被判定为 **Wrong Answer[3]**。\n\n此外，你的程序可调用以下函数：\n\n- `int Ask(int A, int B, int Place[])`\n\n  该函数用于向 IOI 女士提问。\n\n  - `Place` 是一个数组的指针，表示可能经过的中间地点。对于每个 $i$（$0 \\le i \\le N-1$），若 `Place[i] = 1`，表示可经过地点 $i$；若 `Place[i] = 0`，表示不可经过地点 $i$。\n  - 若仅允许经过数组 `Place[]` 中指定的某些地点，可以从地点 $A$ 到达地点 $B$，则该函数返回值为 1；否则返回值为 0。\n\n  参数应满足以下条件：\n\n    - $0 \\le A < B \\le N-1$。\n    - $0 \\le \\text{Place}[i] \\le 1$（$0 \\le i \\le N-1$）。\n    - $\\text{Place}[A] = 1$。\n    - $\\text{Place}[B] = 1$。\n\n若上述条件未被满足，你的程序将被判定为 **Wrong Answer[4]**。然而，若数组 `Place[]` 的长度不等于 $N$，该函数的行为无法保证。\n\n函数 `Ask` 的调用次数不得超过 45000 次。若超出，你的程序将被判定为 **Wrong Answer[5]**。\n\n当函数 `Detect` 执行完毕后，若存在某条道路未作为先前对函数 `Answer` 的调用参数出现，则你的程序将被判定为 **Wrong Answer[6]**。\n\n你的程序可实现其他函数供内部使用，或使用全局变量。你的程序不得使用标准输入和标准输出，也不得通过任何方式与其他文件通信。\n\n\n**编译与测试运行**\n\n你可以从竞赛网页下载一个归档文件，其中包含一个用于测试你程序的示例评测程序。该归档文件还包含你的程序的一个示例源代码文件。\n\n一个示例评测程序由一个源文件组成，该文件名为 `grader.c` 或 `grader.cpp`。例如，如果你的程序名为 `park.c` 或 `park.cpp`，你可以运行以下命令来编译你的程序。\n\n- C  \n  `gcc -std=c11 -O2 -o grader grader.c park.c -lm`\n\n- C++  \n  `g++ -std=c++14 -O2 -o grader grader.cpp park.cpp`\n\n当编译成功后，将生成可执行文件 `grader`。\n\n请注意，实际的评测程序与示例评测程序不同。示例评测程序将以单个进程运行，从标准输入读取输入数据，并将结果写入标准输出。", "inputFormat": "示例评测程序从标准输入读取以下数据：\n\n- 第一行输入包含一个整数 $T$，表示子任务编号。\n- 第二行输入包含一个整数 $N$，表示地点数量。\n- 第三行输入包含一个整数 $M$，表示道路数量。\n- 在接下来的 $M$ 行中，第 $i$ 行（$1 \\le i \\le M$）包含两个以空格分隔的整数 $A_i$、$B_i$。这表示存在一条连接地点 $A_i$ 与地点 $B_i$ 的道路，且该道路可双向通行。\n", "outputFormat": "当程序成功终止时，示例评测程序将向标准输出写入以下信息。（引号实际不会输出。）\n\n- 若你的程序被视为正确，示例评测程序将输出 “Accepted.”。\n- 若你的程序被视为 **Wrong Answer**，示例评测程序将按以下格式输出其类型：“Wrong Answer [1]”，随后你的程序将被终止。\n\n若你的程序被视为多种类型的 **Wrong Answer**，示例评测程序仅报告其中一种。\n", "hint": "### 示例调用\n\n| 调用 | 返回值 |\n|:----:|:------:|\n| `Ask(3, 5, {0,0,1,1,1,1})` | 1 |\n| `Answer(2, 4)` |  |\n| `Answer(2, 5)` |  |\n| `Answer(3, 4)` |  |\n| `Ask(0, 4, {1,0,1,0,1,0})` | 0 |\n| `Answer(0, 1)` |  |\n| `Answer(0, 3)` |  |\n| `Answer(1, 4)` |  |\n| `Answer(1, 2)` |  |\n\n请注意，本示例中的函数调用不一定具有实际意义。在本示例中，函数 `Detect` 以参数 $T = 1$、$N = 6$ 被调用。在本示例中，JOI 岛屿的结构如下：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/ma475cjp.png)\n\nJOI 岛屿的结构。  \n圆圈和数字表示地点及其编号，线段表示道路。\n:::\n\n- 第一次调用函数 `Ask` 是询问：若仅允许经过地点 2、3、4、5，是否可以从地点 3 到达地点 5。由于可行，函数 `Ask` 返回 1。\n- 第二次调用函数 `Ask` 是询问：若仅允许经过地点 0、2、4，是否可以从地点 0 到达地点 4。由于不可行，函数 `Ask` 返回 0。\n\n\n### 约束条件\n\n所有输入数据均满足以下条件。关于 $T$、$N$、$M$ 的含义，请参见“示例评测程序的输入”。\n\n- $1 \\le T \\le 5$。\n- $2 \\le N \\le 1400$。\n- $1 \\le M \\le 1500$。\n- 对于每个地点，最多有 7 条道路连接它与其他地点。\n- 若允许经过若干条道路，则可以从任意地点到达其他任意地点。\n- 对于任意两个不同的地点，最多只有一条道路连接它们。\n\n### 子任务\n\n共有 5 个子任务。每个子任务的得分及附加约束如下：\n\n**子任务 1 [10 分]**\n\n- $T = 1$。\n- $N \\le 250$。\n\n**子任务 2 [10 分]**\n\n- $T = 2$。\n- $M = N - 1$。\n- 对于地点 0 或 $N-1$，恰好有一条道路连接它与其他地点；对于其他每个地点，恰好有两条道路连接它与其他地点。\n\n**子任务 3 [27 分]**\n\n- $T = 3$。\n- $M = N - 1$。\n- 对于每个 $i$（$1 \\le i \\le N - 1$），若我们最多经过 8 个其他地点，则可以从地点 0 到达地点 $i$。\n\n**子任务 4 [30 分]**\n\n- $T = 4$。\n- $M = N - 1$。\n\n**子任务 5 [23 分]**\n\n- $T = 5$。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14391", "type": "P", "difficulty": 6, "samples": [["3 3 5\n3 2 6\n1 4 5\n1 1\n1 2\n2 2\n3 1\n3 3", "4\n5\n4\n4\n2"], ["4 5 6\n30 10 40 20\n15 55 25 35 45\n1 3\n4 3\n2 2\n4 1\n2 5\n3 3", "7\n6\n9\n4\n6\n9"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "分治", "JOISC/JOIST（日本）"], "title": "[JOISC 2017] 绑架 2 / Abduction 2", "background": "", "description": "在一个晴朗的白天，城市的一个十字路口发生了一起绑架事件。警方怀疑罪犯是 Anna 和 Bruno，他们作案后驾车逃离现场。目前，涉案车辆尚未被找到，警方仍在搜寻中。\n\n罪犯驾车所经过的城区是一个矩形网格城市，包含 $H$ 条东西走向的街道和 $W$ 条南北走向的街道。相邻两个十字路口之间的距离为 1 公里。\n\n每条街道都有一个整数，称为“拥堵度”。第 $i$ 条东西走向的街道（$1 \\le i \\le H$）的拥堵度为 $A_i$，第 $j$ 条南北走向的街道（$1 \\le j \\le W$）的拥堵度为 $B_j$。这 $H + W$ 个拥堵度值互不相同。对于每条街道，其拥堵度在整条街道上的任意位置均保持不变。\n\n警方调查发现，罪犯在城市中的移动方式如下：\n\n- 他们未离开城市，也未偏离街道。\n- 起初，罪犯从绑架现场选择一个可移动的方向，并朝该方向前进。\n- 当他们到达一个十字路口时，若横向街道的拥堵度大于当前街道的拥堵度，他们会在该路口转弯。若可向两个方向转弯，他们可任选其一。\n- 当他们到达一个十字路口时，若当前街道的拥堵度大于横向街道的拥堵度，他们将继续直行。然而，若他们位于城市边界且无法继续直行，则会在该处停止移动。\n\n共有 $Q$ 个候选十字路口作为绑架现场。这 $Q$ 个候选地点互不相同。为了确定所需调查员人数，警方希望知道：对于每个候选十字路口，假设绑架事件发生在该处，罪犯可能行驶的最大距离是多少。\n\n对于每个 $Q$ 个查询，请计算从给定候选十字路口出发，罪犯可能行驶的最大距离。\n\n**任务**\n\n给定城市中各街道的拥堵度以及 $Q$ 个绑架现场的候选十字路口，编写一个程序，计算从每个候选十字路口出发，罪犯可能行驶的最大距离。\n", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含三个以空格分隔的整数 $H$、$W$、$Q$。这表示城市是一个矩形网格，包含 $H$ 条东西走向的街道和 $W$ 条南北走向的街道，且共有 $Q$ 个绑架现场的候选十字路口。\n- 第二行包含 $H$ 个以空格分隔的整数 $A_1, A_2, \\ldots, A_H$。这表示第 $i$ 条（$1 \\le i \\le H$）从北往南数的东西走向街道的拥堵度为 $A_i$。\n- 第三行包含 $W$ 个以空格分隔的整数 $B_1, B_2, \\ldots, B_W$。这表示第 $j$ 条（$1 \\le j \\le W$）从西往东数的南北走向街道的拥堵度为 $B_j$。\n- 接下来的 $Q$ 行中，第 $k$ 行（$1 \\le k \\le Q$）包含两个以空格分隔的整数 $S_k$、$T_k$。这表示第 $k$ 个绑架现场的候选十字路口位于第 $S_k$ 条从北往南数的东西走向街道与第 $T_k$ 条从西往东数的南北走向街道的交汇处。\n", "outputFormat": "向标准输出写入 $Q$ 行。第 $k$ 行应包含一个整数，表示从第 $k$ 个候选十字路口出发，罪犯可能行驶的最大距离（单位：公里）。\n", "hint": "### 样例 1 解释\n\n例如，对于第三个查询，若罪犯按以下方式移动，则行驶距离可达到最大值：\n\n- 他们从从北数第二条街道与从西数第二条街道的交叉口向东移动 1 公里。\n- 他们可以从从北数第二条街道与从西数第三条街道的交叉口向南或向北移动，他们选择向南移动 1 公里。\n- 他们只能从从北数第三条街道与从西数第三条街道的交叉口向西移动，他们向西移动了 1 公里。\n- 他们只能从从北数第三条街道与从西数第二条街道的交叉口向西移动，他们向西移动了 1 公里。\n- 他们无法从从北数第三条街道与从西数第一条街道的交叉口继续移动，因此在该处停止。\n\n若他们按上述方式移动，总行驶距离为 4 公里。\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $2 \\le H \\le 50\\,000$。\n- $2 \\le W \\le 50\\,000$。\n- $1 \\le Q \\le 100$。\n- $1 \\le A_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le H$）。\n- $1 \\le B_j \\le 1\\,000\\,000\\,000$（$1 \\le j \\le W$）。\n- $H + W$ 个整数 $A_1, A_2, \\ldots, A_H, B_1, B_2, \\ldots, B_W$ 互不相同。\n- $1 \\le S_k \\le H$（$1 \\le k \\le Q$）。\n- $1 \\le T_k \\le W$（$1 \\le k \\le Q$）。\n- $(S_k, T_k) \\ne (S_l, T_l)$（$1 \\le k < l \\le Q$）。\n\n### 子任务\n\n共有 5 个子任务。每个子任务的得分及附加限制如下：\n\n**子任务 1 [13 分]**\n\n- $H \\le 8$。\n- $W \\le 8$。\n- $Q = 1$。\n\n**子任务 2 [10 分]**\n\n- $H \\le 2000$。\n- $W \\le 2000$。\n- $Q = 1$。\n\n**子任务 3 [17 分]**\n\n- $Q = 1$。\n\n**子任务 4 [4 分]**\n\n- $H \\le 2000$。\n- $W \\le 2000$。\n\n**子任务 5 [56 分]**\n\n无附加限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2017] 绑架 2 / Abduction 2", "background": "", "description": "在一个晴朗的白天，城市的一个十字路口发生了一起绑架事件。警方怀疑罪犯是 Anna 和 Bruno，他们作案后驾车逃离现场。目前，涉案车辆尚未被找到，警方仍在搜寻中。\n\n罪犯驾车所经过的城区是一个矩形网格城市，包含 $H$ 条东西走向的街道和 $W$ 条南北走向的街道。相邻两个十字路口之间的距离为 1 公里。\n\n每条街道都有一个整数，称为“拥堵度”。第 $i$ 条东西走向的街道（$1 \\le i \\le H$）的拥堵度为 $A_i$，第 $j$ 条南北走向的街道（$1 \\le j \\le W$）的拥堵度为 $B_j$。这 $H + W$ 个拥堵度值互不相同。对于每条街道，其拥堵度在整条街道上的任意位置均保持不变。\n\n警方调查发现，罪犯在城市中的移动方式如下：\n\n- 他们未离开城市，也未偏离街道。\n- 起初，罪犯从绑架现场选择一个可移动的方向，并朝该方向前进。\n- 当他们到达一个十字路口时，若横向街道的拥堵度大于当前街道的拥堵度，他们会在该路口转弯。若可向两个方向转弯，他们可任选其一。\n- 当他们到达一个十字路口时，若当前街道的拥堵度大于横向街道的拥堵度，他们将继续直行。然而，若他们位于城市边界且无法继续直行，则会在该处停止移动。\n\n共有 $Q$ 个候选十字路口作为绑架现场。这 $Q$ 个候选地点互不相同。为了确定所需调查员人数，警方希望知道：对于每个候选十字路口，假设绑架事件发生在该处，罪犯可能行驶的最大距离是多少。\n\n对于每个 $Q$ 个查询，请计算从给定候选十字路口出发，罪犯可能行驶的最大距离。\n\n**任务**\n\n给定城市中各街道的拥堵度以及 $Q$ 个绑架现场的候选十字路口，编写一个程序，计算从每个候选十字路口出发，罪犯可能行驶的最大距离。\n", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含三个以空格分隔的整数 $H$、$W$、$Q$。这表示城市是一个矩形网格，包含 $H$ 条东西走向的街道和 $W$ 条南北走向的街道，且共有 $Q$ 个绑架现场的候选十字路口。\n- 第二行包含 $H$ 个以空格分隔的整数 $A_1, A_2, \\ldots, A_H$。这表示第 $i$ 条（$1 \\le i \\le H$）从北往南数的东西走向街道的拥堵度为 $A_i$。\n- 第三行包含 $W$ 个以空格分隔的整数 $B_1, B_2, \\ldots, B_W$。这表示第 $j$ 条（$1 \\le j \\le W$）从西往东数的南北走向街道的拥堵度为 $B_j$。\n- 接下来的 $Q$ 行中，第 $k$ 行（$1 \\le k \\le Q$）包含两个以空格分隔的整数 $S_k$、$T_k$。这表示第 $k$ 个绑架现场的候选十字路口位于第 $S_k$ 条从北往南数的东西走向街道与第 $T_k$ 条从西往东数的南北走向街道的交汇处。\n", "outputFormat": "向标准输出写入 $Q$ 行。第 $k$ 行应包含一个整数，表示从第 $k$ 个候选十字路口出发，罪犯可能行驶的最大距离（单位：公里）。\n", "hint": "### 样例 1 解释\n\n例如，对于第三个查询，若罪犯按以下方式移动，则行驶距离可达到最大值：\n\n- 他们从从北数第二条街道与从西数第二条街道的交叉口向东移动 1 公里。\n- 他们可以从从北数第二条街道与从西数第三条街道的交叉口向南或向北移动，他们选择向南移动 1 公里。\n- 他们只能从从北数第三条街道与从西数第三条街道的交叉口向西移动，他们向西移动了 1 公里。\n- 他们只能从从北数第三条街道与从西数第二条街道的交叉口向西移动，他们向西移动了 1 公里。\n- 他们无法从从北数第三条街道与从西数第一条街道的交叉口继续移动，因此在该处停止。\n\n若他们按上述方式移动，总行驶距离为 4 公里。\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $2 \\le H \\le 50\\,000$。\n- $2 \\le W \\le 50\\,000$。\n- $1 \\le Q \\le 100$。\n- $1 \\le A_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le H$）。\n- $1 \\le B_j \\le 1\\,000\\,000\\,000$（$1 \\le j \\le W$）。\n- $H + W$ 个整数 $A_1, A_2, \\ldots, A_H, B_1, B_2, \\ldots, B_W$ 互不相同。\n- $1 \\le S_k \\le H$（$1 \\le k \\le Q$）。\n- $1 \\le T_k \\le W$（$1 \\le k \\le Q$）。\n- $(S_k, T_k) \\ne (S_l, T_l)$（$1 \\le k < l \\le Q$）。\n\n### 子任务\n\n共有 5 个子任务。每个子任务的得分及附加限制如下：\n\n**子任务 1 [13 分]**\n\n- $H \\le 8$。\n- $W \\le 8$。\n- $Q = 1$。\n\n**子任务 2 [10 分]**\n\n- $H \\le 2000$。\n- $W \\le 2000$。\n- $Q = 1$。\n\n**子任务 3 [17 分]**\n\n- $Q = 1$。\n\n**子任务 4 [4 分]**\n\n- $H \\le 2000$。\n- $W \\le 2000$。\n\n**子任务 5 [56 分]**\n\n无附加限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14393", "type": "P", "difficulty": 7, "samples": [["4 2\n0 1 1\n0 -1 1\n1 2 2\n-6 1 2\n-2 0 2 0\n2\n1 2\n2 1", "1\n2"], ["3 2\n-1000000000 -1 1\n-999999998 -1 1\n0 0 2\n999999997 1 999999999 1\n1\n1 2", "1"], ["6 3\n2 -1 1\n1 0 1\n0 3 2\n2 4 2\n5 4 3\n3 9 3\n0 0 3 3\n6\n1 2\n1 3\n2 1\n2 3\n3 1\n3 2", "4\n2\n4\n0\n2\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "线段树", "根号分治", "JOISC/JOIST（日本）"], "title": "[JOISC 2017] 龙 2 / Dragon 2", "background": "", "description": "在 JOI 平原上，人们与龙共同生活。\n\nJOI 平原是一个具有 $X$ 坐标和 $Y$ 坐标的广阔坐标平面。横坐标为 $x$、纵坐标为 $y$ 的点记作 $(x, y)$。\n\nJOI 平原上有 $N$ 条龙，编号从 $1$ 到 $N$。同时有 $M$ 个龙族部落，编号从 $1$ 到 $M$。龙 $i$（$1 \\le i \\le N$）始终位于 JOI 平原上的点 $(A_i, B_i)$，其所属部落为 $C_i$。并非所有种类的龙都生活在 JOI 平原上。\n\n在 JOI 平原上，有两个位于点 $(D_1, E_1)$ 和 $(D_2, E_2)$ 的人类村落。两个村落之间由一条道路相连，该道路是连接两村位置的线段。\n\n点 $(A_1, B_1), \\dots, (A_N, B_N)$ 与点 $(D_1, E_1), (D_2, E_2)$ 互不相同，且任意三点不共线。\n\n有时，龙族部落之间会发生冲突。若部落 $a$（$1 \\le a \\le M$）对部落 $b$（$1 \\le b \\le M, a \\ne b$）产生敌意，则部落 $a$ 的每条龙都会向部落 $b$ 的所有龙发射火球。火球沿直线飞向目标，击中目标后仍会沿原方向继续飞行。因此，火球的轨迹是一条半直线。\n\n当部落间发生冲突时，若火球从龙身上经过道路，则道路必须被破坏。你拥有一份未来可能发生的 $Q$ 个龙族部落冲突的清单。对于每个可能的冲突，你需要计算经过道路的火球数量。\n\n**任务**\n\n给定龙、人类村落的信息，以及一份可能发生的龙族部落冲突清单，编写一个程序，对每个冲突计算经过道路的火球数量。\n", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含两个以空格分隔的整数 $N$、$M$。这表示 JOI 平原上有 $N$ 条龙，以及 $M$ 个龙族部落。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含三个以空格分隔的整数 $A_i$、$B_i$、$C_i$。这表示龙 $i$（$1 \\le i \\le N$）位于 JOI 平原上的点 $(A_i, B_i)$，其所属部落为 $C_i$。\n- 下一行包含四个以空格分隔的整数 $D_1$、$E_1$、$D_2$、$E_2$。这表示两个位于 JOI 平原上点 $(D_1, E_1)$ 和 $(D_2, E_2)$ 的人类村落。\n- 下一行包含一个整数 $Q$，表示可能发生的龙族部落冲突的数量。\n- 接下来的 $Q$ 行中，第 $j$ 行（$1 \\le j \\le Q$）包含两个以空格分隔的整数 $F_j$、$G_j$。这表示在第 $j$ 个可能的冲突中，部落 $F_j$ 对部落 $G_j$ 产生敌意。\n", "outputFormat": "向标准输出写入 $Q$ 行。第 $j$ 行（$1 \\le j \\le Q$）应包含第 $j$ 个部落冲突中经过道路的火球数量。\n", "hint": "### 样例 1 解释\n\n在第一次部落冲突中，满足以下条件：\n\n- 龙 1 向龙 3 发射的火球不会经过道路。\n- 龙 1 向龙 4 发射的火球不会经过道路。\n- 龙 2 向龙 3 发射的火球会经过道路。\n- 龙 2 向龙 4 发射的火球不会经过道路。\n\n因此，有 1 个火球经过道路。\n\n在第二次部落冲突中，满足以下条件：\n\n- 龙 3 向龙 1 发射的火球会经过道路。\n- 龙 3 向龙 2 发射的火球会经过道路。\n- 龙 4 向龙 1 发射的火球不会经过道路。\n- 龙 4 向龙 2 发射的火球不会经过道路。\n\n因此，有 2 个火球经过道路。\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $2 \\le N \\le 30000$。\n- $2 \\le M \\le N$。\n- $-1000000000 \\le A_i \\le 1000000000$（$1 \\le i \\le N$）。\n- $-1000000000 \\le B_i \\le 1000000000$（$1 \\le i \\le N$）。\n- $1 \\le C_i \\le M$（$1 \\le i \\le N$）。\n- $-1000000000 \\le D_1 \\le 1000000000$。\n- $-1000000000 \\le E_1 \\le 1000000000$。\n- $-1000000000 \\le D_2 \\le 1000000000$。\n- $-1000000000 \\le E_2 \\le 1000000000$。\n- $N + 2$ 个点 $(A_1, B_1), \\dots, (A_N, B_N), (D_1, E_1), (D_2, E_2)$ 互不相同，且任意三点不共线。\n- $1 \\le Q \\le 100000$。\n- $1 \\le F_j \\le M$（$1 \\le j \\le Q$）。\n- $1 \\le G_j \\le M$（$1 \\le j \\le Q$）。\n- $F_j \\ne G_j$（$1 \\le j \\le Q$）。\n- $(F_j, G_j) \\ne (F_k, G_k)$（$1 \\le j < k \\le Q$）。\n\n### 子任务\n\n共有 3 个子任务。每个子任务的得分及额外约束如下：\n\n**子任务 1 [15 分]**\n\n- $N \\le 3000$。\n\n**子任务 2 [45 分]**\n\n- $Q \\le 100$。\n\n**子任务 3 [40 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2017] 龙 2 / Dragon 2", "background": "", "description": "在 JOI 平原上，人们与龙共同生活。\n\nJOI 平原是一个具有 $X$ 坐标和 $Y$ 坐标的广阔坐标平面。横坐标为 $x$、纵坐标为 $y$ 的点记作 $(x, y)$。\n\nJOI 平原上有 $N$ 条龙，编号从 $1$ 到 $N$。同时有 $M$ 个龙族部落，编号从 $1$ 到 $M$。龙 $i$（$1 \\le i \\le N$）始终位于 JOI 平原上的点 $(A_i, B_i)$，其所属部落为 $C_i$。并非所有种类的龙都生活在 JOI 平原上。\n\n在 JOI 平原上，有两个位于点 $(D_1, E_1)$ 和 $(D_2, E_2)$ 的人类村落。两个村落之间由一条道路相连，该道路是连接两村位置的线段。\n\n点 $(A_1, B_1), \\dots, (A_N, B_N)$ 与点 $(D_1, E_1), (D_2, E_2)$ 互不相同，且任意三点不共线。\n\n有时，龙族部落之间会发生冲突。若部落 $a$（$1 \\le a \\le M$）对部落 $b$（$1 \\le b \\le M, a \\ne b$）产生敌意，则部落 $a$ 的每条龙都会向部落 $b$ 的所有龙发射火球。火球沿直线飞向目标，击中目标后仍会沿原方向继续飞行。因此，火球的轨迹是一条半直线。\n\n当部落间发生冲突时，若火球从龙身上经过道路，则道路必须被破坏。你拥有一份未来可能发生的 $Q$ 个龙族部落冲突的清单。对于每个可能的冲突，你需要计算经过道路的火球数量。\n\n**任务**\n\n给定龙、人类村落的信息，以及一份可能发生的龙族部落冲突清单，编写一个程序，对每个冲突计算经过道路的火球数量。\n", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含两个以空格分隔的整数 $N$、$M$。这表示 JOI 平原上有 $N$ 条龙，以及 $M$ 个龙族部落。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含三个以空格分隔的整数 $A_i$、$B_i$、$C_i$。这表示龙 $i$（$1 \\le i \\le N$）位于 JOI 平原上的点 $(A_i, B_i)$，其所属部落为 $C_i$。\n- 下一行包含四个以空格分隔的整数 $D_1$、$E_1$、$D_2$、$E_2$。这表示两个位于 JOI 平原上点 $(D_1, E_1)$ 和 $(D_2, E_2)$ 的人类村落。\n- 下一行包含一个整数 $Q$，表示可能发生的龙族部落冲突的数量。\n- 接下来的 $Q$ 行中，第 $j$ 行（$1 \\le j \\le Q$）包含两个以空格分隔的整数 $F_j$、$G_j$。这表示在第 $j$ 个可能的冲突中，部落 $F_j$ 对部落 $G_j$ 产生敌意。\n", "outputFormat": "向标准输出写入 $Q$ 行。第 $j$ 行（$1 \\le j \\le Q$）应包含第 $j$ 个部落冲突中经过道路的火球数量。\n", "hint": "### 样例 1 解释\n\n在第一次部落冲突中，满足以下条件：\n\n- 龙 1 向龙 3 发射的火球不会经过道路。\n- 龙 1 向龙 4 发射的火球不会经过道路。\n- 龙 2 向龙 3 发射的火球会经过道路。\n- 龙 2 向龙 4 发射的火球不会经过道路。\n\n因此，有 1 个火球经过道路。\n\n在第二次部落冲突中，满足以下条件：\n\n- 龙 3 向龙 1 发射的火球会经过道路。\n- 龙 3 向龙 2 发射的火球会经过道路。\n- 龙 4 向龙 1 发射的火球不会经过道路。\n- 龙 4 向龙 2 发射的火球不会经过道路。\n\n因此，有 2 个火球经过道路。\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $2 \\le N \\le 30000$。\n- $2 \\le M \\le N$。\n- $-1000000000 \\le A_i \\le 1000000000$（$1 \\le i \\le N$）。\n- $-1000000000 \\le B_i \\le 1000000000$（$1 \\le i \\le N$）。\n- $1 \\le C_i \\le M$（$1 \\le i \\le N$）。\n- $-1000000000 \\le D_1 \\le 1000000000$。\n- $-1000000000 \\le E_1 \\le 1000000000$。\n- $-1000000000 \\le D_2 \\le 1000000000$。\n- $-1000000000 \\le E_2 \\le 1000000000$。\n- $N + 2$ 个点 $(A_1, B_1), \\dots, (A_N, B_N), (D_1, E_1), (D_2, E_2)$ 互不相同，且任意三点不共线。\n- $1 \\le Q \\le 100000$。\n- $1 \\le F_j \\le M$（$1 \\le j \\le Q$）。\n- $1 \\le G_j \\le M$（$1 \\le j \\le Q$）。\n- $F_j \\ne G_j$（$1 \\le j \\le Q$）。\n- $(F_j, G_j) \\ne (F_k, G_k)$（$1 \\le j < k \\le Q$）。\n\n### 子任务\n\n共有 3 个子任务。每个子任务的得分及额外约束如下：\n\n**子任务 1 [15 分]**\n\n- $N \\le 3000$。\n\n**子任务 2 [45 分]**\n\n- $Q \\le 100$。\n\n**子任务 3 [40 分]**\n\n无额外约束。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14394", "type": "P", "difficulty": 6, "samples": [["7 3\n9 5\n3 7\n10 6\n5 10\n2 6\n10 10\n4 1\n10 5\n3 5\n3 9\n", "0\n1\n2"], ["10 8\n14 19\n9 16\n11 2\n7 18\n20 16\n9 5\n10 9\n20 6\n4 17\n13 8\n7 14\n9 3\n9 13\n4 19\n12 4\n19 16\n18 10\n7 14", "3\n1\n3\n5\n0\n2\n1\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "贪心", "2016", "树状数组", "Dilworth 定理", "JOISC/JOIST（日本）"], "title": "[JOISC 2016] 俄罗斯套娃 / Matryoshka", "background": null, "description": "你打算开设一家销售俄罗斯套娃的商店。为此，你向工厂订购了 $N$ 个俄罗斯套娃。这些套娃被编号为 $1$ 至 $N$。其中第 $i$ 个套娃（$1 \\le i \\le N$）可以视为一个底面直径为 $R_i$ cm、高为 $H_i$ cm 的中空直圆柱体。每个套娃可以收纳一个底面直径和高度都比它小的其他套娃。被收纳的套娃内部还可以再收纳其他套娃。\n\n某日，你收到工厂发来的通知：你订购的 $N$ 个套娃不能一次性全部做完，所以第一批只会送达直径大于等于 $A$ cm 并且高度小于等于 $B$ cm 的所有套娃。你需要预先安排出一个方案，使送来的套娃经过若干次嵌套后，没有被套的套娃数量最小。\n\n$A$ 和 $B$ 的值可能会突然更改。因此，你决定针对 $Q$ 组 $(A_j, B_j)$（$1 \\le j \\le Q$）求出没被套的套娃数量的最小值。询问互相独立。", "inputFormat": "从标准输入中读取以下数据：\n\n- 第 $1$ 行包含两个用空格分隔的整数 $N$ 和 $Q$。这表示你订购的俄罗斯套娃数量为 $N$ 个，同时将给出 $Q$ 组 $A$ 和 $B$ 的值。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含两个用空格分隔的整数 $R_i$ 和 $H_i$。这表示第 $i$ 个俄罗斯套娃的底面直径为 $R_i$ cm，高度为 $H_i$ cm。\n- 接下来的 $Q$ 行中，第 $j$ 行（$1 \\le j \\le Q$）包含两个用空格分隔的整数 $A_j$ 和 $B_j$。", "outputFormat": "输出共 $Q$ 行。第 $j$ 行（$1 \\le j \\le Q$）输出 $A=A_j$ 且 $B=B_j$ 时，没有被套的套娃数量最小值。", "hint": "### 样例 1 解释\n\n- 当 $(A, B) = (10, 5)$ 时，不存在底面直径不小于 $10$ cm 且高度不超过 $5$ cm 的俄罗斯套娃，因此输出 $0$。\n- 当 $(A, B) = (3, 5)$ 时，底面直径不小于 $3$ cm 且高度不超过 $5$ cm 的俄罗斯套娃为第 $1$ 号和第 $7$ 号。第 $7$ 号套娃可以被收纳进第 $1$ 号套娃中。此时，未被任何套娃收纳的套娃的最小数量为 $1$。\n- 当 $(A, B) = (3, 9)$ 时，底面直径不小于 $3$ cm 且高度不超过 $9$ cm 的俄罗斯套娃为第 $1$ 号、第 $2$ 号、第 $3$ 号和第 $7$ 号。此时，可以将第 $7$ 号套娃收纳进第 $1$ 号套娃中，再将第 $1$ 号套娃收纳进第 $3$ 号套娃中。未被任何套娃收纳的套娃的最小数量为 $2$。\n\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le N \\le 200\\,000$。\n- $1 \\le Q \\le 200\\,000$。\n- $1 \\le R_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）。\n- $1 \\le H_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）。\n- $1 \\le A_j \\le 1\\,000\\,000\\,000$（$1 \\le j \\le Q$）。\n- $1 \\le B_j \\le 1\\,000\\,000\\,000$（$1 \\le j \\le Q$）。\n\n### 子任务\n\n**子任务 1 [11 分]**\n\n满足以下条件：\n\n- $N \\le 10$。\n- $Q = 1$。\n\n**子任务 2 [15 分]**\n\n满足以下条件：\n\n- $N \\le 100$。\n- $Q = 1$。\n\n**子任务 3 [25 分]**\n\n满足以下条件：\n\n- $N \\le 2\\,000$。\n- $Q \\le 2\\,000$。\n\n**子任务 4 [49 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2016] 俄罗斯套娃 / Matryoshka", "background": null, "description": "你打算开设一家销售俄罗斯套娃的商店。为此，你向工厂订购了 $N$ 个俄罗斯套娃。这些套娃被编号为 $1$ 至 $N$。其中第 $i$ 个套娃（$1 \\le i \\le N$）可以视为一个底面直径为 $R_i$ cm、高为 $H_i$ cm 的中空直圆柱体。每个套娃可以收纳一个底面直径和高度都比它小的其他套娃。被收纳的套娃内部还可以再收纳其他套娃。\n\n某日，你收到工厂发来的通知：你订购的 $N$ 个套娃不能一次性全部做完，所以第一批只会送达直径大于等于 $A$ cm 并且高度小于等于 $B$ cm 的所有套娃。你需要预先安排出一个方案，使送来的套娃经过若干次嵌套后，没有被套的套娃数量最小。\n\n$A$ 和 $B$ 的值可能会突然更改。因此，你决定针对 $Q$ 组 $(A_j, B_j)$（$1 \\le j \\le Q$）求出没被套的套娃数量的最小值。询问互相独立。", "inputFormat": "从标准输入中读取以下数据：\n\n- 第 $1$ 行包含两个用空格分隔的整数 $N$ 和 $Q$。这表示你订购的俄罗斯套娃数量为 $N$ 个，同时将给出 $Q$ 组 $A$ 和 $B$ 的值。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含两个用空格分隔的整数 $R_i$ 和 $H_i$。这表示第 $i$ 个俄罗斯套娃的底面直径为 $R_i$ cm，高度为 $H_i$ cm。\n- 接下来的 $Q$ 行中，第 $j$ 行（$1 \\le j \\le Q$）包含两个用空格分隔的整数 $A_j$ 和 $B_j$。", "outputFormat": "输出共 $Q$ 行。第 $j$ 行（$1 \\le j \\le Q$）输出 $A=A_j$ 且 $B=B_j$ 时，没有被套的套娃数量最小值。", "hint": "### 样例 1 解释\n\n- 当 $(A, B) = (10, 5)$ 时，不存在底面直径不小于 $10$ cm 且高度不超过 $5$ cm 的俄罗斯套娃，因此输出 $0$。\n- 当 $(A, B) = (3, 5)$ 时，底面直径不小于 $3$ cm 且高度不超过 $5$ cm 的俄罗斯套娃为第 $1$ 号和第 $7$ 号。第 $7$ 号套娃可以被收纳进第 $1$ 号套娃中。此时，未被任何套娃收纳的套娃的最小数量为 $1$。\n- 当 $(A, B) = (3, 9)$ 时，底面直径不小于 $3$ cm 且高度不超过 $9$ cm 的俄罗斯套娃为第 $1$ 号、第 $2$ 号、第 $3$ 号和第 $7$ 号。此时，可以将第 $7$ 号套娃收纳进第 $1$ 号套娃中，再将第 $1$ 号套娃收纳进第 $3$ 号套娃中。未被任何套娃收纳的套娃的最小数量为 $2$。\n\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le N \\le 200\\,000$。\n- $1 \\le Q \\le 200\\,000$。\n- $1 \\le R_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）。\n- $1 \\le H_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）。\n- $1 \\le A_j \\le 1\\,000\\,000\\,000$（$1 \\le j \\le Q$）。\n- $1 \\le B_j \\le 1\\,000\\,000\\,000$（$1 \\le j \\le Q$）。\n\n### 子任务\n\n**子任务 1 [11 分]**\n\n满足以下条件：\n\n- $N \\le 10$。\n- $Q = 1$。\n\n**子任务 2 [15 分]**\n\n满足以下条件：\n\n- $N \\le 100$。\n- $Q = 1$。\n\n**子任务 3 [25 分]**\n\n满足以下条件：\n\n- $N \\le 2\\,000$。\n- $Q \\le 2\\,000$。\n\n**子任务 4 [49 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14395", "type": "P", "difficulty": 6, "samples": [["1 3 10000\n0 1 2\n1 0 2 0 1 2", ""]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "交互题", "Special Judge", "JOISC/JOIST（日本）"], "title": "[JOISC 2016] 神经衰弱 / Memory2", "background": "翻译参考自 [LibreOJ](https://loj.ac/p/2730)。", "description": "有 $2N$ 张卡片，每张卡片正面写有一个 $0$ 到 $N-1$ 之间的整数，且每个整数恰好出现两次。你和 JOI 君正在使用这 $2N$ 张卡片进行名为“神经衰弱”的游戏练习。\n\n游戏练习开始时，所有卡片背面朝上，横向排成一列放在桌面上。从左往右第 $i+1$ 张卡片（$0 \\le i \\le 2N-1$）称为卡片 $i$，其正面所写的整数记为 $A_i$（$0 \\le i \\le 2N-1$）。最初，你和 JOI 君都不知道 $A_i$（$0 \\le i \\le 2N-1$）的具体数值。\n\n你和 JOI 君最多可以重复进行 $K$ 轮如下操作：\n\n1. 你指定 $2N$ 张卡片中的任意两张卡片。\n2. JOI 君将这两张卡片翻面，但确保你无法看到卡片正面所写的整数。如果两张卡片正面所写的整数相等，JOI 君会记住这个值并告诉你；否则，他会从两张卡片正面所写的整数中，选择一个对他而言更容易记住的值告诉你。\n\nJOI 君对整数的记忆难度由 $N$ 个整数 $P_0, P_1, \\dots, P_{N-1}$ 表示，这些整数满足以下两个条件：\n\n- $0 \\le P_i \\le N-1$（$0 \\le i \\le N-1$）。\n- $P_i \\ne P_j$（$0 \\le i < j \\le N-1$）。\n\n对 JOI 君而言，整数 $i$ 比整数 $j$ 更容易记住，当且仅当 $P_i < P_j$ 成立。\n\n你的任务是：通过与 JOI 君进行最多 $K$ 轮操作，确定每张卡片正面所写的整数。但你并不知道 JOI 君用于表示记忆难度的整数 $P_0, P_1, \\dots, P_{N-1}$ 的具体取值。\n\n**题目**\n\n请编写一个程序，通过与 JOI 君进行交互操作，确定每张卡片正面所写的整数。\n\n### 实现细节\n\n你需要写一个程序实现确定每张牌上写的数字的功能。你不需要引入外部头文件，但是你必须声明函数 `int Flip(int I, int J);` 和 `void Answer(int I, int J, int X);`。并且，你应当选择不低于 C++17 的语言标准提交。\n\n程序中必需实现以下函数：\n\n- $\\texttt{void Solve(int T, int N)}$  \n  对于每组测试数据，这个函数仅调用一次。$T$ 代表子任务编号，$N$ 代表有 $2N$ 张牌。  \n  这个函数必需通过调用 $\\texttt{Flip}$ 函数来确定牌上写的数字，通过调用 $\\texttt{Answer}$ 函数来做出回答。\n\n程序中可以调用以下函数：\n\n- $\\texttt{int Flip(int I, int J)}$  \n  当指定 JOI 君翻哪两张牌时调用这个函数。参数 $\\texttt{I, J}$ 表示 JOI 君需要翻开纸牌 $I$ 和 $J$。  \n  $I$ 和 $J$ 都必须是 $0$ 到 $2N-1$（包括两端）的整数，并且 $I$ 不等于 $J$。如果调用 $\\texttt{Flip}$ 函数时不满足条件，则会被判为 **Wrong answer [1]**。  \n  如果 $A_I=A_J$，则这个函数返回这个值，否则会返回 $A_I$ 和 $A_J$ 中更容易记住的那个值。  \n  如果这个函数调用超过 $K$ 次，则会被判为 **Wrong answer [2]**。\n- $\\texttt{void Answer(int I, int J, int X)}$  \n  这个函数表示写有整数 $X$ 的卡片可以被确定了。  \n  参数 $\\texttt{I, J, X}$ 需要满足以下条件：\n\n  - $0\\le I,J\\le 2N-1$\n  - $I\\neq J$\n  - $A_I=A_J=X$\n\n  如果调用时参数不满足以上条件，则会被判为 **Wrong answer [3]**。  \n  调用时，参数 $X$ 的值需要与先前任意调用中的 $X$ 不同。如果不满足，则会被判为 **Wrong answer [4]**。  \n  此函数必须恰好被调用 $N$ 次，否则会被判为 **Wrong answer [5]**。\n\n你的程序可以实现任何其他函数，或定义全局变量。但你的程序无论如何都不可以与标准输入输出或其他文件交互。\n\n附加文件中包含一个样例交互器和交互库，仅用作测试。\n\n样例交互器包含一个文件，文件名为 `grader.c` 或 `grader.cpp`。为了测试程序，需执行如下命令：\n\n- C 语言\n\n```bash\ngcc -std=c11 -O2 -o grader grader.c Memory2.c -lm\n```\n\n- C++ 语言\n\n```bash\ng++ -std=c++11 -O2 -o grader grader.cpp Memory2.cpp\n```\n\n如果编译成功，则会生成一个名为 `grader` 的可执行文件。\n\n请注意，实际判题过程和样例的判题过程不同。样例判题程序作为单进程执行。这个程序需要从标准输入中读入，并输出到标准输出中。", "inputFormat": "第一行三个整数 $T,N,K$，由一个空格隔开。分别表示子任务编号为 $T$，有 $2N$ 张牌，和 JOI 君最多问答 $K$ 次。\n\n第二行 $N$ 个整数 $P_0,P_1,\\ldots ,P_{N-1}$，表示 JOI 君对整数的记忆力。\n\n第三行 $2N$ 个整数 $A_0,A_1,\\ldots,A_{2N-1}$，表示从左到右纸牌上写的整数。", "outputFormat": "如果样例交互程序正常退出，它会向标准输出输出一行如下内容：\n\n- 如果答案正确，输出 `Accepted`。\n- 如果不正确，输出错误的类型，如 `Wrong answer [2]`。", "hint": "### 样例交互\n\n样例交互过程如下\n\n|          函数调用          |   返回值    |\n| :------------------------: | :---------: |\n|   $\\texttt{Flip(0, 2)}$    | $\\texttt 1$ |\n|   $\\texttt{Flip(0, 4)}$    | $\\texttt 1 $ |\n|   $\\texttt{Flip(1, 2)}$    | $\\texttt 0$ |\n| $\\texttt{Answer(0, 4, 1)}$ |             |\n|   $\\texttt{Flip(1, 3)}$    | $\\texttt 0$ |\n|   $\\texttt{Flip(5, 2)}$    | $\\texttt 2$ |\n|   $\\texttt{Flip(4, 5)}$    | $\\texttt 1$ |\n| $\\texttt{Answer(1, 3, 0)}$ |             |\n| $\\texttt{Answer(5, 2, 2)}$ |     $\\tt 0$        |\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le N \\le 50$。\n- $0 \\le P_i \\le N-1$（$0 \\le i \\le N-1$）。\n- $P_i \\ne P_j$（$0 \\le i < j \\le N-1$）。\n- $0 \\le A_i \\le N-1$（$0 \\le i \\le 2N-1$）。\n- 对于任意 $x$（$0 \\le x \\le N-1$），恰好存在两个 $i$（$0 \\le i \\le 2N-1$）满足 $A_i = x$。\n\n### 子任务\n\n**子任务 1 [10 分]**\n\n满足以下条件：\n\n- $T = 1$。\n- $K = 10\\,000$。\n- $P_i = i$（$0 \\le i \\le N-1$）。\n\n**子任务 2 [50 分]**\n\n满足以下条件：\n\n- $T = 2$。\n- $K = 400$。\n- $P_i = i$（$0 \\le i \\le N-1$）。\n\n**子任务 3 [40 分]**\n\n满足以下条件：\n\n- $T = 3$。\n- $K = 300$。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2016] 神经衰弱 / Memory2", "background": "翻译参考自 [LibreOJ](https://loj.ac/p/2730)。", "description": "有 $2N$ 张卡片，每张卡片正面写有一个 $0$ 到 $N-1$ 之间的整数，且每个整数恰好出现两次。你和 JOI 君正在使用这 $2N$ 张卡片进行名为“神经衰弱”的游戏练习。\n\n游戏练习开始时，所有卡片背面朝上，横向排成一列放在桌面上。从左往右第 $i+1$ 张卡片（$0 \\le i \\le 2N-1$）称为卡片 $i$，其正面所写的整数记为 $A_i$（$0 \\le i \\le 2N-1$）。最初，你和 JOI 君都不知道 $A_i$（$0 \\le i \\le 2N-1$）的具体数值。\n\n你和 JOI 君最多可以重复进行 $K$ 轮如下操作：\n\n1. 你指定 $2N$ 张卡片中的任意两张卡片。\n2. JOI 君将这两张卡片翻面，但确保你无法看到卡片正面所写的整数。如果两张卡片正面所写的整数相等，JOI 君会记住这个值并告诉你；否则，他会从两张卡片正面所写的整数中，选择一个对他而言更容易记住的值告诉你。\n\nJOI 君对整数的记忆难度由 $N$ 个整数 $P_0, P_1, \\dots, P_{N-1}$ 表示，这些整数满足以下两个条件：\n\n- $0 \\le P_i \\le N-1$（$0 \\le i \\le N-1$）。\n- $P_i \\ne P_j$（$0 \\le i < j \\le N-1$）。\n\n对 JOI 君而言，整数 $i$ 比整数 $j$ 更容易记住，当且仅当 $P_i < P_j$ 成立。\n\n你的任务是：通过与 JOI 君进行最多 $K$ 轮操作，确定每张卡片正面所写的整数。但你并不知道 JOI 君用于表示记忆难度的整数 $P_0, P_1, \\dots, P_{N-1}$ 的具体取值。\n\n**题目**\n\n请编写一个程序，通过与 JOI 君进行交互操作，确定每张卡片正面所写的整数。\n\n### 实现细节\n\n你需要写一个程序实现确定每张牌上写的数字的功能。你不需要引入外部头文件，但是你必须声明函数 `int Flip(int I, int J);` 和 `void Answer(int I, int J, int X);`。并且，你应当选择不低于 C++17 的语言标准提交。\n\n程序中必需实现以下函数：\n\n- $\\texttt{void Solve(int T, int N)}$  \n  对于每组测试数据，这个函数仅调用一次。$T$ 代表子任务编号，$N$ 代表有 $2N$ 张牌。  \n  这个函数必需通过调用 $\\texttt{Flip}$ 函数来确定牌上写的数字，通过调用 $\\texttt{Answer}$ 函数来做出回答。\n\n程序中可以调用以下函数：\n\n- $\\texttt{int Flip(int I, int J)}$  \n  当指定 JOI 君翻哪两张牌时调用这个函数。参数 $\\texttt{I, J}$ 表示 JOI 君需要翻开纸牌 $I$ 和 $J$。  \n  $I$ 和 $J$ 都必须是 $0$ 到 $2N-1$（包括两端）的整数，并且 $I$ 不等于 $J$。如果调用 $\\texttt{Flip}$ 函数时不满足条件，则会被判为 **Wrong answer [1]**。  \n  如果 $A_I=A_J$，则这个函数返回这个值，否则会返回 $A_I$ 和 $A_J$ 中更容易记住的那个值。  \n  如果这个函数调用超过 $K$ 次，则会被判为 **Wrong answer [2]**。\n- $\\texttt{void Answer(int I, int J, int X)}$  \n  这个函数表示写有整数 $X$ 的卡片可以被确定了。  \n  参数 $\\texttt{I, J, X}$ 需要满足以下条件：\n\n  - $0\\le I,J\\le 2N-1$\n  - $I\\neq J$\n  - $A_I=A_J=X$\n\n  如果调用时参数不满足以上条件，则会被判为 **Wrong answer [3]**。  \n  调用时，参数 $X$ 的值需要与先前任意调用中的 $X$ 不同。如果不满足，则会被判为 **Wrong answer [4]**。  \n  此函数必须恰好被调用 $N$ 次，否则会被判为 **Wrong answer [5]**。\n\n你的程序可以实现任何其他函数，或定义全局变量。但你的程序无论如何都不可以与标准输入输出或其他文件交互。\n\n附加文件中包含一个样例交互器和交互库，仅用作测试。\n\n样例交互器包含一个文件，文件名为 `grader.c` 或 `grader.cpp`。为了测试程序，需执行如下命令：\n\n- C 语言\n\n```bash\ngcc -std=c11 -O2 -o grader grader.c Memory2.c -lm\n```\n\n- C++ 语言\n\n```bash\ng++ -std=c++11 -O2 -o grader grader.cpp Memory2.cpp\n```\n\n如果编译成功，则会生成一个名为 `grader` 的可执行文件。\n\n请注意，实际判题过程和样例的判题过程不同。样例判题程序作为单进程执行。这个程序需要从标准输入中读入，并输出到标准输出中。", "inputFormat": "第一行三个整数 $T,N,K$，由一个空格隔开。分别表示子任务编号为 $T$，有 $2N$ 张牌，和 JOI 君最多问答 $K$ 次。\n\n第二行 $N$ 个整数 $P_0,P_1,\\ldots ,P_{N-1}$，表示 JOI 君对整数的记忆力。\n\n第三行 $2N$ 个整数 $A_0,A_1,\\ldots,A_{2N-1}$，表示从左到右纸牌上写的整数。", "outputFormat": "如果样例交互程序正常退出，它会向标准输出输出一行如下内容：\n\n- 如果答案正确，输出 `Accepted`。\n- 如果不正确，输出错误的类型，如 `Wrong answer [2]`。", "hint": "### 样例交互\n\n样例交互过程如下\n\n|          函数调用          |   返回值    |\n| :------------------------: | :---------: |\n|   $\\texttt{Flip(0, 2)}$    | $\\texttt 1$ |\n|   $\\texttt{Flip(0, 4)}$    | $\\texttt 1 $ |\n|   $\\texttt{Flip(1, 2)}$    | $\\texttt 0$ |\n| $\\texttt{Answer(0, 4, 1)}$ |             |\n|   $\\texttt{Flip(1, 3)}$    | $\\texttt 0$ |\n|   $\\texttt{Flip(5, 2)}$    | $\\texttt 2$ |\n|   $\\texttt{Flip(4, 5)}$    | $\\texttt 1$ |\n| $\\texttt{Answer(1, 3, 0)}$ |             |\n| $\\texttt{Answer(5, 2, 2)}$ |     $\\tt 0$        |\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le N \\le 50$。\n- $0 \\le P_i \\le N-1$（$0 \\le i \\le N-1$）。\n- $P_i \\ne P_j$（$0 \\le i < j \\le N-1$）。\n- $0 \\le A_i \\le N-1$（$0 \\le i \\le 2N-1$）。\n- 对于任意 $x$（$0 \\le x \\le N-1$），恰好存在两个 $i$（$0 \\le i \\le 2N-1$）满足 $A_i = x$。\n\n### 子任务\n\n**子任务 1 [10 分]**\n\n满足以下条件：\n\n- $T = 1$。\n- $K = 10\\,000$。\n- $P_i = i$（$0 \\le i \\le N-1$）。\n\n**子任务 2 [50 分]**\n\n满足以下条件：\n\n- $T = 2$。\n- $K = 400$。\n- $P_i = i$（$0 \\le i \\le N-1$）。\n\n**子任务 3 [40 分]**\n\n满足以下条件：\n\n- $T = 3$。\n- $K = 300$。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14396", "type": "P", "difficulty": 6, "samples": [["3\noxo\nxxo\noxo", "14"], ["10\nooxooxoxoo\nxooxxxoxxx\noxoxoooooo", "149022720"], ["10\nooxoxxoxoo\noxxxxxoxxx\noxooxoxoxo", "0"], ["20\noxooxoxooxoxooxoxoxo\noxxxoxoxxxooxxxxxoox\noxooxoxooxooxooxoxoo", "228518545"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2016", "组合数学", "JOISC/JOIST（日本）"], "title": "[JOISC 2016] 棋盘游戏 / Solitaire", "background": "", "description": "JOI 君正在使用一个纵向 $3$ 格、横向 $N$ 格的矩形棋盘和若干棋子进行游戏。在游戏的初始状态下，至少有一个格子上放置了棋子，同时至少有一个格子上没有放置棋子。\n\n该游戏的目标是：在尚未放置棋子的格子上逐个放置棋子，直到棋盘上所有格子都被放置棋子为止。但放置棋子需满足以下任一条件：\n\n- 该格子正上方和正下方的格子上均已有棋子。\n- 该格子左侧和右侧的格子上均已有棋子。\n\nJOI 君从游戏的初始状态开始，对达成目标所需的放置顺序总数感到好奇。然而，这个数值可能非常巨大。\n\n你的任务是：代替 JOI 君，求出从游戏初始状态开始到达成目标为止，所有可能的棋子放置顺序的数量，并对 $1\\,000\\,000\\,007$ 取模。\n", "inputFormat": "从标准输入读取以下数据：\n\n- 第 $1$ 行包含一个整数 $N$，表示游戏所用棋盘的尺寸：纵向 $3$ 格，横向 $N$ 格。\n- 接下来的 $3$ 行，每行包含一个长度为 $N$ 的字符串。每个字符为 `o` 或 `x`。第 $i$ 行（$1 \\le i \\le 3$）从左往右第 $j$ 个字符（$1 \\le j \\le N$）表示棋盘第 $i$ 行、第 $j$ 列格子的初始状态。若该字符为 `o`，表示该游戏初始状态下该格子上已放置棋子；若为 `x`，则表示该游戏初始状态下该格子上未放置棋子。\n", "outputFormat": "向标准输出输出一行，表示从初始状态到达成目标为止所有可能的棋子放置顺序的数量对 $1\\,000\\,000\\,007$ 取模的结果。\n", "hint": "### 样例 1 解释\n\n游戏的初始状态如下图所示（用 ◯ 表示有棋子放置）：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/5i2ew7en.png)\n:::\n\n以下是所有可以从初始状态达到最终状态的方案，其中序号为放棋子的顺序，共有 $14$ 种方案：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/i8p976nu.png)\n:::\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le N \\le 2000$。\n\n### 子任务\n\n**子任务 1 [10 分]**\n\n满足以下条件：\n\n- 游戏初始状态下，未放置棋子的格子数量不超过 16 个。\n- $N \\le 30$。\n\n**子任务 2 [12 分]**\n\n- 游戏初始状态下，对于每一个未放置棋子的格子，其上下左右四个相邻格子中，未放置棋子的格子数量不超过 2 个。\n\n**子任务 3 [20 分]**\n\n满足以下条件：\n\n- 游戏初始状态下，不存在纵向连续 3 个格子均未放置棋子的情况。\n- $N \\le 30$。\n\n**子任务 4 [38 分]**\n\n- 满足 $N \\le 300$。\n\n**子任务 5 [20 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2016] 棋盘游戏 / Solitaire", "background": "", "description": "JOI 君正在使用一个纵向 $3$ 格、横向 $N$ 格的矩形棋盘和若干棋子进行游戏。在游戏的初始状态下，至少有一个格子上放置了棋子，同时至少有一个格子上没有放置棋子。\n\n该游戏的目标是：在尚未放置棋子的格子上逐个放置棋子，直到棋盘上所有格子都被放置棋子为止。但放置棋子需满足以下任一条件：\n\n- 该格子正上方和正下方的格子上均已有棋子。\n- 该格子左侧和右侧的格子上均已有棋子。\n\nJOI 君从游戏的初始状态开始，对达成目标所需的放置顺序总数感到好奇。然而，这个数值可能非常巨大。\n\n你的任务是：代替 JOI 君，求出从游戏初始状态开始到达成目标为止，所有可能的棋子放置顺序的数量，并对 $1\\,000\\,000\\,007$ 取模。\n", "inputFormat": "从标准输入读取以下数据：\n\n- 第 $1$ 行包含一个整数 $N$，表示游戏所用棋盘的尺寸：纵向 $3$ 格，横向 $N$ 格。\n- 接下来的 $3$ 行，每行包含一个长度为 $N$ 的字符串。每个字符为 `o` 或 `x`。第 $i$ 行（$1 \\le i \\le 3$）从左往右第 $j$ 个字符（$1 \\le j \\le N$）表示棋盘第 $i$ 行、第 $j$ 列格子的初始状态。若该字符为 `o`，表示该游戏初始状态下该格子上已放置棋子；若为 `x`，则表示该游戏初始状态下该格子上未放置棋子。\n", "outputFormat": "向标准输出输出一行，表示从初始状态到达成目标为止所有可能的棋子放置顺序的数量对 $1\\,000\\,000\\,007$ 取模的结果。\n", "hint": "### 样例 1 解释\n\n游戏的初始状态如下图所示（用 ◯ 表示有棋子放置）：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/5i2ew7en.png)\n:::\n\n以下是所有可以从初始状态达到最终状态的方案，其中序号为放棋子的顺序，共有 $14$ 种方案：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/i8p976nu.png)\n:::\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le N \\le 2000$。\n\n### 子任务\n\n**子任务 1 [10 分]**\n\n满足以下条件：\n\n- 游戏初始状态下，未放置棋子的格子数量不超过 16 个。\n- $N \\le 30$。\n\n**子任务 2 [12 分]**\n\n- 游戏初始状态下，对于每一个未放置棋子的格子，其上下左右四个相邻格子中，未放置棋子的格子数量不超过 2 个。\n\n**子任务 3 [20 分]**\n\n满足以下条件：\n\n- 游戏初始状态下，不存在纵向连续 3 个格子均未放置棋子的情况。\n- $N \\le 30$。\n\n**子任务 4 [38 分]**\n\n- 满足 $N \\le 300$。\n\n**子任务 5 [20 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14397", "type": "P", "difficulty": 5, "samples": [["5 4\n8\n6\n3\n5\n4\n1 5\n2 4 1\n1 5\n1 3", "2\n1\n2"], ["7 5\n13\n19\n1\n15\n13\n1\n19\n1 20\n1 1\n1 6\n1 11\n1 17", "0\n1\n3\n3\n2"], ["10 5\n8\n10\n15\n2\n2\n8\n5\n12\n11\n4\n1 5\n2 8 4\n1 12\n2 5 11\n1 16", "2\n1\n0"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "树状数组", "离散化", "分块", "JOISC/JOIST（日本）"], "title": "[JOISC 2016] 雇佣计划 / Employment", "background": "", "description": "你是否听说过 Just Odd Inventions 公司？该公司的业务是“仅仅做一些奇妙的发明（just odd inventions）”。本文中，我们将其简称为 JOI 公司。\n\n为了扩大业务，JOI 公司决定新招聘一批员工。\n\n共有 $N$ 名候选人，每位候选人被编号为 $1$ 至 $N$，并被赋予一个称为“评价值”的整数。\n\n本次招聘中，公司将录用所有评价值不低于某个阈值的候选人。随后，将新录用的员工划分为若干组。新录用员工的分组方式需满足以下条件：\n\n- 若候选人 $a$ 与候选人 $b$（$a < b$）均被录用，则他们被分入同一组，当且仅当所有编号在 $[a, b]$ 范围内的候选人均被录用。\n\n作为 JOI 公司的人事负责人，你将总共处理 $M$ 个查询，以预估本次招聘中可形成的组数。第 $j$ 个查询属于以下两种类型之一：\n\n- 查询类型一：求当录用所有评价值不低于 $B_j$ 的候选人时，可形成的组数。此类查询称为“解答查询”。\n- 查询类型二：将候选人 $C_j$ 的评价值更新为 $D_j$。此类查询称为“更新查询”。\n\n**题目**\n\n当给定 $M$ 个查询的信息时，请编写程序，对每个“解答查询”求出对应的组数。", "inputFormat": "从标准输入读取以下数据：\n\n- 第 1 行包含两个整数 $N$ 和 $M$，以空格分隔。这表示共有 $N$ 名候选人，你将处理 $M$ 个查询。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含一个整数 $A_i$，表示在处理查询前，候选人 $i$ 的评价值为 $A_i$。\n- 接下来的 $M$ 行中，第 $j$ 行（$1 \\le j \\le M$）包含 2 个或 3 个以空格分隔的整数。令第 1 个整数为 $T_j$，则该行的内容如下：\n\n  1. 若 $T_j = 1$，则该行包含两个整数 $T_j$ 和 $B_j$，以空格分隔。这表示第 $j$ 个查询是一个解答查询：求当录用所有评价值不低于 $B_j$ 的候选人时，可形成的组数。\n  2. 若 $T_j = 2$，则该行包含三个整数 $T_j$、$C_j$、$D_j$，以空格分隔。这表示第 $j$ 个查询是一个更新查询：将候选人 $C_j$ 的评价值更新为 $D_j$。", "outputFormat": "向标准输出逐行输出每个解答查询对应的组数。\n", "hint": "### 样例 1 解释\n\n1. 第 1 个查询是解答查询。当录用评价值不低于 5 的候选人 1、候选人 2 和候选人 4 时，将形成两个组：一个由候选人 1 和候选人 2 组成，另一个由候选人 4 组成。因此，输出 2。\n2. 第 2 个查询是更新查询。将候选人 4 的评价值更新为 1。\n3. 第 3 个查询是解答查询。当录用评价值不低于 5 的候选人 1 和候选人 2 时，将形成一个由候选人 1 和候选人 2 组成的组。因此，输出 1。\n4. 第 4 个查询是解答查询。当录用评价值不低于 3 的候选人 1、候选人 2、候选人 3 和候选人 5 时，将形成两个组：一个由候选人 1、候选人 2 和候选人 3 组成，另一个由候选人 5 组成。因此，输出 2。\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le N \\le 200\\,000$。\n- $1 \\le M \\le 200\\,000$。\n- $1 \\le A_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）。\n- $1 \\le T_j \\le 2$（$1 \\le j \\le M$）。\n- $1 \\le B_j \\le 1\\,000\\,000\\,000$（$1 \\le j \\le M$）。\n- $1 \\le C_j \\le N$（$1 \\le j \\le M$）。\n- $1 \\le D_j \\le 1\\,000\\,000\\,000$（$1 \\le j \\le M$）。\n- 至少存在一个 $j$（$1 \\le j \\le M$）满足 $T_j = 1$。\n\n### 子任务\n\n**子任务 1 [10 分]**\n\n满足以下条件：\n\n- $N \\le 2000$。\n- $M \\le 2000$。\n\n**子任务 2 [30 分]**\n\n- 对所有 $j$（$1 \\le j \\le M$），满足 $T_j = 1$。\n\n**子任务 3 [60 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2016] 雇佣计划 / Employment", "background": "", "description": "你是否听说过 Just Odd Inventions 公司？该公司的业务是“仅仅做一些奇妙的发明（just odd inventions）”。本文中，我们将其简称为 JOI 公司。\n\n为了扩大业务，JOI 公司决定新招聘一批员工。\n\n共有 $N$ 名候选人，每位候选人被编号为 $1$ 至 $N$，并被赋予一个称为“评价值”的整数。\n\n本次招聘中，公司将录用所有评价值不低于某个阈值的候选人。随后，将新录用的员工划分为若干组。新录用员工的分组方式需满足以下条件：\n\n- 若候选人 $a$ 与候选人 $b$（$a < b$）均被录用，则他们被分入同一组，当且仅当所有编号在 $[a, b]$ 范围内的候选人均被录用。\n\n作为 JOI 公司的人事负责人，你将总共处理 $M$ 个查询，以预估本次招聘中可形成的组数。第 $j$ 个查询属于以下两种类型之一：\n\n- 查询类型一：求当录用所有评价值不低于 $B_j$ 的候选人时，可形成的组数。此类查询称为“解答查询”。\n- 查询类型二：将候选人 $C_j$ 的评价值更新为 $D_j$。此类查询称为“更新查询”。\n\n**题目**\n\n当给定 $M$ 个查询的信息时，请编写程序，对每个“解答查询”求出对应的组数。", "inputFormat": "从标准输入读取以下数据：\n\n- 第 1 行包含两个整数 $N$ 和 $M$，以空格分隔。这表示共有 $N$ 名候选人，你将处理 $M$ 个查询。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含一个整数 $A_i$，表示在处理查询前，候选人 $i$ 的评价值为 $A_i$。\n- 接下来的 $M$ 行中，第 $j$ 行（$1 \\le j \\le M$）包含 2 个或 3 个以空格分隔的整数。令第 1 个整数为 $T_j$，则该行的内容如下：\n\n  1. 若 $T_j = 1$，则该行包含两个整数 $T_j$ 和 $B_j$，以空格分隔。这表示第 $j$ 个查询是一个解答查询：求当录用所有评价值不低于 $B_j$ 的候选人时，可形成的组数。\n  2. 若 $T_j = 2$，则该行包含三个整数 $T_j$、$C_j$、$D_j$，以空格分隔。这表示第 $j$ 个查询是一个更新查询：将候选人 $C_j$ 的评价值更新为 $D_j$。", "outputFormat": "向标准输出逐行输出每个解答查询对应的组数。\n", "hint": "### 样例 1 解释\n\n1. 第 1 个查询是解答查询。当录用评价值不低于 5 的候选人 1、候选人 2 和候选人 4 时，将形成两个组：一个由候选人 1 和候选人 2 组成，另一个由候选人 4 组成。因此，输出 2。\n2. 第 2 个查询是更新查询。将候选人 4 的评价值更新为 1。\n3. 第 3 个查询是解答查询。当录用评价值不低于 5 的候选人 1 和候选人 2 时，将形成一个由候选人 1 和候选人 2 组成的组。因此，输出 1。\n4. 第 4 个查询是解答查询。当录用评价值不低于 3 的候选人 1、候选人 2、候选人 3 和候选人 5 时，将形成两个组：一个由候选人 1、候选人 2 和候选人 3 组成，另一个由候选人 5 组成。因此，输出 2。\n\n### 数据范围\n\n所有输入数据满足以下条件：\n\n- $1 \\le N \\le 200\\,000$。\n- $1 \\le M \\le 200\\,000$。\n- $1 \\le A_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）。\n- $1 \\le T_j \\le 2$（$1 \\le j \\le M$）。\n- $1 \\le B_j \\le 1\\,000\\,000\\,000$（$1 \\le j \\le M$）。\n- $1 \\le C_j \\le N$（$1 \\le j \\le M$）。\n- $1 \\le D_j \\le 1\\,000\\,000\\,000$（$1 \\le j \\le M$）。\n- 至少存在一个 $j$（$1 \\le j \\le M$）满足 $T_j = 1$。\n\n### 子任务\n\n**子任务 1 [10 分]**\n\n满足以下条件：\n\n- $N \\le 2000$。\n- $M \\le 2000$。\n\n**子任务 2 [30 分]**\n\n- 对所有 $j$（$1 \\le j \\le M$），满足 $T_j = 1$。\n\n**子任务 3 [60 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成\n", "locale": "zh-CN"}}}
{"pid": "P14398", "type": "P", "difficulty": 7, "samples": [["2 3\nNZN\nZZN", "10 8 2\n8 6 4"], ["2 2\nNZ\nZN", "-1 -1\n-1 -1"], ["5 5\nNZZZN\nNNNZN\nNNZNN\nNZNNN\nNZZZN", "10 12 14 16 2\n8 -1 -1 -1 4\n6 -1 -1 -1 6\n4 -1 -1 -1 8\n2 16 14 12 10"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "2016", "分治", "JOISC/JOIST（日本）"], "title": "[JOISC 2016] 三明治 / Sandwich", "background": "", "description": "JOI 君正在参加 JOI 公司的联谊会。联谊会上，三明治被摆放在一个 $R$ 行 $C$ 列的正方形网格中。每个三明治的形状为等腰直角三角形，其两条直角边的长度等于网格边长，且每个网格内放置两个三明治，它们的斜边彼此相邻。下图展示了三明治的摆放示例。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/rip1krw0.png)\n:::\n\n同时满足以下两个条件的三明治不可被取走：\n\n- 其斜边与另一个尚未被取走的三明治相邻。\n- 除斜边外的两条边中，至少有一条边与另一个尚未被取走的三明治相邻。\n\n除此之外的三明治均可取走。\n\n初始状态下，所有三明治均未被取走。从初始状态开始，若要取走某个三明治，可能需要先取走其他若干个三明治。根据三明治的摆放方式，也可能存在某些三明治从一开始便不可取。\n\nJOI 君希望吃掉放在同一网格中的两个三明治，但他尚未决定具体选择哪个网格。\n\n从初始状态开始，当他打算取走某个网格中的两个三明治时，他关心的是：必须取走的三明治的最少数量。\n\n**问题**\n\n给定三明治的摆放方式，对于每个网格，请判断：通过取走若干个三明治，是否可以取走该网格中的两个三明治；若可以，求出必须取走的三明治的最少数量（该数量包括目标的两个三明治）。", "inputFormat": "从标准输入读取以下数据：\n\n- 第 1 行包含两个整数 $R$、$C$，以空格分隔。这表示三明治被摆放在一个 $R$ 行 $C$ 列的正方形网格中。\n- 接下来的 $R$ 行中，第 $i$ 行（$1 \\le i \\le R$）包含一个长度为 $C$ 的字符串。每个字符为 'N' 或 'Z'。该字符串从左至右的第 $j$ 个字符（$1 \\le j \\le C$）表示第 $i$ 行第 $j$ 列网格中三明治的摆放方式。'N' 和 'Z' 分别表示以下两种摆放方式。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/l3hwr5is.png)\n:::", "outputFormat": "请向标准输出输出 $R$ 行。第 $i$ 行（$1 \\le i \\le R$）应输出 $C$ 个整数，以空格分隔。第 $j$ 个整数（$1 \\le j \\le C$）表示：当尝试取走第 $i$ 行第 $j$ 列网格中的两个三明治时，必须取走的三明治的最少数量。若无法取走，则输出 $-1$。\n", "hint": "### 样例 1 解释\n\n输入样例 1 中的三明治摆放方式对应题目文本中的图 1。\n\n例如，要取走第 2 行第 2 列网格中的两个三明治，可以按以下顺序取走三明治：\n\n- 取走第 1 行第 3 列网格右上方的三明治。\n- 取走第 1 行第 3 列网格左下方的三明治。\n- 取走第 2 行第 3 列网格右上方的三明治。\n- 取走第 2 行第 3 列网格左下方的三明治。\n- 取走第 2 行第 2 列网格右下方的三明治。\n- 取走第 2 行第 2 列网格左上方的三明治。\n\n总共需取走 6 个三明治，由于这是最小值，因此输出 6。\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le R \\le 400$。\n- $1 \\le C \\le 400$。\n\n### 子任务\n\n**子任务 1 [35 分]**\n\n满足以下条件：\n\n- $R \\le 50$。\n- $C \\le 50$。\n\n**子任务 2 [65 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2016] 三明治 / Sandwich", "background": "", "description": "JOI 君正在参加 JOI 公司的联谊会。联谊会上，三明治被摆放在一个 $R$ 行 $C$ 列的正方形网格中。每个三明治的形状为等腰直角三角形，其两条直角边的长度等于网格边长，且每个网格内放置两个三明治，它们的斜边彼此相邻。下图展示了三明治的摆放示例。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/rip1krw0.png)\n:::\n\n同时满足以下两个条件的三明治不可被取走：\n\n- 其斜边与另一个尚未被取走的三明治相邻。\n- 除斜边外的两条边中，至少有一条边与另一个尚未被取走的三明治相邻。\n\n除此之外的三明治均可取走。\n\n初始状态下，所有三明治均未被取走。从初始状态开始，若要取走某个三明治，可能需要先取走其他若干个三明治。根据三明治的摆放方式，也可能存在某些三明治从一开始便不可取。\n\nJOI 君希望吃掉放在同一网格中的两个三明治，但他尚未决定具体选择哪个网格。\n\n从初始状态开始，当他打算取走某个网格中的两个三明治时，他关心的是：必须取走的三明治的最少数量。\n\n**问题**\n\n给定三明治的摆放方式，对于每个网格，请判断：通过取走若干个三明治，是否可以取走该网格中的两个三明治；若可以，求出必须取走的三明治的最少数量（该数量包括目标的两个三明治）。", "inputFormat": "从标准输入读取以下数据：\n\n- 第 1 行包含两个整数 $R$、$C$，以空格分隔。这表示三明治被摆放在一个 $R$ 行 $C$ 列的正方形网格中。\n- 接下来的 $R$ 行中，第 $i$ 行（$1 \\le i \\le R$）包含一个长度为 $C$ 的字符串。每个字符为 'N' 或 'Z'。该字符串从左至右的第 $j$ 个字符（$1 \\le j \\le C$）表示第 $i$ 行第 $j$ 列网格中三明治的摆放方式。'N' 和 'Z' 分别表示以下两种摆放方式。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/l3hwr5is.png)\n:::", "outputFormat": "请向标准输出输出 $R$ 行。第 $i$ 行（$1 \\le i \\le R$）应输出 $C$ 个整数，以空格分隔。第 $j$ 个整数（$1 \\le j \\le C$）表示：当尝试取走第 $i$ 行第 $j$ 列网格中的两个三明治时，必须取走的三明治的最少数量。若无法取走，则输出 $-1$。\n", "hint": "### 样例 1 解释\n\n输入样例 1 中的三明治摆放方式对应题目文本中的图 1。\n\n例如，要取走第 2 行第 2 列网格中的两个三明治，可以按以下顺序取走三明治：\n\n- 取走第 1 行第 3 列网格右上方的三明治。\n- 取走第 1 行第 3 列网格左下方的三明治。\n- 取走第 2 行第 3 列网格右上方的三明治。\n- 取走第 2 行第 3 列网格左下方的三明治。\n- 取走第 2 行第 2 列网格右下方的三明治。\n- 取走第 2 行第 2 列网格左上方的三明治。\n\n总共需取走 6 个三明治，由于这是最小值，因此输出 6。\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le R \\le 400$。\n- $1 \\le C \\le 400$。\n\n### 子任务\n\n**子任务 1 [35 分]**\n\n满足以下条件：\n\n- $R \\le 50$。\n- $C \\le 50$。\n\n**子任务 2 [65 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14399", "type": "P", "difficulty": 6, "samples": [["4 3 3\n1\n2\n3\n1 3 4\n2\n2 4\n2\n2 3\n4\n2\n0", ""]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "交互题", "Special Judge", "进制", "JOISC/JOIST（日本）"], "title": "[JOISC 2016] 地牢 2 / Dungeon 2", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/2735)。", "description": "你知道 Just Ordinary Inventions 公司吗？这个公司就是专搞一些「仅仅是平凡的发明」的。\n\nJOI 君正在玩 Just Ordinary Inventions 公司最新开发的游戏。\n\n这款游戏要求玩家探索由一些房间和道路组成的地牢。一条道路双向连接地牢中的两个不同房间。对于任意两个不同的房间，最多只有一条道路连接它们，并且不存在两端连接相同房间的道路。同时我们已知你可以通过一些道路，从任意一个房间到达任意另一个房间。房间彼此之间很相似，如果对于两个房间，与它们各自连接的道路数量相同的话，仅通过观察两个房间的状态是无法区分出这两个房间的。\n\n在游戏中，每个房间都有标记和台座，以帮助玩家攻略这个地牢。离开这个房间的道路可以被标记标为道路 $1$，道路 $2$，……，以此类推。地牢的结构在游戏中不会改变。因此，如果你从相同的房间出发，走相同编号的路，到达的房间也是相同的。房间中的台座上有一个宝石。宝石的颜色是颜色 $1$，颜色 $2$，……，颜色 $X$ 中的一种，游戏开始时，所有房间中宝石的颜色都是颜色 $1$。除非玩家控制，否则宝石的颜色不会改变。\n\nJOI 君发现，如果知道了地牢的构造，也就是说，地牢里的房间是如何被道路相连的，那么这个游戏可以轻易地被攻略。然而，JOI 君在尝试了很多方法之后仍然无法确定地牢的构造。因此你决定替代 JOI 君，写一个程序确定这个地牢的构造。\n\n探索地牢，并写一个程序确定地牢的构造。然而，JOI 君并不想完全知道这个地牢的构造，所以程序也不需要直接回答这个地牢的构造。对于从 $1$ 到 $R$（包括两端）的每个整数 $i$，你需要回答「有多少对房间之间最少通过 $i$ 条道路可以互相到达」（对于两个房间 $a,b$，数对 $(a,b)$ 和数对 $(b,a)$ 是一样的，本题中我们考虑无序数对）。\n\n在探索地牢时，可以进行如下操作：\n\n- 询问当前的房间与多少道路相连。\n- 查询当前房间台座上宝石的颜色。\n- 让台座上的宝石变成你所指定的颜色（你也可以指定为当前宝石的颜色），之后，选择一条道路并去往与这条道路相连的另一个房间。\n- 查询你所走过的最后一条路，在当前房间下是第几条路。\n\n### 实现细节\n\n你需要写一个程序实现对 JOI 君的解答过程。你的程序无需引入外部头文件，但是需要声明以下函数，并且选择不低于 C++17 的语言提交试题。\n\n```cpp\nvoid Answer(int D, int A);\nvoid Move(int I, int V);\nint NumberOfRoads();\nint LastRoad();\nint Color();\n```\n\n这个程序必须实现如下函数：\n\n- $\\texttt{void Inspect(int R)}$\n\n  这个函数只会在开始时调用一次。\n\n  - 参数 $R$ 表示对于从 $1$ 到 $R$（包括两端）的每个整数 $i$，你需要回答「有多少对房间之间最少通过 $i$ 条道路可以互相到达」（对于两个房间 $a,b$，数对 $(a,b)$ 和数对 $(b,a)$ 是一样的，本题中我们考虑无序数对）。\n\n你可以调用如下函数做出回答：\n\n- $\\texttt{void Answer(int D, int A)}$\n\n  - 参数 $\\texttt{D, A}$ 表示「有 $A$ 对房间之间最少通过 $D$ 条道路可以互相到达」。\n\n  调用 $\\texttt{Answer}$ 函数时，需要满足如下条件：\n\n  - $\\texttt D$ 是 $1$ 到 $R$ 之间的整数（包括两端）。如果不满足，则会被判为 **Wrong answer [1]**。\n  - 对于相同的参数 $\\texttt D$，函数不能调用超过一次。如果不满足，则会被判为 **Wrong answer [2]**。\n  - $\\texttt{Answer}$ 函数必须调用恰好 $R$ 次。如果不满足，则会被判为 **Wrong answer [3]**。\n  - $\\texttt A$ 必须是最少通过 $\\texttt D$ 条道路可以互相到达的房间对数。 如果不满足，则会被判为 **Wrong answer [4]**。\n\n  如果 $\\texttt{Answer}$ 函数调用错误，之后的程序便不会再执行了。\n\n除此之外，程序中还可以调用如下函数：\n\n- $\\texttt{void Move(int I, int C)}$\n\n  - 参数 $\\texttt I$ 是玩家选择用来移动的道路编号。在这次调用之后，玩家立刻使用这条道路从当前房间前往与这条道路相连的另一个房间。\n  - 参数 $\\texttt C$ 表示在离开房间之前，将台座上的宝石变为颜色 $C$。\n\n  调用 $\\texttt{Move}$ 函数时，需要满足以下条件：\n\n  - 参数 $\\texttt I$ 必须是一个大于等于 $1$ 且小于等于 $K$ 的整数，这里 $K$ 指与玩家当前所在房间相连的道路条数。 如果不满足，则会被判为 **Wrong answer [5]**。\n  - 参数 $\\texttt C$ 必须是一个大于等于 $1$ 且小于等于 $X$ 的整数，这里 $X$ 指宝石颜色的种类数。对于每个子任务，$X$ 的值是确定的。如果不满足，则会被判为 **Wrong answer [6]**。\n  - $\\texttt{Move}$ 函数至多被调用 $1\\ 500\\ 000$ 次。如果不满足，则会被判为 **Wrong answer [7]**。\n\n- $\\texttt{int NumberOfRoads()}$\n\n  - 这个函数返回与玩家当前所处房间相连的道路条数。\n\n- $\\texttt{int LastRoad()}$\n\n  - 这个函数返回玩家所走过的最后一条道路，对于玩家当前所处房间来说是第几条路。然而，如果这个函数在第一次调用 $\\texttt{Move}$ 函数前被调用，则返回 $-1$。\n\n- $\\texttt{int Color()}$\n\n  - 这个函数返回玩家当前所处的房间中宝石的颜色。\n\n在调用函数 $\\texttt{Inspect}$ 后，判定答案是否正确。\n\n你的程序可以实现任何其他函数，或定义全局变量。但你的程序无论如何都不可以与标准输入输出或其他文件交互。\n\n附加文件中包含一个样例交互器和交互库，仅用作测试。\n\n样例交互器包含一个文件，文件名为 `grader.c` 或 `grader.cpp`。为了测试程序，需执行如下命令：\n\n- C 语言\n\n```bash\ngcc -std=c11 -O2 -o grader grader.c dungeon2.c -lm\n```\n\n- C++ 语言\n\n```bash\ng++ -std=c++11 -O2 -o grader grader.cpp dungeon2.cpp\n```\n\n如果编译成功，则会生成一个名为 `grader` 的可执行文件。\n\n请注意，实际判题过程和样例的判题过程不同。样例判题程序作为单进程执行。这个程序需要从标准输入中读入，并输出到标准输出中。", "inputFormat": "第一行包含三个整数 $N,X,R$，用一个空格隔开。分别表示房间有 $N$ 个，分别从 $1$ 到 $N$ 编号，宝石颜色有 $X$ 种，程序需要回答从 $1$ 到 $R$ 的答案。\n\n接下来 $2N$ 行，第 $2i-1\\ (1\\le i\\le N)$ 行有一个整数 $D_i$，表示与房间 $i$ 相连的道路条数。第 $2i\\ (1\\le i\\le N)$ 行有 $D_i$ 个整数 $T_{i,1},T_{i,2},\\ldots,T_{i,D_i}$，表示通过与房间 $i$ 相连的第 $j\\ (1\\le j\\le D_i)$ 条道路可以移动到房间 $T_{i,j}$。\n\n接下来 $R$ 行，第 $j\\ (1\\le j\\le R)$ 行一个整数 $A_j$。表示有 $A_j$ 对房间之间最少通过 $j$ 条道路可以互相到达。换句话说，对于每个整数 $j\\ (1\\le j\\le R)$，如果调用 $\\texttt{Answer}$ 时的参数有 $\\texttt D$ 是 $j$，$\\texttt A$ 是 $A_j$，那么交互程序就会判定答案正确，否则将判定为答案错误。\n\n样例交互程序中，玩家起始时所处房间为房间 $1$。", "outputFormat": "如果样例交互程序正常退出，它会向标准输出输出一行如下内容：\n\n- 如果答案正确，输出 $\\texttt{Move}$ 函数调用的次数，如 `Accepted : #move = 8`。\n- 如果不正确，输出错误的类型，如 `Wrong answer [1]`。", "hint": "### 样例解释\n\n样例交互过程如下\n\n|          函数调用          |   返回值   |\n| :------------------------: | :--------: |\n|   $\\texttt{Inspect(3)}$    |            |\n| $\\texttt{NumberOfRoads()}$ |    $1$     |\n|   $\\texttt{LastRoad()}$    |    $-1$    |\n|   $\\texttt{Move(1, 2)}$    |            |\n|     $\\texttt{Color()}$     |    $1$     |\n|   $\\texttt{LastRoad()}$    |    $1$     |\n| $\\texttt{NumberOfRoads()}$ |    $3$     |\n|   $\\texttt{Move(1, 3)}$    |            |\n|     $\\texttt{Color()}$     |    $2$     |\n|  $\\texttt{Answer(1, 4)}$   |            |\n|  $\\texttt{Answer(2, 2)}$   |    $0$     |\n|  $\\texttt{Answer(3, 0)}$   |            |\n\n### 数据范围\n\n对于所有输入数据，满足以下条件。对于 $N,D_i$ 和 $T_{i,j}$ 的意义，请参考「样例交互程序输入」。\n\n- $2\\le N\\le 200$\n- $3\\le X\\le 100$\n- $1\\le R\\le 200$\n- $1\\le D_i\\le N-1\\ (1\\le i\\le N)$\n- $1\\le T_{i,j}\\le N$ 且 $T_{i,j}\\neq i\\ (1\\le i\\le N,1\\le j\\le D_i)$\n- $T_{i,1},T_{i,2},\\ldots,T_{i,D_i}$ 之间互不相同\n- 对于任意 $i,j\\ (1\\le i\\le N,1\\le j\\le D_i)$，都存在 $k\\ (1\\le k\\le D_{T_{i,j}})$ 满足 $T_{T_{i,j},k}=i$\n- 你可以通过一些道路从任意一个房间到达任意另一个房间。\n\n详细子任务附加限制及分值如下表。输入中地牢中房间数为 $N$，道路数为 $M$。\n\n| 子任务 |         附加限制         | 分值 |\n| :----: | :----------------------: | :--: |\n|  $1$   | $N\\le 50,M\\le 100,X=100$ | $17$ |\n|  $2$   |  $N\\le 50,M\\le 100,X=3$  | $27$ |\n|  $3$   |          $X=3$           | $56$ |\n\n对于子任务 $3$，得分按如下标准确定。\n\n- 令 $L$ 为对于此子任务下所有测试点下列值的最大值\n  - $\\texttt{Move}$ 调用次数 $C$ 和 $M$ 的比值，也就是 $\\dfrac{C}{M}$。\n- 此时，这个子任务的得分为：\n  - 若 $L\\le 14$，则得 $56$ 分。\n  - 若 $14<L\\le 32$，则得 $\\lfloor 70-L\\rfloor$ 分。\n  - 若 $32<L\\le 64$，则得 $\\left\\lfloor 54-\\dfrac{L}{2}\\right\\rfloor$ 分。\n  - 若 $64<L$，则得 $0$ 分。\n\n这里，$\\lfloor x\\rfloor$ 表示不超过 $x$ 的最大整数。\n\n请注意，如果程序正确退出，并且答案被判为正确，在详细结果列中将显示 `Accepted`。但当子任务 $3$ 出现 $64<L$ 的情况时，详细结果会显示答案错误。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2016] 地牢 2 / Dungeon 2", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/2735)。", "description": "你知道 Just Ordinary Inventions 公司吗？这个公司就是专搞一些「仅仅是平凡的发明」的。\n\nJOI 君正在玩 Just Ordinary Inventions 公司最新开发的游戏。\n\n这款游戏要求玩家探索由一些房间和道路组成的地牢。一条道路双向连接地牢中的两个不同房间。对于任意两个不同的房间，最多只有一条道路连接它们，并且不存在两端连接相同房间的道路。同时我们已知你可以通过一些道路，从任意一个房间到达任意另一个房间。房间彼此之间很相似，如果对于两个房间，与它们各自连接的道路数量相同的话，仅通过观察两个房间的状态是无法区分出这两个房间的。\n\n在游戏中，每个房间都有标记和台座，以帮助玩家攻略这个地牢。离开这个房间的道路可以被标记标为道路 $1$，道路 $2$，……，以此类推。地牢的结构在游戏中不会改变。因此，如果你从相同的房间出发，走相同编号的路，到达的房间也是相同的。房间中的台座上有一个宝石。宝石的颜色是颜色 $1$，颜色 $2$，……，颜色 $X$ 中的一种，游戏开始时，所有房间中宝石的颜色都是颜色 $1$。除非玩家控制，否则宝石的颜色不会改变。\n\nJOI 君发现，如果知道了地牢的构造，也就是说，地牢里的房间是如何被道路相连的，那么这个游戏可以轻易地被攻略。然而，JOI 君在尝试了很多方法之后仍然无法确定地牢的构造。因此你决定替代 JOI 君，写一个程序确定这个地牢的构造。\n\n探索地牢，并写一个程序确定地牢的构造。然而，JOI 君并不想完全知道这个地牢的构造，所以程序也不需要直接回答这个地牢的构造。对于从 $1$ 到 $R$（包括两端）的每个整数 $i$，你需要回答「有多少对房间之间最少通过 $i$ 条道路可以互相到达」（对于两个房间 $a,b$，数对 $(a,b)$ 和数对 $(b,a)$ 是一样的，本题中我们考虑无序数对）。\n\n在探索地牢时，可以进行如下操作：\n\n- 询问当前的房间与多少道路相连。\n- 查询当前房间台座上宝石的颜色。\n- 让台座上的宝石变成你所指定的颜色（你也可以指定为当前宝石的颜色），之后，选择一条道路并去往与这条道路相连的另一个房间。\n- 查询你所走过的最后一条路，在当前房间下是第几条路。\n\n### 实现细节\n\n你需要写一个程序实现对 JOI 君的解答过程。你的程序无需引入外部头文件，但是需要声明以下函数，并且选择不低于 C++17 的语言提交试题。\n\n```cpp\nvoid Answer(int D, int A);\nvoid Move(int I, int V);\nint NumberOfRoads();\nint LastRoad();\nint Color();\n```\n\n这个程序必须实现如下函数：\n\n- $\\texttt{void Inspect(int R)}$\n\n  这个函数只会在开始时调用一次。\n\n  - 参数 $R$ 表示对于从 $1$ 到 $R$（包括两端）的每个整数 $i$，你需要回答「有多少对房间之间最少通过 $i$ 条道路可以互相到达」（对于两个房间 $a,b$，数对 $(a,b)$ 和数对 $(b,a)$ 是一样的，本题中我们考虑无序数对）。\n\n你可以调用如下函数做出回答：\n\n- $\\texttt{void Answer(int D, int A)}$\n\n  - 参数 $\\texttt{D, A}$ 表示「有 $A$ 对房间之间最少通过 $D$ 条道路可以互相到达」。\n\n  调用 $\\texttt{Answer}$ 函数时，需要满足如下条件：\n\n  - $\\texttt D$ 是 $1$ 到 $R$ 之间的整数（包括两端）。如果不满足，则会被判为 **Wrong answer [1]**。\n  - 对于相同的参数 $\\texttt D$，函数不能调用超过一次。如果不满足，则会被判为 **Wrong answer [2]**。\n  - $\\texttt{Answer}$ 函数必须调用恰好 $R$ 次。如果不满足，则会被判为 **Wrong answer [3]**。\n  - $\\texttt A$ 必须是最少通过 $\\texttt D$ 条道路可以互相到达的房间对数。 如果不满足，则会被判为 **Wrong answer [4]**。\n\n  如果 $\\texttt{Answer}$ 函数调用错误，之后的程序便不会再执行了。\n\n除此之外，程序中还可以调用如下函数：\n\n- $\\texttt{void Move(int I, int C)}$\n\n  - 参数 $\\texttt I$ 是玩家选择用来移动的道路编号。在这次调用之后，玩家立刻使用这条道路从当前房间前往与这条道路相连的另一个房间。\n  - 参数 $\\texttt C$ 表示在离开房间之前，将台座上的宝石变为颜色 $C$。\n\n  调用 $\\texttt{Move}$ 函数时，需要满足以下条件：\n\n  - 参数 $\\texttt I$ 必须是一个大于等于 $1$ 且小于等于 $K$ 的整数，这里 $K$ 指与玩家当前所在房间相连的道路条数。 如果不满足，则会被判为 **Wrong answer [5]**。\n  - 参数 $\\texttt C$ 必须是一个大于等于 $1$ 且小于等于 $X$ 的整数，这里 $X$ 指宝石颜色的种类数。对于每个子任务，$X$ 的值是确定的。如果不满足，则会被判为 **Wrong answer [6]**。\n  - $\\texttt{Move}$ 函数至多被调用 $1\\ 500\\ 000$ 次。如果不满足，则会被判为 **Wrong answer [7]**。\n\n- $\\texttt{int NumberOfRoads()}$\n\n  - 这个函数返回与玩家当前所处房间相连的道路条数。\n\n- $\\texttt{int LastRoad()}$\n\n  - 这个函数返回玩家所走过的最后一条道路，对于玩家当前所处房间来说是第几条路。然而，如果这个函数在第一次调用 $\\texttt{Move}$ 函数前被调用，则返回 $-1$。\n\n- $\\texttt{int Color()}$\n\n  - 这个函数返回玩家当前所处的房间中宝石的颜色。\n\n在调用函数 $\\texttt{Inspect}$ 后，判定答案是否正确。\n\n你的程序可以实现任何其他函数，或定义全局变量。但你的程序无论如何都不可以与标准输入输出或其他文件交互。\n\n附加文件中包含一个样例交互器和交互库，仅用作测试。\n\n样例交互器包含一个文件，文件名为 `grader.c` 或 `grader.cpp`。为了测试程序，需执行如下命令：\n\n- C 语言\n\n```bash\ngcc -std=c11 -O2 -o grader grader.c dungeon2.c -lm\n```\n\n- C++ 语言\n\n```bash\ng++ -std=c++11 -O2 -o grader grader.cpp dungeon2.cpp\n```\n\n如果编译成功，则会生成一个名为 `grader` 的可执行文件。\n\n请注意，实际判题过程和样例的判题过程不同。样例判题程序作为单进程执行。这个程序需要从标准输入中读入，并输出到标准输出中。", "inputFormat": "第一行包含三个整数 $N,X,R$，用一个空格隔开。分别表示房间有 $N$ 个，分别从 $1$ 到 $N$ 编号，宝石颜色有 $X$ 种，程序需要回答从 $1$ 到 $R$ 的答案。\n\n接下来 $2N$ 行，第 $2i-1\\ (1\\le i\\le N)$ 行有一个整数 $D_i$，表示与房间 $i$ 相连的道路条数。第 $2i\\ (1\\le i\\le N)$ 行有 $D_i$ 个整数 $T_{i,1},T_{i,2},\\ldots,T_{i,D_i}$，表示通过与房间 $i$ 相连的第 $j\\ (1\\le j\\le D_i)$ 条道路可以移动到房间 $T_{i,j}$。\n\n接下来 $R$ 行，第 $j\\ (1\\le j\\le R)$ 行一个整数 $A_j$。表示有 $A_j$ 对房间之间最少通过 $j$ 条道路可以互相到达。换句话说，对于每个整数 $j\\ (1\\le j\\le R)$，如果调用 $\\texttt{Answer}$ 时的参数有 $\\texttt D$ 是 $j$，$\\texttt A$ 是 $A_j$，那么交互程序就会判定答案正确，否则将判定为答案错误。\n\n样例交互程序中，玩家起始时所处房间为房间 $1$。", "outputFormat": "如果样例交互程序正常退出，它会向标准输出输出一行如下内容：\n\n- 如果答案正确，输出 $\\texttt{Move}$ 函数调用的次数，如 `Accepted : #move = 8`。\n- 如果不正确，输出错误的类型，如 `Wrong answer [1]`。", "hint": "### 样例解释\n\n样例交互过程如下\n\n|          函数调用          |   返回值   |\n| :------------------------: | :--------: |\n|   $\\texttt{Inspect(3)}$    |            |\n| $\\texttt{NumberOfRoads()}$ |    $1$     |\n|   $\\texttt{LastRoad()}$    |    $-1$    |\n|   $\\texttt{Move(1, 2)}$    |            |\n|     $\\texttt{Color()}$     |    $1$     |\n|   $\\texttt{LastRoad()}$    |    $1$     |\n| $\\texttt{NumberOfRoads()}$ |    $3$     |\n|   $\\texttt{Move(1, 3)}$    |            |\n|     $\\texttt{Color()}$     |    $2$     |\n|  $\\texttt{Answer(1, 4)}$   |            |\n|  $\\texttt{Answer(2, 2)}$   |    $0$     |\n|  $\\texttt{Answer(3, 0)}$   |            |\n\n### 数据范围\n\n对于所有输入数据，满足以下条件。对于 $N,D_i$ 和 $T_{i,j}$ 的意义，请参考「样例交互程序输入」。\n\n- $2\\le N\\le 200$\n- $3\\le X\\le 100$\n- $1\\le R\\le 200$\n- $1\\le D_i\\le N-1\\ (1\\le i\\le N)$\n- $1\\le T_{i,j}\\le N$ 且 $T_{i,j}\\neq i\\ (1\\le i\\le N,1\\le j\\le D_i)$\n- $T_{i,1},T_{i,2},\\ldots,T_{i,D_i}$ 之间互不相同\n- 对于任意 $i,j\\ (1\\le i\\le N,1\\le j\\le D_i)$，都存在 $k\\ (1\\le k\\le D_{T_{i,j}})$ 满足 $T_{T_{i,j},k}=i$\n- 你可以通过一些道路从任意一个房间到达任意另一个房间。\n\n详细子任务附加限制及分值如下表。输入中地牢中房间数为 $N$，道路数为 $M$。\n\n| 子任务 |         附加限制         | 分值 |\n| :----: | :----------------------: | :--: |\n|  $1$   | $N\\le 50,M\\le 100,X=100$ | $17$ |\n|  $2$   |  $N\\le 50,M\\le 100,X=3$  | $27$ |\n|  $3$   |          $X=3$           | $56$ |\n\n对于子任务 $3$，得分按如下标准确定。\n\n- 令 $L$ 为对于此子任务下所有测试点下列值的最大值\n  - $\\texttt{Move}$ 调用次数 $C$ 和 $M$ 的比值，也就是 $\\dfrac{C}{M}$。\n- 此时，这个子任务的得分为：\n  - 若 $L\\le 14$，则得 $56$ 分。\n  - 若 $14<L\\le 32$，则得 $\\lfloor 70-L\\rfloor$ 分。\n  - 若 $32<L\\le 64$，则得 $\\left\\lfloor 54-\\dfrac{L}{2}\\right\\rfloor$ 分。\n  - 若 $64<L$，则得 $0$ 分。\n\n这里，$\\lfloor x\\rfloor$ 表示不超过 $x$ 的最大整数。\n\n请注意，如果程序正确退出，并且答案被判为正确，在详细结果列中将显示 `Accepted`。但当子任务 $3$ 出现 $64<L$ 的情况时，详细结果会显示答案错误。", "locale": "zh-CN"}}}
{"pid": "P14400", "type": "P", "difficulty": 7, "samples": [["6 7\n8\n6\n7\n4\n5\n9\n2 4 5\n4 1 4\n6 2 7\n1 5 2\n3 4 8\n4 3 1\n3 1 3", "7\n9\n8\n7\n8\n6\n5"], ["4 2\n5\n2\n4\n7\n1 4 3\n1 4 1", "7\n5"], ["10 10\n19\n5\n8\n17\n14\n3\n9\n10\n7\n6\n1 8 4\n7 3 2\n5 9 10\n4 8 3\n10 3 6\n8 7 4\n6 6 3\n2 9 12\n6 3 7\n9 6 3", "19\n10\n14\n17\n8\n10\n3\n12\n7\n9"]], "limits": {"time": [9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "分块", "JOISC/JOIST（日本）"], "title": "[JOISC 2016] 回转寿司 / Sushi", "background": "", "description": "在回转寿司店 JOI，寿司被放置在环形传送带上运送。传送带以逆时针方向旋转。当前，店内有从第 1 号到第 $N$ 号的 $N$ 位顾客，他们按编号顺序逆时针围坐在传送带周围。第 $N$ 号顾客的旁边是第 1 号顾客。\n\n每位顾客手持一枚寿司。每枚寿司都有一个称为“价格”的固定数值。顾客离店时，需支付与其所持寿司价格相等的金额。\n\n回转寿司店 JOI 正在实施一项特别的限时促销活动。该活动分为 $Q$ 轮，按顺序从传送带前端提供寿司。第 $i$ 轮（$1 \\le i \\le Q$）提供的寿司内容由三个整数组成 $(S_i, T_i, P_i)$ 表示。\n\n限时促销的规则如下。在促销开始前，店员将回收传送带上所有的寿司。然后对 $i = 1, 2, \\ldots, Q$ 依次执行以下步骤 1 至 3：\n\n1. 在传送带前端、第 $S_i$ 号顾客的前方位置，放置一枚价格为 $P_i$ 的寿司。\n2. 寿司从第 $S_i$ 号顾客的位置移动至第 $T_i$ 号顾客的位置，沿传送带逆时针方向行进。途经的每位顾客将对寿司执行以下操作：\n   - 若该寿司的价格小于顾客当前所持寿司的价格，则顾客将自己的寿司与传送带上的寿司交换。\n   - 若该寿司的价格大于或等于顾客当前所持寿司的价格，则不进行交换。\n3. 寿司经过第 $T_i$ 号顾客前方后，店员将回收该寿司。\n\n你是一名在店员手下实习的学徒，负责清洗店内的寿司。为准备清洗工作，你需要提前弄清楚在限时促销的 $Q$ 轮提供中，店员每次回收的寿司价格分别是多少。\n\n**补充（比赛结束后追记）**\n\n当 $S_i = T_i$ 时，仅第 $S_i$ 号顾客执行第 2 步操作。\n\n**题目**\n\n给定每位顾客在限时促销开始前各自所持寿司的价格信息，以及限时促销中每轮提供的寿司信息，编写程序求出每轮提供中店员回收的寿司价格。", "inputFormat": "从标准输入读取以下数据：\n\n- 第 1 行包含两个整数 $N$ 和 $Q$，以空格分隔。这表示顾客人数为 $N$，限时促销中寿司的提供轮数为 $Q$。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含一个整数 $X_i$。这表示第 $i$ 号顾客在限时促销开始前持有价格为 $X_i$ 的寿司。\n- 接下来的 $Q$ 行中，第 $i$ 行（$1 \\le i \\le Q$）包含三个整数 $S_i$、$T_i$ 和 $P_i$，以空格分隔。这表示第 $i$ 轮提供的寿司由三元组 $(S_i, T_i, P_i)$ 表示。\n", "outputFormat": "输出共 $Q$ 行。第 $i$ 行（$1 \\le i \\le Q$）输出一个整数，表示在第 $i$ 轮寿司提供中，店员回收的寿司价格。\n", "hint": "### 样例 1 解释\n\n第 1 至第 6 号顾客在每轮寿司提供后所持寿司的价格如下：\n\n- 第 1 轮寿司提供后：$8, 5, 6, 4, 5, 9$\n- 第 2 轮寿司提供后：$8, 5, 6, 4, 4, 5$\n- 第 3 轮寿司提供后：$7, 5, 6, 4, 4, 5$\n- 第 4 轮寿司提供后：$2, 5, 6, 4, 4, 5$\n- 第 5 轮寿司提供后：$2, 5, 6, 4, 4, 5$\n- 第 6 轮寿司提供后：$2, 5, 5, 1, 4, 4$\n- 第 7 轮寿司提供后：$2, 5, 3, 1, 4, 4$\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le N \\le 400\\,000$。\n- $1 \\le Q \\le 25\\,000$。\n- $1 \\le X_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）。\n- $1 \\le S_i \\le N$（$1 \\le i \\le Q$）。\n- $1 \\le T_i \\le N$（$1 \\le i \\le Q$）。\n- $1 \\le P_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le Q$）。\n\n### 子任务\n\n**子任务 1 [5 分]**\n\n满足以下条件：\n\n- $N \\le 2000$。\n- $Q \\le 2000$。\n\n**子任务 2 [15 分]**\n\n满足以下条件：\n\n- $S_i = 1$（$1 \\le i \\le Q$）。\n- $T_i = N$（$1 \\le i \\le Q$）。\n\n**子任务 3 [80 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2016] 回转寿司 / Sushi", "background": "", "description": "在回转寿司店 JOI，寿司被放置在环形传送带上运送。传送带以逆时针方向旋转。当前，店内有从第 1 号到第 $N$ 号的 $N$ 位顾客，他们按编号顺序逆时针围坐在传送带周围。第 $N$ 号顾客的旁边是第 1 号顾客。\n\n每位顾客手持一枚寿司。每枚寿司都有一个称为“价格”的固定数值。顾客离店时，需支付与其所持寿司价格相等的金额。\n\n回转寿司店 JOI 正在实施一项特别的限时促销活动。该活动分为 $Q$ 轮，按顺序从传送带前端提供寿司。第 $i$ 轮（$1 \\le i \\le Q$）提供的寿司内容由三个整数组成 $(S_i, T_i, P_i)$ 表示。\n\n限时促销的规则如下。在促销开始前，店员将回收传送带上所有的寿司。然后对 $i = 1, 2, \\ldots, Q$ 依次执行以下步骤 1 至 3：\n\n1. 在传送带前端、第 $S_i$ 号顾客的前方位置，放置一枚价格为 $P_i$ 的寿司。\n2. 寿司从第 $S_i$ 号顾客的位置移动至第 $T_i$ 号顾客的位置，沿传送带逆时针方向行进。途经的每位顾客将对寿司执行以下操作：\n   - 若该寿司的价格小于顾客当前所持寿司的价格，则顾客将自己的寿司与传送带上的寿司交换。\n   - 若该寿司的价格大于或等于顾客当前所持寿司的价格，则不进行交换。\n3. 寿司经过第 $T_i$ 号顾客前方后，店员将回收该寿司。\n\n你是一名在店员手下实习的学徒，负责清洗店内的寿司。为准备清洗工作，你需要提前弄清楚在限时促销的 $Q$ 轮提供中，店员每次回收的寿司价格分别是多少。\n\n**补充（比赛结束后追记）**\n\n当 $S_i = T_i$ 时，仅第 $S_i$ 号顾客执行第 2 步操作。\n\n**题目**\n\n给定每位顾客在限时促销开始前各自所持寿司的价格信息，以及限时促销中每轮提供的寿司信息，编写程序求出每轮提供中店员回收的寿司价格。", "inputFormat": "从标准输入读取以下数据：\n\n- 第 1 行包含两个整数 $N$ 和 $Q$，以空格分隔。这表示顾客人数为 $N$，限时促销中寿司的提供轮数为 $Q$。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含一个整数 $X_i$。这表示第 $i$ 号顾客在限时促销开始前持有价格为 $X_i$ 的寿司。\n- 接下来的 $Q$ 行中，第 $i$ 行（$1 \\le i \\le Q$）包含三个整数 $S_i$、$T_i$ 和 $P_i$，以空格分隔。这表示第 $i$ 轮提供的寿司由三元组 $(S_i, T_i, P_i)$ 表示。\n", "outputFormat": "输出共 $Q$ 行。第 $i$ 行（$1 \\le i \\le Q$）输出一个整数，表示在第 $i$ 轮寿司提供中，店员回收的寿司价格。\n", "hint": "### 样例 1 解释\n\n第 1 至第 6 号顾客在每轮寿司提供后所持寿司的价格如下：\n\n- 第 1 轮寿司提供后：$8, 5, 6, 4, 5, 9$\n- 第 2 轮寿司提供后：$8, 5, 6, 4, 4, 5$\n- 第 3 轮寿司提供后：$7, 5, 6, 4, 4, 5$\n- 第 4 轮寿司提供后：$2, 5, 6, 4, 4, 5$\n- 第 5 轮寿司提供后：$2, 5, 6, 4, 4, 5$\n- 第 6 轮寿司提供后：$2, 5, 5, 1, 4, 4$\n- 第 7 轮寿司提供后：$2, 5, 3, 1, 4, 4$\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le N \\le 400\\,000$。\n- $1 \\le Q \\le 25\\,000$。\n- $1 \\le X_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）。\n- $1 \\le S_i \\le N$（$1 \\le i \\le Q$）。\n- $1 \\le T_i \\le N$（$1 \\le i \\le Q$）。\n- $1 \\le P_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le Q$）。\n\n### 子任务\n\n**子任务 1 [5 分]**\n\n满足以下条件：\n\n- $N \\le 2000$。\n- $Q \\le 2000$。\n\n**子任务 2 [15 分]**\n\n满足以下条件：\n\n- $S_i = 1$（$1 \\le i \\le Q$）。\n- $T_i = N$（$1 \\le i \\le Q$）。\n\n**子任务 3 [80 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
