{"pid": "P11022", "type": "P", "difficulty": 4, "samples": [["3\n4 5\n1 2\n1 3\n1 4\n2 3\n3 4\n5 6\n1 2\n1 3\n1 5\n2 3\n2 4\n3 4\n6 10\n1 2\n1 3\n1 5\n2 3\n2 4\n2 5\n2 6\n3 5\n3 6\n4 6", "BWBW\nBBWWB\nBWBWBW"], ["1\n4 3\n1 2\n1 3\n2 3", "-1"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "洛谷原创", "Special Judge", "O2优化", "深度优先搜索 DFS", "拓扑排序", "Tarjan", "双连通分量", "构造", "洛谷月赛", "圆方树"], "title": "「LAOI-6」Yet Another Graph Coloration Problem", "background": "", "description": "小 R 有一张 $n$ 个节点和 $m$ 条的边简单无向图，节点的编号依次为 $1 \\sim n$。她想要为图中的每个节点分配黑色或白色的颜色，使得：\n\n- 有至少 $1$ 个黑色节点；\n- 有至少 $1$ 个白色节点；\n- 对于任何一对点对 $(u, v)$，只要 $u$ 和 $v$ 的颜色不同，就存在至少 $2$ 条从 $u$ 到 $v$ 的不同的简单路径。\n\t- 简单路径是图上指不重复经过同一点的路径。\n\t- 若两条简单路径不同，要么其长度不同，要么至少存在一个正整数 $i$ 使两条路径经过的第 $i$ 个点不同。\n\n或者，报告解不存在。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，两个整数 $n, m$，表示图的节点数和边数。\n- 接下来 $m$ 行，每行两个整数 $u, v$，表示有一条 $u, v$ 之间的边。\n\n保证给出的图无重边、无自环。", "outputFormat": "对于每组数据：\n\n- 若有解，输出一行长为 $n$ 的字符串，第 $i$ 个字符为 `B` 表示 $i$ 号节点为黑色，为 `W` 表示 $i$ 号节点为白色；\n- 若无解，仅输出一行一个整数 $-1$。\n\n如果有多种合法的解，你只需要输出任意一种即可。", "hint": "**本题采用捆绑测试**。\n\n- Subtask 0（15 pts）：$\\sum 2^n \\leq 2^{16}$。\n- Subtask 1（25 pts）：$n \\leq 3\\times 10^3$，$m \\leq 3\\times 10^3$，$\\sum n \\leq 10^4$，$\\sum m \\leq 2\\times 10^4$。\n- Subtask 2（5 pts）：保证图不连通。\n- Subtask 3（10 pts）：保证每个点的度数均为 $2$。\n- Subtask 4（20 pts）：保证 $n = m$。\n- Subtask 5（25 pts）：无特殊限制。\n\n对于所有数据，保证 $1 \\leq T \\leq 10^5$，$2 \\leq n \\leq 2 \\times 10^5$，$0 \\leq m \\leq 2 \\times 10^5$，$\\sum n \\leq 2\\times 10^6$，$\\sum m \\leq 2\\times 10^6$，保证给出的图无重边、无自环。", "locale": "zh-CN", "translations": {"en": {"title": "「LAOI-6」Yet Another Graph Coloration Problem", "background": "", "description": "Little R has a simple undirected graph with $n$ nodes and $m$ edges, in which the nodes are numbered $1 \\sim n$. She wants to assign a black or white color to each node in the graph, so that:\n\n- There is at least one black node.\n- There is at least one white node.\n- For each pair of nodes $(u, v)$, if the color of nodes $u$ and $v$ are different, there are at least two different simple paths from $u$ to $v$.\n   - A simple path is a path that does not go through the same node repeatedly on the graph.\n   - Two simple paths are considered different, if and only if, either their lengths are different, or there exists at least one positive integer $i$ such that the $i$-th node that the two paths pass through are different.\n\nAlternatively, report that there is no solution.", "inputFormat": "**Each test contains multiple testcases.**\n\nThe first line of the input contains an integer $T$ — the number of test cases. The description of test cases follows.\n\n- The first line of each test case contains two integers $n, m$ — the number of nodes and edges.\n- Then, $m$ lines follow, each line contains two integers $u, v$, describing the edges.\n\nIt is guaranteed that there are no multiple edges or self-loops in the graph.", "outputFormat": "For each test case:\n\n- If there exists a way to assign the colors, output a string of length $n$ consisting of characters `BW` only, where the $i$-th node is black if the $i$-th character is `B`, and white if it is `W`;\n- If there is no solution, output a single line containing an integer $-1$.", "hint": "**Subtasks are used in this problem**.\n\n- Subtask 0 (15 pts):&emsp;$\\sum 2^n \\leq 2^{16}$.\n- Subtask 1 (25 pts):&emsp;$n \\leq 3\\times 10^3$, $m \\leq 3\\times 10^3$, $\\sum n \\leq 10^4$, $\\sum m \\leq 2\\times 10^4$.  \n- Subtask 2 (5 pts):&emsp;It is guaranteed that the given graph is not connected.\n- Subtask 3 (10 pts):&emsp;It is guaranteed that the degree of each node is $2$.\n- Subtask 4 (20 pts):&emsp;It is guaranteed that $n = m$.\n- Subtask 5 (25 pts):&emsp;No additional constraint.\n\nFor all tests, $1 \\leq T \\leq 10^5$, $2 \\leq n \\leq 2 \\times 10^5$, $0 \\leq m \\leq 2 \\times 10^5$. It is guaranteed that $\\sum n \\leq 2\\times 10^6$, $\\sum m \\leq 2\\times 10^6$, and there are no multiple edges or self-loops in the graph.", "locale": "en"}, "zh-CN": {"title": "「LAOI-6」Yet Another Graph Coloration Problem", "background": "", "description": "小 R 有一张 $n$ 个节点和 $m$ 条的边简单无向图，节点的编号依次为 $1 \\sim n$。她想要为图中的每个节点分配黑色或白色的颜色，使得：\n\n- 有至少 $1$ 个黑色节点；\n- 有至少 $1$ 个白色节点；\n- 对于任何一对点对 $(u, v)$，只要 $u$ 和 $v$ 的颜色不同，就存在至少 $2$ 条从 $u$ 到 $v$ 的不同的简单路径。\n\t- 简单路径是图上指不重复经过同一点的路径。\n\t- 若两条简单路径不同，要么其长度不同，要么至少存在一个正整数 $i$ 使两条路径经过的第 $i$ 个点不同。\n\n或者，报告解不存在。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，两个整数 $n, m$，表示图的节点数和边数。\n- 接下来 $m$ 行，每行两个整数 $u, v$，表示有一条 $u, v$ 之间的边。\n\n保证给出的图无重边、无自环。", "outputFormat": "对于每组数据：\n\n- 若有解，输出一行长为 $n$ 的字符串，第 $i$ 个字符为 `B` 表示 $i$ 号节点为黑色，为 `W` 表示 $i$ 号节点为白色；\n- 若无解，仅输出一行一个整数 $-1$。\n\n如果有多种合法的解，你只需要输出任意一种即可。", "hint": "**本题采用捆绑测试**。\n\n- Subtask 0（15 pts）：$\\sum 2^n \\leq 2^{16}$。\n- Subtask 1（25 pts）：$n \\leq 3\\times 10^3$，$m \\leq 3\\times 10^3$，$\\sum n \\leq 10^4$，$\\sum m \\leq 2\\times 10^4$。\n- Subtask 2（5 pts）：保证图不连通。\n- Subtask 3（10 pts）：保证每个点的度数均为 $2$。\n- Subtask 4（20 pts）：保证 $n = m$。\n- Subtask 5（25 pts）：无特殊限制。\n\n对于所有数据，保证 $1 \\leq T \\leq 10^5$，$2 \\leq n \\leq 2 \\times 10^5$，$0 \\leq m \\leq 2 \\times 10^5$，$\\sum n \\leq 2\\times 10^6$，$\\sum m \\leq 2\\times 10^6$，保证给出的图无重边、无自环。", "locale": "zh-CN"}}}
{"pid": "P11023", "type": "P", "difficulty": 6, "samples": [["6 4\n0 0\n9 0\n2 8\n6 5\n2 -7\n8 -7", "67.5"], ["5 3\n0 0\n10 0\n5 0\n5 5\n5 -5", "25"], ["8 5\n0 0\n15 0\n2 -2\n4 12\n10 -14\n6 -12\n2 -10\n13 10", "238"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "O2优化", "斜率优化", "四边形不等式", "凸包", "COTS（克罗地亚）"], "title": "[COTS 2020] 王国 Kraljevstvo", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D1T1。$\\texttt{1s,0.5G}$。\n", "description": "\n给定二维平面上的 $N$ 个点。选择 $K$ 个点，最大化这 $K$ 个点的凸包面积。\n\n此外，要求必须选择平面上 $x$ 坐标最小/最大的两个点。保证这两个点所在的与 $y$ 轴平行的直线上没有其他点，且这两个点的 $y$ 坐标为 $0$。\n\n只需要输出最大的面积。\n", "inputFormat": "\n第一行，两个正整数 $N,K$。\n\n接下来 $N$ 行，每行两个整数 $x_i,y_i$，描述一个点。\n", "outputFormat": "\n输出一行一个实数，表示凸包的最大面积。\n\n输出不应有多余的前导零或后导零。", "hint": "####\n\n- 样例 $1$ 解释：选择 $(0, 0), (2, −7),(2, 8) , (9, 0) $ 即可。\n- 样例 $2$ 解释：选择 $(0, 0), (10, 0) ,\n(5, −5) $ 即可。\n\n亦可参阅下图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jp2ibsfe.png)\n\n\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $3\\le K\\le N\\le 3\\, 000$；\n- $|x_i|,|y_i|\\le 10^9$；\n- 给出的点不重合；\n- $x$ 坐标最小/最大的点唯一，且对应的点的 $y$ 坐标为 $0$。\n\n\n| 子任务编号 | $N\\le $ | 得分 |  \n| :--: | :--: | :--: |\n| $ 1 $    | $20$ |$ 11 $   |  \n| $ 2 $    | $100$ | $ 25 $   |  \n| $ 3 $    | $500$ | $ 15 $   |  \n| $ 4 $    | $3\\, 000$ | $ 49 $   |  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2020] 王国 Kraljevstvo", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D1T1。$\\texttt{1s,0.5G}$。\n", "description": "\n给定二维平面上的 $N$ 个点。选择 $K$ 个点，最大化这 $K$ 个点的凸包面积。\n\n此外，要求必须选择平面上 $x$ 坐标最小/最大的两个点。保证这两个点所在的与 $y$ 轴平行的直线上没有其他点，且这两个点的 $y$ 坐标为 $0$。\n\n只需要输出最大的面积。\n", "inputFormat": "\n第一行，两个正整数 $N,K$。\n\n接下来 $N$ 行，每行两个整数 $x_i,y_i$，描述一个点。\n", "outputFormat": "\n输出一行一个实数，表示凸包的最大面积。\n\n输出不应有多余的前导零或后导零。", "hint": "####\n\n- 样例 $1$ 解释：选择 $(0, 0), (2, −7),(2, 8) , (9, 0) $ 即可。\n- 样例 $2$ 解释：选择 $(0, 0), (10, 0) ,\n(5, −5) $ 即可。\n\n亦可参阅下图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jp2ibsfe.png)\n\n\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $3\\le K\\le N\\le 3\\, 000$；\n- $|x_i|,|y_i|\\le 10^9$；\n- 给出的点不重合；\n- $x$ 坐标最小/最大的点唯一，且对应的点的 $y$ 坐标为 $0$。\n\n\n| 子任务编号 | $N\\le $ | 得分 |  \n| :--: | :--: | :--: |\n| $ 1 $    | $20$ |$ 11 $   |  \n| $ 2 $    | $100$ | $ 25 $   |  \n| $ 3 $    | $500$ | $ 15 $   |  \n| $ 4 $    | $3\\, 000$ | $ 49 $   |  ", "locale": "zh-CN"}}}
{"pid": "P11024", "type": "P", "difficulty": 6, "samples": [["6 5\n3 5 5\n1 1 6\n1 3 2\n1 4 7\n4 6 6\n6 2 5 5 5 6", "DA\n4 5 3 1 2\n"], ["14 6\n6 9 4\n12 13 6\n2 3 5\n1 14 3\n5 6 9\n9 12 8\n3 5 5 3 9 4 4 4 8 8 8 6 6 3", "DA\n4 5 1 6 2 3"], ["15 5\n7 8 3\n10 14 5\n4 7 2\n3 12 1\n5 9 4\n0 0 1 2 4 4 3 3 4 5 1 1 5 5 0", "NE"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2020", "线段树", "Special Judge", "O2优化", "COTS（克罗地亚）"], "title": "[COTS 2020] 定序 Redoslijed", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D1T2。$\\texttt{4s,0.5G}$。\n\n鸣谢：SPJ by @[mygr](https://www.luogu.com.cn/user/739552)", "description": "在一块长 $N\\,\\mathrm{m}$ 的木板上画画。木板被从左往右划分成 $N$ 个格子，每个格子长 $1\\,\\mathrm{m}$。\n\n现在已知在木板上涂了 $M$ 笔，第 $i$ 笔将第 $l_i\\sim r_i$ 个格子涂成颜色 $c_i$。\n\n给定最后涂色后木板的状态，试构造一种操作顺序使得一次操作后木板的状态为给定状态，或报告无解。\n", "inputFormat": "第一行，两个正整数 $N,M$。\n\n接下来 $M$ 行，每行三个整数 $l_i,r_i,c_i$，描述一个涂色操作。\n\n接下来一行，$N$ 个整数，第 $i$ 个整数表示第 $i$ 个格子最后的颜色 $b_i$。**特别地，若 $b_i=0$，代表 $b_i$ 未被着色。**", "outputFormat": "如果无解，输出 $\\texttt{NE}$（克罗地亚语「否」）。\n\n否则第一行输出 $\\texttt{DA}$（克罗地亚语「是」）；第二行输出一个 $1\\sim M$ 的排列表示涂色顺序。\n\n若有多解，任意均可。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 5\\times 10^5$；\n- $1\\le l_i\\le r_i\\le N$；\n- $1\\le c_i\\le 5\\times 10^5$；\n- $0\\le b_i\\le 5\\times 10^5$。\n\n\n| 子任务编号 | $N\\le $ | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $9$ |  |$ 5 $   | \n| $ 2 $    | $5\\,000$ | A |$ 10 $   |  \n| $ 3 $    | $5\\times 10^5$ | A |$ 25 $   |  \n| $ 4 $    | $5\\, 000$ || $ 12 $   |\n| $ 5 $    | $5\\times 10^5$ | B| $ 16 $   |\n| $ 6 $    | $5\\times 10^5$ || $ 32 $   |\n\n- 特殊性质 A：$c_i$ 两两不同。\n- 特殊性质 B：$1\\le c_i\\le 5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2020] 定序 Redoslijed", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D1T2。$\\texttt{4s,0.5G}$。\n\n鸣谢：SPJ by @[mygr](https://www.luogu.com.cn/user/739552)", "description": "在一块长 $N\\,\\mathrm{m}$ 的木板上画画。木板被从左往右划分成 $N$ 个格子，每个格子长 $1\\,\\mathrm{m}$。\n\n现在已知在木板上涂了 $M$ 笔，第 $i$ 笔将第 $l_i\\sim r_i$ 个格子涂成颜色 $c_i$。\n\n给定最后涂色后木板的状态，试构造一种操作顺序使得一次操作后木板的状态为给定状态，或报告无解。\n", "inputFormat": "第一行，两个正整数 $N,M$。\n\n接下来 $M$ 行，每行三个整数 $l_i,r_i,c_i$，描述一个涂色操作。\n\n接下来一行，$N$ 个整数，第 $i$ 个整数表示第 $i$ 个格子最后的颜色 $b_i$。**特别地，若 $b_i=0$，代表 $b_i$ 未被着色。**", "outputFormat": "如果无解，输出 $\\texttt{NE}$（克罗地亚语「否」）。\n\n否则第一行输出 $\\texttt{DA}$（克罗地亚语「是」）；第二行输出一个 $1\\sim M$ 的排列表示涂色顺序。\n\n若有多解，任意均可。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 5\\times 10^5$；\n- $1\\le l_i\\le r_i\\le N$；\n- $1\\le c_i\\le 5\\times 10^5$；\n- $0\\le b_i\\le 5\\times 10^5$。\n\n\n| 子任务编号 | $N\\le $ | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $9$ |  |$ 5 $   | \n| $ 2 $    | $5\\,000$ | A |$ 10 $   |  \n| $ 3 $    | $5\\times 10^5$ | A |$ 25 $   |  \n| $ 4 $    | $5\\, 000$ || $ 12 $   |\n| $ 5 $    | $5\\times 10^5$ | B| $ 16 $   |\n| $ 6 $    | $5\\times 10^5$ || $ 32 $   |\n\n- 特殊性质 A：$c_i$ 两两不同。\n- 特殊性质 B：$1\\le c_i\\le 5$。", "locale": "zh-CN"}}}
{"pid": "P11025", "type": "P", "difficulty": 6, "samples": [["2 2", "o--o  o\n|     |\no  o--o\n|     |\no--o--o"], ["2 2", "o--o--o\n|\no  o--o\n|     |\no--o--o"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "Special Judge", "O2优化", "COTS（克罗地亚）"], "title": "[COTS 2020] 辣椒 Sadnice", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D1T3。$\\texttt{3s,0.5G}$。", "description": "花园里种了辣椒。花园可以被描述为一张 $(N+1)\\times (M+1)$ 的网格图，其中辣椒被种在格点上。她还用 $[(N+1)\\times (M+1)-1]$ 条绳索连接相邻的格点，使得任意两株辣椒都能通过绳索互相到达。换句话说，绳索构成了这个网格图的生成树上的边。\n\n定义两棵辣椒**连通**，当且仅当它们通过绳索直接或间接相连。\n\n晚上有人要来搞破坏。破坏者会在水平方向或者竖直方向划一刀，将划过的绳索全部切断。切断后，辣椒植株会被分成几个连通块。**破坏者会让连通块的数量尽量多。**\n\n怎么安排绳索，才能使得被切断后连通块的数量最小？", "inputFormat": "一行两个正整数 $N,M$。", "outputFormat": "输出 $(2N+1)$ 行，每行 $(3M+1)$ 个字符。\n\n其中，第 $(2i-1)$ 行的第 $(3j-2)$ 个字符代表点 $(i,j)$（第 $i$ 行第 $j$ 列的植株），用 `o`（ASCII 111）表示。\n\n对于同一行的两个点 $(i,j),(i,j+1)$，若有边，则用 `--`（ASCII 45）填充它们之间的两个空格；否则不填充。\n\n对于同一列的两个点 $(i,j),(i+1,j)$，若有边，则用 `|`（ASCII 124）填充它们之间的一个空格；否则不填充。\n\n未填充的区域均用空格补齐。不要输出多余的空格和空行。\n\n可参阅样例输出。", "hint": "\n#### 评分方式\n\n若你输出的解是最优解，得该测试点的满分。\n\n否则，按照如下方式计算得分倍数：\n\n$$K=0.75\\times \\max\\left\\{\\left(\\frac{A-1}{B-1}\\right)^4,1-\\left(1-\\frac{1}{(B-A)^2}\\right)^6\\right\\}$$\n\n其中 $A$ 为最优的答案，$B$ 为你构造方案的答案。\n\n你将获得 $K$ 倍测试点得分的分数。子任务得分为子任务内测试点得分最小值。\n\n例如，样例 $1$ 输出得满分。样例 $2$ 输出得 $75\\%$ 的分数。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le M\\le 1\\, 000$。\n\n\n| 子任务编号 | $N,M\\le $ | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $1\\,000$ | A |$ 15 $   | \n| $ 2 $    | $1\\,000$ | B |$ 15 $   |  \n| $ 3 $    | $3$ |  |$ 5 $   |  \n| $ 4 $    | $10$ || $ 10 $   |\n| $ 5 $    | $100$ | | $ 20 $   |\n| $ 6 $    | $1\\, 000$ || $ 35 $   |\n\n- 特殊性质 A：$N=M$。\n- 特殊性质 B：$2N=M$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2020] 辣椒 Sadnice", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D1T3。$\\texttt{3s,0.5G}$。", "description": "花园里种了辣椒。花园可以被描述为一张 $(N+1)\\times (M+1)$ 的网格图，其中辣椒被种在格点上。她还用 $[(N+1)\\times (M+1)-1]$ 条绳索连接相邻的格点，使得任意两株辣椒都能通过绳索互相到达。换句话说，绳索构成了这个网格图的生成树上的边。\n\n定义两棵辣椒**连通**，当且仅当它们通过绳索直接或间接相连。\n\n晚上有人要来搞破坏。破坏者会在水平方向或者竖直方向划一刀，将划过的绳索全部切断。切断后，辣椒植株会被分成几个连通块。**破坏者会让连通块的数量尽量多。**\n\n怎么安排绳索，才能使得被切断后连通块的数量最小？", "inputFormat": "一行两个正整数 $N,M$。", "outputFormat": "输出 $(2N+1)$ 行，每行 $(3M+1)$ 个字符。\n\n其中，第 $(2i-1)$ 行的第 $(3j-2)$ 个字符代表点 $(i,j)$（第 $i$ 行第 $j$ 列的植株），用 `o`（ASCII 111）表示。\n\n对于同一行的两个点 $(i,j),(i,j+1)$，若有边，则用 `--`（ASCII 45）填充它们之间的两个空格；否则不填充。\n\n对于同一列的两个点 $(i,j),(i+1,j)$，若有边，则用 `|`（ASCII 124）填充它们之间的一个空格；否则不填充。\n\n未填充的区域均用空格补齐。不要输出多余的空格和空行。\n\n可参阅样例输出。", "hint": "\n#### 评分方式\n\n若你输出的解是最优解，得该测试点的满分。\n\n否则，按照如下方式计算得分倍数：\n\n$$K=0.75\\times \\max\\left\\{\\left(\\frac{A-1}{B-1}\\right)^4,1-\\left(1-\\frac{1}{(B-A)^2}\\right)^6\\right\\}$$\n\n其中 $A$ 为最优的答案，$B$ 为你构造方案的答案。\n\n你将获得 $K$ 倍测试点得分的分数。子任务得分为子任务内测试点得分最小值。\n\n例如，样例 $1$ 输出得满分。样例 $2$ 输出得 $75\\%$ 的分数。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le M\\le 1\\, 000$。\n\n\n| 子任务编号 | $N,M\\le $ | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $1\\,000$ | A |$ 15 $   | \n| $ 2 $    | $1\\,000$ | B |$ 15 $   |  \n| $ 3 $    | $3$ |  |$ 5 $   |  \n| $ 4 $    | $10$ || $ 10 $   |\n| $ 5 $    | $100$ | | $ 20 $   |\n| $ 6 $    | $1\\, 000$ || $ 35 $   |\n\n- 特殊性质 A：$N=M$。\n- 特殊性质 B：$2N=M$。\n", "locale": "zh-CN"}}}
{"pid": "P11026", "type": "P", "difficulty": 6, "samples": [["6 6\n3 4\n1 2\n2 3\n5 4\n4 1\n4 6", "0\n1"], ["4 2\n1 4\n2 3", "2\n4"], ["8 9\n1 4\n2 3\n6 7\n8 5\n2 4\n7 8\n5 6\n6 8\n4 3", "1\n5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "Special Judge", "O2优化", "COTS（克罗地亚）"], "title": "[COTS 2020] 抗疫 Autoritet", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D2T1。$\\texttt{2s,0.5G}$。\n", "description": "有 $N$ 个国家，$M$ 条双向航线连接不同的国家。需要注意的是，两个国家之间可能有多条航线连接。\n\n疫情当下，欲举全球之力共同抗疫，需要将世界联结。定义世界是**联结的**，当且仅当任意两个国家都通过航线直接或间接相连。\n\n\n\n我们记 $V=\\{1,2,\\cdots,N\\}$。在一次操作中：\n\n- 任意选择 $u\\in V$；\n- 令集合 $S$ 为国家 $u$ 通过**恰好一条**航线能够到达的国家的集合；令集合 $T=V\\backslash \\{u\\}\\backslash S$。\n- $\\forall v\\in S$，将连接 $u,v$ 的航线删除；$\\forall w\\in T$，添加连接 $u,w$ 的航线。\n\n可以证明，添加足够多的航线后，一定能够使世界联结。\n\n欲通过最少的操作次数使世界联结。\n\n求出：\n- 最少的操作次数 $k$；\n- 在最小化操作次数的前提下，不同的操作序列数量。只需要求出对 $(10^9+7)$ 取模后的结果。\n\n定义两个操作序列是不同的，当且仅当存在 $i\\in [1,k]$，使得在这两个操作序列中第 $i$ 次选择的国家 $u$ 不同。", "inputFormat": "\n第一行，两个正整数 $N,M$。\n\n接下来 $M$ 行，第 $i$ 行两个正整数 $a_i,b_i$，描述一条航线 $(a_i,b_i)$。\n", "outputFormat": "\n输出两行，每行一个整数，表示对应的答案。\n\n其中第二问的答案需要对 $(10^9+7)$ 取模。", "hint": "\n#### 样例解释\n\n- 样例 $1$ 解释：存在不需要执行任何操作的情况。\n- 样例 $2$ 解释：所有的操作序列有 $[1,4],[4,1],[2,3],[3,2]$。\n\n#### 评分方式\n\n如果回答对了第一问，可以获得 $15\\%$ 的分数。\n\n如果不打算回答第二问，也要任意输出一个 $\\in [0,10^9+7)$ 的整数，否则不保证得分符合预期。\n\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 5\\times 10^5$；\n- $a_i\\neq b_i$。\n\n\n| 子任务编号 | $N,M\\le $  | 得分 |  \n| :--: | :--: | :--: |  \n| $ 1 $    | $18$ |  $ 5 $   |  \n| $ 2 $    | $300$ |$ 9 $   |  \n| $ 3 $    | $3\\, 000$ |  $ 16 $   |  \n| $ 4 $    | $5\\times 10^5$ | $ 70 $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2020] 抗疫 Autoritet", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D2T1。$\\texttt{2s,0.5G}$。\n", "description": "有 $N$ 个国家，$M$ 条双向航线连接不同的国家。需要注意的是，两个国家之间可能有多条航线连接。\n\n疫情当下，欲举全球之力共同抗疫，需要将世界联结。定义世界是**联结的**，当且仅当任意两个国家都通过航线直接或间接相连。\n\n\n\n我们记 $V=\\{1,2,\\cdots,N\\}$。在一次操作中：\n\n- 任意选择 $u\\in V$；\n- 令集合 $S$ 为国家 $u$ 通过**恰好一条**航线能够到达的国家的集合；令集合 $T=V\\backslash \\{u\\}\\backslash S$。\n- $\\forall v\\in S$，将连接 $u,v$ 的航线删除；$\\forall w\\in T$，添加连接 $u,w$ 的航线。\n\n可以证明，添加足够多的航线后，一定能够使世界联结。\n\n欲通过最少的操作次数使世界联结。\n\n求出：\n- 最少的操作次数 $k$；\n- 在最小化操作次数的前提下，不同的操作序列数量。只需要求出对 $(10^9+7)$ 取模后的结果。\n\n定义两个操作序列是不同的，当且仅当存在 $i\\in [1,k]$，使得在这两个操作序列中第 $i$ 次选择的国家 $u$ 不同。", "inputFormat": "\n第一行，两个正整数 $N,M$。\n\n接下来 $M$ 行，第 $i$ 行两个正整数 $a_i,b_i$，描述一条航线 $(a_i,b_i)$。\n", "outputFormat": "\n输出两行，每行一个整数，表示对应的答案。\n\n其中第二问的答案需要对 $(10^9+7)$ 取模。", "hint": "\n#### 样例解释\n\n- 样例 $1$ 解释：存在不需要执行任何操作的情况。\n- 样例 $2$ 解释：所有的操作序列有 $[1,4],[4,1],[2,3],[3,2]$。\n\n#### 评分方式\n\n如果回答对了第一问，可以获得 $15\\%$ 的分数。\n\n如果不打算回答第二问，也要任意输出一个 $\\in [0,10^9+7)$ 的整数，否则不保证得分符合预期。\n\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 5\\times 10^5$；\n- $a_i\\neq b_i$。\n\n\n| 子任务编号 | $N,M\\le $  | 得分 |  \n| :--: | :--: | :--: |  \n| $ 1 $    | $18$ |  $ 5 $   |  \n| $ 2 $    | $300$ |$ 9 $   |  \n| $ 3 $    | $3\\, 000$ |  $ 16 $   |  \n| $ 4 $    | $5\\times 10^5$ | $ 70 $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11027", "type": "P", "difficulty": 6, "samples": [["2 1\n1 3\n2 3\nPOREDAK", "7\n1 2 1 2"], ["1 4\n4 3\nDOLAZI 3 8\nDOLAZI 5 2\nODLAZI 1\nODLAZI 3", "7\n14\n16\n13\n11"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "Special Judge", "O2优化", "COTS（克罗地亚）"], "title": "[COTS 2020] 餐厅 Restoran", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D2T2。$\\texttt{2s,0.5G}$。\n\n", "description": "\n苏联餐厅前有 $N$ 个人在排队，按顺序标号 $1\\sim N$。\n\n餐厅内只有一种菜，同时也是招牌菜——煎蛋。餐厅内没有厨师，所以食物由客人自己烹饪。\n\n由于设备有限，**同一时刻最多有一个人可以烹饪，同一时刻最多有一个人可以用餐。** \n\n定义：「用餐总时间」为从第一个人开始准备食物，到最后一个人用完餐，需要的时间。\n\n烹饪和用餐不一定按顺序，先烹饪的客人可以后用餐。\n\n第 $i$ 个人的烹饪时间为 $a_i$，用餐时间为 $b_i$。你需要求出最优情况下，用餐总时间的最小值。\n\n\n\n此外，还有 $M$ 个事件：\n\n- $\\texttt{DOLAZI a b}$：新来了一位新客人，他的烹饪时间为 $a$，用餐时间为 $b$。设这是第 $i$ 位新来的客人，则标号为 $(N+i)$。\n- $\\texttt{ODLAZI x}$：第 $x$ 位客人离开队伍。\n- $\\texttt{POREDAK}$：客人很不耐烦，想要知道最优的策略，使得用餐总时间最短。\n\n对于前两个类型的事件，你需要求出这个事件结束后，用餐总时间的最小值；\n\n对于第三个类型的事件，你需要求出此时最佳的烹饪、用餐顺序。", "inputFormat": "\n第一行，两个正整数 $N,M$。\n\n接下来 $N$ 行，第 $i$ 行两个正整数 $a_i,b_i$。\n\n接下来 $M$ 行，每行描述一个事件。\n\n数据保证事件合法，且每一时刻至少存在一名客人。\n", "outputFormat": "\n输出 $(M+1)$ 行。\n\n第一行，输出初始时用餐总时间的最小值。\n\n接下来 $M$ 行，对于第 $i$ 行：\n- 若第 $i$ 个事件为 $\\texttt{DOLAZI}$ 或 $\\texttt{ODLAZI}$ ，输出一个整数，表示这个事件结束后，用餐总时间的最小值；\n- 否则，设当前有 $k$ 个客人，输出 $2k$ 个整数，描述最优策略：前 $k$ 个整数表示烹饪的顺序，后 $k$ 个整数表示用餐的顺序。", "hint": "\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 2\\times 10^5$；\n- $1\\le a_i,b_i,a,b\\le 10^9$；\n- 事件合法，且每一时刻至少存在一名客人；\n- **$\\texttt{POREDAK}$ 事件最多只有 $\\bf 10$ 个。**\n\n\n| 子任务编号 | $N\\le $ | $M\\le $ |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: | :--: |  \n| $ 1 $    | $9$ | $ 1 $    |  A  | $ 5 $   |  \n| $ 2 $    | $20$ | $1$   |  A | $ 13 $   |  \n| $ 3 $    | $2\\times 10^5$ | $1$ | A  | $ 21 $   |  \n| $ 4 $    | $2\\times 10^5$ | $2\\times 10^5$  |  B | $ 29 $   |  \n| $ 5 $    | $2\\times 10^5$ | $2\\times 10^5$  |   | $ 32 $   |  \n\n- 特殊性质 A：只有 $\\texttt{POREDAK}$ 事件。\n- 特殊性质 B：没有 $\\texttt{POREDAK}$ 事件。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2020] 餐厅 Restoran", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D2T2。$\\texttt{2s,0.5G}$。\n\n", "description": "\n苏联餐厅前有 $N$ 个人在排队，按顺序标号 $1\\sim N$。\n\n餐厅内只有一种菜，同时也是招牌菜——煎蛋。餐厅内没有厨师，所以食物由客人自己烹饪。\n\n由于设备有限，**同一时刻最多有一个人可以烹饪，同一时刻最多有一个人可以用餐。** \n\n定义：「用餐总时间」为从第一个人开始准备食物，到最后一个人用完餐，需要的时间。\n\n烹饪和用餐不一定按顺序，先烹饪的客人可以后用餐。\n\n第 $i$ 个人的烹饪时间为 $a_i$，用餐时间为 $b_i$。你需要求出最优情况下，用餐总时间的最小值。\n\n\n\n此外，还有 $M$ 个事件：\n\n- $\\texttt{DOLAZI a b}$：新来了一位新客人，他的烹饪时间为 $a$，用餐时间为 $b$。设这是第 $i$ 位新来的客人，则标号为 $(N+i)$。\n- $\\texttt{ODLAZI x}$：第 $x$ 位客人离开队伍。\n- $\\texttt{POREDAK}$：客人很不耐烦，想要知道最优的策略，使得用餐总时间最短。\n\n对于前两个类型的事件，你需要求出这个事件结束后，用餐总时间的最小值；\n\n对于第三个类型的事件，你需要求出此时最佳的烹饪、用餐顺序。", "inputFormat": "\n第一行，两个正整数 $N,M$。\n\n接下来 $N$ 行，第 $i$ 行两个正整数 $a_i,b_i$。\n\n接下来 $M$ 行，每行描述一个事件。\n\n数据保证事件合法，且每一时刻至少存在一名客人。\n", "outputFormat": "\n输出 $(M+1)$ 行。\n\n第一行，输出初始时用餐总时间的最小值。\n\n接下来 $M$ 行，对于第 $i$ 行：\n- 若第 $i$ 个事件为 $\\texttt{DOLAZI}$ 或 $\\texttt{ODLAZI}$ ，输出一个整数，表示这个事件结束后，用餐总时间的最小值；\n- 否则，设当前有 $k$ 个客人，输出 $2k$ 个整数，描述最优策略：前 $k$ 个整数表示烹饪的顺序，后 $k$ 个整数表示用餐的顺序。", "hint": "\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 2\\times 10^5$；\n- $1\\le a_i,b_i,a,b\\le 10^9$；\n- 事件合法，且每一时刻至少存在一名客人；\n- **$\\texttt{POREDAK}$ 事件最多只有 $\\bf 10$ 个。**\n\n\n| 子任务编号 | $N\\le $ | $M\\le $ |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: | :--: |  \n| $ 1 $    | $9$ | $ 1 $    |  A  | $ 5 $   |  \n| $ 2 $    | $20$ | $1$   |  A | $ 13 $   |  \n| $ 3 $    | $2\\times 10^5$ | $1$ | A  | $ 21 $   |  \n| $ 4 $    | $2\\times 10^5$ | $2\\times 10^5$  |  B | $ 29 $   |  \n| $ 5 $    | $2\\times 10^5$ | $2\\times 10^5$  |   | $ 32 $   |  \n\n- 特殊性质 A：只有 $\\texttt{POREDAK}$ 事件。\n- 特殊性质 B：没有 $\\texttt{POREDAK}$ 事件。\n", "locale": "zh-CN"}}}
{"pid": "P11028", "type": "P", "difficulty": 6, "samples": [["1 3\n2 3 1", "333333337"], ["2 5\n4 2 1 3 5\n2 5 4 3 1", "5"], ["1 9\n3 4 5 6 7 8 1 9 2", "300000017"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "O2优化", "群论", "置换", "COTS（克罗地亚）"], "title": "[COTS 2020] 龙猫 Totoro", "background": "\n译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D2T3。$\\texttt{1s,0.5G}$。", "description": "给定 $K$ 个 $1\\sim N$ 的排列 $\\pi_1,\\pi_2,\\cdots,\\pi_K$。\n\n求出排列群 $G(S,\\circ)$ 中的排列的逆序对期望值。其中二元运算 $\\circ$ 为**置换**，$\\forall 1\\le i\\le K$，都有 $\\pi_i\\in S$。\n\n具体地说，我们定义 $(\\pi\\circ \\tau)(i)=\\pi(\\tau(i))$。\n\n群 $G(S,\\circ)$ 是满足如下性质的代数结构：\n\n- 封闭性：$\\forall a,b\\in S$，都有 $a\\circ b\\in S$；\n- 结合律：$\\forall a,b,c\\in S$，都有 $(a\\circ b)\\circ c=a\\circ (b\\circ c)$；\n- 幺元：存在 $e\\in S$，对于 $\\forall a\\in S$，都有 $a\\circ e=e\\circ a=a$；\n- 逆元：$\\forall a\\in S$，存在 $b\\in S$，使得 $a\\circ b=b\\circ a=e$。\n\n\n定义 $\\mathcal{L}(\\pi)$ 为 $\\pi$ 的逆序对数，即 $\\displaystyle \\mathcal{L}(\\pi)=\\sum_{1\\le i\\lt j\\le n}[\\pi(i)\\gt \\pi(j)]$，求出 $\\displaystyle \\frac{1}{|S|}\\sum_{\\pi \\in S} \\mathcal{L}(\\pi)$。\n\n答案对 $(10^9+7)$ 取模。", "inputFormat": "\n第一行，两个正整数 $K,N$。\n\n接下来 $K$ 行，第 $i$ 行 $N$ 个正整数描述 $\\pi_i$。\n", "outputFormat": "\n输出一行一个整数，即答案对 $(10^9+7)$ 取模后的结果。", "hint": "\n#### 样例解释\n\n- 样例 $1$ 解释：$S=\\{[2,3,1],[3,1,2],[1,2,3]\\}$。逆序对期望值为 $\\frac{1+2+0}{3}=\\frac{4}{3}$。\n- 样例 $2$ 解释：可以证明 $|S|=5!$，即 $S$ 中包含了 $1\\sim 5$ 的所有排列。\n- 样例 $3$ 解释：此时 $|S|=20$，答案真实值为 $\\frac{149}{10}$。\n\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le K\\le 10$；\n- $1\\le N\\le 2\\, 500$；\n- $\\pi_i$ 是 $1\\sim N$ 的排列。\n\n\n| 子任务编号 | $N\\le $ | $K\\le $ |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: | :--: |  \n| $ 1 $    | $9$ | $ 10 $    |  无  | $ 7 $   |  \n| $ 2 $    | $2\\,500$ | $1$   |  有 | $ 8 $   |  \n| $ 3 $    | $2\\, 500$ | $1$ | 无  | $ 25 $   |  \n| $ 4 $    | $2\\, 500$ | $10$  |  无 | $ 60 $   |  \n\n特殊性质：$\\forall 1\\le i\\le K$，存在 $1\\sim N$ 的排列 $a$，使得 $\\pi_i(a_1)=a_2,\\pi_{i}(a_2)=a_3,\\cdots,\\pi_i(a_n)=a_1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2020] 龙猫 Totoro", "background": "\n译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D2T3。$\\texttt{1s,0.5G}$。", "description": "给定 $K$ 个 $1\\sim N$ 的排列 $\\pi_1,\\pi_2,\\cdots,\\pi_K$。\n\n求出排列群 $G(S,\\circ)$ 中的排列的逆序对期望值。其中二元运算 $\\circ$ 为**置换**，$\\forall 1\\le i\\le K$，都有 $\\pi_i\\in S$。\n\n具体地说，我们定义 $(\\pi\\circ \\tau)(i)=\\pi(\\tau(i))$。\n\n群 $G(S,\\circ)$ 是满足如下性质的代数结构：\n\n- 封闭性：$\\forall a,b\\in S$，都有 $a\\circ b\\in S$；\n- 结合律：$\\forall a,b,c\\in S$，都有 $(a\\circ b)\\circ c=a\\circ (b\\circ c)$；\n- 幺元：存在 $e\\in S$，对于 $\\forall a\\in S$，都有 $a\\circ e=e\\circ a=a$；\n- 逆元：$\\forall a\\in S$，存在 $b\\in S$，使得 $a\\circ b=b\\circ a=e$。\n\n\n定义 $\\mathcal{L}(\\pi)$ 为 $\\pi$ 的逆序对数，即 $\\displaystyle \\mathcal{L}(\\pi)=\\sum_{1\\le i\\lt j\\le n}[\\pi(i)\\gt \\pi(j)]$，求出 $\\displaystyle \\frac{1}{|S|}\\sum_{\\pi \\in S} \\mathcal{L}(\\pi)$。\n\n答案对 $(10^9+7)$ 取模。", "inputFormat": "\n第一行，两个正整数 $K,N$。\n\n接下来 $K$ 行，第 $i$ 行 $N$ 个正整数描述 $\\pi_i$。\n", "outputFormat": "\n输出一行一个整数，即答案对 $(10^9+7)$ 取模后的结果。", "hint": "\n#### 样例解释\n\n- 样例 $1$ 解释：$S=\\{[2,3,1],[3,1,2],[1,2,3]\\}$。逆序对期望值为 $\\frac{1+2+0}{3}=\\frac{4}{3}$。\n- 样例 $2$ 解释：可以证明 $|S|=5!$，即 $S$ 中包含了 $1\\sim 5$ 的所有排列。\n- 样例 $3$ 解释：此时 $|S|=20$，答案真实值为 $\\frac{149}{10}$。\n\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le K\\le 10$；\n- $1\\le N\\le 2\\, 500$；\n- $\\pi_i$ 是 $1\\sim N$ 的排列。\n\n\n| 子任务编号 | $N\\le $ | $K\\le $ |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: | :--: |  \n| $ 1 $    | $9$ | $ 10 $    |  无  | $ 7 $   |  \n| $ 2 $    | $2\\,500$ | $1$   |  有 | $ 8 $   |  \n| $ 3 $    | $2\\, 500$ | $1$ | 无  | $ 25 $   |  \n| $ 4 $    | $2\\, 500$ | $10$  |  无 | $ 60 $   |  \n\n特殊性质：$\\forall 1\\le i\\le K$，存在 $1\\sim N$ 的排列 $a$，使得 $\\pi_i(a_1)=a_2,\\pi_{i}(a_2)=a_3,\\cdots,\\pi_i(a_n)=a_1$。", "locale": "zh-CN"}}}
{"pid": "P11029", "type": "P", "difficulty": 2, "samples": [["3", "1728"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "O2优化"], "title": "『DABOI Round 1』A Simple Problem", "background": "> 红题令人红温。", "description": "求 $\\prod \\limits_{i=1}^{n} \\prod\\limits_{j=1}^{i} \\prod \\limits_{k=1}^{j} k^k$ 对 $998244353$ 取模后的值。", "inputFormat": "输入共 $1$ 行 $1$ 个整数，表示 $n$。", "outputFormat": "输出共 $1$ 行 $1$ 个整数，表示答案。", "hint": "**【数据范围】**\n\n- 对于 $20\\%$ 的数据，$n\\leq5\\times10^2$；\n- 对于 $50\\%$ 的数据，$n\\leq5\\times10^3$;\n- 对于 $100\\%$ 的数据，$1\\leq n\\leq1.8\\times10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『DABOI Round 1』A Simple Problem", "background": "> 红题令人红温。", "description": "求 $\\prod \\limits_{i=1}^{n} \\prod\\limits_{j=1}^{i} \\prod \\limits_{k=1}^{j} k^k$ 对 $998244353$ 取模后的值。", "inputFormat": "输入共 $1$ 行 $1$ 个整数，表示 $n$。", "outputFormat": "输出共 $1$ 行 $1$ 个整数，表示答案。", "hint": "**【数据范围】**\n\n- 对于 $20\\%$ 的数据，$n\\leq5\\times10^2$；\n- 对于 $50\\%$ 的数据，$n\\leq5\\times10^3$;\n- 对于 $100\\%$ 的数据，$1\\leq n\\leq1.8\\times10^6$。", "locale": "zh-CN"}}}
{"pid": "P11030", "type": "P", "difficulty": 5, "samples": [["2\nstocyhorz\ncyh", "4"], ["4\nc\nccc", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "O2优化", "矩阵加速", "组合数学"], "title": "『DABOI Round 1』Blessings Repeated", "background": "@[cyh20100812](https://www.luogu.com.cn/user/1051692) 因其很有实力被尊称为圣母。\n\n> 圣母好闪，拜谢圣母！", "description": "圣母是一名辩论家，即 ENTP。\n\n她在进行一次辩论时的观点是字符串 $S$，她为了让对方信服她的观点她会强调 $k$ 次，所以她的辩词即为 $k$ 个字符串 $S$ 依次首尾相接。\n\n你作为反驳的人可能不能听清楚她说的所有话，所以你只能抓取关键词 $T$，你需要求出 $k$ 个首尾相接的 $S$ 中有多少个子序列（不一定连续）为 $T$，答案对 $998244353$ 取模。\n\n---\n\n**【形式化题意】**\n\n给定一个正整数 $k$ 和两个字符串 $S,T$。\n\n设字符串 $s$ 为 $k$ 个字符串 $S$ 首尾相接得到的字符串，$n=\\vert s \\vert , m=\\vert T \\vert$。\n\n设答案集合 $P=\\{ (i_0,i_1,\\dots,i_{m-1})  \\mid 0\\le i_0 < i_1 < \\dots < i_{m-1} < n, \\forall~0 \\le j < m, s_{i_j}=T_j \\}$，请求出 $\\vert P \\vert \\bmod 998244353$。", "inputFormat": "输入共 $3$ 行。\n\n第 $1$ 行 $1$ 个整数，表示 $k$。\n\n第 $2$ 行 $1$ 个字符串，表示 $S$。\n\n第 $3$ 行 $1$ 个字符串，表示 $T$。", "outputFormat": "输出共 $1$ 行 $1$ 个整数，表示答案。", "hint": "**【样例 1 解释】**\n\n将 $S$ 重复 $2$ 次得到 $\\texttt{stocyhorzstocyhorz}$。\n\n答案集合 $P=\\{(3,4,5),(3,4,14),(3,13,14),(12,13,14) \\}$，因此 $\\vert P\\vert=4$。\n\n---\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$0<k\\le10^{18}$，$0 < \\vert S \\vert \\le 5 \\times 10^3$，$0 < \\vert T \\vert \\le 10$，字符串 $S,T$ 均由小写英文字母组成。\n\n| $\\text{Point}$ | $k\\le$ | $\\vert S\\vert\\le$ | $\\vert T\\vert\\le$ |\n| :-: | :-: | :-: | :-: |\n| $1\\sim2$        | $10^{18}$ | $5 \\times 10^3$     | $1$                 |\n| $3$          | $1$       | $5 \\times 10^3$     | $2$                 |\n| $4\\sim5$        | $100$     | $5 \\times 10 ^3$    | $2$                 |\n| $6\\sim7$        | $1$       | $50$                | $4$                 |\n| $8\\sim10$     | $10$      | $5 \\times 10^3$     | $10$                |\n| $11\\sim20$ | $10^{18}$ | $5 \\times 10^3$     | $10$                |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『DABOI Round 1』Blessings Repeated", "background": "@[cyh20100812](https://www.luogu.com.cn/user/1051692) 因其很有实力被尊称为圣母。\n\n> 圣母好闪，拜谢圣母！", "description": "圣母是一名辩论家，即 ENTP。\n\n她在进行一次辩论时的观点是字符串 $S$，她为了让对方信服她的观点她会强调 $k$ 次，所以她的辩词即为 $k$ 个字符串 $S$ 依次首尾相接。\n\n你作为反驳的人可能不能听清楚她说的所有话，所以你只能抓取关键词 $T$，你需要求出 $k$ 个首尾相接的 $S$ 中有多少个子序列（不一定连续）为 $T$，答案对 $998244353$ 取模。\n\n---\n\n**【形式化题意】**\n\n给定一个正整数 $k$ 和两个字符串 $S,T$。\n\n设字符串 $s$ 为 $k$ 个字符串 $S$ 首尾相接得到的字符串，$n=\\vert s \\vert , m=\\vert T \\vert$。\n\n设答案集合 $P=\\{ (i_0,i_1,\\dots,i_{m-1})  \\mid 0\\le i_0 < i_1 < \\dots < i_{m-1} < n, \\forall~0 \\le j < m, s_{i_j}=T_j \\}$，请求出 $\\vert P \\vert \\bmod 998244353$。", "inputFormat": "输入共 $3$ 行。\n\n第 $1$ 行 $1$ 个整数，表示 $k$。\n\n第 $2$ 行 $1$ 个字符串，表示 $S$。\n\n第 $3$ 行 $1$ 个字符串，表示 $T$。", "outputFormat": "输出共 $1$ 行 $1$ 个整数，表示答案。", "hint": "**【样例 1 解释】**\n\n将 $S$ 重复 $2$ 次得到 $\\texttt{stocyhorzstocyhorz}$。\n\n答案集合 $P=\\{(3,4,5),(3,4,14),(3,13,14),(12,13,14) \\}$，因此 $\\vert P\\vert=4$。\n\n---\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$0<k\\le10^{18}$，$0 < \\vert S \\vert \\le 5 \\times 10^3$，$0 < \\vert T \\vert \\le 10$，字符串 $S,T$ 均由小写英文字母组成。\n\n| $\\text{Point}$ | $k\\le$ | $\\vert S\\vert\\le$ | $\\vert T\\vert\\le$ |\n| :-: | :-: | :-: | :-: |\n| $1\\sim2$        | $10^{18}$ | $5 \\times 10^3$     | $1$                 |\n| $3$          | $1$       | $5 \\times 10^3$     | $2$                 |\n| $4\\sim5$        | $100$     | $5 \\times 10 ^3$    | $2$                 |\n| $6\\sim7$        | $1$       | $50$                | $4$                 |\n| $8\\sim10$     | $10$      | $5 \\times 10^3$     | $10$                |\n| $11\\sim20$ | $10^{18}$ | $5 \\times 10^3$     | $10$                |", "locale": "zh-CN"}}}
{"pid": "P11031", "type": "P", "difficulty": 5, "samples": [["2\n3 3\n1 2\n2 3\n1 3\n3 2\n1 2\n2 3", "Yes\nNo"], ["1\n4 5\n1 2\n2 3\n3 4\n4 1\n1 3", "Yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "『DABOI Round 1』Completely Unrelated", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/wpqb8n7w.png)", "description": "我们知道，在平面几何中，三角形是稳定的图形。\n\n小 L 在纸上画了一个图形，他告诉你了这个图形的点数以及哪两个点之间有连边。他想知道这个图形是否具有稳定性。\n\n我们称一个图形具有稳定性当且仅当：确定任意一条边，使其固定住不能移动，则其它的所有边、点都不能移动。注意这里移动仅限在平面内，即不能作轴对称变换。特殊的，一个点具有稳定性。\n\n例如，一条线段或一个三角形，都具有稳定性的，而四边形则不具有稳定性。\n\n请注意，你可以认为稳定性跟边的长度并没有什么关系。所以只要有一组边长使得这个图形稳定，它就是稳定的。而如果没有这样的一组边长满足条件，它就是不稳定的。", "inputFormat": "输入共若干行。\n\n第 $1$ 行 $1$ 个正整数，表示数据组数 $T$。\n\n接下来，对于每组数据，输入共 $m+1$ 行：\n\n- 第 $1$ 行 $2$ 个整数，表示顶点的数量 $n$ 和边的数量 $m$；\n- 第 $2$ 至 $m+1$ 行，每行 $2$ 个整数，分别表示一条边连接的两个顶点的编号。", "outputFormat": "输出共 $T$ 行。\n\n对于每组数据，输出共 $1$ 行 $1$ 个字符串，其中 $\\tt Yes$ 表示图形具有稳定性，反之 $\\tt No$ 表示图形不具有稳定性。特别的，若给出的信息无法构成图形，则输出 $\\tt No$。", "hint": "**【数据范围】**\n\n- 对于 $50\\%$ 的数据，$n\\le50$，$m\\le2\\times10^3$；\n- 对于 $100\\%$ 的数据，$1\\le T\\le10$，$1\\le n\\le2\\times10^2$，$0\\le m\\le2\\times10^4$。保证无自环，但可能出现重边。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『DABOI Round 1』Completely Unrelated", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/wpqb8n7w.png)", "description": "我们知道，在平面几何中，三角形是稳定的图形。\n\n小 L 在纸上画了一个图形，他告诉你了这个图形的点数以及哪两个点之间有连边。他想知道这个图形是否具有稳定性。\n\n我们称一个图形具有稳定性当且仅当：确定任意一条边，使其固定住不能移动，则其它的所有边、点都不能移动。注意这里移动仅限在平面内，即不能作轴对称变换。特殊的，一个点具有稳定性。\n\n例如，一条线段或一个三角形，都具有稳定性的，而四边形则不具有稳定性。\n\n请注意，你可以认为稳定性跟边的长度并没有什么关系。所以只要有一组边长使得这个图形稳定，它就是稳定的。而如果没有这样的一组边长满足条件，它就是不稳定的。", "inputFormat": "输入共若干行。\n\n第 $1$ 行 $1$ 个正整数，表示数据组数 $T$。\n\n接下来，对于每组数据，输入共 $m+1$ 行：\n\n- 第 $1$ 行 $2$ 个整数，表示顶点的数量 $n$ 和边的数量 $m$；\n- 第 $2$ 至 $m+1$ 行，每行 $2$ 个整数，分别表示一条边连接的两个顶点的编号。", "outputFormat": "输出共 $T$ 行。\n\n对于每组数据，输出共 $1$ 行 $1$ 个字符串，其中 $\\tt Yes$ 表示图形具有稳定性，反之 $\\tt No$ 表示图形不具有稳定性。特别的，若给出的信息无法构成图形，则输出 $\\tt No$。", "hint": "**【数据范围】**\n\n- 对于 $50\\%$ 的数据，$n\\le50$，$m\\le2\\times10^3$；\n- 对于 $100\\%$ 的数据，$1\\le T\\le10$，$1\\le n\\le2\\times10^2$，$0\\le m\\le2\\times10^4$。保证无自环，但可能出现重边。", "locale": "zh-CN"}}}
{"pid": "P11032", "type": "P", "difficulty": 4, "samples": [["6 1\n1 3\n1 5\n1 6\n2 5\n3 4\n998244353 998244353 998244353 998244353 998244353 998244353", "9 0 1 0 1 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "树形 DP"], "title": "『DABOI Round 1』Develop a Tree", "background": "小 Z 看不惯树，所以他总想在树上随机添加一些边。他认为二分图是很和谐的，所以他想知道将一棵树变为二分图的方案数。你能否回答他的询问？", "description": "对于一颗无向有根树，定义 $f(i,k)$ 表示在以 $i$ 为根的子树中，在其内部连 $k$ 条边，使得这颗子树变为一个二分图的方案数。请注意，加边时允许与原树边重边，但任意两条新加的边都不能重合。\n\n给定一棵 $n$ 个点的无向有根树，根节点为 $1$ 号点。对于每个 $i\\in [1,n]$，求 $f(i,k)$ 对 $p_i$ 取模的值。", "inputFormat": "输入共 $n+1$ 行。\n\n第 $1$ 行 $2$ 个整数，分别表示树的点数 $n$ 和参数 $k$。\n\n接下来，第 $2$ 至 $n$ 行，每行 $2$ 个正整数，分别表示一条边连接的两个点的编号 $u_i$ 与 $v_i$。\n\n第 $n+1$ 行 $n$ 个整数，分别表示每次询问时的模数 $p_i$。", "outputFormat": "输出共 $1$ 行 $n$ 个整数，分别表示每次询问的答案。", "hint": "**【样例 1 解释】**\n\n在这棵树上，连接 $(u,v)\\in\\{(1,3),(1,5),(1,6),(2,3),(2,5),(2,6),(3,4),(4,5),(4,6)\\}$ 即可使树变为二分图。\n\n---\n\n**【数据范围】**\n\n**本题开启捆绑测试**。\n\n对于 $100\\%$ 的数据，$1\\le n\\le5\\times10^5$，$1\\le k\\le 20$，$1\\le u_i,v_i\\le n$，$2\\le p_i\\le2\\times10^9$，$p_i$ 为素数。最多有 $99$ 个大小不同的 $p_i$。保证 $p_i>k$。\n\n| $\\text{Subtask}$ | $n\\le$ | $\\text{Special}$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5\\times10^5$ | $\\text{A}$ | $10$ |\n| $2$ | $10^3$ | $\\text{No}$ | $15$ |\n| $3$ | $5\\times10^5$ | $\\text{B}$ | $15$ |\n| $4$ | $5\\times10^5$ | $\\text{No}$ | $60$ |\n\n- $\\text{Special A}$：保证 $k=1$；\n- $\\text{Special B}$：保证 $v_i=u_i+1$。\n\n---\n\n**【提示】**\n\n本题 IO 量较大，请使用较快速的 IO 方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『DABOI Round 1』Develop a Tree", "background": "小 Z 看不惯树，所以他总想在树上随机添加一些边。他认为二分图是很和谐的，所以他想知道将一棵树变为二分图的方案数。你能否回答他的询问？", "description": "对于一颗无向有根树，定义 $f(i,k)$ 表示在以 $i$ 为根的子树中，在其内部连 $k$ 条边，使得这颗子树变为一个二分图的方案数。请注意，加边时允许与原树边重边，但任意两条新加的边都不能重合。\n\n给定一棵 $n$ 个点的无向有根树，根节点为 $1$ 号点。对于每个 $i\\in [1,n]$，求 $f(i,k)$ 对 $p_i$ 取模的值。", "inputFormat": "输入共 $n+1$ 行。\n\n第 $1$ 行 $2$ 个整数，分别表示树的点数 $n$ 和参数 $k$。\n\n接下来，第 $2$ 至 $n$ 行，每行 $2$ 个正整数，分别表示一条边连接的两个点的编号 $u_i$ 与 $v_i$。\n\n第 $n+1$ 行 $n$ 个整数，分别表示每次询问时的模数 $p_i$。", "outputFormat": "输出共 $1$ 行 $n$ 个整数，分别表示每次询问的答案。", "hint": "**【样例 1 解释】**\n\n在这棵树上，连接 $(u,v)\\in\\{(1,3),(1,5),(1,6),(2,3),(2,5),(2,6),(3,4),(4,5),(4,6)\\}$ 即可使树变为二分图。\n\n---\n\n**【数据范围】**\n\n**本题开启捆绑测试**。\n\n对于 $100\\%$ 的数据，$1\\le n\\le5\\times10^5$，$1\\le k\\le 20$，$1\\le u_i,v_i\\le n$，$2\\le p_i\\le2\\times10^9$，$p_i$ 为素数。最多有 $99$ 个大小不同的 $p_i$。保证 $p_i>k$。\n\n| $\\text{Subtask}$ | $n\\le$ | $\\text{Special}$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5\\times10^5$ | $\\text{A}$ | $10$ |\n| $2$ | $10^3$ | $\\text{No}$ | $15$ |\n| $3$ | $5\\times10^5$ | $\\text{B}$ | $15$ |\n| $4$ | $5\\times10^5$ | $\\text{No}$ | $60$ |\n\n- $\\text{Special A}$：保证 $k=1$；\n- $\\text{Special B}$：保证 $v_i=u_i+1$。\n\n---\n\n**【提示】**\n\n本题 IO 量较大，请使用较快速的 IO 方式。", "locale": "zh-CN"}}}
{"pid": "P11033", "type": "P", "difficulty": 1, "samples": [["1 1 0 1 1\n1 1 0 1 1\n0 0 0 0 0\n1 1 0 1 1\n1 1 0 1 1", "No"], ["1 1 1 1 0\n1 1 1 0 1\n1 1 0 1 1\n1 0 1 1 1\n0 1 1 1 1", "No"], ["1 1 1 1 1\n0 1 0 1 1\n1 0 1 0 1\n0 1 0 1 1\n1 0 1 0 1", "Yes"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "O2优化", "梦熊比赛"], "title": "【MX-X3-T0】「RiOI-4」宾果游戏", "background": "原题链接：<https://oier.team/problems/X3A>。\n\n---\n\n第**五**市。第**五**音。\n\n在一个似乎处处都是「**五**」的世界。\n\n如果，能再次将时序绚乱的**五**人连成**一线**的话——\n\n那就会是将自己带出黑暗的**一线**阳光吧。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wi8fqmqx.png)\n\n（图片来自[妄想症：Deliver Me](https://store.steampowered.com/app/779640/Deliver_Me/)，侵删。）", "description": "有一个 $5$ 行 $5$ 列的棋盘，棋盘上的 $25$ 个格子可能有棋子也可能没有。\n\n有如下图左侧所示的 $12$ 条线，我们称一个棋盘是**宾果的**当且仅当**至少**有一条线上的每个格子都有棋子。试判断给定的棋盘是否是宾果的。下图右侧给出了一些示例。（深色表示有棋子，浅色表示没有）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/no9qur52.png)\n\n你可以前往[这个链接](https://www.desmos.com/calculator/zq45krhafo?lang=zh-CN)来自己测试不同的情况。", "inputFormat": "共 $5$ 行，每行 $5$ 个数，如果第 $i$ 行第 $j$ 列有棋子，则第 $i$ 行第 $j$ 个数为 $1$，否则第 $i$ 行第 $j$ 个数为 $0$。", "outputFormat": "如果有至少一条线上有 $5$ 个棋子，输出 `Yes`，否则输出 `No`。", "hint": "**【样例解释 #1】**\n\n这个样例给出的棋盘是图中左上角的棋盘，它不是宾果的。\n\n**【样例解释 #3】**\n\n这个样例给出的棋盘是图中左下角的棋盘，它是宾果的。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，保证输入的数都是 $0$ 或 $1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T0】「RiOI-4」宾果游戏", "background": "原题链接：<https://oier.team/problems/X3A>。\n\n---\n\n第**五**市。第**五**音。\n\n在一个似乎处处都是「**五**」的世界。\n\n如果，能再次将时序绚乱的**五**人连成**一线**的话——\n\n那就会是将自己带出黑暗的**一线**阳光吧。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wi8fqmqx.png)\n\n（图片来自[妄想症：Deliver Me](https://store.steampowered.com/app/779640/Deliver_Me/)，侵删。）", "description": "有一个 $5$ 行 $5$ 列的棋盘，棋盘上的 $25$ 个格子可能有棋子也可能没有。\n\n有如下图左侧所示的 $12$ 条线，我们称一个棋盘是**宾果的**当且仅当**至少**有一条线上的每个格子都有棋子。试判断给定的棋盘是否是宾果的。下图右侧给出了一些示例。（深色表示有棋子，浅色表示没有）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/no9qur52.png)\n\n你可以前往[这个链接](https://www.desmos.com/calculator/zq45krhafo?lang=zh-CN)来自己测试不同的情况。", "inputFormat": "共 $5$ 行，每行 $5$ 个数，如果第 $i$ 行第 $j$ 列有棋子，则第 $i$ 行第 $j$ 个数为 $1$，否则第 $i$ 行第 $j$ 个数为 $0$。", "outputFormat": "如果有至少一条线上有 $5$ 个棋子，输出 `Yes`，否则输出 `No`。", "hint": "**【样例解释 #1】**\n\n这个样例给出的棋盘是图中左上角的棋盘，它不是宾果的。\n\n**【样例解释 #3】**\n\n这个样例给出的棋盘是图中左下角的棋盘，它是宾果的。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，保证输入的数都是 $0$ 或 $1$。", "locale": "zh-CN"}}}
{"pid": "P11034", "type": "P", "difficulty": 1, "samples": [["RiOI\nKDOI", "RiOI for sure!"], ["RiOIroundfour\nRiOIroundnegtiveone", "Either is ok!"], ["majsoul\ndigdigio", "Try again!"], ["GoInForNOI\nGoInForIOI", "GoInForIOI for sure!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "O2优化", "梦熊比赛"], "title": "【MX-X3-T1】「RiOI-4」What beats RiOI", "background": "原题链接：<https://oier.team/problems/X3B>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tb8chlhk.png)\n\n但是众所周知 RiOI 是从 KDOI 里面裂出来的，所以这个只是整活……（小声）  \nKDOI 对不起喵！", "description": "定义一个字符串是**好闪**的，当且仅当这个字符串包含子串 `RiOI`（大小写均可，例如含有 `rioi`，`RIOI`，`rIoI` 均算作含有）。\n\n给定两个只包含大小写英文字母的非空字符串 $s,t$：\n\n- 如果两个字符串都是好闪的，那么输出 `Either is ok!`。\n- 否则，如果 $s$ 是好闪的，输出 $s$ `for sure!`。\n- 否则，如果 $t$ 是好闪的，输出 $t$ `for sure!`。\n- 如果两个字符串都不是好闪的，请输出 `Try again!`。", "inputFormat": "两行各一个只包含大小写英文字母的非空字符串，分别表示 $s,t$。", "outputFormat": "一行一个字符串，表示你的答案。", "hint": "**【样例解释 #1】**\n\n`RiOI` 含有 `RiOI` 子串，而 `KDOI` 不含，所以输出 `RiOI for sure!`。\n\n**【样例解释 #2】**\n\n`RiOIroundfour` 和 `RiOIroundnegtiveone` 都含有 `RiOI` 子串，所以输出 `Either is ok!`。\n\n**【样例解释 #4】**\n\n`GoInForIOI` 含有 `rIOI` 子串，而 `GoInForNOI` 不含有，所以输出 `GoInForIOI for sure!`。\n\n**【数据范围】**\n\n对于 $50\\%$ 的数据，保证 $s,t$ 只包含小写英文字母。  \n对于 $100\\%$ 的数据，保证 $s,t$ 的长度都不超过 $1\\ 000$，且均为仅由大小写英文字母组成的非空字符串。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T1】「RiOI-4」What beats RiOI", "background": "原题链接：<https://oier.team/problems/X3B>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tb8chlhk.png)\n\n但是众所周知 RiOI 是从 KDOI 里面裂出来的，所以这个只是整活……（小声）  \nKDOI 对不起喵！", "description": "定义一个字符串是**好闪**的，当且仅当这个字符串包含子串 `RiOI`（大小写均可，例如含有 `rioi`，`RIOI`，`rIoI` 均算作含有）。\n\n给定两个只包含大小写英文字母的非空字符串 $s,t$：\n\n- 如果两个字符串都是好闪的，那么输出 `Either is ok!`。\n- 否则，如果 $s$ 是好闪的，输出 $s$ `for sure!`。\n- 否则，如果 $t$ 是好闪的，输出 $t$ `for sure!`。\n- 如果两个字符串都不是好闪的，请输出 `Try again!`。", "inputFormat": "两行各一个只包含大小写英文字母的非空字符串，分别表示 $s,t$。", "outputFormat": "一行一个字符串，表示你的答案。", "hint": "**【样例解释 #1】**\n\n`RiOI` 含有 `RiOI` 子串，而 `KDOI` 不含，所以输出 `RiOI for sure!`。\n\n**【样例解释 #2】**\n\n`RiOIroundfour` 和 `RiOIroundnegtiveone` 都含有 `RiOI` 子串，所以输出 `Either is ok!`。\n\n**【样例解释 #4】**\n\n`GoInForIOI` 含有 `rIOI` 子串，而 `GoInForNOI` 不含有，所以输出 `GoInForIOI for sure!`。\n\n**【数据范围】**\n\n对于 $50\\%$ 的数据，保证 $s,t$ 只包含小写英文字母。  \n对于 $100\\%$ 的数据，保证 $s,t$ 的长度都不超过 $1\\ 000$，且均为仅由大小写英文字母组成的非空字符串。", "locale": "zh-CN"}}}
{"pid": "P11035", "type": "P", "difficulty": 2, "samples": [["6 3\n1 1 -4 5 1 -4", "11"], ["7 4\n1 -9 -1 -9 8 -1 0", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "O2优化", "梦熊比赛"], "title": "【MX-X3-T2】「RiOI-4」消えた夏の夢", "background": "原题链接：<https://oier.team/problems/X3C>。\n\n---\n\n> いつまでも二人語り合おう\\\n終わった夏を\t\\\n探してた夢をそっと\\\n終わらせよう戻らないように\\\nお別れだね\\\n君へ届けと願った声が\\\n風になって心の隙間を\\\n通り抜けた\\\n——《消えた夏の夢》\n\n小 T 不会出题。", "description": "小 T 手中有一个数 $x$，初始时为 $p$。而小 ⊥ 手中有一个长为 $n$ 的序列 $a$。一次操作中，小 T 需要依次进行如下的修改：\n\n- 选中 $a$ 中的一个数 $a_i$。\n- 将 $x$ 加上 $a_i$。\n- 让 $a_i$ 变为自身的相反数，即 $-a_i$。\n\n小 T 想知道，在若干次操作（可以不进行操作，同一个位置可以选中多次）之后，小 T 手中的数 $x$ 最大是多少。", "inputFormat": "第一行两个整数 $n,p$。\n\n第二行 $n$ 个整数 $a_i$。", "outputFormat": "输出一行仅一个整数，表示 $x$ 最大是多少。", "hint": "**【样例解释 #1】**\n\n对于样例，你可以依次执行以下操作：\n\n- 选中 $a_5=1$，$x$ 变为 $3+1=4$，$a_5$ 变为 $-1$。\n- 选中 $a_1=1$，$x$ 变为 $4+1=5$，$a_1$ 变为 $-1$。\n- 选中 $a_3=-4$，$x$ 变为 $5-4=1$，$a_3$ 变为 $4$。\n- 选中 $a_4=5$，$x$ 变为 $1+5=6$，$a_4$ 变为 $-5$。\n- 选中 $a_2=1$，$x$ 变为 $6+1=7$，$a_2$ 变为 $-1$。\n- 选中 $a_3=4$，$x$ 变为 $7+4=11$，$a_3$ 变为 $-4$。\n\n可以证明 $x$ 的最大值为 $11$。注意，并不是只有样例中展示的方案可以达到这个最大值。\n\n**【数据范围】**\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim3$|$20$||\n|$4\\sim5$|$10^5$|$a_i<0$|\n|$6\\sim7$|$10^5$|$a_i\\ge0$|\n|$8\\sim10$|$10^5$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$|a_i|,|p|\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T2】「RiOI-4」消えた夏の夢", "background": "原题链接：<https://oier.team/problems/X3C>。\n\n---\n\n> いつまでも二人語り合おう\\\n終わった夏を\t\\\n探してた夢をそっと\\\n終わらせよう戻らないように\\\nお別れだね\\\n君へ届けと願った声が\\\n風になって心の隙間を\\\n通り抜けた\\\n——《消えた夏の夢》\n\n小 T 不会出题。", "description": "小 T 手中有一个数 $x$，初始时为 $p$。而小 ⊥ 手中有一个长为 $n$ 的序列 $a$。一次操作中，小 T 需要依次进行如下的修改：\n\n- 选中 $a$ 中的一个数 $a_i$。\n- 将 $x$ 加上 $a_i$。\n- 让 $a_i$ 变为自身的相反数，即 $-a_i$。\n\n小 T 想知道，在若干次操作（可以不进行操作，同一个位置可以选中多次）之后，小 T 手中的数 $x$ 最大是多少。", "inputFormat": "第一行两个整数 $n,p$。\n\n第二行 $n$ 个整数 $a_i$。", "outputFormat": "输出一行仅一个整数，表示 $x$ 最大是多少。", "hint": "**【样例解释 #1】**\n\n对于样例，你可以依次执行以下操作：\n\n- 选中 $a_5=1$，$x$ 变为 $3+1=4$，$a_5$ 变为 $-1$。\n- 选中 $a_1=1$，$x$ 变为 $4+1=5$，$a_1$ 变为 $-1$。\n- 选中 $a_3=-4$，$x$ 变为 $5-4=1$，$a_3$ 变为 $4$。\n- 选中 $a_4=5$，$x$ 变为 $1+5=6$，$a_4$ 变为 $-5$。\n- 选中 $a_2=1$，$x$ 变为 $6+1=7$，$a_2$ 变为 $-1$。\n- 选中 $a_3=4$，$x$ 变为 $7+4=11$，$a_3$ 变为 $-4$。\n\n可以证明 $x$ 的最大值为 $11$。注意，并不是只有样例中展示的方案可以达到这个最大值。\n\n**【数据范围】**\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim3$|$20$||\n|$4\\sim5$|$10^5$|$a_i<0$|\n|$6\\sim7$|$10^5$|$a_i\\ge0$|\n|$8\\sim10$|$10^5$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$|a_i|,|p|\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11036", "type": "P", "difficulty": 4, "samples": [["4\n1\n2\n3\n20120712", "7 9 2\n9 6 8\n5 9 2\n8065343 8750 6446"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "Special Judge", "O2优化", "构造", "Ad-hoc", "梦熊比赛"], "title": "【MX-X3-T3】「RiOI-4」GCD 与 LCM 问题", "background": "原题链接：<https://oier.team/problems/X3D>。\n\n---\n\n「既然你说你不了解她，为什么又可以断言她一定是因为……」\n\n是呀，自己对零羽还了解的确实不够多……泠珞这样想着。\n\n在残缺的记忆当中，她只能想起，她和零羽的最大公约数，就是「音乐」。\n\n还缺了什么呢？泠珞不知道。她只知道，那所缺失的，和「音乐」加起来，就是她的一切。一切的总和。\n\n**滴答，滴答**。叮咚，叮咚。如果把长短不一、断断续续的钢琴声拼接在一起，能够回忆起什么吗。", "description": "给定一个正整数 $a$，请你构造三个正整数 $b,c,d$ 使得 $a+b+c+d=\\gcd(a,b)+\\operatorname{lcm}(c,d)$。一个测试点内有多组数据。\n\n由于出题人想把自己 QQ 号写题目里，你需要保证 $b,c,d\\le 1\\,634\\,826\\,193$。\n\n**如有多种可能的答案，输出任意一个均可。**", "inputFormat": "**第一行一个正整数 $t$ 表示数据组数。**\n\n接下来 $t$ 行每行一个正整数 $a$。", "outputFormat": "输出 $t$ 行，每行三个正整数 $b,c,d$。\n\n**如有多种可能的答案，输出任意一个均可。**", "hint": "**【样例解释】**\n\n样例的构造为：\n\n$1+7+9+2=19=\\gcd(1,7)+\\operatorname{lcm}(9,2)$  \n$2+9+6+8=25=\\gcd(2,9)+\\operatorname{lcm}(6,8)$  \n$3+5+9+2=19=\\gcd(3,5)+\\operatorname{lcm}(9,2)$  \n$20\\,120\\,712+8\\,065\\,343+8\\,750+6\\,446=28\\,201\\,251=\\gcd(20\\,120\\,712,8\\,065\\,343)+\\operatorname{lcm}(8\\,750,6\\,446)$\n\n容易验证均满足要求。\n\n**【数据范围】**\n\n|测试点|分数|$t\\le$|$a\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$2$|$10$|$10$||\n|$2$|$5$|$50$|$50$||\n|$3$|$17$|$10^6$|$5\\times10^8$||\n|$4$|$29$|$10^6$|$10^9-1$|$a$ 为奇数|\n|$5$|$47$|$2\\times10^6$|$10^9$||\n\n对于 $100\\%$ 的数据，$1\\le t\\le2\\times10^6$，$1\\le a\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T3】「RiOI-4」GCD 与 LCM 问题", "background": "原题链接：<https://oier.team/problems/X3D>。\n\n---\n\n「既然你说你不了解她，为什么又可以断言她一定是因为……」\n\n是呀，自己对零羽还了解的确实不够多……泠珞这样想着。\n\n在残缺的记忆当中，她只能想起，她和零羽的最大公约数，就是「音乐」。\n\n还缺了什么呢？泠珞不知道。她只知道，那所缺失的，和「音乐」加起来，就是她的一切。一切的总和。\n\n**滴答，滴答**。叮咚，叮咚。如果把长短不一、断断续续的钢琴声拼接在一起，能够回忆起什么吗。", "description": "给定一个正整数 $a$，请你构造三个正整数 $b,c,d$ 使得 $a+b+c+d=\\gcd(a,b)+\\operatorname{lcm}(c,d)$。一个测试点内有多组数据。\n\n由于出题人想把自己 QQ 号写题目里，你需要保证 $b,c,d\\le 1\\,634\\,826\\,193$。\n\n**如有多种可能的答案，输出任意一个均可。**", "inputFormat": "**第一行一个正整数 $t$ 表示数据组数。**\n\n接下来 $t$ 行每行一个正整数 $a$。", "outputFormat": "输出 $t$ 行，每行三个正整数 $b,c,d$。\n\n**如有多种可能的答案，输出任意一个均可。**", "hint": "**【样例解释】**\n\n样例的构造为：\n\n$1+7+9+2=19=\\gcd(1,7)+\\operatorname{lcm}(9,2)$  \n$2+9+6+8=25=\\gcd(2,9)+\\operatorname{lcm}(6,8)$  \n$3+5+9+2=19=\\gcd(3,5)+\\operatorname{lcm}(9,2)$  \n$20\\,120\\,712+8\\,065\\,343+8\\,750+6\\,446=28\\,201\\,251=\\gcd(20\\,120\\,712,8\\,065\\,343)+\\operatorname{lcm}(8\\,750,6\\,446)$\n\n容易验证均满足要求。\n\n**【数据范围】**\n\n|测试点|分数|$t\\le$|$a\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$2$|$10$|$10$||\n|$2$|$5$|$50$|$50$||\n|$3$|$17$|$10^6$|$5\\times10^8$||\n|$4$|$29$|$10^6$|$10^9-1$|$a$ 为奇数|\n|$5$|$47$|$2\\times10^6$|$10^9$||\n\n对于 $100\\%$ 的数据，$1\\le t\\le2\\times10^6$，$1\\le a\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11037", "type": "P", "difficulty": 5, "samples": [["3 3\n1 3\n2 3\n3 5\n6\n9\n11", "665496236\n0\n554580197"], ["4 3\n1 4\n11 12\n3 9\n6 10\n21\n29\n26", "811073551\n811073543\n748683272"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "O2优化", "梦熊比赛"], "title": "【MX-X3-T4】「RiOI-4」上课", "background": "原题链接：<https://oier.team/problems/X3E>。\n\n---\n\n一天，小 M 在宿舍 $6:53$ 起床，而早自习 $7:00$ 开始。", "description": "给定正整数 $n,q$ 和 $n$ 个区间 $[l_i,r_i]$。\n\n有 $q$ 组询问，每次询问给定一个整数 $x$。在每个区间内选择一个整数 $a_i$（$l_i\\leq a_i\\leq r_i$），使得所选整数的总和等于 $x$，并使得选出的 $a$ 序列的方差最小。输出方差最小值，对 $998\\,244\\,353$ 取模。保证存在至少一种合法的选取方案。\n\n关于方差的有关定义参照此[云剪切板](https://www.luogu.com.cn/paste/dpptrubn)，有理数取模参照[【模板】有理数取余](https://www.luogu.com.cn/problem/P2613)。\n", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来的 $n$ 行，每行两个自然数 $l_i,r_i$。\n\n最后 $q$ 行，每行一个整数 $x$，表示一次询问。保证存在至少一种合法的选取方案。", "outputFormat": "$q$ 行，每行一个整数，表示最小方差对 $998\\,244\\,353$ 取模的值。", "hint": "**【样例解释 #1】**\n\n询问一方差最小的选择方案为 ${1,2,3}$，最小方差为 $\\frac{2}{3}$，有 $665\\,496\\,236\\times3\\equiv 2\\pmod{998\\,244\\,353}$，故输出 $665\\,496\\,236$。\n\n询问二方差最小的选择方案为 ${3,3,3}$，最小方差为 $0$，有 $0\\times1\\equiv 0\\pmod {998\\,244\\,353}$，故输出 $0$。\n\n询问三方差最小的选择方案为 ${3,3,5}$，最小方差为 $\\frac{8}{9}$，有 $554\\,580\\,197\\times9\\equiv 8\\pmod{998\\,244\\,353}$，故输出 $554\\,580\\,197$。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n$|$q$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$9$|$\\le5$|$\\le5$|$r_i\\le5$|\n|$2$|$13$|$\\le2\\times10^3$|$\\le2\\times10^3$|$r_i\\le2\\times10^3$|\n|$3$|$16$|$\\le10^6$|$=1$||\n|$4$|$25$|$\\le10^5$|$\\le10^5$|$r_i\\le10^5$|\n|$5$|$37$|$\\le10^6$|$\\le10^6$||\n\n对于所有数据，满足 $1\\leq n,q\\leq 10^6$，$0\\leq l_i\\leq r_i\\leq 10^{6}$，对于每个 $x$ 保证存在一种合法的方案。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T4】「RiOI-4」上课", "background": "原题链接：<https://oier.team/problems/X3E>。\n\n---\n\n一天，小 M 在宿舍 $6:53$ 起床，而早自习 $7:00$ 开始。", "description": "给定正整数 $n,q$ 和 $n$ 个区间 $[l_i,r_i]$。\n\n有 $q$ 组询问，每次询问给定一个整数 $x$。在每个区间内选择一个整数 $a_i$（$l_i\\leq a_i\\leq r_i$），使得所选整数的总和等于 $x$，并使得选出的 $a$ 序列的方差最小。输出方差最小值，对 $998\\,244\\,353$ 取模。保证存在至少一种合法的选取方案。\n\n关于方差的有关定义参照此[云剪切板](https://www.luogu.com.cn/paste/dpptrubn)，有理数取模参照[【模板】有理数取余](https://www.luogu.com.cn/problem/P2613)。\n", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来的 $n$ 行，每行两个自然数 $l_i,r_i$。\n\n最后 $q$ 行，每行一个整数 $x$，表示一次询问。保证存在至少一种合法的选取方案。", "outputFormat": "$q$ 行，每行一个整数，表示最小方差对 $998\\,244\\,353$ 取模的值。", "hint": "**【样例解释 #1】**\n\n询问一方差最小的选择方案为 ${1,2,3}$，最小方差为 $\\frac{2}{3}$，有 $665\\,496\\,236\\times3\\equiv 2\\pmod{998\\,244\\,353}$，故输出 $665\\,496\\,236$。\n\n询问二方差最小的选择方案为 ${3,3,3}$，最小方差为 $0$，有 $0\\times1\\equiv 0\\pmod {998\\,244\\,353}$，故输出 $0$。\n\n询问三方差最小的选择方案为 ${3,3,5}$，最小方差为 $\\frac{8}{9}$，有 $554\\,580\\,197\\times9\\equiv 8\\pmod{998\\,244\\,353}$，故输出 $554\\,580\\,197$。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n$|$q$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$9$|$\\le5$|$\\le5$|$r_i\\le5$|\n|$2$|$13$|$\\le2\\times10^3$|$\\le2\\times10^3$|$r_i\\le2\\times10^3$|\n|$3$|$16$|$\\le10^6$|$=1$||\n|$4$|$25$|$\\le10^5$|$\\le10^5$|$r_i\\le10^5$|\n|$5$|$37$|$\\le10^6$|$\\le10^6$||\n\n对于所有数据，满足 $1\\leq n,q\\leq 10^6$，$0\\leq l_i\\leq r_i\\leq 10^{6}$，对于每个 $x$ 保证存在一种合法的方案。", "locale": "zh-CN"}}}
{"pid": "P11038", "type": "P", "difficulty": 6, "samples": [["5\n1 2 1\n1 3 1\n2 4 1\n2 5 1\n", "2 1 0 0 0"], ["24\n15 4 25\n5 11 8\n23 13 14\n15 6 12\n21 14 22\n21 12 5\n1 9 30\n6 19 20\n18 7 4\n4 5 16\n9 23 5\n6 22 9\n12 20 23\n2 24 18\n6 2 5\n16 21 9\n14 18 9\n14 8 5\n23 17 18\n1 16 22\n15 3 26\n1 10 3\n10 15 9", "66 28 20 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "], ["10\n4 8 407414868\n3 9 875245582\n10 3 548046335\n2 8 163333320\n7 5 320544242\n5 3 504767824\n6 7 431834202\n9 4 639504669\n9 1 968451452\n", "3100843302 639504669 0 0 0 0 0 0 0 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "树形 DP", "虚树", "梦熊比赛"], "title": "【MX-X3-T5】「RiOI-4」Countless J-Light Decomposition", "background": "原题链接：<https://oier.team/problems/X3F>。\n\n---\n\n「如果，如果，如果真的可以是那样的话，就好了啊。」\n\n回想起自己做出的一个个选择，泠珞有时会想，自己是否有过更好的机会。\n\n但是既然一切已经如此了，除了前进，别无他法。\n\n无论结果是如何，接受结果，习得教训，然后……去争取更美好的未来。\n\n那么，现在应该做的就是，尽可能避免，之后会走到的最坏结果了吧。\n\n「规避风险。脚踏实地。做最可能实现的选择。」\n\n「一定是的。」", "description": "给定一棵有根**带权**树，结点以 $1\\sim n$ 编号。根结点编号为 $1$，边权均为正整数。\n\n定义这棵树的**剖分**为对于每个结点，选择一些儿子（可以都选或都不选）为**重儿子**的方案。重儿子和其父亲的边称为**重边**。不是重边的边称为**轻边**。\n\n定义一个剖分是 $\\textbf{\\textit{i--}}$**重的**，当且仅当对于每个结点，其重儿子数量不超过 $i$。\n\n定义一个剖分是 $\\textbf{\\textit{j--}}$**轻的**，当且仅当对于每条从根（编号为 $1$ 的结点）出发的简单路径，其经过的轻边的边权和不超过 $j$。\n\n对于 $i=0,1,\\cdots,n-1$，请求出最小的 $j$，使得存在一个 $\\textit{i--}$重的剖分是 $\\textit{j--}$轻的。", "inputFormat": "第一行一个正整数 $n$，表示树的大小。\n\n接下来 $n-1$ 行，每行三个正整数 $u_i,v_i,w_i$，表示编号为 $u_i,v_i$ 的结点间有一条边权为 $w_i$ 的边。", "outputFormat": "一行 $n$ 个整数，表示 $i=0,1,2,\\cdots,n-1$ 时的答案。", "hint": "**【样例解释 #1】**\n\n对于样例 1，其中的树如下所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tox3t3d4.png)\n\n当 $i=0$ 时，只存在一种剖分，不存在任何重儿子或重边。一条从根出发经过轻边边权和最大的简单路径为 $1\\textit{---}2\\textit{---}4$，边权和为 $2$。\n\n当 $i=1$ 时，可以采用如图所示的剖分，加粗结点（根除外）为重儿子。一条从根出发经过轻边边权和最大的简单路径为 $1\\textit{---}2\\textit{---}5$，经过轻边的边权和为 $1$。\n\n当 $i\\ge 2$ 时，可以令所有的非根结点为重儿子，因此任何从根出发经过最多轻边的简单路径只能经过 $0$ 条轻边，故轻边最大边权和为 $0$。\n\n**【样例解释 #2】**\n\n当 $i\\ge 3$ 时，可以令所有的非根结点为重儿子，因此任何从根出发经过最多轻边的简单路径只能经过 $0$ 条轻边，故轻边最大边权和为 $0$。\n\n当 $i=0,1,2$ 时，我有一个很简洁的解释，但是这里空白太小写不下。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$10$|$10^3$||\n|$2$|$18$|$4\\times10^4$||\n|$3$|$16$|$10^5$|$w_i\\le100$|\n|$4$|$21$|$10^5$|$w_i\\le10^5$|\n|$5$|$35$|$2\\times10^5$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le2\\times10^5$，$1\\le w_i\\le 10^9$，保证输入是一棵树。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T5】「RiOI-4」Countless J-Light Decomposition", "background": "原题链接：<https://oier.team/problems/X3F>。\n\n---\n\n「如果，如果，如果真的可以是那样的话，就好了啊。」\n\n回想起自己做出的一个个选择，泠珞有时会想，自己是否有过更好的机会。\n\n但是既然一切已经如此了，除了前进，别无他法。\n\n无论结果是如何，接受结果，习得教训，然后……去争取更美好的未来。\n\n那么，现在应该做的就是，尽可能避免，之后会走到的最坏结果了吧。\n\n「规避风险。脚踏实地。做最可能实现的选择。」\n\n「一定是的。」", "description": "给定一棵有根**带权**树，结点以 $1\\sim n$ 编号。根结点编号为 $1$，边权均为正整数。\n\n定义这棵树的**剖分**为对于每个结点，选择一些儿子（可以都选或都不选）为**重儿子**的方案。重儿子和其父亲的边称为**重边**。不是重边的边称为**轻边**。\n\n定义一个剖分是 $\\textbf{\\textit{i--}}$**重的**，当且仅当对于每个结点，其重儿子数量不超过 $i$。\n\n定义一个剖分是 $\\textbf{\\textit{j--}}$**轻的**，当且仅当对于每条从根（编号为 $1$ 的结点）出发的简单路径，其经过的轻边的边权和不超过 $j$。\n\n对于 $i=0,1,\\cdots,n-1$，请求出最小的 $j$，使得存在一个 $\\textit{i--}$重的剖分是 $\\textit{j--}$轻的。", "inputFormat": "第一行一个正整数 $n$，表示树的大小。\n\n接下来 $n-1$ 行，每行三个正整数 $u_i,v_i,w_i$，表示编号为 $u_i,v_i$ 的结点间有一条边权为 $w_i$ 的边。", "outputFormat": "一行 $n$ 个整数，表示 $i=0,1,2,\\cdots,n-1$ 时的答案。", "hint": "**【样例解释 #1】**\n\n对于样例 1，其中的树如下所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tox3t3d4.png)\n\n当 $i=0$ 时，只存在一种剖分，不存在任何重儿子或重边。一条从根出发经过轻边边权和最大的简单路径为 $1\\textit{---}2\\textit{---}4$，边权和为 $2$。\n\n当 $i=1$ 时，可以采用如图所示的剖分，加粗结点（根除外）为重儿子。一条从根出发经过轻边边权和最大的简单路径为 $1\\textit{---}2\\textit{---}5$，经过轻边的边权和为 $1$。\n\n当 $i\\ge 2$ 时，可以令所有的非根结点为重儿子，因此任何从根出发经过最多轻边的简单路径只能经过 $0$ 条轻边，故轻边最大边权和为 $0$。\n\n**【样例解释 #2】**\n\n当 $i\\ge 3$ 时，可以令所有的非根结点为重儿子，因此任何从根出发经过最多轻边的简单路径只能经过 $0$ 条轻边，故轻边最大边权和为 $0$。\n\n当 $i=0,1,2$ 时，我有一个很简洁的解释，但是这里空白太小写不下。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$10$|$10^3$||\n|$2$|$18$|$4\\times10^4$||\n|$3$|$16$|$10^5$|$w_i\\le100$|\n|$4$|$21$|$10^5$|$w_i\\le10^5$|\n|$5$|$35$|$2\\times10^5$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le2\\times10^5$，$1\\le w_i\\le 10^9$，保证输入是一棵树。", "locale": "zh-CN"}}}
{"pid": "P11039", "type": "P", "difficulty": 6, "samples": [["5 3\n1 1 2 2\n3 4 5\n", "1"], ["5 3\n1 1 2 2\n2 3 4", "8"], ["20 10\n20 8 7 16 3 15 1 10 17 3 13 15 1 17 1 14 14 8 4\n3 7 10 19 15 13 4 6 18 5", "553508927"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "虚树", "组合数学", "Prüfer 序列", "梦熊比赛"], "title": "【MX-X3-T6】「RiOI-4」TECHNOPOLIS 2085", "background": "原题链接：<https://oier.team/problems/X3G>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/931ql7zi.png)\n\n（图片来自 phigros 曲绘，侵删。）\n\n啊～啊～啊咦～啊咦～哦→啊↑啊↓啊～嗯～哎哎↑哎哦哎嗯～哦啊~爱↖爱↑爱↗爱↑爱↑啊～啊～啊咦～啊咦～啊→啊↑啊↓啊～嗯嗯↓嗯↓滴嘚滴嘚唔↑～～嘟←嘟↖️嘟↑嘟↗️嘟→嘟↘️嘟↓\n\n你说得对，但是这里是梦熊周赛题，不是出题人用来发电的地方，所以你需要做一道图论题。", "description": "约定 $\\operatorname{lca}_G(u,v)$ 表示编号为 $u,v$ 的结点在有标号有根树 $G$ 上的最近共同祖先。给定一棵根编号为 $1$，大小为 $n$ ，结点编号为 $1\\sim n$ 的有根树 $T$ 与一个大小为 $m$ 的点集 $S$。你需要求出有多少个**不同的**大小为 $n$ 的结点编号为 $1\\sim n$ 的有根树 $T'$，满足对于任意 $u,v\\in S$，有 $\\operatorname{lca}_T(u,v)=\\operatorname{lca}_{T'}(u,v)$。\n\n答案对 $998\\,244\\,353$ 取模。\n\n我们称两颗大小为 $n$ 的有标号有根树是**不同的**，当且仅当以下二者至少一个成立：\n\n- 它们的根节点不同。\n- 存在一条边，在一棵树中未出现，而在另一棵树中出现。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行 $n-1$ 个正整数 $p_2,p_3,\\cdots,p_n$ 表示编号为 $2\\sim n$ 的结点的父亲编号。\n\n最后一行 $m$ 个正整数，表示选出的集合 $S$ 中结点的编号。", "outputFormat": "一行一个整数，表示答案对 $998\\,244\\,353$ 取模的值。", "hint": "**【样例解释 #1】**\n\n只有与 $T$ 完全相同的树满足要求。\n\n**【样例解释 #2】**\n\n对于样例 2，满足要求的树的所有 $8$ 种 $p$ 数组如下（根的 $p_i$ 为 $0$）：\n\n$\\{0,1,1,2,1\\},\\{0,1,1,2,2\\},\\{0,1,1,2,3\\},\\{0,1,1,2,4\\},$  \n$\\{0,1,1,5,2\\},\\{0,5,1,2,1\\},\\{0,1,5,2,1\\},\\{5,1,1,2,0\\}$。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$m\\le$|\n|:-:|:-:|:-:|:-:|\n|$1$|$7$|$10$|$10$|\n|$2$|$18$|$200$|$200$|\n|$3$|$22$|$10^5$|$10^5$|\n|$4$|$17$|$10^6$|$10$|\n|$5$|$36$|$10^6$|$10^6$|\n\n对于 $100\\%$ 的数据，$2\\le m\\le n\\le 10^6$，保证输入的 $p$ 对应了一棵有标号有根树，$S$ 描述了一个结点组成的集合。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T6】「RiOI-4」TECHNOPOLIS 2085", "background": "原题链接：<https://oier.team/problems/X3G>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/931ql7zi.png)\n\n（图片来自 phigros 曲绘，侵删。）\n\n啊～啊～啊咦～啊咦～哦→啊↑啊↓啊～嗯～哎哎↑哎哦哎嗯～哦啊~爱↖爱↑爱↗爱↑爱↑啊～啊～啊咦～啊咦～啊→啊↑啊↓啊～嗯嗯↓嗯↓滴嘚滴嘚唔↑～～嘟←嘟↖️嘟↑嘟↗️嘟→嘟↘️嘟↓\n\n你说得对，但是这里是梦熊周赛题，不是出题人用来发电的地方，所以你需要做一道图论题。", "description": "约定 $\\operatorname{lca}_G(u,v)$ 表示编号为 $u,v$ 的结点在有标号有根树 $G$ 上的最近共同祖先。给定一棵根编号为 $1$，大小为 $n$ ，结点编号为 $1\\sim n$ 的有根树 $T$ 与一个大小为 $m$ 的点集 $S$。你需要求出有多少个**不同的**大小为 $n$ 的结点编号为 $1\\sim n$ 的有根树 $T'$，满足对于任意 $u,v\\in S$，有 $\\operatorname{lca}_T(u,v)=\\operatorname{lca}_{T'}(u,v)$。\n\n答案对 $998\\,244\\,353$ 取模。\n\n我们称两颗大小为 $n$ 的有标号有根树是**不同的**，当且仅当以下二者至少一个成立：\n\n- 它们的根节点不同。\n- 存在一条边，在一棵树中未出现，而在另一棵树中出现。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行 $n-1$ 个正整数 $p_2,p_3,\\cdots,p_n$ 表示编号为 $2\\sim n$ 的结点的父亲编号。\n\n最后一行 $m$ 个正整数，表示选出的集合 $S$ 中结点的编号。", "outputFormat": "一行一个整数，表示答案对 $998\\,244\\,353$ 取模的值。", "hint": "**【样例解释 #1】**\n\n只有与 $T$ 完全相同的树满足要求。\n\n**【样例解释 #2】**\n\n对于样例 2，满足要求的树的所有 $8$ 种 $p$ 数组如下（根的 $p_i$ 为 $0$）：\n\n$\\{0,1,1,2,1\\},\\{0,1,1,2,2\\},\\{0,1,1,2,3\\},\\{0,1,1,2,4\\},$  \n$\\{0,1,1,5,2\\},\\{0,5,1,2,1\\},\\{0,1,5,2,1\\},\\{5,1,1,2,0\\}$。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$m\\le$|\n|:-:|:-:|:-:|:-:|\n|$1$|$7$|$10$|$10$|\n|$2$|$18$|$200$|$200$|\n|$3$|$22$|$10^5$|$10^5$|\n|$4$|$17$|$10^6$|$10$|\n|$5$|$36$|$10^6$|$10^6$|\n\n对于 $100\\%$ 的数据，$2\\le m\\le n\\le 10^6$，保证输入的 $p$ 对应了一棵有标号有根树，$S$ 描述了一个结点组成的集合。", "locale": "zh-CN"}}}
{"pid": "P11040", "type": "P", "difficulty": 7, "samples": [["3 4\n0 0\n0 1\n0 2\n2", "2"], ["20 15\n0 1\n0 2\n0 21\n0 5\n2\n0 15\n1 18\n0 7\n0 8\n0 25\n2\n1 22\n0 12\n0 13\n2", "313288290\n39181640\n134388812"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "平衡树", "O2优化", "组合数学", "梦熊比赛"], "title": "【MX-X3-T7】「RiOI-4」Re：End of a Dream", "background": "原题链接：<https://oier.team/problems/X3H>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dwohziu8.png)\n\n（图片来自 phigros 曲绘，侵删。）\n\n还是来谈点现实的吧。\n\n身边的同学 NOI 拿了 Ag，APIO 捧了杯，省选啥的也比小 $\\iiint$ 好。小 $\\iiint$ 说，他的时间花在游戏上了。可看看隔壁提前招进高中的，florr 号里都有 Super Ant Egg 了。小 $\\iiint$ 说，他网不好，实力发挥不出来。可再看隔壁 i wanna 大神，都开始速通 i wanna be the guy 了。小 $\\iiint$ 争道，他也没打多久游戏，只是在专心文化课。但是成绩一拉出来，成了信竞班垫底。小 $\\iiint$ 又说，可能是时间花在社交上了吧。大家都觉得他很幽默，因为他在班里一个朋友都没有。\n\n小 $\\iiint$ 不明白为什么会这样。\n\n今年对于小 $\\iiint$ 来说，可能就是他 OI 生涯的最后一年了。一年太短，能补救多少？能挽回多少？当年他刚学 OI 时，就暗暗地下定决心，要成为大家口中的“神犇”。三年过去，前途仍是一片昏暗。\n\n这或许就是，$\\color{#CD0000}\\overset{\\text{End of a Dream}}{\\text{梦\\ 的\\ 终\\ 结}}$。\n\n也许，**梦是反着的吧。**\n\n……\n\n但是这里是梦熊周赛题目，不是出题人拿来写批话的地方，所以小 $\\iiint$ 需要你做一道计数题。", "description": "给定 $n,q$。现有一个初始为 $0$ 的整数 $m$。你需要支持以下操作：\n\n- `0 x`：将 $m$ 加上 $2^x$。\n- `1 x`：将 $m$ 减去 $2^x$。若 $m<2^x$，则忽略此操作。\n- `2`：查询有多少长度为 $n$、每个数都在 $1\\sim m$ 中的严格递增正整数序列，使得其前缀异或和与后缀异或和均严格递增。答案对 $998\\,244\\,353$ 取模。\n\n其中，一个序列 $a_1,a_2,\\cdots,a_n$ 的**前缀异或和**是指序列 $s_1,s_2,\\cdots,s_n$，满足 $s_i=\\begin{cases}a_1&i=1\\\\a_{i}\\oplus s_{i-1}&i\\ge2\\end{cases}$，而其**后缀异或和**是指序列 $t_1,t_2,\\cdots,t_n$，满足 $t_i=\\begin{cases}a_n&i=1\\\\a_{n-i+1}\\oplus t_{i-1}&i\\ge2\\end{cases}$，其中 $x\\oplus y$ 表示 $x$ 与 $y$ 的按位异或。", "inputFormat": "第一行两个正整数，表示 $n,q$。\n\n接下来 $q$ 行，每行表示一个操作。", "outputFormat": "对于每个 `2` 操作，输出对应的答案对 $998\\,244\\,353$ 取模的值。", "hint": "**【样例解释 #1】**\n\n查询时 $m=7$，满足要求的序列为 $\\{1,2,4\\}$ 和 $\\{1,3,5\\}$，可以证明不存在其他解。\n\n注意，序列 $\\{1,3,1\\}$ 是不满足要求的，尽管其前、后缀异或和均为严格递增数列 $\\{1,2,3\\}$，该序列本身并不满足严格递增的限制。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$q\\le$|$x\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1$|$5$|$5$|$10$|$10$||\n|$2$|$10$|$10^3$|$10^3$|$10^3$||\n|$3$|$11$|$10^3$|$2\\times10^5$|$10^5$|AB|\n|$4$|$14$|$10^5$|$2\\times10^5$|$10^5$|AB|\n|$5$|$16$|$10^7$|$10^2$|$10^7$|B|\n|$6$|$19$|$10^7$|$2\\times10^5$|$10^7$|B|\n|$7$|$25$|$10^7$|$2\\times10^5$|$10^7$||\n\n特殊性质 A：仅有最后一次操作为 `2` 操作。  \n特殊性质 B：不包含 `1` 操作。\n\n对于 $100\\%$ 的数据，$3\\le n\\le 10^7$，$1\\le q\\le 2\\times10^5$，$0\\le x\\le 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T7】「RiOI-4」Re：End of a Dream", "background": "原题链接：<https://oier.team/problems/X3H>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dwohziu8.png)\n\n（图片来自 phigros 曲绘，侵删。）\n\n还是来谈点现实的吧。\n\n身边的同学 NOI 拿了 Ag，APIO 捧了杯，省选啥的也比小 $\\iiint$ 好。小 $\\iiint$ 说，他的时间花在游戏上了。可看看隔壁提前招进高中的，florr 号里都有 Super Ant Egg 了。小 $\\iiint$ 说，他网不好，实力发挥不出来。可再看隔壁 i wanna 大神，都开始速通 i wanna be the guy 了。小 $\\iiint$ 争道，他也没打多久游戏，只是在专心文化课。但是成绩一拉出来，成了信竞班垫底。小 $\\iiint$ 又说，可能是时间花在社交上了吧。大家都觉得他很幽默，因为他在班里一个朋友都没有。\n\n小 $\\iiint$ 不明白为什么会这样。\n\n今年对于小 $\\iiint$ 来说，可能就是他 OI 生涯的最后一年了。一年太短，能补救多少？能挽回多少？当年他刚学 OI 时，就暗暗地下定决心，要成为大家口中的“神犇”。三年过去，前途仍是一片昏暗。\n\n这或许就是，$\\color{#CD0000}\\overset{\\text{End of a Dream}}{\\text{梦\\ 的\\ 终\\ 结}}$。\n\n也许，**梦是反着的吧。**\n\n……\n\n但是这里是梦熊周赛题目，不是出题人拿来写批话的地方，所以小 $\\iiint$ 需要你做一道计数题。", "description": "给定 $n,q$。现有一个初始为 $0$ 的整数 $m$。你需要支持以下操作：\n\n- `0 x`：将 $m$ 加上 $2^x$。\n- `1 x`：将 $m$ 减去 $2^x$。若 $m<2^x$，则忽略此操作。\n- `2`：查询有多少长度为 $n$、每个数都在 $1\\sim m$ 中的严格递增正整数序列，使得其前缀异或和与后缀异或和均严格递增。答案对 $998\\,244\\,353$ 取模。\n\n其中，一个序列 $a_1,a_2,\\cdots,a_n$ 的**前缀异或和**是指序列 $s_1,s_2,\\cdots,s_n$，满足 $s_i=\\begin{cases}a_1&i=1\\\\a_{i}\\oplus s_{i-1}&i\\ge2\\end{cases}$，而其**后缀异或和**是指序列 $t_1,t_2,\\cdots,t_n$，满足 $t_i=\\begin{cases}a_n&i=1\\\\a_{n-i+1}\\oplus t_{i-1}&i\\ge2\\end{cases}$，其中 $x\\oplus y$ 表示 $x$ 与 $y$ 的按位异或。", "inputFormat": "第一行两个正整数，表示 $n,q$。\n\n接下来 $q$ 行，每行表示一个操作。", "outputFormat": "对于每个 `2` 操作，输出对应的答案对 $998\\,244\\,353$ 取模的值。", "hint": "**【样例解释 #1】**\n\n查询时 $m=7$，满足要求的序列为 $\\{1,2,4\\}$ 和 $\\{1,3,5\\}$，可以证明不存在其他解。\n\n注意，序列 $\\{1,3,1\\}$ 是不满足要求的，尽管其前、后缀异或和均为严格递增数列 $\\{1,2,3\\}$，该序列本身并不满足严格递增的限制。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$q\\le$|$x\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1$|$5$|$5$|$10$|$10$||\n|$2$|$10$|$10^3$|$10^3$|$10^3$||\n|$3$|$11$|$10^3$|$2\\times10^5$|$10^5$|AB|\n|$4$|$14$|$10^5$|$2\\times10^5$|$10^5$|AB|\n|$5$|$16$|$10^7$|$10^2$|$10^7$|B|\n|$6$|$19$|$10^7$|$2\\times10^5$|$10^7$|B|\n|$7$|$25$|$10^7$|$2\\times10^5$|$10^7$||\n\n特殊性质 A：仅有最后一次操作为 `2` 操作。  \n特殊性质 B：不包含 `1` 操作。\n\n对于 $100\\%$ 的数据，$3\\le n\\le 10^7$，$1\\le q\\le 2\\times10^5$，$0\\le x\\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P11041", "type": "P", "difficulty": 1, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["数学", "2024", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Java B] 报数游戏", "background": "", "description": "小蓝和朋友们在玩一个报数游戏。由于今年是 $2024$ 年，他们决定要从小到大轮流报出是 $20$ 或 $24$ 倍数的正整数。前 $10$ 个被报出的数是：$20,24,40,48,60,72,80,96,100,120$。请问第 $202420242024$ 个被报出的数是多少？\n\n这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只输出这个整数，填写多余的内容将无法得分。", "inputFormat": "本题无输入。", "outputFormat": "一行一个整数，表示你算出的答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Java B] 报数游戏", "background": "", "description": "小蓝和朋友们在玩一个报数游戏。由于今年是 $2024$ 年，他们决定要从小到大轮流报出是 $20$ 或 $24$ 倍数的正整数。前 $10$ 个被报出的数是：$20,24,40,48,60,72,80,96,100,120$。请问第 $202420242024$ 个被报出的数是多少？\n\n这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只输出这个整数，填写多余的内容将无法得分。", "inputFormat": "本题无输入。", "outputFormat": "一行一个整数，表示你算出的答案。", "hint": "", "locale": "zh-CN"}}}
