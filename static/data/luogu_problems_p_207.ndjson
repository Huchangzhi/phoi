{"pid": "P5186", "type": "P", "difficulty": 4, "samples": [["5 3\n5 3 4 4 5", "3\n2"], ["10 3\n3 3 3 3 3 3 3 3 3 3", "0\n4"], ["7 4\n1 2 3 4 3 2 1", "4\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000]}, "tags": ["2009", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #4] OGRADA", "background": "", "description": " **译自 [COCI 2010.02](http://hsin.hr/coci/archive/2009_2010/) T4「[OGRADA](http://hsin.hr/coci/archive/2009_2010/contest4_tasks.pdf)」**\n\nMatija 的栅栏由 $N$ 条木板组成，从左到右依次编号为 $1\\ldots N$。$i$ 号木板的高度为 $h_i$，每条木板的宽度是 $1\\ \\rm{cm}$。\n\nMatija 想用一个宽度为 $X\\ \\rm{cm}$ 的滚筒刷来刷木板。使用滚筒刷时，要保证刷子**完全**接触栅栏（不能一部分接触一部分不接触）；另外，还要保证滚筒平行于地面。因此，每次涂色时，Matija 会在栅栏上选择连续的 $x$ 条木板，然后从下往上「刷」，一直刷到这 $x$ 条木板中最矮者的高度。\n\n根据上述规则，有可能有一些木板没法用滚筒刷来刷，Matija 不得不用牙刷来「涂」剩下的部分。因此，请帮他求出他最少只需用牙刷「涂」多少平方厘米。他还想知道，在满足「涂」的面积最少的情况下，他最少要用滚筒刷「刷」多少次。", "inputFormat": "第一行：$N,X$。  \n第二行：$h_1\\ldots h_N$。", "outputFormat": "两行。  \n第一行有一个整数，表示 Matija 最少需用牙刷涂多少平方厘米。  \n第二行有一个整数，表示最少要用滚筒刷「刷」多少次。", "hint": "#### 样例说明 1\n![pp.png](https://i.loli.net/2018/12/30/5c289875b3356.png)\n\n#### 数据范围与提示\n$1\\le N\\le 10^6,$ $1\\le X\\le 10^5,$ $1\\le h_i\\le 10^6$.", "locale": "zh-CN", "translations": {"en": {"title": "[COCI 2009/2010 #4] OGRADA", "background": "", "description": "**Translated from [COCI 2010.02](http://hsin.hr/coci/archive/2009_2010/) Problem T4 “[OGRADA](http://hsin.hr/coci/archive/2009_2010/contest4_tasks.pdf)”.**\n\nMatija’s fence consists of $N$ wooden boards, numbered from left to right as $1 \\ldots N$. The height of board $i$ is $h_i$, and each board has width $1\\ \\rm{cm}$.\n\nMatija wants to paint the boards using a roller brush of width $X\\ \\rm{cm}$. When using the roller, the brush must **fully** touch the fence (it cannot be partly touching and partly not), and the roller must be parallel to the ground. Therefore, each time he paints, Matija chooses $x$ consecutive boards on the fence, then “rolls” from bottom to top, until reaching the height of the shortest board among these $x$ boards.\n\nUnder these rules, it is possible that some parts of the boards cannot be painted with the roller. Matija then has to “paint” the remaining parts with a toothbrush. Therefore, please help him find the minimum number of square centimeters he must paint using the toothbrush. He also wants to know, under the condition that the toothbrush-painted area is minimized, what is the minimum number of roller “rolls” needed.", "inputFormat": "The first line: $N, X$.  \nThe second line: $h_1 \\ldots h_N$.", "outputFormat": "Two lines.  \nThe first line contains one integer, meaning the minimum number of square centimeters Matija must paint with the toothbrush.  \nThe second line contains one integer, meaning the minimum number of times he needs to “roll” with the roller.", "hint": "#### Sample Explanation 1\n\n![pp.png](https://i.loli.net/2018/12/30/5c289875b3356.png)\n\n#### Constraints\n\n$1\\le N\\le 10^6,$ $1\\le X\\le 10^5,$ $1\\le h_i\\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[COCI 2009/2010 #4] OGRADA", "background": "", "description": " **译自 [COCI 2010.02](http://hsin.hr/coci/archive/2009_2010/) T4「[OGRADA](http://hsin.hr/coci/archive/2009_2010/contest4_tasks.pdf)」**\n\nMatija 的栅栏由 $N$ 条木板组成，从左到右依次编号为 $1\\ldots N$。$i$ 号木板的高度为 $h_i$，每条木板的宽度是 $1\\ \\rm{cm}$。\n\nMatija 想用一个宽度为 $X\\ \\rm{cm}$ 的滚筒刷来刷木板。使用滚筒刷时，要保证刷子**完全**接触栅栏（不能一部分接触一部分不接触）；另外，还要保证滚筒平行于地面。因此，每次涂色时，Matija 会在栅栏上选择连续的 $x$ 条木板，然后从下往上「刷」，一直刷到这 $x$ 条木板中最矮者的高度。\n\n根据上述规则，有可能有一些木板没法用滚筒刷来刷，Matija 不得不用牙刷来「涂」剩下的部分。因此，请帮他求出他最少只需用牙刷「涂」多少平方厘米。他还想知道，在满足「涂」的面积最少的情况下，他最少要用滚筒刷「刷」多少次。", "inputFormat": "第一行：$N,X$。  \n第二行：$h_1\\ldots h_N$。", "outputFormat": "两行。  \n第一行有一个整数，表示 Matija 最少需用牙刷涂多少平方厘米。  \n第二行有一个整数，表示最少要用滚筒刷「刷」多少次。", "hint": "#### 样例说明 1\n![pp.png](https://i.loli.net/2018/12/30/5c289875b3356.png)\n\n#### 数据范围与提示\n$1\\le N\\le 10^6,$ $1\\le X\\le 10^5,$ $1\\le h_i\\le 10^6$.", "locale": "zh-CN"}}}
{"pid": "P5187", "type": "P", "difficulty": 3, "samples": [["4 1 1", "6"], ["5 2 2", "1"], ["6 1 2", "7"]], "limits": {"time": [200, 200, 200, 200, 200, 200, 200, 200, 200, 200], "memory": [32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000]}, "tags": ["2009", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #4] KABOOM", "background": "", "description": " **译自 [COCI 2010.02](http://hsin.hr/coci/archive/2009_2010/) T5「[KABOOM](http://hsin.hr/coci/archive/2009_2010/contest4_tasks.pdf)」**\n \n**注意本题的时间限制。**\n\nLuka 在实验室里发现了一条奇怪的胶带。胶带分为 $N$ 段，从左到右依次编号为 $1\\ldots N$。胶带厚度忽略不计。\n\n胶带只能在两段的交点处弯折，且只能折叠 180°。\n\n显然胶带有两面。胶带的一面涂满了粘性超大的胶，另一面则只有前 $A$ 段和后 $B$ 段涂了粘性超大的胶。\n\n请问 Luka 有多少种折叠方式使他能还原现场（Luka 的手不会粘住胶带，但如果两个胶面粘一起了 Luka 就撕不开了）。答案对 $10301$ 取模。\n", "inputFormat": "第一行，三个整数 $N,A,B$。  \n", "outputFormat": "一行一个整数，表示答案。", "hint": "#### 样例说明 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sbnvf1fm.png)\n\n#### 数据范围与提示\n\n$1\\le A+B\\le N\\le 1000,$ $A>0,$ $B>0$.", "locale": "zh-CN", "translations": {"en": {"title": "[COCI 2009/2010 #4] KABOOM", "background": "", "description": "**Translated from [COCI 2010.02](http://hsin.hr/coci/archive/2009_2010/) T5 “[KABOOM](http://hsin.hr/coci/archive/2009_2010/contest4_tasks.pdf)”.**\n\n**Pay attention to the time limit of this problem.**\n\nLuka found a strange tape in the laboratory. The tape is divided into $N$ segments, numbered from left to right as $1\\ldots N$. The thickness of the tape can be ignored.\n\nThe tape can only be bent at the junction between two segments, and it can only be folded by 180°.\n\nObviously, the tape has two sides. One side of the tape is fully coated with extremely sticky glue, while on the other side, only the first $A$ segments and the last $B$ segments are coated with extremely sticky glue.\n\nHow many ways can Luka fold the tape so that he can restore the scene (Luka’s hands will not stick to the tape, but if two glued sides stick together, Luka cannot pull them apart)? Output the answer modulo $10301$.", "inputFormat": "The first line contains three integers $N, A, B$.", "outputFormat": "Output one integer, the answer.", "hint": "#### Sample Explanation 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sbnvf1fm.png)\n\n#### Constraints and Notes\n\n$1\\le A+B\\le N\\le 1000,$ $A>0,$ $B>0$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[COCI 2009/2010 #4] KABOOM", "background": "", "description": " **译自 [COCI 2010.02](http://hsin.hr/coci/archive/2009_2010/) T5「[KABOOM](http://hsin.hr/coci/archive/2009_2010/contest4_tasks.pdf)」**\n \n**注意本题的时间限制。**\n\nLuka 在实验室里发现了一条奇怪的胶带。胶带分为 $N$ 段，从左到右依次编号为 $1\\ldots N$。胶带厚度忽略不计。\n\n胶带只能在两段的交点处弯折，且只能折叠 180°。\n\n显然胶带有两面。胶带的一面涂满了粘性超大的胶，另一面则只有前 $A$ 段和后 $B$ 段涂了粘性超大的胶。\n\n请问 Luka 有多少种折叠方式使他能还原现场（Luka 的手不会粘住胶带，但如果两个胶面粘一起了 Luka 就撕不开了）。答案对 $10301$ 取模。\n", "inputFormat": "第一行，三个整数 $N,A,B$。  \n", "outputFormat": "一行一个整数，表示答案。", "hint": "#### 样例说明 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sbnvf1fm.png)\n\n#### 数据范围与提示\n\n$1\\le A+B\\le N\\le 1000,$ $A>0,$ $B>0$.", "locale": "zh-CN"}}}
{"pid": "P5188", "type": "P", "difficulty": 6, "samples": [["3 3\n1 2 BMJ\n2 3 MJP\n3 1 JPB\n5", "3"], ["3 4\n1 2 B\n2 1 P\n1 3 J\n3 1 M\n8", "2"], ["5 7\n1 2 B\n2 4 M\n1 3 J\n3 4 MB\n4 1 JP\n4 5 J\n5 1 P\n7", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000]}, "tags": ["2009", "矩阵加速", "容斥原理", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #4] PALACINKE", "background": "", "description": " **译自 [COCI 2010.02](http://hsin.hr/coci/archive/2009_2010/) T6「[PALACINKE](http://hsin.hr/coci/archive/2009_2010/contest4_tasks.pdf)」**\n\n安娜有几个同学过来吃可丽饼，然而安娜忘了这事。当安娜发现时，留给她烤可丽饼的时间只剩下 $T$ 分钟了。她马上跑出去采购四样原材料：面粉 `B`，鸡蛋 `J`，牛奶 `M` 和果酱 `P`。\n\n安娜周边有 $N$ 个路口，编号为 $1\\ldots N$，还有 $M$ 条单向道路连接它们。已知每条路上的商店会卖哪些材料，保证每条路上的商店至少会卖（上述四种材料中）的一种。\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dy9d4iw5.png)\n\n安娜穿过一条道路时，如果她进入了这条路上的商店买东西，则她通过这条路耗时  $2$ 分钟，否则耗时  $1$ 分钟。即使她买完了所有原材料仍可以进店买东西。\n\n安娜需要从 $1$ 开始，最终回到 $1$。\n\n安娜需要在 $T$ 分钟内采购到四种原材料。请问她有多少种「采购方式」，答案对 $5557$ 取模。采购方式包含了她经过的结点的次序，以及她在每条路上买不买材料，但不计她在哪个商店买了什么。例如，当 $T=7$ 时，在上图中有 $5$ 种采购方式：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ug3bvehg.png)", "inputFormat": "第一行：$N,M$。  \n接下来 $M$ 行，每行两个整数 $u,v$ 和一个仅可能包含 `BJMP` 四种字符的字符串 $s$，$u,v$ 表示一条单向道路，$s$ 表示这条道路上的商店会卖哪些材料。保证没有两条单向道路相同（但可能有两条连接的结点相同，而方向相反的道路）。  \n第 $N+2$ 行：$T$。", "outputFormat": "一行，一个答案，表示安娜有多少种采购方式。", "hint": "$1\\le N\\le 25,$ $1\\le M\\le 500,$ $1\\le T\\le 10^9$.  \n保证没有两条单向道路相同（但可能有两条连接的结点相同，而方向相反的道路）。", "locale": "zh-CN", "translations": {"en": {"title": "[COCI 2009/2010 #4] PALACINKE", "background": "", "description": "**Translated from [COCI 2010.02](http://hsin.hr/coci/archive/2009_2010/) Task 6 “[PALACINKE](http://hsin.hr/coci/archive/2009_2010/contest4_tasks.pdf)”.**\n\nAnna has some classmates coming over to eat crêpes, but she forgot about it. When she realizes it, she only has $T$ minutes left to make crêpes. She immediately runs out to buy four ingredients: flour `B`, eggs `J`, milk `M`, and jam `P`.\n\nAround Anna there are $N$ intersections, numbered $1\\ldots N$, and $M$ directed roads connecting them. For each road, we know which ingredients are sold in the shop on that road. It is guaranteed that the shop on every road sells at least one of the four ingredients above.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dy9d4iw5.png)\n\nWhen Anna travels along a road, if she enters the shop on that road to buy something, then it takes her $2$ minutes to pass that road; otherwise, it takes $1$ minute. Even after she has already bought all ingredients, she may still enter shops to buy things.\n\nAnna must start from node $1$ and finally return to node $1$.\n\nAnna needs to obtain all four ingredients within $T$ minutes. Compute how many “shopping plans” she has, modulo $5557$. A shopping plan includes the order of nodes she visits, and for each road whether she buys ingredients or not, but it does not consider what exactly she buys in which shop. For example, when $T=7$, in the figure above there are $5$ shopping plans:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ug3bvehg.png)", "inputFormat": "The first line: $N, M$.  \nThe next $M$ lines: each line contains two integers $u, v$ and a string $s$ consisting only of characters `BJMP`. Here, $u, v$ describe a directed road, and $s$ indicates which ingredients are sold in the shop on that road. It is guaranteed that no two directed roads are identical (but there may be two roads connecting the same pair of nodes with opposite directions).  \nLine $N+2$: $T$.", "outputFormat": "One line with one integer, the number of shopping plans Anna has.", "hint": "Constraints: $1\\le N\\le 25$, $1\\le M\\le 500$, $1\\le T\\le 10^9$.  \nIt is guaranteed that no two directed roads are identical (but there may be two roads connecting the same pair of nodes with opposite directions).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[COCI 2009/2010 #4] PALACINKE", "background": "", "description": " **译自 [COCI 2010.02](http://hsin.hr/coci/archive/2009_2010/) T6「[PALACINKE](http://hsin.hr/coci/archive/2009_2010/contest4_tasks.pdf)」**\n\n安娜有几个同学过来吃可丽饼，然而安娜忘了这事。当安娜发现时，留给她烤可丽饼的时间只剩下 $T$ 分钟了。她马上跑出去采购四样原材料：面粉 `B`，鸡蛋 `J`，牛奶 `M` 和果酱 `P`。\n\n安娜周边有 $N$ 个路口，编号为 $1\\ldots N$，还有 $M$ 条单向道路连接它们。已知每条路上的商店会卖哪些材料，保证每条路上的商店至少会卖（上述四种材料中）的一种。\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dy9d4iw5.png)\n\n安娜穿过一条道路时，如果她进入了这条路上的商店买东西，则她通过这条路耗时  $2$ 分钟，否则耗时  $1$ 分钟。即使她买完了所有原材料仍可以进店买东西。\n\n安娜需要从 $1$ 开始，最终回到 $1$。\n\n安娜需要在 $T$ 分钟内采购到四种原材料。请问她有多少种「采购方式」，答案对 $5557$ 取模。采购方式包含了她经过的结点的次序，以及她在每条路上买不买材料，但不计她在哪个商店买了什么。例如，当 $T=7$ 时，在上图中有 $5$ 种采购方式：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ug3bvehg.png)", "inputFormat": "第一行：$N,M$。  \n接下来 $M$ 行，每行两个整数 $u,v$ 和一个仅可能包含 `BJMP` 四种字符的字符串 $s$，$u,v$ 表示一条单向道路，$s$ 表示这条道路上的商店会卖哪些材料。保证没有两条单向道路相同（但可能有两条连接的结点相同，而方向相反的道路）。  \n第 $N+2$ 行：$T$。", "outputFormat": "一行，一个答案，表示安娜有多少种采购方式。", "hint": "$1\\le N\\le 25,$ $1\\le M\\le 500,$ $1\\le T\\le 10^9$.  \n保证没有两条单向道路相同（但可能有两条连接的结点相同，而方向相反的道路）。", "locale": "zh-CN"}}}
{"pid": "P5189", "type": "P", "difficulty": 5, "samples": [["2 5\n1 1", "3"], ["5 3\n2 2 3 2 2", "2"], ["10 4\n3 3 3 3 2 3 1 1 1 3", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["动态规划 DP", "2009", "区间 DP", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #5] ZUMA", "background": "", "description": " **译自 [COCI 2010.03.06](http://hsin.hr/coci/archive/2009_2010/) T4「[ZUMA](http://hsin.hr/coci/archive/2009_2010/contest5_tasks.pdf)」**\n\nMirko 将 $N$ 颗弹子排成一排，依次编号为 $1\\ldots N$。$i$ 号弹子的颜色为 $c_i$。他发现，如果他触摸 $\\ge K$ 颗连续的弹子，且这些弹子的颜色相同，魔法会使这些弹子消失；此后，这 $K$ 颗弹子前面的弹子便与这 $K$ 颗弹子后面的弹子相邻。\n\nMirko 家里有很多弹子，他想在这 $N$ 颗弹子之间（也可以在开头的弹子前面或末尾的弹子后面）插入尽可能少的弹子，使得这 $N$ 颗弹子+插入的所有弹子消失。", "inputFormat": "第一行：$N,K$。  \n第二行：$c_1\\ldots c_N$。", "outputFormat": "一行，一个整数，表示他至少要插入几颗弹子。", "hint": "$1\\le N\\le 100,$ $2\\le K\\le 5,$ $1\\le c_i\\le 100$.", "locale": "zh-CN", "translations": {"en": {"title": "[COCI 2009/2010 #5] ZUMA", "background": "", "description": "**Translated from [COCI 2010.03.06](http://hsin.hr/coci/archive/2009_2010/) Task 4 “[ZUMA](http://hsin.hr/coci/archive/2009_2010/contest5_tasks.pdf)”.**\n\nMirko lines up $N$ marbles in a row, numbered $1 \\ldots N$ in order. The color of marble $i$ is $c_i$. He discovered that if he touches $\\ge K$ consecutive marbles and all of them have the same color, magic will make these marbles disappear; after that, the marbles before these $K$ marbles become adjacent to the marbles after these $K$ marbles.\n\nMirko has many marbles at home. He wants to insert as few marbles as possible among these $N$ marbles (he may also insert marbles before the first marble or after the last marble) so that all of the original $N$ marbles plus all inserted marbles disappear.", "inputFormat": "The first line contains $N, K$.  \nThe second line contains $c_1 \\ldots c_N$.", "outputFormat": "One line with one integer, the minimum number of marbles he needs to insert.", "hint": "Constraints: $1 \\le N \\le 100$, $2 \\le K \\le 5$, $1 \\le c_i \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[COCI 2009/2010 #5] ZUMA", "background": "", "description": " **译自 [COCI 2010.03.06](http://hsin.hr/coci/archive/2009_2010/) T4「[ZUMA](http://hsin.hr/coci/archive/2009_2010/contest5_tasks.pdf)」**\n\nMirko 将 $N$ 颗弹子排成一排，依次编号为 $1\\ldots N$。$i$ 号弹子的颜色为 $c_i$。他发现，如果他触摸 $\\ge K$ 颗连续的弹子，且这些弹子的颜色相同，魔法会使这些弹子消失；此后，这 $K$ 颗弹子前面的弹子便与这 $K$ 颗弹子后面的弹子相邻。\n\nMirko 家里有很多弹子，他想在这 $N$ 颗弹子之间（也可以在开头的弹子前面或末尾的弹子后面）插入尽可能少的弹子，使得这 $N$ 颗弹子+插入的所有弹子消失。", "inputFormat": "第一行：$N,K$。  \n第二行：$c_1\\ldots c_N$。", "outputFormat": "一行，一个整数，表示他至少要插入几颗弹子。", "hint": "$1\\le N\\le 100,$ $2\\le K\\le 5,$ $1\\le c_i\\le 100$.", "locale": "zh-CN"}}}
{"pid": "P5190", "type": "P", "difficulty": 3, "samples": [["10 4\n1 1 2 1\n3\n0 9\n2 6\n7 7", "35\n18\n3"], ["11 3\n3 7 10\n3\n0 10\n2 6\n7 7", "8\n2\n1"], ["1000000 6\n12 3 21 436 2 19\n2\n12 16124\n692 29021", "16422\n28874"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000]}, "tags": ["2009", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #5] PROGRAM", "background": "", "description": " **译自 [COCI 2010.03.06](http://hsin.hr/coci/archive/2009_2010/) T5「[PROGRAM](http://hsin.hr/coci/archive/2009_2010/contest5_tasks.pdf)」**\n\n开始时，$\\mathit{seq}$ 数组已清零。请注意 $\\mathit{seq}$ 数组的第一个元素的下标是 0 而非 1。\n\n```cpp\nvoid something (int jump) {\n  for (int i = 0; i < N; i += jump)\n    ++seq[i];\n}\n```\n\nMirko 调用了 $\\tt something$ 函数 $K$ 次，第 $i$ 次调用时 $\\tt jump= \\it X_i$。\n\n接下来有 $Q$ 次查询，每次查询包含两个整数 $L_i,$ $R_i$，对于每组查询请输出 $\\displaystyle\\sum_{i=L_i}^{R_i}\\mathit{seq}_i$。", "inputFormat": "第一行：$N,K$。  \n接下来一行 $K$ 个整数，第 $i$ 个为 $X_i$。  \n第 $N+2$ 行：$Q$。  \n接下来 $Q$ 行：每行两个整数 $L_i,$ $R_i$。", "outputFormat": "共 $Q$ 行，第 $i$ 行包含第 $i$ 组查询的答案。", "hint": "#### 样例说明 1\n$seq=\\{4, 3, 4, 3, 4, 3, 4, 3, 4, 3\\}$\n\n#### 样例说明 2\n$seq=\\{3, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1\\}$\n\n#### 数据范围与提示\n$1≤N,K,Q≤10^6,$ $1≤X_i<N,$ $0≤L_i≤R_i<N$.", "locale": "zh-CN", "translations": {"en": {"title": "[COCI 2009/2010 #5] PROGRAM", "background": "", "description": "**Translated from [COCI 2010.03.06](http://hsin.hr/coci/archive/2009_2010/) T5 “[PROGRAM](http://hsin.hr/coci/archive/2009_2010/contest5_tasks.pdf)”.**\n\nAt the beginning, the array $\\mathit{seq}$ is all zeros. Note that the first element of $\\mathit{seq}$ has index 0, not 1.\n\n```cpp\nvoid something (int jump) {\n  for (int i = 0; i < N; i += jump)\n    ++seq[i];\n}\n```\n\nMirko called the function $\\tt something$ exactly $K$ times. In the $i$-th call, $\\tt jump = \\it X_i$.\n\nThen there are $Q$ queries. Each query contains two integers $L_i,$ $R_i$. For each query, output $\\displaystyle\\sum_{i=L_i}^{R_i}\\mathit{seq}_i$.", "inputFormat": "The first line contains $N, K$.  \nThe next line contains $K$ integers, where the $i$-th one is $X_i$.  \nLine $N + 2$ contains $Q$.  \nThe next $Q$ lines each contain two integers $L_i,$ $R_i$.", "outputFormat": "Output $Q$ lines. The $i$-th line contains the answer to the $i$-th query.", "hint": "#### Sample Explanation 1\n\n$seq=\\{4, 3, 4, 3, 4, 3, 4, 3, 4, 3\\}$\n\n#### Sample Explanation 2\n\n$seq=\\{3, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1\\}$\n\n#### Constraints\n\n$1 \\le N, K, Q \\le 10^6,$ $1 \\le X_i < N,$ $0 \\le L_i \\le R_i < N$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[COCI 2009/2010 #5] PROGRAM", "background": "", "description": " **译自 [COCI 2010.03.06](http://hsin.hr/coci/archive/2009_2010/) T5「[PROGRAM](http://hsin.hr/coci/archive/2009_2010/contest5_tasks.pdf)」**\n\n开始时，$\\mathit{seq}$ 数组已清零。请注意 $\\mathit{seq}$ 数组的第一个元素的下标是 0 而非 1。\n\n```cpp\nvoid something (int jump) {\n  for (int i = 0; i < N; i += jump)\n    ++seq[i];\n}\n```\n\nMirko 调用了 $\\tt something$ 函数 $K$ 次，第 $i$ 次调用时 $\\tt jump= \\it X_i$。\n\n接下来有 $Q$ 次查询，每次查询包含两个整数 $L_i,$ $R_i$，对于每组查询请输出 $\\displaystyle\\sum_{i=L_i}^{R_i}\\mathit{seq}_i$。", "inputFormat": "第一行：$N,K$。  \n接下来一行 $K$ 个整数，第 $i$ 个为 $X_i$。  \n第 $N+2$ 行：$Q$。  \n接下来 $Q$ 行：每行两个整数 $L_i,$ $R_i$。", "outputFormat": "共 $Q$ 行，第 $i$ 行包含第 $i$ 组查询的答案。", "hint": "#### 样例说明 1\n$seq=\\{4, 3, 4, 3, 4, 3, 4, 3, 4, 3\\}$\n\n#### 样例说明 2\n$seq=\\{3, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1\\}$\n\n#### 数据范围与提示\n$1≤N,K,Q≤10^6,$ $1≤X_i<N,$ $0≤L_i≤R_i<N$.", "locale": "zh-CN"}}}
{"pid": "P5191", "type": "P", "difficulty": 5, "samples": [["3 2 1\n1 2\n2 3\n2", "1 2 3"], ["3 2 1\n1 3\n2 3\n3", "3"], ["4 4 1\n1 2\n1 3\n2 4\n3 4\n4", "1 2 3 4\n"], ["4 4 1\n1 3\n2 3\n1 4\n2 4\n3", "3 4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000]}, "tags": ["图论", "2009", "拓扑排序", "COCI（克罗地亚）", "bitset"], "title": "[COCI 2009/2010 #6] HOLMES", "background": "", "description": " **译自 [COCI 2010.03.20](http://hsin.hr/coci/archive/2009_2010/) T5「[HOLMES](http://hsin.hr/coci/archive/2009_2010/contest6_tasks.pdf)」**\n\n有 $D$ 个事件，编号分别为 $1\\ldots D$。\n\n福尔摩斯有 $M$ 组形如 $A\\rightarrow B$ 的推论，表示「如果事件 $A$ 发生，那么事件 $B$ 一定会发生」。请注意，这不代表「如果 $A$ 不发生，$B$ 就一定不会发生」。\n\n福尔摩斯的这 $M$ 组推论可以形成链式结构，例如 $A\\rightarrow B\\rightarrow C$，但一定不会形成环，如 $A\\rightarrow B\\rightarrow C\\rightarrow \\dots \\rightarrow A$。\n\n已知事件 $S_1\\ldots S_N$ 会发生，试求哪些事件一定会发生。\n\n> Update: 原题题意不清（或者是我语文太差），补充一句，这样才能解释样例 1。对于一个事件 $X$，如果存在推论 $Y_1\\rightarrow X,$ $Y_2\\rightarrow X$，那么「事件 $X$ 一定会发生」当且仅当『「事件 $Y_1$ 一定会发生」或「事件 $Y_2$ 一定会发生」……』", "inputFormat": "第一行：$D,M,N$。  \n接下来 $M$ 行：每行两个整数，表示一组推论 $A_i, B_i$。  \n接下来 $N$ 行：第 $i$ 行有一个整数 $S_i$。", "outputFormat": "一行，若干个整数，表示一定会发生的事件。\n\n~~以任意顺序输出均可~~ 请按照编号递增的顺序输出，传题人懒得写 SPJ", "hint": "#### 样例说明 2\n只知事件 3 发生，无法推出是事件 1 导致事件 3 发生还是事件 2 导致事件 3 发生。\n\n#### 样例说明 3\n事件 4 发生，则事件 2 和事件 3 至少有一者发生；  \n无论是何者发生，其条件都是事件 1 一定发生；  \n因为事件 1 一定发生，因此事件 2, 3 都一定发生。\n\n#### 样例说明 4\n事件 3 发生，则事件 1 和 2 一定有一者发生；  \n若事件 1 和 2 中有任意一者发生，则事件 4 一定会发生。\n\n#### 数据范围与提示\n$1\\le D\\le 1000,$ $1\\le M\\le 10^5,$ $1\\le N,$ $X_i,$ $A_i,$ $B_i\\le D$.", "locale": "zh-CN", "translations": {"en": {"title": "[COCI 2009/2010 #6] HOLMES", "background": "", "description": "**Translated from [COCI 2010.03.20](http://hsin.hr/coci/archive/2009_2010/) T5 “[HOLMES](http://hsin.hr/coci/archive/2009_2010/contest6_tasks.pdf)”.**\n\nThere are $D$ events, numbered $1\\ldots D$.\n\nHolmes has $M$ inferences of the form $A\\rightarrow B$, meaning “if event $A$ happens, then event $B$ will definitely happen”. Note that this does not mean “if $A$ does not happen, then $B$ will definitely not happen”.\n\nThese $M$ inferences can form chain structures, such as $A\\rightarrow B\\rightarrow C$, but they will never form a cycle, such as $A\\rightarrow B\\rightarrow C\\rightarrow \\dots \\rightarrow A$.\n\nIt is known that events $S_1\\ldots S_N$ will happen. Find which events will definitely happen.\n\n> Update: The original statement is unclear (or maybe my reading is poor), so here is one extra sentence to explain sample 1. For an event $X$, if there exist inferences $Y_1\\rightarrow X,$ $Y_2\\rightarrow X$, then “event $X$ will definitely happen” if and only if “event $Y_1$ will definitely happen” or “event $Y_2$ will definitely happen” ……", "inputFormat": "The first line: $D, M, N$.  \nThe next $M$ lines: each line contains two integers, representing one inference $A_i, B_i$.  \nThe next $N$ lines: the $i$-th line contains one integer $S_i$.", "outputFormat": "One line with several integers, representing the events that will definitely happen.\n\n~~Output in any order is acceptable~~ Please output them in increasing order of event number, because the uploader was too lazy to write an SPJ.", "hint": "#### Explanation for Sample 2\n\nIf we only know that event 3 happens, we cannot deduce whether event 1 caused event 3 or event 2 caused event 3.\n\n#### Explanation for Sample 3\n\nIf event 4 happens, then at least one of events 2 and 3 happens;  \nno matter which one happens, its condition is that event 1 definitely happens;  \nsince event 1 definitely happens, events 2 and 3 both definitely happen.\n\n#### Explanation for Sample 4\n\nIf event 3 happens, then at least one of events 1 and 2 definitely happens;  \nif either event 1 or event 2 happens, then event 4 will definitely happen.\n\n#### Constraints and Hints\n\n$1\\le D\\le 1000,$ $1\\le M\\le 10^5,$ $1\\le N,$ $X_i,$ $A_i,$ $B_i\\le D$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[COCI 2009/2010 #6] HOLMES", "background": "", "description": " **译自 [COCI 2010.03.20](http://hsin.hr/coci/archive/2009_2010/) T5「[HOLMES](http://hsin.hr/coci/archive/2009_2010/contest6_tasks.pdf)」**\n\n有 $D$ 个事件，编号分别为 $1\\ldots D$。\n\n福尔摩斯有 $M$ 组形如 $A\\rightarrow B$ 的推论，表示「如果事件 $A$ 发生，那么事件 $B$ 一定会发生」。请注意，这不代表「如果 $A$ 不发生，$B$ 就一定不会发生」。\n\n福尔摩斯的这 $M$ 组推论可以形成链式结构，例如 $A\\rightarrow B\\rightarrow C$，但一定不会形成环，如 $A\\rightarrow B\\rightarrow C\\rightarrow \\dots \\rightarrow A$。\n\n已知事件 $S_1\\ldots S_N$ 会发生，试求哪些事件一定会发生。\n\n> Update: 原题题意不清（或者是我语文太差），补充一句，这样才能解释样例 1。对于一个事件 $X$，如果存在推论 $Y_1\\rightarrow X,$ $Y_2\\rightarrow X$，那么「事件 $X$ 一定会发生」当且仅当『「事件 $Y_1$ 一定会发生」或「事件 $Y_2$ 一定会发生」……』", "inputFormat": "第一行：$D,M,N$。  \n接下来 $M$ 行：每行两个整数，表示一组推论 $A_i, B_i$。  \n接下来 $N$ 行：第 $i$ 行有一个整数 $S_i$。", "outputFormat": "一行，若干个整数，表示一定会发生的事件。\n\n~~以任意顺序输出均可~~ 请按照编号递增的顺序输出，传题人懒得写 SPJ", "hint": "#### 样例说明 2\n只知事件 3 发生，无法推出是事件 1 导致事件 3 发生还是事件 2 导致事件 3 发生。\n\n#### 样例说明 3\n事件 4 发生，则事件 2 和事件 3 至少有一者发生；  \n无论是何者发生，其条件都是事件 1 一定发生；  \n因为事件 1 一定发生，因此事件 2, 3 都一定发生。\n\n#### 样例说明 4\n事件 3 发生，则事件 1 和 2 一定有一者发生；  \n若事件 1 和 2 中有任意一者发生，则事件 4 一定会发生。\n\n#### 数据范围与提示\n$1\\le D\\le 1000,$ $1\\le M\\le 10^5,$ $1\\le N,$ $X_i,$ $A_i,$ $B_i\\le D$.", "locale": "zh-CN"}}}
{"pid": "P5192", "type": "P", "difficulty": 6, "samples": [["2 3\n12 12 12\n3 18\n0 3 9\n1 3 9\n2 3 9\n3 18\n0 3 9\n1 3 9\n2 3 9", "36"], ["2 3\n12 12 12\n3 18\n0 3 9\n1 3 9\n2 3 9\n3 18\n0 3 9\n1 3 9\n2 3 9\n2 3\n12 12 12\n3 18\n0 3 9\n1 3 9\n2 3 9\n3 18\n0 3 9\n1 3 9\n2 3 9", "36\n\n36"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000]}, "tags": ["上下界网络流"], "title": "Shoot the Bullet | 东方文花帖", "background": "Translated by @chen_zhe\n\n幻想乡是一个被博丽大结界和虚幻与现实的境界所包围起来的一个美妙的地方。这里人和其他生物，例如妖怪、妖精等核平共处。\n\n射命丸文（Syameimaru Aya）是一只鸦天狗，拥有操纵风的能力，已经活了千岁以上，是《文文。新闻》的主编，拥有着一本叫做《文花帖》的手账，记录幻想乡各地的大新闻。她不仅是天狗中速度最快的鸦天狗，思考能力非常强，以别人的几倍的思考速度思考，也拥有幻想乡最高等级的力量。\n\n（译者内心 O.S.：远古的东方众都那么硬核科普的吗）\n\n![](https://i.loli.net/2019/01/12/5c3970b446151.png)", "description": "![](https://i.loli.net/2019/01/12/5c3971b885128.jpg)\n\n（附注：文花帖8-8 西行寺幽幽子 「死蝶浮月」）\n\n在接下来的 $n$ 天中，射命丸文将要拍摄幻想乡的少女的照片。并且要为第 $x$ 个少女拍摄至少 $G_x$ 张照片刊登在《文文。新闻》上。在第 $k$ 天的时候文文有 $C_k$ 位少女可以拍，且在这一天中对某个少女拍的照片数量 **必须** 在某个闭区间 $[L, R]$ 中。如果过少，文文就搞不出大新文；如果过多，就会有少女很安格瑞。\n\n除此之外，因为拍照设备的原因，对于第 $i$ 天，每天的拍照数量不能超过 $D_i$ 张。在满足这些限定的条件下，文文希望拍到的照片尽可能地多。\n\n由于文文需要去取材，因此她把这个任务交给了你，让你帮她去解决。", "inputFormat": "本题有不定组数据，保证数据组数不超过 $10$。\n\n第一行输入两个非负整数 $n$ 和 $m$，分别表示有 $n$ 天，有 $m$ 位少女。其中 $n \\leq 365$，$m \\leq 1000$。\n\n接下来一行，有 $m$ 个整数 $G_0, G_1, \\cdots, G_{m - 1}$。保证对于每一个 $G_x$，都满足 $G_x \\in [0,10^5]$。\n\n再接下来有 $n$ 段，第 $i$ 段的第一行有两个整数 $C _ i, D _ i\\ (1 \\leq C _ i \\leq 300,\\ 0 \\leq D _ i \\leq 30000)$。\n\n接下来有 $C _ i$ 行，每一行有三个非负整数 $T,L,R\\ (0 \\leq T < m,\\ 0 \\leq L \\leq R \\leq 100)$，其中 $T$ 指的是少女的编号。**同一天中输入的少女编号可能有重复，此时每个限制分别对应一次独立的拍摄，应当分别满足，互不影响。**", "outputFormat": "如果无法满足文文的需求，那么请输出 `-1`。\n\n否则请输出在满足需求的情况下，文文最多能拍多少张照片。\n\n注意每输出完一组数据之后，中间要空一行。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Shoot the Bullet | Touhou Bunkachou", "background": "Translated by @chen_zhe.\n\nGensokyo is a wonderful place surrounded by the Great Hakurei Barrier and the boundary between illusion and reality. Humans and other creatures, such as youkai and fairies, live together peacefully.\n\nSyameimaru Aya is a crow tengu who can control wind. She has lived for more than a thousand years. She is the editor-in-chief of *Bunbunmaru Newspaper* and owns a notebook called *Bunkachou*, which records major news from all around Gensokyo. She is not only the fastest crow tengu among the tengu, but also very good at thinking: she can think several times faster than others. She also possesses one of the highest levels of power in Gensokyo.\n\n(Translator's inner O.S.: Were the ancient Touhou fans doing such hardcore science popularization?)\n\n![](https://i.loli.net/2019/01/12/5c3970b446151.png)", "description": "![](https://i.loli.net/2019/01/12/5c3971b885128.jpg)\n\n(Note: Bunkachou 8-8, Saigyouji Yuyuko, \"Dead Butterfly Floating Moon\".)\n\nIn the next $n$ days, Syameimaru Aya is going to take photos of the girls in Gensokyo. She needs to take at least $G_x$ photos of the $x$-th girl to publish in *Bunbunmaru Newspaper*. On day $k$, there are $C_k$ girls available for her to photograph, and on that day, the number of photos taken of a certain girl **must** be within some closed interval $[L, R]$. If it is too few, Aya cannot make big news; if it is too many, some girls will get very angry.\n\nIn addition, due to the limitations of the camera equipment, on day $i$, the total number of photos taken that day cannot exceed $D_i$. Under all these constraints, Aya wants to take as many photos as possible.\n\nSince Aya needs to go gather materials, she hands this task to you and asks you to solve it for her.", "inputFormat": "This problem contains multiple test cases. It is guaranteed that the number of test cases does not exceed $10$.\n\nThe first line contains two non-negative integers $n$ and $m$, meaning there are $n$ days and $m$ girls. Here $n \\leq 365$ and $m \\leq 1000$.\n\nThe next line contains $m$ integers $G_0, G_1, \\cdots, G_{m - 1}$. It is guaranteed that for each $G_x$, we have $G_x \\in [0,10^5]$.\n\nThen follow $n$ blocks. In the $i$-th block, the first line contains two integers $C _ i, D _ i\\ (1 \\leq C _ i \\leq 300,\\ 0 \\leq D _ i \\leq 30000)$.\n\nThen there are $C _ i$ lines. Each line contains three non-negative integers $T,L,R\\ (0 \\leq T < m,\\ 0 \\leq L \\leq R \\leq 100)$, where $T$ is the index of the girl. **The girl indices given on the same day may repeat. In this case, each constraint corresponds to an independent photo shoot, and each must be satisfied separately without affecting the others.**", "outputFormat": "If Aya's requirements cannot be satisfied, output `-1`.\n\nOtherwise, output the maximum number of photos Aya can take while satisfying all requirements.\n\nNote that after outputting each test case, you must print a blank line.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Shoot the Bullet | 东方文花帖", "background": "Translated by @chen_zhe\n\n幻想乡是一个被博丽大结界和虚幻与现实的境界所包围起来的一个美妙的地方。这里人和其他生物，例如妖怪、妖精等核平共处。\n\n射命丸文（Syameimaru Aya）是一只鸦天狗，拥有操纵风的能力，已经活了千岁以上，是《文文。新闻》的主编，拥有着一本叫做《文花帖》的手账，记录幻想乡各地的大新闻。她不仅是天狗中速度最快的鸦天狗，思考能力非常强，以别人的几倍的思考速度思考，也拥有幻想乡最高等级的力量。\n\n（译者内心 O.S.：远古的东方众都那么硬核科普的吗）\n\n![](https://i.loli.net/2019/01/12/5c3970b446151.png)", "description": "![](https://i.loli.net/2019/01/12/5c3971b885128.jpg)\n\n（附注：文花帖8-8 西行寺幽幽子 「死蝶浮月」）\n\n在接下来的 $n$ 天中，射命丸文将要拍摄幻想乡的少女的照片。并且要为第 $x$ 个少女拍摄至少 $G_x$ 张照片刊登在《文文。新闻》上。在第 $k$ 天的时候文文有 $C_k$ 位少女可以拍，且在这一天中对某个少女拍的照片数量 **必须** 在某个闭区间 $[L, R]$ 中。如果过少，文文就搞不出大新文；如果过多，就会有少女很安格瑞。\n\n除此之外，因为拍照设备的原因，对于第 $i$ 天，每天的拍照数量不能超过 $D_i$ 张。在满足这些限定的条件下，文文希望拍到的照片尽可能地多。\n\n由于文文需要去取材，因此她把这个任务交给了你，让你帮她去解决。", "inputFormat": "本题有不定组数据，保证数据组数不超过 $10$。\n\n第一行输入两个非负整数 $n$ 和 $m$，分别表示有 $n$ 天，有 $m$ 位少女。其中 $n \\leq 365$，$m \\leq 1000$。\n\n接下来一行，有 $m$ 个整数 $G_0, G_1, \\cdots, G_{m - 1}$。保证对于每一个 $G_x$，都满足 $G_x \\in [0,10^5]$。\n\n再接下来有 $n$ 段，第 $i$ 段的第一行有两个整数 $C _ i, D _ i\\ (1 \\leq C _ i \\leq 300,\\ 0 \\leq D _ i \\leq 30000)$。\n\n接下来有 $C _ i$ 行，每一行有三个非负整数 $T,L,R\\ (0 \\leq T < m,\\ 0 \\leq L \\leq R \\leq 100)$，其中 $T$ 指的是少女的编号。**同一天中输入的少女编号可能有重复，此时每个限制分别对应一次独立的拍摄，应当分别满足，互不影响。**", "outputFormat": "如果无法满足文文的需求，那么请输出 `-1`。\n\n否则请输出在满足需求的情况下，文文最多能拍多少张照片。\n\n注意每输出完一组数据之后，中间要空一行。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5193", "type": "P", "difficulty": 6, "samples": [["3 2\n0 0\n0 2\n3 2", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2012", "各省省选", "天津"], "title": "[TJOI2012] 炸弹", "background": "", "description": "在平面上有 $n$ 个炸弹 $[1 \\ldots n]$，每个炸弹的爆炸范围是 $|x-x_i|+|y-y_i| \\leqslant R$，如果某个炸弹爆炸了，那么它将引燃它范围内的所有炸弹。\n\n求出至少引燃多少炸弹才能使得所有炸弹都爆炸。\n\n", "inputFormat": "第一行两个整数 $n,r$。\n\n接下来 $n$ 行，每行两个整数 $x_i,y_i$，炸弹的坐标。\n", "outputFormat": "输出一行一个整数 $k$，表示最少引燃的炸弹数。\n\n", "hint": "$30\\%$ 的数据，$1 \\leqslant n \\leqslant 1000$；\n\n$100\\%$ 的数据，$1 \\leqslant n \\leqslant 100000 \\,,\\, 0 \\leqslant r \\leqslant 10^9 \\,,\\, 0 \\leqslant x_i,y_i \\leqslant 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2012] Bombs", "background": "", "description": "There are $n$ bombs $[1 \\ldots n]$ on a plane. The explosion range of each bomb is $|x-x_i|+|y-y_i| \\leqslant R$. If a bomb explodes, it will ignite all bombs within its range.\n\nFind the minimum number of bombs that must be ignited at the beginning so that all bombs will eventually explode.", "inputFormat": "The first line contains two integers $n,r$.\n\nThe next $n$ lines each contain two integers $x_i,y_i$, the coordinates of a bomb.", "outputFormat": "Output one line with an integer $k$, the minimum number of bombs to ignite.", "hint": "For $30\\%$ of the testdata, $1 \\leqslant n \\leqslant 1000$.\n\nFor $100\\%$ of the testdata, $1 \\leqslant n \\leqslant 100000 \\,,\\, 0 \\leqslant r \\leqslant 10^9 \\,,\\, 0 \\leqslant x_i,y_i \\leqslant 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2012] 炸弹", "background": "", "description": "在平面上有 $n$ 个炸弹 $[1 \\ldots n]$，每个炸弹的爆炸范围是 $|x-x_i|+|y-y_i| \\leqslant R$，如果某个炸弹爆炸了，那么它将引燃它范围内的所有炸弹。\n\n求出至少引燃多少炸弹才能使得所有炸弹都爆炸。\n\n", "inputFormat": "第一行两个整数 $n,r$。\n\n接下来 $n$ 行，每行两个整数 $x_i,y_i$，炸弹的坐标。\n", "outputFormat": "输出一行一个整数 $k$，表示最少引燃的炸弹数。\n\n", "hint": "$30\\%$ 的数据，$1 \\leqslant n \\leqslant 1000$；\n\n$100\\%$ 的数据，$1 \\leqslant n \\leqslant 100000 \\,,\\, 0 \\leqslant r \\leqslant 10^9 \\,,\\, 0 \\leqslant x_i,y_i \\leqslant 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P5194", "type": "P", "difficulty": 3, "samples": [["3 15\n1\n10\n20\n", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2005", "USACO", "剪枝"], "title": "[USACO05DEC] Scales S", "background": "", "description": "约翰有一架用来称牛的体重的天平。与之配套的是 $ N \\ ( 1 \\leq N \\leq 1000 ) $ 个已知质量的砝码（所有砝码质量的数值都在 $32$ 位带符号整数范围内）。\n\n每次称牛时，他都把某头奶牛安置在天平的某一边，然后往天平另一边加砝码，直到天平平衡，于是此时砝码的总质量就是牛的质量（约翰不能把砝码放到奶牛的那边，因为奶牛不喜欢称体重，每当约翰把砝码放到她的蹄子底下，她就会尝试把砝码踢到约翰脸上）。\n\n天平能承受的物体的质量不是无限的，当天平某一边物体的质量大于 $ C \\ ( 1 \\leq C \\leq 2^{30} ) $ 时，天平就会被损坏。砝码按照它们质量的大小被排成一行。并且，这一行中从第 $3$ 个砝码开始，每个砝码的质量至少等于前面两个砝码（也就是质量比它小的砝码中质量最大的两个）的质量的和。\n\n约翰想知道，用他所拥有的这些砝码以及这架天平，能称出的质量最大是多少。由于天平的最大承重能力为 $C$，他不能把所有砝码都放到天平上。\n\n现在约翰告诉你每个砝码的质量，以及天平能承受的最大质量，你的任务是选出一些砝码，使它们的质量和在不压坏天平的前提下是所有组合中最大的。", "inputFormat": "第 $1$ 行输入两个用空格隔开的正整数 $ N $ 和 $ C $。\n\n第 $2$ 到 $ N+1 $ 行：每一行仅包含一个正整数，即某个砝码的质量。保证这些砝码的质量是一个不下降序列。", "outputFormat": "输出一个正整数，表示用所给的砝码能称出的不压坏天平的最大质量。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO05DEC] Scales S", "background": "", "description": "John has a scale for weighing cows. Along with it, he has $N \\ ( 1 \\leq N \\leq 1000 )$ weights with known masses (all weight values are within the range of 32-bit signed integers).\n\nEach time he weighs a cow, he puts the cow on one side of the scale, then adds weights to the other side until the scale balances. At that moment, the total mass of the weights is the cow’s mass (John cannot put weights on the cow’s side, because cows do not like being weighed. Whenever John puts a weight under her hooves, she will try to kick it into John’s face).\n\nThe scale cannot hold an unlimited mass. If the mass on either side of the scale exceeds $C \\ ( 1 \\leq C \\leq 2^{30} )$, the scale will be damaged. The weights are arranged in a line in non-decreasing order of mass. Also, starting from the 3rd weight, each weight’s mass is at least the sum of the masses of the two largest weights before it (that is, the two heaviest weights with smaller mass).\n\nJohn wants to know the maximum mass that can be weighed using the weights he has and this scale. Since the maximum load of the scale is $C$, he cannot put all weights on the scale.\n\nNow John tells you the mass of each weight and the maximum mass the scale can support. Your task is to choose some weights so that their total mass is as large as possible among all choices, without breaking the scale.", "inputFormat": "The 1st line contains two positive integers $N$ and $C$, separated by spaces.\n\nLines $2$ to $N+1$: each line contains one positive integer, the mass of a weight. It is guaranteed that these masses form a non-decreasing sequence.", "outputFormat": "Output one positive integer, the maximum mass that can be weighed without breaking the scale using the given weights.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO05DEC] Scales S", "background": "", "description": "约翰有一架用来称牛的体重的天平。与之配套的是 $ N \\ ( 1 \\leq N \\leq 1000 ) $ 个已知质量的砝码（所有砝码质量的数值都在 $32$ 位带符号整数范围内）。\n\n每次称牛时，他都把某头奶牛安置在天平的某一边，然后往天平另一边加砝码，直到天平平衡，于是此时砝码的总质量就是牛的质量（约翰不能把砝码放到奶牛的那边，因为奶牛不喜欢称体重，每当约翰把砝码放到她的蹄子底下，她就会尝试把砝码踢到约翰脸上）。\n\n天平能承受的物体的质量不是无限的，当天平某一边物体的质量大于 $ C \\ ( 1 \\leq C \\leq 2^{30} ) $ 时，天平就会被损坏。砝码按照它们质量的大小被排成一行。并且，这一行中从第 $3$ 个砝码开始，每个砝码的质量至少等于前面两个砝码（也就是质量比它小的砝码中质量最大的两个）的质量的和。\n\n约翰想知道，用他所拥有的这些砝码以及这架天平，能称出的质量最大是多少。由于天平的最大承重能力为 $C$，他不能把所有砝码都放到天平上。\n\n现在约翰告诉你每个砝码的质量，以及天平能承受的最大质量，你的任务是选出一些砝码，使它们的质量和在不压坏天平的前提下是所有组合中最大的。", "inputFormat": "第 $1$ 行输入两个用空格隔开的正整数 $ N $ 和 $ C $。\n\n第 $2$ 到 $ N+1 $ 行：每一行仅包含一个正整数，即某个砝码的质量。保证这些砝码的质量是一个不下降序列。", "outputFormat": "输出一个正整数，表示用所给的砝码能称出的不压坏天平的最大质量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5195", "type": "P", "difficulty": 4, "samples": [["8 4\n4 1 0 0 0 0 1 0\n0 0 0 1 0 1 0 0\n0 2 1 1 3 0 4 0\n0 0 0 4 1 1 1 0\n", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "USACO", "枚举", "广度优先搜索 BFS", "折半搜索 meet in the middle"], "title": "[USACO05DEC] Knights of Ni S", "background": "", "description": "贝茜遇到了一件很麻烦的事：她无意中闯入了森林里的一座城堡，如果她想回家，就必须穿过这片由骑士们守护着的森林。为了能安全地离开，贝茜不得不按照骑士们的要求，在森林寻找一种特殊的灌木并带一棵给他们。\n\n当然，贝茜想早点离开这可怕的森林，于是她必须尽快完成骑士们给的任务，贝茜随身带着这片森林的地图，地图上的森林被放入了直角坐标系，并按 $x,y $ 轴上的单位长度划分成了 $ W \\times H\\  ( 1 \\leq W,H \\leq 1000 )$ 块，贝茜在地图上查出了她自己以及骑士们所在的位置，当然地图上也标注了她所需要的灌木生长的区域。某些区域是不能通过的（比如说沼泽地，悬崖，以及食人兔的聚居地）。在没有找到灌木之前，贝茜不能通过骑士们所在的那个区域，为了确保她自己不会迷路，贝茜只向正北、正东、正南、正西四个方向移动（注意，她不会走对角线）。她要走整整一天，才能从某块区域走到与它相邻的那块区域。\n\n贝茜希望你能帮她计算一下，她最少需要多少天才可脱离这可怕的地方？输入数据保证贝茜一定能完成骑士的任务。", "inputFormat": "第一行输入 $2$ 个用空格隔开的整数，即题目中提到的 $ W,H $。\n\n接下来输入贝茜持有的地图，每一行用若干个数字代表地图上对应行的地形。第一行描述了地图最北的那一排土地；最后一行描述的则是最南面的。相邻的数字所对应的区域是相邻的。如果地图的宽小于或等于 $40$，那每一行数字恰好对应了地图上的一排土地。如果地图的宽大于 $40$，那每行只会给出 $40$ 个数字，并且保证除了最后一行的每一行都包含恰好 $40$ 个数字。没有哪一行描述的区域分布在两个不同的行里。\n\n地图上的数字所对应的地形：\n\n- $0$：贝茜可以通过的空地；\n- $1$：由于各种原因而不可通行的区域；\n- $2$：贝茜现在所在的位置； \n- $3$：骑士们的位置；\n- $4$：长着贝茜需要的灌木的土地。", "outputFormat": "输出一个正整数，即贝茜最少要花多少天才能完成骑士们给的任务。", "hint": "这片森林的长为 $8$，宽为 $4$．贝茜的起始位置在第 $3$ 行，离骑士们不远。\n\n贝茜可以按这样的路线完成骑士的任务：北，西，北，南，东，东，北，东，东，南，南。她在森林的西北角得到一株她需要的灌木，然后绕过障碍把它交给在东南方的骑士。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO05DEC] Knights of Ni S", "background": "", "description": "Bessie has run into a big problem: she accidentally entered a castle in the forest. If she wants to go home, she must pass through this forest guarded by knights. To leave safely, Bessie has to follow the knights’ request: find a special kind of bush in the forest and bring one back to them.\n\nOf course, Bessie wants to leave this scary forest as soon as possible, so she must finish the task as quickly as she can. Bessie carries a map of the forest. The forest on the map is placed in a Cartesian coordinate system and is divided by unit lengths on the $x, y$ axes into $W \\times H$ blocks $(1 \\leq W, H \\leq 1000)$. She has found on the map the positions of herself and the knights, and the map also marks the area where the needed bush grows. Some areas cannot be passed (for example, swamps, cliffs, and places where man-eating rabbits live). Before finding the bush, Bessie cannot pass through the block where the knights are located. To make sure she does not get lost, Bessie only moves in the four directions: due north, due east, due south, and due west (note that she does not move diagonally). It takes her exactly one day to move from one block to an adjacent block.\n\nBessie wants you to help her compute the minimum number of days she needs to escape from this terrible place. The input guarantees that Bessie can complete the knights’ task.", "inputFormat": "The first line contains $2$ integers separated by spaces, i.e., $W, H$ mentioned in the statement.\n\nNext comes the map Bessie holds. Each line uses several digits to represent the terrain of the corresponding row on the map. The first line describes the northernmost row of land; the last line describes the southernmost row. Areas corresponding to adjacent digits are adjacent blocks. If the width of the map is less than or equal to $40$, then each line of digits corresponds to exactly one row of the map. If the width is greater than $40$, then each line provides only $40$ digits, and it is guaranteed that every line except the last contains exactly $40$ digits. No row of the map is split across two different input lines.\n\nThe terrain represented by the digits on the map:\n\n- $0$: empty land that Bessie can pass through.\n- $1$: impassable area for various reasons.\n- $2$: Bessie’s current position.\n- $3$: the knights’ position.\n- $4$: land where the needed bush grows.", "outputFormat": "Output one positive integer, the minimum number of days Bessie must spend to complete the knights’ task.", "hint": "The forest has length $8$ and width $4$. Bessie’s starting position is on row $3$, not far from the knights.\n\nBessie can complete the task along this route: north, west, north, south, east, east, north, east, east, south, south. She gets the bush she needs in the northwest corner of the forest, then goes around obstacles and hands it to the knights in the southeast.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO05DEC] Knights of Ni S", "background": "", "description": "贝茜遇到了一件很麻烦的事：她无意中闯入了森林里的一座城堡，如果她想回家，就必须穿过这片由骑士们守护着的森林。为了能安全地离开，贝茜不得不按照骑士们的要求，在森林寻找一种特殊的灌木并带一棵给他们。\n\n当然，贝茜想早点离开这可怕的森林，于是她必须尽快完成骑士们给的任务，贝茜随身带着这片森林的地图，地图上的森林被放入了直角坐标系，并按 $x,y $ 轴上的单位长度划分成了 $ W \\times H\\  ( 1 \\leq W,H \\leq 1000 )$ 块，贝茜在地图上查出了她自己以及骑士们所在的位置，当然地图上也标注了她所需要的灌木生长的区域。某些区域是不能通过的（比如说沼泽地，悬崖，以及食人兔的聚居地）。在没有找到灌木之前，贝茜不能通过骑士们所在的那个区域，为了确保她自己不会迷路，贝茜只向正北、正东、正南、正西四个方向移动（注意，她不会走对角线）。她要走整整一天，才能从某块区域走到与它相邻的那块区域。\n\n贝茜希望你能帮她计算一下，她最少需要多少天才可脱离这可怕的地方？输入数据保证贝茜一定能完成骑士的任务。", "inputFormat": "第一行输入 $2$ 个用空格隔开的整数，即题目中提到的 $ W,H $。\n\n接下来输入贝茜持有的地图，每一行用若干个数字代表地图上对应行的地形。第一行描述了地图最北的那一排土地；最后一行描述的则是最南面的。相邻的数字所对应的区域是相邻的。如果地图的宽小于或等于 $40$，那每一行数字恰好对应了地图上的一排土地。如果地图的宽大于 $40$，那每行只会给出 $40$ 个数字，并且保证除了最后一行的每一行都包含恰好 $40$ 个数字。没有哪一行描述的区域分布在两个不同的行里。\n\n地图上的数字所对应的地形：\n\n- $0$：贝茜可以通过的空地；\n- $1$：由于各种原因而不可通行的区域；\n- $2$：贝茜现在所在的位置； \n- $3$：骑士们的位置；\n- $4$：长着贝茜需要的灌木的土地。", "outputFormat": "输出一个正整数，即贝茜最少要花多少天才能完成骑士们给的任务。", "hint": "这片森林的长为 $8$，宽为 $4$．贝茜的起始位置在第 $3$ 行，离骑士们不远。\n\n贝茜可以按这样的路线完成骑士的任务：北，西，北，南，东，东，北，东，东，南，南。她在森林的西北角得到一株她需要的灌木，然后绕过障碍把它交给在东南方的骑士。", "locale": "zh-CN"}}}
{"pid": "P5196", "type": "P", "difficulty": 4, "samples": [["3 3 10\n3 1\n4 1\n3 2\nA\nB\nA", "960"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数学", "2019", "USACO"], "title": "[USACO19JAN] Cow Poetry G", "background": "USACO19 年一月金组第一题", "description": "不为 Farmer John 所知的是，Bessie 还热衷于资助艺术创作！最近，她开始研究许多伟大的诗人们，而现在，她想要尝试创作一些属于自己的诗歌了。\nBessie 认识 $N$（$1 \\leq N \\leq 5000$）个单词，她想要将它们写进她的诗。Bessie 已经计算了她认识的每个单词的长度，以音节为单位，并且她将这些单词划分成了不同的“韵部”。每个单词仅与属于同一韵部的其他单词押韵。\n\nBessie 的每首诗由 $M$ 行组成（$1 \\leq M \\leq 10^5$），每一行必须由 $K$（$1 \\leq K \\leq 5000$）个音节构成。此外，Bessie 的诗必须遵循某个指定的押韵模式。\n\nBessie 想要知道她可以写出多少首符合限制条件的不同的诗。", "inputFormat": "输入的第一行包含 $N$、$M$ 和 $K$。\n\n以下 $N$ 行，每行包含两个整数 $s_i$（$1 \\leq s_i \\leq K$）和 $c_i$（$1 \\leq c_i \\leq N$）。这表示 Bessie 认识一个长度（以音节为单位）为 $s_i$、属于韵部 $c_i$ 的单词。\n\n最后 $M$ 行描述了 Bessie 想要的押韵模式，每行包含一个大写字母 $e_i$。所有押韵模式等于 $e_i$ 的行必须以同一韵部的单词结尾。不同 $e_i$ 值的行并非必须以不同的韵部的单词结尾。", "outputFormat": "输出 Bessie 可以写出的满足这些限制的不同的诗的数量。由于这个数字可能非常大，请计算这个数对 $1,000,000,007$ 取余的结果。", "hint": "在这个例子中，Bessie 认识三个单词。前两个单词押韵，长度分别为三个音节和四个音节，最后一个单词长度为三个音节，不与其他单词押韵。她想要写一首三行的诗，每行包含十个音节，并且第一行和最后一行押韵。共有 $960$ 首这样的诗。以下是一首满足要求的诗（其中 $1,2,3$ 分别代表第一个、第二个、第三个单词）：$\\text{121 123 321}$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19JAN] Cow Poetry G", "background": "USACO January 2019 Gold, Problem 1.", "description": "Unknown to Farmer John, Bessie is also enthusiastic about sponsoring artistic creation. Recently, she started studying many great poets, and now she wants to try writing some poems of her own.\n\nBessie knows $N$ words ($1 \\leq N \\leq 5000$) and wants to use them in her poems. She has computed the length of each word she knows in syllables, and she has also divided these words into different \"rhyme classes\". Each word rhymes only with other words in the same rhyme class.\n\nEach poem Bessie writes has $M$ lines ($1 \\leq M \\leq 10^5$). Each line must consist of exactly $K$ syllables ($1 \\leq K \\leq 5000$). In addition, Bessie's poem must follow a specified rhyme scheme.\n\nBessie wants to know how many different poems she can write that satisfy these constraints.", "inputFormat": "The first line contains $N$, $M$, and $K$.\n\nThe next $N$ lines each contain two integers $s_i$ ($1 \\leq s_i \\leq K$) and $c_i$ ($1 \\leq c_i \\leq N$). This indicates a word that Bessie knows with length $s_i$ (in syllables) and rhyme class $c_i$.\n\nThe last $M$ lines describe the rhyme scheme Bessie wants, each containing an uppercase letter $e_i$. All lines whose rhyme scheme letter equals $e_i$ must end with a word from the same rhyme class. Lines with different $e_i$ values are not required to end with words from different rhyme classes.", "outputFormat": "Output the number of different poems Bessie can write that satisfy these constraints. Since this number may be very large, output it modulo $1,000,000,007$.", "hint": "In this example, Bessie knows three words. The first two words rhyme and have lengths of three and four syllables, respectively. The last word has length three syllables and does not rhyme with any other word. She wants to write a three-line poem, where each line has ten syllables, and the first and last lines rhyme. There are $960$ such poems. One valid poem is (where $1,2,3$ represent the first, second, and third words): $\\text{121 123 321}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19JAN] Cow Poetry G", "background": "USACO19 年一月金组第一题", "description": "不为 Farmer John 所知的是，Bessie 还热衷于资助艺术创作！最近，她开始研究许多伟大的诗人们，而现在，她想要尝试创作一些属于自己的诗歌了。\nBessie 认识 $N$（$1 \\leq N \\leq 5000$）个单词，她想要将它们写进她的诗。Bessie 已经计算了她认识的每个单词的长度，以音节为单位，并且她将这些单词划分成了不同的“韵部”。每个单词仅与属于同一韵部的其他单词押韵。\n\nBessie 的每首诗由 $M$ 行组成（$1 \\leq M \\leq 10^5$），每一行必须由 $K$（$1 \\leq K \\leq 5000$）个音节构成。此外，Bessie 的诗必须遵循某个指定的押韵模式。\n\nBessie 想要知道她可以写出多少首符合限制条件的不同的诗。", "inputFormat": "输入的第一行包含 $N$、$M$ 和 $K$。\n\n以下 $N$ 行，每行包含两个整数 $s_i$（$1 \\leq s_i \\leq K$）和 $c_i$（$1 \\leq c_i \\leq N$）。这表示 Bessie 认识一个长度（以音节为单位）为 $s_i$、属于韵部 $c_i$ 的单词。\n\n最后 $M$ 行描述了 Bessie 想要的押韵模式，每行包含一个大写字母 $e_i$。所有押韵模式等于 $e_i$ 的行必须以同一韵部的单词结尾。不同 $e_i$ 值的行并非必须以不同的韵部的单词结尾。", "outputFormat": "输出 Bessie 可以写出的满足这些限制的不同的诗的数量。由于这个数字可能非常大，请计算这个数对 $1,000,000,007$ 取余的结果。", "hint": "在这个例子中，Bessie 认识三个单词。前两个单词押韵，长度分别为三个音节和四个音节，最后一个单词长度为三个音节，不与其他单词押韵。她想要写一首三行的诗，每行包含十个音节，并且第一行和最后一行押韵。共有 $960$ 首这样的诗。以下是一首满足要求的诗（其中 $1,2,3$ 分别代表第一个、第二个、第三个单词）：$\\text{121 123 321}$。", "locale": "zh-CN"}}}
{"pid": "P5197", "type": "P", "difficulty": 3, "samples": [["4\n1 2\n4 3\n2 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2019", "USACO"], "title": "[USACO19JAN] Grass Planting S", "background": "USACO 一月月赛银组第一题", "description": "到了一年中 Farmer John 在他的草地里种草的时间了。整个农场由 $N$ 块草地组成（$1 \\leq N \\leq 10^5$），方便起见编号为 $1 \\ldots N$，由 $N-1$ 条双向的小路连接，每块草地都可以经过一些小路到达其他所有的草地。\nFarmer John 当然可以在每块草地里种不同种类的草，但是他想要使得使用的草的种类数最小，因为他用的草的种类数越多，他就需要负担更高的花费。\n\n不幸的是，他的奶牛们对选择农场上的草表现得十分苛刻。如果两块相邻（由一条小路直接相连）的草地种了同一种草，或者即使是两块接近相邻（均可由一条小路直接连向同一块草地）的草地，那么奶牛们就会抱怨她们进餐的选择不够多样。Farmer John 能做的只能是抱怨这些奶牛，因为他知道她们不能被满足的时候会制造多大的麻烦。\n\n请帮助 Farmer John 求出他的整个农场所需要的最少的草的种类数。", "inputFormat": "输入的第一行包含 $N$。以下 $N-1$ 行每行描述了一条小路连接的两块草地。", "outputFormat": "输出 Farmer John 需要使用的最少的草的种类数。", "hint": "在这个简单的例子中，4 块草地以一条直线的形式相连。最少需要三种草。例如，Farmer John 可以用草 $A,B,C$ 将草地按 $A - B - C - A$ 的方式播种。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19JAN] Grass Planting S", "background": "USACO January Contest Silver Problem 1.", "description": "It is the time of year when Farmer John plants grass in his fields. The entire farm consists of $N$ fields ($1 \\leq N \\leq 10^5$), conveniently labeled $1 \\ldots N$, connected by $N-1$ bidirectional paths. From any field, it is possible to reach every other field by traveling along some paths.\n\nFarmer John could of course plant different types of grass in each field, but he wants to minimize the number of grass types used, because the more types he uses, the higher the cost he must pay.\n\nUnfortunately, his cows are very picky about the grass choices on the farm. If two adjacent fields (directly connected by a path) are planted with the same type of grass, or even if two nearly adjacent fields (both directly connected by a path to the same field) are planted with the same type of grass, then the cows will complain that their dining choices are not diverse enough. Farmer John can only complain about these cows, because he knows how much trouble they can cause when they are not satisfied.\n\nPlease help Farmer John find the minimum number of grass types needed for the entire farm.", "inputFormat": "The first line contains $N$. The following $N-1$ lines each describe a path connecting two fields.", "outputFormat": "Output the minimum number of grass types Farmer John needs to use.", "hint": "In this simple example, 4 fields are connected in a straight line. The minimum number of grass types needed is 3. For example, Farmer John can use grass $A,B,C$ to plant the fields as $A - B - C - A$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19JAN] Grass Planting S", "background": "USACO 一月月赛银组第一题", "description": "到了一年中 Farmer John 在他的草地里种草的时间了。整个农场由 $N$ 块草地组成（$1 \\leq N \\leq 10^5$），方便起见编号为 $1 \\ldots N$，由 $N-1$ 条双向的小路连接，每块草地都可以经过一些小路到达其他所有的草地。\nFarmer John 当然可以在每块草地里种不同种类的草，但是他想要使得使用的草的种类数最小，因为他用的草的种类数越多，他就需要负担更高的花费。\n\n不幸的是，他的奶牛们对选择农场上的草表现得十分苛刻。如果两块相邻（由一条小路直接相连）的草地种了同一种草，或者即使是两块接近相邻（均可由一条小路直接连向同一块草地）的草地，那么奶牛们就会抱怨她们进餐的选择不够多样。Farmer John 能做的只能是抱怨这些奶牛，因为他知道她们不能被满足的时候会制造多大的麻烦。\n\n请帮助 Farmer John 求出他的整个农场所需要的最少的草的种类数。", "inputFormat": "输入的第一行包含 $N$。以下 $N-1$ 行每行描述了一条小路连接的两块草地。", "outputFormat": "输出 Farmer John 需要使用的最少的草的种类数。", "hint": "在这个简单的例子中，4 块草地以一条直线的形式相连。最少需要三种草。例如，Farmer John 可以用草 $A,B,C$ 将草地按 $A - B - C - A$ 的方式播种。", "locale": "zh-CN"}}}
{"pid": "P5198", "type": "P", "difficulty": 3, "samples": [["6\n##....\n....#.\n.#..#.\n.#####\n...###\n....##", "13 22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2019", "USACO", "深度优先搜索 DFS"], "title": "[USACO19JAN] Icy Perimeter S", "background": "USACO 一月月赛银组第二题", "description": "Farmer John 要开始他的冰激凌生意了！他制造了一台可以生产冰激凌球的机器，然而不幸的是形状不太规则，所以他现在希望优化一下这台机器，使其产出的冰激凌球的形状更加合理。\n机器生产出的冰激凌的形状可以用一个 $N \\times N$（$1 \\leq N \\leq 1000$）的矩形图案表示，例如：\n\n```\n##....\n....#.\n.#..#.\n.#####\n...###\n....##\n```\n\n每个 `.` 字符表示空的区域，每个 `#` 字符表示一块 $1 \\times 1$ 的正方形格子大小的冰激凌。\n\n不幸的是，机器当前工作得并不是很正常，可能会生产出多个互不相连的冰激凌球（上图中有两个）。一个冰激凌球是连通的，如果其中每个冰激凌的正方形格子都可以从这个冰激凌球中其他所有的冰激凌格子出发重复地前往东、南、西、北四个方向上相邻的冰激凌格子所到达。\n\nFarmer John 想要求出他的面积最大的冰激凌球的面积和周长。冰激凌球的面积就是这个冰激凌球中 `#` 的数量。如果有多个冰激凌球并列面积最大，他想要知道其中周长最小的冰激凌球的周长。在上图中，小的冰激凌球的面积为 $2$，周长为 $6$，大的冰激凌球的面积为 $13$，周长为 $22$。\n\n注意一个冰激凌球可能在中间有“洞”（由冰激凌包围着的空的区域）。如果这样，洞的边界同样计入冰激凌球的周长。冰激凌球也可能出现在被其他冰激凌球包围的区域内，在这种情况下它们计为不同的冰激凌球。例如，以下这种情况包括一个面积为 $1$ 的冰激凌球，被包围在一个面积为 $16$ 的冰激凌球内：\n\n```\n#####\n#...#\n#.#.#\n#...#\n#####\n```\n\n同时求得冰激凌球的面积和周长十分重要，因为 Farmer John 最终想要最小化周长与面积的比值，他称这是他的冰激凌的“冰周率”。当这个比率较小的时候，冰激凌化得比较慢，因为此时冰激凌单位质量的表面积较小。\n", "inputFormat": "输入的第一行包含 $N$，以下 $N$ 行描述了机器的生产结果。其中至少出现一个 `#` 字符。", "outputFormat": "输出一行，包含两个空格分隔的整数，第一个数为最大的冰激凌球的面积，第二个数为它的周长。如果多个冰激凌球并列面积最大，输出其中周长最小的那一个的信息。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19JAN] Icy Perimeter S", "background": "The second Silver problem of the USACO January contest.", "description": "Farmer John is going to start his ice cream business. He built a machine that produces scoops of ice cream, but unfortunately their shapes are not very regular. He now wants to improve the machine so that the ice cream scoops it produces have more reasonable shapes.\n\nThe shape of the ice cream produced by the machine can be represented by an $N \\times N$ ($1 \\leq N \\leq 1000$) grid pattern, for example:\n\n```\n##....\n....#.\n.#..#.\n.#####\n...###\n....##\n```\n\nEach `.` character represents an empty area, and each `#` character represents a $1 \\times 1$ square cell of ice cream.\n\nUnfortunately, the machine may produce several ice cream scoops that are not connected to each other (there are two in the picture above). An ice cream scoop is connected if every ice cream square cell in it can be reached from any other ice cream cell in the same scoop by repeatedly moving to an adjacent ice cream cell to the east, south, west, or north.\n\nFarmer John wants to find the area and perimeter of the ice cream scoop with the largest area. The area of a scoop is the number of `#` cells in it. If multiple scoops are tied for the largest area, he wants the perimeter of the one with the smallest perimeter among them. In the picture above, the smaller scoop has area $2$ and perimeter $6$, and the larger scoop has area $13$ and perimeter $22$.\n\nNote that a scoop may have “holes” in the middle (empty regions surrounded by ice cream). In that case, the boundary of the holes is also counted in the scoop’s perimeter. A scoop may also appear inside a region surrounded by another scoop; in this case, they are considered different scoops. For example, the following case contains a scoop of area $1$, surrounded by a scoop of area $16$:\n\n```\n#####\n#...#\n#.#.#\n#...#\n#####\n```\n\nIt is important to compute both the area and the perimeter of a scoop, because Farmer John ultimately wants to minimize the ratio of perimeter to area, which he calls the “ice peri rate”. When this ratio is smaller, the ice cream melts more slowly, because the surface area per unit mass is smaller.", "inputFormat": "The first line contains $N$. The next $N$ lines describe the machine’s output. There is at least one `#` character.", "outputFormat": "Output one line containing two integers separated by a space: the first is the maximum scoop area, and the second is its perimeter. If multiple scoops are tied for the maximum area, output the one with the smallest perimeter.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19JAN] Icy Perimeter S", "background": "USACO 一月月赛银组第二题", "description": "Farmer John 要开始他的冰激凌生意了！他制造了一台可以生产冰激凌球的机器，然而不幸的是形状不太规则，所以他现在希望优化一下这台机器，使其产出的冰激凌球的形状更加合理。\n机器生产出的冰激凌的形状可以用一个 $N \\times N$（$1 \\leq N \\leq 1000$）的矩形图案表示，例如：\n\n```\n##....\n....#.\n.#..#.\n.#####\n...###\n....##\n```\n\n每个 `.` 字符表示空的区域，每个 `#` 字符表示一块 $1 \\times 1$ 的正方形格子大小的冰激凌。\n\n不幸的是，机器当前工作得并不是很正常，可能会生产出多个互不相连的冰激凌球（上图中有两个）。一个冰激凌球是连通的，如果其中每个冰激凌的正方形格子都可以从这个冰激凌球中其他所有的冰激凌格子出发重复地前往东、南、西、北四个方向上相邻的冰激凌格子所到达。\n\nFarmer John 想要求出他的面积最大的冰激凌球的面积和周长。冰激凌球的面积就是这个冰激凌球中 `#` 的数量。如果有多个冰激凌球并列面积最大，他想要知道其中周长最小的冰激凌球的周长。在上图中，小的冰激凌球的面积为 $2$，周长为 $6$，大的冰激凌球的面积为 $13$，周长为 $22$。\n\n注意一个冰激凌球可能在中间有“洞”（由冰激凌包围着的空的区域）。如果这样，洞的边界同样计入冰激凌球的周长。冰激凌球也可能出现在被其他冰激凌球包围的区域内，在这种情况下它们计为不同的冰激凌球。例如，以下这种情况包括一个面积为 $1$ 的冰激凌球，被包围在一个面积为 $16$ 的冰激凌球内：\n\n```\n#####\n#...#\n#.#.#\n#...#\n#####\n```\n\n同时求得冰激凌球的面积和周长十分重要，因为 Farmer John 最终想要最小化周长与面积的比值，他称这是他的冰激凌的“冰周率”。当这个比率较小的时候，冰激凌化得比较慢，因为此时冰激凌单位质量的表面积较小。\n", "inputFormat": "输入的第一行包含 $N$，以下 $N$ 行描述了机器的生产结果。其中至少出现一个 `#` 字符。", "outputFormat": "输出一行，包含两个空格分隔的整数，第一个数为最大的冰激凌球的面积，第二个数为它的周长。如果多个冰激凌球并列面积最大，输出其中周长最小的那一个的信息。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5199", "type": "P", "difficulty": 3, "samples": [["3\n4 6\n7 2\n2 5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2019", "USACO", "排序"], "title": "[USACO19JAN] Mountain View S", "background": "USACO 2019 年一月月赛银组第三题", "description": "从农场里奶牛 Bessie 的牧草地向远端眺望，可以看到巍峨壮丽的山脉绵延在地平线上。山脉里由 $N$ 座山峰（$1≤N≤10^5$）。如果我们把 Bessie 的视野想象成 $xy$ 平面，那么每座山峰都是一个底边在 $x$ 轴上的三角形。山峰的两腰均与底边成 $45$ 度角，所以山峰的峰顶是一个直角。于是山峰 $i$ 可以由它的峰顶坐标 $(x_i,y_i)$ 精确描述。没有两座山峰有完全相同的峰顶坐标。\n\nBessie 尝试数清所有的山峰，然而由于它们几乎是相同的颜色，所以如果一座山峰的峰顶在另一座山峰的三角形区域的边界上或是内部，她就无法看清。\n\n请求出 Bessie 能够看见的不同的山峰的峰顶的数量，也就是山峰的数量。", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行每行包含 $x_i$（$0\\le x_i\\le 10^9$）和$y_i$（$1\\le y_i\\le 10^9$），描述一座山峰的峰顶的坐标。", "outputFormat": "输出 Bessie 能够分辨出的山峰的数量。", "hint": "在这个例子中，Bessie 能够看见第一座和最后一座山峰。第二座山峰被第一座山峰掩盖了。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19JAN] Mountain View S", "background": "USACO January 2019 Contest, Silver Problem 3.", "description": "Looking into the distance from the pasture of the cow Bessie, she can see a magnificent mountain range stretching along the horizon. The range contains $N$ mountain peaks ($1 \\le N \\le 10^5$). If we imagine Bessie’s view as the $xy$-plane, then each mountain is a triangle whose base lies on the $x$-axis. Both sides of the triangle make a $45$ degree angle with the base, so the вершина (pinnacle, \"fengding\") is a right angle. Therefore, mountain $i$ can be described exactly by the coordinates of its peak $(x_i, y_i)$. No two mountains have exactly the same peak coordinates.\n\nBessie tries to count all the mountains. However, because they are almost the same color, if the peak of one mountain lies on the boundary or inside the triangular region of another mountain, she cannot distinguish it.\n\nFind the number of distinct mountain peaks that Bessie can see, i.e. the number of visible mountains.", "inputFormat": "The first line contains $N$. The next $N$ lines each contain $x_i$ ($0 \\le x_i \\le 10^9$) and $y_i$ ($1 \\le y_i \\le 10^9$), describing the coordinates of a mountain’s peak.", "outputFormat": "Output the number of mountains that Bessie can distinguish.", "hint": "In this example, Bessie can see the first and the last mountains. The second mountain is covered by the first mountain.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19JAN] Mountain View S", "background": "USACO 2019 年一月月赛银组第三题", "description": "从农场里奶牛 Bessie 的牧草地向远端眺望，可以看到巍峨壮丽的山脉绵延在地平线上。山脉里由 $N$ 座山峰（$1≤N≤10^5$）。如果我们把 Bessie 的视野想象成 $xy$ 平面，那么每座山峰都是一个底边在 $x$ 轴上的三角形。山峰的两腰均与底边成 $45$ 度角，所以山峰的峰顶是一个直角。于是山峰 $i$ 可以由它的峰顶坐标 $(x_i,y_i)$ 精确描述。没有两座山峰有完全相同的峰顶坐标。\n\nBessie 尝试数清所有的山峰，然而由于它们几乎是相同的颜色，所以如果一座山峰的峰顶在另一座山峰的三角形区域的边界上或是内部，她就无法看清。\n\n请求出 Bessie 能够看见的不同的山峰的峰顶的数量，也就是山峰的数量。", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行每行包含 $x_i$（$0\\le x_i\\le 10^9$）和$y_i$（$1\\le y_i\\le 10^9$），描述一座山峰的峰顶的坐标。", "outputFormat": "输出 Bessie 能够分辨出的山峰的数量。", "hint": "在这个例子中，Bessie 能够看见第一座和最后一座山峰。第二座山峰被第一座山峰掩盖了。", "locale": "zh-CN"}}}
{"pid": "P5200", "type": "P", "difficulty": 4, "samples": [["4\n1 2 4 3", "3\n2 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2019", "USACO", "树状数组"], "title": "[USACO19JAN] Sleepy Cow Sorting G", "background": "USACO 19年一月月赛金组第二题", "description": "Farmer John正在尝试将他的 $N$ 头奶牛（$1\\le N\\le 10^5$），方便起见编号为 $1\\ldots N$，在她们前往牧草地吃早餐之前排好顺序。\n\n当前，这些奶牛以 $p_1,p_2,p_3,\\ldots,p_N$ 的顺序排成一行，Farmer John站在奶牛 $p_1$ 前面。他想要重新排列这些奶牛，使得她们的顺序变为 $1,2,3,\\ldots,N$，奶牛 $1$ 在 Farmer John 旁边。\n\n今天奶牛们有些困倦，所以任何时刻都只有直接面向 Farmer John 的奶牛会注意听 Farmer John 的指令。每一次他可以命令这头奶牛沿着队伍向后移动 $k$ 步，$k$ 可以是 $1$ 到 $N−1$ 之间的任意数。她经过的 $k$ 头奶牛会向前移动，腾出空间使得她能够插入到队伍中这些奶牛之后的位置。\n\n例如，假设 $N=4$，奶牛们开始时是这样的顺序：\n\n```plain\n FJ: 4 3 2 1\n```\n\n唯一注意 FJ 指令的奶牛是奶牛 $4$。当他命令她向队伍后移动 $2$ 步之后，队伍的顺序会变成：\n\n```plain\n FJ: 3 2 4 1 \n```\n\n现在唯一注意 FJ 指令的奶牛是奶牛 $3$，所以第二次他可以给奶牛 $3$ 下命令，如此进行直到奶牛们排好了顺序。\n\nFarmer John 急欲完成排序，这样他就可以回到他的农舍里享用他自己的早餐了。请帮助他求出一个操作序列，使得能够用最少的操作次数将奶牛们排好顺序。", "inputFormat": "输入的第一行包含 $N$。第二行包含 $N$ 个空格分隔的整数：$p_1,p_2,p_3,\\ldots,p_N$，表示奶牛们的起始顺序。", "outputFormat": "输出的第一行包含一个整数 $K$，为将奶牛们排好顺序所需的最小操作次数。\n\n第二行包含 $K$ 个空格分隔的整数，$c_1,c_2,\\ldots,c_K$，每个数均在 $1\\ldots N−1$ 之间。如果第 $i$ 次操作 FJ 命令面向他的奶牛向队伍后移动 $c_i$ 步，那么 $K$ 次操作过后奶牛们应该排好了顺序。\n\n如果存在多种最优的操作序列，你的程序可以输出其中任何一种（不过实际上是唯一解）。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19JAN] Sleepy Cow Sorting G", "background": "USACO January 2019 contest, Gold Group, Problem 2.", "description": "Farmer John is trying to line up his $N$ cows ($1\\le N\\le 10^5$), numbered $1\\ldots N$ for convenience, before they head to the pasture for breakfast.\n\nCurrently, the cows are standing in a line in the order $p_1,p_2,p_3,\\ldots,p_N$, and Farmer John is standing in front of cow $p_1$. He wants to rearrange the cows so that their order becomes $1,2,3,\\ldots,N$, with cow $1$ next to Farmer John.\n\nToday the cows are a bit sleepy, so at any time, only the cow directly facing Farmer John will pay attention to his commands. In one operation, he can command this cow to move back along the line by $k$ steps, where $k$ can be any number from $1$ to $N-1$. The $k$ cows she passes will move forward to make space, allowing her to be inserted right behind those $k$ cows in the line.\n\nFor example, suppose $N=4$, and the cows start in the following order:\n\n```plain\n FJ: 4 3 2 1\n```\n\nThe only cow paying attention to FJ is cow $4$. After he commands her to move back $2$ steps, the line becomes:\n\n```plain\n FJ: 3 2 4 1 \n```\n\nNow the only cow paying attention to FJ is cow $3$, so in the second operation he can give a command to cow $3$, and so on, until the cows are sorted.\n\nFarmer John is eager to finish sorting so he can go back to his farmhouse and enjoy his own breakfast. Please help him find a sequence of operations that sorts the cows using the minimum number of operations.", "inputFormat": "The first line contains $N$.  \nThe second line contains $N$ space-separated integers: $p_1,p_2,p_3,\\ldots,p_N$, describing the cows' initial order.", "outputFormat": "The first line contains an integer $K$, the minimum number of operations needed to sort the cows.\n\nThe second line contains $K$ space-separated integers $c_1,c_2,\\ldots,c_K$, each in the range $1\\ldots N-1$. If in the $i$-th operation, FJ commands the cow facing him to move back $c_i$ steps, then after $K$ operations the cows should be sorted.\n\nIf there are multiple optimal sequences of operations, your program may output any one of them (though in practice, the solution is unique).", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19JAN] Sleepy Cow Sorting G", "background": "USACO 19年一月月赛金组第二题", "description": "Farmer John正在尝试将他的 $N$ 头奶牛（$1\\le N\\le 10^5$），方便起见编号为 $1\\ldots N$，在她们前往牧草地吃早餐之前排好顺序。\n\n当前，这些奶牛以 $p_1,p_2,p_3,\\ldots,p_N$ 的顺序排成一行，Farmer John站在奶牛 $p_1$ 前面。他想要重新排列这些奶牛，使得她们的顺序变为 $1,2,3,\\ldots,N$，奶牛 $1$ 在 Farmer John 旁边。\n\n今天奶牛们有些困倦，所以任何时刻都只有直接面向 Farmer John 的奶牛会注意听 Farmer John 的指令。每一次他可以命令这头奶牛沿着队伍向后移动 $k$ 步，$k$ 可以是 $1$ 到 $N−1$ 之间的任意数。她经过的 $k$ 头奶牛会向前移动，腾出空间使得她能够插入到队伍中这些奶牛之后的位置。\n\n例如，假设 $N=4$，奶牛们开始时是这样的顺序：\n\n```plain\n FJ: 4 3 2 1\n```\n\n唯一注意 FJ 指令的奶牛是奶牛 $4$。当他命令她向队伍后移动 $2$ 步之后，队伍的顺序会变成：\n\n```plain\n FJ: 3 2 4 1 \n```\n\n现在唯一注意 FJ 指令的奶牛是奶牛 $3$，所以第二次他可以给奶牛 $3$ 下命令，如此进行直到奶牛们排好了顺序。\n\nFarmer John 急欲完成排序，这样他就可以回到他的农舍里享用他自己的早餐了。请帮助他求出一个操作序列，使得能够用最少的操作次数将奶牛们排好顺序。", "inputFormat": "输入的第一行包含 $N$。第二行包含 $N$ 个空格分隔的整数：$p_1,p_2,p_3,\\ldots,p_N$，表示奶牛们的起始顺序。", "outputFormat": "输出的第一行包含一个整数 $K$，为将奶牛们排好顺序所需的最小操作次数。\n\n第二行包含 $K$ 个空格分隔的整数，$c_1,c_2,\\ldots,c_K$，每个数均在 $1\\ldots N−1$ 之间。如果第 $i$ 次操作 FJ 命令面向他的奶牛向队伍后移动 $c_i$ 步，那么 $K$ 次操作过后奶牛们应该排好了顺序。\n\n如果存在多种最优的操作序列，你的程序可以输出其中任何一种（不过实际上是唯一解）。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5201", "type": "P", "difficulty": 4, "samples": [["5 6 2\n1 2 3 4 5\n1 2 5\n1 3 3\n2 4 3\n3 4 5\n4 5 2\n3 5 7", "40"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2019", "USACO", "最短路"], "title": "[USACO19JAN] Shortcut G", "background": "USACO 19 年一月月赛金组第三题", "description": "每天晚上，Farmer John 都会敲响一个巨大的铃铛，召唤他的奶牛们前来牛棚享用晚餐。奶牛们都急切地想要前往牛棚，所以她们都会沿着最短的路径行走。\n农场可以描述为 $N$ 块草地（$1 \\leq N \\leq 10,000$），方便起见编号为 $1 \\ldots N$，牛棚位于草地 $1$。草地之间由 $M$ 条双向的小路连接（$N-1 \\leq M \\leq 50,000$）。每条小路有其通过时间，从每块草地出发都存在一条由一些小路组成的路径可以到达牛棚。\n\n草地 $i$ 中有 $c_i$ 头奶牛。当她们听到晚餐铃时，这些奶牛都沿着一条消耗最少时间的路径前往牛棚。如果有多条路径并列消耗时间最少，奶牛们会选择其中“字典序”最小的路径（也就是说，她们通过在两条路径第一次出现分支的位置优先选择经过编号较小的草地的方式来打破并列关系，所以经过草地 $7$、$3$、$6$、$1$ 的路径会优先于经过 $7$、$5$、$1$ 的路径，如果它们所消耗的时间相同）。\n\nFarmer John 担心牛棚距离某些草地太远。他计算了每头奶牛路上的时间，将所有奶牛消耗的时间相加，称这个和为总移动时间。他想要通过额外添加一条从牛棚（草地 $1$）连接到某块他选择的其他草地的、通过时间为 $T$（$1 \\leq T \\leq 10,000$）的“近道”来尽可能地减少总移动时间。当一头奶牛在她平时前往牛棚的路上偶然看见这条近道时，如果这条近道能够使她更快地到达牛棚，她就会走这条路。否则，一头奶牛会仍然沿着原来的路径行走，即使使用这条近道可能会减少她的移动时间。\n\n请帮助 Farmer John 求出通过添加一条近道能够达到的总移动时间减少量的最大值。\n", "inputFormat": "输入的第一行包含 $N$、$M$ 和 $T$。以下 $N$ 行包含 $c_1 \\ldots c_N$，均为 $0 \\ldots 10,000$ 范围内的整数。以下 $M$ 行，每行由三个整数 $a$、$b$ 和 $t$ 描述了一条小路，这条小路连接了草地 $a$ 和 $b$，通过时间为 $t$。所有的通过时间在 $1 \\ldots 25,000$ 范围内。", "outputFormat": "输出 Farmer John 可以达到的总移动时间的最大减少量。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19JAN] Shortcut G", "background": "The third Gold problem of the USACO January 2019 contest.", "description": "Every evening, Farmer John rings a huge bell to call his cows to the barn for dinner. The cows are eager to get to the barn, so they all travel along the shortest path.\n\nThe farm can be described as $N$ fields ($1 \\leq N \\leq 10,000$), numbered $1 \\ldots N$ for convenience, and the barn is located at field $1$. The fields are connected by $M$ bidirectional paths ($N-1 \\leq M \\leq 50,000$). Each path has a travel time, and from every field there exists a route (made of some paths) that can reach the barn.\n\nField $i$ has $c_i$ cows. When they hear the dinner bell, these cows all head to the barn along a path with the minimum total travel time. If multiple paths tie for the minimum total time, the cows choose the lexicographically smallest path (that is, they break ties by, at the first point where the two paths diverge, preferring the one that goes through the smaller-numbered field. So the path through fields $7$, $3$, $6$, $1$ is preferred over the path through $7$, $5$, $1$ if they take the same amount of time).\n\nFarmer John worries that the barn is too far from some fields. He computes the travel time for each cow and sums them up, calling this sum the total travel time. He wants to reduce the total travel time as much as possible by adding one extra “shortcut”: a path from the barn (field $1$) to some other field of his choice, with travel time $T$ ($1 \\leq T \\leq 10,000$). When a cow happens to see this shortcut while traveling to the barn along her usual route, if taking the shortcut would allow her to reach the barn faster, she will take it. Otherwise, she will still follow the original route, even if using the shortcut might reduce her travel time.\n\nHelp Farmer John find the maximum possible reduction in total travel time that can be achieved by adding one shortcut.", "inputFormat": "The first line contains $N$, $M$, and $T$. The next $N$ lines contain $c_1 \\ldots c_N$, each an integer in the range $0 \\ldots 10,000$. The next $M$ lines each contain three integers $a$, $b$, and $t$, describing a path connecting fields $a$ and $b with travel time $t$. All travel times are in the range $1 \\ldots 25,000$.", "outputFormat": "Output the maximum reduction in total travel time that Farmer John can achieve.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19JAN] Shortcut G", "background": "USACO 19 年一月月赛金组第三题", "description": "每天晚上，Farmer John 都会敲响一个巨大的铃铛，召唤他的奶牛们前来牛棚享用晚餐。奶牛们都急切地想要前往牛棚，所以她们都会沿着最短的路径行走。\n农场可以描述为 $N$ 块草地（$1 \\leq N \\leq 10,000$），方便起见编号为 $1 \\ldots N$，牛棚位于草地 $1$。草地之间由 $M$ 条双向的小路连接（$N-1 \\leq M \\leq 50,000$）。每条小路有其通过时间，从每块草地出发都存在一条由一些小路组成的路径可以到达牛棚。\n\n草地 $i$ 中有 $c_i$ 头奶牛。当她们听到晚餐铃时，这些奶牛都沿着一条消耗最少时间的路径前往牛棚。如果有多条路径并列消耗时间最少，奶牛们会选择其中“字典序”最小的路径（也就是说，她们通过在两条路径第一次出现分支的位置优先选择经过编号较小的草地的方式来打破并列关系，所以经过草地 $7$、$3$、$6$、$1$ 的路径会优先于经过 $7$、$5$、$1$ 的路径，如果它们所消耗的时间相同）。\n\nFarmer John 担心牛棚距离某些草地太远。他计算了每头奶牛路上的时间，将所有奶牛消耗的时间相加，称这个和为总移动时间。他想要通过额外添加一条从牛棚（草地 $1$）连接到某块他选择的其他草地的、通过时间为 $T$（$1 \\leq T \\leq 10,000$）的“近道”来尽可能地减少总移动时间。当一头奶牛在她平时前往牛棚的路上偶然看见这条近道时，如果这条近道能够使她更快地到达牛棚，她就会走这条路。否则，一头奶牛会仍然沿着原来的路径行走，即使使用这条近道可能会减少她的移动时间。\n\n请帮助 Farmer John 求出通过添加一条近道能够达到的总移动时间减少量的最大值。\n", "inputFormat": "输入的第一行包含 $N$、$M$ 和 $T$。以下 $N$ 行包含 $c_1 \\ldots c_N$，均为 $0 \\ldots 10,000$ 范围内的整数。以下 $M$ 行，每行由三个整数 $a$、$b$ 和 $t$ 描述了一条小路，这条小路连接了草地 $a$ 和 $b$，通过时间为 $t$。所有的通过时间在 $1 \\ldots 25,000$ 范围内。", "outputFormat": "输出 Farmer John 可以达到的总移动时间的最大减少量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5202", "type": "P", "difficulty": 4, "samples": [["7 2\nHGHGGHG", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2019", "USACO", "优先队列"], "title": "[USACO19JAN] Redistricting P", "background": "USACO 19 年一月月赛铂金组第一题。", "description": "奶牛们的特大城市，牛都，要进行重新分区了！——这总是一个在居住在这里的两大主要种族（荷斯坦牛和更赛牛）之间富有争议的政治事件，因为两大种族都想要在牛都政府中保持足够的影响力。\n\n牛都的大都市圈由一列 $n$ 块牧草地组成，每块里有一头奶牛，均为荷斯坦牛 (Holstein) 和更赛牛 (Guernsey) 之一。\n\n牛都政府想要将大都市圈划分为若干个连续的区，使得每个区至少包含一块牧草地且至多包含 $k$ 块牧草地，并且每块牧草地恰好属于一个区。由于政府当前由荷斯坦牛控制，她们想要找到一种分区方式能够最小化更赛牛较多或者均势的区的数量（如果更赛牛的数量与荷斯坦牛的数量相等那么这个区就是均势的）。\n\n有一个关心政治的更赛牛团体想要知道政府的分区计划可能会对她们造成多少损害。帮助她们求出最坏情况，也就是更赛牛较多或是均势的区的最小可能的数量。", "inputFormat": "输入的第一行是用空格隔开的两个整数，分别代表牧草地的个数 $n$ 和每个区包含草地的上限 $k$。\n\n输入的第二行是一个长度为 $n$ 的字符串 $s$，$s$ 中只含字符 `H` 和 `G`。若 $s$ 的第 $i$ 个字符是 `H`，则代表第 $i$ 块草地上的奶牛是荷斯坦牛，否则是更赛牛。", "outputFormat": "输出一行一个整数，代表更赛牛较多或者优势区的最小可能数量。", "hint": "### 样例解释\n\n一种可能的划分方式是 $[1],~[2, 3],~[4, 5],~[6, 7]$。第二、四个区是均势的区，第三个区是更赛牛优势的区。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1 \\leq k \\leq n \\leq 3 \\times 10^5$，$s$ 的长度为 $n$，且只含字符 `H` 和 `G`。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19JAN] Redistricting P", "background": "The first Platinum problem of the USACO January 2019 contest.", "description": "The cows’ megacity, Cowopolis, is going to be redistricted! This is always a controversial political event between the two main groups living here (Holsteins and Guernseys), because both groups want to keep enough influence in the Cowopolis government.\n\nThe Cowopolis metropolitan area consists of a line of $n$ pasture blocks, each containing one cow, which is either a Holstein or a Guernsey.\n\nThe Cowopolis government wants to divide the metropolitan area into several contiguous districts, such that each district contains at least one pasture block and at most $k$ pasture blocks, and each pasture block belongs to exactly one district. Since the government is currently controlled by Holsteins, they want to find a redistricting plan that minimizes the number of districts where Guernseys are in the majority or the district is tied (a district is tied if the number of Guernseys equals the number of Holsteins).\n\nA politically concerned Guernsey group wants to know how much damage the government’s redistricting plan could do to them. Help them find the worst case, i.e., the minimum possible number of districts where Guernseys have a majority or the district is tied.", "inputFormat": "The first line contains two integers separated by spaces, representing the number of pasture blocks $n$ and the maximum number of pasture blocks in each district $k$.\n\nThe second line contains a string $s$ of length $n$, consisting only of the characters `H` and `G`. If the $i$-th character of $s$ is `H`, then the cow on the $i$-th pasture block is a Holstein; otherwise, it is a Guernsey.", "outputFormat": "Output one integer on one line, representing the minimum possible number of districts where Guernseys are in the majority or the district is tied.", "hint": "### Sample Explanation\n\nOne possible partition is $[1],~[2, 3],~[4, 5],~[6, 7]$. The second and fourth districts are tied, and the third district has a Guernsey majority.\n\n### Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\leq k \\leq n \\leq 3 \\times 10^5$, the length of $s$ is $n$, and $s$ contains only the characters `H` and `G`.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19JAN] Redistricting P", "background": "USACO 19 年一月月赛铂金组第一题。", "description": "奶牛们的特大城市，牛都，要进行重新分区了！——这总是一个在居住在这里的两大主要种族（荷斯坦牛和更赛牛）之间富有争议的政治事件，因为两大种族都想要在牛都政府中保持足够的影响力。\n\n牛都的大都市圈由一列 $n$ 块牧草地组成，每块里有一头奶牛，均为荷斯坦牛 (Holstein) 和更赛牛 (Guernsey) 之一。\n\n牛都政府想要将大都市圈划分为若干个连续的区，使得每个区至少包含一块牧草地且至多包含 $k$ 块牧草地，并且每块牧草地恰好属于一个区。由于政府当前由荷斯坦牛控制，她们想要找到一种分区方式能够最小化更赛牛较多或者均势的区的数量（如果更赛牛的数量与荷斯坦牛的数量相等那么这个区就是均势的）。\n\n有一个关心政治的更赛牛团体想要知道政府的分区计划可能会对她们造成多少损害。帮助她们求出最坏情况，也就是更赛牛较多或是均势的区的最小可能的数量。", "inputFormat": "输入的第一行是用空格隔开的两个整数，分别代表牧草地的个数 $n$ 和每个区包含草地的上限 $k$。\n\n输入的第二行是一个长度为 $n$ 的字符串 $s$，$s$ 中只含字符 `H` 和 `G`。若 $s$ 的第 $i$ 个字符是 `H`，则代表第 $i$ 块草地上的奶牛是荷斯坦牛，否则是更赛牛。", "outputFormat": "输出一行一个整数，代表更赛牛较多或者优势区的最小可能数量。", "hint": "### 样例解释\n\n一种可能的划分方式是 $[1],~[2, 3],~[4, 5],~[6, 7]$。第二、四个区是均势的区，第三个区是更赛牛优势的区。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1 \\leq k \\leq n \\leq 3 \\times 10^5$，$s$ 的长度为 $n$，且只含字符 `H` 和 `G`。", "locale": "zh-CN"}}}
{"pid": "P5203", "type": "P", "difficulty": 6, "samples": [["5 8\n1 2\n1 3\n1 4\n1 5\n2 3\n3 4\n4 5\n5 2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2019", "USACO", "最近公共祖先 LCA", "容斥原理"], "title": "[USACO19JAN] Exercise Route P", "background": "USACO 19 年一月月赛铂金组第二题。", "description": "奶牛 Bessie 意识到为了保持好的体形她需要更多地进行锻炼。她需要你帮助她选择在农场里每天用来晨跑的路线。 农场由 $n$ 块草地组成，方便起见编号为 $1\\sim n$，由 $m$ 条双向的小路连接。作为一种遵循规律的生物，奶牛们倾向于使用其中特定的 $n−1$ 条小路作为她们日常在草地之间移动的路线——她们管这些叫“常规的”小路。从每块草地出发都可以仅通过常规的小路到达所有其他草地。\n\n为了使她的晨跑更加有趣，Bessie 觉得她应该选择一条包含一些非常规的小路的路线。然而，使用常规的小路能够使她感到舒适，所以她不是很想在她的路线中使用过多非常规的小路。经过一些思考，她认为一条好的路线应当形成一个简单环（能够不经过任何草地超过一次的情况下回到起点），其中包含恰好两条非常规的小路。\n\n请帮助 Bessie 计算她可以使用的好的路线的数量。两条路线被认为是相同的，如果它们包含的小路的集合相等。", "inputFormat": "输入的第一行包含 $n$ 和 $m$。以下 $m$ 行每行包含两个整数 $a_i$ 和 $b_i$，描述了一条小路的两端。其中前 $(n−1)$ 条是常规的小路。", "outputFormat": "输出一行一个整数表示 Bessie 可以选择的路线的总数。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$m \\geq n - 1$，$1 \\leq a_i, b_i \\leq n$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19JAN] Exercise Route P", "background": "USACO January 2019 Contest, Platinum Problem 2.", "description": "The cow Bessie realizes that in order to stay in good shape, she needs to exercise more. She needs your help choosing a route on the farm for her morning run each day. The farm consists of $n$ pastures, numbered $1 \\sim n$ for convenience, connected by $m$ undirected paths. As creatures of habit, the cows tend to use a specific set of $n - 1$ paths as their daily routes for moving between pastures—these are called the “regular” paths. From any pasture, it is possible to reach every other pasture using only regular paths.\n\nTo make her morning run more interesting, Bessie thinks she should choose a route that includes some non-regular paths. However, using regular paths makes her feel comfortable, so she does not want to use too many non-regular paths in her route. After some thought, she decides that a good route should form a simple cycle (returning to the starting point without visiting any pasture more than once), and it must contain exactly two non-regular paths.\n\nPlease help Bessie compute the number of good routes she can take. Two routes are considered the same if they contain the same set of paths.", "inputFormat": "The first line contains $n$ and $m$. The next $m$ lines each contain two integers $a_i$ and $b_i$, describing the endpoints of a path. The first $(n - 1)$ paths are regular paths.", "outputFormat": "Output one line with an integer representing the total number of routes Bessie can choose.", "hint": "#### Constraints\n\nFor all test cases, it is guaranteed that $1 \\leq n \\leq 2 \\times 10^5$, $1 \\leq m \\leq 2 \\times 10^5$, $m \\geq n - 1$, and $1 \\leq a_i, b_i \\leq n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19JAN] Exercise Route P", "background": "USACO 19 年一月月赛铂金组第二题。", "description": "奶牛 Bessie 意识到为了保持好的体形她需要更多地进行锻炼。她需要你帮助她选择在农场里每天用来晨跑的路线。 农场由 $n$ 块草地组成，方便起见编号为 $1\\sim n$，由 $m$ 条双向的小路连接。作为一种遵循规律的生物，奶牛们倾向于使用其中特定的 $n−1$ 条小路作为她们日常在草地之间移动的路线——她们管这些叫“常规的”小路。从每块草地出发都可以仅通过常规的小路到达所有其他草地。\n\n为了使她的晨跑更加有趣，Bessie 觉得她应该选择一条包含一些非常规的小路的路线。然而，使用常规的小路能够使她感到舒适，所以她不是很想在她的路线中使用过多非常规的小路。经过一些思考，她认为一条好的路线应当形成一个简单环（能够不经过任何草地超过一次的情况下回到起点），其中包含恰好两条非常规的小路。\n\n请帮助 Bessie 计算她可以使用的好的路线的数量。两条路线被认为是相同的，如果它们包含的小路的集合相等。", "inputFormat": "输入的第一行包含 $n$ 和 $m$。以下 $m$ 行每行包含两个整数 $a_i$ 和 $b_i$，描述了一条小路的两端。其中前 $(n−1)$ 条是常规的小路。", "outputFormat": "输出一行一个整数表示 Bessie 可以选择的路线的总数。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$m \\geq n - 1$，$1 \\leq a_i, b_i \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P5204", "type": "P", "difficulty": 6, "samples": [["4 2\n999999998\n999999999\n999999998", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2019", "USACO"], "title": "[USACO19JAN] Train Tracking 2 P", "background": "USACO 2019 一月月赛铂金组第三题", "description": "每天特快列车都会经过农场。列车有 $N$ 节车厢（$1 \\le N \\le 10^5$），每节车厢上有一个 $1$ 到 $10^9$ 之间的正整数编号；不同的车厢可能会有相同的编号。\n平时，Bessie 会观察驶过的列车，记录车厢的编号。但是今天雾实在太浓了，Bessie 一个编号也看不见！幸运的是，她从城市里某个可靠的信息源获知了列车编号序列的所有滑动窗口中的最小值。具体地说，她得到了一个正整数 $K$ ，以及 $N-K+1$ 个正整数 $c_1,…,c_{N+1-K}$ ，其中 $c_i$ 是车厢 $i,i+1,…,i+K-1$ 之中编号的最小值。\n\n帮助 Bessie 求出满足所有滑动窗口最小值的对每节车厢进行编号的方法数量。由于这个数字可能非常大，只要你求出这个数字对 $10^9+7$ 取余的结果 Bessie 就满意了。\n\nBessie 的消息是完全可靠的；也就是说，保证存在至少一种符合要求的编号方式。\n", "inputFormat": "输入的第一行包含两个空格分隔的整数 $N$ 和 $K$ 。余下的行包含所有的滑动窗口最小值 $c_1,…,c_{N+1-K}$ ，每行一个数。\n", "outputFormat": "输出一个整数：对每节车厢给予一个不超过 $10^9$ 的正整数编号的方法数量对 $10^9+7$ 取余的结果，满足车厢 $i,i+1,…,i+K-1$ 之中编号的最小值等于 $c_i$，对于 $1 \\le i \\le N - K+1$ 均成立。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19JAN] Train Tracking 2 P", "background": "USACO January 2019 Contest, Platinum Problem 3.", "description": "Every day, an express train passes by the farm. The train has $N$ cars ($1 \\le N \\le 10^5$). Each car has a positive integer label between $1$ and $10^9$; different cars may have the same label.\n\nNormally, Bessie watches the passing train and records the labels on the cars. But today the fog is so thick that Bessie cannot see a single label. Luckily, she learned from a reliable source in the city the minimum values of all sliding windows of the label sequence. Specifically, she is given a positive integer $K$, and $N-K+1$ positive integers $c_1,\\ldots,c_{N+1-K}$, where $c_i$ is the minimum label among cars $i,i+1,\\ldots,i+K-1$.\n\nHelp Bessie find the number of ways to assign labels to all cars such that all the sliding-window minimum values match. Since this number may be very large, output it modulo $10^9+7$.\n\nBessie's information is completely reliable; in other words, it is guaranteed that there exists at least one valid labeling.", "inputFormat": "The first line contains two space-separated integers $N$ and $K$. The remaining lines contain all sliding-window minimum values $c_1,\\ldots,c_{N+1-K}$, one number per line.", "outputFormat": "Output one integer: the number of ways to assign each car a positive integer label not exceeding $10^9$, modulo $10^9+7$, such that the minimum label among cars $i,i+1,\\ldots,i+K-1$ equals $c_i$, for all $1 \\le i \\le N-K+1$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19JAN] Train Tracking 2 P", "background": "USACO 2019 一月月赛铂金组第三题", "description": "每天特快列车都会经过农场。列车有 $N$ 节车厢（$1 \\le N \\le 10^5$），每节车厢上有一个 $1$ 到 $10^9$ 之间的正整数编号；不同的车厢可能会有相同的编号。\n平时，Bessie 会观察驶过的列车，记录车厢的编号。但是今天雾实在太浓了，Bessie 一个编号也看不见！幸运的是，她从城市里某个可靠的信息源获知了列车编号序列的所有滑动窗口中的最小值。具体地说，她得到了一个正整数 $K$ ，以及 $N-K+1$ 个正整数 $c_1,…,c_{N+1-K}$ ，其中 $c_i$ 是车厢 $i,i+1,…,i+K-1$ 之中编号的最小值。\n\n帮助 Bessie 求出满足所有滑动窗口最小值的对每节车厢进行编号的方法数量。由于这个数字可能非常大，只要你求出这个数字对 $10^9+7$ 取余的结果 Bessie 就满意了。\n\nBessie 的消息是完全可靠的；也就是说，保证存在至少一种符合要求的编号方式。\n", "inputFormat": "输入的第一行包含两个空格分隔的整数 $N$ 和 $K$ 。余下的行包含所有的滑动窗口最小值 $c_1,…,c_{N+1-K}$ ，每行一个数。\n", "outputFormat": "输出一个整数：对每节车厢给予一个不超过 $10^9$ 的正整数编号的方法数量对 $10^9+7$ 取余的结果，满足车厢 $i,i+1,…,i+K-1$ 之中编号的最小值等于 $c_i$，对于 $1 \\le i \\le N - K+1$ 均成立。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5205", "type": "P", "difficulty": 6, "samples": [["3\n1 2 1\n", "1 1 0\n"], ["7\n1 8596489 489489 4894 1564 489 35789489  \n", "1 503420421 924499237 13354513 217017417 707895465 411020414\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["快速傅里叶变换 FFT", "快速数论变换 NTT", "模板题"], "title": "【模板】多项式开根", "background": "模板题，无背景", "description": "给定一个 $n-1$ 次多项式 $A(x)$，求一个在 ${} \\bmod x^n$ 意义下的多项式 $B(x)$，使得 $B^2(x) \\equiv A(x) \\pmod{x^n}$。若有多解，请取零次项系数较小的作为答案。\n\n多项式的系数在 ${}\\bmod 998244353$ 的意义下进行运算。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 个整数，依次表示多项式的系数 $a_0, a_1, \\dots, a_{n-1}$。\n\n保证 $a_0 = 1$。", "outputFormat": "输出 $n$ 个整数，表示答案多项式的系数 $b_0, b_1, \\dots, b_{n-1}$。", "hint": "对于 $100 \\%$ 的数据：$1 \\le n \\leq 10^5$，$0 \\le a_i < 998244353$。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Polynomial Square Root.", "background": "This is a template problem, with no background.", "description": "Given a polynomial $A(x)$ of degree $n - 1$, find a polynomial $B(x)$ modulo $x^n$ such that $B^2(x) \\equiv A(x) \\pmod{x^n}$. If there are multiple solutions, output the one with the smaller constant-term coefficient.\n\nAll polynomial coefficients are computed modulo $998244353$.", "inputFormat": "The first line contains a positive integer $n$.\n\nThe next line contains $n$ integers, representing the coefficients $a_0, a_1, \\dots, a_{n-1}$ of the polynomial in order.\n\nIt is guaranteed that $a_0 = 1$.", "outputFormat": "Output $n$ integers, representing the coefficients $b_0, b_1, \\dots, b_{n-1}$ of the answer polynomial.", "hint": "For $100\\%$ of the testdata: $1 \\le n \\le 10^5$, $0 \\le a_i < 998244353$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】多项式开根", "background": "模板题，无背景", "description": "给定一个 $n-1$ 次多项式 $A(x)$，求一个在 ${} \\bmod x^n$ 意义下的多项式 $B(x)$，使得 $B^2(x) \\equiv A(x) \\pmod{x^n}$。若有多解，请取零次项系数较小的作为答案。\n\n多项式的系数在 ${}\\bmod 998244353$ 的意义下进行运算。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 个整数，依次表示多项式的系数 $a_0, a_1, \\dots, a_{n-1}$。\n\n保证 $a_0 = 1$。", "outputFormat": "输出 $n$ 个整数，表示答案多项式的系数 $b_0, b_1, \\dots, b_{n-1}$。", "hint": "对于 $100 \\%$ 的数据：$1 \\le n \\leq 10^5$，$0 \\le a_i < 998244353$。", "locale": "zh-CN"}}}
