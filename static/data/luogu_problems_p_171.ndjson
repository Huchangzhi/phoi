{"pid": "P4459", "type": "P", "difficulty": 7, "samples": [["5 Bob 2\n", "6 10"], ["2 Alice 3", "4 4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2018", "各省省选", "北京", "提交答案", "枚举"], "title": "[BJOI2018] 双人猜数游戏", "background": "本题为提交答案题。可在「附件」中下载输入文件。", "description": "Alice 和 Bob 是一对非常聪明的人，他们可以算出各种各样游戏的最优策略。现在有个综艺节目《最强大佬》请他们来玩一个游戏。主持人写了三个正整数 $s,m,n$，然后一起告诉 Alice 和 Bob $s\\le m\\le n$ 以及 $s$ 是多少。（即，$s$ 是接下来要猜的 $m,n$ 的下限。）之后主持人单独告诉 Alice $m\\times n$ 是多少，单独告诉 Bob $m+n$ 是多少。\n\n当然，如果一个人同时知道 $m\\times n$ 以及 $m+n$ 的话就能很容易地算出 $m$ 和 $n$ 分别是多少，但现在 Alice 和 Bob 只分别知道其中一个，而且他们只能回答主持人的问题，不能交流。主持人从他们中的一人开始，轮流询问回答者“知不知道 $m$ 和 $n$ 分别是多少”（回答者只能回答知道/不知道）。\n\n为了节目效果，以及显示出 Alice 和 Bob 的绝顶聪明，主持人希望 Alice 和 Bob 一共说了 $t$ 次“不知道”以后两个人都知道 $m$ 和 $n$ 是多少了。现在主持人找到你，希望让帮他构造一组符合条件的 $m$ 和 $n$。", "inputFormat": "仅一行，形如 `s <name> t`（`<name>` 为 `Alice` 或 `Bob`），其中 $s$ 表示要猜的数的下限，`<name>` 表示主持人第一次问的人，$t$ 表示 Alice 和 Bob 一共说“不知道”的次数。", "outputFormat": "一行两个整数 $m$ 和 $n$（以一个空格隔开），表示一组满足要求的解。若有多组解，输出 $m+n$ 最小的那组解。若仍有多组解，输出 $m+n$ 最小的解中 $m$ 最小的那组解。", "hint": "#### 样例 1 解释\n主持人告诉 Alice 和 Bob $5\\le m\\le n$，单独告诉 Alice $m\\times n=60$，单独告诉 Bob $m+n=16$。询问过程：\n- 主持人问 Bob，Bob 说不知道。\n- 主持人问 Alice，Alice 说不知道。\n- 主持人问 Bob，Bob 说知道。\n- 主持人问 Alice，Alice 说知道。\n\n#### 样例 2 解释\n主持人告诉 Alice 和 Bob $2\\le m\\le n$，单独告诉 Alice $m\\times n=16$，单独告诉 Bob $m+n=8$。询问过程：\n- 主持人问 Alice，Alice 说不知道。\n- 主持人问 Bob，Bob 说不知道。\n- 主持人问 Alice，Alice 说不知道。\n- 主持人问 Bob，Bob 说知道。\n- 主持人问 Alice，Alice 说知道。\n\n#### 数据规模与约定\n对于 $40\\%$ 的数据，$t=2$；\n\n对于 $100\\%$ 的数据，$1\\le s\\le 200$，$2\\le t\\le 15$，保证有解。", "locale": "zh-CN", "translations": {"en": {"title": "[BJOI2018] Two-Player Number Guessing Game", "background": "This is an answer-submission problem. You can download the input file from \"Attachment\".", "description": "Alice and Bob are very smart; they can figure out optimal strategies for all kinds of games. A variety show \"The Strongest Boss\" invites them to play a game. The host writes three positive integers $s, m, n$, then tells Alice and Bob together that $s \\le m \\le n$ and what $s$ is. (That is, $s$ is the lower bound for the $m, n$ to be guessed.) Then the host privately tells Alice what $m \\times n$ is, and privately tells Bob what $m + n$ is.\n\nOf course, if one person knows both $m \\times n$ and $m + n$, they can easily compute $m$ and $n$, but now Alice and Bob each know only one of them, and they can only answer the host’s questions without communicating. Starting from one of them, the host alternately asks the current respondent, “Do you know what $m$ and $n$ are?” The respondent can only answer “know” or “don’t know.”\n\nFor show effects and to demonstrate Alice and Bob’s brilliance, the host wants that after a total of $t$ “don’t know” answers, both Alice and Bob will know what $m$ and $n$ are. Now the host asks you to construct a pair $m$ and $n$ that satisfies the requirements.", "inputFormat": "A single line in the form `s <name> t` (where `<name>` is `Alice` or `Bob`), where $s$ is the lower bound for the numbers to guess, `<name>` is the person the host asks first, and $t$ is the total number of “don’t know” answers from Alice and Bob.", "outputFormat": "Output two integers $m$ and $n$ (separated by a space), representing one valid solution. If there are multiple solutions, output the one with the smallest $m + n$. If there are still multiple, among those with minimal $m + n$, output the one with the smallest $m$.", "hint": "#### Sample 1 Explanation\nThe host tells Alice and Bob that $5 \\le m \\le n$, privately tells Alice $m \\times n = 60$, and privately tells Bob $m + n = 16$. The questioning process:\n- The host asks Bob; Bob says “don’t know.”\n- The host asks Alice; Alice says “don’t know.”\n- The host asks Bob; Bob says “know.”\n- The host asks Alice; Alice says “know.”\n\n#### Sample 2 Explanation\nThe host tells Alice and Bob that $2 \\le m \\le n$, privately tells Alice $m \\times n = 16$, and privately tells Bob $m + n = 8$. The questioning process:\n- The host asks Alice; Alice says “don’t know.”\n- The host asks Bob; Bob says “don’t know.”\n- The host asks Alice; Alice says “don’t know.”\n- The host asks Bob; Bob says “know.”\n- The host asks Alice; Alice says “know.”\n\n#### Constraints and Conventions\n- For $40\\%$ of the testdata, $t = 2$.\n- For $100\\%$ of the testdata, $1 \\le s \\le 200$, $2 \\le t \\le 15$, and a solution exists.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BJOI2018] 双人猜数游戏", "background": "本题为提交答案题。可在「附件」中下载输入文件。", "description": "Alice 和 Bob 是一对非常聪明的人，他们可以算出各种各样游戏的最优策略。现在有个综艺节目《最强大佬》请他们来玩一个游戏。主持人写了三个正整数 $s,m,n$，然后一起告诉 Alice 和 Bob $s\\le m\\le n$ 以及 $s$ 是多少。（即，$s$ 是接下来要猜的 $m,n$ 的下限。）之后主持人单独告诉 Alice $m\\times n$ 是多少，单独告诉 Bob $m+n$ 是多少。\n\n当然，如果一个人同时知道 $m\\times n$ 以及 $m+n$ 的话就能很容易地算出 $m$ 和 $n$ 分别是多少，但现在 Alice 和 Bob 只分别知道其中一个，而且他们只能回答主持人的问题，不能交流。主持人从他们中的一人开始，轮流询问回答者“知不知道 $m$ 和 $n$ 分别是多少”（回答者只能回答知道/不知道）。\n\n为了节目效果，以及显示出 Alice 和 Bob 的绝顶聪明，主持人希望 Alice 和 Bob 一共说了 $t$ 次“不知道”以后两个人都知道 $m$ 和 $n$ 是多少了。现在主持人找到你，希望让帮他构造一组符合条件的 $m$ 和 $n$。", "inputFormat": "仅一行，形如 `s <name> t`（`<name>` 为 `Alice` 或 `Bob`），其中 $s$ 表示要猜的数的下限，`<name>` 表示主持人第一次问的人，$t$ 表示 Alice 和 Bob 一共说“不知道”的次数。", "outputFormat": "一行两个整数 $m$ 和 $n$（以一个空格隔开），表示一组满足要求的解。若有多组解，输出 $m+n$ 最小的那组解。若仍有多组解，输出 $m+n$ 最小的解中 $m$ 最小的那组解。", "hint": "#### 样例 1 解释\n主持人告诉 Alice 和 Bob $5\\le m\\le n$，单独告诉 Alice $m\\times n=60$，单独告诉 Bob $m+n=16$。询问过程：\n- 主持人问 Bob，Bob 说不知道。\n- 主持人问 Alice，Alice 说不知道。\n- 主持人问 Bob，Bob 说知道。\n- 主持人问 Alice，Alice 说知道。\n\n#### 样例 2 解释\n主持人告诉 Alice 和 Bob $2\\le m\\le n$，单独告诉 Alice $m\\times n=16$，单独告诉 Bob $m+n=8$。询问过程：\n- 主持人问 Alice，Alice 说不知道。\n- 主持人问 Bob，Bob 说不知道。\n- 主持人问 Alice，Alice 说不知道。\n- 主持人问 Bob，Bob 说知道。\n- 主持人问 Alice，Alice 说知道。\n\n#### 数据规模与约定\n对于 $40\\%$ 的数据，$t=2$；\n\n对于 $100\\%$ 的数据，$1\\le s\\le 200$，$2\\le t\\le 15$，保证有解。", "locale": "zh-CN"}}}
{"pid": "P4460", "type": "P", "difficulty": 5, "samples": [["4\n0 0\n1 1\n2 2\n3 3", "8"], ["4\n0 0\n0 1\n0 2\n1 0", "18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2018", "重庆", "各省省选", "广度优先搜索 BFS", "状压 DP"], "title": "[CQOI2018] 解锁屏幕", "background": "使用过 Android 手机的同学一定对手势解锁屏幕不陌生。 Android 的解锁屏幕由 $3 \\times 3$ 个点组成，手指在屏幕上画一条线，将其中一些点连接起来，即可构成一个解锁图案。如下面三个例子所示：\n\n![](https://cdn.luogu.com.cn/upload/pic/17556.png)\n![](https://cdn.luogu.com.cn/upload/pic/17557.png)\n![](https://cdn.luogu.com.cn/upload/pic/17558.png)", "description": "画线时还需要遵循一些规则：\n1. 连接的点数不能少于 $4$ 个。也就是说只连接两个点或者三个点会提示错误。\n2. 两个点之间的联线不能弯曲。\n3. 每个点只能“使用”一次，不可重复。这里的“使用”是指手指划过一个点，该点变绿。\n4. 两个点之间的连线不能“跨过”另一个点，除非那个点之前已经被“使用”过。\n\n对于最后一条规则，参见下图的解释。左边两幅图违反了该规则；而右边两幅图（分别为 $ 2 \\rightarrow 4 \\rightarrow 1 \\rightarrow 3 \\rightarrow 6$ 和 $ 6 \\rightarrow 5 \\rightarrow 4 \\rightarrow 1 \\rightarrow 9 \\rightarrow 2$ ）则没有违反规则，因为在“跨过”点时，点已经被使用过了。\n\n![](https://cdn.luogu.com.cn/upload/pic/17566.png)\n\n现在工程师希望改进解锁屏幕，增减点的数目，并移动点的位置，不再是一个九宫格形状，但保持上述画线规则不变。\n\n请计算新的解锁屏幕上，一共有多少满足规则的画线方案。", "inputFormat": "输入第一行为一个整数 $n$ ，表示点的数目。\n\n接下来 $n$ 行，每行两个空格分开的整数 $x_i$ 和 $y_i$ ，表示每个点的坐标。", "outputFormat": "输出共一行，为题目所求方案数除以 $10^8+7$ 的余数。", "hint": "#### 样例解释 1\n\n设 $4$ 个点编号为 $1$ 到 $4$ ，方案有 $1 \\rightarrow 2 \\rightarrow 3 \\rightarrow 4$ ， $2 \\rightarrow 1 \\rightarrow 3 \\rightarrow 4$ ，  $3 \\rightarrow 2 \\rightarrow 1 \\rightarrow 4$ ，  $2 \\rightarrow 3 \\rightarrow 1 \\rightarrow 4$ 以及它们的镜像。\n\n### 数据范围\n\n- 对于 $30\\%$ 的数据，$1 \\le n \\le 10$。\n- 对于 $100\\%$ 的数据，$-1000 \\le x_i ,y_i \\le 1000$，$ 1 \\le n < 20$。各点坐标不相同。", "locale": "zh-CN", "translations": {"en": {"title": "[CQOI2018] Unlock Screen", "background": "Anyone who has used an Android phone should be familiar with gesture unlocking. Android’s lock screen consists of $3 \\times 3$ points. By drawing a line on the screen to connect some of these points, you can form an unlock pattern. As shown in the three examples below:\n\n![](https://cdn.luogu.com.cn/upload/pic/17556.png)\n![](https://cdn.luogu.com.cn/upload/pic/17557.png)\n![](https://cdn.luogu.com.cn/upload/pic/17558.png)", "description": "When drawing the line, you must also follow some rules:\n1. The number of connected points must be at least $4$. That is, connecting only two or three points will be considered invalid.\n2. The segment between two points must be straight; it cannot bend.\n3. Each point can be “used” at most once and cannot be repeated. Here, “use” means your finger passes over a point and it turns green.\n4. A segment between two points cannot “pass over” another point, unless that point has already been “used” earlier.\n\nFor the last rule, see the explanation in the figure below. The two figures on the left violate the rule; the two on the right (namely $ 2 \\rightarrow 4 \\rightarrow 1 \\rightarrow 3 \\rightarrow 6$ and $ 6 \\rightarrow 5 \\rightarrow 4 \\rightarrow 1 \\rightarrow 9 \\rightarrow 2$) do not violate the rule because, when “passing over” a point, that point has already been used.\n\n![](https://cdn.luogu.com.cn/upload/pic/17566.png)\n\nNow engineers want to improve the unlock screen by increasing or decreasing the number of points and moving their positions, so it is no longer a $3 \\times 3$ grid, while keeping the drawing rules above unchanged.\n\nPlease compute how many line-drawing patterns on the new unlock screen satisfy the rules.", "inputFormat": "The first line contains an integer $n$, the number of points.\n\nThe next $n$ lines each contain two space-separated integers $x_i$ and $y_i$, the coordinates of each point.", "outputFormat": "Output a single line with the answer modulo $10^8+7$.", "hint": "#### Sample Explanation 1\n\nLet the $4$ points be indexed $1$ to $4$. The valid patterns are $1 \\rightarrow 2 \\rightarrow 3 \\rightarrow 4$, $2 \\rightarrow 1 \\rightarrow 3 \\rightarrow 4$, $3 \\rightarrow 2 \\rightarrow 1 \\rightarrow 4$, $2 \\rightarrow 3 \\rightarrow 1 \\rightarrow 4$, and their mirror images.\n\n### Constraints\n\n- For $30\\%$ of the testdata, $1 \\le n \\le 10$.\n- For $100\\%$ of the testdata, $-1000 \\le x_i, y_i \\le 1000$, $1 \\le n < 20$. All point coordinates are distinct.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CQOI2018] 解锁屏幕", "background": "使用过 Android 手机的同学一定对手势解锁屏幕不陌生。 Android 的解锁屏幕由 $3 \\times 3$ 个点组成，手指在屏幕上画一条线，将其中一些点连接起来，即可构成一个解锁图案。如下面三个例子所示：\n\n![](https://cdn.luogu.com.cn/upload/pic/17556.png)\n![](https://cdn.luogu.com.cn/upload/pic/17557.png)\n![](https://cdn.luogu.com.cn/upload/pic/17558.png)", "description": "画线时还需要遵循一些规则：\n1. 连接的点数不能少于 $4$ 个。也就是说只连接两个点或者三个点会提示错误。\n2. 两个点之间的联线不能弯曲。\n3. 每个点只能“使用”一次，不可重复。这里的“使用”是指手指划过一个点，该点变绿。\n4. 两个点之间的连线不能“跨过”另一个点，除非那个点之前已经被“使用”过。\n\n对于最后一条规则，参见下图的解释。左边两幅图违反了该规则；而右边两幅图（分别为 $ 2 \\rightarrow 4 \\rightarrow 1 \\rightarrow 3 \\rightarrow 6$ 和 $ 6 \\rightarrow 5 \\rightarrow 4 \\rightarrow 1 \\rightarrow 9 \\rightarrow 2$ ）则没有违反规则，因为在“跨过”点时，点已经被使用过了。\n\n![](https://cdn.luogu.com.cn/upload/pic/17566.png)\n\n现在工程师希望改进解锁屏幕，增减点的数目，并移动点的位置，不再是一个九宫格形状，但保持上述画线规则不变。\n\n请计算新的解锁屏幕上，一共有多少满足规则的画线方案。", "inputFormat": "输入第一行为一个整数 $n$ ，表示点的数目。\n\n接下来 $n$ 行，每行两个空格分开的整数 $x_i$ 和 $y_i$ ，表示每个点的坐标。", "outputFormat": "输出共一行，为题目所求方案数除以 $10^8+7$ 的余数。", "hint": "#### 样例解释 1\n\n设 $4$ 个点编号为 $1$ 到 $4$ ，方案有 $1 \\rightarrow 2 \\rightarrow 3 \\rightarrow 4$ ， $2 \\rightarrow 1 \\rightarrow 3 \\rightarrow 4$ ，  $3 \\rightarrow 2 \\rightarrow 1 \\rightarrow 4$ ，  $2 \\rightarrow 3 \\rightarrow 1 \\rightarrow 4$ 以及它们的镜像。\n\n### 数据范围\n\n- 对于 $30\\%$ 的数据，$1 \\le n \\le 10$。\n- 对于 $100\\%$ 的数据，$-1000 \\le x_i ,y_i \\le 1000$，$ 1 \\le n < 20$。各点坐标不相同。", "locale": "zh-CN"}}}
{"pid": "P4461", "type": "P", "difficulty": 6, "samples": [["3\n3\n5\n9", "5\n21\n341"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["搜索", "2018", "重庆", "各省省选", "快速傅里叶变换 FFT"], "title": "[CQOI2018] 九连环", "background": "九连环是一种源于中国的传统智力游戏。如图所示，九个的圆环套在一把“剑”上，并且互相牵连。游戏的目标是把九个圆环全部从“剑”上卸下。\n\n![](https://cdn.luogu.com.cn/upload/pic/17568.png)", "description": "圆环的装卸需要遵守两个规则:\n\n1. 第一个(最右边) 环任何时候都可以任意装上或卸下。\n\n2. 如果第 $k$ 个环没有被卸下，且第 $k$ 个环右边的所有环都被卸下，则第 $k+1$ 个环(第 $k$ 个环左边相邻的环) 可以任意装上或卸下。\n\n与魔方的千变万化不同，解九连环的最优策略是唯一的。为简单起见，我们以“四连环”为例，演示这一过程。这里用 1 表示环在“剑”上，0 表示环已经卸下。\n\n初始状态为 1111，每步的操作如下:\n\n1. 1101 (根据规则 2,卸下第 2 个环)\n\n2. 1100 (根据规则 1,卸下第 1 个环)\n\n3. 0100 (根据规则 2,卸下第 4 个环)\n\n4. 0101 (根据规则 1,装上第 1 个环)\n\n5. 0111 (根据规则 2,装上第 2 个环)\n\n6. 0110 (根据规则 1,卸下第 1 个环)\n\n7. 0010 (根据规则 2,卸下第 3 个环)\n\n8. 0011 (根据规则 1,装上第 1 个环)\n\n9. 0001 (根据规则 2,卸下第 2 个环)\n\n10. 0000 (根据规则 1,卸下第 1 个环)\n\n由此可见，卸下“四连环”至少需要 $10$ 步。随着环数增加，需要的步数也会随之增多。例如卸下九连环，就至少需要 $341$ 步。\n\n请你计算，有 $n$ 个环的情况下，按照规则，全部卸下至少需要多少步。", "inputFormat": "输入文件第一行，为一个整数 $m$，表示测试点数目。\n\n接下来 $m$ 行，每行一个整数 $n$。", "outputFormat": "输出文件共 $m$ 行，对应每个测试点的计算结果。", "hint": "对于 $10\\%$ 的数据，$1≤n≤10$\n\n对于 $30\\%$ 的数据，$1≤n≤30$\n\n对于 $100\\%$ 的数据，$1≤n≤10^5,1≤m≤10$", "locale": "zh-CN", "translations": {"en": {"title": "[CQOI2018] Nine Linked Rings", "background": "The Nine Linked Rings is a traditional Chinese puzzle game. As shown in the figure, nine rings are looped onto a \"sword\" and interlinked. The goal is to remove all nine rings from the \"sword\".\n\n![](https://cdn.luogu.com.cn/upload/pic/17568.png)", "description": "Attaching and removing the rings must follow two rules:\n\n1. The first (rightmost) ring can be attached or removed at any time.\n\n2. If the $k$-th ring is not removed and all rings to the right of the $k$-th ring have been removed, then the $(k+1)$-th ring (the ring immediately to the left of the $k$-th ring) can be attached or removed arbitrarily.\n\nUnlike the Rubik's Cube with its myriad variations, the optimal strategy for the Nine Linked Rings is unique. For simplicity, we take the four-ring case as an example to demonstrate the process. Here, 1 means the ring is on the \"sword\", and 0 means the ring has been removed.\n\nThe initial state is 1111, and the operations at each step are as follows:\n\n1. 1101 (according to rule 2, remove the 2nd ring).\n2. 1100 (according to rule 1, remove the 1st ring).\n3. 0100 (according to rule 2, remove the 4th ring).\n4. 0101 (according to rule 1, attach the 1st ring).\n5. 0111 (according to rule 2, attach the 2nd ring).\n6. 0110 (according to rule 1, remove the 1st ring).\n7. 0010 (according to rule 2, remove the 3rd ring).\n8. 0011 (according to rule 1, attach the 1st ring).\n9. 0001 (according to rule 2, remove the 2nd ring).\n10. 0000 (according to rule 1, remove the 1st ring).\n\nThus, removing the four-ring set requires at least $10$ steps. As the number of rings increases, the required number of steps also increases. For example, removing nine rings requires at least $341$ steps.\n\nPlease compute, for $n$ rings, the minimum number of steps required to remove all rings under the rules.", "inputFormat": "The first line contains an integer $m$, the number of test cases.\n\nThe next $m$ lines each contain an integer $n$.", "outputFormat": "Output $m$ lines, each containing the result for the corresponding test case.", "hint": "For 10% of the testdata, $1 \\le n \\le 10$.\n\nFor 30% of the testdata, $1 \\le n \\le 30$.\n\nFor 100% of the testdata, $1 \\le n \\le 10^5$, $1 \\le m \\le 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CQOI2018] 九连环", "background": "九连环是一种源于中国的传统智力游戏。如图所示，九个的圆环套在一把“剑”上，并且互相牵连。游戏的目标是把九个圆环全部从“剑”上卸下。\n\n![](https://cdn.luogu.com.cn/upload/pic/17568.png)", "description": "圆环的装卸需要遵守两个规则:\n\n1. 第一个(最右边) 环任何时候都可以任意装上或卸下。\n\n2. 如果第 $k$ 个环没有被卸下，且第 $k$ 个环右边的所有环都被卸下，则第 $k+1$ 个环(第 $k$ 个环左边相邻的环) 可以任意装上或卸下。\n\n与魔方的千变万化不同，解九连环的最优策略是唯一的。为简单起见，我们以“四连环”为例，演示这一过程。这里用 1 表示环在“剑”上，0 表示环已经卸下。\n\n初始状态为 1111，每步的操作如下:\n\n1. 1101 (根据规则 2,卸下第 2 个环)\n\n2. 1100 (根据规则 1,卸下第 1 个环)\n\n3. 0100 (根据规则 2,卸下第 4 个环)\n\n4. 0101 (根据规则 1,装上第 1 个环)\n\n5. 0111 (根据规则 2,装上第 2 个环)\n\n6. 0110 (根据规则 1,卸下第 1 个环)\n\n7. 0010 (根据规则 2,卸下第 3 个环)\n\n8. 0011 (根据规则 1,装上第 1 个环)\n\n9. 0001 (根据规则 2,卸下第 2 个环)\n\n10. 0000 (根据规则 1,卸下第 1 个环)\n\n由此可见，卸下“四连环”至少需要 $10$ 步。随着环数增加，需要的步数也会随之增多。例如卸下九连环，就至少需要 $341$ 步。\n\n请你计算，有 $n$ 个环的情况下，按照规则，全部卸下至少需要多少步。", "inputFormat": "输入文件第一行，为一个整数 $m$，表示测试点数目。\n\n接下来 $m$ 行，每行一个整数 $n$。", "outputFormat": "输出文件共 $m$ 行，对应每个测试点的计算结果。", "hint": "对于 $10\\%$ 的数据，$1≤n≤10$\n\n对于 $30\\%$ 的数据，$1≤n≤30$\n\n对于 $100\\%$ 的数据，$1≤n≤10^5,1≤m≤10$", "locale": "zh-CN"}}}
{"pid": "P4462", "type": "P", "difficulty": 5, "samples": [["4 5 1\n1 2 3 1\n1 4\n1 3\n2 3\n2 4\n4 4", "4\n2\n1\n2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2018", "重庆", "莫队", "各省省选", "进制", "前缀和"], "title": "[CQOI2018] 异或序列", "background": "", "description": "已知一个长度为 $n$ 的整数数列 $a_1,a_2,\\dots,a_n$，给定查询参数 $l,r$，问在 $a_l,a_{l+1},\\dots,a_r$ 区间内，有多少子区间满足异或和等于 $k$。也就是说，对于所有的 $x,y (l \\leq x \\leq y \\leq r)$，能够满足 $a_x \\oplus a_{x+1} \\oplus \\dots \\oplus a_y = k$ 的 $x,y$ 有多少组。\n", "inputFormat": "输入文件第一行，为 $3$ 个整数 $n,m,k$。\n\n第二行为空格分开的 $n$ 个整数，即 $a_1,a_2,..a_n$。\n\n接下来 $m$ 行，每行两个整数 $l_j,r_j$，表示一次查询。", "outputFormat": "输出文件共 $m$ 行，对应每个查询的计算结果。", "hint": "对于 $30\\%$ 的数据，$1 \\leq n, m \\leq 1000$。\n\n对于 $100\\%$ 的数据，$1 \\leq n, m \\leq 10^5$，$0 \\leq k, a_i \\leq 10^5$，$1 \\leq l_j \\leq r_j \\leq n$。", "locale": "zh-CN", "translations": {"en": {"title": "[CQOI2018] XOR Sequence", "background": "", "description": "Given an integer sequence $a_1, a_2, \\dots, a_n$ of length $n$, for a query with parameters $l, r$, ask how many subarrays within $a_l, a_{l+1}, \\dots, a_r$ have xor-sum equal to $k$. That is, among all $x, y$ such that $(l \\leq x \\leq y \\leq r)$, how many pairs $(x, y)$ satisfy $a_x \\oplus a_{x+1} \\oplus \\dots \\oplus a_y = k$.", "inputFormat": "The first line contains three integers $n, m, k$.\n\nThe second line contains $n$ integers separated by spaces, namely $a_1, a_2, \\dots, a_n$.\n\nEach of the next $m$ lines contains two integers $l_j$ and $r_j$, representing one query.", "outputFormat": "Output $m$ lines, each corresponding to the answer for one query.", "hint": "For $30\\%$ of the testdata, $1 \\leq n, m \\leq 1000$.\n\nFor $100\\%$ of the testdata, $1 \\leq n, m \\leq 10^5$, $0 \\leq k, a_i \\leq 10^5$, $1 \\leq l_j \\leq r_j \\leq n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CQOI2018] 异或序列", "background": "", "description": "已知一个长度为 $n$ 的整数数列 $a_1,a_2,\\dots,a_n$，给定查询参数 $l,r$，问在 $a_l,a_{l+1},\\dots,a_r$ 区间内，有多少子区间满足异或和等于 $k$。也就是说，对于所有的 $x,y (l \\leq x \\leq y \\leq r)$，能够满足 $a_x \\oplus a_{x+1} \\oplus \\dots \\oplus a_y = k$ 的 $x,y$ 有多少组。\n", "inputFormat": "输入文件第一行，为 $3$ 个整数 $n,m,k$。\n\n第二行为空格分开的 $n$ 个整数，即 $a_1,a_2,..a_n$。\n\n接下来 $m$ 行，每行两个整数 $l_j,r_j$，表示一次查询。", "outputFormat": "输出文件共 $m$ 行，对应每个查询的计算结果。", "hint": "对于 $30\\%$ 的数据，$1 \\leq n, m \\leq 1000$。\n\n对于 $100\\%$ 的数据，$1 \\leq n, m \\leq 10^5$，$0 \\leq k, a_i \\leq 10^5$，$1 \\leq l_j \\leq r_j \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P4463", "type": "P", "difficulty": 6, "samples": [["9 7 10007", "3611"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "数学", "2012", "集训队互测", "生成函数"], "title": "[集训队互测 2012] calc", "background": "", "description": "一个序列 $a_1,a_2,\\dots,a_n$ 是合法的，当且仅当：\n\n- $a_1,a_2,\\dots,a_n$ 都是 $[1,k]$ 中的整数。\n- $a_1,a_2,\\dots,a_n$ 互不相等。\n\n一个序列的值定义为它里面所有数的乘积，即 $a_1\\times a_2\\times\\dots\\times a_n$。\n\n求所有不同合法序列的值的和对 $p$ 取模后的结果。两个序列不同当且仅当他们任意一位不同。", "inputFormat": "一行三个正整数 $k, n, p$。意义为上面所说的。", "outputFormat": "一行结果。", "hint": "【数据范围】\n\n对于 $5\\%$ 的数据，$k \\le 10$，$n \\le 10$。\n\n对于 $20\\%$ 的数据，$k \\le 1000$，$n \\le 20$。\n\n对于 $50\\%$ 的数据，$k \\le 10^9$，$n \\le 20$。\n\n对于 $100\\%$ 的数据，$k \\le 10 ^ 9$，$n \\le 500$，$p \\le 10 ^ 9$，保证 $p$ 为素数，保证 $n + 1 < k < p$。\n\nby WJMZBMR\n****\n$\\mathsf i \\color{red}\\mathsf{ostream}$ 觉得这题数据太弱了，于是他造了个[加强版](https://www.luogu.com.cn/problem/P5850)", "locale": "zh-CN", "translations": {"en": {"title": "[CTT Mutual Test 2012] calc", "background": "", "description": "A sequence $a_1, a_2, \\dots, a_n$ is valid if and only if:\n- $a_1, a_2, \\dots, a_n$ are all integers in $[1, k]$.\n- $a_1, a_2, \\dots, a_n$ are pairwise distinct.\n\nThe value of a sequence is defined as the product of all its numbers, i.e., $a_1\\times a_2\\times\\dots\\times a_n$.\n\nCompute the sum of the values of all distinct valid sequences, modulo $p$. Two sequences are different if and only if they differ at any position.", "inputFormat": "One line with three positive integers $k, n, p$, as described above.", "outputFormat": "One line with the result.", "hint": "Constraints\n\nFor $5\\%$ of the testdata, $k \\le 10$, $n \\le 10$.\n\nFor $20\\%$ of the testdata, $k \\le 1000$, $n \\le 20$.\n\nFor $50\\%$ of the testdata, $k \\le 10^9$, $n \\le 20$.\n\nFor $100\\%$ of the testdata, $k \\le 10^9$, $n \\le 500$, $p \\le 10^9$, it is guaranteed that $p$ is prime and $n + 1 < k < p$.\n\nby WJMZBMR\n****\n$\\mathsf i \\color{red}\\mathsf{ostream}$ thinks the testdata for this problem is too weak, so he made a [harder version](https://www.luogu.com.cn/problem/P5850).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[集训队互测 2012] calc", "background": "", "description": "一个序列 $a_1,a_2,\\dots,a_n$ 是合法的，当且仅当：\n\n- $a_1,a_2,\\dots,a_n$ 都是 $[1,k]$ 中的整数。\n- $a_1,a_2,\\dots,a_n$ 互不相等。\n\n一个序列的值定义为它里面所有数的乘积，即 $a_1\\times a_2\\times\\dots\\times a_n$。\n\n求所有不同合法序列的值的和对 $p$ 取模后的结果。两个序列不同当且仅当他们任意一位不同。", "inputFormat": "一行三个正整数 $k, n, p$。意义为上面所说的。", "outputFormat": "一行结果。", "hint": "【数据范围】\n\n对于 $5\\%$ 的数据，$k \\le 10$，$n \\le 10$。\n\n对于 $20\\%$ 的数据，$k \\le 1000$，$n \\le 20$。\n\n对于 $50\\%$ 的数据，$k \\le 10^9$，$n \\le 20$。\n\n对于 $100\\%$ 的数据，$k \\le 10 ^ 9$，$n \\le 500$，$p \\le 10 ^ 9$，保证 $p$ 为素数，保证 $n + 1 < k < p$。\n\nby WJMZBMR\n****\n$\\mathsf i \\color{red}\\mathsf{ostream}$ 觉得这题数据太弱了，于是他造了个[加强版](https://www.luogu.com.cn/problem/P5850)", "locale": "zh-CN"}}}
{"pid": "P4464", "type": "P", "difficulty": 7, "samples": [["5\n6 0 0\n6 0 1\n6 1 0\n6 1 1\n1000000000 50 50", "6\n66\n15\n126\n393442025"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2012", "集训队互测"], "title": "[国家集训队] JZPKIL", "background": "", "description": "给定$ n, x, y$，求\n\n$$\\sum_{i=1}^{n}\\mathrm{gcd}(i,n)^x \\mathrm{lcm}(i,n)^y \\bmod (10^9+7)$$\n\n", "inputFormat": "第一行，询问个数 $T$。\n\n下面 $T$ 行，每行三个整数 $n, x, y$。", "outputFormat": "$T$ 行，每行一个整数，表示相应的询问的答案", "hint": "30%的数据，$x=y$\n\n另30%的数据，$n \\le 10^9, x, y \\le 100$\n\n100%的数据，$T \\le 100, 1 \\le n \\le 10^{18}, 0 \\le x, y \\le 3000$\n\n来源：2012集训队互测，by gyz", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] JZPKIL", "background": "", "description": "Given $n, x, y$, compute\n$$\\sum_{i=1}^{n}\\mathrm{gcd}(i,n)^x \\mathrm{lcm}(i,n)^y \\bmod (10^9+7)$$\n.", "inputFormat": "The first line contains the number of queries $T$.\nEach of the next $T$ lines contains three integers $n, x, y$.", "outputFormat": "Output $T$ lines, each containing one integer, the answer to the corresponding query.", "hint": "Constraints:\nFor 30% of the testdata, $x = y$.\nFor another 30% of the testdata, $n \\le 10^9$, $x, y \\le 100$.\nFor 100% of the testdata, $T \\le 100$, $1 \\le n \\le 10^{18}$, $0 \\le x, y \\le 3000$.\n\nSource: 2012 CTT mutual testing, by gyz.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] JZPKIL", "background": "", "description": "给定$ n, x, y$，求\n\n$$\\sum_{i=1}^{n}\\mathrm{gcd}(i,n)^x \\mathrm{lcm}(i,n)^y \\bmod (10^9+7)$$\n\n", "inputFormat": "第一行，询问个数 $T$。\n\n下面 $T$ 行，每行三个整数 $n, x, y$。", "outputFormat": "$T$ 行，每行一个整数，表示相应的询问的答案", "hint": "30%的数据，$x=y$\n\n另30%的数据，$n \\le 10^9, x, y \\le 100$\n\n100%的数据，$T \\le 100, 1 \\le n \\le 10^{18}, 0 \\le x, y \\le 3000$\n\n来源：2012集训队互测，by gyz", "locale": "zh-CN"}}}
{"pid": "P4465", "type": "P", "difficulty": 6, "samples": [["8\n0 0 894894894\n2 0 2 894\n2 0 9 894\n0 2 6\n2 0 9 64\n2 0 9 894\n1 2 6\n2 0 6 894", "0\n3\n1\n1\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["字符串", "2012", "集训队互测", "后缀自动机 SAM", "分块", "bitset"], "title": "[国家集训队] JZPSTR", "background": null, "description": "你要对一个字符串进行三种操作：\n\n0. 在位置 $x_i$ 处插入一个字符串 $y_i$；\n\n1. 删除位置 $[x_i, y_i)$ 的字符串；\n\n2. 查询位置 $[x_i, y_i)$ 的字符串包含多少次给定的子串 $z_i$。", "inputFormat": "第一行，一个整数 $T$，表示操作个数。\n\n下面 $T$ 行，每行第一个数 $p_i$，表示这个操作的类型：\n\n若 $p_i=0$，则接下来有一个整数 $x_i$ 和一个字符串$y_i$，表示进行插入操作；\n\n若 $p_i=1$，则接下来有两个整数 $x_i$ 和 $y_i$，表示进行删除操作；\n\n若 $p_i=2$，则接下来有两个整数 $x_i$ 和 $y_i$，以及一个字符串 $z_i$，表示进行询问。\n\n字符串的下标从 $0$ 开始（即第一个字符的下标为 $0$）。\n\n初始时字符串为空。\n\n对于插入操作，插入后字符串 $y_i$ 的首字符的下标应为 $x_i$；\n\n对于删除操作，删除的区间 $[x_i, y_i)$ 为左闭右开区间；\n\n对于查询操作，询问的区间 $[x_i, y_i)$ 为左闭右开区间。\n\n所有插入的和查询的字符串均不为空，且只包含字符 $\\texttt 0\\sim\\texttt9$。\n\n所有询问的区间和删除的区间均不为空。\n\n保证输入数据合法。\n\n对于“左闭右开区间”不理解的可以去看样例解释。", "outputFormat": "对每个询问操作，输出一行，表示这个询问的答案。", "hint": "样例解释：\n- 第一次操作后，字符串为 $\\texttt{894894894}$；\n\n- 第二次操作，询问的区间为 $\\texttt{89}$，不包含任何 $\\texttt{894}$；\n\n- 第三次操作，询问的区间为 $\\texttt{894894894}$，包含三个 $\\texttt{894}$；\n\n- 第四次操作后，字符串为 $\\texttt{8964894894}$；\n\n- 第五次操作，询问的区间为 $\\texttt{896489489}$，包含一个 $\\texttt{64}$；\n\n- 第六次操作，询问的区间为 $\\texttt{896489489}$，包含一个 $\\texttt{894}$；\n\n- 第七次操作后，字符串为 $\\texttt{894894}$；\n\n- 第八次操作，询问的区间为 $\\texttt{894894}$，包含两个 $\\texttt{894}$。\n\n数据范围：\n- $50\\%$ 的数据中，询问个数 $\\le100$ （不是操作个数）；\n\n- $100\\%$ 的数据中，插入总长度 $\\le 2\\times10^6$，任何时刻字符串长度 $\\le 10^6$，插入次数 $\\le 1001$，删除次数 $\\le  1000$，询问的 $z_i$ 的总长度 $\\le 10^4$。\n\n来源：2012 集训队互测，by gyz", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] JZPSTR", "background": "", "description": "You need to perform three types of operations on a string:\n0. Insert a string $y_i$ at position $x_i$.\n1. Delete the substring in the interval $[x_i, y_i)$.\n2. Query how many times a given substring $z_i$ occurs in the substring of the interval $[x_i, y_i)$.\n\nThe indices of the string start from $0$ (that is, the first character has index $0$).\n\nInitially, the string is empty.\n\nFor the insertion operation, after insertion the first character of $y_i$ should have index $x_i$.\nFor the deletion operation, the interval $[x_i, y_i)$ is a left-closed, right-open interval.\nFor the query operation, the interval $[x_i, y_i)$ is a left-closed, right-open interval.\n\nAll inserted strings and query strings are non-empty and contain only characters $\\texttt{0}\\sim\\texttt{9}$.\n\nAll query intervals and deletion intervals are non-empty.\n\nThe input is guaranteed to be valid.\n\nIf you do not understand the term \"left-closed, right-open interval\", please see the sample explanation.", "inputFormat": "The first line contains an integer $T$, the number of operations.\n\nIn the following $T$ lines, the first number $p_i$ indicates the type of the operation:\n- If $p_i=0$, then an integer $x_i$ and a string $y_i$ follow, indicating an insertion.\n- If $p_i=1$, then two integers $x_i$ and $y_i$ follow, indicating a deletion.\n- If $p_i=2$, then two integers $x_i$ and $y_i$, and a string $z_i$ follow, indicating a query.", "outputFormat": "For each query operation, output one line with the answer to that query.", "hint": "Sample explanation:\n- After the first operation, the string is $\\texttt{894894894}$.\n- In the second operation, the queried interval is $\\texttt{89}$, which contains no $\\texttt{894}$.\n- In the third operation, the queried interval is $\\texttt{894894894}$, which contains three $\\texttt{894}$.\n- After the fourth operation, the string is $\\texttt{8964894894}$.\n- In the fifth operation, the queried interval is $\\texttt{896489489}$, which contains one $\\texttt{64}$.\n- In the sixth operation, the queried interval is $\\texttt{896489489}$, which contains one $\\texttt{894}$.\n- After the seventh operation, the string is $\\texttt{894894}$.\n- In the eighth operation, the queried interval is $\\texttt{894894}$, which contains two $\\texttt{894}$.\n\nConstraints:\n- In $50\\%$ of the testdata, the number of queries $\\le 100$ (not the number of operations).\n- In $100\\%$ of the testdata, the total inserted length $\\le 2\\times 10^6$, the string length at any time $\\le 10^6$, the number of insertions $\\le 1001$, the number of deletions $\\le 1000$, and the total length of all queried $z_i$ $\\le 10^4$.\n\nSource: 2012 CTT internal contest, by gyz.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] JZPSTR", "background": null, "description": "你要对一个字符串进行三种操作：\n\n0. 在位置 $x_i$ 处插入一个字符串 $y_i$；\n\n1. 删除位置 $[x_i, y_i)$ 的字符串；\n\n2. 查询位置 $[x_i, y_i)$ 的字符串包含多少次给定的子串 $z_i$。", "inputFormat": "第一行，一个整数 $T$，表示操作个数。\n\n下面 $T$ 行，每行第一个数 $p_i$，表示这个操作的类型：\n\n若 $p_i=0$，则接下来有一个整数 $x_i$ 和一个字符串$y_i$，表示进行插入操作；\n\n若 $p_i=1$，则接下来有两个整数 $x_i$ 和 $y_i$，表示进行删除操作；\n\n若 $p_i=2$，则接下来有两个整数 $x_i$ 和 $y_i$，以及一个字符串 $z_i$，表示进行询问。\n\n字符串的下标从 $0$ 开始（即第一个字符的下标为 $0$）。\n\n初始时字符串为空。\n\n对于插入操作，插入后字符串 $y_i$ 的首字符的下标应为 $x_i$；\n\n对于删除操作，删除的区间 $[x_i, y_i)$ 为左闭右开区间；\n\n对于查询操作，询问的区间 $[x_i, y_i)$ 为左闭右开区间。\n\n所有插入的和查询的字符串均不为空，且只包含字符 $\\texttt 0\\sim\\texttt9$。\n\n所有询问的区间和删除的区间均不为空。\n\n保证输入数据合法。\n\n对于“左闭右开区间”不理解的可以去看样例解释。", "outputFormat": "对每个询问操作，输出一行，表示这个询问的答案。", "hint": "样例解释：\n- 第一次操作后，字符串为 $\\texttt{894894894}$；\n\n- 第二次操作，询问的区间为 $\\texttt{89}$，不包含任何 $\\texttt{894}$；\n\n- 第三次操作，询问的区间为 $\\texttt{894894894}$，包含三个 $\\texttt{894}$；\n\n- 第四次操作后，字符串为 $\\texttt{8964894894}$；\n\n- 第五次操作，询问的区间为 $\\texttt{896489489}$，包含一个 $\\texttt{64}$；\n\n- 第六次操作，询问的区间为 $\\texttt{896489489}$，包含一个 $\\texttt{894}$；\n\n- 第七次操作后，字符串为 $\\texttt{894894}$；\n\n- 第八次操作，询问的区间为 $\\texttt{894894}$，包含两个 $\\texttt{894}$。\n\n数据范围：\n- $50\\%$ 的数据中，询问个数 $\\le100$ （不是操作个数）；\n\n- $100\\%$ 的数据中，插入总长度 $\\le 2\\times10^6$，任何时刻字符串长度 $\\le 10^6$，插入次数 $\\le 1001$，删除次数 $\\le  1000$，询问的 $z_i$ 的总长度 $\\le 10^4$。\n\n来源：2012 集训队互测，by gyz", "locale": "zh-CN"}}}
{"pid": "P4466", "type": "P", "difficulty": 6, "samples": [["15", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2012", "集训队互测"], "title": "[国家集训队] 和与积", "background": "", "description": "给出 $n$，统计满足下面条件的数对 $(a,b)$ 的个数：\n\n1. $1\\le a<b \\le n$。\n2. $a+b$ 整除 $a\\times b$。", "inputFormat": "一行一个整数数 $n$。", "outputFormat": "一行一个整数表示答案。", "hint": "| Test | $N$ | Test | $N$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\leq 10$ | $11$ | $\\leq 5\\times 10^7$ |\n| $2$ | $\\leq 50$ | $12$ | $\\leq 10^8$ |\n| $3$ | $\\leq 10^3$ | $13$ | $\\leq 2\\times 10^8$ |\n| $4$ | $\\leq 5\\times 10^3$ | $14$ | $\\leq 3\\times 10^8$ |\n| $5$ | $\\leq 2\\times 10^4$ | $15$ | $\\leq 5\\times 10^8$ |\n| $6$ | $\\leq 2\\times 10^5$ | $16$ | $\\leq 10^9$ |\n| $7$ | $\\leq 2\\times 10^6$ | $17$ | $\\leq 10^9$ |\n| $8$ | $\\leq 10^7$ | $18$ | $\\leq 2^{31}-1$ |\n| $9$ | $\\leq 2\\times 10^7$ | $19$ | $\\leq 2^{31}-1$ |\n| $10$ | $\\leq 3\\times 10^7$ | $20$ | $\\leq 2^{31}-1$ |\n\n来源：2012集训队互测，by ayq", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Sum and Product", "background": "", "description": "Given $n$, count the number of pairs $(a, b)$ that satisfy the following conditions:\n1. $1 \\le a < b \\le n$.\n2. $a + b$ divides $a \\times b$.", "inputFormat": "One line containing an integer $n$.", "outputFormat": "One line containing an integer representing the answer.", "hint": "| Test | $N$ | Test | $N$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\leq 10$ | $11$ | $\\leq 5\\times 10^7$ |\n| $2$ | $\\leq 50$ | $12$ | $\\leq 10^8$ |\n| $3$ | $\\leq 10^3$ | $13$ | $\\leq 2\\times 10^8$ |\n| $4$ | $\\leq 5\\times 10^3$ | $14$ | $\\leq 3\\times 10^8$ |\n| $5$ | $\\leq 2\\times 10^4$ | $15$ | $\\leq 5\\times 10^8$ |\n| $6$ | $\\leq 2\\times 10^5$ | $16$ | $\\leq 10^9$ |\n| $7$ | $\\leq 2\\times 10^6$ | $17$ | $\\leq 10^9$ |\n| $8$ | $\\leq 10^7$ | $18$ | $\\leq 2^{31}-1$ |\n| $9$ | $\\leq 2\\times 10^7$ | $19$ | $\\leq 2^{31}-1$ |\n| $10$ | $\\leq 3\\times 10^7$ | $20$ | $\\leq 2^{31}-1$ |\n\nSource: 2012 CTT mutual test, by ayq.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 和与积", "background": "", "description": "给出 $n$，统计满足下面条件的数对 $(a,b)$ 的个数：\n\n1. $1\\le a<b \\le n$。\n2. $a+b$ 整除 $a\\times b$。", "inputFormat": "一行一个整数数 $n$。", "outputFormat": "一行一个整数表示答案。", "hint": "| Test | $N$ | Test | $N$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\leq 10$ | $11$ | $\\leq 5\\times 10^7$ |\n| $2$ | $\\leq 50$ | $12$ | $\\leq 10^8$ |\n| $3$ | $\\leq 10^3$ | $13$ | $\\leq 2\\times 10^8$ |\n| $4$ | $\\leq 5\\times 10^3$ | $14$ | $\\leq 3\\times 10^8$ |\n| $5$ | $\\leq 2\\times 10^4$ | $15$ | $\\leq 5\\times 10^8$ |\n| $6$ | $\\leq 2\\times 10^5$ | $16$ | $\\leq 10^9$ |\n| $7$ | $\\leq 2\\times 10^6$ | $17$ | $\\leq 10^9$ |\n| $8$ | $\\leq 10^7$ | $18$ | $\\leq 2^{31}-1$ |\n| $9$ | $\\leq 2\\times 10^7$ | $19$ | $\\leq 2^{31}-1$ |\n| $10$ | $\\leq 3\\times 10^7$ | $20$ | $\\leq 2^{31}-1$ |\n\n来源：2012集训队互测，by ayq", "locale": "zh-CN"}}}
{"pid": "P4467", "type": "P", "difficulty": 6, "samples": [["5 20 10 1 5\n1 2 1\n1 3 2\n1 4 1\n1 5 3\n2 1 1\n2 3 1\n2 4 2\n2 5 2\n3 1 1\n3 2 2\n3 4 1\n3 5 1\n4 1 1\n4 2 1\n4 3 1\n4 5 2\n5 1 1\n5 2 1\n5 3 1\n5 4 1", "1-2-4-3-5"], ["4 6 1 1 4\n2 4 2\n1 3 2\n1 2 1\n1 4 3\n2 3 1\n3 4 1", "1-2-3-4"], ["3 3 5 1 3\n1 2 1\n2 3 1\n1 3 1", "No"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "2007", "四川", "各省省选", "排序", "最短路"], "title": "[SCOI2007] k短路", "background": "", "description": "有 $n$ 个城市和 $m$ 条单向道路，城市编号为 $1$ 到 $n$。每条道路连接两个不同的城市，且任意两条道路要么起点不同要么终点不同，因此 $n$ 和 $m$ 满足$m \\le n(n-1)$。\n\n给定两个城市 $a$ 和 $b$，可以给 $a$ 到 $b$ 的所有简单路（所有城市最多经过一次，包括起点和终点）排序：先按长度从小到大排序，长度相同时按照字典序从小到大排序。你的任务是求出 $a$ 到 $b$ 的第 $k$ 短路。\n", "inputFormat": "输入第一行包含五个正整数 $n,m,k,a,b$。\n\n以下 $m$ 行每行三个整数 $u,v,l$，表示从城市 $u$ 到城市 $v$ 有一条长度为 $l$ 的单向道路。", "outputFormat": "如果 $a$ 到 $b$ 的简单路不足 $k$ 条，输出 `No`，否则输出第 $k$ 短路：从城市 $a$ 开始依次输出每个到达的城市，直到城市 $b$，中间用减号 `-` 分割。", "hint": "第一个例子有 $5$ 个城市，所有可能出现的道路均存在。从城市 $1$ 到城市 $5$ 一共有 $5$ 条简单路，排序如下：\n\n![](https://cdn.luogu.com.cn/upload/pic/17706.png)\n\n- $20\\%$ 的数据满足：$n\\leq 5$；\n- $40\\%$ 的数据满足：$n\\leq 30$；\n- $100\\%$ 的数据满足：$2\\leq n\\leq 50$，$1\\leq k\\leq 200$，$1\\le l\\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2007] k-th Shortest Path", "background": "", "description": "There are $n$ cities and $m$ directed roads, with cities numbered from $1$ to $n$. Each road connects two different cities, and for any two roads, either their starting cities differ or their ending cities differ. Therefore, $n$ and $m$ satisfy $m \\le n(n-1)$.\n\nGiven two cities $a$ and $b$, you can sort all simple paths (each city appears at most once, including the start and end) from $a$ to $b$: first by total length in ascending order, and if lengths are equal, by lexicographical order in ascending order. Your task is to find the $k$-th shortest path from $a$ to $b$.", "inputFormat": "The first line contains five positive integers $n, m, k, a, b$.\n\nEach of the following $m$ lines contains three integers $u, v, l$, indicating there is a directed road from city $u$ to city $v$ with length $l$.", "outputFormat": "If there are fewer than $k$ simple paths from $a$ to $b$, output `No`. Otherwise, output the $k$-th shortest path: starting from city $a$, output each visited city in order until city $b$, separated by hyphens `-`.", "hint": "In the first example, there are $5$ cities and all possible roads exist. There are $5$ simple paths from city $1$ to city $5$, sorted as follows:\n\n![](https://cdn.luogu.com.cn/upload/pic/17706.png)\n\n- 20% of the testdata: $n \\le 5$.\n- 40% of the testdata: $n \\le 30$.\n- 100% of the testdata: $2 \\le n \\le 50$, $1 \\le k \\le 200$, $1 \\le l \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2007] k短路", "background": "", "description": "有 $n$ 个城市和 $m$ 条单向道路，城市编号为 $1$ 到 $n$。每条道路连接两个不同的城市，且任意两条道路要么起点不同要么终点不同，因此 $n$ 和 $m$ 满足$m \\le n(n-1)$。\n\n给定两个城市 $a$ 和 $b$，可以给 $a$ 到 $b$ 的所有简单路（所有城市最多经过一次，包括起点和终点）排序：先按长度从小到大排序，长度相同时按照字典序从小到大排序。你的任务是求出 $a$ 到 $b$ 的第 $k$ 短路。\n", "inputFormat": "输入第一行包含五个正整数 $n,m,k,a,b$。\n\n以下 $m$ 行每行三个整数 $u,v,l$，表示从城市 $u$ 到城市 $v$ 有一条长度为 $l$ 的单向道路。", "outputFormat": "如果 $a$ 到 $b$ 的简单路不足 $k$ 条，输出 `No`，否则输出第 $k$ 短路：从城市 $a$ 开始依次输出每个到达的城市，直到城市 $b$，中间用减号 `-` 分割。", "hint": "第一个例子有 $5$ 个城市，所有可能出现的道路均存在。从城市 $1$ 到城市 $5$ 一共有 $5$ 条简单路，排序如下：\n\n![](https://cdn.luogu.com.cn/upload/pic/17706.png)\n\n- $20\\%$ 的数据满足：$n\\leq 5$；\n- $40\\%$ 的数据满足：$n\\leq 30$；\n- $100\\%$ 的数据满足：$2\\leq n\\leq 50$，$1\\leq k\\leq 200$，$1\\le l\\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P4468", "type": "P", "difficulty": 7, "samples": [["2\n-0.5 -0.5 1 1\n1 75 0 75\n6\n10 60\n80 60\n30 40\n10 10\n50 50\n20 50", "4\n2\n2\n0\n0\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "四川", "各省省选"], "title": "[SCOI2007] 折纸", "background": "", "description": "桌上有一张边界平行于坐标轴的正方形纸片，左下角的坐标为(0,0)，右上角的坐标为(100,100)。接下来执行n条折纸命令。每条命令用两个不同点P1(x1,y1)和P2(x2,y2)来表示，执行时把当前的折纸作品沿着P1P2所在直线折叠，并把有向线段P1P2的右边折向左边（左边的部分保持不变）。\n\n折叠结束后，需要在作品上打一个孔，然后用绳子穿起来挂在墙上。孔的位置是相当重要的：若需要穿过太多层的纸，打孔本身比较困难；若穿过的层数太少，悬挂起来以后作品可能会被撕破。为了选择一个比较合适的打孔位置，你需要计算在每个候选位置打孔时穿过的层数。如果恰好穿过某一层的边界（误差0.000001内），则该层不统计在结果中。\n\n本题考虑一个简化的模型：纸的厚度不计，因此折纸操作总能完美执行。\n", "inputFormat": "输入第一行为一个整数n，即折纸的次数。以下n行每行四个实数x1,y1,x2,y2，表示每次折纸时对应的有向线段。\n\n下一行包含一个正整数m，即候选位置的个数，以下每行包含两个实数x,y，表示一个候选位置。", "outputFormat": "每个候选位置输出一行，包含一个整数，即该位置打孔时穿过的层数。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/17707.png )\n\n20%的数据满足：n<=1\n\n100%的数据满足：0<=n<=8, 1<=m<=50\n", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2007] Folding Paper", "background": "", "description": "There is a square sheet of paper on the table with edges parallel to the coordinate axes. The lower-left corner is at $ (0, 0) $, and the upper-right corner is at $ (100, 100) $. Next, you will execute $n$ folding commands. Each command is specified by two distinct points $P_1(x_1, y_1)$ and $P_2(x_2, y_2)$. When executing a command, fold the current work along the line through $P_1P_2$, and fold the right side of the directed segment $ \\overrightarrow{P_1P_2} $ toward the left side (the left side remains unchanged).\n\nAfter all folds, you need to punch a hole in the work and thread a string through it to hang it on the wall. The hole’s position is crucial: if it goes through too many layers of paper, punching the hole is difficult; if it goes through too few layers, the work may tear when hung. To choose a suitable hole position, you need to compute, for each candidate position, the number of layers the hole passes through. If the hole lies exactly on the boundary of a layer (within $0.000001$), that layer is not counted.\n\nThis problem uses a simplified model: the paper has zero thickness, so each folding operation can be performed perfectly.", "inputFormat": "The first line contains an integer $n$, the number of folds. Each of the next $n$ lines contains four real numbers $x_1, y_1, x_2, y_2$, representing the directed segment used for that fold.\n\nThe next line contains a positive integer $m$, the number of candidate positions. Each of the following $m$ lines contains two real numbers $x, y$, representing a candidate position.", "outputFormat": "For each candidate position, output one line containing an integer, which is the number of layers the hole passes through at that position.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/17707.png )\n\nConstraints:\n- $20\\%$ of the testdata satisfy $n \\le 1$.\n- $100\\%$ of the testdata satisfy $0 \\le n \\le 8$, $1 \\le m \\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2007] 折纸", "background": "", "description": "桌上有一张边界平行于坐标轴的正方形纸片，左下角的坐标为(0,0)，右上角的坐标为(100,100)。接下来执行n条折纸命令。每条命令用两个不同点P1(x1,y1)和P2(x2,y2)来表示，执行时把当前的折纸作品沿着P1P2所在直线折叠，并把有向线段P1P2的右边折向左边（左边的部分保持不变）。\n\n折叠结束后，需要在作品上打一个孔，然后用绳子穿起来挂在墙上。孔的位置是相当重要的：若需要穿过太多层的纸，打孔本身比较困难；若穿过的层数太少，悬挂起来以后作品可能会被撕破。为了选择一个比较合适的打孔位置，你需要计算在每个候选位置打孔时穿过的层数。如果恰好穿过某一层的边界（误差0.000001内），则该层不统计在结果中。\n\n本题考虑一个简化的模型：纸的厚度不计，因此折纸操作总能完美执行。\n", "inputFormat": "输入第一行为一个整数n，即折纸的次数。以下n行每行四个实数x1,y1,x2,y2，表示每次折纸时对应的有向线段。\n\n下一行包含一个正整数m，即候选位置的个数，以下每行包含两个实数x,y，表示一个候选位置。", "outputFormat": "每个候选位置输出一行，包含一个整数，即该位置打孔时穿过的层数。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/17707.png )\n\n20%的数据满足：n<=1\n\n100%的数据满足：0<=n<=8, 1<=m<=50\n", "locale": "zh-CN"}}}
{"pid": "P4469", "type": "P", "difficulty": 7, "samples": [["6 20\n30 40 50 50 50 50\n50 50 50 50 50 40\n1 1 6 6 300 320", "300 6.25\n318 5.60"], ["8 2\n10 20 20 30 10 20 10 10\n10 20 20 30 10 20 10 20\n6 8 2 4 10 39", "No"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "四川", "各省省选"], "title": "[SCOI2007] 最优驾车", "background": "", "description": "有n条南北方向的双向街道和n条东西方向的双向街道纵横交错。相邻街道（不管是哪个走向）的距离均为L英里。西南角交叉口的坐标为$(1,1)$，东北角为$(n,n)$。在所有交叉口均可任意改变行驶方向。每条街道有它自己的最高速度限制，该限制对整条街道有效（不管行驶方向如何）。\n\n你的任务是从交叉口$(x_s,y_s)$开车行驶到$(x_t,y_t)$，要求只能在交叉口处改变速度，行驶过程中不得违反所在街道的速度限制，只能沿着路程最短的线路行驶，并且行驶时间在给定的闭区间$[t_1,t_2]$内。车速以“每小时英里数”为单位，它必须是$5$的正整数倍。若车速为$v$，则每加仑汽油能行驶的英里数为$80-0.03v^2$。", "inputFormat": "输入第一行为两个整数$n, L$。  \n第二行包含$n$个正整数，从南到北描述$n$条东西走向的街道的速度限制。  \n第三行包含$n$个正整数，从西到东描述$n$条南北走向的街道的速度限制。  \n第四行包含六个正整数$x_s, y_s, x_t, y_t, t_1, t_2$。", "outputFormat": "如果无解，输出No。\n\n否则输出两行，分别描述最早到达的方案（若有多种方案，选择其中最省油的）和最省油的方案（如果有多种方案，选择其中最早到达的）。每种方案用两个数表示，第一个数表示到达时刻（单位：分钟，向上取整）；第二个数表示耗油量（单位：加仑，四舍五入保留两位小数）。", "hint": "样例1的最快路线为以40英里/小时为速度匀速前进，路程为200英里，因此时间为5小时，每加仑汽油可以行驶80-0.03*40*40=32英里，因此耗油量为200/32=6.25加仑。\n\n最省油路线是先以40英里/小时行驶120英里，然后以35英里/小时行驶80英里，耗油量为120/32+80/(80-0.03*35*35)=5.60加仑。下图的路线可以同时满足两种方案（其中第二种方案需要在(6,2)处改变速度）。\n\n![](https://cdn.luogu.com.cn/upload/pic/17708.png )\n\n20%的数据满足：n<=4\n\n50%的数据满足：n<=8\n\n100%的数据满足：1<=n<=10, 1<=l<=20, 0<=t1<=t2<=1000. 速度限制不超过50\n", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2007] Optimal Driving", "background": "", "description": "There are $n$ north–south two-way streets and $n$ east–west two-way streets forming a grid. The distance between any two adjacent streets (regardless of orientation) is $L$ miles. The southwest corner intersection has coordinates $(1, 1)$, and the northeast corner is $(n, n)$. At any intersection, you may change direction arbitrarily. Each street has its own speed limit, which applies to the entire street regardless of travel direction.\n\nYour task is to drive from intersection $(x_s, y_s)$ to $(x_t, y_t)$. You may change speed only at intersections; you must not violate the speed limit of the street you are currently on; you may only travel along paths of minimal length; and the total travel time must lie within the closed interval $[t_1, t_2]$. Speed is measured in miles per hour and must be a positive multiple of $5$. If the speed is $v$, then the miles per gallon is $80 - 0.03 v^2$.", "inputFormat": "- The first line contains two integers $n, L$.\n- The second line contains $n$ positive integers, giving the speed limits of the $n$ east–west streets from south to north.\n- The third line contains $n$ positive integers, giving the speed limits of the $n$ north–south streets from west to east.\n- The fourth line contains six integers $x_s, y_s, x_t, y_t, t_1, t_2$.", "outputFormat": "If there is no solution, output No.\n\nOtherwise, output two lines describing, respectively, the earliest-arrival plan (if multiple, choose the most fuel-efficient among them) and the most fuel-efficient plan (if multiple, choose the earliest-arrival among them). Each plan is represented by two numbers: the arrival time in minutes (ceiling to the next integer), and the fuel consumption in gallons (rounded to two decimal places).", "hint": "In Sample 1, the fastest route travels at a constant speed of $40$ miles per hour, with a total distance of $200$ miles, so the time is $5$ hours. The miles per gallon is $80 - 0.03 \\times 40 \\times 40 = 32$, so the fuel consumption is $200 / 32 = 6.25$ gallons.\n\nThe most fuel-efficient route first travels $120$ miles at $40$ miles per hour, then $80$ miles at $35$ miles per hour, for a fuel consumption of $120 / 32 + 80 / \\bigl(80 - 0.03 \\times 35 \\times 35\\bigr) = 5.60$ gallons. The route in the figure satisfies both plans (the second plan changes speed at $(6, 2)$).\n\n![](https://cdn.luogu.com.cn/upload/pic/17708.png)\n\nConstraints:\n- 20% of the testdata satisfy: $n \\le 4$.\n- 50% of the testdata satisfy: $n \\le 8$.\n- 100% of the testdata satisfy: $1 \\le n \\le 10$, $1 \\le L \\le 20$, $0 \\le t_1 \\le t_2 \\le 1000$. Speed limits do not exceed $50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2007] 最优驾车", "background": "", "description": "有n条南北方向的双向街道和n条东西方向的双向街道纵横交错。相邻街道（不管是哪个走向）的距离均为L英里。西南角交叉口的坐标为$(1,1)$，东北角为$(n,n)$。在所有交叉口均可任意改变行驶方向。每条街道有它自己的最高速度限制，该限制对整条街道有效（不管行驶方向如何）。\n\n你的任务是从交叉口$(x_s,y_s)$开车行驶到$(x_t,y_t)$，要求只能在交叉口处改变速度，行驶过程中不得违反所在街道的速度限制，只能沿着路程最短的线路行驶，并且行驶时间在给定的闭区间$[t_1,t_2]$内。车速以“每小时英里数”为单位，它必须是$5$的正整数倍。若车速为$v$，则每加仑汽油能行驶的英里数为$80-0.03v^2$。", "inputFormat": "输入第一行为两个整数$n, L$。  \n第二行包含$n$个正整数，从南到北描述$n$条东西走向的街道的速度限制。  \n第三行包含$n$个正整数，从西到东描述$n$条南北走向的街道的速度限制。  \n第四行包含六个正整数$x_s, y_s, x_t, y_t, t_1, t_2$。", "outputFormat": "如果无解，输出No。\n\n否则输出两行，分别描述最早到达的方案（若有多种方案，选择其中最省油的）和最省油的方案（如果有多种方案，选择其中最早到达的）。每种方案用两个数表示，第一个数表示到达时刻（单位：分钟，向上取整）；第二个数表示耗油量（单位：加仑，四舍五入保留两位小数）。", "hint": "样例1的最快路线为以40英里/小时为速度匀速前进，路程为200英里，因此时间为5小时，每加仑汽油可以行驶80-0.03*40*40=32英里，因此耗油量为200/32=6.25加仑。\n\n最省油路线是先以40英里/小时行驶120英里，然后以35英里/小时行驶80英里，耗油量为120/32+80/(80-0.03*35*35)=5.60加仑。下图的路线可以同时满足两种方案（其中第二种方案需要在(6,2)处改变速度）。\n\n![](https://cdn.luogu.com.cn/upload/pic/17708.png )\n\n20%的数据满足：n<=4\n\n50%的数据满足：n<=8\n\n100%的数据满足：1<=n<=10, 1<=l<=20, 0<=t1<=t2<=1000. 速度限制不超过50\n", "locale": "zh-CN"}}}
{"pid": "P4470", "type": "P", "difficulty": 2, "samples": [["4\nZAGREB\nSISAK\nZADAR\nZABOK\nZA", "****B*D*\n*G******\n********\n********"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["模拟", "字符串", "2018", "北京", "枚举"], "title": "[BJWC2018] 售票", "background": "", "description": "C 市火车站最近出现了一种新式自动售票机。买票时，乘客要先在售票机上输入终点名称。一共有 $N$ 处目的地，随着乘客按顺序输入终点名称的每个字母，候选终点站数目会逐渐减少。\n\n在自动售票机屏幕上，有一个 $4$ 行 $8$ 列的键盘，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/pic/17861.png)\n\n在乘客每输入一个字母后，键盘上只有有效字符是可选的（取决于还有哪些候选终点站），其余的字母会被字符 `*` 取代。\n\n告诉你 $N$ 处目的地的名称，以及乘客已经输入的若干字符，请你输出键盘目前的状态。", "inputFormat": "第一行为一个整数 $N (1\\leq N \\leq 50)$。接下来 $N$ 行，每行一个由大写英文字母组成的长度不超过 $100$ 的字符串，表示一处目的地。最后一行，一个长度不超过 $100$ 的字符串，表示按顺序输入的若干字符。\n", "outputFormat": "输出 $4$ 行，每行一个长度为 $8$ 的字符串，表示键盘状态。", "hint": "**【样例解释】**\n\n输入 `ZA` 以后，下一个字符可能是 `G`（终点站有可能是 `ZAGREB`），或 `D`（终点站有可能是 `ZADAR`），或 `B`（终点站有可能是 `ZABOK`）。", "locale": "zh-CN", "translations": {"en": {"title": "[BJWC2018] Ticket Vending", "background": "", "description": "A new type of automatic ticket machine has appeared at the train station in city C. When buying a ticket, the passenger first enters the destination name on the machine. There are $N$ destinations in total. As the passenger types each letter in order, the number of candidate destinations gradually decreases.\n\nOn the machine screen, there is a keyboard with $4$ rows and $8$ columns, as shown in the figure below.\n\n![](https://cdn.luogu.com.cn/upload/pic/17861.png)\n\nAfter each letter is entered, only the valid characters on the keyboard are selectable (depending on the remaining candidate destinations), and the other letters are replaced by the character `*`.\n\nGiven the names of $N$ destinations and the characters already typed by the passenger, output the current state of the keyboard.", "inputFormat": "The first line contains an integer $N$ ($1 \\leq N \\leq 50$). The next $N$ lines each contain a string of uppercase English letters with length at most $100$, representing a destination. The last line contains a string with length at most $100$, representing the characters typed in order.", "outputFormat": "Output $4$ lines, each being a string of length $8$, representing the keyboard state.", "hint": "Sample explanation:\n\nAfter typing `ZA`, the next character could be `G` (the destination could be `ZAGREB`), or `D` (the destination could be `ZADAR`), or `B` (the destination could be `ZABOK`).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BJWC2018] 售票", "background": "", "description": "C 市火车站最近出现了一种新式自动售票机。买票时，乘客要先在售票机上输入终点名称。一共有 $N$ 处目的地，随着乘客按顺序输入终点名称的每个字母，候选终点站数目会逐渐减少。\n\n在自动售票机屏幕上，有一个 $4$ 行 $8$ 列的键盘，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/pic/17861.png)\n\n在乘客每输入一个字母后，键盘上只有有效字符是可选的（取决于还有哪些候选终点站），其余的字母会被字符 `*` 取代。\n\n告诉你 $N$ 处目的地的名称，以及乘客已经输入的若干字符，请你输出键盘目前的状态。", "inputFormat": "第一行为一个整数 $N (1\\leq N \\leq 50)$。接下来 $N$ 行，每行一个由大写英文字母组成的长度不超过 $100$ 的字符串，表示一处目的地。最后一行，一个长度不超过 $100$ 的字符串，表示按顺序输入的若干字符。\n", "outputFormat": "输出 $4$ 行，每行一个长度为 $8$ 的字符串，表示键盘状态。", "hint": "**【样例解释】**\n\n输入 `ZA` 以后，下一个字符可能是 `G`（终点站有可能是 `ZAGREB`），或 `D`（终点站有可能是 `ZADAR`），或 `B`（终点站有可能是 `ZABOK`）。", "locale": "zh-CN"}}}
{"pid": "P4471", "type": "P", "difficulty": 5, "samples": [["5\nask\npsk\nk\nkrafna\nsk", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2018", "北京", "树形 DP", "字典树 Trie"], "title": "[BJWC2018] 词韵", "background": null, "description": "Adrian 很喜欢诗歌中的韵。他认为，两个单词押韵当且仅当它们的最长公共后缀的长度至少是其中较长单词的长度减一。也就是说，单词A 与单词B 押韵当且仅当 $\\operatorname{LCS}(A,B) \\ge \\max(|A|,|B|)- 1$。（其中 $\\operatorname{LCS}$ 是最长公共后缀 longest common suffix 的缩写）\n\n现在，Adrian 得到了 $N$ 个单词。他想从中选出尽可能多的单词，要求它们能组成一个单词序列，使得单词序列中任何两个相邻单词是押韵的。", "inputFormat": "第一行是一个整数 $N$。\n\n接下来 $N$ 行，每行一个由小写英文字母组成的字符串，表示每个单词。所有单词互不相同。", "outputFormat": "输出一行，为一个整数，表示最长单词序列的长度。", "hint": "**【样例解释】**\n\n一种最长单词序列是 `ask-psk-sk-k`。\n\n**【数据规模和约定】**\n\n$30\\%$ 的测试数据：$1 \\le N \\le 20$，所有单词长度之和不超过 $3000$。\n\n$100\\%$ 的测试数据：$1 \\le N \\le 5 \\times 10^5$，所有单词长度之和不超过 $3 \\times 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[BJWC2018] Rhyme", "background": "", "description": "Adrian likes rhyme in poetry. He thinks two words rhyme if and only if the length of their longest common suffix is at least the length of the longer word minus one. That is, words A and B rhyme if and only if $\\operatorname{LCS}(A,B) \\ge \\max(|A|,|B|)- 1$. (Here, $\\operatorname{LCS}$ is the abbreviation for the longest common suffix.)\n\nNow Adrian has $N$ words. He wants to select as many words as possible to form a sequence such that any two adjacent words in the sequence rhyme.", "inputFormat": "The first line contains an integer $N$.\n\nEach of the next $N$ lines contains a string consisting of lowercase English letters, representing a word. All words are distinct.", "outputFormat": "Output a single line with one integer, the length of the longest word sequence.", "hint": "**[Sample Explanation]**\n\nOne longest word sequence is `ask-psk-sk-k`.\n\n**[Constraints]**\n\n30% of the testdata: $1 \\le N \\le 20$, and the sum of word lengths does not exceed $3000$.\n\n100% of the testdata: $1 \\le N \\le 5 \\times 10^5$, and the sum of word lengths does not exceed $3 \\times 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BJWC2018] 词韵", "background": null, "description": "Adrian 很喜欢诗歌中的韵。他认为，两个单词押韵当且仅当它们的最长公共后缀的长度至少是其中较长单词的长度减一。也就是说，单词A 与单词B 押韵当且仅当 $\\operatorname{LCS}(A,B) \\ge \\max(|A|,|B|)- 1$。（其中 $\\operatorname{LCS}$ 是最长公共后缀 longest common suffix 的缩写）\n\n现在，Adrian 得到了 $N$ 个单词。他想从中选出尽可能多的单词，要求它们能组成一个单词序列，使得单词序列中任何两个相邻单词是押韵的。", "inputFormat": "第一行是一个整数 $N$。\n\n接下来 $N$ 行，每行一个由小写英文字母组成的字符串，表示每个单词。所有单词互不相同。", "outputFormat": "输出一行，为一个整数，表示最长单词序列的长度。", "hint": "**【样例解释】**\n\n一种最长单词序列是 `ask-psk-sk-k`。\n\n**【数据规模和约定】**\n\n$30\\%$ 的测试数据：$1 \\le N \\le 20$，所有单词长度之和不超过 $3000$。\n\n$100\\%$ 的测试数据：$1 \\le N \\le 5 \\times 10^5$，所有单词长度之和不超过 $3 \\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P4472", "type": "P", "difficulty": 5, "samples": [["1 2 2\nab", "5/16"], ["3 3 10\nban\nana\nnab", "2/27"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2018", "北京"], "title": "[BJWC2018] 八维", "background": "", "description": "我们将一个 $M$ 行 $N$ 列的字符矩阵无限复制，可以得到一个无限字符矩阵。例如，对于以下矩阵:\n\n$$\\begin{aligned}\n& \\verb!honi! \\\\\n& \\verb!hsin! \\\\\n\\end{aligned}$$\n\n可以无限复制出矩阵\n\n$$\\begin{aligned}\n& \\verb!...honihonihonihoni...! \\\\\n& \\verb!...hsinhsinhsinhsin...! \\\\\n& \\verb!...honihonihonihoni...! \\\\\n& \\verb!...hsinhsinhsinhsin...! \\\\\n\\end{aligned}$$\n\n我们认为矩阵是八连通的。八连通，  指矩阵中的每个位置与上下左右和四个斜向（左上、右上、左下、右下）的位置相邻。因此，从矩阵任意位置出发沿八个方向中的任意一个都可以无限延长。\n\n如果我们随机选择一个位置和一个方向，则可以从此位置开始沿此方向连续选取 $K$ 个字符组成一个字符串。问，两次这样操作得到两个相同字符串的概率是多少。(假设随机选择时任意位置是等可能的，任意方向也是等可能的)", "inputFormat": "第一行是三个整数 $M,  N,  K$。\n\n接下来 $M$ 行，  每行一个由小写英文字母组成的长度为 $N$ 的字符串，即 $M\\times N$ 的字符矩阵。保证矩阵中至少出现两种不同字符。", "outputFormat": "输出一行，为一个化简后的分数，表示概率。", "hint": "**【样例解释】**\n\n样例一中，一次操作共有 $16$ 种可能，其中得到 $\\verb!aa!$ 的概率是 $1/8$，得到 $\\verb!ab!$ 的概率是 $3/8$,得到bb 的概率是 $1/8$，得到 $\\verb!ba!$ 的概率是 $\\verb!3/8!$。两次操作结果相同的\n概率是 $5/16$。\n\n**【数据规模和约定】**\n\n- 对于 $30\\%$ 的测试数据：$M, N ≤ 10$，$K ≤ 100$。\n- 对于 $50\\%$ 的测试数据：$M = N$。\n- 对于 $100\\%$ 的测试数据 ：$1 ≤ M,N ≤ 500$，$2 ≤ K ≤ 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[BJWC2018] Eight Dimensions", "background": "", "description": "We infinitely tile a character matrix with $M$ rows and $N$ columns to obtain an infinite character matrix. For example, for the following matrix:\n\n$$\\begin{aligned}\n& \\verb!honi! \\\\\n& \\verb!hsin! \\\\\n\\end{aligned}$$\n\nwe can tile it infinitely to get\n\n$$\\begin{aligned}\n& \\verb!...honihonihonihoni...! \\\\\n& \\verb!...hsinhsinhsinhsin...! \\\\\n& \\verb!...honihonihonihoni...! \\\\\n& \\verb!...hsinhsinhsinhsin...! \\\\\n\\end{aligned}$$\n\nWe consider the matrix to be 8-connected. 8-connected means each position in the matrix is adjacent to the positions above, below, left, right, and the four diagonals (upper-left, upper-right, lower-left, lower-right). Therefore, starting from any position in the matrix, you can extend infinitely along any one of the eight directions.\n\nIf we uniformly at random choose one position and one direction, then starting from this position and going along this direction, we take $K$ consecutive characters to form a string. What is the probability that two such operations produce identical strings? (Assume any position is equally likely and any direction is equally likely.)", "inputFormat": "The first line contains three integers $M, N, K$.\n\nThe next $M$ lines each contain a string of length $N$ consisting of lowercase English letters, forming the $M \\times N$ character matrix. It is guaranteed that at least two different characters appear in the matrix.", "outputFormat": "Output one line containing a reduced fraction representing the probability.", "hint": "【Sample Explanation】\n\nIn Sample 1, there are $16$ possibilities for one operation in total. The probability of obtaining \\verb!aa! is $1/8$, the probability of obtaining \\verb!ab! is $3/8$, the probability of obtaining \\verb!bb! is $1/8$, and the probability of obtaining \\verb!ba! is $3/8$. The probability that the results of two operations are the same is $5/16$.\n\n【Constraints】\n\n- For $30\\%$ of the testdata: $M, N \\le 10$, $K \\le 100$.\n- For $50\\%$ of the testdata: $M = N$.\n- For $100\\%$ of the testdata: $1 \\le M, N \\le 500$, $2 \\le K \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BJWC2018] 八维", "background": "", "description": "我们将一个 $M$ 行 $N$ 列的字符矩阵无限复制，可以得到一个无限字符矩阵。例如，对于以下矩阵:\n\n$$\\begin{aligned}\n& \\verb!honi! \\\\\n& \\verb!hsin! \\\\\n\\end{aligned}$$\n\n可以无限复制出矩阵\n\n$$\\begin{aligned}\n& \\verb!...honihonihonihoni...! \\\\\n& \\verb!...hsinhsinhsinhsin...! \\\\\n& \\verb!...honihonihonihoni...! \\\\\n& \\verb!...hsinhsinhsinhsin...! \\\\\n\\end{aligned}$$\n\n我们认为矩阵是八连通的。八连通，  指矩阵中的每个位置与上下左右和四个斜向（左上、右上、左下、右下）的位置相邻。因此，从矩阵任意位置出发沿八个方向中的任意一个都可以无限延长。\n\n如果我们随机选择一个位置和一个方向，则可以从此位置开始沿此方向连续选取 $K$ 个字符组成一个字符串。问，两次这样操作得到两个相同字符串的概率是多少。(假设随机选择时任意位置是等可能的，任意方向也是等可能的)", "inputFormat": "第一行是三个整数 $M,  N,  K$。\n\n接下来 $M$ 行，  每行一个由小写英文字母组成的长度为 $N$ 的字符串，即 $M\\times N$ 的字符矩阵。保证矩阵中至少出现两种不同字符。", "outputFormat": "输出一行，为一个化简后的分数，表示概率。", "hint": "**【样例解释】**\n\n样例一中，一次操作共有 $16$ 种可能，其中得到 $\\verb!aa!$ 的概率是 $1/8$，得到 $\\verb!ab!$ 的概率是 $3/8$,得到bb 的概率是 $1/8$，得到 $\\verb!ba!$ 的概率是 $\\verb!3/8!$。两次操作结果相同的\n概率是 $5/16$。\n\n**【数据规模和约定】**\n\n- 对于 $30\\%$ 的测试数据：$M, N ≤ 10$，$K ≤ 100$。\n- 对于 $50\\%$ 的测试数据：$M = N$。\n- 对于 $100\\%$ 的测试数据 ：$1 ≤ M,N ≤ 500$，$2 ≤ K ≤ 10^9$。", "locale": "zh-CN"}}}
{"pid": "P4473", "type": "P", "difficulty": 6, "samples": [["4 4\n0 0 0 0\n1 2 2 0\n0 2 2 1\n0 0 0 0\n5 5 5 5\n5 5 5 5\n5 5 5 5\n5 5 5 5\n2 1 3 4 2 2", "Z\n15"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2011", "线段树", "并查集", "集训队互测", "O2优化", "最短路"], "title": "[国家集训队] 飞飞侠", "background": "来源：国家集训队 2011 何朴藩", "description": "飞飞国是一个传说中的国度，国家的居民叫做飞飞侠。飞飞国是一个 $N\\times M$ 的矩形方阵，每个格子代表一个街区。\n\n然而飞飞国是没有交通工具的。飞飞侠完全靠地面的弹射装置来移动。  \n\n每个街区都装有弹射装置。使用弹射装置是需要支付一定费用的。而且每个弹射装置都有自己的弹射能力。  \n\n我们设第 $i$ 行第 $j$ 列的弹射装置有 $A_{i,j}$ 的费用和 $B_{i,j}$ 的弹射能力。并规定有相邻边的格子间距离是 $1$。那么，任何飞飞侠都只需要在 $(i,j)$ 支付 $A_{i,j}$ 的费用就可以任意选择弹到距离不超过 $B_{i,j}$ 的位置了。如下图  \n![https://cdn.luogu.com.cn/upload/pic/17919.png](https://cdn.luogu.com.cn/upload/pic/17919.png)  \n（从红色街区交费以后可以跳到周围的任意蓝色街区。）  \n\n现在的问题很简单。有三个飞飞侠，分别叫做 $X, Y, Z$。现在它们决定聚在一起玩，于是想往其中一人的位置集合。告诉你 $3$ 个飞飞侠的坐标，求往哪里集合大家需要花的费用总和最低。（费用相同时优先 $X$，次优先 $Y$）", "inputFormat": "输入的第一行包含两个整数 $N$ 和 $M$，分别表示行数和列数。\n\n接下来是 $2$ 个 $N\\times M$ 的自然数矩阵，为 $B_{i,j}$ 和 $A_{i,j}$。\n\n最后一行六个数，分别代表 $X, Y, Z$ 所在地的行号和列号。", "outputFormat": "第一行输出一个字符 $X, Y$ 或者 $Z$。表示最优集合地点。\n\n第二行输出一个整数，表示最小费用。\n\n如果无法集合，只输出一行 `NO`。  ", "hint": "对于 $20\\%$ 的数据，$N, M\\leq 10$，$B_{i,j}\\leq 20$。 \n\n对于 $40\\%$ 的数据，$N, M \\leq 100$，$B_{i,j}\\leq 20$。\n\n对于 $100\\%$ 的数据，$1\\leq N, M\\leq 150$，$0\\leq B_{i, j}\\leq 10^9$，$0\\leq A_{i, j}\\leq 1000$。  ", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Fei Fei Xia", "background": "Source: CTT 2011 He Pufan.", "description": "Fei Fei Country is a legendary land, and its residents are called \"Fei Fei Xia\" (pinyin).\n\nFei Fei Country is an $N\\times M$ rectangular grid, where each cell represents a block.\n\nHowever, there is no transportation in Fei Fei Country. Fei Fei Xia move entirely using ground-based launch devices.\n\nEvery block is equipped with a launch device. Using a launch device requires paying a certain fee, and each device has its own launching capability.\n\nLet the launch device at row $i$, column $j$ have a fee $A_{i,j}$ and a launching capability $B_{i,j}$. We define the distance between two cells sharing an edge to be $1$. Then, any Fei Fei Xia only needs to pay $A_{i,j}$ at $(i, j)$ to jump to any position whose distance from $(i, j)$ is no more than $B_{i,j}$. See the figure below.\n![https://cdn.luogu.com.cn/upload/pic/17919.png](https://cdn.luogu.com.cn/upload/pic/17919.png)\n(After paying at the red block, one can jump to any blue block around it.)\n\nThe problem is simple. There are three Fei Fei Xia, named $X, Y, Z$. They decide to gather to play and want to meet at one of their positions. Given the coordinates of the $3$ Fei Fei Xia, find at which person’s position they should gather to minimize the total cost for all of them. If the minimal costs are the same, prefer $X$ first, then $Y$.\n\n# Description", "inputFormat": "The first line contains two integers $N$ and $M$, representing the number of rows and columns.\n\nNext are two $N\\times M$ matrices of natural numbers, giving $B_{i,j}$ and $A_{i,j}$.\n\nThe last line contains six numbers, representing the row and column indices of the locations of $X, Y, Z$.", "outputFormat": "On the first line, output a single character $X$, $Y$ or $Z$, indicating the optimal meeting person.\n\nOn the second line, output an integer, the minimal total cost.\n\nIf gathering is impossible, output only one line `NO`.", "hint": "Constraints:\n- For $20\\%$ of the testdata, $N, M \\leq 10$, $B_{i,j} \\leq 20$.\n- For $40\\%$ of the testdata, $N, M \\leq 100$, $B_{i,j} \\leq 20$.\n- For $100\\%$ of the testdata, $1 \\leq N, M \\leq 150$, $0 \\leq B_{i, j} \\leq 10^9$, $0 \\leq A_{i, j} \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 飞飞侠", "background": "来源：国家集训队 2011 何朴藩", "description": "飞飞国是一个传说中的国度，国家的居民叫做飞飞侠。飞飞国是一个 $N\\times M$ 的矩形方阵，每个格子代表一个街区。\n\n然而飞飞国是没有交通工具的。飞飞侠完全靠地面的弹射装置来移动。  \n\n每个街区都装有弹射装置。使用弹射装置是需要支付一定费用的。而且每个弹射装置都有自己的弹射能力。  \n\n我们设第 $i$ 行第 $j$ 列的弹射装置有 $A_{i,j}$ 的费用和 $B_{i,j}$ 的弹射能力。并规定有相邻边的格子间距离是 $1$。那么，任何飞飞侠都只需要在 $(i,j)$ 支付 $A_{i,j}$ 的费用就可以任意选择弹到距离不超过 $B_{i,j}$ 的位置了。如下图  \n![https://cdn.luogu.com.cn/upload/pic/17919.png](https://cdn.luogu.com.cn/upload/pic/17919.png)  \n（从红色街区交费以后可以跳到周围的任意蓝色街区。）  \n\n现在的问题很简单。有三个飞飞侠，分别叫做 $X, Y, Z$。现在它们决定聚在一起玩，于是想往其中一人的位置集合。告诉你 $3$ 个飞飞侠的坐标，求往哪里集合大家需要花的费用总和最低。（费用相同时优先 $X$，次优先 $Y$）", "inputFormat": "输入的第一行包含两个整数 $N$ 和 $M$，分别表示行数和列数。\n\n接下来是 $2$ 个 $N\\times M$ 的自然数矩阵，为 $B_{i,j}$ 和 $A_{i,j}$。\n\n最后一行六个数，分别代表 $X, Y, Z$ 所在地的行号和列号。", "outputFormat": "第一行输出一个字符 $X, Y$ 或者 $Z$。表示最优集合地点。\n\n第二行输出一个整数，表示最小费用。\n\n如果无法集合，只输出一行 `NO`。  ", "hint": "对于 $20\\%$ 的数据，$N, M\\leq 10$，$B_{i,j}\\leq 20$。 \n\n对于 $40\\%$ 的数据，$N, M \\leq 100$，$B_{i,j}\\leq 20$。\n\n对于 $100\\%$ 的数据，$1\\leq N, M\\leq 150$，$0\\leq B_{i, j}\\leq 10^9$，$0\\leq A_{i, j}\\leq 1000$。  ", "locale": "zh-CN"}}}
{"pid": "P4474", "type": "P", "difficulty": 6, "samples": [["2 2\n1 2\n2 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["网络流", "二分图", "最小割"], "title": "王者之剑", "background": "", "description": "![https://cdn.luogu.com.cn/upload/pic/17920.png](https://cdn.luogu.com.cn/upload/pic/17920.png)  \n\n这是在阿尔托利亚·潘德拉贡成为英灵前的事情，她正要去拔出石中剑成为亚瑟王，在这之前她要去收集一些宝石。\n\n宝石排列在一个 $n \\times m$ 的网格中，每个网格中有一块价值为 $v_{i,j}$ 的宝石，阿尔托利亚·潘德拉贡可以选择自己的起点。\n\n开始时刻为 $0$ 秒。以下操作，每秒按顺序执行。\n\n1. 在第 $i$ 秒开始的时候，阿尔托利亚·潘德拉贡在方格 $(x,y)$ 上，她可以拿走 $(x, y)$ 中的宝石。\n2. 在偶数秒，阿尔托利亚·潘德拉贡周围四格的宝石会消失。\n3. 若阿尔托利亚·潘德拉贡第 $i$ 秒开始时在方格 $(x,y)$ 上，则在第 $i+1$ 秒可以立即移动到 $(x+1,y),(x,y+1),(x-1,y)$ 或 $(x, y- 1)$ 上，也可以停留在（$x,y)$ 上。\n\n\n求阿尔托利亚·潘德拉贡最多可以获得多少价值的宝石", "inputFormat": "第一行给出数字 $N,M$ 代表行列数 $N,M$ 均小于等于 $100$，宝石的价值不会超过 $10000$。下面 $N$ 行 $M$ 列用于描述数字矩阵。", "outputFormat": "输出最多可以拿到多少价值宝石。", "hint": "姚金宇的原创题。", "locale": "zh-CN", "translations": {"en": {"title": "The King’s Sword", "background": "", "description": "![https://cdn.luogu.com.cn/upload/pic/17920.png](https://cdn.luogu.com.cn/upload/pic/17920.png)\n\nThis is before Artoria Pendragon became a Heroic Spirit. She is about to pull the sword from the stone to become King Arthur, and before that she needs to collect some gems.\n\nThe gems are arranged in an $n \\times m$ grid. Each cell contains a gem worth $v_{i,j}$. Artoria Pendragon may choose her own starting cell.\n\nThe initial time is $0$ seconds. The following operations are executed every second, in order.\n\n1. At the beginning of second $i$, if Artoria Pendragon is on cell $(x, y)$, she can take the gem in $(x, y)$.\n2. At even-numbered seconds, the gems in the four orthogonally adjacent cells around Artoria Pendragon disappear.\n3. If Artoria Pendragon is on cell $(x, y)$ at the beginning of second $i$, then at second $i+1$ she may immediately move to $(x+1, y)$, $(x, y+1)$, $(x-1, y)$, or $(x, y-1)$, or stay at $(x, y)$.\n\nFind the maximum total value of gems that Artoria Pendragon can obtain.", "inputFormat": "The first line gives the numbers $N, M$, representing the number of rows and columns. $N, M \\le 100$. The value of each gem does not exceed $10000$. The next $N$ lines and $M$ columns describe the value matrix.", "outputFormat": "Output the maximum total value of gems that can be taken.", "hint": "An original problem by Yao Jinyu.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "王者之剑", "background": "", "description": "![https://cdn.luogu.com.cn/upload/pic/17920.png](https://cdn.luogu.com.cn/upload/pic/17920.png)  \n\n这是在阿尔托利亚·潘德拉贡成为英灵前的事情，她正要去拔出石中剑成为亚瑟王，在这之前她要去收集一些宝石。\n\n宝石排列在一个 $n \\times m$ 的网格中，每个网格中有一块价值为 $v_{i,j}$ 的宝石，阿尔托利亚·潘德拉贡可以选择自己的起点。\n\n开始时刻为 $0$ 秒。以下操作，每秒按顺序执行。\n\n1. 在第 $i$ 秒开始的时候，阿尔托利亚·潘德拉贡在方格 $(x,y)$ 上，她可以拿走 $(x, y)$ 中的宝石。\n2. 在偶数秒，阿尔托利亚·潘德拉贡周围四格的宝石会消失。\n3. 若阿尔托利亚·潘德拉贡第 $i$ 秒开始时在方格 $(x,y)$ 上，则在第 $i+1$ 秒可以立即移动到 $(x+1,y),(x,y+1),(x-1,y)$ 或 $(x, y- 1)$ 上，也可以停留在（$x,y)$ 上。\n\n\n求阿尔托利亚·潘德拉贡最多可以获得多少价值的宝石", "inputFormat": "第一行给出数字 $N,M$ 代表行列数 $N,M$ 均小于等于 $100$，宝石的价值不会超过 $10000$。下面 $N$ 行 $M$ 列用于描述数字矩阵。", "outputFormat": "输出最多可以拿到多少价值宝石。", "hint": "姚金宇的原创题。", "locale": "zh-CN"}}}
{"pid": "P4475", "type": "P", "difficulty": 6, "samples": [["3 3\n1 2 5\n3 1 4\n2 2 1\n2 1 6\n1 3 5\n1 3 7", "5\n0\n4"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": [], "title": "巧克力王国", "background": "", "description": "巧克力王国里的巧克力都是由牛奶和可可做成的。但是并不是每一块巧克力都受王国人民的欢迎，因为大家都不喜欢过于甜的巧克力。\n\n对于每一块巧克力，我们设 $x$ 和 $y$ 为其牛奶和可可的含量。由于每个人对于甜的程度都有自己的评判标准，所以每个人都有两个参数 $a$ 和 $b$ ，分别为他自己为牛奶和可可定义的权重， 因此牛奶和可可含量分别为 $x$ 和 $y$ 的巧克力对于他的甜味程度即为 $ax+by$。而每个人又有一个甜味限度 $c$ ，所有甜味程度大于等于 $c$ 的巧克力他都无法接受。每块巧克力都有一个美味值 $h$ 。\n\n现在我们想知道对于每个人，他所能接受的巧克力的美味值之和为多少。", "inputFormat": "第一行两个正整数 $n$ 和 $m$ ，分别表示巧克力个数和询问个数。  \n接下来$n$行，每行三个整数 $x , y , h$ ，含义如题目所示。  \n再接下来 $m$ 行，每行三个整数 $a , b , c$ ，含义如题目所示。", "outputFormat": "输出$m$行，其中第$i$行表示第$i$个人所能接受的巧克力的美味值之和。", "hint": "对于100%的数据，$1<=n,m<=50000$,$-10^9<=a_i,b_i,x_i,y_i<=10^9$。\n\n保证数据用某种方式随机生成。", "locale": "zh-CN", "translations": {"en": {"title": "Chocolate Kingdom", "background": "", "description": "In the Chocolate Kingdom, chocolates are made from milk and cocoa. However, not every piece of chocolate is favored by the people, because no one likes overly sweet chocolate.\n\nFor each piece of chocolate, let $x$ and $y$ be its milk and cocoa content. Since everyone has their own standard for sweetness, each person has two parameters $a$ and $b$, which are their weights for milk and cocoa, respectively. Therefore, for a chocolate with milk and cocoa content $x$ and $y$, its sweetness for that person is $ax+by$. Each person also has a sweetness threshold $c$: all chocolates with sweetness greater than or equal to $c$ are unacceptable to them. Each piece of chocolate has a deliciousness value $h$.\n\nNow we want to know, for each person, the sum of the deliciousness values of the chocolates they can accept.", "inputFormat": "The first line contains two positive integers $n$ and $m$, denoting the number of chocolates and the number of queries.  \nThe next $n$ lines each contain three integers $x , y , h$, as described above.  \nThen the next $m$ lines each contain three integers $a , b , c$, as described above.", "outputFormat": "Output $m$ lines, where the $i$-th line is the sum of the deliciousness values of the chocolates acceptable to the $i$-th person.", "hint": "Constraints: For 100% of the testdata, $1<=n,m<=50000$,$-10^9<=a_i,b_i,x_i,y_i<=10^9$.\n\nThe testdata is guaranteed to be randomly generated in some manner.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "巧克力王国", "background": "", "description": "巧克力王国里的巧克力都是由牛奶和可可做成的。但是并不是每一块巧克力都受王国人民的欢迎，因为大家都不喜欢过于甜的巧克力。\n\n对于每一块巧克力，我们设 $x$ 和 $y$ 为其牛奶和可可的含量。由于每个人对于甜的程度都有自己的评判标准，所以每个人都有两个参数 $a$ 和 $b$ ，分别为他自己为牛奶和可可定义的权重， 因此牛奶和可可含量分别为 $x$ 和 $y$ 的巧克力对于他的甜味程度即为 $ax+by$。而每个人又有一个甜味限度 $c$ ，所有甜味程度大于等于 $c$ 的巧克力他都无法接受。每块巧克力都有一个美味值 $h$ 。\n\n现在我们想知道对于每个人，他所能接受的巧克力的美味值之和为多少。", "inputFormat": "第一行两个正整数 $n$ 和 $m$ ，分别表示巧克力个数和询问个数。  \n接下来$n$行，每行三个整数 $x , y , h$ ，含义如题目所示。  \n再接下来 $m$ 行，每行三个整数 $a , b , c$ ，含义如题目所示。", "outputFormat": "输出$m$行，其中第$i$行表示第$i$个人所能接受的巧克力的美味值之和。", "hint": "对于100%的数据，$1<=n,m<=50000$,$-10^9<=a_i,b_i,x_i,y_i<=10^9$。\n\n保证数据用某种方式随机生成。", "locale": "zh-CN"}}}
{"pid": "P4476", "type": "P", "difficulty": 6, "samples": [["1\n3 1\n001 101", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2018", "北京"], "title": "[BJWC2018] 数字统计", "background": "", "description": "小A 正在研究一些数字统计问题。有一天他突然看到了一个这样的问题：\n\n将[L..R]中的所有整数用M 位二进制数表示（允许出现前导0）。现在将这些数中的每一个作如下变换：\n\n从这个数的最低两位开始，如果这两位都是0，那么X=1，否则X=0。现在将这两位删去，然后将X 放在原来最低位的位置上。重复这个变换直到这个数只剩下一位为止。\n\n例如01001 的变换过程如下：\n\n01001-->0100-->011-->00-->1。\n\n现在的问题是变换后的所有数中，值为Y（Y 为0 或1）的有多少个？\n\n小A 不会了，他想让你帮助他完成这个问题。", "inputFormat": "输入文件包含多组测试数据。\n\n第一行，一个整数T，表示测试数据的组数。\n\n接下来的T 节，每节对应一组测试数据，格式如下：\n\n第一行，两个整数M、Y。\n\n第二行，两个M 位二进制数L、R。", "outputFormat": "对于每组测试数据，输出一行，一个二进制数，表示该组测试数据中[L..R]中的所有整数变换后的值为Y 的个数。这里的二进制数不允许出现前导0。", "hint": "对于20%的数据：1 ≤ M ≤ 16。\n\n对于40%的数据：1 ≤ M ≤ 32。\n\n对于100%的数据：1 ≤ M ≤ 200，1 ≤ T ≤ 50。", "locale": "zh-CN", "translations": {"en": {"title": "[BJWC2018] Digit Statistics", "background": "", "description": "Little A is studying some problems about digit statistics. One day he came across the following problem:\n\nRepresent every integer in [L..R] as an M-bit binary number (leading zeros are allowed). Now apply the following transformation to each number:\n\nStarting from the two least significant bits, if both bits are 0, then set X = 1; otherwise set X = 0. Delete these two bits, then place X in the least significant position. Repeat this transformation until the number has only one bit left.\n\nFor example, the transformation process of 01001 is:\n01001-->0100-->011-->00-->1.\n\nNow the question is: among all transformed numbers, how many are equal to Y (Y is 0 or 1)?\n\nLittle A does not know how to solve it and asks you for help.", "inputFormat": "The input contains multiple test cases.\n\nThe first line contains an integer T, the number of test cases.\n\nEach of the next T sections corresponds to one test case, in the following format:\n\n- The first line contains two integers M and Y.\n- The second line contains two M-bit binary numbers L and R.", "outputFormat": "For each test case, output one line containing a binary number, which is the count of integers in [L..R] whose transformed value equals Y. This binary number must not contain leading zeros.", "hint": "- For 20% of the testdata: 1 ≤ M ≤ 16.\n- For 40% of the testdata: 1 ≤ M ≤ 32.\n- For 100% of the testdata: 1 ≤ M ≤ 200, 1 ≤ T ≤ 50.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BJWC2018] 数字统计", "background": "", "description": "小A 正在研究一些数字统计问题。有一天他突然看到了一个这样的问题：\n\n将[L..R]中的所有整数用M 位二进制数表示（允许出现前导0）。现在将这些数中的每一个作如下变换：\n\n从这个数的最低两位开始，如果这两位都是0，那么X=1，否则X=0。现在将这两位删去，然后将X 放在原来最低位的位置上。重复这个变换直到这个数只剩下一位为止。\n\n例如01001 的变换过程如下：\n\n01001-->0100-->011-->00-->1。\n\n现在的问题是变换后的所有数中，值为Y（Y 为0 或1）的有多少个？\n\n小A 不会了，他想让你帮助他完成这个问题。", "inputFormat": "输入文件包含多组测试数据。\n\n第一行，一个整数T，表示测试数据的组数。\n\n接下来的T 节，每节对应一组测试数据，格式如下：\n\n第一行，两个整数M、Y。\n\n第二行，两个M 位二进制数L、R。", "outputFormat": "对于每组测试数据，输出一行，一个二进制数，表示该组测试数据中[L..R]中的所有整数变换后的值为Y 的个数。这里的二进制数不允许出现前导0。", "hint": "对于20%的数据：1 ≤ M ≤ 16。\n\n对于40%的数据：1 ≤ M ≤ 32。\n\n对于100%的数据：1 ≤ M ≤ 200，1 ≤ T ≤ 50。", "locale": "zh-CN"}}}
{"pid": "P4477", "type": "P", "difficulty": 6, "samples": [["4 10 8\n1 2 4 6\n6 3 6 2 8 4 9 10 6 8\n4\n1 4\n2 5\n5 6\n1 6", "4\n3\n1\n4"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2018", "莫队", "北京", "枚举"], "title": "[BJWC2018] 基础匹配算法练习题", "background": null, "description": "小 S 最近学会了二分图匈牙利匹配算法。\n\n现在二分图的 X 部有 $N$ 个数字 $A_i$，Y 部有 $K$ 个数字 $C_i$。\n\n已知如果 $A_i + C_j \\le  Z$，那么 $A_i$ 和 $C_j$ 之间就有一条边，求二分图（X，E，Y）的最大匹配数。\n\n小 S 是初学者，所以她想做多做一些练习来巩固知识。于是她找到了一个长度为 $M$ 的正整数数组 $B$，每次她会在 $B$ 数组中抽取一段连续的区间 $[L_i,R_i]$，把区间 $[L_i,R_i]$ 的所有数字作为二分图 Y 部的 $K$ 个数字 $C_i$，然后重新求一次二分图最大匹配数。\n\n小 S 打算一共做 $Q$ 次练习，但是她不知道每次计算出的答案对不对，你能帮帮她吗？", "inputFormat": "第一行为三个正整数 $N,M,Z$。\n\n第二行为 $N$ 个正整数，第 $i$ 个正整数表示 $A_i$。\n\n第三行为 $M$ 个正整数，第 $i$ 个正整数表示 $B_i$。\n\n第四行为一个整数 $Q$ 表示询问个数。\n\n接下来 $Q$ 行每行两个正整数，第 $i$ 行的两个正整数分别表示 $L_i,R_i$。", "outputFormat": "对于每次练习，输出该次练习的答案。", "hint": "测试数据编号|$N$|$M$|$Q$\n:-:|:-:|:-:|:-:\n$1 \\sim 4$|$\\le 50$|$\\le 50$|$\\le 50$\n$5 \\sim 10$|$\\le 2501$|$\\le 2501$|$\\le 2501$\n$11\\sim 14$|$\\le 152501$|$\\le 45678$|$\\le 45678$\n$15 ,16$|$\\le 152501$|$\\le 50$|$\\le 52501$\n$17 \\sim 20$|$\\le 152501$|$\\le 52501$|$\\le 52501$\n\n对于 $100\\%$ 的数据，$1 \\le A_i,B_i,Z \\le 10^9$，$1 \\le L_i \\le R_i \\le M$。\n\n保证数据有一定梯度。", "locale": "zh-CN", "translations": {"en": {"title": "[BJWC2018] Basic Matching Algorithm Practice", "background": "", "description": "Xiao S recently learned the Hungarian algorithm for bipartite matching.\n\nNow the X part of a bipartite graph has $N$ numbers $A_i$, and the Y part has $K$ numbers $C_i$.\n\nIf $A_i + C_j \\le Z$, then there is an edge between $A_i$ and $C_j$. Find the maximum matching size of the bipartite graph $(X, E, Y)$.\n\nXiao S is a beginner, so she wants to do more practice to consolidate her knowledge. She found a positive integer array $B$ of length $M$. Each time, she picks a continuous subarray $[L_i, R_i]$ from $B$, takes all numbers in $[L_i, R_i]$ as the $K$ numbers $C_i$ on the Y part of the bipartite graph, and then recomputes the maximum matching size.\n\nXiao S plans to do $Q$ practice sessions, but she is not sure whether each computed answer is correct. Can you help her?", "inputFormat": "The first line contains three positive integers $N, M, Z$.\n\nThe second line contains $N$ positive integers, where the $i$-th integer is $A_i$.\n\nThe third line contains $M$ positive integers, where the $i$-th integer is $B_i$.\n\nThe fourth line contains an integer $Q$ denoting the number of queries.\n\nEach of the next $Q$ lines contains two positive integers; on the $i$-th line, the two integers are $L_i, R_i$.", "outputFormat": "For each practice session, output the answer for that session.", "hint": "Testdata ID|$N$|$M$|$Q$\n:-:|:-:|:-:|:-:\n$1 \\sim 4$|$\\le 50$|$\\le 50$|$\\le 50$\n$5 \\sim 10$|$\\le 2501$|$\\le 2501$|$\\le 2501$\n$11 \\sim 14$|$\\le 152501$|$\\le 45678$|$\\le 45678$\n$15 ,16$|$\\le 152501$|$\\le 50$|$\\le 52501$\n$17 \\sim 20$|$\\le 152501$|$\\le 52501$|$\\le 52501$\n\nFor $100\\%$ of the testdata, $1 \\le A_i, B_i, Z \\le 10^9$, $1 \\le L_i \\le R_i \\le M$.\n\nThe testdata is graded.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BJWC2018] 基础匹配算法练习题", "background": null, "description": "小 S 最近学会了二分图匈牙利匹配算法。\n\n现在二分图的 X 部有 $N$ 个数字 $A_i$，Y 部有 $K$ 个数字 $C_i$。\n\n已知如果 $A_i + C_j \\le  Z$，那么 $A_i$ 和 $C_j$ 之间就有一条边，求二分图（X，E，Y）的最大匹配数。\n\n小 S 是初学者，所以她想做多做一些练习来巩固知识。于是她找到了一个长度为 $M$ 的正整数数组 $B$，每次她会在 $B$ 数组中抽取一段连续的区间 $[L_i,R_i]$，把区间 $[L_i,R_i]$ 的所有数字作为二分图 Y 部的 $K$ 个数字 $C_i$，然后重新求一次二分图最大匹配数。\n\n小 S 打算一共做 $Q$ 次练习，但是她不知道每次计算出的答案对不对，你能帮帮她吗？", "inputFormat": "第一行为三个正整数 $N,M,Z$。\n\n第二行为 $N$ 个正整数，第 $i$ 个正整数表示 $A_i$。\n\n第三行为 $M$ 个正整数，第 $i$ 个正整数表示 $B_i$。\n\n第四行为一个整数 $Q$ 表示询问个数。\n\n接下来 $Q$ 行每行两个正整数，第 $i$ 行的两个正整数分别表示 $L_i,R_i$。", "outputFormat": "对于每次练习，输出该次练习的答案。", "hint": "测试数据编号|$N$|$M$|$Q$\n:-:|:-:|:-:|:-:\n$1 \\sim 4$|$\\le 50$|$\\le 50$|$\\le 50$\n$5 \\sim 10$|$\\le 2501$|$\\le 2501$|$\\le 2501$\n$11\\sim 14$|$\\le 152501$|$\\le 45678$|$\\le 45678$\n$15 ,16$|$\\le 152501$|$\\le 50$|$\\le 52501$\n$17 \\sim 20$|$\\le 152501$|$\\le 52501$|$\\le 52501$\n\n对于 $100\\%$ 的数据，$1 \\le A_i,B_i,Z \\le 10^9$，$1 \\le L_i \\le R_i \\le M$。\n\n保证数据有一定梯度。", "locale": "zh-CN"}}}
{"pid": "P4478", "type": "P", "difficulty": 6, "samples": [["3 4 3 1019663265\n3 0\n1 1\n2 2", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "北京"], "title": "[BJWC2018] 上学路线", "background": "", "description": "小 B 所在的城市的道路构成了一个方形网格，它的西南角为 $(0,0)$，东北角为 $(N,M)$。\n\n小 B 家住在西南角，学校在东北角。现在有 $T$ 个路口进行施工，小 B 不能通过这些路口。小 B 喜欢走最短的路径到达目的地，因此他每天上学时都只会向东或北行走；而小 B 又喜欢走不同的路径，因此他问你按照他走最短路径的规则，他可以选择的不同的上学路线有多少条。由于答案可能很大，所以小 B 只需要让你求出路径数 mod $P$ 的值。", "inputFormat": "第一行为四个整数 $N$ 、 $M$ 、 $T$ 、 $P$。\n\n接下来的 $T$ 行，每行两个整数，表示施工的路口的坐标。", "outputFormat": "一行一个整数，表示路径数 mod $P$ 的值。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/17943.png)", "locale": "zh-CN", "translations": {"en": {"title": "[BJWC2018] Route to School", "background": "", "description": "The roads of Xiao B’s city form a square grid, whose southwest corner is $(0,0)$ and northeast corner is $(N,M)$.\n\nXiao B lives at the southwest corner, and the school is at the northeast corner. There are $T$ intersections under construction, and Xiao B cannot pass through these intersections. Xiao B prefers to take the shortest route to his destination, so each day he only moves east or north; since he also likes different routes, he asks you, under the rule of taking shortest routes, how many different routes to school he can choose. Because the answer may be large, compute the number of routes mod $P$.", "inputFormat": "The first line contains four integers $N$, $M$, $T$, $P$.\nThe next $T$ lines each contain two integers, denoting the coordinates of an intersection under construction.", "outputFormat": "Output a single integer, the number of routes mod $P$.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/17943.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BJWC2018] 上学路线", "background": "", "description": "小 B 所在的城市的道路构成了一个方形网格，它的西南角为 $(0,0)$，东北角为 $(N,M)$。\n\n小 B 家住在西南角，学校在东北角。现在有 $T$ 个路口进行施工，小 B 不能通过这些路口。小 B 喜欢走最短的路径到达目的地，因此他每天上学时都只会向东或北行走；而小 B 又喜欢走不同的路径，因此他问你按照他走最短路径的规则，他可以选择的不同的上学路线有多少条。由于答案可能很大，所以小 B 只需要让你求出路径数 mod $P$ 的值。", "inputFormat": "第一行为四个整数 $N$ 、 $M$ 、 $T$ 、 $P$。\n\n接下来的 $T$ 行，每行两个整数，表示施工的路口的坐标。", "outputFormat": "一行一个整数，表示路径数 mod $P$ 的值。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/17943.png)", "locale": "zh-CN"}}}
