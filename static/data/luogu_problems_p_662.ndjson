{"pid": "P14423", "type": "P", "difficulty": 4, "samples": [["5 4\n1 2\n1 3\n4 3\n4 5", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["图论", "2014", "并查集", "广度优先搜索 BFS", "JOISC/JOIST（日本）"], "title": "[JOISC 2014] 有趣的交朋友 / Making Friends is Fun", "background": "", "description": "你是活跃于历史幕后的一名特工，日复一日地为世界和平而行动。这个世界共有 $N$ 个国家，分别被赋予从 $1$ 到 $N$ 的不同编号。你的目标是在这些国家之间尽可能多地建立友好的关系。\n\n为了制定特工任务的计划，你绘制了一张表示当前国际关系的图。你准备了一张大画纸，首先在上面标出 $N$ 个点，分别代表这 $N$ 个国家。接着，为了表示当前的国际关系，你画了 $M$ 条箭头，每条箭头连接两个国家。从代表国家 $a$ 的点指向代表国家 $b$ 的点的箭头，表示“当前，国家 $a$ 向国家 $b$ 派遣了大使”。以下，我们将从国家 $a$ 指向国家 $b$ 的箭头称为**箭头 $(a, b)$**。这样，由 $N$ 个点和 $M$ 条箭头构成的图，即表示当前的国际关系。\n\n作为促进国家间友好关系的举措，考虑举行两国之间的友好条约缔结会议（以下简称为“**会议**”）。为了让两个国家 $p$ 和 $q$ 举行会议，必须存在一个国家 $x$ 作为中介，即国家 $x$ 向 $p$ 和 $q$ 两国都派遣了大使。举行会议后，两国将互相派遣大使，也就是说，必须添加新的箭头 $(p, q)$ 和 $(q, p)$。但若这些箭头已经存在，则无需重复添加。\n\n你的任务是：选择能够举行会议的两个国家，以及作为会议中介的国家，使会议得以举行。为了模拟这一过程，我们将以画纸上箭头的总数作为衡量世界和平程度的标准。也就是说，通过不断选择两个国家举行会议，我们希望知道画纸上箭头的总数最多可以达到多少。\n\n**题目**\n\n给定这个世界中的国家数量以及当前国际关系的信息，编写一个程序，通过反复选择两个国家举行会议，使得画纸上箭头的总数达到最大值。", "inputFormat": "从标准输入读取以下输入。\n\n- 第一行包含两个整数 $N$ 和 $M$，以空格分隔。$N$ 表示画纸上点的数量（即这个世界中国家的数量），$M$ 表示画纸上箭头的数量。\n- 接下来的 $M$ 行，每行包含画纸上一个箭头的信息。第 $i$ 行（$1 \\le i \\le M$）包含两个整数 $A_i$ 和 $B_i$，以空格分隔。这表示在画纸上从表示国家 $A_i$ 的点指向表示国家 $B_i$ 的点画有一条箭头，即国家 $A_i$ 向国家 $B_i$ 派遣了大使。", "outputFormat": "在标准输出中，输出一行，表示可以实现的箭头数量的最大值。注意，箭头的数量不仅包括会议中新添加的箭头，也包括当前已经存在的箭头。\n", "hint": "### 样例 1 解释\n\n例如，可以通过以下步骤实现 10 个箭头：\n\n1. 以国家 1 为中介，国家 2 与国家 3 进行会议。\n2. 以国家 4 为中介，国家 3 与国家 5 进行会议。\n3. 以国家 3 为中介，国家 2 与国家 5 进行会议。\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le N \\le 100\\,000$\n- $0 \\le M \\le 200\\,000$\n- $1 \\le A_i \\le N$（$1 \\le i \\le M$）\n- $1 \\le B_i \\le N$（$1 \\le i \\le M$）\n- $A_i \\ne B_i$（$1 \\le i \\le M$）\n- $(A_i, B_i) \\ne (A_j, B_j)$（$1 \\le i < j \\le M$）\n\n### 子任务\n\n**子任务 1 [5 分]**\n\n- 满足 $N \\le 100$。\n\n**子任务 2 [30 分]**\n\n- 满足 $N \\le 5000$。\n\n**子任务 3 [65 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2014] 有趣的交朋友 / Making Friends is Fun", "background": "", "description": "你是活跃于历史幕后的一名特工，日复一日地为世界和平而行动。这个世界共有 $N$ 个国家，分别被赋予从 $1$ 到 $N$ 的不同编号。你的目标是在这些国家之间尽可能多地建立友好的关系。\n\n为了制定特工任务的计划，你绘制了一张表示当前国际关系的图。你准备了一张大画纸，首先在上面标出 $N$ 个点，分别代表这 $N$ 个国家。接着，为了表示当前的国际关系，你画了 $M$ 条箭头，每条箭头连接两个国家。从代表国家 $a$ 的点指向代表国家 $b$ 的点的箭头，表示“当前，国家 $a$ 向国家 $b$ 派遣了大使”。以下，我们将从国家 $a$ 指向国家 $b$ 的箭头称为**箭头 $(a, b)$**。这样，由 $N$ 个点和 $M$ 条箭头构成的图，即表示当前的国际关系。\n\n作为促进国家间友好关系的举措，考虑举行两国之间的友好条约缔结会议（以下简称为“**会议**”）。为了让两个国家 $p$ 和 $q$ 举行会议，必须存在一个国家 $x$ 作为中介，即国家 $x$ 向 $p$ 和 $q$ 两国都派遣了大使。举行会议后，两国将互相派遣大使，也就是说，必须添加新的箭头 $(p, q)$ 和 $(q, p)$。但若这些箭头已经存在，则无需重复添加。\n\n你的任务是：选择能够举行会议的两个国家，以及作为会议中介的国家，使会议得以举行。为了模拟这一过程，我们将以画纸上箭头的总数作为衡量世界和平程度的标准。也就是说，通过不断选择两个国家举行会议，我们希望知道画纸上箭头的总数最多可以达到多少。\n\n**题目**\n\n给定这个世界中的国家数量以及当前国际关系的信息，编写一个程序，通过反复选择两个国家举行会议，使得画纸上箭头的总数达到最大值。", "inputFormat": "从标准输入读取以下输入。\n\n- 第一行包含两个整数 $N$ 和 $M$，以空格分隔。$N$ 表示画纸上点的数量（即这个世界中国家的数量），$M$ 表示画纸上箭头的数量。\n- 接下来的 $M$ 行，每行包含画纸上一个箭头的信息。第 $i$ 行（$1 \\le i \\le M$）包含两个整数 $A_i$ 和 $B_i$，以空格分隔。这表示在画纸上从表示国家 $A_i$ 的点指向表示国家 $B_i$ 的点画有一条箭头，即国家 $A_i$ 向国家 $B_i$ 派遣了大使。", "outputFormat": "在标准输出中，输出一行，表示可以实现的箭头数量的最大值。注意，箭头的数量不仅包括会议中新添加的箭头，也包括当前已经存在的箭头。\n", "hint": "### 样例 1 解释\n\n例如，可以通过以下步骤实现 10 个箭头：\n\n1. 以国家 1 为中介，国家 2 与国家 3 进行会议。\n2. 以国家 4 为中介，国家 3 与国家 5 进行会议。\n3. 以国家 3 为中介，国家 2 与国家 5 进行会议。\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le N \\le 100\\,000$\n- $0 \\le M \\le 200\\,000$\n- $1 \\le A_i \\le N$（$1 \\le i \\le M$）\n- $1 \\le B_i \\le N$（$1 \\le i \\le M$）\n- $A_i \\ne B_i$（$1 \\le i \\le M$）\n- $(A_i, B_i) \\ne (A_j, B_j)$（$1 \\le i < j \\le M$）\n\n### 子任务\n\n**子任务 1 [5 分]**\n\n- 满足 $N \\le 100$。\n\n**子任务 2 [30 分]**\n\n- 满足 $N \\le 5000$。\n\n**子任务 3 [65 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14424", "type": "P", "difficulty": 6, "samples": [["4 1\n1 1 1 1\n1 9 9 1\n9 9 1 1\n1 9 9 1", "23"], ["6 2\n5 5 3 5\n9 7 9 3\n3 4 9 4\n8 2 6 6\n8 5 7 5\n3 2 1 6", "73"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2014", "JOISC/JOIST（日本）"], "title": "[JOISC 2014] 邮戳收集 / Collecting Stamps", "background": "", "description": "IOI 铁路有一条由 $N+2$ 个车站组成的直线线路。该线路的车站从一端的车站开始，依次编号为 $0$ 到 $N+1$。\n\n该线路上运行着两种类型的电车：上行电车和下行电车。乘坐上行电车可以向车站编号增大的方向移动，乘坐下行电车可以向车站编号减小的方向移动。乘坐电车移动一个车站需要 $T$ 秒的时间。也就是说，乘坐上行电车可以从车站 $i$ 移动到车站 $i+1$，耗时 $T$ 秒；乘坐下行电车可以从车站 $i$ 移动到车站 $i-1$，耗时 $T$ 秒。但注意，不能从车站 $N+1$ 乘坐上行电车，也不能从车站 $0$ 乘坐下行电车。电车的发车频率非常高，因此可以忽略等待电车的时间。\n\n每个车站都设有上行电车的站台和下行电车的站台。连接这两个站台的通道中途设有打卡点。\n\n目前，IOI 铁路正在举办一场打卡活动。该活动要求从车站 $0$ 的上行电车站台出发，依次在车站 $1$ 到车站 $N$ 的打卡点各打卡一次，最终到达车站 $N+1$ 的上行电车站台即为完成。\n\n为了在各车站打卡，参与者需要从电车上下来，步行至通道中途的打卡点。在车站 $i$，从上行电车站台到打卡点需要 $U_i$ 秒，从打卡点返回上行电车站台需要 $V_i$ 秒；从下行电车站台到打卡点需要 $D_i$ 秒，从打卡点返回下行电车站台需要 $E_i$ 秒。\n\n需要注意的是，打卡活动的参与者只能各访问车站 $0$ 和车站 $N+1$ 一次，而车站 $1$ 到车站 $N$ 可以任意多次下车。\n\n**题目**\n\n给定打卡车站的数量、电车移动一个车站所需的时间、各车站的上行电车站台与打卡点之间的移动时间、以及各车站的下行电车站台与打卡点之间的移动时间，编写一个程序，求出完成打卡活动所需的最短时间。\n\n完成打卡活动所需的时间是指：从车站 $0$ 出发，依次打卡 $N$ 个车站，最终到达车站 $N+1$ 的上行电车站台所花费的总时间。注意，忽略在站台等待电车的时间，以及打卡操作本身所花费的时间。", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含两个整数 $N$ 和 $T$，以空格分隔。这表示车站总数为 $N+2$，电车移动一个车站所需时间为 $T$ 秒。\n- 接下来的 $N$ 行，第 $i$ 行（$1 \\le i \\le N$）包含四个整数 $U_i$、$V_i$、$D_i$、$E_i$，以空格分隔。这表示：\n  - 从车站 $i$ 的上行电车站台到打卡点需要 $U_i$ 秒；\n  - 从打卡点返回车站 $i$ 的上行电车站台需要 $V_i$ 秒；\n  - 从车站 $i$ 的下行电车站台到打卡点需要 $D_i$ 秒；\n  - 从打卡点返回车站 $i$ 的下行电车站台需要 $E_i$ 秒。", "outputFormat": "在标准输出中，输出一行，表示完成打卡活动所需的最短时间（以秒为单位的整数）。\n", "hint": "### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le N \\le 3000$\n- $1 \\le T \\le 100\\,000$\n- $1 \\le U_i \\le 100\\,000$（$1 \\le i \\le N$）\n- $1 \\le V_i \\le 100\\,000$（$1 \\le i \\le N$）\n- $1 \\le D_i \\le 100\\,000$（$1 \\le i \\le N$）\n- $1 \\le E_i \\le 100\\,000$（$1 \\le i \\le N$）\n\n### 子任务\n\n**子任务 1 [10 分]**\n\n- 满足 $N \\le 16$\n\n**子任务 2 [75 分]**\n\n- 满足 $N \\le 100$\n\n**子任务 3 [15 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2014] 邮戳收集 / Collecting Stamps", "background": "", "description": "IOI 铁路有一条由 $N+2$ 个车站组成的直线线路。该线路的车站从一端的车站开始，依次编号为 $0$ 到 $N+1$。\n\n该线路上运行着两种类型的电车：上行电车和下行电车。乘坐上行电车可以向车站编号增大的方向移动，乘坐下行电车可以向车站编号减小的方向移动。乘坐电车移动一个车站需要 $T$ 秒的时间。也就是说，乘坐上行电车可以从车站 $i$ 移动到车站 $i+1$，耗时 $T$ 秒；乘坐下行电车可以从车站 $i$ 移动到车站 $i-1$，耗时 $T$ 秒。但注意，不能从车站 $N+1$ 乘坐上行电车，也不能从车站 $0$ 乘坐下行电车。电车的发车频率非常高，因此可以忽略等待电车的时间。\n\n每个车站都设有上行电车的站台和下行电车的站台。连接这两个站台的通道中途设有打卡点。\n\n目前，IOI 铁路正在举办一场打卡活动。该活动要求从车站 $0$ 的上行电车站台出发，依次在车站 $1$ 到车站 $N$ 的打卡点各打卡一次，最终到达车站 $N+1$ 的上行电车站台即为完成。\n\n为了在各车站打卡，参与者需要从电车上下来，步行至通道中途的打卡点。在车站 $i$，从上行电车站台到打卡点需要 $U_i$ 秒，从打卡点返回上行电车站台需要 $V_i$ 秒；从下行电车站台到打卡点需要 $D_i$ 秒，从打卡点返回下行电车站台需要 $E_i$ 秒。\n\n需要注意的是，打卡活动的参与者只能各访问车站 $0$ 和车站 $N+1$ 一次，而车站 $1$ 到车站 $N$ 可以任意多次下车。\n\n**题目**\n\n给定打卡车站的数量、电车移动一个车站所需的时间、各车站的上行电车站台与打卡点之间的移动时间、以及各车站的下行电车站台与打卡点之间的移动时间，编写一个程序，求出完成打卡活动所需的最短时间。\n\n完成打卡活动所需的时间是指：从车站 $0$ 出发，依次打卡 $N$ 个车站，最终到达车站 $N+1$ 的上行电车站台所花费的总时间。注意，忽略在站台等待电车的时间，以及打卡操作本身所花费的时间。", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含两个整数 $N$ 和 $T$，以空格分隔。这表示车站总数为 $N+2$，电车移动一个车站所需时间为 $T$ 秒。\n- 接下来的 $N$ 行，第 $i$ 行（$1 \\le i \\le N$）包含四个整数 $U_i$、$V_i$、$D_i$、$E_i$，以空格分隔。这表示：\n  - 从车站 $i$ 的上行电车站台到打卡点需要 $U_i$ 秒；\n  - 从打卡点返回车站 $i$ 的上行电车站台需要 $V_i$ 秒；\n  - 从车站 $i$ 的下行电车站台到打卡点需要 $D_i$ 秒；\n  - 从打卡点返回车站 $i$ 的下行电车站台需要 $E_i$ 秒。", "outputFormat": "在标准输出中，输出一行，表示完成打卡活动所需的最短时间（以秒为单位的整数）。\n", "hint": "### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le N \\le 3000$\n- $1 \\le T \\le 100\\,000$\n- $1 \\le U_i \\le 100\\,000$（$1 \\le i \\le N$）\n- $1 \\le V_i \\le 100\\,000$（$1 \\le i \\le N$）\n- $1 \\le D_i \\le 100\\,000$（$1 \\le i \\le N$）\n- $1 \\le E_i \\le 100\\,000$（$1 \\le i \\le N$）\n\n### 子任务\n\n**子任务 1 [10 分]**\n\n- 满足 $N \\le 16$\n\n**子任务 2 [75 分]**\n\n- 满足 $N \\le 100$\n\n**子任务 3 [15 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14425", "type": "P", "difficulty": 4, "samples": [["10\nJOIIJOJOOI", "6"], ["8\nIOIIJIIO", "0"], ["20\nJJIOOIJIJOIOJIOJOOIJ", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "前缀和", "JOISC/JOIST（日本）"], "title": "[JOISC 2014] JOIOJI", "background": "", "description": "JOIOJI 是 JOI 君的叔叔。JOIOJI 非常在意自己的名字，其中 J、O、I 各自恰好出现了两次。\n\n最近，JOIOJI 的孩子出生了。他希望为孩子取一个名字，也像自己一样，由 J、O、I 这三个字母组成，且每个字母恰好出现相同次数。\n\nJOIOJI 家中有一本代代相传的卷轴，上面写有一首诗。这首诗是由 J、O、I 三个字母组成的长度为 $N$ 的字符串。JOIOJI 打算从这首诗中找出一个连续子串，使得其中 J、O、I 三个字母各自出现的次数完全相同，并将这个子串作为孩子的名字，他希望找到最长的这样的子串。\n\n**题目**\n\n给定 JOIOJI 所持有的卷轴上所写的诗的信息，编写一个程序，求出诗中所有连续子串中，J、O、I 三个字母各自出现次数完全相同的子串的最大长度。", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含一个整数 $N$。$N$ 表示 JOIOJI 所持有的卷轴上所写诗的长度。\n- 第二行包含一个长度为 $N$ 的字符串 $S$。$S$ 表示卷轴上所写的诗，其每个字符均为 J、O、I 中的一个。\n", "outputFormat": "在标准输出中，输出一行，表示诗中所有连续子串中，J、O、I 各自出现次数完全相同的子串的最大长度。如果不存在这样的子串，则输出 $0$。\n", "hint": "### 样例 1 解释\n\n在该输入示例中，卷轴上写有一首长度为 $10$ 的诗：JOIIJOJOOI。\n\n这首诗中包含一个连续子串 IIJOJO，其中 J、O、I 各自恰好出现 $2$ 次。\n\n由于不存在 J、O、I 各自至少出现 $3$ 次的连续子串，因此输出该子串的长度 $6$。\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le N \\le 200\\,000$\n\n### 子任务\n\n**子任务 1 [5 分]**\n\n- 满足 $N \\le 200$\n\n**子任务 2 [15 分]**\n\n- 满足 $N \\le 4\\,000$\n\n**子任务 3 [80 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2014] JOIOJI", "background": "", "description": "JOIOJI 是 JOI 君的叔叔。JOIOJI 非常在意自己的名字，其中 J、O、I 各自恰好出现了两次。\n\n最近，JOIOJI 的孩子出生了。他希望为孩子取一个名字，也像自己一样，由 J、O、I 这三个字母组成，且每个字母恰好出现相同次数。\n\nJOIOJI 家中有一本代代相传的卷轴，上面写有一首诗。这首诗是由 J、O、I 三个字母组成的长度为 $N$ 的字符串。JOIOJI 打算从这首诗中找出一个连续子串，使得其中 J、O、I 三个字母各自出现的次数完全相同，并将这个子串作为孩子的名字，他希望找到最长的这样的子串。\n\n**题目**\n\n给定 JOIOJI 所持有的卷轴上所写的诗的信息，编写一个程序，求出诗中所有连续子串中，J、O、I 三个字母各自出现次数完全相同的子串的最大长度。", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含一个整数 $N$。$N$ 表示 JOIOJI 所持有的卷轴上所写诗的长度。\n- 第二行包含一个长度为 $N$ 的字符串 $S$。$S$ 表示卷轴上所写的诗，其每个字符均为 J、O、I 中的一个。\n", "outputFormat": "在标准输出中，输出一行，表示诗中所有连续子串中，J、O、I 各自出现次数完全相同的子串的最大长度。如果不存在这样的子串，则输出 $0$。\n", "hint": "### 样例 1 解释\n\n在该输入示例中，卷轴上写有一首长度为 $10$ 的诗：JOIIJOJOOI。\n\n这首诗中包含一个连续子串 IIJOJO，其中 J、O、I 各自恰好出现 $2$ 次。\n\n由于不存在 J、O、I 各自至少出现 $3$ 次的连续子串，因此输出该子串的长度 $6$。\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le N \\le 200\\,000$\n\n### 子任务\n\n**子任务 1 [5 分]**\n\n- 满足 $N \\le 200$\n\n**子任务 2 [15 分]**\n\n- 满足 $N \\le 4\\,000$\n\n**子任务 3 [80 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成\n", "locale": "zh-CN"}}}
{"pid": "P14426", "type": "P", "difficulty": 6, "samples": [["4\n0 0\n2 2\n3 4\n4 3", "3"], ["10\n2 1\n3 0\n6 3\n10 2\n16 4\n0 8\n8 12\n11 14\n14 11\n18 10", "15"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "二分", "cdq 分治", "分块", "单调栈", "JOISC/JOIST（日本）"], "title": "[JOISC 2014] 稻草人 / Scarecrows", "background": "", "description": "在 JOI 村的一片广阔荒地上，竖立着 $N$ 个神社，村民们每年会绕着这些神社举行祭典。某日，村长听闻神社的神谕，决定在荒地上建造一个烟堆，且烟堆必须满足以下条件：\n\n- 烟堆必须是一个各边分别与东西方向或南北方向平行的长方形。\n- 烟堆的西南角顶点和东北角顶点上必须各有一个神社。\n- 烟堆的内部（不包括边界）不能有神社。\n\n当然，神社是神圣的，不允许移动。请问，满足神谕要求的烟堆可能有多少个？\n\n**问题**\n\n给定神社的位置，编写一个程序，计算满足神谕条件的烟堆位置的个数。\n", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含一个整数 $N$，表示有 $N$ 个神社。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含两个整数 $X_i$、$Y_i$，以空格分隔。JOI 村的荒地用 $xy$ 坐标平面表示，其中 $x$ 轴正方向为东，$y$ 轴正方向为北。第 $i$ 个神社位于坐标 $(X_i, Y_i)$。\n", "outputFormat": "在标准输出中，输出一行，表示满足神谕条件的烟堆位置的个数。\n", "hint": "### 样例 1 解释\n\n在该示例中，满足神谕条件的田地位置共有以下 3 个（如下图所示）：\n\n- 以点 $(0, 0)$ 为西南顶点、点 $(2, 2)$ 为东北顶点的长方形。\n- 以点 $(2, 2)$ 为西南顶点、点 $(3, 4)$ 为东北顶点的长方形。\n- 以点 $(2, 2)$ 为西南顶点、点 $(4, 3)$ 为东北顶点的长方形。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/h69rh6i4.png)\n:::\n\n### 样例 2 解释\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/bg5chuqw.png)\n:::\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le N \\le 200\\,000$\n- $0 \\le X_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）\n- $0 \\le Y_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）\n- $X_i$（$1 \\le i \\le N$）两两互不相同\n- $Y_i$（$1 \\le i \\le N$）两两互不相同\n\n### 子任务\n\n**子任务 1 [5 分]**\n\n- 满足 $N \\le 400$\n\n**子任务 2 [10 分]**\n\n- 满足 $N \\le 5\\,000$\n\n**子任务 3 [85 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2014] 稻草人 / Scarecrows", "background": "", "description": "在 JOI 村的一片广阔荒地上，竖立着 $N$ 个神社，村民们每年会绕着这些神社举行祭典。某日，村长听闻神社的神谕，决定在荒地上建造一个烟堆，且烟堆必须满足以下条件：\n\n- 烟堆必须是一个各边分别与东西方向或南北方向平行的长方形。\n- 烟堆的西南角顶点和东北角顶点上必须各有一个神社。\n- 烟堆的内部（不包括边界）不能有神社。\n\n当然，神社是神圣的，不允许移动。请问，满足神谕要求的烟堆可能有多少个？\n\n**问题**\n\n给定神社的位置，编写一个程序，计算满足神谕条件的烟堆位置的个数。\n", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含一个整数 $N$，表示有 $N$ 个神社。\n- 接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）包含两个整数 $X_i$、$Y_i$，以空格分隔。JOI 村的荒地用 $xy$ 坐标平面表示，其中 $x$ 轴正方向为东，$y$ 轴正方向为北。第 $i$ 个神社位于坐标 $(X_i, Y_i)$。\n", "outputFormat": "在标准输出中，输出一行，表示满足神谕条件的烟堆位置的个数。\n", "hint": "### 样例 1 解释\n\n在该示例中，满足神谕条件的田地位置共有以下 3 个（如下图所示）：\n\n- 以点 $(0, 0)$ 为西南顶点、点 $(2, 2)$ 为东北顶点的长方形。\n- 以点 $(2, 2)$ 为西南顶点、点 $(3, 4)$ 为东北顶点的长方形。\n- 以点 $(2, 2)$ 为西南顶点、点 $(4, 3)$ 为东北顶点的长方形。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/h69rh6i4.png)\n:::\n\n### 样例 2 解释\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/bg5chuqw.png)\n:::\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $1 \\le N \\le 200\\,000$\n- $0 \\le X_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）\n- $0 \\le Y_i \\le 1\\,000\\,000\\,000$（$1 \\le i \\le N$）\n- $X_i$（$1 \\le i \\le N$）两两互不相同\n- $Y_i$（$1 \\le i \\le N$）两两互不相同\n\n### 子任务\n\n**子任务 1 [5 分]**\n\n- 满足 $N \\le 400$\n\n**子任务 2 [10 分]**\n\n- 满足 $N \\le 5\\,000$\n\n**子任务 3 [85 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成\n", "locale": "zh-CN"}}}
{"pid": "P14427", "type": "P", "difficulty": 5, "samples": [["4 5\n1 2\n1 3\n1 4\n2 4\n3 4", "1"], ["4 4\n1 2\n2 3\n3 2\n4 3", "2"], ["13 16\n1 6\n2 6\n3 1\n3 2\n4 7\n4 7\n5 9\n6 5\n8 2\n8 13\n9 11\n10 3\n11 10\n11 12\n12 8\n13 6", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "二分图", "JOISC/JOIST（日本）"], "title": "[JOISC 2014] 电压 / Voltage", "background": "", "description": "你是否听说过 Just Odd Inventions 公司？该公司的业务是“进行各种奇妙的发明（just odd inventions）”，这里我们简称为 JOI 公司。\n\nJOI 公司的某实验室中有一个复杂的电路，该电路由 $N$ 个节点和 $M$ 条细长的电阻组成。节点编号从 $1$ 到 $N$。每个节点可以被设置为“高电压”或“低电压”状态。每条电阻连接两个节点，当其中一个节点处于“高电压”、另一个节点处于“低电压”时，电流才会流过该电阻。如果两个节点都处于“高电压”或都处于“低电压”，则电流不会流过该电阻。\n\n某日，JOI 公司为维护该电路，决定选择一条电阻，使其不导电，而其余 $M-1$ 条电阻均导电。为了满足这一条件，需要确定有多少条电阻可以被选为“不导电”的电阻。\n\n另外，JOI 公司使用这个奇妙电路做出了何种发明，是公司内部最高机密，除了社长外无人知晓。\n\n**题目**\n\n给定电路的信息，编写一个程序，计算在维护时可以选为“不导电”的电阻的数量。", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含两个整数 $N$、$M$，以空格分隔，表示有 $N$ 个节点、$M$ 条电阻。\n- 接下来的 $M$ 行中，第 $i$ 行（$1 \\le i \\le M$）包含两个整数 $A_i$、$B_i$（满足 $1 \\le A_i \\le N$，$1 \\le B_i \\le N$，且 $A_i \\ne B_i$），以空格分隔，表示第 $i$ 条电阻连接节点 $A_i$ 和节点 $B_i$。\n", "outputFormat": "在标准输出中，输出一行，表示在维护时可以选为“不导电”的电阻的数量。\n", "hint": "### 样例 1 解释\n\n在该示例中，仅能使第 3 条电阻不导电。例如，将节点 1 和节点 4 设置为“高电压”，将节点 2 和节点 3 设置为“低电压”即可。由于第 3 条电阻连接的是节点 1 和节点 4，因此电流不会流过该电阻。无法选择第 3 条电阻以外的任何电阻作为维护时不导电的电阻。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/20olmvk3.png)\n:::\n\n### 样例 2 解释\n\n在该示例中，可以选择第 1 条电阻或第 4 条电阻作为维护时不导电的电阻。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/3jdkps1b.png)\n:::\n\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $2 \\le N \\le 100\\,000$\n- $1 \\le M \\le 200\\,000$\n\n### 子任务\n\n**子任务 1 [10 分]**\n\n满足以下条件：\n\n- $N \\le 1\\,000$\n- $M \\le 2\\,000$\n\n**子任务 2 [10 分]**\n\n- 任意两个节点之间，均可通过若干条相连的电阻到达。\n- 满足 $M = N$\n\n**子任务 3 [35 分]**\n\n- 任意两个节点之间，均可通过若干条相连的电阻到达。\n- 满足 $M \\le N + 100$\n\n**子任务 4 [45 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2014] 电压 / Voltage", "background": "", "description": "你是否听说过 Just Odd Inventions 公司？该公司的业务是“进行各种奇妙的发明（just odd inventions）”，这里我们简称为 JOI 公司。\n\nJOI 公司的某实验室中有一个复杂的电路，该电路由 $N$ 个节点和 $M$ 条细长的电阻组成。节点编号从 $1$ 到 $N$。每个节点可以被设置为“高电压”或“低电压”状态。每条电阻连接两个节点，当其中一个节点处于“高电压”、另一个节点处于“低电压”时，电流才会流过该电阻。如果两个节点都处于“高电压”或都处于“低电压”，则电流不会流过该电阻。\n\n某日，JOI 公司为维护该电路，决定选择一条电阻，使其不导电，而其余 $M-1$ 条电阻均导电。为了满足这一条件，需要确定有多少条电阻可以被选为“不导电”的电阻。\n\n另外，JOI 公司使用这个奇妙电路做出了何种发明，是公司内部最高机密，除了社长外无人知晓。\n\n**题目**\n\n给定电路的信息，编写一个程序，计算在维护时可以选为“不导电”的电阻的数量。", "inputFormat": "从标准输入读取以下数据：\n\n- 第一行包含两个整数 $N$、$M$，以空格分隔，表示有 $N$ 个节点、$M$ 条电阻。\n- 接下来的 $M$ 行中，第 $i$ 行（$1 \\le i \\le M$）包含两个整数 $A_i$、$B_i$（满足 $1 \\le A_i \\le N$，$1 \\le B_i \\le N$，且 $A_i \\ne B_i$），以空格分隔，表示第 $i$ 条电阻连接节点 $A_i$ 和节点 $B_i$。\n", "outputFormat": "在标准输出中，输出一行，表示在维护时可以选为“不导电”的电阻的数量。\n", "hint": "### 样例 1 解释\n\n在该示例中，仅能使第 3 条电阻不导电。例如，将节点 1 和节点 4 设置为“高电压”，将节点 2 和节点 3 设置为“低电压”即可。由于第 3 条电阻连接的是节点 1 和节点 4，因此电流不会流过该电阻。无法选择第 3 条电阻以外的任何电阻作为维护时不导电的电阻。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/20olmvk3.png)\n:::\n\n### 样例 2 解释\n\n在该示例中，可以选择第 1 条电阻或第 4 条电阻作为维护时不导电的电阻。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/3jdkps1b.png)\n:::\n\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $2 \\le N \\le 100\\,000$\n- $1 \\le M \\le 200\\,000$\n\n### 子任务\n\n**子任务 1 [10 分]**\n\n满足以下条件：\n\n- $N \\le 1\\,000$\n- $M \\le 2\\,000$\n\n**子任务 2 [10 分]**\n\n- 任意两个节点之间，均可通过若干条相连的电阻到达。\n- 满足 $M = N$\n\n**子任务 3 [35 分]**\n\n- 任意两个节点之间，均可通过若干条相连的电阻到达。\n- 满足 $M \\le N + 100$\n\n**子任务 4 [45 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14428", "type": "P", "difficulty": 6, "samples": [["7\n0 0 0\n2 0 1\n1 2 2\n-2 1 0\n-2 -3 0\n0 -2 1\n2 -2 2", "4"], ["8\n16 0 0\n17 0 0\n0 7 2\n0 -7 2\n-1 -1 1\n-1 1 2\n-6 4 1\n-6 -4 1", "12"], ["21\n1 20 0\n4 20 0\n0 22 0\n5 22 0\n6 25 0\n8 25 0\n4 26 0\n11 11 1\n7 12 1\n14 13 1\n8 15 1\n15 16 1\n11 17 1\n18 0 2\n13 2 2\n16 2 2\n19 4 2\n18 6 2\n21 8 2\n24 8 2\n19 10 2", "7748"]], "limits": {"time": [9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["计算几何", "2014", "极角排序", "JOISC/JOIST（日本）"], "title": "[JOISC 2014] 二人的星座 / Constellation 2", "background": "", "description": "JOI 酱和 IOI 酱是亲密无间的好友。某日，她们决定在山顶的观景台上进行天文观测。\n\n在观景台上，可以观测到 $N$ 颗星星。每颗星星被赋予从 $1$ 到 $N$ 的编号，并且每颗星星呈现红色、蓝色或黄色中的一种颜色。\n\n在观景台上观测到的星星被表示为坐标平面上的点。在该坐标平面中，第 $i$ 颗星星（$1 \\le i \\le N$）对应于点 $P_i(X_i, Y_i)$。坐标平面上的点 $P_1, \\dots, P_N$ 两两互不相同，且任意三点不共线。\n\nJOI 酱和 IOI 酱决定创造一个名为 **JOIOI 座** 的星座。她们首先考虑用红色、蓝色、黄色各一颗星星构成一个三角形，称这样的三角形为“**良好三角形**”。\n\n两人决定将满足以下条件的两组良好三角形（不考虑顺序）作为 **JOIOI 座** 的候选：\n\n- 两个良好三角形（包括三角形的边界和内部）没有公共点。也就是说，两个良好三角形既不重叠，也没有一个包含另一个的情况。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/yypz4s9z.png)\n\n左图：满足条件的样例  \n右图：不满足条件的样例\n:::\n\nJOI 酱和 IOI 酱决定统计可以作为 **JOIOI 座** 候选的方案总数。需要注意的是，即使构成 **JOIOI 座** 候选的 6 颗星星完全相同，只要构成“良好三角形”的连接方式不同，就将它们视为不同的候选方案进行计数。\n\n**问题**\n\n给定在观景台上观测到的星星信息，编写一个程序，输出 **JOIOI 座** 候选方案的总数。", "inputFormat": "从标准输入读取以下数据：\n\n- 第 1 行包含一个整数 $N$，表示在观景台上观测到的星星数量。\n- 接下来的 $N$ 行中的第 $i$ 行（$1 \\le i \\le N$）包含三个整数 $X_i, Y_i, C_i$，以空格分隔。这表示第 $i$ 颗星星的坐标为 $P_i(X_i, Y_i)$，而 $C_i$ 表示第 $i$ 颗星星的颜色：若 $C_i = 0$，则为红色；若 $C_i = 1$，则为蓝色；若 $C_i = 2$，则为黄色。\n", "outputFormat": "在标准输出上，输出一个整数，表示 **JOIOI 座** 候选方案的总数，占一行。\n", "hint": "### 样例 1 解释\n\n在该输入示例中，星星的分布如图所示。图中，红色星星用圆形表示，蓝色星星用菱形表示，黄色星星用三角形表示。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/xktibru4.png)\n:::\n\n在该输入示例中，**JOIOI 座** 的候选方案共有以下 4 种。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/9mcq9uuc.png)\n:::\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $6 \\le N \\le 3\\,000$\n- $-100\\,000 \\le X_i \\le 100\\,000$\n- $-100\\,000 \\le Y_i \\le 100\\,000$\n- $0 \\le C_i \\le 2$\n- 每种颜色的星星至少存在一颗\n- $P_i \\ne P_j$（对所有 $1 \\le i < j \\le N$）\n- $P_i, P_j, P_k$ 不共线（对所有 $1 \\le i < j < k \\le N$）\n\n### 子任务\n\n**子任务 1 [15 分]**\n\n- 满足 $N \\le 30$。\n\n**子任务 2 [40 分]**\n\n- 满足 $N \\le 300$。\n\n**子任务 3 [45 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2014] 二人的星座 / Constellation 2", "background": "", "description": "JOI 酱和 IOI 酱是亲密无间的好友。某日，她们决定在山顶的观景台上进行天文观测。\n\n在观景台上，可以观测到 $N$ 颗星星。每颗星星被赋予从 $1$ 到 $N$ 的编号，并且每颗星星呈现红色、蓝色或黄色中的一种颜色。\n\n在观景台上观测到的星星被表示为坐标平面上的点。在该坐标平面中，第 $i$ 颗星星（$1 \\le i \\le N$）对应于点 $P_i(X_i, Y_i)$。坐标平面上的点 $P_1, \\dots, P_N$ 两两互不相同，且任意三点不共线。\n\nJOI 酱和 IOI 酱决定创造一个名为 **JOIOI 座** 的星座。她们首先考虑用红色、蓝色、黄色各一颗星星构成一个三角形，称这样的三角形为“**良好三角形**”。\n\n两人决定将满足以下条件的两组良好三角形（不考虑顺序）作为 **JOIOI 座** 的候选：\n\n- 两个良好三角形（包括三角形的边界和内部）没有公共点。也就是说，两个良好三角形既不重叠，也没有一个包含另一个的情况。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/yypz4s9z.png)\n\n左图：满足条件的样例  \n右图：不满足条件的样例\n:::\n\nJOI 酱和 IOI 酱决定统计可以作为 **JOIOI 座** 候选的方案总数。需要注意的是，即使构成 **JOIOI 座** 候选的 6 颗星星完全相同，只要构成“良好三角形”的连接方式不同，就将它们视为不同的候选方案进行计数。\n\n**问题**\n\n给定在观景台上观测到的星星信息，编写一个程序，输出 **JOIOI 座** 候选方案的总数。", "inputFormat": "从标准输入读取以下数据：\n\n- 第 1 行包含一个整数 $N$，表示在观景台上观测到的星星数量。\n- 接下来的 $N$ 行中的第 $i$ 行（$1 \\le i \\le N$）包含三个整数 $X_i, Y_i, C_i$，以空格分隔。这表示第 $i$ 颗星星的坐标为 $P_i(X_i, Y_i)$，而 $C_i$ 表示第 $i$ 颗星星的颜色：若 $C_i = 0$，则为红色；若 $C_i = 1$，则为蓝色；若 $C_i = 2$，则为黄色。\n", "outputFormat": "在标准输出上，输出一个整数，表示 **JOIOI 座** 候选方案的总数，占一行。\n", "hint": "### 样例 1 解释\n\n在该输入示例中，星星的分布如图所示。图中，红色星星用圆形表示，蓝色星星用菱形表示，黄色星星用三角形表示。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/xktibru4.png)\n:::\n\n在该输入示例中，**JOIOI 座** 的候选方案共有以下 4 种。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/9mcq9uuc.png)\n:::\n\n### 数据范围\n\n所有输入数据均满足以下条件：\n\n- $6 \\le N \\le 3\\,000$\n- $-100\\,000 \\le X_i \\le 100\\,000$\n- $-100\\,000 \\le Y_i \\le 100\\,000$\n- $0 \\le C_i \\le 2$\n- 每种颜色的星星至少存在一颗\n- $P_i \\ne P_j$（对所有 $1 \\le i < j \\le N$）\n- $P_i, P_j, P_k$ 不共线（对所有 $1 \\le i < j < k \\le N$）\n\n### 子任务\n\n**子任务 1 [15 分]**\n\n- 满足 $N \\le 30$。\n\n**子任务 2 [40 分]**\n\n- 满足 $N \\le 300$。\n\n**子任务 3 [45 分]**\n\n无额外限制。\n\n翻译由 Qwen3-235B 完成", "locale": "zh-CN"}}}
{"pid": "P14430", "type": "P", "difficulty": 5, "samples": [["10 10 1 3 10 1\n3\n1 3 5 6 4\n5 5 7 10 1\n7 1 10 5 9", "50"], ["4 3 2 1 4 3\n3\n1 1 4 2 0\n1 1 2 2 3\n2 2 4 3 3", "6"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2013", "JOISC/JOIST（日本）"], "title": "[JOISC 2013] 公交换乘 / Bus Tour", "background": "为了保证标程可以通过本题，本题内存限制翻倍。", "description": "JOI 市的公共交通系统十分发达。特别是，公交专用道路以网格状铺设，因此公交车不受交通状况影响，能够以恒定速度行驶。南北方向的公交专用道路有 $W$ 条，间隔为 $1$ km；东西方向的公交专用道路有 $H$ 条，间隔同样为 $1$ km。所有公交车均在矩形的运行路线上按顺时针方向以每分钟 $1$ km 的速度行驶。此外，在公交专用道路的交叉点设有公交车站。\n\nJOI 君今天计划去观看一场板球比赛，但因睡过头而迟到了。虽然可能无法赶上比赛开始时间，但 JOI 君希望尽可能多地观看比赛，因此他想要尽早到达比赛场地。\n\n### 任务\n\nJOI 君事先查好了公交车的运行信息，因此他知道每辆公交车的当前位置及其运行路线。请编写一个程序，计算从即刻出发，通过换乘公交车到达比赛场地所需的最短时间。假定移动仅使用公交车，且公交车之间的换乘需要时间：下车后不能立即在同一交叉点换乘同一时刻到达的公交车，只能换乘在下车后 **$1$ 分钟或更晚** 到达的公交车。此外，保证 JOI 君能够仅使用公交车到达比赛场地。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行为 $6$ 个整数 $W, H, S_x, S_y, G_x, G_y$（$1 \\leq S_x \\leq W$，$1 \\leq S_y \\leq H$，$1 \\leq G_x \\leq W$，$1 \\leq G_y \\leq H$），以空格分隔。这表示有 $W$ 条南北方向的公交专用道路，以及与它们垂直的 $H$ 条东西方向的公交专用道路。此外，JOI 君初始位于从西数第 $S_x$ 条公交专用道路与从北数第 $S_y$ 条公交专用道路的交叉点；JOI 君的目的地（比赛会场）位于从西数第 $G_x$ 条公交专用道路与从北数第 $G_y$ 条公交专用道路的交叉点。JOI 君的初始位置与目的地不同，且 JOI 君出发瞬间其初始位置没有公交车。\n\n- 第 $2$ 行为一个整数 $N$，表示 JOI 市运行的公交车数量。\n\n- 后续 $N$ 行描述公交车信息。第 $i$ 行包含 $5$ 个整数 $X_{1i}, Y_{1i}, X_{2i}, Y_{2i}, T_i$（$1 \\leq X_{1i} < X_{2i} \\leq W$，$1 \\leq Y_{1i} \\leq Y_{2i} \\leq H$，$0 \\leq T < 2 \\times (X_{2i} - X_{1i} + Y_{2i} - Y_{1i})$）。这表示第 $i$ 辆公交车的路线西北端位于从西数第 $X_{1i}$ 条公交专用道路与从北数第 $Y_{1i}$ 条公交专用道路的交叉点，路线东南端位于从西数第 $X_{2i}$ 条公交专用道路与从北数第 $Y_{2i}$ 条公交专用道路的交叉点。此外，在 JOI 君出发时刻，第 $i$ 辆公交车位于从路线西北端顺时针前进 $T_i$ km 的位置。", "outputFormat": "输出一行，表示 JOI 君从出发到到达比赛会场所需时间的最小值。\n", "hint": "### 样例 1 解释\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/w07gssu2.png)\n:::\n\n上图是从空中俯瞰该输入示例中 JOI 市的示意图。圆形标记表示公交车的当前位置。箭头表示该公交车的行驶路线。JOI 君的当前位置用三角形标示，目的地比赛会场用四边形标示。\n\nJOI 君必须等待 1 号公交车到来。假设他在 $10$ 分钟后搭乘 1 号公交车，则 $11$ 分钟后的状态如下所示。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/st3oq9rb.png)\n:::\n\n接着，JOI 君需要从 1 号公交车换乘至 2 号公交车。假设他在出发后 $16$ 分钟下车，则 $19$ 分钟后的状态如下所示。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/koxfdbs2.png)\n:::\n\n搭乘 2 号公交车后，需换乘至 3 号公交车。出发后 $29$ 分钟，当 JOI 君从 2 号公交车下车时，同一交叉点正停靠着 3 号公交车。然而，换乘需要 $1$ 分钟时间，因此无法搭乘这班公交车。\n\n假设 JOI 君在出发后 $43$ 分钟搭乘 3 号公交车，则到达比赛会场前 $49$ 分钟的场景如下所示。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/k9h46mqr.png)\n:::\n\n$1$ 分钟后，JOI 君抵达比赛会场。由于无法比这更早到达，程序应输出 $50$。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $2 \\leq W \\leq 1000$\n- $2 \\leq H \\leq 1000$\n- $1 \\leq N \\leq 1000$\n\n### 子任务\n\n#### 子任务 1 [30 分]\n\n满足以下条件：\n\n- $W \\leq 30$\n- $H \\leq 30$\n- $N \\leq 30$\n\n#### 子任务 2 [50 分]\n\n满足以下条件：\n\n- $W \\leq 300$\n- $H \\leq 300$\n- $N \\leq 300$\n\n#### 子任务 3 [20 分]\n\n无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2013] 公交换乘 / Bus Tour", "background": "为了保证标程可以通过本题，本题内存限制翻倍。", "description": "JOI 市的公共交通系统十分发达。特别是，公交专用道路以网格状铺设，因此公交车不受交通状况影响，能够以恒定速度行驶。南北方向的公交专用道路有 $W$ 条，间隔为 $1$ km；东西方向的公交专用道路有 $H$ 条，间隔同样为 $1$ km。所有公交车均在矩形的运行路线上按顺时针方向以每分钟 $1$ km 的速度行驶。此外，在公交专用道路的交叉点设有公交车站。\n\nJOI 君今天计划去观看一场板球比赛，但因睡过头而迟到了。虽然可能无法赶上比赛开始时间，但 JOI 君希望尽可能多地观看比赛，因此他想要尽早到达比赛场地。\n\n### 任务\n\nJOI 君事先查好了公交车的运行信息，因此他知道每辆公交车的当前位置及其运行路线。请编写一个程序，计算从即刻出发，通过换乘公交车到达比赛场地所需的最短时间。假定移动仅使用公交车，且公交车之间的换乘需要时间：下车后不能立即在同一交叉点换乘同一时刻到达的公交车，只能换乘在下车后 **$1$ 分钟或更晚** 到达的公交车。此外，保证 JOI 君能够仅使用公交车到达比赛场地。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行为 $6$ 个整数 $W, H, S_x, S_y, G_x, G_y$（$1 \\leq S_x \\leq W$，$1 \\leq S_y \\leq H$，$1 \\leq G_x \\leq W$，$1 \\leq G_y \\leq H$），以空格分隔。这表示有 $W$ 条南北方向的公交专用道路，以及与它们垂直的 $H$ 条东西方向的公交专用道路。此外，JOI 君初始位于从西数第 $S_x$ 条公交专用道路与从北数第 $S_y$ 条公交专用道路的交叉点；JOI 君的目的地（比赛会场）位于从西数第 $G_x$ 条公交专用道路与从北数第 $G_y$ 条公交专用道路的交叉点。JOI 君的初始位置与目的地不同，且 JOI 君出发瞬间其初始位置没有公交车。\n\n- 第 $2$ 行为一个整数 $N$，表示 JOI 市运行的公交车数量。\n\n- 后续 $N$ 行描述公交车信息。第 $i$ 行包含 $5$ 个整数 $X_{1i}, Y_{1i}, X_{2i}, Y_{2i}, T_i$（$1 \\leq X_{1i} < X_{2i} \\leq W$，$1 \\leq Y_{1i} \\leq Y_{2i} \\leq H$，$0 \\leq T < 2 \\times (X_{2i} - X_{1i} + Y_{2i} - Y_{1i})$）。这表示第 $i$ 辆公交车的路线西北端位于从西数第 $X_{1i}$ 条公交专用道路与从北数第 $Y_{1i}$ 条公交专用道路的交叉点，路线东南端位于从西数第 $X_{2i}$ 条公交专用道路与从北数第 $Y_{2i}$ 条公交专用道路的交叉点。此外，在 JOI 君出发时刻，第 $i$ 辆公交车位于从路线西北端顺时针前进 $T_i$ km 的位置。", "outputFormat": "输出一行，表示 JOI 君从出发到到达比赛会场所需时间的最小值。\n", "hint": "### 样例 1 解释\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/w07gssu2.png)\n:::\n\n上图是从空中俯瞰该输入示例中 JOI 市的示意图。圆形标记表示公交车的当前位置。箭头表示该公交车的行驶路线。JOI 君的当前位置用三角形标示，目的地比赛会场用四边形标示。\n\nJOI 君必须等待 1 号公交车到来。假设他在 $10$ 分钟后搭乘 1 号公交车，则 $11$ 分钟后的状态如下所示。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/st3oq9rb.png)\n:::\n\n接着，JOI 君需要从 1 号公交车换乘至 2 号公交车。假设他在出发后 $16$ 分钟下车，则 $19$ 分钟后的状态如下所示。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/koxfdbs2.png)\n:::\n\n搭乘 2 号公交车后，需换乘至 3 号公交车。出发后 $29$ 分钟，当 JOI 君从 2 号公交车下车时，同一交叉点正停靠着 3 号公交车。然而，换乘需要 $1$ 分钟时间，因此无法搭乘这班公交车。\n\n假设 JOI 君在出发后 $43$ 分钟搭乘 3 号公交车，则到达比赛会场前 $49$ 分钟的场景如下所示。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/k9h46mqr.png)\n:::\n\n$1$ 分钟后，JOI 君抵达比赛会场。由于无法比这更早到达，程序应输出 $50$。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $2 \\leq W \\leq 1000$\n- $2 \\leq H \\leq 1000$\n- $1 \\leq N \\leq 1000$\n\n### 子任务\n\n#### 子任务 1 [30 分]\n\n满足以下条件：\n\n- $W \\leq 30$\n- $H \\leq 30$\n- $N \\leq 30$\n\n#### 子任务 2 [50 分]\n\n满足以下条件：\n\n- $W \\leq 300$\n- $H \\leq 300$\n- $N \\leq 300$\n\n#### 子任务 3 [20 分]\n\n无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14431", "type": "P", "difficulty": 5, "samples": [["2 3\n0 1\n1 2\n0 3", "13\n17\n21"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "JOISC/JOIST（日本）"], "title": "[JOISC 2013] 有趣的图像收集 / Collecting Images is Fun", "background": "", "description": "JOI 君非常喜欢收集大量图片，并拥有许多图像。最近，JOI 君发现自己因收集过多图片而导致硬盘容量略显不足。他没有购买新硬盘的预算，但删除已有的图片对他而言是极大的痛苦，因此他决定通过巧妙地压缩图片来减少存储空间。\n\n每张图片由 $2^N$ 行 $2^N$ 列的正方形像素网格表示，共计 $2^N \\times 2^N$ 个像素。每个像素为白色或黑色。\n\nJOI 君采用以下方法对这类图像进行压缩：\n\n- 若图像内所有像素颜色相同，则仅记录该颜色。此时压缩后数据的大小为 $1$。\n- 否则，将图像分割为四个较小的子图像。若原图像为 $2^k$ 行 $2^k$ 列，则沿纵向和横向的中心线进行分割，得到四个 $2^{k-1}$ 行 $2^{k-1}$ 列的子图像。对这些较小的子图像递归应用相同的压缩方法。此时，压缩后数据的大小为四个子图像压缩后数据大小之和再加 $1$。\n\nJOI 君对这种方法是否能有效压缩图像感到不安，因此决定对多种图像进行实验。实验方法如下：\n\n- 首先准备一张所有像素均为白色的图像。\n- 对于 $i = 1, \\cdots, Q$，执行以下操作：若 $T_i = 0$，则反转从上数第 $X_i$ 行的 $2^N$ 个像素的颜色；若 $T_i = 1$，则反转从左数第 $X_i$ 列的 $2^N$ 个像素的颜色。即，记从上第 $a$ 行、从左第 $b$ 列的像素为 $(a,b)$，对于每个 $i$，当 $T_i = 0$ 时，对满足 $1 \\leq b \\leq 2^N$ 的像素 $(X_i,b)$ 执行颜色反转（白变黑，黑变白）；当 $T_i = 1$ 时，对满足 $1 \\leq a \\leq 2^N$ 的像素 $(a,X_i)$ 执行颜色反转。\n- 对于每个 $i$，在第 $i$ 次操作结束后，调查按 JOI 君方法压缩该图像后所得数据的大小。\n\n为了在实验中执行尽可能多的操作，需要高效计算压缩后数据的大小。\n\n### 任务\n\n给定表示图像大小的整数 $N$、操作次数 $Q$ 以及 $Q$ 次操作的描述，编写程序计算每次操作结束后，按 JOI 君方法压缩图像所得数据的大小。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含两个以空格分隔的整数 $N, Q$，表示图像大小为 $2^N$ 行 $2^N$ 列，且将执行 $Q$ 次操作。\n\n- 接下来的 $Q$ 行描述操作指令。第 $i$ 行（$1 \\leq i \\leq Q$）包含两个以空格分隔的整数 $T_i, X_i$（$0 \\leq T_i \\leq 1$ 且 $1 \\leq X_i \\leq 2^N$），表示第 $i$ 次操作：若 $T_i = 0$ 则反转从上数第 $X_i$ 行的所有像素颜色；若 $T_i = 1$ 则反转从左数第 $X_i$ 列的所有像素颜色。", "outputFormat": "向标准输出输出 $Q$ 行。第 $i$ 行（$1 \\leq i \\leq Q$）应包含一个整数，表示第 $i$ 次操作结束后，按 JOI 君方法压缩图像所得数据的大小。\n", "hint": "### 样例 1 解释\n\n在这个例子中，$Q=3$ 次操作按以下方式进行：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/scd6upwx.png)\n:::\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $1 \\leq N \\leq 20$\n- $1 \\leq Q \\leq 2\\,000\\,000$\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n满足以下条件：\n\n- $N \\leq 6$\n- $Q \\leq 128$\n\n#### 子任务 2 [20 分]\n\n满足以下条件：\n\n- $N \\leq 10$\n- $Q \\leq 2\\,048$\n\n#### 子任务 3 [70 分]\n\n无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2013] 有趣的图像收集 / Collecting Images is Fun", "background": "", "description": "JOI 君非常喜欢收集大量图片，并拥有许多图像。最近，JOI 君发现自己因收集过多图片而导致硬盘容量略显不足。他没有购买新硬盘的预算，但删除已有的图片对他而言是极大的痛苦，因此他决定通过巧妙地压缩图片来减少存储空间。\n\n每张图片由 $2^N$ 行 $2^N$ 列的正方形像素网格表示，共计 $2^N \\times 2^N$ 个像素。每个像素为白色或黑色。\n\nJOI 君采用以下方法对这类图像进行压缩：\n\n- 若图像内所有像素颜色相同，则仅记录该颜色。此时压缩后数据的大小为 $1$。\n- 否则，将图像分割为四个较小的子图像。若原图像为 $2^k$ 行 $2^k$ 列，则沿纵向和横向的中心线进行分割，得到四个 $2^{k-1}$ 行 $2^{k-1}$ 列的子图像。对这些较小的子图像递归应用相同的压缩方法。此时，压缩后数据的大小为四个子图像压缩后数据大小之和再加 $1$。\n\nJOI 君对这种方法是否能有效压缩图像感到不安，因此决定对多种图像进行实验。实验方法如下：\n\n- 首先准备一张所有像素均为白色的图像。\n- 对于 $i = 1, \\cdots, Q$，执行以下操作：若 $T_i = 0$，则反转从上数第 $X_i$ 行的 $2^N$ 个像素的颜色；若 $T_i = 1$，则反转从左数第 $X_i$ 列的 $2^N$ 个像素的颜色。即，记从上第 $a$ 行、从左第 $b$ 列的像素为 $(a,b)$，对于每个 $i$，当 $T_i = 0$ 时，对满足 $1 \\leq b \\leq 2^N$ 的像素 $(X_i,b)$ 执行颜色反转（白变黑，黑变白）；当 $T_i = 1$ 时，对满足 $1 \\leq a \\leq 2^N$ 的像素 $(a,X_i)$ 执行颜色反转。\n- 对于每个 $i$，在第 $i$ 次操作结束后，调查按 JOI 君方法压缩该图像后所得数据的大小。\n\n为了在实验中执行尽可能多的操作，需要高效计算压缩后数据的大小。\n\n### 任务\n\n给定表示图像大小的整数 $N$、操作次数 $Q$ 以及 $Q$ 次操作的描述，编写程序计算每次操作结束后，按 JOI 君方法压缩图像所得数据的大小。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含两个以空格分隔的整数 $N, Q$，表示图像大小为 $2^N$ 行 $2^N$ 列，且将执行 $Q$ 次操作。\n\n- 接下来的 $Q$ 行描述操作指令。第 $i$ 行（$1 \\leq i \\leq Q$）包含两个以空格分隔的整数 $T_i, X_i$（$0 \\leq T_i \\leq 1$ 且 $1 \\leq X_i \\leq 2^N$），表示第 $i$ 次操作：若 $T_i = 0$ 则反转从上数第 $X_i$ 行的所有像素颜色；若 $T_i = 1$ 则反转从左数第 $X_i$ 列的所有像素颜色。", "outputFormat": "向标准输出输出 $Q$ 行。第 $i$ 行（$1 \\leq i \\leq Q$）应包含一个整数，表示第 $i$ 次操作结束后，按 JOI 君方法压缩图像所得数据的大小。\n", "hint": "### 样例 1 解释\n\n在这个例子中，$Q=3$ 次操作按以下方式进行：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/scd6upwx.png)\n:::\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $1 \\leq N \\leq 20$\n- $1 \\leq Q \\leq 2\\,000\\,000$\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n满足以下条件：\n\n- $N \\leq 6$\n- $Q \\leq 128$\n\n#### 子任务 2 [20 分]\n\n满足以下条件：\n\n- $N \\leq 10$\n- $Q \\leq 2\\,048$\n\n#### 子任务 3 [70 分]\n\n无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14432", "type": "P", "difficulty": 6, "samples": [["4 3 3 1\n1 1\n3 2\n2 3\n1 1 1\n1 2 1\n1 3 2\n1 4 2\n2 1 3\n2 2 3\n3 -1\n2 -2\n1 -3\n1 1 3\n1 2 2\n1 3 1\n1 4 1\n2 1 2\n2 2 3\n2", "-2"], ["6 4 5 4\n2 1\n4 1\n3 3\n5 2\n1 1 1\n1 2 1\n1 3 2\n1 4 2\n2 2 4\n1 5 4\n1 6 4\n2 1 3\n2 4 3\n3 -3\n5 -1\n2 -2\n2 -1\n4 -2\n1 2 4\n1 3 4\n1 1 4\n2 1 3\n1 5 2\n1 6 2\n1 4 5\n2 2 5\n1 3 1\n2 5 1\n3\n1\n2\n0", "0\n-2\n-1\n-3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "JOISC/JOIST（日本）"], "title": "[JOISC 2013] 通信阻塞 / Communication Jamming", "background": "", "description": "JOI 国位于平面上。国内有 $N$ 个村庄，村庄编号为 $1$ 到 $N$。村庄 $i$ 被视为位于坐标 $(i,0)$ 的点。目前，JOI 国计划建设连接村庄的通信线路。为应对故障，计划建设两套系统，分别称为 **系统 1** 和 **系统 2**。\n\n系统 $k$ 包含 $M_k$ 个枢纽和 $N + M_k - 1$ 条线路。系统 $k$ 的枢纽编号为 $1$ 到 $M_k$，枢纽 $j$ 被视为位于坐标 $(X_{kj}, Y_{kj})$ 的点。系统 $k$ 的每条线路连接村庄与系统 $k$ 的枢纽，或连接系统 $k$ 的枢纽之间。每条线路被视为连接两端的线段。保证任意两条线路除端点外没有其他公共点。系统 $1$ 的枢纽 $j$ 的 $y$ 坐标 $Y_{1j}$ 大于 $0$；系统 $2$ 的枢纽 $j$ 的 $y$ 坐标 $Y_{2j}$ 小于 $0$。\n\n若两个地点能通过线路间接连接，则称它们可以通信。即，若能通过沿线路反复移动从一个地点到达另一个地点，则这两个地点可以通信。仅考虑系统 $1$ 的线路或仅考虑系统 $2$ 的线路时，任意两个村庄及枢纽均可以通信。\n\n下图是通信线路的示例。灰色圆点表示系统 $1$ 的枢纽，黑色圆点表示系统 $2$ 的枢纽，白色圆点表示村庄。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/xwbor34c.png)\n\n左图对应样例 1，右图对应样例 2\n:::\n\n在计划讨论中，需研究在外部攻击下通信的可持续性。外部攻击由两个数 $A$, $B$（$A \\geq 0$, $B \\leq 0$）描述，假设其会破坏所有 $y$ 坐标大于 $A$ 的枢纽和所有 $y$ 坐标小于 $B$ 的枢纽。枢纽被破坏后，经其转发的通信将无法进行。\n\n### 任务\n\n给定村庄及各系统的信息，同时给出 $Q$ 个查询。每个查询 $q$ 由一个整数 $A_q$ 表示，意味着所有 $y$ 坐标大于 $A_q$ 的枢纽将被破坏。对于每个查询，求一个整数 $B_q$（$B_q \\leq 0$），使得即使破坏所有 $y$ 坐标大于 $A_q$ 的枢纽和所有 $y$ 坐标小于 $B_q$ 的枢纽，所有村庄之间仍能保持通信，且 $B_q$ 是满足条件的最大值。\n", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含四个以空格分隔的整数 $N, M_1, M_2, Q$。\n- 接下来的 $M_1 + (N + M_1 - 1)$ 行描述系统 $1$ 的信息：\n  - 前 $M_1$ 行中，第 $i$ 行（$1 \\leq i \\leq M_1$）包含两个整数 $X_{1i}, Y_{1i}$。\n  - 后续 $N + M_1 - 1$ 行中，第 $i$ 行（$1 \\leq i \\leq N + M_1 - 1$）包含三个整数 $T_{1i}, C_{1i}, D_{1i}$（$T_{1i} = 1, 2$）：\n    - 若 $T_{1i} = 1$，则线路 $i$ 连接村庄 $C_{1i}$ 与枢纽 $D_{1i}$（$1 \\leq C_{1i} \\leq N$，$1 \\leq D_{1i} \\leq M_1$）。\n    - 若 $T_{1i} = 2$，则线路 $i$ 连接枢纽 $C_{1i}$ 与枢纽 $D_{1i}$（$1 \\leq C_{1i}, D_{1i} \\leq M_1$，且 $C_{1i} \\neq D_{1i}$）。\n- 接下来的 $M_2 + (N + M_2 - 1)$ 行描述系统 $2$ 的信息：\n  - 前 $M_2$ 行中，第 $i$ 行（$1 \\leq i \\leq M_2$）包含两个整数 $X_{2i}, Y_{2i}$。\n  - 后续 $N + M_2 - 1$ 行中，第 $i$ 行（$1 \\leq i \\leq N + M_2 - 1$）包含三个整数 $T_{2i}, C_{2i}, D_{2i}$（$T_{2i} = 1, 2$）：\n    - 若 $T_{2i} = 1$，则线路 $i$ 连接村庄 $C_{2i}$ 与枢纽 $D_{2i}$（$1 \\leq C_{2i} \\leq N$，$1 \\leq D_{2i} \\leq M_2$）。\n    - 若 $T_{2i} = 2$，则线路 $i$ 连接枢纽 $C_{2i}$ 与枢纽 $D_{2i}$（$1 \\leq C_{2i}, D_{2i} \\leq M_2$，且 $C_{2i} \\neq D_{2i}$）。\n- 接下来的 $Q$ 行中，第 $i$ 行（$1 \\leq i \\leq Q$）包含一个整数 $A_i$。", "outputFormat": "向标准输出输出 $Q$ 行。第 $i$ 行（$1 \\leq i \\leq Q$）输出一个整数 $B_i$，表示对查询 $i$ 的答案。若答案为 $0$，不得输出 $-0$。", "hint": "### 限制\n\n所有输入数据满足以下条件：\n\n- $1 \\leq N, M_1, M_2 \\leq 100\\,000$\n- $-1\\,000\\,000\\,000 \\leq X_{1i} \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq M_1$)\n- $-1\\,000\\,000\\,000 \\leq X_{2i} \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq M_2$)\n- $1 \\leq Y_{1i} \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq M_1$)\n- $-1\\,000\\,000\\,000 \\leq Y_{2i} \\leq -1$ ($1 \\leq i \\leq M_2$)\n- $X_{1i} \\neq X_{1j}$ 或 $Y_{1i} \\neq Y_{1j}$ ($1 \\leq i,j \\leq M_1$ 且 $i \\neq j$)\n- $X_{2i} \\neq X_{2j}$ 或 $Y_{2i} \\neq Y_{2j}$ ($1 \\leq i,j \\leq M_2$ 且 $i \\neq j$)\n- $1 \\leq Q \\leq 100\\,000$\n- $0 \\leq A_i \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq Q$)\n- 任意两条线路除端点外没有其他公共点\n- 仅考虑系统 $1$ 的线路或仅考虑系统 $2$ 的线路时，任意两个村庄及枢纽均可以通信\n\n### 子任务\n\n#### 子任务 1 [20 分]\n\n满足以下条件：\n\n- $N, M_1, M_2 \\leq 1\\,000$\n- $Q \\leq 1\\,000$\n\n#### 子任务 2 [80 分]\n\n无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2013] 通信阻塞 / Communication Jamming", "background": "", "description": "JOI 国位于平面上。国内有 $N$ 个村庄，村庄编号为 $1$ 到 $N$。村庄 $i$ 被视为位于坐标 $(i,0)$ 的点。目前，JOI 国计划建设连接村庄的通信线路。为应对故障，计划建设两套系统，分别称为 **系统 1** 和 **系统 2**。\n\n系统 $k$ 包含 $M_k$ 个枢纽和 $N + M_k - 1$ 条线路。系统 $k$ 的枢纽编号为 $1$ 到 $M_k$，枢纽 $j$ 被视为位于坐标 $(X_{kj}, Y_{kj})$ 的点。系统 $k$ 的每条线路连接村庄与系统 $k$ 的枢纽，或连接系统 $k$ 的枢纽之间。每条线路被视为连接两端的线段。保证任意两条线路除端点外没有其他公共点。系统 $1$ 的枢纽 $j$ 的 $y$ 坐标 $Y_{1j}$ 大于 $0$；系统 $2$ 的枢纽 $j$ 的 $y$ 坐标 $Y_{2j}$ 小于 $0$。\n\n若两个地点能通过线路间接连接，则称它们可以通信。即，若能通过沿线路反复移动从一个地点到达另一个地点，则这两个地点可以通信。仅考虑系统 $1$ 的线路或仅考虑系统 $2$ 的线路时，任意两个村庄及枢纽均可以通信。\n\n下图是通信线路的示例。灰色圆点表示系统 $1$ 的枢纽，黑色圆点表示系统 $2$ 的枢纽，白色圆点表示村庄。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/xwbor34c.png)\n\n左图对应样例 1，右图对应样例 2\n:::\n\n在计划讨论中，需研究在外部攻击下通信的可持续性。外部攻击由两个数 $A$, $B$（$A \\geq 0$, $B \\leq 0$）描述，假设其会破坏所有 $y$ 坐标大于 $A$ 的枢纽和所有 $y$ 坐标小于 $B$ 的枢纽。枢纽被破坏后，经其转发的通信将无法进行。\n\n### 任务\n\n给定村庄及各系统的信息，同时给出 $Q$ 个查询。每个查询 $q$ 由一个整数 $A_q$ 表示，意味着所有 $y$ 坐标大于 $A_q$ 的枢纽将被破坏。对于每个查询，求一个整数 $B_q$（$B_q \\leq 0$），使得即使破坏所有 $y$ 坐标大于 $A_q$ 的枢纽和所有 $y$ 坐标小于 $B_q$ 的枢纽，所有村庄之间仍能保持通信，且 $B_q$ 是满足条件的最大值。\n", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含四个以空格分隔的整数 $N, M_1, M_2, Q$。\n- 接下来的 $M_1 + (N + M_1 - 1)$ 行描述系统 $1$ 的信息：\n  - 前 $M_1$ 行中，第 $i$ 行（$1 \\leq i \\leq M_1$）包含两个整数 $X_{1i}, Y_{1i}$。\n  - 后续 $N + M_1 - 1$ 行中，第 $i$ 行（$1 \\leq i \\leq N + M_1 - 1$）包含三个整数 $T_{1i}, C_{1i}, D_{1i}$（$T_{1i} = 1, 2$）：\n    - 若 $T_{1i} = 1$，则线路 $i$ 连接村庄 $C_{1i}$ 与枢纽 $D_{1i}$（$1 \\leq C_{1i} \\leq N$，$1 \\leq D_{1i} \\leq M_1$）。\n    - 若 $T_{1i} = 2$，则线路 $i$ 连接枢纽 $C_{1i}$ 与枢纽 $D_{1i}$（$1 \\leq C_{1i}, D_{1i} \\leq M_1$，且 $C_{1i} \\neq D_{1i}$）。\n- 接下来的 $M_2 + (N + M_2 - 1)$ 行描述系统 $2$ 的信息：\n  - 前 $M_2$ 行中，第 $i$ 行（$1 \\leq i \\leq M_2$）包含两个整数 $X_{2i}, Y_{2i}$。\n  - 后续 $N + M_2 - 1$ 行中，第 $i$ 行（$1 \\leq i \\leq N + M_2 - 1$）包含三个整数 $T_{2i}, C_{2i}, D_{2i}$（$T_{2i} = 1, 2$）：\n    - 若 $T_{2i} = 1$，则线路 $i$ 连接村庄 $C_{2i}$ 与枢纽 $D_{2i}$（$1 \\leq C_{2i} \\leq N$，$1 \\leq D_{2i} \\leq M_2$）。\n    - 若 $T_{2i} = 2$，则线路 $i$ 连接枢纽 $C_{2i}$ 与枢纽 $D_{2i}$（$1 \\leq C_{2i}, D_{2i} \\leq M_2$，且 $C_{2i} \\neq D_{2i}$）。\n- 接下来的 $Q$ 行中，第 $i$ 行（$1 \\leq i \\leq Q$）包含一个整数 $A_i$。", "outputFormat": "向标准输出输出 $Q$ 行。第 $i$ 行（$1 \\leq i \\leq Q$）输出一个整数 $B_i$，表示对查询 $i$ 的答案。若答案为 $0$，不得输出 $-0$。", "hint": "### 限制\n\n所有输入数据满足以下条件：\n\n- $1 \\leq N, M_1, M_2 \\leq 100\\,000$\n- $-1\\,000\\,000\\,000 \\leq X_{1i} \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq M_1$)\n- $-1\\,000\\,000\\,000 \\leq X_{2i} \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq M_2$)\n- $1 \\leq Y_{1i} \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq M_1$)\n- $-1\\,000\\,000\\,000 \\leq Y_{2i} \\leq -1$ ($1 \\leq i \\leq M_2$)\n- $X_{1i} \\neq X_{1j}$ 或 $Y_{1i} \\neq Y_{1j}$ ($1 \\leq i,j \\leq M_1$ 且 $i \\neq j$)\n- $X_{2i} \\neq X_{2j}$ 或 $Y_{2i} \\neq Y_{2j}$ ($1 \\leq i,j \\leq M_2$ 且 $i \\neq j$)\n- $1 \\leq Q \\leq 100\\,000$\n- $0 \\leq A_i \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq Q$)\n- 任意两条线路除端点外没有其他公共点\n- 仅考虑系统 $1$ 的线路或仅考虑系统 $2$ 的线路时，任意两个村庄及枢纽均可以通信\n\n### 子任务\n\n#### 子任务 1 [20 分]\n\n满足以下条件：\n\n- $N, M_1, M_2 \\leq 1\\,000$\n- $Q \\leq 1\\,000$\n\n#### 子任务 2 [80 分]\n\n无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14433", "type": "P", "difficulty": 3, "samples": [["7 20 15\n9 5\n13 9\n15 13\n7 4\n6 8\n14 7\n16 7", "3"], ["15 20 30\n11 8\n14 25\n3 20\n1 27\n2 16\n12 8\n0 4\n3 10\n12 11\n5 9\n16 3\n2 13\n4 24\n18 3\n12 28", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "JOISC/JOIST（日本）"], "title": "[JOISC 2013] JOI 海报 / JOI Poster", "background": "", "description": "K 理事长正在设计三张为国际信息学奥林匹克日本代表队助威的海报。每张海报计划分别融入一个字母 J、O、I。在迅速完成了字母 J 和字母 I 的海报后，K 理事长打算以澳大利亚的星空为背景来设计剩下的字母 O 海报。\n\n海报是一个宽度为 $W$、高度为 $H$ 的矩形，左下角坐标为 $(0, 0)$，右上角坐标为 $(W, H)$。海报上印有 $N$ 颗星星。第 $i$ 颗星 $S_i$（$1 \\leq i \\leq N$）在海报上的坐标为 $(X_i, Y_i)$，且任意两颗星不在同一坐标。\n\nK 理事长在构思字母 O 的设计时，产生了如下想法：从 $N$ 颗星中选出四颗不同的星，分别记为 $A, B, C, D$。以 $A$ 为圆心、$B$ 为圆上一点作圆 $O_1$，以 $C$ 为圆心、$D$ 为圆上一点作圆 $O_2$。当两个圆 $O_1, O_2$ 同时满足以下两个条件时，这四颗星 $A, B, C, D$ 构成 K 理事长设计方案的候选：\n\n- 圆 $O_1$ 将圆 $O_2$ 完全包含于其内部。即，圆 $O_2$ 的内部或圆周上的任意点均位于圆 $O_1$ 的内部（不包括圆周）。\n- 两个圆均不超出海报的矩形区域。即，对于圆内或圆周上的任意点 $(X, Y)$，均满足 $0 \\leq X \\leq W$ 且 $0 \\leq Y \\leq H$。\n\nK 理事长设计方案的候选共有多少种不同的四颗星 $A, B, C, D$ 的选择方式呢？\n\n### 任务\n\n给定海报的尺寸和星星的信息，编写程序计算构成 K 理事长设计候选的四颗星 $A, B, C, D$ 的选择方案数。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含三个以空格分隔的整数 $N, W, H$，分别表示海报上星星的数量、海报的宽度和高度。\n- 后续 $N$ 行中，第 $i$ 行（$1 \\leq i \\leq N$）包含两个以空格分隔的整数 $X_i, Y_i$（$0 \\leq X_i \\leq W$，$0 \\leq Y_i \\leq H$），表示星星 $S_i$ 在海报上的坐标。", "outputFormat": "向标准输出输出一行，包含一个整数，表示构成 K 理事长设计候选的四颗星 $A, B, C, D$ 的选择方案数。", "hint": "### 限制\n\n所有输入数据满足以下条件：\n\n- $4 \\leq N \\leq 50$\n- $1 \\leq W \\leq 1000$\n- $1 \\leq H \\leq 1000$\n- $0 \\leq X_i \\leq W$\n- $0 \\leq Y_i \\leq H$\n- 任意两颗星不在同一坐标\n\n### 子任务\n\n#### 子任务 1 [80 分]\n\n- 无论如何选择四颗星 $A, B, C, D$，圆 $O_1$ 与圆 $O_2$ 均不相切\n\n#### 子任务 2 [20 分]\n\n无额外限制\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2013] JOI 海报 / JOI Poster", "background": "", "description": "K 理事长正在设计三张为国际信息学奥林匹克日本代表队助威的海报。每张海报计划分别融入一个字母 J、O、I。在迅速完成了字母 J 和字母 I 的海报后，K 理事长打算以澳大利亚的星空为背景来设计剩下的字母 O 海报。\n\n海报是一个宽度为 $W$、高度为 $H$ 的矩形，左下角坐标为 $(0, 0)$，右上角坐标为 $(W, H)$。海报上印有 $N$ 颗星星。第 $i$ 颗星 $S_i$（$1 \\leq i \\leq N$）在海报上的坐标为 $(X_i, Y_i)$，且任意两颗星不在同一坐标。\n\nK 理事长在构思字母 O 的设计时，产生了如下想法：从 $N$ 颗星中选出四颗不同的星，分别记为 $A, B, C, D$。以 $A$ 为圆心、$B$ 为圆上一点作圆 $O_1$，以 $C$ 为圆心、$D$ 为圆上一点作圆 $O_2$。当两个圆 $O_1, O_2$ 同时满足以下两个条件时，这四颗星 $A, B, C, D$ 构成 K 理事长设计方案的候选：\n\n- 圆 $O_1$ 将圆 $O_2$ 完全包含于其内部。即，圆 $O_2$ 的内部或圆周上的任意点均位于圆 $O_1$ 的内部（不包括圆周）。\n- 两个圆均不超出海报的矩形区域。即，对于圆内或圆周上的任意点 $(X, Y)$，均满足 $0 \\leq X \\leq W$ 且 $0 \\leq Y \\leq H$。\n\nK 理事长设计方案的候选共有多少种不同的四颗星 $A, B, C, D$ 的选择方式呢？\n\n### 任务\n\n给定海报的尺寸和星星的信息，编写程序计算构成 K 理事长设计候选的四颗星 $A, B, C, D$ 的选择方案数。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含三个以空格分隔的整数 $N, W, H$，分别表示海报上星星的数量、海报的宽度和高度。\n- 后续 $N$ 行中，第 $i$ 行（$1 \\leq i \\leq N$）包含两个以空格分隔的整数 $X_i, Y_i$（$0 \\leq X_i \\leq W$，$0 \\leq Y_i \\leq H$），表示星星 $S_i$ 在海报上的坐标。", "outputFormat": "向标准输出输出一行，包含一个整数，表示构成 K 理事长设计候选的四颗星 $A, B, C, D$ 的选择方案数。", "hint": "### 限制\n\n所有输入数据满足以下条件：\n\n- $4 \\leq N \\leq 50$\n- $1 \\leq W \\leq 1000$\n- $1 \\leq H \\leq 1000$\n- $0 \\leq X_i \\leq W$\n- $0 \\leq Y_i \\leq H$\n- 任意两颗星不在同一坐标\n\n### 子任务\n\n#### 子任务 1 [80 分]\n\n- 无论如何选择四颗星 $A, B, C, D$，圆 $O_1$ 与圆 $O_2$ 均不相切\n\n#### 子任务 2 [20 分]\n\n无额外限制\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14434", "type": "P", "difficulty": 6, "samples": [["4 2 3\n1 1\n10 1\n1 10\n10 10\n4 0 8 9\n1 4 9 8\n7 4\n10 3\n1 1", "28\n38\n-1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "JOISC/JOIST（日本）"], "title": "[JOISC 2013] 建设项目 / Construction Project", "background": "", "description": "IOI 国决定对交通网络进行全面改造。IOI 国可表示为 $xy$ 坐标平面，其上有 $N$ 个城镇。第 $i$ 个（$1 \\leq i \\leq N$）城镇表示为点 $(X_i, Y_i)$。交通网改造按以下步骤进行：\n\n- 在 $N$ 个城镇中选择若干城镇建设国际机场。至少需建设一个国际机场。每建设一个国际机场需花费固定成本。\n- 铺设若干条连接城镇的道路。道路是连接代表城镇的点、且与 $x$ 轴或 $y$ 轴平行的线段。每铺设一条道路，其成本等于该道路的长度。\n\n此时，必须满足以下条件：\n\n- IOI 国存在 $M$ 个因地质条件恶劣等原因无法铺设道路的区域。每个区域用一个矩形表示，第 $j$ 个（$1 \\leq j \\leq M$）矩形的左下角点为 $(P_j, Q_j)$，右上角点为 $(R_j, S_j)$（即 $P_j < R_j$ 且 $Q_j < S_j$）。任何道路不得与 $M$ 个区域中的任何一个有重叠部分。区域包含其边界，因此道路也不得与表示区域的矩形边界有重叠。\n- 从 $N$ 个城镇中的任意一个出发，必须能通过反复沿道路前往其他城镇，最终到达建有国际机场的城镇。\n\n该项目的承包方候选为 $C$ 家建筑公司。第 $k$ 家（$1 \\leq k \\leq C$）建筑公司建设一个国际机场的成本为 $B_k$，且最多能建设 $H_k$ 个国际机场（道路建设成本与建筑公司无关，且道路的数量和长度无限制）。对于每家建筑公司，希望求出该公司在满足上述条件下进行交通网改造所需总成本的最小值。\n\n由于可建设的国际机场数量有限，可能存在某些建筑公司无法以任何方式满足条件。此时不应报告总成本，而应报告无法满足条件。\n\n### 任务\n\n给定表示 IOI 国城镇数量的整数 $N$ 及各城镇坐标、表示无法铺设道路区域数量的整数 $M$ 及各区域坐标、表示承包方候选建筑公司数量的整数 $C$ 及各公司信息，编写程序对每家建筑公司，计算在满足题目所述条件下进行交通网改造所需总成本的最小值。", "inputFormat": "从标准输入读取以下输入数据：\n- 第 $1$ 行包含三个以空格分隔的整数 $N, M, C$，分别表示 IOI 国中的城镇数量、无法铺设道路的区域数量、项目承包方候选建筑公司数量。\n- 后续 $N$ 行中，第 $i$ 行（$1 \\leq i \\leq N$）包含两个以空格分隔的整数 $X_i, Y_i$，表示第 $i$ 个城镇的坐标为 $(X_i, Y_i)$。\n- 后续 $M$ 行中，第 $j$ 行（$1 \\leq j \\leq M$）包含四个以空格分隔的整数 $P_j, Q_j, R_j, S_j$，表示第 $j$ 个无法铺设道路的区域所对应矩形的左下角点坐标为 $(P_j, Q_j)$，右上角点坐标为 $(R_j, S_j)$。\n- 后续 $C$ 行中，第 $k$ 行（$1 \\leq k \\leq C$）包含两个以空格分隔的整数 $B_k, H_k$，表示第 $k$ 个承包方候选建筑公司建设一个国际机场的成本为 $B_k$，且最多能建设 $H_k$ 个国际机场。\n", "outputFormat": "向标准输出输出 $C$ 行。第 $k$ 行（$1 \\leq k \\leq C$）输出一个整数，表示第 $k$ 个承包方候选建筑公司实施该项目所需总成本的最小值。若第 $k$ 个承包方候选建筑公司无法以任何方式满足条件，则输出整数 $-1$。\n", "hint": "### 样例 1 解释\n\n该输入示例的图示如下。粗线矩形表示无法铺设道路的区域。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/liwharx4.png)\n:::\n\n虽然可以铺设连接城镇 $2$ 与城镇 $4$、以及城镇 $3$ 与城镇 $4$ 的道路，但由于会与无法铺设道路的区域相交，因此无法在城镇 $1$ 与城镇 $2$ 之间铺设道路。同理，城镇 $1$ 与城镇 $3$ 之间也无法铺设道路（请注意道路不得与矩形边界有任何重叠部分）。\n\n第一家建筑公司最多可建设 $4$ 个国际机场，每个成本为 $7$。此时，最优方案是不铺设任何道路而在所有城镇建设国际机场，总成本为 $7 \\times 4 = 28$。\n\n第二家建筑公司最多可建设 $3$ 个国际机场，每个成本为 $10$。此时，最优方案之一是铺设连接城镇 $2$ 与城镇 $4$、以及城镇 $3$ 与城镇 $4$ 的长度为 $9$ 的道路，并在城镇 $1$ 与城镇 $2$ 建设国际机场，总成本为 $10 \\times 2 + 9 + 9 = 38$。\n\n第三家建筑公司最多可建设 $1$ 个国际机场，每个成本为 $1$。但由于城镇 $1$ 无法与任何其他城镇之间铺设道路，为满足题目条件至少需要建设 $2$ 个国际机场，因此该公司无法完成项目，应输出 $-1$。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $1 \\leq N \\leq 200\\,000$\n- $1 \\leq M \\leq 200\\,000$\n- $1 \\leq C \\leq 500\\,000$\n- $0 \\leq X_i \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq N$)\n- $0 \\leq Y_i \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq N$)\n- 同一坐标不存在两个及以上城镇\n- $0 \\leq P_j < R_j \\leq 1\\,000\\,000\\,000$ ($1 \\leq j \\leq M$)\n- $0 \\leq Q_j < S_j \\leq 1\\,000\\,000\\,000$ ($1 \\leq j \\leq M$)\n- 任何区域均不包含城镇于其矩形内部或边界上\n- $1 \\leq B_k \\leq 1\\,000\\,000\\,000$ ($1 \\leq k \\leq C$)\n- $1 \\leq H_k \\leq N$ ($1 \\leq k \\leq C$)\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n满足以下条件：\n\n- $M \\leq 100$\n- $C \\leq 100$\n\n#### 子任务 2 [30 分]\n\n满足以下条件：\n\n- $C \\leq 100$\n\n#### 子任务 3 [30 分]\n\n满足以下条件：\n\n- $M \\leq 100$\n\n#### 子任务 4 [30 分]\n\n无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2013] 建设项目 / Construction Project", "background": "", "description": "IOI 国决定对交通网络进行全面改造。IOI 国可表示为 $xy$ 坐标平面，其上有 $N$ 个城镇。第 $i$ 个（$1 \\leq i \\leq N$）城镇表示为点 $(X_i, Y_i)$。交通网改造按以下步骤进行：\n\n- 在 $N$ 个城镇中选择若干城镇建设国际机场。至少需建设一个国际机场。每建设一个国际机场需花费固定成本。\n- 铺设若干条连接城镇的道路。道路是连接代表城镇的点、且与 $x$ 轴或 $y$ 轴平行的线段。每铺设一条道路，其成本等于该道路的长度。\n\n此时，必须满足以下条件：\n\n- IOI 国存在 $M$ 个因地质条件恶劣等原因无法铺设道路的区域。每个区域用一个矩形表示，第 $j$ 个（$1 \\leq j \\leq M$）矩形的左下角点为 $(P_j, Q_j)$，右上角点为 $(R_j, S_j)$（即 $P_j < R_j$ 且 $Q_j < S_j$）。任何道路不得与 $M$ 个区域中的任何一个有重叠部分。区域包含其边界，因此道路也不得与表示区域的矩形边界有重叠。\n- 从 $N$ 个城镇中的任意一个出发，必须能通过反复沿道路前往其他城镇，最终到达建有国际机场的城镇。\n\n该项目的承包方候选为 $C$ 家建筑公司。第 $k$ 家（$1 \\leq k \\leq C$）建筑公司建设一个国际机场的成本为 $B_k$，且最多能建设 $H_k$ 个国际机场（道路建设成本与建筑公司无关，且道路的数量和长度无限制）。对于每家建筑公司，希望求出该公司在满足上述条件下进行交通网改造所需总成本的最小值。\n\n由于可建设的国际机场数量有限，可能存在某些建筑公司无法以任何方式满足条件。此时不应报告总成本，而应报告无法满足条件。\n\n### 任务\n\n给定表示 IOI 国城镇数量的整数 $N$ 及各城镇坐标、表示无法铺设道路区域数量的整数 $M$ 及各区域坐标、表示承包方候选建筑公司数量的整数 $C$ 及各公司信息，编写程序对每家建筑公司，计算在满足题目所述条件下进行交通网改造所需总成本的最小值。", "inputFormat": "从标准输入读取以下输入数据：\n- 第 $1$ 行包含三个以空格分隔的整数 $N, M, C$，分别表示 IOI 国中的城镇数量、无法铺设道路的区域数量、项目承包方候选建筑公司数量。\n- 后续 $N$ 行中，第 $i$ 行（$1 \\leq i \\leq N$）包含两个以空格分隔的整数 $X_i, Y_i$，表示第 $i$ 个城镇的坐标为 $(X_i, Y_i)$。\n- 后续 $M$ 行中，第 $j$ 行（$1 \\leq j \\leq M$）包含四个以空格分隔的整数 $P_j, Q_j, R_j, S_j$，表示第 $j$ 个无法铺设道路的区域所对应矩形的左下角点坐标为 $(P_j, Q_j)$，右上角点坐标为 $(R_j, S_j)$。\n- 后续 $C$ 行中，第 $k$ 行（$1 \\leq k \\leq C$）包含两个以空格分隔的整数 $B_k, H_k$，表示第 $k$ 个承包方候选建筑公司建设一个国际机场的成本为 $B_k$，且最多能建设 $H_k$ 个国际机场。\n", "outputFormat": "向标准输出输出 $C$ 行。第 $k$ 行（$1 \\leq k \\leq C$）输出一个整数，表示第 $k$ 个承包方候选建筑公司实施该项目所需总成本的最小值。若第 $k$ 个承包方候选建筑公司无法以任何方式满足条件，则输出整数 $-1$。\n", "hint": "### 样例 1 解释\n\n该输入示例的图示如下。粗线矩形表示无法铺设道路的区域。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/liwharx4.png)\n:::\n\n虽然可以铺设连接城镇 $2$ 与城镇 $4$、以及城镇 $3$ 与城镇 $4$ 的道路，但由于会与无法铺设道路的区域相交，因此无法在城镇 $1$ 与城镇 $2$ 之间铺设道路。同理，城镇 $1$ 与城镇 $3$ 之间也无法铺设道路（请注意道路不得与矩形边界有任何重叠部分）。\n\n第一家建筑公司最多可建设 $4$ 个国际机场，每个成本为 $7$。此时，最优方案是不铺设任何道路而在所有城镇建设国际机场，总成本为 $7 \\times 4 = 28$。\n\n第二家建筑公司最多可建设 $3$ 个国际机场，每个成本为 $10$。此时，最优方案之一是铺设连接城镇 $2$ 与城镇 $4$、以及城镇 $3$ 与城镇 $4$ 的长度为 $9$ 的道路，并在城镇 $1$ 与城镇 $2$ 建设国际机场，总成本为 $10 \\times 2 + 9 + 9 = 38$。\n\n第三家建筑公司最多可建设 $1$ 个国际机场，每个成本为 $1$。但由于城镇 $1$ 无法与任何其他城镇之间铺设道路，为满足题目条件至少需要建设 $2$ 个国际机场，因此该公司无法完成项目，应输出 $-1$。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $1 \\leq N \\leq 200\\,000$\n- $1 \\leq M \\leq 200\\,000$\n- $1 \\leq C \\leq 500\\,000$\n- $0 \\leq X_i \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq N$)\n- $0 \\leq Y_i \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq N$)\n- 同一坐标不存在两个及以上城镇\n- $0 \\leq P_j < R_j \\leq 1\\,000\\,000\\,000$ ($1 \\leq j \\leq M$)\n- $0 \\leq Q_j < S_j \\leq 1\\,000\\,000\\,000$ ($1 \\leq j \\leq M$)\n- 任何区域均不包含城镇于其矩形内部或边界上\n- $1 \\leq B_k \\leq 1\\,000\\,000\\,000$ ($1 \\leq k \\leq C$)\n- $1 \\leq H_k \\leq N$ ($1 \\leq k \\leq C$)\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n满足以下条件：\n\n- $M \\leq 100$\n- $C \\leq 100$\n\n#### 子任务 2 [30 分]\n\n满足以下条件：\n\n- $C \\leq 100$\n\n#### 子任务 3 [30 分]\n\n满足以下条件：\n\n- $M \\leq 100$\n\n#### 子任务 4 [30 分]\n\n无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14435", "type": "P", "difficulty": 5, "samples": [["2 3\n2\n1 2\n2 2", "8"], ["3 3\n2\n1 1\n3 3", "5040"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "JOISC/JOIST（日本）"], "title": "[JOISC 2013] 收拾吉祥物 / Mascots", "background": "", "description": "JOI 酱正在和朋友玩吉祥物。快乐的时光转瞬即逝，朋友离开后，现在到了收拾整理的时间。\n\nJOI 酱拥有 $R \\times C$ 个吉祥物，收拾时使用一个由 $R$ 行 $C$ 列方格组成的长方形区域。每个方格放置一个吉祥物。从上数第 $A$ 行、从左数第 $B$ 列的方格记作 $(A, B)$。整理开始时，已有 $N$ 个方格放置了吉祥物。开始整理时，至少存在一个未放置吉祥物的方格。\n\nJOI 酱逐个放置吉祥物进行整理。当新放置一个吉祥物后，所有有吉祥物的方格恰好构成一个完整的长方形时（排除初始状态已有吉祥物的方格本身就构成一个长方形的情况），JOI 酱会感到 **小确幸**。所谓所有有吉祥物的方格构成一个完整的长方形，是指存在四个整数 $r_1, r_2, c_1, c_2$（$1 \\leq r_1 \\leq r_2 \\leq R$ 且 $1 \\leq c_1 \\leq c_2 \\leq C$），使得对于所有满足 $r_1 \\leq i \\leq r_2$ 且 $c_1 \\leq j \\leq c_2$ 的方格 $(i, j)$ 上都有吉祥物，并且其他任何方格上都没有吉祥物。感到 **小确幸** 的次数越多，JOI 酱今晚就能睡得越香甜。\n\n放置吉祥物时，不区分所放吉祥物的种类。请问，使得 **小确幸** 次数最大的放置方式共有多少种？\n\n### 任务\n\n给定收拾吉祥物的区域信息以及初始已放置吉祥物的信息，编写程序计算使得 **小确幸** 次数最大的放置方式的数量，并对 $1\\,000\\,000\\,007$ 取模后的结果。\n", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含两个以空格分隔的整数 $R, C$。$R$ 表示放置吉祥物区域的行数，$C$ 表示列数。\n- 第 $2$ 行包含一个整数 $N$。$N$ 表示整理开始时已放置吉祥物的数量。\n- 后续 $N$ 行描述初始已放置吉祥物的信息。第 $i$ 行包含两个以空格分隔的整数 $A_i, B_i$，表示方格 $(A_i, B_i)$ 在初始时已放置吉祥物。这些数对互不重复。", "outputFormat": "向标准输出输出可能的放置方式的数量对 $1\\,000\\,000\\,007$ 取模后的结果。", "hint": "### 样例 1 解释\n\n初始状态下，$6$ 个方格的状态如下（△ 表示初始时已放置吉祥物的方格）：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/xhiyq49k.png)\n:::\n\n在 $6$ 个方格中，$(1, 2)$ 和 $(2, 2)$ 已放置吉祥物。**小确幸** 次数的最大值为 $2$。\n\n使得 **小确幸** 次数达到 $2$ 次的放置方式有以下 $8$ 种（数字表示新放置吉祥物的顺序）：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/l5hetevm.png)\n:::\n\n在所有这些 $8$ 个示例中，放置第 $2$ 个吉祥物后有吉祥物的方格构成一个 $2 \\times 2$ 的长方形，放置第 $4$ 个吉祥物后有吉祥物的方格构成一个 $2 \\times 3$ 的长方形，整个过程 JOI 酱总共感到 $2$ 次 **一点幸福**。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $2 \\leq R \\leq 3\\,000$\n- $2 \\leq C \\leq 3\\,000$\n- $1 \\leq N \\leq 100\\,000$\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n满足以下条件：\n\n- $R \\leq 3$\n- $C \\leq 3$\n\n#### 子任务 2 [30 分]\n\n满足以下条件：\n\n- $R \\leq 50$\n- $C \\leq 50$\n\n#### 子任务 3 [60 分]\n\n无额外限制。\n\n翻译由 DeepSeek V3 完成\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2013] 收拾吉祥物 / Mascots", "background": "", "description": "JOI 酱正在和朋友玩吉祥物。快乐的时光转瞬即逝，朋友离开后，现在到了收拾整理的时间。\n\nJOI 酱拥有 $R \\times C$ 个吉祥物，收拾时使用一个由 $R$ 行 $C$ 列方格组成的长方形区域。每个方格放置一个吉祥物。从上数第 $A$ 行、从左数第 $B$ 列的方格记作 $(A, B)$。整理开始时，已有 $N$ 个方格放置了吉祥物。开始整理时，至少存在一个未放置吉祥物的方格。\n\nJOI 酱逐个放置吉祥物进行整理。当新放置一个吉祥物后，所有有吉祥物的方格恰好构成一个完整的长方形时（排除初始状态已有吉祥物的方格本身就构成一个长方形的情况），JOI 酱会感到 **小确幸**。所谓所有有吉祥物的方格构成一个完整的长方形，是指存在四个整数 $r_1, r_2, c_1, c_2$（$1 \\leq r_1 \\leq r_2 \\leq R$ 且 $1 \\leq c_1 \\leq c_2 \\leq C$），使得对于所有满足 $r_1 \\leq i \\leq r_2$ 且 $c_1 \\leq j \\leq c_2$ 的方格 $(i, j)$ 上都有吉祥物，并且其他任何方格上都没有吉祥物。感到 **小确幸** 的次数越多，JOI 酱今晚就能睡得越香甜。\n\n放置吉祥物时，不区分所放吉祥物的种类。请问，使得 **小确幸** 次数最大的放置方式共有多少种？\n\n### 任务\n\n给定收拾吉祥物的区域信息以及初始已放置吉祥物的信息，编写程序计算使得 **小确幸** 次数最大的放置方式的数量，并对 $1\\,000\\,000\\,007$ 取模后的结果。\n", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含两个以空格分隔的整数 $R, C$。$R$ 表示放置吉祥物区域的行数，$C$ 表示列数。\n- 第 $2$ 行包含一个整数 $N$。$N$ 表示整理开始时已放置吉祥物的数量。\n- 后续 $N$ 行描述初始已放置吉祥物的信息。第 $i$ 行包含两个以空格分隔的整数 $A_i, B_i$，表示方格 $(A_i, B_i)$ 在初始时已放置吉祥物。这些数对互不重复。", "outputFormat": "向标准输出输出可能的放置方式的数量对 $1\\,000\\,000\\,007$ 取模后的结果。", "hint": "### 样例 1 解释\n\n初始状态下，$6$ 个方格的状态如下（△ 表示初始时已放置吉祥物的方格）：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/xhiyq49k.png)\n:::\n\n在 $6$ 个方格中，$(1, 2)$ 和 $(2, 2)$ 已放置吉祥物。**小确幸** 次数的最大值为 $2$。\n\n使得 **小确幸** 次数达到 $2$ 次的放置方式有以下 $8$ 种（数字表示新放置吉祥物的顺序）：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/l5hetevm.png)\n:::\n\n在所有这些 $8$ 个示例中，放置第 $2$ 个吉祥物后有吉祥物的方格构成一个 $2 \\times 2$ 的长方形，放置第 $4$ 个吉祥物后有吉祥物的方格构成一个 $2 \\times 3$ 的长方形，整个过程 JOI 酱总共感到 $2$ 次 **一点幸福**。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $2 \\leq R \\leq 3\\,000$\n- $2 \\leq C \\leq 3\\,000$\n- $1 \\leq N \\leq 100\\,000$\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n满足以下条件：\n\n- $R \\leq 3$\n- $C \\leq 3$\n\n#### 子任务 2 [30 分]\n\n满足以下条件：\n\n- $R \\leq 50$\n- $C \\leq 50$\n\n#### 子任务 3 [60 分]\n\n无额外限制。\n\n翻译由 DeepSeek V3 完成\n", "locale": "zh-CN"}}}
{"pid": "P14436", "type": "P", "difficulty": 4, "samples": [["3 4\n0 2\n1 0\n2 2\n1 1\n2 1\n2 3\n3 2", "1\n0\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "2013", "树状数组", "深度优先搜索 DFS", "扫描线", "bitset", "JOISC/JOIST（日本）"], "title": "[JOISC 2013] 间谍 / Spy", "background": "", "description": "你知道 Just Odd Inventions 公司吗？这家公司的业务是进行 \"仅仅只是奇特的发明\" (just odd inventions)。这里我们简称其为 JOI 社。\n\n那么，你知道 Incredibly Odd Inventions 公司吗？这家公司的业务是进行 \"极其奇特的发明\" (incredibly odd inventions)。这里我们简称其为 IOI 社。\n\nJOI 社和 IOI 社各有 $N$ 名员工。JOI 社的员工命名为 $j_1, j_2, \\cdots, j_N$，IOI 社的员工命名为 $i_1, i_2, \\cdots, i_N$。此外，JOI 社员工中有一人是 JOI 社的社长，IOI 社员工中有一人是 IOI 社的社长。除社长外，每位员工在各自公司内都有且仅有一名直接上司。\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5inw1qbj.png)\n\n图 1: JOI 社与 IOI 社的组织结构示例。从代表员工的圆圈出发的箭头指向该员工的直接下属。\n:::\n\nIOI 社总是通过窃取 JOI 社的研究项目信息来进行 \"极其奇特的发明\"。当前，JOI 社启动了 $M$ 个名为 $r_1, r_2, \\cdots, r_M$ 的研究项目，而 IOI 社则启动了 $M$ 个名为 $s_1, s_2, \\cdots, s_M$ 的间谍项目。IOI 社的间谍项目 $s_b$ 旨在窃取 JOI 社研究项目 $r_b$ 的信息。\n\nJOI 社和 IOI 社确定项目成员的方式相同。每个项目确定一名负责人，负责人向其所有直接下属下达命令。接收到命令的员工再向其所有直接下属下达相同的命令。所有接收到命令的员工以及负责人本人参与该项目，其他员工不参与。\n\n| 项目 | 负责人 | 参与的员工 |\n|:-:|:-:|:-:|\n| 研究项目 $r_1$ | $j_1$ | $j_1, j_2, j_3$ |\n| 研究项目 $r_2$ | $j_2$ | $j_2, j_3$ |\n| 研究项目 $r_3$ | $j_2$ | $j_2, j_3$ |\n| 研究项目 $r_4$ | $j_3$ | $j_3$ |\n\n| 项目 | 负责人 | 参与的员工 |\n|:-:|:-:|:-:|\n| 间谍项目 $s_1$ | $i_1$ | $i_1$ |\n| 间谍项目 $s_2$ | $i_1$ | $i_1$ |\n| 间谍项目 $s_3$ | $i_3$ | $i_3$ |\n| 间谍项目 $s_4$ | $i_2$ | $i_1, i_2, i_3$ |\n\n图 2: 图 1 所示的 JOI 社与 IOI 社中项目配置示例\n\nIOI 社员工 $i_a$ 从 JOI 社员工 $j_a$ 处窃取信息。若参与间谍项目 $s_b$ 的 IOI 社员工 $i_a$ 所对应的 JOI 社员工 $j_a$ 也参与了研究项目 $r_b$，则该次间谍活动成功。两家公司的每位员工可能参与多个项目，且 IOI 社员工可能在多个间谍项目中成功进行间谍活动。\n\n### 任务\n\n给定 JOI 社与 IOI 社的员工信息及项目信息，编写程序计算 IOI 社的每位员工在多少个间谍项目中成功完成间谍活动。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含两个以空格分隔的整数 $N, M$，表示 JOI 社与 IOI 社各有 $N$ 名员工，研究项目与间谍项目各有 $M$ 个。\n- 接下来的 $N$ 行中，第 $a$ 行（$1 \\leq a \\leq N$）包含两个整数 $P_a, Q_a$（$0 \\leq P_a \\leq N$ 且 $0 \\leq Q_a \\leq N$），表示 JOI 社员工 $j_a$ 是员工 $j_{P_a}$ 的直接下属，IOI 社员工 $i_a$ 是员工 $i_{Q_a}$ 的直接下属。当 $P_a = 0$ 时，员工 $j_a$ 为 JOI 社社长；当 $Q_a = 0$ 时，员工 $i_a$ 为 IOI 社社长。\n- 接下来的 $M$ 行中，第 $b$ 行（$1 \\leq b \\leq M$）包含两个整数 $R_b, S_b$（$1 \\leq R_b \\leq N$ 且 $1 \\leq S_b \\leq N$），表示研究项目 $r_b$ 的负责人为员工 $j_{R_b}$，间谍项目 $s_b$ 的负责人为员工 $i_{S_b}$。\n", "outputFormat": "向标准输出输出 $N$ 行。第 $a$ 行（$1 \\leq a \\leq N$）输出一个整数，表示 IOI 社员工 $i_a$ 在多少个间谍项目中成功完成间谍活动。\n", "hint": "### 样例 1 解释\n\n此输入输出对应题目中的示例。此时：\n\n- 参与间谍项目 $s_1, s_2, s_4$ 的员工 $i_1$，由于员工 $j_1$ 参与了研究项目 $r_1$，因此在间谍项目 $s_1$ 中成功完成间谍活动。\n- 参与间谍项目 $s_4$ 的员工 $i_2$，由于员工 $j_2$ 未参与研究项目 $r_4$，因此在任何间谍项目中均未成功完成间谍活动。\n- 参与间谍项目 $s_3, s_4$ 的员工 $i_3$，由于员工 $j_3$ 参与了研究项目 $r_3, r_4$，因此在间谍项目 $s_3, s_4$ 中成功完成间谍活动。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $1 \\leq N \\leq 2000$\n- $1 \\leq M \\leq 500\\,000$\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n满足以下条件：\n\n- $N \\leq 200$\n- $M \\leq 200$\n\n#### 子任务 2 [20 分]\n\n满足以下条件：\n\n- $M \\leq 2\\,000$\n\n#### 子任务 3 [70 分]\n\n无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2013] 间谍 / Spy", "background": "", "description": "你知道 Just Odd Inventions 公司吗？这家公司的业务是进行 \"仅仅只是奇特的发明\" (just odd inventions)。这里我们简称其为 JOI 社。\n\n那么，你知道 Incredibly Odd Inventions 公司吗？这家公司的业务是进行 \"极其奇特的发明\" (incredibly odd inventions)。这里我们简称其为 IOI 社。\n\nJOI 社和 IOI 社各有 $N$ 名员工。JOI 社的员工命名为 $j_1, j_2, \\cdots, j_N$，IOI 社的员工命名为 $i_1, i_2, \\cdots, i_N$。此外，JOI 社员工中有一人是 JOI 社的社长，IOI 社员工中有一人是 IOI 社的社长。除社长外，每位员工在各自公司内都有且仅有一名直接上司。\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5inw1qbj.png)\n\n图 1: JOI 社与 IOI 社的组织结构示例。从代表员工的圆圈出发的箭头指向该员工的直接下属。\n:::\n\nIOI 社总是通过窃取 JOI 社的研究项目信息来进行 \"极其奇特的发明\"。当前，JOI 社启动了 $M$ 个名为 $r_1, r_2, \\cdots, r_M$ 的研究项目，而 IOI 社则启动了 $M$ 个名为 $s_1, s_2, \\cdots, s_M$ 的间谍项目。IOI 社的间谍项目 $s_b$ 旨在窃取 JOI 社研究项目 $r_b$ 的信息。\n\nJOI 社和 IOI 社确定项目成员的方式相同。每个项目确定一名负责人，负责人向其所有直接下属下达命令。接收到命令的员工再向其所有直接下属下达相同的命令。所有接收到命令的员工以及负责人本人参与该项目，其他员工不参与。\n\n| 项目 | 负责人 | 参与的员工 |\n|:-:|:-:|:-:|\n| 研究项目 $r_1$ | $j_1$ | $j_1, j_2, j_3$ |\n| 研究项目 $r_2$ | $j_2$ | $j_2, j_3$ |\n| 研究项目 $r_3$ | $j_2$ | $j_2, j_3$ |\n| 研究项目 $r_4$ | $j_3$ | $j_3$ |\n\n| 项目 | 负责人 | 参与的员工 |\n|:-:|:-:|:-:|\n| 间谍项目 $s_1$ | $i_1$ | $i_1$ |\n| 间谍项目 $s_2$ | $i_1$ | $i_1$ |\n| 间谍项目 $s_3$ | $i_3$ | $i_3$ |\n| 间谍项目 $s_4$ | $i_2$ | $i_1, i_2, i_3$ |\n\n图 2: 图 1 所示的 JOI 社与 IOI 社中项目配置示例\n\nIOI 社员工 $i_a$ 从 JOI 社员工 $j_a$ 处窃取信息。若参与间谍项目 $s_b$ 的 IOI 社员工 $i_a$ 所对应的 JOI 社员工 $j_a$ 也参与了研究项目 $r_b$，则该次间谍活动成功。两家公司的每位员工可能参与多个项目，且 IOI 社员工可能在多个间谍项目中成功进行间谍活动。\n\n### 任务\n\n给定 JOI 社与 IOI 社的员工信息及项目信息，编写程序计算 IOI 社的每位员工在多少个间谍项目中成功完成间谍活动。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含两个以空格分隔的整数 $N, M$，表示 JOI 社与 IOI 社各有 $N$ 名员工，研究项目与间谍项目各有 $M$ 个。\n- 接下来的 $N$ 行中，第 $a$ 行（$1 \\leq a \\leq N$）包含两个整数 $P_a, Q_a$（$0 \\leq P_a \\leq N$ 且 $0 \\leq Q_a \\leq N$），表示 JOI 社员工 $j_a$ 是员工 $j_{P_a}$ 的直接下属，IOI 社员工 $i_a$ 是员工 $i_{Q_a}$ 的直接下属。当 $P_a = 0$ 时，员工 $j_a$ 为 JOI 社社长；当 $Q_a = 0$ 时，员工 $i_a$ 为 IOI 社社长。\n- 接下来的 $M$ 行中，第 $b$ 行（$1 \\leq b \\leq M$）包含两个整数 $R_b, S_b$（$1 \\leq R_b \\leq N$ 且 $1 \\leq S_b \\leq N$），表示研究项目 $r_b$ 的负责人为员工 $j_{R_b}$，间谍项目 $s_b$ 的负责人为员工 $i_{S_b}$。\n", "outputFormat": "向标准输出输出 $N$ 行。第 $a$ 行（$1 \\leq a \\leq N$）输出一个整数，表示 IOI 社员工 $i_a$ 在多少个间谍项目中成功完成间谍活动。\n", "hint": "### 样例 1 解释\n\n此输入输出对应题目中的示例。此时：\n\n- 参与间谍项目 $s_1, s_2, s_4$ 的员工 $i_1$，由于员工 $j_1$ 参与了研究项目 $r_1$，因此在间谍项目 $s_1$ 中成功完成间谍活动。\n- 参与间谍项目 $s_4$ 的员工 $i_2$，由于员工 $j_2$ 未参与研究项目 $r_4$，因此在任何间谍项目中均未成功完成间谍活动。\n- 参与间谍项目 $s_3, s_4$ 的员工 $i_3$，由于员工 $j_3$ 参与了研究项目 $r_3, r_4$，因此在间谍项目 $s_3, s_4$ 中成功完成间谍活动。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $1 \\leq N \\leq 2000$\n- $1 \\leq M \\leq 500\\,000$\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n满足以下条件：\n\n- $N \\leq 200$\n- $M \\leq 200$\n\n#### 子任务 2 [20 分]\n\n满足以下条件：\n\n- $M \\leq 2\\,000$\n\n#### 子任务 3 [70 分]\n\n无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14437", "type": "P", "difficulty": 6, "samples": [["2 3", "65352 168 14 1"], ["3 6", "656710580 183930161 347092814 562461050 594594 728 1"], ["8 10", "683088558 324183008 843495452 57670072 473819567 319631135 186053454 988978164 422568047 306783378 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["容斥原理", "生成函数", "线性代数", "快速数论变换 NTT", "2077"], "title": "[Aboi 2077] I am a fluff", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/9h31kkzg.png)](https://www.bilibili.com/video/BV12bXbYcEP2)", "description": "对于素数幂 $q$，设 $V$ 为 $q$ 元域 $\\mathbb F_q$ 上的 $n$ 维线性空间，对于 $[0,n]$ 中的每个整数 $k$，求有多少种选出任意非零个 $V$ 的不同子空间的方案，使得选出的子空间的交的维度为 $k$。答案对 $998244353$ 取模。", "inputFormat": "一行两个正整数 $q,n$。", "outputFormat": "一行 $n+1$ 个非负整数，第 $i$ 个整数表示 $k=i-1$ 时的答案对 $998244353$ 取模的结果。", "hint": "对于所有数据，$1\\le n\\le2.5\\times10^5$，$2\\le q<998244353$，$\\exists p\\in\\mathbb P,c\\in\\mathbb N_+,p^c=q$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aboi 2077] I am a fluff", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/9h31kkzg.png)](https://www.bilibili.com/video/BV12bXbYcEP2)", "description": "对于素数幂 $q$，设 $V$ 为 $q$ 元域 $\\mathbb F_q$ 上的 $n$ 维线性空间，对于 $[0,n]$ 中的每个整数 $k$，求有多少种选出任意非零个 $V$ 的不同子空间的方案，使得选出的子空间的交的维度为 $k$。答案对 $998244353$ 取模。", "inputFormat": "一行两个正整数 $q,n$。", "outputFormat": "一行 $n+1$ 个非负整数，第 $i$ 个整数表示 $k=i-1$ 时的答案对 $998244353$ 取模的结果。", "hint": "对于所有数据，$1\\le n\\le2.5\\times10^5$，$2\\le q<998244353$，$\\exists p\\in\\mathbb P,c\\in\\mathbb N_+,p^c=q$。", "locale": "zh-CN"}}}
{"pid": "P14438", "type": "P", "difficulty": 6, "samples": [["5\n2\n8\n1\n10\n9", "13\n18\n12\n13\n12"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "JOISC/JOIST（日本）"], "title": "[JOISC 2013] 切割蛋糕 / Cake", "background": "", "description": "JOI 君和 IOI 酱是双胞胎兄妹。JOI 君最近迷上了烘焙，今天他刚烤好一个蛋糕准备享用，但烤好的香味引来了 IOI 酱，于是两人决定平分这个蛋糕。\n\n蛋糕是圆形的。从某一点沿放射状切入，将蛋糕切分成 $N$ 块，并按逆时针方向为这些块编号 $1$ 到 $N$。也就是说，对于 $1 \\leq i \\leq N$，第 $i$ 块与第 $i-1$ 块和第 $i+1$ 块相邻（其中视第 $0$ 块为第 $N$ 块，第 $N+1$ 块为第 $1$ 块）。第 $i$ 块的大小为 $A_i$，但由于切工十分拙劣，所有 $A_i$ 的值均互不相同。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/uwsi5tqp.png)\n:::\n\n决定将这 $N$ 块蛋糕分给 JOI 君和 IOI 酱。分配方式如下：\n\n- 首先由 JOI 君从 $N$ 块中选择 $1$ 块取走。\n- 随后从 IOI 酱开始，IOI 酱和 JOI 君轮流从剩余蛋糕块中每次取 1 块。但（由于两人不擅长取蛋糕且要避免破坏蛋糕形状）只能取那些至少有一侧相邻蛋糕块已被取走的蛋糕块。当有多块可取的蛋糕块时，选择其中 **最大** 的一块取走。\n\nJOI 君想知道，对于每一块蛋糕，若他最初选择取走该块，则最终自己获得的所有蛋糕块大小之和是多少。\n\n### 任务\n\n给定蛋糕块的数量 $N$ 以及 $N$ 块蛋糕的大小信息，编写程序计算对于每一块蛋糕，若最初取走该块，则 JOI 君最终获得的蛋糕块大小之和。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含一个整数 $N$，表示蛋糕被切分为 $N$ 块。\n- 后续 $N$ 行中，第 $i$ 行（$1 \\leq i \\leq N$）包含一个整数 $A_i$，表示第 $i$ 块蛋糕的大小。\n", "outputFormat": "向标准输出输出 $N$ 行。第 $i$ 行（$1 \\leq i \\leq N$）输出一个整数，表示若最初取走第 $i$ 块蛋糕，则 JOI 君最终获得的蛋糕块大小之和。", "hint": "### 样例 1 解释\n\n此示例对应题目中图示的情况。\n\n例如，假设最初取走第 $1$ 块。此时：\n\n- 剩余蛋糕块中「至少有一侧相邻蛋糕块已被取走」的是第 $2$ 块和第 $5$ 块，由于第 $5$ 块较大，因此接下来取走第 $5$ 块。\n- 类似地，接下来比较第 $2$ 块和第 $4$ 块，由于第 $4$ 块较大，因此取走第 $4$ 块。\n- 接着比较第 $2$ 块和第 $3$ 块，由于第 $2$ 块较大，因此取走第 $2$ 块。\n- 最后仅剩第 $3$ 块，因此取走第 $3$ 块。\n\n即蛋糕块的取走顺序为：\n\n第 $1$ 块 ($2$) → 第 $5$ 块 ($9$) → 第 $4$ 块 ($10$) → 第 $2$ 块 ($8$) → 第 $3$ 块 ($1$)\n\n（括号内为蛋糕块大小）\n\n因此 JOI 君取走的蛋糕块为第 $1$、$4$、$3$ 块，其大小之和为 $13$，故在第 $1$ 行输出 $13$。最初取走第 $1$ 块以外的其他块时，也以类似方式计算。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $2 \\leq N \\leq 300\\,000$\n- $1 \\leq A_i \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq N$)\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n- 满足 $N \\leq 5000$\n\n#### 子任务 2 [90 分]\n\n无额外限制\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2013] 切割蛋糕 / Cake", "background": "", "description": "JOI 君和 IOI 酱是双胞胎兄妹。JOI 君最近迷上了烘焙，今天他刚烤好一个蛋糕准备享用，但烤好的香味引来了 IOI 酱，于是两人决定平分这个蛋糕。\n\n蛋糕是圆形的。从某一点沿放射状切入，将蛋糕切分成 $N$ 块，并按逆时针方向为这些块编号 $1$ 到 $N$。也就是说，对于 $1 \\leq i \\leq N$，第 $i$ 块与第 $i-1$ 块和第 $i+1$ 块相邻（其中视第 $0$ 块为第 $N$ 块，第 $N+1$ 块为第 $1$ 块）。第 $i$ 块的大小为 $A_i$，但由于切工十分拙劣，所有 $A_i$ 的值均互不相同。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/uwsi5tqp.png)\n:::\n\n决定将这 $N$ 块蛋糕分给 JOI 君和 IOI 酱。分配方式如下：\n\n- 首先由 JOI 君从 $N$ 块中选择 $1$ 块取走。\n- 随后从 IOI 酱开始，IOI 酱和 JOI 君轮流从剩余蛋糕块中每次取 1 块。但（由于两人不擅长取蛋糕且要避免破坏蛋糕形状）只能取那些至少有一侧相邻蛋糕块已被取走的蛋糕块。当有多块可取的蛋糕块时，选择其中 **最大** 的一块取走。\n\nJOI 君想知道，对于每一块蛋糕，若他最初选择取走该块，则最终自己获得的所有蛋糕块大小之和是多少。\n\n### 任务\n\n给定蛋糕块的数量 $N$ 以及 $N$ 块蛋糕的大小信息，编写程序计算对于每一块蛋糕，若最初取走该块，则 JOI 君最终获得的蛋糕块大小之和。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含一个整数 $N$，表示蛋糕被切分为 $N$ 块。\n- 后续 $N$ 行中，第 $i$ 行（$1 \\leq i \\leq N$）包含一个整数 $A_i$，表示第 $i$ 块蛋糕的大小。\n", "outputFormat": "向标准输出输出 $N$ 行。第 $i$ 行（$1 \\leq i \\leq N$）输出一个整数，表示若最初取走第 $i$ 块蛋糕，则 JOI 君最终获得的蛋糕块大小之和。", "hint": "### 样例 1 解释\n\n此示例对应题目中图示的情况。\n\n例如，假设最初取走第 $1$ 块。此时：\n\n- 剩余蛋糕块中「至少有一侧相邻蛋糕块已被取走」的是第 $2$ 块和第 $5$ 块，由于第 $5$ 块较大，因此接下来取走第 $5$ 块。\n- 类似地，接下来比较第 $2$ 块和第 $4$ 块，由于第 $4$ 块较大，因此取走第 $4$ 块。\n- 接着比较第 $2$ 块和第 $3$ 块，由于第 $2$ 块较大，因此取走第 $2$ 块。\n- 最后仅剩第 $3$ 块，因此取走第 $3$ 块。\n\n即蛋糕块的取走顺序为：\n\n第 $1$ 块 ($2$) → 第 $5$ 块 ($9$) → 第 $4$ 块 ($10$) → 第 $2$ 块 ($8$) → 第 $3$ 块 ($1$)\n\n（括号内为蛋糕块大小）\n\n因此 JOI 君取走的蛋糕块为第 $1$、$4$、$3$ 块，其大小之和为 $13$，故在第 $1$ 行输出 $13$。最初取走第 $1$ 块以外的其他块时，也以类似方式计算。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $2 \\leq N \\leq 300\\,000$\n- $1 \\leq A_i \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq N$)\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n- 满足 $N \\leq 5000$\n\n#### 子任务 2 [90 分]\n\n无额外限制\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14439", "type": "P", "difficulty": 5, "samples": [["0 10 4 10 2\n3 10\n8 5", "-20"], ["3 42 9 10 8\n10 5\n12 9\n26 7\n27 2\n30 8\n34 6\n36 8\n40 10", "-25"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "线段树", "JOISC/JOIST（日本）"], "title": "[JOISC 2013] 考拉 / Koala", "background": "", "description": "在一条细长的直线道路上，有 K 理事长的家和 M 前理事长的家。擅长跳跃的考拉 IOI 君计划从 K 理事长的家前往 M 前理事长的家。\n\n这条道路可视为数轴，每个位置用一个坐标值表示。K 理事长的家坐标为 $K$，M 前理事长的家坐标为 $M$。它们之间有 $N$ 个 JOI 导师的家，第 $i$ 个导师家的坐标为 $T_i$。\n\nIOI 君以体力值 $0$ 从 K 理事长的家出发，通过若干次跳跃前往 M 前理事长的家。每次跳跃可向 M 前理事长家的方向前进距离 $d$，其中 $d$ 必须是满足 $1 \\leq d \\leq D$ 的整数。每进行一次跳跃，IOI 君的体力值减少 $A$（体力值可以为负）。\n\n若 IOI 君跳跃后到达的地点恰好有导师的家，他可以在此家中住宿一次。在第 $i$ 个导师家住宿时，IOI 君的体力值增加 $B_i$。\n\nIOI 君希望尽可能以较高的体力值状态到达 M 前理事长的家。\n\n### 任务\n\n编写程序，计算考拉 IOI 君到达 M 前理事长的家时可能的最大体力值。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含以空格分隔的整数 $K, M, D, A, N$，分别表示 K 理事长的家坐标、M 前理事长的家坐标、单次跳跃的最大距离、单次跳跃消耗的体力、导师家的数量。\n- 后续 $N$ 行中，第 $i$ 行（$1 \\leq i \\leq N$）包含以空格分隔的两个整数 $T_i, B_i$，分别表示第 $i$ 个导师家的坐标、在第 $i$ 个导师家住宿时增加的体力值。", "outputFormat": "向标准输出输出一个整数，表示 IOI 君到达 M 前理事长的家时可能的最大体力值。", "hint": "### 样例 1 解释\n\n在此示例中，IOI 君的最优行动方案如下：\n\n- 进行距离为 $3$ 的跳跃。IOI 君到达坐标 $3$ 的位置，体力变为 $-10$。\n- 在第 $1$ 个导师家住宿。体力变为 $0$。\n- 进行距离为 $4$ 的跳跃。IOI 君到达坐标 $7$ 的位置，体力变为 $-10$。\n- 进行距离为 $3$ 的跳跃。IOI 君到达 M 前理事长的家，体力变为 $-20$。\n\n### 样例 2 解释\n\n在此示例中，IOI 君的最优行动方案如下：\n\n- 进行距离为 $9$ 的跳跃。IOI 君到达坐标 $12$ 的位置，体力变为 $-10$。\n- 在第 $2$ 个导师家住宿。体力变为 $-1$。\n- 进行距离为 $9$ 的跳跃。IOI 君到达坐标 $21$ 的位置，体力变为 $-11$。\n- 进行距离为 $9$ 的跳跃。IOI 君到达坐标 $30$ 的位置，体力变为 $-21$。\n- 在第 $5$ 个导师家住宿。体力变为 $-13$。\n- 进行距离为 $6$ 的跳跃。IOI 君到达坐标 $36$ 的位置，体力变为 $-23$。\n- 在第 $7$ 个导师家住宿。体力变为 $-15$。\n- 进行距离为 $6$ 的跳跃。IOI 君到达 M 前理事长的家，体力变为 $-25$。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $1 \\leq D \\leq 1\\,000\\,000\\,000$\n- $1 \\leq A \\leq 1\\,000\\,000\\,000$\n- $1 \\leq N \\leq 100\\,000$\n- $0 \\leq K < T_1 < \\cdots < T_N < M \\leq 1\\,000\\,000\\,000$\n- $1 \\leq B_i \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq N$)\n\n---\n\n### 子任务\n\n#### 子任务 1 [20 分]\n\n- 满足 $N \\leq 1\\,000$\n\n#### 子任务 2 [30 分]\n\n- 满足 $D \\leq 100$\n\n#### 子任务 3 [50 分]\n\n无额外限制\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2013] 考拉 / Koala", "background": "", "description": "在一条细长的直线道路上，有 K 理事长的家和 M 前理事长的家。擅长跳跃的考拉 IOI 君计划从 K 理事长的家前往 M 前理事长的家。\n\n这条道路可视为数轴，每个位置用一个坐标值表示。K 理事长的家坐标为 $K$，M 前理事长的家坐标为 $M$。它们之间有 $N$ 个 JOI 导师的家，第 $i$ 个导师家的坐标为 $T_i$。\n\nIOI 君以体力值 $0$ 从 K 理事长的家出发，通过若干次跳跃前往 M 前理事长的家。每次跳跃可向 M 前理事长家的方向前进距离 $d$，其中 $d$ 必须是满足 $1 \\leq d \\leq D$ 的整数。每进行一次跳跃，IOI 君的体力值减少 $A$（体力值可以为负）。\n\n若 IOI 君跳跃后到达的地点恰好有导师的家，他可以在此家中住宿一次。在第 $i$ 个导师家住宿时，IOI 君的体力值增加 $B_i$。\n\nIOI 君希望尽可能以较高的体力值状态到达 M 前理事长的家。\n\n### 任务\n\n编写程序，计算考拉 IOI 君到达 M 前理事长的家时可能的最大体力值。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含以空格分隔的整数 $K, M, D, A, N$，分别表示 K 理事长的家坐标、M 前理事长的家坐标、单次跳跃的最大距离、单次跳跃消耗的体力、导师家的数量。\n- 后续 $N$ 行中，第 $i$ 行（$1 \\leq i \\leq N$）包含以空格分隔的两个整数 $T_i, B_i$，分别表示第 $i$ 个导师家的坐标、在第 $i$ 个导师家住宿时增加的体力值。", "outputFormat": "向标准输出输出一个整数，表示 IOI 君到达 M 前理事长的家时可能的最大体力值。", "hint": "### 样例 1 解释\n\n在此示例中，IOI 君的最优行动方案如下：\n\n- 进行距离为 $3$ 的跳跃。IOI 君到达坐标 $3$ 的位置，体力变为 $-10$。\n- 在第 $1$ 个导师家住宿。体力变为 $0$。\n- 进行距离为 $4$ 的跳跃。IOI 君到达坐标 $7$ 的位置，体力变为 $-10$。\n- 进行距离为 $3$ 的跳跃。IOI 君到达 M 前理事长的家，体力变为 $-20$。\n\n### 样例 2 解释\n\n在此示例中，IOI 君的最优行动方案如下：\n\n- 进行距离为 $9$ 的跳跃。IOI 君到达坐标 $12$ 的位置，体力变为 $-10$。\n- 在第 $2$ 个导师家住宿。体力变为 $-1$。\n- 进行距离为 $9$ 的跳跃。IOI 君到达坐标 $21$ 的位置，体力变为 $-11$。\n- 进行距离为 $9$ 的跳跃。IOI 君到达坐标 $30$ 的位置，体力变为 $-21$。\n- 在第 $5$ 个导师家住宿。体力变为 $-13$。\n- 进行距离为 $6$ 的跳跃。IOI 君到达坐标 $36$ 的位置，体力变为 $-23$。\n- 在第 $7$ 个导师家住宿。体力变为 $-15$。\n- 进行距离为 $6$ 的跳跃。IOI 君到达 M 前理事长的家，体力变为 $-25$。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $1 \\leq D \\leq 1\\,000\\,000\\,000$\n- $1 \\leq A \\leq 1\\,000\\,000\\,000$\n- $1 \\leq N \\leq 100\\,000$\n- $0 \\leq K < T_1 < \\cdots < T_N < M \\leq 1\\,000\\,000\\,000$\n- $1 \\leq B_i \\leq 1\\,000\\,000\\,000$ ($1 \\leq i \\leq N$)\n\n---\n\n### 子任务\n\n#### 子任务 1 [20 分]\n\n- 满足 $N \\leq 1\\,000$\n\n#### 子任务 2 [30 分]\n\n- 满足 $D \\leq 100$\n\n#### 子任务 3 [50 分]\n\n无额外限制\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14440", "type": "P", "difficulty": 4, "samples": [["", ""]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "交互题", "Special Judge", "JOISC/JOIST（日本）"], "title": "[JOISC 2013] 山岳救援队 / Mountain Rescue Team", "background": "请使用不低于 C++17 的语言标准提交，并且在程序开头加入函数定义：\n\n```cpp\nvoid Rescue(int R, int C, int RS, int CS, int X);\nint Measure(int RM, int CM);\n```\n\n注意，不应引入外部头文件。", "description": "IOI 国政$ $府因 IOI 山频发遇难事故，专门成立了 IOI 山山岳救援队。成立数日后某天，救援队接到一起遇难事故通报。据通报称，遇难者目前停留在高度为 $X$ 的位置。\n\nIOI 山可表示为 $R$ 行 $C$ 列的网格，每个网格有确定的高度值。从上数第 $r$ 行、从左数第 $c$ 列的网格记作 $(r,c)$。已知山形满足以下条件：\n\n- 不存在两个不同网格具有相同高度。\n- 每个网格的高度均为 $1$ 到 $1\\,000\\,000\\,000$ 之间的整数。\n- 网格 $(R_s, C_s)$ 为山顶，即高度最大的网格为 $(R_s, C_s)$。\n- 定义两个网格 $(r_1,c_1)$ 与 $(r_2,c_2)$ 的距离为 $|r_1 - r_2| + |c_1 - c_2|$。对于任意两个相邻网格（相邻指两网格有公共边），距离山顶较远的网格高度较低。\n\n山岳救援队成立不久，对 IOI 山的勘测尚未完成，包括山顶在内的各网格高度均未知。使用专业测量仪器可查询指定单个网格的高度，但每次查询需耗费固定时间。救援队希望通过该仪器定位遇难者所在的高度为 $X$ 的网格位置，且希望将仪器使用次数控制在 $1\\,000$ 次以内。\n\n### 任务\n\n给定表示 IOI 山网格大小的整数 $R, C$、山顶位置 $R_s, C_s$ 以及遇难者所在网格高度 $X$，编写程序在最多使用 $1\\,000$ 次测量仪器的情况下，定位遇难者所在网格的位置。\n\n### 实现细节\n\n你必须编写一个程序，实现使用测量仪器的方法。程序必须实现以下函数：\n\n- `void Rescue(int R, int C, int RS, int CS, int X)`\n\n此函数在每个测试用例中仅被调用一次。参数 $R$, $C$ 分别表示山体网格的行数 $R$ 和列数 $C$。参数 $RS$, $CS$ 分别表示山顶的行号 $RS$ 和列号 $CS$。参数 $X$ 表示遇难者所在网格的高度 $X$。\n\n此外，程序中可调用以下函数：\n\n- `int Measure(int RM, int CM)`\n\n此函数在需要使用测量仪器时调用。参数 $RM$, $CM$ 分别表示待测量高度的网格行号 $R_M$ 和列号 $C_M$，需满足 $1 \\leq R_M \\leq R$, $1 \\leq C_M \\leq C$。此函数返回值为网格 $(R_M, C_M)$ 的高度，为 $1$ 到 $1\\,000\\,000\\,000$ 之间的整数。\n\n若使用不满足 $1 \\leq R_M \\leq R$, $1 \\leq C_M \\leq C$ 的参数调用此函数，将被判为 **Wrong Answer [1]**，程序执行终止。\n\n若此函数被调用满 $1\\,000$ 次后再次调用，将被判为 **Wrong Answer [2]**，程序执行终止。\n\n- `void Pinpoint(int RP, int CP)`\n\n此函数在确定遇难者所在网格位置时调用，仅可调用一次。参数 $RP$, $CP$ 分别表示已确定的遇难者所在网格行号 $R_P$ 和列号 $C_P$，需满足 $1 \\leq R_P \\leq R$, $1 \\leq C_P \\leq C$。此函数无返回值。\n\n若使用不满足 $1 \\leq R_P \\leq R$, $1 \\leq C_P \\leq C$ 的参数调用此函数，将被判为 **Wrong Answer [3]**，程序执行终止。\n\n程序调用此函数时，若网格 $(R_P, C_P)$ 的高度等于 $X$ 则判为 **正确**，否则判为 **Wrong Answer [4]**，程序执行终止。\n\n若 Rescue 函数在未调用此函数的情况下结束，将被判为 **Wrong Answer [5]**，程序执行终止。", "inputFormat": "评分程序的示例从标准输入读取以下输入：\n\n- 第 $1$ 行包含以空格分隔的整数 $R, C, R_S, C_S, X$，表示山体网格的行数为 $R$，列数为 $C$，山顶为网格 $(R_S, C_S)$，遇难者所在网格的高度为 $X$。\n- 后续 $R$ 行描述山体高度信息。其中第 $i$ 行（$1 \\leq i \\leq R$）包含 $C$ 个整数，其中第 $j$ 个（$1 \\leq j \\leq C$）整数表示网格 $(i, j)$ 的高度。", "outputFormat": "若程序正常结束运行，评分程序示例将向标准输出输出一行信息：\n\n- 若答案正确，输出 \"Accepted\"。（实际输出不包含引号，下同。）\n- 若答案错误，根据“实现细节”章节中列出的错误编号输出，例如 \"Wrong Answer[1]\"。此外，对于 Wrong Answer [4]，将输出正确遇难者位置 $(R_X, C_X)$ 以及调用 Pinpoint 例程时参数指定的网格 $(R_P, C_P)$ 的信息，格式如 \"Wrong Answer[4] : (RX, CX) = (3, 2), (RP, CP) = (4, 1)\"。", "hint": "### 限制\n\n所有输入数据满足以下条件：\n\n- $1 \\leq R \\leq 200$\n- $1 \\leq C \\leq 200$\n- $1 \\leq R_S \\leq R$\n- $1 \\leq C_S \\leq C$\n- $1 \\leq X \\leq 1\\,000\\,000\\,000$\n\n---\n\n### 子任务\n\n#### 子任务 1 [20 分]\n\n满足以下条件：\n\n- $R \\leq 50$\n- $C \\leq 50$\n\n#### 子任务 2 [80 分]\n\n无额外限制\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2013] 山岳救援队 / Mountain Rescue Team", "background": "请使用不低于 C++17 的语言标准提交，并且在程序开头加入函数定义：\n\n```cpp\nvoid Rescue(int R, int C, int RS, int CS, int X);\nint Measure(int RM, int CM);\n```\n\n注意，不应引入外部头文件。", "description": "IOI 国政$ $府因 IOI 山频发遇难事故，专门成立了 IOI 山山岳救援队。成立数日后某天，救援队接到一起遇难事故通报。据通报称，遇难者目前停留在高度为 $X$ 的位置。\n\nIOI 山可表示为 $R$ 行 $C$ 列的网格，每个网格有确定的高度值。从上数第 $r$ 行、从左数第 $c$ 列的网格记作 $(r,c)$。已知山形满足以下条件：\n\n- 不存在两个不同网格具有相同高度。\n- 每个网格的高度均为 $1$ 到 $1\\,000\\,000\\,000$ 之间的整数。\n- 网格 $(R_s, C_s)$ 为山顶，即高度最大的网格为 $(R_s, C_s)$。\n- 定义两个网格 $(r_1,c_1)$ 与 $(r_2,c_2)$ 的距离为 $|r_1 - r_2| + |c_1 - c_2|$。对于任意两个相邻网格（相邻指两网格有公共边），距离山顶较远的网格高度较低。\n\n山岳救援队成立不久，对 IOI 山的勘测尚未完成，包括山顶在内的各网格高度均未知。使用专业测量仪器可查询指定单个网格的高度，但每次查询需耗费固定时间。救援队希望通过该仪器定位遇难者所在的高度为 $X$ 的网格位置，且希望将仪器使用次数控制在 $1\\,000$ 次以内。\n\n### 任务\n\n给定表示 IOI 山网格大小的整数 $R, C$、山顶位置 $R_s, C_s$ 以及遇难者所在网格高度 $X$，编写程序在最多使用 $1\\,000$ 次测量仪器的情况下，定位遇难者所在网格的位置。\n\n### 实现细节\n\n你必须编写一个程序，实现使用测量仪器的方法。程序必须实现以下函数：\n\n- `void Rescue(int R, int C, int RS, int CS, int X)`\n\n此函数在每个测试用例中仅被调用一次。参数 $R$, $C$ 分别表示山体网格的行数 $R$ 和列数 $C$。参数 $RS$, $CS$ 分别表示山顶的行号 $RS$ 和列号 $CS$。参数 $X$ 表示遇难者所在网格的高度 $X$。\n\n此外，程序中可调用以下函数：\n\n- `int Measure(int RM, int CM)`\n\n此函数在需要使用测量仪器时调用。参数 $RM$, $CM$ 分别表示待测量高度的网格行号 $R_M$ 和列号 $C_M$，需满足 $1 \\leq R_M \\leq R$, $1 \\leq C_M \\leq C$。此函数返回值为网格 $(R_M, C_M)$ 的高度，为 $1$ 到 $1\\,000\\,000\\,000$ 之间的整数。\n\n若使用不满足 $1 \\leq R_M \\leq R$, $1 \\leq C_M \\leq C$ 的参数调用此函数，将被判为 **Wrong Answer [1]**，程序执行终止。\n\n若此函数被调用满 $1\\,000$ 次后再次调用，将被判为 **Wrong Answer [2]**，程序执行终止。\n\n- `void Pinpoint(int RP, int CP)`\n\n此函数在确定遇难者所在网格位置时调用，仅可调用一次。参数 $RP$, $CP$ 分别表示已确定的遇难者所在网格行号 $R_P$ 和列号 $C_P$，需满足 $1 \\leq R_P \\leq R$, $1 \\leq C_P \\leq C$。此函数无返回值。\n\n若使用不满足 $1 \\leq R_P \\leq R$, $1 \\leq C_P \\leq C$ 的参数调用此函数，将被判为 **Wrong Answer [3]**，程序执行终止。\n\n程序调用此函数时，若网格 $(R_P, C_P)$ 的高度等于 $X$ 则判为 **正确**，否则判为 **Wrong Answer [4]**，程序执行终止。\n\n若 Rescue 函数在未调用此函数的情况下结束，将被判为 **Wrong Answer [5]**，程序执行终止。", "inputFormat": "评分程序的示例从标准输入读取以下输入：\n\n- 第 $1$ 行包含以空格分隔的整数 $R, C, R_S, C_S, X$，表示山体网格的行数为 $R$，列数为 $C$，山顶为网格 $(R_S, C_S)$，遇难者所在网格的高度为 $X$。\n- 后续 $R$ 行描述山体高度信息。其中第 $i$ 行（$1 \\leq i \\leq R$）包含 $C$ 个整数，其中第 $j$ 个（$1 \\leq j \\leq C$）整数表示网格 $(i, j)$ 的高度。", "outputFormat": "若程序正常结束运行，评分程序示例将向标准输出输出一行信息：\n\n- 若答案正确，输出 \"Accepted\"。（实际输出不包含引号，下同。）\n- 若答案错误，根据“实现细节”章节中列出的错误编号输出，例如 \"Wrong Answer[1]\"。此外，对于 Wrong Answer [4]，将输出正确遇难者位置 $(R_X, C_X)$ 以及调用 Pinpoint 例程时参数指定的网格 $(R_P, C_P)$ 的信息，格式如 \"Wrong Answer[4] : (RX, CX) = (3, 2), (RP, CP) = (4, 1)\"。", "hint": "### 限制\n\n所有输入数据满足以下条件：\n\n- $1 \\leq R \\leq 200$\n- $1 \\leq C \\leq 200$\n- $1 \\leq R_S \\leq R$\n- $1 \\leq C_S \\leq C$\n- $1 \\leq X \\leq 1\\,000\\,000\\,000$\n\n---\n\n### 子任务\n\n#### 子任务 1 [20 分]\n\n满足以下条件：\n\n- $R \\leq 50$\n- $C \\leq 50$\n\n#### 子任务 2 [80 分]\n\n无额外限制\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14442", "type": "P", "difficulty": 4, "samples": [["7\n3 3 6 5\n7 2 8 8\n4 5 3 9\n1 8 7 2\n1 8 8 4\n3 7 4 5\n2 5 1 2", "257"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "JOISC/JOIST（日本）"], "title": "[JOISC 2013] 礼物 / Presents", "background": "", "description": "JOI 学园每年在白色情人节期间会举行点心交换会。今年的交换会有 $N$ 名学生参加，学生编号为 $1$ 到 $N$。每名学生为除自己外的另一名学生制作饼干或蛋糕中的一种。编号为 $i$ 的学生向编号为 $A_i$ 的学生赠送 $B_i$ 个自制的点心。\n\n不同学生对收到的点心种类有不同偏好：有的希望收到与自己制作的种类相同的点心以进行口味研究，有的则希望收到不同种类的点心（若自制饼干则希望收到蛋糕，自制蛋糕则希望收到饼干）以增添乐趣。编号为 $i$ 的学生每收到一个与自己制作种类相同的点心，其 **喜悦值** 增加 $C_i$ 点；每收到一个不同种类的点心，其 **喜悦值** 增加 $D_i$ 点。当 $N$ 名学生合理选择制作饼干或蛋糕时，他们的 **喜悦值** 总和最大可达多少？\n\n### 任务\n\n给定学生赠送点心的对象、数量及喜悦值信息，编写程序计算 **喜悦值** 总和的最大值。\n", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含整数 $N$，表示 JOI 学园的学生人数。\n- 后续 $N$ 行中，第 $i$ 行（$1 \\leq i \\leq N$）包含以空格分隔的整数 $A_i, B_i, C_i, D_i$，表示编号 $i$ 的学生向编号 $A_i$（$1 \\leq A_i \\leq N$，$A_i \\neq i$）的学生赠送 $B_i$ 个点心，且每收到一个同种类点心获得 $C_i$ 点喜悦值，每收到一个不同种类点心获得 $D_i$ 点喜悦值。", "outputFormat": "向标准输出输出一行，表示 $N$ 名学生 **喜悦值** 总和的最大值。", "hint": "### 样例 1 解释\n\n在此示例中，例如，当编号 $1, 2, 5, 6$ 的学生制作饼干，编号 $3, 4, 7$ 的学生制作蛋糕时：\n\n- 编号 $1$ 的学生收到 $8$ 个饼干和 $8$ 个蛋糕，**喜悦值** 为 $88$，\n- 编号 $2$ 的学生收到 $5$ 个蛋糕，**喜悦值** 为 $40$，\n- 编号 $3$ 的学生收到 $10$ 个饼干，**喜悦值** 为 $90$，\n- 编号 $4$ 的学生收到 $5$ 个蛋糕，**喜悦值** 为 $35$，\n- 编号 $5$ 的学生未收到任何点心，**喜悦值** 为 $0$，\n- 编号 $6$ 的学生未收到任何点心，**喜悦值** 为 $0$，\n- 编号 $7$ 的学生收到 $2$ 个饼干，**喜悦值** 为 $4$，\n\n此时 **喜悦值** 总和为 $257$。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $2 \\leq N \\leq 100\\,000$\n- $1 \\leq B_i \\leq 1\\,000\\,000$ ($1 \\leq i \\leq N$)\n- $1 \\leq C_i \\leq 1\\,000\\,000$ ($1 \\leq i \\leq N$)\n- $1 \\leq D_i \\leq 1\\,000\\,000$ ($1 \\leq i \\leq N$)\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n- 满足 $N \\leq 16$\n\n#### 子任务 2 [20 分]\n\n- 满足 $N \\leq 5\\,000$\n\n#### 子任务 3 [70 分]\n\n- 无额外限制\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2013] 礼物 / Presents", "background": "", "description": "JOI 学园每年在白色情人节期间会举行点心交换会。今年的交换会有 $N$ 名学生参加，学生编号为 $1$ 到 $N$。每名学生为除自己外的另一名学生制作饼干或蛋糕中的一种。编号为 $i$ 的学生向编号为 $A_i$ 的学生赠送 $B_i$ 个自制的点心。\n\n不同学生对收到的点心种类有不同偏好：有的希望收到与自己制作的种类相同的点心以进行口味研究，有的则希望收到不同种类的点心（若自制饼干则希望收到蛋糕，自制蛋糕则希望收到饼干）以增添乐趣。编号为 $i$ 的学生每收到一个与自己制作种类相同的点心，其 **喜悦值** 增加 $C_i$ 点；每收到一个不同种类的点心，其 **喜悦值** 增加 $D_i$ 点。当 $N$ 名学生合理选择制作饼干或蛋糕时，他们的 **喜悦值** 总和最大可达多少？\n\n### 任务\n\n给定学生赠送点心的对象、数量及喜悦值信息，编写程序计算 **喜悦值** 总和的最大值。\n", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含整数 $N$，表示 JOI 学园的学生人数。\n- 后续 $N$ 行中，第 $i$ 行（$1 \\leq i \\leq N$）包含以空格分隔的整数 $A_i, B_i, C_i, D_i$，表示编号 $i$ 的学生向编号 $A_i$（$1 \\leq A_i \\leq N$，$A_i \\neq i$）的学生赠送 $B_i$ 个点心，且每收到一个同种类点心获得 $C_i$ 点喜悦值，每收到一个不同种类点心获得 $D_i$ 点喜悦值。", "outputFormat": "向标准输出输出一行，表示 $N$ 名学生 **喜悦值** 总和的最大值。", "hint": "### 样例 1 解释\n\n在此示例中，例如，当编号 $1, 2, 5, 6$ 的学生制作饼干，编号 $3, 4, 7$ 的学生制作蛋糕时：\n\n- 编号 $1$ 的学生收到 $8$ 个饼干和 $8$ 个蛋糕，**喜悦值** 为 $88$，\n- 编号 $2$ 的学生收到 $5$ 个蛋糕，**喜悦值** 为 $40$，\n- 编号 $3$ 的学生收到 $10$ 个饼干，**喜悦值** 为 $90$，\n- 编号 $4$ 的学生收到 $5$ 个蛋糕，**喜悦值** 为 $35$，\n- 编号 $5$ 的学生未收到任何点心，**喜悦值** 为 $0$，\n- 编号 $6$ 的学生未收到任何点心，**喜悦值** 为 $0$，\n- 编号 $7$ 的学生收到 $2$ 个饼干，**喜悦值** 为 $4$，\n\n此时 **喜悦值** 总和为 $257$。\n\n### 限制\n\n所有输入数据满足以下条件：\n\n- $2 \\leq N \\leq 100\\,000$\n- $1 \\leq B_i \\leq 1\\,000\\,000$ ($1 \\leq i \\leq N$)\n- $1 \\leq C_i \\leq 1\\,000\\,000$ ($1 \\leq i \\leq N$)\n- $1 \\leq D_i \\leq 1\\,000\\,000$ ($1 \\leq i \\leq N$)\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n- 满足 $N \\leq 16$\n\n#### 子任务 2 [20 分]\n\n- 满足 $N \\leq 5\\,000$\n\n#### 子任务 3 [70 分]\n\n- 无额外限制\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14443", "type": "P", "difficulty": 6, "samples": [["6 5\n1 2 4\n3 2 6\n1 4 3\n1 6 4\n3 2 6", "-1\n4"], ["8 36\n1 1 2\n1 6 5\n1 7 8\n3 5 6\n1 5 4\n1 8 1\n3 7 2\n3 3 8\n3 1 8\n1 3 2\n1 4 1\n3 8 5\n3 4 3\n2 4\n3 6 8\n1 2 5\n3 6 8\n2 8\n3 1 4\n3 6 8\n3 6 3\n2 3\n3 1 2\n1 4 3\n3 2 6\n1 8 3\n3 1 7\n3 1 6\n3 5 4\n2 2\n2 5\n1 3 6\n1 2 7\n3 1 4\n3 1 5\n3 6 7", "5\n2\n-1\n1\n1\n2\n-1\n5\n4\n-1\n5\n2\n5\n3\n5\n4\n3\n5\n6"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "JOISC/JOIST（日本）"], "title": "[JOISC 2013] 星际飞船 / Spaceships", "background": "", "description": "在宇宙遥远彼端的某个银河系中，存在 $N$ 个拥有发达文明的星球。星球编号为 $1$ 到 $N$。每个星球管理着一艘宇宙飞船，飞船可能处于 **正在前往其他星球** 或 **闲置** 两种状态之一。当星球 $a$ 管理的宇宙飞船正用于前往星球 $b$ 时，该飞船会在星球 $a$ 与 $b$ 之间多次往返。飞船从星球 $a$ 前往星球 $b$ 时，普通旅客可乘船从 $a$ 前往 $b$；但当飞船从星球 $b$ 返回星球 $a$ 时，由于燃料问题或装载货物等原因，普通旅客不可乘船。若星球 $a$ 管理的宇宙飞船处于闲置状态，则该飞船在星球 $a$ 待命。\n\n目前所有宇宙飞船均处于闲置状态。未来的飞船状态变更计划已确定，变更类型如下：\n\n- 将星球 $a$ 管理的闲置宇宙飞船设置为前往星球 $b$ 的状态。此操作仅当普通旅客无法通过多次乘船从星球 $b$ 到达星球 $a$ 时方可执行。\n- 将星球 $a$ 管理的正在使用的宇宙飞船设置为闲置状态。\n\n计划在该银河系旅行的两人为安排会面计划，准备了若干如下形式的查询：\n\n- 在计划的某一时刻，若一人位于星球 $a$，另一人位于星球 $b$，两人能否以普通旅客身份乘宇宙飞船会合？若能，在哪个星球会合所需乘船次数最少？即：是否存在星球 $c$，使得普通旅客可通过多次乘船从星球 $a$ 到达 $c$，且从星球 $b$ 到达 $c$？若存在，哪个星球 $c$ 能使从 $a$ 到 $c$ 与从 $b$ 到 $c$ 的乘船次数之和最小？\n\n作为优秀程序员的你，被要求解答两人的所有查询。\n\n### 任务\n\n给定按时间顺序排列的宇宙飞船状态变更计划与查询，编写程序回答所有查询。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含以空格分隔的整数 $N, Q$，表示星球数量为 $N$，状态变更次数与查询次数之和为 $Q$。\n- 后续 $Q$ 行按时间顺序描述状态变更与查询。其中第 $i$ 行（$1 \\leq i \\leq Q$）包含 $2$ 个或 $3$ 个以空格分隔的整数。记第一个整数为 $T_i$，对应以下情况之一：\n\n(i) 当 $T_i = 1$ 时：\n\n该行包含整数 $T_i, A_i, B_i$，表示以下状态变更：将星球 $A_i$ 管理的宇宙飞船设置为前往星球 $B_i$ 的状态。\n\n保证 $1 \\leq A_i \\leq N$，$1 \\leq B_i \\leq N$，$A_i \\neq B_i$，且此时星球 $A_i$ 管理的宇宙飞船处于闲置状态，且此时普通旅客无法通过多次乘船从星球 $B_i$ 到达星球 $A_i$。\n\n(ii) 当 $T_i = 2$ 时：\n\n该行包含整数 $T_i, A_i$，表示以下状态变更：将星球 $A_i$ 管理的宇宙飞船设置为闲置状态。\n\n保证 $1 \\leq A_i \\leq N$，且此时星球 $A_i$ 管理的宇宙飞船处于使用状态。\n\n(iii) 当 $T_i = 3$ 时：\n\n该行包含整数 $T_i, A_i, B_i$，表示以下查询：此时若一人位于星球 $A_i$，另一人位于星球 $B_i$，两人能否以普通旅客身份乘宇宙飞船会合？若能，在哪个星球会合所需乘船次数最少？\n\n保证 $1 \\leq A_i \\leq N$，$1 \\leq B_i \\leq N$，$A_i \\neq B_i$。", "outputFormat": "向标准输出针对每个查询依次输出一行：\n\n- 若可以会合，输出使乘船次数最少的会合星球编号；\n- 若无法会合，输出整数 $-1$。", "hint": "### 限制\n\n所有输入数据满足以下条件：\n\n- $2 \\leq N \\leq 1\\,000\\,000$\n- $1 \\leq Q \\leq 1\\,000\\,000$\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n满足以下条件：\n\n- $N \\leq 5\\,000$\n- $Q \\leq 5\\,000$\n\n#### 子任务 2 [30 分]\n\n- 满足 $T_i \\neq 2$ ($1 \\leq i \\leq Q$)\n\n#### 子任务 3 [60 分]\n\n无额外限制\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2013] 星际飞船 / Spaceships", "background": "", "description": "在宇宙遥远彼端的某个银河系中，存在 $N$ 个拥有发达文明的星球。星球编号为 $1$ 到 $N$。每个星球管理着一艘宇宙飞船，飞船可能处于 **正在前往其他星球** 或 **闲置** 两种状态之一。当星球 $a$ 管理的宇宙飞船正用于前往星球 $b$ 时，该飞船会在星球 $a$ 与 $b$ 之间多次往返。飞船从星球 $a$ 前往星球 $b$ 时，普通旅客可乘船从 $a$ 前往 $b$；但当飞船从星球 $b$ 返回星球 $a$ 时，由于燃料问题或装载货物等原因，普通旅客不可乘船。若星球 $a$ 管理的宇宙飞船处于闲置状态，则该飞船在星球 $a$ 待命。\n\n目前所有宇宙飞船均处于闲置状态。未来的飞船状态变更计划已确定，变更类型如下：\n\n- 将星球 $a$ 管理的闲置宇宙飞船设置为前往星球 $b$ 的状态。此操作仅当普通旅客无法通过多次乘船从星球 $b$ 到达星球 $a$ 时方可执行。\n- 将星球 $a$ 管理的正在使用的宇宙飞船设置为闲置状态。\n\n计划在该银河系旅行的两人为安排会面计划，准备了若干如下形式的查询：\n\n- 在计划的某一时刻，若一人位于星球 $a$，另一人位于星球 $b$，两人能否以普通旅客身份乘宇宙飞船会合？若能，在哪个星球会合所需乘船次数最少？即：是否存在星球 $c$，使得普通旅客可通过多次乘船从星球 $a$ 到达 $c$，且从星球 $b$ 到达 $c$？若存在，哪个星球 $c$ 能使从 $a$ 到 $c$ 与从 $b$ 到 $c$ 的乘船次数之和最小？\n\n作为优秀程序员的你，被要求解答两人的所有查询。\n\n### 任务\n\n给定按时间顺序排列的宇宙飞船状态变更计划与查询，编写程序回答所有查询。", "inputFormat": "从标准输入读取以下输入数据：\n\n- 第 $1$ 行包含以空格分隔的整数 $N, Q$，表示星球数量为 $N$，状态变更次数与查询次数之和为 $Q$。\n- 后续 $Q$ 行按时间顺序描述状态变更与查询。其中第 $i$ 行（$1 \\leq i \\leq Q$）包含 $2$ 个或 $3$ 个以空格分隔的整数。记第一个整数为 $T_i$，对应以下情况之一：\n\n(i) 当 $T_i = 1$ 时：\n\n该行包含整数 $T_i, A_i, B_i$，表示以下状态变更：将星球 $A_i$ 管理的宇宙飞船设置为前往星球 $B_i$ 的状态。\n\n保证 $1 \\leq A_i \\leq N$，$1 \\leq B_i \\leq N$，$A_i \\neq B_i$，且此时星球 $A_i$ 管理的宇宙飞船处于闲置状态，且此时普通旅客无法通过多次乘船从星球 $B_i$ 到达星球 $A_i$。\n\n(ii) 当 $T_i = 2$ 时：\n\n该行包含整数 $T_i, A_i$，表示以下状态变更：将星球 $A_i$ 管理的宇宙飞船设置为闲置状态。\n\n保证 $1 \\leq A_i \\leq N$，且此时星球 $A_i$ 管理的宇宙飞船处于使用状态。\n\n(iii) 当 $T_i = 3$ 时：\n\n该行包含整数 $T_i, A_i, B_i$，表示以下查询：此时若一人位于星球 $A_i$，另一人位于星球 $B_i$，两人能否以普通旅客身份乘宇宙飞船会合？若能，在哪个星球会合所需乘船次数最少？\n\n保证 $1 \\leq A_i \\leq N$，$1 \\leq B_i \\leq N$，$A_i \\neq B_i$。", "outputFormat": "向标准输出针对每个查询依次输出一行：\n\n- 若可以会合，输出使乘船次数最少的会合星球编号；\n- 若无法会合，输出整数 $-1$。", "hint": "### 限制\n\n所有输入数据满足以下条件：\n\n- $2 \\leq N \\leq 1\\,000\\,000$\n- $1 \\leq Q \\leq 1\\,000\\,000$\n\n### 子任务\n\n#### 子任务 1 [10 分]\n\n满足以下条件：\n\n- $N \\leq 5\\,000$\n- $Q \\leq 5\\,000$\n\n#### 子任务 2 [30 分]\n\n- 满足 $T_i \\neq 2$ ($1 \\leq i \\leq Q$)\n\n#### 子任务 3 [60 分]\n\n无额外限制\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14444", "type": "P", "difficulty": 2, "samples": [["3\n4\n1 2 3 6\n6\n1 1 4 5 1 4\n5\n1 9 1 9 810", "1\n4 \n2\n3 6 \n3\n2 4 5 "]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "ICPC", "西安"], "title": "[ICPC 2025 Xi'an Practice] Great Indices", "background": "", "description": "You are given a sequence $a_1, a_2, \\cdots, a_n$. For each $1 \\leq i \\leq n$, index $i$ is called $\\textit{great}$ if and only if the following holds:\n\n- There is at most one index $1 \\leq j \\leq n$ such that $a_j$ is not a divisor of $a_i$.\n\nYour task is to find all $\\textit{great}$ indices in the sequence.\n\nRecall that an integer $d$ is a divisor of an integer $n$ if and only if there exists an integer $k$ such that $n = d \\times k$.", "inputFormat": "The input consists of multiple test cases. The first line contains an integer $t$ ($1 \\leq t \\leq 10^5$), the number of test cases. For each test case:\n\n- The first line contains a single integer $n$ ($1 \\leq n \\leq 3 \\times 10^5$), representing the length of sequence $a$.\n- The second line contains $n$ integers $a_1, a_2, \\cdots, a_n$ ($1 \\leq a_i \\leq 10^9$), representing the given sequence.\n\nIt is guaranteed that the sum of $n$ over all test cases does not exceed $3 \\times 10^5$.", "outputFormat": "For each test case, output two lines:\n\n- The first line contains a single integer $m$, representing the number of $\\textit{great}$ indices.\n- The second line contains $m$ integers $p_1, p_2, \\cdots, p_m$ ($p_1 < p_2 < \\cdots < p_m$), representing the $\\textit{great}$ indices $\\textbf{in increasing order}$.", "hint": "In the first test case:\n\n- When $i = 1$, the indices $j$ where $a_j$ is not a divisor of $a_i$ are $2$, $3$, and $4$. Since $3 > 1$, index $1$ is not a $\\textit{great}$ index.\n- When $i = 2$, there are two indices, $j = 3$ and $j = 4$, for which $a_j$ is not a divisor of $a_i$.\n- When $i = 3$, there are two indices, $j = 2$ and $j = 4$, for which $a_j$ is not a divisor of $a_i$.\n- When $i = 4$, each of $a_j$ is a divisor of $a_i$, so that index $4$ is a $\\textit{great}$ index.\n\nTherefore, the only $\\textit{great}$ index is $i = 4$.", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 Xi'an Practice] Great Indices", "background": "", "description": "You are given a sequence $a_1, a_2, \\cdots, a_n$. For each $1 \\leq i \\leq n$, index $i$ is called $\\textit{great}$ if and only if the following holds:\n\n- There is at most one index $1 \\leq j \\leq n$ such that $a_j$ is not a divisor of $a_i$.\n\nYour task is to find all $\\textit{great}$ indices in the sequence.\n\nRecall that an integer $d$ is a divisor of an integer $n$ if and only if there exists an integer $k$ such that $n = d \\times k$.", "inputFormat": "The input consists of multiple test cases. The first line contains an integer $t$ ($1 \\leq t \\leq 10^5$), the number of test cases. For each test case:\n\n- The first line contains a single integer $n$ ($1 \\leq n \\leq 3 \\times 10^5$), representing the length of sequence $a$.\n- The second line contains $n$ integers $a_1, a_2, \\cdots, a_n$ ($1 \\leq a_i \\leq 10^9$), representing the given sequence.\n\nIt is guaranteed that the sum of $n$ over all test cases does not exceed $3 \\times 10^5$.", "outputFormat": "For each test case, output two lines:\n\n- The first line contains a single integer $m$, representing the number of $\\textit{great}$ indices.\n- The second line contains $m$ integers $p_1, p_2, \\cdots, p_m$ ($p_1 < p_2 < \\cdots < p_m$), representing the $\\textit{great}$ indices $\\textbf{in increasing order}$.", "hint": "In the first test case:\n\n- When $i = 1$, the indices $j$ where $a_j$ is not a divisor of $a_i$ are $2$, $3$, and $4$. Since $3 > 1$, index $1$ is not a $\\textit{great}$ index.\n- When $i = 2$, there are two indices, $j = 3$ and $j = 4$, for which $a_j$ is not a divisor of $a_i$.\n- When $i = 3$, there are two indices, $j = 2$ and $j = 4$, for which $a_j$ is not a divisor of $a_i$.\n- When $i = 4$, each of $a_j$ is a divisor of $a_i$, so that index $4$ is a $\\textit{great}$ index.\n\nTherefore, the only $\\textit{great}$ index is $i = 4$.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 Xi'an Practice] Great Indices", "background": "", "description": "给定一个序列 $a_1, a_2, \\cdots, a_n$。对于每一个满足 $1 \\leq i \\leq n$ 的下标 $i$，当且仅当以下条件成立时，我们称下标 $i$ 是 **好** 的：\n\n- 至多存在一个下标 $1 \\leq j \\leq n$，使得 $a_j$ 不是 $a_i$ 的约数。\n\n你的任务是找出序列中所有 **好** 的下标。\n\n回忆一下，当且仅当存在一个整数 $k$ 使得 $n = d \\times k$ 时，整数 $d$ 是整数 $n$ 的约数。\n", "inputFormat": "输入包含多个测试用例。第一行包含一个整数 $t$（$1 \\leq t \\leq 10^5$），表示测试用例的数量。对于每个测试用例：\n\n- 第一行包含一个整数 $n$（$1 \\leq n \\leq 3 \\times 10^5$），表示序列 $a$ 的长度。\n- 第二行包含 $n$ 个整数 $a_1, a_2, \\cdots, a_n$（$1 \\leq a_i \\leq 10^9$），表示给定的序列。\n\n保证所有测试用例中 $n$ 的总和不超过 $3 \\times 10^5$。", "outputFormat": "对于每个测试用例，输出两行：\n\n- 第一行输出一个整数 $m$，表示 **好** 的下标的数量。\n- 第二行输出 $m$ 个整数 $p_1, p_2, \\cdots, p_m$（满足 $p_1 < p_2 < \\cdots < p_m$），表示按 **升序** 排列的 **好** 的下标。\n", "hint": "在第一个测试用例中：\n\n- 当 $i = 1$ 时，使得 $a_j$ 不是 $a_i$ 的约数的下标 $j$ 为 $2$、$3$ 和 $4$。由于此类下标数量为 $3 > 1$，因此下标 $1$ 不是 **好** 的下标。\n- 当 $i = 2$ 时，存在两个下标 $j = 3$ 和 $j = 4$，使得 $a_j$ 不是 $a_i$ 的约数。\n- 当 $i = 3$ 时，存在两个下标 $j = 2$ 和 $j = 4$，使得 $a_j$ 不是 $a_i$ 的约数。\n- 当 $i = 4$ 时，所有的 $a_j$ 都是 $a_i$ 的约数，因此下标 $4$ 是 **好** 的。\n\n因此，唯一的 **好** 的下标是 $i = 4$。\n\n翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
