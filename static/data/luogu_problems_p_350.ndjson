{"pid": "P8092", "type": "P", "difficulty": 3, "samples": [["5\n3\n8 10 5\n6\n4 6 4 4 6 4\n3\n0 1 0\n2\n1 2\n3\n10 9 9", "14\n16\n-1\n-1\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "USACO", "2022"], "title": "[USACO22JAN] Drought B", "background": "", "description": "Farmer John 的草地里的草在一场大旱中都干死了。经过数小时的绝望和沉思，Farmer John 想到了一个绝妙的主意，购买玉米来喂养他宝贵的奶牛。\n\nFJ 的 $N$ 头奶牛（$1 \\leq N \\leq 10^5$）排成一行，队伍中的第 $i$ 头奶牛的饥饿度为 $h_i$（$0 \\leq h_i \\leq 10^9$）。由于奶牛是社会性动物，她们坚持一起进食，FJ 降低奶牛饥饿度的唯一方法是选择两头相邻的奶牛 $i$ 和 $i+1$ 并分别喂她们一袋玉米，令她们的饥饿度各减少 1。\n\nFJ 想将他的奶牛喂至所有的奶牛都具有相同的非负饥饿度。请帮助 FJ 求出他喂奶牛达到上述状态所需的最少玉米袋数，或者如果不可能达到，输出 $-1$。", "inputFormat": "每个测试用例包含多个独立的子测试用例，必须全部回答正确才能通过整个测试用例。\n\n输入的第一行包含 $T$（$1\\le T\\le 100$），为你需要求解的子测试用例的数量。\n\n以下是 $T$ 个子测试用例，每个子测试用例包含两行。\n\n第一行包含 $N$，第二行包含 $h_1,h_2,\\ldots,h_N$。输入保证所有子测试用例的 $N$ 之和不超过 $10^5$。\n\n每个子测试用例的 $N$ 的值可能不同。\n", "outputFormat": "输出 $T$ 行，每个测试用例输出一行。", "hint": "【样例解释】\n\n对于第一个子测试用例，给奶牛 $2$ 和 $3$ 各两袋玉米，然后给奶牛 $1$ 和 $2$ 各五袋玉米，可以使得所有奶牛的饥饿度均为 $3$。\n\n对于第二个子测试用例，给奶牛 $1$ 和 $2$ 各两袋玉米，奶牛 $2$ 和 $3$ 各两袋玉米，奶牛 $4$ 和 $5$ 各两袋玉米，奶牛 $5$ 和 $6$ 各两袋玉米，可以使得所有奶牛的饥饿度均为 $2$。\n\n对于余下的子测试用例，均不可能使得奶牛们的饥饿度相等。\n\n【数据范围】\n\n- 测试点 2 的所有子测试用例满足 $N \\leq 3$ 以及 $h_i\\le 100$。\n\n- 测试点 3-8 的所有子测试用例满足 $N\\le 100$ 以及 $h_i\\le 100$。\n\n- 测试点 9-14 的所有子测试用例满足 $N\\le 100$。\n\n- 测试点 15 没有额外限制。\n\n- 此外，测试点 3-5 和 9-11 中的 $N$ 均为偶数，测试点 6-8 和 12-14 中的 $N$ 均为奇数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Drought B", "background": "", "description": "Farmer John 的草地里的草在一场大旱中都干死了。经过数小时的绝望和沉思，Farmer John 想到了一个绝妙的主意，购买玉米来喂养他宝贵的奶牛。\n\nFJ 的 $N$ 头奶牛（$1 \\leq N \\leq 10^5$）排成一行，队伍中的第 $i$ 头奶牛的饥饿度为 $h_i$（$0 \\leq h_i \\leq 10^9$）。由于奶牛是社会性动物，她们坚持一起进食，FJ 降低奶牛饥饿度的唯一方法是选择两头相邻的奶牛 $i$ 和 $i+1$ 并分别喂她们一袋玉米，令她们的饥饿度各减少 1。\n\nFJ 想将他的奶牛喂至所有的奶牛都具有相同的非负饥饿度。请帮助 FJ 求出他喂奶牛达到上述状态所需的最少玉米袋数，或者如果不可能达到，输出 $-1$。", "inputFormat": "每个测试用例包含多个独立的子测试用例，必须全部回答正确才能通过整个测试用例。\n\n输入的第一行包含 $T$（$1\\le T\\le 100$），为你需要求解的子测试用例的数量。\n\n以下是 $T$ 个子测试用例，每个子测试用例包含两行。\n\n第一行包含 $N$，第二行包含 $h_1,h_2,\\ldots,h_N$。输入保证所有子测试用例的 $N$ 之和不超过 $10^5$。\n\n每个子测试用例的 $N$ 的值可能不同。\n", "outputFormat": "输出 $T$ 行，每个测试用例输出一行。", "hint": "【样例解释】\n\n对于第一个子测试用例，给奶牛 $2$ 和 $3$ 各两袋玉米，然后给奶牛 $1$ 和 $2$ 各五袋玉米，可以使得所有奶牛的饥饿度均为 $3$。\n\n对于第二个子测试用例，给奶牛 $1$ 和 $2$ 各两袋玉米，奶牛 $2$ 和 $3$ 各两袋玉米，奶牛 $4$ 和 $5$ 各两袋玉米，奶牛 $5$ 和 $6$ 各两袋玉米，可以使得所有奶牛的饥饿度均为 $2$。\n\n对于余下的子测试用例，均不可能使得奶牛们的饥饿度相等。\n\n【数据范围】\n\n- 测试点 2 的所有子测试用例满足 $N \\leq 3$ 以及 $h_i\\le 100$。\n\n- 测试点 3-8 的所有子测试用例满足 $N\\le 100$ 以及 $h_i\\le 100$。\n\n- 测试点 9-14 的所有子测试用例满足 $N\\le 100$。\n\n- 测试点 15 没有额外限制。\n\n- 此外，测试点 3-5 和 9-11 中的 $N$ 均为偶数，测试点 6-8 和 12-14 中的 $N$ 均为奇数。", "locale": "zh-CN"}}}
{"pid": "P8093", "type": "P", "difficulty": 4, "samples": [["6\n31 13\n12 8\n25 6\n10 24\n1 1\n997 120", "8\n3\n8\n3\n0\n20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "USACO", "2022", "进制"], "title": "[USACO22JAN] Searching for Soulmates S", "background": "", "description": "Farmer John 的每头奶牛都想找到她们的灵魂伴侣——另一头具有相似特点的奶牛，与她们最大程度地相容。每头奶牛的性格由一个整数 $p_i$（$1 \\leq p_i \\leq 10^{18}$）描述。两头性格相同的奶牛就是灵魂伴侣。奶牛可以通过「改变操作」，对她的性格乘以 $2$，除以 $2$（当 $p_i$ 是偶数时），或者加上 $1$。\n\nFarmer John 最初以任意方式配对了他的奶牛。他很好奇为使每对奶牛成为灵魂伴侣需要进行多少次改变操作。对于每对奶牛，求配对中的第一头奶牛所必须进行的最小改变操作次数，从而可以与第二头奶牛成为灵魂伴侣。", "inputFormat": "输入的第一行包含 $N$（$1\\le N\\le 10$），为奶牛配对的数量。以下 $N$ 行每行描述了一对奶牛，包含两个整数，为她们的性格值。第一个整数是需要被改变与另一头奶牛相匹配的奶牛的性格。", "outputFormat": "输出 $N$ 行。对于每一对奶牛，输出第一头奶牛需要进行的最小操作次数，使得她的性格与第二头奶牛相匹配。", "hint": "【样例解释】\n\n对于第一个子测试用例，一个最优的操作序列为 $31 \\implies 32 \\implies 16 \\implies 8 \\implies 9 \\implies 10 \\implies 11 \\implies 12 \\implies 13$。\n\n对于第二个子测试用例，一个最优的操作序列为 $12 \\implies 6 \\implies 7 \\implies 8$.\n\n【数据范围】\n\n- 测试点 1-4 满足 $p_i \\le 10^5$。\n- 测试点 5-12 没有额外限制。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Searching for Soulmates S", "background": "", "description": "Farmer John 的每头奶牛都想找到她们的灵魂伴侣——另一头具有相似特点的奶牛，与她们最大程度地相容。每头奶牛的性格由一个整数 $p_i$（$1 \\leq p_i \\leq 10^{18}$）描述。两头性格相同的奶牛就是灵魂伴侣。奶牛可以通过「改变操作」，对她的性格乘以 $2$，除以 $2$（当 $p_i$ 是偶数时），或者加上 $1$。\n\nFarmer John 最初以任意方式配对了他的奶牛。他很好奇为使每对奶牛成为灵魂伴侣需要进行多少次改变操作。对于每对奶牛，求配对中的第一头奶牛所必须进行的最小改变操作次数，从而可以与第二头奶牛成为灵魂伴侣。", "inputFormat": "输入的第一行包含 $N$（$1\\le N\\le 10$），为奶牛配对的数量。以下 $N$ 行每行描述了一对奶牛，包含两个整数，为她们的性格值。第一个整数是需要被改变与另一头奶牛相匹配的奶牛的性格。", "outputFormat": "输出 $N$ 行。对于每一对奶牛，输出第一头奶牛需要进行的最小操作次数，使得她的性格与第二头奶牛相匹配。", "hint": "【样例解释】\n\n对于第一个子测试用例，一个最优的操作序列为 $31 \\implies 32 \\implies 16 \\implies 8 \\implies 9 \\implies 10 \\implies 11 \\implies 12 \\implies 13$。\n\n对于第二个子测试用例，一个最优的操作序列为 $12 \\implies 6 \\implies 7 \\implies 8$.\n\n【数据范围】\n\n- 测试点 1-4 满足 $p_i \\le 10^5$。\n- 测试点 5-12 没有额外限制。\n\n", "locale": "zh-CN"}}}
{"pid": "P8094", "type": "P", "difficulty": 3, "samples": [["7\n4 3 1 2 5 6 7", "24"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2022", "单调栈"], "title": "[USACO22JAN] Cow Frisbee S", "background": null, "description": "Farmer John 的 $N\\ (N\\le 3\\times 10^5)$ 头奶牛的高度为 $1, 2, \\ldots, N$。一天，奶牛以某个顺序排成一行玩飞盘；令 $h_1 \\ldots h_N$ 表示此顺序下奶牛们的高度（因此 $h$ 是 $1 \\ldots N$ 的一个排列）。\n\n队伍中位于位置 $i$ 和 $j$ 的两头奶牛可以成功地来回扔飞盘当且仅当她们之间的每头奶牛的高度都低于 $\\min(h_i, h_j)$。\n\n请计算所有可以成功地来回扔飞盘的奶牛所在的位置对 $i<j$ 之间的距离总和。位置 $i$ 和 $j$ 之间的距离为 $j-i+1$。", "inputFormat": "输入的第一行包含一个整数 $N$。第二行包含 $h_1 \\ldots h_N$，用空格分隔。", "outputFormat": "输出可以成功地来回扔飞盘的奶牛所在的位置对 $i<j$ 之间的距离总和。注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C 或 C++ 中的 \"long long\"）。", "hint": "【样例解释】\n\n这个例子中可以成功的位置对如下：\n\n```\n(1, 2), (1, 5), (2, 3), (2, 4), (2, 5), (3, 4), (4, 5), (5, 6), (6, 7)\n```\n\n【数据范围】\n\n- 测试点 1-3 满足 $N\\le 5000$。\n\n- 测试点 4-11 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Cow Frisbee S", "background": null, "description": "Farmer John 的 $N\\ (N\\le 3\\times 10^5)$ 头奶牛的高度为 $1, 2, \\ldots, N$。一天，奶牛以某个顺序排成一行玩飞盘；令 $h_1 \\ldots h_N$ 表示此顺序下奶牛们的高度（因此 $h$ 是 $1 \\ldots N$ 的一个排列）。\n\n队伍中位于位置 $i$ 和 $j$ 的两头奶牛可以成功地来回扔飞盘当且仅当她们之间的每头奶牛的高度都低于 $\\min(h_i, h_j)$。\n\n请计算所有可以成功地来回扔飞盘的奶牛所在的位置对 $i<j$ 之间的距离总和。位置 $i$ 和 $j$ 之间的距离为 $j-i+1$。", "inputFormat": "输入的第一行包含一个整数 $N$。第二行包含 $h_1 \\ldots h_N$，用空格分隔。", "outputFormat": "输出可以成功地来回扔飞盘的奶牛所在的位置对 $i<j$ 之间的距离总和。注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C 或 C++ 中的 \"long long\"）。", "hint": "【样例解释】\n\n这个例子中可以成功的位置对如下：\n\n```\n(1, 2), (1, 5), (2, 3), (2, 4), (2, 5), (3, 4), (4, 5), (5, 6), (6, 7)\n```\n\n【数据范围】\n\n- 测试点 1-3 满足 $N\\le 5000$。\n\n- 测试点 4-11 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P8095", "type": "P", "difficulty": 5, "samples": [["8 10\n2 1\n3 4\n2 3\n6 5\n7 8\n6 7\n7 5\n5 8", "1\n1\n3\n2\n8\n4\n6\n5\n7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2022", "网络流", "Special Judge", "图论建模", "构造"], "title": "[USACO22JAN] Cereal 2 S", "background": "", "description": "Farmer John 的奶牛们的早餐最爱当然是麦片了！事实上，奶牛们的胃口是如此之大，每头奶牛一顿饭可以吃掉整整一箱麦片。\n\n最近农场收到了一份快递，内有 $M$ 种不同种类的麦片（$2\\le M\\le 10^5$）。不幸的是，每种麦片只有一箱！$N$ 头奶牛（$1\\le N\\le 10^5$）中的每头都有她最爱的麦片和第二喜爱的麦片。给定一些可选的麦片，奶牛会执行如下的过程：\n\n- 如果她最爱的麦片还在，取走并离开。\n\n- 否则，如果她第二喜爱的麦片还在，取走并离开。\n\n- 否则，她会失望地哞叫一声然后不带走一片麦片地离开。\n\n当你最优地排列这些奶牛时，求饥饿的奶牛的最小数量。同时，求出任意一个可以达到此最小值的 $N$ 头奶牛的排列。\n", "inputFormat": "输入的第一行包含两个空格分隔的整数 $N$ 和 $M$。\n\n对于每一个 $1\\le i\\le N$，第 $i$ 行包含两个空格分隔的整数 $f_i$ 和 $s_i$（$1\\le f_i,s_i\\le M$，且 $f_i\\neq s_i$），为第 $i$ 头奶牛最喜爱和第二喜爱的麦片。", "outputFormat": "输出饥饿的奶牛的最小数量，并输出任意一个可以达到此最小值的 $1\\ldots N$ 的排列。如果有多个符合要求的排列，输出任意一个。", "hint": "【样例解释】\n\n在这个例子中，有 $8$ 头奶牛和 $10$ 种麦片。\n\n注意我们对前三头奶牛独立于后五头奶牛求解，因为她们没有共同喜欢的麦片。\n\n如果前三头奶牛按顺序 $[1,2,3]$ 进行选择，则奶牛 $1$ 会选择麦片 $2$，奶牛 $2$ 会选择麦片 $3$，奶牛 $3$ 会饥饿。\n\n如果前三头奶牛按顺序 $[1,3,2]$ 进行选择，则奶牛 $1$ 会选择麦片 $2$，奶牛 $3$ 会选择麦片 $3$，奶牛 $2$ 会选择麦片 $4$；没有奶牛会饥饿。\n\n当然，还存在其他排列使得前三头奶牛均不饥饿。例如，如果前三头奶牛按顺序 $[3,1,2]$ 选择，则奶牛 $3$ 会选择麦片 $2$，奶牛 $1$ 会选择麦片 $1$，奶牛 $2$ 会选择麦片 $3$；同样，奶牛 $[1,2,3]$ 均不会饥饿。\n\n可以证明在后五头奶牛中，至少一头会饥饿。\n\n【数据范围】\n\n- $14$ 个测试点中的 $4$ 个测试点满足 $N,M\\le 100$。\n\n- $14$ 个测试点中的 $10$ 个测试点没有额外限制。\n\n【说明】\n\n本题采用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/hi36jkwh)。如果对此有疑问或想要 hack，请[私信编写者](https://www.luogu.com.cn/chat?uid=137367)或[发帖](https://www.luogu.com.cn/discuss/lists?forumname=P8095)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Cereal 2 S", "background": "", "description": "Farmer John 的奶牛们的早餐最爱当然是麦片了！事实上，奶牛们的胃口是如此之大，每头奶牛一顿饭可以吃掉整整一箱麦片。\n\n最近农场收到了一份快递，内有 $M$ 种不同种类的麦片（$2\\le M\\le 10^5$）。不幸的是，每种麦片只有一箱！$N$ 头奶牛（$1\\le N\\le 10^5$）中的每头都有她最爱的麦片和第二喜爱的麦片。给定一些可选的麦片，奶牛会执行如下的过程：\n\n- 如果她最爱的麦片还在，取走并离开。\n\n- 否则，如果她第二喜爱的麦片还在，取走并离开。\n\n- 否则，她会失望地哞叫一声然后不带走一片麦片地离开。\n\n当你最优地排列这些奶牛时，求饥饿的奶牛的最小数量。同时，求出任意一个可以达到此最小值的 $N$ 头奶牛的排列。\n", "inputFormat": "输入的第一行包含两个空格分隔的整数 $N$ 和 $M$。\n\n对于每一个 $1\\le i\\le N$，第 $i$ 行包含两个空格分隔的整数 $f_i$ 和 $s_i$（$1\\le f_i,s_i\\le M$，且 $f_i\\neq s_i$），为第 $i$ 头奶牛最喜爱和第二喜爱的麦片。", "outputFormat": "输出饥饿的奶牛的最小数量，并输出任意一个可以达到此最小值的 $1\\ldots N$ 的排列。如果有多个符合要求的排列，输出任意一个。", "hint": "【样例解释】\n\n在这个例子中，有 $8$ 头奶牛和 $10$ 种麦片。\n\n注意我们对前三头奶牛独立于后五头奶牛求解，因为她们没有共同喜欢的麦片。\n\n如果前三头奶牛按顺序 $[1,2,3]$ 进行选择，则奶牛 $1$ 会选择麦片 $2$，奶牛 $2$ 会选择麦片 $3$，奶牛 $3$ 会饥饿。\n\n如果前三头奶牛按顺序 $[1,3,2]$ 进行选择，则奶牛 $1$ 会选择麦片 $2$，奶牛 $3$ 会选择麦片 $3$，奶牛 $2$ 会选择麦片 $4$；没有奶牛会饥饿。\n\n当然，还存在其他排列使得前三头奶牛均不饥饿。例如，如果前三头奶牛按顺序 $[3,1,2]$ 选择，则奶牛 $3$ 会选择麦片 $2$，奶牛 $1$ 会选择麦片 $1$，奶牛 $2$ 会选择麦片 $3$；同样，奶牛 $[1,2,3]$ 均不会饥饿。\n\n可以证明在后五头奶牛中，至少一头会饥饿。\n\n【数据范围】\n\n- $14$ 个测试点中的 $4$ 个测试点满足 $N,M\\le 100$。\n\n- $14$ 个测试点中的 $10$ 个测试点没有额外限制。\n\n【说明】\n\n本题采用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/hi36jkwh)。如果对此有疑问或想要 hack，请[私信编写者](https://www.luogu.com.cn/chat?uid=137367)或[发帖](https://www.luogu.com.cn/discuss/lists?forumname=P8095)。", "locale": "zh-CN"}}}
{"pid": "P8096", "type": "P", "difficulty": 5, "samples": [["3\n9 11 7", "241"], ["4\n6 8 5 9", "137"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2022", "动态规划优化", "前缀和"], "title": "[USACO22JAN] Drought G", "background": "", "description": "Farmer John 的草地里的草在一场大旱中都干死了。经过数小时的绝望和沉思，FJ 想到了一个绝妙的主意，购买玉米来喂养他宝贵的奶牛。\n\nFJ 的 $N$ 头奶牛（$1 \\leq N \\leq 100$）排成一行，队伍中的第 $i$ 头奶牛的饥饿度为一个非负整数 $h_i$。由于 FJ 的奶牛是社会性动物，她们坚持一起进食，FJ 降低奶牛饥饿度的唯一方法是选择两头相邻的奶牛 $i$ 和 $i+1$ 并分别喂她们一袋玉米，令她们的饥饿度各减少 1。\n\nFJ 想将他的奶牛喂至所有的奶牛都具有相同的非负饥饿度。尽管他不知道他的奶牛们具体的饥饿度，他知道每一头奶牛的饥饿度上界；具体地说，第 $i$ 头奶牛的饥饿度 $h_i$ 至多为 $H_i$（$0\\le H_i\\le 1000$）。\n\n你的工作是计算符合上述上界的 $N$ 元组 $[h_1,h_2,\\ldots,h_N]$ 的数量，使得 FJ 有可能达到他的目标，答案对 $10^9+7$ 取模。\n", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $H_1,H_2,\\ldots,H_N$。", "outputFormat": "输出符合条件的饥饿度的 $N$ 元组数量，对 $10^9+7$ 取模。", "hint": "【样例解释】\n\n共有 $(9+1)\\cdot (11+1)\\cdot (7+1)$ 个 $3$ 元组 $h$ 与 $H$ 相符合。\n\n$h=[8,10,5]$ 是其中一个元组。在这个情况中，有可能使得所有的奶牛具有相同的饥饿度：给奶牛 $2$ 和 $3$ 各两袋玉米，然后给奶牛 $1$ 和 $2$ 各五袋玉米，可以使得所有奶牛的饥饿度均为 $3$。\n\n$h=[0,1,0]$ 是另一个元组。在这个情况中，不可能使得奶牛们的饥饿度相等。\n\n【数据范围】\n\n\n- 编号为偶数的测试点中的 $N$ 均为偶数，编号为奇数的测试点中的 $N$ 均为奇数。\n\n- 测试点 3-4 满足 $N\\le 6$ 以及 $H_i \\le 10$。\n\n- 测试点 5-10 满足 $N\\le 50$ 以及 $H_i \\le 100$。\n\n- 测试点 11-20 没有额外限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Drought G", "background": "", "description": "Farmer John 的草地里的草在一场大旱中都干死了。经过数小时的绝望和沉思，FJ 想到了一个绝妙的主意，购买玉米来喂养他宝贵的奶牛。\n\nFJ 的 $N$ 头奶牛（$1 \\leq N \\leq 100$）排成一行，队伍中的第 $i$ 头奶牛的饥饿度为一个非负整数 $h_i$。由于 FJ 的奶牛是社会性动物，她们坚持一起进食，FJ 降低奶牛饥饿度的唯一方法是选择两头相邻的奶牛 $i$ 和 $i+1$ 并分别喂她们一袋玉米，令她们的饥饿度各减少 1。\n\nFJ 想将他的奶牛喂至所有的奶牛都具有相同的非负饥饿度。尽管他不知道他的奶牛们具体的饥饿度，他知道每一头奶牛的饥饿度上界；具体地说，第 $i$ 头奶牛的饥饿度 $h_i$ 至多为 $H_i$（$0\\le H_i\\le 1000$）。\n\n你的工作是计算符合上述上界的 $N$ 元组 $[h_1,h_2,\\ldots,h_N]$ 的数量，使得 FJ 有可能达到他的目标，答案对 $10^9+7$ 取模。\n", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $H_1,H_2,\\ldots,H_N$。", "outputFormat": "输出符合条件的饥饿度的 $N$ 元组数量，对 $10^9+7$ 取模。", "hint": "【样例解释】\n\n共有 $(9+1)\\cdot (11+1)\\cdot (7+1)$ 个 $3$ 元组 $h$ 与 $H$ 相符合。\n\n$h=[8,10,5]$ 是其中一个元组。在这个情况中，有可能使得所有的奶牛具有相同的饥饿度：给奶牛 $2$ 和 $3$ 各两袋玉米，然后给奶牛 $1$ 和 $2$ 各五袋玉米，可以使得所有奶牛的饥饿度均为 $3$。\n\n$h=[0,1,0]$ 是另一个元组。在这个情况中，不可能使得奶牛们的饥饿度相等。\n\n【数据范围】\n\n\n- 编号为偶数的测试点中的 $N$ 均为偶数，编号为奇数的测试点中的 $N$ 均为奇数。\n\n- 测试点 3-4 满足 $N\\le 6$ 以及 $H_i \\le 10$。\n\n- 测试点 5-10 满足 $N\\le 50$ 以及 $H_i \\le 100$。\n\n- 测试点 11-20 没有额外限制。\n", "locale": "zh-CN"}}}
{"pid": "P8097", "type": "P", "difficulty": 4, "samples": [["5 9\nA 1 2\nA 2 3\nD 1\nD 3\nA 2 4\nD 2\nR 2\nR 1\nR 3", "7\n8\n6\n9\n9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "USACO", "并查集", "2022"], "title": "[USACO22JAN] Farm Updates G", "background": "", "description": "Farmer John 经营着总共 $N$ 个农场（$1\\le N\\le 10^5$），编号为 $1\\ldots N$。最初，这些农场之间没有道路连接，并且每个农场都在活跃地生产牛奶。\n\n由于经济的动态性，Farmer John 需要根据 $Q$ 次更新操作（$0\\le Q\\le 2\\cdot 10^5$）对他的农场进行改造。更新操作有三种可能的形式：\n\n- `(D x)` 停用一个活跃的农场 $x$，使其不再生产牛奶。\n\n- `(A x y)` 在两个活跃的农场 $x$ 和 $y$ 之间添加一条道路。\n\n- `(R e)` 删除之前添加的第 $e$ 条道路（$e = 1$ 是添加的第一条道路）。\n\n一个农场 $x$ 如果正在活跃地生产牛奶，或者可以通过一系列道路到达另一个活跃的农场，则称之为一个「有关的」农场。对于每个农场 $x$，计算最大的 $i$（$0\\le i\\le Q$），使得农场 $x$ 在第 $i$ 次更新后是有关的。", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。以下 $Q$ 行每行包含如下格式之一的一次更新操作：\n\n```\nD x\nA x y\nR e\n```\n\n输入保证对于 R 类更新，$e$ 不超过已经添加的道路的数量，并且没有两次 R 类更新具有相等的 $e$ 值。", "outputFormat": "输出 $N$ 行，每行包含一个 $0\\ldots Q$ 范围内的整数。", "hint": "【样例解释】\n\n在这个例子中，道路以顺序 $(2,3), (1,2), (2,4)$ 被删除。\n\n- 农场 $1$ 在道路 $(1,2)$ 被删除之前是有关的。\n\n- 农场 $2$ 在道路 $(2,4)$ 被删除之前是有关的。\n\n- 农场 $3$ 在道路 $(2,3)$ 被删除之前是有关的。\n\n- 农场 $4$ 和 $5$ 在所有更新结束后仍然是活跃的。所以它们一直保持为有关的，两者的输出均应为 $Q$。\n\n【数据范围】\n\n- 测试点 2-5 满足 $N\\le 10^3$，$Q\\le 2\\cdot 10^3$。\n\n- 测试点 6-20 没有额外限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Farm Updates G", "background": "", "description": "Farmer John 经营着总共 $N$ 个农场（$1\\le N\\le 10^5$），编号为 $1\\ldots N$。最初，这些农场之间没有道路连接，并且每个农场都在活跃地生产牛奶。\n\n由于经济的动态性，Farmer John 需要根据 $Q$ 次更新操作（$0\\le Q\\le 2\\cdot 10^5$）对他的农场进行改造。更新操作有三种可能的形式：\n\n- `(D x)` 停用一个活跃的农场 $x$，使其不再生产牛奶。\n\n- `(A x y)` 在两个活跃的农场 $x$ 和 $y$ 之间添加一条道路。\n\n- `(R e)` 删除之前添加的第 $e$ 条道路（$e = 1$ 是添加的第一条道路）。\n\n一个农场 $x$ 如果正在活跃地生产牛奶，或者可以通过一系列道路到达另一个活跃的农场，则称之为一个「有关的」农场。对于每个农场 $x$，计算最大的 $i$（$0\\le i\\le Q$），使得农场 $x$ 在第 $i$ 次更新后是有关的。", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。以下 $Q$ 行每行包含如下格式之一的一次更新操作：\n\n```\nD x\nA x y\nR e\n```\n\n输入保证对于 R 类更新，$e$ 不超过已经添加的道路的数量，并且没有两次 R 类更新具有相等的 $e$ 值。", "outputFormat": "输出 $N$ 行，每行包含一个 $0\\ldots Q$ 范围内的整数。", "hint": "【样例解释】\n\n在这个例子中，道路以顺序 $(2,3), (1,2), (2,4)$ 被删除。\n\n- 农场 $1$ 在道路 $(1,2)$ 被删除之前是有关的。\n\n- 农场 $2$ 在道路 $(2,4)$ 被删除之前是有关的。\n\n- 农场 $3$ 在道路 $(2,3)$ 被删除之前是有关的。\n\n- 农场 $4$ 和 $5$ 在所有更新结束后仍然是活跃的。所以它们一直保持为有关的，两者的输出均应为 $Q$。\n\n【数据范围】\n\n- 测试点 2-5 满足 $N\\le 10^3$，$Q\\le 2\\cdot 10^3$。\n\n- 测试点 6-20 没有额外限制。\n", "locale": "zh-CN"}}}
{"pid": "P8098", "type": "P", "difficulty": 6, "samples": [["6\n2 2 4 5 6 6", "6\n1\n6\n17\n22\n27\n32"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "2022", "Special Judge", "构造"], "title": "[USACO22JAN] Tests for Haybales G", "background": "", "description": "Farmer John 的奶牛们决定为 Farmer Nhoj 农场的奶牛们举办一场编程竞赛。为了使问题尽可能有趣，他们花费了大量时间来构造具有挑战性的测试用例。特别是对于一个问题，「Haybales」，奶牛们需要你的帮助来设计具有挑战性的测试用例。这有关解决以下这个有些奇妙的问题：\n\n有一个有序整数数组 $x_1 \\leq x_2 \\leq \\dotsb \\leq x_N$（$1 \\leq N \\leq 10^5$），和一个整数 $K$。你不知道这个数组以及 $K$，但你知道对于每个索引 $i$ 使得 $x_{j_i} \\leq x_i + K$ 的最大索引 $j_i$。保证有 $i\\le j_i$ 以及 $j_1\\le j_2\\le \\cdots \\le j_N\\le N$。\n\n给定这些信息，Farmer John 的奶牛需要构造任意一个数组以及整数 $K$ 与该信息一致。构造需要满足对于所有 $i$ 有 $0 \\leq x_i \\leq 10^{18}$，并且 $1 \\leq K \\leq 10^{18}$。\n\n可以证明这一定是可行的。请帮助 Farmer John 的奶牛们解决这一问题！", "inputFormat": "输入的第一行包含 $N$。第二行包含 $j_1,j_2,\\ldots,j_N$。", "outputFormat": "输出 $K$，然后在下一行输出 $x_1,\\ldots,x_N$。任何合法的输出均正确。", "hint": "【样例解释】\n\n输出样例为数组 $a=[1,6,17,22,27,32]$ 以及 $K=6$。 $j_1=2$ 被满足是由于 $a_2=6 \\le 1+6=a_1+K$ 而 $a_3=17>1+6=a_1+K$，从而 $a_2$ 是最大的不超过 $a_1+K$ 的元素。类似地：\n\n- $j_2=2$ 被满足是由于 $a_2=6 \\le 6+6$ 而 $a_3=17>6+6$；\n- $j_3=4$ 被满足是由于 $a_4=22 \\le 17+6$ 而 $a_5=27>17+6$；\n- $j_4=5$ 被满足是由于 $a_5=27 \\le 22+6$ 而 $a_5=32>22+6$；\n- $j_5=6$ 被满足是由于 $a_6=32 \\le 27+6$ 且 $a_6$ 是数组的最后一个元素；\n- $j_6=6$ 被满足是由于 $a_6=32 \\le 32+6$ 且 $a_6$ 是数组的最后一个元素。\n\n对于输入样例，这并不是唯一正确的输出。例如，你也可以输出数组 $[1,2,4,5,6,7]$ 和 $K=1$。\n\n【数据范围】\n\n- 所有测试点的 $50\\%$ 满足 $N \\le 5000$。\n- 其余测试点没有额外限制。\n\n【说明】\n\n本题采用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/kzgvkesl)。如果对此有疑问或想要 hack，请[私信编写者](https://www.luogu.com.cn/chat?uid=137367)或[发帖](https://www.luogu.com.cn/discuss/lists?forumname=P8098)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Tests for Haybales G", "background": "", "description": "Farmer John 的奶牛们决定为 Farmer Nhoj 农场的奶牛们举办一场编程竞赛。为了使问题尽可能有趣，他们花费了大量时间来构造具有挑战性的测试用例。特别是对于一个问题，「Haybales」，奶牛们需要你的帮助来设计具有挑战性的测试用例。这有关解决以下这个有些奇妙的问题：\n\n有一个有序整数数组 $x_1 \\leq x_2 \\leq \\dotsb \\leq x_N$（$1 \\leq N \\leq 10^5$），和一个整数 $K$。你不知道这个数组以及 $K$，但你知道对于每个索引 $i$ 使得 $x_{j_i} \\leq x_i + K$ 的最大索引 $j_i$。保证有 $i\\le j_i$ 以及 $j_1\\le j_2\\le \\cdots \\le j_N\\le N$。\n\n给定这些信息，Farmer John 的奶牛需要构造任意一个数组以及整数 $K$ 与该信息一致。构造需要满足对于所有 $i$ 有 $0 \\leq x_i \\leq 10^{18}$，并且 $1 \\leq K \\leq 10^{18}$。\n\n可以证明这一定是可行的。请帮助 Farmer John 的奶牛们解决这一问题！", "inputFormat": "输入的第一行包含 $N$。第二行包含 $j_1,j_2,\\ldots,j_N$。", "outputFormat": "输出 $K$，然后在下一行输出 $x_1,\\ldots,x_N$。任何合法的输出均正确。", "hint": "【样例解释】\n\n输出样例为数组 $a=[1,6,17,22,27,32]$ 以及 $K=6$。 $j_1=2$ 被满足是由于 $a_2=6 \\le 1+6=a_1+K$ 而 $a_3=17>1+6=a_1+K$，从而 $a_2$ 是最大的不超过 $a_1+K$ 的元素。类似地：\n\n- $j_2=2$ 被满足是由于 $a_2=6 \\le 6+6$ 而 $a_3=17>6+6$；\n- $j_3=4$ 被满足是由于 $a_4=22 \\le 17+6$ 而 $a_5=27>17+6$；\n- $j_4=5$ 被满足是由于 $a_5=27 \\le 22+6$ 而 $a_5=32>22+6$；\n- $j_5=6$ 被满足是由于 $a_6=32 \\le 27+6$ 且 $a_6$ 是数组的最后一个元素；\n- $j_6=6$ 被满足是由于 $a_6=32 \\le 32+6$ 且 $a_6$ 是数组的最后一个元素。\n\n对于输入样例，这并不是唯一正确的输出。例如，你也可以输出数组 $[1,2,4,5,6,7]$ 和 $K=1$。\n\n【数据范围】\n\n- 所有测试点的 $50\\%$ 满足 $N \\le 5000$。\n- 其余测试点没有额外限制。\n\n【说明】\n\n本题采用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/kzgvkesl)。如果对此有疑问或想要 hack，请[私信编写者](https://www.luogu.com.cn/chat?uid=137367)或[发帖](https://www.luogu.com.cn/discuss/lists?forumname=P8098)。", "locale": "zh-CN"}}}
{"pid": "P8099", "type": "P", "difficulty": 6, "samples": [["5 3\n7\n7\n3\n6\n2", "6\n7\n7\n2\n3"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "二分", "USACO", "2022", "拓扑排序"], "title": "[USACO22JAN] Minimizing Haybales P", "background": "", "description": "Bessie 感到无聊，于是又在 Farmer John 的牛棚里制造麻烦。FJ 有 $N$（$1 \\le N \\le 10^5$）堆草堆。对于每个 $i \\in [1,N]$，第 $i$ 堆草堆有 $h_i$（$1 \\le h_i \\le 10^9$）的草。Bessie 不想让任何的草倒下来，所以她唯一可以执行的操作为：\n\n- 如果两个相邻的草堆的高度相差不超过 $K$（$1 \\le K \\le 10^9$），她可以交换这两堆草堆。\n\nBessie 在一系列这样的操作之后可以得到的的字典序最小的高度序列是什么？", "inputFormat": "输入的第一行包含 $N$ 和 $K$。第 $i+1$ 行包含第 $i$ 堆草堆的高度。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含答案中第 $i$ 堆草堆的高度。", "hint": "【样例解释】\n\n一种 Bessie 可以交换草堆的方式如下：\n\n```plain\n   7 7 3 6 2\n-> 7 7 6 3 2\n-> 7 7 6 2 3\n-> 7 6 7 2 3\n-> 6 7 7 2 3\n```\n\n【数据范围】\n\n- 所有测试点的 $10\\%$ 满足 $N \\le 100$。\n- 所有测试点的另外 $20\\%$ 满足 $N \\le 5000$。\n- 其余 $70\\%$ 的测试点没有额外限制。\n\n供题：Daniel Zhang，Benjamin Qi", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Minimizing Haybales P", "background": "", "description": "Bessie 感到无聊，于是又在 Farmer John 的牛棚里制造麻烦。FJ 有 $N$（$1 \\le N \\le 10^5$）堆草堆。对于每个 $i \\in [1,N]$，第 $i$ 堆草堆有 $h_i$（$1 \\le h_i \\le 10^9$）的草。Bessie 不想让任何的草倒下来，所以她唯一可以执行的操作为：\n\n- 如果两个相邻的草堆的高度相差不超过 $K$（$1 \\le K \\le 10^9$），她可以交换这两堆草堆。\n\nBessie 在一系列这样的操作之后可以得到的的字典序最小的高度序列是什么？", "inputFormat": "输入的第一行包含 $N$ 和 $K$。第 $i+1$ 行包含第 $i$ 堆草堆的高度。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含答案中第 $i$ 堆草堆的高度。", "hint": "【样例解释】\n\n一种 Bessie 可以交换草堆的方式如下：\n\n```plain\n   7 7 3 6 2\n-> 7 7 6 3 2\n-> 7 7 6 2 3\n-> 7 6 7 2 3\n-> 6 7 7 2 3\n```\n\n【数据范围】\n\n- 所有测试点的 $10\\%$ 满足 $N \\le 100$。\n- 所有测试点的另外 $20\\%$ 满足 $N \\le 5000$。\n- 其余 $70\\%$ 的测试点没有额外限制。\n\n供题：Daniel Zhang，Benjamin Qi", "locale": "zh-CN"}}}
{"pid": "P8100", "type": "P", "difficulty": 6, "samples": [["7\n4\n2 2 2 3\n4\n3 3 1 2\n4\n5 3 4 2\n6\n3 3 1 1 2 2\n6\n1 3 3 4 1 2\n6\n4 1 2 3 5 4\n10\n1 5 6 6 6 4 2 3 2 5", "4\n4\n5\n15\n9\n8\n19"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2022"], "title": "[USACO22JAN] Counting Haybales P", "background": "", "description": "如同往常一样，奶牛 Bessie 正在 Farmer John 的牛棚里制造麻烦。FJ 有 $N$（$1 \\le N \\le 5000$）堆草堆。对于每个 $i \\in [1,N]$，第 $i$ 堆草堆有 $h_i$（$1 \\le h_i \\le 10^9$）的草。Bessie 不想让任何的草倒下来，所以她唯一可以执行的操作为：\n\n如果两个相邻的草堆的高度相差恰好为 $1$，她可以将较高的草堆中最上方的草移到较低的草堆之上。\n\n执行有限多次上述操作后，可以得到多少种不同的高度序列，对 $10^9+7$ 取模？两个高度序列被认为是相同的，如果对于所有 $i$，第 $i$ 堆草堆在两者中具有相同数量的草。", "inputFormat": "输入的第一行包含 $T$，为独立的子测试用例的数量，必须全部回答正确才能通过整个测试用例。\n\n每个子测试用例包含 $N$，以及一个 $N$ 个高度的序列。输入保证所有子测试用例的 $N$ 之和不超过 $5000$。", "outputFormat": "输出 $T$ 行，每行输出一个子测试用例的答案。", "hint": "【样例解释】\n\n对于第一个子测试用例，四个可能的高度序列为：\n\n$(2,2,2,3),(2,2,3,2),(2,3,2,2),(3,2,2,2)$\n\n对于第二个子测试用例，四个可能的高度序列为：\n\n$(2,3,3,1),(3,2,3,1),(3,3,2,1),(3,3,1,2)$\n\n【数据范围】\n\n- 测试点 1-3 满足 $N \\le 10$。\n- 测试点 4 满足对于所有 $i$，有 $1 \\le h_i \\le 3$。\n- 测试点 5-7 满足对于所有 $i$，有 $|h_i-i| \\le 1$。\n- 测试点 8-10 满足对于所有 $i$，有 $1 \\le h_i \\le 4$，且 $N \\le 100$。\n- 测试点 11-13 满足 $N \\le 100$。\n- 测试点 14-17 满足 $N \\le 1000$。\n- 测试点 18-21 没有额外限制。\n\n供题：Daniel Zhang", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Counting Haybales P", "background": "", "description": "如同往常一样，奶牛 Bessie 正在 Farmer John 的牛棚里制造麻烦。FJ 有 $N$（$1 \\le N \\le 5000$）堆草堆。对于每个 $i \\in [1,N]$，第 $i$ 堆草堆有 $h_i$（$1 \\le h_i \\le 10^9$）的草。Bessie 不想让任何的草倒下来，所以她唯一可以执行的操作为：\n\n如果两个相邻的草堆的高度相差恰好为 $1$，她可以将较高的草堆中最上方的草移到较低的草堆之上。\n\n执行有限多次上述操作后，可以得到多少种不同的高度序列，对 $10^9+7$ 取模？两个高度序列被认为是相同的，如果对于所有 $i$，第 $i$ 堆草堆在两者中具有相同数量的草。", "inputFormat": "输入的第一行包含 $T$，为独立的子测试用例的数量，必须全部回答正确才能通过整个测试用例。\n\n每个子测试用例包含 $N$，以及一个 $N$ 个高度的序列。输入保证所有子测试用例的 $N$ 之和不超过 $5000$。", "outputFormat": "输出 $T$ 行，每行输出一个子测试用例的答案。", "hint": "【样例解释】\n\n对于第一个子测试用例，四个可能的高度序列为：\n\n$(2,2,2,3),(2,2,3,2),(2,3,2,2),(3,2,2,2)$\n\n对于第二个子测试用例，四个可能的高度序列为：\n\n$(2,3,3,1),(3,2,3,1),(3,3,2,1),(3,3,1,2)$\n\n【数据范围】\n\n- 测试点 1-3 满足 $N \\le 10$。\n- 测试点 4 满足对于所有 $i$，有 $1 \\le h_i \\le 3$。\n- 测试点 5-7 满足对于所有 $i$，有 $|h_i-i| \\le 1$。\n- 测试点 8-10 满足对于所有 $i$，有 $1 \\le h_i \\le 4$，且 $N \\le 100$。\n- 测试点 11-13 满足 $N \\le 100$。\n- 测试点 14-17 满足 $N \\le 1000$。\n- 测试点 18-21 没有额外限制。\n\n供题：Daniel Zhang", "locale": "zh-CN"}}}
{"pid": "P8101", "type": "P", "difficulty": 6, "samples": [["3\n\n2\n-2 0\n1 0\n\n2\n0 -2\n0 1\n\n3\n-5 -5\n5 1\n10 10", "242"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2022", "凸包", "极角排序", "闵可夫斯基和 Minkowski sum"], "title": "[USACO22JAN] Multiple Choice Test P", "background": "", "description": "奶牛们正在参加一个选择题测试。在通常的测试中，对每个问题你的选项会被单独评分然后累加，而在此测试中，你的选项在累加之后再评分。\n\n具体地说，你被给定二维平面上的 $N$（$2 \\le N \\le 10^5$）组整数向量，其中每个向量用一个有序对 $(x,y)$ 表示。从每组中选择一个向量，使向量的总和尽可能远离原点。\n\n输入保证向量的总数不超过 $2 \\times 10^5$。每组至少包含 $2$ 个向量，并且一组内所有向量各不相同。输入同时保证每个 $x$ 和 $y$ 坐标的绝对值不超过 $\\dfrac{10^9}{N}$。", "inputFormat": "输入的第一行包含 $N$，为向量的组数。\n\n每一组的第一行包含 $G$，为组中的向量数。以下 $G$ 行包含组中的向量。相邻组之间用空行分隔。", "outputFormat": "输出最大可能的欧几里得距离的平方。", "hint": "【样例解释】\n\n最优方案是从第一组选择 $(1,0)$，从第二组中选择 $(0,1)$，从第三组选择 $(10,10)$。这些向量之和等于 $(11,11)$，与原点的距离平方等于 $11^2+11^2=242$。\n\n【数据范围】\n\n- 测试点 1-5 中，向量的总数不超过 $10^3$。\n- 测试点 6-9 中，每一组恰好包含 $2$ 个向量。\n- 测试点 10-17 没有额外限制。\n\n供题：Benjamin Qi", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Multiple Choice Test P", "background": "", "description": "奶牛们正在参加一个选择题测试。在通常的测试中，对每个问题你的选项会被单独评分然后累加，而在此测试中，你的选项在累加之后再评分。\n\n具体地说，你被给定二维平面上的 $N$（$2 \\le N \\le 10^5$）组整数向量，其中每个向量用一个有序对 $(x,y)$ 表示。从每组中选择一个向量，使向量的总和尽可能远离原点。\n\n输入保证向量的总数不超过 $2 \\times 10^5$。每组至少包含 $2$ 个向量，并且一组内所有向量各不相同。输入同时保证每个 $x$ 和 $y$ 坐标的绝对值不超过 $\\dfrac{10^9}{N}$。", "inputFormat": "输入的第一行包含 $N$，为向量的组数。\n\n每一组的第一行包含 $G$，为组中的向量数。以下 $G$ 行包含组中的向量。相邻组之间用空行分隔。", "outputFormat": "输出最大可能的欧几里得距离的平方。", "hint": "【样例解释】\n\n最优方案是从第一组选择 $(1,0)$，从第二组中选择 $(0,1)$，从第三组选择 $(10,10)$。这些向量之和等于 $(11,11)$，与原点的距离平方等于 $11^2+11^2=242$。\n\n【数据范围】\n\n- 测试点 1-5 中，向量的总数不超过 $10^3$。\n- 测试点 6-9 中，每一组恰好包含 $2$ 个向量。\n- 测试点 10-17 没有额外限制。\n\n供题：Benjamin Qi", "locale": "zh-CN"}}}
{"pid": "P8102", "type": "P", "difficulty": 4, "samples": [["3 2 50\n60 100 70", "270"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["单调队列", "2022", "O2优化"], "title": "「LCOI2022」 Cow Insertion", "background": "Farmer John 迎来了新奶牛——Bessie。每个奶牛都会有一定的开心值，Farmer John 希望 Bessie 能更幸福的生活在这里。", "description": "牛棚里原来有 $n$ 头奶牛，开心值的感染距离 $m$，并且 $a_i$ 表示原来牛棚中第 $i(1\\le i\\le n)$ 头牛的开心值。并且，Bessie 同样拥有一个开心值 $A$。\n\n整个牛棚的开心值是 $\\sum\\limits_{i=1}^{n-m+1}\\ \\max\\limits_{i\\le j\\le i+m-1}\\ a_j$，Bessie 可以住在任意两头牛的中间或起始以及最后。Farmer John 想知道：Bessie 来这里之后，整个牛棚的开心值最大为多少。", "inputFormat": "第一行包含三个整数 $n,m,A$。分别表示为奶牛个数，开心值的感染距离，以及 Bessie 的开心值。\n\n接下来一行，包含 $n$ 个数 $a_i$，表示原来牛棚中第 $i(1\\le i\\le n)$ 头牛的开心值。", "outputFormat": "仅一行，表示 Bessie 来这里之后，整个牛棚的开心值的最大值。", "hint": "【样例解释】\n- 当 Bessie 在第一个位置时（$50,60,100,70$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,50}+\\max\\cases{60,100}+\\max\\cases{100,70}$，即 $60+100+100=260$。\n- 当 Bessie 在第二个位置时（$60,50,100,70$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,50}+\\max\\cases{50,100}+\\max\\cases{100,70}$，即 $60+100+100=260$。\n- 当 Bessie 在第三个位置时（$60,100,50,70$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,100}+\\max\\cases{100,50}+\\max\\cases{50,70}$，即 $100+100+70=270$。\n- 当 Bessie 在第四个位置时（$60,100,70,50$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,100}+\\max\\cases{100,70}+\\max\\cases{70,50}$，即 $70+100+100=270$。\n\n显然，整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{260,260,270,270}=270$。\n\n【数据范围与约定】\n\n|subtask|$n\\le$|分值|\n|:-:|:-:|:-:|\n|$1$|$5\\times10^2$|$10$|\n|$2$|$5\\times10^3$|$20$|\n|$3$|$5\\times10^6$|$70$|\n\n对于 $100\\%$ 的数据，$1\\le m\\le n$，$0\\le a_i, A\\le100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LCOI2022」 Cow Insertion", "background": "Farmer John 迎来了新奶牛——Bessie。每个奶牛都会有一定的开心值，Farmer John 希望 Bessie 能更幸福的生活在这里。", "description": "牛棚里原来有 $n$ 头奶牛，开心值的感染距离 $m$，并且 $a_i$ 表示原来牛棚中第 $i(1\\le i\\le n)$ 头牛的开心值。并且，Bessie 同样拥有一个开心值 $A$。\n\n整个牛棚的开心值是 $\\sum\\limits_{i=1}^{n-m+1}\\ \\max\\limits_{i\\le j\\le i+m-1}\\ a_j$，Bessie 可以住在任意两头牛的中间或起始以及最后。Farmer John 想知道：Bessie 来这里之后，整个牛棚的开心值最大为多少。", "inputFormat": "第一行包含三个整数 $n,m,A$。分别表示为奶牛个数，开心值的感染距离，以及 Bessie 的开心值。\n\n接下来一行，包含 $n$ 个数 $a_i$，表示原来牛棚中第 $i(1\\le i\\le n)$ 头牛的开心值。", "outputFormat": "仅一行，表示 Bessie 来这里之后，整个牛棚的开心值的最大值。", "hint": "【样例解释】\n- 当 Bessie 在第一个位置时（$50,60,100,70$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,50}+\\max\\cases{60,100}+\\max\\cases{100,70}$，即 $60+100+100=260$。\n- 当 Bessie 在第二个位置时（$60,50,100,70$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,50}+\\max\\cases{50,100}+\\max\\cases{100,70}$，即 $60+100+100=260$。\n- 当 Bessie 在第三个位置时（$60,100,50,70$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,100}+\\max\\cases{100,50}+\\max\\cases{50,70}$，即 $100+100+70=270$。\n- 当 Bessie 在第四个位置时（$60,100,70,50$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,100}+\\max\\cases{100,70}+\\max\\cases{70,50}$，即 $70+100+100=270$。\n\n显然，整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{260,260,270,270}=270$。\n\n【数据范围与约定】\n\n|subtask|$n\\le$|分值|\n|:-:|:-:|:-:|\n|$1$|$5\\times10^2$|$10$|\n|$2$|$5\\times10^3$|$20$|\n|$3$|$5\\times10^6$|$70$|\n\n对于 $100\\%$ 的数据，$1\\le m\\le n$，$0\\le a_i, A\\le100$。", "locale": "zh-CN"}}}
{"pid": "P8103", "type": "P", "difficulty": 4, "samples": [["3\n4\n1 2 3 2\n5\n3 9 6 18 12\n5\n2 3 5 7 11", "YES\n4\n3 1\n1 2\n3 4\n2 4\nYES\n6\n2 1\n1 2\n4 3\n2 3\n4 5\n3 5\nNO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "Special Judge"], "title": "「LCOI2022」 Cow Merger", "background": "Bessie 来到她的新家之后，Farmer John 突然意识到自己农场的大小不够了！\n\n所以，Farmer John 需要把所有的奶牛合并到一个牛棚里。", "description": "Farmer John 的农场里本来有 $n$ 个牛棚，第 $i$ 个牛棚里住着 $a_i$ 只牛。\n\n我们定义一次合并 $i,j(a_i\\ge a_j)$ 两个牛棚的操作为：从 $i$ 号牛棚中拿出 $a_j$ 头牛，放入 $j$ 号牛棚中。如果在合并结束后 $a_i=0$，那么可以看做 $a_i$ 被合并了，接下来的操作也与 $a_i$ 无关。\n\n由于时间不够了，他决定最多你 $1$ 秒的时间。", "inputFormat": "第一行包含一个整数 $T$，表示数据组数。  \n\n对于第 $t$ 组数据:\n\n第 $2t$ 行包含一个整数 $n$。\n\n第 $2t+1$ 行包含 $n$ 个整数，第 $i$ 个整数为 $a_i$。 ", "outputFormat": "对于每组数据：  \n\n如果你发现自己不可能达到目标，输出 `NO`，否则输出 `YES`。\n\n接下来一行，输出一个整数 $m$ 表示操作次数。\n\n接下来 $m$ 行，每行输出两个数 $i$ 和 $j$（注意操作时应满足 $a_i \\ge a_j$）。\n\n**有多解时可输出任意一组解。**", "hint": "【数据范围与约定】\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 5$，$1 \\leq n \\leq  10^5$，$0 \\leq a_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LCOI2022」 Cow Merger", "background": "Bessie 来到她的新家之后，Farmer John 突然意识到自己农场的大小不够了！\n\n所以，Farmer John 需要把所有的奶牛合并到一个牛棚里。", "description": "Farmer John 的农场里本来有 $n$ 个牛棚，第 $i$ 个牛棚里住着 $a_i$ 只牛。\n\n我们定义一次合并 $i,j(a_i\\ge a_j)$ 两个牛棚的操作为：从 $i$ 号牛棚中拿出 $a_j$ 头牛，放入 $j$ 号牛棚中。如果在合并结束后 $a_i=0$，那么可以看做 $a_i$ 被合并了，接下来的操作也与 $a_i$ 无关。\n\n由于时间不够了，他决定最多你 $1$ 秒的时间。", "inputFormat": "第一行包含一个整数 $T$，表示数据组数。  \n\n对于第 $t$ 组数据:\n\n第 $2t$ 行包含一个整数 $n$。\n\n第 $2t+1$ 行包含 $n$ 个整数，第 $i$ 个整数为 $a_i$。 ", "outputFormat": "对于每组数据：  \n\n如果你发现自己不可能达到目标，输出 `NO`，否则输出 `YES`。\n\n接下来一行，输出一个整数 $m$ 表示操作次数。\n\n接下来 $m$ 行，每行输出两个数 $i$ 和 $j$（注意操作时应满足 $a_i \\ge a_j$）。\n\n**有多解时可输出任意一组解。**", "hint": "【数据范围与约定】\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 5$，$1 \\leq n \\leq  10^5$，$0 \\leq a_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8104", "type": "P", "difficulty": 7, "samples": [["30", "1\n48\n108\n27\n0\n0\n0\n0"], ["114514", "1\n32826\n344727\n1199826\n1504818\n538731\n25515\n0\n"]], "limits": {"time": [500, 500, 1000, 1000, 1000, 1000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "数论", "O2优化", "素数判断,质数,筛法"], "title": "「LCOI2022」 Cow Function", "background": "Bessie 和大家正坐在刚刚合并完成的牛棚里，跟着 Farmer John 在一起学习循环展开。\n\nFarmer John 说，如果一个循环展开的步长为 $8$，会对程序效率有很大的提升。\n\n课后，Farmer John 布置了一道题，要求在 $1$ 秒内算出 $f(x)=\\sum\\limits_{i=1}^x3^{\\omega(i)}$。Bessie 用 $20$ 分钟打了一个 $Θ(n\\log_2 n\\sqrt n)$ 代码，一交直接 TLE。于是，Bessie 来向你求助。", "description": "她想要求出对于 $k\\in\\{0,1,\\dots,7\\}$，$f(n)=\\sum_{i=1}\\limits^n[\\omega(i)\\equiv k\\pmod 8]3^{\\omega(i)}$ 的值。\n\n上面的算式中，$\\omega(i)$ 表示 $i$ 含有几种质因子，例如 $\\omega(12)=\\omega(6)=2,\\omega(114514)=3$。", "inputFormat": "仅一行，包含一个整数 $n$。", "outputFormat": "共 $8$ 行，分别输出 $k=0,1,2,3,4,5,6,7$ 时 $f(n)=\\sum_{i=1}\\limits^n[\\omega(i)\\equiv k \\pmod 8]3^{\\omega(i)}$ 的值。", "hint": "【数据规模与约定】\n|subtask|$n\\le$|所占分值|时间限制|\n|:-:|:-:|:-:|:-:|\n|$1$|$100$|$10$|$500\\texttt{ms}$|\n|$2$|$2\\times10^6$|$20$|$1000\\texttt{ms}$|\n|$3$|$3\\times10^7$|$20$|$1000\\texttt{ms}$|\n|$4$|$10^9$|$20$|$4000\\texttt{ms}$|\n|$5$|$10^{10}$|$30$|$4000\\texttt{ms}$|\n\n\n\n如果你需要循环展开生成器，请前往附件下载。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LCOI2022」 Cow Function", "background": "Bessie 和大家正坐在刚刚合并完成的牛棚里，跟着 Farmer John 在一起学习循环展开。\n\nFarmer John 说，如果一个循环展开的步长为 $8$，会对程序效率有很大的提升。\n\n课后，Farmer John 布置了一道题，要求在 $1$ 秒内算出 $f(x)=\\sum\\limits_{i=1}^x3^{\\omega(i)}$。Bessie 用 $20$ 分钟打了一个 $Θ(n\\log_2 n\\sqrt n)$ 代码，一交直接 TLE。于是，Bessie 来向你求助。", "description": "她想要求出对于 $k\\in\\{0,1,\\dots,7\\}$，$f(n)=\\sum_{i=1}\\limits^n[\\omega(i)\\equiv k\\pmod 8]3^{\\omega(i)}$ 的值。\n\n上面的算式中，$\\omega(i)$ 表示 $i$ 含有几种质因子，例如 $\\omega(12)=\\omega(6)=2,\\omega(114514)=3$。", "inputFormat": "仅一行，包含一个整数 $n$。", "outputFormat": "共 $8$ 行，分别输出 $k=0,1,2,3,4,5,6,7$ 时 $f(n)=\\sum_{i=1}\\limits^n[\\omega(i)\\equiv k \\pmod 8]3^{\\omega(i)}$ 的值。", "hint": "【数据规模与约定】\n|subtask|$n\\le$|所占分值|时间限制|\n|:-:|:-:|:-:|:-:|\n|$1$|$100$|$10$|$500\\texttt{ms}$|\n|$2$|$2\\times10^6$|$20$|$1000\\texttt{ms}$|\n|$3$|$3\\times10^7$|$20$|$1000\\texttt{ms}$|\n|$4$|$10^9$|$20$|$4000\\texttt{ms}$|\n|$5$|$10^{10}$|$30$|$4000\\texttt{ms}$|\n\n\n\n如果你需要循环展开生成器，请前往附件下载。", "locale": "zh-CN"}}}
{"pid": "P8105", "type": "P", "difficulty": 5, "samples": [["3 7\n1 1\n1 3\n3 1\n1 1 2 1 -2\n4 1 3\n2 1 3 2 0 270\n4 1 2\n3 1 2 2 2 2 1\n4 1 3\n4 3 3", "2.3333333333 0.3333333333\n2.0000000000 0.0000000000\n1.6666666667 -1.0000000000\n1.0000000000 1.0000000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "2022", "Special Judge", "O2优化"], "title": "「LCOI2022」 Cow Dance", "background": "Bessie 带着他的奶牛姐妹们来跳舞了。\n\n她们已经规划好了跳舞的步骤，但是为了更加美观，她们需要知道其中一些头奶牛在某时的平均位置，已达到更完美的表演效果。\n\n不幸的是，由于 Bessie 的姐妹太多了，最多会有 $8\\times 10^4$ 只奶牛同时来跳舞。她没有什么方便且快速的方法算这些平均位置，所以向你求助。", "description": "Bessie 和她的姐妹们已经排好了位置，第 $i$ 头奶牛的坐标为 $(x_i,y_i)$。其中，$x_i$ 是 $x$ 轴坐标，$y_i$ 是 $y$ 轴坐标。\n\n她们的舞蹈队形会有这几种变换方式：\n1. 移动：$x$ 到 $y$ 号奶牛的 $x_i\\to x_i+a$，$y_i\\to y_i+b$。\n1. 旋转：$x$ 到 $y$ 号奶牛以 $(a,b)$ 为旋转中心顺时针旋转 $g°$。\n1. 散开: $x$ 到 $y$ 号奶牛以 $(a,b)$ 为中心散开为 $\\dfrac{p}{q}$ 倍。即设之前奶牛坐标为 $A$，散开后坐标为 $B$，$(a,b)$ 为 $G$，$\\overrightarrow{GB}=\\dfrac{p}{q}\\overrightarrow{GA}$。\n\nBessie 想知道：对于 $x$ 到 $y$ 号奶牛，他们的平均位置 $(\\frac{\\sum\\limits^y_{i=x}x_i}{y-x+1},\\frac{\\sum\\limits^y_{i=x}y_i}{y-x+1})$。\n\n舞会就要开始了，所以她只能给你 $\\texttt{1s}$ 的时间。", "inputFormat": "第一行两个整数，$n,m$。\n\n接下来 $n$ 行，每行两个整数 $x_i,y_i$，表示第 $i(1\\le i\\le n)$ 个点的坐标\n\n接下来 $m$ 行，每行第一个整数为 $opt$。\n\n若 $opt=1$，则接下来包含四个整数 $x,y,a,b$，进行一次移动操作。\n\n若 $opt=2$，则接下来包含五个整数 $x,y,a,b,g$，进行一次旋转操作。\n\n若 $opt=3$，则接下来包含六个整数 $x,y,a,b,p,q$，进行一次散开操作。\n\n若 $opt=4$，则接下来包含两个整数 $x,y$，表示询问编号为 $x \\sim y$ 的奶牛的平均位置。", "outputFormat": "即询问结果，以换行隔开，答案误差允许在 $10^{-4}$ 的范围内。", "hint": "【样例解释】\n![](https://cdn.luogu.com.cn/upload/image_hosting/3jt6apa4.png)\n\n$0$ 为初始情况。$1$ 为进行样例中 `1 1 2 1 -2` 操作后结果。$2$ 为进行样例中 `2 1 3 2 0 270` 操作后结果。$3$ 为进行样例中 `3 1 2 2 2 2 1` 操作后结果。\n\n【数据范围与约定】\n\n保证运算时所有数的绝对值小于或等于 $10^{15}$。\n\n|subtask|特殊限制|分数|\n|:-:|:-:|:-:|\n|$1$|$1\\le n,m\\le10^3$|$8$|\n|$2$|只有旋转操作且都按奶牛为旋转中心|$18$|\n|$3$|只有散开操作且都按奶牛为位似中心|$18$|\n|$4$|没有旋转和散开操作|$8$|\n|$5$|对于所有操作和询问 $x=y$|$18$|\n|$6$|旋转中心和散开中心都是奶牛|$8$|\n|$7$|$1\\le n,m\\le 8\\times10^4$|$10$|\n|$8$|没有特殊限制|$12$|\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le3\\times10^5$，$1\\le x\\le y\\le n$，$-32768\\le a,b<32768$，$0< \\dfrac{p}{q}\\le 233333$，$0\\le g\\le359$，初始坐标限制同 $a,b$。\n\n### **注：**\n- **请注意常数因子优化。**\n- **此题输入输出量较大，建议使用 `scanf` 和 `printf`。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LCOI2022」 Cow Dance", "background": "Bessie 带着他的奶牛姐妹们来跳舞了。\n\n她们已经规划好了跳舞的步骤，但是为了更加美观，她们需要知道其中一些头奶牛在某时的平均位置，已达到更完美的表演效果。\n\n不幸的是，由于 Bessie 的姐妹太多了，最多会有 $8\\times 10^4$ 只奶牛同时来跳舞。她没有什么方便且快速的方法算这些平均位置，所以向你求助。", "description": "Bessie 和她的姐妹们已经排好了位置，第 $i$ 头奶牛的坐标为 $(x_i,y_i)$。其中，$x_i$ 是 $x$ 轴坐标，$y_i$ 是 $y$ 轴坐标。\n\n她们的舞蹈队形会有这几种变换方式：\n1. 移动：$x$ 到 $y$ 号奶牛的 $x_i\\to x_i+a$，$y_i\\to y_i+b$。\n1. 旋转：$x$ 到 $y$ 号奶牛以 $(a,b)$ 为旋转中心顺时针旋转 $g°$。\n1. 散开: $x$ 到 $y$ 号奶牛以 $(a,b)$ 为中心散开为 $\\dfrac{p}{q}$ 倍。即设之前奶牛坐标为 $A$，散开后坐标为 $B$，$(a,b)$ 为 $G$，$\\overrightarrow{GB}=\\dfrac{p}{q}\\overrightarrow{GA}$。\n\nBessie 想知道：对于 $x$ 到 $y$ 号奶牛，他们的平均位置 $(\\frac{\\sum\\limits^y_{i=x}x_i}{y-x+1},\\frac{\\sum\\limits^y_{i=x}y_i}{y-x+1})$。\n\n舞会就要开始了，所以她只能给你 $\\texttt{1s}$ 的时间。", "inputFormat": "第一行两个整数，$n,m$。\n\n接下来 $n$ 行，每行两个整数 $x_i,y_i$，表示第 $i(1\\le i\\le n)$ 个点的坐标\n\n接下来 $m$ 行，每行第一个整数为 $opt$。\n\n若 $opt=1$，则接下来包含四个整数 $x,y,a,b$，进行一次移动操作。\n\n若 $opt=2$，则接下来包含五个整数 $x,y,a,b,g$，进行一次旋转操作。\n\n若 $opt=3$，则接下来包含六个整数 $x,y,a,b,p,q$，进行一次散开操作。\n\n若 $opt=4$，则接下来包含两个整数 $x,y$，表示询问编号为 $x \\sim y$ 的奶牛的平均位置。", "outputFormat": "即询问结果，以换行隔开，答案误差允许在 $10^{-4}$ 的范围内。", "hint": "【样例解释】\n![](https://cdn.luogu.com.cn/upload/image_hosting/3jt6apa4.png)\n\n$0$ 为初始情况。$1$ 为进行样例中 `1 1 2 1 -2` 操作后结果。$2$ 为进行样例中 `2 1 3 2 0 270` 操作后结果。$3$ 为进行样例中 `3 1 2 2 2 2 1` 操作后结果。\n\n【数据范围与约定】\n\n保证运算时所有数的绝对值小于或等于 $10^{15}$。\n\n|subtask|特殊限制|分数|\n|:-:|:-:|:-:|\n|$1$|$1\\le n,m\\le10^3$|$8$|\n|$2$|只有旋转操作且都按奶牛为旋转中心|$18$|\n|$3$|只有散开操作且都按奶牛为位似中心|$18$|\n|$4$|没有旋转和散开操作|$8$|\n|$5$|对于所有操作和询问 $x=y$|$18$|\n|$6$|旋转中心和散开中心都是奶牛|$8$|\n|$7$|$1\\le n,m\\le 8\\times10^4$|$10$|\n|$8$|没有特殊限制|$12$|\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le3\\times10^5$，$1\\le x\\le y\\le n$，$-32768\\le a,b<32768$，$0< \\dfrac{p}{q}\\le 233333$，$0\\le g\\le359$，初始坐标限制同 $a,b$。\n\n### **注：**\n- **请注意常数因子优化。**\n- **此题输入输出量较大，建议使用 `scanf` 和 `printf`。**", "locale": "zh-CN"}}}
{"pid": "P8106", "type": "P", "difficulty": 4, "samples": [["3", "2"], ["6", "10"], ["65535", "459810767"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["2021", "O2优化", "组合数学"], "title": "[Cnoi2021] 数学练习", "background": "「Cnoi2021」Cirno's Easy Round II 热身赛开始了。", "description": "为了让选手们重视文化课，Cirno 特意加入了一道 Kamishirasawa Keine 老师的数学练习：\n\n> 求将一个集合 $\\texttt{U}=\\{1,2,3,\\cdots,n\\}$ 划分成两个子集 $S,T$，使得 $|S|\\notin S,|T|\\notin T$ 的方案数。\n\n由于选手都不会高精度，所以答案只需要对 $998244353$ 取模即可。", "inputFormat": "一行一个整数 $n$。", "outputFormat": "一行，一个整数，表示答案。", "hint": "**样例解释** \n\n#1: 两种合法的划分方案为 $\\{1,3\\},\\{2\\}$ 与 $\\{2\\},\\{1,3\\}$ 。\n\n**数据范围**\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 10^5$。\n\n重收录自 XDUCPC 2021 网络赛 B。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Cnoi2021] 数学练习", "background": "「Cnoi2021」Cirno's Easy Round II 热身赛开始了。", "description": "为了让选手们重视文化课，Cirno 特意加入了一道 Kamishirasawa Keine 老师的数学练习：\n\n> 求将一个集合 $\\texttt{U}=\\{1,2,3,\\cdots,n\\}$ 划分成两个子集 $S,T$，使得 $|S|\\notin S,|T|\\notin T$ 的方案数。\n\n由于选手都不会高精度，所以答案只需要对 $998244353$ 取模即可。", "inputFormat": "一行一个整数 $n$。", "outputFormat": "一行，一个整数，表示答案。", "hint": "**样例解释** \n\n#1: 两种合法的划分方案为 $\\{1,3\\},\\{2\\}$ 与 $\\{2\\},\\{1,3\\}$ 。\n\n**数据范围**\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 10^5$。\n\n重收录自 XDUCPC 2021 网络赛 B。", "locale": "zh-CN"}}}
{"pid": "P8107", "type": "P", "difficulty": 5, "samples": [["4 5", "166374059 166374059 457528662 748683265 457528662"]], "limits": {"time": [1000, 1000, 1000], "memory": [131072, 131072, 131072]}, "tags": ["动态规划 DP", "2021", "O2优化"], "title": "[Cnoi2021] 未来试题", "background": "在 Cnoi2021 验题查重环节中，Cirno 发现在遥远的未来，2077 年蚯蚓科技大学（某不知名外界学校）的新生赛中的一道题竟然意外地与这套试题的某题有着 $9\\%$ 的相似度。\n\n>给你一个正整数 $n$，求等概率生成一个长度为 $n$ 的全排列时，全排列中逆序对数量的期望在$\\bmod 10^9+7$ 的意义下的答案。（2077-xidian-freshman-online Problem.D）\n\n答案显然是 $\\frac{n(n-1)}{4}$。\n\n作为算术天才，Cirno 一眼就看了出来。\n\n但无需担忧，与未来试题相撞不算撞题，所以这道题便出现在了你的面前。", "description": "给你两个正整数 $n,k$。\n\n对 $\\forall i \\in [0,k)$，求等概率生成一个长度为 $n$ 的全排列时，全排列中逆序的个数对 $k$ 取模后，余数为 $i$ 的概率，答案对 $998244353$ 取模。\n", "inputFormat": "一行，输入两个整数 $n,k$。", "outputFormat": "一行，$k$ 个整数，用空格隔开，第 $i$ 个表示全排列中逆序的个数对 $k$ 取模后，余数为 $i-1$ 的概率。", "hint": "\n\n**样例解释**\n\n|逆序对数|排列|\n|-----|-----|\n|0|$(1,2,3,4)$|\n|1|$(1,2,4,3)(1,3,2,4)(2,1,3,4)$|\n|2|$(1,3,4,2)(1,4,2,3)(2,1,4,3)(2,3,1,4)(3,1,2,4)$|\n|3|$(1,4,3,2)(2,3,4,1)(2,4,1,3)(3,1,4,2)(3,2,1,4)(4,1,2,3)$|\n|4|$(2,4,3,1)(3,2,4,1)(3,4,1,2)(4,1,3,2)(4,2,1,3)$|\n|5|$(3,4,2,1)(4,2,3,1)(4,3,1,2)$|\n|6|$(4,3,2,1)$|\n\n**数据范围**\n\n对于 $100\\%$ 的数据保证 $1\\le n\\le 10^5$，$2\\le k\\le1000$。\n\n重收录自 XDUCPC 2021 现场赛 F。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Cnoi2021] 未来试题", "background": "在 Cnoi2021 验题查重环节中，Cirno 发现在遥远的未来，2077 年蚯蚓科技大学（某不知名外界学校）的新生赛中的一道题竟然意外地与这套试题的某题有着 $9\\%$ 的相似度。\n\n>给你一个正整数 $n$，求等概率生成一个长度为 $n$ 的全排列时，全排列中逆序对数量的期望在$\\bmod 10^9+7$ 的意义下的答案。（2077-xidian-freshman-online Problem.D）\n\n答案显然是 $\\frac{n(n-1)}{4}$。\n\n作为算术天才，Cirno 一眼就看了出来。\n\n但无需担忧，与未来试题相撞不算撞题，所以这道题便出现在了你的面前。", "description": "给你两个正整数 $n,k$。\n\n对 $\\forall i \\in [0,k)$，求等概率生成一个长度为 $n$ 的全排列时，全排列中逆序的个数对 $k$ 取模后，余数为 $i$ 的概率，答案对 $998244353$ 取模。\n", "inputFormat": "一行，输入两个整数 $n,k$。", "outputFormat": "一行，$k$ 个整数，用空格隔开，第 $i$ 个表示全排列中逆序的个数对 $k$ 取模后，余数为 $i-1$ 的概率。", "hint": "\n\n**样例解释**\n\n|逆序对数|排列|\n|-----|-----|\n|0|$(1,2,3,4)$|\n|1|$(1,2,4,3)(1,3,2,4)(2,1,3,4)$|\n|2|$(1,3,4,2)(1,4,2,3)(2,1,4,3)(2,3,1,4)(3,1,2,4)$|\n|3|$(1,4,3,2)(2,3,4,1)(2,4,1,3)(3,1,4,2)(3,2,1,4)(4,1,2,3)$|\n|4|$(2,4,3,1)(3,2,4,1)(3,4,1,2)(4,1,3,2)(4,2,1,3)$|\n|5|$(3,4,2,1)(4,2,3,1)(4,3,1,2)$|\n|6|$(4,3,2,1)$|\n\n**数据范围**\n\n对于 $100\\%$ 的数据保证 $1\\le n\\le 10^5$，$2\\le k\\le1000$。\n\n重收录自 XDUCPC 2021 现场赛 F。", "locale": "zh-CN"}}}
{"pid": "P8108", "type": "P", "difficulty": 6, "samples": [["3\n1 1 2\n2 3 1\n3 2 3", "5"], ["5\n2 1 4 4 2\n2 5 5 1 3\n4 1 3 5 1\n3 2 5 3 5\n1 4 4 2 3", "15"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "树状数组", "2021", "O2优化"], "title": "[Cnoi2021] 绀珠传说", "background": "Cirno 编写了一款新的游戏「绀珠传说 ~ Tales of Cyansis Pearl」。\n\n\n游戏示例（样例 #1）:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pxvo35po.png)", "description": "游戏规则如下:\n\n初始有一个 $n\\times n$ 的网格，每个格子内有一颗绀珠。\n\n绀珠共有 $n$ 种颜色，每种颜色的恰有 $n$ 颗，**均匀随机**地分布在 $n\\times n$ 的网格中。\n\n每次玩家可以在网格的底端一行选取若干个连续相同颜色的绀珠并将其消除。\n\n消除后，上层绀珠会受重力影响下落。\n\n玩家重复上述操作直至绀珠全部被消除。游戏结束。\n\n现在，Cirno 给定你游戏绀珠传说的一个**均匀随机**的初始局面，求完成游戏的最小步数。", "inputFormat": "第一行，一个整数 $n$。\n\n以下 $n$ 行，每行 $n$ 个整数，整数的范围为 $[1,n]$。\n\n保证每个整数出现次数恰好为 $n$。", "outputFormat": "一行，一个整数表示最小步数。", "hint": "对于 $100\\%$ 的数据保证 $1 \\le n \\le 1000$。保证数据**随机生成**。\n\n重收录自 XDUCPC 2021 现场赛 J。", "locale": "zh-CN", "translations": {"en": {"title": "[Cnoi2021] Tales of Cyansis Pearl", "background": "Cirno made a new game called “Tales of Cyansis Pearl”.\n\nGame example (Sample #1):\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pxvo35po.png)", "description": "The rules are as follows:\n\nAt the beginning, there is an $n \\times n$ grid, and each cell contains one Cyansis Pearl.\n\nThere are $n$ colors in total. For each color, there are exactly $n$ pearls, distributed **uniformly at random** in the $n \\times n$ grid.\n\nEach time, the player may choose several consecutive pearls of the same color on the bottom row of the grid and remove them.\n\nAfter removal, the pearls above will fall down due to gravity.\n\nThe player repeats the above operation until all pearls are removed. Then the game ends.\n\nNow, Cirno gives you a **uniformly random** initial board of the game Tales of Cyansis Pearl. Find the minimum number of moves to finish the game.", "inputFormat": "The first line contains an integer $n$.\n\nThe following $n$ lines each contain $n$ integers, each in the range $[1, n]$.\n\nIt is guaranteed that each integer appears exactly $n$ times.", "outputFormat": "Output one line containing an integer, the minimum number of moves.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 1000$. The input is guaranteed to be **randomly generated**.\n\nReprinted from XDUCPC 2021 Onsite Contest J.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Cnoi2021] 绀珠传说", "background": "Cirno 编写了一款新的游戏「绀珠传说 ~ Tales of Cyansis Pearl」。\n\n\n游戏示例（样例 #1）:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pxvo35po.png)", "description": "游戏规则如下:\n\n初始有一个 $n\\times n$ 的网格，每个格子内有一颗绀珠。\n\n绀珠共有 $n$ 种颜色，每种颜色的恰有 $n$ 颗，**均匀随机**地分布在 $n\\times n$ 的网格中。\n\n每次玩家可以在网格的底端一行选取若干个连续相同颜色的绀珠并将其消除。\n\n消除后，上层绀珠会受重力影响下落。\n\n玩家重复上述操作直至绀珠全部被消除。游戏结束。\n\n现在，Cirno 给定你游戏绀珠传说的一个**均匀随机**的初始局面，求完成游戏的最小步数。", "inputFormat": "第一行，一个整数 $n$。\n\n以下 $n$ 行，每行 $n$ 个整数，整数的范围为 $[1,n]$。\n\n保证每个整数出现次数恰好为 $n$。", "outputFormat": "一行，一个整数表示最小步数。", "hint": "对于 $100\\%$ 的数据保证 $1 \\le n \\le 1000$。保证数据**随机生成**。\n\n重收录自 XDUCPC 2021 现场赛 J。", "locale": "zh-CN"}}}
{"pid": "P8109", "type": "P", "difficulty": 3, "samples": [["5\n1 2 3 4 5\n2 3 3 3 3", "12"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144]}, "tags": ["贪心", "2021", "O2优化"], "title": "[Cnoi2021] 幻想乡程序设计大赛", "background": "幻想乡，春。\n\n新年的土地吐出稚嫩的幼芽，第一届幻想乡程序设计大赛(Inner-Gensokyo Programming Contest, IGPC)拉开帷幕。作为举办者， Cirno 却有些不得不考虑的事情。\n\n那就是气球的分配问题。\n\n", "description": "本场比赛共有 $n$ 道题，Cirno 已经精确预测了每道题目的 AC 队伍数 $a_1,a_2,a_3,\\cdots,a_n$。但由于经费限制，主办方 $n$ 种颜色的气球分别只准备了 $b_1,b_2,b_3,\\cdots,b_n$ 个。\n\n而 Cirno 需要合理地安排每道题目对应的气球颜色，使得能派发的气球尽可能多。\n\n显然地，每道题目只能对应一种颜色的气球，每种颜色的气球只能对应一道题目，如果一道题有队伍通过但该种颜色的气球已经发完了，则很遗憾，该队拿不到这种气球了。\n\n由于这个问题过于 trival，于是 Cirno 决定将这个任务分配给你。", "inputFormat": "第一行，一个整数 $n$。\n\n第二行，$n$ 个整数，用空格隔开，表示 $\\{a_n\\}$。\n\n第三行，$n$ 个整数，用空格隔开，表示 $\\{b_n\\}$。\n", "outputFormat": "一行，一个整数，表示最多能派发的气球数。", "hint": "**数据范围与约定**\n\n对于 $100\\%$ 的数据保证 $1 \\le n \\le 10^5$，$0 \\le a_i,b_i \\le 10^4$，且 $\\{a_n\\},\\{b_n\\}$ 单调不降。\n\n**子任务**\n\nSubtask1（$60$ points）：$n \\le 8$。\n\nSubtask2（$40$ points）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Cnoi2021] 幻想乡程序设计大赛", "background": "幻想乡，春。\n\n新年的土地吐出稚嫩的幼芽，第一届幻想乡程序设计大赛(Inner-Gensokyo Programming Contest, IGPC)拉开帷幕。作为举办者， Cirno 却有些不得不考虑的事情。\n\n那就是气球的分配问题。\n\n", "description": "本场比赛共有 $n$ 道题，Cirno 已经精确预测了每道题目的 AC 队伍数 $a_1,a_2,a_3,\\cdots,a_n$。但由于经费限制，主办方 $n$ 种颜色的气球分别只准备了 $b_1,b_2,b_3,\\cdots,b_n$ 个。\n\n而 Cirno 需要合理地安排每道题目对应的气球颜色，使得能派发的气球尽可能多。\n\n显然地，每道题目只能对应一种颜色的气球，每种颜色的气球只能对应一道题目，如果一道题有队伍通过但该种颜色的气球已经发完了，则很遗憾，该队拿不到这种气球了。\n\n由于这个问题过于 trival，于是 Cirno 决定将这个任务分配给你。", "inputFormat": "第一行，一个整数 $n$。\n\n第二行，$n$ 个整数，用空格隔开，表示 $\\{a_n\\}$。\n\n第三行，$n$ 个整数，用空格隔开，表示 $\\{b_n\\}$。\n", "outputFormat": "一行，一个整数，表示最多能派发的气球数。", "hint": "**数据范围与约定**\n\n对于 $100\\%$ 的数据保证 $1 \\le n \\le 10^5$，$0 \\le a_i,b_i \\le 10^4$，且 $\\{a_n\\},\\{b_n\\}$ 单调不降。\n\n**子任务**\n\nSubtask1（$60$ points）：$n \\le 8$。\n\nSubtask2（$40$ points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8110", "type": "P", "difficulty": 4, "samples": [["3 0\n1 2 3\n4 5 6", "3"], ["3 3\n1 2 3\n4 5 6", "92160"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "O2优化", "线性代数"], "title": "[Cnoi2021] 矩阵", "background": "Rumia 喜欢矩阵快速幂，而 Cirno 觉得这是平凡的。\n\n为了说服 Rumia，Cirno 提出了这样一个问题。", "description": "给定两个长度为 $n$ 的序列 $\\{a_n\\}$，$\\{b_n\\}$ 与一个整数 $k$。\n\n设矩阵 $A$ 满足 $A_{ij}=a_i\\times b_j$，求 $A^k$ 的所有元素的和在模 $998244353$ 意义下的结果。", "inputFormat": "第一行两个整数 $n$，$k$。\n\n第二行 $n$ 个整数，用空格隔开，表示 $\\{a_n\\}$。\n\n第三行 $n$ 个整数，用空格隔开，表示 $\\{b_n\\}$。", "outputFormat": "一行，一个整数，表示 $A^k$ 的所有元素的和在模 $998244353$ 意义下的结果。", "hint": "**数据范围**\n\n对于 $100\\%$ 的数据保证 $1 \\le n \\le 10^5$，$0\\le k < 998244353$，$|a_i|,|b_i| \\le 10^9$。\n\n**子任务**\n\nSubtask1（10 points）：$n, k \\le 50$。\n\nSubtask2（20 points）：$n \\le 100$。\n\nSubtask3（20 points）：$n \\le 1000$。\n\nSubtask4（50 points）：无特殊限制。\n\n**提示**\n\n矩阵乘法的定义参考[百度百科](https://baike.baidu.com/item/%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95/5446029?fr=aladdin)页面。\n\n本题中 $A^0$ 表示[单位矩阵](https://baike.baidu.com/item/%E5%8D%95%E4%BD%8D%E7%9F%A9%E9%98%B5/8540268?fr=aladdin)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Cnoi2021] 矩阵", "background": "Rumia 喜欢矩阵快速幂，而 Cirno 觉得这是平凡的。\n\n为了说服 Rumia，Cirno 提出了这样一个问题。", "description": "给定两个长度为 $n$ 的序列 $\\{a_n\\}$，$\\{b_n\\}$ 与一个整数 $k$。\n\n设矩阵 $A$ 满足 $A_{ij}=a_i\\times b_j$，求 $A^k$ 的所有元素的和在模 $998244353$ 意义下的结果。", "inputFormat": "第一行两个整数 $n$，$k$。\n\n第二行 $n$ 个整数，用空格隔开，表示 $\\{a_n\\}$。\n\n第三行 $n$ 个整数，用空格隔开，表示 $\\{b_n\\}$。", "outputFormat": "一行，一个整数，表示 $A^k$ 的所有元素的和在模 $998244353$ 意义下的结果。", "hint": "**数据范围**\n\n对于 $100\\%$ 的数据保证 $1 \\le n \\le 10^5$，$0\\le k < 998244353$，$|a_i|,|b_i| \\le 10^9$。\n\n**子任务**\n\nSubtask1（10 points）：$n, k \\le 50$。\n\nSubtask2（20 points）：$n \\le 100$。\n\nSubtask3（20 points）：$n \\le 1000$。\n\nSubtask4（50 points）：无特殊限制。\n\n**提示**\n\n矩阵乘法的定义参考[百度百科](https://baike.baidu.com/item/%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95/5446029?fr=aladdin)页面。\n\n本题中 $A^0$ 表示[单位矩阵](https://baike.baidu.com/item/%E5%8D%95%E4%BD%8D%E7%9F%A9%E9%98%B5/8540268?fr=aladdin)。", "locale": "zh-CN"}}}
{"pid": "P8111", "type": "P", "difficulty": 5, "samples": [["5 2 3 5", "2 3 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2021", "交互题", "Special Judge"], "title": "[Cnoi2021] 区间", "background": "Cirno 有一个区间 $[a,b](1\\le a \\le b \\le n)$，而你的任务是在规定的次数内帮 Rumia 猜出这个区间。\n\n每次，你可向 Cirno 询问一个数字 $k$，而 Cirno 会告诉你这个数字与区间 $[a,b]$ 的关系。", "description": "为了猜到这个区间，你需要实现一个函数 `std::pair<int,int> Guess(int n,int c)`，这个函数的作用是在不超过 $c$ 次询问中猜对 $[1,n]$ 中的一个子闭区间 $[a,b]$，返回值为你最终确定的区间，以 `std::pair<int,int>` 的形式返回。\n\n你可以调用交互库中一个叫做 `Query` 的函数，其原型为 `int Query(int x)`，返回值为：\n\n - 若 $x < a$，返回 $-1$。\n - 若 $x \\in [a,b]$，返回 $0$。\n - 若 $x > b$，返回 $1$。\n\n你调用 `Query` 函数的次数不超过 $c$ 才能得到这个点的分数，否则这个点为 $0$ 分。有关该函数的调用请参考「说明/提示」部分。\n\n在一个测试点中，你的 `Guess` 函数可能被调用多次，最多不超过 $5000$ 次。为了保证你的程序不会超时，你需要额外实现一个函数 `void init()`，这个函数只会在开始时被交互库调用一次。当然，它的实现可以为空。\n\n由于 Rumia 的编译器只支持 C++，所以你只能使用 C++ 语言（包括 C++，C++11，C++14，C++17）来解决本题。", "inputFormat": "样例中输入四个数字 $n$，$a$，$b$，$c$。这些数字你无法读取。", "outputFormat": "样例中给输出三个数字 $l$，$r$，$q$。分别表示你猜的区间与 `Query` 调用测次数。这些你不用输出。", "hint": "**样例解释**\n\n需要求的区间是 $[2,3]$，区间左右端点可能的范围是 $[1,5]$，你最多猜 $5$ 次。\n\n**数据范围与约定**\n\n对于所有数据保证 $1 \\le a \\le b \\le n$；除 SubtaskExtra 外，保证 $1\\le n\\le1500$。\n\n**子任务**\n\nSubtask1（$10$ points）：$c=n$。\n\nSubtask2（$30$ points）：$c=30$。\n\nSubtask3（$30$ points）：$c=22$。\n\nSubtask4（$30$ points）：$c=20$。\n\n**附加任务**\n\nSubtaskExtra（$1$ point）：$1\\le n\\le 10^6$，$c=\\lfloor\\log_2 n\\rfloor+\\lfloor\\log_2 \\frac{4n}{3}\\rfloor$。\n\n本题使用 Special Judge，$100$ 与 $101$ 分均视作 Accepted.\n\n**提示**\n\n如果你不知道怎么解决交互题，可以参考[这题](https://www.luogu.com.cn/problem/P1947)。\n\n本题模板程序与模板交互库见附件中的 `SampleProgram.cpp` 与 `SampleInteractor.cpp`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Cnoi2021] 区间", "background": "Cirno 有一个区间 $[a,b](1\\le a \\le b \\le n)$，而你的任务是在规定的次数内帮 Rumia 猜出这个区间。\n\n每次，你可向 Cirno 询问一个数字 $k$，而 Cirno 会告诉你这个数字与区间 $[a,b]$ 的关系。", "description": "为了猜到这个区间，你需要实现一个函数 `std::pair<int,int> Guess(int n,int c)`，这个函数的作用是在不超过 $c$ 次询问中猜对 $[1,n]$ 中的一个子闭区间 $[a,b]$，返回值为你最终确定的区间，以 `std::pair<int,int>` 的形式返回。\n\n你可以调用交互库中一个叫做 `Query` 的函数，其原型为 `int Query(int x)`，返回值为：\n\n - 若 $x < a$，返回 $-1$。\n - 若 $x \\in [a,b]$，返回 $0$。\n - 若 $x > b$，返回 $1$。\n\n你调用 `Query` 函数的次数不超过 $c$ 才能得到这个点的分数，否则这个点为 $0$ 分。有关该函数的调用请参考「说明/提示」部分。\n\n在一个测试点中，你的 `Guess` 函数可能被调用多次，最多不超过 $5000$ 次。为了保证你的程序不会超时，你需要额外实现一个函数 `void init()`，这个函数只会在开始时被交互库调用一次。当然，它的实现可以为空。\n\n由于 Rumia 的编译器只支持 C++，所以你只能使用 C++ 语言（包括 C++，C++11，C++14，C++17）来解决本题。", "inputFormat": "样例中输入四个数字 $n$，$a$，$b$，$c$。这些数字你无法读取。", "outputFormat": "样例中给输出三个数字 $l$，$r$，$q$。分别表示你猜的区间与 `Query` 调用测次数。这些你不用输出。", "hint": "**样例解释**\n\n需要求的区间是 $[2,3]$，区间左右端点可能的范围是 $[1,5]$，你最多猜 $5$ 次。\n\n**数据范围与约定**\n\n对于所有数据保证 $1 \\le a \\le b \\le n$；除 SubtaskExtra 外，保证 $1\\le n\\le1500$。\n\n**子任务**\n\nSubtask1（$10$ points）：$c=n$。\n\nSubtask2（$30$ points）：$c=30$。\n\nSubtask3（$30$ points）：$c=22$。\n\nSubtask4（$30$ points）：$c=20$。\n\n**附加任务**\n\nSubtaskExtra（$1$ point）：$1\\le n\\le 10^6$，$c=\\lfloor\\log_2 n\\rfloor+\\lfloor\\log_2 \\frac{4n}{3}\\rfloor$。\n\n本题使用 Special Judge，$100$ 与 $101$ 分均视作 Accepted.\n\n**提示**\n\n如果你不知道怎么解决交互题，可以参考[这题](https://www.luogu.com.cn/problem/P1947)。\n\n本题模板程序与模板交互库见附件中的 `SampleProgram.cpp` 与 `SampleInteractor.cpp`。", "locale": "zh-CN"}}}
