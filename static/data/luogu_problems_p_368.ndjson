{"pid": "P8457", "type": "P", "difficulty": 7, "samples": [["0\n10\n7 4\n7\n16 3\n2\n6 1\n2 3\n144 5\n2 3\n2520 11\n2 3 5 7\n999999 2\n3 7 11 13 37\n22511 21795\n22511\n47067727606562827 30911969774113407\n3083 13697 25747 43291\n2147483648 2333333\n2\n675288511488360000 510472780110265817\n2 3 5 7 11", "25\n11\n1\n101\n4811\n219871229\n16139671\n760913896873844308082367046696111\n1221598821\n24445987958110300438937\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["原根", "数论", "洛谷原创", "Special Judge", "O2优化", "扩展欧几里德算法", "中国剩余定理 CRT", "逆元", "洛谷月赛"], "title": "「SWTR-8」幂塔方程", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/iflu3244.png)\n\n图片来自于 Solara570 的 B 站视频 [轻易相信简单直观的结论究竟有多危险？](https://www.bilibili.com/video/BV1PW41177Vb)。\n\n很久以前的某一天，小 A 在 B 站上无意间刷到了这个视频。视频中的无穷幂塔方程及其「简单直观，但暗藏陷阱」的解法令他影响深刻。\n$$\n\\Huge x ^ {x ^ {x ^ {x ^ {x}}}}\n$$", "description": "如果小 A 是一个，一个一个一个毒瘤，他会让你求解套了十层甚至九层的幂塔方程，但他不是。\n\n他想让你求解：\n$$\nx ^ x\\equiv D \\pmod n\n$$\n\n保证 $n$ 的最大质因子不超过 $10 ^ 5$，且 $D$ 与 $n$ 互质。\n\n你需要保证得到的解 $x$ 为 $[0, 2 ^ {125}]$ 范围内的整数。若该范围内无解，输出 $-1$；若存在多解，输出任意一个。\n\n多组测试数据。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行一个整数 $T$，表示数据组数。接下来 $T$ 组测试数据，每组数据形如：\n\n- 第一行两个整数 $n, D$。\n- 第二行若干递增的质数 $p_1, p_2, \\cdots, p_k$，表示 $n$ 的所有质因子。", "outputFormat": "输出 $T$ 行 $[-1, 2 ^ {125}]$ 范围内的整数。", "hint": "**「数据范围与约定」**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（5 points）：$n\\leq 20$。\n- Subtask #2（8 points）：$n\\leq 400$。依赖 Subtask #1。\n- Subtask #3（11 points）：$n$ 是质数，$T\\leq 10 ^ 4$。\n- Subtask #4（15 points）：$\\mu(n) \\neq 0$，$T\\leq 100$。\n- Subtask #5（9 points）：$\\mu(n) \\neq 0$，$T\\leq 10 ^ 4$。依赖 Subtask #4。\n- Subtask #6（13 points）：$n = p ^ k(p \\in \\mathrm{prime})$，$T\\leq 100$。\n- Subtask #7（7 points）：$n = p ^ k(p \\in \\mathrm{prime})$，$T\\leq 10 ^ 4$。依赖 Subtask #3，#6。\n- Subtask #8（6 points）：$n$ 的最大质因子不超过 $ 1064$。依赖 Subtask #2。\n- Subtask #9（16 points）：$n\\leq 10 ^ 9$，$T\\leq 10 ^ 4$。\n- Subtask #10（10 points）：无特殊限制。依赖 Subtask #5，#7，#8，#9。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq T\\leq 4\\times 10 ^ 4$。\n- $2\\leq n \\leq 10 ^ {18}$。\n- $1\\leq D < n$，$D\\perp n$。\n- $2\\leq p_1 < p_2 < \\cdots < p_k \\leq 10 ^ 5$。\n\n**「帮助与提示」**\n\n选手可以通过边读入边试除的方式判断何时停止读入 $n$ 的质因子。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) F\n- Idea & Solution：[demonlover923](https://www.luogu.com.cn/user/152997) & [codecode](https://www.luogu.com.cn/user/119526)。\n- Tester：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n\n**Update on 2025.5.30**：本题可以做 $p_k\\leq 10 ^ {18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-8」幂塔方程", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/iflu3244.png)\n\n图片来自于 Solara570 的 B 站视频 [轻易相信简单直观的结论究竟有多危险？](https://www.bilibili.com/video/BV1PW41177Vb)。\n\n很久以前的某一天，小 A 在 B 站上无意间刷到了这个视频。视频中的无穷幂塔方程及其「简单直观，但暗藏陷阱」的解法令他影响深刻。\n$$\n\\Huge x ^ {x ^ {x ^ {x ^ {x}}}}\n$$", "description": "如果小 A 是一个，一个一个一个毒瘤，他会让你求解套了十层甚至九层的幂塔方程，但他不是。\n\n他想让你求解：\n$$\nx ^ x\\equiv D \\pmod n\n$$\n\n保证 $n$ 的最大质因子不超过 $10 ^ 5$，且 $D$ 与 $n$ 互质。\n\n你需要保证得到的解 $x$ 为 $[0, 2 ^ {125}]$ 范围内的整数。若该范围内无解，输出 $-1$；若存在多解，输出任意一个。\n\n多组测试数据。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行一个整数 $T$，表示数据组数。接下来 $T$ 组测试数据，每组数据形如：\n\n- 第一行两个整数 $n, D$。\n- 第二行若干递增的质数 $p_1, p_2, \\cdots, p_k$，表示 $n$ 的所有质因子。", "outputFormat": "输出 $T$ 行 $[-1, 2 ^ {125}]$ 范围内的整数。", "hint": "**「数据范围与约定」**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（5 points）：$n\\leq 20$。\n- Subtask #2（8 points）：$n\\leq 400$。依赖 Subtask #1。\n- Subtask #3（11 points）：$n$ 是质数，$T\\leq 10 ^ 4$。\n- Subtask #4（15 points）：$\\mu(n) \\neq 0$，$T\\leq 100$。\n- Subtask #5（9 points）：$\\mu(n) \\neq 0$，$T\\leq 10 ^ 4$。依赖 Subtask #4。\n- Subtask #6（13 points）：$n = p ^ k(p \\in \\mathrm{prime})$，$T\\leq 100$。\n- Subtask #7（7 points）：$n = p ^ k(p \\in \\mathrm{prime})$，$T\\leq 10 ^ 4$。依赖 Subtask #3，#6。\n- Subtask #8（6 points）：$n$ 的最大质因子不超过 $ 1064$。依赖 Subtask #2。\n- Subtask #9（16 points）：$n\\leq 10 ^ 9$，$T\\leq 10 ^ 4$。\n- Subtask #10（10 points）：无特殊限制。依赖 Subtask #5，#7，#8，#9。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq T\\leq 4\\times 10 ^ 4$。\n- $2\\leq n \\leq 10 ^ {18}$。\n- $1\\leq D < n$，$D\\perp n$。\n- $2\\leq p_1 < p_2 < \\cdots < p_k \\leq 10 ^ 5$。\n\n**「帮助与提示」**\n\n选手可以通过边读入边试除的方式判断何时停止读入 $n$ 的质因子。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) F\n- Idea & Solution：[demonlover923](https://www.luogu.com.cn/user/152997) & [codecode](https://www.luogu.com.cn/user/119526)。\n- Tester：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n\n**Update on 2025.5.30**：本题可以做 $p_k\\leq 10 ^ {18}$。", "locale": "zh-CN"}}}
{"pid": "P8458", "type": "P", "difficulty": 4, "samples": [["2 12\n3 2 3 4\n4 1 2 3 4", "90"], ["3 999999924\n4 4 4 5 3\n7 1 9 1 9 8 1 0\n6 1 1 4 5 1 4", "599517664"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": [], "title": "「REOI-p1」打捞", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/0ukve6wl.png)\n\n出题人：XL4453\n\n验题人：犇犇犇犇\n\n文案：小糯米\n\nupd：注意，先取模再取max", "description": "“别介意，我和那些家伙都是打捞者。我们在头一次追寻梦想降落到地表时，就做好丧命的准备和赴死的觉悟了。”\n\n葛力克一行人在一次打捞中，时来运转，获得了不少的宝藏。在归途之路，言及谁的功劳最大之时，大家却起了冲突。有人说自己的宝藏是史上绝无仅有，是在鬼门关前绕了一大圈才好不容易抢到的一个；有人说自己惨淡经营，虽然没有获得那么珍贵的宝物，但数量可观，也足以与之相提并论；也有人说自己的收获二者兼有，应当综合评价云云：总之，场面一片混乱，颇有生死与共的患难之交从此决裂的危险。\n\n于是，大家把目光投到了葛力克的身上，这让他十分为难。思索良久，他决定这样来评价大家的贡献： \n\n假设一共有 $n$ 名打捞者，第 $i$ 位打捞者 $a_i$ 取得的宝物数量为 $l_i$ ，而其中第 $p$ 件宝物对应的价值则为 $a_{i,p}$ ，那么在计算的时候只需要将每个序列相加求和即可。但是葛力克并不满足于现状，他现在想知道，如果是将两个人的贡献放在一起看待，那么又将如何计算呢？\n一番激烈的头脑风暴后，他决定这样来计算两位打捞者 $i,j$ 之间的贡献 $g(i,j)$ ：将 $a_i$ 与$a_j$ 分别复制数遍使得两堆宝物的数量都为 $k$ ，得到两个序列 $a_i',a_j'$ ，则 $g(i,j)= \\sum\\limits_{p=1}^k a'_{i,p}\\times a'_{j,p}$ 。\n\n现在葛力克想知道，这个贡献值的最大值是多少。\n\n因为贡献值可能会很大，超出了正常生物大脑的运算能力，所以我们对它进行 $998244353$ 的取余。\n\n----------\n形式化题面：给定一个整数 $n$，和 $n$ 个序列，第 $i$ 个序列 $\\{a_i\\}$ 长度为 $l_i$，将每个 $a_i$ 复制 $\\dfrac k{l_i}$ 遍得到 $\\{a'_i\\}$ 使得 $\\{a'_i\\}$ 的长度为 $k$。\n\n试求：$\\max\\limits_{i=1,j=i+1}^{i,j\\leq n}\\{g(i,j)\\bmod 998244353\\}$，其中$g(i,j)= \\sum\\limits_{p=1}^k a'_{i,p}\\times a'_{j,p}$ 。", "inputFormat": "第一行两个整数 $n$，$k$。\n\n接下来输入 $n$ 行。第 $i + 1$ 行第一个数为 $l_i$，接下来输入 $l_i$ 个数，表示打捞者的宝藏 $a_i$。\n", "outputFormat": "一个整数，表示所求的最大值。", "hint": "#### 样例解释 $#1$\n\n$a_1'=2, 3, 4, 2, 3, 4, 2, 3, 4, 2, 3, 4$。  \n$a_2'=1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4$。  \n$g(1,2)=2\\times1+3\\times2+4\\times3+2\\times4+3\\times1+4\\times2+2\\times3+3\\times4+4\\times1+2\\times2+3\\times3+4\\times4=90$。\n\n#### 样例解释 $#2$\n\n$g(1,2)\\bmod998244353=599517664$。  \n$g(1,3)\\bmod998244353=350889018$。  \n$g(2,3)\\bmod998244353=66930325$。  \n$\\max\\limits_{1\\leq i < j \\leq n}\\{g(i,j)\\bmod998244353\\}=599517664$。  \n\n#### 数据范围\n\n对于 $10\\%$ 的数据，有 $n=2$。  \n对于 $30\\%$ 的数据，有 $k \\leq 100$。  \n对于 $60\\%$ 的数据，所有 $l_i$ 两两互质，即 $\\gcd(l_i,l_j)=1(1\\leq i < j \\leq n)$，$\\gcd$ 为[最大公约数](https://oi-wiki.org/math/number-theory/gcd/)。  \n对于 $100\\%$ 的数据，有 $1\\leq n\\le 100，1\\leq l_i\\le 1000，1\\leq k,a_{i,j}\\le 10^{9}$ 且对于任意的 $i \\in [1,n],l_i\\mid k$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-p1」打捞", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/0ukve6wl.png)\n\n出题人：XL4453\n\n验题人：犇犇犇犇\n\n文案：小糯米\n\nupd：注意，先取模再取max", "description": "“别介意，我和那些家伙都是打捞者。我们在头一次追寻梦想降落到地表时，就做好丧命的准备和赴死的觉悟了。”\n\n葛力克一行人在一次打捞中，时来运转，获得了不少的宝藏。在归途之路，言及谁的功劳最大之时，大家却起了冲突。有人说自己的宝藏是史上绝无仅有，是在鬼门关前绕了一大圈才好不容易抢到的一个；有人说自己惨淡经营，虽然没有获得那么珍贵的宝物，但数量可观，也足以与之相提并论；也有人说自己的收获二者兼有，应当综合评价云云：总之，场面一片混乱，颇有生死与共的患难之交从此决裂的危险。\n\n于是，大家把目光投到了葛力克的身上，这让他十分为难。思索良久，他决定这样来评价大家的贡献： \n\n假设一共有 $n$ 名打捞者，第 $i$ 位打捞者 $a_i$ 取得的宝物数量为 $l_i$ ，而其中第 $p$ 件宝物对应的价值则为 $a_{i,p}$ ，那么在计算的时候只需要将每个序列相加求和即可。但是葛力克并不满足于现状，他现在想知道，如果是将两个人的贡献放在一起看待，那么又将如何计算呢？\n一番激烈的头脑风暴后，他决定这样来计算两位打捞者 $i,j$ 之间的贡献 $g(i,j)$ ：将 $a_i$ 与$a_j$ 分别复制数遍使得两堆宝物的数量都为 $k$ ，得到两个序列 $a_i',a_j'$ ，则 $g(i,j)= \\sum\\limits_{p=1}^k a'_{i,p}\\times a'_{j,p}$ 。\n\n现在葛力克想知道，这个贡献值的最大值是多少。\n\n因为贡献值可能会很大，超出了正常生物大脑的运算能力，所以我们对它进行 $998244353$ 的取余。\n\n----------\n形式化题面：给定一个整数 $n$，和 $n$ 个序列，第 $i$ 个序列 $\\{a_i\\}$ 长度为 $l_i$，将每个 $a_i$ 复制 $\\dfrac k{l_i}$ 遍得到 $\\{a'_i\\}$ 使得 $\\{a'_i\\}$ 的长度为 $k$。\n\n试求：$\\max\\limits_{i=1,j=i+1}^{i,j\\leq n}\\{g(i,j)\\bmod 998244353\\}$，其中$g(i,j)= \\sum\\limits_{p=1}^k a'_{i,p}\\times a'_{j,p}$ 。", "inputFormat": "第一行两个整数 $n$，$k$。\n\n接下来输入 $n$ 行。第 $i + 1$ 行第一个数为 $l_i$，接下来输入 $l_i$ 个数，表示打捞者的宝藏 $a_i$。\n", "outputFormat": "一个整数，表示所求的最大值。", "hint": "#### 样例解释 $#1$\n\n$a_1'=2, 3, 4, 2, 3, 4, 2, 3, 4, 2, 3, 4$。  \n$a_2'=1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4$。  \n$g(1,2)=2\\times1+3\\times2+4\\times3+2\\times4+3\\times1+4\\times2+2\\times3+3\\times4+4\\times1+2\\times2+3\\times3+4\\times4=90$。\n\n#### 样例解释 $#2$\n\n$g(1,2)\\bmod998244353=599517664$。  \n$g(1,3)\\bmod998244353=350889018$。  \n$g(2,3)\\bmod998244353=66930325$。  \n$\\max\\limits_{1\\leq i < j \\leq n}\\{g(i,j)\\bmod998244353\\}=599517664$。  \n\n#### 数据范围\n\n对于 $10\\%$ 的数据，有 $n=2$。  \n对于 $30\\%$ 的数据，有 $k \\leq 100$。  \n对于 $60\\%$ 的数据，所有 $l_i$ 两两互质，即 $\\gcd(l_i,l_j)=1(1\\leq i < j \\leq n)$，$\\gcd$ 为[最大公约数](https://oi-wiki.org/math/number-theory/gcd/)。  \n对于 $100\\%$ 的数据，有 $1\\leq n\\le 100，1\\leq l_i\\le 1000，1\\leq k,a_{i,j}\\le 10^{9}$ 且对于任意的 $i \\in [1,n],l_i\\mid k$。\n", "locale": "zh-CN"}}}
{"pid": "P8460", "type": "P", "difficulty": 6, "samples": [["100 3\n1 1\n2 2\n1 2\n5\n5 5\n2 1\n2 1\n5 1\n2 5", "No\nYes\nNo\nNo\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "并查集", "线段树分治"], "title": "「REOI-p1」按摩", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/iojg3sgx.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/5m1v3g37.png)\n\n出题人：LinkyChristian\n\n验题人：Legitimity\n\n文案：小糯米", "description": "\n\n无论是勇者还是妖精，在执行任务时，都难免会患上一些特有的“职业病”。其中，在这份“常见勇者职业病名单”上排名第一的，叫作“急性魔力中毒”。虽然魔力中毒在表面上只是类似于发高烧的症状，但倘若没有每次根除，就会变成痼疾，身体马上就会超出负荷极限。魔力中毒的治疗方案，说起来倒是颇为实在：找到魔力淤积的部位，用力按压，利用类似中医按摩的原理，将其淤积点给揉开。具体的治疗原理如下：\n\n人体的魔力脉络，可以视作一个 $n \\times n$ 的网格。与中医腧穴中的经穴、经外穴分类类似，魔力的作用“穴位”，亦可以大致上分为阴性和阳性。为了更直观的叙述，我们不妨将阳性的魔力穴位在网格上用黑点表示。而魔力出现淤积，大概率的情形下便是因使用魔力导致肌肉紧绷，从而使得本是阴性的穴位变为阳性，或者阳性变为阴性的结果。所谓的按摩，其实就是将其恢复到其应有的状态，从而疏通魔力。判断按摩是否完成的标志，便是在这个网格中，是否存在一个以黑点作为顶点的所有边均平行于网格的多边形。\n\n现在，经过了一场激烈的战斗，珂朵莉因使用魔力过度，又出现了急性魔力中毒的症状。在给珂朵莉检查身体的时候，威廉发现，在珂朵莉的魔力脉络上，有 $m$ 个魔力穴位呈阳性反应。现在他要进行 $k$ 次按摩，每次的按摩都会给出一个点，如果该点的穴位呈阳性则变为阴性，反之则成为阳性。\n\n威廉想知道，在每一次按摩结束后，他的治疗是否已经完成。\n\n------------\n\n形式化题面：给出一个  $n \\times n$ 的网格，其中有 $m$ 个点为黑点。\n\n共有 $k$ 个操作，每次操作使一个点黑白反转。判断在每次操作结束后是否存在一个以黑点作为顶点的所有边均平行于网格的多边形。", "inputFormat": "第一行两个数：$n,m$。  \n接下来 $m$ 行，每行两个数 $x,y$，表示点 $(x,y)$ 为黑点。  \n下一行输入一个数 $k$ ，接下来 $k$ 行，每行两个数 $x,y$ ，表示对点 $(x,y)$ 进行一次操作(即按摩）。", "outputFormat": "输出 $k$ 行，每行一个 `Yes` 或 `No` 表示该次操作后治疗是否完成，即在每次操作结束后是否存在一个以黑点作为顶点的所有边均平行于网格的多边形。", "hint": "对于样例1，初始状态为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ykf02pm6.png)\n\n之后每次操作后状态依次为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lilddgfo.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ml2qqt5d.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lilddgfo.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/altczbf0.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uqvq4u0j.png)\n\n对于 $5\\%$ 的数据，$n\\le 10,m\\le 5,k\\le 100$。  \n对于 $10\\%$ 的数据，$n,k\\le 100$。  \n对于 $20\\%$ 的数据，$n,k\\le 1000$。  \n对于 $80\\%$ 的数据，$n,k\\le 5\\times10^4$。   \n对于另外 $10\\%$ 的数据，$k=1$。  \n对于 $100\\%$ 的数据，$m\\le n \\le 10^5,k\\le 10^5$。  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-p1」按摩", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/iojg3sgx.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/5m1v3g37.png)\n\n出题人：LinkyChristian\n\n验题人：Legitimity\n\n文案：小糯米", "description": "\n\n无论是勇者还是妖精，在执行任务时，都难免会患上一些特有的“职业病”。其中，在这份“常见勇者职业病名单”上排名第一的，叫作“急性魔力中毒”。虽然魔力中毒在表面上只是类似于发高烧的症状，但倘若没有每次根除，就会变成痼疾，身体马上就会超出负荷极限。魔力中毒的治疗方案，说起来倒是颇为实在：找到魔力淤积的部位，用力按压，利用类似中医按摩的原理，将其淤积点给揉开。具体的治疗原理如下：\n\n人体的魔力脉络，可以视作一个 $n \\times n$ 的网格。与中医腧穴中的经穴、经外穴分类类似，魔力的作用“穴位”，亦可以大致上分为阴性和阳性。为了更直观的叙述，我们不妨将阳性的魔力穴位在网格上用黑点表示。而魔力出现淤积，大概率的情形下便是因使用魔力导致肌肉紧绷，从而使得本是阴性的穴位变为阳性，或者阳性变为阴性的结果。所谓的按摩，其实就是将其恢复到其应有的状态，从而疏通魔力。判断按摩是否完成的标志，便是在这个网格中，是否存在一个以黑点作为顶点的所有边均平行于网格的多边形。\n\n现在，经过了一场激烈的战斗，珂朵莉因使用魔力过度，又出现了急性魔力中毒的症状。在给珂朵莉检查身体的时候，威廉发现，在珂朵莉的魔力脉络上，有 $m$ 个魔力穴位呈阳性反应。现在他要进行 $k$ 次按摩，每次的按摩都会给出一个点，如果该点的穴位呈阳性则变为阴性，反之则成为阳性。\n\n威廉想知道，在每一次按摩结束后，他的治疗是否已经完成。\n\n------------\n\n形式化题面：给出一个  $n \\times n$ 的网格，其中有 $m$ 个点为黑点。\n\n共有 $k$ 个操作，每次操作使一个点黑白反转。判断在每次操作结束后是否存在一个以黑点作为顶点的所有边均平行于网格的多边形。", "inputFormat": "第一行两个数：$n,m$。  \n接下来 $m$ 行，每行两个数 $x,y$，表示点 $(x,y)$ 为黑点。  \n下一行输入一个数 $k$ ，接下来 $k$ 行，每行两个数 $x,y$ ，表示对点 $(x,y)$ 进行一次操作(即按摩）。", "outputFormat": "输出 $k$ 行，每行一个 `Yes` 或 `No` 表示该次操作后治疗是否完成，即在每次操作结束后是否存在一个以黑点作为顶点的所有边均平行于网格的多边形。", "hint": "对于样例1，初始状态为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ykf02pm6.png)\n\n之后每次操作后状态依次为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lilddgfo.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ml2qqt5d.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lilddgfo.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/altczbf0.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uqvq4u0j.png)\n\n对于 $5\\%$ 的数据，$n\\le 10,m\\le 5,k\\le 100$。  \n对于 $10\\%$ 的数据，$n,k\\le 100$。  \n对于 $20\\%$ 的数据，$n,k\\le 1000$。  \n对于 $80\\%$ 的数据，$n,k\\le 5\\times10^4$。   \n对于另外 $10\\%$ 的数据，$k=1$。  \n对于 $100\\%$ 的数据，$m\\le n \\le 10^5,k\\le 10^5$。  ", "locale": "zh-CN"}}}
{"pid": "P8461", "type": "P", "difficulty": 6, "samples": [["2 2 2\n1 3 7 8\n4 5 9 10\n0 0\n0 0", "7"], ["2 3 3\n1 2 3 5 100 200\n5 7 9 10 400 500\n1000 1000 0\n1000 1000 0", "4009"], ["2 2 2\n1 2 4 5\n7 7 3 10\n2 1\n3 2", "14"], ["2 2 2\n1 2 4 5\n6 7 8 9\n12 33\n23 1", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "「REOI-p1」回忆", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/3uztip2k.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/rsmn7uez.png)\n\n出题人：LinkyChristian\n\n文案：小糯米", "description": "“话虽如此，我们并没有四处游走让妖精一个一个地诞生。\n只是在作为素材的巨大魂体上施予咒迹，好让她们带着接近人族的体格与人格自然诞生罢了。”\n\n黄金妖精，自出生开始即刻下早夭诅咒之“人”，若非魔物无法抵御，是本不应在这茫茫尘世之中诞生之兵器。\n\n每当前世之回忆涌上妖精之时，便是开启一朵含苞待放之花凋零倒计时之日。妖精的记忆，是由一条射线组成，为了便于叙述，我们不妨将射线当作数轴进行处理。在她们的记忆之中，会有若干个区间，在这个区间之内的回忆，是极易受到前世回忆的侵蚀的。但是由于生物的回忆本身自是不可探视分明之物，我们只能得知它们的 $m1$ 个开始区间 $[sl_i,sr_i]$ 与 $m2$ 个结束区间$[el_j,er_j]$ 。在这个回忆之内，会逐渐的有各种前世回忆涌出，侵蚀前期的记忆，当这些易于侵蚀的记忆区间全部被侵蚀殆尽后，黄金妖精便会就此“消失”。这些前世的回忆，可以看作成 $n$ 个不重叠的子段，这些子段的起点和终点恰好在一个开始区间和一个结束区间之内。而根据回忆的性质，不同的前世回忆的起点和终点自然是在不同的开始区间和结束区间内的。\n\n记忆犹如湍急的小河，河水汩汩，顺流而下，搅动着石块与泥沙，不断地在水面上下浮沉。在上游之时，或许巉岩乱石，自有其沉重，因而水流清澈，自在澄明；越到入海口，石块逐渐的被泥沙所代替，哪怕只是微风逐浪，也会搅动其一片浑浊，将记忆都给摆弄的纠缠不清。每一次的记忆侵蚀，就如同翻腾的浪花，也许搅动的是泥沙，又或许只是将那些巨石推动了一隅。从数值上来叙述的话，第 $i$ 个起始区间被匹配能带来 $a_i$ 的贡献，第 $i$ 个结束区间被匹配能带来 $b_i$ 的贡献。当这些贡献达到了最大值，所谓的“侵蚀殆尽”，便会发生。那么现在这些妖精想知道，这个最大值究竟是多少。\n\n特别的，如果数据本身无解，请输出 $-1$。\n\n\n------------\n\n\n简明题意：\n\n给出 $m1$ 个开始区间 $[sl_i,sr_i]$ ，以及 $m2$ 个结束区间$[el_j,er_j]$ 。在数轴上选取不重叠的 $n$ 个子段，使得每个子段的起点和终点分别在一个开始区间和一个结束区间内。不同的子段的起点和终点需要在不同的开始区间和结束区间内。第 $i$ 个起始区间被匹配能带来 $a_i$ 的贡献，第 $i$ 个结束区间被匹配能带来 $b_i$ 的贡献。总贡献为选出的子段长度之和加上区间被匹配带来的贡献。求能最大总贡献是多少。\n\n注意，将一个子段 $[l,r]$ 的长度定义为 $r-l$ ，这里的两个子段“重叠”定义为存在一个长度 > 0 的区间被同时包含在两个子段之内。\n\n无解输出 $-1$。\n", "inputFormat": "第一行三个整数 $n,m1,m2$\n\n第二行 $2\\times m1$ 个整数表示 $sl_1,sr_1,sl_2,sr_2,\\dots , sl_{m1},sr_{m1}$，\n\n第三行 $2\\times m2$ 个整数表示 $el_1,er_1,el_2,er_2,\\dots , el_{m2},er_{m2}$\n\n第四行 $m1$ 个数表示 $a_1,a_2,\\dots ,a_{m1}$\n\n第五行 $m2$ 个数表示 $b_1,b_2,\\dots ,b_{m2}$", "outputFormat": "输出一个整数，表示最大的总贡献。", "hint": "对于第一组样例，将起始区间 $[1,3]$ 与结束区间 $[4,5]$ 匹配，选取子段 $[1,5]$ 长度为 $5-1=4$，再将起始区间 $[7,8]$ 与结束区间 $[9,10]$ 匹配，选取子段 $[7,10]$ 长度为 $10-7=3$ ，选取总长度为 $4+3=7$ ,满足起始区间与结束区间存在 $n$ 个匹配，且选取的子段没有重合，总贡献最大。  \n对于第二组样例，分别将 $[1,2]$ 与 $[9,10]$ ，$[3,5]$ 与 $[5,7]$ 匹配，选取子段 $[1,10]$ 和 $[5,5]$。   \n对于第三组样例，分别将 $[1,2]$ 与 $[3,10]$ ，$[4,5]$ 与 $[7,7]$ 匹配，选取子段 $[1,5]$ 和 $[5,7]$。   \n**subtask1:** 对于 $15\\%$ 的数据，$n<=5,m1,m2<=10$。  \n**subtask2:** 对于 $100\\%$ 的数据，$n,m1,m2<=100$ ，题目中所有数据 $\\le 10^3$。  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-p1」回忆", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/3uztip2k.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/rsmn7uez.png)\n\n出题人：LinkyChristian\n\n文案：小糯米", "description": "“话虽如此，我们并没有四处游走让妖精一个一个地诞生。\n只是在作为素材的巨大魂体上施予咒迹，好让她们带着接近人族的体格与人格自然诞生罢了。”\n\n黄金妖精，自出生开始即刻下早夭诅咒之“人”，若非魔物无法抵御，是本不应在这茫茫尘世之中诞生之兵器。\n\n每当前世之回忆涌上妖精之时，便是开启一朵含苞待放之花凋零倒计时之日。妖精的记忆，是由一条射线组成，为了便于叙述，我们不妨将射线当作数轴进行处理。在她们的记忆之中，会有若干个区间，在这个区间之内的回忆，是极易受到前世回忆的侵蚀的。但是由于生物的回忆本身自是不可探视分明之物，我们只能得知它们的 $m1$ 个开始区间 $[sl_i,sr_i]$ 与 $m2$ 个结束区间$[el_j,er_j]$ 。在这个回忆之内，会逐渐的有各种前世回忆涌出，侵蚀前期的记忆，当这些易于侵蚀的记忆区间全部被侵蚀殆尽后，黄金妖精便会就此“消失”。这些前世的回忆，可以看作成 $n$ 个不重叠的子段，这些子段的起点和终点恰好在一个开始区间和一个结束区间之内。而根据回忆的性质，不同的前世回忆的起点和终点自然是在不同的开始区间和结束区间内的。\n\n记忆犹如湍急的小河，河水汩汩，顺流而下，搅动着石块与泥沙，不断地在水面上下浮沉。在上游之时，或许巉岩乱石，自有其沉重，因而水流清澈，自在澄明；越到入海口，石块逐渐的被泥沙所代替，哪怕只是微风逐浪，也会搅动其一片浑浊，将记忆都给摆弄的纠缠不清。每一次的记忆侵蚀，就如同翻腾的浪花，也许搅动的是泥沙，又或许只是将那些巨石推动了一隅。从数值上来叙述的话，第 $i$ 个起始区间被匹配能带来 $a_i$ 的贡献，第 $i$ 个结束区间被匹配能带来 $b_i$ 的贡献。当这些贡献达到了最大值，所谓的“侵蚀殆尽”，便会发生。那么现在这些妖精想知道，这个最大值究竟是多少。\n\n特别的，如果数据本身无解，请输出 $-1$。\n\n\n------------\n\n\n简明题意：\n\n给出 $m1$ 个开始区间 $[sl_i,sr_i]$ ，以及 $m2$ 个结束区间$[el_j,er_j]$ 。在数轴上选取不重叠的 $n$ 个子段，使得每个子段的起点和终点分别在一个开始区间和一个结束区间内。不同的子段的起点和终点需要在不同的开始区间和结束区间内。第 $i$ 个起始区间被匹配能带来 $a_i$ 的贡献，第 $i$ 个结束区间被匹配能带来 $b_i$ 的贡献。总贡献为选出的子段长度之和加上区间被匹配带来的贡献。求能最大总贡献是多少。\n\n注意，将一个子段 $[l,r]$ 的长度定义为 $r-l$ ，这里的两个子段“重叠”定义为存在一个长度 > 0 的区间被同时包含在两个子段之内。\n\n无解输出 $-1$。\n", "inputFormat": "第一行三个整数 $n,m1,m2$\n\n第二行 $2\\times m1$ 个整数表示 $sl_1,sr_1,sl_2,sr_2,\\dots , sl_{m1},sr_{m1}$，\n\n第三行 $2\\times m2$ 个整数表示 $el_1,er_1,el_2,er_2,\\dots , el_{m2},er_{m2}$\n\n第四行 $m1$ 个数表示 $a_1,a_2,\\dots ,a_{m1}$\n\n第五行 $m2$ 个数表示 $b_1,b_2,\\dots ,b_{m2}$", "outputFormat": "输出一个整数，表示最大的总贡献。", "hint": "对于第一组样例，将起始区间 $[1,3]$ 与结束区间 $[4,5]$ 匹配，选取子段 $[1,5]$ 长度为 $5-1=4$，再将起始区间 $[7,8]$ 与结束区间 $[9,10]$ 匹配，选取子段 $[7,10]$ 长度为 $10-7=3$ ，选取总长度为 $4+3=7$ ,满足起始区间与结束区间存在 $n$ 个匹配，且选取的子段没有重合，总贡献最大。  \n对于第二组样例，分别将 $[1,2]$ 与 $[9,10]$ ，$[3,5]$ 与 $[5,7]$ 匹配，选取子段 $[1,10]$ 和 $[5,5]$。   \n对于第三组样例，分别将 $[1,2]$ 与 $[3,10]$ ，$[4,5]$ 与 $[7,7]$ 匹配，选取子段 $[1,5]$ 和 $[5,7]$。   \n**subtask1:** 对于 $15\\%$ 的数据，$n<=5,m1,m2<=10$。  \n**subtask2:** 对于 $100\\%$ 的数据，$n,m1,m2<=100$ ，题目中所有数据 $\\le 10^3$。  ", "locale": "zh-CN"}}}
{"pid": "P8462", "type": "P", "difficulty": 2, "samples": [["5 4 1 1\nNENW", "10 10 10 10 10 \n10 10 10 10 10 \n10 6 10 10 10 \n4 4 10 10 10 \n6 10 10 10 10 \n"], ["7 14 1 1\nNENENENENESSSS", "105 105 105 105 105 105 105 \n105 105 105 105 55 61 105 \n105 105 105 49 51 69 105 \n105 105 51 49 105 79 105 \n105 61 55 105 105 91 105 \n79 69 105 105 105 105 105 \n91 105 105 105 105 105 105 \n"], ["10 70 2 2\nNWSNSNNNSNNSSNNSENNNNEESNWSESESSWENNSEWESWWWESEEESENNSENWNESNWSNNNEESS", "2485 2485 2485 2485 2485 2485 2485 2485 2485 2485 \n2485 1407 1205 1267 2485 2485 2485 2485 2485 2485 \n2485 1435 1281 1167 2485 2485 2485 2217 2281 2347 \n2485 1465 2485 1255 1041 2485 2485 2155 2485 2415 \n1557 1497 2485 2485 969 1177 2485 1733 1807 2485 \n1471 1531 1315 907 935 1267 2485 1473 1647 2485 \n1631 2485 2485 1357 1381 1407 1435 1499 1645 2485 \n2021 2347 2485 2485 2485 2485 1465 1497 2485 2485 \n2087 2415 2485 2485 2485 2485 2485 2485 2485 2485 \n2485 2485 2485 2485 2485 2485 2485 2485 2485 2485 \n"], ["5 4 2 1\nNENW", "10 10 10 10 10 \n10 10 10 10 10 \n10 10 6 10 10 \n10 4 4 10 10 \n10 6 10 10 10 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "「REOI-1」奶油蛋糕", "background": "\n----------\n早餐时间过后，小不点们都前往操场接受基础训练课程，威廉便趁机占据厨房了。  \n他在军服上披围裙，头上绑三角巾，还将清早从市场采买回来的大量材料摆到桌上。  \n接着，威廉烤了大量的奶油蛋糕。  \n\n威廉把奶油蛋糕摆放到桌子上，珂朵莉闻到了蛋糕的香味，迫不及待地扑到了餐桌前享受着这份饕餮盛宴，然而蛋糕的制作，似乎还差了那么最后一步……  \n“等一等哦，我还没有挤上奶油呢。”威廉说着，拿起了裱花袋。  \n\n可饥肠辘辘的珂朵莉哪里等得起全部的奶油都给挤好？  \n正当威廉还在忙着挨个给蛋糕挤上白花花的奶油的时候，珂朵莉已经偷偷的拿起了一块蛋糕……", "description": "在桌子上的蛋糕可以看作是一个无限大的[平面直角坐标系](https://baike.baidu.com/item/%E5%B9%B3%E9%9D%A2%E7%9B%B4%E8%A7%92%E5%9D%90%E6%A0%87%E7%B3%BB/1296463?fr=aladdin)，每一个蛋糕都位于坐标系的整点上。 \n\n每一分钟，威廉会给每个蛋糕都涂上若干层奶油，规则如下：如果蛋糕连续第 $i$ 次没有被珂朵莉吃到，那么就会在蛋糕上挤上 $i$ 层奶油。  \n\n每次在威廉挤完所有蛋糕的奶油后，珂朵莉会拿起一块蛋糕，把这个蛋糕上的奶油给吃掉一层。特别的，如果珂朵莉吃掉了蛋糕上的一层奶油，威廉马上会贴心的再次给这个蛋糕补上一层，且不计入连续没有被吃到的次数里（即下一次的 $i$ 依旧为 $1$ ）。  \n\n由于蛋糕太多，珂朵莉实在不知道从何下手，所以她决定按照移动的吃法进行试吃。  \n总共 $m$ 个分钟，珂朵莉的吃蛋糕序列可以用一个长度为 $m$ 的字符串表达。第 $t$ 个字符可能为 `N`，`S`，`W`，`E`分别表示珂朵莉在第 $t+1$ 分钟会吃掉第 $t$ 分钟吃掉蛋糕的上，下，左，右方位的蛋糕。  \n珂朵莉第 $1$ 个分钟会拿起位于点 $(x,y)$ 的蛋糕，因为蛋糕目前没有被挤上奶油，所以珂朵莉既不会进行试吃，威廉也不会立刻给她补上奶油。\n\n珂朵莉想知道在 $m$ 分钟后，这些蛋糕在最后都还剩多少层奶油。\n\n本题中的上和右分别表示 $y$ 轴正方向和 $x$ 轴正方向。\n\n---\n简要题面：\n\n有一个 $n\\times n$ 的地块，一个连续 $i$ 分钟没人经过的地面在第 $i$ 分钟会落上 $i$ 个单位的灰，有人经过时不会落灰但灰也不会清零，在人走后第一分钟又会落上一个单位的灰，以此类推。有一个人在这个 $n\\times n$ 的范围内移动，他的移动轨迹可以描述为一个由 $\\text{N,S,W,E}$ 组成的字符串，每个字母分别表示上、下、左、右。这个人一开始在点 $(x,y)$，每一分钟移动一步。\n\n求最后每一个位置上落下的灰的量。\n\n保证这个人没有超过移动的范围。\n", "inputFormat": "第一行四个正整数 $n,m,x,y$，含义如题面所示，其中 $x,y$ 表示横纵坐标，不是数组下标。  \n第二行一个长度为 $m$ 的字符串，表示珂朵莉的移动序列。", "outputFormat": "共$n$ 行，每行 $n$ 个数，第 $i$ 行的第 $j$ 个数表示坐标 $(j,n-i+1)$ 上的灰的数量", "hint": "**本题 y 轴朝上，x 轴朝右，样例输出中的左下角表示 $(1,1)$，第一分钟珂朵莉在初始点处，第二分钟移动到相应的位置，第 $m+1$ 分钟移动到最后一个点，但是总共只有 $m$ 分钟，因此最后一个点不受移动的影响**\n\n---\n**样例 1 解释：**\n\n珂朵莉的移动路径为 $(1,1)\\rightarrow(1,2)\\rightarrow(2,2)\\rightarrow(2,3)\\rightarrow(1,3)$，共 $4$ 分钟。\n\n对于第 $1$ 分钟，$(1,1)$ 奶油层数不变，其余点被挤上了 $1$ 层奶油。\n\n对于第 $2$ 分钟，$(1,2)$ 奶油层数不变，$(1,1)$ 被挤上了 $1$ 层奶油，其余点挤上 $2$ 层奶油。\n\n对于第 $3$ 分钟，$(2,2)$ 奶油层数不变，$(1,1)$ 挤上 $2$ 层奶油，$(1,2)$ 挤上 $1$ 层奶油，其余点挤上 $3$ 层奶油。\n\n对于第 $4$ 分钟，$(2,3)$ 奶油层数不变，$(1,1)$ 挤上 $3$ 层奶油，$(1,2)$ 挤上 $2$ 层奶油，$(2,2)$ 挤上 $1$ 层奶油，其余点挤上 $4$ 层奶油。\n\n**注意最后珂朵莉移动到了 $(1,3)$，但是时间只有 $4$ 分钟，所以实际上不会对 $(1,3)$ 造成影响。初始点不一定在 $(1,1)$。**\n\n$1\\le n\\leq 50,1\\leq m\\le 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-1」奶油蛋糕", "background": "\n----------\n早餐时间过后，小不点们都前往操场接受基础训练课程，威廉便趁机占据厨房了。  \n他在军服上披围裙，头上绑三角巾，还将清早从市场采买回来的大量材料摆到桌上。  \n接着，威廉烤了大量的奶油蛋糕。  \n\n威廉把奶油蛋糕摆放到桌子上，珂朵莉闻到了蛋糕的香味，迫不及待地扑到了餐桌前享受着这份饕餮盛宴，然而蛋糕的制作，似乎还差了那么最后一步……  \n“等一等哦，我还没有挤上奶油呢。”威廉说着，拿起了裱花袋。  \n\n可饥肠辘辘的珂朵莉哪里等得起全部的奶油都给挤好？  \n正当威廉还在忙着挨个给蛋糕挤上白花花的奶油的时候，珂朵莉已经偷偷的拿起了一块蛋糕……", "description": "在桌子上的蛋糕可以看作是一个无限大的[平面直角坐标系](https://baike.baidu.com/item/%E5%B9%B3%E9%9D%A2%E7%9B%B4%E8%A7%92%E5%9D%90%E6%A0%87%E7%B3%BB/1296463?fr=aladdin)，每一个蛋糕都位于坐标系的整点上。 \n\n每一分钟，威廉会给每个蛋糕都涂上若干层奶油，规则如下：如果蛋糕连续第 $i$ 次没有被珂朵莉吃到，那么就会在蛋糕上挤上 $i$ 层奶油。  \n\n每次在威廉挤完所有蛋糕的奶油后，珂朵莉会拿起一块蛋糕，把这个蛋糕上的奶油给吃掉一层。特别的，如果珂朵莉吃掉了蛋糕上的一层奶油，威廉马上会贴心的再次给这个蛋糕补上一层，且不计入连续没有被吃到的次数里（即下一次的 $i$ 依旧为 $1$ ）。  \n\n由于蛋糕太多，珂朵莉实在不知道从何下手，所以她决定按照移动的吃法进行试吃。  \n总共 $m$ 个分钟，珂朵莉的吃蛋糕序列可以用一个长度为 $m$ 的字符串表达。第 $t$ 个字符可能为 `N`，`S`，`W`，`E`分别表示珂朵莉在第 $t+1$ 分钟会吃掉第 $t$ 分钟吃掉蛋糕的上，下，左，右方位的蛋糕。  \n珂朵莉第 $1$ 个分钟会拿起位于点 $(x,y)$ 的蛋糕，因为蛋糕目前没有被挤上奶油，所以珂朵莉既不会进行试吃，威廉也不会立刻给她补上奶油。\n\n珂朵莉想知道在 $m$ 分钟后，这些蛋糕在最后都还剩多少层奶油。\n\n本题中的上和右分别表示 $y$ 轴正方向和 $x$ 轴正方向。\n\n---\n简要题面：\n\n有一个 $n\\times n$ 的地块，一个连续 $i$ 分钟没人经过的地面在第 $i$ 分钟会落上 $i$ 个单位的灰，有人经过时不会落灰但灰也不会清零，在人走后第一分钟又会落上一个单位的灰，以此类推。有一个人在这个 $n\\times n$ 的范围内移动，他的移动轨迹可以描述为一个由 $\\text{N,S,W,E}$ 组成的字符串，每个字母分别表示上、下、左、右。这个人一开始在点 $(x,y)$，每一分钟移动一步。\n\n求最后每一个位置上落下的灰的量。\n\n保证这个人没有超过移动的范围。\n", "inputFormat": "第一行四个正整数 $n,m,x,y$，含义如题面所示，其中 $x,y$ 表示横纵坐标，不是数组下标。  \n第二行一个长度为 $m$ 的字符串，表示珂朵莉的移动序列。", "outputFormat": "共$n$ 行，每行 $n$ 个数，第 $i$ 行的第 $j$ 个数表示坐标 $(j,n-i+1)$ 上的灰的数量", "hint": "**本题 y 轴朝上，x 轴朝右，样例输出中的左下角表示 $(1,1)$，第一分钟珂朵莉在初始点处，第二分钟移动到相应的位置，第 $m+1$ 分钟移动到最后一个点，但是总共只有 $m$ 分钟，因此最后一个点不受移动的影响**\n\n---\n**样例 1 解释：**\n\n珂朵莉的移动路径为 $(1,1)\\rightarrow(1,2)\\rightarrow(2,2)\\rightarrow(2,3)\\rightarrow(1,3)$，共 $4$ 分钟。\n\n对于第 $1$ 分钟，$(1,1)$ 奶油层数不变，其余点被挤上了 $1$ 层奶油。\n\n对于第 $2$ 分钟，$(1,2)$ 奶油层数不变，$(1,1)$ 被挤上了 $1$ 层奶油，其余点挤上 $2$ 层奶油。\n\n对于第 $3$ 分钟，$(2,2)$ 奶油层数不变，$(1,1)$ 挤上 $2$ 层奶油，$(1,2)$ 挤上 $1$ 层奶油，其余点挤上 $3$ 层奶油。\n\n对于第 $4$ 分钟，$(2,3)$ 奶油层数不变，$(1,1)$ 挤上 $3$ 层奶油，$(1,2)$ 挤上 $2$ 层奶油，$(2,2)$ 挤上 $1$ 层奶油，其余点挤上 $4$ 层奶油。\n\n**注意最后珂朵莉移动到了 $(1,3)$，但是时间只有 $4$ 分钟，所以实际上不会对 $(1,3)$ 造成影响。初始点不一定在 $(1,1)$。**\n\n$1\\le n\\leq 50,1\\leq m\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P8463", "type": "P", "difficulty": 4, "samples": [["2 2\n1 3 2\n2 6 1\n3 5", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "「REOI-1」深潜的第六兽", "background": "“〈十七兽〉全都不会飞。因此，在它们毁灭大地以后，悬浮大陆群还能像这样浮在天空。\n\n“可是，只有〈深潜的第六兽〉在本身留在大地的同时，还能对悬浮大陆群发动攻击。它有两种能力，『分裂增生』和『快速茁壮』。\n\n“留在地表的本体会让身体分裂出几万个碎块，然后随风飞扬，等待碰巧飘流到某座悬浮岛。抵达岛上以后，它会当场发育茁壮，大约六到八小时过后就能占据并毁灭整座岛。”", "description": "现在有一只〈第六兽〉，在某一次的「分裂增生」时分裂出了 $n$ 个碎块，这些碎块会笔直向上飞去，如果其中一块碎块遇到了一座浮空岛（为了研究方便，我们不妨将它当成一条二维空间中的线段处理），便会迅速占据它，并一分为二，再次从浮空岛的两端笔直向上飞去。\n\n不过好在，那些只是一些无关紧要最为荒凉毫无人烟的岛屿，但如果就这样放任它们继续肆虐，势必会给那些至关重要的浮空岛带来毁灭性的打击。于是乎，负责清理〈第六兽〉的军官们，决定以他们所在的岛屿为直线建立 $x$ 轴，并以重力的方向为正方向建立 $y$ 轴，他们总共监测到了 $m$ 座浮空岛，并确定了那些碎块分裂出的位置（距离 $x$ 轴的位置视作无限远），于是他们想知道，如果放任这些碎块，那么当它们到达军官的位置时，最终会有多少碎块。\n\n注意，若一座浮空岛的 $ l_i $ 与 $ r_i $ 相同，即为一个点， 〈第六兽〉占据后仍然会分裂成两只，从这个点向上飞去。\n\n**提示：浮空岛作为实体显然不会重叠。**\n\n**简要题意：**\n\n在一个平面直角坐标系上有 $m$ 条平行于 x 轴的线段，第 $i$ 条线段为 $(l_i,h_i)$ 与 $(r_i,h_i)$ 的连线。特别注意 $l_i$ 可与 $r_i$ 相等，此时线段变为一个点。\n\n在直线 $y=10^9$ 上有 $n$ 个点，分别位于 $(x_i,10^9)$。\n\n现在，这些点逐渐向下（y轴负方向）移动。若触碰到线段，则会一分为二，分裂出的两个点分别从线段的两端继续向下移动。\n\n特别地，若线段为一个点，则会原地分裂成 2 个。\n\n问所有初始点在经历了线段的分裂后，在最后会有多少个点掉在 $ x $ 轴上", "inputFormat": "第一行输入两个数 $ n $ 和 $ m $。\n\n接下来 $ m $ 行，每行三个数 $ l_i $ , $ r_i $ , $ h_i $ ,分别描述一座被视作线段的浮空岛的左端点横坐标，右端点横坐标，以及线段的纵坐标（ $ 0 \\leq l_i,r_i,h_i \\leq 10^5，l_i \\leq r_i$）。\n\n接下来一行 $ n $ 个数，$ x_i $表示第 $ i $ 个碎块的横坐标（ $ 0 \\leq x_i \\leq 10^5 $）。\n", "outputFormat": "输出一个整数 $ ans $ ，表示最后会有多少个碎块落在 $ x $ 轴上，答案对 $998244353$ 取模。", "hint": "样例解释：\n\n注意， $y$ 轴正方向为重力方向。\n在坐标轴中，横坐标为 $x$ 的碎块，先掉到纵坐标为2的线段上，然后分成两个从 $1$ 和 $3$ 往下掉，$3$ 的那个掉到了纵坐标为1的线段上，分成两个从 $2$ 和 $6$ 往下掉，第一个碎块一共变成了 $3$ 块，分别掉在 $1，2，6$ ，第二个碎块一共变成了两个碎块，分别掉在 $2，6$。\n\n| 子问题 | 特殊限制条件 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| 1 | $ 1\\leq n,m \\leq 10 $ | 10 |\n| 2 | $ 1\\leq n,m \\leq 100 $ | 5 |\n| 3 | $ 1\\leq n\\leq 10^4， 1\\leq m \\leq 5\\times 10^5 $ | 35 |\n| 4 |$ 1\\leq n,m \\leq 5\\times 10^5 $|50|\n\n本题各个子问题之间不捆绑测试。\n\n对于 $100\\%$ 的数据 $ 1\\leq n,m \\leq 5\\times 10^5 $，所有数字均为非负整数。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-1」深潜的第六兽", "background": "“〈十七兽〉全都不会飞。因此，在它们毁灭大地以后，悬浮大陆群还能像这样浮在天空。\n\n“可是，只有〈深潜的第六兽〉在本身留在大地的同时，还能对悬浮大陆群发动攻击。它有两种能力，『分裂增生』和『快速茁壮』。\n\n“留在地表的本体会让身体分裂出几万个碎块，然后随风飞扬，等待碰巧飘流到某座悬浮岛。抵达岛上以后，它会当场发育茁壮，大约六到八小时过后就能占据并毁灭整座岛。”", "description": "现在有一只〈第六兽〉，在某一次的「分裂增生」时分裂出了 $n$ 个碎块，这些碎块会笔直向上飞去，如果其中一块碎块遇到了一座浮空岛（为了研究方便，我们不妨将它当成一条二维空间中的线段处理），便会迅速占据它，并一分为二，再次从浮空岛的两端笔直向上飞去。\n\n不过好在，那些只是一些无关紧要最为荒凉毫无人烟的岛屿，但如果就这样放任它们继续肆虐，势必会给那些至关重要的浮空岛带来毁灭性的打击。于是乎，负责清理〈第六兽〉的军官们，决定以他们所在的岛屿为直线建立 $x$ 轴，并以重力的方向为正方向建立 $y$ 轴，他们总共监测到了 $m$ 座浮空岛，并确定了那些碎块分裂出的位置（距离 $x$ 轴的位置视作无限远），于是他们想知道，如果放任这些碎块，那么当它们到达军官的位置时，最终会有多少碎块。\n\n注意，若一座浮空岛的 $ l_i $ 与 $ r_i $ 相同，即为一个点， 〈第六兽〉占据后仍然会分裂成两只，从这个点向上飞去。\n\n**提示：浮空岛作为实体显然不会重叠。**\n\n**简要题意：**\n\n在一个平面直角坐标系上有 $m$ 条平行于 x 轴的线段，第 $i$ 条线段为 $(l_i,h_i)$ 与 $(r_i,h_i)$ 的连线。特别注意 $l_i$ 可与 $r_i$ 相等，此时线段变为一个点。\n\n在直线 $y=10^9$ 上有 $n$ 个点，分别位于 $(x_i,10^9)$。\n\n现在，这些点逐渐向下（y轴负方向）移动。若触碰到线段，则会一分为二，分裂出的两个点分别从线段的两端继续向下移动。\n\n特别地，若线段为一个点，则会原地分裂成 2 个。\n\n问所有初始点在经历了线段的分裂后，在最后会有多少个点掉在 $ x $ 轴上", "inputFormat": "第一行输入两个数 $ n $ 和 $ m $。\n\n接下来 $ m $ 行，每行三个数 $ l_i $ , $ r_i $ , $ h_i $ ,分别描述一座被视作线段的浮空岛的左端点横坐标，右端点横坐标，以及线段的纵坐标（ $ 0 \\leq l_i,r_i,h_i \\leq 10^5，l_i \\leq r_i$）。\n\n接下来一行 $ n $ 个数，$ x_i $表示第 $ i $ 个碎块的横坐标（ $ 0 \\leq x_i \\leq 10^5 $）。\n", "outputFormat": "输出一个整数 $ ans $ ，表示最后会有多少个碎块落在 $ x $ 轴上，答案对 $998244353$ 取模。", "hint": "样例解释：\n\n注意， $y$ 轴正方向为重力方向。\n在坐标轴中，横坐标为 $x$ 的碎块，先掉到纵坐标为2的线段上，然后分成两个从 $1$ 和 $3$ 往下掉，$3$ 的那个掉到了纵坐标为1的线段上，分成两个从 $2$ 和 $6$ 往下掉，第一个碎块一共变成了 $3$ 块，分别掉在 $1，2，6$ ，第二个碎块一共变成了两个碎块，分别掉在 $2，6$。\n\n| 子问题 | 特殊限制条件 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| 1 | $ 1\\leq n,m \\leq 10 $ | 10 |\n| 2 | $ 1\\leq n,m \\leq 100 $ | 5 |\n| 3 | $ 1\\leq n\\leq 10^4， 1\\leq m \\leq 5\\times 10^5 $ | 35 |\n| 4 |$ 1\\leq n,m \\leq 5\\times 10^5 $|50|\n\n本题各个子问题之间不捆绑测试。\n\n对于 $100\\%$ 的数据 $ 1\\leq n,m \\leq 5\\times 10^5 $，所有数字均为非负整数。\n", "locale": "zh-CN"}}}
{"pid": "P8464", "type": "P", "difficulty": 6, "samples": [["4\nabab", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "「REOI-1」渺茫的希望", "background": "威廉在与妖精们相处的日子里，留下了不少幸福的记忆。", "description": "其中有一件令威廉记忆颇深的事情，便是活泼的少女们会时常的“抓住”威廉，让他来与她们一起读书。每逢此时，威廉总要开玩笑说“我脑筋超棒的哦，只要是五百年以上的古书尽管找我念”云云。但一来二去终究还是拗不过少女们的请求，半推半就的讲述一些以前的故事。长此以往，威廉在讲故事之余，会间或的用那些五百年以前的文字来和少女们玩一些“文字游戏”，游戏的规则如下：\n\n威廉会给出一串由小写英文字母组成的字符串 $S$ ，其中每一个古文字便是由它的子串构成——如果我们说两个古文字不同，那么当且仅当这两个子串长度不同或长度相同且有任意一位不同——当两个不同的古文字拼凑在一起组成一个词语时，其音律、词义等各方面也会有所不同，于是威廉为了方便，就定义了一个“意境值”来衡量拼凑成的词语的质量。意境值的计算公式便是这两个本质不同子串在 $S$ 中出现的次数之和加上这两个本质不同子串的最长公共前缀的长度。\n\n而当少女们把所有这些古文字拼凑成了一个句子后，威廉惊讶的发现，这个句子可以视作为任意两个古文字连边形成的完全图的最小生成树。他于是一鼓作气，推理出了这个句子的意境值的公式——这些最小生成树（因为最小生成树可能不唯一）的边权和。\n\n其中，两个古文字的边权与她们组成的词语的意境值在数值上相等。\n\n现在，威廉又在和少女们玩文字游戏了，威廉现在给出了一个字符串 $S$ ，但由于这是他临时起意写出的，他也不知道如果将它拼凑成一个句子，意境值究竟是多少——于是乎，威廉将求助的目光投向了你。\n\n----\n\n简要题意：\n\n给定一个由小写英文字母组成的字符串 $S$ ，设在两个本质不同子串之间连边的权值为两个子串在 $S$ 中出现的次数之和加上这两个子串的最长公共前缀的长度，求对所有本质不同子串做最小生成树的边权之和（不含空串）。", "inputFormat": "第一行一个整数 $n$ 。  \n接下来一行 $n$ 个字符表示威廉给出的字符串 $S$ 。\n", "outputFormat": "一行一个整数，表示这个句子的意境值。", "hint": "#### 样例解释 #1\n![](https://cdn.luogu.com.cn/upload/image_hosting/fqjg81g9.png)\n\n如图所示为一种最小生成树，边权和为 $15$。\n\n\n#### 数据范围\n对于 $10\\%$ 的数据，$|S|\\le 100$。  \n对于 $30\\%$ 的数据，$|S|\\le 1000$。  \n对于 $100\\%$ 的数据，$1\\le|S|\\le 10^5$。  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-1」渺茫的希望", "background": "威廉在与妖精们相处的日子里，留下了不少幸福的记忆。", "description": "其中有一件令威廉记忆颇深的事情，便是活泼的少女们会时常的“抓住”威廉，让他来与她们一起读书。每逢此时，威廉总要开玩笑说“我脑筋超棒的哦，只要是五百年以上的古书尽管找我念”云云。但一来二去终究还是拗不过少女们的请求，半推半就的讲述一些以前的故事。长此以往，威廉在讲故事之余，会间或的用那些五百年以前的文字来和少女们玩一些“文字游戏”，游戏的规则如下：\n\n威廉会给出一串由小写英文字母组成的字符串 $S$ ，其中每一个古文字便是由它的子串构成——如果我们说两个古文字不同，那么当且仅当这两个子串长度不同或长度相同且有任意一位不同——当两个不同的古文字拼凑在一起组成一个词语时，其音律、词义等各方面也会有所不同，于是威廉为了方便，就定义了一个“意境值”来衡量拼凑成的词语的质量。意境值的计算公式便是这两个本质不同子串在 $S$ 中出现的次数之和加上这两个本质不同子串的最长公共前缀的长度。\n\n而当少女们把所有这些古文字拼凑成了一个句子后，威廉惊讶的发现，这个句子可以视作为任意两个古文字连边形成的完全图的最小生成树。他于是一鼓作气，推理出了这个句子的意境值的公式——这些最小生成树（因为最小生成树可能不唯一）的边权和。\n\n其中，两个古文字的边权与她们组成的词语的意境值在数值上相等。\n\n现在，威廉又在和少女们玩文字游戏了，威廉现在给出了一个字符串 $S$ ，但由于这是他临时起意写出的，他也不知道如果将它拼凑成一个句子，意境值究竟是多少——于是乎，威廉将求助的目光投向了你。\n\n----\n\n简要题意：\n\n给定一个由小写英文字母组成的字符串 $S$ ，设在两个本质不同子串之间连边的权值为两个子串在 $S$ 中出现的次数之和加上这两个子串的最长公共前缀的长度，求对所有本质不同子串做最小生成树的边权之和（不含空串）。", "inputFormat": "第一行一个整数 $n$ 。  \n接下来一行 $n$ 个字符表示威廉给出的字符串 $S$ 。\n", "outputFormat": "一行一个整数，表示这个句子的意境值。", "hint": "#### 样例解释 #1\n![](https://cdn.luogu.com.cn/upload/image_hosting/fqjg81g9.png)\n\n如图所示为一种最小生成树，边权和为 $15$。\n\n\n#### 数据范围\n对于 $10\\%$ 的数据，$|S|\\le 100$。  \n对于 $30\\%$ 的数据，$|S|\\le 1000$。  \n对于 $100\\%$ 的数据，$1\\le|S|\\le 10^5$。  ", "locale": "zh-CN"}}}
{"pid": "P8465", "type": "P", "difficulty": 6, "samples": [["3 2 1\n2 1 3\n1 2 2 2 \n", "2"], ["3 2 1\n2 1 3\n1 2 1 1 ", "3"], ["10 4 2\n5 2 1 3 3 1 4 5 5 3 \n4 3 1 7\n2 4 5 5", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "「REOI-1」调整圣剑", "background": "威廉从仓库搬出了瑟尼欧里斯。\n\n六十八号悬浮岛的边陲，稍稍隆起的小山丘上。\n\n风势平稳，空气澄净，星光柔和，各方面条件都合适的夜晚。\n\n他掀开盖着瑟尼欧里斯的布，让剑身透风。\n\n威廉注入些许魔力。太阳穴稍微会痛，不过这种程度还没什么大不了。\n\n瑟尼欧里斯顿时绽发柔和光芒。\n\n「——调整开始。」\n", "description": "具体而言，圣剑瑟尼欧里斯由 $n$ 个护符组成，每个护符有一个权值 $a_i$。威廉会进行 $k$ 次调整，每次调整一个护符，并获得与护符权值相等的疲惫值。\n\n然而由于护符间的某种奇怪联系，威廉调整护符时有一些限制，这些限制形如 $(i,j,x,y)$，表示威廉必须在第 $i$ 次调整时调整前 $x$ 个护符中的一个 **或** 在第 $j$ 次调整时调整后 $y$ 个护符中的一个，否则圣剑就会崩溃。\n\n现在，珂朵莉想知道威廉在调整完所有护符后的最小疲惫值是多少。\n\n**注意每个护符可以调整不止一遍。**", "inputFormat": "第一行三个正整数 $n,k,q$。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,a_3...a_n$。\n\n接下来 $q$ 行，每行 $4$ 个正整数 $i,j,x,y$。", "outputFormat": "一个数表示威廉疲惫值的最小值。", "hint": "样例解释：\n\n对于第一组样例，第一次选取 $a_2$ ，第二次选取 $a_2$ 。可以证明这是满足限制的最小值。\n\n对于第二组样例，第一次选择 $a_1$ ，第二次选择 $a_2$ 是为满足限制的最小值。\n\n对于 $24\\%$ 的数据：$1\\le n \\le 20,1\\le k,q \\le 14$ ；\n\n对于 $56\\%$ 的数据：$1\\le n \\le 100,1\\le k,q \\le 60$ ；\n\n对于 $80\\%$ 的数据：$1\\le n \\le 10^5, 1\\le k,q\\le 10^3$ ；\n\n对于 $100\\%$ 的数据：$1\\le n \\le 10^5,1\\le k,q\\le 10^4,1\\le a_i\\le 10^5$。\n\n对于每一次询问有 $1 \\le i,j \\le k$ , $1 \\le x,y \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-1」调整圣剑", "background": "威廉从仓库搬出了瑟尼欧里斯。\n\n六十八号悬浮岛的边陲，稍稍隆起的小山丘上。\n\n风势平稳，空气澄净，星光柔和，各方面条件都合适的夜晚。\n\n他掀开盖着瑟尼欧里斯的布，让剑身透风。\n\n威廉注入些许魔力。太阳穴稍微会痛，不过这种程度还没什么大不了。\n\n瑟尼欧里斯顿时绽发柔和光芒。\n\n「——调整开始。」\n", "description": "具体而言，圣剑瑟尼欧里斯由 $n$ 个护符组成，每个护符有一个权值 $a_i$。威廉会进行 $k$ 次调整，每次调整一个护符，并获得与护符权值相等的疲惫值。\n\n然而由于护符间的某种奇怪联系，威廉调整护符时有一些限制，这些限制形如 $(i,j,x,y)$，表示威廉必须在第 $i$ 次调整时调整前 $x$ 个护符中的一个 **或** 在第 $j$ 次调整时调整后 $y$ 个护符中的一个，否则圣剑就会崩溃。\n\n现在，珂朵莉想知道威廉在调整完所有护符后的最小疲惫值是多少。\n\n**注意每个护符可以调整不止一遍。**", "inputFormat": "第一行三个正整数 $n,k,q$。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,a_3...a_n$。\n\n接下来 $q$ 行，每行 $4$ 个正整数 $i,j,x,y$。", "outputFormat": "一个数表示威廉疲惫值的最小值。", "hint": "样例解释：\n\n对于第一组样例，第一次选取 $a_2$ ，第二次选取 $a_2$ 。可以证明这是满足限制的最小值。\n\n对于第二组样例，第一次选择 $a_1$ ，第二次选择 $a_2$ 是为满足限制的最小值。\n\n对于 $24\\%$ 的数据：$1\\le n \\le 20,1\\le k,q \\le 14$ ；\n\n对于 $56\\%$ 的数据：$1\\le n \\le 100,1\\le k,q \\le 60$ ；\n\n对于 $80\\%$ 的数据：$1\\le n \\le 10^5, 1\\le k,q\\le 10^3$ ；\n\n对于 $100\\%$ 的数据：$1\\le n \\le 10^5,1\\le k,q\\le 10^4,1\\le a_i\\le 10^5$。\n\n对于每一次询问有 $1 \\le i,j \\le k$ , $1 \\le x,y \\le n$。", "locale": "zh-CN"}}}
{"pid": "P8466", "type": "P", "difficulty": 1, "samples": [["3\nX2AAKKKKQT9765433\nDX22AKKQJTT884443\nX2AAAKQQJT8554433", "Yes\nYes\nNo"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "[Aya Round 1 A] 幻想乡扑克游戏", "background": "**Problem Number:** [$\\textit{22}$](https://www.luogu.com.cn/training/1392)\n\n在能力卡牌异变之后，幻想乡的少女们将多余的卡牌收集起来，仿照外界人的「斗地主」这一游戏，进行了愉快的玩耍。", "description": "斗地主是一种使用 $\\tt A$ 到 $\\tt K$ 加上大小王的共 $54$ 张扑克牌来进行的游戏，其中大小王各一张，其它数码牌各四张。在斗地主中，牌的大小关系根据牌的数码表示如下：\n\n$$\\tt 3<4<5<6<7<8<9<10<J<Q<K<A<2<\\stackrel{\\mathclap{\\color{white}\\textbf{\\textit{wxy}}}}{\\text{小王}} < \\text{大王}$$\n\n且牌的大小关系和花色无关。\n\n游戏开始时，将会给 $3$ 名玩家各自发放 $17$ 张牌作为手牌，余下三张作为底牌。**玩家会将牌从大到小排序理好**，然后根据自己牌型的好坏程度来选择是否叫地主。\n\n你认为，如果自己的手牌中存在王炸（即大小王各一张）或者至少一个炸弹（即四张数码相同的牌），则你会选择叫地主。\n\n请实现一个程序来判断你是否应该叫地主。", "inputFormat": "**本题包含多组数据。**\n\n- 第一行输入一个整数 $T$，表示数据组数。\n- 接下来 $T$ 行，每行输入一个长度为 $17$ 的字符串，表示你的手牌。**保证牌已经预先理好**。在输入中使用 $\\tt T$ 代表点数为 $\\tt 10$ 的牌，使用 $\\tt X$ 代表小王，使用 $\\tt D$ 代表大王。", "outputFormat": "- 输出共 $T$ 行。\n- 对于每组数据，输出一行一个字符串：\n  - `yes` 代表你应该叫地主。\n  - `no` 代表你不应该叫地主。\n- 你可以输出字符串的任意大小写形式。例如：字符串 `yes`、`Yes`、`YES` 均会被视为表示应该叫地主。", "hint": "### 样例解释\n\n> 对于数据 $1$，输入数据相当于下面的手牌（忽略花色）：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/g56d0ywv.png)\n> \n> 该手牌中存在炸弹：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/6sal0bye.png)\n> \n> 故你选择叫地主。\n\n> 对于数据 $2$，输入数据相当于下面的手牌（忽略花色）：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/6g2jrx6t.png)\n> \n> 该手牌中存在王炸：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/1ulc1sxz.png)\n> \n> 故你选择叫地主。\n\n> 对于数据 $3$，输入数据相当于下面的手牌（忽略花色）：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/5qb6bwen.png)\n> \n> 该手牌中不存在王炸和炸弹。故你选择不叫地主。\n\n### 数据范围与约定\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^4$。**保证牌已经预先理好**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 A] 幻想乡扑克游戏", "background": "**Problem Number:** [$\\textit{22}$](https://www.luogu.com.cn/training/1392)\n\n在能力卡牌异变之后，幻想乡的少女们将多余的卡牌收集起来，仿照外界人的「斗地主」这一游戏，进行了愉快的玩耍。", "description": "斗地主是一种使用 $\\tt A$ 到 $\\tt K$ 加上大小王的共 $54$ 张扑克牌来进行的游戏，其中大小王各一张，其它数码牌各四张。在斗地主中，牌的大小关系根据牌的数码表示如下：\n\n$$\\tt 3<4<5<6<7<8<9<10<J<Q<K<A<2<\\stackrel{\\mathclap{\\color{white}\\textbf{\\textit{wxy}}}}{\\text{小王}} < \\text{大王}$$\n\n且牌的大小关系和花色无关。\n\n游戏开始时，将会给 $3$ 名玩家各自发放 $17$ 张牌作为手牌，余下三张作为底牌。**玩家会将牌从大到小排序理好**，然后根据自己牌型的好坏程度来选择是否叫地主。\n\n你认为，如果自己的手牌中存在王炸（即大小王各一张）或者至少一个炸弹（即四张数码相同的牌），则你会选择叫地主。\n\n请实现一个程序来判断你是否应该叫地主。", "inputFormat": "**本题包含多组数据。**\n\n- 第一行输入一个整数 $T$，表示数据组数。\n- 接下来 $T$ 行，每行输入一个长度为 $17$ 的字符串，表示你的手牌。**保证牌已经预先理好**。在输入中使用 $\\tt T$ 代表点数为 $\\tt 10$ 的牌，使用 $\\tt X$ 代表小王，使用 $\\tt D$ 代表大王。", "outputFormat": "- 输出共 $T$ 行。\n- 对于每组数据，输出一行一个字符串：\n  - `yes` 代表你应该叫地主。\n  - `no` 代表你不应该叫地主。\n- 你可以输出字符串的任意大小写形式。例如：字符串 `yes`、`Yes`、`YES` 均会被视为表示应该叫地主。", "hint": "### 样例解释\n\n> 对于数据 $1$，输入数据相当于下面的手牌（忽略花色）：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/g56d0ywv.png)\n> \n> 该手牌中存在炸弹：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/6sal0bye.png)\n> \n> 故你选择叫地主。\n\n> 对于数据 $2$，输入数据相当于下面的手牌（忽略花色）：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/6g2jrx6t.png)\n> \n> 该手牌中存在王炸：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/1ulc1sxz.png)\n> \n> 故你选择叫地主。\n\n> 对于数据 $3$，输入数据相当于下面的手牌（忽略花色）：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/5qb6bwen.png)\n> \n> 该手牌中不存在王炸和炸弹。故你选择不叫地主。\n\n### 数据范围与约定\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^4$。**保证牌已经预先理好**。", "locale": "zh-CN"}}}
{"pid": "P8467", "type": "P", "difficulty": 3, "samples": [["5\n3 2 8 4\n1 2 3 4\n1 9 4 9\n1 0 0 1\n0 0 4 2", "1\n1\n0\n0\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化", "枚举", "洛谷月赛"], "title": "[Aya Round 1 B] 甲（one）", "background": "", "description": "定义长度为 $5$ 的序列 $S$ 为「好的」，当且仅当存在长度为 $5$ 的排列 $P$，满足 $S_{P_1}-1=S_{P_2}=S_{P_3}+1$ 且 $S_{P_4}=S_{P_5}$。现有一长度为 $5$ 的整数序列 $a$，满足 $0\\le a_i \\le 9(1\\le i \\le 5)$。其中 $a_1 \\sim a_4$ 给定。试判断是否存在 $a_5$ 满足 $a$ 为「好的」。\n\n其中，长度为 $5$ 的排列 $P$，指的是一个长度为 $5$ 的数列，其中 $1,2,3,4,5$ 在这个数列中出现且只出现一次。", "inputFormat": "**本题含有多组数据。**\n\n- 第一行输入一个整数 $T$ 代表数据组数。\n- 接下来 $T$ 行每行输入四个整数 $a_1,a_2,a_3,a_4$。表示一组数据。", "outputFormat": "- 输出共 $T$ 行。对于每组数据，若存在满足条件的 $a_5$，输出 $1$；否则输出 $0$。", "hint": "### 附加样例\n\n- 样例 $2$ 见下发文件中的 $\\textbf{\\textit{one2.in/one2.ans}}$。该样例满足测试点 $2$ 的限制。\n- 样例 $3$ 见下发文件中的 $\\textbf{\\textit{one3.in/one3.ans}}$。该样例满足测试点 $5$ 的限制。\n\n### 样例解释\n\n#### 样例 \\#1\n\n- 对于第 $1$ 组数据，可以令 $a_5=8$。此时存在 $P=\\{4,1,2,5,3\\}$，满足 $a_{P_1}-1=a_{P_2}=a_{P_3}+1$ 且 $a_{P_4}=a_{P_5}$。故输出 $1$。\n- 对于第 $2$ 组数据，可以令 $a_5=4$。此时存在 $P=\\{3,2,1,4,5\\}$，满足 $a_{P_1}-1=a_{P_2}=a_{P_3}+1$ 且 $a_{P_4}=a_{P_5}$。故输出 $1$。\n- 对于第 $3$ 组数据，不存在可以使 $a$ 为「好的」的 $a_5$。\n\n$$\n\\begin{aligned}\n\\fcolorbox{black}{#fbb}{3\\ \\ 2\\ \\ 8\\ \\ 4} + \\fcolorbox{black}{yellow}{8} &\\Rightarrow \\fcolorbox{black}{#fbb}{2\\ \\ 3\\ \\ 4} + \\fcolorbox{black}{yellow}{8\\ \\ 8}\\ {\\color{green}\\sqrt{}}\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 2\\ \\ 3\\ \\ 4} + \\fcolorbox{black}{yellow}{4} &\\Rightarrow \\fcolorbox{black}{#fbb}{1\\ \\ 2\\ \\ 3} + \\fcolorbox{black}{yellow}{4\\ \\ 4}\\ {\\color{green}\\sqrt{}}\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9} +   \\begin{cases}\n\\fcolorbox{black}{yellow}{0}\\\\\n\\fcolorbox{black}{yellow}{1}\\\\\n\\cdots\\\\\n\\fcolorbox{black}{yellow}{9}\n\\end{cases}&\\Rightarrow\n{\\color{red}\\xcancel{\\color{black}\n\\begin{cases}\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9\\ \\ 0}\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9\\ \\ 1}\\\\\n\\cdots\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9\\ \\ 9}\n\\end{cases}}}\n\\end{aligned}\n$$\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|} \\hline\n\\textbf{\\textsf{测试点}} & \\bm{{T\\le}} & \\textbf{\\textsf{特殊性质}} \\cr\\hline\n1 & 100 & \\textbf{A} \\cr\\hline\n2 & 100 & \\textbf{B} \\cr\\hline\n3 & 100 & - \\cr\\hline\n4 & 1000 & - \\cr\\hline\n5 & 10^5 & - \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\bf A$：$a_1=a_2=a_3=a_4$。\n- 特殊性质 $\\bf B$：$a_1,a_2,a_3,a_4$ 互不相等。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$0\\le a_i \\le 9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 B] 甲（one）", "background": "", "description": "定义长度为 $5$ 的序列 $S$ 为「好的」，当且仅当存在长度为 $5$ 的排列 $P$，满足 $S_{P_1}-1=S_{P_2}=S_{P_3}+1$ 且 $S_{P_4}=S_{P_5}$。现有一长度为 $5$ 的整数序列 $a$，满足 $0\\le a_i \\le 9(1\\le i \\le 5)$。其中 $a_1 \\sim a_4$ 给定。试判断是否存在 $a_5$ 满足 $a$ 为「好的」。\n\n其中，长度为 $5$ 的排列 $P$，指的是一个长度为 $5$ 的数列，其中 $1,2,3,4,5$ 在这个数列中出现且只出现一次。", "inputFormat": "**本题含有多组数据。**\n\n- 第一行输入一个整数 $T$ 代表数据组数。\n- 接下来 $T$ 行每行输入四个整数 $a_1,a_2,a_3,a_4$。表示一组数据。", "outputFormat": "- 输出共 $T$ 行。对于每组数据，若存在满足条件的 $a_5$，输出 $1$；否则输出 $0$。", "hint": "### 附加样例\n\n- 样例 $2$ 见下发文件中的 $\\textbf{\\textit{one2.in/one2.ans}}$。该样例满足测试点 $2$ 的限制。\n- 样例 $3$ 见下发文件中的 $\\textbf{\\textit{one3.in/one3.ans}}$。该样例满足测试点 $5$ 的限制。\n\n### 样例解释\n\n#### 样例 \\#1\n\n- 对于第 $1$ 组数据，可以令 $a_5=8$。此时存在 $P=\\{4,1,2,5,3\\}$，满足 $a_{P_1}-1=a_{P_2}=a_{P_3}+1$ 且 $a_{P_4}=a_{P_5}$。故输出 $1$。\n- 对于第 $2$ 组数据，可以令 $a_5=4$。此时存在 $P=\\{3,2,1,4,5\\}$，满足 $a_{P_1}-1=a_{P_2}=a_{P_3}+1$ 且 $a_{P_4}=a_{P_5}$。故输出 $1$。\n- 对于第 $3$ 组数据，不存在可以使 $a$ 为「好的」的 $a_5$。\n\n$$\n\\begin{aligned}\n\\fcolorbox{black}{#fbb}{3\\ \\ 2\\ \\ 8\\ \\ 4} + \\fcolorbox{black}{yellow}{8} &\\Rightarrow \\fcolorbox{black}{#fbb}{2\\ \\ 3\\ \\ 4} + \\fcolorbox{black}{yellow}{8\\ \\ 8}\\ {\\color{green}\\sqrt{}}\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 2\\ \\ 3\\ \\ 4} + \\fcolorbox{black}{yellow}{4} &\\Rightarrow \\fcolorbox{black}{#fbb}{1\\ \\ 2\\ \\ 3} + \\fcolorbox{black}{yellow}{4\\ \\ 4}\\ {\\color{green}\\sqrt{}}\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9} +   \\begin{cases}\n\\fcolorbox{black}{yellow}{0}\\\\\n\\fcolorbox{black}{yellow}{1}\\\\\n\\cdots\\\\\n\\fcolorbox{black}{yellow}{9}\n\\end{cases}&\\Rightarrow\n{\\color{red}\\xcancel{\\color{black}\n\\begin{cases}\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9\\ \\ 0}\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9\\ \\ 1}\\\\\n\\cdots\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9\\ \\ 9}\n\\end{cases}}}\n\\end{aligned}\n$$\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|} \\hline\n\\textbf{\\textsf{测试点}} & \\bm{{T\\le}} & \\textbf{\\textsf{特殊性质}} \\cr\\hline\n1 & 100 & \\textbf{A} \\cr\\hline\n2 & 100 & \\textbf{B} \\cr\\hline\n3 & 100 & - \\cr\\hline\n4 & 1000 & - \\cr\\hline\n5 & 10^5 & - \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\bf A$：$a_1=a_2=a_3=a_4$。\n- 特殊性质 $\\bf B$：$a_1,a_2,a_3,a_4$ 互不相等。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$0\\le a_i \\le 9$。", "locale": "zh-CN"}}}
{"pid": "P8468", "type": "P", "difficulty": 2, "samples": [["2\n14 9\n3 3", "3 3 5 6\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "[Aya Round 1 C] 文文的构造游戏", "background": "**Problem Number:** [$\\textit{23}$](https://www.luogu.com.cn/training/1392)\n\n众所周知，射命丸文和琪露诺是好朋友。但是文是大妖怪，非常聪明，而琪露诺是个笨蛋。为了提升琪露诺的智商，文便给琪露诺出了一道简单的题目。", "description": "对于一个长度为 $l$ 的数列 $p$，定义 $S(p)$ 为所有元素的**异或和**，其中 $\\oplus$ 指[按位异或运算](https://baike.baidu.com/item/%E5%BC%82%E6%88%96%E6%93%8D%E4%BD%9C)。\n\n给定整数 $s,m$，判断能否构造一个长度为 $n$（$n$ 值自定）的数列 $a$，满足：\n\n- $1 \\le n \\le m$。\n- $1 \\le a_i \\le s$。\n- $S(a)=0$。\n- $a_1+a_2+\\cdots+a_n=s$。\n\n试构造任意一组合法解或报告无解。", "inputFormat": "**本题包含多组数据。**\n\n- 第一行输入一个整数 $T$，表示数据组数。\n- 接下来 $T$ 行，每行输入两个整数 $s,m$。表示一组询问。", "outputFormat": "- 输出共 $T$ 行。\n- 对于每组数据：\n  - 若有解，首先输出一个整数 $n$，然后输出 $n$ 个整数，表示 $a$。\n  - 若无解，仅输出一行一个整数 $-1$。", "hint": "### 样例解释\n\n- 对于数据 $1$，容易发现 $3\\oplus5\\oplus6=0$，$3+5+6=14$。符合要求。\n- 对于数据 $2$，发现数列 $\\{3\\},\\{1,2\\},\\{1,1,1\\}$ 均不符合要求，故无解。\n\n### 数据范围与约定\n\n对于 $100\\%$ 的数据，有 $1\\le s\\le 10^{18}$，$1 \\le m$，$1 \\le \\sum m \\le 10^6$。\n\n**友情提示，您可能需要使用较快的 I/O 方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 C] 文文的构造游戏", "background": "**Problem Number:** [$\\textit{23}$](https://www.luogu.com.cn/training/1392)\n\n众所周知，射命丸文和琪露诺是好朋友。但是文是大妖怪，非常聪明，而琪露诺是个笨蛋。为了提升琪露诺的智商，文便给琪露诺出了一道简单的题目。", "description": "对于一个长度为 $l$ 的数列 $p$，定义 $S(p)$ 为所有元素的**异或和**，其中 $\\oplus$ 指[按位异或运算](https://baike.baidu.com/item/%E5%BC%82%E6%88%96%E6%93%8D%E4%BD%9C)。\n\n给定整数 $s,m$，判断能否构造一个长度为 $n$（$n$ 值自定）的数列 $a$，满足：\n\n- $1 \\le n \\le m$。\n- $1 \\le a_i \\le s$。\n- $S(a)=0$。\n- $a_1+a_2+\\cdots+a_n=s$。\n\n试构造任意一组合法解或报告无解。", "inputFormat": "**本题包含多组数据。**\n\n- 第一行输入一个整数 $T$，表示数据组数。\n- 接下来 $T$ 行，每行输入两个整数 $s,m$。表示一组询问。", "outputFormat": "- 输出共 $T$ 行。\n- 对于每组数据：\n  - 若有解，首先输出一个整数 $n$，然后输出 $n$ 个整数，表示 $a$。\n  - 若无解，仅输出一行一个整数 $-1$。", "hint": "### 样例解释\n\n- 对于数据 $1$，容易发现 $3\\oplus5\\oplus6=0$，$3+5+6=14$。符合要求。\n- 对于数据 $2$，发现数列 $\\{3\\},\\{1,2\\},\\{1,1,1\\}$ 均不符合要求，故无解。\n\n### 数据范围与约定\n\n对于 $100\\%$ 的数据，有 $1\\le s\\le 10^{18}$，$1 \\le m$，$1 \\le \\sum m \\le 10^6$。\n\n**友情提示，您可能需要使用较快的 I/O 方式。**", "locale": "zh-CN"}}}
{"pid": "P8469", "type": "P", "difficulty": 2, "samples": [["3\n1 2 3", "1 6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "数论", "洛谷原创", "O2优化", "最大公约数 gcd", "组合数学", "洛谷月赛"], "title": "[Aya Round 1 D] 文文的数学游戏", "background": "在解决了上一题之后，琪露诺觉得自己仿佛就是天才。于是，射命丸文又给了她一道简单的数学题。", "description": "给定长度为 $n$ 的整数序列 $a$，你需要构造一个长度为 $n$ 的整数序列 $b$ 满足对于所有 $1\\le i\\le n$，有 $1\\le b_i \\le a_i$。且 $\\gcd(b_1,b_2,\\cdots,b_n)$ 最大，其中 $\\gcd$ 表示最大公因数。试求出能得到的最大值和取得最大值时，不同的数列 $b$ 的个数，对 $10^9+7$ 取模。\n\n定义两个长度为 $L$ 的数列 $c,d$ 不同，当且仅当存在整数 $i(1 \\le i \\le L)$，使得 $c_i \\ne d_i$。", "inputFormat": "- 第一行一个输入整数 $n$。\n- 第二行输入 $n$ 个整数，表示序列 $a$。", "outputFormat": "- 输出一行两个整数。分别表示能得到到的最大 $\\gcd(b_1,b_2,\\cdots,b_n)$ 和对应的不同的 $b$ 的个数，对 $10^9+7$ 取模。", "hint": "### 样例 1 解释\n\n注意到由于 $1\\le b_1\\le a_1=1$，因此 $b_1$ 必须要为 $1$，因此最大的 $\\gcd$ 值只能为 $1$。在这个前提下，所有合法的 $b$ 如下：\n\n- $\\{1,1,1\\},\\{1,1,2\\},\\{1,1,3\\},\\{1,2,1\\},\\{1,2,2\\},\\{1,2,3\\}$。\n\n### 数据范围与约束\n\n对于 $100\\%$ 的数据，$1 \\le n\\le 10^5$，$1 \\le a_i\\le 10^9$。\n\n本题附带一组大样例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 D] 文文的数学游戏", "background": "在解决了上一题之后，琪露诺觉得自己仿佛就是天才。于是，射命丸文又给了她一道简单的数学题。", "description": "给定长度为 $n$ 的整数序列 $a$，你需要构造一个长度为 $n$ 的整数序列 $b$ 满足对于所有 $1\\le i\\le n$，有 $1\\le b_i \\le a_i$。且 $\\gcd(b_1,b_2,\\cdots,b_n)$ 最大，其中 $\\gcd$ 表示最大公因数。试求出能得到的最大值和取得最大值时，不同的数列 $b$ 的个数，对 $10^9+7$ 取模。\n\n定义两个长度为 $L$ 的数列 $c,d$ 不同，当且仅当存在整数 $i(1 \\le i \\le L)$，使得 $c_i \\ne d_i$。", "inputFormat": "- 第一行一个输入整数 $n$。\n- 第二行输入 $n$ 个整数，表示序列 $a$。", "outputFormat": "- 输出一行两个整数。分别表示能得到到的最大 $\\gcd(b_1,b_2,\\cdots,b_n)$ 和对应的不同的 $b$ 的个数，对 $10^9+7$ 取模。", "hint": "### 样例 1 解释\n\n注意到由于 $1\\le b_1\\le a_1=1$，因此 $b_1$ 必须要为 $1$，因此最大的 $\\gcd$ 值只能为 $1$。在这个前提下，所有合法的 $b$ 如下：\n\n- $\\{1,1,1\\},\\{1,1,2\\},\\{1,1,3\\},\\{1,2,1\\},\\{1,2,2\\},\\{1,2,3\\}$。\n\n### 数据范围与约束\n\n对于 $100\\%$ 的数据，$1 \\le n\\le 10^5$，$1 \\le a_i\\le 10^9$。\n\n本题附带一组大样例。", "locale": "zh-CN"}}}
{"pid": "P8470", "type": "P", "difficulty": 2, "samples": [["3\n1 1 2\n1 3 3\n1 2 4", "8\n20\n26"], ["6\n1 2 1\n2 1 4\n2 3 8\n3 2 6\n2 2 2\n2 2 11", "4\n20\n52\n76\n70\n90"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化", "洛谷月赛"], "title": "[Aya Round 1 E] 乙（two）", "background": "", "description": "定义由若干个边长为 $1$ 的正方体方块搭成的立体图形的「侧面积」为：对于所有方块，若它的前、后、左或右面没有紧贴着另一个方块，则该面计入侧面积。\n\n维护长宽均无限的矩形地面，地面被划分为若干个边长为 $1$ 的格子。$n$ 次操作，每次选择一个格子 $(x_i,y_i)$ 在该位置向上堆叠 $z_i$ 个边长为 $1$ 的正方体方块。每次操作后，输出整个立体图形的「侧面积」。", "inputFormat": "- 第一行输入一个整数 $n$。\n- 接下来 $n$ 行，每行输入三个整数 $x_i,y_i,z_i$。", "outputFormat": "- 输出共 $n$ 行，每行输出一个整数。表示每次操作后立体图形的「侧面积」。", "hint": "### 样例 1 解释\n\n如图所示，建立空间直角坐标系。其 $x$-轴向南、$y$-轴向东、$z$-轴向上。限于技术原因，此处仅给出斜二测画法的立体图形，请读者自行脑补立体图形其他角度的模样。图中绿色部分即为立体图形的侧面。\n\n第一次操作后，在 $(1,1)$ 位置放入了一个高度为 $2$ 的立体图形，侧面积为 $8$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ncd21a4f.png)\n\n第二次操作后，在 $(1,3)$ 位置放入了一个高度为 $3$ 的立体图形，侧面积为 $12$。由于两个立体图形没有接触，因此可以直接加上第一次放上的立体图形的侧面积，总侧面积为 $20$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hl9f45rq.png)\n\n第三次操作后，在 $(1,2)$ 位置放入了一个高度为 $4$ 的立体图形。由于某些面发生了接触，这些面对应的面积不计入侧面积的计算范围内。容易发现，总侧面积为 $26$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j8x2mtc8.png)\n\n---\n\n再强调下，每次堆叠操作是在对应位置上再加上 $z_i$ 个方块。例如下图，是先执行了 $\\verb!2 2 1!$，再执行了 $\\verb!2 2 3!$ 的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3lgipl4z.png)\n\n### 附加样例\n\n- 样例 $3$ 见下发文件中的 $\\textbf{\\textit{two3.in/two3.ans}}$。该样例满足测试点 $4$ 的限制。\n- 样例 $4$ 见下发文件中的 $\\textbf{\\textit{two4.in/two4.ans}}$。该样例满足测试点 $7$ 的限制。\n- 样例 $5$ 见下发文件中的 $\\textbf{\\textit{two5.in/two5.ans}}$。该样例满足测试点 $10$ 的限制。\n- 样例 $6$ 见下发文件中的 $\\textbf{\\textit{two6.in/two6.ans}}$。该样例满足测试点 $13$ 的限制。\n- 样例 $7$ 见下发文件中的 $\\textbf{\\textit{two7.in/two7.ans}}$。该样例满足测试点 $20$ 的限制。\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c||c|c|c|c|c|} \\hline\n\\textbf{\\textsf{\\#}} & \\bm{{n \\le }} & \\bm{{x,y \\le}} & \\bm{{z \\le}} & \\textbf{\\textsf{特殊性质}} &\n\\textbf{\\textsf{\\#}} & \\bm{{n \\le }} & \\bm{{x,y \\le}} & \\bm{{z \\le}} & \\textbf{\\textsf{特殊性质}} \\cr\\hline\n1 & 1 & 1 & 10 & - &\n14 & 10^3 & 10^3 & 10^3 & - \\cr\\hline\n2 & 2 & 5 & 10 & - &\n15 & 10^3 & 10^3 & 10^9 & - \\cr\\hline\n3 & 10 & 5 & 10 & - &\n16 & 10^3 & 10^9 & 10^9 & - \\cr\\hline\n4 & 100 & 100 & 100 & - &\n17 & 10^5 & 10^9 & 10^9 & \\textbf{AB} \\cr\\hline\n5 & 10^3 & 10^3 & 10^3 & \\textbf{AB} &\n18 & 10^5 & 10^9 & 10^9 & \\textbf{A} \\cr\\hline\n6 & 10^3 & 10^3 & 10^9 & \\textbf{AB} &\n19 & 10^5 & 10^9 & 10^9 & \\textbf{B} \\cr\\hline\n7 & 10^3 & 10^9 & 10^9 & \\textbf{AB} &\n20 & 10^5 & 10^9 & 10^9 & - \\cr\\hline\n8 & 10^3 & 10^3 & 10^3 & \\textbf{A} &\n21 & 2\\times 10^5 & 10^9 & 10^9 & - \\cr\\hline\n9 & 10^3 & 10^3 & 10^9 & \\textbf{A} &\n22 & 2\\times 10^5 & 10^9 & 10^{12} & - \\cr\\hline\n10 & 10^3 & 10^9 & 10^9 & \\textbf{A} &\n23 & 2\\times 10^5 & 10^9 & 10^{13} & \\textbf{A} \\cr\\hline\n11 & 10^3 & 10^3 & 10^3 & \\textbf{B} &\n24 & 2\\times 10^5 & 10^9 & 10^{13} & - \\cr\\hline\n12 & 10^3 & 10^3 & 10^9 & \\textbf{B} &\n25 & 3\\times 10^5 & 10^9 & 10^{13} & - \\cr\\hline\n13 & 10^3 & 10^9 & 10^9 & \\textbf{B} &&&&&\\cr\\hline\n\\end{array}\n$$\n\n- 特殊限制 $\\bf A$：$\\forall 1 \\le i\\le j \\le n$，有 $x_i=x_j$。\n- 特殊限制 $\\bf B$：$\\forall 1 \\le i\\le j \\le n$，有 $(x_i,y_i) \\ne (x_j,y_j)$。\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 3 \\times 10^5$，$1 \\le x,y \\le 10^9$，$1\\le z \\le 10^{13}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 E] 乙（two）", "background": "", "description": "定义由若干个边长为 $1$ 的正方体方块搭成的立体图形的「侧面积」为：对于所有方块，若它的前、后、左或右面没有紧贴着另一个方块，则该面计入侧面积。\n\n维护长宽均无限的矩形地面，地面被划分为若干个边长为 $1$ 的格子。$n$ 次操作，每次选择一个格子 $(x_i,y_i)$ 在该位置向上堆叠 $z_i$ 个边长为 $1$ 的正方体方块。每次操作后，输出整个立体图形的「侧面积」。", "inputFormat": "- 第一行输入一个整数 $n$。\n- 接下来 $n$ 行，每行输入三个整数 $x_i,y_i,z_i$。", "outputFormat": "- 输出共 $n$ 行，每行输出一个整数。表示每次操作后立体图形的「侧面积」。", "hint": "### 样例 1 解释\n\n如图所示，建立空间直角坐标系。其 $x$-轴向南、$y$-轴向东、$z$-轴向上。限于技术原因，此处仅给出斜二测画法的立体图形，请读者自行脑补立体图形其他角度的模样。图中绿色部分即为立体图形的侧面。\n\n第一次操作后，在 $(1,1)$ 位置放入了一个高度为 $2$ 的立体图形，侧面积为 $8$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ncd21a4f.png)\n\n第二次操作后，在 $(1,3)$ 位置放入了一个高度为 $3$ 的立体图形，侧面积为 $12$。由于两个立体图形没有接触，因此可以直接加上第一次放上的立体图形的侧面积，总侧面积为 $20$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hl9f45rq.png)\n\n第三次操作后，在 $(1,2)$ 位置放入了一个高度为 $4$ 的立体图形。由于某些面发生了接触，这些面对应的面积不计入侧面积的计算范围内。容易发现，总侧面积为 $26$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j8x2mtc8.png)\n\n---\n\n再强调下，每次堆叠操作是在对应位置上再加上 $z_i$ 个方块。例如下图，是先执行了 $\\verb!2 2 1!$，再执行了 $\\verb!2 2 3!$ 的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3lgipl4z.png)\n\n### 附加样例\n\n- 样例 $3$ 见下发文件中的 $\\textbf{\\textit{two3.in/two3.ans}}$。该样例满足测试点 $4$ 的限制。\n- 样例 $4$ 见下发文件中的 $\\textbf{\\textit{two4.in/two4.ans}}$。该样例满足测试点 $7$ 的限制。\n- 样例 $5$ 见下发文件中的 $\\textbf{\\textit{two5.in/two5.ans}}$。该样例满足测试点 $10$ 的限制。\n- 样例 $6$ 见下发文件中的 $\\textbf{\\textit{two6.in/two6.ans}}$。该样例满足测试点 $13$ 的限制。\n- 样例 $7$ 见下发文件中的 $\\textbf{\\textit{two7.in/two7.ans}}$。该样例满足测试点 $20$ 的限制。\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c||c|c|c|c|c|} \\hline\n\\textbf{\\textsf{\\#}} & \\bm{{n \\le }} & \\bm{{x,y \\le}} & \\bm{{z \\le}} & \\textbf{\\textsf{特殊性质}} &\n\\textbf{\\textsf{\\#}} & \\bm{{n \\le }} & \\bm{{x,y \\le}} & \\bm{{z \\le}} & \\textbf{\\textsf{特殊性质}} \\cr\\hline\n1 & 1 & 1 & 10 & - &\n14 & 10^3 & 10^3 & 10^3 & - \\cr\\hline\n2 & 2 & 5 & 10 & - &\n15 & 10^3 & 10^3 & 10^9 & - \\cr\\hline\n3 & 10 & 5 & 10 & - &\n16 & 10^3 & 10^9 & 10^9 & - \\cr\\hline\n4 & 100 & 100 & 100 & - &\n17 & 10^5 & 10^9 & 10^9 & \\textbf{AB} \\cr\\hline\n5 & 10^3 & 10^3 & 10^3 & \\textbf{AB} &\n18 & 10^5 & 10^9 & 10^9 & \\textbf{A} \\cr\\hline\n6 & 10^3 & 10^3 & 10^9 & \\textbf{AB} &\n19 & 10^5 & 10^9 & 10^9 & \\textbf{B} \\cr\\hline\n7 & 10^3 & 10^9 & 10^9 & \\textbf{AB} &\n20 & 10^5 & 10^9 & 10^9 & - \\cr\\hline\n8 & 10^3 & 10^3 & 10^3 & \\textbf{A} &\n21 & 2\\times 10^5 & 10^9 & 10^9 & - \\cr\\hline\n9 & 10^3 & 10^3 & 10^9 & \\textbf{A} &\n22 & 2\\times 10^5 & 10^9 & 10^{12} & - \\cr\\hline\n10 & 10^3 & 10^9 & 10^9 & \\textbf{A} &\n23 & 2\\times 10^5 & 10^9 & 10^{13} & \\textbf{A} \\cr\\hline\n11 & 10^3 & 10^3 & 10^3 & \\textbf{B} &\n24 & 2\\times 10^5 & 10^9 & 10^{13} & - \\cr\\hline\n12 & 10^3 & 10^3 & 10^9 & \\textbf{B} &\n25 & 3\\times 10^5 & 10^9 & 10^{13} & - \\cr\\hline\n13 & 10^3 & 10^9 & 10^9 & \\textbf{B} &&&&&\\cr\\hline\n\\end{array}\n$$\n\n- 特殊限制 $\\bf A$：$\\forall 1 \\le i\\le j \\le n$，有 $x_i=x_j$。\n- 特殊限制 $\\bf B$：$\\forall 1 \\le i\\le j \\le n$，有 $(x_i,y_i) \\ne (x_j,y_j)$。\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 3 \\times 10^5$，$1 \\le x,y \\le 10^9$，$1\\le z \\le 10^{13}$。", "locale": "zh-CN"}}}
{"pid": "P8471", "type": "P", "difficulty": 3, "samples": [["2\n3 2 3\nABABBA\n3 3 1\nAAABBB", "BBAABB\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "[Aya Round 1 F] 琪露诺的选择题", "background": "**Problem Number:** [$\\textit{24}$](https://www.luogu.com.cn/training/1392)\n\n在经过射命丸文的一番调教之后，琪露诺的智商总算增长了⑨点。\n\n现在寺子屋又要开始考试了，琪露诺通过一些手段知道了答案中的一些信息，而且因为她冰雪聪明，她不希望自己的成绩进步太明显，从而被老师上白泽慧音特别关照。因此她找到了你寻求一些帮助。\n\n（注意：考试作弊是不对的！）", "description": "有 $2\\cdot n$ 道选择题，每题有 $\\text{A}$ 和 $\\text{B}$ 两个选项。正确答案可以表示为一个长度为 $2\\cdot n$ 的字符串。\n\n现在你要构造出一份作答（长度同样为 $2\\cdot n$ 的字符串），其中**恰好**有 $a$ 个 $\\text{A}$，同时与正确答案相比，你的作答恰好有 $e$ 个错误。如果不存在这样的构造方案，报告无解。\n\n**注意：为了方便处理，本题保证 $e\\le n$。**\n\n**形式化地**，给定 $n,a,e$ 和一个长度为 $2\\cdot n$ 的 01 串 $s$，你需要构造出一个恰好有 $a$ 个字符是 $\\texttt 0$ 的长度为 $2\\cdot n$ 的 01 串 $p$，使得\n\n$$\n\\left(\\sum_{i=1}^{2\\cdot n}[s_i\\ne p_i]\\right)=e,\n$$\n\n其中 $[]$ 是 Iverson Bracket，详见「**说明/提示**」中的「提示」。", "inputFormat": "**本题含有多组数据。**\n\n第一行输入一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n- 第一行输入三个整数 $n,a,e$。\n- 第二行输入一个长度为 $2\\cdot n$ 的字符串，表示答案串。", "outputFormat": "输出共 $T$ 行。\n\n对于每组数据：\n\n- 若有解，输出一行一个长度为 $2\\cdot n$ 的字符串，表示你构造的作答串。\n- 若无解，输出一行一个字符串 $\\texttt{-1}$。", "hint": "### 样例解释\n\n对于数据 $1$，你构造出的作答串 $\\text{BB{\\color{e74c3c}AA}BB}$ 中恰好有 $2$ 个 $\\text A$，与答案串相比刚好有 $3$ 处不同（即，有 $3$ 处错误）：\n\n$$\n\\text{{\\color{e74c3c}A}BA{\\color{e74c3c}B}B{\\color{e74c3c}A}}\\\\\n\\text{{\\color{52c41a}B}BA{\\color{52c41a}A}B{\\color{52c41a}B}}\n$$\n\n故符合要求。\n\n对于数据 $2$，不存在合法构造方案。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le T\\le 100$，$1\\le n\\le 10^5$，$0\\le e\\le n$，$0\\le a\\le 2\\cdot n$。\n\n单组测试点内保证 $\\sum(2\\cdot n)\\le 10^6$。\n\n### 提示\n\n$\\textbf{A. Iverson Bracket}$\n\nIverson Bracket，是一种用方括号记号，如果方括号内的条件满足则为 $1$，不满足则为 $0$。更确切地讲，\n\n$$\n[P]=\\begin{cases}1, & \\text{If }P\\text{ is true,}\\\\0,&\\text{Otherwise.}\\end{cases}\n$$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 F] 琪露诺的选择题", "background": "**Problem Number:** [$\\textit{24}$](https://www.luogu.com.cn/training/1392)\n\n在经过射命丸文的一番调教之后，琪露诺的智商总算增长了⑨点。\n\n现在寺子屋又要开始考试了，琪露诺通过一些手段知道了答案中的一些信息，而且因为她冰雪聪明，她不希望自己的成绩进步太明显，从而被老师上白泽慧音特别关照。因此她找到了你寻求一些帮助。\n\n（注意：考试作弊是不对的！）", "description": "有 $2\\cdot n$ 道选择题，每题有 $\\text{A}$ 和 $\\text{B}$ 两个选项。正确答案可以表示为一个长度为 $2\\cdot n$ 的字符串。\n\n现在你要构造出一份作答（长度同样为 $2\\cdot n$ 的字符串），其中**恰好**有 $a$ 个 $\\text{A}$，同时与正确答案相比，你的作答恰好有 $e$ 个错误。如果不存在这样的构造方案，报告无解。\n\n**注意：为了方便处理，本题保证 $e\\le n$。**\n\n**形式化地**，给定 $n,a,e$ 和一个长度为 $2\\cdot n$ 的 01 串 $s$，你需要构造出一个恰好有 $a$ 个字符是 $\\texttt 0$ 的长度为 $2\\cdot n$ 的 01 串 $p$，使得\n\n$$\n\\left(\\sum_{i=1}^{2\\cdot n}[s_i\\ne p_i]\\right)=e,\n$$\n\n其中 $[]$ 是 Iverson Bracket，详见「**说明/提示**」中的「提示」。", "inputFormat": "**本题含有多组数据。**\n\n第一行输入一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n- 第一行输入三个整数 $n,a,e$。\n- 第二行输入一个长度为 $2\\cdot n$ 的字符串，表示答案串。", "outputFormat": "输出共 $T$ 行。\n\n对于每组数据：\n\n- 若有解，输出一行一个长度为 $2\\cdot n$ 的字符串，表示你构造的作答串。\n- 若无解，输出一行一个字符串 $\\texttt{-1}$。", "hint": "### 样例解释\n\n对于数据 $1$，你构造出的作答串 $\\text{BB{\\color{e74c3c}AA}BB}$ 中恰好有 $2$ 个 $\\text A$，与答案串相比刚好有 $3$ 处不同（即，有 $3$ 处错误）：\n\n$$\n\\text{{\\color{e74c3c}A}BA{\\color{e74c3c}B}B{\\color{e74c3c}A}}\\\\\n\\text{{\\color{52c41a}B}BA{\\color{52c41a}A}B{\\color{52c41a}B}}\n$$\n\n故符合要求。\n\n对于数据 $2$，不存在合法构造方案。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le T\\le 100$，$1\\le n\\le 10^5$，$0\\le e\\le n$，$0\\le a\\le 2\\cdot n$。\n\n单组测试点内保证 $\\sum(2\\cdot n)\\le 10^6$。\n\n### 提示\n\n$\\textbf{A. Iverson Bracket}$\n\nIverson Bracket，是一种用方括号记号，如果方括号内的条件满足则为 $1$，不满足则为 $0$。更确切地讲，\n\n$$\n[P]=\\begin{cases}1, & \\text{If }P\\text{ is true,}\\\\0,&\\text{Otherwise.}\\end{cases}\n$$", "locale": "zh-CN"}}}
{"pid": "P8472", "type": "P", "difficulty": 4, "samples": [["3 4 2\nBBGB\nGBBB\nPGPP", "8\nBBBB\nBBBB\nPGPP"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "洛谷月赛", "双指针 two-pointer"], "title": "[Aya Round 1 G] 咕噜论坛（post）", "background": "", "description": "「咕噜论坛」的一篇帖子下，有若干个不同的人对其进行了回复，这些评论形成了一个 $n\\times m$ 的矩阵。\n\n论坛管理员 prAB 发现这些评论者的名字颜色只有灰名、紫名和棕名三种，他决定「动用神权」来增加这些评论的整齐度。但是论坛站长超氧化铯（CsO2）可能会因为他「滥用神权」导致论坛「臭名昭著」而踢掉他的管理身份。所以 prAB **最多**只能动用 $k$ 次神权。已知他的神权有两种：\n\n- 「暴政警告」：送一个灰名进陶片使他变成棕名。\n- 「放人一马」：将一个棕名解封使他变成灰名。\n\n由于「咕噜论坛」的管理员是至高无上的，对于评论中的紫名他无能为力。\n\nprAB 认为在这些评论者的名字颜色中，最大的颜色相同的子矩阵的大小能代表这篇帖子评论的整齐度。所以他想知道，他动用完神权后评论的整齐度的最大值。", "inputFormat": "- 第一行输入三个整数 $n,m,k$。\n- 接下来 $n$ 行，每行输入一个长度为 $m$ 的字符串，代表评论矩阵中每个人名字的颜色。其中 `B` 代表棕名，`G` 代表灰名，`P` 代表紫名。", "outputFormat": "- 第一行输出一个整数，表示整齐度的最大值。\n- 下面 $n$ 行，每行输出一个长度为 $m$ 的字符串，格式同「输入格式」。代表修改完后每个人名字的颜色。如有多种方案输出则任意一种即可。", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 的数据，$1 \\le n,m\\le 500$，$0 \\le k \\le nm$。字符矩阵中只会出现大写字母 `B`、`G` 和 `P`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 G] 咕噜论坛（post）", "background": "", "description": "「咕噜论坛」的一篇帖子下，有若干个不同的人对其进行了回复，这些评论形成了一个 $n\\times m$ 的矩阵。\n\n论坛管理员 prAB 发现这些评论者的名字颜色只有灰名、紫名和棕名三种，他决定「动用神权」来增加这些评论的整齐度。但是论坛站长超氧化铯（CsO2）可能会因为他「滥用神权」导致论坛「臭名昭著」而踢掉他的管理身份。所以 prAB **最多**只能动用 $k$ 次神权。已知他的神权有两种：\n\n- 「暴政警告」：送一个灰名进陶片使他变成棕名。\n- 「放人一马」：将一个棕名解封使他变成灰名。\n\n由于「咕噜论坛」的管理员是至高无上的，对于评论中的紫名他无能为力。\n\nprAB 认为在这些评论者的名字颜色中，最大的颜色相同的子矩阵的大小能代表这篇帖子评论的整齐度。所以他想知道，他动用完神权后评论的整齐度的最大值。", "inputFormat": "- 第一行输入三个整数 $n,m,k$。\n- 接下来 $n$ 行，每行输入一个长度为 $m$ 的字符串，代表评论矩阵中每个人名字的颜色。其中 `B` 代表棕名，`G` 代表灰名，`P` 代表紫名。", "outputFormat": "- 第一行输出一个整数，表示整齐度的最大值。\n- 下面 $n$ 行，每行输出一个长度为 $m$ 的字符串，格式同「输入格式」。代表修改完后每个人名字的颜色。如有多种方案输出则任意一种即可。", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 的数据，$1 \\le n,m\\le 500$，$0 \\le k \\le nm$。字符矩阵中只会出现大写字母 `B`、`G` 和 `P`。", "locale": "zh-CN"}}}
{"pid": "P8473", "type": "P", "difficulty": 4, "samples": [["6 3\n1 2 3 5 8 13\n1 0 0 1 0 1\n1 5 10\n1 1 15\n2 2\n", "No\nNo\nYes\nNo"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "二分", "洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "[Aya Round 1 H] 破碎的历史", "background": "幻想乡迎来了它的毁灭，幻想的载体也已经遁入了幻想。\n\n所幸的是，幻想乡中的乡民们还侥幸存活着，她们在尝试恢复幻想乡的历史。然而历史之中的大大小小的事情不计其数，人们只能记得起一些大事情罢了。\n\n或许，根据那些重要的事情，可以把次要的事件推导出来呢？", "description": "数轴的正半轴上有 $n$ 个互不相同的被黑白染色的特殊整点，位置从左到右依次为 $p_1,p_2,\\cdots,p_n$。维护初始为空的**可重**线段集合 $S$。\n\n$q$ 次操作。操作分若干种，具体格式如下：\n\n- `1 l r`：将所有满足 $l \\le x \\le y \\le r$ 且两端点均为特殊整点的线段 $[x,y]$ 加入 $S$。\n- `2 x`：撤回第 $x$ 次操作添加的线段。\n\n在初始时和每次操作后，假设你可以进行任意次（可以是零次）染色。每次从 $S$ 中选出一条线段 $[x,y]$，满足位于点 $x$ 和点 $y$ 的特殊整点均为黑色，然后将所有在线段内的白色特殊整点染黑。试判断是否存在至少一种合法染色方式使得正半轴上的所有特殊整点均被染黑（即，不存在白色特殊整点）。**注意：所有的询问均为「假设」，即各组询问之间独立，不会造成对数轴的实际修改。**\n", "inputFormat": "- 第一行输入两个整数 $n,q$。\n- 第二行输入 $n$ 个整数 $p_1,p_2,\\cdots,p_n$，表示 $n$ 个特殊整点从左到右的位置。\n- 第三行输入 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，表示特殊整点的颜色。其中 $a_i=0$ 表示白色，$a_i=1$ 表示黑色。\n- 接下来 $q$ 行，每行二至三个整数，表示一次操作。\n", "outputFormat": "- 输出共 $(q+1)$ 行。\n- 在初始时和每次操作后，输出一行一个字符串：\n  - `yes` 代表存在合法染色方式。\n  - `no` 代表不存在合法染色方式。\n- 你可以输出字符串的任意大小写形式。例如：字符串 `yes`、`Yes`、`YES` 均会被视为表示存在合法染色方式。", "hint": "### 样例解释\n\n六个特殊点的位置/颜色在数轴正半轴上如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i1hfjrk8.png)\n\n容易发现，并非所有点都是黑点。因此在进行操作前，输出 $\\verb!NO!$。\n\n第一次操作后，一共往 $S$ 加入了三条线段：$[5,5],[8,8],[5,8]$（图中省略了端点重叠的线段）。容易发现，此时无法进行任何操作，因此没法将所有点变成黑点。输出 $\\verb!NO!$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ayeijyli.png)\n\n第二次操作后，又往 $S$ 中加入了 $20$ 条线段。除去端点重叠的选段，在 $S$ 中如图所示。（以示区别，上一次操作加入的边标成了深蓝色）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/icw9ar9m.png)\n\n可以找出一种方案，将图上所有特殊点变成黑点。具体而言，首先选择 $S$ 中 $[1,5]$ 线段（容易发现位于 $1$ 和 $5$ 的特殊点均为黑点，因此可以进行染色），那么可以把位于 $2$ 和 $3$ 的点染色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3k1uvul0.png)\n\n此时又可以选择 $S$ 中 $[3,13]$ 线段（在上一轮操作中，$3$ 号点变为了黑点，因此 $[3,13]$ 符合条件），将点 $8$ 染为黑色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ebafj63.png)\n\n此时所有点都为黑色，因此输出 $\\verb!YES!$。再次强调，询问之间互相独立，且只是询问是否存在染色方案，而不会对特殊整点进行实际上的染色操作。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pjqpqvtr.png)\n\n第三个操作撤回了第二个操作往 $S$ 里加入的所有线段。因此退回到了只有第一个操作的情况。不存在一种方案将所有点染黑，因此输出 $\\verb!NO!$。\n\n### 数据范围\n\n对于所有数据，$1 \\le n,q \\le 5 \\times 10^5$，$a_i \\in \\{0,1\\}$，$1 \\le l< r \\le 10^9$，$1 \\le p_i \\le 10^9$。保证 $p_i$ 单调递增，$2$ 操作撤销的只会是 $1$ 操作，且每个操作最多被撤销一次。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 H] 破碎的历史", "background": "幻想乡迎来了它的毁灭，幻想的载体也已经遁入了幻想。\n\n所幸的是，幻想乡中的乡民们还侥幸存活着，她们在尝试恢复幻想乡的历史。然而历史之中的大大小小的事情不计其数，人们只能记得起一些大事情罢了。\n\n或许，根据那些重要的事情，可以把次要的事件推导出来呢？", "description": "数轴的正半轴上有 $n$ 个互不相同的被黑白染色的特殊整点，位置从左到右依次为 $p_1,p_2,\\cdots,p_n$。维护初始为空的**可重**线段集合 $S$。\n\n$q$ 次操作。操作分若干种，具体格式如下：\n\n- `1 l r`：将所有满足 $l \\le x \\le y \\le r$ 且两端点均为特殊整点的线段 $[x,y]$ 加入 $S$。\n- `2 x`：撤回第 $x$ 次操作添加的线段。\n\n在初始时和每次操作后，假设你可以进行任意次（可以是零次）染色。每次从 $S$ 中选出一条线段 $[x,y]$，满足位于点 $x$ 和点 $y$ 的特殊整点均为黑色，然后将所有在线段内的白色特殊整点染黑。试判断是否存在至少一种合法染色方式使得正半轴上的所有特殊整点均被染黑（即，不存在白色特殊整点）。**注意：所有的询问均为「假设」，即各组询问之间独立，不会造成对数轴的实际修改。**\n", "inputFormat": "- 第一行输入两个整数 $n,q$。\n- 第二行输入 $n$ 个整数 $p_1,p_2,\\cdots,p_n$，表示 $n$ 个特殊整点从左到右的位置。\n- 第三行输入 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，表示特殊整点的颜色。其中 $a_i=0$ 表示白色，$a_i=1$ 表示黑色。\n- 接下来 $q$ 行，每行二至三个整数，表示一次操作。\n", "outputFormat": "- 输出共 $(q+1)$ 行。\n- 在初始时和每次操作后，输出一行一个字符串：\n  - `yes` 代表存在合法染色方式。\n  - `no` 代表不存在合法染色方式。\n- 你可以输出字符串的任意大小写形式。例如：字符串 `yes`、`Yes`、`YES` 均会被视为表示存在合法染色方式。", "hint": "### 样例解释\n\n六个特殊点的位置/颜色在数轴正半轴上如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i1hfjrk8.png)\n\n容易发现，并非所有点都是黑点。因此在进行操作前，输出 $\\verb!NO!$。\n\n第一次操作后，一共往 $S$ 加入了三条线段：$[5,5],[8,8],[5,8]$（图中省略了端点重叠的线段）。容易发现，此时无法进行任何操作，因此没法将所有点变成黑点。输出 $\\verb!NO!$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ayeijyli.png)\n\n第二次操作后，又往 $S$ 中加入了 $20$ 条线段。除去端点重叠的选段，在 $S$ 中如图所示。（以示区别，上一次操作加入的边标成了深蓝色）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/icw9ar9m.png)\n\n可以找出一种方案，将图上所有特殊点变成黑点。具体而言，首先选择 $S$ 中 $[1,5]$ 线段（容易发现位于 $1$ 和 $5$ 的特殊点均为黑点，因此可以进行染色），那么可以把位于 $2$ 和 $3$ 的点染色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3k1uvul0.png)\n\n此时又可以选择 $S$ 中 $[3,13]$ 线段（在上一轮操作中，$3$ 号点变为了黑点，因此 $[3,13]$ 符合条件），将点 $8$ 染为黑色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ebafj63.png)\n\n此时所有点都为黑色，因此输出 $\\verb!YES!$。再次强调，询问之间互相独立，且只是询问是否存在染色方案，而不会对特殊整点进行实际上的染色操作。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pjqpqvtr.png)\n\n第三个操作撤回了第二个操作往 $S$ 里加入的所有线段。因此退回到了只有第一个操作的情况。不存在一种方案将所有点染黑，因此输出 $\\verb!NO!$。\n\n### 数据范围\n\n对于所有数据，$1 \\le n,q \\le 5 \\times 10^5$，$a_i \\in \\{0,1\\}$，$1 \\le l< r \\le 10^9$，$1 \\le p_i \\le 10^9$。保证 $p_i$ 单调递增，$2$ 操作撤销的只会是 $1$ 操作，且每个操作最多被撤销一次。\n", "locale": "zh-CN"}}}
{"pid": "P8474", "type": "P", "difficulty": 3, "samples": [["3", "21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "「GLR-R3」立春", "background": "&emsp;&emsp;「从此雪消风自软，梅花合让柳条新」\n\n---\n\n&emsp;&emsp;“明天就要返校了呢。”\n\n&emsp;&emsp;灰色的长发被身后的人儿慢慢地顺着，顺着，于假期最后一个慵懒的清晨醒来，与春日的第一抹阳光迷迷糊糊地耳语，她的目光随着点过窗外的鸟雀，停留在那丛褐色的光秃枝丫。\n\n&emsp;&emsp;“天依？”\n\n&emsp;&emsp;赤红色的眸子随之望去，片刻，静默。\n\n&emsp;&emsp;“如果我能告诉它，今天是立春，是春天的……”\n\n&emsp;&emsp;“那么它会抽芽，繁盛，会成为我们窗外或红或绿的美妙。”\n\n&emsp;&emsp;“——因为它本该如此，希望如此吧。”\n\n---\n\n&emsp;&emsp;**立春**&emsp;「雏鸟站在悬崖上　展开了翅膀　地平线上的梦想　照进一缕光」\n", "description": "由于天依刚睡醒，害怕第一题的题面就迷糊了大家，所以本题只有简要题意。~~（其实是实在编不下去了。）~~\n\n设 $\\sigma$ 为任意一个长度为 $n$ 的排列，$\\tau(\\sigma)$ 表示其中的逆序对个数，请求出\n\n$$\n\\sum_\\sigma 2^{\\tau(\\sigma)}\n$$\n\n对 $(10^9+7)$ 取模的结果。", "inputFormat": "输入一行一个整数 $n$，表示排列的长度。", "outputFormat": "输出一行一个整数，表示所求得的答案。", "hint": "#### 题意解释\n\n本节为部分选手介绍**逆序对的定义**，对此熟悉的选手可以跳过本节。\n\n对于长度为 $n$ 的排列 $\\sigma$，假设下标从 $1$ 开始，那么我们称 $(i,j)$ 构成逆序对，当且仅当 $1\\le i<j\\le n$，并且 $\\sigma_i>\\sigma_j$；$\\tau(\\sigma)$ 则表示总共有多少对不同的 $(i,j)$ 满足上述条件。\n\n举个例子，对于排列 $\\sigma=\\lang 2,4,1,3\\rang$，有逆序对 $(1,3),(2,3),(2,4)$，所以 $\\tau(\\sigma)=3$。可见只要 $\\sigma$ 中元素的大小关系确定，$\\tau(\\sigma)$ 就是确定的。\n\n#### 样例 #1 解释\n\n$$\n\\begin{aligned}\n\\sum_{\\sigma}2^{\\tau(\\sigma)} &= 2^{\\tau(\\lang 1,2,3\\rang)}+2^{\\tau(\\lang 1,3,2\\rang)}+2^{\\tau(\\lang 2,1,3\\rang)}+2^{\\tau(\\lang 2,3,1\\rang)}+2^{\\tau(\\lang 3,1,2\\rang)}+2^{\\tau(\\lang 3,2,1\\rang)}\\\\\n&= 2^0+2^1+2^1+2^2+2^2+2^3\\\\\n&= 21.\n\\end{aligned}\n$$\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n| 子任务编号 |    $n$    | 分值 |\n| :--------: | :-------: | :--: |\n|    $1$     |  $\\le4$   | $5$  |\n|    $2$     |  $\\le10$  | $20$ |\n|    $3$     | $\\le100$  | $20$ |\n|    $4$     | $\\le10^3$ | $25$ |\n|    $5$     | $\\le10^7$ | $30$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R3」立春", "background": "&emsp;&emsp;「从此雪消风自软，梅花合让柳条新」\n\n---\n\n&emsp;&emsp;“明天就要返校了呢。”\n\n&emsp;&emsp;灰色的长发被身后的人儿慢慢地顺着，顺着，于假期最后一个慵懒的清晨醒来，与春日的第一抹阳光迷迷糊糊地耳语，她的目光随着点过窗外的鸟雀，停留在那丛褐色的光秃枝丫。\n\n&emsp;&emsp;“天依？”\n\n&emsp;&emsp;赤红色的眸子随之望去，片刻，静默。\n\n&emsp;&emsp;“如果我能告诉它，今天是立春，是春天的……”\n\n&emsp;&emsp;“那么它会抽芽，繁盛，会成为我们窗外或红或绿的美妙。”\n\n&emsp;&emsp;“——因为它本该如此，希望如此吧。”\n\n---\n\n&emsp;&emsp;**立春**&emsp;「雏鸟站在悬崖上　展开了翅膀　地平线上的梦想　照进一缕光」\n", "description": "由于天依刚睡醒，害怕第一题的题面就迷糊了大家，所以本题只有简要题意。~~（其实是实在编不下去了。）~~\n\n设 $\\sigma$ 为任意一个长度为 $n$ 的排列，$\\tau(\\sigma)$ 表示其中的逆序对个数，请求出\n\n$$\n\\sum_\\sigma 2^{\\tau(\\sigma)}\n$$\n\n对 $(10^9+7)$ 取模的结果。", "inputFormat": "输入一行一个整数 $n$，表示排列的长度。", "outputFormat": "输出一行一个整数，表示所求得的答案。", "hint": "#### 题意解释\n\n本节为部分选手介绍**逆序对的定义**，对此熟悉的选手可以跳过本节。\n\n对于长度为 $n$ 的排列 $\\sigma$，假设下标从 $1$ 开始，那么我们称 $(i,j)$ 构成逆序对，当且仅当 $1\\le i<j\\le n$，并且 $\\sigma_i>\\sigma_j$；$\\tau(\\sigma)$ 则表示总共有多少对不同的 $(i,j)$ 满足上述条件。\n\n举个例子，对于排列 $\\sigma=\\lang 2,4,1,3\\rang$，有逆序对 $(1,3),(2,3),(2,4)$，所以 $\\tau(\\sigma)=3$。可见只要 $\\sigma$ 中元素的大小关系确定，$\\tau(\\sigma)$ 就是确定的。\n\n#### 样例 #1 解释\n\n$$\n\\begin{aligned}\n\\sum_{\\sigma}2^{\\tau(\\sigma)} &= 2^{\\tau(\\lang 1,2,3\\rang)}+2^{\\tau(\\lang 1,3,2\\rang)}+2^{\\tau(\\lang 2,1,3\\rang)}+2^{\\tau(\\lang 2,3,1\\rang)}+2^{\\tau(\\lang 3,1,2\\rang)}+2^{\\tau(\\lang 3,2,1\\rang)}\\\\\n&= 2^0+2^1+2^1+2^2+2^2+2^3\\\\\n&= 21.\n\\end{aligned}\n$$\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n| 子任务编号 |    $n$    | 分值 |\n| :--------: | :-------: | :--: |\n|    $1$     |  $\\le4$   | $5$  |\n|    $2$     |  $\\le10$  | $20$ |\n|    $3$     | $\\le100$  | $20$ |\n|    $4$     | $\\le10^3$ | $25$ |\n|    $5$     | $\\le10^7$ | $30$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P8475", "type": "P", "difficulty": 3, "samples": [["7 20120712 21702102 4", "43"], ["10 114514 19198 10", "256"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "「GLR-R3」雨水", "background": "&emsp;&emsp;「天将化雨舒清景，萌动生机待绿田」\n\n---\n\n&emsp;&emsp;在天依面前口口声声说着习惯了，才开学没几天，文化课和乐队训练的压力可是又让阿绫头疼呢。\n\n&emsp;&emsp;浓缩为一个晚上的周末。站在阳台上，摸索朦胧于雨声的城市轮廓。雨水之日的雨，对于眼前的高楼大厦——们，恐怕也难有一些别样的意境吧。\n\n&emsp;&emsp;“雨水节令的雨、白露节令的露、霜降节令的霜、小雪节令的雪各十二钱……”\n\n&emsp;&emsp;胡乱想着，阿绫噗嗤一声笑了出来，“但是不管在哪里，雨中的空气，雨后的初阳，总是清新得叫人欢喜。”向着雨幕笑笑，拨弄这手里的旧吉他，不知不觉哼起那首歌来。\n\n---\n\n&emsp;&emsp;**雨水**&emsp;「等凉雨　的温度　将不安燥热中和　寻觅着　风的波折」", "description": "\n\n身后的门被敲响，接过天依包回来的一大盒多肉，放下东西贴贴一会儿之后，她们决定把多肉们在阳台上排成一排。\n\n多肉们的高度不尽相同，天依先将一共 $n$ 盆多肉随意排成一排，从左到右第 $i$ 盆的高度为 $a_i$。为了美观，她希望交换某些多肉的位置，使得由高度组成的序列 $A$ 的**字典序**尽可能小，不过，为了照顾多肉们的感受（？）她要求阿绫只能选取 $A$ 的一个**长度为偶数的子序列**（长度可以为 $0$），交换序列里第 $1$ 盆和第 $2$ 盆，第 $3$ 盆和第 $4$ 盆……的位置，然后放回它们原来的位置中。\n\n苦活交给了阿绫，思考的工作自然交给你啦！请告诉阿绫，仅使用**一次**选取子序列的操作，她能够得到的字典序最小的新高度序列 $A'$。\n\n#### 形式化题意\n\n给定一个长为 $n$ 的整数序列 $A$，下标从 $1$ 开始。你可以**任取一个**自然数 $k$ 以及一个序列 $\\lang 1,2,\\dots,n\\rang$ 的，长度为 $2k~(k\\in\\mathbb N)$ 的**子序列** $P$，并对于所有 $i=1,2,\\dots,k$，交换 $A_{P_{2i-1}}$ 与 $A_{P_{2i}}$ 的值。求在所有可能得到的新序列 $A'$ 中，**字典序** 最小的序列。\n\n**字典序**：对于长度为 $n$ 的序列 $A$ 和 $B$，定义 $A$ 的字典序小于 $B$，当且仅当：\n\n$$\n\\exists i\\in[1,n], (\\forall j\\in[1,i), A_j=B_j)\\land A_i<B_i.\n$$\n\n**注意**：本题输入输出方式具有特殊性。详见「输入格式」与「输出格式」。\n", "inputFormat": "为节省程序输入耗时，序列 $A$ 将在你的程序内部由 `xorShift128Plus` 和提供的种子生成。下面给出 C++ 语言下的示例程序：\n\n```cpp\n#include <cstdio> // scanf\n\nconst int MAXN = 712; // Set a right value according to your solution.\nint n, a[MAXN + 1];\n\nnamespace Generator {\n\nunsigned long long k1, k2;\nint thres;\n\ninline unsigned long long xorShift128Plus() {\n    unsigned long long k3 = k1, k4 = k2;\n    k1 = k4, k3 ^= (k3 << 23), k2 = k3 ^ k4 ^ (k3 >> 17) ^ (k4 >> 26);\n    return k2 + k4;\n}\n\ninline void generate() {\n    for (int i = 1; i <= n; ++i) {\n        a[i] = xorShift128Plus() % thres;\n    }\n}\n\n} // namespace Generator.\n\nint main() {\n    scanf(\"%d\", &n);\n    scanf(\"%llu %llu %d\", &Generator::k1, &Generator::k2, &Generator::thres);\n    Generator::generate();\n    // Now array a[1..n] represents the sequence A in the statement.\n    return 0;\n}\n```\n\n输入文件仅有一行，包含四个整数 $n,k_1,k_2,\\textit{thres}$。\n\n程序读入序列长度 $n$，种子 $k_1,k_2$ 和序列值上限 $\\textit{thres}$，用 `xorShift128Plus` 连续生成 $n$ 个随机数，将它们对 $\\textit{thres}$ 取模的值依次赋给 $a_1,a_2,\\cdots,a_n$，得到序列 $A$。请使用其他语言的选手自行查阅相关信息实现生成器。\n", "outputFormat": "为节省程序输出耗时，你的程序应当输出一行一个整数，表示 $\\left(\\sum_{i=1}^ni\\times A_i'\\right)\\bmod2^{64}$ 的值。\n", "hint": "#### 样例 #1 解释\n\n生成的序列为 $A=\\lang 1,1,3,0,0,1,3\\rang$，选取 $k=1,P=\\lang 1,5\\rang$, 得到答案序列为 $A'=\\lang 0,1,3,0,1,1,3\\rang$，按照要求计算知答案为 $43$。\n\n#### 样例 #2 解释\n\n生成的序列为 $A=\\lang 2,8,0,6,2,2,1,7,8,3\\rang$，选取 $k=3,P=\\lang 1,3,4,7,8,10\\rang$, 得到答案序列为 $A'=\\lang 0,8,2,1,2,2,6,3,8,7\\rang$，按照要求计算知答案为 $256$。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n对于 $100\\%$ 的测试数据，$1\\le n\\le10^7$，$2\\le \\textit{thres}\\le10^9$，$0\\le k_1,k_2<2^{64}$。\n\n对于不同的子任务，作如下约定：\n\n | 子任务编号 |    $n$    |     $\\textit{thres}$     | 特殊性质 | 分值 |\n| :--------: | :-------: | :---------: | :------: | :--: |\n|    $1$     | $\\le10^5$ |  $\\le10^9$   |  **有**  | $10$ |\n|    $2$     |   $\\le20$    | $\\le10$ |    无    | $15$ |\n|    $3$     | $\\le10^7$ | $=2$  |    无    | $20$ |\n|    $4$     | $\\le10^7$ | $\\le10^7$ |    无    | $25$ |\n|    $5$     | $\\le10^7$ | $\\le10^9$ |    无    | $30$ |\n\n- **特殊性质**：保证程序正确生成的序列 $A$ 中不存在相等元素。\n\n- **注意**：本题时限为 $0.5\\text s$。\n\n- ~~热知识：《世末歌者》演唱于夏日，显然不在雨水节气。~~\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R3」雨水", "background": "&emsp;&emsp;「天将化雨舒清景，萌动生机待绿田」\n\n---\n\n&emsp;&emsp;在天依面前口口声声说着习惯了，才开学没几天，文化课和乐队训练的压力可是又让阿绫头疼呢。\n\n&emsp;&emsp;浓缩为一个晚上的周末。站在阳台上，摸索朦胧于雨声的城市轮廓。雨水之日的雨，对于眼前的高楼大厦——们，恐怕也难有一些别样的意境吧。\n\n&emsp;&emsp;“雨水节令的雨、白露节令的露、霜降节令的霜、小雪节令的雪各十二钱……”\n\n&emsp;&emsp;胡乱想着，阿绫噗嗤一声笑了出来，“但是不管在哪里，雨中的空气，雨后的初阳，总是清新得叫人欢喜。”向着雨幕笑笑，拨弄这手里的旧吉他，不知不觉哼起那首歌来。\n\n---\n\n&emsp;&emsp;**雨水**&emsp;「等凉雨　的温度　将不安燥热中和　寻觅着　风的波折」", "description": "\n\n身后的门被敲响，接过天依包回来的一大盒多肉，放下东西贴贴一会儿之后，她们决定把多肉们在阳台上排成一排。\n\n多肉们的高度不尽相同，天依先将一共 $n$ 盆多肉随意排成一排，从左到右第 $i$ 盆的高度为 $a_i$。为了美观，她希望交换某些多肉的位置，使得由高度组成的序列 $A$ 的**字典序**尽可能小，不过，为了照顾多肉们的感受（？）她要求阿绫只能选取 $A$ 的一个**长度为偶数的子序列**（长度可以为 $0$），交换序列里第 $1$ 盆和第 $2$ 盆，第 $3$ 盆和第 $4$ 盆……的位置，然后放回它们原来的位置中。\n\n苦活交给了阿绫，思考的工作自然交给你啦！请告诉阿绫，仅使用**一次**选取子序列的操作，她能够得到的字典序最小的新高度序列 $A'$。\n\n#### 形式化题意\n\n给定一个长为 $n$ 的整数序列 $A$，下标从 $1$ 开始。你可以**任取一个**自然数 $k$ 以及一个序列 $\\lang 1,2,\\dots,n\\rang$ 的，长度为 $2k~(k\\in\\mathbb N)$ 的**子序列** $P$，并对于所有 $i=1,2,\\dots,k$，交换 $A_{P_{2i-1}}$ 与 $A_{P_{2i}}$ 的值。求在所有可能得到的新序列 $A'$ 中，**字典序** 最小的序列。\n\n**字典序**：对于长度为 $n$ 的序列 $A$ 和 $B$，定义 $A$ 的字典序小于 $B$，当且仅当：\n\n$$\n\\exists i\\in[1,n], (\\forall j\\in[1,i), A_j=B_j)\\land A_i<B_i.\n$$\n\n**注意**：本题输入输出方式具有特殊性。详见「输入格式」与「输出格式」。\n", "inputFormat": "为节省程序输入耗时，序列 $A$ 将在你的程序内部由 `xorShift128Plus` 和提供的种子生成。下面给出 C++ 语言下的示例程序：\n\n```cpp\n#include <cstdio> // scanf\n\nconst int MAXN = 712; // Set a right value according to your solution.\nint n, a[MAXN + 1];\n\nnamespace Generator {\n\nunsigned long long k1, k2;\nint thres;\n\ninline unsigned long long xorShift128Plus() {\n    unsigned long long k3 = k1, k4 = k2;\n    k1 = k4, k3 ^= (k3 << 23), k2 = k3 ^ k4 ^ (k3 >> 17) ^ (k4 >> 26);\n    return k2 + k4;\n}\n\ninline void generate() {\n    for (int i = 1; i <= n; ++i) {\n        a[i] = xorShift128Plus() % thres;\n    }\n}\n\n} // namespace Generator.\n\nint main() {\n    scanf(\"%d\", &n);\n    scanf(\"%llu %llu %d\", &Generator::k1, &Generator::k2, &Generator::thres);\n    Generator::generate();\n    // Now array a[1..n] represents the sequence A in the statement.\n    return 0;\n}\n```\n\n输入文件仅有一行，包含四个整数 $n,k_1,k_2,\\textit{thres}$。\n\n程序读入序列长度 $n$，种子 $k_1,k_2$ 和序列值上限 $\\textit{thres}$，用 `xorShift128Plus` 连续生成 $n$ 个随机数，将它们对 $\\textit{thres}$ 取模的值依次赋给 $a_1,a_2,\\cdots,a_n$，得到序列 $A$。请使用其他语言的选手自行查阅相关信息实现生成器。\n", "outputFormat": "为节省程序输出耗时，你的程序应当输出一行一个整数，表示 $\\left(\\sum_{i=1}^ni\\times A_i'\\right)\\bmod2^{64}$ 的值。\n", "hint": "#### 样例 #1 解释\n\n生成的序列为 $A=\\lang 1,1,3,0,0,1,3\\rang$，选取 $k=1,P=\\lang 1,5\\rang$, 得到答案序列为 $A'=\\lang 0,1,3,0,1,1,3\\rang$，按照要求计算知答案为 $43$。\n\n#### 样例 #2 解释\n\n生成的序列为 $A=\\lang 2,8,0,6,2,2,1,7,8,3\\rang$，选取 $k=3,P=\\lang 1,3,4,7,8,10\\rang$, 得到答案序列为 $A'=\\lang 0,8,2,1,2,2,6,3,8,7\\rang$，按照要求计算知答案为 $256$。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n对于 $100\\%$ 的测试数据，$1\\le n\\le10^7$，$2\\le \\textit{thres}\\le10^9$，$0\\le k_1,k_2<2^{64}$。\n\n对于不同的子任务，作如下约定：\n\n | 子任务编号 |    $n$    |     $\\textit{thres}$     | 特殊性质 | 分值 |\n| :--------: | :-------: | :---------: | :------: | :--: |\n|    $1$     | $\\le10^5$ |  $\\le10^9$   |  **有**  | $10$ |\n|    $2$     |   $\\le20$    | $\\le10$ |    无    | $15$ |\n|    $3$     | $\\le10^7$ | $=2$  |    无    | $20$ |\n|    $4$     | $\\le10^7$ | $\\le10^7$ |    无    | $25$ |\n|    $5$     | $\\le10^7$ | $\\le10^9$ |    无    | $30$ |\n\n- **特殊性质**：保证程序正确生成的序列 $A$ 中不存在相等元素。\n\n- **注意**：本题时限为 $0.5\\text s$。\n\n- ~~热知识：《世末歌者》演唱于夏日，显然不在雨水节气。~~\n", "locale": "zh-CN"}}}
{"pid": "P8476", "type": "P", "difficulty": 6, "samples": [["3 3\n4 5 2", "1"], ["10 5\n12 17 20 2 0 1 13 6 10 1", "26"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "二分", "洛谷原创", "O2优化", "动态规划优化", "洛谷月赛"], "title": "「GLR-R3」惊蛰", "background": "&emsp;&emsp;「微雨众卉新，一雷惊蛰始」\n\n---\n\n&emsp;&emsp;中午，休息室，阿绫肩膀上。\n\n&emsp;&emsp;“我有一个愿望，参加全国音乐祭，获奖，和阿绫一起，摆脱这训练的苦海。”\n\n&emsp;&emsp;“为热爱而到来，为抽身而努力……吗”。\n\n&emsp;&emsp;正午的阳光渗过窗帘，抚上困倦的人儿的脸颊。天依的左手悄悄搭上阿绫怀里的吉他，\n\n&emsp;&emsp;“铮——”\n\n&emsp;&emsp;蛰虫被雷声唤醒，没人向他们保证雨的降临。\n\n---\n\n&emsp;&emsp;**惊蛰**&emsp;「我愿把岁月磨成望镜寻遍这星空　将微光聚焦手心紧紧握住不放松」", "description": "比赛临近，各式测试也丰富了起来，作为天依他们的专业分析师，你的工作是统计分析队员们表现情况——总之，某领导要来慰问，所以你被要求修改出一份令人赏心悦目的分析报告。\n\n在已有的 $n$ 次测试中，对于某位特定的选手，他在第 $i$ 次测试的**波动值**是非负整数 $a_i$。波动值越小表示选手在测试中的心态和发挥越稳定，所以你需要“略微调整”波动值序列 $\\{a_n\\}$，得到另一个非负整数序列 $\\{b_n\\}$。不过，做人不能昧良心，但报告又必须好看，所以 $\\{b_n\\}$ 有如下要求：\n\n- $\\{b_n\\}$ **单调不递增**，选手越来越厉害嘛；\n\n- 对于每个 $i$，如果 $b_i<a_i$，老师会不高兴，所以你需要花费 $C$ 单位的精力说服老师（其中 $C$ 为给定常数）；\n- 对于每个 $i$，如果 $a_i\\le b_i$，选手会不高兴，而且可能很不高兴，所以你需要花费 $b_i-a_i$ 单位的精力安慰选手。\n\n你希望在满足条件的情况下，**最小化**花费的精力之和。作为成熟的信竞选手，你自然需要自己动手，求出这一最小化的结果。\n\n#### 形式化题意\n\n给定非负整数序列 $\\{a_n\\}$，定义函数 $f(x,y)$ 为\n\n$$\nf(x,y)=\\begin{cases}\nx-y,&x\\ge y\\\\\nC,&x< y\n\\end{cases},\n$$\n\n其中 $C$ 是给定常数。请构造一个**不增**非负整数序列 $\\{b_n\\}$，最小化\n\n$$\n\\sum_{i=1}^nf(b_i,a_i).\n$$\n\n你仅需输出这一最小化的结果。\n", "inputFormat": "第一行两个整数，表示序列长度 $n$ 和给定常数 $C$。\n\n接下来一行表示序列 $\\{a_n\\}$ 。", "outputFormat": "输出一行一个整数，表示最小化的结果。", "hint": "#### 样例 #1 解释\n\n构造 $\\{b_n\\}=\\{5,5,2\\}$，可见：\n\n$$\n\\begin{aligned}\n\\sum_{i=1}^nf(b_i,a_i) &=  f(5,4)+f(5,5)+f(2,2)\\\\\n&= 1+0+0\\\\\n&= 1.\n\\end{aligned}\n$$\n\n#### 样例 #2 解释\n\n构造 $\\{b_n\\}=\\{12,11,4,2,1,1,1,1,1,1\\}$，可以得到答案。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n设 $V$ 为序列 $\\{a_n\\}$ 中元素以及常数 $C$ 的值域。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^6$，$V\\subseteq[0,10^9]$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |   $n$   |       $V$       | 特殊性质 | 子任务分值 |\n| :--------: | :-------: | :-------------: | :------: | :--------: |\n|    $1$     | $\\le10^3$ | $\\subseteq[0,10^9]$ |    无    |    $25$    |\n|    $2$     | $\\le10^5$ | $\\subseteq[0,10^2]$ |  无   |    $15$    |\n|    $3$     | $\\le10^6$ | $\\subseteq[0,10^9]$ |  **A**   |    $5$    |\n|    $4$     | $\\le10^6$ | $\\subseteq[0,10^9]$ |  **B**   |    $15$    |\n|    $5$     | $\\le10^5$ | $\\subseteq[0,10^9]$ |  无   |    $20$    |\n|    $6$     | $\\le10^6$ |   $\\subseteq[0,10^9]$   |    无    |    $20$    |\n\n- **特殊性质 A**：对于常数 $C$ ，满足 $C = 0$。\n- **特殊性质 B**：对于序列 $\\{a_n\\}$ ，满足元素单调**递增**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R3」惊蛰", "background": "&emsp;&emsp;「微雨众卉新，一雷惊蛰始」\n\n---\n\n&emsp;&emsp;中午，休息室，阿绫肩膀上。\n\n&emsp;&emsp;“我有一个愿望，参加全国音乐祭，获奖，和阿绫一起，摆脱这训练的苦海。”\n\n&emsp;&emsp;“为热爱而到来，为抽身而努力……吗”。\n\n&emsp;&emsp;正午的阳光渗过窗帘，抚上困倦的人儿的脸颊。天依的左手悄悄搭上阿绫怀里的吉他，\n\n&emsp;&emsp;“铮——”\n\n&emsp;&emsp;蛰虫被雷声唤醒，没人向他们保证雨的降临。\n\n---\n\n&emsp;&emsp;**惊蛰**&emsp;「我愿把岁月磨成望镜寻遍这星空　将微光聚焦手心紧紧握住不放松」", "description": "比赛临近，各式测试也丰富了起来，作为天依他们的专业分析师，你的工作是统计分析队员们表现情况——总之，某领导要来慰问，所以你被要求修改出一份令人赏心悦目的分析报告。\n\n在已有的 $n$ 次测试中，对于某位特定的选手，他在第 $i$ 次测试的**波动值**是非负整数 $a_i$。波动值越小表示选手在测试中的心态和发挥越稳定，所以你需要“略微调整”波动值序列 $\\{a_n\\}$，得到另一个非负整数序列 $\\{b_n\\}$。不过，做人不能昧良心，但报告又必须好看，所以 $\\{b_n\\}$ 有如下要求：\n\n- $\\{b_n\\}$ **单调不递增**，选手越来越厉害嘛；\n\n- 对于每个 $i$，如果 $b_i<a_i$，老师会不高兴，所以你需要花费 $C$ 单位的精力说服老师（其中 $C$ 为给定常数）；\n- 对于每个 $i$，如果 $a_i\\le b_i$，选手会不高兴，而且可能很不高兴，所以你需要花费 $b_i-a_i$ 单位的精力安慰选手。\n\n你希望在满足条件的情况下，**最小化**花费的精力之和。作为成熟的信竞选手，你自然需要自己动手，求出这一最小化的结果。\n\n#### 形式化题意\n\n给定非负整数序列 $\\{a_n\\}$，定义函数 $f(x,y)$ 为\n\n$$\nf(x,y)=\\begin{cases}\nx-y,&x\\ge y\\\\\nC,&x< y\n\\end{cases},\n$$\n\n其中 $C$ 是给定常数。请构造一个**不增**非负整数序列 $\\{b_n\\}$，最小化\n\n$$\n\\sum_{i=1}^nf(b_i,a_i).\n$$\n\n你仅需输出这一最小化的结果。\n", "inputFormat": "第一行两个整数，表示序列长度 $n$ 和给定常数 $C$。\n\n接下来一行表示序列 $\\{a_n\\}$ 。", "outputFormat": "输出一行一个整数，表示最小化的结果。", "hint": "#### 样例 #1 解释\n\n构造 $\\{b_n\\}=\\{5,5,2\\}$，可见：\n\n$$\n\\begin{aligned}\n\\sum_{i=1}^nf(b_i,a_i) &=  f(5,4)+f(5,5)+f(2,2)\\\\\n&= 1+0+0\\\\\n&= 1.\n\\end{aligned}\n$$\n\n#### 样例 #2 解释\n\n构造 $\\{b_n\\}=\\{12,11,4,2,1,1,1,1,1,1\\}$，可以得到答案。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n设 $V$ 为序列 $\\{a_n\\}$ 中元素以及常数 $C$ 的值域。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^6$，$V\\subseteq[0,10^9]$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |   $n$   |       $V$       | 特殊性质 | 子任务分值 |\n| :--------: | :-------: | :-------------: | :------: | :--------: |\n|    $1$     | $\\le10^3$ | $\\subseteq[0,10^9]$ |    无    |    $25$    |\n|    $2$     | $\\le10^5$ | $\\subseteq[0,10^2]$ |  无   |    $15$    |\n|    $3$     | $\\le10^6$ | $\\subseteq[0,10^9]$ |  **A**   |    $5$    |\n|    $4$     | $\\le10^6$ | $\\subseteq[0,10^9]$ |  **B**   |    $15$    |\n|    $5$     | $\\le10^5$ | $\\subseteq[0,10^9]$ |  无   |    $20$    |\n|    $6$     | $\\le10^6$ |   $\\subseteq[0,10^9]$   |    无    |    $20$    |\n\n- **特殊性质 A**：对于常数 $C$ ，满足 $C = 0$。\n- **特殊性质 B**：对于序列 $\\{a_n\\}$ ，满足元素单调**递增**。", "locale": "zh-CN"}}}
{"pid": "P8477", "type": "P", "difficulty": 7, "samples": [["2", "2\n2 1 1 2 1\n1 1 1 2\n1 2 2 1\n2 2 2 1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "Special Judge", "洛谷月赛"], "title": "「GLR-R3」春分", "background": "&emsp;&emsp;「解冻群芳盛，馀寒百卉稀」\n\n---\n\n&emsp;&emsp;吉他　贝斯　键盘　架子鼓\n\n&emsp;&emsp;她们的声嗓　七八点的太阳光\n\n&emsp;&emsp;炖作一隅　所谓青春的模样\n\n&emsp;&emsp;可惜他们　还得把那胜负扛在\n\n&emsp;&emsp;佯作成熟的肩上\n\n---\n\n&emsp;&emsp;**春分**&emsp;「你我间有无形磁场　追赶着终有天碰撞　迸发火光吧」\n", "description": "休息室外的走廊上有一块电视屏幕，除了高考倒计时外，还偶尔整些无聊的活。练习的间隙，枕在某位阿绫腿上的天依竖起耳朵听着，但闻——\n\n今有一外国小哥，整了个笨重、花哨、无用的原电池装置，天依的脑补图如下：\n\n![figure1.png](https://cdn.luogu.com.cn/upload/image_hosting/ibdp8eyw.png)\n\n我们只关心中间的红色部分，它们是若干分隔板，用于分隔左右两侧的溶液。这些分隔板**可拆下，可任意顺序同时组装入任意块，可翻转左右方向**。\n\n现在小哥有两组溶液，第一组为 $X=\\{x_1,x_2,\\cdots,x_n\\}$，第二组为 $Y=\\{y_1,y_2,\\cdots,y_n\\}$，这 $2n$ 种溶液**两两不同**。小哥想将每种 $X$ 组内溶液置于容器左侧，每种 $Y$ 组内溶液置于容器右侧，一共进行 $n^2$ 次原电池实验。每次实验结束后，严谨的小哥会清洗装置，但是他不想清洗分隔板。\n\n实验过程中，若分隔板的某侧**直接接触**了实验溶液，则此种溶液会沾在分隔板对应侧。为了防止溶液的污染，任意分隔板沾上任何一种溶液的**一侧**都不能和**非同种**的实验用溶液接触。例如下图（红色竖线表示分隔板，蓝色标号表示两侧已沾上的溶液，黑色标号表示实验中的溶液，下同）：\n\n![explanation1.png](https://cdn.luogu.com.cn/upload/image_hosting/ezwggdwh.png)\n\n此外，若一次使用了多个分隔板，由于分隔板贴合紧密，所以若某块分隔板的一侧与另一分隔板沾有某种溶液的一侧相接触，这种溶液就会残留在两块分隔板各自的接触侧。例如下图（绿色标号表示本次实验后两块分隔板**新**沾上的溶液）：\n\n![explanation2.png](https://cdn.luogu.com.cn/upload/image_hosting/gjbad0ox.png)\n\n小哥称他希望用较少（**不必最少**）数量的分隔板完成所有实验，并邀请观众给出使用分隔板的数量 $m$ 和此时**依次进行**的 $n^2$ 次实验中，所用的左右两侧溶液种类以及使用分隔板的方案。\n\n天依预料到评论区的答案一定质量堪忧，所以邀请你来构造一个优秀的方案。\n", "inputFormat": "一行一个整数 $n$，表示集合 $X,Y$ 的大小。", "outputFormat": "输出 $n^2+1$ 行，描述你的构造。\n\n第一行一个整数 $m$，表示需要的集合分隔板的数量。**你应当保证 $1\\le m\\le 712$。** 为方便后文描述，将分隔板记为 $C_1,C_2,\\cdots,C_m$。\n\n接下来 $n^2$ 行，第 $i$ 行按次序进行的第 $i$ 次实验：\n\n1. 首先输出一个整数 $k\\in[1,m]$，表示本次实验安装的分隔板数量。\n\n2. 接着输出整数 $u\\in[1,n]$，表示左侧所用溶液为 $x_u$。\n\n3. 然后依次输出 $k$ 个整数 $p_1,p_2,\\cdots,p_k$。对于其中第 $t$ 个整数 $p_t\\in[-m,0)\\cup(0,m]$ 描述了从左到右第 $t$ 块分隔板：\n\n\t- 若 $p_t>0$，则其为 $C_{p_t}$；\n\n\t- 否则 $p_t<0$，则表示翻转 $C_{-p_t}$ 的左右面，然后将其安装。注意本次实验完成后，$C_{-p_t}$ 的默认左右面仍然是翻转前的左右面。（即翻转的效果**不会保持**。）\n\n4. 最后输出整数 $v\\in[1,n]$，表示右侧所用溶液为 $y_v$。\n\n一行内的多个整数间应用单个半角空格隔开，不允许行末出现多余的空格。不符合格式的答案可能被判为 Wrong Answer。\n", "hint": "#### 样例 #1 解释\n\n![figure2.png](https://cdn.luogu.com.cn/upload/image_hosting/je86hjkk.png)\n\n可以证明，这是 $n=2$ 时 $m$ 最小的一种方案。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le609$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |   $n$    | 子任务分值 |\n| :--------: | :------: | :--------: |\n|    $1$     | $\\le26$  |    $10$    |\n|    $2$     | $\\le356$ |    $10$    |\n|    $3$     | $\\le475$ |    $20$    |\n|    $4$     | $\\le534$ |    $20$    |\n|    $5$     | $\\le567$ |    $20$    |\n|    $6$     | $\\le592$ |    $10$    |\n|    $7$     | $\\le609$ |    $10$    |\n\n- **提示 1**：再次强调，你构造的方案**应当保证 $1\\le m\\le712$**。\n\n- **提示 2**：对于任意子任务，保证**针对该子任务的标算**的输出量不超过 $5\\times10^6$ 个整数。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R3」春分", "background": "&emsp;&emsp;「解冻群芳盛，馀寒百卉稀」\n\n---\n\n&emsp;&emsp;吉他　贝斯　键盘　架子鼓\n\n&emsp;&emsp;她们的声嗓　七八点的太阳光\n\n&emsp;&emsp;炖作一隅　所谓青春的模样\n\n&emsp;&emsp;可惜他们　还得把那胜负扛在\n\n&emsp;&emsp;佯作成熟的肩上\n\n---\n\n&emsp;&emsp;**春分**&emsp;「你我间有无形磁场　追赶着终有天碰撞　迸发火光吧」\n", "description": "休息室外的走廊上有一块电视屏幕，除了高考倒计时外，还偶尔整些无聊的活。练习的间隙，枕在某位阿绫腿上的天依竖起耳朵听着，但闻——\n\n今有一外国小哥，整了个笨重、花哨、无用的原电池装置，天依的脑补图如下：\n\n![figure1.png](https://cdn.luogu.com.cn/upload/image_hosting/ibdp8eyw.png)\n\n我们只关心中间的红色部分，它们是若干分隔板，用于分隔左右两侧的溶液。这些分隔板**可拆下，可任意顺序同时组装入任意块，可翻转左右方向**。\n\n现在小哥有两组溶液，第一组为 $X=\\{x_1,x_2,\\cdots,x_n\\}$，第二组为 $Y=\\{y_1,y_2,\\cdots,y_n\\}$，这 $2n$ 种溶液**两两不同**。小哥想将每种 $X$ 组内溶液置于容器左侧，每种 $Y$ 组内溶液置于容器右侧，一共进行 $n^2$ 次原电池实验。每次实验结束后，严谨的小哥会清洗装置，但是他不想清洗分隔板。\n\n实验过程中，若分隔板的某侧**直接接触**了实验溶液，则此种溶液会沾在分隔板对应侧。为了防止溶液的污染，任意分隔板沾上任何一种溶液的**一侧**都不能和**非同种**的实验用溶液接触。例如下图（红色竖线表示分隔板，蓝色标号表示两侧已沾上的溶液，黑色标号表示实验中的溶液，下同）：\n\n![explanation1.png](https://cdn.luogu.com.cn/upload/image_hosting/ezwggdwh.png)\n\n此外，若一次使用了多个分隔板，由于分隔板贴合紧密，所以若某块分隔板的一侧与另一分隔板沾有某种溶液的一侧相接触，这种溶液就会残留在两块分隔板各自的接触侧。例如下图（绿色标号表示本次实验后两块分隔板**新**沾上的溶液）：\n\n![explanation2.png](https://cdn.luogu.com.cn/upload/image_hosting/gjbad0ox.png)\n\n小哥称他希望用较少（**不必最少**）数量的分隔板完成所有实验，并邀请观众给出使用分隔板的数量 $m$ 和此时**依次进行**的 $n^2$ 次实验中，所用的左右两侧溶液种类以及使用分隔板的方案。\n\n天依预料到评论区的答案一定质量堪忧，所以邀请你来构造一个优秀的方案。\n", "inputFormat": "一行一个整数 $n$，表示集合 $X,Y$ 的大小。", "outputFormat": "输出 $n^2+1$ 行，描述你的构造。\n\n第一行一个整数 $m$，表示需要的集合分隔板的数量。**你应当保证 $1\\le m\\le 712$。** 为方便后文描述，将分隔板记为 $C_1,C_2,\\cdots,C_m$。\n\n接下来 $n^2$ 行，第 $i$ 行按次序进行的第 $i$ 次实验：\n\n1. 首先输出一个整数 $k\\in[1,m]$，表示本次实验安装的分隔板数量。\n\n2. 接着输出整数 $u\\in[1,n]$，表示左侧所用溶液为 $x_u$。\n\n3. 然后依次输出 $k$ 个整数 $p_1,p_2,\\cdots,p_k$。对于其中第 $t$ 个整数 $p_t\\in[-m,0)\\cup(0,m]$ 描述了从左到右第 $t$ 块分隔板：\n\n\t- 若 $p_t>0$，则其为 $C_{p_t}$；\n\n\t- 否则 $p_t<0$，则表示翻转 $C_{-p_t}$ 的左右面，然后将其安装。注意本次实验完成后，$C_{-p_t}$ 的默认左右面仍然是翻转前的左右面。（即翻转的效果**不会保持**。）\n\n4. 最后输出整数 $v\\in[1,n]$，表示右侧所用溶液为 $y_v$。\n\n一行内的多个整数间应用单个半角空格隔开，不允许行末出现多余的空格。不符合格式的答案可能被判为 Wrong Answer。\n", "hint": "#### 样例 #1 解释\n\n![figure2.png](https://cdn.luogu.com.cn/upload/image_hosting/je86hjkk.png)\n\n可以证明，这是 $n=2$ 时 $m$ 最小的一种方案。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le609$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |   $n$    | 子任务分值 |\n| :--------: | :------: | :--------: |\n|    $1$     | $\\le26$  |    $10$    |\n|    $2$     | $\\le356$ |    $10$    |\n|    $3$     | $\\le475$ |    $20$    |\n|    $4$     | $\\le534$ |    $20$    |\n|    $5$     | $\\le567$ |    $20$    |\n|    $6$     | $\\le592$ |    $10$    |\n|    $7$     | $\\le609$ |    $10$    |\n\n- **提示 1**：再次强调，你构造的方案**应当保证 $1\\le m\\le712$**。\n\n- **提示 2**：对于任意子任务，保证**针对该子任务的标算**的输出量不超过 $5\\times10^6$ 个整数。\n", "locale": "zh-CN"}}}
