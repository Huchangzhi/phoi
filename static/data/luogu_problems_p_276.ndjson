{"pid": "P6585", "type": "P", "difficulty": 6, "samples": [["4 1\n\n\n2 1\n", "\n0\n1 1\n\n4 -1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["交互题", "Special Judge", "洛谷月赛"], "title": "中子衰变", "background": "这是一道**交互题**。\n\n可能会用到的前置知识：\n\n质子带一个单位的正电荷。\n\n电子带一个单位的负电荷。\n\n中子不带电。", "description": "Youyou 和小 Z 面前有 $n$ 个中子，从左往右排成一行，这些中子被强作用力固定在编号为 $1 \\sim n$ 的位置上。\n\n小 Z 拥有一台弱作用衰变机 Wadm（Weak Action Decay Machine）。Wadm 每次可以使一个中子发生弱作用衰变，放出一个电子和一个质子（本题中不考虑中微子），然后 Wadm 会根据 Youyou 或小 Z 的指令，留下其中一个粒子，然后将另一个粒子移出体系。\n\n简而言之，Wadm 可以将一个中子变为一个电子或一个质子。\n\n现在小 Z 想和 Youyou 玩一个游戏：两个人轮流使用 Wadm 操作一个中子，将其变为一个电子或一个质子。然而，如果一个电子和质子相邻，那么由于强大的库仑引力的作用，它们会脱离强作用力的束缚，所以这种情况是不被允许的。如果轮到某人操作时，所有位置都不能操作了，那么他就输了。\n\nYouyou 快乐地答应了小 Z 的游戏请求，但是面对聪明的小 Z，Youyou 只好来求助你了。\n\n特别地，**如果全部中子最后变成了同种粒子，那么后手获胜**。\n\n如果你帮助 Youyou 打败了小 Z，那么 Youyou 就会送你一台 Wadm 作为奖励！\n\n## 交互方式\n\n你的程序应从标准输入中读入，向标准输出中输出。\n\n输入中将包含两个整数 `n task_id` ，分别代表题目中的 $n$ 和子任务编号。\n\n然后你需要输出一个整数 `order`，$\\text{order}$ 只能是 $0$ 或 $1$。$0$ 代表你选择先手，$1$ 代表你选择后手。\n\n接下来，你应该根据你选择的先后手情况通过标准输入输出与交互库进行交互。\n\n- 若轮到你操作，那么你应该接着输出两个整数 `place type`，代表你将位置在 $\\text{place}$ 的中子变为了电子（$\\text{type}=-1$）或质子（$\\text{type}=1$）。其中，你需要保证：\n  - $\\text{place} \\in [1,n]$ 且该位置可以操作；\n  - $\\text{type} \\in \\{-1,1\\}$；\n  - **你已经清空缓冲区**。在 C 或 C++ 中，可使用 `fflush(stdout)` 函数。在 C++ 中，还可使用 `cout << flush`，`cout.flush()`，或使用 `endl` 而不是 `'\\n'` 来输出一个换行。\n\n- 若轮到小 Z 操作，那么你应该接着读入两个整数 `place type`，代表小 Z 将位置在 $\\text{place}$ 的中子变为了电子（$\\text{type}=-1$）或质子（$\\text{type}=1$）。其中，保证：\n  - $\\text{place} \\in [1,n]$ 且该位置可以操作；\n  - $\\text{type} \\in \\{-1,1\\}$。\n\n例如，如果你选择先手，那么你应该按照「输出，输入，输出，输入……」的顺序进行交互。如果你选择后手，那么你应该按照「输入，输出，输入，输出……」的顺序进行交互。\n\n请注意，如果游戏结束，你应当立即终止程序。游戏结束后多余的输出可能会导致 RE 。", "inputFormat": "见「交互方式」。", "outputFormat": "见「交互方式」。", "hint": "* Subtask 1（5 分）：$n \\leq 4$；\n* Subtask 2（8 分）：$n \\leq 8$；\n* Subtask 3（12 分）：$n$ 为偶数，交互库特殊策略*；\n* Subtask 4（15 分）：交互库特殊策略*；\n* Subtask 5（20 分）：$n$ 为偶数；\n* Subtask 6（40 分）：无特殊限制。\n\n*交互库特殊策略：每次轮到交互库操作时，交互库会找到最左侧的能操作的位置，然后如果该位置能操作为质子，则操作为质子，否则操作为电子。\n\n对于全部的数据，保证 $1 \\leq n \\leq 2^{10}$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "中子衰变", "background": "这是一道**交互题**。\n\n可能会用到的前置知识：\n\n质子带一个单位的正电荷。\n\n电子带一个单位的负电荷。\n\n中子不带电。", "description": "Youyou 和小 Z 面前有 $n$ 个中子，从左往右排成一行，这些中子被强作用力固定在编号为 $1 \\sim n$ 的位置上。\n\n小 Z 拥有一台弱作用衰变机 Wadm（Weak Action Decay Machine）。Wadm 每次可以使一个中子发生弱作用衰变，放出一个电子和一个质子（本题中不考虑中微子），然后 Wadm 会根据 Youyou 或小 Z 的指令，留下其中一个粒子，然后将另一个粒子移出体系。\n\n简而言之，Wadm 可以将一个中子变为一个电子或一个质子。\n\n现在小 Z 想和 Youyou 玩一个游戏：两个人轮流使用 Wadm 操作一个中子，将其变为一个电子或一个质子。然而，如果一个电子和质子相邻，那么由于强大的库仑引力的作用，它们会脱离强作用力的束缚，所以这种情况是不被允许的。如果轮到某人操作时，所有位置都不能操作了，那么他就输了。\n\nYouyou 快乐地答应了小 Z 的游戏请求，但是面对聪明的小 Z，Youyou 只好来求助你了。\n\n特别地，**如果全部中子最后变成了同种粒子，那么后手获胜**。\n\n如果你帮助 Youyou 打败了小 Z，那么 Youyou 就会送你一台 Wadm 作为奖励！\n\n## 交互方式\n\n你的程序应从标准输入中读入，向标准输出中输出。\n\n输入中将包含两个整数 `n task_id` ，分别代表题目中的 $n$ 和子任务编号。\n\n然后你需要输出一个整数 `order`，$\\text{order}$ 只能是 $0$ 或 $1$。$0$ 代表你选择先手，$1$ 代表你选择后手。\n\n接下来，你应该根据你选择的先后手情况通过标准输入输出与交互库进行交互。\n\n- 若轮到你操作，那么你应该接着输出两个整数 `place type`，代表你将位置在 $\\text{place}$ 的中子变为了电子（$\\text{type}=-1$）或质子（$\\text{type}=1$）。其中，你需要保证：\n  - $\\text{place} \\in [1,n]$ 且该位置可以操作；\n  - $\\text{type} \\in \\{-1,1\\}$；\n  - **你已经清空缓冲区**。在 C 或 C++ 中，可使用 `fflush(stdout)` 函数。在 C++ 中，还可使用 `cout << flush`，`cout.flush()`，或使用 `endl` 而不是 `'\\n'` 来输出一个换行。\n\n- 若轮到小 Z 操作，那么你应该接着读入两个整数 `place type`，代表小 Z 将位置在 $\\text{place}$ 的中子变为了电子（$\\text{type}=-1$）或质子（$\\text{type}=1$）。其中，保证：\n  - $\\text{place} \\in [1,n]$ 且该位置可以操作；\n  - $\\text{type} \\in \\{-1,1\\}$。\n\n例如，如果你选择先手，那么你应该按照「输出，输入，输出，输入……」的顺序进行交互。如果你选择后手，那么你应该按照「输入，输出，输入，输出……」的顺序进行交互。\n\n请注意，如果游戏结束，你应当立即终止程序。游戏结束后多余的输出可能会导致 RE 。", "inputFormat": "见「交互方式」。", "outputFormat": "见「交互方式」。", "hint": "* Subtask 1（5 分）：$n \\leq 4$；\n* Subtask 2（8 分）：$n \\leq 8$；\n* Subtask 3（12 分）：$n$ 为偶数，交互库特殊策略*；\n* Subtask 4（15 分）：交互库特殊策略*；\n* Subtask 5（20 分）：$n$ 为偶数；\n* Subtask 6（40 分）：无特殊限制。\n\n*交互库特殊策略：每次轮到交互库操作时，交互库会找到最左侧的能操作的位置，然后如果该位置能操作为质子，则操作为质子，否则操作为电子。\n\n对于全部的数据，保证 $1 \\leq n \\leq 2^{10}$ 。", "locale": "zh-CN"}}}
{"pid": "P6586", "type": "P", "difficulty": 2, "samples": [["5\n1 2 3 4 5\n3\n1 3 5\n2", "Great Set!"], ["15\n13 2 10 3 1 12 8 4 5 7 9 6 15 14 11 \n7\n13 2 1 12 8 3 10 \n2", "8"], ["50\n13 2 10 50 1 28 37 32 30 46 19 47 33 41 24 34 27 42 49 18 9 48 23 35 31 8 7 12 6 5 3 22 43 36 11 40 26 4 44 17 39 38 15 14 25 16 29 20 21 45 \n10\n50 46 30 32 10 2 28 37 1 13 \n3", "31"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200]}, "tags": ["模拟", "2020"], "title": "『JROI-1』 蒟蒻火锅的盛宴", "background": "点击展开阅读更佳，**题目背景与解题无关。**\n\n----------\n传说专门服务神仙们的蒟蒻火锅店前面有一首诗：\n\n灶前无用煮青山，不识神炉自往还。\n\n玉碗琼浆谁乞赐，瑶琴银箭可容攀。\n\n风生夜气通云汉，雨歇秋光上碧湾。\n\n却笑老奴真倦眼，此心空处一团闲。\n\n----\nQiuly 是洛谷著名餐厅“蒟蒻火锅店”的主厨，当中的伙计很多，比如呆呆的 Aw 顿顿，机智的 Cocoly1990 还有珂爱的 45dino。Qiuly 喜欢让顿顿为他准备丰富多样的食材，制作火锅的必需品包括但不限于七星章鱼和芥末鱼子酱，当然，还有各种各样珍稀而奇怪的食材：\n\n- 蒟蒻果冻制成的蒟蒻团子。\n- 糯米（雾）制成的糯米青团。\n- Aw 顿顿制成的菜鸡糕。\n- Bamboo（45dino）。\n\n这些食材难以收集，但是神仙 Qiuly 还是全部弄到手了。接下来她要让顿顿**分类这些食材**。但是顿顿是菜鸡，根本不会分类，他崩溃了。于是他请你，IOI 的 AKer，帮助他分类这些食材，因为这个问题事关 Qiuly 的成绩（IOI 第一名还是第二名），所以你必须尽快。\n\n每一个食材都有各种各样的奇怪特性，根据这些特性，Aw 顿顿咨询了全世界的专家们，评价出了**一个食材的美味程度**，根据这个程度可以**有效的分类食材**。如果你不能**在 $\\bf 400$ 毫秒内**给出答案，你就会成为一个食材，光荣的沉没在 Qiuly 精心调制的汤底中。", "description": "有 $n$ 个互不相同的整数，现有 $m$ 个整数属于集合 $G$ 中。\n\nAw顿顿规定这个集合有如下规定：\n\n- 若 $x\\in G$，则 $x+a\\in G$。\n- 若 $x+a$ 不在 $n$ 个整数中就不做处理。\n- 若对于一个集合 $G$ 不存在需要加入的元素，那么它是完善的。\n\n若集合是完善的，输出 `Great Set!`，反之输出至少还要按规定加入几个食材才能完善该级别。", "inputFormat": "第一行是一个整数 $n$，表示一共有 $n$ 个整数。\n\n接下来一行存在 $n$ 个用空格隔开的整数 $A_i$，**互不相同**。\n\n下一行一个正整数 $m$，表示集合 $G$ 当中有 $m$ 个整数，均属于 $n$ 个整数当中。\n\n接下来一行是 $m$ 个用空格隔开的整数。\n\n最后是一个正整数 $a$。", "outputFormat": "如果这个集合已经完善，输出 `Great Set!`。\n\n反之输出需要完善该集合所需的整数数量。", "hint": "### 【样例解释】\n\n#### 样例 1 解释\n\n这个集合包含 $1,3,5$，其中 $1+2=3$，$3+2=5$，$5+2=7$ 不存在，所以这个集合是完善的。\n\n#### 样例 2 解释\n\n剩下的所有整数都属于这个集合。\n\n### 【数据范围】\n\n- $1\\le m<n\\le6\\times10^4$。\n- $1\\le A_i\\le n$。\n- $0\\le a\\le 10^4$。\n\n### 【捆绑测试情况】\n\n|测试点编号|时间限制|分数分配|$n,m\\le$|\n|:--------:|:------:|:------:|:------:|\n|$\\rm Subtask 1$|$\\rm 400ms$|$\\rm 10pts$|$10^3$|\n|$\\rm Subtask 2$|$\\rm 400ms$|$\\rm 15pts$|$10^4$|\n|$\\rm Subtask 3$|$\\rm 400ms$|$\\rm 35pts$|$3\\times 10^4$|\n|$\\rm Subtask 4$|$\\rm 400ms$|$\\rm 40pts$|$6\\times 10^4$|\n\n$\\rm P.S.$ 这题的时限已经开到 $\\rm std$ 的 $\\bf 15$ 倍，附件内有部分测试点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-1』 蒟蒻火锅的盛宴", "background": "点击展开阅读更佳，**题目背景与解题无关。**\n\n----------\n传说专门服务神仙们的蒟蒻火锅店前面有一首诗：\n\n灶前无用煮青山，不识神炉自往还。\n\n玉碗琼浆谁乞赐，瑶琴银箭可容攀。\n\n风生夜气通云汉，雨歇秋光上碧湾。\n\n却笑老奴真倦眼，此心空处一团闲。\n\n----\nQiuly 是洛谷著名餐厅“蒟蒻火锅店”的主厨，当中的伙计很多，比如呆呆的 Aw 顿顿，机智的 Cocoly1990 还有珂爱的 45dino。Qiuly 喜欢让顿顿为他准备丰富多样的食材，制作火锅的必需品包括但不限于七星章鱼和芥末鱼子酱，当然，还有各种各样珍稀而奇怪的食材：\n\n- 蒟蒻果冻制成的蒟蒻团子。\n- 糯米（雾）制成的糯米青团。\n- Aw 顿顿制成的菜鸡糕。\n- Bamboo（45dino）。\n\n这些食材难以收集，但是神仙 Qiuly 还是全部弄到手了。接下来她要让顿顿**分类这些食材**。但是顿顿是菜鸡，根本不会分类，他崩溃了。于是他请你，IOI 的 AKer，帮助他分类这些食材，因为这个问题事关 Qiuly 的成绩（IOI 第一名还是第二名），所以你必须尽快。\n\n每一个食材都有各种各样的奇怪特性，根据这些特性，Aw 顿顿咨询了全世界的专家们，评价出了**一个食材的美味程度**，根据这个程度可以**有效的分类食材**。如果你不能**在 $\\bf 400$ 毫秒内**给出答案，你就会成为一个食材，光荣的沉没在 Qiuly 精心调制的汤底中。", "description": "有 $n$ 个互不相同的整数，现有 $m$ 个整数属于集合 $G$ 中。\n\nAw顿顿规定这个集合有如下规定：\n\n- 若 $x\\in G$，则 $x+a\\in G$。\n- 若 $x+a$ 不在 $n$ 个整数中就不做处理。\n- 若对于一个集合 $G$ 不存在需要加入的元素，那么它是完善的。\n\n若集合是完善的，输出 `Great Set!`，反之输出至少还要按规定加入几个食材才能完善该级别。", "inputFormat": "第一行是一个整数 $n$，表示一共有 $n$ 个整数。\n\n接下来一行存在 $n$ 个用空格隔开的整数 $A_i$，**互不相同**。\n\n下一行一个正整数 $m$，表示集合 $G$ 当中有 $m$ 个整数，均属于 $n$ 个整数当中。\n\n接下来一行是 $m$ 个用空格隔开的整数。\n\n最后是一个正整数 $a$。", "outputFormat": "如果这个集合已经完善，输出 `Great Set!`。\n\n反之输出需要完善该集合所需的整数数量。", "hint": "### 【样例解释】\n\n#### 样例 1 解释\n\n这个集合包含 $1,3,5$，其中 $1+2=3$，$3+2=5$，$5+2=7$ 不存在，所以这个集合是完善的。\n\n#### 样例 2 解释\n\n剩下的所有整数都属于这个集合。\n\n### 【数据范围】\n\n- $1\\le m<n\\le6\\times10^4$。\n- $1\\le A_i\\le n$。\n- $0\\le a\\le 10^4$。\n\n### 【捆绑测试情况】\n\n|测试点编号|时间限制|分数分配|$n,m\\le$|\n|:--------:|:------:|:------:|:------:|\n|$\\rm Subtask 1$|$\\rm 400ms$|$\\rm 10pts$|$10^3$|\n|$\\rm Subtask 2$|$\\rm 400ms$|$\\rm 15pts$|$10^4$|\n|$\\rm Subtask 3$|$\\rm 400ms$|$\\rm 35pts$|$3\\times 10^4$|\n|$\\rm Subtask 4$|$\\rm 400ms$|$\\rm 40pts$|$6\\times 10^4$|\n\n$\\rm P.S.$ 这题的时限已经开到 $\\rm std$ 的 $\\bf 15$ 倍，附件内有部分测试点。", "locale": "zh-CN"}}}
{"pid": "P6587", "type": "P", "difficulty": 5, "samples": [["5 3\n1 2 3 4 6\n1 2 1\n1 1 1 3\n2 0 0", "7\n25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "字典树 Trie"], "title": "超超的序列 加强", "background": "孙1超总是喜欢疯言疯语，有一天，他随口说出了一串序列，又想对某几个特定位置的值进行修改和求和。由于孙1超十分菜，所以他来找你帮助。\n\n## 请不要抄题解。", "description": "给定序列 $a$，并且给出两种操作：\n- `1 x y v`：将所有 $a_i$ 的值加上 $v$，其中 $i\\equiv y\\pmod {2^x}$。\n- `2 x y`：询问所有 $a_i$ 的和，其中 $i\\equiv y\\pmod {2^ x}$。\n\n**本题强制在线。**\n\n\n", "inputFormat": "第一行 $n,m$ 两个整数。\n\n第二行 $n$ 个整数，第 $i$ 个表示 $a_i$。\n\n接下来若干行，每行给出若干个整数：\n\n当 $op=1$ 时，$op'$ 的后三个整数依次为该操作的 $x,y,v$；\n\n当 $op=2$ 时，$op'$ 的后两个个整数依次为该操作的 $x,y$。\n\n其中保证没有多余的数输入。\n\n每次操作的 $op=(\\operatorname{lastans}+op')\\bmod 2+1$。\n\n其中 $\\rm lastans$ 表示上一个输出的答案，若之前没有询问，则 $\\rm lastans=0$。", "outputFormat": "输出每次询问的结果。", "hint": "#### 样例解释\n对于样例 1：\n\n- 第一个操作 $op=2$，需要计算贡献的 $i$ 为 $1,5$，答案为 $7$。\n- 第二个操作 $op=1$， 需要加上 $3$ 的 $i$ 为 $1,3,5$，将 $a_1,a_3,a_5$ 加上 $3$。\n- 第三个操作 $op=2$， 需要计算贡献的 $i$ 为 $1,2,3,4,5$，答案为 $25$。\n\n#### 数据范围\n- 对于 $10\\%$ 的数据，$1\\le n,m \\leq 10^3$。\n- 对于 $70\\%$ 的数据，每一个操作后面有一个换行。 \n- 对于 $100\\%$ 的数据，$1\\le n,m \\leq 2\\times10^5$，$0 \\leq a_i,y,v,op'<10^7$。\n- 对于操作 1 和 2，$0\\leq x \\leq 20$ 且 $0 \\le y < 2^x$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "超超的序列 加强", "background": "孙1超总是喜欢疯言疯语，有一天，他随口说出了一串序列，又想对某几个特定位置的值进行修改和求和。由于孙1超十分菜，所以他来找你帮助。\n\n## 请不要抄题解。", "description": "给定序列 $a$，并且给出两种操作：\n- `1 x y v`：将所有 $a_i$ 的值加上 $v$，其中 $i\\equiv y\\pmod {2^x}$。\n- `2 x y`：询问所有 $a_i$ 的和，其中 $i\\equiv y\\pmod {2^ x}$。\n\n**本题强制在线。**\n\n\n", "inputFormat": "第一行 $n,m$ 两个整数。\n\n第二行 $n$ 个整数，第 $i$ 个表示 $a_i$。\n\n接下来若干行，每行给出若干个整数：\n\n当 $op=1$ 时，$op'$ 的后三个整数依次为该操作的 $x,y,v$；\n\n当 $op=2$ 时，$op'$ 的后两个个整数依次为该操作的 $x,y$。\n\n其中保证没有多余的数输入。\n\n每次操作的 $op=(\\operatorname{lastans}+op')\\bmod 2+1$。\n\n其中 $\\rm lastans$ 表示上一个输出的答案，若之前没有询问，则 $\\rm lastans=0$。", "outputFormat": "输出每次询问的结果。", "hint": "#### 样例解释\n对于样例 1：\n\n- 第一个操作 $op=2$，需要计算贡献的 $i$ 为 $1,5$，答案为 $7$。\n- 第二个操作 $op=1$， 需要加上 $3$ 的 $i$ 为 $1,3,5$，将 $a_1,a_3,a_5$ 加上 $3$。\n- 第三个操作 $op=2$， 需要计算贡献的 $i$ 为 $1,2,3,4,5$，答案为 $25$。\n\n#### 数据范围\n- 对于 $10\\%$ 的数据，$1\\le n,m \\leq 10^3$。\n- 对于 $70\\%$ 的数据，每一个操作后面有一个换行。 \n- 对于 $100\\%$ 的数据，$1\\le n,m \\leq 2\\times10^5$，$0 \\leq a_i,y,v,op'<10^7$。\n- 对于操作 1 和 2，$0\\leq x \\leq 20$ 且 $0 \\le y < 2^x$。\n", "locale": "zh-CN"}}}
{"pid": "P6588", "type": "P", "difficulty": 5, "samples": [["3 5\n1 1\n4 5\n1 4\n1 1 3 6\n2 3 3 0\n4 2 3\n3 2 3\n5 1 3", "12\n84"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "线段树"], "title": "『JROI-1』  向量", "background": "前言：虽然 SCR 已经并入了 JROI，但作为 JROI 的负责人，我还是想要感谢一下 SCR 出题组的**无私**奉献。出于对出题人的敬意。我们不会在题目背景故事上做大的改动，只会添加**小部分上下衔接**的语句。\n\n--------------\n\n蒟蒻火锅正在煮，自然要打一盘游戏了。\n\n小 L 是个喜欢打第五的初中生。这天他刚自学完了向量的基本运算，正在打第五时，他看着自己画出来的长短、方向各异的机关墙（他在玩疯眼），有了一个奇妙的想法。", "description": "小 L 有 $n$ 个向量 $\\overrightarrow{a_1},\\overrightarrow{a_2}\\ldots\\overrightarrow{a_n}$，他希望你能够帮他回答下面两个问题。\n\n+ 对于给定的 $l,r$，求出 \n\n$$\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\cdot\\overrightarrow{a_j}$$\n\n\n+ 对于给定的 $l,r$，求出 \n\n$$\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\oplus\\overrightarrow{a_j}$$\n\n随着时间的推移，这些向量也会不断发生变化，小 L 希望你在发生变化后仍然能给出答案。", "inputFormat": "第一行两个整数 $n,m$，分别代表向量个数和操作次数。  \n\n接下来 $n$ 行，每行两个整数 $x,y$，第 $i$ 行表示向量 $\\overrightarrow{a_i}$。  \n\n接下来 $m$ 行，每行首先有一个整数 $opt$ 表示操作序号，之后有若干个整数表示一次操作。一共有下面五种操作。\n\n1. 输入三个整数 $i,x,y(1\\leq i\\leq n)$，将 $\\overrightarrow{a_i}$ 加上 $(x,y)$。\n1. 输入三个整数 $i,x,y(1\\leq i\\leq n)$，将 $\\overrightarrow{a_i}$ 减去 $(x,y)$。\n1. 输入两个整数 $i,t(1\\leq i\\leq n)$，将 $\\overrightarrow{a_i}$ 修改为 $t\\overrightarrow{a_i}$。\n1. 输入两个整数 $l,r(1\\leq l<r\\leq n)$，求 $\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\cdot\\overrightarrow{a_j}$。\n1. 输入两个整数 $l,r(1\\leq l<r\\leq n)$，求 $\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\oplus\\overrightarrow{a_j}$。", "outputFormat": "对于所有的第四和第五种操作，一行有一个整数，为这次操作的答案。", "hint": "#### 样例 1 解释\n\n前两次操作后三个向量分别为 $(4,7),(4,5),(-2,4)$，之后询问结果为 $4 \\times(-2)+5\\times4=12$。\n\n下一次操作后三个向量分别为 $(4,7),(12,15),(-2,4)$，询问结果为 $(4\\times15-7\\times12)+[4\\times4-7\\times(-2)]+[12\\times4-15\\times(-2)]=-24+30+78=84$\n\n-----------\n#### 数据规模与约定\n**本题采用捆绑测试**。\n+ Subtask 1 ( $20\\%$ )：$n,m\\leq 100$。\n+ Subtask 2 ( $30\\%$ )：没有操作五。\n+ Subtask 3 ( $50\\%$ )：无特殊要求。\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 10^5$，$1\\leq m\\leq 10^5$，**保证对于任意时刻的向量 $\\overrightarrow{a_i}$，满足 $-1000\\leq x_i,y_i\\leq 1000$**。\n\n-----------\n#### 关于向量运算\n\n对于向量 $\\overrightarrow{a},\\overrightarrow{b}$ 和常数 $\\lambda$，假定 $\\overrightarrow{a},\\overrightarrow{b}$ 的坐标表示分别为 $(x_a,y_a),(x_b,y_b)$：\n\n+ $\\overrightarrow{a}+\\overrightarrow{b}=(x_a+x_b,y_a+y_b)$  \n+ $\\overrightarrow{a}-\\overrightarrow{b}=(x_a-x_b,y_a-y_b)$  \n+ $\\lambda\\overrightarrow{a}=(\\lambda x_a,\\lambda y_a)$  \n+ $\\overrightarrow{a}\\cdot\\overrightarrow{b}=x_ax_b+y_ay_b$  \n+ $\\overrightarrow{a}\\oplus\\overrightarrow{b}=x_ay_b-x_by_a$  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-1』  向量", "background": "前言：虽然 SCR 已经并入了 JROI，但作为 JROI 的负责人，我还是想要感谢一下 SCR 出题组的**无私**奉献。出于对出题人的敬意。我们不会在题目背景故事上做大的改动，只会添加**小部分上下衔接**的语句。\n\n--------------\n\n蒟蒻火锅正在煮，自然要打一盘游戏了。\n\n小 L 是个喜欢打第五的初中生。这天他刚自学完了向量的基本运算，正在打第五时，他看着自己画出来的长短、方向各异的机关墙（他在玩疯眼），有了一个奇妙的想法。", "description": "小 L 有 $n$ 个向量 $\\overrightarrow{a_1},\\overrightarrow{a_2}\\ldots\\overrightarrow{a_n}$，他希望你能够帮他回答下面两个问题。\n\n+ 对于给定的 $l,r$，求出 \n\n$$\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\cdot\\overrightarrow{a_j}$$\n\n\n+ 对于给定的 $l,r$，求出 \n\n$$\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\oplus\\overrightarrow{a_j}$$\n\n随着时间的推移，这些向量也会不断发生变化，小 L 希望你在发生变化后仍然能给出答案。", "inputFormat": "第一行两个整数 $n,m$，分别代表向量个数和操作次数。  \n\n接下来 $n$ 行，每行两个整数 $x,y$，第 $i$ 行表示向量 $\\overrightarrow{a_i}$。  \n\n接下来 $m$ 行，每行首先有一个整数 $opt$ 表示操作序号，之后有若干个整数表示一次操作。一共有下面五种操作。\n\n1. 输入三个整数 $i,x,y(1\\leq i\\leq n)$，将 $\\overrightarrow{a_i}$ 加上 $(x,y)$。\n1. 输入三个整数 $i,x,y(1\\leq i\\leq n)$，将 $\\overrightarrow{a_i}$ 减去 $(x,y)$。\n1. 输入两个整数 $i,t(1\\leq i\\leq n)$，将 $\\overrightarrow{a_i}$ 修改为 $t\\overrightarrow{a_i}$。\n1. 输入两个整数 $l,r(1\\leq l<r\\leq n)$，求 $\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\cdot\\overrightarrow{a_j}$。\n1. 输入两个整数 $l,r(1\\leq l<r\\leq n)$，求 $\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\oplus\\overrightarrow{a_j}$。", "outputFormat": "对于所有的第四和第五种操作，一行有一个整数，为这次操作的答案。", "hint": "#### 样例 1 解释\n\n前两次操作后三个向量分别为 $(4,7),(4,5),(-2,4)$，之后询问结果为 $4 \\times(-2)+5\\times4=12$。\n\n下一次操作后三个向量分别为 $(4,7),(12,15),(-2,4)$，询问结果为 $(4\\times15-7\\times12)+[4\\times4-7\\times(-2)]+[12\\times4-15\\times(-2)]=-24+30+78=84$\n\n-----------\n#### 数据规模与约定\n**本题采用捆绑测试**。\n+ Subtask 1 ( $20\\%$ )：$n,m\\leq 100$。\n+ Subtask 2 ( $30\\%$ )：没有操作五。\n+ Subtask 3 ( $50\\%$ )：无特殊要求。\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 10^5$，$1\\leq m\\leq 10^5$，**保证对于任意时刻的向量 $\\overrightarrow{a_i}$，满足 $-1000\\leq x_i,y_i\\leq 1000$**。\n\n-----------\n#### 关于向量运算\n\n对于向量 $\\overrightarrow{a},\\overrightarrow{b}$ 和常数 $\\lambda$，假定 $\\overrightarrow{a},\\overrightarrow{b}$ 的坐标表示分别为 $(x_a,y_a),(x_b,y_b)$：\n\n+ $\\overrightarrow{a}+\\overrightarrow{b}=(x_a+x_b,y_a+y_b)$  \n+ $\\overrightarrow{a}-\\overrightarrow{b}=(x_a-x_b,y_a-y_b)$  \n+ $\\lambda\\overrightarrow{a}=(\\lambda x_a,\\lambda y_a)$  \n+ $\\overrightarrow{a}\\cdot\\overrightarrow{b}=x_ax_b+y_ay_b$  \n+ $\\overrightarrow{a}\\oplus\\overrightarrow{b}=x_ay_b-x_by_a$  ", "locale": "zh-CN"}}}
{"pid": "P6589", "type": "P", "difficulty": 6, "samples": [["5 3 2\n1 2\n1 5\n4 5\n3 5\n1 3\n2 5\n1 5", "6 10\n10 20\n14 30"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 4500, 4500, 4500, 4500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "二分", "点分治", "平衡树", "O2优化"], "title": "『JROI-1』 关系树", "background": "小 L 有许多喜欢的游戏角色，他把这些游戏角色按照一定的关系联系起来。这些游戏角色和他们之间的关系构成了一棵树，小 L 把这棵树称之为「关系树」。", "description": "关系树是由 $n$ 个点和 $n-1$ 条无向边组成的一棵树。\n\n对于一张给定的图 $G$，定义图 $G$ 对于点集 $E$ 的 **顶点导出子图** 为点集 $E$ 和所有的 **两个端点都属于 $E$** 且属于原图 $G$ 的边组成的图。\n\n定义一张图是 **整洁的**，当且仅当图中任意两点 $u,v$，$u$ 和 $v$ **不连通** 或 **距离不超过** $k$。\n\n小 L 想要知道对于一组 $l,r(l \\leq r)$，有多少对 $(a,b)$，满足 $l\\leq a\\leq b\\leq r$，且所有序号在 $a$ 和 $b$ 之间（包括 $a,b$）的点组成的顶点导出子图是 **整洁的**。不仅如此，他还想问你所有的区间长度（即 $b-a+1$）之和。\n\n因为小 L 喜欢问问题，所以你一共需要回答 $q$ 组询问。", "inputFormat": "第一行有三个整数 $n$，$q$，$k$，意义如上。\n\n接下来 $n-1$ 行，每行两个整数 $u$，$v$，描述一条边。\n\n接下来 $q$ 行，每行两个整数 $l$，$r$，表示一组询问。", "outputFormat": "$q$ 行，每行两个整数，依次为满足的 $(a,b)$ 组数和所有的区间长度之和。", "hint": "#### 样例 1 解释\n\n形成的关系树如图\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zb12y5mq.png)\n\n满足的 $(a,b)$ 有 $(1,1),(1,2),(1,3),(1,4),(2,2),(2,3),(2,4),(2,5),(3,3),(3,4),(3,5),(4,4),(4,5),(5,5)$。\n\n三组询问的答案依次为 $6,10$，$10,20$，$14,30$。\n\n--------------------------------\n\n#### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n+ Subtask 1 ( $10\\%$ )：$n\\leq 2000$。\n+ Subtask 2 ( $30\\%$ )：$n\\leq 2\\times 10^4$，形成的关系树为一条链。\n+ Subtask 3 ( $60\\%$ )：$n\\leq 2\\times 10^4$。\n+ Subtask 4 ( 加强版数据，时限 $4.5s$ )：无特殊限制。\n\n对于 $100\\%$ 的测试点，保证 $1\\leq n \\leq 8\\times 10^4$，$1\\leq q \\leq 10^5$，$0\\leq k <n$，$1\\leq u,v,l,r \\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-1』 关系树", "background": "小 L 有许多喜欢的游戏角色，他把这些游戏角色按照一定的关系联系起来。这些游戏角色和他们之间的关系构成了一棵树，小 L 把这棵树称之为「关系树」。", "description": "关系树是由 $n$ 个点和 $n-1$ 条无向边组成的一棵树。\n\n对于一张给定的图 $G$，定义图 $G$ 对于点集 $E$ 的 **顶点导出子图** 为点集 $E$ 和所有的 **两个端点都属于 $E$** 且属于原图 $G$ 的边组成的图。\n\n定义一张图是 **整洁的**，当且仅当图中任意两点 $u,v$，$u$ 和 $v$ **不连通** 或 **距离不超过** $k$。\n\n小 L 想要知道对于一组 $l,r(l \\leq r)$，有多少对 $(a,b)$，满足 $l\\leq a\\leq b\\leq r$，且所有序号在 $a$ 和 $b$ 之间（包括 $a,b$）的点组成的顶点导出子图是 **整洁的**。不仅如此，他还想问你所有的区间长度（即 $b-a+1$）之和。\n\n因为小 L 喜欢问问题，所以你一共需要回答 $q$ 组询问。", "inputFormat": "第一行有三个整数 $n$，$q$，$k$，意义如上。\n\n接下来 $n-1$ 行，每行两个整数 $u$，$v$，描述一条边。\n\n接下来 $q$ 行，每行两个整数 $l$，$r$，表示一组询问。", "outputFormat": "$q$ 行，每行两个整数，依次为满足的 $(a,b)$ 组数和所有的区间长度之和。", "hint": "#### 样例 1 解释\n\n形成的关系树如图\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zb12y5mq.png)\n\n满足的 $(a,b)$ 有 $(1,1),(1,2),(1,3),(1,4),(2,2),(2,3),(2,4),(2,5),(3,3),(3,4),(3,5),(4,4),(4,5),(5,5)$。\n\n三组询问的答案依次为 $6,10$，$10,20$，$14,30$。\n\n--------------------------------\n\n#### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n+ Subtask 1 ( $10\\%$ )：$n\\leq 2000$。\n+ Subtask 2 ( $30\\%$ )：$n\\leq 2\\times 10^4$，形成的关系树为一条链。\n+ Subtask 3 ( $60\\%$ )：$n\\leq 2\\times 10^4$。\n+ Subtask 4 ( 加强版数据，时限 $4.5s$ )：无特殊限制。\n\n对于 $100\\%$ 的测试点，保证 $1\\leq n \\leq 8\\times 10^4$，$1\\leq q \\leq 10^5$，$0\\leq k <n$，$1\\leq u,v,l,r \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P6591", "type": "P", "difficulty": 3, "samples": [["2\n1 2\n", "1 2 "], ["4\n1 2\n2 3\n3 4\n", "1 4 \n"], ["9\n1 2\n1 3\n4 1\n5 1\n1 6\n1 9\n8 1\n1 7\n", "1 2 3 4 5 6 7 8 9 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化", "枚举", "深度优先搜索 DFS"], "title": "[YsOI2020] 植树", "background": "\nYsuperman 响应号召，决定在幼儿园里植树。", "description": "Ysuperman 有一棵 $n$ 个节点的无根树 $T$。如果你不知道树是什么，TA 很乐意告诉你，树是一个没有环的无向连通图。\n\n既然树是无根的，那就没有办法种植。Ysuperman 研究了很久的园艺，发现一个节点如果可以成为根，它必须十分平衡，这意味着以它为根时，与它**直接相连的节点，他们的子树大小都相同**。\n\n你作为幼儿园信息组一把手，Ysuperman 给你一棵树，你能在 $1s$ 内找到所有可能成为根的节点吗？", "inputFormat": "第一行一个正整数 $n$，表示树的节点个数。\n\n此后 $n-1$ 行，每行两个正整数 $u_i,v_i$，表示树上有一条直接连接 $u_i,v_i$ 的边。保证每条边只会给出一次。", "outputFormat": "不超过 $n$ 个从小到大的整数，用空格隔开，表示每一个可能成为根的节点。", "hint": "### 样例说明\n\n#### 样例说明 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gsiug69y.png)\n\n以 $1$ 为根时，与 $1$ 直接相连的点有 $\\{2\\}$，因为只有一个所以大小全部相同。\n\n以 $2$ 为根时，与 $2$ 直接相连的点有 $\\{1\\}$，因为只有一个所以大小全部相同。\n\n所以答案为 $1,2$。\n\n#### 样例说明 $2$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p7fsretv.png)\n\n以 $1$ 为根时，与 $1$ 直接相连的点有 $\\{2\\}$，因为只有一个所以大小全部相同。\n\n以 $2$ 为根时，与 $2$ 直接相连的点有 $\\{1,3\\}$，子树大小分别为 $\\{1,2\\}$，不相同。\n\n以 $3$ 为根时，与 $3$ 直接相连的点有 $\\{2,4\\}$，子树大小分别为 $\\{2,1\\}$，不相同。\n\n以 $4$ 为根时，与 $4$ 直接相连的点有 $\\{3\\}$，因为只有一个所以大小全部相同。\n\n所以答案为 $1,4$。\n\n----\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\rm{subtask}$ | $n$ |  分数|\n| :-----------: | :-----------: | :----: |\n| $1$ | $\\le 5000$ | $40$ |\n| $2$ | $\\le 10^6$ | $60$ |\n\n对于 $100\\%$ 的数据，满足 $1 \\le n\\le 10^6$。\n\n------\n\n### 提示\n\n由于输入输出量较大，你可能需要快速输入/输出。", "locale": "zh-CN", "translations": {"en": {"title": "[YsOI2020] Tree Planting", "background": "In response to the call, Ysuperman decides to plant trees in a kindergarten.", "description": "Ysuperman has an unrooted tree $T$ with $n$ nodes. If you do not know what a tree is, they are happy to tell you that a tree is an undirected connected graph without cycles.\n\nSince the tree is unrooted, there is no way to “plant” it. After studying gardening for a long time, Ysuperman finds that for a node to be able to serve as the root, it must be very balanced. This means that when it is chosen as the root, among the nodes **directly connected** to it, the sizes of their subtrees are all the same.\n\nAs the leader of the kindergarten IT group, given a tree by Ysuperman, can you find all nodes that can possibly be the root within $1\\text{s}$?", "inputFormat": "The first line contains a positive integer $n$, the number of nodes in the tree.\n\nThe next $n-1$ lines each contain two positive integers $u_i, v_i$, indicating that there is an edge directly connecting $u_i$ and $v_i$ in the tree. It is guaranteed that each edge is given exactly once.", "outputFormat": "Output at most $n$ integers in increasing order, separated by spaces, representing every node that can possibly be the root.", "hint": "### Sample Explanation\n\n#### Sample Explanation $1$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gsiug69y.png)\n\nWhen rooted at $1$, the nodes directly connected to $1$ are $\\{2\\}$. Since there is only one, all subtree sizes are the same.\n\nWhen rooted at $2$, the nodes directly connected to $2$ are $\\{1\\}$. Since there is only one, all subtree sizes are the same.\n\nSo the answer is $1, 2$.\n\n#### Sample Explanation $2$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p7fsretv.png)\n\nWhen rooted at $1$, the nodes directly connected to $1$ are $\\{2\\}$. Since there is only one, all subtree sizes are the same.\n\nWhen rooted at $2$, the nodes directly connected to $2$ are $\\{1, 3\\}$. Their subtree sizes are $\\{1, 2\\}$, which are not the same.\n\nWhen rooted at $3$, the nodes directly connected to $3$ are $\\{2, 4\\}$. Their subtree sizes are $\\{2, 1\\}$, which are not the same.\n\nWhen rooted at $4$, the nodes directly connected to $4$ are $\\{3\\}$. Since there is only one, all subtree sizes are the same.\n\nSo the answer is $1, 4$.\n\n----\n\n### Constraints\n\n**This problem uses bundled testdata.**\n\n| $\\rm{subtask}$ | $n$ |  Score |\n| :-----------: | :-----------: | :----: |\n| $1$ | $\\le 5000$ | $40$ |\n| $2$ | $\\le 10^6$ | $60$ |\n\nFor $100\\%$ of the data, $1 \\le n \\le 10^6$.\n\n------\n\n### Hint\n\nSince the input and output sizes are large, you may need fast I/O.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[YsOI2020] 植树", "background": "\nYsuperman 响应号召，决定在幼儿园里植树。", "description": "Ysuperman 有一棵 $n$ 个节点的无根树 $T$。如果你不知道树是什么，TA 很乐意告诉你，树是一个没有环的无向连通图。\n\n既然树是无根的，那就没有办法种植。Ysuperman 研究了很久的园艺，发现一个节点如果可以成为根，它必须十分平衡，这意味着以它为根时，与它**直接相连的节点，他们的子树大小都相同**。\n\n你作为幼儿园信息组一把手，Ysuperman 给你一棵树，你能在 $1s$ 内找到所有可能成为根的节点吗？", "inputFormat": "第一行一个正整数 $n$，表示树的节点个数。\n\n此后 $n-1$ 行，每行两个正整数 $u_i,v_i$，表示树上有一条直接连接 $u_i,v_i$ 的边。保证每条边只会给出一次。", "outputFormat": "不超过 $n$ 个从小到大的整数，用空格隔开，表示每一个可能成为根的节点。", "hint": "### 样例说明\n\n#### 样例说明 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gsiug69y.png)\n\n以 $1$ 为根时，与 $1$ 直接相连的点有 $\\{2\\}$，因为只有一个所以大小全部相同。\n\n以 $2$ 为根时，与 $2$ 直接相连的点有 $\\{1\\}$，因为只有一个所以大小全部相同。\n\n所以答案为 $1,2$。\n\n#### 样例说明 $2$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p7fsretv.png)\n\n以 $1$ 为根时，与 $1$ 直接相连的点有 $\\{2\\}$，因为只有一个所以大小全部相同。\n\n以 $2$ 为根时，与 $2$ 直接相连的点有 $\\{1,3\\}$，子树大小分别为 $\\{1,2\\}$，不相同。\n\n以 $3$ 为根时，与 $3$ 直接相连的点有 $\\{2,4\\}$，子树大小分别为 $\\{2,1\\}$，不相同。\n\n以 $4$ 为根时，与 $4$ 直接相连的点有 $\\{3\\}$，因为只有一个所以大小全部相同。\n\n所以答案为 $1,4$。\n\n----\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\rm{subtask}$ | $n$ |  分数|\n| :-----------: | :-----------: | :----: |\n| $1$ | $\\le 5000$ | $40$ |\n| $2$ | $\\le 10^6$ | $60$ |\n\n对于 $100\\%$ 的数据，满足 $1 \\le n\\le 10^6$。\n\n------\n\n### 提示\n\n由于输入输出量较大，你可能需要快速输入/输出。", "locale": "zh-CN"}}}
{"pid": "P6592", "type": "P", "difficulty": 5, "samples": [["5 7 5 0\n3 2\n1 2\n4 3\n5 4\n3 1\n5 3\n5 1\n3 1 4\n1 2 2\n5 5 6\n4 5 7\n2 1 7\n", "0\n1\n1\n0\n0\n"], ["5 12 10 0\n4 2\n4 2\n5 3\n3 3\n1 5\n1 4\n4 4\n2 4\n5 3\n1 5\n2 2\n4 1\n4 3 5\n4 2 3\n1 4 5\n3 1 8\n3 1 4\n3 5 5\n2 1 12\n4 10 12\n2 5 5\n1 1 3\n", "0\n0\n1\n0\n0\n0\n0\n1\n0\n1\n"], ["5 12 10 1\n4 2\n4 2\n5 3\n3 3\n1 5\n1 4\n4 4\n2 4\n5 3\n1 5\n2 2\n4 1\n4 3 5\n4 2 3\n1 4 5\n2 0 9\n2 0 5\n2 4 4\n3 0 13\n5 11 13\n0 7 7\n3 3 1", "0\n0\n1\n0\n0\n0\n0\n1\n0\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "二分", "可持久化线段树"], "title": "[YsOI2020] 幼儿园", "background": "", "description": "Ysuperman 热爱在 TA 的幼儿园里散步，为了更方便散步， TA 把幼儿园抽象成 $n$ 个点，$m$ 条边的**有向图**。 散步得多了， TA 就给了每一条边**无与伦比**的亲密程度：$1,2,\\cdots,m$，越大代表越亲密。 TA 也给了每一个点无与伦比的编号：$1,2,\\cdots,n$，其中 $1$ 代表着幼儿园大门，但是每个**点是没有亲密程度的**。\n\n接下来 $k$ 天，Ysuperman 每天会有一次散步计划。具体而言， TA 希望从 $x_i$ 号点出发，只经过**亲密程度属于区间 $[l_i,r_i]$ 的边**，走到幼儿园大门 $1$ 号点，期间经过的边的亲密程度必须**单调递减**，不然会因为 TA 有强迫症而不能回家。\n\n\nYsuperman 看着自己刚刚画的草稿脑子一团浆糊， TA 发现 TA 始终没有办法规划出这么多合理路线，现在 TA 想请你帮 TA 。具体而言，对于每一天的计划，如果可行，则输出 `1`，反之输出 `0`。\n\n当然啦，有的时候 Ysuperman 很着急，需要你立马回复，有的时候 TA 可以等等你，先把所有问题问完再等你回复。", "inputFormat": "第一行三个整数 $n,m,k,w$，分别表示节点个数、边个数、Ysuperman 的计划个数，和 Ysuperman 的焦急程度，此处的 $w$ 在后续输入中有用。\n\n此后 $m$ 行的第 $i$ 行有两个整数 $u_i,v_i$，表示 Ysuperman 的幼儿园里有一条 $u_i$ 号点到 $v_i$ 号点的单向边，且**亲密程度为** $i$。\n\n此后 $k$ 行的第 $i$ 行有三个整数 $x_i,l_i,r_i$，表示 Ysuperman 的第 $i$ 个计划。\n\n此处如果 $w=0$，则 $x_i,l_i,r_i$ 为明文，可以直接使用。\n\n如果 $w=1$，则 $x_i,l_i,r_i$ 为密文，你需要将它解密。解密操作是：令 $L$ 为之前所有询问的输出之和（没有询问过则为 $0$），你需要将 $x_i ,l_i,r_i$ 都异或 $L$。", "outputFormat": "$k$ 行，每行只可能是 `1` 或 `0`，第 $i$ 行的数表示第 $i$ 个计划是否可行。", "hint": "### 样例说明\n\n#### 样例说明 $1$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wxji6w6f.png)\n\n对于第 $2$ 条计划，Ysuperman 已经站在门口，所以计划可行。\n\n对于第 $3$ 条计划，Ysuperman 只能通过路径 $5 \\overset{6}{\\rightarrow}3 \\overset{5}{\\rightarrow} 1$。（箭头上方数字表示的是边的亲密程度）。\n\n其他计划都是不可行的。\n\n#### 样例说明 $3$\n\n样例三为加密后的样例二。\n\n----\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\mathrm{subtask}$ |     $n$     |       $m$        |        $k$        |  特殊性质   | 分数  |\n| :----------------: | :---------: | :--------------: | :---------------: | :---------: | :---: |\n|        $1 $        |   $\\le17$   |     $\\le17$      | $\\le 2\\cdot 10^5$ |      /      | $ 5$  |\n|        $2$         |  $\\le500$   |     $\\le500$     |     $\\le500 $     |      /      | $17$  |\n|        $3 $        | $\\le 3000$  |   $\\le 3000 $    |    $\\le 3000 $    |      /      | $18 $ |\n|       $ 4 $        |  $\\le10^5$  | $\\le2\\cdot10^5$  |  $\\le2\\cdot10^5$  |   $v_i=1$   | $13$  |\n|        $5 $        | $\\le 10^5$  | $\\le 2\\cdot10^5$ |    $\\le 10^5$     | $l_i=1,w=0$ | $ 7 $ |\n|        $6$         | $\\le10^5 $  | $\\le2\\cdot10^5$  |    $\\le 10^5$     |   $w=0 $    | $13 $ |\n|        $7$         | $ \\le 10^5$ | $\\le 2\\cdot10^5$ | $\\le 2\\cdot10^5$  |      /      | $27$  |\n\n对于 $100\\%$ 的数据，满足 $1 \\le n \\le 10^5 ,1 \\le m \\le 2\\cdot10^5 ,0 \\le k \\le 2\\cdot10^5$。\n\n$w\\in\\{0,1\\},1 \\le u_i,v_i \\le n$。\n\n$x_i,l_i,r_i$ 在解密后保证 $1\\le x \\le n ,1 \\le l_i,r_i \\le m $。\n\n### 提示\n\n**不保证不出现重边自环，不保证图联通**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2020] 幼儿园", "background": "", "description": "Ysuperman 热爱在 TA 的幼儿园里散步，为了更方便散步， TA 把幼儿园抽象成 $n$ 个点，$m$ 条边的**有向图**。 散步得多了， TA 就给了每一条边**无与伦比**的亲密程度：$1,2,\\cdots,m$，越大代表越亲密。 TA 也给了每一个点无与伦比的编号：$1,2,\\cdots,n$，其中 $1$ 代表着幼儿园大门，但是每个**点是没有亲密程度的**。\n\n接下来 $k$ 天，Ysuperman 每天会有一次散步计划。具体而言， TA 希望从 $x_i$ 号点出发，只经过**亲密程度属于区间 $[l_i,r_i]$ 的边**，走到幼儿园大门 $1$ 号点，期间经过的边的亲密程度必须**单调递减**，不然会因为 TA 有强迫症而不能回家。\n\n\nYsuperman 看着自己刚刚画的草稿脑子一团浆糊， TA 发现 TA 始终没有办法规划出这么多合理路线，现在 TA 想请你帮 TA 。具体而言，对于每一天的计划，如果可行，则输出 `1`，反之输出 `0`。\n\n当然啦，有的时候 Ysuperman 很着急，需要你立马回复，有的时候 TA 可以等等你，先把所有问题问完再等你回复。", "inputFormat": "第一行三个整数 $n,m,k,w$，分别表示节点个数、边个数、Ysuperman 的计划个数，和 Ysuperman 的焦急程度，此处的 $w$ 在后续输入中有用。\n\n此后 $m$ 行的第 $i$ 行有两个整数 $u_i,v_i$，表示 Ysuperman 的幼儿园里有一条 $u_i$ 号点到 $v_i$ 号点的单向边，且**亲密程度为** $i$。\n\n此后 $k$ 行的第 $i$ 行有三个整数 $x_i,l_i,r_i$，表示 Ysuperman 的第 $i$ 个计划。\n\n此处如果 $w=0$，则 $x_i,l_i,r_i$ 为明文，可以直接使用。\n\n如果 $w=1$，则 $x_i,l_i,r_i$ 为密文，你需要将它解密。解密操作是：令 $L$ 为之前所有询问的输出之和（没有询问过则为 $0$），你需要将 $x_i ,l_i,r_i$ 都异或 $L$。", "outputFormat": "$k$ 行，每行只可能是 `1` 或 `0`，第 $i$ 行的数表示第 $i$ 个计划是否可行。", "hint": "### 样例说明\n\n#### 样例说明 $1$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wxji6w6f.png)\n\n对于第 $2$ 条计划，Ysuperman 已经站在门口，所以计划可行。\n\n对于第 $3$ 条计划，Ysuperman 只能通过路径 $5 \\overset{6}{\\rightarrow}3 \\overset{5}{\\rightarrow} 1$。（箭头上方数字表示的是边的亲密程度）。\n\n其他计划都是不可行的。\n\n#### 样例说明 $3$\n\n样例三为加密后的样例二。\n\n----\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\mathrm{subtask}$ |     $n$     |       $m$        |        $k$        |  特殊性质   | 分数  |\n| :----------------: | :---------: | :--------------: | :---------------: | :---------: | :---: |\n|        $1 $        |   $\\le17$   |     $\\le17$      | $\\le 2\\cdot 10^5$ |      /      | $ 5$  |\n|        $2$         |  $\\le500$   |     $\\le500$     |     $\\le500 $     |      /      | $17$  |\n|        $3 $        | $\\le 3000$  |   $\\le 3000 $    |    $\\le 3000 $    |      /      | $18 $ |\n|       $ 4 $        |  $\\le10^5$  | $\\le2\\cdot10^5$  |  $\\le2\\cdot10^5$  |   $v_i=1$   | $13$  |\n|        $5 $        | $\\le 10^5$  | $\\le 2\\cdot10^5$ |    $\\le 10^5$     | $l_i=1,w=0$ | $ 7 $ |\n|        $6$         | $\\le10^5 $  | $\\le2\\cdot10^5$  |    $\\le 10^5$     |   $w=0 $    | $13 $ |\n|        $7$         | $ \\le 10^5$ | $\\le 2\\cdot10^5$ | $\\le 2\\cdot10^5$  |      /      | $27$  |\n\n对于 $100\\%$ 的数据，满足 $1 \\le n \\le 10^5 ,1 \\le m \\le 2\\cdot10^5 ,0 \\le k \\le 2\\cdot10^5$。\n\n$w\\in\\{0,1\\},1 \\le u_i,v_i \\le n$。\n\n$x_i,l_i,r_i$ 在解密后保证 $1\\le x \\le n ,1 \\le l_i,r_i \\le m $。\n\n### 提示\n\n**不保证不出现重边自环，不保证图联通**。", "locale": "zh-CN"}}}
{"pid": "P6593", "type": "P", "difficulty": 5, "samples": [["5\n1 1\n1 1 1\n3 5\n1 1 2\n6 62\n3 2 1\n23 13\n10 10 10\n233 10\n233 233 233\n", "5\n545\n114514\n55555555554444444441111\n-1\n"], ["5\n100 64\n33 33 34\n114 63\n33 33 50\n115 62\n111 11 1\n192 60\n8 1 7\n233 64\n100 100 33\n", "5555555555555555555555555555555555444444444444444444444444444441111111111111111111111111111111414144\n555555555555555555555555555555555555555555555555444444444444444444444444444444441111411111111111111111111111111111\n5444444444111111111114111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111114\n-1\n55555555555555555555555555555555544444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444411111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111414144\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "状压 DP"], "title": "[YsOI2020] 义已失吾亦死", "background": "> 义已失吾亦死！亦久亦旧罢以龄。\n\n本题添加了 HACK 数据。并且愿意接受更多的 HACK 数据。", "description": "Ysuperman 的幼儿园不仅注重文化课、竞赛课的教学，还教授大家德智体美全面发展。这一天是周末，德智体美全面发展的 Ysuperman 爬上了 Y 山。\n\nYsuperman 爬山并不走行车的大路，而是走旁边的泥土山路。走了很远，他猛然发现回头的路已变得模糊，挡在他面前的是巨大的石壁。他震惊地发现，石壁上竟然写有上个世纪的文字！“义已失吾亦死”他看着这些文字，仿佛有一种特殊的魅力。\n\n回到幼儿园，兴奋的 Ysuperman 立即创造了其他的句子，但他却发现这些句子大部分都失去了魅力。经过两年半的钻研，TA 终于发现，“义已失吾亦死”，对应的其实是 $114514$ 这串数字！研究方向变得更加明确，他决定研究把一个句子映射到一个数字里，一个有魅力的数字满足如下条件：\n\n- 十进制，是自然数；\n\n- 数位(digit)仅仅包含 $1,4,5$ 三种数字；\n\n- 在模一个给定常数 $p$ 意义下为 $0$。\n\n现在 Ysuperman 已经有了很多的数字 $1,4,5$，分别有 $a_1,a_4,a_5$ 个。\n\nYsuperman 希望组成一个长度为 $n$ 的有魅力的数字，使得它尽可能大。\n\nYsuperman 知道，如果 TA 还是学生，一定能凭借这次发现入围羟基计划。为了 TA 儿时的梦想，你能帮帮他吗？", "inputFormat": "**本题有多组数据。**\n\n数据共 $T$ 组。第一行读入 $T$，此后每一组数据：\n\n第一行两个正整数 $n,p$，分别表示 Ysuperman 想组成的有魅力的数字的长度，给定的常数 $p$。\n\n第二行三个自然数 $a_1,a_4,a_5$，表示 Ysuperman 最初拥有的数字个数。", "outputFormat": "如果 Ysuperman 无法获得有魅力的数字，输出 `-1`。\n\n否则输出 Ysuperman 能组成的最大有魅力的数字。\n\n两组数据之间需要换行。", "hint": "### 样例说明\n\n#### 样例说明 $1$：\n\n第一组可以组成 $1,4,5$，最大的是 $5$。\n\n第二组可以组成 $145,155,415,455,515,545$，最大的是 $545$。\n\n第三组只能组成 $114514$。\n\n-----\n### 数据范围\n\n为了致敬 NOI，出题人特地准备了良心的部分分表格。\n\n| 测试点编号 | $n$ | $a_1,a_4,a_5$ | $p$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $=1$ | $=0$ | $=1$ |\n| $2$ | $=2$ | $\\le 1$ | $\\le 10$ |\n| $3$ | $=3$ | $\\le 3$ | $\\le 10$ |\n| $4$ | $=15$ | $\\le 15$ | $\\le 10$ |\n| $5$ | $\\le 20$ | $\\le 20$ | $\\le 20$ |\n| $6$ | $\\le 30$ | $\\le 30$ | $\\le 30$ |\n| $7$ | $\\le 35$ | $\\le 35$ | $\\le 35$ |\n| $8$ | $\\le 233$ | $\\le 233$ | $\\le 2$ |\n| $9$ | $\\le 233$ | $\\le 233$ | $\\le 2$ |\n| $10$ | $\\le 50$ | $\\le 50$ | $\\le 64$ |\n| $11$ | $\\le 55$ | $\\le 55$ | $\\le 64$ |\n| $12$ | $\\le 60$ | $\\le 60$ | $\\le 64$ |\n| $13$ | $\\le 65$ | $\\le 65$ | $\\le 64$ |\n| $14$ | $\\le 70$ | $\\le 70$ | $\\le 64$ |\n| $15$ | $\\le 75$ | $\\le 75$ | $\\le 64$ |\n| $16$ | $\\le 80$ | $\\le 80$ | $\\le 64$ |\n| $17$ | $\\le 233$ | 性质一 | $\\le 64$ |\n| $18$ | $\\le 233$ | 性质一 | $\\le 64$ |\n| $19$ | $\\le 233$ | 性质二 | $\\le 64$ |\n| $20$ | $\\le 233$ | 性质二 | $\\le 64$ |\n| $21$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $22$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $23$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $24$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $25$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n\n性质一：$a_1+a_4+a_5=n$。\n\n性质二：$a_1=a_4=a_5=n$。\n\n对于 $100\\%$ 的数据，满足  \n\n$0 \\le a_1,a_4,a_5 \\le 233$。  \n$1\\le n \\le 233$。   \n$1 \\le p \\le64$。  \n$0 \\le T\\le 5$。\n\n-----\n\n### 提示\n\n如果你不知道自然数是什么意思，Ysuperman 提供了一个链接：[link](https://zh.wikipedia.org/zh-hans/%E8%87%AA%E7%84%B6%E6%95%B0)。\n\n如果你不知道取模是什么意思，Ysuperman 提供了另一个链接：[link](https://zh.wikipedia.org/zh-hans/%E6%A8%A1%E9%99%A4)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2020] 义已失吾亦死", "background": "> 义已失吾亦死！亦久亦旧罢以龄。\n\n本题添加了 HACK 数据。并且愿意接受更多的 HACK 数据。", "description": "Ysuperman 的幼儿园不仅注重文化课、竞赛课的教学，还教授大家德智体美全面发展。这一天是周末，德智体美全面发展的 Ysuperman 爬上了 Y 山。\n\nYsuperman 爬山并不走行车的大路，而是走旁边的泥土山路。走了很远，他猛然发现回头的路已变得模糊，挡在他面前的是巨大的石壁。他震惊地发现，石壁上竟然写有上个世纪的文字！“义已失吾亦死”他看着这些文字，仿佛有一种特殊的魅力。\n\n回到幼儿园，兴奋的 Ysuperman 立即创造了其他的句子，但他却发现这些句子大部分都失去了魅力。经过两年半的钻研，TA 终于发现，“义已失吾亦死”，对应的其实是 $114514$ 这串数字！研究方向变得更加明确，他决定研究把一个句子映射到一个数字里，一个有魅力的数字满足如下条件：\n\n- 十进制，是自然数；\n\n- 数位(digit)仅仅包含 $1,4,5$ 三种数字；\n\n- 在模一个给定常数 $p$ 意义下为 $0$。\n\n现在 Ysuperman 已经有了很多的数字 $1,4,5$，分别有 $a_1,a_4,a_5$ 个。\n\nYsuperman 希望组成一个长度为 $n$ 的有魅力的数字，使得它尽可能大。\n\nYsuperman 知道，如果 TA 还是学生，一定能凭借这次发现入围羟基计划。为了 TA 儿时的梦想，你能帮帮他吗？", "inputFormat": "**本题有多组数据。**\n\n数据共 $T$ 组。第一行读入 $T$，此后每一组数据：\n\n第一行两个正整数 $n,p$，分别表示 Ysuperman 想组成的有魅力的数字的长度，给定的常数 $p$。\n\n第二行三个自然数 $a_1,a_4,a_5$，表示 Ysuperman 最初拥有的数字个数。", "outputFormat": "如果 Ysuperman 无法获得有魅力的数字，输出 `-1`。\n\n否则输出 Ysuperman 能组成的最大有魅力的数字。\n\n两组数据之间需要换行。", "hint": "### 样例说明\n\n#### 样例说明 $1$：\n\n第一组可以组成 $1,4,5$，最大的是 $5$。\n\n第二组可以组成 $145,155,415,455,515,545$，最大的是 $545$。\n\n第三组只能组成 $114514$。\n\n-----\n### 数据范围\n\n为了致敬 NOI，出题人特地准备了良心的部分分表格。\n\n| 测试点编号 | $n$ | $a_1,a_4,a_5$ | $p$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $=1$ | $=0$ | $=1$ |\n| $2$ | $=2$ | $\\le 1$ | $\\le 10$ |\n| $3$ | $=3$ | $\\le 3$ | $\\le 10$ |\n| $4$ | $=15$ | $\\le 15$ | $\\le 10$ |\n| $5$ | $\\le 20$ | $\\le 20$ | $\\le 20$ |\n| $6$ | $\\le 30$ | $\\le 30$ | $\\le 30$ |\n| $7$ | $\\le 35$ | $\\le 35$ | $\\le 35$ |\n| $8$ | $\\le 233$ | $\\le 233$ | $\\le 2$ |\n| $9$ | $\\le 233$ | $\\le 233$ | $\\le 2$ |\n| $10$ | $\\le 50$ | $\\le 50$ | $\\le 64$ |\n| $11$ | $\\le 55$ | $\\le 55$ | $\\le 64$ |\n| $12$ | $\\le 60$ | $\\le 60$ | $\\le 64$ |\n| $13$ | $\\le 65$ | $\\le 65$ | $\\le 64$ |\n| $14$ | $\\le 70$ | $\\le 70$ | $\\le 64$ |\n| $15$ | $\\le 75$ | $\\le 75$ | $\\le 64$ |\n| $16$ | $\\le 80$ | $\\le 80$ | $\\le 64$ |\n| $17$ | $\\le 233$ | 性质一 | $\\le 64$ |\n| $18$ | $\\le 233$ | 性质一 | $\\le 64$ |\n| $19$ | $\\le 233$ | 性质二 | $\\le 64$ |\n| $20$ | $\\le 233$ | 性质二 | $\\le 64$ |\n| $21$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $22$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $23$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $24$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $25$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n\n性质一：$a_1+a_4+a_5=n$。\n\n性质二：$a_1=a_4=a_5=n$。\n\n对于 $100\\%$ 的数据，满足  \n\n$0 \\le a_1,a_4,a_5 \\le 233$。  \n$1\\le n \\le 233$。   \n$1 \\le p \\le64$。  \n$0 \\le T\\le 5$。\n\n-----\n\n### 提示\n\n如果你不知道自然数是什么意思，Ysuperman 提供了一个链接：[link](https://zh.wikipedia.org/zh-hans/%E8%87%AA%E7%84%B6%E6%95%B0)。\n\n如果你不知道取模是什么意思，Ysuperman 提供了另一个链接：[link](https://zh.wikipedia.org/zh-hans/%E6%A8%A1%E9%99%A4)。", "locale": "zh-CN"}}}
{"pid": "P6594", "type": "P", "difficulty": 5, "samples": [["5 2 0\n1 3 1 4 0\n1 2\n1 3\n1 4\n1 5\n2 3\n1 4", "3"], ["5 2 1\n1 3 1 4 0\n1 2\n1 3\n1 4\n1 5\n2 3\n1 4", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["二分", "O2优化", "深度优先搜索 DFS", "树形 DP", "最近公共祖先 LCA", "差分"], "title": "[YsOI2020] 换寝室", "background": "马上要开学了，Ysuperman 正在为给孩子们分配寝室忙得不可开交......", "description": "幼儿园里面有 $n$ 个房间，这些房间由 $n-1$ 条双向道路连接着，第 $i$ 条道路连接着房间 $u_i$ 和 $v_i$ ，每条道路 Ysuperman 都可以选择开启或者是关闭，每个房间**在所有道路开启的前提下**都可以到达其他任意一个房间。\n\n每个房间有一个差异值，其中，第 $i$ 个房间的差异值为 $h_i$ 。\n\n在选择完关闭哪些道路后，整个寝室会被分成许多连通块，一个联通块内的小朋友的不满意值定义为连通块内差异值的**最大值减去最小值**，小朋友们的总不满意值定义为**所有联通块不满意值的最大值**。\n\n寝室里有 $m$ 个寝室老师，每个老师晚上都要查寝，第 $i$ 个老师会从第 $x_i$ 个房间走到第 $y_i$ 个房间，如果老师在查寝时经过了某条被关闭的道路，TA就会很生气，一个老师的不满意值定义为**从 $x_i$ 走到 $y_i$ 经过的被关闭的道路数量**，老师的总不满意值定义为**所有老师的不满意值之和**。\n\nYsuperman 能承受的老师的总不满意值最大为 $k$ ，现在TA想知道小朋友们的总不满意值最小可以达到多少。", "inputFormat": "输入共 $n+m+1$ 行。\n\n第一行三个整数 $n,m,k$，表示房间个数，寝室老师个数和Ysuperman 能承受的老师的总不满意值。\n\n接下来一行，共 $n$ 个整数，第 $i$ 个整数是 $h_i$，表示第 $i$ 个房间的差异值。\n\n接下来 $n-1$ 行，每行两个整数，第 $i+2$ 行是 $u_i$ 和 $v_i$，表示寝室 $u_i,v_i$ 之间有直接道路。\n\n接下来 $m$ 行，每行两个整数，第 $i+n+1$ 行是 $x_i$ 和 $y_i$，表示第 $i$ 个老师的查寝路线。", "outputFormat": "一行一个整数，即答案。", "hint": "### 样例说明\n\n#### 样例说明 $1$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mf6j6hz3.png)\n\nYsuperman选择关闭连接着 $1$ 和 $5$ 的道路，老师的总不满意值为 $0$，寝室被分为 $2$ 个连通块，小朋友们的总不满意值为 $3$。\n\n#### 样例说明 $2$\n\n图同样例一。\n\nYsuperman选择关闭连接着 $1$ 和 $5$ 的道路以及连接着 $1$ 和 $4$ 的道路，老师的总不满意值为 $1$，寝室被分为 $3$ 个连通块，小朋友们的总不满意值为 $2$。\n\n------\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| Subtask | $n$ | $m$ | $k$ | 特殊性质 | 分数 |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| 1 | $\\le 20$ | $\\le 10$ | $\\le 80$ | 无 | 8 |\n| 2 | $\\le 150$ | $\\le 10^3$ | $\\le 8 \\times 10^4$ | 无 | 13 |\n| 3 | $\\le 800$ | $\\le 10^5$ | $\\le 8 \\times 10^7$ | 树为一条链 | 13 |\n| 4 | $\\le 800$ | $\\le 10^5$ | $\\le 8 \\times 10^7$ | 树为一朵盛开的菊花 | 13 |\n| 5 | $\\le 800$ | $\\le 10^5$ | $= 0$ | 无 | 13 |\n| 6 | $\\le 800$ | $\\le 10^5$ | $\\le 8 \\times 10^7$ | 无 | 40 |\n\n【一条链】定义为：所有点的度数 $\\le2$。\n\n【一朵盛开的菊花】定义为：存在一个点的度数为 $n-1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le h_i\\le 10^9，0\\le k \\le 8\\cdot 10^7,u_i\\ne v_i$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2020] 换寝室", "background": "马上要开学了，Ysuperman 正在为给孩子们分配寝室忙得不可开交......", "description": "幼儿园里面有 $n$ 个房间，这些房间由 $n-1$ 条双向道路连接着，第 $i$ 条道路连接着房间 $u_i$ 和 $v_i$ ，每条道路 Ysuperman 都可以选择开启或者是关闭，每个房间**在所有道路开启的前提下**都可以到达其他任意一个房间。\n\n每个房间有一个差异值，其中，第 $i$ 个房间的差异值为 $h_i$ 。\n\n在选择完关闭哪些道路后，整个寝室会被分成许多连通块，一个联通块内的小朋友的不满意值定义为连通块内差异值的**最大值减去最小值**，小朋友们的总不满意值定义为**所有联通块不满意值的最大值**。\n\n寝室里有 $m$ 个寝室老师，每个老师晚上都要查寝，第 $i$ 个老师会从第 $x_i$ 个房间走到第 $y_i$ 个房间，如果老师在查寝时经过了某条被关闭的道路，TA就会很生气，一个老师的不满意值定义为**从 $x_i$ 走到 $y_i$ 经过的被关闭的道路数量**，老师的总不满意值定义为**所有老师的不满意值之和**。\n\nYsuperman 能承受的老师的总不满意值最大为 $k$ ，现在TA想知道小朋友们的总不满意值最小可以达到多少。", "inputFormat": "输入共 $n+m+1$ 行。\n\n第一行三个整数 $n,m,k$，表示房间个数，寝室老师个数和Ysuperman 能承受的老师的总不满意值。\n\n接下来一行，共 $n$ 个整数，第 $i$ 个整数是 $h_i$，表示第 $i$ 个房间的差异值。\n\n接下来 $n-1$ 行，每行两个整数，第 $i+2$ 行是 $u_i$ 和 $v_i$，表示寝室 $u_i,v_i$ 之间有直接道路。\n\n接下来 $m$ 行，每行两个整数，第 $i+n+1$ 行是 $x_i$ 和 $y_i$，表示第 $i$ 个老师的查寝路线。", "outputFormat": "一行一个整数，即答案。", "hint": "### 样例说明\n\n#### 样例说明 $1$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mf6j6hz3.png)\n\nYsuperman选择关闭连接着 $1$ 和 $5$ 的道路，老师的总不满意值为 $0$，寝室被分为 $2$ 个连通块，小朋友们的总不满意值为 $3$。\n\n#### 样例说明 $2$\n\n图同样例一。\n\nYsuperman选择关闭连接着 $1$ 和 $5$ 的道路以及连接着 $1$ 和 $4$ 的道路，老师的总不满意值为 $1$，寝室被分为 $3$ 个连通块，小朋友们的总不满意值为 $2$。\n\n------\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| Subtask | $n$ | $m$ | $k$ | 特殊性质 | 分数 |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| 1 | $\\le 20$ | $\\le 10$ | $\\le 80$ | 无 | 8 |\n| 2 | $\\le 150$ | $\\le 10^3$ | $\\le 8 \\times 10^4$ | 无 | 13 |\n| 3 | $\\le 800$ | $\\le 10^5$ | $\\le 8 \\times 10^7$ | 树为一条链 | 13 |\n| 4 | $\\le 800$ | $\\le 10^5$ | $\\le 8 \\times 10^7$ | 树为一朵盛开的菊花 | 13 |\n| 5 | $\\le 800$ | $\\le 10^5$ | $= 0$ | 无 | 13 |\n| 6 | $\\le 800$ | $\\le 10^5$ | $\\le 8 \\times 10^7$ | 无 | 40 |\n\n【一条链】定义为：所有点的度数 $\\le2$。\n\n【一朵盛开的菊花】定义为：存在一个点的度数为 $n-1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le h_i\\le 10^9，0\\le k \\le 8\\cdot 10^7,u_i\\ne v_i$ 。", "locale": "zh-CN"}}}
{"pid": "P6595", "type": "P", "difficulty": 6, "samples": [["5 8 11\n13482572 \n299473306 598946612 898419918 199648871 499122177 798595483 99824436 1", "0 1"], ["3 5 0\n1\n1 1 1 1 1", "3 1"], ["2 2 0\n499122177\n499122177 499122177", "855638018 507044752"], ["11 4 514\n1919810\n1919810 1919810 1919810 1919810", "550831570 75142974"], ["100000 20 227\n2020\n2000 2001 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019", "808786679 861511854"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "Special Judge", "O2优化", "容斥原理", "期望"], "title": "[YsOI2020] 计划", "background": "相信大家已经知道了这样几个事实：  \n- Ysuperman 是很有钱。\n\n- Ysuperman 一直都很善于制定计划。\n\n- Ysuperman 管理着一个幼儿园。\n\n- Ysuperman 收藏了一些零食。\n\n- 每一天，TA 可能会心血来潮地想要有计划地吃掉 TA 的零食。\n", "description": "Ysuperman 现在有 $n$ 份零食，对**每份**零食而言，TA 每一天有 $P$ 的概率对 TA 的这份零食做出计划，TA 每做出一份计划后的 $T$ 天后，TA 将会将这一份零食给吃掉。需要特殊说明的是，如果在Ysuperman制定计划前已经对该份零食做出计划，则实际会按照**第一份计划的时间**将零食吃掉。\n\n不幸的是，幼儿园内贪吃的小朋友会破坏这一计划。  幼儿园内有 $m$ 个小朋友，TA 们觊觎着 Ysuperman 的零食。对于**每份**零食，每天会有 $p_i$ 的概率被第 $i$ 个小朋友偷吃。如果这份零食在某位小朋友偷吃之前被吃掉了，那么相应地，这位小朋友就偷吃不了。**如果有一份零食在计划完成前被偷吃，那么，相关计划就无法实现了。**\n\n现在 Ysuperman 要对 TA 的计划进行风险评估，TA 悬赏了 $114514pts$ ，这个项目在经过层层转包后来到了您的手上，现在已经算出了各概率在模意义下的值。经过各方协商，您如果解决了这个问题，您可以获得 $ 100pts $ 。您需要告诉 TA **Ysuperman 能期望吃掉多少份零食，以及 Ysuperman 的零食期望在多少天后被吃完** 。\n\n**如果一份零食被某位小朋友吃掉了，那么这份零食就不属于Ysuperman了。**\n\n需要注意的是，Ysuperman每天制定计划的时间在小朋友偷吃糖果**之前**。\n\nYsuperman 认为浮点数的精度误差太大，所以你只需要输出答案**对 $998244353$ 取模**的结果。", "inputFormat": "第一行包括三个正整数 $n,m,T$ ，含义如题目所述。 \n\n第二行包括一个正整数 $ P $ ，表示 $P$ 对 $998244353$ 取模后的结果。  \n\n第三行包括 $m$ 个正整数 $p_1,p_2,\\cdots,p_m$ ，分别表示 $p_i$ 对 $998244353$ 取模后的结果。", "outputFormat": "一行，两个自然数。 分别表示 Ysuperman 能期望吃掉多少份零食，以及 Ysuperman 的零食期望在多少天后被吃完，您需要输出答案对 $998244353$ 取模后的结果。\n\n", "hint": "### 样例说明\n\n#### 样例说明 $1$:\n\n在取模前的其中一种可能情况为：\n```cpp\n5 8 11  \n0.1  \n0.1 0.2 0.3 0.4 0.5 0.6 0.7 1\n```\n该情况下，小朋友会在第一天中偷吃完所有的零食。\n\n#### 样例说明 $2$:\n\n在取模前的一种可能情况为：\n```cpp\n3 5 0  \n1  \n1 1 1 1 1\n```\n\n该情况下，Ysuperman 会在第一天计划并吃完所有的零食。\n\n#### 样例说明 $3$:\n\n在取模前的一种可能的情况为：\n\n```cpp\n2 2 0  \n0.5  \n0.5 0.5\n```\n在此情况下，答案为 $\\dfrac{8}{7}$ 和 $\\dfrac{80}{63}$。\n\n由于解答过程较为复杂，所以请聪明的读者自行思考。\n\n\n------------\n### 数据范围\n\n**如果您只答对了某个测试点两问中的任意一问，您可以获得这个测试点 $ 25\\% $ 的分数。**\n\n以下是致敬 $\\text{NOI}$ 的部分分表格：\n| 测试点编号 | $n$ | $m$ | $T$ | $P$ | 特殊性质 |\n| :-----------: | -----------: | -----------: | -----------: | -----------: | :-----------: |\n| 1 | $=1$ | $=1$ | $=0$ | 无其它约束 | 无 |\n| 2 | $=1$ | $=10$ | $=1$ | $=1$ | $1$ |\n| 3 | $=1$ | $\\le100$ | $=227$ | $=1$ | $2$ |\n| 4 | $\\le 20$ | $\\le 1000$ | $=4$ | 无其它约束 | 无 |\n| 5 | $\\le 100$ | $\\le 1000$ | $=4$ | 无其它约束 | 无 |\n| 6 | $\\le 1000$ | $\\le 1000$ | $=227$ | $=0$ | $1$ |\n| 7 | $\\le 100000$ | $\\le 100000$ | $=233$ | $=1$ | $2$ |\n| 8 | $\\le1919820$ | $=114514$ | $=2333$ | $=0$ | $2$ |\n| 9 | $\\le1919820$ | $=114514$ | $=2333$ | $=0$ | $2$ |\n| 10 | $=100000$ | $=100000$ | $=3$ | 无其它约束 | $2$ |\n| 11 | $=114514$ | $=114514$ | $=3$ | 无其它约束 | 无 |\n| 12 | $\\le1919820$ | $=114514$ | $=0$ | 无其它约束 | $2$ |\n| 13 | $\\le 1919820$ | $=1$ | $\\le 227$ | 无其它约束 | 无 |\n| 14 | $\\le 1919820$ | $\\le114514$ | $\\le 227$ | 无其它约束 | $2$ |\n| 15 | $\\le 1919820$ | $=1$ | $\\le 500$ | $=1$ | 无 |\n| 16 | $\\le 1919820$ | $\\le 114514$ | $\\le 500$ | $=1$ | 无 |\n| 17 | $\\le 1919820$ | $\\le 114514$ | $\\le 500$ | $=1$ | 无 |\n| 18 | $\\le 1919820$ | $\\le 114514$ | $=0$ | 无其它约束 | 无 |\n| 19 | $\\le 1919820$ | $\\le 114514$ | $=0$ | 无其它约束 | 无 |\n| 20 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | 无其它约束 | $2$ |\n| 21 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | 无其它约束 | 无 |\n| 22 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | 无其它约束 | 无 |\n| 23 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | 无其它约束 | 无 |\n| 24 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | 无其它约束 | 无 |\n| 25 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | 无其它约束 | $2$ |\n\n对于 $100\\%$ 的数据，满足 $ 1\\le n\\le 1919820,1\\le m \\le 114514,0\\le T \\le 2333,0\\le P< 998244353,1\\le p_i<998244353$\n\n\n特殊性质 $1$：存在一个 $i$ 使得$p_i=1$。\n\n特殊性质 $2$：所有的 $p_i$ 都相等。", "locale": "zh-CN", "translations": {"en": {"title": "[YsOI2020] Plan", "background": "I believe everyone already knows the following facts:  \n- Ysuperman is very rich.\n\n- Ysuperman has always been good at making plans.\n\n- Ysuperman runs a kindergarten.\n\n- Ysuperman has collected some snacks.\n\n- Every day, they may suddenly feel like eating their snacks in a planned way.", "description": "Ysuperman currently has $n$ snacks. For **each** snack, every day there is a probability $P$ that they will make a plan for this snack. After $T$ days from the time they make a plan, they will eat this snack. A special note: if a plan has already been made for this snack before Ysuperman makes a new plan, then in practice the snack will be eaten according to the time of the **first plan**.\n\nUnfortunately, greedy kids in the kindergarten may ruin this plan. There are $m$ kids in the kindergarten, and they are eyeing Ysuperman’s snacks. For **each** snack, every day there is a probability $p_i$ that it will be stolen and eaten by kid $i$. If the snack has been eaten before some kid steals it, then correspondingly, that kid cannot steal it. **If a snack is stolen before its plan is completed, then the related plan cannot be carried out.**\n\nNow Ysuperman wants to do a risk assessment of their plan. They offered a bounty of $114514pts$, and after multiple layers of subcontracting, the project has ended up in your hands. The values of these probabilities modulo have already been computed. After negotiation, if you solve this problem, you can get $100pts$. You need to tell them **the expected number of snacks Ysuperman can eat, and the expected number of days after which all of Ysuperman’s snacks are finished (eaten up)**.\n\n**If a snack is eaten by a kid, then that snack no longer belongs to Ysuperman.**\n\nNote that each day, Ysuperman makes plans **before** the kids attempt to steal the snacks.\n\nYsuperman thinks floating-point precision errors are too large, so you only need to output the answers **modulo $998244353$**.", "inputFormat": "The first line contains three positive integers $n,m,T$, with meanings as described in the statement. \n\nThe second line contains one positive integer $P$, representing the value of $P$ modulo $998244353$.  \n\nThe third line contains $m$ positive integers $p_1,p_2,\\cdots,p_m$, each representing the value of $p_i$ modulo $998244353$.", "outputFormat": "One line with two non-negative integers, representing the expected number of snacks Ysuperman can eat, and the expected number of days after which Ysuperman’s snacks are finished. Output the answers modulo $998244353$.", "hint": "### Sample Explanation\n\n#### Sample Explanation $1$:\n\nOne possible situation before taking modulo is:\n```cpp\n5 8 11  \n0.1  \n0.1 0.2 0.3 0.4 0.5 0.6 0.7 1\n```\nIn this case, the kids will steal and eat all snacks on the first day.\n\n#### Sample Explanation $2$:\n\nOne possible situation before taking modulo is:\n```cpp\n3 5 0  \n1  \n1 1 1 1 1\n```\n\nIn this case, Ysuperman will make plans and finish eating all snacks on the first day.\n\n#### Sample Explanation $3$:\n\nOne possible situation before taking modulo is:\n\n```cpp\n2 2 0  \n0.5  \n0.5 0.5\n```\nIn this case, the answers are $\\dfrac{8}{7}$ and $\\dfrac{80}{63}$.\n\nSince the solution process is rather complicated, please let smart readers think it through by themselves.\n\n------------\n### Constraints\n\n**If you only answer either one of the two questions correctly for a test point, you can get $25\\%$ of the score for that test point.**\n\nBelow is a partial scoring table as a tribute to $\\text{NOI}$:\n| Test Point ID | $n$ | $m$ | $T$ | $P$ | Special Property |\n| :-----------: | -----------: | -----------: | -----------: | -----------: | :-----------: |\n| 1 | $=1$ | $=1$ | $=0$ | No other constraints | None |\n| 2 | $=1$ | $=10$ | $=1$ | $=1$ | $1$ |\n| 3 | $=1$ | $\\le100$ | $=227$ | $=1$ | $2$ |\n| 4 | $\\le 20$ | $\\le 1000$ | $=4$ | No other constraints | None |\n| 5 | $\\le 100$ | $\\le 1000$ | $=4$ | No other constraints | None |\n| 6 | $\\le 1000$ | $\\le 1000$ | $=227$ | $=0$ | $1$ |\n| 7 | $\\le 100000$ | $\\le 100000$ | $=233$ | $=1$ | $2$ |\n| 8 | $\\le1919820$ | $=114514$ | $=2333$ | $=0$ | $2$ |\n| 9 | $\\le1919820$ | $=114514$ | $=2333$ | $=0$ | $2$ |\n| 10 | $=100000$ | $=100000$ | $=3$ | No other constraints | $2$ |\n| 11 | $=114514$ | $=114514$ | $=3$ | No other constraints | None |\n| 12 | $\\le1919820$ | $=114514$ | $=0$ | No other constraints | $2$ |\n| 13 | $\\le 1919820$ | $=1$ | $\\le 227$ | No other constraints | None |\n| 14 | $\\le 1919820$ | $\\le114514$ | $\\le 227$ | No other constraints | $2$ |\n| 15 | $\\le 1919820$ | $=1$ | $\\le 500$ | $=1$ | None |\n| 16 | $\\le 1919820$ | $\\le 114514$ | $\\le 500$ | $=1$ | None |\n| 17 | $\\le 1919820$ | $\\le 114514$ | $\\le 500$ | $=1$ | None |\n| 18 | $\\le 1919820$ | $\\le 114514$ | $=0$ | No other constraints | None |\n| 19 | $\\le 1919820$ | $\\le 114514$ | $=0$ | No other constraints | None |\n| 20 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | No other constraints | $2$ |\n| 21 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | No other constraints | None |\n| 22 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | No other constraints | None |\n| 23 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | No other constraints | None |\n| 24 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | No other constraints | None |\n| 25 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | No other constraints | $2$ |\n\nFor $100\\%$ of the testdata, it holds that $ 1\\le n\\le 1919820,1\\le m \\le 114514,0\\le T \\le 2333,0\\le P< 998244353,1\\le p_i<998244353$.\n\nSpecial property $1$: There exists an $i$ such that $p_i=1$.\n\nSpecial property $2$: All $p_i$ are equal.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[YsOI2020] 计划", "background": "相信大家已经知道了这样几个事实：  \n- Ysuperman 是很有钱。\n\n- Ysuperman 一直都很善于制定计划。\n\n- Ysuperman 管理着一个幼儿园。\n\n- Ysuperman 收藏了一些零食。\n\n- 每一天，TA 可能会心血来潮地想要有计划地吃掉 TA 的零食。\n", "description": "Ysuperman 现在有 $n$ 份零食，对**每份**零食而言，TA 每一天有 $P$ 的概率对 TA 的这份零食做出计划，TA 每做出一份计划后的 $T$ 天后，TA 将会将这一份零食给吃掉。需要特殊说明的是，如果在Ysuperman制定计划前已经对该份零食做出计划，则实际会按照**第一份计划的时间**将零食吃掉。\n\n不幸的是，幼儿园内贪吃的小朋友会破坏这一计划。  幼儿园内有 $m$ 个小朋友，TA 们觊觎着 Ysuperman 的零食。对于**每份**零食，每天会有 $p_i$ 的概率被第 $i$ 个小朋友偷吃。如果这份零食在某位小朋友偷吃之前被吃掉了，那么相应地，这位小朋友就偷吃不了。**如果有一份零食在计划完成前被偷吃，那么，相关计划就无法实现了。**\n\n现在 Ysuperman 要对 TA 的计划进行风险评估，TA 悬赏了 $114514pts$ ，这个项目在经过层层转包后来到了您的手上，现在已经算出了各概率在模意义下的值。经过各方协商，您如果解决了这个问题，您可以获得 $ 100pts $ 。您需要告诉 TA **Ysuperman 能期望吃掉多少份零食，以及 Ysuperman 的零食期望在多少天后被吃完** 。\n\n**如果一份零食被某位小朋友吃掉了，那么这份零食就不属于Ysuperman了。**\n\n需要注意的是，Ysuperman每天制定计划的时间在小朋友偷吃糖果**之前**。\n\nYsuperman 认为浮点数的精度误差太大，所以你只需要输出答案**对 $998244353$ 取模**的结果。", "inputFormat": "第一行包括三个正整数 $n,m,T$ ，含义如题目所述。 \n\n第二行包括一个正整数 $ P $ ，表示 $P$ 对 $998244353$ 取模后的结果。  \n\n第三行包括 $m$ 个正整数 $p_1,p_2,\\cdots,p_m$ ，分别表示 $p_i$ 对 $998244353$ 取模后的结果。", "outputFormat": "一行，两个自然数。 分别表示 Ysuperman 能期望吃掉多少份零食，以及 Ysuperman 的零食期望在多少天后被吃完，您需要输出答案对 $998244353$ 取模后的结果。\n\n", "hint": "### 样例说明\n\n#### 样例说明 $1$:\n\n在取模前的其中一种可能情况为：\n```cpp\n5 8 11  \n0.1  \n0.1 0.2 0.3 0.4 0.5 0.6 0.7 1\n```\n该情况下，小朋友会在第一天中偷吃完所有的零食。\n\n#### 样例说明 $2$:\n\n在取模前的一种可能情况为：\n```cpp\n3 5 0  \n1  \n1 1 1 1 1\n```\n\n该情况下，Ysuperman 会在第一天计划并吃完所有的零食。\n\n#### 样例说明 $3$:\n\n在取模前的一种可能的情况为：\n\n```cpp\n2 2 0  \n0.5  \n0.5 0.5\n```\n在此情况下，答案为 $\\dfrac{8}{7}$ 和 $\\dfrac{80}{63}$。\n\n由于解答过程较为复杂，所以请聪明的读者自行思考。\n\n\n------------\n### 数据范围\n\n**如果您只答对了某个测试点两问中的任意一问，您可以获得这个测试点 $ 25\\% $ 的分数。**\n\n以下是致敬 $\\text{NOI}$ 的部分分表格：\n| 测试点编号 | $n$ | $m$ | $T$ | $P$ | 特殊性质 |\n| :-----------: | -----------: | -----------: | -----------: | -----------: | :-----------: |\n| 1 | $=1$ | $=1$ | $=0$ | 无其它约束 | 无 |\n| 2 | $=1$ | $=10$ | $=1$ | $=1$ | $1$ |\n| 3 | $=1$ | $\\le100$ | $=227$ | $=1$ | $2$ |\n| 4 | $\\le 20$ | $\\le 1000$ | $=4$ | 无其它约束 | 无 |\n| 5 | $\\le 100$ | $\\le 1000$ | $=4$ | 无其它约束 | 无 |\n| 6 | $\\le 1000$ | $\\le 1000$ | $=227$ | $=0$ | $1$ |\n| 7 | $\\le 100000$ | $\\le 100000$ | $=233$ | $=1$ | $2$ |\n| 8 | $\\le1919820$ | $=114514$ | $=2333$ | $=0$ | $2$ |\n| 9 | $\\le1919820$ | $=114514$ | $=2333$ | $=0$ | $2$ |\n| 10 | $=100000$ | $=100000$ | $=3$ | 无其它约束 | $2$ |\n| 11 | $=114514$ | $=114514$ | $=3$ | 无其它约束 | 无 |\n| 12 | $\\le1919820$ | $=114514$ | $=0$ | 无其它约束 | $2$ |\n| 13 | $\\le 1919820$ | $=1$ | $\\le 227$ | 无其它约束 | 无 |\n| 14 | $\\le 1919820$ | $\\le114514$ | $\\le 227$ | 无其它约束 | $2$ |\n| 15 | $\\le 1919820$ | $=1$ | $\\le 500$ | $=1$ | 无 |\n| 16 | $\\le 1919820$ | $\\le 114514$ | $\\le 500$ | $=1$ | 无 |\n| 17 | $\\le 1919820$ | $\\le 114514$ | $\\le 500$ | $=1$ | 无 |\n| 18 | $\\le 1919820$ | $\\le 114514$ | $=0$ | 无其它约束 | 无 |\n| 19 | $\\le 1919820$ | $\\le 114514$ | $=0$ | 无其它约束 | 无 |\n| 20 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | 无其它约束 | $2$ |\n| 21 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | 无其它约束 | 无 |\n| 22 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | 无其它约束 | 无 |\n| 23 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | 无其它约束 | 无 |\n| 24 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | 无其它约束 | 无 |\n| 25 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | 无其它约束 | $2$ |\n\n对于 $100\\%$ 的数据，满足 $ 1\\le n\\le 1919820,1\\le m \\le 114514,0\\le T \\le 2333,0\\le P< 998244353,1\\le p_i<998244353$\n\n\n特殊性质 $1$：存在一个 $i$ 使得$p_i=1$。\n\n特殊性质 $2$：所有的 $p_i$ 都相等。", "locale": "zh-CN"}}}
{"pid": "P6596", "type": "P", "difficulty": 7, "samples": [["3 3", "4"], ["5 1", "453"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["动态规划 DP", "组合数学", "生成函数"], "title": "How Many of Them", "background": null, "description": "在无向连通图中，若一条边被删除后，图会分成不连通的两部分，则称该边为割边。\n\n求满足如下条件的无向连通图的数量：\n\n1. 由 $n$ 个结点构成，结点有标号。\n\n2. 割边不超过 $m$ 条。\n\n3. 没有重边和自环。\n\n答案对 $10^{9}+7$ 取模。", "inputFormat": "仅一行，两个整数 $n$ 和 $m$。", "outputFormat": "一个整数，表示答案。", "hint": "$2≤n≤50$，$0≤m≤\\dfrac{n(n-1)}{2}$。\n\nSource: Gennady Korotkevich (tourist), ITMO University.", "locale": "zh-CN", "translations": {"zh-CN": {"title": "How Many of Them", "background": null, "description": "在无向连通图中，若一条边被删除后，图会分成不连通的两部分，则称该边为割边。\n\n求满足如下条件的无向连通图的数量：\n\n1. 由 $n$ 个结点构成，结点有标号。\n\n2. 割边不超过 $m$ 条。\n\n3. 没有重边和自环。\n\n答案对 $10^{9}+7$ 取模。", "inputFormat": "仅一行，两个整数 $n$ 和 $m$。", "outputFormat": "一个整数，表示答案。", "hint": "$2≤n≤50$，$0≤m≤\\dfrac{n(n-1)}{2}$。\n\nSource: Gennady Korotkevich (tourist), ITMO University.", "locale": "zh-CN"}}}
{"pid": "P6597", "type": "P", "difficulty": 7, "samples": [["5", "1\n1\n3\n5"]], "limits": {"time": [2000], "memory": [512000]}, "tags": ["O2优化", "Pólya 定理", "生成函数", "快速数论变换 NTT"], "title": "烯烃计数", "background": "你可能需要：\n\n+ [烷基计数](https://loj.ac/problem/6538)\n\n+ [烷烃计数](https://loj.ac/problem/6512)\n\n由于洛谷没有上面两个题，所以就弄了这个题。", "description": "求化学式为 $\\text{C}_n \\text{H}_{2n}$ 的 **烯烃（乙烯的同系物）** 的同分异构体个数。\n\n本题中不考虑空间异构和顺反异构。\n\n答案对 $998244353$ 取模。", "inputFormat": "一个正整数 $n$。", "outputFormat": "共 $n-1$ 行分别碳原子数目为 $2\\sim n$ 的答案。", "hint": "#### 样例 1 解释\n\n+ $n=2$：乙烯。\n+ $n=3$：丙烯。\n+ $n=4$：1-丁烯；2-丁烯；2-甲基-1-丙烯。\n+ $n=5$：1-戊烯；2-戊烯；2-甲基-1-丁烯；3-甲基-1-丁烯；2-甲基-2-丁烯。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n\\le 100000$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "烯烃计数", "background": "你可能需要：\n\n+ [烷基计数](https://loj.ac/problem/6538)\n\n+ [烷烃计数](https://loj.ac/problem/6512)\n\n由于洛谷没有上面两个题，所以就弄了这个题。", "description": "求化学式为 $\\text{C}_n \\text{H}_{2n}$ 的 **烯烃（乙烯的同系物）** 的同分异构体个数。\n\n本题中不考虑空间异构和顺反异构。\n\n答案对 $998244353$ 取模。", "inputFormat": "一个正整数 $n$。", "outputFormat": "共 $n-1$ 行分别碳原子数目为 $2\\sim n$ 的答案。", "hint": "#### 样例 1 解释\n\n+ $n=2$：乙烯。\n+ $n=3$：丙烯。\n+ $n=4$：1-丁烯；2-丁烯；2-甲基-1-丙烯。\n+ $n=5$：1-戊烯；2-戊烯；2-甲基-1-丁烯；3-甲基-1-丁烯；2-甲基-2-丁烯。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n\\le 100000$。\n", "locale": "zh-CN"}}}
{"pid": "P6598", "type": "P", "difficulty": 7, "samples": [["5", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": [], "title": "烷烃计数", "background": "", "description": "$n$ 个碳原子的烷烃共有多少种同分异构体（不考虑立体异构）？\n\n提示：如果你不知道什么是烷烃，那么你可以认为这个问题等价于求 $n$ 个点的无标号无根树并满足每个点的度数 $\\le 4$ 的树的个数。", "inputFormat": "一个整数 $n$ 表示碳原子的个数。", "outputFormat": "一个整数表示答案，对 $998244353$ 取模的结果。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l8x7ct53.png)\n\n#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "烷烃计数", "background": "", "description": "$n$ 个碳原子的烷烃共有多少种同分异构体（不考虑立体异构）？\n\n提示：如果你不知道什么是烷烃，那么你可以认为这个问题等价于求 $n$ 个点的无标号无根树并满足每个点的度数 $\\le 4$ 的树的个数。", "inputFormat": "一个整数 $n$ 表示碳原子的个数。", "outputFormat": "一个整数表示答案，对 $998244353$ 取模的结果。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l8x7ct53.png)\n\n#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P6599", "type": "P", "difficulty": 3, "samples": [["1\n2 3\n", "6"], ["2\n114 514\n1919 180\n", "8388223\n16580700"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "贪心", "进制", "位运算", "构造"], "title": "「EZEC-2」异或", "background": "", "description": "有 $T$ 组询问，每次给定两个正整数 $n,l$，   \n\n你需要构造一个长度为 $l$ 的正整数序列 $a$（编号从 $1$ 至 $l$），   \n\n且满足 $\\forall i\\in[1,l]$，都有 $a_i\\in[1,n]$。\n\n求：\n\n$$\\sum_{i=1}^l\\sum_{j=1}^{i-1}a_i\\oplus a_j$$\n\n的最大值。\n\n为了避免答案过大，对于每组询问，只需要输出这个最大值对 $10^9+7$ 取模的结果。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来第 $2$ 行到第 $T+1$ 行，每行两个整数 $n,l$ ，分别代表 $a_i$ 的最大取值与 $a$ 的长度。 \n", "outputFormat": "共 $T$ 行，每行一个整数，对应每组询问的答案对 $10^9+7$ 取模的结果。", "hint": "**【样例解释 #1】**   \n当 $n=2,l=3$，$a$ 取 $\\{1,2,1\\}$ 的任一排列时可以得到最大值，为 $(1\\oplus2)+(1\\oplus1)+(2\\oplus1)=6$，易证明此时原式有最大值。\n\n---\n**【数据规模与约定】**\n| 测试点编号 | $T\\le$ | $n\\le$ | $l\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim5$ | $1$ | $10$ | $5$ |\n| $6$ | $5\\times 10^5$ | $10^{12}$ | $2$ |\n| $7$ | $5\\times 10^5$ | $10^{12}$ | $3$ |\n| $8\\sim10$ | $5\\times 10^5$ | $10^{12}$ | $10^5$ |\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 5\\times10^5$，$1\\le n\\le 10^{12}$，$2\\le l \\le 10^5$。\n\n\n---\n**【提示】**\n\n1. 「$\\oplus$」是按位异或符号。如果您不知道什么是按位异或，可以参考[这里](https://oi-wiki.org/math/bit/#_1)。\n2. 取模是一种运算，$a$ 对 $b$ 取模代表将 $a$ 赋值为 $a$ 除以 $b$ 所得到的余数。  \n在 C++ / Python 中的取模符号为 `%`，在 Pascal 中的取模符号为 `mod`。\n3. $\\sum$ 是求和符号。如果您不知道什么是 $\\sum$ 符号，可以参考[这里](https://baike.baidu.com/item/∑/1233796?fr=aladdin)。\n4. 请注意数据的读入输出对程序效率造成的影响。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-2」异或", "background": "", "description": "有 $T$ 组询问，每次给定两个正整数 $n,l$，   \n\n你需要构造一个长度为 $l$ 的正整数序列 $a$（编号从 $1$ 至 $l$），   \n\n且满足 $\\forall i\\in[1,l]$，都有 $a_i\\in[1,n]$。\n\n求：\n\n$$\\sum_{i=1}^l\\sum_{j=1}^{i-1}a_i\\oplus a_j$$\n\n的最大值。\n\n为了避免答案过大，对于每组询问，只需要输出这个最大值对 $10^9+7$ 取模的结果。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来第 $2$ 行到第 $T+1$ 行，每行两个整数 $n,l$ ，分别代表 $a_i$ 的最大取值与 $a$ 的长度。 \n", "outputFormat": "共 $T$ 行，每行一个整数，对应每组询问的答案对 $10^9+7$ 取模的结果。", "hint": "**【样例解释 #1】**   \n当 $n=2,l=3$，$a$ 取 $\\{1,2,1\\}$ 的任一排列时可以得到最大值，为 $(1\\oplus2)+(1\\oplus1)+(2\\oplus1)=6$，易证明此时原式有最大值。\n\n---\n**【数据规模与约定】**\n| 测试点编号 | $T\\le$ | $n\\le$ | $l\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim5$ | $1$ | $10$ | $5$ |\n| $6$ | $5\\times 10^5$ | $10^{12}$ | $2$ |\n| $7$ | $5\\times 10^5$ | $10^{12}$ | $3$ |\n| $8\\sim10$ | $5\\times 10^5$ | $10^{12}$ | $10^5$ |\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 5\\times10^5$，$1\\le n\\le 10^{12}$，$2\\le l \\le 10^5$。\n\n\n---\n**【提示】**\n\n1. 「$\\oplus$」是按位异或符号。如果您不知道什么是按位异或，可以参考[这里](https://oi-wiki.org/math/bit/#_1)。\n2. 取模是一种运算，$a$ 对 $b$ 取模代表将 $a$ 赋值为 $a$ 除以 $b$ 所得到的余数。  \n在 C++ / Python 中的取模符号为 `%`，在 Pascal 中的取模符号为 `mod`。\n3. $\\sum$ 是求和符号。如果您不知道什么是 $\\sum$ 符号，可以参考[这里](https://baike.baidu.com/item/∑/1233796?fr=aladdin)。\n4. 请注意数据的读入输出对程序效率造成的影响。", "locale": "zh-CN"}}}
{"pid": "P6600", "type": "P", "difficulty": 4, "samples": [["5 5\n3 3 18 9\n11111\n01110\n11111\n01110\n11111", "2"], ["5 5\n3 3 15 7\n11111\n01110\n11111\n01110\n11111", "7"], ["10 10\n5 4 40 11\n0011111111\n1011110101\n1111111111\n1001111101\n1111101111\n1111110110\n0111011101\n0111111110\n0011111111\n0111111101\n", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["前缀和", "容斥原理"], "title": "「EZEC-2」字母", "background": "\n给你一个 $01$ 矩阵，我们希望你从中找到由连续的 $1$ 组成的「字母 T」。", "description": "「字母 T」由一横和一竖组成，竖一定在横的下方（您可以借助英文字母 `T` 辅助理解）。\n\n在本题中，我们定义「横」为组成「字母 T」的水平线段，「竖」为组成「字母 T」的竖直线段。\n\n注意「横」与「竖」的公共部分同时计入横长和竖长。\n\n**合法的「字母 T」的「横」长必须为奇数且「竖」与「横」交于「横」的中点，「横」长最小为 $3$ ，「竖」长最小为 $2$。**\n\n\n如：\n\n$$\n    \\begin{array}{ccc}\n       0\\color{Red}111\\color{black}1\\\\\n       00\\color{Red}1\\color{black}01\n    \\end{array}\n$$\n\n**只含有**一个合法的「字母 T」（即标红部分）。\n\n\n现在给你一个 $n \\times m$ 的 $01$ 矩阵，请你求出在这个矩阵中**合法**的「字母 T」中，一共有多少个**满足以下条件**的「字母 T」。 \n\n设某个合法的「字母 T」的「横」长为 $w$，「竖」长为 $h$，有：\n\n- $w\\ge a$\n- $h\\ge b$\n- $w\\times h \\ge s$\n- $w+h\\ge x$\n\n两个「字母 T」不相同即两个「字母 T」的 **「横」长** 或 **「竖」长** 或 **最左上角的坐标** 不同。     ", "inputFormat": "第一行，两个整数 $n,m$，表示给定的 $01$ 矩阵共有 $n$ 行 $m$ 列。\n\n第二行，四个整数 $a,b,s,x$。\n\n接下来 $n$ 行，每行 $m$ 个数，只可能是 $0$ / $1$，为给定的矩阵。", "outputFormat": "输出一个整数，表示有多少个**满足条件且合法**的「字母 T」。   ", "hint": "**【样例解释 #1】**\n$$\n    \\begin{array}{ccc}\n      \\color{Red}11111\\qquad11111\\\\01\\color{Red}1\\color{black}10\\qquad01\\color{Red}1\\color{black}10\\\\\n      11\\color{Red}1\\color{black}11\\qquad11\\color{Red}1\\color{black}11\\\\\n      01\\color{Red}1\\color{black}10\\qquad01\\color{Red}1\\color{black}10\\\\\n      11111\\qquad11\\color{Red}1\\color{black}11\\\\\\\\\n      第\\ 1\\ 个\\qquad第\\ 2\\ 个\n    \\end{array}\n$$\n除了以上两个「字母 T」，没有其他满足条件且合法的「字母 T」，故输出 $2$。\n\n**【数据范围】**       \n| 测试点编号 | $n,m\\le$ | $a,b\\le$ | $s\\le$ | $x\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1 \\sim 4$ | $100$ | $100$ |$10^4$|$200$|\n| $5 \\sim 8$ | $500$ | $500$ |$2.5\\times 10^5$|$10^4$|\n| $9,10$ | $3\\times 10^3$ | $0$ |$0$|$0$|\n| $11\\sim 13$ | $3\\times 10^3$ |$3\\times 10^3$|$0$|$6\\times 10^3$|\n| $14\\sim 16$ | $3\\times 10^3$ |$3\\times 10^3$|$9\\times 10^6$|$0$|\n| $17\\sim 20$ | $3\\times 10^3$ |$3\\times 10^3$|$9\\times 10^6$|$6\\times 10^3$|\n\n对于 $100\\%$ 的数据，满足 $1 \\le n,m \\le 3\\times 10^3$，$0 \\le a,b \\le 3\\times10^3$，$0 \\le s \\le 9\\times10^6$，$\\space0 \\le x \\le 6\\times10^3$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-2」字母", "background": "\n给你一个 $01$ 矩阵，我们希望你从中找到由连续的 $1$ 组成的「字母 T」。", "description": "「字母 T」由一横和一竖组成，竖一定在横的下方（您可以借助英文字母 `T` 辅助理解）。\n\n在本题中，我们定义「横」为组成「字母 T」的水平线段，「竖」为组成「字母 T」的竖直线段。\n\n注意「横」与「竖」的公共部分同时计入横长和竖长。\n\n**合法的「字母 T」的「横」长必须为奇数且「竖」与「横」交于「横」的中点，「横」长最小为 $3$ ，「竖」长最小为 $2$。**\n\n\n如：\n\n$$\n    \\begin{array}{ccc}\n       0\\color{Red}111\\color{black}1\\\\\n       00\\color{Red}1\\color{black}01\n    \\end{array}\n$$\n\n**只含有**一个合法的「字母 T」（即标红部分）。\n\n\n现在给你一个 $n \\times m$ 的 $01$ 矩阵，请你求出在这个矩阵中**合法**的「字母 T」中，一共有多少个**满足以下条件**的「字母 T」。 \n\n设某个合法的「字母 T」的「横」长为 $w$，「竖」长为 $h$，有：\n\n- $w\\ge a$\n- $h\\ge b$\n- $w\\times h \\ge s$\n- $w+h\\ge x$\n\n两个「字母 T」不相同即两个「字母 T」的 **「横」长** 或 **「竖」长** 或 **最左上角的坐标** 不同。     ", "inputFormat": "第一行，两个整数 $n,m$，表示给定的 $01$ 矩阵共有 $n$ 行 $m$ 列。\n\n第二行，四个整数 $a,b,s,x$。\n\n接下来 $n$ 行，每行 $m$ 个数，只可能是 $0$ / $1$，为给定的矩阵。", "outputFormat": "输出一个整数，表示有多少个**满足条件且合法**的「字母 T」。   ", "hint": "**【样例解释 #1】**\n$$\n    \\begin{array}{ccc}\n      \\color{Red}11111\\qquad11111\\\\01\\color{Red}1\\color{black}10\\qquad01\\color{Red}1\\color{black}10\\\\\n      11\\color{Red}1\\color{black}11\\qquad11\\color{Red}1\\color{black}11\\\\\n      01\\color{Red}1\\color{black}10\\qquad01\\color{Red}1\\color{black}10\\\\\n      11111\\qquad11\\color{Red}1\\color{black}11\\\\\\\\\n      第\\ 1\\ 个\\qquad第\\ 2\\ 个\n    \\end{array}\n$$\n除了以上两个「字母 T」，没有其他满足条件且合法的「字母 T」，故输出 $2$。\n\n**【数据范围】**       \n| 测试点编号 | $n,m\\le$ | $a,b\\le$ | $s\\le$ | $x\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1 \\sim 4$ | $100$ | $100$ |$10^4$|$200$|\n| $5 \\sim 8$ | $500$ | $500$ |$2.5\\times 10^5$|$10^4$|\n| $9,10$ | $3\\times 10^3$ | $0$ |$0$|$0$|\n| $11\\sim 13$ | $3\\times 10^3$ |$3\\times 10^3$|$0$|$6\\times 10^3$|\n| $14\\sim 16$ | $3\\times 10^3$ |$3\\times 10^3$|$9\\times 10^6$|$0$|\n| $17\\sim 20$ | $3\\times 10^3$ |$3\\times 10^3$|$9\\times 10^6$|$6\\times 10^3$|\n\n对于 $100\\%$ 的数据，满足 $1 \\le n,m \\le 3\\times 10^3$，$0 \\le a,b \\le 3\\times10^3$，$0 \\le s \\le 9\\times10^6$，$\\space0 \\le x \\le 6\\times10^3$。\n\n", "locale": "zh-CN"}}}
{"pid": "P6601", "type": "P", "difficulty": 4, "samples": [["2 500000004 1", "125000001"], ["6 114514 11", "756497239"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["递推", "二项式定理", "概率论", "矩阵乘法", "逆元"], "title": "「EZEC-2」机器", "background": "tlx 喜欢科幻小说。   \n\n>小宇宙中只剩下漂流瓶和生态球。漂流瓶隐没于黑暗里,在一千米见方的宇宙中,只有生态球里的小太阳发出一点光芒。在这个小小的生命世界中,几只清澈的水球在零重力环境中静静地飘浮着,有一条小鱼从一只水球中蹦出,跃入另一只水球,轻盈地穿游于绿藻之间。在一小块陆地上的草丛中,有一滴露珠从一片草叶上脱离,旋转着飘起,向太空中折射出一缕晶莹的阳光。    \n>$\\qquad \\qquad \\qquad \\qquad \\qquad \\qquad \\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad --$《三体》    \n\n在另一个宇宙，将是另一番奇景吧。    \n\n在那里，重力似乎变得微不足道了，引力机器成了司空见惯的东西。\n\n引力机器装置内并没有重力，即若有物体在机器上运动，运动过程中只受机器给予的引力，这个力有一定几率使物体向施力物体快速移动，达到一定动力时就可以实现瞬移。\n\n", "description": "一个引力机器由一个光滑圆轨道和 $2n$ 个小孔组成（小孔按**逆时针**从 $1$ 到 $2n$ 编号，每两个相邻的小孔所夹的**劣弧**度数为 $\\dfrac{\\pi}{n}$ ），每个小孔与和其夹角为 $\\pi$ 的另一个小孔有通道相连，比如当 $n=2$ 时，$1$ 号孔和 $3$ 号孔相连。\n\n当 $n=2$ 时，这个装置的构造大概是这样的：\n \n ![](https://cdn.luogu.com.cn/upload/image_hosting/el8alxde.png) \n \n现在我们在 $1$ 号孔处放一个小球，使它一直**沿逆时针方向做匀速圆周运动**，在不瞬移的情况下，每一秒恰好能从一个小孔运动至下一个小孔。\n\n由于未来实验室构造奇特（内部的引力提供装置太神了！），每经过一个小孔时，有 $p$ 的概率**立刻瞬移**（即不花费时间）到通道对面的小孔并继续沿逆时针方向做匀速圆周运动，也就是有 $1-p$ 的概率继续沿圆周向下一个小孔运动。\n\n值得注意的是，**每一单位时刻，小球只能瞬移一次**。  \n\n简单地说，若某一时刻小球在小孔 $i$，则下一时刻它可能运动到小孔 $i \\bmod 2n + 1$ 或 $(i + n) \\bmod 2n + 1$，概率分别为 $1-p$ 和 $p$。\n\n现在 tlx 有两个一模一样的引力机器，两个小球同时从 $1$ 号孔开始运动。他会**随机**（所有可能选择的概率相同）选择一个二元组 $(i,j)( 1\\leqslant i\\leqslant 2n,0\\leqslant j\\leqslant t,i,j\\in \\mathbb Z$ ) 分别代表小孔编号和时间，你需要求出时间为 $j$ 时两个引力机器的小孔 $i$ **同时**有小球**停留（运动经过小孔但瞬移到对面了不算停留）** 的概率。\n\n注意：**小球刚开始运动时也可能瞬移到对面的小孔。**   \n\n为方便计算，我们规定：所有概率都是在模 $10^9+7$ 意义下的。      ", "inputFormat": "输入数据共一行，三个整数 $n,p,t$，分别代表引力装置的小孔数的一半，瞬移的概率对 $10^9+7$ 取模的结果，选择的时间的范围的上界。", "outputFormat": "共一行，一个整数，代表两个小球同时经过所选位置的概率对 $10^9+7$ 取模的结果。", "hint": "**【数据范围与约定】** \n\n**本题采用捆绑测试。**    \n\n具体计分方式如下：   \n\n- Subtask $1$ ($7$ points)：满足 $p\\in \\{0,1\\}$；  \n- Subtask $2$ ($13$ points)：满足 $t\\leqslant 20,n\\leqslant50$；  \n- Subtask $3$ ($20$ points)：满足 $t\\leqslant 10^3,n\\leqslant50$；  \n- Subtask $4$ ($10$ points)：满足 $t\\leqslant 10^3$；  \n- Subtask $5$ ($10$ points)：满足 $t\\leqslant 10^6$；\n- Subtask $6$ ($15$ points)：满足 $n\\leqslant50$；\n- Subtask $7$ ($25$ points)：无特殊限制。\n\n\n对于 $100\\%$ 的数据，满足 $2\\leqslant n\\leqslant 500$，$0\\leqslant p\\leqslant 10^9+6$，$0\\leqslant t \\leqslant 10^9$。  \n\n**注意：不做说明的数据范围即为极限数据范围。**\n\n**【样例解释 #1】**  \n\n$500000004$ 是模 $10^9+7$ 意义下的 $\\dfrac{1}{2}$。 \n\n下面为了方便，记 $P(i,j)$ 为选择的二元组为 $(i,j)$ 时的概率。    \n\n所有概率不为 $0$ 的二元组有：   \n$P(1,0)=\\dfrac{1}{4},P(3,0)=\\dfrac{1}{4},P(2,1)=\\dfrac{1}{4},P(4,1)=\\dfrac{1}{4}$。    \n\n所有可以选择的二元组有：   \n$(1,0),(1,1),(2,0),(2,1),(3,0),(3,1),(4,0),(4,1)$，共 $8$ 种。    \n\n所以总的概率：  \n$$P=\\dfrac{1}{8}×\\dfrac{1}{4}×4+\\dfrac{1}{8}×0×4=\\dfrac{1}{8}$$\n\n在模 $10^9+7$ 意义下为 $125000001$，即为输出的答案。\n\n------------\n\n**【其他提示】**\n\n1. 如果你不了解分数取模，可以查看[这里](https://www.luogu.com.cn/problem/P2613)。  \n\n2. 如果你不明白题目中角度的表示方法，可以查看[弧度制](https://baike.baidu.com/item/弧度制/3315973?fr=aladdin)。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-2」机器", "background": "tlx 喜欢科幻小说。   \n\n>小宇宙中只剩下漂流瓶和生态球。漂流瓶隐没于黑暗里,在一千米见方的宇宙中,只有生态球里的小太阳发出一点光芒。在这个小小的生命世界中,几只清澈的水球在零重力环境中静静地飘浮着,有一条小鱼从一只水球中蹦出,跃入另一只水球,轻盈地穿游于绿藻之间。在一小块陆地上的草丛中,有一滴露珠从一片草叶上脱离,旋转着飘起,向太空中折射出一缕晶莹的阳光。    \n>$\\qquad \\qquad \\qquad \\qquad \\qquad \\qquad \\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad --$《三体》    \n\n在另一个宇宙，将是另一番奇景吧。    \n\n在那里，重力似乎变得微不足道了，引力机器成了司空见惯的东西。\n\n引力机器装置内并没有重力，即若有物体在机器上运动，运动过程中只受机器给予的引力，这个力有一定几率使物体向施力物体快速移动，达到一定动力时就可以实现瞬移。\n\n", "description": "一个引力机器由一个光滑圆轨道和 $2n$ 个小孔组成（小孔按**逆时针**从 $1$ 到 $2n$ 编号，每两个相邻的小孔所夹的**劣弧**度数为 $\\dfrac{\\pi}{n}$ ），每个小孔与和其夹角为 $\\pi$ 的另一个小孔有通道相连，比如当 $n=2$ 时，$1$ 号孔和 $3$ 号孔相连。\n\n当 $n=2$ 时，这个装置的构造大概是这样的：\n \n ![](https://cdn.luogu.com.cn/upload/image_hosting/el8alxde.png) \n \n现在我们在 $1$ 号孔处放一个小球，使它一直**沿逆时针方向做匀速圆周运动**，在不瞬移的情况下，每一秒恰好能从一个小孔运动至下一个小孔。\n\n由于未来实验室构造奇特（内部的引力提供装置太神了！），每经过一个小孔时，有 $p$ 的概率**立刻瞬移**（即不花费时间）到通道对面的小孔并继续沿逆时针方向做匀速圆周运动，也就是有 $1-p$ 的概率继续沿圆周向下一个小孔运动。\n\n值得注意的是，**每一单位时刻，小球只能瞬移一次**。  \n\n简单地说，若某一时刻小球在小孔 $i$，则下一时刻它可能运动到小孔 $i \\bmod 2n + 1$ 或 $(i + n) \\bmod 2n + 1$，概率分别为 $1-p$ 和 $p$。\n\n现在 tlx 有两个一模一样的引力机器，两个小球同时从 $1$ 号孔开始运动。他会**随机**（所有可能选择的概率相同）选择一个二元组 $(i,j)( 1\\leqslant i\\leqslant 2n,0\\leqslant j\\leqslant t,i,j\\in \\mathbb Z$ ) 分别代表小孔编号和时间，你需要求出时间为 $j$ 时两个引力机器的小孔 $i$ **同时**有小球**停留（运动经过小孔但瞬移到对面了不算停留）** 的概率。\n\n注意：**小球刚开始运动时也可能瞬移到对面的小孔。**   \n\n为方便计算，我们规定：所有概率都是在模 $10^9+7$ 意义下的。      ", "inputFormat": "输入数据共一行，三个整数 $n,p,t$，分别代表引力装置的小孔数的一半，瞬移的概率对 $10^9+7$ 取模的结果，选择的时间的范围的上界。", "outputFormat": "共一行，一个整数，代表两个小球同时经过所选位置的概率对 $10^9+7$ 取模的结果。", "hint": "**【数据范围与约定】** \n\n**本题采用捆绑测试。**    \n\n具体计分方式如下：   \n\n- Subtask $1$ ($7$ points)：满足 $p\\in \\{0,1\\}$；  \n- Subtask $2$ ($13$ points)：满足 $t\\leqslant 20,n\\leqslant50$；  \n- Subtask $3$ ($20$ points)：满足 $t\\leqslant 10^3,n\\leqslant50$；  \n- Subtask $4$ ($10$ points)：满足 $t\\leqslant 10^3$；  \n- Subtask $5$ ($10$ points)：满足 $t\\leqslant 10^6$；\n- Subtask $6$ ($15$ points)：满足 $n\\leqslant50$；\n- Subtask $7$ ($25$ points)：无特殊限制。\n\n\n对于 $100\\%$ 的数据，满足 $2\\leqslant n\\leqslant 500$，$0\\leqslant p\\leqslant 10^9+6$，$0\\leqslant t \\leqslant 10^9$。  \n\n**注意：不做说明的数据范围即为极限数据范围。**\n\n**【样例解释 #1】**  \n\n$500000004$ 是模 $10^9+7$ 意义下的 $\\dfrac{1}{2}$。 \n\n下面为了方便，记 $P(i,j)$ 为选择的二元组为 $(i,j)$ 时的概率。    \n\n所有概率不为 $0$ 的二元组有：   \n$P(1,0)=\\dfrac{1}{4},P(3,0)=\\dfrac{1}{4},P(2,1)=\\dfrac{1}{4},P(4,1)=\\dfrac{1}{4}$。    \n\n所有可以选择的二元组有：   \n$(1,0),(1,1),(2,0),(2,1),(3,0),(3,1),(4,0),(4,1)$，共 $8$ 种。    \n\n所以总的概率：  \n$$P=\\dfrac{1}{8}×\\dfrac{1}{4}×4+\\dfrac{1}{8}×0×4=\\dfrac{1}{8}$$\n\n在模 $10^9+7$ 意义下为 $125000001$，即为输出的答案。\n\n------------\n\n**【其他提示】**\n\n1. 如果你不了解分数取模，可以查看[这里](https://www.luogu.com.cn/problem/P2613)。  \n\n2. 如果你不明白题目中角度的表示方法，可以查看[弧度制](https://baike.baidu.com/item/弧度制/3315973?fr=aladdin)。\n\n", "locale": "zh-CN"}}}
{"pid": "P6602", "type": "P", "difficulty": 5, "samples": [["5 4 0\n2 1\n3 1\n0 1\n1 1\n4 1", "1\n1\n0\n0\n-1"], ["5 15 1\n3 1\n8 1\n1 1\n7 1\n14 1", "15\n11\n11\n7\n6\n"], ["10 100 10\n94 3\n22 10\n9 4\n37 1\n21 10\n92 5\n50 9\n68 8\n44 4\n78 9\n", "100\n93\n83\n77\n77\n77\n68\n44\n40\n26\n"], ["10 100 3\n95 1\n13 1\n52 1\n74 1\n40 1\n54 1\n71 1\n68 1\n51 3\n12 2\n", "100\n100\n100\n94\n80\n59\n56\n53\n50\n39\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "离散化", "O2优化"], "title": "「EZEC-2」数轴", "background": "", "description": "小 X 画了一条数轴，他将进行 $n$ 次操作，每次操作他会先在数轴上的 $x_i$ 位置上增添 $a_i$ 个标记。\n\n然后他需要选择二元组 $(l,r)$，满足 $l,r$ 为整数， $0\\le l\\le r \\le m$，且在数轴上的区间 $[l,r]$ 上的标记的个数**小于等于** $k$。\n\n对于每次操作，你需要求出满足条件的二元组 $(l,r)$ 中 $r-l$ 的最大值。\n\n", "inputFormat": "第一行，三个整数，$n,m$ 和 $k$。\n\n下面 $n$ 行，每行两个整数 $x_i$ 和 $a_i$。", "outputFormat": "共 $n$ 行，表示每次操作后的答案。\n\n若找不到符合条件的二元组 $(l,r)$，输出 `-1`。", "hint": "**【样例解释 #2】**\n\n每次操作后选择的二元组分别是 $(0,15),(4,15),(4,15),(8,15),(9,15)$。\n\n---\n**【数据范围与约定】**\n\n| 数据点编号 | $n=$ | $m=$ | $k=$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1,2$ | $100$ | $100$ | $3$ |\n| $3,4$ | $100$ | $10^3$ | $3$ |\n| $5,6$ | $100$ | $10^4$ | $3$ |\n| $7,8$ | $500$ | $10^4$ | $3$ |\n| $9,10$ | $10^3$ | $10^4$ | $3$ |\n| $11,12$ | $10^4$ | $10^5$ | $3$ |\n| $13\\sim 16$ | $10^5$ | $10^6$ | $0$ |\n| $17\\sim 21$ | $10^5$ | $10^6$ | $3$ |\n| $22,23$ | $10^5$ | $10^9$ | $100$ |\n| $24,25$ | $10^6$ | $10^9$ | $100$ |\n\n保证测试点 $13\\sim 16$ 的 $x_i$ 为随机构造。\n\n测试点 $24,25$ 的时间限制为 $3\\text s$ ，其他测试点的时间限制均为 $2\\text s$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$，$0\\le m\\le 10^9$，$0\\le x_i\\le m$，$0\\le k\\le 100$，$1\\le a_i\\le 100$。\n\n**注意：数轴上同一个位置上可能会多次增添标记。**\n\n**已自动开启 $\\text{O2}$ 优化，保证时空限制均为 $\\text{std}$ 在开启 $\\text{O2}$ 优化后的两倍以上。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-2」数轴", "background": "", "description": "小 X 画了一条数轴，他将进行 $n$ 次操作，每次操作他会先在数轴上的 $x_i$ 位置上增添 $a_i$ 个标记。\n\n然后他需要选择二元组 $(l,r)$，满足 $l,r$ 为整数， $0\\le l\\le r \\le m$，且在数轴上的区间 $[l,r]$ 上的标记的个数**小于等于** $k$。\n\n对于每次操作，你需要求出满足条件的二元组 $(l,r)$ 中 $r-l$ 的最大值。\n\n", "inputFormat": "第一行，三个整数，$n,m$ 和 $k$。\n\n下面 $n$ 行，每行两个整数 $x_i$ 和 $a_i$。", "outputFormat": "共 $n$ 行，表示每次操作后的答案。\n\n若找不到符合条件的二元组 $(l,r)$，输出 `-1`。", "hint": "**【样例解释 #2】**\n\n每次操作后选择的二元组分别是 $(0,15),(4,15),(4,15),(8,15),(9,15)$。\n\n---\n**【数据范围与约定】**\n\n| 数据点编号 | $n=$ | $m=$ | $k=$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1,2$ | $100$ | $100$ | $3$ |\n| $3,4$ | $100$ | $10^3$ | $3$ |\n| $5,6$ | $100$ | $10^4$ | $3$ |\n| $7,8$ | $500$ | $10^4$ | $3$ |\n| $9,10$ | $10^3$ | $10^4$ | $3$ |\n| $11,12$ | $10^4$ | $10^5$ | $3$ |\n| $13\\sim 16$ | $10^5$ | $10^6$ | $0$ |\n| $17\\sim 21$ | $10^5$ | $10^6$ | $3$ |\n| $22,23$ | $10^5$ | $10^9$ | $100$ |\n| $24,25$ | $10^6$ | $10^9$ | $100$ |\n\n保证测试点 $13\\sim 16$ 的 $x_i$ 为随机构造。\n\n测试点 $24,25$ 的时间限制为 $3\\text s$ ，其他测试点的时间限制均为 $2\\text s$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$，$0\\le m\\le 10^9$，$0\\le x_i\\le m$，$0\\le k\\le 100$，$1\\le a_i\\le 100$。\n\n**注意：数轴上同一个位置上可能会多次增添标记。**\n\n**已自动开启 $\\text{O2}$ 优化，保证时空限制均为 $\\text{std}$ 在开启 $\\text{O2}$ 优化后的两倍以上。**", "locale": "zh-CN"}}}
{"pid": "P6603", "type": "P", "difficulty": 6, "samples": [["7 9 2\n0 4 5 10 10 20 0\n1 2\n1 3\n1 4\n1 6\n2 5\n3 5\n4 7\n5 7\n6 7", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["前缀和", "状压 DP"], "title": "「EZEC-2」甜梦", "background": "\n\n> 昨是今非望无尽，生死相隔两茫茫。    \n解愁肠，度思量，人间如梦，倚笑乘风凉。", "description": "有 $n$ 个梦境场景，编号 $\\in [1,n]$ 且互不相同。PF 有精神分裂症，他在同一时间会处于两个梦境。**这两个梦境所在的场景编号差别的绝对值不能大于 $l$**。场景之间有 $m$ 种**单向**关系，其中第 $i$ 个关系连接场景 $u_i$ 和 $v_i$。不存在不可能到达的场景。\n\n每个场景都有一个快乐值，其中第 $j$ 个场景的快乐值为 $a_j$，在梦境**第一次**经过时增加。\n\n一开始两个梦境均在场景 $1$，当两个梦境都移动到场景 $n$ 时，PF会醒来。\n\n如果某次移动时，PF 目前梦境所在的两个场景 $A,B$ 都与某个场景 $C$ **直接相连**，那么 PF 可以**同时移动** 两个梦境到达场景 $C$ 。否则，PF **一次只能移动一个梦境**。\n\n请你编一个程序，来计算醒来时可能得到的最大快乐值。", "inputFormat": "第一行三个整数 $n,m,l$，分别表示场景的数量，场景之间的关系数量，以及 PF 两个场景距离的最大值。\n\n接下来一行 $n$ 个整数，第 $i$ 个数表示编号为 $i$ 的场景的快乐值为 $a_i$，场景 $1$ 和场景 $n$ 的快乐值为 $0$。\n\n接下来 $m$ 行，每行两个整数 $u,v(1\\le u<v \\le n)$，表示场景之间存在的一条单向关系。 ", "outputFormat": "如果有解，一行一个整数 $q$，表示能获得的最大快乐值。\n\n如果无解，只需输出 `-1`。", "hint": "[大样例](https://www.luogu.com.cn/paste/ar8yuqg6)\n\n**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a3bbsu8i.png?x-oss-process=image/resize,m_lfit,h_340,w_500)\n\n下文用 $A,B$ 表示目前正在进行的梦境：\n\n移动梦境 $A \\space 1 \\to 3$，移动梦境 $B \\space 1 \\to 4$，移动梦境 $A \\space 3 \\to 5$，之后同时移动梦境 $A \\space B$ 到达场景 $7$，快乐值总和为 $5+10+10 = 25$。\n\n**注意**：如果想移动某一梦境到场景 $6$，那么另一梦境的编号必须大于等于 $4$。然而到 $6$ 的线路只有 $1\\to 6$，而同时拥有场景 $1$ 和场景 $4$ 不满足中间相隔场景 $\\le l$，故唯一通过场景 $6$ 的方案为将两个梦境同时移动到场景 $6$，而这么做能得到的快乐值为 $20$。\n\n---\n\n**【数据范围与约定】**\n| 测试点编号 | $ n \\le$ | $ m \\le$ | $ l \\le$ | $ a_i \\le$| 时间 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |:----------: | :----------: |:----------: |\n| $1,2$ | $10$ | $15$| $5$ | $50$ | $1\\text s$ |无 |\n| $3\\sim 4$ | $16$ | $40$ | $8$ | $5 \\times 10^3$ |$1\\text s$ |无 |\n| $5\\sim 6$ | $16$ | $120$ | $8$ | $5 \\times 10^3$ |$1\\text s$ |无 |\n| $7 \\sim 10$ | $100$| $10^3$|$10$ | $10^4$|$1 \\text s$ |无|\n| $11$ | $100$| $10^3$|$10$ | $10^4$|$1\\text s$ |场景是一棵树|\n| $12 \\sim 14$ | $10^3$| $10^4$|$10$ | $10^4$|$1\\text s$ |无|\n| $15,16$ | $5\\times10^3$| $3\\times10^4$|$10$ | $10^4$|$1\\text s$ |无|\n| $17,18$ | $5\\times10^3$| $3\\times10^4$|$11$ | $10^4$|$2\\text s$ |无|\n| $19,20$ | $5\\times10^3$| $3\\times10^4$|$12$ | $10^4$|$3\\text s$ |无|\n\n对于 $100\\%$ 的数据，$1\\le u<v \\le n$, $1 \\le n \\le 5\\times 10^3$, $1 \\le m \\le 3\\times 10^4$, $1 \\le a_i \\le 10^4$, $1 \\le l \\le 12$。\n\n**输入保证每个场景都能从起点到达，并且都能连到终点。**\n\n**输入不保证没有重边。**\n\n**输入不对 $u,v$ 的编号差做任何保证。**\n\n------------\n\n**【移动范例】**\n\n假设 $l=2$ 且关系存在，下面的格式表示 $A \\space B$ $\\to$ $A' \\space B'$ 一次移动：\n\n* $1 \\space 3 \\to 5\\space 3$ (√)\n* $1 \\space 3 \\to 1\\space 4$ (×)\n* $1 \\space 3 \\to 8\\space 8$ (√)\n* $1 \\space 3 \\to 6\\space 8$ (×)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-2」甜梦", "background": "\n\n> 昨是今非望无尽，生死相隔两茫茫。    \n解愁肠，度思量，人间如梦，倚笑乘风凉。", "description": "有 $n$ 个梦境场景，编号 $\\in [1,n]$ 且互不相同。PF 有精神分裂症，他在同一时间会处于两个梦境。**这两个梦境所在的场景编号差别的绝对值不能大于 $l$**。场景之间有 $m$ 种**单向**关系，其中第 $i$ 个关系连接场景 $u_i$ 和 $v_i$。不存在不可能到达的场景。\n\n每个场景都有一个快乐值，其中第 $j$ 个场景的快乐值为 $a_j$，在梦境**第一次**经过时增加。\n\n一开始两个梦境均在场景 $1$，当两个梦境都移动到场景 $n$ 时，PF会醒来。\n\n如果某次移动时，PF 目前梦境所在的两个场景 $A,B$ 都与某个场景 $C$ **直接相连**，那么 PF 可以**同时移动** 两个梦境到达场景 $C$ 。否则，PF **一次只能移动一个梦境**。\n\n请你编一个程序，来计算醒来时可能得到的最大快乐值。", "inputFormat": "第一行三个整数 $n,m,l$，分别表示场景的数量，场景之间的关系数量，以及 PF 两个场景距离的最大值。\n\n接下来一行 $n$ 个整数，第 $i$ 个数表示编号为 $i$ 的场景的快乐值为 $a_i$，场景 $1$ 和场景 $n$ 的快乐值为 $0$。\n\n接下来 $m$ 行，每行两个整数 $u,v(1\\le u<v \\le n)$，表示场景之间存在的一条单向关系。 ", "outputFormat": "如果有解，一行一个整数 $q$，表示能获得的最大快乐值。\n\n如果无解，只需输出 `-1`。", "hint": "[大样例](https://www.luogu.com.cn/paste/ar8yuqg6)\n\n**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a3bbsu8i.png?x-oss-process=image/resize,m_lfit,h_340,w_500)\n\n下文用 $A,B$ 表示目前正在进行的梦境：\n\n移动梦境 $A \\space 1 \\to 3$，移动梦境 $B \\space 1 \\to 4$，移动梦境 $A \\space 3 \\to 5$，之后同时移动梦境 $A \\space B$ 到达场景 $7$，快乐值总和为 $5+10+10 = 25$。\n\n**注意**：如果想移动某一梦境到场景 $6$，那么另一梦境的编号必须大于等于 $4$。然而到 $6$ 的线路只有 $1\\to 6$，而同时拥有场景 $1$ 和场景 $4$ 不满足中间相隔场景 $\\le l$，故唯一通过场景 $6$ 的方案为将两个梦境同时移动到场景 $6$，而这么做能得到的快乐值为 $20$。\n\n---\n\n**【数据范围与约定】**\n| 测试点编号 | $ n \\le$ | $ m \\le$ | $ l \\le$ | $ a_i \\le$| 时间 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |:----------: | :----------: |:----------: |\n| $1,2$ | $10$ | $15$| $5$ | $50$ | $1\\text s$ |无 |\n| $3\\sim 4$ | $16$ | $40$ | $8$ | $5 \\times 10^3$ |$1\\text s$ |无 |\n| $5\\sim 6$ | $16$ | $120$ | $8$ | $5 \\times 10^3$ |$1\\text s$ |无 |\n| $7 \\sim 10$ | $100$| $10^3$|$10$ | $10^4$|$1 \\text s$ |无|\n| $11$ | $100$| $10^3$|$10$ | $10^4$|$1\\text s$ |场景是一棵树|\n| $12 \\sim 14$ | $10^3$| $10^4$|$10$ | $10^4$|$1\\text s$ |无|\n| $15,16$ | $5\\times10^3$| $3\\times10^4$|$10$ | $10^4$|$1\\text s$ |无|\n| $17,18$ | $5\\times10^3$| $3\\times10^4$|$11$ | $10^4$|$2\\text s$ |无|\n| $19,20$ | $5\\times10^3$| $3\\times10^4$|$12$ | $10^4$|$3\\text s$ |无|\n\n对于 $100\\%$ 的数据，$1\\le u<v \\le n$, $1 \\le n \\le 5\\times 10^3$, $1 \\le m \\le 3\\times 10^4$, $1 \\le a_i \\le 10^4$, $1 \\le l \\le 12$。\n\n**输入保证每个场景都能从起点到达，并且都能连到终点。**\n\n**输入不保证没有重边。**\n\n**输入不对 $u,v$ 的编号差做任何保证。**\n\n------------\n\n**【移动范例】**\n\n假设 $l=2$ 且关系存在，下面的格式表示 $A \\space B$ $\\to$ $A' \\space B'$ 一次移动：\n\n* $1 \\space 3 \\to 5\\space 3$ (√)\n* $1 \\space 3 \\to 1\\space 4$ (×)\n* $1 \\space 3 \\to 8\\space 8$ (√)\n* $1 \\space 3 \\to 6\\space 8$ (×)", "locale": "zh-CN"}}}
{"pid": "P6604", "type": "P", "difficulty": 6, "samples": [["5 5 0\n5 2 4 1 3\n1 5\n1 3\n2 4\n3 5\n2 5\n", "28\n"], ["6 5 1\n1 1 4 5 1 4\n19 19 8 10\n", "6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016"], "title": "[HNOI2016] 序列 加强版", "background": "本题是 [P3246](https://www.luogu.com.cn/problem/P3246) 的数据加强版，扩大了询问次数的范围，增加了强制在线，并加入了一组构造数据。\n\n本题的输入输出格式与原题略有不同。", "description": "给定长度为 $ n $ 的序列：$ a_1, a_2, \\cdots , a_n $，记为 $ a[1 \\colon n] $。类似地，$ a[l \\colon r] $（$ 1 \\leq l \\leq r \\leq N$）是指序列：$ a_{l}, a_{l+1}, \\cdots ,a_{r-1}, a_r $。若 $1\\leq l \\leq s \\leq t \\leq r \\leq n$，则称 $ a[s \\colon t] $是 $ a[l \\colon r] $ 的子序列。\n\n现在有 $ q $ 个询问，每个询问给定两个数 $ l $ 和 $ r $，$ 1 \\leq l \\leq r \\leq n $，求 $ a[l \\colon r] $ 的不同子序列的最小值之和。例如，给定序列\n $ 5, 2, 4, 1, 3 $，询问给定的两个数为 $ 1 $ 和 $ 3 $，那么 $ a[1 \\colon 3] $ 有 $ 6 $ 个子序列 $a[1 \\colon 1], a[2 \\colon 2], a[3 \\colon 3], a[1 \\colon 2],a[2 \\colon 3], a[1 \\colon 3] $，这 $6 $ 个子序列的最小值之和为 $5+2+4+2+2+2=17$。", "inputFormat": "第一行三个整数 $n$，$q$，$type$ 表示序列长度，询问数与输入方式。\n\n第二行 $n$ 个整数表示这个序列。\n\n若 $type=0$，接下来 $q$ 行，每行两个数 $l$，$r$，代表询问区间 $[l,r]$。\n\n若 $type=1$，则数据按照如下代码生成：\n```cpp\nnamespace gen{\n\ttypedef unsigned long long ull;\n\tull s,a,b,c,lastans=0;\n\tull rand(){\n\t\treturn s^=(a+b*lastans)%c;\n\t}\n};\n```\n其中，`s`，`a`，`b`，`c` 的初始值在第三行给出，满足 `s`，`a`，`b` 均在 $[0,10^9]$ 之间，`c` 在 $[1,10^9]$ 之间。`lastans` 表示上次询问的答案转化为 `unsigned long long` 类型后的值，第一次询问时值为 $0$。\n\n每次询问时，你可以通过下面的方式生成 $l$ 和 $r$：\n```cpp\nl=gen::rand()%n+1;\nr=gen::rand()%n+1;\nif(l>r) std::swap(l,r);\n```", "outputFormat": "一行一个整数，表示每次询问的答案转成 `unsigned long long` 类型后的异或和。", "hint": "- 对于 $30\\%$ 的数据，$1\\le q\\le10^5$，$type=0$。\n- 对于另外 $70\\%$ 的数据，$1\\le q\\le10^7$，$type=1$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$-10^9\\le a_i\\le10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[HNOI2016] 序列 加强版", "background": "本题是 [P3246](https://www.luogu.com.cn/problem/P3246) 的数据加强版，扩大了询问次数的范围，增加了强制在线，并加入了一组构造数据。\n\n本题的输入输出格式与原题略有不同。", "description": "给定长度为 $ n $ 的序列：$ a_1, a_2, \\cdots , a_n $，记为 $ a[1 \\colon n] $。类似地，$ a[l \\colon r] $（$ 1 \\leq l \\leq r \\leq N$）是指序列：$ a_{l}, a_{l+1}, \\cdots ,a_{r-1}, a_r $。若 $1\\leq l \\leq s \\leq t \\leq r \\leq n$，则称 $ a[s \\colon t] $是 $ a[l \\colon r] $ 的子序列。\n\n现在有 $ q $ 个询问，每个询问给定两个数 $ l $ 和 $ r $，$ 1 \\leq l \\leq r \\leq n $，求 $ a[l \\colon r] $ 的不同子序列的最小值之和。例如，给定序列\n $ 5, 2, 4, 1, 3 $，询问给定的两个数为 $ 1 $ 和 $ 3 $，那么 $ a[1 \\colon 3] $ 有 $ 6 $ 个子序列 $a[1 \\colon 1], a[2 \\colon 2], a[3 \\colon 3], a[1 \\colon 2],a[2 \\colon 3], a[1 \\colon 3] $，这 $6 $ 个子序列的最小值之和为 $5+2+4+2+2+2=17$。", "inputFormat": "第一行三个整数 $n$，$q$，$type$ 表示序列长度，询问数与输入方式。\n\n第二行 $n$ 个整数表示这个序列。\n\n若 $type=0$，接下来 $q$ 行，每行两个数 $l$，$r$，代表询问区间 $[l,r]$。\n\n若 $type=1$，则数据按照如下代码生成：\n```cpp\nnamespace gen{\n\ttypedef unsigned long long ull;\n\tull s,a,b,c,lastans=0;\n\tull rand(){\n\t\treturn s^=(a+b*lastans)%c;\n\t}\n};\n```\n其中，`s`，`a`，`b`，`c` 的初始值在第三行给出，满足 `s`，`a`，`b` 均在 $[0,10^9]$ 之间，`c` 在 $[1,10^9]$ 之间。`lastans` 表示上次询问的答案转化为 `unsigned long long` 类型后的值，第一次询问时值为 $0$。\n\n每次询问时，你可以通过下面的方式生成 $l$ 和 $r$：\n```cpp\nl=gen::rand()%n+1;\nr=gen::rand()%n+1;\nif(l>r) std::swap(l,r);\n```", "outputFormat": "一行一个整数，表示每次询问的答案转成 `unsigned long long` 类型后的异或和。", "hint": "- 对于 $30\\%$ 的数据，$1\\le q\\le10^5$，$type=0$。\n- 对于另外 $70\\%$ 的数据，$1\\le q\\le10^7$，$type=1$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$-10^9\\le a_i\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P6606", "type": "P", "difficulty": 3, "samples": [["5 5\n000000000003000001000003000001000002000002000000000002000003", "2000001\n2\n517560944\n-1"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["深度优先搜索 DFS", "Code+"], "title": "[Code+#7] 最小路径串", "background": "", "description": "$n$ 个点 $m$ 条边的无向图中，所有点用从 `0` 开始的 `6` 位数字串编号，即 `000000`、`000001`、`000002`、……直到 $n-1$ 对应的 $6$ 位数字串。保证 $n\\le 10^6$，所以 $6$ 位的编号不会溢出。\n\n对于除了 `000000` 以外的每个点，你需要找到一条从 `000000` 出发且不经过重复点的路径，使得路径上所有点的数字串顺次连接形成的串的字典序最小。比较两个不同的串的字典序的方法是：如果其中某个串是另一个的前缀，则较短的串字典序较小；否则，找出两个串从左往右扫描时遇到的首个不相等的位置，在这个位置上的数字较小的串字典序较小。\n\n由于输出路径过于麻烦，你不需要完整地输出路径，只需要将路径上所有点的数字串视作一个整数，输出这个数对 $998244353$ 取模的结果。", "inputFormat": "第一行输入两个整数 $n$ 和 $m$。\n\n第二行输入一个长度为 $12m$ 的数字串，依次表示每条边。每条边用 $12$ 个数字表示，其中前 $6$ 个与后 $6$ 个数字分别表示这条边所连接的两个点的编号。\n\n注意，输入中可能会包含自环或重边。", "outputFormat": "输出 $n-1$ 行，依次输出除了点 `000000` 本身以外，点 `000000` 到每个点的字典序最小的路径，视为整数后对 $998244353$ 取模的结果。如果点 `000000` 不可到达某个点，则在对应的行改为输出 $-1$。", "hint": "### 样例解释\n\n- 从 `000000` 到 `000001` 所求的路径对应的串为 `000000000002000001`。\n- 从 `000000` 到 `000002` 所求的路径对应的串为 `000000000002`。\n- 从 `000000` 到 `000003` 所求的路径对应的串为 `000000000002000001000003`，对 $998244353$ 取模后为 $517560944$。\n- 从 `000000` 到 `000004` 不存在路径。\n\n### 子任务\n\n子任务 $1$（$11$ 分）\n- $1\\le n\\le 10^6, m = 0$。\n\n子任务 $2$（$55$ 分）\n- $1\\le n\\le 10, 0\\le m\\le20$。\n\n子任务 $3$（$34$ 分）\n- $1\\le n\\le 10^6, 0\\le m\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#7] 最小路径串", "background": "", "description": "$n$ 个点 $m$ 条边的无向图中，所有点用从 `0` 开始的 `6` 位数字串编号，即 `000000`、`000001`、`000002`、……直到 $n-1$ 对应的 $6$ 位数字串。保证 $n\\le 10^6$，所以 $6$ 位的编号不会溢出。\n\n对于除了 `000000` 以外的每个点，你需要找到一条从 `000000` 出发且不经过重复点的路径，使得路径上所有点的数字串顺次连接形成的串的字典序最小。比较两个不同的串的字典序的方法是：如果其中某个串是另一个的前缀，则较短的串字典序较小；否则，找出两个串从左往右扫描时遇到的首个不相等的位置，在这个位置上的数字较小的串字典序较小。\n\n由于输出路径过于麻烦，你不需要完整地输出路径，只需要将路径上所有点的数字串视作一个整数，输出这个数对 $998244353$ 取模的结果。", "inputFormat": "第一行输入两个整数 $n$ 和 $m$。\n\n第二行输入一个长度为 $12m$ 的数字串，依次表示每条边。每条边用 $12$ 个数字表示，其中前 $6$ 个与后 $6$ 个数字分别表示这条边所连接的两个点的编号。\n\n注意，输入中可能会包含自环或重边。", "outputFormat": "输出 $n-1$ 行，依次输出除了点 `000000` 本身以外，点 `000000` 到每个点的字典序最小的路径，视为整数后对 $998244353$ 取模的结果。如果点 `000000` 不可到达某个点，则在对应的行改为输出 $-1$。", "hint": "### 样例解释\n\n- 从 `000000` 到 `000001` 所求的路径对应的串为 `000000000002000001`。\n- 从 `000000` 到 `000002` 所求的路径对应的串为 `000000000002`。\n- 从 `000000` 到 `000003` 所求的路径对应的串为 `000000000002000001000003`，对 $998244353$ 取模后为 $517560944$。\n- 从 `000000` 到 `000004` 不存在路径。\n\n### 子任务\n\n子任务 $1$（$11$ 分）\n- $1\\le n\\le 10^6, m = 0$。\n\n子任务 $2$（$55$ 分）\n- $1\\le n\\le 10, 0\\le m\\le20$。\n\n子任务 $3$（$34$ 分）\n- $1\\le n\\le 10^6, 0\\le m\\le 10^6$。", "locale": "zh-CN"}}}
