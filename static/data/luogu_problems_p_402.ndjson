{"pid": "P9154", "type": "P", "difficulty": 2, "samples": [["2\n12\n2", "4\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「GLR-R4」立夏", "background": "&emsp;&emsp;「芳菲歇去何须恨，夏木阴阴正可人」\n\n---\n\n&emsp;&emsp;和老 V 说好的赛后团建终于举行啦！\n\n&emsp;&emsp;难得和学弟学妹们在一起，天依和阿绫自然不会错过这次良好的机会，更不会放过早就想 rua 的狐狸座的耳朵！\n\n&emsp;&emsp;“那个……天依……”\n\n&emsp;&emsp;天依和腿上的狐狸座同时歪过头看向某个叫阿绫的醋坛子。\n\n&emsp;&emsp;“绫姐绫姐，疼！”\n\n&emsp;&emsp;于是在天依给小狐狸扎头发的时候，小狐狸的耳朵已经被揉蔫啦！\n\n---\n\n&emsp;&emsp;**立夏**&emsp;「三步并两步　就发现　如期而至的透明夏日章节」", "description": "&emsp;&emsp;**本题提供简要题意。**\n\n&emsp;&emsp;天依给狐狸座准备的纱质发绳由**白色**和**紫色**的小格子组成，相同大小的小格子连成了一条足够长的带子。我们不妨把天依的手正捏着的位置标为第 $0$ 格，向右依次是第 $1$ 格、第 $2$ 格，等等；向左依次是第 $-1$ 格，第 $-2$ 格，等等；天依将发绳对折起来，此时第 $-1$ 格将于第 $1$ 格重合，第 $-2$ 格将于第 $2$ 格重合……第 $-k$ 格将与第 $k$ 格重合（$k$ 为正整数）。**特别地**，我们认为第 $0$ 格保持原样，没有和其他格子重合，也没有和自己重合。\n\n&emsp;&emsp;由于发绳是半透光的，所以对折起来的发绳上的格子将可能出现三种颜色：**白色**、**浅紫色**和**深紫色**。两个白色的格子重合呈现白色，一个紫色和一个白色的格子重合呈现浅紫色，两个紫色的格子重合呈现深紫色。**特别地**，若第 $0$ 格原来为白色，则折叠后也为白色，否则第 $0$ 格原来为紫色，则折叠后为浅紫色。\n\n&emsp;&emsp;如果把白色记作 $0$，浅紫色记作 $1$，深紫色记作 $2$，以折叠后的第 $0$ 格作为最低位，依次将每个格子颜色对应的数字记录下来，我们将得到一个长长的三进制数整数，记为 $x$。现在，天依告诉你了 $x$ 的值，你能算出**对折之前的发绳**有多少种不同的样式吗？称两条发绳颜色不同，当且仅当存在一个整数 $k$，使得两条发绳的第 $k$ 格上的颜色不相同。\n\n&emsp;&emsp;发绳款式丰富多样，你需要对 $T$ 个 $x$ 分别求出答案。\n\n### 简要题意\n\n&emsp;&emsp;对于一个包含整数的集合 $S$，定义其权值为 $\\sum_{a\\in S}3^{|a|}$（即，枚举 $S$ 的元素 $a$，计算 $3^{|a|}$ 并求和）。给出非负整数 $x$，计算有多少个集合的权值为 $x$。注意集合不能包含重复元素。", "inputFormat": "第一行一个整数 $T$，表示你需要分别处理的数据组数。\n\n接下来 $T$ 行，每行一个整数 $x$，表示对折后发绳颜色所对应的三进制数。注意 $x$ 是以十进制输入的。", "outputFormat": "输出 $T$ 行，第 $i$ 行一个整数，表示给出的第 $i$ 个 $x$ 对应的方案数。", "hint": "#### 样例 #1 解释\n\n$x=12$ 时，有四种可能的发绳样式，它们的紫色格子位置分别是 $\\{-1,-2\\}$，$\\{-1,2\\}$，$\\{1,-2\\}$，$\\{1,2\\}$。\n\n$x=2$ 时，不存在任何满足条件的发绳样式，此时输出 $0$ 即可。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5, 0 \\leq x \\leq 10^{18}$。\n\n对于不同的测试点，作如下约定：\n\n| 测试点编号 |       $x$        | 特殊性质 |\n| :--------: | :--------------: | :--------: |\n|    $1\\sim3$     |      $\\leq 3^{10}$      |   无   |\n|    $4$     |  $\\leq 10^{18}$ |   $x \\bmod 3 = 1$    |\n|    $5$     |    $\\leq 10^{18}$     |  $x \\bmod 3=2$   |\n|    $6$     |   $\\leq 10^{18}$   |  $x \\bmod 3 =0$   |\n|    $7\\sim10$     |   $\\leq 10^{18}$   |  无  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R4」立夏", "background": "&emsp;&emsp;「芳菲歇去何须恨，夏木阴阴正可人」\n\n---\n\n&emsp;&emsp;和老 V 说好的赛后团建终于举行啦！\n\n&emsp;&emsp;难得和学弟学妹们在一起，天依和阿绫自然不会错过这次良好的机会，更不会放过早就想 rua 的狐狸座的耳朵！\n\n&emsp;&emsp;“那个……天依……”\n\n&emsp;&emsp;天依和腿上的狐狸座同时歪过头看向某个叫阿绫的醋坛子。\n\n&emsp;&emsp;“绫姐绫姐，疼！”\n\n&emsp;&emsp;于是在天依给小狐狸扎头发的时候，小狐狸的耳朵已经被揉蔫啦！\n\n---\n\n&emsp;&emsp;**立夏**&emsp;「三步并两步　就发现　如期而至的透明夏日章节」", "description": "&emsp;&emsp;**本题提供简要题意。**\n\n&emsp;&emsp;天依给狐狸座准备的纱质发绳由**白色**和**紫色**的小格子组成，相同大小的小格子连成了一条足够长的带子。我们不妨把天依的手正捏着的位置标为第 $0$ 格，向右依次是第 $1$ 格、第 $2$ 格，等等；向左依次是第 $-1$ 格，第 $-2$ 格，等等；天依将发绳对折起来，此时第 $-1$ 格将于第 $1$ 格重合，第 $-2$ 格将于第 $2$ 格重合……第 $-k$ 格将与第 $k$ 格重合（$k$ 为正整数）。**特别地**，我们认为第 $0$ 格保持原样，没有和其他格子重合，也没有和自己重合。\n\n&emsp;&emsp;由于发绳是半透光的，所以对折起来的发绳上的格子将可能出现三种颜色：**白色**、**浅紫色**和**深紫色**。两个白色的格子重合呈现白色，一个紫色和一个白色的格子重合呈现浅紫色，两个紫色的格子重合呈现深紫色。**特别地**，若第 $0$ 格原来为白色，则折叠后也为白色，否则第 $0$ 格原来为紫色，则折叠后为浅紫色。\n\n&emsp;&emsp;如果把白色记作 $0$，浅紫色记作 $1$，深紫色记作 $2$，以折叠后的第 $0$ 格作为最低位，依次将每个格子颜色对应的数字记录下来，我们将得到一个长长的三进制数整数，记为 $x$。现在，天依告诉你了 $x$ 的值，你能算出**对折之前的发绳**有多少种不同的样式吗？称两条发绳颜色不同，当且仅当存在一个整数 $k$，使得两条发绳的第 $k$ 格上的颜色不相同。\n\n&emsp;&emsp;发绳款式丰富多样，你需要对 $T$ 个 $x$ 分别求出答案。\n\n### 简要题意\n\n&emsp;&emsp;对于一个包含整数的集合 $S$，定义其权值为 $\\sum_{a\\in S}3^{|a|}$（即，枚举 $S$ 的元素 $a$，计算 $3^{|a|}$ 并求和）。给出非负整数 $x$，计算有多少个集合的权值为 $x$。注意集合不能包含重复元素。", "inputFormat": "第一行一个整数 $T$，表示你需要分别处理的数据组数。\n\n接下来 $T$ 行，每行一个整数 $x$，表示对折后发绳颜色所对应的三进制数。注意 $x$ 是以十进制输入的。", "outputFormat": "输出 $T$ 行，第 $i$ 行一个整数，表示给出的第 $i$ 个 $x$ 对应的方案数。", "hint": "#### 样例 #1 解释\n\n$x=12$ 时，有四种可能的发绳样式，它们的紫色格子位置分别是 $\\{-1,-2\\}$，$\\{-1,2\\}$，$\\{1,-2\\}$，$\\{1,2\\}$。\n\n$x=2$ 时，不存在任何满足条件的发绳样式，此时输出 $0$ 即可。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5, 0 \\leq x \\leq 10^{18}$。\n\n对于不同的测试点，作如下约定：\n\n| 测试点编号 |       $x$        | 特殊性质 |\n| :--------: | :--------------: | :--------: |\n|    $1\\sim3$     |      $\\leq 3^{10}$      |   无   |\n|    $4$     |  $\\leq 10^{18}$ |   $x \\bmod 3 = 1$    |\n|    $5$     |    $\\leq 10^{18}$     |  $x \\bmod 3=2$   |\n|    $6$     |   $\\leq 10^{18}$   |  $x \\bmod 3 =0$   |\n|    $7\\sim10$     |   $\\leq 10^{18}$   |  无  |", "locale": "zh-CN"}}}
{"pid": "P9155", "type": "P", "difficulty": 3, "samples": [["2\n2\n1\n2 0\n5\n1\n2 1\n2 2\n1\n2 6", "0\n1100"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「GLR-R4」小满", "background": "&emsp;&emsp;「树阴满地日当午，梦觉流莺时一声」\n\n---\n\n&emsp;&emsp;乐队训练之余，锻炼时间可是必不可少的，可是就算几个女孩子撒开蹄子跑，也不可能在高三打球狂人的统治下抢到一块羽毛球场的。经过了数周从训练室冲到球场，再从球场灰心地踱回训练室的循环后，阿绫绝望地向大家宣布了一个坏消息：“只能打野球了。”\n\n&emsp;&emsp;“还有几个月了哟……”\n\n&emsp;&emsp;“老 V 你又来了！”才回训练室的阿绫扶着门抱怨着。\n\n&emsp;&emsp;“所以你们打球得抓紧时间啦！”\n\n---\n\n&emsp;&emsp;**小满**&emsp;「生活一圈圈日子一年年　总是这样重复一遍又一遍」", "description": "&emsp;&emsp;野场羽毛球，在生态环境良好的校园里，可是经常遭遇不测的——\n\n&emsp;&emsp;“天依！怎么球又被挂树上啦！”\n\n&emsp;&emsp;如阿绫所见，她们仅剩的一颗可怜的羽毛球被天依用吃包子的劲儿抡到树上去了。为了避免找别人的排球或者篮球来砸树的尴尬，阿绫这次特意准备了一根折叠杆。\n\n&emsp;&emsp;折叠杆初始时处于完全收缩状态，我们认为它的长度 $\\ell=0$。完全展开折叠杆需要 $n$ 步，每步为以下两种情况之一：\n\n1.  将杆末端的折叠处展开。此操作没有额外参数，操作完成后 $\\ell\\gets 2\\ell$，即杆的长度变为原来的两倍。\n\n2.  将杆末端的伸缩处展开。此操作将给出额外可变参数 $d$，操作完成后 $\\ell\\gets \\ell+d$，即杆的长度增加 $d$。\n\n&emsp;&emsp;树上球的高度、杆最终的高度和天依吃包子的劲儿可能都是庞大的，所以阿绫需要你来计算一下杆最终的长度 $\\ell$。你需要回答阿绫 $n$ 次操作依次完成后，**$\\ell$ 的二进制表示**。", "inputFormat": "第一行一个整数 $T$ ，表示你需要分别处理的数据组数。\n\n对于每组数据：\n\n- 第一行一个整数 $n$，表示将进行的操作次数；\n\n- 接下来 $n$ 行，每行格式形如 `1` 或 `2 d`，分别描述两类操作。其中整数 $d$ 用十进制表示。", "outputFormat": "对于每组测试数据，输出最终的 $\\ell$ 的二进制表示。**你的答案不应包含多余的前导零**。", "hint": "#### 样例 #1 解释\n\n对于第一组测试数据：$\\ell$ 的变化过程为：$0 \\rightarrow 0 \\rightarrow 0$，而 $(0)_{10}=(0)_2$。\n\n对于第二组测试数据：$\\ell$ 的变化过程为：$0 \\rightarrow 0 \\rightarrow 1 \\rightarrow 3 \\rightarrow 6 \\rightarrow 12$，而 $(12)_{10}=(1100)_2$。  \n\n### 数据规模与约定  \n\n对于 $100\\%$ 的数据，$1\\leq T \\leq 5$，$1\\leq  n \\leq 10^5$，$0\\leq d < 2^{16}$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |     $n$     | 特殊性质 | 子任务分值 |\n| :--------: | :---------: | :------: | :--------: |\n|    $1$     |  $\\leq 20$  |    无    |    $10$    |\n|    $2$     | $\\leq 10^5$ |    有    |    $20$    |\n|    $3$     | $\\leq 10^3$ |    无    |    $40$    |\n|    $4$     | $\\leq 10^5$ |    无    |    $30$    |\n  \n- 特殊性质：仅存在第二种操作。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R4」小满", "background": "&emsp;&emsp;「树阴满地日当午，梦觉流莺时一声」\n\n---\n\n&emsp;&emsp;乐队训练之余，锻炼时间可是必不可少的，可是就算几个女孩子撒开蹄子跑，也不可能在高三打球狂人的统治下抢到一块羽毛球场的。经过了数周从训练室冲到球场，再从球场灰心地踱回训练室的循环后，阿绫绝望地向大家宣布了一个坏消息：“只能打野球了。”\n\n&emsp;&emsp;“还有几个月了哟……”\n\n&emsp;&emsp;“老 V 你又来了！”才回训练室的阿绫扶着门抱怨着。\n\n&emsp;&emsp;“所以你们打球得抓紧时间啦！”\n\n---\n\n&emsp;&emsp;**小满**&emsp;「生活一圈圈日子一年年　总是这样重复一遍又一遍」", "description": "&emsp;&emsp;野场羽毛球，在生态环境良好的校园里，可是经常遭遇不测的——\n\n&emsp;&emsp;“天依！怎么球又被挂树上啦！”\n\n&emsp;&emsp;如阿绫所见，她们仅剩的一颗可怜的羽毛球被天依用吃包子的劲儿抡到树上去了。为了避免找别人的排球或者篮球来砸树的尴尬，阿绫这次特意准备了一根折叠杆。\n\n&emsp;&emsp;折叠杆初始时处于完全收缩状态，我们认为它的长度 $\\ell=0$。完全展开折叠杆需要 $n$ 步，每步为以下两种情况之一：\n\n1.  将杆末端的折叠处展开。此操作没有额外参数，操作完成后 $\\ell\\gets 2\\ell$，即杆的长度变为原来的两倍。\n\n2.  将杆末端的伸缩处展开。此操作将给出额外可变参数 $d$，操作完成后 $\\ell\\gets \\ell+d$，即杆的长度增加 $d$。\n\n&emsp;&emsp;树上球的高度、杆最终的高度和天依吃包子的劲儿可能都是庞大的，所以阿绫需要你来计算一下杆最终的长度 $\\ell$。你需要回答阿绫 $n$ 次操作依次完成后，**$\\ell$ 的二进制表示**。", "inputFormat": "第一行一个整数 $T$ ，表示你需要分别处理的数据组数。\n\n对于每组数据：\n\n- 第一行一个整数 $n$，表示将进行的操作次数；\n\n- 接下来 $n$ 行，每行格式形如 `1` 或 `2 d`，分别描述两类操作。其中整数 $d$ 用十进制表示。", "outputFormat": "对于每组测试数据，输出最终的 $\\ell$ 的二进制表示。**你的答案不应包含多余的前导零**。", "hint": "#### 样例 #1 解释\n\n对于第一组测试数据：$\\ell$ 的变化过程为：$0 \\rightarrow 0 \\rightarrow 0$，而 $(0)_{10}=(0)_2$。\n\n对于第二组测试数据：$\\ell$ 的变化过程为：$0 \\rightarrow 0 \\rightarrow 1 \\rightarrow 3 \\rightarrow 6 \\rightarrow 12$，而 $(12)_{10}=(1100)_2$。  \n\n### 数据规模与约定  \n\n对于 $100\\%$ 的数据，$1\\leq T \\leq 5$，$1\\leq  n \\leq 10^5$，$0\\leq d < 2^{16}$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |     $n$     | 特殊性质 | 子任务分值 |\n| :--------: | :---------: | :------: | :--------: |\n|    $1$     |  $\\leq 20$  |    无    |    $10$    |\n|    $2$     | $\\leq 10^5$ |    有    |    $20$    |\n|    $3$     | $\\leq 10^3$ |    无    |    $40$    |\n|    $4$     | $\\leq 10^5$ |    无    |    $30$    |\n  \n- 特殊性质：仅存在第二种操作。\n", "locale": "zh-CN"}}}
{"pid": "P9156", "type": "P", "difficulty": 5, "samples": [["4\n1 0\n2 1\n2 2\n3 3", "1.000000\n1.333333\n1.000000\n1.500000"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "Special Judge", "O2优化", "概率论", "期望", "洛谷月赛"], "title": "「GLR-R4」芒种", "background": "&emsp;&emsp;「晴云轻漾，熏风无浪，开樽避暑争相向」\n\n---\n\n&emsp;&emsp;“高考周啊……”\n\n&emsp;&emsp;今天倒是没有抢场的压力，不过甚至没人敢出训练室，毕竟对面教学楼就是正在进行高考的考场。\n\n&emsp;&emsp;“我们明年说不定就在对面了。”虽然下午的训练结束，但今天食堂安排特殊，天依和阿绫还得在休息室里腻歪好一会儿。\n\n&emsp;&emsp;“阿绫，饿……”像是听不见食物以外的话题，天依躺在沙发上，手指绕着头发——绕着阿绫的头发，抱怨着。\n\n&emsp;&emsp;“来玩个游戏吧。”\n\n\n---\n\n&emsp;&emsp;**芒种**&emsp;「冰苏打烦躁气泡都融化\n　慵懒的风快趁虚而入吧」", "description": "&emsp;&emsp;*双重神经衰弱* 是一个极其考验记忆力的卡牌游戏，其规则如下。\n\n&emsp;&emsp;有 $n$ 种不同类型的卡牌，每种两张，初始时这 $2n$ 张牌全部倒扣在桌面上。两位玩家轮流操作，每次操作选择两张**不同的**牌**同时**翻起，这两张牌将对双方展示，此后：\n\n- 若两张牌类型相同，则操作者得 $1$ 分，将这两张牌拿走。下一次操作由**当前操作者**继续进行。\n\n- 否则，操作者将这两张牌扣回。下一次操作轮到**对方**进行。\n\n&emsp;&emsp;当所有牌全部被拿走时，游戏结束。\n\n&emsp;&emsp;两位玩家的目标都是最大化自己的最终得分。此外，在**双方同意**的情况下，两人可以选择和局。设和局时还剩下 $2n'$ 张牌，则双方各获得 $n'/2$ 分，游戏结束。为避免游戏无法结束的情况，我们认为：当选择和局同时是双方的最优选择**之一**时，双方会立即和局。\n\n---\n\n&emsp;&emsp;现在，阿绫和天依想来玩玩这个游戏。因为太饿，负责摆牌的天依不小心把 $2n$ 张牌中的 $m$ 张牌牌面朝上地摆放了，**这 $m$ 张牌的的类型恰好两两不同**，双方悄悄记住了它们的类型和位置，并将它们扣回，然后开始游戏。我们假定天依和阿绫过目不忘且聪明绝顶，能够记住所有被展示过的牌（包括最初 $m$ 张牌）的类型和位置，也都会采取最优策略最大化自己的期望得分。作为先手方的阿绫想要知道自己的期望得分，你可以帮帮她吗？\n\n&emsp;&emsp;由于她们真的要在休息室腻歪好一会儿，所以你需要对 $T$ 组的 $(n,m)$ 分别求出答案。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行两个整数 $n,m$，分别表示该轮游戏中卡牌的类型数和双方预先翻起并扣回的卡牌张数。", "outputFormat": "输出 $T$ 行，每行一个实数，表示该组数据的答案。当且仅当你的输出与标准答案的相对误差或绝对误差不超过 $10^{-6}$ 时，被视为正确。", "hint": "#### 样例 #1 解释\n\n对于第一组数据，先手翻起的一对牌类型必然相同，将其拿走，游戏结束。先手期望得分为 $1$。\n\n对于第三组数据，可以证明，双方会在游戏开始时同意和局。先后手期望得分都是 $1$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n\\le5\\times10^3$，$0\\le m\\le n$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |      $n,m$       |       $T$        | 特殊性质 | 子任务分值 |\n| :--------: | :--------------: | :--------------: | :------: | :--------: |\n|    $1$     |      $\\le2$      |      $\\le5$      |    无    |    $10$    |\n|    $2$     |      $\\le8$      |     $\\le44$      |    无    |    $20$    |\n|    $3$     | $\\le5\\times10^3$ | $\\le5\\times10^3$ |    有    |    $10$    |\n|    $4$     | $\\le5\\times10^3$ |       $=1$       |    无    |    $20$    |\n|    $5$     | $\\le5\\times10^3$ | $\\le5\\times10^3$ |    无    |    $40$    |\n\n-   特殊性质：$n=m$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R4」芒种", "background": "&emsp;&emsp;「晴云轻漾，熏风无浪，开樽避暑争相向」\n\n---\n\n&emsp;&emsp;“高考周啊……”\n\n&emsp;&emsp;今天倒是没有抢场的压力，不过甚至没人敢出训练室，毕竟对面教学楼就是正在进行高考的考场。\n\n&emsp;&emsp;“我们明年说不定就在对面了。”虽然下午的训练结束，但今天食堂安排特殊，天依和阿绫还得在休息室里腻歪好一会儿。\n\n&emsp;&emsp;“阿绫，饿……”像是听不见食物以外的话题，天依躺在沙发上，手指绕着头发——绕着阿绫的头发，抱怨着。\n\n&emsp;&emsp;“来玩个游戏吧。”\n\n\n---\n\n&emsp;&emsp;**芒种**&emsp;「冰苏打烦躁气泡都融化\n　慵懒的风快趁虚而入吧」", "description": "&emsp;&emsp;*双重神经衰弱* 是一个极其考验记忆力的卡牌游戏，其规则如下。\n\n&emsp;&emsp;有 $n$ 种不同类型的卡牌，每种两张，初始时这 $2n$ 张牌全部倒扣在桌面上。两位玩家轮流操作，每次操作选择两张**不同的**牌**同时**翻起，这两张牌将对双方展示，此后：\n\n- 若两张牌类型相同，则操作者得 $1$ 分，将这两张牌拿走。下一次操作由**当前操作者**继续进行。\n\n- 否则，操作者将这两张牌扣回。下一次操作轮到**对方**进行。\n\n&emsp;&emsp;当所有牌全部被拿走时，游戏结束。\n\n&emsp;&emsp;两位玩家的目标都是最大化自己的最终得分。此外，在**双方同意**的情况下，两人可以选择和局。设和局时还剩下 $2n'$ 张牌，则双方各获得 $n'/2$ 分，游戏结束。为避免游戏无法结束的情况，我们认为：当选择和局同时是双方的最优选择**之一**时，双方会立即和局。\n\n---\n\n&emsp;&emsp;现在，阿绫和天依想来玩玩这个游戏。因为太饿，负责摆牌的天依不小心把 $2n$ 张牌中的 $m$ 张牌牌面朝上地摆放了，**这 $m$ 张牌的的类型恰好两两不同**，双方悄悄记住了它们的类型和位置，并将它们扣回，然后开始游戏。我们假定天依和阿绫过目不忘且聪明绝顶，能够记住所有被展示过的牌（包括最初 $m$ 张牌）的类型和位置，也都会采取最优策略最大化自己的期望得分。作为先手方的阿绫想要知道自己的期望得分，你可以帮帮她吗？\n\n&emsp;&emsp;由于她们真的要在休息室腻歪好一会儿，所以你需要对 $T$ 组的 $(n,m)$ 分别求出答案。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行两个整数 $n,m$，分别表示该轮游戏中卡牌的类型数和双方预先翻起并扣回的卡牌张数。", "outputFormat": "输出 $T$ 行，每行一个实数，表示该组数据的答案。当且仅当你的输出与标准答案的相对误差或绝对误差不超过 $10^{-6}$ 时，被视为正确。", "hint": "#### 样例 #1 解释\n\n对于第一组数据，先手翻起的一对牌类型必然相同，将其拿走，游戏结束。先手期望得分为 $1$。\n\n对于第三组数据，可以证明，双方会在游戏开始时同意和局。先后手期望得分都是 $1$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n\\le5\\times10^3$，$0\\le m\\le n$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |      $n,m$       |       $T$        | 特殊性质 | 子任务分值 |\n| :--------: | :--------------: | :--------------: | :------: | :--------: |\n|    $1$     |      $\\le2$      |      $\\le5$      |    无    |    $10$    |\n|    $2$     |      $\\le8$      |     $\\le44$      |    无    |    $20$    |\n|    $3$     | $\\le5\\times10^3$ | $\\le5\\times10^3$ |    有    |    $10$    |\n|    $4$     | $\\le5\\times10^3$ |       $=1$       |    无    |    $20$    |\n|    $5$     | $\\le5\\times10^3$ | $\\le5\\times10^3$ |    无    |    $40$    |\n\n-   特殊性质：$n=m$。\n", "locale": "zh-CN"}}}
{"pid": "P9157", "type": "P", "difficulty": 7, "samples": [["2 2 64", "9"], ["5 5 64 ", "213"], ["1234 1234 12", "673319736"], ["30000 10000000 2", "836094021"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "洛谷原创", "O2优化", "素数判断,质数,筛法", "莫比乌斯反演", "容斥原理", "洛谷月赛"], "title": "「GLR-R4」夏至", "background": "&emsp;&emsp;「柳庭风静人眠昼，昼眠人静风庭柳」\n\n---\n\n&emsp;&emsp;老 V 说为大家准备了特别的粽子，所以天依来了；\n\n&emsp;&emsp;天依来了，所以阿绫来了；\n\n&emsp;&emsp;阿绫来了，龙牙也不敢不来；\n\n&emsp;&emsp;到了快一半了，于是剩下的大家都来了……\n\n&emsp;&emsp;所以，为什么要在模拟演出训练结束后来补文化课啊！\n\n&emsp;&emsp;“天依，这数学老师真的在讲数学？”\n\n&emsp;&emsp;“摩柯，我和阿绫就靠你了！”天依戳戳前排摩柯的肩膀。\n\n&emsp;&emsp;“要推出来了，要推出来了……”，摩柯大概是第一次把草稿纸写得快满，“我知道我很急，但我先别急……这像是在做噩梦一样。”\n\n---\n\n&emsp;&emsp;**夏至**&emsp;「允许我这一次片刻逃离　偶尔也试着用背影　去面对未来不确定」", "description": "&emsp;&emsp;为了鉴定摩柯是不是在做噩梦，请你来解决黑板上的一道简单的数学问题吧！\n\n&emsp;&emsp;令积性函数 $f(n)$ 满足 $f(p^c)=p^{\\gcd(c,k)}$，其中 $k$ 为给定常数，$p$ 为素数，$c$ 为正整数。现在，给定 $n,m,k$，请求出\n$$\n\\left(\\sum_{i=1}^n\\sum_{j=1}^mf(i\\cdot j)\\right)\\bmod(10^9+7).\n$$\n\n&emsp;&emsp;对于积性函数的定义，请参考「题意解释」。\n", "inputFormat": "输入只有一行包含三个整数，分别表示 $n,m,k$。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模后的值。", "hint": "#### 题意解释\n\n&emsp;&emsp;对于数论函数 $f(n)$ 和任意两个互素的正整数 $x,y$，若恒有 $f(xy)=f(x)f(y)$，则称 $f(n)$ 为积性函数。\n\n&emsp;&emsp;当已知积性函数 $f(n)$ 在所有素数幂处的取值时，我们可以计算任意正整数的函数值。具体地，对于 $n>1$，设 $n$ 的**唯一分解**形式为 $n=p_1^{\\alpha_1}p_2^{\\alpha_2}\\cdots p_k^{\\alpha_k}$，则有 $f(n)=f(p_1^{\\alpha_1})f(p_2^{\\alpha_2})\\cdots f(p_k^{\\alpha_k})$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，$1\\le m\\le 10^{10}$，$1\\le k\\le 10^{9}$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |        $n$         |      $m$      |     $k$      | 子任务分值 |\n| :--------: | :----------------: | :-----------: | :----------: | :--------: |\n|    $1$     |     $\\le 10^3$     |  $\\le 10^3$   | $\\le 10^{3}$ |    $5$     |\n|    $2$     |        $=1$        | $\\le 10^{10}$ |  $\\le 10^9$  |    $15$    |\n|    $3$     |     $\\le 10^5$     |  $\\le 10^5$   |  $\\le 10^9$  |    $15$    |\n|    $4$     |     $\\le 500$      |  $\\le 10^9$   |  $\\le 10^9$  |    $10$    |\n|    $5$     |     $\\le10^5$      | $\\le 10^{10}$ |     $=1$     |    $15$    |\n|    $6$     | $\\le 5\\times 10^3$ |  $\\le 10^9$   |  $\\le 10^9$  |    $15$    |\n|    $7$     | $\\le 5\\times 10^4$ |  $\\le 10^8$   |  $\\le 10^9$  |    $15$    |\n|    $8$     |     $\\le 10^5$     | $\\le 10^{10}$ |  $\\le 10^9$  |    $10$    |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R4」夏至", "background": "&emsp;&emsp;「柳庭风静人眠昼，昼眠人静风庭柳」\n\n---\n\n&emsp;&emsp;老 V 说为大家准备了特别的粽子，所以天依来了；\n\n&emsp;&emsp;天依来了，所以阿绫来了；\n\n&emsp;&emsp;阿绫来了，龙牙也不敢不来；\n\n&emsp;&emsp;到了快一半了，于是剩下的大家都来了……\n\n&emsp;&emsp;所以，为什么要在模拟演出训练结束后来补文化课啊！\n\n&emsp;&emsp;“天依，这数学老师真的在讲数学？”\n\n&emsp;&emsp;“摩柯，我和阿绫就靠你了！”天依戳戳前排摩柯的肩膀。\n\n&emsp;&emsp;“要推出来了，要推出来了……”，摩柯大概是第一次把草稿纸写得快满，“我知道我很急，但我先别急……这像是在做噩梦一样。”\n\n---\n\n&emsp;&emsp;**夏至**&emsp;「允许我这一次片刻逃离　偶尔也试着用背影　去面对未来不确定」", "description": "&emsp;&emsp;为了鉴定摩柯是不是在做噩梦，请你来解决黑板上的一道简单的数学问题吧！\n\n&emsp;&emsp;令积性函数 $f(n)$ 满足 $f(p^c)=p^{\\gcd(c,k)}$，其中 $k$ 为给定常数，$p$ 为素数，$c$ 为正整数。现在，给定 $n,m,k$，请求出\n$$\n\\left(\\sum_{i=1}^n\\sum_{j=1}^mf(i\\cdot j)\\right)\\bmod(10^9+7).\n$$\n\n&emsp;&emsp;对于积性函数的定义，请参考「题意解释」。\n", "inputFormat": "输入只有一行包含三个整数，分别表示 $n,m,k$。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模后的值。", "hint": "#### 题意解释\n\n&emsp;&emsp;对于数论函数 $f(n)$ 和任意两个互素的正整数 $x,y$，若恒有 $f(xy)=f(x)f(y)$，则称 $f(n)$ 为积性函数。\n\n&emsp;&emsp;当已知积性函数 $f(n)$ 在所有素数幂处的取值时，我们可以计算任意正整数的函数值。具体地，对于 $n>1$，设 $n$ 的**唯一分解**形式为 $n=p_1^{\\alpha_1}p_2^{\\alpha_2}\\cdots p_k^{\\alpha_k}$，则有 $f(n)=f(p_1^{\\alpha_1})f(p_2^{\\alpha_2})\\cdots f(p_k^{\\alpha_k})$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，$1\\le m\\le 10^{10}$，$1\\le k\\le 10^{9}$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |        $n$         |      $m$      |     $k$      | 子任务分值 |\n| :--------: | :----------------: | :-----------: | :----------: | :--------: |\n|    $1$     |     $\\le 10^3$     |  $\\le 10^3$   | $\\le 10^{3}$ |    $5$     |\n|    $2$     |        $=1$        | $\\le 10^{10}$ |  $\\le 10^9$  |    $15$    |\n|    $3$     |     $\\le 10^5$     |  $\\le 10^5$   |  $\\le 10^9$  |    $15$    |\n|    $4$     |     $\\le 500$      |  $\\le 10^9$   |  $\\le 10^9$  |    $10$    |\n|    $5$     |     $\\le10^5$      | $\\le 10^{10}$ |     $=1$     |    $15$    |\n|    $6$     | $\\le 5\\times 10^3$ |  $\\le 10^9$   |  $\\le 10^9$  |    $15$    |\n|    $7$     | $\\le 5\\times 10^4$ |  $\\le 10^8$   |  $\\le 10^9$  |    $15$    |\n|    $8$     |     $\\le 10^5$     | $\\le 10^{10}$ |  $\\le 10^9$  |    $10$    |\n\n", "locale": "zh-CN"}}}
{"pid": "P9158", "type": "P", "difficulty": 7, "samples": [["5 10\n2 10 1 10 3\n1 2 3 2\n2 1 3\n1 3\n1 5\n2 3 5\n2 3 2\n1 5\n2 5 6\n1 3\n2 5 -1\n2 3 0", "10\n3\n3\n10"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "洛谷原创", "O2优化", "树链剖分", "动态树 LCT", "洛谷月赛"], "title": "「GLR-R4」小暑", "background": "&emsp;&emsp;「长养薰风拂晓吹，浅开荷芰落蔷薇」\n\n---\n\n&emsp;&emsp;在校内的最后一次试演出！\n\n&emsp;&emsp;从[第一次登台](https://www.luogu.com.cn/problem/P7245)至今，从以往约定的放学后空无一人的操场到如今日夜挥汗的训练室，他们与彼此的约定是否改变呢？\n\n&emsp;&emsp;“肩上的吉他和小小梦想，要为它们长出坚强的翅膀！”\n\n---\n\n&emsp;&emsp;**小暑**&emsp;「Can you hear me now?　我会从此成为你的骄傲　现在就要出发　一切刚刚好」", "description": "&emsp;&emsp;[还记得吗？](https://www.luogu.com.cn/problem/P8476)你可是天依他们的专业分析师。除了演出者的表现，观众们的情感波动也是重要的分析对象。经过不懈努力，你提出了以下这些指标（出题人已经被你消灭啦，但还是请你耐心读题）：\n\n&emsp;&emsp;「情绪」&emsp;我们用强烈度 $v\\in\\mathbb N^\\star$ 来表达一个情绪。\n\n&emsp;&emsp;「心境」&emsp;一系列情绪共同组成一个心境，我们将心境描述为一个二元组 $M=(s,f)$，其中 $s,f\\in\\mathbb N^\\star$，其中 $s$ 为所含情绪的强烈度之和，$f$ 为某个特征情绪的强烈度。\n\n&emsp;&emsp;「共鸣」&emsp;两个心境可以通过共鸣而融合得到新的心境。我们将 $M_2=(s_2,f_2)$ 融合向 $M_1=(s_1,f_1)$ 的共鸣记作 $M_1+M_2$，共鸣的结果是一个新的心境 $M=M_1+M_2=(s_1+s_2,f_1)$。注意此时**不一定满足** $M_1+M_2=M_2+M_1$。\n\n&emsp;&emsp;「心路」&emsp;在一棵有根树上，沿**树形关系**共鸣心境的过程称为心路。对于以 $r$ 为根的子树，其心路历程可以描述如下：\n\n1.  初始时，$A_r\\gets M_r$，其中 $A_x$ 表示以 $x$ 为根的子树心路完成后的最终心境，$M_x$ 为 $x$ 结点上的初始心境。\n\n2.  **按编号升序地**枚举 $r$ 的孩子结点 $x$：\n\n    -   递归完成 $x$ 子树的心路，得到 $A_x$。此时，设 $A_r=(s_r,f_r)$，$A_x=(s_x,f_x)$。\n\n    -   若 $s_r\\ge s_x$，则令 $A_r\\gets A_r+A_x$，否则令 $A_r\\gets A_x+A_r$。\n\n&emsp;&emsp;最终的 $A_r$ 即为以 $r$ 为根的子树心路完成后的最终心境。\n\n---\n\n&emsp;&emsp;为研究特定观众的心理变化情况，你需要时刻监控其上述指标。现给定一棵含有 $n$ 个结点，以 $1$ 为根结点的有根树，结点 $x$ 上初始有心境 $M_x=(a_x,a_x)$。此后进行 $q$ 次操作，每次操作有以下两类：\n\n1.  给出结点 $x$，询问 $A_x=(s_x,f_x)$ 中 $f_x$ 的值，其中 $A_x$ 应当在每次询问时，依据当前的信息重新计算。\n\n2.  给出结点 $x$ 和变化量 $d$，令 $a_x\\gets a_x+d$，并修改对应的 $M_x$。注意 $d$ **可能为负数**，但保证操作前后都有 $a_x>0$。\n\n&emsp;&emsp;请你对于每个询问操作，计算出相应的答案。", "inputFormat": "第一行两个整数 $n,q$，分别表示树的大小和操作次数。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，其中 $a_i$ 表示结点 $i$ 的初始权值。\n\n第三行 $n-1$ 个整数 $p_2,p_3,\\cdots,p_n$，其中 $p_i$ 表示以结点 $1$ 为根时，结点 $i$ 的父亲。\n\n接下来 $q$ 行，每行格式形如 `1 x` 或 `2 x d`，分别对应题目描述中的两种操作。", "outputFormat": "对于每个类型为 $1$ 的操作，输出一行一个整数，表示所求答案。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le2\\times10^5$，$1\\le p_i<i$；操作给出的 $x\\in[1,n]$，$d\\in[-10^{18},10^{18}]$；在任意时刻 $a_x\\ge 1$ 且 $\\sum_{x=1}^na_x\\le10^{18}$。\n\n对于不同的子任务，作如下约定：\n\n|   子任务编号    |   $n$    |  $q$  | 特殊性质 | 子任务分值 |\n| :---------: | :--------: | :----:  | :----: | :-: |\n|  $1$  |  $\\leq 10 ^ 3$  | $\\leq 10 ^ 3$  | 无 | $10$|\n|  $2$  | $\\leq 2 \\times 10 ^ 5$ | $\\leq 2 \\times 10 ^ 5$ | $\\textbf A$| $20$|\n|  $3$  | $\\le 2 \\times 10 ^ 5$ | $\\le 2 \\times 10 ^ 5$| $\\textbf B$ | $20$|\n|  $4$  | $\\le 2 \\times 10 ^ 5$ | $\\leq 2 \\times 10 ^ 5$ | 无 | $50$|\n\n- 特殊性质 $\\textbf A$：对于 $i\\in[2,n]$，$p_i=i-1$。\n\n- 特殊性质 $\\textbf B$：保证当 $1$ 为根时，原树是一棵二叉树。且对于 $i\\in[2,n]$，存在一条从 $1$ 到 $i$，经过边数不超过 $20$ 的树上路径。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R4」小暑", "background": "&emsp;&emsp;「长养薰风拂晓吹，浅开荷芰落蔷薇」\n\n---\n\n&emsp;&emsp;在校内的最后一次试演出！\n\n&emsp;&emsp;从[第一次登台](https://www.luogu.com.cn/problem/P7245)至今，从以往约定的放学后空无一人的操场到如今日夜挥汗的训练室，他们与彼此的约定是否改变呢？\n\n&emsp;&emsp;“肩上的吉他和小小梦想，要为它们长出坚强的翅膀！”\n\n---\n\n&emsp;&emsp;**小暑**&emsp;「Can you hear me now?　我会从此成为你的骄傲　现在就要出发　一切刚刚好」", "description": "&emsp;&emsp;[还记得吗？](https://www.luogu.com.cn/problem/P8476)你可是天依他们的专业分析师。除了演出者的表现，观众们的情感波动也是重要的分析对象。经过不懈努力，你提出了以下这些指标（出题人已经被你消灭啦，但还是请你耐心读题）：\n\n&emsp;&emsp;「情绪」&emsp;我们用强烈度 $v\\in\\mathbb N^\\star$ 来表达一个情绪。\n\n&emsp;&emsp;「心境」&emsp;一系列情绪共同组成一个心境，我们将心境描述为一个二元组 $M=(s,f)$，其中 $s,f\\in\\mathbb N^\\star$，其中 $s$ 为所含情绪的强烈度之和，$f$ 为某个特征情绪的强烈度。\n\n&emsp;&emsp;「共鸣」&emsp;两个心境可以通过共鸣而融合得到新的心境。我们将 $M_2=(s_2,f_2)$ 融合向 $M_1=(s_1,f_1)$ 的共鸣记作 $M_1+M_2$，共鸣的结果是一个新的心境 $M=M_1+M_2=(s_1+s_2,f_1)$。注意此时**不一定满足** $M_1+M_2=M_2+M_1$。\n\n&emsp;&emsp;「心路」&emsp;在一棵有根树上，沿**树形关系**共鸣心境的过程称为心路。对于以 $r$ 为根的子树，其心路历程可以描述如下：\n\n1.  初始时，$A_r\\gets M_r$，其中 $A_x$ 表示以 $x$ 为根的子树心路完成后的最终心境，$M_x$ 为 $x$ 结点上的初始心境。\n\n2.  **按编号升序地**枚举 $r$ 的孩子结点 $x$：\n\n    -   递归完成 $x$ 子树的心路，得到 $A_x$。此时，设 $A_r=(s_r,f_r)$，$A_x=(s_x,f_x)$。\n\n    -   若 $s_r\\ge s_x$，则令 $A_r\\gets A_r+A_x$，否则令 $A_r\\gets A_x+A_r$。\n\n&emsp;&emsp;最终的 $A_r$ 即为以 $r$ 为根的子树心路完成后的最终心境。\n\n---\n\n&emsp;&emsp;为研究特定观众的心理变化情况，你需要时刻监控其上述指标。现给定一棵含有 $n$ 个结点，以 $1$ 为根结点的有根树，结点 $x$ 上初始有心境 $M_x=(a_x,a_x)$。此后进行 $q$ 次操作，每次操作有以下两类：\n\n1.  给出结点 $x$，询问 $A_x=(s_x,f_x)$ 中 $f_x$ 的值，其中 $A_x$ 应当在每次询问时，依据当前的信息重新计算。\n\n2.  给出结点 $x$ 和变化量 $d$，令 $a_x\\gets a_x+d$，并修改对应的 $M_x$。注意 $d$ **可能为负数**，但保证操作前后都有 $a_x>0$。\n\n&emsp;&emsp;请你对于每个询问操作，计算出相应的答案。", "inputFormat": "第一行两个整数 $n,q$，分别表示树的大小和操作次数。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，其中 $a_i$ 表示结点 $i$ 的初始权值。\n\n第三行 $n-1$ 个整数 $p_2,p_3,\\cdots,p_n$，其中 $p_i$ 表示以结点 $1$ 为根时，结点 $i$ 的父亲。\n\n接下来 $q$ 行，每行格式形如 `1 x` 或 `2 x d`，分别对应题目描述中的两种操作。", "outputFormat": "对于每个类型为 $1$ 的操作，输出一行一个整数，表示所求答案。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le2\\times10^5$，$1\\le p_i<i$；操作给出的 $x\\in[1,n]$，$d\\in[-10^{18},10^{18}]$；在任意时刻 $a_x\\ge 1$ 且 $\\sum_{x=1}^na_x\\le10^{18}$。\n\n对于不同的子任务，作如下约定：\n\n|   子任务编号    |   $n$    |  $q$  | 特殊性质 | 子任务分值 |\n| :---------: | :--------: | :----:  | :----: | :-: |\n|  $1$  |  $\\leq 10 ^ 3$  | $\\leq 10 ^ 3$  | 无 | $10$|\n|  $2$  | $\\leq 2 \\times 10 ^ 5$ | $\\leq 2 \\times 10 ^ 5$ | $\\textbf A$| $20$|\n|  $3$  | $\\le 2 \\times 10 ^ 5$ | $\\le 2 \\times 10 ^ 5$| $\\textbf B$ | $20$|\n|  $4$  | $\\le 2 \\times 10 ^ 5$ | $\\leq 2 \\times 10 ^ 5$ | 无 | $50$|\n\n- 特殊性质 $\\textbf A$：对于 $i\\in[2,n]$，$p_i=i-1$。\n\n- 特殊性质 $\\textbf B$：保证当 $1$ 为根时，原树是一棵二叉树。且对于 $i\\in[2,n]$，存在一条从 $1$ 到 $i$，经过边数不超过 $20$ 的树上路径。", "locale": "zh-CN"}}}
{"pid": "P9159", "type": "P", "difficulty": 7, "samples": [["3", "384"], ["4", "40344945"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「GLR-R4」大暑", "background": "&emsp;&emsp;「时见疏星落画檐，几点流萤小」\n\n---\n\n&emsp;&emsp;全国音乐祭，在天依一行人抵达之时，芙城早已翻涌这狂欢的气氛，汇聚于此的某些紧张青年人们倒显得有些格格不入。\n\n&emsp;&emsp;“总之，这里一定是终点站吧。”\n\n&emsp;&emsp;排练又一次随着弦音结束。又开始，结束。\n\n&emsp;&emsp;“阿绫，我们出去走走吧。”\n\n---\n\n&emsp;&emsp;**大暑**&emsp;「为所有视线涂抹上　一片蔚蓝的颜色　融化了苦涩」", "description": "&emsp;&emsp;“阿绫，你看这宣传册上这幅画，好奇怪呀。”\n\n&emsp;&emsp;在宣传册中“融艺术与科技为一体”的巨幅画作的制作过程如下：\n\n&emsp;&emsp;首先，工作人员画出 $n!$ 个 $n\\times2$ 的点阵图，任意两个点阵图间互相远离，在后续的制作过程中**互相独立**。对于第 $i$ 个点阵图，令其左下角坐标为 $(0,0)$，该点阵的点集为 $X_i\\cup Y_i$，其中 $X_i=\\{(0,y)\\mid y\\in[0,n)\\cap\\mathbb N\\}$，$Y_i=\\{(1,y)\\mid y\\in[0,n)\\cap\\mathbb N\\}$。\n\n&emsp;&emsp;接着，设集合 $\\Sigma=\\{\\sigma_i\\}_{i=1}^{n!}$ 包含 $\\{0,1,\\dots,n-1\\}$ 的所有 $n$ 阶排列，对于第 $i$ 个点阵图，工作人员将用字典序第 $i$ 小的排列 $\\sigma_i$ 为 $X_i,Y_i$ 连线配对：对于点 $P(0,y)\\in X_i$，作一条线段将其与点 $Q(1,\\sigma_{i,y})\\in Y_i$ 相连。\n\n&emsp;&emsp;最后，是激动人心的上色步骤。对于第 $i$ 个点阵图中的每个 $P(0,y)\\in X_i$，从 $P$ 出发，沿着上一步骤中作出的线段，走**任意线段或折线**，到达 $Y_i$ 中的任意一点，并为这条线段或折线染上第 $y$ 种颜色。此外，为了避免不同颜色混在一起，需要保证，在所有 $n!$ 个点阵图中，被多余一种颜色染过的线段长度之和为 $0$。\n\n&emsp;&emsp;呈现在天依一行人眼前的这幅画的上色明显很敷衍，所以天依想知道到底有多少种可供选择的上色方案。定义两种上色方案不同，当且仅当存在编号 $i\\in[1,n!]$ 和任意一点 $P$，使得两个上色方案各自完成后，第 $i$ 个点阵图中染过点 $P$ 的颜色集合不同。\n\n&emsp;&emsp;你只需要告诉天依答案对 $p=335~544~323$ 取模后的结果。*天依可是为了简化你的计算，精挑细选了一个有趣的模数呢。*\n\n&emsp;&emsp;（请参考样例 #1 解释确认题意。）", "inputFormat": "输入一行一个整数 $n$，表示作画过程的参数。", "outputFormat": "输出一行一个非负整数，表示上色方案数对 $p$ 取模的结果。", "hint": "#### 样例 #1 解释\n\n在完成前两步后，画作的全貌如下。$(A,B,C,D,E,F)$ 构成一组 $n\\times2$ 的点阵图，不同点阵图的相对位置并不重要。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6xaw4brz.png)\n\n以下是一种可供选择的染色方案。红、黄、蓝依次对应第 $0,1,2$ 种颜色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ma3r8yit.png)\n\n#### 样例 #2 解释\n\n答案的真实值为 $996~124~179~980~315~787~264$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$n\\le10^6$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |       $n$        | 子任务分值 |\n| :--------: | :--------------: | :--------: |\n|    $1$     |      $\\le9$      |    $10$    |\n|    $2$     |     $\\le100$     |    $10$    |\n|    $3$     |     $\\le500$     |    $15$    |\n|    $4$     | $\\le5\\times10^3$ |    $20$    |\n|    $5$     |    $\\le10^5$     |    $20$    |\n|    $6$     |    $\\le10^6$     |    $25$    |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R4」大暑", "background": "&emsp;&emsp;「时见疏星落画檐，几点流萤小」\n\n---\n\n&emsp;&emsp;全国音乐祭，在天依一行人抵达之时，芙城早已翻涌这狂欢的气氛，汇聚于此的某些紧张青年人们倒显得有些格格不入。\n\n&emsp;&emsp;“总之，这里一定是终点站吧。”\n\n&emsp;&emsp;排练又一次随着弦音结束。又开始，结束。\n\n&emsp;&emsp;“阿绫，我们出去走走吧。”\n\n---\n\n&emsp;&emsp;**大暑**&emsp;「为所有视线涂抹上　一片蔚蓝的颜色　融化了苦涩」", "description": "&emsp;&emsp;“阿绫，你看这宣传册上这幅画，好奇怪呀。”\n\n&emsp;&emsp;在宣传册中“融艺术与科技为一体”的巨幅画作的制作过程如下：\n\n&emsp;&emsp;首先，工作人员画出 $n!$ 个 $n\\times2$ 的点阵图，任意两个点阵图间互相远离，在后续的制作过程中**互相独立**。对于第 $i$ 个点阵图，令其左下角坐标为 $(0,0)$，该点阵的点集为 $X_i\\cup Y_i$，其中 $X_i=\\{(0,y)\\mid y\\in[0,n)\\cap\\mathbb N\\}$，$Y_i=\\{(1,y)\\mid y\\in[0,n)\\cap\\mathbb N\\}$。\n\n&emsp;&emsp;接着，设集合 $\\Sigma=\\{\\sigma_i\\}_{i=1}^{n!}$ 包含 $\\{0,1,\\dots,n-1\\}$ 的所有 $n$ 阶排列，对于第 $i$ 个点阵图，工作人员将用字典序第 $i$ 小的排列 $\\sigma_i$ 为 $X_i,Y_i$ 连线配对：对于点 $P(0,y)\\in X_i$，作一条线段将其与点 $Q(1,\\sigma_{i,y})\\in Y_i$ 相连。\n\n&emsp;&emsp;最后，是激动人心的上色步骤。对于第 $i$ 个点阵图中的每个 $P(0,y)\\in X_i$，从 $P$ 出发，沿着上一步骤中作出的线段，走**任意线段或折线**，到达 $Y_i$ 中的任意一点，并为这条线段或折线染上第 $y$ 种颜色。此外，为了避免不同颜色混在一起，需要保证，在所有 $n!$ 个点阵图中，被多余一种颜色染过的线段长度之和为 $0$。\n\n&emsp;&emsp;呈现在天依一行人眼前的这幅画的上色明显很敷衍，所以天依想知道到底有多少种可供选择的上色方案。定义两种上色方案不同，当且仅当存在编号 $i\\in[1,n!]$ 和任意一点 $P$，使得两个上色方案各自完成后，第 $i$ 个点阵图中染过点 $P$ 的颜色集合不同。\n\n&emsp;&emsp;你只需要告诉天依答案对 $p=335~544~323$ 取模后的结果。*天依可是为了简化你的计算，精挑细选了一个有趣的模数呢。*\n\n&emsp;&emsp;（请参考样例 #1 解释确认题意。）", "inputFormat": "输入一行一个整数 $n$，表示作画过程的参数。", "outputFormat": "输出一行一个非负整数，表示上色方案数对 $p$ 取模的结果。", "hint": "#### 样例 #1 解释\n\n在完成前两步后，画作的全貌如下。$(A,B,C,D,E,F)$ 构成一组 $n\\times2$ 的点阵图，不同点阵图的相对位置并不重要。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6xaw4brz.png)\n\n以下是一种可供选择的染色方案。红、黄、蓝依次对应第 $0,1,2$ 种颜色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ma3r8yit.png)\n\n#### 样例 #2 解释\n\n答案的真实值为 $996~124~179~980~315~787~264$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$n\\le10^6$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |       $n$        | 子任务分值 |\n| :--------: | :--------------: | :--------: |\n|    $1$     |      $\\le9$      |    $10$    |\n|    $2$     |     $\\le100$     |    $10$    |\n|    $3$     |     $\\le500$     |    $15$    |\n|    $4$     | $\\le5\\times10^3$ |    $20$    |\n|    $5$     |    $\\le10^5$     |    $20$    |\n|    $6$     |    $\\le10^6$     |    $25$    |\n", "locale": "zh-CN"}}}
{"pid": "P9160", "type": "P", "difficulty": 2, "samples": [["4\n4 5 1 4", "3 10"], ["6\n1 4 2 8 5 7", "5 19"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "multiset", "background": "ZHY 有很多集合。集合多了，也就成了多重集合。", "description": "给定一个 **多重集合**（集合中元素可重复）$S$，请求出一个最大的多重集合 $T$，满足 $T$ 是 $S$ 的一个 **真子集**，且对于 $T$ 中的每一个元素 $i$，要么 $i$ 在 $S$ 中没有前驱，要么 $i$ 在 $S$ 中的前驱 $\\in T$。若有多个大小相同的集合满足条件，则 $T$ 为所有元素之和最大的一个。请输出 $T$ 的大小和其中元素之和。\n\n---\n\n一个数 $x$ 在一个集合 $S$ 中的前驱的定义为所有在 $S$ 中且 $<x$ 的元素 $y$ 的最大值。", "inputFormat": "第一行一个正整数 $n$，表示 $S$ 的大小。\n\n第二行 $n$ 个正整数，表示 $S$ 中的元素。", "outputFormat": "一行两个整数。第一个数表示 $T$ 的大小，第二个数表示 $T$ 的所有元素之和。", "hint": "**样例 $1$ 解释**\n\n$T$ 为 $\\{5,1,4\\}$。\n\n**样例 $2$ 解释**\n\n$T$ 为 $\\{1,4,2,5,7\\}$。\n\n### 数据范围\n\n对于 $30\\%$ 的数据，$n \\le 15$。\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^5$，$1 \\le S$ 中的元素 $\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "multiset", "background": "ZHY 有很多集合。集合多了，也就成了多重集合。", "description": "给定一个 **多重集合**（集合中元素可重复）$S$，请求出一个最大的多重集合 $T$，满足 $T$ 是 $S$ 的一个 **真子集**，且对于 $T$ 中的每一个元素 $i$，要么 $i$ 在 $S$ 中没有前驱，要么 $i$ 在 $S$ 中的前驱 $\\in T$。若有多个大小相同的集合满足条件，则 $T$ 为所有元素之和最大的一个。请输出 $T$ 的大小和其中元素之和。\n\n---\n\n一个数 $x$ 在一个集合 $S$ 中的前驱的定义为所有在 $S$ 中且 $<x$ 的元素 $y$ 的最大值。", "inputFormat": "第一行一个正整数 $n$，表示 $S$ 的大小。\n\n第二行 $n$ 个正整数，表示 $S$ 中的元素。", "outputFormat": "一行两个整数。第一个数表示 $T$ 的大小，第二个数表示 $T$ 的所有元素之和。", "hint": "**样例 $1$ 解释**\n\n$T$ 为 $\\{5,1,4\\}$。\n\n**样例 $2$ 解释**\n\n$T$ 为 $\\{1,4,2,5,7\\}$。\n\n### 数据范围\n\n对于 $30\\%$ 的数据，$n \\le 15$。\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^5$，$1 \\le S$ 中的元素 $\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9161", "type": "P", "difficulty": 4, "samples": [["3 1\n1 2\n2 3", "5"], ["5 2\n1 2\n1 3\n2 4\n2 5", "103"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "O2优化", "树形 DP"], "title": "Trees", "background": "ZHY 有很多树，每个树上都有很多点，每个点上都有一个数，但他忘记了每个点上写的数是什么了。", "description": "ZHY 拥有 $m$ 棵树，每棵树形态相同，且均有 $n$ 个点。定义 $(i,j)$ 是第 $i$ 棵树上的第 $j$ 个点，你需要为每个点 $(i,j)$ 赋一个值 $a_{(i,j)}$，且满足以下条件：\n\n- 对于 $\\forall i \\in [1,m],\\forall j \\in [1,n]$，有 $a_{(i,j)}\\in\\{0,1\\}$。\n\n- 对于 $\\forall i \\in [1,n]$，有 $\\sum_{j=1}^m a_{(j,i)}\\le 1$。\n\n- 对于任意的一条边 $(u,v)$ 和 $i \\in [1,m]$，有 $a_{(i,u)}+a_{(i,v)}\\le 1$。\n\n请你计算有多少种赋值方式，对 $10^9+7$ 取模。注意这 $m$ 棵树是有序的。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示这 $m$ 棵树中每棵树都有一条从 $u$ 到 $v$ 的无向边。保证数据可以构成一棵树。", "outputFormat": "输出一行表示答案。", "hint": "**本题使用捆绑数据。**\n\n对于所有的数据，$1 \\le n \\le 10^6$，$1 \\le m \\le 10^9$。\n\n- Subtask 0（10 pts）：$n,m \\le 4$。\n- Subtask 1（30 pts）：$n,m \\le 10^3$。\n- Subtask 2（15 pts）：$n \\le 10^3$。\n- Subtask 3（25 pts）：$m=1$。\n- Subtask 4（20 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Trees", "background": "ZHY 有很多树，每个树上都有很多点，每个点上都有一个数，但他忘记了每个点上写的数是什么了。", "description": "ZHY 拥有 $m$ 棵树，每棵树形态相同，且均有 $n$ 个点。定义 $(i,j)$ 是第 $i$ 棵树上的第 $j$ 个点，你需要为每个点 $(i,j)$ 赋一个值 $a_{(i,j)}$，且满足以下条件：\n\n- 对于 $\\forall i \\in [1,m],\\forall j \\in [1,n]$，有 $a_{(i,j)}\\in\\{0,1\\}$。\n\n- 对于 $\\forall i \\in [1,n]$，有 $\\sum_{j=1}^m a_{(j,i)}\\le 1$。\n\n- 对于任意的一条边 $(u,v)$ 和 $i \\in [1,m]$，有 $a_{(i,u)}+a_{(i,v)}\\le 1$。\n\n请你计算有多少种赋值方式，对 $10^9+7$ 取模。注意这 $m$ 棵树是有序的。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示这 $m$ 棵树中每棵树都有一条从 $u$ 到 $v$ 的无向边。保证数据可以构成一棵树。", "outputFormat": "输出一行表示答案。", "hint": "**本题使用捆绑数据。**\n\n对于所有的数据，$1 \\le n \\le 10^6$，$1 \\le m \\le 10^9$。\n\n- Subtask 0（10 pts）：$n,m \\le 4$。\n- Subtask 1（30 pts）：$n,m \\le 10^3$。\n- Subtask 2（15 pts）：$n \\le 10^3$。\n- Subtask 3（25 pts）：$m=1$。\n- Subtask 4（20 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9162", "type": "P", "difficulty": 6, "samples": [["3\n2 1 3", "80"], ["4\n4 1 3 2", "1244"], ["5\n1 2 3 2 1", "444"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "variance", "background": "", "description": "给定序列 $a_1,a_2,\\cdots,a_n$，定义 $f(l,r)=(a_l\\oplus a_{l+1}\\oplus \\cdots \\oplus a_r)+(a_l\\vee a_{l+1}\\vee \\cdots \\vee a_r)$，其中 $\\oplus$ 表示 **按位异或** 运算，$\\vee$ 表示 **按位或** 运算。\n\n你需要求出所有满足 $1\\le l \\le r \\le n$ 的 $f(l,r)$ 的方差 $v$。为避免精度误差，以及答案可能很大，请输出 $(v\\times \\frac{n^2\\times (n+1)^2}{4}) \\kern{3pt}\\mathrm {mod}\\kern{3pt} 998244353$。\n\n**注意：运算过程中不取模，仅将结果取模。**", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "输出一个整数 $(v\\times \\frac{n^2\\times (n+1)^2}{4}) \\kern{3pt}\\mathrm {mod}\\kern{3pt} 998244353$。", "hint": "方差的定义：对于 $n$ 个数 $a_1,a_2,\\cdots,a_n$，它们的方差是：\n\n$$\n\\frac 1 n\\sum_{i=1}^n (a_i-\\bar{a})^2\n$$\n\n其中 $\\bar{a}$ 为 $a_1,a_2,\\cdots,a_n$ 的平均数，即 $\\dfrac {1} {n} \\displaystyle\\sum\\limits_{i=1}^n a_i$。\n\n----\n\n对于 $10\\%$ 的数据，$n \\le 50$。\n\n对于 $30\\%$ 的数据，$n \\le 5000$。\n\n对于另 $20\\%$ 的数据，$a_i \\le 100$。  \n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5,1\\le a_i < 2^{31}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "variance", "background": "", "description": "给定序列 $a_1,a_2,\\cdots,a_n$，定义 $f(l,r)=(a_l\\oplus a_{l+1}\\oplus \\cdots \\oplus a_r)+(a_l\\vee a_{l+1}\\vee \\cdots \\vee a_r)$，其中 $\\oplus$ 表示 **按位异或** 运算，$\\vee$ 表示 **按位或** 运算。\n\n你需要求出所有满足 $1\\le l \\le r \\le n$ 的 $f(l,r)$ 的方差 $v$。为避免精度误差，以及答案可能很大，请输出 $(v\\times \\frac{n^2\\times (n+1)^2}{4}) \\kern{3pt}\\mathrm {mod}\\kern{3pt} 998244353$。\n\n**注意：运算过程中不取模，仅将结果取模。**", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "输出一个整数 $(v\\times \\frac{n^2\\times (n+1)^2}{4}) \\kern{3pt}\\mathrm {mod}\\kern{3pt} 998244353$。", "hint": "方差的定义：对于 $n$ 个数 $a_1,a_2,\\cdots,a_n$，它们的方差是：\n\n$$\n\\frac 1 n\\sum_{i=1}^n (a_i-\\bar{a})^2\n$$\n\n其中 $\\bar{a}$ 为 $a_1,a_2,\\cdots,a_n$ 的平均数，即 $\\dfrac {1} {n} \\displaystyle\\sum\\limits_{i=1}^n a_i$。\n\n----\n\n对于 $10\\%$ 的数据，$n \\le 50$。\n\n对于 $30\\%$ 的数据，$n \\le 5000$。\n\n对于另 $20\\%$ 的数据，$a_i \\le 100$。  \n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5,1\\le a_i < 2^{31}$。", "locale": "zh-CN"}}}
{"pid": "P9163", "type": "P", "difficulty": 5, "samples": [["1\n3\n-1 0 2 2 2 0 3 0\n1 2 3 2 1 1 3 1\n1 3 2 3 2 1 -2 0", "No"], ["1\n3\n-1 0 2 0 2 2 3 0\n1 1 3 1 1 2 3 2\n1 3 2 1 2 3 -2 0", "Yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "「INOH」Round 1 - 纽结", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/edc1559k.png)  \n\n上图是两个结的平面投影图。  \n\n我们发现一个结可以由基本的重叠点描述，并且每一个重叠点都是二重点。  \n\n也就是说我们可以用**一个点表示重叠点，重叠点之间用不同属性的边来连接**。  \n\n可以发现**一个点有四个出口，出口与出口相连**，这四条中有**两条在上，两条在下**。  \n\n我们用一个二元组 $(u,d)$ 表示这样一个出口。  \n\n其中 $u$ 为这个点，$d \\in [ 0, 3 ] $，同时**钦定 $0$ 和 $1$ 为两条上边，$2$ 和 $3$ 为两条下边**。  \n\n又发现一个结有两端，这两端一定可以与外界相连，为了方便，用 **$(-1,0)$ 和 $(-2,0)$ 表示这两端**。  \n\n现在给您一个这样的结，您需要回答，当我们手捏两端，然后用力拉，这是个活结还是死结？  \n\n如果是活结请输出 `Yes`，如果是死结请输出 `No`。\n", "inputFormat": "第一行为数据组数 $T$。\n\n每组数据第一行 $n$，表示结点数。\n\n之后 $n$ 行，第 $i$ 行有 $ u_0, d_0, u_1, d_1, u_2, d_2, u_3, d_3 $ 共八个数分别为第 $i$ 个点的 $0$ 到 $3$ 号出口连向的对应出口。\n\n第 $i$ 行的第 0 组 $(u_0,d_0)$ 指第 $i$ 个点的 $0$ 号出口与第 $u_0$ 个点的 $d_0$ 号出口相连，以此类推。", "outputFormat": "一共 $T$ 行，每行为 `Yes` 或 `No`。", "hint": "### 数据范围\n**本题采用捆绑测试**。  \n- Subtask 0（20pts）：$T = 3$，$1 \\le n \\le 10$。  \n- Subtask 1（20pts）：$T = 10^3$，$1 \\le n \\le 10$。  \n- Subtask 2（10pts）：$T = 10$，$1 \\le n \\le 10^5$，且保证数据随机生成。  \n- Subtask 3（50pts）：$T = 10$，$1 \\le n \\le 10^5$。  \n\n### 样例解释：\n\n样例一为左图，它是死结。\n\n样例二为右图，它是活结。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zkq4wmsn.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「INOH」Round 1 - 纽结", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/edc1559k.png)  \n\n上图是两个结的平面投影图。  \n\n我们发现一个结可以由基本的重叠点描述，并且每一个重叠点都是二重点。  \n\n也就是说我们可以用**一个点表示重叠点，重叠点之间用不同属性的边来连接**。  \n\n可以发现**一个点有四个出口，出口与出口相连**，这四条中有**两条在上，两条在下**。  \n\n我们用一个二元组 $(u,d)$ 表示这样一个出口。  \n\n其中 $u$ 为这个点，$d \\in [ 0, 3 ] $，同时**钦定 $0$ 和 $1$ 为两条上边，$2$ 和 $3$ 为两条下边**。  \n\n又发现一个结有两端，这两端一定可以与外界相连，为了方便，用 **$(-1,0)$ 和 $(-2,0)$ 表示这两端**。  \n\n现在给您一个这样的结，您需要回答，当我们手捏两端，然后用力拉，这是个活结还是死结？  \n\n如果是活结请输出 `Yes`，如果是死结请输出 `No`。\n", "inputFormat": "第一行为数据组数 $T$。\n\n每组数据第一行 $n$，表示结点数。\n\n之后 $n$ 行，第 $i$ 行有 $ u_0, d_0, u_1, d_1, u_2, d_2, u_3, d_3 $ 共八个数分别为第 $i$ 个点的 $0$ 到 $3$ 号出口连向的对应出口。\n\n第 $i$ 行的第 0 组 $(u_0,d_0)$ 指第 $i$ 个点的 $0$ 号出口与第 $u_0$ 个点的 $d_0$ 号出口相连，以此类推。", "outputFormat": "一共 $T$ 行，每行为 `Yes` 或 `No`。", "hint": "### 数据范围\n**本题采用捆绑测试**。  \n- Subtask 0（20pts）：$T = 3$，$1 \\le n \\le 10$。  \n- Subtask 1（20pts）：$T = 10^3$，$1 \\le n \\le 10$。  \n- Subtask 2（10pts）：$T = 10$，$1 \\le n \\le 10^5$，且保证数据随机生成。  \n- Subtask 3（50pts）：$T = 10$，$1 \\le n \\le 10^5$。  \n\n### 样例解释：\n\n样例一为左图，它是死结。\n\n样例二为右图，它是活结。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zkq4wmsn.png)", "locale": "zh-CN"}}}
{"pid": "P9164", "type": "P", "difficulty": 6, "samples": [["5\n11221", "200"], ["13\n1122121212212", "400201782"]], "limits": {"time": [2333, 2333, 2333, 2333, 2333, 2333, 2333, 2333, 2333, 2333, 2333, 2333, 2333], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "「INOH」Round 1 - 狂气", "background": "", "description": "有一个无限长的序列 $\\{a\\}$，**数组下标从 $1$ 开始**，初始 $a_1=1$，其余位置均为 $0$。\n\n$m$ 次操作：\n1. 对于所有**奇数** $i$，令 $a_{i+1}\\gets a_{i+1}+a_i$。\n2. 对于所有**偶数** $i$，令 $a_{i+1}\\gets a_{i+1}+a_i$。\n\n你需要求出所有操作进行完之后的序列。\n\n为了方便输出，你只需要输出 $( \\displaystyle\\prod_{i = 1}^{m} (a_i + 1))\\bmod 998244353$ 的值即可。  ", "inputFormat": "第一行一个正整数 $m$。\n\n第二行一个长度为 $m$ 的字符串，表示操作序列。  ", "outputFormat": "一行，表示 $( \\displaystyle\\prod_{i = 1}^{m} (a_i + 1)) \\bmod 998244353$ 的值。  ", "hint": "**样例 1 解释**  \n\n经过 5 次操作之后，序列前五项：  \n$a_1 = 1$，$a_2 = 3$，$a_3 = 4$，$a_4 = 4$，$a_5 = 0$。\n\n**本题采用捆绑测试**。 \n\n- Subtask 0（10pts）：$1 \\le m \\le 1000$。  \n- Subtask 1（20pts）：操作序列形如 $\\tt121212\\dots$。\n- Subtask 2（20pts）：操作序列随机生成。  \n- Subtask 3（50pts）：无特殊限制。  \n\n对于 $100\\%$ 的数据，有 $1 \\le m \\le 2 \\times 10^5$。  \n\n**请选手注意常数因子对运行效率的影响**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「INOH」Round 1 - 狂气", "background": "", "description": "有一个无限长的序列 $\\{a\\}$，**数组下标从 $1$ 开始**，初始 $a_1=1$，其余位置均为 $0$。\n\n$m$ 次操作：\n1. 对于所有**奇数** $i$，令 $a_{i+1}\\gets a_{i+1}+a_i$。\n2. 对于所有**偶数** $i$，令 $a_{i+1}\\gets a_{i+1}+a_i$。\n\n你需要求出所有操作进行完之后的序列。\n\n为了方便输出，你只需要输出 $( \\displaystyle\\prod_{i = 1}^{m} (a_i + 1))\\bmod 998244353$ 的值即可。  ", "inputFormat": "第一行一个正整数 $m$。\n\n第二行一个长度为 $m$ 的字符串，表示操作序列。  ", "outputFormat": "一行，表示 $( \\displaystyle\\prod_{i = 1}^{m} (a_i + 1)) \\bmod 998244353$ 的值。  ", "hint": "**样例 1 解释**  \n\n经过 5 次操作之后，序列前五项：  \n$a_1 = 1$，$a_2 = 3$，$a_3 = 4$，$a_4 = 4$，$a_5 = 0$。\n\n**本题采用捆绑测试**。 \n\n- Subtask 0（10pts）：$1 \\le m \\le 1000$。  \n- Subtask 1（20pts）：操作序列形如 $\\tt121212\\dots$。\n- Subtask 2（20pts）：操作序列随机生成。  \n- Subtask 3（50pts）：无特殊限制。  \n\n对于 $100\\%$ 的数据，有 $1 \\le m \\le 2 \\times 10^5$。  \n\n**请选手注意常数因子对运行效率的影响**", "locale": "zh-CN"}}}
{"pid": "P9165", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [5000, 5000, 5000], "memory": [2048, 2048, 2048]}, "tags": ["交互题", "Special Judge", "O2优化", "通信题"], "title": "「INOH」Round 1 - 意外", "background": "**这是一道通信题。**\n\n**由于一些原因，本题有特殊的时空限制，且只有三个测试点。**\n\n**您的得分是三个测试点得分的最小值。**\n\n**请选手注意不要用 `C++14 (GCC 9)` 提交。**", "description": "通信中的意外是不可避免的。\n\nA 程序从交互程序获得一个长度为 $10^2$ 的数组，其元素值域为 $ \\lbrack 0, 998244353 ) $，A 程序对其进行编码，即 `Encode` 操作，生成一个长度任意，元素值域为 $\\lbrack 0, 998244353 )$ 的数组，然后将其返回给交互程序。\n\n交互程序会对编码生成的数组进行如下操作：\n\n- 对于每一个元素，有 $50\\%$ 概率，将其赋成在 $ \\lbrack 0, 998244353 ) $ 内的一个随机的数，有 $50\\%$ 概率不变。\n\n之后 B 程序会从交互程序获得操作后的数组，B 程序需要对其进行解码，即 `Decode` 操作，根据数组信息还原出最初 A 程序从交互程序获得的数组。\n\n### 实现细节\n\n由于无法实现通信，本题以交互的形式运行。\n\n你不需要，也不应该实现主函数，你只需要实现下面两个函数\n\n1. `vector <int> Encode ( vector <int> vec );`\n- 该函数传入一个长度为 $10^2$ 的 `vector`，返回一个任意长度的 `vector`。\n2. `vector <int> Decode ( vector <int> vec );`\n- 该函数传入一个任意长度的 `vector`，返回一个长度为 $10^2$ 的 `vector`。\n\n**交互库会调用 `Encode` 不超过 $3 \\times 10^4$ 次，调用 `Decode` 不超过 $1 \\times 10^4$ 次。**  \n\n**下发的交互库**的实现是固定的测试数据组数，随机一个数组，并立即对其 `Encode` 和 `Decode`，即仅用于简单检验程序。  \n\n使用时，你可以**直接将实现好的 `Encode` 和 `Decode` 函数放到交互库代码里**，编译运行即可。\n\n如果交互库输出 `Illegaled operation`，你将获得 $0$ 分。可能的原因包括未还原原数组、返回的数组不合法。\n\n否则交互库会输出一个整数，表示你的分数。\n\n**评测交互库**不一定在 `Encode` 后立即 `Decode`，即可能会先对若干个数组进行编码，再逐一解码。\n\n所有的数应均在 $ \\lbrack 0, 998244353 ) $ 范围内。\n\n### 评分方式\n\n设您 `Encode` 返回的最大长度为 $Len$，则得分为 $ \\min( 100, \\lfloor \\frac{1500}{ \\lceil \\frac{Len}{50} \\rceil } \\rfloor ) $。", "inputFormat": "无", "outputFormat": "无", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「INOH」Round 1 - 意外", "background": "**这是一道通信题。**\n\n**由于一些原因，本题有特殊的时空限制，且只有三个测试点。**\n\n**您的得分是三个测试点得分的最小值。**\n\n**请选手注意不要用 `C++14 (GCC 9)` 提交。**", "description": "通信中的意外是不可避免的。\n\nA 程序从交互程序获得一个长度为 $10^2$ 的数组，其元素值域为 $ \\lbrack 0, 998244353 ) $，A 程序对其进行编码，即 `Encode` 操作，生成一个长度任意，元素值域为 $\\lbrack 0, 998244353 )$ 的数组，然后将其返回给交互程序。\n\n交互程序会对编码生成的数组进行如下操作：\n\n- 对于每一个元素，有 $50\\%$ 概率，将其赋成在 $ \\lbrack 0, 998244353 ) $ 内的一个随机的数，有 $50\\%$ 概率不变。\n\n之后 B 程序会从交互程序获得操作后的数组，B 程序需要对其进行解码，即 `Decode` 操作，根据数组信息还原出最初 A 程序从交互程序获得的数组。\n\n### 实现细节\n\n由于无法实现通信，本题以交互的形式运行。\n\n你不需要，也不应该实现主函数，你只需要实现下面两个函数\n\n1. `vector <int> Encode ( vector <int> vec );`\n- 该函数传入一个长度为 $10^2$ 的 `vector`，返回一个任意长度的 `vector`。\n2. `vector <int> Decode ( vector <int> vec );`\n- 该函数传入一个任意长度的 `vector`，返回一个长度为 $10^2$ 的 `vector`。\n\n**交互库会调用 `Encode` 不超过 $3 \\times 10^4$ 次，调用 `Decode` 不超过 $1 \\times 10^4$ 次。**  \n\n**下发的交互库**的实现是固定的测试数据组数，随机一个数组，并立即对其 `Encode` 和 `Decode`，即仅用于简单检验程序。  \n\n使用时，你可以**直接将实现好的 `Encode` 和 `Decode` 函数放到交互库代码里**，编译运行即可。\n\n如果交互库输出 `Illegaled operation`，你将获得 $0$ 分。可能的原因包括未还原原数组、返回的数组不合法。\n\n否则交互库会输出一个整数，表示你的分数。\n\n**评测交互库**不一定在 `Encode` 后立即 `Decode`，即可能会先对若干个数组进行编码，再逐一解码。\n\n所有的数应均在 $ \\lbrack 0, 998244353 ) $ 范围内。\n\n### 评分方式\n\n设您 `Encode` 返回的最大长度为 $Len$，则得分为 $ \\min( 100, \\lfloor \\frac{1500}{ \\lceil \\frac{Len}{50} \\rceil } \\rfloor ) $。", "inputFormat": "无", "outputFormat": "无", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9166", "type": "P", "difficulty": 4, "samples": [["7 5 4\n3 4\n4 6\n1 3\n5 7\n4 6\n", "1 3 6 7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2023", "O2优化", "差分"], "title": "[省选联考 2023] 火车站", "background": "", "description": "有 $n$ 个火车站排成一条直线，从 $1$ 到 $n$ 编号。一共有 $m$ 条火车轨道，每条轨道覆盖一段火车站区间 $[l_i, r_i]$。\n\n对于一个被多条火车轨道覆盖的火车站，火车在经过这里的时候，可以在此处改变轨道。但是火车无法掉头，只能朝着一个方向运行（即只能一直往 $1$ 的方向开或者一直往 $n$ 的方向开）。\n\n小 A 从火车站 $x$ 出发，即搭上了经过 $x$ 的任意一列火车（这列火车也可能是从车站 $x$ 出发）。这列火车可能行驶在火车站 $x$ 所处的任一条轨道上，其运行方向既可能是往 $1$ 的方向开，也可能是往 $n$ 的方向开。小 A 上车后就开始昏睡，直到乘坐的火车到达某条线路的终点站停下，他才醒过来。问小 A 最后可能到达的车站。\n\n注意：火车应运行至少一个车站，且火车切换轨道后不会立刻停下来，而是会继续沿着当前轨道前进。\n", "inputFormat": "输入的第一行包含三个正整数 $n, m, x$，分别表示火车站的数量，火车轨道的数量以及小 A 初始的起点。\n\n接下来 $m$ 行，每行包含两个正整数 $l_i, r_i$，表示一条火车轨道运行的区间。\n", "outputFormat": "输出一行，包含若干个用单个空格分隔的正整数，表示小 A 最后可能到达的车站，按照车站编号升序排序输出。\n", "hint": "**【样例 1 解释】**\n\n火车从车站 $4$ 出发，沿着第一条轨道可以运行到终点 $3$，也可以接着沿第三条轨道运行到终点 $1$。\n\n火车从车站 $4$ 出发，沿着第二条轨道可以运行到终点 $6$，也可以在车站 $5$ 换到第四条轨道运行到终点 $7$。\n\n所以最终按顺序输出 $1, 3, 6, 7$。\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le n, m \\le 2 \\times 10^5$，$1 \\le x \\le n$，$1 \\le l_i < r_i \\le n$。\n\n|测试点|$n, m \\le$|特殊性质|\n|:-:|:-:|:-:|\n|1|$50$|无|\n|2|$50$|无|\n|3|$5000$|无|\n|4|$5000$|无|\n|5|$5000$|无|\n|6|$2 \\times 10^5$|A|\n|7|$2 \\times 10^5$|A|\n|8|$2 \\times 10^5$|无|\n|9|$2 \\times 10^5$|无|\n|10|$2 \\times 10^5$|无|\n\n特殊性质 A：保证 $x = 1$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2023] 火车站", "background": "", "description": "有 $n$ 个火车站排成一条直线，从 $1$ 到 $n$ 编号。一共有 $m$ 条火车轨道，每条轨道覆盖一段火车站区间 $[l_i, r_i]$。\n\n对于一个被多条火车轨道覆盖的火车站，火车在经过这里的时候，可以在此处改变轨道。但是火车无法掉头，只能朝着一个方向运行（即只能一直往 $1$ 的方向开或者一直往 $n$ 的方向开）。\n\n小 A 从火车站 $x$ 出发，即搭上了经过 $x$ 的任意一列火车（这列火车也可能是从车站 $x$ 出发）。这列火车可能行驶在火车站 $x$ 所处的任一条轨道上，其运行方向既可能是往 $1$ 的方向开，也可能是往 $n$ 的方向开。小 A 上车后就开始昏睡，直到乘坐的火车到达某条线路的终点站停下，他才醒过来。问小 A 最后可能到达的车站。\n\n注意：火车应运行至少一个车站，且火车切换轨道后不会立刻停下来，而是会继续沿着当前轨道前进。\n", "inputFormat": "输入的第一行包含三个正整数 $n, m, x$，分别表示火车站的数量，火车轨道的数量以及小 A 初始的起点。\n\n接下来 $m$ 行，每行包含两个正整数 $l_i, r_i$，表示一条火车轨道运行的区间。\n", "outputFormat": "输出一行，包含若干个用单个空格分隔的正整数，表示小 A 最后可能到达的车站，按照车站编号升序排序输出。\n", "hint": "**【样例 1 解释】**\n\n火车从车站 $4$ 出发，沿着第一条轨道可以运行到终点 $3$，也可以接着沿第三条轨道运行到终点 $1$。\n\n火车从车站 $4$ 出发，沿着第二条轨道可以运行到终点 $6$，也可以在车站 $5$ 换到第四条轨道运行到终点 $7$。\n\n所以最终按顺序输出 $1, 3, 6, 7$。\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le n, m \\le 2 \\times 10^5$，$1 \\le x \\le n$，$1 \\le l_i < r_i \\le n$。\n\n|测试点|$n, m \\le$|特殊性质|\n|:-:|:-:|:-:|\n|1|$50$|无|\n|2|$50$|无|\n|3|$5000$|无|\n|4|$5000$|无|\n|5|$5000$|无|\n|6|$2 \\times 10^5$|A|\n|7|$2 \\times 10^5$|A|\n|8|$2 \\times 10^5$|无|\n|9|$2 \\times 10^5$|无|\n|10|$2 \\times 10^5$|无|\n\n特殊性质 A：保证 $x = 1$。\n", "locale": "zh-CN"}}}
{"pid": "P9167", "type": "P", "difficulty": 7, "samples": [["4 4 1\n1 2\n2 3\n1 3\n3 4\n", "2\n"], ["见附件中的 cities/cities2.in", "见附件中的 cities/cities2.ans"], ["见附件中的 cities/cities3.in", "见附件中的 cities/cities3.ans"], ["见附件中的 cities/cities4.in", "见附件中的 cities/cities4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2023", "O2优化"], "title": "[省选联考 2023] 城市建造", "background": "", "description": "在这个国度里面有 $n$ 座城市，一开始城市之间修有若干条双向道路，导致这些城市形成了 $t \\ge 2$ 个连通块，特别的，这些连通块之间两两大小差的绝对值不超过 $0 \\le k \\le 1$。为了方便城市建设与发展，$n$ 座城市中的某 $t$ 座城市**在这 $t$ 座城市之间**额外修建了至少一条双向道路，使得所有城市连通。\n\n现在已经知道额外修建后的所有道路，你需要算出有哪些双向道路集合 $E'$，满足这些道路有可能是后来额外修建的，请输出答案对 $998,244,353$ 取模的结果。\n\n即给定一张 $n$ 个点 $m$ 条边的**无向连通**图 $G = (V, E)$，询问有多少该图的子图 $G' = (V', E')$，满足 $E' \\ne \\varnothing$ 且 $G - E'$ 中恰好有 $|V'|$ 个连通块，且任意两个连通块大小之差不超过 $k$，保证 $0 \\le k \\le 1$，请输出答案对 $998,244,353$ 取模的结果。\n", "inputFormat": "输入的第一行包含三个正整数 $n, m, k$，分别表示城市数、修建后的道路数以及任意两个连通块大小之差的上限。\n\n接下来 $m$ 行每行包含两个正整数 $u, v$，表示城市 $u$ 和 $v$ 之间存在一条双向道路，保证 $u \\ne v$。\n", "outputFormat": "输出一个数表示答案对 $998,244,353$ 取模后的结果。\n", "hint": "**【样例 1 解释】**\n\n有以下两种情况：\n\n- 本来只有 $(3, 4)$ 这一条道路，此时有三个连通块，分别为 $\\{1\\}, \\{2\\}, \\{3, 4\\}$；后来城市 $1, 2, 3$ 决定在它们三座城市中额外修建了 $(1, 2), (2, 3), (1, 3)$ 这三条道路，使得所有城市连通。\n- 本来没有任何道路，此时有四个连通块，分别为 $\\{1\\}, \\{2\\}, \\{3\\}, \\{4\\}$；后来城市 $1, 2, 3, 4$ 决定在它们四座城市中额外修建了 $(1, 2), (2, 3), (1, 3), (3, 4)$ 这四条道路，使得所有城市连通。\n\n**【数据范围】**\n\n对于所有的数据，保证：$3 \\le n \\le 10^5$，$n - 1 \\le m \\le 2 \\times 10^5$，$0 \\le k \\le 1$。\n\n|测试点|$n$|$m$|$k$|\n|:-:|:-:|:-:|:-:|\n|1, 2|$\\le 15$|$\\le 20$|$= 0$|\n|3 ~ 5|$\\le 20$|$\\le 50$|$= 1$|\n|6, 7|$\\le 200$|$\\le 300$|$= 0$|\n|8, 9|$\\le 2,000$|$= n - 1$|$= 1$|\n|10, 11|$\\le 2,000$|$\\le 3,000$|$= 0$|\n|12, 13|$\\le 2,000$|$\\le 3,000$|$= 1$|\n|14, 15|$\\le 10^5$|$= n - 1$|$= 1$|\n|16, 17|$\\le 10^5$|$\\le 2 \\times 10^5$|$= 0$|\n|18 ~ 20|$\\le 10^5$|$\\le 2 \\times 10^5$|$= 1$|\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2023] 城市建造", "background": "", "description": "在这个国度里面有 $n$ 座城市，一开始城市之间修有若干条双向道路，导致这些城市形成了 $t \\ge 2$ 个连通块，特别的，这些连通块之间两两大小差的绝对值不超过 $0 \\le k \\le 1$。为了方便城市建设与发展，$n$ 座城市中的某 $t$ 座城市**在这 $t$ 座城市之间**额外修建了至少一条双向道路，使得所有城市连通。\n\n现在已经知道额外修建后的所有道路，你需要算出有哪些双向道路集合 $E'$，满足这些道路有可能是后来额外修建的，请输出答案对 $998,244,353$ 取模的结果。\n\n即给定一张 $n$ 个点 $m$ 条边的**无向连通**图 $G = (V, E)$，询问有多少该图的子图 $G' = (V', E')$，满足 $E' \\ne \\varnothing$ 且 $G - E'$ 中恰好有 $|V'|$ 个连通块，且任意两个连通块大小之差不超过 $k$，保证 $0 \\le k \\le 1$，请输出答案对 $998,244,353$ 取模的结果。\n", "inputFormat": "输入的第一行包含三个正整数 $n, m, k$，分别表示城市数、修建后的道路数以及任意两个连通块大小之差的上限。\n\n接下来 $m$ 行每行包含两个正整数 $u, v$，表示城市 $u$ 和 $v$ 之间存在一条双向道路，保证 $u \\ne v$。\n", "outputFormat": "输出一个数表示答案对 $998,244,353$ 取模后的结果。\n", "hint": "**【样例 1 解释】**\n\n有以下两种情况：\n\n- 本来只有 $(3, 4)$ 这一条道路，此时有三个连通块，分别为 $\\{1\\}, \\{2\\}, \\{3, 4\\}$；后来城市 $1, 2, 3$ 决定在它们三座城市中额外修建了 $(1, 2), (2, 3), (1, 3)$ 这三条道路，使得所有城市连通。\n- 本来没有任何道路，此时有四个连通块，分别为 $\\{1\\}, \\{2\\}, \\{3\\}, \\{4\\}$；后来城市 $1, 2, 3, 4$ 决定在它们四座城市中额外修建了 $(1, 2), (2, 3), (1, 3), (3, 4)$ 这四条道路，使得所有城市连通。\n\n**【数据范围】**\n\n对于所有的数据，保证：$3 \\le n \\le 10^5$，$n - 1 \\le m \\le 2 \\times 10^5$，$0 \\le k \\le 1$。\n\n|测试点|$n$|$m$|$k$|\n|:-:|:-:|:-:|:-:|\n|1, 2|$\\le 15$|$\\le 20$|$= 0$|\n|3 ~ 5|$\\le 20$|$\\le 50$|$= 1$|\n|6, 7|$\\le 200$|$\\le 300$|$= 0$|\n|8, 9|$\\le 2,000$|$= n - 1$|$= 1$|\n|10, 11|$\\le 2,000$|$\\le 3,000$|$= 0$|\n|12, 13|$\\le 2,000$|$\\le 3,000$|$= 1$|\n|14, 15|$\\le 10^5$|$= n - 1$|$= 1$|\n|16, 17|$\\le 10^5$|$\\le 2 \\times 10^5$|$= 0$|\n|18 ~ 20|$\\le 10^5$|$\\le 2 \\times 10^5$|$= 1$|\n", "locale": "zh-CN"}}}
{"pid": "P9168", "type": "P", "difficulty": 7, "samples": [["1\n3 2 1\n1 1\n2 1\n1 3\n1 2 2\n", "4 5\n"], ["见附件中的 transfer/transfer2.in", "见附件中的 transfer/transfer2.ans"], ["见附件中的 transfer/transfer3.in", "见附件中的 transfer/transfer3.ans"], ["见附件中的 transfer/transfer4.in", "见附件中的 transfer/transfer4.ans"], ["见附件中的 transfer/transfer5.in", "见附件中的 transfer/transfer5.ans"], ["见附件中的 transfer/transfer6.in", "见附件中的 transfer/transfer6.ans"], ["见附件中的 transfer/transfer7.in", "见附件中的 transfer/transfer7.ans"], ["见附件中的 transfer/transfer8.in", "见附件中的 transfer/transfer8.ans"], ["见附件中的 transfer/transfer9.in", "见附件中的 transfer/transfer9.ans"], ["见附件中的 transfer/transfer10.in", "见附件中的 transfer/transfer10.ans"], ["见附件中的 transfer/transfer11.in", "见附件中的 transfer/transfer11.ans"], ["见附件中的 transfer/transfer12.in", "见附件中的 transfer/transfer12.ans"], ["见附件中的 transfer/transfer13.in", "见附件中的 transfer/transfer13.ans"], ["见附件中的 transfer/transfer14.in", "见附件中的 transfer/transfer14.ans"], ["见附件中的 transfer/transfer15.in", "见附件中的 transfer/transfer15.ans"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2023", "O2优化"], "title": "[省选联考 2023] 人员调度", "background": "**滥用本题评测将封号**。", "description": "众所周知，一个公司的 $n$ 个部门可以组织成一个树形结构。形式化地，假设这些部门依次编号为 $1, \\ldots, n$，那么除了 $1$ 号部门以外，第 $i \\in [2, n]$ 个部门**有且仅有**一个上级部门 $p_i \\in [1, i - 1]$。这样，这家公司的 $n$ 个部门可以视为一个以 $1$ 为根的树。如果 $i$ 是 $j$ 子树中的点，那么称部门 $i$ 是部门 $j$ 的子部门。\n\n该公司初始时有 $k$ 名优秀员工，编号依次为 $1 \\ldots k$。第 $i$ 名优秀员工初始时在第 $x_i$ 个部门工作，并且其有一个能力值 $v_i > 0$。\n\n为了最大化公司的运作效率，公司老板 0/\\\\/\\G 决定进行一些人员调动。具体来说，可以将编号为 $i$ 的优秀员工调动到 $x_i$ 的一个子部门，或者不调度（此时该员工在 $x_i$ 部门）。随后，优秀员工们会在其所在的部门竞选部门领导——能力值最高者将担任这一职位，并给公司带来等同于其能力值的贡献。如果一个部门一个优秀员工也没有，那么就无法选出部门领导，从而对公司的贡献将是 $0$。此时，公司的业绩被定义为公司各部门的贡献之和。\n\n公司老板 0/\\\\/\\G 自然想知道，该如何进行人员调动，使公司的业绩最大？\n\n这当然难不倒他，然而，公司优秀员工的数量也会发生变化；具体来说，会依次发生 $m$ 个事件，每个事件形如：\n\n- `1 x v`：先令 $k = k + 1$，然后新增一位编号为 $k$、初始部门为 $x$、能力值为 $v$ 的优秀员工；\n- `2 id`：编号为 $\\mathit{id}$ 的优秀员工将被辞退。\n\n公司老板 0/\\\\/\\G 希望你能在最开始和每个事件发生后，告诉他公司的业绩最大可能是多少？\n\n注意，每次人员调动都是独立的，也就是每次计算公司的最大可能业绩时，每个优秀员工都会回到其所在的初始部门。\n", "inputFormat": "输入的第一行包含一个正整数 $\\mathit{sid}$，表示该测试点对应的数据范围以及特殊性质，详见后表；\n\n输入的第二行包含三个整数 $n, k, m$，分别表示部门数，初始优秀员工数和事件数。\n\n输入的第三行包含 $n - 1$ 个正整数 $p_2, \\ldots, p_n$，表示每个部门的上级部门。\n\n接下来 $k$ 行，每行包含两个正整数 $x_i, v_i$，表示优秀员工的初始部门和能力值。\n\n接下来 $m$ 行，每行形如 `1 x v` 或 `2 id` 表示一次事件。\n", "outputFormat": "输出一行包含 $m + 1$ 个由单个空格隔开的非负整数，依次表示最开始和每个事件发生后，公司的业绩可能的最大值。\n", "hint": "**【数据范围】**\n\n对于所有的数据，保证：$1 \\le \\mathit{sid} \\le 15$，$1 \\le n, k \\le 10^5$，$0 \\le m \\le 10^5$，$1 \\le p_i < i$，$1 \\le x_i, x \\le n$，$1 \\le v_i, v \\le 10^5$。\n\n对于事件 2，保证：$1 \\le \\mathit{id} \\le k$ 且编号为 $\\mathit{id}$ 的员工在此事件发生时仍在工作。\n\n|测试点编号|$\\mathit{sid}$|$n \\le$|$k \\le$|$m \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|1|$1$|$6$|$6$|$6$|无|\n|2, 3|$2$|$9$|$6$|$6$|无|\n|4, 5|$3$|$16$|$66$|$66$|无|\n|6 ~ 8|$4$|$66$|$66$|$0$|无|\n|9 ~ 11|$5$|$2,333$|$2,333$|$0$|无|\n|12 ~ 14|$6$|$10^5$|$10^5$|$0$|B|\n|15 ~ 18|$7$|$10^5$|$10^5$|$0$|无|\n|19 ~ 21|$8$|$2,333$|$2,333$|$2,333$|A|\n|22 ~ 24|$9$|$10^5$|$10^5$|$10^5$|AB|\n|25 ~ 28|$10$|$10^5$|$10^5$|$10^5$|A|\n|29 ~ 31|$11$|$2,333$|$2,333$|$2,333$|无|\n|32 ~ 34|$12$|$10^5$|$10^5$|$10^5$|C|\n|35 ~ 38|$13$|$10^5$|$10^5$|$10^5$|B|\n|39 ~ 44|$14$|$66,666$|$66,666$|$66,666$|无|\n|45 ~ 50|$15$|$10^5$|$10^5$|$10^5$|无|\n\n特殊性质 A：无事件 2；\n\n特殊性质 B：$p_i = i - 1$；\n\n特殊性质 C：$v_i = v = 1$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2023] 人员调度", "background": "**滥用本题评测将封号**。", "description": "众所周知，一个公司的 $n$ 个部门可以组织成一个树形结构。形式化地，假设这些部门依次编号为 $1, \\ldots, n$，那么除了 $1$ 号部门以外，第 $i \\in [2, n]$ 个部门**有且仅有**一个上级部门 $p_i \\in [1, i - 1]$。这样，这家公司的 $n$ 个部门可以视为一个以 $1$ 为根的树。如果 $i$ 是 $j$ 子树中的点，那么称部门 $i$ 是部门 $j$ 的子部门。\n\n该公司初始时有 $k$ 名优秀员工，编号依次为 $1 \\ldots k$。第 $i$ 名优秀员工初始时在第 $x_i$ 个部门工作，并且其有一个能力值 $v_i > 0$。\n\n为了最大化公司的运作效率，公司老板 0/\\\\/\\G 决定进行一些人员调动。具体来说，可以将编号为 $i$ 的优秀员工调动到 $x_i$ 的一个子部门，或者不调度（此时该员工在 $x_i$ 部门）。随后，优秀员工们会在其所在的部门竞选部门领导——能力值最高者将担任这一职位，并给公司带来等同于其能力值的贡献。如果一个部门一个优秀员工也没有，那么就无法选出部门领导，从而对公司的贡献将是 $0$。此时，公司的业绩被定义为公司各部门的贡献之和。\n\n公司老板 0/\\\\/\\G 自然想知道，该如何进行人员调动，使公司的业绩最大？\n\n这当然难不倒他，然而，公司优秀员工的数量也会发生变化；具体来说，会依次发生 $m$ 个事件，每个事件形如：\n\n- `1 x v`：先令 $k = k + 1$，然后新增一位编号为 $k$、初始部门为 $x$、能力值为 $v$ 的优秀员工；\n- `2 id`：编号为 $\\mathit{id}$ 的优秀员工将被辞退。\n\n公司老板 0/\\\\/\\G 希望你能在最开始和每个事件发生后，告诉他公司的业绩最大可能是多少？\n\n注意，每次人员调动都是独立的，也就是每次计算公司的最大可能业绩时，每个优秀员工都会回到其所在的初始部门。\n", "inputFormat": "输入的第一行包含一个正整数 $\\mathit{sid}$，表示该测试点对应的数据范围以及特殊性质，详见后表；\n\n输入的第二行包含三个整数 $n, k, m$，分别表示部门数，初始优秀员工数和事件数。\n\n输入的第三行包含 $n - 1$ 个正整数 $p_2, \\ldots, p_n$，表示每个部门的上级部门。\n\n接下来 $k$ 行，每行包含两个正整数 $x_i, v_i$，表示优秀员工的初始部门和能力值。\n\n接下来 $m$ 行，每行形如 `1 x v` 或 `2 id` 表示一次事件。\n", "outputFormat": "输出一行包含 $m + 1$ 个由单个空格隔开的非负整数，依次表示最开始和每个事件发生后，公司的业绩可能的最大值。\n", "hint": "**【数据范围】**\n\n对于所有的数据，保证：$1 \\le \\mathit{sid} \\le 15$，$1 \\le n, k \\le 10^5$，$0 \\le m \\le 10^5$，$1 \\le p_i < i$，$1 \\le x_i, x \\le n$，$1 \\le v_i, v \\le 10^5$。\n\n对于事件 2，保证：$1 \\le \\mathit{id} \\le k$ 且编号为 $\\mathit{id}$ 的员工在此事件发生时仍在工作。\n\n|测试点编号|$\\mathit{sid}$|$n \\le$|$k \\le$|$m \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|1|$1$|$6$|$6$|$6$|无|\n|2, 3|$2$|$9$|$6$|$6$|无|\n|4, 5|$3$|$16$|$66$|$66$|无|\n|6 ~ 8|$4$|$66$|$66$|$0$|无|\n|9 ~ 11|$5$|$2,333$|$2,333$|$0$|无|\n|12 ~ 14|$6$|$10^5$|$10^5$|$0$|B|\n|15 ~ 18|$7$|$10^5$|$10^5$|$0$|无|\n|19 ~ 21|$8$|$2,333$|$2,333$|$2,333$|A|\n|22 ~ 24|$9$|$10^5$|$10^5$|$10^5$|AB|\n|25 ~ 28|$10$|$10^5$|$10^5$|$10^5$|A|\n|29 ~ 31|$11$|$2,333$|$2,333$|$2,333$|无|\n|32 ~ 34|$12$|$10^5$|$10^5$|$10^5$|C|\n|35 ~ 38|$13$|$10^5$|$10^5$|$10^5$|B|\n|39 ~ 44|$14$|$66,666$|$66,666$|$66,666$|无|\n|45 ~ 50|$15$|$10^5$|$10^5$|$10^5$|无|\n\n特殊性质 A：无事件 2；\n\n特殊性质 B：$p_i = i - 1$；\n\n特殊性质 C：$v_i = v = 1$。\n", "locale": "zh-CN"}}}
{"pid": "P9169", "type": "P", "difficulty": 6, "samples": [["0 5\n4 5\n...#O\n.#..#\n#O#..\n.#..X\n3 3\n#.#\nO.O\n.X.\n3 3\nO..\n.#X\n.O.\n5 5\n.....\n.....\n..O..\n#..#.\nO#.X.\n9 9\n...######\n.#.......\n.#######.\n.#.#.....\n.#O#.####\n.#.#.....\n.#######.\n.#X......\n.O.......\n", "Black 0\nBlack 2\nBlack 2\nTie\nRed 75\n"], ["见附件中的 zu/zu2.in", "见附件中的 zu/zu2.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["博弈论", "各省省选", "2023", "O2优化", "广度优先搜索 BFS", "拓扑排序"], "title": "[省选联考 2023] 过河卒", "background": "棋盘上有一个过河卒，需要走到底线。卒行走的规则是可以向左移动一格，向右移动一格或者向前移动一格。同时在棋盘上有两个另一方的棋子，需要拦截这个卒走到底线。这两个棋子的走法和帅一致，可以走到前后左右四个方向上相邻的格子。因此本题可以称为“帅拦过河卒”。", "description": "有一个 $n$ 行 $m$ 列的棋盘。我们用 $(i,j)$ 表示第 $i$ 行第 $j$ 列的位置。棋盘上有一些障碍，还有一个黑棋子和两个红棋子。\n\n游戏的规则是这样的：红方先走，黑方后走，双方轮流走棋。红方每次可以选择一个红棋子，向棋盘的相邻一格走一步。具体而言，假设红方选择的这个棋子位置在 $(i,j)$，那么它可以走到 $(i-1,j),(i+1,j),(i,j-1),(i,j+1)$ 中的一个，只要这个目的地在棋盘内且没有障碍且没有红方的另一个棋子。\n\n黑方每次可以将自己的棋子向三个方向之一移动一格。具体地，假设这个黑棋子位置在 $(i,j)$，那么它可以走到 $(i-1,j),(i,j-1),(i,j+1)$ 这三个格子中的一个，只要这个目的地在棋盘内且没有障碍。\n\n在一方行动之前，如果发生以下情况之一，则立即结束游戏，按照如下的规则判断胜负（列在前面的优先）：\n\n- 黑棋子位于第一行。此时黑方胜。\n\n- 黑棋子和其中一个红棋子在同一个位置上。此时进行上一步移动的玩家胜。\n\n- 当前玩家不能进行任何合法操作。此时对方胜。\n\n现在假设双方采用最优策略，不会进行不利于自己的移动。也就是说:\n\n- 若存在必胜策略，则会选择所有必胜策略中，不论对方如何操作，本方后续获胜所需步数最大值最少的操作。\n- 若不存在必胜策略，但存在不论对方如何行动，自己都不会落败的策略，则会选择任意一种不败策略。\n- 若不存在不败策略，则会选择在所有策略中，不论对方如何操作，对方后续获胜所需步数最小值最大的操作。\n\n如果在 $100^{100^{100}}$ 个回合之后仍不能分出胜负，则认为游戏平局。请求出游戏结束时双方一共移动了多少步，或者判断游戏平局。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含两个整数 $\\text{id},T$，分别表示测试点编号和数据组数。特别地，样例的 $\\text{id}$ 为 $0$。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含两个正整数 $n,m$，表示棋盘的行数和列数。\n\n接下来 $n$ 行，每行包含一个长度为 $m$ 的字符串，其中第 $i$ 行的第 $j$ 个字符表示棋盘上 $(i,j)$ 这个位置的状态。\n\n在这些字符中：$\\texttt{'.'}$ 表示空位；$\\texttt{'\\#'}$ 表示障碍物；$\\texttt{'X'}$ 表示黑棋；$\\texttt{'O'}$ 表示红棋。\n\n保证黑棋恰好有一个，红棋恰好有两个，且黑棋不在第一行。", "outputFormat": "对于每组数据，输出一行字符串。\n\n如果游戏平局，请输出一行 $\\texttt{\"Tie\"}$。\n\n如果红方胜，请输出一行 $\\texttt{\"Red t\"}$。其中 $\\texttt{t}$ 为游戏结束时双方移动的步数之和。显然这应该是一个奇数。\n\n如果黑方胜，请输出一行 $\\texttt{\"Black t\"}$。其中 $\\texttt{t}$ 为游戏结束时双方移动的步数之和。显然这应该是一个偶数。\n\n注意，请输出双引号内的字符串，不包含双引号。", "hint": "**【样例 1 解释】**\n\n第一组数据，红方第一步没有可行的移动，所以黑方胜。\n\n第二组数据，无论第一步红方怎么移动，黑方都可以在下一步让黑棋子与红棋子在同一个位置。\n\n第三组数据，无论第一步红方怎么移动，黑方都可以将自己的棋子往上移动一枚来达成胜利。\n\n第四组数据，有一个红棋子不能动。另一个红棋子可以在第三行移动来防止黑棋子进入第一行。黑棋子也可以一直在第五行移动。如果红棋子到达第五行，黑棋子可以选择从另一边逃走。\n\n第五组数据，在最后一行的那个红棋子可以从左边绕一圈抓住黑棋子。注意另一个红棋子可以移动。\n\n**【样例 2 解释】**\n\n这个样例中的每一组数据都满足测试点 $5$ 到 $13$ 中某一个测试点的限制。\n\n**【子任务】**\n\n对于所有的数据，保证：$1 \\leq T \\leq 10$，$2 \\leq n \\leq 10$，$1 \\leq m \\leq 10$，$\\text{id}$ 等于测试点编号。\n\n对于每组数据保证：棋盘上的黑棋恰好有一个，红棋恰好有两个，且黑棋不在第一 行。\n\n- 测试点 $1 \\sim 4$：保证要么平局，要么红方在开始时无法移动。\n\n- 测试点 $5 \\sim 6$：保证 $n \\geq 4$ 。保证棋盘上第 $n-1$ 行的每一个格子都是障碍物，且 棋盘上其他行没有障碍物。保证黑棋在前 $n-2$ 行，有一个红棋在前 $n-2$ 行，另一个红棋在第 $n$ 行。\n\n- 测试点 $7 \\sim 9$：保证 $m=1$。\n\n- 测试点 $10 \\sim 13$：保证要么平局，要么存在策略可以在 $9$ 步之内结束游戏。\n\n- 测试点 $14 \\sim 20$：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2023] 过河卒", "background": "棋盘上有一个过河卒，需要走到底线。卒行走的规则是可以向左移动一格，向右移动一格或者向前移动一格。同时在棋盘上有两个另一方的棋子，需要拦截这个卒走到底线。这两个棋子的走法和帅一致，可以走到前后左右四个方向上相邻的格子。因此本题可以称为“帅拦过河卒”。", "description": "有一个 $n$ 行 $m$ 列的棋盘。我们用 $(i,j)$ 表示第 $i$ 行第 $j$ 列的位置。棋盘上有一些障碍，还有一个黑棋子和两个红棋子。\n\n游戏的规则是这样的：红方先走，黑方后走，双方轮流走棋。红方每次可以选择一个红棋子，向棋盘的相邻一格走一步。具体而言，假设红方选择的这个棋子位置在 $(i,j)$，那么它可以走到 $(i-1,j),(i+1,j),(i,j-1),(i,j+1)$ 中的一个，只要这个目的地在棋盘内且没有障碍且没有红方的另一个棋子。\n\n黑方每次可以将自己的棋子向三个方向之一移动一格。具体地，假设这个黑棋子位置在 $(i,j)$，那么它可以走到 $(i-1,j),(i,j-1),(i,j+1)$ 这三个格子中的一个，只要这个目的地在棋盘内且没有障碍。\n\n在一方行动之前，如果发生以下情况之一，则立即结束游戏，按照如下的规则判断胜负（列在前面的优先）：\n\n- 黑棋子位于第一行。此时黑方胜。\n\n- 黑棋子和其中一个红棋子在同一个位置上。此时进行上一步移动的玩家胜。\n\n- 当前玩家不能进行任何合法操作。此时对方胜。\n\n现在假设双方采用最优策略，不会进行不利于自己的移动。也就是说:\n\n- 若存在必胜策略，则会选择所有必胜策略中，不论对方如何操作，本方后续获胜所需步数最大值最少的操作。\n- 若不存在必胜策略，但存在不论对方如何行动，自己都不会落败的策略，则会选择任意一种不败策略。\n- 若不存在不败策略，则会选择在所有策略中，不论对方如何操作，对方后续获胜所需步数最小值最大的操作。\n\n如果在 $100^{100^{100}}$ 个回合之后仍不能分出胜负，则认为游戏平局。请求出游戏结束时双方一共移动了多少步，或者判断游戏平局。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含两个整数 $\\text{id},T$，分别表示测试点编号和数据组数。特别地，样例的 $\\text{id}$ 为 $0$。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含两个正整数 $n,m$，表示棋盘的行数和列数。\n\n接下来 $n$ 行，每行包含一个长度为 $m$ 的字符串，其中第 $i$ 行的第 $j$ 个字符表示棋盘上 $(i,j)$ 这个位置的状态。\n\n在这些字符中：$\\texttt{'.'}$ 表示空位；$\\texttt{'\\#'}$ 表示障碍物；$\\texttt{'X'}$ 表示黑棋；$\\texttt{'O'}$ 表示红棋。\n\n保证黑棋恰好有一个，红棋恰好有两个，且黑棋不在第一行。", "outputFormat": "对于每组数据，输出一行字符串。\n\n如果游戏平局，请输出一行 $\\texttt{\"Tie\"}$。\n\n如果红方胜，请输出一行 $\\texttt{\"Red t\"}$。其中 $\\texttt{t}$ 为游戏结束时双方移动的步数之和。显然这应该是一个奇数。\n\n如果黑方胜，请输出一行 $\\texttt{\"Black t\"}$。其中 $\\texttt{t}$ 为游戏结束时双方移动的步数之和。显然这应该是一个偶数。\n\n注意，请输出双引号内的字符串，不包含双引号。", "hint": "**【样例 1 解释】**\n\n第一组数据，红方第一步没有可行的移动，所以黑方胜。\n\n第二组数据，无论第一步红方怎么移动，黑方都可以在下一步让黑棋子与红棋子在同一个位置。\n\n第三组数据，无论第一步红方怎么移动，黑方都可以将自己的棋子往上移动一枚来达成胜利。\n\n第四组数据，有一个红棋子不能动。另一个红棋子可以在第三行移动来防止黑棋子进入第一行。黑棋子也可以一直在第五行移动。如果红棋子到达第五行，黑棋子可以选择从另一边逃走。\n\n第五组数据，在最后一行的那个红棋子可以从左边绕一圈抓住黑棋子。注意另一个红棋子可以移动。\n\n**【样例 2 解释】**\n\n这个样例中的每一组数据都满足测试点 $5$ 到 $13$ 中某一个测试点的限制。\n\n**【子任务】**\n\n对于所有的数据，保证：$1 \\leq T \\leq 10$，$2 \\leq n \\leq 10$，$1 \\leq m \\leq 10$，$\\text{id}$ 等于测试点编号。\n\n对于每组数据保证：棋盘上的黑棋恰好有一个，红棋恰好有两个，且黑棋不在第一 行。\n\n- 测试点 $1 \\sim 4$：保证要么平局，要么红方在开始时无法移动。\n\n- 测试点 $5 \\sim 6$：保证 $n \\geq 4$ 。保证棋盘上第 $n-1$ 行的每一个格子都是障碍物，且 棋盘上其他行没有障碍物。保证黑棋在前 $n-2$ 行，有一个红棋在前 $n-2$ 行，另一个红棋在第 $n$ 行。\n\n- 测试点 $7 \\sim 9$：保证 $m=1$。\n\n- 测试点 $10 \\sim 13$：保证要么平局，要么存在策略可以在 $9$ 步之内结束游戏。\n\n- 测试点 $14 \\sim 20$：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9170", "type": "P", "difficulty": 7, "samples": [["1\n3 4\n1 3\n2 1 2\n2 3 4\n2 1 2\n2 2 3\n2 3 4\n", "1\n"], ["见附件中的 game/game2.in", "见附件中的 game/game2.ans"], ["见附件中的 game/game3.in", "见附件中的 game/game3.ans"], ["见附件中的 game/game4.in", "见附件中的 game/game4.ans"], ["见附件中的 game/game5.in", "见附件中的 game/game5.ans"], ["见附件中的 game/game6.in", "见附件中的 game/game6.ans"], ["见附件中的 game/game7.in", "见附件中的 game/game7.ans"], ["见附件中的 game/game8.in", "见附件中的 game/game8.ans"], ["见附件中的 game/game9.in", "见附件中的 game/game9.ans"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2023", "O2优化"], "title": "[省选联考 2023] 填数游戏", "background": "", "description": "众所周知，Alice 和 Bob 是一对好朋友。今天，他们约好一起玩游戏。\n\n一开始，他们各自有一张空白的纸条。接下来，他们会在纸条上依次写 $n$ 个 $[1,m]$ 范围内的正整数。等 Alice 写完，Bob **在看到 Alice 写的纸条之后开始写他的纸条**。\n\nAlice 需要保证她写下的第 $i$ 个数在集合 $S_{i}$ 中，Bob 需要保证他写下的第 $i$ 个数在集合 $T_{i}$ 中。**题目保证** $1 \\leq\\left|S_{i}\\right|,\\left|T_{i}\\right| \\leq 2$ 。\n\nAlice 喜欢相同，因此，她希望她写下的数与 Bob 写下的数对应位置相同的个数尽量多。Bob 喜欢不同，因此，他希望他写下的 $n$ 个数 $b_{1}, \\ldots, b_{n}$ 互不相同。在此基础上，Bob 希望他写下的数与 Alice 写下的数对应位置相同的个数尽量少。\n\n即设 Alice 写下的数为 $a_{1}, \\ldots, a_{n}$，Bob 写下的数为 $b_{1}, \\ldots, b_{n}$，记 $X$ 为满足 $1 \\leq i \\leq n, a_{i}=b_{i}$ 的下标 $i$ 的个数，则\n\n- Alice 希望最大化 $X,$\n- Bob 在**保证 $b_{1}, \\ldots, b_{n}$ 互不相同的前提下**希望最小化 $X$。\n\n你首先想知道 Bob 能否保证他写下的 $n$ 个数互不相同。如果 Bob 能够做到，你想知道**在双方均采取最优策略的前提下** $X$ 的值会是多少。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含两个正整数 $n,m$，表示纸条上需要写的数的个数和数的值域。\n\n接下来 $n$ 行，每行输入的第一个整数为 $\\left|S_{i}\\right|$ 表示集合 $S_{i}$ 的元素个数，接下来输入 $\\left|S_{i}\\right|$ 个正整数描述 $S_{i}$ 中的元素。\n\n接下来 $n$ 行，每行输入的第一个整数为 $\\left|T_{i}\\right|$ 表示集合 $T_{i}$ 的元素个数，接下来输入 $\\left|T_{i}\\right|$ 个正整数描述 $T_{i}$ 中的元素。", "outputFormat": "对于每组测试数据输出一行：若 Bob 无法做到他写下的 $n$ 个数互不相同，输出 `-1`；否则输出在双方均予取最优策略的前提下 $X$ 的值。", "hint": "**【样例 1 解释】**\n\n在这组样例中，$S_{1}=\\{3\\}, S_{2}=T_{1}=\\{1,2\\}, S_{3}=T_{3}=\\{3,4\\}, T_{2}=\\{2,3\\}$。Alice 的填法有 $4$ 种，列举如下：\n\n第一种：$a_{1}=3,a_{2}=1,a_{3}=3$。\n\n第二种：$a_{1}=3,a_{2}=1,a_{3}=4$。\n\n第三种：$a_{1}=3,a_{2}=2,a_{3}=3$。\n\n第四种：$a_{1}=3,a_{2}=2,a_{3}=4$。\n\n由于 Bob 必须保证他所填的数互不相同，所以他有以下填法:\n\n第一种：$b_{1}=1,b_{2}=2,b_{3}=3$。\n\n第二种：$b_{1}=2,b_{3}=3,b_{3}=4$。\n\n第三种：$b_{1}=1,b_{2}=2,b_{3}=4$。\n\n第四种：$b_{1}=1,b_{2}=3,b_{3}=4$。\n\n若 Alice 选择第一种填法，则 Bob 为最小化 $X$，选择第二种填法，得到 $X=0$。\n\n若 Alice 选择第二种填法，则 Bob 为最小化 $X$，选择第一种填法，得到 $X=0$。\n\n若 Alice 选择第三种填法，则 Bob 为最小化 $X$，选择第一种填法，得到 $X=0$。\n\n若 Alice 选择第四种填法，则 Bob 无论选择哪种填法，$X$ 均不小于 $1$。\n\n因此，Alice 为最大化 $X$ 的值，她会选择第四种填法。\n\n**【子任务】**\n\n表格中 $\\sum n,\\sum m$ 分别表示同个测试点内所有测试数据的 $n$ 总和和 $m$ 总和。 $\\sum n^{2}, \\sum m^{2}, \\sum n^{3}, \\sum m^{3}$ 的含义类似。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nbt12df0.png)\n\n特殊性质 A：对于任何 $1 \\leq i \\leq n,S_i$ 和 $T_i$ 互不相交，即 $S_i \\cap T_i=\\emptyset$。\n\n特殊性质 B：$n \\geq 3$，且对于任何 $1 \\leq i<n, T_{1} =\\{i,i+1\\}$，且 $T_{n}=\\{n,1\\}$。\n\n特殊性质 C：对于任何 $1 \\leq i \\leq n,|S_i|=1$。\n\n特殊性质 D：对于任何 $1 \\leq i \\leq n,S_{i}=T_{i}$。\n\n**【提示】**\n\n本题部分测试点读入规模较大，我们建议你采取效率较高的读入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2023] 填数游戏", "background": "", "description": "众所周知，Alice 和 Bob 是一对好朋友。今天，他们约好一起玩游戏。\n\n一开始，他们各自有一张空白的纸条。接下来，他们会在纸条上依次写 $n$ 个 $[1,m]$ 范围内的正整数。等 Alice 写完，Bob **在看到 Alice 写的纸条之后开始写他的纸条**。\n\nAlice 需要保证她写下的第 $i$ 个数在集合 $S_{i}$ 中，Bob 需要保证他写下的第 $i$ 个数在集合 $T_{i}$ 中。**题目保证** $1 \\leq\\left|S_{i}\\right|,\\left|T_{i}\\right| \\leq 2$ 。\n\nAlice 喜欢相同，因此，她希望她写下的数与 Bob 写下的数对应位置相同的个数尽量多。Bob 喜欢不同，因此，他希望他写下的 $n$ 个数 $b_{1}, \\ldots, b_{n}$ 互不相同。在此基础上，Bob 希望他写下的数与 Alice 写下的数对应位置相同的个数尽量少。\n\n即设 Alice 写下的数为 $a_{1}, \\ldots, a_{n}$，Bob 写下的数为 $b_{1}, \\ldots, b_{n}$，记 $X$ 为满足 $1 \\leq i \\leq n, a_{i}=b_{i}$ 的下标 $i$ 的个数，则\n\n- Alice 希望最大化 $X,$\n- Bob 在**保证 $b_{1}, \\ldots, b_{n}$ 互不相同的前提下**希望最小化 $X$。\n\n你首先想知道 Bob 能否保证他写下的 $n$ 个数互不相同。如果 Bob 能够做到，你想知道**在双方均采取最优策略的前提下** $X$ 的值会是多少。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含两个正整数 $n,m$，表示纸条上需要写的数的个数和数的值域。\n\n接下来 $n$ 行，每行输入的第一个整数为 $\\left|S_{i}\\right|$ 表示集合 $S_{i}$ 的元素个数，接下来输入 $\\left|S_{i}\\right|$ 个正整数描述 $S_{i}$ 中的元素。\n\n接下来 $n$ 行，每行输入的第一个整数为 $\\left|T_{i}\\right|$ 表示集合 $T_{i}$ 的元素个数，接下来输入 $\\left|T_{i}\\right|$ 个正整数描述 $T_{i}$ 中的元素。", "outputFormat": "对于每组测试数据输出一行：若 Bob 无法做到他写下的 $n$ 个数互不相同，输出 `-1`；否则输出在双方均予取最优策略的前提下 $X$ 的值。", "hint": "**【样例 1 解释】**\n\n在这组样例中，$S_{1}=\\{3\\}, S_{2}=T_{1}=\\{1,2\\}, S_{3}=T_{3}=\\{3,4\\}, T_{2}=\\{2,3\\}$。Alice 的填法有 $4$ 种，列举如下：\n\n第一种：$a_{1}=3,a_{2}=1,a_{3}=3$。\n\n第二种：$a_{1}=3,a_{2}=1,a_{3}=4$。\n\n第三种：$a_{1}=3,a_{2}=2,a_{3}=3$。\n\n第四种：$a_{1}=3,a_{2}=2,a_{3}=4$。\n\n由于 Bob 必须保证他所填的数互不相同，所以他有以下填法:\n\n第一种：$b_{1}=1,b_{2}=2,b_{3}=3$。\n\n第二种：$b_{1}=2,b_{3}=3,b_{3}=4$。\n\n第三种：$b_{1}=1,b_{2}=2,b_{3}=4$。\n\n第四种：$b_{1}=1,b_{2}=3,b_{3}=4$。\n\n若 Alice 选择第一种填法，则 Bob 为最小化 $X$，选择第二种填法，得到 $X=0$。\n\n若 Alice 选择第二种填法，则 Bob 为最小化 $X$，选择第一种填法，得到 $X=0$。\n\n若 Alice 选择第三种填法，则 Bob 为最小化 $X$，选择第一种填法，得到 $X=0$。\n\n若 Alice 选择第四种填法，则 Bob 无论选择哪种填法，$X$ 均不小于 $1$。\n\n因此，Alice 为最大化 $X$ 的值，她会选择第四种填法。\n\n**【子任务】**\n\n表格中 $\\sum n,\\sum m$ 分别表示同个测试点内所有测试数据的 $n$ 总和和 $m$ 总和。 $\\sum n^{2}, \\sum m^{2}, \\sum n^{3}, \\sum m^{3}$ 的含义类似。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nbt12df0.png)\n\n特殊性质 A：对于任何 $1 \\leq i \\leq n,S_i$ 和 $T_i$ 互不相交，即 $S_i \\cap T_i=\\emptyset$。\n\n特殊性质 B：$n \\geq 3$，且对于任何 $1 \\leq i<n, T_{1} =\\{i,i+1\\}$，且 $T_{n}=\\{n,1\\}$。\n\n特殊性质 C：对于任何 $1 \\leq i \\leq n,|S_i|=1$。\n\n特殊性质 D：对于任何 $1 \\leq i \\leq n,S_{i}=T_{i}$。\n\n**【提示】**\n\n本题部分测试点读入规模较大，我们建议你采取效率较高的读入方式。", "locale": "zh-CN"}}}
{"pid": "P9171", "type": "P", "difficulty": 7, "samples": [["5\n6 10 6\n1 9 3 4 7 6\n5 8 4\n1 7 2 6\n9 10 2\n3 6\n6 11 6\n1 7 5 8 3 9\n9 10 5\n5 10 6 4 7\n", "1 63\n8 245\n29378 1267731\n1 17\n78 1820\n"], ["见附件中的 color/color2.in", "见附件中的 color/color2.ans"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2023", "Special Judge", "O2优化", "组合数学"], "title": "[省选联考 2023] 染色数组", "background": "", "description": "给定一个长度为 $n$ 的正整数数组 $A$，其中每个数都在 $1$ 到 $m$ 之间，从左到右排成一排。现在要将每个数字染成红色或者绿色，我们定义一个染色方案为优秀的染色方案，当且仅当它满足：\n\n1. 每个数 $A_{i}$ 要么被染成红色，要么被染成绿色。\n2. 红色的数从左到右依次严格递增，绿色的数从左到右依次严格递减。\n\n例如：$1\\;9\\;3\\;4\\;7\\;6$ 中，将 $1\\;3\\;4\\;7$ 染成红色，$9\\;6$ 染成绿色是优秀的染色方案（$\\color{red}1\\color{green}9\\color{red}347\\color{green}6$）；$1\\;3\\;4\\;6$ 染成红色，$9\\;7$ 染成绿色也是优秀的染色方案（$\\color{red}1\\color{green}9\\color{red}34\\color{green}7\\color{red}6$）。但是将 $1\\;4\\;7\\;6$ 染成红色，$9\\;3$ 染成绿色则**不是**优秀的染色方案，因为 $1\\;4\\;7\\;6$ 不是递增的。$1\\;9\\;5\\;5$ 中，将 $1$ 和任意一个 $5$ 染色红色，$9$ 和另一个 $5$ 染成绿色，也是优秀的染色方案（其中一种是 $\\color{red}1\\color{green}95\\color{red}5$）。\n\n如果一个数组**至少存在两个不同的**优秀的染色方案，那么称这个数组是**完美**的。（两个染色方案不同当且仅当至少存在一个位置上的数字被染成不同的颜色）。\n\n例如，$1\\;9\\;3\\;4\\;7\\;6$ 和 $1\\;9\\;5\\;5$ 都是完美的，因为上面已经分别给出了 $2$ 种优秀的染色方案。而 $2\\;3\\;3\\;3$ 则不是完美的，因为找不到任何一种优秀的染色方案。同时 $1\\;5\\;3\\;6\\;4$ 也不是完美的，因为仅存在一种优秀的染色方案（$\\color{red}1\\color{green}5\\color{red}36\\color{green}4$）。\n\n补充说明：如果红色的数只有 $0$ 个或者 $1$ 个，我们也认为它严格递增；同理如果绿色的数只有 $0$ 个或者 $1$ 个，我们也认为它严格递减。例如 $\\color{red}123$，$\\color{red}1\\color{green}2\\color{red}3$ 都是优秀的的染色方案，因此 $1\\;2\\;3$ 是完美的数组。\n\n我们定义一种给染色方案打分的方式。\n\n对于每个的有序元素对 $A_{i}, A_{j}(i<j)$ :\n\n1. 如果 $A_{j}$ 染成红色，且 $A_{j}<A_{i}$，则该元素对得 $m-A_{j}+1$ 分;\n2. 如果 $A_{j}$ 染成绿色，且 $A_{j}>A_{i}$，则该元素对得 $A_{j}$ 分;\n3. 不满足 1 或 2 ，则该元素对得 $0$ 分。\n\n则一个染色方案的得分为所有有序元素对的得分和。\n\n一个完美的数组的得分为它所有优秀的染色方案的得分的最大值。\n\n现在确定数组 $A$ 的前 $t$ 个数 $A_{1}, A_{2}, \\ldots, A_{t}$, 你需要回答以下两个问题:\n\n- 第一问：有多少种确定 $A$ 中后 $n-t$ 个数的方案使得 $A$ 是一个完美数组？\n- 第二问：所有可能的完美数组的得分和是多少？\n\n由于答案太大，你只需要输出答案在模 $998244353$ 下的结果即可。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $C$，表示数据组数。\n\n接下来包含 $C$ 组数据，每组数据的格式如下：\n\n第一行包含三个整数 $n, m, t$，分别表示数组长度，数组内数字的最大值和确定的前缀长度。\n\n第二行包含 $t$ 个正整数 $A_{1} \\ldots A_{t}$，表示已经确定的前缀。", "outputFormat": "对于每组测试数据输出一行包含两个用单个空格隔开的整数。\n\n- 第一个整数表示优秀数组的数量模 $998244353$ 的值；\n\n- 第二个整数表示优秀数组的得分之和模 $998244353$ 的值。", "hint": "**【评分方式】**\n\n每个测试点 $5$ 分。\n\n每一行应按顺序输出两问的答案，不符合输出格式的输出得 $0$ 分。\n\n程序仅回答对第一问得 $1$ 分，仅回答对第二问得 $4$ 分，两问都答对得 $5$ 分。\n\n如果你不回答第一问或第二问，也需要在对应位置上输出任意一个整数以满足输出格式。\n\n**【子任务】**\n\n对于所有的数据，保证： $1 \\leq C \\leq 5$；$2 \\leq n \\leq 50$；$1 \\leq t \\leq n$；$1 \\leq m \\leq 200$；$1 \\leq A_{i} \\leq m$ 。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/swc3o5bm.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2023] 染色数组", "background": "", "description": "给定一个长度为 $n$ 的正整数数组 $A$，其中每个数都在 $1$ 到 $m$ 之间，从左到右排成一排。现在要将每个数字染成红色或者绿色，我们定义一个染色方案为优秀的染色方案，当且仅当它满足：\n\n1. 每个数 $A_{i}$ 要么被染成红色，要么被染成绿色。\n2. 红色的数从左到右依次严格递增，绿色的数从左到右依次严格递减。\n\n例如：$1\\;9\\;3\\;4\\;7\\;6$ 中，将 $1\\;3\\;4\\;7$ 染成红色，$9\\;6$ 染成绿色是优秀的染色方案（$\\color{red}1\\color{green}9\\color{red}347\\color{green}6$）；$1\\;3\\;4\\;6$ 染成红色，$9\\;7$ 染成绿色也是优秀的染色方案（$\\color{red}1\\color{green}9\\color{red}34\\color{green}7\\color{red}6$）。但是将 $1\\;4\\;7\\;6$ 染成红色，$9\\;3$ 染成绿色则**不是**优秀的染色方案，因为 $1\\;4\\;7\\;6$ 不是递增的。$1\\;9\\;5\\;5$ 中，将 $1$ 和任意一个 $5$ 染色红色，$9$ 和另一个 $5$ 染成绿色，也是优秀的染色方案（其中一种是 $\\color{red}1\\color{green}95\\color{red}5$）。\n\n如果一个数组**至少存在两个不同的**优秀的染色方案，那么称这个数组是**完美**的。（两个染色方案不同当且仅当至少存在一个位置上的数字被染成不同的颜色）。\n\n例如，$1\\;9\\;3\\;4\\;7\\;6$ 和 $1\\;9\\;5\\;5$ 都是完美的，因为上面已经分别给出了 $2$ 种优秀的染色方案。而 $2\\;3\\;3\\;3$ 则不是完美的，因为找不到任何一种优秀的染色方案。同时 $1\\;5\\;3\\;6\\;4$ 也不是完美的，因为仅存在一种优秀的染色方案（$\\color{red}1\\color{green}5\\color{red}36\\color{green}4$）。\n\n补充说明：如果红色的数只有 $0$ 个或者 $1$ 个，我们也认为它严格递增；同理如果绿色的数只有 $0$ 个或者 $1$ 个，我们也认为它严格递减。例如 $\\color{red}123$，$\\color{red}1\\color{green}2\\color{red}3$ 都是优秀的的染色方案，因此 $1\\;2\\;3$ 是完美的数组。\n\n我们定义一种给染色方案打分的方式。\n\n对于每个的有序元素对 $A_{i}, A_{j}(i<j)$ :\n\n1. 如果 $A_{j}$ 染成红色，且 $A_{j}<A_{i}$，则该元素对得 $m-A_{j}+1$ 分;\n2. 如果 $A_{j}$ 染成绿色，且 $A_{j}>A_{i}$，则该元素对得 $A_{j}$ 分;\n3. 不满足 1 或 2 ，则该元素对得 $0$ 分。\n\n则一个染色方案的得分为所有有序元素对的得分和。\n\n一个完美的数组的得分为它所有优秀的染色方案的得分的最大值。\n\n现在确定数组 $A$ 的前 $t$ 个数 $A_{1}, A_{2}, \\ldots, A_{t}$, 你需要回答以下两个问题:\n\n- 第一问：有多少种确定 $A$ 中后 $n-t$ 个数的方案使得 $A$ 是一个完美数组？\n- 第二问：所有可能的完美数组的得分和是多少？\n\n由于答案太大，你只需要输出答案在模 $998244353$ 下的结果即可。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $C$，表示数据组数。\n\n接下来包含 $C$ 组数据，每组数据的格式如下：\n\n第一行包含三个整数 $n, m, t$，分别表示数组长度，数组内数字的最大值和确定的前缀长度。\n\n第二行包含 $t$ 个正整数 $A_{1} \\ldots A_{t}$，表示已经确定的前缀。", "outputFormat": "对于每组测试数据输出一行包含两个用单个空格隔开的整数。\n\n- 第一个整数表示优秀数组的数量模 $998244353$ 的值；\n\n- 第二个整数表示优秀数组的得分之和模 $998244353$ 的值。", "hint": "**【评分方式】**\n\n每个测试点 $5$ 分。\n\n每一行应按顺序输出两问的答案，不符合输出格式的输出得 $0$ 分。\n\n程序仅回答对第一问得 $1$ 分，仅回答对第二问得 $4$ 分，两问都答对得 $5$ 分。\n\n如果你不回答第一问或第二问，也需要在对应位置上输出任意一个整数以满足输出格式。\n\n**【子任务】**\n\n对于所有的数据，保证： $1 \\leq C \\leq 5$；$2 \\leq n \\leq 50$；$1 \\leq t \\leq n$；$1 \\leq m \\leq 200$；$1 \\leq A_{i} \\leq m$ 。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/swc3o5bm.png)", "locale": "zh-CN"}}}
{"pid": "P9172", "type": "P", "difficulty": 2, "samples": [["15 0\nkrokodkrokodkrk", "79"], ["5 1\nrokod", "17"], ["8 2\nddkkoorr", "35"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "枚举", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #4] 7Krokods", "background": "[加强版](/problem/U382344) [二次加强版](/problem/U502888)", "description": "Krokod 喜欢和 Paula 玩棋盘游戏。他想玩 7Krokods 游戏，但 Paula 不喜欢复杂的游戏，所以 Krokod 决定他们只用绿卡和鳄鱼卡来玩。\n\nPaula 有 $n$ 张绿色卡片，每张卡片上都写有以下字母之一：$d,k,o,r$。\n\n她的总得分被定义为以下部分的总和。\n\n- 对于每个字母，她得到的分数与写有该字母的卡片数量的平方相同。例如，如果她有 $6$ 张写有字母 $k$ 的卡片，她可以得到 $36$ 分。\n- 每凑成一个单词 `krokod`，她就能得到额外的 $7$ 分。\n\nPaula 也有 $m$ 张鳄鱼卡。她可以用任何一张鳄鱼卡代替一张绿卡，绿卡上有她选择的字母。\n\n请计算她的牌能得到的最大分数。", "inputFormat": "第一行两个整数 $n$ 和 $m(0\\leq n\\leq 100，0\\leq m\\leq 10)$，表示绿卡的数量和鳄鱼卡的数量。\n\n第二行包含一个 $n$ 个字符的序列，其中第 $i$ 个字符代表第 $i$ 张绿卡上的字母。该序列仅由字符 $d,k,o,r$ 组成。", "outputFormat": "一行一个整数，输出 Paula 的最大可能得分。", "hint": "样例 $1$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bwk9d3gv.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n\nPaula 有 $2$ 个字母 $d（2\\times 2=4$ 分），$6$ 个字母 $k（6\\times 6=36$ 分），$4$ 个字母 $o（4\\times 4=16$ 分）和 $3$ 个字母 $r（3\\times 3 = 9$ 分）。单词 krokod 可以拼写 $2$ 次（$7\\times 2=14$ 分）。她的总分是 \n$79$。（$4 + 36 + 16 + 9 + 14 = 79$）。\n\n样例 $2$ 解释：\n\nPaula 可以把她的鳄鱼卡换成一张上面写着字母\n $k$ 的绿卡。\n \n |子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ |\t$m=1$ | $17$ |\n| $2$ |\t$m=2$ | $26$ |\n| $3$ |\t无附加限制 | $7$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #4] 7Krokods", "background": "[加强版](/problem/U382344) [二次加强版](/problem/U502888)", "description": "Krokod 喜欢和 Paula 玩棋盘游戏。他想玩 7Krokods 游戏，但 Paula 不喜欢复杂的游戏，所以 Krokod 决定他们只用绿卡和鳄鱼卡来玩。\n\nPaula 有 $n$ 张绿色卡片，每张卡片上都写有以下字母之一：$d,k,o,r$。\n\n她的总得分被定义为以下部分的总和。\n\n- 对于每个字母，她得到的分数与写有该字母的卡片数量的平方相同。例如，如果她有 $6$ 张写有字母 $k$ 的卡片，她可以得到 $36$ 分。\n- 每凑成一个单词 `krokod`，她就能得到额外的 $7$ 分。\n\nPaula 也有 $m$ 张鳄鱼卡。她可以用任何一张鳄鱼卡代替一张绿卡，绿卡上有她选择的字母。\n\n请计算她的牌能得到的最大分数。", "inputFormat": "第一行两个整数 $n$ 和 $m(0\\leq n\\leq 100，0\\leq m\\leq 10)$，表示绿卡的数量和鳄鱼卡的数量。\n\n第二行包含一个 $n$ 个字符的序列，其中第 $i$ 个字符代表第 $i$ 张绿卡上的字母。该序列仅由字符 $d,k,o,r$ 组成。", "outputFormat": "一行一个整数，输出 Paula 的最大可能得分。", "hint": "样例 $1$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bwk9d3gv.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n\nPaula 有 $2$ 个字母 $d（2\\times 2=4$ 分），$6$ 个字母 $k（6\\times 6=36$ 分），$4$ 个字母 $o（4\\times 4=16$ 分）和 $3$ 个字母 $r（3\\times 3 = 9$ 分）。单词 krokod 可以拼写 $2$ 次（$7\\times 2=14$ 分）。她的总分是 \n$79$。（$4 + 36 + 16 + 9 + 14 = 79$）。\n\n样例 $2$ 解释：\n\nPaula 可以把她的鳄鱼卡换成一张上面写着字母\n $k$ 的绿卡。\n \n |子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ |\t$m=1$ | $17$ |\n| $2$ |\t$m=2$ | $26$ |\n| $3$ |\t无附加限制 | $7$ |", "locale": "zh-CN"}}}
{"pid": "P9173", "type": "P", "difficulty": 3, "samples": [["0\n4 1 0 1 1", "5"], ["4 0 1 0 1\n4 1 0 0 1", "9"], ["5 0 1 0 0 1\n4 0 0 0 1", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #4] Zrinka", "background": "", "description": "给你两个长度分别为 $n$ 和 $m$ 的数组，它们只由 $0$ 和 $1$ 组成。\n\n你的任务是用偶数替换每个 $0$，用奇数替换每个 $1$。\n\n替换之后，两个数组都应该是单调递增的且所有元素均大于 $0$，并且你最多可以使用每个正整数一次，使用的最大数字要尽可能的小。", "inputFormat": "第一行由 $n+1$ 个整数组成，第一个是 $n(n\\leq 5000)$，其他是描述第一个数组的。\n\n第二行由 $m+1$ 个整数组成，第一个是 $m(m\\leq 5000)$，其他是描述第二个数组的。", "outputFormat": "一行一个正整数，即最大数字。", "hint": "样例 $1$ 解释：\n\n一组可行解：$(\\varnothing),(1,2,3,5)$\n\n样例 $2$ 解释：\n\n一组可行解：$(2,3,4,5),(1,6,8,9)$。\n\n样例 $3$ 解释：\n\n一组可行解：$(2, 3, 6, 8, 9),(4,10,12,13)$。\n\n|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ |\t$n=0$ | $15$ |\n| $2$ |\t第一个数组只包括 $0$ | $20$ |\n| $3$ |\t$n,m\\leq 500$ | $20$ |\n| $4$ |\t无附加限制 | $7$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #4] Zrinka", "background": "", "description": "给你两个长度分别为 $n$ 和 $m$ 的数组，它们只由 $0$ 和 $1$ 组成。\n\n你的任务是用偶数替换每个 $0$，用奇数替换每个 $1$。\n\n替换之后，两个数组都应该是单调递增的且所有元素均大于 $0$，并且你最多可以使用每个正整数一次，使用的最大数字要尽可能的小。", "inputFormat": "第一行由 $n+1$ 个整数组成，第一个是 $n(n\\leq 5000)$，其他是描述第一个数组的。\n\n第二行由 $m+1$ 个整数组成，第一个是 $m(m\\leq 5000)$，其他是描述第二个数组的。", "outputFormat": "一行一个正整数，即最大数字。", "hint": "样例 $1$ 解释：\n\n一组可行解：$(\\varnothing),(1,2,3,5)$\n\n样例 $2$ 解释：\n\n一组可行解：$(2,3,4,5),(1,6,8,9)$。\n\n样例 $3$ 解释：\n\n一组可行解：$(2, 3, 6, 8, 9),(4,10,12,13)$。\n\n|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ |\t$n=0$ | $15$ |\n| $2$ |\t第一个数组只包括 $0$ | $20$ |\n| $3$ |\t$n,m\\leq 500$ | $20$ |\n| $4$ |\t无附加限制 | $7$ |", "locale": "zh-CN"}}}
