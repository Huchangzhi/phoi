{"pid": "P15026", "type": "P", "difficulty": 2, "samples": [["5\n3 10 5 7 8", "21"], ["4\n6 6 6 6", "24"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2021", "排序", "UOI（乌克兰）"], "title": "[UOI 2021 II Stage] 商店", "background": "", "description": "搬到一座大城市后，哥萨克胡子觉得应该做点小生意，于是开了一家小型珠宝店。他有 $n$ 件珠宝，第 $i$ 件的价格为 $a_i$。\n\n但由于疫情，珠宝的销量有所下降，因此哥萨克胡子决定进行促销甩卖。根据促销活动规则，顾客可以：\n\n-   选择一个正整数 $k$。\n-   以 $k \\cdot m$ 枚硬币的总价，购买所有 $m$ 件价格不低于 $k$ 的珠宝。换句话说，每件满足 $a_i \\geq k$ 的珠宝，他将以单价 $k$ 购买。\n\n现在哥萨克胡子想知道，根据这个促销方案，他能收到的最大金额是多少。", "inputFormat": "第一行包含一个整数 $n$ ($1 \\leq n \\leq 10^5$) —— 哥萨克胡子拥有的珠宝数量。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$ ($1 \\leq a_i \\leq 10^9$) —— 第 $i$ 件珠宝的价格。\n", "outputFormat": "输出一个整数 —— 哥萨克胡子通过此促销活动能获得的最大硬币数量，其值为 $k \\cdot m$ 的最大值，其中 $k$ 是某个正整数，$m$ 是满足 $k \\leq a_i$ 的珠宝 $i$ 的数量。", "hint": "### 样例说明\n\n在第一个样例中，可以选择 $k=7$，此时能找到 $3$ 件价格不低于 $k$ 的珠宝。\n\n在第二个样例中，可以选择 $k=6$ 并购买全部珠宝。\n\n### 评分细则\n\n每个测试点单独评分。在 $n, a_i \\leq 1000$ 的测试点上，您最多可以获得 $45$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2021 II Stage] 商店", "background": "", "description": "搬到一座大城市后，哥萨克胡子觉得应该做点小生意，于是开了一家小型珠宝店。他有 $n$ 件珠宝，第 $i$ 件的价格为 $a_i$。\n\n但由于疫情，珠宝的销量有所下降，因此哥萨克胡子决定进行促销甩卖。根据促销活动规则，顾客可以：\n\n-   选择一个正整数 $k$。\n-   以 $k \\cdot m$ 枚硬币的总价，购买所有 $m$ 件价格不低于 $k$ 的珠宝。换句话说，每件满足 $a_i \\geq k$ 的珠宝，他将以单价 $k$ 购买。\n\n现在哥萨克胡子想知道，根据这个促销方案，他能收到的最大金额是多少。", "inputFormat": "第一行包含一个整数 $n$ ($1 \\leq n \\leq 10^5$) —— 哥萨克胡子拥有的珠宝数量。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$ ($1 \\leq a_i \\leq 10^9$) —— 第 $i$ 件珠宝的价格。\n", "outputFormat": "输出一个整数 —— 哥萨克胡子通过此促销活动能获得的最大硬币数量，其值为 $k \\cdot m$ 的最大值，其中 $k$ 是某个正整数，$m$ 是满足 $k \\leq a_i$ 的珠宝 $i$ 的数量。", "hint": "### 样例说明\n\n在第一个样例中，可以选择 $k=7$，此时能找到 $3$ 件价格不低于 $k$ 的珠宝。\n\n在第二个样例中，可以选择 $k=6$ 并购买全部珠宝。\n\n### 评分细则\n\n每个测试点单独评分。在 $n, a_i \\leq 1000$ 的测试点上，您最多可以获得 $45$ 分。", "locale": "zh-CN"}}}
{"pid": "P15027", "type": "P", "difficulty": 2, "samples": [["6\n1 4 5 4 1 5", "2"], ["8\n1 2 1 2 1 2 1 2", "0"], ["5\n1 1 1 1 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2021", "UOI（乌克兰）"], "title": "[UOI 2021 II Stage] 优美数组", "background": "", "description": "很多人都以为哥萨克胡子最喜欢的数字是七。然而，他们错了。实际上他最喜欢的数字是二。正因如此，他只喜欢那些恰好包含两个不同数字的数组。\n\n尽管如此，普通的那种只包含两个不同数字的数组在他看来还是太过混乱，而哥萨克讨厌混乱。所以，他只喜欢那些任意两个相邻元素都互不相同的数组。\n\n正式地说，要使一个数组令胡子满意，需要满足以下条件：\n\n-   对所有 $i$ ($1 \\leq i \\leq n - 2$) 满足 $a_i = a_{i+2}$；\n-   对所有 $i$ ($1 \\leq i \\leq n - 1$) 满足 $a_i \\neq a_{i+1}$。\n\n例如，他喜欢数组 $[1, 4, 1, 4, 1]$。这个数组只包含两个不同的数字 $1$ 和 $4$。并且没有两个相邻的数字值相同。但是他不喜欢数组 $[1, 4, 5]$（因为有三个不同的数字）、$[1, 1, 1, 1, 1]$（因为有相同的相邻元素，并且只有一个数字）、$[7, 7, 6, 6]$（因为有相同的相邻元素）。\n\n给定一个包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$ 的数组 $a$。你需要修改最少数量的数字，使得这个数组能让哥萨克胡子满意。找出这个最少修改数量。\n\n例如，在数组 $[1, 1, 1, 1, 1]$ 中，需要将第二个和第四个元素改为任意其他数字。因此在这个例子中，答案是 $2$。\n", "inputFormat": "第一行包含一个整数 $n$ ($1 \\leq n \\leq 10^5$) —— 数组中的数字个数。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$ ($1 \\leq a_i \\leq 10^9$) —— 数组中的数字。\n", "outputFormat": "输出需要修改的最少数字数量，以使数组符合哥萨克的喜好。", "hint": "### 评分细则\n\n在限制条件 $n \\leq 100$ 且 $a_i \\leq 100$ 下能正确运行的解决方案将获得 $40$ 分。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2021 II Stage] 优美数组", "background": "", "description": "很多人都以为哥萨克胡子最喜欢的数字是七。然而，他们错了。实际上他最喜欢的数字是二。正因如此，他只喜欢那些恰好包含两个不同数字的数组。\n\n尽管如此，普通的那种只包含两个不同数字的数组在他看来还是太过混乱，而哥萨克讨厌混乱。所以，他只喜欢那些任意两个相邻元素都互不相同的数组。\n\n正式地说，要使一个数组令胡子满意，需要满足以下条件：\n\n-   对所有 $i$ ($1 \\leq i \\leq n - 2$) 满足 $a_i = a_{i+2}$；\n-   对所有 $i$ ($1 \\leq i \\leq n - 1$) 满足 $a_i \\neq a_{i+1}$。\n\n例如，他喜欢数组 $[1, 4, 1, 4, 1]$。这个数组只包含两个不同的数字 $1$ 和 $4$。并且没有两个相邻的数字值相同。但是他不喜欢数组 $[1, 4, 5]$（因为有三个不同的数字）、$[1, 1, 1, 1, 1]$（因为有相同的相邻元素，并且只有一个数字）、$[7, 7, 6, 6]$（因为有相同的相邻元素）。\n\n给定一个包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$ 的数组 $a$。你需要修改最少数量的数字，使得这个数组能让哥萨克胡子满意。找出这个最少修改数量。\n\n例如，在数组 $[1, 1, 1, 1, 1]$ 中，需要将第二个和第四个元素改为任意其他数字。因此在这个例子中，答案是 $2$。\n", "inputFormat": "第一行包含一个整数 $n$ ($1 \\leq n \\leq 10^5$) —— 数组中的数字个数。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$ ($1 \\leq a_i \\leq 10^9$) —— 数组中的数字。\n", "outputFormat": "输出需要修改的最少数字数量，以使数组符合哥萨克的喜好。", "hint": "### 评分细则\n\n在限制条件 $n \\leq 100$ 且 $a_i \\leq 100$ 下能正确运行的解决方案将获得 $40$ 分。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15028", "type": "P", "difficulty": 3, "samples": [["3 10\n5 1\n3 1\n10 1", "2"], ["4 12\n8 3\n6 2\n1 2\n5 2", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2021", "UOI（乌克兰）"], "title": "[UOI 2021 II Stage] 献给女士的礼物", "background": "", "description": "哥萨克胡子想了很久，在女士生日那天送她什么礼物。他决定送一件既独特又最重要的——是有用的礼物。于是，哥萨克胡子送给女士一套由 $n$ 对数字 $(a_i, b_i)$ 组成的礼物。\n\n女士起初不明白，为什么给她这样一套奇怪的数字。最初的这套礼物她不太喜欢，因此她决定从这个礼物集合中选择一个子集，这个子集需要满足特定的条件。\n\n假设女士得到了一个新集合，它是原始集合的一个子集。形式化地说，子集是若干对数字构成的集合：$(a_{i_1}, b_{i_1}), (a_{i_2}, b_{i_2}) \\dots (a_{i_m}, b_{i_m})$，其中 $0 \\leq m \\leq n$ 并且对所有 $1 \\leq p \\leq m-1$ 满足 $i_p < i_{p+1}$。注意，女士可以选择 $0$ 对，也可以选择全部的 $n$ 对。\n\n女士认为，如果满足以下两个条件，那么得到的集合是所有可能集合中最 **优美** 的：\n\n-   众所周知，女士最喜欢的数字是 $k$。因此，所有选中的 $a_{i_p}$（$1 \\leq p \\leq m$）的 **按位或（OR）** 结果必须不超过数字 $k$。\n-   所有选中的 $b_{i_p}$（$1 \\leq p \\leq m$）的总和是 **最大** 的。\n\n**按位或**（记为 $|$）——一种对每个比特位执行的操作，仅当两个数的对应比特位都为 $0$ 时，结果位才是 $0$。否则，结果位为 $1$。考虑两个数字 $9$ 和 $10$ 的例子。它们的二进制表示分别是 $1001$ 和 $1010$（不考虑高位为 $0$ 的位）。然后对每个比特位应用 OR 操作。因此，第零位是 $(1|0)$，等于 $1$。第一位是 $(0|1)$，也等于 $1$。第二位是 $(0|0) = 0$，第三位是 $(1|1) = 1$。因此，数字 $9$ 和 $10$ 的按位或在二进制下表示为 $1011$，等于 $11$。\n\n女士在寻找最 **优美** 集合时遇到了问题。她明白寻找这个集合是件困难的事，所以只请你告诉她最 **优美** 集合中所有 $b_{i_p}$ 的总和。", "inputFormat": "第一行包含两个整数 $n$ 和 $k$ ($1 \\leq n \\leq 10^6$, $0 \\leq k < 2^{30}$)。\n\n接下来的 $n$ 行，每行包含两个整数 $a_i$ 和 $b_i$ ($0 \\leq a_i, b_i < 2^{30}$)。\n", "outputFormat": "输出一个数字 —— 所选 $b_{i_p}$ 的最大可能总和。", "hint": "### 样例说明\n\n在第一个样例中，如果选择第一对和第二对作为答案，则得到的按位或结果为 $7$，所求总和为 $2$。无法再增加总和，因为如果选择全部三对，得到的按位或结果为 $15$，超过了 $k$。\n\n在第二个样例中，最优方案是选择第二、第三和第四对，得到答案 $6$。如果选择第一对，那么为了使得按位或结果不超过 $k$，只能再选择第三对。因此最大可能总和为 $6$。\n\n### 评分细则\n\n-   （17 分）： $n \\leq 10$；\n-   （26 分）： $n \\leq 10^4$, $k < 2^{10}$；\n-   （14 分）： $k = 2^t - 1$，其中 $0 \\leq t \\leq 30$；\n-   （43 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2021 II Stage] 献给女士的礼物", "background": "", "description": "哥萨克胡子想了很久，在女士生日那天送她什么礼物。他决定送一件既独特又最重要的——是有用的礼物。于是，哥萨克胡子送给女士一套由 $n$ 对数字 $(a_i, b_i)$ 组成的礼物。\n\n女士起初不明白，为什么给她这样一套奇怪的数字。最初的这套礼物她不太喜欢，因此她决定从这个礼物集合中选择一个子集，这个子集需要满足特定的条件。\n\n假设女士得到了一个新集合，它是原始集合的一个子集。形式化地说，子集是若干对数字构成的集合：$(a_{i_1}, b_{i_1}), (a_{i_2}, b_{i_2}) \\dots (a_{i_m}, b_{i_m})$，其中 $0 \\leq m \\leq n$ 并且对所有 $1 \\leq p \\leq m-1$ 满足 $i_p < i_{p+1}$。注意，女士可以选择 $0$ 对，也可以选择全部的 $n$ 对。\n\n女士认为，如果满足以下两个条件，那么得到的集合是所有可能集合中最 **优美** 的：\n\n-   众所周知，女士最喜欢的数字是 $k$。因此，所有选中的 $a_{i_p}$（$1 \\leq p \\leq m$）的 **按位或（OR）** 结果必须不超过数字 $k$。\n-   所有选中的 $b_{i_p}$（$1 \\leq p \\leq m$）的总和是 **最大** 的。\n\n**按位或**（记为 $|$）——一种对每个比特位执行的操作，仅当两个数的对应比特位都为 $0$ 时，结果位才是 $0$。否则，结果位为 $1$。考虑两个数字 $9$ 和 $10$ 的例子。它们的二进制表示分别是 $1001$ 和 $1010$（不考虑高位为 $0$ 的位）。然后对每个比特位应用 OR 操作。因此，第零位是 $(1|0)$，等于 $1$。第一位是 $(0|1)$，也等于 $1$。第二位是 $(0|0) = 0$，第三位是 $(1|1) = 1$。因此，数字 $9$ 和 $10$ 的按位或在二进制下表示为 $1011$，等于 $11$。\n\n女士在寻找最 **优美** 集合时遇到了问题。她明白寻找这个集合是件困难的事，所以只请你告诉她最 **优美** 集合中所有 $b_{i_p}$ 的总和。", "inputFormat": "第一行包含两个整数 $n$ 和 $k$ ($1 \\leq n \\leq 10^6$, $0 \\leq k < 2^{30}$)。\n\n接下来的 $n$ 行，每行包含两个整数 $a_i$ 和 $b_i$ ($0 \\leq a_i, b_i < 2^{30}$)。\n", "outputFormat": "输出一个数字 —— 所选 $b_{i_p}$ 的最大可能总和。", "hint": "### 样例说明\n\n在第一个样例中，如果选择第一对和第二对作为答案，则得到的按位或结果为 $7$，所求总和为 $2$。无法再增加总和，因为如果选择全部三对，得到的按位或结果为 $15$，超过了 $k$。\n\n在第二个样例中，最优方案是选择第二、第三和第四对，得到答案 $6$。如果选择第一对，那么为了使得按位或结果不超过 $k$，只能再选择第三对。因此最大可能总和为 $6$。\n\n### 评分细则\n\n-   （17 分）： $n \\leq 10$；\n-   （26 分）： $n \\leq 10^4$, $k < 2^{10}$；\n-   （14 分）： $k = 2^t - 1$，其中 $0 \\leq t \\leq 30$；\n-   （43 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15029", "type": "P", "difficulty": 4, "samples": [["10 3\nabcdafghik", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "双指针 two-pointer", "UOI（乌克兰）"], "title": "[UOI 2021 II Stage] 酷子串", "background": "", "description": "哥萨克胡子认为一个字符串是 **酷的**，当且仅当满足以下条件：\n\n-   所有在偶数位置上的字符都相同。\n-   所有在奇数位置上的字符都相同。\n\n例如，字符串 wow 和 ftftf 是酷的，而字符串 cabab 和 abcd 则不是。\n\n哥萨克胡子有一个长度为 $n$ 的字符串 $s$，由小写字母组成。他可以更改其中 **不超过** $k$ 个字符，使得该字符串中拥有一个长度尽可能长的 **酷** 子串。请帮助他找到这个最大长度。", "inputFormat": "第一行包含两个整数 $n$ 和 $k$ ($1 \\leq n \\leq 5 \\cdot 10^6$, $0 \\leq k \\leq 5 \\cdot 10^6$) —— 分别表示字符串中的字符数量，以及哥萨克胡子可以更改的字符数量。\n\n第二行包含一个字符串 $s$，由 $n$ 个小写字母组成。", "outputFormat": "输出一个数字 —— 哥萨克胡子能得到的 **酷** 子串的最大可能长度。\n", "hint": "### 评分细则\n\n-   （7 分）： $n \\leq 100$；\n-   （14 分）： $n \\leq 3\\,000$；\n-   （33 分）： $n \\leq 100\\,000$；\n-   （23 分）： $k = 0$；\n-   （23 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2021 II Stage] 酷子串", "background": "", "description": "哥萨克胡子认为一个字符串是 **酷的**，当且仅当满足以下条件：\n\n-   所有在偶数位置上的字符都相同。\n-   所有在奇数位置上的字符都相同。\n\n例如，字符串 wow 和 ftftf 是酷的，而字符串 cabab 和 abcd 则不是。\n\n哥萨克胡子有一个长度为 $n$ 的字符串 $s$，由小写字母组成。他可以更改其中 **不超过** $k$ 个字符，使得该字符串中拥有一个长度尽可能长的 **酷** 子串。请帮助他找到这个最大长度。", "inputFormat": "第一行包含两个整数 $n$ 和 $k$ ($1 \\leq n \\leq 5 \\cdot 10^6$, $0 \\leq k \\leq 5 \\cdot 10^6$) —— 分别表示字符串中的字符数量，以及哥萨克胡子可以更改的字符数量。\n\n第二行包含一个字符串 $s$，由 $n$ 个小写字母组成。", "outputFormat": "输出一个数字 —— 哥萨克胡子能得到的 **酷** 子串的最大可能长度。\n", "hint": "### 评分细则\n\n-   （7 分）： $n \\leq 100$；\n-   （14 分）： $n \\leq 3\\,000$；\n-   （33 分）： $n \\leq 100\\,000$；\n-   （23 分）： $k = 0$；\n-   （23 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15030", "type": "P", "difficulty": 5, "samples": [["6 6\n1 5 3 2 6 4", "1 2 5 3 6 4 "], ["6 5\n2 3 1 5 6 4", "1 4 2 3 5 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2021", "UOI（乌克兰）"], "title": "[UOI 2021 II Stage] A 先生的魔法球", "background": "双倍经验：<https://www.luogu.com.cn/problem/AT_arc080_c>", "description": "A 先生在他的橱柜里发现了一串 $n$ 个魔法球。所有这些魔法球的颜色都 **互不相同**，为了方便起见，颜色用从 $1$ 到 $n$ 的整数编号。当然，A 先生的球的数量是偶数。\n\n此外，A 先生有一个整型数组 $Q$，他将把球的颜色记录在其中。初始时数组 $Q$ 为空。\n\nA 生计划执行 $\\frac{n}{2}$ 次以下类型的操作：英雄选择序列中相邻的一对球，将它们从序列中移除，并将移除球对应的颜色添加到数组 $Q$ 的开头。被移除的球在数组 $Q$ 中的相对顺序与在初始序列中相同。从序列中删除元素后，序列的两部分会连接起来，形成一个新的序列。\n\n例如，如果球的颜色序列为 $\\left\\{1,5,3,2,6,4\\right\\}$，可以先向数组 $Q$ 的开头添加元素对 $\\left\\{2,6\\right\\}$，然后添加元素对 $\\left\\{3,4\\right\\}$，最后添加元素对 $\\left\\{1,5\\right\\}$ —— 这样得到的数组 $Q$ 将为 $[1,5,3,4,2,6]$。\n\n现在 A 先生很好奇，通过执行 $\\frac{n}{2}$ 次操作，可以得到的最小的（按字典序）数组 $Q$ 是什么。回忆一下，字典序定义如下。假设有两个数组。找到第一个两个数组元素不同的位置。如果在该位置第一个数组的元素小于第二个数组的元素，则第一个数组字典序小于第二个数组；否则，第一个数组字典序大于第二个数组。例如，以下不等式成立：$[10, 3, 1] < [10, 4, 5]$, $[1, 1, 1] < [1, 2, 3]$, $[1, 2, 3] < [10, 10, 10]$。\n\n请帮助 A 先生找到可能的最小数组 $Q$ 的前 $k$ 个元素。", "inputFormat": "第一行包含两个整数 $n$ 和 $k$ $(1 \\le k \\le n \\le 10^6)$。保证 $n$ 是偶数。\n\n第二行包含 $n$ 个 **互不相同** 的整数 $a_1, a_2, \\dots, a_n$ $(1 \\le a_i \\le n)$ —— 表示球序列的颜色。", "outputFormat": "输出 $k$ 个整数 $q_1, q_2, \\dots, q_k$ —— 可能的最小数组 $Q$ 的前几个元素。", "hint": "### 评分细则\n\n-   （8 分）： $n \\le 10^5, k = 1$；\n-   （5 分）： $n \\le 10^5, k = 2$；\n-   （19 分）： $n \\le 14$；\n-   （16 分）： $n \\le 10^3$；\n-   （10 分）： $n \\le 10^5, k \\le 20$；\n-   （24 分）： $n \\le 10^5$；\n-   （18 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2021 II Stage] A 先生的魔法球", "background": "双倍经验：<https://www.luogu.com.cn/problem/AT_arc080_c>", "description": "A 先生在他的橱柜里发现了一串 $n$ 个魔法球。所有这些魔法球的颜色都 **互不相同**，为了方便起见，颜色用从 $1$ 到 $n$ 的整数编号。当然，A 先生的球的数量是偶数。\n\n此外，A 先生有一个整型数组 $Q$，他将把球的颜色记录在其中。初始时数组 $Q$ 为空。\n\nA 生计划执行 $\\frac{n}{2}$ 次以下类型的操作：英雄选择序列中相邻的一对球，将它们从序列中移除，并将移除球对应的颜色添加到数组 $Q$ 的开头。被移除的球在数组 $Q$ 中的相对顺序与在初始序列中相同。从序列中删除元素后，序列的两部分会连接起来，形成一个新的序列。\n\n例如，如果球的颜色序列为 $\\left\\{1,5,3,2,6,4\\right\\}$，可以先向数组 $Q$ 的开头添加元素对 $\\left\\{2,6\\right\\}$，然后添加元素对 $\\left\\{3,4\\right\\}$，最后添加元素对 $\\left\\{1,5\\right\\}$ —— 这样得到的数组 $Q$ 将为 $[1,5,3,4,2,6]$。\n\n现在 A 先生很好奇，通过执行 $\\frac{n}{2}$ 次操作，可以得到的最小的（按字典序）数组 $Q$ 是什么。回忆一下，字典序定义如下。假设有两个数组。找到第一个两个数组元素不同的位置。如果在该位置第一个数组的元素小于第二个数组的元素，则第一个数组字典序小于第二个数组；否则，第一个数组字典序大于第二个数组。例如，以下不等式成立：$[10, 3, 1] < [10, 4, 5]$, $[1, 1, 1] < [1, 2, 3]$, $[1, 2, 3] < [10, 10, 10]$。\n\n请帮助 A 先生找到可能的最小数组 $Q$ 的前 $k$ 个元素。", "inputFormat": "第一行包含两个整数 $n$ 和 $k$ $(1 \\le k \\le n \\le 10^6)$。保证 $n$ 是偶数。\n\n第二行包含 $n$ 个 **互不相同** 的整数 $a_1, a_2, \\dots, a_n$ $(1 \\le a_i \\le n)$ —— 表示球序列的颜色。", "outputFormat": "输出 $k$ 个整数 $q_1, q_2, \\dots, q_k$ —— 可能的最小数组 $Q$ 的前几个元素。", "hint": "### 评分细则\n\n-   （8 分）： $n \\le 10^5, k = 1$；\n-   （5 分）： $n \\le 10^5, k = 2$；\n-   （19 分）： $n \\le 14$；\n-   （16 分）： $n \\le 10^3$；\n-   （10 分）： $n \\le 10^5, k \\le 20$；\n-   （24 分）： $n \\le 10^5$；\n-   （18 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成\n", "locale": "zh-CN"}}}
{"pid": "P15031", "type": "P", "difficulty": 2, "samples": [["2 3\n010\n000", "2"], ["3 4\n0101\n0001\n0000", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "枚举", "广度优先搜索 BFS", "UOI（乌克兰）"], "title": "[UOI 2021 II Stage] 矩阵", "background": "", "description": "哥萨克胡子得到了一个大小为 $n$ 乘 $m$ 的矩阵 $a$（即一个 $n$ 行 $m$ 列的矩阵）。该矩阵的元素仅为 $0$ 和 $1$。\n\n有人向哥萨克介绍了矩阵中元素之间的曼哈顿距离。事实证明，如果一个元素位于第 $i$ 行第 $j$ 列，另一个元素位于第 $p$ 行第 $k$ 列，那么这两个元素之间的曼哈顿距离定义为 $\\mid i - p \\mid + \\mid j - k \\mid$（元素坐标差绝对值的和）。\n\n之后，胡子明白了，矩阵中任何元素的 **“美丽度”** 是指该元素到最近一个值为 $1$ 的元素的距离。注意，任何 $1$ 的 **“美丽度”** 都为 $0$。此外，哥萨克还得知，在这样的矩阵中，至少存在一个 $1$。\n\n你的任务很简单 —— 找出矩阵中最 **“美丽”** 的元素的 **“美丽度”**。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$ $(1 \\leq n,m \\leq 20)$ —— 矩阵的行数和列数。\n\n接下来的 $n$ 行，每行包含 $m$ 个数字 $a_{i,1}, a_{i,2},...,a_{i,m}$ $(0 \\leq a_{i,j} \\leq 1)$ —— 矩阵元素的值。\n\n保证至少有一个 $1$。\n", "outputFormat": "输出一个数字 —— 最大的 **“美丽度”**。\n", "hint": "### 样例说明\n\n对于第一个样例中的矩阵，将每个元素的 **“美丽度”** 写成矩阵形式：\n\n:::align{center}\n1 0 1\n\n2 1 2\n:::\n\n如我们所见，有两个矩阵元素 —— （第二行，第一列）和（第二行，第三列）—— 拥有最大的 **“美丽度”**，为 $2$。\n\n对于第二个样例，其 **“美丽度”** 矩阵为：\n\n:::align{center}\n1 0 1 0\n\n2 1 1 0\n\n3 2 2 1\n:::\n\n### 评分细则\n\n在限制条件 $n = 1$ 下能正确运行的解决方案，将至少获得 $30$ 分。\n\n在限制条件 $n = 2$ 下能正确运行的解决方案，将至少获得 $30$ 分。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2021 II Stage] 矩阵", "background": "", "description": "哥萨克胡子得到了一个大小为 $n$ 乘 $m$ 的矩阵 $a$（即一个 $n$ 行 $m$ 列的矩阵）。该矩阵的元素仅为 $0$ 和 $1$。\n\n有人向哥萨克介绍了矩阵中元素之间的曼哈顿距离。事实证明，如果一个元素位于第 $i$ 行第 $j$ 列，另一个元素位于第 $p$ 行第 $k$ 列，那么这两个元素之间的曼哈顿距离定义为 $\\mid i - p \\mid + \\mid j - k \\mid$（元素坐标差绝对值的和）。\n\n之后，胡子明白了，矩阵中任何元素的 **“美丽度”** 是指该元素到最近一个值为 $1$ 的元素的距离。注意，任何 $1$ 的 **“美丽度”** 都为 $0$。此外，哥萨克还得知，在这样的矩阵中，至少存在一个 $1$。\n\n你的任务很简单 —— 找出矩阵中最 **“美丽”** 的元素的 **“美丽度”**。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$ $(1 \\leq n,m \\leq 20)$ —— 矩阵的行数和列数。\n\n接下来的 $n$ 行，每行包含 $m$ 个数字 $a_{i,1}, a_{i,2},...,a_{i,m}$ $(0 \\leq a_{i,j} \\leq 1)$ —— 矩阵元素的值。\n\n保证至少有一个 $1$。\n", "outputFormat": "输出一个数字 —— 最大的 **“美丽度”**。\n", "hint": "### 样例说明\n\n对于第一个样例中的矩阵，将每个元素的 **“美丽度”** 写成矩阵形式：\n\n:::align{center}\n1 0 1\n\n2 1 2\n:::\n\n如我们所见，有两个矩阵元素 —— （第二行，第一列）和（第二行，第三列）—— 拥有最大的 **“美丽度”**，为 $2$。\n\n对于第二个样例，其 **“美丽度”** 矩阵为：\n\n:::align{center}\n1 0 1 0\n\n2 1 1 0\n\n3 2 2 1\n:::\n\n### 评分细则\n\n在限制条件 $n = 1$ 下能正确运行的解决方案，将至少获得 $30$ 分。\n\n在限制条件 $n = 2$ 下能正确运行的解决方案，将至少获得 $30$ 分。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15032", "type": "P", "difficulty": 2, "samples": [["3 2\n10 -2 5", "1"], ["5 5\n1 7 -1 11 15", "2"], ["6 0\n0 -2019 84 -6 102 87", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2021", "数论", "最大公约数 gcd", "UOI（乌克兰）"], "title": "[UOI 2021 II Stage] 棋子", "background": "", "description": "近日，哥萨克胡子发现了一枚棋子以及位于同一条直线上的 $n$ 个点。棋子的初始坐标为 $x$，第 $i$ 个点的坐标为 $a_i$。\n\n哥萨克胡子可以首先选择任意一个正整数 $k$。之后，他可以任意多次地改变棋子的坐标，为其加上或减去 $k$，也就是说，将棋子向任意一侧移动距离 $k$。\n\n哥萨克胡子想知道：在 $k$ 最大为多少时，棋子能够访问所有给定的 $n$ 个点。", "inputFormat": "第一行包含两个整数 $n$ 和 $x$ ($2 \\le n \\le 10^5, -10^{18} \\le x \\le 10^{18}$) —— 分别表示直线上的点数以及棋子的初始坐标。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$ ($-10^{18} \\le a_i \\le 10^{18}$) —— 点的坐标。保证数组 $a$ 中的所有数两两不同。", "outputFormat": "输出一个数字 —— 棋子能够访问所有 $n$ 个给定点的最大 $k$ 值。", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2021 II Stage] 棋子", "background": "", "description": "近日，哥萨克胡子发现了一枚棋子以及位于同一条直线上的 $n$ 个点。棋子的初始坐标为 $x$，第 $i$ 个点的坐标为 $a_i$。\n\n哥萨克胡子可以首先选择任意一个正整数 $k$。之后，他可以任意多次地改变棋子的坐标，为其加上或减去 $k$，也就是说，将棋子向任意一侧移动距离 $k$。\n\n哥萨克胡子想知道：在 $k$ 最大为多少时，棋子能够访问所有给定的 $n$ 个点。", "inputFormat": "第一行包含两个整数 $n$ 和 $x$ ($2 \\le n \\le 10^5, -10^{18} \\le x \\le 10^{18}$) —— 分别表示直线上的点数以及棋子的初始坐标。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$ ($-10^{18} \\le a_i \\le 10^{18}$) —— 点的坐标。保证数组 $a$ 中的所有数两两不同。", "outputFormat": "输出一个数字 —— 棋子能够访问所有 $n$ 个给定点的最大 $k$ 值。", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15033", "type": "P", "difficulty": 4, "samples": [["5\n3 1 2 3 3", "3 1 3 2 3"], ["6\n2 3 1 1 2 4", "1 2 1 2 3 4"], ["4\n1 2 1 1", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2021", "UOI（乌克兰）"], "title": "[UOI 2021 II Stage] 字典序", "background": "", "description": "最近有人送给哥萨克一个包含 $n$ 个整数的数组 $a$。\n\n胡子立刻想要对数组的元素进行排序，使得排序后数组中任意两个相邻的数字都不相同。在所有这样的排序中，他想找到字典序最小的那个。\n\n回忆一下，字典序定义如下。假设有两个数组。找到第一个两个数组元素不同的位置。如果在该位置第一个数组的元素小于第二个数组的元素，则第一个数组字典序小于第二个数组；否则，第一个数组字典序大于第二个数组。例如，以下不等式成立：$[10, 3, 1] < [10, 4, 5]$, $[1, 1, 1] < [1, 2, 3]$, $[1, 2, 3] < [10, 10, 10]$。", "inputFormat": "第一行包含一个整数 $n$ $(1 \\leq n \\leq 5 \\cdot 10^5)$ —— 数组的元素个数。\n\n第二行包含 $n$ 个整数 $a_1, a_2, ..., a_n$ $(1 \\leq a_i \\leq 5 \\cdot 10^5)$ —— 数组的元素。\n", "outputFormat": "如果无法对哥萨克的数组进行排序，则输出单个数字 $-1$。\n\n否则，输出 $n$ 个整数 —— 哥萨克的数组的字典序最小排序。", "hint": "### 样例说明\n\n在第一个样例中，存在唯一的排序。\n\n在第二个样例中，还存在其他排序，例如：$[1, 2, 3, 4, 1, 2]$ 或 $[1, 4, 1, 2, 3, 2]$。但所有这些排序在字典序上都大于 $[1, 2, 1, 2, 3, 4]$。\n\n在第三个样例中，不存在有效的排序（数组中总会有两个 $1$ 出现在相邻位置）。\n\n### 评分细则\n\n本题采用 **按测试点** 评分。一些额外的限制条件：\n\n-   （5 分）： $n \\leq 10^3, a_i \\leq 2$\n-   （10 分）： $n \\leq 10^3, a_i \\leq 3$\n-   （25 分）： $n \\leq 10^3, a_i \\leq 5 \\cdot 10^5$\n-   （5 分）： $n \\leq 5 \\cdot 10^5, a_i \\leq 2$\n-   （10 分）： $n \\leq 5 \\cdot 10^5, a_i \\leq 3$\n-   （45 分）： $n \\leq 5 \\cdot 10^5, a_i \\leq 5 \\cdot 10^5$\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2021 II Stage] 字典序", "background": "", "description": "最近有人送给哥萨克一个包含 $n$ 个整数的数组 $a$。\n\n胡子立刻想要对数组的元素进行排序，使得排序后数组中任意两个相邻的数字都不相同。在所有这样的排序中，他想找到字典序最小的那个。\n\n回忆一下，字典序定义如下。假设有两个数组。找到第一个两个数组元素不同的位置。如果在该位置第一个数组的元素小于第二个数组的元素，则第一个数组字典序小于第二个数组；否则，第一个数组字典序大于第二个数组。例如，以下不等式成立：$[10, 3, 1] < [10, 4, 5]$, $[1, 1, 1] < [1, 2, 3]$, $[1, 2, 3] < [10, 10, 10]$。", "inputFormat": "第一行包含一个整数 $n$ $(1 \\leq n \\leq 5 \\cdot 10^5)$ —— 数组的元素个数。\n\n第二行包含 $n$ 个整数 $a_1, a_2, ..., a_n$ $(1 \\leq a_i \\leq 5 \\cdot 10^5)$ —— 数组的元素。\n", "outputFormat": "如果无法对哥萨克的数组进行排序，则输出单个数字 $-1$。\n\n否则，输出 $n$ 个整数 —— 哥萨克的数组的字典序最小排序。", "hint": "### 样例说明\n\n在第一个样例中，存在唯一的排序。\n\n在第二个样例中，还存在其他排序，例如：$[1, 2, 3, 4, 1, 2]$ 或 $[1, 4, 1, 2, 3, 2]$。但所有这些排序在字典序上都大于 $[1, 2, 1, 2, 3, 4]$。\n\n在第三个样例中，不存在有效的排序（数组中总会有两个 $1$ 出现在相邻位置）。\n\n### 评分细则\n\n本题采用 **按测试点** 评分。一些额外的限制条件：\n\n-   （5 分）： $n \\leq 10^3, a_i \\leq 2$\n-   （10 分）： $n \\leq 10^3, a_i \\leq 3$\n-   （25 分）： $n \\leq 10^3, a_i \\leq 5 \\cdot 10^5$\n-   （5 分）： $n \\leq 5 \\cdot 10^5, a_i \\leq 2$\n-   （10 分）： $n \\leq 5 \\cdot 10^5, a_i \\leq 3$\n-   （45 分）： $n \\leq 5 \\cdot 10^5, a_i \\leq 5 \\cdot 10^5$\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15034", "type": "P", "difficulty": 4, "samples": [["4\n1 4 2 3", "3"], ["6\n1 2 2 3 4 2", "0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2021", "UOI（乌克兰）"], "title": "[UOI 2021 II Stage] 奇迹之地", "background": "", "description": "最近，哥萨克胡子听说了一个有趣的地方，叫做奇迹之地，那里生长着结满金钱的树木。他决定种下 $n$ 棵钱树，并在第二年收获。\n\n当胡子回到奇迹之地视察时，他发现每棵树上至少长出了一枚硬币，并且第 $i$ 棵树上的硬币数量为 $a_i$。他觉得亲自收获太费时间，于是制造了一台机器，这台机器可以多次执行以下操作：\n\n-   选择一个正整数 $k$；\n-   找到当前硬币数至少为 $k$ 的第一棵树（即索引最小的树）；\n-   从该树上取走 $k$ 枚硬币。\n\n但在钱树养护手册中，哥萨克胡子了解到，收获后每棵树上必须至少留下一枚硬币，否则它们明年将不会结果。\n\n现在哥萨克胡子想知道，经过若干次操作后，这台机器最多能收获多少硬币。\n\n请注意，不同操作中选择的数字 $k$ 可以不同。", "inputFormat": "第一行包含一个整数 $n$ ($1 \\leq n \\leq 10^6$) —— 奇迹之地上的树的数量。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$ ($1 \\leq a_i \\leq 10^9$) —— 树上硬币的初始数量。\n", "outputFormat": "输出一个整数 —— 机器经过一系列操作后最多能收集到的硬币数量，同时确保每棵树上至少留下一枚硬币。\n", "hint": "### 样例说明\n\n在第二个样例中，无法选择一个 $k$ 使得能收集到至少一枚硬币，同时还能在每个树上都留下硬币。\n\n### 评分细则\n\n-   （4 分）： $n = 2$；\n-   （8 分）： $n = 3$；\n-   （7 分）： $a_i \\leq 2$；\n-   （13 分）： $a_i \\leq 3$；\n-   （7 分）： $10 \\leq a_i$；\n-   （19 分）： $a_i, n \\leq 1\\,000$；\n-   （42 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2021 II Stage] 奇迹之地", "background": "", "description": "最近，哥萨克胡子听说了一个有趣的地方，叫做奇迹之地，那里生长着结满金钱的树木。他决定种下 $n$ 棵钱树，并在第二年收获。\n\n当胡子回到奇迹之地视察时，他发现每棵树上至少长出了一枚硬币，并且第 $i$ 棵树上的硬币数量为 $a_i$。他觉得亲自收获太费时间，于是制造了一台机器，这台机器可以多次执行以下操作：\n\n-   选择一个正整数 $k$；\n-   找到当前硬币数至少为 $k$ 的第一棵树（即索引最小的树）；\n-   从该树上取走 $k$ 枚硬币。\n\n但在钱树养护手册中，哥萨克胡子了解到，收获后每棵树上必须至少留下一枚硬币，否则它们明年将不会结果。\n\n现在哥萨克胡子想知道，经过若干次操作后，这台机器最多能收获多少硬币。\n\n请注意，不同操作中选择的数字 $k$ 可以不同。", "inputFormat": "第一行包含一个整数 $n$ ($1 \\leq n \\leq 10^6$) —— 奇迹之地上的树的数量。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$ ($1 \\leq a_i \\leq 10^9$) —— 树上硬币的初始数量。\n", "outputFormat": "输出一个整数 —— 机器经过一系列操作后最多能收集到的硬币数量，同时确保每棵树上至少留下一枚硬币。\n", "hint": "### 样例说明\n\n在第二个样例中，无法选择一个 $k$ 使得能收集到至少一枚硬币，同时还能在每个树上都留下硬币。\n\n### 评分细则\n\n-   （4 分）： $n = 2$；\n-   （8 分）： $n = 3$；\n-   （7 分）： $a_i \\leq 2$；\n-   （13 分）： $a_i \\leq 3$；\n-   （7 分）： $10 \\leq a_i$；\n-   （19 分）： $a_i, n \\leq 1\\,000$；\n-   （42 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15035", "type": "P", "difficulty": 5, "samples": [["2 3\n01\n000", "Bob"], ["3 3\n000\n1\n01", "Alice"], ["2 1\n0\n1", "Bob"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "2021", "字典树 Trie", "UOI（乌克兰）"], "title": "[UOI 2021 II Stage] 游戏", "background": "双倍经验：<https://www.luogu.com.cn/problem/AT_arc087_c>", "description": "哥萨克胡子又为竞赛选手们想出了一道题！\n\n给定一个包含 $n$ 个字符串的集合 $s_1, s_2, \\ldots, s_n$ 以及一个数 $k$。\n\n一个字符串集合被称为 **优美** 的，当且仅当：\n\n-   每个字符串仅由 $0$ 和 $1$ 组成；\n-   每个字符串的长度不超过 $k$；\n-   没有一个字符串是另一个字符串的前缀。\n\n给定的集合是 **优美** 的。\n\n爱丽丝和鲍勃正在玩以下游戏。他们轮流行动。每次操作，可以向集合中添加一个字符串，前提是该集合在添加后仍然保持 **优美**。无法进行操作的一方失败。\n\n爱丽丝先手。请帮助他们确定，如果两人都采取最优策略，谁会获胜。", "inputFormat": "第一行包含两个整数 $n$ ($0 \\le n \\le 10^5, 1 \\le k \\le 10^{18}$) —— 分别表示集合中的字符串数量以及优美集合中字符串的最大长度。\n\n接下来是 $n$ 行。第 $i$ 行包含字符串 $s_i$ ($1 \\le |s_i| \\le 10^6$)。\n\n保证 $\\sum_{i=1}^{n}{|s_i|} \\le 10^6$。\n\n同时保证初始集合是 **优美** 的。", "outputFormat": "如果爱丽丝获胜，输出 Alice；如果鲍勃获胜，输出 Bob。\n", "hint": "### 评分细则\n\n-   （2 分）： $n = 0$；\n-   （6 分）： $k = 2$；\n-   （8 分）： $k = 3$；\n-   （12 分）： $k \\le 10$；\n-   （17 分）： $k \\le 20$；\n-   （20 分）： $k \\le 10^4$；\n-   （35 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2021 II Stage] 游戏", "background": "双倍经验：<https://www.luogu.com.cn/problem/AT_arc087_c>", "description": "哥萨克胡子又为竞赛选手们想出了一道题！\n\n给定一个包含 $n$ 个字符串的集合 $s_1, s_2, \\ldots, s_n$ 以及一个数 $k$。\n\n一个字符串集合被称为 **优美** 的，当且仅当：\n\n-   每个字符串仅由 $0$ 和 $1$ 组成；\n-   每个字符串的长度不超过 $k$；\n-   没有一个字符串是另一个字符串的前缀。\n\n给定的集合是 **优美** 的。\n\n爱丽丝和鲍勃正在玩以下游戏。他们轮流行动。每次操作，可以向集合中添加一个字符串，前提是该集合在添加后仍然保持 **优美**。无法进行操作的一方失败。\n\n爱丽丝先手。请帮助他们确定，如果两人都采取最优策略，谁会获胜。", "inputFormat": "第一行包含两个整数 $n$ ($0 \\le n \\le 10^5, 1 \\le k \\le 10^{18}$) —— 分别表示集合中的字符串数量以及优美集合中字符串的最大长度。\n\n接下来是 $n$ 行。第 $i$ 行包含字符串 $s_i$ ($1 \\le |s_i| \\le 10^6$)。\n\n保证 $\\sum_{i=1}^{n}{|s_i|} \\le 10^6$。\n\n同时保证初始集合是 **优美** 的。", "outputFormat": "如果爱丽丝获胜，输出 Alice；如果鲍勃获胜，输出 Bob。\n", "hint": "### 评分细则\n\n-   （2 分）： $n = 0$；\n-   （6 分）： $k = 2$；\n-   （8 分）： $k = 3$；\n-   （12 分）： $k \\le 10$；\n-   （17 分）： $k \\le 20$；\n-   （20 分）： $k \\le 10^4$；\n-   （35 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15036", "type": "P", "difficulty": 3, "samples": [["abca", "8\n1 a\n1 c\n1 b\n2 3\n1 b\n2 2\n2 3\n2 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "构造", "分类讨论"], "title": "「chaynOI R2 T1」构造字符串", "background": "", "description": "本题字符集 $\\Sigma = \\{\\text{a},\\text{b},\\text{c}\\}$，即默认所有字符为 $\\text{a},\\text{b},\\text{c}$ 中的一个。\n\nflow 有一个字符串 $T$ 和一个初始为空的字符串 $S$，其中 $|T|=n$，为了方便起见，保证 $T_1=\\text{a},T_2=\\text{b}$。\n\nflow 有两种操作：\n\n1. 向 $S$ 末尾添加一个字符 $x$，需要满足 $\\nexists 1\\le i\\le |S|,S_i=x$。\n2. 选择一个位置 $i$ 满足 $2\\le i\\le |S|$ 且 $S_i\\ne S_{i-1}$，将 $S_i$ 修改为 $x$ 满足 $x\\not\\in\\{S_{i-1},S_i\\}$（可以注意到，$x$ 唯一）。\n\n请你帮助 flow 在至多 $10^6$ 次操作后将 $S$ 修改为与 $T$ 相同，输出任意一个合法的解均可。\n\n数据保证有解。", "inputFormat": "一行一个字符串 $T$。", "outputFormat": "第一行一个正整数 $k$，表示你的操作次数，需要满足 $1\\le k\\le 10^6$。\n\n接下来 $k$ 行，每行为 `1 x` 或 `2 i`，表示操作 $1$ 加入字符 $x$ 或操作 $2$ 修改位置 $i$。", "hint": "### 样例 1 解释\n\n$S$ 的变换过程为 $\\text{[]}\\to\\text{[a]}\\to\\text{[ac]}\\to\\text{[acb]}\\to\\text{[aca]}\\to\\text{[acab]}\\to\\text{[abab]}\\to\\text{[abcb]}\\to\\text{[abca]}$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$3\\le n\\le222222$，$T_i\\in \\Sigma$。\n\n+ Subtask1(10pts)：$n\\le 5$。\n+ Subtask2(10pts)：$n\\le 1000$。\n+ Subtask3(10pts)：$\\forall 3\\le i\\le n$，$T_i=\\text{c}$。\n+ Subtask4(20pts)：$n\\le 2\\times10^5$。\n+ Subtask5(50pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「chaynOI R2 T1」构造字符串", "background": "", "description": "本题字符集 $\\Sigma = \\{\\text{a},\\text{b},\\text{c}\\}$，即默认所有字符为 $\\text{a},\\text{b},\\text{c}$ 中的一个。\n\nflow 有一个字符串 $T$ 和一个初始为空的字符串 $S$，其中 $|T|=n$，为了方便起见，保证 $T_1=\\text{a},T_2=\\text{b}$。\n\nflow 有两种操作：\n\n1. 向 $S$ 末尾添加一个字符 $x$，需要满足 $\\nexists 1\\le i\\le |S|,S_i=x$。\n2. 选择一个位置 $i$ 满足 $2\\le i\\le |S|$ 且 $S_i\\ne S_{i-1}$，将 $S_i$ 修改为 $x$ 满足 $x\\not\\in\\{S_{i-1},S_i\\}$（可以注意到，$x$ 唯一）。\n\n请你帮助 flow 在至多 $10^6$ 次操作后将 $S$ 修改为与 $T$ 相同，输出任意一个合法的解均可。\n\n数据保证有解。", "inputFormat": "一行一个字符串 $T$。", "outputFormat": "第一行一个正整数 $k$，表示你的操作次数，需要满足 $1\\le k\\le 10^6$。\n\n接下来 $k$ 行，每行为 `1 x` 或 `2 i`，表示操作 $1$ 加入字符 $x$ 或操作 $2$ 修改位置 $i$。", "hint": "### 样例 1 解释\n\n$S$ 的变换过程为 $\\text{[]}\\to\\text{[a]}\\to\\text{[ac]}\\to\\text{[acb]}\\to\\text{[aca]}\\to\\text{[acab]}\\to\\text{[abab]}\\to\\text{[abcb]}\\to\\text{[abca]}$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$3\\le n\\le222222$，$T_i\\in \\Sigma$。\n\n+ Subtask1(10pts)：$n\\le 5$。\n+ Subtask2(10pts)：$n\\le 1000$。\n+ Subtask3(10pts)：$\\forall 3\\le i\\le n$，$T_i=\\text{c}$。\n+ Subtask4(20pts)：$n\\le 2\\times10^5$。\n+ Subtask5(50pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P15037", "type": "P", "difficulty": 6, "samples": [["1", "0"], ["8\n1 1 3 2 2 3 1", "4"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "O2优化"], "title": "「chaynOI R2 T2」熟练地剖分", "background": "", "description": "flow 有一棵 $n$ 个点的**有根**树 $T$，根为 $1$，节点编号为 $1$ 至 $n$ 的正整数。\n\nflow 想要构造一个新的**有根**树序列 $T_0=T,T_1,T_2,\\dots$，满足 $T_{i+1}=f(T_i)$，对于所有 $i\\ge 0$ 成立。\n\n其中函数 $f(T)$ 定义如下（如有不理解，建议查看样例解释）：\n\n1. 定义一棵树 $T'$。\n2. 对 $T$ 做[**树链剖分（重链剖分）**](https://oi-wiki.org/graph/hld/#%E9%87%8D%E9%93%BE%E5%89%96%E5%88%86)，**若存在多个儿子子树大小相等则取儿子编号较小**的为重儿子。\n3. 设第 $2$ 步中所有**重链**为 $L_1,L_2,\\dots,L_k$，**则 $T'$ 中的所有点**编号为 $\\{u\\} = \\{\\min\\limits_{v_1\\in L_1}v_1,\\min\\limits_{v_2\\in L_2}v_2,\\dots,\\min\\limits_{v_k\\in L_k}v_k\\}$，可以证明，$L_i$ 的顺序不会改变最终 $T'$ 的结构。\n4. **若对于 $i\\ne j, \\exist x\\in L_i,y\\in L_j$，且 $T$ 中存在一条边 $(x,y)$，则 $T'$ 中存在一条边** $(u_i,u_j)$，可以发现这样操作后 $T'$ 一定为一棵 $k$ 个结点的树。\n5. **将 $T'$ 的根钦定为 $1$**（注意到一定存在一个 $i$ 使得 $u_i=1$），返回 $T'$。\n\nflow 给定了你 $T$，flow 想让你求出一个**最小**的 $m$，使得 $\\forall m'\\ge m,T_{m'}=T_m$，可以证明，在本题范围内，$m\\le10^9$。 ", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n-1$ 个整数 $fa_2,fa_3,\\dots,fa_n$，表示在以 $1$ 为根的情况下，$2\\sim n$ 的父亲节点。", "outputFormat": "一行一个整数，表示 $m$。", "hint": "### 样例 2 解释\n\n一开始的 $T_0$ 为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hrac7hq7.png)\n\n考虑 $f(T_0)$ 的过程：\n\n1. $k=5,L_1=\\{1,2,5\\},L_2=\\{6\\},L_3=\\{8\\},L_4=\\{3,4\\},L_5=\\{7\\}$，注意 $L_i$ 的顺序其实不重要。\n2. $T'$ 中的点： $\\{u\\}=\\{1,6,8,3,7\\}$。\n3. $T'$ 中的边：$\\{(1,3),(1,6),(1,8),(3,7)\\}$。\n\n+ 故 $T_1=f(T_0)$ 为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8wy8og10.png)\n\n+ 同理可得，$T_2=f(T_1)$ 为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7kj3vf1.png)\n\n+ $T_3=f(T_2)$ 为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1mghfllo.png)\n\n+ $T_4=f(T_3)$ 为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/356myhre.png)\n\n+ $T_5=f(T_4)$ 为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/356myhre.png)\n\n+ $T_6=f(T_5)$ 为······\n\n注意到对于 $m'\\ge 4$，$T_{m'}=T_4$，故最终 $m=4$。\n\n### 数据范围\n\n**请注意常数因子对程序运行效率带来的影响。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times10^6$，$1\\le fa_i<i$。\n\n+ Subtask1(10pts)：$n\\le5000$。\n+ Subtask2(5pts)：$T$ 的深度不超过 $2$（根节点的深度记为 $1$），$n\\le10^5$。\n+ Subtask3(15pts)：$T$ 的深度不超过 $3$，$n\\le10^5$。\n+ Subtask4(20pts)：$n\\le10^5$。\n+ Subtask5(15pts)：$n\\le5\\times10^5$。\n+ Subtask6(35pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「chaynOI R2 T2」熟练地剖分", "background": "", "description": "flow 有一棵 $n$ 个点的**有根**树 $T$，根为 $1$，节点编号为 $1$ 至 $n$ 的正整数。\n\nflow 想要构造一个新的**有根**树序列 $T_0=T,T_1,T_2,\\dots$，满足 $T_{i+1}=f(T_i)$，对于所有 $i\\ge 0$ 成立。\n\n其中函数 $f(T)$ 定义如下（如有不理解，建议查看样例解释）：\n\n1. 定义一棵树 $T'$。\n2. 对 $T$ 做[**树链剖分（重链剖分）**](https://oi-wiki.org/graph/hld/#%E9%87%8D%E9%93%BE%E5%89%96%E5%88%86)，**若存在多个儿子子树大小相等则取儿子编号较小**的为重儿子。\n3. 设第 $2$ 步中所有**重链**为 $L_1,L_2,\\dots,L_k$，**则 $T'$ 中的所有点**编号为 $\\{u\\} = \\{\\min\\limits_{v_1\\in L_1}v_1,\\min\\limits_{v_2\\in L_2}v_2,\\dots,\\min\\limits_{v_k\\in L_k}v_k\\}$，可以证明，$L_i$ 的顺序不会改变最终 $T'$ 的结构。\n4. **若对于 $i\\ne j, \\exist x\\in L_i,y\\in L_j$，且 $T$ 中存在一条边 $(x,y)$，则 $T'$ 中存在一条边** $(u_i,u_j)$，可以发现这样操作后 $T'$ 一定为一棵 $k$ 个结点的树。\n5. **将 $T'$ 的根钦定为 $1$**（注意到一定存在一个 $i$ 使得 $u_i=1$），返回 $T'$。\n\nflow 给定了你 $T$，flow 想让你求出一个**最小**的 $m$，使得 $\\forall m'\\ge m,T_{m'}=T_m$，可以证明，在本题范围内，$m\\le10^9$。 ", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n-1$ 个整数 $fa_2,fa_3,\\dots,fa_n$，表示在以 $1$ 为根的情况下，$2\\sim n$ 的父亲节点。", "outputFormat": "一行一个整数，表示 $m$。", "hint": "### 样例 2 解释\n\n一开始的 $T_0$ 为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hrac7hq7.png)\n\n考虑 $f(T_0)$ 的过程：\n\n1. $k=5,L_1=\\{1,2,5\\},L_2=\\{6\\},L_3=\\{8\\},L_4=\\{3,4\\},L_5=\\{7\\}$，注意 $L_i$ 的顺序其实不重要。\n2. $T'$ 中的点： $\\{u\\}=\\{1,6,8,3,7\\}$。\n3. $T'$ 中的边：$\\{(1,3),(1,6),(1,8),(3,7)\\}$。\n\n+ 故 $T_1=f(T_0)$ 为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8wy8og10.png)\n\n+ 同理可得，$T_2=f(T_1)$ 为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7kj3vf1.png)\n\n+ $T_3=f(T_2)$ 为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1mghfllo.png)\n\n+ $T_4=f(T_3)$ 为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/356myhre.png)\n\n+ $T_5=f(T_4)$ 为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/356myhre.png)\n\n+ $T_6=f(T_5)$ 为······\n\n注意到对于 $m'\\ge 4$，$T_{m'}=T_4$，故最终 $m=4$。\n\n### 数据范围\n\n**请注意常数因子对程序运行效率带来的影响。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times10^6$，$1\\le fa_i<i$。\n\n+ Subtask1(10pts)：$n\\le5000$。\n+ Subtask2(5pts)：$T$ 的深度不超过 $2$（根节点的深度记为 $1$），$n\\le10^5$。\n+ Subtask3(15pts)：$T$ 的深度不超过 $3$，$n\\le10^5$。\n+ Subtask4(20pts)：$n\\le10^5$。\n+ Subtask5(15pts)：$n\\le5\\times10^5$。\n+ Subtask6(35pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P15038", "type": "P", "difficulty": 5, "samples": [["7 40 2 1\n10 20 30 0 30 20 10", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "其它技巧", "随机化"], "title": "「chaynOI R2 T3」合并同类项", "background": "", "description": "flow 有一个长度为 $n$ 的整数序列 $\\{a\\}$，和一个常数 $k$。\n\nflow 想要简化这个序列使得其只剩下**恰好一个数**，他可以进行 $n-1$ 次以下两种操作：\n\n1. 花费 $x$ 的代价，选择 $1\\le i<n$，记 $s=(a_i+a_{i+1}) \\bmod k$，将 $a_i\\gets s$，删去 $a_{i+1}$。\n2. 花费 $y$ 的代价，选择 $1\\le i\\le n$，满足 $a_i=0$，删去 $a_i$。\n\n操作后令 $n\\gets n-1$。\n\nflow 想要让最终代价 $cost$ **最小**。请你找出这个值。\n\n本题的 $\\{a\\}$ 生成方式较为特殊，具体参见数据范围。", "inputFormat": "第一行四个整数 $n,k,x,y$。\n\n第二行 $n$ 个整数，表示 $a_i$。", "outputFormat": "一行一个正整数 $cost$。\n", "hint": "### 样例 1 解释\n\n一种可能的方案为：\n\n1. 使用操作 $2$，选择位置 $4$，序列变为 $\\{10,20,30,30,20,10\\}$，总花费为 $1$。\n1. 使用操作 $1$，选择位置 $2$，序列变为 $\\{10,10,30,20,10\\}$，总花费为 $3$。\n1. 使用操作 $1$，选择位置 $2$，序列变为 $\\{10,0,20,10\\}$，总花费为 $5$。\n1. 使用操作 $2$，选择位置 $2$，序列变为 $\\{10,20,10\\}$，总花费为 $6$。\n1. 使用操作 $1$，选择位置 $1$，序列变为 $\\{30,10\\}$，总花费为 $8$。\n1. 使用操作 $1$，选择位置 $1$，序列变为 $\\{0\\}$，总花费为 $10$。\n\n可以证明，$cost_{\\min}=10$。 \n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le6000$，$2\\le k \\le 10^4$，$0\\le a_i<k$，$1\\le x,y \\le 10^5$，保证 $a_i$ 在 $[0,k)$ 内独立均匀随机生成。\n\n+ Subtask1(10pts)：$n\\le10$。\n+ Subtask2(15pts)：$n,k\\le80$。\n+ Subtask3(25pts)：$n\\le500$。\n+ Subtask4(10pts)：$k\\ge 9000$。\n+ Subtask5(40pts)：$k\\ge400$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「chaynOI R2 T3」合并同类项", "background": "", "description": "flow 有一个长度为 $n$ 的整数序列 $\\{a\\}$，和一个常数 $k$。\n\nflow 想要简化这个序列使得其只剩下**恰好一个数**，他可以进行 $n-1$ 次以下两种操作：\n\n1. 花费 $x$ 的代价，选择 $1\\le i<n$，记 $s=(a_i+a_{i+1}) \\bmod k$，将 $a_i\\gets s$，删去 $a_{i+1}$。\n2. 花费 $y$ 的代价，选择 $1\\le i\\le n$，满足 $a_i=0$，删去 $a_i$。\n\n操作后令 $n\\gets n-1$。\n\nflow 想要让最终代价 $cost$ **最小**。请你找出这个值。\n\n本题的 $\\{a\\}$ 生成方式较为特殊，具体参见数据范围。", "inputFormat": "第一行四个整数 $n,k,x,y$。\n\n第二行 $n$ 个整数，表示 $a_i$。", "outputFormat": "一行一个正整数 $cost$。\n", "hint": "### 样例 1 解释\n\n一种可能的方案为：\n\n1. 使用操作 $2$，选择位置 $4$，序列变为 $\\{10,20,30,30,20,10\\}$，总花费为 $1$。\n1. 使用操作 $1$，选择位置 $2$，序列变为 $\\{10,10,30,20,10\\}$，总花费为 $3$。\n1. 使用操作 $1$，选择位置 $2$，序列变为 $\\{10,0,20,10\\}$，总花费为 $5$。\n1. 使用操作 $2$，选择位置 $2$，序列变为 $\\{10,20,10\\}$，总花费为 $6$。\n1. 使用操作 $1$，选择位置 $1$，序列变为 $\\{30,10\\}$，总花费为 $8$。\n1. 使用操作 $1$，选择位置 $1$，序列变为 $\\{0\\}$，总花费为 $10$。\n\n可以证明，$cost_{\\min}=10$。 \n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le6000$，$2\\le k \\le 10^4$，$0\\le a_i<k$，$1\\le x,y \\le 10^5$，保证 $a_i$ 在 $[0,k)$ 内独立均匀随机生成。\n\n+ Subtask1(10pts)：$n\\le10$。\n+ Subtask2(15pts)：$n,k\\le80$。\n+ Subtask3(25pts)：$n\\le500$。\n+ Subtask4(10pts)：$k\\ge 9000$。\n+ Subtask5(40pts)：$k\\ge400$。\n", "locale": "zh-CN"}}}
{"pid": "P15039", "type": "P", "difficulty": 6, "samples": [["3 3\n1 9\n2 7\n3 5\n4 11\n3 11\n2 11", "0.166666666666667\n0.777777777777778\n0.200000000000000"], ["2 3\n2 3\n1 3\n2 3\n2 4\n1 5", "1.000000000000000\n0.666666666666667\n0.200000000000000"], ["15 15\n292779 375199\n116635 225902\n148578 226068\n87307 451405\n253236 726584\n7605 375809\n126859 270213\n591988 654709\n196632 352761\n1773 222995\n434502 573614\n10721 102369\n9513 26136\n48256 550119\n55076 105412\n101605 809526\n227659 911420\n404295 854806\n51424 889903\n662575 874892\n602228 826245\n571439 915011\n587102 963048\n681507 927659\n282201 890538\n939465 950708\n426980 913775\n335175 864072\n360417 839341\n826102 957348\n", "0.000012713265021\n0.000042412418356\n0.000005159760754\n0.000056053811659\n0.000000636912172\n0.000007470291672\n0.000002910589598\n0.000029259443485\n0.000001160644711\n0.000003287646013\n0.000000000000000\n0.000004108497194\n0.000003781447462\n0.000002088009605\n0.000000000000000\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "数论", "Special Judge", "O2优化", "斜率优化", "最大公约数 gcd", "凸包", "2026", "洛谷比赛"], "title": " 「chaynOI R2 T4」无限的信息", "background": "", "description": "flow 收到了一大串信息！\n\n具体来说，flow 一开始有 $n$ 条信息，每条信息是一个**无限长的**数字序列，构成了数据库 $S=\\{d_1,d_2,\\dots,d_n\\}$。\n\n每条信息以 $d_i=f(l_i,r_i)$ 给出，其中 $f(l,r)$ 表示将 $l\\sim r$ 的数字不断重复写出的序列，比如 $f(11,14)=\\{11,12,13,14,11,12,13,14,11\\dots\\}$。\n\n定义两条信息 $d,d'$ 的相似性为 $F(d,d')=\\max\\limits_{x\\in \\N}\\left(\\lim\\limits_{n\\to +\\infty}\\dfrac{\\sum\\limits_{i=1}^n [d_i=d'_{i+x}]}{n}\\right)$。可以证明，这个极限会收敛到一个确定的数字，其中 $[P]$ 为艾弗森括号，当 $P$ 为真是值为 $1$，否则为 $0$。\n\n现在 flow 又收到了 $q$ 条信息 $D=f(L,R)$，由于消息在不断的更新迭代，所以 flow 保证这次的消息 $R$ 不小于数据库中**所有**消息的 $r_i$。\n\nflow 想要请你求出 $\\max\\limits_{i=1}^nF(D,d_i)$ 的值，以便继续分析。\n\n", "inputFormat": "第一行输入两个正整数 $n,q$。\n\n接下来 $n$ 行，每行两个正整数 $l_i,r_i$。\n\n接下来 $q$ 行，每行两个正整数 $L,R$。", "outputFormat": "共 $q$ 行，每行输出一个小数，表示答案。\n\n你的结果与标准答案的绝对误差不超过 $10^{-13}$ 即被认为正确。", "hint": "### 样例 2 解释\n\n$d_1=\\{2,3,2,3,2,3,\\dots\\}$，$d_2=\\{1,2,3,1,2,3,\\dots\\}$。\n\n对于第一次询问，$D=\\{2,3,2,3,2,3,\\dots\\}$，与 $d_1$ 相等，所以易得 $\\max\\limits_{i=1}^nF(D,d_i)=F(D,d_1)=1$。\n\n对于第二次询问，$D=\\{2,3,4,2,3,4,\\dots\\}$，可以证明，$F(D,d_1)=\\frac{1}{3}(x=0),F(D,d_2)=\\frac{2}{3}(x=1)$，所以 $\\max\\limits_{i=1}^nF(D,d_i)=F(D,d_2)=\\frac{2}{3}$。\n\n对于第三次询问，可以证明，$F(D,d_1)=F(D,d_2)=\\frac{1}{5}$，所以 $\\max\\limits_{i=1}^nF(D,d_i)=\\frac{1}{5}$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^6$，$1\\le q\\le10^5$，$1\\le l_i\\le r_i\\le8\\times10^5$，$1\\le L\\le R\\le 10^6$，$r_i\\le R$。\n\n请注意可能存在的精度问题。\n\n+ Subtask1(5pts)：$n,q,R\\le 20$。\n+ Subtask2(5pts)：$n,q,R\\le 80$。\n+ Subtask3(10pts)：$n,q,R\\le 1000$。\n+ Subtask4(8pts)：$L \\le l_i$。\n+ Subtask5(12pts)：$L \\ge l_i$。\n+ Subtask6(10pts)：$n,R\\le10^5,q\\le5000$。\n+ Subtask7(17pts)：$n,R\\le3\\times10^5,q\\le20000$。\n+ Subtask8(8pts)：$R\\le3\\times10^5,q\\le30000$。\n+ Subtask9(25pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": " 「chaynOI R2 T4」无限的信息", "background": "", "description": "flow 收到了一大串信息！\n\n具体来说，flow 一开始有 $n$ 条信息，每条信息是一个**无限长的**数字序列，构成了数据库 $S=\\{d_1,d_2,\\dots,d_n\\}$。\n\n每条信息以 $d_i=f(l_i,r_i)$ 给出，其中 $f(l,r)$ 表示将 $l\\sim r$ 的数字不断重复写出的序列，比如 $f(11,14)=\\{11,12,13,14,11,12,13,14,11\\dots\\}$。\n\n定义两条信息 $d,d'$ 的相似性为 $F(d,d')=\\max\\limits_{x\\in \\N}\\left(\\lim\\limits_{n\\to +\\infty}\\dfrac{\\sum\\limits_{i=1}^n [d_i=d'_{i+x}]}{n}\\right)$。可以证明，这个极限会收敛到一个确定的数字，其中 $[P]$ 为艾弗森括号，当 $P$ 为真是值为 $1$，否则为 $0$。\n\n现在 flow 又收到了 $q$ 条信息 $D=f(L,R)$，由于消息在不断的更新迭代，所以 flow 保证这次的消息 $R$ 不小于数据库中**所有**消息的 $r_i$。\n\nflow 想要请你求出 $\\max\\limits_{i=1}^nF(D,d_i)$ 的值，以便继续分析。\n\n", "inputFormat": "第一行输入两个正整数 $n,q$。\n\n接下来 $n$ 行，每行两个正整数 $l_i,r_i$。\n\n接下来 $q$ 行，每行两个正整数 $L,R$。", "outputFormat": "共 $q$ 行，每行输出一个小数，表示答案。\n\n你的结果与标准答案的绝对误差不超过 $10^{-13}$ 即被认为正确。", "hint": "### 样例 2 解释\n\n$d_1=\\{2,3,2,3,2,3,\\dots\\}$，$d_2=\\{1,2,3,1,2,3,\\dots\\}$。\n\n对于第一次询问，$D=\\{2,3,2,3,2,3,\\dots\\}$，与 $d_1$ 相等，所以易得 $\\max\\limits_{i=1}^nF(D,d_i)=F(D,d_1)=1$。\n\n对于第二次询问，$D=\\{2,3,4,2,3,4,\\dots\\}$，可以证明，$F(D,d_1)=\\frac{1}{3}(x=0),F(D,d_2)=\\frac{2}{3}(x=1)$，所以 $\\max\\limits_{i=1}^nF(D,d_i)=F(D,d_2)=\\frac{2}{3}$。\n\n对于第三次询问，可以证明，$F(D,d_1)=F(D,d_2)=\\frac{1}{5}$，所以 $\\max\\limits_{i=1}^nF(D,d_i)=\\frac{1}{5}$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^6$，$1\\le q\\le10^5$，$1\\le l_i\\le r_i\\le8\\times10^5$，$1\\le L\\le R\\le 10^6$，$r_i\\le R$。\n\n请注意可能存在的精度问题。\n\n+ Subtask1(5pts)：$n,q,R\\le 20$。\n+ Subtask2(5pts)：$n,q,R\\le 80$。\n+ Subtask3(10pts)：$n,q,R\\le 1000$。\n+ Subtask4(8pts)：$L \\le l_i$。\n+ Subtask5(12pts)：$L \\ge l_i$。\n+ Subtask6(10pts)：$n,R\\le10^5,q\\le5000$。\n+ Subtask7(17pts)：$n,R\\le3\\times10^5,q\\le20000$。\n+ Subtask8(8pts)：$R\\le3\\times10^5,q\\le30000$。\n+ Subtask9(25pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P15040", "type": "P", "difficulty": 1, "samples": [["5 2 3 4", "4"], ["6 3 2 4", "6"], ["10 3 3 6", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "数学", "2022", "UOI（乌克兰）"], "title": "[UOI 2022 II Stage] 竞赛", "background": "", "description": "克索尼亚和她的班级在竞赛开始前 $t$ 分钟到达。由于防疫限制，组织者允许学生每 $w$ 分钟以 $m$ 人为一组进入考场。\n\n换句话说，第一批 $m$ 名学生将在竞赛开始前 $t$ 分钟进入考场。下一批 $m$ 名学生将在开始前 $t-w$ 分钟进入。再下一批 $m$ 名学生将在开始前 $t-2w$ 分钟进入，依此类推。学生甚至可以在开始前 $0$ 分钟（即竞赛开始时）进入。但是，学生不能在竞赛开始后进入。\n\n班级总共有 $n$ 名学生（包括克索尼亚）。有多少学生能在竞赛开始前进入考场？", "inputFormat": "第一行包含四个整数 $n$、$m$、$w$、$t$ ($1 \\leq n, m, w, t \\leq 1\\,000$)。", "outputFormat": "输出一个数字 —— 能及时参加竞赛的学生数量。", "hint": "### 样例说明\n\n第一个样例的说明：\n\n-   开始前 $4$ 分钟，一组两名学生进入考场。\n-   开始前 $3$ 分钟，剩余三名学生等待。\n-   开始前 $2$ 分钟，剩余三名学生等待。\n-   开始前 $1$ 分钟，又有两名学生进入考场。\n-   开始前 $0$ 分钟，剩余一名学生等待。由于时间已到，只有四名学生成功进入。\n\n第二个样例的说明：\n\n-   开始前 $4$ 分钟，一组三名学生进入考场。\n-   开始前 $3$ 分钟，剩余三名学生等待。\n-   开始前 $2$ 分钟，又有一组三名学生可以进入考场。由于没有更多学生，因此所有 $6$ 名学生都成功进入。\n\n第三个样例的说明：\n\n-   开始前 $6$ 分钟，一组三名学生进入考场。\n-   开始前 $4$ 分钟，剩余的七名学生等待。\n-   开始前 $3$ 分钟，又有一组三名学生可以进入考场。\n-   开始前 $1$ 分钟，剩余的四名学生等待。\n-   开始前 $0$ 分钟，一组三名学生进入考场。\n-   时间耗尽，因此共有 $9$ 名学生进入。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2022 II Stage] 竞赛", "background": "", "description": "克索尼亚和她的班级在竞赛开始前 $t$ 分钟到达。由于防疫限制，组织者允许学生每 $w$ 分钟以 $m$ 人为一组进入考场。\n\n换句话说，第一批 $m$ 名学生将在竞赛开始前 $t$ 分钟进入考场。下一批 $m$ 名学生将在开始前 $t-w$ 分钟进入。再下一批 $m$ 名学生将在开始前 $t-2w$ 分钟进入，依此类推。学生甚至可以在开始前 $0$ 分钟（即竞赛开始时）进入。但是，学生不能在竞赛开始后进入。\n\n班级总共有 $n$ 名学生（包括克索尼亚）。有多少学生能在竞赛开始前进入考场？", "inputFormat": "第一行包含四个整数 $n$、$m$、$w$、$t$ ($1 \\leq n, m, w, t \\leq 1\\,000$)。", "outputFormat": "输出一个数字 —— 能及时参加竞赛的学生数量。", "hint": "### 样例说明\n\n第一个样例的说明：\n\n-   开始前 $4$ 分钟，一组两名学生进入考场。\n-   开始前 $3$ 分钟，剩余三名学生等待。\n-   开始前 $2$ 分钟，剩余三名学生等待。\n-   开始前 $1$ 分钟，又有两名学生进入考场。\n-   开始前 $0$ 分钟，剩余一名学生等待。由于时间已到，只有四名学生成功进入。\n\n第二个样例的说明：\n\n-   开始前 $4$ 分钟，一组三名学生进入考场。\n-   开始前 $3$ 分钟，剩余三名学生等待。\n-   开始前 $2$ 分钟，又有一组三名学生可以进入考场。由于没有更多学生，因此所有 $6$ 名学生都成功进入。\n\n第三个样例的说明：\n\n-   开始前 $6$ 分钟，一组三名学生进入考场。\n-   开始前 $4$ 分钟，剩余的七名学生等待。\n-   开始前 $3$ 分钟，又有一组三名学生可以进入考场。\n-   开始前 $1$ 分钟，剩余的四名学生等待。\n-   开始前 $0$ 分钟，一组三名学生进入考场。\n-   时间耗尽，因此共有 $9$ 名学生进入。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15041", "type": "P", "difficulty": 2, "samples": [["4\nbcda", "4"], ["5\nedcba", "1"], ["8\nbcmnopza", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2022", "UOI（乌克兰）"], "title": "[UOI 2022 II Stage] 字母环", "background": null, "description": "克索尼亚正在学习英语字母表。她认为一个字符串是 **按字母顺序的**，当且仅当其中的所有字母在字母表中都是连续的。\n\n例如，字符串 **abc**、**xy**、**fg** 是 **按字母顺序的**，而 **adef**、**zxc**、**zab** 则不是。\n\n克索尼亚有一个环，上面写有字母。克索尼亚希望在这个环上找到最长的 **按字母顺序的** 字符串，并说出它的长度。\n\n一个字符串属于这个环，当且仅当它的所有字符在环上是相邻的。在环中，相邻的字符是编号为 $1$ 和 $2$、$2$ 和 $3$、……、$n-1$ 和 $n$、$n$ 和 $1$ 的字符。例如，字符串 **abc** 属于环 **bcda**，而字符串 **bda** 不属于。", "inputFormat": "第一行包含一个整数 $n$ ($1 \\leq n \\leq 10^4$) —— 环的长度。\n\n第二行包含一个长度为 $n$ 的小写拉丁字母字符串 —— 字母环。", "outputFormat": "输出一个数字 —— 属于该环的最长 **按字母顺序的** 字符串的长度。", "hint": "### 样例说明\n\n第一个测试用例的说明：\n\n字符串 **abcd** 符合条件（索引 4, 1, 2, 3 相邻），并且它是最长的。\n\n第二个测试用例的说明：\n\n在所有只有一个字母的 **按字母顺序的** 字符串中，字符串 **a** 是最小的。\n\n第三个测试用例的说明：\n\n在所有 **按字母顺序的** 字符串中，字符串 **mnop** 是最长的。\n\n完整的英文字母表按顺序排列：\n\n**abcdefghijklmnopqrstuvwxyz**。\n\n### 评分细则\n\n如果最长的 **按字母顺序的** 字符串恰好属于输入数据中的字符串（而不是环），那么能正确解决这种情况的解决方案将获得 $60$ 分。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2022 II Stage] 字母环", "background": null, "description": "克索尼亚正在学习英语字母表。她认为一个字符串是 **按字母顺序的**，当且仅当其中的所有字母在字母表中都是连续的。\n\n例如，字符串 **abc**、**xy**、**fg** 是 **按字母顺序的**，而 **adef**、**zxc**、**zab** 则不是。\n\n克索尼亚有一个环，上面写有字母。克索尼亚希望在这个环上找到最长的 **按字母顺序的** 字符串，并说出它的长度。\n\n一个字符串属于这个环，当且仅当它的所有字符在环上是相邻的。在环中，相邻的字符是编号为 $1$ 和 $2$、$2$ 和 $3$、……、$n-1$ 和 $n$、$n$ 和 $1$ 的字符。例如，字符串 **abc** 属于环 **bcda**，而字符串 **bda** 不属于。", "inputFormat": "第一行包含一个整数 $n$ ($1 \\leq n \\leq 10^4$) —— 环的长度。\n\n第二行包含一个长度为 $n$ 的小写拉丁字母字符串 —— 字母环。", "outputFormat": "输出一个数字 —— 属于该环的最长 **按字母顺序的** 字符串的长度。", "hint": "### 样例说明\n\n第一个测试用例的说明：\n\n字符串 **abcd** 符合条件（索引 4, 1, 2, 3 相邻），并且它是最长的。\n\n第二个测试用例的说明：\n\n在所有只有一个字母的 **按字母顺序的** 字符串中，字符串 **a** 是最小的。\n\n第三个测试用例的说明：\n\n在所有 **按字母顺序的** 字符串中，字符串 **mnop** 是最长的。\n\n完整的英文字母表按顺序排列：\n\n**abcdefghijklmnopqrstuvwxyz**。\n\n### 评分细则\n\n如果最长的 **按字母顺序的** 字符串恰好属于输入数据中的字符串（而不是环），那么能正确解决这种情况的解决方案将获得 $60$ 分。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15042", "type": "P", "difficulty": 4, "samples": [["2 2", "3 5\n.....\nBWBW.\n....."], ["3 4", "3 7\n.......\nBWBWBWB\n......."], ["3 100", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "构造", "UOI（乌克兰）"], "title": "[UOI 2022 II Stage] 双色图形", "background": "", "description": "克索尼亚生日时收到一块无限大的棋盘，其中每个格子被涂成黑色或白色。她想从上面剪出一个连通图形，但这个图形需要恰好包含 $b$ 个黑格和 $w$ 个白格。图形不一定需要完全填充，但必须是连通的。\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p1gclb0x.png)\n\n一个符合要求的图形示例。中间的格子未被填充并不重要，关键是图形必须是连通的。该图形有四个白格和四个黑格\n:::\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/txk6wn82.png)\n\n一个不符合要求的图形示例，因为它不连通。\n:::\n\n请帮助克索尼亚找到任意一个这样的图形，或者说明它不存在。", "inputFormat": "第一行包含两个整数 $w$ 和 $b$ ($0 \\leq w, b \\leq 100$) —— 分别表示白格和黑格的数量。\n", "outputFormat": "如果解不存在，则输出单个数字 $-1$。\n\n否则，在第一行输出两个整数 $n$、$m$ ($1 \\leq n, m \\leq 250$) —— 包含所求图形的矩形区域的尺寸。可以证明，如果解存在，则存在满足此限制的解决方案。\n\n接下来输出 $n$ 行，每行包含 $m$ 个字符 —— 描述该图形。如果矩形中的格子为空，输出 **.**；如果该格子是白格，输出 **W**；如果该格子是黑格，输出 **B**。\n\n从这个矩形区域中得到的图形必须是连通的，恰好包含 $w$ 个白格和 $b$ 个黑格，并且按照棋盘模式涂色（与白格相邻的只能是空格或黑格，与黑格相邻的只能是空格或白格）。", "hint": "### 评分细则\n\n对于 $w = b$ 的情况能正确运行的解决方案，将至少获得 $30$ 分。\n\n对于满足 $\\max(w, b) \\le 2 \\cdot \\min(w, b)$ 的情况能正确运行的解决方案，将至少获得 $60$ 分。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2022 II Stage] 双色图形", "background": "", "description": "克索尼亚生日时收到一块无限大的棋盘，其中每个格子被涂成黑色或白色。她想从上面剪出一个连通图形，但这个图形需要恰好包含 $b$ 个黑格和 $w$ 个白格。图形不一定需要完全填充，但必须是连通的。\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p1gclb0x.png)\n\n一个符合要求的图形示例。中间的格子未被填充并不重要，关键是图形必须是连通的。该图形有四个白格和四个黑格\n:::\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/txk6wn82.png)\n\n一个不符合要求的图形示例，因为它不连通。\n:::\n\n请帮助克索尼亚找到任意一个这样的图形，或者说明它不存在。", "inputFormat": "第一行包含两个整数 $w$ 和 $b$ ($0 \\leq w, b \\leq 100$) —— 分别表示白格和黑格的数量。\n", "outputFormat": "如果解不存在，则输出单个数字 $-1$。\n\n否则，在第一行输出两个整数 $n$、$m$ ($1 \\leq n, m \\leq 250$) —— 包含所求图形的矩形区域的尺寸。可以证明，如果解存在，则存在满足此限制的解决方案。\n\n接下来输出 $n$ 行，每行包含 $m$ 个字符 —— 描述该图形。如果矩形中的格子为空，输出 **.**；如果该格子是白格，输出 **W**；如果该格子是黑格，输出 **B**。\n\n从这个矩形区域中得到的图形必须是连通的，恰好包含 $w$ 个白格和 $b$ 个黑格，并且按照棋盘模式涂色（与白格相邻的只能是空格或黑格，与黑格相邻的只能是空格或白格）。", "hint": "### 评分细则\n\n对于 $w = b$ 的情况能正确运行的解决方案，将至少获得 $30$ 分。\n\n对于满足 $\\max(w, b) \\le 2 \\cdot \\min(w, b)$ 的情况能正确运行的解决方案，将至少获得 $60$ 分。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15043", "type": "P", "difficulty": 5, "samples": [["4 0\n1 2 1\n1 3 2\n2 3 3\n2 4 3", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "基环树", "UOI（乌克兰）"], "title": "[UOI 2022 II Stage] 图", "background": "", "description": "克索尼亚所在的城市由 $n$ 个交叉路口组成，这些路口之间通过 $n$ 条双向道路连接。\n\n交叉路口编号为 $1$ 到 $n$。道路也编号为 $1$ 到 $n$。第 $i$ 条道路连接编号为 $a_i$ 和 $b_i$ 的交叉路口，其长度为 $c_i$。\n\n已知，通过现有道路可以从任何一个交叉路口到达任何其他交叉路口。任意两个交叉路口之间最多有一条道路。没有连接同一交叉路口的道路。\n\n定义 $dist(x, y)$ 为交叉路口 $x$ 和 $y$ 之间最短路径的长度。\n\n克索尼亚希望找到城市中的两个交叉路口 $u$ 和 $v$，使得 $dist(u, v)$ 在所有可能的 $u, v$ 对中是最大的。", "inputFormat": "第一行包含两个整数 $n$ 和 $g$ ($3 \\leq n \\leq 200\\,000$, $0 \\leq g \\leq 5$) —— 分别表示城市中的交叉路口数量和测试组编号。\n\n接下来的 $n$ 行，每行包含三个整数 $a_i$、$b_i$、$c_i$ ($1 \\leq a_i, b_i \\leq n$, $1 \\leq c_i \\leq 10^9$)。\n\n保证使用道路可以从任何一个交叉路口到达任何其他交叉路口。\n\n保证没有连接同一交叉路口的道路。\n\n保证任意两个交叉路口之间最多有一条道路。\n", "outputFormat": "输出所有交叉路口对 $u, v$ 中最大的 $dist(u, v)$ 值。\n", "hint": "### 样例说明\n\n第一个样例的说明：\n\n$dist(1, 2) = 1$\n\n$dist(1, 3) = 2$\n\n$dist(1, 4) = 4$\n\n$dist(2, 3) = 3$\n\n$dist(2, 4) = 3$\n\n$dist(3, 4) = 6$\n\n因此，最大的 $dist(u, v) = 6$。\n\n### 评分细则\n\n-   （22 分）： 图的结构为一个简单环。\n-   （17 分）： $n \\leq 200$。\n-   （24 分）： 图中每个环的长度不超过 1000。\n-   （9 分）： $c_i = 1$。\n-   （28 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2022 II Stage] 图", "background": "", "description": "克索尼亚所在的城市由 $n$ 个交叉路口组成，这些路口之间通过 $n$ 条双向道路连接。\n\n交叉路口编号为 $1$ 到 $n$。道路也编号为 $1$ 到 $n$。第 $i$ 条道路连接编号为 $a_i$ 和 $b_i$ 的交叉路口，其长度为 $c_i$。\n\n已知，通过现有道路可以从任何一个交叉路口到达任何其他交叉路口。任意两个交叉路口之间最多有一条道路。没有连接同一交叉路口的道路。\n\n定义 $dist(x, y)$ 为交叉路口 $x$ 和 $y$ 之间最短路径的长度。\n\n克索尼亚希望找到城市中的两个交叉路口 $u$ 和 $v$，使得 $dist(u, v)$ 在所有可能的 $u, v$ 对中是最大的。", "inputFormat": "第一行包含两个整数 $n$ 和 $g$ ($3 \\leq n \\leq 200\\,000$, $0 \\leq g \\leq 5$) —— 分别表示城市中的交叉路口数量和测试组编号。\n\n接下来的 $n$ 行，每行包含三个整数 $a_i$、$b_i$、$c_i$ ($1 \\leq a_i, b_i \\leq n$, $1 \\leq c_i \\leq 10^9$)。\n\n保证使用道路可以从任何一个交叉路口到达任何其他交叉路口。\n\n保证没有连接同一交叉路口的道路。\n\n保证任意两个交叉路口之间最多有一条道路。\n", "outputFormat": "输出所有交叉路口对 $u, v$ 中最大的 $dist(u, v)$ 值。\n", "hint": "### 样例说明\n\n第一个样例的说明：\n\n$dist(1, 2) = 1$\n\n$dist(1, 3) = 2$\n\n$dist(1, 4) = 4$\n\n$dist(2, 3) = 3$\n\n$dist(2, 4) = 3$\n\n$dist(3, 4) = 6$\n\n因此，最大的 $dist(u, v) = 6$。\n\n### 评分细则\n\n-   （22 分）： 图的结构为一个简单环。\n-   （17 分）： $n \\leq 200$。\n-   （24 分）： 图中每个环的长度不超过 1000。\n-   （9 分）： $c_i = 1$。\n-   （28 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15044", "type": "P", "difficulty": 6, "samples": [["5 0\n1 2\n1 5\n2 3\n2 4\n4 2 3 1 2\n7\n2 2 4\n2 1 2\n2 2 3\n1 3 4\n2 5 1\n2 2 8\n2 1 5", "3\n1\n2\n0\n7\n4"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2022", "线性基", "UOI（乌克兰）"], "title": "[UOI 2022 II Stage] 树", "background": "", "description": "克索尼亚有一棵以顶点 $1$ 为根、包含 $n$ 个顶点的有根树，每个顶点上写有一个数字。在第 $i$ 个顶点上写有数字 $a_i$。\n\n回忆一下，树是一种无环连通图。有根树是指在树中选择一个顶点作为根。\n\n在有根树中，顶点 $v$ 的祖先是指从 $v$ 到根路径上的所有顶点（不包括顶点 $v$ 本身）。顶点 $v$ 的子树是指所有以 $v$ 为祖先的顶点集合，包括顶点 $v$ 本身。\n\n集合 $S = (u_1, u_2, u_3, \\dots, u_k)$ 的 XOR 和定义为数字 $u_1 \\oplus u_2 \\oplus u_3 \\oplus \\dots \\oplus u_k$，其中 $\\oplus$ 是按位异或操作，在 Pascal 语言中记为 `xor`，在 C++/Java/Python 语言中记为 `^`。\n\n对于数字集合 $S$，考虑其所有可能子集的 XOR 和构成的集合。称此集合为 $F(S)$。\n\n克索尼亚的朋友不断问她这样的问题——“如果考虑顶点 $v$ 的子树中所有数字的集合（记为 $U_v$），那么集合 $F(U_v)$ 中按升序排列的第 $k$ 个数是什么？”也就是说，如果取出顶点 $v$ 子树中的所有数字，考虑它们所有子集的 XOR 和，那么在得到的集合中，按升序排列的第 $k$ 个数是什么？如果不存在这样的数（即 $k > |F(U_v)|$），则克索尼亚回答数字 $-1$。请注意，$F(U_v)$ 是一个集合，而不是多重集。也就是说，如果一个数字出现多次，只应计入一次。\n\n此外，克索尼亚的朋友有时会请她更改树中的一个数字。", "inputFormat": "第一行包含两个整数 $n, g$ ($2 \\leq n \\leq 5 \\cdot 10^4$, $0 \\leq g \\leq 7$) —— 分别表示树中的顶点数量和测试组编号。\n\n接下来的 $n - 1$ 行，每行包含两个整数 $x_i, y_i$ ($1 \\leq x_i, y_i \\leq n$)。这表示树中顶点 $x_i$ 和 $y_i$ 之间有一条边。保证该图是一棵树。\n\n下一行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$ ($0 \\leq a_i < 2^{20}$) —— 表示树顶点上初始数字的数组 $a$。\n\n下一行包含一个整数 $q$ ($1 \\leq q \\leq 5 \\cdot 10^4$) —— 表示查询的数量。\n\n接下来的 $q$ 行，每行描述一个查询。\n\n更改树中数字的查询格式为 $1 \\ x_i \\ y_i$ ($1 \\leq x_i \\leq n$, $0 \\leq y_i < 2^{20}$)。此类查询表示现在第 $x_i$ 个顶点上的数字变为 $y_i$。\n\n另一种类型的查询格式为 $2 \\ v_i \\ k_i$ ($1 \\leq v_i \\leq n$, $1 \\leq k_i \\leq 10^9$)。此类查询需要找出集合 $F(U_{v_i})$ 中按升序排列的第 $k_i$ 个数，其中 $U_{v_i}$ 是顶点 $v_i$ 子树中的数字集合，$F(U_{v_i})$ 是其所有子集 XOR 和构成的集合。如果 $k_i > |F(U_{v_i})|$，则输出 $-1$。", "outputFormat": "对于每个第二类查询，在一个单独的行中输出答案。", "hint": "### 样例说明\n\n第一个样例的解释。顶点旁的数字表示 $a_i$。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/9etsnjj8.png)\n:::\n\n在第一个查询中，考虑顶点 $2$ 的子树。它包含数字 $1, 2, 3$。\n\n$F([1,2,3]) = [0, 1, 2, 3]$。\n\n在第二个查询中，考虑整个子树。$F([1, 2, 3, 4]) = [0,1,2,3,4,5,6,7]$。\n\n更改一个数字后，树的状态如下：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/0uxg2vsn.png)\n:::\n\n现在，顶点 $2$ 的子树中包含数字 $1, 2, 4$。\n\n$F([1,2,4]) = [0,1,2,3,4,5,6,7]$。\n\n### 评分细则\n\n-   （6 分）： $q, n \\leq 15$。\n-   （16 分）： $q, n \\leq 500$。\n-   （18 分）： $q, n \\leq 2000$。\n-   （7 分）： 在所有第二类查询中，$v_i = 1$。\n-   （13 分）： 没有更改数字的查询。\n-   （11 分）： 所有 $a_i, y_i$ 是 2 的幂。\n-   （29 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2022 II Stage] 树", "background": "", "description": "克索尼亚有一棵以顶点 $1$ 为根、包含 $n$ 个顶点的有根树，每个顶点上写有一个数字。在第 $i$ 个顶点上写有数字 $a_i$。\n\n回忆一下，树是一种无环连通图。有根树是指在树中选择一个顶点作为根。\n\n在有根树中，顶点 $v$ 的祖先是指从 $v$ 到根路径上的所有顶点（不包括顶点 $v$ 本身）。顶点 $v$ 的子树是指所有以 $v$ 为祖先的顶点集合，包括顶点 $v$ 本身。\n\n集合 $S = (u_1, u_2, u_3, \\dots, u_k)$ 的 XOR 和定义为数字 $u_1 \\oplus u_2 \\oplus u_3 \\oplus \\dots \\oplus u_k$，其中 $\\oplus$ 是按位异或操作，在 Pascal 语言中记为 `xor`，在 C++/Java/Python 语言中记为 `^`。\n\n对于数字集合 $S$，考虑其所有可能子集的 XOR 和构成的集合。称此集合为 $F(S)$。\n\n克索尼亚的朋友不断问她这样的问题——“如果考虑顶点 $v$ 的子树中所有数字的集合（记为 $U_v$），那么集合 $F(U_v)$ 中按升序排列的第 $k$ 个数是什么？”也就是说，如果取出顶点 $v$ 子树中的所有数字，考虑它们所有子集的 XOR 和，那么在得到的集合中，按升序排列的第 $k$ 个数是什么？如果不存在这样的数（即 $k > |F(U_v)|$），则克索尼亚回答数字 $-1$。请注意，$F(U_v)$ 是一个集合，而不是多重集。也就是说，如果一个数字出现多次，只应计入一次。\n\n此外，克索尼亚的朋友有时会请她更改树中的一个数字。", "inputFormat": "第一行包含两个整数 $n, g$ ($2 \\leq n \\leq 5 \\cdot 10^4$, $0 \\leq g \\leq 7$) —— 分别表示树中的顶点数量和测试组编号。\n\n接下来的 $n - 1$ 行，每行包含两个整数 $x_i, y_i$ ($1 \\leq x_i, y_i \\leq n$)。这表示树中顶点 $x_i$ 和 $y_i$ 之间有一条边。保证该图是一棵树。\n\n下一行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$ ($0 \\leq a_i < 2^{20}$) —— 表示树顶点上初始数字的数组 $a$。\n\n下一行包含一个整数 $q$ ($1 \\leq q \\leq 5 \\cdot 10^4$) —— 表示查询的数量。\n\n接下来的 $q$ 行，每行描述一个查询。\n\n更改树中数字的查询格式为 $1 \\ x_i \\ y_i$ ($1 \\leq x_i \\leq n$, $0 \\leq y_i < 2^{20}$)。此类查询表示现在第 $x_i$ 个顶点上的数字变为 $y_i$。\n\n另一种类型的查询格式为 $2 \\ v_i \\ k_i$ ($1 \\leq v_i \\leq n$, $1 \\leq k_i \\leq 10^9$)。此类查询需要找出集合 $F(U_{v_i})$ 中按升序排列的第 $k_i$ 个数，其中 $U_{v_i}$ 是顶点 $v_i$ 子树中的数字集合，$F(U_{v_i})$ 是其所有子集 XOR 和构成的集合。如果 $k_i > |F(U_{v_i})|$，则输出 $-1$。", "outputFormat": "对于每个第二类查询，在一个单独的行中输出答案。", "hint": "### 样例说明\n\n第一个样例的解释。顶点旁的数字表示 $a_i$。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/9etsnjj8.png)\n:::\n\n在第一个查询中，考虑顶点 $2$ 的子树。它包含数字 $1, 2, 3$。\n\n$F([1,2,3]) = [0, 1, 2, 3]$。\n\n在第二个查询中，考虑整个子树。$F([1, 2, 3, 4]) = [0,1,2,3,4,5,6,7]$。\n\n更改一个数字后，树的状态如下：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/0uxg2vsn.png)\n:::\n\n现在，顶点 $2$ 的子树中包含数字 $1, 2, 4$。\n\n$F([1,2,4]) = [0,1,2,3,4,5,6,7]$。\n\n### 评分细则\n\n-   （6 分）： $q, n \\leq 15$。\n-   （16 分）： $q, n \\leq 500$。\n-   （18 分）： $q, n \\leq 2000$。\n-   （7 分）： 在所有第二类查询中，$v_i = 1$。\n-   （13 分）： 没有更改数字的查询。\n-   （11 分）： 所有 $a_i, y_i$ 是 2 的幂。\n-   （29 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15045", "type": "P", "difficulty": 1, "samples": [["1 1 1", "3"], ["1 2 1", "5"], ["4 3 2", "44"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2022", "UOI（乌克兰）"], "title": "[UOI 2022 II Stage] 秘密信件", "background": "", "description": "哥萨克胡子急需寄送一封包含秘密信息的信件给他的战友们。他来到一家商店，店里出售 $a$ 个信封、$b$ 张带有刺绣衬衫图案的邮票和 $c$ 张带有灯笼裤图案的邮票。\n\n为了通过邮局寄信，哥萨克胡子必须购买：\n\n-   一个信封\n-   一张或两张邮票\n\n哥萨克胡子不喜欢单调重复，因此他最多购买每种类型邮票中的一张。\n\n哥萨克胡子有多少种不同的方式完成购买？\n\n如果存在至少一个信封或邮票是哥萨克胡子在一次购买中购买了，而在另一次购买中没有购买，则两种购买方式被认为是不同的。", "inputFormat": "第一行包含三个整数 $a$、$b$ 和 $c$ $(1 \\leq a, b, c \\leq 500)$ —— 分别表示信封的数量、带有刺绣衬衫图案的邮票数量以及带有灯笼裤图案的邮票数量。", "outputFormat": "输出一个数字 —— 购买信封和邮票的方式数量。", "hint": "第一个样例中，哥萨克胡子可以购买：\n\n-   一个信封和一张带有刺绣衬衫图案的邮票\n-   一个信封和一张带有灯笼裤图案的邮票\n-   一个信封和两张邮票\n\n第二个样例中，哥萨克胡子可以购买：\n\n-   一个信封和一张带有灯笼裤图案的邮票（1 种方式）\n-   一个信封和两张带有刺绣衬衫图案的邮票中的一张（2 种方式）\n-   一个信封、一张带有灯笼裤图案的邮票以及两张带有刺绣衬衫图案的邮票中的一张（2 种方式）\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2022 II Stage] 秘密信件", "background": "", "description": "哥萨克胡子急需寄送一封包含秘密信息的信件给他的战友们。他来到一家商店，店里出售 $a$ 个信封、$b$ 张带有刺绣衬衫图案的邮票和 $c$ 张带有灯笼裤图案的邮票。\n\n为了通过邮局寄信，哥萨克胡子必须购买：\n\n-   一个信封\n-   一张或两张邮票\n\n哥萨克胡子不喜欢单调重复，因此他最多购买每种类型邮票中的一张。\n\n哥萨克胡子有多少种不同的方式完成购买？\n\n如果存在至少一个信封或邮票是哥萨克胡子在一次购买中购买了，而在另一次购买中没有购买，则两种购买方式被认为是不同的。", "inputFormat": "第一行包含三个整数 $a$、$b$ 和 $c$ $(1 \\leq a, b, c \\leq 500)$ —— 分别表示信封的数量、带有刺绣衬衫图案的邮票数量以及带有灯笼裤图案的邮票数量。", "outputFormat": "输出一个数字 —— 购买信封和邮票的方式数量。", "hint": "第一个样例中，哥萨克胡子可以购买：\n\n-   一个信封和一张带有刺绣衬衫图案的邮票\n-   一个信封和一张带有灯笼裤图案的邮票\n-   一个信封和两张邮票\n\n第二个样例中，哥萨克胡子可以购买：\n\n-   一个信封和一张带有灯笼裤图案的邮票（1 种方式）\n-   一个信封和两张带有刺绣衬衫图案的邮票中的一张（2 种方式）\n-   一个信封、一张带有灯笼裤图案的邮票以及两张带有刺绣衬衫图案的邮票中的一张（2 种方式）\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
