{"pid": "P10026", "type": "P", "difficulty": 4, "samples": [["3\n2 5\n2 4\n3 3", "No\nYes\nYes"], ["5\n4 869\n48 69\n8 328\n66 114514\n168 1919810\n", "No\nYes\nNo\nYes\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「HCOI-R1」哀之变化", "background": "哀喜欢数字。\n\n她还喜欢变化。", "description": "有一整数 $a$ 初始为 $1$。\n\n哀想让 $a$ 进行恰好 $k$ 次变化，每次从以下两种变化中选择一个：\n\n- $a\\gets a - 1$；\n- $a\\gets a \\times 2$。\n\n哀很好奇，经过 **恰好** $k$ 次变化后 $a$ 能否变成 $n$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来 $T$ 行，每行两个整数，依次为 $k$ 和 $n$，表示哀的一次询问。", "outputFormat": "共 $T$ 行，对于每次询问，若 $a$ 可以变成 $n$，输出 `Yes`，否则输出 `No`。", "hint": "### 样例解释 1\n\n+ 若 $k = 2$，$n = 5$，可以证明无解。\n+ 若 $k = 2$，$n = 4$，一种可能的操作方式如下：\n\t+ 第一步，$a \\gets a\\times 2 = 2$；\n\t+ 第二步，$a \\gets a\\times 2 = 4$。\n+ 若 $k = 3$，$n = 3$，一种可能的操作方式如下：\n\t+ 第一步，$a \\gets a\\times 2 = 2$；\n\t+ 第二步，$a \\gets a\\times 2 = 4$。\n\t+ 第三步，$a \\gets a-1 = 3$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（10 pts）：$T \\leq 10$，$k \\leq 15$。\n+ Subtask 1（25 pts）：$n, k \\leq 2\\times 10^3$。\n+ Subtask 2（65 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10^5$，$0 \\leq n, k \\leq 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HCOI-R1」哀之变化", "background": "哀喜欢数字。\n\n她还喜欢变化。", "description": "有一整数 $a$ 初始为 $1$。\n\n哀想让 $a$ 进行恰好 $k$ 次变化，每次从以下两种变化中选择一个：\n\n- $a\\gets a - 1$；\n- $a\\gets a \\times 2$。\n\n哀很好奇，经过 **恰好** $k$ 次变化后 $a$ 能否变成 $n$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来 $T$ 行，每行两个整数，依次为 $k$ 和 $n$，表示哀的一次询问。", "outputFormat": "共 $T$ 行，对于每次询问，若 $a$ 可以变成 $n$，输出 `Yes`，否则输出 `No`。", "hint": "### 样例解释 1\n\n+ 若 $k = 2$，$n = 5$，可以证明无解。\n+ 若 $k = 2$，$n = 4$，一种可能的操作方式如下：\n\t+ 第一步，$a \\gets a\\times 2 = 2$；\n\t+ 第二步，$a \\gets a\\times 2 = 4$。\n+ 若 $k = 3$，$n = 3$，一种可能的操作方式如下：\n\t+ 第一步，$a \\gets a\\times 2 = 2$；\n\t+ 第二步，$a \\gets a\\times 2 = 4$。\n\t+ 第三步，$a \\gets a-1 = 3$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（10 pts）：$T \\leq 10$，$k \\leq 15$。\n+ Subtask 1（25 pts）：$n, k \\leq 2\\times 10^3$。\n+ Subtask 2（65 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10^5$，$0 \\leq n, k \\leq 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P10027", "type": "P", "difficulty": 5, "samples": [["2 2 2 998244353 1\n1 2", "7"], ["5 5 0 114514 0", "70"], ["5 5 3 998244353 3\n3 4\n2 5\n4 4", "13782"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "洛谷月赛"], "title": "梦境世界", "background": "哆来咪爱旅行。", "description": "有一个长为 $n$ 宽为 $m$ 的网格，其左上角编号为位置 $(1, 1)$ 而右下角编号为位置 $(n, m)$。哆来咪想要从左上角走到右下角，每次她可以往右或向下走一格，但不能超出 $n\\times m$ 的网格边界。除此之外，有 $s$ 个禁止点是哆来咪无法走到的。\n\n哆来咪有 $k$ 个神奇药水，喝药水可以撤销之前最后一次没有被撤销的行走操作，但移动序列并不会删去最后一个元素。当然，在 $(1, 1)$ 位置时不能使用药水，且 **药水不会撤销上一个药水的操作**。例如：从 $A$ 到 $B$ 后，在 $B$ 处喝了药水，则移动序列为 $A \\to B \\to A$；从 $A$ 走到 $B$ 再走到 $C$，连续喝下两次药水，移动序列为 $A \\to B \\to C \\to B \\to A$。\n\n哆来咪认为一次 **旅行** 是指一次最终走到 $(n, m)$ 的行走路线。哆来咪想要求本质不同的 **旅行** 个数，答案对给定 $p$ 取模。哆来咪认为两次 **旅行** 不同，当且仅当两次旅行记录的移动序列不同。", "inputFormat": "第一行五个整数 $n, m, k, p, s$，意义见题目描述。\n\n接下来 $s$ 行，第 $i$ 行包含两个整数 $(x_i, y_i)$，表示不能经过网格中编号为 $(x_i, y_i)$ 的点。", "outputFormat": "输出一行一个整数，表示答案对 $p$ 取模后的结果。", "hint": "### 样例解释 1\n\n七种路线如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0t9so91p.png)\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0（10pts）：$1 \\le n, m \\le 100$，$k=0$。\n- Subtask 1（15pts）：$1 \\le n, m \\le 10$，$k=1$。\n- Subtask 2（15pts）：$n=1$，$m \\le 100$，$k \\le 100$。\n- Subtask 3（25pts）：$1 \\le n, m \\le 100$，$k \\le 10$。\n- Subtask 4（35pts）：无特殊限制。\n\n\n对于所有数据，保证 $1 \\le n, m \\le 100$，$0 \\le k \\le 100$，$2 \\le p \\le 10^9 + 9$，$0 \\le s \\le n \\times m$，$1 \\le x_i \\le n$，$1 \\le y_i \\le m$，且 $(x_i, y_i)$ 互不相同。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "梦境世界", "background": "哆来咪爱旅行。", "description": "有一个长为 $n$ 宽为 $m$ 的网格，其左上角编号为位置 $(1, 1)$ 而右下角编号为位置 $(n, m)$。哆来咪想要从左上角走到右下角，每次她可以往右或向下走一格，但不能超出 $n\\times m$ 的网格边界。除此之外，有 $s$ 个禁止点是哆来咪无法走到的。\n\n哆来咪有 $k$ 个神奇药水，喝药水可以撤销之前最后一次没有被撤销的行走操作，但移动序列并不会删去最后一个元素。当然，在 $(1, 1)$ 位置时不能使用药水，且 **药水不会撤销上一个药水的操作**。例如：从 $A$ 到 $B$ 后，在 $B$ 处喝了药水，则移动序列为 $A \\to B \\to A$；从 $A$ 走到 $B$ 再走到 $C$，连续喝下两次药水，移动序列为 $A \\to B \\to C \\to B \\to A$。\n\n哆来咪认为一次 **旅行** 是指一次最终走到 $(n, m)$ 的行走路线。哆来咪想要求本质不同的 **旅行** 个数，答案对给定 $p$ 取模。哆来咪认为两次 **旅行** 不同，当且仅当两次旅行记录的移动序列不同。", "inputFormat": "第一行五个整数 $n, m, k, p, s$，意义见题目描述。\n\n接下来 $s$ 行，第 $i$ 行包含两个整数 $(x_i, y_i)$，表示不能经过网格中编号为 $(x_i, y_i)$ 的点。", "outputFormat": "输出一行一个整数，表示答案对 $p$ 取模后的结果。", "hint": "### 样例解释 1\n\n七种路线如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0t9so91p.png)\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0（10pts）：$1 \\le n, m \\le 100$，$k=0$。\n- Subtask 1（15pts）：$1 \\le n, m \\le 10$，$k=1$。\n- Subtask 2（15pts）：$n=1$，$m \\le 100$，$k \\le 100$。\n- Subtask 3（25pts）：$1 \\le n, m \\le 100$，$k \\le 10$。\n- Subtask 4（35pts）：无特殊限制。\n\n\n对于所有数据，保证 $1 \\le n, m \\le 100$，$0 \\le k \\le 100$，$2 \\le p \\le 10^9 + 9$，$0 \\le s \\le n \\times m$，$1 \\le x_i \\le n$，$1 \\le y_i \\le m$，且 $(x_i, y_i)$ 互不相同。\n", "locale": "zh-CN"}}}
{"pid": "P10028", "type": "P", "difficulty": 7, "samples": [["6 5\n5 4 2 3 1 6\n3\n5\n6\n3\n6", "3\n6\n4\n2\n10"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2000", "O2优化", "Ynoi"], "title": "[Ynoi2000] pri", "background": "", "description": "给定 $1,\\dots,n$ 的排列 $a_1,\\dots,a_n$ ；\n\n共 $m$ 次操作，每次操作给出 $x$ ，首先进行修改，将 $a_1,a_2,\\dots,a_x$ 翻转为 $a_x,\\dots,a_2,a_1$ ，然后查询有多少组不同的 $(i,j)$ ，满足 $1\\le i<j\\le x$ 使得 $a_i<a_j$ 。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行一个整数 $x$ ，表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n所有数值为整数。\n\n对于 $100\\%$ 的数据，满足 $1\\le a_i\\le n$，$1\\le x\\le n$，$1\\le n\\le 2\\times 10^5,\\;1\\le m\\le 5\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2000] pri", "background": "", "description": "给定 $1,\\dots,n$ 的排列 $a_1,\\dots,a_n$ ；\n\n共 $m$ 次操作，每次操作给出 $x$ ，首先进行修改，将 $a_1,a_2,\\dots,a_x$ 翻转为 $a_x,\\dots,a_2,a_1$ ，然后查询有多少组不同的 $(i,j)$ ，满足 $1\\le i<j\\le x$ 使得 $a_i<a_j$ 。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行一个整数 $x$ ，表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n所有数值为整数。\n\n对于 $100\\%$ 的数据，满足 $1\\le a_i\\le n$，$1\\le x\\le n$，$1\\le n\\le 2\\times 10^5,\\;1\\le m\\le 5\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P10029", "type": "P", "difficulty": 1, "samples": [["3\n1 2 10\n9 11 11\n55 15 14", "Alice\nBob\nLasting Battle"]], "limits": {"time": [1000, 1000], "memory": [524288, 524288]}, "tags": ["模拟", "数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Cfz Round 3」Battle", "background": "", "description": "Alice 和 Bob 正在进行一个游戏，游戏的规则如下：\n\n- Alice 初始时拥有一个整数 $n$，Bob 初始时拥有一个整数 $m$；\n- 从 Alice 开始，两人轮流对**对方拥有的整数**进行操作：设对方此时拥有的整数为 $h$，使 $h$ 的值**减去** $h \\bmod p$，其中 $\\bmod$ 表示**取模**运算，$p$ 是给定的一个定值；\n- 两人中率先使对方拥有的整数变为 $0$ 的人获得胜利，若在两人分别进行 $10^{10^{9961}}$ 次操作后仍无人获得胜利，则认为游戏平局。\n\n你需要判断谁将会获得胜利，或报告游戏将会平局。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入三个整数 $n,m,p$。", "outputFormat": "对于每组数据，一行一个字符串表示答案：\n\n- 若 Alice 将会获得胜利，则输出 `Alice`；\n- 若 Bob 将会获得胜利，则输出 `Bob`；\n- 若游戏将会平局，则输出 `Lasting Battle`。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，Alice 在第一次操作中就会将 Bob 拥有的整数从 $2$ 变为 $2-(2\\bmod 10)$ 即 $0$，所以 Alice 将会获得胜利。\n\n对于第 $2$ 组数据，Alice 在第一次操作中会将 Bob 拥有的整数从 $11$ 变为 $11-(11\\bmod 11)$ 即 $11$，而 Bob 在第一次操作中会将 Alice 拥有的整数从 $9$ 变为 $9-(9 \\bmod 11)$ 即 $0$，所以 Bob 将会获得胜利。\n\n对于第 $3$ 组数据，可以证明游戏将会平局。\n\n#### 「数据范围」\n\n对于所有数据，$1 \\leq T \\leq 5000$，$1 \\leq n, m, p \\leq 2\\times 10^9$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 3」Battle", "background": "", "description": "Alice 和 Bob 正在进行一个游戏，游戏的规则如下：\n\n- Alice 初始时拥有一个整数 $n$，Bob 初始时拥有一个整数 $m$；\n- 从 Alice 开始，两人轮流对**对方拥有的整数**进行操作：设对方此时拥有的整数为 $h$，使 $h$ 的值**减去** $h \\bmod p$，其中 $\\bmod$ 表示**取模**运算，$p$ 是给定的一个定值；\n- 两人中率先使对方拥有的整数变为 $0$ 的人获得胜利，若在两人分别进行 $10^{10^{9961}}$ 次操作后仍无人获得胜利，则认为游戏平局。\n\n你需要判断谁将会获得胜利，或报告游戏将会平局。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入三个整数 $n,m,p$。", "outputFormat": "对于每组数据，一行一个字符串表示答案：\n\n- 若 Alice 将会获得胜利，则输出 `Alice`；\n- 若 Bob 将会获得胜利，则输出 `Bob`；\n- 若游戏将会平局，则输出 `Lasting Battle`。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，Alice 在第一次操作中就会将 Bob 拥有的整数从 $2$ 变为 $2-(2\\bmod 10)$ 即 $0$，所以 Alice 将会获得胜利。\n\n对于第 $2$ 组数据，Alice 在第一次操作中会将 Bob 拥有的整数从 $11$ 变为 $11-(11\\bmod 11)$ 即 $11$，而 Bob 在第一次操作中会将 Alice 拥有的整数从 $9$ 变为 $9-(9 \\bmod 11)$ 即 $0$，所以 Bob 将会获得胜利。\n\n对于第 $3$ 组数据，可以证明游戏将会平局。\n\n#### 「数据范围」\n\n对于所有数据，$1 \\leq T \\leq 5000$，$1 \\leq n, m, p \\leq 2\\times 10^9$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10030", "type": "P", "difficulty": 2, "samples": [["3\n5 2 1 4\n3 2 2 1\n7 2 0 3", "Yes\nYes\nNo"]], "limits": {"time": [1000, 1000], "memory": [524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "「Cfz Round 3」Change", "background": "", "description": "给定一个质数 $p$ 和三个整数 $a,b,c$，你需要对一个初始为 $0$ 的整数 $x$ 进行操作，每次操作可以进行如下的两种之一：\n\n- 第一种操作：令 $x$ 的值变为 $(x \\times a) \\bmod p$。\n- 第二种操作：令 $x$ 的值变为 $(x+b) \\bmod p$。\n\n其中，$\\bmod$ 表示**取模**运算。\n\n你需要求出能否在**正整数次**操作后得到 $c$，若能则输出 `Yes`，否则输出 `No`。\n\n本题中字符串大小写不敏感，即 `yes`、`yeS`、`yEs`、`Yes`、`YEs`、`YeS`、`yES`、`Yes` 都被认为是 `Yes`，`No` 同理。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入一行四个整数 $p,a,b,c$。", "outputFormat": "对于每组测试数据，输出一行：\n\n- 若能在正整数次操作后得到 $c$，则输出 `Yes`；\n- 若不能在正整数次操作后得到 $c$，则输出 `No`。\n\n本题中字符串大小写不敏感，即 `yes`、`yeS`、`yEs`、`Yes`、`YEs`、`YeS`、`yES`、`Yes` 都被认为是 `Yes`，`No` 同理。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，进行 $1$ 次第二种操作后进行 $2$ 次第一种操作即可。\n\n对于第 $2$ 组数据，进行 $1$ 次第二种操作后进行 $1$ 次第一种操作即可。\n\n对于第 $3$ 组数据，可以证明无论如何操作都无法得到 $3$。\n\n#### 「数据范围」\n\n对于所有数据，$1\\le T \\le 100$，$0\\le a,b,c < p \\le 10^9$，保证 $p$ 是质数。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 3」Change", "background": "", "description": "给定一个质数 $p$ 和三个整数 $a,b,c$，你需要对一个初始为 $0$ 的整数 $x$ 进行操作，每次操作可以进行如下的两种之一：\n\n- 第一种操作：令 $x$ 的值变为 $(x \\times a) \\bmod p$。\n- 第二种操作：令 $x$ 的值变为 $(x+b) \\bmod p$。\n\n其中，$\\bmod$ 表示**取模**运算。\n\n你需要求出能否在**正整数次**操作后得到 $c$，若能则输出 `Yes`，否则输出 `No`。\n\n本题中字符串大小写不敏感，即 `yes`、`yeS`、`yEs`、`Yes`、`YEs`、`YeS`、`yES`、`Yes` 都被认为是 `Yes`，`No` 同理。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入一行四个整数 $p,a,b,c$。", "outputFormat": "对于每组测试数据，输出一行：\n\n- 若能在正整数次操作后得到 $c$，则输出 `Yes`；\n- 若不能在正整数次操作后得到 $c$，则输出 `No`。\n\n本题中字符串大小写不敏感，即 `yes`、`yeS`、`yEs`、`Yes`、`YEs`、`YeS`、`yES`、`Yes` 都被认为是 `Yes`，`No` 同理。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，进行 $1$ 次第二种操作后进行 $2$ 次第一种操作即可。\n\n对于第 $2$ 组数据，进行 $1$ 次第二种操作后进行 $1$ 次第一种操作即可。\n\n对于第 $3$ 组数据，可以证明无论如何操作都无法得到 $3$。\n\n#### 「数据范围」\n\n对于所有数据，$1\\le T \\le 100$，$0\\le a,b,c < p \\le 10^9$，保证 $p$ 是质数。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10031", "type": "P", "difficulty": 3, "samples": [["3\n2\n3\n6\n", "3\n3\n5"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "最大公约数 gcd", "洛谷月赛", "Ad-hoc"], "title": "「Cfz Round 3」Xor with Gcd", "background": "她是午夜潜入海风漂流的沙砾\n\n极光与她一齐许下明日愿景\n\n飞身电波铺满天穹而海仍平静\n\n“愿世界都繁花似锦”", "description": "给定一个整数 $n$。\n\n你需要求出 $\\bigoplus\\limits_{i=1}^{n} \\gcd(i,n)$，即 $\\gcd(1,n) \\oplus \\gcd(2,n) \\oplus \\cdots \\oplus \\gcd(n,n)$ 的值。其中 $\\gcd(a,b)$ 表示 $a$ 和 $b$ 的**最大公约数**，$\\bigoplus$ 表示**按位异或**，即 C++ 中的 `^`。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入一行一个整数 $n$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示 $\\bigoplus\\limits_{i=1}^{n} \\gcd(i,n)$ 的值。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$\\bigoplus\\limits_{i=1}^{2} \\gcd(i,2)=\\gcd(1,2)\\oplus\\gcd(2,2)=1\\oplus2=3$。\n\n对于第 $2$ 组数据，$\\bigoplus\\limits_{i=1}^{3} \\gcd(i,3)=\\gcd(1,3)\\oplus\\gcd(2,3)\\oplus\\gcd(3,3)=1\\oplus1\\oplus3=3$。\n\n#### 「数据范围」\n\n对于所有数据，$1 \\le T \\le 100$，$1 \\le n \\le 10^{18}$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 3」Xor with Gcd", "background": "她是午夜潜入海风漂流的沙砾\n\n极光与她一齐许下明日愿景\n\n飞身电波铺满天穹而海仍平静\n\n“愿世界都繁花似锦”", "description": "给定一个整数 $n$。\n\n你需要求出 $\\bigoplus\\limits_{i=1}^{n} \\gcd(i,n)$，即 $\\gcd(1,n) \\oplus \\gcd(2,n) \\oplus \\cdots \\oplus \\gcd(n,n)$ 的值。其中 $\\gcd(a,b)$ 表示 $a$ 和 $b$ 的**最大公约数**，$\\bigoplus$ 表示**按位异或**，即 C++ 中的 `^`。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入一行一个整数 $n$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示 $\\bigoplus\\limits_{i=1}^{n} \\gcd(i,n)$ 的值。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$\\bigoplus\\limits_{i=1}^{2} \\gcd(i,2)=\\gcd(1,2)\\oplus\\gcd(2,2)=1\\oplus2=3$。\n\n对于第 $2$ 组数据，$\\bigoplus\\limits_{i=1}^{3} \\gcd(i,3)=\\gcd(1,3)\\oplus\\gcd(2,3)\\oplus\\gcd(3,3)=1\\oplus1\\oplus3=3$。\n\n#### 「数据范围」\n\n对于所有数据，$1 \\le T \\le 100$，$1 \\le n \\le 10^{18}$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10032", "type": "P", "difficulty": 4, "samples": [["3\n4 1\n1 0 1 2\n4 5\n9 9 6 1\n3 5\n1 3 0", "3 0 3 2\n0 0 0 0\n1 2 0"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化", "排序", "其它技巧", "洛谷月赛", "Ad-hoc"], "title": "「Cfz Round 3」Mex of Sequence", "background": "", "description": "**请注意本题特殊的时间限制。**\n\n给定一个长度为 $n$ 的序列 $a$ 和一个整数 $m$。\n\n我们定义一次操作为，**同时**将序列 $a$ 中的**每个**元素 $a_i$ 替换为序列 $a$ 中除 $a_i$ 以外的所有元素的 $\\operatorname{mex}$。\n\n你需要求出进行 $m$ 次操作后的序列 $a$。\n\n其中，一个序列的 $\\operatorname{mex}$ 为该序列中**未出现过的最小自然数**，例如：\n\n- $\\operatorname{mex}\\{1,2,3\\}=0$；\n- $\\operatorname{mex}\\{0\\}=1$；\n- $\\operatorname{mex}\\{1,0,2,4\\}=3$；\n- $\\operatorname{mex}\\{2,1,3,0,2\\}=4$。\n\n特别地，当序列为空时，该序列的 $\\operatorname{mex}$ 为 $0$。 ", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入两个整数 $n,m$。\n- 第二行输入 $n$ 个整数，表示给定的序列 $a$。", "outputFormat": "对于每组测试数据，输出一行，包含用空格分隔的 $n$ 个整数，表示进行 $m$ 次操作后的序列 $a$。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，因为 $\\operatorname{mex}\\{0,1,2\\}=3$，$\\operatorname{mex}\\{1,1,2\\}=0$，$\\operatorname{mex}\\{1,0,2\\}=3$，$\\operatorname{mex}\\{1,0,1\\}=2$，所以进行 $1$ 次操作后的序列 $a$ 为 $\\{3,0,3,2\\}$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 1000$，$1 \\le n \\le 10^6$，$1 \\le m \\le 10^9$，$0 \\le a_i \\le 10^9$，$\\sum n \\le 10^6$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 3」Mex of Sequence", "background": "", "description": "**请注意本题特殊的时间限制。**\n\n给定一个长度为 $n$ 的序列 $a$ 和一个整数 $m$。\n\n我们定义一次操作为，**同时**将序列 $a$ 中的**每个**元素 $a_i$ 替换为序列 $a$ 中除 $a_i$ 以外的所有元素的 $\\operatorname{mex}$。\n\n你需要求出进行 $m$ 次操作后的序列 $a$。\n\n其中，一个序列的 $\\operatorname{mex}$ 为该序列中**未出现过的最小自然数**，例如：\n\n- $\\operatorname{mex}\\{1,2,3\\}=0$；\n- $\\operatorname{mex}\\{0\\}=1$；\n- $\\operatorname{mex}\\{1,0,2,4\\}=3$；\n- $\\operatorname{mex}\\{2,1,3,0,2\\}=4$。\n\n特别地，当序列为空时，该序列的 $\\operatorname{mex}$ 为 $0$。 ", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入两个整数 $n,m$。\n- 第二行输入 $n$ 个整数，表示给定的序列 $a$。", "outputFormat": "对于每组测试数据，输出一行，包含用空格分隔的 $n$ 个整数，表示进行 $m$ 次操作后的序列 $a$。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，因为 $\\operatorname{mex}\\{0,1,2\\}=3$，$\\operatorname{mex}\\{1,1,2\\}=0$，$\\operatorname{mex}\\{1,0,2\\}=3$，$\\operatorname{mex}\\{1,0,1\\}=2$，所以进行 $1$ 次操作后的序列 $a$ 为 $\\{3,0,3,2\\}$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 1000$，$1 \\le n \\le 10^6$，$1 \\le m \\le 10^9$，$0 \\le a_i \\le 10^9$，$\\sum n \\le 10^6$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10033", "type": "P", "difficulty": 4, "samples": [["4\n3\n3 2 1\n2\n1 2\n5\n4 2 1 5 3\n7\n5 7 3 1 2 4 6", "1 3 3\n-1\n5 3 2 1 1\n2 3 5 4 6 3 1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛", "Ad-hoc"], "title": "「Cfz Round 3」Sum of Permutation", "background": "", "description": "**请注意本题特殊的时间限制。**\n\n给定一个 $1\\sim n$ 的排列 $p$。\n\n你需要构造一个长度为 $n$ 的序列 $a$，满足：\n\n- 序列 $a$ 中的每个元素均为不大于 $n$ 的正整数；\n- 不存在有序整数二元组 $(l,r)$，满足 $1 \\le l \\le r \\le n$ 且 $\\sum\\limits_{i=l}^r a_i=\\sum\\limits_{i=l}^r p_i$；\n\n或报告无解。\n\n其中，$1\\sim n$ 的排列指满足所有不大于 $n$ 的正整数恰好出现一次的序列。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入一个整数 $n$。\n- 第二行输入 $n$ 个整数，表示给定的排列 $p$。", "outputFormat": "对于每组数据，输出一行：\n\n- 若存在满足条件的序列 $a$，则输出用空格分隔的 $n$ 个整数，表示你构造的序列 $a$；\n- 若不存在满足条件的序列 $a$，则输出 $-1$。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$\\{1,3,3\\}$ 和 $\\{1,1,3\\}$ 均为满足条件的序列 $a$。\n\n对于第 $2$ 组数据，可以证明不存在满足条件的序列 $a$。\n\n对于第 $3$ 组数据，除 $\\{5,3,2,1,1 \\}$ 外，$\\{3,4,5,3,2 \\}$、$\\{1,4,5,3,4 \\}$、$\\{5,3,3,4,5\\}$ 等均为满足条件的序列 $a$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 5000$，$2 \\le n \\le 10^6$，$\\sum n \\le 10^6$，保证 $p$ 是 $1\\sim n$ 的排列。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**\n\n**本题输入输出量较大，请使用较快的输入输出方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 3」Sum of Permutation", "background": "", "description": "**请注意本题特殊的时间限制。**\n\n给定一个 $1\\sim n$ 的排列 $p$。\n\n你需要构造一个长度为 $n$ 的序列 $a$，满足：\n\n- 序列 $a$ 中的每个元素均为不大于 $n$ 的正整数；\n- 不存在有序整数二元组 $(l,r)$，满足 $1 \\le l \\le r \\le n$ 且 $\\sum\\limits_{i=l}^r a_i=\\sum\\limits_{i=l}^r p_i$；\n\n或报告无解。\n\n其中，$1\\sim n$ 的排列指满足所有不大于 $n$ 的正整数恰好出现一次的序列。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入一个整数 $n$。\n- 第二行输入 $n$ 个整数，表示给定的排列 $p$。", "outputFormat": "对于每组数据，输出一行：\n\n- 若存在满足条件的序列 $a$，则输出用空格分隔的 $n$ 个整数，表示你构造的序列 $a$；\n- 若不存在满足条件的序列 $a$，则输出 $-1$。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$\\{1,3,3\\}$ 和 $\\{1,1,3\\}$ 均为满足条件的序列 $a$。\n\n对于第 $2$ 组数据，可以证明不存在满足条件的序列 $a$。\n\n对于第 $3$ 组数据，除 $\\{5,3,2,1,1 \\}$ 外，$\\{3,4,5,3,2 \\}$、$\\{1,4,5,3,4 \\}$、$\\{5,3,3,4,5\\}$ 等均为满足条件的序列 $a$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 5000$，$2 \\le n \\le 10^6$，$\\sum n \\le 10^6$，保证 $p$ 是 $1\\sim n$ 的排列。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**\n\n**本题输入输出量较大，请使用较快的输入输出方式。**", "locale": "zh-CN"}}}
{"pid": "P10034", "type": "P", "difficulty": 5, "samples": [["4\n5 3\n10011\n4 5\n1000\n5 6\n11111\n9 6\n011111011", "4 3 2 5 1\n-1\n5 4 2 3 1\n3 1 2 6 4 5 9 7 8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "图论", "洛谷原创", "Special Judge", "O2优化", "背包 DP", "素数判断,质数,筛法", "构造", "洛谷月赛", "链表"], "title": "「Cfz Round 3」Circle", "background": "", "description": "给定一个长度为 $n$ 的 $\\tt{01}$ 串 $S$ 和一个非负整数 $l$。\n\n我们定义，对于一个 $1\\sim n$ 的排列 $t$ 和非负整数 $k$：\n\n$$f_{t,k}(i)=\\begin{cases}i & k=0\\\\f_{t,k-1}(t_i) & k \\neq 0\\end{cases}$$\n\n你需要构造一个 $1\\sim n$ 的排列 $p$，满足：\n\n- 对于任意一个不大于 $n$ 的正整数 $i$，都满足 $p_i \\neq i$；\n- 若 $S_i$ 为 $\\tt1$，则 $f_{p,l}(i)=i$（若 $S_i$ 为 $\\tt0$ 则没有限制）；\n\n或报告无解。\n\n其中，$1\\sim n$ 的排列指满足所有不大于 $n$ 的正整数恰好出现一次的序列。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入两个整数 $n,l$。\n- 第二行输入一个长度为 $n$ 的 $\\tt{01}$ 串表示 $S$。", "outputFormat": "对于每组数据，输出一行：\n\n- 若存在满足条件的排列 $p$，则输出用空格分隔的 $n$ 个整数，表示你构造的排列 $p$；\n- 若不存在满足条件的排列 $p$，则输出 $-1$。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$f_{p,3}(1)=f_{p,2}(4)=f_{p,1}(5)=f_{p,0}(1)=1$，其余数同理，所以 $p$ 为 $\\{4,3,2,5,1\\}$ 时满足条件。\n\n对于第 $2$ 组数据，可以证明不存在满足条件的排列 $p$。\n\n对于第 $3$ 组数据，$\\{2,1,4,5,3\\}$ 等也为满足条件的排列 $p$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 100$，$2 \\le n \\le 5\\times 10^5$，$0 \\le l \\le 10^{18}$，$\\sum n \\le 5\\times 10^5$，保证 $S$ 中只包含 $\\tt{0}$ 和 $\\tt{1}$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 3」Circle", "background": "", "description": "给定一个长度为 $n$ 的 $\\tt{01}$ 串 $S$ 和一个非负整数 $l$。\n\n我们定义，对于一个 $1\\sim n$ 的排列 $t$ 和非负整数 $k$：\n\n$$f_{t,k}(i)=\\begin{cases}i & k=0\\\\f_{t,k-1}(t_i) & k \\neq 0\\end{cases}$$\n\n你需要构造一个 $1\\sim n$ 的排列 $p$，满足：\n\n- 对于任意一个不大于 $n$ 的正整数 $i$，都满足 $p_i \\neq i$；\n- 若 $S_i$ 为 $\\tt1$，则 $f_{p,l}(i)=i$（若 $S_i$ 为 $\\tt0$ 则没有限制）；\n\n或报告无解。\n\n其中，$1\\sim n$ 的排列指满足所有不大于 $n$ 的正整数恰好出现一次的序列。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入两个整数 $n,l$。\n- 第二行输入一个长度为 $n$ 的 $\\tt{01}$ 串表示 $S$。", "outputFormat": "对于每组数据，输出一行：\n\n- 若存在满足条件的排列 $p$，则输出用空格分隔的 $n$ 个整数，表示你构造的排列 $p$；\n- 若不存在满足条件的排列 $p$，则输出 $-1$。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$f_{p,3}(1)=f_{p,2}(4)=f_{p,1}(5)=f_{p,0}(1)=1$，其余数同理，所以 $p$ 为 $\\{4,3,2,5,1\\}$ 时满足条件。\n\n对于第 $2$ 组数据，可以证明不存在满足条件的排列 $p$。\n\n对于第 $3$ 组数据，$\\{2,1,4,5,3\\}$ 等也为满足条件的排列 $p$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 100$，$2 \\le n \\le 5\\times 10^5$，$0 \\le l \\le 10^{18}$，$\\sum n \\le 5\\times 10^5$，保证 $S$ 中只包含 $\\tt{0}$ 和 $\\tt{1}$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10035", "type": "P", "difficulty": 3, "samples": [["1\n1", "1"], ["3\n494699\n494699494699\n494699494699494699", "994161775\n899186285\n348815909"]], "limits": {"time": [500, 500], "memory": [524288, 524288]}, "tags": ["2024", "数论", "洛谷原创", "O2优化", "Ad-hoc"], "title": "「FAOI-R2」Paint", "background": "小 Y 是一个胖子，他最爱下楼梯了，因为下楼梯很省力气，但是他却有强迫症。\n\n由于刷漆工人 HG 的油漆不够，每一层台阶都只刷了一半——左边或右边，好让小 Y 下楼时不踩到油漆。（~~众人：这是什么逻辑？~~）", "description": "整个楼梯共 $3^N$ 级台阶。\n\nHG 刷漆的规律是：对于**从上到下**第 $I$ 级台阶，若 $V_3(I)$ 是奇数，则刷在左边，否则刷在右边。**$V_3(I)$ 的定义请见提示。**\n\n小 Y 因为强迫症，要求自己不能踩到油漆。\n\n现在他来求助你，他最少会踩到油漆多少次？\n\n- 一次只能下一级台阶。\n- 如果小 Y 站在当前台阶的左边，则他必须站在下一级台阶的右边，反之亦然。\n- 如果油漆在当前台阶左边，那么需要站在当前台阶右边才算没踩到油漆，反之亦然。\n- 小 Y 唯一可以控制的是：他在第 $1$ 级台阶上站在哪边。也就是说，小 Y 只有 $2$ 种下楼梯的方案供选择。\n\n答案对 $10^9+7$ 取模。\n\n### 形式化题意\n\n给定三个 01 串 $A,B,C$，长度均为 $3^N$。字符串下标从 $1$ 开始。\n\n其中：\n\n- $A=\\texttt{101010101\\ldots101}$；\n- $B=\\texttt{010101010\\ldots010}$；\n- $C=\\texttt{001001000\\ldots}$；具体来说，第 $I$ 个字符为 $V_3(I) \\bmod 2$。**$V_3(I)$ 的定义请见提示。**\n\n记 $\\operatorname{mc}(X,Y)$ 为字符串 $X$ 和 $Y$ 中匹配的字符的个数。\n\n试求：\n\n$$\\min\\{\\operatorname{mc}(A,C),\\operatorname{mc}(B,C)\\}$$\n\n答案对 $10^9+7$ 取模。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，代表数据组数。\n\n下面 $T$ 行，每行一个正整数 $N$。", "outputFormat": "每组数据一行，输出踩到油漆的最少次数，即 $\\min\\{\\operatorname{mc}(A,C),\\operatorname{mc}(B,C)\\}$。\n\n**答案对 $10^9+7$ 取模。**", "hint": "样例 $1$ 解释：\n\n- $A=\\texttt{101}$；\n- $B=\\texttt{010}$；\n- $C=\\texttt{001}$；\n- $\\operatorname{mc}(A,C)=2$；\n- $\\operatorname{mc}(B,C)=1$；\n- $\\min\\{\\operatorname{mc}(A,C),\\operatorname{mc}(B,C)\\}=1$。\n\n------------\n\n| 测试点编号 | $T \\le$ | $N \\le$ | 分值 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $50$ |\n| $2$ | $10^5$ | $10^{18}$ | $50$ |\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^{5}$，$1 \\le N \\le 10^{18}$。\n\n> **提示：** $V_3(X)$ 指 $X$ 中质因数 $3$ 的个数。例如，$V_3(14)=0$，$V_3(18)=2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R2」Paint", "background": "小 Y 是一个胖子，他最爱下楼梯了，因为下楼梯很省力气，但是他却有强迫症。\n\n由于刷漆工人 HG 的油漆不够，每一层台阶都只刷了一半——左边或右边，好让小 Y 下楼时不踩到油漆。（~~众人：这是什么逻辑？~~）", "description": "整个楼梯共 $3^N$ 级台阶。\n\nHG 刷漆的规律是：对于**从上到下**第 $I$ 级台阶，若 $V_3(I)$ 是奇数，则刷在左边，否则刷在右边。**$V_3(I)$ 的定义请见提示。**\n\n小 Y 因为强迫症，要求自己不能踩到油漆。\n\n现在他来求助你，他最少会踩到油漆多少次？\n\n- 一次只能下一级台阶。\n- 如果小 Y 站在当前台阶的左边，则他必须站在下一级台阶的右边，反之亦然。\n- 如果油漆在当前台阶左边，那么需要站在当前台阶右边才算没踩到油漆，反之亦然。\n- 小 Y 唯一可以控制的是：他在第 $1$ 级台阶上站在哪边。也就是说，小 Y 只有 $2$ 种下楼梯的方案供选择。\n\n答案对 $10^9+7$ 取模。\n\n### 形式化题意\n\n给定三个 01 串 $A,B,C$，长度均为 $3^N$。字符串下标从 $1$ 开始。\n\n其中：\n\n- $A=\\texttt{101010101\\ldots101}$；\n- $B=\\texttt{010101010\\ldots010}$；\n- $C=\\texttt{001001000\\ldots}$；具体来说，第 $I$ 个字符为 $V_3(I) \\bmod 2$。**$V_3(I)$ 的定义请见提示。**\n\n记 $\\operatorname{mc}(X,Y)$ 为字符串 $X$ 和 $Y$ 中匹配的字符的个数。\n\n试求：\n\n$$\\min\\{\\operatorname{mc}(A,C),\\operatorname{mc}(B,C)\\}$$\n\n答案对 $10^9+7$ 取模。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，代表数据组数。\n\n下面 $T$ 行，每行一个正整数 $N$。", "outputFormat": "每组数据一行，输出踩到油漆的最少次数，即 $\\min\\{\\operatorname{mc}(A,C),\\operatorname{mc}(B,C)\\}$。\n\n**答案对 $10^9+7$ 取模。**", "hint": "样例 $1$ 解释：\n\n- $A=\\texttt{101}$；\n- $B=\\texttt{010}$；\n- $C=\\texttt{001}$；\n- $\\operatorname{mc}(A,C)=2$；\n- $\\operatorname{mc}(B,C)=1$；\n- $\\min\\{\\operatorname{mc}(A,C),\\operatorname{mc}(B,C)\\}=1$。\n\n------------\n\n| 测试点编号 | $T \\le$ | $N \\le$ | 分值 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $50$ |\n| $2$ | $10^5$ | $10^{18}$ | $50$ |\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^{5}$，$1 \\le N \\le 10^{18}$。\n\n> **提示：** $V_3(X)$ 指 $X$ 中质因数 $3$ 的个数。例如，$V_3(14)=0$，$V_3(18)=2$。", "locale": "zh-CN"}}}
{"pid": "P10036", "type": "P", "difficulty": 5, "samples": [["4 4\n1 2 3 4", "6"], ["5 1\n1", "3"], ["12345678 9\n1 2 3 45 67 89 123 456 789", "998899106"]], "limits": {"time": [1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750], "memory": [8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192]}, "tags": ["动态规划 DP", "倍增", "2024", "洛谷原创", "O2优化", "动态规划优化", "前缀和"], "title": "「FAOI-R2」A trip to Macao", "background": "## 本题目背景仅供引出题意，无任何不良诱导。\n## 出题人特别提醒：请勿在赌博非法地区模仿题目中的行为\n\n这天，xhabc66 来到澳门旅游。一下飞机，他直奔赌场。\n\n可是，今天的赌场格外热闹，不知发生了什么。\n\nxhabc66 打开手机一看：啊，原来今天是 $12$ 月 $20$ 日！\n\n因此，赌场在做活动！一年一度！机不可失！\n\nxhabc66 径直走进了赌场。", "description": "赌场贴出了如下规则（**你可以忽略没有加粗的内容**）：\n\n1. 所有玩家在注册后方可进行游戏。\n2. 活动期间，**新注册的玩家可从抽奖盒内拿走一枚筹码。抽奖盒内共 $m$ 种筹码，面值分别为 $a_1,a_2,\\ldots,a_m$ 澳元（均为正整数）**，每种一个，保证公平。\n3. 本赌场仅提供一种游戏：猜拳。游戏开始时，双方各下注相同数量（以 $1$ 澳元为单位）的筹码；若猜拳分出胜负，则胜者拿走所有下注。\n4. 根据上一条可知，**玩家一次游戏中赢得的筹码（正整数）不得超过自身所携带的筹码**。\n5. 公平游戏，严禁作弊，违者严惩。\n\nxhabc66 注册后，**连赢数局（可以是 $0$ 局，但没有输过，也没有平局过）**，最终带着 $n$ 澳元走出了赌场。\n\n出赌场后，xhabc66 突然好奇他是怎么赢到这么多钱的。然而，他不记得他每局下了多少注，不记得他一共玩了多少局，甚至不记得他开始时拿走的筹码是什么面值。\n\n**他想知道：他有多少种不同的赢钱方法。**\n\n**答案对 $10^9+7$ 取模。**\n\n> 两种赢钱方法在满足以下任何一个条件时，xhabc66 都会认为它们不同：\n>\n> - 他某一局的下注金额不同；\n> - 他玩的局数不同；\n> - 他开始时拿走的筹码的面值不同。\n\n### 形式化题意\n\n求有多少个数列 $\\{b_k\\}$ 满足：\n\n1. $\\forall i \\in [1,k],b_i \\in \\mathbb{N^*}$；\n2. $\\forall i \\in [2,k],b_i \\in [b_{i-1}+1,b_{i-1} \\times 2]$；\n3. $b_1 \\in\\{a_m\\}$；\n4. $b_k=n$。\n\n数列的长度 $k$ 可以是任何**正整数**。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "两行。\n\n第一行，两个正整数，$n,m$。\n\n第二行，$m$ 个**从小到大排列**的正整数，$a_1 \\sim a_m$。", "outputFormat": "一行一个正整数，表示答案。", "hint": "样例 $1$ 解释：\n\n```plain\n1 2 3 4\n1 2 4\n2 3 4\n2 4\n3 4\n4\n```\n\n样例 $2$ 解释：\n\n```plain\n1 2 3 4 5\n1 2 3 5\n1 2 4 5\n```\n\n----------\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | $m \\le$ | $n \\le$ | 分值 |\n| :-: | :-: | :-: | :-: |\n| $0$ | $3$ | $3$ | $20$ |\n| $1$ | $10^5$ | $10^5$ | $40$ |\n| $2$ | $10^6$ | $10^8$ | $40$ |\n\n对于 $100\\%$ 的数据，$1 \\le m \\le 10^6$，$1 \\le a_1<a_2<\\ldots<a_m \\le n \\le 10^8$，$m \\le n$。\n\n> **提示：** 请注意本题不同寻常的内存限制！", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R2」A trip to Macao", "background": "## 本题目背景仅供引出题意，无任何不良诱导。\n## 出题人特别提醒：请勿在赌博非法地区模仿题目中的行为\n\n这天，xhabc66 来到澳门旅游。一下飞机，他直奔赌场。\n\n可是，今天的赌场格外热闹，不知发生了什么。\n\nxhabc66 打开手机一看：啊，原来今天是 $12$ 月 $20$ 日！\n\n因此，赌场在做活动！一年一度！机不可失！\n\nxhabc66 径直走进了赌场。", "description": "赌场贴出了如下规则（**你可以忽略没有加粗的内容**）：\n\n1. 所有玩家在注册后方可进行游戏。\n2. 活动期间，**新注册的玩家可从抽奖盒内拿走一枚筹码。抽奖盒内共 $m$ 种筹码，面值分别为 $a_1,a_2,\\ldots,a_m$ 澳元（均为正整数）**，每种一个，保证公平。\n3. 本赌场仅提供一种游戏：猜拳。游戏开始时，双方各下注相同数量（以 $1$ 澳元为单位）的筹码；若猜拳分出胜负，则胜者拿走所有下注。\n4. 根据上一条可知，**玩家一次游戏中赢得的筹码（正整数）不得超过自身所携带的筹码**。\n5. 公平游戏，严禁作弊，违者严惩。\n\nxhabc66 注册后，**连赢数局（可以是 $0$ 局，但没有输过，也没有平局过）**，最终带着 $n$ 澳元走出了赌场。\n\n出赌场后，xhabc66 突然好奇他是怎么赢到这么多钱的。然而，他不记得他每局下了多少注，不记得他一共玩了多少局，甚至不记得他开始时拿走的筹码是什么面值。\n\n**他想知道：他有多少种不同的赢钱方法。**\n\n**答案对 $10^9+7$ 取模。**\n\n> 两种赢钱方法在满足以下任何一个条件时，xhabc66 都会认为它们不同：\n>\n> - 他某一局的下注金额不同；\n> - 他玩的局数不同；\n> - 他开始时拿走的筹码的面值不同。\n\n### 形式化题意\n\n求有多少个数列 $\\{b_k\\}$ 满足：\n\n1. $\\forall i \\in [1,k],b_i \\in \\mathbb{N^*}$；\n2. $\\forall i \\in [2,k],b_i \\in [b_{i-1}+1,b_{i-1} \\times 2]$；\n3. $b_1 \\in\\{a_m\\}$；\n4. $b_k=n$。\n\n数列的长度 $k$ 可以是任何**正整数**。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "两行。\n\n第一行，两个正整数，$n,m$。\n\n第二行，$m$ 个**从小到大排列**的正整数，$a_1 \\sim a_m$。", "outputFormat": "一行一个正整数，表示答案。", "hint": "样例 $1$ 解释：\n\n```plain\n1 2 3 4\n1 2 4\n2 3 4\n2 4\n3 4\n4\n```\n\n样例 $2$ 解释：\n\n```plain\n1 2 3 4 5\n1 2 3 5\n1 2 4 5\n```\n\n----------\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | $m \\le$ | $n \\le$ | 分值 |\n| :-: | :-: | :-: | :-: |\n| $0$ | $3$ | $3$ | $20$ |\n| $1$ | $10^5$ | $10^5$ | $40$ |\n| $2$ | $10^6$ | $10^8$ | $40$ |\n\n对于 $100\\%$ 的数据，$1 \\le m \\le 10^6$，$1 \\le a_1<a_2<\\ldots<a_m \\le n \\le 10^8$，$m \\le n$。\n\n> **提示：** 请注意本题不同寻常的内存限制！", "locale": "zh-CN"}}}
{"pid": "P10037", "type": "P", "difficulty": 6, "samples": [["1 1 1 1", "3"], ["3 1 2 2\n1 2\n1 3", "22"], ["5 2 3 5\n1 2\n2 3\n2 4\n4 5", "407"], ["10 5 6 44\n1 2\n1 3\n2 5\n2 6\n3 4\n6 7\n6 8\n4 9\n9 10", "10465095"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "递推", "2024", "洛谷原创", "O2优化", "组合数学", "前缀和", "快速数论变换 NTT", "调和级数", "整除分块"], "title": "「FAOI-R2」霜雪千年", "background": "> 在这老街回眸 烟云中追溯我是谁  \n只消暮雨点滴 便足以粉饰这是非  \n待这月色涌起 谁人轻叩这门扉  \n苔绿青石板街 斑驳了流水般岁月  \n小酌三盏两杯 理不清缠绕的情结  \n在你淡漠眉间 瞥见离人的喜悲霜雪\n\n洛天依看到了一颗雪中的梨树，梨树的根中有有限的能量，它可以向上需要传递热量到其他节点。但风雪很大，每时每刻每个节点能量都会增加会增加或减少，热量过低的节点会掉落。", "description": "具体来说，这棵梨树可以被抽象为一颗以 $1$ 号结点为根的树，初始时每个点都是白色。每个点有能量 $a_i$，初始时 $1$ 以外所有点的能量都为 $0$，$a_1=k$。我们设一个累计能量 $b$。\n\n我们通过如下操作定义一个序列 $\\{v_t\\}$ 的权值：\n- 从小到大度过 $1,2,3,\\dots,t$ 这 $t$ 个时刻。\n- 在第 $x$ 个时刻，执行 $b\\gets b+v_x$。\n- 对于树上的一条边 $(u,v)$，设 $u$ 为父亲，可以选定整数 $h\\in[0,a_u]$ 执行操作 $a_u\\gets a_u-h$，$a_v\\gets a_v+h$，之后该时刻内形如 $(v,w)$ 且 $v$ 为父亲的边不能操作。\n- 若一个点 $i$ 满足 $a_i+b<0$，将 $i$ 以及 $i$ 的子树中的点染成黑色。\n- 执行最优操作以最大化第 $t$ 时刻后的白点个数，该序列权值即为最大白点个数。\n\n定义一个序列 $\\{v_t\\}$ 合法当且仅当 $\\forall i\\in[1,t]$，$\\lvert v_i\\rvert\\in[0,m]$。给定 $t$，求出所有合法序列 $\\{v_t\\}$ 的权值之和对 $998244353$ 取模后的值。", "inputFormat": "第一行四个非负整数 $n,m,t,k$，分别表示树的结点个数，$v_i$ 的取值范围，时刻数，初始时的 $a_1$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示 $u$ 号结点与 $v$ 号结点之间有一条边。", "outputFormat": "输出所有合法序列的和对 $998244353$ 取模后的结果。", "hint": "**【样例解释】**\n\n样例 $3$ 解释：\n\n对于一种 $\\{v_3\\}=\\{1,0,-2\\}$ 的情况，一种最优操作如下：\n- 第一个时刻，$1$ 号结点传递 $4$ 能量给 $2$ 号结点，操作完毕后 $a=\\{1,4,0,0,0\\}$，$b=1$。\n- 第二个时刻，$2$ 号结点传递 $2$ 能量给 $4$ 号结点，操作完毕后 $a=\\{1,2,0,2,0\\}$，$b=1$。\n- 第三个时刻，$2$ 号结点传递 $1$ 能量给 $3$ 号结点，$4$ 号结点传递 $1$ 能量给 $5$ 号结点，操作完毕后 $a=\\{1,1,1,1,1\\}$，$b=-1$。\n- 所有时刻结束，因为始终没有 $a_i+b<0$ 的点，所以所有结点为白色。\n\n样例 $4$ 解释：\n\n对于一种 $\\{v_{6}\\}=\\{1,2,1,2,1,2\\}$ 的情况，一种最优操作如下：\n- 第 $1\\sim 6$ 个时刻，不进行操作。\n- 所有时刻结束，因为始终没有 $a_i+b<0$ 的点，所以所有结点为白色。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | $n \\le$ | $m \\le$ | $t \\le$ | $k \\le$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $4$ | $4$ | $4$ | $40$ | $20$ | × |\n| $1$ | $2 \\times 10^5$ | $20$ | $20$ | $1 \\times 10^5$ | $10$ | $\\checkmark$ |\n| $2$ | $2 \\times 10^5$ | $20$ | $20$ | $3 \\times 10^5$ | $20$ | × |\n| $3$ | $2 \\times 10^5$ | $50$ | $100$ | $3 \\times 10^5$ | $10$ | × |\n| $4$ | $2 \\times 10^5$ | $50$ | $500$ | $3 \\times 10^5$ | $40$ | × |\n\n特殊性质：保证树的形态是菊花。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 2\\times 10^5$，$1\\leq k\\leq 3\\times 10^5$，$1\\leq m\\leq 50$，$1\\leq t\\leq 500$，保证输入构成一棵树。\n\n**【其他】**\n\n本题原名梨花开，介于赛时题面有误，且原题面可读性较低，于 2024 年 3 月重写题面并改名。改标题不便赛时选手重新找到该题，但出题人意识到时修改已久，不便改回。在此致歉。\n\n与 2025 年 8 月将题面中的“热量”改为“能量”。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R2」霜雪千年", "background": "> 在这老街回眸 烟云中追溯我是谁  \n只消暮雨点滴 便足以粉饰这是非  \n待这月色涌起 谁人轻叩这门扉  \n苔绿青石板街 斑驳了流水般岁月  \n小酌三盏两杯 理不清缠绕的情结  \n在你淡漠眉间 瞥见离人的喜悲霜雪\n\n洛天依看到了一颗雪中的梨树，梨树的根中有有限的能量，它可以向上需要传递热量到其他节点。但风雪很大，每时每刻每个节点能量都会增加会增加或减少，热量过低的节点会掉落。", "description": "具体来说，这棵梨树可以被抽象为一颗以 $1$ 号结点为根的树，初始时每个点都是白色。每个点有能量 $a_i$，初始时 $1$ 以外所有点的能量都为 $0$，$a_1=k$。我们设一个累计能量 $b$。\n\n我们通过如下操作定义一个序列 $\\{v_t\\}$ 的权值：\n- 从小到大度过 $1,2,3,\\dots,t$ 这 $t$ 个时刻。\n- 在第 $x$ 个时刻，执行 $b\\gets b+v_x$。\n- 对于树上的一条边 $(u,v)$，设 $u$ 为父亲，可以选定整数 $h\\in[0,a_u]$ 执行操作 $a_u\\gets a_u-h$，$a_v\\gets a_v+h$，之后该时刻内形如 $(v,w)$ 且 $v$ 为父亲的边不能操作。\n- 若一个点 $i$ 满足 $a_i+b<0$，将 $i$ 以及 $i$ 的子树中的点染成黑色。\n- 执行最优操作以最大化第 $t$ 时刻后的白点个数，该序列权值即为最大白点个数。\n\n定义一个序列 $\\{v_t\\}$ 合法当且仅当 $\\forall i\\in[1,t]$，$\\lvert v_i\\rvert\\in[0,m]$。给定 $t$，求出所有合法序列 $\\{v_t\\}$ 的权值之和对 $998244353$ 取模后的值。", "inputFormat": "第一行四个非负整数 $n,m,t,k$，分别表示树的结点个数，$v_i$ 的取值范围，时刻数，初始时的 $a_1$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示 $u$ 号结点与 $v$ 号结点之间有一条边。", "outputFormat": "输出所有合法序列的和对 $998244353$ 取模后的结果。", "hint": "**【样例解释】**\n\n样例 $3$ 解释：\n\n对于一种 $\\{v_3\\}=\\{1,0,-2\\}$ 的情况，一种最优操作如下：\n- 第一个时刻，$1$ 号结点传递 $4$ 能量给 $2$ 号结点，操作完毕后 $a=\\{1,4,0,0,0\\}$，$b=1$。\n- 第二个时刻，$2$ 号结点传递 $2$ 能量给 $4$ 号结点，操作完毕后 $a=\\{1,2,0,2,0\\}$，$b=1$。\n- 第三个时刻，$2$ 号结点传递 $1$ 能量给 $3$ 号结点，$4$ 号结点传递 $1$ 能量给 $5$ 号结点，操作完毕后 $a=\\{1,1,1,1,1\\}$，$b=-1$。\n- 所有时刻结束，因为始终没有 $a_i+b<0$ 的点，所以所有结点为白色。\n\n样例 $4$ 解释：\n\n对于一种 $\\{v_{6}\\}=\\{1,2,1,2,1,2\\}$ 的情况，一种最优操作如下：\n- 第 $1\\sim 6$ 个时刻，不进行操作。\n- 所有时刻结束，因为始终没有 $a_i+b<0$ 的点，所以所有结点为白色。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | $n \\le$ | $m \\le$ | $t \\le$ | $k \\le$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $4$ | $4$ | $4$ | $40$ | $20$ | × |\n| $1$ | $2 \\times 10^5$ | $20$ | $20$ | $1 \\times 10^5$ | $10$ | $\\checkmark$ |\n| $2$ | $2 \\times 10^5$ | $20$ | $20$ | $3 \\times 10^5$ | $20$ | × |\n| $3$ | $2 \\times 10^5$ | $50$ | $100$ | $3 \\times 10^5$ | $10$ | × |\n| $4$ | $2 \\times 10^5$ | $50$ | $500$ | $3 \\times 10^5$ | $40$ | × |\n\n特殊性质：保证树的形态是菊花。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 2\\times 10^5$，$1\\leq k\\leq 3\\times 10^5$，$1\\leq m\\leq 50$，$1\\leq t\\leq 500$，保证输入构成一棵树。\n\n**【其他】**\n\n本题原名梨花开，介于赛时题面有误，且原题面可读性较低，于 2024 年 3 月重写题面并改名。改标题不便赛时选手重新找到该题，但出题人意识到时修改已久，不便改回。在此致歉。\n\n与 2025 年 8 月将题面中的“热量”改为“能量”。", "locale": "zh-CN"}}}
{"pid": "P10038", "type": "P", "difficulty": 5, "samples": [["1", "1"], ["2", "1 2"], ["3", "2 1 3"], ["4", "4 2 3 1"], ["5", "5 4 1 2 3"], ["6", "2 4 5 1 6 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "洛谷原创", "Special Judge", "O2优化", "区间 DP", "构造"], "title": "「FAOI-R2」Program of atom(x) 2027", "background": "**Update on 2025/5/11：我们在附件处新增了一份可视化工具。**\n\n**Update on 2025/5/26：可视化工具已经更新。**\n\n这是来自 $2027$ 年的 FAOI 的一道题目，是一道带有 SPJ 的传统题。\n\n------------\n\n自从 [krjt](https://www.luogu.com.cn/user/691537) 上次被 $160$ 人 [JC](https://www.luogu.com.cn/problem/T573220) 后，他换了一个「量子密码锁」，并用它锁上了自己的电脑包——打不开密码锁，就取不出包里的电脑。理论上，一旦 krjt 忘了密码，就连造这把锁的人也打不开。\n\n然而，这把锁并非固若金汤。~~有一天，krjt 突然对化学产生了浓厚的兴趣。他拿起那把锁，放在酒精灯上加热，结果发现：~~ 在高温环境下，这把锁内的原子（严格来说是「离子」，下同）排布变得不稳定，这将导致它瘫痪。", "description": "krjt 找来了密码锁的说明书：\n\n> 在密码锁中，有一条长度为 $n$（不能更改，$n$ 的具体取值见密码锁铭牌）的链，链上共有 $n$ 个结点。每个结点上可以存放至多一个原子。初始时，$1,2,\\ldots,n$ 号原子以某个顺序（可以由用户自行调整）被存放在其中，每个结点存放一个原子。\n> \n> 定义 $i$ 号原子的电荷量为 $i!=1 \\times 2\\times 3 \\times \\ldots \\times i$。\n> \n> 现有一个计时器 $b$（单位为秒），其初值为 $0$。\n>\n> 密码锁被加热后，以下事件**依次循环发生**，直至达成终止条件：\n> \n> 1. 位于链两端的原子被移除（**这不会使链变短**），**不再对后续事件产生影响**；\n> 2. 判定终止条件：\n>    - 若此时链中剩下**不多于 $1$ 个**原子（**也可以是 $0$ 个**），则**达成终止条件**，密码锁瘫痪（**此时计时器 $b$ 的值不会增加 $1$**）；\n>    - 否则，将计时器 $b$ 的值增加 $1$。\n> 3. 给每个原子标定运动方向（**标定的运动方向是临时的，只生效一次，在下一次标定前会被重置**）：\n>    - 计算它左边所有原子的电荷量之和，设计算结果为 $x$；\n>    - 计算它右边所有原子的电荷量之和，设计算结果为 $y$；\n>    - 如果 $x<y$，则标定方向为「向左」；\n>    - 如果 $x>y$，则标定方向为「向右」；\n>    - 可以证明，$x \\ne y$。\n> 4. 所有原子按照所标定的运动方向，移动一条边的距离，来到相邻的结点。\n\n此外，krjt 从铭牌上读取到了 $n$ 的值。\n\nkrjt 定义，密码锁的瘫痪用时，为它瘫痪时 $b$ 的值。当然，krjt 希望密码锁尽量安全，因此他想**最大化密码锁的瘫痪用时**。\n\n~~为了不让更多人再次 JC krjt~~，请问：他该如何排列密码锁中 $n$ 个原子的初始顺序？", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行 $n$ 个正整数，一个 $1 \\sim n$ 的排列，表示你给 krjt 规划的排列方案：从左到右（或者从右到左，可以证明它们的瘫痪用时相等）依次输出 $n$ 个原子的编号。\n\n**答案可能有多个，输出一个即可。**", "hint": "**样例解释：**\n\n$6$ 个样例的瘫痪用时分别为 $0,0,0,1,1,2$ 秒。\n\n实际上，枚举可知：当 $n \\le 6$ 时，输出任何一个 $1 \\sim n$ 的排列都能 AC。\n\n下面对样例 $6$ 进行模拟。在链的描述中：\n\n- $0$ 表示该结点为空；\n- $i$ 表示该结点上存放着 $i$ 号原子；\n- $(x,y)$ 为计算结果。\n\n1. **初始的链**为 $\\color{blue}2-4-5-1-6-3$；\n2. $b$ 初始为 $0$；\n3. **位于两端的原子被移除**，链变为 $\\color{blue}0-4-5-1-6-0$；\n4. $b$ 增加至 $1$；\n5. **计算**，$4$ 个原子（从左向右）的结果分别为 $(\\color{red}0\\color{black},841),(\\color{red}24\\color{black},721),(\\color{red}144\\color{black},720),(145,\\color{red}0\\color{black})$；\n6. 根据结果，左边 $3$ 个原子（$4,5,1$）**向左运动**，最右边的原子（$6$）**向右运动**，链变为 $\\color{blue}4-5-1-0-0-6$；\n7. **位于两端的原子被移除**，链变为 $\\color{blue}0-5-1-0-0-0$；\n8. $b$ 增加至 $2$；\n9. **计算**，$2$ 个原子（从左向右）的结果分别为 $(\\color{red}0\\color{black},1),(120,\\color{red}0\\color{black})$；\n10. 根据结果，左边的原子（$5$）**向左运动**，右边的原子（$1$）**向右运动**，链变为 $\\color{blue}5-0-0-1-0-0$；\n11. **位于两端的原子被移除**，链变为 $\\color{blue}0-0-0-1-0-0$；\n11. 此时链中只剩下 $1$ 个原子（$1$），**反应结束，密码锁瘫痪**。\n\n综上，样例 $6$ 的瘫痪用时为 $2$ 秒。\n\n------------\n\n本题共有 $100$ 个测试点，分别有 $n=1,2,\\ldots,100$，每个 $1$ 分。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R2」Program of atom(x) 2027", "background": "**Update on 2025/5/11：我们在附件处新增了一份可视化工具。**\n\n**Update on 2025/5/26：可视化工具已经更新。**\n\n这是来自 $2027$ 年的 FAOI 的一道题目，是一道带有 SPJ 的传统题。\n\n------------\n\n自从 [krjt](https://www.luogu.com.cn/user/691537) 上次被 $160$ 人 [JC](https://www.luogu.com.cn/problem/T573220) 后，他换了一个「量子密码锁」，并用它锁上了自己的电脑包——打不开密码锁，就取不出包里的电脑。理论上，一旦 krjt 忘了密码，就连造这把锁的人也打不开。\n\n然而，这把锁并非固若金汤。~~有一天，krjt 突然对化学产生了浓厚的兴趣。他拿起那把锁，放在酒精灯上加热，结果发现：~~ 在高温环境下，这把锁内的原子（严格来说是「离子」，下同）排布变得不稳定，这将导致它瘫痪。", "description": "krjt 找来了密码锁的说明书：\n\n> 在密码锁中，有一条长度为 $n$（不能更改，$n$ 的具体取值见密码锁铭牌）的链，链上共有 $n$ 个结点。每个结点上可以存放至多一个原子。初始时，$1,2,\\ldots,n$ 号原子以某个顺序（可以由用户自行调整）被存放在其中，每个结点存放一个原子。\n> \n> 定义 $i$ 号原子的电荷量为 $i!=1 \\times 2\\times 3 \\times \\ldots \\times i$。\n> \n> 现有一个计时器 $b$（单位为秒），其初值为 $0$。\n>\n> 密码锁被加热后，以下事件**依次循环发生**，直至达成终止条件：\n> \n> 1. 位于链两端的原子被移除（**这不会使链变短**），**不再对后续事件产生影响**；\n> 2. 判定终止条件：\n>    - 若此时链中剩下**不多于 $1$ 个**原子（**也可以是 $0$ 个**），则**达成终止条件**，密码锁瘫痪（**此时计时器 $b$ 的值不会增加 $1$**）；\n>    - 否则，将计时器 $b$ 的值增加 $1$。\n> 3. 给每个原子标定运动方向（**标定的运动方向是临时的，只生效一次，在下一次标定前会被重置**）：\n>    - 计算它左边所有原子的电荷量之和，设计算结果为 $x$；\n>    - 计算它右边所有原子的电荷量之和，设计算结果为 $y$；\n>    - 如果 $x<y$，则标定方向为「向左」；\n>    - 如果 $x>y$，则标定方向为「向右」；\n>    - 可以证明，$x \\ne y$。\n> 4. 所有原子按照所标定的运动方向，移动一条边的距离，来到相邻的结点。\n\n此外，krjt 从铭牌上读取到了 $n$ 的值。\n\nkrjt 定义，密码锁的瘫痪用时，为它瘫痪时 $b$ 的值。当然，krjt 希望密码锁尽量安全，因此他想**最大化密码锁的瘫痪用时**。\n\n~~为了不让更多人再次 JC krjt~~，请问：他该如何排列密码锁中 $n$ 个原子的初始顺序？", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行 $n$ 个正整数，一个 $1 \\sim n$ 的排列，表示你给 krjt 规划的排列方案：从左到右（或者从右到左，可以证明它们的瘫痪用时相等）依次输出 $n$ 个原子的编号。\n\n**答案可能有多个，输出一个即可。**", "hint": "**样例解释：**\n\n$6$ 个样例的瘫痪用时分别为 $0,0,0,1,1,2$ 秒。\n\n实际上，枚举可知：当 $n \\le 6$ 时，输出任何一个 $1 \\sim n$ 的排列都能 AC。\n\n下面对样例 $6$ 进行模拟。在链的描述中：\n\n- $0$ 表示该结点为空；\n- $i$ 表示该结点上存放着 $i$ 号原子；\n- $(x,y)$ 为计算结果。\n\n1. **初始的链**为 $\\color{blue}2-4-5-1-6-3$；\n2. $b$ 初始为 $0$；\n3. **位于两端的原子被移除**，链变为 $\\color{blue}0-4-5-1-6-0$；\n4. $b$ 增加至 $1$；\n5. **计算**，$4$ 个原子（从左向右）的结果分别为 $(\\color{red}0\\color{black},841),(\\color{red}24\\color{black},721),(\\color{red}144\\color{black},720),(145,\\color{red}0\\color{black})$；\n6. 根据结果，左边 $3$ 个原子（$4,5,1$）**向左运动**，最右边的原子（$6$）**向右运动**，链变为 $\\color{blue}4-5-1-0-0-6$；\n7. **位于两端的原子被移除**，链变为 $\\color{blue}0-5-1-0-0-0$；\n8. $b$ 增加至 $2$；\n9. **计算**，$2$ 个原子（从左向右）的结果分别为 $(\\color{red}0\\color{black},1),(120,\\color{red}0\\color{black})$；\n10. 根据结果，左边的原子（$5$）**向左运动**，右边的原子（$1$）**向右运动**，链变为 $\\color{blue}5-0-0-1-0-0$；\n11. **位于两端的原子被移除**，链变为 $\\color{blue}0-0-0-1-0-0$；\n11. 此时链中只剩下 $1$ 个原子（$1$），**反应结束，密码锁瘫痪**。\n\n综上，样例 $6$ 的瘫痪用时为 $2$ 秒。\n\n------------\n\n本题共有 $100$ 个测试点，分别有 $n=1,2,\\ldots,100$，每个 $1$ 分。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P10039", "type": "P", "difficulty": 3, "samples": [["6\n1 2\n2 3\n2 4\n1 5\n5 6", "Wasted."], ["7\n1 2\n2 3\n2 4\n1 5\n5 6\n5 7", "You win, temporarily."]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 游戏", "background": "", "description": "小 I 和小 J 又在玩游戏。\n\n小 J 找来了一棵 $n$ 个点的树。树上的每条边有开启和关闭两个状态，初始树上每条边都是开启的。\n\n初始树上有一颗棋子放在 $1$ 号节点。小 I 可以移动棋子，目标是将棋子移动到一个度数**恰好**为 $1$ 的节点上；小 J 可以关闭树上的边，目标是阻止小 I 将棋子移动到度数恰好为 $1$ 的节点上。\n\n游戏分为若干轮，每轮有如下环节：\n\n1. 小 I 任务判定：如果棋子在度数恰好为 $1$ 的节点上，小 I 获胜，否则进入第 2 步；\n2. 小 J 行动：小 J 将一条目前开启的边，将这条边永久关闭，进入第 3 步，如果目前不存在开启的边则直接跳过行动进入第 3 步；\n3. 小 I 行动：小 I 选择一条连接当前棋子所在节点且开启的边，将棋子移动到这条边的另一个节点上。如果没有这样的边，小 J 获胜，否则进入新的一轮，回到第 1 步。\n\n小 J 想知道，如果小 I 和小 J 知道这棵树的形态且绝顶聪明，谁会获胜。", "inputFormat": "第一行一个整数 $n (1 \\le n \\le 10^5)$ 表示树的节点数，接下来 $n-1$ 行每行两个整数 $u,v (1 \\le u, v \\le n)$，表示树上的一条边。", "outputFormat": "如果小 I 获胜，输出 `You win, temporarily.`，否则输出 `Wasted.`。", "hint": "【样例解释 1】\n\n小 J 的策略如下：\n\n- 小 J 将 $(1,2)$ 关闭，这样小 I 只能移动到 $5$；\n- 小 J 将 $(5,6)$ 关闭，这样小 I 只得移动回 $1$；\n- 小 J 将 $(1,5)$ 关闭，于是小 I 无法移动。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 游戏", "background": "", "description": "小 I 和小 J 又在玩游戏。\n\n小 J 找来了一棵 $n$ 个点的树。树上的每条边有开启和关闭两个状态，初始树上每条边都是开启的。\n\n初始树上有一颗棋子放在 $1$ 号节点。小 I 可以移动棋子，目标是将棋子移动到一个度数**恰好**为 $1$ 的节点上；小 J 可以关闭树上的边，目标是阻止小 I 将棋子移动到度数恰好为 $1$ 的节点上。\n\n游戏分为若干轮，每轮有如下环节：\n\n1. 小 I 任务判定：如果棋子在度数恰好为 $1$ 的节点上，小 I 获胜，否则进入第 2 步；\n2. 小 J 行动：小 J 将一条目前开启的边，将这条边永久关闭，进入第 3 步，如果目前不存在开启的边则直接跳过行动进入第 3 步；\n3. 小 I 行动：小 I 选择一条连接当前棋子所在节点且开启的边，将棋子移动到这条边的另一个节点上。如果没有这样的边，小 J 获胜，否则进入新的一轮，回到第 1 步。\n\n小 J 想知道，如果小 I 和小 J 知道这棵树的形态且绝顶聪明，谁会获胜。", "inputFormat": "第一行一个整数 $n (1 \\le n \\le 10^5)$ 表示树的节点数，接下来 $n-1$ 行每行两个整数 $u,v (1 \\le u, v \\le n)$，表示树上的一条边。", "outputFormat": "如果小 I 获胜，输出 `You win, temporarily.`，否则输出 `Wasted.`。", "hint": "【样例解释 1】\n\n小 J 的策略如下：\n\n- 小 J 将 $(1,2)$ 关闭，这样小 I 只能移动到 $5$；\n- 小 J 将 $(5,6)$ 关闭，这样小 I 只得移动回 $1$；\n- 小 J 将 $(1,5)$ 关闭，于是小 I 无法移动。", "locale": "zh-CN"}}}
{"pid": "P10040", "type": "P", "difficulty": 5, "samples": [["5\n10?1?", "3\n4\n2\n3\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 替换", "background": "", "description": "给定一个长度为 $n$、字符集为 `01?` 的字符串 $s_1s_2 \\cdots s_n$。\n\n对于任意 $k \\in [1,n]$，考察字符串 $T_k = t_1 t_2 \\cdots t_n$，其中对于 $1 \\le i \\le n$，\n\n- 若 $s_i \\ne$ `?`，则 $t_i = s_i$；\n- 否则，若 $i \\le k$，$t_i =$ `0`；\n- 否则 $t_i = t_{i-k}$，你可以通过递归地算出 $t_{i-k}$ 得到 $t_i$。\n\n容易发现 $T_k$ 的字符集为 `01`。你需要对所有 $k \\in [1,n]$ 求出 $T_k$ 中 `1` 的个数。", "inputFormat": "输入的第一行一个整数 $n (1 \\le n \\le 10^5)$ 表示字符串长度，第二行一个长度为 $n$、字符集为 `01?` 的字符串 $s_1s_2\\cdots s_n$。", "outputFormat": "输出 $n$ 行，第 $i$ 行一个整数表示 $T_i$ 中 `1` 的个数。", "hint": "$T_1 =$ `10011`，$T_2 =$ `10111`，$T_3 =$ `10010`，$T_4 =$ `10011`，$T_5 =$ `10010`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 替换", "background": "", "description": "给定一个长度为 $n$、字符集为 `01?` 的字符串 $s_1s_2 \\cdots s_n$。\n\n对于任意 $k \\in [1,n]$，考察字符串 $T_k = t_1 t_2 \\cdots t_n$，其中对于 $1 \\le i \\le n$，\n\n- 若 $s_i \\ne$ `?`，则 $t_i = s_i$；\n- 否则，若 $i \\le k$，$t_i =$ `0`；\n- 否则 $t_i = t_{i-k}$，你可以通过递归地算出 $t_{i-k}$ 得到 $t_i$。\n\n容易发现 $T_k$ 的字符集为 `01`。你需要对所有 $k \\in [1,n]$ 求出 $T_k$ 中 `1` 的个数。", "inputFormat": "输入的第一行一个整数 $n (1 \\le n \\le 10^5)$ 表示字符串长度，第二行一个长度为 $n$、字符集为 `01?` 的字符串 $s_1s_2\\cdots s_n$。", "outputFormat": "输出 $n$ 行，第 $i$ 行一个整数表示 $T_i$ 中 `1` 的个数。", "hint": "$T_1 =$ `10011`，$T_2 =$ `10111`，$T_3 =$ `10010`，$T_4 =$ `10011`，$T_5 =$ `10010`。", "locale": "zh-CN"}}}
{"pid": "P10041", "type": "P", "difficulty": 7, "samples": [["4 5 6\n2 1 2 3\n3 3 3 4\n5 7 9 11", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2023", "区间 DP", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 史莱姆工厂", "background": "", "description": "有 $n$ 个史莱姆排成一行，其中第 $i$ 个的颜色为 $c_i$，质量为 $m_i$。\n\n你可以执行任意次把一个史莱姆的质量增加 $1$ 的操作，需要花费 $w$ 的价钱。\n\n但是一旦史莱姆的质量达到 $k$ 或以上，就会变得不稳定而必须在下一次操作之前被卖掉。你只能卖出质量大于等于 $k$ 的史莱姆。根据市场价，卖掉一个质量为 $i$ 的史莱姆可以得到 $p_i$ 的收入。保证 $p_i-p_{i-1}<w$。但不保证 $p_i$ 单调不降。\n\n卖掉一个史莱姆之后，它两边的史莱姆会被挤压继而靠在一起。如果这两个史莱姆颜色相同，那么就会互相融合成一个史莱姆，其质量是二者的质量之和。这个新的史莱姆也有可能需要被卖掉从而接着进行这个过程。\n\n你想知道卖掉所有史莱姆最多可以净赚多少。", "inputFormat": "第一行三个正整数 $n,k,w(1\\le n\\le 150, 2\\le k\\le 10, 1\\le w\\le 10^6)$。\n\n第二行 $n$ 个正整数，其中第 $i$ 个表示 $c_i(1\\le c_i\\le n)$。保证 $c_i\\not=c_{i-1}$。\n\n第三行 $n$ 个正整数，其中第 $i$ 个表示 $m_i(1\\le m_i<k)$。\n\n第四行 $k-1$ 个整数，分别表示卖出质量为 $k$ 到 $2k-2$ 的史莱姆的收入，即 $p_k$ 到 $p_{2k-2}$，保证 $0\\le p_i\\le 10^9$，且 $p_i-p_{i-1}<w$。\n\n保证相邻两个史莱姆的颜色不同。", "outputFormat": "一行一个整数，表示卖出所有史莱姆最大的净利润。", "hint": "先增加颜色为 $3$ 的史莱姆的质量。然后它被卖掉，获得 $5$ 的收入。\n\n然后增加颜色为 $1$ 的史莱姆的质量两次。然后它被卖掉，获得 $5$ 的收入。接着两个颜色为 $2$ 的史莱姆融合在一起卖掉，获得 $7$ 的收入。\n\n操作了三次需要 $18$ 的花费，所以净利润为 $-1$。可以证明不存在更好的方案。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 史莱姆工厂", "background": "", "description": "有 $n$ 个史莱姆排成一行，其中第 $i$ 个的颜色为 $c_i$，质量为 $m_i$。\n\n你可以执行任意次把一个史莱姆的质量增加 $1$ 的操作，需要花费 $w$ 的价钱。\n\n但是一旦史莱姆的质量达到 $k$ 或以上，就会变得不稳定而必须在下一次操作之前被卖掉。你只能卖出质量大于等于 $k$ 的史莱姆。根据市场价，卖掉一个质量为 $i$ 的史莱姆可以得到 $p_i$ 的收入。保证 $p_i-p_{i-1}<w$。但不保证 $p_i$ 单调不降。\n\n卖掉一个史莱姆之后，它两边的史莱姆会被挤压继而靠在一起。如果这两个史莱姆颜色相同，那么就会互相融合成一个史莱姆，其质量是二者的质量之和。这个新的史莱姆也有可能需要被卖掉从而接着进行这个过程。\n\n你想知道卖掉所有史莱姆最多可以净赚多少。", "inputFormat": "第一行三个正整数 $n,k,w(1\\le n\\le 150, 2\\le k\\le 10, 1\\le w\\le 10^6)$。\n\n第二行 $n$ 个正整数，其中第 $i$ 个表示 $c_i(1\\le c_i\\le n)$。保证 $c_i\\not=c_{i-1}$。\n\n第三行 $n$ 个正整数，其中第 $i$ 个表示 $m_i(1\\le m_i<k)$。\n\n第四行 $k-1$ 个整数，分别表示卖出质量为 $k$ 到 $2k-2$ 的史莱姆的收入，即 $p_k$ 到 $p_{2k-2}$，保证 $0\\le p_i\\le 10^9$，且 $p_i-p_{i-1}<w$。\n\n保证相邻两个史莱姆的颜色不同。", "outputFormat": "一行一个整数，表示卖出所有史莱姆最大的净利润。", "hint": "先增加颜色为 $3$ 的史莱姆的质量。然后它被卖掉，获得 $5$ 的收入。\n\n然后增加颜色为 $1$ 的史莱姆的质量两次。然后它被卖掉，获得 $5$ 的收入。接着两个颜色为 $2$ 的史莱姆融合在一起卖掉，获得 $7$ 的收入。\n\n操作了三次需要 $18$ 的花费，所以净利润为 $-1$。可以证明不存在更好的方案。", "locale": "zh-CN"}}}
{"pid": "P10042", "type": "P", "difficulty": 7, "samples": [["2 2\n1 0\n3 2", "1 2"], ["5 5 \n3 3 3 3 2\n2 3 3 3 1\n1 3 3 3 3\n3 3 3 3 3\n3 3 3 3 3", "50830224 170059345\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 三染色", "background": "", "description": "我有一个调色盘，总共 $n$ 行 $m$ 列，形成了 $n\\times m$ 个格子，每个格子里要放一朵花。可以放置的花有 $3$ 种颜色可以选择，分别用 $0,1,2$ 表示。\n\n花朵注视着它周围的花，并想要变成其他花朵的样子。如果在一个时刻，一朵颜色为 $c$ 的花的上、下、左、右之一，有至少一朵花的颜色为 $c-1$，那么这朵花在下一个时刻会变成颜色 $c-1$，否则它在下一个时刻的颜色仍然是 $c$。其中颜色 $\\bmod 3$ 考虑。\n\n对于一个初始的在调色盘中放花的方案，如果经过有限个时刻之后，所有花都变成同一颜色，我们称这个放花的方案是**美好的**。\n\n不难看出，对于一个美好的放花方案，每朵花都有一个最早的时刻，它在这个时刻之后一直不变色。我们称这个时刻为这朵花的**稳定时刻**。\n我们从第 $0$ 时刻开始计时，所以一朵花如果从未改变颜色，那么它的稳定时刻就是 $0$。\n\n现在我已经在调色盘的一些格子中放置了花朵，也有一些格子是空的。我想知道，有多少种给剩余的格子放花的方案，使得这个方案是美好的？以及，对于这些美好的方案，位于第 1 行第 1 列格子中花朵的稳定时刻的总和是多少？\n\n你只需要回答我这两个结果对 $998244353$ 取模的值。", "inputFormat": "输入第一行为两个正整数 $n,m$（$2 \\le n \\le 5$，$2 \\le m \\le 50$）。\n\n接下来 $n$ 行，每一行 $m$ 个整数，第 $i$ 行第 $j$ 个整数 $a_{i,j}\\in \\{0,1,2,3\\}$ 表示对应方格的状态。其中 $a_{i,j}\\in \\{0,1,2\\}$ 表示有一朵花，以及这朵花的颜色，$a_{i,j}=3$ 表示没有花。", "outputFormat": "输出一行两个整数，表示美好的方案数，和左上角格子中花朵稳定时刻的总和。", "hint": "**【样例解释 1】**\n\n只有在未知格子放入花朵颜色为 $0$ 的时候会结束，并且在两个时刻之后所有花朵的颜色全部变为 $2$，此时左上角方格中的花朵颜色变成 $2$ 并不再改变，因此它的稳定时刻就是 $2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 三染色", "background": "", "description": "我有一个调色盘，总共 $n$ 行 $m$ 列，形成了 $n\\times m$ 个格子，每个格子里要放一朵花。可以放置的花有 $3$ 种颜色可以选择，分别用 $0,1,2$ 表示。\n\n花朵注视着它周围的花，并想要变成其他花朵的样子。如果在一个时刻，一朵颜色为 $c$ 的花的上、下、左、右之一，有至少一朵花的颜色为 $c-1$，那么这朵花在下一个时刻会变成颜色 $c-1$，否则它在下一个时刻的颜色仍然是 $c$。其中颜色 $\\bmod 3$ 考虑。\n\n对于一个初始的在调色盘中放花的方案，如果经过有限个时刻之后，所有花都变成同一颜色，我们称这个放花的方案是**美好的**。\n\n不难看出，对于一个美好的放花方案，每朵花都有一个最早的时刻，它在这个时刻之后一直不变色。我们称这个时刻为这朵花的**稳定时刻**。\n我们从第 $0$ 时刻开始计时，所以一朵花如果从未改变颜色，那么它的稳定时刻就是 $0$。\n\n现在我已经在调色盘的一些格子中放置了花朵，也有一些格子是空的。我想知道，有多少种给剩余的格子放花的方案，使得这个方案是美好的？以及，对于这些美好的方案，位于第 1 行第 1 列格子中花朵的稳定时刻的总和是多少？\n\n你只需要回答我这两个结果对 $998244353$ 取模的值。", "inputFormat": "输入第一行为两个正整数 $n,m$（$2 \\le n \\le 5$，$2 \\le m \\le 50$）。\n\n接下来 $n$ 行，每一行 $m$ 个整数，第 $i$ 行第 $j$ 个整数 $a_{i,j}\\in \\{0,1,2,3\\}$ 表示对应方格的状态。其中 $a_{i,j}\\in \\{0,1,2\\}$ 表示有一朵花，以及这朵花的颜色，$a_{i,j}=3$ 表示没有花。", "outputFormat": "输出一行两个整数，表示美好的方案数，和左上角格子中花朵稳定时刻的总和。", "hint": "**【样例解释 1】**\n\n只有在未知格子放入花朵颜色为 $0$ 的时候会结束，并且在两个时刻之后所有花朵的颜色全部变为 $2$，此时左上角方格中的花朵颜色变成 $2$ 并不再改变，因此它的稳定时刻就是 $2$。", "locale": "zh-CN"}}}
{"pid": "P10043", "type": "P", "difficulty": 3, "samples": [["4 2\n2 1 3 2\n4 2", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 广播", "background": "", "description": "小 I 正在学习使用 Pytorch。这是一个非常热门的用于机器学习训练的 Python 库。\n\n小 I 注意到，Pytorch 中对于张量运算有称作“广播”(broadcast)的机制。你可以认为张量是高维数组。对于一个 $k$ 维张量 $A$，我们用长度为 $k$ 的序列 $(a_1,a_2,\\cdots,a_k)$ 表示其各个维度的长度，也就是说 $A$ 是一个 $a_1 \\times a_2 \\times \\cdots \\times a_k$ 的张量。\n\n对于两个张量 $A$ 和 $B$，设它们的维度分别为 $(a_1,a_2,\\cdots,a_m)$ 和 $(b_1,b_2,\\cdots,b_n)$，称 $A$ 和 $B$ 是 **可广播的**，当且仅当以下性质成立：\n\n- 对于任意整数 $0 \\le i \\le \\min(n,m) - 1$，要么 $a_{m-i} = b_{n-i}$，要么 $a_{m-i}$ 和 $b_{n-i}$ 中至少有一个是 $1$。\n\n现在小 I 有两个张量，它们的维度分别是 $(p_1,p_2,\\cdots,p_m)$ 和 $(q_1,q_2,\\cdots,q_n)$，它们不一定是可广播的。\n\n为此，小 I 可以使用 Pytorch 内置的函数进行若干次操作（可以不做操作），每次操作对序列 $p$ 或 $q$ 进行以下修改：\n\n- 选择 $p$ 或 $q$，在选定序列的任意一个位置插入一个 $1$。\n\n小 I 想知道他最少要多少次操作才能让两个张量变为可广播的。", "inputFormat": "输入的第一行两个整数 $m,n(1 \\le m,n \\le 2000)$ 表示两个张量的维度。\n\n第二行 $m$ 个整数 $p_1,p_2,\\cdots,p_m (1 \\le p_i \\le 2000)$ 描述第一个张量每个维度的长度。\n\n第三行 $n$ 个整数 $q_1,q_2,\\cdots,q_n (1 \\le q_i \\le 2000)$ 描述第二个张量每个维度的长度。", "outputFormat": "输入一行一个整数表示最少的插入 $1$ 的数量使得两个张量变为可广播的。", "hint": "在序列 $q$ 的第二个位置之前插入一个 $1$（得到 `4 1 2`），两个张量就会变为可广播的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 广播", "background": "", "description": "小 I 正在学习使用 Pytorch。这是一个非常热门的用于机器学习训练的 Python 库。\n\n小 I 注意到，Pytorch 中对于张量运算有称作“广播”(broadcast)的机制。你可以认为张量是高维数组。对于一个 $k$ 维张量 $A$，我们用长度为 $k$ 的序列 $(a_1,a_2,\\cdots,a_k)$ 表示其各个维度的长度，也就是说 $A$ 是一个 $a_1 \\times a_2 \\times \\cdots \\times a_k$ 的张量。\n\n对于两个张量 $A$ 和 $B$，设它们的维度分别为 $(a_1,a_2,\\cdots,a_m)$ 和 $(b_1,b_2,\\cdots,b_n)$，称 $A$ 和 $B$ 是 **可广播的**，当且仅当以下性质成立：\n\n- 对于任意整数 $0 \\le i \\le \\min(n,m) - 1$，要么 $a_{m-i} = b_{n-i}$，要么 $a_{m-i}$ 和 $b_{n-i}$ 中至少有一个是 $1$。\n\n现在小 I 有两个张量，它们的维度分别是 $(p_1,p_2,\\cdots,p_m)$ 和 $(q_1,q_2,\\cdots,q_n)$，它们不一定是可广播的。\n\n为此，小 I 可以使用 Pytorch 内置的函数进行若干次操作（可以不做操作），每次操作对序列 $p$ 或 $q$ 进行以下修改：\n\n- 选择 $p$ 或 $q$，在选定序列的任意一个位置插入一个 $1$。\n\n小 I 想知道他最少要多少次操作才能让两个张量变为可广播的。", "inputFormat": "输入的第一行两个整数 $m,n(1 \\le m,n \\le 2000)$ 表示两个张量的维度。\n\n第二行 $m$ 个整数 $p_1,p_2,\\cdots,p_m (1 \\le p_i \\le 2000)$ 描述第一个张量每个维度的长度。\n\n第三行 $n$ 个整数 $q_1,q_2,\\cdots,q_n (1 \\le q_i \\le 2000)$ 描述第二个张量每个维度的长度。", "outputFormat": "输入一行一个整数表示最少的插入 $1$ 的数量使得两个张量变为可广播的。", "hint": "在序列 $q$ 的第二个位置之前插入一个 $1$（得到 `4 1 2`），两个张量就会变为可广播的。", "locale": "zh-CN"}}}
{"pid": "P10044", "type": "P", "difficulty": 6, "samples": [["4 6\n1 2 1\n4 3 3\n4 1 9\n2 4 1\n3 1 2\n3 2 6", "7"], ["1 0", "-1"], ["1 1\n1 1 1", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 最小环", "background": "", "description": "小 I 发明了 $O(n + m)$ 的有向图最小环，于是他想考考你。\n\n给定一个 $n$ 个节点、$m$ 条边的有向图，每条边有正整数边权。你需要求出图上的一个环使得环上边的边权和最小。求出这个最小值，或者报告不存在环。\n\n当然，由于你不会 $O(n + m)$ 的有向图最小环，于是小 I 放宽了条件：保证输入的图是弱连通的，且 $m-n$ 不会很大。一个图是弱连通的当且仅当将有向边换为无向边后图连通。", "inputFormat": "第一行两个整数 $n,m (1 \\le n \\le 3 \\times 10^5, -1 \\le m-n \\le 1500)$，表示图的点数和边数。\n\n接下来 $m$ 行每行三个整数 $u_i,v_i,w_i (1 \\le u_i,v_i \\le n, 1 \\le w_i \\le 10^9)$，表示一条从 $u_i$ 到 $v_i$、边权为 $w_i$ 的有向边。保证图是弱连通的。", "outputFormat": "如果图中不存在环，输出 `-1`，否则输出一个整数表示最小环的长度和。", "hint": "**【样例解释 1】**\n\n最小环为 $1 \\to 2 \\to 4 \\to 3 \\to 1$。\n\n**【样例解释 3】**\n\n最小环为 $1 \\to 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 最小环", "background": "", "description": "小 I 发明了 $O(n + m)$ 的有向图最小环，于是他想考考你。\n\n给定一个 $n$ 个节点、$m$ 条边的有向图，每条边有正整数边权。你需要求出图上的一个环使得环上边的边权和最小。求出这个最小值，或者报告不存在环。\n\n当然，由于你不会 $O(n + m)$ 的有向图最小环，于是小 I 放宽了条件：保证输入的图是弱连通的，且 $m-n$ 不会很大。一个图是弱连通的当且仅当将有向边换为无向边后图连通。", "inputFormat": "第一行两个整数 $n,m (1 \\le n \\le 3 \\times 10^5, -1 \\le m-n \\le 1500)$，表示图的点数和边数。\n\n接下来 $m$ 行每行三个整数 $u_i,v_i,w_i (1 \\le u_i,v_i \\le n, 1 \\le w_i \\le 10^9)$，表示一条从 $u_i$ 到 $v_i$、边权为 $w_i$ 的有向边。保证图是弱连通的。", "outputFormat": "如果图中不存在环，输出 `-1`，否则输出一个整数表示最小环的长度和。", "hint": "**【样例解释 1】**\n\n最小环为 $1 \\to 2 \\to 4 \\to 3 \\to 1$。\n\n**【样例解释 3】**\n\n最小环为 $1 \\to 1$。", "locale": "zh-CN"}}}
{"pid": "P10045", "type": "P", "difficulty": 5, "samples": [["10 10\n969575 741825 24903 1047319 450475 256145 1045323 479255 810659 768323 \n1 5 6 3034\n2 1 10\n2 1 9\n2 1 4\n1 3 6 126904\n2 5 5\n2 9 9\n1 7 7 853094\n1 4 9 1025178\n2 5 8", "1045541\n1012343\n558151\n580413\n810659\n527353"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "线段树", "2023", "组合数学", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 线段树", "background": "", "description": "有一个长度为 $n$ 的序列 $a_1,a_2,\\cdots,a_n$，保证 $a_i$ 为**奇数**。\n\n有两种操作：\n\n1. 给定 $l,r,x$，将 $a_l,a_{l+1},\\cdots,a_r$ 加上**偶数** $x$；\n\n2. 给定 $l,r$，求 $a_l,a_{l+1},\\cdots,a_r$ 的乘积，答案对 $2^{20}$ 取模；", "inputFormat": "第一行两个正整数 $n,q$ 表示序列的长度和询问的个数. 保证 $1 \\le n,q \\le 2\\times 10^5$。\n\n第二行 $n$ 个**奇数** $a_1,a_2,\\cdots,a_n$. 保证 $1 \\le a_i < 2^{20}$。\n\n接下来 $q$ 行，每一行表示一个操作，格式为以下两种之一：\n\n- $1 ~ l ~ r ~ x$：表示进行第一种操作. 保证 $1 \\le l \\le r \\le n$，$0 \\le x < 2 ^ {20}$。\n- $2 ~ l ~ r$：表示进行第二种操作. 保证 $1 \\le l \\le r \\le n$。", "outputFormat": "对于每一次 $2$ 操作，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 线段树", "background": "", "description": "有一个长度为 $n$ 的序列 $a_1,a_2,\\cdots,a_n$，保证 $a_i$ 为**奇数**。\n\n有两种操作：\n\n1. 给定 $l,r,x$，将 $a_l,a_{l+1},\\cdots,a_r$ 加上**偶数** $x$；\n\n2. 给定 $l,r$，求 $a_l,a_{l+1},\\cdots,a_r$ 的乘积，答案对 $2^{20}$ 取模；", "inputFormat": "第一行两个正整数 $n,q$ 表示序列的长度和询问的个数. 保证 $1 \\le n,q \\le 2\\times 10^5$。\n\n第二行 $n$ 个**奇数** $a_1,a_2,\\cdots,a_n$. 保证 $1 \\le a_i < 2^{20}$。\n\n接下来 $q$ 行，每一行表示一个操作，格式为以下两种之一：\n\n- $1 ~ l ~ r ~ x$：表示进行第一种操作. 保证 $1 \\le l \\le r \\le n$，$0 \\le x < 2 ^ {20}$。\n- $2 ~ l ~ r$：表示进行第二种操作. 保证 $1 \\le l \\le r \\le n$。", "outputFormat": "对于每一次 $2$ 操作，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
