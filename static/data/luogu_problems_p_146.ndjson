{"pid": "P3958", "type": "P", "difficulty": 3, "samples": [["3 \n2 4 1 \n0 0 1 \n0 0 3 \n2 5 1 \n0 0 1 \n0 0 4 \n2 5 2 \n0 0 2 \n2 0 4", "Yes\nNo\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["搜索", "数学", "2017", "并查集", "NOIP 提高组", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "[NOIP 2017 提高组] 奶酪", "background": "NOIP2017 提高组 D2T1", "description": "现有一块大奶酪，它的高度为 $h$，它的长度和宽度我们可以认为是无限大的，奶酪中间有许多半径相同的球形空洞。我们可以在这块奶酪中建立空间坐标系，在坐标系中，奶酪的下表面为 $z = 0$，奶酪的上表面为 $z = h$。\n\n现在，奶酪的下表面有一只小老鼠 Jerry，它知道奶酪中所有空洞的球心所在的坐标。如果两个空洞相切或是相交，则 Jerry 可以从其中一个空洞跑到另一个空洞，特别地，如果一个空洞与下表面相切或是相交，Jerry 则可以从奶酪下表面跑进空洞；如果一个空洞与上表面相切或是相交，Jerry 则可以从空洞跑到奶酪上表面。\n\n位于奶酪下表面的 Jerry 想知道，在不破坏奶酪的情况下，能否利用已有的空洞跑到奶酪的上表面去?\n\n空间内两点 $P_1(x_1,y_1,z_1)$、$P_2(x_2,y_2,z_2)$ 的距离公式如下：\n\n\n$$\\mathrm{dist}(P_1,P_2)=\\sqrt{(x_1-x_2)^2+(y_1-y_2)^2+(z_1-z_2)^2}$$", "inputFormat": "每个输入文件包含多组数据。\n\n第一行，包含一个正整数 $T$，代表该输入文件中所含的数据组数。\n\n接下来是 $T$ 组数据，每组数据的格式如下： 第一行包含三个正整数 $n,h,r$，两个数之间以一个空格分开，分别代表奶酪中空洞的数量，奶酪的高度和空洞的半径。\n\n接下来的 $n$ 行，每行包含三个整数 $x,y,z$，两个数之间以一个空格分开，表示空洞球心坐标为 $(x,y,z)$。", "outputFormat": "$T$ 行，分别对应 $T$ 组数据的答案，如果在第 $i$ 组数据中，Jerry 能从下表面跑到上表面，则输出 `Yes`，如果不能，则输出 `No`。", "hint": "**【输入输出样例 $1$ 说明】**\n\n ![](https://cdn.luogu.com.cn/upload/pic/10860.png) \n\n第一组数据，由奶酪的剖面图可见：\n\n第一个空洞在 $(0,0,0)$ 与下表面相切；\n\n第二个空洞在 $(0,0,4)$ 与上表面相切；\n\n两个空洞在 $(0,0,2)$ 相切。\n\n输出 `Yes`。\n\n \n第二组数据，由奶酪的剖面图可见：\n\n两个空洞既不相交也不相切。\n\n输出 `No`。\n\n \n第三组数据，由奶酪的剖面图可见：\n\n两个空洞相交，且与上下表面相切或相交。\n\n输出 `Yes`。\n\n**【数据规模与约定】**\n\n对于 $20\\%$ 的数据，$n = 1$，$1 \\le h$，$r \\le  10^4$，坐标的绝对值不超过 $10^4$。\n\n对于 $40\\%$ 的数据，$1 \\le n \\le 8$，$1 \\le h$，$r \\le 10^4$，坐标的绝对值不超过 $10^4$。\n\n对于 $80\\%$ 的数据，$1 \\le n \\le 10^3$，$1 \\le h , r \\le 10^4$，坐标的绝对值不超过 $10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1\\times 10^3$，$1 \\le h , r \\le 10^9$，$1 \\le T \\le 20$，坐标的绝对值不超过 $10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2017 Senior] Cheese", "background": "NOIP 2017 Senior D2T1.", "description": "There is a large block of cheese with height $h$, and we may regard its length and width as infinite. Inside the cheese, there are many spherical cavities with the same radius. We can establish a 3D coordinate system in the cheese, where the bottom surface of the cheese is $z = 0$ and the top surface is $z = h$.\n\nNow, there is a little mouse Jerry on the bottom surface of the cheese. He knows the coordinates of the centers of all the cavities. If two cavities are tangent to or intersect each other, then Jerry can run from one cavity to the other. In particular, if a cavity is tangent to or intersects the bottom surface, Jerry can enter the cavity from the bottom surface; if a cavity is tangent to or intersects the top surface, Jerry can go from the cavity to the top surface.\n\nStarting on the bottom surface, Jerry wants to know whether he can reach the top surface by using the existing cavities without damaging the cheese.\n\nThe distance between two points $P_1(x_1, y_1, z_1)$ and $P_2(x_2, y_2, z_2)$ in space is:\n$$\\mathrm{dist}(P_1,P_2)=\\sqrt{(x_1-x_2)^2+(y_1-y_2)^2+(z_1-z_2)^2}.$$", "inputFormat": "Each input file contains multiple data sets.\n\nThe first line contains a positive integer $T$, the number of data sets in the file.\n\nThen follow $T$ data sets, each with the following format: The first line contains three positive integers $n, h, r$, separated by a space, representing the number of cavities, the height of the cheese, and the radius of each cavity.\n\nThe next $n$ lines each contain three integers $x, y, z$, separated by a space, indicating that the center of a cavity is at $(x, y, z)$.", "outputFormat": "Output $T$ lines. For the $i$-th data set, if Jerry can go from the bottom surface to the top surface, output `Yes`; otherwise, output `No`.", "hint": "【Explanation for Sample I/O 1】\n\n![](https://cdn.luogu.com.cn/upload/pic/10860.png)\n\nFor the first data set, from the cross-sectional view:\n- The first cavity is tangent to the bottom surface at $(0, 0, 0)$.\n- The second cavity is tangent to the top surface at $(0, 0, 4)$.\n- The two cavities are tangent at $(0, 0, 2)$.\nOutput `Yes`.\n\nFor the second data set, from the cross-sectional view:\n- The two cavities neither intersect nor are tangent.\nOutput `No`.\n\nFor the third data set, from the cross-sectional view:\n- The two cavities intersect, and they are each tangent to or intersect the top and bottom surfaces.\nOutput `Yes`.\n\n【Constraints】\n\n- For $20\\%$ of the testdata, $n = 1$, $1 \\le h, r \\le 10^4$, and the absolute value of each coordinate does not exceed $10^4$.\n- For $40\\%$ of the testdata, $1 \\le n \\le 8$, $1 \\le h, r \\le 10^4$, and the absolute value of each coordinate does not exceed $10^4$.\n- For $80\\%$ of the testdata, $1 \\le n \\le 10^3$, $1 \\le h, r \\le 10^4$, and the absolute value of each coordinate does not exceed $10^4$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 1 \\times 10^3$, $1 \\le h, r \\le 10^9$, $1 \\le T \\le 20$, and the absolute value of each coordinate does not exceed $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2017 提高组] 奶酪", "background": "NOIP2017 提高组 D2T1", "description": "现有一块大奶酪，它的高度为 $h$，它的长度和宽度我们可以认为是无限大的，奶酪中间有许多半径相同的球形空洞。我们可以在这块奶酪中建立空间坐标系，在坐标系中，奶酪的下表面为 $z = 0$，奶酪的上表面为 $z = h$。\n\n现在，奶酪的下表面有一只小老鼠 Jerry，它知道奶酪中所有空洞的球心所在的坐标。如果两个空洞相切或是相交，则 Jerry 可以从其中一个空洞跑到另一个空洞，特别地，如果一个空洞与下表面相切或是相交，Jerry 则可以从奶酪下表面跑进空洞；如果一个空洞与上表面相切或是相交，Jerry 则可以从空洞跑到奶酪上表面。\n\n位于奶酪下表面的 Jerry 想知道，在不破坏奶酪的情况下，能否利用已有的空洞跑到奶酪的上表面去?\n\n空间内两点 $P_1(x_1,y_1,z_1)$、$P_2(x_2,y_2,z_2)$ 的距离公式如下：\n\n\n$$\\mathrm{dist}(P_1,P_2)=\\sqrt{(x_1-x_2)^2+(y_1-y_2)^2+(z_1-z_2)^2}$$", "inputFormat": "每个输入文件包含多组数据。\n\n第一行，包含一个正整数 $T$，代表该输入文件中所含的数据组数。\n\n接下来是 $T$ 组数据，每组数据的格式如下： 第一行包含三个正整数 $n,h,r$，两个数之间以一个空格分开，分别代表奶酪中空洞的数量，奶酪的高度和空洞的半径。\n\n接下来的 $n$ 行，每行包含三个整数 $x,y,z$，两个数之间以一个空格分开，表示空洞球心坐标为 $(x,y,z)$。", "outputFormat": "$T$ 行，分别对应 $T$ 组数据的答案，如果在第 $i$ 组数据中，Jerry 能从下表面跑到上表面，则输出 `Yes`，如果不能，则输出 `No`。", "hint": "**【输入输出样例 $1$ 说明】**\n\n ![](https://cdn.luogu.com.cn/upload/pic/10860.png) \n\n第一组数据，由奶酪的剖面图可见：\n\n第一个空洞在 $(0,0,0)$ 与下表面相切；\n\n第二个空洞在 $(0,0,4)$ 与上表面相切；\n\n两个空洞在 $(0,0,2)$ 相切。\n\n输出 `Yes`。\n\n \n第二组数据，由奶酪的剖面图可见：\n\n两个空洞既不相交也不相切。\n\n输出 `No`。\n\n \n第三组数据，由奶酪的剖面图可见：\n\n两个空洞相交，且与上下表面相切或相交。\n\n输出 `Yes`。\n\n**【数据规模与约定】**\n\n对于 $20\\%$ 的数据，$n = 1$，$1 \\le h$，$r \\le  10^4$，坐标的绝对值不超过 $10^4$。\n\n对于 $40\\%$ 的数据，$1 \\le n \\le 8$，$1 \\le h$，$r \\le 10^4$，坐标的绝对值不超过 $10^4$。\n\n对于 $80\\%$ 的数据，$1 \\le n \\le 10^3$，$1 \\le h , r \\le 10^4$，坐标的绝对值不超过 $10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1\\times 10^3$，$1 \\le h , r \\le 10^9$，$1 \\le T \\le 20$，坐标的绝对值不超过 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P3959", "type": "P", "difficulty": 6, "samples": [["4 5\n1 2 1\n1 3 3\n1 4 1\n2 3 4\n3 4 1", "4"], ["4 5\n1 2 1\n1 3 3\n1 4 1\n2 3 4\n3 4 2", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["贪心", "2017", "NOIP 提高组", "枚举", "状压 DP"], "title": "[NOIP 2017 提高组] 宝藏", "background": "NOIP2017 D2T2", "description": "参与考古挖掘的小明得到了一份藏宝图，藏宝图上标出了 $n$ 个深埋在地下的宝藏屋， 也给出了这 $n$ 个宝藏屋之间可供开发的 $m$ 条道路和它们的长度。\n\n小明决心亲自前往挖掘所有宝藏屋中的宝藏。但是，每个宝藏屋距离地面都很远，也就是说，从地面打通一条到某个宝藏屋的道路是很困难的，而开发宝藏屋之间的道路则相对容易很多。\n\n小明的决心感动了考古挖掘的赞助商，赞助商决定免费赞助他打通一条从地面到某个宝藏屋的通道，通往哪个宝藏屋则由小明来决定。\n\n在此基础上，小明还需要考虑如何开凿宝藏屋之间的道路。已经开凿出的道路可以任意通行不消耗代价。每开凿出一条新道路，小明就会与考古队一起挖掘出由该条道路所能到达的宝藏屋的宝藏。另外，小明不想开发无用道路，即两个已经被挖掘过的宝藏屋之间的道路无需再开发。\n\n新开发一条道路的代价是 $L\\times K$。其中 $L$ 代表这条道路的长度，$K$ 代表从赞助商帮你打通的宝藏屋到这条道路起点的宝藏屋所经过的宝藏屋的数量（包括赞助商帮你打通的宝藏屋和这条道路起点的宝藏屋） 。\n\n请你编写程序为小明选定由赞助商打通的宝藏屋和之后开凿的道路，使得工程总代价最小，并输出这个最小值。", "inputFormat": "第一行两个用空格分离的正整数 $n,m$，代表宝藏屋的个数和道路数。\n\n接下来 $m$ 行，每行三个用空格分离的正整数，分别是由一条道路连接的两个宝藏屋的编号（编号为 $1-n$），和这条道路的长度 $v$。", "outputFormat": "一个正整数，表示最小的总代价。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/10868.png) \n\n【样例解释 $1$】\n\n小明选定让赞助商打通了 $1$ 号宝藏屋。小明开发了道路 $1 \\to 2$，挖掘了 $2$ 号宝藏。开发了道路 $1 \\to 4$，挖掘了 $4$ 号宝藏。还开发了道路 $4 \\to 3$，挖掘了 $3$ 号宝藏。\n\n工程总代价为 $1 \\times 1 + 1 \\times 1 + 1 \\times 2  = 4 $。\n\n【样例解释 $2$】\n\n小明选定让赞助商打通了 $1$ 号宝藏屋。小明开发了道路 $1 \\to 2$，挖掘了 $2$ 号宝藏。开发了道路 $1 \\to 3$，挖掘了 $3$ 号宝藏。还开发了道路 $1 \\to 4$，挖掘了 $4$ 号宝藏。\n\n工程总代价为 $1 \\times 1 + 3 \\times 1 + 1 \\times 1  = 5$。\n\n\n【数据规模与约定】\n\n对于 $ 20\\%$ 的数据： 保证输入是一棵树，$1 \\le n \\le 8$，$v \\le 5\\times 10^3$ 且所有的 $v$ 都相等。\n\n对于 $40\\%$ 的数据： $1 \\le n \\le 8$，$0 \\le m \\le 10^3$，$v \\le 5\\times 10^3$ 且所有的 $v$ 都相等。\n\n对于 $ 70\\%$ 的数据： $1 \\le n \\le 8$，$0 \\le m \\le 10^3$，$v \\le  5\\times 10^3$。\n\n对于 $ 100\\%$ 的数据： $1 \\le n \\le 12$，$0 \\le m \\le 10^3$，$v \\le  5\\times 10^5$。\n\n---\n\n$\\text{upd 2022.7.27}$：新增加 $50$ 组 Hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2017 Senior] Treasure", "background": "NOIP 2017 D2T2.", "description": "Xiaoming, who is taking part in an archaeological dig, obtained a treasure map. The map marks $n$ treasure chambers buried deep underground, and gives $m$ developable roads between these $n$ chambers together with their lengths.\n\nXiaoming resolves to excavate the treasure in all chambers. However, every chamber is far from the surface. That is, opening a road from the surface to some chamber is difficult, whereas opening roads between chambers is much easier.\n\nMoved by Xiaoming’s determination, the sponsor decides to open for free exactly one passage from the surface to a chamber, and Xiaoming can choose which chamber it leads to.\n\nAfter that, Xiaoming must decide how to open roads between chambers. Any already opened road can be traversed arbitrarily at no cost. Each time a new road is opened, Xiaoming and the team excavate the treasure chambers that become reachable via that road. Moreover, Xiaoming does not want to open useless roads; that is, a road between two already excavated chambers need not be opened.\n\nThe cost to open a new road is $L \\times K$, where $L$ is the road’s length, and $K$ is the number of chambers along the path from the sponsored chamber to the starting chamber of this road (including both the sponsored chamber and this road’s starting chamber).\n\nChoose the sponsored chamber and the subsequent roads to open so that the total cost is minimized, and output this minimum.", "inputFormat": "The first line contains two space-separated positive integers $n,m$, the number of treasure chambers and the number of roads.\n\nThe next $m$ lines each contain three space-separated positive integers: the indices of two chambers connected by a road (numbered $1-n$), and the length $v$ of that road.", "outputFormat": "Output a single positive integer, the minimum total cost.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/10868.png)\n\n[Sample explanation $1$]\n\nXiaoming chooses chamber $1$ to be opened by the sponsor. Xiaoming opens road $1 \\to 2$ and excavates chamber $2$. He opens road $1 \\to 4$ and excavates chamber $4$. He also opens road $4 \\to 3$ and excavates chamber $3$.\n\nThe total cost is $1 \\times 1 + 1 \\times 1 + 1 \\times 2  = 4$.\n\n[Sample explanation $2$]\n\nXiaoming chooses chamber $1$ to be opened by the sponsor. Xiaoming opens road $1 \\to 2$ and excavates chamber $2$. He opens road $1 \\to 3$ and excavates chamber $3$. He also opens road $1 \\to 4$ and excavates chamber $4$.\n\nThe total cost is $1 \\times 1 + 3 \\times 1 + 1 \\times 1  = 5$.\n\nConstraints\n\n- For $20\\%$ of the testdata: the input is guaranteed to be a tree, $1 \\le n \\le 8$, $v \\le 5 \\times 10^3$, and all $v$ are equal.\n- For $40\\%$ of the testdata: $1 \\le n \\le 8$, $0 \\le m \\le 10^3$, $v \\le 5 \\times 10^3$, and all $v$ are equal.\n- For $70\\%$ of the testdata: $1 \\le n \\le 8$, $0 \\le m \\le 10^3$, $v \\le 5 \\times 10^3$.\n- For $100\\%$ of the testdata: $1 \\le n \\le 12$, $0 \\le m \\le 10^3$, $v \\le 5 \\times 10^5$.\n\n---\n\n$\\text{upd 2022.7.27}$: Added $50$ groups of hack testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2017 提高组] 宝藏", "background": "NOIP2017 D2T2", "description": "参与考古挖掘的小明得到了一份藏宝图，藏宝图上标出了 $n$ 个深埋在地下的宝藏屋， 也给出了这 $n$ 个宝藏屋之间可供开发的 $m$ 条道路和它们的长度。\n\n小明决心亲自前往挖掘所有宝藏屋中的宝藏。但是，每个宝藏屋距离地面都很远，也就是说，从地面打通一条到某个宝藏屋的道路是很困难的，而开发宝藏屋之间的道路则相对容易很多。\n\n小明的决心感动了考古挖掘的赞助商，赞助商决定免费赞助他打通一条从地面到某个宝藏屋的通道，通往哪个宝藏屋则由小明来决定。\n\n在此基础上，小明还需要考虑如何开凿宝藏屋之间的道路。已经开凿出的道路可以任意通行不消耗代价。每开凿出一条新道路，小明就会与考古队一起挖掘出由该条道路所能到达的宝藏屋的宝藏。另外，小明不想开发无用道路，即两个已经被挖掘过的宝藏屋之间的道路无需再开发。\n\n新开发一条道路的代价是 $L\\times K$。其中 $L$ 代表这条道路的长度，$K$ 代表从赞助商帮你打通的宝藏屋到这条道路起点的宝藏屋所经过的宝藏屋的数量（包括赞助商帮你打通的宝藏屋和这条道路起点的宝藏屋） 。\n\n请你编写程序为小明选定由赞助商打通的宝藏屋和之后开凿的道路，使得工程总代价最小，并输出这个最小值。", "inputFormat": "第一行两个用空格分离的正整数 $n,m$，代表宝藏屋的个数和道路数。\n\n接下来 $m$ 行，每行三个用空格分离的正整数，分别是由一条道路连接的两个宝藏屋的编号（编号为 $1-n$），和这条道路的长度 $v$。", "outputFormat": "一个正整数，表示最小的总代价。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/10868.png) \n\n【样例解释 $1$】\n\n小明选定让赞助商打通了 $1$ 号宝藏屋。小明开发了道路 $1 \\to 2$，挖掘了 $2$ 号宝藏。开发了道路 $1 \\to 4$，挖掘了 $4$ 号宝藏。还开发了道路 $4 \\to 3$，挖掘了 $3$ 号宝藏。\n\n工程总代价为 $1 \\times 1 + 1 \\times 1 + 1 \\times 2  = 4 $。\n\n【样例解释 $2$】\n\n小明选定让赞助商打通了 $1$ 号宝藏屋。小明开发了道路 $1 \\to 2$，挖掘了 $2$ 号宝藏。开发了道路 $1 \\to 3$，挖掘了 $3$ 号宝藏。还开发了道路 $1 \\to 4$，挖掘了 $4$ 号宝藏。\n\n工程总代价为 $1 \\times 1 + 3 \\times 1 + 1 \\times 1  = 5$。\n\n\n【数据规模与约定】\n\n对于 $ 20\\%$ 的数据： 保证输入是一棵树，$1 \\le n \\le 8$，$v \\le 5\\times 10^3$ 且所有的 $v$ 都相等。\n\n对于 $40\\%$ 的数据： $1 \\le n \\le 8$，$0 \\le m \\le 10^3$，$v \\le 5\\times 10^3$ 且所有的 $v$ 都相等。\n\n对于 $ 70\\%$ 的数据： $1 \\le n \\le 8$，$0 \\le m \\le 10^3$，$v \\le  5\\times 10^3$。\n\n对于 $ 100\\%$ 的数据： $1 \\le n \\le 12$，$0 \\le m \\le 10^3$，$v \\le  5\\times 10^5$。\n\n---\n\n$\\text{upd 2022.7.27}$：新增加 $50$ 组 Hack 数据。", "locale": "zh-CN"}}}
{"pid": "P3960", "type": "P", "difficulty": 6, "samples": [["2 2 3 \n1 1 \n2 2 \n1 2 ", "1\n1\n4\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2017", "线段树", "二分", "平衡树", "树状数组", "NOIP 提高组", "离线处理"], "title": "[NOIP 2017 提高组] 列队", "background": "NOIP2017 D2T3", "description": "Sylvia 是一个热爱学习的女孩子。\n\n前段时间，Sylvia 参加了学校的军训。众所周知，军训的时候需要站方阵。\n\nSylvia 所在的方阵中有 $n \\times m$ 名学生，方阵的行数为 $n$，列数为 $m$。\n\n为了便于管理，教官在训练开始时，按照从前到后，从左到右的顺序给方阵中 的学生从 $1$ 到 $n \\times m$ 编上了号码（参见后面的样例）。即：初始时，第 $i$ 行第 $j$ 列的学生的编号是 $(i-1)\\times m + j$。\n\n然而在练习方阵的时候，经常会有学生因为各种各样的事情需要离队。在一天 中，一共发生了 $q$ 件这样的离队事件。每一次离队事件可以用数对 $(x,y) (1 \\le x \\le n, 1 \\le y \\le m)$ 描述，表示第 $x$ 行第 $y$ 列的学生离队。\n\n在有学生离队后，队伍中出现了一个空位。为了队伍的整齐，教官会依次下达这样的两条指令：\n\n\n1. 向左看齐。这时第一列保持不动，所有学生向左填补空缺。不难发现在这条指令之后，空位在第 $x$ 行第 $m$ 列。\n2. 向前看齐。这时第一行保持不动，所有学生向前填补空缺。不难发现在这条指令之后，空位在第 $n$ 行第 $m$ 列。\n\n\n教官规定不能有两个或更多学生同时离队。即在前一个离队的学生归队之后， 下一个学生才能离队。因此在每一个离队的学生要归队时，队伍中有且仅有第 $n$ 行第 $m$ 列一个空位，这时这个学生会自然地填补到这个位置。\n\n因为站方阵真的很无聊，所以 Sylvia 想要计算每一次离队事件中，离队的同学的编号是多少。\n\n注意：每一个同学的编号不会随着离队事件的发生而改变，在发生离队事件后方阵中同学的编号可能是乱序的。", "inputFormat": "输入共 $q+1$ 行。\n\n第一行包含 $3$ 个用空格分隔的正整数 $n, m, q$，表示方阵大小是 $n$ 行 $m$ 列，一共发生了 $q$ 次事件。\n\n接下来 $q$ 行按照事件发生顺序描述了 $q$ 件事件。每一行是两个整数 $x, y$，用一个空格分隔，表示这个离队事件中离队的学生当时排在第 $x$ 行第 $y$ 列。", "outputFormat": "按照事件输入的顺序，每一个事件输出一行一个整数，表示这个离队事件中离队学生的编号。", "hint": "【输入输出样例 $1$ 说明】\n\n$$\\begin{matrix}\n\\begin{bmatrix}\n1 & 2 \\\\\n3 & 4 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n & 2 \\\\\n3 & 4 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 &  \\\\\n3 & 4 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 & 1 \\\\\n\\end{bmatrix} \\\\[1em]\n\\begin{bmatrix}\n2 & 4 \\\\\n3 & 1 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 & 1 \\\\\n\\end{bmatrix}\\\\[1em]\n\\begin{bmatrix}\n2 & 4 \\\\\n3 & 1 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 &  \\\\\n3 & 1 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 &  \\\\\n3 & 1 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 1 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 1 \\\\\n3 & 4 \\\\\n\\end{bmatrix}\n\\end{matrix}$$\n\n列队的过程如上图所示，每一行描述了一个事件。在第一个事件中，编号为 $1$ 的同学离队，这时空位在第一行第一列。接着所有同学向左标齐，这时编号为 $2$ 的同学向左移动一步，空位移动到第一行第二列。然后所有同学向上标齐，这时编号为 $4$ 的同学向上一步，这时空位移动到第二行第二列。最后编号为 $1$ 的同学返回填补到空位中。\n\n**【数据规模与约定】**\n\n| 测试点编号 | $n$ | $m$ | $q$ | 其他约定 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 6$ | $\\le 10^3$ | $\\le 10^3$ | $\\le 500$ | 无 |\n| $7\\sim 10$ | $\\le 5\\times 10^4$ | $\\le 5\\times 10^4$ | $\\le 500$ | 无 |\n| $11\\sim 12$ | $=1$ | $\\le 10^5$ | $\\le 10^5$ | 所有事件 $x=1$ |\n| $13\\sim 14$ | $=1$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | 所有事件 $x=1$ |\n| $15\\sim 16$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | 所有事件 $x=1$ |\n| $17\\sim 18$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ | 无 |\n| $19\\sim 20$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | 无 |\n\n数据保证每一个事件满足 $1 \\le x \\le n,1 \\le y \\le m$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2017 Senior] Lineup", "background": "NOIP 2017 D2T3.", "description": "Sylvia is a girl who loves studying.\n\nSome time ago, Sylvia took part in the school’s military training. As is well known, during training they must stand in a square formation.\n\nThere are $n \\times m$ students in Sylvia’s formation, with $n$ rows and $m$ columns.\n\nFor convenience, at the beginning of training, the instructor numbers the students from $1$ to $n \\times m$ in order from front to back and from left to right (see the example below). That is: initially, the student at row $i$, column $j$ has ID $(i-1)\\times m + j$.\n\nHowever, during the formation drills, students often need to leave the formation for various reasons. In one day, there are $q$ such leave events. Each leave event is described by a pair $(x, y)$ ($1 \\le x \\le n, 1 \\le y \\le m$), meaning the student at row $x$, column $y$ leaves.\n\nAfter a student leaves, an empty spot appears. To keep the formation tidy, the instructor issues the following two commands in order:\n\n1. Align left. The first column remains still, and all students shift left to fill the gap. It is easy to see that after this command, the empty spot is at row $x$, column $m$.\n2. Align forward. The first row remains still, and all students shift forward to fill the gap. It is easy to see that after this command, the empty spot is at row $n$, column $m$.\n\nThe instructor stipulates that no two or more students may leave at the same time. That is, after the previously departed student has returned, the next student may leave. Therefore, when each departed student is to return, there is exactly one empty spot at row $n$, column $m$, and the student naturally fills that position.\n\nBecause standing in formation is really boring, Sylvia wants to compute, for each leave event, the ID number of the student who leaves.\n\nNote: A student’s ID never changes due to leave events, though the order of IDs in the formation may become scrambled after events.", "inputFormat": "The input consists of $q+1$ lines.\n\nThe first line contains $3$ positive integers $n$, $m$, and $q$, separated by spaces, indicating a formation of $n$ rows and $m$ columns, with a total of $q$ events.\n\nThe next $q$ lines describe the $q$ events in the order they occur. Each line contains two integers $x, y$, separated by a space, indicating that in this leave event, the student currently at row $x$, column $y$ leaves.", "outputFormat": "For each event, in the input order, output one line with a single integer: the ID of the student who leaves in that event.", "hint": "【Explanation for Sample Input/Output $1$】\n\n$$\\begin{matrix}\n\\begin{bmatrix}\n1 & 2 \\\\\n3 & 4 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n & 2 \\\\\n3 & 4 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 &  \\\\\n3 & 4 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 & 1 \\\\\n\\end{bmatrix} \\\\[1em]\n\\begin{bmatrix}\n2 & 4 \\\\\n3 & 1 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 & 1 \\\\\n\\end{bmatrix}\\\\[1em]\n\\begin{bmatrix}\n2 & 4 \\\\\n3 & 1 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 &  \\\\\n3 & 1 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 &  \\\\\n3 & 1 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 1 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 1 \\\\\n3 & 4 \\\\\n\\end{bmatrix}\n\\end{matrix}$$\n\nThe lineup process is shown above, with each row describing one event. In the first event, the student with ID $1$ leaves, so the empty spot is at row $1$, column $1$. Next, everyone aligns left; the student with ID $2$ moves one step left, and the empty spot moves to row $1$, column $2$. Then everyone aligns forward; the student with ID $4$ moves one step up, and the empty spot moves to row $2$, column $2$. Finally, the student with ID $1$ returns and fills the empty spot.\n\n【Constraints and Notes】\n\n| Test point ID | $n$ | $m$ | $q$ | Other notes |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 6$ | $\\le 10^3$ | $\\le 10^3$ | $\\le 500$ | None |\n| $7\\sim 10$ | $\\le 5\\times 10^4$ | $\\le 5\\times 10^4$ | $\\le 500$ | None |\n| $11\\sim 12$ | $=1$ | $\\le 10^5$ | $\\le 10^5$ | All events have $x=1$ |\n| $13\\sim 14$ | $=1$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | All events have $x=1$ |\n| $15\\sim 16$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | All events have $x=1$ |\n| $17\\sim 18$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ | None |\n| $19\\sim 20$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | None |\n\nThe testdata guarantees that each event satisfies $1 \\le x \\le n,1 \\le y \\le m$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2017 提高组] 列队", "background": "NOIP2017 D2T3", "description": "Sylvia 是一个热爱学习的女孩子。\n\n前段时间，Sylvia 参加了学校的军训。众所周知，军训的时候需要站方阵。\n\nSylvia 所在的方阵中有 $n \\times m$ 名学生，方阵的行数为 $n$，列数为 $m$。\n\n为了便于管理，教官在训练开始时，按照从前到后，从左到右的顺序给方阵中 的学生从 $1$ 到 $n \\times m$ 编上了号码（参见后面的样例）。即：初始时，第 $i$ 行第 $j$ 列的学生的编号是 $(i-1)\\times m + j$。\n\n然而在练习方阵的时候，经常会有学生因为各种各样的事情需要离队。在一天 中，一共发生了 $q$ 件这样的离队事件。每一次离队事件可以用数对 $(x,y) (1 \\le x \\le n, 1 \\le y \\le m)$ 描述，表示第 $x$ 行第 $y$ 列的学生离队。\n\n在有学生离队后，队伍中出现了一个空位。为了队伍的整齐，教官会依次下达这样的两条指令：\n\n\n1. 向左看齐。这时第一列保持不动，所有学生向左填补空缺。不难发现在这条指令之后，空位在第 $x$ 行第 $m$ 列。\n2. 向前看齐。这时第一行保持不动，所有学生向前填补空缺。不难发现在这条指令之后，空位在第 $n$ 行第 $m$ 列。\n\n\n教官规定不能有两个或更多学生同时离队。即在前一个离队的学生归队之后， 下一个学生才能离队。因此在每一个离队的学生要归队时，队伍中有且仅有第 $n$ 行第 $m$ 列一个空位，这时这个学生会自然地填补到这个位置。\n\n因为站方阵真的很无聊，所以 Sylvia 想要计算每一次离队事件中，离队的同学的编号是多少。\n\n注意：每一个同学的编号不会随着离队事件的发生而改变，在发生离队事件后方阵中同学的编号可能是乱序的。", "inputFormat": "输入共 $q+1$ 行。\n\n第一行包含 $3$ 个用空格分隔的正整数 $n, m, q$，表示方阵大小是 $n$ 行 $m$ 列，一共发生了 $q$ 次事件。\n\n接下来 $q$ 行按照事件发生顺序描述了 $q$ 件事件。每一行是两个整数 $x, y$，用一个空格分隔，表示这个离队事件中离队的学生当时排在第 $x$ 行第 $y$ 列。", "outputFormat": "按照事件输入的顺序，每一个事件输出一行一个整数，表示这个离队事件中离队学生的编号。", "hint": "【输入输出样例 $1$ 说明】\n\n$$\\begin{matrix}\n\\begin{bmatrix}\n1 & 2 \\\\\n3 & 4 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n & 2 \\\\\n3 & 4 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 &  \\\\\n3 & 4 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 & 1 \\\\\n\\end{bmatrix} \\\\[1em]\n\\begin{bmatrix}\n2 & 4 \\\\\n3 & 1 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 4 \\\\\n3 & 1 \\\\\n\\end{bmatrix}\\\\[1em]\n\\begin{bmatrix}\n2 & 4 \\\\\n3 & 1 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 &  \\\\\n3 & 1 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 &  \\\\\n3 & 1 \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 1 \\\\\n3 &  \\\\\n\\end{bmatrix} & \\Rightarrow & \n\\begin{bmatrix}\n2 & 1 \\\\\n3 & 4 \\\\\n\\end{bmatrix}\n\\end{matrix}$$\n\n列队的过程如上图所示，每一行描述了一个事件。在第一个事件中，编号为 $1$ 的同学离队，这时空位在第一行第一列。接着所有同学向左标齐，这时编号为 $2$ 的同学向左移动一步，空位移动到第一行第二列。然后所有同学向上标齐，这时编号为 $4$ 的同学向上一步，这时空位移动到第二行第二列。最后编号为 $1$ 的同学返回填补到空位中。\n\n**【数据规模与约定】**\n\n| 测试点编号 | $n$ | $m$ | $q$ | 其他约定 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 6$ | $\\le 10^3$ | $\\le 10^3$ | $\\le 500$ | 无 |\n| $7\\sim 10$ | $\\le 5\\times 10^4$ | $\\le 5\\times 10^4$ | $\\le 500$ | 无 |\n| $11\\sim 12$ | $=1$ | $\\le 10^5$ | $\\le 10^5$ | 所有事件 $x=1$ |\n| $13\\sim 14$ | $=1$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | 所有事件 $x=1$ |\n| $15\\sim 16$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | 所有事件 $x=1$ |\n| $17\\sim 18$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ | 无 |\n| $19\\sim 20$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | $\\le 3\\times 10^5$ | 无 |\n\n数据保证每一个事件满足 $1 \\le x \\le n,1 \\le y \\le m$。", "locale": "zh-CN"}}}
{"pid": "P3961", "type": "P", "difficulty": 5, "samples": [["3 10\n1 1 1 1\n2 2 2 2\n1 3 15 9", "3"], ["3 10\n1 1 13 1\n2 2 2 2\n1 3 4 7", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "各省省选", "排序", "背包 DP", "图论建模", "天津"], "title": "[TJOI2013] 黄金矿工", "background": "", "description": "小 A 最近迷上了在上课时玩《黄金矿工》这款游戏。为了避免被老师发现，他必须小心翼翼，因此他总是输。\n\n在输掉自己所有的金币后，他向你求助。每个黄金可以看做一个点（没有体积）。现在给出你 $N$ 个黄金的坐标，挖到它们所需要的时间以及它们的价值。有些黄金在同一条直线上，这时候你必须按顺序挖。你可以瞬间把钩子转到任意角度。\n\n小 A 一开始在坐标 $(0,0)$，请你帮助小 A 算出在时间 $T$ 内他最多可以得到多少价值的金子。", "inputFormat": "第一行两个整数 $N$ 和 $T$，表示黄金的个数和总时间。\n\n接下来 $N$ 行，每行四个整数 $x$、$y$、$t$、$v$，分别表示黄金的坐标，挖到这个黄金的时间，以及这个黄金的价值。", "outputFormat": "一个整数,表示你可以在 $T$ 时间内得到的最大价值。", "hint": "- 对于 $30\\%$ 的数据，$0<T\\le 4\\times 10^3$；\n- 对于 $100\\%$ 的数据，$1\\le N\\le 200$，$0<T\\le 4\\times 10^4$。\n\n保证 $0\\le|x|\\le 200$，$0<y≤200$，$0<t\\le 200$，$0\\le v\\le 200$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2013] Gold Miner", "background": "", "description": "Recently, Xiao A became obsessed with playing the game “Gold Miner” during class. To avoid being noticed by the teacher, he has to be very cautious, so he always loses.\n\nAfter losing all his coins, he asks you for help. Each piece of gold can be regarded as a point (no volume). You are given the coordinates of $N$ pieces of gold, the time required to mine each, and their value. Some pieces of gold lie on the same straight line; in that case, you must mine them in order. You can instantly rotate the hook to any angle.\n\nXiao A starts at coordinate $(0, 0)$. Please help Xiao A compute the maximum total value he can obtain within time $T$.", "inputFormat": "The first line contains two integers $N$ and $T$, the number of gold pieces and the total time.\n\nThe next $N$ lines each contain four integers $x$, $y$, $t$, $v$, denoting the coordinates of a piece of gold, the time to mine it, and its value.", "outputFormat": "Output a single integer, the maximum total value obtainable within time $T$.", "hint": "- For $30\\%$ of the testdata, $0 < T \\le 4 \\times 10^3$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 200$, $0 < T \\le 4 \\times 10^4$.\n\nIt is guaranteed that $0 \\le |x| \\le 200$, $0 < y \\le 200$, $0 < t \\le 200$, $0 \\le v \\le 200$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2013] 黄金矿工", "background": "", "description": "小 A 最近迷上了在上课时玩《黄金矿工》这款游戏。为了避免被老师发现，他必须小心翼翼，因此他总是输。\n\n在输掉自己所有的金币后，他向你求助。每个黄金可以看做一个点（没有体积）。现在给出你 $N$ 个黄金的坐标，挖到它们所需要的时间以及它们的价值。有些黄金在同一条直线上，这时候你必须按顺序挖。你可以瞬间把钩子转到任意角度。\n\n小 A 一开始在坐标 $(0,0)$，请你帮助小 A 算出在时间 $T$ 内他最多可以得到多少价值的金子。", "inputFormat": "第一行两个整数 $N$ 和 $T$，表示黄金的个数和总时间。\n\n接下来 $N$ 行，每行四个整数 $x$、$y$、$t$、$v$，分别表示黄金的坐标，挖到这个黄金的时间，以及这个黄金的价值。", "outputFormat": "一个整数,表示你可以在 $T$ 时间内得到的最大价值。", "hint": "- 对于 $30\\%$ 的数据，$0<T\\le 4\\times 10^3$；\n- 对于 $100\\%$ 的数据，$1\\le N\\le 200$，$0<T\\le 4\\times 10^4$。\n\n保证 $0\\le|x|\\le 200$，$0<y≤200$，$0<t\\le 200$，$0\\le v\\le 200$。", "locale": "zh-CN"}}}
{"pid": "P3962", "type": "P", "difficulty": 6, "samples": [["5\n101 240 331 4 52\n3\n1 3\n4 5\n1 5", "8 7 6 4 2\n7 4 2 -1 -1\n9 8 7 6 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "各省省选", "天津"], "title": "[TJOI2013] 数字根", "background": "", "description": "一个数字的数字根定义为:这个数字每一位的数字加起来求和,反复这个过程直到和小于10。例如,64357的数字跟为7,因为6+4+3+5+7=25,2+5=7个区间的数字根定义为这个区间所有数字和的数字根。\n\n给定一个序列A1,A2,A3,…,An,你需要回答一些询问。每一个询问给定个区间[L,R],求出这个区间所有连续子区间里最大的前5个不同的数字根，不够5个的用-1补全\n", "inputFormat": "第一行一个整数N,表示序列的长度。第二行是N个整数Ai(0≤Ai<10^9)。第三行是一个整数Q表示询问次数。接下来Q行,每一行两个正整数1,r,表示询问区间。(1≤l≤r≤N)\n", "outputFormat": "Q行,表示每一个查询区间所有连续子区间里最大的前5个不同的数字根,按降序输出,输出用空格隔开。\n", "hint": "### 样例解释\n\n第一个查询区间[1,3],它的连续子区间有[1,1],[2,2],[3,3],[1,2],[2,3],[1,3].可对应的数字根分别为2,6,7,8,4,6。所以最大的5个是8,7,6,4,2。\n\n### 数据范围\n\n30%的数据，N ≤ 1000; Q ≤ 1000\n\n100%的数据，N ≤ 100000; Q ≤ 100000\n", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2013] Digital Root", "background": "", "description": "The digital root of a number is defined as repeatedly summing its digits until the result is less than 10. For example, the digital root of 64357 is 7, because $6 + 4 + 3 + 5 + 7 = 25$, and $2 + 5 = 7$. The digital root of an interval is defined as the digital root of the sum of all numbers in that interval.\n\nGiven a sequence $A_1, A_2, A_3, \\ldots, A_n$, you need to answer several queries. For each query, you are given an interval $[l, r]$. Among all contiguous subintervals within $[l, r]$, find the top 5 distinct digital roots. If there are fewer than 5, fill the remaining positions with $-1$.", "inputFormat": "- The first line contains an integer $N$, the length of the sequence.\n- The second line contains $N$ integers $A_i$ ($0 \\le A_i < 10^9$).\n- The third line contains an integer $Q$, the number of queries.\n- Each of the next $Q$ lines contains two integers $l, r$ ($1 \\le l \\le r \\le N$), denoting a query interval.", "outputFormat": "Output $Q$ lines. For each query interval, output the top 5 distinct digital roots of all its contiguous subintervals in descending order, space-separated. If there are fewer than 5, pad with $-1$.", "hint": "### Sample Explanation\n\nFor the first query interval $[1, 3]$, its contiguous subintervals are $[1, 1]$, $[2, 2]$, $[3, 3]$, $[1, 2]$, $[2, 3]$, $[1, 3]$. Their corresponding digital roots are $2, 6, 7, 8, 4, 6$. Therefore, the top 5 are $8, 7, 6, 4, 2$.\n\n### Constraints\n\n- 30% of the testdata: $N \\le 1000$, $Q \\le 1000$.\n- 100% of the testdata: $N \\le 100000$, $Q \\le 100000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2013] 数字根", "background": "", "description": "一个数字的数字根定义为:这个数字每一位的数字加起来求和,反复这个过程直到和小于10。例如,64357的数字跟为7,因为6+4+3+5+7=25,2+5=7个区间的数字根定义为这个区间所有数字和的数字根。\n\n给定一个序列A1,A2,A3,…,An,你需要回答一些询问。每一个询问给定个区间[L,R],求出这个区间所有连续子区间里最大的前5个不同的数字根，不够5个的用-1补全\n", "inputFormat": "第一行一个整数N,表示序列的长度。第二行是N个整数Ai(0≤Ai<10^9)。第三行是一个整数Q表示询问次数。接下来Q行,每一行两个正整数1,r,表示询问区间。(1≤l≤r≤N)\n", "outputFormat": "Q行,表示每一个查询区间所有连续子区间里最大的前5个不同的数字根,按降序输出,输出用空格隔开。\n", "hint": "### 样例解释\n\n第一个查询区间[1,3],它的连续子区间有[1,1],[2,2],[3,3],[1,2],[2,3],[1,3].可对应的数字根分别为2,6,7,8,4,6。所以最大的5个是8,7,6,4,2。\n\n### 数据范围\n\n30%的数据，N ≤ 1000; Q ≤ 1000\n\n100%的数据，N ≤ 100000; Q ≤ 100000\n", "locale": "zh-CN"}}}
{"pid": "P3963", "type": "P", "difficulty": 5, "samples": [["3 5 70\n30 25\n50 21\n20 20\n5 18\n35 30\n", "35"], ["5 6 9\n4 0\n4 1\n6 3\n8 0\n10 4\n10 5\n", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2013", "二分", "各省省选", "堆", "枚举", "优先队列", "可持久化线段树", "天津"], "title": "[TJOI2013] 奖学金", "background": "小张最近发表了一篇论文，有一个神秘人物要给小张学院发奖学金。", "description": "小张学院有 $c$ 名学生，第 $i$ 名学生的成绩为 $a_i$，要获得的奖学金金额为 $b_i$。  \n要从这 $c$ 名学生中挑出 $n$ 名学生发奖学金。这个神秘人物爱好奇特，他希望得到奖学金的同学的**成绩**的**中位数**尽可能大，但同时，他们的**奖学金总额**不能超过 $f$。\n", "inputFormat": "第一行有三个整数，分别表示要挑出的学生人数 $n$，学生总人数 $c$ 和奖学金总额的最大值 $f$，**保证 $n$ 为奇数**。  \n\n第 $2$ 到第 $(c + 1)$ 行，每行两个整数，第 $(i + 1)$ 行的整数依次表示第 $i$ 名学生的成绩 $a_i$ 和如果要给他发奖学金，则需要发的金额数 $b_i$。", "outputFormat": "输出一行一个整数表示答案。如果无法满足神秘人的条件，请输出 $-1$。", "hint": "### 样例 1 解释\n\n选择成绩为 $5$，$35$，$50$ 的三名同学，奖金总额为 $18 + 30 + 21 = 69$。\n\n### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n \\leq 10^3$，$c \\leq 2 \\times 10^3$。\n- 对于 $100\\%$ 的数据，保证 $3 \\leq n  \\leq 10^5$，$n \\leq c \\leq 2 \\times 10^5$，$0 \\leq f \\leq 2\\times 10^9$，$0 \\leq a_i \\leq 2 \\times 10^9$，$0 \\leq b_i \\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2013] Scholarship", "background": "Xiao Zhang recently published a paper, and a mysterious person wants to award scholarships to Xiao Zhang's college.", "description": "There are $c$ students in Xiao Zhang's college. The $i$-th student's score is $a_i$, and the scholarship amount they would receive is $b_i$.  \nYou need to select $n$ students from these $c$ students to award scholarships. This mysterious person has a peculiar preference: he wants the median of the scores of the students who receive scholarships to be as large as possible, while their total scholarship amount must not exceed $f$.", "inputFormat": "The first line contains three integers, representing the number of students to select $n$, the total number of students $c$, and the maximum total scholarship amount $f$, **guaranteeing that $n$ is odd**.  \n\nLines $2$ through $(c + 1)$: each line contains two integers. The $(i + 1)$-th line contains the $i$-th student's score $a_i$ and, if they are awarded a scholarship, the amount $b_i$ that needs to be given.", "outputFormat": "Output one integer on a single line representing the answer. If the mysterious person's conditions cannot be met, output $-1$.", "hint": "### Sample 1 Explanation\n\nSelect three students with scores $5$, $35$, and $50$, with a total scholarship amount of $18 + 30 + 21 = 69$.\n\n### Constraints\n\n- For $30\\%$ of the testdata, it is guaranteed that $n \\leq 10^3$, $c \\leq 2 \\times 10^3$.\n- For $100\\%$ of the testdata, it is guaranteed that $3 \\leq n \\leq 10^5$, $n \\leq c \\leq 2 \\times 10^5$, $0 \\leq f \\leq 2 \\times 10^9$, $0 \\leq a_i \\leq 2 \\times 10^9$, $0 \\leq b_i \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2013] 奖学金", "background": "小张最近发表了一篇论文，有一个神秘人物要给小张学院发奖学金。", "description": "小张学院有 $c$ 名学生，第 $i$ 名学生的成绩为 $a_i$，要获得的奖学金金额为 $b_i$。  \n要从这 $c$ 名学生中挑出 $n$ 名学生发奖学金。这个神秘人物爱好奇特，他希望得到奖学金的同学的**成绩**的**中位数**尽可能大，但同时，他们的**奖学金总额**不能超过 $f$。\n", "inputFormat": "第一行有三个整数，分别表示要挑出的学生人数 $n$，学生总人数 $c$ 和奖学金总额的最大值 $f$，**保证 $n$ 为奇数**。  \n\n第 $2$ 到第 $(c + 1)$ 行，每行两个整数，第 $(i + 1)$ 行的整数依次表示第 $i$ 名学生的成绩 $a_i$ 和如果要给他发奖学金，则需要发的金额数 $b_i$。", "outputFormat": "输出一行一个整数表示答案。如果无法满足神秘人的条件，请输出 $-1$。", "hint": "### 样例 1 解释\n\n选择成绩为 $5$，$35$，$50$ 的三名同学，奖金总额为 $18 + 30 + 21 = 69$。\n\n### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n \\leq 10^3$，$c \\leq 2 \\times 10^3$。\n- 对于 $100\\%$ 的数据，保证 $3 \\leq n  \\leq 10^5$，$n \\leq c \\leq 2 \\times 10^5$，$0 \\leq f \\leq 2\\times 10^9$，$0 \\leq a_i \\leq 2 \\times 10^9$，$0 \\leq b_i \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P3964", "type": "P", "difficulty": 5, "samples": [["6\n-4 -1\n-1 -2\n2 -4\n0 2\n0 3\n5 -2", "20"], ["6\n0 0\n2 0\n-5 -2\n2 -2\n-1 2\n4 0", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "各省省选", "枚举", "前缀和", "天津"], "title": "[TJOI2013] 松鼠聚会", "background": "", "description": "草原上住着一群小松鼠，每个小松鼠都有一个家。时间长了，大家觉得应该聚一聚。但是草原非常大，松鼠们都很头疼应该在谁家聚会才最合理。\n\n每个小松鼠的家可以用一个点 $(x,y)$ 表示,两个点的距离定义为点 $(x,y)$ 和它周围的 $8$ 个点 $(x-1,y)$，$(x+1,y)$，$(x,y-1)$，$(x,y+1)$，$(x-1,y+1)$，$(x-1,y-1)$，$(x+1,y+1)$，$(x+1,y-1)$ 距离为 $1$。\n", "inputFormat": "第一行是一个整数 $N$，表示有多少只松鼠。接下来 $N$ 行，第 $i$ 行是两个整数 $x$ 和 $y$，表示松鼠 $i$ 的家的坐标。", "outputFormat": "一个整数，表示松鼠为了聚会走的路程和最小是多少。\n", "hint": "### 样例解释\n\n在第一个样例中，松鼠在第二只松鼠家 $(-1,-2)$ 聚会；在第二个样例中，松鼠在第一只松鼠家 $(0,0)$ 聚会。\n\n### 数据范围\n\n- $30\\%$ 的数据，$0\\le N \\le 1000$；\n- $100\\%$ 的数据，$0\\le N \\le 10^5$，$-10^9 \\le x, y \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2013] Squirrel Gathering", "background": "", "description": "A group of little squirrels lives on the prairie, and each squirrel has a home. After a long time, they feel they should have a gathering. However, the prairie is very large, and they are troubled about whose home would be the most reasonable place to meet.\n\nEach squirrel’s home is represented by a point $(x,y)$. The distance between two points is defined so that the distance between point $(x,y)$ and each of its eight neighbors $(x-1,y)$, $(x+1,y)$, $(x,y-1)$, $(x,y+1)$, $(x-1,y+1)$, $(x-1,y-1)$, $(x+1,y+1)$, $(x+1,y-1)$ is $1$.", "inputFormat": "The first line contains an integer $N$, the number of squirrels. The next $N$ lines, the $i$-th line contains two integers $x$ and $y$, the coordinates of squirrel $i$’s home.", "outputFormat": "Output a single integer, the minimum possible sum of distances the squirrels need to travel to gather.", "hint": "### Sample Explanation\n\nIn the first sample, the squirrels gather at the second squirrel’s home $(-1,-2)$; in the second sample, they gather at the first squirrel’s home $(0,0)$.\n\n### Constraints\n\n- For $30\\%$ of the testdata, $0 \\le N \\le 1000$.\n- For $100\\%$ of the testdata, $0 \\le N \\le 10^5$, $-10^9 \\le x, y \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2013] 松鼠聚会", "background": "", "description": "草原上住着一群小松鼠，每个小松鼠都有一个家。时间长了，大家觉得应该聚一聚。但是草原非常大，松鼠们都很头疼应该在谁家聚会才最合理。\n\n每个小松鼠的家可以用一个点 $(x,y)$ 表示,两个点的距离定义为点 $(x,y)$ 和它周围的 $8$ 个点 $(x-1,y)$，$(x+1,y)$，$(x,y-1)$，$(x,y+1)$，$(x-1,y+1)$，$(x-1,y-1)$，$(x+1,y+1)$，$(x+1,y-1)$ 距离为 $1$。\n", "inputFormat": "第一行是一个整数 $N$，表示有多少只松鼠。接下来 $N$ 行，第 $i$ 行是两个整数 $x$ 和 $y$，表示松鼠 $i$ 的家的坐标。", "outputFormat": "一个整数，表示松鼠为了聚会走的路程和最小是多少。\n", "hint": "### 样例解释\n\n在第一个样例中，松鼠在第二只松鼠家 $(-1,-2)$ 聚会；在第二个样例中，松鼠在第一只松鼠家 $(0,0)$ 聚会。\n\n### 数据范围\n\n- $30\\%$ 的数据，$0\\le N \\le 1000$；\n- $100\\%$ 的数据，$0\\le N \\le 10^5$，$-10^9 \\le x, y \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P3965", "type": "P", "difficulty": 6, "samples": [["4 4\nRRRD\nURDD\nUULD\nULLL", "0"], ["3 4\nRRRD\nURLL\nLRRR", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "各省省选", "图论建模", "费用流", "天津"], "title": "[TJOI2013] 循环格", "background": "一个循环格就是一个矩阵,其中所有元素为箭头,指向相邻四个格子。每个元素有一个坐标(行,列),其中左上角元素坐标为(0,0)。给定一个起始位(r,c),你可以沿着箭头方向在格子间行走。即:如果(r,c)是一个左箭头，那么走到(r,c-1);如果是一个右箭头,走到(r,c+1);如果是上箭头,走到(r-1,c);如果是下箭头,走到(r+1,c)。每一行和每一列都是循环的,即如果走出边界,你会出现在另一侧。比如在一个5\\*5的循环格里,从(3,0)向左走会出现在(3,4)。\n", "description": "一个完美的循环格是这样定义的:对于任意一个起始位置,你都可以沿着箭头最终回到起始位置。如果一个循环格不满足完美,你可以随意修改任意一个元素的箭头直到完美。例如下图,左边不是一个完美的循环格,因为只有从(1,1),(1,2),(2,0),(2,3)出发才会回到起始位置。通过修改其中两个箭头,可以得到右图,一个完美的循环格。\n\n ![](https://cdn.luogu.com.cn/upload/pic/10987.png) \n\n给定一个循环格,你需要计算最少需要修改多少个元素使其完美。\n", "inputFormat": "第一行两个整数R和C,表示循环格的行和列。接下来R行,每一行包含C个字符LRUD表示左右上下\n", "outputFormat": "一个整数,表示最少需要修改多少个元素使得给定的循环格完美。\n", "hint": "### 数据范围\n\n30%的数据，1 ≤ R, C ≤ 7\n\n100%的数据，1 ≤ R, C ≤ 15\n", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2013] Cyclic Grid", "background": "A cyclic grid is a matrix in which every cell contains an arrow pointing to one of its four adjacent cells. Each cell has coordinates $(r, c)$, with the top-left cell at $(0, 0)$. Given a starting position $(r, c)$, you can move between cells following the arrows: if $(r, c)$ has a left arrow, move to $(r, c - 1)$; if it has a right arrow, move to $(r, c + 1)$; if it has an up arrow, move to $(r - 1, c)$; if it has a down arrow, move to $(r + 1, c)$. Each row and each column is cyclic: if you move out of bounds, you appear on the opposite side. For example, in a $5 \\times 5$ cyclic grid, moving left from $(3, 0)$ will appear at $(3, 4)$.", "description": "A perfect cyclic grid is defined as follows: starting from any position, by following the arrows you will eventually return to the starting position. If a cyclic grid is not perfect, you may arbitrarily modify the arrow in any cell until it becomes perfect. For example, in the figure below, the grid on the left is not perfect, because only starting from $(1, 1)$, $(1, 2)$, $(2, 0)$, $(2, 3)$ will return to the starting position. By modifying two arrows, you obtain the grid on the right, which is perfect.\n\n ![](https://cdn.luogu.com.cn/upload/pic/10987.png) \n\nGiven a cyclic grid, compute the minimum number of cells you need to modify to make it perfect.", "inputFormat": "The first line contains two integers $R$ and $C$, the numbers of rows and columns of the cyclic grid. The next $R$ lines each contain $C$ characters, each being L, R, U, or D, indicating left, right, up, and down.", "outputFormat": "Output a single integer, the minimum number of cells that need to be modified to make the given cyclic grid perfect.", "hint": "### Constraints\n\n30% of the testdata: $1 \\le R, C \\le 7$.\n\n100% of the testdata: $1 \\le R, C \\le 15$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2013] 循环格", "background": "一个循环格就是一个矩阵,其中所有元素为箭头,指向相邻四个格子。每个元素有一个坐标(行,列),其中左上角元素坐标为(0,0)。给定一个起始位(r,c),你可以沿着箭头方向在格子间行走。即:如果(r,c)是一个左箭头，那么走到(r,c-1);如果是一个右箭头,走到(r,c+1);如果是上箭头,走到(r-1,c);如果是下箭头,走到(r+1,c)。每一行和每一列都是循环的,即如果走出边界,你会出现在另一侧。比如在一个5\\*5的循环格里,从(3,0)向左走会出现在(3,4)。\n", "description": "一个完美的循环格是这样定义的:对于任意一个起始位置,你都可以沿着箭头最终回到起始位置。如果一个循环格不满足完美,你可以随意修改任意一个元素的箭头直到完美。例如下图,左边不是一个完美的循环格,因为只有从(1,1),(1,2),(2,0),(2,3)出发才会回到起始位置。通过修改其中两个箭头,可以得到右图,一个完美的循环格。\n\n ![](https://cdn.luogu.com.cn/upload/pic/10987.png) \n\n给定一个循环格,你需要计算最少需要修改多少个元素使其完美。\n", "inputFormat": "第一行两个整数R和C,表示循环格的行和列。接下来R行,每一行包含C个字符LRUD表示左右上下\n", "outputFormat": "一个整数,表示最少需要修改多少个元素使得给定的循环格完美。\n", "hint": "### 数据范围\n\n30%的数据，1 ≤ R, C ≤ 7\n\n100%的数据，1 ≤ R, C ≤ 15\n", "locale": "zh-CN"}}}
{"pid": "P3966", "type": "P", "difficulty": 5, "samples": [["3\na\naa\naaa", "6\n3\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2013", "二分", "各省省选", "AC 自动机", "天津"], "title": "[TJOI2013] 单词", "background": null, "description": "小张最近在忙毕设，所以一直在读论文。一篇论文是由许多单词组成的，但小张发现一个单词会在论文中出现很多次，他想知道每个单词分别在论文中出现了多少次。", "inputFormat": "第一行一个整数 $N$，表示这篇文章有 $N$ 个单词。\n\n接下来 $N$ 行每行一个单词，每个单词都由小写字母 $a\\sim z$ 组成。", "outputFormat": "输出 $N$ 个整数，第 $i$ 行的数表示第 $i$ 个单词在文章中出现了多少次。", "hint": "### 数据规模与约定\n\n- $30\\%$ 的数据，单词总长度不超过 $10^3$。\n- $100\\%$ 的数据，$1 \\leq n \\leq 200$，单词总长度不超过 $10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2013] Word", "background": "", "description": "Xiao Zhang has been busy with his graduation project, so he has been reading papers. A paper is composed of many words, but Xiao Zhang noticed that a word may appear many times in the paper. He wants to know how many times each word appears in the paper.", "inputFormat": "The first line contains an integer $N$, indicating that the article has $N$ words.\n  \nThen the next $N$ lines each contain one word. Each word consists of lowercase letters $a\\sim z$.", "outputFormat": "Output $N$ integers, where the i-th line is the number of times the i-th word appears in the article.", "hint": "### Constraints\n\n- For 30% of the testdata, the total length of all words does not exceed $10^3$.\n- For 100% of the testdata, $1 \\leq N \\leq 200$, and the total length of all words does not exceed $10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2013] 单词", "background": null, "description": "小张最近在忙毕设，所以一直在读论文。一篇论文是由许多单词组成的，但小张发现一个单词会在论文中出现很多次，他想知道每个单词分别在论文中出现了多少次。", "inputFormat": "第一行一个整数 $N$，表示这篇文章有 $N$ 个单词。\n\n接下来 $N$ 行每行一个单词，每个单词都由小写字母 $a\\sim z$ 组成。", "outputFormat": "输出 $N$ 个整数，第 $i$ 行的数表示第 $i$ 个单词在文章中出现了多少次。", "hint": "### 数据规模与约定\n\n- $30\\%$ 的数据，单词总长度不超过 $10^3$。\n- $100\\%$ 的数据，$1 \\leq n \\leq 200$，单词总长度不超过 $10^6$。", "locale": "zh-CN"}}}
{"pid": "P3967", "type": "P", "difficulty": 6, "samples": [["3\n1 1 1\n2 1 1\n1 1 1", "4\n2 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "各省省选", "枚举", "二分图", "费用流", "天津"], "title": "[TJOI2014] 匹配", "background": "", "description": "有 $N$ 个单身的男孩和 $N$ 个单身女孩，男孩 $i$ 和女孩 $j$ 在一起得到的幸福值为 $H_{i,j}$。\n\n一个匹配即对这 $N$ 个男孩女孩的安排：每个男孩恰好有一个女朋友，每个女孩恰好有一个男朋友。\n\n一个匹配的幸福值即这 $N$ 对男女朋友的幸福值的和。\n\n经典的问题是计算幸福值最大的匹配，即完美匹配。然而完美匹配有时候并不唯一，你需要计算对于所有的完美匹配，其交集是什么。", "inputFormat": "输入的第一行是一个正整数 $N$ 。\n\n接下来是一个 $N\\times N$ 大小的矩阵 $H$，$H_{i,j}$ 表示男孩 $i$ 和女孩 $j$ 在一起的幸福值。", "outputFormat": "第一行输出完美匹配的幸福值，接下来是若干行，每一行是一对整数 $i$ 和 $j$，表示男孩 $i$ 和女孩 $j$ 在所有完美匹配的交集中，以 $i$ 的递增顺序输出。", "hint": "- 对于 $30\\%$ 的数据，$N \\leq 30$；\n- 对于 $100\\%$ 的数据，$1\\leq N \\leq 80$，$0\\leq H_{i,j}\\leq 5\\times10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2014] Matching", "background": "", "description": "There are $N$ single boys and $N$ single girls. The happiness of pairing boy $i$ with girl $j$ is $H_{i,j}$.\n\nA matching is an arrangement of these $N$ boys and girls such that each boy has exactly one girlfriend and each girl has exactly one boyfriend.\n\nThe happiness of a matching is the sum of the happiness values of these $N$ pairs.\n\nThe classic task is to compute the maximum possible happiness, i.e., a maximum-weight perfect matching (also called an \"assignment\"). However, the maximum-weight perfect matching is not always unique. You need to compute the intersection of all maximum-weight perfect matchings.", "inputFormat": "The first line contains a positive integer $N$.\n\nThen follows an $N \\times N$ matrix $H$, where $H_{i,j}$ denotes the happiness of pairing boy $i$ with girl $j$.", "outputFormat": "On the first line, output the happiness of the maximum-weight perfect matching. Then output several lines, each containing a pair of integers $i$ and $j$, indicating that boy $i$ and girl $j$ appear in the intersection of all maximum-weight perfect matchings, in increasing order of $i$.", "hint": "- For 30% of the testdata, $N \\leq 30$.\n- For 100% of the testdata, $1 \\leq N \\leq 80$, $0 \\leq H_{i,j} \\leq 5 \\times 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2014] 匹配", "background": "", "description": "有 $N$ 个单身的男孩和 $N$ 个单身女孩，男孩 $i$ 和女孩 $j$ 在一起得到的幸福值为 $H_{i,j}$。\n\n一个匹配即对这 $N$ 个男孩女孩的安排：每个男孩恰好有一个女朋友，每个女孩恰好有一个男朋友。\n\n一个匹配的幸福值即这 $N$ 对男女朋友的幸福值的和。\n\n经典的问题是计算幸福值最大的匹配，即完美匹配。然而完美匹配有时候并不唯一，你需要计算对于所有的完美匹配，其交集是什么。", "inputFormat": "输入的第一行是一个正整数 $N$ 。\n\n接下来是一个 $N\\times N$ 大小的矩阵 $H$，$H_{i,j}$ 表示男孩 $i$ 和女孩 $j$ 在一起的幸福值。", "outputFormat": "第一行输出完美匹配的幸福值，接下来是若干行，每一行是一对整数 $i$ 和 $j$，表示男孩 $i$ 和女孩 $j$ 在所有完美匹配的交集中，以 $i$ 的递增顺序输出。", "hint": "- 对于 $30\\%$ 的数据，$N \\leq 30$；\n- 对于 $100\\%$ 的数据，$1\\leq N \\leq 80$，$0\\leq H_{i,j}\\leq 5\\times10^3$。", "locale": "zh-CN"}}}
{"pid": "P3968", "type": "P", "difficulty": 6, "samples": [["7 10\n1\n2\n3\n0 1 2\n0 4 7\n0 2 5\n20\n0 6 6\n99\n0 4 6", "1\n2\n2\n1\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "线段树", "各省省选", "平衡树", "天津"], "title": "[TJOI2014] 电源插排", "background": "", "description": "小 M 的实验室有很多电源插排。这些插排的编号从 $1$ 到 $n$，由左向右排成一排。\n\n每天早晨，这些插排都是没有被使用的。每当一个学生来到实验室，他就将自己的笔记本电源插到某一个未被使用的插排上。\n\n实验室的同学们都很奇怪，他们完成这个过程是这样的：首先，他们找到还没有被使用的插排的最长区间。\n\n如果有多个区间长度相同，他们就选择最靠右的那个。然后将自己的电源插到该区间的中间。\n\n如果区间长度是偶数，他们同样选择靠右的那个。当一个同学离开实验室时,他会将自己的电源拔出来。\n\n数据保证每一个同学来到实验室时，至少有一个空的插排。\n\n需要计算在区间 $[l,r]$ 已经有多少个插排被使用了。", "inputFormat": "第一行是两个整数 $n$ 和 $q$，表示插排数量和询问数量。\n\n接下来 $q$ 行，每一行以一个整数 $k$ 开头。\n\n> 如果 $k$ 为 $0$，接下来就是两个整数 $l$ 和 $r$，表示一个询问。\n>\n> 否则 $k$ 表示表示编号为 $k$ 的学生到来或离开。$k$ 的奇数次出现表示到来，偶数次出现表示离开。每个学生的编号都是唯一的。\n", "outputFormat": "对于每一个询问，输出一个整数，表示询问区间内有多少个插排已经被使用。", "hint": "#### 数据规模与约定\n\n对于 $30\\%$ 的数据，$n \\le 10^5，q \\le 10^3$；\n\n对于 $100\\%$ 的数据，$1\\le n \\le 10^9,1\\le q \\le 10^5,0\\le k \\le 10^9,1\\le l\\le r\\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2014] Power Strip", "background": "", "description": "There are many power strips in Xiao M’s lab. The outlets are indexed from $1$ to $n$, arranged in a line from left to right.\n\nEvery morning, all outlets are unused. Each time a student comes to the lab, they plug their laptop’s power into some unused outlet.\n\nThe students follow a peculiar rule: first, they find the longest contiguous segment of unused outlets.\n\nIf there are multiple segments with the same length, they choose the rightmost one. Then they plug into the middle of that segment.\n\nIf the segment length is even, they pick the right middle position (i.e., the right one). When a student leaves the lab, they unplug their power.\n\nIt is guaranteed that whenever a student arrives, there is at least one empty outlet.\n\nYou need to answer how many outlets are already in use within the interval $[l,r]$.", "inputFormat": "The first line contains two integers $n$ and $q$, the number of outlets and the number of queries.\n\nThen follow $q$ lines. Each line starts with an integer $k$.\n\n> If $k$ is $0$, it is followed by two integers $l$ and $r$, indicating a query.\n>\n> Otherwise, $k$ indicates that the student with ID $k$ arrives or leaves. The $1$st appearance of $k$ means arrival, the $2$nd appearance means departure, and so on. Each student ID is unique.", "outputFormat": "For each query, output one integer: the number of outlets already in use within the query interval.", "hint": "Constraints\n\nFor $30\\%$ of the testdata, $n \\le 10^5, q \\le 10^3$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 10^9, 1 \\le q \\le 10^5, 0 \\le k \\le 10^9, 1 \\le l \\le r \\le n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2014] 电源插排", "background": "", "description": "小 M 的实验室有很多电源插排。这些插排的编号从 $1$ 到 $n$，由左向右排成一排。\n\n每天早晨，这些插排都是没有被使用的。每当一个学生来到实验室，他就将自己的笔记本电源插到某一个未被使用的插排上。\n\n实验室的同学们都很奇怪，他们完成这个过程是这样的：首先，他们找到还没有被使用的插排的最长区间。\n\n如果有多个区间长度相同，他们就选择最靠右的那个。然后将自己的电源插到该区间的中间。\n\n如果区间长度是偶数，他们同样选择靠右的那个。当一个同学离开实验室时,他会将自己的电源拔出来。\n\n数据保证每一个同学来到实验室时，至少有一个空的插排。\n\n需要计算在区间 $[l,r]$ 已经有多少个插排被使用了。", "inputFormat": "第一行是两个整数 $n$ 和 $q$，表示插排数量和询问数量。\n\n接下来 $q$ 行，每一行以一个整数 $k$ 开头。\n\n> 如果 $k$ 为 $0$，接下来就是两个整数 $l$ 和 $r$，表示一个询问。\n>\n> 否则 $k$ 表示表示编号为 $k$ 的学生到来或离开。$k$ 的奇数次出现表示到来，偶数次出现表示离开。每个学生的编号都是唯一的。\n", "outputFormat": "对于每一个询问，输出一个整数，表示询问区间内有多少个插排已经被使用。", "hint": "#### 数据规模与约定\n\n对于 $30\\%$ 的数据，$n \\le 10^5，q \\le 10^3$；\n\n对于 $100\\%$ 的数据，$1\\le n \\le 10^9,1\\le q \\le 10^5,0\\le k \\le 10^9,1\\le l\\le r\\le n$。", "locale": "zh-CN"}}}
{"pid": "P3969", "type": "P", "difficulty": 5, "samples": [["4\n2 3\n111\n101\n4 2\n01\n01\n11\n01\n2 1\n1 1\n3 2\n10\n10\n11\n4\n1 4\n1111\n1 4\n1111\n1 4\n1111\n1 4\n1111\n4\n1 4\n1111\n1 4\n1111\n1 4\n1111\n2 3\n111\n001", "Yes, only one!\n1112\n1412\n3422\n3442\nYes, many!\nNo solution"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "各省省选", "天津"], "title": "[TJOI2014] 拼图", "background": "", "description": "小Z最近迷上了拼图游戏,然而智商有限,他总是无法拼出完整图案。游戏是这样的：首先小Z会得到一些拼图碎片,然后他试着重新排列这些碎片使得它们组成一个大小为4\\*4的正方形。如下图。注意小Z不能旋转或者翻转这些碎片。\n\n ![](https://cdn.luogu.com.cn/upload/pic/10988.png) \n\n小Z得到如图1的碎片,然后经过重新排列得到图2的正方形。\n\n由于小Z实在太笨了,聪明的你请写一个程序帮助他来解决这个问题吧。\n", "inputFormat": "输入包含多组数据,请使用EOF\n\n每组数据的的第一行包含一个正整数N，表示碎片的个数。接下来输入N个碎片。每个碎片的第一行是两个正整数r和c,表示这个碎片的行数和列数。接下来是r行,每一行包含c个字符'0'或'1'，'1'表示碎片占据这个位置,'0'表示该位置为空。数据保证每个碎片都是完整的一片(即'1'是相互连通的),并且没有行或者列全部为'0'。\n", "outputFormat": "如果无法组成一个正方形,输出”No solution”;如果有多组解,输出”Yes, many!”。否则,输出”Yes, only one!”,接下来输出一个4\\*4的矩阵H,Hij表示位置i,j的碎片编号。碎片编号从1开始。\n", "hint": "### 数据范围\n\n对于 30% 的数据，N < 5\n\n对于 100% 的数据，N ≤ 16\n", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2014] Puzzle", "background": "", "description": "Little Z has recently become obsessed with jigsaw puzzles, but with limited intelligence, he always fails to complete the full picture. The game works like this: first, Little Z is given some puzzle pieces. He then tries to rearrange these pieces so that they form a $4 \\times 4$ square, as shown below. Note that Little Z cannot rotate or flip the pieces.\n\nLittle Z gets the pieces shown in Figure 1, and after rearranging them, he obtains the $4 \\times 4$ square shown in Figure 2.\n\nSince Little Z is really not good at this, please write a program to help him solve the problem.", "inputFormat": "The input contains multiple test cases; read until EOF.\n\nFor each test case, the first line contains a positive integer $N$, the number of pieces. Then $N$ pieces follow. For each piece, the first line contains two positive integers $r$ and $c$, the number of rows and columns of this piece. Then there are $r$ lines, each containing $c$ characters '0' or '1'; '1' means the piece occupies that cell, and '0' means the cell is empty. It is guaranteed that each piece is a single connected component (i.e., the '1's are connected), and there is no row or column consisting entirely of '0's.", "outputFormat": "If it is impossible to form a square, output \"No solution\". If there are multiple solutions, output \"Yes, many!\". Otherwise, output \"Yes, only one!\", and then output a $4 \\times 4$ matrix $H$, where $H_{i,j}$ denotes the index of the piece at position $(i, j)$. Piece indices start from $1$.", "hint": "### Constraints\n\n- For $30\\%$ of the test cases, $N < 5$.\n- For $100\\%$ of the test cases, $N \\le 16$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2014] 拼图", "background": "", "description": "小Z最近迷上了拼图游戏,然而智商有限,他总是无法拼出完整图案。游戏是这样的：首先小Z会得到一些拼图碎片,然后他试着重新排列这些碎片使得它们组成一个大小为4\\*4的正方形。如下图。注意小Z不能旋转或者翻转这些碎片。\n\n ![](https://cdn.luogu.com.cn/upload/pic/10988.png) \n\n小Z得到如图1的碎片,然后经过重新排列得到图2的正方形。\n\n由于小Z实在太笨了,聪明的你请写一个程序帮助他来解决这个问题吧。\n", "inputFormat": "输入包含多组数据,请使用EOF\n\n每组数据的的第一行包含一个正整数N，表示碎片的个数。接下来输入N个碎片。每个碎片的第一行是两个正整数r和c,表示这个碎片的行数和列数。接下来是r行,每一行包含c个字符'0'或'1'，'1'表示碎片占据这个位置,'0'表示该位置为空。数据保证每个碎片都是完整的一片(即'1'是相互连通的),并且没有行或者列全部为'0'。\n", "outputFormat": "如果无法组成一个正方形,输出”No solution”;如果有多组解,输出”Yes, many!”。否则,输出”Yes, only one!”,接下来输出一个4\\*4的矩阵H,Hij表示位置i,j的碎片编号。碎片编号从1开始。\n", "hint": "### 数据范围\n\n对于 30% 的数据，N < 5\n\n对于 100% 的数据，N ≤ 16\n", "locale": "zh-CN"}}}
{"pid": "P3970", "type": "P", "difficulty": 5, "samples": [["4\n1 2 3 3", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "线段树", "各省省选", "树状数组", "排序", "天津"], "title": "[TJOI2014] 上升子序列", "background": null, "description": "给定一个只包含整数的序列（序列元素的绝对值大小不超过 $10^9$），你需要计算上升子序列的个数，满足如下条件的称之为一个上升子序列：\n\n1. 是原序列的一个子序列\n2. 长度至少为 $2$\n3. 所有元素都严格递增\n\n如果两个上升子序列相同，那么只需要计算一次。例如，序列 $\\{1,2,3,3\\}$ 有 $4$ 个上升子序列，分别为 $\\{1,2\\}$，$\\{1,3\\}$，$\\{1,2,3\\}$，$\\{2,3\\}$。", "inputFormat": "输入的第一行是一个整数 $n$，表示序列长度。接下来一行是 $n$ 个整数，表示序列。", "outputFormat": "输出仅包含一行，即原序列有多少个上升子序列。由于答案可能非常大，你只需要输出答案模 $10^9+7$ 的余数。", "hint": "### 数据范围\n\n对于 $30\\%$ 的数据，$n\\le5000$；\n\n对于 $100\\%$ 的数据，$n\\le10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2014] Increasing Subsequences", "background": "", "description": "Given a sequence containing only integers (the absolute value of each element does not exceed $10^9$), you need to count the number of increasing subsequences, where an increasing subsequence satisfies the following conditions:\n1. It is a subsequence of the original sequence.\n2. Its length is at least $2$.\n3. All elements are strictly increasing.\n\nIf two increasing subsequences are identical, count them only once. For example, the sequence $\\{1,2,3,3\\}$ has $4$ increasing subsequences: $\\{1,2\\}$, $\\{1,3\\}$, $\\{1,2,3\\}$, $\\{2,3\\}$.", "inputFormat": "The first line contains an integer $n$, the length of the sequence. The next line contains $n$ integers, the sequence elements.", "outputFormat": "Output a single line: the number of increasing subsequences of the original sequence. Since the answer can be very large, output the remainder modulo $10^9 + 7$.", "hint": "### Constraints\n\nFor $30\\%$ of the testdata, $n \\le 5000$.\n\nFor $100\\%$ of the testdata, $n \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2014] 上升子序列", "background": null, "description": "给定一个只包含整数的序列（序列元素的绝对值大小不超过 $10^9$），你需要计算上升子序列的个数，满足如下条件的称之为一个上升子序列：\n\n1. 是原序列的一个子序列\n2. 长度至少为 $2$\n3. 所有元素都严格递增\n\n如果两个上升子序列相同，那么只需要计算一次。例如，序列 $\\{1,2,3,3\\}$ 有 $4$ 个上升子序列，分别为 $\\{1,2\\}$，$\\{1,3\\}$，$\\{1,2,3\\}$，$\\{2,3\\}$。", "inputFormat": "输入的第一行是一个整数 $n$，表示序列长度。接下来一行是 $n$ 个整数，表示序列。", "outputFormat": "输出仅包含一行，即原序列有多少个上升子序列。由于答案可能非常大，你只需要输出答案模 $10^9+7$ 的余数。", "hint": "### 数据范围\n\n对于 $30\\%$ 的数据，$n\\le5000$；\n\n对于 $100\\%$ 的数据，$n\\le10^5$。", "locale": "zh-CN"}}}
{"pid": "P3971", "type": "P", "difficulty": 6, "samples": [["4\n1 2 2 3", "5"], ["4\n1 1 2 3", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "各省省选", "天津"], "title": "[TJOI2014] Alice and Bob", "background": "", "description": "Alice 和 Bob 发明了一个新的游戏。给定一个序列 $\\{x_0,x_1,\\cdots,x_{n-1}\\}$，Alice 得到一个序列 $\\{a_0,a_1,\\cdots,a_{n-1}\\}$，其中 $a_i$ 表示以 $x_i$ 结尾的最长上升子序列的长度；Bob 得到一个序列$\\{b_0,b_1,\\cdots,b_{n-1}\\}$，其中 $b_i$ 表示以 $x_i$ 开头的最长下降子序列的长度。Alice 的得分是序列 $\\{a_i\\}$ 的和，Bob的得分是序列 $\\{b_i\\}$ 的和。\n", "inputFormat": "输入的第一行是 $n$，第二行是序列 $\\{a_0,a_1,\\cdots,a_{n-1}\\}$。数据保证序列 $\\{a_i\\}$ 可以由至少一个 $1$ 到 $n$ 的排列得到。", "outputFormat": "输出包含一行,表示在序列 $\\{a_i\\}$ 给定的情况下 Bob 能得到的最高分数。", "hint": "### 数据范围\n\n对于 $30\\%$ 的数据，$N \\le 1000$。\n\n对于 $100\\%$ 的数据，$N \\le 10^5$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2014] Alice and Bob", "background": "", "description": "Alice and Bob invented a new game. Given a sequence $\\{x_0, x_1, \\cdots, x_{n-1}\\}$, Alice gets a sequence $\\{a_0, a_1, \\cdots, a_{n-1}\\}$, where $a_i$ is the length of the longest increasing subsequence ending at $x_i$; Bob gets a sequence $\\{b_0, b_1, \\cdots, b_{n-1}\\}$, where $b_i$ is the length of the longest decreasing subsequence starting at $x_i$. Alice’s score is the sum of the sequence $\\{a_i\\}$, and Bob’s score is the sum of the sequence $\\{b_i\\}$.", "inputFormat": "The first line contains $n$, and the second line contains the sequence $\\{a_0, a_1, \\cdots, a_{n-1}\\}$. It is guaranteed that the sequence $\\{a_i\\}$ can be obtained from at least one permutation of $1$ to $n$.", "outputFormat": "Output a single line indicating the highest score Bob can obtain given the sequence $\\{a_i\\}$.", "hint": "### Constraints\n\nFor $30\\%$ of the testdata, $n \\le 1000$.\n\nFor $100\\%$ of the testdata, $n \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2014] Alice and Bob", "background": "", "description": "Alice 和 Bob 发明了一个新的游戏。给定一个序列 $\\{x_0,x_1,\\cdots,x_{n-1}\\}$，Alice 得到一个序列 $\\{a_0,a_1,\\cdots,a_{n-1}\\}$，其中 $a_i$ 表示以 $x_i$ 结尾的最长上升子序列的长度；Bob 得到一个序列$\\{b_0,b_1,\\cdots,b_{n-1}\\}$，其中 $b_i$ 表示以 $x_i$ 开头的最长下降子序列的长度。Alice 的得分是序列 $\\{a_i\\}$ 的和，Bob的得分是序列 $\\{b_i\\}$ 的和。\n", "inputFormat": "输入的第一行是 $n$，第二行是序列 $\\{a_0,a_1,\\cdots,a_{n-1}\\}$。数据保证序列 $\\{a_i\\}$ 可以由至少一个 $1$ 到 $n$ 的排列得到。", "outputFormat": "输出包含一行,表示在序列 $\\{a_i\\}$ 给定的情况下 Bob 能得到的最高分数。", "hint": "### 数据范围\n\n对于 $30\\%$ 的数据，$N \\le 1000$。\n\n对于 $100\\%$ 的数据，$N \\le 10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P3972", "type": "P", "difficulty": 6, "samples": [["10 \nR 1 1 1 \nR 2 2 1 2 \nC 2 2 \nR 3 1 2 \nQ 1 \nC 3 2 \nC 1 5 \nQ 1 \nQ 2 \nQ 3", "2 \n1 \n3 \n2"]], "limits": {"time": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "各省省选", "天津"], "title": "[TJOI2014] 电影评分", "background": "", "description": "小Z发明了一套新的电影评分系统。这套系统有三种操作:发布新电影、对电影评分、以及询问电影评分的排名。具体是这样运作的:如果是发布新电影,并且这部电影的有所主演之前均没有出现过,那么这部新电影的评分为0,否则这部电影的评分为**最近一部**与该电影**至少有一个共同主演**的电影的评分;如果是对电影进行评分,那么这部电影的评分就变成之前评分与新的评分的平均数;如果是查询排名,则根据评分输出相应排名。评分最高的为第一名。如果有多部电影分数相同,那么输出最早的一部。电影的评分在0到5之间。\n", "inputFormat": "输入的第一行是n,表示操作次数。接下来n行,每一行是以下三种操作之一：\n\n1. Q x:查询当前排名为x的电影ID\n\n2. R ID x actor1 actor2 …· actorx:发布新电影ID,该电影有x个主演分别为 actor1, actor2,…’\n\n3. C ID score:评分操作,表示对电影ID的评分为 score\n\n数据保证每个电影的ID不相同,且每部电影至多不超过5名主演。\n\n1≤ actor1, actor2,··≤10^5\n\n1≤ID≤10^5\n", "outputFormat": "对于每一个查询操作,输出相应排名的电影的ID。\n", "hint": "### 样例解释\n\n| Movie | 1 | 2 | 3 | \n| :-: | :-: | :-: | :-: | :-: | :-: |\n| | 0 | - | - |\n| | 0 | 0 | - |\n| | 0 | 1 | - |\n| | 0 | 1 | 1 |\n| Q 1 => 2 | //Movie 2 wa|s released be|fore Movie 3 |\n| | 0 | 1 | 1.5 |\n| | 2.5 | 1 | 1.5 |\n| Q 1 => 1 |\n| Q 2 => 3 |\n| Q 3 => 2 |\n### 数据范围\n\n对于 30% 的数据，n ≤ 100\n\n对于 100% 的数据，n ≤ 10000\n", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2014] Movie Rating", "background": "", "description": "Xiao Z invented a new movie rating system with three kinds of operations: releasing a new movie, rating a movie, and querying a movie’s rank.\n\n- When releasing a new movie: if none of its leading actors have appeared before, the new movie’s rating is $0$. Otherwise, its initial rating equals the rating of the most recent previously released movie that shares at least one leading actor with it.\n- When rating a movie: its rating becomes the average of its previous rating and the new score.\n- When querying a rank: output the ID of the movie whose current rank is $x$. The highest rating ranks first. If multiple movies have the same rating, the one released earlier ranks higher. All ratings are between $0$ and $5$.", "inputFormat": "The first line contains $n$, the number of operations. Then $n$ lines follow, each being one of the following:\n\n1. Q x: query the movie ID currently ranked $x$.\n2. R ID x actor1 actor2 ... actorx: release a new movie with ID $ID$, which has $x$ leading actors $actor1, actor2, \\dots, actorx$.\n3. C ID score: rate movie $ID$ with the score $score$; the movie’s new rating becomes the average of its previous rating and $score$.\n\nAdditional rules:\n- All movie IDs are distinct.\n- Each movie has at most $5$ leading actors.\n\nConstraints:\n- $1 \\leq actor_i \\leq 10^5$.\n- $1 \\leq ID \\leq 10^5$.\n- For $30\\%$ of the testdata, $n \\leq 100$.\n- For $100\\%$ of the testdata, $n \\leq 10000$.", "outputFormat": "For each query operation, output the corresponding movie ID.", "hint": "- The initial rating of a new movie is $0$ if none of its leading actors have appeared before; otherwise, it equals the rating of the most recently released earlier movie that shares at least one leading actor.\n- After a rating operation C ID score, the new rating becomes the average of the current rating and $score$.\n- If multiple movies have the same rating, the earlier released one ranks higher. For example, if Movie $2$ and Movie $3$ have the same rating, then a query Q $1$ returns $2$ because Movie $2$ was released earlier.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2014] 电影评分", "background": "", "description": "小Z发明了一套新的电影评分系统。这套系统有三种操作:发布新电影、对电影评分、以及询问电影评分的排名。具体是这样运作的:如果是发布新电影,并且这部电影的有所主演之前均没有出现过,那么这部新电影的评分为0,否则这部电影的评分为**最近一部**与该电影**至少有一个共同主演**的电影的评分;如果是对电影进行评分,那么这部电影的评分就变成之前评分与新的评分的平均数;如果是查询排名,则根据评分输出相应排名。评分最高的为第一名。如果有多部电影分数相同,那么输出最早的一部。电影的评分在0到5之间。\n", "inputFormat": "输入的第一行是n,表示操作次数。接下来n行,每一行是以下三种操作之一：\n\n1. Q x:查询当前排名为x的电影ID\n\n2. R ID x actor1 actor2 …· actorx:发布新电影ID,该电影有x个主演分别为 actor1, actor2,…’\n\n3. C ID score:评分操作,表示对电影ID的评分为 score\n\n数据保证每个电影的ID不相同,且每部电影至多不超过5名主演。\n\n1≤ actor1, actor2,··≤10^5\n\n1≤ID≤10^5\n", "outputFormat": "对于每一个查询操作,输出相应排名的电影的ID。\n", "hint": "### 样例解释\n\n| Movie | 1 | 2 | 3 | \n| :-: | :-: | :-: | :-: | :-: | :-: |\n| | 0 | - | - |\n| | 0 | 0 | - |\n| | 0 | 1 | - |\n| | 0 | 1 | 1 |\n| Q 1 => 2 | //Movie 2 wa|s released be|fore Movie 3 |\n| | 0 | 1 | 1.5 |\n| | 2.5 | 1 | 1.5 |\n| Q 1 => 1 |\n| Q 2 => 3 |\n| Q 3 => 2 |\n### 数据范围\n\n对于 30% 的数据，n ≤ 100\n\n对于 100% 的数据，n ≤ 10000\n", "locale": "zh-CN"}}}
{"pid": "P3973", "type": "P", "difficulty": 6, "samples": [["3\n1 2 1\n3 1 0\n1 2 3\n2 3 7", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2015", "各省省选", "图论建模", "最小割", "天津"], "title": "[TJOI2015] 线性代数", "background": "", "description": "为了提高智商，ZJY 开始学习线性代数。\n\n她的小伙伴菠萝给她出了这样一个问题：给定一个 $n \\times n$ 的矩阵 $B$ 和一个 $1 \\times n$ 的矩阵 $C$。求出一个 $1×n$ 的 01 矩阵 $A$，使得 $D=(A×B-C)×A^{\\sf T}$ 最大，其中$A^{\\sf T}$为$A$的转置，输出$D$。", "inputFormat": "第一行输入一个整数 $n$。接下来 $n$ 行输入 $B$ 矩阵，第 $i$ 行第 $j$ 个数代表 $B$ 接下来一行输入 $n$ 个整数，代表矩阵 $C$。矩阵 $B$ 和矩阵 $C$ 中每个数字都是不过 $1000$ 的非负整数。\n", "outputFormat": "输出一个整数，表示最大的 $D$。", "hint": "- 对于 $30\\%$ 的数据，$n \\leq 15$；\n- 对于 $100\\%$ 的数据，$1 \\leq n \\leq 500$；\n- 另外还有两组不计分的 hack 数据，放在 subtask 2 中，数据范围与上面一致。\n", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2015] Linear Algebra", "background": "", "description": "To improve her IQ, ZJY starts to study linear algebra.\n\nHer friend Boluo gives her the following problem: Given an $n \\times n$ matrix $B$ and a $1 \\times n$ matrix $C$. Find a $1 \\times n$ 0-1 matrix $A$ such that $D = (A \\times B - C) \\times A^{\\sf T}$ is maximized, where $A^{\\sf T}$ is the transpose of $A$, and output $D$.", "inputFormat": "The first line contains an integer $n$.  \nThe next $n$ lines give matrix $B$: in the $i$-th line, the $j$-th number is $B_{i,j}$.  \nThe next line contains $n$ integers, representing matrix $C$.  \nEvery number in matrices $B$ and $C$ is a non-negative integer not exceeding $1000$.", "outputFormat": "Output a single integer, the maximum value of $D$.", "hint": "- For $30\\%$ of the testdata, $n \\leq 15$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 500$.\n- There are also two extra unscored hack testdata in subtask 2, with the same ranges as above.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2015] 线性代数", "background": "", "description": "为了提高智商，ZJY 开始学习线性代数。\n\n她的小伙伴菠萝给她出了这样一个问题：给定一个 $n \\times n$ 的矩阵 $B$ 和一个 $1 \\times n$ 的矩阵 $C$。求出一个 $1×n$ 的 01 矩阵 $A$，使得 $D=(A×B-C)×A^{\\sf T}$ 最大，其中$A^{\\sf T}$为$A$的转置，输出$D$。", "inputFormat": "第一行输入一个整数 $n$。接下来 $n$ 行输入 $B$ 矩阵，第 $i$ 行第 $j$ 个数代表 $B$ 接下来一行输入 $n$ 个整数，代表矩阵 $C$。矩阵 $B$ 和矩阵 $C$ 中每个数字都是不过 $1000$ 的非负整数。\n", "outputFormat": "输出一个整数，表示最大的 $D$。", "hint": "- 对于 $30\\%$ 的数据，$n \\leq 15$；\n- 对于 $100\\%$ 的数据，$1 \\leq n \\leq 500$；\n- 另外还有两组不计分的 hack 数据，放在 subtask 2 中，数据范围与上面一致。\n", "locale": "zh-CN"}}}
{"pid": "P3974", "type": "P", "difficulty": 6, "samples": [["1\n3 3\n0 1 5\n5 0 0\n1 0 0", "10"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "递推", "2015", "各省省选", "天津", "Dilworth 定理"], "title": "[TJOI2015] 组合数学", "background": "", "description": "为了提高智商，ZJY 开始学习组合数学。某一天她解决了这样一个问题：给一个网格图，其中某些格子有财宝。每次从左上角出发，只能往右或下走。问至少要走几次才可能把财宝全捡完。\n\n但是她还不知足，想到了这个问题的一个变形：假设每个格子中有好多块财宝，而每一次经过一个格子至多只能捡走一块财宝，其他条件不变，至少要走几次才可能把财宝全捡完？\n\n这次她不会做了，你能帮帮她吗？", "inputFormat": "第一行为一个正整数 $t$，表示数据组数。\n\n每组数据的第一行是两个正整数 $n$ 和 $m$，表示这个网格图有 $n$ 行 $m$ 列。\n\n接下来 $n$ 行，每行 $m$ 个非负整数，表示这个格子中的财宝数量（$0$ 表示没有财宝）。", "outputFormat": "对于每组数据，输出一个整数，表示至少走的次数。\n", "hint": "### 数据范围\n\n对于 $30\\%$ 的数据，$n \\le 5$，$m \\le 5$，每个格子中的财宝数不超过 $5$ 块。\n\n对于 $50\\%$ 的数据，$n \\le 100$，$m \\le 100$，每个格子中的财宝数不超过 $1000$ 块。\n\n对于 $100\\%$ 的数据，$1\\le t\\le 2$，$1\\le n \\le 1000$，$1\\le m \\le 1000$，每个格子中的财宝不超过 $10^6$ 块。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2015] Combinatorics", "background": "", "description": "To improve her IQ, ZJY started studying combinatorics. One day she solved this problem: given a grid where some cells contain treasure. Each time, starting from the top-left corner, you can only move right or down. What is the minimum number of walks needed so that it is possible to collect all the treasures?\n\nBut she was not satisfied and thought of a variation: suppose each cell contains many pieces of treasure, and on each pass through a cell you can take at most one piece of treasure. With other conditions unchanged, what is the minimum number of walks needed so that it is possible to collect all the pieces of treasure?\n\nThis time she could not solve it. Can you help her?", "inputFormat": "The first line contains a positive integer $t$, the number of test cases.\n\nFor each test case, the first line contains two positive integers $n$ and $m$, indicating the grid has $n$ rows and $m$ columns.\n\nThe next $n$ lines each contain $m$ non-negative integers, representing the number of pieces of treasure in that cell ($0$ means no treasure).", "outputFormat": "For each test case, output one integer, the minimum number of walks.", "hint": "### Constraints\n\nFor $30\\%$ of the testdata, $n \\le 5$, $m \\le 5$, and the number of pieces of treasure in each cell does not exceed $5$.\n\nFor $50\\%$ of the testdata, $n \\le 100$, $m \\le 100$, and the number of pieces of treasure in each cell does not exceed $1000$.\n\nFor $100\\%$ of the testdata, $1 \\le t \\le 2$, $1 \\le n \\le 1000$, $1 \\le m \\le 1000$, and the number of pieces of treasure in each cell does not exceed $10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2015] 组合数学", "background": "", "description": "为了提高智商，ZJY 开始学习组合数学。某一天她解决了这样一个问题：给一个网格图，其中某些格子有财宝。每次从左上角出发，只能往右或下走。问至少要走几次才可能把财宝全捡完。\n\n但是她还不知足，想到了这个问题的一个变形：假设每个格子中有好多块财宝，而每一次经过一个格子至多只能捡走一块财宝，其他条件不变，至少要走几次才可能把财宝全捡完？\n\n这次她不会做了，你能帮帮她吗？", "inputFormat": "第一行为一个正整数 $t$，表示数据组数。\n\n每组数据的第一行是两个正整数 $n$ 和 $m$，表示这个网格图有 $n$ 行 $m$ 列。\n\n接下来 $n$ 行，每行 $m$ 个非负整数，表示这个格子中的财宝数量（$0$ 表示没有财宝）。", "outputFormat": "对于每组数据，输出一个整数，表示至少走的次数。\n", "hint": "### 数据范围\n\n对于 $30\\%$ 的数据，$n \\le 5$，$m \\le 5$，每个格子中的财宝数不超过 $5$ 块。\n\n对于 $50\\%$ 的数据，$n \\le 100$，$m \\le 100$，每个格子中的财宝数不超过 $1000$ 块。\n\n对于 $100\\%$ 的数据，$1\\le t\\le 2$，$1\\le n \\le 1000$，$1\\le m \\le 1000$，每个格子中的财宝不超过 $10^6$ 块。", "locale": "zh-CN"}}}
{"pid": "P3975", "type": "P", "difficulty": 6, "samples": [["aabc\n0 3", "aab"], ["aabc\n1 3", "aa"], ["aabc\n1 11", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2015", "二分", "各省省选", "后缀自动机 SAM", "枚举", "后缀数组 SA", "天津"], "title": "[TJOI2015] 弦论", "background": "", "description": "为了提高智商，ZJY 开始学习弦论。这一天，她在《String theory》中看到了这样一道问题：对于一个给定的长度为 $n$ 的字符串，求出它的第 $k$ 小子串是什么。你能帮帮她吗?\n", "inputFormat": "第一行是一个仅由小写英文字母构成的字符串 $s$。\n\n第二行为两个整数 $t$ 和 $k$，$t$ 为 $0$ 则表示不同位置的相同子串算作一个，$t$ 为 $1$ 则表示不同位置的相同子串算作多个。$k$ 的意义见题目描述。\n", "outputFormat": "输出数据仅有一行,该行有一个字符串，为第 $k$ 小的子串。若子串数目不足 $k$ 个，则输出 $-1$。\n", "hint": "### 数据范围\n\n对于 $10\\%$ 的数据，$n\\leq 1000$。\n\n对于 $50\\%$ 的数据，$t = 0$。\n\n对于 $100\\%$ 的数据，$1\\leq n \\leq 5 \\times 10^5$，$0\\leq t \\leq 1$，$1\\leq k \\leq 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2015] String Theory", "background": "", "description": "To boost her IQ, ZJY started studying string theory. One day, she saw the following problem in \"String theory\": Given a string of length $n$, find its $k$-th smallest substring. Can you help her?", "inputFormat": "The first line contains a string $s$ consisting only of lowercase English letters.\n\nThe second line contains two integers $t$ and $k$. If $t = 0$, identical substrings at different positions are counted as one; if $t = 1$, identical substrings at different positions are counted multiple times. The meaning of $k$ is as described above.", "outputFormat": "Output exactly one line containing a string, which is the $k$-th smallest substring. If there are fewer than $k$ substrings, output -1.", "hint": "Constraints\n\nFor $10\\%$ of the testdata, $n\\leq 1000$.\n\nFor $50\\%$ of the testdata, $t = 0$.\n\nFor $100\\%$ of the testdata, $1\\leq n \\leq 5 \\times 10^5$, $0\\leq t \\leq 1$, $1\\leq k \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2015] 弦论", "background": "", "description": "为了提高智商，ZJY 开始学习弦论。这一天，她在《String theory》中看到了这样一道问题：对于一个给定的长度为 $n$ 的字符串，求出它的第 $k$ 小子串是什么。你能帮帮她吗?\n", "inputFormat": "第一行是一个仅由小写英文字母构成的字符串 $s$。\n\n第二行为两个整数 $t$ 和 $k$，$t$ 为 $0$ 则表示不同位置的相同子串算作一个，$t$ 为 $1$ 则表示不同位置的相同子串算作多个。$k$ 的意义见题目描述。\n", "outputFormat": "输出数据仅有一行,该行有一个字符串，为第 $k$ 小的子串。若子串数目不足 $k$ 个，则输出 $-1$。\n", "hint": "### 数据范围\n\n对于 $10\\%$ 的数据，$n\\leq 1000$。\n\n对于 $50\\%$ 的数据，$t = 0$。\n\n对于 $100\\%$ 的数据，$1\\leq n \\leq 5 \\times 10^5$，$0\\leq t \\leq 1$，$1\\leq k \\leq 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P3976", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3\n1 2\n2 3\n2\n1 2 100\n1 3 100", "1\n1"], ["5\n1 2 3 4 5\n1 2\n1 3\n2 4\n4 5\n6\n1 5 50\n2 4 500\n3 4 5000\n3 5 50000\n1 3 500000\n2 3 5000000\n", "4\n2\n551\n551\n0\n499499"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2015", "线段树", "各省省选", "树链剖分", "动态树 LCT", "天津"], "title": "[TJOI2015] 旅游", "background": null, "description": "为了提高智商，ZJY 准备去往一个新世界去旅游。这个世界的城市布局像一棵树，每两座城市之间只有一条路径可以互达。  \n\n每座城市都有一种宝石,有一定的价格。ZJY 为了赚取最高利益,她会选择从 A 城市买入再转手卖到 B 城市（只能进行一次购买）。  \n\n由于ZJY买宝石时经常卖萌，因而凡是 ZJY 路过的城市，这座城市的宝石价格会上涨。让我们来算算 ZJY 旅游完之后能够赚取的最大利润。(如 A 城市宝石价格为 $v$，则ZJY出售价格也为 $v$)", "inputFormat": "第一行输入一个正整数 $n$ 表示城市个数\n\n接下来一行输入 $n$ 个正整数表示每座城市宝石的最初价格 $p$,每个宝石的初始价格不超过 $100$。\n\n第三行开始连续输入 $n-1$ 行,每行有两个数字 $x$ 和 $y$。表示 $x$ 城市和 $y$ 城市有一条路径。城市编号从$1$开始。  \n\n下一行输入一个正整数 $q$ 表示询问次数。\n\n接下来 $q$ 行每行输入三个正整数 $a,b,v$，表示 ZJY 从 $a$ 旅游到 $b$，城市宝石上涨 $v$。", "outputFormat": "对于每次询问，输出 ZJY 可能获得的最大利润，如果亏本了则输出 $0$。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n \\le 100$，$q \\le 10^4$。\n- 对于 $100\\%$ 的数据，保证 $1\\le n,q \\le 5\\times 10^4$，在任何时刻任何城市的宝石价格都不超过 $10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2015] Tourism", "background": "# Description\n\nTo improve her IQ, ZJY plans to travel to a new world. The cities in this world form a tree, and there is exactly one path between any two cities.\n\nEach city has a type of gem with a certain price. To maximize profit, ZJY will choose to buy in city A and then resell in city B (only one purchase is allowed).\n\nBecause ZJY often acts cute when buying gems, the gem price in every city she passes through will increase. Let us calculate the maximum profit ZJY can earn after the trip. (For example, if the gem price in city A is $v$, then ZJY’s selling price is also $v$.)", "description": "To improve her IQ, ZJY plans to travel to a new world. The cities in this world form a tree, and there is exactly one path between any two cities.\n\nEach city has a type of gem with a certain price. To maximize profit, ZJY will choose to buy in city A and then resell in city B (only one purchase is allowed).\n\nBecause ZJY often acts cute when buying gems, the gem price in every city she passes through will increase. Let us calculate the maximum profit ZJY can earn after the trip. (For example, if the gem price in city A is $v$, then ZJY’s selling price is also $v$.)\n\n# Description", "inputFormat": "- The first line contains a positive integer $n$, the number of cities.\n- The next line contains $n$ positive integers, the initial prices $p$ of the gems in each city. Each initial price does not exceed $100$.\n- Starting from the third line, there are $n-1$ lines. Each line contains two integers $x$ and $y$, indicating there is an edge between city $x$ and city $y$. City indices start from $1$.\n- The next line contains a positive integer $q$, the number of queries.\n- Each of the next $q$ lines contains three positive integers $a$, $b$, $v$, indicating that ZJY travels from $a$ to $b$, and the gem price in every city along the route (including both endpoints) increases by $v$.", "outputFormat": "For each query, output the maximum possible profit ZJY can obtain. If the best result is a loss, output $0$.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $n \\le 100$, $q \\le 10^4$.\n- For $100\\%$ of the testdata, $1 \\le n, q \\le 5 \\times 10^4$, and at any time the gem price in any city does not exceed $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2015] 旅游", "background": null, "description": "为了提高智商，ZJY 准备去往一个新世界去旅游。这个世界的城市布局像一棵树，每两座城市之间只有一条路径可以互达。  \n\n每座城市都有一种宝石,有一定的价格。ZJY 为了赚取最高利益,她会选择从 A 城市买入再转手卖到 B 城市（只能进行一次购买）。  \n\n由于ZJY买宝石时经常卖萌，因而凡是 ZJY 路过的城市，这座城市的宝石价格会上涨。让我们来算算 ZJY 旅游完之后能够赚取的最大利润。(如 A 城市宝石价格为 $v$，则ZJY出售价格也为 $v$)", "inputFormat": "第一行输入一个正整数 $n$ 表示城市个数\n\n接下来一行输入 $n$ 个正整数表示每座城市宝石的最初价格 $p$,每个宝石的初始价格不超过 $100$。\n\n第三行开始连续输入 $n-1$ 行,每行有两个数字 $x$ 和 $y$。表示 $x$ 城市和 $y$ 城市有一条路径。城市编号从$1$开始。  \n\n下一行输入一个正整数 $q$ 表示询问次数。\n\n接下来 $q$ 行每行输入三个正整数 $a,b,v$，表示 ZJY 从 $a$ 旅游到 $b$，城市宝石上涨 $v$。", "outputFormat": "对于每次询问，输出 ZJY 可能获得的最大利润，如果亏本了则输出 $0$。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n \\le 100$，$q \\le 10^4$。\n- 对于 $100\\%$ 的数据，保证 $1\\le n,q \\le 5\\times 10^4$，在任何时刻任何城市的宝石价格都不超过 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P3977", "type": "P", "difficulty": 6, "samples": [["5 5\n3 1\n0 1 0\n1 1 1\n0 1 0\n", "55447\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "2015", "各省省选", "枚举", "矩阵加速", "进制", "天津", "状压 DP"], "title": "[TJOI2015] 棋盘", "background": "", "description": "为了提高智商，ZJY 去新世界旅游了。可是旅游过后的 ZJY 杯具地发现要打开通往原来世界的门，必须要解开门上面画的谜题。谜题是这样的：\n\n有个 $n$ 行 $m$ 列的棋盘，棋盘上可以放许多特殊的棋子。每个棋子的攻击范围是 $3$ 行 $p$ 列。输入数据用一个 $3\\times p$ 的矩阵给出了棋子攻击范围的模板，棋子被默认为模板中的第 $1$ 行，第 $k$ 列，则棋子能攻击到的位置是 $1$，不能攻击到的位置是 $0$。输入数据保证第 $1$ 行第 $k$ 列的位置是 $1$。打开门的密码就是，在要求棋子互相不能攻击到的前提下，摆放棋子的方案数。注意什么棋子都不摆放也算作一种可行方案。由于方案数可能很大,而密码为 $32$ 位的二进制密码,所以 ZJY 仅需要知道方案数对 $2^{32}$ 次方取余数的结果即可。\n\n注意：编号从 $0$ 开始，即第 $1$ 行指的是中间那行。", "inputFormat": "输入数据的第一行为两个整数 $n$ 和 $m$，表示棋盘的大小。\n\n第二行为两个整数 $p$ 和 $k$，表示接下来的攻击范围模板的大小，以及棋子在模板中的位置。\n\n接下来三行,每行有 $p$ 个数,表示攻击范围的模版。每个数字后有一个空格。", "outputFormat": "输出数据仅有一行，一个整数，表示可行的方案数模 $2^{32}$ 的余数。", "hint": "### 数据范围\n\n对于 $10\\%$ 的数据，$1 \\leq n \\leq 5$，$1 \\leq m \\leq5$。\n\n对于 $50\\%$ 的数据，$1 \\leq n \\leq 1000$，$1 \\leq m \\leq 6$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^{6}$，$1 \\leq m \\leq 6$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2015] Chessboard", "background": "", "description": "To improve his IQ, ZJY traveled to a new world. However, after traveling, ZJY unfortunately found that to open the door back to his original world, he must solve the puzzle drawn on the door. The puzzle is as follows:\n\nThere is an $n$-row by $m$-column board on which many special pieces can be placed. Each piece has an attack range of 3 rows and $p$ columns. The input provides a template of the attack range as a $3\\times p$ matrix. A piece is assumed to be at row $1$, column $k$ of the template; positions it can attack are marked with $1$, and positions it cannot attack are marked with $0$. The input guarantees that the entry at row $1$, column $k$ is $1$. The password to open the door is the number of ways to place pieces on the board so that the pieces do not attack each other. Note that placing no pieces at all also counts as a valid arrangement. Since the number of arrangements may be large, and the password is a 32-bit binary number, ZJY only needs the number of arrangements modulo $2^{32}$.\n\nNote: indices start from $0$, i.e., row $1$ refers to the middle row.", "inputFormat": "The first line contains two integers $n$ and $m$, representing the size of the board.\n\nThe second line contains two integers $p$ and $k$, representing the size of the upcoming attack-range template and the piece’s position within the template.\n\nThe next three lines each contain $p$ numbers, describing the attack-range template. There is a space after each number.", "outputFormat": "Output a single line with one integer, the number of valid arrangements modulo $2^{32}$.", "hint": "### Constraints\n\nFor 10% of the testdata, $1 \\leq n \\leq 5$, $1 \\leq m \\leq 5$.\n\nFor 50% of the testdata, $1 \\leq n \\leq 1000$, $1 \\leq m \\leq 6$.\n\nFor 100% of the testdata, $1 \\leq n \\leq 10^{6}$, $1 \\leq m \\leq 6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2015] 棋盘", "background": "", "description": "为了提高智商，ZJY 去新世界旅游了。可是旅游过后的 ZJY 杯具地发现要打开通往原来世界的门，必须要解开门上面画的谜题。谜题是这样的：\n\n有个 $n$ 行 $m$ 列的棋盘，棋盘上可以放许多特殊的棋子。每个棋子的攻击范围是 $3$ 行 $p$ 列。输入数据用一个 $3\\times p$ 的矩阵给出了棋子攻击范围的模板，棋子被默认为模板中的第 $1$ 行，第 $k$ 列，则棋子能攻击到的位置是 $1$，不能攻击到的位置是 $0$。输入数据保证第 $1$ 行第 $k$ 列的位置是 $1$。打开门的密码就是，在要求棋子互相不能攻击到的前提下，摆放棋子的方案数。注意什么棋子都不摆放也算作一种可行方案。由于方案数可能很大,而密码为 $32$ 位的二进制密码,所以 ZJY 仅需要知道方案数对 $2^{32}$ 次方取余数的结果即可。\n\n注意：编号从 $0$ 开始，即第 $1$ 行指的是中间那行。", "inputFormat": "输入数据的第一行为两个整数 $n$ 和 $m$，表示棋盘的大小。\n\n第二行为两个整数 $p$ 和 $k$，表示接下来的攻击范围模板的大小，以及棋子在模板中的位置。\n\n接下来三行,每行有 $p$ 个数,表示攻击范围的模版。每个数字后有一个空格。", "outputFormat": "输出数据仅有一行，一个整数，表示可行的方案数模 $2^{32}$ 的余数。", "hint": "### 数据范围\n\n对于 $10\\%$ 的数据，$1 \\leq n \\leq 5$，$1 \\leq m \\leq5$。\n\n对于 $50\\%$ 的数据，$1 \\leq n \\leq 1000$，$1 \\leq m \\leq 6$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^{6}$，$1 \\leq m \\leq 6$。", "locale": "zh-CN"}}}
