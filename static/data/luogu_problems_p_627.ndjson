{"pid": "P13716", "type": "P", "difficulty": 3, "samples": [["5 3\n1 2\n2 3\n4 5", "3"], ["3 0", "1"], ["8 8\n1 2\n2 3\n3 4\n1 4\n1 5\n2 6\n3 7\n4 8", "8"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["并查集", "2024", "连通块", "ICPC"], "title": "[GCPC 2024] Alien Attack 2", "background": "", "description": "Aliens are visiting Earth and, as usual, they plan to abduct humans for their experiments.\nIn the past, alien abductions have caused a lot of press coverage and wild speculation on Earth.\nLuckily for them, most people do not believe these stories and think that aliens are not real.\n\n:::align{center}\n![](https://upload.wikimedia.org/wikipedia/commons/0/0d/Rocket_USA_Battery_Operated_Tin_UFO_Mars_Explorer_Close_Up.jpg)\n\nA representative of the Galactic Committee for Person Captures.\n\nBy D J Shin on [Wikimedia Commons](https://commons.wikimedia.org/wiki/File:Rocket_USA_Battery_Operated_Tin_UFO_Mars_Explorer_Close_Up.jpg)\n\n:::\n\nIn order to keep a low profile in the future, the Galactic Committee for Person Captures (GCPC) has established rules for abductions.\nBesides a lot of boring paperwork, the aliens have to prepare the abduction carefully.\nWhile they can make multiple trips (in fact, alien travel is so fast in practice that this is not a limitation at all),\nthey must be smart about it so that their secret is not revealed to humans. If aliens want to abduct a person,\nthey are required to abduct all of their friends at the same time, so that no one notices that their friend is missing when they want to hang out.\nOf course, friendships on planet Earth are bidirectional, that is if Alice is a friend of Bob, then Bob is also a friend of Alice.\n\nIn preparation for the trip, the aliens have observed their targets and started taking note of all their friendships.\nIn total, they must abduct $n$ people, including their friends.\nNow, they want to book a starship at their local dealership and wonder how much space they need to abduct all $n$ people.\nA starship's storage space is measured in terms of the number of people that can be transported simultaneously.\nWhat is the minimum storage space required to abduct all $n$ people?\n", "inputFormat": "The input consists of:\n- One line with two integers $n$ and $m$ ($1\\leq n\\leq 2 \\cdot 10^5$, $0\\leq m\\leq 2 \\cdot 10^5$), the number of people and the total number of friendships between them.\n- $m$ lines, each with two integers $i$ and $j$ ($1\\leq i < j\\leq n$), denoting a friendship between persons $i$ and $j$.\n\n\nThe people are numbered from $1$ to $n$. It is guaranteed that no friendship is listed multiple times.\n", "outputFormat": "Output the minimum storage space needed to abduct all people.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2024] Alien Attack 2", "background": "", "description": "Aliens are visiting Earth and, as usual, they plan to abduct humans for their experiments.\nIn the past, alien abductions have caused a lot of press coverage and wild speculation on Earth.\nLuckily for them, most people do not believe these stories and think that aliens are not real.\n\n:::align{center}\n![](https://upload.wikimedia.org/wikipedia/commons/0/0d/Rocket_USA_Battery_Operated_Tin_UFO_Mars_Explorer_Close_Up.jpg)\n\nA representative of the Galactic Committee for Person Captures.\n\nBy D J Shin on [Wikimedia Commons](https://commons.wikimedia.org/wiki/File:Rocket_USA_Battery_Operated_Tin_UFO_Mars_Explorer_Close_Up.jpg)\n\n:::\n\nIn order to keep a low profile in the future, the Galactic Committee for Person Captures (GCPC) has established rules for abductions.\nBesides a lot of boring paperwork, the aliens have to prepare the abduction carefully.\nWhile they can make multiple trips (in fact, alien travel is so fast in practice that this is not a limitation at all),\nthey must be smart about it so that their secret is not revealed to humans. If aliens want to abduct a person,\nthey are required to abduct all of their friends at the same time, so that no one notices that their friend is missing when they want to hang out.\nOf course, friendships on planet Earth are bidirectional, that is if Alice is a friend of Bob, then Bob is also a friend of Alice.\n\nIn preparation for the trip, the aliens have observed their targets and started taking note of all their friendships.\nIn total, they must abduct $n$ people, including their friends.\nNow, they want to book a starship at their local dealership and wonder how much space they need to abduct all $n$ people.\nA starship's storage space is measured in terms of the number of people that can be transported simultaneously.\nWhat is the minimum storage space required to abduct all $n$ people?\n", "inputFormat": "The input consists of:\n- One line with two integers $n$ and $m$ ($1\\leq n\\leq 2 \\cdot 10^5$, $0\\leq m\\leq 2 \\cdot 10^5$), the number of people and the total number of friendships between them.\n- $m$ lines, each with two integers $i$ and $j$ ($1\\leq i < j\\leq n$), denoting a friendship between persons $i$ and $j$.\n\n\nThe people are numbered from $1$ to $n$. It is guaranteed that no friendship is listed multiple times.\n", "outputFormat": "Output the minimum storage space needed to abduct all people.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2024] Alien Attack 2", "background": null, "description": "外星人正在造访地球，像往常一样，他们计划绑架人类进行实验。\n在过去，外星人绑架事件在地球上引起了大量媒体报道和疯狂猜测。\n幸运的是，大多数人并不相信这些故事，认为外星人并不真实存在。\n\n:::align{center}\n![](https://upload.wikimedia.org/wikipedia/commons/0/0d/Rocket_USA_Battery_Operated_Tin_UFO_Mars_Explorer_Close_Up.jpg)\n\n银河系人员捕获委员会（GCPC）代表。\n\n图片作者：D J Shin，来源于 [Wikimedia Commons](https://commons.wikimedia.org/wiki/File:Rocket_USA_Battery_Operated_Tin_UFO_Mars_Explorer_Close_Up.jpg)\n\n:::\n\n为了将来保持低调，银河系人员捕获委员会（GCPC）为绑架行为制定了规则。\n除了大量繁琐的文书工作，外星人还必须仔细准备绑架计划。\n虽然他们可以进行多次往返（实际上，外星旅行速度极快，这根本不是限制），\n但他们必须足够聪明，以免让人类发现他们的秘密。如果外星人想要绑架某个人，\n他们必须同时绑架这个人的所有朋友，这样当朋友们想要聚会时，就不会发现有人失踪。\n当然，地球上的友谊是双向的，也就是说，如果 Alice 是 Bob 的朋友，那么 Bob 也是 Alice 的朋友。\n\n在准备行动时，外星人已经观察了他们的目标，并记录下了所有的友谊关系。\n总共，他们必须绑架 $n$ 个人，包括他们的朋友。\n现在，他们想在本地经销商处预订一艘星际飞船，并想知道需要多大的空间才能一次性绑架所有 $n$ 个人。\n一艘星际飞船的储存空间以能同时运输的人数来衡量。\n要绑架所有 $n$ 个人，所需的最小储存空间是多少？", "inputFormat": "输入包括：\n- 一行，包含两个整数 $n$ 和 $m$（$1\\leq n\\leq 2 \\cdot 10^5$，$0\\leq m\\leq 2 \\cdot 10^5$），分别表示人员数量和他们之间的友谊总数。\n- 接下来的 $m$ 行，每行包含两个整数 $i$ 和 $j$（$1\\leq i < j\\leq n$），表示第 $i$ 个人和第 $j$ 个人是朋友。\n\n这些人编号为 $1$ 到 $n$。保证不会有重复的友谊关系。", "outputFormat": "输出绑架所有人所需的最小储存空间。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13717", "type": "P", "difficulty": 2, "samples": [["1 3\n10 2 5", "5"], ["1 3\n10 4 5", "impossible"], ["2 10\n10 2 10\n2 3 4", "4"], ["3 1000000000\n1000000000 1000000000 1000000000\n1000000000 1000000000 1000000000\n1000000000 1000000000 1000000000", "3000000000"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2024", "ICPC"], "title": "[GCPC 2024] Bookshelf Bottleneck", "background": "", "description": "Brianna is a bookworm. At home, she has a big bookshelf with all her favourite\nbooks. She has a large collection ranging from detective novels and\nscience-fiction novels to biographies.\n\nRecently, Brianna has expanded her collection with $n$ graphic novels. However,\nthe new books currently lie around everywhere and form huge stacks on the floor.\nIn the meantime, one of the shelf boards has collected dust and random household utensils that\ndo not belong there.\nThe new books just lying around have become too much to bear,\nand Brianna finally decided to put them\non this shelf board. To do so, she first has to make room on it.\n\n\n:::align{center}\n![Figure B.1: Visualization of Sample Input 3.](https://cdn.luogu.com.cn/upload/image_hosting/atblbkye.png)\nFigure B.1: Visualization of Sample Input 3.\n:::\n\nBrianna wants to arrange the books in a single horizontal line without\nstacking multiple books on top of each other. While the shelf is wide\nenough to hold all books without problems, it takes time to make room \non the shelf. Therefore, Brianna wants to minimize the width of the part \nof the shelf that she needs to clear.\n\nEach book can be described as a cuboid with three side lengths $l$, $w$, and $h$.\nSince the room above the shelf board is limited by the next shelf board above it,\nshe can only fit a book vertically if its vertical side length is at most the distance $H$\nbetween the two shelf boards. Brianna may rotate each book\nin three-dimensional space as she wants. It is guaranteed that the shelf is deep enough\nso that the books will not fall off, no matter the orientation. However, all books must\nstand properly on the shelf board, meaning that every book touches the shelf board along an\nentire face and not just by an edge.\n\nWhat is the minimum width of shelf Brianna's books need?", "inputFormat": "The input consists of:\n- One line with two integers $n$ and $H$ ($1\\leq n\\leq 10^5$, $1\\leq H \\leq 10^9$), the number of books and the height of the shelf, respectively.\n- $n$ lines, each containing three integers $l$, $w$, $h$ ($1\\leq l,w,h \\leq 10^9$), the dimensions of the books.", "outputFormat": "Output the minimum width of shelf Brianna's books need, or \"$\\texttt{impossible}$\" if it is impossible to place the books on the shelf.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2024] Bookshelf Bottleneck", "background": "", "description": "Brianna is a bookworm. At home, she has a big bookshelf with all her favourite\nbooks. She has a large collection ranging from detective novels and\nscience-fiction novels to biographies.\n\nRecently, Brianna has expanded her collection with $n$ graphic novels. However,\nthe new books currently lie around everywhere and form huge stacks on the floor.\nIn the meantime, one of the shelf boards has collected dust and random household utensils that\ndo not belong there.\nThe new books just lying around have become too much to bear,\nand Brianna finally decided to put them\non this shelf board. To do so, she first has to make room on it.\n\n\n:::align{center}\n![Figure B.1: Visualization of Sample Input 3.](https://cdn.luogu.com.cn/upload/image_hosting/atblbkye.png)\nFigure B.1: Visualization of Sample Input 3.\n:::\n\nBrianna wants to arrange the books in a single horizontal line without\nstacking multiple books on top of each other. While the shelf is wide\nenough to hold all books without problems, it takes time to make room \non the shelf. Therefore, Brianna wants to minimize the width of the part \nof the shelf that she needs to clear.\n\nEach book can be described as a cuboid with three side lengths $l$, $w$, and $h$.\nSince the room above the shelf board is limited by the next shelf board above it,\nshe can only fit a book vertically if its vertical side length is at most the distance $H$\nbetween the two shelf boards. Brianna may rotate each book\nin three-dimensional space as she wants. It is guaranteed that the shelf is deep enough\nso that the books will not fall off, no matter the orientation. However, all books must\nstand properly on the shelf board, meaning that every book touches the shelf board along an\nentire face and not just by an edge.\n\nWhat is the minimum width of shelf Brianna's books need?", "inputFormat": "The input consists of:\n- One line with two integers $n$ and $H$ ($1\\leq n\\leq 10^5$, $1\\leq H \\leq 10^9$), the number of books and the height of the shelf, respectively.\n- $n$ lines, each containing three integers $l$, $w$, $h$ ($1\\leq l,w,h \\leq 10^9$), the dimensions of the books.", "outputFormat": "Output the minimum width of shelf Brianna's books need, or \"$\\texttt{impossible}$\" if it is impossible to place the books on the shelf.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2024] Bookshelf Bottleneck", "background": null, "description": "Brianna 是一个书虫。在家里，她有一个装满了她最喜欢的书的大书架。她的藏书非常丰富，从侦探小说、科幻小说到传记应有尽有。\n\n最近，Brianna 又收集了 $n$ 本漫画小说。然而，这些新书目前随处乱放，在地板上堆成了高高的书堆。与此同时，其中一块书架板上积满了灰尘和一些不属于那里的家用杂物。新书就这样随意堆放，Brianna 终于受不了了，决定把它们放到这块书架板上。为此，她首先需要在书架板上腾出空间。\n\n:::align{center}\n![图 B.1：样例输入 3 的可视化。](https://cdn.luogu.com.cn/upload/image_hosting/atblbkye.png)\n图 B.1：样例输入 3 的可视化。\n:::\n\nBrianna 想要把这些书排成一条水平直线，不能把多本书叠在一起。虽然书架足够宽，能容纳所有的书，但清理书架需要花费时间。因此，Brianna 想要最小化她需要清理的书架部分的宽度。\n\n每本书都可以用一个长方体来描述，具有三条边长 $l$、$w$ 和 $h$。由于书架板上方的空间受到上方书架板的限制，只有当一本书的竖直边长不超过两块书架板之间的距离 $H$ 时，才能竖直放置。Brianna 可以任意旋转每本书。保证书架的深度足够，无论怎么放书都不会掉下来。然而，所有的书都必须平稳地放在书架板上，也就是说，每本书必须有一个完整的面与书架板接触，而不能只用一条边接触。\n\nBrianna 的书最少需要多宽的书架空间？", "inputFormat": "输入包括：\n- 一行，包含两个整数 $n$ 和 $H$（$1\\leq n\\leq 10^5$，$1\\leq H \\leq 10^9$），分别表示书的数量和书架的高度。\n- 接下来的 $n$ 行，每行包含三个整数 $l$、$w$、$h$（$1\\leq l,w,h \\leq 10^9$），表示每本书的尺寸。", "outputFormat": "输出 Brianna 的书最少需要多宽的书架空间。如果无法将所有书放到书架上，输出“impossible”。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13718", "type": "P", "difficulty": 4, "samples": [["9\nfor i in range(10) do print i j end\n4\n3\nprint j i\n2\ndo print\n6\nk in range(10) do print k\n6\nk in range(10) do print j", "yes\nyes\nyes\nno\n"], ["5\ni is i times j\n7\n5\ni is i times j\n5\na is a times b\n5\nj is j times c\n5\na is i times j\n5\nj is i times j\n5\n0 is 0 times j\n5\ni is i times i\n", "yes\nyes\nyes\nno\nno\nno\nno\n"], ["5\nA 1 ( ) b\n4\n2\nb 2\n2\nb 1\n3\n1 ) (\n5\na 1 ( ) F\n", "no\nyes\nno\nyes\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "ICPC", "哈希表"], "title": "[GCPC 2024] Copycat Catcher", "background": "", "description": "Your university recently established the Graduate Code Plagiarism Control (GCPC) initiative to get hold of the ever-increasing load on the graders for the computer science assignments.\nCurrently, the graders need to check the code of assignments manually for plagiarism.\nThe GCPC aims to simplify this part of the graders' jobs by performing the plagiarism checks automatically.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dmrh1qay.png)\n\n:::align{center}\nA Plagiarism Keyboard\n:::\n\nCode consists of tokens separated by spaces. Tokens are strings of alphabetical letters, numerals, and brackets. If a token consists of only a single alphabetical letter (upper or lowercase), it is a variable in the code.\n\nThe GCPC wants the plagiarism checker to compare query pieces of code to a reference code.\nSpecifically, it should check whether each query could have been obtained by selecting a contiguous\nstring of tokens from the reference and consistently renaming variables.\n\nVariables are consistently renamed if no two occurrences of the same variable are renamed to different variables,\nand if no two different variables are renamed to the same variable.\n\nThe GCPC has asked you to develop the plagiarism checker.", "inputFormat": "The input consists of:\n- A description of the reference, consisting of:\n  - One line containing an integer $n$ ($1\\leq n \\leq 2\\,000$), the number of tokens in the reference.\n  - One line containing $n$ tokens, each consisting only of the characters '$\\texttt{a}$'-'$\\texttt{z}$', '$\\texttt{A}$'-'$\\texttt{Z}$', '$\\texttt{0}$'-'$\\texttt{9}$', '$\\texttt{(}$' and '$\\texttt{)}$'.\n- An integer $q$ ($1 \\leq q \\leq 2\\,000$), the number of queries.\n- $2\\cdot q$ lines, each two lines in the same format as the reference.\n\nIt is guaranteed that each query as well as the reference consist of at most $2\\,000$ characters (excluding spaces). Tokens are separated by single spaces.", "outputFormat": "For each query, output \"$\\texttt{yes}$\" if the query could have been obtained from the reference, and \"$\\texttt{no}$\" otherwise.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2024] Copycat Catcher", "background": "", "description": "Your university recently established the Graduate Code Plagiarism Control (GCPC) initiative to get hold of the ever-increasing load on the graders for the computer science assignments.\nCurrently, the graders need to check the code of assignments manually for plagiarism.\nThe GCPC aims to simplify this part of the graders' jobs by performing the plagiarism checks automatically.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dmrh1qay.png)\n\n:::align{center}\nA Plagiarism Keyboard\n:::\n\nCode consists of tokens separated by spaces. Tokens are strings of alphabetical letters, numerals, and brackets. If a token consists of only a single alphabetical letter (upper or lowercase), it is a variable in the code.\n\nThe GCPC wants the plagiarism checker to compare query pieces of code to a reference code.\nSpecifically, it should check whether each query could have been obtained by selecting a contiguous\nstring of tokens from the reference and consistently renaming variables.\n\nVariables are consistently renamed if no two occurrences of the same variable are renamed to different variables,\nand if no two different variables are renamed to the same variable.\n\nThe GCPC has asked you to develop the plagiarism checker.", "inputFormat": "The input consists of:\n- A description of the reference, consisting of:\n  - One line containing an integer $n$ ($1\\leq n \\leq 2\\,000$), the number of tokens in the reference.\n  - One line containing $n$ tokens, each consisting only of the characters '$\\texttt{a}$'-'$\\texttt{z}$', '$\\texttt{A}$'-'$\\texttt{Z}$', '$\\texttt{0}$'-'$\\texttt{9}$', '$\\texttt{(}$' and '$\\texttt{)}$'.\n- An integer $q$ ($1 \\leq q \\leq 2\\,000$), the number of queries.\n- $2\\cdot q$ lines, each two lines in the same format as the reference.\n\nIt is guaranteed that each query as well as the reference consist of at most $2\\,000$ characters (excluding spaces). Tokens are separated by single spaces.", "outputFormat": "For each query, output \"$\\texttt{yes}$\" if the query could have been obtained from the reference, and \"$\\texttt{no}$\" otherwise.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2024] Copycat Catcher", "background": "", "description": "你所在的大学最近成立了“研究生代码抄袭控制（GCPC）”项目，以应对计算机科学作业批改者日益增长的工作量。目前，批改者需要人工检查作业代码是否存在抄袭。GCPC 的目标是通过自动执行抄袭检查，简化批改者的这部分工作。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dmrh1qay.png)\n\n:::align{center}\n一个抄袭检测键盘\n:::\n\n代码由用空格分隔的若干“记号”组成。记号是由字母、数字和括号组成的字符串。如果一个记号仅由单个字母（大小写均可）组成，则它是代码中的变量。\n\nGCPC 希望抄袭检测器能够将查询代码片段与参考代码进行比较。具体来说，它应当检查每个查询是否可以通过从参考代码中选取一段连续的记号，并对变量进行一致性重命名后得到。\n\n变量的一致性重命名指：同一个变量的所有出现都被重命名为同一个变量，并且不同的变量不会被重命名为同一个变量。\n\nGCPC 要求你开发这个抄袭检测器。", "inputFormat": "输入包括：\n- 参考代码的描述，包括：\n  - 一行一个整数 $n$（$1\\leq n \\leq 2000$），表示参考代码中的记号数。\n  - 一行包含 $n$ 个记号，每个记号仅由字符 '$\\texttt{a}$'-'$\\texttt{z}$'、'$\\texttt{A}$'-'$\\texttt{Z}$'、'$\\texttt{0}$'-'$\\texttt{9}$'、'$\\texttt{(}$' 和 '$\\texttt{)}$' 组成。\n- 一个整数 $q$（$1 \\leq q \\leq 2000$），表示查询次数。\n- 接下来 $2\\cdot q$ 行，每两行为一组，格式与参考代码相同，分别表示每个查询的记号数和记号内容。\n\n保证每个查询和参考代码的总字符数（不包括空格）均不超过 $2000$。记号之间用单个空格分隔。", "outputFormat": "对于每个查询，如果该查询可以通过从参考代码中选取一段连续的记号并对变量进行一致性重命名得到，则输出“yes”，否则输出“no”。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13719", "type": "P", "difficulty": 5, "samples": [["5 6 0.25\n+ 4 2\n? 1\n? 2\n? 3\n? 4\n? 5", "3\n4\n3\n250000004\n187500003"], ["5 7 0.33\n+ 9 1\n? 5\n+ 4 3\n? 2\n? 5 \n- 9 1\n? 2", "312342734\n470000012\n341542736\n760000008"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2024", "ICPC"], "title": "[GCPC 2024] Dark Alley", "background": "", "description": "One cold and foggy night, you walk down a shady alley.\nThere should be a lamp every few metres but none of them seem to work, and in this night, not even the moon enlightens your path.\nAlone and in the dark, you wonder:\n\"Even if there was a working lamp somewhere, how much would it lighten my way\".\nNow, back at home, you want to calculate this.\n\n![](https://cdn.pixabay.com/photo/2019/06/13/05/24/the-park-at-night-4270765_1280.jpg)\n\n:::align{center}\nA foggy alley. [Photo by Henryk Niestrój](https://pixabay.com/de/photos/park-in-der-nacht-dunkle-stra\\%C3\\%9Fe-4270765/)\n\n:::\n\nThe alley can be modelled as a line with a length of $n$ metres.\nThe fog has a uniform density and reduces the light of a lamp by a factor of $1-p$ every metre.\nThe brightness at one point is the sum of the light that reaches this point from every lamp.\nYou want to calculate this brightness at some points after placing some lamps.", "inputFormat": "The input consists of:\n- One line with two integers $n$ and $q$ and one real number $p$  ($1\\leq n, q\\leq 2\\cdot10^5, 0 < p < 1$), the length of the alley, the number of queries and the density of the fog. The density $p$ of the fog will be given with at most $6$ digits behind the decimal point.\n- $q$ lines containing one of three query types:\n  \n  1. \"$\\texttt{+ b x}$\" given two integers $b$ and $x$ ($1\\leq b \\leq 10^9$ and $1\\leq x \\leq n$), place a lamp with brightness $b$ at position $x$.\n  2. \"$\\texttt{- b x}$\" given integers $b$ and $x$ ($1\\leq b \\leq 10^9$ and $1\\leq x \\leq n$), remove a lamp with brightness $b$ at position $x$. It is guaranteed that a lamp with that brightness was placed there earlier.\n  3. \"$\\texttt{? x}$\" given one integer $x$ ($1\\leq x \\leq n$), calculate the brightness at position $x$.\n", "outputFormat": "It can be shown that the brightness can be calculated as a fraction $\\frac{P}{Q}$ where $Q$ is not divisible by $10^9+7$. For each query of type \"$\\texttt{?}$\", print the brightness as $P\\cdot Q^{-1} \\bmod 10^9+7$ in a single line.", "hint": "In the first sample case, the brightness in the alley after placing the lamp will look like this:\n\n| $3$ | $4$ | $3$ | $2.25$ | $1.6875$ |\n|:-:|:-:|:-:|:-:|:-:|\n\n\n", "locale": "en", "translations": {"en": {"title": "[GCPC 2024] Dark Alley", "background": "", "description": "One cold and foggy night, you walk down a shady alley.\nThere should be a lamp every few metres but none of them seem to work, and in this night, not even the moon enlightens your path.\nAlone and in the dark, you wonder:\n\"Even if there was a working lamp somewhere, how much would it lighten my way\".\nNow, back at home, you want to calculate this.\n\n![](https://cdn.pixabay.com/photo/2019/06/13/05/24/the-park-at-night-4270765_1280.jpg)\n\n:::align{center}\nA foggy alley. [Photo by Henryk Niestrój](https://pixabay.com/de/photos/park-in-der-nacht-dunkle-stra\\%C3\\%9Fe-4270765/)\n\n:::\n\nThe alley can be modelled as a line with a length of $n$ metres.\nThe fog has a uniform density and reduces the light of a lamp by a factor of $1-p$ every metre.\nThe brightness at one point is the sum of the light that reaches this point from every lamp.\nYou want to calculate this brightness at some points after placing some lamps.", "inputFormat": "The input consists of:\n- One line with two integers $n$ and $q$ and one real number $p$  ($1\\leq n, q\\leq 2\\cdot10^5, 0 < p < 1$), the length of the alley, the number of queries and the density of the fog. The density $p$ of the fog will be given with at most $6$ digits behind the decimal point.\n- $q$ lines containing one of three query types:\n  \n  1. \"$\\texttt{+ b x}$\" given two integers $b$ and $x$ ($1\\leq b \\leq 10^9$ and $1\\leq x \\leq n$), place a lamp with brightness $b$ at position $x$.\n  2. \"$\\texttt{- b x}$\" given integers $b$ and $x$ ($1\\leq b \\leq 10^9$ and $1\\leq x \\leq n$), remove a lamp with brightness $b$ at position $x$. It is guaranteed that a lamp with that brightness was placed there earlier.\n  3. \"$\\texttt{? x}$\" given one integer $x$ ($1\\leq x \\leq n$), calculate the brightness at position $x$.\n", "outputFormat": "It can be shown that the brightness can be calculated as a fraction $\\frac{P}{Q}$ where $Q$ is not divisible by $10^9+7$. For each query of type \"$\\texttt{?}$\", print the brightness as $P\\cdot Q^{-1} \\bmod 10^9+7$ in a single line.", "hint": "In the first sample case, the brightness in the alley after placing the lamp will look like this:\n\n| $3$ | $4$ | $3$ | $2.25$ | $1.6875$ |\n|:-:|:-:|:-:|:-:|:-:|\n\n\n", "locale": "en"}, "zh-CN": {"title": "[GCPC 2024] Dark Alley", "background": null, "description": "在一个寒冷而有雾的夜晚，你走在一条阴暗的小巷里。\n每隔几米应该有一盏路灯，但似乎没有一盏能亮起，在这个夜晚，连月亮都无法照亮你的路。\n孤身一人在黑暗中，你不禁思考：\n“即使某处有一盏亮着的灯，它能照亮我多少路呢？”\n现在，回到家中，你想要计算这个问题。\n\n![](https://cdn.pixabay.com/photo/2019/06/13/05/24/the-park-at-night-4270765_1280.jpg)\n\n:::align{center}\n雾蒙蒙的小巷。[照片来自 Henryk Niestrój](https://pixabay.com/de/photos/park-in-der-nacht-dunkle-stra%C3%9Fe-4270765/)\n:::\n\n这条小巷可以被建模为一条长度为 $n$ 米的直线。\n雾的密度是均匀的，每经过 $1$ 米，雾会使灯光衰减 $1-p$ 倍。\n某一点的亮度等于所有灯光到达该点的光强之和。\n你需要在放置一些灯之后，计算某些点的亮度。", "inputFormat": "输入包括：\n- 一行，包含两个整数 $n$ 和 $q$，以及一个实数 $p$（$1\\leq n, q\\leq 2\\cdot10^5, 0 < p < 1$），分别表示小巷的长度、查询次数和雾的密度。雾的密度 $p$ 最多有 $6$ 位小数。\n- 接下来 $q$ 行，每行包含以下三种查询之一：\n\n  1. “$\\texttt{+ b x}$” 给定两个整数 $b$ 和 $x$（$1\\leq b \\leq 10^9$ 且 $1\\leq x \\leq n$），表示在位置 $x$ 放置一个亮度为 $b$ 的灯。\n  2. “$\\texttt{- b x}$” 给定两个整数 $b$ 和 $x$（$1\\leq b \\leq 10^9$ 且 $1\\leq x \\leq n$），表示移除在位置 $x$ 上亮度为 $b$ 的灯。保证之前在该位置放置过该亮度的灯。\n  3. “$\\texttt{? x}$” 给定一个整数 $x$（$1\\leq x \\leq n$），询问位置 $x$ 的亮度。", "outputFormat": "可以证明，亮度可以表示为一个分数 $\\frac{P}{Q}$，其中 $Q$ 不会被 $10^9+7$ 整除。对于每个“$\\texttt{?}$”类型的查询，输出 $P\\cdot Q^{-1} \\bmod 10^9+7$，每个答案占一行。", "hint": "在第一个样例中，放置灯后小巷各点的亮度如下表所示：\n\n| $3$ | $4$ | $3$ | $2.25$ | $1.6875$ |\n|:-:|:-:|:-:|:-:|:-:|\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13720", "type": "P", "difficulty": 5, "samples": [["3\n+ 7\n* 4\n+ 2\n1\n\n\n* 4", "\n\n\n\n\nme\n+ 2\n\n+ 7"], ["2\n+ 8\n* 5\n10\n\n+ 8", "\n\n\n\nyou\n\n* 5"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "博弈论", "2024", "交互题", "Special Judge", "记忆化搜索", "ICPC"], "title": "[GCPC 2024] Even Odd Game", "background": "", "description": "As every Saturday, Eve is paying her local game club a visit.\nToday, Bob has brought a new game he has designed on his own.\nAfter thorough investigation, you claim that there exists a dominant strategy, so one player can always win.\nBob is hesitant to accept that his game is boring to play, so he challenges you to play a round!\nSince you claim that there exists a dominant strategy, you may determine who begins the game.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/119eym2b.png)\n\n:::align{center}\nFigure E.1: The cards in the two sample interactions.\n:::\n\nThe rules are as follows.\nThere are $n$ cards on the table, each containing a maths operation ($\\texttt{+}$ or $\\texttt{*}$) and an integer, as shown in Figure E.1.\nEve and Bob alternate picking cards to manipulate a common number using one of the cards.\nFor instance, if the current value of the number is $5$, and the card says $+3$, then the value gets updated to $8$.\nEach card can only be used once, and the game ends when all the cards have been used.\nThe player who makes the first move wins if the final number is odd, and the other player wins if the final number is even.\nGiven the list of cards and the starting value, help Eve win the game.\n", "inputFormat": "The interactor begins by outputting the starting state of the game in the following format:\n- One line with an integer $n$ ($1 \\le n \\le 300$), the number of cards.\n- $n$ lines, each with a character $o$ and an integer $x$ ($o \\in \\{$'$\\texttt{+}$'$, $'$\\texttt{*}$'$\\}$, $1 \\le x \\le 10^6$) indicating one of the cards.\n- One line with an integer $x$ ($1 \\le x \\le 10^6$), the starting value.\n\n\nIt is guaranteed that the $n$ cards in the input are distinct.\n\n  Then, your submission must output one of \"$\\texttt{me}$\" or \"$\\texttt{you}$\", depending on if you want to go first or you want the interactor to go first.\n\n  Then your submission and the interactor alternate outputting cards in the same format as above.\n  No card can be played more than once.\n  Your submission must exit when all cards have been played, regardless of which player made the last move.\n\n  Your submission will be accepted if it follows all the rules above and the final value has the parity indicated on the first line of your output.\n\n  Make sure you flush the buffer after each write.\n\n  A testing tool is provided to help you develop your solution.", "outputFormat": "", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2024] Even Odd Game", "background": "", "description": "As every Saturday, Eve is paying her local game club a visit.\nToday, Bob has brought a new game he has designed on his own.\nAfter thorough investigation, you claim that there exists a dominant strategy, so one player can always win.\nBob is hesitant to accept that his game is boring to play, so he challenges you to play a round!\nSince you claim that there exists a dominant strategy, you may determine who begins the game.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/119eym2b.png)\n\n:::align{center}\nFigure E.1: The cards in the two sample interactions.\n:::\n\nThe rules are as follows.\nThere are $n$ cards on the table, each containing a maths operation ($\\texttt{+}$ or $\\texttt{*}$) and an integer, as shown in Figure E.1.\nEve and Bob alternate picking cards to manipulate a common number using one of the cards.\nFor instance, if the current value of the number is $5$, and the card says $+3$, then the value gets updated to $8$.\nEach card can only be used once, and the game ends when all the cards have been used.\nThe player who makes the first move wins if the final number is odd, and the other player wins if the final number is even.\nGiven the list of cards and the starting value, help Eve win the game.\n", "inputFormat": "The interactor begins by outputting the starting state of the game in the following format:\n- One line with an integer $n$ ($1 \\le n \\le 300$), the number of cards.\n- $n$ lines, each with a character $o$ and an integer $x$ ($o \\in \\{$'$\\texttt{+}$'$, $'$\\texttt{*}$'$\\}$, $1 \\le x \\le 10^6$) indicating one of the cards.\n- One line with an integer $x$ ($1 \\le x \\le 10^6$), the starting value.\n\n\nIt is guaranteed that the $n$ cards in the input are distinct.\n\n  Then, your submission must output one of \"$\\texttt{me}$\" or \"$\\texttt{you}$\", depending on if you want to go first or you want the interactor to go first.\n\n  Then your submission and the interactor alternate outputting cards in the same format as above.\n  No card can be played more than once.\n  Your submission must exit when all cards have been played, regardless of which player made the last move.\n\n  Your submission will be accepted if it follows all the rules above and the final value has the parity indicated on the first line of your output.\n\n  Make sure you flush the buffer after each write.\n\n  A testing tool is provided to help you develop your solution.", "outputFormat": "", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2024] Even Odd Game", "background": null, "description": "像往常的每个星期六一样，Eve 去她本地的游戏俱乐部玩耍。  \n今天，Bob 带来了一款他自己设计的新游戏。  \n经过仔细研究，你声称这个游戏存在一个必胜策略，因此某一方总能获胜。  \nBob 对你说他设计的游戏很无聊这件事半信半疑，于是他邀请你来玩一局！  \n既然你声称存在必胜策略，你可以决定谁先开始游戏。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/119eym2b.png)\n\n:::align{center}\n图 E.1：两组样例对局中的卡牌。\n:::\n\n游戏规则如下：  \n桌上有 $n$ 张卡牌，每张卡牌上都有一个数学运算符（$\\texttt{+}$ 或 $\\texttt{*}$）和一个整数，如图 E.1 所示。  \nEve 和 Bob 轮流选择卡牌，用选中的卡牌对一个公共数字进行操作。  \n例如，如果当前数字为 $5$，而卡牌为 $+3$，则数字会变为 $8$。  \n每张卡牌只能使用一次，所有卡牌用完后游戏结束。  \n如果最终数字是奇数，则先手获胜；如果是偶数，则后手获胜。  \n给定卡牌列表和初始值，请帮助 Eve 赢得这场游戏。", "inputFormat": "交互器首先输出游戏的初始状态，格式如下：  \n- 一行一个整数 $n$（$1 \\le n \\le 300$），表示卡牌数量。  \n- 接下来 $n$ 行，每行包含一个字符 $o$ 和一个整数 $x$（$o \\in \\{\\texttt{+}, \\texttt{*}\\}$，$1 \\le x \\le 10^6$），表示一张卡牌。  \n- 一行一个整数 $x$（$1 \\le x \\le 10^6$），表示初始值。\n\n保证输入中的 $n$ 张卡牌各不相同。\n\n然后，你的程序需要输出 $\\texttt{me}$ 或 $\\texttt{you}$，表示你选择先手还是后手。\n\n接下来，你和交互器轮流输出所选卡牌，格式与上面相同。  \n每张卡牌只能使用一次。  \n无论最后一步是谁操作的，当所有卡牌都被使用后，你的程序必须退出。\n\n如果你遵循上述所有规则，并且最终数字的奇偶性与你最初输出的先后手相符，则你的程序会被判定为通过。\n\n每次输出后请确保刷新输出缓冲区。\n\n官方提供了测试工具以帮助你开发你的解法。", "outputFormat": "（交互题，无需填写）", "hint": "（无）\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13721", "type": "P", "difficulty": 7, "samples": [["4\n0 0\n2 0\n2 2\n0 2", "1 1 1337/42 3141/1000"], ["20\n7 1\n8 2\n8 5\n7 6\n4 6\n4 4\n3 4\n3 7\n6 7\n7 8\n2 8\n1 7\n1 4\n2 3\n5 3\n5 5\n6 5\n6 2\n3 2\n2 1", "11 13 -2 -4"], ["10\n11 5\n10 2\n12 6\n2 2\n7 3\n1 1\n2 4\n0 0\n10 4\n5 3", "impossible"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["计算几何", "2024", "Special Judge", "ICPC", "双指针 two-pointer"], "title": "[GCPC 2024] Fair Fruitcake Fragmenting", "background": "", "description": "Frida's birthday is just coming up, and as her best friend, you obviously baked a cake for her.\nSince you know that Frida loves rotational symmetry, you thought to bake a cake that\nlooks the same from above when rotated by $180^\\circ$.\nOf course, you could have simply baked a boring round cake, but without a perfectly round cake tin, this sounds easier than done.\nTherefore, you decided to bake a cake whose shape can be described by straight line segments.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j4oo5c4y.png)\n\n:::align{center}\n\nFigure F.1: Visualization of Sample Input 2. The swirly cake looking like an S can be cut into the red and blue part with a single cut.\n\n:::\n\nHowever, after you are done with your cake, you notice that you also want to cut the cake into two equal pieces, one for Frida and one for yourself.\nMore precisely, you wonder if it is possible to cut the cake along an infinite line such that it splits into exactly two\nparts of equal weight.\nYou can assume that the cake has uniform density and height.", "inputFormat": "The input consists of:\n- One line containing an *even* integer $n$ ($4 \\leq n\\leq 10^5$), the number of points needed to describe the cake's shape.\n- $n$ lines, each containing two integers $x$, $y$ ($0\\leq x,y \\leq 10^6$), the $x$ and $y$ coordinates of a point on the border of the cake's shape.\n\nThe following additional guarantees are given for the shape of the cake:\n- The cake has a $180^\\circ$ rotational symmetry.\n- The points are given in counterclockwise order.\n- No three consecutive points are collinear.\n- The shape is simple (no segments intersect and only consecutive segments touch at their ends).", "outputFormat": "Output two different points on the desired line as $x_1/c_1$ $y_1/d_1$ $x_2/c_2$ $y_2/d_2$, where $|x_i|$, $|y_i|$, $|c_i|$ and $|d_i|$ are integers and at most $10^9$, and $x_i/c_i$} is the first coordinate of point $i$ and $y_i/d_i$ is the second ($1\\leq i\\leq2$). If the denominator of a fraction is $1$ you may output only the numerator. Fractions do not have to be reduced. If there is no such line, output \"$\\texttt{impossible}$\" instead.\n\nIt can be shown that if there is a line as desired, it is possible to represent it in the given format.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2024] Fair Fruitcake Fragmenting", "background": "", "description": "Frida's birthday is just coming up, and as her best friend, you obviously baked a cake for her.\nSince you know that Frida loves rotational symmetry, you thought to bake a cake that\nlooks the same from above when rotated by $180^\\circ$.\nOf course, you could have simply baked a boring round cake, but without a perfectly round cake tin, this sounds easier than done.\nTherefore, you decided to bake a cake whose shape can be described by straight line segments.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j4oo5c4y.png)\n\n:::align{center}\n\nFigure F.1: Visualization of Sample Input 2. The swirly cake looking like an S can be cut into the red and blue part with a single cut.\n\n:::\n\nHowever, after you are done with your cake, you notice that you also want to cut the cake into two equal pieces, one for Frida and one for yourself.\nMore precisely, you wonder if it is possible to cut the cake along an infinite line such that it splits into exactly two\nparts of equal weight.\nYou can assume that the cake has uniform density and height.", "inputFormat": "The input consists of:\n- One line containing an *even* integer $n$ ($4 \\leq n\\leq 10^5$), the number of points needed to describe the cake's shape.\n- $n$ lines, each containing two integers $x$, $y$ ($0\\leq x,y \\leq 10^6$), the $x$ and $y$ coordinates of a point on the border of the cake's shape.\n\nThe following additional guarantees are given for the shape of the cake:\n- The cake has a $180^\\circ$ rotational symmetry.\n- The points are given in counterclockwise order.\n- No three consecutive points are collinear.\n- The shape is simple (no segments intersect and only consecutive segments touch at their ends).", "outputFormat": "Output two different points on the desired line as $x_1/c_1$ $y_1/d_1$ $x_2/c_2$ $y_2/d_2$, where $|x_i|$, $|y_i|$, $|c_i|$ and $|d_i|$ are integers and at most $10^9$, and $x_i/c_i$} is the first coordinate of point $i$ and $y_i/d_i$ is the second ($1\\leq i\\leq2$). If the denominator of a fraction is $1$ you may output only the numerator. Fractions do not have to be reduced. If there is no such line, output \"$\\texttt{impossible}$\" instead.\n\nIt can be shown that if there is a line as desired, it is possible to represent it in the given format.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2024] Fair Fruitcake Fragmenting", "background": "", "description": "Frida 的生日快到了，作为她最好的朋友，你当然为她烤了一个蛋糕。\n你知道 Frida 喜欢旋转对称，所以你打算烤一个从上方看起来在旋转 $180^\\circ$ 后依然相同的蛋糕。\n当然，你本可以简单地烤一个普通的圆形蛋糕，但没有一个完美的圆形蛋糕模具，这听起来比做起来要容易。\n因此，你决定烤一个可以用直线段描述形状的蛋糕。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j4oo5c4y.png)\n\n:::align{center}\n\n图 F.1：样例输入 2 的可视化。像 S 形的蛋糕可以用一刀分成红色和蓝色两部分。\n\n:::\n\n然而，在你完成蛋糕后，你发现你还想把蛋糕切成两等份，一份给 Frida，一份给你自己。\n更准确地说，你想知道是否可以沿着一条无限长的直线将蛋糕精确地分成两部分，每部分的重量相等。\n你可以假设蛋糕的密度和高度都是均匀的。", "inputFormat": "输入包括：\n- 一行包含一个*偶数*整数 $n$（$4 \\leq n \\leq 10^5$），表示描述蛋糕形状所需的点的数量。\n- 接下来的 $n$ 行，每行包含两个整数 $x$、$y$（$0 \\leq x, y \\leq 10^6$），表示蛋糕边界上一点的 $x$ 和 $y$ 坐标。\n\n关于蛋糕形状，给出以下额外保证：\n- 蛋糕具有 $180^\\circ$ 旋转对称性。\n- 点按逆时针顺序给出。\n- 任意三个连续的点不共线。\n- 形状是简单多边形（没有线段相交，只有相邻线段在端点处相接）。", "outputFormat": "输出所需直线上的两个不同点，格式为 $x_1/c_1$ $y_1/d_1$ $x_2/c_2$ $y_2/d_2$，其中 $|x_i|$、$|y_i|$、$|c_i|$ 和 $|d_i|$ 均为整数且不超过 $10^9$，$x_i/c_i$ 表示第 $i$ 个点的第一个坐标，$y_i/d_i$ 表示第二个坐标（$1 \\leq i \\leq 2$）。如果某个分数的分母为 $1$，你可以只输出分子。分数不需要约分。如果不存在这样的直线，输出“impossible”。\n\n可以证明，如果存在所需的直线，则一定可以用上述格式表示。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13722", "type": "P", "difficulty": 5, "samples": [["3 5", "yes\nUUXUU\nUXXXU\nUUXUU"], ["2 10", "yes\nLLLLNNNPPP\nLIIIIINNPP"], ["99 17", "no"], ["6 10", "yes\nIPPYYYYVVV\nIPPXYLLLLV\nIPXXXFZZLV\nITWXFFFZUU\nITWWNNFZZU\nTTTWWNNNUU"], ["1 5", "yes\nIIIII"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "Special Judge", "构造", "ICPC"], "title": "[GCPC 2024] Geometric Gridlock", "background": "", "description": "*Pentominous* is a grid logic puzzle based on the twelve pentominoes. A pentomino is a polygon formed by connecting five equal-sized squares edge to edge.\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dwgeqnjb.png)\n\nFigure G.1: The twelve pentominoes (up to mirroring and rotations) and their names.\n:::\n\nThe goal of this puzzle is to divide a grid into regions of size $5$ (that is, pentominoes), so that no two regions that share a side have the same shape.\nYou are allowed to rotate and mirror the pentominoes, but such rotations and reflections count as the same shape.\nThe twelve possible shapes can be seen in Figure G.1.\n\nIn a normal *Pentominous* puzzle, the player is given some pre-filled cells, for which the shape of their region is already predetermined.\nIn this problem, you are working with a completely blank grid of dimensions $h\\times w$, and your task is to create any valid arrangement of pentominoes.", "inputFormat": "The input consists of:\n- One line with two integers $h$ and $w$ ($1 \\le h,w \\le 100$), the height and width of the grid.", "outputFormat": "If there is no valid $h\\times w$ *Pentominous* grid, output \"$\\texttt{no}$\".\n  Otherwise, output \"$\\texttt{yes}$\", followed by $h$ lines of width $w$ each, a possible grid using the letters from Figure G.1.\n  If there is more than one solution, any one of them will be accepted.", "hint": ":::align{center}\n\n| ![](https://cdn.luogu.com.cn/upload/image_hosting/xzo3g55c.png) | ![](https://cdn.luogu.com.cn/upload/image_hosting/arn3qmip.png) | ![](https://cdn.luogu.com.cn/upload/image_hosting/e6kfe7wa.png) |\n|:-:|:-:|:-:|\n| Illustration of Sample Output 1. | Illustration of Sample Output 2. | Illustration of Sample Output 4. |\n\n\n| [![](https://cdn.luogu.com.cn/upload/image_hosting/5c9kokf9.png)](https://puzz.link/p?pentominous/10/10/s9967k09h77j4o4o1h157jbjbj00h87k30a8s) | [![](https://cdn.luogu.com.cn/upload/image_hosting/dz1q9nmw.png)](https://puzz.link/p?pentominous/10/10/s5558k95h78j4o5o3o4o42h61k88a6s) |\n|:-:|:-:|\n| [![](https://cdn.luogu.com.cn/upload/image_hosting/ung8r57e.png)](https://puzz.link/p?pentominous/10/10/r44a44k4j4j7j4j44454k4o3o4o4i47r) | [![](https://cdn.luogu.com.cn/upload/image_hosting/8ltajbb5.png)](https://puzz.link/p?pentominous/10/10/s3327k22h71j1o7l1h1l1h2o21h11k7337s) |\n\n\nExample *Pentominous* puzzles for you to try after the contest.\n\n:::\n\n", "locale": "en", "translations": {"en": {"title": "[GCPC 2024] Geometric Gridlock", "background": "", "description": "*Pentominous* is a grid logic puzzle based on the twelve pentominoes. A pentomino is a polygon formed by connecting five equal-sized squares edge to edge.\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dwgeqnjb.png)\n\nFigure G.1: The twelve pentominoes (up to mirroring and rotations) and their names.\n:::\n\nThe goal of this puzzle is to divide a grid into regions of size $5$ (that is, pentominoes), so that no two regions that share a side have the same shape.\nYou are allowed to rotate and mirror the pentominoes, but such rotations and reflections count as the same shape.\nThe twelve possible shapes can be seen in Figure G.1.\n\nIn a normal *Pentominous* puzzle, the player is given some pre-filled cells, for which the shape of their region is already predetermined.\nIn this problem, you are working with a completely blank grid of dimensions $h\\times w$, and your task is to create any valid arrangement of pentominoes.", "inputFormat": "The input consists of:\n- One line with two integers $h$ and $w$ ($1 \\le h,w \\le 100$), the height and width of the grid.", "outputFormat": "If there is no valid $h\\times w$ *Pentominous* grid, output \"$\\texttt{no}$\".\n  Otherwise, output \"$\\texttt{yes}$\", followed by $h$ lines of width $w$ each, a possible grid using the letters from Figure G.1.\n  If there is more than one solution, any one of them will be accepted.", "hint": ":::align{center}\n\n| ![](https://cdn.luogu.com.cn/upload/image_hosting/xzo3g55c.png) | ![](https://cdn.luogu.com.cn/upload/image_hosting/arn3qmip.png) | ![](https://cdn.luogu.com.cn/upload/image_hosting/e6kfe7wa.png) |\n|:-:|:-:|:-:|\n| Illustration of Sample Output 1. | Illustration of Sample Output 2. | Illustration of Sample Output 4. |\n\n\n| [![](https://cdn.luogu.com.cn/upload/image_hosting/5c9kokf9.png)](https://puzz.link/p?pentominous/10/10/s9967k09h77j4o4o1h157jbjbj00h87k30a8s) | [![](https://cdn.luogu.com.cn/upload/image_hosting/dz1q9nmw.png)](https://puzz.link/p?pentominous/10/10/s5558k95h78j4o5o3o4o42h61k88a6s) |\n|:-:|:-:|\n| [![](https://cdn.luogu.com.cn/upload/image_hosting/ung8r57e.png)](https://puzz.link/p?pentominous/10/10/r44a44k4j4j7j4j44454k4o3o4o4i47r) | [![](https://cdn.luogu.com.cn/upload/image_hosting/8ltajbb5.png)](https://puzz.link/p?pentominous/10/10/s3327k22h71j1o7l1h1l1h2o21h11k7337s) |\n\n\nExample *Pentominous* puzzles for you to try after the contest.\n\n:::\n\n", "locale": "en"}, "zh-CN": {"title": "[GCPC 2024] Geometric Gridlock", "background": null, "description": "*Pentominous* 是一个基于十二种五连块（pentomino）的网格逻辑谜题。五连块是由五个大小相等的正方形通过边相连组成的多边形。\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dwgeqnjb.png)\n\n图 G.1：十二种五连块（考虑镜像和旋转后唯一）及其名称。\n:::\n\n本谜题的目标是将一个网格划分为若干个大小为 $5$ 的区域（即五连块），使得任意两个有公共边的区域形状不同。\n你可以旋转和翻转五连块，但这些旋转和翻转都算作同一种形状。\n十二种可能的形状如图 G.1 所示。\n\n在普通的 *Pentominous* 谜题中，玩家会被给出一些预填充的格子，这些格子的区域形状已经确定。\n而在本题中，你需要处理一个完全空白、尺寸为 $h\\times w$ 的网格，你的任务是构造任意一种合法的五连块划分方案。", "inputFormat": "输入包含一行，包含两个整数 $h$ 和 $w$（$1 \\le h,w \\le 100$），表示网格的高度和宽度。", "outputFormat": "如果不存在合法的 $h\\times w$ *Pentominous* 网格，输出“$\\texttt{no}$”。\n否则，输出“$\\texttt{yes}$”，接下来输出 $h$ 行，每行 $w$ 个字符，表示一种可能的五连块划分方案，使用图 G.1 中的字母表示。\n如果有多种方案，任意一种都可以。", "hint": ":::align{center}\n\n| ![](https://cdn.luogu.com.cn/upload/image_hosting/xzo3g55c.png) | ![](https://cdn.luogu.com.cn/upload/image_hosting/arn3qmip.png) | ![](https://cdn.luogu.com.cn/upload/image_hosting/e6kfe7wa.png) |\n|:-:|:-:|:-:|\n| 样例输出 1 的示意图。 | 样例输出 2 的示意图。 | 样例输出 4 的示意图。 |\n\n\n| [![](https://cdn.luogu.com.cn/upload/image_hosting/5c9kokf9.png)](https://puzz.link/p?pentominous/10/10/s9967k09h77j4o4o1h157jbjbj00h87k30a8s) | [![](https://cdn.luogu.com.cn/upload/image_hosting/dz1q9nmw.png)](https://puzz.link/p?pentominous/10/10/s5558k95h78j4o5o3o4o42h61k88a6s) |\n|:-:|:-:|\n| [![](https://cdn.luogu.com.cn/upload/image_hosting/ung8r57e.png)](https://puzz.link/p?pentominous/10/10/r44a44k4j4j7j4j44454k4o3o4o4i47r) | [![](https://cdn.luogu.com.cn/upload/image_hosting/8ltajbb5.png)](https://puzz.link/p?pentominous/10/10/s3327k22h71j1o7l1h1l1h2o21h11k7337s) |\n\n\n比赛结束后你可以尝试的 *Pentominous* 谜题示例。\n\n:::\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13723", "type": "P", "difficulty": 6, "samples": [["3 1 4\nhpi\nfau\nkit\n1 3\nkit destroys hpi at wintercontest\ngcpc is great\nteam moshpit from hpi beats kit teams\nwhats the abbreviation for university of erlangen nuremberg", "yes\nyes\nno\nyes"], ["6 3 5\nuds\ncu\ntum\nrwth\nuni ulm\nuni\n4 1\n2 5\n1 3\nlast gcpc rwth had a team in top ten two places behind tum\nwho is team debuilding from constructor university bremen\ntop ten teams last year are from kit cu uds hpi tum and rwth\nuni ulm cu uni ulm\nsunday alright lets go", "no\nyes\nno\nno\nyes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "哈希 hashing", "AC 自动机", "ICPC"], "title": "[GCPC 2024] Headline Heat", "background": "", "description": "The German ICPC scene is widely considered one of the most competitive.\nAt least, that's what we tell our students.\nCountless rivalries form a complex web of envy, despair, glory, and triumph woven around and manifested in the unrelenting echoes of two scoreboards -- Winter Contest and GCPC.\nWhile generations of participants tend to forget the grudges of their predecessors, we coaches, acting as timeless beacons of continuity, preserve these petty conflicts between long forgotten teams.\nStriving for perfect balance, we express our dedication to our coaching duties in a furious outcry on social media against every unfair news article.\nThat is, a coach gets mad if a news article is published that contains a rival university name more often than their own.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/81caxzmt.png)\n\nTop 10 scoreboard of Winter Contest 2024.\n:::\n\n\nTo smoothen the waves of conflict in this ocean of rage, a newly appointed authority is tasked with proofreading media coverage of GCPC and Winter Contest to prevent uneven coverage.", "inputFormat": "The input consists of:\n- One line with the number of universities $n$, rivalries $m$, and articles $k$. \\\\\n    ($1\\leq n,m,k\\leq 10^5$)\n- $n$ lines containing the name of a university $p_i$.\n- $m$ lines containing two integers $u,v$, meaning that universities $u$ and $v$ are rivals. \\\\\n    ($1\\leq u,v \\leq n, u\\neq v$)\n- $k$ lines containing a news article $t_i$.\n\nIf a university $u$ is a rival of university $v$, then $v$ is also a rival of $u$. Moreover, there are no duplicate rivalries.\n\nNames and articles are strings of lowercase Latin letters and spaces.\nThe first and last character of a name or article are never a space.\nNames can overlap and be contained in other names.\n\nThe summed length of all names and articles is at most $10^6$, i.e. $\\sum_{i=1}^{n} |p_i| + \\sum_{i=1}^{k} |t_i| \\leq 10^6$.", "outputFormat": "For each article, output \"$\\texttt{no}$\" if it will draw the wrath of at least one coach and \"$\\texttt{yes}$\" otherwise.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2024] Headline Heat", "background": "", "description": "The German ICPC scene is widely considered one of the most competitive.\nAt least, that's what we tell our students.\nCountless rivalries form a complex web of envy, despair, glory, and triumph woven around and manifested in the unrelenting echoes of two scoreboards -- Winter Contest and GCPC.\nWhile generations of participants tend to forget the grudges of their predecessors, we coaches, acting as timeless beacons of continuity, preserve these petty conflicts between long forgotten teams.\nStriving for perfect balance, we express our dedication to our coaching duties in a furious outcry on social media against every unfair news article.\nThat is, a coach gets mad if a news article is published that contains a rival university name more often than their own.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/81caxzmt.png)\n\nTop 10 scoreboard of Winter Contest 2024.\n:::\n\n\nTo smoothen the waves of conflict in this ocean of rage, a newly appointed authority is tasked with proofreading media coverage of GCPC and Winter Contest to prevent uneven coverage.", "inputFormat": "The input consists of:\n- One line with the number of universities $n$, rivalries $m$, and articles $k$. \\\\\n    ($1\\leq n,m,k\\leq 10^5$)\n- $n$ lines containing the name of a university $p_i$.\n- $m$ lines containing two integers $u,v$, meaning that universities $u$ and $v$ are rivals. \\\\\n    ($1\\leq u,v \\leq n, u\\neq v$)\n- $k$ lines containing a news article $t_i$.\n\nIf a university $u$ is a rival of university $v$, then $v$ is also a rival of $u$. Moreover, there are no duplicate rivalries.\n\nNames and articles are strings of lowercase Latin letters and spaces.\nThe first and last character of a name or article are never a space.\nNames can overlap and be contained in other names.\n\nThe summed length of all names and articles is at most $10^6$, i.e. $\\sum_{i=1}^{n} |p_i| + \\sum_{i=1}^{k} |t_i| \\leq 10^6$.", "outputFormat": "For each article, output \"$\\texttt{no}$\" if it will draw the wrath of at least one coach and \"$\\texttt{yes}$\" otherwise.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2024] Headline Heat", "background": null, "description": "德国 ICPC 场景被广泛认为是最具竞争力的之一。\n至少，这是我们对学生们说的。\n无数的竞争关系交织成一张复杂的网络，充满了嫉妒、绝望、荣耀与胜利，这些都体现在两块不断变换的记分牌——Winter Contest 和 GCPC 上。\n尽管一代又一代的参赛者往往会忘记前辈们的恩怨，但我们教练，作为永恒的连续性灯塔，保留着那些早已被遗忘队伍之间的琐碎冲突。\n为了追求完美的平衡，我们以愤怒的呐喊在社交媒体上抗议每一篇不公正的新闻报道，表达我们对教练职责的奉献。\n也就是说，如果一篇新闻报道中出现了某所大学的对手大学名称的次数多于该大学本身的名称次数，那么该大学的教练就会生气。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/81caxzmt.png)\n\nWinter Contest 2024 前十名记分牌。\n:::\n\n为了平息这片愤怒之海中的波澜，一位新任权威被指派负责校对 GCPC 和 Winter Contest 的媒体报道，以防止报道不均。", "inputFormat": "输入包括：\n- 一行，包含大学数量 $n$、竞争关系数量 $m$ 和新闻报道数量 $k$。\\\\\n    ($1\\leq n,m,k\\leq 10^5$)\n- 接下来 $n$ 行，每行包含一所大学的名称 $p_i$。\n- 接下来 $m$ 行，每行包含两个整数 $u,v$，表示大学 $u$ 和大学 $v$ 是竞争对手。\\\\\n    ($1\\leq u,v \\leq n, u\\neq v$)\n- 接下来 $k$ 行，每行包含一篇新闻报道 $t_i$。\n\n如果大学 $u$ 是大学 $v$ 的对手，则 $v$ 也是 $u$ 的对手。此外，没有重复的竞争关系。\n\n大学名称和新闻报道均由小写拉丁字母和空格组成。\n名称和报道的首尾字符都不是空格。\n名称之间可能有重叠，也可能包含于其他名称之中。\n\n所有名称和报道的总长度不超过 $10^6$，即 $\\sum_{i=1}^{n} |p_i| + \\sum_{i=1}^{k} |t_i| \\leq 10^6$。", "outputFormat": "对于每篇新闻报道，如果它会激怒至少一位教练，则输出“no”，否则输出“yes”。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13724", "type": "P", "difficulty": 2, "samples": [["4 10\n! 2 7 1\n? 9\n? 7\n? 6", "0\n0\n1"], ["7 10\n! 2 6 1\n! 3 8 2\n! 5 2 3\n? 6\n! 5 5 4\n? 8\n? 9", "1\n0\n2"], ["6 12\n! 1 7 1\n! 7 3 2\n? 6\n? 7\n? 8\n? 10", "0\n1\n0\n0"], ["6 11\n! 1 6 1\n? 6\n! 5 7 4\n? 6\n! 6 3 2\n? 6", "0\n0\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "2024", "ICPC"], "title": "[GCPC 2024] Interference", "background": "", "description": "Physics can be so much fun!\nYesterday, your teacher explained how interference works: If you have two waves, their heights add up over the whole waves' length!\nSo if both waves have a peak, the resulting peak will be even higher.\nLikewise, if both waves have a wave trough below the water surface, the resulting wave has a trough that will be even further below.\nTechnically, a wave's height is called amplitude and the distance between two wave peaks is called wavelength.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/vaufr6oi.png)\n\nFigure I.1: Interference of three waves in Sample Input 2. The black dots represent the resulting wave’s height.\n:::\n\nToday, your physics teacher describes the setup of an experiment she is about to perform.\nShe will create stationary waves in a one-dimensional container of water.\nDue to her superior control over physical elements, all waves will have a precisely controlled amplitude and will only be created in an interval of given length.  \nThe wavelength of each wave is always $4$ and the first positive peak will always be at the first index of the interval.\nWe only measure the wave's amplitude at integer points.\nFor example, a wave with amplitude $2$ and length $9$ can be described as $\\texttt{2 0 -2 0 2 0 -2 0 2}$.\nIf there is no wave at a point, the amplitude is $0$.\nYour task is to predict how high the resulting wave will be at given points in the container taking into account all the waves that were created up to that point.", "inputFormat": "The input consists of:\n- One line with two integers $n$ and $w$ ($1 \\le n \\le 4\\,000$, $1 \\le w \\le 10^{9}$), the number of lines and the width of the container.\n- $n$ lines, each containing either a wave description or a prediction task:\n  - \"$\\texttt{!}~p~\\ell~a$\", a wave description with starting position $p$, length $\\ell$ $(1 \\le p, \\ell \\le w)$, and amplitude $a$ $(1 \\le a \\le 10^9)$. It is guaranteed that $p+\\ell - 1 \\le w$.\n  - \"$\\texttt{?}~p$\", a prediction task for the resulting wave at position $p$ ($1 \\le p \\le w$).\n\n\nSee Figure I.1 for a partial visualization of Sample 2.", "outputFormat": "For each prediction task, output a line with a single integer, the height of the wave resulting from all former described waves at the requested position.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2024] Interference", "background": "", "description": "Physics can be so much fun!\nYesterday, your teacher explained how interference works: If you have two waves, their heights add up over the whole waves' length!\nSo if both waves have a peak, the resulting peak will be even higher.\nLikewise, if both waves have a wave trough below the water surface, the resulting wave has a trough that will be even further below.\nTechnically, a wave's height is called amplitude and the distance between two wave peaks is called wavelength.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/vaufr6oi.png)\n\nFigure I.1: Interference of three waves in Sample Input 2. The black dots represent the resulting wave’s height.\n:::\n\nToday, your physics teacher describes the setup of an experiment she is about to perform.\nShe will create stationary waves in a one-dimensional container of water.\nDue to her superior control over physical elements, all waves will have a precisely controlled amplitude and will only be created in an interval of given length.  \nThe wavelength of each wave is always $4$ and the first positive peak will always be at the first index of the interval.\nWe only measure the wave's amplitude at integer points.\nFor example, a wave with amplitude $2$ and length $9$ can be described as $\\texttt{2 0 -2 0 2 0 -2 0 2}$.\nIf there is no wave at a point, the amplitude is $0$.\nYour task is to predict how high the resulting wave will be at given points in the container taking into account all the waves that were created up to that point.", "inputFormat": "The input consists of:\n- One line with two integers $n$ and $w$ ($1 \\le n \\le 4\\,000$, $1 \\le w \\le 10^{9}$), the number of lines and the width of the container.\n- $n$ lines, each containing either a wave description or a prediction task:\n  - \"$\\texttt{!}~p~\\ell~a$\", a wave description with starting position $p$, length $\\ell$ $(1 \\le p, \\ell \\le w)$, and amplitude $a$ $(1 \\le a \\le 10^9)$. It is guaranteed that $p+\\ell - 1 \\le w$.\n  - \"$\\texttt{?}~p$\", a prediction task for the resulting wave at position $p$ ($1 \\le p \\le w$).\n\n\nSee Figure I.1 for a partial visualization of Sample 2.", "outputFormat": "For each prediction task, output a line with a single integer, the height of the wave resulting from all former described waves at the requested position.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2024] Interference", "background": null, "description": "物理可以非常有趣！\n昨天，你的老师讲解了干涉现象的原理：如果你有两列波，它们在整个波长范围内的高度会相加！\n因此，如果两列波都在波峰处，合成后的波峰会更高。\n同样地，如果两列波都在水面以下的波谷处，合成后的波谷会更低。\n从技术上讲，波的高度被称为振幅，两波峰之间的距离被称为波长。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/vaufr6oi.png)\n\n图 I.1：样例输入 2 中三列波的干涉效果。黑点表示合成波在各点的高度。\n:::\n\n今天，你的物理老师描述了她即将进行的一个实验的设置。\n她将在一维水槽中制造驻波。\n由于她对物理元素的精确控制，所有波都具有精确控制的振幅，并且只会在给定长度的区间内产生。\n每列波的波长始终为 $4$，且第一个正波峰总是在区间的第一个位置。\n我们只在整数点上测量波的振幅。\n例如，振幅为 $2$，长度为 $9$ 的一列波可以表示为 $\\texttt{2\\ 0\\ -2\\ 0\\ 2\\ 0\\ -2\\ 0\\ 2}$。\n如果某个点没有波，则振幅为 $0$。\n你的任务是预测在给定位置处，考虑到之前所有产生的波后，合成波的高度。", "inputFormat": "输入包含：\n- 一行两个整数 $n$ 和 $w$（$1 \\le n \\le 4000$，$1 \\le w \\le 10^9$），分别表示操作数和水槽的宽度。\n- 接下来 $n$ 行，每行是波的描述或预测任务：\n  - “$\\texttt{!}\\ p\\ \\ell\\ a$”，表示一列波的描述，起始位置为 $p$，长度为 $\\ell$（$1 \\le p, \\ell \\le w$），振幅为 $a$（$1 \\le a \\le 10^9$）。保证 $p+\\ell-1 \\le w$。\n  - “$\\texttt{?}\\ p$”，表示对位置 $p$（$1 \\le p \\le w$）的预测任务。\n\n参见图 I.1 以部分可视化样例 2。", "outputFormat": "对于每个预测任务，输出一行一个整数，表示在所询问位置处，所有已描述波的合成波的高度。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13725", "type": "P", "difficulty": 6, "samples": [["5\n2 -1\n3 2\n3 1\n1 -3\n1 1", "no\n3 2 4 5\n2 1 3"], ["4\n2 -1\n3 2\n3 1\n1 -3", "yes"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "Special Judge", "ICPC", "折半搜索 meet in the middle"], "title": "[GCPC 2024] Jigsaw Present", "background": "", "description": "Julia is preparing a present for James. She will give him some of her $n$ jigsaw puzzles, where puzzle $i$ ($1 \\leq i \\leq n$) consists of $x_i$ pieces and has a difficulty $y_i$ (can be negative if the puzzle is very easy).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/okr7isdn.png)\n\nJames is already very excited and would like to know in advance what he will get. Therefore, he used some of his criminal energy to gather information about the gift. In particular, he has managed to obtain an encrypted message containing the total difficulty and total number of pieces of all the puzzles that he will receive. \n\nNow he wonders whether it is worth spending some more time to decrypt the message. After all, it might be that this information is not enough to uniquely determine his gift. Since he was never good at these computer thingies, James asked for your assistance. Help him find out whether it is worth decrypting the message or not. If the answer is negative, you have to find two distinct gifts that result in the same encrypted message.\n", "inputFormat": "The input consists of\n- One line with an integer $n$ ($2 \\leq n \\leq 4\\,096$), the number of puzzles that Julia owns.\n- $n$ lines, the $i$th of which contains two integers $x_i$ and $y_i$ ($1 \\leq x_i \\leq 4\\,096$, $\\left|y_i\\right| \\leq 4\\,096$), the number of pieces of puzzle $i$ and the difficulty of puzzle $i$.", "outputFormat": "If James can uniquely determine his gift, then print \"$\\texttt{yes}$\". Otherwise, you should print \"$\\texttt{no}$\" followed by two lines,\n  where each line contains the description of a present. The description of a present should start with an\n  integer $k$, the number of puzzles, followed by $k$ distinct integers, the indices of the puzzles. \n\n  Note that the two presents have to be distinct, meaning that there should be at least one puzzle that is contained \n  in one present but not the other.\n\n  If there are multiple presents that result in the same encrypted message, you can print any of them.", "hint": "In the first sample case, the first present consists of puzzles $2$, $4$, and $5$. The total number of pieces is $3 + 1 + 1 = 5$ and the total difficulty is $2 + (-3) + 1 = 0$. \nThe second present consists of puzzles $1$ and $3$. The total number of pieces is $2 + 3 = 5$ and the total difficulty is $(-1) + 1 = 0$.\nThus, if James only knows the total number of pieces and the total difficulty, he cannot recover his present. So it is not worth to decode the message.\n\nIn the second sample case, no matter what gift Julia prepares, if James knows the total number of pieces and the total difficulty, he can recover his present. So he should decode the message.", "locale": "en", "translations": {"en": {"title": "[GCPC 2024] Jigsaw Present", "background": "", "description": "Julia is preparing a present for James. She will give him some of her $n$ jigsaw puzzles, where puzzle $i$ ($1 \\leq i \\leq n$) consists of $x_i$ pieces and has a difficulty $y_i$ (can be negative if the puzzle is very easy).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/okr7isdn.png)\n\nJames is already very excited and would like to know in advance what he will get. Therefore, he used some of his criminal energy to gather information about the gift. In particular, he has managed to obtain an encrypted message containing the total difficulty and total number of pieces of all the puzzles that he will receive. \n\nNow he wonders whether it is worth spending some more time to decrypt the message. After all, it might be that this information is not enough to uniquely determine his gift. Since he was never good at these computer thingies, James asked for your assistance. Help him find out whether it is worth decrypting the message or not. If the answer is negative, you have to find two distinct gifts that result in the same encrypted message.\n", "inputFormat": "The input consists of\n- One line with an integer $n$ ($2 \\leq n \\leq 4\\,096$), the number of puzzles that Julia owns.\n- $n$ lines, the $i$th of which contains two integers $x_i$ and $y_i$ ($1 \\leq x_i \\leq 4\\,096$, $\\left|y_i\\right| \\leq 4\\,096$), the number of pieces of puzzle $i$ and the difficulty of puzzle $i$.", "outputFormat": "If James can uniquely determine his gift, then print \"$\\texttt{yes}$\". Otherwise, you should print \"$\\texttt{no}$\" followed by two lines,\n  where each line contains the description of a present. The description of a present should start with an\n  integer $k$, the number of puzzles, followed by $k$ distinct integers, the indices of the puzzles. \n\n  Note that the two presents have to be distinct, meaning that there should be at least one puzzle that is contained \n  in one present but not the other.\n\n  If there are multiple presents that result in the same encrypted message, you can print any of them.", "hint": "In the first sample case, the first present consists of puzzles $2$, $4$, and $5$. The total number of pieces is $3 + 1 + 1 = 5$ and the total difficulty is $2 + (-3) + 1 = 0$. \nThe second present consists of puzzles $1$ and $3$. The total number of pieces is $2 + 3 = 5$ and the total difficulty is $(-1) + 1 = 0$.\nThus, if James only knows the total number of pieces and the total difficulty, he cannot recover his present. So it is not worth to decode the message.\n\nIn the second sample case, no matter what gift Julia prepares, if James knows the total number of pieces and the total difficulty, he can recover his present. So he should decode the message.", "locale": "en"}, "zh-CN": {"title": "[GCPC 2024] Jigsaw Present", "background": null, "description": "Julia 正在为 James 准备一份礼物。她会从自己拥有的 $n$ 个拼图中选出一些送给他，其中第 $i$ 个拼图（$1 \\leq i \\leq n$）包含 $x_i$ 块拼图，并且难度为 $y_i$（如果拼图非常简单，$y_i$ 可以为负数）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/okr7isdn.png)\n\nJames 已经非常激动，并且想提前知道自己会收到什么。因此，他动用了一些“犯罪天赋”收集到了关于礼物的信息。具体来说，他设法获得了一条加密消息，内容是他将收到的所有拼图的总难度和总块数。\n\n现在他想知道，是否值得花更多时间去解密这条消息。毕竟，这些信息可能不足以唯一确定他的礼物。由于他对计算机一窍不通，James 向你寻求帮助。请你帮他判断是否值得解密这条消息。如果不能唯一确定礼物，你还需要找出两种不同的礼物，它们对应的加密消息是相同的。", "inputFormat": "输入包含：\n- 一行一个整数 $n$（$2 \\leq n \\leq 4096$），表示 Julia 拥有的拼图数量。\n- 接下来 $n$ 行，每行两个整数 $x_i$ 和 $y_i$（$1 \\leq x_i \\leq 4096$，$|y_i| \\leq 4096$），分别表示第 $i$ 个拼图的块数和难度。", "outputFormat": "如果 James 能唯一确定他的礼物，则输出“$\\texttt{yes}$”。否则，输出“$\\texttt{no}$”，并在接下来的两行中分别描述两份不同的礼物。每份礼物的描述应以一个整数 $k$ 开头，表示拼图数量，后跟 $k$ 个不同的整数，表示拼图的编号。\n\n注意，这两份礼物必须不同，即至少有一个拼图只在其中一份礼物中出现。\n\n如果存在多组拼图组合满足条件，你可以输出任意一组。", "hint": "在第一个样例中，第一份礼物包含拼图 $2$、$4$ 和 $5$。总块数为 $3 + 1 + 1 = 5$，总难度为 $2 + (-3) + 1 = 0$。第二份礼物包含拼图 $1$ 和 $3$。总块数为 $2 + 3 = 5$，总难度为 $(-1) + 1 = 0$。因此，如果 James 只知道总块数和总难度，他无法确定自己的礼物，所以不值得解密消息。\n\n在第二个样例中，无论 Julia 如何准备礼物，只要 James 知道总块数和总难度，他都能确定自己的礼物，所以值得解密消息。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13726", "type": "P", "difficulty": 2, "samples": [["bbq\nh", "pdd"], ["bbq\nv", "ppd"], ["bbq\nr", "bqq"], ["ppbddbq\nhvrhv", "bqppqdd"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "字符串", "2024", "ICPC"], "title": "[GCPC 2024] Kitten of Chaos", "background": "", "description": "Karen has a beautiful precious glass object on the shelf in her living room.\nUnfortunately, her cat Klaus does not like it when there is stuff on his favourite shelf.\nEverything that is not bolted or glued in place, he will gradually push over the edge while looking Karen straight in the eyes.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/oh6p314l.png)\n\nKlaus, 10 seconds before an event that was luckily covered by Karen's insurance.\n\n:::\n\nNow, Klaus' paw slowly executes his diabolical deed. \nHis cute fluffy face radiates inadvertent innocence.\nKnowing that any intervention would only delay the inevitable, Karen wonders what will happen to the string her sister Kim wrote on the precious glass object.\nAfter all, it took Kim a whole week to gather all the $\\texttt{bdpq}$ letters that make up the string.\n\nCan you describe to Karen what the string will look like from her point of view while it tumbles towards destruction?\n\nWhile falling off the shelf, Karen's precious glass object is subject to the following transformations, described as seen when looking at the object from the front.\n\n- $\\texttt{h}$: horizontal flip, e.g. $\\texttt{bbq}$ becomes $\\texttt{pdd}$\n- $\\texttt{v}$: vertical flip, e.g. $\\texttt{bbq}$ becomes $\\texttt{ppd}$\n- $\\texttt{r}$: 180-degree rotation, e.g. $\\texttt{bbq}$ becomes $\\texttt{bqq}$\n\n\nNo flips along or rotations about any other axes are possible.", "inputFormat": "The input consists of:\n- One line with a string $s$ consisting of the letters $\\texttt{bdpq}$ ($1 \\le |s| \\le 5\\cdot 10^5$), the string printed on the glass object as seen at the start of the fall.\n- One line with a string $t$ consisting of the letters $\\texttt{hvr}$ ($1 \\le |t| \\le 5\\cdot 10^5$) giving the sequence of transformations in the order that they occur during the fall.", "outputFormat": "Output the string that can be seen at the moment the glass object touches the ground and just before it shatters into pieces.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2024] Kitten of Chaos", "background": "", "description": "Karen has a beautiful precious glass object on the shelf in her living room.\nUnfortunately, her cat Klaus does not like it when there is stuff on his favourite shelf.\nEverything that is not bolted or glued in place, he will gradually push over the edge while looking Karen straight in the eyes.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/oh6p314l.png)\n\nKlaus, 10 seconds before an event that was luckily covered by Karen's insurance.\n\n:::\n\nNow, Klaus' paw slowly executes his diabolical deed. \nHis cute fluffy face radiates inadvertent innocence.\nKnowing that any intervention would only delay the inevitable, Karen wonders what will happen to the string her sister Kim wrote on the precious glass object.\nAfter all, it took Kim a whole week to gather all the $\\texttt{bdpq}$ letters that make up the string.\n\nCan you describe to Karen what the string will look like from her point of view while it tumbles towards destruction?\n\nWhile falling off the shelf, Karen's precious glass object is subject to the following transformations, described as seen when looking at the object from the front.\n\n- $\\texttt{h}$: horizontal flip, e.g. $\\texttt{bbq}$ becomes $\\texttt{pdd}$\n- $\\texttt{v}$: vertical flip, e.g. $\\texttt{bbq}$ becomes $\\texttt{ppd}$\n- $\\texttt{r}$: 180-degree rotation, e.g. $\\texttt{bbq}$ becomes $\\texttt{bqq}$\n\n\nNo flips along or rotations about any other axes are possible.", "inputFormat": "The input consists of:\n- One line with a string $s$ consisting of the letters $\\texttt{bdpq}$ ($1 \\le |s| \\le 5\\cdot 10^5$), the string printed on the glass object as seen at the start of the fall.\n- One line with a string $t$ consisting of the letters $\\texttt{hvr}$ ($1 \\le |t| \\le 5\\cdot 10^5$) giving the sequence of transformations in the order that they occur during the fall.", "outputFormat": "Output the string that can be seen at the moment the glass object touches the ground and just before it shatters into pieces.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2024] Kitten of Chaos", "background": null, "description": "Karen 在她客厅的架子上放着一个漂亮而珍贵的玻璃物品。不幸的是，她的猫 Klaus 并不喜欢在他最喜欢的架子上有东西。凡是没有被固定或粘住的东西，他都会一边盯着 Karen 的眼睛，一边慢慢地把它推到架子的边缘。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/oh6p314l.png)\n\nKlaus，在一场幸运地被 Karen 的保险覆盖的事件发生前的 10 秒。\n\n:::\n\n现在，Klaus 的爪子正在慢慢地实施他的恶作剧。他那可爱的毛茸茸的脸上流露出无意的无辜。Karen 知道任何干预都只能延缓不可避免的结果，她开始好奇她妹妹 Kim 写在珍贵玻璃物品上的字符串会变成什么样子。毕竟，Kim 花了一整周才收集齐所有组成该字符串的 $\\texttt{bdpq}$ 字母。\n\n你能告诉 Karen，当玻璃物品在掉落过程中，从她的视角看，这个字符串会变成什么样吗？\n\n在掉落过程中，Karen 的珍贵玻璃物品会经历以下变换（从正面观察物品时）：\n\n- $\\texttt{h}$：水平翻转，例如 $\\texttt{bbq}$ 变为 $\\texttt{pdd}$\n- $\\texttt{v}$：垂直翻转，例如 $\\texttt{bbq}$ 变为 $\\texttt{ppd}$\n- $\\texttt{r}$：旋转 $180$ 度，例如 $\\texttt{bbq}$ 变为 $\\texttt{bqq}$\n\n不会发生其他轴向的翻转或旋转。", "inputFormat": "输入包括两行：\n\n- 第一行是一个仅由字母 $\\texttt{bdpq}$ 组成的字符串 $s$（$1 \\le |s| \\le 5 \\times 10^5$），表示玻璃物品上最初看到的字符串。\n- 第二行是一个仅由字母 $\\texttt{hvr}$ 组成的字符串 $t$（$1 \\le |t| \\le 5 \\times 10^5$），表示掉落过程中依次发生的变换序列。", "outputFormat": "输出玻璃物品即将落地破碎前，从正面看到的字符串。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13727", "type": "P", "difficulty": 5, "samples": [["4\n10\n15 11 9 5 2 7 1\n120\n0 0 0 0 0 0 0\n6\n5 6 8 9 1 0 0\n1213\n295053681 137950336 87466375 956271897 344992260 31402049 988259763", "6\n0\n6\n2342454"], ["1\n3\n1 2 1 3 3 2 3", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "ICPC", "分类讨论"], "title": "[GCPC 2024] Laundry", "background": "", "description": "Every Sunday is laundry day, and there is always a huge pile of clothes waiting to be washed, which is certainly going to take you forever. \nYou are particularly annoyed by how careful you have to be when washing certain items, and how important it is that you choose an appropriate washing programme for each item. \n\n:::align{center}\n![](https://cdn.pixabay.com/photo/2018/04/02/01/14/hanging-3282769_1280.jpg)\n\nLaundry hanging to dry [Image by gregroose on Pixabay](https://pixabay.com/photos/hanging-architecture-clothesline-3282769/)\n:::\n\nFortunately, your washing machine is quite old and only supports three different washing programmes: A, B, and C.\nYou can put at most $k$ items in one load, \nand each load can be washed using one of the programmes. \n\nSome items are easy to care for, and you can put them in any load you like. \nMore delicate items must not be washed using a specific programme, but the other two are fine. \nOf course, the worst clothes are the ones for which only one programme is appropriate. \n\nYou have already sorted the items into seven piles by putting items together for which the same combination of programmes is fine, so \nyou know how many items are in each pile. \n\nWhat is the minimum number of loads you need to wash? \n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/sd620u2k.png)\n\nFigure L.1: Illustration of Sample Input 2 with an optimal solution. The figure on the left shows seven piles, one for each combination. The figure on the right shows a (possible) optimal solution, where each pile is washed in one load. The numbers on the pile represent how many items of each combination are washed with this load. In particular, the leftmost pile is washed using programme A, the two piles in the middle with programme B, and the two piles on the right with programme C. Thus, we need five loads to wash all items, which is optimal since we have 15 items in total.\n:::\n", "inputFormat": "The input starts with a line containing one integer $t$ ($1 \\leq t \\leq 10^4$), the number of test cases. Then for each test case: \n- One line with an integer $k$ ($1\\leq k\\leq 10^9$), the number of items you can put in one load.\n- One line with seven integers $c_1, \\ldots, c_7$ ($0 \\leq c_i \\leq 10^9$), the number of items for each combination of programmes. The integers are given in this order: A, B, C, AB, BC, AC, ABC. For example, $c_4$ must be washed using either programme A or programme B.  ", "outputFormat": "For each test case, output the minimum number of loads that are needed to wash all clothes.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2024] Laundry", "background": "", "description": "Every Sunday is laundry day, and there is always a huge pile of clothes waiting to be washed, which is certainly going to take you forever. \nYou are particularly annoyed by how careful you have to be when washing certain items, and how important it is that you choose an appropriate washing programme for each item. \n\n:::align{center}\n![](https://cdn.pixabay.com/photo/2018/04/02/01/14/hanging-3282769_1280.jpg)\n\nLaundry hanging to dry [Image by gregroose on Pixabay](https://pixabay.com/photos/hanging-architecture-clothesline-3282769/)\n:::\n\nFortunately, your washing machine is quite old and only supports three different washing programmes: A, B, and C.\nYou can put at most $k$ items in one load, \nand each load can be washed using one of the programmes. \n\nSome items are easy to care for, and you can put them in any load you like. \nMore delicate items must not be washed using a specific programme, but the other two are fine. \nOf course, the worst clothes are the ones for which only one programme is appropriate. \n\nYou have already sorted the items into seven piles by putting items together for which the same combination of programmes is fine, so \nyou know how many items are in each pile. \n\nWhat is the minimum number of loads you need to wash? \n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/sd620u2k.png)\n\nFigure L.1: Illustration of Sample Input 2 with an optimal solution. The figure on the left shows seven piles, one for each combination. The figure on the right shows a (possible) optimal solution, where each pile is washed in one load. The numbers on the pile represent how many items of each combination are washed with this load. In particular, the leftmost pile is washed using programme A, the two piles in the middle with programme B, and the two piles on the right with programme C. Thus, we need five loads to wash all items, which is optimal since we have 15 items in total.\n:::\n", "inputFormat": "The input starts with a line containing one integer $t$ ($1 \\leq t \\leq 10^4$), the number of test cases. Then for each test case: \n- One line with an integer $k$ ($1\\leq k\\leq 10^9$), the number of items you can put in one load.\n- One line with seven integers $c_1, \\ldots, c_7$ ($0 \\leq c_i \\leq 10^9$), the number of items for each combination of programmes. The integers are given in this order: A, B, C, AB, BC, AC, ABC. For example, $c_4$ must be washed using either programme A or programme B.  ", "outputFormat": "For each test case, output the minimum number of loads that are needed to wash all clothes.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2024] Laundry", "background": null, "description": "每个星期天都是洗衣日，总有一大堆衣服等着你去洗，这肯定会花掉你很长时间。\n你尤其讨厌那些需要特别小心清洗的衣物，并且必须为每件衣物选择合适的洗涤程序。\n\n:::align{center}\n![](https://cdn.pixabay.com/photo/2018/04/02/01/14/hanging-3282769_1280.jpg)\n\n晾晒的衣服 [图片来自 gregroose，Pixabay](https://pixabay.com/photos/hanging-architecture-clothesline-3282769/)\n:::\n\n幸运的是，你的洗衣机很老旧，只支持三种不同的洗涤程序：A、B 和 C。\n你每次最多可以在一桶中放入 $k$ 件衣物，\n每一桶只能选择其中一种洗涤程序。\n\n有些衣物很容易打理，可以随意放进任何一桶。\n更精致的衣物则不能用某一种特定的程序洗，但可以用另外两种。\n当然，最麻烦的衣物只能用一种特定的程序洗。\n\n你已经将衣物分成了七堆，每堆中的衣物都可以用相同的程序组合来清洗，因此你知道每一堆的数量。\n\n你需要计算，最少需要多少桶才能把所有衣物洗完？\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/sd620u2k.png)\n\n图 L.1：样例输入 2 的最优解示意图。左侧为七堆衣物，每堆对应一种程序组合。右侧为一种（可能的）最优解，每堆衣物都用一桶洗。每堆上的数字表示该桶中洗了多少件对应组合的衣物。特别地，最左侧的衣物用程序 A 洗，中间两堆用程序 B 洗，右侧两堆用程序 C 洗。因此总共需要五桶洗完所有衣物，这是最优的，因为总共有 15 件衣物。\n:::", "inputFormat": "输入的第一行包含一个整数 $t$（$1 \\leq t \\leq 10^4$），表示测试用例的数量。对于每个测试用例：\n- 一行包含一个整数 $k$（$1\\leq k\\leq 10^9$），表示每桶最多可放入的衣物数量。\n- 一行包含七个整数 $c_1, \\ldots, c_7$（$0 \\leq c_i \\leq 10^9$），表示每种程序组合的衣物数量。整数的顺序为：A、B、C、AB、BC、AC、ABC。例如，$c_4$ 表示必须用程序 A 或 B 洗的衣物数量。", "outputFormat": "对于每个测试用例，输出洗完所有衣物所需的最少桶数。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13728", "type": "P", "difficulty": 3, "samples": [["7\n0 1 2 3 4 5 6", "0"], ["5\n0 1 4 3 6", "4"], ["6\n0 -2 10 6 7 -1", "23"], ["4\n0 -4 -2 1", "7"], ["9\n0 23452 145043 -3423 -20 9845 435 -3 4453", "186237"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "2024", "ICPC"], "title": "[GCPC 2024] Musical Mending", "background": "", "description": "Shortly before the concert starts, you notice that your piano is completely out\nof tune! Having the ability of relative pitch, you are able to discern the\ndifference between the pitch of any piano key to the first piano key. While this\ndoes not help you find the absolute pitch, you decide to at least tune the keys relative\nto each other. To do this, you need to make sure that the pitch of each key is exactly one \nhigher than the key before it and one lower than the key after it.\nAs the concert will start shortly, you need to minimize the total tuning effort,\nwhich is the sum of the absolute changes in pitch you apply to each key.\nFor example, Figure M.1 illustrates a solution for Sample Input 3, resulting in a total tuning effort of 23.\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4shk0pix.png)\n\nFigure M.1: Visualization of Sample Input 3.\n:::", "inputFormat": "The input consists of:\n- One line with an integer $n$ ($2 \\leq n \\leq 10^5$), the number of keys on the piano. \n- One line with $n$ integers $t_1,\\dots,t_n$ ($-2 \\cdot 10^5 \\leq t_i \\leq 2 \\cdot 10^5$), where $t_i$ describes the difference in pitch between the $i$th key and the first key. The first integer $t_1$ is always $0$.    ", "outputFormat": "Output the minimal total tuning effort.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2024] Musical Mending", "background": "", "description": "Shortly before the concert starts, you notice that your piano is completely out\nof tune! Having the ability of relative pitch, you are able to discern the\ndifference between the pitch of any piano key to the first piano key. While this\ndoes not help you find the absolute pitch, you decide to at least tune the keys relative\nto each other. To do this, you need to make sure that the pitch of each key is exactly one \nhigher than the key before it and one lower than the key after it.\nAs the concert will start shortly, you need to minimize the total tuning effort,\nwhich is the sum of the absolute changes in pitch you apply to each key.\nFor example, Figure M.1 illustrates a solution for Sample Input 3, resulting in a total tuning effort of 23.\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4shk0pix.png)\n\nFigure M.1: Visualization of Sample Input 3.\n:::", "inputFormat": "The input consists of:\n- One line with an integer $n$ ($2 \\leq n \\leq 10^5$), the number of keys on the piano. \n- One line with $n$ integers $t_1,\\dots,t_n$ ($-2 \\cdot 10^5 \\leq t_i \\leq 2 \\cdot 10^5$), where $t_i$ describes the difference in pitch between the $i$th key and the first key. The first integer $t_1$ is always $0$.    ", "outputFormat": "Output the minimal total tuning effort.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2024] Musical Mending", "background": null, "description": "在音乐会即将开始前，你发现你的钢琴完全走音了！由于你具备相对音高的能力，你能够分辨出任意琴键与第一个琴键之间的音高差。虽然这无法帮助你确定绝对音高，但你决定至少将各琴键之间的音高调整为相对正确。为此，你需要确保每个琴键的音高恰好比前一个琴键高 $1$，比后一个琴键低 $1$。\n\n由于音乐会即将开始，你需要最小化总的调音工作量，即你对每个琴键施加的音高变化的绝对值之和。\n\n例如，图 M.1 展示了样例输入 3 的一种解决方案，总调音工作量为 $23$。\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4shk0pix.png)\n\n图 M.1：样例输入 3 的可视化。\n:::", "inputFormat": "输入包括：\n\n- 一行一个整数 $n$（$2 \\leq n \\leq 10^5$），表示钢琴的琴键数。\n- 一行 $n$ 个整数 $t_1,\\dots,t_n$（$-2 \\cdot 10^5 \\leq t_i \\leq 2 \\cdot 10^5$），其中 $t_i$ 表示第 $i$ 个琴键与第一个琴键之间的音高差。第一个整数 $t_1$ 总是 $0$。", "outputFormat": "输出最小的总调音工作量。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13729", "type": "P", "difficulty": 2, "samples": [["3\n7\n16\n23", "0\n1\n8"], ["8\n2\n82\n128\n136\n13365\n139454\n310111\n975319", "1\n9\n3\n1\n6\n57\n1000\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "O2优化"], "title": "【MGVOI R1-A】超级奇数（odd）", "background": "如果这是您首次参加 OI 赛制的比赛，以下提示可能会有所帮助：\n\n::::warning[提示]{open}\n\n1. 本场比赛为 OI 赛制，和 CSP-J/S 相同。也就是说，**你在比赛期间无法看到评测结果，且每道题的分数均以最后一次提交为准**。\n\n2. 所有题目都在附件中附有大样例。建议使用文件读写函数（如 ```freopen```）进行样例测试，但 **比赛界面提交的代码中 请勿调用 文件读写函数**，从而确保你的代码能被正常评测。\n\n::::\n$ $\n", "description": "Fruit 同学和 Siby 同学很喜欢超级奇数。\n\n::::info[超级奇数的定义]{open}\n对于一个正整数，如果其十进制表示中的每一位都是奇数（即仅由 $1,3,5,7,9$ 中的某些数码组成），则定义它是一个 **超级奇数**。例如，$3,7,17,31,139511,975319$ 等都是超级奇数，而 $2,16,23,13365,139454,310111$ 等则不是。\n::::\n\n有一天，他们在放学的路上想到了这样一个问题：“给定一个正整数 $a$，如何为它找到一个最小的 **非负整数** $b$，使得 $a+b$ 为一个超级奇数？”\n\n两位同学很快就想到了解法，但他们没学过编程，所以在处理大量的数据时有些力不从心。因此，他们找到了学习算法竞赛的你，希望你能用计算机快速地解答这个问题。", "inputFormat": "**每个测试点包含多组测试数据，各组测试数据之间相互独立。**\n\n第一行包含一个正整数 $T$，表示测试数据的组数。\n\n对于每组测试数据：仅输入一行，包含一个正整数 $a$。", "outputFormat": "对于每组测试数据：仅需在单独一行输出一个非负整数，表示 $b$ 的最小值。", "hint": "\n**【样例 #1】**\n\n::::info[样例 #1 解释]\n\n对于第一组测试数据：\n\n* 显然，$7$ 本身就是一个超级奇数，所以当 $a=7$ 时，只需取 $b=0$ 就能使得 $a+b$ 为超级奇数。\n  \n* 综上，$b$ 的最小值为 $0$。\n\n对于第二组测试数据：\n* 当 $b=0$ 时，$a+b=16$，含有偶数数码 $6$，不是超级奇数；\n\n* 当 $b=1$ 时，$a+b=17$，仅含有奇数数码，是超级奇数。\n\n* 综上，$b$ 的最小值为 $1$。\n\n对于第三组测试数据：\n* 当 $b=0$ 时，$a+b=23$，含有偶数数码 $2$，不是超级奇数；\n\n* 当 $b=1$ 时，$a+b=24$，含有偶数数码 $2,4$，不是超级奇数；\n\n* 当 $b=2$ 时，$a+b=25$，含有偶数数码 $2$，不是超级奇数；\n\n* 以此类推，当 $0 \\le b \\le 7$ 时，验证知 $a+b$ 均不是超级奇数；\n\n* 当 $b=8$ 时，$a+b=31$，仅含有奇数数码，是超级奇数。\n\n* 综上，$b$ 的最小值为 $8$。\n\n::::\n\n**【样例 #3】**\n\n见附件中的 ```odd/odd3.in``` 与 ```odd/odd3.ans```。\n\n这个样例满足测试点 $5 \\sim 13$ 的限制。\n\n**【样例 #4】**\n\n见附件中的 ```odd/odd4.in``` 与 ```odd/odd4.ans```。\n\n这个样例满足测试点 $14 \\sim 15$ 的限制。\n\n**【样例 #5】**\n\n见附件中的 ```odd/odd5.in``` 与 ```odd/odd5.ans```。\n\n这个样例满足测试点 $16 \\sim 20$ 的限制。\n\n\n\n---\n\n\n\n\n**【数据范围】**\n\n对于所有测试点，保证 $1\\le T\\le 2\\times 10^3$，$1 \\le a\\le {10}^{12}$。\n\n::cute-table{tuack}\n\n| **测试点编号** | $T \\le$ | $a \\le$ |  **特殊性质** |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $2$ | $20$ | 无 | \n| $5 \\sim 13$ | $100$ | $10^3$ | ^ | \n| $14 \\sim 15$ | $2\\times 10^3$ | ${10}^{12}$ | **A** | \n| $16 \\sim 20$ | ^ | ^ | 无 | \n\n特殊性质 **A**：保证在 $a$ 的十进制表示中，有且仅有一位是偶数（如 $99\\blue{4}75$，$1357\\blue{8}$ 等，其中标蓝的为偶数数码）。\n\n* 分值分配：每个测试点的分值为 $5$ 分。\n\n* 提示：本场比赛四道题目的测试点中 **存在行末回车符和文末换行**，因此，建议使用特殊读入方式（如“快读”）的选手自行通过各题附件中的大样例进行测试，以确保程序的输入部分能够正常工作。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MGVOI R1-A】超级奇数（odd）", "background": "如果这是您首次参加 OI 赛制的比赛，以下提示可能会有所帮助：\n\n::::warning[提示]{open}\n\n1. 本场比赛为 OI 赛制，和 CSP-J/S 相同。也就是说，**你在比赛期间无法看到评测结果，且每道题的分数均以最后一次提交为准**。\n\n2. 所有题目都在附件中附有大样例。建议使用文件读写函数（如 ```freopen```）进行样例测试，但 **比赛界面提交的代码中 请勿调用 文件读写函数**，从而确保你的代码能被正常评测。\n\n::::\n$ $\n", "description": "Fruit 同学和 Siby 同学很喜欢超级奇数。\n\n::::info[超级奇数的定义]{open}\n对于一个正整数，如果其十进制表示中的每一位都是奇数（即仅由 $1,3,5,7,9$ 中的某些数码组成），则定义它是一个 **超级奇数**。例如，$3,7,17,31,139511,975319$ 等都是超级奇数，而 $2,16,23,13365,139454,310111$ 等则不是。\n::::\n\n有一天，他们在放学的路上想到了这样一个问题：“给定一个正整数 $a$，如何为它找到一个最小的 **非负整数** $b$，使得 $a+b$ 为一个超级奇数？”\n\n两位同学很快就想到了解法，但他们没学过编程，所以在处理大量的数据时有些力不从心。因此，他们找到了学习算法竞赛的你，希望你能用计算机快速地解答这个问题。", "inputFormat": "**每个测试点包含多组测试数据，各组测试数据之间相互独立。**\n\n第一行包含一个正整数 $T$，表示测试数据的组数。\n\n对于每组测试数据：仅输入一行，包含一个正整数 $a$。", "outputFormat": "对于每组测试数据：仅需在单独一行输出一个非负整数，表示 $b$ 的最小值。", "hint": "\n**【样例 #1】**\n\n::::info[样例 #1 解释]\n\n对于第一组测试数据：\n\n* 显然，$7$ 本身就是一个超级奇数，所以当 $a=7$ 时，只需取 $b=0$ 就能使得 $a+b$ 为超级奇数。\n  \n* 综上，$b$ 的最小值为 $0$。\n\n对于第二组测试数据：\n* 当 $b=0$ 时，$a+b=16$，含有偶数数码 $6$，不是超级奇数；\n\n* 当 $b=1$ 时，$a+b=17$，仅含有奇数数码，是超级奇数。\n\n* 综上，$b$ 的最小值为 $1$。\n\n对于第三组测试数据：\n* 当 $b=0$ 时，$a+b=23$，含有偶数数码 $2$，不是超级奇数；\n\n* 当 $b=1$ 时，$a+b=24$，含有偶数数码 $2,4$，不是超级奇数；\n\n* 当 $b=2$ 时，$a+b=25$，含有偶数数码 $2$，不是超级奇数；\n\n* 以此类推，当 $0 \\le b \\le 7$ 时，验证知 $a+b$ 均不是超级奇数；\n\n* 当 $b=8$ 时，$a+b=31$，仅含有奇数数码，是超级奇数。\n\n* 综上，$b$ 的最小值为 $8$。\n\n::::\n\n**【样例 #3】**\n\n见附件中的 ```odd/odd3.in``` 与 ```odd/odd3.ans```。\n\n这个样例满足测试点 $5 \\sim 13$ 的限制。\n\n**【样例 #4】**\n\n见附件中的 ```odd/odd4.in``` 与 ```odd/odd4.ans```。\n\n这个样例满足测试点 $14 \\sim 15$ 的限制。\n\n**【样例 #5】**\n\n见附件中的 ```odd/odd5.in``` 与 ```odd/odd5.ans```。\n\n这个样例满足测试点 $16 \\sim 20$ 的限制。\n\n\n\n---\n\n\n\n\n**【数据范围】**\n\n对于所有测试点，保证 $1\\le T\\le 2\\times 10^3$，$1 \\le a\\le {10}^{12}$。\n\n::cute-table{tuack}\n\n| **测试点编号** | $T \\le$ | $a \\le$ |  **特殊性质** |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $2$ | $20$ | 无 | \n| $5 \\sim 13$ | $100$ | $10^3$ | ^ | \n| $14 \\sim 15$ | $2\\times 10^3$ | ${10}^{12}$ | **A** | \n| $16 \\sim 20$ | ^ | ^ | 无 | \n\n特殊性质 **A**：保证在 $a$ 的十进制表示中，有且仅有一位是偶数（如 $99\\blue{4}75$，$1357\\blue{8}$ 等，其中标蓝的为偶数数码）。\n\n* 分值分配：每个测试点的分值为 $5$ 分。\n\n* 提示：本场比赛四道题目的测试点中 **存在行末回车符和文末换行**，因此，建议使用特殊读入方式（如“快读”）的选手自行通过各题附件中的大样例进行测试，以确保程序的输入部分能够正常工作。", "locale": "zh-CN"}}}
{"pid": "P13730", "type": "P", "difficulty": 3, "samples": [["4 3\n3 4 1 2\n1 3\n1 4\n2 4", "1\n0\n2"], ["7 10\n6 3 5 7 2 4 1\n1 3\n1 4\n1 7\n2 3\n2 4\n2 5\n3 5\n4 6\n5 6\n6 7\n", "2\n1\n0\n3\n1\n0\n3\n4\n1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["二分", "O2优化", "排序", "前缀和", "双指针 two-pointer"], "title": "【MGVOI R1-B】完美重排（sort）", "background": "", "description": "Siby 同学有一个长度为 $n$ 的数组 $a$，其下标编号为 $1 \\sim n$。保证数组 $a$ 是一个长度为 $n$ 的排列，也就是说，$1\\sim n$ 中的每个正整数都在数组 $a$ 中出现 **恰好一次**。\n\n在此基础上，Siby 同学定义了 **完美重排** 操作：\n\n::::info[完美重排的定义]{open}\n\n* 第一步：选择两个下标 $L,R$（必须满足 $1\\le L\\le R\\le n$）；\n  \n* 第二步：将 $a_L,...,a_R$ （即数组 $a$ 中下标在 $L$ 和 $R$ 之间的元素）按照 **从小到大** 的顺序重新排序。\n\n::::\n\n例如，若 $a=[4,3,2,1]$，选择 $L=2,R=4$ 进行一次完美重排操作（也就是将 $a_2,a_3,a_4$ 按照从小到大的顺序排序），得到的新数组为 $a'=[4,1,2,3]$。\n\n接下来，他将进行 $Q$ 组询问（询问之间彼此独立），其中第 $i$ 组询问包含两个参数 $x_i,y_i$（$x_i< y_i$），表示询问你有多少种进行 **恰好一次** 完美重排的方案，使得数组 $a$ 中原先下标为 $x_i$ 的元素，在重排后的下标为 $y_i$。\n\n提示：只要完美重排操作中选择的 $L$ 不同或 $R$ 不同，就被认为是两种不同的方案。", "inputFormat": "第一行包含两个正整数 $n,Q$，分别表示数组 $a$ 的长度和询问的次数。\n\n第二行包含 $n$ 个正整数，其中第 $i$ 个正整数表示数组 $a$ 中的元素 $a_i$（$1\\le a_i\\le n$）。\n\n接下来 $Q$ 行，其中第 $i$ 行包含两个正整数 $x_i,y_i$（$1\\le x_i< y_i \\le n$），表示第 $i$ 组询问的两个参数。", "outputFormat": "共输出 $Q$ 行。\n\n对于第 $i$ 组询问而言：仅需在第 $i$ 行输出一个非负整数，表示完美重排的方案数。方案应进行恰好一次完美重排，使得数组 $a$ 中原先下标为 $x_i$ 的元素，在重排后的下标为 $y_i$。\n\n", "hint": "\n**【样例 #1】**\n\n::::info[样例 #1 解释]\n此样例下，$a=[3,4,1,2]$。\n\n* 对于第一组询问：只需取 $L=1，R=4$ 进行一次完美重排，就能使得 $a_1$ 在重排后的下标为 $3$（重排前：$a=[\\red{3},4,1,2]$，重排后：$a'=[1,2,\\red{3},4]$）。可以证明这是唯一的一种方案，故方案数为 $1$；\n\n* 对于第二组询问：可以证明，无论如何选取 $L,R$，都不可能使得 $a_1$ 在重排后的下标为 $4$，故方案数为 $0$；\n\n* 对于第三组询问：\n\n1. 第一种方案是取 $L=1，R=4$ 进行一次完美重排（重排前：$a=[3,\\red{4},1,2]$，重排后：$a'=[1,2,3,\\red{4}]$）；\n  \n2. 第二种方案是取 $L=2，R=4$ 进行一次完美重排（重排前：$a=[3,\\red{4},1,2]$，重排后：$a'=[3,1,2,\\red{4}]$），可以验证均满足条件。不存在其它满足条件的方案了，故方案数为 $2$。\n::::\n\n\n**【样例 #2】**\n\n::::info[样例 #2 解释]\n此样例下，$a=[6,3,5,7,2,4,1]$。\n\n为了简便，我们用数对 $(i,j)$ 来表示选取 $L=i$，$R=j$ 进行一次完美重排的方案。各组询问对应的所有方案见下表：\n\n| 询问编号 | 方案数 | 方案 1 | 方案 2 | 方案 3 | 方案 4 |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| **1** | $2$ | $(1,3)$ | $(1,4)$\n| **2** | $1$ | $(1,5)$\n| **3** | $0$ |\n| **4** | $3$ | $(1,7)$ | $(2,5)$ | $(2,6)$\n| **5** | $1$ | $(2,7)$\n| **6** | $0$ |\n| **7** | $3$ | $(1,7)$ | $(2,6)$ | $(3,6)$\n| **8** | $4$ | $(1,6)$ | $(2,6)$ | $(3,6)$ | $(4,6)$ \n| **9** | $1$ | $(5,7)$ |\n| **10** | $2$ | $(5,7)$ | $(6,7)$ |\n\n::::\n\n\n\n**【样例 #3】**\n\n见附件中的 ```sort/sort3.in``` 与 ```sort/sort3.ans```。\n\n这个样例满足测试点 $7 \\sim 12$ 的限制。\n\n**【样例 #4】**\n\n见附件中的 ```sort/sort4.in``` 与 ```sort/sort4.ans```。\n\n这个样例满足测试点 $13 \\sim 14$ 的限制。\n\n**【样例 #5】**\n\n见附件中的 ```sort/sort5.in``` 与 ```sort/sort5.ans```。\n\n这个样例满足测试点 $15 \\sim 20$ 的限制。\n\n\n\n---\n\n\n\n\n**【数据范围】**\n\n对于所有测试点，保证 $2\\le n\\le 10^4$，$1\\le Q\\le 2\\times 10^3$，$1\\le x_i< y_i\\le n$，且数组 $a$ 是 $1\\sim n$ 的排列。\n\n::cute-table{tuack}\n\n| **测试点编号** | $n \\le$ | $Q \\le$ |  **特殊性质** |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 6$ | $20$ | $20$ | 无 | \n| $7 \\sim 12$ | $500$ | $100$ | ^ | \n| $13 \\sim 14$ | $10^4$ | $2\\times 10^3$ | **A** | \n| $15 \\sim 20$ | ^ | ^ | 无 | \n\n特殊性质 **A**：保证 $a_i=n-i+1$。\n\n* 分值分配：每个测试点的分值为 $5$ 分。\n  \n* 请注意本题特殊的内存限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MGVOI R1-B】完美重排（sort）", "background": "", "description": "Siby 同学有一个长度为 $n$ 的数组 $a$，其下标编号为 $1 \\sim n$。保证数组 $a$ 是一个长度为 $n$ 的排列，也就是说，$1\\sim n$ 中的每个正整数都在数组 $a$ 中出现 **恰好一次**。\n\n在此基础上，Siby 同学定义了 **完美重排** 操作：\n\n::::info[完美重排的定义]{open}\n\n* 第一步：选择两个下标 $L,R$（必须满足 $1\\le L\\le R\\le n$）；\n  \n* 第二步：将 $a_L,...,a_R$ （即数组 $a$ 中下标在 $L$ 和 $R$ 之间的元素）按照 **从小到大** 的顺序重新排序。\n\n::::\n\n例如，若 $a=[4,3,2,1]$，选择 $L=2,R=4$ 进行一次完美重排操作（也就是将 $a_2,a_3,a_4$ 按照从小到大的顺序排序），得到的新数组为 $a'=[4,1,2,3]$。\n\n接下来，他将进行 $Q$ 组询问（询问之间彼此独立），其中第 $i$ 组询问包含两个参数 $x_i,y_i$（$x_i< y_i$），表示询问你有多少种进行 **恰好一次** 完美重排的方案，使得数组 $a$ 中原先下标为 $x_i$ 的元素，在重排后的下标为 $y_i$。\n\n提示：只要完美重排操作中选择的 $L$ 不同或 $R$ 不同，就被认为是两种不同的方案。", "inputFormat": "第一行包含两个正整数 $n,Q$，分别表示数组 $a$ 的长度和询问的次数。\n\n第二行包含 $n$ 个正整数，其中第 $i$ 个正整数表示数组 $a$ 中的元素 $a_i$（$1\\le a_i\\le n$）。\n\n接下来 $Q$ 行，其中第 $i$ 行包含两个正整数 $x_i,y_i$（$1\\le x_i< y_i \\le n$），表示第 $i$ 组询问的两个参数。", "outputFormat": "共输出 $Q$ 行。\n\n对于第 $i$ 组询问而言：仅需在第 $i$ 行输出一个非负整数，表示完美重排的方案数。方案应进行恰好一次完美重排，使得数组 $a$ 中原先下标为 $x_i$ 的元素，在重排后的下标为 $y_i$。\n\n", "hint": "\n**【样例 #1】**\n\n::::info[样例 #1 解释]\n此样例下，$a=[3,4,1,2]$。\n\n* 对于第一组询问：只需取 $L=1，R=4$ 进行一次完美重排，就能使得 $a_1$ 在重排后的下标为 $3$（重排前：$a=[\\red{3},4,1,2]$，重排后：$a'=[1,2,\\red{3},4]$）。可以证明这是唯一的一种方案，故方案数为 $1$；\n\n* 对于第二组询问：可以证明，无论如何选取 $L,R$，都不可能使得 $a_1$ 在重排后的下标为 $4$，故方案数为 $0$；\n\n* 对于第三组询问：\n\n1. 第一种方案是取 $L=1，R=4$ 进行一次完美重排（重排前：$a=[3,\\red{4},1,2]$，重排后：$a'=[1,2,3,\\red{4}]$）；\n  \n2. 第二种方案是取 $L=2，R=4$ 进行一次完美重排（重排前：$a=[3,\\red{4},1,2]$，重排后：$a'=[3,1,2,\\red{4}]$），可以验证均满足条件。不存在其它满足条件的方案了，故方案数为 $2$。\n::::\n\n\n**【样例 #2】**\n\n::::info[样例 #2 解释]\n此样例下，$a=[6,3,5,7,2,4,1]$。\n\n为了简便，我们用数对 $(i,j)$ 来表示选取 $L=i$，$R=j$ 进行一次完美重排的方案。各组询问对应的所有方案见下表：\n\n| 询问编号 | 方案数 | 方案 1 | 方案 2 | 方案 3 | 方案 4 |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| **1** | $2$ | $(1,3)$ | $(1,4)$\n| **2** | $1$ | $(1,5)$\n| **3** | $0$ |\n| **4** | $3$ | $(1,7)$ | $(2,5)$ | $(2,6)$\n| **5** | $1$ | $(2,7)$\n| **6** | $0$ |\n| **7** | $3$ | $(1,7)$ | $(2,6)$ | $(3,6)$\n| **8** | $4$ | $(1,6)$ | $(2,6)$ | $(3,6)$ | $(4,6)$ \n| **9** | $1$ | $(5,7)$ |\n| **10** | $2$ | $(5,7)$ | $(6,7)$ |\n\n::::\n\n\n\n**【样例 #3】**\n\n见附件中的 ```sort/sort3.in``` 与 ```sort/sort3.ans```。\n\n这个样例满足测试点 $7 \\sim 12$ 的限制。\n\n**【样例 #4】**\n\n见附件中的 ```sort/sort4.in``` 与 ```sort/sort4.ans```。\n\n这个样例满足测试点 $13 \\sim 14$ 的限制。\n\n**【样例 #5】**\n\n见附件中的 ```sort/sort5.in``` 与 ```sort/sort5.ans```。\n\n这个样例满足测试点 $15 \\sim 20$ 的限制。\n\n\n\n---\n\n\n\n\n**【数据范围】**\n\n对于所有测试点，保证 $2\\le n\\le 10^4$，$1\\le Q\\le 2\\times 10^3$，$1\\le x_i< y_i\\le n$，且数组 $a$ 是 $1\\sim n$ 的排列。\n\n::cute-table{tuack}\n\n| **测试点编号** | $n \\le$ | $Q \\le$ |  **特殊性质** |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 6$ | $20$ | $20$ | 无 | \n| $7 \\sim 12$ | $500$ | $100$ | ^ | \n| $13 \\sim 14$ | $10^4$ | $2\\times 10^3$ | **A** | \n| $15 \\sim 20$ | ^ | ^ | 无 | \n\n特殊性质 **A**：保证 $a_i=n-i+1$。\n\n* 分值分配：每个测试点的分值为 $5$ 分。\n  \n* 请注意本题特殊的内存限制。", "locale": "zh-CN"}}}
{"pid": "P13731", "type": "P", "difficulty": 4, "samples": [["3\n1 4\n1\n1 1 1 1\nLXXR\n1 4\n1\n1 1 1 1\nLLRR\n2 3\n1 1\n1 1 1\nLRR\nXRL", "-1\n0\n1"], ["4\n4 3\n1 1 1 9\n1 1 1\nLLL\nLXL\nLXL\nLLL\n4 3\n1 1 1 1\n1 1 1\nLLL\nLXL\nLXL\nLLL\n4 5\n8 5 6 3\n8 5 6 5 3\nRRRRR\nRRXXR\nXRRRL\nRXLLR\n7 10\n10 100 1 1 100 1 10\n10 1 1 1 1 1 1 1 1 10\nRLLLLLLLXX\nRXLXLXLLRL\nRLLLLLXLLL\nLLXXRRRXLX\nLLLLLRLLLX\nXLLLXLXLLR\nLLXLXLLXLL", "2\n1\n13\n22"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "深度优先搜索 DFS", "栈"], "title": "【MGVOI R1-C】收集括号（brackets）", "background": "", "description": "\n本题中 **合法括号串** 的定义如下：\n\n::::info[合法括号串的定义]{open}\n* ```()``` 是合法括号串。\n* 若 ```A``` 是合法括号串，则 ```(A)``` 也是合法括号串。\n* 若 ```A```，```B``` 均为合法括号串，则 ```AB``` 也是合法括号串。\n* 所有的合法括号串都可以通过上述三条规则得到。\n\n::::\n\nAlice 和 Bob 正在合作玩一款叫做“收集括号”的游戏！这个游戏总共分为以下三步流程：\n\n::::success[第一步：初始化]{open}\n\n* 首先，计算机会自动生成一个 $n$ 行 $m$ 列的方格图，其中第 $i$ 行第 $j$ 列的方格对应的坐标为 $(i,j)$。例如，左上角方格的坐标为 $(1,1)$，右下角方格的坐标为 $(n,m)$。\n\n* 然后，计算机会在每个方格中都填入一个字符（从 ```L```，```R```，```X``` 中选择）。若某个方格中的字符为 ```L```，则表示方格中有一个左括号；若为 ```R```，则表示方格中有一个右括号；若为 ```X```，则表示方格中有一个障碍物。\n\n::::\n\n::::success[第二步：Alice 的行动回合]{open}\n\n* **在第一步流程完全结束之后**，Alice 可以对方格图进行任意次（包括 $0$ 次）**反转操作**。\n  \n* 在一次反转操作中，Alice 首先需要选择方格图的 **某一行或某一列** 作为这次操作的范围。\n\n* 之后，计算机将遍历 Alice 选择的这一行（或这一列）。对于每一个范围内的方格（除了障碍物），计算机都会反转这个方格上的字符。也就是说，如果方格上原先的字符是 ```L```，那么就将其改为 ```R```；如果原先是 ```R```，那么就将其改为 ```L```；如果原先是 ```X```，那么不做任何改动。\n\n* 对于这一次反转操作而言，如果 Alice 选择了第 $i$ 行（$1\\le i\\le n$）作为反转范围，那么需要花费 $a_i$ 枚金币；如果她选择了第 $j$ 列（$1\\le j\\le m$）作为反转范围，那么需要花费 $b_j$ 枚金币。\n\n::::\n\n::::success[第三步：Bob 的行动回合]{open}\n\n* **在第二步流程完全结束之后**，Bob 将从坐标为 $(1,1)$ 的方格处（也就是方格图的左上角）出发，开始收集方格图中的括号。\n\n* 在任意时刻，Bob 都可以选择 **向正下方或正右方** 移动一个方格（前提是要到达的位置既不超过方格图的边界，也没有障碍物）。也就是说，如果 Bob 位于方格 $(x,y)$，那么他下一步就可以前往方格 $(x+1,y)$ 或者方格 $(x,y+1)$，只要他保证自己 **始终位于方格图的范围内，并且不会前往有障碍物的方格**。\n\n* Bob 每到达一个方格，就会收集这个方格中的括号。在抵达坐标为 $(n,m)$ 的终点方格（也就是方格图的右下角）之后，他会整理自己收集到的所有括号（包括起点和终点方格的括号），并将其 **由先到后按照收集的顺序** 排成一个字符串 $S$。\n\n* 如果 $S$ 是一个合法括号串，则 Alice 和 Bob 在这局游戏中共同获胜；否则他们在这局游戏中落败。（如果 Bob 无法到达终点方格，则也认为他们落败）\n::::\n\n\n---\n\n\n**注意：** 我们假设 Bob 是绝顶聪明的，也就是说，在 Alice 的所有操作完成之后，只要存在任何一种符合上述规则的行动方式能让他们获胜，Bob 就会采用这种行动方式。\n\n在计算机已经填满方格图的情况下（即第一步的初始化流程已经完成），请你帮 Alice 判断，是否存在一种操作方案，使得她能够和 Bob 共同获胜？如果存在，则她最少需要花费多少枚金币来取胜？\n\n", "inputFormat": "**每个测试点包含多组测试数据，各组测试数据之间相互独立。**\n\n第一行包含一个正整数 $T$，表示测试数据的组数。\n\n对于每组测试数据：\n\n第一行包含两个正整数 $n,m$，分别表示方格图的行数和列数。**保证 $\\bm{n+m}$ 是一个奇数**，这意味着 Bob 最终得到的字符串 $S$ 的长度一定为偶数。\n\n第二行包含 $n$ 个正整数，其中第 $i$ 个正整数 $a_i$ 表示在方格图的第 $i$ 行进行反转操作需花费的金币数量。\n\n第三行包含 $m$ 个正整数，其中第 $j$ 个正整数 $b_j$ 表示在方格图的第 $j$ 列进行反转操作需花费的金币数量。\n\n接下来 $n$ 行，每行包含一个长度为 $m$ 的字符串（仅含 ```L```，```R```，```X``` 三种字符），其中第 $i$ 行第 $j$ 个字符即为计算机在方格 $(i,j)$ 中填入的字符。保证左上角和右下角方格中的字符不为 ```X```。\n\n", "outputFormat": "对于每组测试数据，仅需在单独一行输出一个整数：\n\n* 如果 Alice 有可能和 Bob 共同获胜，则输出她最少需要花费的金币数；\n  \n* 否则，输出 ```-1```。\n\n", "hint": "**【样例 #1】**\n\n::::info[样例 #1 解释]\n\n对于第一组测试数据，计算机生成的方格图为 ```LXXR```。由于中间两个障碍物的阻挡，Bob 无法从方格 $(1,1)$ 向右移动到方格 $(1,4)$，故 Alice 和 Bob 不可能获胜，输出 ```-1```；\n\n对于第二组测试数据，计算机生成的方格图为 ```LLRR```。显然，Bob 可以直接从方格 $(1,1)$ 向右移动到方格 $(1,4)$，最终得到的 $S=(())$ 就是一个合法括号串。因此，Alice 无需花费任何金币进行反转操作即可获胜，输出 ```0```；\n\n对于第三组测试数据，Alice 只需花费 $b_3=1$ 枚金币对第三列使用一次反转操作。在这之后，方格图的状态变为：\n\n| $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{L}}$ |\n| -----------: | -----------: | -----------: |\n| $\\mathtt{X}$ | $\\mathtt{R}$ | $\\orange{\\mathtt{R}}$ |\n\nBob 只需按照橙色方格对应的路径行动，最终可以得到 $S=()()$，这是一个合法括号串。\n\n容易证明，要让他们获胜最少需要 $1$ 枚金币，故输出 ```1```。\n\n::::\n\n**【样例 #2】**\n\n::::info[样例 #2 解释]\n\n:::success[第一组测试数据]\n\n对于第一组测试数据，Alice 可以分别对第二行和第三列使用反转操作。在这之后，方格图的状态变为：\n\n| $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{R}}$ |\n| -----------: | -----------: | -----------: |\n| $\\mathtt{R}$ | $\\mathtt{X}$ | $\\orange{\\mathtt{L}}$ |\n| $\\mathtt{L}$ | $\\mathtt{X}$ | $\\orange{\\mathtt{R}}$ |\n| $\\mathtt{L}$ | $\\mathtt{L}$ | $\\orange{\\mathtt{R}}$ |\n\n* 值得注意的一点是，对于方格 $(2,3)$，由于它总共经历了两次反转，所以仍然维持最开始的状态 $\\mathtt{L}$。\n\nBob 只需按照橙色方格对应的路径行动，最终可以得到 $S=(()())$，这是一个合法括号串。\n\nAlice 总共需要花费 $a_2+b_3=2$ 枚金币，可以证明为最小花费。\n:::\n\n:::success[第二组测试数据]\n\n对于第二组测试数据，Alice 可以对第四行使用反转操作。在这之后，方格图的状态变为：\n\n| $\\orange{\\mathtt{L}}$ | $\\mathtt{L}$ | $\\mathtt{L}$ |\n| -----------: | -----------: | -----------: |\n| $\\orange{\\mathtt{L}}$ | $\\mathtt{X}$ | $\\mathtt{L}$ |\n| $\\orange{\\mathtt{L}}$ | $\\mathtt{X}$ | $\\mathtt{L}$ |\n| $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ |\n\nBob 只需按照橙色方格对应的路径行动，最终可以得到 $S=((()))$，这是一个合法括号串。\n\nAlice 总共需要花费 $a_4=1$ 枚金币，可以证明为最小花费。\n\n:::\n\n:::success[第三组测试数据]\n\n对于第三组测试数据，Alice 可以分别对第一行、第二行使用反转操作。在这之后，方格图的状态变为：\n\n| $\\orange{\\mathtt{L}}$ | $\\mathtt{L}$ | $\\mathtt{L}$ | $\\mathtt{L}$ | $\\mathtt{L}$ |\n| -----------: | -----------: | -----------: | -----------: | -----------: |\n| $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{L}}$ | $\\mathtt{X}$ | $\\mathtt{X}$ | $\\mathtt{L}$ |\n| $\\mathtt{X}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ | $\\mathtt{L}$ |\n| $\\mathtt{R}$ | $\\mathtt{X}$ | $\\mathtt{L}$ | $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{R}}$ |\n\nBob 只需按照橙色方格对应的路径行动，最终可以得到 $S=((()))()$，这是一个合法括号串。\n\nAlice 总共需要花费 $a_1+a_2=13$ 枚金币，可以证明为最小花费。\n\n:::\n\n:::success[第四组测试数据]\n\n对于第四组测试数据，Alice 可以分别对第一行、第六行、第七行、第二列使用反转操作。在这之后，方格图的状态变为：\n\n| $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{R}}$ | $\\mathtt{R}$ | $\\mathtt{R}$ | $\\mathtt{R}$ | $\\mathtt{R}$ | $\\mathtt{R}$ | $\\mathtt{X}$ | $\\mathtt{X}$ |\n| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |\n| $\\mathtt{R}$ | $\\mathtt{X}$ | $\\orange{\\mathtt{L}}$ | $\\mathtt{X}$ | $\\mathtt{L}$ | $\\mathtt{X}$ | $\\mathtt{L}$ | $\\mathtt{L}$ | $\\mathtt{R}$ | $\\mathtt{L}$ |\n| $\\mathtt{R}$ | $\\mathtt{R}$ | $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{L}}$ | $\\mathtt{L}$ | $\\mathtt{X}$ | $\\mathtt{L}$ | $\\mathtt{L}$ | $\\mathtt{L}$ |\n| $\\mathtt{L}$ | $\\mathtt{R}$ | $\\mathtt{X}$ | $\\mathtt{X}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ | $\\mathtt{X}$ | $\\mathtt{L}$ | $\\mathtt{X}$ |\n| $\\mathtt{L}$ | $\\mathtt{R}$ | $\\mathtt{L}$ | $\\mathtt{L}$ | $\\mathtt{L}$ | $\\mathtt{R}$ | $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{L}}$ | $\\mathtt{L}$ | $\\mathtt{X}$ |\n| $\\mathtt{X}$ | $\\mathtt{L}$ | $\\mathtt{R}$ | $\\mathtt{R}$ | $\\mathtt{X}$ | $\\mathtt{R}$ | $\\mathtt{X}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ | $\\mathtt{L}$ |\n| $\\mathtt{R}$ | $\\mathtt{L}$ | $\\mathtt{X}$ | $\\mathtt{R}$ | $\\mathtt{X}$ | $\\mathtt{R}$ | $\\mathtt{R}$ | $\\mathtt{X}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ |\n\n\nBob 只需按照橙色方格对应的路径行动，最终可以得到 $S=(\\red{()}\\blue{(}\\red{((()))}\\orange{(())}\\blue{)})$，这是一个合法括号串。（注：括号串的颜色仅为方便观察，与答案无关）\n\nAlice 总共需要花费 $a_1+a_6+a_7+b_2=22$ 枚金币，可以证明为最小花费。\n:::\n\n::::\n\n**【样例 #3】**\n\n见附件中的 ```brackets/brackets3.in``` 与 ```brackets/brackets3.ans```。\n\n这个样例满足测试点 $5 \\sim 8$ 的限制。\n\n**【样例 #4】**\n\n见附件中的 ```brackets/brackets4.in``` 与 ```brackets/brackets4.ans```。\n\n这个样例满足测试点 $9 \\sim 12$ 的限制。\n\n**【样例 #5】**\n\n见附件中的 ```brackets/brackets5.in``` 与 ```brackets/brackets5.ans```。\n\n这个样例满足测试点 $13 \\sim 20$ 的限制。\n\n---\n\n\n\n**【数据范围】**\n\n对于所有测试点，保证 $1\\le T\\le 5$，$1\\le n,m\\le 100$（$n+m$ 为奇数），$1\\le a_i,b_j\\le 10^5$，并且方格图中初始填入的字符仅含 ```L```，```R```，```X```，其中左上角和右下角的字符一定不为 ```X```。\n\n::cute-table{tuack}\n\n| **测试点编号** | $T \\le$ | $n,m \\le$ | $n+m\\le$ | **特殊性质** |\n|:-:|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $1$ | $6$ | $7$ |  无\n| $5 \\sim 8$ | $2$ | $14$ | $15$ | ^\n| $9 \\sim 12$ | $5$ | $100$ | $101$ | **A**\n| $13 \\sim 20$ | ^ | ^ | $199$ | 无\n\n特殊性质 **A**：保证 $n=1$。\n\n* 分值分配：每个测试点的分值为 $5$ 分。\n* 为避免对算法复杂度常系数的考察，本题的时间限制被设为 1.5s。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MGVOI R1-C】收集括号（brackets）", "background": "", "description": "\n本题中 **合法括号串** 的定义如下：\n\n::::info[合法括号串的定义]{open}\n* ```()``` 是合法括号串。\n* 若 ```A``` 是合法括号串，则 ```(A)``` 也是合法括号串。\n* 若 ```A```，```B``` 均为合法括号串，则 ```AB``` 也是合法括号串。\n* 所有的合法括号串都可以通过上述三条规则得到。\n\n::::\n\nAlice 和 Bob 正在合作玩一款叫做“收集括号”的游戏！这个游戏总共分为以下三步流程：\n\n::::success[第一步：初始化]{open}\n\n* 首先，计算机会自动生成一个 $n$ 行 $m$ 列的方格图，其中第 $i$ 行第 $j$ 列的方格对应的坐标为 $(i,j)$。例如，左上角方格的坐标为 $(1,1)$，右下角方格的坐标为 $(n,m)$。\n\n* 然后，计算机会在每个方格中都填入一个字符（从 ```L```，```R```，```X``` 中选择）。若某个方格中的字符为 ```L```，则表示方格中有一个左括号；若为 ```R```，则表示方格中有一个右括号；若为 ```X```，则表示方格中有一个障碍物。\n\n::::\n\n::::success[第二步：Alice 的行动回合]{open}\n\n* **在第一步流程完全结束之后**，Alice 可以对方格图进行任意次（包括 $0$ 次）**反转操作**。\n  \n* 在一次反转操作中，Alice 首先需要选择方格图的 **某一行或某一列** 作为这次操作的范围。\n\n* 之后，计算机将遍历 Alice 选择的这一行（或这一列）。对于每一个范围内的方格（除了障碍物），计算机都会反转这个方格上的字符。也就是说，如果方格上原先的字符是 ```L```，那么就将其改为 ```R```；如果原先是 ```R```，那么就将其改为 ```L```；如果原先是 ```X```，那么不做任何改动。\n\n* 对于这一次反转操作而言，如果 Alice 选择了第 $i$ 行（$1\\le i\\le n$）作为反转范围，那么需要花费 $a_i$ 枚金币；如果她选择了第 $j$ 列（$1\\le j\\le m$）作为反转范围，那么需要花费 $b_j$ 枚金币。\n\n::::\n\n::::success[第三步：Bob 的行动回合]{open}\n\n* **在第二步流程完全结束之后**，Bob 将从坐标为 $(1,1)$ 的方格处（也就是方格图的左上角）出发，开始收集方格图中的括号。\n\n* 在任意时刻，Bob 都可以选择 **向正下方或正右方** 移动一个方格（前提是要到达的位置既不超过方格图的边界，也没有障碍物）。也就是说，如果 Bob 位于方格 $(x,y)$，那么他下一步就可以前往方格 $(x+1,y)$ 或者方格 $(x,y+1)$，只要他保证自己 **始终位于方格图的范围内，并且不会前往有障碍物的方格**。\n\n* Bob 每到达一个方格，就会收集这个方格中的括号。在抵达坐标为 $(n,m)$ 的终点方格（也就是方格图的右下角）之后，他会整理自己收集到的所有括号（包括起点和终点方格的括号），并将其 **由先到后按照收集的顺序** 排成一个字符串 $S$。\n\n* 如果 $S$ 是一个合法括号串，则 Alice 和 Bob 在这局游戏中共同获胜；否则他们在这局游戏中落败。（如果 Bob 无法到达终点方格，则也认为他们落败）\n::::\n\n\n---\n\n\n**注意：** 我们假设 Bob 是绝顶聪明的，也就是说，在 Alice 的所有操作完成之后，只要存在任何一种符合上述规则的行动方式能让他们获胜，Bob 就会采用这种行动方式。\n\n在计算机已经填满方格图的情况下（即第一步的初始化流程已经完成），请你帮 Alice 判断，是否存在一种操作方案，使得她能够和 Bob 共同获胜？如果存在，则她最少需要花费多少枚金币来取胜？\n\n", "inputFormat": "**每个测试点包含多组测试数据，各组测试数据之间相互独立。**\n\n第一行包含一个正整数 $T$，表示测试数据的组数。\n\n对于每组测试数据：\n\n第一行包含两个正整数 $n,m$，分别表示方格图的行数和列数。**保证 $\\bm{n+m}$ 是一个奇数**，这意味着 Bob 最终得到的字符串 $S$ 的长度一定为偶数。\n\n第二行包含 $n$ 个正整数，其中第 $i$ 个正整数 $a_i$ 表示在方格图的第 $i$ 行进行反转操作需花费的金币数量。\n\n第三行包含 $m$ 个正整数，其中第 $j$ 个正整数 $b_j$ 表示在方格图的第 $j$ 列进行反转操作需花费的金币数量。\n\n接下来 $n$ 行，每行包含一个长度为 $m$ 的字符串（仅含 ```L```，```R```，```X``` 三种字符），其中第 $i$ 行第 $j$ 个字符即为计算机在方格 $(i,j)$ 中填入的字符。保证左上角和右下角方格中的字符不为 ```X```。\n\n", "outputFormat": "对于每组测试数据，仅需在单独一行输出一个整数：\n\n* 如果 Alice 有可能和 Bob 共同获胜，则输出她最少需要花费的金币数；\n  \n* 否则，输出 ```-1```。\n\n", "hint": "**【样例 #1】**\n\n::::info[样例 #1 解释]\n\n对于第一组测试数据，计算机生成的方格图为 ```LXXR```。由于中间两个障碍物的阻挡，Bob 无法从方格 $(1,1)$ 向右移动到方格 $(1,4)$，故 Alice 和 Bob 不可能获胜，输出 ```-1```；\n\n对于第二组测试数据，计算机生成的方格图为 ```LLRR```。显然，Bob 可以直接从方格 $(1,1)$ 向右移动到方格 $(1,4)$，最终得到的 $S=(())$ 就是一个合法括号串。因此，Alice 无需花费任何金币进行反转操作即可获胜，输出 ```0```；\n\n对于第三组测试数据，Alice 只需花费 $b_3=1$ 枚金币对第三列使用一次反转操作。在这之后，方格图的状态变为：\n\n| $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{L}}$ |\n| -----------: | -----------: | -----------: |\n| $\\mathtt{X}$ | $\\mathtt{R}$ | $\\orange{\\mathtt{R}}$ |\n\nBob 只需按照橙色方格对应的路径行动，最终可以得到 $S=()()$，这是一个合法括号串。\n\n容易证明，要让他们获胜最少需要 $1$ 枚金币，故输出 ```1```。\n\n::::\n\n**【样例 #2】**\n\n::::info[样例 #2 解释]\n\n:::success[第一组测试数据]\n\n对于第一组测试数据，Alice 可以分别对第二行和第三列使用反转操作。在这之后，方格图的状态变为：\n\n| $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{R}}$ |\n| -----------: | -----------: | -----------: |\n| $\\mathtt{R}$ | $\\mathtt{X}$ | $\\orange{\\mathtt{L}}$ |\n| $\\mathtt{L}$ | $\\mathtt{X}$ | $\\orange{\\mathtt{R}}$ |\n| $\\mathtt{L}$ | $\\mathtt{L}$ | $\\orange{\\mathtt{R}}$ |\n\n* 值得注意的一点是，对于方格 $(2,3)$，由于它总共经历了两次反转，所以仍然维持最开始的状态 $\\mathtt{L}$。\n\nBob 只需按照橙色方格对应的路径行动，最终可以得到 $S=(()())$，这是一个合法括号串。\n\nAlice 总共需要花费 $a_2+b_3=2$ 枚金币，可以证明为最小花费。\n:::\n\n:::success[第二组测试数据]\n\n对于第二组测试数据，Alice 可以对第四行使用反转操作。在这之后，方格图的状态变为：\n\n| $\\orange{\\mathtt{L}}$ | $\\mathtt{L}$ | $\\mathtt{L}$ |\n| -----------: | -----------: | -----------: |\n| $\\orange{\\mathtt{L}}$ | $\\mathtt{X}$ | $\\mathtt{L}$ |\n| $\\orange{\\mathtt{L}}$ | $\\mathtt{X}$ | $\\mathtt{L}$ |\n| $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ |\n\nBob 只需按照橙色方格对应的路径行动，最终可以得到 $S=((()))$，这是一个合法括号串。\n\nAlice 总共需要花费 $a_4=1$ 枚金币，可以证明为最小花费。\n\n:::\n\n:::success[第三组测试数据]\n\n对于第三组测试数据，Alice 可以分别对第一行、第二行使用反转操作。在这之后，方格图的状态变为：\n\n| $\\orange{\\mathtt{L}}$ | $\\mathtt{L}$ | $\\mathtt{L}$ | $\\mathtt{L}$ | $\\mathtt{L}$ |\n| -----------: | -----------: | -----------: | -----------: | -----------: |\n| $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{L}}$ | $\\mathtt{X}$ | $\\mathtt{X}$ | $\\mathtt{L}$ |\n| $\\mathtt{X}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ | $\\mathtt{L}$ |\n| $\\mathtt{R}$ | $\\mathtt{X}$ | $\\mathtt{L}$ | $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{R}}$ |\n\nBob 只需按照橙色方格对应的路径行动，最终可以得到 $S=((()))()$，这是一个合法括号串。\n\nAlice 总共需要花费 $a_1+a_2=13$ 枚金币，可以证明为最小花费。\n\n:::\n\n:::success[第四组测试数据]\n\n对于第四组测试数据，Alice 可以分别对第一行、第六行、第七行、第二列使用反转操作。在这之后，方格图的状态变为：\n\n| $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{R}}$ | $\\mathtt{R}$ | $\\mathtt{R}$ | $\\mathtt{R}$ | $\\mathtt{R}$ | $\\mathtt{R}$ | $\\mathtt{X}$ | $\\mathtt{X}$ |\n| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |\n| $\\mathtt{R}$ | $\\mathtt{X}$ | $\\orange{\\mathtt{L}}$ | $\\mathtt{X}$ | $\\mathtt{L}$ | $\\mathtt{X}$ | $\\mathtt{L}$ | $\\mathtt{L}$ | $\\mathtt{R}$ | $\\mathtt{L}$ |\n| $\\mathtt{R}$ | $\\mathtt{R}$ | $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{L}}$ | $\\mathtt{L}$ | $\\mathtt{X}$ | $\\mathtt{L}$ | $\\mathtt{L}$ | $\\mathtt{L}$ |\n| $\\mathtt{L}$ | $\\mathtt{R}$ | $\\mathtt{X}$ | $\\mathtt{X}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ | $\\mathtt{X}$ | $\\mathtt{L}$ | $\\mathtt{X}$ |\n| $\\mathtt{L}$ | $\\mathtt{R}$ | $\\mathtt{L}$ | $\\mathtt{L}$ | $\\mathtt{L}$ | $\\mathtt{R}$ | $\\orange{\\mathtt{L}}$ | $\\orange{\\mathtt{L}}$ | $\\mathtt{L}$ | $\\mathtt{X}$ |\n| $\\mathtt{X}$ | $\\mathtt{L}$ | $\\mathtt{R}$ | $\\mathtt{R}$ | $\\mathtt{X}$ | $\\mathtt{R}$ | $\\mathtt{X}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ | $\\mathtt{L}$ |\n| $\\mathtt{R}$ | $\\mathtt{L}$ | $\\mathtt{X}$ | $\\mathtt{R}$ | $\\mathtt{X}$ | $\\mathtt{R}$ | $\\mathtt{R}$ | $\\mathtt{X}$ | $\\orange{\\mathtt{R}}$ | $\\orange{\\mathtt{R}}$ |\n\n\nBob 只需按照橙色方格对应的路径行动，最终可以得到 $S=(\\red{()}\\blue{(}\\red{((()))}\\orange{(())}\\blue{)})$，这是一个合法括号串。（注：括号串的颜色仅为方便观察，与答案无关）\n\nAlice 总共需要花费 $a_1+a_6+a_7+b_2=22$ 枚金币，可以证明为最小花费。\n:::\n\n::::\n\n**【样例 #3】**\n\n见附件中的 ```brackets/brackets3.in``` 与 ```brackets/brackets3.ans```。\n\n这个样例满足测试点 $5 \\sim 8$ 的限制。\n\n**【样例 #4】**\n\n见附件中的 ```brackets/brackets4.in``` 与 ```brackets/brackets4.ans```。\n\n这个样例满足测试点 $9 \\sim 12$ 的限制。\n\n**【样例 #5】**\n\n见附件中的 ```brackets/brackets5.in``` 与 ```brackets/brackets5.ans```。\n\n这个样例满足测试点 $13 \\sim 20$ 的限制。\n\n---\n\n\n\n**【数据范围】**\n\n对于所有测试点，保证 $1\\le T\\le 5$，$1\\le n,m\\le 100$（$n+m$ 为奇数），$1\\le a_i,b_j\\le 10^5$，并且方格图中初始填入的字符仅含 ```L```，```R```，```X```，其中左上角和右下角的字符一定不为 ```X```。\n\n::cute-table{tuack}\n\n| **测试点编号** | $T \\le$ | $n,m \\le$ | $n+m\\le$ | **特殊性质** |\n|:-:|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $1$ | $6$ | $7$ |  无\n| $5 \\sim 8$ | $2$ | $14$ | $15$ | ^\n| $9 \\sim 12$ | $5$ | $100$ | $101$ | **A**\n| $13 \\sim 20$ | ^ | ^ | $199$ | 无\n\n特殊性质 **A**：保证 $n=1$。\n\n* 分值分配：每个测试点的分值为 $5$ 分。\n* 为避免对算法复杂度常系数的考察，本题的时间限制被设为 1.5s。", "locale": "zh-CN"}}}
{"pid": "P13732", "type": "P", "difficulty": 5, "samples": [["1\n6 1", "1 118"], ["5\n1 1\n2 3\n6 2\n7 1\n15 2", "1 1\n6 577\n4 12021\n1 103\n4 352530"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "Special Judge", "O2优化", "素数判断,质数,筛法", "排列组合"], "title": "【MGVOI R1-D】图上的数（graph）", "background": "", "description": "你有一张有向图 $G$，这张图中有着无穷多个节点，这些节点的编号为 $1,2,3,...$。\n\n对于任意两个正整数 $i,j$ 而言，当且仅当 $i$ 是 $j$ 的倍数，并且 $i \\neq j$ 时，在图 $G$ 中存在一条由 $i$ 号节点指向 $j$ 号节点的边（其长度为 $1$）。\n\n* 下图为 $G$ 中前 $6$ 号节点的状态示例：（点击查看）\n\n::::info[示例]\n![](https://cdn.luogu.com.cn/upload/image_hosting/wjfq1qxt.png)\n::::\n\n---\n\n对任意的正整数 $x$，给出如下定义：\n\n1. 从 $x$ 号节点到 $1$ 号节点的 **最长路径的长度** 为 $E(x)$；\n     \n2. 从 $x$ 号节点到 $1$ 号节点的 **最长路径的条数** 为 $T(x)$；\n     \n3. 设在所有满足 $E(y)=E(x)$ 的正整数 $y$ 中，$T(y)$ 的最大值为 $\\max \\{ T(y) \\}$，则定义 $A(x)$ 的值为 $\\dfrac{\\max \\{ T(y) \\} }{T(x)}$；\n     \n4. 特殊地，规定 $E(1)=0$，$T(1)=A(1)=1$。\n\n可以证明，$A(x)$ 一定是正整数。以下是几个便于你理解上述定义的例子：（点击查看）\n\n::::info[示例]\n1. $E(6)=2$，$T(6)=2$，因为从 $6$ 号节点到 $1$ 号节点最多可以经过 $2$ 条边，其对应的 $2$ 条最长路径分别为 $6\\rightarrow 3\\rightarrow 1$ 和 $6\\rightarrow 2\\rightarrow 1$。同理可知，$E(4)=2$，$T(4)=1$。\n\n2. $A(6)=1$，因为在所有满足 $E(y)=2$ 的正整数 $y$ 中，可以证明，$T(y)$ 的最大值即为 $2$，与 $T(6)$ 恰好相等。\n\n3. $A(4)=2$，因为在所有满足 $E(y)=2$ 的正整数 $y$ 中，$T(y)$ 的最大值 $2$ 恰好为 $T(4)$ 的 $2$ 倍。\n\n::::\n\n\n---\n\n\n给定一个正整数 $N=a^b$，在此基础上，你可以按如下规则构造出一个 $N$ 行 $N$ 列的方格图 $S_N$。\n\n对于正整数 $i,j$（$1\\le i,j\\le N$）而言：\n\n* 当 $N$ 是 $i$ 的倍数，**并且** $i$ 是 $j$ 的倍数时，第 $i$ 行第 $j$ 列的方格上写有数字 $i\\times j\\times A(j)$；\n\n* 否则，第 $i$ 行第 $j$ 列的方格上写有数字 $1$。\n\n不难验证 $A(1)=A(2)=A(3)=A(6)=1$。以下是方格图 $S_6$ 的示例：（点击查看）\n\n::::info[示例]\n|$1$|$1$|$1$|$1$|$1$|$1$|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|$2$|$4$|$1$|$1$|$1$|$1$|\n|$3$|$1$|$9$|$1$|$1$|$1$|\n|$1$|$1$|$1$|$1$|$1$|$1$|\n|$1$|$1$|$1$|$1$|$1$|$1$|\n|$6$|$12$|$18$|$1$|$1$|$36$|\n::::\n\n---\n\n你需要回答以下两个问题：\n\n* 第一问：$A(N)$ 的值是多少？\n\n* 第二问：在方格图 $S_N$ 中，所有方格上数字的总和是多少？\n\n由于答案可能很大，请将所有答案对 $10^9+7$ 取模。\n", "inputFormat": "**每个测试点包含多组测试数据，各组测试数据之间相互独立。**\n\n第一行包含一个正整数 $T$，表示测试数据的组数。\n\n对于每组测试数据：仅输入一行，包含两个正整数 $a,b$，表示给定的正整数 $N=a^b$。", "outputFormat": "对于每组测试数据：仅需在单独一行输出两个非负整数，用空格隔开，分别表示第一问和第二问的答案（均需对 $10^9+7$ 取模）。\n\n::::warning[注意事项]{open}\n即使你不回答其中一问，也需要在对应位置上输出一个小于 $10^9+7$ 的非负整数，以满足输出格式。\n\n本题通过 Special Judge 实现两问分别计分，关于具体的分值分配，请参阅【数据范围】板块。\n::::", "hint": "**【样例 #1】**\n\n::::info[样例 #1 解释]\n\n该样例下，$N=6^1=6$。\n\n在【题目描述】中已经解释过 $A(6)=1$（**即第一问的答案**），并画出了方格图 $S_6$，其中所有方格上数字的总和为 $118$（**即第二问的答案**）。\n\n::::\n\n**【样例 #2】**\n\n::::info[样例 #2 解释（第二组测试数据）]\n\n对于第二组测试数据，$N=2^3=8$。\n\n:::success[第一问的答案说明]\n\n首先可以得到 $E(8)=3$，$T(8)=1$，对应的唯一一条最长路为 $8\\rightarrow 4\\rightarrow 2\\rightarrow 1$。\n\n 其次，在所有满足 $E(y)=3$ 的正整数 $y$ 中，有 $\\max \\{ T(y) \\} =6$（详细说明见下），故 $A(8)=\\dfrac{6}{T(8)}=6$（**即第一问的答案**）。\n\n 当 $y=30$ 时，有 $E(y)=3$，$T(y)=6$，其对应的 $6$ 条最长路分别为：\n \n * $30\\rightarrow 15\\rightarrow 5\\rightarrow 1$；\n\n * $30\\rightarrow 15\\rightarrow 3\\rightarrow 1$；\n\n * $30\\rightarrow 10\\rightarrow 5\\rightarrow 1$；\n\n * $30\\rightarrow 10\\rightarrow 2\\rightarrow 1$；\n\n * $30\\rightarrow 6\\rightarrow 3\\rightarrow 1$；\n\n * $30\\rightarrow 6\\rightarrow 2\\rightarrow 1$。\n\n可以证明，$T(30)=6$ 就是在所有满足 $E(y)=3$ 的正整数 $y$ 中，$T(y)$ 的最大值。\n\n:::\n\n:::success[第二问的答案说明]\n\n列出 $A(x)$ 的值表：\n\n|$x$|$1$|$2$|$4$|$8$|\n|:-:|:-:|:-:|:-:|:-:|\n|$A(x)$|$1$|$1$|$2$|$6$|\n\n接下来，画出方格图 $S_8$：\n\n|$1$|$1$|$1$|$1$|$1$|$1$|$1$|$1$|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$2$|$4$|$1$|$1$|$1$|$1$|$1$|$1$|\n|$1$|$1$|$1$|$1$|$1$|$1$|$1$|$1$|\n|$4$|$8$|$1$|$32$|$1$|$1$|$1$|$1$|\n|$1$|$1$|$1$|$1$|$1$|$1$|$1$|$1$|\n|$1$|$1$|$1$|$1$|$1$|$1$|$1$|$1$|\n|$1$|$1$|$1$|$1$|$1$|$1$|$1$|$1$|\n|$8$|$16$|$1$|$64$|$1$|$1$|$1$|$384$|\n\n\n所有方格上数字的总和为 $577$（**即第二问的答案**）。\n:::\n\n::::\n\n---\n\n\n\n::::info[样例 #2 解释（第三组测试数据）]\n\n对于第三组测试数据，$N=6^2=36$。\n\n分析可知 $E(36)=4$，$T(36)=6$。而在所有满足 $E(y)=4$ 的正整数中，取 $y=210$ 即可最大化 $T(y)$，有 $\\max \\{ T(y) \\} =T(210)=24$，据此可得到 $A(36)=\\dfrac{T(210)}{T(36)}=4$（**即第一问的答案**）。\n\n由于方格图 $S_{36}$ 的篇幅过大，下面仅画出其最后一行（也就是第 $36$ 行）的状态，并标出列编号：\n\n\n| 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 | 26 | 27 | 28 | 29 | 30 | 31 | 32 | 33 | 34 | 35 | 36 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: \n| $36$ | $72$ | $108$ | $288$ | $1$ | $216$ | $1$ | $1$ | $648$ | $1$ | $1$ | $864$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1296$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $5184$ |\n\n在画出完整的方格图后可以验证，$S_{36}$ 中所有方格上数字的总和为 $12021$（**即第二问的答案**）。\n\n:::warning[温馨提示]\n请不要忘记将所有答案对 $10^9+7$ 取模！\n:::\n\n::::\n\n\n**【样例 #3】**\n\n见附件中的 ```graph/graph3.in``` 与 ```graph/graph3.ans```。\n\n这个样例满足测试点 $2 \\sim 4$ 的限制。\n\n**【样例 #4】**\n\n见附件中的 ```graph/graph4.in``` 与 ```graph/graph4.ans```。\n\n这个样例满足测试点 $5 \\sim 6$ 的限制。\n\n**【样例 #5】**\n\n见附件中的 ```graph/graph5.in``` 与 ```graph/graph5.ans```。\n\n这个样例满足测试点 $7 \\sim 10$ 的限制。\n\n\n\n---\n\n\n\n\n**【数据范围】**\n\n对于所有测试点，保证 $1\\le T\\le 100$，$1\\le a \\le 2\\times 10^9$，$1\\le b \\le 2\\times 10^3$。\n\n::cute-table{tuack}\n\n| **测试点编号** | $T \\le$ | $a \\le$ |  $b \\le$ | **特殊性质** |\n|:-:|:-:|:-:|:-:|:-:|\n| $1$ | $2$ | $10$ | $1$ | **AB**\n| $2\\sim 4$ | $20$ | $2\\times 10^3$ | $10$ | ^\n| $5\\sim 6$ | $100$ | $2\\times 10^9$ | $2\\times 10^3$ | **C** | \n| $7\\sim 10$ | ^ | ^ | ^ | 无\n\n特殊性质 **A**：保证 $a^b\\le 2\\times 10^3$，即 $N\\le 2\\times 10^3$。\n\n特殊性质 **B**：保证存在正整数 $k$（$k\\le 5\\times 10^5$）满足 $E(k)=E(N)$，$T(k)=A(N)\\times T(N)$。\n\n特殊性质 **C**：保证 $a$ 是质数（注意：不保证 $N$ 是质数）。\n\n* 分值分配：每个测试点的分值为 $10$ 分。对于单个测试点，如果你的程序对第一问和第二问均回答正确，则获得满分 $10$ 分；若只回答对了第一问，得 $2$ 分；若只回答对了第二问，得 $8$ 分；若两问均未答对（或输出格式错误），得 $0$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MGVOI R1-D】图上的数（graph）", "background": "", "description": "你有一张有向图 $G$，这张图中有着无穷多个节点，这些节点的编号为 $1,2,3,...$。\n\n对于任意两个正整数 $i,j$ 而言，当且仅当 $i$ 是 $j$ 的倍数，并且 $i \\neq j$ 时，在图 $G$ 中存在一条由 $i$ 号节点指向 $j$ 号节点的边（其长度为 $1$）。\n\n* 下图为 $G$ 中前 $6$ 号节点的状态示例：（点击查看）\n\n::::info[示例]\n![](https://cdn.luogu.com.cn/upload/image_hosting/wjfq1qxt.png)\n::::\n\n---\n\n对任意的正整数 $x$，给出如下定义：\n\n1. 从 $x$ 号节点到 $1$ 号节点的 **最长路径的长度** 为 $E(x)$；\n     \n2. 从 $x$ 号节点到 $1$ 号节点的 **最长路径的条数** 为 $T(x)$；\n     \n3. 设在所有满足 $E(y)=E(x)$ 的正整数 $y$ 中，$T(y)$ 的最大值为 $\\max \\{ T(y) \\}$，则定义 $A(x)$ 的值为 $\\dfrac{\\max \\{ T(y) \\} }{T(x)}$；\n     \n4. 特殊地，规定 $E(1)=0$，$T(1)=A(1)=1$。\n\n可以证明，$A(x)$ 一定是正整数。以下是几个便于你理解上述定义的例子：（点击查看）\n\n::::info[示例]\n1. $E(6)=2$，$T(6)=2$，因为从 $6$ 号节点到 $1$ 号节点最多可以经过 $2$ 条边，其对应的 $2$ 条最长路径分别为 $6\\rightarrow 3\\rightarrow 1$ 和 $6\\rightarrow 2\\rightarrow 1$。同理可知，$E(4)=2$，$T(4)=1$。\n\n2. $A(6)=1$，因为在所有满足 $E(y)=2$ 的正整数 $y$ 中，可以证明，$T(y)$ 的最大值即为 $2$，与 $T(6)$ 恰好相等。\n\n3. $A(4)=2$，因为在所有满足 $E(y)=2$ 的正整数 $y$ 中，$T(y)$ 的最大值 $2$ 恰好为 $T(4)$ 的 $2$ 倍。\n\n::::\n\n\n---\n\n\n给定一个正整数 $N=a^b$，在此基础上，你可以按如下规则构造出一个 $N$ 行 $N$ 列的方格图 $S_N$。\n\n对于正整数 $i,j$（$1\\le i,j\\le N$）而言：\n\n* 当 $N$ 是 $i$ 的倍数，**并且** $i$ 是 $j$ 的倍数时，第 $i$ 行第 $j$ 列的方格上写有数字 $i\\times j\\times A(j)$；\n\n* 否则，第 $i$ 行第 $j$ 列的方格上写有数字 $1$。\n\n不难验证 $A(1)=A(2)=A(3)=A(6)=1$。以下是方格图 $S_6$ 的示例：（点击查看）\n\n::::info[示例]\n|$1$|$1$|$1$|$1$|$1$|$1$|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|$2$|$4$|$1$|$1$|$1$|$1$|\n|$3$|$1$|$9$|$1$|$1$|$1$|\n|$1$|$1$|$1$|$1$|$1$|$1$|\n|$1$|$1$|$1$|$1$|$1$|$1$|\n|$6$|$12$|$18$|$1$|$1$|$36$|\n::::\n\n---\n\n你需要回答以下两个问题：\n\n* 第一问：$A(N)$ 的值是多少？\n\n* 第二问：在方格图 $S_N$ 中，所有方格上数字的总和是多少？\n\n由于答案可能很大，请将所有答案对 $10^9+7$ 取模。\n", "inputFormat": "**每个测试点包含多组测试数据，各组测试数据之间相互独立。**\n\n第一行包含一个正整数 $T$，表示测试数据的组数。\n\n对于每组测试数据：仅输入一行，包含两个正整数 $a,b$，表示给定的正整数 $N=a^b$。", "outputFormat": "对于每组测试数据：仅需在单独一行输出两个非负整数，用空格隔开，分别表示第一问和第二问的答案（均需对 $10^9+7$ 取模）。\n\n::::warning[注意事项]{open}\n即使你不回答其中一问，也需要在对应位置上输出一个小于 $10^9+7$ 的非负整数，以满足输出格式。\n\n本题通过 Special Judge 实现两问分别计分，关于具体的分值分配，请参阅【数据范围】板块。\n::::", "hint": "**【样例 #1】**\n\n::::info[样例 #1 解释]\n\n该样例下，$N=6^1=6$。\n\n在【题目描述】中已经解释过 $A(6)=1$（**即第一问的答案**），并画出了方格图 $S_6$，其中所有方格上数字的总和为 $118$（**即第二问的答案**）。\n\n::::\n\n**【样例 #2】**\n\n::::info[样例 #2 解释（第二组测试数据）]\n\n对于第二组测试数据，$N=2^3=8$。\n\n:::success[第一问的答案说明]\n\n首先可以得到 $E(8)=3$，$T(8)=1$，对应的唯一一条最长路为 $8\\rightarrow 4\\rightarrow 2\\rightarrow 1$。\n\n 其次，在所有满足 $E(y)=3$ 的正整数 $y$ 中，有 $\\max \\{ T(y) \\} =6$（详细说明见下），故 $A(8)=\\dfrac{6}{T(8)}=6$（**即第一问的答案**）。\n\n 当 $y=30$ 时，有 $E(y)=3$，$T(y)=6$，其对应的 $6$ 条最长路分别为：\n \n * $30\\rightarrow 15\\rightarrow 5\\rightarrow 1$；\n\n * $30\\rightarrow 15\\rightarrow 3\\rightarrow 1$；\n\n * $30\\rightarrow 10\\rightarrow 5\\rightarrow 1$；\n\n * $30\\rightarrow 10\\rightarrow 2\\rightarrow 1$；\n\n * $30\\rightarrow 6\\rightarrow 3\\rightarrow 1$；\n\n * $30\\rightarrow 6\\rightarrow 2\\rightarrow 1$。\n\n可以证明，$T(30)=6$ 就是在所有满足 $E(y)=3$ 的正整数 $y$ 中，$T(y)$ 的最大值。\n\n:::\n\n:::success[第二问的答案说明]\n\n列出 $A(x)$ 的值表：\n\n|$x$|$1$|$2$|$4$|$8$|\n|:-:|:-:|:-:|:-:|:-:|\n|$A(x)$|$1$|$1$|$2$|$6$|\n\n接下来，画出方格图 $S_8$：\n\n|$1$|$1$|$1$|$1$|$1$|$1$|$1$|$1$|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$2$|$4$|$1$|$1$|$1$|$1$|$1$|$1$|\n|$1$|$1$|$1$|$1$|$1$|$1$|$1$|$1$|\n|$4$|$8$|$1$|$32$|$1$|$1$|$1$|$1$|\n|$1$|$1$|$1$|$1$|$1$|$1$|$1$|$1$|\n|$1$|$1$|$1$|$1$|$1$|$1$|$1$|$1$|\n|$1$|$1$|$1$|$1$|$1$|$1$|$1$|$1$|\n|$8$|$16$|$1$|$64$|$1$|$1$|$1$|$384$|\n\n\n所有方格上数字的总和为 $577$（**即第二问的答案**）。\n:::\n\n::::\n\n---\n\n\n\n::::info[样例 #2 解释（第三组测试数据）]\n\n对于第三组测试数据，$N=6^2=36$。\n\n分析可知 $E(36)=4$，$T(36)=6$。而在所有满足 $E(y)=4$ 的正整数中，取 $y=210$ 即可最大化 $T(y)$，有 $\\max \\{ T(y) \\} =T(210)=24$，据此可得到 $A(36)=\\dfrac{T(210)}{T(36)}=4$（**即第一问的答案**）。\n\n由于方格图 $S_{36}$ 的篇幅过大，下面仅画出其最后一行（也就是第 $36$ 行）的状态，并标出列编号：\n\n\n| 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 | 26 | 27 | 28 | 29 | 30 | 31 | 32 | 33 | 34 | 35 | 36 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: \n| $36$ | $72$ | $108$ | $288$ | $1$ | $216$ | $1$ | $1$ | $648$ | $1$ | $1$ | $864$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1296$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $1$ | $5184$ |\n\n在画出完整的方格图后可以验证，$S_{36}$ 中所有方格上数字的总和为 $12021$（**即第二问的答案**）。\n\n:::warning[温馨提示]\n请不要忘记将所有答案对 $10^9+7$ 取模！\n:::\n\n::::\n\n\n**【样例 #3】**\n\n见附件中的 ```graph/graph3.in``` 与 ```graph/graph3.ans```。\n\n这个样例满足测试点 $2 \\sim 4$ 的限制。\n\n**【样例 #4】**\n\n见附件中的 ```graph/graph4.in``` 与 ```graph/graph4.ans```。\n\n这个样例满足测试点 $5 \\sim 6$ 的限制。\n\n**【样例 #5】**\n\n见附件中的 ```graph/graph5.in``` 与 ```graph/graph5.ans```。\n\n这个样例满足测试点 $7 \\sim 10$ 的限制。\n\n\n\n---\n\n\n\n\n**【数据范围】**\n\n对于所有测试点，保证 $1\\le T\\le 100$，$1\\le a \\le 2\\times 10^9$，$1\\le b \\le 2\\times 10^3$。\n\n::cute-table{tuack}\n\n| **测试点编号** | $T \\le$ | $a \\le$ |  $b \\le$ | **特殊性质** |\n|:-:|:-:|:-:|:-:|:-:|\n| $1$ | $2$ | $10$ | $1$ | **AB**\n| $2\\sim 4$ | $20$ | $2\\times 10^3$ | $10$ | ^\n| $5\\sim 6$ | $100$ | $2\\times 10^9$ | $2\\times 10^3$ | **C** | \n| $7\\sim 10$ | ^ | ^ | ^ | 无\n\n特殊性质 **A**：保证 $a^b\\le 2\\times 10^3$，即 $N\\le 2\\times 10^3$。\n\n特殊性质 **B**：保证存在正整数 $k$（$k\\le 5\\times 10^5$）满足 $E(k)=E(N)$，$T(k)=A(N)\\times T(N)$。\n\n特殊性质 **C**：保证 $a$ 是质数（注意：不保证 $N$ 是质数）。\n\n* 分值分配：每个测试点的分值为 $10$ 分。对于单个测试点，如果你的程序对第一问和第二问均回答正确，则获得满分 $10$ 分；若只回答对了第一问，得 $2$ 分；若只回答对了第二问，得 $8$ 分；若两问均未答对（或输出格式错误），得 $0$ 分。", "locale": "zh-CN"}}}
{"pid": "P13733", "type": "P", "difficulty": 2, "samples": [["5 2\n1 1 2 4 3", "Yes"], ["7 4\n1 1 2 3 3 5 6", "No"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "O2优化", "排序", "JOISC/JOIST（日本）"], "title": "[JOIGST 2025] 扑克 / Poker", "background": "", "description": "比太郎有 $N$ 张扑克牌，编号为 $1$ 到 $N$。每张扑克牌都有一个正整数，扑克牌 $i$ 上的正整数为 $A_i$。\n\n将满足以下条件的包含 $K$ 张扑克牌的牌组称为“顺子”：\n\n- 将这些扑克牌按照牌上的正整数从小到大排序后，任意相邻两张牌上的正整数差为 $1$。\n\n判断比太郎是否能从 $N$ 张扑克牌中选出 $K$ 张，使这 $K$ 张牌组成的牌组为一个顺子。", "inputFormat": "第一行输入两个整数 $N,K$。\n\n第二行输入 $N$ 个整数 $A_1,A_2,\\ldots,A_N$。", "outputFormat": "输出一行一个字符串，如果可以组成一个顺子输出 `Yes`，否则输出 `No`。", "hint": "#### 【样例解释 #1】\n\n可以选择 $K=2$ 张扑克牌 $1,3$，牌上的正整数分别为 $1,2$，组成了一个顺子。\n\n该样例满足所有子任务的限制。\n\n#### 【样例解释 #2】\n\n没法选出 $K=4$ 张扑克牌使其组成一个顺子。\n\n该样例满足子任务 $2,3$ 的限制。\n\n#### 【数据范围】\n\n- $2 \\le N \\le 3\\times 10^5$；\n- $2 \\le K \\le N$；\n- $1 \\le A_i \\le 10^9(1 \\le i \\le N)$。\n\n#### 【子任务】\n\n1. （$30$ 分）$K=2$；\n2. （$30$ 分）$A_i\\le 3\\times 10^5(1\\le i\\le N)$；\n3. （$40$ 分）无附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIGST 2025] 扑克 / Poker", "background": "", "description": "比太郎有 $N$ 张扑克牌，编号为 $1$ 到 $N$。每张扑克牌都有一个正整数，扑克牌 $i$ 上的正整数为 $A_i$。\n\n将满足以下条件的包含 $K$ 张扑克牌的牌组称为“顺子”：\n\n- 将这些扑克牌按照牌上的正整数从小到大排序后，任意相邻两张牌上的正整数差为 $1$。\n\n判断比太郎是否能从 $N$ 张扑克牌中选出 $K$ 张，使这 $K$ 张牌组成的牌组为一个顺子。", "inputFormat": "第一行输入两个整数 $N,K$。\n\n第二行输入 $N$ 个整数 $A_1,A_2,\\ldots,A_N$。", "outputFormat": "输出一行一个字符串，如果可以组成一个顺子输出 `Yes`，否则输出 `No`。", "hint": "#### 【样例解释 #1】\n\n可以选择 $K=2$ 张扑克牌 $1,3$，牌上的正整数分别为 $1,2$，组成了一个顺子。\n\n该样例满足所有子任务的限制。\n\n#### 【样例解释 #2】\n\n没法选出 $K=4$ 张扑克牌使其组成一个顺子。\n\n该样例满足子任务 $2,3$ 的限制。\n\n#### 【数据范围】\n\n- $2 \\le N \\le 3\\times 10^5$；\n- $2 \\le K \\le N$；\n- $1 \\le A_i \\le 10^9(1 \\le i \\le N)$。\n\n#### 【子任务】\n\n1. （$30$ 分）$K=2$；\n2. （$30$ 分）$A_i\\le 3\\times 10^5(1\\le i\\le N)$；\n3. （$40$ 分）无附加限制。", "locale": "zh-CN"}}}
{"pid": "P13734", "type": "P", "difficulty": 3, "samples": [["5\n1 1 1 1 1", "Yes"], ["3\n2 2 2", "No"], ["8\n5 4 3 2 1 2 3 4", "No"], ["16\n3 2 1 6 2 1 3 2 1 3 12 6 1 1 1 2", "Yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["二分", "2025", "O2优化", "分治", "前缀和", "JOISC/JOIST（日本）"], "title": "[JOIGST 2025] 雪球 2 / Snowball 2", "background": "", "description": "Aoi 在雪地里玩耍。在 Aoi 面前，有 $N$ 个雪球从左到右排成一列，编号为 $1$ 到 $N$。第 $i$ 个雪球初始时的大小为 $A_i$。\n\nAoi 希望她能造出一个大雪球。为此，Aoi 决定重复以下操作，直到雪球的数量变为 $1$ 或无法进行操作：\n\n- 选择相邻的两个雪球，假设左侧的雪球大小为 $l$，右侧的雪球大小为 $r$，则需要满足 $0\\le l-r\\le 1$；\n- 将选定的两个雪球合并成一个大小为 $l+r$ 的雪球；\n- 换句话说，如果操作前有 $k$ 个雪球，从左到右大小分别为 $s_1,s_2,\\ldots,s_k$，则可以选择一个 $t(1\\le t\\le k-1)$ 满足 $0\\le s_t-s_{t+1}\\le 1$ 进行操作，操作后的 $k-1$ 个雪球从左到右大小分别为 $s_1,s_2,\\ldots,s_{t-1},s_t+s_{t+1},s_{t+2},\\ldots,s_k$。\n\n判断 Aoi 是否能通过操作将所有雪球合并成一个大雪球。", "inputFormat": "第一行输入一个整数 $N$。\n\n第二行输入 $N$ 个整数 $A_1,A_2,\\ldots,A_N$。", "outputFormat": "输出一行一个字符串，如果可以合成一个大雪球输出 `Yes`，否则输出 `No`。", "hint": "#### 【样例解释 #1】\n\nAoi 可以通过执行以下操作合成一个大雪球：\n\n- 选择从左到右第 $4$ 和第 $5$ 个雪球，操作后雪球大小变为 $1,1,1,2$；\n- 选择从左到右第 $1$ 和第 $2$ 个雪球，操作后雪球大小变为 $2,1,2$；\n- 选择从左到右第 $1$ 和第 $2$ 个雪球，操作后雪球大小变为 $3,2$；\n- 选择从左到右第 $1$ 和第 $2$ 个雪球，操作后雪球大小变为 $5$。\n\n该样例满足所有子任务的限制。\n\n#### 【样例解释 #2】\n\nAoi 无法通过执行操作合成一个大雪球。\n\n该样例满足所有子任务的限制。\n\n#### 【样例解释 #3】\n\n该样例满足子任务 $2,3,4,5$ 的限制。\n\n#### 【样例解释 #4】\n\n该样例满足子任务 $3,4,5$ 的限制。\n\n#### 【数据范围】\n\n- $2\\le N\\le 5\\times 10^5$；\n- $1\\le A_i\\le 10^{12}(1\\le i\\le N)$。\n\n#### 【子任务】\n\n1. （$15$ 分）$A_1=A_2=\\cdots=A_N$；\n2. （$18$ 分）$N\\le 8$；\n3. （$18$ 分）$N\\le 200$；\n4. （$19$ 分）$N\\le 5000$；\n5. （$30$ 分）无附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIGST 2025] 雪球 2 / Snowball 2", "background": "", "description": "Aoi 在雪地里玩耍。在 Aoi 面前，有 $N$ 个雪球从左到右排成一列，编号为 $1$ 到 $N$。第 $i$ 个雪球初始时的大小为 $A_i$。\n\nAoi 希望她能造出一个大雪球。为此，Aoi 决定重复以下操作，直到雪球的数量变为 $1$ 或无法进行操作：\n\n- 选择相邻的两个雪球，假设左侧的雪球大小为 $l$，右侧的雪球大小为 $r$，则需要满足 $0\\le l-r\\le 1$；\n- 将选定的两个雪球合并成一个大小为 $l+r$ 的雪球；\n- 换句话说，如果操作前有 $k$ 个雪球，从左到右大小分别为 $s_1,s_2,\\ldots,s_k$，则可以选择一个 $t(1\\le t\\le k-1)$ 满足 $0\\le s_t-s_{t+1}\\le 1$ 进行操作，操作后的 $k-1$ 个雪球从左到右大小分别为 $s_1,s_2,\\ldots,s_{t-1},s_t+s_{t+1},s_{t+2},\\ldots,s_k$。\n\n判断 Aoi 是否能通过操作将所有雪球合并成一个大雪球。", "inputFormat": "第一行输入一个整数 $N$。\n\n第二行输入 $N$ 个整数 $A_1,A_2,\\ldots,A_N$。", "outputFormat": "输出一行一个字符串，如果可以合成一个大雪球输出 `Yes`，否则输出 `No`。", "hint": "#### 【样例解释 #1】\n\nAoi 可以通过执行以下操作合成一个大雪球：\n\n- 选择从左到右第 $4$ 和第 $5$ 个雪球，操作后雪球大小变为 $1,1,1,2$；\n- 选择从左到右第 $1$ 和第 $2$ 个雪球，操作后雪球大小变为 $2,1,2$；\n- 选择从左到右第 $1$ 和第 $2$ 个雪球，操作后雪球大小变为 $3,2$；\n- 选择从左到右第 $1$ 和第 $2$ 个雪球，操作后雪球大小变为 $5$。\n\n该样例满足所有子任务的限制。\n\n#### 【样例解释 #2】\n\nAoi 无法通过执行操作合成一个大雪球。\n\n该样例满足所有子任务的限制。\n\n#### 【样例解释 #3】\n\n该样例满足子任务 $2,3,4,5$ 的限制。\n\n#### 【样例解释 #4】\n\n该样例满足子任务 $3,4,5$ 的限制。\n\n#### 【数据范围】\n\n- $2\\le N\\le 5\\times 10^5$；\n- $1\\le A_i\\le 10^{12}(1\\le i\\le N)$。\n\n#### 【子任务】\n\n1. （$15$ 分）$A_1=A_2=\\cdots=A_N$；\n2. （$18$ 分）$N\\le 8$；\n3. （$18$ 分）$N\\le 200$；\n4. （$19$ 分）$N\\le 5000$；\n5. （$30$ 分）无附加限制。", "locale": "zh-CN"}}}
{"pid": "P13735", "type": "P", "difficulty": 2, "samples": [["5 2\nrbrbb\n5 3\n4 5", "2\n1"], ["4 3\nbrrr\n2 4\n1 3\n3 1", "1\n2\n2"], ["6 3\nbrbrbr\n1 2\n2 5\n2 4", "1\n2\n1"], ["6 5\nbbbrrr\n2 3\n2 4\n2 5\n2 6\n2 1", "1\n2\n3\n2\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "O2优化", "分类讨论", "JOISC/JOIST（日本）"], "title": "[JOIGST 2025] 魔法阵 / Magic Circle", "background": "", "description": "比太郎所在的魔法学校即将举办运动会。运动会中有一个项目，称为“魔法阵”。\n\n有 $N$ 个魔法阵依次排列在一个圆上，顺时针编号为 $1$ 到 $N$。每个魔法阵为红色或蓝色中的一种，使用长度为 $N$ 且仅包含小写字母 `b` 和 `r` 字符串 $S$ 表示：$S_j(1\\le j\\le N)$ 为 `r` 则表示魔法阵 $j$ 为红色，否则为蓝色。\n\n比太郎可以通过如下的两种方式在魔法阵中传送：\n\n- 选择一个相邻的魔法阵，花费 $1$ 秒传送过去。换句话说，可以在魔法阵 $j(1\\le j\\le N-1)$ 和 $j+1$ 间传送（两个方向均可），也可以在魔法阵 $1$ 和 $N$ 间传送（两个方向均可）；\n- 选择一个与当前所在魔法阵颜色相同的魔法阵（不一定要相邻），花费 $1$ 秒传送过去。\n\n目前他仅得知每个魔法阵的颜色，但并不知道运动会当天具体的传送计划。于是他决定考虑 $Q$ 个传送计划：在第 $i$ 个计划中，他要从魔法阵 $X_i$ 开始，花费最少的时间传送到魔法阵 $Y_i$。\n\n请你对于每一个传送计划，求出最少需要花费的时间。", "inputFormat": "第一行输入两个整数 $N,Q$。\n\n第二行输入一个字符串 $S$。\n\n接下来 $Q$ 行，每行输入两个整数 $X_i,Y_i$。", "outputFormat": "输出 $Q$ 行，在第 $i$ 行输出一个整数，表示第 $i$ 个传送计划最少需要花费的传送时间（单位：秒）。", "hint": "#### 【样例解释 #1】\n\n在此样例中，魔法阵的颜色分别为红色、蓝色、红色、蓝色、蓝色。\n\n对于第一组计划（$5\\to 3$），比太郎可以使用如下传送方案：\n\n1. 从魔法阵 $5$ 传送到相邻的魔法阵 $1$，花费 $1$ 秒；\n2. 从魔法阵 $1$ 传送到颜色相同的魔法阵 $3$，花费 $1$ 秒。\n\n最少需要花费的时间为 $2$ 秒。可以证明不可能在小于 $2$ 秒的时间内从魔法阵 $5$ 传送到魔法阵 $3$。\n\n对于第二组计划（$4\\to 5$），比太郎可以使用如下传送方案：\n\n1. 从魔法阵 $4$ 传送到颜色相同的魔法阵 $5$，花费 $1$ 秒。\n\n最少需要花费的时间为 $1$ 秒。\n\n该样例满足子任务 $5,6$ 的限制。\n\n#### 【样例解释 #2】\n\n该样例满足子任务 $2,5,6$ 的限制。\n\n#### 【样例解释 #3】\n\n该样例满足子任务 $3,5,6$ 的限制。\n\n#### 【样例解释 #4】\n\n该样例满足子任务 $4,5,6$ 的限制。\n\n#### 【数据范围】\n\n- $3\\le N\\le 5\\times 10^5$；\n- $1\\le Q\\le 5\\times 10^5$；\n- $S$ 为仅包含小写字母 `b` 和 `r` 的长度为 $N$ 的字符串；\n- $1\\le X_i,Y_i\\le N(1\\le i\\le Q)$；\n- $X_i\\ne Y_i(1\\le i\\le Q)$。\n\n#### 【子任务】\n\n1. （$6$ 分）$N=3$，$Q\\le 100$；\n2. （$13$ 分）$S_1$ 为 `b`，$S$ 的其他字符均为 `r`；\n3. （$18$ 分）$N$ 为偶数，$S$ 奇数位置的字符为 `b`，偶数位置的字符为 `r`；\n4. （$23$ 分）$N$ 为偶数，$S$ 的前 $\\frac{N}{2}$ 个字符为 `b`，后 $\\frac{N}{2}$ 个字符为 `r`；\n5. （$21$ 分）$N,Q\\le 100$；\n6. （$19$ 分）无附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOIGST 2025] 魔法阵 / Magic Circle", "background": "", "description": "比太郎所在的魔法学校即将举办运动会。运动会中有一个项目，称为“魔法阵”。\n\n有 $N$ 个魔法阵依次排列在一个圆上，顺时针编号为 $1$ 到 $N$。每个魔法阵为红色或蓝色中的一种，使用长度为 $N$ 且仅包含小写字母 `b` 和 `r` 字符串 $S$ 表示：$S_j(1\\le j\\le N)$ 为 `r` 则表示魔法阵 $j$ 为红色，否则为蓝色。\n\n比太郎可以通过如下的两种方式在魔法阵中传送：\n\n- 选择一个相邻的魔法阵，花费 $1$ 秒传送过去。换句话说，可以在魔法阵 $j(1\\le j\\le N-1)$ 和 $j+1$ 间传送（两个方向均可），也可以在魔法阵 $1$ 和 $N$ 间传送（两个方向均可）；\n- 选择一个与当前所在魔法阵颜色相同的魔法阵（不一定要相邻），花费 $1$ 秒传送过去。\n\n目前他仅得知每个魔法阵的颜色，但并不知道运动会当天具体的传送计划。于是他决定考虑 $Q$ 个传送计划：在第 $i$ 个计划中，他要从魔法阵 $X_i$ 开始，花费最少的时间传送到魔法阵 $Y_i$。\n\n请你对于每一个传送计划，求出最少需要花费的时间。", "inputFormat": "第一行输入两个整数 $N,Q$。\n\n第二行输入一个字符串 $S$。\n\n接下来 $Q$ 行，每行输入两个整数 $X_i,Y_i$。", "outputFormat": "输出 $Q$ 行，在第 $i$ 行输出一个整数，表示第 $i$ 个传送计划最少需要花费的传送时间（单位：秒）。", "hint": "#### 【样例解释 #1】\n\n在此样例中，魔法阵的颜色分别为红色、蓝色、红色、蓝色、蓝色。\n\n对于第一组计划（$5\\to 3$），比太郎可以使用如下传送方案：\n\n1. 从魔法阵 $5$ 传送到相邻的魔法阵 $1$，花费 $1$ 秒；\n2. 从魔法阵 $1$ 传送到颜色相同的魔法阵 $3$，花费 $1$ 秒。\n\n最少需要花费的时间为 $2$ 秒。可以证明不可能在小于 $2$ 秒的时间内从魔法阵 $5$ 传送到魔法阵 $3$。\n\n对于第二组计划（$4\\to 5$），比太郎可以使用如下传送方案：\n\n1. 从魔法阵 $4$ 传送到颜色相同的魔法阵 $5$，花费 $1$ 秒。\n\n最少需要花费的时间为 $1$ 秒。\n\n该样例满足子任务 $5,6$ 的限制。\n\n#### 【样例解释 #2】\n\n该样例满足子任务 $2,5,6$ 的限制。\n\n#### 【样例解释 #3】\n\n该样例满足子任务 $3,5,6$ 的限制。\n\n#### 【样例解释 #4】\n\n该样例满足子任务 $4,5,6$ 的限制。\n\n#### 【数据范围】\n\n- $3\\le N\\le 5\\times 10^5$；\n- $1\\le Q\\le 5\\times 10^5$；\n- $S$ 为仅包含小写字母 `b` 和 `r` 的长度为 $N$ 的字符串；\n- $1\\le X_i,Y_i\\le N(1\\le i\\le Q)$；\n- $X_i\\ne Y_i(1\\le i\\le Q)$。\n\n#### 【子任务】\n\n1. （$6$ 分）$N=3$，$Q\\le 100$；\n2. （$13$ 分）$S_1$ 为 `b`，$S$ 的其他字符均为 `r`；\n3. （$18$ 分）$N$ 为偶数，$S$ 奇数位置的字符为 `b`，偶数位置的字符为 `r`；\n4. （$23$ 分）$N$ 为偶数，$S$ 的前 $\\frac{N}{2}$ 个字符为 `b`，后 $\\frac{N}{2}$ 个字符为 `r`；\n5. （$21$ 分）$N,Q\\le 100$；\n6. （$19$ 分）无附加限制。", "locale": "zh-CN"}}}
