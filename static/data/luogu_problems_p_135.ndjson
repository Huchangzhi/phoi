{"pid": "P3735", "type": "P", "difficulty": 7, "samples": [["1\nxyz\n3\nxz\ny\nxzy", "2\n3\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2017", "河南", "各省省选"], "title": "[HAOI2017] 字符串", "background": "", "description": "给出一个字符串 $ s $ 和 $ n $ 个字符串 $ p_i $，求每个字符串 $ p_i $ 在 $ s $ 中出现的次数。注意这里两个字符串相等的定义稍作改变。\n\n\n给定一个常数 $ k $，对于两个字符串 $ a, b $，如果 $ a = b $，那么满足：\n\n\n一、$ |a| = |b| $\n\n二、对于所有 $ a_i \\neq b_i $ 以及 $ a_j \\neq b_j $，满足 $ |i-j| < k $\n\n如果 $ |a| = |b| \\le k $，那么认为 $ a = b $。", "inputFormat": "第一行一个整数 $ k $。\n\n\n第二行一个字符串 $ s $。\n\n\n第三行一个整数 $ n $，接下来 $ n $ 行每行一个字符串表示 $ p_i $。\n\n\n所有的字符 ASCII 码在 $ 33 $ 至 $ 126 $ 之间。\n", "outputFormat": "输出 $ n $ 行，表示每个 $ p_i $ 在 $ s $ 中出现的次数。\n", "hint": "对于 $ p_1 $，$ xz = xy, xz = yz $，因为都只有一个位置差异。\n\n\n对于 $ p_2 $，$ y = x, y = y, y = z $，同理。\n\n\n对于 $ p_3 $，$ xzy \\neq xyz $，最大差 $ = 1 $ 不满足 $ < k = 1 $。\n\n\n数据范围与提示\n\n\n对于 $ 20\\% $ 的数据，满足：$ |s|, \\Sigma |p_i| \\le 10^3 $\n\n对于另外 $ 20\\% $ 的数据，满足：$ n \\le 100 $\n\n\n对于另外 $ 20\\% $ 的数据，满足：$ |s|, \\Sigma |p_i| \\le 5 \\cdot 10^4 $\n\n对于 $ 100\\% $ 的数据，满足：$ |s|, \\Sigma |p_i| \\le 2 \\cdot 10^5 $\n", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2017] String", "background": "", "description": "Given a string $ s $ and $ n $ strings $ p_i $, for each string $ p_i $ count the number of its occurrences in $ s $. Note that the definition of equality between two strings is slightly modified here.\n\nGiven a constant $ k $, for two strings $ a, b $, we define $ a = b $ if the following hold:\n1. $ |a| = |b| $.\n2. For all $ a_i \\ne b_i $ and $ a_j \\ne b_j $, it holds that $ |i - j| < k $.\n\nIf $ |a| = |b| \\le k $, then we regard $ a = b $.", "inputFormat": "The first line contains an integer $ k $.\n\nThe second line contains a string $ s $.\n\nThe third line contains an integer $ n $, followed by $ n $ lines, each containing a string denoting $ p_i $.\n\nAll characters have ASCII codes in the range $ 33 $ to $ 126 $.", "outputFormat": "Output $ n $ lines, where the $ i $-th line is the number of occurrences of $ p_i $ in $ s $.", "hint": "For $ p_1 $, $ xz = xy, xz = yz $, because there is only one differing position.\n\nFor $ p_2 $, $ y = x, y = y, y = z $, similarly.\n\nFor $ p_3 $, $ xzy \\ne xyz $, the maximum difference $ = 1 $ does not satisfy $ < k = 1 $.\n\nConstraints\n\n- For $ 20\\% $ of the testdata, it holds that: $ |s|, \\Sigma |p_i| \\le 10^3 $.\n- For another $ 20\\% $ of the testdata, it holds that: $ n \\le 100 $.\n- For another $ 20\\% $ of the testdata, it holds that: $ |s|, \\Sigma |p_i| \\le 5 \\cdot 10^4 $.\n- For $ 100\\% $ of the testdata, it holds that: $ |s|, \\Sigma |p_i| \\le 2 \\cdot 10^5 $.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2017] 字符串", "background": "", "description": "给出一个字符串 $ s $ 和 $ n $ 个字符串 $ p_i $，求每个字符串 $ p_i $ 在 $ s $ 中出现的次数。注意这里两个字符串相等的定义稍作改变。\n\n\n给定一个常数 $ k $，对于两个字符串 $ a, b $，如果 $ a = b $，那么满足：\n\n\n一、$ |a| = |b| $\n\n二、对于所有 $ a_i \\neq b_i $ 以及 $ a_j \\neq b_j $，满足 $ |i-j| < k $\n\n如果 $ |a| = |b| \\le k $，那么认为 $ a = b $。", "inputFormat": "第一行一个整数 $ k $。\n\n\n第二行一个字符串 $ s $。\n\n\n第三行一个整数 $ n $，接下来 $ n $ 行每行一个字符串表示 $ p_i $。\n\n\n所有的字符 ASCII 码在 $ 33 $ 至 $ 126 $ 之间。\n", "outputFormat": "输出 $ n $ 行，表示每个 $ p_i $ 在 $ s $ 中出现的次数。\n", "hint": "对于 $ p_1 $，$ xz = xy, xz = yz $，因为都只有一个位置差异。\n\n\n对于 $ p_2 $，$ y = x, y = y, y = z $，同理。\n\n\n对于 $ p_3 $，$ xzy \\neq xyz $，最大差 $ = 1 $ 不满足 $ < k = 1 $。\n\n\n数据范围与提示\n\n\n对于 $ 20\\% $ 的数据，满足：$ |s|, \\Sigma |p_i| \\le 10^3 $\n\n对于另外 $ 20\\% $ 的数据，满足：$ n \\le 100 $\n\n\n对于另外 $ 20\\% $ 的数据，满足：$ |s|, \\Sigma |p_i| \\le 5 \\cdot 10^4 $\n\n对于 $ 100\\% $ 的数据，满足：$ |s|, \\Sigma |p_i| \\le 2 \\cdot 10^5 $\n", "locale": "zh-CN"}}}
{"pid": "P3736", "type": "P", "difficulty": 6, "samples": [["3 2\n1 0 1\n1 10\n1 10\n0 20\n1 30\n", "40"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2016", "河南", "各省省选", "枚举", "状压 DP"], "title": "[HAOI2016] 字符合并", "background": null, "description": "有一个长度为 $n$ 的 $01$ 串，你可以每次将相邻的 $k$ 个字符合并，得到一个新的字符并获得一定分数。\n\n得到的新字符和分数由这 $k$ 个字符确定。你需要求出你能获得的最大分数。", "inputFormat": "输入的第一行是两个整数，分别代表字符串长度 $n$ 和参数 $k$。  \n\n输入的第二行有 $n$ 个用空格隔开的非零即一的字符，第 $i$ 个字符表示初始串的第 $i$ 个字符。\n\n第 $3$ 到第 $(2^k + 2)$ 行，每行有一个字符和一个整数，第 $(i + 2)$ 行的字符 $c_i$ 表示长度为 $k$ 的 $01$ 串连成二进制后按从小到大顺序得到的第 $i$ 种合并方案得到的新字符, 整数 $w_i$ 表示对应的第 $i$ 种方案对应获得的分数。", "outputFormat": "输出一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\leq n\\leq 300$，$1 \\lt k \\leq 8$。\n- $c_i\\in\\{0,1\\}$，$1 \\leq w_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2016] Character Merge", "background": "", "description": "You are given a $01$ string of length $n$. Each time, you may merge $k$ adjacent characters to obtain a new character and gain a certain score.\n\nThe resulting character and the score are determined by these $k$ characters. You need to find the maximum total score you can obtain.", "inputFormat": "The first line contains two integers, the string length $n$ and the parameter $k$.\n\nThe second line contains $n$ space-separated characters, each either $0$ or $1$. The $i$-th character is the $i$-th character of the initial string.\n\nFrom the $3$-rd to the $(2^k + 2)$-th lines, each line contains one character and one integer. On line $(i + 2)$, the character $c_i$ is the resulting character for the $i$-th length-$k$ $01$ string when these $k$-bit strings are interpreted as binary numbers and ordered increasingly; the integer $w_i$ is the score for the corresponding $i$-th pattern.", "outputFormat": "Output a single integer denoting the answer.", "hint": "Constraints\n\n- For $100\\%$ of the testdata, it is guaranteed that:\n  - $1 \\leq n \\leq 300$, $1 < k \\leq 8$.\n  - $c_i \\in \\{0, 1\\}$, $1 \\leq w_i \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2016] 字符合并", "background": null, "description": "有一个长度为 $n$ 的 $01$ 串，你可以每次将相邻的 $k$ 个字符合并，得到一个新的字符并获得一定分数。\n\n得到的新字符和分数由这 $k$ 个字符确定。你需要求出你能获得的最大分数。", "inputFormat": "输入的第一行是两个整数，分别代表字符串长度 $n$ 和参数 $k$。  \n\n输入的第二行有 $n$ 个用空格隔开的非零即一的字符，第 $i$ 个字符表示初始串的第 $i$ 个字符。\n\n第 $3$ 到第 $(2^k + 2)$ 行，每行有一个字符和一个整数，第 $(i + 2)$ 行的字符 $c_i$ 表示长度为 $k$ 的 $01$ 串连成二进制后按从小到大顺序得到的第 $i$ 种合并方案得到的新字符, 整数 $w_i$ 表示对应的第 $i$ 种方案对应获得的分数。", "outputFormat": "输出一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\leq n\\leq 300$，$1 \\lt k \\leq 8$。\n- $c_i\\in\\{0,1\\}$，$1 \\leq w_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P3737", "type": "P", "difficulty": 3, "samples": [["3 2\n1 2\n-3 1\n2 1\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "贪心", "2014", "河南", "各省省选"], "title": "[HAOI2014] 遥感监测", "background": "", "description": "外星人指的是地球以外的智慧生命。外星人长的是不是与地球上的人一样并不重要，但起码应该符合我们目前对生命基本形式的认识。比如，我们所知的任何生命都离不开液态水，并且都是基于化学元素碳（C）的有机分子组合成的复杂有机体。\n\nZDM 实验室的天文学家们已经执著地观测 ZDM-99 星球十多年了，这个被称为“战神”的红色星球让他们如此着迷。在过去的十多年中，他们经常有一些令人激动的发现。ZDM-99 星球表面有着明显的明暗变化。对这些明暗区域，天文学家们已经细致地研究了很多年，并且绘制出了较为详尽的地图，那些暗区是陆地，而亮区则是湖泊和海洋。他们一直坚信有水的地方，一定有生命的痕迹。\n\n这天晚上的观测条件实在是空前的好，ZDM-99 星球也十分明亮，不时呈现出若干个激光点，天文学家们推定这些激光点极有可能存在地球以外的智慧生命。遗憾的是仅持续很短的一段时间，这些激光点就消失了。\n\nZDM 实验室的射电望远镜观测的区域有限，只可以遥感检测到一个半径为 $R$ 的圆形区域。为了能同时能检测到所有的激光点，ZDM 实验室需要要在一个水平的直线上尽快地安装多个的射电望远镜来。\n\n不妨设，这条安放射电望远镜的水平直线为 X 轴，ZDM-99 星球激光点就处在 $P_1(x_1,y_1),P_1(x_1,y_1),\\cdots,P_1(x_n,y_n)$（忽略 Z 坐标）\n\n ![](https://cdn.luogu.com.cn/upload/pic/5206.png) \n\nZDM 实验室的天文学家们想知道，至少需要安装多少个射电望远镜才能检测到所有激光点。\n", "inputFormat": "第 1 行，$N, R$ 分别表示激光点的个数和射电望远镜能检测到的半径。\n\n第 $2$ 到 $N+1$ 行，$X_i,Y_i$ 表示 激光点的坐标位置。", "outputFormat": "输出一行： 最少需要安装的射电望远镜数。\n", "hint": "$1≤R≤50$，$1≤N≤100$，$-1000≤ X_i,Y_i ≤ 1000$， $|Y_i| ≤ R$。\n\n保证输入都是整数。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2014] Remote Sensing Monitoring", "background": "", "description": "Aliens are intelligent life beyond Earth. Whether aliens look like humans is not important, but at least they should fit our current understanding of basic life forms. For example, every life form we know depends on liquid water and is composed of complex organisms based on organic molecules of the chemical element carbon (C).\n\nAstronomers at the ZDM Laboratory have persistently observed the planet ZDM-99 for more than ten years. This red planet, nicknamed the “War God,” fascinates them. Over the years, they have made many exciting discoveries. The surface of ZDM-99 shows obvious variations in brightness. After years of detailed study and mapping, astronomers have concluded that the dark regions are land, while the bright regions are lakes and oceans. They firmly believe that where there is water, there must be traces of life.\n\nThe observing conditions on this night were unprecedentedly good. ZDM-99 was very bright, and several laser points appeared from time to time. The astronomers inferred that these laser points were very likely signs of intelligent life beyond Earth. Unfortunately, the laser points disappeared after only a short time.\n\nThe radio telescopes of the ZDM Laboratory can each remotely sense a circular region with radius $R$. To detect all laser points simultaneously, the laboratory plans to install multiple radio telescopes along a single horizontal straight line.\n\nAssume this horizontal line for placing radio telescopes is the $x$-axis. The laser points on ZDM-99 are located at\n$P_1(x_1, y_1), P_2(x_2, y_2), \\cdots, P_n(x_n, y_n)$ (ignore the $z$ coordinate).\n\n ![](https://cdn.luogu.com.cn/upload/pic/5206.png) \n\nThe astronomers at the ZDM Laboratory want to know the minimum number of radio telescopes needed to detect all the laser points.", "inputFormat": "The first line contains $N, R$, denoting the number of laser points and the detection radius of a radio telescope.\n\nLines $2$ to $N+1$ contain $X_i, Y_i$, the coordinates of the $i$-th laser point.", "outputFormat": "Output a single line: the minimum number of radio telescopes required.", "hint": "Constraints: $1 \\le R \\le 50$, $1 \\le N \\le 100$, $-1000 \\le X_i, Y_i \\le 1000$, $|Y_i| \\le R$.\n\nAll inputs are guaranteed to be integers.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2014] 遥感监测", "background": "", "description": "外星人指的是地球以外的智慧生命。外星人长的是不是与地球上的人一样并不重要，但起码应该符合我们目前对生命基本形式的认识。比如，我们所知的任何生命都离不开液态水，并且都是基于化学元素碳（C）的有机分子组合成的复杂有机体。\n\nZDM 实验室的天文学家们已经执著地观测 ZDM-99 星球十多年了，这个被称为“战神”的红色星球让他们如此着迷。在过去的十多年中，他们经常有一些令人激动的发现。ZDM-99 星球表面有着明显的明暗变化。对这些明暗区域，天文学家们已经细致地研究了很多年，并且绘制出了较为详尽的地图，那些暗区是陆地，而亮区则是湖泊和海洋。他们一直坚信有水的地方，一定有生命的痕迹。\n\n这天晚上的观测条件实在是空前的好，ZDM-99 星球也十分明亮，不时呈现出若干个激光点，天文学家们推定这些激光点极有可能存在地球以外的智慧生命。遗憾的是仅持续很短的一段时间，这些激光点就消失了。\n\nZDM 实验室的射电望远镜观测的区域有限，只可以遥感检测到一个半径为 $R$ 的圆形区域。为了能同时能检测到所有的激光点，ZDM 实验室需要要在一个水平的直线上尽快地安装多个的射电望远镜来。\n\n不妨设，这条安放射电望远镜的水平直线为 X 轴，ZDM-99 星球激光点就处在 $P_1(x_1,y_1),P_1(x_1,y_1),\\cdots,P_1(x_n,y_n)$（忽略 Z 坐标）\n\n ![](https://cdn.luogu.com.cn/upload/pic/5206.png) \n\nZDM 实验室的天文学家们想知道，至少需要安装多少个射电望远镜才能检测到所有激光点。\n", "inputFormat": "第 1 行，$N, R$ 分别表示激光点的个数和射电望远镜能检测到的半径。\n\n第 $2$ 到 $N+1$ 行，$X_i,Y_i$ 表示 激光点的坐标位置。", "outputFormat": "输出一行： 最少需要安装的射电望远镜数。\n", "hint": "$1≤R≤50$，$1≤N≤100$，$-1000≤ X_i,Y_i ≤ 1000$， $|Y_i| ≤ R$。\n\n保证输入都是整数。", "locale": "zh-CN"}}}
{"pid": "P3738", "type": "P", "difficulty": 5, "samples": [["7 \n0 1 \n2 0\n4 1\n2 2 \n4 3 \n2 4 \n0 3 \n3 -1", "2"], ["4\n10 100\n10 0\n100 0\n100 100\n100 -80", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["计算几何", "2014", "河南", "各省省选"], "title": "[HAOI2014] 穿越封锁线", "background": null, "description": "某敌占区是一个封闭的多边形，用相邻的顶点集合 $P_1(x_1,y_1)$，$P_2(x_2,y_2)$，$\\cdots$，$P_n(x_n,y_n)$ 表示。\n\n我方侦察员 ZDM-007 要穿越敌占区的封锁线，为了安全起见，ZDM-007 行走的路线垂直于 X 坐标轴，从南向北穿越。\n\n现在已知侦察员 ZDM-007 所处的位置，你能算出他在穿越封锁线时，其路线在敌占区内的总长度？\n\n![](https://cdn.luogu.com.cn/upload/pic/5207.png)", "inputFormat": "第一行：$n$ 表示多边形顶点的个数\n\n接下来 $n$ 行：$x_i,y_i$ 表示多边形的顶点坐标。（按逆时针顺序给出）\n\n最后一行：$X,Y$ 表示侦察员初始时所处的位置。", "outputFormat": "侦察员穿越封锁线时，在敌占区内的总长度。（输出仅保留整数部分）", "hint": "【约束条件】\n\n$3\\le n\\le 50,0\\le x_i,y_i\\le1000,0\\le X \\le1000,-100\\le Y < 0$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2014] Crossing the Blockade Line", "background": "", "description": "An enemy-occupied area is a closed polygon represented by consecutive vertices $P_1(x_1,y_1)$, $P_2(x_2,y_2)$, $\\cdots$, $P_n(x_n,y_n)$.\n\nOur scout ZDM-007 needs to cross the blockade line of the enemy-occupied area. For safety, ZDM-007 travels along a path perpendicular to the $X$-axis, moving from south to north.\n\nGiven the current position of ZDM-007, can you compute the total length of his route that lies inside the enemy-occupied area while he crosses the blockade line?\n\n![](https://cdn.luogu.com.cn/upload/pic/5207.png)", "inputFormat": "The first line: $n$, the number of polygon vertices.\n\nThe next $n$ lines: $x_i, y_i$, the coordinates of the polygon vertices (given in counterclockwise order).\n\nThe last line: $X, Y$, the scout’s initial position.", "outputFormat": "Output the total length of the scout’s path that lies inside the enemy-occupied area while crossing the blockade line. Print only the integer part.", "hint": "Constraints\n\n$3\\le n\\le 50, 0\\le x_i, y_i \\le 1000, 0\\le X \\le 1000, -100\\le Y < 0$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2014] 穿越封锁线", "background": null, "description": "某敌占区是一个封闭的多边形，用相邻的顶点集合 $P_1(x_1,y_1)$，$P_2(x_2,y_2)$，$\\cdots$，$P_n(x_n,y_n)$ 表示。\n\n我方侦察员 ZDM-007 要穿越敌占区的封锁线，为了安全起见，ZDM-007 行走的路线垂直于 X 坐标轴，从南向北穿越。\n\n现在已知侦察员 ZDM-007 所处的位置，你能算出他在穿越封锁线时，其路线在敌占区内的总长度？\n\n![](https://cdn.luogu.com.cn/upload/pic/5207.png)", "inputFormat": "第一行：$n$ 表示多边形顶点的个数\n\n接下来 $n$ 行：$x_i,y_i$ 表示多边形的顶点坐标。（按逆时针顺序给出）\n\n最后一行：$X,Y$ 表示侦察员初始时所处的位置。", "outputFormat": "侦察员穿越封锁线时，在敌占区内的总长度。（输出仅保留整数部分）", "hint": "【约束条件】\n\n$3\\le n\\le 50,0\\le x_i,y_i\\le1000,0\\le X \\le1000,-100\\le Y < 0$。", "locale": "zh-CN"}}}
{"pid": "P3739", "type": "P", "difficulty": 4, "samples": [["4 2 2 10\n2 1\n3 5\n4 4", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "河南", "各省省选"], "title": "[HAOI2014] 走出金字塔", "background": "", "description": "在探险的过程中，考古学家 Dr. Kong 无意地被困在一个金字塔中。金字塔中的每个房间都是三角形。Dr. Kong 可以破壁走到相邻的房间去。例如，如果他目前处于三角形 $(2,2)$ 房间，那么他可以破壁走到三角形 $(2,1)$、$(2,3)$ 或 $(1,1)$ 房间。但破壁一面墙需要花费 $K$ 分钟时间，而考古学家 Dr. Kong 的体能只能支持他 $S$ 分钟。\n\n\n好在 Dr. Kong 手中有这个金字塔地图，他发现金字塔有许多出口，一旦他进入一个有出口的三角形房间，他再用 $1$ 分钟就可以走出金字塔。\n\n现在，你能否帮助 Dr. Kong 找到一个走出金字塔花费时间最少的出口？若能，输出 Dr. Kong 走出金字塔后还剩下的体能时间（应当大于或等于 $0$）；若不能，输出 $-1$。\n\n![](https://cdn.luogu.com.cn/upload/pic/5208.png)\n", "inputFormat": "第一行共四个整数，$N,M,K,S$，其中，\n\n- $N$ 表示金字塔的层数；\n- $M$ 表示出口数；\n- $K$ 表示破壁一面墙的时间；\n- $S$ 表示考古学家 Dr. Kong 体能维持分钟数。\n\n第二行有两个整数 $X_a,Y_a$ 表示考古学家 Dr. Kong 所在的位置；\n\n第三行至第 $M+2$ 行，每行有两个整数 $X_i,Y_i$，表示有出口的三角形坐标位置。\n", "outputFormat": "输出 Dr. Kong 走出金字塔后还剩下的体能时间；若不能，输出 $-1$。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$1 \\le N \\le 10^6$，$0\\le M\\le 10^4$，$0<K\\le 20$，$10\\le S\\le 10^4$。\n\n所有的数据都是整数，且数据之间有一个空格。\n", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2014] Escape from the Pyramid", "background": "", "description": "During an expedition, the archaeologist Dr. Kong was accidentally trapped inside a pyramid. Each room in the pyramid is triangular. Dr. Kong can break through a wall to move to an adjacent room. For example, if he is currently in triangular room $(2,2)$, he can break through to triangular room $(2,1)$, $(2,3)$, or $(1,1)$. However, breaking through one wall takes $K$ minutes, and Dr. Kong’s stamina only lasts for $S$ minutes.\n\nFortunately, Dr. Kong has a map of the pyramid and finds that there are many exits. Once he enters a triangular room that has an exit, he can leave the pyramid in $1$ minute.\n\nNow, can you help Dr. Kong find an exit that minimizes the total time to escape? If possible, output the remaining stamina time after Dr. Kong escapes (it should be greater than or equal to $0$); otherwise, output $-1$.\n\n![](https://cdn.luogu.com.cn/upload/pic/5208.png)", "inputFormat": "The first line contains four integers $N, M, K, S$, where:\n\n- $N$ is the number of layers of the pyramid.\n- $M$ is the number of exits.\n- $K$ is the time to break through one wall.\n- $S$ is the number of minutes Dr. Kong’s stamina lasts.\n\nThe second line contains two integers $X_a, Y_a$ indicating Dr. Kong’s current position.\n\nFrom the third line to the $(M+2)$-th line, each line contains two integers $X_i, Y_i$ indicating the coordinates of a triangular room that has an exit.", "outputFormat": "Output the remaining stamina time after Dr. Kong escapes; if it is impossible, output $-1$.", "hint": "Constraints and Conventions\n\nFor all testdata, $1 \\le N \\le 10^6$, $0 \\le M \\le 10^4$, $0 < K \\le 20$, $10 \\le S \\le 10^4$.\n\nAll numbers are integers, and values are separated by a single space.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2014] 走出金字塔", "background": "", "description": "在探险的过程中，考古学家 Dr. Kong 无意地被困在一个金字塔中。金字塔中的每个房间都是三角形。Dr. Kong 可以破壁走到相邻的房间去。例如，如果他目前处于三角形 $(2,2)$ 房间，那么他可以破壁走到三角形 $(2,1)$、$(2,3)$ 或 $(1,1)$ 房间。但破壁一面墙需要花费 $K$ 分钟时间，而考古学家 Dr. Kong 的体能只能支持他 $S$ 分钟。\n\n\n好在 Dr. Kong 手中有这个金字塔地图，他发现金字塔有许多出口，一旦他进入一个有出口的三角形房间，他再用 $1$ 分钟就可以走出金字塔。\n\n现在，你能否帮助 Dr. Kong 找到一个走出金字塔花费时间最少的出口？若能，输出 Dr. Kong 走出金字塔后还剩下的体能时间（应当大于或等于 $0$）；若不能，输出 $-1$。\n\n![](https://cdn.luogu.com.cn/upload/pic/5208.png)\n", "inputFormat": "第一行共四个整数，$N,M,K,S$，其中，\n\n- $N$ 表示金字塔的层数；\n- $M$ 表示出口数；\n- $K$ 表示破壁一面墙的时间；\n- $S$ 表示考古学家 Dr. Kong 体能维持分钟数。\n\n第二行有两个整数 $X_a,Y_a$ 表示考古学家 Dr. Kong 所在的位置；\n\n第三行至第 $M+2$ 行，每行有两个整数 $X_i,Y_i$，表示有出口的三角形坐标位置。\n", "outputFormat": "输出 Dr. Kong 走出金字塔后还剩下的体能时间；若不能，输出 $-1$。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$1 \\le N \\le 10^6$，$0\\le M\\le 10^4$，$0<K\\le 20$，$10\\le S\\le 10^4$。\n\n所有的数据都是整数，且数据之间有一个空格。\n", "locale": "zh-CN"}}}
{"pid": "P3740", "type": "P", "difficulty": 4, "samples": [["100 5\n1 4\n2 6\n8 10\n3 4\n7 10\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "河南", "线段树", "各省省选", "颜色段均摊（珂朵莉树 ODT）", "离散化", "枚举"], "title": "[HAOI2014] 贴海报", "background": "", "description": "Bytetown 城市要进行市长竞选，所有的选民可以畅所欲言地对竞选市长的候选人发表言论。为了统一管理，城市委员会为选民准备了一个张贴海报的 electoral 墙。\n\n张贴规则如下：\n\n1. electoral 墙是一个长度为 $N$ 个单位的长方形，每个单位记为一个格子；\n\n2. 所有张贴的海报的高度必须与 electoral 墙的高度一致的；\n\n3. 每张海报以 `A B` 表示，即从第 $A$ 个格子到第 $B$ 个格子张贴海报；\n\n4. 后贴的海报可以覆盖前面已贴的海报或部分海报。\n\n现在请你判断，张贴完所有海报后，在 electoral 墙上还可以看见多少张海报。", "inputFormat": "第一行，两个正整数 $N,M$，分别表示 electoral 墙的长度和海报个数。\n\n接下来 $M$ 行，每行两个正整数 $A_i,B_i$，表示每张海报张贴的位置。\n", "outputFormat": "输出贴完所有海报后，在 electoral 墙上还可以看见的海报数。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/5209.png) \n\n**约束条件**\n\n$10\\le N \\le 10000000,1\\le M\\le 1000,1\\le A_i \\le B_i \\le 10000000$\n\n所有的数据都是正整数，数据之间有一个空格。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2014] Posters", "background": "", "description": "The city of Bytetown is holding a mayoral election, and all voters can freely express their opinions about the candidates. For unified management, the city committee has prepared an electoral wall for voters to post posters.\n\nThe posting rules are as follows:\n1. The electoral wall is a rectangle of length $N$ units, with each unit being a cell.\n2. The height of every posted poster must be the same as the height of the electoral wall.\n3. Each poster is denoted by `A B`, meaning it covers from cell $A$ to cell $B$.\n4. A later poster may cover earlier posters or parts of them.\n\nPlease determine how many posters are still visible on the electoral wall after all posters have been posted.", "inputFormat": "The first line contains two positive integers $N$ and $M$, the length of the electoral wall and the number of posters, respectively.\n\nEach of the next $M$ lines contains two positive integers $A_i$ and $B_i$, denoting the position covered by a poster.\n\nAll numbers are positive integers, separated by a single space.", "outputFormat": "Output the number of posters that remain visible after all posters have been posted.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/5209.png)\n\n**Constraints**\n\n$10 \\le N \\le 10000000$, $1 \\le M \\le 1000$, $1 \\le A_i \\le B_i \\le 10000000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2014] 贴海报", "background": "", "description": "Bytetown 城市要进行市长竞选，所有的选民可以畅所欲言地对竞选市长的候选人发表言论。为了统一管理，城市委员会为选民准备了一个张贴海报的 electoral 墙。\n\n张贴规则如下：\n\n1. electoral 墙是一个长度为 $N$ 个单位的长方形，每个单位记为一个格子；\n\n2. 所有张贴的海报的高度必须与 electoral 墙的高度一致的；\n\n3. 每张海报以 `A B` 表示，即从第 $A$ 个格子到第 $B$ 个格子张贴海报；\n\n4. 后贴的海报可以覆盖前面已贴的海报或部分海报。\n\n现在请你判断，张贴完所有海报后，在 electoral 墙上还可以看见多少张海报。", "inputFormat": "第一行，两个正整数 $N,M$，分别表示 electoral 墙的长度和海报个数。\n\n接下来 $M$ 行，每行两个正整数 $A_i,B_i$，表示每张海报张贴的位置。\n", "outputFormat": "输出贴完所有海报后，在 electoral 墙上还可以看见的海报数。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/5209.png) \n\n**约束条件**\n\n$10\\le N \\le 10000000,1\\le M\\le 1000,1\\le A_i \\le B_i \\le 10000000$\n\n所有的数据都是正整数，数据之间有一个空格。", "locale": "zh-CN"}}}
{"pid": "P3741", "type": "P", "difficulty": 1, "samples": [["2\nVK\n", "1"], ["2\nVV", "1"], ["1\nV", "0"], ["20\nVKKKKKKKKKVVVVVVVVVK", "3"], ["4\nKVKV\n", "1\n"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "搜索"], "title": "小果的键盘", "background": "小果有一个只有两个键的键盘。\n", "description": "一天，她打出了一个只有这两个字符的字符串。当这个字符串里含有 `VK` 这个字符串的时候，小果就特别喜欢这个字符串。所以，她想改变至多一个字符（或者不做任何改变）来最大化这个字符串内 `VK` 出现的次数。给出原来的字符串，请计算她最多能使这个字符串内出现多少次 `VK`（只有当 `V` 和 `K` 正好相邻时，我们认为出现了 `VK`。）", "inputFormat": "第一行给出一个数字 $n$，代表字符串的长度。\n\n第二行给出一个字符串 $s$。", "outputFormat": "第一行输出一个整数代表所求答案。\n", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Guo's Keyboard", "background": "Xiao Guo has a keyboard with only two keys.", "description": "One day, she typed a string consisting of only these two characters. She especially likes a string when it contains the substring `VK`. Therefore, she wants to change at most one character (or do nothing) to maximize the number of occurrences of `VK` in the string. Given the original string, compute the maximum number of times `VK` can appear in the string. We consider `VK` to occur only when `V` and `K` are exactly adjacent.", "inputFormat": "The first line contains an integer $n$, the length of the string.\n\nThe second line contains a string $s$.", "outputFormat": "Output a single integer, the answer.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小果的键盘", "background": "小果有一个只有两个键的键盘。\n", "description": "一天，她打出了一个只有这两个字符的字符串。当这个字符串里含有 `VK` 这个字符串的时候，小果就特别喜欢这个字符串。所以，她想改变至多一个字符（或者不做任何改变）来最大化这个字符串内 `VK` 出现的次数。给出原来的字符串，请计算她最多能使这个字符串内出现多少次 `VK`（只有当 `V` 和 `K` 正好相邻时，我们认为出现了 `VK`。）", "inputFormat": "第一行给出一个数字 $n$，代表字符串的长度。\n\n第二行给出一个字符串 $s$。", "outputFormat": "第一行输出一个整数代表所求答案。\n", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P3742", "type": "P", "difficulty": 1, "samples": [["2\nab\naa", "ba"], ["5\nnzwzl\nniwel", "xiyez\n"], ["2\nab\nba\n", "-1"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "字符串", "贪心", "Special Judge", "构造"], "title": "umi的函数", "background": "umi 找到了一个神秘的函数 $f$。\n", "description": "这个函数接受两个字符串 $s1,s2$。这些字符串只能由小写字母组成，并且具有相同的长度。这个函数的输出是另一个长度与 $s1,s2$ 相同的字符串 $g$。$g$ 的第 $i$ 个字符等于 $s1$ 的第 $i$ 个字符和 $s2$ 的第 $i$ 个字符的最小值，简单来说，$g_i=min(s1_i,s2_i)$。\n\n例如：$f(\\verb!ab!,\\verb!ba!)= \\verb!aa!$，$f(\\verb!nzwzl!,\\verb!zizez!)=\\verb!niwel!$。\n\n她现在有两个相同长度的只有小写字母的字符串 $x,y$。找出任何一个满足 $f(x,z)=y$ 的字符串 $z$。如果找不到这样的字符串的话，请输出 $-1$。\n", "inputFormat": "第一行给出以下两个字符串的长度 $n$。\n\n第二行给出一个字符串 $x$。\n\n第三行给出一个字符串 $y$。\n", "outputFormat": "第一行输出一个字符串，代表你找到的符合条件的字符串。找不到的话，请输出 $-1$。\n", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 100$。\n", "locale": "zh-CN", "translations": {"en": {"title": "{{umi's Function}}", "background": "{{umi found a mysterious function $f$.}}", "description": "{{This function takes two strings $s1, s2$. These strings consist only of lowercase letters and have the same length. The output of this function is another string $g$ whose length is the same as $s1$ and $s2$. The $i$-th character of $g$ equals the minimum of the $i$-th character of $s1$ and $s2$; simply put, $g_i=min(s1_i,s2_i)$.\n\nFor example: $f(\\verb!ab!,\\verb!ba!)= \\verb!aa!$, $f(\\verb!nzwzl!,\\verb!zizez!)=\\verb!niwel!$.\n\nShe now has two strings $x, y$ of the same length, consisting only of lowercase letters. Find any string $z$ such that $f(x,z)=y$. If no such string exists, please output -1.}}", "inputFormat": "{{The first line contains the length $n$ of the two strings.\nThe second line contains the string $x$.\nThe third line contains the string $y$.}}", "outputFormat": "{{Output one string in the first line, representing a valid string you found. If none exists, output -1.}}", "hint": "{{Constraints: For 100% of the testdata, $1 \\le n \\le 100$.}}\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "umi的函数", "background": "umi 找到了一个神秘的函数 $f$。\n", "description": "这个函数接受两个字符串 $s1,s2$。这些字符串只能由小写字母组成，并且具有相同的长度。这个函数的输出是另一个长度与 $s1,s2$ 相同的字符串 $g$。$g$ 的第 $i$ 个字符等于 $s1$ 的第 $i$ 个字符和 $s2$ 的第 $i$ 个字符的最小值，简单来说，$g_i=min(s1_i,s2_i)$。\n\n例如：$f(\\verb!ab!,\\verb!ba!)= \\verb!aa!$，$f(\\verb!nzwzl!,\\verb!zizez!)=\\verb!niwel!$。\n\n她现在有两个相同长度的只有小写字母的字符串 $x,y$。找出任何一个满足 $f(x,z)=y$ 的字符串 $z$。如果找不到这样的字符串的话，请输出 $-1$。\n", "inputFormat": "第一行给出以下两个字符串的长度 $n$。\n\n第二行给出一个字符串 $x$。\n\n第三行给出一个字符串 $y$。\n", "outputFormat": "第一行输出一个字符串，代表你找到的符合条件的字符串。找不到的话，请输出 $-1$。\n", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 100$。\n", "locale": "zh-CN"}}}
{"pid": "P3743", "type": "P", "difficulty": 3, "samples": [["2 1\n2 2\n2 1000\n", "2.0000000000"], ["1 100\n1 1", "-1 "], ["3 5\n4 3\n5 2\n6 1", "0.5000000000 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "二分", "Special Judge"], "title": "小鸟的设备", "background": null, "description": "小鸟有 $n$ 个可同时使用的设备，第 $i$ 个设备每秒消耗 $a_i$ 个单位能量。能量的使用是连续的，也就是说能量不是某时刻突然消耗的，而是匀速消耗。也就是说，对于任意实数，在 $k$ 秒内消耗的能量均为 $k\\times a_i$ 单位。在开始的时候第 $i$ 个设备里存储着 $b_i$ 个单位能量。\n\n同时小鸟又有一个可以给任意一个设备充电的充电宝，每秒可以给接通的设备充能 $p$ 个单位，充能也是连续的，不再赘述。你可以在任意时间给任意一个设备充能，从一个设备切换到另一个设备的时间忽略不计。\n\n小鸟想把这些设备一起使用，直到其中有设备能量降为  $0$。所以小鸟想知道，在充电器的作用下，她最多能将这些设备一起使用多久。", "inputFormat": "第一行给出两个整数 $n,p$。\n\n接下来 $n$ 行，每行表示一个设备，给出两个整数，分别是这个设备的 $a_i$ 和 $b_i$。", "outputFormat": "如果小鸟可以无限使用这些设备，输出 $-1$。\n\n否则输出小鸟在其中一个设备能量降为 $0$ 之前最多能使用多久。\n\n设你的答案为 $a$，标准答案为 $b$，只有当 $a,b$ 满足 \n$\\dfrac{|a-b|}{\\max(1,b)} \\leq 10^{-4}$ 的时候，你能得到本测试点的满分。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$，$1\\leq p\\leq 10^5$，$1\\leq a_i,b_i\\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Little Bird's Devices", "background": "", "description": "Little Bird has $n$ devices that can be used simultaneously. The $i$-th device consumes $a_i$ units of energy per second. Energy usage is continuous; that is, energy is not consumed instantaneously at a moment but at a constant rate. In other words, for any real number $k$, the amount of energy consumed in $k$ seconds is $k \\times a_i$ units. Initially, the $i$-th device stores $b_i$ units of energy.\n\nLittle Bird also has a power bank that can charge any one device, supplying $p$ units of energy per second. Charging is also continuous. You can charge any device at any time, and the time to switch from one device to another is negligible.\n\nLittle Bird wants to use all these devices together until some device’s energy drops to $0$. Given the power bank, she wants to know the maximum duration she can keep all devices running together.", "inputFormat": "The first line contains two integers $n, p$.\n\nThe next $n$ lines each describe one device, giving two integers: the device’s $a_i$ and $b_i$.", "outputFormat": "If Little Bird can use these devices indefinitely, output $-1$.\n\nOtherwise, output the maximum duration before some device’s energy becomes $0$.\n\nLet your answer be $a$ and the standard answer be $b$. You will receive full credit on a test point only if $a, b$ satisfy $\\dfrac{|a-b|}{\\max(1,b)} \\leq 10^{-4}$.", "hint": "For $100\\%$ of the testdata, $1 \\leq n \\leq 10^5$, $1 \\leq p \\leq 10^5$, $1 \\leq a_i, b_i \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小鸟的设备", "background": null, "description": "小鸟有 $n$ 个可同时使用的设备，第 $i$ 个设备每秒消耗 $a_i$ 个单位能量。能量的使用是连续的，也就是说能量不是某时刻突然消耗的，而是匀速消耗。也就是说，对于任意实数，在 $k$ 秒内消耗的能量均为 $k\\times a_i$ 单位。在开始的时候第 $i$ 个设备里存储着 $b_i$ 个单位能量。\n\n同时小鸟又有一个可以给任意一个设备充电的充电宝，每秒可以给接通的设备充能 $p$ 个单位，充能也是连续的，不再赘述。你可以在任意时间给任意一个设备充能，从一个设备切换到另一个设备的时间忽略不计。\n\n小鸟想把这些设备一起使用，直到其中有设备能量降为  $0$。所以小鸟想知道，在充电器的作用下，她最多能将这些设备一起使用多久。", "inputFormat": "第一行给出两个整数 $n,p$。\n\n接下来 $n$ 行，每行表示一个设备，给出两个整数，分别是这个设备的 $a_i$ 和 $b_i$。", "outputFormat": "如果小鸟可以无限使用这些设备，输出 $-1$。\n\n否则输出小鸟在其中一个设备能量降为 $0$ 之前最多能使用多久。\n\n设你的答案为 $a$，标准答案为 $b$，只有当 $a,b$ 满足 \n$\\dfrac{|a-b|}{\\max(1,b)} \\leq 10^{-4}$ 的时候，你能得到本测试点的满分。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$，$1\\leq p\\leq 10^5$，$1\\leq a_i,b_i\\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P3744", "type": "P", "difficulty": 5, "samples": [["4\n0 0\n0 1\n1 1\n1 0\n", "0.3535533906\n"], ["6\n5 0\n10 0\n12 -4\n10 -8\n5 -8\n3 -4", "1.0000000000\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "贪心", "计算几何", "Special Judge", "枚举", "叉积"], "title": "李彬的几何", "background": "李彬有一个凸多边形 $P$。", "description": "$P$ 有 $N$ 个顶点 $P_1,P_2,P_3 \\cdots P_N$。顶点 $P_i$ 在二维平面上的坐标为 $(x_i,y_i)$。这些顶点是按照顺时针顺序给出的。\n\n李彬可以指定一个实数 $D$，然后将每个顶点最多移动 $D$ 个单位距离。现在李彬想知道，如果他想使这个凸多边形不再是凸多边形，那么 $D$ 的最小值是多少。", "inputFormat": "第一行给出 $1$ 个整数 $N$。\n\n接下来 $N$ 行，每行给出一个顶点，给出两个整数，分别是这个顶点的 $x_i$ 和 $y_i$。保证以顺时针顺序给出，并且形成一个严格的凸多边形。", "outputFormat": "输出一个实数 $D$，代表使这个凸多边形不再凸的最小 $D$ 值。\n\n设你的答案为 $a$,标准答案为 $b$,只有当 $a,b$ 满足$\\frac{|a-b|}{max(1,b)} \\le 10^{-4}$的时候，你是对的。", "hint": "对于 $100 \\%$ 的数据，$4 \\le N \\le 1000$，$-10^9 \\le x_i,y_i \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Li Bin's Geometry", "background": "Li Bin has a convex polygon $P$.", "description": "$P$ has $N$ vertices $P_1, P_2, P_3, \\dots, P_N$. The coordinates of vertex $P_i$ in the 2D plane are $(x_i, y_i)$. The vertices are given in clockwise order.\n\nLi Bin may choose a real number $D$, then move each vertex by at most $D$ units. Now he wants to know the minimal value of $D$ that makes this convex polygon no longer convex.", "inputFormat": "The first line contains $1$ integer $N$.\n\nThe next $N$ lines each describe a vertex with two integers, the $x_i$ and $y_i$ of that vertex. The vertices are given in clockwise order and form a strictly convex polygon.", "outputFormat": "Output a real number $D$, representing the minimal $D$ that makes this polygon non-convex.\n\nLet your answer be $a$ and the standard answer be $b$. You are correct if and only if $\\frac{|a - b|}{\\max(1, b)} \\le 10^{-4}$.", "hint": "Constraints: For $100\\%$ of the testdata, $4 \\le N \\le 1000$, $-10^9 \\le x_i, y_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "李彬的几何", "background": "李彬有一个凸多边形 $P$。", "description": "$P$ 有 $N$ 个顶点 $P_1,P_2,P_3 \\cdots P_N$。顶点 $P_i$ 在二维平面上的坐标为 $(x_i,y_i)$。这些顶点是按照顺时针顺序给出的。\n\n李彬可以指定一个实数 $D$，然后将每个顶点最多移动 $D$ 个单位距离。现在李彬想知道，如果他想使这个凸多边形不再是凸多边形，那么 $D$ 的最小值是多少。", "inputFormat": "第一行给出 $1$ 个整数 $N$。\n\n接下来 $N$ 行，每行给出一个顶点，给出两个整数，分别是这个顶点的 $x_i$ 和 $y_i$。保证以顺时针顺序给出，并且形成一个严格的凸多边形。", "outputFormat": "输出一个实数 $D$，代表使这个凸多边形不再凸的最小 $D$ 值。\n\n设你的答案为 $a$,标准答案为 $b$,只有当 $a,b$ 满足$\\frac{|a-b|}{max(1,b)} \\le 10^{-4}$的时候，你是对的。", "hint": "对于 $100 \\%$ 的数据，$4 \\le N \\le 1000$，$-10^9 \\le x_i,y_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P3745", "type": "P", "difficulty": 5, "samples": [["100 100 2\n4 5\n5 1 2 3\n1 1 2 3 3", "6"], ["3 5 4\n5 6\n1 1 4 7 8\n2 3 3 1 8 2", "33"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "2017", "各省省选", "三分", "枚举", "前缀和"], "title": "[六省联考 2017] 期末考试", "background": "", "description": "有 $n$ 位同学，每位同学都参加了全部的 $m$ 门课程的期末考试，都在焦急的等待成绩的公布。\n\n第 $i$ 位同学希望在第 $t_i$ 天或之前得知**所有**课程的成绩。如果在第 $t_i$ 天，有至少一门课程的成绩没有公布，他就会等待最后公布成绩的课程公布成绩，每等待一天就会产生 $C$ 不愉快度。\n\n对于第 $i$ 门课程，按照原本的计划，会在第 $b_i$ 天公布成绩。\n\n有如下两种操作可以调整公布成绩的时间:\n1. 将负责课程 $X$ 的部分老师调整到课程 $Y$，调整之后公布课程 $X$ 成绩的时间推迟一天，公布课程 $Y$ 成绩的时间提前一天；每次操作产生 $A$ 不愉快度。\n2. 增加一部分老师负责学科 $Z$，这将导致学科 $Z$ 的出成绩时间提前一天；每次操作产生 $B$ 不愉快度。\n\n上面两种操作中的参数 $X, Y, Z$ 均可任意指定，每种操作均可以执行多次，每次执行时都可以重新指定参数。\n\n现在希望你通过合理的操作，使得最后总的不愉快度之和最小，输出最小的不愉快度之和即可。", "inputFormat": "第一行三个非负整数 $A, B, C$，描述三种不愉快度，详见【题目描述】；  \n第二行两个正整数 $n, m$，分别表示学生的数量和课程的数量；  \n第三行 $n$ 个正整数 $t_i$，表示每个学生希望的公布成绩的时间；  \n第四行 $m$ 个正整数 $b_i$，表示按照原本的计划，每门课程公布成绩的时间。", "outputFormat": "输出一行一个整数，表示最小的不愉快度之和。", "hint": "### 样例解释 1\n\n由于调整操作产生的不愉快度太大，所以在本例中最好的方案是不进行调整；全部的 $5$ 门课程中，最慢的在第 $3$ 天出成绩；  \n同学 $1$ 希望在第 $5$ 天或之前出成绩，所以不会产生不愉快度；  \n同学 $2$ 希望在第 $1$ 天或之前出成绩，产生的不愉快度为 $(3 - 1) \\times 2 = 4$；  \n同学 $3$ 希望在第 $2$ 天或之前出成绩，产生的不愉快度为 $(3 - 2) \\times 2 = 2$；  \n同学 $4$ 希望在第 $3$ 天或之前出成绩，所以不会产生不愉快度；  \n不愉快度之和为 $4 + 2 = 6$。\n\n### 数据范围\n\n| Case # | $n, m, t_i, b_i$ | $A, B, C$ |\n|:-:|:-:|:-:|\n| 1, 2 | $1 \\leq n, m, t_i, b_i \\leq 2000$ | $A = 10^9; B = 10^9; 0 \\leq C \\leq 10^2$ |\n| 3, 4 | $1 \\leq n, m, t_i, b_i \\leq 2000$ | $0 \\leq A; C \\leq 10^2; B = 10^9$ |\n| 5, 6, 7, 8 | $1 \\leq n, m, t_i, b_i \\leq 2000$ | $0 \\leq B \\leq A \\leq 10^2; 0 \\leq C \\leq 10^2$ |\n| 9 - 12 | $1 \\leq n, m, t_i, b_i \\leq 2000$ | $0 \\leq A, B, C \\leq 10^2$ |\n| 13, 14 | $1 \\leq n, m, t_i, b_i \\leq 10^5$ | $0 \\leq A, B \\leq 10^5; C = 10^{16}$ |\n| 15 - 20 | $1 \\leq n, m, t_i, b_i \\leq 10^5$ | $0 \\leq A, B, C \\leq 10^5$ |", "locale": "zh-CN", "translations": {"en": {"title": "[Six-Province Joint Exam 2017] Final Exam", "background": "", "description": "There are $n$ students. Each student took the final exams of all $m$ courses and is anxiously waiting for the results to be announced.\n\nStudent $i$ hopes to know the results of all courses on or before day $t_i$. If on day $t_i$ at least one course has not been announced, the student will wait until the last course is announced; each day of waiting incurs $C$ unhappiness.\n\nFor course $i$, according to the original plan, its result will be announced on day $b_i$.\n\nYou can adjust announcement days using the following two operations:\n1. Move some teachers from course $X$ to course $Y$. After the adjustment, the announcement day of course $X$ is delayed by one day, and that of course $Y$ is moved one day earlier. Each such operation incurs $A$ unhappiness.\n2. Add some teachers to course $Z$, which moves the announcement day of course $Z$ one day earlier. Each such operation incurs $B$ unhappiness.\n\nIn both operations, the parameters $X$, $Y$, and $Z$ can be chosen arbitrarily. Each operation can be performed multiple times, and the parameters can be re-chosen each time.\n\nPlease minimize the total unhappiness by applying operations reasonably, and output the minimum possible total unhappiness.", "inputFormat": "- The first line contains three non-negative integers $A, B, C$, which are the unhappiness costs, as described in the Description.\n- The second line contains two positive integers $n, m$, the numbers of students and courses, respectively.\n- The third line contains $n$ positive integers $t_i$, the desired announcement days for each student.\n- The fourth line contains $m$ positive integers $b_i$, the originally planned announcement days for each course.", "outputFormat": "Output a single integer on one line, the minimum total unhappiness.", "hint": "### Sample Explanation 1\n\nBecause the unhappiness caused by adjustments is too large, the best plan here is to make no adjustments. Among all $5$ courses, the slowest is announced on day $3$.  \nStudent $1$ hopes for results by day $5$, so no unhappiness is incurred.  \nStudent $2$ hopes for results by day $1$, so the incurred unhappiness is $(3 - 1) \\times 2 = 4$.  \nStudent $3$ hopes for results by day $2$, so the incurred unhappiness is $(3 - 2) \\times 2 = 2$.  \nStudent $4$ hopes for results by day $3$, so no unhappiness is incurred.  \nThe total unhappiness is $4 + 2 = 6$.\n\n### Constraints\n\n| Case # | $n, m, t_i, b_i$ | $A, B, C$ |\n|:-:|:-:|:-:|\n| 1, 2 | $1 \\leq n, m, t_i, b_i \\leq 2000$ | $A = 10^9; B = 10^9; 0 \\leq C \\leq 10^2$ |\n| 3, 4 | $1 \\leq n, m, t_i, b_i \\leq 2000$ | $0 \\leq A, C \\leq 10^2; B = 10^9$ |\n| 5, 6, 7, 8 | $1 \\leq n, m, t_i, b_i \\leq 2000$ | $0 \\leq B \\leq A \\leq 10^2; 0 \\leq C \\leq 10^2$ |\n| 9 - 12 | $1 \\leq n, m, t_i, b_i \\leq 2000$ | $0 \\leq A, B, C \\leq 10^2$ |\n| 13, 14 | $1 \\leq n, m, t_i, b_i \\leq 10^5$ | $0 \\leq A, B \\leq 10^5; C = 10^{16}$ |\n| 15 - 20 | $1 \\leq n, m, t_i, b_i \\leq 10^5$ | $0 \\leq A, B, C \\leq 10^5$ |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[六省联考 2017] 期末考试", "background": "", "description": "有 $n$ 位同学，每位同学都参加了全部的 $m$ 门课程的期末考试，都在焦急的等待成绩的公布。\n\n第 $i$ 位同学希望在第 $t_i$ 天或之前得知**所有**课程的成绩。如果在第 $t_i$ 天，有至少一门课程的成绩没有公布，他就会等待最后公布成绩的课程公布成绩，每等待一天就会产生 $C$ 不愉快度。\n\n对于第 $i$ 门课程，按照原本的计划，会在第 $b_i$ 天公布成绩。\n\n有如下两种操作可以调整公布成绩的时间:\n1. 将负责课程 $X$ 的部分老师调整到课程 $Y$，调整之后公布课程 $X$ 成绩的时间推迟一天，公布课程 $Y$ 成绩的时间提前一天；每次操作产生 $A$ 不愉快度。\n2. 增加一部分老师负责学科 $Z$，这将导致学科 $Z$ 的出成绩时间提前一天；每次操作产生 $B$ 不愉快度。\n\n上面两种操作中的参数 $X, Y, Z$ 均可任意指定，每种操作均可以执行多次，每次执行时都可以重新指定参数。\n\n现在希望你通过合理的操作，使得最后总的不愉快度之和最小，输出最小的不愉快度之和即可。", "inputFormat": "第一行三个非负整数 $A, B, C$，描述三种不愉快度，详见【题目描述】；  \n第二行两个正整数 $n, m$，分别表示学生的数量和课程的数量；  \n第三行 $n$ 个正整数 $t_i$，表示每个学生希望的公布成绩的时间；  \n第四行 $m$ 个正整数 $b_i$，表示按照原本的计划，每门课程公布成绩的时间。", "outputFormat": "输出一行一个整数，表示最小的不愉快度之和。", "hint": "### 样例解释 1\n\n由于调整操作产生的不愉快度太大，所以在本例中最好的方案是不进行调整；全部的 $5$ 门课程中，最慢的在第 $3$ 天出成绩；  \n同学 $1$ 希望在第 $5$ 天或之前出成绩，所以不会产生不愉快度；  \n同学 $2$ 希望在第 $1$ 天或之前出成绩，产生的不愉快度为 $(3 - 1) \\times 2 = 4$；  \n同学 $3$ 希望在第 $2$ 天或之前出成绩，产生的不愉快度为 $(3 - 2) \\times 2 = 2$；  \n同学 $4$ 希望在第 $3$ 天或之前出成绩，所以不会产生不愉快度；  \n不愉快度之和为 $4 + 2 = 6$。\n\n### 数据范围\n\n| Case # | $n, m, t_i, b_i$ | $A, B, C$ |\n|:-:|:-:|:-:|\n| 1, 2 | $1 \\leq n, m, t_i, b_i \\leq 2000$ | $A = 10^9; B = 10^9; 0 \\leq C \\leq 10^2$ |\n| 3, 4 | $1 \\leq n, m, t_i, b_i \\leq 2000$ | $0 \\leq A; C \\leq 10^2; B = 10^9$ |\n| 5, 6, 7, 8 | $1 \\leq n, m, t_i, b_i \\leq 2000$ | $0 \\leq B \\leq A \\leq 10^2; 0 \\leq C \\leq 10^2$ |\n| 9 - 12 | $1 \\leq n, m, t_i, b_i \\leq 2000$ | $0 \\leq A, B, C \\leq 10^2$ |\n| 13, 14 | $1 \\leq n, m, t_i, b_i \\leq 10^5$ | $0 \\leq A, B \\leq 10^5; C = 10^{16}$ |\n| 15 - 20 | $1 \\leq n, m, t_i, b_i \\leq 10^5$ | $0 \\leq A, B, C \\leq 10^5$ |", "locale": "zh-CN"}}}
{"pid": "P3746", "type": "P", "difficulty": 6, "samples": [["2 10007 2 0", "8"], ["20 10007 20 0", "176"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "递推", "2017", "各省省选", "矩阵乘法"], "title": "[六省联考 2017] 组合数问题", "background": "", "description": "组合数 $C_n^m$ 表示的是从 $n$ 个互不相同的物品中选出 $m$ 个物品的方案数。举个例子， 从 $(1, 2, 3)$ 三个物品中选择两个物品可以有 $(1, 2)$，$(1, 3)$，$(2, 3)$ 这三种选择方法。根据组合数的定义，我们可以给出计算组合数  $C_n^m$  的一般公式：\n\n$$ C_n^m = \\frac {n!} {m! \\ (n - m)!}  $$\n\n其中 $n! = 1 \\times 2 \\times \\cdots \\times n$。（特别地，当 $n = 0$ 时，$n! = 1$；当 $m > n$ 时，$C_n^m = 0$。）\n\n小葱在 NOIP 的时候学习了 $C_i^j$ 和 $k$ 的倍数关系，现在他想更进一步，研究更多关于组合数的性质。小葱发现，$C_i^j$ 是否是 $k$ 的倍数，取决于 $C_i^j \\bmod k$ 是否等于 $0$，这个神奇的性质引发了小葱对 $\\mathrm{mod}$ 运算（取余数运算）的兴趣。现在小葱选择了是四个整数 $n, p, k, r$，他希望知道\n\n$$\\left( \\sum_{i = 0}^\\infty C_{nk}^{ik + r} \\right) \\bmod p,$$\n\n即\n\n$$\\left( C_{nk}^{r} + C_{nk}^{k + r} + C_{nk}^{2k + r} + \\cdots + C_{nk}^{(n - 1)k + r}  + C_{nk}^{nk + r} + \\cdots \\right) \\bmod p$$\n\n的值。", "inputFormat": "第一行有四个整数 $n, p, k, r$，所有整数含义见问题描述。", "outputFormat": "一行一个整数代表答案。", "hint": "对于 $30\\%$ 的测试点，$1 \\leq n, k \\leq 30$，$p$ 是质数；   \n对于另外 $5\\%$ 的测试点，$p = 2$；  \n对于另外 $5\\%$ 的测试点，$k = 1$；  \n对于另外 $10\\%$ 的测试点，$k = 2$；  \n对于另外 $15\\%$ 的测试点，$1 \\leq n \\leq 10^3, 1 \\leq k \\leq 50$，$p$ 是质数；  \n对于另外 $15\\%$ 的测试点，$1 \\leq n \\times k \\leq 10^6$，$p$ 是质数；  \n对于另外 $10\\%$ 的测试点，$1 \\leq n \\leq 10^9, 1 \\leq k \\leq 50$，$p$ 是质数；  \n对于 $100\\%$ 的测试点，$1 \\leq n \\leq 10^9, 0 \\leq r < k \\leq 50, 2 \\leq p \\leq 2^{30} - 1$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[Six-Province Joint Exam 2017] Binomial Coefficients Problem", "background": "", "description": "The binomial coefficient $C_n^m$ denotes the number of ways to choose $m$ items from $n$ distinct items. For example, choosing two items from $(1, 2, 3)$ has three possibilities: $(1, 2)$, $(1, 3)$, $(2, 3)$. By definition, a general formula to compute $C_n^m$ is:\n\n$$ C_n^m = \\frac {n!} {m! \\ (n - m)!} $$\n\nwhere $n! = 1 \\times 2 \\times \\cdots \\times n$. (In particular, when $n = 0$, $n! = 1$; when $m > n$, $C_n^m = 0$.)\n\nXiaocong learned about the divisibility relationship between $C_i^j$ and $k$ during NOIP, and now he wants to go further and study more properties of binomial coefficients. He noticed that whether $C_i^j$ is a multiple of $k$ depends on whether $C_i^j \\bmod k$ equals $0$. This intriguing fact sparked his interest in the $\\mathrm{mod}$ operation (the remainder operation). Now Xiaocong chose four integers $n, p, k, r$, and he wants to know\n\n$$\\left( \\sum_{i = 0}^\\infty C_{nk}^{ik + r} \\right) \\bmod p,$$\n\nthat is,\n\n$$\\left( C_{nk}^{r} + C_{nk}^{k + r} + C_{nk}^{2k + r} + \\cdots + C_{nk}^{(n - 1)k + r}  + C_{nk}^{nk + r} + \\cdots \\right) \\bmod p.$$", "inputFormat": "The first line contains four integers $n, p, k, r$. All symbols have the meanings given in the problem statement.", "outputFormat": "Output a single integer, the answer.", "hint": "For $30\\%$ of the test points, $1 \\leq n, k \\leq 30$, and $p$ is prime.  \nFor another $5\\%$ of the test points, $p = 2$.  \nFor another $5\\%$ of the test points, $k = 1$.  \nFor another $10\\%$ of the test points, $k = 2$.  \nFor another $15\\%$ of the test points, $1 \\leq n \\leq 10^3$, $1 \\leq k \\leq 50$, and $p$ is prime.  \nFor another $15\\%$ of the test points, $1 \\leq n \\times k \\leq 10^6$, and $p$ is prime.  \nFor another $10\\%$ of the test points, $1 \\leq n \\leq 10^9$, $1 \\leq k \\leq 50$, and $p$ is prime.  \nFor $100\\%$ of the test points, $1 \\leq n \\leq 10^9$, $0 \\leq r < k \\leq 50$, $2 \\leq p \\leq 2^{30} - 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[六省联考 2017] 组合数问题", "background": "", "description": "组合数 $C_n^m$ 表示的是从 $n$ 个互不相同的物品中选出 $m$ 个物品的方案数。举个例子， 从 $(1, 2, 3)$ 三个物品中选择两个物品可以有 $(1, 2)$，$(1, 3)$，$(2, 3)$ 这三种选择方法。根据组合数的定义，我们可以给出计算组合数  $C_n^m$  的一般公式：\n\n$$ C_n^m = \\frac {n!} {m! \\ (n - m)!}  $$\n\n其中 $n! = 1 \\times 2 \\times \\cdots \\times n$。（特别地，当 $n = 0$ 时，$n! = 1$；当 $m > n$ 时，$C_n^m = 0$。）\n\n小葱在 NOIP 的时候学习了 $C_i^j$ 和 $k$ 的倍数关系，现在他想更进一步，研究更多关于组合数的性质。小葱发现，$C_i^j$ 是否是 $k$ 的倍数，取决于 $C_i^j \\bmod k$ 是否等于 $0$，这个神奇的性质引发了小葱对 $\\mathrm{mod}$ 运算（取余数运算）的兴趣。现在小葱选择了是四个整数 $n, p, k, r$，他希望知道\n\n$$\\left( \\sum_{i = 0}^\\infty C_{nk}^{ik + r} \\right) \\bmod p,$$\n\n即\n\n$$\\left( C_{nk}^{r} + C_{nk}^{k + r} + C_{nk}^{2k + r} + \\cdots + C_{nk}^{(n - 1)k + r}  + C_{nk}^{nk + r} + \\cdots \\right) \\bmod p$$\n\n的值。", "inputFormat": "第一行有四个整数 $n, p, k, r$，所有整数含义见问题描述。", "outputFormat": "一行一个整数代表答案。", "hint": "对于 $30\\%$ 的测试点，$1 \\leq n, k \\leq 30$，$p$ 是质数；   \n对于另外 $5\\%$ 的测试点，$p = 2$；  \n对于另外 $5\\%$ 的测试点，$k = 1$；  \n对于另外 $10\\%$ 的测试点，$k = 2$；  \n对于另外 $15\\%$ 的测试点，$1 \\leq n \\leq 10^3, 1 \\leq k \\leq 50$，$p$ 是质数；  \n对于另外 $15\\%$ 的测试点，$1 \\leq n \\times k \\leq 10^6$，$p$ 是质数；  \n对于另外 $10\\%$ 的测试点，$1 \\leq n \\leq 10^9, 1 \\leq k \\leq 50$，$p$ 是质数；  \n对于 $100\\%$ 的测试点，$1 \\leq n \\leq 10^9, 0 \\leq r < k \\leq 50, 2 \\leq p \\leq 2^{30} - 1$。\n", "locale": "zh-CN"}}}
{"pid": "P3747", "type": "P", "difficulty": 6, "samples": [["4 4 7 2\n1 2 3 4\n0 1 4\n1 2 4\n0 1 4\n1 1 3", "0\n3"], ["1 40 19910626 2\n0\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1\n0 1 1\n1 1 1", "1\n2\n4\n16\n65536\n11418102\n18325590\n13700558\n13700558\n13700558\n13700558\n13700558\n13700558\n13700558\n13700558\n13700558\n13700558\n13700558\n13700558\n13700558"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2017", "线段树", "并查集", "各省省选", "树状数组", "颜色段均摊（珂朵莉树 ODT）", "O2优化", "枚举", "素数判断,质数,筛法", "分块", "欧拉函数"], "title": "[六省联考 2017] 相逢是问候", "background": null, "description": "> Informatik verbindet dich und mich.  \n> 信息将你我连结。\n\nB 君希望你维护一个长度为 $n$ 的数组，这个数组的下标为从 $1$ 到 $n$ 的正整数。\n\n一共有 $m$ 个操作，可以分为两种：\n\n- `0 l r` 表示将第 $l$ 个到第 $r$ 个数（ $a_l,a_{l+1} ...a_r$）中的每一个数 $a_i$ 替换为 $c^{a_i}$，即 $c$ 的 $a_i$ 次方，其中 $c$ 是输入的一个常数，也就是执行赋值 $a_i = c^{a_i}$。\n\n- `1 l r` 求第 $l$ 个到第 $r$ 个数的和，也就是输出： $\\sum_{i=l}^{r}a_i$\n\n因为这个结果可能会很大，所以你只需要输出结果 $\\bmod \\space p$ 的值即可。", "inputFormat": "第一行有四个整数 $n, m, p, c$，所有整数含义见问题描述。  \n接下来一行 $n$ 个整数，表示 $a$ 数组的初始值。  \n接下来 $m$ 行，每行三个整数，其中第一个整数表示了操作的类型。  \n\n- 如果是 $0$ 的话，表示这是一个修改操作，操作的参数为 $l, r$。\n- 如果是 $1$ 的话，表示这是一个询问操作，操作的参数为 $l, r$。", "outputFormat": "对于每个询问操作，输出一行，包括一个整数表示答案 $\\bmod \\space p$ 的值。", "hint": "【数据范围】  \n\n对于 $0\\%$ 的测试点，和样例一模一样；\n\n对于另外 $10\\%$ 的测试点，没有修改；\n\n对于另外 $20\\%$ 的测试点，每次修改操作只会修改一个位置（也就是 $l = r$ ），并且每个位置至多被修改一次；\n\n• 对于另外 $10\\%$ 的测试点， $p = 2$；\n\n对于另外 $10\\%$ 的测试点， $p = 3$；\n\n对于另外 $10\\%$ 的测试点， $p = 4$；\n\n对于另外 $20\\%$ 的测试点， $1\\le n,m \\le 100$；\n\n对于 $100\\%$ 的测试点， $1\\le n,m \\le 5\\times 10^4$，$1 \\le p \\le 10^8$，$0< c < p$，$0 \\le a_i < p$。", "locale": "zh-CN", "translations": {"en": {"title": "[Six Provinces Joint Exam 2017] Greeting Upon Meeting", "background": "", "description": "> Informatik verbindet dich und mich.  \n> Information connects you and me.\n\nMr. B wants to maintain an array of length $n$, whose indices are the positive integers from $1$ to $n$.\n\nThere are $m$ operations, of two types:\n\n- `0 l r` means: for each number $a_i$ among the $l$-th to the $r$-th numbers ($a_l,a_{l+1} ...a_r$), replace $a_i$ with $c^{a_i}$, i.e., assign $a_i = c^{a_i}$, where $c$ is a given constant in the input.\n\n- `1 l r` asks for the sum of the $l$-th to the $r$-th numbers, i.e., output $\\sum_{i=l}^{r} a_i$.\n\nBecause the result can be very large, you only need to output the result $\\bmod \\space p$.", "inputFormat": "The first line contains four integers $n, m, p, c$, whose meanings are given in the problem statement.  \nThe next line contains $n$ integers, the initial values of the array $a$.  \nThe next $m$ lines each contain three integers; the first integer indicates the type of operation.\n\n- If it is `0`, this is an update operation with parameters $l, r$.\n- If it is `1`, this is a query operation with parameters $l, r$.", "outputFormat": "For each query operation, output one line with a single integer: the answer $\\bmod \\space p$.", "hint": "Constraints\n\n- For $0\\%$ of the test points, identical to the sample.\n- For another $10\\%$ of the test points, there are no updates.\n- For another $20\\%$ of the test points, each update modifies only one position (i.e., $l = r$), and each position is updated at most once.\n- For another $10\\%$ of the test points, $p = 2$.\n- For another $10\\%$ of the test points, $p = 3$.\n- For another $10\\%$ of the test points, $p = 4$.\n- For another $20\\%$ of the test points, $1\\le n, m \\le 100$.\n- For $100\\%$ of the test points, $1\\le n, m \\le 5\\times 10^4$, $1 \\le p \\le 10^8$, $0< c < p$, $0 \\le a_i < p$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[六省联考 2017] 相逢是问候", "background": null, "description": "> Informatik verbindet dich und mich.  \n> 信息将你我连结。\n\nB 君希望你维护一个长度为 $n$ 的数组，这个数组的下标为从 $1$ 到 $n$ 的正整数。\n\n一共有 $m$ 个操作，可以分为两种：\n\n- `0 l r` 表示将第 $l$ 个到第 $r$ 个数（ $a_l,a_{l+1} ...a_r$）中的每一个数 $a_i$ 替换为 $c^{a_i}$，即 $c$ 的 $a_i$ 次方，其中 $c$ 是输入的一个常数，也就是执行赋值 $a_i = c^{a_i}$。\n\n- `1 l r` 求第 $l$ 个到第 $r$ 个数的和，也就是输出： $\\sum_{i=l}^{r}a_i$\n\n因为这个结果可能会很大，所以你只需要输出结果 $\\bmod \\space p$ 的值即可。", "inputFormat": "第一行有四个整数 $n, m, p, c$，所有整数含义见问题描述。  \n接下来一行 $n$ 个整数，表示 $a$ 数组的初始值。  \n接下来 $m$ 行，每行三个整数，其中第一个整数表示了操作的类型。  \n\n- 如果是 $0$ 的话，表示这是一个修改操作，操作的参数为 $l, r$。\n- 如果是 $1$ 的话，表示这是一个询问操作，操作的参数为 $l, r$。", "outputFormat": "对于每个询问操作，输出一行，包括一个整数表示答案 $\\bmod \\space p$ 的值。", "hint": "【数据范围】  \n\n对于 $0\\%$ 的测试点，和样例一模一样；\n\n对于另外 $10\\%$ 的测试点，没有修改；\n\n对于另外 $20\\%$ 的测试点，每次修改操作只会修改一个位置（也就是 $l = r$ ），并且每个位置至多被修改一次；\n\n• 对于另外 $10\\%$ 的测试点， $p = 2$；\n\n对于另外 $10\\%$ 的测试点， $p = 3$；\n\n对于另外 $10\\%$ 的测试点， $p = 4$；\n\n对于另外 $20\\%$ 的测试点， $1\\le n,m \\le 100$；\n\n对于 $100\\%$ 的测试点， $1\\le n,m \\le 5\\times 10^4$，$1 \\le p \\le 10^8$，$0< c < p$，$0 \\le a_i < p$。", "locale": "zh-CN"}}}
{"pid": "P3748", "type": "P", "difficulty": 6, "samples": [["1 0\n13\n1 2\n2 3\n2 4\n4 5\n4 6\n4 7\n7 8\n7 9\n9 10\n10 11\n10 12\n12 13", "8"], ["8 0\n1\n2\n1 2\n3\n1 2\n2 3\n4\n1 3\n2 3\n2 4\n5\n1 5\n2 5\n3 5\n4 5\n16\n1 2\n1 3\n1 4\n1 5\n5 6\n5 7\n5 8\n5 9\n9 10\n9 11\n9 12\n9 13\n13 14\n13 15\n13 16\n17\n1 2\n1 3\n1 4\n1 5\n5 6\n5 7\n5 8\n5 17\n17 9\n9 10\n9 11\n9 12\n9 13\n13 14\n13 15\n13 16\n17\n8 6\n2 6\n11 6\n4 6\n14 2\n10 2\n5 4\n1 4\n9 8\n17 11\n12 5\n3 6\n13 6\n16 8\n7 11\n15 16\n", "0\n1\n2\n2\n4\n12\n13\n10\n"], ["8 1\n1 1 1\n2 1 1\n1 2\n3 2 2\n1 2\n2 3\n4 2 2\n1 3\n2 3\n2 4\n5 5 5\n1 5\n2 5\n3 5\n4 5\n16 1 5\n1 2\n1 3\n1 4\n1 5\n5 6\n5 7\n5 8\n5 9\n9 10\n9 11\n9 12\n9 13\n13 14\n13 15\n13 16\n17 1 5\n1 2\n1 3\n1 4\n1 5\n5 6\n5 7\n5 8\n5 17\n17 9\n9 10\n9 11\n9 12\n9 13\n13 14\n13 15\n13 16\n17 2 4\n8 6\n2 6\n11 6\n4 6\n14 2\n10 2\n5 4\n1 4\n9 8\n17 11\n12 5\n3 6\n13 6\n16 8\n7 11\n15 16\n", "0\n1\n2\n2\n4\n12\n13\n10\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2017", "各省省选", "枚举"], "title": "[六省联考 2017] 摧毁“树状图”", "background": "", "description": "自从上次神刀手帮助蚯蚓国增添了上千万人口（蚯口？），蚯蚓国发展得越来越繁荣了！最近，他们在地下发现了一些神奇的纸张，经过仔细研究，居然是 D 国 X 市的超级计算机设计图纸！\n\n这台计算机叫做 “树状图”，由 $n$ 个计算节点与 $n - 1$ 条可以双向通信的网线连接而成，所有计算节点用不超过 $n$ 的正整数编号。顾名思义，这形成了一棵树的结构。\n\n蚯蚓国王已在图纸上掌握了这棵树的完整信息，包括 $n$ 的值与 $n - 1$ 条网线的连接信息。于是蚯蚓国王决定，派出蚯蚓国最强大的两个黑客，小 P 和小 H，入侵 “树状图”，尽可能地摧毁它。\n\n小 P 和小 H 精通世界上最好的编程语言，经过一番商量后，他们决定依次采取如 下的步骤：\n* 小 P 选择某个计算节点，作为他入侵的起始点，并在该节点上添加一个 **P** 标记。\n* 重复以下操作若干次（可以是 $0$ 次）：\n    * 小 P 从他当前所在的计算节点出发，选择一条没有被标记过的网线，入侵到该网线的另一端的计算节点，并在路过的网线与目的计算节点上均添加一个 **P** 标记。\n* 小 H 选择某个计算节点，作为她入侵的起始点，并在该节点上添加一个 **H** 标记。\n* 重复以下操作若干次（可以是 $0$ 次）：\n    * 小 H 从她当前所在的计算节点出发，选择一条没有被标记过的网线，入侵到该网线的另一端的计算节点，并在路过的网线与目的计算节点上均添加一个 **H** 标记。（注意，小 H 不能经过带有 **P** 标记的网线，但是可以经过带有 **P** 标记的计算节点）\n* 删除所有被标记过的计算节点和网线。\n* 对于剩下的每条网线，如果其一端或两端的计算节点在上一步被删除了，则也删除这条网线。\n\n经过以上操作后，“树状图” 会被断开，剩下若干个（可能是 $0$ 个）连通块。为了达到摧毁的目的，蚯蚓国王希望，连通块的个数越多越好。于是他找到了你，希望你能帮他计算这个最多的个数。\n\n小 P 和小 H 非常心急，在你计算方案之前，他们可能就已经算好了最优方案或最优方案的一部分。你能得到一个值 $x$：\n* 若 $x = 0$，则说明小 P 和小 H 没有算好最优方案，你需要确定他们两个的入侵路线。\n* 若 $x = 1$，则说明小 P 已经算好了某种两人合作的最优方案中，他的入侵路线。他将选择初始点 $p_0$，并沿着网线一路入侵到了目标点 $p_1$，并且他不会再沿着网线入侵；你只需要确定小 H 的入侵路线。\n* 若 $x = 2$，则说明小 P 和小 H 算好了一种两人合作的最优方案，小 P 从点 $p_0$ 入侵到了 $p_1$ 并停下，小 H 从点 $h_0$ 入侵到了 $h_1$ 并停下。此时你不需要指挥他们入侵了，只需要计算最后两步删除计算节点与网线后，剩下的连通块个数即可。", "inputFormat": "每个输入文件包含多个输入数据。输入文件的第一行为两个整数 $T$ 和 $x$，$T$ 表示该文件包含的输入数据个数，$x$ 的含义见上述。（同一个输入文件的所有数据的 x 都是相同的。）\n\n接下来依次输入每个数据。", "outputFormat": "对于每个数据，输出一行，表示在给定条件下，剩下连通块的最大个数。", "hint": "* 若 $x = 0$，则该行只有一个整数 $n$。\n* 若 $x = 1$，则该行依次有三个整数 $n, p_0, p_1$。\n* 若 $x = 2$，则该行依次有五个整数 $n, p_0, p_1, h_0, h_1$。\n\n保证 $p_0, p_1, h_0, h_1$ 均为不超过 $n$ 的正整数。\n\n每个数据接下来有 $n - 1$ 行，每行有两个不超过 $n$ 的正整数，表示这两个编号的计算节点之间有一条网线将其相连。保证输入的是一棵树。\n\n同一行相邻的整数之间用恰好一个空格隔开。\n\n**数据文件可能较大，请避免使用过慢的输入输出方法。**\n\n【样例 1 说明】\n\n这个输入文件只有一个输入数据。一种最优的方案如下：\n\n- 小 P 从节点 $2$ 开始入侵，节点 $2$ 被小 P 标记。\n\n- 小 P 从节点 $2$ 入侵到节点 $4$，节点 $4$ 和经过的网线被小 P 标记。\n\n- 小 P 从节点 $4$ 入侵到节点 $7$，节点 $7$ 和经过的网线被小 P 标记。\n\n- 小 H 从节点 $10$ 开始入侵，节点 $10$ 被小 H 标记。\n\n- 删除被标记的节点 $2,4,7,10$ 和被标记的网线 $(2,4)$ 和 $(4,7)$。\n\n- 删除任意一端在上一步被删除的网线。\n\n此时还剩下 $8$ 个连通块。其中节点 $1,3,5,6,8,9,11$ 各自形成一个连通块，节点$12,13$形成了一个连通块。\n\n\n【样例 2 说明】\n\n- 数据 1：只有 $1$ 个计算节点，唯一可行的方案是小 P 从节点 $1$ 开始入侵（并马上停止），小 H 也从节点 $1$ 入侵到节点 $1$。所有的节点都被删去，剩下 $0$ 个连通块。\n\n- 数据 2：一种最优方案是，小 P 从节点 $1$ 入侵到节点 $1$，小 H 也从节点 $1$ 入侵到节点 $1$。在删除操作后，剩下 $1$ 个连通块（只有节点 $2$）。\n\n- 数据 3：唯一的最优方案是，小 P 从节点 $2$ 入侵到节点 $2$，小 H 也从节点 $2$ 入侵到节点 $2$，剩下 $2$ 个连通块。\n\n- 数据 4：一种最优方案是，小 P 从节点 $2$ 入侵到节点 $2$，小 H 也从节点 $2$ 入侵到节点 $2$，剩下 $2$ 个连通块。\n\n- 数据 5：唯一的最优方案是，小 P 从节点 $5$ 入侵到节点 $5$，小 H 也从节点 $5$ 入侵到节点 $5$，剩下 $4$ 个连通块。\n\n\n\n![](https://cdn.luogu.com.cn/upload/pic/38934.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/38935.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/38936.png)\n\n对于整数 $k$，设$\\sum n^k$ 为某个输入文件中，其$ T$ 个输入数据的 $n^k$ 之和。\n\n对于所有数据，$T \\leq 10^5, \\sum n^1 <5 \\times 10^5$\n\n请注意初始化的时间复杂度，避免输入大量小数据时超时。\n\n每个测试点的详细数据范围见下表。如果表中 “完全二叉” 为 Yes，则该输入文件的每个数据满足：网线信息的第 $j$ 行 $(1 \\leq j < n)$ 输入的两个数依次是 $\\left\\lfloor \\frac {j + 1} {2} \\right\\rfloor$ 和 $j + 1$。\n\n![](https://cdn.luogu.com.cn/upload/pic/38937.png)", "locale": "zh-CN", "translations": {"en": {"title": "[Six-Province Joint Exam 2017] Destroy the \"Tree Diagram\"", "background": "", "description": "Since the last time the divine knife master helped Earthworm Country gain tens of millions of citizens (earth-citizens?), the country has become more and more prosperous! Recently, they discovered some magical papers underground. After careful study, it turned out to be the design blueprints of a supercomputer in City X of Country D!\n\nThis computer is called the \"Tree Diagram.\" It consists of $n$ computing nodes connected by $n - 1$ bidirectional communication links, and all computing nodes are labeled with positive integers not exceeding $n$. As the name suggests, this forms a tree structure.\n\nThe Earthworm King has fully mastered the information of this tree from the blueprints, including the value of $n$ and the connectivity of the $n - 1$ links. He decided to send the two most powerful hackers of Earthworm Country, P and H, to infiltrate the \"Tree Diagram\" and destroy it as much as possible.\n\nP and H are masters of the world's best programming language. After some discussion, they decided to proceed in the following steps:\n- P chooses a computing node as his starting point and adds a P mark to that node.\n- Repeat the following operation any number of times (possibly $0$ times):\n    - From his current computing node, P chooses a link that has not been marked, infiltrates to the computing node at the other end of that link, and adds a P mark to both the traversed link and the destination node.\n- H chooses a computing node as her starting point and adds an H mark to that node.\n- Repeat the following operation any number of times (possibly $0$ times):\n    - From her current computing node, H chooses a link that has not been marked, infiltrates to the computing node at the other end of that link, and adds an H mark to both the traversed link and the destination node. (Note: H cannot traverse links that have a P mark, but she may traverse nodes that have a P mark.)\n- Delete all computing nodes and links that have been marked.\n- For each remaining link, if one or both endpoints were deleted in the previous step, delete that link as well.\n\nAfter these operations, the \"Tree Diagram\" will be disconnected into several (possibly $0$) connected components. To maximize the damage, the Earthworm King hopes that the number of connected components is as large as possible. He turns to you to compute this maximum number.\n\nP and H are very impatient, and before you compute the plan, they may have already computed the optimal plan or part of it. You are given a value $x$:\n- If $x = 0$, then P and H have not computed the optimal plan. You need to determine the infiltration routes for both of them.\n- If $x = 1$, then P has already computed his infiltration route in some optimal cooperative plan. He will choose the starting point $p_0$ and infiltrate along links to the target point $p_1$, and then he will stop infiltrating. You only need to determine H’s infiltration route.\n- If $x = 2$, then P and H have computed an optimal cooperative plan. P infiltrates from $p_0$ to $p_1$ and stops, and H infiltrates from $h_0$ to $h_1$ and stops. In this case, you do not need to direct their infiltration; you only need to compute the number of connected components remaining after the last two deletion steps.", "inputFormat": "Each input file contains multiple datasets. The first line contains two integers $T$ and $x$, where $T$ is the number of datasets in the file, and the meaning of $x$ is as described above. (The same $x$ applies to all datasets in the same input file.)\n\nThen, for each dataset in order:\n- If $x = 0$: the first line of the dataset contains a single integer $n$.\n- If $x = 1$: the first line of the dataset contains three integers $n, p_0, p_1$.\n- If $x = 2$: the first line of the dataset contains five integers $n, p_0, p_1, h_0, h_1$.\n\nThis is followed by $n - 1$ lines, each containing two positive integers not exceeding $n$, indicating that there is a link connecting the two nodes with those labels. The input is guaranteed to form a tree.\n\nAdjacent integers on the same line are separated by exactly one space.", "outputFormat": "For each dataset, output one line containing the maximum possible number of connected components remaining under the given conditions.", "hint": "The values $p_0, p_1, h_0, h_1$ are guaranteed to be positive integers not exceeding $n$.\n\nThe data file may be large; please avoid overly slow input/output methods.\n\n[Sample 1 Explanation]\n\nThis input file contains only one dataset. One optimal plan is as follows:\n- P starts infiltrating from node $2$, and node $2$ is marked by P.\n- P infiltrates from node $2$ to node $4$, and node $4$ and the traversed link are marked by P.\n- P infiltrates from node $4$ to node $7$, and node $7$ and the traversed link are marked by P.\n- H starts infiltrating from node $10$, and node $10$ is marked by H.\n- Delete the marked nodes $2, 4, 7, 10$ and the marked links $(2, 4)$ and $(4, 7)$.\n- Delete any link with at least one endpoint deleted in the previous step.\n\nAt this point, there are $8$ connected components remaining. Nodes $1, 3, 5, 6, 8, 9, 11$ each form a connected component of their own, and nodes $12, 13$ form one connected component.\n\n[Sample 2 Explanation]\n- Dataset 1: There is only $1$ computing node. The only feasible plan is that P starts from node $1$ (and stops immediately), and H also infiltrates from node $1$ to node $1$. All nodes are deleted, leaving $0$ connected components.\n- Dataset 2: One optimal plan is that P infiltrates from node $1$ to node $1$, and H also infiltrates from node $1$ to node $1$. After the deletions, $1$ connected component remains (only node $2$).\n- Dataset 3: The only optimal plan is that P infiltrates from node $2$ to node $2$, and H also infiltrates from node $2$ to node $2$, leaving $2$ connected components.\n- Dataset 4: One optimal plan is that P infiltrates from node $2$ to node $2$, and H also infiltrates from node $2$ to node $2$, leaving $2$ connected components.\n- Dataset 5: The only optimal plan is that P infiltrates from node $5$ to node $5$, and H also infiltrates from node $5$ to node $5$, leaving $4$ connected components.\n\n![](https://cdn.luogu.com.cn/upload/pic/38934.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/38935.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/38936.png)\n\nFor an integer $k$, let $\\sum n^k$ denote the sum of $n^k$ over the $T$ datasets in an input file.\n\nConstraints for all data: $T \\leq 10^5$, $\\sum n^1 < 5 \\times 10^5$.\n\nPlease pay attention to initialization time complexity to avoid timeouts when there are many small datasets.\n\nFor each test point, the detailed constraints are shown in the table below. If “Complete Binary” is Yes in the table, then each dataset in the input file satisfies: on the $j$-th line of the link list $(1 \\leq j < n)$, the two numbers given are $\\left\\lfloor \\frac {j + 1} {2} \\right\\rfloor$ and $j + 1$, respectively.\n\n![](https://cdn.luogu.com.cn/upload/pic/38937.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[六省联考 2017] 摧毁“树状图”", "background": "", "description": "自从上次神刀手帮助蚯蚓国增添了上千万人口（蚯口？），蚯蚓国发展得越来越繁荣了！最近，他们在地下发现了一些神奇的纸张，经过仔细研究，居然是 D 国 X 市的超级计算机设计图纸！\n\n这台计算机叫做 “树状图”，由 $n$ 个计算节点与 $n - 1$ 条可以双向通信的网线连接而成，所有计算节点用不超过 $n$ 的正整数编号。顾名思义，这形成了一棵树的结构。\n\n蚯蚓国王已在图纸上掌握了这棵树的完整信息，包括 $n$ 的值与 $n - 1$ 条网线的连接信息。于是蚯蚓国王决定，派出蚯蚓国最强大的两个黑客，小 P 和小 H，入侵 “树状图”，尽可能地摧毁它。\n\n小 P 和小 H 精通世界上最好的编程语言，经过一番商量后，他们决定依次采取如 下的步骤：\n* 小 P 选择某个计算节点，作为他入侵的起始点，并在该节点上添加一个 **P** 标记。\n* 重复以下操作若干次（可以是 $0$ 次）：\n    * 小 P 从他当前所在的计算节点出发，选择一条没有被标记过的网线，入侵到该网线的另一端的计算节点，并在路过的网线与目的计算节点上均添加一个 **P** 标记。\n* 小 H 选择某个计算节点，作为她入侵的起始点，并在该节点上添加一个 **H** 标记。\n* 重复以下操作若干次（可以是 $0$ 次）：\n    * 小 H 从她当前所在的计算节点出发，选择一条没有被标记过的网线，入侵到该网线的另一端的计算节点，并在路过的网线与目的计算节点上均添加一个 **H** 标记。（注意，小 H 不能经过带有 **P** 标记的网线，但是可以经过带有 **P** 标记的计算节点）\n* 删除所有被标记过的计算节点和网线。\n* 对于剩下的每条网线，如果其一端或两端的计算节点在上一步被删除了，则也删除这条网线。\n\n经过以上操作后，“树状图” 会被断开，剩下若干个（可能是 $0$ 个）连通块。为了达到摧毁的目的，蚯蚓国王希望，连通块的个数越多越好。于是他找到了你，希望你能帮他计算这个最多的个数。\n\n小 P 和小 H 非常心急，在你计算方案之前，他们可能就已经算好了最优方案或最优方案的一部分。你能得到一个值 $x$：\n* 若 $x = 0$，则说明小 P 和小 H 没有算好最优方案，你需要确定他们两个的入侵路线。\n* 若 $x = 1$，则说明小 P 已经算好了某种两人合作的最优方案中，他的入侵路线。他将选择初始点 $p_0$，并沿着网线一路入侵到了目标点 $p_1$，并且他不会再沿着网线入侵；你只需要确定小 H 的入侵路线。\n* 若 $x = 2$，则说明小 P 和小 H 算好了一种两人合作的最优方案，小 P 从点 $p_0$ 入侵到了 $p_1$ 并停下，小 H 从点 $h_0$ 入侵到了 $h_1$ 并停下。此时你不需要指挥他们入侵了，只需要计算最后两步删除计算节点与网线后，剩下的连通块个数即可。", "inputFormat": "每个输入文件包含多个输入数据。输入文件的第一行为两个整数 $T$ 和 $x$，$T$ 表示该文件包含的输入数据个数，$x$ 的含义见上述。（同一个输入文件的所有数据的 x 都是相同的。）\n\n接下来依次输入每个数据。", "outputFormat": "对于每个数据，输出一行，表示在给定条件下，剩下连通块的最大个数。", "hint": "* 若 $x = 0$，则该行只有一个整数 $n$。\n* 若 $x = 1$，则该行依次有三个整数 $n, p_0, p_1$。\n* 若 $x = 2$，则该行依次有五个整数 $n, p_0, p_1, h_0, h_1$。\n\n保证 $p_0, p_1, h_0, h_1$ 均为不超过 $n$ 的正整数。\n\n每个数据接下来有 $n - 1$ 行，每行有两个不超过 $n$ 的正整数，表示这两个编号的计算节点之间有一条网线将其相连。保证输入的是一棵树。\n\n同一行相邻的整数之间用恰好一个空格隔开。\n\n**数据文件可能较大，请避免使用过慢的输入输出方法。**\n\n【样例 1 说明】\n\n这个输入文件只有一个输入数据。一种最优的方案如下：\n\n- 小 P 从节点 $2$ 开始入侵，节点 $2$ 被小 P 标记。\n\n- 小 P 从节点 $2$ 入侵到节点 $4$，节点 $4$ 和经过的网线被小 P 标记。\n\n- 小 P 从节点 $4$ 入侵到节点 $7$，节点 $7$ 和经过的网线被小 P 标记。\n\n- 小 H 从节点 $10$ 开始入侵，节点 $10$ 被小 H 标记。\n\n- 删除被标记的节点 $2,4,7,10$ 和被标记的网线 $(2,4)$ 和 $(4,7)$。\n\n- 删除任意一端在上一步被删除的网线。\n\n此时还剩下 $8$ 个连通块。其中节点 $1,3,5,6,8,9,11$ 各自形成一个连通块，节点$12,13$形成了一个连通块。\n\n\n【样例 2 说明】\n\n- 数据 1：只有 $1$ 个计算节点，唯一可行的方案是小 P 从节点 $1$ 开始入侵（并马上停止），小 H 也从节点 $1$ 入侵到节点 $1$。所有的节点都被删去，剩下 $0$ 个连通块。\n\n- 数据 2：一种最优方案是，小 P 从节点 $1$ 入侵到节点 $1$，小 H 也从节点 $1$ 入侵到节点 $1$。在删除操作后，剩下 $1$ 个连通块（只有节点 $2$）。\n\n- 数据 3：唯一的最优方案是，小 P 从节点 $2$ 入侵到节点 $2$，小 H 也从节点 $2$ 入侵到节点 $2$，剩下 $2$ 个连通块。\n\n- 数据 4：一种最优方案是，小 P 从节点 $2$ 入侵到节点 $2$，小 H 也从节点 $2$ 入侵到节点 $2$，剩下 $2$ 个连通块。\n\n- 数据 5：唯一的最优方案是，小 P 从节点 $5$ 入侵到节点 $5$，小 H 也从节点 $5$ 入侵到节点 $5$，剩下 $4$ 个连通块。\n\n\n\n![](https://cdn.luogu.com.cn/upload/pic/38934.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/38935.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/38936.png)\n\n对于整数 $k$，设$\\sum n^k$ 为某个输入文件中，其$ T$ 个输入数据的 $n^k$ 之和。\n\n对于所有数据，$T \\leq 10^5, \\sum n^1 <5 \\times 10^5$\n\n请注意初始化的时间复杂度，避免输入大量小数据时超时。\n\n每个测试点的详细数据范围见下表。如果表中 “完全二叉” 为 Yes，则该输入文件的每个数据满足：网线信息的第 $j$ 行 $(1 \\leq j < n)$ 输入的两个数依次是 $\\left\\lfloor \\frac {j + 1} {2} \\right\\rfloor$ 和 $j + 1$。\n\n![](https://cdn.luogu.com.cn/upload/pic/38937.png)", "locale": "zh-CN"}}}
{"pid": "P3749", "type": "P", "difficulty": 6, "samples": [["3 1\n2 3 2\n5 -10 15\n-10 15\n15", "12"], ["5 0\n1 4 1 3 4\n50 99 8 -39 30\n68 27 -75 -32\n70 24 72\n-10 81\n-95", "381"], ["10 1\n5 5 4 4 1 2 5 1 5 3\n83 91 72 29 22 -5 57 -14 -36 -3\n-11 34 45 96 32 73 -1 0 29\n-48 68 44 -5 96 66 17 74\n88 47 69 -9 2 25 -49\n86 -9 -77 62 -10 -30\n2 40 95 -74 46\n49 -52 2 -51\n-55 50 -44\n72 22\n-68", "1223"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "各省省选", "广度优先搜索 BFS", "深度优先搜索 DFS", "最小割"], "title": "[六省联考 2017] 寿司餐厅", "background": "", "description": "Kiana 最近喜欢到一家非常美味的寿司餐厅用餐。\n\n每天晚上，这家餐厅都会按顺序提供 $n$ 种寿司，第 $i$ 种寿司有一个代号 $a_i$ 和美味度 $d_{i, i}$，不同种类的寿司有可能使用相同的代号。每种寿司的份数都是无限的，Kiana 也可以无限次取寿司来吃，但每种寿司每次只能取一份，且每次取走的寿司必须是按餐厅提供寿司的顺序连续的一段，即 Kiana 可以一次取走第 $1, 2$ 种寿司各一份，也可以一次取走第 $2, 3$ 种寿司各一份，但不可以一次取走第 $1, 3$ 种寿司。\n\n由于餐厅提供的寿司种类繁多，而不同种类的寿司之间相互会有影响：三文鱼寿司和鱿鱼寿司一起吃或许会很棒，但和水果寿司一起吃就可能会肚子痛。因此，Kiana 定义了一个综合美味度 $d_{i, j} \\ (i < j)$，表示在一次取的寿司中，如果包含了餐厅提供的从第 $i$ 份到第 $j$ 份的所有寿司，吃掉这次取的所有寿司后将获得的额外美味度。由于取寿司需要花费一些时间，所以我们认为分两次取来的寿司之间相互不会影响。注意在吃一次取的寿司时，不止一个综合美味度会被累加，比如若 Kiana 一次取走了第 $1, 2, 3$ 种寿司各一份，除了 $d_{1, 3}$ 以外，$d_{1, 2}, d_{2, 3}$ 也会被累加进总美味度中。\n\n神奇的是，Kiana 的美食评判标准是有记忆性的，无论是单种寿司的美味度，还是多种寿司组合起来的综合美味度，在计入 Kiana 的总美味度时都只会被累加一次。比如，若 Kiana 某一次取走了第 $1, 2$ 种寿司各一份，另一次取走了第 $2, 3$ 种寿司各一份，那么这两次取寿司的总美味度为 $d_{1, 1} + d_{2, 2} + d_{3, 3} + d_{1, 2} + d_{2, 3}$，其中 $d_{2, 2}$ 只会计算一次。\n\n奇怪的是，这家寿司餐厅的收费标准很不同寻常。具体来说，如果 Kiana 一共吃过了 $c \\ (c > 0)$ **种**代号为 $x$ 的寿司，则她需要为这些寿司付出 $mx^2 + cx$ 元钱，其中 $m$ 是餐厅给出的一个常数。\n\n现在 Kiana 想知道，在这家餐厅吃寿司，自己能获得的总美味度（包括所有吃掉的单种寿司的美味度和所有被累加的综合美味度）减去花费的总钱数的最大值是多少。由于她不会算，所以希望由你告诉她。", "inputFormat": "第一行包含两个正整数 $n, m$，分别表示这家餐厅提供的寿司总数和计算寿司价格中使用的常数。  \n第二行包含 $n$ 个正整数，其中第 $k$ 个数 $a_k$ 表示第 $k$ 份寿司的代号。  \n接下来 $n$ 行，第 $i$ 行包含 $n - i + 1$ 个整数，其中第 $j$ 个数 $d_{i, i+j-1}$ 表示吃掉寿司能获得的相应的美味度，具体含义见问题描述。", "outputFormat": "输出共一行包含一个正整数，表示 Kiana 能获得的总美味度减去花费的总钱数的最大值。", "hint": "### 样例解释 1\n\n在这组样例中，餐厅一共提供了 $3$ 份寿司，它们的代号依次为 $a_1 = 2, a_2 = 3, a_3 = 2$，计算价格时的常数 $m = 1$。\n\n在保证每次取寿司都能获得新的美味度的前提下，Kiana 一共有 $14$ 种不同的吃寿司方案。以下列出其中几种：\n1. Kiana 一个寿司也不吃，这样她获得的总美味度和花费的总钱数都是 $0$，两者相减也是 $0$；\n2. Kiana 只取 $1$ 次寿司，且只取第 $1$ 个寿司，即她取寿司的情况为 $\\{[1, 1]\\}$，这样获得的总美味度为 $5$，花费的总钱数为 $1 \\times 2^2 + 1 \\times 2 = 6$，两者相减为 $-1$；\n3. Kiana 取 $2$ 次寿司，第一次取第 $1, 2$ 个寿司，第二次取第 $2, 3$ 个寿司，即她取寿司的情况为 $\\{[1, 2], [2, 3]\\}$，这样获得的总美味度为 $5 + (-10) + 15 + (-10) + 15 = 15$，花费的总钱数为 $(1 \\times 2^2 + 2 \\times 2) + (1 \\times 3^2 + 1 \\times 3) = 20$，两者相减为 $-5$；\n4. Kiana 取 $2$ 次寿司，第一次取第 $1$ 个寿司，第二次取第 $3$ 个寿司，即她取寿司的情况为 $\\{[1, 1], [3, 3]\\}$，这样获得的总美味度为 $5 + 15 = 20$，花费的总钱数为 $1 \\times 2^2 + 2 \\times 2 = 8$，两者相减为 $12$。\n\n在 $14$ 种方案中，惟一的最优方案是列出的最后一种方案，这时她获得的总美味度减去花费的总钱数的值最大为 $12$。\n\n### 数据范围\n\n对于所有数据，保证 $-500 \\leq d_{i, j} \\leq 500$。\n\n数据的一些特殊约定如下表：\n\n| Case # | $n$ | $a_i$ | $m$ | 附加限制 |\n|:-:|:-:|:-:|:-:|:-:|\n| 1 | $\\leq 2$ | $\\leq 30$ | $= 0$ | - |\n| 2 | $\\leq 2$ | $\\leq 30$ | $= 1$ | - |\n| 3 | $\\leq 3$ | $\\leq 30$ | $= 0$ | - |\n| 4 | $\\leq 3$ | $\\leq 30$ | $= 1$ | - |\n| 5 | $\\leq 5$ | $\\leq 30$ | $= 0$ | - |\n| 6 | $\\leq 5$ | $\\leq 30$ | $= 1$ | - |\n| 7 | $\\leq 10$ | $\\leq 30$ | $= 0$ | 所有的 $a_i$ 相同 |\n| 8 | $\\leq 10$ | $\\leq 30$ | $= 1$ | - |\n| 9 | $\\leq 15$ | $\\leq 30$ | $= 0$ | 所有的 $a_i$ 相同 |\n| 10 | $\\leq 15$ | $\\leq 30$ | $= 1$ | - |\n| 11 | $\\leq 30$ | $\\leq 1000$ | $= 0$ | 所有的 $a_i$ 相同 |\n| 12 | $\\leq 30$ | $\\leq 30$ | $= 0$ | 所有的 $a_i$ 相同 |\n| 13 | $\\leq 30$ | $\\leq 1000$ | $= 0$ | - |\n| 14 | $\\leq 30$ | $\\leq 1000$ | $= 1$ | - |\n| 15 | $\\leq 50$ | $\\leq 1000$ | $= 0$ | 所有的 $a_i$ 相同 |\n| 16 | $\\leq 50$ | $\\leq 30$ | $= 0$ | 所有的 $a_i$ 相同 |\n| 17 | $\\leq 50$ | $\\leq 1000$ | $= 0$ | - |\n| 18 | $\\leq 50$ | $\\leq 1000$ | $= 1$ | - |\n| 19 | $\\leq 100$ | $\\leq 1000$ | $= 0$ | - |\n| 20 | $\\leq 100$ | $\\leq 1000$ | $= 1$ | - |", "locale": "zh-CN", "translations": {"en": {"title": "[Six-Province Joint Exam 2017] Sushi Restaurant", "background": "", "description": "Kiana has recently been dining at a very delicious sushi restaurant.\n\nEvery evening, the restaurant serves $n$ types of sushi in order. The $i$-th sushi has a code $a_i$ and a deliciousness $d_{i, i}$. Different types of sushi may share the same code. Each type has an unlimited number of servings, and Kiana can take sushi an unlimited number of times; however, in each take she can take at most one serving of each type, and the taken sushi in a single take must form a contiguous segment in the serving order. That is, Kiana may take one serving each of types $1$ and $2$ in one take, or types $2$ and $3$ in one take, but she may not take types $1$ and $3$ together in a single take.\n\nBecause there are many types and they may interact: salmon and squid together might be great, but together with fruit sushi might cause a stomachache. Therefore, Kiana defines a comprehensive deliciousness $d_{i, j}$ for $i < j$, meaning that if, in a single take, she includes all sushi from the $i$-th to the $j$-th served by the restaurant, then after eating all sushi taken in that take she will gain an extra deliciousness of $d_{i, j}$. Since taking sushi takes some time, we assume that sushi taken in different takes do not interact. Note that when eating sushi from a single take, more than one comprehensive deliciousness will be added. For example, if Kiana takes one serving each of types $1, 2, 3$ in a single take, then besides $d_{1, 3}$, $d_{1, 2}$ and $d_{2, 3}$ will also be added to the total deliciousness.\n\nMagically, Kiana’s evaluation of food has memory: whether it is the deliciousness of a single type of sushi or the comprehensive deliciousness of a combination, each will be added to Kiana’s total deliciousness at most once. For example, if Kiana once takes one serving each of types $1$ and $2$, and another time takes one serving each of types $2$ and $3$, then the total deliciousness of these two takes is $d_{1, 1} + d_{2, 2} + d_{3, 3} + d_{1, 2} + d_{2, 3}$, where $d_{2, 2}$ is counted only once.\n\nStrangely, the restaurant’s pricing policy is unusual. Specifically, if Kiana has eaten in total $c \\ (c > 0)$ kinds of sushi with code $x$, she must pay $m x^2 + c x$ yuan for those sushi, where $m$ is a constant given by the restaurant.\n\nNow Kiana wants to know, when eating at this restaurant, what is the maximum value of the total deliciousness (including the deliciousness of all eaten single types and all accumulated comprehensive deliciousness) minus the total amount of money paid. Since she cannot compute it, she asks you to tell her.", "inputFormat": "The first line contains two positive integers $n, m$, denoting the total number of sushi types served by the restaurant and the constant used in pricing.  \nThe second line contains $n$ positive integers, where the $k$-th number $a_k$ is the code of the $k$-th sushi.  \nThen follow $n$ lines. The $i$-th of these lines contains $n - i + 1$ integers, where the $j$-th number is $d_{i, i + j - 1}$, representing the corresponding deliciousness obtained by eating the sushi, as described above.", "outputFormat": "Output a single line containing a positive integer, which is the maximum value of the total deliciousness Kiana can obtain minus the total amount of money paid.", "hint": "### Sample Explanation 1\n\nIn this sample, the restaurant serves $3$ sushi in total, with codes $a_1 = 2, a_2 = 3, a_3 = 2$, and the constant for pricing is $m = 1$.\n\nUnder the requirement that each take must yield new deliciousness, Kiana has $14$ distinct ways to eat. Some of them are listed below:\n1. Kiana eats nothing. Then her total deliciousness and total payment are both $0$, and their difference is also $0$.\n2. Kiana takes sushi exactly once, and only takes the $1$-st sushi, i.e., her takes are $\\{[1, 1]\\}$. Then the total deliciousness is $5$, the total payment is $1 \\times 2^2 + 1 \\times 2 = 6$, and the difference is $-1$.\n3. Kiana takes sushi twice: the first time the $1$-st and $2$-nd sushi, and the second time the $2$-nd and $3$-rd sushi, i.e., her takes are $\\{[1, 2], [2, 3]\\}$. Then the total deliciousness is $5 + (-10) + 15 + (-10) + 15 = 15$, the total payment is $(1 \\times 2^2 + 2 \\times 2) + (1 \\times 3^2 + 1 \\times 3) = 20$, and the difference is $-5$.\n4. Kiana takes sushi twice: the first time the $1$-st sushi, and the second time the $3$-rd sushi, i.e., her takes are $\\{[1, 1], [3, 3]\\}$. Then the total deliciousness is $5 + 15 = 20$, the total payment is $1 \\times 2^2 + 2 \\times 2 = 8$, and the difference is $12$.\n\nAmong the $14$ plans, the unique optimal plan is the last one listed, where the maximum value of total deliciousness minus total payment is $12$.\n\n### Constraints\n\nFor all testdata, it is guaranteed that $-500 \\leq d_{i, j} \\leq 500$.\n\nAdditional special constraints on the data are as follows:\n\n| Case # | $n$ | $a_i$ | $m$ | Additional constraint |\n|:-:|:-:|:-:|:-:|:-:|\n| 1 | $\\leq 2$ | $\\leq 30$ | $= 0$ | - |\n| 2 | $\\leq 2$ | $\\leq 30$ | $= 1$ | - |\n| 3 | $\\leq 3$ | $\\leq 30$ | $= 0$ | - |\n| 4 | $\\leq 3$ | $\\leq 30$ | $= 1$ | - |\n| 5 | $\\leq 5$ | $\\leq 30$ | $= 0$ | - |\n| 6 | $\\leq 5$ | $\\leq 30$ | $= 1$ | - |\n| 7 | $\\leq 10$ | $\\leq 30$ | $= 0$ | All $a_i$ are the same |\n| 8 | $\\leq 10$ | $\\leq 30$ | $= 1$ | - |\n| 9 | $\\leq 15$ | $\\leq 30$ | $= 0$ | All $a_i$ are the same |\n| 10 | $\\leq 15$ | $\\leq 30$ | $= 1$ | - |\n| 11 | $\\leq 30$ | $\\leq 1000$ | $= 0$ | All $a_i$ are the same |\n| 12 | $\\leq 30$ | $\\leq 30$ | $= 0$ | All $a_i$ are the same |\n| 13 | $\\leq 30$ | $\\leq 1000$ | $= 0$ | - |\n| 14 | $\\leq 30$ | $\\leq 1000$ | $= 1$ | - |\n| 15 | $\\leq 50$ | $\\leq 1000$ | $= 0$ | All $a_i$ are the same |\n| 16 | $\\leq 50$ | $\\leq 30$ | $= 0$ | All $a_i$ are the same |\n| 17 | $\\leq 50$ | $\\leq 1000$ | $= 0$ | - |\n| 18 | $\\leq 50$ | $\\leq 1000$ | $= 1$ | - |\n| 19 | $\\leq 100$ | $\\leq 1000$ | $= 0$ | - |\n| 20 | $\\leq 100$ | $\\leq 1000$ | $= 1$ | - |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[六省联考 2017] 寿司餐厅", "background": "", "description": "Kiana 最近喜欢到一家非常美味的寿司餐厅用餐。\n\n每天晚上，这家餐厅都会按顺序提供 $n$ 种寿司，第 $i$ 种寿司有一个代号 $a_i$ 和美味度 $d_{i, i}$，不同种类的寿司有可能使用相同的代号。每种寿司的份数都是无限的，Kiana 也可以无限次取寿司来吃，但每种寿司每次只能取一份，且每次取走的寿司必须是按餐厅提供寿司的顺序连续的一段，即 Kiana 可以一次取走第 $1, 2$ 种寿司各一份，也可以一次取走第 $2, 3$ 种寿司各一份，但不可以一次取走第 $1, 3$ 种寿司。\n\n由于餐厅提供的寿司种类繁多，而不同种类的寿司之间相互会有影响：三文鱼寿司和鱿鱼寿司一起吃或许会很棒，但和水果寿司一起吃就可能会肚子痛。因此，Kiana 定义了一个综合美味度 $d_{i, j} \\ (i < j)$，表示在一次取的寿司中，如果包含了餐厅提供的从第 $i$ 份到第 $j$ 份的所有寿司，吃掉这次取的所有寿司后将获得的额外美味度。由于取寿司需要花费一些时间，所以我们认为分两次取来的寿司之间相互不会影响。注意在吃一次取的寿司时，不止一个综合美味度会被累加，比如若 Kiana 一次取走了第 $1, 2, 3$ 种寿司各一份，除了 $d_{1, 3}$ 以外，$d_{1, 2}, d_{2, 3}$ 也会被累加进总美味度中。\n\n神奇的是，Kiana 的美食评判标准是有记忆性的，无论是单种寿司的美味度，还是多种寿司组合起来的综合美味度，在计入 Kiana 的总美味度时都只会被累加一次。比如，若 Kiana 某一次取走了第 $1, 2$ 种寿司各一份，另一次取走了第 $2, 3$ 种寿司各一份，那么这两次取寿司的总美味度为 $d_{1, 1} + d_{2, 2} + d_{3, 3} + d_{1, 2} + d_{2, 3}$，其中 $d_{2, 2}$ 只会计算一次。\n\n奇怪的是，这家寿司餐厅的收费标准很不同寻常。具体来说，如果 Kiana 一共吃过了 $c \\ (c > 0)$ **种**代号为 $x$ 的寿司，则她需要为这些寿司付出 $mx^2 + cx$ 元钱，其中 $m$ 是餐厅给出的一个常数。\n\n现在 Kiana 想知道，在这家餐厅吃寿司，自己能获得的总美味度（包括所有吃掉的单种寿司的美味度和所有被累加的综合美味度）减去花费的总钱数的最大值是多少。由于她不会算，所以希望由你告诉她。", "inputFormat": "第一行包含两个正整数 $n, m$，分别表示这家餐厅提供的寿司总数和计算寿司价格中使用的常数。  \n第二行包含 $n$ 个正整数，其中第 $k$ 个数 $a_k$ 表示第 $k$ 份寿司的代号。  \n接下来 $n$ 行，第 $i$ 行包含 $n - i + 1$ 个整数，其中第 $j$ 个数 $d_{i, i+j-1}$ 表示吃掉寿司能获得的相应的美味度，具体含义见问题描述。", "outputFormat": "输出共一行包含一个正整数，表示 Kiana 能获得的总美味度减去花费的总钱数的最大值。", "hint": "### 样例解释 1\n\n在这组样例中，餐厅一共提供了 $3$ 份寿司，它们的代号依次为 $a_1 = 2, a_2 = 3, a_3 = 2$，计算价格时的常数 $m = 1$。\n\n在保证每次取寿司都能获得新的美味度的前提下，Kiana 一共有 $14$ 种不同的吃寿司方案。以下列出其中几种：\n1. Kiana 一个寿司也不吃，这样她获得的总美味度和花费的总钱数都是 $0$，两者相减也是 $0$；\n2. Kiana 只取 $1$ 次寿司，且只取第 $1$ 个寿司，即她取寿司的情况为 $\\{[1, 1]\\}$，这样获得的总美味度为 $5$，花费的总钱数为 $1 \\times 2^2 + 1 \\times 2 = 6$，两者相减为 $-1$；\n3. Kiana 取 $2$ 次寿司，第一次取第 $1, 2$ 个寿司，第二次取第 $2, 3$ 个寿司，即她取寿司的情况为 $\\{[1, 2], [2, 3]\\}$，这样获得的总美味度为 $5 + (-10) + 15 + (-10) + 15 = 15$，花费的总钱数为 $(1 \\times 2^2 + 2 \\times 2) + (1 \\times 3^2 + 1 \\times 3) = 20$，两者相减为 $-5$；\n4. Kiana 取 $2$ 次寿司，第一次取第 $1$ 个寿司，第二次取第 $3$ 个寿司，即她取寿司的情况为 $\\{[1, 1], [3, 3]\\}$，这样获得的总美味度为 $5 + 15 = 20$，花费的总钱数为 $1 \\times 2^2 + 2 \\times 2 = 8$，两者相减为 $12$。\n\n在 $14$ 种方案中，惟一的最优方案是列出的最后一种方案，这时她获得的总美味度减去花费的总钱数的值最大为 $12$。\n\n### 数据范围\n\n对于所有数据，保证 $-500 \\leq d_{i, j} \\leq 500$。\n\n数据的一些特殊约定如下表：\n\n| Case # | $n$ | $a_i$ | $m$ | 附加限制 |\n|:-:|:-:|:-:|:-:|:-:|\n| 1 | $\\leq 2$ | $\\leq 30$ | $= 0$ | - |\n| 2 | $\\leq 2$ | $\\leq 30$ | $= 1$ | - |\n| 3 | $\\leq 3$ | $\\leq 30$ | $= 0$ | - |\n| 4 | $\\leq 3$ | $\\leq 30$ | $= 1$ | - |\n| 5 | $\\leq 5$ | $\\leq 30$ | $= 0$ | - |\n| 6 | $\\leq 5$ | $\\leq 30$ | $= 1$ | - |\n| 7 | $\\leq 10$ | $\\leq 30$ | $= 0$ | 所有的 $a_i$ 相同 |\n| 8 | $\\leq 10$ | $\\leq 30$ | $= 1$ | - |\n| 9 | $\\leq 15$ | $\\leq 30$ | $= 0$ | 所有的 $a_i$ 相同 |\n| 10 | $\\leq 15$ | $\\leq 30$ | $= 1$ | - |\n| 11 | $\\leq 30$ | $\\leq 1000$ | $= 0$ | 所有的 $a_i$ 相同 |\n| 12 | $\\leq 30$ | $\\leq 30$ | $= 0$ | 所有的 $a_i$ 相同 |\n| 13 | $\\leq 30$ | $\\leq 1000$ | $= 0$ | - |\n| 14 | $\\leq 30$ | $\\leq 1000$ | $= 1$ | - |\n| 15 | $\\leq 50$ | $\\leq 1000$ | $= 0$ | 所有的 $a_i$ 相同 |\n| 16 | $\\leq 50$ | $\\leq 30$ | $= 0$ | 所有的 $a_i$ 相同 |\n| 17 | $\\leq 50$ | $\\leq 1000$ | $= 0$ | - |\n| 18 | $\\leq 50$ | $\\leq 1000$ | $= 1$ | - |\n| 19 | $\\leq 100$ | $\\leq 1000$ | $= 0$ | - |\n| 20 | $\\leq 100$ | $\\leq 1000$ | $= 1$ | - |", "locale": "zh-CN"}}}
{"pid": "P3750", "type": "P", "difficulty": 6, "samples": [["4 0\n0 0 1 1\n", "512"], ["5 0\n1 0 1 1 1", "5120"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "递推", "2017", "各省省选", "枚举", "期望"], "title": "[六省联考 2017] 分手是祝愿", "background": "", "description": "> Zeit und Raum trennen dich und mich.\n时空将你我分开。\n\nB 君在玩一个游戏，这个游戏由 $n$ 个灯和 $n$ 个开关组成，给定这 $n$ 个灯的初始状态，下标为从 $1$ 到 $n$ 的正整数。\n\n每个灯有两个状态亮和灭，我们用 $1$ 来表示这个灯是亮的，用 $0$ 表示这个灯是灭的，游戏的目标是使所有灯都灭掉。\n\n但是当操作第 $i$ 个开关时，所有编号为 $i$ 的约数（包括 $1$ 和 $i$）的灯的状态都会被改变，即从亮变成灭，或者是从灭变成亮。\n\nB 君发现这个游戏很难，于是想到了这样的一个策略，每次等概率随机操作一个开关，直到所有灯都灭掉。\n\n这个策略需要的操作次数很多，B 君想到这样的一个优化。如果当前局面，可以通过操作小于等于 $k$ 个开关使所有灯都灭掉，那么他将不再随机，直接选择操作次数最小的操作方法（这个策略显然小于等于 $k$ 步）操作这些开关。\n\nB 君想知道按照这个策略（也就是先随机操作，最后小于等于 $k$ 步，使用操作次数最小的操作方法）的操作次数的期望。\n\n这个期望可能很大，但是 B 君发现这个期望乘以 $n$ 的阶乘一定是整数，所以他只需要知道这个整数对 $100003$ 取模之后的结果。\n", "inputFormat": "第一行两个整数 $n, k$。\n接下来一行 $n$ 个整数，每个整数是 $0$ 或者 $1$，其中第 $i$ 个整数表示第 $i$ 个灯的初始情况。\n", "outputFormat": "输出一行，为操作次数的期望乘以 $n$ 的阶乘对 $100003$ 取模之后的结果。\n", "hint": "对于 $0\\%$ 的测试点，和样例一模一样；  \n对于另外 $30\\%$ 的测试点，$n \\leq 10$；  \n对于另外 $20\\%$ 的测试点，$n \\leq 100$；  \n对于另外 $30\\%$ 的测试点，$n \\leq 1000$；  \n对于 $100\\%$ 的测试点，$1 \\leq n \\leq 100000, 0 \\leq k \\leq n$；  \n对于以上每部分测试点，均有一半的数据满足 $k = n$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[Six-Province Joint Exam 2017] Breakup Is a Blessing", "background": "", "description": "> Zeit und Raum trennen dich und mich.\nTime and space separate you and me.\n\nB-kun is playing a game with $n$ lights and $n$ switches. The $n$ lights have initial states and are indexed by the positive integers from $1$ to $n$.\n\nEach light has two states, on and off. We use $1$ to indicate the light is on and $0$ to indicate it is off. The goal of the game is to turn all lights off.\n\nWhen operating the $i$-th switch, the states of all lights whose indices are divisors of $i$ (including $1$ and $i$) are toggled, i.e., on becomes off, and off becomes on.\n\nB-kun finds this game difficult, so he considers the following strategy: at each step, uniformly at random choose one switch to operate, until all lights are off.\n\nThis strategy may require many operations, so B-kun thinks of the following optimization. If, in the current state, it is possible to turn all lights off by pressing at most $k$ switches, then he will stop acting randomly and directly choose a method with the minimum number of operations (which is clearly at most $k$) to press those switches.\n\nB-kun wants to know the expected number of operations under this strategy (that is, act randomly first, and finally, if at most $k$ steps suffice, use the method with the minimum number of operations).\n\nThis expectation may be large, but B-kun observes that the expectation multiplied by $n!$ is always an integer, so he only needs this integer modulo $100003$.", "inputFormat": "The first line contains two integers $n, k$.  \nThe next line contains $n$ integers, each being $0$ or $1$, where the $i$-th integer indicates the initial state of the $i$-th light.", "outputFormat": "Output one line: the expectation of the number of operations multiplied by $n!$, modulo $100003$.", "hint": "For $0\\%$ of the testdata, the input is identical to the sample.  \nFor an additional $30\\%$ of the testdata, $n \\leq 10$.  \nFor an additional $20\\%$ of the testdata, $n \\leq 100$.  \nFor an additional $30\\%$ of the testdata, $n \\leq 1000$.  \nFor $100\\%$ of the testdata, $1 \\leq n \\leq 100000, 0 \\leq k \\leq n$.  \nFor each of the above parts of the testdata, half of the testdata satisfies $k = n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[六省联考 2017] 分手是祝愿", "background": "", "description": "> Zeit und Raum trennen dich und mich.\n时空将你我分开。\n\nB 君在玩一个游戏，这个游戏由 $n$ 个灯和 $n$ 个开关组成，给定这 $n$ 个灯的初始状态，下标为从 $1$ 到 $n$ 的正整数。\n\n每个灯有两个状态亮和灭，我们用 $1$ 来表示这个灯是亮的，用 $0$ 表示这个灯是灭的，游戏的目标是使所有灯都灭掉。\n\n但是当操作第 $i$ 个开关时，所有编号为 $i$ 的约数（包括 $1$ 和 $i$）的灯的状态都会被改变，即从亮变成灭，或者是从灭变成亮。\n\nB 君发现这个游戏很难，于是想到了这样的一个策略，每次等概率随机操作一个开关，直到所有灯都灭掉。\n\n这个策略需要的操作次数很多，B 君想到这样的一个优化。如果当前局面，可以通过操作小于等于 $k$ 个开关使所有灯都灭掉，那么他将不再随机，直接选择操作次数最小的操作方法（这个策略显然小于等于 $k$ 步）操作这些开关。\n\nB 君想知道按照这个策略（也就是先随机操作，最后小于等于 $k$ 步，使用操作次数最小的操作方法）的操作次数的期望。\n\n这个期望可能很大，但是 B 君发现这个期望乘以 $n$ 的阶乘一定是整数，所以他只需要知道这个整数对 $100003$ 取模之后的结果。\n", "inputFormat": "第一行两个整数 $n, k$。\n接下来一行 $n$ 个整数，每个整数是 $0$ 或者 $1$，其中第 $i$ 个整数表示第 $i$ 个灯的初始情况。\n", "outputFormat": "输出一行，为操作次数的期望乘以 $n$ 的阶乘对 $100003$ 取模之后的结果。\n", "hint": "对于 $0\\%$ 的测试点，和样例一模一样；  \n对于另外 $30\\%$ 的测试点，$n \\leq 10$；  \n对于另外 $20\\%$ 的测试点，$n \\leq 100$；  \n对于另外 $30\\%$ 的测试点，$n \\leq 1000$；  \n对于 $100\\%$ 的测试点，$1 \\leq n \\leq 100000, 0 \\leq k \\leq n$；  \n对于以上每部分测试点，均有一半的数据满足 $k = n$。\n", "locale": "zh-CN"}}}
{"pid": "P3752", "type": "P", "difficulty": 4, "samples": [["4\nQzrian yy ghy qzr\nYugoslavian mihailova petrozavodsk saint-petersburg\nSuissvia yugoslavia korse mais kohnin\nMohaian Jzm Wallace Zhangbaohua djh \n\nyy,qzr and ghy are i don't know\nmihailova saZk amOmlio\nmais c'est pas Ca\nwallace is good\n", "Qzrian\nYugoslavian\nSuissvia\nMohaian\n\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "洛谷比赛"], "title": "语言普查", "background": "“Kiaosmaonsnai Assi fi wais.”\n\n“Kjamqosoaksi mais pas?”\n\n“Oci! Asia olo mnai naso!”\n\n“2333 在说什么啊根本听不懂……”\n\n这是 Yugo 国的日常……\n\nYugo 国的人民在进行一次人口普查，由于 Yugo 国是典型的多民族国家，所以拥有许多种语言。", "description": "Yugo 国有许多不同的种族，总共有 $N$ 种不同的语言，但是主![]()席扔给了你几本字典，这样，你就知道他们在说什么语了。你的任务就是判断他们在说什么语并填上户口本。\n\n具体的，给出 $N$ 种语言的名称以及已知的来自该语言的若干个单词，保证每个单词最多出现在一种语言中。同时你还会得到若干个句子，对于每个句子，你都需要判断它属于哪种语言（单词匹配不区分大小写）。\n\n一个句子是一个仅包含大小写字母、空格、`-`、`'`、`.`、`,`、`?`、`!`、`;`、`(` 和 `)` 的字符串，其中有且仅有 `.`、`,`、`?`、`!`、`;`、`(` 和 `)` 是分隔符。一个句子由若干个单词和分隔符构成。\n\n句子中每个极大的不包含分隔符的子串都是一个单词。即：若一个句子的子串 $S$ 不包含分隔符，且不存在该句子的另一个子串 $T$ 满足 $T$ 不包含分隔符、$S$ 是 $T$ 的子串且 $S\\ne T$，则 $S$ 是该句子中的一个单词。\n\n同时，输入数据中的句子有以下性质：\n\n- 一个句子中不会同时包含来自不同语言的两个单词。\n- 一个句子中包含至少一个来自一种语言的单词。\n- 一个句子中可能出现在任何一个语言的已知词语中都没有出现过的词语。\n\n一个句子属于一种语言当且仅当该句子中存在一个单词 $S$ 来自该语言。", "inputFormat": "第一行一个整数 $N$，表示不同语言的数量。\n\n接下来 $N$ 行，依次是该语言的名称和该语言中的若干个单词，单词之间用空格隔开。\n\n接下来一行为空行。\n\n接下来若干行（不超过 $10^3$ 行），每行一个句子。", "outputFormat": "对于每个句子，输出一行一个字符串，表示该句子属于的语言的名称。", "hint": "对于 $100\\%$ 的数据，$1\\le N\\le 100$，输入数据每行不超过 $256$ 个字符。", "locale": "zh-CN", "translations": {"en": {"title": "Language Census", "background": "“Kiaosmaonsnai Assi fi wais.”\n\n“Kjamqosoaksi mais pas?”\n\n“Oci! Asia olo mnai naso!”\n\n“2333 what are they even saying, I can’t understand at all...”\n\nThis is everyday life in Yugo.\n\nThe people of Yugo are conducting a population census. Since Yugo is a typical multi-ethnic country, it has many languages.", "description": "There are many different ethnic groups in Yugo. In total there are $N$ different languages, but the chairperson threw you a few dictionaries, so now you can understand what they are speaking. Your task is to determine which language they are speaking and fill it in the register.\n\nSpecifically, you are given the names of $N$ languages and several known words from each language. It is guaranteed that each word appears in at most one language. You are also given several sentences. For each sentence, you need to determine which language it belongs to (word matching is case-insensitive).\n\nA sentence is a string that contains only uppercase and lowercase letters, spaces, `-`, `'`, `.`, `,`, `?`, `!`, `;`, `(` and `)`, among which, and only among which, space, `.`, `,`, `?`, `!`, `;`, `(` and `)` are separators. A sentence consists of several words and separators.\n\nEach maximal substring that does not contain separators is a word. That is, if a substring $S$ of a sentence contains no separators, and there does not exist another substring $T$ of the sentence such that $T$ contains no separators, $S$ is a substring of $T$, and $S \\ne T$, then $S$ is a word in that sentence.\n\nAdditionally, the sentences in the input have the following properties:\n- A sentence will not contain two words from different languages at the same time.\n- A sentence contains at least one word from some language.\n- A sentence may contain words that do not appear in any language’s known word list.\n\nA sentence belongs to a language if and only if there exists a word $S$ in the sentence that comes from that language.", "inputFormat": "The first line contains an integer $N$, the number of different languages.\n\nThen follow $N$ lines. Each line contains the name of a language and several known words from that language, separated by spaces.\n\nThen there is a blank line.\n\nThen several lines (no more than $10^3$ lines), one sentence per line.", "outputFormat": "For each sentence, output a single line with the name of the language it belongs to.", "hint": "For $100\\%$ of the testdata, $1 \\le N \\le 100$, and each input line does not exceed 256 characters.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "语言普查", "background": "“Kiaosmaonsnai Assi fi wais.”\n\n“Kjamqosoaksi mais pas?”\n\n“Oci! Asia olo mnai naso!”\n\n“2333 在说什么啊根本听不懂……”\n\n这是 Yugo 国的日常……\n\nYugo 国的人民在进行一次人口普查，由于 Yugo 国是典型的多民族国家，所以拥有许多种语言。", "description": "Yugo 国有许多不同的种族，总共有 $N$ 种不同的语言，但是主![]()席扔给了你几本字典，这样，你就知道他们在说什么语了。你的任务就是判断他们在说什么语并填上户口本。\n\n具体的，给出 $N$ 种语言的名称以及已知的来自该语言的若干个单词，保证每个单词最多出现在一种语言中。同时你还会得到若干个句子，对于每个句子，你都需要判断它属于哪种语言（单词匹配不区分大小写）。\n\n一个句子是一个仅包含大小写字母、空格、`-`、`'`、`.`、`,`、`?`、`!`、`;`、`(` 和 `)` 的字符串，其中有且仅有 `.`、`,`、`?`、`!`、`;`、`(` 和 `)` 是分隔符。一个句子由若干个单词和分隔符构成。\n\n句子中每个极大的不包含分隔符的子串都是一个单词。即：若一个句子的子串 $S$ 不包含分隔符，且不存在该句子的另一个子串 $T$ 满足 $T$ 不包含分隔符、$S$ 是 $T$ 的子串且 $S\\ne T$，则 $S$ 是该句子中的一个单词。\n\n同时，输入数据中的句子有以下性质：\n\n- 一个句子中不会同时包含来自不同语言的两个单词。\n- 一个句子中包含至少一个来自一种语言的单词。\n- 一个句子中可能出现在任何一个语言的已知词语中都没有出现过的词语。\n\n一个句子属于一种语言当且仅当该句子中存在一个单词 $S$ 来自该语言。", "inputFormat": "第一行一个整数 $N$，表示不同语言的数量。\n\n接下来 $N$ 行，依次是该语言的名称和该语言中的若干个单词，单词之间用空格隔开。\n\n接下来一行为空行。\n\n接下来若干行（不超过 $10^3$ 行），每行一个句子。", "outputFormat": "对于每个句子，输出一行一个字符串，表示该句子属于的语言的名称。", "hint": "对于 $100\\%$ 的数据，$1\\le N\\le 100$，输入数据每行不超过 $256$ 个字符。", "locale": "zh-CN"}}}
{"pid": "P3753", "type": "P", "difficulty": 4, "samples": [["4 4\n1 2 1\n1 3 0\n2 3 1\n3 4 1", "3\n"]], "limits": {"time": [500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "洛谷比赛"], "title": "国事访问", "background": "这是战火纷飞的2333年，世界被分为XC联盟和WJ联盟，两个联盟互相开火。\n", "description": "这是战火纷飞的2333年，世界被分为XC联盟和WJ联盟，两个联盟互相开火。Q国总统ZR想到Yugo国进行十分紧急的国事访问，但不能坐飞机，只能坐车。由于路上有许多不同的国家而且有些无政府国，所以有许多路是坏的。路没有从自己通向自己的（作死吗。。。）。你需要确定一条具体的路线，并且由于WJ联盟的人随时可能过来，你需要把这条路线经过的所有城市周围的其他路都毁掉。你是上帝视角，你需要帮助ZR总统到达Yugo，你可以毁掉一些原本是好的路，也可以把坏的路修好，但不能新修路。给你一份地图，地图上，ZR国坐落在1城，Yugo首都在n城。帮助ZR总统尽快到达Yugo，你可以获得ZR总统在WJ联邦银行的30亿存款和1000万人的军队，和ZR总统一起瓜分地球（以上是诈骗内容。。。）。\n", "inputFormat": "第一行，n，m，（2<=n<=1000,0<=m<=1000），n是Yugo首都，m是公路数量。\n\n第2至m+1行，a，b，c，a是公路起始城市，b是公路结束城市，c是路的情况（1：能通行/0：不能通行）。\n", "outputFormat": "第一行，k，需要改变路状态的最小数量。\n", "hint": "把 1 2 1 路径变成不可用\n\n把 1 3 0 路径变成可用\n\n把 2 3 1 路径变成不可用\n\n即可", "locale": "zh-CN", "translations": {"en": {"title": "State Visit", "background": "It is the war-torn year 2333. The world is divided into the XC alliance and the WJ alliance, and the two alliances are firing at each other.", "description": "It is the war-torn year 2333. The world is divided into the XC alliance and the WJ alliance, and the two alliances are firing at each other. President ZR of country Q wants to make a very urgent state visit to the country of Yugo, but he cannot fly and can only travel by car. Because there are many different countries along the way and some are in anarchy, many roads are broken. There is no road that goes from a city to itself (who would do that...).\n\nYou need to determine a specific route. Since people from the WJ alliance may show up at any time, you must destroy all other roads incident to every city that the route passes through. You have a god’s-eye view and must help President ZR reach Yugo. You may change the state of some roads: you can close roads that are currently open or repair roads that are currently closed, but you cannot build new roads. You are given a map where ZR’s country is at city 1 and Yugo’s capital is at city $n$. Help President ZR reach Yugo as soon as possible. You will receive President ZR’s 3 billion deposit in the WJ Federal Bank and an army of 10 million people, and divide the Earth together with President ZR (the above is a scam...).\n\n# Description", "inputFormat": "- The first line contains two integers $n$, $m$ ($2 \\le n \\le 1000$, $0 \\le m \\le 1000$). City $n$ is the capital of Yugo, and $m$ is the number of roads.\n- The next $m$ lines each contain three integers $a$, $b$, $c$: $a$ is the start city, $b$ is the end city, and $c$ indicates the road’s state (1: passable / 0: impassable).", "outputFormat": "The first line contains an integer $k$, the minimal number of road-state changes required.", "hint": "Make road 1 2 1 impassable.\n\nMake road 1 3 0 passable.\n\nMake road 2 3 1 impassable.\n\nAnd that will do.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "国事访问", "background": "这是战火纷飞的2333年，世界被分为XC联盟和WJ联盟，两个联盟互相开火。\n", "description": "这是战火纷飞的2333年，世界被分为XC联盟和WJ联盟，两个联盟互相开火。Q国总统ZR想到Yugo国进行十分紧急的国事访问，但不能坐飞机，只能坐车。由于路上有许多不同的国家而且有些无政府国，所以有许多路是坏的。路没有从自己通向自己的（作死吗。。。）。你需要确定一条具体的路线，并且由于WJ联盟的人随时可能过来，你需要把这条路线经过的所有城市周围的其他路都毁掉。你是上帝视角，你需要帮助ZR总统到达Yugo，你可以毁掉一些原本是好的路，也可以把坏的路修好，但不能新修路。给你一份地图，地图上，ZR国坐落在1城，Yugo首都在n城。帮助ZR总统尽快到达Yugo，你可以获得ZR总统在WJ联邦银行的30亿存款和1000万人的军队，和ZR总统一起瓜分地球（以上是诈骗内容。。。）。\n", "inputFormat": "第一行，n，m，（2<=n<=1000,0<=m<=1000），n是Yugo首都，m是公路数量。\n\n第2至m+1行，a，b，c，a是公路起始城市，b是公路结束城市，c是路的情况（1：能通行/0：不能通行）。\n", "outputFormat": "第一行，k，需要改变路状态的最小数量。\n", "hint": "把 1 2 1 路径变成不可用\n\n把 1 3 0 路径变成可用\n\n把 2 3 1 路径变成不可用\n\n即可", "locale": "zh-CN"}}}
{"pid": "P3754", "type": "P", "difficulty": 5, "samples": [["100 111", "68"], ["233 233", "14"], ["1 9", "45"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["洛谷原创", "洛谷比赛"], "title": "首都效应", "background": "Yugo 的最大城市就是它的首都，Yugo 国的城市差异十分大：边缘城市几乎没人，但中心城市全是人。", "description": "Jace 是 Alara 的总统，和 Q 国总统一样，因为战乱，他必须乘坐车来 Yugo 首都。随行的记录员 Tezzeret 负责调查 Yugo 的真正实力，他的任务是数清沿途的城市的房子数量。\n\nYugo 的城市已经被编号，他数着数着，发现了一个规律：把城市编号分为几个连续的数字段，对每一数段，该数字乘上这个数段的长度的平方再全部相加，就能得到这个城市的房子数量。例：第 $233$ 城房子数量：$2\\times1^2+3\\times2^2=14$。\n\nTezzeret 被告知他需要计算沿途的房子数总量（从进入 Yugo 的 A 城一直到首都 Y 城的房子总数），然而计算量太大，你能不能用 PC 帮他解决这个计算量巨大的问题？", "inputFormat": "一行两个整数 $A,B(1 \\le A \\le B \\le 10^{15})$，分别表示进入 Yugo 的第一城和首都。", "outputFormat": "一行一个整数，表示房子总量。", "hint": "样例 $1$ 房子总量：$1\\times1^2+1\\times1^2+1\\times1^2+2\\times1^2+1\\times1^2+3\\times1^2+\\ldots+1\\times1^2+9\\times1^2+1\\times2^2+1\\times3^2=68$。", "locale": "zh-CN", "translations": {"en": {"title": "Capital Effect", "background": "Yugo’s largest city is its capital. The disparity among Yugo’s cities is huge: the peripheral cities are almost empty, while the central cities are packed with people.", "description": "Jace is the president of Alara. Like the president of country Q, due to war, he must travel by car to Yugo’s capital. The accompanying recorder Tezzeret is responsible for assessing Yugo’s true strength. His task is to count the number of houses in the cities along the way.\n\nThe cities of Yugo are already numbered. While counting, he discovered a rule: split the city number into several consecutive “digit runs” (each run consists of the same digit). For each run, multiply that digit by the square of the run’s length, then sum all these values to obtain the number of houses in that city. Example: for city $233$, the number of houses is $2\\times1^2+3\\times2^2=14$.\n\nTezzeret was told to compute the total number of houses along the route (from city $A$, where they enter Yugo, up to the capital city $B$), but the computation is too heavy. Can you use a PC to help him solve this large-scale calculation?", "inputFormat": "One line with two integers $A, B(1 \\le A \\le B \\le 10^{15})$, representing the first city upon entering Yugo and the capital city, respectively.", "outputFormat": "One line with one integer, the total number of houses.", "hint": "In Sample $1$, the total number of houses is: $1\\times1^2+1\\times1^2+1\\times1^2+2\\times1^2+1\\times1^2+3\\times1^2+\\ldots+1\\times1^2+9\\times1^2+1\\times2^2+1\\times3^2=68$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "首都效应", "background": "Yugo 的最大城市就是它的首都，Yugo 国的城市差异十分大：边缘城市几乎没人，但中心城市全是人。", "description": "Jace 是 Alara 的总统，和 Q 国总统一样，因为战乱，他必须乘坐车来 Yugo 首都。随行的记录员 Tezzeret 负责调查 Yugo 的真正实力，他的任务是数清沿途的城市的房子数量。\n\nYugo 的城市已经被编号，他数着数着，发现了一个规律：把城市编号分为几个连续的数字段，对每一数段，该数字乘上这个数段的长度的平方再全部相加，就能得到这个城市的房子数量。例：第 $233$ 城房子数量：$2\\times1^2+3\\times2^2=14$。\n\nTezzeret 被告知他需要计算沿途的房子数总量（从进入 Yugo 的 A 城一直到首都 Y 城的房子总数），然而计算量太大，你能不能用 PC 帮他解决这个计算量巨大的问题？", "inputFormat": "一行两个整数 $A,B(1 \\le A \\le B \\le 10^{15})$，分别表示进入 Yugo 的第一城和首都。", "outputFormat": "一行一个整数，表示房子总量。", "hint": "样例 $1$ 房子总量：$1\\times1^2+1\\times1^2+1\\times1^2+2\\times1^2+1\\times1^2+3\\times1^2+\\ldots+1\\times1^2+9\\times1^2+1\\times2^2+1\\times3^2=68$。", "locale": "zh-CN"}}}
{"pid": "P3755", "type": "P", "difficulty": 4, "samples": [["4 2   \n0 0 1 \n0 1 2  \n2 2 4  \n1 0 8  \n0 0 1 1 \n1 1 5 6 ", "11\n4"], ["3 2\n-100 0 16 \n1 -10 32 \n1000 100 64 \n0 0 0 1 \n-1000 -1000 10000 10000 ", "0\n112"]], "limits": {"time": [3000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "重庆", "线段树", "各省省选", "树状数组", "离散化", "cdq 分治", "树套树", "可持久化线段树"], "title": "[CQOI2017] 老C的任务", "background": "", "description": "老 C 是个程序员。\n\n\n最近老 C 从老板那里接到了一个任务——给城市中的手机基站写个管理系统。作为经验丰富的程序员，老 C 轻松地完成了系统的大部分功能，并把其中一个功能交给你来实现。\n\n由于一个基站的面积相对于整个城市面积来说非常的小，因此每个的基站都可以看作坐标系中的一个点，其位置可以用坐标 $(x,y)$ 来表示。此外，每个基站还有很多属性，例如高度、功率等。运营商经常会划定一个区域，并查询区域中所有基站的信息。\n\n现在你需要实现的功能就是，对于一个给定的矩形区域，回答该区域中（包括区域边界上的）所有基站的功率总和。如果区域中没有任何基站，则回答 $0$。\n", "inputFormat": "第一行两个整数 $n,m$，表示一共有 $n$ 个基站和 $m$ 次查询。接下来一共有 $n$ 行，每行由 $x_i,y_i,p_i$ 三个空格隔开的整数构成，表示一个基站的坐标 $(x_i,y_i)$ 和功率 $p_i$。不会有两个基站位于同一坐标。\n\n接下来一共有 $m$ 行，每行由 $x_1,y_1,x_2,y_2$ 四个空格隔开的整数构成，表示一次查询的矩形区域。该矩形对角坐标为 $(x_1,y_1)$ 和 $(x_2,y_2)$，且边与坐标轴平行。\n", "outputFormat": "输出 $m$ 行，每行一个整数，对应每次查询的结果。\n", "hint": "对于第 $1\\sim2$ 个测试点，$1≤n,m≤100$；\n\n对于第 $3\\sim5$ 个测试点，$1≤n≤50000,1≤m≤10000$；\n\n对于第 $6\\sim10$ 个测试点，$1≤n≤100000,1≤m≤100000$，数据有梯度；\n\n对于所有测试点，$-2^{31}\\le x_i,y_i,p_i,x_1,y_1,x_2,y_2<2^{31},x_1\\le x_2,y_1\\le y_2$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[CQOI2017] Old C's Task", "background": "", "description": "Old C is a programmer.\n\nRecently, Old C received a task from his boss — to write a management system for mobile base stations in the city. As an experienced programmer, Old C easily completed most of the system and left one feature for you to implement.\n\nSince the area covered by one base station is very small compared to the whole city, each base station can be regarded as a point in the coordinate plane, with its position represented by coordinates $(x,y)$. In addition, each base station has many attributes, such as height and power. The operator often specifies a region and queries the information of all base stations in that region.\n\nYour task is: for a given rectangular region, answer the sum of the power values of all base stations inside the region (including those on the boundary). If the region contains no base stations, output $0$.", "inputFormat": "The first line contains two integers $n,m$, meaning there are $n$ base stations and $m$ queries. The next $n$ lines each contain three space-separated integers $x_i,y_i,p_i$, representing a base station at coordinates $(x_i,y_i)$ with power $p_i$. No two base stations share the same coordinates.\n\nThen follow $m$ lines, each containing four space-separated integers $x_1,y_1,x_2,y_2$, denoting one query rectangle. The rectangle has diagonally opposite corners at $(x_1,y_1)$ and $(x_2,y_2)$, and its sides are parallel to the coordinate axes.", "outputFormat": "Output $m$ lines, each containing one integer, the answer for the corresponding query.", "hint": "For testdata $1 \\sim 2$, $1 \\le n,m \\le 100$.\n\nFor testdata $3 \\sim 5$, $1 \\le n \\le 50000$, $1 \\le m \\le 10000$.\n\nFor testdata $6 \\sim 10$, $1 \\le n \\le 100000$, $1 \\le m \\le 100000$, and the testdata has a gradient.\n\nFor all testdata, $-2^{31} \\le x_i,y_i,p_i,x_1,y_1,x_2,y_2 < 2^{31}$, $x_1 \\le x_2$, $y_1 \\le y_2$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CQOI2017] 老C的任务", "background": "", "description": "老 C 是个程序员。\n\n\n最近老 C 从老板那里接到了一个任务——给城市中的手机基站写个管理系统。作为经验丰富的程序员，老 C 轻松地完成了系统的大部分功能，并把其中一个功能交给你来实现。\n\n由于一个基站的面积相对于整个城市面积来说非常的小，因此每个的基站都可以看作坐标系中的一个点，其位置可以用坐标 $(x,y)$ 来表示。此外，每个基站还有很多属性，例如高度、功率等。运营商经常会划定一个区域，并查询区域中所有基站的信息。\n\n现在你需要实现的功能就是，对于一个给定的矩形区域，回答该区域中（包括区域边界上的）所有基站的功率总和。如果区域中没有任何基站，则回答 $0$。\n", "inputFormat": "第一行两个整数 $n,m$，表示一共有 $n$ 个基站和 $m$ 次查询。接下来一共有 $n$ 行，每行由 $x_i,y_i,p_i$ 三个空格隔开的整数构成，表示一个基站的坐标 $(x_i,y_i)$ 和功率 $p_i$。不会有两个基站位于同一坐标。\n\n接下来一共有 $m$ 行，每行由 $x_1,y_1,x_2,y_2$ 四个空格隔开的整数构成，表示一次查询的矩形区域。该矩形对角坐标为 $(x_1,y_1)$ 和 $(x_2,y_2)$，且边与坐标轴平行。\n", "outputFormat": "输出 $m$ 行，每行一个整数，对应每次查询的结果。\n", "hint": "对于第 $1\\sim2$ 个测试点，$1≤n,m≤100$；\n\n对于第 $3\\sim5$ 个测试点，$1≤n≤50000,1≤m≤10000$；\n\n对于第 $6\\sim10$ 个测试点，$1≤n≤100000,1≤m≤100000$，数据有梯度；\n\n对于所有测试点，$-2^{31}\\le x_i,y_i,p_i,x_1,y_1,x_2,y_2<2^{31},x_1\\le x_2,y_1\\le y_2$。\n", "locale": "zh-CN"}}}
