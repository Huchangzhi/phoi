{"pid": "P3615", "type": "P", "difficulty": 6, "samples": [["5\n3\nFFF 1\nM 5\nFF 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2016", "JOISC/JOIST（日本）"], "title": "[JOISC 2016] 如厕计划 / Toilets", "background": null, "description": "竞赛比完之后，水箱里充满水的选手们鱼贯而出。凡华中学的厕所规划的很糟，只有两个厕位，于是厕所门前排起了长长的队伍。\n\n\n厕所有两个，一个是女生专用厕所，另一个是男女混用厕所。**一共有 $2N$ 个选手正在排队**，男女生数量可能不同。如果队头的是妹子，只要某个厕所是空的就可以进入，但是如果两个厕所都是空的，那么优先进入女性专用厕所。而如果队头是个绅♂士，只有在男女混用厕所是空的时候才能使用；如果只有女性专用厕所是空的，那么队伍中最靠前的妹子就可以不用继续等直接如厕。我们假设所有人如厕都需要花 $1$ 分钟，不考虑切换的时间。\n\n\n然而，**$N$ 分钟后，就要开饭了，所有人必须如厕完**，不过看样子似乎来不及。主办方可以重新调换顺序，不过有些人会因为新的顺序中自己更加后面了而感到不满，不满度是自己相比于原队列后退了几个顺序（除此之外跟自己的实际如厕顺序无关）。\n\n\n主办方发现了这一点，所以希望你帮助他们解决这个问题，设计出一种方案，对于其中不满意度最大的学生，尽可能让他的不满意度最小。你只需要告诉他们最不满意的学生的不满意度是多少。", "inputFormat": "由于人相当多，我们用几段字符串来描述这个队列。\n\n第一行一个整数 $N$ ；\n\n第二行一个整数 $M$ ；\n\n接下来 $M$ 行，由一个字符串 $S_i$ 和一个整数 $K_i$ 构成，中间有空格隔开，字符串中只有```M```（男）和```F```（女）。最后的字符串就是 $S_1$ 拼接 $K_1$次 + $S_2$ 拼接 $K_2$ 次+ ... + $S_M$ 拼接 $K_M$ 次。", "outputFormat": "输出一个整数，表示答案。如果无论怎么样都没办法在 $N$ 分钟之内达成，请输出 ```-1``` 。", "hint": "原队列是 ```FFFMMMMMFF``` ，\n\n改进后的队列是 ```FMMFFMMMFF``` ，\n\n所以厕所会按照下面的时间使用：\n\n```cpp\n分钟 1   2   3   4   5\n共用 2   3   6   7   8\n女用 1   4   5   9   10\n```\n两个妹子往后面移动了 $2$ 位，所以不满意度是 $2$ 。\n\n对于 $20 \\%$ 的数据，$N \\le 10,M=1,K_1=1$ ；\n\n对于 $40 \\%$ 的数据， $N\\le100000,M=1,K_1=1$；\n\n对于 $100 \\%$ 的数据， $1\\le N,K_i\\le10^{18},1\\le M\\le100000, \\sum |S_i| \\le 200000$。", "locale": "zh-CN", "translations": {"en": {"title": "[JOISC 2016] Toilet Plan / Toilets", "background": "", "description": "After the contest, the contestants with full bladders file out. The restroom planning at Fanhua High School is terrible: there are only two stalls, so a long line forms in front of the restroom.\n\nThere are two restrooms: one is female-only, and the other is unisex. There are $2N$ contestants in total waiting in line, and the numbers of males and females may differ. If the head of the queue is female, she may enter as soon as any restroom is free; if both restrooms are free, she prefers the female-only restroom. If the head of the queue is male, he can only use the unisex restroom when it is free; if only the female-only restroom is free, then the earliest female in the queue may immediately enter without waiting. Assume each person occupies a restroom for $1$ minute, and ignore switching time.\n\nHowever, after $N$ minutes dinner starts, and everyone must have finished using the restroom, which seems impossible. The organizers may reorder the queue, but some people will be unhappy because they are placed later than before. A person’s dissatisfaction is the number of positions they move backward compared to the original queue (it is otherwise unrelated to their actual time of using the restroom).\n\nThe organizers want your help to design a plan that minimizes the maximum dissatisfaction among all students. You only need to report the dissatisfaction of the most dissatisfied student.", "inputFormat": "Because there are many people, we describe the queue using several string blocks.\n\n- The first line contains an integer $N$.\n- The second line contains an integer $M$.\n- The next $M$ lines each contain a string $S_i$ and an integer $K_i$, separated by a space. The string contains only ```M``` (male) and ```F``` (female). The final string equals $S_1$ repeated $K_1$ times + $S_2$ repeated $K_2$ times + ... + $S_M$ repeated $K_M$ times.", "outputFormat": "Output a single integer, the answer. If it is impossible to finish within $N$ minutes no matter how you reorder, output ```-1```.", "hint": "The original queue is ```FFFMMMMMFF```,\n\nthe improved queue is ```FMMFFMMMFF```,\n\nso the restrooms are used as follows:\n\n```cpp\n分钟 1   2   3   4   5\n共用 2   3   6   7   8\n女用 1   4   5   9   10\n```\nTwo females move backward by $2$ positions, so the dissatisfaction is $2$.\n\nFor $20\\%$ of the testdata, $N \\le 10$, $M = 1$, $K_1 = 1$.\n\nFor $40\\%$ of the testdata, $N \\le 100000$, $M = 1$, $K_1 = 1$.\n\nFor $100\\%$ of the testdata, $1 \\le N, K_i \\le 10^{18}$, $1 \\le M \\le 100000$, $\\sum |S_i| \\le 200000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[JOISC 2016] 如厕计划 / Toilets", "background": null, "description": "竞赛比完之后，水箱里充满水的选手们鱼贯而出。凡华中学的厕所规划的很糟，只有两个厕位，于是厕所门前排起了长长的队伍。\n\n\n厕所有两个，一个是女生专用厕所，另一个是男女混用厕所。**一共有 $2N$ 个选手正在排队**，男女生数量可能不同。如果队头的是妹子，只要某个厕所是空的就可以进入，但是如果两个厕所都是空的，那么优先进入女性专用厕所。而如果队头是个绅♂士，只有在男女混用厕所是空的时候才能使用；如果只有女性专用厕所是空的，那么队伍中最靠前的妹子就可以不用继续等直接如厕。我们假设所有人如厕都需要花 $1$ 分钟，不考虑切换的时间。\n\n\n然而，**$N$ 分钟后，就要开饭了，所有人必须如厕完**，不过看样子似乎来不及。主办方可以重新调换顺序，不过有些人会因为新的顺序中自己更加后面了而感到不满，不满度是自己相比于原队列后退了几个顺序（除此之外跟自己的实际如厕顺序无关）。\n\n\n主办方发现了这一点，所以希望你帮助他们解决这个问题，设计出一种方案，对于其中不满意度最大的学生，尽可能让他的不满意度最小。你只需要告诉他们最不满意的学生的不满意度是多少。", "inputFormat": "由于人相当多，我们用几段字符串来描述这个队列。\n\n第一行一个整数 $N$ ；\n\n第二行一个整数 $M$ ；\n\n接下来 $M$ 行，由一个字符串 $S_i$ 和一个整数 $K_i$ 构成，中间有空格隔开，字符串中只有```M```（男）和```F```（女）。最后的字符串就是 $S_1$ 拼接 $K_1$次 + $S_2$ 拼接 $K_2$ 次+ ... + $S_M$ 拼接 $K_M$ 次。", "outputFormat": "输出一个整数，表示答案。如果无论怎么样都没办法在 $N$ 分钟之内达成，请输出 ```-1``` 。", "hint": "原队列是 ```FFFMMMMMFF``` ，\n\n改进后的队列是 ```FMMFFMMMFF``` ，\n\n所以厕所会按照下面的时间使用：\n\n```cpp\n分钟 1   2   3   4   5\n共用 2   3   6   7   8\n女用 1   4   5   9   10\n```\n两个妹子往后面移动了 $2$ 位，所以不满意度是 $2$ 。\n\n对于 $20 \\%$ 的数据，$N \\le 10,M=1,K_1=1$ ；\n\n对于 $40 \\%$ 的数据， $N\\le100000,M=1,K_1=1$；\n\n对于 $100 \\%$ 的数据， $1\\le N,K_i\\le10^{18},1\\le M\\le100000, \\sum |S_i| \\le 200000$。", "locale": "zh-CN"}}}
{"pid": "P3616", "type": "P", "difficulty": 5, "samples": [["5 4\n8 6 3 5 4\n1 5\n2 4 1\n1 5\n1 3", "2\n1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "树状数组", "离散化", "洛谷月赛"], "title": "富金森林公园", "background": "", "description": "博艾的富金森林公园里有一个长长的富金山脉，山脉是由一块块巨石并列构成的，编号从 $1$ 到 $N$ 。每一个巨石有一个海拔高度。而这个山脉又在一个盆地中，盆地里可能会积水，积水也有一个海拔高度，所有**严格低于**这个海拔高度的巨石，就会在水面下隐藏。\n\n\n由于地壳运动，巨石的海拔高度可能会随时变化，每次一块的巨石会变成新的海拔高度。当然，水面的高度也会随时发生变化。\n\n\n因为有这样奇妙的地质奇观，吸引了很多游客来游玩。uim 作为一个游客，可以告诉你此时水位海拔，你得告诉他，能看到有几个连续露出水面的部分。（与水面持平我们也认为是露出）", "inputFormat": "第一行两个整数 $N$ 和 $M$,分别表示 $N$ 块石头，$M$ 个询问。\n\n接下来一行，$N$ 个整数 $A_i$ 表示每个巨石的初始海拔。\n\n接下来 $M$ 行，每行有两个或者三个数，每一行如果第一个数是 `1`，那么后面跟一个 $B_j$，表示水面海拔。如果第一个数是 `2`，后面跟两个整数，$C_j$ 和 $D_j$，表示编号 $C_j$ 的巨石海拔变为 $D_j$。", "outputFormat": "对于每个 `1` 询问，给出一个整数答案，也就是露出了几部分的山峰。", "hint": "$10\\%$ 的数据，$N,M<=2000$。\n\n另外 $30\\%$ 的数据， 只有 `1` 的询问。\n\n$100\\%$ 的数据，$1<=N,M<=200000,1<=A_i,B_j,D_j<=10^9$，一定有 `1` 询问。\n", "locale": "zh-CN", "translations": {"en": {"title": "Fujin Forest Park", "background": "", "description": "In Boai’s Fujin Forest Park, there is a long Fujin mountain range made up of giant rocks lined up and numbered from $1$ to $N$. Each rock has an elevation. The mountain range lies in a basin that can hold water, and the water has its own elevation. All rocks strictly lower than this water elevation will be submerged and hidden beneath the surface.\n\nDue to crustal movements, rock elevations may change at any time, with a single rock taking on a new elevation. Of course, the water level may also change at any time.\n\nBecause of this geological wonder, many tourists visit. As a visitor, uim can tell you the current water level elevation, and you must tell him how many contiguous visible parts there are on the mountain range. (Rocks exactly at the water level are also considered visible.)", "inputFormat": "The first line contains two integers $N$ and $M$, representing $N$ rocks and $M$ queries.\n\nThe next line contains $N$ integers $A_i$ representing the initial elevation of each rock.\n\nThen follow $M$ lines. Each line has two or three numbers:\n- If the first number is `1`, it is followed by a single $B_j$, representing the water level elevation.\n- If the first number is `2`, it is followed by two integers $C_j$ and $D_j$, meaning the elevation of rock numbered $C_j$ becomes $D_j$.", "outputFormat": "For each `1` query, output a single integer: the number of contiguous visible segments.", "hint": "- For $10\\%$ of the testdata, $N, M \\le 2000$.\n- Additionally, for $30\\%$ of the testdata, there are only `1` queries.\n- For $100\\%$ of the testdata, $1 \\le N, M \\le 200000$, $1 \\le A_i, B_j, D_j \\le 10^9$, and there is at least one `1` query.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "富金森林公园", "background": "", "description": "博艾的富金森林公园里有一个长长的富金山脉，山脉是由一块块巨石并列构成的，编号从 $1$ 到 $N$ 。每一个巨石有一个海拔高度。而这个山脉又在一个盆地中，盆地里可能会积水，积水也有一个海拔高度，所有**严格低于**这个海拔高度的巨石，就会在水面下隐藏。\n\n\n由于地壳运动，巨石的海拔高度可能会随时变化，每次一块的巨石会变成新的海拔高度。当然，水面的高度也会随时发生变化。\n\n\n因为有这样奇妙的地质奇观，吸引了很多游客来游玩。uim 作为一个游客，可以告诉你此时水位海拔，你得告诉他，能看到有几个连续露出水面的部分。（与水面持平我们也认为是露出）", "inputFormat": "第一行两个整数 $N$ 和 $M$,分别表示 $N$ 块石头，$M$ 个询问。\n\n接下来一行，$N$ 个整数 $A_i$ 表示每个巨石的初始海拔。\n\n接下来 $M$ 行，每行有两个或者三个数，每一行如果第一个数是 `1`，那么后面跟一个 $B_j$，表示水面海拔。如果第一个数是 `2`，后面跟两个整数，$C_j$ 和 $D_j$，表示编号 $C_j$ 的巨石海拔变为 $D_j$。", "outputFormat": "对于每个 `1` 询问，给出一个整数答案，也就是露出了几部分的山峰。", "hint": "$10\\%$ 的数据，$N,M<=2000$。\n\n另外 $30\\%$ 的数据， 只有 `1` 的询问。\n\n$100\\%$ 的数据，$1<=N,M<=200000,1<=A_i,B_j,D_j<=10^9$，一定有 `1` 询问。\n", "locale": "zh-CN"}}}
{"pid": "P3617", "type": "P", "difficulty": 5, "samples": [["7 7\n1 2 0\n1 3 0\n2 4 1\n3 5 1\n4 6 0\n5 6 0\n6 7 1\n", "1.500"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心", "递归", "洛谷原创", "分治"], "title": "电阻网络", "background": "什么是电阻？这个大家应该都知道。什么是电路？大家也应该知道。但是本题当中，电路的定义或许有点不同：\n\n电路都带有正、负极接点，正极在左，负极在右。具体地：电路分为以下几类：\n\n单独的一个 $1\\Omega$ 电阻（及其两端的接点）是电路（虽然导线也可以被视为 $0\\Omega$ 的电阻，但是单独的导线不是电路）\n\n如果 $A$ 和 $B$ 都是电路，设 $1,2,3$ 是从左到右的三个接点，那么将 $A$ 的正负极分别接在 $1$ 与 $2$ 上，将 $B$ 的正负极分别接在 $2$ 与 $3$ 上，那么 $1$ 到 $3$ 的部分是电路，其中 $1$ 为正极，$3$ 为负极。\n\n如果A和B都是电路,设 $1,2,3,2',3',1'$ 是六个接点，其中 $1$ 在 $2$ 和 $3$ 的左侧，$2$ 在 $2'$ 的左侧，$3$ 在 $3'$ 的左侧，$2'$和 $3'$ 在 $1'$的左侧，并且 $1$ 与 $2$，$1'$ 与 $3'$，$2'$与 $1$，$3'$与$1'$间均连有导线, 那么将 $A$ 的正负极分别接在 $2$ 与 $2'$ 上，将 $B$ 的正负极分别接在 $3$ 与 $3'$ 上，那么 $1$ 到 $1'$ 的部分是电路，其中 $1$ 为正极，$1'$ 为负极。\n\n现在给出一个电路，求它正负极之间的电阻。", "description": "Cjwssb 最近在物理学科上遇到了难题，他不会计算一个电路中的总电阻，现在他找到了你，希望你能帮助他。\n\n这个电路有如下限：\n1. 电路只由导线以及电阻为一欧的电阻组成。\n\n2.    保证电路从左到右连接，即每个电阻或导线的两个连接点 $x,y$，保证 $x<y$。\n\n3.    保证接线柱 $1$ 为电源正极，接线柱 $n$ 为电源负极。\n\n3.    保证每个接线柱只会被串联或者并联两个分支电路或者不接任何电线或电阻。", "inputFormat": "第一行为两个正整数 $n,m$，分别代表接点数和电阻数。保证编号小的接点在编号大的接点的左侧。\n\n接下来 $m$ 行，每行三个整数 $a_i,b_i,c_i$，代表这个电阻连接了 $a_i$ 与 $b_i$ 接点，其阻值为 $c_i$ ，其中 $c_i$ 只可能是 $0$ 或 $1$，且对于任意的 $i$，保证$a_i<b_i$。", "outputFormat": "输出一个实数，表示总的电阻值，保留三位小数输出。", "hint": "【样例解释】\n\n画出图来，答案是显然的。\n\n【数据规模与约定】\n\n|得分占比|$n$|$m$|\n|:-:|:-:|:-:|\n|$20\\%$|$n\\le5$|$m\\le5$|\n|$50\\%$|$n\\le100$|$m\\le120$|\n|$70\\%$|$n\\le1000$|$m\\le1200$|\n|$100\\%$|$n\\le10^5$|$m\\le1.2\\times10^6$|\n\np.s.数据是在人工指定的 $n$ 下随机生成的，保证答案不会超过 $10\\ 000$。\n\nBy：saffah。", "locale": "zh-CN", "translations": {"en": {"title": "Resistor Network", "background": "What is a resistor? Everyone should know. What is a circuit? You probably know as well. However, in this problem, the definition of a circuit is a bit different:\n\nEvery circuit has a positive terminal on the left and a negative terminal on the right. Specifically, circuits are defined as follows:\n\n- A single $1\\Omega$ resistor (together with its two endpoints) is a circuit. (Although a wire can be regarded as a $0\\Omega$ resistor, a wire alone is not a circuit.)\n- If $A$ and $B$ are both circuits, let $1,2,3$ be three nodes from left to right. Connect the positive and negative terminals of $A$ to $1$ and $2$, respectively, and those of $B$ to $2$ and $3$, respectively. Then the part from $1$ to $3$ is a circuit, with $1$ as the positive terminal and $3$ as the negative terminal.\n- If $A$ and $B$ are both circuits, let $1,2,3,2',3',1'$ be six nodes, where $1$ is to the left of $2$ and $3$, $2$ is to the left of $2'$, $3$ is to the left of $3'$, and $2'$ and $3'$ are to the left of $1'$. There are wires between $1$ and $2$, between $1$ and $3$, between $2'$ and $1'$, and between $3'$ and $1'$. Connect the positive and negative terminals of $A$ to $2$ and $2'$, respectively, and those of $B$ to $3$ and $3'$, respectively. Then the part from $1$ to $1'$ is a circuit, with $1$ as the positive terminal and $1'$ as the negative terminal.\n\nNow you are given a circuit. Find the resistance between its positive and negative terminals.", "description": "Cjwssb recently encountered a tough problem in physics. He does not know how to compute the equivalent resistance of a circuit. He turned to you for help.\n\nThis circuit satisfies the following constraints:\n1. The circuit consists only of wires and resistors of $1\\Omega$.\n2. The circuit is connected from left to right, that is, for every resistor or wire with endpoints $x,y$, it holds that $x<y$.\n3. Node $1$ is the positive terminal of the power supply, and node $n$ is the negative terminal.\n4. Each node is either unused, or serves as the junction of exactly two branch subcircuits that are connected either in series or in parallel.", "inputFormat": "The first line contains two positive integers $n,m$, the numbers of nodes and resistors. Nodes are numbered from left to right, so a smaller index is to the left of a larger index.\n\nEach of the next $m$ lines contains three integers $a_i,b_i,c_i$, meaning there is a resistor between nodes $a_i$ and $b_i$ with resistance $c_i$, where $c_i$ is either $0$ or $1$, and for every $i$ it is guaranteed that $a_i<b_i$.", "outputFormat": "Output a real number, the total resistance, rounded to three decimal places.", "hint": "[Sample Explanation]\n\nDraw the diagram and the answer is obvious.\n\n[Constraints]\n\n| Score | $n$ | $m$ |\n|:-:|:-:|:-:|\n| $20\\%$ | $n\\le 5$ | $m\\le 5$ |\n| $50\\%$ | $n\\le 100$ | $m\\le 120$ |\n| $70\\%$ | $n\\le 1000$ | $m\\le 1200$ |\n| $100\\%$ | $n\\le 10^5$ | $m\\le 1.2\\times 10^6$ |\n\nP.S. The testdata are randomly generated under a fixed $n$, and the answer is guaranteed not to exceed 10 000.\n\nBy: saffah.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "电阻网络", "background": "什么是电阻？这个大家应该都知道。什么是电路？大家也应该知道。但是本题当中，电路的定义或许有点不同：\n\n电路都带有正、负极接点，正极在左，负极在右。具体地：电路分为以下几类：\n\n单独的一个 $1\\Omega$ 电阻（及其两端的接点）是电路（虽然导线也可以被视为 $0\\Omega$ 的电阻，但是单独的导线不是电路）\n\n如果 $A$ 和 $B$ 都是电路，设 $1,2,3$ 是从左到右的三个接点，那么将 $A$ 的正负极分别接在 $1$ 与 $2$ 上，将 $B$ 的正负极分别接在 $2$ 与 $3$ 上，那么 $1$ 到 $3$ 的部分是电路，其中 $1$ 为正极，$3$ 为负极。\n\n如果A和B都是电路,设 $1,2,3,2',3',1'$ 是六个接点，其中 $1$ 在 $2$ 和 $3$ 的左侧，$2$ 在 $2'$ 的左侧，$3$ 在 $3'$ 的左侧，$2'$和 $3'$ 在 $1'$的左侧，并且 $1$ 与 $2$，$1'$ 与 $3'$，$2'$与 $1$，$3'$与$1'$间均连有导线, 那么将 $A$ 的正负极分别接在 $2$ 与 $2'$ 上，将 $B$ 的正负极分别接在 $3$ 与 $3'$ 上，那么 $1$ 到 $1'$ 的部分是电路，其中 $1$ 为正极，$1'$ 为负极。\n\n现在给出一个电路，求它正负极之间的电阻。", "description": "Cjwssb 最近在物理学科上遇到了难题，他不会计算一个电路中的总电阻，现在他找到了你，希望你能帮助他。\n\n这个电路有如下限：\n1. 电路只由导线以及电阻为一欧的电阻组成。\n\n2.    保证电路从左到右连接，即每个电阻或导线的两个连接点 $x,y$，保证 $x<y$。\n\n3.    保证接线柱 $1$ 为电源正极，接线柱 $n$ 为电源负极。\n\n3.    保证每个接线柱只会被串联或者并联两个分支电路或者不接任何电线或电阻。", "inputFormat": "第一行为两个正整数 $n,m$，分别代表接点数和电阻数。保证编号小的接点在编号大的接点的左侧。\n\n接下来 $m$ 行，每行三个整数 $a_i,b_i,c_i$，代表这个电阻连接了 $a_i$ 与 $b_i$ 接点，其阻值为 $c_i$ ，其中 $c_i$ 只可能是 $0$ 或 $1$，且对于任意的 $i$，保证$a_i<b_i$。", "outputFormat": "输出一个实数，表示总的电阻值，保留三位小数输出。", "hint": "【样例解释】\n\n画出图来，答案是显然的。\n\n【数据规模与约定】\n\n|得分占比|$n$|$m$|\n|:-:|:-:|:-:|\n|$20\\%$|$n\\le5$|$m\\le5$|\n|$50\\%$|$n\\le100$|$m\\le120$|\n|$70\\%$|$n\\le1000$|$m\\le1200$|\n|$100\\%$|$n\\le10^5$|$m\\le1.2\\times10^6$|\n\np.s.数据是在人工指定的 $n$ 下随机生成的，保证答案不会超过 $10\\ 000$。\n\nBy：saffah。", "locale": "zh-CN"}}}
{"pid": "P3618", "type": "P", "difficulty": 4, "samples": [["4\nhehehe\nhehe\nwoquxizaolehehe\nwoquxizaole\nhehehehe\nhehe\nowoadiuhzgneninougur\niehiehieh\n", "Case #1: 3\nCase #2: 2\nCase #3: 5\nCase #4: 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "洛谷原创", "哈希 hashing", "KMP 算法"], "title": "误会", "background": null, "description": "Cjwssb 得到了你的帮助，显得很开心，跟你道谢，你回谢了他。但随后他由于少听了一些词，对你的回谢造成了误会，这使你们两个产生了隔阂，你很不甘心，于是打算告诉他这句话有几种理解方式，以告诉他他误解你了。一句话的理解方式如下：\n\n对于一句原句和听到的句子，理解方式是将听到的句子替换掉原句的相同部分，替换成 `*`，使得原句形成一个新的句子，以达到新的意思，你的任务是统计有多少种意思。", "inputFormat": "第一行一个整数 $T$，表示 $T$ 组测试点。\n\n每组测试点两个字符串，一个字符串一行，第一行字符串是原句，第二行是听到的句子。", "outputFormat": "对于每一个测试点，输出一行 `Case #x: y`，$x$ 表示测试点，$y$ 表示答案，由于答案可能很大，你只需要输出答案取模 $10^9+7$。", "hint": "在第一个测试点，`hehehe` 有三个理解意思，分别是 `*he`，`he*`，`hehehe`。\n\n在第三个测试点，`hehehehe` 有五个理解意思，分别是 `*hehe`，`he*he`，`hehe*`，`**`，`hehehehe`。\n\n对于 $100\\%$ 的数据\n\n$T\\le 30$\n\n$|A|\\le 10^5$\n\n$|B|\\le |A|$\n\nBy：2016 Mul", "locale": "zh-CN", "translations": {"en": {"title": "Misunderstanding", "background": "", "description": "Cjwssb was very happy after receiving your help and thanked you, and you thanked him back. However, because he missed some words, he misunderstood your reply. This created a rift between you. Unwilling to accept this, you decide to tell him how many different ways that sentence can be understood, to show that he misunderstood you.\n\nGiven an original sentence and the heard sentence, an interpretation is formed by choosing any set of pairwise non-overlapping occurrences of the heard sentence inside the original sentence and replacing each chosen occurrence with a single `*`, thereby turning the original sentence into a new sentence to convey a new meaning. Your task is to count how many different meanings there are.", "inputFormat": "The first line contains an integer $T$, the number of test cases.\n\nFor each test case, there are two strings, one per line. The first line is the original sentence, and the second line is the heard sentence.", "outputFormat": "For each test case, output one line in the form `Case #x: y`, where $x$ is the test case number and $y$ is the answer. Since the answer may be large, output it modulo $10^9+7$.", "hint": "In the first test case, `hehehe` has three interpretations: `*he`, `he*`, `hehehe`.\n\nIn the third test case, `hehehehe` has five interpretations: `*hehe`, `he*he`, `hehe*`, `**`, `hehehehe`.\n\nConstraints for $100\\%$ of the testdata:\n\n$T \\le 30$.\n\n$|A| \\le 10^5$.\n\n$|B| \\le |A|$.\n\nBy: 2016 Mul.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "误会", "background": null, "description": "Cjwssb 得到了你的帮助，显得很开心，跟你道谢，你回谢了他。但随后他由于少听了一些词，对你的回谢造成了误会，这使你们两个产生了隔阂，你很不甘心，于是打算告诉他这句话有几种理解方式，以告诉他他误解你了。一句话的理解方式如下：\n\n对于一句原句和听到的句子，理解方式是将听到的句子替换掉原句的相同部分，替换成 `*`，使得原句形成一个新的句子，以达到新的意思，你的任务是统计有多少种意思。", "inputFormat": "第一行一个整数 $T$，表示 $T$ 组测试点。\n\n每组测试点两个字符串，一个字符串一行，第一行字符串是原句，第二行是听到的句子。", "outputFormat": "对于每一个测试点，输出一行 `Case #x: y`，$x$ 表示测试点，$y$ 表示答案，由于答案可能很大，你只需要输出答案取模 $10^9+7$。", "hint": "在第一个测试点，`hehehe` 有三个理解意思，分别是 `*he`，`he*`，`hehehe`。\n\n在第三个测试点，`hehehehe` 有五个理解意思，分别是 `*hehe`，`he*he`，`hehe*`，`**`，`hehehehe`。\n\n对于 $100\\%$ 的数据\n\n$T\\le 30$\n\n$|A|\\le 10^5$\n\n$|B|\\le |A|$\n\nBy：2016 Mul", "locale": "zh-CN"}}}
{"pid": "P3619", "type": "P", "difficulty": 4, "samples": [["1\n2 13\n1 -9\n5 -3\n", "+1s\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "洛谷原创", "排序"], "title": "魔法", "background": "", "description": "cjwssb 知道是误会之后，跟你道了歉。你为了逗笑他，准备和他一起开始魔法。不过你的时间不多了，但是更惨的是你还需要完成 $n$ 个魔法任务。假设你当前的时间为 $T$，每个任务需要有一定的限制 $t_i$ 表示只有当你的 $T$ 严格大于 $t_i$ 时你才能完成这个任务，完成任务并不需要消耗时间。当你完成第 $i$ 个任务时，你的时间 $T$ 会加上 $b_i$，此时要保证 $T$ 在任何时刻都大于 $0$，那么请问你是否能完成这 $n$ 个魔法任务，如果可以，输出 $\\texttt{+1}\\texttt{s}$，如果不行，输出 $\\texttt{-1}\\texttt{s}$。\n", "inputFormat": "第一行：一个整数 $Z$，表示有 $Z$ 个测试点。\n\n对于每个测试点：\n\n第一行：两个整数 $n,T$，表示有 $n$ 个任务,你一开始有 $T$ 的时间。\n\n接下来 $n$ 行，每行 $2$ 个数字，$t_i$ 与 $b_i$。\n", "outputFormat": "对于每个测试点，输出 $\\texttt{+1}\\texttt{s}$ 或者 $\\texttt{-1}\\texttt{s}$。\n", "hint": "对于 $20\\%$ 的数据，$n\\leq10$；\n\n对于 $100\\%$ 的数据，$n\\leq10^5,Z\\leq10,t_i\\leq10^5,T\\leq10^5,-10^5\\leq b_i\\leq 10^5$。\n\nBy lantian\n\n$\\LaTeX$ By ⚡炭治郎⚡\n\n## 因为历史遗留问题，博客讨论可能无法发出样例输出的字符串，可以考虑使用其他方式规避。\n", "locale": "zh-CN", "translations": {"en": {"title": "Magic", "background": "", "description": "After cjwssb realized it was a misunderstanding, he apologized to you. To cheer him up, you plan to start doing magic together. However, your time is running out, and worse, you still need to complete $n$ magic tasks. Suppose your current time is $T$. Each task has a constraint $t_i$, meaning you can complete this task only when your $T$ is strictly greater than $t_i$. Completing a task does not consume time. When you complete the $i$-th task, your time $T$ increases by $b_i$. At all times, $T$ must remain greater than $0$. Determine whether you can complete all $n$ magic tasks. If yes, output $\\texttt{+1}\\texttt{s}$; otherwise, output $\\texttt{-1}\\texttt{s}$.", "inputFormat": "The first line contains an integer $Z$, the number of test cases.\n\nFor each test case:\n\n- The first line contains two integers $n, T$, meaning there are $n$ tasks and your initial time is $T$.\n- The next $n$ lines each contain two integers, $t_i$ and $b_i$.", "outputFormat": "For each test case, output $\\texttt{+1}\\texttt{s}$ or $\\texttt{-1}\\texttt{s}$.", "hint": "- For $20\\%$ of the testdata, $n \\leq 10$.\n- For $100\\%$ of the testdata, $n \\leq 10^5$, $Z \\leq 10$, $t_i \\leq 10^5$, $T \\leq 10^5$, $-10^5 \\leq b_i \\leq 10^5$.\n\nBy lantian.\n\n$\\LaTeX$ By ⚡炭治郎⚡.\n\nDue to historical reasons, the blog discussion may not be able to post the sample output strings. You may consider other ways to work around this.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "魔法", "background": "", "description": "cjwssb 知道是误会之后，跟你道了歉。你为了逗笑他，准备和他一起开始魔法。不过你的时间不多了，但是更惨的是你还需要完成 $n$ 个魔法任务。假设你当前的时间为 $T$，每个任务需要有一定的限制 $t_i$ 表示只有当你的 $T$ 严格大于 $t_i$ 时你才能完成这个任务，完成任务并不需要消耗时间。当你完成第 $i$ 个任务时，你的时间 $T$ 会加上 $b_i$，此时要保证 $T$ 在任何时刻都大于 $0$，那么请问你是否能完成这 $n$ 个魔法任务，如果可以，输出 $\\texttt{+1}\\texttt{s}$，如果不行，输出 $\\texttt{-1}\\texttt{s}$。\n", "inputFormat": "第一行：一个整数 $Z$，表示有 $Z$ 个测试点。\n\n对于每个测试点：\n\n第一行：两个整数 $n,T$，表示有 $n$ 个任务,你一开始有 $T$ 的时间。\n\n接下来 $n$ 行，每行 $2$ 个数字，$t_i$ 与 $b_i$。\n", "outputFormat": "对于每个测试点，输出 $\\texttt{+1}\\texttt{s}$ 或者 $\\texttt{-1}\\texttt{s}$。\n", "hint": "对于 $20\\%$ 的数据，$n\\leq10$；\n\n对于 $100\\%$ 的数据，$n\\leq10^5,Z\\leq10,t_i\\leq10^5,T\\leq10^5,-10^5\\leq b_i\\leq 10^5$。\n\nBy lantian\n\n$\\LaTeX$ By ⚡炭治郎⚡\n\n## 因为历史遗留问题，博客讨论可能无法发出样例输出的字符串，可以考虑使用其他方式规避。\n", "locale": "zh-CN"}}}
{"pid": "P3620", "type": "P", "difficulty": 5, "samples": [["5 2 \n1 \n3 \n4 \n6 \n12 ", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2007", "APIO", "优先队列", "差分", "CTSC/CTS", "反悔贪心"], "title": "[APIO/CTSC2007] 数据备份", "background": "", "description": "你在一家 IT 公司为大型写字楼或办公楼的计算机数据做备份。然而数据备份的工作是枯燥乏味的，因此你想设计一个系统让不同的办公楼彼此之间互相备份，而你则坐在家中尽享计算机游戏的乐趣。\n\n已知办公楼都位于同一条街上。你决定给这些办公楼配对（两个一组）。每一对办公楼可以通过在这两个建筑物之间铺设网络电缆使得它们可以互相备份。\n\n然而，网络电缆的费用很高。当地电信公司仅能为你提供 $K$ 条网络电缆，这意味着你仅能为 $K$ 对办公楼（或总计 $2K$ 个办公楼）安排备份。任一个办公楼都属于唯一的配对组（换句话说，这 $2K$ 个办公楼一定是相异的）。\n\n此外，电信公司需按网络电缆的长度（公里数）收费。因而，你需要选择这 $K$ 对办公楼使得电缆的总长度尽可能短。换句话说，你需要选择这 $K$ 对办公楼，使得每一对办公楼之间的距离之和（总距离）尽可能小。\n\n下面给出一个示例，假定你有 $5$ 个客户，其办公楼都在一条街上，如下图所示。这 $5$ 个办公楼分别位于距离大街起点 $1\\rm km$, $3\\rm km$, $4\\rm km$, $6\\rm km$ 和 $12\\rm km$ 处。电信公司仅为你提供 $K=2$ 条电缆。\n\n  ![](https://cdn.luogu.com.cn/upload/pic/4386.png) \n\n上例中最好的配对方案是将第 $1$ 个和第 $2$ 个办公楼相连，第 $3$ 个和第 $4$ 个办公楼相连。这样可按要求使用 $K=2$ 条电缆。第 $1$ 条电缆的长度是 $\\rm 3km-1km = 2km$，第 2 条电缆的长度是 $\\rm 6km―4km = 2 km$。这种配对方案需要总长 $4\\rm km$ 的网络电缆，满足距离之和最小的要求。", "inputFormat": "输入文件的第一行包含整数 $N$ 和 $K$，其中 $N$（$1\\leq N \\leq 10^5$）表示办公楼的数目，$K$（$\\displaystyle 1\\leq K \\leq \\frac{N}{2}$）表示可利用的网络电缆的数目。\n\n接下来的 $N$ 行每行仅包含一个整数 $s$（$0\\leq s \\leq 10^9$）, 表示每个办公楼到大街起点处的距离。这些整数将按照从小到大的顺序依次出现。", "outputFormat": "输出文件应当由一个正整数组成，给出将 $2K$ 个相异的办公楼连成 $K$ 对所需的网络电缆的最小总长度。", "hint": "$30\\%$ 的输入数据满足 $N\\leq 20$。\n\n$60\\%$ 的输入数据满足 $N\\leq 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[APIO/CTSC2007] Data Backup", "background": "", "description": "You work at an IT company backing up computer data for large office buildings. However, data backup is boring, so you want to design a system that lets different office buildings back up each other’s data while you sit at home enjoying computer games.\n\nAll the office buildings are located on the same street. You decide to pair the buildings (two per group). Each pair can back up each other by laying a network cable between the two buildings.\n\nHowever, network cables are expensive. The local telecom company can provide only $K$ cables, which means you can arrange backups for only $K$ pairs of buildings (or a total of $2K$ buildings). Each building belongs to exactly one pair (in other words, those $2K$ buildings are all distinct).\n\nAdditionally, the telecom company charges by the length of the cable in kilometers. Hence, you need to choose the $K$ pairs of buildings so that the total cable length is as short as possible. In other words, you need to choose the $K$ pairs so that the sum of the distances between each pair (the total distance) is minimized.\n\nHere is an example. Suppose you have $5$ clients whose buildings lie on a single street, as shown below. The $5$ buildings are located at distances $1\\rm km$, $3\\rm km$, $4\\rm km$, $6\\rm km$, and $12\\rm km$ from the start of the street. The telecom company provides only $K=2$ cables.\n\n  ![](https://cdn.luogu.com.cn/upload/pic/4386.png) \n\nIn this example, the best pairing is to connect the $1$st and $2$nd buildings, and the $3$rd and $4$th buildings. This uses exactly $K=2$ cables as required. The length of the first cable is $\\rm 3km-1km = 2km$, and the length of the second cable is $\\rm 6km―4km = 2 km$. This pairing requires a total of $4\\rm km$ of cable, achieving the minimum possible sum of distances.", "inputFormat": "The first line of input contains integers $N$ and $K$, where $N$ ($1 \\leq N \\leq 10^5$) is the number of office buildings, and $K$ ($\\displaystyle 1\\leq K \\leq \\frac{N}{2}$) is the number of cables available.\n\nEach of the next $N$ lines contains a single integer $s$ ($0 \\leq s \\leq 10^9$), the distance of each building from the start of the street. These integers are given in increasing order.", "outputFormat": "Output a single positive integer: the minimum total cable length required to connect $2K$ distinct buildings into $K$ pairs.", "hint": "$30\\%$ of the testdata satisfy $N \\leq 20$.\n\n$60\\%$ of the testdata satisfy $N \\leq 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO/CTSC2007] 数据备份", "background": "", "description": "你在一家 IT 公司为大型写字楼或办公楼的计算机数据做备份。然而数据备份的工作是枯燥乏味的，因此你想设计一个系统让不同的办公楼彼此之间互相备份，而你则坐在家中尽享计算机游戏的乐趣。\n\n已知办公楼都位于同一条街上。你决定给这些办公楼配对（两个一组）。每一对办公楼可以通过在这两个建筑物之间铺设网络电缆使得它们可以互相备份。\n\n然而，网络电缆的费用很高。当地电信公司仅能为你提供 $K$ 条网络电缆，这意味着你仅能为 $K$ 对办公楼（或总计 $2K$ 个办公楼）安排备份。任一个办公楼都属于唯一的配对组（换句话说，这 $2K$ 个办公楼一定是相异的）。\n\n此外，电信公司需按网络电缆的长度（公里数）收费。因而，你需要选择这 $K$ 对办公楼使得电缆的总长度尽可能短。换句话说，你需要选择这 $K$ 对办公楼，使得每一对办公楼之间的距离之和（总距离）尽可能小。\n\n下面给出一个示例，假定你有 $5$ 个客户，其办公楼都在一条街上，如下图所示。这 $5$ 个办公楼分别位于距离大街起点 $1\\rm km$, $3\\rm km$, $4\\rm km$, $6\\rm km$ 和 $12\\rm km$ 处。电信公司仅为你提供 $K=2$ 条电缆。\n\n  ![](https://cdn.luogu.com.cn/upload/pic/4386.png) \n\n上例中最好的配对方案是将第 $1$ 个和第 $2$ 个办公楼相连，第 $3$ 个和第 $4$ 个办公楼相连。这样可按要求使用 $K=2$ 条电缆。第 $1$ 条电缆的长度是 $\\rm 3km-1km = 2km$，第 2 条电缆的长度是 $\\rm 6km―4km = 2 km$。这种配对方案需要总长 $4\\rm km$ 的网络电缆，满足距离之和最小的要求。", "inputFormat": "输入文件的第一行包含整数 $N$ 和 $K$，其中 $N$（$1\\leq N \\leq 10^5$）表示办公楼的数目，$K$（$\\displaystyle 1\\leq K \\leq \\frac{N}{2}$）表示可利用的网络电缆的数目。\n\n接下来的 $N$ 行每行仅包含一个整数 $s$（$0\\leq s \\leq 10^9$）, 表示每个办公楼到大街起点处的距离。这些整数将按照从小到大的顺序依次出现。", "outputFormat": "输出文件应当由一个正整数组成，给出将 $2K$ 个相异的办公楼连成 $K$ 对所需的网络电缆的最小总长度。", "hint": "$30\\%$ 的输入数据满足 $N\\leq 20$。\n\n$60\\%$ 的输入数据满足 $N\\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P3621", "type": "P", "difficulty": 4, "samples": [["6 \n2 3 \n-1 4 \n5 6 \n-1 -1 \n-1 -1 \n-1 -1 \n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "贪心", "2007", "APIO"], "title": "[APIO2007] 风铃", "background": null, "description": "你准备给弟弟 Ike 买一件礼物，但是，Ike 挑选礼物的方式很特别：他只喜欢那些能被他排成有序形状的东西。\n\n你准备给 Ike 买一个风铃。风铃是一种多层的装饰品，一般挂在天花板上。\n\n每个风铃都包含一些由竖直线连起来的水平杆。每根杆的两头都有线连接，下面或者挂着另一根水平杆，或者挂着一个玩具。下面是一个风铃的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e1m223hc.png)\n\n为了满足弟弟，你需要选一个满足下面两个条件的风铃：\n\n1. 所有的玩具都在同一层(也就是说，每个玩具到天花板之间的杆的个数是一样的)或至多相差一层。\n2. 对于两个相差一层的玩具，左边的玩具比右边的玩具要更靠下一点。\n\n风铃可以按照下面的规则重新排列：任选一根杆，将杆两头的线“交换”。也就是解开一根杆左右两头的线，然后将它们绑到杆的另一头。这个操作不会改变更下面的杆上线的排列顺序。\n\n正在训练信息学奥林匹克的你，决定设计一个算法，判断能否通过重新排列，将一个给定的风铃变为 Ike 喜欢的样子。\n\n考虑上面的例子，上图中的风铃满足条件 $1$，却不满足条件 $2$ ——最左边的那个玩具比它右边的要高。\n\n但是，我们可以通过下面的步骤把这个风铃变成一个 Ike 喜欢的：\n\n 1.   第一步，将杆 $1$ 的左右两边交换，这使得杆 $2$ 和杆 $3$ 的位置互换，交换的结果如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/pic/4388.png)\n\n 2.   第二步，也是最后一步，将杆 $2$ 的左右两边交换，这使得杆 $4$ 到了左边，原来在左边的玩具到了右边，交换的结果发下图所示：\n\n![](https://cdn.luogu.com.cn/upload/pic/4389.png)\n\n现在的这个风铃就满足 Ike 的条件了。\n\n你的任务是：给定一个风铃的描述，求出最少需要多少次交换才能使这风铃满足 Ike 的条件(如果可能)。", "inputFormat": "输入的第一行包含一个整数 $n$，表示风铃中有多少根杆。\n\n接下来的 $n$ 行描述杆的连接信息。这部分的第 $i$ 行包含两个由空格分隔的整数 $l_i$ 和 $r_i$，描述杆 $i$ 的左右两边悬挂的东西。如果挂的是一个玩具，则对应的值为``-1``，否则为挂在下面的杆的编号。", "outputFormat": "输出仅包含一个整数。表示最少需要多少次交换能使风铃满足 Ike 的条件。如果不可能满足，输出``-1``。", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，满足 $1 \\le n \\le 10^5$，$-1 \\leq l_i, r_i \\leq n$，$l_i, r_i \\neq 0$。", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2007] Wind Chime", "background": "", "description": "You want to buy a gift for your younger brother Ike, but Ike has a special way of choosing gifts: he only likes things that he can arrange into an ordered shape.\n\nYou plan to buy Ike a wind chime. A wind chime is a multi-layered ornament that is usually hung from the ceiling.\n\nEach wind chime consists of several horizontal bars connected by vertical strings. Each end of a bar has a string attached; below it hangs either another horizontal bar or a toy. Here is an example of a wind chime:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e1m223hc.png)\n\nTo satisfy Ike, you need to choose a wind chime that meets the following two conditions:\n\n1. All toys are on the same level (that is, the number of bars between each toy and the ceiling is the same), or they differ by at most one level.\n2. For any two toys that differ by one level, the left toy must hang lower than the right toy.\n\nA wind chime can be rearranged using the following rule: choose any bar and “swap” the strings at its two ends. That is, detach the strings from the left and right ends of the bar and reattach them to the opposite ends. This operation does not change the relative order of the strings on any bars below.\n\nAs a trainee in informatics, you decide to design an algorithm to determine whether a given wind chime can be rearranged to satisfy Ike’s preferences.\n\nConsider the example above. The wind chime in the figure satisfies condition 1 but not condition 2 — the leftmost toy is higher than the one to its right.\n\nHowever, we can transform this wind chime into one that Ike likes through the following steps:\n\n1. First, swap the left and right ends of bar $1$, which swaps the positions of bars $2$ and $3$. The result is shown below:\n\n![](https://cdn.luogu.com.cn/upload/pic/4388.png)\n\n2. Second, and final, swap the left and right ends of bar $2$, which moves bar $4$ to the left and moves the toy that was on the left to the right. The result is shown below:\n\n![](https://cdn.luogu.com.cn/upload/pic/4389.png)\n\nNow this wind chime satisfies Ike’s conditions.\n\nYour task is: given a description of a wind chime, compute the minimum number of swaps needed to make it satisfy Ike’s conditions (if possible).", "inputFormat": "The first line contains an integer $n$, the number of bars in the wind chime.\n\nThe next $n$ lines describe the connections of the bars. The $i$-th of these lines contains two integers $l_i$ and $r_i$, separated by a space, describing what is attached to the left and right ends of bar $i$. If a toy is attached, the value is ``-1``; otherwise, it is the index of the bar hanging below.", "outputFormat": "Output a single integer: the minimum number of swaps needed to make the wind chime satisfy Ike’s conditions. If it is impossible, output ``-1``.", "hint": "Constraints\n\n- For $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $-1 \\le l_i, r_i \\le n$, and $l_i, r_i \\ne 0$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2007] 风铃", "background": null, "description": "你准备给弟弟 Ike 买一件礼物，但是，Ike 挑选礼物的方式很特别：他只喜欢那些能被他排成有序形状的东西。\n\n你准备给 Ike 买一个风铃。风铃是一种多层的装饰品，一般挂在天花板上。\n\n每个风铃都包含一些由竖直线连起来的水平杆。每根杆的两头都有线连接，下面或者挂着另一根水平杆，或者挂着一个玩具。下面是一个风铃的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e1m223hc.png)\n\n为了满足弟弟，你需要选一个满足下面两个条件的风铃：\n\n1. 所有的玩具都在同一层(也就是说，每个玩具到天花板之间的杆的个数是一样的)或至多相差一层。\n2. 对于两个相差一层的玩具，左边的玩具比右边的玩具要更靠下一点。\n\n风铃可以按照下面的规则重新排列：任选一根杆，将杆两头的线“交换”。也就是解开一根杆左右两头的线，然后将它们绑到杆的另一头。这个操作不会改变更下面的杆上线的排列顺序。\n\n正在训练信息学奥林匹克的你，决定设计一个算法，判断能否通过重新排列，将一个给定的风铃变为 Ike 喜欢的样子。\n\n考虑上面的例子，上图中的风铃满足条件 $1$，却不满足条件 $2$ ——最左边的那个玩具比它右边的要高。\n\n但是，我们可以通过下面的步骤把这个风铃变成一个 Ike 喜欢的：\n\n 1.   第一步，将杆 $1$ 的左右两边交换，这使得杆 $2$ 和杆 $3$ 的位置互换，交换的结果如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/pic/4388.png)\n\n 2.   第二步，也是最后一步，将杆 $2$ 的左右两边交换，这使得杆 $4$ 到了左边，原来在左边的玩具到了右边，交换的结果发下图所示：\n\n![](https://cdn.luogu.com.cn/upload/pic/4389.png)\n\n现在的这个风铃就满足 Ike 的条件了。\n\n你的任务是：给定一个风铃的描述，求出最少需要多少次交换才能使这风铃满足 Ike 的条件(如果可能)。", "inputFormat": "输入的第一行包含一个整数 $n$，表示风铃中有多少根杆。\n\n接下来的 $n$ 行描述杆的连接信息。这部分的第 $i$ 行包含两个由空格分隔的整数 $l_i$ 和 $r_i$，描述杆 $i$ 的左右两边悬挂的东西。如果挂的是一个玩具，则对应的值为``-1``，否则为挂在下面的杆的编号。", "outputFormat": "输出仅包含一个整数。表示最少需要多少次交换能使风铃满足 Ike 的条件。如果不可能满足，输出``-1``。", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，满足 $1 \\le n \\le 10^5$，$-1 \\leq l_i, r_i \\leq n$，$l_i, r_i \\neq 0$。", "locale": "zh-CN"}}}
{"pid": "P3622", "type": "P", "difficulty": 6, "samples": [["14 5 \n2 1 2 4 2 6 \n3 1 1 6 4 \n6 1 2 9 6 8\n8 1 1 9 12 \n12 3 0 12 13 2 ", "5"], ["12 7 \n1 1 1 1 5 \n5 1 1 5 7 \n5 0 3 5 7 9 \n7 1 1 7 9 \n9 1 1 9 11 \n9 3 0 9 11 1\n11 1 1 11 1", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "APIO", "枚举", "深度优先搜索 DFS", "状压 DP"], "title": "[APIO2007] 动物园", "background": "", "description": "新建的圆形动物园是亚太地区的骄傲。圆形动物园坐落于太平洋的一个小岛上，包含一大圈围栏，每个围栏里有一\n种动物。如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8pr43p86.png)\n\n你是动物园的公共主管。你要做的是，让每个来动物园的人都尽可能高兴。今天有一群小朋友来动物园参观，你希望能让他们在动物园度过一段美好的时光。但这并不是一件容易的事——有的动物有一些小朋友喜欢，有的动物有一些小朋友害怕。如，Alex 喜欢可爱的猴子和考拉，而害怕拥牙齿锋利的狮子。而 Polly 会因狮子有美丽的鬃毛而喜欢它，但害怕有臭味的考拉。你可以选择将一些动物从围栏中移走以使得小朋友不会害怕。但你不能移走太多动物，否则小朋友们就没有动物可看了。每个小朋友站在大围栏圈的外面，可以看到连续的 $5$ 个围栏。你得到了所有小朋友喜欢和害怕的动物信息。当下面两处情况之一发生时，小朋友就会高兴：\n- 至少有一个他害怕的动物被移走\n- 至少有一个他喜欢的动物没被移走\n\n例如，考虑下图中的小朋友和动物：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n69iqfv6.png)\n\n- 假如你将围栏 $4$ 和 $12$ 的动物移走。Alex 和 Ka-Shu 将很高兴，因为至少有一个他们害怕的动物被移走了。这也会使 Chaitanya 高兴，因为他喜欢的围栏  $6$ 和 $8$ 中的动物都保留了。但是，Polly 和 Hwan 将不高兴，因为他们看不到任何他们喜欢的动物，而他们害怕的动物都还在。这种安排方式使得三个小朋友高兴。\n- 现在，换一种方法，如果你将围栏 $4$ 和 $6$ 中的动物移走，Alex 和 Polly 将很高兴，因为他们害怕的动物被移走了。Chaitanya 也会高兴，虽然他喜欢的动物 $6$ 被移走了，他仍可以看到围栏 $8$ 里面他喜欢的动物。同样的 Hwan 也会因可以看到自己喜欢的动物 $12$ 而高兴。唯一不高兴的只有 Ka-Shu。\n- 如果你只移走围栏 $13$ 中的动物，Ka-Shu 将高兴，因为有一个他害怕的动物被移走了，Alex, Polly, Chaitanya 和 Hwan 也会高兴，因为他们都可以看到至少一个他们喜欢的动物。所以有 $5$ 个小朋友会高兴。这种方法使得了最多的小朋友高兴。", "inputFormat": "输入的第一行包含两个整数 $N$，$C$，用空格分隔。\n\n$N$ 是围栏数（$10 \\le N \\le 10^4$），$C$ 是小朋友的个数（$1 \\le C \\le 5\\times 10^4$）。\n\n围栏按照顺时针的方向编号为 $1,2,3,\\cdots,N$。\n\n接下来的 $C$ 行，每行描述一个小朋友的信息，以下面的形式给出： $E, F, L ,X_1, X_2 ,\\cdots ,X_F ,Y_1 ,Y_2 ,\\cdots ,Y_L$。 \n\n其中： $E$ 表示这个小朋友可以看到的第一个围栏的编号（$1 \\le E \\le N$），换句话说，该小朋友可以看到的围栏为 $E$， $E+1$， $E+2$， $E+3$， $E+4$。\n\n注意，如果编号超过 $N$ 将继续从 $1$ 开始算。\n\n如：当 $N=14$，$ E=13$ 时，这个小朋友可以看到的围栏为 $13,14,1, 2$ 和 $3$。\n\n$F$ 表示该小朋友害怕的动物数。\n\n$L$ 表示该小朋友喜欢的动物数。\n\n围栏 $X_1, X_2, \\cdots, X_F$ 中包含该小朋友害怕的动物。\n\n围栏 $Y_1, Y_2, \\cdots, Y_L$ 中包含该小朋友喜欢的动物。 \n\n$X_1, X_2, \\cdots, X_F, Y_1, Y_2, \\cdots, Y_L$ 是两两不同的整数，而且所表示的围栏都是该小朋友可以看到的。\n\n小朋友已经按照他们可以看到的第一个围栏的编号从小到大的顺序排好了（这样最小的 $E$ 对应的小朋友排在第一个，最大的 $E$ 对应的小朋友排在最后一个）。\n\n注意可能有多于一个小朋友对应的 $E$ 是相同的。", "outputFormat": "仅输出一个数，表示最多可以让多少个小朋友高兴。\n", "hint": "**数据范围**\n对于 $100\\%$ 的数据，$10 \\le N \\le 10^4$，$1 \\le C \\le 5\\times 10^4$，$1 \\le E \\le N$。\n\n**样例说明**\n- 第一个样例是题目描述中的例子，所有的 $C=5$ 个小朋友都能高兴。\n- 第二个样例是一个不能使得所有 $C=7$ 个小朋友都高兴的例子。", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2007] Zoo", "background": "", "description": "The newly built circular zoo is the pride of the Asia-Pacific region. The zoo stands on a small island in the Pacific Ocean and consists of a large ring of enclosures, each containing one species of animal. As shown below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8pr43p86.png)\n\nYou are the zoo’s public manager. Your job is to make every visitor as happy as possible. Today a group of children is visiting the zoo, and you hope they will have a wonderful time there. But this is not easy — some animals are liked by some children, while others are feared by some children. For example, Alex likes the cute monkeys and koalas but is afraid of sharp-toothed lions. Polly, however, likes lions because of their beautiful manes but is afraid of smelly koalas. You may choose to remove some animals from their enclosures so that the children are not scared. However, you cannot remove too many animals, or the children will have nothing to see. Each child stands outside the circular ring of enclosures and can see $5$ consecutive enclosures. You are given, for each child, which animals they like and which they fear. A child is happy if at least one of the following holds:\n- At least one animal they fear is removed.\n- At least one animal they like is not removed.\n\nFor example, consider the children and animals shown below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n69iqfv6.png)\n\n- Suppose you remove the animals in enclosures 4 and 12. Alex and Ka-Shu will be happy because at least one animal they fear has been removed. This also makes Chaitanya happy because the animals he likes in enclosures 6 and 8 both remain. However, Polly and Hwan will not be happy because they cannot see any animals they like, and the animals they fear are still there. This arrangement makes three children happy.\n- Now try another plan: if you remove the animals in enclosures 4 and 6, Alex and Polly will be happy because the animals they fear have been removed. Chaitanya will also be happy: although the animal he likes in enclosure 6 is removed, he can still see the animal he likes in enclosure 8. Similarly, Hwan is happy because he can see the animal he likes in enclosure 12. The only unhappy child is Ka-Shu.\n- If you remove only the animal in enclosure 13, Ka-Shu will be happy because one animal he fears has been removed, and Alex, Polly, Chaitanya, and Hwan will also be happy because each of them can see at least one animal they like. Thus $5$ children are happy. This plan makes the maximum number of children happy.", "inputFormat": "The first line contains two integers $N$, $C$, separated by a space.\n\n$N$ is the number of enclosures ($10 \\le N \\le 10^4$), and $C$ is the number of children ($1 \\le C \\le 5 \\times 10^4$).\n\nThe enclosures are numbered clockwise as $1, 2, 3, \\cdots, N$.\n\nEach of the next $C$ lines describes one child in the following format: $E, F, L, X_1, X_2, \\cdots, X_F, Y_1, Y_2, \\cdots, Y_L$.\n\nHere, $E$ is the index of the first enclosure this child can see ($1 \\le E \\le N$). In other words, the child can see enclosures $E$, $E+1$, $E+2$, $E+3$, and $E+4$.\n\nNote that if the numbering exceeds $N$, it wraps around starting from $1$ again.\n\nFor example, when $N=14$ and $E=13$, the enclosures the child can see are $13, 14, 1, 2$, and $3$.\n\n$F$ is the number of animals this child fears.\n\n$L$ is the number of animals this child likes.\n\nEnclosures $X_1, X_2, \\cdots, X_F$ contain animals the child fears.\n\nEnclosures $Y_1, Y_2, \\cdots, Y_L$ contain animals the child likes.\n\n$X_1, X_2, \\cdots, X_F, Y_1, Y_2, \\cdots, Y_L$ are pairwise distinct integers, and all referenced enclosures are among the five enclosures the child can see.\n\nThe children are listed in nondecreasing order of their $E$ values (that is, the child with the smallest $E$ appears first, and the one with the largest $E$ appears last).\n\nNote that there may be multiple children with the same $E$.", "outputFormat": "Output a single integer: the maximum number of children that can be made happy.", "hint": "Constraints\nFor $100\\%$ of the testdata, $10 \\le N \\le 10^4$, $1 \\le C \\le 5 \\times 10^4$, $1 \\le E \\le N$.\n\nSample Explanation\n- In the first sample (the example from the statement), all $C=5$ children can be made happy.\n- In the second sample, it is impossible to make all $C=7$ children happy.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2007] 动物园", "background": "", "description": "新建的圆形动物园是亚太地区的骄傲。圆形动物园坐落于太平洋的一个小岛上，包含一大圈围栏，每个围栏里有一\n种动物。如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8pr43p86.png)\n\n你是动物园的公共主管。你要做的是，让每个来动物园的人都尽可能高兴。今天有一群小朋友来动物园参观，你希望能让他们在动物园度过一段美好的时光。但这并不是一件容易的事——有的动物有一些小朋友喜欢，有的动物有一些小朋友害怕。如，Alex 喜欢可爱的猴子和考拉，而害怕拥牙齿锋利的狮子。而 Polly 会因狮子有美丽的鬃毛而喜欢它，但害怕有臭味的考拉。你可以选择将一些动物从围栏中移走以使得小朋友不会害怕。但你不能移走太多动物，否则小朋友们就没有动物可看了。每个小朋友站在大围栏圈的外面，可以看到连续的 $5$ 个围栏。你得到了所有小朋友喜欢和害怕的动物信息。当下面两处情况之一发生时，小朋友就会高兴：\n- 至少有一个他害怕的动物被移走\n- 至少有一个他喜欢的动物没被移走\n\n例如，考虑下图中的小朋友和动物：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n69iqfv6.png)\n\n- 假如你将围栏 $4$ 和 $12$ 的动物移走。Alex 和 Ka-Shu 将很高兴，因为至少有一个他们害怕的动物被移走了。这也会使 Chaitanya 高兴，因为他喜欢的围栏  $6$ 和 $8$ 中的动物都保留了。但是，Polly 和 Hwan 将不高兴，因为他们看不到任何他们喜欢的动物，而他们害怕的动物都还在。这种安排方式使得三个小朋友高兴。\n- 现在，换一种方法，如果你将围栏 $4$ 和 $6$ 中的动物移走，Alex 和 Polly 将很高兴，因为他们害怕的动物被移走了。Chaitanya 也会高兴，虽然他喜欢的动物 $6$ 被移走了，他仍可以看到围栏 $8$ 里面他喜欢的动物。同样的 Hwan 也会因可以看到自己喜欢的动物 $12$ 而高兴。唯一不高兴的只有 Ka-Shu。\n- 如果你只移走围栏 $13$ 中的动物，Ka-Shu 将高兴，因为有一个他害怕的动物被移走了，Alex, Polly, Chaitanya 和 Hwan 也会高兴，因为他们都可以看到至少一个他们喜欢的动物。所以有 $5$ 个小朋友会高兴。这种方法使得了最多的小朋友高兴。", "inputFormat": "输入的第一行包含两个整数 $N$，$C$，用空格分隔。\n\n$N$ 是围栏数（$10 \\le N \\le 10^4$），$C$ 是小朋友的个数（$1 \\le C \\le 5\\times 10^4$）。\n\n围栏按照顺时针的方向编号为 $1,2,3,\\cdots,N$。\n\n接下来的 $C$ 行，每行描述一个小朋友的信息，以下面的形式给出： $E, F, L ,X_1, X_2 ,\\cdots ,X_F ,Y_1 ,Y_2 ,\\cdots ,Y_L$。 \n\n其中： $E$ 表示这个小朋友可以看到的第一个围栏的编号（$1 \\le E \\le N$），换句话说，该小朋友可以看到的围栏为 $E$， $E+1$， $E+2$， $E+3$， $E+4$。\n\n注意，如果编号超过 $N$ 将继续从 $1$ 开始算。\n\n如：当 $N=14$，$ E=13$ 时，这个小朋友可以看到的围栏为 $13,14,1, 2$ 和 $3$。\n\n$F$ 表示该小朋友害怕的动物数。\n\n$L$ 表示该小朋友喜欢的动物数。\n\n围栏 $X_1, X_2, \\cdots, X_F$ 中包含该小朋友害怕的动物。\n\n围栏 $Y_1, Y_2, \\cdots, Y_L$ 中包含该小朋友喜欢的动物。 \n\n$X_1, X_2, \\cdots, X_F, Y_1, Y_2, \\cdots, Y_L$ 是两两不同的整数，而且所表示的围栏都是该小朋友可以看到的。\n\n小朋友已经按照他们可以看到的第一个围栏的编号从小到大的顺序排好了（这样最小的 $E$ 对应的小朋友排在第一个，最大的 $E$ 对应的小朋友排在最后一个）。\n\n注意可能有多于一个小朋友对应的 $E$ 是相同的。", "outputFormat": "仅输出一个数，表示最多可以让多少个小朋友高兴。\n", "hint": "**数据范围**\n对于 $100\\%$ 的数据，$10 \\le N \\le 10^4$，$1 \\le C \\le 5\\times 10^4$，$1 \\le E \\le N$。\n\n**样例说明**\n- 第一个样例是题目描述中的例子，所有的 $C=5$ 个小朋友都能高兴。\n- 第二个样例是一个不能使得所有 $C=7$ 个小朋友都高兴的例子。", "locale": "zh-CN"}}}
{"pid": "P3623", "type": "P", "difficulty": 4, "samples": [["5 7 2 \n1 3 0 \n4 5 1 \n3 2 0 \n5 3 1 \n4 3 0 \n1 2 1 \n4 2 1", "3 2 0 \n4 3 0 \n5 3 1 \n1 2 1 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "并查集", "APIO", "Special Judge", "凸完全单调性（wqs 二分）", "生成树"], "title": "[APIO2008] 免费道路", "background": null, "description": "新亚（New Asia）王国有 $N$ 个村庄，由 $M$ 条道路连接。其中一些道路是鹅卵石路，而其它道路是水泥路。保持道路免费运行需要一大笔费用，并且看上去王国不可能保持所有道路免费。为此亟待制定一个新的道路维护计划。\n\n国王已决定保持尽可能少的道路免费，但是两个不同的村庄之间都应该有且仅有一条免费道路的路径连接。同时，虽然水泥路更适合现代交通的需要，但国王也认为走在鹅卵石路上是一件有趣的事情。所以，国王决定保持刚好 $K$ 条鹅卵石路免费。\n\n举例来说，假定新亚王国的村庄和道路如图 3(a) 所示。如果国王希望保持两 条鹅卵石路免费，那么可以如图 3(b) 中那样保持道路 $(1, 2)$，$(2, 3)$，$(3, 4)$ 和 $(3, 5)$ 免费。该方案满足了国王的要求，因为：\n1. 两个村庄之间都有一条由免费道路组成的路径。\n2. 免费的道路已尽可能少。\n3. 方案中刚好有两条鹅卵石道路 $(2, 3)$ 和 $(3, 4)$。\n\n ![](https://cdn.luogu.com.cn/upload/pic/4393.png) \n\n图 3：(a) 新亚王国中村庄和道路的一个示例。实线标注的是水泥路，虚线标注的是鹅卵石路。(b) 一个保持两条鹅卵石路免费的维护方案。图中仅标出了免费道路。\n\n\n给定一个关于新亚王国村庄和道路的述以及国王决定保持免费的鹅卵石道路数目，写一个程序确定是否存在一个道路维护计划以满足国王的要求，如果存在则任意输出一个方案。", "inputFormat": "输入第一行包含三个由空格隔开的整数：\n\n$N$，村庄的数目 $(1 \\le N \\le 2 \\times 10^4)$；\n\n$M$，道路的数目 $(1 \\le M \\le 10^5)$；\n\n$K$，国王希望保持免费的鹅卵石道路数目 $(0 \\le K \\le N - 1)$。\n\n此后 $M$ 行述了新亚王国的道路，编号分别为 $1$ 到 $M$。第 $(i+1)$ 行述了第 $i$ 条道路的情况。用 3 个由空格隔开的整数述：\n\n$u_i$ 和 $v_i$，为第 $i$ 条道路连接的两个村庄的编号，村庄编号为 $1$ 到 $N$；\n\n$c_i$，表示第 $i$ 条道路的类型。$c_i = 0$ 表示第 $i$ 条道路是鹅卵石路，$c_i = 1$ 表示第 $i$ 条道路是水泥路。\n\n输入数据保证一对村庄之间至多有一条道路连接。", "outputFormat": "如果满足国王要求的道路维护方案不存在，你的程序应该在输出第一行打印 `no solution`。 否则，你的程序应该输出一个符合要求的道路维护方案，也就是保持免费的道路列表。按照输入中给定的那样输出免费的道路。如果有多种合法方案，你可以任意输出一种。", "hint": "### 数据范围\n\n对于 $100\\%$ 的数据。保证 $1 \\le N \\le 2 \\times 10^4$，$1 \\le M \\le 10^5$，$0 \\le K \\le N-1$。", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2008] Free Roads", "background": "", "description": "The kingdom of New Asia has $N$ villages connected by $M$ roads. Some roads are cobblestone, while others are cement. Keeping roads toll-free requires a large expense, and it seems impossible for the kingdom to keep all roads free. Therefore, a new road maintenance plan is urgently needed.\n\nThe king has decided to keep as few roads free as possible, but there must be exactly one path consisting of free roads between any two distinct villages. At the same time, although cement roads are better suited to modern traffic, the king also thinks that walking along cobblestone roads is interesting. So the king decides to keep exactly $K$ cobblestone roads free.\n\nFor example, suppose the villages and roads in New Asia are as shown in Figure 3(a). If the king wants to keep two cobblestone roads free, one possible plan is to keep roads $(1, 2)$, $(2, 3)$, $(3, 4)$, and $(3, 5)$ free, as shown in Figure 3(b). This plan satisfies the king’s requirements because:\n1. There is a path consisting of free roads between any two villages.\n2. The number of free roads is as small as possible.\n3. There are exactly two cobblestone roads, $(2, 3)$ and $(3, 4)$, in the plan.\n\n ![](https://cdn.luogu.com.cn/upload/pic/4393.png) \n\nFigure 3: (a) An example of villages and roads in New Asia. Solid lines denote cement roads, and dashed lines denote cobblestone roads. (b) A maintenance plan that keeps two cobblestone roads free. Only the free roads are shown.\n\nGiven a description of the villages and roads in New Asia and the number of cobblestone roads the king wants to keep free, write a program to determine whether there exists a road maintenance plan that satisfies the king’s requirements. If it exists, output any one such plan.", "inputFormat": "The first line of input contains three integers separated by spaces:\n\n$N$, the number of villages $(1 \\le N \\le 2 \\times 10^4)$;\n\n$M$, the number of roads $(1 \\le M \\le 10^5)$;\n\n$K$, the number of cobblestone roads the king wants to keep free $(0 \\le K \\le N - 1)$.\n\nThe following $M$ lines describe the roads in New Asia, numbered from $1$ to $M$. The $(i+1)$-th line describes the $i$-th road with 3 space-separated integers:\n\n$u_i$ and $v_i$, the indices of the two villages connected by the $i$-th road, where villages are numbered from $1$ to $N$;\n\n$c_i$, indicating the type of the $i$-th road. $c_i = 0$ means the $i$-th road is a cobblestone road, and $c_i = 1$ means the $i$-th road is a cement road.\n\nIt is guaranteed that between any pair of villages there is at most one connecting road.", "outputFormat": "If no road maintenance plan satisfies the king’s requirements, your program should print `no solution` on the first line. Otherwise, your program should output a valid road maintenance plan, i.e., the list of roads to remain free. Output the free roads in the same way as they are given in the input. If there are multiple valid plans, you may output any one of them.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\le N \\le 2 \\times 10^4$, $1 \\le M \\le 10^5$, $0 \\le K \\le N - 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2008] 免费道路", "background": null, "description": "新亚（New Asia）王国有 $N$ 个村庄，由 $M$ 条道路连接。其中一些道路是鹅卵石路，而其它道路是水泥路。保持道路免费运行需要一大笔费用，并且看上去王国不可能保持所有道路免费。为此亟待制定一个新的道路维护计划。\n\n国王已决定保持尽可能少的道路免费，但是两个不同的村庄之间都应该有且仅有一条免费道路的路径连接。同时，虽然水泥路更适合现代交通的需要，但国王也认为走在鹅卵石路上是一件有趣的事情。所以，国王决定保持刚好 $K$ 条鹅卵石路免费。\n\n举例来说，假定新亚王国的村庄和道路如图 3(a) 所示。如果国王希望保持两 条鹅卵石路免费，那么可以如图 3(b) 中那样保持道路 $(1, 2)$，$(2, 3)$，$(3, 4)$ 和 $(3, 5)$ 免费。该方案满足了国王的要求，因为：\n1. 两个村庄之间都有一条由免费道路组成的路径。\n2. 免费的道路已尽可能少。\n3. 方案中刚好有两条鹅卵石道路 $(2, 3)$ 和 $(3, 4)$。\n\n ![](https://cdn.luogu.com.cn/upload/pic/4393.png) \n\n图 3：(a) 新亚王国中村庄和道路的一个示例。实线标注的是水泥路，虚线标注的是鹅卵石路。(b) 一个保持两条鹅卵石路免费的维护方案。图中仅标出了免费道路。\n\n\n给定一个关于新亚王国村庄和道路的述以及国王决定保持免费的鹅卵石道路数目，写一个程序确定是否存在一个道路维护计划以满足国王的要求，如果存在则任意输出一个方案。", "inputFormat": "输入第一行包含三个由空格隔开的整数：\n\n$N$，村庄的数目 $(1 \\le N \\le 2 \\times 10^4)$；\n\n$M$，道路的数目 $(1 \\le M \\le 10^5)$；\n\n$K$，国王希望保持免费的鹅卵石道路数目 $(0 \\le K \\le N - 1)$。\n\n此后 $M$ 行述了新亚王国的道路，编号分别为 $1$ 到 $M$。第 $(i+1)$ 行述了第 $i$ 条道路的情况。用 3 个由空格隔开的整数述：\n\n$u_i$ 和 $v_i$，为第 $i$ 条道路连接的两个村庄的编号，村庄编号为 $1$ 到 $N$；\n\n$c_i$，表示第 $i$ 条道路的类型。$c_i = 0$ 表示第 $i$ 条道路是鹅卵石路，$c_i = 1$ 表示第 $i$ 条道路是水泥路。\n\n输入数据保证一对村庄之间至多有一条道路连接。", "outputFormat": "如果满足国王要求的道路维护方案不存在，你的程序应该在输出第一行打印 `no solution`。 否则，你的程序应该输出一个符合要求的道路维护方案，也就是保持免费的道路列表。按照输入中给定的那样输出免费的道路。如果有多种合法方案，你可以任意输出一种。", "hint": "### 数据范围\n\n对于 $100\\%$ 的数据。保证 $1 \\le N \\le 2 \\times 10^4$，$1 \\le M \\le 10^5$，$0 \\le K \\le N-1$。", "locale": "zh-CN"}}}
{"pid": "P3624", "type": "P", "difficulty": 4, "samples": [["9 3 5 \nACANNCNNG", "ACAAACCCG"], ["5 4 10 \nACANN", "ACAGC "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2008", "APIO", "前缀和"], "title": "[APIO2008] DNA", "background": "", "description": "分析如DNA序列这样的生命科学数据是计算机的一个有趣应用。从生物学的角度上说，DNA是一种由腺嘌呤、胞嘧啶、鸟嘌呤和胸腺嘧啶这四种核苷酸组成的链式结构。这四种核苷酸分别用大写字母A、C、G、T表示。这样，一条DNA单链可以被表示为一个只含以上四种字符的字符串。我们将这样的字符串称作一个DNA序列。\n\n有时生物学家可能无法确定一条DNA单链中的某些核苷酸。在这种情况下，字符N将被用来表示一个不确定的核苷酸。换句话说，N可以用来表示A、C、G、T中的任何一个字符。我们称包含一个或者多个N的DNA序列为未完成序列；反之，就称作完成序列。如果一个完成序列可以通过将一个未完成序列中的个N任意替换成A、C、G、T得到的话，就称完成序列适合这个未完成序列。举例来说，ACCCT适合ACNNT，但是AGGAT不适合。\n\n研究者们常按照如下方式排序四种核苷酸：A优先于C，C优先于G，G优先于T。如果一个DNA序列中的个核苷酸都与其右边的相同或者优先，就将其归类为范式-1。举例来说，AACCGT是范式-1，但是AACGTC不是。\n\n一般来说，一个DNA序列属于范式-j(j>1)，只要它属于范式-(j-1)或者是一个范式-(j-1)和一个范式-1的连接。举例来说，AACCC、ACACC和ACACA都是范式-3，但GCACAC和ACACACA不是。\n\n同样，研究者们按照字典序对DNA序列进行排序。按照这个定义，最小的属于范式-3的DNA序列是AAAAA，最大的是TTTTT。这里是另外一个例子，考虑未完成序列ACANNCNNG。那么前7个适合这个未完成序列的DNA序列是：\n```\nACAAACAAG\nACAAACACG\nACAAACAGG\nACAAACCAG\nACAAACCCG\nACAAACCGG\nACAAACCTG\n```", "inputFormat": "输入第一行包含三个由空格隔开的整数：M(1≤M≤50,000)，K(1≤K≤10)和 R(1≤R≤2×$10^{12}$)。\n\n第二行包含一个长度为 M 的字符串，表示未完成序列。\n\n保证适 合该未完成序列的范式-K 的总数不超过 4×10^18，因此该数可以用 C 和 C++中的 long long 类型或者 Pascal 中的 Int64 类型表示。同时，R 不会超过适合给定未完 成序列的范式-K 的总数。\n", "outputFormat": " 在第一行中输出第R个适合输入中的未完成序列的范式-K。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2008] DNA", "background": "# Description\n\nAnalyzing life science data such as DNA sequences is an interesting application of computers. Biologically, DNA is a chain structure composed of four nucleotides: adenine, cytosine, guanine, and thymine. These four nucleotides are denoted by uppercase letters A, C, G, and T. Thus, a single-stranded DNA can be represented as a string containing only these four characters. We call such a string a DNA sequence.\n\nSometimes biologists cannot determine certain nucleotides in a single-stranded DNA. In such cases, the character N is used to denote an undetermined nucleotide. In other words, N can represent any one of A, C, G, or T. We call a DNA sequence that contains one or more N an incomplete sequence; otherwise, it is called a complete sequence. If a complete sequence can be obtained by arbitrarily replacing each N in an incomplete sequence with A, C, G, or T, then the complete sequence is said to be compatible with this incomplete sequence. For example, ACCCT is compatible with ACNNT, but AGGAT is not.\n\nResearchers often order the four nucleotides as follows: A precedes C, C precedes G, and G precedes T. If in a DNA sequence every nucleotide is the same as or precedes the one to its right, we classify it as form-1. For example, AACCGT is form-1, but AACGTC is not.\n\nIn general, a DNA sequence belongs to form-j (j > 1) if and only if it belongs to form-(j−1), or it is a concatenation of a form-(j−1) and a form-1. For example, AACCC, ACACC, and ACACA are all form-3, but GCACAC and ACACACA are not.\n\nSimilarly, researchers sort DNA sequences in lexicographic order. Under this definition, the smallest DNA sequence belonging to form-3 is AAAAA, and the largest is TTTTT. Here is another example. Consider the incomplete sequence ACANNCNNG. Then the first 7 DNA sequences compatible with this incomplete sequence are:\n```\nACAAACAAG\nACAAACACG\nACAAACAGG\nACAAACCAG\nACAAACCCG\nACAAACCGG\nACAAACCTG\n```\n\n# Input Format\n\nThe first line contains three integers separated by spaces: M ($1 \\le M \\le 50{,}000$), K ($1 \\le K \\le 10$), and R ($1 \\le R \\le 2 \\times 10^{12}$).\n\nThe second line contains a string of length M, representing the incomplete sequence.\n\nIt is guaranteed that the total number of form-K sequences compatible with the given incomplete sequence does not exceed $4 \\times 10^{18}$; therefore, this number fits in type long long in C/C++ or Int64 in Pascal. Also, R will not exceed the total number of form-K sequences compatible with the given incomplete sequence.", "description": "Analyzing life science data such as DNA sequences is an interesting application of computers. Biologically, DNA is a chain structure composed of four nucleotides: adenine, cytosine, guanine, and thymine. These four nucleotides are denoted by uppercase letters A, C, G, and T. Thus, a single-stranded DNA can be represented as a string containing only these four characters. We call such a string a DNA sequence.\n\nSometimes biologists cannot determine certain nucleotides in a single-stranded DNA. In such cases, the character N is used to denote an undetermined nucleotide. In other words, N can represent any one of A, C, G, or T. We call a DNA sequence that contains one or more N an incomplete sequence; otherwise, it is called a complete sequence. If a complete sequence can be obtained by arbitrarily replacing each N in an incomplete sequence with A, C, G, or T, then the complete sequence is said to be compatible with this incomplete sequence. For example, ACCCT is compatible with ACNNT, but AGGAT is not.\n\nResearchers often order the four nucleotides as follows: A precedes C, C precedes G, and G precedes T. If in a DNA sequence every nucleotide is the same as or precedes the one to its right, we classify it as form-1. For example, AACCGT is form-1, but AACGTC is not.\n\nIn general, a DNA sequence belongs to form-j (j > 1) if and only if it belongs to form-(j−1), or it is a concatenation of a form-(j−1) and a form-1. For example, AACCC, ACACC, and ACACA are all form-3, but GCACAC and ACACACA are not.\n\nSimilarly, researchers sort DNA sequences in lexicographic order. Under this definition, the smallest DNA sequence belonging to form-3 is AAAAA, and the largest is TTTTT. Here is another example. Consider the incomplete sequence ACANNCNNG. Then the first 7 DNA sequences compatible with this incomplete sequence are:\n```\nACAAACAAG\nACAAACACG\nACAAACAGG\nACAAACCAG\nACAAACCCG\nACAAACCGG\nACAAACCTG\n```", "inputFormat": "The first line contains three integers separated by spaces: M ($1 \\le M \\le 50{,}000$), K ($1 \\le K \\le 10$), and R ($1 \\le R \\le 2 \\times 10^{12}$).\n\nThe second line contains a string of length M, representing the incomplete sequence.\n\nIt is guaranteed that the total number of form-K sequences compatible with the given incomplete sequence does not exceed $4 \\times 10^{18}$; therefore, this number fits in type long long in C/C++ or Int64 in Pascal. Also, R will not exceed the total number of form-K sequences compatible with the given incomplete sequence.\n\n# Description\n\n\n\n# Input Format", "outputFormat": "Output the R-th form-K sequence that is compatible with the given incomplete sequence on the first line.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2008] DNA", "background": "", "description": "分析如DNA序列这样的生命科学数据是计算机的一个有趣应用。从生物学的角度上说，DNA是一种由腺嘌呤、胞嘧啶、鸟嘌呤和胸腺嘧啶这四种核苷酸组成的链式结构。这四种核苷酸分别用大写字母A、C、G、T表示。这样，一条DNA单链可以被表示为一个只含以上四种字符的字符串。我们将这样的字符串称作一个DNA序列。\n\n有时生物学家可能无法确定一条DNA单链中的某些核苷酸。在这种情况下，字符N将被用来表示一个不确定的核苷酸。换句话说，N可以用来表示A、C、G、T中的任何一个字符。我们称包含一个或者多个N的DNA序列为未完成序列；反之，就称作完成序列。如果一个完成序列可以通过将一个未完成序列中的个N任意替换成A、C、G、T得到的话，就称完成序列适合这个未完成序列。举例来说，ACCCT适合ACNNT，但是AGGAT不适合。\n\n研究者们常按照如下方式排序四种核苷酸：A优先于C，C优先于G，G优先于T。如果一个DNA序列中的个核苷酸都与其右边的相同或者优先，就将其归类为范式-1。举例来说，AACCGT是范式-1，但是AACGTC不是。\n\n一般来说，一个DNA序列属于范式-j(j>1)，只要它属于范式-(j-1)或者是一个范式-(j-1)和一个范式-1的连接。举例来说，AACCC、ACACC和ACACA都是范式-3，但GCACAC和ACACACA不是。\n\n同样，研究者们按照字典序对DNA序列进行排序。按照这个定义，最小的属于范式-3的DNA序列是AAAAA，最大的是TTTTT。这里是另外一个例子，考虑未完成序列ACANNCNNG。那么前7个适合这个未完成序列的DNA序列是：\n```\nACAAACAAG\nACAAACACG\nACAAACAGG\nACAAACCAG\nACAAACCCG\nACAAACCGG\nACAAACCTG\n```", "inputFormat": "输入第一行包含三个由空格隔开的整数：M(1≤M≤50,000)，K(1≤K≤10)和 R(1≤R≤2×$10^{12}$)。\n\n第二行包含一个长度为 M 的字符串，表示未完成序列。\n\n保证适 合该未完成序列的范式-K 的总数不超过 4×10^18，因此该数可以用 C 和 C++中的 long long 类型或者 Pascal 中的 Int64 类型表示。同时，R 不会超过适合给定未完 成序列的范式-K 的总数。\n", "outputFormat": " 在第一行中输出第R个适合输入中的未完成序列的范式-K。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3625", "type": "P", "difficulty": 5, "samples": [["9 9 3\n1 1 1 1 1 1 1 1 1 \n1 1 1 1 1 1 1 1 1 \n1 8 8 8 8 8 1 1 1 \n1 8 8 8 8 8 1 1 1 \n1 8 8 8 8 8 1 1 1 \n1 1 1 1 8 8 8 1 1 \n1 1 1 1 1 1 8 8 8 \n1 1 1 1 1 1 9 9 9 \n1 1 1 1 1 1 9 9 9 ", "208"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "2009", "APIO", "前缀和"], "title": "[APIO2009] 采油区域", "background": "", "description": "Siruseri 政府决定将石油资源丰富的 Navalur 省的土地拍卖给私人承包商以 建立油井。被拍卖的整块土地为一个矩形区域，被划分为 $M \\times N$ 个小块。 Siruseri 地质调查局有关于 Navalur 土地石油储量的估测数据。这些数据表示 为 $M \\times N$ 个正整数，即对每一小块土地石油储量的估计值。 为了避免出现垄断，政府规定每一个承包商只能承包一个由 $K\\times K$ 块相连的土地构成的正方形区域。 AoE 石油联合公司由三个承包商组成，他们想选择三块互不相交的 $K\\times K$ 的 区域使得总的收益最大。 例如，假设石油储量的估计值如下：\n\n```\n1 1 1 1 1 1 1 1 1 \n1 1 1 1 1 1 1 1 1 \n1 8 8 8 8 8 1 1 1 \n1 8 8 8 8 8 1 1 1 \n1 8 8 8 8 8 1 1 1 \n1 1 1 1 8 8 8 1 1 \n1 1 1 1 1 1 8 8 8 \n1 1 1 1 1 1 9 9 9 \n1 1 1 1 1 1 9 9 9 \n```\n\n- 如果 $K = 2$，AoE 公司可以承包的区域的石油储量总和为 $100$；\n- 如果 $K = 3$，AoE 公司可以承包的区域的石油储量总和为 $208$。\n\nAoE 公司雇佣你来写一个程序，帮助计算出他们可以承包的区域的石油储量之和的最大值。\n", "inputFormat": "输入第一行包含三个正整数 $M, N, K$，其中 $M$ 和 $N$ 是矩形区域的行数和列数，$K$ 是每一个承包商承包的正方形的大小（边长的块数）。接下来 $M$ 行，每行有 $N$ 个正整数表示这一行每一小块土地的石油储量的估计值。\n", "outputFormat": "输出只包含一个正整数，表示 AoE 公司可以承包的区域的石油储量之和的最大值。\n", "hint": "数据保证 $K\\le M$ 且 $K\\le N$ 并且至少有三个 $K\\times K$ 的互不相交的正方形区域。\n\n其中 $30\\%$ 的输入数据，$M, N \\le 12$。所有的输入数据, $M, N\\le 1500$。每一小块土地的石油储量的估计值是非负整数且小于等于 $500$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2009] Oil Extraction Area", "background": "", "description": "The Siruseri government has decided to auction off land in the oil-rich province of Navalur to private contractors for building oil wells. The land to be auctioned is a rectangular area divided into $M \\times N$ blocks. The Siruseri Geological Survey has estimates of the oil reserves in Navalur. These are given as $M \\times N$ positive integers, i.e., the estimated yield for each block.\n\nTo avoid monopoly, the government stipulates that each contractor may lease only one square region consisting of $K \\times K$ adjacent blocks. The AoE Oil Consortium consists of three contractors. They want to choose three pairwise non-overlapping $K \\times K$ regions so that the total yield is maximized.\n\nFor example, suppose the estimated yields are as follows:\n\n```\n1 1 1 1 1 1 1 1 1 \n1 1 1 1 1 1 1 1 1 \n1 8 8 8 8 8 1 1 1 \n1 8 8 8 8 8 1 1 1 \n1 8 8 8 8 8 1 1 1 \n1 1 1 1 8 8 8 1 1 \n1 1 1 1 1 1 8 8 8 \n1 1 1 1 1 1 9 9 9 \n1 1 1 1 1 1 9 9 9 \n```\n\n- If $K = 2$, the total yield the AoE company can get is $100$.\n- If $K = 3$, the total yield the AoE company can get is $208$.\n\nAoE hires you to write a program to compute the maximum possible sum of yields of the regions they can lease.", "inputFormat": "The first line contains three positive integers $M$, $N$, $K$, where $M$ and $N$ are the numbers of rows and columns of the rectangle, and $K$ is the side length (in blocks) of each contractor’s square region. The next $M$ lines each contain $N$ positive integers giving the estimated yield for each block in that row.", "outputFormat": "Output a single integer: the maximum possible total yield of the three leased regions.", "hint": "It is guaranteed that $K \\le M$ and $K \\le N$, and that there exist at least three pairwise disjoint $K \\times K$ square regions.\n\nFor $30\\%$ of the testdata, $M, N \\le 12$. For all testdata, $M, N \\le 1500$. The estimate for each block is a non-negative integer not exceeding $500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2009] 采油区域", "background": "", "description": "Siruseri 政府决定将石油资源丰富的 Navalur 省的土地拍卖给私人承包商以 建立油井。被拍卖的整块土地为一个矩形区域，被划分为 $M \\times N$ 个小块。 Siruseri 地质调查局有关于 Navalur 土地石油储量的估测数据。这些数据表示 为 $M \\times N$ 个正整数，即对每一小块土地石油储量的估计值。 为了避免出现垄断，政府规定每一个承包商只能承包一个由 $K\\times K$ 块相连的土地构成的正方形区域。 AoE 石油联合公司由三个承包商组成，他们想选择三块互不相交的 $K\\times K$ 的 区域使得总的收益最大。 例如，假设石油储量的估计值如下：\n\n```\n1 1 1 1 1 1 1 1 1 \n1 1 1 1 1 1 1 1 1 \n1 8 8 8 8 8 1 1 1 \n1 8 8 8 8 8 1 1 1 \n1 8 8 8 8 8 1 1 1 \n1 1 1 1 8 8 8 1 1 \n1 1 1 1 1 1 8 8 8 \n1 1 1 1 1 1 9 9 9 \n1 1 1 1 1 1 9 9 9 \n```\n\n- 如果 $K = 2$，AoE 公司可以承包的区域的石油储量总和为 $100$；\n- 如果 $K = 3$，AoE 公司可以承包的区域的石油储量总和为 $208$。\n\nAoE 公司雇佣你来写一个程序，帮助计算出他们可以承包的区域的石油储量之和的最大值。\n", "inputFormat": "输入第一行包含三个正整数 $M, N, K$，其中 $M$ 和 $N$ 是矩形区域的行数和列数，$K$ 是每一个承包商承包的正方形的大小（边长的块数）。接下来 $M$ 行，每行有 $N$ 个正整数表示这一行每一小块土地的石油储量的估计值。\n", "outputFormat": "输出只包含一个正整数，表示 AoE 公司可以承包的区域的石油储量之和的最大值。\n", "hint": "数据保证 $K\\le M$ 且 $K\\le N$ 并且至少有三个 $K\\times K$ 的互不相交的正方形区域。\n\n其中 $30\\%$ 的输入数据，$M, N \\le 12$。所有的输入数据, $M, N\\le 1500$。每一小块土地的石油储量的估计值是非负整数且小于等于 $500$。\n", "locale": "zh-CN"}}}
{"pid": "P3626", "type": "P", "difficulty": 5, "samples": [["4 \n4 9\n9 11 \n13 19 \n10 17", "2\n1 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "2009", "线段树", "倍增", "颜色段均摊（珂朵莉树 ODT）", "APIO", "排序", "前缀和"], "title": "[APIO2009] 会议中心", "background": "", "description": "Siruseri 政府建造了一座新的会议中心。许多公司对租借会议中心的会堂很 感兴趣，他们希望能够在里面举行会议。\n\n对于一个客户而言，仅当在开会时能够独自占用整个会堂，他才会租借会堂。 会议中心的销售主管认为：最好的策略应该是将会堂租借给尽可能多的客户。\n\n显 然，有可能存在不止一种满足要求的策略。 例如下面的例子。总共有 4 个公司。他们对租借会堂发出了请求，并提出了 他们所需占用会堂的起止日期（如下表所示）。\n\n```cpp\n       开始日期 结束日期 \n 公司1    4        9 \n 公司2    9        11 \n 公司3    13       19 \n 公司4    10       17 \n```\n上例中，最多将会堂租借给两家公司。租借策略分别是租给公司 1 和公司 3， 或是公司 2 和公司 3，也可以是公司 1 和公司 4。注意会议中心一天最多租借给 一个公司，所以公司 1 和公司 2 不能同时租借会议中心，因为他们在第九天重合 了。\n\n销售主管为了公平起见，决定按照如下的程序来确定选择何种租借策略：首 先，将租借给客户数量最多的策略作为候选，将所有的公司按照他们发出请求的 顺序编号。对于候选策略，将策略中的每家公司的编号按升序排列。最后，选出 其中字典序最小1的候选策略作为最终的策略。\n\n例中，会堂最终将被租借给公司 1 和公司 3：3 个候选策略是 {(1,3),(2,3),(1,4)}。而在字典序中(1,3)<(1,4)<(2,3)。 你的任务是帮助销售主管确定应该将会堂租借给哪些公司。\n", "inputFormat": "输入的第一行有一个整数 N，表示发出租借会堂申请的公司的个数。第 2 到 第 N+1 行每行有 2 个整数。第 i+1 行的整数表示第 i 家公司申请租借的起始和终 止日期。对于每个公司的申请，起始日期为不小于 1 的整数，终止日期为不大于 10^9 的整数。\n", "outputFormat": "输出的第一行应有一个整数 M，表示最多可以租借给多少家公司。第二行应列出 M 个数，表示最终将会堂租借给哪些公司。\n", "hint": "对于 50%的输入，N≤3000。\n\n在所有输入中，N≤200000。\n", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2009] Conference Center", "background": "", "description": "The Siruseri government has built a new conference center. Many companies are interested in renting its hall and wish to hold meetings there.\n\nA client will rent the hall only if they can exclusively occupy the entire hall during their meeting. The sales manager believes the best strategy is to rent the hall to as many clients as possible.\n\nObviously, there may be more than one valid strategy. For example, consider the following case with 4 companies. They have requested to rent the hall with given start and end dates (as shown in the table below).\n\n```cpp\n       开始日期 结束日期 \n 公司1    4        9 \n 公司2    9        11 \n 公司3    13       19 \n 公司4    10       17 \n```\nIn this example, the hall can be rented to at most two companies. Possible strategies include renting to companies 1 and 3, companies 2 and 3, or companies 1 and 4. Note that the conference center can be rented to at most one company per day, so companies 1 and 2 cannot both rent the hall because they overlap on day 9.\n\nTo be fair, the sales manager decides to determine the final strategy as follows: first, consider all strategies that rent to the maximum number of clients; number all companies according to the order of their requests. For each candidate strategy, sort the selected company indices in ascending order. Finally, choose the lexicographically smallest candidate strategy as the final strategy.\n\nIn the example, the hall will be rented to companies 1 and 3: the 3 candidate strategies are {(1, 3), (2, 3), (1, 4)}, and in lexicographic order, (1, 3) < (1, 4) < (2, 3). Your task is to help the sales manager determine which companies should be granted the rental.", "inputFormat": "The first line contains an integer $N$, the number of companies that requested to rent the hall. Each of the next $N$ lines contains 2 integers. The integers on line $i + 1$ give the requested start and end dates for company $i$. For each request, the start date is an integer not less than 1, and the end date is an integer not greater than $10^9$.", "outputFormat": "The first line should contain an integer $M$, the maximum number of companies that can be served. The second line should list $M$ integers, indicating which companies will be granted the rental (in ascending order, forming the final strategy).", "hint": "- For 50% of the input, $N \\le 3000$.\n- For all inputs, $N \\le 200000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2009] 会议中心", "background": "", "description": "Siruseri 政府建造了一座新的会议中心。许多公司对租借会议中心的会堂很 感兴趣，他们希望能够在里面举行会议。\n\n对于一个客户而言，仅当在开会时能够独自占用整个会堂，他才会租借会堂。 会议中心的销售主管认为：最好的策略应该是将会堂租借给尽可能多的客户。\n\n显 然，有可能存在不止一种满足要求的策略。 例如下面的例子。总共有 4 个公司。他们对租借会堂发出了请求，并提出了 他们所需占用会堂的起止日期（如下表所示）。\n\n```cpp\n       开始日期 结束日期 \n 公司1    4        9 \n 公司2    9        11 \n 公司3    13       19 \n 公司4    10       17 \n```\n上例中，最多将会堂租借给两家公司。租借策略分别是租给公司 1 和公司 3， 或是公司 2 和公司 3，也可以是公司 1 和公司 4。注意会议中心一天最多租借给 一个公司，所以公司 1 和公司 2 不能同时租借会议中心，因为他们在第九天重合 了。\n\n销售主管为了公平起见，决定按照如下的程序来确定选择何种租借策略：首 先，将租借给客户数量最多的策略作为候选，将所有的公司按照他们发出请求的 顺序编号。对于候选策略，将策略中的每家公司的编号按升序排列。最后，选出 其中字典序最小1的候选策略作为最终的策略。\n\n例中，会堂最终将被租借给公司 1 和公司 3：3 个候选策略是 {(1,3),(2,3),(1,4)}。而在字典序中(1,3)<(1,4)<(2,3)。 你的任务是帮助销售主管确定应该将会堂租借给哪些公司。\n", "inputFormat": "输入的第一行有一个整数 N，表示发出租借会堂申请的公司的个数。第 2 到 第 N+1 行每行有 2 个整数。第 i+1 行的整数表示第 i 家公司申请租借的起始和终 止日期。对于每个公司的申请，起始日期为不小于 1 的整数，终止日期为不大于 10^9 的整数。\n", "outputFormat": "输出的第一行应有一个整数 M，表示最多可以租借给多少家公司。第二行应列出 M 个数，表示最终将会堂租借给哪些公司。\n", "hint": "对于 50%的输入，N≤3000。\n\n在所有输入中，N≤200000。\n", "locale": "zh-CN"}}}
{"pid": "P3627", "type": "P", "difficulty": 4, "samples": [["6 7 \n1 2 \n2 3 \n3 5 \n2 4 \n4 1 \n2 6 \n6 5 \n10 \n12 \n8 \n16 \n1 \n5 \n1 4 \n4 3 5 6", "47"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2009", "APIO", "强连通分量", "栈"], "title": "[APIO2009] 抢掠计划", "background": "", "description": "Siruseri 城中的道路都是单向的。不同的道路由路口连接。按照法律的规定，在每个路口都设立了一个 Siruseri 银行的 ATM 取款机。令人奇怪的是，Siruseri 的酒吧也都设在路口，虽然并不是每个路口都设有酒吧。  \n\nBanditji 计划实施 Siruseri 有史以来最惊天动地的 ATM 抢劫。他将从市中心出发，沿着单向道路行驶，抢劫所有他途径的 ATM 机，最终他将在一个酒吧庆祝他的胜利。  \n\n使用高超的黑客技术，他获知了每个 ATM 机中可以掠取的现金数额。他希望你帮助他计算从市中心出发最后到达某个酒吧时最多能抢劫的现金总数。他可以经过同一路口或道路任意多次。但只要他抢劫过某个 ATM 机后，该 ATM 机里面就不会再有钱了。 例如，假设该城中有 $6$ 个路口，道路的连接情况如下图所示：  \n\n![](https://cdn.luogu.com.cn/upload/pic/4396.png)  \n\n市中心在路口 $1$，由一个入口符号 → 来标识，那些有酒吧的路口用双圈来表示。每个 ATM 机中可取的钱数标在了路口的上方。在这个例子中，Banditji 能抢劫的现金总数为 $47$，实施的抢劫路线是：$1-2-4-1-2-3-5$。", "inputFormat": "第一行包含两个整数 $N,M$。$N$ 表示路口的个数，$M$ 表示道路条数。  \n\n接下来 $M$ 行，每行两个整数，这两个整数都在 $1$ 到 $N$ 之间，第 $i+1$ 行的两个整数表示第 $i$ 条道路的起点和终点的路口编号。  \n\n接下来 $N$ 行，每行一个整数，按顺序表示每个路口处的 ATM 机中的钱数 $a_i$。  \n\n接下来一行包含两个整数 $S,P$，$S$ 表示市中心的编号，也就是出发的路口。$P$ 表示酒吧数目。  \n\n接下来的一行中有 $P$ 个整数，表示 $P$ 个有酒吧的路口的编号。", "outputFormat": "输出一个整数，表示 Banditji 从市中心开始到某个酒吧结束所能抢劫的最多的现金总数。", "hint": "对于 $50\\%$ 的数据，保证 $N, M \\le 3000$。  \n\n对于 $100\\%$ 的数据，保证 $N, M \\le 5\\times 10^5$，$0 \\le a_i \\le 4000$。保证可以从市中心沿着 Siruseri 的单向的道路到达其中的至少一个酒吧。", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2009] Robbery Plan", "background": "", "description": "All roads in the city of Siruseri are one-way. Different roads are connected by intersections. By law, a Siruseri Bank ATM is installed at every intersection. Curiously, Siruseri’s bars are also located at intersections, although not every intersection has a bar.\n\nBanditji is planning the most spectacular ATM heist in the history of Siruseri. He will start from the city center, travel along one-way roads, rob all ATMs he passes, and finally celebrate his success at a bar.\n\nUsing advanced hacking skills, he has learned the amount of cash that can be looted from each ATM. He wants you to help him calculate the maximum total cash he can rob, starting from the city center and ending at some bar. He may pass through the same intersection or road any number of times. However, once he has robbed an ATM, that ATM will no longer have any money. For example, suppose the city has $6$ intersections, and the road connections are as shown below:\n\n![](https://cdn.luogu.com.cn/upload/pic/4396.png)\n\nThe city center is at intersection $1$, marked by an entry arrow symbol →, and intersections with bars are shown with double circles. The amount of money available at each ATM is labeled above its intersection. In this example, the maximum total cash Banditji can rob is $47$, and one optimal robbery route is: $1-2-4-1-2-3-5$.", "inputFormat": "The first line contains two integers $N,M$. Here $N$ is the number of intersections, and $M$ is the number of roads.\n\nThe next $M$ lines each contain two integers, both between $1$ and $N$. On the $(i+1)$-th line, the two integers denote the starting and ending intersection indices of the $i$-th road.\n\nThe next $N$ lines each contain one integer, in order, representing the amount of money $a_i$ available at the ATM on each intersection.\n\nThe next line contains two integers $S,P$. Here $S$ is the index of the city center, i.e., the starting intersection. $P$ is the number of bars.\n\nThe next line contains $P$ integers, denoting the indices of the $P$ intersections that have bars.", "outputFormat": "Output a single integer, the maximum total cash Banditji can rob when starting from the city center and ending at some bar.", "hint": "For $50\\%$ of the testdata, it is guaranteed that $N, M \\le 3000$.\n\nFor $100\\%$ of the testdata, it is guaranteed that $N, M \\le 5\\times 10^5$, $0 \\le a_i \\le 4000$. It is guaranteed that from the city center, along Siruseri’s one-way roads, at least one bar is reachable.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2009] 抢掠计划", "background": "", "description": "Siruseri 城中的道路都是单向的。不同的道路由路口连接。按照法律的规定，在每个路口都设立了一个 Siruseri 银行的 ATM 取款机。令人奇怪的是，Siruseri 的酒吧也都设在路口，虽然并不是每个路口都设有酒吧。  \n\nBanditji 计划实施 Siruseri 有史以来最惊天动地的 ATM 抢劫。他将从市中心出发，沿着单向道路行驶，抢劫所有他途径的 ATM 机，最终他将在一个酒吧庆祝他的胜利。  \n\n使用高超的黑客技术，他获知了每个 ATM 机中可以掠取的现金数额。他希望你帮助他计算从市中心出发最后到达某个酒吧时最多能抢劫的现金总数。他可以经过同一路口或道路任意多次。但只要他抢劫过某个 ATM 机后，该 ATM 机里面就不会再有钱了。 例如，假设该城中有 $6$ 个路口，道路的连接情况如下图所示：  \n\n![](https://cdn.luogu.com.cn/upload/pic/4396.png)  \n\n市中心在路口 $1$，由一个入口符号 → 来标识，那些有酒吧的路口用双圈来表示。每个 ATM 机中可取的钱数标在了路口的上方。在这个例子中，Banditji 能抢劫的现金总数为 $47$，实施的抢劫路线是：$1-2-4-1-2-3-5$。", "inputFormat": "第一行包含两个整数 $N,M$。$N$ 表示路口的个数，$M$ 表示道路条数。  \n\n接下来 $M$ 行，每行两个整数，这两个整数都在 $1$ 到 $N$ 之间，第 $i+1$ 行的两个整数表示第 $i$ 条道路的起点和终点的路口编号。  \n\n接下来 $N$ 行，每行一个整数，按顺序表示每个路口处的 ATM 机中的钱数 $a_i$。  \n\n接下来一行包含两个整数 $S,P$，$S$ 表示市中心的编号，也就是出发的路口。$P$ 表示酒吧数目。  \n\n接下来的一行中有 $P$ 个整数，表示 $P$ 个有酒吧的路口的编号。", "outputFormat": "输出一个整数，表示 Banditji 从市中心开始到某个酒吧结束所能抢劫的最多的现金总数。", "hint": "对于 $50\\%$ 的数据，保证 $N, M \\le 3000$。  \n\n对于 $100\\%$ 的数据，保证 $N, M \\le 5\\times 10^5$，$0 \\le a_i \\le 4000$。保证可以从市中心沿着 Siruseri 的单向的道路到达其中的至少一个酒吧。", "locale": "zh-CN"}}}
{"pid": "P3628", "type": "P", "difficulty": 6, "samples": [["4 \n-1 10 -20 \n2 2 3 4 ", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2010", "单调队列", "APIO", "斜率优化", "前缀和", "队列"], "title": "[APIO2010] 特别行动队", "background": null, "description": "你有一支由 $n$ 名预备役士兵组成的部队，士兵从 $1$ 到 $n$ 编号，你要将他们拆分成若干特别行动队调入战场。出于默契的考虑，同一支特别行动队中队员的编号**应该连续**，即为形如 $(i, i + 1, \\cdots,i + k)$ 的序列。所有的队员都应该属于且仅属于一支特别行动队。\n\n编号为 $i$ 的士兵的初始战斗力为 $x_i$，一支特别行动队的初始战斗力 $X$ 为队内士兵初始战斗力之和，即 $X = x_i + x_{i+1} + \\cdots + x_{i+k}$。\n\n通过长期的观察，你总结出对于一支初始战斗力为 $X$ 的特别行动队，其修正战斗力 $X'= aX^2+bX+c$，其中 $a,b,c$ 是已知的系数（$a < 0$）。 作为部队统帅，现在你要为这支部队进行编队，使得所有特别行动队的修正战斗力之和最大。试求出这个最大和。", "inputFormat": "输入的第一行是一个整数 $n$，代表士兵的人数。\n\n输入的第二行有三个用空格隔开的整数，依次代表 $a,b,c$，即修正战斗力的系数。\n\n输入的第三行有 $n$ 个用空格隔开的整数，第 $i$ 个整数代表编号为 $i$ 的士兵的初始战斗力 $x_i$。", "outputFormat": "输出一行一个整数，代表最大的所有特别行动队战斗力之和。", "hint": "#### 样例输入输出 $1$ 解释\n\n你有 $4$ 名士兵，$x_1 = 2,~x_2 = 2,~x_3 = 3,~x_4=4$。修正战斗力公式中的参数为  $a = -1,~b = 10,~c = -20$。\n\n此时，最佳方案是将士兵组成 $3$ 个特别行动队：第一队包含士兵 $1$ 和士兵 $2$，第二队包含士兵 $3$，第三队包含士兵 $4$。特别行动队的初始战斗力分别为 $4,~3,~4$，修正后的战斗力分别为 $-4^2 + 10 \\times 4 -20 = 4$，$-3^2 + 10 \\times 3 - 20 = 1$，$-4^2 + 10 \\times 4 -20 = 4$。修正后的战斗力和为 $4 + 1 + 4 = 9$，没有其它方案能使修正后的战斗力和更大。\n\n\n#### 数据范围与约定\n\n对于 $20\\%$ 的数据，$n \\leq 10^3$。\n\n对于 $50\\%$ 的数据，$n \\leq 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$，$-5 \\leq a \\leq -1$，$-10^7 \\leq b \\leq 10^7$，$-10^7 \\leq c \\leq 10^7$，$1 \\leq x_i \\leq 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2010] Commando", "background": "", "description": "You command a unit consisting of $n$ reserve soldiers, numbered from $1$ to $n$. You need to split them into several commando teams to be deployed to the battlefield. For teamwork reasons, the indices of the members within the same commando team must be consecutive, i.e., a sequence of the form $(i, i + 1, \\cdots,i + k)$. Every soldier must belong to exactly one commando team.\n\nThe initial combat power of soldier $i$ is $x_i$. The initial combat power $X$ of a commando team is the sum of the initial combat power of its members, i.e., $X = x_i + x_{i+1} + \\cdots + x_{i+k}$.\n\nFrom long-term observation, you have summarized that for a commando team with initial combat power $X$, its adjusted combat power is $X' = aX^2 + bX + c$, where $a, b, c$ are known coefficients ($a < 0$). As the commander, you must form the teams so that the sum of adjusted combat power over all commando teams is maximized. Find this maximum sum.", "inputFormat": "The first line contains an integer $n$, the number of soldiers.\n\nThe second line contains three space-separated integers, $a, b, c$, which are the coefficients of the adjusted combat power formula.\n\nThe third line contains $n$ space-separated integers, where the $i$-th integer is the initial combat power $x_i$ of soldier $i$.", "outputFormat": "Output a single integer on one line, the maximum possible sum of adjusted combat power over all commando teams.", "hint": "#### Explanation of Sample Input/Output 1\n\nYou have $4$ soldiers, $x_1 = 2,~x_2 = 2,~x_3 = 3,~x_4 = 4$. The parameters in the adjusted combat power formula are $a = -1,~b = 10,~c = -20$.\n\nThe optimal plan is to form $3$ commando teams: the first team contains soldiers $1$ and $2$, the second team contains soldier $3$, and the third team contains soldier $4$. The initial combat powers of the teams are $4,~3,~4$, and the adjusted combat powers are $-4^2 + 10 \\times 4 - 20 = 4$, $-3^2 + 10 \\times 3 - 20 = 1$, $-4^2 + 10 \\times 4 - 20 = 4$. The sum of adjusted combat powers is $4 + 1 + 4 = 9$, and no other plan yields a larger sum.\n\n#### Constraints\n\nFor $20\\%$ of the testdata, $n \\leq 10^3$.\n\nFor $50\\%$ of the testdata, $n \\leq 10^4$.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 10^6$, $-5 \\leq a \\leq -1$, $-10^7 \\leq b \\leq 10^7$, $-10^7 \\leq c \\leq 10^7$, $1 \\leq x_i \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2010] 特别行动队", "background": null, "description": "你有一支由 $n$ 名预备役士兵组成的部队，士兵从 $1$ 到 $n$ 编号，你要将他们拆分成若干特别行动队调入战场。出于默契的考虑，同一支特别行动队中队员的编号**应该连续**，即为形如 $(i, i + 1, \\cdots,i + k)$ 的序列。所有的队员都应该属于且仅属于一支特别行动队。\n\n编号为 $i$ 的士兵的初始战斗力为 $x_i$，一支特别行动队的初始战斗力 $X$ 为队内士兵初始战斗力之和，即 $X = x_i + x_{i+1} + \\cdots + x_{i+k}$。\n\n通过长期的观察，你总结出对于一支初始战斗力为 $X$ 的特别行动队，其修正战斗力 $X'= aX^2+bX+c$，其中 $a,b,c$ 是已知的系数（$a < 0$）。 作为部队统帅，现在你要为这支部队进行编队，使得所有特别行动队的修正战斗力之和最大。试求出这个最大和。", "inputFormat": "输入的第一行是一个整数 $n$，代表士兵的人数。\n\n输入的第二行有三个用空格隔开的整数，依次代表 $a,b,c$，即修正战斗力的系数。\n\n输入的第三行有 $n$ 个用空格隔开的整数，第 $i$ 个整数代表编号为 $i$ 的士兵的初始战斗力 $x_i$。", "outputFormat": "输出一行一个整数，代表最大的所有特别行动队战斗力之和。", "hint": "#### 样例输入输出 $1$ 解释\n\n你有 $4$ 名士兵，$x_1 = 2,~x_2 = 2,~x_3 = 3,~x_4=4$。修正战斗力公式中的参数为  $a = -1,~b = 10,~c = -20$。\n\n此时，最佳方案是将士兵组成 $3$ 个特别行动队：第一队包含士兵 $1$ 和士兵 $2$，第二队包含士兵 $3$，第三队包含士兵 $4$。特别行动队的初始战斗力分别为 $4,~3,~4$，修正后的战斗力分别为 $-4^2 + 10 \\times 4 -20 = 4$，$-3^2 + 10 \\times 3 - 20 = 1$，$-4^2 + 10 \\times 4 -20 = 4$。修正后的战斗力和为 $4 + 1 + 4 = 9$，没有其它方案能使修正后的战斗力和更大。\n\n\n#### 数据范围与约定\n\n对于 $20\\%$ 的数据，$n \\leq 10^3$。\n\n对于 $50\\%$ 的数据，$n \\leq 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$，$-5 \\leq a \\leq -1$，$-10^7 \\leq b \\leq 10^7$，$-10^7 \\leq c \\leq 10^7$，$1 \\leq x_i \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P3629", "type": "P", "difficulty": 6, "samples": [["8 1 \n1 2 \n3 1 \n3 4 \n5 3 \n7 5 \n8 5 \n5 6 ", "11"], ["8 2 \n1 2 \n3 1 \n3 4 \n5 3 \n7 5 \n8 5 \n5 6 ", "10"], ["5 2 \n1 2 \n2 3 \n3 4 \n4 5 ", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "2010", "APIO", "深度优先搜索 DFS", "树形 DP", "树的直径"], "title": "[APIO2010] 巡逻", "background": "", "description": "在一个地区中有 $n$ 个村庄，编号为 $1, 2, \\dots, n$。有 $n-1$ 条道路连接着这些村庄，每条道路刚好连接两个村庄，从任何一个村庄，都可以通过这些道路到达其他任何一个村庄。每条道路的长度均为 $1$ 个单位。为保证该地区的安全，巡警车每天要到所有的道路上巡逻。警察局设在编号为 $1$ 的村庄里，每天巡警车总是从警察局出发，最终又回到警察局。下图表示一个有 $8$ 个村庄的地区，其中村庄用圆表示（其中村庄 $1$ 用黑色的圆表示），道路是连接这些圆的线段。为了遍历所有的道路，巡警车需要走的距离为 $14$ 个单位，每条道路都需要经过两次。\n\n![](https://cdn.luogu.com.cn/upload/pic/4401.png)\n\n为了减少总的巡逻距离，该地区准备在这些村庄之间建立 $K$ 条新的道路，每条新道路可以连接任意两个村庄。两条新道路可以在同一个村庄会合或结束，如下面的图例 (c)。一条新道路甚至可以是一个环，即其两端连接到同一个村庄。由于资金有限，$K$ 只能是 $1$ 或 $2$。同时，为了不浪费资金，每天巡警车必须经过新建的道路正好一次。下图给出了一些建立新道路的例子：\n\n![](https://cdn.luogu.com.cn/upload/pic/4402.png) \n\n在 (a) 中，新建了一条道路，总的距离是 $11$。在 (b) 中，新建了两条道路，总的巡逻距离是 $10$。在 (c) 中，新建了两条道路，但由于巡警车要经过每条新道路正好一次，总的距离变为了 $15$。试编写一个程序，读取村庄间道路的信息和需要新建的道路数，计算出最佳的新建道路的方案使得总的巡逻距离最小，并输出这个最小的巡逻距离。\n\n", "inputFormat": "第一行包含两个整数 $n, K(1 ≤ K ≤ 2)$。接下来 $n-1$ 行，每行两个整数 $a,b$，表示村庄 $a$ 与 $b$ 之间有一条道路 $(1 ≤ a, b ≤ n)$。\n", "outputFormat": "输出一个整数，表示新建了 $K$ 条道路后能达到的最小巡逻距离。\n", "hint": "- $10\\%$ 的数据中，$1≤n≤1000,K=1$；\n- $30\\%$ 的数据中，$K=1$；\n- $80\\%$ 的数据中，每个村庄相邻的村庄数不超过 $25$；\n- $90\\%$ 的数据中，每个村庄相邻的村庄数不超过 $150$；\n- $100\\%$ 的数据中，$3≤n≤10^5,1≤K≤2$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2010] Patrol", "background": "", "description": "In a region, there are $n$ villages, numbered $1, 2, \\dots, n$. There are $n-1$ roads connecting these villages. Each road connects exactly two villages, and from any village you can reach any other village via these roads. Each road has length $1$ unit. To ensure safety, a patrol car must patrol all roads every day. The police station is located in village $1$. Every day the patrol car always starts from the police station and finally returns to the police station. The figure below shows a region with $8$ villages, where villages are represented by circles (village $1$ is the black circle) and roads are the line segments connecting the circles. To traverse all the roads, the patrol car needs to travel a distance of $14$ units, and each road must be traversed twice.\n\n![](https://cdn.luogu.com.cn/upload/pic/4401.png)\n\nTo reduce the total patrol distance, the region plans to build $K$ new roads between the villages, and each new road can connect any two villages. Two new roads may meet at or end at the same village, as in figure (c) below. A new road can even be a loop, i.e., both ends connect to the same village. Due to limited budget, $K$ can only be $1$ or $2$. Meanwhile, to avoid wasting funds, every day the patrol car must traverse each newly built road exactly once. The following are some examples:\n\n![](https://cdn.luogu.com.cn/upload/pic/4402.png)\n\nIn (a), one new road is built, and the total distance is $11$. In (b), two new roads are built, and the total patrol distance is $10$. In (c), two new roads are built, but since the patrol car must traverse each new road exactly once, the total distance becomes $15$. Write a program that reads the information about the roads between villages and the number of roads to be built, computes the best plan for adding new roads to minimize the total patrol distance, and outputs this minimum patrol distance.", "inputFormat": "The first line contains two integers $n, K(1 ≤ K ≤ 2)$. Then follow $n-1$ lines, each with two integers $a,b$, indicating that there is a road between villages $a$ and $b$ $(1 ≤ a, b ≤ n)$.", "outputFormat": "Output a single integer, the minimum total patrol distance after adding $K$ new roads.", "hint": "- In $10\\%$ of the testdata, $1≤n≤1000,K=1$.\n- In $30\\%$ of the testdata, $K=1$.\n- In $80\\%$ of the testdata, the number of adjacent villages for each village does not exceed $25$.\n- In $90\\%$ of the testdata, the number of adjacent villages for each village does not exceed $150$.\n- In $100\\%$ of the testdata, $3≤n≤10^5,1≤K≤2$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2010] 巡逻", "background": "", "description": "在一个地区中有 $n$ 个村庄，编号为 $1, 2, \\dots, n$。有 $n-1$ 条道路连接着这些村庄，每条道路刚好连接两个村庄，从任何一个村庄，都可以通过这些道路到达其他任何一个村庄。每条道路的长度均为 $1$ 个单位。为保证该地区的安全，巡警车每天要到所有的道路上巡逻。警察局设在编号为 $1$ 的村庄里，每天巡警车总是从警察局出发，最终又回到警察局。下图表示一个有 $8$ 个村庄的地区，其中村庄用圆表示（其中村庄 $1$ 用黑色的圆表示），道路是连接这些圆的线段。为了遍历所有的道路，巡警车需要走的距离为 $14$ 个单位，每条道路都需要经过两次。\n\n![](https://cdn.luogu.com.cn/upload/pic/4401.png)\n\n为了减少总的巡逻距离，该地区准备在这些村庄之间建立 $K$ 条新的道路，每条新道路可以连接任意两个村庄。两条新道路可以在同一个村庄会合或结束，如下面的图例 (c)。一条新道路甚至可以是一个环，即其两端连接到同一个村庄。由于资金有限，$K$ 只能是 $1$ 或 $2$。同时，为了不浪费资金，每天巡警车必须经过新建的道路正好一次。下图给出了一些建立新道路的例子：\n\n![](https://cdn.luogu.com.cn/upload/pic/4402.png) \n\n在 (a) 中，新建了一条道路，总的距离是 $11$。在 (b) 中，新建了两条道路，总的巡逻距离是 $10$。在 (c) 中，新建了两条道路，但由于巡警车要经过每条新道路正好一次，总的距离变为了 $15$。试编写一个程序，读取村庄间道路的信息和需要新建的道路数，计算出最佳的新建道路的方案使得总的巡逻距离最小，并输出这个最小的巡逻距离。\n\n", "inputFormat": "第一行包含两个整数 $n, K(1 ≤ K ≤ 2)$。接下来 $n-1$ 行，每行两个整数 $a,b$，表示村庄 $a$ 与 $b$ 之间有一条道路 $(1 ≤ a, b ≤ n)$。\n", "outputFormat": "输出一个整数，表示新建了 $K$ 条道路后能达到的最小巡逻距离。\n", "hint": "- $10\\%$ 的数据中，$1≤n≤1000,K=1$；\n- $30\\%$ 的数据中，$K=1$；\n- $80\\%$ 的数据中，每个村庄相邻的村庄数不超过 $25$；\n- $90\\%$ 的数据中，每个村庄相邻的村庄数不超过 $150$；\n- $100\\%$ 的数据中，$3≤n≤10^5,1≤K≤2$。\n", "locale": "zh-CN"}}}
{"pid": "P3630", "type": "P", "difficulty": 6, "samples": [["4\n0 2 \n4 4 \n0 0 \n2 0", "3.500 "]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2010", "APIO", "Special Judge", "枚举", "排序"], "title": "[APIO2010] 信号覆盖", "background": "", "description": "一家电信公司正在北京城搭建一个 GSM 网络。城市里共有 n 个房子需要被 信号覆盖。由于经费的限制，电信公司只能安装一个天线。 这里将每个房子用一个点坐标来表示。为了简化天线的放置，电信公司将会 选择其中的 3 个房子作一个外接圆，然后将天线放在圆的中心，所有位于这个圆 内或者圆的边界上的房子都将被天线的信号所覆盖。 电信公司将会随机选择城市中的 3 个房子来搭建天线，他们想知道在所有可 能放置天线的方案中平均会有多少个房子被信号覆盖。 例如，假设共有 4 个房子 A, B, C, D，它们的位置如下图：\n\n  ![](https://cdn.luogu.com.cn/upload/pic/4405.png) \n\n如果我们选择ABC或者BCD三个点搭建的外接圆，所有的房子都会被覆盖。 如果我们选择 ACD 或者 ABD，剩下的房子将不会在天线的信号覆盖范围内。因 此平均有(4 + 4 + 3 + 3) / 4 = 3.50 个房子被信号覆盖。 给定所有房子的位置，你的任务是计算平均有多少个房子被信号覆盖。假定 每一个房子都有一个二维的整数坐标，并且保证任何三个房子都不在同一条直线 上，任何四个房子都不在同一个圆上。\n", "inputFormat": "输入第一行包含一个正整数 n, 表示房子的总数。接下来有 n 行，分别表示 每一个房子的位置。对于 i = 1, 2, .., n, 第 i 个房子的坐标用一对整数 xi和 yi来表 示，中间用空格隔开。\n", "outputFormat": "输出文件包含一个实数，表示平均有多少个房子被信号所覆盖，需保证输出 结果与精确值的绝对误差不超过 0.01。\n", "hint": "【样例说明】\n\n3.5, 3.50, 3.500, … 中的任何一个输出均为正确。此外，3.49, 3.51, 3.499999，…等也都是可被接受的输出。\n\n【数据范围】\n\n100%的数据保证，对于 i = 1, 2, .., n, 第 i 个房子的坐标(xi, yi)为整数且 –1,000,000 ≤ xi, yi ≤ 1,000,000. 任何三个房子不在同一条直线上，任何四个房子不 在同一个圆上；\n\n40%的数据，n ≤ 100；\n\n70%的数据，n ≤ 500；\n\n100%的数据，3 ≤ n ≤ 1,500。\n", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2010] Signal Coverage", "background": "", "description": "A telecom company is building a GSM network in Beijing. There are $n$ houses in the city that need signal coverage. Due to budget constraints, the company can install only one antenna. Each house is represented by a point in the plane.\n\nTo simplify placement, the company will choose 3 houses and take their circumcircle, then place the antenna at the center of that circle. Every house that lies on or inside this circle will be covered by the antenna.\n\nThe company will choose 3 houses uniformly at random from all houses in the city. They want to know, over all possible antenna placements, the average number of houses that will be covered.\n\nFor example, suppose there are 4 houses $A, B, C, D$, positioned as in the figure:\n\n![](https://cdn.luogu.com.cn/upload/pic/4405.png)\n\nIf we choose the circumcircle of $A, B, C$ or $B, C, D$, then all houses are covered. If we choose $A, C, D$ or $A, B, D$, the remaining house will not be covered. Therefore, the average is $(4 + 4 + 3 + 3) / 4 = 3.50$.\n\nGiven the positions of all houses, your task is to compute the average number of houses covered. Assume every house has integer 2D coordinates, no three houses are collinear, and no four houses are cocircular.", "inputFormat": "The first line contains a positive integer $n$, the total number of houses. The next $n$ lines describe the positions of the houses. For $i = 1, 2, \\ldots, n$, the $i$-th house has coordinates given by a pair of integers $x_i$ and $y_i$, separated by a space.", "outputFormat": "Output a real number: the average number of houses covered by the antenna. The absolute error from the exact value must not exceed $0.01$.", "hint": "Sample note:\n\nAny of 3.5, 3.50, 3.500, … is correct. In addition, 3.49, 3.51, 3.499999, … are also acceptable.\n\nConstraints:\n\n- For all $i = 1, 2, \\ldots, n$, the coordinates $(x_i, y_i)$ are integers and $-1{,}000{,}000 \\le x_i, y_i \\le 1{,}000{,}000$. No three houses are collinear, and no four houses are cocircular.\n- 40% of the testdata: $n \\le 100$.\n- 70% of the testdata: $n \\le 500$.\n- 100% of the testdata: $3 \\le n \\le 1{,}500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2010] 信号覆盖", "background": "", "description": "一家电信公司正在北京城搭建一个 GSM 网络。城市里共有 n 个房子需要被 信号覆盖。由于经费的限制，电信公司只能安装一个天线。 这里将每个房子用一个点坐标来表示。为了简化天线的放置，电信公司将会 选择其中的 3 个房子作一个外接圆，然后将天线放在圆的中心，所有位于这个圆 内或者圆的边界上的房子都将被天线的信号所覆盖。 电信公司将会随机选择城市中的 3 个房子来搭建天线，他们想知道在所有可 能放置天线的方案中平均会有多少个房子被信号覆盖。 例如，假设共有 4 个房子 A, B, C, D，它们的位置如下图：\n\n  ![](https://cdn.luogu.com.cn/upload/pic/4405.png) \n\n如果我们选择ABC或者BCD三个点搭建的外接圆，所有的房子都会被覆盖。 如果我们选择 ACD 或者 ABD，剩下的房子将不会在天线的信号覆盖范围内。因 此平均有(4 + 4 + 3 + 3) / 4 = 3.50 个房子被信号覆盖。 给定所有房子的位置，你的任务是计算平均有多少个房子被信号覆盖。假定 每一个房子都有一个二维的整数坐标，并且保证任何三个房子都不在同一条直线 上，任何四个房子都不在同一个圆上。\n", "inputFormat": "输入第一行包含一个正整数 n, 表示房子的总数。接下来有 n 行，分别表示 每一个房子的位置。对于 i = 1, 2, .., n, 第 i 个房子的坐标用一对整数 xi和 yi来表 示，中间用空格隔开。\n", "outputFormat": "输出文件包含一个实数，表示平均有多少个房子被信号所覆盖，需保证输出 结果与精确值的绝对误差不超过 0.01。\n", "hint": "【样例说明】\n\n3.5, 3.50, 3.500, … 中的任何一个输出均为正确。此外，3.49, 3.51, 3.499999，…等也都是可被接受的输出。\n\n【数据范围】\n\n100%的数据保证，对于 i = 1, 2, .., n, 第 i 个房子的坐标(xi, yi)为整数且 –1,000,000 ≤ xi, yi ≤ 1,000,000. 任何三个房子不在同一条直线上，任何四个房子不 在同一个圆上；\n\n40%的数据，n ≤ 100；\n\n70%的数据，n ≤ 500；\n\n100%的数据，3 ≤ n ≤ 1,500。\n", "locale": "zh-CN"}}}
{"pid": "P3631", "type": "P", "difficulty": 6, "samples": [["3 4 3\n2 2 1\n1 2 0\n2 3 1", "8"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2011", "并查集", "APIO", "枚举", "位运算"], "title": "[APIO2011] 方格染色", "background": "", "description": "Sam 和他的妹妹 Sara 有一个包含 $n \\times m$ 个方格的表格。他们想要将其中的每个方格都染成红色或蓝色。出于个人喜好，他们想要表格中每个 $2 \\times 2$ 的方形区域都包含奇数个（ $1$ 个或 $3$ 个）红色方格。例如，下面是一个合法的表格染色方案（`R` 代表红色，`B` 代表蓝色）：\n```\nB B R B R\nR B B B B\nR R B R B\n```\n可是昨天晚上，有人已经给表格中的一些方格染上了颜色！现在 Sam 和 Sara 非常生气。不过，他们想要知道是否可能给剩下的方格染上颜色，使得整个表格依然满足他们的要求。如果可能的话，满足他们要求的染色方案数有多少呢？", "inputFormat": "输入的第一行包含三个整数 $n,m,k$，分别代表表格的行数，列数和已被染色的方格数目。\n\n之后的 $k$ 行描述已被染色的方格。其中第i行包含三个整数 $x_i,y_i,c_i$，分表代表第 $i$ 个已被染色的方格的行编号、列编号和颜色。$c_i$ 为 $1$ 表示方格被染成红色，$c_i$ 为 $0$ 表示方格被染成蓝色。", "outputFormat": "输出一个整数，表示可能的染色方案数 $w$ 对于 $10^9$ 取模后得到的值。\n", "hint": "对于 $20\\%$ 的测试数据，$n,m,k \\leqslant 5$。\n\n对于 $50\\%$ 的测试数据，$n,m \\leqslant 5000$，$k \\leqslant 25$。\n\n对于 $100\\%$ 的测试数据，$2 \\leqslant n,m \\leqslant 10^5$，$0 \\leqslant k \\leqslant 10^5$，$1 \\leqslant x_i \\leqslant n$，$1 \\leqslant y_i \\leqslant m$，$\\forall c_i \\in \\{0,1\\}$。", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2011] Grid Coloring", "background": "", "description": "Sam and his sister Sara have a grid with $n \\times m$ cells. They want to color each cell either red or blue. Due to personal preference, they want every $2 \\times 2$ square in the grid to contain an odd number ($1$ or $3$) of red cells. For example, the following is a valid coloring (R stands for red, B stands for blue):\n```\nB B R B R\nR B B B B\nR R B R B\n```\nHowever, last night, someone already colored some cells! Now Sam and Sara are very upset. Still, they want to know whether it is possible to color the remaining cells so that the entire grid still satisfies their requirement. If it is possible, how many such colorings are there?", "inputFormat": "The first line contains three integers $n, m, k$, representing the number of rows, the number of columns, and the number of precolored cells, respectively.\n\nThe next $k$ lines describe the precolored cells. The $i$-th line contains three integers $x_i, y_i, c_i$, representing the row index, the column index, and the color of the $i$-th precolored cell, respectively. $c_i = 1$ means the cell is red, and $c_i = 0$ means the cell is blue.", "outputFormat": "Output a single integer: the value of $w$ modulo $10^9$, where $w$ is the number of valid colorings.", "hint": "For $20\\%$ of the testdata, $n, m, k \\leqslant 5$.\n\nFor $50\\%$ of the testdata, $n, m \\leqslant 5000$, $k \\leqslant 25$.\n\nFor $100\\%$ of the testdata, $2 \\leqslant n, m \\leqslant 10^5$, $0 \\leqslant k \\leqslant 10^5$, $1 \\leqslant x_i \\leqslant n$, $1 \\leqslant y_i \\leqslant m$, $\\forall c_i \\in \\{0, 1\\}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2011] 方格染色", "background": "", "description": "Sam 和他的妹妹 Sara 有一个包含 $n \\times m$ 个方格的表格。他们想要将其中的每个方格都染成红色或蓝色。出于个人喜好，他们想要表格中每个 $2 \\times 2$ 的方形区域都包含奇数个（ $1$ 个或 $3$ 个）红色方格。例如，下面是一个合法的表格染色方案（`R` 代表红色，`B` 代表蓝色）：\n```\nB B R B R\nR B B B B\nR R B R B\n```\n可是昨天晚上，有人已经给表格中的一些方格染上了颜色！现在 Sam 和 Sara 非常生气。不过，他们想要知道是否可能给剩下的方格染上颜色，使得整个表格依然满足他们的要求。如果可能的话，满足他们要求的染色方案数有多少呢？", "inputFormat": "输入的第一行包含三个整数 $n,m,k$，分别代表表格的行数，列数和已被染色的方格数目。\n\n之后的 $k$ 行描述已被染色的方格。其中第i行包含三个整数 $x_i,y_i,c_i$，分表代表第 $i$ 个已被染色的方格的行编号、列编号和颜色。$c_i$ 为 $1$ 表示方格被染成红色，$c_i$ 为 $0$ 表示方格被染成蓝色。", "outputFormat": "输出一个整数，表示可能的染色方案数 $w$ 对于 $10^9$ 取模后得到的值。\n", "hint": "对于 $20\\%$ 的测试数据，$n,m,k \\leqslant 5$。\n\n对于 $50\\%$ 的测试数据，$n,m \\leqslant 5000$，$k \\leqslant 25$。\n\n对于 $100\\%$ 的测试数据，$2 \\leqslant n,m \\leqslant 10^5$，$0 \\leqslant k \\leqslant 10^5$，$1 \\leqslant x_i \\leqslant n$，$1 \\leqslant y_i \\leqslant m$，$\\forall c_i \\in \\{0,1\\}$。", "locale": "zh-CN"}}}
{"pid": "P3632", "type": "P", "difficulty": 6, "samples": [["2\n\n1 7 7 8\n2\n2 5 3 8\n4 10 6 7\n\n2 1 5 4\n1\n3 1 4 3\n", "9\nNo Path\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2011", "APIO", "最短路"], "title": "[APIO2011] 寻路", "background": "", "description": "TooDee 是一块二维格子状的土地（就像著名的笛卡尔坐标系那样），在这里生活着很多可爱的 Dee。Dee 是像蜜蜂一样的小动物，它们只在二维活动，而且他们非常的 文明开化。TooDee 的蜂窝和正常世界的蜂窝也是很不一样的，他们是矩形的且它们的边平行于 TooDee 的地理坐标系，就是说矩形的边或者是东西走向， 或者是南北走向。\n\n因为 Dees 是很高级的生物，他们有很多固定的飞行轨道，这些轨道由一些平行于坐标轴的线段组成，线段只会在经纬度都是整数的点相交。Dee 在 TooDee 飞行时必须遵守以下规则（请记住 TooDee 中所有点的经纬度都是整数）：\n\n1. 如果当前在点 $(X, Y)$，则下一步只能飞到四个邻点 $(X, Y - 1), (X, Y + 1), (X - 1, Y), (X + 1, Y)$；\n\n2. 不可以进入蜂巢；\n\n3. 只能在蜂巢的角上或者边上改变飞行方向；\n\n4. 开始的时候可以向任何方向飞；\n\n今晚是公共财政大臣 Deeficer 的女儿的生日，她想尽早回家，请帮她找到最快的回家路径。假设她每秒可以飞行一个单位的距离。", "inputFormat": "每个测试点包含多组数据。\n\n输入的第一行包含一个整数 $T$，表示测试数据的组数。接下来依次描述这 $T$ 组数据，相邻的两组之间使用一个空行分隔，测试数据不多于 $20$ 组。\n\n对 于每组数据，第一行包含四个整数 $x_s,y_s,x_t,y_t$，表示 Deeficer 的办公室和家的坐标分别是 $(x_s, y_s)$ 和 $(x_t, y_t)$。第二行包含一个整数 $n$，表示蜂巢的个数。接下来的 $n$ 行描述所有的蜂巢，其中第 $i$ 行包含四个整数 $x_{i_1}, y_{i_1}, x_{i_2}, y_{i_2}$，表示第 $i$ 个蜂巢两个对角的坐标分别为 $(x_{i_1}, y_{i_1})$ 和 $(x_{i_2}, y_{i_2})$。\n\n任何两个蜂巢不会相交，也不会接触（在角上也不会接触）。办公室和家处在不同的位置。每个蜂巢的面积为正。", "outputFormat": "对于每一组数据，输出一个整数，表示 Deeficer 最快回家的时间（单位为秒），如果她无法按规则回家，则输出 `No Path`。\n", "hint": "对于 $20\\%$ 的测试数据，$n\\leq 10$，所有的坐标都是小于 $100$ 的非负整数；\n\n对于 $60\\%$ 的测试数据，$n\\leq 100$，所有坐标的绝对值都小于 $10^3$；\n\n对于 $100\\%$ 的测试数据，$0\\leq n\\leq 10^3$，所有坐标的绝对值都是不超过 $10^9$ 的整数。", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2011] Pathfinding", "background": "", "description": "TooDee is a two-dimensional grid-like land (just like the well-known Cartesian coordinate system), home to many adorable Dees. Dees are small bee-like creatures that move only in 2D, and they are very civilized and advanced. The hives in TooDee are quite different from those in the ordinary world: they are rectangles whose sides are parallel to TooDee’s geographic coordinate axes, meaning each rectangle’s sides run either east–west or north–south.\n\nBecause Dees are advanced beings, they have many fixed flight corridors. These corridors are composed of axis-parallel line segments, and line segments intersect only at points whose coordinates are integers. When a Dee flies in TooDee, it must follow the rules below (remember that in TooDee all points have integer coordinates):\n\n1. If currently at point $(X, Y)$, the next step may go only to one of the four neighboring points $(X, Y - 1), (X, Y + 1), (X - 1, Y), (X + 1, Y)$.\n2. Entering a hive is not allowed.\n3. A change of direction is allowed only at a hive’s corners or along its edges.\n4. At the start, one may fly in any direction.\n\nTonight is the birthday of the daughter of the Minister of Public Finance, Deeficer. She wants to get home as soon as possible. Please help her find the fastest route home. Assume she can fly a distance of 1 unit per second.", "inputFormat": "Each test file contains multiple test cases.\n\nThe first line contains an integer $T$, the number of test cases. Then the $T$ test cases follow, with a blank line separating consecutive cases. There are at most $20$ test cases.\n\nFor each test case, the first line contains four integers $x_s, y_s, x_t, y_t$, meaning the coordinates of Deeficer’s office and home are $(x_s, y_s)$ and $(x_t, y_t)$, respectively. The second line contains an integer $n$, the number of hives. The next $n$ lines describe all hives; on the $i$-th of these lines there are four integers $x_{i_1}, y_{i_1}, x_{i_2}, y_{i_2}$, giving the coordinates of two opposite corners of the $i$-th hive as $(x_{i_1}, y_{i_1})$ and $(x_{i_2}, y_{i_2})$.\n\nNo two hives intersect or touch (not even at a corner). The office and home are at different locations. Each hive has positive area.", "outputFormat": "For each test case, output one integer: the minimum time (in seconds) for Deeficer to get home. If she cannot get home under the rules, output `No Path`.", "hint": "For $20\\%$ of the testdata, $n\\leq 10$, and all coordinates are non-negative integers less than $100$.\n\nFor $60\\%$ of the testdata, $n\\leq 100$, and the absolute value of every coordinate is less than $10^3$.\n\nFor $100\\%$ of the testdata, $0\\leq n\\leq 10^3$, and the absolute value of every coordinate is at most $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2011] 寻路", "background": "", "description": "TooDee 是一块二维格子状的土地（就像著名的笛卡尔坐标系那样），在这里生活着很多可爱的 Dee。Dee 是像蜜蜂一样的小动物，它们只在二维活动，而且他们非常的 文明开化。TooDee 的蜂窝和正常世界的蜂窝也是很不一样的，他们是矩形的且它们的边平行于 TooDee 的地理坐标系，就是说矩形的边或者是东西走向， 或者是南北走向。\n\n因为 Dees 是很高级的生物，他们有很多固定的飞行轨道，这些轨道由一些平行于坐标轴的线段组成，线段只会在经纬度都是整数的点相交。Dee 在 TooDee 飞行时必须遵守以下规则（请记住 TooDee 中所有点的经纬度都是整数）：\n\n1. 如果当前在点 $(X, Y)$，则下一步只能飞到四个邻点 $(X, Y - 1), (X, Y + 1), (X - 1, Y), (X + 1, Y)$；\n\n2. 不可以进入蜂巢；\n\n3. 只能在蜂巢的角上或者边上改变飞行方向；\n\n4. 开始的时候可以向任何方向飞；\n\n今晚是公共财政大臣 Deeficer 的女儿的生日，她想尽早回家，请帮她找到最快的回家路径。假设她每秒可以飞行一个单位的距离。", "inputFormat": "每个测试点包含多组数据。\n\n输入的第一行包含一个整数 $T$，表示测试数据的组数。接下来依次描述这 $T$ 组数据，相邻的两组之间使用一个空行分隔，测试数据不多于 $20$ 组。\n\n对 于每组数据，第一行包含四个整数 $x_s,y_s,x_t,y_t$，表示 Deeficer 的办公室和家的坐标分别是 $(x_s, y_s)$ 和 $(x_t, y_t)$。第二行包含一个整数 $n$，表示蜂巢的个数。接下来的 $n$ 行描述所有的蜂巢，其中第 $i$ 行包含四个整数 $x_{i_1}, y_{i_1}, x_{i_2}, y_{i_2}$，表示第 $i$ 个蜂巢两个对角的坐标分别为 $(x_{i_1}, y_{i_1})$ 和 $(x_{i_2}, y_{i_2})$。\n\n任何两个蜂巢不会相交，也不会接触（在角上也不会接触）。办公室和家处在不同的位置。每个蜂巢的面积为正。", "outputFormat": "对于每一组数据，输出一个整数，表示 Deeficer 最快回家的时间（单位为秒），如果她无法按规则回家，则输出 `No Path`。\n", "hint": "对于 $20\\%$ 的测试数据，$n\\leq 10$，所有的坐标都是小于 $100$ 的非负整数；\n\n对于 $60\\%$ 的测试数据，$n\\leq 100$，所有坐标的绝对值都小于 $10^3$；\n\n对于 $100\\%$ 的测试数据，$0\\leq n\\leq 10^3$，所有坐标的绝对值都是不超过 $10^9$ 的整数。", "locale": "zh-CN"}}}
{"pid": "P3633", "type": "P", "difficulty": 5, "samples": [["2\n12\nSI ME AND AI ARE MD AS WHEN ED IS DE HAPY\n5\nA B AB AC AD", "Yes\nNo"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["博弈论", "2011", "APIO"], "title": "[APIO2011] 猜单词", "background": "", "description": "“猜单词”是一个双人游戏，在伊朗的青年学生中广为流行。假设有两个游戏者A和B，A作为先手，首先在一个双方都知道的语料库中选出一个单词，并记在脑海中。随后，他在一张小纸片上划下与单词字母数相等的小横线（不妨设为n条）。\n\n接下来，B尝试猜出这个单词。每一轮，B选择一个字母并告诉A。A按如下规则回应：\n\n一、若B所说的字母在单词中出现，A就把它写在对应的横线上。如果整个单词已经完整（所有的字母都已经被猜出），B获胜。\n\n二、否则，如果字母没有在单词中出现，A就把它写在最左侧的下方仍为空白的横线下。如果所有横线下的空白处都已经有字母（也就是说，在这一轮前B已经猜了n个错误字母），那么B就输了，A获胜。\n\n例如，A从语料库中选出了单词RED，且B已经依次猜了字母A，E，C，D，B和R。每一步的结果都在下图中展现，最终B获胜。但如果B在最后一步猜了S而不是R，他就输了。\n\n```cpp\n\n- - - （第一步，B选A）\nA\n\n  E \n- - - （第二步，B选E）\nA\n\n  E\n- - - （第三步，B选C）\nA C\n\n  E D\n- - - （第四步，B选D）\nA C\n\n  E D\n- - - （第五步，B选B）\nA C B\n\nR E D\n- - - （第六步，B选R）\nA C B\n```\nAidin 是猜单词游戏迷。他相信，如果给定的语料库足够大，且其中的单词相对好，那么玩家A（先手）可以采取一种不公平的行动——修改选择的单词。也就是说，既然 玩家A只将单词记在脑海中而不写下来，那他能够在游戏过程中随时变化这个单词，只要使得和当前已经给出的结果依然一致即可。例如，在上面的游戏中，如果单 词RED，BED，LED和TED都在语料库中，那么在第4步之后，A就可以确信他将胜利。他将总是把B给出的字母写在横线下（也就是认定其为错误的字 母），那么每一次他将至多在集合{RED，BED，LED，TED}中失去一个备选单词，最终他将向B宣布：“这个单词是，嗯……”，然后再他的集合中说 出一个剩下的单词。\n\nAidin想，如果语料库足够好，那么A甚至可能在游戏一开始就确定获胜。例如，如果选择的单词长度为2，而集合{ME，MD，DE，ED，AS，IS，AI，SI}中的单词都在语料库中，那么A总能获胜。请自己找出A获胜的策略。\n\n给定一个语料库，Aidin想知道是否无论B如何进行游戏，玩家A一定能获胜？\n\n请注意在任何一次游戏结束时，如果A获胜，A需要能够给出一个语料库中的单词作为被选出的单词，这个单词应当与A所有给出的回答一致。\n", "inputFormat": "输入包含若干个语料库，每个语料库应该被独立地处理。\n\n输入的第一行是一个整数C，代表语料库的数目。随后C个语料库以C个模块的形式出现在输入中，每两个模块之间以一个空行隔开。1<=C<=20。\n\n对于每个输入模块，第一行包含一个正整数k，表示语料库中单词的个数。接下来的若干行中包含k个单词。相邻的单词以空格、制表符或换行符分隔。每个单词由小于7个大写英语字母组成。\n\n每个单词都由不同的字母组成，也就是说，同一个字母在一个单词中出现的次数不会超过一次。\n", "outputFormat": "对于每个语料库，如果玩家A有必胜策略（也就是说，不论B按什么办法猜，A总能获胜），输出一行“Yes”。否则输出一行“No”。输出不包含引号。\n", "hint": "对于20%的测试数据，k<=100，每个单词的长度不超过3。\n\n对于50%的测试数据，k<=300，每个单词的长度不超过4。\n\n对于100%的测试数据，k<=1000。输入文件小于500KB。\n", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2011] Guess the Word", "background": "", "description": "“Guess the Word” is a two-player game popular among young students in Iran. Suppose there are two players, A and B. A moves first and secretly chooses a word from a corpus known to both players, remembering it in his mind. Then he draws a row of short dashes on a small piece of paper, as many as the number of letters in the word (say $n$ dashes).\n\nNext, B tries to guess the word. In each round, B chooses a letter and tells A. A responds according to the following rules:\n\n1. If the letter B said appears in the word, A writes it on the corresponding dashes. If the entire word becomes complete (all letters have been guessed), B wins.\n\n2. Otherwise, if the letter does not appear in the word, A writes it below the leftmost dash whose underneath is still blank. If all the positions below the dashes are already filled (that is, before this round, B has already guessed $n$ wrong letters), then B loses and A wins.\n\nFor example, A chose the word RED from the corpus, and B has guessed the letters A, E, C, D, B, and R in order. The outcome of each step is shown below, and B wins in the end. But if B had guessed S instead of R in the last step, he would have lost.\n\n```cpp\n\n- - - （第一步，B选A）\nA\n\n  E \n- - - （第二步，B选E）\nA\n\n  E\n- - - （第三步，B选C）\nA C\n\n  E D\n- - - （第四步，B选D）\nA C\n\n  E D\n- - - （第五步，B选B）\nA C B\n\nR E D\n- - - （第六步，B选R）\nA C B\n```\nAidin is a fan of the Guess the Word game. He believes that if the given corpus is large enough and its words are “nice,” player A (the first mover) can take an unfair action—changing the chosen word. That is, since player A keeps the word only in his mind and does not write it down, he can change the word at any time during the game, as long as all current revealed information remains consistent. For example, in the game above, if the words RED, BED, LED, and TED are all in the corpus, then after the 4th move, A can be sure he will win. He will always write B’s letters under the dashes (i.e., treat them as wrong letters), so each time he loses at most one candidate from the set {RED, BED, LED, TED}. Finally, he will announce to B: “The word is, uh…,” and then name one of the remaining words in his set.\n\nAidin wonders whether, if the corpus is good enough, A can even be certain of victory from the very beginning. For example, if the word length is 2 and all words in the set {ME, MD, DE, ED, AS, IS, AI, SI} are in the corpus, then A can always win. Please find a winning strategy for A yourself.\n\nGiven a corpus, Aidin wants to know whether player A is guaranteed to win no matter how B plays.\n\nNote that at the end of any game, if A wins, A must be able to name a word from the corpus as the chosen word, and this word must be consistent with all of A’s responses.", "inputFormat": "The input contains several corpora, each of which should be processed independently.\n\nThe first line contains an integer C, the number of corpora. Then C corpora follow, each as a separate module, and modules are separated by one empty line. 1 ≤ C ≤ 20.\n\nFor each module, the first line contains a positive integer k, the number of words in the corpus. The next lines contain k words. Adjacent words are separated by spaces, tabs, or newlines. Each word consists of fewer than 7 uppercase English letters.\n\nEach word consists of distinct letters; that is, no letter appears more than once in a single word.", "outputFormat": "For each corpus, if player A has a guaranteed winning strategy (that is, no matter how B guesses, A can always win), output a line “Yes”. Otherwise, output a line “No”. Do not include quotes.", "hint": "- For 20% of the testdata, k ≤ 100, and each word’s length is at most 3.\n- For 50% of the testdata, k ≤ 300, and each word’s length is at most 4.\n- For 100% of the testdata, k ≤ 1000. The input file is smaller than 500 KB.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2011] 猜单词", "background": "", "description": "“猜单词”是一个双人游戏，在伊朗的青年学生中广为流行。假设有两个游戏者A和B，A作为先手，首先在一个双方都知道的语料库中选出一个单词，并记在脑海中。随后，他在一张小纸片上划下与单词字母数相等的小横线（不妨设为n条）。\n\n接下来，B尝试猜出这个单词。每一轮，B选择一个字母并告诉A。A按如下规则回应：\n\n一、若B所说的字母在单词中出现，A就把它写在对应的横线上。如果整个单词已经完整（所有的字母都已经被猜出），B获胜。\n\n二、否则，如果字母没有在单词中出现，A就把它写在最左侧的下方仍为空白的横线下。如果所有横线下的空白处都已经有字母（也就是说，在这一轮前B已经猜了n个错误字母），那么B就输了，A获胜。\n\n例如，A从语料库中选出了单词RED，且B已经依次猜了字母A，E，C，D，B和R。每一步的结果都在下图中展现，最终B获胜。但如果B在最后一步猜了S而不是R，他就输了。\n\n```cpp\n\n- - - （第一步，B选A）\nA\n\n  E \n- - - （第二步，B选E）\nA\n\n  E\n- - - （第三步，B选C）\nA C\n\n  E D\n- - - （第四步，B选D）\nA C\n\n  E D\n- - - （第五步，B选B）\nA C B\n\nR E D\n- - - （第六步，B选R）\nA C B\n```\nAidin 是猜单词游戏迷。他相信，如果给定的语料库足够大，且其中的单词相对好，那么玩家A（先手）可以采取一种不公平的行动——修改选择的单词。也就是说，既然 玩家A只将单词记在脑海中而不写下来，那他能够在游戏过程中随时变化这个单词，只要使得和当前已经给出的结果依然一致即可。例如，在上面的游戏中，如果单 词RED，BED，LED和TED都在语料库中，那么在第4步之后，A就可以确信他将胜利。他将总是把B给出的字母写在横线下（也就是认定其为错误的字 母），那么每一次他将至多在集合{RED，BED，LED，TED}中失去一个备选单词，最终他将向B宣布：“这个单词是，嗯……”，然后再他的集合中说 出一个剩下的单词。\n\nAidin想，如果语料库足够好，那么A甚至可能在游戏一开始就确定获胜。例如，如果选择的单词长度为2，而集合{ME，MD，DE，ED，AS，IS，AI，SI}中的单词都在语料库中，那么A总能获胜。请自己找出A获胜的策略。\n\n给定一个语料库，Aidin想知道是否无论B如何进行游戏，玩家A一定能获胜？\n\n请注意在任何一次游戏结束时，如果A获胜，A需要能够给出一个语料库中的单词作为被选出的单词，这个单词应当与A所有给出的回答一致。\n", "inputFormat": "输入包含若干个语料库，每个语料库应该被独立地处理。\n\n输入的第一行是一个整数C，代表语料库的数目。随后C个语料库以C个模块的形式出现在输入中，每两个模块之间以一个空行隔开。1<=C<=20。\n\n对于每个输入模块，第一行包含一个正整数k，表示语料库中单词的个数。接下来的若干行中包含k个单词。相邻的单词以空格、制表符或换行符分隔。每个单词由小于7个大写英语字母组成。\n\n每个单词都由不同的字母组成，也就是说，同一个字母在一个单词中出现的次数不会超过一次。\n", "outputFormat": "对于每个语料库，如果玩家A有必胜策略（也就是说，不论B按什么办法猜，A总能获胜），输出一行“Yes”。否则输出一行“No”。输出不包含引号。\n", "hint": "对于20%的测试数据，k<=100，每个单词的长度不超过3。\n\n对于50%的测试数据，k<=300，每个单词的长度不超过4。\n\n对于100%的测试数据，k<=1000。输入文件小于500KB。\n", "locale": "zh-CN"}}}
{"pid": "P3634", "type": "P", "difficulty": 6, "samples": [["5 3 4 \n1 2 1 \n3 4 1 \n4 4 0 \n4 5 1", "3\n5\n"], ["5 1 1 \n1 5 1", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2012", "线段树", "APIO", "差分"], "title": "[APIO2012] 守卫", "background": "APIO 王国正被忍者攻击！忍者非常厉害，因为他们在进攻的时候可以躲在 阴影里面使得其他人看不到他们。整个王国除了国王居住的 APIO 城堡以外都已经被占领了。", "description": "在城堡前，有 $N$ 个灌木丛，从 $1$ 到 $N$ 编号，有 $K$ 个忍者躲在恰好 $K$ 个灌木丛后面。\n\nAPIO 城堡里有 $M$ 个守卫。守卫 $i$ 监视着编号从 $A_i$ 到 $B_i$ 的连续的一段灌木丛。每个守卫都向国王报告在他所监视范围内是否有忍者出现。\n\n作为国王的仆人，你需要告诉国王，基于守卫的报告，哪些灌木丛后面一定躲着一个忍者，即对于任何和守卫报告不矛盾的忍者排列方式，在这个灌木丛后面都躲着一个忍者。\n\n输出所有的这些灌木丛的编号。", "inputFormat": "第一行包含三个用空格分隔的整数 $N, K, M$。$N$ 是灌木丛的个数，$K$ 是忍者 的个数，$M$ 是守卫的个数。\n\n接下来 $M$ 行，每行描述一个守卫的信息。其中的第 $i$ 行包含三个整数 $A_i, B_i, C_i$，表示第 $i$ 个守卫的监视范围是从 $A_i$ 到 $B_i(A_i \\leq B_i)$。$C_i$ 是 $0$ 或者 $1$，若是 $0$ 表示范围内没有看到忍者，$1$ 表示范围内有至少一个忍者。\n\n输入数据保证至少存在一种忍者排列方式满足所有条件。", "outputFormat": "若存在灌木丛，在其后面一定躲着忍者，则将这些灌木丛按照编号从小到大的顺序依次输出，每个一行。即若有 $X$ 个这样的灌木丛，则需要输出 $X$ 行。\n\n若不存在，则输出一行一个 `-1`。", "hint": "#### 【样例说明 $1$】\n\n在这个样例中，有两种可能的安排方式：$1,3,5$ 或者 $2,3,5$。即 $3$ 和 $5$ 后面必然躲着一个忍者。考虑第一个灌木丛，存在一种安排方案使得它的后面躲着忍者，但也存在一种安排方案使得它后面没有躲忍者，因此不应该输出 $1$。同理，不应该输出 $2$。\n\n#### 【样例说明 $2$】\n\n在这个样例中，没有灌木丛后面一定躲着忍者。\n\n#### 数据范围\n\n$1 \\leq N \\leq 10^5$；$1 \\leq K \\leq N$；$0 \\leq M < 10^5$。\n\n \n对于 $10\\%$ 的数据，$N \\leq 20， M \\leq 100$；\n\n对于 $50\\%$ 的数据，$N \\leq 1000， M \\leq 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2012] Guard", "background": "The APIO Kingdom is under attack by ninjas! Ninjas are very skilled, because during their attack they can hide in the shadows so that others cannot see them. The entire kingdom has been occupied except for the APIO castle where the king resides.", "description": "In front of the castle, there are $N$ bushes, numbered from $1$ to $N$. There are $K$ ninjas hiding behind exactly $K$ bushes.\n\nThere are $M$ guards in the APIO castle. Guard $i$ watches a contiguous segment of bushes numbered from $A_i$ to $B_i$. Each guard reports to the king whether there is a ninja within their monitored range.\n\nAs the king’s servant, you need to tell the king, based on the guards’ reports, which bushes must contain a ninja; that is, for any placement of ninjas that is consistent with the reports, there is a ninja behind that bush.\n\nOutput all such bush indices.", "inputFormat": "The first line contains three space-separated integers $N, K, M$. $N$ is the number of bushes, $K$ is the number of ninjas, and $M$ is the number of guards.\n\nThe next $M$ lines each describe one guard. The $i$-th line contains three integers $A_i, B_i, C_i$, meaning that the $i$-th guard monitors the range from $A_i$ to $B_i$ (with $A_i \\leq B_i$). $C_i$ is $0$ or $1$: $0$ means no ninja is seen within the range; $1$ means there is at least one ninja within the range.\n\nThe input guarantees that at least one placement of ninjas satisfies all constraints.", "outputFormat": "If there exist bushes that must contain a ninja, output their indices in increasing order, one per line. If there are $X$ such bushes, output $X$ lines.\n\nOtherwise, output a single line containing `-1`.", "hint": "#### Sample Explanation $1$\n\nIn this sample, there are two possible placements: $1, 3, 5$ or $2, 3, 5$. Therefore, $3$ and $5$ must contain a ninja. For bush $1$, there exists a placement where it has a ninja and another where it does not, so $1$ should not be output. Similarly, $2$ should not be output.\n\n#### Sample Explanation $2$\n\nIn this sample, no bush is guaranteed to contain a ninja.\n\n#### Constraints\n\n$1 \\leq N \\leq 10^5$; $1 \\leq K \\leq N$; $0 \\leq M < 10^5$.\n\nFor $10\\%$ of the testdata, $N \\leq 20$, $M \\leq 100$.\n\nFor $50\\%$ of the testdata, $N \\leq 1000$, $M \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2012] 守卫", "background": "APIO 王国正被忍者攻击！忍者非常厉害，因为他们在进攻的时候可以躲在 阴影里面使得其他人看不到他们。整个王国除了国王居住的 APIO 城堡以外都已经被占领了。", "description": "在城堡前，有 $N$ 个灌木丛，从 $1$ 到 $N$ 编号，有 $K$ 个忍者躲在恰好 $K$ 个灌木丛后面。\n\nAPIO 城堡里有 $M$ 个守卫。守卫 $i$ 监视着编号从 $A_i$ 到 $B_i$ 的连续的一段灌木丛。每个守卫都向国王报告在他所监视范围内是否有忍者出现。\n\n作为国王的仆人，你需要告诉国王，基于守卫的报告，哪些灌木丛后面一定躲着一个忍者，即对于任何和守卫报告不矛盾的忍者排列方式，在这个灌木丛后面都躲着一个忍者。\n\n输出所有的这些灌木丛的编号。", "inputFormat": "第一行包含三个用空格分隔的整数 $N, K, M$。$N$ 是灌木丛的个数，$K$ 是忍者 的个数，$M$ 是守卫的个数。\n\n接下来 $M$ 行，每行描述一个守卫的信息。其中的第 $i$ 行包含三个整数 $A_i, B_i, C_i$，表示第 $i$ 个守卫的监视范围是从 $A_i$ 到 $B_i(A_i \\leq B_i)$。$C_i$ 是 $0$ 或者 $1$，若是 $0$ 表示范围内没有看到忍者，$1$ 表示范围内有至少一个忍者。\n\n输入数据保证至少存在一种忍者排列方式满足所有条件。", "outputFormat": "若存在灌木丛，在其后面一定躲着忍者，则将这些灌木丛按照编号从小到大的顺序依次输出，每个一行。即若有 $X$ 个这样的灌木丛，则需要输出 $X$ 行。\n\n若不存在，则输出一行一个 `-1`。", "hint": "#### 【样例说明 $1$】\n\n在这个样例中，有两种可能的安排方式：$1,3,5$ 或者 $2,3,5$。即 $3$ 和 $5$ 后面必然躲着一个忍者。考虑第一个灌木丛，存在一种安排方案使得它的后面躲着忍者，但也存在一种安排方案使得它后面没有躲忍者，因此不应该输出 $1$。同理，不应该输出 $2$。\n\n#### 【样例说明 $2$】\n\n在这个样例中，没有灌木丛后面一定躲着忍者。\n\n#### 数据范围\n\n$1 \\leq N \\leq 10^5$；$1 \\leq K \\leq N$；$0 \\leq M < 10^5$。\n\n \n对于 $10\\%$ 的数据，$N \\leq 20， M \\leq 100$；\n\n对于 $50\\%$ 的数据，$N \\leq 1000， M \\leq 1000$。", "locale": "zh-CN"}}}
