{"pid": "P14746", "type": "P", "difficulty": 3, "samples": [["4 2\n7 4 5 11\n", "14\n"], ["5 3\n3 -4 -2 0 4\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2025", "O2优化", "高校校赛", "线性 DP"], "title": "下午茶时光", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/fvhwzemj.png?x-oss-process=image/resize,h_250)\n\n###### Pixiv:みこフライ\n\n~~等我严肃地 AC 了这题，就严肃地去喝下午茶。~~", "description": "在某个悠闲的下午，Furai 面前摆着 $n$ 块精致的小点心，排成一列。第 $i$ 块点心的“甜蜜值”为 $a_i$（可能是负数，意味着不太好吃）。\n\nFurai 可以任选一些点心来组合（也可以一个都不选）。把选中的点心下标按从小到大排序后，显然会形成若干段连续的区间组合。\n例如：选中点心的下标 $2,3,4,7,8$，会形成两段区间组合：$[2,4]$ 和 $[7,8]$；选中点心的下标 $5,6,7$，就是一段区间组合 $[5,7]$；如果一个都不选，则没有区间组合。\n\n对于每一个区间组合 $[L,R]$ 中，Furai 会重新按顺序给每个点心一个编号，也就是 $1,2,...,R-L+1$，她只打算认真品尝编号为奇数的点心（获得对应的“甜蜜值”），而编号为偶数的点心只是为了让组合看起来更丰富，实际上她并不吃它们（因此不计“甜蜜值”）。\n\n每次开始品尝一个新的组合，Furai 都需要花费 $C$ 的“甜蜜值”来调整心情。\n\n这次下午茶时光的总“甜蜜值”是所有区间组合的“甜蜜值”之和。\n\n虽然 Furai 肯定吃不完这么多点心，但是她还是希望知道能得到的最大“甜蜜值”。", "inputFormat": "第一行两个正整数 $n,C\\ (1\\le n\\le3\\times10^5,1\\le C\\le10^9)$，表示点心数量和每次开始品尝新组合的花费。\n\n第二行 $n$ 个整数，第 $i$ 个整数为 $a_i\\ (-10^9\\le a_i\\le10^9)$，表示第 $i$ 个点心的“甜蜜值”。", "outputFormat": "输出一个整数，表示 Furai 能得到的最大总“甜蜜值”。", "hint": "对于第一组样例，Furai 需要选择 $a_1,a_4$，也就是区间组合 $[1,1],[4,4]$ 来获得最大总“甜蜜值”：$7-2+11-2=14$。\n\n对于第二组样例，她需要选择 $a_1,a_2,a_3,a_4,a_5$，也就是区间组合 $[1,5]$，这次她不得不吃掉一个不太好吃的点心 $a_3$，才能获得最大总“甜蜜值”：$3+(-2)+4-3=2$。可以证明没有更大的总“甜蜜值”。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "下午茶时光", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/fvhwzemj.png?x-oss-process=image/resize,h_250)\n\n###### Pixiv:みこフライ\n\n~~等我严肃地 AC 了这题，就严肃地去喝下午茶。~~", "description": "在某个悠闲的下午，Furai 面前摆着 $n$ 块精致的小点心，排成一列。第 $i$ 块点心的“甜蜜值”为 $a_i$（可能是负数，意味着不太好吃）。\n\nFurai 可以任选一些点心来组合（也可以一个都不选）。把选中的点心下标按从小到大排序后，显然会形成若干段连续的区间组合。\n例如：选中点心的下标 $2,3,4,7,8$，会形成两段区间组合：$[2,4]$ 和 $[7,8]$；选中点心的下标 $5,6,7$，就是一段区间组合 $[5,7]$；如果一个都不选，则没有区间组合。\n\n对于每一个区间组合 $[L,R]$ 中，Furai 会重新按顺序给每个点心一个编号，也就是 $1,2,...,R-L+1$，她只打算认真品尝编号为奇数的点心（获得对应的“甜蜜值”），而编号为偶数的点心只是为了让组合看起来更丰富，实际上她并不吃它们（因此不计“甜蜜值”）。\n\n每次开始品尝一个新的组合，Furai 都需要花费 $C$ 的“甜蜜值”来调整心情。\n\n这次下午茶时光的总“甜蜜值”是所有区间组合的“甜蜜值”之和。\n\n虽然 Furai 肯定吃不完这么多点心，但是她还是希望知道能得到的最大“甜蜜值”。", "inputFormat": "第一行两个正整数 $n,C\\ (1\\le n\\le3\\times10^5,1\\le C\\le10^9)$，表示点心数量和每次开始品尝新组合的花费。\n\n第二行 $n$ 个整数，第 $i$ 个整数为 $a_i\\ (-10^9\\le a_i\\le10^9)$，表示第 $i$ 个点心的“甜蜜值”。", "outputFormat": "输出一个整数，表示 Furai 能得到的最大总“甜蜜值”。", "hint": "对于第一组样例，Furai 需要选择 $a_1,a_4$，也就是区间组合 $[1,1],[4,4]$ 来获得最大总“甜蜜值”：$7-2+11-2=14$。\n\n对于第二组样例，她需要选择 $a_1,a_2,a_3,a_4,a_5$，也就是区间组合 $[1,5]$，这次她不得不吃掉一个不太好吃的点心 $a_3$，才能获得最大总“甜蜜值”：$3+(-2)+4-3=2$。可以证明没有更大的总“甜蜜值”。", "locale": "zh-CN"}}}
{"pid": "P14747", "type": "P", "difficulty": 1, "samples": [["BrotherCall\nBrotherCalI\n", "YES\n"], ["revclos\nrevolcs\n", "NO"], ["aabIlIlIlIl\naabIIIllllI", "YES"], ["Il\nIl", "YES\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "2025", "Special Judge", "O2优化", "高校校赛"], "title": "相似字符串", "background": "", "description": "`I`（大写的 `i`）和 `l`（小写的 `L`）这两个字符看起来非常相似。\n\n定义两个字符串是相似的，当且仅当认为字符 `I` 和 `l` 相同的情况下这两个字符串相同。\n\n现在给你两个长度相同的字符串，你需要判断这两个字符串是否是相似的。", "inputFormat": "输入共两行，每行一个仅由大小写字母组成的字符串。\n\n保证两个字符串的长度相同且不超过 $20$。", "outputFormat": "输出一行一个字符串，若两个字符串是相似的，输出 `YES`，否则输出 `NO`（不区分大小写）。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "相似字符串", "background": "", "description": "`I`（大写的 `i`）和 `l`（小写的 `L`）这两个字符看起来非常相似。\n\n定义两个字符串是相似的，当且仅当认为字符 `I` 和 `l` 相同的情况下这两个字符串相同。\n\n现在给你两个长度相同的字符串，你需要判断这两个字符串是否是相似的。", "inputFormat": "输入共两行，每行一个仅由大小写字母组成的字符串。\n\n保证两个字符串的长度相同且不超过 $20$。", "outputFormat": "输出一行一个字符串，若两个字符串是相似的，输出 `YES`，否则输出 `NO`（不区分大小写）。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14748", "type": "P", "difficulty": 6, "samples": [["3 3\n4\n100\n110\n101\n111", "001\n110\n111\n000"], ["10 8\n3\n11010110\n01001110\n10100001", "00001010\n11001100\n11001010"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "O2优化", "Ad-hoc", "高校校赛", "bitset"], "title": "点灯游戏", "background": "", "description": "NIT 正沉迷于做点灯游戏，点灯游戏是在一个 $n$ 行 $m$ 列的矩阵中，每个格子都有一个灯，NIT 要想办法将所有灯点亮，初始每个灯都是暗的。\n\nNIT 可以选择任意个灯将它们依次翻转，翻转一个灯的时候这个灯和它的相邻的上下左右一共五个灯都会同时变化。即亮变暗，暗变亮。\n\n点灯游戏有一个非常棒的做法：只要确定了第一行，那就可以确定第二行，一直到第 $n$ 行，若第 $n$ 行灯全亮了那就成功。\n\nNIT 觉得这东西一定有规律，于是 NIT 想要通过\"打表\"找出规律。于是 NIT 开始了枚举，NIT 不断的枚举第一行的选法。为了加速 NIT 的解题过程，你决定帮助 NIT。\n\n给出 $q$ 个询问，每个询问给出第一行 NIT 的选法，你给出最后一行灯的状态。\n\n形式化的说，你需要使得第一行的操作为 NIT 选定的操作，其他地方的操作自选，使得第 $1$ 至 $n-1$ 行的灯全亮。\n\n然后输出第 $n$ 行灯的状态，可以证明此时第 $n$ 行灯的状态是唯一的。", "inputFormat": "第一行两个正整数 $n, m\\ (2\\leq n\\leq 3\\times10^5, 1\\leq m\\leq 3000)$ 表示 NIT 正在解决的点灯游戏的行数和列数。\n\n接下来一行一个整数 $q\\ (1\\leq q\\leq 100)$，表示询问数量。\n\n接下来 $q$ 行每行 $m$ 个字符，表示一次询问，第 $i$ 个字符为 $0$ 表示 NIT 不准备翻转第一行第 $i$ 个灯，为 $1$ 表示 NIT 准备翻转第一行第 $i$ 个灯。", "outputFormat": "输出 $q$ 行，每行 $m$ 个字符，第 $i$ 个字符表示经过操作后第 $n$ 行第 $i$ 列的灯的状态，$0$ 表示暗，$1$ 表示亮。", "hint": "样例 $1$ 第 $1$ 问解释：\n\nNIT 翻转了第一行第一列的灯，于是灯的状态就变成了\n\n|$1$|$1$|$0$|\n|:-:|:-:|:-:|\n|$1$|$0$|$0$|\n|$0$|$0$|$0$|\n\n不难发现，为了使得第一行和第二行都亮，需要此时翻转第二行第三列的灯，于是灯的状态变成\n\n|$1$|$1$|$1$|\n|:-:|:-:|:-:|\n|$1$|$1$|$1$|\n|$0$|$0$|$1$|\n\n于是输出第三行灯的状态 $001$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "点灯游戏", "background": "", "description": "NIT 正沉迷于做点灯游戏，点灯游戏是在一个 $n$ 行 $m$ 列的矩阵中，每个格子都有一个灯，NIT 要想办法将所有灯点亮，初始每个灯都是暗的。\n\nNIT 可以选择任意个灯将它们依次翻转，翻转一个灯的时候这个灯和它的相邻的上下左右一共五个灯都会同时变化。即亮变暗，暗变亮。\n\n点灯游戏有一个非常棒的做法：只要确定了第一行，那就可以确定第二行，一直到第 $n$ 行，若第 $n$ 行灯全亮了那就成功。\n\nNIT 觉得这东西一定有规律，于是 NIT 想要通过\"打表\"找出规律。于是 NIT 开始了枚举，NIT 不断的枚举第一行的选法。为了加速 NIT 的解题过程，你决定帮助 NIT。\n\n给出 $q$ 个询问，每个询问给出第一行 NIT 的选法，你给出最后一行灯的状态。\n\n形式化的说，你需要使得第一行的操作为 NIT 选定的操作，其他地方的操作自选，使得第 $1$ 至 $n-1$ 行的灯全亮。\n\n然后输出第 $n$ 行灯的状态，可以证明此时第 $n$ 行灯的状态是唯一的。", "inputFormat": "第一行两个正整数 $n, m\\ (2\\leq n\\leq 3\\times10^5, 1\\leq m\\leq 3000)$ 表示 NIT 正在解决的点灯游戏的行数和列数。\n\n接下来一行一个整数 $q\\ (1\\leq q\\leq 100)$，表示询问数量。\n\n接下来 $q$ 行每行 $m$ 个字符，表示一次询问，第 $i$ 个字符为 $0$ 表示 NIT 不准备翻转第一行第 $i$ 个灯，为 $1$ 表示 NIT 准备翻转第一行第 $i$ 个灯。", "outputFormat": "输出 $q$ 行，每行 $m$ 个字符，第 $i$ 个字符表示经过操作后第 $n$ 行第 $i$ 列的灯的状态，$0$ 表示暗，$1$ 表示亮。", "hint": "样例 $1$ 第 $1$ 问解释：\n\nNIT 翻转了第一行第一列的灯，于是灯的状态就变成了\n\n|$1$|$1$|$0$|\n|:-:|:-:|:-:|\n|$1$|$0$|$0$|\n|$0$|$0$|$0$|\n\n不难发现，为了使得第一行和第二行都亮，需要此时翻转第二行第三列的灯，于是灯的状态变成\n\n|$1$|$1$|$1$|\n|:-:|:-:|:-:|\n|$1$|$1$|$1$|\n|$0$|$0$|$1$|\n\n于是输出第三行灯的状态 $001$。", "locale": "zh-CN"}}}
{"pid": "P14749", "type": "P", "difficulty": 1, "samples": [["Brother Call Accepted\n", "Brother Call\n"], ["Call Brother Rejected\n", "Brother Call\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "O2优化", "高校校赛"], "title": "名字取好了", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/fq7d33vz.png?x-oss-process=image/resize,m_lfit,h_300,w_350)\n\n13 点 52 分，伟大 whx 教练看到学生们在 ICPC 报名网站上填反姓和名的情况超级无敌暴怒，登上全美热搜。\n\n就在今年，东秦 ACM 队为学校打出了前无古人的整整 20 队次的参赛名额，whx 超级激动狂喜。\n\n然而就在 ICPC 官网报名通道关闭前，教练核对最终名单时，眼前一黑——有一些队员的姓和名，在系统里是完全倒着写的！\n\n现在给你原网站上的 first name，last name，接收状态（只有 Accepted 和 Rejected 两种结果），求改正后的姓名结果。", "inputFormat": "读入共一行，三个字符串，用空格隔开，分别代表原网站上的 first name，last name，接收状态。\n\n字符串长度均不超过 $1000$。", "outputFormat": "输出共一行，代表改正后的 first name，last name。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "名字取好了", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/fq7d33vz.png?x-oss-process=image/resize,m_lfit,h_300,w_350)\n\n13 点 52 分，伟大 whx 教练看到学生们在 ICPC 报名网站上填反姓和名的情况超级无敌暴怒，登上全美热搜。\n\n就在今年，东秦 ACM 队为学校打出了前无古人的整整 20 队次的参赛名额，whx 超级激动狂喜。\n\n然而就在 ICPC 官网报名通道关闭前，教练核对最终名单时，眼前一黑——有一些队员的姓和名，在系统里是完全倒着写的！\n\n现在给你原网站上的 first name，last name，接收状态（只有 Accepted 和 Rejected 两种结果），求改正后的姓名结果。", "inputFormat": "读入共一行，三个字符串，用空格隔开，分别代表原网站上的 first name，last name，接收状态。\n\n字符串长度均不超过 $1000$。", "outputFormat": "输出共一行，代表改正后的 first name，last name。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14750", "type": "P", "difficulty": 4, "samples": [["2\n\n2\n\n3\n\n1\n\n10\n\n7\n\n", "\n? 2 2\n\n? 3 2\n\n! 520\n\n? 2 1\n\n? 10 6\n\n? 7 2\n\n! 1314"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "交互题", "Special Judge", "O2优化", "高校校赛"], "title": "月影戀", "background": ":::epigraph[——月雩 & 影怿，2022.4.17]\n皓**月**千里，静**影**沉璧——故事的开始总是美好的  \n:::\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rfe93eo3.png)\n:::align{center}\n*“浮浮泻星渚，萧萧沉残云。无期踯躅夜，与卿话香薰。”——月雩，《壬寅上巳有感》*\n:::\n\n小 Y 和小 L 是一对情侣。少女的心思总是捉摸不透的，这让小 Y 非常苦恼。于是他准备求助作为恋爱大师的你来帮助他猜出小 L 的心思。", "description": "这是一道**交互题**。\n\n具体来说，有一个神秘的正整数 $h\\ (1\\le h < 2^{60})$，你需要通过不超过 $\\lfloor \\log_2 h\\rfloor+3$ 次询问来猜出这个数。每次询问可以向小 L 提出两个数字 $a$ 和 $b\\ (1\\le a, b < 2^{61})$，她会告诉你 $\\gcd(a, h + b)$ 的值。\n\n**交互库是非自适应的**。也就是说，$h$ 在交互开始前就已经固定。\n\n注：\n\n- $\\lfloor x \\rfloor$ 代表不超过 $x$ 的最大整数，例如 $\\lfloor 1.1 \\rfloor=1,\\ \\lfloor 2.0 \\rfloor=2$。\n\n- $\\gcd(a,b)$ 代表 $a$ 和 $b$ 的最大公因数，例如 $\\gcd(10,15)=5$。\n\n### 交互格式\n\n每次询问输出 `? a b`，代表你向小 L 询问的数，之后读入一个数 $g$ 代表 $\\gcd(a, h + b)$。\n\n如果你已经猜出了这个神秘数 $h$，输出 `! h`，代表你的答案。\n\n每次输出之后，你需要清空缓冲区，清空输出缓冲区可以使用以下方式：\n\n- C/C++：`fflush(stdout)`（如果您使用 `printf`），`cout.flush() ` 或 `cout << endl`（如果您使用 `cout`）\n\n- Java：`System.out.flush() `\n\n- Pascal：`flush(output)`\n\n- Python：`sys.stdout.flush()`\n\n交互格式示例：\n\n```cpp\ncout << \"? \" << a << \" \" << b << '\\n';//一次询问\ncout.flush();//刷新缓冲区\nlong long g; cin >> g;//读入g\ncout << \"! \" << h << '\\n';//输出答案\ncout.flush();//刷新缓冲区\n```", "inputFormat": "本题有多组数据。第一行一个正整数 $T\\ (1\\le T\\le10^3)$，表示数据组数。\n\n对于每组数据：\n\n见「交互格式」。", "outputFormat": "对于每组数据：\n\n见「交互格式」。", "hint": "注：样例仅展示交互格式。\n\n如果返回的 $h$ 不正确，会判为 Wrong Answer。\n\n如果询问的数 $a$ 或 $b$ 不在 [1, $2^{61}$) 范围内，可能会被判为 Wrong Answer 或 Time Limit Exceeded。\n\n如果询问次数超过 $\\lfloor \\log_2 h\\rfloor+3$ 次，会判为 Wrong Answer 或 Time Limit Exceeded，所以请一定要及时返回答案。\n\n---\n\n**结语：**\n\n但故事总会结束。\n\n> 飞花不似当年，胜似当年。  \n> 新愁哀怨醉亭前，一轮**孤月**，一行飞雁  \n> ——月雩, 乙巳(2025)年九月二十三日作", "locale": "zh-CN", "translations": {"zh-CN": {"title": "月影戀", "background": ":::epigraph[——月雩 & 影怿，2022.4.17]\n皓**月**千里，静**影**沉璧——故事的开始总是美好的  \n:::\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rfe93eo3.png)\n:::align{center}\n*“浮浮泻星渚，萧萧沉残云。无期踯躅夜，与卿话香薰。”——月雩，《壬寅上巳有感》*\n:::\n\n小 Y 和小 L 是一对情侣。少女的心思总是捉摸不透的，这让小 Y 非常苦恼。于是他准备求助作为恋爱大师的你来帮助他猜出小 L 的心思。", "description": "这是一道**交互题**。\n\n具体来说，有一个神秘的正整数 $h\\ (1\\le h < 2^{60})$，你需要通过不超过 $\\lfloor \\log_2 h\\rfloor+3$ 次询问来猜出这个数。每次询问可以向小 L 提出两个数字 $a$ 和 $b\\ (1\\le a, b < 2^{61})$，她会告诉你 $\\gcd(a, h + b)$ 的值。\n\n**交互库是非自适应的**。也就是说，$h$ 在交互开始前就已经固定。\n\n注：\n\n- $\\lfloor x \\rfloor$ 代表不超过 $x$ 的最大整数，例如 $\\lfloor 1.1 \\rfloor=1,\\ \\lfloor 2.0 \\rfloor=2$。\n\n- $\\gcd(a,b)$ 代表 $a$ 和 $b$ 的最大公因数，例如 $\\gcd(10,15)=5$。\n\n### 交互格式\n\n每次询问输出 `? a b`，代表你向小 L 询问的数，之后读入一个数 $g$ 代表 $\\gcd(a, h + b)$。\n\n如果你已经猜出了这个神秘数 $h$，输出 `! h`，代表你的答案。\n\n每次输出之后，你需要清空缓冲区，清空输出缓冲区可以使用以下方式：\n\n- C/C++：`fflush(stdout)`（如果您使用 `printf`），`cout.flush() ` 或 `cout << endl`（如果您使用 `cout`）\n\n- Java：`System.out.flush() `\n\n- Pascal：`flush(output)`\n\n- Python：`sys.stdout.flush()`\n\n交互格式示例：\n\n```cpp\ncout << \"? \" << a << \" \" << b << '\\n';//一次询问\ncout.flush();//刷新缓冲区\nlong long g; cin >> g;//读入g\ncout << \"! \" << h << '\\n';//输出答案\ncout.flush();//刷新缓冲区\n```", "inputFormat": "本题有多组数据。第一行一个正整数 $T\\ (1\\le T\\le10^3)$，表示数据组数。\n\n对于每组数据：\n\n见「交互格式」。", "outputFormat": "对于每组数据：\n\n见「交互格式」。", "hint": "注：样例仅展示交互格式。\n\n如果返回的 $h$ 不正确，会判为 Wrong Answer。\n\n如果询问的数 $a$ 或 $b$ 不在 [1, $2^{61}$) 范围内，可能会被判为 Wrong Answer 或 Time Limit Exceeded。\n\n如果询问次数超过 $\\lfloor \\log_2 h\\rfloor+3$ 次，会判为 Wrong Answer 或 Time Limit Exceeded，所以请一定要及时返回答案。\n\n---\n\n**结语：**\n\n但故事总会结束。\n\n> 飞花不似当年，胜似当年。  \n> 新愁哀怨醉亭前，一轮**孤月**，一行飞雁  \n> ——月雩, 乙巳(2025)年九月二十三日作", "locale": "zh-CN"}}}
{"pid": "P14751", "type": "P", "difficulty": 2, "samples": [["1 1\n1\n10", "9"], ["2 3\n4 8\n2 5\n2 99\n1 7", "91"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2025", "O2优化", "高校校赛"], "title": "醒来之后，我回到了汰换系统更新前", "background": "下楼买烟之后，我重生了，我回到了 CS2 汰换系统更新前一天。", "description": "现在我仓库里有 $n$ 个物品，每个物品的购入价为 $v_{i}$，我清楚的记得接下来 $m$ 天里每个物品的价格 $w_{i}$，而我现在所需要做的，就是最大化我的收益，但是我不希望任何一个物品有亏损，如果没办法盈利，我将把这个物品留下来，这个物品不会计入盈亏，我一定要活下去口牙。（在本题中，所有物品只允许卖出。）", "inputFormat": "第一行两个正整数 $n,m\\ (1\\le n\\le 100,1\\le m\\le 100)$，表示物品数量以及天数。\n\n第二行包含 $n$ 个正整数，第 $i$ 个正整数为 $v_{i}\\ (1\\le v_{i}\\le 10^7)$，表示第 $i$ 个物品的购入价格。\n\n接下来 $m$ 行每行 $n$ 个正整数，第 $i$ 行第 $j$ 个正整数为 $w_{i,j}\\ (1\\le w_{i,j}\\le 10^7)$，表示第 $i$ 天第 $j$ 个物品的价格。", "outputFormat": "一行一个正整数，表示我最终的最大收益。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "醒来之后，我回到了汰换系统更新前", "background": "下楼买烟之后，我重生了，我回到了 CS2 汰换系统更新前一天。", "description": "现在我仓库里有 $n$ 个物品，每个物品的购入价为 $v_{i}$，我清楚的记得接下来 $m$ 天里每个物品的价格 $w_{i}$，而我现在所需要做的，就是最大化我的收益，但是我不希望任何一个物品有亏损，如果没办法盈利，我将把这个物品留下来，这个物品不会计入盈亏，我一定要活下去口牙。（在本题中，所有物品只允许卖出。）", "inputFormat": "第一行两个正整数 $n,m\\ (1\\le n\\le 100,1\\le m\\le 100)$，表示物品数量以及天数。\n\n第二行包含 $n$ 个正整数，第 $i$ 个正整数为 $v_{i}\\ (1\\le v_{i}\\le 10^7)$，表示第 $i$ 个物品的购入价格。\n\n接下来 $m$ 行每行 $n$ 个正整数，第 $i$ 行第 $j$ 个正整数为 $w_{i,j}\\ (1\\le w_{i,j}\\le 10^7)$，表示第 $i$ 天第 $j$ 个物品的价格。", "outputFormat": "一行一个正整数，表示我最终的最大收益。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14752", "type": "P", "difficulty": 2, "samples": [["3\n4 3\n13 15\n-12 15\n2\n", "3 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "计算几何", "2025", "Special Judge", "O2优化", "高校校赛"], "title": "Hit or not?", "background": "\"Jee 这人真有意思，问他空了中了，他说赚了。\"", "description": "子弹判定是 fps 游戏中老生常谈的问题。\n\n现在我们讨论一个简化版本：\n\n将敌人的身体投影简化为二维平面上的凸多边形，其顶点数为 $n$，第 $i$ 个顶点的坐标为 $(x_i,y_i)$，顶点以逆时针顺序给出。现在东可站在地图 $x$ 轴上的点 $O(x_0,0)$ 处，向正前方（$y$ 轴正方向）开枪射击，子弹沿射线飞行。由于敌人是凸多边形，子弹只会击中一条边。现在你是游戏设计师，需要找到子弹首先击中的是哪条边。\n\n注意到：由于取样的点越多，凸多边形近似越精确，因此多边形的顶点数可能很大。", "inputFormat": "第一行一个正整数 $n\\ (3 \\le n \\le 3000)$，表示凸多边形的顶点数。\n\n接下来 $n$ 行，每行两个整数 $x_i,y_i\\ (-10^9 \\le x_i \\le 10^9, 0 \\le y_i \\le 10^9)$，以逆时针顺序给出每个顶点坐标。\n\n最后一行一个整数 $x_0\\ (-10^9 \\le x_0 \\le 10^9)$，表示点 $O$ 的横坐标，数据保证点 $O$ 严格在多边形外部。\n\n保证所有点横坐标两两不同，子弹会射中恰好一条边。", "outputFormat": "输出两个整数 $a,b\\ (1 \\le a, b \\le n)$，表示射线首先碰到的边的两个端点的索引，你可以以任意顺序输出它们。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Hit or not?", "background": "\"Jee 这人真有意思，问他空了中了，他说赚了。\"", "description": "子弹判定是 fps 游戏中老生常谈的问题。\n\n现在我们讨论一个简化版本：\n\n将敌人的身体投影简化为二维平面上的凸多边形，其顶点数为 $n$，第 $i$ 个顶点的坐标为 $(x_i,y_i)$，顶点以逆时针顺序给出。现在东可站在地图 $x$ 轴上的点 $O(x_0,0)$ 处，向正前方（$y$ 轴正方向）开枪射击，子弹沿射线飞行。由于敌人是凸多边形，子弹只会击中一条边。现在你是游戏设计师，需要找到子弹首先击中的是哪条边。\n\n注意到：由于取样的点越多，凸多边形近似越精确，因此多边形的顶点数可能很大。", "inputFormat": "第一行一个正整数 $n\\ (3 \\le n \\le 3000)$，表示凸多边形的顶点数。\n\n接下来 $n$ 行，每行两个整数 $x_i,y_i\\ (-10^9 \\le x_i \\le 10^9, 0 \\le y_i \\le 10^9)$，以逆时针顺序给出每个顶点坐标。\n\n最后一行一个整数 $x_0\\ (-10^9 \\le x_0 \\le 10^9)$，表示点 $O$ 的横坐标，数据保证点 $O$ 严格在多边形外部。\n\n保证所有点横坐标两两不同，子弹会射中恰好一条边。", "outputFormat": "输出两个整数 $a,b\\ (1 \\le a, b \\le n)$，表示射线首先碰到的边的两个端点的索引，你可以以任意顺序输出它们。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14753", "type": "P", "difficulty": 5, "samples": [["5\n3 5 4 3 2\n", "7\n"], ["10\n1 1 1 2 1 1 1 2 1 1\n", "27\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "树状数组", "2025", "O2优化", "单调栈", "高校校赛"], "title": "森", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/rrejvhy8.png?x-oss-process=image/resize,w_240,h_240)\n\n###### 《Forest》------ Kirara Magic,Shion\n\n~~不会做就去听听歌吧，虽然听了也不会做，但至少听了一首歌，血赚！~~\n\n在《Forest》的歌声中，小魔女 Kirara Magic 迷失在了一片神秘的魔法森林。这片森林由一系列魔法节点组成，每个节点上绽放着蕴含不同魔法能量的花朵。“窓の外は 広く晴れた空 いつからか 森から出れないな”（窗外是广阔晴朗的天空，不知从何时起，无法走出森林）。Kirara 发现自己被困在这里，无法离开。\n\n为了寻找逃脱的方法，她回忆起与某人的约定，这个约定指引她前往“星が辿りつく場所へ”（星星到达的地方）。但森林中的魔法能量分布复杂，她必须找到一种安全路径。她与花秘密地对话，仿佛花朵能告诉她魔法的秘密。", "description": "Kirara 发现，如果存在一段连续的魔法区间 $[l, r]$，其中魔法能量的最小值大于她起点 $a_x$ 和终点 $a_y$ 的能量，那么她就能安全地从 $x$ 移动到 $y$，中间受到保护。这段区间就像“風に包まれてく”（被风包围）一样，提供庇护。否则，她可能会被森林中的魔法吞噬。\n\n现在，Kirara 需要你的帮助：给定森林中 $n$ 个节点的魔法能量 $a_i$，找出所有满足条件的四元组 $(x, l, r, y)$，并统计其数量，其中 $1 \\le x<l \\le r<y \\le n$，且 $a$ 的区间 $[l, r]$ 上的最小魔法能量大于你所选择的起点 $a_x$ 和你所选择的终点 $a_y$ 的能量。这样，她就能识别所有安全路径，踏上“果てしのない旅”（无尽的旅程），寻找逃脱的希望。\n\n由于答案可能很大，你只需要给出满足条件的四元组数量对 $998244353$ 取模的值。", "inputFormat": "第一行一个整数 $n\\ (3\\le n\\le 3\\times10^5)$，表示魔法结点的数量。\n\n第二行 $n$ 个整数，第 $i$ 个整数为 $a_i\\ (1\\le a_i\\le n)$，表示第 $i$ 个节点的魔法能量。", "outputFormat": "一个非负整数，表示满足条件的四元组数量。答案对 $998244353$ 取模。", "hint": "对于第一组输入样例，一共有 $7$ 个四元组满足条件：$(1, 2, 2, 3)$，$(1, 2, 2, 4)$，$(1, 2, 2, 5)$，$(1, 2, 3, 4)$，$(1, 2, 3, 5)$，$(1, 3, 3, 4)$，$(1, 3, 3, 5)$。\n\n帮助 Kirara 找到所有这样的 $(x, l, r, y)$ 路径，让她实现约定，逃离森林吧！", "locale": "zh-CN", "translations": {"zh-CN": {"title": "森", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/rrejvhy8.png?x-oss-process=image/resize,w_240,h_240)\n\n###### 《Forest》------ Kirara Magic,Shion\n\n~~不会做就去听听歌吧，虽然听了也不会做，但至少听了一首歌，血赚！~~\n\n在《Forest》的歌声中，小魔女 Kirara Magic 迷失在了一片神秘的魔法森林。这片森林由一系列魔法节点组成，每个节点上绽放着蕴含不同魔法能量的花朵。“窓の外は 広く晴れた空 いつからか 森から出れないな”（窗外是广阔晴朗的天空，不知从何时起，无法走出森林）。Kirara 发现自己被困在这里，无法离开。\n\n为了寻找逃脱的方法，她回忆起与某人的约定，这个约定指引她前往“星が辿りつく場所へ”（星星到达的地方）。但森林中的魔法能量分布复杂，她必须找到一种安全路径。她与花秘密地对话，仿佛花朵能告诉她魔法的秘密。", "description": "Kirara 发现，如果存在一段连续的魔法区间 $[l, r]$，其中魔法能量的最小值大于她起点 $a_x$ 和终点 $a_y$ 的能量，那么她就能安全地从 $x$ 移动到 $y$，中间受到保护。这段区间就像“風に包まれてく”（被风包围）一样，提供庇护。否则，她可能会被森林中的魔法吞噬。\n\n现在，Kirara 需要你的帮助：给定森林中 $n$ 个节点的魔法能量 $a_i$，找出所有满足条件的四元组 $(x, l, r, y)$，并统计其数量，其中 $1 \\le x<l \\le r<y \\le n$，且 $a$ 的区间 $[l, r]$ 上的最小魔法能量大于你所选择的起点 $a_x$ 和你所选择的终点 $a_y$ 的能量。这样，她就能识别所有安全路径，踏上“果てしのない旅”（无尽的旅程），寻找逃脱的希望。\n\n由于答案可能很大，你只需要给出满足条件的四元组数量对 $998244353$ 取模的值。", "inputFormat": "第一行一个整数 $n\\ (3\\le n\\le 3\\times10^5)$，表示魔法结点的数量。\n\n第二行 $n$ 个整数，第 $i$ 个整数为 $a_i\\ (1\\le a_i\\le n)$，表示第 $i$ 个节点的魔法能量。", "outputFormat": "一个非负整数，表示满足条件的四元组数量。答案对 $998244353$ 取模。", "hint": "对于第一组输入样例，一共有 $7$ 个四元组满足条件：$(1, 2, 2, 3)$，$(1, 2, 2, 4)$，$(1, 2, 2, 5)$，$(1, 2, 3, 4)$，$(1, 2, 3, 5)$，$(1, 3, 3, 4)$，$(1, 3, 3, 5)$。\n\n帮助 Kirara 找到所有这样的 $(x, l, r, y)$ 路径，让她实现约定，逃离森林吧！", "locale": "zh-CN"}}}
{"pid": "P14754", "type": "P", "difficulty": 2, "samples": [["5 1\n01000", "3\n"], ["6 3\n110000", "6\n"], ["7 3\n1110111", "6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "博弈论", "2025", "O2优化", "高校校赛"], "title": "猫石游戏", "background": "![灯&乐奈①「收藏品」](https://cdn.luogu.com.cn/upload/image_hosting/a7282bx5.png)\n\nTomori 捡到了一些有趣的石头，并准备和 Rana 分享。Rana 提议通过一个取石子游戏来决定这些石头的分配方式。", "description": "现有 $n$ 个石头排成一列，其中有一些特殊的石头是\"猫石\"。石头序列用一个长度为 $n$ 的字符串表示，其中每个字符是 $0$ 或 $1$ ：$0$ 代表普通石头，$1$ 则代表\"猫石\"。\n\n游戏由 Tomori 先手，双方轮流进行操作。每轮行动规则如下：\n\n· Tomori 和 Rana 必须取走恰好 $k$ 个连续的石头。\n\n· 但 Rana 不希望取到任何\"猫石\"，因此 Rana 只能选择取走一段全部由普通石头（即连续 $0$）构成的长度为 $k$ 的段。\n\n**请注意：取走部分石头后，原本不连续的石头可能会变得连续。双方在操作时只能选取当前连续的段。**\n\n如果一方无法进行合法操作（即没有满足条件的连续段可取），则自动跳过此次操作。游戏将在双方均无法行动时终止。\n\n假设双方均采用最优策略以最大化自身获得的石头数量。作为 Tomori 的朋友，你想知道 Tomori 最多能取得多少石头？", "inputFormat": "第一行包含两个正整数 $n,k\\ (1\\le n\\le2\\times10^5,1\\le k\\le n)$。\n\n第二行包含一个长度为 $n$ 的字符串 $s$，仅由字符 $0$ 和 $1$ 组成，表示石头的序列。", "outputFormat": "输出一行一个整数，表示 Tomori 能取得的最大石头数量。", "hint": "请注意：取走部分石头后，原本不连续的石头可能会变得连续。双方在操作时只能选取当前连续的段。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "猫石游戏", "background": "![灯&乐奈①「收藏品」](https://cdn.luogu.com.cn/upload/image_hosting/a7282bx5.png)\n\nTomori 捡到了一些有趣的石头，并准备和 Rana 分享。Rana 提议通过一个取石子游戏来决定这些石头的分配方式。", "description": "现有 $n$ 个石头排成一列，其中有一些特殊的石头是\"猫石\"。石头序列用一个长度为 $n$ 的字符串表示，其中每个字符是 $0$ 或 $1$ ：$0$ 代表普通石头，$1$ 则代表\"猫石\"。\n\n游戏由 Tomori 先手，双方轮流进行操作。每轮行动规则如下：\n\n· Tomori 和 Rana 必须取走恰好 $k$ 个连续的石头。\n\n· 但 Rana 不希望取到任何\"猫石\"，因此 Rana 只能选择取走一段全部由普通石头（即连续 $0$）构成的长度为 $k$ 的段。\n\n**请注意：取走部分石头后，原本不连续的石头可能会变得连续。双方在操作时只能选取当前连续的段。**\n\n如果一方无法进行合法操作（即没有满足条件的连续段可取），则自动跳过此次操作。游戏将在双方均无法行动时终止。\n\n假设双方均采用最优策略以最大化自身获得的石头数量。作为 Tomori 的朋友，你想知道 Tomori 最多能取得多少石头？", "inputFormat": "第一行包含两个正整数 $n,k\\ (1\\le n\\le2\\times10^5,1\\le k\\le n)$。\n\n第二行包含一个长度为 $n$ 的字符串 $s$，仅由字符 $0$ 和 $1$ 组成，表示石头的序列。", "outputFormat": "输出一行一个整数，表示 Tomori 能取得的最大石头数量。", "hint": "请注意：取走部分石头后，原本不连续的石头可能会变得连续。双方在操作时只能选取当前连续的段。", "locale": "zh-CN"}}}
{"pid": "P14755", "type": "P", "difficulty": 4, "samples": [["1\n2\n1 2", "2\n1 2\n2 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "Special Judge", "O2优化", "构造", "高校校赛"], "title": "西安之泪", "background": "2025 年 9 月至 10 月期间，断断续续的雨笼罩了西安 30 余天。\n\nVoidina 看着空中飘落的如烟小雨，开始了遐想。", "description": "给定一颗无根树，共有 $n$ 个顶点。每个顶点 $i$ 都具有一个点权 $a_i$，初始所有点权都为 $0$。\n\n你可以进行如下的操作最多不超过 $3n$ 次：\n\n- 指定顶点的编号 $r,u\\ (1 \\le r,u \\le n)$，使得这棵树暂时以顶点 $r$ 为根，随后对于顶点 $u$ 的子树中的每一个顶点 $v$，将其点权修改为 $a_v \\oplus u$。此处的 $\\oplus$ 表示**按位异或**。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0d7zaf5l.png)\n\n如图，当取 $r = 3$，$u = 1$ 进行操作时，顶点 $1,4,6$ 的点权会分别被异或上 $1$。\n\n\n请你构造一个满足上述要求的操作序列，使得最终对于树中的每个顶点 $i$，都满足 $a_i = i$。\n\n\n对于两个非负整数 $x,y$，它们的**按位异或**是指，将它们作为二进制数，对二进制表示中的每一位进行如下运算得到的结果：\n\n- $x$ 和 $y$ 的这一位上不同时，结果的这一位为 $1$；\n- $x$ 和 $y$ 的这一位上相同时，结果的这一位为 $0$。\n\n比如，$10 \\oplus 6 = (1010)_2 \\oplus (0110)_2 = (1100)_2 = 12$。", "inputFormat": "本题有多组数据。第一行一个正整数 $T\\ (1\\le T\\le10^4)$，表示数据组数。\n\n对于每组数据：\n\n第一行一个整数 $n\\ (1 \\le n \\le 2 \\times 10^5)$，表示树的顶点数。\n\n接下来 $n-1$ 行，每行两个整数 $u,v\\ (1 \\le u,v \\le n,u \\neq v)$，表示树中的一条边。\n\n保证 $T$ 组数据中 $n$ 的和不超过 $2 \\times 10^5$。", "outputFormat": "对于每组数据：\n\n第一行一个整数 $k$，代表你所构造的操作序列中操作的次数。\n\n接下来 $k$ 行，每行两个整数 $r,u$，具体含义见题目描述。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "西安之泪", "background": "2025 年 9 月至 10 月期间，断断续续的雨笼罩了西安 30 余天。\n\nVoidina 看着空中飘落的如烟小雨，开始了遐想。", "description": "给定一颗无根树，共有 $n$ 个顶点。每个顶点 $i$ 都具有一个点权 $a_i$，初始所有点权都为 $0$。\n\n你可以进行如下的操作最多不超过 $3n$ 次：\n\n- 指定顶点的编号 $r,u\\ (1 \\le r,u \\le n)$，使得这棵树暂时以顶点 $r$ 为根，随后对于顶点 $u$ 的子树中的每一个顶点 $v$，将其点权修改为 $a_v \\oplus u$。此处的 $\\oplus$ 表示**按位异或**。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0d7zaf5l.png)\n\n如图，当取 $r = 3$，$u = 1$ 进行操作时，顶点 $1,4,6$ 的点权会分别被异或上 $1$。\n\n\n请你构造一个满足上述要求的操作序列，使得最终对于树中的每个顶点 $i$，都满足 $a_i = i$。\n\n\n对于两个非负整数 $x,y$，它们的**按位异或**是指，将它们作为二进制数，对二进制表示中的每一位进行如下运算得到的结果：\n\n- $x$ 和 $y$ 的这一位上不同时，结果的这一位为 $1$；\n- $x$ 和 $y$ 的这一位上相同时，结果的这一位为 $0$。\n\n比如，$10 \\oplus 6 = (1010)_2 \\oplus (0110)_2 = (1100)_2 = 12$。", "inputFormat": "本题有多组数据。第一行一个正整数 $T\\ (1\\le T\\le10^4)$，表示数据组数。\n\n对于每组数据：\n\n第一行一个整数 $n\\ (1 \\le n \\le 2 \\times 10^5)$，表示树的顶点数。\n\n接下来 $n-1$ 行，每行两个整数 $u,v\\ (1 \\le u,v \\le n,u \\neq v)$，表示树中的一条边。\n\n保证 $T$ 组数据中 $n$ 的和不超过 $2 \\times 10^5$。", "outputFormat": "对于每组数据：\n\n第一行一个整数 $k$，代表你所构造的操作序列中操作的次数。\n\n接下来 $k$ 行，每行两个整数 $r,u$，具体含义见题目描述。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14756", "type": "P", "difficulty": 5, "samples": [["3\n3 2\n1 3\n2 3\n2 6\n3 2\n1 3\n3 3\n3 6\n2 1\n1 1\n3 3\n", "5\n5\n3\n4\n5\n3\n3\n4\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2025", "O2优化", "高校校赛"], "title": "成都之泪", "background": "", "description": "在一条坐标范围为 $1$ 至 $2n$ 的数轴上有 $n$ 条线段。\n\n现给定正整数 $k$，对于每一条线段，你需要求出：在删除该线段后，再添加至多一条线段，数轴上最多有多少个整点恰好被 $k$ 条线段覆盖。\n\n注意你添加的线段的左右端点也应在区间 $[1,2n]$ 内。", "inputFormat": "本题有多组数据。第一行一个正整数 $T\\ (1\\le T\\le10^4)$，表示数据组数。\n\n对于每组数据：\n\n第一行两个正整数 $n,k\\ (1\\le n\\le2\\times10^5,1\\le k\\le n)$。\n\n接下来 $n$ 行，第 $i$ 行两个正整数 $l_i,r_i\\ (1\\le l_i\\le r_i\\le 2n)$，表示第 $i$ 条线段的左端点和右端点。\n\n保证 $T$ 组数据中 $n$ 的和不超过 $2\\times10^5$。", "outputFormat": "对于每组数据：\n\n输出 $n$ 行，第 $i$ 行表示删除第 $i$ 条线段的答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "成都之泪", "background": "", "description": "在一条坐标范围为 $1$ 至 $2n$ 的数轴上有 $n$ 条线段。\n\n现给定正整数 $k$，对于每一条线段，你需要求出：在删除该线段后，再添加至多一条线段，数轴上最多有多少个整点恰好被 $k$ 条线段覆盖。\n\n注意你添加的线段的左右端点也应在区间 $[1,2n]$ 内。", "inputFormat": "本题有多组数据。第一行一个正整数 $T\\ (1\\le T\\le10^4)$，表示数据组数。\n\n对于每组数据：\n\n第一行两个正整数 $n,k\\ (1\\le n\\le2\\times10^5,1\\le k\\le n)$。\n\n接下来 $n$ 行，第 $i$ 行两个正整数 $l_i,r_i\\ (1\\le l_i\\le r_i\\le 2n)$，表示第 $i$ 条线段的左端点和右端点。\n\n保证 $T$ 组数据中 $n$ 的和不超过 $2\\times10^5$。", "outputFormat": "对于每组数据：\n\n输出 $n$ 行，第 $i$ 行表示删除第 $i$ 条线段的答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14757", "type": "P", "difficulty": 4, "samples": [["4\n3\n1 2 3\n1 2 5\n4\n1 2 5 9\n3 7 8 9\n3\n1 2 3\n1 5 6\n3\n2 3 4\n1 2 3\n", "NO\nYES\nYES\nNO\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2025", "O2优化", "高校校赛"], "title": "武汉之泪", "background": "", "description": "给定两个长度为 $n$ 的单调递增的序列 $a,b$，你可以对序列 $a$ 执行如下操作任意次：\n\n选择下标 $i\\ (1\\le i<n)$，满足 $a_i+1=a_{i+1}$，然后将 $a_i,a_{i+1}$ 变为 $a_i+1,a_{i+1}+1$ 或 $a_i-1,a_{i+1}-1$。\n\n在任意时刻，你需要保证序列 $a$ 单调递增（即 $a_1<a_2<\\dots<a_n$）。\n\n问是否可以使序列 $a$ 变为序列 $b$。", "inputFormat": "本题有多组数据。第一行一个正整数 $T\\ (1\\le T\\le10^4)$，表示数据组数。\n\n对于每组数据：\n\n第一个正整数 $n\\ (1\\le n\\le2\\times10^5)$。表示序列 $a,b$ 的长度。\n\n第二行 $n$ 个正整数，第 $i$ 个正整数为 $a_i\\ (1\\le a_1<a_2<\\dots<a_n\\le10^9)$。\n\n第三行 $n$ 个正整数，第 $i$ 个正整数为 $b_i\\ (1\\le b_1<b_2<\\dots<b_n\\le10^9)$。\n\n保证 $T$ 组数据中 $n$ 的和不超过 $2\\times10^5$。", "outputFormat": "对于每组数据：\n\n输出一行一个字符串，若可以使序列 $a$ 变为序列 $b$，输出 `YES`，否则输出 `NO`（不区分大小写）。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "武汉之泪", "background": "", "description": "给定两个长度为 $n$ 的单调递增的序列 $a,b$，你可以对序列 $a$ 执行如下操作任意次：\n\n选择下标 $i\\ (1\\le i<n)$，满足 $a_i+1=a_{i+1}$，然后将 $a_i,a_{i+1}$ 变为 $a_i+1,a_{i+1}+1$ 或 $a_i-1,a_{i+1}-1$。\n\n在任意时刻，你需要保证序列 $a$ 单调递增（即 $a_1<a_2<\\dots<a_n$）。\n\n问是否可以使序列 $a$ 变为序列 $b$。", "inputFormat": "本题有多组数据。第一行一个正整数 $T\\ (1\\le T\\le10^4)$，表示数据组数。\n\n对于每组数据：\n\n第一个正整数 $n\\ (1\\le n\\le2\\times10^5)$。表示序列 $a,b$ 的长度。\n\n第二行 $n$ 个正整数，第 $i$ 个正整数为 $a_i\\ (1\\le a_1<a_2<\\dots<a_n\\le10^9)$。\n\n第三行 $n$ 个正整数，第 $i$ 个正整数为 $b_i\\ (1\\le b_1<b_2<\\dots<b_n\\le10^9)$。\n\n保证 $T$ 组数据中 $n$ 的和不超过 $2\\times10^5$。", "outputFormat": "对于每组数据：\n\n输出一行一个字符串，若可以使序列 $a$ 变为序列 $b$，输出 `YES`，否则输出 `NO`（不区分大小写）。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14758", "type": "P", "difficulty": 1, "samples": [["1 1 1 1 1 1 1 1 1 1 1 1 1\n", "1\n"], ["1 1 1 1 1 1 1 1 1 1 1 0 2\n", "1"], ["2 2 0 0 0 0 1 1 1 1 1 1 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2025", "O2优化", "高校校赛"], "title": "役满之泪", "background": "又是一个平淡无奇的下午，我正在家津津有味的吃着白水煮挂面就着咸菜，我幻想着这样美好而又平淡的一天或许能一直下去。但不曾料到，这样的生活将与我快速告别。\n\n\"开门，役满委喵！\"急切的敲门打断了我的吃饭，还不容我反应过来，大门就被人粗糙的闯开。迎面走过来的，是因为急切而面部通红的一姬。\n\n\"有人举报你在铜之间役满，老领导你不介意我们检查一下吧？\"\n\n我看着她拿着明晃晃的立直棒，那意气风发的样子让我不禁想到当初我们刚见面的时候，似乎也是这样一个午后，我带着她第一次来到铜之间，看着她稚嫩的样子，我告诉她在铜之间，我们只能断幺九。\n\n\"明白了师傅喵！\"她郑重点头的样子，此刻竟没来由的在脑海挥之不去。\n\n\"当然没问题。\"仍然沉浸在回忆里，我的过去替我回答了她。\n\n\"报告，检查到完美对局和役满之证！都是今天的！\"听到旁边人说话，我才意识到我好像神游了很久。我抬起头看向了一姬，她此刻也在看我，用着一种好熟悉的眼神。\n\n太熟悉了，那种眼神，此刻我又在魂游，我想起来了，那个眼神，是我带她第一次胡了断幺九后的那种志得意满，是我告诉她未来我们要截胡所有役满的胸有成竹，是我陪着她在初心点铳后的坚定无畏。可为什么，明明这么熟悉的眼神，我再看向她的时候怎么感觉她在不忍她在后悔她在恨铁不成钢？突然感觉意识越来越深。\n\n\"这是哪儿的对局啊，你们给我看这个干什么？\"\n\n\"这不是你的对局吗？\"\n\n\"什么是我的对局，我怎么可能有这种对局，这个役满这么多分，我说实话我想都不敢想啊！\"\n\n\"对，你是不敢想，但是你敢胡，你是个三人场的胡北人啊！\"\n\n\"给师傅看一下牌谱喵！\"\n\n\"这又能说明什么，这是我朋友的号，我今天只是登录赚小鱼干的！\"\n\n\"账号密码还记得吧，我带你看看游戏记录。\"\n\n\"这号不是你的，这游戏记录还不是你的喵？\"\n\n\"不是我的啊一姬，这是谁啊，拿我的号打国士，这谁啊这不是成心想害我吗！\"\n\n\"你承认这是你的号了喵？\"\n\n突然像是进去了默片，一姬说完那句话我感觉像是听到了自己的心跳。回想刚刚我们俩的对白，感觉像是在看一场上个世纪的马戏演出。刚刚那是我在说话吗，为什么我要说那些话，我为什么感觉自己越来越矮，意识逐渐模糊，我甚至意识不到自己在张嘴说话……\n\n\"一姬，这个积分我是一点都不敢花啊，我祖祖辈辈都是初心，被别人飞怕了，积分一分不动，全在铜之间啊！\"\n\n\"你大把大把胡牌的时候怎么没想到自己是初心的孩子，现在出事了，说自己是初心，番种里这么多役，怎么有你这个坏人胡役满……\"\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/my81205m.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7yklxoc6.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w4iyx7i4.png)", "description": "在本题中，你不需要知道日本麻将的完整规则，你只需要知道以下几点：\n- 日本麻将使用的牌是一万～九万、一索～九索、一饼～九饼、东风、南风、西风、北风、红中、绿发、白板各 $4$ 张，共 $34$ 种，$136$ 张。\n- 每个人手中初始有 $13$ 张牌。\n- 每次摸一张牌后，需要打出一张牌。\n- 每次摸牌后，手牌数量将变为 $14$ 张，此时若构成可以和牌的牌型，则可以自摸和牌。\n\n在日麻中，\"国士无双\"是一种常见的役满牌型，它是指由三种序数牌的幺、九牌，七种字牌共 $13$ 张中的 $12$ 个单张及 $1$ 对组成的和牌，即一万、九万、一索、九索、一饼、九饼、东风、南风、西风、北风、红中、绿发、白板这 $13$ 种牌手中都要有，且其中一种要有一对才能和牌。\n\nrevclos 正在打麻将，作为役满人，他想在本局中自摸和出\"国士无双\"！revclos 给你目前他手中一万、九万、一索、九索、一饼、九饼、东风、南风、西风、北风、红中、绿发、白板这 $13$ 种牌每种牌的数量，他想要知道：至少需要再摸多少次牌，才能自摸和出国士无双。", "inputFormat": "输入 $13$ 个非负整数，分别表示 revclos 目前手中一万、九万、一索、九索、一饼、九饼、东风、南风、西风、北风、红中、绿发、白板这 $13$ 种牌的数量。\n\n保证这些这 $13$ 个数均为 $0,1,2,3,4$ 其中之一，且它们的和不超过 $13$。", "outputFormat": "输出一个整数，表示 revclos 要自摸和出国士无双至少需要的摸牌次数。", "hint": null, "locale": "zh-CN", "translations": {"zh-CN": {"title": "役满之泪", "background": "又是一个平淡无奇的下午，我正在家津津有味的吃着白水煮挂面就着咸菜，我幻想着这样美好而又平淡的一天或许能一直下去。但不曾料到，这样的生活将与我快速告别。\n\n\"开门，役满委喵！\"急切的敲门打断了我的吃饭，还不容我反应过来，大门就被人粗糙的闯开。迎面走过来的，是因为急切而面部通红的一姬。\n\n\"有人举报你在铜之间役满，老领导你不介意我们检查一下吧？\"\n\n我看着她拿着明晃晃的立直棒，那意气风发的样子让我不禁想到当初我们刚见面的时候，似乎也是这样一个午后，我带着她第一次来到铜之间，看着她稚嫩的样子，我告诉她在铜之间，我们只能断幺九。\n\n\"明白了师傅喵！\"她郑重点头的样子，此刻竟没来由的在脑海挥之不去。\n\n\"当然没问题。\"仍然沉浸在回忆里，我的过去替我回答了她。\n\n\"报告，检查到完美对局和役满之证！都是今天的！\"听到旁边人说话，我才意识到我好像神游了很久。我抬起头看向了一姬，她此刻也在看我，用着一种好熟悉的眼神。\n\n太熟悉了，那种眼神，此刻我又在魂游，我想起来了，那个眼神，是我带她第一次胡了断幺九后的那种志得意满，是我告诉她未来我们要截胡所有役满的胸有成竹，是我陪着她在初心点铳后的坚定无畏。可为什么，明明这么熟悉的眼神，我再看向她的时候怎么感觉她在不忍她在后悔她在恨铁不成钢？突然感觉意识越来越深。\n\n\"这是哪儿的对局啊，你们给我看这个干什么？\"\n\n\"这不是你的对局吗？\"\n\n\"什么是我的对局，我怎么可能有这种对局，这个役满这么多分，我说实话我想都不敢想啊！\"\n\n\"对，你是不敢想，但是你敢胡，你是个三人场的胡北人啊！\"\n\n\"给师傅看一下牌谱喵！\"\n\n\"这又能说明什么，这是我朋友的号，我今天只是登录赚小鱼干的！\"\n\n\"账号密码还记得吧，我带你看看游戏记录。\"\n\n\"这号不是你的，这游戏记录还不是你的喵？\"\n\n\"不是我的啊一姬，这是谁啊，拿我的号打国士，这谁啊这不是成心想害我吗！\"\n\n\"你承认这是你的号了喵？\"\n\n突然像是进去了默片，一姬说完那句话我感觉像是听到了自己的心跳。回想刚刚我们俩的对白，感觉像是在看一场上个世纪的马戏演出。刚刚那是我在说话吗，为什么我要说那些话，我为什么感觉自己越来越矮，意识逐渐模糊，我甚至意识不到自己在张嘴说话……\n\n\"一姬，这个积分我是一点都不敢花啊，我祖祖辈辈都是初心，被别人飞怕了，积分一分不动，全在铜之间啊！\"\n\n\"你大把大把胡牌的时候怎么没想到自己是初心的孩子，现在出事了，说自己是初心，番种里这么多役，怎么有你这个坏人胡役满……\"\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/my81205m.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7yklxoc6.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w4iyx7i4.png)", "description": "在本题中，你不需要知道日本麻将的完整规则，你只需要知道以下几点：\n- 日本麻将使用的牌是一万～九万、一索～九索、一饼～九饼、东风、南风、西风、北风、红中、绿发、白板各 $4$ 张，共 $34$ 种，$136$ 张。\n- 每个人手中初始有 $13$ 张牌。\n- 每次摸一张牌后，需要打出一张牌。\n- 每次摸牌后，手牌数量将变为 $14$ 张，此时若构成可以和牌的牌型，则可以自摸和牌。\n\n在日麻中，\"国士无双\"是一种常见的役满牌型，它是指由三种序数牌的幺、九牌，七种字牌共 $13$ 张中的 $12$ 个单张及 $1$ 对组成的和牌，即一万、九万、一索、九索、一饼、九饼、东风、南风、西风、北风、红中、绿发、白板这 $13$ 种牌手中都要有，且其中一种要有一对才能和牌。\n\nrevclos 正在打麻将，作为役满人，他想在本局中自摸和出\"国士无双\"！revclos 给你目前他手中一万、九万、一索、九索、一饼、九饼、东风、南风、西风、北风、红中、绿发、白板这 $13$ 种牌每种牌的数量，他想要知道：至少需要再摸多少次牌，才能自摸和出国士无双。", "inputFormat": "输入 $13$ 个非负整数，分别表示 revclos 目前手中一万、九万、一索、九索、一饼、九饼、东风、南风、西风、北风、红中、绿发、白板这 $13$ 种牌的数量。\n\n保证这些这 $13$ 个数均为 $0,1,2,3,4$ 其中之一，且它们的和不超过 $13$。", "outputFormat": "输出一个整数，表示 revclos 要自摸和出国士无双至少需要的摸牌次数。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P14759", "type": "P", "difficulty": 4, "samples": [["5 0", "32\n00000"], ["3 3\n1 2\n2 3\n1 3", "1\n010"], ["2 3\n1 1\n2 2\n1 2", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "二分图", "前缀和"], "title": "[Opoi 2025] CCD 的异或 II", "background": "CCD 仍然喜欢异或，尤其喜欢在一个序列上玩游戏，但是由于 CCD 不够聪明，无法解出序列上的问题，这次他找到了你，寻求你的帮助。", "description": "你需要构造一个长度为 $n$ 的 01 序列 $A$。\n\n这个序列要满足 $m$ 个限制。每个限制都形如二元组 $(l,r)$，表示从 $A_l$ 到 $A_r$ 的异或和需要等于 $1$。\n\n你需要输出满足所有限制的构造方案数对 $998244353$ 取模的结果，并构造方案中字典序最小的 $A$。", "inputFormat": "第一行输入两个整数 $n,m$。\n\n接下来 $m$ 行，每行输入两个整数 $l,r$，表示一个限制。", "outputFormat": "第一行输出满足所有限制的构造方案数对 $998244353$ 取模的结果。\n\n如果方案数不为 $0$，请在第二行输出一个 01 串，表示构造方案中字典序最小的 $A$。", "hint": "**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.2}\n\\begin{array}{|c|c|c|c|}\n\\hline\n\\begin{array}{c}\n\\tt{subtask}\\\\\\hline\n1\\\\\\hline\n2\\\\\\hline\n3\\\\\\hline\n4\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\nn,m\\\\\\hline\n\\le 10^6\\\\\\hline\n\\le 20\\\\\\hline\n\\le 5\\times10^3\\\\\\hline\n\\le 10^6\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\n\\textrm{特殊性质}\\\\\\hline\nm=0\\\\\\hline\n\\\\\n\\textrm{无}\\\\\n\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\n\\tt{pts}\\\\\\hline\n5\\\\\\hline\n15\\\\\\hline\n30\\\\\\hline\n50\\\\\\hline\n\\end{array}\n\\\\\\hline\n\\end{array}\n$$\n\n对于所有数据，$\\forall 1\\le i \\le m,1 \\le l_i \\le r_i \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Opoi 2025] CCD 的异或 II", "background": "CCD 仍然喜欢异或，尤其喜欢在一个序列上玩游戏，但是由于 CCD 不够聪明，无法解出序列上的问题，这次他找到了你，寻求你的帮助。", "description": "你需要构造一个长度为 $n$ 的 01 序列 $A$。\n\n这个序列要满足 $m$ 个限制。每个限制都形如二元组 $(l,r)$，表示从 $A_l$ 到 $A_r$ 的异或和需要等于 $1$。\n\n你需要输出满足所有限制的构造方案数对 $998244353$ 取模的结果，并构造方案中字典序最小的 $A$。", "inputFormat": "第一行输入两个整数 $n,m$。\n\n接下来 $m$ 行，每行输入两个整数 $l,r$，表示一个限制。", "outputFormat": "第一行输出满足所有限制的构造方案数对 $998244353$ 取模的结果。\n\n如果方案数不为 $0$，请在第二行输出一个 01 串，表示构造方案中字典序最小的 $A$。", "hint": "**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.2}\n\\begin{array}{|c|c|c|c|}\n\\hline\n\\begin{array}{c}\n\\tt{subtask}\\\\\\hline\n1\\\\\\hline\n2\\\\\\hline\n3\\\\\\hline\n4\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\nn,m\\\\\\hline\n\\le 10^6\\\\\\hline\n\\le 20\\\\\\hline\n\\le 5\\times10^3\\\\\\hline\n\\le 10^6\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\n\\textrm{特殊性质}\\\\\\hline\nm=0\\\\\\hline\n\\\\\n\\textrm{无}\\\\\n\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\n\\tt{pts}\\\\\\hline\n5\\\\\\hline\n15\\\\\\hline\n30\\\\\\hline\n50\\\\\\hline\n\\end{array}\n\\\\\\hline\n\\end{array}\n$$\n\n对于所有数据，$\\forall 1\\le i \\le m,1 \\le l_i \\le r_i \\le n$。", "locale": "zh-CN"}}}
{"pid": "P14760", "type": "P", "difficulty": 4, "samples": [["2\n4\n1 2\n1 3\n1 4\n4\n1 2\n2 3\n2 4", "first\nsecond"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "O2优化", "树形 DP"], "title": "[Opoi 2025] CCD 的游戏", "background": "CCD 在和小伙伴玩游戏。", "description": "游戏是这样的：\n\n有一棵 $n$ 个节点的树，其中 $1$ 号节点已被标记，其余点均未被标记。现在有两个人，轮流进行如下操作，不能操作就输了：\n\n> 每一次操作，选择至少一个未标记的且与这一操作之前已标记点相邻的点，将这些点标记。\n\n假如两个人都按最聪明的方法来选，请问是先手还是后手有必胜策略？", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n第一行一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，第一行一个整数 $n$。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$，表示一条树上的边。", "outputFormat": "对于每组数据，如果先手必胜，输出 `first`，否则输出 `second`，换行分隔。", "hint": "### 样例解释\n\n对于第一组数据，显然先手第一轮即可标记完所有点，后手就输了。\n\n对于第二组数据，先手只能标记二号点，然后后手标记剩下的点。\n\n---\n\n### 数据范围与约定\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.2}\n\\begin{array}{|c|c|c|c|}\n\\hline\n\\begin{array}{c}\n\\tt{subtask}\\\\\\hline\n1\\\\\\hline\n2\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\nT\\\\\\hline\n\\le 10\\\\\\hline\n\\le 10^{5}\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\nn\\\\\\hline\n\\le 10\\\\\\hline\n\\le 10^{6}\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\n\\tt{pts}\\\\\\hline\n10\\\\\\hline\n90\\\\\\hline\n\\end{array}\n\\\\\\hline\n\\end{array}\n$$\n\n对于所有数据，$1\\le T \\le 10^5$，$2\\le n \\le 10^6$，$\\sum n \\le 10^6$。\n\n**输入数据较大，请使用较快的读入方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Opoi 2025] CCD 的游戏", "background": "CCD 在和小伙伴玩游戏。", "description": "游戏是这样的：\n\n有一棵 $n$ 个节点的树，其中 $1$ 号节点已被标记，其余点均未被标记。现在有两个人，轮流进行如下操作，不能操作就输了：\n\n> 每一次操作，选择至少一个未标记的且与这一操作之前已标记点相邻的点，将这些点标记。\n\n假如两个人都按最聪明的方法来选，请问是先手还是后手有必胜策略？", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n第一行一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，第一行一个整数 $n$。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$，表示一条树上的边。", "outputFormat": "对于每组数据，如果先手必胜，输出 `first`，否则输出 `second`，换行分隔。", "hint": "### 样例解释\n\n对于第一组数据，显然先手第一轮即可标记完所有点，后手就输了。\n\n对于第二组数据，先手只能标记二号点，然后后手标记剩下的点。\n\n---\n\n### 数据范围与约定\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.2}\n\\begin{array}{|c|c|c|c|}\n\\hline\n\\begin{array}{c}\n\\tt{subtask}\\\\\\hline\n1\\\\\\hline\n2\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\nT\\\\\\hline\n\\le 10\\\\\\hline\n\\le 10^{5}\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\nn\\\\\\hline\n\\le 10\\\\\\hline\n\\le 10^{6}\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\n\\tt{pts}\\\\\\hline\n10\\\\\\hline\n90\\\\\\hline\n\\end{array}\n\\\\\\hline\n\\end{array}\n$$\n\n对于所有数据，$1\\le T \\le 10^5$，$2\\le n \\le 10^6$，$\\sum n \\le 10^6$。\n\n**输入数据较大，请使用较快的读入方式。**", "locale": "zh-CN"}}}
{"pid": "P14761", "type": "P", "difficulty": 6, "samples": [["5\n0 0\n0 0\n0 2\n2 5\n1 2", "0\n0\n0\n6\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "平衡树", "O2优化"], "title": "[Opoi 2025] CCD 的序列", "background": "", "description": "以下关于括号序列和括号匹配的定义跟其他题没什么区别，知道的可以跳过。\n\n---\n\n括号序列是一个只包含 $\\texttt{(}$ 和 $\\texttt{)}$ 的字符串。\n\n定义一个括号序列是合法的，当且仅当它为下列三种之一：\n1. 空串是合法的。\n1. 如果字符串 $S$ 是合法的，则 $(S)$ 也是合法的。\n1. 如果字符串 $S$ 和 $T$ 是合法的，则 $ST$ 也是合法的。\n\n一个合法括号序列中，一个括号是另一个括号所匹配的括号，当且仅当两个括号之间是一个合法的括号序列，且两个括号方向相反。可以证明，一个括号所匹配的括号是唯一的。\n\n---\n\n定义一个括号的匹配发生变更当且仅当它所匹配的括号变更。\n\n你有一个括号序列 $S$。初始 $S$ 为空，**下标从 $1$ 开始**。\n\n你要进行 $n$ 次操作，**操作之间不独立**。\n\n每次操作给你两个数 $l,r(0\\le l\\le r\\le |S|)$，表示**同时**往 $S$ 的 $l\\sim l+1$ 之间插入左括号、往 $S$ 的 $r\\sim r+1$ 之间插入右括号（$l$ 或 $r$ 为 $0$ 表示在开头插入，为 $|S|$ 表示在末尾插入，**$l=r$ 时左括号插在右括号前面**）。\n\n可以证明，每次操作完后这个括号序列都是合法的。每次操作完后你需要求这次操作导致匹配发生变更的括号数（不包括新增加的两个括号）。", "inputFormat": "第一行一个数，表示 $n$。\n\n接下来 $n$ 行，每行两个数 $l_i,r_i$，表示一次操作。", "outputFormat": "$n$ 行，每行一个整数。第 $i$ 行表示第 $i$ 次操作导致匹配变更的括号数。", "hint": "### 样例解释\n以下标红的表示新增的括号，蓝色表示当次操作导致匹配发生变更的括号。\n\n- 第一次操作后括号序列变为 $\\texttt{\\red{()}}$。\n- 第二次操作后括号序列变为 $\\texttt{\\red{()}()}$。\n- 第三次操作后括号序列变为 $\\texttt{\\red(()\\red)()}$。\n- 第四次操作后括号序列变为 $\\texttt{\\blue{((\\red())(\\red))}}$。\n- 第五次操作后括号序列变为 $\\texttt{(\\red(\\blue(\\red)()\\blue)())}$。\n\n### 数据范围与约定\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.2}\n\\begin{array}{|c|c|c|}\n\\hline\n\\begin{array}{c}\n\\tt{subtask}\\\\\\hline\n1\\\\\\hline\n2\\\\\\hline\n3\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\nn\\\\\\hline\n\\le 10\\\\\\hline\n\\le 10^{3}\\\\\\hline\n\\le 2\\times10^{5}\\\\\n\\end{array}\n&\n\\begin{array}{c}\n\\tt{pts}\\\\\\hline\n20\\\\\\hline\n30\\\\\\hline\n50\\\\\\hline\n\\end{array}\n\\\\\\hline\n\\end{array}\n$$\n\n对于所有数据，$0\\le n \\le 2\\times10^{5}$，$\\forall i \\in [1,n],0\\le l_i,r_i\\le 2\\times i-2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Opoi 2025] CCD 的序列", "background": "", "description": "以下关于括号序列和括号匹配的定义跟其他题没什么区别，知道的可以跳过。\n\n---\n\n括号序列是一个只包含 $\\texttt{(}$ 和 $\\texttt{)}$ 的字符串。\n\n定义一个括号序列是合法的，当且仅当它为下列三种之一：\n1. 空串是合法的。\n1. 如果字符串 $S$ 是合法的，则 $(S)$ 也是合法的。\n1. 如果字符串 $S$ 和 $T$ 是合法的，则 $ST$ 也是合法的。\n\n一个合法括号序列中，一个括号是另一个括号所匹配的括号，当且仅当两个括号之间是一个合法的括号序列，且两个括号方向相反。可以证明，一个括号所匹配的括号是唯一的。\n\n---\n\n定义一个括号的匹配发生变更当且仅当它所匹配的括号变更。\n\n你有一个括号序列 $S$。初始 $S$ 为空，**下标从 $1$ 开始**。\n\n你要进行 $n$ 次操作，**操作之间不独立**。\n\n每次操作给你两个数 $l,r(0\\le l\\le r\\le |S|)$，表示**同时**往 $S$ 的 $l\\sim l+1$ 之间插入左括号、往 $S$ 的 $r\\sim r+1$ 之间插入右括号（$l$ 或 $r$ 为 $0$ 表示在开头插入，为 $|S|$ 表示在末尾插入，**$l=r$ 时左括号插在右括号前面**）。\n\n可以证明，每次操作完后这个括号序列都是合法的。每次操作完后你需要求这次操作导致匹配发生变更的括号数（不包括新增加的两个括号）。", "inputFormat": "第一行一个数，表示 $n$。\n\n接下来 $n$ 行，每行两个数 $l_i,r_i$，表示一次操作。", "outputFormat": "$n$ 行，每行一个整数。第 $i$ 行表示第 $i$ 次操作导致匹配变更的括号数。", "hint": "### 样例解释\n以下标红的表示新增的括号，蓝色表示当次操作导致匹配发生变更的括号。\n\n- 第一次操作后括号序列变为 $\\texttt{\\red{()}}$。\n- 第二次操作后括号序列变为 $\\texttt{\\red{()}()}$。\n- 第三次操作后括号序列变为 $\\texttt{\\red(()\\red)()}$。\n- 第四次操作后括号序列变为 $\\texttt{\\blue{((\\red())(\\red))}}$。\n- 第五次操作后括号序列变为 $\\texttt{(\\red(\\blue(\\red)()\\blue)())}$。\n\n### 数据范围与约定\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.2}\n\\begin{array}{|c|c|c|}\n\\hline\n\\begin{array}{c}\n\\tt{subtask}\\\\\\hline\n1\\\\\\hline\n2\\\\\\hline\n3\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\nn\\\\\\hline\n\\le 10\\\\\\hline\n\\le 10^{3}\\\\\\hline\n\\le 2\\times10^{5}\\\\\n\\end{array}\n&\n\\begin{array}{c}\n\\tt{pts}\\\\\\hline\n20\\\\\\hline\n30\\\\\\hline\n50\\\\\\hline\n\\end{array}\n\\\\\\hline\n\\end{array}\n$$\n\n对于所有数据，$0\\le n \\le 2\\times10^{5}$，$\\forall i \\in [1,n],0\\le l_i,r_i\\le 2\\times i-2$。", "locale": "zh-CN"}}}
{"pid": "P14762", "type": "P", "difficulty": 5, "samples": [["2", "1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["交互题", "Special Judge", "O2优化", "树链剖分"], "title": "[Opoi 2025] CCD 的长恨歌", "background": "~~前几天~~ 一年前 CCD 因为模拟赛挂分而被 \\_Eriri\\_ 嘲讽，于是他准备出一道题来嘲讽 \\_Eriri\\_。\n\n> 栋皇重色思倾国，御宇多年求不得。\n>\n> 蒋家有女初长成，养在深闺人未识。\n>\n> 天生丽质难自弃，一朝选在君王侧。\n>\n> 回眸一笑百媚生，六宫粉黛无颜色。\n\n[upd 2025/5/5]. <- 链接赛前一天被 \\_Eriri\\_ 删除……", "description": "**请注意，此题仅支持 C++11 及以上提交！**\n\n栋明皇有一棵非常神秘的有 $n$ 个点的有根树 $T$，根为 $1$。\n\n而你，作为尊贵的蒋贵妃，非常想知道树 $T$ 的形态，但你每次只能向栋明皇问一个二元组 $(i,j)\\ (1 \\le i , j \\le n)$，栋明皇会告诉你这两个点在树上的最近公共祖先 $k$。由于栋明皇还要忙着筹备 Opoi，他只允许你向他问 $n \\times 300$ 次问题。\n\n幸运的是，栋明皇喜欢紧凑的结构，所以这颗树的**叶子个数至多为 $20$**。\n\n本题是一道交互题。\n\n提交时，请在程序中加入以下函数声明语句：\n\n```cpp\nint LCA(int,int);\n```\n\n这使你可以调用 `LCA(x,y)` 并得到它们的 LCA。\n\n你不需要，也不应该实现主函数，你只需要实现下列函数：\n\n```cpp\nvector<pair<int, int> > guess(int n);\n```\n\n- 每个测试点交互库只会调用一次该函数。\n- 其中 $n$ 表示本次猜测的树 $T$ 的结点个数。\n- 返回的 vector 描述了树 $T$ 的结构，其中 `vector` 的每一个 `pair<int, int>` 表示树的一条边 $(u,v)$，每条边两个节点的顺序和边与边之间的顺序没有要求。\n- 单次 `LCA(x, y)` 复杂度是严格 $O(1)$ 的，交互库预处理复杂度 $O(n \\log_2 n)$。\n- **SPJ 不会因你 LCA 的调用次数过多返回 `WA`，但如果超过了 $n \\times 300$ 次，那么后面的 LCA 调用结果都是 `-1`。**\n\n题目附件里有一个示范模板 `template.cpp`，使用它你可以获得 $0$ 分的好成绩。", "inputFormat": "", "outputFormat": "", "hint": "### 样例解释\n\n| You | Interactor |\n| :----------: | :----------: |\n| `LCA(1,2)` | `1` |\n| `1 2` | Accepted |\n\n除了样例输出，输出 `2 1` 也是一个合法的解。\n\n---\n\n### 数据范围与约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^4$。\n\n**部分分：数据共有 $20$ 组，对于第 $i$ 组数据，保证树的叶子个数至多为 $i$。**\n\n---\n\n### 提示\n\n如果你不知道怎么解决交互题，可以参考[这题](P1947)。\n\n本题模板程序与模板交互库见附件中的 `template.cpp` 与 `s_interactor.cpp`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Opoi 2025] CCD 的长恨歌", "background": "~~前几天~~ 一年前 CCD 因为模拟赛挂分而被 \\_Eriri\\_ 嘲讽，于是他准备出一道题来嘲讽 \\_Eriri\\_。\n\n> 栋皇重色思倾国，御宇多年求不得。\n>\n> 蒋家有女初长成，养在深闺人未识。\n>\n> 天生丽质难自弃，一朝选在君王侧。\n>\n> 回眸一笑百媚生，六宫粉黛无颜色。\n\n[upd 2025/5/5]. <- 链接赛前一天被 \\_Eriri\\_ 删除……", "description": "**请注意，此题仅支持 C++11 及以上提交！**\n\n栋明皇有一棵非常神秘的有 $n$ 个点的有根树 $T$，根为 $1$。\n\n而你，作为尊贵的蒋贵妃，非常想知道树 $T$ 的形态，但你每次只能向栋明皇问一个二元组 $(i,j)\\ (1 \\le i , j \\le n)$，栋明皇会告诉你这两个点在树上的最近公共祖先 $k$。由于栋明皇还要忙着筹备 Opoi，他只允许你向他问 $n \\times 300$ 次问题。\n\n幸运的是，栋明皇喜欢紧凑的结构，所以这颗树的**叶子个数至多为 $20$**。\n\n本题是一道交互题。\n\n提交时，请在程序中加入以下函数声明语句：\n\n```cpp\nint LCA(int,int);\n```\n\n这使你可以调用 `LCA(x,y)` 并得到它们的 LCA。\n\n你不需要，也不应该实现主函数，你只需要实现下列函数：\n\n```cpp\nvector<pair<int, int> > guess(int n);\n```\n\n- 每个测试点交互库只会调用一次该函数。\n- 其中 $n$ 表示本次猜测的树 $T$ 的结点个数。\n- 返回的 vector 描述了树 $T$ 的结构，其中 `vector` 的每一个 `pair<int, int>` 表示树的一条边 $(u,v)$，每条边两个节点的顺序和边与边之间的顺序没有要求。\n- 单次 `LCA(x, y)` 复杂度是严格 $O(1)$ 的，交互库预处理复杂度 $O(n \\log_2 n)$。\n- **SPJ 不会因你 LCA 的调用次数过多返回 `WA`，但如果超过了 $n \\times 300$ 次，那么后面的 LCA 调用结果都是 `-1`。**\n\n题目附件里有一个示范模板 `template.cpp`，使用它你可以获得 $0$ 分的好成绩。", "inputFormat": "", "outputFormat": "", "hint": "### 样例解释\n\n| You | Interactor |\n| :----------: | :----------: |\n| `LCA(1,2)` | `1` |\n| `1 2` | Accepted |\n\n除了样例输出，输出 `2 1` 也是一个合法的解。\n\n---\n\n### 数据范围与约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^4$。\n\n**部分分：数据共有 $20$ 组，对于第 $i$ 组数据，保证树的叶子个数至多为 $i$。**\n\n---\n\n### 提示\n\n如果你不知道怎么解决交互题，可以参考[这题](P1947)。\n\n本题模板程序与模板交互库见附件中的 `template.cpp` 与 `s_interactor.cpp`。", "locale": "zh-CN"}}}
{"pid": "P14763", "type": "P", "difficulty": 6, "samples": [["2 1.00\n4.00 12.00\n12.00 4.00", "6.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树状数组", "三分", "O2优化"], "title": "[Opoi 2025] CCD 的赌局", "background": "CCD 经营的赌场濒临倒闭，他只好玩点新花样。", "description": "**下方有形式化题意。**\n\nCCD 决定通过作弊的方式赢取利润，他邀请到了两个考场读错题此时痛不欲生的 Oier 小 L 和小 T 作为内部人员。\n\n具体的，CCD 决定让小 L 和小 T 玩 $n$ 轮，每轮恰好有一人获胜。\n\nCCD 为了借此机会捞一笔，大放广告吸引了一大群人前来下注（赌每一轮谁赢），为了让赌博看上去更有吸引力，所以 CCD 决定使**小 L 胜的单位返还金额与小 T 胜的单位返还金额之和为 $T$**。并且为了赚更多的钱，CCD 可以在中间某两轮之间更改单位返还金额，但是要求双方的总和仍然为 $T$，并且只能更改一次。但可惜的是，内部人员小 L 和小 T 早已和其他人私底下串通好了，**在每一轮中，他们总是会选择返还金额更大的结果**。（比如若小 L 在这一轮中胜利获得的返还金额比小 T 在这一轮中胜利获得的返还金额更大，小 L 和小 T 就会操控赌局结果使得小 L 获胜）\n\n现在 CCD 通过某些手段知道了每一轮双方的下注金额，记为 $a_i,b_i$。他想要通过设定两次（或一次）的返还金额，使得他最后返还的金额最小，并求出这个值。\n\n由于 CCD 数学不好，于是他向你求助。\n\n> **单位返还金额和返还金额**：如果这一轮小 L 的单位返还金额为 $a$，小 T 的单位返还金额为 $b$，其他人押了 $x$ 块钱赌小 L 胜，$y$ 块钱赌小 L 胜，如果小 L 获胜那么返还金额就会增加 $a\\cdot x$ 块钱，但是如果结果小 L 输了，返还金额就会增加 $b\\cdot y$ 块钱。\n\n### 形式化题意\n\n给定 $n$，$T$，以及两个实数序列 $a_{1\\dots n}$，$b_{1\\dots n}$。\n\n你可以任意设定 $4$ 个非负实数 $A_1,B_1,A_2,B_2$ 以及一个整数 $k \\in [0,n]$，使得他们满足 $T=A_1+B_1=A_2+B_2$。求如下式子的最小值：\n\n\n$$\\sum_{i=1}^{k}\\max(A_1\\times a_i, B_1 \\times b_i) + \\sum_{i=k+1}^{n}\\max(A_2\\times a_i, B_2 \\times b_i)$$\n\n特别的，当 $s > e$ 时，定义 $\\sum\\limits_{i=s}^{e} f(i)$ 的值为 $0$。", "inputFormat": "第一行一个整数 $n$，一个非负实数 $T$。\n\n接下来 $n$ 行，第 $i$ 行两个非负实数 $a_i,b_i$，表示第 $i$ 轮对小 L 和小 T 下的注的和。", "outputFormat": "一行一个实数表示返还金额的最小值，四舍五入到小数点后二位。", "hint": "### 样例解释\n\n在第一轮之前时，设定小 L，小 T 的单位返还金额分别为 $0.75$，$0.25$。\n\n在第一轮以后，更改小 L，小 T 的单位返还金额分别为 $0.25$，$0.75$。\n\n此时返还金额有最小值 $\\max(4\\times 0.75,12\\times 0.25)+\\max(12\\times 0.25,4\\times 0.75)=6$。\n\n---\n\n### 数据范围与约定\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.2}\n\\begin{array}{|c|c|c|}\n\\hline\n\\begin{array}{c}\n\\tt{subtask}\\\\\\hline\n1\\\\\\hline\n2\\\\\\hline\n3\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\nn\\\\\\hline\n\\le 10\\\\\\hline\n\\le 10^{3}\\\\\\hline\n\\le 10^{5}\\\\\n\\end{array}\n&\n\\begin{array}{c}\n\\tt{pts}\\\\\\hline\n10\\\\\\hline\n40\\\\\\hline\n50\\\\\\hline\n\\end{array}\n\\\\\\hline\n\\end{array}\n$$\n\n对于所有数据，$2\\le n \\le 10^{5}$，$0 \\le T,a_i,b_i \\le 100$，且 $\\forall i \\in [1,n],0 < a_i + b_i$，输入文件中所有实数精确到两位小数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Opoi 2025] CCD 的赌局", "background": "CCD 经营的赌场濒临倒闭，他只好玩点新花样。", "description": "**下方有形式化题意。**\n\nCCD 决定通过作弊的方式赢取利润，他邀请到了两个考场读错题此时痛不欲生的 Oier 小 L 和小 T 作为内部人员。\n\n具体的，CCD 决定让小 L 和小 T 玩 $n$ 轮，每轮恰好有一人获胜。\n\nCCD 为了借此机会捞一笔，大放广告吸引了一大群人前来下注（赌每一轮谁赢），为了让赌博看上去更有吸引力，所以 CCD 决定使**小 L 胜的单位返还金额与小 T 胜的单位返还金额之和为 $T$**。并且为了赚更多的钱，CCD 可以在中间某两轮之间更改单位返还金额，但是要求双方的总和仍然为 $T$，并且只能更改一次。但可惜的是，内部人员小 L 和小 T 早已和其他人私底下串通好了，**在每一轮中，他们总是会选择返还金额更大的结果**。（比如若小 L 在这一轮中胜利获得的返还金额比小 T 在这一轮中胜利获得的返还金额更大，小 L 和小 T 就会操控赌局结果使得小 L 获胜）\n\n现在 CCD 通过某些手段知道了每一轮双方的下注金额，记为 $a_i,b_i$。他想要通过设定两次（或一次）的返还金额，使得他最后返还的金额最小，并求出这个值。\n\n由于 CCD 数学不好，于是他向你求助。\n\n> **单位返还金额和返还金额**：如果这一轮小 L 的单位返还金额为 $a$，小 T 的单位返还金额为 $b$，其他人押了 $x$ 块钱赌小 L 胜，$y$ 块钱赌小 L 胜，如果小 L 获胜那么返还金额就会增加 $a\\cdot x$ 块钱，但是如果结果小 L 输了，返还金额就会增加 $b\\cdot y$ 块钱。\n\n### 形式化题意\n\n给定 $n$，$T$，以及两个实数序列 $a_{1\\dots n}$，$b_{1\\dots n}$。\n\n你可以任意设定 $4$ 个非负实数 $A_1,B_1,A_2,B_2$ 以及一个整数 $k \\in [0,n]$，使得他们满足 $T=A_1+B_1=A_2+B_2$。求如下式子的最小值：\n\n\n$$\\sum_{i=1}^{k}\\max(A_1\\times a_i, B_1 \\times b_i) + \\sum_{i=k+1}^{n}\\max(A_2\\times a_i, B_2 \\times b_i)$$\n\n特别的，当 $s > e$ 时，定义 $\\sum\\limits_{i=s}^{e} f(i)$ 的值为 $0$。", "inputFormat": "第一行一个整数 $n$，一个非负实数 $T$。\n\n接下来 $n$ 行，第 $i$ 行两个非负实数 $a_i,b_i$，表示第 $i$ 轮对小 L 和小 T 下的注的和。", "outputFormat": "一行一个实数表示返还金额的最小值，四舍五入到小数点后二位。", "hint": "### 样例解释\n\n在第一轮之前时，设定小 L，小 T 的单位返还金额分别为 $0.75$，$0.25$。\n\n在第一轮以后，更改小 L，小 T 的单位返还金额分别为 $0.25$，$0.75$。\n\n此时返还金额有最小值 $\\max(4\\times 0.75,12\\times 0.25)+\\max(12\\times 0.25,4\\times 0.75)=6$。\n\n---\n\n### 数据范围与约定\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.2}\n\\begin{array}{|c|c|c|}\n\\hline\n\\begin{array}{c}\n\\tt{subtask}\\\\\\hline\n1\\\\\\hline\n2\\\\\\hline\n3\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\nn\\\\\\hline\n\\le 10\\\\\\hline\n\\le 10^{3}\\\\\\hline\n\\le 10^{5}\\\\\n\\end{array}\n&\n\\begin{array}{c}\n\\tt{pts}\\\\\\hline\n10\\\\\\hline\n40\\\\\\hline\n50\\\\\\hline\n\\end{array}\n\\\\\\hline\n\\end{array}\n$$\n\n对于所有数据，$2\\le n \\le 10^{5}$，$0 \\le T,a_i,b_i \\le 100$，且 $\\forall i \\in [1,n],0 < a_i + b_i$，输入文件中所有实数精确到两位小数。", "locale": "zh-CN"}}}
{"pid": "P14764", "type": "P", "difficulty": 6, "samples": [["10\n8 3 1 3 1 3 1 1 1 8 \n10\n1 5 1\n13 1 13\n8 8 1\n0 8 5\n2 5 2\n2 7 7\n6 7 1\n2 10 2\n9 10 10\n6 10 3", "8\n0\n1\n0\n3\n0\n3\n8\n0\n1"]], "limits": {"time": [600, 600, 600, 600, 600, 600, 600, 600, 600], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "可持久化线段树", "根号分治"], "title": "[Opoi 2025] CCD 的不难题", "background": "CCD 曾经做过一道难题：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r411eojy.png)\n\n但是这道题太难了，题面太长写不下，所以只好放一道不难题。", "description": "给你一个长度为 $n$ 的序列，有 $q$ 次询问，每次查询 $[l,r]$ 中恰好出现 $k$ 次的最大数。无解输出 $0$。\n\n**强制在线。**", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_i$。\n\n第三行一个正整数 $q$。\n\n之后 $q$ 行，每行三个正整数 $l,r,k\\ (l\\leq r)$。\n\n本题强制在线，每次查询输入的所有数要 xor 上 $lastans$ 进行解密，第一次询问默认 $lastans=0$。", "outputFormat": "对于每次询问，输出对应的答案。", "hint": "加密前的样例：\n```text\n10\n8 3 1 3 1 3 1 1 1 8 \n10\n1 5 1\n5 9 5\n8 8 1\n1 9 4\n2 5 2\n1 4 4\n6 7 1\n1 9 1\n1 2 2\n6 10 3\n```\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.2}\n\\begin{array}{|c|c|c|}\n\\hline\n\\begin{array}{c}\n\\tt{subtask}\\\\\\hline\n1\\\\\\hline\n2\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\nn,q\\\\\\hline\n\\le 10^4\\\\\\hline\n\\le 5\\times10^4\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\n\\tt{pts}\\\\\\hline\n20\\\\\\hline\n80\\\\\\hline\n\\end{array}\n\\\\\\hline\n\\end{array}\n$$\n\n对于所有数据，$1\\leq k,a_i\\leq n\\leq 5\\times10^4$，$1\\leq q\\leq 5\\times10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Opoi 2025] CCD 的不难题", "background": "CCD 曾经做过一道难题：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r411eojy.png)\n\n但是这道题太难了，题面太长写不下，所以只好放一道不难题。", "description": "给你一个长度为 $n$ 的序列，有 $q$ 次询问，每次查询 $[l,r]$ 中恰好出现 $k$ 次的最大数。无解输出 $0$。\n\n**强制在线。**", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_i$。\n\n第三行一个正整数 $q$。\n\n之后 $q$ 行，每行三个正整数 $l,r,k\\ (l\\leq r)$。\n\n本题强制在线，每次查询输入的所有数要 xor 上 $lastans$ 进行解密，第一次询问默认 $lastans=0$。", "outputFormat": "对于每次询问，输出对应的答案。", "hint": "加密前的样例：\n```text\n10\n8 3 1 3 1 3 1 1 1 8 \n10\n1 5 1\n5 9 5\n8 8 1\n1 9 4\n2 5 2\n1 4 4\n6 7 1\n1 9 1\n1 2 2\n6 10 3\n```\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.2}\n\\begin{array}{|c|c|c|}\n\\hline\n\\begin{array}{c}\n\\tt{subtask}\\\\\\hline\n1\\\\\\hline\n2\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\nn,q\\\\\\hline\n\\le 10^4\\\\\\hline\n\\le 5\\times10^4\\\\\\hline\n\\end{array}\n&\n\\begin{array}{c}\n\\tt{pts}\\\\\\hline\n20\\\\\\hline\n80\\\\\\hline\n\\end{array}\n\\\\\\hline\n\\end{array}\n$$\n\n对于所有数据，$1\\leq k,a_i\\leq n\\leq 5\\times10^4$，$1\\leq q\\leq 5\\times10^4$。", "locale": "zh-CN"}}}
{"pid": "P14765", "type": "P", "difficulty": 2, "samples": [["3 6\n350 360 370 380 390 400\n240 240 240 240 240 240\n480 480 520 600 600 600", "3 2 2 1 1 1"], ["4 5\n1 1 1 1 1\n1 1 1 1 1\n1 1 1 1 1\n1 1 1 1 1", "4 4 4 4 4"], ["3 5\n1 1 1 1 1\n5 5 5 5 5\n25 25 25 25 25", "3 1 1 1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "差分", "ICPC", "首尔"], "title": "[ICPC 2024 Seoul R] Bottles", "background": "", "description": "In the famous ICPC race, $ n $ runners will participate. The course is $ m $ kilometers long and for safety, it is divided into $ m $ ranges. Each range is one kilometer long and Range $ i $ ($ 1 \\leq i \\leq m $) is the interval $ (i-1, i) $, which is the section between $ i-1 $ km and $ i $ km from the starting point. We will ignore the case where the distance between the starting point and a runner is an integer. As the weather is quite hot, the organizers would like to put enough water. They will maintain a certain number of water bottles in each range. When a runner takes one bottle, they will put another immediately. They have found that the optimal number of water bottles could be obtained by calculating the maximum number of runners in that interval during the race. Based on the previous records of each runner, they have estimated how many seconds he/she will spend in each range.\n\nConsider the following example. There are three runners, and the length of the course is six kilometers. The table shows the amount of time runners will spend in each range (in seconds).\n\n| Runner | Range 1 | Range 2 | Range 3 | Range 4 | Range 5 | Range 6 |\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n| 1 | 350s | 360s | 370s | 380s | 390s | 400s |\n| 2 | 240s | 240s | 240s | 240s | 240s | 240s |\n| 3 | 480s | 480s | 520s | 600s | 600s | 600s |\n\nNow we will check the number of runners in each range during the race. Intentionally, the table below is not complete. When you fill the whole table and compute the maximum number of runners for each range, you can see that you need to put three bottles of water in Range 1, two in Range 2 and Range 3, and one in Range 4, Range 5, and Range 6. Note that at $ 480s $, Runner 2 leaves Range 2 and Runner 3 arrives at Range 2, both of which will be ignored as their distance from the starting point is an integer. At $ 480s $, no runner is in Range 1 and in Range 3 and Runner 1 is in Range 2. Then, for example, at $ 481s $, Runner 1 and Runner 3 will be in Range 2.\n\n| Time elapsed | Range 1 | Range 2 | Range 3 | Range 4 | Range 5 | Range 6 |\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n| (0s, 240s) | 3 | 0 | 0 | 0 | 0 | 0 |\n| (240s, 350s) | 2 | 1 | 0 | 0 | 0 | 0 |\n| (350s, 480s) | 1 | 2 | 0 | 0 | 0 | 0 |\n| (480s, 710s) | 0 | 2 | 1 | 0 | 0 | 0 |\n| (710s, 720s) | 0 | 1 | 2 | 0 | 0 | 0 |\n| ... | ... | ... | ... | ... | ... | ... |\n\nGiven the number of runners, the length of the course, and the amount of time each runner will spend in each range, write a program to compute the number of bottles to be put in each range.\n", "inputFormat": "Your program is to read from standard input. The input starts with a line containing two integers, $ n $ and $ m $ ($ 1 \\leq n \\leq 100 $, $ 1 \\leq m \\leq 300 $), where $ n $ is the number of runners and $ m $ is the length of the course. In the following $ n $ lines, the $ i $-th line contains $ m $ positive integers that represent the amount of time Runner $ i $ will spend in each range. More precisely, the $ j $-th number on the line is the time Runner $ i $ will spend in Range $ j $. No runner will spend more than $ 10,000 $ seconds in any range.\n", "outputFormat": "Your program is to write to standard output. Print exactly one line. The line should contain the numbers of bottles in each range from Range 1 to Range $ m $.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Seoul R] Bottles", "background": "", "description": "In the famous ICPC race, $ n $ runners will participate. The course is $ m $ kilometers long and for safety, it is divided into $ m $ ranges. Each range is one kilometer long and Range $ i $ ($ 1 \\leq i \\leq m $) is the interval $ (i-1, i) $, which is the section between $ i-1 $ km and $ i $ km from the starting point. We will ignore the case where the distance between the starting point and a runner is an integer. As the weather is quite hot, the organizers would like to put enough water. They will maintain a certain number of water bottles in each range. When a runner takes one bottle, they will put another immediately. They have found that the optimal number of water bottles could be obtained by calculating the maximum number of runners in that interval during the race. Based on the previous records of each runner, they have estimated how many seconds he/she will spend in each range.\n\nConsider the following example. There are three runners, and the length of the course is six kilometers. The table shows the amount of time runners will spend in each range (in seconds).\n\n| Runner | Range 1 | Range 2 | Range 3 | Range 4 | Range 5 | Range 6 |\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n| 1 | 350s | 360s | 370s | 380s | 390s | 400s |\n| 2 | 240s | 240s | 240s | 240s | 240s | 240s |\n| 3 | 480s | 480s | 520s | 600s | 600s | 600s |\n\nNow we will check the number of runners in each range during the race. Intentionally, the table below is not complete. When you fill the whole table and compute the maximum number of runners for each range, you can see that you need to put three bottles of water in Range 1, two in Range 2 and Range 3, and one in Range 4, Range 5, and Range 6. Note that at $ 480s $, Runner 2 leaves Range 2 and Runner 3 arrives at Range 2, both of which will be ignored as their distance from the starting point is an integer. At $ 480s $, no runner is in Range 1 and in Range 3 and Runner 1 is in Range 2. Then, for example, at $ 481s $, Runner 1 and Runner 3 will be in Range 2.\n\n| Time elapsed | Range 1 | Range 2 | Range 3 | Range 4 | Range 5 | Range 6 |\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n| (0s, 240s) | 3 | 0 | 0 | 0 | 0 | 0 |\n| (240s, 350s) | 2 | 1 | 0 | 0 | 0 | 0 |\n| (350s, 480s) | 1 | 2 | 0 | 0 | 0 | 0 |\n| (480s, 710s) | 0 | 2 | 1 | 0 | 0 | 0 |\n| (710s, 720s) | 0 | 1 | 2 | 0 | 0 | 0 |\n| ... | ... | ... | ... | ... | ... | ... |\n\nGiven the number of runners, the length of the course, and the amount of time each runner will spend in each range, write a program to compute the number of bottles to be put in each range.\n", "inputFormat": "Your program is to read from standard input. The input starts with a line containing two integers, $ n $ and $ m $ ($ 1 \\leq n \\leq 100 $, $ 1 \\leq m \\leq 300 $), where $ n $ is the number of runners and $ m $ is the length of the course. In the following $ n $ lines, the $ i $-th line contains $ m $ positive integers that represent the amount of time Runner $ i $ will spend in each range. More precisely, the $ j $-th number on the line is the time Runner $ i $ will spend in Range $ j $. No runner will spend more than $ 10,000 $ seconds in any range.\n", "outputFormat": "Your program is to write to standard output. Print exactly one line. The line should contain the numbers of bottles in each range from Range 1 to Range $ m $.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Seoul R] Bottles", "background": "", "description": "在著名的 ICPC 竞赛中，将有 $n$ 名选手参加。赛道全长 $m$ 公里，出于安全考虑，它被划分为 $m$ 个路段。每个路段长一公里，路段 $i$ ($1 \\leq i \\leq m$) 是区间 $(i-1, i)$，即距离起点 $i-1$ 公里到 $i$ 公里之间的路段。我们将忽略选手距离起点恰好为整数公里的情况。由于天气非常炎热，主办方希望提供充足的饮用水。他们将在每个路段维持一定数量的水瓶。当选手拿走一个水瓶时，他们会立即补充一个。他们发现，通过计算比赛中每个路段内同时存在的选手数量的最大值，可以确定该路段最优的水瓶数量。根据每位选手过往的记录，他们预估了每位选手在每个路段将花费的时间（以秒为单位）。\n\n考虑以下例子。有三名选手，赛道长度为六公里。下表显示了选手在每个路段将花费的时间（单位：秒）。\n\n| 选手 | 路段 1 | 路段 2 | 路段 3 | 路段 4 | 路段 5 | 路段 6 |\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n| 1 | 350 秒 | 360 秒 | 370 秒 | 380 秒 | 390 秒 | 400 秒 |\n| 2 | 240 秒 | 240 秒 | 240 秒 | 240 秒 | 240 秒 | 240 秒 |\n| 3 | 480 秒 | 480 秒 | 520 秒 | 600 秒 | 600 秒 | 600 秒 |\n\n现在我们来检查比赛期间每个路段内的选手数量。为了方便，下表并不完整。当你填满整个表格并计算每个路段的最大选手数时，你会发现需要在路段 1 放置 3 瓶水，路段 2 和路段 3 放置 2 瓶，路段 4、5、6 各放置 1 瓶。注意，在 $480$ 秒时，选手 2 离开路段 2 而选手 3 到达路段 2，这两者都会被忽略，因为他们距离起点的位置恰好是整数公里。在 $480$ 秒时，没有选手在路段 1 和路段 3，而选手 1 在路段 2。那么，例如，在 $481$ 秒时，选手 1 和选手 3 将同时在路段 2。\n\n| 经过时间 | 路段 1 | 路段 2 | 路段 3 | 路段 4 | 路段 5 | 路段 6 |\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n| (0 秒, 240 秒) | 3 | 0 | 0 | 0 | 0 | 0 |\n| (240 秒, 350 秒) | 2 | 1 | 0 | 0 | 0 | 0 |\n| (350 秒, 480 秒) | 1 | 2 | 0 | 0 | 0 | 0 |\n| (480 秒, 710 秒) | 0 | 2 | 1 | 0 | 0 | 0 |\n| (710 秒, 720 秒) | 0 | 1 | 2 | 0 | 0 | 0 |\n| ... | ... | ... | ... | ... | ... | ... |\n\n给定选手数量、赛道长度以及每位选手在每个路段将花费的时间，请编写一个程序，计算每个路段需要放置的水瓶数量。", "inputFormat": "你的程序需要从标准输入读取数据。输入的第一行包含两个整数 $n$ 和 $m$ ($1 \\leq n \\leq 100$, $1 \\leq m \\leq 300$)，其中 $n$ 是选手数量，$m$ 是赛道长度。接下来的 $n$ 行中，第 $i$ 行包含 $m$ 个正整数，表示选手 $i$ 在每个路段将花费的时间。更具体地说，该行的第 $j$ 个数是选手 $i$ 在路段 $j$ 将花费的时间。任何选手在任何路段花费的时间都不会超过 $10,000$ 秒。", "outputFormat": "你的程序需要向标准输出写入结果。输出恰好一行。该行应包含从路段 1 到路段 $m$ 每个路段需要放置的水瓶数量。\n", "hint": "", "locale": "zh-CN"}}}
