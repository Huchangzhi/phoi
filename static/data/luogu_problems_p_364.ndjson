{"pid": "P8377", "type": "P", "difficulty": 2, "samples": [["3\n7\n14\n114514", "6\n5\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "洛谷月赛"], "title": "[PFOI Round1] 暴龙的火锅", "background": "暴龙爱吃火锅。", "description": "定义 $S(x)$ 表示 $x$ 的每一位的数字之和，例如：$S(14)=1+4=5$，$S(114514)=1+1+4+5+1+4=16.$\n\n另外，定义 $fib(x)$ 代表斐波那契数列的第 $x$ 项，具体地：\n\n$$fib(1)=fib(2)=1,\\ fib(x)=fib(x-1)+fib(x-2)\\ (x≥3).$$\n\n现在给定 $n$，求出下式的值，其中 $\\bmod 9$ 表示对 $9$ 取余数：\n\n$$(S(fib(1))+S(fib(2))+S(fib(3))+...+S(fib(n))) \\bmod 9.$$", "inputFormat": "第一行一个整数 $T$。\n\n接下来 $T$ 组问询，每次一个整数 $n$。", "outputFormat": "$T$ 行，每行一个整数代表答案。", "hint": "【样例解释】\n\n对于第一组询问，$n=7$，答案为： \n\n$$\n\\begin{aligned}\n& \\ \\ \\ \\ \\ (S(fib(1))+S(fib(2))\\ldots+S(fib(6))+S(fib(7)))\\bmod 9 \\\\\n& =(1+1+2+3+5+8+(1+3))\\bmod 9 \\\\\n& =6.\n\\end{aligned}\n$$\n\n---\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}T=1,\\ n\\le 10$；\n- $\\texttt{Subtask 2(30 pts)：}T=10^2,\\ n\\le 10^3$；\n- $\\texttt{Subtask 3(60 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10^5,\\ 1\\le n\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PFOI Round1] 暴龙的火锅", "background": "暴龙爱吃火锅。", "description": "定义 $S(x)$ 表示 $x$ 的每一位的数字之和，例如：$S(14)=1+4=5$，$S(114514)=1+1+4+5+1+4=16.$\n\n另外，定义 $fib(x)$ 代表斐波那契数列的第 $x$ 项，具体地：\n\n$$fib(1)=fib(2)=1,\\ fib(x)=fib(x-1)+fib(x-2)\\ (x≥3).$$\n\n现在给定 $n$，求出下式的值，其中 $\\bmod 9$ 表示对 $9$ 取余数：\n\n$$(S(fib(1))+S(fib(2))+S(fib(3))+...+S(fib(n))) \\bmod 9.$$", "inputFormat": "第一行一个整数 $T$。\n\n接下来 $T$ 组问询，每次一个整数 $n$。", "outputFormat": "$T$ 行，每行一个整数代表答案。", "hint": "【样例解释】\n\n对于第一组询问，$n=7$，答案为： \n\n$$\n\\begin{aligned}\n& \\ \\ \\ \\ \\ (S(fib(1))+S(fib(2))\\ldots+S(fib(6))+S(fib(7)))\\bmod 9 \\\\\n& =(1+1+2+3+5+8+(1+3))\\bmod 9 \\\\\n& =6.\n\\end{aligned}\n$$\n\n---\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}T=1,\\ n\\le 10$；\n- $\\texttt{Subtask 2(30 pts)：}T=10^2,\\ n\\le 10^3$；\n- $\\texttt{Subtask 3(60 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10^5,\\ 1\\le n\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P8378", "type": "P", "difficulty": 3, "samples": [["4\n3\n20\n8492\n114514", "3\n61560\n822256526\n988192964\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "[PFOI Round1] Two Sequences", "background": "syzf2222 喜欢并查集！特别是路径压缩的并查集。", "description": "\n\n```cpp\ninline int find(int x){\n\tif(x==fa[x])return x;\n\treturn fa[x]=find(fa[x]);\n}\ninline void merge(int x,int y){\n\tfx=find(x),fy=find(y);\n\tif(fx==fy)return;fa[fx]=fy;\n}\n```\n\n这是他惯用的并查集代码，初始时对于每个 $x$ 有 `fa[x]=x`。\n\n接下来的 $T$ 天中，每天小 h 都给了他一个 $n$，表示并查集的大小（每天的 $n$ 可能是不同的）。\n\n调皮的小 x 见他不在机房，每天都在并查集上不断 `merge`。\n注意到小 x 不喜欢 `==`，他觉得这特别像他的眼睛，于是他不会使 `merge` 函数在第二行的条件语句中被 `return`，否则他会十分气愤。\n\n现在的已知信息就只有最终的 $fa$ 数组了。\n而 syzf2222 希望还原小 x 的操作序列（即若干次按顺序进行的 `merge` 操作）。由于他名字里有很多个 2 而且本人也非常 2 ，他希望知道对于每一天，有多少个 $fa$ 数组**恰好**能被还原成**两种**操作序列，答案对 $998244353$ 取余数。\n\n两个操作序列不同，当且仅当某次 `merge` 时的变量 `fx,fy` 至少有一个不同。\n\n", "inputFormat": "第一行一个整数 $T$。\n\n后面 $T$ 行，每行读入一个整数 $n$ 表示小 h 给的数。", "outputFormat": "$T$ 行，每行一个整数表示答案对 $998244353$ 取余数的结果。", "hint": "【样例解释】\n\n对于第一天，$n=3$，共有 $fa=[1,1,1],[2,2,2],[3,3,3]$ 这三种 $fa$ 数组使得恰有两种操作序列。\n\n以 $fa=[1,1,1]$ 为例，两种操作序列分别为 `merge(2,1),merge(3,1)` 和 `merge(3,1),merge(2,1)`，其他 `merge` 参数不同的方案与上述两种的其中一种是本质相同的（每次的 `fx,fy` 都一样）。\n\n---\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}T=1,\\ n\\le 10$；\n- $\\texttt{Subtask 2(30 pts)：}T=10^2,\\ n\\le 10^3$；\n- $\\texttt{Subtask 3(60 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10^5,\\ 1\\le n\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PFOI Round1] Two Sequences", "background": "syzf2222 喜欢并查集！特别是路径压缩的并查集。", "description": "\n\n```cpp\ninline int find(int x){\n\tif(x==fa[x])return x;\n\treturn fa[x]=find(fa[x]);\n}\ninline void merge(int x,int y){\n\tfx=find(x),fy=find(y);\n\tif(fx==fy)return;fa[fx]=fy;\n}\n```\n\n这是他惯用的并查集代码，初始时对于每个 $x$ 有 `fa[x]=x`。\n\n接下来的 $T$ 天中，每天小 h 都给了他一个 $n$，表示并查集的大小（每天的 $n$ 可能是不同的）。\n\n调皮的小 x 见他不在机房，每天都在并查集上不断 `merge`。\n注意到小 x 不喜欢 `==`，他觉得这特别像他的眼睛，于是他不会使 `merge` 函数在第二行的条件语句中被 `return`，否则他会十分气愤。\n\n现在的已知信息就只有最终的 $fa$ 数组了。\n而 syzf2222 希望还原小 x 的操作序列（即若干次按顺序进行的 `merge` 操作）。由于他名字里有很多个 2 而且本人也非常 2 ，他希望知道对于每一天，有多少个 $fa$ 数组**恰好**能被还原成**两种**操作序列，答案对 $998244353$ 取余数。\n\n两个操作序列不同，当且仅当某次 `merge` 时的变量 `fx,fy` 至少有一个不同。\n\n", "inputFormat": "第一行一个整数 $T$。\n\n后面 $T$ 行，每行读入一个整数 $n$ 表示小 h 给的数。", "outputFormat": "$T$ 行，每行一个整数表示答案对 $998244353$ 取余数的结果。", "hint": "【样例解释】\n\n对于第一天，$n=3$，共有 $fa=[1,1,1],[2,2,2],[3,3,3]$ 这三种 $fa$ 数组使得恰有两种操作序列。\n\n以 $fa=[1,1,1]$ 为例，两种操作序列分别为 `merge(2,1),merge(3,1)` 和 `merge(3,1),merge(2,1)`，其他 `merge` 参数不同的方案与上述两种的其中一种是本质相同的（每次的 `fx,fy` 都一样）。\n\n---\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}T=1,\\ n\\le 10$；\n- $\\texttt{Subtask 2(30 pts)：}T=10^2,\\ n\\le 10^3$；\n- $\\texttt{Subtask 3(60 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10^5,\\ 1\\le n\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8379", "type": "P", "difficulty": 4, "samples": [["3 3 2\n1 1 2\n3 4 5\nQuery\nChange 2 1\nQuery", "666666677\n5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "Two Operations", "background": "**本题时限较小，请采用较快的读入方式，以下是出题人提供的快读模板：**\n\n```cpp\ntypedef long long LL;\ninline LL read(){\n\tregister LL x=0,f=1;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9'){\n\t\tif(c=='-') f=-1;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9') x=(x<<3)+(x<<1)+(c^48),c=getchar();\n\treturn x*f;\n}\n```\n\n当然你也可以采用自己的读入方法。", "description": "在一次聚会上，一共有 $n$ 名学生，他们的编号分别为 $1,2,3,\\cdots,n$，他们被分成 $k$ 组，组的编号分别为 $1,2,3,\\ldots,k$。\n\n小 V 老师负责组织这场聚会，在聚会的开始，第 $i$ 名学生被分到了第 $a_i$ 组，并拿到了 $b_i$ 颗糖果。（小 V 既不属于任何组别，也没有任何糖果。在接下来的活动中，小 V 作为组织者的身份。） \n\n这一次聚会一共有 $m$ 轮活动，对于每一轮活动，可能发生以下两种情况之一：\n\n1.  `Change X Y`，表示把所有组别为 $X$ 的学生的组别改为 $Y$（修改后 $X$ 即为空组），并把组 $X$ **删除**。\n2.  `Query`，表示小 V 想要知道，如果把**剩下**的组合并（定义见下） 成一大组，那么这一大组内**拥有最多糖果的学生的糖果数最少可能是多少**。\n\n定义一个组 $G_i$ 的大小就是这个组内含有学生的个数，记为 $S_i$。\n\n**合并**：将大小为 $S_1(S_1>0)$ 的组 $G_1$ 合并到大小为 $S_2(S_2>0)$ 的组 $G_2$，其中 $G_1$ 组内所有学生拥有糖果数之和为 $f$，则：\n\n1. 第一步，将原先 $G_1$ 中所有学生的糖果数都变为 $0$，并将他们的组别改为 $G_2$。\n2. 第二步，将目前 $G_2$ 中每位学生（包括原先 $G_1$ 中的学生）的糖果数加上 $\\dfrac{f}{S_1+S_2}$（糖果数不一定为整数块）。\n\n**注意：**\n\n1. $G_1$ 合并到 $G_2$ 的最后结果可能会与 $G_2$ 合并到 $G_1$ 的最后结果不同。\n2. `Query` 中的合并不会真实发生。即在这一次情况过后，所有学生的糖果数与所在组与此次操作未发生前一致。\n\n请将每次 `Query` 中的答案对 $10^9+7$ 取模。（可能是分数取模，如果不知道如何取模请见**提示说明**）", "inputFormat": "第一行三个整数 $n,m,k$。\n\n第二行 $n$ 个整数 $a_{1\\ldots n}$。\n\n第三行 $n$ 个整数 $b_{1\\ldots n}$。\n\n接下来 $m$ 行，每行对应一种情况。具体格式参见题目描述或输入输出样例。", "outputFormat": "输出若干行整数表示答案。", "hint": "【样例解释】\n\n第一次 `Query` 时，将第二组合并到第一组，此时三名学生的糖果数分别为 $\\dfrac{14}{3},\\dfrac{17}{3},\\dfrac{5}{3}$，糖果数最多的同学有 $\\dfrac{17}{3}$ 块糖果，取到了最小值，对 $10^9+7$ 取模后为 $666666677$。\n\n第二次 `Query` 时，所有学生都在同一组，而糖果数最多的同学有 $5$ 块糖果。\n\n---\n\n【数据范围】\n\n| 数据点 | $n$  | $m$  | $k$  | $a_i$ | $b_i$  |\n| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |\n| $1$ | $\\le 10$ |无特殊限制 | $\\le 10$ | $\\le 10$ | $\\le 100$ |\n| $2$ | $\\le 100$ | $\\le 10$ | $\\le 100$ | $\\le 100$ | $\\le 100$ |\n| $3$ | $\\le 10^5$ | $=1$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ |\n| $4$ | $\\le 10^5$ | 无特殊限制 | $=1$ | $=1$ | $\\le10^5$ |\n| $5$ | $\\le 10^3$ |无特殊限制 | $\\le 5$ | $\\le 5$ | $\\le 100$ |\n| $6$ | $\\le 10^4$ | $\\le 10^3$ | $\\le 10^4$ | $\\le 10^4$ | $\\le 10^5$ |\n| $7$ | $\\le 10^4$ | $\\le 5\\times10^3$ | $\\le 10^4$ | $\\le 10^4$ | $\\le 10^5$ |\n| $8$ | $\\le 10^5$ | 无特殊限制 | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ |\n| $9 $| $\\le 5\\times10^5$ | 无特殊限制 | $5\\times10^5$ | $5\\times10^5$ | $\\le 10^5$ |\n| $10$ | $\\le 10^6$ | 无特殊限制 | $\\le 10^6$ | $\\le 10^6$ | $\\le 10^5$ |\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n \\leq 10^6,\\ 1\\leq m \\leq 2\\times k-1,\\ 1 \\leq a_i\\leq k \\leq n,\\ 1 \\leq b_i \\leq 10^5$。**数据保证合法，初始时每组是非空的。**\n\n\n不熟悉有理数取模的请看[此处](/problem/solution/P2613)。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Two Operations", "background": "**本题时限较小，请采用较快的读入方式，以下是出题人提供的快读模板：**\n\n```cpp\ntypedef long long LL;\ninline LL read(){\n\tregister LL x=0,f=1;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9'){\n\t\tif(c=='-') f=-1;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9') x=(x<<3)+(x<<1)+(c^48),c=getchar();\n\treturn x*f;\n}\n```\n\n当然你也可以采用自己的读入方法。", "description": "在一次聚会上，一共有 $n$ 名学生，他们的编号分别为 $1,2,3,\\cdots,n$，他们被分成 $k$ 组，组的编号分别为 $1,2,3,\\ldots,k$。\n\n小 V 老师负责组织这场聚会，在聚会的开始，第 $i$ 名学生被分到了第 $a_i$ 组，并拿到了 $b_i$ 颗糖果。（小 V 既不属于任何组别，也没有任何糖果。在接下来的活动中，小 V 作为组织者的身份。） \n\n这一次聚会一共有 $m$ 轮活动，对于每一轮活动，可能发生以下两种情况之一：\n\n1.  `Change X Y`，表示把所有组别为 $X$ 的学生的组别改为 $Y$（修改后 $X$ 即为空组），并把组 $X$ **删除**。\n2.  `Query`，表示小 V 想要知道，如果把**剩下**的组合并（定义见下） 成一大组，那么这一大组内**拥有最多糖果的学生的糖果数最少可能是多少**。\n\n定义一个组 $G_i$ 的大小就是这个组内含有学生的个数，记为 $S_i$。\n\n**合并**：将大小为 $S_1(S_1>0)$ 的组 $G_1$ 合并到大小为 $S_2(S_2>0)$ 的组 $G_2$，其中 $G_1$ 组内所有学生拥有糖果数之和为 $f$，则：\n\n1. 第一步，将原先 $G_1$ 中所有学生的糖果数都变为 $0$，并将他们的组别改为 $G_2$。\n2. 第二步，将目前 $G_2$ 中每位学生（包括原先 $G_1$ 中的学生）的糖果数加上 $\\dfrac{f}{S_1+S_2}$（糖果数不一定为整数块）。\n\n**注意：**\n\n1. $G_1$ 合并到 $G_2$ 的最后结果可能会与 $G_2$ 合并到 $G_1$ 的最后结果不同。\n2. `Query` 中的合并不会真实发生。即在这一次情况过后，所有学生的糖果数与所在组与此次操作未发生前一致。\n\n请将每次 `Query` 中的答案对 $10^9+7$ 取模。（可能是分数取模，如果不知道如何取模请见**提示说明**）", "inputFormat": "第一行三个整数 $n,m,k$。\n\n第二行 $n$ 个整数 $a_{1\\ldots n}$。\n\n第三行 $n$ 个整数 $b_{1\\ldots n}$。\n\n接下来 $m$ 行，每行对应一种情况。具体格式参见题目描述或输入输出样例。", "outputFormat": "输出若干行整数表示答案。", "hint": "【样例解释】\n\n第一次 `Query` 时，将第二组合并到第一组，此时三名学生的糖果数分别为 $\\dfrac{14}{3},\\dfrac{17}{3},\\dfrac{5}{3}$，糖果数最多的同学有 $\\dfrac{17}{3}$ 块糖果，取到了最小值，对 $10^9+7$ 取模后为 $666666677$。\n\n第二次 `Query` 时，所有学生都在同一组，而糖果数最多的同学有 $5$ 块糖果。\n\n---\n\n【数据范围】\n\n| 数据点 | $n$  | $m$  | $k$  | $a_i$ | $b_i$  |\n| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |\n| $1$ | $\\le 10$ |无特殊限制 | $\\le 10$ | $\\le 10$ | $\\le 100$ |\n| $2$ | $\\le 100$ | $\\le 10$ | $\\le 100$ | $\\le 100$ | $\\le 100$ |\n| $3$ | $\\le 10^5$ | $=1$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ |\n| $4$ | $\\le 10^5$ | 无特殊限制 | $=1$ | $=1$ | $\\le10^5$ |\n| $5$ | $\\le 10^3$ |无特殊限制 | $\\le 5$ | $\\le 5$ | $\\le 100$ |\n| $6$ | $\\le 10^4$ | $\\le 10^3$ | $\\le 10^4$ | $\\le 10^4$ | $\\le 10^5$ |\n| $7$ | $\\le 10^4$ | $\\le 5\\times10^3$ | $\\le 10^4$ | $\\le 10^4$ | $\\le 10^5$ |\n| $8$ | $\\le 10^5$ | 无特殊限制 | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ |\n| $9 $| $\\le 5\\times10^5$ | 无特殊限制 | $5\\times10^5$ | $5\\times10^5$ | $\\le 10^5$ |\n| $10$ | $\\le 10^6$ | 无特殊限制 | $\\le 10^6$ | $\\le 10^6$ | $\\le 10^5$ |\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n \\leq 10^6,\\ 1\\leq m \\leq 2\\times k-1,\\ 1 \\leq a_i\\leq k \\leq n,\\ 1 \\leq b_i \\leq 10^5$。**数据保证合法，初始时每组是非空的。**\n\n\n不熟悉有理数取模的请看[此处](/problem/solution/P2613)。\n", "locale": "zh-CN"}}}
{"pid": "P8380", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3\n3 4 5 \n6 7 8", "3\n8\n15"], ["2\n999 9999 99999\n2000 20000 200000", "101202\n202276"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "Two Hypercubes", "background": "注：数据已经加强。", "description": "$T$ 次询问，每次给定 $A,B,C$，求：\n\n$$\\Big(\\sum_{x=1}^A\\sum_{y=1}^B\\sum_{z=1}^C[y^x=x^z]\\Big)\\bmod (10^9+7).$$", "inputFormat": "第一行一个正整数 $T$。\n\n接下来 $T$ 行，每行三个正整数 $A,B,C$。", "outputFormat": "$T$ 个整数 $\\text{ans}$ 表示答案。以换行符隔开。", "hint": "【样例 1 解释】\n\n第一组询问 $A=1,B=2,C=3$，满足条件的三元组 $(x,y,z)$ 有 $(1,1,1),(1,1,2),(1,1,3).$\n\n第二组询问 $A=3,B=4,C=5$，满足条件的三元组 $(x,y,z)$ 有：\n\n$(1,1,1),(1,1,2),(1,1,3),(1,1,4),(1,1,5),(2,2,2),(2,4,4),(3,3,3).$\n\n第三组询问 $A=6,B=7,C=8$，满足条件的三元组 $(x,y,z)$ 有：\n\n$(1,1,1),(1,1,2),(1,1,3),(1,1,4),(1,1,5),(1,1,6),(1,1,7),(1,1,8);$\n\n$(2,2,2),(2,4,4),(3,3,3),(4,2,2),(4,4,4),(5,5,5),(6,6,6).$\n\n---\n\n【数据范围】\n\n对 $100\\%$ 的数据，满足 $1\\leq T\\leq 2\\times 10^4,\\ 1\\leq A,B,C\\leq 10^{18}$。\n\n\n- $\\text{Subtask}\\ 0(5\\ \\text{pts})$：$T,A,B,C\\leq 11$。\n- $\\text{Subtask}\\ 1(7\\ \\text{pts})$： $T\\leq 20,\\ A,B,C\\leq 3333$。\n- $\\text{Subtask}\\ 2(17\\ \\text{pts})$：$T\\leq 20,\\ A,B\\leq 10^{10},\\ C\\leq 3333$。\n- $\\text{Subtask}\\ 3(17\\ \\text{pts})$：$T\\leq 20,\\ A,B,C\\leq 10^{10}$。\n- $\\text{Subtask}\\ 4(27\\ \\text{pts})$：$A,B,C\\leq 10^{11}$。\n- $\\text{Subtask}\\ 5(27\\ \\text{pts})$：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Two Hypercubes", "background": "注：数据已经加强。", "description": "$T$ 次询问，每次给定 $A,B,C$，求：\n\n$$\\Big(\\sum_{x=1}^A\\sum_{y=1}^B\\sum_{z=1}^C[y^x=x^z]\\Big)\\bmod (10^9+7).$$", "inputFormat": "第一行一个正整数 $T$。\n\n接下来 $T$ 行，每行三个正整数 $A,B,C$。", "outputFormat": "$T$ 个整数 $\\text{ans}$ 表示答案。以换行符隔开。", "hint": "【样例 1 解释】\n\n第一组询问 $A=1,B=2,C=3$，满足条件的三元组 $(x,y,z)$ 有 $(1,1,1),(1,1,2),(1,1,3).$\n\n第二组询问 $A=3,B=4,C=5$，满足条件的三元组 $(x,y,z)$ 有：\n\n$(1,1,1),(1,1,2),(1,1,3),(1,1,4),(1,1,5),(2,2,2),(2,4,4),(3,3,3).$\n\n第三组询问 $A=6,B=7,C=8$，满足条件的三元组 $(x,y,z)$ 有：\n\n$(1,1,1),(1,1,2),(1,1,3),(1,1,4),(1,1,5),(1,1,6),(1,1,7),(1,1,8);$\n\n$(2,2,2),(2,4,4),(3,3,3),(4,2,2),(4,4,4),(5,5,5),(6,6,6).$\n\n---\n\n【数据范围】\n\n对 $100\\%$ 的数据，满足 $1\\leq T\\leq 2\\times 10^4,\\ 1\\leq A,B,C\\leq 10^{18}$。\n\n\n- $\\text{Subtask}\\ 0(5\\ \\text{pts})$：$T,A,B,C\\leq 11$。\n- $\\text{Subtask}\\ 1(7\\ \\text{pts})$： $T\\leq 20,\\ A,B,C\\leq 3333$。\n- $\\text{Subtask}\\ 2(17\\ \\text{pts})$：$T\\leq 20,\\ A,B\\leq 10^{10},\\ C\\leq 3333$。\n- $\\text{Subtask}\\ 3(17\\ \\text{pts})$：$T\\leq 20,\\ A,B,C\\leq 10^{10}$。\n- $\\text{Subtask}\\ 4(27\\ \\text{pts})$：$A,B,C\\leq 10^{11}$。\n- $\\text{Subtask}\\ 5(27\\ \\text{pts})$：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8381", "type": "P", "difficulty": 7, "samples": [["2\n7\n2 1 4 7 6 5 3\n2\n2 1", "3\n4\n1 1 4\n1 2 3\n1 1 2\n0 5 6\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "[PFOI Round1] Two Subsegments", "background": ">洛谷知名网红，€€£官方团队团主 [€€£](https://www.luogu.com.cn/user/559616) 同志，因联合省选寄，医院抢救无效，于 4 月 17 日 g 了。\n\n> [€€£](https://www.luogu.com.cn/user/559616) 是知名洛谷人，2021年加入洛谷，同年成立 €€£ 官方团队。在他在位期间勤勤恳恳，认真整活，发奋出题，为整活革命化、现代化、正规化建设作出了贡献。\n\n对于 [€€£](https://www.luogu.com.cn/user/559616) 的退役，[Uvocde](https://www.luogu.com.cn/user/111084) 深感悲痛。这时，他想起了 [€€£](https://www.luogu.com.cn/user/559616) 对构造的深爱，于是便出了这道题来缅怀 [€€£](https://www.luogu.com.cn/user/559616)。", "description": "有 $T$ 组询问，每组询问给出一个长为 $n$ 的序列 $a$，保证 $a$ 是 $1\\sim n$ 的排列。\n\n你可以选择一个数 $x$，然后你每次可以将一段长为 $x+1$ 或一段长为 $x-1$ 的序列在原序列中前移或后移 $x$ 位，将经过的部分移到空出来的地方。\n\n请在 $80\\times n$ 次内将 $a$ 排成升序。", "inputFormat": "第一行一个正整数 $T$。\n\n接下来 $2 \\times T$ 行，每两行代表一组询问。\n\n对于每组询问，格式为：先一行一个正整数 $n$，接下来一行 $n$ 个正整数，代表 $a_1,\\ldots,a_n$。", "outputFormat": "输出共 $T$ 组。\n\n一组询问如果无解，仅输出一个 $-1$。\n\n如果有解，则输出共 $m+2$ 行：\n\n前两行每行一个数，分别是 $x,m$，其中 $m$ 表示操作次数，$x$ 如题意。\n\n接下来 $m$ 行，每行三个数，第一个数表示方向（向左是 $0$，向右是 $1$），接下来两个数 $l,r$ 代表平移区间的左、右端点。\n\n你的方案需要保证：\n\n- $2\\leq x\\leq n$，$0\\leq m\\leq 80n$；\n- 对每一次操作，有：\n  - $1\\leq l\\leq r\\leq n$；\n  - $r-l+1=x-1$ 或 $r-l+1=x+1$；\n  - 右移时 $r\\leq n-x$，左移时 $l\\geq x+1$。\n\n本题采用 $\\text{SPJ}$，只要调换操作正确或正确判断无解即可给分。", "hint": "【样例解释】\n\n对于 $2\\ 1\\ 4\\ 7\\ 6\\ 5\\ 3$ 这组样例：\n\n$x$ 取 $3$，共进行 $4$ 次操作：\n\n0. **2 1 4 7** 6 5 3，向右平移；\n1. 6 **5 3** 2 1 4 7，向右平移；\n2. **6 2** 1 4 5 3 7，向右平移；\n3. 1 4 5 6 **2 3** 7，向左平移；\n4. 1 2 3 4 5 6 7，排序完成。\n\n \n---\n\n【数据范围】\n  \n  对于 $100\\%$ 的数据，$1\\le T\\le10^4,\\ 2\\le n\\le 10^4,\\ \\sum n\\le10^4$，**保证排列在所有排列中等概率随机**。  \n  \n | $\\text{Subtasks}$ | 测试点数 | 数据范围 |分值 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $\\text{Subtask0}$ | $1$ | $n\\leq 5$ | $\\text{2pts}$ |\n| $\\text{Subtask1}$ | $7$ | $n\\leq 50$ |$\\text{7pts}$ |\n| $\\text{Subtask2}$ | $9$ | $n\\leq 10^3$ |$\\text{27pts}$ |\n| $\\text{Subtask3}$ | $14$ | $n\\leq 5\\times 10^3$ |$\\text{27pts}$ |\n| $\\text{Subtask4}$ | $9$ | $n\\leq 10^4$ | $\\text{37pts}$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PFOI Round1] Two Subsegments", "background": ">洛谷知名网红，€€£官方团队团主 [€€£](https://www.luogu.com.cn/user/559616) 同志，因联合省选寄，医院抢救无效，于 4 月 17 日 g 了。\n\n> [€€£](https://www.luogu.com.cn/user/559616) 是知名洛谷人，2021年加入洛谷，同年成立 €€£ 官方团队。在他在位期间勤勤恳恳，认真整活，发奋出题，为整活革命化、现代化、正规化建设作出了贡献。\n\n对于 [€€£](https://www.luogu.com.cn/user/559616) 的退役，[Uvocde](https://www.luogu.com.cn/user/111084) 深感悲痛。这时，他想起了 [€€£](https://www.luogu.com.cn/user/559616) 对构造的深爱，于是便出了这道题来缅怀 [€€£](https://www.luogu.com.cn/user/559616)。", "description": "有 $T$ 组询问，每组询问给出一个长为 $n$ 的序列 $a$，保证 $a$ 是 $1\\sim n$ 的排列。\n\n你可以选择一个数 $x$，然后你每次可以将一段长为 $x+1$ 或一段长为 $x-1$ 的序列在原序列中前移或后移 $x$ 位，将经过的部分移到空出来的地方。\n\n请在 $80\\times n$ 次内将 $a$ 排成升序。", "inputFormat": "第一行一个正整数 $T$。\n\n接下来 $2 \\times T$ 行，每两行代表一组询问。\n\n对于每组询问，格式为：先一行一个正整数 $n$，接下来一行 $n$ 个正整数，代表 $a_1,\\ldots,a_n$。", "outputFormat": "输出共 $T$ 组。\n\n一组询问如果无解，仅输出一个 $-1$。\n\n如果有解，则输出共 $m+2$ 行：\n\n前两行每行一个数，分别是 $x,m$，其中 $m$ 表示操作次数，$x$ 如题意。\n\n接下来 $m$ 行，每行三个数，第一个数表示方向（向左是 $0$，向右是 $1$），接下来两个数 $l,r$ 代表平移区间的左、右端点。\n\n你的方案需要保证：\n\n- $2\\leq x\\leq n$，$0\\leq m\\leq 80n$；\n- 对每一次操作，有：\n  - $1\\leq l\\leq r\\leq n$；\n  - $r-l+1=x-1$ 或 $r-l+1=x+1$；\n  - 右移时 $r\\leq n-x$，左移时 $l\\geq x+1$。\n\n本题采用 $\\text{SPJ}$，只要调换操作正确或正确判断无解即可给分。", "hint": "【样例解释】\n\n对于 $2\\ 1\\ 4\\ 7\\ 6\\ 5\\ 3$ 这组样例：\n\n$x$ 取 $3$，共进行 $4$ 次操作：\n\n0. **2 1 4 7** 6 5 3，向右平移；\n1. 6 **5 3** 2 1 4 7，向右平移；\n2. **6 2** 1 4 5 3 7，向右平移；\n3. 1 4 5 6 **2 3** 7，向左平移；\n4. 1 2 3 4 5 6 7，排序完成。\n\n \n---\n\n【数据范围】\n  \n  对于 $100\\%$ 的数据，$1\\le T\\le10^4,\\ 2\\le n\\le 10^4,\\ \\sum n\\le10^4$，**保证排列在所有排列中等概率随机**。  \n  \n | $\\text{Subtasks}$ | 测试点数 | 数据范围 |分值 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $\\text{Subtask0}$ | $1$ | $n\\leq 5$ | $\\text{2pts}$ |\n| $\\text{Subtask1}$ | $7$ | $n\\leq 50$ |$\\text{7pts}$ |\n| $\\text{Subtask2}$ | $9$ | $n\\leq 10^3$ |$\\text{27pts}$ |\n| $\\text{Subtask3}$ | $14$ | $n\\leq 5\\times 10^3$ |$\\text{27pts}$ |\n| $\\text{Subtask4}$ | $9$ | $n\\leq 10^4$ | $\\text{37pts}$ |\n", "locale": "zh-CN"}}}
{"pid": "P8382", "type": "P", "difficulty": 6, "samples": [["5 2\n1 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2004", "POI（波兰）"], "title": "[POI 2004] Gra", "background": "", "description": "让我们考虑一个在 $m \\times 1$ 的板子上玩的游戏,板子被从 $1$ 到 $m$ 编号。 \n\n现在板子上有 $n$ 个棋子，每个都严格占据板子上的一个格子，没有一个棋子占据格子 $m$。 \n\n每个单独的移动遵循以下原则：移动的人选择一个棋子把它移动到比它大的格子中第一个未被占据的格子里去。两个选手交替移动，谁先占据格子 $m$ 谁赢。\n\n我们在当且仅当他移动以后令一选手无论如何都无法赢他的时候说当前选手的移动称作 $\\text{winning}$ 操作。\n\n我们想知道先手有多少个移动是 $\\text{winning}$ 操作。", "inputFormat": "第一行有两个数 $m,n$ 。\n\n然后接下来 $n$ 个上升的整数表示初始被占据的格子编号。", "outputFormat": "输出先手有多少移动是 $\\text{winning}$ 操作。", "hint": "对于 $100$ % 的数据：$2 \\le m \\le 10^{9}, 1 \\le n \\le 10^{6}$ ，且有 $n + 1 \\le m$ 。\n\n下面是一个例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/obrkvr84.png)\n\n在 $m = 7$ 的时候，一个选手可以把 $2$ 移到 $4$，把 $3$ 移到 $4$ 或者把 $6$ 移动到 $7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2004] Gra", "background": "", "description": "让我们考虑一个在 $m \\times 1$ 的板子上玩的游戏,板子被从 $1$ 到 $m$ 编号。 \n\n现在板子上有 $n$ 个棋子，每个都严格占据板子上的一个格子，没有一个棋子占据格子 $m$。 \n\n每个单独的移动遵循以下原则：移动的人选择一个棋子把它移动到比它大的格子中第一个未被占据的格子里去。两个选手交替移动，谁先占据格子 $m$ 谁赢。\n\n我们在当且仅当他移动以后令一选手无论如何都无法赢他的时候说当前选手的移动称作 $\\text{winning}$ 操作。\n\n我们想知道先手有多少个移动是 $\\text{winning}$ 操作。", "inputFormat": "第一行有两个数 $m,n$ 。\n\n然后接下来 $n$ 个上升的整数表示初始被占据的格子编号。", "outputFormat": "输出先手有多少移动是 $\\text{winning}$ 操作。", "hint": "对于 $100$ % 的数据：$2 \\le m \\le 10^{9}, 1 \\le n \\le 10^{6}$ ，且有 $n + 1 \\le m$ 。\n\n下面是一个例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/obrkvr84.png)\n\n在 $m = 7$ 的时候，一个选手可以把 $2$ 移到 $4$，把 $3$ 移到 $4$ 或者把 $6$ 移动到 $7$。", "locale": "zh-CN"}}}
{"pid": "P8383", "type": "P", "difficulty": 5, "samples": [["5\n2 0 1\n2 4 2\n2 2 4", "0\n1\n1/2\n?\n?"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2004", "POI（波兰）"], "title": "[POI 2004] Bra", "background": "", "description": "让我们考虑一个包含 $n$ 个门的电路。\n\n门从 $0$ 到 $n-1$ 编号，每个门都包含若干个输入和一个输出。\n\n每一个输入和输出都只可能是 $0,1,\\dfrac{1}{2}$ 三种状态，每个输入都连接着某个门的输出，输入的状态就等于它连接的输出的状态值，而每个输出可能连接着任意多个输入。\n\n$0$ 和 $1$ 是很特殊的两个门。门 $0$ 的输出永远为 $0$，门 $1$ 的输出永远为 $1$。\n\n一个门有效的输出状态条件如下: \n\n1. 它的输入中 $0$ 的个数多于 $1$ 的个数那么输出状态为 $0$。 \n\n2. 它的输入中 $0$ 的个数等于 $1$ 的个数那么输出状态为 $\\dfrac{1}{2}$。 \n\n3. 它的输入中 $0$ 的个数少于 $1$ 的个数那么输出状态为 $1$。\n\n4. 对于门 $0$ 和 $1$，他们分别输出 $0$ 和 $1$。\n\n现在给出电路信息，请你编写一个程序，确定所有可以确定状态的门的状态分别是什么。", "inputFormat": "第一行一个数 $n$。\n\n接下来 $n-2$ 行表示门的连接信息，第 $i$ 行描述第 $i$ 个门的输入端，一个数 $k_i$ 表示它的输入端个数，接下来 $k_i$  个数分别表示每个输入端的门的编号。", "outputFormat": "输出 $n$ 行，表示 $n$ 个门的输出状态。如果确定，请输出具体状态值，否则输出 $?$ 。", "hint": "对于全部数据，$2 \\le n \\le 10000,k_i \\ge 1$，数据保证所有门的输入端总数不超过 $200000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2004] Bra", "background": "", "description": "让我们考虑一个包含 $n$ 个门的电路。\n\n门从 $0$ 到 $n-1$ 编号，每个门都包含若干个输入和一个输出。\n\n每一个输入和输出都只可能是 $0,1,\\dfrac{1}{2}$ 三种状态，每个输入都连接着某个门的输出，输入的状态就等于它连接的输出的状态值，而每个输出可能连接着任意多个输入。\n\n$0$ 和 $1$ 是很特殊的两个门。门 $0$ 的输出永远为 $0$，门 $1$ 的输出永远为 $1$。\n\n一个门有效的输出状态条件如下: \n\n1. 它的输入中 $0$ 的个数多于 $1$ 的个数那么输出状态为 $0$。 \n\n2. 它的输入中 $0$ 的个数等于 $1$ 的个数那么输出状态为 $\\dfrac{1}{2}$。 \n\n3. 它的输入中 $0$ 的个数少于 $1$ 的个数那么输出状态为 $1$。\n\n4. 对于门 $0$ 和 $1$，他们分别输出 $0$ 和 $1$。\n\n现在给出电路信息，请你编写一个程序，确定所有可以确定状态的门的状态分别是什么。", "inputFormat": "第一行一个数 $n$。\n\n接下来 $n-2$ 行表示门的连接信息，第 $i$ 行描述第 $i$ 个门的输入端，一个数 $k_i$ 表示它的输入端个数，接下来 $k_i$  个数分别表示每个输入端的门的编号。", "outputFormat": "输出 $n$ 行，表示 $n$ 个门的输出状态。如果确定，请输出具体状态值，否则输出 $?$ 。", "hint": "对于全部数据，$2 \\le n \\le 10000,k_i \\ge 1$，数据保证所有门的输入端总数不超过 $200000$。", "locale": "zh-CN"}}}
{"pid": "P8384", "type": "P", "difficulty": 5, "samples": [["9\n7 8\n4 5\n5 6\n1 2\n3 2\n9 8\n2 5\n5 8", "4 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2004", "POI（波兰）"], "title": "[POI 2004] SZN", "background": "", "description": "$\\text{String-Toys joint-stock}$ 公司需要你帮他们解决一个问题。\n\n他们想制造一个没有环的连通图模型，每个图都是由一些顶点和特定数量的边构成。每个顶点都可以连向许多的其他顶点。一个图是连通且无环的，图是由许多的线做成的。一条线是一条连接图中两个顶点之间的路径。\n\n由于一些技术原因，两条线之间不能有重叠的部分，要保证图中任意一条边都被且仅被一条线所覆盖。\n\n做一个这样的图的模型的费用取决于用了多少条线以及最长的那条的长度(每条边的长度都为 $1$ )。\n\n现在给你对应的图，请你编写一个程序，求出最少能用多少条线以及在用最少线的情况下最长的那根线最短可以为多少。", "inputFormat": "第一行仅包含一个数 $n$ ，表示顶点的总数。顶点从 $1$ 到 $n$ 进行编号。\n\n接下来的 $n - 1$ 行描述这些边，每行两个数 $a$ 和 $b$,表示顶点 $a$ 和顶点 $b$ 之间有一条边。", "outputFormat": "输出两个数,最少用多少条线以及在用最少线的情况下最长线最短可以为多少.", "hint": "对于 $100$ % 的数据：$2 \\le n \\le 10000,1 \\le a,b \\le n$ 。\n\n样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/00d4scv1.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2004] SZN", "background": "", "description": "$\\text{String-Toys joint-stock}$ 公司需要你帮他们解决一个问题。\n\n他们想制造一个没有环的连通图模型，每个图都是由一些顶点和特定数量的边构成。每个顶点都可以连向许多的其他顶点。一个图是连通且无环的，图是由许多的线做成的。一条线是一条连接图中两个顶点之间的路径。\n\n由于一些技术原因，两条线之间不能有重叠的部分，要保证图中任意一条边都被且仅被一条线所覆盖。\n\n做一个这样的图的模型的费用取决于用了多少条线以及最长的那条的长度(每条边的长度都为 $1$ )。\n\n现在给你对应的图，请你编写一个程序，求出最少能用多少条线以及在用最少线的情况下最长的那根线最短可以为多少。", "inputFormat": "第一行仅包含一个数 $n$ ，表示顶点的总数。顶点从 $1$ 到 $n$ 进行编号。\n\n接下来的 $n - 1$ 行描述这些边，每行两个数 $a$ 和 $b$,表示顶点 $a$ 和顶点 $b$ 之间有一条边。", "outputFormat": "输出两个数,最少用多少条线以及在用最少线的情况下最长线最短可以为多少.", "hint": "对于 $100$ % 的数据：$2 \\le n \\le 10000,1 \\le a,b \\le n$ 。\n\n样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/00d4scv1.png)", "locale": "zh-CN"}}}
{"pid": "P8385", "type": "P", "difficulty": 3, "samples": [["4\n200\n100\n40\n2\n6\n1 2 10\n1 3 5\n2 1 25\n3 2 10\n3 4 5\n4 1 50", "60"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2003", "POI（波兰）"], "title": "[POI 2003] Smugglers", "background": "", "description": "Byteotia 因为它丰富的金矿资源而闻名世界. 所以在和它的邻国 Bitland 的边界上每年都有大量的金矿交易。不幸的是由于税务的繁重，商人带着矿产穿过边境时都要交纳矿产价格的 $50\\%$ 作为关税。但是幸运的是，有一些炼金术士已经发明了一些方法能把某一种矿产转化成另一种的矿物。于是这样在交易时就可以先把昂贵的矿产转化成便宜的，等到带过边境以后在转换回来。但是由于这项工作费时费力，炼金术士对于每种转换都要收取相应的费用。现在有个商人想将 $1$ kg 金子带过边境，他想知道最少的花费是多少。", "inputFormat": "第一行仅一个数 $n$ 表示有多少种金属矿产。\n\n接下来 $n$ 行，表示每种金属 $1$ kg 的单价。第 $k+1$ 行的数 $p_k$ 为第 $k$ 种金属的单价。我们假设金子的标号为 $1$。接下来一个正数 $m$ 表示一共有 $m$ 种转换方式。接下来 $m$ 行每行描述一个转换，它由三个数 $a$，$b$，$c$ 表示把 $1$ kg 的 $a$ 金属转换为 $1$ kg 的 $b$ 金属需要 $c$ 的代价。对于特定的金属对 $a$ 和 $b$ 最多只会出现一次。", "outputFormat": "输出一行，表示把 $1$ kg 的金子带过边境的最小花费。", "hint": "对于 $100\\%$ 的数据，$1 \\le n \\le 5000$，$0 \\le p_k \\le 10^9$，$0 \\le m \\le 100000$，$1 \\le a,b \\le n$，$0 \\le c \\leq 10000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2003] Smugglers", "background": "", "description": "Byteotia 因为它丰富的金矿资源而闻名世界. 所以在和它的邻国 Bitland 的边界上每年都有大量的金矿交易。不幸的是由于税务的繁重，商人带着矿产穿过边境时都要交纳矿产价格的 $50\\%$ 作为关税。但是幸运的是，有一些炼金术士已经发明了一些方法能把某一种矿产转化成另一种的矿物。于是这样在交易时就可以先把昂贵的矿产转化成便宜的，等到带过边境以后在转换回来。但是由于这项工作费时费力，炼金术士对于每种转换都要收取相应的费用。现在有个商人想将 $1$ kg 金子带过边境，他想知道最少的花费是多少。", "inputFormat": "第一行仅一个数 $n$ 表示有多少种金属矿产。\n\n接下来 $n$ 行，表示每种金属 $1$ kg 的单价。第 $k+1$ 行的数 $p_k$ 为第 $k$ 种金属的单价。我们假设金子的标号为 $1$。接下来一个正数 $m$ 表示一共有 $m$ 种转换方式。接下来 $m$ 行每行描述一个转换，它由三个数 $a$，$b$，$c$ 表示把 $1$ kg 的 $a$ 金属转换为 $1$ kg 的 $b$ 金属需要 $c$ 的代价。对于特定的金属对 $a$ 和 $b$ 最多只会出现一次。", "outputFormat": "输出一行，表示把 $1$ kg 的金子带过边境的最小花费。", "hint": "对于 $100\\%$ 的数据，$1 \\le n \\le 5000$，$0 \\le p_k \\le 10^9$，$0 \\le m \\le 100000$，$1 \\le a,b \\le n$，$0 \\le c \\leq 10000$。", "locale": "zh-CN"}}}
{"pid": "P8386", "type": "P", "difficulty": 6, "samples": [["4 2", "10"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "PA（波兰）", "DP 套 DP"], "title": "[PA 2021] Od deski do deski", "background": "", "description": "给定 $n$，$m$，求满足以下限制的长度为 $n$ 的序列数目：\n\n1. 每个元素在 $[1,m]$ 之间；\n2. 一次操作定义为删除一个长度至少为 $2$ 且区间两端相等的区间，该序列需要在若干次操作内被删空。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行包含两个正整数 $n$，$m$。", "outputFormat": "输出一个整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "### 样例解释\n\n合法序列有：\n\n$[1,1,1,1]$\n\n$[1,1,2,1]$\n\n$[1,1,2,2]$\n\n$[1,2,1,1]$\n\n$[1,2,2,1]$\n\n$[2,1,1,2]$\n\n$[2,1,2,2]$\n\n$[2,2,1,1]$\n\n$[2,2,1,2]$\n\n$[2,2,2,2]$\n\n### 数据范围\n\n$1 \\le n \\le 3000$，$1 \\le m \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2021] Od deski do deski", "background": "", "description": "给定 $n$，$m$，求满足以下限制的长度为 $n$ 的序列数目：\n\n1. 每个元素在 $[1,m]$ 之间；\n2. 一次操作定义为删除一个长度至少为 $2$ 且区间两端相等的区间，该序列需要在若干次操作内被删空。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行包含两个正整数 $n$，$m$。", "outputFormat": "输出一个整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "### 样例解释\n\n合法序列有：\n\n$[1,1,1,1]$\n\n$[1,1,2,1]$\n\n$[1,1,2,2]$\n\n$[1,2,1,1]$\n\n$[1,2,2,1]$\n\n$[2,1,1,2]$\n\n$[2,1,2,2]$\n\n$[2,2,1,1]$\n\n$[2,2,1,2]$\n\n$[2,2,2,2]$\n\n### 数据范围\n\n$1 \\le n \\le 3000$，$1 \\le m \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8387", "type": "P", "difficulty": 0, "samples": [["5 3 4\n2 1 4\n3 3 7\n3 3 8\n1 5 7\n5 3 8\n", "7"], ["3 2 22\n7 16 33\n69 14 88\n8 10 97", "27"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COI（克罗地亚）"], "title": "[COI 2021] Autobahn", "background": null, "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T1「[Autobahn](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n有 $N$ 个人在赛车场疾驰，第 $i$ 个人从第 $l_i$ 小时初疾驰到第 $r_i$ 小时末。\n\n鉴于赛车场要恰钱，每疾驰一小时交一块钱，然而这 $N$ 个人都只付了前 $t_i$ 个小时的钱。\n\n管理员十分仁慈，他们只会在有至少 $K$ 个人在赛车场上疾驰时来收额外的钱。\n\n赛车场搞活动，要求划分出一个长为 $X$ 小时的时间段，在这个时间段内如果有人需要被补交钱，则他不需要补交对应时间段欠的钱。\n\n赛车场希望活动使这 $N$ 个人不需要补交的钱最多，求出这个钱数。", "inputFormat": "第一行三个整数 $N$，$K$，$X$。\n\n接下来 $N$ 行，一行三个整数 $l_i$，$t_i$，$r_i$。", "outputFormat": "仅输出一行一个整数，表示您的答案。", "hint": "【样例解释】\n\n样例 #1 解释：\n\n所划分出的时间段为 $[4,7]$，这之中第一个人不需要交第 $4$ 小时的费用，而第二、三、四个人不需要交第 $6$，$7$ 个小时的费用。\n\n样例 #2 解释：\n\n所划分出的时间段为 $[12,33]$。\n\n【数据范围】\n\n对于 $100\\%$ 的数据有 $1\\le K\\le N\\le10^5$，$1\\le X,l_i,t_i,r_i\\le 10^9$，$l_i\\le r_i$。\n\n| Subtask |            限制             | 分数 |\n| :-----: | :-------------------------: | :--: |\n|   $1$   | $N,K,X,l_i,t_i,r_i\\le 100$  | $20$ |\n|   $2$   | $N,K,X,l_i,t_i,r_i\\le 10^3$ | $30$ |\n|   $3$   |         无特殊限制          | $50$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2021] Autobahn", "background": null, "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T1「[Autobahn](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n有 $N$ 个人在赛车场疾驰，第 $i$ 个人从第 $l_i$ 小时初疾驰到第 $r_i$ 小时末。\n\n鉴于赛车场要恰钱，每疾驰一小时交一块钱，然而这 $N$ 个人都只付了前 $t_i$ 个小时的钱。\n\n管理员十分仁慈，他们只会在有至少 $K$ 个人在赛车场上疾驰时来收额外的钱。\n\n赛车场搞活动，要求划分出一个长为 $X$ 小时的时间段，在这个时间段内如果有人需要被补交钱，则他不需要补交对应时间段欠的钱。\n\n赛车场希望活动使这 $N$ 个人不需要补交的钱最多，求出这个钱数。", "inputFormat": "第一行三个整数 $N$，$K$，$X$。\n\n接下来 $N$ 行，一行三个整数 $l_i$，$t_i$，$r_i$。", "outputFormat": "仅输出一行一个整数，表示您的答案。", "hint": "【样例解释】\n\n样例 #1 解释：\n\n所划分出的时间段为 $[4,7]$，这之中第一个人不需要交第 $4$ 小时的费用，而第二、三、四个人不需要交第 $6$，$7$ 个小时的费用。\n\n样例 #2 解释：\n\n所划分出的时间段为 $[12,33]$。\n\n【数据范围】\n\n对于 $100\\%$ 的数据有 $1\\le K\\le N\\le10^5$，$1\\le X,l_i,t_i,r_i\\le 10^9$，$l_i\\le r_i$。\n\n| Subtask |            限制             | 分数 |\n| :-----: | :-------------------------: | :--: |\n|   $1$   | $N,K,X,l_i,t_i,r_i\\le 100$  | $20$ |\n|   $2$   | $N,K,X,l_i,t_i,r_i\\le 10^3$ | $30$ |\n|   $3$   |         无特殊限制          | $50$ |", "locale": "zh-CN"}}}
{"pid": "P8388", "type": "P", "difficulty": 6, "samples": [["6\n2 2 2 1 1 2", "2"], ["13\n9 5 2 8 8 2 5 9 9 7 8 5 10", "5"], ["12\n5 5 2 3 2 1 1 5 5 2 5 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COI（克罗地亚）"], "title": "[COI 2021] Cigle", "background": "", "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T2「[Cigle](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n您是一位设计师，现在您正在思考您的下一个设计是什么。\n\n您可以使用 $N$ 块分别长为 $d_i$ 宽为一个单位长度的砖来建造一个多行的砖墙，每行长一个单位长度，具体方式是：\n\n- 首先，从第 $1$ 行，即最底下一行开始，从左到右放置一些砖块。\n- 紧接着，在第 $2$ 行，即第 $1$ 行上面一行从右到左放置一些砖块，使得中间一行最右边的砖块与最底下一行最右边的砖块右边边缘对齐。\n- 然后，在第 $3$ 行从左到右放置剩下所有的砖块，使得中间一行最左边的砖块与最上面一行最左边的砖块左边边缘对齐。\n- 以此类推。\n\n由于砖是神奇的，所以砖可以浮空。\n\n对于一座砖墙，他的美丽度被定义为被四个砖块共顶点的顶点个数。\n\n按砖块的放置顺序给定每块砖的长度，求出最大美丽度。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行 $N$ 个整数 $d_i$。", "outputFormat": "输出一行一个整数，表示最大美丽度。\n", "hint": "【样例解释】\n\n样例 #3 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vx3vf6cp.png)\n\n【数据范围】\n\n对于全部数据，有 $1\\le N,d_i\\le 5\\times 10^3$。\n\n| Subtask |          限制          | 分数 |\n| :-----: | :--------------------: | :--: |\n|   $1$   |       $N\\le 20$        | $9$  |\n|   $2$   |       $N\\le 80$        | $11$ |\n|   $3$   | $N\\le 500$，$d_i\\le 2$ | $13$ |\n|   $4$   |       $N\\le 500$       | $15$ |\n|   $5$   |       无特殊限制       | $52$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2021] Cigle", "background": "", "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T2「[Cigle](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n您是一位设计师，现在您正在思考您的下一个设计是什么。\n\n您可以使用 $N$ 块分别长为 $d_i$ 宽为一个单位长度的砖来建造一个多行的砖墙，每行长一个单位长度，具体方式是：\n\n- 首先，从第 $1$ 行，即最底下一行开始，从左到右放置一些砖块。\n- 紧接着，在第 $2$ 行，即第 $1$ 行上面一行从右到左放置一些砖块，使得中间一行最右边的砖块与最底下一行最右边的砖块右边边缘对齐。\n- 然后，在第 $3$ 行从左到右放置剩下所有的砖块，使得中间一行最左边的砖块与最上面一行最左边的砖块左边边缘对齐。\n- 以此类推。\n\n由于砖是神奇的，所以砖可以浮空。\n\n对于一座砖墙，他的美丽度被定义为被四个砖块共顶点的顶点个数。\n\n按砖块的放置顺序给定每块砖的长度，求出最大美丽度。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行 $N$ 个整数 $d_i$。", "outputFormat": "输出一行一个整数，表示最大美丽度。\n", "hint": "【样例解释】\n\n样例 #3 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vx3vf6cp.png)\n\n【数据范围】\n\n对于全部数据，有 $1\\le N,d_i\\le 5\\times 10^3$。\n\n| Subtask |          限制          | 分数 |\n| :-----: | :--------------------: | :--: |\n|   $1$   |       $N\\le 20$        | $9$  |\n|   $2$   |       $N\\le 80$        | $11$ |\n|   $3$   | $N\\le 500$，$d_i\\le 2$ | $13$ |\n|   $4$   |       $N\\le 500$       | $15$ |\n|   $5$   |       无特殊限制       | $52$ |", "locale": "zh-CN"}}}
{"pid": "P8389", "type": "P", "difficulty": 6, "samples": [["3 1\n1 1\n1 3\n2 2", "0 1 2"], ["5 2\n1 3\n3 1\n5 5\n5 10\n7 7", "1 1 4\n5 7 3"], ["5 3\n1 3\n3 1\n5 5\n5 10\n7 7\n", "1 1 2\n5 5 2\n5 10 1\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "COI（克罗地亚）"], "title": "[COI 2021] Izvanzemaljci", "background": "", "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T3「[Izvanzemaljci](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n在二维平面上有 $N$ 个整点 $(x_i,y_i)$，请找出 $K$ 个不相交的正方形，使得所有整点在正方形内或在正方形上，如有多解，求出在所有构造方案中面积最大的正方形面积最小的那一种，如果还有多解，输出任意一组即可。\n\n两个正方形如果没有边相交或相碰，并且没有一个正方形完全被另一个正方形包含的情况，则这两个正方形不相交。", "inputFormat": "第一行为两个整数 $N$，$K$。\n\n接下来 $N$ 行，一行两个整数 $x_i$，$y_i$。", "outputFormat": "共 $K$ 行，每行三个整数 $a_i$，$b_i$，$l_i$，表示有一个左下角为 $(a_i,b_i)$，边长为 $l_i$ 的正方形。\n\n您需要保证 $0\\le |a_i|,|b_i|\\le 3\\times 10^9$，$1\\le l_i\\le 2\\times 10^9$。", "hint": "【样例解释】\n\n样例 #2 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zatdwp0m.png)\n\n样例 #3 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u9roo5df.png)\n\n【数据范围】\n\n对于全部数据，有 $1\\le N\\le 10^5$，$1\\le K\\le 3$，$0\\le |x_i|,|y_i|\\le 10^9$。\n\n| Subtask |        限制        | 分数 |\n| :-----: | :----------------: | :--: |\n|   $1$   |       $K=1$        | $5$  |\n|   $2$   |       $K=2$        | $21$ |\n|   $3$   |  $N\\le 12$，$K=3$  | $12$ |\n|   $4$   | $N\\le 10^3$，$K=3$ | $30$ |\n|   $5$   |       $K=3$        | $32$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2021] Izvanzemaljci", "background": "", "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T3「[Izvanzemaljci](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n在二维平面上有 $N$ 个整点 $(x_i,y_i)$，请找出 $K$ 个不相交的正方形，使得所有整点在正方形内或在正方形上，如有多解，求出在所有构造方案中面积最大的正方形面积最小的那一种，如果还有多解，输出任意一组即可。\n\n两个正方形如果没有边相交或相碰，并且没有一个正方形完全被另一个正方形包含的情况，则这两个正方形不相交。", "inputFormat": "第一行为两个整数 $N$，$K$。\n\n接下来 $N$ 行，一行两个整数 $x_i$，$y_i$。", "outputFormat": "共 $K$ 行，每行三个整数 $a_i$，$b_i$，$l_i$，表示有一个左下角为 $(a_i,b_i)$，边长为 $l_i$ 的正方形。\n\n您需要保证 $0\\le |a_i|,|b_i|\\le 3\\times 10^9$，$1\\le l_i\\le 2\\times 10^9$。", "hint": "【样例解释】\n\n样例 #2 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zatdwp0m.png)\n\n样例 #3 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u9roo5df.png)\n\n【数据范围】\n\n对于全部数据，有 $1\\le N\\le 10^5$，$1\\le K\\le 3$，$0\\le |x_i|,|y_i|\\le 10^9$。\n\n| Subtask |        限制        | 分数 |\n| :-----: | :----------------: | :--: |\n|   $1$   |       $K=1$        | $5$  |\n|   $2$   |       $K=2$        | $21$ |\n|   $3$   |  $N\\le 12$，$K=3$  | $12$ |\n|   $4$   | $N\\le 10^3$，$K=3$ | $30$ |\n|   $5$   |       $K=3$        | $32$ |", "locale": "zh-CN"}}}
{"pid": "P8390", "type": "P", "difficulty": 6, "samples": [["2", "1\nCMPSWP R1 R2\n"], ["3", "3\nCMPSWP R1 R2\nCMPSWP R1 R3\nCMPSWP R2 R3\n"], ["4", "4\nCMPSWP R1 R3\nCMPSWP R2 R4\nCMPSWP R1 R2 CMPSWP R3 R4\nCMPSWP R2 R3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "COI（克罗地亚）"], "title": "[COI 2021] MalnaRISC", "background": "", "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T4「[MalnaRISC](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n您需要使用 MalnaRISC 这一神奇的处理器来解决知名问题——排序！\n\nMalnaRISC 仅支持一种命令 `CMPSWP` $R_i$ $R_j$，其含义为，比较 $R_i$ 与 $R_j$ 的大小，若 $R_i>R_j$，交换他们。\n\nMalnaRISC 最厉害的是，他可以同时运行多个不同的写在一行的程序，只要他们互不冲突，也就是说，`CMPSWP` 所接参数必须仅在同一行使用一次。\n\n现在，请写一个处理长度为 $N$ 的序列的排序问题（按单调不降的顺序）的 MalnaRISC 程序，我们将根据您的程序长度进行评分。", "inputFormat": "仅一行一个整数 $N$。", "outputFormat": "第一行为一个整数 $t$，表示您的代码长度。\n\n接下来 $t$ 行，每行表示您的一行代码。\n", "hint": "| Subtask |  $N$  | $t_1$  | $t_2$ | $t_3$ | 分数 |\n| :-----: | :---: | :----: | :---: | :---: | :--: |\n|   $1$   |  $8$  |  $28$  | $12$  |  $6$  | $10$ |\n|   $2$   | $13$  |  $78$  | $22$  | $10$  | $10 $ |\n|   $3$   | $16$  | $120$  | $28$  | $10$  | $10$ |\n|   $4$   | $32$  | $496$  | $60$  | $15$  | $10 $ |\n|   $5$   | $53$  | $1378$ | $102$ | $21$  | $10$ |\n|   $6$   | $64$  | $2016$ | $124$ | $21$  | $10 $ |\n|   $7$   | $73$  | $2628$ | $142$ | $28$  | $10$ |\n|   $8$   | $82$  | $3321$ | $160$ | $28$  | $10 $ |\n|   $9$   | $91$  | $4095$ | $178$ | $29$  | $10$ |\n|  $10$   | $100$ | $4950$ | $196$ | $30$  | $10 $ |\n\n如果您的正确代码是 $t$ 行，那么您将获得这个分数四舍五入后的结果：\n$$\n\\text{score}(t)=\n\\begin{cases}\n0 & t>t_1\\\\\n1+\\frac{2}{t-t_2} & t_1\\ge t>t_2\\\\\n3+\\frac{7(t_2-t+1)}{t_2-t_3} & t_2\\ge t>t_3\\\\\n10 & t_3\\ge t\n\\end{cases}\n$$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2021] MalnaRISC", "background": "", "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T4「[MalnaRISC](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n您需要使用 MalnaRISC 这一神奇的处理器来解决知名问题——排序！\n\nMalnaRISC 仅支持一种命令 `CMPSWP` $R_i$ $R_j$，其含义为，比较 $R_i$ 与 $R_j$ 的大小，若 $R_i>R_j$，交换他们。\n\nMalnaRISC 最厉害的是，他可以同时运行多个不同的写在一行的程序，只要他们互不冲突，也就是说，`CMPSWP` 所接参数必须仅在同一行使用一次。\n\n现在，请写一个处理长度为 $N$ 的序列的排序问题（按单调不降的顺序）的 MalnaRISC 程序，我们将根据您的程序长度进行评分。", "inputFormat": "仅一行一个整数 $N$。", "outputFormat": "第一行为一个整数 $t$，表示您的代码长度。\n\n接下来 $t$ 行，每行表示您的一行代码。\n", "hint": "| Subtask |  $N$  | $t_1$  | $t_2$ | $t_3$ | 分数 |\n| :-----: | :---: | :----: | :---: | :---: | :--: |\n|   $1$   |  $8$  |  $28$  | $12$  |  $6$  | $10$ |\n|   $2$   | $13$  |  $78$  | $22$  | $10$  | $10 $ |\n|   $3$   | $16$  | $120$  | $28$  | $10$  | $10$ |\n|   $4$   | $32$  | $496$  | $60$  | $15$  | $10 $ |\n|   $5$   | $53$  | $1378$ | $102$ | $21$  | $10$ |\n|   $6$   | $64$  | $2016$ | $124$ | $21$  | $10 $ |\n|   $7$   | $73$  | $2628$ | $142$ | $28$  | $10$ |\n|   $8$   | $82$  | $3321$ | $160$ | $28$  | $10 $ |\n|   $9$   | $91$  | $4095$ | $178$ | $29$  | $10$ |\n|  $10$   | $100$ | $4950$ | $196$ | $30$  | $10 $ |\n\n如果您的正确代码是 $t$ 行，那么您将获得这个分数四舍五入后的结果：\n$$\n\\text{score}(t)=\n\\begin{cases}\n0 & t>t_1\\\\\n1+\\frac{2}{t-t_2} & t_1\\ge t>t_2\\\\\n3+\\frac{7(t_2-t+1)}{t_2-t_3} & t_2\\ge t>t_3\\\\\n10 & t_3\\ge t\n\\end{cases}\n$$", "locale": "zh-CN"}}}
{"pid": "P8391", "type": "P", "difficulty": 6, "samples": [["5 2\n1 3\n2 4\n4 7\n7 9\n3 7\n1 4\n3 2", "2\nimpossible\n"], ["8 5\n1 2\n3 4\n1 5\n6 7\n5 10\n10 20\n15 20\n999999999 1000000000\n1 6\n1 7\n2 4\n3 3\n5 8\n", "3\n4\nimpossible\n0\nimpossible"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "BalticOI（波罗的海）"], "title": "[BalticOI 2022] Event Hopping (Day1)", "background": "", "description": "有 $n$ 个区间，第 $i$ 个区间为 $[l_i,r_i]$。\n\n你可以在区间之间跳跃。当你在第 $x$ 个区间上时，你可以跳到一个覆盖右端点 $r_x$ 的区间 $y$ 上，即从 $x$ 能跳到 $y$ 当且仅当 $[r_x \\in [l_y,r_y]]$。\n\n有 $q$ 次询问，每次你一开始在第 $s_i$ 个区间，你需要跳到第 $t_i$ 个区间。你需要输出你至少需要跳多少次。如果不能跳到，输出 `impossible`。", "inputFormat": "第一行，两个整数 $n, q$。\n\n接下来 $n$ 行，每行两个整数 $l_i$，$r_i$。\n\n接下来 $q$ 行，每行两个整数 $s_i$，$t_i$。", "outputFormat": "输出 $q$ 行，第 $i$ 行输出第 $i$ 次询问的答案。如果无解输出 `impossible`。", "hint": "- 子任务 $1$ ($10$ 分)：每一个区间可以跳到至多一个其他区间。\n\n- 子任务 $2$ ($10$ 分)：$n≤ 1000$，$q ≤100$。\n\n- 子任务 $3$ ($15$ 分)：$n≤5000$。\n\n- 子任务 $4$ ($15$ 分)：$q ≤100$。\n\n- 子任务 $5$ ($20$ 分)：不存在两个区间 $i,j$ 满足 $[l_i, r_i] \\subseteq [l_j,r_j]$。\n\n- 子任务 $6$ ($30$ 分)：没有特殊限制。\n\n对于所有数据，满足 $1≤n,q ≤100000$，$1≤l_i<r_i≤10^9$，$1≤s_i,t_i≤n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2022] Event Hopping (Day1)", "background": "", "description": "有 $n$ 个区间，第 $i$ 个区间为 $[l_i,r_i]$。\n\n你可以在区间之间跳跃。当你在第 $x$ 个区间上时，你可以跳到一个覆盖右端点 $r_x$ 的区间 $y$ 上，即从 $x$ 能跳到 $y$ 当且仅当 $[r_x \\in [l_y,r_y]]$。\n\n有 $q$ 次询问，每次你一开始在第 $s_i$ 个区间，你需要跳到第 $t_i$ 个区间。你需要输出你至少需要跳多少次。如果不能跳到，输出 `impossible`。", "inputFormat": "第一行，两个整数 $n, q$。\n\n接下来 $n$ 行，每行两个整数 $l_i$，$r_i$。\n\n接下来 $q$ 行，每行两个整数 $s_i$，$t_i$。", "outputFormat": "输出 $q$ 行，第 $i$ 行输出第 $i$ 次询问的答案。如果无解输出 `impossible`。", "hint": "- 子任务 $1$ ($10$ 分)：每一个区间可以跳到至多一个其他区间。\n\n- 子任务 $2$ ($10$ 分)：$n≤ 1000$，$q ≤100$。\n\n- 子任务 $3$ ($15$ 分)：$n≤5000$。\n\n- 子任务 $4$ ($15$ 分)：$q ≤100$。\n\n- 子任务 $5$ ($20$ 分)：不存在两个区间 $i,j$ 满足 $[l_i, r_i] \\subseteq [l_j,r_j]$。\n\n- 子任务 $6$ ($30$ 分)：没有特殊限制。\n\n对于所有数据，满足 $1≤n,q ≤100000$，$1≤l_i<r_i≤10^9$，$1≤s_i,t_i≤n$。", "locale": "zh-CN"}}}
{"pid": "P8392", "type": "P", "difficulty": 6, "samples": [["2 5\n2 3 1 1 4\n", "9\n"], ["3 5\n3 1 0 2 0 0 2", "impossible"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "贪心", "2022", "BalticOI（波罗的海）"], "title": "[BalticOI 2022] Uplifting Excursion (Day1)", "background": null, "description": "有 $2m+1$ 种物品，重量分别为 $-m,-m+1,\\ldots, m-1,m$。重量为 $i$ 的物品有 $a_i$ 个。\n\n你需要拿走若干物品，使得这些物品重量之和恰好为 $l$。在此基础上，你需要拿尽可能多的物品。\n\n问在物品重量之和恰好为 $l$ 的基础上，你最多能拿多少物品。", "inputFormat": "第一行两个数 $m,l$。\n\n第二行 $2m+1$ 个数，分别为 $a_{-m},a_{-m+1},\\ldots, a_{m-1},a_m$。", "outputFormat": "一行一个数表示答案。若不存在方案，输出 `impossible`。", "hint": "子任务 $1$ ($5$ 分)：$m , a_i≤50$\n\n子任务 $2$ ($15$ 分)：$m , a_i≤100$。\n\n子任务 $3$ ($20$ 分)：$m≤30$。\n\n子任务 $4$ ($20$ 分)：$m ≤50$。\n\n子任务 $5$ ($20$ 分)：$m ≤ 100$。\n\n子任务 $6$ ($20$ 分)：没有特殊限制。\n\n对于子任务 $3$ 到子任务 $6$，如果通过 $\\forall i<0,a_i=0$ 的测试点，可以获得一半的得分。\n\n对于所有数据，满足 $1\\leq m \\leq 300$，$-10^{18}\\le l \\le 10^{18}$，$0\\le a_i\\le 10^{12}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2022] Uplifting Excursion (Day1)", "background": null, "description": "有 $2m+1$ 种物品，重量分别为 $-m,-m+1,\\ldots, m-1,m$。重量为 $i$ 的物品有 $a_i$ 个。\n\n你需要拿走若干物品，使得这些物品重量之和恰好为 $l$。在此基础上，你需要拿尽可能多的物品。\n\n问在物品重量之和恰好为 $l$ 的基础上，你最多能拿多少物品。", "inputFormat": "第一行两个数 $m,l$。\n\n第二行 $2m+1$ 个数，分别为 $a_{-m},a_{-m+1},\\ldots, a_{m-1},a_m$。", "outputFormat": "一行一个数表示答案。若不存在方案，输出 `impossible`。", "hint": "子任务 $1$ ($5$ 分)：$m , a_i≤50$\n\n子任务 $2$ ($15$ 分)：$m , a_i≤100$。\n\n子任务 $3$ ($20$ 分)：$m≤30$。\n\n子任务 $4$ ($20$ 分)：$m ≤50$。\n\n子任务 $5$ ($20$ 分)：$m ≤ 100$。\n\n子任务 $6$ ($20$ 分)：没有特殊限制。\n\n对于子任务 $3$ 到子任务 $6$，如果通过 $\\forall i<0,a_i=0$ 的测试点，可以获得一半的得分。\n\n对于所有数据，满足 $1\\leq m \\leq 300$，$-10^{18}\\le l \\le 10^{18}$，$0\\le a_i\\le 10^{12}$。", "locale": "zh-CN"}}}
{"pid": "P8393", "type": "P", "difficulty": 6, "samples": [["4 4\n2 2 4 3\n1 2\n1 3\n2 3\n3 4\n", "1110\n"], ["4 3\n4 2 2 1\n1 2\n3 2\n4 1\n", "1110\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "BalticOI（波罗的海）"], "title": "[BalticOI 2022] Stranded Far From Home (Day2)", "background": "", "description": "你就是不能放任不管……实际上你进行了闯入行动，并且最初所有事情就像计划一样进行。然而，你和你的助手之间的通讯情况变得十分糟糕（这是符合预期的，不是吗？）你没有安全返回吕贝克，而是被困在一个小岛上，并且你的潜艇没有燃料了。\n\n为了及时返回参加 BOI 的颁奖仪式，你现在必须去岛的另一边坐船。然而，当地居民有着奇怪的传统。领带对他们来说非常重要，每个村庄都有自己喜欢的领带颜色，并且这个颜色可能会随着时间的推移而改变。\n\n一份互联网上的报告显示，不同的村庄最初喜欢不同的领带颜色。不幸的是，这份报告已经相当过时了。从那时起，每个星期都有恰好一个村庄说服一个相邻的村庄喜欢和他们一样的领带颜色（如果两个村庄有公路直接相连，它们就是相邻的）。然而，只有当整个岛上喜欢第一个村庄的领带颜色不比喜欢第二个村庄的领带颜色的人少时，这种情况才会发生。足够长的时间过去了，所以现在所有的岛民都喜欢同样的领带颜色。\n\n你基本可以肯定，如果你不戴符合他们喜好的领带，岛民就不会让你通过。因此，为了去渡口，你计划戴上岛民可能喜欢的每种颜色的领带。然而，戴太多的领带会让你看起来很可疑。编写一个程序，使用对岛屿的描述来计算你必须戴哪些领带。", "inputFormat": "第一行包含两个整数 $n$，$m$。$n$ 表示村庄的个数，$m$ 表示岛上道路的条数。村庄从 $1$ 到 $n$ 编号。\n\n接下来一行包含 $n$ 个整数 $s_1,\\dots,s_n$，$s_i$ 表示村庄 $i$ 的居民数。\n\n接下来 $m$ 行，每行两个整数 $a$，$b(1\\le a,b\\le n,a\\neq b)$，表示村庄 $a$ 和 $b$ 之间有一条道路。所有村庄通过道路直接或间接相连。", "outputFormat": "输出一个长度为 $n$ 的 $01$ 字符串。第 $i$ 位为 $1$ 当且仅当有可能所有的岛民现在都喜欢村庄 $i$ 最初喜欢的领带颜色。", "hint": "【样例解释】\n\n样例 #1 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g9hsfh2d.png)\n\n【数据范围】\n\n* 子任务 1（10 分）：$N,M\\leq2000$；\n* 子任务 2（10 分）：$s_1\\geq s_2\\geq\\dots\\geq s_n$ 且对于 $i=2\\sim n$，有且仅有一个 $j$ 满足 $j$ 与 $i$ 相连；\n* 子任务 3（15 分）：$i,j$ 直接相连当且仅当 $|i-j|=1$；\n* 子任务 4（30 分）：有且仅有不超过 $10$ 种不同的 $s_i$；\n* 子任务 5（35 分）：无特殊限制。\n\n对于所有数据，满足 $1\\le n\\le 2\\times 10^5$，$0\\le m \\le 2\\times 10^5$，$1 \\le s_ i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2022] Stranded Far From Home (Day2)", "background": "", "description": "你就是不能放任不管……实际上你进行了闯入行动，并且最初所有事情就像计划一样进行。然而，你和你的助手之间的通讯情况变得十分糟糕（这是符合预期的，不是吗？）你没有安全返回吕贝克，而是被困在一个小岛上，并且你的潜艇没有燃料了。\n\n为了及时返回参加 BOI 的颁奖仪式，你现在必须去岛的另一边坐船。然而，当地居民有着奇怪的传统。领带对他们来说非常重要，每个村庄都有自己喜欢的领带颜色，并且这个颜色可能会随着时间的推移而改变。\n\n一份互联网上的报告显示，不同的村庄最初喜欢不同的领带颜色。不幸的是，这份报告已经相当过时了。从那时起，每个星期都有恰好一个村庄说服一个相邻的村庄喜欢和他们一样的领带颜色（如果两个村庄有公路直接相连，它们就是相邻的）。然而，只有当整个岛上喜欢第一个村庄的领带颜色不比喜欢第二个村庄的领带颜色的人少时，这种情况才会发生。足够长的时间过去了，所以现在所有的岛民都喜欢同样的领带颜色。\n\n你基本可以肯定，如果你不戴符合他们喜好的领带，岛民就不会让你通过。因此，为了去渡口，你计划戴上岛民可能喜欢的每种颜色的领带。然而，戴太多的领带会让你看起来很可疑。编写一个程序，使用对岛屿的描述来计算你必须戴哪些领带。", "inputFormat": "第一行包含两个整数 $n$，$m$。$n$ 表示村庄的个数，$m$ 表示岛上道路的条数。村庄从 $1$ 到 $n$ 编号。\n\n接下来一行包含 $n$ 个整数 $s_1,\\dots,s_n$，$s_i$ 表示村庄 $i$ 的居民数。\n\n接下来 $m$ 行，每行两个整数 $a$，$b(1\\le a,b\\le n,a\\neq b)$，表示村庄 $a$ 和 $b$ 之间有一条道路。所有村庄通过道路直接或间接相连。", "outputFormat": "输出一个长度为 $n$ 的 $01$ 字符串。第 $i$ 位为 $1$ 当且仅当有可能所有的岛民现在都喜欢村庄 $i$ 最初喜欢的领带颜色。", "hint": "【样例解释】\n\n样例 #1 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g9hsfh2d.png)\n\n【数据范围】\n\n* 子任务 1（10 分）：$N,M\\leq2000$；\n* 子任务 2（10 分）：$s_1\\geq s_2\\geq\\dots\\geq s_n$ 且对于 $i=2\\sim n$，有且仅有一个 $j$ 满足 $j$ 与 $i$ 相连；\n* 子任务 3（15 分）：$i,j$ 直接相连当且仅当 $|i-j|=1$；\n* 子任务 4（30 分）：有且仅有不超过 $10$ 种不同的 $s_i$；\n* 子任务 5（35 分）：无特殊限制。\n\n对于所有数据，满足 $1\\le n\\le 2\\times 10^5$，$0\\le m \\le 2\\times 10^5$，$1 \\le s_ i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8394", "type": "P", "difficulty": 6, "samples": [["AACCAA\n", "1\n"], ["HEHEHEHIHILOL\n", "7.5\n"], ["ONMLKJIHGFEDCBAABCDEFGHIJKLMNO\n", "0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "BalticOI（波罗的海）", "状压 DP"], "title": "[BalticOI 2022] Boarding Passes (Day2)", "background": "", "description": "在成功遵守当地的风俗之后，你正好赶上了轮船的出发时间。然而，你没有想到会有那么多人前往吕贝克！由于你不想在颁奖仪式上迟到（你还需要一些时间将你所有偷来的艺术品存放在旅店里），你想加快轮船的登船速度。\n\n船上有一排 $n$ 个座位，共 $n$ 名乘客预订了所有座位。每位乘客都有一张船票，上面写着他们的指定座位和 $g$ 个登船组中的一组。\n\n登船时，一次会叫一个组的乘客登船。每个登船组内的乘客将以随机顺序登船，即对于所有可能的登船顺序，出现概率相等。每位乘客可以在第一个座位的前面或最后一个座位的后面登船，然后在另一位乘客登船前移到他们的指定座位。\n\n你确定这个过程中，当一个乘客要经过已经入座的乘客时最耗时（装有所有这些领带的行李在过道上是一个相当大的障碍）。幸运的是，你在附近的储物柜里发现了一件工作人员的制服，所以你可以决定各组乘客的登船顺序，并在登船开始前告诉每位乘客，是要从所有座位的前面还是后面登船。\n\n编写一个程序，利用船票信息计算出在登船过程中，如果你确定了登船组的登船顺序，并将乘客分配到最前面和后面时，一个乘客要经过已经入座的乘客的次数的最小值的期望。\n\n### 注意\n\n给定一个登船组的登船顺序，并将乘客分配到最前面和后面时，一个乘客要经过已经入座的乘客的次数的期望被定义为：\n$$1\\cdot p_1+2\\cdot p_2+3\\cdot p_3+\\ldots$$\n其中 $p_k$ 是登船时一个乘客要经过已经入座的乘客的次数恰好为 $k$ 的概率。换句话说，这是每个登船组中所有可能的乘客登船顺序中一个乘客要经过已经入座的乘客的平均次数。\n", "inputFormat": "输入包含一个由 $n$ 个字符组成的字符串 $s_1 \\dots s_n$，其中 $s_i$ 是前 $g$ 个大写英文字母中的一个，表示坐在第  个座位的乘客所属的登船组（最前面的座位为 $1$ 号座位）。", "outputFormat": "输出一个实数，表示确定了登船组的登船顺序，并将乘客分配到最前面和后面时，一个乘客要经过已经入座的乘客的次数的最小值的期望。\n\n如果你的输出与答案的绝对误差不大于 $0.001$，则认为你的输出是正确的。", "hint": "对于所有数据，满足 $1\\le g\\le 15$，$1\\le n \\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2022] Boarding Passes (Day2)", "background": "", "description": "在成功遵守当地的风俗之后，你正好赶上了轮船的出发时间。然而，你没有想到会有那么多人前往吕贝克！由于你不想在颁奖仪式上迟到（你还需要一些时间将你所有偷来的艺术品存放在旅店里），你想加快轮船的登船速度。\n\n船上有一排 $n$ 个座位，共 $n$ 名乘客预订了所有座位。每位乘客都有一张船票，上面写着他们的指定座位和 $g$ 个登船组中的一组。\n\n登船时，一次会叫一个组的乘客登船。每个登船组内的乘客将以随机顺序登船，即对于所有可能的登船顺序，出现概率相等。每位乘客可以在第一个座位的前面或最后一个座位的后面登船，然后在另一位乘客登船前移到他们的指定座位。\n\n你确定这个过程中，当一个乘客要经过已经入座的乘客时最耗时（装有所有这些领带的行李在过道上是一个相当大的障碍）。幸运的是，你在附近的储物柜里发现了一件工作人员的制服，所以你可以决定各组乘客的登船顺序，并在登船开始前告诉每位乘客，是要从所有座位的前面还是后面登船。\n\n编写一个程序，利用船票信息计算出在登船过程中，如果你确定了登船组的登船顺序，并将乘客分配到最前面和后面时，一个乘客要经过已经入座的乘客的次数的最小值的期望。\n\n### 注意\n\n给定一个登船组的登船顺序，并将乘客分配到最前面和后面时，一个乘客要经过已经入座的乘客的次数的期望被定义为：\n$$1\\cdot p_1+2\\cdot p_2+3\\cdot p_3+\\ldots$$\n其中 $p_k$ 是登船时一个乘客要经过已经入座的乘客的次数恰好为 $k$ 的概率。换句话说，这是每个登船组中所有可能的乘客登船顺序中一个乘客要经过已经入座的乘客的平均次数。\n", "inputFormat": "输入包含一个由 $n$ 个字符组成的字符串 $s_1 \\dots s_n$，其中 $s_i$ 是前 $g$ 个大写英文字母中的一个，表示坐在第  个座位的乘客所属的登船组（最前面的座位为 $1$ 号座位）。", "outputFormat": "输出一个实数，表示确定了登船组的登船顺序，并将乘客分配到最前面和后面时，一个乘客要经过已经入座的乘客的次数的最小值的期望。\n\n如果你的输出与答案的绝对误差不大于 $0.001$，则认为你的输出是正确的。", "hint": "对于所有数据，满足 $1\\le g\\le 15$，$1\\le n \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P8395", "type": "P", "difficulty": 2, "samples": [["14", "1"], ["40", "3"], ["6", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2022", "枚举", "CCC（加拿大）"], "title": "[CCC 2022 S1]  Good Fours and Good Fives", "background": "", "description": "$\\rm Finn$ 非常喜欢 $4$ 和 $5$，他认为所有的数都可以用 $4$ 和 $5$ 进行相加得出。\n\n例：\n\n$14=5+5+4$\n\n$20=4+4+4+4+4$ 或 $20=5+5+5+5$\n\n$40=4+4+4+4+4+4+4+4+4+4$ 或 $40=4+4+4+4+4+5+5+5+5$ 或 $40=5+5+5+5+5+5+5+5$\n\n当然，$4$ 和 $5$ 的顺序并不重要，重要的是他们的个数。\n\n给你一个正整数 $n$，问有多少种方法可以用 $4$ 和 $5$ 拼凑成 $n$。", "inputFormat": "一行，一个整数 $n$，表示要被拼凑的数。", "outputFormat": "一行，表示方法的数量。如果这个数不能被拼凑，请输出 $0$。", "hint": "对于 $20\\%$ 的数据：$1\\le n\\le 10$\n\n对于另外 $15\\%$ 的数据：$1\\le n\\le10^5$ 并且保证\n$n\\equiv0$ $\\pmod 4$\n\n对于另外 $15\\%$ 的数据：$1\\le n\\le10^5$ 并且保证\n$n\\equiv0$ $\\pmod 5$\n\n对于 $100\\%$ 的数据：$1\\le n\\le 10^6$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2022 S1]  Good Fours and Good Fives", "background": "", "description": "$\\rm Finn$ 非常喜欢 $4$ 和 $5$，他认为所有的数都可以用 $4$ 和 $5$ 进行相加得出。\n\n例：\n\n$14=5+5+4$\n\n$20=4+4+4+4+4$ 或 $20=5+5+5+5$\n\n$40=4+4+4+4+4+4+4+4+4+4$ 或 $40=4+4+4+4+4+5+5+5+5$ 或 $40=5+5+5+5+5+5+5+5$\n\n当然，$4$ 和 $5$ 的顺序并不重要，重要的是他们的个数。\n\n给你一个正整数 $n$，问有多少种方法可以用 $4$ 和 $5$ 拼凑成 $n$。", "inputFormat": "一行，一个整数 $n$，表示要被拼凑的数。", "outputFormat": "一行，表示方法的数量。如果这个数不能被拼凑，请输出 $0$。", "hint": "对于 $20\\%$ 的数据：$1\\le n\\le 10$\n\n对于另外 $15\\%$ 的数据：$1\\le n\\le10^5$ 并且保证\n$n\\equiv0$ $\\pmod 4$\n\n对于另外 $15\\%$ 的数据：$1\\le n\\le10^5$ 并且保证\n$n\\equiv0$ $\\pmod 5$\n\n对于 $100\\%$ 的数据：$1\\le n\\le 10^6$", "locale": "zh-CN"}}}
{"pid": "P8396", "type": "P", "difficulty": 3, "samples": [["1\nELODIE CHI\n0\n2\nDWAYNE BEN ANJALI\nCHI FRANCOIS ELODIE", "0"], ["3\nA B\nG L\nJ K\n2\nD F\nD G\n4\nA C G\nB D F\nE H I\nJ K L", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["并查集", "2022", "CCC（加拿大）", "哈希 hashing"], "title": "[CCC 2022 S2] Good Groups", "background": "请注意：这道题是 [CCO 2022 J4  Good Groups](https://www.luogu.com.cn/problem/P8403) 的加强版。\n\n管理备注：似乎没有加强。", "description": "一个班级会被分成 $g$ 个组，每个组有三个人，这种分组方式可能会违反两种规定：\n\n1. 一些学生必须在同一小组；\n2. 一些学生必须不在同一小组。\n\n现在校长找到了你，问学生违反了多少个规定。", "inputFormat": "第一行一个整数 $x$。\n\n接下来 $x$ 行，每行两个学生名字 $name1_1,name1_2$ ，表示这两个学生必须被分配到同一个小组。\n\n接下来一个整数 $y$。\n\n接下来 $y$ 行，每行两个学生名字 $name2_1,name2_2$ ，表示这两个学生必须不在同一个小组。\n\n接下来一个整数 $g$。\n\n接下来 $g$ 行，每行三个学生名字 $name3_1,name3_2,name3_3$，表示这三个学生现在被分在一个小组。\n", "outputFormat": "输出一个整数，表示学生违反了多少个规定。", "hint": "### 样例 2 解释：\n\n1. $\\rm A$ 和 $\\rm B$ 必须在同一组，这一点违反了。\n2. $\\rm G$ 和 $\\rm L$ 必须在同一组，这一点违反了。\n3. $\\rm J$ 和 $\\rm K$ 必须在同一组，这一点没有违反。\n4. $\\rm D$ 和 $\\rm F$ 必须不在同一组，这一点违反了。\n5. $\\rm D$ 和 $\\rm G$ 必须不在同一组，这一点没有被违反。\n\n以上 $5$ 条共违反 $3$ 条，所以输出 $3$。\n\n对于 $20\\%$ 的数据：$1\\le g\\le 50$，$1\\le x\\le 50$，$y=0$。\n\n对于另外 $35\\%$ 的数据：$1\\le g\\le 50$，$1\\le x\\le 50$，$1\\le y\\le 50$。\n \n对于 $100\\%$ 的数据：$1\\le g\\le 10^5$，$1\\le x\\le 10^5$，$1\\le y\\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2022 S2] Good Groups", "background": "请注意：这道题是 [CCO 2022 J4  Good Groups](https://www.luogu.com.cn/problem/P8403) 的加强版。\n\n管理备注：似乎没有加强。", "description": "一个班级会被分成 $g$ 个组，每个组有三个人，这种分组方式可能会违反两种规定：\n\n1. 一些学生必须在同一小组；\n2. 一些学生必须不在同一小组。\n\n现在校长找到了你，问学生违反了多少个规定。", "inputFormat": "第一行一个整数 $x$。\n\n接下来 $x$ 行，每行两个学生名字 $name1_1,name1_2$ ，表示这两个学生必须被分配到同一个小组。\n\n接下来一个整数 $y$。\n\n接下来 $y$ 行，每行两个学生名字 $name2_1,name2_2$ ，表示这两个学生必须不在同一个小组。\n\n接下来一个整数 $g$。\n\n接下来 $g$ 行，每行三个学生名字 $name3_1,name3_2,name3_3$，表示这三个学生现在被分在一个小组。\n", "outputFormat": "输出一个整数，表示学生违反了多少个规定。", "hint": "### 样例 2 解释：\n\n1. $\\rm A$ 和 $\\rm B$ 必须在同一组，这一点违反了。\n2. $\\rm G$ 和 $\\rm L$ 必须在同一组，这一点违反了。\n3. $\\rm J$ 和 $\\rm K$ 必须在同一组，这一点没有违反。\n4. $\\rm D$ 和 $\\rm F$ 必须不在同一组，这一点违反了。\n5. $\\rm D$ 和 $\\rm G$ 必须不在同一组，这一点没有被违反。\n\n以上 $5$ 条共违反 $3$ 条，所以输出 $3$。\n\n对于 $20\\%$ 的数据：$1\\le g\\le 50$，$1\\le x\\le 50$，$y=0$。\n\n对于另外 $35\\%$ 的数据：$1\\le g\\le 50$，$1\\le x\\le 50$，$1\\le y\\le 50$。\n \n对于 $100\\%$ 的数据：$1\\le g\\le 10^5$，$1\\le x\\le 10^5$，$1\\le y\\le 10^5$。", "locale": "zh-CN"}}}
