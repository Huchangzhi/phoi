{"pid": "P2105", "type": "P", "difficulty": 3, "samples": [["12 13 6\n10 4\n12 10\n1 1\n2 3\n3 2\n2 6", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000]}, "tags": ["枚举"], "title": "K皇后", "background": "", "description": "小 Z 最近捡到了一个 $n$ 行 $m$ 列的棋盘，棋盘上的格子的横纵坐标从 $1$ 开始编号，他想在棋盘上摆放 $K$ 个皇后。他想知道在他摆完这 $K$ 个皇后之后，棋盘上还有多少个格子是不会被攻击到的。\n\n**注意：一个皇后会攻击到这个皇后所在的那一行，那一列，以及两条对角线。**", "inputFormat": "第一行三个正整数 $n,m,K$，表示棋盘的行列，以及小 Z 摆放的皇后的个数。\n\n接下来 $K$ 行，每行两个正整数 $x,y$，表示这个皇后被摆在了第 $x$ 行，第 $y$ 列，数据保证任何两个皇后都不会被摆在同一个格子里。", "outputFormat": "仅一个整数，表示棋盘上还有多少个格子是不会被攻击到的。", "hint": "- 对于 $30\\%$ 的数据，$1\\le n,m\\le 5\\times10^3$，$1\\le K\\le 500$；\n- 对于另外 $10\\%$ 的数据，$K=1$；\n- 对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\times 10^4$，$1\\le K\\le 500$。", "locale": "zh-CN", "translations": {"en": {"title": "K Queens", "background": "", "description": "Xiao Z recently found a chessboard with $n$ rows and $m$ columns. The row and column coordinates of the cells are numbered starting from $1$. He wants to place $K$ queens on the board. He wants to know how many cells will not be attacked after he places these $K$ queens.\n\nNote: A queen attacks the entire row, the entire column, and both diagonals that pass through its position.", "inputFormat": "The first line contains three positive integers $n,m,K$, representing the number of rows and columns of the board, and the number of queens Xiao Z places.\n\nThe next $K$ lines each contain two positive integers $x,y$, indicating that a queen is placed at row $x$, column $y$. It is guaranteed that no two queens are placed on the same cell.", "outputFormat": "Output a single integer: the number of cells on the board that are not attacked.", "hint": "- For $30\\%$ of the testdata, $1\\le n,m\\le 5\\times 10^3$, $1\\le K\\le 500$.\n- For an additional $10\\%$ of the testdata, $K=1$.\n- For $100\\%$ of the testdata, $1\\le n,m\\le 2\\times 10^4$, $1\\le K\\le 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "K皇后", "background": "", "description": "小 Z 最近捡到了一个 $n$ 行 $m$ 列的棋盘，棋盘上的格子的横纵坐标从 $1$ 开始编号，他想在棋盘上摆放 $K$ 个皇后。他想知道在他摆完这 $K$ 个皇后之后，棋盘上还有多少个格子是不会被攻击到的。\n\n**注意：一个皇后会攻击到这个皇后所在的那一行，那一列，以及两条对角线。**", "inputFormat": "第一行三个正整数 $n,m,K$，表示棋盘的行列，以及小 Z 摆放的皇后的个数。\n\n接下来 $K$ 行，每行两个正整数 $x,y$，表示这个皇后被摆在了第 $x$ 行，第 $y$ 列，数据保证任何两个皇后都不会被摆在同一个格子里。", "outputFormat": "仅一个整数，表示棋盘上还有多少个格子是不会被攻击到的。", "hint": "- 对于 $30\\%$ 的数据，$1\\le n,m\\le 5\\times10^3$，$1\\le K\\le 500$；\n- 对于另外 $10\\%$ 的数据，$K=1$；\n- 对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\times 10^4$，$1\\le K\\le 500$。", "locale": "zh-CN"}}}
{"pid": "P2106", "type": "P", "difficulty": 5, "samples": [["4", "867"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数学", "倍增", "数位 DP", "矩阵加速"], "title": "Sam 数", "background": null, "description": "小 Z 最近发现了一种非常有趣的数，他将这种数称之为 Sam 数。\n\nSam 数具有以下特征：相邻两位的数字之差不超过 $2$。\n\n小 Z 还将 Sam 数按位数进行了分类，他将一个 $k$ 位 Sam 数称之为 $k$ 阶 Sam 数。\n\n但不幸的是小 Z 发现他数不清第 $k$ 阶的 Sam 数一共有多少个，这个时候机智的他想到了向你求助。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "输入共一行一个整数 $k$，含义见题面。", "outputFormat": "一行一个整数 $ans$，表示 $k$ 阶的 Sam 数的个数。\n\n答案对 $10^9+7$ 取模。", "hint": "对于 $30\\%$ 的数据，$1\\le k\\le10^6$。\n\n对于 $60\\%$ 的数据，$1\\le k\\le 10^{12}$。\n\n对于 $100\\%$ 的数据，$1\\le k\\le10^{18}$。", "locale": "zh-CN", "translations": {"en": {"title": "Sam Numbers", "background": "", "description": "Xiao Z recently discovered a very interesting type of number, which he calls a Sam number.\n\nSam numbers have the following property: the difference between any two adjacent digits does not exceed $2$.\n\nXiao Z also classifies Sam numbers by their number of digits. He calls a $k$-digit Sam number a $k$-order Sam number.\n\nUnfortunately, Xiao Z cannot figure out how many $k$-order Sam numbers there are, so he turns to you for help.\n\nThe answer should be taken modulo $10^9 + 7$.", "inputFormat": "The input contains a single integer $k$, as described above.", "outputFormat": "Output a single integer $ans$, the number of $k$-order Sam numbers.\n\nThe answer should be taken modulo $10^9 + 7$.", "hint": "Constraints:\n- For $30\\%$ of the testdata, $1 \\le k \\le 10^6$.\n- For $60\\%$ of the testdata, $1 \\le k \\le 10^{12}$.\n- For $100\\%$ of the testdata, $1 \\le k \\le 10^{18}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Sam 数", "background": null, "description": "小 Z 最近发现了一种非常有趣的数，他将这种数称之为 Sam 数。\n\nSam 数具有以下特征：相邻两位的数字之差不超过 $2$。\n\n小 Z 还将 Sam 数按位数进行了分类，他将一个 $k$ 位 Sam 数称之为 $k$ 阶 Sam 数。\n\n但不幸的是小 Z 发现他数不清第 $k$ 阶的 Sam 数一共有多少个，这个时候机智的他想到了向你求助。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "输入共一行一个整数 $k$，含义见题面。", "outputFormat": "一行一个整数 $ans$，表示 $k$ 阶的 Sam 数的个数。\n\n答案对 $10^9+7$ 取模。", "hint": "对于 $30\\%$ 的数据，$1\\le k\\le10^6$。\n\n对于 $60\\%$ 的数据，$1\\le k\\le 10^{12}$。\n\n对于 $100\\%$ 的数据，$1\\le k\\le10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P2107", "type": "P", "difficulty": 4, "samples": [["2 10\n1 100\n5 5", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "堆", "优先队列", "反悔贪心"], "title": "小 Z 的 AK 计划", "background": null, "description": "在小 Z 的家乡，有机房一条街，街上有很多机房。每个机房里都有一万个人在切题。小 Z 刚刷完 CodeChef，准备出来逛逛。\n\n机房一条街有 $n$ 个机房，第 $i$ 个机房的坐标为 $x_i$，小 Z 的家坐标为 $0$。小 Z 在街上移动的速度为 $1$，即从 $x_1$ 到 $x_2$ 所耗费的时间为 $|x_1 - x_2|$。\n\n每个机房的学生数量不同，ACM 题目水平也良莠不齐。小 Z 到达第 $i$ 个机房后，可以花 $t_i$ 的时间想题，然后瞬间 AK；当然，也可以过机房而不入。\n\n小 Z 现在只有 $m$ 个单位时间，之后他就该赶着去打 Codeforces 了。现在他想知道自己最多能在多少个机房 AK，希望你帮帮他。", "inputFormat": "第一行包含两个整数 $n,m$。\n\n接下来 $n$ 行，每行包含两个整数 $x_i,t_i$。", "outputFormat": "第一行包含一个整数，表示小 Z 最多能 AK 的机房数量。", "hint": "对于 $30\\%$ 的数据，$n \\leq 20$。\n\n对于 $60\\%$ 的数据，$n \\leq 1000$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$0 \\leq m,x_i \\leq 10^{18}$，$0 \\leq t_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's AK Plan", "background": "", "description": "In Xiao Z's hometown, there is a street of computer labs, with many labs. Each lab has ten thousand people solving problems. Xiao Z just finished CodeChef and is going for a walk.\n\nThere are $n$ computer labs on the street. The $i$-th lab is at coordinate $x_i$, and Xiao Z's home is at $0$. Xiao Z moves at speed $1$, that is, the time from $x_1$ to $x_2$ is $|x_1 - x_2|$.\n\nEach lab has a different number of students, and their ACM problem levels vary. After reaching lab $i$, Xiao Z can spend $t_i$ time thinking, and then instantly \"AK\"; of course, he can also pass by without entering.\n\nXiao Z now has only $m$ units of time. After that, he must hurry to Codeforces. He wants to know the maximum number of labs he can \"AK\". Please help him.", "inputFormat": "The first line contains two integers $n, m$.\n\nThe next $n$ lines each contain two integers $x_i, t_i$.", "outputFormat": "Output one integer: the maximum number of labs Xiao Z can \"AK\".", "hint": "For $30\\%$ of the testdata, $n \\leq 20$.\n\nFor $60\\%$ of the testdata, $n \\leq 1000$.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 10^5$, $0 \\leq m, x_i \\leq 10^{18}$, $0 \\leq t_i \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小 Z 的 AK 计划", "background": null, "description": "在小 Z 的家乡，有机房一条街，街上有很多机房。每个机房里都有一万个人在切题。小 Z 刚刷完 CodeChef，准备出来逛逛。\n\n机房一条街有 $n$ 个机房，第 $i$ 个机房的坐标为 $x_i$，小 Z 的家坐标为 $0$。小 Z 在街上移动的速度为 $1$，即从 $x_1$ 到 $x_2$ 所耗费的时间为 $|x_1 - x_2|$。\n\n每个机房的学生数量不同，ACM 题目水平也良莠不齐。小 Z 到达第 $i$ 个机房后，可以花 $t_i$ 的时间想题，然后瞬间 AK；当然，也可以过机房而不入。\n\n小 Z 现在只有 $m$ 个单位时间，之后他就该赶着去打 Codeforces 了。现在他想知道自己最多能在多少个机房 AK，希望你帮帮他。", "inputFormat": "第一行包含两个整数 $n,m$。\n\n接下来 $n$ 行，每行包含两个整数 $x_i,t_i$。", "outputFormat": "第一行包含一个整数，表示小 Z 最多能 AK 的机房数量。", "hint": "对于 $30\\%$ 的数据，$n \\leq 20$。\n\n对于 $60\\%$ 的数据，$n \\leq 1000$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$0 \\leq m,x_i \\leq 10^{18}$，$0 \\leq t_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2108", "type": "P", "difficulty": 2, "samples": [["six", "6"], ["negative seven hundred twenty nine", "-729"], ["one million one hundred one", "1000101"], ["eight hundred fourteen thousand twenty two", "814022"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 1000, 1000, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串"], "title": "学英语", "background": "", "description": "为了适应紧张的大学学习生活，小 Z 发愤图强开始复习巩固英语。\n\n由于小 Z 对数学比较有好感，他首先复习了数词。小 Z 花了一整天的时间，终于把关于基数词的知识都搞懂了。于是小 Z 非常兴奋，决定出一些题目考考已经过了英语四级、人称英语帝的小 G。考法很简单：小 Z 给出某个整数 $x$ 的英文写法，要求小 D 用阿拉伯数字写出 $x$。\n\n小 Z 会保证以下几点：\n\n1. $-999,999,999 \\leq  x \\leq 999,999,999$\n\n2. 题目中只会用到以下这些英文单词：\n\n`negative, zero, one, two, three, four, five, six, seven, eight, nine, ten`\n\n`eleven, twelve, thirteen, fourteen, fifteen, sixteen, seventeen, eighteen, nineteen, twenty`\n\n`thirty, forty, fifty, sixty, seventy, eighty, ninety, hundred, thousand, million`\n\n3. 若 $x$ 为负数，题目中第一个单词是 `negative`，否则任何时候都不会出现 `negative` 这个词。\n\n4. 由于小 Z 很牛 B，他不知道像 $103$ 这样的数字要写成 `one hundred and three` 而是直接写成了 `one hundred three`，就是说小 Z 的所有题目中都没有写 `and` 这个词（尽管本应该是要写的），请你谅解。\n\n5. 除了第 4 点， 其他还是基本符合英语的语法规则的， 比如 $1500$ 他会写成 `one thousand five hundred` 而不会写成 `fifteen hundred`。\n\n小 D 拿到题目后不屑地说了一句：水题！写个程序么好了……\n\n但是小 D 要出去玩（此时应该已经在千里之外爽玩了） ，这个任务就交给你了。\n", "inputFormat": "一行，题目描述中所说的 $x$ 的英文写法。\n", "outputFormat": "一行， $x$ 的阿拉伯数字写法。\n", "hint": "对于 $100\\%$ 的数据，$-999,999,999 ≤ x ≤ 999,999,999$。", "locale": "zh-CN", "translations": {"en": {"title": "Learning English", "background": "", "description": "To adapt to the intense college study life, Xiao Z decided to review and strengthen his English.\n\nSince Xiao Z is fond of math, he started with numerals. Xiao Z spent a whole day and finally understood everything about cardinal numbers. He was very excited and decided to make some problems to quiz Xiao G, who has passed the College English Test Band 4 (CET-4) and is known as an “English master.” The rule is simple: Xiao Z gives the English spelling of an integer $x$, and Xiao D is required to write $x$ in Arabic numerals.\n\nXiao Z guarantees the following:\n\n1. $-999,999,999 \\leq  x \\leq 999,999,999$.\n2. Only the following English words will be used in the problem statement:\n`negative, zero, one, two, three, four, five, six, seven, eight, nine, ten`\n`eleven, twelve, thirteen, fourteen, fifteen, sixteen, seventeen, eighteen, nineteen, twenty`\n`thirty, forty, fifty, sixty, seventy, eighty, ninety, hundred, thousand, million`\n3. If $x$ is negative, the first word in the problem statement is `negative`; otherwise, the word `negative` will never appear.\n4. Because Xiao Z is very confident, he does not know that numbers like $103$ should be written as `one hundred and three` and instead writes `one hundred three`. That is, the word `and` never appears in any of Xiao Z’s problems (even though it normally should). Please understand.\n5. Except for point 4, the rest basically follow English grammar; for example, $1500$ is written as `one thousand five hundred` rather than `fifteen hundred`.\n\nUpon receiving the problem, Xiao D scoffed: “Trivial! Just write a program...”.\n\nBut Xiao D is going out to have fun (by now probably thousands of miles away), so this task is left to you.", "inputFormat": "One line, the English representation of $x$ as described in the problem statement.", "outputFormat": "One line, the Arabic numeral form of $x$.", "hint": "For $100\\%$ of the testdata, $-999,999,999 ≤ x ≤ 999,999,999$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "学英语", "background": "", "description": "为了适应紧张的大学学习生活，小 Z 发愤图强开始复习巩固英语。\n\n由于小 Z 对数学比较有好感，他首先复习了数词。小 Z 花了一整天的时间，终于把关于基数词的知识都搞懂了。于是小 Z 非常兴奋，决定出一些题目考考已经过了英语四级、人称英语帝的小 G。考法很简单：小 Z 给出某个整数 $x$ 的英文写法，要求小 D 用阿拉伯数字写出 $x$。\n\n小 Z 会保证以下几点：\n\n1. $-999,999,999 \\leq  x \\leq 999,999,999$\n\n2. 题目中只会用到以下这些英文单词：\n\n`negative, zero, one, two, three, four, five, six, seven, eight, nine, ten`\n\n`eleven, twelve, thirteen, fourteen, fifteen, sixteen, seventeen, eighteen, nineteen, twenty`\n\n`thirty, forty, fifty, sixty, seventy, eighty, ninety, hundred, thousand, million`\n\n3. 若 $x$ 为负数，题目中第一个单词是 `negative`，否则任何时候都不会出现 `negative` 这个词。\n\n4. 由于小 Z 很牛 B，他不知道像 $103$ 这样的数字要写成 `one hundred and three` 而是直接写成了 `one hundred three`，就是说小 Z 的所有题目中都没有写 `and` 这个词（尽管本应该是要写的），请你谅解。\n\n5. 除了第 4 点， 其他还是基本符合英语的语法规则的， 比如 $1500$ 他会写成 `one thousand five hundred` 而不会写成 `fifteen hundred`。\n\n小 D 拿到题目后不屑地说了一句：水题！写个程序么好了……\n\n但是小 D 要出去玩（此时应该已经在千里之外爽玩了） ，这个任务就交给你了。\n", "inputFormat": "一行，题目描述中所说的 $x$ 的英文写法。\n", "outputFormat": "一行， $x$ 的阿拉伯数字写法。\n", "hint": "对于 $100\\%$ 的数据，$-999,999,999 ≤ x ≤ 999,999,999$。", "locale": "zh-CN"}}}
{"pid": "P2109", "type": "P", "difficulty": 6, "samples": [["3 5", "75"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2007", "NOI", "O2优化", "矩阵加速", "状压 DP"], "title": "[NOI2007] 生成树计数", "background": "", "description": "最近，小栋在无向连通图的生成树个数计算方面有了惊人的进展，他发现：\n\n- $n$ 个结点的环的生成树个数为 $n$。\n- $n$ 个结点的完全图的生成树个数为 $n^{n-2}$ 。\n\n这两个发现让小栋欣喜若狂，由此更加坚定了他继续计算生成树个数的想法，他要计算出各种各样图的生成树数目。\n\n一天，小栋和同学聚会，大家围坐在一张大圆桌周围。小栋看了看，马上想到了生成树问题。如果把每个同学看成一个结点，邻座（结点间距离为 $1$）的同学间连一条边，就变成了一个环。可是，小栋对环的计数已经十分娴熟且不再感兴趣。于是，小栋又把图变了一下：不仅把邻座的同学之间连一条边，还把相隔一个座位（结点间距离为 $2$）的同学之间也连一条边，将结点间有边直接相连的这两种情况统称为 有边相连，如图 $1$ 所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5lvvgbor.png) \n\n小栋以前没有计算过这类图的生成树个数，但是，他想起了老师讲过的计算任意图的生成树个数的一种通用方法：构造一个 $n\\times n$ 的矩阵 $A=\\{ a_{i,j}\\}$，其中：\n\n$$a_{i,j}=\\begin{cases}\nd_i & i=j \\\\\n-1 & \\text{$i, j$ 之间有边直接相连} \\\\\n0 & \\text{其他情况}\n\\end{cases}$$\n\n与图 1 相应的 $A$ 矩阵如下所示。为了计算图 1 所对应的生成数的个数，只要去掉矩阵 $A$ 的最后一行和最后一列，得到一个 $(n-1)\\times(n-1)$ 的矩阵 $B$，计算出矩阵 $B$ 的行列式的值便可得到图 1 的生成树的个数。\n\n$$\nA=\\begin{bmatrix}\n4 & -1 & -1 & 0 & 0 & 0 & -1 & -1 \\\\\n-1 & 4 & -1 & -1 & 0 & 0 & 0 & -1 \\\\\n-1 & -1 & 4 & -1 & -1 & 0 & 0 & 0 \\\\\n0 & -1 & -1 & 4 & -1 & -1 & 0 & 0 \\\\\n0 & 0 & -1 & -1 & 4 & -1 & -1 & 0 \\\\\n0 & 0 & 0 & -1 & -1 & 4 & -1 & -1 \\\\\n-1 & 0 & 0 & 0 & -1 & -1 & 4 & -1 \\\\\n-1 & -1 & 0 & 0 & 0 & -1 & -1 & 4 \\\\\n\\end{bmatrix},\\\\\nB=\\begin{bmatrix}\n4 & -1 & -1 & 0 & 0 & 0 & -1  \\\\\n-1 & 4 & -1 & -1 & 0 & 0 & 0  \\\\\n-1 & -1 & 4 & -1 & -1 & 0 & 0 \\\\\n0 & -1 & -1 & 4 & -1 & -1 & 0 \\\\\n0 & 0 & -1 & -1 & 4 & -1 & -1 \\\\\n0 & 0 & 0 & -1 & -1 & 4 & -1 \\\\\n-1 & 0 & 0 & 0 & -1 & -1 & 4 \\\\\n\\end{bmatrix},\n$$\n\n所以生成树的个数为 $\\det B =3528$。小栋发现利用通用方法，因计算过于复杂而很难算出来，而且用其他方法也难以找到更简便的公式进行计算。于是，他将图做了简化，从一个地方将圆桌断开，这样所有的同学形成了一条链，连接距离为 1 和距离为 2 的点。例如八个点的情形如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cfo7z7yu.png) \n\n这样生成树的总数就减少了很多。小栋不停的思考，一直到聚会结束，终于找到了一种快捷的方法计算出这个图的生成树个数。可是，如果把距离为 $3$ 的点也连起来，小栋就不知道如何快捷计算了。现在，请你帮助小栋计算这类图的生成树的数目。\n", "inputFormat": "输入文件中包含两个整数 $k,n$，由一个空格分隔。$k$ 表示要将所有距离不超过 $k$（含 $k$）的结点连接起来，$n$ 表示有 $n$ 个结点。", "outputFormat": "输出文件输出一个整数，表示生成树的个数。由于答案可能比较大，所以你只要输出答案除 $65521$ 的余数即可。", "hint": "样例对应的图如下：\n\n$$\nA = \\begin{bmatrix}\n3 & -1 & -1 & -1 & 0 \\\\\n-1 & 4 & -1 & -1 & -1 \\\\\n-1 & -1 & 4 & -1 & -1 \\\\\n-1 & -1 & -1 & 4 & -1 \\\\\n0 & -1 & -1 & -1 & 3 \\\\\n\\end{bmatrix},\nB = \\begin{bmatrix}\n3 & -1 & -1 & -1 \\\\\n-1 & 4 & -1 & -1  \\\\\n-1 & -1 & 4 & -1  \\\\\n-1 & -1 & -1 & 4  \\\\\n\\end{bmatrix}, \\det B = 75\n$$\n\n### 数据规模和约定\n\n| 测试点编号 |   $k$   |      $n$      |\n| :--------: | :-----: | :-----------: |\n|     1      |  $=2$   |   $\\le 10$    |\n|     2      |  $=3$   |     $=5$      |\n|     3      |  $=4$   |   $\\le 10$    |\n|     4      |  $=5$   |     $=10$     |\n|     5      | $\\le 3$ |   $\\le 100$   |\n|     6      | $\\le 5$ |   $\\le 100$   |\n|     7      | $\\le 3$ |  $\\le 2000$   |\n|     8      | $\\le 5$ |  $\\le 10000$  |\n|     9      | $\\le 3$ | $\\le 10^{15}$ |\n|     10     | $\\le 5$ | $\\le 10^{15}$ |\n\n此外，对于所有数据，$2\\le k\\le n$。\n\n### 提示\n\n以下为行列式的一种计算方法。记 $\\sigma(\\bm P)$ 表示排列 $\\bm P$ 中逆序对的数量，那么可以求得矩阵 $B$ 的行列式如下：\n\n$$\\det B=\\sum_{\\bm P=[p_1,p_2,\\cdots,p_n]} (-1)^{\\sigma(\\bm P)} \\prod_{i=1}^n b_{i,p_i}$$\n\n例如，对于 $B=\\begin{bmatrix}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 7 & 8 & 0\\end{bmatrix}$，其行列式计算如下：\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\bm P & \\sigma(\\bm P) & b_{1,p_1} & b_{2,p_2} & b_{3,p_3} & (-1)^{\\sigma(\\bm P)}\\prod_{i=1}^n b_{i,p_i} \\\\ \\hline\n[1, 2, 3] & 0 & 1 & 5 & 0 & 0 \\\\ \\hline\n[1, 3, 2] & 1 & 1 & 6 & 8 & -48 \\\\\\hline\n[2, 1, 3] & 1 & 2 & 4 & 0 & 0 \\\\\\hline\n[2, 3, 1] & 2 & 2 & 6 & 7 & 84 \\\\\\hline\n[3, 1, 2] & 2 & 3 & 4 & 8 & 96 \\\\\\hline\n[3, 2, 1] & 3 & 3 & 5 & 7 & -105 \\\\\\hline\n\\end{array}\n$$\n\n所以 $B$ 的行列式值为 $0-48+0+84+96-105=27$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2007] Counting Spanning Trees", "background": "", "description": "Recently, Xiao Dong has made amazing progress in counting the number of spanning trees in undirected connected graphs. He discovered:\n\n- The number of spanning trees of a cycle with $n$ vertices is $n$.\n- The number of spanning trees of a complete graph with $n$ vertices is $n^{n-2}$.\n\nThese two discoveries made him ecstatic and strengthened his determination to keep counting spanning trees for various graphs.\n\nOne day, during a class reunion, everyone sat around a large round table. Xiao Dong looked around and immediately thought of the spanning tree problem. If each classmate is a vertex and edges are added between adjacent seats (distance between vertices is $1$), the graph becomes a cycle. However, Xiao Dong was already very proficient at counting spanning trees of cycles and lost interest. So, he modified the graph: he not only added edges between adjacent seats, but also between classmates with one seat in between (distance between vertices is $2$). We collectively call these cases directly connected by an edge; see Figure 1.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5lvvgbor.png) \n\nXiao Dong had not counted spanning trees for this type of graph before, but he remembered a general method taught by his teacher for counting spanning trees of any graph: construct an $n\\times n$ matrix $A=\\{ a_{i,j}\\}$, where:\n\n$$a_{i,j}=\\begin{cases}\nd_i & i=j \\\\\n-1 & \\text{$i, j$ 之间有边直接相连} \\\\\n0 & \\text{其他情况}\n\\end{cases}$$\n\nThe matrix $A$ corresponding to Figure 1 is shown below. To compute the number of spanning trees for the graph in Figure 1, remove the last row and last column of matrix $A$ to obtain an $(n-1)\\times(n-1)$ matrix $B$. The number of spanning trees equals the determinant of $B$.\n\n$$\nA=\\begin{bmatrix}\n4 & -1 & -1 & 0 & 0 & 0 & -1 & -1 \\\\\n-1 & 4 & -1 & -1 & 0 & 0 & 0 & -1 \\\\\n-1 & -1 & 4 & -1 & -1 & 0 & 0 & 0 \\\\\n0 & -1 & -1 & 4 & -1 & -1 & 0 & 0 \\\\\n0 & 0 & -1 & -1 & 4 & -1 & -1 & 0 \\\\\n0 & 0 & 0 & -1 & -1 & 4 & -1 & -1 \\\\\n-1 & 0 & 0 & 0 & -1 & -1 & 4 & -1 \\\\\n-1 & -1 & 0 & 0 & 0 & -1 & -1 & 4 \\\\\n\\end{bmatrix},\\\\\nB=\\begin{bmatrix}\n4 & -1 & -1 & 0 & 0 & 0 & -1  \\\\\n-1 & 4 & -1 & -1 & 0 & 0 & 0  \\\\\n-1 & -1 & 4 & -1 & -1 & 0 & 0 \\\\\n0 & -1 & -1 & 4 & -1 & -1 & 0 \\\\\n0 & 0 & -1 & -1 & 4 & -1 & -1 \\\\\n0 & 0 & 0 & -1 & -1 & 4 & -1 \\\\\n-1 & 0 & 0 & 0 & -1 & -1 & 4 \\\\\n\\end{bmatrix},\n$$\n\nHence the number of spanning trees is $\\det B =3528$. Xiao Dong found that using the general method was too complicated to compute, and it was also hard to find a simpler closed form by other means. So, he simplified the graph: he split the round table at one point, turning all classmates into a chain, and connected vertices at distance $1$ and distance $2$. For example, the case with eight vertices is as follows:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cfo7z7yu.png) \n\nThis greatly reduces the total number of spanning trees. Xiao Dong kept thinking until the party was over and finally found a quick method to compute the number of spanning trees of this graph. However, if vertices at distance $3$ are also connected, he did not know how to compute it quickly. Now, please help Xiao Dong count the number of spanning trees for this type of graph.", "inputFormat": "The input contains two integers $k, n$ separated by a space. Here, $k$ means all pairs of vertices whose distance is at most $k$ (inclusive) along the chain are connected by an edge, and $n$ means there are $n$ vertices.", "outputFormat": "Output a single integer: the number of spanning trees. Since the answer may be large, output the answer modulo $65521$.", "hint": "Sample corresponds to the following graph:\n\n$$\nA = \\begin{bmatrix}\n3 & -1 & -1 & -1 & 0 \\\\\n-1 & 4 & -1 & -1 & -1 \\\\\n-1 & -1 & 4 & -1 & -1 \\\\\n-1 & -1 & -1 & 4 & -1 \\\\\n0 & -1 & -1 & -1 & 3 \\\\\n\\end{bmatrix},\nB = \\begin{bmatrix}\n3 & -1 & -1 & -1 \\\\\n-1 & 4 & -1 & -1  \\\\\n-1 & -1 & 4 & -1  \\\\\n-1 & -1 & -1 & 4  \\\\\n\\end{bmatrix}, \\det B = 75\n$$\n\nConstraints\n\n| Test point id |   $k$   |      $n$      |\n| :-----------: | :-----: | :-----------: |\n|       1       |  $=2$   |   $\\le 10$    |\n|       2       |  $=3$   |     $=5$      |\n|       3       |  $=4$   |   $\\le 10$    |\n|       4       |  $=5$   |     $=10$     |\n|       5       | $\\le 3$ |   $\\le 100$   |\n|       6       | $\\le 5$ |   $\\le 100$   |\n|       7       | $\\le 3$ |  $\\le 2000$   |\n|       8       | $\\le 5$ |  $\\le 10000$  |\n|       9       | $\\le 3$ | $\\le 10^{15}$ |\n|      10       | $\\le 5$ | $\\le 10^{15}$ |\n\nAdditionally, for all testdata, $2\\le k\\le n$.\n\nFurther hint\n\nOne way to compute a determinant is as follows. Let $\\sigma(\\bm P)$ denote the number of inversions in the permutation $\\bm P$. Then the determinant of matrix $B$ can be computed by:\n\n$$\\det B=\\sum_{\\bm P=[p_1,p_2,\\cdots,p_n]} (-1)^{\\sigma(\\bm P)} \\prod_{i=1}^n b_{i,p_i}$$\n\nFor example, for $B=\\begin{bmatrix}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 7 & 8 & 0\\end{bmatrix}$, its determinant is computed as:\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\bm P & \\sigma(\\bm P) & b_{1,p_1} & b_{2,p_2} & b_{3,p_3} & (-1)^{\\sigma(\\bm P)}\\prod_{i=1}^n b_{i,p_i} \\\\ \\hline\n[1, 2, 3] & 0 & 1 & 5 & 0 & 0 \\\\ \\hline\n[1, 3, 2] & 1 & 1 & 6 & 8 & -48 \\\\\\hline\n[2, 1, 3] & 1 & 2 & 4 & 0 & 0 \\\\\\hline\n[2, 3, 1] & 2 & 2 & 6 & 7 & 84 \\\\\\hline\n[3, 1, 2] & 2 & 3 & 4 & 8 & 96 \\\\\\hline\n[3, 2, 1] & 3 & 3 & 5 & 7 & -105 \\\\\\hline\n\\end{array}\n$$\n\nSo the determinant of $B$ is $0-48+0+84+96-105=27$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2007] 生成树计数", "background": "", "description": "最近，小栋在无向连通图的生成树个数计算方面有了惊人的进展，他发现：\n\n- $n$ 个结点的环的生成树个数为 $n$。\n- $n$ 个结点的完全图的生成树个数为 $n^{n-2}$ 。\n\n这两个发现让小栋欣喜若狂，由此更加坚定了他继续计算生成树个数的想法，他要计算出各种各样图的生成树数目。\n\n一天，小栋和同学聚会，大家围坐在一张大圆桌周围。小栋看了看，马上想到了生成树问题。如果把每个同学看成一个结点，邻座（结点间距离为 $1$）的同学间连一条边，就变成了一个环。可是，小栋对环的计数已经十分娴熟且不再感兴趣。于是，小栋又把图变了一下：不仅把邻座的同学之间连一条边，还把相隔一个座位（结点间距离为 $2$）的同学之间也连一条边，将结点间有边直接相连的这两种情况统称为 有边相连，如图 $1$ 所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5lvvgbor.png) \n\n小栋以前没有计算过这类图的生成树个数，但是，他想起了老师讲过的计算任意图的生成树个数的一种通用方法：构造一个 $n\\times n$ 的矩阵 $A=\\{ a_{i,j}\\}$，其中：\n\n$$a_{i,j}=\\begin{cases}\nd_i & i=j \\\\\n-1 & \\text{$i, j$ 之间有边直接相连} \\\\\n0 & \\text{其他情况}\n\\end{cases}$$\n\n与图 1 相应的 $A$ 矩阵如下所示。为了计算图 1 所对应的生成数的个数，只要去掉矩阵 $A$ 的最后一行和最后一列，得到一个 $(n-1)\\times(n-1)$ 的矩阵 $B$，计算出矩阵 $B$ 的行列式的值便可得到图 1 的生成树的个数。\n\n$$\nA=\\begin{bmatrix}\n4 & -1 & -1 & 0 & 0 & 0 & -1 & -1 \\\\\n-1 & 4 & -1 & -1 & 0 & 0 & 0 & -1 \\\\\n-1 & -1 & 4 & -1 & -1 & 0 & 0 & 0 \\\\\n0 & -1 & -1 & 4 & -1 & -1 & 0 & 0 \\\\\n0 & 0 & -1 & -1 & 4 & -1 & -1 & 0 \\\\\n0 & 0 & 0 & -1 & -1 & 4 & -1 & -1 \\\\\n-1 & 0 & 0 & 0 & -1 & -1 & 4 & -1 \\\\\n-1 & -1 & 0 & 0 & 0 & -1 & -1 & 4 \\\\\n\\end{bmatrix},\\\\\nB=\\begin{bmatrix}\n4 & -1 & -1 & 0 & 0 & 0 & -1  \\\\\n-1 & 4 & -1 & -1 & 0 & 0 & 0  \\\\\n-1 & -1 & 4 & -1 & -1 & 0 & 0 \\\\\n0 & -1 & -1 & 4 & -1 & -1 & 0 \\\\\n0 & 0 & -1 & -1 & 4 & -1 & -1 \\\\\n0 & 0 & 0 & -1 & -1 & 4 & -1 \\\\\n-1 & 0 & 0 & 0 & -1 & -1 & 4 \\\\\n\\end{bmatrix},\n$$\n\n所以生成树的个数为 $\\det B =3528$。小栋发现利用通用方法，因计算过于复杂而很难算出来，而且用其他方法也难以找到更简便的公式进行计算。于是，他将图做了简化，从一个地方将圆桌断开，这样所有的同学形成了一条链，连接距离为 1 和距离为 2 的点。例如八个点的情形如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cfo7z7yu.png) \n\n这样生成树的总数就减少了很多。小栋不停的思考，一直到聚会结束，终于找到了一种快捷的方法计算出这个图的生成树个数。可是，如果把距离为 $3$ 的点也连起来，小栋就不知道如何快捷计算了。现在，请你帮助小栋计算这类图的生成树的数目。\n", "inputFormat": "输入文件中包含两个整数 $k,n$，由一个空格分隔。$k$ 表示要将所有距离不超过 $k$（含 $k$）的结点连接起来，$n$ 表示有 $n$ 个结点。", "outputFormat": "输出文件输出一个整数，表示生成树的个数。由于答案可能比较大，所以你只要输出答案除 $65521$ 的余数即可。", "hint": "样例对应的图如下：\n\n$$\nA = \\begin{bmatrix}\n3 & -1 & -1 & -1 & 0 \\\\\n-1 & 4 & -1 & -1 & -1 \\\\\n-1 & -1 & 4 & -1 & -1 \\\\\n-1 & -1 & -1 & 4 & -1 \\\\\n0 & -1 & -1 & -1 & 3 \\\\\n\\end{bmatrix},\nB = \\begin{bmatrix}\n3 & -1 & -1 & -1 \\\\\n-1 & 4 & -1 & -1  \\\\\n-1 & -1 & 4 & -1  \\\\\n-1 & -1 & -1 & 4  \\\\\n\\end{bmatrix}, \\det B = 75\n$$\n\n### 数据规模和约定\n\n| 测试点编号 |   $k$   |      $n$      |\n| :--------: | :-----: | :-----------: |\n|     1      |  $=2$   |   $\\le 10$    |\n|     2      |  $=3$   |     $=5$      |\n|     3      |  $=4$   |   $\\le 10$    |\n|     4      |  $=5$   |     $=10$     |\n|     5      | $\\le 3$ |   $\\le 100$   |\n|     6      | $\\le 5$ |   $\\le 100$   |\n|     7      | $\\le 3$ |  $\\le 2000$   |\n|     8      | $\\le 5$ |  $\\le 10000$  |\n|     9      | $\\le 3$ | $\\le 10^{15}$ |\n|     10     | $\\le 5$ | $\\le 10^{15}$ |\n\n此外，对于所有数据，$2\\le k\\le n$。\n\n### 提示\n\n以下为行列式的一种计算方法。记 $\\sigma(\\bm P)$ 表示排列 $\\bm P$ 中逆序对的数量，那么可以求得矩阵 $B$ 的行列式如下：\n\n$$\\det B=\\sum_{\\bm P=[p_1,p_2,\\cdots,p_n]} (-1)^{\\sigma(\\bm P)} \\prod_{i=1}^n b_{i,p_i}$$\n\n例如，对于 $B=\\begin{bmatrix}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 7 & 8 & 0\\end{bmatrix}$，其行列式计算如下：\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\bm P & \\sigma(\\bm P) & b_{1,p_1} & b_{2,p_2} & b_{3,p_3} & (-1)^{\\sigma(\\bm P)}\\prod_{i=1}^n b_{i,p_i} \\\\ \\hline\n[1, 2, 3] & 0 & 1 & 5 & 0 & 0 \\\\ \\hline\n[1, 3, 2] & 1 & 1 & 6 & 8 & -48 \\\\\\hline\n[2, 1, 3] & 1 & 2 & 4 & 0 & 0 \\\\\\hline\n[2, 3, 1] & 2 & 2 & 6 & 7 & 84 \\\\\\hline\n[3, 1, 2] & 2 & 3 & 4 & 8 & 96 \\\\\\hline\n[3, 2, 1] & 3 & 3 & 5 & 7 & -105 \\\\\\hline\n\\end{array}\n$$\n\n所以 $B$ 的行列式值为 $0-48+0+84+96-105=27$。\n", "locale": "zh-CN"}}}
{"pid": "P2110", "type": "P", "difficulty": 5, "samples": [["2 47", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索"], "title": "欢总喊楼记", "background": "诗经有云：\n\n关关雎鸠，在河之洲。窈窕淑女，君子好逑。\n\n又是一个被风吹过的夏天……一日欢总在图书馆中自习，抬起头来，只见一翩跹女子从面前飘过，真是回眸一笑百媚生，六宫粉黛无颜色！一阵诗情涌上欢总心头，他顺手写下那诗句：\n\n啊，你是爱，是暖，是希望，你是人间四月天！\n\n任时光匆匆而过，欢总一直没能忘记那女子。人言单思苦，欢总偏单思。夜夜难入梦，此心淑可知。偶然一次机会，欢总得知了那女孩的信息。一日，欢总终于鼓起了勇气，他向她表白！\n\n那晚的夜色格外美丽，欢总在楼下慷慨激昂，气氛浪漫而感人。女孩有点心动了，但是直接答应是不是有点太不矜持了呢？于是，她想难难欢总，看看他到底有多少诚意。", "description": "女孩给出了两个整数 $L$ 和 $R$，她要欢总数出到底有多少个这样的 $X$：\n\n- $L \\le X \\le R$\n- $X$ 在十进制下的最高位与最低位相等\n\n比如，（不考虑 $L \\le X \\le R$ 的限制时）$2,101,329873$ 可以是这样的 $X$，而 $23,4567$ 就不是。\n\n孩子们，欢总下辈子的幸福生活就靠你们帮忙了！", "inputFormat": "一行两个整数 $L,R$。", "outputFormat": "一行一个整数，即满足所述性质的 $X$ 的个数。", "hint": "对于 $50\\%$ 的数据，$1 \\le L \\le R \\le 10^6$。\n\n对于 $100\\%$ 的数据，$1 \\le L \\le R \\le 10^{18}$。", "locale": "zh-CN", "translations": {"en": {"title": "Huan-zong's Shouting Chronicle", "background": "The Classic of Poetry says:\nGuan-guan cries the osprey, on the islets in the river. Fair and graceful is the lady; the gentleman seeks a good mate.\n\nIt was another summer brushed by the wind... One day, while Huan-zong was studying in the library, he looked up and saw a graceful girl drift past. Truly, with one backward glance she smiled, and a hundred charms were born; the beauty of the six palaces lost their color. A wave of poetry rose in Huan-zong’s heart, and he casually wrote the verse:\nAh, you are love, warmth, and hope; you are the April of the human world!\n\nAs time slipped by, Huan-zong still could not forget that girl. People say that unrequited love is bitter, yet Huan-zong insisted on it. Night after night he struggled to sleep; could the fair lady know this heart? By chance, he learned some information about the girl. One day, Huan-zong finally gathered his courage and confessed to her!\n\nThat night was especially beautiful. Huan-zong spoke passionately downstairs; the mood was romantic and moving. The girl felt a bit touched, but would saying yes right away be a bit lacking in reserve? So, she decided to challenge Huan-zong to see how sincere he really was.", "description": "The girl gives two integers $L$ and $R$, and she wants Huan-zong to count how many integers $X$ satisfy:\n\n- $L \\le X \\le R$,\n- The most significant and least significant decimal digits of $X$ are equal.\n\nFor example (ignoring the restriction $L \\le X \\le R$), $2$, $101$, $329873$ qualify, whereas $23$ and $4567$ do not.\n\nChildren, Huan-zong’s happiness in his next life depends on your help!", "inputFormat": "One line containing two integers $L$ and $R$.", "outputFormat": "One line with a single integer, the number of $X$ that satisfy the property.", "hint": "Constraints:\n\nFor $50\\%$ of the testdata, $1 \\le L \\le R \\le 10^6$.\n\nFor $100\\%$ of the testdata, $1 \\le L \\le R \\le 10^{18}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "欢总喊楼记", "background": "诗经有云：\n\n关关雎鸠，在河之洲。窈窕淑女，君子好逑。\n\n又是一个被风吹过的夏天……一日欢总在图书馆中自习，抬起头来，只见一翩跹女子从面前飘过，真是回眸一笑百媚生，六宫粉黛无颜色！一阵诗情涌上欢总心头，他顺手写下那诗句：\n\n啊，你是爱，是暖，是希望，你是人间四月天！\n\n任时光匆匆而过，欢总一直没能忘记那女子。人言单思苦，欢总偏单思。夜夜难入梦，此心淑可知。偶然一次机会，欢总得知了那女孩的信息。一日，欢总终于鼓起了勇气，他向她表白！\n\n那晚的夜色格外美丽，欢总在楼下慷慨激昂，气氛浪漫而感人。女孩有点心动了，但是直接答应是不是有点太不矜持了呢？于是，她想难难欢总，看看他到底有多少诚意。", "description": "女孩给出了两个整数 $L$ 和 $R$，她要欢总数出到底有多少个这样的 $X$：\n\n- $L \\le X \\le R$\n- $X$ 在十进制下的最高位与最低位相等\n\n比如，（不考虑 $L \\le X \\le R$ 的限制时）$2,101,329873$ 可以是这样的 $X$，而 $23,4567$ 就不是。\n\n孩子们，欢总下辈子的幸福生活就靠你们帮忙了！", "inputFormat": "一行两个整数 $L,R$。", "outputFormat": "一行一个整数，即满足所述性质的 $X$ 的个数。", "hint": "对于 $50\\%$ 的数据，$1 \\le L \\le R \\le 10^6$。\n\n对于 $100\\%$ 的数据，$1 \\le L \\le R \\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P2111", "type": "P", "difficulty": 4, "samples": [["3 90 2\n100", "0.172"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "数学"], "title": "考场奇遇", "background": "本市的某神校里有一个学霸，他的名字叫小明（为了保护主人公的隐私，他的名字都用“小明”代替）。在这次的期中考试中，小明同学走桃花运，在考场上认识了一位女生，她的名字叫小红（同样是为了保护隐私）。", "description": "英语考试结束了，打完铃，她就主动来找小明说话，一来就要借英语卷子对答案。小明是公认的英语大神，二话不说就把卷子借给了她。小红对了一遍答案，简直是千差万别，她不禁冒出了冷汗。这时，小明走过来，安慰她：“没事，我又不是标准答案，不一定全对。”\n\n已知小明答案的准确率是 $A\\%$，一共有 $N$ 道题，给出小红对答案的结果 $S$（一个长为 $N$ 的 01 串，其中 `1` 表示两人答案一样，`0` 表示不一样）。为了简化问题，所有题目都是判断题。\n\n请你帮小红写一个程序，计算出她对 $Q$ 题及以上的概率。\n\n（P.S. 小明后来把那张卷子送给了小红，别想多了，不是定情信物）", "inputFormat": "第 $1$ 行，三个正整数 $N,A,Q$。\n\n第 $2$ 行，一个 01 字符串 $S$。\n", "outputFormat": "一行，一个实数，表示她对 $Q$ 题及以上的概率。（保留 $3$ 位小数）", "hint": "对于 $90\\%$ 数据，$N \\leq 50, N-5 \\leq Q \\leq N$。\n\n对于剩下的 $10\\%$ 数据，$N \\leq 10000, Q = 0$。", "locale": "zh-CN", "translations": {"en": {"title": "An Unexpected Encounter in the Exam Hall", "background": "In a certain elite school in this city, there is a top student named Xiao Ming (to protect the protagonist’s privacy, the name “Xiao Ming” is used). During the midterm exam, Xiao Ming had a stroke of luck and met a girl in the exam hall. Her name is Xiao Hong (also for privacy).", "description": "After the English exam ended and the bell rang, she took the initiative to talk to Xiao Ming and immediately asked to borrow his English paper to check answers. Xiao Ming is recognized as an English master, so he lent it to her without hesitation. After checking, Xiao Hong found her answers were vastly different; she broke into a cold sweat. At this moment, Xiao Ming came over to comfort her: “It’s okay, I’m not the official answer key; I might not be entirely correct.”\n\nIt is known that Xiao Ming’s accuracy rate is $A\\%$, and there are $N$ questions in total. You are given Xiao Hong’s comparison result $S$ (a 01 string of length $N$, where `1` means their answers are the same and `0` means they are different). To simplify the problem, all questions are True/False questions.\n\nPlease help Xiao Hong write a program to compute the probability that she answers at least $Q$ questions correctly.\n\n(P.S. Xiao Ming later gave that paper to Xiao Hong. Don’t overthink it—it wasn’t a love token.)", "inputFormat": "The first line contains three positive integers $N$, $A$, $Q$.\n\nThe second line contains a 01 string $S$.", "outputFormat": "One line containing a real number: the probability that she answers at least $Q$ questions correctly. Print $3$ decimal places.", "hint": "For $90\\%$ of the testdata, $N \\leq 50$, $N - 5 \\leq Q \\leq N$.\n\nFor the remaining $10\\%$ of the testdata, $N \\leq 10000$, $Q = 0$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "考场奇遇", "background": "本市的某神校里有一个学霸，他的名字叫小明（为了保护主人公的隐私，他的名字都用“小明”代替）。在这次的期中考试中，小明同学走桃花运，在考场上认识了一位女生，她的名字叫小红（同样是为了保护隐私）。", "description": "英语考试结束了，打完铃，她就主动来找小明说话，一来就要借英语卷子对答案。小明是公认的英语大神，二话不说就把卷子借给了她。小红对了一遍答案，简直是千差万别，她不禁冒出了冷汗。这时，小明走过来，安慰她：“没事，我又不是标准答案，不一定全对。”\n\n已知小明答案的准确率是 $A\\%$，一共有 $N$ 道题，给出小红对答案的结果 $S$（一个长为 $N$ 的 01 串，其中 `1` 表示两人答案一样，`0` 表示不一样）。为了简化问题，所有题目都是判断题。\n\n请你帮小红写一个程序，计算出她对 $Q$ 题及以上的概率。\n\n（P.S. 小明后来把那张卷子送给了小红，别想多了，不是定情信物）", "inputFormat": "第 $1$ 行，三个正整数 $N,A,Q$。\n\n第 $2$ 行，一个 01 字符串 $S$。\n", "outputFormat": "一行，一个实数，表示她对 $Q$ 题及以上的概率。（保留 $3$ 位小数）", "hint": "对于 $90\\%$ 数据，$N \\leq 50, N-5 \\leq Q \\leq N$。\n\n对于剩下的 $10\\%$ 数据，$N \\leq 10000, Q = 0$。", "locale": "zh-CN"}}}
{"pid": "P2112", "type": "P", "difficulty": 4, "samples": [["4 2\nxxx xxxxx xxxx xx\n（输入的本来是一封情书，被和谐了……）", "1.0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "鸿雁传书", "background": "小明给小红写了一封情书，他想把文章变得更完美，所以要进行排版。", "description": "他一共写了 $N$ 个单词，为了美观，要把 $N$ 个单词分成 $K$ 行。单词的相对顺序不能变化。为了简化问题，无需考虑单词间的空格。\n\n小红会喜欢整齐的情书，小明想赢得小红的芳心，所以，他找到你，想让你帮他写一个程序，帮他排版，使得每行字母数的方差最小。请你求出最小的方差。\n", "inputFormat": "\n第 $1$ 行，两个正整数 $N,K$。\n\n第 $2$ 行，$N$ 个空格隔开的单词。", "outputFormat": "一行，一个 $1$ 位小数表示每行字母数的最小方差。", "hint": "【样例说明】\n\n```plain\nxxx xxxxx\nxxxx xx\n```\n\n$1 \\div 2 \\times ((8-7)^2+(6-7)^2) = 1$。\n\n【数据范围】\n\n对于 $30\\%$ 数据，$N \\leq 100$，$K \\leq 3$。\n\n对于全部数据，$N \\leq 1000$，$K \\leq 100$，单词长度 $\\leq 20$。", "locale": "zh-CN", "translations": {"en": {"title": "Wild Goose Mail", "background": "Xiao Ming wrote a love letter to Xiao Hong. He wants to make it more perfect, so he needs to typeset it.", "description": "He wrote $N$ words in total. For aesthetics, you must split the $N$ words into $K$ lines. The relative order of words cannot change. To simplify the problem, ignore spaces between words.\n\nXiao Hong likes neat letters. Xiao Ming wants to win her heart, so he asks you to write a program to typeset the words so that the variance of the number of letters per line is minimized. Please output the minimum variance.", "inputFormat": "Line $1$: two positive integers $N, K$.\n\nLine $2$: $N$ space-separated words.", "outputFormat": "One line: a decimal number with exactly one digit after the decimal point representing the minimum variance of letters per line.", "hint": "Sample Explanation:\n\n```plain\nxxx xxxxx\nxxxx xx\n```\n\n$1 \\div 2 \\times ((8-7)^2+(6-7)^2) = 1$.\n\nConstraints:\n\nFor $30\\%$ of the testdata, $N \\leq 100$, $K \\leq 3$.\n\nFor all testdata, $N \\leq 1000$, $K \\leq 100$, word length $\\leq 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "鸿雁传书", "background": "小明给小红写了一封情书，他想把文章变得更完美，所以要进行排版。", "description": "他一共写了 $N$ 个单词，为了美观，要把 $N$ 个单词分成 $K$ 行。单词的相对顺序不能变化。为了简化问题，无需考虑单词间的空格。\n\n小红会喜欢整齐的情书，小明想赢得小红的芳心，所以，他找到你，想让你帮他写一个程序，帮他排版，使得每行字母数的方差最小。请你求出最小的方差。\n", "inputFormat": "\n第 $1$ 行，两个正整数 $N,K$。\n\n第 $2$ 行，$N$ 个空格隔开的单词。", "outputFormat": "一行，一个 $1$ 位小数表示每行字母数的最小方差。", "hint": "【样例说明】\n\n```plain\nxxx xxxxx\nxxxx xx\n```\n\n$1 \\div 2 \\times ((8-7)^2+(6-7)^2) = 1$。\n\n【数据范围】\n\n对于 $30\\%$ 数据，$N \\leq 100$，$K \\leq 3$。\n\n对于全部数据，$N \\leq 1000$，$K \\leq 100$，单词长度 $\\leq 20$。", "locale": "zh-CN"}}}
{"pid": "P2113", "type": "P", "difficulty": 4, "samples": [["4 3 2 5\n2 2 1 3\n1 1 1 2\n1 2\n2 3\n3 4", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2015", "洛谷原创", "洛谷月赛"], "title": "看球泡妹子", "background": "2014 年巴西世界杯开幕了，现在满城皆是世界杯，商家们利用它大赚一笔，小明和小红也借此机会增进感情。\n", "description": "本届世界杯共有 $n$ 支球队，$m$ 场比赛。男球迷小明喜欢看比赛，女球迷小红喜欢看帅哥。每支球队在小明眼里的实力值为 $a_i$，在小红眼里的帅哥数量为 $b_i$。\n\n每场比赛有两个球队对抗，它们的编号分别是 $p_i$ 和 $q_i$。小明认为一场比赛的精彩度等于两队实力的乘积，小红则认为是两队帅哥数量之和。\n\n由于体力的限制，他们最多只能看 $k$ 场比赛。当然，只要看比赛，两个人一定会一起看。小明作为男生，理应迁就一下女生，所以，请你写一个程序，求出小红看到比赛的精彩度总和不小于 $c$ 的情况下，小明看到比赛的精彩度的最大总和。", "inputFormat": "第一行包含四个正整数 $n,m,k,c$。\n\n第二行有 $n$ 个用空格隔开的正整数 $a_i$。\n\n第三行有 $n$ 个用空格隔开的正整数 $b_i$。\n\n接下来 $m$ 行，每行两个正整数 $p_i,q_i$。\n", "outputFormat": "一行，一个正整数表示小明看到比赛的精彩度的最大总和。如果无论如何都无法满足小红的要求，输出 `-1`。\n", "hint": "#### 数据范围与约定\n\n- 对于 $20\\%$ 数据，$1 \\le n,m,k \\le 5$。\n- 对于 $100\\%$ 数据，$1 \\le n \\le 100$，$1 \\le k \\le m \\le 100$，$1 \\le a_i,b_i \\le 10$，$1 \\le c \\le 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "Watching Soccer and Dating", "background": "The 2014 Brazil World Cup has kicked off. The whole city is full of World Cup fever, and businesses are making a fortune from it. Xiao Ming and Xiao Hong also take this opportunity to strengthen their relationship.", "description": "There are $n$ teams and $m$ matches in this World Cup. Xiao Ming, a male fan, likes watching matches, while Xiao Hong, a female fan, likes watching handsome guys. For each team, its strength in Xiao Ming’s view is $a_i$, and the number of handsome guys in Xiao Hong’s view is $b_i$.\n\nEach match is between two teams with indices $p_i$ and $q_i$. Xiao Ming thinks the excitement of a match equals the product of the two teams’ strengths, while Xiao Hong thinks it equals the sum of the two teams’ numbers of handsome guys.\n\nDue to limited energy, they can watch at most $k$ matches. Of course, if they watch matches, they will always watch together. As a gentleman, Xiao Ming should compromise, so please write a program to find the maximum possible total excitement for Xiao Ming, subject to the constraint that Xiao Hong’s total excitement is at least $c$.", "inputFormat": "The first line contains four positive integers $n, m, k, c$.\n\nThe second line contains $n$ positive integers $a_i$ separated by spaces.\n\nThe third line contains $n$ positive integers $b_i$ separated by spaces.\n\nThe next $m$ lines each contain two positive integers $p_i, q_i$.", "outputFormat": "Output a single line containing a single positive integer: the maximum total excitement that Xiao Ming can get. If it is impossible to satisfy Xiao Hong’s requirement, output `-1`.", "hint": "Constraints\n\n- For $20\\%$ of the testdata, $1 \\le n, m, k \\le 5$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 100$, $1 \\le k \\le m \\le 100$, $1 \\le a_i, b_i \\le 10$, $1 \\le c \\le 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "看球泡妹子", "background": "2014 年巴西世界杯开幕了，现在满城皆是世界杯，商家们利用它大赚一笔，小明和小红也借此机会增进感情。\n", "description": "本届世界杯共有 $n$ 支球队，$m$ 场比赛。男球迷小明喜欢看比赛，女球迷小红喜欢看帅哥。每支球队在小明眼里的实力值为 $a_i$，在小红眼里的帅哥数量为 $b_i$。\n\n每场比赛有两个球队对抗，它们的编号分别是 $p_i$ 和 $q_i$。小明认为一场比赛的精彩度等于两队实力的乘积，小红则认为是两队帅哥数量之和。\n\n由于体力的限制，他们最多只能看 $k$ 场比赛。当然，只要看比赛，两个人一定会一起看。小明作为男生，理应迁就一下女生，所以，请你写一个程序，求出小红看到比赛的精彩度总和不小于 $c$ 的情况下，小明看到比赛的精彩度的最大总和。", "inputFormat": "第一行包含四个正整数 $n,m,k,c$。\n\n第二行有 $n$ 个用空格隔开的正整数 $a_i$。\n\n第三行有 $n$ 个用空格隔开的正整数 $b_i$。\n\n接下来 $m$ 行，每行两个正整数 $p_i,q_i$。\n", "outputFormat": "一行，一个正整数表示小明看到比赛的精彩度的最大总和。如果无论如何都无法满足小红的要求，输出 `-1`。\n", "hint": "#### 数据范围与约定\n\n- 对于 $20\\%$ 数据，$1 \\le n,m,k \\le 5$。\n- 对于 $100\\%$ 数据，$1 \\le n \\le 100$，$1 \\le k \\le m \\le 100$，$1 \\le a_i,b_i \\le 10$，$1 \\le c \\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P2114", "type": "P", "difficulty": 4, "samples": [["3 10\nAND 5\nOR 6\nXOR 7", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "2014", "NOI", "位运算"], "title": "[NOI2014] 起床困难综合症", "background": null, "description": "$21$ 世纪，许多人得了一种奇怪的病：起床困难综合症，其临床表现为：起床难，起床后精神不佳。作为一名青春阳光好少年，atm 一直坚持与起床困难综合症作斗争。通过研究相关文献，他找到了该病的发病原因：在深邃的太平洋海底中，出现了一条名为 drd 的巨龙，它掌握着睡眠之精髓，能随意延长大家的睡眠时间。正是由于 drd 的活动，起床困难综合症愈演愈烈，以惊人的速度在世界上传播。为了彻底消灭这种病，atm 决定前往海底，消灭这条恶龙。历经千辛万苦，atm 终于来到了 drd 所在的地方，准备与其展开艰苦卓绝的战斗。drd 有着十分特殊的技能，他的防御战线能够使用一定的运算来改变他受到的伤害。具体说来，drd 的防御战线由 $n$ 扇防御门组成。每扇防御门包括一个运算 $\\text{op}$ 和一个参数 $t$，其中运算一定是 $\\texttt{OR},\\texttt{XOR},\\texttt{AND}$ 中的一种，参数则一定为非负整数。如果还未通过防御门时攻击力为 $x$，则其通过这扇防御门后攻击力将变为 $x\\,\\text{op}\\,t$。最终 drd 受到的伤害为对方初始攻击力 $x$ 依次经过所有 $n$ 扇防御门后转变得到的攻击力。\n\n由于 atm 水平有限，他的初始攻击力只能为 $0$ 到 $m$ 之间的一个整数（即他的初始攻击力只能在 $0,1,\\ldots,m$ 中任选，但在通过防御门之后的攻击力不受 $m$ 的限制）。为了节省体力，他希望通过选择合适的初始攻击力使得他的攻击能让 drd 受到最大的伤害，请你帮他计算一下，他的一次攻击最多能使 drd 受到多少伤害。", "inputFormat": "输入文件的第 $1$ 行包含 $2$ 个整数，依次为 $n, m$，表示 drd 有 $n$ 扇防御门，atm 的初始攻击力为 $0$ 到 $m$ 之间的整数。\n\n接下来 $n$ 行，依次表示每一扇防御门。每行包括一个字符串 $\\text{op}$ 和一个非负整数 $t$，两者由一个空格隔开，且 $\\text{op}$ 在前，$t$ 在后，$\\text{op}$ 表示该防御门所对应的操作，$t$ 表示对应的参数。", "outputFormat": "输出一行一个整数，表示 atm 的一次攻击最多使 drd 受到多少伤害。", "hint": "**【样例说明】**\n\natm 可以选择的初始攻击力为 $0,1,\\ldots ,10$。\n\n假设初始攻击力为 $4$，最终攻击力经过了如下计算\n\n- $4 \\texttt{ AND } 5 = 4$；\n- $4 \\texttt{ OR } 6 = 6$；\n- $6 \\texttt{ XOR } 7 = 1$。\n\n类似的，我们可以计算出初始攻击力为 $1,3,5,7,9$ 时最终攻击力为 $0$，初始攻击力为 $0,2,4,6,8,10$ 时最终攻击力为 $1$，因此 atm 的一次攻击最多使 drd 受到的伤害值为 $1$。\n\n**【数据规模与约定】**\n\n::cute-table{tuack}\n\n|测试点编号|$n$|$m$|性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$100$|$0$|无|\n|$2$|$1000$|$1000$|^|\n|$3$|^|^|^|\n|$4$|$10^5$|$10^5$|$\\text A$|\n|$5$|^|^|$\\text B$|\n|$6$|^|^|无|\n|$7$|^|$10^9$|$\\text B$|\n|$8$|^|^|无|\n|$9$|^|^|^|\n|$10$|^|^|^|\n\n- 特殊性质 $\\mathrm A$：存在一扇防御门为 $\\texttt{AND}~0$；\n- 特殊性质 $\\mathrm B$：所有防御门的操作均相同。\n\n对于所有数据，保证 $2\\le n\\le 10^5$，$0\\le m\\le 10^9$，$0\\le t\\le 10^9$，且 $\\mathrm{op}$ 一定为 $\\verb!AND!,\\verb!OR!,\\verb!XOR!$ 中的一种。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2014] Wake-Up Difficulty Syndrome", "background": "", "description": "In the 21st century, many people have developed a strange illness: the Wake-Up Difficulty Syndrome, whose clinical symptoms are: difficulty getting up and poor mental state after getting up. As a sunny and energetic teenager, atm has always fought against this syndrome. By studying relevant literature, he discovered the cause of the illness: deep under the Pacific Ocean, there is a giant dragon named drd, who masters the essence of sleep and can arbitrarily extend everyone’s sleep time. It is precisely due to drd’s activities that the Wake-Up Difficulty Syndrome has worsened and is spreading at an alarming rate around the world. To completely eliminate this disease, atm decides to go to the seabed to defeat this evil dragon. After enduring many hardships, atm finally arrives at drd’s location, ready for a tough and arduous battle. drd has a very special skill: his defensive front can use certain operations to change the damage he receives. Specifically, drd’s defensive front consists of $n$ defense gates. Each defense gate includes an operation $\\text{op}$ and a parameter $t$, where the operation must be one of $\\texttt{OR}, \\texttt{XOR}, \\texttt{AND}$, and the parameter must be a non-negative integer. If the attack power before passing the gate is $x$, then after passing this gate it becomes $x\\,\\text{op}\\,t$. The final damage drd receives is the attack power obtained by applying all $n$ defense gates in order to the opponent’s initial attack power $x$.\n\nBecause atm’s ability is limited, his initial attack power can only be an integer between $0$ and $m$ (that is, he can choose his initial attack power from $0, 1, \\ldots, m$, but the attack power after passing through the defense gates is not limited by $m$). To save energy, he wants to choose a suitable initial attack power so that his attack causes the maximum possible damage to drd. Please help him compute the maximum damage his single attack can cause.", "inputFormat": "The first line of the input file contains $2$ integers, $n, m$, indicating that drd has $n$ defense gates, and atm’s initial attack power can be any integer from $0$ to $m$.\n\nThe next $n$ lines describe each defense gate in order. Each line contains a string $\\text{op}$ and a non-negative integer $t$, separated by a space, with $\\text{op}$ first and $t$ second. $\\text{op}$ denotes the operation of the defense gate, and $t$ denotes its parameter.", "outputFormat": "Output a single integer on one line: the maximum damage that atm’s single attack can cause to drd.", "hint": "【Sample Explanation】\n\natm can choose an initial attack power from $0, 1, \\ldots, 10$.\n\nSuppose the initial attack power is $4$. The final attack power is computed as follows:\n- $4 \\texttt{ AND } 5 = 4$;\n- $4 \\texttt{ OR } 6 = 6$;\n- $6 \\texttt{ XOR } 7 = 1$.\n\nSimilarly, we can compute that when the initial attack power is $1, 3, 5, 7, 9$, the final attack power is $0$; when the initial attack power is $0, 2, 4, 6, 8, 10$, the final attack power is $1$. Therefore, the maximum damage atm’s single attack can cause to drd is $1$.\n\n【Constraints and Conventions】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/29yj7o58.png)\n\n- Special property $\\mathrm A$: There exists a defense gate equal to $\\texttt{AND}~0$.\n- Special property $\\mathrm B$: All defense gates use the same operation.\n\nFor all testdata, it is guaranteed that $2 \\le n \\le 10^5$, $0 \\le m \\le 10^9$, $0 \\le t \\le 10^9$, and $\\mathrm{op}$ is one of $\\verb!AND!,\\verb!OR!,\\verb!XOR!$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2014] 起床困难综合症", "background": null, "description": "$21$ 世纪，许多人得了一种奇怪的病：起床困难综合症，其临床表现为：起床难，起床后精神不佳。作为一名青春阳光好少年，atm 一直坚持与起床困难综合症作斗争。通过研究相关文献，他找到了该病的发病原因：在深邃的太平洋海底中，出现了一条名为 drd 的巨龙，它掌握着睡眠之精髓，能随意延长大家的睡眠时间。正是由于 drd 的活动，起床困难综合症愈演愈烈，以惊人的速度在世界上传播。为了彻底消灭这种病，atm 决定前往海底，消灭这条恶龙。历经千辛万苦，atm 终于来到了 drd 所在的地方，准备与其展开艰苦卓绝的战斗。drd 有着十分特殊的技能，他的防御战线能够使用一定的运算来改变他受到的伤害。具体说来，drd 的防御战线由 $n$ 扇防御门组成。每扇防御门包括一个运算 $\\text{op}$ 和一个参数 $t$，其中运算一定是 $\\texttt{OR},\\texttt{XOR},\\texttt{AND}$ 中的一种，参数则一定为非负整数。如果还未通过防御门时攻击力为 $x$，则其通过这扇防御门后攻击力将变为 $x\\,\\text{op}\\,t$。最终 drd 受到的伤害为对方初始攻击力 $x$ 依次经过所有 $n$ 扇防御门后转变得到的攻击力。\n\n由于 atm 水平有限，他的初始攻击力只能为 $0$ 到 $m$ 之间的一个整数（即他的初始攻击力只能在 $0,1,\\ldots,m$ 中任选，但在通过防御门之后的攻击力不受 $m$ 的限制）。为了节省体力，他希望通过选择合适的初始攻击力使得他的攻击能让 drd 受到最大的伤害，请你帮他计算一下，他的一次攻击最多能使 drd 受到多少伤害。", "inputFormat": "输入文件的第 $1$ 行包含 $2$ 个整数，依次为 $n, m$，表示 drd 有 $n$ 扇防御门，atm 的初始攻击力为 $0$ 到 $m$ 之间的整数。\n\n接下来 $n$ 行，依次表示每一扇防御门。每行包括一个字符串 $\\text{op}$ 和一个非负整数 $t$，两者由一个空格隔开，且 $\\text{op}$ 在前，$t$ 在后，$\\text{op}$ 表示该防御门所对应的操作，$t$ 表示对应的参数。", "outputFormat": "输出一行一个整数，表示 atm 的一次攻击最多使 drd 受到多少伤害。", "hint": "**【样例说明】**\n\natm 可以选择的初始攻击力为 $0,1,\\ldots ,10$。\n\n假设初始攻击力为 $4$，最终攻击力经过了如下计算\n\n- $4 \\texttt{ AND } 5 = 4$；\n- $4 \\texttt{ OR } 6 = 6$；\n- $6 \\texttt{ XOR } 7 = 1$。\n\n类似的，我们可以计算出初始攻击力为 $1,3,5,7,9$ 时最终攻击力为 $0$，初始攻击力为 $0,2,4,6,8,10$ 时最终攻击力为 $1$，因此 atm 的一次攻击最多使 drd 受到的伤害值为 $1$。\n\n**【数据规模与约定】**\n\n::cute-table{tuack}\n\n|测试点编号|$n$|$m$|性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$100$|$0$|无|\n|$2$|$1000$|$1000$|^|\n|$3$|^|^|^|\n|$4$|$10^5$|$10^5$|$\\text A$|\n|$5$|^|^|$\\text B$|\n|$6$|^|^|无|\n|$7$|^|$10^9$|$\\text B$|\n|$8$|^|^|无|\n|$9$|^|^|^|\n|$10$|^|^|^|\n\n- 特殊性质 $\\mathrm A$：存在一扇防御门为 $\\texttt{AND}~0$；\n- 特殊性质 $\\mathrm B$：所有防御门的操作均相同。\n\n对于所有数据，保证 $2\\le n\\le 10^5$，$0\\le m\\le 10^9$，$0\\le t\\le 10^9$，且 $\\mathrm{op}$ 一定为 $\\verb!AND!,\\verb!OR!,\\verb!XOR!$ 中的一种。", "locale": "zh-CN"}}}
{"pid": "P2115", "type": "P", "difficulty": 5, "samples": [["5\n5\n1\n7\n8\n2", "2.667"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "二分", "USACO"], "title": "[USACO14MAR] Sabotage G", "background": null, "description": "农夫约翰的头号敌人保罗决定破坏农民约翰的挤奶设备。挤奶设备排成一行，共 $N$（$3\\le N\\le 100,000$）台挤奶机，其中第 $i$ 个台挤奶机生产 $M_i$ 单位（$1\\le M_i\\le 10,000$）的牛奶。\n\n\n保罗计划切断一段连续的挤奶机，从第 $i$ 台挤奶机到第 $j$ 台挤奶机（$2\\le i\\le j\\le N-1$）。注意，他不希望断开第一台或最后一台挤奶机，因为这将会使他的计划太容易被发现。保罗的目标是让其余机器的平均产奶量最小。保罗计划除去至少 $1$ 台挤奶机。\n\n请计算剩余机器的最小平均产奶量。", "inputFormat": "第 $1$ 行：一个整数 $N$。\n\n第 $2$ 到 $N+1$ 行：第 $i+1$ 行包含一个整数 $M_i$。", "outputFormat": "第 $1$ 行：一个实数，表示平均牛奶产量的最小值，保留三位小数（四舍五入）。", "hint": "【样例说明】\n\n移去 $7$ 和 $8$，剩下 $5,1,2$，平均值为 $\\dfrac{8}{3}$。\n\n【数据规模和约定】\n\n对于 $30\\%$ 的数据，$N\\le 1,000$。\n\n对于 $50\\%$ 的数据，$N\\le 10,000$。\n\n对于 $100\\%$ 的数据，$3\\le N\\le 100,000$，$1\\le M_i\\le 10,000$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14MAR] Sabotage G", "background": null, "description": "Farmer John's arch-nemesis, Farmer Paul, has decided to sabotage Farmer John's milking equipment!\n\nThe milking equipment consists of a row of N (3 <= N <= 100,000) milking machines, where the ith machine produces M_i units of milk (1 <= M_i <= 10,000). Farmer Paul plans to disconnect a contiguous block of these machines -- from the ith machine up to the jth machine (2 <= i <= j <= N-1); note that Farmer Paul does not want to disconnect either the first or the last machine, since this will make his plot too easy to discover. Farmer Paul's goal is to minimize the average milk production of the remaining machines. Farmer Paul plans to remove at least 1 cow, even if it would be better for him to avoid sabotage entirely.\n\nFortunately, Farmer John has learned of Farmer Paul's evil plot, and he is wondering how bad his milk production will suffer if the plot succeeds. Please help Farmer John figure out the minimum average milk production of the remaining machines if Farmer Paul does succeed.", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO14MAR] Sabotage G", "background": null, "description": "农夫约翰的头号敌人保罗决定破坏农民约翰的挤奶设备。挤奶设备排成一行，共 $N$（$3\\le N\\le 100,000$）台挤奶机，其中第 $i$ 个台挤奶机生产 $M_i$ 单位（$1\\le M_i\\le 10,000$）的牛奶。\n\n\n保罗计划切断一段连续的挤奶机，从第 $i$ 台挤奶机到第 $j$ 台挤奶机（$2\\le i\\le j\\le N-1$）。注意，他不希望断开第一台或最后一台挤奶机，因为这将会使他的计划太容易被发现。保罗的目标是让其余机器的平均产奶量最小。保罗计划除去至少 $1$ 台挤奶机。\n\n请计算剩余机器的最小平均产奶量。", "inputFormat": "第 $1$ 行：一个整数 $N$。\n\n第 $2$ 到 $N+1$ 行：第 $i+1$ 行包含一个整数 $M_i$。", "outputFormat": "第 $1$ 行：一个实数，表示平均牛奶产量的最小值，保留三位小数（四舍五入）。", "hint": "【样例说明】\n\n移去 $7$ 和 $8$，剩下 $5,1,2$，平均值为 $\\dfrac{8}{3}$。\n\n【数据规模和约定】\n\n对于 $30\\%$ 的数据，$N\\le 1,000$。\n\n对于 $50\\%$ 的数据，$N\\le 10,000$。\n\n对于 $100\\%$ 的数据，$3\\le N\\le 100,000$，$1\\le M_i\\le 10,000$。", "locale": "zh-CN"}}}
{"pid": "P2116", "type": "P", "difficulty": 5, "samples": [["9 100\n200 400\n300 400\n300 300\n400 300\n400 400\n500 400\n500 200\n350 200\n200 200", "1628"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["计算几何", "凸包"], "title": "城墙", "background": "", "description": "有一次，一个贪婪的国王命令他的骑士在他的城堡外修建一堵围墙，要求围墙离城堡的最近距离不能少于 $L$。\n\n城堡是一个 $n$ 边形，国王非常吝啬，不愿意多花建一米的围墙，多建的话他会杀掉负责修建的骑士。\n\n请你帮助这个倒霉的骑士，帮他求出最少需要修建多长的围墙。", "inputFormat": "第一行两个整数 $n$，$L$ 表示多边形的边数和最小距离。\n\n接下里 $n$ 行，每行两个整数，表示多边形上的点的坐标。", "outputFormat": "一行一个整数，即最小的围墙长度，四舍五入到整数。", "hint": "#### 数据规模与约定\n- 对于 $100\\%$ 的数据，保证 $3\\le n\\le1000$，$1\\le L\\le1000$，$-10^4\\leq x_i,y_i\\leq 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "City Wall", "background": "", "description": "Once, a greedy king ordered his knight to build a wall outside his castle, requiring that the wall’s minimum distance from the castle must be at least $L$.\n\nThe castle is an $n$-gon. The king is extremely stingy and refuses to build even one extra meter of wall; if more is built, he will execute the knight in charge.\n\nPlease help this unlucky knight compute the minimal length of the wall that needs to be built.", "inputFormat": "The first line contains two integers $n$, $L$, representing the number of sides of the polygon and the minimum distance.\n\nThen follow $n$ lines. Each line contains two integers, the coordinates of a vertex on the polygon.", "outputFormat": "Output a single integer: the minimal length of the wall, rounded to the nearest integer.", "hint": "Constraints\n- For $100\\%$ of the testdata, it is guaranteed that $3\\le n\\le1000$, $1\\le L\\le1000$, and $-10^4\\leq x_i,y_i\\leq 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "城墙", "background": "", "description": "有一次，一个贪婪的国王命令他的骑士在他的城堡外修建一堵围墙，要求围墙离城堡的最近距离不能少于 $L$。\n\n城堡是一个 $n$ 边形，国王非常吝啬，不愿意多花建一米的围墙，多建的话他会杀掉负责修建的骑士。\n\n请你帮助这个倒霉的骑士，帮他求出最少需要修建多长的围墙。", "inputFormat": "第一行两个整数 $n$，$L$ 表示多边形的边数和最小距离。\n\n接下里 $n$ 行，每行两个整数，表示多边形上的点的坐标。", "outputFormat": "一行一个整数，即最小的围墙长度，四舍五入到整数。", "hint": "#### 数据规模与约定\n- 对于 $100\\%$ 的数据，保证 $3\\le n\\le1000$，$1\\le L\\le1000$，$-10^4\\leq x_i,y_i\\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2117", "type": "P", "difficulty": 3, "samples": [["3 12\n1 1 1\n0 1 1\n1 0 0\n3\n2 3\n3\n2 2\n2 2\n1 3\n3\n3\n1 2\n2 1\n1 1\n3\n", "01001\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学"], "title": "小Z的矩阵", "background": "", "description": "小 Z 最近迷上了矩阵，他定义了一个对于一种特殊矩阵的特征函数 $G$。对于 $N\\times N$ 的矩阵 $A$，$A$ 的所有元素均为 $0$ 或 $1$，则 $\\displaystyle G(A) = \\left(\\sum_{i = 1}^n\\sum_{j = 1}^n A_{i, j}\\cdot A_{j, i}\\right) \\bmod 2$。举一个例子：\n\n$$\n\\begin{pmatrix}\n1 & 1 & 1\\\\\n0 & 1 & 1\\\\\n1 & 0 & 0\\\\\n\\end{pmatrix}\n$$\n\n对于上面这个 $3\\times 3$ 矩阵 $A$，$G(A)=(1\\times 1+1\\times 0+1\\times 1+0\\times 1+1\\times 1+1\\times 0+1\\times 1+ 0\\times 1+0\\times 0) \\bmod 2 = 0$。\n\n当然询问一个矩阵的 $G$ 值实在是太简单了。小Z在给出一个 $N\\times N$ 矩阵的同时将给你 $Q$ 个操作，操作描述如下：\n\n- 操作 1：形如 `1 x`，表示将第 $x$ 行的元素全部“翻转”。\n- 操作 2：形如 `2 x`，表示将第 $x$ 列的元素全部“翻转”。\n- 操作 3：形如一个整数`3`，表示询问当前矩阵的特征值 $G$。\n\n“翻转”的定义为将 $1$ 变成 $0$，将 $0$ 变成 $1$。", "inputFormat": "第一行：两个正整数 $N,Q$。$N$ 表示矩阵的行数（列数），$Q$ 表示询问的次数。\n\n接下来 $N$ 行：一个 $N\\times N$ 的矩阵 $A$，$0\\le A_{i, j}\\le 1$。\n\n接下来 $Q$ 行：$Q$ 个操作。", "outputFormat": "一行若干个数，中间没有空格，分别表示每个操作的结果（操作 1 和操作 2 不需要输出）。", "hint": "【数据规模】\n\n- 对于 $30\\%$ 的数据，$N\\le 100$，$Q\\le 10^5$。\n\n- 对于 $100\\%$ 的数据，$N\\le 1,000$，$Q \\le 5\\times 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Matrix", "background": "", "description": "Xiao Z has recently become obsessed with matrices. He defines a characteristic function $G$ for a special kind of matrix. For an $N \\times N$ matrix $A$ where every element of $A$ is $0$ or $1$, define\n$\\displaystyle G(A) = \\left(\\sum_{i = 1}^n\\sum_{j = 1}^n A_{i, j}\\cdot A_{j, i}\\right) \\bmod 2$. For example:\n\n$$\n\\begin{pmatrix}\n1 & 1 & 1\\\\\n0 & 1 & 1\\\\\n1 & 0 & 0\\\\\n\\end{pmatrix}\n$$\n\nFor the $3 \\times 3$ matrix $A$ above, $G(A)=(1\\times 1+1\\times 0+1\\times 1+0\\times 1+1\\times 1+1\\times 0+1\\times 1+ 0\\times 1+0\\times 0) \\bmod 2 = 0$.\n\nOf course, querying the $G$ value of a single matrix is too simple. Along with giving you an $N \\times N$ matrix, Xiao Z also gives you $Q$ operations, described as follows:\n\n- Operation 1: of the form `1 x`, which means “flip” all elements in row $x$.\n- Operation 2: of the form `2 x`, which means “flip” all elements in column $x$.\n- Operation 3: an integer `3`, which asks for the current value of the characteristic function $G$.\n\n“Flip” means changing $1$ to $0$ and $0$ to $1$.", "inputFormat": "The first line contains two positive integers $N, Q$. $N$ is the number of rows (and columns) of the matrix, and $Q$ is the number of operations.\n\nThe next $N$ lines describe an $N \\times N$ matrix $A$, with $0 \\le A_{i, j} \\le 1$.\n\nThe next $Q$ lines contain the $Q$ operations.", "outputFormat": "Output a single line consisting of several numbers with no spaces, representing the result of each operation (no output for operations 1 and 2).", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $N \\le 100$, $Q \\le 10^5$.\n- For $100\\%$ of the testdata, $N \\le 1{,}000$, $Q \\le 5 \\times 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的矩阵", "background": "", "description": "小 Z 最近迷上了矩阵，他定义了一个对于一种特殊矩阵的特征函数 $G$。对于 $N\\times N$ 的矩阵 $A$，$A$ 的所有元素均为 $0$ 或 $1$，则 $\\displaystyle G(A) = \\left(\\sum_{i = 1}^n\\sum_{j = 1}^n A_{i, j}\\cdot A_{j, i}\\right) \\bmod 2$。举一个例子：\n\n$$\n\\begin{pmatrix}\n1 & 1 & 1\\\\\n0 & 1 & 1\\\\\n1 & 0 & 0\\\\\n\\end{pmatrix}\n$$\n\n对于上面这个 $3\\times 3$ 矩阵 $A$，$G(A)=(1\\times 1+1\\times 0+1\\times 1+0\\times 1+1\\times 1+1\\times 0+1\\times 1+ 0\\times 1+0\\times 0) \\bmod 2 = 0$。\n\n当然询问一个矩阵的 $G$ 值实在是太简单了。小Z在给出一个 $N\\times N$ 矩阵的同时将给你 $Q$ 个操作，操作描述如下：\n\n- 操作 1：形如 `1 x`，表示将第 $x$ 行的元素全部“翻转”。\n- 操作 2：形如 `2 x`，表示将第 $x$ 列的元素全部“翻转”。\n- 操作 3：形如一个整数`3`，表示询问当前矩阵的特征值 $G$。\n\n“翻转”的定义为将 $1$ 变成 $0$，将 $0$ 变成 $1$。", "inputFormat": "第一行：两个正整数 $N,Q$。$N$ 表示矩阵的行数（列数），$Q$ 表示询问的次数。\n\n接下来 $N$ 行：一个 $N\\times N$ 的矩阵 $A$，$0\\le A_{i, j}\\le 1$。\n\n接下来 $Q$ 行：$Q$ 个操作。", "outputFormat": "一行若干个数，中间没有空格，分别表示每个操作的结果（操作 1 和操作 2 不需要输出）。", "hint": "【数据规模】\n\n- 对于 $30\\%$ 的数据，$N\\le 100$，$Q\\le 10^5$。\n\n- 对于 $100\\%$ 的数据，$N\\le 1,000$，$Q \\le 5\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P2118", "type": "P", "difficulty": 2, "samples": [["1498 902 10", "5 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2014", "NOIP 普及组", "最大公约数 gcd"], "title": "[NOIP 2014 普及组] 比例简化", "background": "NOIP2014 普及组 T2", "description": "在社交媒体上，经常会看到针对某一个观点同意与否的民意调查以及结果。例如，对某一观点表示支持的有 $1498$ 人，反对的有 $902$ 人，那么赞同与反对的比例可以简单的记为 $1498:902$。\n\n不过，如果把调查结果就以这种方式呈现出来，大多数人肯定不会满意。因为这个比例的数值太大，难以一眼看出它们的关系。对于上面这个例子，如果把比例记为 $5:3$，虽然与真实结果有一定的误差，但依然能够较为准确地反映调查结果，同时也显得比较直观。\n\n现给出支持人数 $A$，反对人数 $B$，以及一个上限 $L$，请你将 $A$ 比 $B$ 化简为 $A'$ 比 $B'$，要求在 $A'$ 和 $B'$ 均不大于 $L$ 且 $A'$ 和 $B'$ 互质（两个整数的最大公约数是 $1$）的前提下，$\\dfrac{A'}{B'} \\ge  \\dfrac{A}{B}$ 且 $\\dfrac{A'}{B'} - \\dfrac{A}{B}$ 的值尽可能小。", "inputFormat": "共一行，包含三个整数 $A,B,L$，每两个整数之间用一个空格隔开，分别表示支持人数、反对人数以及上限。\n", "outputFormat": "共一行，包含两个整数 $A',B'$，中间用一个空格隔开，表示化简后的比例。\n", "hint": "对于 $100\\%$ 的数据，$1 \\le A \\le 10^6,1 \\le B \\le 10^6,1 \\le L \\le 100,\\dfrac{A}{B} \\le L$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Junior] Ratio Simplification", "background": "NOIP 2014 Junior T2.", "description": "On social media, it is common to see polls and their results about whether people agree with a certain viewpoint. For example, if $1498$ people support it and $902$ oppose it, then the ratio of support to opposition can be written simply as $1498:902$.\n\nHowever, most people would not be satisfied if the results were presented this way, because the numbers in the ratio are too large and it is hard to see the relationship at a glance. For the example above, if the ratio is written as $5:3$, although there is some error compared with the true result, it still reflects the poll result fairly accurately and is more intuitive.\n\nGiven the number of supporters $A$, the number of opponents $B$, and an upper bound $L$, please reduce $A$ to $B$ into $A'$ to $B'$ under the conditions that $A'$ and $B'$ are both no greater than $L$ and $A'$ and $B'$ are coprime (the greatest common divisor of the two integers is $1$), such that $\\dfrac{A'}{B'} \\ge \\dfrac{A}{B}$ and the value of $\\dfrac{A'}{B'} - \\dfrac{A}{B}$ is as small as possible.", "inputFormat": "One line containing three integers $A,B,L$, separated by a single space, representing the number of supporters, the number of opponents, and the upper bound.", "outputFormat": "One line containing two integers $A',B'$, separated by a single space, representing the simplified ratio.", "hint": "For $100\\%$ of the testdata, $1 \\le A \\le 10^6, 1 \\le B \\le 10^6, 1 \\le L \\le 100, \\dfrac{A}{B} \\le L$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 普及组] 比例简化", "background": "NOIP2014 普及组 T2", "description": "在社交媒体上，经常会看到针对某一个观点同意与否的民意调查以及结果。例如，对某一观点表示支持的有 $1498$ 人，反对的有 $902$ 人，那么赞同与反对的比例可以简单的记为 $1498:902$。\n\n不过，如果把调查结果就以这种方式呈现出来，大多数人肯定不会满意。因为这个比例的数值太大，难以一眼看出它们的关系。对于上面这个例子，如果把比例记为 $5:3$，虽然与真实结果有一定的误差，但依然能够较为准确地反映调查结果，同时也显得比较直观。\n\n现给出支持人数 $A$，反对人数 $B$，以及一个上限 $L$，请你将 $A$ 比 $B$ 化简为 $A'$ 比 $B'$，要求在 $A'$ 和 $B'$ 均不大于 $L$ 且 $A'$ 和 $B'$ 互质（两个整数的最大公约数是 $1$）的前提下，$\\dfrac{A'}{B'} \\ge  \\dfrac{A}{B}$ 且 $\\dfrac{A'}{B'} - \\dfrac{A}{B}$ 的值尽可能小。", "inputFormat": "共一行，包含三个整数 $A,B,L$，每两个整数之间用一个空格隔开，分别表示支持人数、反对人数以及上限。\n", "outputFormat": "共一行，包含两个整数 $A',B'$，中间用一个空格隔开，表示化简后的比例。\n", "hint": "对于 $100\\%$ 的数据，$1 \\le A \\le 10^6,1 \\le B \\le 10^6,1 \\le L \\le 100,\\dfrac{A}{B} \\le L$。\n", "locale": "zh-CN"}}}
{"pid": "P2119", "type": "P", "difficulty": 4, "samples": [["30 8\n1\n24\n7\n28\n5\n29\n26\n24", "4 0 0 0\n0 0 1 0\n0 2 0 0\n0 0 1 1\n1 3 0 0\n0 0 0 2\n0 0 2 2\n0 0 1 0"], ["15 15\n1 \n2 \n3 \n4 \n5\n6 \n7 \n8 \n9\n10\n11\n12\n13\n14\n15", "5 0 0 0\n4 0 0 0\n3 5 0 0\n2 4 0 0\n1 3 0 0\n0 2 0 0\n0 1 0 0\n0 0 0 0\n0 0 0 0\n0 0 1 0\n0 0 2 1\n0 0 3 2\n0 0 4 3\n0 0 5 4\n0 0 0 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "2016", "NOIP 普及组", "枚举", "前缀和"], "title": "[NOIP 2016 普及组] 魔法阵", "background": "NOIP2016 普及组 T4", "description": "六十年一次的魔法战争就要开始了，大魔法师准备从附近的魔法场中汲取魔法能量。\n\n大魔法师有 $m$ 个魔法物品，编号分别为 $1,2,\\ldots,m$。每个物品具有一个魔法值，我们用 $X_i$ 表示编号为 $i$ 的物品的魔法值。每个魔法值 $X_i$ 是不超过 $n$ 的正整数，可能有多个物品的魔法值相同。\n\n大魔法师认为，当且仅当四个编号为 $a,b,c,d$ 的魔法物品满足 $X_a<X_b<X_c<X_d,X_b-X_a=2(X_d-X_c)$，并且 $X_b-X_a<(X_c-X_b)/3$ 时，这四个魔法物品形成了一个魔法阵，他称这四个魔法物品分别为这个魔法阵的 $A$ 物品，$B$ 物品，$C$ 物品，$D$ 物品。\n\n现在，大魔法师想要知道，对于每个魔法物品，作为某个魔法阵的 $A$ 物品出现的次数，作为 $B$ 物品的次数，作为 $C$ 物品的次数，和作为 $D$ 物品的次数。", "inputFormat": "第一行包含两个空格隔开的正整数 $n,m$。\n\n接下来 $m$ 行，每行一个正整数，第 $i+1$ 行的正整数表示 $X_i$，即编号为 $i$ 的物品的魔法值。\n\n保证 $1 \\le n \\le 15000$，$1 \\le m \\le 40000$，$1 \\le X_i \\le n$。每个 $X_i$ 是分别在合法范围内等概率随机生成的。", "outputFormat": "共 $m$ 行，每行 $4$ 个整数。第 $i$ 行的 $4$ 个整数依次表示编号为 $i$ 的物品作 为 $A,B,C,D$ 物品分别出现的次数。\n\n保证标准输出中的每个数都不会超过 $10^9$。每行相邻的两个数之间用恰好一个空格隔开。\n", "hint": "【样例解释 $1$】\n\n共有 $5$ 个魔法阵，分别为：\n\n- 物品 $1,3,7,6$，其魔法值分别为 $1,7,26,29$；\n- 物品 $1,5,2,7$，其魔法值分别为 $1,5,24,26$；\n- 物品 $1,5,7,4$，其魔法值分别为 $1,5,26,28$；\n- 物品 $1,5,8,7$，其魔法值分别为 $1,5,24,26$；\n- 物品 $5,3,4,6$，其魔法值分别为 $5,7,28,29$。\n\n以物品 $5$ 为例，它作为 $A$ 物品出现了 $1$ 次，作为 $B$ 物品出现了 $3$ 次，没有作为 $C$ 物品或者 $D$ 物品出现，所以这一行输出的四个数依次为 $1,3,0,0$。\n\n此外，如果我们将输出看作一个 $m$ 行 $4$ 列的矩阵，那么每一列上的 $m$ 个数之和都应等于魔法阵的总数。所以，如果你的输出不满足这个性质，那么这个输出一定不正确。你可以通过这个性质在一定程度上检查你的输出的正确性。\n\n【数据规模】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nozwrvut.png)", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2016 Junior] Magic Formation", "background": "NOIP 2016 Junior T4.", "description": "The once-in-60-years magic war is about to begin, and the grand mage is preparing to draw magic energy from nearby magic fields.\n\nThe grand mage has $m$ magic items, numbered $1, 2, \\ldots, m$. Each item has a magic value, denoted $X_i$ for the item with index $i$. Each magic value $X_i$ is a positive integer not exceeding $n$, and multiple items may share the same magic value.\n\nThe grand mage believes that a set of four items with indices $a, b, c, d$ forms a magic formation if and only if they satisfy $X_a<X_b<X_c<X_d,X_b-X_a=2(X_d-X_c)$, and $X_b-X_a<(X_c-X_b)/3$. He calls these four items the $A$ item, $B$ item, $C$ item, and $D$ item of that magic formation, respectively.\n\nNow, the grand mage wants to know, for each magic item, how many times it appears as the $A$ item in some magic formation, as the $B$ item, as the $C$ item, and as the $D$ item.", "inputFormat": "The first line contains two positive integers $n, m$ separated by a space.\n\nThen follow $m$ lines, each containing one positive integer. The integer on line $i+1$ is $X_i$, the magic value of the item with index $i$.\n\nIt is guaranteed that $1 \\le n \\le 15000$, $1 \\le m \\le 40000$, $1 \\le X_i \\le n$. Each $X_i$ is independently and uniformly generated within the valid range.", "outputFormat": "Output $m$ lines, each containing $4$ integers. The $i$-th line contains $4$ integers, which are the counts of item $i$ appearing as the $A$, $B$, $C$, and $D$ items, respectively.\n\nIt is guaranteed that every number in the standard output does not exceed $10^9$. There must be exactly one space between any two adjacent numbers on the same line.", "hint": "[Sample Explanation $1$]\n\nThere are $5$ magic formations in total, namely:\n\n- Items $1,3,7,6$, with magic values $1,7,26,29$;\n- Items $1,5,2,7$, with magic values $1,5,24,26$;\n- Items $1,5,7,4$, with magic values $1,5,26,28$;\n- Items $1,5,8,7$, with magic values $1,5,24,26$;\n- Items $5,3,4,6$, with magic values $5,7,28,29$.\n\nTake item $5$ as an example. It appears once as the $A$ item and $3$ times as the $B$ item. It does not appear as the $C$ or $D$ item. Therefore, the four numbers on that line are $1, 3, 0, 0$.\n\nIn addition, if we view the output as an $m$-by-$4$ matrix, then the sum of the $m$ numbers in each column should equal the total number of magic formations. Therefore, if your output does not satisfy this property, it must be incorrect. You can use this property to partially check the correctness of your output.\n\n[Constraints]\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nozwrvut.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2016 普及组] 魔法阵", "background": "NOIP2016 普及组 T4", "description": "六十年一次的魔法战争就要开始了，大魔法师准备从附近的魔法场中汲取魔法能量。\n\n大魔法师有 $m$ 个魔法物品，编号分别为 $1,2,\\ldots,m$。每个物品具有一个魔法值，我们用 $X_i$ 表示编号为 $i$ 的物品的魔法值。每个魔法值 $X_i$ 是不超过 $n$ 的正整数，可能有多个物品的魔法值相同。\n\n大魔法师认为，当且仅当四个编号为 $a,b,c,d$ 的魔法物品满足 $X_a<X_b<X_c<X_d,X_b-X_a=2(X_d-X_c)$，并且 $X_b-X_a<(X_c-X_b)/3$ 时，这四个魔法物品形成了一个魔法阵，他称这四个魔法物品分别为这个魔法阵的 $A$ 物品，$B$ 物品，$C$ 物品，$D$ 物品。\n\n现在，大魔法师想要知道，对于每个魔法物品，作为某个魔法阵的 $A$ 物品出现的次数，作为 $B$ 物品的次数，作为 $C$ 物品的次数，和作为 $D$ 物品的次数。", "inputFormat": "第一行包含两个空格隔开的正整数 $n,m$。\n\n接下来 $m$ 行，每行一个正整数，第 $i+1$ 行的正整数表示 $X_i$，即编号为 $i$ 的物品的魔法值。\n\n保证 $1 \\le n \\le 15000$，$1 \\le m \\le 40000$，$1 \\le X_i \\le n$。每个 $X_i$ 是分别在合法范围内等概率随机生成的。", "outputFormat": "共 $m$ 行，每行 $4$ 个整数。第 $i$ 行的 $4$ 个整数依次表示编号为 $i$ 的物品作 为 $A,B,C,D$ 物品分别出现的次数。\n\n保证标准输出中的每个数都不会超过 $10^9$。每行相邻的两个数之间用恰好一个空格隔开。\n", "hint": "【样例解释 $1$】\n\n共有 $5$ 个魔法阵，分别为：\n\n- 物品 $1,3,7,6$，其魔法值分别为 $1,7,26,29$；\n- 物品 $1,5,2,7$，其魔法值分别为 $1,5,24,26$；\n- 物品 $1,5,7,4$，其魔法值分别为 $1,5,26,28$；\n- 物品 $1,5,8,7$，其魔法值分别为 $1,5,24,26$；\n- 物品 $5,3,4,6$，其魔法值分别为 $5,7,28,29$。\n\n以物品 $5$ 为例，它作为 $A$ 物品出现了 $1$ 次，作为 $B$ 物品出现了 $3$ 次，没有作为 $C$ 物品或者 $D$ 物品出现，所以这一行输出的四个数依次为 $1,3,0,0$。\n\n此外，如果我们将输出看作一个 $m$ 行 $4$ 列的矩阵，那么每一列上的 $m$ 个数之和都应等于魔法阵的总数。所以，如果你的输出不满足这个性质，那么这个输出一定不正确。你可以通过这个性质在一定程度上检查你的输出的正确性。\n\n【数据规模】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nozwrvut.png)", "locale": "zh-CN"}}}
{"pid": "P2120", "type": "P", "difficulty": 6, "samples": [["3\n0 5 10\n5 3 100\n9 6 10", "32\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2007", "各省省选", "浙江", "动态规划优化", "斜率优化"], "title": "[ZJOI2007] 仓库建设", "background": null, "description": "L 公司有 $n$ 个工厂，由高到低分布在一座山上，工厂 $1$ 在山顶，工厂 $n$ 在山脚。\n\n由于这座山处于高原内陆地区（干燥少雨），L 公司一般把产品直接堆放在露天，以节省费用。突然有一天，L 公司的总裁 L 先生接到气象部门的电话，被告知三天之后将有一场暴雨，于是 L 先生决定紧急在某些工厂建立一些仓库以免产品被淋坏。\n\n由于地形的不同，在不同工厂建立仓库的费用可能是不同的。第 $i$ 个工厂目前已有成品 $p_i$ 件，在第 $i$ 个工厂位置建立仓库的费用是 $c_i$。\n\n对于没有建立仓库的工厂，其产品应被运往其他的仓库进行储藏，而由于 L 公司产品的对外销售处设置在山脚的工厂 $n$，故产品只能往山下运（即**只能运往编号更大的工厂的仓库**），当然运送产品也是需要费用的，一件产品运送一个单位距离的费用是 $1$。\n\n假设建立的仓库容量都都是足够大的，可以容下所有的产品。你将得到以下数据：\n\n- 工厂 $i$ 距离工厂 $1$ 的距离 $x_i$（其中 $x_1=0$）。\n- 工厂 $i$ 目前已有成品数量 $p_i$。\n- 在工厂 $i$ 建立仓库的费用 $c_i$。\n\n请你帮助 L 公司寻找一个仓库建设的方案，使得总的费用（建造费用 + 运输费用）最小。", "inputFormat": "输入的第一行是一个整数 $n$，代表工厂的个数。\n\n第 $2$ 到 $(n + 1)$ 行，每行有三个用空格隔开的整数，第 $(i + 1)$ 行的整数依次代表 $x_i,~p_i,~c_i$。", "outputFormat": "仅输出一行一个整数，代表最优方案的费用。", "hint": "#### 样例输入输出 $1$ 解释\n\n在工厂 $1$ 和工厂 $3$ 建立仓库，建立费用为 $10+10=20$ ，运输费用为 $(9-5) \\times 3 = 12$，总费用 $32$。\n\n#### 数据范围与约定\n\n对于 $20\\%$ 的数据，保证 $n \\leq 500$。\n\n对于 $40\\%$ 的数据，保证 $n \\leq 10^4$。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^6$，$0 \\leq x_i,p_i,c_i < 2^{31}$。\n\n对于任意的 $1 \\leq i < n$，保证 $x_i < x_{i + 1}$。\n\n设答案为 $ans$，保证 $ans + \\sum\\limits_{i = 1}^{n} p_ix_i < 2^{63}$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2007] Warehouse Construction", "background": "", "description": "Company L has $n$ factories distributed from high to low along a mountain; factory $1$ is at the summit, and factory $n$ is at the foot.\n\nBecause the mountain is in an inland plateau region (dry with little rain), Company L usually stacks products directly in the open air to save costs. One day, Mr. L, the president of Company L, received a call from the meteorological department and was informed that there would be a heavy rain in three days. Therefore, Mr. L decided to urgently build some warehouses at certain factories to prevent the products from getting wet.\n\nDue to differences in terrain, the cost of building a warehouse may vary from one factory to another. Factory $i$ currently has $p_i$ finished items, and the cost of building a warehouse at factory $i$ is $c_i$.\n\nFor factories where no warehouse is built, their products should be transported to other warehouses for storage. Since Company L’s external sales outlet is located at factory $n$ at the foot of the mountain, products can only be transported downhill (that is, **only to the warehouse of a factory with a larger index**). Of course, transportation also costs money: transporting one item over one unit of distance costs $1$.\n\nAssume that any warehouse built is large enough to hold all products. You will be given the following data:\n- The distance from factory $i$ to factory $1$, $x_i$ (where $x_1 = 0$).\n- The current number of finished items at factory $i$, $p_i$.\n- The cost of building a warehouse at factory $i$, $c_i$.\n\nPlease help Company L find a warehouse construction plan that minimizes the total cost (construction cost + transportation cost).", "inputFormat": "The first line contains an integer $n$, the number of factories.\n\nLines $2$ through $(n + 1)$ each contain three space-separated integers. On line $(i + 1)$, the integers are $x_i,~p_i,~c_i$ in order.", "outputFormat": "Output a single line with one integer, the cost of the optimal plan.", "hint": "#### Explanation for Sample Input/Output $1$\n\nBuild warehouses at factory $1$ and factory $3$. The construction cost is $10 + 10 = 20$, the transportation cost is $(9 - 5) \\times 3 = 12$, and the total cost is $32$.\n\n#### Constraints and Agreements\n\n- For $20\\%$ of the testdata, it is guaranteed that $n \\leq 500$.\n- For $40\\%$ of the testdata, it is guaranteed that $n \\leq 10^4$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\leq 10^6$, $0 \\leq x_i,p_i,c_i < 2^{31}$.\n- For any $1 \\leq i < n$, it is guaranteed that $x_i < x_{i + 1}$.\n- Let the answer be $ans$, and it is guaranteed that $ans + \\sum\\limits_{i = 1}^{n} p_ix_i < 2^{63}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2007] 仓库建设", "background": null, "description": "L 公司有 $n$ 个工厂，由高到低分布在一座山上，工厂 $1$ 在山顶，工厂 $n$ 在山脚。\n\n由于这座山处于高原内陆地区（干燥少雨），L 公司一般把产品直接堆放在露天，以节省费用。突然有一天，L 公司的总裁 L 先生接到气象部门的电话，被告知三天之后将有一场暴雨，于是 L 先生决定紧急在某些工厂建立一些仓库以免产品被淋坏。\n\n由于地形的不同，在不同工厂建立仓库的费用可能是不同的。第 $i$ 个工厂目前已有成品 $p_i$ 件，在第 $i$ 个工厂位置建立仓库的费用是 $c_i$。\n\n对于没有建立仓库的工厂，其产品应被运往其他的仓库进行储藏，而由于 L 公司产品的对外销售处设置在山脚的工厂 $n$，故产品只能往山下运（即**只能运往编号更大的工厂的仓库**），当然运送产品也是需要费用的，一件产品运送一个单位距离的费用是 $1$。\n\n假设建立的仓库容量都都是足够大的，可以容下所有的产品。你将得到以下数据：\n\n- 工厂 $i$ 距离工厂 $1$ 的距离 $x_i$（其中 $x_1=0$）。\n- 工厂 $i$ 目前已有成品数量 $p_i$。\n- 在工厂 $i$ 建立仓库的费用 $c_i$。\n\n请你帮助 L 公司寻找一个仓库建设的方案，使得总的费用（建造费用 + 运输费用）最小。", "inputFormat": "输入的第一行是一个整数 $n$，代表工厂的个数。\n\n第 $2$ 到 $(n + 1)$ 行，每行有三个用空格隔开的整数，第 $(i + 1)$ 行的整数依次代表 $x_i,~p_i,~c_i$。", "outputFormat": "仅输出一行一个整数，代表最优方案的费用。", "hint": "#### 样例输入输出 $1$ 解释\n\n在工厂 $1$ 和工厂 $3$ 建立仓库，建立费用为 $10+10=20$ ，运输费用为 $(9-5) \\times 3 = 12$，总费用 $32$。\n\n#### 数据范围与约定\n\n对于 $20\\%$ 的数据，保证 $n \\leq 500$。\n\n对于 $40\\%$ 的数据，保证 $n \\leq 10^4$。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^6$，$0 \\leq x_i,p_i,c_i < 2^{31}$。\n\n对于任意的 $1 \\leq i < n$，保证 $x_i < x_{i + 1}$。\n\n设答案为 $ans$，保证 $ans + \\sum\\limits_{i = 1}^{n} p_ix_i < 2^{63}$。", "locale": "zh-CN"}}}
{"pid": "P2121", "type": "P", "difficulty": 3, "samples": [["5 4 3\n1 2 10\n1 3 9\n2 3 7\n4 5 3", "22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "生成树"], "title": "拆地毯", "background": "还记得 NOIP 2011 提高组 Day1 中的铺地毯吗？时光飞逝，光阴荏苒，三年过去了。组织者精心准备的颁奖典礼早已结束，留下的则是被人们踩过的地毯。请你来解决类似于铺地毯的另一个问题。", "description": "会场上有 $n$ 个关键区域，不同的关键区域由 $m$ 条无向地毯彼此连接。每条地毯可由三个整数 $u$、$v$、$w$ 表示，其中 $u$ 和 $v$ 为地毯连接的两个关键区域编号，$w$ 为这条地毯的美丽度。\n\n由于颁奖典礼已经结束，铺过的地毯不得不拆除。为了贯彻勤俭节约的原则，组织者被要求只能保留至多 $K$ 条地毯，且保留的地毯构成的图中，任意可互相到达的两点间只能有一种方式互相到达。换言之，组织者要求新图中不能有环。现在组织者求助你，想请你帮忙算出这至多 $K$ 条地毯的美丽度之和最大为多少。", "inputFormat": "第一行包含三个正整数 $n$、$m$、$K$。\n\n接下来 $m$ 行中每行包含三个正整数 $u$、$v$、$w$。", "outputFormat": "只包含一个正整数，表示这 $K$ 条地毯的美丽度之和的最大值。", "hint": "选择第 $1$、$2$、$4$ 条地毯，美丽度之和为 $10 + 9 + 3 = 22$。\n\n若选择第 $1$、$2$、$3$ 条地毯，虽然美丽度之和可以达到 $10 + 9 + 7 = 26$，但这将导致关键区域 $1$、$2$、$3$ 构成一个环，这是题目中不允许的。\n\n\n$1\\le n,m,K \\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Removing Carpets", "background": "Do you remember \"Paving Carpets\" from NOIP 2011 Senior Day 1? Time flies; three years have passed. The carefully prepared award ceremony is long over, leaving behind the carpets people walked on. Please solve another problem similar to \"Paving Carpets.\"", "description": "There are $n$ key areas in the venue, and different key areas are connected by $m$ undirected \"carpets.\" Each carpet is represented by three integers $u$, $v$, and $w$, where $u$ and $v$ are the indices of the two key areas connected by this carpet, and $w$ is its beauty value.\n\nSince the ceremony has ended, the laid carpets must be removed. To follow the principle of thrift, the organizers are allowed to keep at most $K$ carpets, and in the graph formed by the kept carpets, there must be only one way to travel between any two mutually reachable points. In other words, the new graph must have no cycles. Now the organizers ask you to compute the maximum possible sum of beauty values of at most $K$ carpets.", "inputFormat": "The first line contains three positive integers $n$, $m$, and $K$.\n\nEach of the next $m$ lines contains three positive integers $u$, $v$, and $w$.", "outputFormat": "Output a single positive integer, the maximum possible sum of beauty values of these $K$ carpets.", "hint": "Choosing carpets $1$, $2$, and $4$ gives a beauty sum of $10 + 9 + 3 = 22$.\n\nIf you choose carpets $1$, $2$, and $3$, although the sum can reach $10 + 9 + 7 = 26$, key areas $1$, $2$, and $3$ would form a cycle, which is not allowed.\n\nConstraints: $1 \\le n, m, K \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "拆地毯", "background": "还记得 NOIP 2011 提高组 Day1 中的铺地毯吗？时光飞逝，光阴荏苒，三年过去了。组织者精心准备的颁奖典礼早已结束，留下的则是被人们踩过的地毯。请你来解决类似于铺地毯的另一个问题。", "description": "会场上有 $n$ 个关键区域，不同的关键区域由 $m$ 条无向地毯彼此连接。每条地毯可由三个整数 $u$、$v$、$w$ 表示，其中 $u$ 和 $v$ 为地毯连接的两个关键区域编号，$w$ 为这条地毯的美丽度。\n\n由于颁奖典礼已经结束，铺过的地毯不得不拆除。为了贯彻勤俭节约的原则，组织者被要求只能保留至多 $K$ 条地毯，且保留的地毯构成的图中，任意可互相到达的两点间只能有一种方式互相到达。换言之，组织者要求新图中不能有环。现在组织者求助你，想请你帮忙算出这至多 $K$ 条地毯的美丽度之和最大为多少。", "inputFormat": "第一行包含三个正整数 $n$、$m$、$K$。\n\n接下来 $m$ 行中每行包含三个正整数 $u$、$v$、$w$。", "outputFormat": "只包含一个正整数，表示这 $K$ 条地毯的美丽度之和的最大值。", "hint": "选择第 $1$、$2$、$4$ 条地毯，美丽度之和为 $10 + 9 + 3 = 22$。\n\n若选择第 $1$、$2$、$3$ 条地毯，虽然美丽度之和可以达到 $10 + 9 + 7 = 26$，但这将导致关键区域 $1$、$2$、$3$ 构成一个环，这是题目中不允许的。\n\n\n$1\\le n,m,K \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P2122", "type": "P", "difficulty": 5, "samples": [["5 4\n1 2 3 4 5\n1 1 2 3\n2 2 4\n3 2 4\n3 1 5", "4/1\n2/3\n14/25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "线段树", "树状数组", "分块"], "title": "还教室", "background": "还记得 NOIP 2012 提高组 Day2 中的借教室吗？时光飞逝，光阴荏苒，两年过去了，曾经借教室的同学们纷纷归还自己当初租借的教室。请你来解决类似于借教室的另一个问题。", "description": "在接受借教室请求的 $n$ 天中，第 $i$ 天剩余的教室为 $a_i$ 个。作为大学借教室服务的负责人，你需要完成如下三种操作共 $m$ 次：\n\n1. 第 $l$ 天到第 $r$ 天，每天被归还 $d$ 个教室；\n1. 询问第 $l$ 天到第 $r$ 天教室个数的平均数；\n1. 询问第 $l$ 天到第 $r$ 天教室个数的方差。", "inputFormat": "第一行包括两个正整数 $n$ 和 $m$，其中 $n$ 为借教室的天数，$m$ 为操作次数。\n\n接下来一行，共包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 天剩余教室数目为 $a_i$ 个。\n\n接下来 $m$ 行，每行的第一个整数为操作编号（只能为 $1$ 或 $2$ 或 $3$），接下来：\n\n包含两个正整数 $l$ 和 $r$，若操作编号为 $1$，则接下来再包含一个正整数 $d$。", "outputFormat": "对于每个操作 2 和操作 3，输出一个既约分数（分子与分母互质）表示询问的答案（详见样例）。特别地，若答案为 $0$，请输出 $\\verb!0/1!$。", "hint": "对于全部测试数据满足：$1 \\leq l \\leq r \\leq n \\leq 10^5, m\\leq 10^5$，$0 \\leq a_i \\leq 10$，$1 \\leq d \\leq 3$，操作 $1$ 的数量不超过 $10\\%$。\n\n注意：$a_i$ 和 $d$ 的范围很小及操作 $1$ 数量很少的原因是为了保证答案的分子不会很大，以防止答案的分子溢出 $64$ 位整数的范围，这与题目做法无关。", "locale": "zh-CN", "translations": {"en": {"title": "Returning Classrooms", "background": "Do you remember \"Renting Classrooms\" from NOIP 2012 Senior Day 2? Time flies; two years have passed, and the students who once rented classrooms are now returning them. Please solve another problem similar to \"Renting Classrooms.\"", "description": "During the $n$ days when rental requests were accepted, on day $i$ there are $a_i$ classrooms remaining. As the person in charge of the university classroom rental service, you need to perform $m$ operations of the following three types:\n1. From day $l$ to day $r$, $d$ classrooms are returned each day.\n2. Query the average number of classrooms from day $l$ to day $r$.\n3. Query the variance of the number of classrooms from day $l$ to day $r$.", "inputFormat": "The first line contains two positive integers $n$ and $m$, where $n$ is the number of days and $m$ is the number of operations.\n\nThe next line contains $n$ integers; the $i$-th integer indicates that on day $i$ the number of remaining classrooms is $a_i$.\n\nThe next $m$ lines: each line starts with the operation code (only $1$, $2$, or $3$), followed by two positive integers $l$ and $r$. If the operation code is $1$, then an additional positive integer $d$ follows.", "outputFormat": "For each operation of type $2$ and type $3$, output the answer as a reduced fraction (the numerator and denominator are coprime). In particular, if the answer is $0$, output $\\verb!0/1!$.", "hint": "For all testdata, $1 \\leq l \\leq r \\leq n \\leq 10^5$, $m \\leq 10^5$, $0 \\leq a_i \\leq 10$, $1 \\leq d \\leq 3$, and the number of type $1$ operations does not exceed $10\\%$.\n\nNote: The small ranges of $a_i$ and $d$, and the small number of type $1$ operations, are intended to ensure that the numerator of the answer will not be large, preventing overflow beyond the $64$-bit integer range; this is unrelated to the intended solution.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "还教室", "background": "还记得 NOIP 2012 提高组 Day2 中的借教室吗？时光飞逝，光阴荏苒，两年过去了，曾经借教室的同学们纷纷归还自己当初租借的教室。请你来解决类似于借教室的另一个问题。", "description": "在接受借教室请求的 $n$ 天中，第 $i$ 天剩余的教室为 $a_i$ 个。作为大学借教室服务的负责人，你需要完成如下三种操作共 $m$ 次：\n\n1. 第 $l$ 天到第 $r$ 天，每天被归还 $d$ 个教室；\n1. 询问第 $l$ 天到第 $r$ 天教室个数的平均数；\n1. 询问第 $l$ 天到第 $r$ 天教室个数的方差。", "inputFormat": "第一行包括两个正整数 $n$ 和 $m$，其中 $n$ 为借教室的天数，$m$ 为操作次数。\n\n接下来一行，共包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 天剩余教室数目为 $a_i$ 个。\n\n接下来 $m$ 行，每行的第一个整数为操作编号（只能为 $1$ 或 $2$ 或 $3$），接下来：\n\n包含两个正整数 $l$ 和 $r$，若操作编号为 $1$，则接下来再包含一个正整数 $d$。", "outputFormat": "对于每个操作 2 和操作 3，输出一个既约分数（分子与分母互质）表示询问的答案（详见样例）。特别地，若答案为 $0$，请输出 $\\verb!0/1!$。", "hint": "对于全部测试数据满足：$1 \\leq l \\leq r \\leq n \\leq 10^5, m\\leq 10^5$，$0 \\leq a_i \\leq 10$，$1 \\leq d \\leq 3$，操作 $1$ 的数量不超过 $10\\%$。\n\n注意：$a_i$ 和 $d$ 的范围很小及操作 $1$ 数量很少的原因是为了保证答案的分子不会很大，以防止答案的分子溢出 $64$ 位整数的范围，这与题目做法无关。", "locale": "zh-CN"}}}
{"pid": "P2123", "type": "P", "difficulty": 6, "samples": [["1\n3\n4 1\n2 2\n1 2", "8"], ["2\n5\n85 100\n95 99\n76 87\n60 97\n79 85\n12\n9 68\n18 45\n52 61\n39 83\n63 67\n45 99\n52 54\n82 100\n23 54\n99 94\n63 100\n52 68", "528\n902"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "排序"], "title": "皇后游戏", "background": "还记得 NOIP 2012 提高组 Day1 的国王游戏吗？时光飞逝，光阴荏苒，两年过去了。国王游戏早已过时，如今已被皇后游戏取代，请你来解决类似于国王游戏的另一个问题。", "description": "皇后有 $n$ 位大臣，每位大臣的左右手上面分别写上了一个正整数。恰逢国庆节来临，皇后决定为 $n$ 位大臣颁发奖金，其中第 $i$ 位大臣所获得的奖金数目为第 $i - 1$ 位大臣所获得奖金数目与前 $i$ 位大臣左手上的数的和的较大值再加上第 $i$ 位大臣右手上的数。\n\n形式化地讲：我们设第 $i$ 位大臣左手上的正整数为 $a_i$，右手上的正整数为 $b_i$，则第 $i$ 位大臣获得的奖金数目为 $c_i$ 可以表达为：\n\n$$ c_{i} = \\begin{cases} a_{1}+b_{1}  & ,i=1 \\\\ \\displaystyle \\max \\left \\{ c_{i-1},\\sum_{j=1}^{i}a_{j} \\right \\} +b_{i} & ,2\\leq i \\leq n \\end{cases} % ![](https://cdn.luogu.com.cn/upload/pic/1257.png) $$\n\n当然，吝啬的皇后并不希望太多的奖金被发给大臣，所以她想请你来重新安排一下队伍的顺序，使得获得奖金最多的大臣，所获奖金数目尽可能的少。\n\n注意：重新安排队伍并不意味着一定要打乱顺序，我们允许不改变任何一位大臣的位置。", "inputFormat": "第一行包含一个正整数 $T$，表示测试数据的组数。\n\n接下来 $T$ 个部分，每个部分的第一行包含一个正整数 $n$，表示大臣的数目。\n\n每个部分接下来 $n$ 行中，每行两个正整数，分别为 $a_i$ 和 $b_i$，含义如上文所述。", "outputFormat": "共 $T$ 行，每行包含一个整数，表示获得奖金最多的大臣所获得的奖金数目。", "hint": "按照 $1,2,3$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $10$；\n\n按照 $1,3,2$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $9$；\n\n按照 $2,1,3$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $9$；\n\n按照 $2,3,1$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $8$；\n\n按照 $3,1,2$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $9$；\n\n按照 $3,2,1$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $8$。\n\n当按照 $3,2,1$ 这样排列队伍时，三位大臣左右手的数分别为：\n\n$(1,2),(2,2),(4,1)$。\n\n- 第 $1$ 位大臣获得的奖金为 $1+2=3$；\n- 第 $2$ 位大臣获得的奖金为 $\\max{3,3}+2=5$；\n- 第 $3$ 位大臣获得的奖金为 $\\max{5,7}+1=8$。\n\n对于全部测试数据满足：$T\\le10$，$1\\le n\\le 2\\times 10^4$，$1\\le a_i,b_i\\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Queen's Game", "background": "Do you still remember the NOIP 2012 Senior Day 1 \"King's Game\"? Time flies — two years have passed. The King's Game is now outdated and has been replaced by the Queen's Game. Please solve another problem similar to the King's Game.", "description": "The queen has $n$ ministers. On each minister’s left and right hands, a positive integer is written. As the National Day approaches, the queen decides to award bonuses to the $n$ ministers. For the $i$-th minister, the bonus amount equals the larger of the previous minister’s bonus and the sum of the numbers on the left hands of the first $i$ ministers, then plus the number on the right hand of the $i$-th minister.\n\nFormally, let the positive integer on the left hand of the $i$-th minister be $a_i$, and the one on the right hand be $b_i$. The bonus received by the $i$-th minister is $c_i$, defined as:\n$$ c_{i} = \\begin{cases} a_{1}+b_{1}  & ,i=1 \\\\ \\displaystyle \\max \\left \\{ c_{i-1},\\sum_{j=1}^{i}a_{j} \\right \\} +b_{i} & ,2\\leq i \\leq n \\end{cases} % ![](https://cdn.luogu.com.cn/upload/pic/1257.png) $$\n\nOf course, the frugal queen does not want too much bonus to be given. She asks you to reorder the queue so that the maximum bonus obtained by any minister is as small as possible.\n\nNote: Reordering the queue does not mean you must change the order. Keeping every minister in their original position is allowed.\n\nConstraints: For all testdata, $T \\le 10$, $1 \\le n \\le 2 \\times 10^{4}$, $1 \\le a_i, b_i \\le 10^{9}$.", "inputFormat": "The first line contains a positive integer $T$, the number of testdata groups.\n\nThen for each of the $T$ parts, the first line contains a positive integer $n$, the number of ministers.\n\nIn each of the next $n$ lines, there are two positive integers $a_i$ and $b_i$, as defined above.", "outputFormat": "Output $T$ lines. Each line contains one integer: the maximum bonus obtained by any minister.", "hint": "- If the queue is ordered as 1, 2, 3, the maximum bonus obtained by any minister is 10.\n- If the queue is ordered as 1, 3, 2, the maximum bonus obtained by any minister is 9.\n- If the queue is ordered as 2, 1, 3, the maximum bonus obtained by any minister is 9.\n- If the queue is ordered as 2, 3, 1, the maximum bonus obtained by any minister is 8.\n- If the queue is ordered as 3, 1, 2, the maximum bonus obtained by any minister is 9.\n- If the queue is ordered as 3, 2, 1, the maximum bonus obtained by any minister is 8.\n\nWhen the queue is ordered as 3, 2, 1, the numbers on the three ministers’ left and right hands are:\n(1, 2), (2, 2), (4, 1).\n\n- The 1st minister’s bonus is $1 + 2 = 3$.\n- The 2nd minister’s bonus is $\\max{3, 3} + 2 = 5$.\n- The 3rd minister’s bonus is $\\max{5, 7} + 1 = 8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "皇后游戏", "background": "还记得 NOIP 2012 提高组 Day1 的国王游戏吗？时光飞逝，光阴荏苒，两年过去了。国王游戏早已过时，如今已被皇后游戏取代，请你来解决类似于国王游戏的另一个问题。", "description": "皇后有 $n$ 位大臣，每位大臣的左右手上面分别写上了一个正整数。恰逢国庆节来临，皇后决定为 $n$ 位大臣颁发奖金，其中第 $i$ 位大臣所获得的奖金数目为第 $i - 1$ 位大臣所获得奖金数目与前 $i$ 位大臣左手上的数的和的较大值再加上第 $i$ 位大臣右手上的数。\n\n形式化地讲：我们设第 $i$ 位大臣左手上的正整数为 $a_i$，右手上的正整数为 $b_i$，则第 $i$ 位大臣获得的奖金数目为 $c_i$ 可以表达为：\n\n$$ c_{i} = \\begin{cases} a_{1}+b_{1}  & ,i=1 \\\\ \\displaystyle \\max \\left \\{ c_{i-1},\\sum_{j=1}^{i}a_{j} \\right \\} +b_{i} & ,2\\leq i \\leq n \\end{cases} % ![](https://cdn.luogu.com.cn/upload/pic/1257.png) $$\n\n当然，吝啬的皇后并不希望太多的奖金被发给大臣，所以她想请你来重新安排一下队伍的顺序，使得获得奖金最多的大臣，所获奖金数目尽可能的少。\n\n注意：重新安排队伍并不意味着一定要打乱顺序，我们允许不改变任何一位大臣的位置。", "inputFormat": "第一行包含一个正整数 $T$，表示测试数据的组数。\n\n接下来 $T$ 个部分，每个部分的第一行包含一个正整数 $n$，表示大臣的数目。\n\n每个部分接下来 $n$ 行中，每行两个正整数，分别为 $a_i$ 和 $b_i$，含义如上文所述。", "outputFormat": "共 $T$ 行，每行包含一个整数，表示获得奖金最多的大臣所获得的奖金数目。", "hint": "按照 $1,2,3$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $10$；\n\n按照 $1,3,2$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $9$；\n\n按照 $2,1,3$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $9$；\n\n按照 $2,3,1$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $8$；\n\n按照 $3,1,2$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $9$；\n\n按照 $3,2,1$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $8$。\n\n当按照 $3,2,1$ 这样排列队伍时，三位大臣左右手的数分别为：\n\n$(1,2),(2,2),(4,1)$。\n\n- 第 $1$ 位大臣获得的奖金为 $1+2=3$；\n- 第 $2$ 位大臣获得的奖金为 $\\max{3,3}+2=5$；\n- 第 $3$ 位大臣获得的奖金为 $\\max{5,7}+1=8$。\n\n对于全部测试数据满足：$T\\le10$，$1\\le n\\le 2\\times 10^4$，$1\\le a_i,b_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2125", "type": "P", "difficulty": 5, "samples": [["5\n15 7 11 3 14\n", "12\n2 3\n-3 0\n0 1\n-1 -6\n6 -2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学"], "title": "图书馆书架上的书", "background": "NOIP2014 即将来临，JC 书院信息学兴趣小组也在积极准备着，于是乎 usqwedf 、梁大大、畜牧办专场、YH 大神和 LHT 大神也要推出“蓝翔杯”。\n\n在图书馆、 MC 等大神们相继举办了 JC 书院联合竞赛“弃疗杯”“UID#3”，据说 YH 大神还要苦苦钻研网络流的 JC 书院 $13$ 届 $13$ 班的 WZF 神牛和 MZC 神牛听到这个消息后决定联袂打造“十三点杯”。但是出一套题目是一项繁重的工作，于是他们决定再拉上和他们同届并且同班还同为 JC 书院信息学兴趣小组成员同时也在图书馆正在找“Hello World”标程的蒟蒻 SY。\n\n可怜的蒟蒻 SY 因为还要写一大堆的作业，怎么也不肯答应，终于 WZF 神牛妥协说：“我来出一道题，你要是做出来了我们就不让你出题，否则……你懂的。”蒟蒻 SY 才刚看完 WZF 神牛即兴出的题目，便带着哭腔对 WZF 神牛说：“你们赢了。”。\n\n可是蒟蒻 SY 实在是太弱了，根本不会出题，他绞尽脑汁，终于想到了一个办法——将 WZF 神牛出的题目 copy 一下。", "description": "图书馆有 $n$ 个书架，第 $1$ 个书架后面是第 $2$ 个书架，第 $2$ 个书架后面是第 $3$ 个书架……第 $n-1$ 个书架后面是第 $n$ 个书架，第 $n$ 个书架后面是第 $1$ 个书架，第 $i$ 个书架上有 $b_i$ 本书。现在，为了让图书馆更美观，WZF 神牛让蒟蒻 SY 搬动书架上的书，使每个书架上的书一样多。由于搬动的书可能会很多，所以蒟蒻 SY 只能将一个书架上的书搬到与其相邻的两个书架上。那么蒟蒻 SY 最少搬动几本书呢？", "inputFormat": "共 $2$ 行，第 $1$ 行 $1$ 个正整数 $n$，第 $2$ 行 $n$ 个非负整数，第 $i$ 个为 $b_i$。", "outputFormat": "输出共 $n+1$ 行。\n\n第一行 $1$ 个正整数 $m$，表示蒟蒻 SY 最少搬动 $m$ 本书；\n\n之后 $n$ 行，每行 $2$ 个整数，第 $i$ 行有两个整数 $af_i$ 和 $ab_i$，分别表示蒟蒻 SY 要将第 $i$ 个书架上的 $af_i$ 本书和 $ab_i$ 本书分别搬到它前面的一个书架上和它后面的一个书架上。", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le n\\le 10^5+1$，且 $n$ 必为奇数；$b_i\\le 10^7$。\n\n若 $af_i$ 为负数，则说明蒟蒻 SY 要把第 $i$ 个书架前面的那个书架上的 $-af_i$ 本书搬到第 $i$ 个书架上。\n\n同理，若 $ab_i$ 为负数，则说明蒟蒻 SY 要把第 $i$ 个书架后面的那个书架上的 $-ab_i$ 本书搬到第 $i$ 个书架上。\n", "locale": "zh-CN", "translations": {"en": {"title": "Books on the Library Shelves", "background": "With NOIP 2014 approaching, the JC Academy Informatics Club is actively preparing. So usqwedf, Liang Dada, Xumuban Zhuanchang, YH dashen, and LHT dashen also plan to launch the “Lanxiang Cup.”\n\nIn the library, MC and others successively hosted the JC Academy joint contests “Qiliaobei” and “UID#3.” It is said that YH dashen is also painstakingly studying network flow. Hearing this, WZF shenniu and MZC shenniu from JC Academy Grade 13 Class 13 decided to co-create the “Shisandian Cup.” But making a full problem set is hard work, so they decided to rope in SY, a fellow classmate and club member who was in the library searching for the “Hello World” standard solution.\n\nPoor juruo SY had tons of homework and refused to agree. Finally, WZF shenniu compromised: “I’ll give you one problem. If you solve it, we won’t make you write problems; otherwise… you know.” SY had barely finished reading the problem WZF improvised when he said, almost in tears, “You win.”\n\nBut juruo SY was really too weak to write problems, so he racked his brains and came up with an idea—just copy the problem WZF gave.", "description": "There are $n$ bookshelves in a circle. The shelf behind shelf $1$ is shelf $2$, the shelf behind shelf $2$ is shelf $3$, …, the shelf behind shelf $n-1$ is shelf $n$, and the shelf behind shelf $n$ is shelf $1$. Shelf $i$ has $b_i$ books. To make the library look nicer, WZF shenniu asks SY to move books so that every shelf ends up with the same number of books. Because the total number of moved books might be large, SY is only allowed to move books from a shelf to its two adjacent shelves. What is the minimum number of books SY needs to move?", "inputFormat": "There are $2$ lines. The first line contains a positive integer $n$. The second line contains $n$ non-negative integers, where the $i$-th is $b_i$.", "outputFormat": "Output $n+1$ lines.\n\nThe first line contains a positive integer $m$, the minimum total number of books SY needs to move.\n\nThen output $n$ lines. In the $i$-th line, output two integers $af_i$ and $ab_i$, meaning SY moves $af_i$ books and $ab_i$ books from shelf $i$ to the shelf in front of it and the shelf behind it, respectively.", "hint": "### Constraints and Notes\n\nFor all testdata, $1 \\le n \\le 10^5 + 1$, and $n$ is odd; $b_i \\le 10^7$.\n\nIf $af_i$ is negative, it means SY moves $-af_i$ books from the shelf in front of shelf $i$ onto shelf $i$.\n\nSimilarly, if $ab_i$ is negative, it means SY moves $-ab_i$ books from the shelf behind shelf $i$ onto shelf $i$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "图书馆书架上的书", "background": "NOIP2014 即将来临，JC 书院信息学兴趣小组也在积极准备着，于是乎 usqwedf 、梁大大、畜牧办专场、YH 大神和 LHT 大神也要推出“蓝翔杯”。\n\n在图书馆、 MC 等大神们相继举办了 JC 书院联合竞赛“弃疗杯”“UID#3”，据说 YH 大神还要苦苦钻研网络流的 JC 书院 $13$ 届 $13$ 班的 WZF 神牛和 MZC 神牛听到这个消息后决定联袂打造“十三点杯”。但是出一套题目是一项繁重的工作，于是他们决定再拉上和他们同届并且同班还同为 JC 书院信息学兴趣小组成员同时也在图书馆正在找“Hello World”标程的蒟蒻 SY。\n\n可怜的蒟蒻 SY 因为还要写一大堆的作业，怎么也不肯答应，终于 WZF 神牛妥协说：“我来出一道题，你要是做出来了我们就不让你出题，否则……你懂的。”蒟蒻 SY 才刚看完 WZF 神牛即兴出的题目，便带着哭腔对 WZF 神牛说：“你们赢了。”。\n\n可是蒟蒻 SY 实在是太弱了，根本不会出题，他绞尽脑汁，终于想到了一个办法——将 WZF 神牛出的题目 copy 一下。", "description": "图书馆有 $n$ 个书架，第 $1$ 个书架后面是第 $2$ 个书架，第 $2$ 个书架后面是第 $3$ 个书架……第 $n-1$ 个书架后面是第 $n$ 个书架，第 $n$ 个书架后面是第 $1$ 个书架，第 $i$ 个书架上有 $b_i$ 本书。现在，为了让图书馆更美观，WZF 神牛让蒟蒻 SY 搬动书架上的书，使每个书架上的书一样多。由于搬动的书可能会很多，所以蒟蒻 SY 只能将一个书架上的书搬到与其相邻的两个书架上。那么蒟蒻 SY 最少搬动几本书呢？", "inputFormat": "共 $2$ 行，第 $1$ 行 $1$ 个正整数 $n$，第 $2$ 行 $n$ 个非负整数，第 $i$ 个为 $b_i$。", "outputFormat": "输出共 $n+1$ 行。\n\n第一行 $1$ 个正整数 $m$，表示蒟蒻 SY 最少搬动 $m$ 本书；\n\n之后 $n$ 行，每行 $2$ 个整数，第 $i$ 行有两个整数 $af_i$ 和 $ab_i$，分别表示蒟蒻 SY 要将第 $i$ 个书架上的 $af_i$ 本书和 $ab_i$ 本书分别搬到它前面的一个书架上和它后面的一个书架上。", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le n\\le 10^5+1$，且 $n$ 必为奇数；$b_i\\le 10^7$。\n\n若 $af_i$ 为负数，则说明蒟蒻 SY 要把第 $i$ 个书架前面的那个书架上的 $-af_i$ 本书搬到第 $i$ 个书架上。\n\n同理，若 $ab_i$ 为负数，则说明蒟蒻 SY 要把第 $i$ 个书架后面的那个书架上的 $-ab_i$ 本书搬到第 $i$ 个书架上。\n", "locale": "zh-CN"}}}
