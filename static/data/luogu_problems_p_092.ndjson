{"pid": "P2868", "type": "P", "difficulty": 5, "samples": [["5 7\n30\n10\n10\n5\n10\n1 2 3\n2 3 2\n3 4 5\n3 5 2\n4 5 5\n5 1 3\n5 2 2", "6.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "2007", "二分", "USACO", "最短路", "分数规划"], "title": "[USACO07DEC] Sightseeing Cows G", "background": "", "description": "Farmer John has decided to reward his cows for their hard work by taking them on a tour of the big city! The cows must decide how best to spend their free time.\n\nFortunately, they have a detailed city map showing the L (2 ≤ L ≤ 1000) major landmarks (conveniently numbered 1.. L) and the P (2 ≤ P ≤ 5000) unidirectional cow paths that join them. Farmer John will drive the cows to a starting landmark of their choice, from which they will walk along the cow paths to a series of other landmarks, ending back at their starting landmark where Farmer John will pick them up and take them back to the farm. Because space in the city is at a premium, the cow paths are very narrow and so travel along each cow path is only allowed in one fixed direction.\n\nWhile the cows may spend as much time as they like in the city, they do tend to get bored easily. Visiting each new landmark is fun, but walking between them takes time. The cows know the exact fun values Fi (1 ≤ Fi ≤ 1000) for each landmark i.\n\nThe cows also know about the cowpaths. Cowpath i connects landmark L1i to L2i (in the direction L1i -> L2i ) and requires time Ti (1 ≤ Ti ≤ 1000) to traverse.\n\nIn order to have the best possible day off, the cows want to maximize the average fun value per unit time of their trip. Of course, the landmarks are only fun the first time they are visited; the cows may pass through the landmark more than once, but they do not perceive its fun value again. Furthermore, Farmer John is making the cows visit at least two landmarks, so that they get some exercise during their day off.\n\nHelp the cows find the maximum fun value per unit time that they can achieve.\n", "inputFormat": "\\* Line 1: Two space-separated integers: L and P\n\n\\* Lines 2..L+1: Line i+1 contains a single one integer: Fi\n\n\\* Lines L+2..L+P+1: Line L+i+1 describes cow path i with three space-separated integers: L1i , L2i , and Ti\n", "outputFormat": "\\* Line 1: A single number given to two decimal places (do not perform explicit rounding), the maximum possible average fun per unit time, or 0 if the cows cannot plan any trip at all in accordance with the above rules.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO07DEC] Sightseeing Cows G", "background": "", "description": "Farmer John has decided to reward his cows for their hard work by taking them on a tour of the big city! The cows must decide how best to spend their free time.\n\nFortunately, they have a detailed city map showing the L (2 ≤ L ≤ 1000) major landmarks (conveniently numbered 1.. L) and the P (2 ≤ P ≤ 5000) unidirectional cow paths that join them. Farmer John will drive the cows to a starting landmark of their choice, from which they will walk along the cow paths to a series of other landmarks, ending back at their starting landmark where Farmer John will pick them up and take them back to the farm. Because space in the city is at a premium, the cow paths are very narrow and so travel along each cow path is only allowed in one fixed direction.\n\nWhile the cows may spend as much time as they like in the city, they do tend to get bored easily. Visiting each new landmark is fun, but walking between them takes time. The cows know the exact fun values Fi (1 ≤ Fi ≤ 1000) for each landmark i.\n\nThe cows also know about the cowpaths. Cowpath i connects landmark L1i to L2i (in the direction L1i -> L2i ) and requires time Ti (1 ≤ Ti ≤ 1000) to traverse.\n\nIn order to have the best possible day off, the cows want to maximize the average fun value per unit time of their trip. Of course, the landmarks are only fun the first time they are visited; the cows may pass through the landmark more than once, but they do not perceive its fun value again. Furthermore, Farmer John is making the cows visit at least two landmarks, so that they get some exercise during their day off.\n\nHelp the cows find the maximum fun value per unit time that they can achieve.\n", "inputFormat": "\\* Line 1: Two space-separated integers: L and P\n\n\\* Lines 2..L+1: Line i+1 contains a single one integer: Fi\n\n\\* Lines L+2..L+P+1: Line L+i+1 describes cow path i with three space-separated integers: L1i , L2i , and Ti\n", "outputFormat": "\\* Line 1: A single number given to two decimal places (do not perform explicit rounding), the maximum possible average fun per unit time, or 0 if the cows cannot plan any trip at all in accordance with the above rules.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO07DEC] Sightseeing Cows G", "background": null, "description": "农夫约翰决定奖励他的奶牛们的辛勤工作，带它们去大城市游览！奶牛们必须决定如何最好地度过它们的空闲时间。\n\n幸运的是，它们有一张详细的城市地图，显示了 $L$ $(2 \\leq L \\leq 1000)$ 个主要地标（方便地编号为 $1$ 到 $L$）和 $P$ $(2 \\leq P \\leq 5000)$ 条连接这些地标的单向牛道。农夫约翰会把奶牛们送到它们选择的一个起始地标，从那里它们将沿着牛道走到一系列其他地标，最后回到它们的起始地标，农夫约翰会在那里接它们回农场。由于城市空间有限，牛道非常狭窄，因此每条牛道的旅行只能沿着一个固定方向进行。\n\n虽然奶牛们可以在城市里待多久都行，但它们很容易感到无聊。参观每个新的地标很有趣，但在它们之间行走需要时间。奶牛们知道每个地标 $i$ 的确切乐趣值 $F_i$ $(1 \\leq F_i \\leq 1000)$。\n\n奶牛们还了解牛道。牛道 $i$ 连接地标 $L1_i$ 到 $L2_i$（方向为 $L1_i \\to L2_i$），需要时间 $T_i$ $(1 \\leq T_i \\leq 1000)$ 来穿越。\n\n为了度过一个最好的假期，奶牛们希望最大化它们旅行的单位时间平均乐趣值。当然，地标只有在第一次访问时才有趣；奶牛们可以多次经过地标，但它们不会再次感受到它的乐趣值。此外，农夫约翰要求奶牛们至少访问两个地标，以便在假期中得到一些锻炼。\n\n帮助奶牛们找到它们能够实现的最大单位时间乐趣值。", "inputFormat": "第 $1$ 行：两个用空格分隔的整数：$L$ 和 $P$\n\n第 $2$ 行到第 $L+1$ 行：第 $i+1$ 行包含一个整数：$F_i$\n\n第 $L+2$ 行到第 $L+P+1$ 行：第 $L+i+1$ 行描述牛道 $i$，包含三个用空格分隔的整数：$L1_i$，$L2_i$ 和 $T_i$", "outputFormat": "第 $1$ 行：一个保留两位小数的数字（不要进行显式四舍五入），表示最大可能的单位时间平均乐趣值，如果奶牛们无法按照上述规则计划任何旅行，则输出 $0$。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P2869", "type": "P", "difficulty": 5, "samples": [["4 7\n1 1\n2 3\n1 4\n4 2\n3 2\n2 1\n4 3\n5 2\n5 4\n2 6\n4 4", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "USACO"], "title": "[USACO07DEC] Gourmet Grazers G", "background": "", "description": "Like so many others, the cows have developed very haughty tastes and will no longer graze on just any grass. Instead, Farmer John must purchase gourmet organic grass at the Green Grass Grocers store for each of his N (1 ≤ N ≤ 100,000) cows.\n\nEach cow i demands grass of price at least Ai (1 ≤ Ai ≤ 1,000,000,000) and with a greenness score at least Bi (1 ≤ Bi ≤ 1,000,000,000). The GGG store has M (1 ≤ M ≤ 100,000) different types of grass available, each with a price Ci (1 ≤ Ci ≤ 1,000,000,000) and a greenness score of Di (1 ≤ Di ≤ 1,000,000,000). Of course, no cow would sacrifice her individuality, so no two cows can have the same kind of grass.\n\nHelp Farmer John satisfy the cows' expensive gourmet tastes while spending as little money as is necessary.", "inputFormat": "\\* Line 1: Two space-separated integers: N and M.\n\n\\* Lines 2..N+1: Line i+1 contains two space-separated integers: Ai and Bi\n\n\\* Lines N+2..N+M+1: Line i+N+1 contains two space-separated integers: Ci and Di\n", "outputFormat": "\\* Line 1: A single integer which is the minimum cost to satisfy all the cows. If that is not possible, output -1.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO07DEC] Gourmet Grazers G", "background": "", "description": "Like so many others, the cows have developed very haughty tastes and will no longer graze on just any grass. Instead, Farmer John must purchase gourmet organic grass at the Green Grass Grocers store for each of his N (1 ≤ N ≤ 100,000) cows.\n\nEach cow i demands grass of price at least Ai (1 ≤ Ai ≤ 1,000,000,000) and with a greenness score at least Bi (1 ≤ Bi ≤ 1,000,000,000). The GGG store has M (1 ≤ M ≤ 100,000) different types of grass available, each with a price Ci (1 ≤ Ci ≤ 1,000,000,000) and a greenness score of Di (1 ≤ Di ≤ 1,000,000,000). Of course, no cow would sacrifice her individuality, so no two cows can have the same kind of grass.\n\nHelp Farmer John satisfy the cows' expensive gourmet tastes while spending as little money as is necessary.", "inputFormat": "\\* Line 1: Two space-separated integers: N and M.\n\n\\* Lines 2..N+1: Line i+1 contains two space-separated integers: Ai and Bi\n\n\\* Lines N+2..N+M+1: Line i+N+1 contains two space-separated integers: Ci and Di\n", "outputFormat": "\\* Line 1: A single integer which is the minimum cost to satisfy all the cows. If that is not possible, output -1.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO07DEC] Gourmet Grazers G", "background": null, "description": "约翰的奶牛对食物越来越挑剔了。现在，商店有 $m$ 份牧草可供出售，奶牛食量很大，每份牧草仅能供一头奶牛食用。第 $i$ 份牧草的价格为 $c_i$，口感为 $d_i$。\n\n约翰一共有 $n$ 头奶牛，他要为每头奶牛订购一份牧草，第 $i$ 头奶牛要求 它的牧草价格不低于 $a_i$，口感不低于 $b_i$。请问，约翰应该如何为每头奶牛选择牧草，才能让他花的钱最少？", "inputFormat": "第一行，两个整数 $n$ 和 $m$。  \n\n第 $2\\sim n+1$ 行，第 $i+1$ 行两个整数 $a_i$ 和 $b_i$。  \n\n第 $n+2\\sim n+m+1$ 行，第 $i+n+1$ 行两个整数 $c_i$ 和 $d_i$。\n\n含义见题面所述。", "outputFormat": "输出仅一行，代表能够满足所有奶牛要求所要花的钱的最小值。如果不能够满足所有奶牛的要求，输出 `-1`。", "hint": "对于 $100\\%$ 的数据，满足 $1\\leqslant n,m\\leqslant 10^5$，$1\\leqslant a_i,b_i,c_i,d_i\\leqslant 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2870", "type": "P", "difficulty": 4, "samples": [["6\nA\nC\nD\nB\nC\nB", "ABCBCD"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["字符串", "贪心", "2007", "USACO", "哈希 hashing", "队列", "后缀数组 SA"], "title": "[USACO07DEC] Best Cow Line G", "background": "*本题和 [2007 年 11 月月赛银组同名题目](/problem/P6140) 在题意上一致，唯一的差别是数据范围。*", "description": "Farmer John 打算带领 $N$（$1 \\leq N \\leq 5 \\times 10^5$）头奶牛参加一年一度的“全美农场主大奖赛”。在这场比赛中，每个参赛者必须让他的奶牛排成一列，然后带领这些奶牛从裁判面前依此走过。\n\n今年，竞赛委员会在接受报名时，采用了一种新的登记规则：取每头奶牛名字的首字母，按照它们在队伍中的次序排成一列。将所有队伍的名字按字典序升序排序，从而得到出场顺序。\n\nFJ 由于事务繁忙，他希望能够尽早出场。因此他决定重排队列。\n\n他的调整方式是这样的：每次，他从原队列的首端或尾端牵出一头奶牛，将她安排到新队列尾部。重复这一操作直到所有奶牛都插入新队列为止。\n\n现在请你帮 FJ 算出按照上面这种方法能排出的字典序最小的队列。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行每行一个大写字母，表示初始队列。", "outputFormat": "输出一个长度为 $N$ 的字符串，表示可能的最小字典序队列。\n\n每输出 $80$ 个字母需要一个换行。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[USACO07DEC] Best Cow Line G", "background": "This problem has the same statement as the problem with the same name from the November 2007 Monthly Contest, Silver Group (/problem/P6140), with the only difference being the Constraints.", "description": "Farmer John plans to bring $N$ ( $1 \\leq N \\leq 5 \\times 10^5$ ) cows to the annual \"All-American Farmers Grand Prix\". In this contest, each participant must line up his cows in a single row, then lead them past the judges one by one.\n\nThis year, during registration, the committee adopted a new rule: take the first letter of each cow’s name, in the order they appear in the line, to form a string. Sort all teams’ strings in ascending lexicographic order to determine the order of appearance.\n\nSince FJ is busy, he wants to appear as early as possible. Therefore, he decides to rearrange the line.\n\nHis operation is as follows: at each step, he takes one cow from either the front or the back of the original line and appends her to the end of a new line. He repeats this until all cows have been placed into the new line.\n\nPlease help FJ compute the lexicographically smallest line that can be formed using the method above.", "inputFormat": "The first line contains an integer $N$.\n\nThe next $N$ lines each contain a single uppercase letter, representing the initial line.", "outputFormat": "Output a string of length $N$ representing the lexicographically smallest possible line.\n\nPrint a newline after every $80$ letters.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO07DEC] Best Cow Line G", "background": "*本题和 [2007 年 11 月月赛银组同名题目](/problem/P6140) 在题意上一致，唯一的差别是数据范围。*", "description": "Farmer John 打算带领 $N$（$1 \\leq N \\leq 5 \\times 10^5$）头奶牛参加一年一度的“全美农场主大奖赛”。在这场比赛中，每个参赛者必须让他的奶牛排成一列，然后带领这些奶牛从裁判面前依此走过。\n\n今年，竞赛委员会在接受报名时，采用了一种新的登记规则：取每头奶牛名字的首字母，按照它们在队伍中的次序排成一列。将所有队伍的名字按字典序升序排序，从而得到出场顺序。\n\nFJ 由于事务繁忙，他希望能够尽早出场。因此他决定重排队列。\n\n他的调整方式是这样的：每次，他从原队列的首端或尾端牵出一头奶牛，将她安排到新队列尾部。重复这一操作直到所有奶牛都插入新队列为止。\n\n现在请你帮 FJ 算出按照上面这种方法能排出的字典序最小的队列。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行每行一个大写字母，表示初始队列。", "outputFormat": "输出一个长度为 $N$ 的字符串，表示可能的最小字典序队列。\n\n每输出 $80$ 个字母需要一个换行。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2871", "type": "P", "difficulty": 2, "samples": [["4 6\n1 4\n2 6\n3 12\n2 7", "23"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2007", "USACO", "枚举", "背包 DP"], "title": "[USACO07DEC] Charm Bracelet S", "background": null, "description": "有 $N$ 件物品和一个容量为 $M$ 的背包。第 $i$ 件物品的重量是 $W_i$，价值是 $D_i$。求解将哪些物品装入背包可使这些物品的重量总和不超过背包容量，且价值总和最大。", "inputFormat": "第一行：物品个数 $N$ 和背包大小 $M$。\n\n第二行至第 $N+1$ 行：第 $i$ 个物品的重量 $W_i$ 和价值 $D_i$。", "outputFormat": "输出一行最大价值。", "hint": "$1 \\le N \\le 3402$，$1 \\le M \\le 12880$，$1 \\le W_i \\le 400$，$1 \\le D_i \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07DEC] Charm Bracelet S", "background": null, "description": "Bessie has gone to the mall's jewelry store and spies a charm bracelet. Of course, she'd like to fill it with the best charms possible from the $N (1 \\le N \\le 3,402)$ available charms. Each charm i in the supplied list has a weight $W_i (1 \\le W_i \\le 400)$, a 'desirability' factor $D_i (1 \\le D_i \\le 100)$, and can be used at most once. Bessie can only support a charm bracelet whose weight is no more than $M (1 \\le M \\le 12,880)$.\n\nGiven that weight limit as a constraint and a list of the charms with their weights and desirability rating, deduce the maximum possible sum of ratings.", "inputFormat": "* Line $1$: Two space-separated integers: $N$ and $M$.\n\n* Lines $2 \\sim N+1$: Line $i+1$ describes charm $i$ with two space-separated integers: $W_i$ and $D_i$.", "outputFormat": "* Line $1$: A single integer that is the greatest sum of charm desirabilities that can be achieved given the weight constraints.", "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO07DEC] Charm Bracelet S", "background": null, "description": "有 $N$ 件物品和一个容量为 $M$ 的背包。第 $i$ 件物品的重量是 $W_i$，价值是 $D_i$。求解将哪些物品装入背包可使这些物品的重量总和不超过背包容量，且价值总和最大。", "inputFormat": "第一行：物品个数 $N$ 和背包大小 $M$。\n\n第二行至第 $N+1$ 行：第 $i$ 个物品的重量 $W_i$ 和价值 $D_i$。", "outputFormat": "输出一行最大价值。", "hint": "$1 \\le N \\le 3402$，$1 \\le M \\le 12880$，$1 \\le W_i \\le 400$，$1 \\le D_i \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P2872", "type": "P", "difficulty": 3, "samples": [["4 1\n1 1\n3 1\n2 3\n4 3\n1 4", "4.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2007", "USACO", "生成树"], "title": "[USACO07DEC] Building Roads S", "background": null, "description": "给定 $n$ 个点的坐标，第 $i$ 个点的坐标为 $(x_i,y_i)$，这 $n$ 个点编号为 $1$ 到 $n$。给定 $m$ 条边，第 $i$ 条边连接第 $u_i$ 个点和第 $v_i$ 个点。现在要求你添加一些边，并且能使得任意一点都可以连通其他所有点。求添加的边的总长度的最小值。", "inputFormat": "第一行两个整数 $n,m$ 代表点数与边数。   \n接下来 $n$ 行每行两个整数 $x_i,y_i$ 代表第 $i$ 个点的坐标。   \n接下来 $m$ 行每行两个整数 $u_i,v_i$ 代表第 $i$ 条边连接第 $u_i$ 个点和第 $v_i$ 个点。", "outputFormat": "一行一个实数代表添加的边的最小长度，要求保留两位小数，为了避免误差，请用 $64$ 位实型变量进行计算。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的整数，$1 \\le n,m \\le 1000$，$1 \\le x_i,y_i \\le 10^6$，$1 \\le u_i,v_i \\le n$。\n\n### 说明\n\nTranslated by 一只书虫仔。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07DEC] Building Roads S", "background": null, "description": "Farmer John had just acquired several new farms! He wants to connect the farms with roads so that he can travel from any farm to any other farm via a sequence of roads; roads already connect some of the farms.\n\nEach of the $N (1 \\le N \\le 1,000)$ farms (conveniently numbered $1 \\sim N$) is represented by a position $(X_i, Y_i)$ on the plane $(0 \\le X_i \\le 1,000,000; 0 \\le Y_i \\le 1,000,000)$. Given the preexisting $M$ roads $(1 \\le M \\le 1,000)$ as pairs of connected farms, help Farmer John determine the smallest length of additional roads he must build to connect all his farms.", "inputFormat": "* Line $1$: Two space-separated integers: $N$ and $M$.\n\n* Lines $2 \\sim N+1$: Two space-separated integers: $X_i$ and $Y_i$.\n\n* Lines $N+2 \\sim N+M+2$: Two space-separated integers: $i$ and $j$, indicating that there is already a road connecting the farm $i$ and farm $j$.", "outputFormat": "* Line $1$: Smallest length of additional roads required to connect all farms, printed without rounding to two decimal places. Be sure to calculate distances as 64-bit floating point numbers.", "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO07DEC] Building Roads S", "background": null, "description": "给定 $n$ 个点的坐标，第 $i$ 个点的坐标为 $(x_i,y_i)$，这 $n$ 个点编号为 $1$ 到 $n$。给定 $m$ 条边，第 $i$ 条边连接第 $u_i$ 个点和第 $v_i$ 个点。现在要求你添加一些边，并且能使得任意一点都可以连通其他所有点。求添加的边的总长度的最小值。", "inputFormat": "第一行两个整数 $n,m$ 代表点数与边数。   \n接下来 $n$ 行每行两个整数 $x_i,y_i$ 代表第 $i$ 个点的坐标。   \n接下来 $m$ 行每行两个整数 $u_i,v_i$ 代表第 $i$ 条边连接第 $u_i$ 个点和第 $v_i$ 个点。", "outputFormat": "一行一个实数代表添加的边的最小长度，要求保留两位小数，为了避免误差，请用 $64$ 位实型变量进行计算。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的整数，$1 \\le n,m \\le 1000$，$1 \\le x_i,y_i \\le 10^6$，$1 \\le u_i,v_i \\le n$。\n\n### 说明\n\nTranslated by 一只书虫仔。", "locale": "zh-CN"}}}
{"pid": "P2873", "type": "P", "difficulty": 2, "samples": [["1 2 7\n0 2\n-1 3\n3 1\n1 1\n4 2\n-1 1\n2 2", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "USACO"], "title": "[USACO07DEC] Mud Puddles S", "background": "", "description": "Farmer John is leaving his house promptly at 6 AM for his daily milking of Bessie. However, the previous evening saw a heavy rain, and the fields are quite muddy. FJ starts at the point (0, 0) in the coordinate plane and heads toward Bessie who is located at (X, Y) (-500 ≤ X ≤ 500; -500 ≤ Y ≤ 500). He can see all N (1 ≤ N ≤ 10,000) puddles of mud, located at points (Ai, Bi) (-500 ≤ Ai ≤ 500; -500 ≤ Bi ≤ 500) on the field. Each puddle occupies only the point it is on.\n\nHaving just bought new boots, Farmer John absolutely does not want to dirty them by stepping in a puddle, but he also wants to get to Bessie as quickly as possible. He's already late because he had to count all the puddles. If Farmer John can only travel parallel to the axes and turn at points with integer coordinates, what is the shortest distance he must travel to reach Bessie and keep his boots clean? There will always be a path without mud that Farmer John can take to reach Bessie.", "inputFormat": "\\* Line 1: Three space-separate integers: X, Y, and N.\n\n\\* Lines 2..N+1: Line i+1 contains two space-separated integers: Ai and Bi\n", "outputFormat": "\\* Line 1: The minimum distance that Farmer John has to travel to reach Bessie without stepping in mud.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO07DEC] Mud Puddles S", "background": "", "description": "Farmer John is leaving his house promptly at 6 AM for his daily milking of Bessie. However, the previous evening saw a heavy rain, and the fields are quite muddy. FJ starts at the point (0, 0) in the coordinate plane and heads toward Bessie who is located at (X, Y) (-500 ≤ X ≤ 500; -500 ≤ Y ≤ 500). He can see all N (1 ≤ N ≤ 10,000) puddles of mud, located at points (Ai, Bi) (-500 ≤ Ai ≤ 500; -500 ≤ Bi ≤ 500) on the field. Each puddle occupies only the point it is on.\n\nHaving just bought new boots, Farmer John absolutely does not want to dirty them by stepping in a puddle, but he also wants to get to Bessie as quickly as possible. He's already late because he had to count all the puddles. If Farmer John can only travel parallel to the axes and turn at points with integer coordinates, what is the shortest distance he must travel to reach Bessie and keep his boots clean? There will always be a path without mud that Farmer John can take to reach Bessie.", "inputFormat": "\\* Line 1: Three space-separate integers: X, Y, and N.\n\n\\* Lines 2..N+1: Line i+1 contains two space-separated integers: Ai and Bi\n", "outputFormat": "\\* Line 1: The minimum distance that Farmer John has to travel to reach Bessie without stepping in mud.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO07DEC] Mud Puddles S", "background": null, "description": "农夫约翰在早上 $6$ 点准时离开家去挤奶贝茜。然而，前一天晚上下了大雨，田地里非常泥泞。约翰从坐标平面上的点 $(0,0)$ 出发，前往位于 $(X,Y)$ 的贝茜（$-500\\le X\\le 500$；$-500\\le Y\\le 500$）。他可以看到田地上所有 $N(1\\le N\\le 10,000)$ 个泥坑，位于点 $(A_i,B_i)$（$-500\\le A_i\\le 500$；$-500\\le B_i\\le 500$）。每个泥坑只占据它所在的点。\n\n刚买了新靴子的农夫约翰绝对不想弄脏他的靴子，但他也想尽快到达贝茜。他已经迟到了，因为他不得不数清所有的泥坑。如果农夫约翰只能平行于坐标轴行走，并且只能在整数坐标点处转弯，那么他到达贝茜并保持靴子干净的最短距离是多少？总会有一条没有泥的路径可以让农夫约翰到达贝茜。", "inputFormat": "* 第 $1$ 行：三个用空格分隔的整数：$X,Y,N$。\n* 第 $2$ 行到第 $N+1$ 行：第 $i+1$ 行包含两个用空格分隔的整数：$A_i$ 和 $B_i$。", "outputFormat": "* 第 $1$ 行：农夫约翰到达贝茜而不踩到泥的最短距离。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P2874", "type": "P", "difficulty": 5, "samples": [["4\n1 -3\n0 1\n-2 1\n1 -1", "10 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "贪心", "2007", "USACO"], "title": "[USACO07FEB] Building A New Barn G", "background": null, "description": "给出平面上 $n$ 个两两之间曼哈顿距离不小于 $2$ 的整点，要求到这 $n$ 个点的曼哈顿距离之和最小，且不与 $n$ 个点中任意一个点重合的整点个数 $C$，和这个最小距离 $D$。", "inputFormat": "第一行一个正整数 $n$。\n\n下面 $n$ 行，每行两个整数 $x_i,y_i$，表示一个点的坐标 $(x_i,y_i)$。", "outputFormat": "一行两个整数 $D,C$。", "hint": "样例解释：$D=10$，$4$ 个最优整点分别是 $(0, -1), (0, 0), (1, 0), (1, 1)$。$(0,1)$ 和 $(1,-1)$ 也是符合题意的，但是因为与给定的点重合了，所以不算在答案内。\n\n\n---\n\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^4$，$-10^4 \\le x_i,y_i \\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07FEB] Building A New Barn G", "background": null, "description": "After scrimping and saving for years, Farmer John has decided to build a new barn. He wants the barn to be highly accessible, and he knows the coordinates of the grazing spots of all N (2 ≤ N ≤ 10,000 cows. Each grazing spot is at a point with integer coordinates (Xi, Yi) (-10,000 ≤ Xi ≤ 10,000; -10,000 ≤ Yi ≤ 10,000). The hungry cows never graze in spots that are horizontally or vertically adjacent.\n\nThe barn must be placed at integer coordinates and cannot be on any cow's grazing spot. The inconvenience of the barn for any cow is given the Manhattan distance formula | X - Xi | + | Y - Yi|, where (X, Y) and (Xi, Yi) are the coordinates of the barn and the cow's grazing spot, respectively. Where should the barn be constructed in order to minimize the sum of its inconvenience for all the cows?", "inputFormat": "Line 1: A single integer: N\n\nLines 2..N+1: Line i+1 contains two space-separated integers which are the grazing location (Xi, Yi) of cow i", "outputFormat": "Line 1: Two space-separated integers: the minimum inconvenience for the barn and the number of spots on which Farmer John can build the barn to achieve this minimum.", "hint": "The minimum inconvenience is 10, and there are 4 spots that Farmer John can build the farm to achieve this: (0, -1), (0, 0), (1, 0), and (1, 1).", "locale": "en"}, "zh-CN": {"title": "[USACO07FEB] Building A New Barn G", "background": null, "description": "给出平面上 $n$ 个两两之间曼哈顿距离不小于 $2$ 的整点，要求到这 $n$ 个点的曼哈顿距离之和最小，且不与 $n$ 个点中任意一个点重合的整点个数 $C$，和这个最小距离 $D$。", "inputFormat": "第一行一个正整数 $n$。\n\n下面 $n$ 行，每行两个整数 $x_i,y_i$，表示一个点的坐标 $(x_i,y_i)$。", "outputFormat": "一行两个整数 $D,C$。", "hint": "样例解释：$D=10$，$4$ 个最优整点分别是 $(0, -1), (0, 0), (1, 0), (1, 1)$。$(0,1)$ 和 $(1,-1)$ 也是符合题意的，但是因为与给定的点重合了，所以不算在答案内。\n\n\n---\n\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^4$，$-10^4 \\le x_i,y_i \\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2875", "type": "P", "difficulty": 5, "samples": [["6 10\nbrowndcodw\ncow\nmilk\nwhite\nblack\nbrown\nfarmer", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "动态规划 DP", "2007", "USACO"], "title": "[USACO07FEB] The Cow Lexicon S", "background": "", "description": "Few know that the cows have their own dictionary with W (1 ≤ W ≤ 600) words, each containing no more 25 of the characters 'a'..'z'. Their cowmunication system, based on mooing, is not very accurate; sometimes they hear words that do not make any sense. For instance, Bessie once received a message that said \"browndcodw\". As it turns out, the intended message was \"browncow\" and the two letter \"d\"s were noise from other parts of the barnyard.\n\nThe cows want you to help them decipher a received message (also containing only characters in the range 'a'..'z') of length L (2 ≤ L ≤ 300) characters that is a bit garbled. In particular, they know that the message has some extra letters, and they want you to determine the smallest number of letters that must be removed to make the message a sequence of words from the dictionary.", "inputFormat": "Line 1: Two space-separated integers, respectively: W and L\n\n\nLine 2: L characters (followed by a newline, of course): the received message\n\n\nLines 3..W+2: The cows' dictionary, one word per line\n\n• 第1行:两个用空格隔开的整数,W和L.\n\n\n• 第2行:一个长度为L的字符串,表示收到的信息.\n\n\n• 第3行至第W+2行:奶牛的字典,每行一个词.\n", "outputFormat": "Line 1: a single integer that is the smallest number of characters that need to be removed to make the message a sequence of dictionary words.\n\n一个整数,表示最少去掉几个字母就可以使之变成准确的\"牛语\".\n", "hint": "感谢@ws\\_fuweidong 提供完整题面\n", "locale": "en", "translations": {"en": {"title": "[USACO07FEB] The Cow Lexicon S", "background": "", "description": "Few know that the cows have their own dictionary with W (1 ≤ W ≤ 600) words, each containing no more 25 of the characters 'a'..'z'. Their cowmunication system, based on mooing, is not very accurate; sometimes they hear words that do not make any sense. For instance, Bessie once received a message that said \"browndcodw\". As it turns out, the intended message was \"browncow\" and the two letter \"d\"s were noise from other parts of the barnyard.\n\nThe cows want you to help them decipher a received message (also containing only characters in the range 'a'..'z') of length L (2 ≤ L ≤ 300) characters that is a bit garbled. In particular, they know that the message has some extra letters, and they want you to determine the smallest number of letters that must be removed to make the message a sequence of words from the dictionary.", "inputFormat": "Line 1: Two space-separated integers, respectively: W and L\n\n\nLine 2: L characters (followed by a newline, of course): the received message\n\n\nLines 3..W+2: The cows' dictionary, one word per line\n\n• 第1行:两个用空格隔开的整数,W和L.\n\n\n• 第2行:一个长度为L的字符串,表示收到的信息.\n\n\n• 第3行至第W+2行:奶牛的字典,每行一个词.\n", "outputFormat": "Line 1: a single integer that is the smallest number of characters that need to be removed to make the message a sequence of dictionary words.\n\n一个整数,表示最少去掉几个字母就可以使之变成准确的\"牛语\".\n", "hint": "感谢@ws\\_fuweidong 提供完整题面\n", "locale": "en"}, "zh-CN": {"title": "[USACO07FEB] The Cow Lexicon S", "background": null, "description": "很少有人知道，奶牛们有自己的字典，它包含 $W$（$1\\le W\\le 600$）个单词。每个单词均由小写字母组成，且最多包含 $25$ 个字符。\n\n它们的“牛语”系统基于哞声，不是很准确；有时它们会听到一些没有意义的词。例如，Bessie 曾收到一条信息 `browndcodw`。结果发现，原本的信息是 `browncow`，其中两个字母 `d` 是来自其他地方的噪音。\n\n奶牛们希望你帮助它们解码收到的信息（只包含小写字母），长度为 $L$（$2\\le L\\le 300$），信息有些混乱。\n\n特别是，它们知道信息中有一些多余的字母，它们希望你确定必须删除的最少字母数量，以使信息成为字典中的单词序列。", "inputFormat": "第 $1$ 行：两个用空格隔开的整数，分别是：$W$ 和 $L$。\n\n第 $2$ 行：一个长度为 $L$ 的字符串，表示收到的信息。\n\n第 $3$ 行至第 $W+2$ 行：奶牛的字典，每行一个单词。", "outputFormat": "一行一个整数，表示最少去掉几个字母就可以使之变成准确的“牛语”。", "hint": "感谢 @ws_fuweidong 提供完整题面。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P2876", "type": "P", "difficulty": 5, "samples": [["100 5\n40 20\n60 20\n30 50\n30 50\n40 40", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "2007", "USACO", "最短路"], "title": "[USACO07JAN] Problem Solving G", "background": "", "description": "In easier times, Farmer John's cows had no problems. These days, though, they have problems, lots of problems; they have P (1 ≤ P ≤ 300) problems, to be exact. They have quit providing milk and have taken regular jobs like all other good citizens. In fact, on a normal month they make M (1 ≤ M ≤ 1000) money.\n\nTheir problems, however, are so complex they must hire consultants to solve them. Consultants are not free, but they are competent: consultants can solve any problem in a single month. Each consultant demands two payments: one in advance (1 ≤ payment ≤ M) to be paid at the start of the month problem-solving is commenced and one more payment at the start of the month after the problem is solved (1 ≤ payment ≤ M). Thus, each month the cows can spend the money earned during the previous month to pay for consultants. Cows are spendthrifts: they can never save any money from month-to-month; money not used is wasted on cow candy.\n\nSince the problems to be solved depend on each other, they must be solved mostly in order. For example, problem 3 must be solved before problem 4 or during the same month as problem 4.\n\nDetermine the number of months it takes to solve all of the cows' problems and pay for the solutions.\n\n", "inputFormat": "Line 1: Two space-separated integers: M and P.\n\n\nLines 2..P+1: Line i+1 describes problem i with two space-separated integers: Bi and Ai. Bi is the payment to the consult BEFORE the problem is solved; Ai is the payment to the consult AFTER the problem is solved.\n\n", "outputFormat": "Line 1: The number of months it takes to solve and pay for all the cows' problems.\n", "hint": "|      | Avail | Probs  | Before  | After   | Candy  |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n|Month | Money | Solved | Payment | Payment | Money  |\n| 1    | 0     | -none- | 0       | 0       | 0      |\n| 2    | 100   | 1, 2   | 40+60   | 0       | 0      |\n| 3    | 100   | 3, 4   | 30+30   | 20+20   | 0      |\n| 4    | 100   | -none- | 0       | 50+50   | 0      |\n| 5    | 100   | 5      | 40      | 0       | 60     |\n| 6    | 100   | -none- | 0       | 40      | 60     |", "locale": "en", "translations": {"en": {"title": "[USACO07JAN] Problem Solving G", "background": "", "description": "In easier times, Farmer John's cows had no problems. These days, though, they have problems, lots of problems; they have P (1 ≤ P ≤ 300) problems, to be exact. They have quit providing milk and have taken regular jobs like all other good citizens. In fact, on a normal month they make M (1 ≤ M ≤ 1000) money.\n\nTheir problems, however, are so complex they must hire consultants to solve them. Consultants are not free, but they are competent: consultants can solve any problem in a single month. Each consultant demands two payments: one in advance (1 ≤ payment ≤ M) to be paid at the start of the month problem-solving is commenced and one more payment at the start of the month after the problem is solved (1 ≤ payment ≤ M). Thus, each month the cows can spend the money earned during the previous month to pay for consultants. Cows are spendthrifts: they can never save any money from month-to-month; money not used is wasted on cow candy.\n\nSince the problems to be solved depend on each other, they must be solved mostly in order. For example, problem 3 must be solved before problem 4 or during the same month as problem 4.\n\nDetermine the number of months it takes to solve all of the cows' problems and pay for the solutions.\n\n", "inputFormat": "Line 1: Two space-separated integers: M and P.\n\n\nLines 2..P+1: Line i+1 describes problem i with two space-separated integers: Bi and Ai. Bi is the payment to the consult BEFORE the problem is solved; Ai is the payment to the consult AFTER the problem is solved.\n\n", "outputFormat": "Line 1: The number of months it takes to solve and pay for all the cows' problems.\n", "hint": "|      | Avail | Probs  | Before  | After   | Candy  |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n|Month | Money | Solved | Payment | Payment | Money  |\n| 1    | 0     | -none- | 0       | 0       | 0      |\n| 2    | 100   | 1, 2   | 40+60   | 0       | 0      |\n| 3    | 100   | 3, 4   | 30+30   | 20+20   | 0      |\n| 4    | 100   | -none- | 0       | 50+50   | 0      |\n| 5    | 100   | 5      | 40      | 0       | 60     |\n| 6    | 100   | -none- | 0       | 40      | 60     |", "locale": "en"}, "zh-CN": {"title": "[USACO07JAN] Problem Solving G", "background": null, "description": "在较为轻松的日子里，Farmer John 的奶牛们没有任何问题。然而，如今它们却有许多问题，确切地说，它们有 $P$ 个问题，其中 $1 \\leq P \\leq 300$。它们已经停止提供牛奶，并像其他好公民一样找了常规工作。实际上，在一个正常的月份里，它们可以赚取 $M$ 的钱，其中 $1 \\leq M \\leq 1000$。\n\n然而，它们的问题非常复杂，以至于必须雇佣顾问来解决。顾问不是免费的，但他们很有能力：顾问可以在一个月内解决任何一个问题。每个顾问要求两次付款：一次是在开始解决问题的月份开始时支付的预付款（$1 \\leq \\text{payment} \\leq M$），另一次是在问题解决后的下个月开始时支付的尾款（$1 \\leq \\text{payment} \\leq M$）。因此，每个月奶牛们可以用上个月赚的钱来支付顾问的费用。奶牛们是挥霍无度的，它们无法从一个月到下个月存钱；未使用的钱会浪费在牛糖果上。\n\n由于要解决的问题之间存在依赖关系，它们必须大部分按顺序解决。例如，问题 3 必须在问题 4 之前解决，或者与问题 4 在同一个月解决。\n\n确定解决所有奶牛问题并支付解决费用所需的月份数。", "inputFormat": "第 1 行：两个用空格分隔的整数：$M$ 和 $P$。\n\n\n第 2 行到第 $P+1$ 行：第 $i+1$ 行描述问题 $i$，包含两个用空格分隔的整数：$B_i$ 和 $A_i$。$B_i$ 是在问题解决之前支付给顾问的费用；$A_i$ 是在问题解决之后支付给顾问的费用。", "outputFormat": "第 1 行：解决并支付所有奶牛问题所需的月份数。", "hint": "| 月份 | 当月收入   | 当月解决的问题  | 当月支付的预付款 |  当月支付的尾款   | 浪费金额    |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$    | $0$    | -无-  | $0$       | $0$      | $0$     |\n| $2$    | $100$  | $1, 2$  | $40+60$   | $0$      | $0$     |\n| $3$    | $100$  | $3, 4$  | $30+30$   | $20+20$  | $0$     |\n| $4$    | $100$ | -无-  | $0$       | $50+50$  | $0$     |\n| $5$    | $100$  | $5$     | $40$      | $0$      | $60$    |\n| $6$    | $100$  | -无-  | $0$       | $40$     | $60$    |\n\n（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P2877", "type": "P", "difficulty": 6, "samples": [["5\n1 2\n5 9\n3 8\n4 10\n1 3", "2\n1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "USACO", "cdq 分治", "斜率优化", "分数规划", "决策单调性"], "title": "[USACO07JAN] Cow School G", "background": null, "description": "一个人参加了 $N$ 场考试，第 $i$ 场满分为 $P_i$，其得分为 $T_i$。现在要删去其中 $D$ 次考试的成绩，用剩下的总得分除以剩下的满分之和，作为其最终成绩。问对于哪些 $D$ 而言，删除得分比（即 $\\dfrac{T_i}{P_i}$）最小的 $D$ 场得到的最终成绩不是最优的（用其他方法可以得到更高的最终成绩）。", "inputFormat": "第一行一个正整数 $N$。\n\n下面 $N$ 行，每行两个正整数 $T_i,P_i$。", "outputFormat": "先输出满足题意的 $D$ 的个数，然后升序输出所有满足题意的 $D$，每个一行。", "hint": "样例解释：当 $D \\le 2$ 时，删去 $\\dfrac{4}{10}$ 比删去 $\\dfrac{1}{3}$ 更优。\n\n\n\n---\n\n对于 $91\\%$ 的数据（#1 - #11），$N \\le 5 \\times 10^3$。\n\n对于 $100\\%$ 的数据（#1 - #12），$1 \\le N \\le 5 \\times 10^4$，$0 \\le T_i \\le P_i \\le 4 \\times 10^4$，$P_i \\ne 0$，且所有 $\\dfrac{T_i}{P_i}$ 互不相同。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07JAN] Cow School G", "background": null, "description": "Bessy is going to school and doing well. She has taken N (1 ≤ N ≤ 5000 -- except one case where 1 ≤ N ≤ 50,000) tests and recorded the scores (Ti points out of Pi points for test i; 0 ≤ Ti ≤ Pi < 40,000; 0 < Pi) as this task's input.\n\nHer teacher will drop the D tests with the lowest percentage (Ti⁄Pi) before calculating Bessie's final grade (which is the sum of the remaining test score points over the sum of the remaining total test points). Bessy is good at math and quickly realizes that this does not benefit her as much as it might.\n\nTo prove her point, Bessy wants to find all values of D for which she could have ended up with a higher grade by choosing to drop different tests than the teacher would have. Help her by finding and printing all values of D for which this is possible.\n\nBessy has noted that, amazingly, she has never scored the same percentage on two different tests.", "inputFormat": "Line 1: A single integer, N\n\nLines 2..N+1: Line i+1 contains two space-separated integers: Ti and Pi", "outputFormat": "Line 1: A single integer K (0 ≤ K ≤ N) that is the number of values of D for which Bessy could have ended up with a higher grade by dropping a different set of D tests than the teacher.\n\nLines 2..K+1: The values of D for which this is true, in ascending numerical order.", "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO07JAN] Cow School G", "background": null, "description": "一个人参加了 $N$ 场考试，第 $i$ 场满分为 $P_i$，其得分为 $T_i$。现在要删去其中 $D$ 次考试的成绩，用剩下的总得分除以剩下的满分之和，作为其最终成绩。问对于哪些 $D$ 而言，删除得分比（即 $\\dfrac{T_i}{P_i}$）最小的 $D$ 场得到的最终成绩不是最优的（用其他方法可以得到更高的最终成绩）。", "inputFormat": "第一行一个正整数 $N$。\n\n下面 $N$ 行，每行两个正整数 $T_i,P_i$。", "outputFormat": "先输出满足题意的 $D$ 的个数，然后升序输出所有满足题意的 $D$，每个一行。", "hint": "样例解释：当 $D \\le 2$ 时，删去 $\\dfrac{4}{10}$ 比删去 $\\dfrac{1}{3}$ 更优。\n\n\n\n---\n\n对于 $91\\%$ 的数据（#1 - #11），$N \\le 5 \\times 10^3$。\n\n对于 $100\\%$ 的数据（#1 - #12），$1 \\le N \\le 5 \\times 10^4$，$0 \\le T_i \\le P_i \\le 4 \\times 10^4$，$P_i \\ne 0$，且所有 $\\dfrac{T_i}{P_i}$ 互不相同。", "locale": "zh-CN"}}}
{"pid": "P2878", "type": "P", "difficulty": 3, "samples": [["6\n3 1\n2 5\n2 3\n3 2\n4 1\n1 6", "86"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心", "2007", "USACO", "排序"], "title": "[USACO07JAN] Protecting the Flowers S", "background": "", "description": "有 $n$ 头奶牛跑到 FJ 的花园里去吃花儿了，它们分别在距离牛圈 $T_i$（这里指 FJ 到那里需要 $T_i$ 分钟）处吃花，每分钟会吃掉 $D_i$ 朵花，FJ 现在要将它们给弄回牛圈，但是他每次只能弄一头回去，来回用时总共为 $2 \\times T_i$ 分钟，在这段时间内，其它的奶牛会继续吃 FJ 的花，速度保持不变，当然正在被赶回牛圈的奶牛不能继续吃了。现在求在最好的方案下奶牛吃掉花的最小朵数。", "inputFormat": "第一行一个正整数 $n$。\n\n下面 $n$ 行，每行两个正整数 $T_i,D_i$。", "outputFormat": "一行一个整数表示答案。", "hint": "样例解释：最优策略是按 $6 \\to 2 \\to 3 \\to 4 \\to 1 \\to 5$ 的顺序把牛赶回牛圈。\n\n---\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le T_i \\le 2 \\times 10^6$，$1 \\le D_i \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07JAN] Protecting the Flowers S", "background": null, "description": "Farmer John went to cut some wood and left N (2 ≤ N ≤ 100,000) cows eating the grass, as usual. When he returned, he found to his horror that the cluster of cows was in his garden eating his beautiful flowers. Wanting to minimize the subsequent damage, FJ decided to take immediate action and transport each cow back to its own barn.\n\nEach cow i is at a location that is Ti minutes (1 ≤ Ti ≤ 2,000,000) away from its own barn. Furthermore, while waiting for transport, she destroys Di (1 ≤ Di ≤ 100) flowers per minute. No matter how hard he tries, FJ can only transport one cow at a time back to her barn. Moving cow i to its barn requires 2 × Ti minutes (Ti to get there and Ti to return). FJ starts at the flower patch, transports the cow to its barn, and then walks back to the flowers, taking no extra time to get to the next cow that needs transport.\n\nWrite a program to determine the order in which FJ should pick up the cows so that the total number of flowers destroyed is minimized.", "inputFormat": "Line 1: A single integer N\n\nLines 2..N+1: Each line contains two space-separated integers, Ti and Di, that describe a single cow's characteristics", "outputFormat": "Line 1: A single integer that is the minimum number of destroyed flowers", "hint": "FJ returns the cows in the following order: 6, 2, 3, 4, 1, 5. While he is transporting cow 6 to the barn, the others destroy 24 flowers; next he will take cow 2, losing 28 more of his beautiful flora. For the cows 3, 4, 1 he loses 16, 12, and 6 flowers respectively. When he picks cow 5 there are no more cows damaging the flowers, so the loss for that cow is zero. The total flowers lost this way is 24 + 28 + 16 + 12 + 6 = 86.", "locale": "en"}, "zh-CN": {"title": "[USACO07JAN] Protecting the Flowers S", "background": "", "description": "有 $n$ 头奶牛跑到 FJ 的花园里去吃花儿了，它们分别在距离牛圈 $T_i$（这里指 FJ 到那里需要 $T_i$ 分钟）处吃花，每分钟会吃掉 $D_i$ 朵花，FJ 现在要将它们给弄回牛圈，但是他每次只能弄一头回去，来回用时总共为 $2 \\times T_i$ 分钟，在这段时间内，其它的奶牛会继续吃 FJ 的花，速度保持不变，当然正在被赶回牛圈的奶牛不能继续吃了。现在求在最好的方案下奶牛吃掉花的最小朵数。", "inputFormat": "第一行一个正整数 $n$。\n\n下面 $n$ 行，每行两个正整数 $T_i,D_i$。", "outputFormat": "一行一个整数表示答案。", "hint": "样例解释：最优策略是按 $6 \\to 2 \\to 3 \\to 4 \\to 1 \\to 5$ 的顺序把牛赶回牛圈。\n\n---\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le T_i \\le 2 \\times 10^6$，$1 \\le D_i \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P2879", "type": "P", "difficulty": 3, "samples": [["9 3 5 5\n1 3\n5 3\n4 3\n3 7\n9 8", "5\n4\n5\n3\n4\n4\n5\n5\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2007", "USACO", "哈希 hashing", "前缀和", "差分"], "title": "[USACO07JAN] Tallest Cow S", "background": null, "description": "FJ's $N(1 \\le N \\le 10,000)$ cows conveniently indexed $1 \\ldots N$ are standing in a line. Each cow has a positive integer height (which is a bit of secret). You are told only the height $H(1 \\le H \\le 1,000,000)$ of the tallest cow along with the index I of that cow.\n\nFJ has made a list of $R(0 \\le R \\le 10,000)$ lines of the form \"cow 17 sees cow 34\". This means that cow 34 is at least as tall as cow 17, and that every cow between 17 and 34 has a height that is strictly smaller than that of cow 17.\n\nFor each cow from $1 \\ldots N$, determine its maximum possible height, such that all of the information given is still correct. It is guaranteed that it is possible to satisfy all the constraints.", "inputFormat": "Line $1$: Four space-separated integers: $N, I, H$ and $R$\n\n\nLines $2 \\ldots R+1$: Two distinct space-separated integers $A$ and $B(1 \\le A, B \\le N)$, indicating that cow $A$ can see cow $B$.", "outputFormat": "Lines $1 \\ldots N$: Line $i$ contains the maximum possible height of cow $i$.", "hint": null, "locale": "en", "translations": {"en": {"title": "[USACO07JAN] Tallest Cow S", "background": null, "description": "FJ's $N(1 \\le N \\le 10,000)$ cows conveniently indexed $1 \\ldots N$ are standing in a line. Each cow has a positive integer height (which is a bit of secret). You are told only the height $H(1 \\le H \\le 1,000,000)$ of the tallest cow along with the index I of that cow.\n\nFJ has made a list of $R(0 \\le R \\le 10,000)$ lines of the form \"cow 17 sees cow 34\". This means that cow 34 is at least as tall as cow 17, and that every cow between 17 and 34 has a height that is strictly smaller than that of cow 17.\n\nFor each cow from $1 \\ldots N$, determine its maximum possible height, such that all of the information given is still correct. It is guaranteed that it is possible to satisfy all the constraints.", "inputFormat": "Line $1$: Four space-separated integers: $N, I, H$ and $R$\n\n\nLines $2 \\ldots R+1$: Two distinct space-separated integers $A$ and $B(1 \\le A, B \\le N)$, indicating that cow $A$ can see cow $B$.", "outputFormat": "Lines $1 \\ldots N$: Line $i$ contains the maximum possible height of cow $i$.", "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO07JAN] Tallest Cow S", "background": null, "description": "FJ 的 $N$ 头奶牛（$1 \\le N \\le 10,000$）按编号 $1$ 到 $N$ 排成一行。每头奶牛有一个正整数表示的身高（这是个秘密）。现在你只知道最高奶牛的身高 $H$（$1 \\le H \\le 1,000,000$），以及它的编号 $I$。\n\nFJ 提供了 $R$ 条信息（$0 \\le R \\le 10,000$），每条信息形如“奶牛 17 能看到奶牛 34”。这意味着奶牛 34 的身高不小于奶牛 17 的身高，并且编号在 17 和 34 之间的所有奶牛，其身高都严格小于奶牛 17 的身高。\n\n现在请你计算出对于每一头奶牛（编号从 $1$ 到 $N$），在所有给定信息都成立的前提下，它可能具有的最大身高。\n\n题目保证一定存在满足条件的解。", "inputFormat": "第 $1$ 行：四个用空格分隔的整数：$N$，$I$，$H$ 和 $R$。\n\n第 $2$ 到第 $R+1$ 行：每行两个不同的整数 $A$ 和 $B$（$1 \\le A$, $B \\le N$），表示奶牛 $A$ 能看到奶牛 $B$。", "outputFormat": "共 $N$ 行，第 $i$ 行输出奶牛 $i$ 的最大可能身高。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2880", "type": "P", "difficulty": 3, "samples": [["6 3\n1\n7\n3\n4\n2\n5\n1 5\n4 6\n2 2", "6\n3\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2007", "线段树", "USACO", "树状数组", "ST 表"], "title": "[USACO07JAN] Balanced Lineup G", "background": null, "description": "每天，农夫 John 的 $n\\ (1\\le n\\le 5\\times 10^4)$ 头牛总是按同一序列排队。\n\n有一天，John 决定让一些牛们玩一场飞盘比赛。他准备找一群在队列中位置连续的牛来进行比赛。但是为了避免水平悬殊，牛的身高不应该相差太大。John 准备了 $q\\ (1\\le q\\le 1.8\\times10^5)$ 个可能的牛的选择和所有牛的身高 $h_i\\ (1\\le h_i\\le 10^6,1\\le i\\le n)$。他想知道每一组里面最高和最低的牛的身高差。", "inputFormat": "第一行两个数 $n,q$。\n\n接下来 $n$ 行，每行一个数 $h_i$。\n\n再接下来 $q$ 行，每行两个整数 $a$ 和 $b$，表示询问第 $a$ 头牛到第 $b$ 头牛里的最高和最低的牛的身高差。", "outputFormat": "输出共 $q$ 行，对于每一组询问，输出每一组中最高和最低的牛的身高差。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[USACO07JAN] Balanced Lineup G", "background": null, "description": "For the daily milking, Farmer John's $N$ cows ($1 \\le N \\le 5 \\times 10^4$) always line up in the same order. One day Farmer John decides to organize a game of Ultimate Frisbee with some of the cows. To keep things simple, he will take a contiguous range of cows from the milking lineup to play the game. However, for all the cows to have fun they should not differ too much in height.\n\nFarmer John has made a list of $Q$ ($1 \\le Q \\le 1.8 \\times 10^5$) potential groups of cows and their heights ($1 \\le \\text{height} \\le 10^6$). For each group, he wants your help to determine the difference in height between the shortest and the tallest cow in the group.", "inputFormat": "Line $1$: Two space-separated integers, $N$ and $Q$.\n\nLines $2 \\dots N+1$: Line $i+1$ contains a single integer that is the height of cow $i$.\n\nLines $N+2 \\dots N+Q+1$: Two integers $A$ and $B$ ($1 \\le A \\le B \\le N$), representing the range of cows from $A$ to $B$ inclusive.", "outputFormat": "Lines $1 \\dots Q$: Each line contains a single integer that is a response to a reply and indicates the difference in height between the tallest and shortest cow in the range.", "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO07JAN] Balanced Lineup G", "background": null, "description": "每天，农夫 John 的 $n\\ (1\\le n\\le 5\\times 10^4)$ 头牛总是按同一序列排队。\n\n有一天，John 决定让一些牛们玩一场飞盘比赛。他准备找一群在队列中位置连续的牛来进行比赛。但是为了避免水平悬殊，牛的身高不应该相差太大。John 准备了 $q\\ (1\\le q\\le 1.8\\times10^5)$ 个可能的牛的选择和所有牛的身高 $h_i\\ (1\\le h_i\\le 10^6,1\\le i\\le n)$。他想知道每一组里面最高和最低的牛的身高差。", "inputFormat": "第一行两个数 $n,q$。\n\n接下来 $n$ 行，每行一个数 $h_i$。\n\n再接下来 $q$ 行，每行两个整数 $a$ 和 $b$，表示询问第 $a$ 头牛到第 $b$ 头牛里的最高和最低的牛的身高差。", "outputFormat": "输出共 $q$ 行，对于每一组询问，输出每一组中最高和最低的牛的身高差。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2881", "type": "P", "difficulty": 4, "samples": [["5 5\n2 1\n1 5\n2 3\n1 4\n3 4", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "USACO"], "title": "[USACO07MAR] Ranking the Cows G", "background": null, "description": "FJ 想按照奶牛产奶的能力给她们排序。现在已知有 $N$ 头奶牛（$1\\le N\\le {10}^3$）。FJ 通过比较，已经知道了 $M$（$1 \\le M \\le {10}^4$）对相对关系。每一对关系表示为 `X Y`，意指奶牛 $X$ 的产奶能力强于 $Y$。现在 FJ 想要知道，他至少还要知道多少对关系才能完成整个排序。", "inputFormat": "第一行，两个正整数 $N$ 和 $M$。\n\n以下 $M$ 行，每行两个正整数 $X$ 和 $Y$，表示第 $X$ 只奶牛的产奶能力强于第 $Y$ 只。", "outputFormat": "只输出一行，一个非负整数，表示至少还需要知道的关系对数。特别地，如果 FJ 已经可以知道所有奶牛的产奶能力排序，输出 `0`。", "hint": "### 样例解释\n\n我们用 $C_i$ 表示第 $i$ 头奶牛的产奶能力。\n\n根据给出的 $5$ 组关系，FJ 已经能知道 $C_2 > C_1 > C_5$ 且 $C_2 > C_3 > C_4$，因此第 $2$ 只奶牛的产奶能力最高。接着 FJ 需要知道 $C_1$ 和 $C_3$ 的大小关系才能知道哪只奶牛的产奶能力第二高。FJ 还需要知道 $C_4$ 和 $C_5$ 的大小关系和 $C_5$ 和 $C_3$ 的关系才能完全确定顺序。可以证明没有询问次数比 $3$ 次更少的方案了。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07MAR] Ranking the Cows G", "background": "", "description": "Each of Farmer John's N cows (1 ≤ N ≤ 1,000) produces milk at a different positive rate, and FJ would like to order his cows according to these rates from the fastest milk producer to the slowest.\n\nFJ has already compared the milk output rate for M (1 ≤ M ≤ 10,000) pairs of cows. He wants to make a list of C additional pairs of cows such that, if he now compares those C pairs, he will definitely be able to deduce the correct ordering of all N cows. Please help him determine the minimum value of C for which such a list is possible.", "inputFormat": "Line 1: Two space-separated integers: N and M\n\n\nLines 2..M+1: Two space-separated integers, respectively: X and Y. Both X and Y are in the range 1...N and describe a comparison where cow X was ranked higher than cow Y.", "outputFormat": "Line 1: A single integer that is the minimum value of C.", "hint": "From the information in the 5 test results, Farmer John knows that since cow 2 > cow 1 > cow 5 and cow 2 > cow 3 > cow 4, cow 2 has the highest rank. However, he needs to know whether cow 1 > cow 3 to determine the cow with the second highest rank. Also, he will need one more question to determine the ordering between cow 4 and cow 5. After that, he will need to know if cow 5 > cow 3 if cow 1 has higher rank than cow 3. He will have to ask three questions in order to be sure he has the rankings: \"Is cow 1 > cow 3?  Is cow 4 > cow 5? Is cow 5 > cow 3?\"", "locale": "en"}, "zh-CN": {"title": "[USACO07MAR] Ranking the Cows G", "background": null, "description": "FJ 想按照奶牛产奶的能力给她们排序。现在已知有 $N$ 头奶牛（$1\\le N\\le {10}^3$）。FJ 通过比较，已经知道了 $M$（$1 \\le M \\le {10}^4$）对相对关系。每一对关系表示为 `X Y`，意指奶牛 $X$ 的产奶能力强于 $Y$。现在 FJ 想要知道，他至少还要知道多少对关系才能完成整个排序。", "inputFormat": "第一行，两个正整数 $N$ 和 $M$。\n\n以下 $M$ 行，每行两个正整数 $X$ 和 $Y$，表示第 $X$ 只奶牛的产奶能力强于第 $Y$ 只。", "outputFormat": "只输出一行，一个非负整数，表示至少还需要知道的关系对数。特别地，如果 FJ 已经可以知道所有奶牛的产奶能力排序，输出 `0`。", "hint": "### 样例解释\n\n我们用 $C_i$ 表示第 $i$ 头奶牛的产奶能力。\n\n根据给出的 $5$ 组关系，FJ 已经能知道 $C_2 > C_1 > C_5$ 且 $C_2 > C_3 > C_4$，因此第 $2$ 只奶牛的产奶能力最高。接着 FJ 需要知道 $C_1$ 和 $C_3$ 的大小关系才能知道哪只奶牛的产奶能力第二高。FJ 还需要知道 $C_4$ 和 $C_5$ 的大小关系和 $C_5$ 和 $C_3$ 的关系才能完全确定顺序。可以证明没有询问次数比 $3$ 次更少的方案了。", "locale": "zh-CN"}}}
{"pid": "P2882", "type": "P", "difficulty": 4, "samples": [["7\nB\nB\nF\nB\nF\nB\nB", "3 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2007", "USACO", "枚举", "差分"], "title": "[USACO07MAR] Face The Right Way G", "background": null, "description": "$N$ 头牛排成一列。每头牛要么向前要么向后。为了让所有牛都面向前方，农夫每次可以将 $K$ 头连续的牛转向（$1 \\le K \\le N$），求最小的操作次数 $M$ 和相应的最小 $K$。", "inputFormat": "第一行一个正整数 $N$。\n\n下面 $N$ 行，每行一个字符 `F` 或 `B`，表示一头奶牛的初始朝向。（`F` 为朝前，`B` 为朝后）", "outputFormat": "请在一行输出两个数字 $K$ 和 $M$，用空格分开。", "hint": "样例解释：$K=3$，$M=3$，$3$ 次操作分别让奶牛 $1/2/3,\\ \\ 3/4/5,\\ \\ 5/6/7$ 转向。\n\n\n---\n\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5000$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07MAR] Face The Right Way G", "background": null, "description": "Farmer John has arranged his N (1 ≤ N ≤ 5,000) cows in a row and many of them are facing forward, like good cows. Some of them are facing backward, though, and he needs them all to face forward to make his life perfect.\n\nFortunately, FJ recently bought an automatic cow turning machine. Since he purchased the discount model, it must be irrevocably preset to turn K (1 ≤ K ≤ N) cows at once, and it can only turn cows that are all standing next to each other in line. Each time the machine is used, it reverses the facing direction of a contiguous group of K cows in the line (one cannot use it on fewer than K cows, e.g., at the either end of the line of cows). Each cow remains in the same *location* as before, but ends up facing the *opposite direction*. A cow that starts out facing forward will be turned backward by the machine and vice-versa.\n\nBecause FJ must pick a single, never-changing value of K, please help him determine the minimum value of K that minimizes the number of operations required by the machine to make all the cows face forward. Also determine M, the minimum number of machine operations required to get all the cows facing forward using that value of K.", "inputFormat": "Line 1: A single integer: N\n\nLines 2..N+1: Line i+1 contains a single character, F or B, indicating whether cow i is facing forward or backward.", "outputFormat": "Line 1: Two space-separated integers: K and M", "hint": "For K = 3, the machine must be operated three times: turn cows (1,2,3), (3,4,5), and finally (5,6,7)", "locale": "en"}, "zh-CN": {"title": "[USACO07MAR] Face The Right Way G", "background": null, "description": "$N$ 头牛排成一列。每头牛要么向前要么向后。为了让所有牛都面向前方，农夫每次可以将 $K$ 头连续的牛转向（$1 \\le K \\le N$），求最小的操作次数 $M$ 和相应的最小 $K$。", "inputFormat": "第一行一个正整数 $N$。\n\n下面 $N$ 行，每行一个字符 `F` 或 `B`，表示一头奶牛的初始朝向。（`F` 为朝前，`B` 为朝后）", "outputFormat": "请在一行输出两个数字 $K$ 和 $M$，用空格分开。", "hint": "样例解释：$K=3$，$M=3$，$3$ 次操作分别让奶牛 $1/2/3,\\ \\ 3/4/5,\\ \\ 5/6/7$ 转向。\n\n\n---\n\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5000$。", "locale": "zh-CN"}}}
{"pid": "P2883", "type": "P", "difficulty": 3, "samples": [["7 7\n1 3\n3 4\n3 5\n4 6\n2 3\n5 6\n6 7", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "2007", "USACO", "深度优先搜索 DFS", "拓扑排序"], "title": "[USACO07MAR] Cow Traffic S", "background": null, "description": "随着牛的数量增加，农场的道路的拥挤现象十分严重，特别是在每天晚上的挤奶时间。为了解决这个问题，FJ 决定研究这个问题，以能找到导致拥堵现象的瓶颈所在。\n\n\n牧场共有 $M$ 条单向道路，每条道路连接着两个不同的交叉路口，为了方便研究，FJ 将这些交叉路口编号为 $1\\sim N$，而牛圈位于交叉路口 $N$。任意一条单向道路的方向一定是是从编号低的路口到编号高的路口，因此农场中不会有环型路径。同时，可能存在某两个交叉路口不止一条单向道路径连接的情况。\n\n\n在挤奶时间到来的时候，奶牛们开始从各自的放牧地点回到牛圈。放牧地点是指那些没有道路连接进来的路口（入度为 $0$ 的顶点）。\n\n\n现在请你帮助 FJ 通过计算从放牧点到达牛圈的路径数目来找到最繁忙的道路，即求出所有可行路径中通过某条道路的路径数的最大值。保证答案不会超过 32 位有符号整数的范围。", "inputFormat": "第一行两个正整数 $N,M$。\n\n下面 $M$ 行，每行两个正整数 $U_i,V_i$，表示一条有向道路 $U_i \\to V_i$。", "outputFormat": "一行一个整数表示答案。", "hint": "样例解释：\n\n最繁忙的道路是 $6\\to 7$，四条经过这条边的路径如下。\n\n```plain\n1 -> 3 -> 4 -> 6 -> 7\n1 -> 3 -> 5 -> 6 -> 7\n2 -> 3 -> 4 -> 6 -> 7\n2 -> 3 -> 5 -> 6 -> 7\n```\n\n\n---\n\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5 \\times 10^3$，$1 \\le M \\le 5 \\times 10^4$，$1 \\le U_i,V_i \\le N$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07MAR] Cow Traffic S", "background": null, "description": "The bovine population boom down on the farm has caused serious congestion on the cow trails leading to the barn. Farmer John has decided to conduct a study to find the bottlenecks in order to relieve the 'traffic jams' at milking time.\n\nThe pasture contains a network of M (1 ≤ M ≤ 50,000) one-way trails, each of which connects exactly two different intersections from the set of N (1 ≤ N ≤ 5,000) intersections conveniently numbered 1..N; the barn is at intersection number N. Each trail connects one intersection point to another intersection point with a higher number. As a result, there are no cycles and, as they say on the farm, all trails lead to the barn. A pair of intersection points might be connected by more than one trail.\n\nDuring milking time rush hour, the cows start from their respective grazing locations and head to the barn. The grazing locations are exactly those intersection points with no trails connecting into them. Each cow traverses a 'path', which is defined as a sequence of trails from a grazing location to the barn.\n\nHelp FJ finding the busiest trail(s) by computing the largest number of possible paths that contain any one trail. The answer is guaranteed to fit in a signed 32-bit integer.", "inputFormat": "Line 1: Two space-separated integers: N and M.\n\nLines 2..M+1: Two space-separated intersection points.", "outputFormat": "Line 1: The maximum number of paths passing through any one trail.", "hint": "Here are the four possible paths that lead to the barn:\n\n1 3 4 6 7\n\n1 3 5 6 7\n\n2 3 4 6 7\n\n2 3 5 6 7", "locale": "en"}, "zh-CN": {"title": "[USACO07MAR] Cow Traffic S", "background": null, "description": "随着牛的数量增加，农场的道路的拥挤现象十分严重，特别是在每天晚上的挤奶时间。为了解决这个问题，FJ 决定研究这个问题，以能找到导致拥堵现象的瓶颈所在。\n\n\n牧场共有 $M$ 条单向道路，每条道路连接着两个不同的交叉路口，为了方便研究，FJ 将这些交叉路口编号为 $1\\sim N$，而牛圈位于交叉路口 $N$。任意一条单向道路的方向一定是是从编号低的路口到编号高的路口，因此农场中不会有环型路径。同时，可能存在某两个交叉路口不止一条单向道路径连接的情况。\n\n\n在挤奶时间到来的时候，奶牛们开始从各自的放牧地点回到牛圈。放牧地点是指那些没有道路连接进来的路口（入度为 $0$ 的顶点）。\n\n\n现在请你帮助 FJ 通过计算从放牧点到达牛圈的路径数目来找到最繁忙的道路，即求出所有可行路径中通过某条道路的路径数的最大值。保证答案不会超过 32 位有符号整数的范围。", "inputFormat": "第一行两个正整数 $N,M$。\n\n下面 $M$ 行，每行两个正整数 $U_i,V_i$，表示一条有向道路 $U_i \\to V_i$。", "outputFormat": "一行一个整数表示答案。", "hint": "样例解释：\n\n最繁忙的道路是 $6\\to 7$，四条经过这条边的路径如下。\n\n```plain\n1 -> 3 -> 4 -> 6 -> 7\n1 -> 3 -> 5 -> 6 -> 7\n2 -> 3 -> 4 -> 6 -> 7\n2 -> 3 -> 5 -> 6 -> 7\n```\n\n\n---\n\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5 \\times 10^3$，$1 \\le M \\le 5 \\times 10^4$，$1 \\le U_i,V_i \\le N$。", "locale": "zh-CN"}}}
{"pid": "P2884", "type": "P", "difficulty": 3, "samples": [["7 5\n100\n400\n300\n100\n500\n101\n400", "500"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "USACO"], "title": "[USACO07MAR] Monthly Expense S", "background": null, "description": "给定一个 $n$ 项的正整数序列 $\\{a_n\\}$，请找出满足以下条件的最小的正整数 $S$：存在一种将 $\\{a_n\\}$ 划分成 $m$ 段的方案，使得每一段中所有数字的和都不大于 $S$。", "inputFormat": "第一行两个正整数 $n,m$。\n\n下面 $n$ 行，每行一个正整数 $a_i$。", "outputFormat": "一行一个正整数表示答案。", "hint": "样例解释：$\\{100,400\\},\\{300,100\\},\\{500\\},\\{101\\},\\{400\\}$ 是一种合法的划分方案。\n\n---\n\n对于 $100\\%$ 的数据，$1 \\le m \\le n \\le 10^5$，$1 \\le a_i \\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07MAR] Monthly Expense S", "background": null, "description": "Farmer John is an astounding accounting wizard and has realized he might run out of money to run the farm. He has already calculated and recorded the exact amount of money (1 ≤ moneyi ≤ 10,000) that he will need to spend each day over the next N (1 ≤ N ≤ 100,000) days.\n\nFJ wants to create a budget for a sequential set of exactly M (1 ≤ M ≤ N) fiscal periods called \"fajomonths\". Each of these fajomonths contains a set of 1 or more consecutive days. Every day is contained in exactly one fajomonth.\n\nFJ's goal is to arrange the fajomonths so as to minimize the expenses of the fajomonth with the highest spending and thus determine his monthly spending limit.", "inputFormat": "Line 1: Two space-separated integers: N and M\n\nLines 2..N+1: Line i+1 contains the number of dollars Farmer John spends on the ith day", "outputFormat": "Line 1: The smallest possible monthly limit Farmer John can afford to live with.", "hint": "If Farmer John schedules the months so that the first two days are a month, the third and fourth are a month, and the last three are their own months, he spends at most $500 in any month. Any other method of scheduling gives a larger minimum monthly limit.", "locale": "en"}, "zh-CN": {"title": "[USACO07MAR] Monthly Expense S", "background": null, "description": "给定一个 $n$ 项的正整数序列 $\\{a_n\\}$，请找出满足以下条件的最小的正整数 $S$：存在一种将 $\\{a_n\\}$ 划分成 $m$ 段的方案，使得每一段中所有数字的和都不大于 $S$。", "inputFormat": "第一行两个正整数 $n,m$。\n\n下面 $n$ 行，每行一个正整数 $a_i$。", "outputFormat": "一行一个正整数表示答案。", "hint": "样例解释：$\\{100,400\\},\\{300,100\\},\\{500\\},\\{101\\},\\{400\\}$ 是一种合法的划分方案。\n\n---\n\n对于 $100\\%$ 的数据，$1 \\le m \\le n \\le 10^5$，$1 \\le a_i \\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2885", "type": "P", "difficulty": 5, "samples": [["5 2\n2\n3\n5\n1\n4", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2007", "USACO", "单调队列"], "title": "[USACO07NOV] Telephone Wire G", "background": "", "description": "Farmer John's cows are getting restless about their poor telephone service; they want FJ to replace the old telephone wire with new, more efficient wire. The new wiring will utilize N (2 ≤ N ≤ 100,000) already-installed telephone poles, each with some heighti meters (1 ≤ heighti ≤ 100). The new wire will connect the tops of each pair of adjacent poles and will incur a penalty cost C × the two poles' height difference for each section of wire where the poles are of different heights (1 ≤ C ≤ 100). The poles, of course, are in a certain sequence and can not be moved.\n\nFarmer John figures that if he makes some poles taller he can reduce his penalties, though with some other additional cost. He can add an integer X number of meters to a pole at a cost of X2.\n\nHelp Farmer John determine the cheapest combination of growing pole heights and connecting wire so that the cows can get their new and improved service.", "inputFormat": "* Line 1: Two space-separated integers: N and C\n\n* Lines 2..N+1: Line i+1 contains a single integer: heighti", "outputFormat": "* Line 1: The minimum total amount of money that it will cost Farmer John to attach the new telephone wire.", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO07NOV] Telephone Wire G", "background": "", "description": "Farmer John's cows are getting restless about their poor telephone service; they want FJ to replace the old telephone wire with new, more efficient wire. The new wiring will utilize N (2 ≤ N ≤ 100,000) already-installed telephone poles, each with some heighti meters (1 ≤ heighti ≤ 100). The new wire will connect the tops of each pair of adjacent poles and will incur a penalty cost C × the two poles' height difference for each section of wire where the poles are of different heights (1 ≤ C ≤ 100). The poles, of course, are in a certain sequence and can not be moved.\n\nFarmer John figures that if he makes some poles taller he can reduce his penalties, though with some other additional cost. He can add an integer X number of meters to a pole at a cost of X2.\n\nHelp Farmer John determine the cheapest combination of growing pole heights and connecting wire so that the cows can get their new and improved service.", "inputFormat": "* Line 1: Two space-separated integers: N and C\n\n* Lines 2..N+1: Line i+1 contains a single integer: heighti", "outputFormat": "* Line 1: The minimum total amount of money that it will cost Farmer John to attach the new telephone wire.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO07NOV] Telephone Wire G", "background": null, "description": "农夫约翰的奶牛们对她们那糟糕的电话服务感到不安。她们想让 FJ 用更高效的新电话线代替旧的。新电话线将利用 $n$ 个已经安装好的电话杆，每一个电话杆高 $h_i$ 米。新电话线将连接每对相邻电线杆的顶部，当相邻两根电线杆 $i$ 与 $i + 1$ 的高度不同时，新电话线会产生 $c \\times \\lvert h_i - h_{i + 1} \\rvert$ 的成本。电线杆的顺序是固定的，不能移动。\n\n农夫约翰发现，他可以通过提高某些电线杆的高度来减少成本。他可以花费 $x^2$ 的成本将第 $i$ 根电线杆提高 $x$ 米。\n\n请你帮助农夫约翰确定只提高高度和连接电线最便宜的方案使得奶牛们用上更好的电话服务。", "inputFormat": "第一行包含两个整数 $n, c$，相邻的整数之间使用一个空格分隔。\n\n接下来 $n$ 行，第 $i$ 行包含一个整数 $h_i$。", "outputFormat": "一个整数，表示农夫约翰安装新电话线所花费的最少金额。", "hint": "对于 $100\\%$ 的数据，$2 \\le n \\le 100000$，$1 \\le c, h_i \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P2886", "type": "P", "difficulty": 4, "samples": [["2 6 6 4\n11 4 6\n4 4 8\n8 4 9\n6 6 8\n2 6 9\n3 8 9", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2007", "USACO", "最短路", "矩阵乘法"], "title": "[USACO07NOV] Cow Relays G", "background": "", "description": "For their physical fitness program, N (2 ≤ N ≤ 1,000,000) cows have decided to run a relay race using the T (2 ≤ T ≤ 100) cow trails throughout the pasture.\n\nEach trail connects two different intersections (1 ≤ I1i ≤ 1,000; 1 ≤ I2i ≤ 1,000), each of which is the termination for at least two trails. The cows know the lengthi of each trail (1 ≤ lengthi  ≤ 1,000), the two intersections the trail connects, and they know that no two intersections are directly connected by two different trails. The trails form a structure known mathematically as a graph.\n\nTo run the relay, the N cows position themselves at various intersections (some intersections might have more than one cow). They must position themselves properly so that they can hand off the baton cow-by-cow and end up at the proper finishing place.\n\nWrite a program to help position the cows. Find the shortest path that connects the starting intersection (S) and the ending intersection (E) and traverses exactly N cow trails.\n\n给出一张无向连通图，求S到E经过k条边的最短路。\n", "inputFormat": "\\* Line 1: Four space-separated integers: N, T, S, and E\n\n\\* Lines 2..T+1: Line i+1 describes trail i with three space-separated integers: lengthi , I1i , and I2i\n", "outputFormat": "\\* Line 1: A single integer that is the shortest distance from intersection S to intersection E that traverses exactly N cow trails.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO07NOV] Cow Relays G", "background": "", "description": "For their physical fitness program, N (2 ≤ N ≤ 1,000,000) cows have decided to run a relay race using the T (2 ≤ T ≤ 100) cow trails throughout the pasture.\n\nEach trail connects two different intersections (1 ≤ I1i ≤ 1,000; 1 ≤ I2i ≤ 1,000), each of which is the termination for at least two trails. The cows know the lengthi of each trail (1 ≤ lengthi  ≤ 1,000), the two intersections the trail connects, and they know that no two intersections are directly connected by two different trails. The trails form a structure known mathematically as a graph.\n\nTo run the relay, the N cows position themselves at various intersections (some intersections might have more than one cow). They must position themselves properly so that they can hand off the baton cow-by-cow and end up at the proper finishing place.\n\nWrite a program to help position the cows. Find the shortest path that connects the starting intersection (S) and the ending intersection (E) and traverses exactly N cow trails.\n\n给出一张无向连通图，求S到E经过k条边的最短路。\n", "inputFormat": "\\* Line 1: Four space-separated integers: N, T, S, and E\n\n\\* Lines 2..T+1: Line i+1 describes trail i with three space-separated integers: lengthi , I1i , and I2i\n", "outputFormat": "\\* Line 1: A single integer that is the shortest distance from intersection S to intersection E that traverses exactly N cow trails.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO07NOV] Cow Relays G", "background": null, "description": "给定一张 $T$ 条边的无向连通图，求从 $S$ 到 $E$ 经过 $N$ 条边的最短路长度。", "inputFormat": "第一行四个正整数 $N,T,S,E$ ，意义如题面所示。\n\n接下来 $T$ 行每行三个正整数 $w,u,v$ ，分别表示路径的长度，起点和终点。", "outputFormat": "一行一个整数表示图中从 $S$ 到 $E$ 经过 $N$ 条边的最短路长度。", "hint": "对于所有的数据，保证 $1\\le N\\le 10^6$，$2\\le T\\le 100$。\n\n所有的边保证 $1\\le u,v\\le 1000$，$1\\le w\\le 1000$ 且不存在重边，自环。\n\n所有的顶点保证至少连接两条边。", "locale": "zh-CN"}}}
{"pid": "P2887", "type": "P", "difficulty": 3, "samples": [["3 2\n3 10\n2 5\n1 5\n6 2\n4 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "贪心", "2007", "USACO"], "title": "[USACO07NOV] Sunscreen G", "background": null, "description": "有 $C$ 头奶牛进行日光浴，第 $i$ 头奶牛需要 $minSPF[i]$ 到 $maxSPF[i]$ 单位强度之间的阳光。\n\n每头奶牛在日光浴前必须涂防晒霜，防晒霜有 $L$ 种，涂上第 $i$ 种之后，身体接收到的阳光强度就会稳定为 $SPF[i]$，第 $i$ 种防晒霜有 $cover[i]$ 瓶。\n\n求最多可以满足多少头奶牛进行日光浴。", "inputFormat": "第一行输入整数 $C$ 和 $L$。\n\n接下来的 $C$ 行，按次序每行输入一头牛的 $minSPF$ 和 $maxSPF$ 值，即第 $i$ 行输入 $minSPF[i]$ 和 $maxSPF[i]$。\n\n再接下来的 $L$ 行，按次序每行输入一种防晒霜的 $SPF$ 和 $cover$ 值，即第 $i$ 行输入 $SPF[i]$ 和 $cover[i]$。\n\n每行的数据之间用空格隔开。", "outputFormat": "输出一个整数，代表最多可以满足奶牛日光浴的奶牛数目。", "hint": "样例解释：给第一头奶牛涂第一种防晒霜，第二头奶牛涂第二种防晒霜。\n\n\n---\n\n\n对于 $100\\%$ 的数据，$1\\le C,L\\le 2500$，$1\\le minSPF[i]\\le maxSPF[i]\\le 1000$，$1\\le SPF[i]\\le 1000$，$1\\le cover[i]\\le 2500$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07NOV] Sunscreen G", "background": null, "description": "To avoid unsightly burns while tanning, each of the C (1 ≤ C ≤ 2500) cows must cover her hide with sunscreen when they're at the beach. Cow i has a minimum and maximum SPF rating (1 ≤ minSPFi ≤ 1,000; minSPFi ≤ maxSPFi ≤ 1,000) that will work. If the SPF rating is too low, the cow suffers sunburn; if the SPF rating is too high, the cow doesn't tan at all........\n\nThe cows have a picnic basket with L (1 ≤ L ≤ 2500) bottles of sunscreen lotion, each bottle i with an SPF rating SPFi (1 ≤ SPFi ≤ 1,000). Lotion bottle i can cover coveri cows with lotion. A cow may lotion from only one bottle.\n\nWhat is the maximum number of cows that can protect themselves while tanning given the available lotions?", "inputFormat": "* Line 1: Two space-separated integers: C and L\n\n* Lines 2..C+1: Line i describes cow i's lotion requires with two integers: minSPFi and maxSPFi\n\n* Lines C+2..C+L+1: Line i+C+1 describes a sunscreen lotion bottle i with space-separated integers: SPFi and coveri", "outputFormat": "A single line with an integer that is the maximum number of cows that can be protected while tanning", "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO07NOV] Sunscreen G", "background": null, "description": "有 $C$ 头奶牛进行日光浴，第 $i$ 头奶牛需要 $minSPF[i]$ 到 $maxSPF[i]$ 单位强度之间的阳光。\n\n每头奶牛在日光浴前必须涂防晒霜，防晒霜有 $L$ 种，涂上第 $i$ 种之后，身体接收到的阳光强度就会稳定为 $SPF[i]$，第 $i$ 种防晒霜有 $cover[i]$ 瓶。\n\n求最多可以满足多少头奶牛进行日光浴。", "inputFormat": "第一行输入整数 $C$ 和 $L$。\n\n接下来的 $C$ 行，按次序每行输入一头牛的 $minSPF$ 和 $maxSPF$ 值，即第 $i$ 行输入 $minSPF[i]$ 和 $maxSPF[i]$。\n\n再接下来的 $L$ 行，按次序每行输入一种防晒霜的 $SPF$ 和 $cover$ 值，即第 $i$ 行输入 $SPF[i]$ 和 $cover[i]$。\n\n每行的数据之间用空格隔开。", "outputFormat": "输出一个整数，代表最多可以满足奶牛日光浴的奶牛数目。", "hint": "样例解释：给第一头奶牛涂第一种防晒霜，第二头奶牛涂第二种防晒霜。\n\n\n---\n\n\n对于 $100\\%$ 的数据，$1\\le C,L\\le 2500$，$1\\le minSPF[i]\\le maxSPF[i]\\le 1000$，$1\\le SPF[i]\\le 1000$，$1\\le cover[i]\\le 2500$。", "locale": "zh-CN"}}}
