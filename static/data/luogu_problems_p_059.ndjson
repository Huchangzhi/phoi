{"pid": "P2186", "type": "P", "difficulty": 3, "samples": [["NUM 600000000\nADD\nEND\n3\n0\n600000000\n1\n", "600000000\nERROR\n600000001"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "小 Z 的栈函数", "background": "", "description": "小 Z 最近发现了一个神奇的机器，这个机器的所有操作都是通过维护一个栈来完成的，它支持如下 11 个操作：\n\n- $\\texttt{NUM} ~x$：栈顶放入 $x$。\n- $\\texttt{POP}$：抛弃栈顶元素。\n- $\\texttt{INV}$：将栈顶元素取出，然后放入它的相反数。\n- $\\texttt{DUP}$：再放入一个和栈顶元素相同的数。\n- $\\texttt{SWP}$：交换栈顶的两个元素。\n- $\\texttt{ADD}$：取出栈顶的两个元素，两元素相加，所得结果放入栈内。\n- $\\texttt{SUB}$：取出栈顶的两个元素，第二个元素减去第一个元素，所得结果放入栈内。\n- $\\texttt{MUL}$：取出栈顶的两个元素，两元素相乘，所得结果放入栈内。\n- $\\texttt{DIV}$：取出栈顶的两个元素，第二个元素整除以第一个元素，所得结果放入栈内。\n- $\\texttt{MOD}$：取出栈顶的两个元素，第二个元素取模以第一个元素，所得结果放入栈内。\n- $\\texttt{END}$：结束这个程序。\n\n然后，小 Z 用上面的 11 种操作写了一个一元函数 $f(x)$。$x$ 就是放入栈里面第一个初始元素。然后经过这个函数的一系列操作，当函数结束的时候，正常情况下，栈里面会有唯一的一个元素。剩下的这个元素就作为函数 $f(x)$ 的返回值。\n\n小 Z 有 $n$ 个询问，询问每个值 $x$ 经过上述函数所映射出的 $f(x)$ 是多少。但是这个由于机器太老了，跑起东西来太慢了，小 Z 又是一个急性子，所以请你们写一个程序，来帮助小 Z 计算他查询的 $f(x)$。\n\n还有，由于这台机器太破了，所以如果运算过程中有数字的绝对值大于 $1000000000$，机器将产生故障。\n", "inputFormat": "输入首先有若干行，仅包含上述 11 个操作，用来描述函数 $f(x)$ 的操作，函数的结束保证以 $\\texttt{END}$ 结尾.\n\n接下来有一个整数，表示询问的个数 $n$。\n\n接下来 $n$ 行，每行一个整数 $x$，表示询问 $f(x)$ 的值。\n\n**输入数据不保证合法**。\n", "outputFormat": "输出 $n$ 行，每行表示一个询问的结果。按如下规则输出：\n\n- 如果最后栈内不是一个元素，输出 `ERROR`。\n- 如果运算过程中有数字的绝对值大于 $1000000000$，输出 `ERROR`。\n- 如果输入数据不合法，导致中途退出，输出 `ERROR`。\n- 否则输出对应的 $f(x)$。\n", "hint": "### 数据规模与约定\n\n对于全部测试点，保证函数的操作步数不超过 $2000$，$1 \\leq n \\leq 2000$，$|x| \\leq 10^{9}$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Stack Function", "background": "", "description": "Xiao Z recently found a magical machine whose operations are all done by maintaining a stack. It supports the following 11 operations:\n\n- $\\texttt{NUM} ~x$: Push $x$ onto the top of the stack.\n- $\\texttt{POP}$: Discard the top element of the stack.\n- $\\texttt{INV}$: Take out the top element and push its negation.\n- $\\texttt{DUP}$: Push another number equal to the top element.\n- $\\texttt{SWP}$: Swap the top two elements.\n- $\\texttt{ADD}$: Pop the top two elements, add them, and push the result.\n- $\\texttt{SUB}$: Pop the top two elements, subtract the first popped from the second popped, and push the result.\n- $\\texttt{MUL}$: Pop the top two elements, multiply them, and push the result.\n- $\\texttt{DIV}$: Pop the top two elements, integer-divide the second popped by the first popped, and push the result.\n- $\\texttt{MOD}$: Pop the top two elements, take the second popped modulo the first popped, and push the result.\n- $\\texttt{END}$: Terminate this program.\n\nThen, Xiao Z used the above 11 operations to write a unary function $f(x)$. The value $x$ is the initial element pushed into the stack. After a sequence of operations, when the function ends, normally the stack will contain exactly one element. The remaining element is taken as the return value of $f(x)$.\n\nXiao Z has $n$ queries. For each value $x$, he asks what $f(x)$ is as computed by the function above. However, the machine is too old and runs too slowly, and Xiao Z is impatient, so please write a program to help him compute his queries $f(x)$.\n\nAlso, because this machine is too fragile, if during the computation any absolute value exceeds $1000000000$, the machine will fail.", "inputFormat": "The input first contains several lines, each consisting of one of the 11 operations above, describing the operations of the function $f(x)$. The function is guaranteed to end with $\\texttt{END}$.\n\nThen an integer $n$, the number of queries.\n\nThen $n$ lines follow, each with an integer $x$, representing a query for the value $f(x)$.\n\nThe input is not guaranteed to be valid.", "outputFormat": "Output $n$ lines, each representing the result of one query, following these rules:\n\n- If the stack does not end with exactly one element, output `ERROR`.\n- If during computation any absolute value exceeds $1000000000$, output `ERROR`.\n- If the input data is invalid and causes an early exit, output `ERROR`.\n- Otherwise, output the corresponding $f(x)$.", "hint": "Constraints and Notes\n\nFor all test points, the number of function operations does not exceed $2000$, $1 \\leq n \\leq 2000$, and $|x| \\leq 10^{9}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小 Z 的栈函数", "background": "", "description": "小 Z 最近发现了一个神奇的机器，这个机器的所有操作都是通过维护一个栈来完成的，它支持如下 11 个操作：\n\n- $\\texttt{NUM} ~x$：栈顶放入 $x$。\n- $\\texttt{POP}$：抛弃栈顶元素。\n- $\\texttt{INV}$：将栈顶元素取出，然后放入它的相反数。\n- $\\texttt{DUP}$：再放入一个和栈顶元素相同的数。\n- $\\texttt{SWP}$：交换栈顶的两个元素。\n- $\\texttt{ADD}$：取出栈顶的两个元素，两元素相加，所得结果放入栈内。\n- $\\texttt{SUB}$：取出栈顶的两个元素，第二个元素减去第一个元素，所得结果放入栈内。\n- $\\texttt{MUL}$：取出栈顶的两个元素，两元素相乘，所得结果放入栈内。\n- $\\texttt{DIV}$：取出栈顶的两个元素，第二个元素整除以第一个元素，所得结果放入栈内。\n- $\\texttt{MOD}$：取出栈顶的两个元素，第二个元素取模以第一个元素，所得结果放入栈内。\n- $\\texttt{END}$：结束这个程序。\n\n然后，小 Z 用上面的 11 种操作写了一个一元函数 $f(x)$。$x$ 就是放入栈里面第一个初始元素。然后经过这个函数的一系列操作，当函数结束的时候，正常情况下，栈里面会有唯一的一个元素。剩下的这个元素就作为函数 $f(x)$ 的返回值。\n\n小 Z 有 $n$ 个询问，询问每个值 $x$ 经过上述函数所映射出的 $f(x)$ 是多少。但是这个由于机器太老了，跑起东西来太慢了，小 Z 又是一个急性子，所以请你们写一个程序，来帮助小 Z 计算他查询的 $f(x)$。\n\n还有，由于这台机器太破了，所以如果运算过程中有数字的绝对值大于 $1000000000$，机器将产生故障。\n", "inputFormat": "输入首先有若干行，仅包含上述 11 个操作，用来描述函数 $f(x)$ 的操作，函数的结束保证以 $\\texttt{END}$ 结尾.\n\n接下来有一个整数，表示询问的个数 $n$。\n\n接下来 $n$ 行，每行一个整数 $x$，表示询问 $f(x)$ 的值。\n\n**输入数据不保证合法**。\n", "outputFormat": "输出 $n$ 行，每行表示一个询问的结果。按如下规则输出：\n\n- 如果最后栈内不是一个元素，输出 `ERROR`。\n- 如果运算过程中有数字的绝对值大于 $1000000000$，输出 `ERROR`。\n- 如果输入数据不合法，导致中途退出，输出 `ERROR`。\n- 否则输出对应的 $f(x)$。\n", "hint": "### 数据规模与约定\n\n对于全部测试点，保证函数的操作步数不超过 $2000$，$1 \\leq n \\leq 2000$，$|x| \\leq 10^{9}$。\n", "locale": "zh-CN"}}}
{"pid": "P2187", "type": "P", "difficulty": 5, "samples": [["4\nnoip\n2\nip\nmo", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "小Z的笔记", "background": "小Z由于写情书浪费了太多时间，导致他外语课都没有好好听。为什么是外语课而不是英语课？因为小Z也不知道这门课学的是什么语言。\n", "description": "由于没有好好听课，小Z的笔记全都记的杂乱无章，出现了好多错误的地方。小Z的笔记是如此的糟糕，以至于他只记了一句例句，而且自己还不知道是什么意思……然后在老师讲语法的时候，小Z又零星的记了几个字母对，老师说，这几个字母对是绝对不能相邻的，而且相邻是不关心字母的顺序的，比如老师说，“ab”不能相邻，那么相同的，“ba”也不能相邻。\n\n现在小Z到家了，打开了上课的笔记，然后他发现笔记有很多自相矛盾的地方：为什么下面的不能相邻的字母对会出现在上面的例句里面呢？纠结再三，小Z觉得下面的东西相对比较简单，所以记错的概率比较小……他决定在上面的例句里面擦掉几个字母，使得句子变得合法。\n\n但是小Z还有其他作业要做呢，来不及整理笔记了，就把这个艰巨的任务留给了大家，请问大家，小Z最少要擦掉几个字母，才能使得上面的例句合法？\n", "inputFormat": "第一行：一个整数N。\n\n第二行：一个长度为N的字符串，只包含小写字母，代表小Z记下的例句。\n\n第三行：一个整数M，代表不能相邻的字母对的个数。\n\n接下来M行：每行两个小写字母，代表不能相邻的字母对，因为小Z太不认真了，所以可能有重复。\n", "outputFormat": "一行，一个整数，最少要擦除的字母数。\n", "hint": "【数据规模】\n\n对于10%的数据，M=0；\n\n对于另外30%的数据，N<=1000；\n\n对于100%的数据，N<=100000，M<=400。\n", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Notes", "background": "Because Xiao Z wasted too much time writing love letters, he didn’t pay attention in his foreign language class. Why is it a foreign language class and not English? Because Xiao Z doesn’t even know what language this class is about.", "description": "Since he didn’t pay attention, Xiao Z’s notes are a complete mess with lots of mistakes. His notes are so bad that he only wrote down one example sentence, and he doesn’t even know what it means. Later, when the teacher explained grammar, Xiao Z jotted down a few letter pairs, and the teacher said these pairs must never be adjacent. Adjacency is order-insensitive: for example, if the teacher says \"ab\" cannot be adjacent, then \"ba\" is also forbidden.\n\nBack at home, Xiao Z opened his class notes and found many contradictions: why do the forbidden pairs appear in the example sentence above? After thinking it over, he felt the items below are relatively simpler, so they are less likely to be mistaken. He decides to erase some letters from the example sentence above to make the sentence valid.\n\nBut Xiao Z still has other homework to do, so he doesn’t have time to clean up his notes. He leaves this tough task to you: what is the minimum number of letters that Xiao Z must erase to make the example sentence above valid?\n\n# Description", "inputFormat": "The first line: an integer $N$.\n\nThe second line: a string of length $N$, containing only lowercase letters, representing the example sentence Xiao Z wrote down.\n\nThe third line: an integer $M$, the number of forbidden adjacent letter pairs.\n\nThe next $M$ lines: each line contains two lowercase letters, representing a forbidden adjacent pair. Since Xiao Z was careless, duplicates may appear.", "outputFormat": "One line, an integer: the minimum number of letters to erase.", "hint": "Constraints\n\n- For 10% of the testdata, $M = 0$.\n- For another 30% of the testdata, $N \\le 1000$.\n- For 100% of the testdata, $N \\le 100000$, $M \\le 400$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的笔记", "background": "小Z由于写情书浪费了太多时间，导致他外语课都没有好好听。为什么是外语课而不是英语课？因为小Z也不知道这门课学的是什么语言。\n", "description": "由于没有好好听课，小Z的笔记全都记的杂乱无章，出现了好多错误的地方。小Z的笔记是如此的糟糕，以至于他只记了一句例句，而且自己还不知道是什么意思……然后在老师讲语法的时候，小Z又零星的记了几个字母对，老师说，这几个字母对是绝对不能相邻的，而且相邻是不关心字母的顺序的，比如老师说，“ab”不能相邻，那么相同的，“ba”也不能相邻。\n\n现在小Z到家了，打开了上课的笔记，然后他发现笔记有很多自相矛盾的地方：为什么下面的不能相邻的字母对会出现在上面的例句里面呢？纠结再三，小Z觉得下面的东西相对比较简单，所以记错的概率比较小……他决定在上面的例句里面擦掉几个字母，使得句子变得合法。\n\n但是小Z还有其他作业要做呢，来不及整理笔记了，就把这个艰巨的任务留给了大家，请问大家，小Z最少要擦掉几个字母，才能使得上面的例句合法？\n", "inputFormat": "第一行：一个整数N。\n\n第二行：一个长度为N的字符串，只包含小写字母，代表小Z记下的例句。\n\n第三行：一个整数M，代表不能相邻的字母对的个数。\n\n接下来M行：每行两个小写字母，代表不能相邻的字母对，因为小Z太不认真了，所以可能有重复。\n", "outputFormat": "一行，一个整数，最少要擦除的字母数。\n", "hint": "【数据规模】\n\n对于10%的数据，M=0；\n\n对于另外30%的数据，N<=1000；\n\n对于100%的数据，N<=100000，M<=400。\n", "locale": "zh-CN"}}}
{"pid": "P2188", "type": "P", "difficulty": 5, "samples": [["1 13 1", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数位 DP"], "title": "小Z的 k 紧凑数", "background": null, "description": "小 Z 在草稿纸上列出了很多数，他觉得相邻两位数字差的绝对值不超过 $k$ 的整数特别奇特，称其为 $k$ 紧凑数。\n\n现在小 Z 想知道 $[l,r]$ 内有多少个 $k$ 紧凑数，希望你帮帮他。", "inputFormat": "一行三个整数 $l,r,k$。", "outputFormat": "一行一个整数，表示 $[l.r]$ 内 $k$ 紧凑数的个数。", "hint": "样例解释：$[1,13]$ 内只有 $13$ 不是 $1$ 紧凑数。\n\n\n---\n\n\n对于 $30\\%$ 的数据，$r$ − $l \\le 10^5$。\n\n对于另外 $30\\%$ 的数据，$l=1$，$r$ 为 $10$ 的倍数。\n\n对于 $100\\%$ 的数据，$1 \\le l \\le r \\le 10^{18}$，$0 \\le k \\le 8$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's k-compact numbers", "background": "", "description": "Xiao Z listed many numbers on scratch paper. He calls an integer a $k$-compact number if the absolute difference between every pair of adjacent digits does not exceed $k$.\n\nNow Xiao Z wants to know how many $k$-compact numbers are within $[l, r]$ and asks for your help.", "inputFormat": "A single line with three integers $l, r, k$.", "outputFormat": "A single line containing one integer: the number of $k$-compact numbers in $[l, r]$.", "hint": "Sample explanation: within $[1, 13]$, only $13$ is not a $1$-compact number.\n\nFor $30\\%$ of the testdata, $r - l \\le 10^5$.\n\nFor another $30\\%$ of the testdata, $l = 1$, and $r$ is a multiple of $10$.\n\nFor $100\\%$ of the testdata, $1 \\le l \\le r \\le 10^{18}$, $0 \\le k \\le 8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的 k 紧凑数", "background": null, "description": "小 Z 在草稿纸上列出了很多数，他觉得相邻两位数字差的绝对值不超过 $k$ 的整数特别奇特，称其为 $k$ 紧凑数。\n\n现在小 Z 想知道 $[l,r]$ 内有多少个 $k$ 紧凑数，希望你帮帮他。", "inputFormat": "一行三个整数 $l,r,k$。", "outputFormat": "一行一个整数，表示 $[l.r]$ 内 $k$ 紧凑数的个数。", "hint": "样例解释：$[1,13]$ 内只有 $13$ 不是 $1$ 紧凑数。\n\n\n---\n\n\n对于 $30\\%$ 的数据，$r$ − $l \\le 10^5$。\n\n对于另外 $30\\%$ 的数据，$l=1$，$r$ 为 $10$ 的倍数。\n\n对于 $100\\%$ 的数据，$1 \\le l \\le r \\le 10^{18}$，$0 \\le k \\le 8$。", "locale": "zh-CN"}}}
{"pid": "P2189", "type": "P", "difficulty": 4, "samples": [["5 5 3 2\n1 2\n2 3\n3 1\n1 4\n4 5\n4 2 1\n4 1 2", "No\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论"], "title": "小 Z 的传感器", "background": null, "description": "众所周知，小 Z 家是个豪宅，有 $n$ 个房间，并通过 $m$ 条通道相连（家当然是连通的）。\n\n有一天，小 Y 想趁小 Z 不在偷偷光顾他家，并决定到他家的每个房间至少逛一次。不幸的是，小 Z 家有 $k$ 个房间装了传感器，该传感器会在第一次有人到访的时候返回信息。\n\n当小 Z 回到家时，就发现小 Y 来过了，小 Y 也如实地告诉了小 Z 自己到每个房间至少逛了一次。\n\n然而，小 Z 仔细研究了传感器返回信息的先后顺序，怀疑个别传感器可能返回信息有延迟。\n\n为了验证自己的推断，连同这一次在内，他一共让小 Y 到他家来了 $q$ 次。他想判断每次传感器返回信息的先后顺序是否可能出现，希望你帮帮他。", "inputFormat": "第一行包含四个整数 $n,m,k,q$。\n\n接下来 $m$ 行，每行包含两个整数 $x,y$，表示房间 $x$ 和房间 $y$ 有一条双向通道相连。\n\n接下来 $q$ 行，每行包含 $k$ 个整数，表示每次按先后顺序返回信息的传感器所在房间的编号。", "outputFormat": "$q$ 行，每行包含一个字符串 `Yes` 或 `No`，表示每次传感器返回信息的先后顺序是否可能出现。", "hint": "样例解释：\n\n对于第一组询问，$4 \\to 2$ 必定经过 $1$，所以答案是 `No`。\n\n对于第二组询问，路径 $4 \\to 5 \\to 4 \\to 1 \\to 3 \\to 2 \\to 1 \\to 3$ 符合给定的记录，所以答案是 `Yes`。\n\n---\n\n对于 $10\\%$ 的数据，$n \\le 2$。\n\n对于 $30\\%$ 的数据，$n \\le 3$。\n\n对于 $60\\%$ 的数据，$n \\le 10000，m \\le 20000，k \\le 10$。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le n \\le 10^5$，$1 \\le m \\le 2 \\times 10^5$，$1 \\le q \\le 5$，$1 \\le x,y \\le n$，$x \\neq y$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Sensors", "background": "", "description": "As we all know, Xiao Z lives in a mansion with $n$ rooms, connected by $m$ passages (the house is connected).\n\nOne day, while Xiao Z was away, Xiao Y decided to pay a secret visit and planned to visit each room at least once. Unfortunately, $k$ of the rooms are equipped with sensors, each of which returns a message the first time someone visits it.\n\nWhen Xiao Z came home, he found that Xiao Y had been there, and Xiao Y truthfully told him that he visited each room at least once.\n\nHowever, after carefully examining the order in which the sensors returned messages, Xiao Z suspected that some sensors might have delayed reporting.\n\nTo test his hypothesis, including that time, he had Xiao Y come to his house a total of $q$ times. He wants to determine whether the order of sensor messages for each visit could possibly occur, and asks you to help.", "inputFormat": "The first line contains four integers $n, m, k, q$.\n\nEach of the next $m$ lines contains two integers $x, y$, indicating that rooms $x$ and $y$ are connected by a bidirectional passage.\n\nEach of the next $q$ lines contains $k$ integers, representing the indices of the rooms with sensors, in the order their messages were returned.", "outputFormat": "Output $q$ lines. Each line contains the string `Yes` or `No`, indicating whether the given order of sensor messages could occur.", "hint": "Sample explanation:\n\nFor the first query, $4 \\to 2$ must pass through $1$, so the answer is `No`.\n\nFor the second query, the path $4 \\to 5 \\to 4 \\to 1 \\to 3 \\to 2 \\to 1 \\to 3$ matches the given record, so the answer is `Yes`.\n\n---\n\nConstraints:\n\nFor $10\\%$ of the testdata, $n \\le 2$.\n\nFor $30\\%$ of the testdata, $n \\le 3$.\n\nFor $60\\%$ of the testdata, $n \\le 10000$, $m \\le 20000$, $k \\le 10$.\n\nFor $100\\%$ of the testdata, $1 \\le k \\le n \\le 10^5$, $1 \\le m \\le 2 \\times 10^5$, $1 \\le q \\le 5$, $1 \\le x, y \\le n$, $x \\ne y$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小 Z 的传感器", "background": null, "description": "众所周知，小 Z 家是个豪宅，有 $n$ 个房间，并通过 $m$ 条通道相连（家当然是连通的）。\n\n有一天，小 Y 想趁小 Z 不在偷偷光顾他家，并决定到他家的每个房间至少逛一次。不幸的是，小 Z 家有 $k$ 个房间装了传感器，该传感器会在第一次有人到访的时候返回信息。\n\n当小 Z 回到家时，就发现小 Y 来过了，小 Y 也如实地告诉了小 Z 自己到每个房间至少逛了一次。\n\n然而，小 Z 仔细研究了传感器返回信息的先后顺序，怀疑个别传感器可能返回信息有延迟。\n\n为了验证自己的推断，连同这一次在内，他一共让小 Y 到他家来了 $q$ 次。他想判断每次传感器返回信息的先后顺序是否可能出现，希望你帮帮他。", "inputFormat": "第一行包含四个整数 $n,m,k,q$。\n\n接下来 $m$ 行，每行包含两个整数 $x,y$，表示房间 $x$ 和房间 $y$ 有一条双向通道相连。\n\n接下来 $q$ 行，每行包含 $k$ 个整数，表示每次按先后顺序返回信息的传感器所在房间的编号。", "outputFormat": "$q$ 行，每行包含一个字符串 `Yes` 或 `No`，表示每次传感器返回信息的先后顺序是否可能出现。", "hint": "样例解释：\n\n对于第一组询问，$4 \\to 2$ 必定经过 $1$，所以答案是 `No`。\n\n对于第二组询问，路径 $4 \\to 5 \\to 4 \\to 1 \\to 3 \\to 2 \\to 1 \\to 3$ 符合给定的记录，所以答案是 `Yes`。\n\n---\n\n对于 $10\\%$ 的数据，$n \\le 2$。\n\n对于 $30\\%$ 的数据，$n \\le 3$。\n\n对于 $60\\%$ 的数据，$n \\le 10000，m \\le 20000，k \\le 10$。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le n \\le 10^5$，$1 \\le m \\le 2 \\times 10^5$，$1 \\le q \\le 5$，$1 \\le x,y \\le n$，$x \\neq y$。", "locale": "zh-CN"}}}
{"pid": "P2190", "type": "P", "difficulty": 4, "samples": [["3 2\n1 2 36\n2 3 36\n", "1\n"], ["4 2\n1 2 36\n4 3 36\n", "2\n"]], "limits": {"time": [1000, 1000, 1000], "memory": [128000, 128000, 128000]}, "tags": ["模拟"], "title": "小Z的车厢", "background": "", "description": "小 Z 的家乡有一列在环形铁轨上行驶的火车，共停靠 $n$ 个站（$1$ 号站到 $n$ 号站顺时针排列）。\n\n众所周知，春运是一件非常可怕的事情。不幸的是，小 Z 是铁路公司的员工，现在他收到了 $m$ 条除夕凌晨的订票申请，每个申请 $(x, y, z)$ 表示有 $z$ 个人要从 $x$ 号站顺时针坐到 $y$ 号站，同时，当火车停靠到 $x$ 号站时，所有要在 $x$ 站上车的人都会上车，所有要在 $x$ 号站下车的人都会下车。\n\n由于始发站不确定，现在小 Z 想知道至少需要分配给这列火车多少节车厢（每节车厢可容纳 $36$ 人）才能顺利完成该铁路运输，希望你帮帮他。", "inputFormat": "第一行包含两个整数 $n, m$。\n\n接下来 $m$ 行，每行包含三个整数 $x, y, z$。\n", "outputFormat": "第一行包含一个整数，表示至少需要分配给这列火车的车厢数。\n", "hint": "**【数据规模】**\n\n对于 $30 \\%$ 的数据，$n \\le 1000$，$m \\le 10000$；\n\n对于 $100 \\%$ 的数据，$1 \\le n, m \\le 10^6$，$x \\ne y$，$1 \\le z \\le 100$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Carriages", "background": "", "description": "In Xiao Z's hometown, there is a train running on a circular railway, stopping at $n$ stations (stations $1$ to $n$ arranged clockwise).\n\nAs everyone knows, the Spring Festival travel rush is a terrible thing. Unfortunately, Xiao Z is an employee of the railway company, and he has received $m$ booking requests for the early hours of Chinese New Year's Eve. Each request $(x, y, z)$ means there are $z$ people traveling clockwise from station $x$ to station $y$. At each stop at a station, all passengers who need to board at that station will get on, and all passengers who need to alight at that station will get off.\n\nSince the starting station is not fixed, Xiao Z wants to know the minimum number of carriages that must be assigned to this train (each carriage can carry $36$ people) to complete the transportation, and he hopes you can help him.", "inputFormat": "The first line contains two integers $n, m$.\n\nThe next $m$ lines each contain three integers $x, y, z$.", "outputFormat": "The first line contains an integer, representing the minimum number of carriages required for this train.", "hint": "Constraints\n\nFor $30 \\%$ of the testdata, $n \\le 1000$, $m \\le 10000$;\n\nFor $100 \\%$ of the testdata, $1 \\le n, m \\le 10^6$, $x \\ne y$, $1 \\le z \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的车厢", "background": "", "description": "小 Z 的家乡有一列在环形铁轨上行驶的火车，共停靠 $n$ 个站（$1$ 号站到 $n$ 号站顺时针排列）。\n\n众所周知，春运是一件非常可怕的事情。不幸的是，小 Z 是铁路公司的员工，现在他收到了 $m$ 条除夕凌晨的订票申请，每个申请 $(x, y, z)$ 表示有 $z$ 个人要从 $x$ 号站顺时针坐到 $y$ 号站，同时，当火车停靠到 $x$ 号站时，所有要在 $x$ 站上车的人都会上车，所有要在 $x$ 号站下车的人都会下车。\n\n由于始发站不确定，现在小 Z 想知道至少需要分配给这列火车多少节车厢（每节车厢可容纳 $36$ 人）才能顺利完成该铁路运输，希望你帮帮他。", "inputFormat": "第一行包含两个整数 $n, m$。\n\n接下来 $m$ 行，每行包含三个整数 $x, y, z$。\n", "outputFormat": "第一行包含一个整数，表示至少需要分配给这列火车的车厢数。\n", "hint": "**【数据规模】**\n\n对于 $30 \\%$ 的数据，$n \\le 1000$，$m \\le 10000$；\n\n对于 $100 \\%$ 的数据，$1 \\le n, m \\le 10^6$，$x \\ne y$，$1 \\le z \\le 100$。\n", "locale": "zh-CN"}}}
{"pid": "P2191", "type": "P", "difficulty": 2, "samples": [["4\n##O#\n#O#O\n####\n###O\nARAO\nPCEM\nLEEN\nTURC", "ACMCENTRALEUROPE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串"], "title": "小Z的情书", "background": "众所周知，小 Z 是高富帅的典范和代表，所以他很很多很多的妹纸。小 Z 要写情书给他的妹纸了，作为一个谨慎的人，他当然不会直白的写在纸上（否则被那群损友发现岂不糟了？）。", "description": "虽然小 Z 谨小慎微，但是还是被狡猾的小 D 给发现了其中的玄机。作为一个大方的人，小 D 自然要把这个秘密拿出来给大家共享啦~小 Z 开始有两张 $N \\times N$ 大小的纸一张是透明的、一张是有字的。然后小 Z 把透明的纸上有些格子涂黑了。接着把这两张纸一起给他的妹纸，妹纸事先和小 Z 约定好了，按照如下方法阅读：首先先把透明的纸盖在另一张纸上，然后把露出来的字母从上到下从左到右写下来，然后转个 $90$ 度，再读一遍……这样子一共读四遍……详见样例。\n\n小 D 不知从哪把情书弄来了，请大家一起来欣赏，顺便请大家把内容打出来看看。\n", "inputFormat": "第 $1$ 行，一个整数 $N$；\n\n第 $2$ 到第 $N+1$ 行，每行 $N$ 个字符，代表 skj 的透明纸，`O` 没有涂黑的地方，`#` 代表被涂黑的地方；\n\n第 $N+2$ 到第 $2N+1$ 行，每行 $N$ 个字符，仅包含大写字母，如描述中所示，是另一张纸。", "outputFormat": "一行，情书的内容。\n", "hint": "$1 \\leq N \\leq 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Love Letter", "background": "As everyone knows, Xiao Z is the very model of a tall, rich, and handsome guy, so he has many, many girls. Xiao Z is going to write a love letter to his girls. Being cautious, he certainly would not write it plainly on paper (otherwise, if his mischievous friends found it, wouldn’t that be bad?).", "description": "Although Xiao Z was very careful, the cunning Xiao D still discovered the trick. Being generous, Xiao D naturally wants to share this secret with everyone. Xiao Z starts with two $N \\times N$ sheets of paper: one is transparent, and the other has letters on it. Then Xiao Z blacks out some cells on the transparent sheet. Next, he gives both sheets to the girl. The girl and Xiao Z have agreed in advance to read it as follows: first place the transparent sheet on top of the other sheet, then write down the exposed letters in row-major order, from top to bottom and from left to right; then rotate by $90$ degrees and read again... do this a total of four times... see the sample.\n\nXiao D somehow got the love letter. Please enjoy it together and print out the content.", "inputFormat": "Line $1$: an integer $N$.\n\nLines $2$ to $N+1$: each line has $N$ characters, representing skj's transparent sheet, where `O` indicates an unblackened cell and `#` indicates a blackened cell.\n\nLines $N+2$ to $2N+1$: each line has $N$ characters, containing only uppercase letters, representing the other sheet as described.", "outputFormat": "One line: the content of the love letter.", "hint": "$1 \\leq N \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的情书", "background": "众所周知，小 Z 是高富帅的典范和代表，所以他很很多很多的妹纸。小 Z 要写情书给他的妹纸了，作为一个谨慎的人，他当然不会直白的写在纸上（否则被那群损友发现岂不糟了？）。", "description": "虽然小 Z 谨小慎微，但是还是被狡猾的小 D 给发现了其中的玄机。作为一个大方的人，小 D 自然要把这个秘密拿出来给大家共享啦~小 Z 开始有两张 $N \\times N$ 大小的纸一张是透明的、一张是有字的。然后小 Z 把透明的纸上有些格子涂黑了。接着把这两张纸一起给他的妹纸，妹纸事先和小 Z 约定好了，按照如下方法阅读：首先先把透明的纸盖在另一张纸上，然后把露出来的字母从上到下从左到右写下来，然后转个 $90$ 度，再读一遍……这样子一共读四遍……详见样例。\n\n小 D 不知从哪把情书弄来了，请大家一起来欣赏，顺便请大家把内容打出来看看。\n", "inputFormat": "第 $1$ 行，一个整数 $N$；\n\n第 $2$ 到第 $N+1$ 行，每行 $N$ 个字符，代表 skj 的透明纸，`O` 没有涂黑的地方，`#` 代表被涂黑的地方；\n\n第 $N+2$ 到第 $2N+1$ 行，每行 $N$ 个字符，仅包含大写字母，如描述中所示，是另一张纸。", "outputFormat": "一行，情书的内容。\n", "hint": "$1 \\leq N \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P2192", "type": "P", "difficulty": 1, "samples": [["4\n5 0 5 0", "0\n"], ["11\n5 5 5 5 5 5 5 5 0 5 5", "5555555550"], ["2\n5 5", "-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "HXY玩卡片", "background": null, "description": "HXY 得到了一些卡片，这些卡片上标有数字 $0$ 或 $5$。\n\n现在她可以选择其中一些卡片排成一列，使得排出的一列数字组成的数最大，且满足被 $90$ 整除这个条件。\n\n同时，这个数必须为合法的某个非负整数，即不能含有前导 $0$，即 $0$ 不能作为这串数的首位。\n\n但是特殊地，整数 $0$ 满足条件。\n\n如果不能排出这样的数，输出 $-1$。", "inputFormat": "第一行，卡片的个数 $n$。\n\n第二行，分别给出了这 $n$ 个数（只能为数字 $5$ 或 $0$）。", "outputFormat": "仅一行，如果可以排出，则输出这个数。否则输出 $-1$。", "hint": "数据范围：\n\n对于 $30\\%$ 的数据，$n\\le 10$。\n\n对于 $20\\%$ 的数据，给定的数字均为 $5$。\n\n对于 $100\\%$ 的数据，$n\\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "HXY Plays with Cards", "background": "", "description": "HXY has some cards, each labeled with the digit $0$ or $5$.\n\nShe can choose some of these cards and arrange them in a row to form the largest possible number that is divisible by $90$.\n\nThis number must be a valid non-negative integer, meaning it cannot have a leading $0$; that is, $0$ cannot be the first digit of the sequence.\n\nExceptionally, the integer $0$ is allowed.\n\nIf no such number can be formed, output $-1$.", "inputFormat": "The first line contains the number of cards $n$.\n\nThe second line contains the $n$ digits (each is either $5$ or $0$).", "outputFormat": "Output a single line: if it is possible, print the number; otherwise, print $-1$.", "hint": "Constraints:\n\nFor $30\\%$ of the testdata, $n \\le 10$.\n\nFor $20\\%$ of the testdata, all given digits are $5$.\n\nFor $100\\%$ of the testdata, $n \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "HXY玩卡片", "background": null, "description": "HXY 得到了一些卡片，这些卡片上标有数字 $0$ 或 $5$。\n\n现在她可以选择其中一些卡片排成一列，使得排出的一列数字组成的数最大，且满足被 $90$ 整除这个条件。\n\n同时，这个数必须为合法的某个非负整数，即不能含有前导 $0$，即 $0$ 不能作为这串数的首位。\n\n但是特殊地，整数 $0$ 满足条件。\n\n如果不能排出这样的数，输出 $-1$。", "inputFormat": "第一行，卡片的个数 $n$。\n\n第二行，分别给出了这 $n$ 个数（只能为数字 $5$ 或 $0$）。", "outputFormat": "仅一行，如果可以排出，则输出这个数。否则输出 $-1$。", "hint": "数据范围：\n\n对于 $30\\%$ 的数据，$n\\le 10$。\n\n对于 $20\\%$ 的数据，给定的数字均为 $5$。\n\n对于 $100\\%$ 的数据，$n\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P2193", "type": "P", "difficulty": 3, "samples": [["3 2\n", "5\n"], ["6 4\n", "39\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "HXY和序列", "background": "", "description": "HXY 突发奇想，她想要找到一个正整数序列，满足序列中所有的数不超过 $n$，序列长度为 $p$，且除了第一个数外，所有的数都能被前一个数整除（即是前一个数的倍数）。很快她找到了一个这样的序列。可是她觉得还不够，想要知道这样的序列有多少个，可她被惊人的数据范围吓怕了。现在她找到了你，请你来帮助她解决这个问题。（因为结果可能会很大，请输出对 $10^9+7$ 取模后的值）\n", "inputFormat": "第一行，两个正整数 $n,p$。", "outputFormat": "仅一行，一个正整数，表示满足条件序列的个数对 $10^9+7$ 取模后的值。", "hint": "数据范围：\n\n对于 $10\\%$ 的数据，$p=1$；\n\n对于 $30\\%$ 的数据，$1 \\leq n,p \\leq 10$；\n\n对于 $60\\%$ 的数据，$1 \\leq n,p \\leq 5 \\times 10^2$；\n\n对于 $100\\%$ 的数据，$1 \\leq n,p \\leq 2 \\times 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "HXY and Sequence", "background": "", "description": "HXY had a sudden idea: she wants to find a sequence of positive integers such that every number in the sequence does not exceed $n$, the length of the sequence is $p$, and except for the first number, every number is divisible by the previous number (i.e., is a multiple of the previous number). She quickly found one such sequence. But she felt that was not enough and wants to know how many such sequences there are, but she was frightened by the astonishing constraints. Now she has come to you; please help her solve this problem. Since the result may be very large, please output the value modulo $10^9+7$.", "inputFormat": "The first line contains two positive integers $n$ and $p$.", "outputFormat": "Output a single line with one positive integer, which is the number of sequences that satisfy the conditions, modulo $10^9+7$.", "hint": "Constraints:\n\nFor $10\\%$ of the testdata, $p=1$.\n\nFor $30\\%$ of the testdata, $1 \\leq n,p \\leq 10$.\n\nFor $60\\%$ of the testdata, $1 \\leq n,p \\leq 5 \\times 10^2$.\n\nFor $100\\%$ of the testdata, $1 \\leq n,p \\leq 2 \\times 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "HXY和序列", "background": "", "description": "HXY 突发奇想，她想要找到一个正整数序列，满足序列中所有的数不超过 $n$，序列长度为 $p$，且除了第一个数外，所有的数都能被前一个数整除（即是前一个数的倍数）。很快她找到了一个这样的序列。可是她觉得还不够，想要知道这样的序列有多少个，可她被惊人的数据范围吓怕了。现在她找到了你，请你来帮助她解决这个问题。（因为结果可能会很大，请输出对 $10^9+7$ 取模后的值）\n", "inputFormat": "第一行，两个正整数 $n,p$。", "outputFormat": "仅一行，一个正整数，表示满足条件序列的个数对 $10^9+7$ 取模后的值。", "hint": "数据范围：\n\n对于 $10\\%$ 的数据，$p=1$；\n\n对于 $30\\%$ 的数据，$1 \\leq n,p \\leq 10$；\n\n对于 $60\\%$ 的数据，$1 \\leq n,p \\leq 5 \\times 10^2$；\n\n对于 $100\\%$ 的数据，$1 \\leq n,p \\leq 2 \\times 10^3$。", "locale": "zh-CN"}}}
{"pid": "P2194", "type": "P", "difficulty": 5, "samples": [["3\n1 2 3\n3\n1 2\n2 3\n3 2", "3 1\n"], ["3\n10 20 10\n4\n1 2\n1 3\n3 1\n2 1\n", "10 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "强连通分量"], "title": "HXY烧情侣", "background": "", "description": "众所周知，HXY 已经加入了 FFF 团。现在她要开始喜（sang）闻（xin）乐（bing）见（kuang）地烧情侣了。\n\n这里有 $n$ 座电影院，$n$ 对情侣分别在每座电影院里，然后电影院里都有汽油，但是要使用它需要一定的费用。$m$ 条单向通道连接相邻的两对情侣所在电影院。\n\nHXY 有个绝技，如果她能从一个点开始烧，最后回到这个点，那么烧这条回路上的情侣的费用只需要该点的汽油费即可。并且每对情侣只需烧一遍，电影院可以重复去。然后她想花尽可能少的费用烧掉所有的情侣。\n\n问：最少需要多少费用，并且当费用最少时的方案数是多少？由于方案数可能过大，所以请输出方案数对 $10^9+7$ 取模的结果。\n\n（注：这里 HXY 每次可以从任何一个点开始走回路。就是说一个回路走完了，下一个开始位置可以任选。所以说不存在烧不了所有情侣的情况，即使图不连通，HXY 自行选择顶点进行烧情侣行动。且走过的道路可以重复走。）", "inputFormat": "第一行一个正整数 $n$。   \n第二行 $n$ 个正整数，表示每个点的汽油费 $w_i$。  \n第三行一个正整数 $m$。  \n接下来 $m$ 行，每行两个正整数 $x_i,y_i$，表示一条 $x_i \\to y_i$ 的单向道路。", "outputFormat": "输出一行两个整数，分别表示最小花费，和花费最小时的方案数。", "hint": "对于 $30\\%$ 的数据，$1\\le n,m \\le 20$；  \n对于另外 $10\\%$ 的数据，保证不存在回路；  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$1\\le m \\le 3\\times 10^5$，$0\\le w_i \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "HXY Burns Couples", "background": "", "description": "As we all know, HXY has joined the \"FFF group\". Now she is going to start burning couples.\n\nThere are $n$ cinemas, with $n$ couples, one couple in each cinema. Every cinema has gasoline, but using it costs a certain fee. There are $m$ directed roads connecting the cinemas of neighboring couples.\n\nHXY has a special trick: if she can start burning from some node and eventually return to it, then the cost to burn all couples on that cycle is only the gasoline fee of that starting node. Each couple needs to be burned exactly once, while cinemas may be revisited. She wants to spend as little total cost as possible to burn all couples.\n\nQuestion: what is the minimum total cost, and how many optimal ways are there to achieve this minimum? Since the number of ways may be large, output it modulo $10^9+7$.\n\nNote: HXY can start each cycle from any node. That is, after finishing one cycle, she may choose any node as the starting point for the next cycle. Therefore, it is always possible to burn all couples; even if the graph is disconnected, HXY will choose vertices to carry out the action. Roads may be reused.", "inputFormat": "The first line contains a positive integer $n$.  \nThe second line contains $n$ positive integers, where $w_i$ is the gasoline fee of node $i$.  \nThe third line contains a positive integer $m$.  \nEach of the next $m$ lines contains two positive integers $x_i, y_i$, indicating a directed road $x_i \\to y_i$.", "outputFormat": "Output two integers: the minimum total cost, and the number of optimal ways.", "hint": "- Constraints:\n  - For $30\\%$ of the testdata, $1 \\le n, m \\le 20$.\n  - For another $10\\%$ of the testdata, it is guaranteed that there is no cycle.\n  - For $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $1 \\le m \\le 3 \\times 10^5$, $0 \\le w_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "HXY烧情侣", "background": "", "description": "众所周知，HXY 已经加入了 FFF 团。现在她要开始喜（sang）闻（xin）乐（bing）见（kuang）地烧情侣了。\n\n这里有 $n$ 座电影院，$n$ 对情侣分别在每座电影院里，然后电影院里都有汽油，但是要使用它需要一定的费用。$m$ 条单向通道连接相邻的两对情侣所在电影院。\n\nHXY 有个绝技，如果她能从一个点开始烧，最后回到这个点，那么烧这条回路上的情侣的费用只需要该点的汽油费即可。并且每对情侣只需烧一遍，电影院可以重复去。然后她想花尽可能少的费用烧掉所有的情侣。\n\n问：最少需要多少费用，并且当费用最少时的方案数是多少？由于方案数可能过大，所以请输出方案数对 $10^9+7$ 取模的结果。\n\n（注：这里 HXY 每次可以从任何一个点开始走回路。就是说一个回路走完了，下一个开始位置可以任选。所以说不存在烧不了所有情侣的情况，即使图不连通，HXY 自行选择顶点进行烧情侣行动。且走过的道路可以重复走。）", "inputFormat": "第一行一个正整数 $n$。   \n第二行 $n$ 个正整数，表示每个点的汽油费 $w_i$。  \n第三行一个正整数 $m$。  \n接下来 $m$ 行，每行两个正整数 $x_i,y_i$，表示一条 $x_i \\to y_i$ 的单向道路。", "outputFormat": "输出一行两个整数，分别表示最小花费，和花费最小时的方案数。", "hint": "对于 $30\\%$ 的数据，$1\\le n,m \\le 20$；  \n对于另外 $10\\%$ 的数据，保证不存在回路；  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$1\\le m \\le 3\\times 10^5$，$0\\le w_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2195", "type": "P", "difficulty": 4, "samples": [["6 0 6\n2 1 2\n2 3 4\n2 5 6\n2 3 2\n2 5 3\n1 1", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "并查集", "广度优先搜索 BFS", "树的直径"], "title": "HXY造公园", "background": "", "description": "现在有一个现成的公园，有 $n$ 个休息点和 $m$ 条双向边连接两个休息点。众所周知，HXY 是一个 SXBK 的强迫症患者，所以她打算施展魔法来改造公园并即时了解改造情况。她可以进行以下两种操作：\n\n1. 对某个休息点 $x$，查询公园中可以与该点互相到达的休息点组成的路径中的最长路径。\n2. 对于两个休息点 $x,y$，如果 $x,y$ 已经可以互相到达则忽略此次操作。否则，在 $x$ 可到达的所有休息点和 $y$ 可到达的所有休息点（包括 $x,y$ 自身）分别选择一个休息点，然后在这两个休息点之间连一条边，并且这个选择应该满足对于连接后的公园，$x$ 和 $y$ 所在的区域（即 $x,y$ 可达到的所有休息点和边组成的集合）中的最长路径的长度最小。\n\nHXY打算进行 $q$ 个操作，请你回答她的对于公园情况的询问（操作 1）或者执行她的操作（操作 2）。\n\n注：所有边的长度皆为 $1$。保证不存在环。最长路径定义为：对于点 $v_1,v_2\\cdots v_k$，如果对于其中任意的 $v_i$ 和 $v_{i+1}\\quad (1\\le i\\le k-1)$，都有边相连接，那么 $v_j\\quad(1\\le j\\le k)$ 所在区域的最长路径就是 $k-1$。\n", "inputFormat": "- 第一行，三个正整数，分别为 $n,m,q$。\n- 接下来的 $m$ 行，每一行有两个正整数 $x_i,y_i$，表示 $x_i$ 和 $y_i$ 有一条双向边相连。\n- 再接下来的 $q$ 行，每一行表示一个操作。\n  - 若该行第一个数为 $1$，则表示操作 1，之后还有一个正整数 $x_i$，表示要查询的休息点。\n  - 若该行第一个数为 $2$，则表示操作 2，之后还有两个正整数 $x_i,y_i$，表示需要执行操作的两个休息点。\n", "outputFormat": "输出行数为操作 1 的个数。\n\n每行输出对于操作 1 询问的回答。\n", "hint": "### 数据范围及约定\n\n- 对于 $10\\%$ 的数据，只存在操作 1。\n- 对于 $30\\%$ 的数据，$0\\le m<n\\le 20$，$1\\le q\\le5$。\n- 对于 $60\\%$ 的数据，$0\\le m<n \\le 2000$，$1\\le q\\le 1000$。\n- 对于 $100\\%$ 的数据，$0 \\le m<n \\le 3\\times 10^5$，$1\\le q\\le 3\\times 10^5$。\n", "locale": "zh-CN", "translations": {"en": {"title": "HXY Builds a Park", "background": "", "description": "There is an existing park with $ n $ rest spots and $ m $ undirected edges connecting pairs of rest spots. As everyone knows, HXY is an OCD patient of \"SXBK\", so she plans to use magic to renovate the park and instantly keep track of the renovation. She can perform the following two operations:\n1. For a rest spot $ x $, query the longest path within the set of rest spots that are mutually reachable with $ x $.\n2. For two rest spots $ x, y $, if $ x $ and $ y $ are already mutually reachable, ignore this operation. Otherwise, choose one rest spot from all rest spots reachable from $ x $ and one rest spot from all rest spots reachable from $ y $ (including $ x $ and $ y $ themselves), then add one edge between these two chosen rest spots. This choice should minimize, in the park after the connection, the length of the longest path within the region containing $ x $ and $ y $ (that is, the set consisting of all rest spots and edges reachable from $ x $ and $ y $).\n\nHXY plans to perform $ q $ operations. Please answer her queries about the park (operation 1) or carry out her operation (operation 2).\n\nNote: All edges have length $ 1 $. It is guaranteed that there are no cycles. The longest path is defined as follows: for vertices $ v_1, v_2, \\cdots, v_k $, if for every $ v_i $ and $ v_{i+1} \\ (1 \\le i \\le k-1) $ there is an edge connecting them, then the longest path in the region containing any $ v_j \\ (1 \\le j \\le k) $ has length $ k - 1 $.", "inputFormat": "- The first line contains three positive integers $ n, m, q $.\n- The next $ m $ lines each contain two positive integers $ x_i, y_i $, indicating that there is an undirected edge between $ x_i $ and $ y_i $.\n- The next $ q $ lines each describe an operation.\n  - If the first number is $ 1 $, this is operation 1; then there is one positive integer $ x_i $, the rest spot to query.\n  - If the first number is $ 2 $, this is operation 2; then there are two positive integers $ x_i, y_i $, the two rest spots for the operation.", "outputFormat": "The number of output lines equals the number of operation 1.\n\nOn each line, output the answer to the corresponding operation 1 query.", "hint": "### Constraints and Conventions\n\n- For $ 10\\% $ of the testdata, only operation 1 exists.\n- For $ 30\\% $ of the testdata, $ 0 \\le m < n \\le 20 $, $ 1 \\le q \\le 5 $.\n- For $ 60\\% $ of the testdata, $ 0 \\le m < n \\le 2000 $, $ 1 \\le q \\le 1000 $.\n- For $ 100\\% $ of the testdata, $ 0 \\le m < n \\le 3 \\times 10^5 $, $ 1 \\le q \\le 3 \\times 10^5 $.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "HXY造公园", "background": "", "description": "现在有一个现成的公园，有 $n$ 个休息点和 $m$ 条双向边连接两个休息点。众所周知，HXY 是一个 SXBK 的强迫症患者，所以她打算施展魔法来改造公园并即时了解改造情况。她可以进行以下两种操作：\n\n1. 对某个休息点 $x$，查询公园中可以与该点互相到达的休息点组成的路径中的最长路径。\n2. 对于两个休息点 $x,y$，如果 $x,y$ 已经可以互相到达则忽略此次操作。否则，在 $x$ 可到达的所有休息点和 $y$ 可到达的所有休息点（包括 $x,y$ 自身）分别选择一个休息点，然后在这两个休息点之间连一条边，并且这个选择应该满足对于连接后的公园，$x$ 和 $y$ 所在的区域（即 $x,y$ 可达到的所有休息点和边组成的集合）中的最长路径的长度最小。\n\nHXY打算进行 $q$ 个操作，请你回答她的对于公园情况的询问（操作 1）或者执行她的操作（操作 2）。\n\n注：所有边的长度皆为 $1$。保证不存在环。最长路径定义为：对于点 $v_1,v_2\\cdots v_k$，如果对于其中任意的 $v_i$ 和 $v_{i+1}\\quad (1\\le i\\le k-1)$，都有边相连接，那么 $v_j\\quad(1\\le j\\le k)$ 所在区域的最长路径就是 $k-1$。\n", "inputFormat": "- 第一行，三个正整数，分别为 $n,m,q$。\n- 接下来的 $m$ 行，每一行有两个正整数 $x_i,y_i$，表示 $x_i$ 和 $y_i$ 有一条双向边相连。\n- 再接下来的 $q$ 行，每一行表示一个操作。\n  - 若该行第一个数为 $1$，则表示操作 1，之后还有一个正整数 $x_i$，表示要查询的休息点。\n  - 若该行第一个数为 $2$，则表示操作 2，之后还有两个正整数 $x_i,y_i$，表示需要执行操作的两个休息点。\n", "outputFormat": "输出行数为操作 1 的个数。\n\n每行输出对于操作 1 询问的回答。\n", "hint": "### 数据范围及约定\n\n- 对于 $10\\%$ 的数据，只存在操作 1。\n- 对于 $30\\%$ 的数据，$0\\le m<n\\le 20$，$1\\le q\\le5$。\n- 对于 $60\\%$ 的数据，$0\\le m<n \\le 2000$，$1\\le q\\le 1000$。\n- 对于 $100\\%$ 的数据，$0 \\le m<n \\le 3\\times 10^5$，$1\\le q\\le 3\\times 10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P2196", "type": "P", "difficulty": 3, "samples": [["5\n10 8 4 7 6\n1 1 1 0\n0 0 0\n1 1\n1\n", "1 3 4 5\n27"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "搜索", "NOIP 提高组", "深度优先搜索 DFS", "拓扑排序", "1996"], "title": "[NOIP 1996 提高组] 挖地雷", "background": null, "description": "在一个地图上有 $N\\ (N \\le 20)$ 个地窖，每个地窖中埋有一定数量的地雷。同时，给出地窖之间的连接路径。当地窖及其连接的数据给出之后，某人可以从任一处开始挖地雷，然后每次可以移动到一个编号比当前节点大且联通的节点去挖地雷，当无满足条件的节点时挖地雷工作结束。设计一个挖地雷的方案，使某人能挖到最多的地雷。", "inputFormat": "有若干行。\n\n第 $1$ 行只有一个数字，表示地窖的个数 $N$。\n\n第 $2$ 行有 $N$ 个数，分别表示每个地窖中的地雷个数。\n\n第 $3$ 行至第 $N+1$ 行表示地窖之间的连接情况：\n\n第 $3$ 行有 $n-1$ 个数（$0$ 或 $1$），表示第一个地窖至第 $2$ 个、第 $3$ 个 $\\dots$ 第 $n$ 个地窖有否路径连接。如第 $3$ 行为 $1\\space 1\\space 0\\space 0\\space 0\\cdots 0$，则表示第 $1$ 个地窖至第 $2$ 个地窖有路径，至第 $3$ 个地窖有路径，至第 $4$ 个地窖、第 $5$ 个 $\\dots$ 第 $n$ 个地窖没有路径。\n\n第 $4$ 行有 $n-2$ 个数，表示第二个地窖至第 $3$ 个、第 $4$ 个 $\\dots$ 第 $n$ 个地窖有否路径连接。\n\n……\n\n第 $n+1$ 行有 $1$ 个数，表示第 $n-1$ 个地窖至第 $n$ 个地窖有否路径连接。（为 $0$ 表示没有路径，为 $1$ 表示有路径）。", "outputFormat": "第一行表示挖得最多地雷时的挖地雷的顺序，各地窖序号间以一个空格分隔，不得有多余的空格。\n\n第二行只有一个数，表示能挖到的最多地雷数。", "hint": "**【样例解释】**\n![](https://img.picui.cn/free/2025/05/15/6825a221c60ba.png)\n最优路径为 $1 \\to 3 \\to 4 \\to 5$，结果为 $27$。\n\n**【题目来源】**\n\nNOIP 1996 提高组第三题。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 1996 Senior] Digging Mines", "background": "", "description": "On a map there are $N$ ($N \\le 20$) cellars, each containing a certain number of mines. The connections between cellars are given. After the data of the cellars and their connections are provided, a person can start digging mines from any cellar. Each time, they may move to a connected cellar whose index is strictly larger than the current node’s index to dig mines. The digging ends when there is no node that satisfies the condition. Design a digging plan so that the person can collect the maximum number of mines.", "inputFormat": "Multiple lines.\n\nThe first line contains a single integer, the number of cellars $N$.\n\nThe second line contains $N$ integers, representing the number of mines in each cellar.\n\nLines $3$ to $N+1$ describe the connections between cellars:\n\n- Line $3$ has $N-1$ numbers ($0$ or $1$), indicating whether there is a path from the first cellar to the $2$-nd, $3$-rd, …, $N$-th cellar. For example, if line $3$ is $1\\ 1\\ 0\\ 0\\ 0 \\cdots 0$, it means there is a path from cellar $1$ to cellar $2$, a path from cellar $1$ to cellar $3$, and no path from cellar $1$ to cellar $4$, cellar $5$, …, cellar $N$.\n- Line $4$ has $N-2$ numbers, indicating whether there is a path from the second cellar to the $3$-rd, $4$-th, …, $N$-th cellar.\n- …\n- Line $N+1$ has $1$ number, indicating whether there is a path from the $(N-1)$-th cellar to the $N$-th cellar (where $0$ means no path and $1$ means there is a path).", "outputFormat": "The first line prints the digging order when the maximum number of mines is collected. The indices of the cellars are separated by a single space, with no extra spaces.\n\nThe second line contains a single integer, the maximum number of mines that can be collected.", "hint": "[Sample Explanation]\n![](https://img.picui.cn/free/2025/05/15/6825a221c60ba.png)\nThe optimal path is $1 \\to 3 \\to 4 \\to 5$, and the result is $27$.\n\n[Source]\nNOIP 1996 Senior, Problem 3.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 1996 提高组] 挖地雷", "background": null, "description": "在一个地图上有 $N\\ (N \\le 20)$ 个地窖，每个地窖中埋有一定数量的地雷。同时，给出地窖之间的连接路径。当地窖及其连接的数据给出之后，某人可以从任一处开始挖地雷，然后每次可以移动到一个编号比当前节点大且联通的节点去挖地雷，当无满足条件的节点时挖地雷工作结束。设计一个挖地雷的方案，使某人能挖到最多的地雷。", "inputFormat": "有若干行。\n\n第 $1$ 行只有一个数字，表示地窖的个数 $N$。\n\n第 $2$ 行有 $N$ 个数，分别表示每个地窖中的地雷个数。\n\n第 $3$ 行至第 $N+1$ 行表示地窖之间的连接情况：\n\n第 $3$ 行有 $n-1$ 个数（$0$ 或 $1$），表示第一个地窖至第 $2$ 个、第 $3$ 个 $\\dots$ 第 $n$ 个地窖有否路径连接。如第 $3$ 行为 $1\\space 1\\space 0\\space 0\\space 0\\cdots 0$，则表示第 $1$ 个地窖至第 $2$ 个地窖有路径，至第 $3$ 个地窖有路径，至第 $4$ 个地窖、第 $5$ 个 $\\dots$ 第 $n$ 个地窖没有路径。\n\n第 $4$ 行有 $n-2$ 个数，表示第二个地窖至第 $3$ 个、第 $4$ 个 $\\dots$ 第 $n$ 个地窖有否路径连接。\n\n……\n\n第 $n+1$ 行有 $1$ 个数，表示第 $n-1$ 个地窖至第 $n$ 个地窖有否路径连接。（为 $0$ 表示没有路径，为 $1$ 表示有路径）。", "outputFormat": "第一行表示挖得最多地雷时的挖地雷的顺序，各地窖序号间以一个空格分隔，不得有多余的空格。\n\n第二行只有一个数，表示能挖到的最多地雷数。", "hint": "**【样例解释】**\n![](https://img.picui.cn/free/2025/05/15/6825a221c60ba.png)\n最优路径为 $1 \\to 3 \\to 4 \\to 5$，结果为 $27$。\n\n**【题目来源】**\n\nNOIP 1996 提高组第三题。", "locale": "zh-CN"}}}
{"pid": "P2197", "type": "P", "difficulty": 4, "samples": [["2\n2\n1 1\n2\n1 0", "No\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["博弈论", "SG 函数", "模板题"], "title": "【模板】Nim 游戏", "background": null, "description": "甲，乙两个人玩 Nim 取石子游戏。\n\nNim 游戏的规则是这样的：地上有 $n$ 堆石子，每人每次可从任意一堆石子里取出任意多枚石子扔掉，可以取完，不能不取。每次只能从一堆里取。最后没石子可取的人就输了。假如甲是先手，且告诉你这 $n$ 堆石子的数量，他想知道是否存在先手必胜的策略。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示有 $T$ 组数据。\n\n接下来每两行是一组数据：\n- 第一行一个整数 $n$，表示有 $n$ 堆石子；\n- 第二行有 $n$ 个数，表示每一堆石子的数量。", "outputFormat": "共 $T$ 行，每行表示如果对于这组数据存在先手必胜策略则输出 `Yes`，否则输出 `No`。", "hint": "对于所有数据，$1\\le T\\le 10$，$1\\le n\\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "【Template】Nim Game", "background": "", "description": "Two players, A and B, are playing the Nim game.\n\nThe rules of the Nim game are as follows: There are $n$ piles of stones on the ground (each pile has fewer than $10^4$ stones). On each turn, a player may remove any positive number of stones from exactly one pile; it is allowed to take all stones from that pile, but taking none is not allowed. The player who cannot make a move (i.e., when no stones remain) loses. Given that A moves first and the sizes of the $n$ piles are known, determine whether there exists a winning strategy for the first player.", "inputFormat": "This problem has multiple testdata.\n\nThe first line contains an integer $T$ ($T \\le 10$), indicating there are $T$ sets of testdata.\n\nNext, each set of testdata consists of two lines. The first line contains an integer $n$, the number of piles, with $n \\le 10^4$.\n\nThe second line contains $n$ integers, representing the number of stones in each pile.", "outputFormat": "Output $T$ lines. For each set of testdata, output `Yes` if there exists a winning strategy for the first player; otherwise, output `No`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】Nim 游戏", "background": null, "description": "甲，乙两个人玩 Nim 取石子游戏。\n\nNim 游戏的规则是这样的：地上有 $n$ 堆石子，每人每次可从任意一堆石子里取出任意多枚石子扔掉，可以取完，不能不取。每次只能从一堆里取。最后没石子可取的人就输了。假如甲是先手，且告诉你这 $n$ 堆石子的数量，他想知道是否存在先手必胜的策略。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示有 $T$ 组数据。\n\n接下来每两行是一组数据：\n- 第一行一个整数 $n$，表示有 $n$ 堆石子；\n- 第二行有 $n$ 个数，表示每一堆石子的数量。", "outputFormat": "共 $T$ 行，每行表示如果对于这组数据存在先手必胜策略则输出 `Yes`，否则输出 `No`。", "hint": "对于所有数据，$1\\le T\\le 10$，$1\\le n\\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2198", "type": "P", "difficulty": 5, "samples": [["5 4 3 2 1", "82"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "线性数据结构"], "title": "杀蚂蚁", "background": "说“善有善报，恶有恶报，不是不报……”。小 FF 一心只顾自己企业的壮大而没顾及自己的采矿业对 Greed Island 上生态环境的破坏，Greed Island 的环境日益恶劣。终于，岛上的蚂蚁们变异了，它们决定对小 FF 的矿区进行攻击，欲将岛上的人类驱逐出去……面对蚂蚁们的进攻，人类节节败退。无奈之下，小 FF 请来了全宇宙最强的防御系统制造商派来的工程机器人——SCV，希望能够阻挡蚂蚁的攻势。\n\n", "description": "经过小 FF 的研究，他发现蚂蚁们每次都走同一条长度为 $n$ 个单位的路线进攻，且蚂蚁们的经过一个单位长度所需的时间为 $T$ 秒。也就是说，只要小 FF 在条路线上布防且给蚂蚁造成沉痛伤害就能阻止蚂蚁的进军。\n\nSCV 擅长制造的防御塔有三种，分别是激光塔，放射塔和干扰塔，他们可以在一个单位长度内修建一座防御塔。三种防御塔的作用如下：\n\n激光塔：使用高能激光，当蚂蚁从塔前经过时每秒对蚂蚁造成 $r$ 点伤害。\n\n放射塔：释放放射性元素，当蚂蚁经过这座塔后，每一秒受到 $g$ 点伤害。\n\n干扰塔：干扰塔负责干扰蚂蚁们的信息素，使得蚂蚁在经过这座塔后，经过之后每一个单位长度的时间变成 $T+b$。\n\n当然，放射塔和干扰塔的效果是可以叠加的，也就是说如果敌人经过 $x$ 座放射塔，那么敌人每秒钟会受到 $x \\times g$ 点伤害；同理，如果敌人经过 $y$ 座干扰塔，那么敌人经过一个单位长度的时间将变为 $T + y \\times b$。\n\n现在距离蚂蚁的下一轮进攻还有足够长的时间，你这个“NewBe\\_One”计划的首席工程师现在被任命为战略总参谋长，因此你必须设计一个给蚂蚁们造成最大伤害的布塔方案。", "inputFormat": "输入数据仅一行，$5$ 个整数 $n,r,g,b,T$ 中间用一个空格隔开。它们分别表示你可以布防的总长度，激光塔的效果、放射塔的效果和干扰塔的效果。", "outputFormat": "输出仅一个整数，代表你的方案给敌人带来的最大伤害值。", "hint": "#### 样例解释\n\n第 $1$ 号位置为放射塔，第 $2,3$ 号位置建造干扰塔，第 $4,5$ 号位置建造激光塔。\n\n#### 数据范围\n\n对于 $30\\%$ 的数据：$1 \\leq n \\leq 20$；\n\n对于 $60\\%$ 的数据：$1 \\leq n \\leq 1024,0 \\leq r,g,b \\leq 65536,0 \\leq T \\leq 3$；\n\n对于另外 $40\\%$ 的数据：$1 \\leq n \\leq 400,0 \\leq r,g,b \\leq 2^{31}-1,0 \\leq t \\leq 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Killing Ants", "background": "People say, \"Good is rewarded with good, evil with evil; retribution only comes late, not never.\" Little FF focused only on growing his own business and ignored how his mining damaged the ecosystem on Greed Island, and the environment kept getting worse. Finally, the ants on the island mutated. They decided to attack Little FF’s mining area and drive humans off the island. Facing the ants’ offensive, humans lost ground one step after another. As a last resort, Little FF brought in SCV, the engineering robot sent by the strongest defense system manufacturer in the universe, hoping to hold off the ants’ assault.", "description": "After Little FF’s research, he found that the ants always attack along the same route of length $n$ units, and the time needed to traverse one unit length is $T$ seconds. In other words, as long as Little FF deploys defenses along this route and inflicts heavy damage on the ants, he can stop their advance.\n\nSCV specializes in building three kinds of defense towers: Laser Tower, Radiation Tower, and Interference Tower. On each unit length, exactly one tower can be built. Their effects are as follows:\n\nLaser Tower: Uses high-energy lasers and deals $r$ damage per second to the ants while they pass in front of the tower.\n\nRadiation Tower: Releases radioactive elements. After the ants pass this tower, they take $g$ damage per second.\n\nInterference Tower: Disrupts the ants’ pheromones. After the ants pass this tower, the time to traverse each subsequent unit length becomes $T + b$.\n\nThe effects of Radiation Towers and Interference Towers stack. That is, if the enemy has passed $x$ Radiation Towers, then they take $x \\times g$ damage per second; similarly, if they have passed $y$ Interference Towers, then the time to traverse one unit length becomes $T + y \\times b$.\n\nThere is enough time before the next wave of attacks. As the chief engineer of the “NewBe\\_One” project, now appointed as the chief strategist, you must design a tower placement plan that maximizes the total damage dealt to the ants.", "inputFormat": "The input contains a single line with $5$ integers $n, r, g, b, T$ separated by a space. They represent: the total route length you can deploy on $n$, the Laser Tower’s per-second damage $r$, the Radiation Tower’s per-second damage $g$, the Interference Tower’s per-unit time increase $b$, and the base time per unit length $T$.", "outputFormat": "Output a single integer, the maximum total damage your plan can deal to the enemy.", "hint": "#### Sample Explanation\n\nAt position $1$ build a Radiation Tower; at positions $2$ and $3$ build Interference Towers; at positions $4$ and $5$ build Laser Towers.\n\n#### Constraints\n\nFor $30\\%$ of the testdata: $1 \\leq n \\leq 20$.\n\nFor $60\\%$ of the testdata: $1 \\leq n \\leq 1024, 0 \\leq r,g,b \\leq 65536, 0 \\leq T \\leq 3$.\n\nFor the remaining $40\\%$ of the testdata: $1 \\leq n \\leq 400, 0 \\leq r,g,b \\leq 2^{31}-1, 0 \\leq T \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "杀蚂蚁", "background": "说“善有善报，恶有恶报，不是不报……”。小 FF 一心只顾自己企业的壮大而没顾及自己的采矿业对 Greed Island 上生态环境的破坏，Greed Island 的环境日益恶劣。终于，岛上的蚂蚁们变异了，它们决定对小 FF 的矿区进行攻击，欲将岛上的人类驱逐出去……面对蚂蚁们的进攻，人类节节败退。无奈之下，小 FF 请来了全宇宙最强的防御系统制造商派来的工程机器人——SCV，希望能够阻挡蚂蚁的攻势。\n\n", "description": "经过小 FF 的研究，他发现蚂蚁们每次都走同一条长度为 $n$ 个单位的路线进攻，且蚂蚁们的经过一个单位长度所需的时间为 $T$ 秒。也就是说，只要小 FF 在条路线上布防且给蚂蚁造成沉痛伤害就能阻止蚂蚁的进军。\n\nSCV 擅长制造的防御塔有三种，分别是激光塔，放射塔和干扰塔，他们可以在一个单位长度内修建一座防御塔。三种防御塔的作用如下：\n\n激光塔：使用高能激光，当蚂蚁从塔前经过时每秒对蚂蚁造成 $r$ 点伤害。\n\n放射塔：释放放射性元素，当蚂蚁经过这座塔后，每一秒受到 $g$ 点伤害。\n\n干扰塔：干扰塔负责干扰蚂蚁们的信息素，使得蚂蚁在经过这座塔后，经过之后每一个单位长度的时间变成 $T+b$。\n\n当然，放射塔和干扰塔的效果是可以叠加的，也就是说如果敌人经过 $x$ 座放射塔，那么敌人每秒钟会受到 $x \\times g$ 点伤害；同理，如果敌人经过 $y$ 座干扰塔，那么敌人经过一个单位长度的时间将变为 $T + y \\times b$。\n\n现在距离蚂蚁的下一轮进攻还有足够长的时间，你这个“NewBe\\_One”计划的首席工程师现在被任命为战略总参谋长，因此你必须设计一个给蚂蚁们造成最大伤害的布塔方案。", "inputFormat": "输入数据仅一行，$5$ 个整数 $n,r,g,b,T$ 中间用一个空格隔开。它们分别表示你可以布防的总长度，激光塔的效果、放射塔的效果和干扰塔的效果。", "outputFormat": "输出仅一个整数，代表你的方案给敌人带来的最大伤害值。", "hint": "#### 样例解释\n\n第 $1$ 号位置为放射塔，第 $2,3$ 号位置建造干扰塔，第 $4,5$ 号位置建造激光塔。\n\n#### 数据范围\n\n对于 $30\\%$ 的数据：$1 \\leq n \\leq 20$；\n\n对于 $60\\%$ 的数据：$1 \\leq n \\leq 1024,0 \\leq r,g,b \\leq 65536,0 \\leq T \\leq 3$；\n\n对于另外 $40\\%$ 的数据：$1 \\leq n \\leq 400,0 \\leq r,g,b \\leq 2^{31}-1,0 \\leq t \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P2199", "type": "P", "difficulty": 3, "samples": [["3 4\nOXXO\nXXOO\nXOOO\n3 2 2 4\n3 3 1 1\n0 0 0 0\n", "1\nPoor Harry\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "枚举", "广度优先搜索 BFS", "队列"], "title": "最后的迷宫", "background": "哈利•波特作为三强争霸赛的第四名选手，历尽艰险闯到了最后一关——迷宫。\n\n现在，迷宫里只剩下哈利和塞德里克了，哈利只有在塞德里克前面拿到奖杯，才能赢得比赛。哈利只要能看到奖杯，就可以用飞来咒拿到它，所以，现在的问题是哈利如何能尽早地看到奖杯。", "description": "哈利的视力非常好，他能从迷宫的一端沿直线看到迷宫的另一端（但他只能看八个方向——东北，东，东南，南，西南……），而且他跑得非常快，跑一步（向上、下、左、右移动一格）只需要 $1\\text{s}$。但迷宫是不透光的，而且，要烧掉迷宫的墙也不容易，所以哈利决定绕到一个能够看到奖杯的地方。现在，哈利希望你能帮他确定最短需要多长时间才能拿到奖杯。\n\n我们规定，迷宫左上角的坐标为 $(1,1)$，右下角坐标为 $(N,M)$。", "inputFormat": "第一行为 $2$ 个数 $N,M$ 表示迷宫的规模（$N$ 为高，$M$ 为宽）。\n\n接下来是 $N \\times M$ 的迷宫，$\\texttt{O}$ 表示空地，$\\texttt{X}$ 表示墙。\n\n最后是多对数据，分别是奖杯坐标及哈利的坐标（显然不可能在墙上），每对占一行，$0$ 为结束标志。", "outputFormat": "根据每对数据，计算哈利拿到奖杯的最短时间，每对一行。如果魔法部有意难为选手，用墙将奖杯包围了起来，输出 $\\texttt{Poor Harry}$。", "hint": "对于 $30\\%$ 的数据，有 $N\\times M\\le100$；\n\n对于 $60\\%$ 的数据，有 $N\\times M\\le1600$；\n\n对于 $100\\%$ 的数据，有 $N\\times M\\le16384$。\n\n询问数据对数不超过 $512$。", "locale": "zh-CN", "translations": {"en": {"title": "The Final Maze", "background": "As the fourth champion in the Triwizard Tournament, Harry Potter has braved many dangers to reach the final task — the maze.\n\nNow only Harry and Cedric are left in the maze. Harry can win the competition only if he gets to the trophy before Cedric. As long as Harry can see the trophy, he can use a Summoning Charm to pull it to himself. So the question is how Harry can see the trophy as soon as possible.", "description": "Harry has excellent eyesight: he can look in a straight line from one side of the maze to the other (but only in eight directions — NE, E, SE, S, SW, W, NW, N). He also runs very fast: taking one step (moving one cell up, down, left, or right) costs only $1\\text{s}$. However, the maze walls are opaque, and burning them down is not easy, so Harry decides to run to a place where he can see the trophy. Now he wants you to determine the minimum time needed for him to obtain the trophy.", "inputFormat": "The first line contains $2$ numbers $N, M$ indicating the size of the maze ($N$ is height, $M$ is width).\n\nNext comes the $N \\times M$ maze: $\\texttt{O}$ denotes open ground, and $\\texttt{X}$ denotes a wall.\n\nFinally, there are multiple pairs of data, each giving the coordinates of the trophy and Harry (obviously not on walls), one pair per line. A single $0$ marks the end.", "outputFormat": "For each pair of data, output the minimum time for Harry to obtain the trophy, one per line. If the Ministry of Magic makes things difficult by surrounding the trophy with walls, output $\\texttt{Poor Harry}$.", "hint": "For $30\\%$ of the testdata, $N \\times M \\le 100$.\n\nFor $60\\%$ of the testdata, $N \\times M \\le 1600$.\n\nFor $100\\%$ of the testdata, $N \\times M \\le 16384$.\n\nThe number of query pairs does not exceed $512$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最后的迷宫", "background": "哈利•波特作为三强争霸赛的第四名选手，历尽艰险闯到了最后一关——迷宫。\n\n现在，迷宫里只剩下哈利和塞德里克了，哈利只有在塞德里克前面拿到奖杯，才能赢得比赛。哈利只要能看到奖杯，就可以用飞来咒拿到它，所以，现在的问题是哈利如何能尽早地看到奖杯。", "description": "哈利的视力非常好，他能从迷宫的一端沿直线看到迷宫的另一端（但他只能看八个方向——东北，东，东南，南，西南……），而且他跑得非常快，跑一步（向上、下、左、右移动一格）只需要 $1\\text{s}$。但迷宫是不透光的，而且，要烧掉迷宫的墙也不容易，所以哈利决定绕到一个能够看到奖杯的地方。现在，哈利希望你能帮他确定最短需要多长时间才能拿到奖杯。\n\n我们规定，迷宫左上角的坐标为 $(1,1)$，右下角坐标为 $(N,M)$。", "inputFormat": "第一行为 $2$ 个数 $N,M$ 表示迷宫的规模（$N$ 为高，$M$ 为宽）。\n\n接下来是 $N \\times M$ 的迷宫，$\\texttt{O}$ 表示空地，$\\texttt{X}$ 表示墙。\n\n最后是多对数据，分别是奖杯坐标及哈利的坐标（显然不可能在墙上），每对占一行，$0$ 为结束标志。", "outputFormat": "根据每对数据，计算哈利拿到奖杯的最短时间，每对一行。如果魔法部有意难为选手，用墙将奖杯包围了起来，输出 $\\texttt{Poor Harry}$。", "hint": "对于 $30\\%$ 的数据，有 $N\\times M\\le100$；\n\n对于 $60\\%$ 的数据，有 $N\\times M\\le1600$；\n\n对于 $100\\%$ 的数据，有 $N\\times M\\le16384$。\n\n询问数据对数不超过 $512$。", "locale": "zh-CN"}}}
{"pid": "P2200", "type": "P", "difficulty": 4, "samples": [["3 16 9\n2 5 6\n1 1 3\n7 8 3\n2 5 1\n3 3 6\n7 8 1", "34"], ["2 193 43\n1 2\n2 1\n1 2\n2 3", "Fail"], ["3 10 20\n1 2 3\n4 5 4\n3 2 1\n2 1 2\n1 5 3\n4 3 4", "30"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "炉石collection", "background": "", "description": "小 Z 最近沉迷于一个叫做炉石 collection 的游戏。在游戏中，你需要使用排在 $N \\times N$ 的矩阵内的卡牌来击败你的敌人。\n\n在这个游戏中，排兵布阵是游戏的一个重要内容，例如“日怒保卫者”和“上古看守者”放在一起可以起到更好的效果。为了游戏的平衡性，同样种类的卡牌最多只能出战 $2$ 张。\n\n在一次激烈的战斗之后，小 Z 想要重新编排他的队伍。在游戏中，小 Z 可以支付 $A$ 枚金币让你任意横向交换卡牌，支付 $B$ 枚金币让你任意纵向交换卡牌。\n\n你只需要支付一次金币就可以进行某种类型的交换任意次，直到你停下并进行另一种类型的交换，此时需要支付另一种类型交换的费用。例如，“横向交换-横向交换-纵向交换-纵向交换-纵向交换-横向交换-纵向交换”总共要支付 $2A + 2B$ 枚金币。\n\n小 Z 想要知道，他最少要支付多少金币把他目前的布置变换成他想要的布置。", "inputFormat": "第一行包含三个数字 $N,A,B$，分别表示矩阵的大小，横向交换的费用，纵向交换的费用。\n\n接下来 $N$ 行每行包含 $N$ 个整数，表示开始交换前矩阵内每个位置卡牌的类型。\n\n接下来 $N$ 行每行包含 $N$ 个整数，表示目标矩阵内每个位置卡牌的类型。", "outputFormat": "输出最少需要支付多少金币能够把目前的布置变换成他想要的布置。如果不能变换成功，输出 `Fail`。", "hint": "对于 $68\\%$ 的数据，答案最多只需要支付 $1$ 次费用。\n\n对于 $86\\%$ 的数据，答案最多只需要支付 $2$ 次费用。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 300,1 \\leq A,B \\leq 1000000,1 \\leq$ 卡牌类型的标号 $\\leq 100000$。", "locale": "zh-CN", "translations": {"en": {"title": "Hearthstone Collection", "background": "", "description": "Xiao Z has recently become addicted to a game called Hearthstone Collection. In the game, you need to use cards arranged in an $N \\times N$ matrix to defeat your enemies.\n\nIn this game, formation is important; for example, \"Sunfury Protector\" and \"Ancient Watcher\" placed together can have a better effect. For balance, at most $2$ cards of the same kind may be deployed.\n\nAfter a fierce battle, Xiao Z wants to rearrange his lineup. In the game, Xiao Z can pay $A$ coins to perform arbitrary horizontal swaps, and pay $B$ coins to perform arbitrary vertical swaps.\n\nYou only need to pay once to make any number of swaps of one type, until you stop and perform the other type of swaps, at which point you need to pay the fee for the other type. For example, \"horizontal swap - horizontal swap - vertical swap - vertical swap - vertical swap - horizontal swap - vertical swap\" costs $2A + 2B$ coins in total.\n\nXiao Z wants to know the minimum number of coins he needs to transform his current arrangement into his desired arrangement.", "inputFormat": "The first line contains three integers $N, A, B$, representing the size of the matrix, the cost of a horizontal swap, and the cost of a vertical swap.\n\nThe next $N$ lines each contain $N$ integers, representing the card type at each position in the matrix before swapping.\n\nThe next $N$ lines each contain $N$ integers, representing the target matrix.", "outputFormat": "Output the minimum number of coins required to transform the current arrangement into the desired arrangement. If it is impossible, output `Fail`.", "hint": "For $68\\%$ of the testdata, the answer requires paying at most $1$ fee.\n\nFor $86\\%$ of the testdata, the answer requires paying at most $2$ fees.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 300,1 \\leq A,B \\leq 1000000,1 \\leq$ card type ID $\\leq 100000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "炉石collection", "background": "", "description": "小 Z 最近沉迷于一个叫做炉石 collection 的游戏。在游戏中，你需要使用排在 $N \\times N$ 的矩阵内的卡牌来击败你的敌人。\n\n在这个游戏中，排兵布阵是游戏的一个重要内容，例如“日怒保卫者”和“上古看守者”放在一起可以起到更好的效果。为了游戏的平衡性，同样种类的卡牌最多只能出战 $2$ 张。\n\n在一次激烈的战斗之后，小 Z 想要重新编排他的队伍。在游戏中，小 Z 可以支付 $A$ 枚金币让你任意横向交换卡牌，支付 $B$ 枚金币让你任意纵向交换卡牌。\n\n你只需要支付一次金币就可以进行某种类型的交换任意次，直到你停下并进行另一种类型的交换，此时需要支付另一种类型交换的费用。例如，“横向交换-横向交换-纵向交换-纵向交换-纵向交换-横向交换-纵向交换”总共要支付 $2A + 2B$ 枚金币。\n\n小 Z 想要知道，他最少要支付多少金币把他目前的布置变换成他想要的布置。", "inputFormat": "第一行包含三个数字 $N,A,B$，分别表示矩阵的大小，横向交换的费用，纵向交换的费用。\n\n接下来 $N$ 行每行包含 $N$ 个整数，表示开始交换前矩阵内每个位置卡牌的类型。\n\n接下来 $N$ 行每行包含 $N$ 个整数，表示目标矩阵内每个位置卡牌的类型。", "outputFormat": "输出最少需要支付多少金币能够把目前的布置变换成他想要的布置。如果不能变换成功，输出 `Fail`。", "hint": "对于 $68\\%$ 的数据，答案最多只需要支付 $1$ 次费用。\n\n对于 $86\\%$ 的数据，答案最多只需要支付 $2$ 次费用。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 300,1 \\leq A,B \\leq 1000000,1 \\leq$ 卡牌类型的标号 $\\leq 100000$。", "locale": "zh-CN"}}}
{"pid": "P2201", "type": "P", "difficulty": 3, "samples": [["8\nI 2\nI -1\nI 1\nQ 3\nL\nD\nR\nQ 2", "2\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "栈", "链表"], "title": "数列编辑器", "background": null, "description": "小 Z 是一个爱好数学的小学生。最近，他在研究一些关于整数数列的性质。\n\n为了方便他的研究，小 Z 希望实现一个叫做“Open Continuous Lines Processor”的数列编辑器。\n\n一开始，数列编辑器里没有数字，只有一个光标。这个数列编辑器需要支持五种操作。\n\n- `I x` 在当前光标前插入数字 $x$。\n- `D` 删除当前光标前的数字。\n- `L` 光标向前移动一个数字。\n- `R` 光标向后移动一个数字。\n- `Q k` 设光标之前的数列是 $\\{a_1,a_2,\\cdots,a_n\\}$，输出第 $k$ 位及之前最大的前缀和，保证 $k\\leqslant n$。", "inputFormat": "第一行包含一个数字 $N$，表示操作的个数。\n\n接下来包含 $N$ 行，每行包含一条命令。", "outputFormat": "对于每个 `Q k` 命令，输出一个整数表示这个操作的答案。", "hint": "### 数据范围\n\n对于 $50\\%$ 的数据，$N\\leqslant1000$；\n\n对于 $80\\%$ 的数据，$N\\leqslant10^5$；\n\n对于 $100\\%$ 的数据，$N\\leqslant10^6$，插入的数字绝对值大小不会超过 $1000$。\n\n题目保证不会在数列编辑器为空时进行 `D` 操作。", "locale": "zh-CN", "translations": {"en": {"title": "Sequence Editor", "background": "", "description": "Xiao Z is an elementary school student who loves math. Recently, he has been studying properties of integer sequences.\n\nTo facilitate his research, Xiao Z wants to implement a sequence editor called \"Open Continuous Lines Processor\".\n\nAt the beginning, the sequence editor contains no numbers, only a cursor. This sequence editor needs to support five operations.\n\n- `I x` Insert the number $x$ immediately before the cursor.\n- `D` Delete the number immediately before the cursor.\n- `L` Move the cursor one position to the left.\n- `R` Move the cursor one position to the right.\n- `Q k` Let the sequence before the cursor be $\\{a_1, a_2, \\cdots, a_n\\}$. Output the maximum prefix sum among the first $k$ positions, i.e., $\\max_{1 \\le i \\le k} \\sum_{j=1}^{i} a_j$. It is guaranteed that $k \\leqslant n$.", "inputFormat": "The first line contains an integer $N$, indicating the number of operations.\n\nThen follow $N$ lines, each containing one command.", "outputFormat": "For each `Q k` command, output an integer representing the answer to that operation.", "hint": "Constraints\n\nFor $50\\%$ of the testdata, $N \\leqslant 1000$.\n\nFor $80\\%$ of the testdata, $N \\leqslant 10^5$.\n\nFor $100\\%$ of the testdata, $N \\leqslant 10^6$, and the absolute value of each inserted number does not exceed $1000$.\n\nIt is guaranteed that the `D` operation will not be performed when the sequence editor is empty.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数列编辑器", "background": null, "description": "小 Z 是一个爱好数学的小学生。最近，他在研究一些关于整数数列的性质。\n\n为了方便他的研究，小 Z 希望实现一个叫做“Open Continuous Lines Processor”的数列编辑器。\n\n一开始，数列编辑器里没有数字，只有一个光标。这个数列编辑器需要支持五种操作。\n\n- `I x` 在当前光标前插入数字 $x$。\n- `D` 删除当前光标前的数字。\n- `L` 光标向前移动一个数字。\n- `R` 光标向后移动一个数字。\n- `Q k` 设光标之前的数列是 $\\{a_1,a_2,\\cdots,a_n\\}$，输出第 $k$ 位及之前最大的前缀和，保证 $k\\leqslant n$。", "inputFormat": "第一行包含一个数字 $N$，表示操作的个数。\n\n接下来包含 $N$ 行，每行包含一条命令。", "outputFormat": "对于每个 `Q k` 命令，输出一个整数表示这个操作的答案。", "hint": "### 数据范围\n\n对于 $50\\%$ 的数据，$N\\leqslant1000$；\n\n对于 $80\\%$ 的数据，$N\\leqslant10^5$；\n\n对于 $100\\%$ 的数据，$N\\leqslant10^6$，插入的数字绝对值大小不会超过 $1000$。\n\n题目保证不会在数列编辑器为空时进行 `D` 操作。", "locale": "zh-CN"}}}
{"pid": "P2202", "type": "P", "difficulty": 5, "samples": [["4 6\n0 0\n8 4\n-2 1\n0 7", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "USACO", "平衡树"], "title": "[USACO13JAN] Square Overlap S", "background": null, "description": "在一个直角坐标系中，有 $N$ 个边长为 $K$ 的正方形。\n\n给出每一个正方形的中心，请判断所有的正方形是否有重叠。\n\n输入数据保证每一个正方形的中心不重合。", "inputFormat": "第 $1$ 行：两个正整数：$N,K$。\n\n其中：$2\\le N\\le 50000$，$1\\le K\\le 10^6$，$K$ 保证是偶数。\n\n第 $2 \\sim N+1$ 行：每行有两个整数 $x_i,y_i$，描述了第 $i$ 个正方形的中心。\n\n其中：$x_i,y_i$ 均在 $[-10^6,10^6]$ 内。", "outputFormat": "只输出一行：\n\n如果没有正方形重叠，输出 `0`；如果有且只有一对正方形重叠，输出它们重叠的面积；如果有两对及以上的正方形重合，输出 `-1`。\n\n注意：在输出答案后一定要输换行符！", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[USACO13JAN] Square Overlap S", "background": null, "description": "Farmer John is planning to build N (2 <= N <= 50,000) square fenced-in pastures on his farm, each of size exactly K x K (1 <= K <= 1,000,000). Pasture i is centered at point (x_i, y_i) with integer coordinates in the range -1,000,000...1,000,000. However, in his haste to complete his plans, FJ realizes that he may have accidentally placed two pastures in locations that overlap (by overlap, this means the two pastures share a positive area in common). No two pastures share the exact same center point.\n\nGiven the locations of each of the planned square pastures, please help FJ compute the area shared by the two overlapping pastures. Output zero if no two squares overlap, and -1 if overlap occurs between more than a single pair of pastures.", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO13JAN] Square Overlap S", "background": null, "description": "在一个直角坐标系中，有 $N$ 个边长为 $K$ 的正方形。\n\n给出每一个正方形的中心，请判断所有的正方形是否有重叠。\n\n输入数据保证每一个正方形的中心不重合。", "inputFormat": "第 $1$ 行：两个正整数：$N,K$。\n\n其中：$2\\le N\\le 50000$，$1\\le K\\le 10^6$，$K$ 保证是偶数。\n\n第 $2 \\sim N+1$ 行：每行有两个整数 $x_i,y_i$，描述了第 $i$ 个正方形的中心。\n\n其中：$x_i,y_i$ 均在 $[-10^6,10^6]$ 内。", "outputFormat": "只输出一行：\n\n如果没有正方形重叠，输出 `0`；如果有且只有一对正方形重叠，输出它们重叠的面积；如果有两对及以上的正方形重合，输出 `-1`。\n\n注意：在输出答案后一定要输换行符！", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2203", "type": "P", "difficulty": 3, "samples": [["5 6\r\n1\r\n0\r\n0\r\n0\r\n0", "1\r\n1\r\n1\r\n0\r\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "搜索", "2013", "USACO"], "title": "[USACO13OPEN] Blink B", "background": null, "description": "Farmer John 对于农场里昏暗的灯光很不满，于是他刚刚装上一个装饰精美的新吊灯。这个吊灯由 $N(3 \\le N \\le 16)$ 个灯组成，并排成一个**圆圈**。\n\n奶牛们对于这个新的发光装置很有兴趣。他们喜欢玩这样的一个游戏：在在时刻 $T$ 时，对于每一盏灯 $i$，如果在时刻 $T-1$ 时，$i$ 左边的灯（$i\\not=1$ 时为 $i-1$，$i=1$ 时，为 $n$）是开的，那么**改变第 $i$ 盏灯的状态**，否则不做操作。\n\n他们会在 $B\\ (1 \\le B \\le 10^{15})$ 个单位的时间里一直进行这样的操作。**请注意，$B$ 可能会超过一般的 $32$ 位整数的范围。**\n\n现在已知每一个灯的初始状态，请计算出在经过 $B$ 个单位的时间后，每一个灯的状态。", "inputFormat": "第 $1$ 行：两个整数 $N$ 和 $B$。\n\n第 $2\\sim N+1$ 行：第 $i+1$ 行描述了灯的初始状态，用 `0`（关）与 `1`（开）表示。", "outputFormat": "$N$ 行，第 $i$ 行应输出一个整数，描述灯的最终状态，用 `0`（关）与 `1`（开）表示。", "hint": "### 样例解释\n\n下面是样例输出的模拟：\n\n```plain\nTime T=0: 1 0 0 0 0\nTime T=1: 1 1 0 0 0\nTime T=2: 1 0 1 0 0\nTime T=3: 1 1 1 1 0\nTime T=4: 1 0 0 0 1\nTime T=5: 0 1 0 0 1\nTime T=6: 1 1 1 0 1\n```", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] Blink B", "background": "", "description": "Farmer John is unhappy with the dim lighting on the farm, so he has just installed a beautifully decorated new chandelier. This chandelier consists of $N(3 \\le N \\le 16)$ lamps arranged in a **circle**.\n\nThe cows are fascinated by this new light device. They like to play the following game: at time $T$, for each lamp $i$, if at time $T-1$ the lamp to its left (if $i\\not=1$ then $i-1$; if $i=1$, then $N$) is on, then **toggle the state of lamp $i$**; otherwise, do nothing.\n\nThey will keep performing this operation for $B\\ (1 \\le B \\le 10^{15})$ units of time. Please note that $B$ may exceed the range of a typical 32-bit integer.\n\nGiven the initial state of each lamp, compute the state of each lamp after $B$ units of time.", "inputFormat": "Line 1: Two integers $N$ and $B$.\n\nLines $2\\sim N+1$: Line $i+1$ describes the initial state of lamp $i$, represented by `0` (off) or `1` (on).", "outputFormat": "$N$ lines. On line $i$, output a single integer representing the final state of lamp $i$, using `0` (off) or `1` (on).", "hint": "### Sample Explanation\n\nBelow is a simulation of the sample output:\n\n```plain\nTime T=0: 1 0 0 0 0\nTime T=1: 1 1 0 0 0\nTime T=2: 1 0 1 0 0\nTime T=3: 1 1 1 1 0\nTime T=4: 1 0 0 0 1\nTime T=5: 0 1 0 0 1\nTime T=6: 1 1 1 0 1\n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Blink B", "background": null, "description": "Farmer John 对于农场里昏暗的灯光很不满，于是他刚刚装上一个装饰精美的新吊灯。这个吊灯由 $N(3 \\le N \\le 16)$ 个灯组成，并排成一个**圆圈**。\n\n奶牛们对于这个新的发光装置很有兴趣。他们喜欢玩这样的一个游戏：在在时刻 $T$ 时，对于每一盏灯 $i$，如果在时刻 $T-1$ 时，$i$ 左边的灯（$i\\not=1$ 时为 $i-1$，$i=1$ 时，为 $n$）是开的，那么**改变第 $i$ 盏灯的状态**，否则不做操作。\n\n他们会在 $B\\ (1 \\le B \\le 10^{15})$ 个单位的时间里一直进行这样的操作。**请注意，$B$ 可能会超过一般的 $32$ 位整数的范围。**\n\n现在已知每一个灯的初始状态，请计算出在经过 $B$ 个单位的时间后，每一个灯的状态。", "inputFormat": "第 $1$ 行：两个整数 $N$ 和 $B$。\n\n第 $2\\sim N+1$ 行：第 $i+1$ 行描述了灯的初始状态，用 `0`（关）与 `1`（开）表示。", "outputFormat": "$N$ 行，第 $i$ 行应输出一个整数，描述灯的最终状态，用 `0`（关）与 `1`（开）表示。", "hint": "### 样例解释\n\n下面是样例输出的模拟：\n\n```plain\nTime T=0: 1 0 0 0 0\nTime T=1: 1 1 0 0 0\nTime T=2: 1 0 1 0 0\nTime T=3: 1 1 1 1 0\nTime T=4: 1 0 0 0 1\nTime T=5: 0 1 0 0 1\nTime T=6: 1 1 1 0 1\n```", "locale": "zh-CN"}}}
{"pid": "P2205", "type": "P", "difficulty": 4, "samples": [["6 2 \n2 R \n6 L \n1 R \n8 L \n1 R \n2 R ", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "2013", "线段树", "USACO", "离散化"], "title": "[USACO13JAN] 刷墙 Painting the Fence S", "background": null, "description": "Farmer John 已经设计了一种方法来装饰谷仓旁边的长栅栏（把栅栏认为是一根一维的线）。他把一只画刷绑在他最喜爱的奶牛 Bessie 身上，之后就去喝一杯冰水，而 Bessie 隔着栅栏来回走，当她走过某个地方，这里的一段栅栏就被刷上了涂料。\n\nBessie 从栅栏上的位置 $0$ 开始，并且遵循着一个 $N$ 次移动的次序（$1\\le N\\le10^5$）。例如 `10 L` 表示 Bessie 向左移动了 $10$ 个单位长度，`15 R` 表示 Bessie 向右移动了 $15$ 个单位长度。现给出 Bessie 所有移动的列表，Farmer John 想要知道哪些区域的栅栏至少涂了 $K$ 层涂料（只涂一层涂料的区域可能在大雨中被洗掉）。Bessie 在她的行走中最远到达距起始点 $10^9$ 个单位长度。", "inputFormat": "第 $1$ 行：两个整型数 $N$、$K$。\n\n第 $2 \\sim N+1$ 行：每行描述了 Bessie 的 $N$ 次移动中的一次，例如 `15 L`。", "outputFormat": "$1$ 行：被至少涂了 $K$ 层涂料的区域总数。", "hint": "【样例解释】\n\nBessie 从位置 $0$ 开始，向右移动 $2$ 个单位长度，向左移动 $6$ 个单位长度，向右移动 $1$ 个单位长度，向左移动 $8$ 个单位长度，最后向右移动 $3$ 个单位长度。\n\n$6$ 个单位区域至少被涂了两层涂料，是 $[-11,-8],[-4,-3],[0,2]$ 这些区域。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13JAN] Painting the Fence S", "background": null, "description": "Farmer John has devised a brilliant method to paint the long fence next to his barn (think of the fence as a one-dimensional number line). He simply attaches a paint brush to his favorite cow Bessie, and then retires to drink a cold glass of water as Bessie walks back and forth across the fence, applying paint to any segment of the fence that she walks past.\n\nBessie starts at position 0 on the fence and follows a sequence of N moves (1 <= N <= 100,000). Example moves might be \"10 L\", meaning Bessie moves 10 units to the left, or \"15 R\", meaning Bessie moves 15 units to the right. Given a list of all of Bessie's moves, FJ would like to know what area of the fence gets painted with at least K coats of paint. Bessie will move at most 1,000,000,000 units away from the origin during her walk.", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO13JAN] 刷墙 Painting the Fence S", "background": null, "description": "Farmer John 已经设计了一种方法来装饰谷仓旁边的长栅栏（把栅栏认为是一根一维的线）。他把一只画刷绑在他最喜爱的奶牛 Bessie 身上，之后就去喝一杯冰水，而 Bessie 隔着栅栏来回走，当她走过某个地方，这里的一段栅栏就被刷上了涂料。\n\nBessie 从栅栏上的位置 $0$ 开始，并且遵循着一个 $N$ 次移动的次序（$1\\le N\\le10^5$）。例如 `10 L` 表示 Bessie 向左移动了 $10$ 个单位长度，`15 R` 表示 Bessie 向右移动了 $15$ 个单位长度。现给出 Bessie 所有移动的列表，Farmer John 想要知道哪些区域的栅栏至少涂了 $K$ 层涂料（只涂一层涂料的区域可能在大雨中被洗掉）。Bessie 在她的行走中最远到达距起始点 $10^9$ 个单位长度。", "inputFormat": "第 $1$ 行：两个整型数 $N$、$K$。\n\n第 $2 \\sim N+1$ 行：每行描述了 Bessie 的 $N$ 次移动中的一次，例如 `15 L`。", "outputFormat": "$1$ 行：被至少涂了 $K$ 层涂料的区域总数。", "hint": "【样例解释】\n\nBessie 从位置 $0$ 开始，向右移动 $2$ 个单位长度，向左移动 $6$ 个单位长度，向右移动 $1$ 个单位长度，向左移动 $8$ 个单位长度，最后向右移动 $3$ 个单位长度。\n\n$6$ 个单位区域至少被涂了两层涂料，是 $[-11,-8],[-4,-3],[0,2]$ 这些区域。", "locale": "zh-CN"}}}
{"pid": "P2206", "type": "P", "difficulty": 4, "samples": [["3\nFRF\nFRP\nRLB", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2013", "USACO"], "title": "[USACO13OPEN] Bovine Ballet B", "background": "Bessie 成为了一名芭蕾舞演员。", "description": "她的期末汇报演出就在下周，于是 Farmer John 就帮她建一个长方形的舞台。\n\n为了防止 Bessie 从舞台边缘掉下，FJ 决定要建一个足够大的舞台。\n\nBessie 的舞蹈将会占用一个由许多 $1 \\times 1$ 的正方形方块组成的长方形的区域。为了方便，我们把 Bessie 的四只脚按如下方式简写：\n\n- `FR`：前右脚（Front right hoof）\n- `FL`：前左脚（Front left hoof）\n- `RR`：后右脚（Rear right hoof）\n- `RL`：后左脚（Rear left hoof）\n\nBessie 将会从一个如下的四个相邻的格子出发，同时她会面向北方。\n\n```plain\nFL FR\n\nRL RR\n```\n\nBessie 的舞蹈会依据总数为 $N\\ (1 \\le N \\le 1000)$ 的指令进行。每一条指令都指示 Bessie 将一只脚移动一个格子，或者顺时针旋转 $90^\\circ$。\n\n其中，移动的指示由三个字符组成，其中前两个是脚的代号，最后一个代表脚移动的方向：\n\n- `F`：向前\n- `B`：向后\n- `R`：向右\n- `L`：向左\n\n比如说，`FRF` 代表着 Bessie 的前右脚向前移动一个格子，`RLR` 代表她的后左脚将向右移一个格子。\n\n当然，我们这里说的方向是以 Bessie 正面对的方向决定的。\n\n另一方面，旋转的指令也是 $3$ 个字符，其中前两个字母也是脚的代号，代表着旋转的支点。最后一个字母总是为 `P`（pivot）。\n\n比如说，`FRP` 代表着 Bessie 将以前右脚为支点，顺时针旋转 $90^\\circ$。\n\n如果我们从图中看，假设现在 Bessie 的脚是这样的，她正朝向北方：\n\n```plain\n.. .. ..\n\n.. .. FR\n\n.. FL ..\n\n.. RL RR\n```\n\n那么在进行指令 `FRP` 之后，她的脚的位置将变成下面这样，同时她将会朝向东方：\n\n```plain\nRL FL ..\n\nRR .. FR\n\n.. .. ..\n\n.. .. ..\n```\n\n现在已知 $N$ 条 Bessie 的舞蹈的指令，请你计算她的整个舞蹈所需要的最小的长方形舞台，使得 Bessie 的脚不会落到舞台之外。\n\n如果无论怎么样，她都会使自己的两个脚移动到相同的格子里，那么她就会被绊倒，并搞砸这次表演。\n\n在这样的情况下，请输出 $-1$。\n\n不过这是 Bessie 会被绊倒的唯一的原因，因为她在经过练习之后，身体十分的柔软，可以轻松的做到任何奇怪的动作（比如说把后脚伸到前脚的前面）。", "inputFormat": "第一行一个整数 $N$。\n\n下面 $N$ 行，每行 $3$ 个大写字母，表示一个指令。", "outputFormat": "一行，输出舞台的最小面积。", "hint": "样例解释：\n\nBessie 的舞蹈需要至少 $4 \\times 4$ 的舞台，并将会按下图进行：\n\n```plain\n.. .. .. ..\n\n.. .. .. ..\n\n.. .. FL FR\n\n.. .. RL RR\n\n[Face north]\n```\n\n`FRF` 之后：\n\n```plain\n.. .. .. ..\n\n.. .. .. FR\n\n.. .. FL ..\n\n.. .. RL RR\n\n[Face north]\n```\n\n`FRP` 之后：\n\n```plain\n.. RL FL ..\n\n.. RR .. FR\n\n.. .. .. ..\n\n.. .. .. ..\n\n[Face east]\n```\n\n`RLB` 之后：\n\n```plain\nRL .. FL ..\n\n.. RR .. FR\n\n.. .. .. ..\n\n.. .. .. ..\n\n[Face west]\n```", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] Bovine Ballet B", "background": "Bessie has become a ballet dancer.", "description": "Her final recital is next week, so Farmer John (FJ) builds her a rectangular stage.\n\nTo keep Bessie from falling off the edge, FJ decides to build a stage that is large enough.\n\nBessie's dance will occupy a rectangular region composed of many $1 \\times 1$ square cells. For convenience, we abbreviate Bessie's four hooves as follows:\n\n- `FR`: front right hoof (Front right hoof)\n- `FL`: front left hoof (Front left hoof)\n- `RR`: rear right hoof (Rear right hoof)\n- `RL`: rear left hoof (Rear left hoof)\n\nBessie starts with her hooves occupying four adjacent cells as shown below, initially facing north.\n\n```plain\nFL FR\n\nRL RR\n```\n\nBessie's dance consists of $N\\ (1 \\le N \\le 1000)$ instructions. Each instruction either moves one hoof by one cell or rotates $90^\\circ$ clockwise.\n\nA move instruction has three characters, where the first two are the hoof code, and the last character is the direction of movement:\n\n- `F`: forward\n- `B`: backward\n- `R`: right\n- `L`: left\n\nFor example, `FRF` means Bessie's front right hoof moves forward by one cell, and `RLR` means her rear left hoof moves right by one cell.\n\nDirections are relative to the direction Bessie is currently facing.\n\nRotation instructions also have $3$ characters. The first two letters are the hoof code and denote the pivot. The last letter is always `P` (pivot).\n\nFor example, `FRP` means Bessie rotates $90^\\circ$ clockwise about her front right hoof.\n\nFrom the diagram, suppose Bessie's hooves are positioned as follows while she is facing north:\n\n```plain\n.. .. ..\n\n.. .. FR\n\n.. FL ..\n\n.. RL RR\n```\n\nAfter executing the instruction `FRP`, her hooves become:\n\n```plain\nRL FL ..\n\nRR .. FR\n\n.. .. ..\n\n.. .. ..\n```\n\nand she will be facing east.\n\nGiven $N$ dance instructions, compute the minimal rectangular stage area required so that Bessie's hooves never step outside the stage throughout the dance.\n\nIf at any time two of her hooves occupy the same cell, she will trip and ruin the performance.\n\nIn this case, output $-1$.\n\nHowever, this is the only reason Bessie would trip, since after practice she is very flexible and can easily perform any unusual moves (for example, extending a hind hoof ahead of a front hoof).", "inputFormat": "The first line contains an integer $N$.\n\nEach of the next $N$ lines contains $3$ uppercase letters describing an instruction.", "outputFormat": "Output a single line with the minimal stage area.", "hint": "Sample explanation:\n\nBessie's dance requires at least a $4 \\times 4$ stage and proceeds as shown:\n\n```plain\n.. .. .. ..\n\n.. .. .. ..\n\n.. .. FL FR\n\n.. .. RL RR\n\n[Face north]\n```\n\nAfter `FRF`:\n\n```plain\n.. .. .. ..\n\n.. .. .. FR\n\n.. .. FL ..\n\n.. .. RL RR\n\n[Face north]\n```\n\nAfter `FRP`:\n\n```plain\n.. RL FL ..\n\n.. RR .. FR\n\n.. .. .. ..\n\n.. .. .. ..\n\n[Face east]\n```\n\nAfter `RLB`:\n\n```plain\nRL .. FL ..\n\n.. RR .. FR\n\n.. .. .. ..\n\n.. .. .. ..\n\n[Face west]\n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Bovine Ballet B", "background": "Bessie 成为了一名芭蕾舞演员。", "description": "她的期末汇报演出就在下周，于是 Farmer John 就帮她建一个长方形的舞台。\n\n为了防止 Bessie 从舞台边缘掉下，FJ 决定要建一个足够大的舞台。\n\nBessie 的舞蹈将会占用一个由许多 $1 \\times 1$ 的正方形方块组成的长方形的区域。为了方便，我们把 Bessie 的四只脚按如下方式简写：\n\n- `FR`：前右脚（Front right hoof）\n- `FL`：前左脚（Front left hoof）\n- `RR`：后右脚（Rear right hoof）\n- `RL`：后左脚（Rear left hoof）\n\nBessie 将会从一个如下的四个相邻的格子出发，同时她会面向北方。\n\n```plain\nFL FR\n\nRL RR\n```\n\nBessie 的舞蹈会依据总数为 $N\\ (1 \\le N \\le 1000)$ 的指令进行。每一条指令都指示 Bessie 将一只脚移动一个格子，或者顺时针旋转 $90^\\circ$。\n\n其中，移动的指示由三个字符组成，其中前两个是脚的代号，最后一个代表脚移动的方向：\n\n- `F`：向前\n- `B`：向后\n- `R`：向右\n- `L`：向左\n\n比如说，`FRF` 代表着 Bessie 的前右脚向前移动一个格子，`RLR` 代表她的后左脚将向右移一个格子。\n\n当然，我们这里说的方向是以 Bessie 正面对的方向决定的。\n\n另一方面，旋转的指令也是 $3$ 个字符，其中前两个字母也是脚的代号，代表着旋转的支点。最后一个字母总是为 `P`（pivot）。\n\n比如说，`FRP` 代表着 Bessie 将以前右脚为支点，顺时针旋转 $90^\\circ$。\n\n如果我们从图中看，假设现在 Bessie 的脚是这样的，她正朝向北方：\n\n```plain\n.. .. ..\n\n.. .. FR\n\n.. FL ..\n\n.. RL RR\n```\n\n那么在进行指令 `FRP` 之后，她的脚的位置将变成下面这样，同时她将会朝向东方：\n\n```plain\nRL FL ..\n\nRR .. FR\n\n.. .. ..\n\n.. .. ..\n```\n\n现在已知 $N$ 条 Bessie 的舞蹈的指令，请你计算她的整个舞蹈所需要的最小的长方形舞台，使得 Bessie 的脚不会落到舞台之外。\n\n如果无论怎么样，她都会使自己的两个脚移动到相同的格子里，那么她就会被绊倒，并搞砸这次表演。\n\n在这样的情况下，请输出 $-1$。\n\n不过这是 Bessie 会被绊倒的唯一的原因，因为她在经过练习之后，身体十分的柔软，可以轻松的做到任何奇怪的动作（比如说把后脚伸到前脚的前面）。", "inputFormat": "第一行一个整数 $N$。\n\n下面 $N$ 行，每行 $3$ 个大写字母，表示一个指令。", "outputFormat": "一行，输出舞台的最小面积。", "hint": "样例解释：\n\nBessie 的舞蹈需要至少 $4 \\times 4$ 的舞台，并将会按下图进行：\n\n```plain\n.. .. .. ..\n\n.. .. .. ..\n\n.. .. FL FR\n\n.. .. RL RR\n\n[Face north]\n```\n\n`FRF` 之后：\n\n```plain\n.. .. .. ..\n\n.. .. .. FR\n\n.. .. FL ..\n\n.. .. RL RR\n\n[Face north]\n```\n\n`FRP` 之后：\n\n```plain\n.. RL FL ..\n\n.. RR .. FR\n\n.. .. .. ..\n\n.. .. .. ..\n\n[Face east]\n```\n\n`RLB` 之后：\n\n```plain\nRL .. FL ..\n\n.. RR .. FR\n\n.. .. .. ..\n\n.. .. .. ..\n\n[Face west]\n```", "locale": "zh-CN"}}}
