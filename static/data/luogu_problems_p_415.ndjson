{"pid": "P9418", "type": "P", "difficulty": 5, "samples": [["5\n3 4 3 4 1\n", "2\n"], ["见附件", "0"], ["见附件", "1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["POI（波兰）", "2021"], "title": "[POI 2021/2022 R1] Impreza krasnali", "background": "译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Impreza krasnali](https://sio2.mimuw.edu.pl/c/oi29-1/p/imp/)。", "description": "有 $n$ 个人依次站成一排，每个人手上都有一个数字，这 $n$ 个数字形成一个排列。\n\n每个人会二选一地报告他左边或右边的人手上的数字。注意第一个人与第 $n$ 个人并不相邻，所以第一个人总是会报告第二个人的数字，第 $n$ 个人总是会报告第 $n-1$ 个人的数字。\n\n现在你得到了 $n$ 个人报告的数字，求出原先的排列有多少种可能。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，表示每个人报告的数字。", "outputFormat": "一行一个整数，你的答案模 $10^9+7$。", "hint": "对于所有数据，$2\\leq n\\leq 100000$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 10$ | 12 |\n| 2 | $n\\leq 20$ | 30 |\n| 3 | $n\\leq 1000$ | 30 |\n| 4 |  | 28 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2021/2022 R1] Impreza krasnali", "background": "译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Impreza krasnali](https://sio2.mimuw.edu.pl/c/oi29-1/p/imp/)。", "description": "有 $n$ 个人依次站成一排，每个人手上都有一个数字，这 $n$ 个数字形成一个排列。\n\n每个人会二选一地报告他左边或右边的人手上的数字。注意第一个人与第 $n$ 个人并不相邻，所以第一个人总是会报告第二个人的数字，第 $n$ 个人总是会报告第 $n-1$ 个人的数字。\n\n现在你得到了 $n$ 个人报告的数字，求出原先的排列有多少种可能。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，表示每个人报告的数字。", "outputFormat": "一行一个整数，你的答案模 $10^9+7$。", "hint": "对于所有数据，$2\\leq n\\leq 100000$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 10$ | 12 |\n| 2 | $n\\leq 20$ | 30 |\n| 3 | $n\\leq 1000$ | 30 |\n| 4 |  | 28 |", "locale": "zh-CN"}}}
{"pid": "P9419", "type": "P", "difficulty": 7, "samples": [["2 100\n", "1\n"], ["3 100\n", "15\n"], ["10 1000\n", "100\n"], ["500 100000\n", "60000\n"], ["100000 1000\n", "0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "递推", "POI（波兰）", "2021"], "title": "[POI 2021/2022 R1] Układanie kart", "background": "译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Układanie kart](https://sio2.mimuw.edu.pl/c/oi29-1/p/ukl/)。", "description": "我们用以下方法将一个排列递增排序:\n\n一次操作：记第一个数字为 $k$，在排列中找到 $k-1$（$k=1$ 则取 $n$），把 $k-1$ 拉到排列的第一个位置，中间的数字依次后移。\n\n一次操作的价值：$k-1$（或 $n$）在原排列的位置（这个从 $0$ 开始标号）。\n\n一个排列的价值：进行若干次操作直到排列有序，价值为每次操作的价值之和。\n\n给你 $n,m$，求所有 $n!$ 个排列的价值之和，对 $m$ 取模。", "inputFormat": "一行两个正整数，$n,m$。", "outputFormat": "一行一个整数，答案对 $m$ 取模的结果。", "hint": "对于所有数据，$2\\leq n\\leq 1000000$，$2\\leq m\\leq 10^9$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 10$ | 10 |\n| 2 | $n\\leq 2000$ | 60 |\n| 3 |  | 30 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2021/2022 R1] Układanie kart", "background": "译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Układanie kart](https://sio2.mimuw.edu.pl/c/oi29-1/p/ukl/)。", "description": "我们用以下方法将一个排列递增排序:\n\n一次操作：记第一个数字为 $k$，在排列中找到 $k-1$（$k=1$ 则取 $n$），把 $k-1$ 拉到排列的第一个位置，中间的数字依次后移。\n\n一次操作的价值：$k-1$（或 $n$）在原排列的位置（这个从 $0$ 开始标号）。\n\n一个排列的价值：进行若干次操作直到排列有序，价值为每次操作的价值之和。\n\n给你 $n,m$，求所有 $n!$ 个排列的价值之和，对 $m$ 取模。", "inputFormat": "一行两个正整数，$n,m$。", "outputFormat": "一行一个整数，答案对 $m$ 取模的结果。", "hint": "对于所有数据，$2\\leq n\\leq 1000000$，$2\\leq m\\leq 10^9$。\n\n| 子任务编号 | 附加限制 | 分数 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq 10$ | 10 |\n| 2 | $n\\leq 2000$ | 60 |\n| 3 |  | 30 |", "locale": "zh-CN"}}}
{"pid": "P9420", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000, 1000], "memory": [262144, 262144]}, "tags": ["动态规划 DP", "2023", "提交答案", "素数判断,质数,筛法", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 子 2023 / 双子数", "background": "", "description": "## A 子 2023\n\n小蓝在黑板上连续写下从 $1$ 到 $2023$ 之间所有的整数，得到了一个数字序列：\n\n$$S = 12345678910111213\\cdots 20222023$$\n\n小蓝想知道 $S$ 中有多少种子序列恰好等于 $2023$？\n\n提示，以下是 $3$ 种满足条件的子序列（用中括号标识出的数字是子序列包含的数字）：\n\n$$1[\\textbf2]34567891[\\textbf0]111[\\textbf2]1[\\textbf3]14151617181920212223 \\cdots$$\n\n$$1[\\textbf2]34567891[\\textbf0]111[\\textbf2]131415161718192021222[\\textbf3] \\cdots$$\n\n$$1[\\textbf2]34567891[\\textbf0]111213141516171819[\\textbf2]021222[\\textbf3] \\cdots$$\n\n注意以下是不满足条件的子序列，虽然包含了 $2$、$0$、$2$、$3$ 四个数字，但是顺序不对：\n\n$$1[\\textbf2]345678910111[\\textbf2]131415161718192[\\textbf0]21222[\\textbf3] \\cdots$$\n\n## B 双子数\n\n若一个正整数 $x$ 可以被表示为 $p^2 \\times q^2$，其中 $p$、$q$ 为质数且 $p \\neq q$，则 $x$ 是\n一个 “双子数”。请计算区间 $[2333, 23333333333333]$ 内有多少个 “双子数”？", "inputFormat": "输入一个大写字母，表示第几个问题。\n", "outputFormat": "根据所输入的问题编号，输出对应问题的答案。\n", "hint": "答题模板，可供参考。\n\n```cpp\n#include<iostream>\nusing namespace std;\nint main() {\n    string ans [] = {\n        \"The answer of task A\", // 双引号中替换为 A 题的答案\n        \"The answer of task B\", // 双引号中替换为 B 题的答案\n    };\n    char T;\n    cin >> T;\n    cout << ans[T - 'A'] << endl;\n    return 0;\n}\n```\n\n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 A、B 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 子 2023 / 双子数", "background": "", "description": "## A 子 2023\n\n小蓝在黑板上连续写下从 $1$ 到 $2023$ 之间所有的整数，得到了一个数字序列：\n\n$$S = 12345678910111213\\cdots 20222023$$\n\n小蓝想知道 $S$ 中有多少种子序列恰好等于 $2023$？\n\n提示，以下是 $3$ 种满足条件的子序列（用中括号标识出的数字是子序列包含的数字）：\n\n$$1[\\textbf2]34567891[\\textbf0]111[\\textbf2]1[\\textbf3]14151617181920212223 \\cdots$$\n\n$$1[\\textbf2]34567891[\\textbf0]111[\\textbf2]131415161718192021222[\\textbf3] \\cdots$$\n\n$$1[\\textbf2]34567891[\\textbf0]111213141516171819[\\textbf2]021222[\\textbf3] \\cdots$$\n\n注意以下是不满足条件的子序列，虽然包含了 $2$、$0$、$2$、$3$ 四个数字，但是顺序不对：\n\n$$1[\\textbf2]345678910111[\\textbf2]131415161718192[\\textbf0]21222[\\textbf3] \\cdots$$\n\n## B 双子数\n\n若一个正整数 $x$ 可以被表示为 $p^2 \\times q^2$，其中 $p$、$q$ 为质数且 $p \\neq q$，则 $x$ 是\n一个 “双子数”。请计算区间 $[2333, 23333333333333]$ 内有多少个 “双子数”？", "inputFormat": "输入一个大写字母，表示第几个问题。\n", "outputFormat": "根据所输入的问题编号，输出对应问题的答案。\n", "hint": "答题模板，可供参考。\n\n```cpp\n#include<iostream>\nusing namespace std;\nint main() {\n    string ans [] = {\n        \"The answer of task A\", // 双引号中替换为 A 题的答案\n        \"The answer of task B\", // 双引号中替换为 B 题的答案\n    };\n    char T;\n    cin >> T;\n    cout << ans[T - 'A'] << endl;\n    return 0;\n}\n```\n\n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 A、B 题", "locale": "zh-CN"}}}
{"pid": "P9421", "type": "P", "difficulty": 2, "samples": [["4\n1 2 2 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2023", "蓝桥杯国赛", "分类讨论"], "title": "[蓝桥杯 2023 国 B] 班级活动", "background": "", "description": "小明的老师准备组织一次班级活动。班上一共有 $n$ 名（$n$ 为偶数）同学，老师想把所有的同学进行分组，每两名同学一组。为了公平，老师给每名同学随机分配了一个 $n$ 以内的正整数作为 id，第 $i$ 名同学的 id 为 $a_i$。\n\n老师希望通过更改若干名同学的 id 使得对于任意一名同学 $i$，有且仅有另一名同学 $j$ 的 id 与其相同（$a_i = a_j$）。请问老师最少需要更改多少名同学的 id？", "inputFormat": "输入共 $2$ 行。\n\n第一行为一个正整数 $n$。\n\n第二行为 $n$ 个由空格隔开的整数 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "输出共 $1$ 行，一个整数。", "hint": "### 样例说明\n\n仅需要把 $a_1$ 改为 $3$ 或者把 $a_4$ 改为 $1$ 即可。\n\n### 评测用例规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n \\le 10^3$。\n- 对于 $100\\%$ 的数据，保证 $n \\le 10^5$。\n\n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 C 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 班级活动", "background": "", "description": "小明的老师准备组织一次班级活动。班上一共有 $n$ 名（$n$ 为偶数）同学，老师想把所有的同学进行分组，每两名同学一组。为了公平，老师给每名同学随机分配了一个 $n$ 以内的正整数作为 id，第 $i$ 名同学的 id 为 $a_i$。\n\n老师希望通过更改若干名同学的 id 使得对于任意一名同学 $i$，有且仅有另一名同学 $j$ 的 id 与其相同（$a_i = a_j$）。请问老师最少需要更改多少名同学的 id？", "inputFormat": "输入共 $2$ 行。\n\n第一行为一个正整数 $n$。\n\n第二行为 $n$ 个由空格隔开的整数 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "输出共 $1$ 行，一个整数。", "hint": "### 样例说明\n\n仅需要把 $a_1$ 改为 $3$ 或者把 $a_4$ 改为 $1$ 即可。\n\n### 评测用例规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n \\le 10^3$。\n- 对于 $100\\%$ 的数据，保证 $n \\le 10^5$。\n\n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 C 题", "locale": "zh-CN"}}}
{"pid": "P9422", "type": "P", "difficulty": 3, "samples": [["4 3\n1 2 3 4\n1 5 4", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "队列", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 合并数列", "background": "", "description": "小明发现有很多方案可以把一个很大的正整数拆成若干正整数的和。他采取了其中两种方案，分别将他们列为两个数组 $\\{a_1, a_2, \\cdots a_n\\}$ 和 $\\{b_1, b_2, \\cdots b_m\\}$。两个数组的和相同。\n\n定义一次合并操作可以将某数组内相邻的两个数合并为一个新数，新数的值是原来两个数的和。小明想通过若干次合并操作将两个数组变成一模一样，即 $n = m$ 且对于任意下标 $i$ 满足 $a_i = b_i$。请计算至少需要多少次合并操作可以完成小明的目标。", "inputFormat": "输入共 $3$ 行。\n\n第一行为两个正整数 $n, m$。\n\n第二行为 $n$ 个由空格隔开的整数 $a_1, a_2, \\cdots, a_n$。\n\n第三行为 $m$ 个由空格隔开的整数 $b_1, b_2, \\cdots, b_m$。", "outputFormat": "输出共 $1$ 行，一个整数。", "hint": "### 样例说明\n\n只需要将 $a_2$ 和 $a_3$ 合并，数组 $a$ 变为 $\\{1,5,4\\}$，即和 $b$ 相同。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，保证 $n,m \\le 10^3$。\n - 对于 $100\\%$ 的数据，保证 $n, m \\le 10^5$，$0 < a_i, b_i \\le 10^5$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 D 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 合并数列", "background": "", "description": "小明发现有很多方案可以把一个很大的正整数拆成若干正整数的和。他采取了其中两种方案，分别将他们列为两个数组 $\\{a_1, a_2, \\cdots a_n\\}$ 和 $\\{b_1, b_2, \\cdots b_m\\}$。两个数组的和相同。\n\n定义一次合并操作可以将某数组内相邻的两个数合并为一个新数，新数的值是原来两个数的和。小明想通过若干次合并操作将两个数组变成一模一样，即 $n = m$ 且对于任意下标 $i$ 满足 $a_i = b_i$。请计算至少需要多少次合并操作可以完成小明的目标。", "inputFormat": "输入共 $3$ 行。\n\n第一行为两个正整数 $n, m$。\n\n第二行为 $n$ 个由空格隔开的整数 $a_1, a_2, \\cdots, a_n$。\n\n第三行为 $m$ 个由空格隔开的整数 $b_1, b_2, \\cdots, b_m$。", "outputFormat": "输出共 $1$ 行，一个整数。", "hint": "### 样例说明\n\n只需要将 $a_2$ 和 $a_3$ 合并，数组 $a$ 变为 $\\{1,5,4\\}$，即和 $b$ 相同。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，保证 $n,m \\le 10^3$。\n - 对于 $100\\%$ 的数据，保证 $n, m \\le 10^5$，$0 < a_i, b_i \\le 10^5$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 D 题", "locale": "zh-CN"}}}
{"pid": "P9423", "type": "P", "difficulty": 4, "samples": [["5\n1 4\n1 0\n2 1\n1 2\n0 1", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2023", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 数三角", "background": "", "description": "小明在二维坐标系中放置了 $n$ 个点，他想在其中选出一个包含三个点的子集，这三个点能组成三角形。然而这样的方案太多了，他决定只选择那些可以组成等腰三角形的方案。请帮他计算出一共有多少种选法可以组成等腰三角形？\n\n", "inputFormat": "输入共 $n + 1$ 行。\n\n第一行为一个正整数 $n$。\n\n后面 $n$ 行，每行两个整数 $x_i, y_i$ 表示第 $i$ 个点的坐标。", "outputFormat": "输出共 $1$ 行，一个整数。", "hint": "### 样例说明\n\n一共有 $5$ 种选法：$\\{2,3,4\\}$、$\\{3,4,5\\}$、$\\{4,5,2\\}$、$\\{5,2,3\\}$、$\\{1,3,5\\}$。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，保证 $n \\le 200$。\n - 对于 $100\\%$ 的数据，保证 $n \\le 2000$，$0 \\le x_i, y_i \\le 10^9$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 E 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 数三角", "background": "", "description": "小明在二维坐标系中放置了 $n$ 个点，他想在其中选出一个包含三个点的子集，这三个点能组成三角形。然而这样的方案太多了，他决定只选择那些可以组成等腰三角形的方案。请帮他计算出一共有多少种选法可以组成等腰三角形？\n\n", "inputFormat": "输入共 $n + 1$ 行。\n\n第一行为一个正整数 $n$。\n\n后面 $n$ 行，每行两个整数 $x_i, y_i$ 表示第 $i$ 个点的坐标。", "outputFormat": "输出共 $1$ 行，一个整数。", "hint": "### 样例说明\n\n一共有 $5$ 种选法：$\\{2,3,4\\}$、$\\{3,4,5\\}$、$\\{4,5,2\\}$、$\\{5,2,3\\}$、$\\{1,3,5\\}$。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，保证 $n \\le 200$。\n - 对于 $100\\%$ 的数据，保证 $n \\le 2000$，$0 \\le x_i, y_i \\le 10^9$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 E 题", "locale": "zh-CN"}}}
{"pid": "P9424", "type": "P", "difficulty": 5, "samples": [["4 4\n10 20 30 40\n1 2\n2 1\n2 3\n4 3", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "强连通分量", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 删边问题", "background": "", "description": "给定一个包含 $N$ 个结点 $M$ 条边的无向图 G，结点编号 $1 \\cdots N$。其中每个结点都有一个点权 $W_i$。\n\n你可以从 $M$ 条边中任选恰好一条边删除，如果剩下的图恰好包含 $2$ 个连通分量，就称这是一种合法的删除方案。\n\n对于一种合法的删除方案，我们假设 $2$ 个连通分量包含的点的权值之和分别为 $X$ 和 $Y$，请你找出一种使得 $X$ 与 $Y$ 的差值最小的方案。输出 $X$ 与 $Y$ 的差值。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$。\n\n第二行包含 $N$ 个整数，$W_1, W_2, \\cdots, W_N$。\n\n以下 $M$ 行每行包含 $2$ 个整数 $U$ 和 $V$，代表结点 $U$ 和 $V$ 之间有一条边。", "outputFormat": "一个整数代表最小的差值。如果不存在合法的删除方案，输出 $-1$。", "hint": "### 样例说明\n\n由于 $1$ 和 $2$ 之间实际有 $2$ 条边，所以合法的删除方案有 $2$ 种，分别是删除 $(2, 3)$ 之间的边和删除 $(3, 4)$ 之间的边。\n\n删除 $(2, 3)$ 之间的边，剩下的图包含 $2$ 个连通分量：$\\{1,2\\}$ 和 $\\{3,4\\}$，点权和分别是 $30$、$70$，差为 $40$。\n\n删除 $(3, 4)$ 之间的边，剩下的图包含 $2$ 个连通分量：$\\{1,2,3\\}$ 和 $\\{4\\}$，点权和分别是 $60$、$40$，差为 $20$。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，$1 \\le N, M \\le 10000$。\n - 对于另外 $20\\%$ 的数据，每个结点的度数不超过 $2$。\n - 对于 $100\\%$ 的数据，$1 \\le N, M \\le 200000$，$0 \\le W_i \\le 10^9$，$1 \\le U, V \\le N$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 F 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 删边问题", "background": "", "description": "给定一个包含 $N$ 个结点 $M$ 条边的无向图 G，结点编号 $1 \\cdots N$。其中每个结点都有一个点权 $W_i$。\n\n你可以从 $M$ 条边中任选恰好一条边删除，如果剩下的图恰好包含 $2$ 个连通分量，就称这是一种合法的删除方案。\n\n对于一种合法的删除方案，我们假设 $2$ 个连通分量包含的点的权值之和分别为 $X$ 和 $Y$，请你找出一种使得 $X$ 与 $Y$ 的差值最小的方案。输出 $X$ 与 $Y$ 的差值。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$。\n\n第二行包含 $N$ 个整数，$W_1, W_2, \\cdots, W_N$。\n\n以下 $M$ 行每行包含 $2$ 个整数 $U$ 和 $V$，代表结点 $U$ 和 $V$ 之间有一条边。", "outputFormat": "一个整数代表最小的差值。如果不存在合法的删除方案，输出 $-1$。", "hint": "### 样例说明\n\n由于 $1$ 和 $2$ 之间实际有 $2$ 条边，所以合法的删除方案有 $2$ 种，分别是删除 $(2, 3)$ 之间的边和删除 $(3, 4)$ 之间的边。\n\n删除 $(2, 3)$ 之间的边，剩下的图包含 $2$ 个连通分量：$\\{1,2\\}$ 和 $\\{3,4\\}$，点权和分别是 $30$、$70$，差为 $40$。\n\n删除 $(3, 4)$ 之间的边，剩下的图包含 $2$ 个连通分量：$\\{1,2,3\\}$ 和 $\\{4\\}$，点权和分别是 $60$、$40$，差为 $20$。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，$1 \\le N, M \\le 10000$。\n - 对于另外 $20\\%$ 的数据，每个结点的度数不超过 $2$。\n - 对于 $100\\%$ 的数据，$1 \\le N, M \\le 200000$，$0 \\le W_i \\le 10^9$，$1 \\le U, V \\le N$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 F 题", "locale": "zh-CN"}}}
{"pid": "P9425", "type": "P", "difficulty": 3, "samples": [["4 4 2\nAAAB\nABAB\nBBAB\nBAAA", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "广度优先搜索 BFS", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] AB 路线", "background": "", "description": "有一个由 $N \\times M$ 个方格组成的迷宫，每个方格写有一个字母 `A` 或者 `B`。小蓝站在迷宫左上角的方格，目标是走到右下角的方格。他每一步可以移动到上下左右相邻的方格去。\n\n由于特殊的原因，小蓝的路线必须先走 $K$ 个 `A` 格子、再走 $K$ 个 `B` 格子、再走 $K$ 个 `A` 格子、再走 $K$ 个 `B` 格子……如此反复交替。\n\n请你计算小蓝最少需要走多少步，才能到达右下角方格？\n\n注意路线经过的格子数不必一定是 $K$ 的倍数，即最后一段 `A` 或 `B` 的格子可以不满 $K$ 个。起点保证是 `A` 格子。\n\n例如 $K = 3$ 时，以下 $3$ 种路线是合法的：\n\n```plain\nAA\nAAAB\nAAABBBAAABBB\n```\n\n以下 $3$ 种路线不合法：\n\n```plain\nABABAB\nABBBAAABBB\nAAABBBBBBAAA\n```", "inputFormat": "第一行包含三个整数 $N$、$M$ 和 $K$。\n\n以下 $N$ 行，每行包含 $M$ 个字符（`A` 或 `B`），代表格子类型。\n\n", "outputFormat": "一个整数，代表最少步数。如果无法到达右下角，输出 $-1$。", "hint": "### 样例说明\n\n每一步方向如下：下右下右上右下下；路线序列： `AABBAABBA`。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，$1 \\le N, M \\le 4$。\n - 对于另 $20\\%$ 的数据，$K = 1$。\n - 对于 $100\\%$ 的数据，$1 \\le N, M \\le 1000$，$1 \\le K \\le 10$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 G 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] AB 路线", "background": "", "description": "有一个由 $N \\times M$ 个方格组成的迷宫，每个方格写有一个字母 `A` 或者 `B`。小蓝站在迷宫左上角的方格，目标是走到右下角的方格。他每一步可以移动到上下左右相邻的方格去。\n\n由于特殊的原因，小蓝的路线必须先走 $K$ 个 `A` 格子、再走 $K$ 个 `B` 格子、再走 $K$ 个 `A` 格子、再走 $K$ 个 `B` 格子……如此反复交替。\n\n请你计算小蓝最少需要走多少步，才能到达右下角方格？\n\n注意路线经过的格子数不必一定是 $K$ 的倍数，即最后一段 `A` 或 `B` 的格子可以不满 $K$ 个。起点保证是 `A` 格子。\n\n例如 $K = 3$ 时，以下 $3$ 种路线是合法的：\n\n```plain\nAA\nAAAB\nAAABBBAAABBB\n```\n\n以下 $3$ 种路线不合法：\n\n```plain\nABABAB\nABBBAAABBB\nAAABBBBBBAAA\n```", "inputFormat": "第一行包含三个整数 $N$、$M$ 和 $K$。\n\n以下 $N$ 行，每行包含 $M$ 个字符（`A` 或 `B`），代表格子类型。\n\n", "outputFormat": "一个整数，代表最少步数。如果无法到达右下角，输出 $-1$。", "hint": "### 样例说明\n\n每一步方向如下：下右下右上右下下；路线序列： `AABBAABBA`。\n\n### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，$1 \\le N, M \\le 4$。\n - 对于另 $20\\%$ 的数据，$K = 1$。\n - 对于 $100\\%$ 的数据，$1 \\le N, M \\le 1000$，$1 \\le K \\le 10$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 G 题", "locale": "zh-CN"}}}
{"pid": "P9426", "type": "P", "difficulty": 3, "samples": [["3 2\n1 2\n1 3\n3 4\n1 4\n2 4", "3\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2023", "前缀和", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 抓娃娃", "background": null, "description": "小明拿了 $n$ 条线段练习抓娃娃。他将所有线段铺在数轴上，第 $i$ 条线段的左端点在 $l_i$，右端点在 $r_i$。小明用 $m$ 个区间去框这些线段，第 $i$ 个区间的范围是 $[L_i, R_i]$。如果一个线段有**至少一半**的长度被包含在某个区间内，则将其视为被这个区间框住。请计算出每个区间框住了多少个线段？", "inputFormat": "输入共 $n + m + 1$ 行。\n\n第一行为两个正整数 $n, m$。\n\n后面 $n$ 行，每行两个整数 $l_i, r_i$。\n\n后面 $m$ 行，每行两个整数 $L_i, R_i$。", "outputFormat": "输出共 $m$ 行，每行一个整数。", "hint": "### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，保证 $n, m \\le 10^3$。\n - 对于 $100\\%$ 的数据，保证 $n, m ≤ 10^5$，$l_i < r_i$，$0 < l_i, r_i, L_i, R_i \\le 10^6$，$\\max \\{r_i − l_i\\} \\le \\min \\{R_i − L_i\\}$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 H 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 抓娃娃", "background": null, "description": "小明拿了 $n$ 条线段练习抓娃娃。他将所有线段铺在数轴上，第 $i$ 条线段的左端点在 $l_i$，右端点在 $r_i$。小明用 $m$ 个区间去框这些线段，第 $i$ 个区间的范围是 $[L_i, R_i]$。如果一个线段有**至少一半**的长度被包含在某个区间内，则将其视为被这个区间框住。请计算出每个区间框住了多少个线段？", "inputFormat": "输入共 $n + m + 1$ 行。\n\n第一行为两个正整数 $n, m$。\n\n后面 $n$ 行，每行两个整数 $l_i, r_i$。\n\n后面 $m$ 行，每行两个整数 $L_i, R_i$。", "outputFormat": "输出共 $m$ 行，每行一个整数。", "hint": "### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，保证 $n, m \\le 10^3$。\n - 对于 $100\\%$ 的数据，保证 $n, m ≤ 10^5$，$l_i < r_i$，$0 < l_i, r_i, L_i, R_i \\le 10^6$，$\\max \\{r_i − l_i\\} \\le \\min \\{R_i − L_i\\}$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 H 题。", "locale": "zh-CN"}}}
{"pid": "P9427", "type": "P", "difficulty": 5, "samples": [["2 8", "2233333333"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 拼数字", "background": "", "description": "小蓝要用 $N$ 个数字 $2$ 和 $M$ 个数字 $3$ 拼出一个 $N + M$ 位的整数。请你计算小蓝能拼出的最大的 $2023$ 的倍数是多少？", "inputFormat": "两个整数 $N$ 和 $M$。", "outputFormat": "一个 $N + M$ 位的整数，代表答案。如果拼不出 $2023$ 的倍数，输出 $-1$。", "hint": "### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，$1 \\le N, M \\le 12$。\n - 对于 $40\\%$ 的数据，$1 \\le N, M \\le 100$。\n - 对于 $60\\%$ 的数据，$1 \\le N, M \\le 10000$。\n - 对于 $100\\%$ 的数据，$1 \\le N, M \\le 1000000$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 I 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 拼数字", "background": "", "description": "小蓝要用 $N$ 个数字 $2$ 和 $M$ 个数字 $3$ 拼出一个 $N + M$ 位的整数。请你计算小蓝能拼出的最大的 $2023$ 的倍数是多少？", "inputFormat": "两个整数 $N$ 和 $M$。", "outputFormat": "一个 $N + M$ 位的整数，代表答案。如果拼不出 $2023$ 的倍数，输出 $-1$。", "hint": "### 评测用例规模与约定\n\n - 对于 $20\\%$ 的数据，$1 \\le N, M \\le 12$。\n - 对于 $40\\%$ 的数据，$1 \\le N, M \\le 100$。\n - 对于 $60\\%$ 的数据，$1 \\le N, M \\le 10000$。\n - 对于 $100\\%$ 的数据，$1 \\le N, M \\le 1000000$。\n \n第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 I 题", "locale": "zh-CN"}}}
{"pid": "P9428", "type": "P", "difficulty": 6, "samples": [["4 1 0.2\n1 2\n2 3\n3 4\n2", "1.30"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "期望", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 B] 逃跑", "background": "", "description": "小明所在星系有 $n$ 颗星球，编号为 $1$ 到 $n$。这些星球通过 $n-1$ 条无向边连成一棵树。根结点为编号为 $1$ 的星球。\n\n为了在星际战争到来时逃到其他星系，小明在根结点设置了逃离用的传送门。每个星球的人只需要一直往父结点星球移动就可以抵达根结点。为了方便各个星球的人去往根结点，小明将其中 $m$ 个星球设置为了跳板星球。在从某个星球去往根结点的路径上，当一个人经过任意星球（包括起点星球）时，他可以尝试直接跳跃到 **其前往根结点路径上的除当前星球以外的第一个跳板星球**，其时间花费和走到父结点星球的时间花费相同，都是 $1$ 单位时间。\n\n然而，因为技术问题，向跳板星球的跳跃并不一定成功，每一次跳跃都有 $p$ 的概率失败，并转而跳跃到当前星球的父结点星球（相当于直接走到父结点星球）；同时此跳板星球失效，将 **不再视为跳板星球**。\n\n为了衡量移动效率，小明想知道，如果一个人在这 $n$ 颗星球中随机选择一颗出发前往根结点，其花费的最短时间的期望是多少单位时间？", "inputFormat": "输入共 $n + 1$ 行，第一行为两个正整数 $n$、$m$ 和一个浮点数 $p$。\n\n后面 $n - 1$ 行，每行两个正整数 $x_i,y_i$ 表示第 $i$ 条边的两个端点。\n\n最后一行，共 $m$ 个正整数表示所有跳板星球的编号。", "outputFormat": "一行，一个浮点数，表示答案（请保留两位小数）。", "hint": "### 样例说明\n\n从 $1$ 号星球出发的时间花费为 $0$；  \n从 $2$ 号星球出发的时间花费为 $1$；  \n从 $3$ 号星球出发的时间花费为 $2$；  \n从 $4$ 号星球出发的时间花费为 $0.8 \\times 2 + 0.2 \\times 3 = 2.2$。\n\n所以期望时间为 $\\dfrac{0+1+2+2.2}{4}=1.3$。\n\n### 评测用例规模与约定\n\n - 对于 $30\\%$ 的数据，保证 $1 \\le n \\le 2000$。\n - 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 10^6$，$1 \\le m \\le n$，$0 < p < 1$。\n \n 第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 J 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 B] 逃跑", "background": "", "description": "小明所在星系有 $n$ 颗星球，编号为 $1$ 到 $n$。这些星球通过 $n-1$ 条无向边连成一棵树。根结点为编号为 $1$ 的星球。\n\n为了在星际战争到来时逃到其他星系，小明在根结点设置了逃离用的传送门。每个星球的人只需要一直往父结点星球移动就可以抵达根结点。为了方便各个星球的人去往根结点，小明将其中 $m$ 个星球设置为了跳板星球。在从某个星球去往根结点的路径上，当一个人经过任意星球（包括起点星球）时，他可以尝试直接跳跃到 **其前往根结点路径上的除当前星球以外的第一个跳板星球**，其时间花费和走到父结点星球的时间花费相同，都是 $1$ 单位时间。\n\n然而，因为技术问题，向跳板星球的跳跃并不一定成功，每一次跳跃都有 $p$ 的概率失败，并转而跳跃到当前星球的父结点星球（相当于直接走到父结点星球）；同时此跳板星球失效，将 **不再视为跳板星球**。\n\n为了衡量移动效率，小明想知道，如果一个人在这 $n$ 颗星球中随机选择一颗出发前往根结点，其花费的最短时间的期望是多少单位时间？", "inputFormat": "输入共 $n + 1$ 行，第一行为两个正整数 $n$、$m$ 和一个浮点数 $p$。\n\n后面 $n - 1$ 行，每行两个正整数 $x_i,y_i$ 表示第 $i$ 条边的两个端点。\n\n最后一行，共 $m$ 个正整数表示所有跳板星球的编号。", "outputFormat": "一行，一个浮点数，表示答案（请保留两位小数）。", "hint": "### 样例说明\n\n从 $1$ 号星球出发的时间花费为 $0$；  \n从 $2$ 号星球出发的时间花费为 $1$；  \n从 $3$ 号星球出发的时间花费为 $2$；  \n从 $4$ 号星球出发的时间花费为 $0.8 \\times 2 + 0.2 \\times 3 = 2.2$。\n\n所以期望时间为 $\\dfrac{0+1+2+2.2}{4}=1.3$。\n\n### 评测用例规模与约定\n\n - 对于 $30\\%$ 的数据，保证 $1 \\le n \\le 2000$。\n - 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 10^6$，$1 \\le m \\le n$，$0 < p < 1$。\n \n 第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 J 题", "locale": "zh-CN"}}}
{"pid": "P9429", "type": "P", "difficulty": 1, "samples": [["4 6 2 11", "2 4 2 3"], ["3 4 5 6", "4 2 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化", "构造"], "title": "[NAPC-#1] Stage1 - Simple", "background": "> ![](https://cdn.luogu.com.cn/upload/image_hosting/pon0cylv.png)", "description": "### 【简要题意】\n给定 $n,m,k,S$，请构造长度为 $n$ 的整数序列 $a$ 使得：\n- $0\\leqslant a_i\\leqslant m,\\forall i\\in[1,n]$（即序列 $a$ 内的每个元素均不小于 $0$ 且不大于 $m$）。\n- $|a_i-a_{i-1}|\\leqslant k,\\forall i\\in(1,n]$（即序列 $a$ 内的每两个相邻元素之差的绝对值均不大于 $k$）。\n- $(\\sum_{i=1}^n a_i ) = S$（即序列 $a$ 内的所有元素的和为 $S$）。\n\n**保证有解。**\n\n### 【原始题意】\n\n前面忘了，但是~~你随 kid 穿越到了 ic~~（I wanna be the Creator），来到了一个关卡编辑器面前。该地图宽为 $n$，高为 $(m+1)$，是你不能修改的；里面还有 $S$ 个 $1\\times1$ 大小的未摆放的砖。现在你需要帮 kid 摆好这一面，也就是说，将这 $S$ 个砖摆放好，使得他可以通过。有以下要求：\n\n1. ~~砖是有重力的~~，所以**一块砖只能摆放在下边界上或者另一块砖上**。同一横纵坐标不能摆放多块砖。\n2. 你至少要给 kid 留一条缝来通过，所以每一列你最高只能放 $m$ 块砖（地图高度为 $m+1$）。但是注意，ic 关卡下边界没有伤害，某一列是可以不放砖块的。\n3. kid 的跳跃能力和~~从高处坠落而不受伤的能力~~是有限的，这用一个非负整数 $k$ 来描述：相邻两列摆放的砖的数量之差的绝对值不能超过 $k$，否则该关卡对 kid 来说就是无解的。_（但是注意：该条对第一列高度没有要求，kid 出生点就在第一列。）_\n4. 你要把所有 $S$ 块砖都摆进去，不多不少。\n\nCreator 不会为难你，因此一定有一种关卡符合上述所有规则。\n\n为了输出方便，你只需要给出第 $i$ 列有多少砖块（记为 $a_i$），输出 $a$ 序列即可。容易证明，一个合法的 $a$ 序列和一个合法关卡是一一对应的。", "inputFormat": "仅一行 $4$ 个非负整数 $n,m,k,S$。", "outputFormat": "输出一行 $n$ 个非负整数表示你构造的序列 $a$。如果有多种可能的序列，输出任意一个符合题意的序列即可。**保证至少有一个序列满足题目要求。**", "hint": "### 【数据范围】\n\n该题共有 $10$ 个测试点，每个测试点等分。\n\n- 对于 $20\\%$ 的数据，$S=n\\cdot m$。\n- 对于 $20\\%$ 的数据，$k=0$。\n- 对于 $20\\%$ 的数据，$k=10^9$。\n\n对于 $100\\%$ 的数据，$1\\leqslant n,m\\leqslant 10^5$，$0\\leqslant k\\leqslant 10^9$，$0\\leqslant S\\leqslant n\\cdot m$。\n\n### 【提示】\n> 古之有数，其名为 $S$。$S$ 之大，一个 `int` （可能）装不下。\n\n### 【样例解释 #1】\n样例输出对应关卡如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jyttdqal.png)\n\n注意可能有多种合法关卡均符合条件。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NAPC-#1] Stage1 - Simple", "background": "> ![](https://cdn.luogu.com.cn/upload/image_hosting/pon0cylv.png)", "description": "### 【简要题意】\n给定 $n,m,k,S$，请构造长度为 $n$ 的整数序列 $a$ 使得：\n- $0\\leqslant a_i\\leqslant m,\\forall i\\in[1,n]$（即序列 $a$ 内的每个元素均不小于 $0$ 且不大于 $m$）。\n- $|a_i-a_{i-1}|\\leqslant k,\\forall i\\in(1,n]$（即序列 $a$ 内的每两个相邻元素之差的绝对值均不大于 $k$）。\n- $(\\sum_{i=1}^n a_i ) = S$（即序列 $a$ 内的所有元素的和为 $S$）。\n\n**保证有解。**\n\n### 【原始题意】\n\n前面忘了，但是~~你随 kid 穿越到了 ic~~（I wanna be the Creator），来到了一个关卡编辑器面前。该地图宽为 $n$，高为 $(m+1)$，是你不能修改的；里面还有 $S$ 个 $1\\times1$ 大小的未摆放的砖。现在你需要帮 kid 摆好这一面，也就是说，将这 $S$ 个砖摆放好，使得他可以通过。有以下要求：\n\n1. ~~砖是有重力的~~，所以**一块砖只能摆放在下边界上或者另一块砖上**。同一横纵坐标不能摆放多块砖。\n2. 你至少要给 kid 留一条缝来通过，所以每一列你最高只能放 $m$ 块砖（地图高度为 $m+1$）。但是注意，ic 关卡下边界没有伤害，某一列是可以不放砖块的。\n3. kid 的跳跃能力和~~从高处坠落而不受伤的能力~~是有限的，这用一个非负整数 $k$ 来描述：相邻两列摆放的砖的数量之差的绝对值不能超过 $k$，否则该关卡对 kid 来说就是无解的。_（但是注意：该条对第一列高度没有要求，kid 出生点就在第一列。）_\n4. 你要把所有 $S$ 块砖都摆进去，不多不少。\n\nCreator 不会为难你，因此一定有一种关卡符合上述所有规则。\n\n为了输出方便，你只需要给出第 $i$ 列有多少砖块（记为 $a_i$），输出 $a$ 序列即可。容易证明，一个合法的 $a$ 序列和一个合法关卡是一一对应的。", "inputFormat": "仅一行 $4$ 个非负整数 $n,m,k,S$。", "outputFormat": "输出一行 $n$ 个非负整数表示你构造的序列 $a$。如果有多种可能的序列，输出任意一个符合题意的序列即可。**保证至少有一个序列满足题目要求。**", "hint": "### 【数据范围】\n\n该题共有 $10$ 个测试点，每个测试点等分。\n\n- 对于 $20\\%$ 的数据，$S=n\\cdot m$。\n- 对于 $20\\%$ 的数据，$k=0$。\n- 对于 $20\\%$ 的数据，$k=10^9$。\n\n对于 $100\\%$ 的数据，$1\\leqslant n,m\\leqslant 10^5$，$0\\leqslant k\\leqslant 10^9$，$0\\leqslant S\\leqslant n\\cdot m$。\n\n### 【提示】\n> 古之有数，其名为 $S$。$S$ 之大，一个 `int` （可能）装不下。\n\n### 【样例解释 #1】\n样例输出对应关卡如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jyttdqal.png)\n\n注意可能有多种合法关卡均符合条件。\n\n", "locale": "zh-CN"}}}
{"pid": "P9430", "type": "P", "difficulty": 3, "samples": [["3 7\n1 2\n2 5\n6 2\n3 2\n1 1 4\n3 3\n2 3\n3 1\n1 -9 -1\n3 3", "2 5\n7 6\n2 6\n-3 6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "[NAPC-#1] Stage2 - Darkness", "background": "> ![](https://cdn.luogu.com.cn/upload/image_hosting/y68eurqf.png)", "description": "有 $n$ 支军队分布在各地，可以看作在一个平面直角坐标系内。他们都受 kid 的统一指挥，kid 共发出 $m$ 条命令。\n\n命令有如下几种：\n\n- `1 p q` 表示把**每支**军队的位置从 $(x_i,y_i)$ 移到 $(x_i+p,y_i+q)$。\n- `2 i`，表示**第 $i$ 支军队**的位置对直线 $y=x$ 作轴对称变换（即交换 $x_i$ 与 $y_i$ 的值）。\n- `3 i`，表示查询第 $i$ 支军队现在所处的位置（即输出此时的 $x_i$ 与 $y_i$）。\n\n**请注意 `1` 与 `2` 命令的操作对象不同，前者为全体军队，后者为单支军队。**\n\n本来 kid 可以直接拿望远镜看的，但是天太黑了，只能拜托你编写一个程序告诉他了。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $a_i,b_i$ 表示第 $i$ 支军队的初始位置 $(x_i,y_i)=(a_i,b_i)$。\n\n接下来 $m$ 行，每行两到三个整数，表示 kid 发出的一条命令。具体地，对于每条命令，先有一个正整数 $op$ 表示命令类型；\n\n- 如果 $op=1$，那么后面有两个整数 $p,q$，表示把**每支**军队的位置从 $(x_i,y_i)$ 移到 $(x_i+p,y_i+q)$。\n- 如果 $op=2$，那么后面有一个正整数 $i$，表示**第 $i$ 支军队**的位置对 $y=x$ 做轴对称变换。\n- 如果 $op=3$，那么后面有一个正整数 $i$，表示查询第 $i$ 支军队现在所处的位置。", "outputFormat": "对于每次 kid 发出的一条 `3` 命令，输出一行两个整数 $x_i,y_i$ 表示第 $i$ 支军队现在所处的位置。", "hint": "### 【数据范围】\n该题共有 $10$ 个测试点，每个测试点等分。\n\n- 对于 $20\\%$ 的数据，$n,m\\leqslant 1000$。\n- 对于另外 $30\\%$ 的数据，保证没有 `2` 命令。\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant m\\leqslant 5\\times10^5$，$|a_i|,|b_i|,|p|,|q|\\leqslant 10^3$，$1\\leqslant i\\leqslant n$，$op\\in\\{1,2,3\\}$。\n\n### 【样例解释】\n| 时间 | $(x_1,y_1)$ | $(x_2,y_2)$ | $(x_3,y_3)$ |\n|  :-:  |  :-:  |  :-:  |  :-:  |\n| 初始时 | $(1,2)$ | $(2,5)$ | $(6,2)$ |\n| 第 $2$ 次命令后 | $(2,6)$ | $(3,9)$ | $(7,6)$ |\n| 第 $4$ 次命令后 | $(2,6)$ | $(3,9)$ | $(6,7)$ |\n| 第 $6$ 次命令后 | $(-7,5)$ | $(-6,8)$ | $(-3,6)$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NAPC-#1] Stage2 - Darkness", "background": "> ![](https://cdn.luogu.com.cn/upload/image_hosting/y68eurqf.png)", "description": "有 $n$ 支军队分布在各地，可以看作在一个平面直角坐标系内。他们都受 kid 的统一指挥，kid 共发出 $m$ 条命令。\n\n命令有如下几种：\n\n- `1 p q` 表示把**每支**军队的位置从 $(x_i,y_i)$ 移到 $(x_i+p,y_i+q)$。\n- `2 i`，表示**第 $i$ 支军队**的位置对直线 $y=x$ 作轴对称变换（即交换 $x_i$ 与 $y_i$ 的值）。\n- `3 i`，表示查询第 $i$ 支军队现在所处的位置（即输出此时的 $x_i$ 与 $y_i$）。\n\n**请注意 `1` 与 `2` 命令的操作对象不同，前者为全体军队，后者为单支军队。**\n\n本来 kid 可以直接拿望远镜看的，但是天太黑了，只能拜托你编写一个程序告诉他了。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $a_i,b_i$ 表示第 $i$ 支军队的初始位置 $(x_i,y_i)=(a_i,b_i)$。\n\n接下来 $m$ 行，每行两到三个整数，表示 kid 发出的一条命令。具体地，对于每条命令，先有一个正整数 $op$ 表示命令类型；\n\n- 如果 $op=1$，那么后面有两个整数 $p,q$，表示把**每支**军队的位置从 $(x_i,y_i)$ 移到 $(x_i+p,y_i+q)$。\n- 如果 $op=2$，那么后面有一个正整数 $i$，表示**第 $i$ 支军队**的位置对 $y=x$ 做轴对称变换。\n- 如果 $op=3$，那么后面有一个正整数 $i$，表示查询第 $i$ 支军队现在所处的位置。", "outputFormat": "对于每次 kid 发出的一条 `3` 命令，输出一行两个整数 $x_i,y_i$ 表示第 $i$ 支军队现在所处的位置。", "hint": "### 【数据范围】\n该题共有 $10$ 个测试点，每个测试点等分。\n\n- 对于 $20\\%$ 的数据，$n,m\\leqslant 1000$。\n- 对于另外 $30\\%$ 的数据，保证没有 `2` 命令。\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant m\\leqslant 5\\times10^5$，$|a_i|,|b_i|,|p|,|q|\\leqslant 10^3$，$1\\leqslant i\\leqslant n$，$op\\in\\{1,2,3\\}$。\n\n### 【样例解释】\n| 时间 | $(x_1,y_1)$ | $(x_2,y_2)$ | $(x_3,y_3)$ |\n|  :-:  |  :-:  |  :-:  |  :-:  |\n| 初始时 | $(1,2)$ | $(2,5)$ | $(6,2)$ |\n| 第 $2$ 次命令后 | $(2,6)$ | $(3,9)$ | $(7,6)$ |\n| 第 $4$ 次命令后 | $(2,6)$ | $(3,9)$ | $(6,7)$ |\n| 第 $6$ 次命令后 | $(-7,5)$ | $(-6,8)$ | $(-3,6)$ |", "locale": "zh-CN"}}}
{"pid": "P9431", "type": "P", "difficulty": 4, "samples": [["4 0\n4 2 1\n2 4\n1 1\n5 2\n4 1\n5 3 4\n1 7\n2 4\n3 2\n4 5\n8 2\n4 1 2\n1 1\n1 2\n1 3\n4 1\n4 2 1\n1 1\n4 1\n1 4\n4 4", "3\n4\n4\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化", "强连通分量", "Tarjan"], "title": "[NAPC-#1] Stage3 - Jump Refreshers", "background": "加强版：[「NAPC #1」rStage3 ~ Hard Jump Refreshers](https://www.luogu.com.cn/problem/U618728)。\n\n---\n> ![](https://cdn.luogu.com.cn/upload/image_hosting/wkktxonu.png)", "description": "（注意本题中 kid 的移动方式与实际的 iw 游戏中不同。）\n\nkid 面前有一个无穷大的竖直二维平面。坐标系 $x$ 轴正方向为从左到右，$y$ 轴正方向为从下到上。\n\n地图（该平面）内有 $n$ 个位置互不相同的可以无限重复使用的跳跃球。当 kid 正好位于某跳跃球位置时，他可以让 shift 键按下，然后他会瞬间上升 $d$ 格（此期间不能左右移动）。他每秒往下坠落 $1$ 格，同时每秒 kid 可以选择：向左或向右移动 1 格，或者不移动。当 kid 不在跳跃球上时他不能起跳。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1abzjhjs.png)\n\n上图是一个例子，蓝色区域表示 kid 在跳跃球（箭头）处起跳（$d=2$）后可以达到的区域。kid 每秒时的横纵坐标只能是整数，即我们认为他不能达到非整点位置。\n\n现在，kid 把存档放在了第 $c$ 个跳跃球处（即起点是第 $c$ 个跳跃球处；此时可以立即起跳）。定义 kid 的得分为他经过（即在某处起跳：显然起跳之后可以回到原位置）的**不同**跳跃球的个数。kid 想知道他可以最多获得多少得分（不需要（但可以）回到起点），请你告诉他吧。\n\n再次注意：跳跃球可以无限重复使用，即 kid 可以在某个跳跃球上无限起跳。", "inputFormat": "**本题单测试点内有多组数据。**\n\n第一行仅两个整数 $T,id$ 表示测试数据的数量和测试点编号。特别地，样例的 $id=0$。\n\n对于每组测试数据：\n\n第一行三个正整数 $n,d,c$ 含义如上所述。\n\n后 $n$ 行每行两个正整数 $x_i,y_i$ 表示第 $i$ 个跳跃球的位置。", "outputFormat": "对于每组测试数据输出一行一个正整数表示最大得分。", "hint": "### 【数据范围】\n\n**本题采用捆绑测试。**\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\n\\textbf{Subtask} & id= & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1& 1\\sim3,36 & n\\leqslant10,T\\leqslant10 & 10 \\r\n\\textsf2& 4\\sim7 & \\sum n\\leqslant200 & 15 \\r\n\\textsf3& 8\\sim13 & \\mathbf A & 25 \\r\n\\textsf4& 14\\sim18 & \\mathbf B & 10 \\r\n\\textsf5& 19\\sim35 & - & 40 \\r\n\\end{array}\n$$\n\n其中 $\\sum n$ 表示单测试点内所有数据的 $n$ 的总和。\n\n- 特殊性质 $\\mathbf A$：保证对于任意不同跳跃球 $u,v$，如果 kid 理论上能从 $u$ 跳到 $v$（理论上：不考虑 kid 能否从起点到达 $u$ 的问题，下同），那么他理论上**一定不可以**从 $v$ 跳到 $u$。\n- 特殊性质 $\\mathbf B$：保证对于任意跳跃球 $u,v$，如果 kid 理论上能从 $u$ 跳到 $v$，那么他理论上**一定可以**从 $v$ 跳到 $u$。\n\n注意上面的“从 $u$ 跳到 $v$”不一定非得一跳到位。比如样例 #1-2 中可以从第 $3$ 个跳到第 $5$ 个：$3\\to2\\to4\\to5$。\n\n对于 $100\\%$ 的数据，$1\\leqslant T\\leqslant 1000$，$1\\leqslant n\\leqslant 3000$，$\\sum n\\leqslant 3000$，$1\\leqslant d\\leqslant 10^9$，$1\\leqslant c\\leqslant n$，$1\\leqslant x_i,y_i\\leqslant10^6$，$(x_i,y_i)$ 互不相同。\n\n---\n#### 【样例解释 #1-1】\n![](https://cdn.luogu.com.cn/upload/image_hosting/zpc7sm2i.png)\n\n$d=2$，容易发现离开初始位置就上不去了。所以 kid 要么往左边碰第 $2$ 个跳跃球，得分为 $2$；要么往右边跳，经过第 $3$ 和第 $4$ 个跳跃球，得分为 $3$。\n#### 【样例解释 #1-2】\n![](https://cdn.luogu.com.cn/upload/image_hosting/q8ks8qb4.png)\n\n$d=3$，kid 可以先往下走一圈（$4\\to3\\to2\\to4$）跳回起点，然后往右去碰第 $5$ 个球。左上角的第 $1$ 个跳跃球是碰不到的。\n#### 【样例解释 #1-3】\n![](https://cdn.luogu.com.cn/upload/image_hosting/akghkpe9.png)\n\n通过最上面那个球是可以跳到右边的。\n#### 【样例解释 #1-4】\n![](https://cdn.luogu.com.cn/upload/image_hosting/50smzomm.png)\n\n有的人活着……", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NAPC-#1] Stage3 - Jump Refreshers", "background": "加强版：[「NAPC #1」rStage3 ~ Hard Jump Refreshers](https://www.luogu.com.cn/problem/U618728)。\n\n---\n> ![](https://cdn.luogu.com.cn/upload/image_hosting/wkktxonu.png)", "description": "（注意本题中 kid 的移动方式与实际的 iw 游戏中不同。）\n\nkid 面前有一个无穷大的竖直二维平面。坐标系 $x$ 轴正方向为从左到右，$y$ 轴正方向为从下到上。\n\n地图（该平面）内有 $n$ 个位置互不相同的可以无限重复使用的跳跃球。当 kid 正好位于某跳跃球位置时，他可以让 shift 键按下，然后他会瞬间上升 $d$ 格（此期间不能左右移动）。他每秒往下坠落 $1$ 格，同时每秒 kid 可以选择：向左或向右移动 1 格，或者不移动。当 kid 不在跳跃球上时他不能起跳。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1abzjhjs.png)\n\n上图是一个例子，蓝色区域表示 kid 在跳跃球（箭头）处起跳（$d=2$）后可以达到的区域。kid 每秒时的横纵坐标只能是整数，即我们认为他不能达到非整点位置。\n\n现在，kid 把存档放在了第 $c$ 个跳跃球处（即起点是第 $c$ 个跳跃球处；此时可以立即起跳）。定义 kid 的得分为他经过（即在某处起跳：显然起跳之后可以回到原位置）的**不同**跳跃球的个数。kid 想知道他可以最多获得多少得分（不需要（但可以）回到起点），请你告诉他吧。\n\n再次注意：跳跃球可以无限重复使用，即 kid 可以在某个跳跃球上无限起跳。", "inputFormat": "**本题单测试点内有多组数据。**\n\n第一行仅两个整数 $T,id$ 表示测试数据的数量和测试点编号。特别地，样例的 $id=0$。\n\n对于每组测试数据：\n\n第一行三个正整数 $n,d,c$ 含义如上所述。\n\n后 $n$ 行每行两个正整数 $x_i,y_i$ 表示第 $i$ 个跳跃球的位置。", "outputFormat": "对于每组测试数据输出一行一个正整数表示最大得分。", "hint": "### 【数据范围】\n\n**本题采用捆绑测试。**\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\n\\textbf{Subtask} & id= & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1& 1\\sim3,36 & n\\leqslant10,T\\leqslant10 & 10 \\r\n\\textsf2& 4\\sim7 & \\sum n\\leqslant200 & 15 \\r\n\\textsf3& 8\\sim13 & \\mathbf A & 25 \\r\n\\textsf4& 14\\sim18 & \\mathbf B & 10 \\r\n\\textsf5& 19\\sim35 & - & 40 \\r\n\\end{array}\n$$\n\n其中 $\\sum n$ 表示单测试点内所有数据的 $n$ 的总和。\n\n- 特殊性质 $\\mathbf A$：保证对于任意不同跳跃球 $u,v$，如果 kid 理论上能从 $u$ 跳到 $v$（理论上：不考虑 kid 能否从起点到达 $u$ 的问题，下同），那么他理论上**一定不可以**从 $v$ 跳到 $u$。\n- 特殊性质 $\\mathbf B$：保证对于任意跳跃球 $u,v$，如果 kid 理论上能从 $u$ 跳到 $v$，那么他理论上**一定可以**从 $v$ 跳到 $u$。\n\n注意上面的“从 $u$ 跳到 $v$”不一定非得一跳到位。比如样例 #1-2 中可以从第 $3$ 个跳到第 $5$ 个：$3\\to2\\to4\\to5$。\n\n对于 $100\\%$ 的数据，$1\\leqslant T\\leqslant 1000$，$1\\leqslant n\\leqslant 3000$，$\\sum n\\leqslant 3000$，$1\\leqslant d\\leqslant 10^9$，$1\\leqslant c\\leqslant n$，$1\\leqslant x_i,y_i\\leqslant10^6$，$(x_i,y_i)$ 互不相同。\n\n---\n#### 【样例解释 #1-1】\n![](https://cdn.luogu.com.cn/upload/image_hosting/zpc7sm2i.png)\n\n$d=2$，容易发现离开初始位置就上不去了。所以 kid 要么往左边碰第 $2$ 个跳跃球，得分为 $2$；要么往右边跳，经过第 $3$ 和第 $4$ 个跳跃球，得分为 $3$。\n#### 【样例解释 #1-2】\n![](https://cdn.luogu.com.cn/upload/image_hosting/q8ks8qb4.png)\n\n$d=3$，kid 可以先往下走一圈（$4\\to3\\to2\\to4$）跳回起点，然后往右去碰第 $5$ 个球。左上角的第 $1$ 个跳跃球是碰不到的。\n#### 【样例解释 #1-3】\n![](https://cdn.luogu.com.cn/upload/image_hosting/akghkpe9.png)\n\n通过最上面那个球是可以跳到右边的。\n#### 【样例解释 #1-4】\n![](https://cdn.luogu.com.cn/upload/image_hosting/50smzomm.png)\n\n有的人活着……", "locale": "zh-CN"}}}
{"pid": "P9432", "type": "P", "difficulty": 5, "samples": [["7 6 2\n1 2 3\n1 3 5\n3 4 2\n3 5 4\n2 6 1\n1 7 1\n2 3\n2 3\n2 1\n7 1\n4 5\n6 6\n2 2", "8\n3\n7\n6\n2\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化", "最近公共祖先 LCA", "树链剖分"], "title": "[NAPC-#1] rStage5 - Hard Conveyors", "background": "**本题新增两组 hack 数据。**\n\n---\n![](https://cdn.luogu.com.cn/upload/image_hosting/bp1ypbgf.png)\n\n更硬，所以可能就更脆，所以更容易被击破（确信）。\n\n您只花了两个小时就秒掉了正城 s1~s10，来秒逆城了。", "description": "**本题与 Stage5 的区别是合法路径定义不同**（简要题意中加粗部分不同）。~~（其实还有：样例不同，数据不同，部分分不同。）~~\n\n### 【简要题意】\n\n给定一棵 $n$ 个节点的无根树以及树上的 $k$ 个关键节点，边有边权（即边的长度）。$q$ 次询问，每次给出 $s,t$，问从 $s$ 到 $t$ 且经过**至少一个**关键节点的路径的最短长度。", "inputFormat": "第一行三个正整数 $n, q, k$，表示树的节点个数，询问次数和关键节点个数。\n\n接下来 $n-1$ 行，每行三个正整数 $u, v, w$，表示树中存在边 $(u, v)$，边权为 $w$。保证输入构成一棵树。\n\n接下来一行 $k$ 个两两不同的正整数，表示关键节点的编号。\n\n接下来 $q$ 行，每行两个正整数 $s, t$，表示一次询问。", "outputFormat": "对于每次询问输出一行一个非负整数，表示此次询问的最短合法路径长度。\n\n注意，合法路径可以不经过任何边，此时路径长为 $0$。", "hint": "### 【数据范围】\n\nupd at `2023-6-25`：新增了两组 hack 数据，将其置于 $\\text{Sub}\\textsf6$ 中，不记分数。\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\n\\textbf{Subtask} & \\text{测试点编号} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1&1\\sim2 & k=n & 5 \\r\n\\textsf2&16\\sim20 &k=1,n\\leqslant10^3,q\\leqslant10^3 & 15 \\r\n\\textsf3&21\\sim25 & n\\leqslant10^3,q\\leqslant10^3 & 15 \\r\n\\textsf4&3\\sim7 & q=1 & 15 \\r\n\\textsf5&8\\sim15 & - & 50 \\r\n\\textsf6&26\\sim27 & - & 0 \\r\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant q\\leqslant 10^5$，$1\\leqslant k\\leqslant n$，$1\\leqslant w\\leqslant 10^4$，$1\\leqslant u,v,s,t\\leqslant n$。\n\n### 【样例解释 #1】\n![](https://cdn.luogu.com.cn/upload/image_hosting/3hvr33bz.png)\n\n图中加粗节点表示关键点。\n\n对于每组询问，以下为一种最优路径（最优路径可能有多条）：\n1. $2\\to1\\to3$。\n2. $2\\to1$。\n3. $7\\to1\\to2\\to1$。\n4. $4\\to3\\to5$。\n5. $6\\to2\\to6$。\n6. $2$（合法路径可以不经过任何边，此时路径长为 $0$）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NAPC-#1] rStage5 - Hard Conveyors", "background": "**本题新增两组 hack 数据。**\n\n---\n![](https://cdn.luogu.com.cn/upload/image_hosting/bp1ypbgf.png)\n\n更硬，所以可能就更脆，所以更容易被击破（确信）。\n\n您只花了两个小时就秒掉了正城 s1~s10，来秒逆城了。", "description": "**本题与 Stage5 的区别是合法路径定义不同**（简要题意中加粗部分不同）。~~（其实还有：样例不同，数据不同，部分分不同。）~~\n\n### 【简要题意】\n\n给定一棵 $n$ 个节点的无根树以及树上的 $k$ 个关键节点，边有边权（即边的长度）。$q$ 次询问，每次给出 $s,t$，问从 $s$ 到 $t$ 且经过**至少一个**关键节点的路径的最短长度。", "inputFormat": "第一行三个正整数 $n, q, k$，表示树的节点个数，询问次数和关键节点个数。\n\n接下来 $n-1$ 行，每行三个正整数 $u, v, w$，表示树中存在边 $(u, v)$，边权为 $w$。保证输入构成一棵树。\n\n接下来一行 $k$ 个两两不同的正整数，表示关键节点的编号。\n\n接下来 $q$ 行，每行两个正整数 $s, t$，表示一次询问。", "outputFormat": "对于每次询问输出一行一个非负整数，表示此次询问的最短合法路径长度。\n\n注意，合法路径可以不经过任何边，此时路径长为 $0$。", "hint": "### 【数据范围】\n\nupd at `2023-6-25`：新增了两组 hack 数据，将其置于 $\\text{Sub}\\textsf6$ 中，不记分数。\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\n\\textbf{Subtask} & \\text{测试点编号} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1&1\\sim2 & k=n & 5 \\r\n\\textsf2&16\\sim20 &k=1,n\\leqslant10^3,q\\leqslant10^3 & 15 \\r\n\\textsf3&21\\sim25 & n\\leqslant10^3,q\\leqslant10^3 & 15 \\r\n\\textsf4&3\\sim7 & q=1 & 15 \\r\n\\textsf5&8\\sim15 & - & 50 \\r\n\\textsf6&26\\sim27 & - & 0 \\r\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant q\\leqslant 10^5$，$1\\leqslant k\\leqslant n$，$1\\leqslant w\\leqslant 10^4$，$1\\leqslant u,v,s,t\\leqslant n$。\n\n### 【样例解释 #1】\n![](https://cdn.luogu.com.cn/upload/image_hosting/3hvr33bz.png)\n\n图中加粗节点表示关键点。\n\n对于每组询问，以下为一种最优路径（最优路径可能有多条）：\n1. $2\\to1\\to3$。\n2. $2\\to1$。\n3. $7\\to1\\to2\\to1$。\n4. $4\\to3\\to5$。\n5. $6\\to2\\to6$。\n6. $2$（合法路径可以不经过任何边，此时路径长为 $0$）。", "locale": "zh-CN"}}}
{"pid": "P9433", "type": "P", "difficulty": 5, "samples": [["7 5 2\n1 2 3\n1 3 5\n3 4 2\n3 5 4\n2 6 1\n1 7 1\n2 3\n2 3\n2 1\n7 1\n4 5\n6 6", "8\n13\n17\n22\n18"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化", "树的遍历", "最近公共祖先 LCA"], "title": "[NAPC-#1] Stage5 - Conveyors", "background": ">![](https://cdn.luogu.com.cn/upload/image_hosting/4wcng8qe.png)\n>\n>— rs8", "description": "### 【简要题意】\n\n给定一棵 $n$ 个节点的无根树以及树上的 $k$ 个关键节点，边有边权（即边的长度）。$q$ 次询问，每次给出 $s,t$，问从 $s$ 到 $t$ 且经过至少一次**每个**关键节点的路径的最短长度。\n\n### 【原始题意】\n\n在某一面 kid 又遇到了往返跑关卡。Really popular apparently.\n\n关卡给 kid 留下的空间形状是一棵无向带权树，边权即边的长度。这棵树有 $n$ 个节点，其中有 $k$ 个点上各**恰**有一个发光小球，kid 经过有小球的点（称为关键点）时就可以收集小球。kid 从 $s$ 点出发，当他收集到全部 $k$ 个小球时，传送门就会在 $t$ 点出现。\n\n想速通的 kid 想知道他从 $s$ 点出发收集到全部 $k$ 个小球并进入位于 $t$ 点的传送门所需要走的最小时间（其实也就是路径长度，因为 kid 的速度恒定）。\n\n但是 Geezer 很狡猾，塔内这一面被复制成了 $q$ 层，每层的 $s$ 和 $t$ 还可能有变动。kid 慌了，忙找到你求助。", "inputFormat": "第一行三个正整数 $n, q, k$，表示树的节点个数，询问次数和关键节点个数。\n\n接下来 $n-1$ 行，每行三个正整数 $u, v, w$，表示树中存在边 $(u, v)$，边权为 $w$。保证输入构成一棵树。\n\n接下来一行 $k$ 个两两不同的正整数，表示关键节点的编号。\n\n接下来 $q$ 行，每行两个正整数 $s, t$，表示一次询问。", "outputFormat": "对于每次询问输出一行一个非负整数，表示此次询问的最短合法路径长度。\n\n注意，合法路径可以不经过任何边，此时路径长为 $0$。", "hint": "### 【数据范围】\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\n\\textbf{Subtask} & \\text{测试点编号} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1&1\\sim14 & n\\leqslant15,\\mathbf R& 18 \\r\n\\textsf2&15\\sim20 & q=1 & 18 \\r\n\\textsf3&46\\sim48 & s=t,k=n & 6 \\r\n\\textsf4&21\\sim25 & k=n & 18 \\r\n\\textsf5&26\\sim30 & \\mathbf A & 18 \\r\n\\textsf6&31\\sim45 & - & 22 \\r\n\\end{array}\n$$\n友情提醒：$\\text{Subtask }\\textsf1$ 并没有限制 $q$ 的范围。\n\n- 特殊性质 $\\mathbf R$：保证树随机生成（对于 $i\\ge2$，在 $[1,i)$ 内随机选择一个点和 $i$ 连边，边权在一固定区间内均匀随机生成）。\n- 特殊性质 $\\mathbf A$：定义 $f(x)$ 表示存在 $i,j\\in[1,n]$（可能 $i=j$） 且 $i,j$ 均为关键点，使得 $x$ 在 $i$ 到 $j$ 的最短路径上；那么对每次询问保证 $f(s)$ 和 $f(t)$ 均成立。\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant q\\leqslant 10^5$，$1\\leqslant k\\leqslant n$，$1\\leqslant w\\leqslant 10^4$，$1\\leqslant u,v,s,t\\leqslant n$。\n\n### 【样例解释 #1】\n![](https://cdn.luogu.com.cn/upload/image_hosting/3hvr33bz.png)\n\n图中加粗节点表示关键点。\n\n对于每组询问，以下为一种最优路径（最优路径可能有多条）：\n1. $2\\to1\\to3$。\n2. $2\\to1\\to3\\to1$。\n3. $7\\to1\\to2\\to1\\to3\\to1$。\n4. $4\\to3\\to1\\to2\\to1\\to3\\to5$。\n5. $6\\to2\\to1\\to3\\to1\\to2\\to6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NAPC-#1] Stage5 - Conveyors", "background": ">![](https://cdn.luogu.com.cn/upload/image_hosting/4wcng8qe.png)\n>\n>— rs8", "description": "### 【简要题意】\n\n给定一棵 $n$ 个节点的无根树以及树上的 $k$ 个关键节点，边有边权（即边的长度）。$q$ 次询问，每次给出 $s,t$，问从 $s$ 到 $t$ 且经过至少一次**每个**关键节点的路径的最短长度。\n\n### 【原始题意】\n\n在某一面 kid 又遇到了往返跑关卡。Really popular apparently.\n\n关卡给 kid 留下的空间形状是一棵无向带权树，边权即边的长度。这棵树有 $n$ 个节点，其中有 $k$ 个点上各**恰**有一个发光小球，kid 经过有小球的点（称为关键点）时就可以收集小球。kid 从 $s$ 点出发，当他收集到全部 $k$ 个小球时，传送门就会在 $t$ 点出现。\n\n想速通的 kid 想知道他从 $s$ 点出发收集到全部 $k$ 个小球并进入位于 $t$ 点的传送门所需要走的最小时间（其实也就是路径长度，因为 kid 的速度恒定）。\n\n但是 Geezer 很狡猾，塔内这一面被复制成了 $q$ 层，每层的 $s$ 和 $t$ 还可能有变动。kid 慌了，忙找到你求助。", "inputFormat": "第一行三个正整数 $n, q, k$，表示树的节点个数，询问次数和关键节点个数。\n\n接下来 $n-1$ 行，每行三个正整数 $u, v, w$，表示树中存在边 $(u, v)$，边权为 $w$。保证输入构成一棵树。\n\n接下来一行 $k$ 个两两不同的正整数，表示关键节点的编号。\n\n接下来 $q$ 行，每行两个正整数 $s, t$，表示一次询问。", "outputFormat": "对于每次询问输出一行一个非负整数，表示此次询问的最短合法路径长度。\n\n注意，合法路径可以不经过任何边，此时路径长为 $0$。", "hint": "### 【数据范围】\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\r{\\cr\\hline}\n\\def\\None{\\text{None}}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\n\\textbf{Subtask} & \\text{测试点编号} & \\textbf{Sp. Constraints} & \\textbf{Score}\\r\n\\textsf1&1\\sim14 & n\\leqslant15,\\mathbf R& 18 \\r\n\\textsf2&15\\sim20 & q=1 & 18 \\r\n\\textsf3&46\\sim48 & s=t,k=n & 6 \\r\n\\textsf4&21\\sim25 & k=n & 18 \\r\n\\textsf5&26\\sim30 & \\mathbf A & 18 \\r\n\\textsf6&31\\sim45 & - & 22 \\r\n\\end{array}\n$$\n友情提醒：$\\text{Subtask }\\textsf1$ 并没有限制 $q$ 的范围。\n\n- 特殊性质 $\\mathbf R$：保证树随机生成（对于 $i\\ge2$，在 $[1,i)$ 内随机选择一个点和 $i$ 连边，边权在一固定区间内均匀随机生成）。\n- 特殊性质 $\\mathbf A$：定义 $f(x)$ 表示存在 $i,j\\in[1,n]$（可能 $i=j$） 且 $i,j$ 均为关键点，使得 $x$ 在 $i$ 到 $j$ 的最短路径上；那么对每次询问保证 $f(s)$ 和 $f(t)$ 均成立。\n\n对于 $100\\%$ 的数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant q\\leqslant 10^5$，$1\\leqslant k\\leqslant n$，$1\\leqslant w\\leqslant 10^4$，$1\\leqslant u,v,s,t\\leqslant n$。\n\n### 【样例解释 #1】\n![](https://cdn.luogu.com.cn/upload/image_hosting/3hvr33bz.png)\n\n图中加粗节点表示关键点。\n\n对于每组询问，以下为一种最优路径（最优路径可能有多条）：\n1. $2\\to1\\to3$。\n2. $2\\to1\\to3\\to1$。\n3. $7\\to1\\to2\\to1\\to3\\to1$。\n4. $4\\to3\\to1\\to2\\to1\\to3\\to5$。\n5. $6\\to2\\to1\\to3\\to1\\to2\\to6$。", "locale": "zh-CN"}}}
{"pid": "P9434", "type": "P", "difficulty": 6, "samples": [["4 0\n3 1\n2 1 U\n1 2 R\n2 3 L\n3 1\n4 1 U\n1 2 R\n3 4 L\n6 4\n2 1 U\n1 2 R\n3 2 U\n2 3 L\n1 3 R\n2 4 L\n8 9\n4 5 L\n1 4 R\n3 4 L\n2 3 R\n1 2 R\n3 2 U\n4 2 U\n3 1 U\n", "1\n0\n4\n6"], ["见附件中的 s4/ex.in", "见附件中的 s4/ex.out"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "[NAPC-#1] Stage4 - Needle", "background": "> ![](https://cdn.luogu.com.cn/upload/image_hosting/jiio1vp7.png)\n>\n> — s10", "description": "平面上有 $n$ 个**位置互不相同**的刺。刺有上下左右这 $4$ 种朝向。\n\n定义一个【阴间刺】（其实就是削过的 sf 刺）为满足以下条件的有序刺**对** $(s_1,s_2,s_3)$：\n- $s_1$ 朝右，$s_2$ 朝左，$s_3$ 朝上。\n- $x(s_1)<x(s_2)\\leqslant x(s_3)$。\n- $y(s_2)>y(s_1)>y(s_3)$。\n- $x(s_2)-x(s_1)\\leqslant d$。\n\n其中 $x(s)$ 和 $y(s)$ 分别表示刺 $s$ 的横坐标和纵坐标；$d$ 为 kid 的宽度，在单组测试点中为常量。\n\n坐标系 $x$ 轴正方向为从左到右，$y$ 轴正方向为从下到上。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tzih4wjx.png) ![](https://cdn.luogu.com.cn/upload/image_hosting/4wr5yfhz.png)\n\n上图是 $d\\geqslant 2$ 时两个阴间刺的例子。~~虽然第二个刺型中 s3 对 kid 的跳跃没有影响/oh~~\n\n给出 $n$ 个刺的位置和朝向，请你告诉 kid 有多少（他跳不过去的）阴间刺。\n\n显然朝下的刺在本题内是没有意义的。", "inputFormat": "**本题单测试点内有多组数据。**\n\n第一行仅两个正整数 $T,id$ 表示测试数据的数量和测试点编号。特别地，样例的 $id=0$。\n\n对于每组测试点，第一行输入两个正整数 $n,d$，表示刺的数量和 kid 的宽度，接下来 $n$ 行每行两个整数 $x,y$ 和一个字符 $c$ 表示一个刺的位置和朝向：`U` 代表朝上，`D` 代表朝下，`L` 代表朝左，`R` 代表朝右。", "outputFormat": "对于每组测试点，输出一行一个正整数表示阴间刺的数量。", "hint": "### 【数据范围】\n\n**本题采用捆绑测试。**\n$$\n\\def\\r{\\cr\\hline}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c|c}\n\\textbf{Subtask} & id= & {\\sum n\\leqslant} & \\textbf{Other Constraints} & \\textbf{Score}\\r\n\\textsf1 & 1\\sim 7 & 3\\times10^4 & n\\leqslant 30 & 10 \\r\n\\textsf2 & 31\\sim45 & 10^4 & - & 25 \\r\n\\textsf3 & 8\\sim10,16\\sim17 & 10^5 & d=10^9 & 20 \\r\n\\textsf4 & 18\\sim20 & 3\\times10^5 & d=1 & 10 \\r\n\\textsf5 & 11\\sim15,21\\sim30 & 3\\times10^5 & - & 35 \\r\n\\end{array}\n$$\n\n其中 $\\sum n$ 表示单测试点内所有 $n$ 的总和。\n\n对于 $100\\%$ 的数据，$1\\leqslant T\\leqslant 2\\times10^3$，$1\\leqslant n\\leqslant 3\\times10^5$，$\\sum n\\leqslant 3\\times10^5$，$1\\leqslant d\\leqslant 10^9$，$1\\leqslant x,y\\leqslant 10^9$，$(x,y)$ 互不相同，$c\\in\\{\\texttt U, \\texttt D, \\texttt L, \\texttt R \\}$。\n\n#### 【提示】\n\n$\\textbf{Sub}{\\textsf2}$ 的 $O(n^2\\log n)$ 做法和 $O(n^2)$ 做法都可以想想，可能都有些提示性……？qwq\n\n### 【样例 #1-1 & #1-2 解释】\n\n见【题目描述】中**两**幅图。\n\n注意 #1-2 中 $d=1$，所以 kid 可以简单地钻缝过去，不算阴间。\n\n### 【样例 #1-3 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ha8w6ljz.png)\n\n$4$ 个阴间刺分别为：$\\Big((1,3),(2,4),(2,1)\\Big),\\Big((1,2),(2,4),(2,1)\\Big),\\Big((1,2),(2,3),(2,1)\\Big),\\Big((1,3),(2,4),(3,2)\\Big)$\n即 $(5,6,1),(2,6,1),(2,4,1),(5,6,3)$（数字代表刺的下标：$i$ 代表第 $i$ 个刺）。\n\n### 【样例 #1-4 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q988yxmg.png)\n\n$6$ 个阴间刺分别为 $(2,1,7),(4,1,7),(4,3,6),(4,3,7),(4,3,8),(5,3,8)$。\n\n【样例 #2】见附件，该样例除 $id=0$ 外满足 $\\text{Subtask }\\textsf1$ 的所有限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NAPC-#1] Stage4 - Needle", "background": "> ![](https://cdn.luogu.com.cn/upload/image_hosting/jiio1vp7.png)\n>\n> — s10", "description": "平面上有 $n$ 个**位置互不相同**的刺。刺有上下左右这 $4$ 种朝向。\n\n定义一个【阴间刺】（其实就是削过的 sf 刺）为满足以下条件的有序刺**对** $(s_1,s_2,s_3)$：\n- $s_1$ 朝右，$s_2$ 朝左，$s_3$ 朝上。\n- $x(s_1)<x(s_2)\\leqslant x(s_3)$。\n- $y(s_2)>y(s_1)>y(s_3)$。\n- $x(s_2)-x(s_1)\\leqslant d$。\n\n其中 $x(s)$ 和 $y(s)$ 分别表示刺 $s$ 的横坐标和纵坐标；$d$ 为 kid 的宽度，在单组测试点中为常量。\n\n坐标系 $x$ 轴正方向为从左到右，$y$ 轴正方向为从下到上。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tzih4wjx.png) ![](https://cdn.luogu.com.cn/upload/image_hosting/4wr5yfhz.png)\n\n上图是 $d\\geqslant 2$ 时两个阴间刺的例子。~~虽然第二个刺型中 s3 对 kid 的跳跃没有影响/oh~~\n\n给出 $n$ 个刺的位置和朝向，请你告诉 kid 有多少（他跳不过去的）阴间刺。\n\n显然朝下的刺在本题内是没有意义的。", "inputFormat": "**本题单测试点内有多组数据。**\n\n第一行仅两个正整数 $T,id$ 表示测试数据的数量和测试点编号。特别地，样例的 $id=0$。\n\n对于每组测试点，第一行输入两个正整数 $n,d$，表示刺的数量和 kid 的宽度，接下来 $n$ 行每行两个整数 $x,y$ 和一个字符 $c$ 表示一个刺的位置和朝向：`U` 代表朝上，`D` 代表朝下，`L` 代表朝左，`R` 代表朝右。", "outputFormat": "对于每组测试点，输出一行一个正整数表示阴间刺的数量。", "hint": "### 【数据范围】\n\n**本题采用捆绑测试。**\n$$\n\\def\\r{\\cr\\hline}\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c|c}\n\\textbf{Subtask} & id= & {\\sum n\\leqslant} & \\textbf{Other Constraints} & \\textbf{Score}\\r\n\\textsf1 & 1\\sim 7 & 3\\times10^4 & n\\leqslant 30 & 10 \\r\n\\textsf2 & 31\\sim45 & 10^4 & - & 25 \\r\n\\textsf3 & 8\\sim10,16\\sim17 & 10^5 & d=10^9 & 20 \\r\n\\textsf4 & 18\\sim20 & 3\\times10^5 & d=1 & 10 \\r\n\\textsf5 & 11\\sim15,21\\sim30 & 3\\times10^5 & - & 35 \\r\n\\end{array}\n$$\n\n其中 $\\sum n$ 表示单测试点内所有 $n$ 的总和。\n\n对于 $100\\%$ 的数据，$1\\leqslant T\\leqslant 2\\times10^3$，$1\\leqslant n\\leqslant 3\\times10^5$，$\\sum n\\leqslant 3\\times10^5$，$1\\leqslant d\\leqslant 10^9$，$1\\leqslant x,y\\leqslant 10^9$，$(x,y)$ 互不相同，$c\\in\\{\\texttt U, \\texttt D, \\texttt L, \\texttt R \\}$。\n\n#### 【提示】\n\n$\\textbf{Sub}{\\textsf2}$ 的 $O(n^2\\log n)$ 做法和 $O(n^2)$ 做法都可以想想，可能都有些提示性……？qwq\n\n### 【样例 #1-1 & #1-2 解释】\n\n见【题目描述】中**两**幅图。\n\n注意 #1-2 中 $d=1$，所以 kid 可以简单地钻缝过去，不算阴间。\n\n### 【样例 #1-3 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ha8w6ljz.png)\n\n$4$ 个阴间刺分别为：$\\Big((1,3),(2,4),(2,1)\\Big),\\Big((1,2),(2,4),(2,1)\\Big),\\Big((1,2),(2,3),(2,1)\\Big),\\Big((1,3),(2,4),(3,2)\\Big)$\n即 $(5,6,1),(2,6,1),(2,4,1),(5,6,3)$（数字代表刺的下标：$i$ 代表第 $i$ 个刺）。\n\n### 【样例 #1-4 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q988yxmg.png)\n\n$6$ 个阴间刺分别为 $(2,1,7),(4,1,7),(4,3,6),(4,3,7),(4,3,8),(5,3,8)$。\n\n【样例 #2】见附件，该样例除 $id=0$ 外满足 $\\text{Subtask }\\textsf1$ 的所有限制。", "locale": "zh-CN"}}}
{"pid": "P9435", "type": "P", "difficulty": 2, "samples": [["1\n4", "4"], ["5\n3\n18\n999\n9999\n9999999999", "3\n6\n12\n15\n35\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "O2优化", "洛谷月赛"], "title": "『XYGOI round1』三个数", "background": "", "description": "MX 有一个有 $(w-2)$ 个数的集合 $S=\\{3,4,5,\\cdots ,w\\}$。要求构造一个只包含非负整数的集合（无重复元素），使得 $S$ 里面的任何一个数都能被这个集合里面大于等于 $3$ 个不同的数相加得到，求这个集合中至少包含多少个元素。", "inputFormat": "本题包含多组测试数据。\n\n第一行输入一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行每行输入一个整数 $w$。", "outputFormat": "共 $T$ 行，每行输出一个整数 $n$，表示集合至少应该含有的元素个数。", "hint": "#### 样例 1 说明：\n\n集合元素可以为 $0,1,2,3$。\n\n#### 数据范围：\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1\\le T \\le 10^5$，$3\\le w \\le 10^{12}$。\n\n| Subtask | $T$ | $w$ | 分值 |\n|:-:|:-:|:-:|:-:|\n|0|$=1$|$w\\le 10$|5|\n|1|$1\\le T\\le 10^3$|$w\\le 20$|10|\n|2|$1\\le T\\le 50$|$w\\le 10^{3}$|25|\n|3|$1\\le T\\le 10^3$|$w\\le 10^{5}$|30|\n|4|$1\\le T\\le 10^5$|$3\\le w\\le 10^{12}$|30|\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『XYGOI round1』三个数", "background": "", "description": "MX 有一个有 $(w-2)$ 个数的集合 $S=\\{3,4,5,\\cdots ,w\\}$。要求构造一个只包含非负整数的集合（无重复元素），使得 $S$ 里面的任何一个数都能被这个集合里面大于等于 $3$ 个不同的数相加得到，求这个集合中至少包含多少个元素。", "inputFormat": "本题包含多组测试数据。\n\n第一行输入一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行每行输入一个整数 $w$。", "outputFormat": "共 $T$ 行，每行输出一个整数 $n$，表示集合至少应该含有的元素个数。", "hint": "#### 样例 1 说明：\n\n集合元素可以为 $0,1,2,3$。\n\n#### 数据范围：\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1\\le T \\le 10^5$，$3\\le w \\le 10^{12}$。\n\n| Subtask | $T$ | $w$ | 分值 |\n|:-:|:-:|:-:|:-:|\n|0|$=1$|$w\\le 10$|5|\n|1|$1\\le T\\le 10^3$|$w\\le 20$|10|\n|2|$1\\le T\\le 50$|$w\\le 10^{3}$|25|\n|3|$1\\le T\\le 10^3$|$w\\le 10^{5}$|30|\n|4|$1\\le T\\le 10^5$|$3\\le w\\le 10^{12}$|30|\n", "locale": "zh-CN"}}}
{"pid": "P9436", "type": "P", "difficulty": 5, "samples": [["2\n10 4\n2 2 4 8 6 5 7 6\n2 0", "1\n1"], ["2\n40 21\n1 1 2 2 6 6 7 7 8 8 9 9 10 10 11 11 15 15 16 16 23 23 24 24 25 25 26 26 30 30 34 35 35 36 36 37 37 38 38 39 40 40\n40 15\n3 3 4 4 14 14 15 15 17 17 19 19 24 23 25 24 27 26 30 29 31 30 33 32 35 34 39 38 40 39", "4\n4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "洛谷月赛"], "title": "『XYGOI round1』一些数", "background": "MX 在研究排列所具有的性质。这一天，她拿出了 $n$ 张卡片排成一排，想要在上面填数以写成一个 $1\\sim n$ 的排列。  \n\nPiggy 趁 MX 不注意，偷偷在一些卡片上写了数。", "description": "MX 很快发现了这一切。不过她并不生气，而是考虑一个有趣的问题：如果我在上面填一些数，让它依然构成一个排列，且它的最长上升子序列长度为 $n-1$，MX 有多少种填数方法呢？    \n\nPiggy 比较良心。他没有在不同的位置上填相同的数。", "inputFormat": "本题有多组测试数据。  \n\n第一行一个整数 $T$ 代表数据组数。  \n对于每组数据：  \n- 第一行两个整数 $n,q$ 代表卡牌个数和 Piggy 已经填上了多少个数。  \n- 第二行 $2q$ 个整数，第 $2i-1,2i$ 个整数 $(x,y)$ 代表第 $x$ 个数被 Piggy 填成了 $y$。", "outputFormat": "输出 $T$ 行，每行一个整数代表答案。", "hint": "#### 样例解释\n用 $-1$ 代表此位置数字还未确定。  \n样例 $1$：第一组给定的排列为 $-1,2,-1,8,-1,5,6,-1,-1,-1$。容易发现，只有 $1,2,3,8,4,5,6,7,9,10$ 的最长上升子序列长度为 $10-1=9$。第二组给定的排列为 $-1,-1$，$2,1$ 为唯一满足要求的序列。\n\n**本题采用捆绑测试。**\n\n\n| Subtask | $\\sum n$ | $\\sum q$ |  分值 |\n|:-:|:-:|:-:|:-:|\n|0|$\\le 10$|$\\le 10$|10|\n|1|$\\le 15$|$\\le 10$|20|\n|2|$\\le 5\\times 10^3$|$\\le 5\\times 10^3$|30|\n|3|$\\le 5\\times 10^5$|$\\le 5\\times 10^5$|40| \n\n保证 $ 0\\le q\\le n$，$1\\le n\\le  5\\times 10^5$，$1\\le T\\le 10^5$，$1 \\le x,y \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『XYGOI round1』一些数", "background": "MX 在研究排列所具有的性质。这一天，她拿出了 $n$ 张卡片排成一排，想要在上面填数以写成一个 $1\\sim n$ 的排列。  \n\nPiggy 趁 MX 不注意，偷偷在一些卡片上写了数。", "description": "MX 很快发现了这一切。不过她并不生气，而是考虑一个有趣的问题：如果我在上面填一些数，让它依然构成一个排列，且它的最长上升子序列长度为 $n-1$，MX 有多少种填数方法呢？    \n\nPiggy 比较良心。他没有在不同的位置上填相同的数。", "inputFormat": "本题有多组测试数据。  \n\n第一行一个整数 $T$ 代表数据组数。  \n对于每组数据：  \n- 第一行两个整数 $n,q$ 代表卡牌个数和 Piggy 已经填上了多少个数。  \n- 第二行 $2q$ 个整数，第 $2i-1,2i$ 个整数 $(x,y)$ 代表第 $x$ 个数被 Piggy 填成了 $y$。", "outputFormat": "输出 $T$ 行，每行一个整数代表答案。", "hint": "#### 样例解释\n用 $-1$ 代表此位置数字还未确定。  \n样例 $1$：第一组给定的排列为 $-1,2,-1,8,-1,5,6,-1,-1,-1$。容易发现，只有 $1,2,3,8,4,5,6,7,9,10$ 的最长上升子序列长度为 $10-1=9$。第二组给定的排列为 $-1,-1$，$2,1$ 为唯一满足要求的序列。\n\n**本题采用捆绑测试。**\n\n\n| Subtask | $\\sum n$ | $\\sum q$ |  分值 |\n|:-:|:-:|:-:|:-:|\n|0|$\\le 10$|$\\le 10$|10|\n|1|$\\le 15$|$\\le 10$|20|\n|2|$\\le 5\\times 10^3$|$\\le 5\\times 10^3$|30|\n|3|$\\le 5\\times 10^5$|$\\le 5\\times 10^5$|40| \n\n保证 $ 0\\le q\\le n$，$1\\le n\\le  5\\times 10^5$，$1\\le T\\le 10^5$，$1 \\le x,y \\le n$。", "locale": "zh-CN"}}}
{"pid": "P9437", "type": "P", "difficulty": 4, "samples": [["3\n1 2 3\n1 2", "538"], ["3\n5 21 0\n1 2", "6418"], ["4\n1 2 3 4\n1 2 2\n", "1900"], ["6\n10 23 16 3 125 1\n1 1 1 1 1\n", "7680868"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "树形 DP", "洛谷月赛"], "title": "『XYGOI round1』一棵树", "background": "java 今天带了一棵树到出题组，然后被不讲理的 MX 占为己有了。", "description": "于是 MX 有一棵 $n$ 个节点的树，每个点上有一个数字 $a_i$。\n\n定义一条路径 $(x,y)$ 的权值 $w(x,y)$ 为，从 $x$ 走到 $y$ 的最短路径上，所有节点上的数字顺次写下后得到的数。如，顺次经过写有数字 $3,21,0,5$ 的四个节点，那么这个路径的权值为 $32105$。\n\nMX 想知道这棵树所有路径的权值之和，即 $\\sum\\limits_{x=1}^n\\sum\\limits_{y=1}^nw(x,y)$ 为多少。\n\n答案可能很大，对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个非负整数 $a_i$。\n\n第三行 $n-1$ 个正整数，第 $i$ 个数 $p_i$ 表示节点 $p_i$ 与节点 $i+1$ 之间有边。保证 $1\\le p_i\\le i$。", "outputFormat": "一行一个整数，表示答案。答案对 $998244353$ 取模。", "hint": "### 样例解释\n\n样例一解释：$1+12+123+2+21+23+3+32+321=538$。\n\n样例二解释：$5+521+5210+21+215+210+0+021+0215=6418$。\n\n### 数据范围  \n**本题采用捆绑测试。**  \n\n记 $V=\\max\\{a_i\\}+1$。\n\n|Subtask|分值|$n\\le$|$V\\le $|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|0|5|$1000$|$10$||\n|1|15|$8000$|$10^9$||\n|2|15|$10^6$|$10^9$|$p_i=i$|\n|3|15|$10^6$|$10^9$|$p_i=1$|\n|4|50|$10^6$|$10^9$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$0\\le a_i<10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『XYGOI round1』一棵树", "background": "java 今天带了一棵树到出题组，然后被不讲理的 MX 占为己有了。", "description": "于是 MX 有一棵 $n$ 个节点的树，每个点上有一个数字 $a_i$。\n\n定义一条路径 $(x,y)$ 的权值 $w(x,y)$ 为，从 $x$ 走到 $y$ 的最短路径上，所有节点上的数字顺次写下后得到的数。如，顺次经过写有数字 $3,21,0,5$ 的四个节点，那么这个路径的权值为 $32105$。\n\nMX 想知道这棵树所有路径的权值之和，即 $\\sum\\limits_{x=1}^n\\sum\\limits_{y=1}^nw(x,y)$ 为多少。\n\n答案可能很大，对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个非负整数 $a_i$。\n\n第三行 $n-1$ 个正整数，第 $i$ 个数 $p_i$ 表示节点 $p_i$ 与节点 $i+1$ 之间有边。保证 $1\\le p_i\\le i$。", "outputFormat": "一行一个整数，表示答案。答案对 $998244353$ 取模。", "hint": "### 样例解释\n\n样例一解释：$1+12+123+2+21+23+3+32+321=538$。\n\n样例二解释：$5+521+5210+21+215+210+0+021+0215=6418$。\n\n### 数据范围  \n**本题采用捆绑测试。**  \n\n记 $V=\\max\\{a_i\\}+1$。\n\n|Subtask|分值|$n\\le$|$V\\le $|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|0|5|$1000$|$10$||\n|1|15|$8000$|$10^9$||\n|2|15|$10^6$|$10^9$|$p_i=i$|\n|3|15|$10^6$|$10^9$|$p_i=1$|\n|4|50|$10^6$|$10^9$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$0\\le a_i<10^9$。", "locale": "zh-CN"}}}
