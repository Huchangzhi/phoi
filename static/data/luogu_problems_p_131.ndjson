{"pid": "P3655", "type": "P", "difficulty": 3, "samples": [["4 3 2 3\n0\n5\n2\n4\n6\n1 2 1\n3 4 -3\n1 4 2\n", "-9\n-1\n-5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "差分", "洛谷月赛"], "title": "不成熟的梦想家 (未熟 DREAMER)", "background": "**どんな未来かは 誰もまだ知らない**\n\n**那是个任谁也不会知晓的未来**\n\n**でも楽しくなるはずだよ**\n\n**但应该会充满乐趣吧**\n\n**みんなとなら乗りこえられる**\n\n**只要大伙儿同在 就能跨越难关**\n\n**これからなんだねお互いがんばろうよ**\n\n**现在才正要开始 彼此互相加油吧**\n\n**どんな未来かは 誰もまだ知らない**\n\n**那是个任谁也不会知晓的未来**\n\n**でも楽しくしたホントに**\n\n**不过真心期望能够充满着乐趣**\n\n**みんなとなら無理したくなる**\n\n**只要大伙儿同在 就会想将顾虑抛诸脑后**\n\n**成長したいなまだまだ未熟DREAMER**\n\n**愿能有所成长 如今还只是尚未成熟的梦想家**\n\n ![](https://cdn.luogu.com.cn/upload/pic/4493.png) \n\nAqours的成员终于到齐了。\n\n\n今天，是我们全员在一起的第一场演唱会。\n\n\n大家都好好练习过了，相信一定会表现得很出色的。\n\n\n不过，每个人的唱功也要尽量地接近才可以呢，如果太突出或者太落后，也是会影响表现的样子。\n\n\n所以我们从隔壁的学园都市借来了一个发明，可以改变我们成员的唱功呢。\n", "description": "我们Aqours的成员共有N+1人，他们会列成一队。\n\n他们的唱功以A[0]到A[N]表示，A[i]$(0\\le i \\le N)$均给出。\n\n学园都市的机器可以改变队列中连续多个成员的唱功值，并将其加上一个数Z，当然当Z是负数的时候就变成减去了。\n\n我打算一共使用这个机器Q次，每次把第X到第Y号（$1\\le X,Y\\le10^6$）的成员都加上Z点唱功值。\n\n而我们队伍的魅力值B，是这么算的：\n\n一开始B=0，然后从第1号到第N号成员，\n\n- 当$A_{i-1}<A_i$：$B = B-S\\cdot|A_{i-1} - A_i|$\n- 当$A_{i-1}>A_i$：$B = B+T\\cdot|A_{i-1} - A_i|$\n其中S和T是LoveLive组委会给我们的常数。\n\n果然，我是バカチカ（笨蛋千歌）呢，所以作为领导我永远排在队伍的开头，唱功永远是0，机器也不会改到我头上呢。\n\n你能帮我们算算，我**每次**使用完这个机器之后，成员的魅力B是多少吗？\n", "inputFormat": "第一行4个整数，N，Q，S，T，各个变量在描述中已经解释\n\n接下来N+1行，每行一个数整数Ai，其中A0=0\n\n接下来Q行，每行3个整数，X，Y，Z各个变量在描述中已经解释\n", "outputFormat": "Q个整数，表示答案。\n", "hint": "30% 的数据 $N,Q\\le 2000$,\n\n另外20% 的数据 $S=T$\n\n100%的数据 $N,Q\\le 200000$；$1\\le S,T,A_i\\le10^6$；$|Z|\\le 10^6$\n请注意可能需要使用int64，cin/cout可能超时。\n\n样例解释：\n\n第一次变化后，\n\nA 0 6 3 4 6\n\nB -12 -3 -5 -9\n\n\n#### 以下是彩蛋\n\n没有。\n\n哪来的那么多彩蛋？\n", "locale": "zh-CN", "translations": {"en": {"title": "Immature Dreamer (Mijuku DREAMER)", "background": "What kind of future it is, nobody knows yet.\n\nBut it should be fun.\n\nIf we’re all together, we can overcome anything.\n\nIt’s just the beginning—let’s encourage each other.\n\nWhat kind of future it is, nobody knows yet.\n\nBut I really hope it will be full of fun.\n\nIf we’re all together, we’ll even want to push our limits.\n\nI want to grow—I’m still just an immature DREAMER.\n\n![](https://cdn.luogu.com.cn/upload/pic/4493.png)\n\nThe members of Aqours have finally gathered.\n\nToday is our very first concert with everyone together.\n\nEveryone has practiced well; I’m sure we’ll perform great.\n\nHowever, everyone’s singing skills should be as close as possible. If someone is too outstanding or too far behind, it will affect the performance.\n\nSo we borrowed an invention from the neighboring Academy City that can change our members’ singing skills.", "description": "There are $N+1$ members in Aqours, lined up in a row.\n\nTheir singing skills are denoted by $A[0]$ to $A[N]$, and all $A[i]$ for $0 \\le i \\le N$ are given.\n\nThe machine from Academy City can change the singing skills of a consecutive segment in the line by adding a number $Z$ to each of them. Of course, if $Z$ is negative, it means subtracting.\n\nI plan to use this machine $Q$ times. Each time, I add $Z$ to the singing skills of all members from index $X$ to index $Y$ (with $1 \\le X, Y \\le 10^6$).\n\nOur team’s charm value $B$ is computed as follows:\n\nInitially, $B = 0$. Then, for members from index $1$ to $N$:\n\n- If $A_{i-1} < A_i$: $B = B - S \\cdot |A_{i-1} - A_i|$.\n- If $A_{i-1} > A_i$: $B = B + T \\cdot |A_{i-1} - A_i|$.\n\nHere $S$ and $T$ are constants given by the Love Live committee.\n\nAs the leader, I (Chika) am always at the front of the line, with singing skill always $0$. The machine will never modify me. Thus $A_0 = 0$ at all times.\n\nCan you help us compute the charm value $B$ after each use of the machine?", "inputFormat": "- The first line contains four integers $N$, $Q$, $S$, $T$ (as described above).\n- The next $N+1$ lines each contain one integer $A_i$, with $A_0 = 0$.\n- The next $Q$ lines each contain three integers $X$, $Y$, $Z$ (as described above).", "outputFormat": "Output $Q$ integers, one per line, where the $i$-th line is the value of $B$ after the $i$-th operation.", "hint": "- For 30% of the testdata, $N, Q \\le 2000$.\n- Additionally, for another 20% of the testdata, $S = T$.\n- For 100% of the testdata, $N, Q \\le 200000$; $1 \\le S, T, A_i \\le 10^6$; $|Z| \\le 10^6$.\n- Note that a 64-bit integer may be required, and using std::cin/std::cout may time out.\n\nExplanation of the sample:\n\nAfter the first change,\n\nA: 0 6 3 4 6\n\nB: -12 -3 -5 -9\n\nEaster egg:\n\nNone.\n\nWhy would there be so many easter eggs?\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "不成熟的梦想家 (未熟 DREAMER)", "background": "**どんな未来かは 誰もまだ知らない**\n\n**那是个任谁也不会知晓的未来**\n\n**でも楽しくなるはずだよ**\n\n**但应该会充满乐趣吧**\n\n**みんなとなら乗りこえられる**\n\n**只要大伙儿同在 就能跨越难关**\n\n**これからなんだねお互いがんばろうよ**\n\n**现在才正要开始 彼此互相加油吧**\n\n**どんな未来かは 誰もまだ知らない**\n\n**那是个任谁也不会知晓的未来**\n\n**でも楽しくしたホントに**\n\n**不过真心期望能够充满着乐趣**\n\n**みんなとなら無理したくなる**\n\n**只要大伙儿同在 就会想将顾虑抛诸脑后**\n\n**成長したいなまだまだ未熟DREAMER**\n\n**愿能有所成长 如今还只是尚未成熟的梦想家**\n\n ![](https://cdn.luogu.com.cn/upload/pic/4493.png) \n\nAqours的成员终于到齐了。\n\n\n今天，是我们全员在一起的第一场演唱会。\n\n\n大家都好好练习过了，相信一定会表现得很出色的。\n\n\n不过，每个人的唱功也要尽量地接近才可以呢，如果太突出或者太落后，也是会影响表现的样子。\n\n\n所以我们从隔壁的学园都市借来了一个发明，可以改变我们成员的唱功呢。\n", "description": "我们Aqours的成员共有N+1人，他们会列成一队。\n\n他们的唱功以A[0]到A[N]表示，A[i]$(0\\le i \\le N)$均给出。\n\n学园都市的机器可以改变队列中连续多个成员的唱功值，并将其加上一个数Z，当然当Z是负数的时候就变成减去了。\n\n我打算一共使用这个机器Q次，每次把第X到第Y号（$1\\le X,Y\\le10^6$）的成员都加上Z点唱功值。\n\n而我们队伍的魅力值B，是这么算的：\n\n一开始B=0，然后从第1号到第N号成员，\n\n- 当$A_{i-1}<A_i$：$B = B-S\\cdot|A_{i-1} - A_i|$\n- 当$A_{i-1}>A_i$：$B = B+T\\cdot|A_{i-1} - A_i|$\n其中S和T是LoveLive组委会给我们的常数。\n\n果然，我是バカチカ（笨蛋千歌）呢，所以作为领导我永远排在队伍的开头，唱功永远是0，机器也不会改到我头上呢。\n\n你能帮我们算算，我**每次**使用完这个机器之后，成员的魅力B是多少吗？\n", "inputFormat": "第一行4个整数，N，Q，S，T，各个变量在描述中已经解释\n\n接下来N+1行，每行一个数整数Ai，其中A0=0\n\n接下来Q行，每行3个整数，X，Y，Z各个变量在描述中已经解释\n", "outputFormat": "Q个整数，表示答案。\n", "hint": "30% 的数据 $N,Q\\le 2000$,\n\n另外20% 的数据 $S=T$\n\n100%的数据 $N,Q\\le 200000$；$1\\le S,T,A_i\\le10^6$；$|Z|\\le 10^6$\n请注意可能需要使用int64，cin/cout可能超时。\n\n样例解释：\n\n第一次变化后，\n\nA 0 6 3 4 6\n\nB -12 -3 -5 -9\n\n\n#### 以下是彩蛋\n\n没有。\n\n哪来的那么多彩蛋？\n", "locale": "zh-CN"}}}
{"pid": "P3656", "type": "P", "difficulty": 5, "samples": [["5\n5\n4\n1\n3\n2\n1\n3\n2\n5\n4", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2017", "USACO", "树状数组"], "title": "[USACO17FEB] Why Did the Cow Cross the Road I P", "background": "", "description": "Why did the cow cross the road? We may never know the full reason, but it is certain that Farmer John's cows do end up crossing the road quite frequently. In fact, they end up crossing the road so often that they often bump into each-other when their paths cross, a situation Farmer John would like to remedy.\n\nFarmer John raises $N$ breeds of cows ($1 \\leq N \\leq 100,000$), and each of his fields is dedicated to grazing for one specific breed; for example, a field dedicated to breed 12 can only be used for cows of breed 12 and not of any other breed. A long road runs through his farm. There is a sequence of $N$ fields on one side of the road (one for each breed), and a sequence of $N$ fields on the other side of the road (also one for each breed). When a cow crosses the road, she therefore crosses between the two fields designated for her specific breed.\n\n\nHad Farmer John planned more carefully, he would have ordered the fields by breed the same way on both sides of the road, so the two fields for each breed would be directly across the road from each-other. This would have allowed cows to cross the road without any cows from different breeds bumping into one-another. Alas, the orderings on both sides of the road might be different, so Farmer John observes that there might be pairs of breeds that cross. A pair of different breeds $(a,b)$ is \"crossing\" if any path across the road for breed $a$ must intersect any path across the road for breed $b$.\n\n\nFarmer John would like to minimize the number of crossing pairs of breeds. For logistical reasons, he figures he can move cows around on one side of the road so the fields on that side undergo a \"cyclic shift\". That is, for some $0 \\leq k < N$, every cow re-locates to the field $k$ fields ahead of it, with the cows in the last $k$ fields moving so they now populate the first $k$ fields. For example, if the fields on one side of the road start out ordered by breed as 3, 7, 1, 2, 5, 4, 6 and undergo a cyclic shift by $k=2$, the new order will be 4, 6, 3, 7, 1, 2, 5. Please determine the minimum possible number of crossing pairs of breeds that can exist after an appropriate cyclic shift of the fields on one side of the road.\n", "inputFormat": "The first line of input contains $N$. The next $N$ lines describe the order, by breed ID, of fields on one side of the road; each breed ID is an integer in the range $1 \\ldots N$. The last $N$ lines describe the order, by breed ID, of the fields on the other side of the road.\n", "outputFormat": "Please output the minimum number of crossing pairs of breeds after a cyclic shift of the fields on one side of the road (either side can be shifted).\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO17FEB] Why Did the Cow Cross the Road I P", "background": "", "description": "Why did the cow cross the road? We may never know the full reason, but it is certain that Farmer John's cows do end up crossing the road quite frequently. In fact, they end up crossing the road so often that they often bump into each-other when their paths cross, a situation Farmer John would like to remedy.\n\nFarmer John raises $N$ breeds of cows ($1 \\leq N \\leq 100,000$), and each of his fields is dedicated to grazing for one specific breed; for example, a field dedicated to breed 12 can only be used for cows of breed 12 and not of any other breed. A long road runs through his farm. There is a sequence of $N$ fields on one side of the road (one for each breed), and a sequence of $N$ fields on the other side of the road (also one for each breed). When a cow crosses the road, she therefore crosses between the two fields designated for her specific breed.\n\n\nHad Farmer John planned more carefully, he would have ordered the fields by breed the same way on both sides of the road, so the two fields for each breed would be directly across the road from each-other. This would have allowed cows to cross the road without any cows from different breeds bumping into one-another. Alas, the orderings on both sides of the road might be different, so Farmer John observes that there might be pairs of breeds that cross. A pair of different breeds $(a,b)$ is \"crossing\" if any path across the road for breed $a$ must intersect any path across the road for breed $b$.\n\n\nFarmer John would like to minimize the number of crossing pairs of breeds. For logistical reasons, he figures he can move cows around on one side of the road so the fields on that side undergo a \"cyclic shift\". That is, for some $0 \\leq k < N$, every cow re-locates to the field $k$ fields ahead of it, with the cows in the last $k$ fields moving so they now populate the first $k$ fields. For example, if the fields on one side of the road start out ordered by breed as 3, 7, 1, 2, 5, 4, 6 and undergo a cyclic shift by $k=2$, the new order will be 4, 6, 3, 7, 1, 2, 5. Please determine the minimum possible number of crossing pairs of breeds that can exist after an appropriate cyclic shift of the fields on one side of the road.\n", "inputFormat": "The first line of input contains $N$. The next $N$ lines describe the order, by breed ID, of fields on one side of the road; each breed ID is an integer in the range $1 \\ldots N$. The last $N$ lines describe the order, by breed ID, of the fields on the other side of the road.\n", "outputFormat": "Please output the minimum number of crossing pairs of breeds after a cyclic shift of the fields on one side of the road (either side can be shifted).\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO17FEB] Why Did the Cow Cross the Road I P", "background": "", "description": "为什么奶牛要过马路？我们可能永远无法知道完整的原因，但可以肯定的是，Farmer John 的奶牛确实经常过马路。事实上，它们过马路的频率如此之高，以至于它们的路径交叉时经常会撞到彼此，这种情况 Farmer John 希望能够改善。\n\nFarmer John 饲养了 $N$ 种奶牛（$1 \\leq N \\leq 100,000$），他的每一块田地都专门用于放牧某一种特定的奶牛品种；例如，专门用于品种 12 的田地只能用于品种 12 的奶牛，而不能用于其他品种。一条长长的马路贯穿他的农场。马路的一侧有一系列 $N$ 块田地（每块田地对应一种品种），马路的另一侧也有一系列 $N$ 块田地（同样每块田地对应一种品种）。当一头奶牛过马路时，它会在为其特定品种指定的两块田地之间穿行。\n\n如果 Farmer John 当初计划得更仔细，他可能会在马路两侧按相同的品种顺序排列田地，这样每块品种的田地就会直接相对。这将使奶牛过马路时，不同品种的奶牛不会撞到彼此。然而，马路两侧的田地顺序可能不同，因此 Farmer John 观察到可能存在一些品种对会交叉。一对不同的品种 $(a,b)$ 是“交叉的”，如果品种 $a$ 的任何过马路路径都必须与品种 $b$ 的任何过马路路径相交。\n\nFarmer John 希望最小化交叉品种对的数量。出于物流原因，他决定可以通过对马路一侧的田地进行“循环移位”来重新安排奶牛的位置。也就是说，对于某个 $0 \\leq k < N$，每头奶牛都会移动到其前方 $k$ 块田地，最后 $k$ 块田地的奶牛会移动到前 $k$ 块田地。例如，如果马路一侧的田地最初按品种顺序为 3, 7, 1, 2, 5, 4, 6，并进行 $k=2$ 的循环移位，新的顺序将为 4, 6, 3, 7, 1, 2, 5。请确定在对马路一侧的田地进行适当的循环移位后，可能存在的交叉品种对的最小数量。", "inputFormat": "输入的第一行包含 $N$。接下来的 $N$ 行描述了马路一侧田地的品种 ID 顺序；每个品种 ID 是 $1$ 到 $N$ 之间的整数。最后的 $N$ 行描述了马路另一侧田地的品种 ID 顺序。", "outputFormat": "请输出在对马路一侧的田地进行循环移位后（可以移位任意一侧），交叉品种对的最小数量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3657", "type": "P", "difficulty": 4, "samples": [["6\n1\n2\n3\n4\n5\n6\n6\n5\n4\n3\n2\n1", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2017", "USACO", "树状数组", "离散化", "枚举"], "title": "[USACO17FEB] Why Did the Cow Cross the Road II P", "background": "*本题与 [金组同名题目](/problem/P6119) 在题意上一致，唯一的差别是数据范围。*", "description": "Farmer John 饲养了 $N$ 种奶牛，编号从 $1$ 到 $N$。一些品种的奶牛和其他奶牛间相处良好，事实证明，如果两个品种的奶牛编号分别为 $a,b$，当 $|a-b| \\leq 4$ 时，这两个品种的奶牛能友好相处，否则不能友好相处。\n\n一条长长的道路贯穿整个农场，道路的左侧有 $N$ 个牧场（每个品种的奶牛恰好占据一个牧场），道路的右侧也有 $N$ 个牧场（每个品种的奶牛恰好占据一个牧场）。为了让奶牛们安全穿过马路，Farmer John 希望能在马路上画出一些人行道（牛行道？），要求这些人行道满足如下条件：\n\n1. 人行道从左侧的某个牧场出发，连接到右侧的某个牧场；\n2. 人行道连接的两个牧场的奶牛要能友好相处；\n3. 人行道不能在道路中间相交；\n4. 每个牧场只能与一条人行道相连。\n\n你需要帮 FJ 求出最多能有多少条人行道。", "inputFormat": "输入第一行一个整数 $N$（$1 \\leq N \\leq 10^5$）。\n\n接下来 $N$ 行，每行一个整数 $a_i$，代表道路左侧第 $i$ 个牧场的奶牛品种编号。\n\n接下来 $N$ 行，每行一个整数 $b_i$，代表道路右侧第 $i$ 个牧场的奶牛品种编号。", "outputFormat": "输出最多能画多少条人行道。", "hint": "保证 $a_i,b_i$ 均为从 $1$ 到 $N$ 的排列。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO17FEB] Why Did the Cow Cross the Road II P", "background": "This problem shares the same statement as the problem with the same name in the Gold division ([金组同名题目](/problem/P6119)); the only difference lies in the constraints.", "description": "Farmer John raises $N$ breeds of cows, numbered from $1$ to $N$. Some breeds get along well with others; it turns out that if two breeds are numbered $a, b$, then when $|a - b| \\leq 4$, these two breeds can get along, otherwise they cannot.\n\nA long road runs through the farm. There are $N$ pastures on the left side of the road (each occupied by exactly one breed), and $N$ pastures on the right side of the road (each occupied by exactly one breed). To help the cows safely cross the road, Farmer John wants to paint some crosswalks (cow-walks?) on the road, subject to the following conditions:\n\n1. Each crosswalk connects a pasture on the left to a pasture on the right.\n2. The breeds of the two connected pastures must get along.\n3. No two crosswalks may intersect in the middle of the road.\n4. Each pasture can be connected to at most one crosswalk.\n\nYou need to help FJ determine the maximum possible number of crosswalks.", "inputFormat": "The first line contains an integer $N$ ($1 \\leq N \\leq 10^5$).\n\nThe next $N$ lines each contain an integer $a_i$, representing the breed in the $i$-th pasture on the left side of the road.\n\nThe next $N$ lines each contain an integer $b_i$, representing the breed in the $i$-th pasture on the right side of the road.", "outputFormat": "Output the maximum number of crosswalks.", "hint": "It is guaranteed that both $a_i$ and $b_i$ are permutations of $1$ to $N$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO17FEB] Why Did the Cow Cross the Road II P", "background": "*本题与 [金组同名题目](/problem/P6119) 在题意上一致，唯一的差别是数据范围。*", "description": "Farmer John 饲养了 $N$ 种奶牛，编号从 $1$ 到 $N$。一些品种的奶牛和其他奶牛间相处良好，事实证明，如果两个品种的奶牛编号分别为 $a,b$，当 $|a-b| \\leq 4$ 时，这两个品种的奶牛能友好相处，否则不能友好相处。\n\n一条长长的道路贯穿整个农场，道路的左侧有 $N$ 个牧场（每个品种的奶牛恰好占据一个牧场），道路的右侧也有 $N$ 个牧场（每个品种的奶牛恰好占据一个牧场）。为了让奶牛们安全穿过马路，Farmer John 希望能在马路上画出一些人行道（牛行道？），要求这些人行道满足如下条件：\n\n1. 人行道从左侧的某个牧场出发，连接到右侧的某个牧场；\n2. 人行道连接的两个牧场的奶牛要能友好相处；\n3. 人行道不能在道路中间相交；\n4. 每个牧场只能与一条人行道相连。\n\n你需要帮 FJ 求出最多能有多少条人行道。", "inputFormat": "输入第一行一个整数 $N$（$1 \\leq N \\leq 10^5$）。\n\n接下来 $N$ 行，每行一个整数 $a_i$，代表道路左侧第 $i$ 个牧场的奶牛品种编号。\n\n接下来 $N$ 行，每行一个整数 $b_i$，代表道路右侧第 $i$ 个牧场的奶牛品种编号。", "outputFormat": "输出最多能画多少条人行道。", "hint": "保证 $a_i,b_i$ 均为从 $1$ 到 $N$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P3658", "type": "P", "difficulty": 6, "samples": [["4 1\n4\n3\n2\n1\n1\n4\n2\n3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2017", "USACO", "树状数组", "cdq 分治"], "title": "[USACO17FEB] Why Did the Cow Cross the Road III P", "background": "", "description": "Farmer John is continuing to ponder the issue of cows crossing the road through his farm, introduced in the preceding two problems. He realizes now that the threshold for friendliness is a bit more subtle than he previously considered -- breeds $a$ and $b$ are now friendly if $|a - b| \\leq K$, and unfriendly otherwise.\nGiven the orderings of fields on either side of the road through FJ's farm, please count the number of unfriendly crossing pairs of breeds, where a crossing pair of breeds is defined as in the preceding problems.\n\n", "inputFormat": "The first line of input contains $N$ ($1 \\leq N \\leq 100,000$) and $K$ ($0 \\leq K < N$). The next $N$ lines describe the order, by breed ID, of fields on one side of the road; each breed ID is an integer in the range $1 \\ldots N$. The last $N$ lines describe the order, by breed ID, of the fields on the other side of the road. Each breed ID appears exactly once in each ordering.\n", "outputFormat": "Please output the number of unfriendly crossing pairs of breeds.\n\n", "hint": "In this example, breeds 1 and 4 are unfriendly and crossing, as are breeds 1 and 3.\n\n", "locale": "en", "translations": {"en": {"title": "[USACO17FEB] Why Did the Cow Cross the Road III P", "background": "", "description": "Farmer John is continuing to ponder the issue of cows crossing the road through his farm, introduced in the preceding two problems. He realizes now that the threshold for friendliness is a bit more subtle than he previously considered -- breeds $a$ and $b$ are now friendly if $|a - b| \\leq K$, and unfriendly otherwise.\nGiven the orderings of fields on either side of the road through FJ's farm, please count the number of unfriendly crossing pairs of breeds, where a crossing pair of breeds is defined as in the preceding problems.\n\n", "inputFormat": "The first line of input contains $N$ ($1 \\leq N \\leq 100,000$) and $K$ ($0 \\leq K < N$). The next $N$ lines describe the order, by breed ID, of fields on one side of the road; each breed ID is an integer in the range $1 \\ldots N$. The last $N$ lines describe the order, by breed ID, of the fields on the other side of the road. Each breed ID appears exactly once in each ordering.\n", "outputFormat": "Please output the number of unfriendly crossing pairs of breeds.\n\n", "hint": "In this example, breeds 1 and 4 are unfriendly and crossing, as are breeds 1 and 3.\n\n", "locale": "en"}, "zh-CN": {"title": "[USACO17FEB] Why Did the Cow Cross the Road III P", "background": null, "description": "Farmer John 继续思考奶牛穿过他农场道路的问题，这个问题在前两个问题中已经介绍过。他现在意识到，友好度的阈值比他之前考虑的要微妙一些——现在，品种 $a$ 和 $b$ 是友好的当且仅当 $|a - b| \\leq K$，否则就是不友好的。给定 FJ 农场道路两侧田地的品种顺序，请计算不友好的交叉品种对的数量，其中交叉品种对的定义与 [前两个问题](https://www.luogu.com.cn/problem/P3657) 相同。\n\n形式化题面：给出两个排列 $A,B$ ，相等的数之间连线，求数对 $(i,j)$ 的个数。其中 $(i,j)$ 满足：它们所在两个排列间对应的线交叉且 $|i-j| > k$ 。", "inputFormat": "输入的第一行包含 $N$ ($1 \\leq N \\leq 100,000$) 和 $K$ ($0 \\leq K < N$)。接下来的 $N$ 行描述了道路一侧的每块田地里牛的品种ID；每个品种 ID 是一个在 $1 \\ldots N$ 范围内的整数。最后的 $N$ 行描述了道路另一侧的每块田地里牛的品种ID。每个品种 ID 在每个顺序中恰好出现一次。", "outputFormat": "请输出不友好的交叉品种对的数量。", "hint": "在这个例子中，品种 1 和 4 是不友好的且交叉的，品种 1 和 3 也是不友好的且交叉的。", "locale": "zh-CN"}}}
{"pid": "P3659", "type": "P", "difficulty": 5, "samples": [["4 2\n30 92 36 10\n38 85 60 16\n41 13 5 68\n20 97 13 80", "31"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2017", "USACO", "广度优先搜索 BFS", "深度优先搜索 DFS", "最短路"], "title": "[USACO17FEB] Why Did the Cow Cross the Road I G", "background": "", "description": "Why did the cow cross the road? Well, one reason is that Farmer John's farm simply has a lot of roads, making it impossible for his cows to travel around without crossing many of them.\n\nFJ's farm is arranged as an $N \\times N$ square grid of fields ($3 \\leq N \\leq 100$), with a set of $N-1$ north-south roads and $N-1$ east-west roads running through the interior of the farm serving as dividers between the fields. A tall fence runs around the external perimeter, preventing cows from leaving the farm. Bessie the cow can move freely from any field to any other adjacent field (north, east, south, or west), as long as she carefully looks both ways before crossing the road separating the two fields. It takes her $T$ units of time to cross a road ($0 \\leq T \\leq 1,000,000$).\n\nOne day, FJ invites Bessie to visit his house for a friendly game of chess. Bessie starts out in the north-west corner field and FJ's house is in the south-east corner field, so Bessie has quite a walk ahead of her. Since she gets hungry along the way, she stops at every third field she visits to eat grass (not including her starting field, but including possibly the final field in which FJ's house resides). Some fields are grassier than others, so the amount of time required for stopping to eat depends on the field in which she stops.\n\nPlease help Bessie determine the minimum amount of time it will take to reach FJ's house.", "inputFormat": "The first line of input contains $N$ and $T$. The next $N$ lines each contain $N$ positive integers (each at most 100,000) describing the amount of time required to eat grass in each field. The first number of the first line is the north-west corner.\n", "outputFormat": "Print the minimum amount of time required for Bessie to travel to FJ's house.", "hint": "The optimal solution for this example involves moving east 3 squares (eating the \"10\"), then moving south twice and west once (eating the \"5\"), and finally moving south and east to the goal.", "locale": "en", "translations": {"en": {"title": "[USACO17FEB] Why Did the Cow Cross the Road I G", "background": "", "description": "Why did the cow cross the road? Well, one reason is that Farmer John's farm simply has a lot of roads, making it impossible for his cows to travel around without crossing many of them.\n\nFJ's farm is arranged as an $N \\times N$ square grid of fields ($3 \\leq N \\leq 100$), with a set of $N-1$ north-south roads and $N-1$ east-west roads running through the interior of the farm serving as dividers between the fields. A tall fence runs around the external perimeter, preventing cows from leaving the farm. Bessie the cow can move freely from any field to any other adjacent field (north, east, south, or west), as long as she carefully looks both ways before crossing the road separating the two fields. It takes her $T$ units of time to cross a road ($0 \\leq T \\leq 1,000,000$).\n\nOne day, FJ invites Bessie to visit his house for a friendly game of chess. Bessie starts out in the north-west corner field and FJ's house is in the south-east corner field, so Bessie has quite a walk ahead of her. Since she gets hungry along the way, she stops at every third field she visits to eat grass (not including her starting field, but including possibly the final field in which FJ's house resides). Some fields are grassier than others, so the amount of time required for stopping to eat depends on the field in which she stops.\n\nPlease help Bessie determine the minimum amount of time it will take to reach FJ's house.", "inputFormat": "The first line of input contains $N$ and $T$. The next $N$ lines each contain $N$ positive integers (each at most 100,000) describing the amount of time required to eat grass in each field. The first number of the first line is the north-west corner.\n", "outputFormat": "Print the minimum amount of time required for Bessie to travel to FJ's house.", "hint": "The optimal solution for this example involves moving east 3 squares (eating the \"10\"), then moving south twice and west once (eating the \"5\"), and finally moving south and east to the goal.", "locale": "en"}, "zh-CN": {"title": "[USACO17FEB] Why Did the Cow Cross the Road I G", "background": "", "description": "奶牛为什么要过马路？其中一个原因是 Farmer John 的农场有很多道路，使得他的奶牛在四处走动时不可避免地要穿过许多道路。\n\nFJ 的农场被安排成一个 $N \\times N$ 的方形网格田地（$3 \\leq N \\leq 100$），其中有 $N-1$ 条南北向的道路和 $N-1$ 条东西向的道路穿过农场内部，作为田地之间的分隔。农场外部有一圈高高的围栏，防止奶牛离开农场。奶牛 Bessie 可以自由地从任何田地移动到相邻的田地（北、东、南或西），只要她在穿过分隔两块田地的道路时小心地左右看看。她穿过一条道路需要花费 $T$ 单位时间（$0 \\leq T \\leq 1,000,000$）。\n\n有一天，FJ 邀请 Bessie 去他家进行一场友好的国际象棋比赛。Bessie 从西北角的田地出发，而 FJ 的家在东南角的田地，因此 Bessie 需要走很长一段路。由于她在路上会感到饥饿，她会在每经过第三个田地时停下来吃草（不包括她的起始田地，但可能包括最终到达的 FJ 家的田地）。有些田地的草比其他田地更茂盛，因此停下来吃草所需的时间取决于她停下的田地。\n\n请帮助 Bessie 确定她到达 FJ 家所需的最少时间。", "inputFormat": "输入的第一行包含 $N$ 和 $T$。接下来的 $N$ 行每行包含 $N$ 个正整数（每个数不超过 100,000），描述了每个田地中吃草所需的时间。第一行的第一个数是西北角的田地。", "outputFormat": "输出 Bessie 到达 FJ 家所需的最少时间。", "hint": "这个例子的最优解是向东移动 3 个方格（吃“10”），然后向南移动两次，向西移动一次（吃“5”），最后向南和向东移动到目的地。", "locale": "zh-CN"}}}
{"pid": "P3660", "type": "P", "difficulty": 5, "samples": [["4\n3\n2\n4\n4\n1\n3\n2\n1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2017", "USACO", "树状数组", "枚举", "排序", "前缀和"], "title": "[USACO17FEB] Why Did the Cow Cross the Road III G", "background": "", "description": "The layout of Farmer John's farm is quite peculiar, with a large circular road running around the perimeter of the main field on which his cows graze during the day. Every morning, the cows cross this road on their way towards the field, and every evening they all cross again as they leave the field and return to the barn.\n\nAs we know, cows are creatures of habit, and they each cross the road the same way every day. Each cow crosses into the field at a different point from where she crosses out of the field, and all of these crossing points are distinct from each-other. Farmer John owns $N$ cows, conveniently identified with the integer IDs $1 \\ldots N$, so there are precisely $2N$ crossing points around the road. Farmer John records these crossing points concisely by scanning around the circle clockwise, writing down the ID of the cow for each crossing point, ultimately forming a sequence with $2N$ numbers in which each number appears exactly twice. He does not record which crossing points are entry points and which are exit points.\n\nLooking at his map of crossing points, Farmer John is curious how many times various pairs of cows might cross paths during the day. He calls a pair of cows $(a,b)$ a \"crossing\" pair if cow $a$'s path from entry to exit must cross cow $b$'s path from entry to exit. Please help Farmer John count the total number of crossing pairs.", "inputFormat": "The first line of input contains $N$ ($1 \\leq N \\leq 50,000$), and the next $2N$ lines describe the cow IDs for the sequence of entry and exit points around the field.\n", "outputFormat": "Please print the total number of crossing pairs.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO17FEB] Why Did the Cow Cross the Road III G", "background": "", "description": "The layout of Farmer John's farm is quite peculiar, with a large circular road running around the perimeter of the main field on which his cows graze during the day. Every morning, the cows cross this road on their way towards the field, and every evening they all cross again as they leave the field and return to the barn.\n\nAs we know, cows are creatures of habit, and they each cross the road the same way every day. Each cow crosses into the field at a different point from where she crosses out of the field, and all of these crossing points are distinct from each-other. Farmer John owns $N$ cows, conveniently identified with the integer IDs $1 \\ldots N$, so there are precisely $2N$ crossing points around the road. Farmer John records these crossing points concisely by scanning around the circle clockwise, writing down the ID of the cow for each crossing point, ultimately forming a sequence with $2N$ numbers in which each number appears exactly twice. He does not record which crossing points are entry points and which are exit points.\n\nLooking at his map of crossing points, Farmer John is curious how many times various pairs of cows might cross paths during the day. He calls a pair of cows $(a,b)$ a \"crossing\" pair if cow $a$'s path from entry to exit must cross cow $b$'s path from entry to exit. Please help Farmer John count the total number of crossing pairs.", "inputFormat": "The first line of input contains $N$ ($1 \\leq N \\leq 50,000$), and the next $2N$ lines describe the cow IDs for the sequence of entry and exit points around the field.\n", "outputFormat": "Please print the total number of crossing pairs.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO17FEB] Why Did the Cow Cross the Road III G", "background": "", "description": "Farmer John 的农场布局非常独特，主田地的外围有一条环形道路，他的奶牛白天在这里吃草。每天早上，奶牛们都会穿过这条道路进入田地，每天晚上它们又会再次穿过这条道路离开田地返回牛棚。\n\n众所周知，奶牛是习惯性动物，它们每天都会以相同的方式穿过道路。每头奶牛进入田地的点和离开田地的点不同，并且所有这些穿过点都彼此不同。Farmer John 拥有 $N$ 头奶牛，方便地用整数 ID $1 \\ldots N$ 标识，因此道路周围恰好有 $2N$ 个穿过点。Farmer John 通过顺时针扫描环形道路，记录每个穿过点的奶牛 ID，最终形成一个包含 $2N$ 个数字的序列，其中每个数字恰好出现两次。他并未记录哪些穿过点是进入点，哪些是离开点。\n\n看着他的穿过点地图，Farmer John 好奇一天中不同奶牛对之间可能会交叉多少次。如果奶牛 $a$ 从进入点到离开点的路径必须与奶牛 $b$ 从进入点到离开点的路径交叉，那么他称奶牛对 $(a,b)$ 为“交叉”对。请帮助 Farmer John 计算交叉对的总数。", "inputFormat": "输入的第一行包含 $N$ ($1 \\leq N \\leq 50,000$)，接下来的 $2N$ 行描述了田地周围进入和离开点的奶牛 ID 序列。", "outputFormat": "请输出交叉对的总数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3661", "type": "P", "difficulty": 3, "samples": [["5 4\n7\n8\n6\n2\n9\n2 5\n4 9\n0 3\n8 13", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2017", "USACO", "排序", "优先队列"], "title": "[USACO17FEB] Why Did the Cow Cross the Road I S", "background": "", "description": "Farmer John's cows are trying to learn to cross the road effectively. Remembering the old \"why did the chicken cross the road?\" joke, they figure the chickens must be experts on crossing the road, and go off in search of chickens to help them.\n\nAs it turns out, chickens are very busy creatures and have limited time to help the cows. There are $C$ chickens on the farm ($1 \\leq C \\leq 20,000$), conveniently numbered $1 \\ldots C$, and each chicken $i$ is only willing to help a cow at precisely time $T_i$. The cows, never in a hurry, have more flexibility in their schedules. There are $N$ cows on the farm ($1 \\leq N \\leq 20,000$), conveniently numbered $1 \\ldots N$, where cow $j$ is able to cross the road between time $A_j$ and time $B_j$. Figuring the \"buddy system\" is the best way to proceed, each cow $j$ would ideally like to find a chicken $i$ to help her cross the road; in order for their schedules to be compatible, $i$ and $j$ must satisfy $A_j \\leq T_i \\leq B_j$.\n\nIf each cow can be paired with at most one chicken and each chicken with at most one cow, please help compute the maximum number of cow-chicken pairs that can be constructed.", "inputFormat": "The first line of input contains $C$ and $N$. The next $C$ lines contain $T_1 \\ldots T_C$, and the next $N$ lines contain $A_j$ and $B_j$ ($A_j \\leq B_j$) for $j = 1 \\ldots N$. The $A$'s, $B$'s, and $T$'s are all non-negative integers (not necessarily distinct) of size at most 1,000,000,000", "outputFormat": "Please compute the maximum possible number of cow-chicken pairs.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO17FEB] Why Did the Cow Cross the Road I S", "background": "", "description": "Farmer John's cows are trying to learn to cross the road effectively. Remembering the old \"why did the chicken cross the road?\" joke, they figure the chickens must be experts on crossing the road, and go off in search of chickens to help them.\n\nAs it turns out, chickens are very busy creatures and have limited time to help the cows. There are $C$ chickens on the farm ($1 \\leq C \\leq 20,000$), conveniently numbered $1 \\ldots C$, and each chicken $i$ is only willing to help a cow at precisely time $T_i$. The cows, never in a hurry, have more flexibility in their schedules. There are $N$ cows on the farm ($1 \\leq N \\leq 20,000$), conveniently numbered $1 \\ldots N$, where cow $j$ is able to cross the road between time $A_j$ and time $B_j$. Figuring the \"buddy system\" is the best way to proceed, each cow $j$ would ideally like to find a chicken $i$ to help her cross the road; in order for their schedules to be compatible, $i$ and $j$ must satisfy $A_j \\leq T_i \\leq B_j$.\n\nIf each cow can be paired with at most one chicken and each chicken with at most one cow, please help compute the maximum number of cow-chicken pairs that can be constructed.", "inputFormat": "The first line of input contains $C$ and $N$. The next $C$ lines contain $T_1 \\ldots T_C$, and the next $N$ lines contain $A_j$ and $B_j$ ($A_j \\leq B_j$) for $j = 1 \\ldots N$. The $A$'s, $B$'s, and $T$'s are all non-negative integers (not necessarily distinct) of size at most 1,000,000,000", "outputFormat": "Please compute the maximum possible number of cow-chicken pairs.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO17FEB] Why Did the Cow Cross the Road S", "background": null, "description": "Farmer John 的奶牛们正在学习如何有效地过马路。回想起古老的“鸡为什么要过马路？”笑话，他们认为鸡一定是过马路的专家，于是去寻找鸡来帮助它们。\n\n事实上，鸡是非常忙碌的生物，它们只有有限的时间来帮助奶牛。农场上有 $C$ 只鸡（$1 \\leq C \\leq 20,000$），方便地用编号 $1 \\ldots C$ 标识，每只鸡 $i$ 只愿意在确切的时间 $T_i$ 帮助一头奶牛。奶牛们从不着急，它们的日程安排更加灵活。农场上有 $N$ 头奶牛（$1 \\leq N \\leq 20,000$），方便地用编号 $1 \\ldots N$ 标识，其中奶牛 $j$ 能够在时间 $A_j$ 到时间 $B_j$ 之间过马路。考虑到“伙伴系统”是最好的方式，每头奶牛 $j$ 理想情况下希望找到一只鸡 $i$ 来帮助她过马路；为了使它们的日程安排兼容，$i$ 和 $j$ 必须满足 $A_j \\leq T_i \\leq B_j$。\n\n如果每头奶牛最多只能与一只鸡配对，每只鸡也最多只能与一头奶牛配对，请计算可以构建的最大奶牛-鸡配对数。", "inputFormat": "输入的第一行包含 $C$ 和 $N$。接下来的 $C$ 行包含 $T_1 \\ldots T_C$，接下来的 $N$ 行包含 $A_j$ 和 $B_j$（$A_j \\leq B_j$），其中 $j = 1 \\ldots N$。$A$、$B$ 和 $T$ 都是不超过 1,000,000,000 的非负整数（不一定互不相同）。", "outputFormat": "请计算可能的奶牛-鸡配对的最大数量。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P3662", "type": "P", "difficulty": 3, "samples": [["10 6 5\n2\n10\n1\n5\n9", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2017", "USACO", "枚举", "前缀和", "队列"], "title": "[USACO17FEB] Why Did the Cow Cross the Road II S", "background": "", "description": "The long road through Farmer John's farm has $N$ crosswalks across it, conveniently numbered $1 \\ldots N$ ($1 \\leq N \\leq 100,000$). To allow cows to cross at these crosswalks, FJ installs electric crossing signals, which light up with a green cow icon when it is ok for the cow to cross, and red otherwise. Unfortunately, a large electrical storm has damaged some of his signals. Given a list of the damaged signals, please compute the minimum number of signals that FJ needs to repair in order for there to exist some contiguous block of at least $K$ working signals.", "inputFormat": "The first line of input contains $N$, $K$, and $B$ ($1 \\leq B, K \\leq N$). The next $B$ lines each describe the ID number of a broken signal.", "outputFormat": "Please compute the minimum number of signals that need to be repaired in order for there to be a contiguous block of $K$ working signals somewhere along the road.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO17FEB] Why Did the Cow Cross the Road II S", "background": "", "description": "The long road through Farmer John's farm has $N$ crosswalks across it, conveniently numbered $1 \\ldots N$ ($1 \\leq N \\leq 100,000$). To allow cows to cross at these crosswalks, FJ installs electric crossing signals, which light up with a green cow icon when it is ok for the cow to cross, and red otherwise. Unfortunately, a large electrical storm has damaged some of his signals. Given a list of the damaged signals, please compute the minimum number of signals that FJ needs to repair in order for there to exist some contiguous block of at least $K$ working signals.", "inputFormat": "The first line of input contains $N$, $K$, and $B$ ($1 \\leq B, K \\leq N$). The next $B$ lines each describe the ID number of a broken signal.", "outputFormat": "Please compute the minimum number of signals that need to be repaired in order for there to be a contiguous block of $K$ working signals somewhere along the road.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO17FEB] Why Did the Cow Cross the Road II S", "background": "", "description": "穿过 Farmer John 农场的长路上有 $N$ 个人行横道，方便地用编号 $1 \\ldots N$ 标识（$1 \\leq N \\leq 100,000$）。为了让奶牛能够通过这些横道过马路，FJ 安装了电子过马路信号灯，当奶牛可以安全过马路时，信号灯会显示绿色的奶牛图标，否则显示红色。不幸的是，一场大雷暴损坏了他的一些信号灯。给定损坏信号灯的列表，请计算 FJ 需要修复的最少信号灯数量，以便存在至少 $K$ 个连续的信号灯正常工作。", "inputFormat": "输入的第一行包含 $N$、$K$ 和 $B$（$1 \\leq B, K \\leq N$）。接下来的 $B$ 行每行描述一个损坏信号灯的 ID 编号。", "outputFormat": "请计算需要修复的最少信号灯数量，以便在道路上某处存在一个长度为 $K$ 的连续正常工作信号灯块。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3663", "type": "P", "difficulty": 4, "samples": [["3 3 3\n2 2 2 3\n3 3 3 2\n3 3 2 3\n3 3\n2 2\n2 3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2017", "USACO", "广度优先搜索 BFS", "深度优先搜索 DFS", "连通块"], "title": "[USACO17FEB] Why Did the Cow Cross the Road III S", "background": "", "description": "Why did the cow cross the road? Well, one reason is that Farmer John's farm simply has a lot of roads, making it impossible for his cows to travel around without crossing many of them.\n\nFJ's farm is arranged as an $N \\times N$ square grid of fields ($2 \\leq N \\leq 100$), Certain pairs of adjacent fields (e.g., north-south or east-west) are separated by roads, and a tall fence runs around the external perimeter of the entire grid, preventing cows from leaving the farm. Cows can move freely from any field to any other adjacent field (north, east, south, or west), although they prefer not to cross roads unless absolutely necessary.\n\nThere are $K$ cows ($1 \\leq K \\leq 100, K \\leq N^2$) on FJ's farm, each located in a different field. A pair of cows is said to be \"distant\" if, in order for one cow to visit the other, it is necessary to cross at least one road. Please help FJ count the number of distant pairs of cows.", "inputFormat": "The first line of input contains $N$, $K$, and $R$. The next $R$ lines describe $R$ roads that exist between pairs of adjacent fields. Each line is of the form $r$ $c$ $r'$ $c'$ (integers in the range $1 \\ldots N$), indicating a road between the field in (row $r$, column $c$) and the adjacent field in (row $r'$, column $c'$). The final $K$ lines indicate the locations of the $K$ cows, each specified in terms of a row and column.", "outputFormat": "Print the number of pairs of cows that are distant.", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO17FEB] Why Did the Cow Cross the Road III S", "background": "", "description": "Why did the cow cross the road? Well, one reason is that Farmer John's farm simply has a lot of roads, making it impossible for his cows to travel around without crossing many of them.\n\nFJ's farm is arranged as an $N \\times N$ square grid of fields ($2 \\leq N \\leq 100$), Certain pairs of adjacent fields (e.g., north-south or east-west) are separated by roads, and a tall fence runs around the external perimeter of the entire grid, preventing cows from leaving the farm. Cows can move freely from any field to any other adjacent field (north, east, south, or west), although they prefer not to cross roads unless absolutely necessary.\n\nThere are $K$ cows ($1 \\leq K \\leq 100, K \\leq N^2$) on FJ's farm, each located in a different field. A pair of cows is said to be \"distant\" if, in order for one cow to visit the other, it is necessary to cross at least one road. Please help FJ count the number of distant pairs of cows.", "inputFormat": "The first line of input contains $N$, $K$, and $R$. The next $R$ lines describe $R$ roads that exist between pairs of adjacent fields. Each line is of the form $r$ $c$ $r'$ $c'$ (integers in the range $1 \\ldots N$), indicating a road between the field in (row $r$, column $c$) and the adjacent field in (row $r'$, column $c'$). The final $K$ lines indicate the locations of the $K$ cows, each specified in terms of a row and column.", "outputFormat": "Print the number of pairs of cows that are distant.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO17FEB] Why Did the Cow Cross the Road III S", "background": "", "description": "奶牛为什么要过马路？其中一个原因是 Farmer John 的农场有很多道路，使得他的奶牛在四处走动时不可避免地要穿过许多道路。\n\nFJ 的农场被安排成一个 $N \\times N$ 的方形网格田地（$2 \\leq N \\leq 100$），某些相邻的田地（例如南北向或东西向）被道路分隔，整个网格的外部有一圈高高的围栏，防止奶牛离开农场。奶牛可以从任何田地自由移动到相邻的田地（北、东、南或西），尽管它们除非绝对必要，否则不愿意穿过道路。\n\n农场上有 $K$ 头奶牛（$1 \\leq K \\leq 100, K \\leq N^2$），每头奶牛位于不同的田地。如果一头奶牛要拜访另一头奶牛时必须至少穿过一条道路，那么这对奶牛被称为“远距离”对。请帮助 FJ 计算远距离奶牛对的数量。", "inputFormat": "输入的第一行包含 $N$、$K$ 和 $R$。接下来的 $R$ 行描述了 $R$ 条存在于相邻田地之间的道路。每行的格式为 $r$ $c$ $r'$ $c'$（范围为 $1 \\ldots N$ 的整数），表示位于（行 $r$，列 $c$）的田地与相邻的（行 $r'$，列 $c'$）的田地之间有一条道路。最后的 $K$ 行表示 $K$ 头奶牛的位置，每行用行和列指定。", "outputFormat": "输出远距离奶牛对的数量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3664", "type": "P", "difficulty": 5, "samples": [["4\n2 2 3 0\n2 7 3 7\n2 7 7 7\n0 0 0 0", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2017", "USACO", "前缀和", "差分"], "title": "[USACO17OPEN] Modern Art P", "background": "", "description": "Art critics worldwide have only recently begun to recognize the creative genius behind the great bovine painter, Picowso.\n\n\nPicowso paints in a very particular way. She starts with an $N \\times N$ blank canvas, represented by an $N \\times N$ grid of zeros, where a zero indicates an empty cell of the canvas. She then draws $N^2$ rectangles on the canvas, one in each of $N^2$ colors (conveniently numbered $1 \\ldots N^2$). For example, she might start by painting a rectangle in color 2, giving this intermediate canvas:\n\n\n```\n2 2 2 0\n\n2 2 2 0\n\n2 2 2 0\n\n0 0 0 0\n```\n\n\n\n\nShe might then paint a rectangle in color 7:\n\n```\n2 2 2 0\n\n2 7 7 7\n\n2 7 7 7\n\n0 0 0 0\n```\n\n\n\n\nAnd then she might paint a small rectangle in color 3:\n\n```\n2 2 3 0\n\n2 7 3 7\n\n2 7 7 7\n\n0 0 0 0\n```\n\n\nEach rectangle has sides parallel to the edges of the canvas, and a rectangle could be as large as the entire canvas or as small as a single cell. Each color from $1 \\ldots N^2$ is used exactly once, although later colors might completely cover up some of the earlier colors.\n\n\nGiven the final state of the canvas, please count how many of the $N^2$ colors could have possibly been the first to be painted.", "inputFormat": "The first line of input contains $N$, the size of the canvas ($1 \\leq N \\leq 1000$).\n\nThe next $N$ lines describe the final picture of the canvas, each containing $N$ integers that are in the range $0 \\ldots N^2$. The input is guaranteed to have been drawn as described above, by painting successive rectangles in different colors.\n", "outputFormat": "Please output a count of the number of colors that could have been drawn first.\n", "hint": "In this example, color 2 could have been the first to be painted. Color 3 clearly had to have been painted after color 7, and color 7 clearly had to have been painted after color 2. Since we don't see the other colors, we deduce that they also could have been painted first.", "locale": "en", "translations": {"en": {"title": "[USACO17OPEN] Modern Art P", "background": "", "description": "Art critics worldwide have only recently begun to recognize the creative genius behind the great bovine painter, Picowso.\n\n\nPicowso paints in a very particular way. She starts with an $N \\times N$ blank canvas, represented by an $N \\times N$ grid of zeros, where a zero indicates an empty cell of the canvas. She then draws $N^2$ rectangles on the canvas, one in each of $N^2$ colors (conveniently numbered $1 \\ldots N^2$). For example, she might start by painting a rectangle in color 2, giving this intermediate canvas:\n\n\n```\n2 2 2 0\n\n2 2 2 0\n\n2 2 2 0\n\n0 0 0 0\n```\n\n\n\n\nShe might then paint a rectangle in color 7:\n\n```\n2 2 2 0\n\n2 7 7 7\n\n2 7 7 7\n\n0 0 0 0\n```\n\n\n\n\nAnd then she might paint a small rectangle in color 3:\n\n```\n2 2 3 0\n\n2 7 3 7\n\n2 7 7 7\n\n0 0 0 0\n```\n\n\nEach rectangle has sides parallel to the edges of the canvas, and a rectangle could be as large as the entire canvas or as small as a single cell. Each color from $1 \\ldots N^2$ is used exactly once, although later colors might completely cover up some of the earlier colors.\n\n\nGiven the final state of the canvas, please count how many of the $N^2$ colors could have possibly been the first to be painted.", "inputFormat": "The first line of input contains $N$, the size of the canvas ($1 \\leq N \\leq 1000$).\n\nThe next $N$ lines describe the final picture of the canvas, each containing $N$ integers that are in the range $0 \\ldots N^2$. The input is guaranteed to have been drawn as described above, by painting successive rectangles in different colors.\n", "outputFormat": "Please output a count of the number of colors that could have been drawn first.\n", "hint": "In this example, color 2 could have been the first to be painted. Color 3 clearly had to have been painted after color 7, and color 7 clearly had to have been painted after color 2. Since we don't see the other colors, we deduce that they also could have been painted first.", "locale": "en"}, "zh-CN": {"title": "[USACO17OPEN] Modern Art P", "background": "", "description": "世界各地的艺术评论家最近才开始认识到伟大的奶牛画家 Picowso 的创作天才。\n\nPicowso 以一种非常独特的方式作画。她从一个 $N \\times N$ 的空白画布开始，画布用一个 $N \\times N$ 的零网格表示，其中零表示画布的一个空单元格。然后她在画布上绘制 $N^2$ 个矩形，每个矩形使用 $N^2$ 种颜色中的一种（方便地用编号 $1 \\ldots N^2$ 标识）。例如，她可能首先用颜色 2 绘制一个矩形，得到以下中间画布：\n\n```\n2 2 2 0\n\n2 2 2 0\n\n2 2 2 0\n\n0 0 0 0\n```\n\n然后她可能用颜色 7 绘制一个矩形：\n\n```\n2 2 2 0\n\n2 7 7 7\n\n2 7 7 7\n\n0 0 0 0\n```\n\n接着她可能用颜色 3 绘制一个小矩形：\n\n```\n2 2 3 0\n\n2 7 3 7\n\n2 7 7 7\n\n0 0 0 0\n```\n\n每个矩形的边都与画布的边缘平行，矩形可以大到整个画布，也可以小到一个单元格。每种颜色从 $1 \\ldots N^2$ 恰好使用一次，尽管后来的颜色可能会完全覆盖一些先前的颜色。\n\n给定画布的最终状态，请计算有多少种颜色可能是第一个被绘制的。", "inputFormat": "输入的第一行包含 $N$，表示画布的大小（$1 \\leq N \\leq 1000$）。\n\n接下来的 $N$ 行描述画布的最终状态，每行包含 $N$ 个整数，范围在 $0 \\ldots N^2$。输入保证是按照上述方式通过连续绘制不同颜色的矩形生成的。", "outputFormat": "请输出可能是第一个被绘制的颜色的数量。", "hint": "在这个例子中，颜色 2 可能是第一个被绘制的。颜色 3 显然必须在颜色 7 之后绘制，而颜色 7 显然必须在颜色 2 之后绘制。由于我们没有看到其他颜色，我们推断它们也可能是第一个被绘制的。", "locale": "zh-CN"}}}
{"pid": "P3665", "type": "P", "difficulty": 6, "samples": [["3 2 3 4\n1 2 3\n2 3 1\n1 1 2\n3 3\n2 3\n1 2\n2 2", "1\n3\n3\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2017", "线段树", "USACO", "Kruskal 重构树", "生成树"], "title": "[USACO17OPEN] Switch Grass P", "background": "", "description": "Farmer John has recently been experimenting with cultivating different types of grass on his farm, realizing that different types of cows like different types of grass. However, he must be careful to ensure that different types of grass are planted sufficiently far away from each-other, in order to prevent them from being inextricably mixed.\n\n\nFJ's farm consists of $N$ fields ($1 \\leq N \\leq 200,000$), where $M$ pairs of  fields are connected by bi-directional pathways ($1 \\leq M \\leq 200,000$).  Using these pathways, it is possible to walk from any field to any other field. Each pathway has an integer length in the range $1 \\ldots 1,000,000$. Any pair of fields will be linked by at most one direct pathway.\n\n\nIn each field, FJ initially plants one of $K$ types of grass ($1 \\leq K \\leq N$). Over time, however, he might decide to switch the grass in some field to a different type. He calls this an \"update\"  peration. He might perform several updates over the course of time, which are all cumulative in nature.\n\n\nAfter each update, FJ would like to know the length of the shortest path between two fields having different grass types. That is, among all pairs of fields having different grass types, he wants to know which two are closest. Ideally,\n\nthis number is large, so he can prevent grass of one type from mixing with grass of another type. It is guaranteed that the farm will always have at least two fields with different grass types.\n\n\nIn 30 percent of the input cases, each field will be directly connected to at most 10 pathways.\n\n\n", "inputFormat": "The first line of input contains four integers, $N$, $M$, $K$, and $Q$, where $Q$ is the number of updates ($1 \\leq Q \\leq 200,000$).\n\nThe next $M$ lines describe the paths; each one contains three integers $A$, $B$, and $L$, indicating a path from field $A$ to field $B$ (both integers in the range $1 \\ldots N$) of length $L$.\n\nThe next line indicates the initial type of grass growing in each field ($N$ integers in the range $1 \\ldots K$).\n\nFinally, the last $Q$ lines each describe an update, specified by two integers $A$ and $B$, where the grass in field $A$ is to be updated to type $B$.\n", "outputFormat": "For each update, print the length of the shortest path between two fields with different types of grass, after the update is applied.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO17OPEN] Switch Grass P", "background": "", "description": "Farmer John has recently been experimenting with cultivating different types of grass on his farm, realizing that different types of cows like different types of grass. However, he must be careful to ensure that different types of grass are planted sufficiently far away from each-other, in order to prevent them from being inextricably mixed.\n\n\nFJ's farm consists of $N$ fields ($1 \\leq N \\leq 200,000$), where $M$ pairs of  fields are connected by bi-directional pathways ($1 \\leq M \\leq 200,000$).  Using these pathways, it is possible to walk from any field to any other field. Each pathway has an integer length in the range $1 \\ldots 1,000,000$. Any pair of fields will be linked by at most one direct pathway.\n\n\nIn each field, FJ initially plants one of $K$ types of grass ($1 \\leq K \\leq N$). Over time, however, he might decide to switch the grass in some field to a different type. He calls this an \"update\"  peration. He might perform several updates over the course of time, which are all cumulative in nature.\n\n\nAfter each update, FJ would like to know the length of the shortest path between two fields having different grass types. That is, among all pairs of fields having different grass types, he wants to know which two are closest. Ideally,\n\nthis number is large, so he can prevent grass of one type from mixing with grass of another type. It is guaranteed that the farm will always have at least two fields with different grass types.\n\n\nIn 30 percent of the input cases, each field will be directly connected to at most 10 pathways.\n\n\n", "inputFormat": "The first line of input contains four integers, $N$, $M$, $K$, and $Q$, where $Q$ is the number of updates ($1 \\leq Q \\leq 200,000$).\n\nThe next $M$ lines describe the paths; each one contains three integers $A$, $B$, and $L$, indicating a path from field $A$ to field $B$ (both integers in the range $1 \\ldots N$) of length $L$.\n\nThe next line indicates the initial type of grass growing in each field ($N$ integers in the range $1 \\ldots K$).\n\nFinally, the last $Q$ lines each describe an update, specified by two integers $A$ and $B$, where the grass in field $A$ is to be updated to type $B$.\n", "outputFormat": "For each update, print the length of the shortest path between two fields with different types of grass, after the update is applied.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO17OPEN] Switch Grass P", "background": "", "description": "Farmer John 最近在他的农场尝试种植不同类型的草，发现不同类型的奶牛喜欢不同类型的草。然而，他必须小心确保不同类型的草种植得足够远，以防止它们不可分割地混合在一起。\n\nFJ 的农场由 $N$ 块田地组成（$1 \\leq N \\leq 200,000$），其中 $M$ 对田地通过双向路径连接（$1 \\leq M \\leq 200,000$）。使用这些路径，可以从任何田地走到任何其他田地。每条路径的长度是一个在 $1 \\ldots 1,000,000$ 范围内的整数。任何一对田地之间最多只有一条直接路径。\n\n在每块田地中，FJ 最初种植了 $K$ 种草中的一种（$1 \\leq K \\leq N$）。然而，随着时间的推移，他可能会决定将某块田地的草更换为另一种类型。他称这种操作为“更新”操作。他可能会在一段时间内执行多次更新，这些更新都是累积性质的。\n\n每次更新后，FJ 想知道种植不同草类型的两块田地之间的最短路径长度。也就是说，在所有种植不同草类型的田地对中，他希望知道哪两块田地最接近。理想情况下，这个数字应该较大，以便他可以防止一种类型的草与另一种类型的草混合。保证农场中始终至少有两块田地种植不同的草类型。\n\n在 30% 的输入案例中，每块田地最多直接连接 10 条路径。", "inputFormat": "输入的第一行包含四个整数 $N$、$M$、$K$ 和 $Q$，其中 $Q$ 是更新的次数（$1 \\leq Q \\leq 200,000$）。\n\n接下来的 $M$ 行描述路径；每行包含三个整数 $A$、$B$ 和 $L$，表示从田地 $A$ 到田地 $B$（两者都是 $1 \\ldots N$ 范围内的整数）的长度为 $L$ 的路径。\n\n接下来的一行表示每块田地最初种植的草类型（$N$ 个 $1 \\ldots K$ 范围内的整数）。\n\n最后，最后的 $Q$ 行每行描述一个更新，由两个整数 $A$ 和 $B$ 指定，表示将田地 $A$ 的草更新为类型 $B$。", "outputFormat": "对于每次更新，输出更新后种植不同草类型的两块田地之间的最短路径长度。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3666", "type": "P", "difficulty": 6, "samples": [["x = 1\n10 MOO {\nx = ( x ) + ( x )\n}\nRETURN x", "1024"], ["n = 1\nnsq = 1\n100000 MOO {\n100000 MOO {\nnsq = ( nsq ) + ( ( n ) + ( ( n ) + ( 1 ) ) )\nn = ( n ) + ( 1 )\n}\n}\nRETURN nsq", "4761"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2017", "USACO", "矩阵乘法", "栈", "构造"], "title": "[USACO17OPEN] COWBASIC P", "background": "", "description": "Bessie has invented a new programming language, but since there is no compiler yet, she needs your help to actually run her programs.\n\n\nCOWBASIC is a simple, elegant language. It has two key features: addition and MOO loops. Bessie has devised a clever solution to overflow: all addition is done modulo $10^9+7$. But Bessie's real achievement is the MOO loop, which runs a block of code a fixed number of times. MOO loops and addition can, of course, be nested.\n\n\nGiven a COWBASIC program, please help Bessie determine what number it returns.\n", "inputFormat": "You are given a COWBASIC program at most 100 lines long, with each line being at most 350 characters long. A COWBASIC program is a list of statements.\n\nThere are three types of statements:\n\n```cpp\n<variable> = <expression>\n\n<literal> MOO {\n<list of statements>\n}\n\nRETURN <variable>\n```\n\nThere are three types of expressions:\n\n```cpp\n<literal>\n\n<variable>\n\n( <expression> ) + ( <expression> )\n```\n\nA literal is a positive integer at most 100,000.\n\nA variable is a string of at most 10 lowercase English letters.\n\nIt is guaranteed that no variable will be used or RETURNed before it is defined. It is guaranteed that RETURN will happen exactly once, on the last line of the program.", "outputFormat": "Output a single positive integer, giving the value of the RETURNed variable.\n", "hint": "Scoring\n\nIn 20 percent of all test cases - MOO loops are not nested.\n\nIn another 20 percent of all test cases - The program only has 1 variable. MOO loops can be nested.\n\nIn the remaining test cases, there are no further restrictions.", "locale": "en", "translations": {"en": {"title": "[USACO17OPEN] COWBASIC P", "background": "", "description": "Bessie has invented a new programming language, but since there is no compiler yet, she needs your help to actually run her programs.\n\n\nCOWBASIC is a simple, elegant language. It has two key features: addition and MOO loops. Bessie has devised a clever solution to overflow: all addition is done modulo $10^9+7$. But Bessie's real achievement is the MOO loop, which runs a block of code a fixed number of times. MOO loops and addition can, of course, be nested.\n\n\nGiven a COWBASIC program, please help Bessie determine what number it returns.\n", "inputFormat": "You are given a COWBASIC program at most 100 lines long, with each line being at most 350 characters long. A COWBASIC program is a list of statements.\n\nThere are three types of statements:\n\n```cpp\n<variable> = <expression>\n\n<literal> MOO {\n<list of statements>\n}\n\nRETURN <variable>\n```\n\nThere are three types of expressions:\n\n```cpp\n<literal>\n\n<variable>\n\n( <expression> ) + ( <expression> )\n```\n\nA literal is a positive integer at most 100,000.\n\nA variable is a string of at most 10 lowercase English letters.\n\nIt is guaranteed that no variable will be used or RETURNed before it is defined. It is guaranteed that RETURN will happen exactly once, on the last line of the program.", "outputFormat": "Output a single positive integer, giving the value of the RETURNed variable.\n", "hint": "Scoring\n\nIn 20 percent of all test cases - MOO loops are not nested.\n\nIn another 20 percent of all test cases - The program only has 1 variable. MOO loops can be nested.\n\nIn the remaining test cases, there are no further restrictions.", "locale": "en"}, "zh-CN": {"title": "[USACO17OPEN] COWBASIC P", "background": "", "description": "Bessie 发明了一种新的编程语言，但由于还没有编译器，她需要你的帮助来实际运行她的程序。\n\nCOWBASIC 是一种简单而优雅的语言。它有两个关键特性：加法和 MOO 循环。Bessie 设计了一个巧妙的解决方案来处理溢出：所有的加法都是在模 $10^9+7$ 下进行的。但 Bessie 的真正成就是 MOO 循环，它可以固定次数地运行一段代码。当然，MOO 循环和加法可以嵌套。\n\n给定一个 COWBASIC 程序，请帮助 Bessie 确定它返回的数字。", "inputFormat": "你将获得一个最多 100 行的 COWBASIC 程序，每行最多 350 个字符。一个 COWBASIC 程序是一个语句列表。\n\n有三种类型的语句：\n\n```cpp\n<variable> = <expression>\n\n<literal> MOO {\n<list of statements>\n}\n\nRETURN <variable>\n```\n\n有三种类型的表达式：\n\n```cpp\n<literal>\n\n<variable>\n\n( <expression> ) + ( <expression> )\n```\n\n字面量是一个最多为 100,000 的正整数。\n\n变量是一个最多由 10 个小写英文字母组成的字符串。\n\n保证在定义之前不会使用或 RETURN 任何变量。保证 RETURN 恰好发生一次，并且在程序的最后一行。", "outputFormat": "输出一个正整数，表示 RETURN 的变量的值。", "hint": "评分\n\n在 20% 的测试用例中，MOO 循环不会嵌套。\n\n在另外 20% 的测试用例中，程序只有一个变量。MOO 循环可以嵌套。\n\n在剩余的测试用例中，没有进一步的限制。", "locale": "zh-CN"}}}
{"pid": "P3667", "type": "P", "difficulty": 5, "samples": [["3 8\nAATCCCAT\nACTTGCAA\nGGTCGCAA\nACTCCCAG\nACTCGCAT\nACTTCCAT", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2017", "二分", "USACO", "哈希 hashing"], "title": "[USACO17OPEN] Bovine Genomics G", "background": "", "description": "Farmer John owns $N$ cows with spots and $N$ cows without spots. Having just completed a course in bovine genetics, he is convinced that the spots on his cows are caused by mutations in the bovine genome.\n\n\nAt great expense, Farmer John sequences the genomes of his cows. Each genome is a string of length $M$ built from the four characters A, C, G, and T. When he lines up the genomes of his cows, he gets a table like the following, shown here\n\nfor $N=3$ and $M=8$:\n\n\n```cpp\nPositions: 1 2 3 4 5 6 7 8\n\nSpotty Cow 1: A A T C C C A T\nSpotty Cow 2: A C T T G C A A\nSpotty Cow 3: G G T C G C A A\n\nPlain Cow 1: A C T C C C A G\nPlain Cow 2: A C T C G C A T\nPlain Cow 3: A C T T C C A T\n```\n\nLooking carefully at this table, he surmises that the sequence from position 2 through position 5 is sufficient to explain spottiness. That is, by looking at the characters in just these these positions (that is, positions $2 \\ldots 5$), Farmer John can predict which of his cows are spotty and which are not. For example, if he sees the characters GTCG in these locations, he knows the cow must be spotty.\n\n\nPlease help FJ find the length of the shortest sequence of positions that can explain spottiness.\n\n", "inputFormat": "The first line of input contains $N$ ($1 \\leq N \\leq 500$) and $M$ ($3 \\leq M \\leq 500$). The next $N$ lines each contain a string of $M$ characters; these describe the genomes of the spotty cows.\n\nThe final $N$ lines describe the genomes of the plain cows. No spotty cow has the same exact  genome as a plain cow.\n", "outputFormat": "Please print the length of the shortest sequence of positions that is sufficient to explain spottiness. A sequence of positions explains spottiness if the spottiness trait can be predicted with perfect accuracy among Farmer John's population of cows by looking at just those locations in the genome.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO17OPEN] Bovine Genomics G", "background": "", "description": "Farmer John owns $N$ cows with spots and $N$ cows without spots. Having just completed a course in bovine genetics, he is convinced that the spots on his cows are caused by mutations in the bovine genome.\n\n\nAt great expense, Farmer John sequences the genomes of his cows. Each genome is a string of length $M$ built from the four characters A, C, G, and T. When he lines up the genomes of his cows, he gets a table like the following, shown here\n\nfor $N=3$ and $M=8$:\n\n\n```cpp\nPositions: 1 2 3 4 5 6 7 8\n\nSpotty Cow 1: A A T C C C A T\nSpotty Cow 2: A C T T G C A A\nSpotty Cow 3: G G T C G C A A\n\nPlain Cow 1: A C T C C C A G\nPlain Cow 2: A C T C G C A T\nPlain Cow 3: A C T T C C A T\n```\n\nLooking carefully at this table, he surmises that the sequence from position 2 through position 5 is sufficient to explain spottiness. That is, by looking at the characters in just these these positions (that is, positions $2 \\ldots 5$), Farmer John can predict which of his cows are spotty and which are not. For example, if he sees the characters GTCG in these locations, he knows the cow must be spotty.\n\n\nPlease help FJ find the length of the shortest sequence of positions that can explain spottiness.\n\n", "inputFormat": "The first line of input contains $N$ ($1 \\leq N \\leq 500$) and $M$ ($3 \\leq M \\leq 500$). The next $N$ lines each contain a string of $M$ characters; these describe the genomes of the spotty cows.\n\nThe final $N$ lines describe the genomes of the plain cows. No spotty cow has the same exact  genome as a plain cow.\n", "outputFormat": "Please print the length of the shortest sequence of positions that is sufficient to explain spottiness. A sequence of positions explains spottiness if the spottiness trait can be predicted with perfect accuracy among Farmer John's population of cows by looking at just those locations in the genome.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO17OPEN] Bovine Genomics G", "background": "", "description": "Farmer John 拥有 $N$ 头有斑点的牛和 $N$ 头没有斑点的牛。他刚刚完成了一门关于牛遗传学的课程，并确信他牛身上的斑点是由牛基因组中的突变引起的。\n\nFarmer John 花费巨资对他的牛进行了基因组测序。每个基因组是一个由字符 A、C、G 和 T 组成的长度为 $M$ 的字符串。当他将牛的基因组排列起来时，会得到如下表格，这里展示的是 $N=3$ 和 $M=8$ 的情况：\n\n```\n位置：   1 2 3 4 5 6 7 8\n\n斑点牛 1：A A T C C C A T  \n斑点牛 2：A C T T G C A A  \n斑点牛 3：G G T C G C A A  \n\n普通牛 1：A C T C C C A G  \n普通牛 2：A C T C G C A T  \n普通牛 3：A C T T C C A T  \n```\n\n仔细观察这个表格后，他推测从位置 2 到位置 5 的序列足以解释斑点现象。也就是说，通过仅查看这些位置（即位置 $2 \\ldots 5$）的字符，Farmer John 可以预测哪些牛是有斑点的，哪些是没有斑点的。例如，如果他在这些位置看到字符 GTCG，他就知道这头牛一定是有斑点的。\n\n请帮助 Farmer John 找到能够解释斑点现象的最短位置序列的长度。", "inputFormat": "输入的第一行包含 $N$（$1 \\leq N \\leq 500$）和 $M$（$3 \\leq M \\leq 500$）。接下来的 $N$ 行每行包含一个长度为 $M$ 的字符串，这些字符串描述了斑点牛的基因组。\n\n最后的 $N$ 行描述了普通牛的基因组。没有任何一头斑点牛的基因组与普通牛的完全相同。", "outputFormat": "请输出能够解释斑点现象的最短位置序列的长度。如果通过查看基因组中这些位置的字符，可以在 Farmer John 的牛群中完美准确地预测斑点性状，那么这个位置序列就解释了斑点现象。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3668", "type": "P", "difficulty": 4, "samples": [["7\n0\n1\n4\n5\n1\n3\n3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2017", "USACO", "栈"], "title": "[USACO17OPEN] Modern Art 2 G", "background": "", "description": "Having become bored with standard 2-dimensional artwork (and also frustrated at others copying her work), the great bovine artist Picowso has decided to switch to a more minimalist, 1-dimensional style.\n\n\nAlthough, her paintings can now be described by a 1-dimensional array of colors of length $N$ ($1 \\leq N \\leq 100,000$), her painting style remains unchanged: she starts with a blank canvas and layers upon it a sequence of \"rectangles\" of paint, which in this 1-dimensional case are simply intervals. She uses each of the colors $1 \\ldots N$ exactly once, although just as before, some colors might end up being completely covered up by the end.\n\n\nTo Picowso's great dismay, her competitor Moonet seems to have figured out how to copy even these 1-dimensional paintings, using a similar strategy to the preceding problem: Moonet will paint a set of disjoint intervals, wait for them to dry, then paint another set of disjoint intervals, and so on. Moonet can only paint at most one interval of each color over the entire process. Please compute\n\nthe number of such rounds needed for Moonet to copy a given 1-dimensional Picowso painting.", "inputFormat": "The first line of input contains $N$, and the next $N$ lines contain an integer in the range $0 \\ldots N$ indicating the color of each cell in the 1-dimensional painting (0 for a blank cell).", "outputFormat": "Please output the minimum number of rounds needed to copy this painting, or -1 if this could not have possibly been an authentic work of Picowso (i.e., if she could not have painted it using a layered sequence of intervals, one of each color).\n", "hint": "In this example, the interval of color 1 must be painted in an earlier round than the intervals of colors 4 and 5, so at least two rounds are needed.", "locale": "en", "translations": {"en": {"title": "[USACO17OPEN] Modern Art 2 G", "background": "", "description": "Having become bored with standard 2-dimensional artwork (and also frustrated at others copying her work), the great bovine artist Picowso has decided to switch to a more minimalist, 1-dimensional style.\n\n\nAlthough, her paintings can now be described by a 1-dimensional array of colors of length $N$ ($1 \\leq N \\leq 100,000$), her painting style remains unchanged: she starts with a blank canvas and layers upon it a sequence of \"rectangles\" of paint, which in this 1-dimensional case are simply intervals. She uses each of the colors $1 \\ldots N$ exactly once, although just as before, some colors might end up being completely covered up by the end.\n\n\nTo Picowso's great dismay, her competitor Moonet seems to have figured out how to copy even these 1-dimensional paintings, using a similar strategy to the preceding problem: Moonet will paint a set of disjoint intervals, wait for them to dry, then paint another set of disjoint intervals, and so on. Moonet can only paint at most one interval of each color over the entire process. Please compute\n\nthe number of such rounds needed for Moonet to copy a given 1-dimensional Picowso painting.", "inputFormat": "The first line of input contains $N$, and the next $N$ lines contain an integer in the range $0 \\ldots N$ indicating the color of each cell in the 1-dimensional painting (0 for a blank cell).", "outputFormat": "Please output the minimum number of rounds needed to copy this painting, or -1 if this could not have possibly been an authentic work of Picowso (i.e., if she could not have painted it using a layered sequence of intervals, one of each color).\n", "hint": "In this example, the interval of color 1 must be painted in an earlier round than the intervals of colors 4 and 5, so at least two rounds are needed.", "locale": "en"}, "zh-CN": {"title": "[USACO17OPEN] Modern Art 2 G", "background": "", "description": "伟大的牛艺术家 Picowso 对标准的二维艺术作品感到厌倦（同时也对其他人抄袭她的作品感到沮丧），于是决定转向一种更极简主义的一维风格。\n\n尽管她的画作现在可以用一个长度为 $N$（$1 \\leq N \\leq 100,000$）的一维颜色数组来描述，但她的绘画风格保持不变：她从一个空白画布开始，并在其上叠加一系列“矩形”颜料，而在这种一维情况下，这些矩形仅仅是区间。她使用每种颜色 $1 \\ldots N$ 恰好一次，尽管和以前一样，某些颜色最终可能会被完全覆盖。\n\n令 Picowso 非常沮丧的是，她的竞争对手 Moonet 似乎已经找到了如何复制这些一维画作的方法，使用的策略与之前的问题类似：Moonet 会绘制一组不相交的区间，等待它们干燥，然后再绘制另一组不相交的区间，依此类推。在整个过程中，Moonet 只能为每种颜色绘制最多一个区间。请计算 Moonet 复制给定的一维 Picowso 画作所需的最少轮数。", "inputFormat": "输入的第一行包含 $N$，接下来的 $N$ 行每行包含一个范围在 $0 \\ldots N$ 的整数，表示一维画作中每个单元格的颜色（0 表示空白单元格）。", "outputFormat": "请输出复制这幅画作所需的最少轮数，如果这幅画作不可能是 Picowso 的真实作品（即她无法通过叠加一系列区间、每种颜色一个区间的方式绘制它），则输出 -1。", "hint": "在这个例子中，颜色 1 的区间必须在颜色 4 和 5 的区间之前绘制，因此至少需要两轮。", "locale": "zh-CN"}}}
{"pid": "P3669", "type": "P", "difficulty": 2, "samples": [["3\n1 8\n2 5\n1 2", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2017", "USACO", "排序"], "title": "[USACO17OPEN] Paired Up S", "background": "", "description": "Farmer John finds that his cows are each easier to milk when they have another cow nearby for moral support. He therefore wants to take his $M$ cows ($M \\leq 1,000,000,000$, $M$ even) and partition them into $M/2$ pairs. Each pair of cows will then be ushered off to a separate stall in the barn for milking. The milking in each of these $M/2$ stalls will take place simultaneously.\n\n\nTo make matters a bit complicated, each of Farmer John's cows has a different milk output. If cows of milk outputs $A$ and $B$ are paired up, then it takes a total of $A+B$ units of time to milk them both.\n\n\nPlease help Farmer John determine the minimum possible amount of time the entire milking process will take to complete, assuming he pairs the cows up in the best possible way.", "inputFormat": "The first line of input contains $N$ ($1 \\leq N \\leq 100,000$).\n\nEach of the next $N$ lines contains two integers $x$ and $y$, indicating that FJ has $x$ cows each with milk output $y$ ($1 \\leq y \\leq 1,000,000,000$). The sum of the $x$'s is $M$, the total number of cows.", "outputFormat": "Print out the minimum amount of time it takes FJ's cows to be milked, assuming they are optimally paired up.", "hint": "Here, if the cows with outputs 8+2 are paired up, and those with outputs 5+5 are paired up, the both stalls take 10 units of time for milking. Since milking takes place simultaneously, the entire process would therefore complete after 10 units of time. Any other pairing would be sub-optimal, resulting in a stall taking more than 10 units of time to milk.", "locale": "en", "translations": {"en": {"title": "[USACO17OPEN] Paired Up S", "background": "", "description": "Farmer John finds that his cows are each easier to milk when they have another cow nearby for moral support. He therefore wants to take his $M$ cows ($M \\leq 1,000,000,000$, $M$ even) and partition them into $M/2$ pairs. Each pair of cows will then be ushered off to a separate stall in the barn for milking. The milking in each of these $M/2$ stalls will take place simultaneously.\n\n\nTo make matters a bit complicated, each of Farmer John's cows has a different milk output. If cows of milk outputs $A$ and $B$ are paired up, then it takes a total of $A+B$ units of time to milk them both.\n\n\nPlease help Farmer John determine the minimum possible amount of time the entire milking process will take to complete, assuming he pairs the cows up in the best possible way.", "inputFormat": "The first line of input contains $N$ ($1 \\leq N \\leq 100,000$).\n\nEach of the next $N$ lines contains two integers $x$ and $y$, indicating that FJ has $x$ cows each with milk output $y$ ($1 \\leq y \\leq 1,000,000,000$). The sum of the $x$'s is $M$, the total number of cows.", "outputFormat": "Print out the minimum amount of time it takes FJ's cows to be milked, assuming they are optimally paired up.", "hint": "Here, if the cows with outputs 8+2 are paired up, and those with outputs 5+5 are paired up, the both stalls take 10 units of time for milking. Since milking takes place simultaneously, the entire process would therefore complete after 10 units of time. Any other pairing would be sub-optimal, resulting in a stall taking more than 10 units of time to milk.", "locale": "en"}, "zh-CN": {"title": "[USACO17OPEN] Paired Up S", "background": "", "description": "Farmer John 发现，当他的奶牛附近有另一头奶牛提供精神支持时，每头奶牛挤奶会更容易。因此，他希望将他的 $M$ 头奶牛（$M \\leq 1,000,000,000$，$M$ 为偶数）分成 $M/2$ 对。每对奶牛将被引导到谷仓中一个单独的隔间进行挤奶。这些 $M/2$ 个隔间中的挤奶过程将同时进行。\n\n为了增加一些复杂性，Farmer John 的每头奶牛都有不同的产奶量。如果产奶量分别为 $A$ 和 $B$ 的两头奶牛被配对，那么挤完它们总共需要 $A+B$ 单位时间。\n\n请帮助 Farmer John 确定整个挤奶过程完成所需的最少时间，假设他以最佳方式配对奶牛。", "inputFormat": "输入的第一行包含 $N$（$1 \\leq N \\leq 100,000$）。\n\n接下来的 $N$ 行每行包含两个整数 $x$ 和 $y$，表示 Farmer John 有 $x$ 头产奶量为 $y$ 的奶牛（$1 \\leq y \\leq 1,000,000,000$）。所有 $x$ 的总和为 $M$，即奶牛的总数。", "outputFormat": "输出 Farmer John 的奶牛挤奶所需的最少时间，假设它们以最佳方式配对。", "hint": "在这里，如果产奶量为 8 和 2 的奶牛配对，产奶量为 5 和 5 的奶牛配对，那么两个隔间的挤奶时间均为 10 单位时间。由于挤奶是同时进行的，因此整个挤奶过程将在 10 单位时间后完成。任何其他配对方式都会导致某个隔间的挤奶时间超过 10 单位时间，因此不是最优的。", "locale": "zh-CN"}}}
{"pid": "P3670", "type": "P", "difficulty": 3, "samples": [["3 8\nAATCCCAT\nGATTGCAA\nGGTCGCAA\nACTCCCAG\nACTCGCAT\nACTTCCAT", "22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2017", "USACO", "离散化", "枚举"], "title": "[USACO17OPEN] Bovine Genomics S", "background": "", "description": "Farmer John owns $N$ cows with spots and $N$ cows without spots. Having just completed a course in bovine genetics, he is convinced that the spots on his cows are caused by mutations in the bovine genome.\n\n\nAt great expense, Farmer John sequences the genomes of his cows. Each genome is a string of length $M$ built from the four characters A, C, G, and T. When he lines up the genomes of his cows, he gets a table like the following, shown here\n\n\nfor $N=3$:\n\n\n```cpp\nPositions: 1 2 3 4 5 6 7 ... M\n\nSpotty Cow 1: A A T C C C A ... T\nSpotty Cow 2: G A T T G C A ... A\nSpotty Cow 3: G G T C G C A ... A\n\nPlain Cow 1: A C T C C C A ... G\nPlain Cow 2: A G T T G C A ... T\nPlain Cow 3: A G T T C C A ... T\n```\n\nLooking carefully at this table, he surmises that positions 2 and 4 are sufficient to explain spottiness. That is, by looking at the characters in just these two positions, Farmer John can predict which of his cows are spotty and which are not (for example, if he sees G and C, the cow must be spotty).\n\n\nFarmer John is convinced that spottiness can be explained not by just one or two positions in the genome, but by looking at a set of three distinct positions.  Please help him count the number of sets of three distinct positions that can each explain spottiness.", "inputFormat": "The first line of input contains $N$ ($1 \\leq N \\leq 500$) and $M$ ($3 \\leq M \\leq 50$). The next $N$ lines each contain a string of $M$ characters; these describe the genomes of the spotty cows. The final $N$ lines describe the genomes of the plain cows.\n", "outputFormat": "Please count the number of sets of three distinct positions that can explain spottiness. A set of three positions explains spottiness if the spottiness trait can be predicted with perfect accuracy among Farmer John's population of cows by looking at just those three locations in the genome.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO17OPEN] Bovine Genomics S", "background": "", "description": "Farmer John owns $N$ cows with spots and $N$ cows without spots. Having just completed a course in bovine genetics, he is convinced that the spots on his cows are caused by mutations in the bovine genome.\n\n\nAt great expense, Farmer John sequences the genomes of his cows. Each genome is a string of length $M$ built from the four characters A, C, G, and T. When he lines up the genomes of his cows, he gets a table like the following, shown here\n\n\nfor $N=3$:\n\n\n```cpp\nPositions: 1 2 3 4 5 6 7 ... M\n\nSpotty Cow 1: A A T C C C A ... T\nSpotty Cow 2: G A T T G C A ... A\nSpotty Cow 3: G G T C G C A ... A\n\nPlain Cow 1: A C T C C C A ... G\nPlain Cow 2: A G T T G C A ... T\nPlain Cow 3: A G T T C C A ... T\n```\n\nLooking carefully at this table, he surmises that positions 2 and 4 are sufficient to explain spottiness. That is, by looking at the characters in just these two positions, Farmer John can predict which of his cows are spotty and which are not (for example, if he sees G and C, the cow must be spotty).\n\n\nFarmer John is convinced that spottiness can be explained not by just one or two positions in the genome, but by looking at a set of three distinct positions.  Please help him count the number of sets of three distinct positions that can each explain spottiness.", "inputFormat": "The first line of input contains $N$ ($1 \\leq N \\leq 500$) and $M$ ($3 \\leq M \\leq 50$). The next $N$ lines each contain a string of $M$ characters; these describe the genomes of the spotty cows. The final $N$ lines describe the genomes of the plain cows.\n", "outputFormat": "Please count the number of sets of three distinct positions that can explain spottiness. A set of three positions explains spottiness if the spottiness trait can be predicted with perfect accuracy among Farmer John's population of cows by looking at just those three locations in the genome.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO17OPEN] Bovine Genomics S", "background": "", "description": "Farmer John 拥有 $N$ 头有斑点的牛和 $N$ 头没有斑点的牛。他刚刚完成了一门关于牛遗传学的课程，并确信他牛身上的斑点是由牛基因组中的突变引起的。\n\nFarmer John 花费巨资对他的牛进行了基因组测序。每个基因组是一个由字符 A、C、G 和 T 组成的长度为 $M$ 的字符串。当他将牛的基因组排列起来时，会得到如下表格，这里展示的是 $N=3$ 的情况：\n\n```\n位置：1 2 3 4 5 6 7 ... M\n\n斑点牛 1：A A T C C C A ... T  \n斑点牛 2：G A T T G C A ... A  \n斑点牛 3：G G T C G C A ... A  \n\n普通牛 1：A C T C C C A ... G  \n普通牛 2：A G T T G C A ... T  \n普通牛 3：A G T T C C A ... T \n```\n\n仔细观察这个表格后，他推测位置 2 和 4 足以解释斑点现象。也就是说，通过仅查看这两个位置的字符，Farmer John 可以预测哪些牛是有斑点的，哪些是没有斑点的（例如，如果他看到 G 和 C，这头牛一定是有斑点的）。\n\nFarmer John 确信，斑点现象不仅仅可以通过基因组中的一个或两个位置来解释，而是可以通过查看三个不同的位置来解释。请帮助他计算能够解释斑点现象的三个不同位置集合的数量。", "inputFormat": "输入的第一行包含 $N$（$1 \\leq N \\leq 500$）和 $M$（$3 \\leq M \\leq 50$）。接下来的 $N$ 行每行包含一个长度为 $M$ 的字符串，这些字符串描述了斑点牛的基因组。最后的 $N$ 行描述了普通牛的基因组。", "outputFormat": "请计算能够解释斑点现象的三个不同位置集合的数量。如果通过查看基因组中这三个位置的字符，可以在 Farmer John 的牛群中完美准确地预测斑点性状，那么这个三个位置的集合就解释了斑点现象。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3671", "type": "P", "difficulty": 4, "samples": [["4\nABBC\nBBBC\nAABB\nABBC", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2017", "USACO", "枚举", "连通块"], "title": "[USACO17OPEN] Where's Bessie? S", "background": "", "description": "Always known for being quite tech-savy, Farmer John is testing out his new automated drone-mounted cow locator camera, which supposedly can take a picture of his field and automatically figure out the location of cows. Unfortunately, the camera does not include a very good algorithm for finding cows, so FJ needs your help developing a better one.\n\n\nThe overhead image of his farm taken by the camera is described by an $N \\times N$ grid of characters, each in the range $A \\ldots Z$, representing one of 26 possible colors. Farmer John figures the best way to define a potential cow location (PCL) is as follows: A PCL is a rectangular sub-grid (possibly the entire image) with sides parallel to the image sides, not contained within any other PCL (so no smaller subset of a PCL is also a PCL).  Furthermore, a PCL must satisfy the following property: focusing on just the contents of the rectangle and ignoring the rest of the image, exactly two colors must be present, one forming a contiguous region and one forming two or more contiguous regions.\n\n\n\n```cpp\nAAAAA\nABABA\nAAABB\n```\n\n\n\nFor example, a rectangle with contents would constitute a PCL, since the A's form a single contiguous region and the B's form more than one contiguous region. The interpretation is a cow of color A with spots of color B. \n\nA region is \"contiguous\" if you can traverse the entire region by moving repeatedly from one cell in the region to another cell in the region taking steps up, down, left, or right. \n\nGiven the image returned by FJ's camera, please count the number of PCLs.\n", "inputFormat": "The first line of input contains $N$, the size of the grid ($1 \\leq N \\leq 20$).\n\nThe next $N$ lines describe the image, each consisting of $N$ characters.\n", "outputFormat": "Print a count of the number of PCLs in the image.\n", "hint": "In this example, the two PCLs are the rectangles with contents\n\n```cpp\nABB\nBBB\nAAB\nABB\n```\n\n\nand\n\n```\nBC\nBC\nBB\nBC\n```", "locale": "en", "translations": {"en": {"title": "[USACO17OPEN] Where's Bessie? S", "background": "", "description": "Always known for being quite tech-savy, Farmer John is testing out his new automated drone-mounted cow locator camera, which supposedly can take a picture of his field and automatically figure out the location of cows. Unfortunately, the camera does not include a very good algorithm for finding cows, so FJ needs your help developing a better one.\n\n\nThe overhead image of his farm taken by the camera is described by an $N \\times N$ grid of characters, each in the range $A \\ldots Z$, representing one of 26 possible colors. Farmer John figures the best way to define a potential cow location (PCL) is as follows: A PCL is a rectangular sub-grid (possibly the entire image) with sides parallel to the image sides, not contained within any other PCL (so no smaller subset of a PCL is also a PCL).  Furthermore, a PCL must satisfy the following property: focusing on just the contents of the rectangle and ignoring the rest of the image, exactly two colors must be present, one forming a contiguous region and one forming two or more contiguous regions.\n\n\n\n```cpp\nAAAAA\nABABA\nAAABB\n```\n\n\n\nFor example, a rectangle with contents would constitute a PCL, since the A's form a single contiguous region and the B's form more than one contiguous region. The interpretation is a cow of color A with spots of color B. \n\nA region is \"contiguous\" if you can traverse the entire region by moving repeatedly from one cell in the region to another cell in the region taking steps up, down, left, or right. \n\nGiven the image returned by FJ's camera, please count the number of PCLs.\n", "inputFormat": "The first line of input contains $N$, the size of the grid ($1 \\leq N \\leq 20$).\n\nThe next $N$ lines describe the image, each consisting of $N$ characters.\n", "outputFormat": "Print a count of the number of PCLs in the image.\n", "hint": "In this example, the two PCLs are the rectangles with contents\n\n```cpp\nABB\nBBB\nAAB\nABB\n```\n\n\nand\n\n```\nBC\nBC\nBB\nBC\n```", "locale": "en"}, "zh-CN": {"title": "[USACO17OPEN] Where's Bessie? S", "background": "", "description": "Farmer John 一直以精通技术而闻名，他正在测试他的新型无人机搭载的奶牛定位相机。这款相机据说可以拍摄他的田地并自动确定奶牛的位置。不幸的是，相机的算法并不擅长寻找奶牛，因此 Farmer John 需要你的帮助来开发一个更好的算法。\n\n相机拍摄的农场俯视图由一个 $N \\times N$ 的字符网格描述，每个字符在 $A \\ldots Z$ 范围内，代表 26 种可能的颜色之一。Farmer John 认为，定义潜在奶牛位置（PCL）的最佳方式如下：一个 PCL 是一个矩形子网格（可能是整个图像），其边与图像的边平行，并且不包含在任何其他 PCL 中（因此 PCL 的较小子集不能也是 PCL）。此外，PCL 必须满足以下属性：仅关注矩形内的内容并忽略图像的其余部分，必须恰好存在两种颜色，其中一种颜色形成一个连续区域，另一种颜色形成两个或更多连续区域。\n\n例如，一个矩形的内容如下：\n\n```\nAAAAA  \nABABA  \nAAABB  \n```\n\n这将构成一个 PCL，因为 A 形成一个连续区域，而 B 形成多个连续区域。解释为一只颜色为 A 的奶牛带有颜色为 B 的斑点。\n\n一个区域是“连续的”，如果可以通过向上、向下、向左或向右移动，从一个区域中的单元格反复移动到另一个区域中的单元格来遍历整个区域。\n\n给定 Farmer John 的相机返回的图像，请计算 PCL 的数量。", "inputFormat": "输入的第一行包含 $N$，表示网格的大小（$1 \\leq N \\leq 20$）。\n\n接下来的 $N$ 行描述图像，每行包含 $N$ 个字符。", "outputFormat": "输出图像中 PCL 的数量。", "hint": "在这个例子中，两个 PCL 分别是内容如下的矩形：\n\n```\nABB  \nBBB  \nAAB  \nABB\n```\n\n和\n\n```\nBC  \nBC  \nBB  \nBC  \n```", "locale": "zh-CN"}}}
{"pid": "P3672", "type": "P", "difficulty": 5, "samples": [["3 2 2", "3 1 2"], ["10 6 4", "1 2 3 4 5 7 6 10 9 8"], ["50 233 233", "1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 32 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 33 35 34 31 30 29 28"], ["50 233333333 333", "1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 43 49 50 47 46 45 48 44 41 42 40 39 37 38 36 35 34 33 32 30 29 31 28 25 26 27 24"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "洛谷原创", "O2优化", "枚举", "前缀和", "洛谷月赛"], "title": "小清新签到题", "background": "", "description": "题目还是简单一点好。\n\n给定自然数 $n$、$k$、$x$，你要求出第 $k$ 小的长度为 $n$ 的逆序对对数为 $x$ 的 $1\\sim n$ 的排列 $a_1,a_2 ... a_n$ ~~，然后用仙人图上在线分支定界启发式带花树上下界最小费用流解决问题~~，保证存在。\n\n注：逆序对为满足 $i<j$、$a_i>a_j$ 的 $(i,j)$。比较为字典序比较，即比较从前往后第一个不同的位置。第 $k$ 小从 $1$ 开始标号。一个 $1\\sim n$ 的排列定义为一个长度为 $n$ 的数列，排序完可以得到 $1\\sim n$。\n", "inputFormat": "一行三个自然数 $n$、$k$、$x$。\n", "outputFormat": "输出满足条件的排列，一行n个数，用空格分隔。\n", "hint": "对于 $10\\%$ 的数据，$n \\leq 8$。\n\n对于 $30\\%$ 的数据，$n \\leq 10$。\n\n对于 $50\\%$ 的数据，$n \\leq 50$。\n\n对于另外 $20\\%$ 的数据，$k=1$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 300$，$1 \\leq k \\leq 10^{13}$，保证存在符合题意的排列。\n", "locale": "zh-CN", "translations": {"en": {"title": "A Simple Sign-in Problem", "background": "", "description": "Let's keep the problem simple.\n\nGiven natural numbers $n$, $k$, $x$, you are required to find the $k$-th smallest permutation $a_1,a_2 ... a_n$ of $1\\sim n$ of length $n$ whose number of inversions is $x$ ~~and then solve the problem using an on-cactus online branch-and-bound heuristic blossom-tree min-cost flow with bounds~~, and it is guaranteed to exist.\n\nNote: An inversion is a pair $(i,j)$ such that $i<j$ and $a_i>a_j$. The comparison is lexicographical, i.e., compare from left to right at the first position where they differ. The $k$-th smallest is 1-indexed. A permutation of $1\\sim n$ is defined as a length-$n$ sequence that, after sorting, becomes $1\\sim n$.", "inputFormat": "One line with three natural numbers $n$, $k$, $x$.", "outputFormat": "Output a permutation that satisfies the conditions: one line with $n$ numbers, separated by spaces.", "hint": "For $10\\%$ of the testdata, $n \\leq 8$.\n\nFor $30\\%$ of the testdata, $n \\leq 10$.\n\nFor $50\\%$ of the testdata, $n \\leq 50$.\n\nFor an additional $20\\%$ of the testdata, $k=1$.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 300$, $1 \\leq k \\leq 10^{13}$, and a valid permutation is guaranteed to exist.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小清新签到题", "background": "", "description": "题目还是简单一点好。\n\n给定自然数 $n$、$k$、$x$，你要求出第 $k$ 小的长度为 $n$ 的逆序对对数为 $x$ 的 $1\\sim n$ 的排列 $a_1,a_2 ... a_n$ ~~，然后用仙人图上在线分支定界启发式带花树上下界最小费用流解决问题~~，保证存在。\n\n注：逆序对为满足 $i<j$、$a_i>a_j$ 的 $(i,j)$。比较为字典序比较，即比较从前往后第一个不同的位置。第 $k$ 小从 $1$ 开始标号。一个 $1\\sim n$ 的排列定义为一个长度为 $n$ 的数列，排序完可以得到 $1\\sim n$。\n", "inputFormat": "一行三个自然数 $n$、$k$、$x$。\n", "outputFormat": "输出满足条件的排列，一行n个数，用空格分隔。\n", "hint": "对于 $10\\%$ 的数据，$n \\leq 8$。\n\n对于 $30\\%$ 的数据，$n \\leq 10$。\n\n对于 $50\\%$ 的数据，$n \\leq 50$。\n\n对于另外 $20\\%$ 的数据，$k=1$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 300$，$1 \\leq k \\leq 10^{13}$，保证存在符合题意的排列。\n", "locale": "zh-CN"}}}
{"pid": "P3673", "type": "P", "difficulty": 6, "samples": [["01", "1"], ["10101", "1154"], ["10101101010111110100110100101010110001010010101001", "322173207"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "O2优化", "枚举", "生成树", "基环树", "洛谷月赛"], "title": "小清新计数题", "background": null, "description": "小 A 正在电脑上玩一个叫做 Truth or Lie 的游戏。\n\n游戏开始时电脑会给出 $n$ 句话，每句话形如“第 $x$ 句话为真”或“第 $x$ 句话为假”，其中 $x$ 是一个 $1$ 到 $n$ 的整数，你只要选择“Good”或者“Bad”，“Good”表示可以决定每句话的真假使每句话的内容都成立，“Bad”反之。\n\n作为一个菜鸡，小 A 只会不停地点“Good”，靠脸过关。\n\n在无数次失败后，非洲人小 A 发现游戏每关中，每句话包含的是“真”还是“假”是固定的，但是每句话中的 $x$ 是在 $1$ 到 $n$ 均匀随机的。\n\n现在小 A 告诉了你某一关每句话的真假，用一个 $01$ 序列表示。第 $i$ 位为 $0$ 表示第 $i$ 句话包含“假”，否则表示包含“真”。现在他想要知道使得点击“Good”正确的方案数。\n\n由于方案数可能比较大，你需要输出方案数对 $998244353$ 取模的结果。\n\n（读不懂题的请移步样例解释）", "inputFormat": "一行一个 $01$ 序列，它的长度即为 $n$。", "outputFormat": "输出方案数对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n第一句话的内容为“某句话为假”，第二句话的内容为“某句话为真”。所有可能情况如下：\n\n1. 第一句话的内容为“第一句话为假”，第二句话的内容为“第一句话为真”，结果应为 Bad。\n\n2. 第一句话的内容为“第一句话为假”，第二句话的内容为“第二句话为真”，结果应为 Bad。\n\n3. 第一句话的内容为“第二句话为假”，第二句话的内容为“第一句话为真”，结果应为 Bad。\n\n4. 第一句话的内容为“第二句话为假”，第二句话的内容为“第二句话为真”，结果应为 Good，因为只需认为第一句话为假，第二句话为真就符合两句话，所以是 Good。\n\n所以共有一种合法方案。\n\n### 数据范围\n\n- 对于 $10\\%$ 的数据，$n \\leq 7$；\n- 对于 $20\\%$ 的数据，$n \\leq 9$；\n- 对于 $60\\%$ 的数据，$n \\leq 20$；\n- 对于 $100\\%$ 的数据，$1 \\leq n \\leq 50$。", "locale": "zh-CN", "translations": {"en": {"title": "A Fresh Counting Problem", "background": "", "description": "Xiao A is playing a game on the computer called Truth or Lie.\n\nAt the start of the game, the computer gives $n$ sentences. Each sentence is of the form “Statement $x$ is true” or “Statement $x$ is false,” where $x$ is an integer from $1$ to $n$. You only need to choose either \"Good\" or \"Bad.\" \"Good\" means that you can determine the truth value of each statement so that the content of every sentence holds. \"Bad\" means the opposite.\n\nAs a newbie, Xiao A keeps clicking \"Good\" and hopes to pass by luck.\n\nAfter countless failures, Xiao A discovers that in each level, whether a sentence contains the word “true” or “false” is fixed, but the $x$ in each sentence is chosen uniformly at random from $1$ to $n$.\n\nNow Xiao A tells you, for a certain level, which word each sentence contains, represented by a $01$ sequence. The $i$-th bit being $0$ means the $i$-th sentence contains “false,” otherwise it contains “true.” He wants to know the number of assignments of the $x$’s that make clicking \"Good\" correct.\n\nSince the number of valid assignments may be large, you need to output the result modulo $998244353$.\n\n(If you do not understand the problem, please refer to the sample explanation.)", "inputFormat": "A single line containing a $01$ sequence, whose length is $n$.", "outputFormat": "Output the number of valid assignments modulo $998244353$.", "hint": "### Sample Explanation\n\nThe first sentence says “Some statement is false,” and the second sentence says “Some statement is true.” All possible cases are as follows:\n\n1. The first sentence says “Statement 1 is false,” the second says “Statement 1 is true.” The result should be Bad.\n2. The first sentence says “Statement 1 is false,” the second says “Statement 2 is true.” The result should be Bad.\n3. The first sentence says “Statement 2 is false,” the second says “Statement 1 is true.” The result should be Bad.\n4. The first sentence says “Statement 2 is false,” the second says “Statement 2 is true.” The result should be Good, because setting the first statement to false and the second statement to true satisfies both sentences, so it is Good.\n\nTherefore, there is exactly one valid assignment.\n\n### Constraints\n\n- For $10\\%$ of the testdata, $n \\leq 7$.\n- For $20\\%$ of the testdata, $n \\leq 9$.\n- For $60\\%$ of the testdata, $n \\leq 20$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小清新计数题", "background": null, "description": "小 A 正在电脑上玩一个叫做 Truth or Lie 的游戏。\n\n游戏开始时电脑会给出 $n$ 句话，每句话形如“第 $x$ 句话为真”或“第 $x$ 句话为假”，其中 $x$ 是一个 $1$ 到 $n$ 的整数，你只要选择“Good”或者“Bad”，“Good”表示可以决定每句话的真假使每句话的内容都成立，“Bad”反之。\n\n作为一个菜鸡，小 A 只会不停地点“Good”，靠脸过关。\n\n在无数次失败后，非洲人小 A 发现游戏每关中，每句话包含的是“真”还是“假”是固定的，但是每句话中的 $x$ 是在 $1$ 到 $n$ 均匀随机的。\n\n现在小 A 告诉了你某一关每句话的真假，用一个 $01$ 序列表示。第 $i$ 位为 $0$ 表示第 $i$ 句话包含“假”，否则表示包含“真”。现在他想要知道使得点击“Good”正确的方案数。\n\n由于方案数可能比较大，你需要输出方案数对 $998244353$ 取模的结果。\n\n（读不懂题的请移步样例解释）", "inputFormat": "一行一个 $01$ 序列，它的长度即为 $n$。", "outputFormat": "输出方案数对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n第一句话的内容为“某句话为假”，第二句话的内容为“某句话为真”。所有可能情况如下：\n\n1. 第一句话的内容为“第一句话为假”，第二句话的内容为“第一句话为真”，结果应为 Bad。\n\n2. 第一句话的内容为“第一句话为假”，第二句话的内容为“第二句话为真”，结果应为 Bad。\n\n3. 第一句话的内容为“第二句话为假”，第二句话的内容为“第一句话为真”，结果应为 Bad。\n\n4. 第一句话的内容为“第二句话为假”，第二句话的内容为“第二句话为真”，结果应为 Good，因为只需认为第一句话为假，第二句话为真就符合两句话，所以是 Good。\n\n所以共有一种合法方案。\n\n### 数据范围\n\n- 对于 $10\\%$ 的数据，$n \\leq 7$；\n- 对于 $20\\%$ 的数据，$n \\leq 9$；\n- 对于 $60\\%$ 的数据，$n \\leq 20$；\n- 对于 $100\\%$ 的数据，$1 \\leq n \\leq 50$。", "locale": "zh-CN"}}}
{"pid": "P3674", "type": "P", "difficulty": 6, "samples": [["10 10\n1 1 8 9 9 1 1 1 1 9 \n3 5 9 42\n2 1 3 14\n2 3 5 2\n2 3 3 6\n1 6 10 18\n3 4 9 14\n2 1 4 22\n3 1 3 32\n2 5 6 32\n3 1 9 17", "bi\nbi\nbi\nbi\nbi\nbi\nbi\nbi\nbi\nbi\n"], ["5 5\n1 1 2 3 4\n2 1 1 2\n1 1 2 2\n3 1 1 1\n3 5 5 16\n1 2 3 4", "hana\nbi\nhana\nhana\nbi"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["莫队", "洛谷原创", "O2优化", "枚举", "洛谷月赛", "bitset"], "title": "小清新人渣的本愿", "background": "**本题时限3s，空间128MB**\n\n我感觉我要挂省选\n\n人渣的本愿是一个有趣的番\n\n可爱的花火喜欢从小和她谈♂笑♂风♂生的欧♂尼♂酱鸣海，欧尼酱特别想当老师，然后剧本安排当了花火的班主任。\n\n然而有个叫做皆川茜的奇怪的人抢走了欧尼酱！\n\n花火就很失落呀，然后看到一个叫做麦的人也很失落，原来麦喜欢茜老师。。。\n\n花火和麦从此天天谈笑风生，然后决定在一起，把对方当做自己喜欢的人的替代品\n\n因为花火很可爱，所以有许多奇怪的人喜欢花火，比如一个叫做绘鸠早苗的妹子\n\n因为麦长的也不错，所以有许多奇怪的人喜欢麦，比如一个叫做最可的妹子\n\n然后就开始愉快的生♂活了~\n\n以上内容如果你没有看过这个番可以无视掉\n\n\n按照套路，现在欧尼酱会问花火一个OI问题（一般是数据结构），然后花火肯定不会OI，所以会来请教您这位IOI Au选手，然后您肯定会帮助她\n\n但是\n这个套路太无聊了，我们来换一个（但是不会改变您是IOI Au选手的事实）\n\n花火有一天看了几个有趣的番，叫做“在W??身上寻找女装是否搞错了什么”，“从女装开始的?X?”，“我家大佬不可能那么可爱”，然后发现??H太厉害了，然后就穿越到了异世界，和???谈笑风生\n\n花火就和???做了一个交♂易，花火帮???做一道题，然后???帮花火改写地球online的程序，让花火和欧尼酱在♂一♂起\n\n???虽然非常厉害，但是不会数据结构题，他最近刚刚遇到一道有趣的数据结构题，于是他接受了交易\n\n但是花火也不会数据结构题呀\n\n所以又回到了这个老套路，就靠您这个IOI Au选手来帮她了！\n\n以上内容如果你没有看过这个番还是可以无视掉\n\n这里用一个经典的图来解释这个关系（其实没那么蛋疼的）\n\n![](https://cdn.luogu.com.cn/upload/pic/4628.png)", "description": "这个题是这样的：\n\n给你一个序列 $a$，长度为 $n$，有 $m$ 次操作，每次询问一个区间是否可以选出两个数它们的差为 $x$，或者询问一个区间是否可以选出两个数它们的和为 $x$，或者询问一个区间是否可以选出两个数它们的乘积为 $x$ ，这三个操作分别为操作 $1,2,3$。\n\n选出的这两个数可以是同一个位置的数。\n\n![](https://cdn.luogu.com.cn/upload/pic/4629.png)", "inputFormat": "第一行两个数 $n,m$。\n\n后面一行 $n$ 个数表示 $a_i$。\n\n后面 $m$ 行每行四个数 `opt l r x`。\n\n$opt$ 表示这个是第几种操作，$l,r$ 表示操作的区间，$x$ 表示这次操作的 $x$。", "outputFormat": "对于每个询问，如果可以，输出 `hana`，否则输出 `bi`。", "hint": "定义 $c$ 为每次的 $x$ 和 $a_i$ 中的最大值，$a_i \\geq 0$，每次的 $x\\geq 0$。\n\n对于 $10\\%$ 的数据，$n,m,c \\leq 100$。\n\n对于另外 $10\\%$ 的数据，$n,m,c \\leq 3\\times 10^3$。\n\n对于另外 $10\\%$ 的数据，只有 $1$ 操作。\n\n对于另外 $10\\%$ 的数据，只有 $2$ 操作。\n \n对于另外 $10\\%$ 的数据，只有 $3$ 操作。\n\n对于 $100\\%$ 的数据，$n,m,c \\leq 10^5$。\n\n![](https://cdn.luogu.com.cn/upload/pic/4630.png)", "locale": "zh-CN", "translations": {"en": {"title": "A Fresh Newbie's Scum's Wish", "background": "Time limit 3 s, memory 128 MB.\n\nI feel I am going to fail the NOI Qualifier.\n\nScum's Wish is an interesting anime.\n\nThe cute Hanabi likes her onii-chan Narumi, who has chatted and joked with her since childhood. Onii-chan really wants to be a teacher, and as the plot goes, he becomes Hanabi’s homeroom teacher.\n\nHowever, someone strange named Akane Minagawa steals onii-chan away!\n\nHanabi feels very down, and then she sees someone named Mugi also feeling down. It turns out Mugi likes Teacher Akane.\n\nFrom then on, Hanabi and Mugi chat and joke every day and decide to be together, treating each other as substitutes for the people they actually like.\n\nBecause Hanabi is very cute, many strange people like her, such as a girl named Sanae Ebato.\n\nBecause Mugi also looks good, many strange people like him, such as a girl named Most Kawaii.\n\nAnd then their cheerful life begins.\n\nIf you haven’t watched this anime, you can ignore the above.\n\nFollowing the usual trope, now onii-chan would ask Hanabi an OI problem (usually data structures). Hanabi definitely doesn’t do OI, so she comes to ask you, an IOI Au contestant, and you will surely help her.\n\nBut this trope is too boring, so let’s change it (without changing the fact that you are an IOI Au contestant).\n\nOne day Hanabi watched a few interesting anime called “Is It Wrong to Look for Crossdressing on W??,” “Starting from Crossdressing, ?X?,” and “My Big Boss Can’t Possibly Be This Cute,” and then discovered ??H is amazing. She then traveled to another world and bantered with ???.\n\nHanabi made a deal with ???: Hanabi helps ??? solve a problem, and ??? helps Hanabi rewrite the program of Earth Online so Hanabi and onii-chan can be together.\n\nAlthough ??? is very powerful, he doesn’t know data structure problems. He recently encountered an interesting data structure problem, so he accepted the deal.\n\nBut Hanabi also doesn’t know data structure problems.\n\nSo we’re back to the old trope—she relies on you, the IOI Au contestant, to help her!\n\nIf you haven’t watched these anime, you can still ignore the above.\n\nHere is a classic diagram to explain this relationship (it’s actually not that silly).\n\n![](https://cdn.luogu.com.cn/upload/pic/4628.png)", "description": "The problem is as follows:\n\nYou are given a sequence $a$ of length $n$, with $m$ operations. Each operation asks whether, in a given interval, you can choose two numbers whose difference equals $x$, or two numbers whose sum equals $x$, or two numbers whose product equals $x$. These three operations correspond to operations $1, 2, 3$, respectively.\n\nThe two chosen numbers may come from the same position.\n\n![](https://cdn.luogu.com.cn/upload/pic/4629.png)", "inputFormat": "The first line contains two numbers $n, m$.\n\nThe second line contains $n$ numbers representing $a_i$.\n\nEach of the next $m$ lines contains four numbers `opt l r x`.\n\n$opt$ indicates which operation it is, $l, r$ specify the interval, and $x$ is the value for this operation.", "outputFormat": "For each query, if it is possible, output `hana`; otherwise, output `bi`.", "hint": "Define $c$ as the maximum of each $x$ and all $a_i$. Assume $a_i \\geq 0$ and each $x \\geq 0$.\n\nFor $10\\%$ of the testdata, $n, m, c \\leq 100$.\n\nFor another $10\\%$ of the testdata, $n, m, c \\leq 3 \\times 10^3$.\n\nFor another $10\\%$ of the testdata, only operation $1$ appears.\n\nFor another $10\\%$ of the testdata, only operation $2$ appears.\n\nFor another $10\\%$ of the testdata, only operation $3$ appears.\n\nFor $100\\%$ of the testdata, $n, m, c \\leq 10^5$.\n\n![](https://cdn.luogu.com.cn/upload/pic/4630.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小清新人渣的本愿", "background": "**本题时限3s，空间128MB**\n\n我感觉我要挂省选\n\n人渣的本愿是一个有趣的番\n\n可爱的花火喜欢从小和她谈♂笑♂风♂生的欧♂尼♂酱鸣海，欧尼酱特别想当老师，然后剧本安排当了花火的班主任。\n\n然而有个叫做皆川茜的奇怪的人抢走了欧尼酱！\n\n花火就很失落呀，然后看到一个叫做麦的人也很失落，原来麦喜欢茜老师。。。\n\n花火和麦从此天天谈笑风生，然后决定在一起，把对方当做自己喜欢的人的替代品\n\n因为花火很可爱，所以有许多奇怪的人喜欢花火，比如一个叫做绘鸠早苗的妹子\n\n因为麦长的也不错，所以有许多奇怪的人喜欢麦，比如一个叫做最可的妹子\n\n然后就开始愉快的生♂活了~\n\n以上内容如果你没有看过这个番可以无视掉\n\n\n按照套路，现在欧尼酱会问花火一个OI问题（一般是数据结构），然后花火肯定不会OI，所以会来请教您这位IOI Au选手，然后您肯定会帮助她\n\n但是\n这个套路太无聊了，我们来换一个（但是不会改变您是IOI Au选手的事实）\n\n花火有一天看了几个有趣的番，叫做“在W??身上寻找女装是否搞错了什么”，“从女装开始的?X?”，“我家大佬不可能那么可爱”，然后发现??H太厉害了，然后就穿越到了异世界，和???谈笑风生\n\n花火就和???做了一个交♂易，花火帮???做一道题，然后???帮花火改写地球online的程序，让花火和欧尼酱在♂一♂起\n\n???虽然非常厉害，但是不会数据结构题，他最近刚刚遇到一道有趣的数据结构题，于是他接受了交易\n\n但是花火也不会数据结构题呀\n\n所以又回到了这个老套路，就靠您这个IOI Au选手来帮她了！\n\n以上内容如果你没有看过这个番还是可以无视掉\n\n这里用一个经典的图来解释这个关系（其实没那么蛋疼的）\n\n![](https://cdn.luogu.com.cn/upload/pic/4628.png)", "description": "这个题是这样的：\n\n给你一个序列 $a$，长度为 $n$，有 $m$ 次操作，每次询问一个区间是否可以选出两个数它们的差为 $x$，或者询问一个区间是否可以选出两个数它们的和为 $x$，或者询问一个区间是否可以选出两个数它们的乘积为 $x$ ，这三个操作分别为操作 $1,2,3$。\n\n选出的这两个数可以是同一个位置的数。\n\n![](https://cdn.luogu.com.cn/upload/pic/4629.png)", "inputFormat": "第一行两个数 $n,m$。\n\n后面一行 $n$ 个数表示 $a_i$。\n\n后面 $m$ 行每行四个数 `opt l r x`。\n\n$opt$ 表示这个是第几种操作，$l,r$ 表示操作的区间，$x$ 表示这次操作的 $x$。", "outputFormat": "对于每个询问，如果可以，输出 `hana`，否则输出 `bi`。", "hint": "定义 $c$ 为每次的 $x$ 和 $a_i$ 中的最大值，$a_i \\geq 0$，每次的 $x\\geq 0$。\n\n对于 $10\\%$ 的数据，$n,m,c \\leq 100$。\n\n对于另外 $10\\%$ 的数据，$n,m,c \\leq 3\\times 10^3$。\n\n对于另外 $10\\%$ 的数据，只有 $1$ 操作。\n\n对于另外 $10\\%$ 的数据，只有 $2$ 操作。\n \n对于另外 $10\\%$ 的数据，只有 $3$ 操作。\n\n对于 $100\\%$ 的数据，$n,m,c \\leq 10^5$。\n\n![](https://cdn.luogu.com.cn/upload/pic/4630.png)", "locale": "zh-CN"}}}
