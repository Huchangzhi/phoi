{"pid": "P6158", "type": "P", "difficulty": 7, "samples": [["3\n8 3\n5 2\n1 1\n4 2\n1 2\n7 5\n7 2\n6 1\n5 4\n2 3\n1 4 \n4 3", "49"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2020", "网络流", "O2优化", "最短路", "最小割", "凸包", "叉积"], "title": "封锁", "background": "震惊！zbw 竟从 B 城监狱逃出！\n\n作为 B 城的警察局长，你必须在 zbw 逃出你的管辖范围之前抓住他。", "description": "B 城可视为一个 $n \\times n$ 的方阵，其中监狱在 $(1,1)$，B 城唯一出城的出口在 $(n,n)$。每两个相邻的点（横坐标之差的绝对值 $+$ 纵坐标之间的绝对值 $=1$）之间都有一条**无向的**道路（没有斜着的道路）。你需要在一些道路上部下防守，使得无论 zbw 怎么走，都至少会经过其中的一条道路。\n\n在一条 $(i,j)$ 到 $(i,j+1)$ 的道路上部下防守的花费是 $r_{i,j}$，在一条 $(i,j)$ 到 $(i+1,j)$ 的道路上部下防守的花费是 $d_{i,j}$，同时，在道路上部下防守会对人民的生活造成影响，在一条 $(i,j)$ 到 $(i,j+1)$ 的道路上部下防守对人民的生活造成的影响是 $x_{i,j}$，在一条 $(i,j)$ 到 $(i+1,j)$ 的道路上部下防守对人民的生活造成的影响是 $y_{i,j}$。\n\n定义总花费为 $w$ ，总影响为 $e$ ，作为一名优秀的警察局长，你需要最小化 $w \\times e$。 ", "inputFormat": "第一行一个整数 $n$。\n\n之后的 $n \\times (n-1)$ 行，第 $i$ 行两个整数 $r_{i/n+1,(i-1)\\bmod n+1}$， $x_{i/n+1,(i-1)\\bmod n+1}$。\n\n之后的 $n \\times (n-1)$ 行，第 $i$ 行两个整数 $d_{i/n+1,(i-1)\\bmod n+1}$ ，$y_{i/n+1,(i-1)\\bmod n+1}$。\n\n也就是说，先从上往下给从左往右给出竖边的信息，再从上往下给从左往右给出横边的信息。\n\n如果不理解请见样例解释。\n", "outputFormat": "一行一个整数，表示 $w \\times e$ 的最小值。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/bjd62iba.png)\n\n如图，左上角为 $(1,1)$，右下角为 $(n,n)$，\n其中蓝色数字表示 $r$,\n红色数字表示 $x$,\n黄色数字表示 $d$,\n绿色数字表示 $y$。\n\n最优方案为防守三条边，分别为：\n\n$(2,2)-(2,3),(3,1)-(3,2),(3,2)-(3,3)$\n\n三条边的边权分别是 $2,3$---$1,1$ ---$4,3$\n\n答案为 $(1+2+4)\\times (1+3+3)=49$\n\n\n可以发现没有更优的做法。\n\n**本题采用捆绑测试。**\n\n|  Subtasks| $n$ |特殊性质  |分数\n| :----------: | :----------: | :----------: |:----------: |\n|  Subtask1| $n=2$ |无  |$5$\n|  Subtask2| $n\\leq400$ |数据随机  |$15$\n|  Subtask3| $n\\leq10$ |  无|$15$\n|  Subtask4| $n\\leq50$ | 无 |$30$\n|  Subtask5| $n\\leq400$ | 无 |$35$\n\n对于所有数据 $1 \\leq n \\leq 400$，$0 \\leq r_{i,j}, d_{i,j},x_{i,j} ,y_{i,j}  \\leq 10^3$。\n\n数据于2020/3/4加强，卡掉部分复杂度错误的做法。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "封锁", "background": "震惊！zbw 竟从 B 城监狱逃出！\n\n作为 B 城的警察局长，你必须在 zbw 逃出你的管辖范围之前抓住他。", "description": "B 城可视为一个 $n \\times n$ 的方阵，其中监狱在 $(1,1)$，B 城唯一出城的出口在 $(n,n)$。每两个相邻的点（横坐标之差的绝对值 $+$ 纵坐标之间的绝对值 $=1$）之间都有一条**无向的**道路（没有斜着的道路）。你需要在一些道路上部下防守，使得无论 zbw 怎么走，都至少会经过其中的一条道路。\n\n在一条 $(i,j)$ 到 $(i,j+1)$ 的道路上部下防守的花费是 $r_{i,j}$，在一条 $(i,j)$ 到 $(i+1,j)$ 的道路上部下防守的花费是 $d_{i,j}$，同时，在道路上部下防守会对人民的生活造成影响，在一条 $(i,j)$ 到 $(i,j+1)$ 的道路上部下防守对人民的生活造成的影响是 $x_{i,j}$，在一条 $(i,j)$ 到 $(i+1,j)$ 的道路上部下防守对人民的生活造成的影响是 $y_{i,j}$。\n\n定义总花费为 $w$ ，总影响为 $e$ ，作为一名优秀的警察局长，你需要最小化 $w \\times e$。 ", "inputFormat": "第一行一个整数 $n$。\n\n之后的 $n \\times (n-1)$ 行，第 $i$ 行两个整数 $r_{i/n+1,(i-1)\\bmod n+1}$， $x_{i/n+1,(i-1)\\bmod n+1}$。\n\n之后的 $n \\times (n-1)$ 行，第 $i$ 行两个整数 $d_{i/n+1,(i-1)\\bmod n+1}$ ，$y_{i/n+1,(i-1)\\bmod n+1}$。\n\n也就是说，先从上往下给从左往右给出竖边的信息，再从上往下给从左往右给出横边的信息。\n\n如果不理解请见样例解释。\n", "outputFormat": "一行一个整数，表示 $w \\times e$ 的最小值。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/bjd62iba.png)\n\n如图，左上角为 $(1,1)$，右下角为 $(n,n)$，\n其中蓝色数字表示 $r$,\n红色数字表示 $x$,\n黄色数字表示 $d$,\n绿色数字表示 $y$。\n\n最优方案为防守三条边，分别为：\n\n$(2,2)-(2,3),(3,1)-(3,2),(3,2)-(3,3)$\n\n三条边的边权分别是 $2,3$---$1,1$ ---$4,3$\n\n答案为 $(1+2+4)\\times (1+3+3)=49$\n\n\n可以发现没有更优的做法。\n\n**本题采用捆绑测试。**\n\n|  Subtasks| $n$ |特殊性质  |分数\n| :----------: | :----------: | :----------: |:----------: |\n|  Subtask1| $n=2$ |无  |$5$\n|  Subtask2| $n\\leq400$ |数据随机  |$15$\n|  Subtask3| $n\\leq10$ |  无|$15$\n|  Subtask4| $n\\leq50$ | 无 |$30$\n|  Subtask5| $n\\leq400$ | 无 |$35$\n\n对于所有数据 $1 \\leq n \\leq 400$，$0 \\leq r_{i,j}, d_{i,j},x_{i,j} ,y_{i,j}  \\leq 10^3$。\n\n数据于2020/3/4加强，卡掉部分复杂度错误的做法。", "locale": "zh-CN"}}}
{"pid": "P6159", "type": "P", "difficulty": 1, "samples": [["12 5 2", "10"], ["1000 342 3472844", "648"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2020"], "title": "[Cnoi2020] 光图", "background": "> 简洁中蕴含着伟大。\n\nCirno 不经意地把一个内部完全反射的圆分成了 $12$ 等分，等分点分别记作 $A_0$, $A_1$, $A_2$, $\\cdots$ , $A_{11}$。\n\n随后，她不经意地将一束光从一点发出，朝向另一点，重复，反射，迭代，便得到了一幅美妙的光图。\n\n这一切都发生在不经意之间。\n\n她不经意地发现了这一幕，并且不经意地记下了这个不经意的结论，又在某一刻不经意地回忆起。\n\n幻想乡的每一天一切都是这么不以为意，多好的一天啊！", "description": "Rumia 有一个单位圆，被分成 $n$ 等分，等分点分别记作 $A_0$, $A_1$, $A_2$, $\\cdots$ , $A_{n-1}$。\n\n现在她从 $A_0$ 向 $A_p$ 发射一束光，经过 $k-1$ 次反射，到达了 $A_t$。\n\nRumia 想知道 $t$ 的值，由于 Cirno 并不想帮她，所以 Rumia 转而求助于你。", "inputFormat": "一行，三个整数，$n,p,k$。", "outputFormat": "一行，一个整数 $t$。", "hint": "### Sample1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x7j0roeg.png)\n\n### 后置物理知识\n - **连续曲线反射规律** : 入射光线与出射光线关于入射点在曲线上切线夹角相等。\n\n### 数据范围约定\n\n**「本题采用捆绑测试」**\n\n - Subtask1( $80\\%$ ) : $n, k \\le 10^6$\n - Subtask2( $20\\%$ ) : $n, k \\le 10^9$\n\n对于 $100\\%$ 的数据 : $0 < p < n \\le 10^9$, $0 < k \\le 10^9$。\n\n### 后记\n - Cirno 得到的光图就是传说中的**十二芒星图**。", "locale": "zh-CN", "translations": {"en": {"title": "[Cnoi2020] Light Diagram", "background": "> Greatness is hidden in simplicity.\n\nCirno casually divided a circle with total internal reflection into $12$ equal parts, and the division points are denoted as $A_0$, $A_1$, $A_2$, $\\cdots$ , $A_{11}$.\n\nThen, she casually emitted a beam of light from one point toward another point. By repeating, reflecting, and iterating, she obtained a beautiful light diagram.\n\nAll of this happened casually.\n\nShe casually noticed this scene, and casually wrote down this casual conclusion, and at some moment casually recalled it.\n\nEvery day in Gensokyo is so carefree. What a nice day.", "description": "Rumia has a unit circle, divided into $n$ equal parts, and the division points are denoted as $A_0$, $A_1$, $A_2$, $\\cdots$ , $A_{n-1}$.\n\nNow she emits a beam of light from $A_0$ toward $A_p$. After $k - 1$ reflections, it arrives at $A_t$.\n\nRumia wants to know the value of $t$. Since Cirno does not want to help her, Rumia turns to you for help.", "inputFormat": "One line with three integers, $n, p, k$.", "outputFormat": "One line with one integer $t$.", "hint": "### Explanation of Sample 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x7j0roeg.png)\n\n### Physical knowledge used later\n- **Reflection law on a continuous curve**: The incident ray and the reflected ray make equal angles with the tangent line of the curve at the point of incidence.\n\n### Constraints\n\n**This problem uses bundled testdata.**\n\n- Subtask 1 ($80\\%$): $n, k \\le 10^6$.\n- Subtask 2 ($20\\%$): $n, k \\le 10^9$.\n\nFor $100\\%$ of the testdata: $0 < p < n \\le 10^9$, $0 < k \\le 10^9$.\n\n### Postscript\n- The light diagram obtained by Cirno is the legendary **twelve-pointed star diagram**.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Cnoi2020] 光图", "background": "> 简洁中蕴含着伟大。\n\nCirno 不经意地把一个内部完全反射的圆分成了 $12$ 等分，等分点分别记作 $A_0$, $A_1$, $A_2$, $\\cdots$ , $A_{11}$。\n\n随后，她不经意地将一束光从一点发出，朝向另一点，重复，反射，迭代，便得到了一幅美妙的光图。\n\n这一切都发生在不经意之间。\n\n她不经意地发现了这一幕，并且不经意地记下了这个不经意的结论，又在某一刻不经意地回忆起。\n\n幻想乡的每一天一切都是这么不以为意，多好的一天啊！", "description": "Rumia 有一个单位圆，被分成 $n$ 等分，等分点分别记作 $A_0$, $A_1$, $A_2$, $\\cdots$ , $A_{n-1}$。\n\n现在她从 $A_0$ 向 $A_p$ 发射一束光，经过 $k-1$ 次反射，到达了 $A_t$。\n\nRumia 想知道 $t$ 的值，由于 Cirno 并不想帮她，所以 Rumia 转而求助于你。", "inputFormat": "一行，三个整数，$n,p,k$。", "outputFormat": "一行，一个整数 $t$。", "hint": "### Sample1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x7j0roeg.png)\n\n### 后置物理知识\n - **连续曲线反射规律** : 入射光线与出射光线关于入射点在曲线上切线夹角相等。\n\n### 数据范围约定\n\n**「本题采用捆绑测试」**\n\n - Subtask1( $80\\%$ ) : $n, k \\le 10^6$\n - Subtask2( $20\\%$ ) : $n, k \\le 10^9$\n\n对于 $100\\%$ 的数据 : $0 < p < n \\le 10^9$, $0 < k \\le 10^9$。\n\n### 后记\n - Cirno 得到的光图就是传说中的**十二芒星图**。", "locale": "zh-CN"}}}
{"pid": "P6160", "type": "P", "difficulty": 3, "samples": [["3 4 5", "-25.0"], ["159 473 824 ", "-445561.0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2020", "向量"], "title": "[Cnoi2020] 向量", "background": "> 向量(vector)，指具有大小(Magnitude)和方向(Direction) 的量。  \n> 与向量对应的量叫做数量(Scalar)，数量只有大小，没有方向。\n\n对于 Cirno 来说，整天环绕氷屋的旋转 Sangetsusei 们是向量而不是数量。\n - Sunny Milk 以 $r_1$ 为半径做匀速圆周运动。\n - Luna Child 以 $r_2$ 为半径做匀加速圆周运动。\n - Star Sapphire 以 $r_3$ 为半径做变加速圆周运动。\n\n为了尽可能的减小三月精们的影响，一些重要的参数必需被计算。", "description": "以氷屋为原点，三月精的位置分别记作向量 $\\vec{a}$, $\\vec{b}$, $\\vec{c}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j3u0l3no.png)\n\n由定义可知，$|\\vec{a}|=r_1$, $|\\vec{b}|=r_2$, $|\\vec{c}|=r_3$。\n\n现在 Cirno 分配给你的任务是计算其 **破坏极限指数** $\\sigma$。\n\n$$\\sigma=\\min\\{\\vec{a}\\cdot\\vec{b}+\\vec{b}\\cdot\\vec{c}+\\vec{c}\\cdot\\vec{a}\\}$$\n\n其中「$\\cdot$」表示 **向量内积**。", "inputFormat": "一行，三个整数 $r_1$, $r_2$, $r_3$，保证 $r_1 \\le r_2 \\le r_3$。", "outputFormat": "一行，一个 **实数** $\\sigma$。（**小数点后保留一位数字**）", "hint": "### Sample1 解释\n\n$\\cos\\langle\\vec{a},\\vec{b}\\rangle=0,\\cos\\langle\\vec{b},\\vec{c}\\rangle=-\\frac{4}{5},\\cos\\langle\\vec{c},\\vec{a}\\rangle=-\\frac{3}{5}$ 时答案最小。\n\n### 后置数学知识\n - **向量内积定义** : $\\vec{a}\\cdot\\vec{b}=|\\vec{a}||\\vec{b}|\\times \\cos\\langle\\vec{a},\\vec{b}\\rangle$\n - **向量内积坐标表示** : $(x_1,y_1)\\cdot(x_2,y_2)=x_1x_2+y_1y_2$\n\n### 数据范围约定\n\n**「本题采用捆绑测试」**\n\n - Subtask1( $20\\%$ ) : $r_1=r_2=r_3$\n - Subtask2( $40\\%$ ) : $r_1,r_2,r_3 \\le 10$\n - Subtask3( $40\\%$ ) : $r_1,r_2,r_3 \\le 10^9$\n\n对于 $100\\%$ 的数据 $0 < r_1 \\le r_2 \\le r_3 \\le 10^9$", "locale": "zh-CN", "translations": {"en": {"title": "[Cnoi2020] Vectors", "background": "> A vector refers to a quantity that has both magnitude (Magnitude) and direction (Direction).  \n> The quantity corresponding to a vector is called a scalar (Scalar), which has only magnitude and no direction.\n\nFor Cirno, the Sangetsusei who keep rotating around the ice house all day are vectors, not scalars.\n- Sunny Milk performs uniform circular motion with radius $r_1$.\n- Luna Child performs uniformly accelerated circular motion with radius $r_2$.\n- Star Sapphire performs variably accelerated circular motion with radius $r_3$.\n\nTo reduce the impact of the Sangetsusei as much as possible, some important parameters must be computed.", "description": "Take the ice house as the origin. The positions of the Sangetsusei are denoted by vectors $\\vec{a}$, $\\vec{b}$, $\\vec{c}$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j3u0l3no.png)\n\nBy definition, $|\\vec{a}|=r_1$, $|\\vec{b}|=r_2$, $|\\vec{c}|=r_3$.\n\nNow Cirno assigns you the task of computing the **destruction limit index** $\\sigma$.\n\n$$\\sigma=\\min\\{\\vec{a}\\cdot\\vec{b}+\\vec{b}\\cdot\\vec{c}+\\vec{c}\\cdot\\vec{a}\\}$$\n\nHere, “$\\cdot$” denotes the **vector dot product**.", "inputFormat": "One line with three integers $r_1$, $r_2$, $r_3$, guaranteed that $r_1 \\le r_2 \\le r_3$.", "outputFormat": "One line with one **real number** $\\sigma$. (**Keep one digit after the decimal point**.)", "hint": "### Sample1 Explanation\n\nThe answer is minimized when $\\cos\\langle\\vec{a},\\vec{b}\\rangle=0,\\cos\\langle\\vec{b},\\vec{c}\\rangle=-\\frac{4}{5},\\cos\\langle\\vec{c},\\vec{a}\\rangle=-\\frac{3}{5}$.\n\n### Required Math Knowledge\n- **Definition of dot product**: $\\vec{a}\\cdot\\vec{b}=|\\vec{a}||\\vec{b}|\\times \\cos\\langle\\vec{a},\\vec{b}\\rangle$\n- **Coordinate form of dot product**: $(x_1,y_1)\\cdot(x_2,y_2)=x_1x_2+y_1y_2$\n\n### Constraints\n\n**This problem uses bundled testdata.**\n\n- Subtask 1 ($20\\%$): $r_1=r_2=r_3$\n- Subtask 2 ($40\\%$): $r_1,r_2,r_3 \\le 10$\n- Subtask 3 ($40\\%$): $r_1,r_2,r_3 \\le 10^9$\n\nFor $100\\%$ of the testdata, $0 < r_1 \\le r_2 \\le r_3 \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Cnoi2020] 向量", "background": "> 向量(vector)，指具有大小(Magnitude)和方向(Direction) 的量。  \n> 与向量对应的量叫做数量(Scalar)，数量只有大小，没有方向。\n\n对于 Cirno 来说，整天环绕氷屋的旋转 Sangetsusei 们是向量而不是数量。\n - Sunny Milk 以 $r_1$ 为半径做匀速圆周运动。\n - Luna Child 以 $r_2$ 为半径做匀加速圆周运动。\n - Star Sapphire 以 $r_3$ 为半径做变加速圆周运动。\n\n为了尽可能的减小三月精们的影响，一些重要的参数必需被计算。", "description": "以氷屋为原点，三月精的位置分别记作向量 $\\vec{a}$, $\\vec{b}$, $\\vec{c}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j3u0l3no.png)\n\n由定义可知，$|\\vec{a}|=r_1$, $|\\vec{b}|=r_2$, $|\\vec{c}|=r_3$。\n\n现在 Cirno 分配给你的任务是计算其 **破坏极限指数** $\\sigma$。\n\n$$\\sigma=\\min\\{\\vec{a}\\cdot\\vec{b}+\\vec{b}\\cdot\\vec{c}+\\vec{c}\\cdot\\vec{a}\\}$$\n\n其中「$\\cdot$」表示 **向量内积**。", "inputFormat": "一行，三个整数 $r_1$, $r_2$, $r_3$，保证 $r_1 \\le r_2 \\le r_3$。", "outputFormat": "一行，一个 **实数** $\\sigma$。（**小数点后保留一位数字**）", "hint": "### Sample1 解释\n\n$\\cos\\langle\\vec{a},\\vec{b}\\rangle=0,\\cos\\langle\\vec{b},\\vec{c}\\rangle=-\\frac{4}{5},\\cos\\langle\\vec{c},\\vec{a}\\rangle=-\\frac{3}{5}$ 时答案最小。\n\n### 后置数学知识\n - **向量内积定义** : $\\vec{a}\\cdot\\vec{b}=|\\vec{a}||\\vec{b}|\\times \\cos\\langle\\vec{a},\\vec{b}\\rangle$\n - **向量内积坐标表示** : $(x_1,y_1)\\cdot(x_2,y_2)=x_1x_2+y_1y_2$\n\n### 数据范围约定\n\n**「本题采用捆绑测试」**\n\n - Subtask1( $20\\%$ ) : $r_1=r_2=r_3$\n - Subtask2( $40\\%$ ) : $r_1,r_2,r_3 \\le 10$\n - Subtask3( $40\\%$ ) : $r_1,r_2,r_3 \\le 10^9$\n\n对于 $100\\%$ 的数据 $0 < r_1 \\le r_2 \\le r_3 \\le 10^9$", "locale": "zh-CN"}}}
{"pid": "P6161", "type": "P", "difficulty": 3, "samples": [["2", "2\n0 1 3\n0 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2020", "Special Judge", "构造"], "title": "[Cnoi2020] 高维", "background": "> 本质上，幻想乡是高维的。", "description": "Cirno 捕获了一只 $n$ 维蚂蚁，它想从 $S(0,0,...,0)$ 爬到 $T(1,1,...,1)$ 。\n\n被封闭在这个 $1\\times1\\times...\\times1$ 的方格中，蚂蚁每一步只能爬向一个坐标相邻的点。\n\n现在 Cirno 想考考你蚂蚁最多能找到多少条从 $S$ 到 $T$ 的路径两两没有交点( 除 $S$, $T$ )。\n\n并要求你构造这样一组路径。", "inputFormat": "一行，一个整数 $n$ 。", "outputFormat": "第一行，一个整数 $t$，表示最多的路径数。\n\n以下 $t$ 行，每行一条合法路径。\n\n合法路径表示方式 :\n\n> $S$ [空格] $P_1$ [空格] $P_2$ [空格] ... [空格] $T$\n\n其中 $P_i$ 是一个二进制压缩的 $01$ 串 表示一个 $n$ 维坐标。\n\n**请不要输出多余的空格**。", "hint": "**「本题使用 Special Judge」**\n\n### Sample1解释\n\n第 $1$ 条路径：$(0,0) \\rightarrow (0,1) \\rightarrow (1,1)$\n\n第 $2$ 条路径：$(0,0) \\rightarrow (1,0) \\rightarrow (1,1)$\n\n二者除了 $S$ 与 $T$ 无交点。\n\n### 数据范围约定\n\n**「本题不采用捆绑测试，数据有梯度」**\n\n对于 100% 的数据 $3 \\le n \\le 60$。\n\n### 后置代码片段\n\n - 二进制压位函数\n\n```cpp\n/**\n * For only cpp11, cpp14, cpp17, cpp20.\n *\n * @param: __s : The binary high-dimension position inputed.\n * @return: Standard output format( U64 ).\n**/\n\nunsigned long long zip( std::string __s ) \n  { unsigned long long __r = 0;\n    for( auto __c : __s ) \n      { ( __r <<= 1ull ) |= ( __c - 0x30 ); }\n    return __r; }\n\n```\n - SPJ代码\n```cpp\n//SPJ\n#include \"testlib.h\"\n#include<bits/stdc++.h>\n\ntypedef unsigned long long ULL;\ntypedef std::vector<std::string> SEQ;\ntypedef std::string STR;\n\nSEQ split( std::string _par, char _sgn )\n  { SEQ _rat = SEQ();\n\tSTR _rem = STR();\n\t\n    for( char __c : _par )\n      { if( __c = _sgn ) _rat.push_back( _rem ), _rem = \"\";\n\t    else _rem += __c; }\n\t\n\tif( _rem != \"\" ) _rat.push_back( _rem );\n\t\n\treturn _rat; }\n\nULL to_ULL( std::string _str ) \n  { ULL _rat = 0;\n\t\n\tfor( char __c : _str )\n\t  { ( _rat *= 10ull ) += (ULL)( __c - '0' ); }\n\t\n\treturn _rat; }\n\nbool isPw2( ULL x )\n  { return !( x & (x - 1ull) ); }\n\nstd::map<ULL, bool> MP;\n\nint main(int argc, char* argv[]) {\n    registerTestlibCmd(argc, argv);\n\t\n\tULL n = inf.readLong();\n\tULL S = 0, T = (1ull << n) - 1ull;\n\tULL N = ouf.readLong();\n\t\n\tif( N != n ) quitf( _wa, \"Count paths wrongly.\" );\n\t\n\touf.readEoln();\n\t\n    while( n -- ) {\n    \tstd::string path = ouf.readLine();\n    \n    \tULL _lst = 0;\n    \t\n    \tfor( auto N : split( path, \" \" ) )\n    \t  { ULL _now = to_ULL( N );\n    \t\tif( _now != S and _now != T and MP[_now] ) \n\t\t\t  { quitf( _wa, \"Paths crossing\" ); }\n    \t    if( !isPw2( _now ^ _lst ) ) \n\t\t\t  { quitf( _wa, \"Wrong path format\" ); }\n    \t    _lst = _now; MP[_now] = true; }\n    \t\n    \tif( _lst != T ) quitf( _wa, \"Wrong path ending\" );\n\t}\n\t\n\tquitf( _ok, \"Accepted\" );\n\t\n    return 0;\n} \n```\n", "locale": "zh-CN", "translations": {"en": {"title": "[Cnoi2020] High Dimension", "background": "> In essence, Gensokyo is high-dimensional.", "description": "Cirno has caught an $n$-dimensional ant. It wants to crawl from $S(0,0,...,0)$ to $T(1,1,...,1)$.\n\nTrapped inside this $1\\times1\\times...\\times1$ grid, the ant can move in each step only to a point adjacent in exactly one coordinate.\n\nNow Cirno wants to test you: what is the maximum number of pairwise vertex-disjoint paths from $S$ to $T$ (excluding $S$ and $T$) that the ant can find?\n\nYou are also required to construct such a set of paths.", "inputFormat": "One line with one integer $n$.", "outputFormat": "The first line contains one integer $t$, the maximum number of paths.\n\nThe next $t$ lines each contain one valid path.\n\nA valid path is written as:\n\n> $S$ [space] $P_1$ [space] $P_2$ [space] ... [space] $T$\n\nwhere $P_i$ is a binary-compressed $01$ string representing an $n$-dimensional coordinate.\n\n**Do not output extra spaces.**", "hint": "**\"This problem uses Special Judge.\"**\n\n### Explanation of Sample 1\n\nPath $1$: $(0,0) \\rightarrow (0,1) \\rightarrow (1,1)$.\n\nPath $2$: $(0,0) \\rightarrow (1,0) \\rightarrow (1,1)$.\n\nThey have no common points except $S$ and $T$.\n\n### Constraints\n\n**\"This problem does not use bundled testdata; the testdata has multiple difficulty levels.\"**\n\nFor 100% of the testdata, $3 \\le n \\le 60$.\n\n### Attached Code Snippets\n\n- Binary packing function\n\n```cpp\n/**\n * For only cpp11, cpp14, cpp17, cpp20.\n *\n * @param: __s : The binary high-dimension position inputed.\n * @return: Standard output format( U64 ).\n**/\n\nunsigned long long zip( std::string __s ) \n  { unsigned long long __r = 0;\n    for( auto __c : __s ) \n      { ( __r <<= 1ull ) |= ( __c - 0x30 ); }\n    return __r; }\n\n```\n\n- SPJ code\n\n```cpp\n//SPJ\n#include \"testlib.h\"\n#include<bits/stdc++.h>\n\ntypedef unsigned long long ULL;\ntypedef std::vector<std::string> SEQ;\ntypedef std::string STR;\n\nSEQ split( std::string _par, char _sgn )\n  { SEQ _rat = SEQ();\n\tSTR _rem = STR();\n\t\n    for( char __c : _par )\n      { if( __c = _sgn ) _rat.push_back( _rem ), _rem = \"\";\n\t    else _rem += __c; }\n\t\n\tif( _rem != \"\" ) _rat.push_back( _rem );\n\t\n\treturn _rat; }\n\nULL to_ULL( std::string _str ) \n  { ULL _rat = 0;\n\t\n\tfor( char __c : _str )\n\t  { ( _rat *= 10ull ) += (ULL)( __c - '0' ); }\n\t\n\treturn _rat; }\n\nbool isPw2( ULL x )\n  { return !( x & (x - 1ull) ); }\n\nstd::map<ULL, bool> MP;\n\nint main(int argc, char* argv[]) {\n    registerTestlibCmd(argc, argv);\n\t\n\tULL n = inf.readLong();\n\tULL S = 0, T = (1ull << n) - 1ull;\n\tULL N = ouf.readLong();\n\t\n\tif( N != n ) quitf( _wa, \"Count paths wrongly.\" );\n\t\n\touf.readEoln();\n\t\n    while( n -- ) {\n    \tstd::string path = ouf.readLine();\n    \n    \tULL _lst = 0;\n    \t\n    \tfor( auto N : split( path, \" \" ) )\n    \t  { ULL _now = to_ULL( N );\n    \t\tif( _now != S and _now != T and MP[_now] ) \n\t\t\t  { quitf( _wa, \"Paths crossing\" ); }\n    \t    if( !isPw2( _now ^ _lst ) ) \n\t\t\t  { quitf( _wa, \"Wrong path format\" ); }\n    \t    _lst = _now; MP[_now] = true; }\n    \t\n    \tif( _lst != T ) quitf( _wa, \"Wrong path ending\" );\n\t}\n\t\n\tquitf( _ok, \"Accepted\" );\n\t\n    return 0;\n} \n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Cnoi2020] 高维", "background": "> 本质上，幻想乡是高维的。", "description": "Cirno 捕获了一只 $n$ 维蚂蚁，它想从 $S(0,0,...,0)$ 爬到 $T(1,1,...,1)$ 。\n\n被封闭在这个 $1\\times1\\times...\\times1$ 的方格中，蚂蚁每一步只能爬向一个坐标相邻的点。\n\n现在 Cirno 想考考你蚂蚁最多能找到多少条从 $S$ 到 $T$ 的路径两两没有交点( 除 $S$, $T$ )。\n\n并要求你构造这样一组路径。", "inputFormat": "一行，一个整数 $n$ 。", "outputFormat": "第一行，一个整数 $t$，表示最多的路径数。\n\n以下 $t$ 行，每行一条合法路径。\n\n合法路径表示方式 :\n\n> $S$ [空格] $P_1$ [空格] $P_2$ [空格] ... [空格] $T$\n\n其中 $P_i$ 是一个二进制压缩的 $01$ 串 表示一个 $n$ 维坐标。\n\n**请不要输出多余的空格**。", "hint": "**「本题使用 Special Judge」**\n\n### Sample1解释\n\n第 $1$ 条路径：$(0,0) \\rightarrow (0,1) \\rightarrow (1,1)$\n\n第 $2$ 条路径：$(0,0) \\rightarrow (1,0) \\rightarrow (1,1)$\n\n二者除了 $S$ 与 $T$ 无交点。\n\n### 数据范围约定\n\n**「本题不采用捆绑测试，数据有梯度」**\n\n对于 100% 的数据 $3 \\le n \\le 60$。\n\n### 后置代码片段\n\n - 二进制压位函数\n\n```cpp\n/**\n * For only cpp11, cpp14, cpp17, cpp20.\n *\n * @param: __s : The binary high-dimension position inputed.\n * @return: Standard output format( U64 ).\n**/\n\nunsigned long long zip( std::string __s ) \n  { unsigned long long __r = 0;\n    for( auto __c : __s ) \n      { ( __r <<= 1ull ) |= ( __c - 0x30 ); }\n    return __r; }\n\n```\n - SPJ代码\n```cpp\n//SPJ\n#include \"testlib.h\"\n#include<bits/stdc++.h>\n\ntypedef unsigned long long ULL;\ntypedef std::vector<std::string> SEQ;\ntypedef std::string STR;\n\nSEQ split( std::string _par, char _sgn )\n  { SEQ _rat = SEQ();\n\tSTR _rem = STR();\n\t\n    for( char __c : _par )\n      { if( __c = _sgn ) _rat.push_back( _rem ), _rem = \"\";\n\t    else _rem += __c; }\n\t\n\tif( _rem != \"\" ) _rat.push_back( _rem );\n\t\n\treturn _rat; }\n\nULL to_ULL( std::string _str ) \n  { ULL _rat = 0;\n\t\n\tfor( char __c : _str )\n\t  { ( _rat *= 10ull ) += (ULL)( __c - '0' ); }\n\t\n\treturn _rat; }\n\nbool isPw2( ULL x )\n  { return !( x & (x - 1ull) ); }\n\nstd::map<ULL, bool> MP;\n\nint main(int argc, char* argv[]) {\n    registerTestlibCmd(argc, argv);\n\t\n\tULL n = inf.readLong();\n\tULL S = 0, T = (1ull << n) - 1ull;\n\tULL N = ouf.readLong();\n\t\n\tif( N != n ) quitf( _wa, \"Count paths wrongly.\" );\n\t\n\touf.readEoln();\n\t\n    while( n -- ) {\n    \tstd::string path = ouf.readLine();\n    \n    \tULL _lst = 0;\n    \t\n    \tfor( auto N : split( path, \" \" ) )\n    \t  { ULL _now = to_ULL( N );\n    \t\tif( _now != S and _now != T and MP[_now] ) \n\t\t\t  { quitf( _wa, \"Paths crossing\" ); }\n    \t    if( !isPw2( _now ^ _lst ) ) \n\t\t\t  { quitf( _wa, \"Wrong path format\" ); }\n    \t    _lst = _now; MP[_now] = true; }\n    \t\n    \tif( _lst != T ) quitf( _wa, \"Wrong path ending\" );\n\t}\n\t\n\tquitf( _ok, \"Accepted\" );\n\t\n    return 0;\n} \n```\n", "locale": "zh-CN"}}}
{"pid": "P6162", "type": "P", "difficulty": 5, "samples": [["10 5", "42525"], ["642 357", "409821948"], ["666666 233333", "791003566"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2020", "组合数学", "容斥原理", "Stirling 数"], "title": "[Cnoi2020] 四角链", "background": "> 四角链图是一种常见的四角网络，属于仙人掌图，通常不会出现在重掺杂单晶尾部的横截面上，呈现的一组其外围是杂质富集条纹的封闭的不是四角环状网络。但因为其复杂的特点，所以常出现在描述社群联系的情景中，例如一些众所周知不可描述的......\n\n作为一个聪明活泼的女孩子，Cirno 厌倦了教科书式冗长乏味的概念，直接给出了四角链图的图示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/38vmj7jc.png)", "description": "事实上四角链可以抽象为 $1\\times (n - 1)$ 网格，每个格子被分别编号为 $1$, $2$, .... , $n-1$。\n\n每个格子可以有两种选择 :\n - 不填数\n - 填入一个小于或等于自己编号的正整数\n\n当一种填数方案 **不存在两个格子填的数相同** 时，Cirno 称之为合法方案。\n\nCirno 想知道有且仅有 $k$ 个格子填入了数字的合法方案数对 $998244353$ 取模后的结果。", "inputFormat": "一行，两个整数 $n$, $k$。", "outputFormat": "一行，一个整数，表示答案。", "hint": "### 数据范围约定\n\n**「本题采用捆绑测试」**\n\n - Subtask1( $20\\%$ ) : $n,k \\le 10$\n - Subtask2( $20\\%$ ) : $n,k \\le 1000$\n - Subtask3( $60\\%$ ) : 无特殊限制\n\n对于 $100\\%$ 的数据 : $0 \\le k < n \\le 10^6$。\n\n### 说明\n\n - 以下文献没有阅读必要。\n\n### Reference\n\n - [1] 中国知网 - 四角链的一些极值问题 - 厦门大学 - 曾艳秋  \nhttp://kns.cnki.net/KCMS/detail/detail.aspx?dbcode=CMFD&filename=2007056552.nh\n - [2] 中国知网 - 关于四角仙人掌图的海明优美性 - 吉林工程技术师范学院教育技术中心;海南大学理工学院 - 李秀芬;潘伟  \nhttp://www.cnki.com.cn/Article/CJFDTotal-CCYD200806009.htm", "locale": "zh-CN", "translations": {"en": {"title": "[Cnoi2020] Quadrilateral Chain", "background": "> A quadrilateral chain graph is a common quadrilateral network. It belongs to cactus graphs. It usually does not appear in the cross-section at the tail of a heavily doped single crystal. What appears is a closed non-quadrilateral ring network whose outer boundary is a set of impurity-enriched stripes. However, because of its complex characteristics, it often appears in scenarios describing community connections, such as some well-known indescribable ones...\n\nAs a smart and lively girl, Cirno got tired of the textbook-style long and boring concepts, and directly gave the diagram of a quadrilateral chain graph.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/38vmj7jc.png)", "description": "In fact, a quadrilateral chain can be abstracted as a $1\\times (n - 1)$ grid. Each cell is numbered $1$, $2$, $\\ldots$, $n-1$, respectively.\n\nEach cell can take one of two choices:\n- Leave it empty.\n- Fill in a positive integer that is less than or equal to its own index.\n\nIf a filling scheme **does not have two cells filled with the same number**, Cirno calls it a valid scheme.\n\nCirno wants to know the number of valid schemes in which exactly $k$ cells are filled with numbers, modulo $998244353$.", "inputFormat": "One line containing two integers $n$, $k$.", "outputFormat": "One line containing one integer, the answer.", "hint": "### Constraints\n\n**This problem uses bundled testdata.**\n\n- Subtask 1 ( $20\\%$ ): $n,k \\le 10$.\n- Subtask 2 ( $20\\%$ ): $n,k \\le 1000$.\n- Subtask 3 ( $60\\%$ ): no special constraints.\n\nFor $100\\%$ of the testdata: $0 \\le k < n \\le 10^6$.\n\n### Notes\n\n- The following references are not necessary to read.\n\n### Reference\n\n- [1] CNKI - Some Extremal Problems of Quadrilateral Chains - Xiamen University - Zeng Yanqiu  \nhttp://kns.cnki.net/KCMS/detail/detail.aspx?dbcode=CMFD&filename=2007056552.nh\n- [2] CNKI - On the Hamming Gracefulness of Quadrilateral Cactus Graphs - Education Technology Center, Jilin Engineering and Technical Teachers College; College of Science and Engineering, Hainan University - Li Xiufen; Pan Wei  \nhttp://www.cnki.com.cn/Article/CJFDTotal-CCYD200806009.htm\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Cnoi2020] 四角链", "background": "> 四角链图是一种常见的四角网络，属于仙人掌图，通常不会出现在重掺杂单晶尾部的横截面上，呈现的一组其外围是杂质富集条纹的封闭的不是四角环状网络。但因为其复杂的特点，所以常出现在描述社群联系的情景中，例如一些众所周知不可描述的......\n\n作为一个聪明活泼的女孩子，Cirno 厌倦了教科书式冗长乏味的概念，直接给出了四角链图的图示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/38vmj7jc.png)", "description": "事实上四角链可以抽象为 $1\\times (n - 1)$ 网格，每个格子被分别编号为 $1$, $2$, .... , $n-1$。\n\n每个格子可以有两种选择 :\n - 不填数\n - 填入一个小于或等于自己编号的正整数\n\n当一种填数方案 **不存在两个格子填的数相同** 时，Cirno 称之为合法方案。\n\nCirno 想知道有且仅有 $k$ 个格子填入了数字的合法方案数对 $998244353$ 取模后的结果。", "inputFormat": "一行，两个整数 $n$, $k$。", "outputFormat": "一行，一个整数，表示答案。", "hint": "### 数据范围约定\n\n**「本题采用捆绑测试」**\n\n - Subtask1( $20\\%$ ) : $n,k \\le 10$\n - Subtask2( $20\\%$ ) : $n,k \\le 1000$\n - Subtask3( $60\\%$ ) : 无特殊限制\n\n对于 $100\\%$ 的数据 : $0 \\le k < n \\le 10^6$。\n\n### 说明\n\n - 以下文献没有阅读必要。\n\n### Reference\n\n - [1] 中国知网 - 四角链的一些极值问题 - 厦门大学 - 曾艳秋  \nhttp://kns.cnki.net/KCMS/detail/detail.aspx?dbcode=CMFD&filename=2007056552.nh\n - [2] 中国知网 - 关于四角仙人掌图的海明优美性 - 吉林工程技术师范学院教育技术中心;海南大学理工学院 - 李秀芬;潘伟  \nhttp://www.cnki.com.cn/Article/CJFDTotal-CCYD200806009.htm", "locale": "zh-CN"}}}
{"pid": "P6163", "type": "P", "difficulty": 5, "samples": [["3\n1 2\n2 3\n3 4", "4"], ["8\n39 42\n53 55\n51 52\n46 47\n52 54\n33 38\n2 7\n32 34", "910"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2020"], "title": "[Cnoi2020] 领域极限", "background": "", "description": "Cirno 有 $n$ 个整数，分别记作 $a_1,a_2,a_3,...,a_n$。\n\n对于每一个数 $a_i$ 都有一个限制二元组 $(l_i,r_i)$。\n\nCirno 想知道：\n\n$$\\min_{\\forall t, a_t \\in [l_t,r_t]}\\big\\{\\sum_{i=1}^{n}\\sum_{j=1}^{n}\\left| a_i - a_j \\right|\\big\\}$$", "inputFormat": "第一行，一个整数 $n$。\n\n以下 $n$ 行，每行一个限制二元组 $(l_i,r_i)$。", "outputFormat": "一行，一个整数，表示答案。", "hint": "### Sample1说明\n\n$(a_1,a_2,a_3)=(2,3,3)$ 时，答案取到最小值。\n\n### 数据范围与约定\n\n**「本题采用捆绑测试」**\n\n - Subtask1( $20\\%$ ) : $n \\le 10$，且 $r_i - l_i \\le 5$；\n - Subtask2( $20\\%$ ) : $n \\le 20$；\n - Subtask3( $20\\%$ ) : $n \\le 10^3$；\n - Subtask4( $40\\%$ ) : $n \\le 10^5$；\n\n对于 $100\\%$ 的数据 : $n \\in (0,10^5]$，$0 \\le l_i \\le r_i \\le 10^9$，答案在 $[0,4 \\times 10^{18}]$ 内。", "locale": "zh-CN", "translations": {"en": {"title": "[Cnoi2020] Domain Limit", "background": "", "description": "Cirno has $n$ integers, denoted as $a_1,a_2,a_3,...,a_n$.\n\nFor each number $a_i$, there is a constraint pair $(l_i,r_i)$.\n\nCirno wants to know:\n\n$$\\min_{\\forall t, a_t \\in [l_t,r_t]}\\big\\{\\sum_{i=1}^{n}\\sum_{j=1}^{n}\\left| a_i - a_j \\right|\\big\\}$$", "inputFormat": "The first line contains an integer $n$.\n\nThe next $n$ lines each contain a constraint pair $(l_i,r_i)$.", "outputFormat": "One line containing an integer, which is the answer.", "hint": "### Sample 1 Explanation\n\nWhen $(a_1,a_2,a_3)=(2,3,3)$, the answer reaches its minimum.\n\n### Constraints and Notes\n\n**\"This problem uses bundled testdata.\"**\n\n- Subtask 1 ( $20\\%$ ): $n \\le 10$, and $r_i - l_i \\le 5$.\n- Subtask 2 ( $20\\%$ ): $n \\le 20$.\n- Subtask 3 ( $20\\%$ ): $n \\le 10^3$.\n- Subtask 4 ( $40\\%$ ): $n \\le 10^5$.\n\nFor $100\\%$ of the testdata: $n \\in (0,10^5]$, $0 \\le l_i \\le r_i \\le 10^9$, and the answer is within $[0,4 \\times 10^{18}]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Cnoi2020] 领域极限", "background": "", "description": "Cirno 有 $n$ 个整数，分别记作 $a_1,a_2,a_3,...,a_n$。\n\n对于每一个数 $a_i$ 都有一个限制二元组 $(l_i,r_i)$。\n\nCirno 想知道：\n\n$$\\min_{\\forall t, a_t \\in [l_t,r_t]}\\big\\{\\sum_{i=1}^{n}\\sum_{j=1}^{n}\\left| a_i - a_j \\right|\\big\\}$$", "inputFormat": "第一行，一个整数 $n$。\n\n以下 $n$ 行，每行一个限制二元组 $(l_i,r_i)$。", "outputFormat": "一行，一个整数，表示答案。", "hint": "### Sample1说明\n\n$(a_1,a_2,a_3)=(2,3,3)$ 时，答案取到最小值。\n\n### 数据范围与约定\n\n**「本题采用捆绑测试」**\n\n - Subtask1( $20\\%$ ) : $n \\le 10$，且 $r_i - l_i \\le 5$；\n - Subtask2( $20\\%$ ) : $n \\le 20$；\n - Subtask3( $20\\%$ ) : $n \\le 10^3$；\n - Subtask4( $40\\%$ ) : $n \\le 10^5$；\n\n对于 $100\\%$ 的数据 : $n \\in (0,10^5]$，$0 \\le l_i \\le r_i \\le 10^9$，答案在 $[0,4 \\times 10^{18}]$ 内。", "locale": "zh-CN"}}}
{"pid": "P6164", "type": "P", "difficulty": 6, "samples": [["3\nA\nQUERY B\nADD BBABBBBAAB\nDEL 1", "0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "模板题"], "title": "【模板】后缀平衡树", "background": "\"后缀平衡树\"这个名字正确性存疑，由于 clj 给的\"重量平衡树\"定义有歧义。\n\n字符串我也不会，所以也没去查证。", "description": "给你一个字符串 `init`，要求你支持三个操作：\n\n1. 在当前字符串的后面插入若干个字符。\n\n2. 在当前字符串的后面删除若干个字符。\n\n3. 询问字符串 $s$ 在当前字符串中出现了几次（作为连续子串）？\n\n你必须在线支持这些操作。\n\n", "inputFormat": "第一行一个数 $q$ 表示操作个数。\n\n第二行一个字符串表示初始字符串 `init`。\n\n接下来 $q$ 行，每行 $2$ 个字符串 `Type Str`。\n \nType是 `ADD` 的话表示在后面插入。\n\nType是 `DEL` 的话表示在后面删除。\n\nType是 `QUERY` 的话表示询问某字符串在当前字符串中出现了几次。\n\n为了体现在线操作，你需要维护一个变量 `mask`，初始值为 $0$。\n\n读入串 `Str` 之后，使用这个过程将之解码成真正询问的串 `TrueStr`。\n\n询问的时候，对 `TrueStr` 询问后输出一行答案 `Result`。\n\n然后 `mask = mask xor Result`\n\n插入的时候，将 `TrueStr` 插到当前字符串后面即可。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/whqt9ff9.png)", "outputFormat": "对每个 $3$ 操作，输出一行一个整数表示答案。", "hint": "数据字符串变化长度以及初始长度和 $ \\le 8 \\times 10^5$，询问次数 $\\le 10^5$，询问总长度 $\\le 3 \\times 10^6$。\n\n字符集为大写字母，注意 `ADD` 和 `QUERY` 操作的字符串都需要解压。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】后缀平衡树", "background": "\"后缀平衡树\"这个名字正确性存疑，由于 clj 给的\"重量平衡树\"定义有歧义。\n\n字符串我也不会，所以也没去查证。", "description": "给你一个字符串 `init`，要求你支持三个操作：\n\n1. 在当前字符串的后面插入若干个字符。\n\n2. 在当前字符串的后面删除若干个字符。\n\n3. 询问字符串 $s$ 在当前字符串中出现了几次（作为连续子串）？\n\n你必须在线支持这些操作。\n\n", "inputFormat": "第一行一个数 $q$ 表示操作个数。\n\n第二行一个字符串表示初始字符串 `init`。\n\n接下来 $q$ 行，每行 $2$ 个字符串 `Type Str`。\n \nType是 `ADD` 的话表示在后面插入。\n\nType是 `DEL` 的话表示在后面删除。\n\nType是 `QUERY` 的话表示询问某字符串在当前字符串中出现了几次。\n\n为了体现在线操作，你需要维护一个变量 `mask`，初始值为 $0$。\n\n读入串 `Str` 之后，使用这个过程将之解码成真正询问的串 `TrueStr`。\n\n询问的时候，对 `TrueStr` 询问后输出一行答案 `Result`。\n\n然后 `mask = mask xor Result`\n\n插入的时候，将 `TrueStr` 插到当前字符串后面即可。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/whqt9ff9.png)", "outputFormat": "对每个 $3$ 操作，输出一行一个整数表示答案。", "hint": "数据字符串变化长度以及初始长度和 $ \\le 8 \\times 10^5$，询问次数 $\\le 10^5$，询问总长度 $\\le 3 \\times 10^6$。\n\n字符集为大写字母，注意 `ADD` 和 `QUERY` 操作的字符串都需要解压。", "locale": "zh-CN"}}}
{"pid": "P6165", "type": "P", "difficulty": 5, "samples": [["100 84\n30 79\n26 63\n96 30\n17 97\n33 63\n73 25\n17 7\n96 48\n80 6\n3 34\n51 48\n33 37\n89 7\n72 65\n51 54\n49 37\n45 72\n50 39\n95 89\n3 55\n25 0\n2 54\n10 91\n59 2\n29 46\n0 40\n95 68\n69 45\n87 68\n49 38\n20 69\n87 15\n35 39\n59 47\n38 62\n91 19\n35 70\n83 19\n28 20\n70 24\n36 55\n75 36\n28 12\n53 29\n12 16\n75 84\n40 85\n27 53\n58 62\n88 84\n44 27\n76 24\n58 22\n8 44\n94 15\n14 94\n5 83\n31 85\n90 5\n88 42\n81 47\n76 67\n82 80\n31 93\n14 74\n42 98\n99 82\n71 8\n98 92\n18 22\n81 52\n99 23\n41 67\n74 1\n93 56\n4 52\n1 86\n92 60\n56 66\n18 61\n16 57\n43 23\n4 64\n-1\n", "100\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2012", "IOI", "O2优化"], "title": "[IOI 2012] rings", "background": "", "description": "在李奥纳多的文献  \"Codex  Atlanticus\"  中描述了一种早期而复杂的降落伞。李奥纳多的降落伞是一个由布料缝制而成的金字塔型木头结构。\n\n**串接的圆环**\n\n空中自由落体玩家 Adrain Nicholas （爱准尼古拉斯） 在五百年后测试了李奥纳多的设计。在这个测试中，一个现代的轻量结构将李奥纳多的降落伞使用到人体。我们想要使用串接的圆环，这些圆环为缝制的布料提供了钩子。圆环可以很简单地串接在一起，而且每一个圆环可以打开或关闭。串接的圆环可以构成一种特殊的型态叫做\"链\"（chain）。所谓的\"链\"指的是一序列串接的圆环，每个圆环可以串接（最多两个）邻居。但是这个序列必须有个起头与结束（这两个圆环只能串接另外一个圆环）。如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w6zr6nns.png)\n\n其他种串接型态当然是可能的，因为一个圆环可以串接到3个或更多的圆环。我们说一个圆环是\"关键的\"如果我们将它打开并移除这个圆环，其他的圆环会形成互无交集的链的集合(或者是没有任何的圆环留下)。\n\n**例子**\n\n请参考下图中的 $7$ 个圆环，其编号由 $0$ 到 $6$。在这个例子中有两个\"关键\"圆环。其中一个关键圆环是编号 $2$ 的圆环。移除此圆环，剩下的圆环形成三条链 $[1]$, $[0,5,3,4]$ 以及 $[6]$。另外一个关键圆环是编号 $3$ 的圆环，移除此圆环，剩下的圆环形成三条链 $[1,2,0,5]$,$[4]$，以及 $[6]$。如果我们尝试着移除其他的圆环，我们无法获得互无交集的链集合。举例来说，移除编号 $5$ 的圆环之后，虽然可以获得 $[6]$ 这样的一条链，但是 $0,1,2,3$ 以及 $4$ 并没有形成一条链。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wk40d8go.png)\n\n**任务**\n\n给定一个串接的圆环型态，你的程序必须计算其关键圆环的个数。\n", "inputFormat": "- 第一行，有 $2$ 个整数 $N$，$L$。$N$ 代表有 $N$ 个互无交集的圆环，其编号从 $0$ 到 $N-1$ 作为初始的圆环形态，$L$ 表示操作的个数。\n\n- 第 $2$ 到 $L+1$ 行，每行包含 $1$ 或 $2$ 个整数，表示一个操作。具体如下：\n\n1.`A B` 表示将编号 $A$ 以及编号 $B$ 的圆环串联在一起。保证 $A$ 和 $B$ 不相同。\n\n2.`-1` 输出一行，目前串接圆环的组态中关键圆环的个数。", "outputFormat": "对于每项 $2$ 操作，输出一行，表示当时串接圆环的组态中关键圆环的个数。", "hint": "对于 $100\\%$ 的数据，$1 \\le N,L \\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2012] rings", "background": "", "description": "在李奥纳多的文献  \"Codex  Atlanticus\"  中描述了一种早期而复杂的降落伞。李奥纳多的降落伞是一个由布料缝制而成的金字塔型木头结构。\n\n**串接的圆环**\n\n空中自由落体玩家 Adrain Nicholas （爱准尼古拉斯） 在五百年后测试了李奥纳多的设计。在这个测试中，一个现代的轻量结构将李奥纳多的降落伞使用到人体。我们想要使用串接的圆环，这些圆环为缝制的布料提供了钩子。圆环可以很简单地串接在一起，而且每一个圆环可以打开或关闭。串接的圆环可以构成一种特殊的型态叫做\"链\"（chain）。所谓的\"链\"指的是一序列串接的圆环，每个圆环可以串接（最多两个）邻居。但是这个序列必须有个起头与结束（这两个圆环只能串接另外一个圆环）。如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w6zr6nns.png)\n\n其他种串接型态当然是可能的，因为一个圆环可以串接到3个或更多的圆环。我们说一个圆环是\"关键的\"如果我们将它打开并移除这个圆环，其他的圆环会形成互无交集的链的集合(或者是没有任何的圆环留下)。\n\n**例子**\n\n请参考下图中的 $7$ 个圆环，其编号由 $0$ 到 $6$。在这个例子中有两个\"关键\"圆环。其中一个关键圆环是编号 $2$ 的圆环。移除此圆环，剩下的圆环形成三条链 $[1]$, $[0,5,3,4]$ 以及 $[6]$。另外一个关键圆环是编号 $3$ 的圆环，移除此圆环，剩下的圆环形成三条链 $[1,2,0,5]$,$[4]$，以及 $[6]$。如果我们尝试着移除其他的圆环，我们无法获得互无交集的链集合。举例来说，移除编号 $5$ 的圆环之后，虽然可以获得 $[6]$ 这样的一条链，但是 $0,1,2,3$ 以及 $4$ 并没有形成一条链。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wk40d8go.png)\n\n**任务**\n\n给定一个串接的圆环型态，你的程序必须计算其关键圆环的个数。\n", "inputFormat": "- 第一行，有 $2$ 个整数 $N$，$L$。$N$ 代表有 $N$ 个互无交集的圆环，其编号从 $0$ 到 $N-1$ 作为初始的圆环形态，$L$ 表示操作的个数。\n\n- 第 $2$ 到 $L+1$ 行，每行包含 $1$ 或 $2$ 个整数，表示一个操作。具体如下：\n\n1.`A B` 表示将编号 $A$ 以及编号 $B$ 的圆环串联在一起。保证 $A$ 和 $B$ 不相同。\n\n2.`-1` 输出一行，目前串接圆环的组态中关键圆环的个数。", "outputFormat": "对于每项 $2$ 操作，输出一行，表示当时串接圆环的组态中关键圆环的个数。", "hint": "对于 $100\\%$ 的数据，$1 \\le N,L \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P6166", "type": "P", "difficulty": 5, "samples": [["10\nT c\nT z\nT u\nT a\nT i\nT h\nT f\nT z\nP 3\nP 0\n", "a\nc\n"], ["98\nT u\nT g\nT p\nT h\nT w\nP 3\nP 0\nT d\nT d\nT r\nT v\nT z\nT w\nT h\nP 0\nT d\nT v\nT b\nP 9\nT n\nT e\nP 0\nT s\nT i\nT a\nP 6\nT b\nT n\nT m\nT t\nT m\nT g\nT y\nT g\nP 0\nT m\nP 18\nT r\nP 17\nT w\nT w\nT o\nT m\nT m\nP 0\nT q\nP 5\nT t\nP 27\nP 34\nT p\nT f\nT h\nT j\nT f\nT l\nP 3\nT f\nT q\nT h\nP 17\nT w\nT d\nT p\nT z\nP 0\nT m\nP 10\nT o\nP 5\nP 18\nP 7\nT q\nT z\nP 2\nT u\nP 10\nT e\nP 6\nT s\nT t\nP 24\nT s\nP 0\nT t\nT c\nP 4\nT j\nT o\nP 5\nT i\nP 11\nT a\nT t\nP 58\nP 51\nP 64\nP 12\n", "h\nu\nu\nz\nu\nd\nu\ni\ns\nu\nd\ng\nm\nh\ns\nu\nw\nd\ni\nr\np\nw\nd\nm\nu\nw\nd\nh\ns\no\na\nd\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2012", "倍增", "IOI", "可持久化线段树", "可持久化"], "title": "[IOI 2012] scrivener", "background": "", "description": "有些人说李奥纳多是一个对于 Johannes  Gutenberg 的崇拜者，Johannes 是一个发明活字印刷的德国铁匠，为了表达尊敬，李奥纳多设计了一台机器被称为小龙虾代书，那是一个非常简单的打字设备。这机器就像一部简单的现代打字机，但只能接受两个指令。一个指令是 输出一个字符，另一个指令是取消最近的指令。小龙虾代书的最大特点就是拥有这个功能强大的取消指令。因为一个取消指令本身也是一个指令，所以也可以被取消。\n\n**说明**\n\n你的任务是作出此小龙虾代书的程序，一开始并无输出任何文字，然后开始接受使用者输入的一连串指令，并可查询目前输出文字中的特定位置的字符。详细说明如下:\n\n- `TypeLetter(L)` —附加一个小写字母L在输出文字的最后，$L$ 可以是 $a,b,\\cdots, z$。\n\n- `UndoCommands(U)` — 取消之前的 $U$ 个指令，$U$ 是一个正整数。\n\n- `GetLetter(P)` — 回传在输出文字中位置为 $P$ 的字符，$P$ 是一个非负整数。 输出文字中的第一个字符的位置为 $0$。 （这个查询并不是一个指令，因此会被取消指令忽略。）\n\n三种操作可以依照任何顺序被呼叫 $0$ 次或多次以上。\n\n指令 `UndoCommands(U)` 会依照原本执行的相反顺序来取消前面 $U$ 个指令: 如果被取消的指令是 `TypeLetter(L)`，就会从输出文字最后面移除字母 $L$。如果被取消的指令是 `UndoCommands(X)`，那么将会依照原本执行的顺序重新执行之前被取消的 $X$ 个指令。\n\n**范例**\n\n我们列出一连串可能的指令，以及每次执行指令后的输出文字。\n\n| 操作 | 回传 | 输出文字 |\n| :-----------: | :-----------: | :-----------: |\n| `TypeLetter(a)` |  | `a` |\n| `TypeLetter(b)` |  | `ab` |\n| `GetLetter(1)` | `b` | `ab` |\n| `TypeLetter(d)` |  | `abd` |\n| `UndoCommands(2)` |  | `a` |\n| `UndoCommands(1)` |  | `abd` |\n| `GetLetter(2)` | `d` | `abd` |\n|  `TypeLetter(e)`|  | `abde` |\n| `UndoCommands(1)` |  | `abd` |\n| `UndoCommands(5)` |  | `ab` |\n|`TypeLetter(c)`  |  | `abc` |\n| `GetLetter(2)` | `c` | `abc` |\n| `UndoCommands(2)` |  | `abd` |\n| `GetLetter(2)` | `d` | `abd` |\n", "inputFormat": "- 第 $1$ 行，一个正整数 $N$，表示操作的个数。\n\n- 第 $2$ 到 $N+1$ 行，每行开始有一个大写字母参数。\n\n1. `T` 表示一个 `TypeLetter` 指令，后面接着一个空白和一个小写字母参数。\n\n2. `U` 表示一个 `UndoCommands` 指令，后面接着一个空白和一个整数参数。\n\n3. `P` 表示一个 `GetLetter` 指令，后面接着一个空白和一个整数参数。", "outputFormat": "对于每项 `GetLetter` 操作，输出一行，一个回传的字符。", "hint": "对于 $100\\%$ 的数据，$1 \\le N \\le 10^6$。参数 $U$ 保证不会超过前面已经输入的指令数目，而且参数 $P$ 一定小于输出文字的长度（也就是输出文字的字母数）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2012] scrivener", "background": "", "description": "有些人说李奥纳多是一个对于 Johannes  Gutenberg 的崇拜者，Johannes 是一个发明活字印刷的德国铁匠，为了表达尊敬，李奥纳多设计了一台机器被称为小龙虾代书，那是一个非常简单的打字设备。这机器就像一部简单的现代打字机，但只能接受两个指令。一个指令是 输出一个字符，另一个指令是取消最近的指令。小龙虾代书的最大特点就是拥有这个功能强大的取消指令。因为一个取消指令本身也是一个指令，所以也可以被取消。\n\n**说明**\n\n你的任务是作出此小龙虾代书的程序，一开始并无输出任何文字，然后开始接受使用者输入的一连串指令，并可查询目前输出文字中的特定位置的字符。详细说明如下:\n\n- `TypeLetter(L)` —附加一个小写字母L在输出文字的最后，$L$ 可以是 $a,b,\\cdots, z$。\n\n- `UndoCommands(U)` — 取消之前的 $U$ 个指令，$U$ 是一个正整数。\n\n- `GetLetter(P)` — 回传在输出文字中位置为 $P$ 的字符，$P$ 是一个非负整数。 输出文字中的第一个字符的位置为 $0$。 （这个查询并不是一个指令，因此会被取消指令忽略。）\n\n三种操作可以依照任何顺序被呼叫 $0$ 次或多次以上。\n\n指令 `UndoCommands(U)` 会依照原本执行的相反顺序来取消前面 $U$ 个指令: 如果被取消的指令是 `TypeLetter(L)`，就会从输出文字最后面移除字母 $L$。如果被取消的指令是 `UndoCommands(X)`，那么将会依照原本执行的顺序重新执行之前被取消的 $X$ 个指令。\n\n**范例**\n\n我们列出一连串可能的指令，以及每次执行指令后的输出文字。\n\n| 操作 | 回传 | 输出文字 |\n| :-----------: | :-----------: | :-----------: |\n| `TypeLetter(a)` |  | `a` |\n| `TypeLetter(b)` |  | `ab` |\n| `GetLetter(1)` | `b` | `ab` |\n| `TypeLetter(d)` |  | `abd` |\n| `UndoCommands(2)` |  | `a` |\n| `UndoCommands(1)` |  | `abd` |\n| `GetLetter(2)` | `d` | `abd` |\n|  `TypeLetter(e)`|  | `abde` |\n| `UndoCommands(1)` |  | `abd` |\n| `UndoCommands(5)` |  | `ab` |\n|`TypeLetter(c)`  |  | `abc` |\n| `GetLetter(2)` | `c` | `abc` |\n| `UndoCommands(2)` |  | `abd` |\n| `GetLetter(2)` | `d` | `abd` |\n", "inputFormat": "- 第 $1$ 行，一个正整数 $N$，表示操作的个数。\n\n- 第 $2$ 到 $N+1$ 行，每行开始有一个大写字母参数。\n\n1. `T` 表示一个 `TypeLetter` 指令，后面接着一个空白和一个小写字母参数。\n\n2. `U` 表示一个 `UndoCommands` 指令，后面接着一个空白和一个整数参数。\n\n3. `P` 表示一个 `GetLetter` 指令，后面接着一个空白和一个整数参数。", "outputFormat": "对于每项 `GetLetter` 操作，输出一行，一个回传的字符。", "hint": "对于 $100\\%$ 的数据，$1 \\le N \\le 10^6$。参数 $U$ 保证不会超过前面已经输入的指令数目，而且参数 $P$ 一定小于输出文字的长度（也就是输出文字的字母数）。", "locale": "zh-CN"}}}
{"pid": "P6167", "type": "P", "difficulty": 7, "samples": [["4 10\n10 20 20\n0 40 0 30\n", "80\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2016", "IOI", "Special Judge", "O2优化"], "title": "[IOI 2016] shortcut", "background": "", "description": "Pavel 有一个非常简单的铁路玩具。 它有一条含有 $n$ 个车站的主干线并且连续编号为 $0$ 到 $n-1$。车站 $0$ 和车站 $n-1$ 就在这条主干线的两端。其中车站 $i$ 和车站 $i+1$ 之间的距离为 $l_i$ 厘米（$ 0 \\le i<n-1$）。\n\n除了这条主干线之外，这个铁路也许会有些支线。每条支线都是由主干线中的一个车站和主干线 外的一个新车站之间的一条新铁路构成（这些新的车站不会被编号）。在主干线中的一个车站最多只能有一条支线。以主干线中的车站 $i$ 为起点的支线的长度为 $d_i$ 厘米。我们用 $d_i=0$ 来表示车站 $i$ 没有支线。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h21s6cjy.png)\n\nPavel 现正规划一条快捷方式：一条在主干线中两个不相同的车站之间（它们可能相邻）的快速干线。这条快速干线无论是连接哪两个车站，它的长度都将会恰好是 $c$ 厘米。\n\n铁路中的每一段，包括那条新的快速干线，都能够双向行驶。任意两个车站的距离就是它们之间沿着铁路由一个车站到另一个车站之间最短路径的长度。所有车站组合中最大的距离就叫做整个铁路网络的直径。换句话说，存在一个最小值 $t$ 使任意两个车站之间的距离都不会超过 $t$。\n\nPavel 就是想建造一条快速干线，使得有了这条快速干线后新的铁路网络的直径能达到最小值。\n\n### 样例一\n\n```\n4 10\n10 20 20\n0 40 0 30\n```\n\n最优解是在车站 $1$ 和车站 $3$ 之间建造一条快速干线，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a31c6opk.png)\n\n这个新铁路网络的直径是 $80$ 厘米，所以应该输出数值 $80$。\n\n### 样例二\n\n```\n9 30\n10 10 10 10 10 10 10 10\n20 0 30 0 0 40 0 40 0\n```\n\n最优解是连接车站 $2$ 和车站 $7$，这个解的直径是 $110$。\n\n### 样例三\n\n```\n4 1\n2 2 2\n1 10 10 1\n```\n最优解是连接车站 $1$ 和车站 $2$，这样直径将被缩短到 $21$。\n\n### 样例四\n\n```\n3 3\n1 1 \n1 1 1\n```\n在任意两个车站中建立长度为 $3$ 的快速干线都不会改进整个铁路网络的直径，因此其直径仍为初始值 $4$。\n\n", "inputFormat": "- 第一行：两个整数 $n$ 和 $c$，\n\n- 第二行：整数 $l_0,l_1,\\cdots,l_{n-2}$，\n\n- 第三行：整数 $d_0,d_1,\\cdots,d_{n-1}$。", "outputFormat": "共一行，加入新快速干线后铁路网络直径的最小可能值。", "hint": "对于 $100\\%$ 的数据，$2\\le n\\le 10^6$，$1\\le l_i\\le 10^9$，$0\\le d_i\\le 10^9$，$1\\le c\\le 10^9$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2016] shortcut", "background": "", "description": "Pavel 有一个非常简单的铁路玩具。 它有一条含有 $n$ 个车站的主干线并且连续编号为 $0$ 到 $n-1$。车站 $0$ 和车站 $n-1$ 就在这条主干线的两端。其中车站 $i$ 和车站 $i+1$ 之间的距离为 $l_i$ 厘米（$ 0 \\le i<n-1$）。\n\n除了这条主干线之外，这个铁路也许会有些支线。每条支线都是由主干线中的一个车站和主干线 外的一个新车站之间的一条新铁路构成（这些新的车站不会被编号）。在主干线中的一个车站最多只能有一条支线。以主干线中的车站 $i$ 为起点的支线的长度为 $d_i$ 厘米。我们用 $d_i=0$ 来表示车站 $i$ 没有支线。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h21s6cjy.png)\n\nPavel 现正规划一条快捷方式：一条在主干线中两个不相同的车站之间（它们可能相邻）的快速干线。这条快速干线无论是连接哪两个车站，它的长度都将会恰好是 $c$ 厘米。\n\n铁路中的每一段，包括那条新的快速干线，都能够双向行驶。任意两个车站的距离就是它们之间沿着铁路由一个车站到另一个车站之间最短路径的长度。所有车站组合中最大的距离就叫做整个铁路网络的直径。换句话说，存在一个最小值 $t$ 使任意两个车站之间的距离都不会超过 $t$。\n\nPavel 就是想建造一条快速干线，使得有了这条快速干线后新的铁路网络的直径能达到最小值。\n\n### 样例一\n\n```\n4 10\n10 20 20\n0 40 0 30\n```\n\n最优解是在车站 $1$ 和车站 $3$ 之间建造一条快速干线，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a31c6opk.png)\n\n这个新铁路网络的直径是 $80$ 厘米，所以应该输出数值 $80$。\n\n### 样例二\n\n```\n9 30\n10 10 10 10 10 10 10 10\n20 0 30 0 0 40 0 40 0\n```\n\n最优解是连接车站 $2$ 和车站 $7$，这个解的直径是 $110$。\n\n### 样例三\n\n```\n4 1\n2 2 2\n1 10 10 1\n```\n最优解是连接车站 $1$ 和车站 $2$，这样直径将被缩短到 $21$。\n\n### 样例四\n\n```\n3 3\n1 1 \n1 1 1\n```\n在任意两个车站中建立长度为 $3$ 的快速干线都不会改进整个铁路网络的直径，因此其直径仍为初始值 $4$。\n\n", "inputFormat": "- 第一行：两个整数 $n$ 和 $c$，\n\n- 第二行：整数 $l_0,l_1,\\cdots,l_{n-2}$，\n\n- 第三行：整数 $d_0,d_1,\\cdots,d_{n-1}$。", "outputFormat": "共一行，加入新快速干线后铁路网络直径的最小可能值。", "hint": "对于 $100\\%$ 的数据，$2\\le n\\le 10^6$，$1\\le l_i\\le 10^9$，$0\\le d_i\\le 10^9$，$1\\le c\\le 10^9$。\n\n", "locale": "zh-CN"}}}
{"pid": "P6168", "type": "P", "difficulty": 7, "samples": [["4 1\n1 7\n4 3\n5 8\n6 6\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "IOI", "Special Judge"], "title": "[IOI 2016] railroad", "background": null, "description": "Anna 在一个游乐园工作。她负责建造一个新的过山车铁路。她已经设计了影响过山车速度的 $n$ 个特殊的路段（方便起见标记为 $0$ 到 $n-1$）。现在 Anna 必须要把这些特殊的路段放在一起并提出一个过山车的最后设计。为了简化问题，你可以假设过山车的长度为零。\n\n对于 $0$ 和 $n-1$ 之间的每个 $i$，这个特殊的路段 $i$ 具有如下两个性质：\n\n- 当进入这个路段时，有一个速度限制：过山车的速度必须小于或等于 $s_i$ $\\text{km/h}$（每小时千米）。\n\n- 当离开这个路段时，过山车的速度刚好是 $t_i$ $\\text{km/h}$，不管过山车进入该路段时的速度如何。\n\n最后完成的过山车设计是一个以某种顺序包含这 $n$ 个特殊路段的单一铁路线。这 $n$ 个路段中的每一个应当被使用刚好一次。连续的路段之间用铁轨来连接。Anna 应该选择这 $n$ 个路段的顺序，然后确定每段铁轨的长度。铁轨的长度以米来衡量，可以是任意的非负整数（可以为零）。\n\n两个特殊路段之间的每 $1$ 米铁轨可以将过山车的速度减慢 $1$ $\\text{km/h}$。在这个过山车铁路的起点，过山车按照 Anna 选择的顺序进入第一个特殊路段时的速度是 $1$ $\\text{km/h}$。\n\n最后的设计还必须满足以下要求：\n\n- 过山车在进入这些特殊路段时不能违反任一个速度限制。\n\n- 过山车的速度在任意时刻为正。\n\n你的任务是找出这些路段之间铁轨的最小可能总长度（这些路段之间铁轨总长度的最小值）。如果 $m=0$ 你只需要检查是否存在一个有效的过山车设计，使得每段铁轨的长度为零。\n\n**举例**\n\n```\n4 1\n1 7\n4 3\n5 8\n6 6\n```\n在这个样例中有 $4$ 个特殊的路段。最好的解是按照 $0,3,1,2$ 的顺序构造，连接这些路段的铁轨长度分别是 $1,2,0$。下面给出过山车沿铁路铁轨的行驶方式：\n\n- 最初过山车的速度是 $1$ km/h。\n\n- 过山车由进入 $0$ 号路段开始行进。\n\n- 过山车以 $7$ $\\text{km/h}$ 的速度离开 00 号路段。\n\n- 然后有一段长度为 $1$ $\\text{m}$ 的铁轨。过山车在到达这段铁轨的末端时速度为 $6$ $\\text{km/h}$。\n\n- 过山车以 $6$ $\\text{km/h}$ 的速度进入 $3$ 号路段并以相同的速度离开该路段。\n\n- 在离开 $3$ 号路段后，过山车走过一段 $2$ $\\text{m}$ 长的铁轨。速度降至 $4$ $\\text{km/h}$。\n\n- 过山车以 $4$ $\\text{km/h}$ 的速度进入 $1$ 号路段，并且以 $3$ $\\text{km/h}$ 的速度离开该路段。\n\n- 离开 $1$ 号路段后，过山车立即进入 $2$ 号路段。\n\n- 过山车离开 $2$ 号路段。其最终速度是 $8$ $\\text{km/h}$。\n\n路段之间的铁轨总长度：$1+2+0=3$。", "inputFormat": "- 第一行：两个整数 $n$ 和 $m$，其中 $m=0$ 表示当答案不为 $0$ 时，你可以返回任意正整数，$m=1$ 表示你需要返回正确答案。\n\n- 接下来 $n$ 行：第 $i$ 行的两个整数表示 $s_{i-1}$ 和 $t_{i-1}$。", "outputFormat": "共一行，所有铁轨的最小可能总长度。（当 $m=0$ 时，如果存在一个有效的过山车设计使得每段铁轨的长度均为零，则函数返回零，如果上述设计不存在，则输出任意的正整数）。", "hint": "对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times {10}^5$，$ 1 \\le s_i \\le 10^9$，$1 \\le t_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2016] railroad", "background": null, "description": "Anna 在一个游乐园工作。她负责建造一个新的过山车铁路。她已经设计了影响过山车速度的 $n$ 个特殊的路段（方便起见标记为 $0$ 到 $n-1$）。现在 Anna 必须要把这些特殊的路段放在一起并提出一个过山车的最后设计。为了简化问题，你可以假设过山车的长度为零。\n\n对于 $0$ 和 $n-1$ 之间的每个 $i$，这个特殊的路段 $i$ 具有如下两个性质：\n\n- 当进入这个路段时，有一个速度限制：过山车的速度必须小于或等于 $s_i$ $\\text{km/h}$（每小时千米）。\n\n- 当离开这个路段时，过山车的速度刚好是 $t_i$ $\\text{km/h}$，不管过山车进入该路段时的速度如何。\n\n最后完成的过山车设计是一个以某种顺序包含这 $n$ 个特殊路段的单一铁路线。这 $n$ 个路段中的每一个应当被使用刚好一次。连续的路段之间用铁轨来连接。Anna 应该选择这 $n$ 个路段的顺序，然后确定每段铁轨的长度。铁轨的长度以米来衡量，可以是任意的非负整数（可以为零）。\n\n两个特殊路段之间的每 $1$ 米铁轨可以将过山车的速度减慢 $1$ $\\text{km/h}$。在这个过山车铁路的起点，过山车按照 Anna 选择的顺序进入第一个特殊路段时的速度是 $1$ $\\text{km/h}$。\n\n最后的设计还必须满足以下要求：\n\n- 过山车在进入这些特殊路段时不能违反任一个速度限制。\n\n- 过山车的速度在任意时刻为正。\n\n你的任务是找出这些路段之间铁轨的最小可能总长度（这些路段之间铁轨总长度的最小值）。如果 $m=0$ 你只需要检查是否存在一个有效的过山车设计，使得每段铁轨的长度为零。\n\n**举例**\n\n```\n4 1\n1 7\n4 3\n5 8\n6 6\n```\n在这个样例中有 $4$ 个特殊的路段。最好的解是按照 $0,3,1,2$ 的顺序构造，连接这些路段的铁轨长度分别是 $1,2,0$。下面给出过山车沿铁路铁轨的行驶方式：\n\n- 最初过山车的速度是 $1$ km/h。\n\n- 过山车由进入 $0$ 号路段开始行进。\n\n- 过山车以 $7$ $\\text{km/h}$ 的速度离开 00 号路段。\n\n- 然后有一段长度为 $1$ $\\text{m}$ 的铁轨。过山车在到达这段铁轨的末端时速度为 $6$ $\\text{km/h}$。\n\n- 过山车以 $6$ $\\text{km/h}$ 的速度进入 $3$ 号路段并以相同的速度离开该路段。\n\n- 在离开 $3$ 号路段后，过山车走过一段 $2$ $\\text{m}$ 长的铁轨。速度降至 $4$ $\\text{km/h}$。\n\n- 过山车以 $4$ $\\text{km/h}$ 的速度进入 $1$ 号路段，并且以 $3$ $\\text{km/h}$ 的速度离开该路段。\n\n- 离开 $1$ 号路段后，过山车立即进入 $2$ 号路段。\n\n- 过山车离开 $2$ 号路段。其最终速度是 $8$ $\\text{km/h}$。\n\n路段之间的铁轨总长度：$1+2+0=3$。", "inputFormat": "- 第一行：两个整数 $n$ 和 $m$，其中 $m=0$ 表示当答案不为 $0$ 时，你可以返回任意正整数，$m=1$ 表示你需要返回正确答案。\n\n- 接下来 $n$ 行：第 $i$ 行的两个整数表示 $s_{i-1}$ 和 $t_{i-1}$。", "outputFormat": "共一行，所有铁轨的最小可能总长度。（当 $m=0$ 时，如果存在一个有效的过山车设计使得每段铁轨的长度均为零，则函数返回零，如果上述设计不存在，则输出任意的正整数）。", "hint": "对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times {10}^5$，$ 1 \\le s_i \\le 10^9$，$1 \\le t_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P6169", "type": "P", "difficulty": 5, "samples": [["1 10 12\n9\n", "0\n"], ["2 5 10\n4 2", "2\n0 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2016", "IOI", "Special Judge", "排序", "前缀和", "双指针 two-pointer"], "title": "[IOI 2016] molecules", "background": "", "description": "彼得在一家公司工作，这家公司已经制造了一台检测分子的机器。每个分子的重量都是正整数。这台机器的检测范围是 $[l,u]$，这里 $l$ 和 $u$ 都是正整数。这台机器能够检测一个分子集合当且仅当这个集合包含了一个子集，这个子集的分子的重量属于机器的检测范围。\n\n考虑 $n$ 个分子，重量记为 $w_0,\\cdots,w_{n-1}$。如果存在一个下标的集合（并且该集合中的下标都不相同）$I=\\{i_1,\\cdots,i_m\\}$ 使得 $l\\le w_{i_1}+\\cdots+w_{i_m}\\le u$，那么检测就会成功。\n\n由于机器的细节，$l$ 和 $u$ 之间的差距要保证会大于等于最重分子和最轻分子之间的差距，即 $u-l \\ge w_{max}-w_{min}$，其中 $w_{max}=\\max(w_0,\\cdots,w_{n-1})$，$w_{min}=\\min(w_0,\\cdots,w_{n-1})$\n\n你的任务是写一个程序，该程序能找到一个子集，使得该子集的总重量属于检测范围，或者判定没有这样的子集存在。\n\n\n### 样例一 \n \n ```\n  4 15 17\n  6 8 8 7\n ```\n\n这个例子当中，我们有四个分子，重量分别是 $6,8,8$ 和 $7$。这台机器可以检测子集总重量在 $15$ 到 $17$ 之间（包含 $15$ 和 $17$）的子集。注意，$17-15 \\ge 8-6$。分子 $1$ 和分子 $3$ 的重量之和为 $w_1+w_3=8+7=15$, 所以应该输出\n```\n2\n1 3\n```\n其他可能正确的答案有 \n```\n2 \n1 2\n```\n（$w_1+w_2=8+8=16$）\n\n和 \n```\n2\n2 3\n```\n（$w_2+w_3=8+7=15$）。\n\n### 样例二 \n\n```\n4 14 15\n5 5 6 6\n```\n\n这个例子当中，我们有四个分子，重量分别为 $5,5,6$ 和 $6$，我们要寻找一个子集，其总重量介于 $14$ 和 $15$ 之间（包含 $14$ 和 $15$）。请注意，$15-14 \\ge 6-5$。因为不存在总重量介于 $14$ 和 $15$ 之间的子集，所以输出 `0`。", "inputFormat": "- 第一行：整数 $n,l$ 和 $u$。\n\n- 第二行：$n$ 个整数：$w_0,\\cdots,w_{n-1}$。", "outputFormat": "如果有满足条件的子集：\n\n- 第一行，输出该子集大小 $x$。\n\n- 第二行，$x$ 个整数，符合要求的子集中的分子的下标。\n\n如果没有，输出 `0`。", "hint": "对于 $100\\%$ 的数据，$n \\le 2 \\times 10^5$，$w_i \\le \t2^{31}-1$，$l,u \\le 2^{31}-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2016] molecules", "background": "", "description": "彼得在一家公司工作，这家公司已经制造了一台检测分子的机器。每个分子的重量都是正整数。这台机器的检测范围是 $[l,u]$，这里 $l$ 和 $u$ 都是正整数。这台机器能够检测一个分子集合当且仅当这个集合包含了一个子集，这个子集的分子的重量属于机器的检测范围。\n\n考虑 $n$ 个分子，重量记为 $w_0,\\cdots,w_{n-1}$。如果存在一个下标的集合（并且该集合中的下标都不相同）$I=\\{i_1,\\cdots,i_m\\}$ 使得 $l\\le w_{i_1}+\\cdots+w_{i_m}\\le u$，那么检测就会成功。\n\n由于机器的细节，$l$ 和 $u$ 之间的差距要保证会大于等于最重分子和最轻分子之间的差距，即 $u-l \\ge w_{max}-w_{min}$，其中 $w_{max}=\\max(w_0,\\cdots,w_{n-1})$，$w_{min}=\\min(w_0,\\cdots,w_{n-1})$\n\n你的任务是写一个程序，该程序能找到一个子集，使得该子集的总重量属于检测范围，或者判定没有这样的子集存在。\n\n\n### 样例一 \n \n ```\n  4 15 17\n  6 8 8 7\n ```\n\n这个例子当中，我们有四个分子，重量分别是 $6,8,8$ 和 $7$。这台机器可以检测子集总重量在 $15$ 到 $17$ 之间（包含 $15$ 和 $17$）的子集。注意，$17-15 \\ge 8-6$。分子 $1$ 和分子 $3$ 的重量之和为 $w_1+w_3=8+7=15$, 所以应该输出\n```\n2\n1 3\n```\n其他可能正确的答案有 \n```\n2 \n1 2\n```\n（$w_1+w_2=8+8=16$）\n\n和 \n```\n2\n2 3\n```\n（$w_2+w_3=8+7=15$）。\n\n### 样例二 \n\n```\n4 14 15\n5 5 6 6\n```\n\n这个例子当中，我们有四个分子，重量分别为 $5,5,6$ 和 $6$，我们要寻找一个子集，其总重量介于 $14$ 和 $15$ 之间（包含 $14$ 和 $15$）。请注意，$15-14 \\ge 6-5$。因为不存在总重量介于 $14$ 和 $15$ 之间的子集，所以输出 `0`。", "inputFormat": "- 第一行：整数 $n,l$ 和 $u$。\n\n- 第二行：$n$ 个整数：$w_0,\\cdots,w_{n-1}$。", "outputFormat": "如果有满足条件的子集：\n\n- 第一行，输出该子集大小 $x$。\n\n- 第二行，$x$ 个整数，符合要求的子集中的分子的下标。\n\n如果没有，输出 `0`。", "hint": "对于 $100\\%$ 的数据，$n \\le 2 \\times 10^5$，$w_i \\le \t2^{31}-1$，$l,u \\le 2^{31}-1$。", "locale": "zh-CN"}}}
{"pid": "P6170", "type": "P", "difficulty": 5, "samples": [["10\n1\n0\n0\n2\n0\n0\n1\n2\n2\n2", "33"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["数学", "贪心", "2016", "USACO"], "title": "[USACO16FEB] Circular Barn G", "background": "*本题与 [银组同名题目](/problem/P3137) 在题意上一致，唯一的差别是数据范围。*", "description": "作为当代建筑的爱好者，Farmer John 建造了一个圆形新谷仓，谷仓内部 $n$ 个房间排成环形（$3 \\leq n \\leq 10^5$），按顺时针顺序编号为 $1\\ldots n$，每个房间都有通往与其相邻的左右房间的门，还有一扇门通往外面。\n\n现在 FJ 有 $n$ 头奶牛，他的目标是让每个房间恰好有一头奶牛。然而不幸的是，现在奶牛们随意呆在某个房间里，第 $i$ 个房间里有 $c_i$ 头奶牛。保证 $\\sum c_i =n$。\n\nFJ 决定采用这样的方法来解决这个问题：让某些奶牛**顺时针**穿过某些房间到达指定的位置。如果一头奶牛穿过了 $d$ 扇门，他消耗的能量为 $d^2$。你需要帮 FJ 算出所有奶牛消耗的能量和最小值是多少。", "inputFormat": "第一行一个整数 $n$，接下来 $n$ 行，第 $i$ 行一个整数 $c_i$。", "outputFormat": "输出所有奶牛最小消耗能量和。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO16FEB] Circular Barn G", "background": "*本题与 [银组同名题目](/problem/P3137) 在题意上一致，唯一的差别是数据范围。*", "description": "作为当代建筑的爱好者，Farmer John 建造了一个圆形新谷仓，谷仓内部 $n$ 个房间排成环形（$3 \\leq n \\leq 10^5$），按顺时针顺序编号为 $1\\ldots n$，每个房间都有通往与其相邻的左右房间的门，还有一扇门通往外面。\n\n现在 FJ 有 $n$ 头奶牛，他的目标是让每个房间恰好有一头奶牛。然而不幸的是，现在奶牛们随意呆在某个房间里，第 $i$ 个房间里有 $c_i$ 头奶牛。保证 $\\sum c_i =n$。\n\nFJ 决定采用这样的方法来解决这个问题：让某些奶牛**顺时针**穿过某些房间到达指定的位置。如果一头奶牛穿过了 $d$ 扇门，他消耗的能量为 $d^2$。你需要帮 FJ 算出所有奶牛消耗的能量和最小值是多少。", "inputFormat": "第一行一个整数 $n$，接下来 $n$ 行，第 $i$ 行一个整数 $c_i$。", "outputFormat": "输出所有奶牛最小消耗能量和。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P6171", "type": "P", "difficulty": 4, "samples": [["15 15 5 2\n2\n5\n10\n6\n4\n11\n3", "44"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["贪心", "2016", "USACO", "生成树"], "title": "[USACO16FEB] Fenced In G", "background": "*本题和 [白金组同名题目](/problem/P3141) 在题意上一致，唯一的不同是数据范围。*", "description": "Farmer John 意识到他的奶牛最近患上了一种恐惧症（害怕过于开阔的空间）。为了减少放牧的恐惧，FJ 决定在牧场中建一些水平和竖直方向的栅栏来将牧场分成若干个小区域。\n\n整个牧场是一个矩形，两个角的坐标分别为 $(0,0)$ 和 $(A,B)$。FJ 在 $a_1,\\ldots ,a_n$ 这 $n$ 个两两不同的位置建造了竖直方向的栅栏，每个栅栏从 $(a_i,0)$ 到 $(a_i,B)$；FJ 在 $b_1,\\ldots ,b_m$ 这 $m$ 个两两不同的位置建造了水平方向的栅栏，每个栅栏从 $(0,b_i)$ 到 $(A,b_i)$。竖直方向的栅栏和水平方向的栅栏两两相交，将整个牧场分割成 $(n+1)(m+1)$ 个区域。\n\n不幸的是，FJ 忘记了在栅栏上开门，奶牛都只能被困在一个个的小区域里！他想通过去掉一些栅栏来解决这个问题。他一次可以选择两个相邻的区域，将隔离这两个区域的栅栏去掉。FJ 的目标是让奶牛能够抵达牧场的任意一个地方。\n\n这是一个例子：\n\n```plain\n+---+--+\n|   |  |\n+---+--+\n|   |  |\n|   |  |\n+---+--+\n```\n\n去掉一些栅栏后的效果是这样的：\n\n```plain\n+---+--+\n|      |\n+---+  +\n|      |\n|      |\n+---+--+\n```\n\n为了降低工程量，FJ 当然希望拆除的栅栏长度最短。", "inputFormat": "第一行四个整数 $A,B,n,m$，保证 $1 \\leq n,m \\leq 2000$，$1 \\leq A,B \\leq 10^9$。\n\n接下来 $n$ 行，第 $i$ 行一个整数 $a_i$，保证 $0 \\lt a_i \\lt A$。\n\n接下来 $m$ 行，第 $i$ 行一个整数 $b_i$，保证 $0 \\lt b_i \\lt B$。", "outputFormat": "输出拆除栅栏的最小长度。**答案需要用 64 位带符号整数存储。**", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO16FEB] Fenced In G", "background": "*本题和 [白金组同名题目](/problem/P3141) 在题意上一致，唯一的不同是数据范围。*", "description": "Farmer John 意识到他的奶牛最近患上了一种恐惧症（害怕过于开阔的空间）。为了减少放牧的恐惧，FJ 决定在牧场中建一些水平和竖直方向的栅栏来将牧场分成若干个小区域。\n\n整个牧场是一个矩形，两个角的坐标分别为 $(0,0)$ 和 $(A,B)$。FJ 在 $a_1,\\ldots ,a_n$ 这 $n$ 个两两不同的位置建造了竖直方向的栅栏，每个栅栏从 $(a_i,0)$ 到 $(a_i,B)$；FJ 在 $b_1,\\ldots ,b_m$ 这 $m$ 个两两不同的位置建造了水平方向的栅栏，每个栅栏从 $(0,b_i)$ 到 $(A,b_i)$。竖直方向的栅栏和水平方向的栅栏两两相交，将整个牧场分割成 $(n+1)(m+1)$ 个区域。\n\n不幸的是，FJ 忘记了在栅栏上开门，奶牛都只能被困在一个个的小区域里！他想通过去掉一些栅栏来解决这个问题。他一次可以选择两个相邻的区域，将隔离这两个区域的栅栏去掉。FJ 的目标是让奶牛能够抵达牧场的任意一个地方。\n\n这是一个例子：\n\n```plain\n+---+--+\n|   |  |\n+---+--+\n|   |  |\n|   |  |\n+---+--+\n```\n\n去掉一些栅栏后的效果是这样的：\n\n```plain\n+---+--+\n|      |\n+---+  +\n|      |\n|      |\n+---+--+\n```\n\n为了降低工程量，FJ 当然希望拆除的栅栏长度最短。", "inputFormat": "第一行四个整数 $A,B,n,m$，保证 $1 \\leq n,m \\leq 2000$，$1 \\leq A,B \\leq 10^9$。\n\n接下来 $n$ 行，第 $i$ 行一个整数 $a_i$，保证 $0 \\lt a_i \\lt A$。\n\n接下来 $m$ 行，第 $i$ 行一个整数 $b_i$，保证 $0 \\lt b_i \\lt B$。", "outputFormat": "输出拆除栅栏的最小长度。**答案需要用 64 位带符号整数存储。**", "hint": "", "locale": "zh-CN"}}}
{"pid": "P6172", "type": "P", "difficulty": 5, "samples": [["7\n7 3\n5 5\n7 13\n3 1\n11 7\n5 3\n9 1", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2016", "倍增", "二分", "USACO", "树状数组"], "title": "[USACO16FEB] Load Balancing P", "background": "*本题与 [银组同名题目](/problem/P3138) 在题意上一致，唯一的差别是数据范围。*", "description": "Farmer John 的 $N$ 头奶牛（$1 \\leq N \\leq 10^5$）散布在整个农场上。整个农场是一个无限大的二维平面，第 $i$ 头奶牛的坐标是 $(x_i,y_i)$（保证 $x_i,y_i$ 均为正奇数，且 $x_i,y_i \\leq 10^6$），且没有任意两头奶牛在同一位置上。\n\nFJ 希望修建一条竖直方向的栅栏，它的方程是 $x=a$，他还希望修建一条水平方向的栅栏，它的方程是 $y=b$。为了防止栅栏经过奶牛，$a,b$ 均要求是偶数。容易发现，这两个栅栏会在 $(a,b)$ 处相交，将整个农场分割为四个区域。\n\nFJ 希望这四个区域内的奶牛数量较为均衡，尽量避免一个区域奶牛多而另一个区域奶牛少的情况。令 $M$ 为四个区域里奶牛最多区域的奶牛数量，请帮 FJ 求出 $M$ 的最小值。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行两个整数 $x_i,y_i$，描述第 $i$ 头奶牛的位置。", "outputFormat": "输出 $M$ 的最小值。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO16FEB] Load Balancing P", "background": "*本题与 [银组同名题目](/problem/P3138) 在题意上一致，唯一的差别是数据范围。*", "description": "Farmer John 的 $N$ 头奶牛（$1 \\leq N \\leq 10^5$）散布在整个农场上。整个农场是一个无限大的二维平面，第 $i$ 头奶牛的坐标是 $(x_i,y_i)$（保证 $x_i,y_i$ 均为正奇数，且 $x_i,y_i \\leq 10^6$），且没有任意两头奶牛在同一位置上。\n\nFJ 希望修建一条竖直方向的栅栏，它的方程是 $x=a$，他还希望修建一条水平方向的栅栏，它的方程是 $y=b$。为了防止栅栏经过奶牛，$a,b$ 均要求是偶数。容易发现，这两个栅栏会在 $(a,b)$ 处相交，将整个农场分割为四个区域。\n\nFJ 希望这四个区域内的奶牛数量较为均衡，尽量避免一个区域奶牛多而另一个区域奶牛少的情况。令 $M$ 为四个区域里奶牛最多区域的奶牛数量，请帮 FJ 求出 $M$ 的最小值。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行两个整数 $x_i,y_i$，描述第 $i$ 头奶牛的位置。", "outputFormat": "输出 $M$ 的最小值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P6173", "type": "P", "difficulty": 6, "samples": [["6 2\n2\n5\n4\n2\n6\n2", "14"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["动态规划 DP", "2016", "USACO", "分治", "动态规划优化", "斜率优化", "四边形不等式"], "title": "[USACO16FEB] Circular Barn P", "background": "", "description": "作为当代建筑的爱好者，Farmer John 建造了一个圆形新谷仓，谷仓内部 $n$ 个房间排成环形（$3 \\leq n \\leq 1000$），按顺时针顺序编号为 $1\\ldots n$，每个房间都有通往与其相邻的左右房间的门，还有一扇门通往外面。\n\nFJ 准备让第 $i$ 个房间里恰好有 $r_i$ 头奶牛（$1 \\le r_i \\le {10}^6$）。为了有序地让奶牛进入谷仓，他打算解锁 $k$ 个从外界进入谷仓的门（$1 \\le k \\le 7$）。然后，每头奶牛**顺时针**走动，直到到达目的地。FJ 的目标是让所有奶牛走动的距离和最小（奶牛从哪个门进入可以随意安排，这里走动的距离只包含进入谷仓后走动的距离），现在请你求出这个最小距离。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $n$ 行，第 $i$ 行一个整数 $r_i$。", "outputFormat": "输出所有奶牛最小走动距离和。", "hint": "FJ 打开 $2,5$ 两个门。$11$ 头奶牛从 $2$ 号门进入，前往 $2,3,4$ 号房间，总距离 $8$。$10$ 头奶牛从 $5$ 号门进入，前往 $5,6,1$ 号房间，总距离 $6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO16FEB] Circular Barn P", "background": "", "description": "作为当代建筑的爱好者，Farmer John 建造了一个圆形新谷仓，谷仓内部 $n$ 个房间排成环形（$3 \\leq n \\leq 1000$），按顺时针顺序编号为 $1\\ldots n$，每个房间都有通往与其相邻的左右房间的门，还有一扇门通往外面。\n\nFJ 准备让第 $i$ 个房间里恰好有 $r_i$ 头奶牛（$1 \\le r_i \\le {10}^6$）。为了有序地让奶牛进入谷仓，他打算解锁 $k$ 个从外界进入谷仓的门（$1 \\le k \\le 7$）。然后，每头奶牛**顺时针**走动，直到到达目的地。FJ 的目标是让所有奶牛走动的距离和最小（奶牛从哪个门进入可以随意安排，这里走动的距离只包含进入谷仓后走动的距离），现在请你求出这个最小距离。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $n$ 行，第 $i$ 行一个整数 $r_i$。", "outputFormat": "输出所有奶牛最小走动距离和。", "hint": "FJ 打开 $2,5$ 两个门。$11$ 头奶牛从 $2$ 号门进入，前往 $2,3,4$ 号房间，总距离 $8$。$10$ 头奶牛从 $5$ 号门进入，前往 $5,6,1$ 号房间，总距离 $6$。", "locale": "zh-CN"}}}
{"pid": "P6174", "type": "P", "difficulty": 3, "samples": [["7 2\n20\n25\n18\n8\n10\n3\n1", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "二分", "USACO"], "title": "[USACO16JAN] Angry Cows S", "background": "", "description": "Bessie 设计了一款新游戏：*Angry Cows*。在这个游戏中，玩家发射奶牛，每头奶牛落地时引爆一定范围内的干草。游戏的目标是使用一组奶牛引爆所有干草。\n\n$N$ 捆干草排列在数轴上的不同位置。第 $i$ 捆干草的的位置为 $x_i$。如果一个威力为 $R$ 的奶牛在 $x$ 位置落地，她将引爆 $[x-R,x+R]$ 范围内的所有干草。\n\n你现在可以发射 $K$ 头奶牛，每头奶牛的威力都是 $R$，现在你需要确定 $R$ 的最小值，使得用 $K$ 头奶牛可以引爆所有干草。", "inputFormat": "第一行两个整数 $N,K$（$1 \\leq N \\leq 5 \\times 10^4$，$1 \\leq K \\leq 10$）。\n\n接下来 $N$ 行，第 $i$ 行一个整数 $x_i$（$0 \\leq x_i \\leq 10^9$）。", "outputFormat": "输出一个整数，即 $R$ 的最小值。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO16JAN] Angry Cows S", "background": "", "description": "Bessie 设计了一款新游戏：*Angry Cows*。在这个游戏中，玩家发射奶牛，每头奶牛落地时引爆一定范围内的干草。游戏的目标是使用一组奶牛引爆所有干草。\n\n$N$ 捆干草排列在数轴上的不同位置。第 $i$ 捆干草的的位置为 $x_i$。如果一个威力为 $R$ 的奶牛在 $x$ 位置落地，她将引爆 $[x-R,x+R]$ 范围内的所有干草。\n\n你现在可以发射 $K$ 头奶牛，每头奶牛的威力都是 $R$，现在你需要确定 $R$ 的最小值，使得用 $K$ 头奶牛可以引爆所有干草。", "inputFormat": "第一行两个整数 $N,K$（$1 \\leq N \\leq 5 \\times 10^4$，$1 \\leq K \\leq 10$）。\n\n接下来 $N$ 行，第 $i$ 行一个整数 $x_i$（$0 \\leq x_i \\leq 10^9$）。", "outputFormat": "输出一个整数，即 $R$ 的最小值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P6175", "type": "P", "difficulty": 3, "samples": [["5 7\n1 4 1\n1 3 300\n3 1 10\n1 2 16\n2 3 100\n2 5 15\n5 3 20", "61"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["最小环"], "title": "无向图的最小环问题", "background": "", "description": "给定一张无向图，求图中一个至少包含 $3$ 个点的环，环上的节点不重复，并且环上的边的长度之和最小。该问题称为无向图的最小环问题。在本题中，你需要输出最小的环的边权和。若无解，输出 `No solution.`。", "inputFormat": "第一行两个正整数 $n,m$ 表示点数和边数。\n\n接下来 $m$ 行，每行三个正整数 $u,v,d$，表示节点 $u,v$ 之间有一条长度为 $d$ 的边。\n\n", "outputFormat": "输出边权和最小的环的边权和。若无解，输出 `No solution.`。", "hint": "样例解释：一种可行的方案：$1-3-5-2-1$。\n\n对于 $20\\%$ 的数据，$n,m \\leq 10$。\n\n对于 $60\\%$ 的数据，$m\\leq 100$。\n\n对于 $100\\%$ 的数据，$1\\le n\\leq 100$，$1\\le m\\leq 5\\times 10^3$，$1 \\leq d \\leq 10^5$。\n\n\n**无解输出包括句号。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "无向图的最小环问题", "background": "", "description": "给定一张无向图，求图中一个至少包含 $3$ 个点的环，环上的节点不重复，并且环上的边的长度之和最小。该问题称为无向图的最小环问题。在本题中，你需要输出最小的环的边权和。若无解，输出 `No solution.`。", "inputFormat": "第一行两个正整数 $n,m$ 表示点数和边数。\n\n接下来 $m$ 行，每行三个正整数 $u,v,d$，表示节点 $u,v$ 之间有一条长度为 $d$ 的边。\n\n", "outputFormat": "输出边权和最小的环的边权和。若无解，输出 `No solution.`。", "hint": "样例解释：一种可行的方案：$1-3-5-2-1$。\n\n对于 $20\\%$ 的数据，$n,m \\leq 10$。\n\n对于 $60\\%$ 的数据，$m\\leq 100$。\n\n对于 $100\\%$ 的数据，$1\\le n\\leq 100$，$1\\le m\\leq 5\\times 10^3$，$1 \\leq d \\leq 10^5$。\n\n\n**无解输出包括句号。**", "locale": "zh-CN"}}}
{"pid": "P6176", "type": "P", "difficulty": 6, "samples": [["4\n0 0\n0 10\n1 10\n1 0", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["动态规划 DP", "2016", "USACO"], "title": "[USACO16JAN] Lights Out P", "background": "", "description": "Farmer John has installed a fancy new milking machine in his barn, but it draws so much power that it occasionally causes the power to go out! This happens so often that Bessie has memorized a map of the barn, making it easier for her to find the exit of the barn in the dark. She is curious though about the impact of power loss on her ability to exit the barn quickly. For example, she wonders how much farther she might need to walk find the exit in the dark.\n\nThe barn is described by a simple (non self-intersecting) polygon with integer vertices $(x_1,y_1)\\ldots(x_n,y_n)$ listed in clockwise order. Its edges alternate between horizontal (parallel to the x-axis) and vertical (parallel to the y-axis); the first edge can be of either type. The exit is located at $(x_1,y_1)$. Bessie starts inside the barn located at some vertex $(x_i,y_i)$ for $i \\gt 1$. She can walk only around the perimeter of the barn, either clockwise or counterclockwise, potentially changing direction any time she reaches a vertex. Her goal is to travel a minimum distance to reach the exit. This is relatively easy to do with the lights on, of course, since she will travel either clockwise or counterclockwise from her current location to the exit -- whichever direction is shorter.\n\nOne day, the lights go out, causing Bessie to panic and forget which vertex she is standing at. Fortunately, she still remembers the exact map of the barn, so she can possibly figure out her position by walking around and using her sense of touch. Whenever she is standing at a vertex (including at her initial vertex), she can feel whether it is a left turn or a right turn, and she can tell if that vertex is the exit. When she walks along an edge of the barn, she can determine the exact length of the edge after walking along the entire edge. In general, Bessie will strategically feel her way around her starting vertex until she knows enough information to determine where she is, at which point she can easily figure out how to get to the exit by traveling a minimum amount of remaining distance.\n\nPlease help Bessie determine the smallest possible amount by which her travel distance will increase in the worst case (over all possibilities for her starting vertex) for travel in the dark versus in a lit barn, assuming she moves according to an optimal strategy in each case. An \"optimal\" strategy for the unlit case is one that minimizes this extra worst-case amount.", "inputFormat": "The first line of the input contains $N$ ($4 \\leq N \\leq 200$). Each of the next $N$ lines contains two integers, describing the points $(x_i,y_i)$ in clockwise order around the barn. These integers are in the range $-100,000 \\ldots 100,000$.", "outputFormat": "Please output the smallest possible worst-case amount by which Bessie's optimal distance in the dark is longer than her optimal distance in a lit barn, where the worst case is taken over all possible vertices at which Bessie can start.", "hint": "In this example, Bessie can feel that she is initially standing at an inward bend, however since in this example all corners are inward bends this tells her little information.\n\nOne optimal strategy is to just travel clockwise. This is optimal is she starts at vertex 3 or 4 and only adds 2 units of distance if she starts at vertex 2.", "locale": "en", "translations": {"en": {"title": "[USACO16JAN] Lights Out P", "background": "", "description": "Farmer John has installed a fancy new milking machine in his barn, but it draws so much power that it occasionally causes the power to go out! This happens so often that Bessie has memorized a map of the barn, making it easier for her to find the exit of the barn in the dark. She is curious though about the impact of power loss on her ability to exit the barn quickly. For example, she wonders how much farther she might need to walk find the exit in the dark.\n\nThe barn is described by a simple (non self-intersecting) polygon with integer vertices $(x_1,y_1)\\ldots(x_n,y_n)$ listed in clockwise order. Its edges alternate between horizontal (parallel to the x-axis) and vertical (parallel to the y-axis); the first edge can be of either type. The exit is located at $(x_1,y_1)$. Bessie starts inside the barn located at some vertex $(x_i,y_i)$ for $i \\gt 1$. She can walk only around the perimeter of the barn, either clockwise or counterclockwise, potentially changing direction any time she reaches a vertex. Her goal is to travel a minimum distance to reach the exit. This is relatively easy to do with the lights on, of course, since she will travel either clockwise or counterclockwise from her current location to the exit -- whichever direction is shorter.\n\nOne day, the lights go out, causing Bessie to panic and forget which vertex she is standing at. Fortunately, she still remembers the exact map of the barn, so she can possibly figure out her position by walking around and using her sense of touch. Whenever she is standing at a vertex (including at her initial vertex), she can feel whether it is a left turn or a right turn, and she can tell if that vertex is the exit. When she walks along an edge of the barn, she can determine the exact length of the edge after walking along the entire edge. In general, Bessie will strategically feel her way around her starting vertex until she knows enough information to determine where she is, at which point she can easily figure out how to get to the exit by traveling a minimum amount of remaining distance.\n\nPlease help Bessie determine the smallest possible amount by which her travel distance will increase in the worst case (over all possibilities for her starting vertex) for travel in the dark versus in a lit barn, assuming she moves according to an optimal strategy in each case. An \"optimal\" strategy for the unlit case is one that minimizes this extra worst-case amount.", "inputFormat": "The first line of the input contains $N$ ($4 \\leq N \\leq 200$). Each of the next $N$ lines contains two integers, describing the points $(x_i,y_i)$ in clockwise order around the barn. These integers are in the range $-100,000 \\ldots 100,000$.", "outputFormat": "Please output the smallest possible worst-case amount by which Bessie's optimal distance in the dark is longer than her optimal distance in a lit barn, where the worst case is taken over all possible vertices at which Bessie can start.", "hint": "In this example, Bessie can feel that she is initially standing at an inward bend, however since in this example all corners are inward bends this tells her little information.\n\nOne optimal strategy is to just travel clockwise. This is optimal is she starts at vertex 3 or 4 and only adds 2 units of distance if she starts at vertex 2.", "locale": "en"}, "zh-CN": {"title": "[USACO16JAN] Lights Out P", "background": "", "description": "农夫约翰在他的谷仓里安装了一台新的挤奶机，但它耗电量太大，偶尔会导致停电！这种情况发生得如此频繁，以至于贝茜已经记住了谷仓的地图，这帮助她在黑暗中更容易找到出口。但她好奇停电会对她快速离开谷仓的能力产生多大影响。例如，她想知道在黑暗中寻找出口可能需要多走多少路。\n\n谷仓由一个简单（无自交）多边形描述，其顶点按顺时针顺序排列为 $(x_1,y_1)\\ldots(x_n,y_n)$。多边形的边在水平（平行于 $x$ 轴）和垂直（平行于 $y$ 轴）之间交替；第一条边可以是任意类型。出口位于 $(x_1,y_1)$。贝茜从某个顶点 $(x_i,y_i)$（$i > 1$）开始位于谷仓内部。她只能沿着谷仓的周边行走，可以顺时针或逆时针方向移动，并可在到达顶点时随时改变方向。她的目标是以最短距离到达出口。在有灯光的情况下这很容易，因为她只需从当前位置沿顺时针或逆时针中选择较短的方向行进即可。\n\n某天停电时，贝茜因恐慌而忘记了自己所在的起始顶点。幸运的是，她仍清楚记得谷仓的地图，因此她可能通过行走并利用触觉来确定自己的位置。每当她站在一个顶点时（包括初始顶点），她可以感知该顶点是左转还是右转，并能判断该顶点是否是出口。当她沿着谷仓的边行走时，她可以在走完整条边后确定该边的精确长度。贝茜将策略性地探索周围环境，直到获得足够信息来确定自己的位置，之后她就能轻松计算出剩余的最短路径。\n\n请帮助贝茜计算：在最优策略下，黑暗中最坏情况（考虑所有可能的起始顶点）下她的行走距离相比有灯光时可能增加的最小额外距离。这里的“最优策略”指能最小化这种最坏情况额外距离的策略。", "inputFormat": "输入第一行包含 $N$（$4 \\leq N \\leq 200$）。接下来 $N$ 行每行包含两个整数，按顺时针顺序描述多边形顶点 $(x_i,y_i)$。这些整数的范围在 $-100,000$ 到 $100,000$ 之间。", "outputFormat": "请输出在最优策略下，贝茜在黑暗中最坏情况（考虑所有可能的起始顶点）下的行走距离相比有灯光时可能增加的最小额外距离。", "hint": "在此示例中，贝茜可以感知到自己初始位于一个内角处，但由于所有角都是内角，这提供的信息有限。\n\n一种最优策略是始终顺时针行走。如果她从顶点 3 或 4 出发，这是最优选择；如果从顶点 2 出发，则只会增加 2 单位距离。", "locale": "zh-CN"}}}
{"pid": "P6177", "type": "P", "difficulty": 6, "samples": [["8 2\n105 2 9 3 8 5 7 7 \n1 2\n1 3\n1 4\n3 5\n3 6\n3 7\n4 8\n2 5\n3 8", "4\n4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "最近公共祖先 LCA", "树链剖分", "可持久化", "分块", "模板题"], "title": "【模板】树分块 / Count on a tree II", "background": "原 bzoj2589。", "description": "给定一个 $n$ 个节点的树，每个节点上有一个整数，$i$ 号点的整数为 $val_i$。\n\n有 $m$ 次询问，每次给出 $u',v$，您需要将其解密得到 $u,v$，并查询 $u$ 到 $v$ 的路径上有多少个不同的整数。\n\n解密方式：$u=u' \\operatorname{xor} lastans$。\n\n$lastans$ 为上一次询问的答案，若无询问则为 $0$。", "inputFormat": "第一行有两个整数 $n$ 和 $m$。\n\n第二行有 $n$ 个整数。第 $i$ 个整数表示 $val_i$。\n\n在接下来的 $n-1$ 行中，每行包含两个整数 $u,v$，描述一条边。\n\n在接下来的 $m$ 行中，每行包含两个整数 $u',v$，描述一组询问。", "outputFormat": "对于每个询问，一行一个整数表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le u,v\\le n\\le 4\\times 10^4$，$1\\le m\\le 10^5$，$0\\le u',val_i<2^{31}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】树分块 / Count on a tree II", "background": "原 bzoj2589。", "description": "给定一个 $n$ 个节点的树，每个节点上有一个整数，$i$ 号点的整数为 $val_i$。\n\n有 $m$ 次询问，每次给出 $u',v$，您需要将其解密得到 $u,v$，并查询 $u$ 到 $v$ 的路径上有多少个不同的整数。\n\n解密方式：$u=u' \\operatorname{xor} lastans$。\n\n$lastans$ 为上一次询问的答案，若无询问则为 $0$。", "inputFormat": "第一行有两个整数 $n$ 和 $m$。\n\n第二行有 $n$ 个整数。第 $i$ 个整数表示 $val_i$。\n\n在接下来的 $n-1$ 行中，每行包含两个整数 $u,v$，描述一条边。\n\n在接下来的 $m$ 行中，每行包含两个整数 $u',v$，描述一组询问。", "outputFormat": "对于每个询问，一行一个整数表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le u,v\\le n\\le 4\\times 10^4$，$1\\le m\\le 10^5$，$0\\le u',val_i<2^{31}$。", "locale": "zh-CN"}}}
