{"pid": "P6075", "type": "P", "difficulty": 4, "samples": [["2 2", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2015", "各省省选", "江苏"], "title": "[JSOI2015] 子集选取", "background": "", "description": "给定 $n$ 个元素的集合 $S= \\left\\{1,2,\\cdots,n \\right\\}$ 和整数 $ k$，现在要从 $S$ 中选出若干子集 $A_{i,j}\\ (A \\subseteq S$，$1 \\le j \\le i \\le k)$ 排成下面所示边长为 $k$ 的三角形（因此总共选出了 $\\frac{1}{2} k(k+1)$ 个子集）。      \n$$\\begin{matrix}\nA_{1,1}\\\\\nA_{2,1}&A_{2,2}\\\\\nA_{3,1}&A_{3,2}&A_{3,3}\\\\\n\\vdots&\\vdots&\\vdots&\\ddots\\\\\nA_{k,1}&A_{k,2}&A_{k,3}&\\cdots&A_{k,k}\n\\end{matrix}   $$\n\n此外，JYY 对选出的子集之间还有额外的要求：选出的这些子集必须满足\n$A_{i,j} \\subseteq A_{i,j-1}$ 且 $A_{i,j} \\subseteq A_{i-1,j}$。     \nJYY 想知道，求有多少种不同的选取这些子集的方法。因为答案很大，JYY 只关心输出答案模 $1{,}000{,}000{,}007$ 的值。 \n      \n对于两种选取方案 $A = \\left\\{ A_{1,1} , A_{2,1} ,\\cdots, A_{k,k} \\right\\}$ 和 $B = \\left\\{ B_{1,1} , B_{2,1} ,\\cdots, B_{k,k} \\right\\}$ 只要存在 $i,j$ 满足 $A_{i,j} \\neq B_{i,j}$，我们就认为 $A$ 和 $B$ 是不同的方案。   ", "inputFormat": "输入包含一行两个整数 $n$ 和 $k$。", "outputFormat": "一行一个整数，表示不同方案数目模 $1,000,000,007$ 的值。", "hint": "对于 $100\\%$ 的数据，$1 \\le n$，$k \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2015] 子集选取", "background": "", "description": "给定 $n$ 个元素的集合 $S= \\left\\{1,2,\\cdots,n \\right\\}$ 和整数 $ k$，现在要从 $S$ 中选出若干子集 $A_{i,j}\\ (A \\subseteq S$，$1 \\le j \\le i \\le k)$ 排成下面所示边长为 $k$ 的三角形（因此总共选出了 $\\frac{1}{2} k(k+1)$ 个子集）。      \n$$\\begin{matrix}\nA_{1,1}\\\\\nA_{2,1}&A_{2,2}\\\\\nA_{3,1}&A_{3,2}&A_{3,3}\\\\\n\\vdots&\\vdots&\\vdots&\\ddots\\\\\nA_{k,1}&A_{k,2}&A_{k,3}&\\cdots&A_{k,k}\n\\end{matrix}   $$\n\n此外，JYY 对选出的子集之间还有额外的要求：选出的这些子集必须满足\n$A_{i,j} \\subseteq A_{i,j-1}$ 且 $A_{i,j} \\subseteq A_{i-1,j}$。     \nJYY 想知道，求有多少种不同的选取这些子集的方法。因为答案很大，JYY 只关心输出答案模 $1{,}000{,}000{,}007$ 的值。 \n      \n对于两种选取方案 $A = \\left\\{ A_{1,1} , A_{2,1} ,\\cdots, A_{k,k} \\right\\}$ 和 $B = \\left\\{ B_{1,1} , B_{2,1} ,\\cdots, B_{k,k} \\right\\}$ 只要存在 $i,j$ 满足 $A_{i,j} \\neq B_{i,j}$，我们就认为 $A$ 和 $B$ 是不同的方案。   ", "inputFormat": "输入包含一行两个整数 $n$ 和 $k$。", "outputFormat": "一行一个整数，表示不同方案数目模 $1,000,000,007$ 的值。", "hint": "对于 $100\\%$ 的数据，$1 \\le n$，$k \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P6076", "type": "P", "difficulty": 5, "samples": [["2 2 3", "60"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2015", "各省省选", "江苏", "容斥原理"], "title": "[JSOI2015] 染色问题", "background": "", "description": "萌萌家有一个棋盘，这个棋盘是一个 $n \\times m$ 的矩形，分成 $n$ 行 $m$ 列共 $n \\times m$ 个小方格。   \n现在萌萌和南南有 $C$ 种不同颜色的颜料，他们希望把棋盘用这些颜料染色，并满足以下规定：   \n\n1. 棋盘的每一个小方格既可以染色（染成 $C$ 种颜色中的一种），也可以不染色。   \n2. 棋盘的每一行至少有一个小方格被染色。   \n3. 棋盘的每一列至少有一个小方格被染色。   \n4. 每种颜色都在棋盘上出现至少一次。  \n \n以下是一些将 $3  \\times 3$ 棋盘染成 $C=3$ 种颜色（红、黄、蓝）的例子（下图已更新）： \n  \n![](https://cdn.luogu.com.cn/upload/image_hosting/7s4j5elx.png)    \n\n请你求出满足要求的不同的染色方案总数。只要存在一个位置的颜色不同，即认为两个染色方案是不同的。", "inputFormat": "输入只有一行，为 $3$ 个整数 $n,m,c$。", "outputFormat": "输出一个整数，为不同染色方案总数。\n因为总数可能很大，只需输出总数对 $1,000,000,007$ 取模的值。", "hint": "对于$100\\%$的数据，$1 \\le n,m,c \\le 400$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2015] 染色问题", "background": "", "description": "萌萌家有一个棋盘，这个棋盘是一个 $n \\times m$ 的矩形，分成 $n$ 行 $m$ 列共 $n \\times m$ 个小方格。   \n现在萌萌和南南有 $C$ 种不同颜色的颜料，他们希望把棋盘用这些颜料染色，并满足以下规定：   \n\n1. 棋盘的每一个小方格既可以染色（染成 $C$ 种颜色中的一种），也可以不染色。   \n2. 棋盘的每一行至少有一个小方格被染色。   \n3. 棋盘的每一列至少有一个小方格被染色。   \n4. 每种颜色都在棋盘上出现至少一次。  \n \n以下是一些将 $3  \\times 3$ 棋盘染成 $C=3$ 种颜色（红、黄、蓝）的例子（下图已更新）： \n  \n![](https://cdn.luogu.com.cn/upload/image_hosting/7s4j5elx.png)    \n\n请你求出满足要求的不同的染色方案总数。只要存在一个位置的颜色不同，即认为两个染色方案是不同的。", "inputFormat": "输入只有一行，为 $3$ 个整数 $n,m,c$。", "outputFormat": "输出一个整数，为不同染色方案总数。\n因为总数可能很大，只需输出总数对 $1,000,000,007$ 取模的值。", "hint": "对于$100\\%$的数据，$1 \\le n,m,c \\le 400$。", "locale": "zh-CN"}}}
{"pid": "P6077", "type": "P", "difficulty": 6, "samples": [["130 340 5\n10 50\n130 130\n70 170\n0 180\n60 260", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "BalticOI（波罗的海）"], "title": "[BalticOI 2007] Escape", "background": "", "description": "战犯们企图逃离监狱，他们详细地计划了如何逃出监狱本身，逃出监狱之后他们希望在附近的一个村子里找到掩护。\n\n村子（下图中的 B）和监狱（图中的 A）中间有一个峡谷，这个峡谷也是有士兵守卫的。守卫峡谷的士兵们坐在岗哨上很少走动，每个士兵的观察范围是 $100$ 米。士兵所处位置决定了战犯们能否安全通过峡谷，安全通过的条件就是在任何时刻战犯们距离最近的士兵大于 $100$ 米。\n\n给定峡谷的长、宽和每个士兵在峡谷中的坐标，假定士兵的位置一直保持不变，请你写一个程序计算战犯们能否不被士兵发现，顺利通过峡谷。\n\n如果不能，那么战犯们最少需要消灭几个士兵才能安全通过峡谷（无论士兵是否被另一个士兵看到，他都可以被消灭）。 \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/59rrua2p.png)", "inputFormat": "第一行有三个整数 $l$，$w$ 和 $n$，分别表示峡谷的长度、宽度和士兵的人数。\n\n接下来的 $n$ 行，每行两个整数 $x_i$ 和 $y_i$，表示第 $i$ 个士兵在峡谷的坐标，坐标以米为单位，峡谷的西南角坐标为 $(0, 0)$，东北角坐标为 $(l, w)$，见上图。\n\n注意：通过峡谷可以从 $(0, ys)$，（其中 $ys$ 满足 $0\\leq ys \\leq w$） 到 $(l, ye)$（其中 $ye$ 满足 $0 \\leq ye \\leq w$），其中 $ys$， $ye$ 不一定是整数。", "outputFormat": "只有一行，为一个整数，即安全通过峡谷需要消灭的士兵的人数，如果不需要消灭任何士兵，则输出 $0$。", "hint": "对于 $100\\%$ 的数据，满足：$1 \\leq w \\leq 5\\cdot 10^4$，$1\\leq l \\leq 5\\cdot 10^4$，$1\\leq n \\leq 250$，$0 \\leq x_i \\leq l$，$0 \\leq y_i \\leq w$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2007] Escape", "background": "", "description": "战犯们企图逃离监狱，他们详细地计划了如何逃出监狱本身，逃出监狱之后他们希望在附近的一个村子里找到掩护。\n\n村子（下图中的 B）和监狱（图中的 A）中间有一个峡谷，这个峡谷也是有士兵守卫的。守卫峡谷的士兵们坐在岗哨上很少走动，每个士兵的观察范围是 $100$ 米。士兵所处位置决定了战犯们能否安全通过峡谷，安全通过的条件就是在任何时刻战犯们距离最近的士兵大于 $100$ 米。\n\n给定峡谷的长、宽和每个士兵在峡谷中的坐标，假定士兵的位置一直保持不变，请你写一个程序计算战犯们能否不被士兵发现，顺利通过峡谷。\n\n如果不能，那么战犯们最少需要消灭几个士兵才能安全通过峡谷（无论士兵是否被另一个士兵看到，他都可以被消灭）。 \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/59rrua2p.png)", "inputFormat": "第一行有三个整数 $l$，$w$ 和 $n$，分别表示峡谷的长度、宽度和士兵的人数。\n\n接下来的 $n$ 行，每行两个整数 $x_i$ 和 $y_i$，表示第 $i$ 个士兵在峡谷的坐标，坐标以米为单位，峡谷的西南角坐标为 $(0, 0)$，东北角坐标为 $(l, w)$，见上图。\n\n注意：通过峡谷可以从 $(0, ys)$，（其中 $ys$ 满足 $0\\leq ys \\leq w$） 到 $(l, ye)$（其中 $ye$ 满足 $0 \\leq ye \\leq w$），其中 $ys$， $ye$ 不一定是整数。", "outputFormat": "只有一行，为一个整数，即安全通过峡谷需要消灭的士兵的人数，如果不需要消灭任何士兵，则输出 $0$。", "hint": "对于 $100\\%$ 的数据，满足：$1 \\leq w \\leq 5\\cdot 10^4$，$1\\leq l \\leq 5\\cdot 10^4$，$1\\leq n \\leq 250$，$0 \\leq x_i \\leq l$，$0 \\leq y_i \\leq w$。", "locale": "zh-CN"}}}
{"pid": "P6078", "type": "P", "difficulty": 6, "samples": [["2 1 3\n3\n5", "9"]], "limits": {"time": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2004", "CEOI（中欧）", "组合数学", "生成函数"], "title": "[CEOI 2004] Sweets", "background": "", "description": "John 得到了 $n$ 罐糖果。不同的糖果罐，糖果的种类不同（即同一个糖果罐里的糖果种类是相同的，不同的糖果罐里的糖果的种类是不同的）。第 $i$ 个糖果罐里有 $m_{i}$ 个糖果。John 决定吃掉一些糖果，他想吃掉至少 $a$ 个糖果，但不超过 $b$ 个。问题是 John 无法确定吃多少个糖果和每种糖果各吃几个。有多少种方法可以做这件事呢？  ", "inputFormat": "输入共 $n+1$ 行：\n\n第一行读入 $n$，$a$，$b$。\n\n接下来 $n$ 行，一行一个数，代表 $m_{i}$。", "outputFormat": "仅一行，表示 John 能够选择的满足以上条件的吃掉糖果的方法数，答案对 $2004$ 取模。", "hint": "#### 数据范围及限制\n对于 $100\\%$ 的数据，保证 $1\\leq n \\leq 10$，$0\\leq a \\leq b \\leq 10^7$，$0 \\leq m_{i} \\leq 10^6$。\n\n#### 说明\n本题译自 [Central European Olympiad\nin Informatics 2004](https://www.oi.edu.pl/old/php/ceoi2004.php?module=show&file=news) [Day 1](https://www.oi.edu.pl/old/php/ceoi2004.php?module=show&file=tasks) [T2 Sweets](https://www.oi.edu.pl/old/ceoi2004/problems/swe.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2004] Sweets", "background": "", "description": "John 得到了 $n$ 罐糖果。不同的糖果罐，糖果的种类不同（即同一个糖果罐里的糖果种类是相同的，不同的糖果罐里的糖果的种类是不同的）。第 $i$ 个糖果罐里有 $m_{i}$ 个糖果。John 决定吃掉一些糖果，他想吃掉至少 $a$ 个糖果，但不超过 $b$ 个。问题是 John 无法确定吃多少个糖果和每种糖果各吃几个。有多少种方法可以做这件事呢？  ", "inputFormat": "输入共 $n+1$ 行：\n\n第一行读入 $n$，$a$，$b$。\n\n接下来 $n$ 行，一行一个数，代表 $m_{i}$。", "outputFormat": "仅一行，表示 John 能够选择的满足以上条件的吃掉糖果的方法数，答案对 $2004$ 取模。", "hint": "#### 数据范围及限制\n对于 $100\\%$ 的数据，保证 $1\\leq n \\leq 10$，$0\\leq a \\leq b \\leq 10^7$，$0 \\leq m_{i} \\leq 10^6$。\n\n#### 说明\n本题译自 [Central European Olympiad\nin Informatics 2004](https://www.oi.edu.pl/old/php/ceoi2004.php?module=show&file=news) [Day 1](https://www.oi.edu.pl/old/php/ceoi2004.php?module=show&file=tasks) [T2 Sweets](https://www.oi.edu.pl/old/ceoi2004/problems/swe.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6079", "type": "P", "difficulty": 4, "samples": [["5 8\n-1 0\n3 1\n5 1\n-3 3\n2 0", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "USACO"], "title": "[USACO06MAR] Milk Team Select G", "background": "", "description": "Farmer John 的 $N(1 \\le N \\le 500)$ 头奶牛打算参加一场世界级的产奶比赛 （Multistate Milking Match-up，MMM），他们已经摸清了其他队的实力。他们的总产奶量只要大于等于 $X$ 加仑（$1 \\leq X \\leq 10^6$），就能赢得胜利。\n\n每头奶牛都能为全队贡献一定量的牛奶，数值在 $-10^4$ 到 $10^4$ 加仑之间（为啥有负数？因为有些奶牛会打翻其他奶牛产的牛奶）。\n\nMMM 的目标是通过合作，增进家庭成员间的默契。为了支持比赛精神，奶牛们希望在赢得比赛的前提下，有尽可能多对奶牛间存在直系血缘关系。当然，所有奶牛都是女性，因此这里的直系血缘关系就是母女关系。\n\n现在 FJ 摸清了所有奶牛间的血缘关系，希望算出一个团队在赢得胜利的前提下，最多有多少对奶牛存在血缘关系。注意：如果一个团队由某头奶牛和她的母亲和外祖母组成的话，这个团队只有两对血缘关系（她和她的母亲，她的母亲和外祖母）。", "inputFormat": "第一行两个整数 $N,X$。\n\n接下来 $N$ 行，每行两个整数，第一个整数是它能为团队贡献的产奶量，第二个整数为它的母亲的编号，如果她的母亲不在牛群里，这个数字为 $0$。\n\n保证血缘关系不会出现环。", "outputFormat": "输出在获胜的前提下，一个团队中最多存在多少血缘关系。\n\n特别地，如果不存在一个团队能获胜，输出 $-1$。", "hint": "最优的队伍包含 $1,2,3,5$ 这四头奶牛，总产奶量为 $9$ 加仑，共有两对血缘关系（$1,2$ 和 $1,3$）。\n\n虽然 $2,3,5$ 这个组合产奶量更大，但是这个组合里没有血缘关系。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO06MAR] Milk Team Select G", "background": "", "description": "Farmer John 的 $N(1 \\le N \\le 500)$ 头奶牛打算参加一场世界级的产奶比赛 （Multistate Milking Match-up，MMM），他们已经摸清了其他队的实力。他们的总产奶量只要大于等于 $X$ 加仑（$1 \\leq X \\leq 10^6$），就能赢得胜利。\n\n每头奶牛都能为全队贡献一定量的牛奶，数值在 $-10^4$ 到 $10^4$ 加仑之间（为啥有负数？因为有些奶牛会打翻其他奶牛产的牛奶）。\n\nMMM 的目标是通过合作，增进家庭成员间的默契。为了支持比赛精神，奶牛们希望在赢得比赛的前提下，有尽可能多对奶牛间存在直系血缘关系。当然，所有奶牛都是女性，因此这里的直系血缘关系就是母女关系。\n\n现在 FJ 摸清了所有奶牛间的血缘关系，希望算出一个团队在赢得胜利的前提下，最多有多少对奶牛存在血缘关系。注意：如果一个团队由某头奶牛和她的母亲和外祖母组成的话，这个团队只有两对血缘关系（她和她的母亲，她的母亲和外祖母）。", "inputFormat": "第一行两个整数 $N,X$。\n\n接下来 $N$ 行，每行两个整数，第一个整数是它能为团队贡献的产奶量，第二个整数为它的母亲的编号，如果她的母亲不在牛群里，这个数字为 $0$。\n\n保证血缘关系不会出现环。", "outputFormat": "输出在获胜的前提下，一个团队中最多存在多少血缘关系。\n\n特别地，如果不存在一个团队能获胜，输出 $-1$。", "hint": "最优的队伍包含 $1,2,3,5$ 这四头奶牛，总产奶量为 $9$ 加仑，共有两对血缘关系（$1,2$ 和 $1,3$）。\n\n虽然 $2,3,5$ 这个组合产奶量更大，但是这个组合里没有血缘关系。", "locale": "zh-CN"}}}
{"pid": "P6080", "type": "P", "difficulty": 6, "samples": [["9 6 10\n5\n6\n2\n10\n10\n7\n3\n2\n9\n1\n4\n4\n3\n2\n1", "1\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "USACO"], "title": "[USACO05DEC] Cow Patterns G", "background": "", "description": "Farmer John 的 $N$（$1 \\leq N \\leq 10^5$）头奶牛中出现了 $K$（$1 \\leq K \\leq 25000$）只坏蛋！这些坏蛋在奶牛排队的时候总站在一起。现在你需要帮助 FJ 找出他们。\n\n为了区分，FJ 给每头奶牛发了号牌，上面写着一个 $1 \\ldots S$ 之间的数字（$1 \\leq S \\leq 25$），虽然这不是个完美的方法，但也有一定作用。现在 FJ 记不得坏蛋们的具体号码，但他给出了一个模式串。原坏蛋的号码相同，模式串中的号码依旧相同，模式串中坏蛋号码的大小关系也和原号码相同。\n\n例如模式串：$1,4,4,3,2,1$，原来的 $6$ 只坏蛋，最前面和最后面的号码相等且最小（不一定是 $1$），位置 $2,3$ 的坏蛋号码相同且最大（不一定是 $4$）。\n\n现在有这样一个队列：$5, 6, 2, 10, 10, 7, 3, 2, 9$，它的子串 $2, 10, 10, 7, 3, 2$ 匹配模式串的相等关系和大小关系，这就可能是一个坏蛋团伙。\n\n请找出所有团伙的可能情况。 ", "inputFormat": "第一行三个整数 $N,K,S$。\n\n接下来 $N$ 行，每行一个整数，代表第 $i$ 奶牛的编号。\n\n接下来 $K$ 行，每行一个整数，表示模式串中第 $i$ 个位置的号码。", "outputFormat": "第一行输出一个整数 $B$。\n\n接下来 $B$ 行，每行一个整数，为一种可能的坏蛋团伙的起始位置。\n\n所有位置按升序输出。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO05DEC] Cow Patterns G", "background": "", "description": "Farmer John 的 $N$（$1 \\leq N \\leq 10^5$）头奶牛中出现了 $K$（$1 \\leq K \\leq 25000$）只坏蛋！这些坏蛋在奶牛排队的时候总站在一起。现在你需要帮助 FJ 找出他们。\n\n为了区分，FJ 给每头奶牛发了号牌，上面写着一个 $1 \\ldots S$ 之间的数字（$1 \\leq S \\leq 25$），虽然这不是个完美的方法，但也有一定作用。现在 FJ 记不得坏蛋们的具体号码，但他给出了一个模式串。原坏蛋的号码相同，模式串中的号码依旧相同，模式串中坏蛋号码的大小关系也和原号码相同。\n\n例如模式串：$1,4,4,3,2,1$，原来的 $6$ 只坏蛋，最前面和最后面的号码相等且最小（不一定是 $1$），位置 $2,3$ 的坏蛋号码相同且最大（不一定是 $4$）。\n\n现在有这样一个队列：$5, 6, 2, 10, 10, 7, 3, 2, 9$，它的子串 $2, 10, 10, 7, 3, 2$ 匹配模式串的相等关系和大小关系，这就可能是一个坏蛋团伙。\n\n请找出所有团伙的可能情况。 ", "inputFormat": "第一行三个整数 $N,K,S$。\n\n接下来 $N$ 行，每行一个整数，代表第 $i$ 奶牛的编号。\n\n接下来 $K$ 行，每行一个整数，表示模式串中第 $i$ 个位置的号码。", "outputFormat": "第一行输出一个整数 $B$。\n\n接下来 $B$ 行，每行一个整数，为一种可能的坏蛋团伙的起始位置。\n\n所有位置按升序输出。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P6081", "type": "P", "difficulty": 4, "samples": [["5\n0 2 2 7\n3 5 5 8\n4 2 6 4\n6 1 8 6\n0 0 8 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "USACO"], "title": "[USACO05DEC] Barn Expansion G", "background": "", "description": "Farmer John 有 $N$（$1 \\leq N \\leq 25000$）个矩形牛棚，它们的墙与坐标轴平行，且坐标在 $[0,10^6]$ 范围内。保证任意两个牛棚不重叠，但可能有公共的墙。\n\n由于奶牛数量不断增加，FJ 打算扩张牛棚。一个牛棚是可以扩张的，当且仅当它的墙与其他牛棚的墙没有公共部分。如果两个牛棚有一个公共角，这两个牛棚均不可扩张。\n\n请你求出有多少牛棚是可以扩张的。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行四个整数，分别代表牛棚左下角坐标和右上角坐标。", "outputFormat": "输出可以扩张的牛棚数量。", "hint": "前两个牛棚可以扩张。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO05DEC] Barn Expansion G", "background": "", "description": "Farmer John 有 $N$（$1 \\leq N \\leq 25000$）个矩形牛棚，它们的墙与坐标轴平行，且坐标在 $[0,10^6]$ 范围内。保证任意两个牛棚不重叠，但可能有公共的墙。\n\n由于奶牛数量不断增加，FJ 打算扩张牛棚。一个牛棚是可以扩张的，当且仅当它的墙与其他牛棚的墙没有公共部分。如果两个牛棚有一个公共角，这两个牛棚均不可扩张。\n\n请你求出有多少牛棚是可以扩张的。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行四个整数，分别代表牛棚左下角坐标和右上角坐标。", "outputFormat": "输出可以扩张的牛棚数量。", "hint": "前两个牛棚可以扩张。", "locale": "zh-CN"}}}
{"pid": "P6082", "type": "P", "difficulty": 4, "samples": [["9\n-3 -4 2 4 -2 3 4 6\n4 4 2 2 2 2 2 2\n1 2\n1 3\n1 4\n2 5\n2 6\n3 7\n4 8\n4 9", "9\nsolution is unique"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2015", "各省省选", "江苏"], "title": "[JSOI2015] salesman", "background": "", "description": "某售货员小 T 要到若干城镇去推销商品,由于该地区是交通不便的山区，任意两个城镇之间都只有唯一的可能经过其它城镇的路线。 小 T 可以准确地估计出在每个城镇停留的净收益。这些净收益可能是负数，即推销商品的利润抵不上花费。由于交通不便，小 T 经过每个城镇都需要停留，在每个城镇的停留次数与在该地的净收益无关，因为很多费用不是计次收取的，而每个城镇对小 T 的商品需求也是相对固定的，停留一次后就饱和了。每个城镇为了强化治安，对外地人的最多停留次数有严格的规定。\n\n请你帮小 T 设计一个收益最大的巡回方案,即从家乡出发，在经过的每个城镇停留，最后回到家乡的旅行方案。你的程序只需输出最大收益，以及最优方案是否唯一。方案并不包括路线的细节，方案相同的标准是选择经过并停留的城镇是否相同。因为取消巡回也是一种方案，因此最大收益不会是负数。小 T 在家乡净收益是零，因为在家乡是本地人，家乡对小 T 当然没有停留次数的限制。", "inputFormat": "输入的第一行是一个正整数 $n$，表示城镇数目。城镇以 $1$ 到 $n$ 的数命名。小 T 的家乡命名为 $1$。\n\n第二行和第三行都包含以空格隔开的 $n-1$ 个整数。第二行的第 $i$ 个数表示在城镇 $i+1$ 停留的净收益。第三行的第 $i$ 个数表示城镇 $i+1$ 规定的最大停留次数。所有的最大停留次数都不小于 $2$。\n\n接下来的 $n-1$ 行，每行两个 $1$ 到 $n$ 的正整数 $x,y$，之间以一个空格\n隔开，表示 $x,y$ 之间有一条不经过其它城镇的双向道路。输入数据保证所有城镇是连通的。 ", "outputFormat": "输出有两行。第一行包含一个自然数，表示巡回旅行的最大收益。如果该方案唯一，在第二行输出 `solution is unique`，否则在第二行输出 `solution is not unique`。", "hint": "#### 样例说明\n\n最佳路线包括城镇 $1,2,4,5,9$。\n\n---\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，$5\\leq n\\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2015] salesman", "background": "", "description": "某售货员小 T 要到若干城镇去推销商品,由于该地区是交通不便的山区，任意两个城镇之间都只有唯一的可能经过其它城镇的路线。 小 T 可以准确地估计出在每个城镇停留的净收益。这些净收益可能是负数，即推销商品的利润抵不上花费。由于交通不便，小 T 经过每个城镇都需要停留，在每个城镇的停留次数与在该地的净收益无关，因为很多费用不是计次收取的，而每个城镇对小 T 的商品需求也是相对固定的，停留一次后就饱和了。每个城镇为了强化治安，对外地人的最多停留次数有严格的规定。\n\n请你帮小 T 设计一个收益最大的巡回方案,即从家乡出发，在经过的每个城镇停留，最后回到家乡的旅行方案。你的程序只需输出最大收益，以及最优方案是否唯一。方案并不包括路线的细节，方案相同的标准是选择经过并停留的城镇是否相同。因为取消巡回也是一种方案，因此最大收益不会是负数。小 T 在家乡净收益是零，因为在家乡是本地人，家乡对小 T 当然没有停留次数的限制。", "inputFormat": "输入的第一行是一个正整数 $n$，表示城镇数目。城镇以 $1$ 到 $n$ 的数命名。小 T 的家乡命名为 $1$。\n\n第二行和第三行都包含以空格隔开的 $n-1$ 个整数。第二行的第 $i$ 个数表示在城镇 $i+1$ 停留的净收益。第三行的第 $i$ 个数表示城镇 $i+1$ 规定的最大停留次数。所有的最大停留次数都不小于 $2$。\n\n接下来的 $n-1$ 行，每行两个 $1$ 到 $n$ 的正整数 $x,y$，之间以一个空格\n隔开，表示 $x,y$ 之间有一条不经过其它城镇的双向道路。输入数据保证所有城镇是连通的。 ", "outputFormat": "输出有两行。第一行包含一个自然数，表示巡回旅行的最大收益。如果该方案唯一，在第二行输出 `solution is unique`，否则在第二行输出 `solution is not unique`。", "hint": "#### 样例说明\n\n最佳路线包括城镇 $1,2,4,5,9$。\n\n---\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，$5\\leq n\\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P6083", "type": "P", "difficulty": 5, "samples": [["5\n11100\n11000\n10111\n11000\n11100", "2 2 3 3 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2015", "二分", "各省省选", "江苏", "哈希 hashing"], "title": "[JSOI2015] symmetry", "background": "", "description": "张老师正在课堂上讲解正方形的对称模式。为了简单起见，他用 $01$ 方阵代表一个正方形图形，即把正方形分解成 $n\\times n$ 的方格阵，$0$ 代表一个白色方格，$1$ 代表一个黑色方格。\n\n首先讲到的是容易辨别的轴对称，正方形有 $4$ 个对称轴，分别是水平中线，竖直中线和两条对角线。如果一个正方形图形以某个对称轴做反射变换后保持不变，就称为轴对称图形。例如下面的两个图形都是轴对称图形。\n\n```plain\n100  010\n100  101\n111  000\n```\n\n张老师继续讲解正方形的旋转对称。如果一个正方形图形以中心点旋转 $180$ 度后保持不变，就称为 $180$ 度对称图形。如果以中心点顺时针旋转 $90$ 度后保持不变，就称为 $90$ 度对称图形，例如下面的两个图形左边是 $180$ 度对称图形，右边是 $90$ 度对称图形。\n\n```plain\n0011  1011\n1110  1110\n0111  0111\n1100  1101\n```\n\n张老师接着说，如果一个正方形图形具有两个互相垂直的对称轴，就称为 $4$ 对称图形，如果关于 $4$ 个对称轴全部对称，就称为 $8$ 对称图形。按照定义，$90$ 度对称图形也是 $180$ 度对称图形，$8$ 对称图形也是 $4$ 对称图形。当正方形图形的边长为偶数时，该图形的中心是最中间 $4$ 个方格的公共顶点，当正方形图形的边长为奇数时，该图形有一个中心方格，该图\n形的中心也是它的中心方格的中心。边长为 $1$ 的图形显然是 $8$ 对称图形。\n\n张老师给学生证明了两个定理。\n\n- 定理 $1$：一个正方形图形是 $4$ 对称图形当且仅对它是 $180$ 度对称图形和轴对称图形。\n- 定理 $2$：一个正方形图形是 $8$ 对称图形当且仅对它是 $90$ 度对称图形和轴对称图形。\n\n最后是练习时间，张老师要求学生寻找在大正方形图形中出现的各种对称图形。请你编程实现这个要求。设输入一个 $01$ 方阵，输出满足 $8$ 对称，$90$ 度对称，$4$ 对称，$180$ 度对称和轴对称的最大子连续方阵的边长。子连续方阵是指选择若干相邻行列的子方阵，代表在大图形中出现的小图形。", "inputFormat": "输入的第一行是一个正整数 $n$，表示大正方形图形的边长。然后是 $n$ 行长度为 $n$ 的 $01$ 字符串。", "outputFormat": "输出有一行，包含 $5$ 个以空格隔开的自然数，分别表示在输入中出现的最大 $8$ 对称，$90$ 度对称，$4$ 对称，$180$ 度对称和轴对称的子连续方阵的行数。", "hint": "#### 样例说明\n\n大图形有水平对称轴，左上角有一个 $2\\times 2$ 的 $8$ 对称图形，中间 $3$ 行最右 $3$ 列构成 $4$ 对称图形。\n\n---\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，$5\\leq n\\leq 500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2015] symmetry", "background": "", "description": "张老师正在课堂上讲解正方形的对称模式。为了简单起见，他用 $01$ 方阵代表一个正方形图形，即把正方形分解成 $n\\times n$ 的方格阵，$0$ 代表一个白色方格，$1$ 代表一个黑色方格。\n\n首先讲到的是容易辨别的轴对称，正方形有 $4$ 个对称轴，分别是水平中线，竖直中线和两条对角线。如果一个正方形图形以某个对称轴做反射变换后保持不变，就称为轴对称图形。例如下面的两个图形都是轴对称图形。\n\n```plain\n100  010\n100  101\n111  000\n```\n\n张老师继续讲解正方形的旋转对称。如果一个正方形图形以中心点旋转 $180$ 度后保持不变，就称为 $180$ 度对称图形。如果以中心点顺时针旋转 $90$ 度后保持不变，就称为 $90$ 度对称图形，例如下面的两个图形左边是 $180$ 度对称图形，右边是 $90$ 度对称图形。\n\n```plain\n0011  1011\n1110  1110\n0111  0111\n1100  1101\n```\n\n张老师接着说，如果一个正方形图形具有两个互相垂直的对称轴，就称为 $4$ 对称图形，如果关于 $4$ 个对称轴全部对称，就称为 $8$ 对称图形。按照定义，$90$ 度对称图形也是 $180$ 度对称图形，$8$ 对称图形也是 $4$ 对称图形。当正方形图形的边长为偶数时，该图形的中心是最中间 $4$ 个方格的公共顶点，当正方形图形的边长为奇数时，该图形有一个中心方格，该图\n形的中心也是它的中心方格的中心。边长为 $1$ 的图形显然是 $8$ 对称图形。\n\n张老师给学生证明了两个定理。\n\n- 定理 $1$：一个正方形图形是 $4$ 对称图形当且仅对它是 $180$ 度对称图形和轴对称图形。\n- 定理 $2$：一个正方形图形是 $8$ 对称图形当且仅对它是 $90$ 度对称图形和轴对称图形。\n\n最后是练习时间，张老师要求学生寻找在大正方形图形中出现的各种对称图形。请你编程实现这个要求。设输入一个 $01$ 方阵，输出满足 $8$ 对称，$90$ 度对称，$4$ 对称，$180$ 度对称和轴对称的最大子连续方阵的边长。子连续方阵是指选择若干相邻行列的子方阵，代表在大图形中出现的小图形。", "inputFormat": "输入的第一行是一个正整数 $n$，表示大正方形图形的边长。然后是 $n$ 行长度为 $n$ 的 $01$ 字符串。", "outputFormat": "输出有一行，包含 $5$ 个以空格隔开的自然数，分别表示在输入中出现的最大 $8$ 对称，$90$ 度对称，$4$ 对称，$180$ 度对称和轴对称的子连续方阵的行数。", "hint": "#### 样例说明\n\n大图形有水平对称轴，左上角有一个 $2\\times 2$ 的 $8$ 对称图形，中间 $3$ 行最右 $3$ 列构成 $4$ 对称图形。\n\n---\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，$5\\leq n\\leq 500$。", "locale": "zh-CN"}}}
{"pid": "P6084", "type": "P", "difficulty": 6, "samples": [["2\n4\n1 4\n2 4\n3 4\n5\n1 3\n2 3\n3 4\n4 5", "1\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2015", "各省省选", "江苏", "哈希 hashing"], "title": "[JSOI2015] isomorphism", "background": "", "description": "一个无向树的度数为 $2$ 的结点称为假结点，其它结点称为真结点。一个无向树的简化树其结点由原树的全体真结点组成，两个真结点之间有边当且仅当它们在原树中有边，或者在原树中有一条联结这两个结点的路，其中间节点全是假结点。两个无向树各自的简化树如果同构，即存在结点之间的一一对应，使得在一个树中的任意两个结点之间有边当且仅当它们的对应结点在另一个树中有边，则称原来的两个无向树实质同构。\n\n给定若干个无向树，将相互实质同构的无向树只保留一个其余删除。统计剩下的相互不实质同构的无向树个数，并将它们的简化树结点个数从小到大输出。", "inputFormat": "第一行只有一个正整数 $m$。\n\n后面依次输入 $m$ 棵无向树，每棵无向树先用一行输入结点个数 $n$，结点就用 $1$ 到 $n$ 表示，然后用 $n-1$ 行输入 $n-1$ 条无向边，每行有两个 $1$ 到 $n$  之间的不同的正整数，用一个空格隔开，代表这两个结点之间有无向边。两棵树之间无空行。\n", "outputFormat": "第一行输出一个正整数，即输入中不计实质同构包含无向树的个数 $m_0\\ (1\\leq m_0\\leq m)$。\n\n第二行包含不严格递增的 $m_0$ 个正整数，表示这 $m_0$ 棵无向树的简化树结点个数。相邻两数用一个空格隔开。", "hint": "#### 数据范围\n\n对于 $100\\%$ 的数据，$2\\leq m\\leq 20, 2\\leq n\\leq 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2015] isomorphism", "background": "", "description": "一个无向树的度数为 $2$ 的结点称为假结点，其它结点称为真结点。一个无向树的简化树其结点由原树的全体真结点组成，两个真结点之间有边当且仅当它们在原树中有边，或者在原树中有一条联结这两个结点的路，其中间节点全是假结点。两个无向树各自的简化树如果同构，即存在结点之间的一一对应，使得在一个树中的任意两个结点之间有边当且仅当它们的对应结点在另一个树中有边，则称原来的两个无向树实质同构。\n\n给定若干个无向树，将相互实质同构的无向树只保留一个其余删除。统计剩下的相互不实质同构的无向树个数，并将它们的简化树结点个数从小到大输出。", "inputFormat": "第一行只有一个正整数 $m$。\n\n后面依次输入 $m$ 棵无向树，每棵无向树先用一行输入结点个数 $n$，结点就用 $1$ 到 $n$ 表示，然后用 $n-1$ 行输入 $n-1$ 条无向边，每行有两个 $1$ 到 $n$  之间的不同的正整数，用一个空格隔开，代表这两个结点之间有无向边。两棵树之间无空行。\n", "outputFormat": "第一行输出一个正整数，即输入中不计实质同构包含无向树的个数 $m_0\\ (1\\leq m_0\\leq m)$。\n\n第二行包含不严格递增的 $m_0$ 个正整数，表示这 $m_0$ 棵无向树的简化树结点个数。相邻两数用一个空格隔开。", "hint": "#### 数据范围\n\n对于 $100\\%$ 的数据，$2\\leq m\\leq 20, 2\\leq n\\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P6085", "type": "P", "difficulty": 6, "samples": [["6 3\n1 2 1000\n2 3 1000\n4 5 500\n2\n1 4 300\n3 5 300", "3100"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "各省省选", "江苏"], "title": "[JSOI2013] 吃货 JYY", "background": "作为 JSOI 的著名吃货，JYY 的理想之一就是吃遍全世界的美食。要走遍全世界当然需要不断的坐飞机了。而不同的航班上所提供的餐食是很不一样的：比如中国的航班会提供中餐，英国的航班有奶茶和蛋糕，澳大利亚的航班有海鲜，新加坡的航班会有冰激凌……\n\nJYY 选出了一些他特别希望品尝餐食的航班，希望制定一个花费最少的旅游计划，能够从南京出发，乘坐所有这些航班并最后回到南京。", "description": "世界上一共有 $N$ 个 JYY 愿意去的城市，分别从 $1$ 编号到 $N$。JYY 选出了 $K$ 个他一定要乘坐的航班。除此之外，还有 $M$ 个 JYY 没有特别的偏好，可以乘坐也可以不乘坐的航班。\n\n一个航班我们用一个三元组 $(x,y,z)$ 来表示，意义是这趟航班连接城市 $x$ 和 $y$，并且机票费用是 $z$。每个航班都是往返的，所以 JYY 花费 $z$ 的钱，既可以选择从 $x$ 飞往 $y$，也可以选择从 $y$ 飞往 $x$。\n\n南京的编号是 $1$，现在 JYY 打算从南京出发，乘坐所有 K 个航班，并且最后回到南京，请你帮他求出最小的花费。\n", "inputFormat": "输入数据的第一行包含两个整数 $N$ 和 $K$。\n\n接下来 $K$ 行，每行三个整数 $x,y,z$ 描述必须乘坐的航班的信息，数据保证在这 $K$ 个航班中，不会有两个不同的航班在同一对城市之间执飞。\n\n第 $K+2$ 行包含一个整数 $M$，接下来 $M$ 行，每行三个整数 $x,y,z$ 描述可以乘坐也可以不乘坐的航班信息。", "outputFormat": "输出一行一个整数，表示最少的花费。数据保证一定存在满足 JYY 要求的旅行方案。", "hint": "### 样例解释\n\n一个可行的最佳方案为 $1\\rightarrow 2\\rightarrow 3\\rightarrow 5\\rightarrow 4\\rightarrow 1$。\n\n机票所需的费用为 $1000+1000+300+500+300=3100$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$2\\leq N\\leq 13,0\\leq K\\leq 78,2\\leq M\\leq 200,1\\leq x,y\\leq N,1\\leq z\\leq 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2013] 吃货 JYY", "background": "作为 JSOI 的著名吃货，JYY 的理想之一就是吃遍全世界的美食。要走遍全世界当然需要不断的坐飞机了。而不同的航班上所提供的餐食是很不一样的：比如中国的航班会提供中餐，英国的航班有奶茶和蛋糕，澳大利亚的航班有海鲜，新加坡的航班会有冰激凌……\n\nJYY 选出了一些他特别希望品尝餐食的航班，希望制定一个花费最少的旅游计划，能够从南京出发，乘坐所有这些航班并最后回到南京。", "description": "世界上一共有 $N$ 个 JYY 愿意去的城市，分别从 $1$ 编号到 $N$。JYY 选出了 $K$ 个他一定要乘坐的航班。除此之外，还有 $M$ 个 JYY 没有特别的偏好，可以乘坐也可以不乘坐的航班。\n\n一个航班我们用一个三元组 $(x,y,z)$ 来表示，意义是这趟航班连接城市 $x$ 和 $y$，并且机票费用是 $z$。每个航班都是往返的，所以 JYY 花费 $z$ 的钱，既可以选择从 $x$ 飞往 $y$，也可以选择从 $y$ 飞往 $x$。\n\n南京的编号是 $1$，现在 JYY 打算从南京出发，乘坐所有 K 个航班，并且最后回到南京，请你帮他求出最小的花费。\n", "inputFormat": "输入数据的第一行包含两个整数 $N$ 和 $K$。\n\n接下来 $K$ 行，每行三个整数 $x,y,z$ 描述必须乘坐的航班的信息，数据保证在这 $K$ 个航班中，不会有两个不同的航班在同一对城市之间执飞。\n\n第 $K+2$ 行包含一个整数 $M$，接下来 $M$ 行，每行三个整数 $x,y,z$ 描述可以乘坐也可以不乘坐的航班信息。", "outputFormat": "输出一行一个整数，表示最少的花费。数据保证一定存在满足 JYY 要求的旅行方案。", "hint": "### 样例解释\n\n一个可行的最佳方案为 $1\\rightarrow 2\\rightarrow 3\\rightarrow 5\\rightarrow 4\\rightarrow 1$。\n\n机票所需的费用为 $1000+1000+300+500+300=3100$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$2\\leq N\\leq 13,0\\leq K\\leq 78,2\\leq M\\leq 200,1\\leq x,y\\leq N,1\\leq z\\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P6086", "type": "P", "difficulty": 5, "samples": [["6 1\n3 6 4 6 1", "29"], ["6 2\n4 6 5 2", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化", "Prüfer 序列", "模板题"], "title": "【模板】Prüfer(Prufer) 序列", "background": "Prüfer 序列又写作 Prufer 序列。", "description": "请实现 Prüfer 序列和无根树的相互转化。\n\n为方便你实现代码，尽管是无根树，我们在读入时仍将 $n$ 设为其根。\n\n对于一棵无根树，设 $f_{1\\dots n-1}$ 为其**父亲序列**（$f_i$ 表示 $i$ 在 $n$ 为根时的父亲），设 $p_{1 \\dots n-2}$ 为其 **Prüfer 序列**。\n\n另外，对于一个长度为 $m$ 的序列 $a_{1 \\dots m}$，我们设其**权值**为 $\\operatorname{xor}_{i = 1}^m i \\times a_i$。", "inputFormat": "第一行两个整数 $n,m$，表示树的点数和转化类型。\n\n若 $m = 1$，第二行一行 $n-1$ 个整数，表示父亲序列。  \n若 $m = 2$，第二行一行 $n-2$ 个整数，表示 Prüfer 序列。", "outputFormat": "若 $m = 1$，一行一个整数，表示给出的父亲序列对应的 Prüfer 序列的权值。  \n若 $m = 2$，一行一个整数，表示给出的 Prüfer 序列对应的父亲序列的权值。", "hint": "**【样例 1 解释】**\n\n$p = \\{6\\ 1\\ 3\\ 4\\}$。\n\n**【样例 2 解释】**\n\n$f = \\{4\\ 6\\ 6\\ 5\\ 2\\}$。\n\n---\n\n**【数据范围】**\n\n| 测试点编号 | $2 \\le n \\le $  | $m = $ |\n| :--------: | :-------------: | :----: |\n|    $1$     |     $10^3$      |  $1$   |\n|    $2$     |     $10^5$      |  $1$   |\n|    $3$     |     $10^5$      |  $1$   |\n|    $4$     | $5 \\times 10^6$ |  $1$   |\n|    $5$     | $5 \\times 10^6$ |  $1$   |\n|    $6$     |     $10^3$      |  $2$   |\n|    $7$     |     $10^5$      |  $2$   |\n|    $8$     |     $10^5$      |  $2$   |\n|    $9$     | $5 \\times 10^6$ |  $2$   |\n|    $10$    | $5 \\times 10^6$ |  $2$   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】Prüfer(Prufer) 序列", "background": "Prüfer 序列又写作 Prufer 序列。", "description": "请实现 Prüfer 序列和无根树的相互转化。\n\n为方便你实现代码，尽管是无根树，我们在读入时仍将 $n$ 设为其根。\n\n对于一棵无根树，设 $f_{1\\dots n-1}$ 为其**父亲序列**（$f_i$ 表示 $i$ 在 $n$ 为根时的父亲），设 $p_{1 \\dots n-2}$ 为其 **Prüfer 序列**。\n\n另外，对于一个长度为 $m$ 的序列 $a_{1 \\dots m}$，我们设其**权值**为 $\\operatorname{xor}_{i = 1}^m i \\times a_i$。", "inputFormat": "第一行两个整数 $n,m$，表示树的点数和转化类型。\n\n若 $m = 1$，第二行一行 $n-1$ 个整数，表示父亲序列。  \n若 $m = 2$，第二行一行 $n-2$ 个整数，表示 Prüfer 序列。", "outputFormat": "若 $m = 1$，一行一个整数，表示给出的父亲序列对应的 Prüfer 序列的权值。  \n若 $m = 2$，一行一个整数，表示给出的 Prüfer 序列对应的父亲序列的权值。", "hint": "**【样例 1 解释】**\n\n$p = \\{6\\ 1\\ 3\\ 4\\}$。\n\n**【样例 2 解释】**\n\n$f = \\{4\\ 6\\ 6\\ 5\\ 2\\}$。\n\n---\n\n**【数据范围】**\n\n| 测试点编号 | $2 \\le n \\le $  | $m = $ |\n| :--------: | :-------------: | :----: |\n|    $1$     |     $10^3$      |  $1$   |\n|    $2$     |     $10^5$      |  $1$   |\n|    $3$     |     $10^5$      |  $1$   |\n|    $4$     | $5 \\times 10^6$ |  $1$   |\n|    $5$     | $5 \\times 10^6$ |  $1$   |\n|    $6$     |     $10^3$      |  $2$   |\n|    $7$     |     $10^5$      |  $2$   |\n|    $8$     |     $10^5$      |  $2$   |\n|    $9$     | $5 \\times 10^6$ |  $2$   |\n|    $10$    | $5 \\times 10^6$ |  $2$   |", "locale": "zh-CN"}}}
{"pid": "P6087", "type": "P", "difficulty": 6, "samples": [["1\n5 1 2 4\n1 2 3 4 5", "0.7500"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2015", "二分", "各省省选", "单调队列", "江苏", "分数规划"], "title": "[JSOI2015] 送礼物", "background": "JYY 和 CX 的结婚纪念日即将到来，JYY 来到萌萌开的礼品店选购纪念礼物。\n\n萌萌的礼品店很神奇，所有出售的礼物都按照特定的顺序都排成一列，而且相邻\n的礼物之间有一种神秘的美感。于是，JYY 决定从中挑选连续的一些礼物，但究\n竟选哪些呢？", "description": "假设礼品店一共有 $N$ 件礼物排成一列，每件礼物都有它的美观度。排在第 $i\\ (1\\leq i\\leq N)$ 个位置的礼物美观度为正整数 $A_i$。JYY 决定选出其中连续的一段，即编号为 $i,i+1,\\cdots,j-1,j$ 的礼物。选出这些礼物的美观程度定义为\n\n$$\\frac{M(i,j)-m(i,j)}{j-i+K}$$\n\n其中 $M(i,j)$ 表示 $\\max\\{A_i,A_{i+1},\\cdots,A_j\\}$，$m(i,j)$ 表示 $\\min\\{A_i,A_{i+1},\\cdots,A_j\\}$，$K$ 为给定的正整数。\n由于不能显得太小气，所以 JYY 所选礼物的件数最少为 $L$ 件；同时，选得太多也不好拿，因此礼物最多选 $R$ 件。JYY 应该如何选择，才能得到最大的美观程度？由于礼物实在太多挑花眼，JYY 打算把这个问题交给会编程的你。\n\n", "inputFormat": "**本题每个测试点有多组数据。**\n\n输入第一行包含一个正整数 $T$，表示有 $T$ 组数据。\n\n每组数据包含两行。第一行四个非负整数 $N,K,L,R$。第二行包含 $N$ 个正整数，依次表示 $A_1,A_2,\\cdots,A_n$。", "outputFormat": "输出 $T$ 行，每行一个非负实数，依次对应每组数据的答案，数据保证答案不\n会超过 $10^3$。输出四舍五入保留 $4$ 位小数。", "hint": "对于 $100\\%$ 的数据，$T\\leq 10$，$N,K\\leq 5\\times 10^4$，$1\\leq A_i\\leq 10^8$，$2\\leq L,R\\leq N$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2015] 送礼物", "background": "JYY 和 CX 的结婚纪念日即将到来，JYY 来到萌萌开的礼品店选购纪念礼物。\n\n萌萌的礼品店很神奇，所有出售的礼物都按照特定的顺序都排成一列，而且相邻\n的礼物之间有一种神秘的美感。于是，JYY 决定从中挑选连续的一些礼物，但究\n竟选哪些呢？", "description": "假设礼品店一共有 $N$ 件礼物排成一列，每件礼物都有它的美观度。排在第 $i\\ (1\\leq i\\leq N)$ 个位置的礼物美观度为正整数 $A_i$。JYY 决定选出其中连续的一段，即编号为 $i,i+1,\\cdots,j-1,j$ 的礼物。选出这些礼物的美观程度定义为\n\n$$\\frac{M(i,j)-m(i,j)}{j-i+K}$$\n\n其中 $M(i,j)$ 表示 $\\max\\{A_i,A_{i+1},\\cdots,A_j\\}$，$m(i,j)$ 表示 $\\min\\{A_i,A_{i+1},\\cdots,A_j\\}$，$K$ 为给定的正整数。\n由于不能显得太小气，所以 JYY 所选礼物的件数最少为 $L$ 件；同时，选得太多也不好拿，因此礼物最多选 $R$ 件。JYY 应该如何选择，才能得到最大的美观程度？由于礼物实在太多挑花眼，JYY 打算把这个问题交给会编程的你。\n\n", "inputFormat": "**本题每个测试点有多组数据。**\n\n输入第一行包含一个正整数 $T$，表示有 $T$ 组数据。\n\n每组数据包含两行。第一行四个非负整数 $N,K,L,R$。第二行包含 $N$ 个正整数，依次表示 $A_1,A_2,\\cdots,A_n$。", "outputFormat": "输出 $T$ 行，每行一个非负实数，依次对应每组数据的答案，数据保证答案不\n会超过 $10^3$。输出四舍五入保留 $4$ 位小数。", "hint": "对于 $100\\%$ 的数据，$T\\leq 10$，$N,K\\leq 5\\times 10^4$，$1\\leq A_i\\leq 10^8$，$2\\leq L,R\\leq N$。", "locale": "zh-CN"}}}
{"pid": "P6088", "type": "P", "difficulty": 5, "samples": [["4\n1 2 ab\n2 4 ac\n1 3 bc\n3\n1 4 a\n3 4 b\n3 2 ab", "2\n1\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "各省省选", "江苏", "字典树 Trie"], "title": "[JSOI2015] 字符串树", "background": "萌萌买了一颗字符串树的种子，春天种下去以后夏天就能长出一棵很大的字符串树。字符串树很奇特，树枝上都密密麻麻写满了字符串，看上去很复杂的样\n子。", "description": "字符串树本质上还是一棵树，即 $N$ 个节点 $N-1$ 条边的连通无向无环图，节点从 $1$ 到 $N$ 编号。与普通的树不同的是，树上的每条边都对应了一个字符串。萌萌和 JYY 在树下玩的时候，萌萌决定考一考 JYY。每次萌萌都写出一个字符串 $S$ 和两个节点 $U,V$，JYY 需要立即回答 $U$ 和 $V$ 之间的最短路径（即 $U,V$ 之间边数最少的路径，由于给定的是一棵树，这样的路径是唯一的）上有多少个字符串以 $S$ 为前缀。\n\nJYY 虽然精通编程，但对字符串处理却不在行。所以他请你帮他解决萌萌的难题。", "inputFormat": "输入第一行包含一个整数 $N$，代表字符串树的节点数量。\n\n接下来 $N-1$ 行，每行先是两个数 $U,V$，然后是一个字符串 $S$，表示节点 $U$ 和节点 $V$ 之间有一条直接相连的边，这条边上的字符串是 $S$。输入数据保证给出的是一棵合法的树。\n\n接下来一行包含一个整数 $Q$，表示萌萌的问题数。\n\n接下来 $Q$ 行，每行先是两个数 $U,V$，然后是一个字符串 $S$，表示萌萌的一个问题是节点 $U$ 和节点 $V$ 之间的最短路径上有多少字符串以 $S$ 为前缀。", "outputFormat": "输出 $Q$ 行，每行对应萌萌的一个问题的答案。", "hint": "对于 $100\\%$ 的数据，$1\\leq N,Q\\leq 10^5$，输入所有字符串长度不超过 $10$ 且只包含 `a~z` 的小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2015] 字符串树", "background": "萌萌买了一颗字符串树的种子，春天种下去以后夏天就能长出一棵很大的字符串树。字符串树很奇特，树枝上都密密麻麻写满了字符串，看上去很复杂的样\n子。", "description": "字符串树本质上还是一棵树，即 $N$ 个节点 $N-1$ 条边的连通无向无环图，节点从 $1$ 到 $N$ 编号。与普通的树不同的是，树上的每条边都对应了一个字符串。萌萌和 JYY 在树下玩的时候，萌萌决定考一考 JYY。每次萌萌都写出一个字符串 $S$ 和两个节点 $U,V$，JYY 需要立即回答 $U$ 和 $V$ 之间的最短路径（即 $U,V$ 之间边数最少的路径，由于给定的是一棵树，这样的路径是唯一的）上有多少个字符串以 $S$ 为前缀。\n\nJYY 虽然精通编程，但对字符串处理却不在行。所以他请你帮他解决萌萌的难题。", "inputFormat": "输入第一行包含一个整数 $N$，代表字符串树的节点数量。\n\n接下来 $N-1$ 行，每行先是两个数 $U,V$，然后是一个字符串 $S$，表示节点 $U$ 和节点 $V$ 之间有一条直接相连的边，这条边上的字符串是 $S$。输入数据保证给出的是一棵合法的树。\n\n接下来一行包含一个整数 $Q$，表示萌萌的问题数。\n\n接下来 $Q$ 行，每行先是两个数 $U,V$，然后是一个字符串 $S$，表示萌萌的一个问题是节点 $U$ 和节点 $V$ 之间的最短路径上有多少字符串以 $S$ 为前缀。", "outputFormat": "输出 $Q$ 行，每行对应萌萌的一个问题的答案。", "hint": "对于 $100\\%$ 的数据，$1\\leq N,Q\\leq 10^5$，输入所有字符串长度不超过 $10$ 且只包含 `a~z` 的小写字母。", "locale": "zh-CN"}}}
{"pid": "P6089", "type": "P", "difficulty": 5, "samples": [["5 5\n0.5\n5 1\n3 2\n2 2\n2 1\n3 1", "0.89"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "各省省选", "江苏", "概率论"], "title": "[JSOI2015] 非诚勿扰", "background": "JYY 赶上了互联网创业的大潮，为非诚勿扰开发了最新的手机 App 实现单身大龄青年之间的“速配”。然而随着用户数量的增长，JYY 发现现有速配的算法似乎很难满足大家的要求，因此 JYY 决定请你来调查一下其中的原因。", "description": "应用的后台一共有 $N$ 个女性和 $N$ 个男性，他们每个人都希望能够找到自己的合适伴侣。为了方便，每个男性都被编上了 $1$ 到 $N$ 之间的一个号码，并且任意两个人的号码不一样。每个女性也被如此编号。\n\nJYY 应用的最大特点是赋予女性较高的选择权，让每个女性指定自己的“如意郎君列表”。每个女性的如意郎君列表都是所有男性的一个子集，并且可能为空。如果列表非空，她们会在其中选择一个男性作为自己最终接受的对象。\n\nJYY 用如下算法来为每个女性速配最终接受的男性：将“如意郎君列表”中的男性按照编号从小到大的顺序呈现给她。对于每次呈现，她将独立地以 $P$ 的概率接受这个男性（换言之，会以 $1-P$ 的概率拒绝这个男性）。如果她选择了拒绝，App 就会呈现列表中下一个男性，以此类推。如果列表中所有的男性都已经呈现，那么中介所会重新按照列表的顺序来呈现这些男性，直到她接受了某个男性为止。显然，在这种规则下，每个女性只能选择接受一个男性，而一个男性可能被多个女性所接受。当然，也可能有部分男性不被任何一个女性接受。\n\n这样，每个女性就有了自己接受的男性（“如意郎君列表”为空的除外）。现在考虑任意两个不同的、如意郎君列表非空的女性 $a$ 和 $b$，如果 $a$ 的编号比 $b$ 的编号小，而 $a$ 选择的男性的编号比 $b$ 选择的编号大，那么女性 $a$ 和女性 $b$ 就叫做一对不稳定因素。\n\n由于每个女性选择的男性是有一定的随机性的，所以不稳定因素的数目也是有一定随机性的。JYY 希望你能够求得不稳定因素的期望个数（即平均数目），从而进一步研究为什么速配算法不能满足大家的需求。", "inputFormat": "输入第一行包含 $2$ 个自然数 $N,M$，表示有 $N$ 个女性和 $N$ 个男性，以及所有女性的“如意郎君列表”长度之和是 $M$。\n\n接下来一行一个实数 $P$，为女性接受男性的概率。\n\n接下来 $M$ 行，每行包含两个整数 $a,b$，表示男性 $b$ 在女性 $a$ 的“如意郎君列表”中。", "outputFormat": "输出 $1$ 行，包含一个实数，四舍五入后保留到小数点后 $2$ 位，表示不稳定因素的期望数目。", "hint": "对于 $100\\%$ 的数据，$1\\leq N,M\\leq 5\\times 10^5$，$0.4\\leq P<0.6$。\n\n输入保证每个女性的“如意郎君列表”中的男性出现且仅出现一次。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2015] 非诚勿扰", "background": "JYY 赶上了互联网创业的大潮，为非诚勿扰开发了最新的手机 App 实现单身大龄青年之间的“速配”。然而随着用户数量的增长，JYY 发现现有速配的算法似乎很难满足大家的要求，因此 JYY 决定请你来调查一下其中的原因。", "description": "应用的后台一共有 $N$ 个女性和 $N$ 个男性，他们每个人都希望能够找到自己的合适伴侣。为了方便，每个男性都被编上了 $1$ 到 $N$ 之间的一个号码，并且任意两个人的号码不一样。每个女性也被如此编号。\n\nJYY 应用的最大特点是赋予女性较高的选择权，让每个女性指定自己的“如意郎君列表”。每个女性的如意郎君列表都是所有男性的一个子集，并且可能为空。如果列表非空，她们会在其中选择一个男性作为自己最终接受的对象。\n\nJYY 用如下算法来为每个女性速配最终接受的男性：将“如意郎君列表”中的男性按照编号从小到大的顺序呈现给她。对于每次呈现，她将独立地以 $P$ 的概率接受这个男性（换言之，会以 $1-P$ 的概率拒绝这个男性）。如果她选择了拒绝，App 就会呈现列表中下一个男性，以此类推。如果列表中所有的男性都已经呈现，那么中介所会重新按照列表的顺序来呈现这些男性，直到她接受了某个男性为止。显然，在这种规则下，每个女性只能选择接受一个男性，而一个男性可能被多个女性所接受。当然，也可能有部分男性不被任何一个女性接受。\n\n这样，每个女性就有了自己接受的男性（“如意郎君列表”为空的除外）。现在考虑任意两个不同的、如意郎君列表非空的女性 $a$ 和 $b$，如果 $a$ 的编号比 $b$ 的编号小，而 $a$ 选择的男性的编号比 $b$ 选择的编号大，那么女性 $a$ 和女性 $b$ 就叫做一对不稳定因素。\n\n由于每个女性选择的男性是有一定的随机性的，所以不稳定因素的数目也是有一定随机性的。JYY 希望你能够求得不稳定因素的期望个数（即平均数目），从而进一步研究为什么速配算法不能满足大家的需求。", "inputFormat": "输入第一行包含 $2$ 个自然数 $N,M$，表示有 $N$ 个女性和 $N$ 个男性，以及所有女性的“如意郎君列表”长度之和是 $M$。\n\n接下来一行一个实数 $P$，为女性接受男性的概率。\n\n接下来 $M$ 行，每行包含两个整数 $a,b$，表示男性 $b$ 在女性 $a$ 的“如意郎君列表”中。", "outputFormat": "输出 $1$ 行，包含一个实数，四舍五入后保留到小数点后 $2$ 位，表示不稳定因素的期望数目。", "hint": "对于 $100\\%$ 的数据，$1\\leq N,M\\leq 5\\times 10^5$，$0.4\\leq P<0.6$。\n\n输入保证每个女性的“如意郎君列表”中的男性出现且仅出现一次。\n", "locale": "zh-CN"}}}
{"pid": "P6090", "type": "P", "difficulty": 6, "samples": [["1\nradar", "1"], ["1\nrobot", "2"], ["2\nFLOW\nWOLF", "2"], ["2\nbaobab\nbob", "4097"], ["3\nTURING\nSUBMIT\nACCEPT", "162"], ["3\nMAN1LA\nMAN6OS\nAN4NAS", "114"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2019", "枚举", "CEOI（中欧）", "组合数学"], "title": "[CEOI 2019] 立方填词", "background": "", "description": "立方填词是一种特殊的填词游戏。填词之前，你需要选择立方体的边长 $a$ ，然后你就可以建立一个有 $a^3$ 个单位立方体的立方体了。这个大立方体有 $12$ 条边。然后，你去掉所有没有接触大立方体边的单位立方体。下图展示了当 $a=6$ 时建立的最终立方体。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zzs7dshw.png)\n\n最后，你需要给剩下的每个单位立方体填上一个字母。对于这个立方体，填词之后，每条边上的单词都应该是有意义的。每条边都可以双向阅读，只要从一个方向读起来有意义即可。\n\n下图展示了当 $a=6$ 时的一个立方体。一些单位立方体已经填上了字母。你已经可以沿这个大立方体的三条边读到 **SUBMIT**，**ACCEPT** 和 **TURING** 三个单词了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jzpyzoeu.png)\n\n给定一系列有意义的单词，每个单词可以在合法的立方体的任意一条边上出现。求可以构造多少种不同的立方体对 $998244353$ 取模。\n\n即使一个立方体可以通过旋转和镜像操作变成另一个立方体，也认为这两个立方体**是不同的**。", "inputFormat": "第一行一个整数 $n$ ，表示单词的个数。\n\n接下来 $n$ 行，每行一个单词，表示可以在大立方体的边上出现的单词。单词长度大于等于 $3$ ，并且小于等于 $10$ 。\n\n保证所有单词都不同。", "outputFormat": "输出一个整数，表示可以构造的不同立方体数对 $998244353$ 取模后的结果。", "hint": "#### 样例解释#1\n\n第一个样例中，唯一一种可能是立方体的所有边上的单词均为 **radar**。\n\n#### 样例解释#2\n\n第二个样例中，有两种立方体，其中一个旋转后可以得到另一个立方体。立方体所有边上的单词都是 **robot**，两个立方体的不同之处在于左下角的字母是 **r** 还是 **t**。\n\n#### 样例解释#3\n\n第三个样例与第二个类似，注意阅读方向不会影响答案。\n\n#### 样例解释#4\n\n第四个样例中，如果把 **bob** 填在立方体的每条边上，有一种立方体。还有 $2^\n{12} = 4096$ 种立方体，每条边都填 **baobab**（对于 $12$ 条边中的一条，我们有两种可能的阅读顺序）。\n\n#### 数据范围\n\n对于全部数据， $1 \\le n \\le 10^5$  。      \n\n详细子任务限制及分值如下表：\n\n| 子任务编号 | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | 单词中只包含小写的 `a` 到 `f` | $21$ |\n| 2 | 单词中只包含小写的 `a` 到 `p` | $29$ |\n| 3 | 单词中包含小写的 `a` 到 `p` 和大写的 `A` 到 `P` | $34$ |\n| 4 | 单词中包含小写的 `a` 到 `z`，大写的 `A` 到 `Z` 和数字 `0` 到 `9`  | $16$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2019] 立方填词", "background": "", "description": "立方填词是一种特殊的填词游戏。填词之前，你需要选择立方体的边长 $a$ ，然后你就可以建立一个有 $a^3$ 个单位立方体的立方体了。这个大立方体有 $12$ 条边。然后，你去掉所有没有接触大立方体边的单位立方体。下图展示了当 $a=6$ 时建立的最终立方体。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zzs7dshw.png)\n\n最后，你需要给剩下的每个单位立方体填上一个字母。对于这个立方体，填词之后，每条边上的单词都应该是有意义的。每条边都可以双向阅读，只要从一个方向读起来有意义即可。\n\n下图展示了当 $a=6$ 时的一个立方体。一些单位立方体已经填上了字母。你已经可以沿这个大立方体的三条边读到 **SUBMIT**，**ACCEPT** 和 **TURING** 三个单词了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jzpyzoeu.png)\n\n给定一系列有意义的单词，每个单词可以在合法的立方体的任意一条边上出现。求可以构造多少种不同的立方体对 $998244353$ 取模。\n\n即使一个立方体可以通过旋转和镜像操作变成另一个立方体，也认为这两个立方体**是不同的**。", "inputFormat": "第一行一个整数 $n$ ，表示单词的个数。\n\n接下来 $n$ 行，每行一个单词，表示可以在大立方体的边上出现的单词。单词长度大于等于 $3$ ，并且小于等于 $10$ 。\n\n保证所有单词都不同。", "outputFormat": "输出一个整数，表示可以构造的不同立方体数对 $998244353$ 取模后的结果。", "hint": "#### 样例解释#1\n\n第一个样例中，唯一一种可能是立方体的所有边上的单词均为 **radar**。\n\n#### 样例解释#2\n\n第二个样例中，有两种立方体，其中一个旋转后可以得到另一个立方体。立方体所有边上的单词都是 **robot**，两个立方体的不同之处在于左下角的字母是 **r** 还是 **t**。\n\n#### 样例解释#3\n\n第三个样例与第二个类似，注意阅读方向不会影响答案。\n\n#### 样例解释#4\n\n第四个样例中，如果把 **bob** 填在立方体的每条边上，有一种立方体。还有 $2^\n{12} = 4096$ 种立方体，每条边都填 **baobab**（对于 $12$ 条边中的一条，我们有两种可能的阅读顺序）。\n\n#### 数据范围\n\n对于全部数据， $1 \\le n \\le 10^5$  。      \n\n详细子任务限制及分值如下表：\n\n| 子任务编号 | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | 单词中只包含小写的 `a` 到 `f` | $21$ |\n| 2 | 单词中只包含小写的 `a` 到 `p` | $29$ |\n| 3 | 单词中包含小写的 `a` 到 `p` 和大写的 `A` 到 `P` | $34$ |\n| 4 | 单词中包含小写的 `a` 到 `z`，大写的 `A` 到 `Z` 和数字 `0` 到 `9`  | $16$ |", "locale": "zh-CN"}}}
{"pid": "P6091", "type": "P", "difficulty": 5, "samples": [["6\n2 1\n4 1\n25 2\n36 1\n9 6\n18 1\n", "1\n1 \n1\n3 \n8\n3 12 17 23 \n0\n\n2\n\n2\n5 11 \n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["数学", "原根", "数论", "素数判断,质数,筛法", "模板题"], "title": "【模板】原根", "background": "", "description": "给定整数 $n$，求它的所有原根。\n\n为了减小你的输出量，给出输出参数 $d$，设 $n$ 的所有原根有 $c$ 个，从小到大分别为 $g_1,\\ldots,g_c$，你只需要依次输出 $g_d,g_{2d},\\ldots,g_{\\lfloor\\frac{c}{d}\\rfloor\\times d}$。\n\n---\n\n如果你不了解原根的定义，可以自行查找资料或阅读下列定义：\n\n正整数 $g$ 是正整数 $n$ 的原根，当且仅当 $1\\leq g\\leq n-1$，且 $g$ 模 $n$ 的阶为 $\\varphi(n)$。", "inputFormat": "**本题包含多组数据**。\n\n第一行：一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行：每行两个整数 $n,d$，表示一组询问数据。", "outputFormat": "对于每组数据：\n\n第一行输出一个整数 $c$，表示 $n$ 的原根个数，第二行输出 $\\lfloor\\dfrac{c}{d}\\rfloor$ 个数，按照题目描述中要求输出。\n\n注意：即使 $\\lfloor\\dfrac{c}{d}\\rfloor=0$，也需要输出一个空行。", "hint": "【样例解释】\n\n对于第 $1,2,4,6$ 组数据，给出的 $n$ 的所有原根都出现在输出中。\n\n对于第 $3$ 组数据，$25$ 的原根集合为 $\\{2,3,8,12,13,17,22,23\\}$。\n\n对于第 $5$ 组数据，$9$ 的原根集合为 $\\{2,5\\}$。\n\n【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 10$，$2\\leq n\\leq 10^6$，$1\\leq d\\leq 200$，保证输出的数的总个数不超过 $10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】原根", "background": "", "description": "给定整数 $n$，求它的所有原根。\n\n为了减小你的输出量，给出输出参数 $d$，设 $n$ 的所有原根有 $c$ 个，从小到大分别为 $g_1,\\ldots,g_c$，你只需要依次输出 $g_d,g_{2d},\\ldots,g_{\\lfloor\\frac{c}{d}\\rfloor\\times d}$。\n\n---\n\n如果你不了解原根的定义，可以自行查找资料或阅读下列定义：\n\n正整数 $g$ 是正整数 $n$ 的原根，当且仅当 $1\\leq g\\leq n-1$，且 $g$ 模 $n$ 的阶为 $\\varphi(n)$。", "inputFormat": "**本题包含多组数据**。\n\n第一行：一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行：每行两个整数 $n,d$，表示一组询问数据。", "outputFormat": "对于每组数据：\n\n第一行输出一个整数 $c$，表示 $n$ 的原根个数，第二行输出 $\\lfloor\\dfrac{c}{d}\\rfloor$ 个数，按照题目描述中要求输出。\n\n注意：即使 $\\lfloor\\dfrac{c}{d}\\rfloor=0$，也需要输出一个空行。", "hint": "【样例解释】\n\n对于第 $1,2,4,6$ 组数据，给出的 $n$ 的所有原根都出现在输出中。\n\n对于第 $3$ 组数据，$25$ 的原根集合为 $\\{2,3,8,12,13,17,22,23\\}$。\n\n对于第 $5$ 组数据，$9$ 的原根集合为 $\\{2,5\\}$。\n\n【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 10$，$2\\leq n\\leq 10^6$，$1\\leq d\\leq 200$，保证输出的数的总个数不超过 $10^5$。", "locale": "zh-CN"}}}
{"pid": "P6092", "type": "P", "difficulty": 3, "samples": [["8 2 12 \n1 2 4 2 1 3 5 6 2 3 6 4", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2012", "二分", "CEOI（中欧）"], "title": "[CEOI 2012] 工作规划", "background": "", "description": "CEOI 在 $N$ 天内收到了 $M$ 个任务，每个任务需要 $1$ 台机器工作 $1$ 天来完成。CEOI 有很多台机器，每台机器一天只能完成一个任务。 CEOI 要求每个任务最多只能推迟 $D$ 天完成。换言之，如果一个客户在第 $S$ 天提交了一个任务，CEOI 必须在第 $S+D$ 天之前完成它。\n\n请你写程序求出每个任务最多推迟 $D$ 天的前提下，最少需要多少台机器才能按要求完成所有任务。", "inputFormat": "第一行输入包含三个整数， $N$ 是 CEOI 接受任务的天数， $D$ 是每个任务最多可以推迟的天数。$M$ 是任务的个数。\n\n第二行是 $M$ 个被空格分隔的整数。第 $i$ 个数代表收到第 $i$ 个任务时间。第 $N-D$ 天之后均没有任务。所有的任务按照输入顺序从 $1$ 到 $N$ 依次编号。", "outputFormat": "输出一个整数，即能完成任务的最少机器数。", "hint": "对于 $50\\%$ 的测试点，$M \\le 10^5$。\n\n对于所有测试点，$1 \\le N \\le {10}^5$，$0 \\le D < N$ , $1 \\le M< 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2012] 工作规划", "background": "", "description": "CEOI 在 $N$ 天内收到了 $M$ 个任务，每个任务需要 $1$ 台机器工作 $1$ 天来完成。CEOI 有很多台机器，每台机器一天只能完成一个任务。 CEOI 要求每个任务最多只能推迟 $D$ 天完成。换言之，如果一个客户在第 $S$ 天提交了一个任务，CEOI 必须在第 $S+D$ 天之前完成它。\n\n请你写程序求出每个任务最多推迟 $D$ 天的前提下，最少需要多少台机器才能按要求完成所有任务。", "inputFormat": "第一行输入包含三个整数， $N$ 是 CEOI 接受任务的天数， $D$ 是每个任务最多可以推迟的天数。$M$ 是任务的个数。\n\n第二行是 $M$ 个被空格分隔的整数。第 $i$ 个数代表收到第 $i$ 个任务时间。第 $N-D$ 天之后均没有任务。所有的任务按照输入顺序从 $1$ 到 $N$ 依次编号。", "outputFormat": "输出一个整数，即能完成任务的最少机器数。", "hint": "对于 $50\\%$ 的测试点，$M \\le 10^5$。\n\n对于所有测试点，$1 \\le N \\le {10}^5$，$0 \\le D < N$ , $1 \\le M< 10^6$。", "locale": "zh-CN"}}}
{"pid": "P6093", "type": "P", "difficulty": 4, "samples": [["3\n5 4 1\n4 2 2\n3 2 1", "7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2015", "各省省选", "江苏"], "title": "[JSOI2015] 套娃", "background": "刚从俄罗斯旅游回来的 JYY 买了很多很多好看的套娃作为纪念品！JYY 由于太过激动，把所有的套娃全部都打开了。而由于很多套娃长得过于相像，JYY 现在不知道该如何把它们装回去了（他实在搞不清，应该把哪个套娃装到哪个里面去了）。", "description": "JYY 一共有 $N$ 个拆开的套娃，每个套娃从 $1$ 到 $N$ 编号。编号为 $i$ 的套娃有一个外径 $Out_i$ 和一个内径 $In_i$（$In_i<Out_i$）。\n\n对于套娃 $i$ 和套娃 $j$，如果满足 $Out_i<In_j$，那么套娃 $i$ 就可以装到套娃 $j$ 里面去。\n\n注意，一个套娃内部，不允许并排的放入多个套娃。\n\n也就是说，如果我们将 $i$ 装到 $j$ 的内部之后，还存在另一个套娃 $k$，也满足 $Out_k<In_j$，我们此时是不允许再将 $k$ 放到 $j$ 内部的（因为 $j$ 的内部已经放入了 $i$）。但是，如果 $k$ 还满足 $Out_k<In_i$，那么我们允许先将 $k$ 放到 $i$ 的内部，然后再把 $k$ 和 $i$ 作为一个整体放入 $j$ 的内部。\n\nJYY 认为一套好的套娃，内部的空隙一定是尽量少的。如果套娃 $j$ 内部装入了套娃 $i$，那么我们认为，套娃 $j$ 内部产生的空隙为 $In_j-Out_i$；如果套娃 $j$ 的内部什么也没有装，那么套娃 $j$ 的空隙则就是 $In_j$。\n\nJYY 也希望，那些长得更加好看的套娃，里面可以填的尽量满一些；而相对\n那些不那么好看的套娃，JYY 也就相对不那么介意一些。为此 JYY 对于编号为 $i$ 的套娃设置了一个好看度 $B_i$，如果这个套娃内部还存在 $K$ 的空隙，那么 JYY 对于这个套娃就会产生 $K\\times Bi$ 的不满意度。\n\nJYY 对于一个套娃安装方案的不满意度，就是每个套娃产生的不满意度的总\n和。JYY 希望找出一个，不满意度最小的套娃安装方案。", "inputFormat": "第一行包含一个正整数 $N$。接下来 $N$ 行，每行包含三个正整数 $Out_i,In_i,B_i$，表示 $i$ 号套娃的外径，内径，以及好看度。\n\n", "outputFormat": "输出文件包含一行一个整数，表示不满意度的最小值。\n\n", "hint": "对于 $100\\%$ 的数据，$N\\leq 2\\times 10^5$，$1\\leq In_i<Out_i\\leq 10^4$，$1\\leq B_i\\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2015] 套娃", "background": "刚从俄罗斯旅游回来的 JYY 买了很多很多好看的套娃作为纪念品！JYY 由于太过激动，把所有的套娃全部都打开了。而由于很多套娃长得过于相像，JYY 现在不知道该如何把它们装回去了（他实在搞不清，应该把哪个套娃装到哪个里面去了）。", "description": "JYY 一共有 $N$ 个拆开的套娃，每个套娃从 $1$ 到 $N$ 编号。编号为 $i$ 的套娃有一个外径 $Out_i$ 和一个内径 $In_i$（$In_i<Out_i$）。\n\n对于套娃 $i$ 和套娃 $j$，如果满足 $Out_i<In_j$，那么套娃 $i$ 就可以装到套娃 $j$ 里面去。\n\n注意，一个套娃内部，不允许并排的放入多个套娃。\n\n也就是说，如果我们将 $i$ 装到 $j$ 的内部之后，还存在另一个套娃 $k$，也满足 $Out_k<In_j$，我们此时是不允许再将 $k$ 放到 $j$ 内部的（因为 $j$ 的内部已经放入了 $i$）。但是，如果 $k$ 还满足 $Out_k<In_i$，那么我们允许先将 $k$ 放到 $i$ 的内部，然后再把 $k$ 和 $i$ 作为一个整体放入 $j$ 的内部。\n\nJYY 认为一套好的套娃，内部的空隙一定是尽量少的。如果套娃 $j$ 内部装入了套娃 $i$，那么我们认为，套娃 $j$ 内部产生的空隙为 $In_j-Out_i$；如果套娃 $j$ 的内部什么也没有装，那么套娃 $j$ 的空隙则就是 $In_j$。\n\nJYY 也希望，那些长得更加好看的套娃，里面可以填的尽量满一些；而相对\n那些不那么好看的套娃，JYY 也就相对不那么介意一些。为此 JYY 对于编号为 $i$ 的套娃设置了一个好看度 $B_i$，如果这个套娃内部还存在 $K$ 的空隙，那么 JYY 对于这个套娃就会产生 $K\\times Bi$ 的不满意度。\n\nJYY 对于一个套娃安装方案的不满意度，就是每个套娃产生的不满意度的总\n和。JYY 希望找出一个，不满意度最小的套娃安装方案。", "inputFormat": "第一行包含一个正整数 $N$。接下来 $N$ 行，每行包含三个正整数 $Out_i,In_i,B_i$，表示 $i$ 号套娃的外径，内径，以及好看度。\n\n", "outputFormat": "输出文件包含一行一个整数，表示不满意度的最小值。\n\n", "hint": "对于 $100\\%$ 的数据，$N\\leq 2\\times 10^5$，$1\\leq In_i<Out_i\\leq 10^4$，$1\\leq B_i\\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P6094", "type": "P", "difficulty": 6, "samples": [["5 5\n-3 7 0 0 0\n8 0 7 -10 0\n0 7 0 1 0\n0 0 0 0 0\n-8 0 0 2 10\n4 50 50 1 50\n50 50 1 9 50\n50 50 1 1 50\n2 50 50 50 50\n2 50 50 50\n50 50 1 1\n50 1 8 1\n50 50 50 50\n1 50 50 50", "48"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "各省省选", "网络流", "江苏"], "title": "[JSOI2015] 圈地", "background": "JYY 在火星买了一大块矩形的地皮做房地产开发。由于地皮实在是太大了，JYY 把这块地皮划分成了 $N$ 行 $M$ 列的小方格，并在每一格中建造一栋房子。历时若干年，开发终于宣告结束，JYY 也可以把这些房子挂牌出售了。现在他找到了两位非同寻常的土豪买家：南南和强强。\n\n麻烦的是，南南和强强是水火不容的。为了保证他们俩不发生矛盾，JYY 需要把卖给他们俩的房子用墙隔开。不过造墙是需要钱的，JYY 作为倒卖地皮的专家，自然想挣尽可能多的钱，因此他邀请到你帮他设计最优的出售方案。", "description": "JYY 把这块地皮划分成了 $N$ 行 $M$ 列的矩形，且矩形的每一格中建造一栋房子。现在，南南和强强已经将他们的购买意见提交给了 JYY。对于每一栋房子，南南和强强已经给定了他们的出价（不想购买，或愿意以一定价格购买），并且由于他们已经协商好了各自的势力范围，因此不存在两个人同时想买一栋房子的情况。JYY 可以选择每一栋房子是否出售（因为不存在两个人同时想买一栋房子的情况，若 JYY 选择出售一栋房子，它的买家就是确定的）。房子卖给强强和南南以后，JYY 就能获得卖出房子出价的总和。\n\n不过，作为售后服务，JYY 需要通过造墙（将两栋相邻的房子用一堵墙隔开）把两个人的房子完全隔开。所谓完全隔开，就是指造出的墙以及四周的边界将整个区域划分成若干个不连通的部分，每个部分里面只有一个人的房子。当然，造墙也是需要钱的，而且价格不菲。不过 JYY 当初在宣传时声称造墙完全免费，所以这部分钱只好由 JYY 自己出了。\n\nJYY 请你为他规划每幢房子是否要卖出以及建造哪些围墙，才能使得卖房子的收益减去造围墙的花费最大。另外一个好消息是整个地皮的四周已经建好了墙，因此 JYY 可以利用这些建好的墙达到目的。下图就是用墙将区域划分成 $3$ 个不连通的部分的例子。格子中的数字代表出价（数字的含义参考输入格式），边上的数值代表造墙的价格。四周的墙（边界）本来就有，不需要 JYY 花额外的代价去建造。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t57031da.png)", "inputFormat": "输入第一行包含两个用空格隔开的自然数 $N$ 和 $M$。\n\n接下来 $N$ 行，每行 $M$ 个整数，第 $i$ 行第 $j$ 列的整数 $a$ 描述了位于 $(i,j)$ 房子的出售信息。如果 $a=0$，说明强强和南南都不想买这个位置上的房子；如果 $a>0$，说明强强想以价格 $a$ 买这个位置上的房子。如果 $a<0$，说明南南想以价格 $-a$ 买这个位置上的房子。\n\n接下来 $N-1$ 行，每行 $M$ 个整数。第 $i$ 行第 $j$ 列的数表示第 $i$ 行第 $j$ 列的房子与第 $i+1$ 行第 $j$ 列的房子之间的墙的造价。\n\n接下来 $N$ 行，每行 $M-1$ 个整数。第 $i$ 行第 $j$ 列的数表示第 $i$ 行第 $j$ 列的房子与第 $i$ 行第 $j+1$ 列的房子之间的墙的造价。\n", "outputFormat": "输出仅有一行包含一个整数，表示 JYY 的最大收益。\n\n", "hint": "对于 $100\\%$ 的数据，$1\\leq N,M\\leq 200$，任何价格都不超过 $1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2015] 圈地", "background": "JYY 在火星买了一大块矩形的地皮做房地产开发。由于地皮实在是太大了，JYY 把这块地皮划分成了 $N$ 行 $M$ 列的小方格，并在每一格中建造一栋房子。历时若干年，开发终于宣告结束，JYY 也可以把这些房子挂牌出售了。现在他找到了两位非同寻常的土豪买家：南南和强强。\n\n麻烦的是，南南和强强是水火不容的。为了保证他们俩不发生矛盾，JYY 需要把卖给他们俩的房子用墙隔开。不过造墙是需要钱的，JYY 作为倒卖地皮的专家，自然想挣尽可能多的钱，因此他邀请到你帮他设计最优的出售方案。", "description": "JYY 把这块地皮划分成了 $N$ 行 $M$ 列的矩形，且矩形的每一格中建造一栋房子。现在，南南和强强已经将他们的购买意见提交给了 JYY。对于每一栋房子，南南和强强已经给定了他们的出价（不想购买，或愿意以一定价格购买），并且由于他们已经协商好了各自的势力范围，因此不存在两个人同时想买一栋房子的情况。JYY 可以选择每一栋房子是否出售（因为不存在两个人同时想买一栋房子的情况，若 JYY 选择出售一栋房子，它的买家就是确定的）。房子卖给强强和南南以后，JYY 就能获得卖出房子出价的总和。\n\n不过，作为售后服务，JYY 需要通过造墙（将两栋相邻的房子用一堵墙隔开）把两个人的房子完全隔开。所谓完全隔开，就是指造出的墙以及四周的边界将整个区域划分成若干个不连通的部分，每个部分里面只有一个人的房子。当然，造墙也是需要钱的，而且价格不菲。不过 JYY 当初在宣传时声称造墙完全免费，所以这部分钱只好由 JYY 自己出了。\n\nJYY 请你为他规划每幢房子是否要卖出以及建造哪些围墙，才能使得卖房子的收益减去造围墙的花费最大。另外一个好消息是整个地皮的四周已经建好了墙，因此 JYY 可以利用这些建好的墙达到目的。下图就是用墙将区域划分成 $3$ 个不连通的部分的例子。格子中的数字代表出价（数字的含义参考输入格式），边上的数值代表造墙的价格。四周的墙（边界）本来就有，不需要 JYY 花额外的代价去建造。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t57031da.png)", "inputFormat": "输入第一行包含两个用空格隔开的自然数 $N$ 和 $M$。\n\n接下来 $N$ 行，每行 $M$ 个整数，第 $i$ 行第 $j$ 列的整数 $a$ 描述了位于 $(i,j)$ 房子的出售信息。如果 $a=0$，说明强强和南南都不想买这个位置上的房子；如果 $a>0$，说明强强想以价格 $a$ 买这个位置上的房子。如果 $a<0$，说明南南想以价格 $-a$ 买这个位置上的房子。\n\n接下来 $N-1$ 行，每行 $M$ 个整数。第 $i$ 行第 $j$ 列的数表示第 $i$ 行第 $j$ 列的房子与第 $i+1$ 行第 $j$ 列的房子之间的墙的造价。\n\n接下来 $N$ 行，每行 $M-1$ 个整数。第 $i$ 行第 $j$ 列的数表示第 $i$ 行第 $j$ 列的房子与第 $i$ 行第 $j+1$ 列的房子之间的墙的造价。\n", "outputFormat": "输出仅有一行包含一个整数，表示 JYY 的最大收益。\n\n", "hint": "对于 $100\\%$ 的数据，$1\\leq N,M\\leq 200$，任何价格都不超过 $1000$。", "locale": "zh-CN"}}}
