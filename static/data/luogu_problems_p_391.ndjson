{"pid": "P8928", "type": "P", "difficulty": 2, "samples": [["3 3 10", "36"], ["114514 1919810 233", "696303234"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学"], "title": "「TERRA-OI R1」你不是神，但你的灵魂依然是我的盛宴", "background": "踏在这木质的平台上，嘎吱嘎吱作响，你从包里掏出了各式各样的药水，逐一饮下后一股暖意从心底升腾起来，你拿出了精心准备的诱饵，那是用三位仆从的精华凝聚而成，你将其高举头顶，想要引出那位噬神者。天空开始弥漫着蓝紫色的迷雾，这种氛围压得你喘不过气，恍惚间，你面前的空间开始撕裂出一条裂缝，一条身披紫色外壳的巨蟒从中钻出，你拿起了手上的巨剑，听着一声又一声的嘶吼，你知道这将是一场恶战......", "description": "请求出：\n\n$\\sum_{i=1}^{n} \\sum_{j=1}^{m}(i\\times j \\bmod p)$ \n\n的值，其中 $n,m,p$ 为给定的值。", "inputFormat": "一行三个用空格分隔的正整数 $n,m,p$，含义见题目描述。", "outputFormat": "一行一个整数表示答案，由于这个结果可能很大，请输出其对 $10^9+7$ 取模的结果。", "hint": "#### 【样例解释 #1】\n\n很显然 $i\\times j$ 只有 $[1,2,3,2,4,6,3,6,9]$ 这几种情况，这些情况的和为 $36$。\n\n------------\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| Subtask | Score | $n,m\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $20$ | $10^3$ |\n| $2$ | $30$ | $10^6$ |\n| $3$ | $50$ | $10^{12}$ |\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le10^{12}$，$1\\le p\\le10^3$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TERRA-OI R1」你不是神，但你的灵魂依然是我的盛宴", "background": "踏在这木质的平台上，嘎吱嘎吱作响，你从包里掏出了各式各样的药水，逐一饮下后一股暖意从心底升腾起来，你拿出了精心准备的诱饵，那是用三位仆从的精华凝聚而成，你将其高举头顶，想要引出那位噬神者。天空开始弥漫着蓝紫色的迷雾，这种氛围压得你喘不过气，恍惚间，你面前的空间开始撕裂出一条裂缝，一条身披紫色外壳的巨蟒从中钻出，你拿起了手上的巨剑，听着一声又一声的嘶吼，你知道这将是一场恶战......", "description": "请求出：\n\n$\\sum_{i=1}^{n} \\sum_{j=1}^{m}(i\\times j \\bmod p)$ \n\n的值，其中 $n,m,p$ 为给定的值。", "inputFormat": "一行三个用空格分隔的正整数 $n,m,p$，含义见题目描述。", "outputFormat": "一行一个整数表示答案，由于这个结果可能很大，请输出其对 $10^9+7$ 取模的结果。", "hint": "#### 【样例解释 #1】\n\n很显然 $i\\times j$ 只有 $[1,2,3,2,4,6,3,6,9]$ 这几种情况，这些情况的和为 $36$。\n\n------------\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| Subtask | Score | $n,m\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $20$ | $10^3$ |\n| $2$ | $30$ | $10^6$ |\n| $3$ | $50$ | $10^{12}$ |\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le10^{12}$，$1\\le p\\le10^3$。\n", "locale": "zh-CN"}}}
{"pid": "P8929", "type": "P", "difficulty": 4, "samples": [["3 4\n0 3 1 1 2\n3 6 2 1 -2 1\n6 10 1 1 0\n1 4\n2 5\n2 114514\n2 2", "9\n2\n0\n0"], ["6 8\n0 4 2 1 -4 0 \n4 6 1 2 -10 \n6 11 1 1 -19 \n11 19 2 -1 -30 559 \n19 29 1 1 -58 \n29 38 1 1 -68 \n1 11\n2 4\n2 -1\n1 21\n2 -5\n2 2\n1 34\n2 1\n", "-8\n1\n4\n-37\n1\n2\n-34\n2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "二分", "O2优化", "差分"], "title": "「TERRA-OI R1」别得意，小子", "background": "战至中途，蓝紫色天空瞬间变为黑压压一片，噬神者身上一些紫色外壳开始脱落，化为更小的蟒蛇，这些小家伙从出现开始便不要命的向你冲过来，刚清理掉这些小家伙，迷雾中忽然涌现出一张血盆大口，噬神者正向你冲击而来......", "description": "现给定一个有 $n$ 段的分段函数，每一段可能是一个一次函数或者一个二次函数，并有 $q$ 次询问，每次询问 $x=k$ 时 $y$ 的取值或是 $y=k$ 与函数有多少个交点。\n\n", "inputFormat": "第一行两个用空格分隔的整数 $n,q$，表示函数段数与询问次数。\n\n从第 $2$ 行到 $n+1$ 行，先给出 $l_i$ $r_i$，表示这个分段函数对应的取值范围为 $(l_i,r_i]$（保证 $l_1=0$，$\\forall i\\in [1,n-1],r_i=l_{i+1}$）。然后读入有以下两种情况：\n\n- $1$ $k$ $b$，表示这个区间内是 $y=kx+b$ 的一个一次函数（保证 $k\\ne 0$）。\n- $2$ $a$ $b$ $c$，表示这个区间内是 $y=ax^2+bx+c$ 的二次函数（保证 $a\\ne 0$）。\n\n从第 $n+2$ 行到第 $n+q+1$ 行，每行两个用空格分隔的整数 $op,k$：\n\n- 若 $op=1$ ，表示求出当 $x=k$ 时 $y$ 的值（保证 $k\\in (0,r_n]$）。\n- 若 $op=2$ ，表示求出直线 $y=k$ 在 $(0,r_n]$ 范围内与整个分段函数有几个交点。", "outputFormat": "一共 $q$ 行，每行一个整数表示对于每个询问的答案。", "hint": "#### 【样例解释 #1】\n\n三段函数分别为 $y=x+2$，$y=x^2-2x+1$，$y=x$。\n\n对于当 $x=4$ 时套入第二段函数可以得到结果为 $9$。\n\n而直线 $y=5$ 只与第一段与第二段函数相交，并且各只有一个交点，所以结果为 $2$。\n\n显而易见，第三个询问对应的直线不与函数相交。\n\n第四个询问虽然与第一段函数交于 $x=0$ 的位置，但 $0$ 不在该函数区间内，故舍去。\n\n------------\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| Subtask | Score | $n,q\\le$ | limit |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $100$ | 无 |\n| $2$ | $15$ | $10^3$ | $r_n\\le 5\\times 10^3$ |\n| $3$ | $20$ | $2\\times 10^5$ | 不存在询问 $2$ |\n| $4$ | $25$ | $2\\times 10^5$ | 不存在二次函数 |\n| $5$ | $30$ | $2\\times 10^5$ | 无 |\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 2\\times 10^5$，$0\\le l_i,r_i\\le10^9$，$\\forall i\\in [1,n],r_i>l_i$ 。\n\n所有的函数系数均在 **$64$ 位有符号整型变量**存储范围内，并且运算结果与每个函数式中任何一项的最大值与最小值不会超过 **$64$ 位有符号整型变量**存储范围。所有询问参数均在 **$32$ 位有符号整型变量**范围内。\n\n（即 $-4\\times 10^{18}\\le k,a,b,c\\le 4\\times 10^{18}$，$-10^9\\le x\\le 10^9$）\n\n------------\n#### 【提示】\n\n采用浮点数据时建议使用 long double，避免产生精度问题。\n\nupd：添加一组 hack 数据，未通过会显示为“Unaccepted 100pts”。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TERRA-OI R1」别得意，小子", "background": "战至中途，蓝紫色天空瞬间变为黑压压一片，噬神者身上一些紫色外壳开始脱落，化为更小的蟒蛇，这些小家伙从出现开始便不要命的向你冲过来，刚清理掉这些小家伙，迷雾中忽然涌现出一张血盆大口，噬神者正向你冲击而来......", "description": "现给定一个有 $n$ 段的分段函数，每一段可能是一个一次函数或者一个二次函数，并有 $q$ 次询问，每次询问 $x=k$ 时 $y$ 的取值或是 $y=k$ 与函数有多少个交点。\n\n", "inputFormat": "第一行两个用空格分隔的整数 $n,q$，表示函数段数与询问次数。\n\n从第 $2$ 行到 $n+1$ 行，先给出 $l_i$ $r_i$，表示这个分段函数对应的取值范围为 $(l_i,r_i]$（保证 $l_1=0$，$\\forall i\\in [1,n-1],r_i=l_{i+1}$）。然后读入有以下两种情况：\n\n- $1$ $k$ $b$，表示这个区间内是 $y=kx+b$ 的一个一次函数（保证 $k\\ne 0$）。\n- $2$ $a$ $b$ $c$，表示这个区间内是 $y=ax^2+bx+c$ 的二次函数（保证 $a\\ne 0$）。\n\n从第 $n+2$ 行到第 $n+q+1$ 行，每行两个用空格分隔的整数 $op,k$：\n\n- 若 $op=1$ ，表示求出当 $x=k$ 时 $y$ 的值（保证 $k\\in (0,r_n]$）。\n- 若 $op=2$ ，表示求出直线 $y=k$ 在 $(0,r_n]$ 范围内与整个分段函数有几个交点。", "outputFormat": "一共 $q$ 行，每行一个整数表示对于每个询问的答案。", "hint": "#### 【样例解释 #1】\n\n三段函数分别为 $y=x+2$，$y=x^2-2x+1$，$y=x$。\n\n对于当 $x=4$ 时套入第二段函数可以得到结果为 $9$。\n\n而直线 $y=5$ 只与第一段与第二段函数相交，并且各只有一个交点，所以结果为 $2$。\n\n显而易见，第三个询问对应的直线不与函数相交。\n\n第四个询问虽然与第一段函数交于 $x=0$ 的位置，但 $0$ 不在该函数区间内，故舍去。\n\n------------\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| Subtask | Score | $n,q\\le$ | limit |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $100$ | 无 |\n| $2$ | $15$ | $10^3$ | $r_n\\le 5\\times 10^3$ |\n| $3$ | $20$ | $2\\times 10^5$ | 不存在询问 $2$ |\n| $4$ | $25$ | $2\\times 10^5$ | 不存在二次函数 |\n| $5$ | $30$ | $2\\times 10^5$ | 无 |\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 2\\times 10^5$，$0\\le l_i,r_i\\le10^9$，$\\forall i\\in [1,n],r_i>l_i$ 。\n\n所有的函数系数均在 **$64$ 位有符号整型变量**存储范围内，并且运算结果与每个函数式中任何一项的最大值与最小值不会超过 **$64$ 位有符号整型变量**存储范围。所有询问参数均在 **$32$ 位有符号整型变量**范围内。\n\n（即 $-4\\times 10^{18}\\le k,a,b,c\\le 4\\times 10^{18}$，$-10^9\\le x\\le 10^9$）\n\n------------\n#### 【提示】\n\n采用浮点数据时建议使用 long double，避免产生精度问题。\n\nupd：添加一组 hack 数据，未通过会显示为“Unaccepted 100pts”。", "locale": "zh-CN"}}}
{"pid": "P8930", "type": "P", "difficulty": 6, "samples": [["6 5\n1 1 4 5 1 4\n2 1 6 1 5\n2 1 4 1 4\n1 1 1\n2 1 4 1 4\n2 2 6 1 5", "5\n4\n-1\n4"], ["12 12\n10 2 8 12 12 3 3 12 1 10 7 2\n2 3 4 1 11\n2 3 4 5 12\n2 1 3 1 3\n2 2 10 2 10\n2 8 10 5 10\n2 5 5 8 11\n2 10 12 7 10\n2 1 5 4 9\n1 12 6\n1 1 -6\n2 5 8 5 12\n2 5 8 2 12", "-1\n-1\n-1\n8\n-1\n-1\n-1\n-1\n-1\n12"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["莫队", "O2优化", "分块"], "title": "「TERRA-OI R1」神，不惧死亡", "background": "战斗已经到了白热化阶段，你已经精疲力竭，手臂因承受不住手中巨剑重量不住地发抖，噬神者的紫色外壳已经脱落大半，似乎再承受几次重击就会碎落一地。天空中紫色的迷雾开始变得暗淡，空间由于被不断撕裂而逐渐扭曲。在你的身前，噬神者最后一次撕开裂缝，用最原始的方式向你发起最后一击。你握紧手中的巨剑，准备迎接这最后一击，即使你清楚这是神明吞噬者最后的倔强，可你依然不敢放松一分一毫。最后一击过后，远处响起了钟声，战斗终将落下帷幕......", "description": "李子要在一个长度为 $n$ 的序列 $a$ 上玩游戏，他每次会把下标在 $[l,r]$ 范围内，且取值在 $[p,q]$ 范围内的所有数全部找出来，每次他可以选择其中两个相同的值，并进行**抵消**操作，将这两个数从数列中删除。当且仅当一个原本存在的值被消除掉后，所有值小于这个数的每个值全部要被删除一次（例如数列中原本有三个 $2$，进行一次删除后将会仅剩两个 $2$），并且这个游戏将会立即停止。\n\n李子会不止一次的玩这个游戏，并且每次取的区间都不相同，而且，为了加大游戏难度，李子会时不时的修改序列中某个数的值。\n\n现在李子想让剩下的数列中的最小值尽可能大，需要请你针对每次游戏，输出这个最大的最小值。特别地，如果这个游戏无法停止或者存在一种方案可以消除整个数列，输出 $-1$。", "inputFormat": "第一行两个用空格分隔的正整数 $n,m$，含义见题目描述。\n\n第二行 $n$ 个用空格分隔的正整数，表示对应 $a$ 序列。\n\n第三行到第 $m+2$ 行，每行有以下两种情况：\n\n- $1$ $p$ $x$ 表示给 $a_p$ 的值加上 $x$。\n- $2$ $l$ $r$ $p$ $q$ 表示询问将下标属于 $[l,r]$，取值属于 $[p,q]$ 的数列取出进行游戏的结果。", "outputFormat": "针对每个询问 $2$，输出一行一个整数表示答案。", "hint": "#### 【样例解释 #1】\n\n第一个询问对应的数列为 $[1,1,4,5,1,4]$，我们将两个 $1$ 先抵消，再抵消两个 $4$，此时比 $4$ 小的 $1$ 将会删除一次，整个序列只剩一个 $5$。\n\n第二个询问针对前 $4$ 个数，且由于 $5$ 不属于 $[1,4]$ 值域范围，所以数列为 $[1,1,4]$，将两个 $1$ 抵消后游戏直接结束，答案为 $4$。\n\n第三次修改将 $a_1$ 加 $1$，修改后数列为 $[2,1,4,5,1,4]$。\n\n第四次询问对应的数列为 $[2,1,4]$，所有数据都只出现一次，没办法进行抵消操作，游戏无法停止所以输出 $-1$。\n\n第五次询问的数列为 $[1,4,5,1,4]$，我们选择将两个 $1$ 抵消，由于数列中不再有 $1$，游戏结束，最小为 $4$。你也可以抵消两个 $4$，但这样答案为 $1$，比 $4$ 要小。\n\n\n------------\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| Subtask | Score | $n,m\\le$ | limit |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $10^3$ | 无 |\n| $2$ | $20$ | $10^5$ | 保证不存在操作 $1$ |\n| $3$ | $30$ | $10^5$ | 保证对于每个操作 $2$ ，$p=1,q=n$ |\n| $4$ | $40$ | $10^5$ | 无 |\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^5$，对于任何时刻 $\\forall i,a_i\\in[1,n]$。\n\n对于每个操作 $1$，$1\\le p\\le n$，$-n+1\\le x\\le n-1$ 并且 $-a_p<x\\le n-a_p$。\n\n对于每个询问 $2$，$1\\le l \\le r \\le n$，$1\\le p \\le q \\le n$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TERRA-OI R1」神，不惧死亡", "background": "战斗已经到了白热化阶段，你已经精疲力竭，手臂因承受不住手中巨剑重量不住地发抖，噬神者的紫色外壳已经脱落大半，似乎再承受几次重击就会碎落一地。天空中紫色的迷雾开始变得暗淡，空间由于被不断撕裂而逐渐扭曲。在你的身前，噬神者最后一次撕开裂缝，用最原始的方式向你发起最后一击。你握紧手中的巨剑，准备迎接这最后一击，即使你清楚这是神明吞噬者最后的倔强，可你依然不敢放松一分一毫。最后一击过后，远处响起了钟声，战斗终将落下帷幕......", "description": "李子要在一个长度为 $n$ 的序列 $a$ 上玩游戏，他每次会把下标在 $[l,r]$ 范围内，且取值在 $[p,q]$ 范围内的所有数全部找出来，每次他可以选择其中两个相同的值，并进行**抵消**操作，将这两个数从数列中删除。当且仅当一个原本存在的值被消除掉后，所有值小于这个数的每个值全部要被删除一次（例如数列中原本有三个 $2$，进行一次删除后将会仅剩两个 $2$），并且这个游戏将会立即停止。\n\n李子会不止一次的玩这个游戏，并且每次取的区间都不相同，而且，为了加大游戏难度，李子会时不时的修改序列中某个数的值。\n\n现在李子想让剩下的数列中的最小值尽可能大，需要请你针对每次游戏，输出这个最大的最小值。特别地，如果这个游戏无法停止或者存在一种方案可以消除整个数列，输出 $-1$。", "inputFormat": "第一行两个用空格分隔的正整数 $n,m$，含义见题目描述。\n\n第二行 $n$ 个用空格分隔的正整数，表示对应 $a$ 序列。\n\n第三行到第 $m+2$ 行，每行有以下两种情况：\n\n- $1$ $p$ $x$ 表示给 $a_p$ 的值加上 $x$。\n- $2$ $l$ $r$ $p$ $q$ 表示询问将下标属于 $[l,r]$，取值属于 $[p,q]$ 的数列取出进行游戏的结果。", "outputFormat": "针对每个询问 $2$，输出一行一个整数表示答案。", "hint": "#### 【样例解释 #1】\n\n第一个询问对应的数列为 $[1,1,4,5,1,4]$，我们将两个 $1$ 先抵消，再抵消两个 $4$，此时比 $4$ 小的 $1$ 将会删除一次，整个序列只剩一个 $5$。\n\n第二个询问针对前 $4$ 个数，且由于 $5$ 不属于 $[1,4]$ 值域范围，所以数列为 $[1,1,4]$，将两个 $1$ 抵消后游戏直接结束，答案为 $4$。\n\n第三次修改将 $a_1$ 加 $1$，修改后数列为 $[2,1,4,5,1,4]$。\n\n第四次询问对应的数列为 $[2,1,4]$，所有数据都只出现一次，没办法进行抵消操作，游戏无法停止所以输出 $-1$。\n\n第五次询问的数列为 $[1,4,5,1,4]$，我们选择将两个 $1$ 抵消，由于数列中不再有 $1$，游戏结束，最小为 $4$。你也可以抵消两个 $4$，但这样答案为 $1$，比 $4$ 要小。\n\n\n------------\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| Subtask | Score | $n,m\\le$ | limit |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $10^3$ | 无 |\n| $2$ | $20$ | $10^5$ | 保证不存在操作 $1$ |\n| $3$ | $30$ | $10^5$ | 保证对于每个操作 $2$ ，$p=1,q=n$ |\n| $4$ | $40$ | $10^5$ | 无 |\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^5$，对于任何时刻 $\\forall i,a_i\\in[1,n]$。\n\n对于每个操作 $1$，$1\\le p\\le n$，$-n+1\\le x\\le n-1$ 并且 $-a_p<x\\le n-a_p$。\n\n对于每个询问 $2$，$1\\le l \\le r \\le n$，$1\\le p \\le q \\le n$。\n", "locale": "zh-CN"}}}
{"pid": "P8931", "type": "P", "difficulty": 2, "samples": [["3 4", "12"], ["2\n3 3\n5 7 9\n7 7 7\n3 3\n1 2 3\n2 2 2", "2 2 2 \n2 2 2 \n"], ["2\n3 3\n4 4 5\n4 5 6\n3 3\n1 1 3\n1 2 3\n", "2 3 3\n2 2 3\n"]], "limits": {"time": [1000, 1000, 1000], "memory": [524288, 524288, 524288]}, "tags": ["2023", "提交答案", "Special Judge", "O2优化", "语言月赛"], "title": "[入门赛 #10] Hack Problem P", "background": "这是一道 **hack 题**。在此类型的题目中，你将得到若干个问题和若干个解决对应问题的代码，但是给出的代码不能对于某些输入给出正确的输出。不能给出正确的输出的情况包括：\n\n1. 输出错误的结果。\n2. 运行超时。\n3. 产生一些运行时未定义行为。目前技术可检测的未定义行为仅包括数组越界。\n\n对于每个问题，你需要提交一份符合要求的输入数据，使得给定的代码不能给出正确的输出。你可以直接使用『提交答案』功能，也可以提交一份以任何语言写成的数据生成器。\n\n---\n**提示：如果你使用提交答案功能，请在提交其他题目时记得将语言改回你所使用的语言**", "description": "以下给出三个问题的题目描述：\n\n#### 问题 1\n\n给出两个正整数 $x, y$，保证它们的最小公倍数（$\\mathrm{lcm}$）不大于 $10^9$。求它们的最小公倍数。\n\n#### 问题 2\n\n**多组数据**，给定一个长度为 $n$ 的数组 $[a_1, a_2, \\dots a_n]$，保证数组单调递增。有 $q$ 次询问，每次给出一个整数 $x$，求数组中有多少数小于等于 $x$。\n\n#### 问题 3\n\n**多组数据**，给定一个长度为 $n$ 的数组 $[a_1, a_2, \\dots a_n]$，有 $q$ 次询问，每次给出一个整数 $x$，求数组中有多少数小于等于 $x$。\n\n注：问题 $2$ 和问题 $3$ 除了在是否保证数组递增上有差异外，在数据范围上也有区别，见下。", "inputFormat": "#### 问题 1\n\n输入只有一行两个整数，依次表示 $x$ 和 $y$。\n\n#### 问题 2\n\n第一行是一个整数 $T$，表示测试数据组数。  \n接下来按顺序给出每组数据的输入。  \n每组数据第一行是两个整数，依次表示数组 $a$ 的长度 $n$ 和询问次数 $q$。  \n每组数据第二行有 $n$ 个整数，依次表示 $a_1, a_2, \\dots a_n$。  \n每组数据第三行有 $q$ 个整数，依次表示 $q$ 次询问给出的 $x$。\n\n#### 问题 3\n\n第一行是一个整数 $T$，表示测试数据组数。  \n接下来按顺序给出每组数据的输入。  \n每组数据第一行是两个整数，依次表示数组 $a$ 的长度 $n$ 和询问次数 $q$。  \n每组数据第二行有 $n$ 个整数，依次表示 $a_1, a_2, \\dots a_n$。  \n每组数据第三行有 $q$ 个整数，依次表示 $q$ 次询问给出的 $x$。", "outputFormat": "#### 问题 1\n\n输出只有一行一个整数，表示两数的最小公倍数。\n\n#### 问题 2\n\n对每组数据，输出一行 $q$ 个整数，依次表示每次询问的答案。\n\n#### 问题 3\n\n对每组数据，输出一行 $q$ 个整数，依次表示每次询问的答案。", "hint": "### 样例组与实际输入的说明\n\n三个样例分别对应三个问题的样例输入输出。\n\n如果你直接采用『提交答案』的方式，请分别将三个输入数据命名为 `1.in`、`2.in`、`3.in`，并打成 zip 压缩包进行提交；\n\n如果你采用提交数据生成器的方式，你的生成器可以从标准输入读入一个整数 $x$，满足 $1 \\leq x \\leq 3$，表示该测试点对应的问题编号，然后**输出对应的输入数据**。\n\n显然，你的程序不应该读入『输入格式』里提到的任何内容（而应该构造它们），也不应该输出『样例输出』里提到的任何内容（而是只输出你构造的输入数据）。你不应该使用样例测试你的程序，这只是对三个问题的样例说明。\n\n### 数据规模要求\n\n你给出的数据必须满足如下要求：\n\n1. 完全符合『输入格式』的规定，不能有多余的输入，但是可以有行末空格和文末回车。\n2. 数据中所有的数字都应为整数。\n3. 对于问题 1，$1 \\leq x, y \\leq 10^9$，且你**必须保证**两数的最小公倍数也不超过 $10^9$。\n4. 对于问题 2，$1 \\leq T \\leq 3$，$1 \\leq n,q \\leq 10^5$，$1 \\leq a_i, x \\leq 10^9$。\n5. 对于问题 3，$1 \\leq T \\leq 3$，$1 \\leq n, q, a_i, x \\leq 10^6$。\n\n### 目标代码\n\n你需要 hack 如下的代码：\n\n#### 问题 1\n\n```cpp\n#include <iostream>\n#include <algorithm>\n\nint main() {\n  int x, y;\n  std::cin >> x >> y;\n  int ans = x * y / std::__gcd(x, y);\n  std::cout << ans << std::endl;\n}\n```\n\n#### 问题 2\n\n```cpp\n#include <iostream>\n#include <algorithm>\n\nconst int maxn = 1000003;\n\nint T;\nint n, q;\nint a[maxn], b[maxn];\n\nint find(int x) {\n  int l = 1, r = n;\n  int ans = 0;\n  while (l < r) {\n    int mid = (l + r) >> 1;\n    if (a[mid] <= x) {\n      ans = mid;\n      l = mid + 1;\n    } else {\n      r = mid - 1;\n    }\n  }\n  return ans;\n}\n\nint main() {\n  std::ios::sync_with_stdio(false);\n  std::cin.tie(nullptr);\n  for (std::cin >> T; T; --T) {\n    std::cin >> n >> q;\n    for (int i = 1; i <= n; ++i) {\n      std::cin >> a[i];\n    }\n    for (int x; q; --q) {\n      std::cin >> x;\n      std::cout << find(x) << \" \";\n    }\n    std::cout << std::endl;\n  }\n}\n```\n\n#### 问题 3\n\n```cpp\n#include <iostream>\n\nconst int maxn = 1000003;\n\nint T;\nint n, q;\nint a[maxn], b[maxn];\n\nint main() {\n  std::ios::sync_with_stdio(false);\n  std::cin.tie(nullptr);\n  for (std::cin >> T; T; --T) {\n    std::cin >> n >> q;\n    for (int i = 1; i <= n; ++i) {\n      std::cin >> a[i];\n    }\n    for (int i = 1; i <= n; ++i) {\n      b[a[i]]++;\n    }\n    for (int i = 1; i < maxn; ++i) b[i] += b[i - 1];\n    for (int x; q; --q) {\n      std::cin >> x;\n      std::cout << b[x] << \" \\n\"[q == 1];\n    }\n  }\n}\n```\n\n目标代码的编译选项为 `-std=c++14 -fno-asm -O2`。编译器为洛谷提供的 g++。你可以在『在线 IDE』中选择 C++14 语言来获得完全相同的编译环境。\n\n### 判分说明\n\n本题共三个测试点，分别对应三个问题，每个问题 hack 成功则对应测试点返回 accepted。\n\n#### 数据判定\n\n你给出的数据必须完全符合『数据规模要求』，否则将得到 Unaccepted 的结果。\n\n#### 超时判定\n\n程序每执行若干条指令，我们会检测一遍程序的运行时间。我们保证两次检测之间的指令条数是一个输入规模无关的量，也即每执行 $O(1)$ 条指令会进行一次检测。且两次检测之间的指令条数不会太多，一般不超过 $100$ 条 C++ 语句。\n\n如果程序的运行时间超过 $500 \\text{ms}$，则判定为程序运行超时，返回 accepted 结果。\n\n#### 结果错误判定\n\n如果程序在规定的时间内结束且给出了一个输出，我们会比较这个输出和**完全正确的输出**，如果二者不同，则判定为 hack 成功，返回 accepted 结果。\n\n#### 未定义行为判定\n\n我们会在每次**显式**的调用数组元素前判断数组下标是否超过数组范围，如果超过，则判定为 hack 成功，返回 accepted 结果。\n\n这就是说，如果你希望通过未定义行为进行 hack，只能对显式的调用数组元素的行为进行 hack。\n\n### 样例程序\n\n这是一份可以帮你理解你需要输出的内容的样例程序，**但它不能给出正确的 hack 数据**。直接提交此程序不会得分。\n\n```cpp\n#include <iostream>\n\nusing namespace std;\n\nint main() {\n  int taskId;\n  cin >> taskId;\n  if (taskId == 1) {\n    cout << \"\" <<endl;\n  } else if (taskId == 2) {\n    cout << \"\" << endl;\n  } else if (taskId == 3) {\n    cout << \"\" << endl;\n  } else { // 这个 else 不会被执行\n    cout << \"QiHai Nanami\" << endl;\n  }\n}\n```\n\n如果你使用『提交答案』功能，请务必保证打开压缩包后能且仅能**直接**看到三个 `.in` 文件。这就是说，文件结构必须是：\n\n```plain\nans.zip\n |---1.in\n |---2.in\n |---3.in\n```\n\n三个文件不应该被额外的文件夹包含，即文件结构不能是：\n\n```plain\nans.zip\n |---ans(folder)\n      |---1.in\n      |---2.in\n      |---3.in\n```\n\n### 关于评测信息的说明\n\n如果 hack 成功，对应测试点的信息为 accepted。如果返回其他信息，说明程序本身有误。\n\n例如，如果返回 TLE，不代表成功的将对应程序 hack 至超时，而是表示数据生成器本身运行超时，测试点不得分。\n\n特别的，返回 UKE 结果可能是数据不合法（有多余内容、缺少内容或数据范围不符合要求）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #10] Hack Problem P", "background": "这是一道 **hack 题**。在此类型的题目中，你将得到若干个问题和若干个解决对应问题的代码，但是给出的代码不能对于某些输入给出正确的输出。不能给出正确的输出的情况包括：\n\n1. 输出错误的结果。\n2. 运行超时。\n3. 产生一些运行时未定义行为。目前技术可检测的未定义行为仅包括数组越界。\n\n对于每个问题，你需要提交一份符合要求的输入数据，使得给定的代码不能给出正确的输出。你可以直接使用『提交答案』功能，也可以提交一份以任何语言写成的数据生成器。\n\n---\n**提示：如果你使用提交答案功能，请在提交其他题目时记得将语言改回你所使用的语言**", "description": "以下给出三个问题的题目描述：\n\n#### 问题 1\n\n给出两个正整数 $x, y$，保证它们的最小公倍数（$\\mathrm{lcm}$）不大于 $10^9$。求它们的最小公倍数。\n\n#### 问题 2\n\n**多组数据**，给定一个长度为 $n$ 的数组 $[a_1, a_2, \\dots a_n]$，保证数组单调递增。有 $q$ 次询问，每次给出一个整数 $x$，求数组中有多少数小于等于 $x$。\n\n#### 问题 3\n\n**多组数据**，给定一个长度为 $n$ 的数组 $[a_1, a_2, \\dots a_n]$，有 $q$ 次询问，每次给出一个整数 $x$，求数组中有多少数小于等于 $x$。\n\n注：问题 $2$ 和问题 $3$ 除了在是否保证数组递增上有差异外，在数据范围上也有区别，见下。", "inputFormat": "#### 问题 1\n\n输入只有一行两个整数，依次表示 $x$ 和 $y$。\n\n#### 问题 2\n\n第一行是一个整数 $T$，表示测试数据组数。  \n接下来按顺序给出每组数据的输入。  \n每组数据第一行是两个整数，依次表示数组 $a$ 的长度 $n$ 和询问次数 $q$。  \n每组数据第二行有 $n$ 个整数，依次表示 $a_1, a_2, \\dots a_n$。  \n每组数据第三行有 $q$ 个整数，依次表示 $q$ 次询问给出的 $x$。\n\n#### 问题 3\n\n第一行是一个整数 $T$，表示测试数据组数。  \n接下来按顺序给出每组数据的输入。  \n每组数据第一行是两个整数，依次表示数组 $a$ 的长度 $n$ 和询问次数 $q$。  \n每组数据第二行有 $n$ 个整数，依次表示 $a_1, a_2, \\dots a_n$。  \n每组数据第三行有 $q$ 个整数，依次表示 $q$ 次询问给出的 $x$。", "outputFormat": "#### 问题 1\n\n输出只有一行一个整数，表示两数的最小公倍数。\n\n#### 问题 2\n\n对每组数据，输出一行 $q$ 个整数，依次表示每次询问的答案。\n\n#### 问题 3\n\n对每组数据，输出一行 $q$ 个整数，依次表示每次询问的答案。", "hint": "### 样例组与实际输入的说明\n\n三个样例分别对应三个问题的样例输入输出。\n\n如果你直接采用『提交答案』的方式，请分别将三个输入数据命名为 `1.in`、`2.in`、`3.in`，并打成 zip 压缩包进行提交；\n\n如果你采用提交数据生成器的方式，你的生成器可以从标准输入读入一个整数 $x$，满足 $1 \\leq x \\leq 3$，表示该测试点对应的问题编号，然后**输出对应的输入数据**。\n\n显然，你的程序不应该读入『输入格式』里提到的任何内容（而应该构造它们），也不应该输出『样例输出』里提到的任何内容（而是只输出你构造的输入数据）。你不应该使用样例测试你的程序，这只是对三个问题的样例说明。\n\n### 数据规模要求\n\n你给出的数据必须满足如下要求：\n\n1. 完全符合『输入格式』的规定，不能有多余的输入，但是可以有行末空格和文末回车。\n2. 数据中所有的数字都应为整数。\n3. 对于问题 1，$1 \\leq x, y \\leq 10^9$，且你**必须保证**两数的最小公倍数也不超过 $10^9$。\n4. 对于问题 2，$1 \\leq T \\leq 3$，$1 \\leq n,q \\leq 10^5$，$1 \\leq a_i, x \\leq 10^9$。\n5. 对于问题 3，$1 \\leq T \\leq 3$，$1 \\leq n, q, a_i, x \\leq 10^6$。\n\n### 目标代码\n\n你需要 hack 如下的代码：\n\n#### 问题 1\n\n```cpp\n#include <iostream>\n#include <algorithm>\n\nint main() {\n  int x, y;\n  std::cin >> x >> y;\n  int ans = x * y / std::__gcd(x, y);\n  std::cout << ans << std::endl;\n}\n```\n\n#### 问题 2\n\n```cpp\n#include <iostream>\n#include <algorithm>\n\nconst int maxn = 1000003;\n\nint T;\nint n, q;\nint a[maxn], b[maxn];\n\nint find(int x) {\n  int l = 1, r = n;\n  int ans = 0;\n  while (l < r) {\n    int mid = (l + r) >> 1;\n    if (a[mid] <= x) {\n      ans = mid;\n      l = mid + 1;\n    } else {\n      r = mid - 1;\n    }\n  }\n  return ans;\n}\n\nint main() {\n  std::ios::sync_with_stdio(false);\n  std::cin.tie(nullptr);\n  for (std::cin >> T; T; --T) {\n    std::cin >> n >> q;\n    for (int i = 1; i <= n; ++i) {\n      std::cin >> a[i];\n    }\n    for (int x; q; --q) {\n      std::cin >> x;\n      std::cout << find(x) << \" \";\n    }\n    std::cout << std::endl;\n  }\n}\n```\n\n#### 问题 3\n\n```cpp\n#include <iostream>\n\nconst int maxn = 1000003;\n\nint T;\nint n, q;\nint a[maxn], b[maxn];\n\nint main() {\n  std::ios::sync_with_stdio(false);\n  std::cin.tie(nullptr);\n  for (std::cin >> T; T; --T) {\n    std::cin >> n >> q;\n    for (int i = 1; i <= n; ++i) {\n      std::cin >> a[i];\n    }\n    for (int i = 1; i <= n; ++i) {\n      b[a[i]]++;\n    }\n    for (int i = 1; i < maxn; ++i) b[i] += b[i - 1];\n    for (int x; q; --q) {\n      std::cin >> x;\n      std::cout << b[x] << \" \\n\"[q == 1];\n    }\n  }\n}\n```\n\n目标代码的编译选项为 `-std=c++14 -fno-asm -O2`。编译器为洛谷提供的 g++。你可以在『在线 IDE』中选择 C++14 语言来获得完全相同的编译环境。\n\n### 判分说明\n\n本题共三个测试点，分别对应三个问题，每个问题 hack 成功则对应测试点返回 accepted。\n\n#### 数据判定\n\n你给出的数据必须完全符合『数据规模要求』，否则将得到 Unaccepted 的结果。\n\n#### 超时判定\n\n程序每执行若干条指令，我们会检测一遍程序的运行时间。我们保证两次检测之间的指令条数是一个输入规模无关的量，也即每执行 $O(1)$ 条指令会进行一次检测。且两次检测之间的指令条数不会太多，一般不超过 $100$ 条 C++ 语句。\n\n如果程序的运行时间超过 $500 \\text{ms}$，则判定为程序运行超时，返回 accepted 结果。\n\n#### 结果错误判定\n\n如果程序在规定的时间内结束且给出了一个输出，我们会比较这个输出和**完全正确的输出**，如果二者不同，则判定为 hack 成功，返回 accepted 结果。\n\n#### 未定义行为判定\n\n我们会在每次**显式**的调用数组元素前判断数组下标是否超过数组范围，如果超过，则判定为 hack 成功，返回 accepted 结果。\n\n这就是说，如果你希望通过未定义行为进行 hack，只能对显式的调用数组元素的行为进行 hack。\n\n### 样例程序\n\n这是一份可以帮你理解你需要输出的内容的样例程序，**但它不能给出正确的 hack 数据**。直接提交此程序不会得分。\n\n```cpp\n#include <iostream>\n\nusing namespace std;\n\nint main() {\n  int taskId;\n  cin >> taskId;\n  if (taskId == 1) {\n    cout << \"\" <<endl;\n  } else if (taskId == 2) {\n    cout << \"\" << endl;\n  } else if (taskId == 3) {\n    cout << \"\" << endl;\n  } else { // 这个 else 不会被执行\n    cout << \"QiHai Nanami\" << endl;\n  }\n}\n```\n\n如果你使用『提交答案』功能，请务必保证打开压缩包后能且仅能**直接**看到三个 `.in` 文件。这就是说，文件结构必须是：\n\n```plain\nans.zip\n |---1.in\n |---2.in\n |---3.in\n```\n\n三个文件不应该被额外的文件夹包含，即文件结构不能是：\n\n```plain\nans.zip\n |---ans(folder)\n      |---1.in\n      |---2.in\n      |---3.in\n```\n\n### 关于评测信息的说明\n\n如果 hack 成功，对应测试点的信息为 accepted。如果返回其他信息，说明程序本身有误。\n\n例如，如果返回 TLE，不代表成功的将对应程序 hack 至超时，而是表示数据生成器本身运行超时，测试点不得分。\n\n特别的，返回 UKE 结果可能是数据不合法（有多余内容、缺少内容或数据范围不符合要求）。", "locale": "zh-CN"}}}
{"pid": "P8932", "type": "P", "difficulty": 3, "samples": [["2\naabc\n2 b\n4 b", "2\n2\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["模拟", "2023", "洛谷原创"], "title": "[JRKSJ R7] Clock Paradox", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/47sjcgd5.png)\n\n一分钟后的出题人阻止了这个时刻的出题人写一个有趣的题目背景。\n\n（题目背景图片来自 Phigros 曲绘，如有侵权，请告知出题人。）", "description": "给你一个字符串 $S$，设 $S=\\overline{s_1s_2\\dots s_n}$。\n\n有一个字符串 $T$，初始时 $T=S$，你可以进行若干次操作，每次操作可以选取 $S$ 一个子串并插入到 $T$ 的任意位置。\n\n你希望经过若干次操作后，$T=\\overline{s_1s_1s_2s_2\\dots s_ns_n}$，定义 $f(S)$ 为满足此条件所需的最少的操作次数。\n\n此外，字符串 $S$ 还会发生一些改变。具体地，有 $q$ 次修改操作，每次修改操作会给出 $p$ 和 $\\texttt{c}$，表示令 $s_p\\gets \\texttt{c}$。$\\texttt{c}$ 表示任意一个小写字母，而并非 ASCII 为 $99$ 的字符。\n\n你需要在最开始和每次修改后求出 $f(S)$ 的值。", "inputFormat": "第一行一个整数 $q$ 表示修改次数。\\\n第二行仅由小写字母构成的字符串 $S$。\\\n接下来 $q$ 行，每行一个整数 $p$ 和一个小写字母 $\\texttt{c}$ 表示一次修改。", "outputFormat": "共有 $q+1$ 行，每行一个整数表示答案。", "hint": "Idea：cyffff，Solution：cyffff，Code：cyffff，Data：cyffff\n\n**Clock Paradox - WyvernP (Insane12.6)**\n\n**本题输入输出文件较大，请使用恰当的输入输出方式。**  \n\n### 提示\n\n称字符串 $A$ 是字符串 $S$ 的子串当且仅当存在 $1\\le l\\le r\\le |S|$ 使得 $A=\\overline{s_ls_{l+1}\\dots s_{r}}$。\n\n### 样例解释\n所有修改前，$f(S)$ 的计算方法如下：\n\n初始时，$S=T=\\texttt{aabc}$。\n\n第一次操作，选取 $S$ 的子串 $\\texttt{aa}$，插入到 $T$ 的最前端，操作后 $T=\\texttt{aaaabc}$。\n\n第二次操作，选取 $S$ 的子串 $\\texttt{bc}$，插入到 $T$ 的第 $5$ 个字符后，操作后 $T=\\texttt{aaaabbcc}$，符合要求。\n\n经过一次修改、两次修改后的 $S$ 分别等于 $\\texttt{abbc}$ 和 $\\texttt{abbb}$，这两次修改后 $f(S)$ 分别是 $2$ 和 $1$。\n### 数据规模\n\n本题采用捆绑测试。\n| $\\text{Subtask}$ | $\\vert S\\vert\\le$ | $q\\le$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $0$ | $10$ |\n| $2$ | $10^4$ | $10^4$ | $20$ |\n| $3$ | $5\\times10^5$ | $0$ | $20$ |\n| $4$ | $5\\times10^5$ | $5\\times 10^5$ | $20$ |\n| $5$ | $3\\times10^6$ | $3\\times 10^6$ | $30$ |\n\n对于 $100\\%$ 的数据，$1\\le|S|\\le3\\times10^6$，$0\\le q\\le 3\\times10^6$，保证 $S$ 仅由小写字母构成，保证 $\\texttt{c}$ 为单个小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R7] Clock Paradox", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/47sjcgd5.png)\n\n一分钟后的出题人阻止了这个时刻的出题人写一个有趣的题目背景。\n\n（题目背景图片来自 Phigros 曲绘，如有侵权，请告知出题人。）", "description": "给你一个字符串 $S$，设 $S=\\overline{s_1s_2\\dots s_n}$。\n\n有一个字符串 $T$，初始时 $T=S$，你可以进行若干次操作，每次操作可以选取 $S$ 一个子串并插入到 $T$ 的任意位置。\n\n你希望经过若干次操作后，$T=\\overline{s_1s_1s_2s_2\\dots s_ns_n}$，定义 $f(S)$ 为满足此条件所需的最少的操作次数。\n\n此外，字符串 $S$ 还会发生一些改变。具体地，有 $q$ 次修改操作，每次修改操作会给出 $p$ 和 $\\texttt{c}$，表示令 $s_p\\gets \\texttt{c}$。$\\texttt{c}$ 表示任意一个小写字母，而并非 ASCII 为 $99$ 的字符。\n\n你需要在最开始和每次修改后求出 $f(S)$ 的值。", "inputFormat": "第一行一个整数 $q$ 表示修改次数。\\\n第二行仅由小写字母构成的字符串 $S$。\\\n接下来 $q$ 行，每行一个整数 $p$ 和一个小写字母 $\\texttt{c}$ 表示一次修改。", "outputFormat": "共有 $q+1$ 行，每行一个整数表示答案。", "hint": "Idea：cyffff，Solution：cyffff，Code：cyffff，Data：cyffff\n\n**Clock Paradox - WyvernP (Insane12.6)**\n\n**本题输入输出文件较大，请使用恰当的输入输出方式。**  \n\n### 提示\n\n称字符串 $A$ 是字符串 $S$ 的子串当且仅当存在 $1\\le l\\le r\\le |S|$ 使得 $A=\\overline{s_ls_{l+1}\\dots s_{r}}$。\n\n### 样例解释\n所有修改前，$f(S)$ 的计算方法如下：\n\n初始时，$S=T=\\texttt{aabc}$。\n\n第一次操作，选取 $S$ 的子串 $\\texttt{aa}$，插入到 $T$ 的最前端，操作后 $T=\\texttt{aaaabc}$。\n\n第二次操作，选取 $S$ 的子串 $\\texttt{bc}$，插入到 $T$ 的第 $5$ 个字符后，操作后 $T=\\texttt{aaaabbcc}$，符合要求。\n\n经过一次修改、两次修改后的 $S$ 分别等于 $\\texttt{abbc}$ 和 $\\texttt{abbb}$，这两次修改后 $f(S)$ 分别是 $2$ 和 $1$。\n### 数据规模\n\n本题采用捆绑测试。\n| $\\text{Subtask}$ | $\\vert S\\vert\\le$ | $q\\le$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $0$ | $10$ |\n| $2$ | $10^4$ | $10^4$ | $20$ |\n| $3$ | $5\\times10^5$ | $0$ | $20$ |\n| $4$ | $5\\times10^5$ | $5\\times 10^5$ | $20$ |\n| $5$ | $3\\times10^6$ | $3\\times 10^6$ | $30$ |\n\n对于 $100\\%$ 的数据，$1\\le|S|\\le3\\times10^6$，$0\\le q\\le 3\\times10^6$，保证 $S$ 仅由小写字母构成，保证 $\\texttt{c}$ 为单个小写字母。", "locale": "zh-CN"}}}
{"pid": "P8933", "type": "P", "difficulty": 4, "samples": [["1\n2 2", "16"], ["1\n3 3", "32"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["2023", "洛谷原创", "深度优先搜索 DFS"], "title": "[JRKSJ R7] 技巧性的块速递推", "background": "充分必要，切比雪夫。\n\n原来还是，不需要了。", "description": "一个 $n\\times m$ 的棋盘，对每个格子染上黑白两色之一。\n\n询问有多少种染色方式，使得不存在横、竖、斜连续四个格子中存在至少三个相同颜色的格子，并且不存在横、竖、斜连续三个格子的颜色相同。\n\n若设棋盘的左上角为 $(1,1)$，右下角为 $(n,m)$，则称 $\\{(x,y),(x+1,y),(x+2,y)\\}$ 为横的连续三个格子，$\\{(x,y),(x,y+1),(x,y+2)\\}$ 为竖的连续三个格子、$\\{(x,y),(x+1,y+1),(x+2,y+2)\\}$ 和 $\\{(x,y),(x+1,y-1),(x+2,y-2)\\}$ 为斜的连续三个格子（以上格子均在棋盘内）。\n\n连续四个格子同理。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。\\\n接下来 $T$ 行，每行两个整数 $n,m$ 表示一次询问。", "outputFormat": "共 $T$ 行，每行一个整数表示答案。答案对 $998244353$ 取模。", "hint": "### 样例解释\n\n样例 $1$：显然任意染色均合法，答案为 $2^4=16$。\n\n样例 $2$：\n\n```\n101\n110\n010\n```\n\n这是合法方案之一。\n\n```\n111\n110\n011\n```\n\n这是不合法方案之一，因为 $\\{(1,1),(1,2),(1,3)\\}$、$\\{(1,2),(2,2),(3,2)\\}$ 和 $\\{(1,1),(2,2),(3,3)\\}$ 均不满足条件。\n\n### 数据规模\n\n本题采用捆绑测试。\n| $\\text{Subtask}$ | $n,m\\le$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | \n| $1$ | $30$ | $40$ |\n| $2$ | $10^9$ | $60$ |\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le n,m\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R7] 技巧性的块速递推", "background": "充分必要，切比雪夫。\n\n原来还是，不需要了。", "description": "一个 $n\\times m$ 的棋盘，对每个格子染上黑白两色之一。\n\n询问有多少种染色方式，使得不存在横、竖、斜连续四个格子中存在至少三个相同颜色的格子，并且不存在横、竖、斜连续三个格子的颜色相同。\n\n若设棋盘的左上角为 $(1,1)$，右下角为 $(n,m)$，则称 $\\{(x,y),(x+1,y),(x+2,y)\\}$ 为横的连续三个格子，$\\{(x,y),(x,y+1),(x,y+2)\\}$ 为竖的连续三个格子、$\\{(x,y),(x+1,y+1),(x+2,y+2)\\}$ 和 $\\{(x,y),(x+1,y-1),(x+2,y-2)\\}$ 为斜的连续三个格子（以上格子均在棋盘内）。\n\n连续四个格子同理。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。\\\n接下来 $T$ 行，每行两个整数 $n,m$ 表示一次询问。", "outputFormat": "共 $T$ 行，每行一个整数表示答案。答案对 $998244353$ 取模。", "hint": "### 样例解释\n\n样例 $1$：显然任意染色均合法，答案为 $2^4=16$。\n\n样例 $2$：\n\n```\n101\n110\n010\n```\n\n这是合法方案之一。\n\n```\n111\n110\n011\n```\n\n这是不合法方案之一，因为 $\\{(1,1),(1,2),(1,3)\\}$、$\\{(1,2),(2,2),(3,2)\\}$ 和 $\\{(1,1),(2,2),(3,3)\\}$ 均不满足条件。\n\n### 数据规模\n\n本题采用捆绑测试。\n| $\\text{Subtask}$ | $n,m\\le$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | \n| $1$ | $30$ | $40$ |\n| $2$ | $10^9$ | $60$ |\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le n,m\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8934", "type": "P", "difficulty": 6, "samples": [["3 3\n1 1\n2 2", "13"], ["10 2\n1 7\n1 2\n1 5\n4 5\n2 1\n3 9\n2 9\n4 4\n9 4", "736"], ["4 1\n1 1\n2 1\n3 1", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2023", "洛谷原创", "O2优化", "树的直径"], "title": "[JRKSJ R7] TSM eerT", "background": "", "description": "对于一个 $n$ 个结点的带边权的树 $T$，定义 $dis(x,y)$ 为 $T$ 中 $x\\to y$ 路径上的边权和。再定义一个 $n$ 个结点的无向完全图 $p(T)=G$，其中 $\\forall x,y\\in [1,n]$，$G$ 中边 $(x,y)$ 的边权为 $dis(x,y)$。\n\n定义 $f(T)$ 为 $p(T)$ 的最大生成树。特别的，若 $p(T)$ 的最大生成树不唯一，请立刻判断出并报告。\n\n给定树 $T_0$ 和整数 $k$，求 $f^k(T_0)$。其定义将在下文给出。", "inputFormat": "第一行两个整数 $n,k$。\\\n下面第 $2\\sim n$ 行，第 $i$ 行两个整数 $i-f_i,v_i$ 表示 $T_0$ 的一条边 $(i,f_i)$，边权为 $v_i$。**也就是说，这一行输入了两个整数 $f'_i,v_i$，真实的 $f_i=i-f'_i$。**", "outputFormat": "输出仅有一个整数表示答案。\n\n若 $\\exists x\\in[0,k-1]$ 使得 $p(f^x(T_0))$ 的最大生成树不唯一，输出 $-1$。否则，输出 $f^k(T_0)$ 的所有边权和对 $2^{32}$ 取模的结果。", "hint": "### 定义\n\n$f^k(T)$ 的定义为：\n$$f^k(T)=\\begin{cases}T&k=0\\\\f(f^{k-1}(T))&k>0\\end{cases}$$\n\n### 样例 $1$ 解释\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fpcq3bmt.png)\n\n分别是 $T_0,f(T_0),f^2(T_0),f^3(T_0)$。\n\n以计算 $f(T_0)$ 的过程为例，生成的 $p(T_0)=G$ 为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3st5aet7.png)\n\n最大生成树上的边为 $(1,3),(2,3)$。\n\n### 数据规模\n\n本题采用捆绑测试。\n| $\\text{Subtask}$ | $n\\le$ |  $k\\le$ | $\\text{Score}$ | \n| :----------: | :----------: | :----------: | :----------: | \n| $1$ | $10^3$ | $1$ | $10$ | \n| $2$ | $10^5$ | $1$ |$20$ |\n| $3$ | $10^6$ | $1$ |$30$ |\n| $4$ | $10^6$ | $10^7$ |$40$ |\n\n对于 $100\\%$ 的数据，$2\\le n\\le 10^6$，$1\\le k\\le 10^7$，$1\\le f_i<i$，$1\\le v_i\\le10^9$。\n\n### 特殊评分方式\n本题开启子任务依赖，具体如下：\n- 对于子任务 $i$，您需要答对所有 $j\\in[1,i]$ 的子任务 $j$ 才能获得子任务 $i$ 的分数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R7] TSM eerT", "background": "", "description": "对于一个 $n$ 个结点的带边权的树 $T$，定义 $dis(x,y)$ 为 $T$ 中 $x\\to y$ 路径上的边权和。再定义一个 $n$ 个结点的无向完全图 $p(T)=G$，其中 $\\forall x,y\\in [1,n]$，$G$ 中边 $(x,y)$ 的边权为 $dis(x,y)$。\n\n定义 $f(T)$ 为 $p(T)$ 的最大生成树。特别的，若 $p(T)$ 的最大生成树不唯一，请立刻判断出并报告。\n\n给定树 $T_0$ 和整数 $k$，求 $f^k(T_0)$。其定义将在下文给出。", "inputFormat": "第一行两个整数 $n,k$。\\\n下面第 $2\\sim n$ 行，第 $i$ 行两个整数 $i-f_i,v_i$ 表示 $T_0$ 的一条边 $(i,f_i)$，边权为 $v_i$。**也就是说，这一行输入了两个整数 $f'_i,v_i$，真实的 $f_i=i-f'_i$。**", "outputFormat": "输出仅有一个整数表示答案。\n\n若 $\\exists x\\in[0,k-1]$ 使得 $p(f^x(T_0))$ 的最大生成树不唯一，输出 $-1$。否则，输出 $f^k(T_0)$ 的所有边权和对 $2^{32}$ 取模的结果。", "hint": "### 定义\n\n$f^k(T)$ 的定义为：\n$$f^k(T)=\\begin{cases}T&k=0\\\\f(f^{k-1}(T))&k>0\\end{cases}$$\n\n### 样例 $1$ 解释\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fpcq3bmt.png)\n\n分别是 $T_0,f(T_0),f^2(T_0),f^3(T_0)$。\n\n以计算 $f(T_0)$ 的过程为例，生成的 $p(T_0)=G$ 为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3st5aet7.png)\n\n最大生成树上的边为 $(1,3),(2,3)$。\n\n### 数据规模\n\n本题采用捆绑测试。\n| $\\text{Subtask}$ | $n\\le$ |  $k\\le$ | $\\text{Score}$ | \n| :----------: | :----------: | :----------: | :----------: | \n| $1$ | $10^3$ | $1$ | $10$ | \n| $2$ | $10^5$ | $1$ |$20$ |\n| $3$ | $10^6$ | $1$ |$30$ |\n| $4$ | $10^6$ | $10^7$ |$40$ |\n\n对于 $100\\%$ 的数据，$2\\le n\\le 10^6$，$1\\le k\\le 10^7$，$1\\le f_i<i$，$1\\le v_i\\le10^9$。\n\n### 特殊评分方式\n本题开启子任务依赖，具体如下：\n- 对于子任务 $i$，您需要答对所有 $j\\in[1,i]$ 的子任务 $j$ 才能获得子任务 $i$ 的分数。", "locale": "zh-CN"}}}
{"pid": "P8935", "type": "P", "difficulty": 6, "samples": [["3 2 2\n1 2\n1 3", "1"], ["5 2 4\n1 2\n1 3\n2 4\n2 5", "9"], ["5 1 4\n1 2\n1 3\n2 4\n2 5", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2023", "洛谷原创", "O2优化", "背包 DP", "树形 DP"], "title": "[JRKSJ R7] 茎", "background": "", "description": "你有一棵 $n$ 个点的根节点为 $1$ 的有根树，现在你要对这棵树进行剪枝，每次你可以选择一个还未被剪掉的节点 $u$ 进行操作，然后剪掉 $u$ 的子树所有点（包括 $u$）。当且仅当你剪掉 $1$ 时，操作停止。  \n\n你知道 $1$ 到 $x$ 这条路径是这棵树的茎，需要特殊处理。所以你需要在第 $k$ 次剪枝时对 $x$ 进行操作，而非仅仅将其剪掉，即你不能在第 $k$ 次及以前对其祖先进行操作使其被连带剪掉。 \n\n求有多少种不同的操作序列，两个操作序列不同当且仅当长度不同或存在一次操作 $i$ 使得两操作序列在第 $i$ 次时选择的 $u$ 不同。输出答案模 $10^9+7$。", "inputFormat": "第一行三个数 $n,k,x$。  \n接下来 $n-1$ 行每行两个数 $u,v$，代表树上的一条边 $(u,v)$。", "outputFormat": "一个数表示答案对 $10^9+7$ 取模的结果。", "hint": "### 样例解释\n\n对于样例 $1$，只有一种操作方法满足条件，第一次操作 $3$，第二次操作 $2$，第三次操作 $1$。  \n\n对于样例 $2$，满足条件的操作序列：$\\{3,4,1\\},\\{3,4,2,1\\},\\{3,4,5,1\\},\\{3,4,5,2,1\\},\\\\ \\{5,4,1\\},\\{5,4,2,1\\},\\{5,4,2,3,1\\},\\{5,4,3,1\\},\\{5,4,3,2,1\\}$。\n\n### 数据规模\n本题采用捆绑测试。\n\n|$\\text{Subtask}$|$n\\le$|特殊性质|$\\text{Score}$|\n|:-:|:-:|:-:|:-:|\n|$1$|$7$|无|$5$|\n|$2$|$17$|无|$10$|\n|$3$|$50$|$\\text A$|$5$|\n|$4$|$50$|无|$15$|\n|$5$|$500$|$\\text A$|$5$|\n|$6$|$500$|$\\text B$|$5$|\n|$7$|$500$|$\\text C$|$10$|\n|$8$|$500$|无|$45$|\n\n特殊性质 $\\text A$：保证 $k=1$。\\\n特殊性质 $\\text B$：保证 $x=1$。\\\n特殊性质 $\\text C$：保证 $\\forall i\\in[1,n-1],i$ 与 $i+1$ 有边。\n\n对于 $100\\%$ 的数据，$1\\le k,x\\le n\\le 500$。  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R7] 茎", "background": "", "description": "你有一棵 $n$ 个点的根节点为 $1$ 的有根树，现在你要对这棵树进行剪枝，每次你可以选择一个还未被剪掉的节点 $u$ 进行操作，然后剪掉 $u$ 的子树所有点（包括 $u$）。当且仅当你剪掉 $1$ 时，操作停止。  \n\n你知道 $1$ 到 $x$ 这条路径是这棵树的茎，需要特殊处理。所以你需要在第 $k$ 次剪枝时对 $x$ 进行操作，而非仅仅将其剪掉，即你不能在第 $k$ 次及以前对其祖先进行操作使其被连带剪掉。 \n\n求有多少种不同的操作序列，两个操作序列不同当且仅当长度不同或存在一次操作 $i$ 使得两操作序列在第 $i$ 次时选择的 $u$ 不同。输出答案模 $10^9+7$。", "inputFormat": "第一行三个数 $n,k,x$。  \n接下来 $n-1$ 行每行两个数 $u,v$，代表树上的一条边 $(u,v)$。", "outputFormat": "一个数表示答案对 $10^9+7$ 取模的结果。", "hint": "### 样例解释\n\n对于样例 $1$，只有一种操作方法满足条件，第一次操作 $3$，第二次操作 $2$，第三次操作 $1$。  \n\n对于样例 $2$，满足条件的操作序列：$\\{3,4,1\\},\\{3,4,2,1\\},\\{3,4,5,1\\},\\{3,4,5,2,1\\},\\\\ \\{5,4,1\\},\\{5,4,2,1\\},\\{5,4,2,3,1\\},\\{5,4,3,1\\},\\{5,4,3,2,1\\}$。\n\n### 数据规模\n本题采用捆绑测试。\n\n|$\\text{Subtask}$|$n\\le$|特殊性质|$\\text{Score}$|\n|:-:|:-:|:-:|:-:|\n|$1$|$7$|无|$5$|\n|$2$|$17$|无|$10$|\n|$3$|$50$|$\\text A$|$5$|\n|$4$|$50$|无|$15$|\n|$5$|$500$|$\\text A$|$5$|\n|$6$|$500$|$\\text B$|$5$|\n|$7$|$500$|$\\text C$|$10$|\n|$8$|$500$|无|$45$|\n\n特殊性质 $\\text A$：保证 $k=1$。\\\n特殊性质 $\\text B$：保证 $x=1$。\\\n特殊性质 $\\text C$：保证 $\\forall i\\in[1,n-1],i$ 与 $i+1$ 有边。\n\n对于 $100\\%$ 的数据，$1\\le k,x\\le n\\le 500$。  \n", "locale": "zh-CN"}}}
{"pid": "P8936", "type": "P", "difficulty": 6, "samples": [["5 5\n1 3 1\n2 4 1\n2 3 1\n1 3 1\n1 4 1\n", "9 2 20"], ["3 5\n1 3 2\n1 1 1\n2 2 2\n3 3 3\n1 3 2\n", "5 7 11"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "并查集", "2023", "颜色段均摊（珂朵莉树 ODT）", "洛谷原创", "O2优化"], "title": "[JRKSJ R7] 月下缭乱", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/xkd5zhgk.png?x-oss-process=image)\n\n轻快的音乐声坚定了你做一道简单题的决心。\n\n（题目背景图片来自 Phigros 曲绘，如有侵权，请告知出题人。）", "description": "你有一个长度为 $n$，初值全为 $0$ 的序列 $a$。\n\n你有长为 $m$ 的操作序列，其中第 $i$ 次有三个参数 $l_i,r_i,x_i$，表示令 $\\forall j\\in[l_i,r_i] ,a_j\\gets\\max(a_j,x_i)$。\n\n令 $\\text{sol}(l,r)$ 表示依次操作第 $l$ 至第 $r$ 个操作后的 $a$ 序列。\n\n你需要回答有多少对 $(l,r)$ 满足 $1\\le l\\le r\\le m$ 且 $\\text{sol}(l,r)=\\text{sol}(1,m)$。\n\n记 $f_i$ 为有多少 $i\\le k\\le m$ 满足 $\\text{sol}(i,k)=\\text{sol}(1,m)$，你还需要输出 $\\displaystyle\\bigoplus_{i=1}^m f_i\\times i$ 与 $\\displaystyle\\sum_{i=1}^m f_i\\times i$ 的值。\n\n所有答案都需要对 $2^{32}$ 取模后输出。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $m$ 行，每行三个整数 $l_i,r_i,x_i$，表示第 $i$ 个操作。", "outputFormat": "一行三个整数表示答案，对 $2^{32}$ 取模。", "hint": "Idea：cyffff，Solution：Ntokisq / abruce，Code：cyffff，Data：cyffff\n\n**月下缭乱 - 月見静華 vs. LUNARiUM (Insane14.8)**\n\n**本题输入输出文件较大，请使用恰当的输入输出方式。**\n\n### 样例解释\n\n对于样例 $2$，最终 $a$ 序列的值为 $\\{2,2,3\\}$。不难发现，进行 $[1,4],[1,5],[2,5],[3,5],[4,5]$ 内的操作都可以使得 $a$ 与进行所有操作后 $a$ 序列的值相同。答案为 $5$。$f$ 序列的值为 $\\{2,1,1,1,0\\}$。\n\n### 数据规模\n本题采用捆绑测试。\n\n::cute-table\n| $\\text{Subtask}$ | $n,m\\le$ | 特殊限制 | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $100$ | 无 | $10$ |\n| $2$ | $10^4$ | ^ | $20$ |\n| $3$ | $3\\times10^5$ | 保证 $l_i=r_i$ | $10$ |\n| $4$ | ^ | 保证 $x_i=1$ | $10$ |\n| $5$ | ^ | 无 | $20$ |\n| $6$ | $10^6$ | ^ | $30$ |\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^6$，$1\\le l_i\\le r_i\\le n$，$1\\le x_i\\le m$。\n### 特殊评分方式\n本题开启子任务依赖，具体如下：\n- 对于子任务 $i\\in\\{1,3,4\\}$，您只需答对子任务 $i$ 即可获得子任务 $i$ 的分数。\n- 对于子任务 $i\\in\\{2,5,6\\}$，您需要答对所有 $j\\in[1,i]$ 的子任务 $j$ 才能获得子任务 $i$ 的分数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R7] 月下缭乱", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/xkd5zhgk.png?x-oss-process=image)\n\n轻快的音乐声坚定了你做一道简单题的决心。\n\n（题目背景图片来自 Phigros 曲绘，如有侵权，请告知出题人。）", "description": "你有一个长度为 $n$，初值全为 $0$ 的序列 $a$。\n\n你有长为 $m$ 的操作序列，其中第 $i$ 次有三个参数 $l_i,r_i,x_i$，表示令 $\\forall j\\in[l_i,r_i] ,a_j\\gets\\max(a_j,x_i)$。\n\n令 $\\text{sol}(l,r)$ 表示依次操作第 $l$ 至第 $r$ 个操作后的 $a$ 序列。\n\n你需要回答有多少对 $(l,r)$ 满足 $1\\le l\\le r\\le m$ 且 $\\text{sol}(l,r)=\\text{sol}(1,m)$。\n\n记 $f_i$ 为有多少 $i\\le k\\le m$ 满足 $\\text{sol}(i,k)=\\text{sol}(1,m)$，你还需要输出 $\\displaystyle\\bigoplus_{i=1}^m f_i\\times i$ 与 $\\displaystyle\\sum_{i=1}^m f_i\\times i$ 的值。\n\n所有答案都需要对 $2^{32}$ 取模后输出。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $m$ 行，每行三个整数 $l_i,r_i,x_i$，表示第 $i$ 个操作。", "outputFormat": "一行三个整数表示答案，对 $2^{32}$ 取模。", "hint": "Idea：cyffff，Solution：Ntokisq / abruce，Code：cyffff，Data：cyffff\n\n**月下缭乱 - 月見静華 vs. LUNARiUM (Insane14.8)**\n\n**本题输入输出文件较大，请使用恰当的输入输出方式。**\n\n### 样例解释\n\n对于样例 $2$，最终 $a$ 序列的值为 $\\{2,2,3\\}$。不难发现，进行 $[1,4],[1,5],[2,5],[3,5],[4,5]$ 内的操作都可以使得 $a$ 与进行所有操作后 $a$ 序列的值相同。答案为 $5$。$f$ 序列的值为 $\\{2,1,1,1,0\\}$。\n\n### 数据规模\n本题采用捆绑测试。\n\n::cute-table\n| $\\text{Subtask}$ | $n,m\\le$ | 特殊限制 | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $100$ | 无 | $10$ |\n| $2$ | $10^4$ | ^ | $20$ |\n| $3$ | $3\\times10^5$ | 保证 $l_i=r_i$ | $10$ |\n| $4$ | ^ | 保证 $x_i=1$ | $10$ |\n| $5$ | ^ | 无 | $20$ |\n| $6$ | $10^6$ | ^ | $30$ |\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^6$，$1\\le l_i\\le r_i\\le n$，$1\\le x_i\\le m$。\n### 特殊评分方式\n本题开启子任务依赖，具体如下：\n- 对于子任务 $i\\in\\{1,3,4\\}$，您只需答对子任务 $i$ 即可获得子任务 $i$ 的分数。\n- 对于子任务 $i\\in\\{2,5,6\\}$，您需要答对所有 $j\\in[1,i]$ 的子任务 $j$ 才能获得子任务 $i$ 的分数。", "locale": "zh-CN"}}}
{"pid": "P8937", "type": "P", "difficulty": 7, "samples": [["10 10\n20 10 20 14 4 15 11 20 2 13 \n2 5 9 1\n1 7 8 2\n1 2 3 8\n1 4 6 12\n2 1 7 9\n2 2 7 20\n2 3 9 4\n2 8 9 7\n1 3 10 0\n2 8 9 7", "0\n5\n6\n2\n1\n1"], ["5 5\n6 10 3 4 7 \n1 1 3 3\n1 3 4 3\n2 3 5 3\n1 1 3 11\n2 2 3 5", "2\n2"]], "limits": {"time": [1000, 5000, 5000, 5000, 20000, 20000, 20000, 20000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "洛谷原创", "O2优化"], "title": "[JRKSJ R7] 五彩斑斓的曙光", "background": "题目名称由 fjy666 提供，背景 TBD.", "description": "给您一个长度为 $n$ 的序列 $a$，请您支持 $m$ 次操作：\n\n1. 将 $[l,r]$ 区间中 $> x$ 的数减去 $x$。\n2. 求 $[l,r]$ 区间中 $\\le x$ 的数的个数。", "inputFormat": "**本题强制在线。**\n\n第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数表示 $a$。\n\n下面 $m$ 行，每行四个整数 $opt,l,r,x'$，$opt$ 表示操作编号，$x'$ 异或上次操作 $2$ 答案得到真实的 $x$。若此前没有操作 $2$，则不需要进行异或操作，真实的 $x$ 即为 $x'$。", "outputFormat": "对于所有操作 $2$，每行输出一个整数表示答案。", "hint": "Idea：Ntokisq&nzhtl1477，Solution：Ntokisq，Code：Ntokisq，Data：Ntokisq\n\n### 样例解释\n\n样例 $1$ 未加密前：\n\n```cpp\n10 10\n20 10 20 14 4 15 11 20 2 13\n2 5 9 1\n1 7 8 2\n1 2 3 8\n1 4 6 12\n2 1 7 9\n2 2 7 17\n2 3 9 2\n2 8 9 5\n1 3 10 1\n2 8 9 6\n```\n样例 $2$ 未加密前：\n\n```cpp\n5 5\n6 10 3 4 7\n1 1 3 3\n1 3 4 3\n2 3 5 3\n1 1 3 9\n2 2 3 7\n```\n\n\n\n### 数据规模\n\n本题采用捆绑测试。\n| $\\text{Subtask}$ | $n\\le$ | $m\\le$ | $\\text{Score}$ | 时间限制 |\n| :----------: | :----------: | :----------: | :----------: |  :----------: | \n| $1$ | $10^4$ | $10^4$ | $10$ | $\\text{1s}$ |\n| $2$ | $3\\times 10^5$ | $3\\times 10^5$ | $30$ | $\\text{5s}$ |\n| $3$ | $7\\times 10^5$ | $5\\times 10^5$ | $60$ | $\\text{20s}$ |\n\n对于 $100\\%$ 的数据，$1\\le n \\le 7\\times 10^5$，$1\\le m\\le  5\\times 10^5$，$1\\le a_i,x\\le 10^9$，$1\\le l\\le r\\le n$。\n\n### 提示\n\n如果您认为您的算法时间复杂度正确但常数过大，您可以使用同样思路但时间复杂度略高、常数小的算法。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R7] 五彩斑斓的曙光", "background": "题目名称由 fjy666 提供，背景 TBD.", "description": "给您一个长度为 $n$ 的序列 $a$，请您支持 $m$ 次操作：\n\n1. 将 $[l,r]$ 区间中 $> x$ 的数减去 $x$。\n2. 求 $[l,r]$ 区间中 $\\le x$ 的数的个数。", "inputFormat": "**本题强制在线。**\n\n第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数表示 $a$。\n\n下面 $m$ 行，每行四个整数 $opt,l,r,x'$，$opt$ 表示操作编号，$x'$ 异或上次操作 $2$ 答案得到真实的 $x$。若此前没有操作 $2$，则不需要进行异或操作，真实的 $x$ 即为 $x'$。", "outputFormat": "对于所有操作 $2$，每行输出一个整数表示答案。", "hint": "Idea：Ntokisq&nzhtl1477，Solution：Ntokisq，Code：Ntokisq，Data：Ntokisq\n\n### 样例解释\n\n样例 $1$ 未加密前：\n\n```cpp\n10 10\n20 10 20 14 4 15 11 20 2 13\n2 5 9 1\n1 7 8 2\n1 2 3 8\n1 4 6 12\n2 1 7 9\n2 2 7 17\n2 3 9 2\n2 8 9 5\n1 3 10 1\n2 8 9 6\n```\n样例 $2$ 未加密前：\n\n```cpp\n5 5\n6 10 3 4 7\n1 1 3 3\n1 3 4 3\n2 3 5 3\n1 1 3 9\n2 2 3 7\n```\n\n\n\n### 数据规模\n\n本题采用捆绑测试。\n| $\\text{Subtask}$ | $n\\le$ | $m\\le$ | $\\text{Score}$ | 时间限制 |\n| :----------: | :----------: | :----------: | :----------: |  :----------: | \n| $1$ | $10^4$ | $10^4$ | $10$ | $\\text{1s}$ |\n| $2$ | $3\\times 10^5$ | $3\\times 10^5$ | $30$ | $\\text{5s}$ |\n| $3$ | $7\\times 10^5$ | $5\\times 10^5$ | $60$ | $\\text{20s}$ |\n\n对于 $100\\%$ 的数据，$1\\le n \\le 7\\times 10^5$，$1\\le m\\le  5\\times 10^5$，$1\\le a_i,x\\le 10^9$，$1\\le l\\le r\\le n$。\n\n### 提示\n\n如果您认为您的算法时间复杂度正确但常数过大，您可以使用同样思路但时间复杂度略高、常数小的算法。", "locale": "zh-CN"}}}
{"pid": "P8938", "type": "P", "difficulty": 2, "samples": [["3 3\n3 2 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "[DTOI 2023] A. 小狗哥哥", "background": "luanmenglei 有一个辉煌的现在：他们班的女同学都叫他易酱。\n\n但谁能想到 luanmenglei 有一个悲伤的过去，他五岁的弟弟叫他小狗哥哥。", "description": "下文的所有参数均默认为整数。\n\n作为一位（7k7k 小游戏的）游戏开发者，你设计了如下（简陋的不如小狗哥哥幼儿园大班的毕业设计的）游戏，存在两个要素：\n1. 一个敌对生物，其血量为 $m$。\n2. 主角的武器，分为 $n$ 级，第 $i$ 级的伤害是 $i\\times p$。\n\n游戏的平衡性需要提前规划，所以你还有一个序列 $\\{a_n\\}$，其含义如下：\n\n- $a_i$ 表示敌对生物被第 $i$ 级武器恰好攻击 $a_i$ 下会死。\n\n可惜你忘记了 $p$ 具体是多少，所以你需要求出所有可能的 $p$ 的个数。\n\n如果可能有无数个 $p$，那么请输出 `xiaogougege`。\n\n", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行 $n$ 个正整数，表示序列 $\\{a_n\\}$。", "outputFormat": "一行一个整数，表示可能的 $p$ 的个数，或字符串 `xiaogougege`，其具体含义见题目描述。", "hint": "#### 【样例 1 解释】\n\n当武器为 $1$ 级时，分析可以发现 $p$ 要满足 $1 \\leq p < \\frac{3}{2}$。  \n当武器为 $2$ 级时，分析可以发现 $p$ 要满足 $\\frac{3}{4} \\leq p < \\frac{3}{2}$。  \n当武器为 $3$ 级时，分析可以发现 $p$ 要满足 $1 \\leq p$。 \n\n又 $p$ 是整数。综上，只有当 $p = 1$ 时满足题目所述条件。\n\n#### 【样例 2】\n\n见附加文件中的 `game/game2.in` 与 `game/game2.out`。\n\n该样例满足测试点 $13\\sim 20$ 的限制。\n\n#### 【数据范围与提示】\n\n对于所有测试数据，保证 $1\\leq n \\leq 10^5$，$1\\leq a_i,m\\leq 10^9$。\n\n每个测试点的具体限制见下表：\n\n|  测试点编号  |      $n\\leq$ | $m,a_i\\leq $ | 特殊性质 |\n| :-: | :-: |:-:|:-:|\n| $1\\sim 9$ | $10^5$ | $10^9$ | 数据纯随机 |\n|  $10 \\sim 12$  |       $3$       |$5$| 无 |\n| $13 \\sim 20$ | $10^5$ |$10^9$| 无 |\n\n你需要注意，上文纯随机数据的具体生成程序代码如下：\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nint n, m, w;\nmt19937 rng(chrono::steady_clock::now().time_since_epoch().count());\n\nint rand(int l, int r) {\n  assert(l <= r);\n  return uniform_int_distribution<>(l, r)(rng);\n} \n\nint main() {\n  scanf(\"%d%d%d\", &n, &m, &w);\n  printf(\"%d %d\\n\", n, m);\n  for (int i = 1; i <= n; i ++) printf(\"%d%c\", rand(1, w), \" \\n\"[i == n]);\n  return 0;\n}\n```\n\n通俗的说，就是对于给定的 $n,m,w(w\\le 10^9)$，数据生成器会随机生成 $n$ 个值域在 $[1,w]$ 内的数，作为 $\\{a_n\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTOI 2023] A. 小狗哥哥", "background": "luanmenglei 有一个辉煌的现在：他们班的女同学都叫他易酱。\n\n但谁能想到 luanmenglei 有一个悲伤的过去，他五岁的弟弟叫他小狗哥哥。", "description": "下文的所有参数均默认为整数。\n\n作为一位（7k7k 小游戏的）游戏开发者，你设计了如下（简陋的不如小狗哥哥幼儿园大班的毕业设计的）游戏，存在两个要素：\n1. 一个敌对生物，其血量为 $m$。\n2. 主角的武器，分为 $n$ 级，第 $i$ 级的伤害是 $i\\times p$。\n\n游戏的平衡性需要提前规划，所以你还有一个序列 $\\{a_n\\}$，其含义如下：\n\n- $a_i$ 表示敌对生物被第 $i$ 级武器恰好攻击 $a_i$ 下会死。\n\n可惜你忘记了 $p$ 具体是多少，所以你需要求出所有可能的 $p$ 的个数。\n\n如果可能有无数个 $p$，那么请输出 `xiaogougege`。\n\n", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行 $n$ 个正整数，表示序列 $\\{a_n\\}$。", "outputFormat": "一行一个整数，表示可能的 $p$ 的个数，或字符串 `xiaogougege`，其具体含义见题目描述。", "hint": "#### 【样例 1 解释】\n\n当武器为 $1$ 级时，分析可以发现 $p$ 要满足 $1 \\leq p < \\frac{3}{2}$。  \n当武器为 $2$ 级时，分析可以发现 $p$ 要满足 $\\frac{3}{4} \\leq p < \\frac{3}{2}$。  \n当武器为 $3$ 级时，分析可以发现 $p$ 要满足 $1 \\leq p$。 \n\n又 $p$ 是整数。综上，只有当 $p = 1$ 时满足题目所述条件。\n\n#### 【样例 2】\n\n见附加文件中的 `game/game2.in` 与 `game/game2.out`。\n\n该样例满足测试点 $13\\sim 20$ 的限制。\n\n#### 【数据范围与提示】\n\n对于所有测试数据，保证 $1\\leq n \\leq 10^5$，$1\\leq a_i,m\\leq 10^9$。\n\n每个测试点的具体限制见下表：\n\n|  测试点编号  |      $n\\leq$ | $m,a_i\\leq $ | 特殊性质 |\n| :-: | :-: |:-:|:-:|\n| $1\\sim 9$ | $10^5$ | $10^9$ | 数据纯随机 |\n|  $10 \\sim 12$  |       $3$       |$5$| 无 |\n| $13 \\sim 20$ | $10^5$ |$10^9$| 无 |\n\n你需要注意，上文纯随机数据的具体生成程序代码如下：\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nint n, m, w;\nmt19937 rng(chrono::steady_clock::now().time_since_epoch().count());\n\nint rand(int l, int r) {\n  assert(l <= r);\n  return uniform_int_distribution<>(l, r)(rng);\n} \n\nint main() {\n  scanf(\"%d%d%d\", &n, &m, &w);\n  printf(\"%d %d\\n\", n, m);\n  for (int i = 1; i <= n; i ++) printf(\"%d%c\", rand(1, w), \" \\n\"[i == n]);\n  return 0;\n}\n```\n\n通俗的说，就是对于给定的 $n,m,w(w\\le 10^9)$，数据生成器会随机生成 $n$ 个值域在 $[1,w]$ 内的数，作为 $\\{a_n\\}$。", "locale": "zh-CN"}}}
{"pid": "P8939", "type": "P", "difficulty": 3, "samples": [["5 3\n1 2 3 4 10\n1 4\n1 10\n2 9", "18\n4\n16"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "[DTOI 2023] B. 去年 11 月卵梦蕾简易钨丝", "background": "# 大样例已修复\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4il8fn7w.png)", "description": "给定序列 $\\{a_n\\}$，支持两种形如 `opt x` 操作：\n\n1. `1 x`：删除一个数 $x$，若序列中没有 $x$，则输出 $-1$ 并跳过本次操作，**若有多个 $x$，则仅删除一个**。\n\n2. `2 x`：向序列中插入一个数 $x$。\n\n**对于每个未被跳过的操作**，试求出 $a$ 的一个排列 $p$，最小化 $\\sum \\limits_{i=1}^{n} \\lvert p_{i+1}-p_i\\rvert$ 的值，即最小化 $\\lvert p_2-p_1\\rvert+\\lvert p_3-p_2\\rvert+\\dots+\\lvert p_{n+1}-p_n\\rvert$ 的值，其中 $p_{n+1}=p_1$。\n\n**保证任意时刻序列内至少有 $1$ 个数。**\n\n---\n$p$ 是 $a$ 的排列当且仅当对于 $\\forall x$，$\\sum [p_i=x]=\\sum [a_i=x]$。\n\n简而言之，$p$ 是 $a$ 经过某种方式重排后的结果。 \n\n例如 $\\{1,1,4,5,1,4\\}$ 是 $\\{1,5,4,1,4,1\\}$ 的一个排列，但是 $\\{1,5,4,1,4,7\\}$ 不是。", "inputFormat": "输入共 $q + 2$ 行。\n\n第 $1$ 行两个正整数 $n, q$。\n\n第 $2$ 行 $n$ 个非负整数 $a_1, a_2, \\dots, a_n$，代表初始的序列。\n\t\t\n第 $3 \\sim q + 2$ 行，每行两个数 $opt, x$ ， 代表一个询问。 ", "outputFormat": "输出有多行。\n\n每行输出 $1$ 个数，代表一个未被忽略的询问的答案，否则输出 `-1`。\n\t", "hint": "#### 【样例 1 解释】\n对于第一个询问，删除了序列中的数 $4$，则当前序列为$ 1, 2, 3, 10 $， 可以证明 $18$ 为当前序列的最小答案。\n\t\n对于第二个询问，删除了序列中的数 $10$，则当前序列为$ 1, 2, 3 $， 可以证明 $4$ 为当前序列的最小答案。\n\t\n对于第三个询问，向序列中添加了一个数 $9$，则当前序列为$ 1, 2, 3, 9 $， 可以证明 $16$ 为当前序列的最小答案。\n\n#### 【样例 2】\n\n见附加文件中的 `abs/abs2.in` 与 `abs/abs2.out`。\n\n该样例满足测试点 $1\\sim 4$ 的限制。\n\n#### 【样例 3】\n\n见附加文件中的 `abs/abs3.in` 与 `abs/abs3.out`。\n\n该样例满足测试点 $7\\sim 10$ 的限制。\n\n#### 【数据范围与提示】\n记 $w$ 为值域大小，对于所有测试数据，保证 $n,q\\leq 10^6$，$0\\leq w\\leq 10^6$。\n\t\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n,q\\leq$ | $w$ |\n| :----------: | :----------: | :----------: |\n| $1\\sim 4$ | $100$ | $10$ |\n| $5\\sim 6$ | $10^3$ | $10^3$ |\n| $7\\sim 10$ | $10^6$ | $10^6$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTOI 2023] B. 去年 11 月卵梦蕾简易钨丝", "background": "# 大样例已修复\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4il8fn7w.png)", "description": "给定序列 $\\{a_n\\}$，支持两种形如 `opt x` 操作：\n\n1. `1 x`：删除一个数 $x$，若序列中没有 $x$，则输出 $-1$ 并跳过本次操作，**若有多个 $x$，则仅删除一个**。\n\n2. `2 x`：向序列中插入一个数 $x$。\n\n**对于每个未被跳过的操作**，试求出 $a$ 的一个排列 $p$，最小化 $\\sum \\limits_{i=1}^{n} \\lvert p_{i+1}-p_i\\rvert$ 的值，即最小化 $\\lvert p_2-p_1\\rvert+\\lvert p_3-p_2\\rvert+\\dots+\\lvert p_{n+1}-p_n\\rvert$ 的值，其中 $p_{n+1}=p_1$。\n\n**保证任意时刻序列内至少有 $1$ 个数。**\n\n---\n$p$ 是 $a$ 的排列当且仅当对于 $\\forall x$，$\\sum [p_i=x]=\\sum [a_i=x]$。\n\n简而言之，$p$ 是 $a$ 经过某种方式重排后的结果。 \n\n例如 $\\{1,1,4,5,1,4\\}$ 是 $\\{1,5,4,1,4,1\\}$ 的一个排列，但是 $\\{1,5,4,1,4,7\\}$ 不是。", "inputFormat": "输入共 $q + 2$ 行。\n\n第 $1$ 行两个正整数 $n, q$。\n\n第 $2$ 行 $n$ 个非负整数 $a_1, a_2, \\dots, a_n$，代表初始的序列。\n\t\t\n第 $3 \\sim q + 2$ 行，每行两个数 $opt, x$ ， 代表一个询问。 ", "outputFormat": "输出有多行。\n\n每行输出 $1$ 个数，代表一个未被忽略的询问的答案，否则输出 `-1`。\n\t", "hint": "#### 【样例 1 解释】\n对于第一个询问，删除了序列中的数 $4$，则当前序列为$ 1, 2, 3, 10 $， 可以证明 $18$ 为当前序列的最小答案。\n\t\n对于第二个询问，删除了序列中的数 $10$，则当前序列为$ 1, 2, 3 $， 可以证明 $4$ 为当前序列的最小答案。\n\t\n对于第三个询问，向序列中添加了一个数 $9$，则当前序列为$ 1, 2, 3, 9 $， 可以证明 $16$ 为当前序列的最小答案。\n\n#### 【样例 2】\n\n见附加文件中的 `abs/abs2.in` 与 `abs/abs2.out`。\n\n该样例满足测试点 $1\\sim 4$ 的限制。\n\n#### 【样例 3】\n\n见附加文件中的 `abs/abs3.in` 与 `abs/abs3.out`。\n\n该样例满足测试点 $7\\sim 10$ 的限制。\n\n#### 【数据范围与提示】\n记 $w$ 为值域大小，对于所有测试数据，保证 $n,q\\leq 10^6$，$0\\leq w\\leq 10^6$。\n\t\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n,q\\leq$ | $w$ |\n| :----------: | :----------: | :----------: |\n| $1\\sim 4$ | $100$ | $10$ |\n| $5\\sim 6$ | $10^3$ | $10^3$ |\n| $7\\sim 10$ | $10^6$ | $10^6$ |\n", "locale": "zh-CN"}}}
{"pid": "P8940", "type": "P", "difficulty": 5, "samples": [["10 3\n2 2 2 1 2 2 2 1 2 2 \n", "13"], ["10 0\n2 2 2 1 2 2 2 1 2 3 \n", "9"], ["11 0\n2 2 2 1 2 2 2 1 1 3 3 ", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "[DTOI 2023] C. 不见故人", "background": "虽然 luanmenglei 已经是成熟的高中生了，但每次提起 luanmenglei 八年级的女朋友时，luanmenglei 都会沉浸在美好的回忆中，不可自拔。", "description": "给定 $n, k$ 和序列 $\\{a_n\\}$，你同时有一个临时变量 $x$，你可以进行以下操作若干次（也可以是 $0$ 次），一次操作的流程是：\n1. 选定一个区间 $[l,r]$，$\\forall i\\in[l,r]$，$x\\leftarrow \\gcd(a_l,a_{l+1},\\cdots,a_r)$。\n2. $\\forall i\\in[l,r]$，$a_i\\leftarrow x$。\n\n简而言之，你每次可以选定一个区间并将其中每个数变成这个区间的 $\\gcd$。\n\n一次操作的代价是 $r-l+1+k$，现在你希望把这个序列的每个数都变成相等的，求最小代价和。\n\n----\n如果您不了解 $\\gcd$ 或者多元 $\\gcd$ 的含义，可以参照如下定义：\n- $\\gcd(a_1,a_2,\\dots, a_k)$ 表示 $a_1,a_2,\\dots, a_k$ 的最大公约数，即最大的能同时整除 $a_1,a_2,\\dots, a_k$ 的正整数。\n", "inputFormat": "第一行两个非负整数 $n,k$。\n\n第二行 $n$ 个数，表示 $\\{a_n\\}$。", "outputFormat": "一行一个数，表示答案。", "hint": "#### 【样例 1 解释】\n\n操作一次，选择区间 $[1,10]$。\n\n#### 【样例 4】\n\n见附加文件中的 `old/old4.in` 与 `old/old4.out`。\n\n该样例满足测试点 $9\\sim 12$ 的限制。\n\n#### 【样例 5】\n\n见附加文件中的 `old/old5.in` 与 `old/old5.out`。\n\n该样例满足测试点 $13\\sim 16$ 的限制。\n\n#### 【数据范围与提示】\n\n对于所有数据，保证 $1\\leq n\\leq 4\\times 10^6$，$0\\leq k\\leq 10^9$，$1\\leq a_i\\leq 10^9$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n\\leq$ | $k,a_i\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^6$ | $10^9$ | 所有数都相等 |\n| $2\\sim 4$ | $4$ | $10^9$ | 无 |\n| $5\\sim 8$ | $100$ | $10^9$ | 无 |\n| $9\\sim 12$ | $1000$ | $10^9$ | 无 |\n| $13\\sim 16$ | $10^6$ | $10^9$ | 无 |\n| $17\\sim 20$ | $4\\times 10^6$ | $10^9$ | 无 |\n\n本题的读入量较大，请选择较快的读入方式，下面提供一种读入策略：\n\n请在代码的开头加入此行：`std::ios::sync_with_stdio(false);std::cin.tie(0);`。\n\n请注意，加入本行后 `cin/cout` 的效率将大幅提高，保证其能在 `250 ms` 内读入所有数据，**但使用后你仅能使用 `cin/cout` 流读入数据。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTOI 2023] C. 不见故人", "background": "虽然 luanmenglei 已经是成熟的高中生了，但每次提起 luanmenglei 八年级的女朋友时，luanmenglei 都会沉浸在美好的回忆中，不可自拔。", "description": "给定 $n, k$ 和序列 $\\{a_n\\}$，你同时有一个临时变量 $x$，你可以进行以下操作若干次（也可以是 $0$ 次），一次操作的流程是：\n1. 选定一个区间 $[l,r]$，$\\forall i\\in[l,r]$，$x\\leftarrow \\gcd(a_l,a_{l+1},\\cdots,a_r)$。\n2. $\\forall i\\in[l,r]$，$a_i\\leftarrow x$。\n\n简而言之，你每次可以选定一个区间并将其中每个数变成这个区间的 $\\gcd$。\n\n一次操作的代价是 $r-l+1+k$，现在你希望把这个序列的每个数都变成相等的，求最小代价和。\n\n----\n如果您不了解 $\\gcd$ 或者多元 $\\gcd$ 的含义，可以参照如下定义：\n- $\\gcd(a_1,a_2,\\dots, a_k)$ 表示 $a_1,a_2,\\dots, a_k$ 的最大公约数，即最大的能同时整除 $a_1,a_2,\\dots, a_k$ 的正整数。\n", "inputFormat": "第一行两个非负整数 $n,k$。\n\n第二行 $n$ 个数，表示 $\\{a_n\\}$。", "outputFormat": "一行一个数，表示答案。", "hint": "#### 【样例 1 解释】\n\n操作一次，选择区间 $[1,10]$。\n\n#### 【样例 4】\n\n见附加文件中的 `old/old4.in` 与 `old/old4.out`。\n\n该样例满足测试点 $9\\sim 12$ 的限制。\n\n#### 【样例 5】\n\n见附加文件中的 `old/old5.in` 与 `old/old5.out`。\n\n该样例满足测试点 $13\\sim 16$ 的限制。\n\n#### 【数据范围与提示】\n\n对于所有数据，保证 $1\\leq n\\leq 4\\times 10^6$，$0\\leq k\\leq 10^9$，$1\\leq a_i\\leq 10^9$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n\\leq$ | $k,a_i\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^6$ | $10^9$ | 所有数都相等 |\n| $2\\sim 4$ | $4$ | $10^9$ | 无 |\n| $5\\sim 8$ | $100$ | $10^9$ | 无 |\n| $9\\sim 12$ | $1000$ | $10^9$ | 无 |\n| $13\\sim 16$ | $10^6$ | $10^9$ | 无 |\n| $17\\sim 20$ | $4\\times 10^6$ | $10^9$ | 无 |\n\n本题的读入量较大，请选择较快的读入方式，下面提供一种读入策略：\n\n请在代码的开头加入此行：`std::ios::sync_with_stdio(false);std::cin.tie(0);`。\n\n请注意，加入本行后 `cin/cout` 的效率将大幅提高，保证其能在 `250 ms` 内读入所有数据，**但使用后你仅能使用 `cin/cout` 流读入数据。**", "locale": "zh-CN"}}}
{"pid": "P8941", "type": "P", "difficulty": 5, "samples": [["5 1 2", "8"], ["6 1 3", "12"], ["7 1 4", "48"], ["8 3 5", "6"], ["9 2 5", "72"], ["114 3 3", "106624"], ["514 3 4", "296097032"], ["1000 7 5", "569405945"], ["1000 7 1", "1000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "[DTOI 2023] D. Goodbye 2022", "background": "> 我用烟花宣告，用挥手告别，用鞠躬感谢，过去的都已经过去，接下来的路我要悠闲地走，愉悦地走，脚步如同时间不会停止，下一年，我们还会再会。\n", "description": "这次的题目背景和 luanmenglei 没有一点关系。\n\n给定 $n,k,p$，求有多少有序 $p$ 元组 $(a_1,a_2,\\cdots,a_p)$ 满足\n\n- $\\forall i \\in [1,p]$，$a_i\\in [1,n]$。\n\n- $\\forall i\\in [1,p)$，$\\operatorname{popcount}(a_i\\oplus a_{i+1})=k$。\n\n- $\\forall i,j\\in[1,p],i\\neq j$，$a_i\\neq a_j$。\n\n答案对 $998244353$ 取模。\n\n---\n\n- 其中 $\\operatorname{popcount}(x)$ 表示 $x$ 在二进制表达下 $1$ 的个数。\n- $\\oplus$ 表示按位异或操作。\n- 两个有序 $p$ 元组 $(a_1,a_2,\\dots,a_p)$，$(b_1,b_2,\\dots,b_p)$ 不同当且仅当存在 $i\\in[1,p]$ 使得 $a_i\\neq b_i$。\n", "inputFormat": "一行三个正整数 $n,k,p$。", "outputFormat": "一行一个数，表示答案。", "hint": "对于所有测试数据，保证 $1\\leq n \\leq 1000$，$1\\leq k\\leq \\lfloor \\log_2 n\\rfloor$，$1 \\leq p \\leq 5$。\n\n每个测试点的具体限制见下表：\n\n|  测试点编号  |      $n\\leq$ | $p =$ |\n| :-: | :-: |:-:|\n| $1$ | $1000$ | $1$ |\n|  $2 \\sim 3$  |       $1000$       |$2$|\n| $4 \\sim 5$ | $300$ |$3$|\n|  $6 \\sim 12$  |      $1000$      |$3$|\n| $13 \\sim 15$ | $1000$ |$4$|\n| $16 \\sim 21$ | $300$ |$5$|\n| $22 \\sim 25$ | $1000$ |$5$|\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTOI 2023] D. Goodbye 2022", "background": "> 我用烟花宣告，用挥手告别，用鞠躬感谢，过去的都已经过去，接下来的路我要悠闲地走，愉悦地走，脚步如同时间不会停止，下一年，我们还会再会。\n", "description": "这次的题目背景和 luanmenglei 没有一点关系。\n\n给定 $n,k,p$，求有多少有序 $p$ 元组 $(a_1,a_2,\\cdots,a_p)$ 满足\n\n- $\\forall i \\in [1,p]$，$a_i\\in [1,n]$。\n\n- $\\forall i\\in [1,p)$，$\\operatorname{popcount}(a_i\\oplus a_{i+1})=k$。\n\n- $\\forall i,j\\in[1,p],i\\neq j$，$a_i\\neq a_j$。\n\n答案对 $998244353$ 取模。\n\n---\n\n- 其中 $\\operatorname{popcount}(x)$ 表示 $x$ 在二进制表达下 $1$ 的个数。\n- $\\oplus$ 表示按位异或操作。\n- 两个有序 $p$ 元组 $(a_1,a_2,\\dots,a_p)$，$(b_1,b_2,\\dots,b_p)$ 不同当且仅当存在 $i\\in[1,p]$ 使得 $a_i\\neq b_i$。\n", "inputFormat": "一行三个正整数 $n,k,p$。", "outputFormat": "一行一个数，表示答案。", "hint": "对于所有测试数据，保证 $1\\leq n \\leq 1000$，$1\\leq k\\leq \\lfloor \\log_2 n\\rfloor$，$1 \\leq p \\leq 5$。\n\n每个测试点的具体限制见下表：\n\n|  测试点编号  |      $n\\leq$ | $p =$ |\n| :-: | :-: |:-:|\n| $1$ | $1000$ | $1$ |\n|  $2 \\sim 3$  |       $1000$       |$2$|\n| $4 \\sim 5$ | $300$ |$3$|\n|  $6 \\sim 12$  |      $1000$      |$3$|\n| $13 \\sim 15$ | $1000$ |$4$|\n| $16 \\sim 21$ | $300$ |$5$|\n| $22 \\sim 25$ | $1000$ |$5$|\n", "locale": "zh-CN"}}}
{"pid": "P8942", "type": "P", "difficulty": 2, "samples": [["2\n4 20\n1919 114514\n", "Yes\n1 6 8 16\nNo\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2023", "洛谷原创", "Special Judge", "O2优化", "构造", "Ad-hoc"], "title": "Digital Fortress", "background": "布林克霍夫大声喊道：“这当然是密码！这不是密码，还能是什么？还有什么原因能让友加送掉这枚戒指？到底是谁在戒指上刻一大串杂乱无章的字母？”\n\n方丹愤怒地等了布林克霍夫一眼，使他安静了下来。\n\n“啊……伙计们？”贝克插了一句话，似乎很不情愿卷进来一样，“你们一直说这些是杂乱无章的字母。我想我应该让你们知道……这枚戒指上刻的字母并不是杂乱无章。如果你近距离看一下，就会明白，实际上，这些字母……这个……这个是拉丁文。”\n\n指挥台上的所有人都看向了那枚戒指。上面写道：\n\n> Quis custodiet ipsos custiodies.  \n谁来监视这些监视者……", "description": "致命的变异串已经穿过了 X-11 过滤器，深入了国安局数据库。苏珊与贝克需要即时破解出密码，以关闭蠕虫病毒。\n\n在蠕虫的文件中，他们找到了密码的一个特点：\n\n- 共有 $n$ 位，每个数都在 $[1,m]$ 之间，并且单调不减。\n- 如算出前缀异或和，那么前缀异或和也单调不减。\n- 如算出后缀异或和，那么后缀异或和仍然单调不减。\n\n除此之外，他们也找到了 $n,m$ 的值。现在，他们需要构造出一组密码，以满足所有特征。\n***\n\n#### 【形式化题意】\n\n求是否存在长度为 $n$，所有元素都在 $[1,m]$ 范围内的单调不减正整数序列 $a$，满足：\n\n- $\\forall1<i\\le n,a_1\\ \\text{xor}\\ a_2\\ \\text{xor}\\ \\cdots\\ \\text{xor}\\ a_{i-1}\\le a_1\\ \\text{xor}\\ a_2\\ \\text{xor}\\ \\cdots\\ \\text{xor}\\ a_{i}$\n- $\\forall1\\le i<n,a_n\\ \\text{xor}\\ a_{n-1}\\ \\text{xor}\\ \\cdots\\ \\text{xor}\\ a_{i+1}\\le a_n\\ \\text{xor}\\ a_{n-1}\\ \\text{xor}\\ \\cdots\\ \\text{xor}\\ a_{i}$\n\n如存在，输出一组合法解。多组数据。", "inputFormat": "第一行一个正整数 $t$，表示数据组数。\n\n对于每组数据，输入两个正整数 $n,m$。", "outputFormat": "对于每组数据，如不存在满足要求的密码，输出 `No`。否则，输出 `Yes`，并在下一行输出一种合法方案。", "hint": "#### 【样例解释】\n\n对于第一组数据，密码的前缀异或和为 $\\{1,7,15,31\\}$，后缀异或和为 $\\{16,24,30,31\\}$，均为递增序列，满足题意。\n\n对于第二组数据，不存在任何合法方案。\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n|$\\text{Subtask}$|分值|$n\\le$|$m\\le$|\n|:-:|:-:|:-:|:-:|\n|$0$|$10$|$5$|$200$|\n|$1$|$30$|$20$|$10^6$|\n|$2$|$60$|$10^5$|$2^{63}-1$|\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$1\\le m\\le2^{63}-1$，$1\\le t\\le50$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Digital Fortress", "background": "布林克霍夫大声喊道：“这当然是密码！这不是密码，还能是什么？还有什么原因能让友加送掉这枚戒指？到底是谁在戒指上刻一大串杂乱无章的字母？”\n\n方丹愤怒地等了布林克霍夫一眼，使他安静了下来。\n\n“啊……伙计们？”贝克插了一句话，似乎很不情愿卷进来一样，“你们一直说这些是杂乱无章的字母。我想我应该让你们知道……这枚戒指上刻的字母并不是杂乱无章。如果你近距离看一下，就会明白，实际上，这些字母……这个……这个是拉丁文。”\n\n指挥台上的所有人都看向了那枚戒指。上面写道：\n\n> Quis custodiet ipsos custiodies.  \n谁来监视这些监视者……", "description": "致命的变异串已经穿过了 X-11 过滤器，深入了国安局数据库。苏珊与贝克需要即时破解出密码，以关闭蠕虫病毒。\n\n在蠕虫的文件中，他们找到了密码的一个特点：\n\n- 共有 $n$ 位，每个数都在 $[1,m]$ 之间，并且单调不减。\n- 如算出前缀异或和，那么前缀异或和也单调不减。\n- 如算出后缀异或和，那么后缀异或和仍然单调不减。\n\n除此之外，他们也找到了 $n,m$ 的值。现在，他们需要构造出一组密码，以满足所有特征。\n***\n\n#### 【形式化题意】\n\n求是否存在长度为 $n$，所有元素都在 $[1,m]$ 范围内的单调不减正整数序列 $a$，满足：\n\n- $\\forall1<i\\le n,a_1\\ \\text{xor}\\ a_2\\ \\text{xor}\\ \\cdots\\ \\text{xor}\\ a_{i-1}\\le a_1\\ \\text{xor}\\ a_2\\ \\text{xor}\\ \\cdots\\ \\text{xor}\\ a_{i}$\n- $\\forall1\\le i<n,a_n\\ \\text{xor}\\ a_{n-1}\\ \\text{xor}\\ \\cdots\\ \\text{xor}\\ a_{i+1}\\le a_n\\ \\text{xor}\\ a_{n-1}\\ \\text{xor}\\ \\cdots\\ \\text{xor}\\ a_{i}$\n\n如存在，输出一组合法解。多组数据。", "inputFormat": "第一行一个正整数 $t$，表示数据组数。\n\n对于每组数据，输入两个正整数 $n,m$。", "outputFormat": "对于每组数据，如不存在满足要求的密码，输出 `No`。否则，输出 `Yes`，并在下一行输出一种合法方案。", "hint": "#### 【样例解释】\n\n对于第一组数据，密码的前缀异或和为 $\\{1,7,15,31\\}$，后缀异或和为 $\\{16,24,30,31\\}$，均为递增序列，满足题意。\n\n对于第二组数据，不存在任何合法方案。\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n|$\\text{Subtask}$|分值|$n\\le$|$m\\le$|\n|:-:|:-:|:-:|:-:|\n|$0$|$10$|$5$|$200$|\n|$1$|$30$|$20$|$10^6$|\n|$2$|$60$|$10^5$|$2^{63}-1$|\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$1\\le m\\le2^{63}-1$，$1\\le t\\le50$。", "locale": "zh-CN"}}}
{"pid": "P8943", "type": "P", "difficulty": 3, "samples": [["8 3\n2 1\n3 1 \n4 2 \n5 3\n6 2\n7 5\n8 4\n5 6\n7 8\n8 6\n3 6", "Survive\nDeception\nSurvive\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2023", "洛谷原创", "O2优化", "最短路", "基环树"], "title": "Deception Point", "background": "“防空火网已启用。”三角洲二号喊道，他坐在“基奥瓦”武装直升机舱门边的武器控制椅里，竖起了大拇指，“火力网\n、调制噪声、掩护脉冲全都激活并锁定。”\n\n三角洲一号心领神会，驾驶着飞机猛地向右一个侧弯飞机又驶上了一条前往“戈雅”的直线路径。这一招能躲过“戈雅”的雷达监控。\n\n“锡箔包确定！”三角洲二号喊道。\n\n> 绝对的孤立，\n\n三角洲一号想。\n\n> 他们毫无抵抗力。\n\n他们的目标幸运且狡猾地从米尔恩冰架上逃脱了，但这回他们不会再得逞了。雷切尔 · 塞克斯顿和迈克尔 · 托兰选择弃岸上船，真是糟糕的选择。不过，这将是他们所做的最后一个坏决定了。", "description": "雷切尔与迈克尔被困在了“戈雅”号上，而三角洲二号正在顺着雷达追杀二人。幸运的是，雷切尔也有一副雷达，因此双方都能知道对方的位置。\n\n船舱内部共有 $n$ 个舱室，其中有 $n$ 条走廊连接这些舱室。$n$ 个舱室是互相连通的。由于船上空间拥挤，船舱内不会出现小于等于四条走廊组成的环。每过一分钟，雷切尔与三角洲二号都会同时从一个舱室跑到另一个舱室。\n\n如果雷切尔在舱室内或者过道上碰到了三角洲，那么就意味着大限将至。雷切尔总共有 $q$ 个问题：当她在舱室 $x$，且三角洲二号在舱室 $y$ 时，她是否可以存活下来？\n\n---\n\n#### **【形式化题意】**\n\n给定一张 $n$ 个点 $n$ 条边的无向连通图，图内不存在四元（及以下）环。$q$ 次询问 $x,y$，分别在图上 $x,y$ 点上放上棋子 $\\rm A, B$。\n\n每次两人同时操作棋子沿图边移动一步，若两棋子同时走到了同一个点上或者同时走过了相同的边，则 $\\rm B$ 胜利。如果在 $10^{10^{9961}}$ 次操作后 $\\rm B$ 还未胜利，则 $\\rm A$ 胜利。\n\n$\\rm A,B$ 都是绝顶聪明的，他们不会做出对自己不利的决策。请你求出每次游戏的游戏结果。若 $\\rm A$ 获胜，输出 `Survive`；否则输出 `Deception`。\n\n**若对题意有疑问，请移步样例解释与数据范围部分。**", "inputFormat": "第一行两个整数 $n,q$。  \n接下来 $n$ 行，每行两个整数 $u_i,v_i$，表示舱室 $u_i$ 与 $v_i$ 之间有一条过道。\n之后 $q$ 行，每行两个整数 $x_i,y_i$，表示一次询问。", "outputFormat": "共 $q$ 行。对于每个询问，如果雷切尔可以存活，那么输出 `Survive`，否则输出 `Deception`。", "hint": "#### 【样例解释】\n\n船舱结构图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tlsqnsia.png)\n\n在第二组询问中，三角洲可以先走一步到达结点 $2$，此时雷切尔到达结点 $4$。随后可以证明，不存在一种方案使得雷切尔不碰到三角洲。\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n| $\\text{Subtask}$ | 分值 | $n\\le$ | $q\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $5$ | $2\\times10^5$ | $1$ | 无 |\n| $1$ | $5$ | $10$ | $2\\times10^5$ | 无 |\n| $2$ | $5$ | $2\\times 10^5$ | $2\\times10^5$ | $\\forall 1\\le i\\le n, u_i=i,v_i=(i\\bmod n) + 1$ |\n| $3$ | $15$ | $200$ | $2\\times 10^5$ | 无 |\n| $4$ | $20$ | $2\\times 10^3$ | $2\\times 10^5$ | 无 |\n| $5$ | $50$ | $2\\times 10^5$ | $2\\times 10^5$ | 无 |\n\n对于 $100\\%$ 的数据，$3\\le n\\le 2\\times10^5$，$1\\le q\\le2\\times10^5$，$u_i\\neq v_i$，$x_i\\neq y_i$。不存在四（及以下）元环。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Deception Point", "background": "“防空火网已启用。”三角洲二号喊道，他坐在“基奥瓦”武装直升机舱门边的武器控制椅里，竖起了大拇指，“火力网\n、调制噪声、掩护脉冲全都激活并锁定。”\n\n三角洲一号心领神会，驾驶着飞机猛地向右一个侧弯飞机又驶上了一条前往“戈雅”的直线路径。这一招能躲过“戈雅”的雷达监控。\n\n“锡箔包确定！”三角洲二号喊道。\n\n> 绝对的孤立，\n\n三角洲一号想。\n\n> 他们毫无抵抗力。\n\n他们的目标幸运且狡猾地从米尔恩冰架上逃脱了，但这回他们不会再得逞了。雷切尔 · 塞克斯顿和迈克尔 · 托兰选择弃岸上船，真是糟糕的选择。不过，这将是他们所做的最后一个坏决定了。", "description": "雷切尔与迈克尔被困在了“戈雅”号上，而三角洲二号正在顺着雷达追杀二人。幸运的是，雷切尔也有一副雷达，因此双方都能知道对方的位置。\n\n船舱内部共有 $n$ 个舱室，其中有 $n$ 条走廊连接这些舱室。$n$ 个舱室是互相连通的。由于船上空间拥挤，船舱内不会出现小于等于四条走廊组成的环。每过一分钟，雷切尔与三角洲二号都会同时从一个舱室跑到另一个舱室。\n\n如果雷切尔在舱室内或者过道上碰到了三角洲，那么就意味着大限将至。雷切尔总共有 $q$ 个问题：当她在舱室 $x$，且三角洲二号在舱室 $y$ 时，她是否可以存活下来？\n\n---\n\n#### **【形式化题意】**\n\n给定一张 $n$ 个点 $n$ 条边的无向连通图，图内不存在四元（及以下）环。$q$ 次询问 $x,y$，分别在图上 $x,y$ 点上放上棋子 $\\rm A, B$。\n\n每次两人同时操作棋子沿图边移动一步，若两棋子同时走到了同一个点上或者同时走过了相同的边，则 $\\rm B$ 胜利。如果在 $10^{10^{9961}}$ 次操作后 $\\rm B$ 还未胜利，则 $\\rm A$ 胜利。\n\n$\\rm A,B$ 都是绝顶聪明的，他们不会做出对自己不利的决策。请你求出每次游戏的游戏结果。若 $\\rm A$ 获胜，输出 `Survive`；否则输出 `Deception`。\n\n**若对题意有疑问，请移步样例解释与数据范围部分。**", "inputFormat": "第一行两个整数 $n,q$。  \n接下来 $n$ 行，每行两个整数 $u_i,v_i$，表示舱室 $u_i$ 与 $v_i$ 之间有一条过道。\n之后 $q$ 行，每行两个整数 $x_i,y_i$，表示一次询问。", "outputFormat": "共 $q$ 行。对于每个询问，如果雷切尔可以存活，那么输出 `Survive`，否则输出 `Deception`。", "hint": "#### 【样例解释】\n\n船舱结构图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tlsqnsia.png)\n\n在第二组询问中，三角洲可以先走一步到达结点 $2$，此时雷切尔到达结点 $4$。随后可以证明，不存在一种方案使得雷切尔不碰到三角洲。\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n| $\\text{Subtask}$ | 分值 | $n\\le$ | $q\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $5$ | $2\\times10^5$ | $1$ | 无 |\n| $1$ | $5$ | $10$ | $2\\times10^5$ | 无 |\n| $2$ | $5$ | $2\\times 10^5$ | $2\\times10^5$ | $\\forall 1\\le i\\le n, u_i=i,v_i=(i\\bmod n) + 1$ |\n| $3$ | $15$ | $200$ | $2\\times 10^5$ | 无 |\n| $4$ | $20$ | $2\\times 10^3$ | $2\\times 10^5$ | 无 |\n| $5$ | $50$ | $2\\times 10^5$ | $2\\times 10^5$ | 无 |\n\n对于 $100\\%$ 的数据，$3\\le n\\le 2\\times10^5$，$1\\le q\\le2\\times10^5$，$u_i\\neq v_i$，$x_i\\neq y_i$。不存在四（及以下）元环。", "locale": "zh-CN"}}}
{"pid": "P8944", "type": "P", "difficulty": 4, "samples": [["2 9 998244353\n", "2684354563\n"], ["7 3 123456789\n", "24313281849\n"], ["10 9000000000000000000 1000000000000000000\n", "20026214895\n"], ["4 0 123456789\n", "12357556560\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "数学", "2023", "洛谷原创", "O2优化", "矩阵加速"], "title": "The Da Vinci Code", "background": "> 圣杯在罗斯琳教堂下静待。  \n> 大师杰作掩映中相拥入眠。  \n> 剑刃圣杯守护着她的门宅。  \n> 星空下她可安息无碍。\n\n好的题目不需要花里胡哨的背景。", "description": "给定一个长度为 $n$ 的数列 $a$，初始情况下 $a_i=i$。\n\n另有一个取值在 $[1,n]$ 内的随机的整数 $x$，它取 $i$ 的概率为 $b_i$。\n\n接下来进行 $k$ 次操作，每次**均匀随机**地选两个 $[1,n]$ 中的整数 $i,j$（允许 $i=j$），交换 $a_i,a_j$ 的值（如果 $i=j$ 则什么也不干）。问最后 $x$ 在位置 $i$ 上的概率，你需要对所有 $1\\leq i\\leq n$ 求出答案。你需要输出答案模 $3221225473$ 的值。\n\n我们定义 $x$ 在位置 $i$ 上指 $a_i=x$。", "inputFormat": "一行三个整数 $n,k,seed$。接下来使用如下代码生成 $b_i$：\n\n```cpp\n#include <cstdio>\n\ntypedef unsigned long long ull;\ntypedef unsigned int uint;\ntypedef long long ll;\n\nconst uint mod = 3221225473u;\nconst int N = 20000010;\n\null seed;\n\null getnext() {\n\tseed ^= seed << 13;\n\tseed ^= seed >> 17;\n\tseed ^= seed << 5;\n\treturn seed;\n}\n\nuint rd(uint l, uint r) {\n\treturn getnext() % (r - l + 1) + l;\n}\n\nint n;\null k;\nuint b[N];\n\nint main() {\n\tscanf(\"%d%llu%llu\", &n, &k, &seed);\n\tull sum = 0;\n\tfor (int i = 1; i < n; ++ i) b[i] = rd(2u, mod - 1), (sum += b[i]) %= mod;\n\tb[n] = mod + 1 - sum;\n}\n```\n", "outputFormat": "设 $ans_i$ 表示 $x$ 在位置 $i$ 上的概率模 $3221225473$，则输出 $ans_i\\times i$ 的异或和。", "hint": "#### 【样例解释】\n\n对于样例 #1：\n\n$b$ 数组为 $\\{2134949164 ,1086276310\\}$，操作 $9$ 次后 $x$ 在两个位置的概率均为 $\\dfrac12$。\n\n对于样例 #2：\n\n$b$ 数组为 $\\{1863763622,1043615898,1055155266,1556793106,1763540175,1239801170,1141007183\\}$。\n\n#### 【数据范围】\n对于 $100\\%$ 的数据：\n\n* $2\\leq n\\leq2\\times10^7$，$0\\leq k,seed<2^{64}$。\n* $1<b_i<3221225473$，$\\sum\\limits_{i=1}^n b_i\\equiv 1\\pmod{3221225473}$。\n* 数据保证 $1<b_n<3221225473$ 且 $3221225473$ 是质数。\n\n---\n\n**本题采用捆绑测试**。\n\n| $\\text{Subtask}$ |$n\\le$|$k\\le$|分值|\n|:-:|:-:|:-:|:-:|\n|$0$|$2$|$2^{64}-1$|$1$|\n|$1$|$5$|$5$|$4$|\n|$2$|$200$|$200$|$6$|\n|$3$|$200$|$2^{64}-1$|$9$|\n|$4$|$2000$|$2000$|$7$|\n|$5$|$2\\times10^7$|$1$|$5$|\n|$6$|$10^6$|$10^6$|$8$|\n|$7$|$2\\times10^7$|$10^7$|$10$|\n|$8$|$10^6$|$2^{64}-1$|$15$|\n|$9$|$2\\times10^7$|$2^{64}-1$|$35$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "The Da Vinci Code", "background": "> 圣杯在罗斯琳教堂下静待。  \n> 大师杰作掩映中相拥入眠。  \n> 剑刃圣杯守护着她的门宅。  \n> 星空下她可安息无碍。\n\n好的题目不需要花里胡哨的背景。", "description": "给定一个长度为 $n$ 的数列 $a$，初始情况下 $a_i=i$。\n\n另有一个取值在 $[1,n]$ 内的随机的整数 $x$，它取 $i$ 的概率为 $b_i$。\n\n接下来进行 $k$ 次操作，每次**均匀随机**地选两个 $[1,n]$ 中的整数 $i,j$（允许 $i=j$），交换 $a_i,a_j$ 的值（如果 $i=j$ 则什么也不干）。问最后 $x$ 在位置 $i$ 上的概率，你需要对所有 $1\\leq i\\leq n$ 求出答案。你需要输出答案模 $3221225473$ 的值。\n\n我们定义 $x$ 在位置 $i$ 上指 $a_i=x$。", "inputFormat": "一行三个整数 $n,k,seed$。接下来使用如下代码生成 $b_i$：\n\n```cpp\n#include <cstdio>\n\ntypedef unsigned long long ull;\ntypedef unsigned int uint;\ntypedef long long ll;\n\nconst uint mod = 3221225473u;\nconst int N = 20000010;\n\null seed;\n\null getnext() {\n\tseed ^= seed << 13;\n\tseed ^= seed >> 17;\n\tseed ^= seed << 5;\n\treturn seed;\n}\n\nuint rd(uint l, uint r) {\n\treturn getnext() % (r - l + 1) + l;\n}\n\nint n;\null k;\nuint b[N];\n\nint main() {\n\tscanf(\"%d%llu%llu\", &n, &k, &seed);\n\tull sum = 0;\n\tfor (int i = 1; i < n; ++ i) b[i] = rd(2u, mod - 1), (sum += b[i]) %= mod;\n\tb[n] = mod + 1 - sum;\n}\n```\n", "outputFormat": "设 $ans_i$ 表示 $x$ 在位置 $i$ 上的概率模 $3221225473$，则输出 $ans_i\\times i$ 的异或和。", "hint": "#### 【样例解释】\n\n对于样例 #1：\n\n$b$ 数组为 $\\{2134949164 ,1086276310\\}$，操作 $9$ 次后 $x$ 在两个位置的概率均为 $\\dfrac12$。\n\n对于样例 #2：\n\n$b$ 数组为 $\\{1863763622,1043615898,1055155266,1556793106,1763540175,1239801170,1141007183\\}$。\n\n#### 【数据范围】\n对于 $100\\%$ 的数据：\n\n* $2\\leq n\\leq2\\times10^7$，$0\\leq k,seed<2^{64}$。\n* $1<b_i<3221225473$，$\\sum\\limits_{i=1}^n b_i\\equiv 1\\pmod{3221225473}$。\n* 数据保证 $1<b_n<3221225473$ 且 $3221225473$ 是质数。\n\n---\n\n**本题采用捆绑测试**。\n\n| $\\text{Subtask}$ |$n\\le$|$k\\le$|分值|\n|:-:|:-:|:-:|:-:|\n|$0$|$2$|$2^{64}-1$|$1$|\n|$1$|$5$|$5$|$4$|\n|$2$|$200$|$200$|$6$|\n|$3$|$200$|$2^{64}-1$|$9$|\n|$4$|$2000$|$2000$|$7$|\n|$5$|$2\\times10^7$|$1$|$5$|\n|$6$|$10^6$|$10^6$|$8$|\n|$7$|$2\\times10^7$|$10^7$|$10$|\n|$8$|$10^6$|$2^{64}-1$|$15$|\n|$9$|$2\\times10^7$|$2^{64}-1$|$35$|", "locale": "zh-CN"}}}
{"pid": "P8945", "type": "P", "difficulty": 5, "samples": [["5 2\n1 0 -1 0 0", "2"]], "limits": {"time": [777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777, 777], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "单调队列", "2023", "洛谷原创", "O2优化", "前缀和"], "title": "Inferno", "background": "> 我是幽灵。  \n> 穿过悲惨之城，我落荒而逃。  \n> 穿过永世凄苦，我远走高飞。\n\n沿着阿尔诺河的堤岸，我夺路狂奔，气喘吁吁……左转上了卡斯特拉尼大街，一直朝北而行，始终隐蔽在乌菲兹美术馆的阴影之下。\n\n但他们还是穷追不舍。\n\n他们的脚步声越来越响，这些追捕者冷酷无情，不达目的绝不善罢甘休。\n\n这么多年来，他们一直尾随着我。他们锲而不舍，是的我只能活在地下……被迫呆在炼狱之中……就像冥府的恶魔，时刻忍受地狱的煎熬。\n\n> 我是幽灵。\n\n如今浮生尘世，我举目北望，却看不到通往救赎的捷径——那高耸的亚平宁山脉挡住了黎明的第一缕阳光。", "description": "罗伯特 · 兰登在洗下但丁死亡面具上的丙烯石膏后，在背面发现了一行字：\n\n> 哦，有着稳固智慧的人啊，  \n> 请注意这里的含义  \n> 就藏在晦涩的序列面纱之下。\n\n下面有一行由 $1,-1$ 组成的长度为 $n$ 的序列。面具经受了岁月的侵蚀，序列中有一些数已经模糊不清。幸运的是，面具下面有给出两条线索：\n\n> 你只得往空缺的位置填 $k$ 个 $1$，其余填入 $-1$，需要最大化这个序列的最大子段和。\n\n > > **一个序列的最大子段和定义为，其在一段连续长度的区间内的最大和。形式化地，一个序列 $a$ 的最大子段和即为 $\\max\\limits_{l=1}^n\\max\\limits_{r=l}^n\\left(\\sum\\limits_{i=l}^r a_i\\right)$。**\n\n罗伯特 · 兰登希望在瘟疫扩散之前找到有关的线索。于是他找到了你。\n\n- - -\n\n#### 【形式化题意】\n\n给定一个只包含 $-1,0,1$ 的序列，求出往 $0$ 的位置上填 $k$ 个 $1$，其余填 $-1$ 后最大子段和的最大值。", "inputFormat": "第一行两个正整数 $n,k$。\n\n接下来一行 $n$ 个整数 $a_i\\in\\{-1,0,1\\}$，其中 $0$ 表示数字模糊不清。", "outputFormat": "一行一个正整数，表示可能的最大子段和。", "hint": "#### 【样例解释】\n\n一种可行的方案是填入 $\\{1,1,-1\\}$，最大子段和为 $2$。\n\n#### 【数据范围】\n\n\n**本题开启捆绑测试。**\n\n| $\\text{SubTask}$ | 分值 | $n,k\\le $ |\n| :----------: | :----------: | :----------: |\n| $0$ | $4$ | $20$ | \n| $1$ | $6$ | $200$ | \n| $2$ | $10$ | $5\\times 10^3$ | \n| $3$ | $30$ | $5\\times 10^5$ | \n| $4$ | $50$ | $10^7$ | \n\n\n对于 $100\\%$ 的数据，$1\\le n,k\\le10^7$，$a_i\\in \\{-1,0,1\\}$。保证 $k\\le$ 序列中 $0$ 的个数。\n\n**本题标程使用优化后的输入输出，在 O2 优化下最大点用时约 $350$ ms，足以通过此题。如果您自认为您的程序复杂度正确，却超出时间限制，请使用更优的输入输出方式，或者优化常数。**\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Inferno", "background": "> 我是幽灵。  \n> 穿过悲惨之城，我落荒而逃。  \n> 穿过永世凄苦，我远走高飞。\n\n沿着阿尔诺河的堤岸，我夺路狂奔，气喘吁吁……左转上了卡斯特拉尼大街，一直朝北而行，始终隐蔽在乌菲兹美术馆的阴影之下。\n\n但他们还是穷追不舍。\n\n他们的脚步声越来越响，这些追捕者冷酷无情，不达目的绝不善罢甘休。\n\n这么多年来，他们一直尾随着我。他们锲而不舍，是的我只能活在地下……被迫呆在炼狱之中……就像冥府的恶魔，时刻忍受地狱的煎熬。\n\n> 我是幽灵。\n\n如今浮生尘世，我举目北望，却看不到通往救赎的捷径——那高耸的亚平宁山脉挡住了黎明的第一缕阳光。", "description": "罗伯特 · 兰登在洗下但丁死亡面具上的丙烯石膏后，在背面发现了一行字：\n\n> 哦，有着稳固智慧的人啊，  \n> 请注意这里的含义  \n> 就藏在晦涩的序列面纱之下。\n\n下面有一行由 $1,-1$ 组成的长度为 $n$ 的序列。面具经受了岁月的侵蚀，序列中有一些数已经模糊不清。幸运的是，面具下面有给出两条线索：\n\n> 你只得往空缺的位置填 $k$ 个 $1$，其余填入 $-1$，需要最大化这个序列的最大子段和。\n\n > > **一个序列的最大子段和定义为，其在一段连续长度的区间内的最大和。形式化地，一个序列 $a$ 的最大子段和即为 $\\max\\limits_{l=1}^n\\max\\limits_{r=l}^n\\left(\\sum\\limits_{i=l}^r a_i\\right)$。**\n\n罗伯特 · 兰登希望在瘟疫扩散之前找到有关的线索。于是他找到了你。\n\n- - -\n\n#### 【形式化题意】\n\n给定一个只包含 $-1,0,1$ 的序列，求出往 $0$ 的位置上填 $k$ 个 $1$，其余填 $-1$ 后最大子段和的最大值。", "inputFormat": "第一行两个正整数 $n,k$。\n\n接下来一行 $n$ 个整数 $a_i\\in\\{-1,0,1\\}$，其中 $0$ 表示数字模糊不清。", "outputFormat": "一行一个正整数，表示可能的最大子段和。", "hint": "#### 【样例解释】\n\n一种可行的方案是填入 $\\{1,1,-1\\}$，最大子段和为 $2$。\n\n#### 【数据范围】\n\n\n**本题开启捆绑测试。**\n\n| $\\text{SubTask}$ | 分值 | $n,k\\le $ |\n| :----------: | :----------: | :----------: |\n| $0$ | $4$ | $20$ | \n| $1$ | $6$ | $200$ | \n| $2$ | $10$ | $5\\times 10^3$ | \n| $3$ | $30$ | $5\\times 10^5$ | \n| $4$ | $50$ | $10^7$ | \n\n\n对于 $100\\%$ 的数据，$1\\le n,k\\le10^7$，$a_i\\in \\{-1,0,1\\}$。保证 $k\\le$ 序列中 $0$ 的个数。\n\n**本题标程使用优化后的输入输出，在 O2 优化下最大点用时约 $350$ ms，足以通过此题。如果您自认为您的程序复杂度正确，却超出时间限制，请使用更优的输入输出方式，或者优化常数。**\n", "locale": "zh-CN"}}}
{"pid": "P8946", "type": "P", "difficulty": 7, "samples": [["2 2\nC", "4"], ["2 2\nA", "5"], ["8 8\nCCACAAC", "399968"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "洛谷原创", "O2优化"], "title": "The Lost Symbol", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/g4ofcg40.png)", "description": "设二元运算符 $k\\operatorname A n$ 为排列数 ${\\rm A}_n^k$，$k \\operatorname C n$ 为组合数 ${\\rm C}_n^k$，定义 $k>n$ 时两者的值都为 $0$。\n\n给定 $n,m$ 和一个长度为 $n-1$ 的仅包含 $\\textrm A,\\textrm C$ 的序列 ${\\rm opt}_{[1,n-1]}$，对所有长度为 $n$，且每一个数都是 $[1,m]$ 中的整数的序列 $a_{[1,n]}$ 求 $(\\cdots(((a_1\\operatorname{opt}_1 a_2)\\operatorname{opt}_2 a_3)\\operatorname{opt}_3 a_4)\\cdots\\operatorname{opt}_{n-2}a_{n-1})\\operatorname{opt}_{n-1}a_n$ 的和。\n\n答案对质数 $11417603$ 取模。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来一行一个长度为 $n-1$ 的字符串表示 $\\text{opt}$。", "outputFormat": "一行一个整数表示答案。", "hint": "#### 【样例解释】\n对于样例 #1：\n\n$1\\operatorname C 1=1$，$1\\operatorname C 2=2$，$2\\operatorname C 1=0$，$2\\operatorname C 2=1$，求和为 $4$。\n\n对于样例 #2：\n\n$1\\operatorname A 1=1$，$1\\operatorname A 2=2$，$2\\operatorname A 1=0$，$2\\operatorname A 2=2$，求和为 $5$。\n\n#### 【数据范围】\n\n不开启捆绑测试，按点给分。\n\n对于 $100\\%$ 的数据，$2\\leq n,m\\leq 10^5$，${\\rm opt}$ 仅包含 $\\textrm A,\\textrm C$。\n\n| 测试点编号 | $n\\leq$ | $m\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim3$ | $8$ | $8$ | 无 | \n| $4\\sim6$ | $314$ | $159$ | 无 | \n| $7\\sim10$ | $2718$ | $2818$ | 无 | \n| $11\\sim13$ | $10^5$ | $10^5$ | $\\rm opt$ 仅由 $\\rm A$ 构成 |\n| $14\\sim16$ | $10^5$ | $10^5$ | $\\rm opt$ 仅由 $\\rm C$ 构成 |\n| $17\\sim20$ | $10^5$ | $10^5$ | $\\rm opt$ 由不超过 $10$ 段连续的 $\\rm A$ 和连续的 $\\rm C$ 拼接而成 |\n| $21,22$ | $8492$ | $10^5$ | 无 |\n| $23\\sim25$ | $10^5$ | $10^5$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "The Lost Symbol", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/g4ofcg40.png)", "description": "设二元运算符 $k\\operatorname A n$ 为排列数 ${\\rm A}_n^k$，$k \\operatorname C n$ 为组合数 ${\\rm C}_n^k$，定义 $k>n$ 时两者的值都为 $0$。\n\n给定 $n,m$ 和一个长度为 $n-1$ 的仅包含 $\\textrm A,\\textrm C$ 的序列 ${\\rm opt}_{[1,n-1]}$，对所有长度为 $n$，且每一个数都是 $[1,m]$ 中的整数的序列 $a_{[1,n]}$ 求 $(\\cdots(((a_1\\operatorname{opt}_1 a_2)\\operatorname{opt}_2 a_3)\\operatorname{opt}_3 a_4)\\cdots\\operatorname{opt}_{n-2}a_{n-1})\\operatorname{opt}_{n-1}a_n$ 的和。\n\n答案对质数 $11417603$ 取模。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来一行一个长度为 $n-1$ 的字符串表示 $\\text{opt}$。", "outputFormat": "一行一个整数表示答案。", "hint": "#### 【样例解释】\n对于样例 #1：\n\n$1\\operatorname C 1=1$，$1\\operatorname C 2=2$，$2\\operatorname C 1=0$，$2\\operatorname C 2=1$，求和为 $4$。\n\n对于样例 #2：\n\n$1\\operatorname A 1=1$，$1\\operatorname A 2=2$，$2\\operatorname A 1=0$，$2\\operatorname A 2=2$，求和为 $5$。\n\n#### 【数据范围】\n\n不开启捆绑测试，按点给分。\n\n对于 $100\\%$ 的数据，$2\\leq n,m\\leq 10^5$，${\\rm opt}$ 仅包含 $\\textrm A,\\textrm C$。\n\n| 测试点编号 | $n\\leq$ | $m\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim3$ | $8$ | $8$ | 无 | \n| $4\\sim6$ | $314$ | $159$ | 无 | \n| $7\\sim10$ | $2718$ | $2818$ | 无 | \n| $11\\sim13$ | $10^5$ | $10^5$ | $\\rm opt$ 仅由 $\\rm A$ 构成 |\n| $14\\sim16$ | $10^5$ | $10^5$ | $\\rm opt$ 仅由 $\\rm C$ 构成 |\n| $17\\sim20$ | $10^5$ | $10^5$ | $\\rm opt$ 由不超过 $10$ 段连续的 $\\rm A$ 和连续的 $\\rm C$ 拼接而成 |\n| $21,22$ | $8492$ | $10^5$ | 无 |\n| $23\\sim25$ | $10^5$ | $10^5$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P8947", "type": "P", "difficulty": 7, "samples": [["5 11 0\nabb\naab\nbaab\nbbaa\naabbb\n1 ab\n2 1 1 3\n2 2 2 3\n1 ba\n2 3 1 2\n2 4 1 2\n2 4 2 3\n1 abb\n2 5 2 4\n2 1 1 3\n2 1 1 2\n", "0\n1\n1\n0\n1\n1\n1\n2\n"], ["5 11 1\n114 514 1919810\nabb\naab\nbaab\nbbaa\naabbb\n1 ab\n2 1 1 3\n2 2 2 3\n1 ba\n2 3 1 2\n2 4 1 2\n2 4 2 3\n1 abb\n2 5 2 4\n2 1 1 3\n2 1 1 2\n", "0\n0\n1\n0\n0\n1\n1\n0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2023", "洛谷原创", "后缀自动机 SAM", "O2优化"], "title": "Angels & Demons", "background": "教皇内侍已经感觉到了身体上的疼痛。疼痛迅速传遍了全身，让他想抓想挠。\n\n>不要忘记耶稣所遭受的痛苦。\n\n他感觉喉咙中有种火烧火燎般的疼痛，就连吗啡都无法将之化解。\n\n>我在这里的事情已经做完了。\n\n他激起了人们的敬畏之心，人们又有了希望。\n\n在帕利恩凹室里的时候，教皇内侍遵从上帝的教诲，举行了涂油仪式。他的身体上，发须上，面颊上，麻布长袍上，全身都涂满了灯油。他这会儿像是浸泡在神圣的绿色灯油中一样，气味芬芳，如母亲的体香，可却易燃烧。他将会幸运地升天。那是个充满奇迹而又迅速的过程。他留给世人的不再是丑闻……而是一股新的力量和奇迹。\n\n他的手滑入长袍的口袋，摸出从帕利恩凹室里拿来的小小的金色打火机。\n\n他低声说出了上帝在最后审判时说过的一句话。\n\n>熊熊烈焰直冲云霄，上帝的天使也会在火焰中升天。\n\n他的大拇指按在了打火机上。\n\n人们还在圣彼得广场上唱着颂歌……", "description": "给定 $n$ 个由小写字母组成的模板串 $S_{1...n}$，$q$ 组询问，询问分为以下两种类型：\n\n1. `1 T`：给定一个由小写字母组成的询问串 $T$。\n2. `2 p l r`：设 $num(p,l,r)$ 表示 $S_p$ 的 $[l,r]$ 子串是多少个询问串的子串，求 $\\max\\limits_{i=1}^{l}(num(p,i,r))$。", "inputFormat": "第一行，两个数 $n,q,w_0$，其中 $w_0$ 表示数据类型。\n\n* $w_0=0$：\n  \n  第 $2\\sim n+1$ 行，每行一个字符串，第 $i+1$ 行表示 $S_i$。\n  \n  接下来 $q$ 行，每行一组询问，格式如题。\n* $w_0=1$：\n  \n  第二行，输入三个整数 $A,B,C$。\n  \n  接下来 $n$ 行，每行一个字符串，表示一个模板串。\n  \n  接下来，询问按照如下代码生成（代码中的 ```lst``` 表示上一次询问 $2$ 的答案，初始时为 $0$，```le[i]``` 表示模板串 $i$ 的长度，```s``` 是 char 数组）：\n  \n```cpp\nwhile (q--) {\n\tint op;\n\tscanf(\"%d\", &op);\n\tif (op == 1) {\n\t\tscanf(\"%s\", s + 1);\n\t\tint x((1ll * A * lst + B) % C), l(strlen(s + 1));\n\t\tfor (int i(1); i <= l; ++i) {\n\t\t\tswap(s[i], s[x % l + 1]);\n\t\t\tx = (1ll * A * x + B) % C;\n\t\t}\n\t} else {\n\t\tint p, l, r;\n\t\tscanf(\"%d%d%d\", &p, &l, &r);\n\t\tint x((1ll * A * lst + B) % C);\n\t\tp = (p + x) % n + 1;\n\t\tx = (1ll * A * x + B) % C;\n\t\tl = (l + x) % le[p] + 1;\n\t\tx = (1ll * A * x + B) % C;\n\t\tr = (r + x) % le[p] + 1;\n\t\tif (l > r) swap(l, r);\n\t\t// 此处更新 lst\n\t}\n}\n```\n", "outputFormat": "对于每个询问 $2$，输出一行一个整数表示答案。", "hint": "对于 $100\\%$ 数据：$1\\le n,q\\le 10^5$，$\\sum\\limits_{i=1}^{n}|S_i|\\le5\\times10^5$，$\\sum|T|\\le5\\times10^5$，$1\\le p\\le n$，$w_0\\in\\{0,1\\}$，$1\\le A,B<C\\le10^9$。\n\n|测试点|分值|$n\\le$|$\\sum\\limits_{i=1}^{n}\\|S_i\\|\\le$|$q\\leq $|$\\sum \\| T\\| \\leq $|$w_0=$|其他限制|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1$|$3$|$20$|$200$|$200$|$5000$|$0$|无|\n|$2$|$3$|$200$|$2000$|$200$|$5000$|$0$|无|\n|$3$|$3$|$200$|$2000$|$200$|$5000$|$0$|无|\n|$4$|$3$|$200$|$2000$|$200$|$5\\times10^5$|$0$|无|\n|$5$|$3$|$200$|$2000$|$200$|$5\\times10^5$|$0$|无|\n|$6$|$3$|$1$|$5\\times10^5$|$2$|$5\\times10^5$|$0$|无|\n|$7$|$3$|$1$|$5\\times10^5$|$2$|$5\\times10^5$|$0$|无|\n|$8$|$4$|$10^5$|$10^5$|$10^5$|$10^5$|$0$|无|\n|$9$|$3$|$10^5$|$10^5$|$10^5$|$10^5$|$0$|字符串随机|\n|$10$|$4$|$10^5$|$2 \\times 10^5$|$10^5$|$2 \\times 10^5$|$0$|无|\n|$11$|$3$|$10^5$|$2 \\times 10^5$|$10^5$|$2 \\times 10^5$|$0$|字符串随机|\n|$12$|$4$|$10^5$|$3 \\times 10^5$|$10^5$|$3 \\times 10^5$|$0$|无|\n|$13$|$3$|$10^5$|$3 \\times 10^5$|$10^5$|$3 \\times 10^5$|$0$|字符串随机|\n|$14$|$4$|$10^5$|$4 \\times 10^5$|$10^5$|$4 \\times 10^5$|$0$|无|\n|$15$|$3$|$10^5$|$4 \\times 10^5$|$10^5$|$4 \\times 10^5$|$0$|字符串随机|\n|$16$|$4$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$17$|$3$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|字符串随机|\n|$18$|$3$|$10^5$|$2 \\times 10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$19$|$3$|$10^5$|$3 \\times 10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$20$|$3$|$10^5$|$4 \\times 10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$21$|$3$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|字符串随机|\n|$22$|$3$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$23$|$3$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$24$|$3$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$25$|$3$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$26$|$4$|$10^5$|$3\\times10^5$|$10^5$|$5\\times10^5$|$1$|无|\n|$27$|$4$|$10^5$|$4\\times10^5$|$10^5$|$5\\times10^5$|$1$|无|\n|$28$|$4$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$1$|无|\n|$29$|$4$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$1$|无|\n|$30$|$4$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$1$|无|\n\n**测试点 $8\\sim 17$ 保证对于所有询问 $2$，$l=1$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Angels & Demons", "background": "教皇内侍已经感觉到了身体上的疼痛。疼痛迅速传遍了全身，让他想抓想挠。\n\n>不要忘记耶稣所遭受的痛苦。\n\n他感觉喉咙中有种火烧火燎般的疼痛，就连吗啡都无法将之化解。\n\n>我在这里的事情已经做完了。\n\n他激起了人们的敬畏之心，人们又有了希望。\n\n在帕利恩凹室里的时候，教皇内侍遵从上帝的教诲，举行了涂油仪式。他的身体上，发须上，面颊上，麻布长袍上，全身都涂满了灯油。他这会儿像是浸泡在神圣的绿色灯油中一样，气味芬芳，如母亲的体香，可却易燃烧。他将会幸运地升天。那是个充满奇迹而又迅速的过程。他留给世人的不再是丑闻……而是一股新的力量和奇迹。\n\n他的手滑入长袍的口袋，摸出从帕利恩凹室里拿来的小小的金色打火机。\n\n他低声说出了上帝在最后审判时说过的一句话。\n\n>熊熊烈焰直冲云霄，上帝的天使也会在火焰中升天。\n\n他的大拇指按在了打火机上。\n\n人们还在圣彼得广场上唱着颂歌……", "description": "给定 $n$ 个由小写字母组成的模板串 $S_{1...n}$，$q$ 组询问，询问分为以下两种类型：\n\n1. `1 T`：给定一个由小写字母组成的询问串 $T$。\n2. `2 p l r`：设 $num(p,l,r)$ 表示 $S_p$ 的 $[l,r]$ 子串是多少个询问串的子串，求 $\\max\\limits_{i=1}^{l}(num(p,i,r))$。", "inputFormat": "第一行，两个数 $n,q,w_0$，其中 $w_0$ 表示数据类型。\n\n* $w_0=0$：\n  \n  第 $2\\sim n+1$ 行，每行一个字符串，第 $i+1$ 行表示 $S_i$。\n  \n  接下来 $q$ 行，每行一组询问，格式如题。\n* $w_0=1$：\n  \n  第二行，输入三个整数 $A,B,C$。\n  \n  接下来 $n$ 行，每行一个字符串，表示一个模板串。\n  \n  接下来，询问按照如下代码生成（代码中的 ```lst``` 表示上一次询问 $2$ 的答案，初始时为 $0$，```le[i]``` 表示模板串 $i$ 的长度，```s``` 是 char 数组）：\n  \n```cpp\nwhile (q--) {\n\tint op;\n\tscanf(\"%d\", &op);\n\tif (op == 1) {\n\t\tscanf(\"%s\", s + 1);\n\t\tint x((1ll * A * lst + B) % C), l(strlen(s + 1));\n\t\tfor (int i(1); i <= l; ++i) {\n\t\t\tswap(s[i], s[x % l + 1]);\n\t\t\tx = (1ll * A * x + B) % C;\n\t\t}\n\t} else {\n\t\tint p, l, r;\n\t\tscanf(\"%d%d%d\", &p, &l, &r);\n\t\tint x((1ll * A * lst + B) % C);\n\t\tp = (p + x) % n + 1;\n\t\tx = (1ll * A * x + B) % C;\n\t\tl = (l + x) % le[p] + 1;\n\t\tx = (1ll * A * x + B) % C;\n\t\tr = (r + x) % le[p] + 1;\n\t\tif (l > r) swap(l, r);\n\t\t// 此处更新 lst\n\t}\n}\n```\n", "outputFormat": "对于每个询问 $2$，输出一行一个整数表示答案。", "hint": "对于 $100\\%$ 数据：$1\\le n,q\\le 10^5$，$\\sum\\limits_{i=1}^{n}|S_i|\\le5\\times10^5$，$\\sum|T|\\le5\\times10^5$，$1\\le p\\le n$，$w_0\\in\\{0,1\\}$，$1\\le A,B<C\\le10^9$。\n\n|测试点|分值|$n\\le$|$\\sum\\limits_{i=1}^{n}\\|S_i\\|\\le$|$q\\leq $|$\\sum \\| T\\| \\leq $|$w_0=$|其他限制|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1$|$3$|$20$|$200$|$200$|$5000$|$0$|无|\n|$2$|$3$|$200$|$2000$|$200$|$5000$|$0$|无|\n|$3$|$3$|$200$|$2000$|$200$|$5000$|$0$|无|\n|$4$|$3$|$200$|$2000$|$200$|$5\\times10^5$|$0$|无|\n|$5$|$3$|$200$|$2000$|$200$|$5\\times10^5$|$0$|无|\n|$6$|$3$|$1$|$5\\times10^5$|$2$|$5\\times10^5$|$0$|无|\n|$7$|$3$|$1$|$5\\times10^5$|$2$|$5\\times10^5$|$0$|无|\n|$8$|$4$|$10^5$|$10^5$|$10^5$|$10^5$|$0$|无|\n|$9$|$3$|$10^5$|$10^5$|$10^5$|$10^5$|$0$|字符串随机|\n|$10$|$4$|$10^5$|$2 \\times 10^5$|$10^5$|$2 \\times 10^5$|$0$|无|\n|$11$|$3$|$10^5$|$2 \\times 10^5$|$10^5$|$2 \\times 10^5$|$0$|字符串随机|\n|$12$|$4$|$10^5$|$3 \\times 10^5$|$10^5$|$3 \\times 10^5$|$0$|无|\n|$13$|$3$|$10^5$|$3 \\times 10^5$|$10^5$|$3 \\times 10^5$|$0$|字符串随机|\n|$14$|$4$|$10^5$|$4 \\times 10^5$|$10^5$|$4 \\times 10^5$|$0$|无|\n|$15$|$3$|$10^5$|$4 \\times 10^5$|$10^5$|$4 \\times 10^5$|$0$|字符串随机|\n|$16$|$4$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$17$|$3$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|字符串随机|\n|$18$|$3$|$10^5$|$2 \\times 10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$19$|$3$|$10^5$|$3 \\times 10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$20$|$3$|$10^5$|$4 \\times 10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$21$|$3$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|字符串随机|\n|$22$|$3$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$23$|$3$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$24$|$3$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$25$|$3$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$0$|无|\n|$26$|$4$|$10^5$|$3\\times10^5$|$10^5$|$5\\times10^5$|$1$|无|\n|$27$|$4$|$10^5$|$4\\times10^5$|$10^5$|$5\\times10^5$|$1$|无|\n|$28$|$4$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$1$|无|\n|$29$|$4$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$1$|无|\n|$30$|$4$|$10^5$|$5\\times10^5$|$10^5$|$5\\times10^5$|$1$|无|\n\n**测试点 $8\\sim 17$ 保证对于所有询问 $2$，$l=1$。**", "locale": "zh-CN"}}}
